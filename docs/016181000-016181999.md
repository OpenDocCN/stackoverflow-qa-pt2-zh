# StackOverflow 问答 16181000-16181999

# camera - 在银河王牌上设置变焦相机

> ID：16181008
> 
> 赞同：2
> 
> 时间：2013-04-23T23:43:07.020
> 
> 标签：camera, zooming, galaxy

在我的银河王牌上：

```
parameters.isSmoothZoomSupported () = false
parameters.isZoomSupported () = false 
```

但在应用程序默认相机将分辨率设置为 640 x 480 时，您可以进行缩放。

我怎样才能获得相同的效果？

我尝试`setPictureSize()`手动设置，但没有成功

```
List<Size> sl = parameters.getSupportedPictureSizes();
parameters.setPictureSize(sl.get(sl.size()-1).width, sl.get(sl.size()-1).height);
mCamera.setParameters(parameters); 
```

# java - 如何将 Android XML 布局转换为 Java 类？

> ID：16181015
> 
> 赞同：2
> 
> 时间：2013-04-23T23:44:28.890
> 
> 标签：java, android, android-layout

这是我正在尝试做的事情：

我想创建一个包含在包含视图和图像的 Android 应用程序中的 JAR。据我所知，您不能将 res 文件夹打包在 JAR 中。所以我要做的是将我的 res 文件夹中的 XML 文件转换为一个 Android 视图类，然后我可以将它作为项目的一部分编译到 JAR 中。

是否有任何工具或项目成功地做到了这一点？也欢迎替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:50:09.337

您可以动态地制作其中的每个视图并设置适当的设置 - xml 中的每个设置都有一个匹配的 Java 调用来更改。但是，除了布局文件夹之外，这并不能解决任何问题。将代码作为 Android 库项目提供给他们会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:11:34.080

我有这个确切的问题：想要将我的库作为 jar 文件分发。合理数量的支持问题是由不熟悉库项目位的人引起的（令我震惊，但我该争论谁）。

首先，确实不支持从 XML 布局自动生成 java 类。我原以为我可以提取 ADT 使用的源代码来将您的 XML 布局呈现到单独的类中，但是在为此折腾了几个小时后，我放弃了，而是手工编写了布局。让它们在代码中扩展`RelativeLayout`和构建层次结构。有效，但规模不大。在某些时候，可能值得深入研究 ADT 源以允许您导出布局。

对于图像，我将其限制为仅图标，然后编写了一个丑陋的小工具，该工具`byte[]`将从 PNG 文件生成一个数组，然后将其作为静态最终变量添加到每个图像的单独类中：您仅限于小图像，我认为少于 40k 或者由于生成的类文件太大，Android 构建过程的某些未知部分会出错。完成后，我可以使用如下代码重构视图类中的图像：

```
audio_icon = new BitmapDrawable(BitmapFactory.decodeByteArray(AudioIcon.bytes, 0, AudioIcon.bytes.length)); 
```

我有一个包含所有图标的包，它实际上工作得很好。您确实放弃了库格式提供的自定义选项，但它使我们的集成过程变得非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:03:54.653

Do this:

```
public class MyView extends View{
    private TextView tv; //or other elements in the layout you want
    //here also has constructors
    @Override
    public void onDraw(Canvas canvas){
        //draw the views that you prepared in your constructor
    }
} 
```

If you extend `LinearLayout` it would be LinearLayout in XML, extends `RelativeLayout` then be RelativeLayout etc. All these layouts are subclasses of `View`.

# xml - Joomla 3.0 JForm“value_field”

> ID：16181017
> 
> 赞同：2
> 
> 时间：2013-04-23T23:44:49.103
> 
> 标签：xml, joomla

我有一个用于管理员区域的 Jform。该组件适用于 Joomla 3.0。

此代码位于模型/表单中，它是一个 xml 文件

这是我的代码

```
<field name="winnerid"
        query="SELECT `id`,`surname` ,`firstname` FROM #__squashladder_playerinfo ORDER BY `surname`"
        type="sql"
        key_field="id"
        value_field="firstname"

        id="winnerid"
        onchange="winnerrating(this.value)"
        default="0"
        label="Winner ID"
        description="Winner ID"  > 
         <option value="0">Select Winner</option> 

         </field> 
```

我尝试了几种方法，但我无法将名字和姓氏放在“value_field”区域。

目前它只显示名字，我希望它显示名字，然后是空格和姓氏。

我可以把 php 放在这个区域来组合它们还是我必须做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:30:11.777

好吧，我刚刚发现了如何为其他想知道的人做这件事，你只需要在 sql 查询中做。

```
query="SELECT id, concat(surname, ' ',firstname) as firstname FROM #__squashladder_playerinfo ORDER BY surname" 
```

# java - 使用 gson 循环嵌套 ArrayList 以显示来自 JSON 的值

> ID：16181018
> 
> 赞同：3
> 
> 时间：2013-04-23T23:44:52.547
> 
> 标签：java, android, json, android-layout, gson

问：我的 json 具有嵌套元素形式的值，正如您在下面看到的，我在数组中有来自服务器的值，并且里面有第二个数组。现在我使用 gson 来解析这些值，每件事都在正常工作，直到 `"orderDetailList"`但当我尝试循环抛出“subItemPart”时，我无法检索 subItemPart 对象的值。

源代码：

在文件 myFile.json 中输入 JSON 字符串（使用 JSONLint 验证：有效 JSON）

```
{
  "customerId": "CUST01",
  "orderId": "101010",
  "orderTotal": 99.99,
  "orderDetailList": [
    {
      "lineId": "1",
      "itemNumber": "ABC",
      "quantity": 9,
      "price": 10.0,
      "subItemPart":[{"itemName":"RAM", "quantity": 5}, {"itemName":"LED", "quantity": 3}]
    },
    {
      "lineId": "2",
      "itemNumber": "XYZ",
      "quantity": 1,
      "price": 9.99 ,
      "subItemPart":[{"itemName":"RAM", "quantity": 5}, {"itemName":"LED", "quantity": 3}]
    }
  ]
} 
```

用于将 JSON 字符串转换为 Java 对象的 Java 源代码

```
package com.as400samplecode;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;

import com.as400samplecode.util.OrderDetail;
import com.as400samplecode.util.OrderHeader;
import com.google.gson.Gson;

public class ParseJSON {

 public static void main(String[] args) {

  String myJSONString = "";
  BufferedReader bufferedReader = null;

  try {

   String sCurrentLine;

   bufferedReader = new BufferedReader(new FileReader("data/myFile.json"));

   while ((sCurrentLine = bufferedReader.readLine()) != null) {
    myJSONString = myJSONString + sCurrentLine;
   }

  } catch (IOException e) {
   e.printStackTrace();
  } finally {
   try {
    if (bufferedReader != null){
     bufferedReader.close();
    }
   } catch (IOException ex) {
    ex.printStackTrace();
   }
  }

  Gson gson = new Gson();
  OrderHeader orderHeader = gson.fromJson(myJSONString, OrderHeader.class);

  System.out.println("Order Information --->");
  System.out.println("Customer Id: " + orderHeader.getCustomerId());
  System.out.println("Order Id: " + orderHeader.getOrderId());
  System.out.println("Order Total: " + orderHeader.getOrderTotal());

  ArrayList<OrderDetail> orderDetailList = orderHeader.getOrderDetailList();
  for (int i=0; i<orderDetailList.size(); i++){
   System.out.println("Order Detail --->");
   OrderDetail orderDetail = orderDetailList.get(i);
   System.out.println("Line Id: " + orderDetail.getLineId());
   System.out.println("Item Number: " + orderDetail.getItemNumber());
   System.out.println("Quantity: " + orderDetail.getQuantity());
   System.out.println("Price: " + orderDetail.getPrice());

   **//HOW CAN I HERE LOOP AND DISPLAY VALUES OF SubOrderItem?**
   //I GET error when i do: System.out.println("SubItem: " +orderDetail.getSubOrderDetail.itemName);

  }

 }

} 
```

OrderHeader 对象的 Java 源代码

```
package com.as400samplecode.util;

import java.util.ArrayList;

public class OrderHeader {

 String customerId = null;
 String orderId = null;
 Double orderTotal = null;
 ArrayList<OrderDetail> orderDetailList;

 public String getCustomerId() {
  return customerId;
 }
 public void setCustomerId(String customerId) {
  this.customerId = customerId;
 }
 public String getOrderId() {
  return orderId;
 }
 public void setOrderId(String orderId) {
  this.orderId = orderId;
 }
 public Double getOrderTotal() {
  return orderTotal;
 }
 public void setOrderTotal(Double orderTotal) {
  this.orderTotal = orderTotal;
 }
 public ArrayList<OrderDetail> getOrderDetailList() {
  return orderDetailList;
 }
 public void setOrderDetailList(ArrayList<OrderDetail> orderDetailList) {
  this.orderDetailList = orderDetailList;
 }

} 
```

OrderDetail 对象的 Java 源代码

```
package com.as400samplecode.util;

public class OrderDetail {

 String lineId = null;
 String itemNumber = null;
 int quantity = 0;
 Double price = null;
 ArrayList<SubOrderItemDetail> subItemPart;

 public String getLineId() {
  return lineId;
 }
 public void setLineId(String lineId) {
  this.lineId = lineId;
 }
 public String getItemNumber() {
  return itemNumber;
 }
 public void setItemNumber(String itemNumber) {
  this.itemNumber = itemNumber;
 }
 public int getQuantity() {
  return quantity;
 }
 public void setQuantity(int quantity) {
  this.quantity = quantity;
 }
 public Double getPrice() {
  return price;
 }
 public void setPrice(Double price) {
  this.price = price;
 }
 public ArrayList<SubItemDetail> getSubOrderDetail() {
  return subItemPart;
 }
 public void setSubOrderDetail(ArrayList<SubItemDetail> subItemPart) {
  this.subItemPart = subItemPart;
 }

} 
```

**//我的问题是我如何获取这个元素的值，因为它们是 json 嵌套数组的值** SubItemPart 对象的 Java 源代码

```
package com.as400samplecode.util;

public class SubOrderDetail {

 String itemName = null;
 int quantity = 0;

 public String getLineId() {
  return itemName;
 }
 public void setLineId(String itemName) {
  this.itemName = itemName;
 }
 public int getItemNumber() {
  return quantity;
 }
 public void setItemNumber(int quantity) {
  this.quantity = quantity;
 }

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:18:55.923

好吧，首先你的类名有点乱。因为在你的课上`OrderDetail`你有：

```
ArrayList<SubOrderItemDetail> subItemPart;

//...

public ArrayList<SubItemDetail> getSubOrderDetail() {
  return subItemPart;
}
public void setSubOrderDetail(ArrayList<SubItemDetail> subItemPart) {
  this.subItemPart = subItemPart;
} 
```

然后你的另一堂课是：

```
public class SubOrderDetail { 
```

那么...您是否意识到同一类有 3 个不同的名称（即`SubOrderItemDetail`和`SubItemDetail`）`SubOrderDetail`？

* * *

也就是说，如果您解决了名称问题，您的代码就可以正常工作，并且您只有一个非常简单的问题来显示它。为了在 a 中显示子列表，`for`您只需在有注释行的位置添加此代码：

```
ArrayList<SubOrderItemDetail> subOrderDetailList = orderDetail.getSubOrderDetail();
for (int j = 0; j < orderDetailList.size(); j++) {
  System.out.println("Sub Order Detail --->");
  SubOrderItemDetail subOrderDetail = subOrderDetailList.get(j);
  System.out.println("Line Id: " + subOrderDetail.getLineId());
  System.out.println("Item Number: " + subOrderDetail.getItemNumber());
} 
```

请注意，在我编写的代码中，我遵循您之前代码中的样式，但我更喜欢这种方式：

```
for (SubOrderItemDetail soid : orderDetail.getSubOrderDetail()) {
  System.out.println("Line Id: " + soid.getLineId());
  System.out.println("Item Number: " + soid.getItemNumber());
} 
```

你也可以在你以前的风格中遵循这种风格，你`for`的代码会更干净......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:01:07.720

在`OrderDetail`课堂上而不是

```
 `ArrayList<SubOrderItemDetail> orderDetailList;` 
```

应该

`ArrayList<SubOrderItemDetail> subItemPart;`

与 JSON 中的相同。

并在`SubOrderDetail`课堂上删除

`ArrayList<SubItemDetail> subItemPart;`

这应该可以解决问题。

# c# - 将制表符转换为 RichTextBox 中的空格

> ID：16181026
> 
> 赞同：1
> 
> 时间：2013-04-23T23:45:27.233
> 
> 标签：c#, winforms, richtextbox

我有一个 WinForms 应用程序，`RichTextBox`在表单上有一个控件。现在，我将`AcceptsTabs`属性设置为 true，这样当`Tab`被点击时，它会插入一个制表符。

不过，我想做的是让它在`Tab`被击中时插入 4 个空格而不是`\t`制表符（我使用的是等宽字体）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T23:59:53.977

将 AcceptsTab 属性设置为 true，只需尝试使用 KeyPress 事件：

```
void richTextBox1_KeyPress(object sender, KeyPressEventArgs e) {
  if (e.KeyChar == (char)Keys.Tab) {
    e.Handled = true;
    richTextBox1.SelectedText = new string(' ', 4);
  }
} 
```

根据您对最多每四个字符添加空格的评论，您可以尝试以下操作：

```
void richTextBox1_KeyPress(object sender, KeyPressEventArgs e) {
  if (e.KeyChar == (char)Keys.Tab) {
    e.Handled = true;
    int numSpaces = 4 - ((richTextBox1.SelectionStart - richTextBox1.GetFirstCharIndexOfCurrentLine()) % 4);
    richTextBox1.SelectedText = new string(' ', numSpaces);

  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T23:49:03.230

添加一个新类来覆盖您的`RichTextBox`：

```
class MyRichTextBox : RichTextBox
{
    protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        if(keyData == Keys.Tab)
        {
            SelectionLength = 0;
            SelectedText = new string(' ', 4);
            return true;
        }

        return base.ProcessCmdKey(ref msg, keyData);
    }
} 
```

然后，您可以将新控件拖到表单的设计视图中：

![](https://i.stack.imgur.com/WOC81.png)

**注意：**与@LarsTec 的答案不同，`AcceptsTab`此处不需要设置。

# serial-port - Arduino 2 的补码读取错误

> ID：16181037
> 
> 赞同：0
> 
> 时间：2013-04-23T23:46:43.703
> 
> 标签：serial-port, arduino

我从一个从设备得到这个代码

```
byte buf[] = {125, 126, 127, 2000, 5000};

void setup() {
  // initialize serial:
  Serial.begin(9600);

}

void loop() {
  int i = Serial.write(buf, sizeof(buf));
  Serial.println(i);
  delay(5000);

} 
```

我有这个来自监听设备的代码。

```
char protocol[5];
void setup() {
  Serial.begin(9600);
  memset(protocol, '\0', sizeof(protocol)); 
}

void loop() {
  if(Serial.available()) {
  Serial.readBytes(protocol, 5);
  Serial.println(protocol);
  for(int i = 0; i < sizeof(protocol); i ++ ) {
    Serial.println((int)protocol[i], BIN); 
  }
  }
  else{
   Serial.println("None available");
   delay(500); 
  }

} 
```

我知道 Arduino 使用 2 的恭维，但是我得到的问题是打印出来的是这个

```
1111101
1111110
1111111
11111111111111111111111111010000
11111111111111111111111110001000 
```

并且由于 2 的补码，所有零都被添加以完成字符，因为最左边的位读入为 1。无论如何，第 4 和第 5 个数字不是 2000 和 5000，而是数字与此大不相同。如何让附加的 1 消失，以便阅读 2000 和 5000？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:49:54.210

这里的问题是您将每个数字作为 8 位值存储和传输，它不足以存储数字 2000 或 5000。

要解决此问题，您需要将缓冲区数组的类型更改为`int[`]。就是这样：

在从站中，您需要更改声明缓冲区的行：

```
int buf[] = {125, 126, 127, 2000, 5000}; 
```

现在类型不同了，你必须添加一个类型转换，因为`Serial.write`需要一个`char`or`byte`数组。

```
int i = Serial.write((char *) buf, sizeof(buf)); 
```

然后，您必须在侦听器设备中进行类似的更改。像这样声明你的`protocol`数组：

```
int protocol[5]; 
```

然后，`Serial.readBytes`还需要一个字节数组，因此您需要另一个强制转换（并`sizeof`获得要读取的正确字节数）：

```
Serial.readBytes((byte *) protocol, sizeof(protocol)); 
```

**编辑：**为了解释`(char *)`从属中的强制转换是如何工作的以及为什么它是必要的，请记住这是 C++，所以（就像在 C 中一样）数组在内部几乎是一个指针。因此，当您创建五个`int`s 的数组时，真正发生的事情是您保留了 10 个字节的内存（足够五个 16 位`int`s）并收到指向它开头的指针。现在，除非另有说明，否则 C++ 会将该内存视为 5 个`int`s。`char`但是，如果您告诉它，它非常乐意将其视为 10秒。这非常方便，因为`Serial.write`它只需要一个`char`s 数组（你记得，它就像一个`char`指针，因此是`char *`）。这将正常工作，因为它将跨行发送 10 个字节作为`char`s，监听器会将相同的 10 个字节放入`protocol`数组中。然后，使用 10 字节内存块的精确副本，该`protocol`数组将具有与从站中`int`的数组相同的 s `buf`。

最后一条评论：您可能希望让您的侦听器等到实际有`sizeof(protocol)`可用字节后再尝试读取。否则，如果只有部分数据准备好，它会继续尝试读取，但`Serial.readBytes`通常只等待剩余数据的一小段时间，然后放弃并让缓冲区未填充。您可以通过添加`>= sizeof(protocol)`到相应的行来解决此问题：

```
if(Serial.available() >= sizeof(protocol)) { 
```

# php - 如何在不使用 Web 应用程序的情况下在常规 HTML 页面中显示 JavaScript、PHP 和其他 Web 开发语言的源代码？

> ID：16181041
> 
> 赞同：0
> 
> 时间：2013-04-23T23:47:02.790
> 
> 标签：php, javascript, html, css

我希望能够在我的 HTML 页面中编写 javascript、php 和其他源代码，但不能让它运行。aka，它只是在页面上完全可读，而不是被转换成代码并显示出来。

例如，我想`<php echo "Hello World!"; ?>` 出现，而不是作为一个 hello world 程序运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:48:55.190

尝试：

```
echo htmlentities('<?php echo "Hello World!"; ?>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:52:43.800

```
<pre><code>code here</code></pre> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T00:12:11.240

执行以下文本替换，或至少执行前两个。（PHP[`htmlspecialchars`](http://www.php.net/manual/en/function.htmlspecialchars.php)函数执行前四个以允许使用双引号时的转义文本作为属性值。）请参阅*MDN Introduction to HTML的“*[命名字符引用](https://developer.mozilla.org/en-US/docs/HTML/Introduction#Named_character_references)”部分。

 **   `&`和`&amp;`
*   `<`和`&lt;`
*   `>`和`&gt;`
*   `"`和`&quot;`
*   `'`使用`&#39;`或`&#039;`（或`&apos;`在不必验证为 HTML 4 的文档中）

然后将代码包围在[`<pre>...</pre>`](https://developer.mozilla.org/en-US/docs/HTML/Element/pre).

* * *

一些示例代码：

```
<script>
var url = location.href;
if (url.indexOf('hello') >= 0 && url.indexOf('world') >= 0) {
    alert('hello, world');
}
</script> 
```

变成

```
<pre>
&lt;script type="text/javascript">
var url = location.href;
if (url.indexOf('hello') >= 0 &amp;&amp; url.indexOf('world') >= 0) {
    alert('hello, world');
}
&lt;/script>
</pre> 
```

或者

```
<pre>
&lt;script type=&quot;text/javascript&quot;&gt;
var url = location.href;
if (url.indexOf(&#39;hello&#39;) &gt;= 0 &amp;&amp; url.indexOf(&#39;world&#39;) &gt;= 0) {
    alert(&#39;hello, world&#39;);
}
&lt;/script&gt;
</pre> 
```*

# asp.net - 如何在代码后面的所有方法之间共享变量？

> ID：16181043
> 
> 赞同：0
> 
> 时间：2013-04-23T23:47:11.243
> 
> 标签：asp.net, c#-4.0, webforms

我正在尝试修复一个真正糟糕的 ASP.net 4.0 程序交给我。编写它的人没有使用正常的 asp.net 标准。我本人对 ASP.net 还很陌生，并尽可能地尝试了解更多有关它的信息。无论如何，它是一个带有 C# 代码的 ASP.Net 4.0 webforms 应用程序。

我正在处理一个页面，它调用了标记本身中的代码隐藏方法。我们可以调用这个方法获取detailById。此方法调用 Web 服务，该服务使用此 ID 查询数据库并将数据集返回给后面的代码。一旦收到所有这些数据，它就会以表格的形式写入屏幕。这就是这个方法。在此页面的底部存在执行不同功能的各种按钮。让我们以一个名为 Hello 的按钮为例。这个按钮所要做的就是访问在 detailById 方法中获得的字段之一（例如：用户名）。 **如何使该变量值可用于方法背后的所有代码？** 我考虑了以下想法：

1.  像 detailById 这样的重新查询数据库来获取这个字段，但这似乎非常低效。

2.  为页面创建了一个类级别的变量，并将其值设置为 detailById 方法中的 Username 变量。这没有用。当我点击“你好”按钮时，用户名不见了。我知道它是在 detialById 方法中获得的。

3.  然后我认为回发可能是导致值消失的原因，因此我将 Username 值存储在 ViewState 变量中，而在 detailById 方法中。当我尝试访问此变量时，它也为空。我不知道为什么。

4.  最后，我在 detailById 方法中将这个值放在 Session 中。这很有效，并且可以在我的各种代码背后的方法中引用该值。这感觉像是一种错误的方式来做到这一点。我对吗？

这样做的好/正确方法是什么？

我希望我把我的问题说清楚了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:06:25.890

我建议把它放在`ViewState`（＃3）。但是你必须确保你有标记`EnableViewState=True`和标记（实际上这些是默认值）。我更喜欢使用一个属性来包装存储/检索工作，例如：`ViewStateMode=Enabled``@Page`

```
private string UserName
{
    get
    {
        return ViewState["__userId"] as string;
    }

    set
    {
        ViewState["__userId"] = value;
    }
} 
```

**更重要的是**，您必须`getDetailById`从`Page_Load`. 因为，aspx 页面上的嵌入代码在渲染阶段被调用，在此之前`ViewState`已经保存（[检查这里](https://stackoverflow.com/questions/15209500/in-asp-net-do-inline-expressions-get-executed-before-or-after-the-code-behind "在这里检查")）。如果无法将该代码移动到 中`Page_Load`，`Session`则留 (#4) 来完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:40:47.463

session 是一个很好的解决方案。您可以使用`sessionState mode="SQLServer"`以获得更好的会话性能和安全性。参考： http: [//support.microsoft.com/kb/317604](http://support.microsoft.com/kb/317604)

# css - CSS浮动div固定边距顶部

> ID：16181044
> 
> 赞同：0
> 
> 时间：2013-04-23T23:47:19.330
> 
> 标签：css, css-float, html

如何修复浮动 div？我试过margin-top

```
<div id="headerRightContent" style="float: left; height: 100px; margin-top: 105px; width: 1px; whitespace: no-wrap;background-lightyellow;margin:0px 10px 10px 12px;color: #FF00FF;border: 1px dashed black;width: 175px;padding-left:6px;padding-bottom:6px;padding-top:6px;"> 
```

但没有做任何事情，所以我添加了更多内容，左侧的 div 向下浮动并删除了浮动向上的内容......

这是[演示](http://jsfiddle.net/abuhamzah/Vmjmz/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:31:29.080

两个问题。

**问题 1：**您的容器`td`是从某个地方继承`vertical-align:middle`的。您需要删除它或使用`vertical-align:top`.

```
<td style="vertical-align:top;"> 
```

**问题 2：**您在 上设置了两次边距样式`div`，实质上是删除了您的`margin-top`设置。合并它们或删除第二个。

```
<div id="headerRightContent" style="float: left; height: 100px; margin:105px 10px 10px 12px; width: 1px; whitespace: no-wrap;background-lightyellow;color: #FF00FF;border: 1px dashed black;width: 175px;padding-left:6px;padding-bottom:6px;padding-top:6px;"> 
```

另外，我强烈建议将您的内联样式放入外部样式表中。

小提琴：http: [//jsfiddle.net/Vmjmz/3/](http://jsfiddle.net/Vmjmz/3/)

# github - Windows 版 GitHub；禁用 ctrl + shift + alt + c

> ID：16181051
> 
> 赞同：0
> 
> 时间：2013-04-23T23:48:38.503
> 
> 标签：github, github-for-windows

当我按下`ctrl + shift + alt + c`浏览器时，会打开一个新选项卡，这是我剪贴板中当前内容的新要点。这只发生在 GitHub for windows 运行时。我怎样才能禁用它！？我找不到有关此的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:36:36.040

这是一项功能，而不是错误 :) 这是 GitHub for Windows 注册的快捷方式，可帮助您快速创建要与人们共享的 Gist。

# javascript - Javascript 简化器？

> ID：16181052
> 
> 赞同：2
> 
> 时间：2013-04-23T23:48:38.337
> 
> 标签：javascript, jquery, performance, node.js, minify

我想消除未使用或与给定上下文无关的函数。假设我们有：

```
function a(){ console.log('this is an unrelated function'); }
function b(){ console.log('world'); }
function c(){ console.log('hello' + b()); }
c(); 
```

现在`a()`根本不用，我也不需要，只是让脚本变大了。这实际上也是如此`jQuery`。我不确定我是否需要像 jQuery 那样多的代码。我只使用 jQuery`highcharts`并通过 id 和 class 从 dom 中选择元素，但是摆脱未使用的函数真的很好，因为 jQuery 实在是太大了！

是否有可以进行这种缩小的在线工具、服务、功能/方法、应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T06:59:23.187

[Google Closure Compiler](https://developers.google.com/closure/compiler/)是一个 JavaScript 优化器。它是一个有用的工具，可以与其他[Google Closure Tools](https://developers.google.com/closure/)结合使用。

您可以将 Closure Compiler 用作：

*   可以从命令行运行的开源 Java 应用程序。
*   一个简单的网络应用程序。
*   一个 RESTful API。

*使用[Google Closure Compiler](https://developers.google.com/closure/compiler/)*删除死代码*：*

 *> 编译`ADVANCED_OPTIMIZATIONS`删除可证明无法访问的代码。这在与大型库结合使用时特别有用。如果您只使用大型库文件中的几个函数，编译器可以从其输出中删除除这些函数之外的所有内容。

以上段落摘自 Closure Compiler [Docs 参考](https://developers.google.com/closure/compiler/docs/compilation_levels)。*

# php - Kendo UI - 如何在点击时让 SQL 填充网格过滤第二个 SQL 填充网格？

> ID：16181056
> 
> 赞同：2
> 
> 时间：2013-04-23T23:48:58.273
> 
> 标签：php, javascript, html, kendo-ui, kendo-grid

我有一个具有唯一标识符的剑道网格，当我单击一行时，我希望它在第二个网格中显示详细信息。这两个数据集都是从链接到数据库的 php 文件中填充的。因此，第二个网格显示了该唯一标识符的所有详细信息。

第一个网格：

```
$(document).ready(function() {
                $("#grid").kendoGrid({
                    dataSource: {
                      pageSize: 100,
                        transport: {
                            read: "http://localhost:8888/stationslist.php",
                            dataType: "json"
                        },
                        schema: {
                            data: "data",
                            total: function(response) {
                                return $(response.data).length;
                                }
                            } 
                            },

                    selectable: "single",
                    sortable: {
                        mode: "multiple",
                        allowUnsort: true
                    },
                    change: function (arg) {
                        var selected = $.map(this.select(), function (item) {
                            return $(item).find('td').first().text();
                            });
                          } 
```

第二格：

```
$(document).ready(function() {
                $("#grid2").kendoGrid({
                    dataSource: {
                      pageSize: 100,
                        transport: {
                            read: "http://localhost:8888/spots.php",
                            dataType: "json"
                        },
                        schema: {
                            data: "data",
                            total: function(response) {
                                return $(response.data).length;
                                }
                            } 
                            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:17:39.000

`change`将第一个处理程序实现`grid`为：

```
change    : function (e) {
    var item = this.dataItem(this.select());
    populateGrid2(item);
} 
```

我们`item`从所选行中获取所有信息（您不需要复杂`$.map`的），然后调用第二个函数来填充第二个`grid`。

您应该考虑不要在`grid`每次选择一个 raw 时重新创建，而是重新填充它。如果是，则初始化`grid2`为：

```
$("#grid2").kendoGrid({
    dataSource : {
        pageSize : 100,
        transport: {
            read        : {
                url     : "http://localhost:8888/spots.php",
                dataType: "json"
            },
            parameterMap: function (arg, op) {
                if (op === "read") {
                    return { id: arg.id }
                }
            }
        },
        schema   : {
            data : "data",
            total: function (response) {
                return $(response.data).length;
            }
        }
    },
    autoBind: false
}); 
```

我们说不要自动绑定（在我们明确说明之前不要读取数据），然后定义一个`parameterMap`用于管理参数的函数（将其发送`id`到服务器）。

现在，函数`populateGrid2`只是：

```
function populateGrid2(item) {
    var ds = $("#grid2").data("kendoGrid").dataSource;
    ds.filter({ field: "Identifier", operator: "eq", value: item.Identifier });
} 
```

简单、优雅、高效！

你可以在[这里](http://docs.kendoui.com/api/framework/datasource#methods-filter)`filter`找到文档

# android - 在 textview 中写入一个数字并将其作为字符串发送

> ID：16181060
> 
> 赞同：-1
> 
> 时间：2013-04-23T23:49:31.303
> 
> 标签：android

我想在文本视图中写入一个值（数字），然后按下按钮将其作为字符串发送。有没有关于我如何做到这一点的基本代码？我的手机必须与蓝牙 CC2540 套件通信。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:00:08.073

将整数放入`TextView`：

```
textView.setText("" + intValue); 
```

从 a 获取字符串`TextView`：

```
textView.getText().toString(); 
```

然后，您需要更具体地说明您希望如何发送它并提出您尝试过的内容。

# unit-testing - 测试用例中的测试相互依赖是一种好习惯吗？

> ID：16181068
> 
> 赞同：0
> 
> 时间：2013-04-23T23:50:52.277
> 
> 标签：unit-testing, phpunit, testcase

我有一门课，我想测试：

```
class DocumentProcessor{

  public function write(){

  }

  public function read(){

  }
} 
```

我有一个简单的测试用例：

```
class ClientTest extends \PHPUnit_Framework_TestCase
{
    public function testWrite(){

    }

    public function testRead(){

    }
} 
```

在这种情况下，能否`testRead()`依赖数据`testWrite()`已写入？`testRead()`还是设置自己的数据并从中读取是更好的做法？后一种方法似乎有点重复，但可以`testRead()`自行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:39:59.877

我认为拥有这两种类型是有益的。独立编写的测试可以更加细粒度，每个测试有趣的正常和边缘情况等。但是，有一个集成测试来验证读者可以阅读作者所写的内容总是好的。当输出格式发生变化时（而且总是如此），这尤其有用，以确保读取器和写入器都得到更新。

如果您必须支持读取该方法不再产生`read()`的旧/旧格式输入，则可能还需要独立测试。`write()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:55:25.153

独立的测试是最好的，或者至少以自下而上的方法进行测试。只要您证明 testRead 独立于 testWrite （等等）工作，您就可以使用 testRead 测试 testWrite。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:31:14.583

一个大的测试用例/套件可能需要时间来执行。出于这个原因，通常测试工程师会尽量避免冗余。例如，他们通常避免测试 get/set 方法，因为它们在其他测试中使用。

但我只是报告一种常见的做法——就个人而言，我对这个话题没有强烈的看法。

# matlab - 基于高斯混合的分割

> ID：16181075
> 
> 赞同：1
> 
> 时间：2013-04-23T23:52:23.307
> 
> 标签：matlab, gaussian, image-segmentation

我有四种不同颜色的图像 - 深蓝色，浅蓝色，更浅的蓝色 - 背景和白色 - 背景。我只想细分前两个类别

```
bG= mat2gray(image);
his=imhist(bG);
sai = gmdistribution.fit(his,4);
m1=sai.mu(1);
v1=sai.Sigma(1);
m2=sai.mu(2);
v2=sai.Sigma(2);

imt=bG<m2+v2;
figure;
imagesc(~imt); 
```

我得到一个所有像素为 1 的图像。bG 图像矩阵的值小于 1，但每个高斯的均值和方差要高得多。

据我了解，bG 是一个图像矩阵，因此将具有强度值。所以这里的所有值都小于 1。

但是四个高斯的均值是：0.8604 0.976 2.9182 6.6377。这些似乎不是强度，所以当我试图让图像中的所有像素小于第二个平均值时，所有像素都通过了测试。我在这里缺少一些东西。谁能帮我根据高斯混合分割深蓝色和浅蓝色细胞。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:40:42.923

不能保证 sai.mu(1) < sai.mu(2) < sai.mu(3) 等等。所以你知道 mu(2) 可能对应于白色，在这种情况下 m2+v2 将大于1，所有的像素都会通过测试。我会简单地使用 sai.cluster(bG(:))，找到两个最低的 mus，然后连接对应于两个最小 mus 的集群，如下所示：

```
sai = gmdistribution.fit(his,4);

mus = [sai.mu(1),sai.mu(2),sai.mu(3),sai.mu(4)];
[~,sortmus] = sort(mus);

clusters = sai.cluster(bG(:));
bGclustered = clusters == sortmus(1) | clusters == sortmus(2);

subplot(1,2,1);
imagesc(bG)
subplot(1,2,2);
imagesc(reshape(bGclustered,size(bG))) 
```

# c# - 问题从 C# 传递结构并在 CE 5 上的非托管 C++ dll 中进行修改

> ID：16181080
> 
> 赞同：-1
> 
> 时间：2013-04-23T23:53:09.350
> 
> 标签：c#, c++, .net-2.0, windows-ce

我有编译成 Win32 和 CE 5 dll 的 C++ 代码。看到我正在为这两个平台编译，我在 C++ 中使用预处理器定义在必要时进行隔离。

这两个 dll 都是从 C# 调用的，对于 Win32 应用程序是 .NET 3.5，对于 CE 应用程序是 .NET 2.0。

在 Win32 中一切正常，但我无法从 CE 中的 dll 函数返回。从 C# 调用的 dll 函数有一个结构指针作为参数，并且在 dll 函数中修改了包含字符串类型的结构内容。

这是 C++ 函数声明：

```
 DWORD __declspec(dllexport) ExtSomeFunc(LPTSTR szReader, MY_STRUCT* myStruct) 
```

在 C# 中：

```
[DllImport("somelibrary.dll", EntryPoint = "ExtSomeFunc", CharSet = CharSet.Unicode)]
private static extern uint ExtSomeFunc([MarshalAs(UnmanagedType.LPWStr)] string szReaderName, ref MY_STRUCT myStruct); 
```

这是 C++ 中的结构声明：

```
struct MY_STRUCT
{
    LPTSTR szString1;
    LPTSTR szString2;

    MY_STRUCT()
    {
        szString1 = new wchar_t[32];
        szString2 = new wchar_t[20];
    }

    ~MY_STRUCT()
    {
        delete []szString1;
        delete []szString1;
    }
}; 
```

在 C# 中：

```
public struct MY_STRUCT
{
    [MarshalAsAttribute(UnmanagedType.LPWStr, SizeConst = 32)]
    public string szString1;

    [MarshalAsAttribute(UnmanagedType.LPWStr, SizeConst = 20)]
    public string szString2;

    public MY_STRUCT(string szInit)
    {
        this.szString1 = szInit;
        this.szString1 = szInit;
    }
} 
```

下面是函数在 C# 中的调用方式：

```
 string szReader = "SomeDeviceName";
 uint uiRet = 0; 
 MY_STRUCT myStruct = new MY_STRUCT("");

 uiRet = ExtSomeFunc(szReader, ref myStruct); 
```

所以发生的事情是，如果我尝试用长度大于 6 的字符串填充结构字符串，

```
wcscpy(myStruct->szString1,  L"1234567"); 
```

或者

```
StringCchCopyW(myStruct->szString1, sizeReq+1, L"abcdefg"); 
```

C# 永远不会从 dll 函数返回。使用一些测试文件日志记录，我可以看到字符串已填充并且函数完成，但 C# 只是在它应该返回时挂起，我需要重启 CE 设备才能恢复。

这几天一直在敲我的头。这显然是 .NET 2.0 或 CE 5 的问题，只是无法弄清楚哪个不是如何修复它。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:40:37.547

尝试在游览 c# struct 定义之前添加：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode, Pack = 1)] 
```

*   包值必须是您的结构字节对齐。

# html - 在表格分区和表格行之间悬停时，悬停在我的表格上不起作用

> ID：16181083
> 
> 赞同：1
> 
> 时间：2013-04-23T23:53:14.510
> 
> 标签：html, css, html-table

我正在尝试制作一个包含多个`tbody`s 的表格。当光标悬停在其上时，我希望`background-color`每个更改。目前唯一的问题是s 和s`tbody`之间的边界不会将其视为悬停。即使 . 时边界仍然存在。`td``tr``border = '0'`

我做了一个 jsFiddle 来显示这类问题。 [http://jsfiddle.net/MichaelMitchell/Pukqr/2/](http://jsfiddle.net/MichaelMitchell/Pukqr/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:58:48.923

也许单元格之间的间隙给您带来了这个问题。将 cellpadding=0 和 cellspacing = 0 添加到您的表格中，

```
<table cellpadding="0" cellspacing="0" > 
```

或 CSS：

```
table { 
  border-spacing:0;
  border-collapse:collapse;
} 
```

您的示例中的绿色边框是由于表格背景和单元格之间的空格而出现的，如果您想看到绿色边框，请将此代码而不是背景添加到表格中：

```
table td{
 border:1px solid green;   

} 
```

# php - 我应该将 PHP include/require 语句放在 HTML 的什么位置？

> ID：16181085
> 
> 赞同：3
> 
> 时间：2013-04-23T23:53:39.807
> 
> 标签：php, html, class, character-encoding

我在一个文件中创建了一个 PHP 类，现在我想在我的 HTML 页面中使用它。

我应该将`require`or`include`语句放在 HTML 页面的什么位置？

在 HTML 的开头或结尾加载它是否存在*性能*差异，或者根本没有差异？

应该是`<meta charset="X">`PHP 脚本之前的，所以如果类太长我不会对字符集有任何问题？

例子：

```
<?php
    //Should I load the class here?

    //include "/var/www/php/db.php";
    //$classDB = 'DB';
    //$bdd = new $classDB;
?>
<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <title>Nothing</title>
    </head>
    <body>
        <?php
          $bdd->ShowClientList();
        ?>
    </body>
</html>
<?php
    //or should I load the class here?

    //include "/var/www/php/db.php";
    //$classDB = 'DB';
    //$bdd = new $classDB;
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T23:54:50.003

*在调用依赖它的代码之前，*您必须将它放在任何位置。否则你放置它的地方不会影响性能。

许多应用程序通常在文件顶部包含它们所依赖的文件，因为这样更容易跟踪您正在使用的内容。

# php - PHP 和 ob_end_clean 函数

> ID：16181087
> 
> 赞同：1
> 
> 时间：2013-04-23T23:54:07.507
> 
> 标签：php

我正在查看 PHP - *Laravel*框架源代码，在它们的 error.php 文件中，我找到了这一行。

```
**ob_get_level() and ob_end_clean();** 
```

只是想知道上面代码的目的是什么？

问候，

安茹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T23:59:08.930

PHP 有一个称为[输出缓冲](http://de1.php.net/manual/en/ref.outcontrol.php)的特性。实现时，echo、print 或其他任何内容的输出将被缓冲，而不是直接进入 php 的输出。如果您需要在之后分析输出，甚至将其丢弃，这将非常有用。

正常使用可能类似于以下：

```
ob_start();
echo "bla bla ...";

// ... more code

// grab contents of the output buffer
$content = ob_get_contents();

// analyze it ...
if(content_looks_good($content)) {
    ob_end_flush();
} else {
    echo "bad content";
    ob_end_clean(); // throw buffer contents away
} 
```

然而，这只是一个例子。有很多不同的方法可以使用输出缓冲。

* * *

您显示的代码只是将缓冲区内容丢弃。我不知道原因，因为我不知道您引用了哪个代码。

语法解释：

[`ob_get_level()`](http://de1.php.net/manual/en/function.ob-get-level.php)将返回输出缓冲区的当前嵌套级别。如果它大于零，php 将使用该值作为布尔值`true`，因此执行[`ob_end_clean()`](http://de1.php.net/manual/en/function.ob-end-clean.php)清理缓冲区的操作。

它与下面的语句相同，这可能更好理解：

```
if(ob_get_level() > 0) {
    ob_end_clean();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:56:51.667

这意味着“如果某些东西已经被缓冲 - 清除缓冲区”

同样可以写成

```
if (ob_get_level()) {
    ob_end_clean();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T23:57:17.403

*“如果`ob_get_level()`返回一个 'truthy' 值（不是 0 而是更高），则输出缓冲区处于活动状态，让我们结束它并丢弃它的内容。”*

通常，您会知道您从输出缓冲区开始。在框架中，您不知道您的用户可能会对缓冲区做什么，所以首先检查一个活动的缓冲区。

# java - 在 BST 中查找总和为提供值的元素

> ID：16181089
> 
> 赞同：5
> 
> 时间：2013-04-23T23:54:15.987
> 
> 标签：java, algorithm, data-structures, big-o, binary-search-tree

我正在尝试找到解决问题的方法

```
Find two elements in balanced BST which sums to a given a value. 
```

约束时间 O(n) 和空间 O(logn)。

我想知道以下算法是否有效。

```
int[] findSum(Node root, int sum){
   int[] sumArray;
   for (int i=0;i<sum;i++) {
      if (root.contains(i) && root.contains(sum-i)) {
         sumArray[0] = i;
         sumArray[1] = sum-i;
      }
   }
} 
```

我知道我的方法可能是错误的。我将不胜感激对我的伪代码/更好的算法的任何反馈/更正

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T00:06:19.950

我相信您采用的方法会奏效，但没有适当的时间限制。

让我们从分析这个算法的复杂性开始。请注意，这里需要考虑两个不同的参数。首先，BST 中的元素总数。如果你让 BST 更大或更小，算法完成所需的时间或多或少。我们称这个数字为 n。其次，您希望这些值相加的总数。我们称该值为 U。

那么让我们看看你当前的算法是做什么的。现在，它迭代一个循环 O(U) 次，在每次迭代时检查 BST 中是否存在两个值。每个 BST 查找需要时间 O(log n)，因此您的算法所做的工作总量是 O(U log n)。但是，您的算法仅使用常量空间（即空间 O(1)）。

不幸的是，这个运行时一点都不好。如果目标数字非常大（例如，1,000,000,000），那么您的算法将需要很长时间才能完成，因为 U 将非常大。

所以现在的问题是如何更有效地解决这个问题。幸运的是，我们可以使用一个非常可爱的算法来解决这个问题，它将利用 BST 的元素按排序顺序存储的事实。

让我们从解决一个与您提出的问题有点不同的类似问题开始。假设我没有给你一个 BST 和一个目标数，而是给你一个*排序数组*和一个目标数，然后问同样的问题：这个排序数组中是否有两个数相加等于目标数？例如，我可能会给你这个数组：

```
 0  1  3  6  8  9  10  14  19 
```

假设您想知道这个数组中的两个数字的总和是否为 16。您将如何做到这一点？

您可以尝试以前的方法：检查数组是否包含 0 和 16、1 和 15、2 和 14 等，直到找到一对或用完要检查的值。使用二分查找检查一个元素是否存在于排序数组中需要时间 O(log n)，因此该算法仍然需要 O(U log n) 时间。[（如果您知道这些值分布良好，那么您可以使用插值搜索](http://en.wikipedia.org/wiki/Interpolation_search)来加速这一过程，这将使 O(U log log n) 运行时间符合预期，但大的 U 项仍然是一个问题）。

所以让我们考虑一种不同的方法。从根本上说，您正在做的事情需要您明确枚举总和为 U 的所有对。但是，它们中的大多数不会存在，事实上，大多数情况下，对中的*任何*元素都不存在. 通过使用以下算法，我们可以使事情变得更快：

*   对于 x 数组的每个元素，检查 U - x 是否在数组中。
*   如果是，则报告成功。
*   否则，如果不存在这样的对，则报告失败。

该算法将要求您查看数组中总共 O(n) 个元素，每次执行 O(log n) 个工作以找到匹配对。在这种最坏的情况下，这将花费 O(n log n) 时间并使用 O(1) 空间。如果 U 是一个巨大的数字，这比以前要好得多，因为根本不再依赖于 U！

但是，我们可以通过巧妙地观察问题的结构来进一步加快速度。假设我们正在查看数组中的数字 x 并进行二进制搜索以查找 U - x。如果我们找到它，我们就完成了。如果不是，我们将在数组中找到第一个大于 U - x 的数字。让我们称这个数字为 z。

所以现在假设我们想看看一个数字 y 是否可以是总和为 U 的对的一部分，此外，假设 y 大于 x。在这种情况下，我们知道

> y + z
> 
> > x + z
> 
> > x + (U - x)
> 
> = U

这说明 y 和 z 之和*大于*U，所以它不可能是 U。这是什么意思？好吧，我们通过尝试对与 x 配对的元素进行二分搜索来*找到*z ，总数必须超过 U。换句话说，z 不能与大于 x 的任何东西配对。同样，任何大于 z 的东西都不能与大于 x 的东西配对，因为它必须总结为大于 U 的东西。

基于这一观察，我们可以尝试使用不同的算法。让我们像以前一样使用我们的数组，看看是否能找到总和为 16 的对：

```
 0  1  3  6  8  9  10  14  19 
```

让我们维护两个指针——一个“左侧”指针 lhs 和一个“右侧”指针 rhs：

```
 0  1  3  6  8  9  10  14  19
 ^                          ^
lhs                        rhs 
```

当我们将这两个数字相加时，我们得到 19，它超过了 U。现在，我们相加的任何一对数字都必须使其较小的数字至少与 lhs 数字一样大，即 0。因此，如果我们尝试在这里总结*任何*使用数字 19 的对，我们知道总和会太大。因此，我们可以从考虑中排除任何包含 19 的对。这就剩下

```
 0  1  3  6  8  9  10  14  19
 ^                      ^
lhs                    rhs 
```

现在，看看这个和（14），太小了。使用与之前类似的逻辑，我们可以有把握地说，剩余数组中使用 0 的任何总和最终给出的总和必须小于 16，因为总和中的第二个数字最多为 14。因此，我们可以排除0：

```
 0  1  3  6  8  9  10  14  19
    ^                   ^
   lhs                 rhs 
```

我们开始看到一种模式：

*   如果总和太小，则提前 lhs。
*   如果总和太大，则减少 rhs。

最终，我们要么找到总和为 16 的一对，要么 lhs 和 rhs 相互碰撞，此时我们保证没有一对总和为 16。

跟踪这个算法，我们得到

```
 0  1  3  6  8  9  10  14  19
    ^                   ^
   lhs                 rhs    (sum is 15, too small)

 0  1  3  6  8  9  10  14  19
       ^                ^
      lhs              rhs    (sum is 17, too big)

 0  1  3  6  8  9  10  14  19
       ^            ^
      lhs          rhs        (sum is 13, too small)

 0  1  3  6  8  9  10  14  19
          ^         ^
         lhs       rhs        (sum is 16, we're done!) 
```

瞧！我们得到了答案。

那么这有多快呢？好吧，在每次迭代中，要么 lhs 下降，要么 rhs 上升，当它们相遇时算法停止。这意味着我们进行 O(n) 次总迭代。每次迭代最多进行恒定的工作，因此每次迭代最多需要 O(1) 次工作。这给出了 O(n) 的总时间复杂度。

空间呢？好吧，我们需要存储两个指针，每个指针占用 O(1) 空间，所以总的空间使用量是 O(1)。伟大的！

但这与您的问题有什么关系？联系是这样的：在每个时间点，这个算法只需要记住数组中的两个数字。然后它需要能够从一个元素前进到下一个元素或从一个元素前进到前一个元素。这就是它所要做的。

因此，假设您不使用*排序数组*，而是使用二叉搜索树。从两个指针开始，一个指向最小节点，一个指向最大节点。完成此设置后，您可以模拟上述算法，将“递增 lhs”和“递减 rhs”替换为“**移动到 lhs 的有序后继**”和“**移动到 rhs 的有序前驱**”。可以实现这些操作，以便它们使用总共 O(log n) 空间（假设树是平衡的），并且每种类型的 n 操作的任何序列总共需要 O(n) 时间（无论是否树是平衡的）。因此，如果您要使用修改后的上述算法来处理 BST，

实现细节有点棘手，我将把这部分作为练习留给你。如果您不熟悉按顺序排列后继和前任，网上有很多很好的资源。它们是 BST 上的标准算法，非常有用。我还将把数组算法正确性的正式证明留作练习，尽管它并不太难。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:24:48.780

我想你必须搜索树两次。但首先，您接收一个名为的整数`sum`，然后它突然变成了一个数组？那是错字吗？我假设你打算接受一个 sum 数组。

您必须遍历树，并且对于每个节点，从根调用另一个遍历，寻找可以添加到等于总和的第一个节点元素的节点。

此外，您不能在同一方法中将 sum 作为变量和数组。

现在我刚刚看到您的编辑，以数字 17 为例。您首先搜索 0，如果找到，则调用另一个搜索**，从根**搜索 17 -0 开始。如果找不到，将 0 递增到 1 并搜索 17-1，直到找到两个给出 17 的数字。

**编辑**

```
//we're looking for two numbers that equal 17 when added
Node runner;
Node root;
int i;
int [] sum_total;

void findSum(int sum){
    int search_1st = 0;
    sum_total = new int[2];
    search(int search_1st);
}   

search( Node root, int num1){
    if(i == 3){
        return;
    }
    Node runner = root;
    if(ruunner == null){
    return ;
    }
    if(runner.element == num1){
        sum_total[i] = num1;
        i++;
        if(i == 3){
            return;
        }
        //now search for sum - num1 with root
        search(root, sum - num1);
    }else{
        if(runner.left < num1){
            search(runner.right, num1);
        }else{
            search(runner.left, num1);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T12:44:46.360

来自[http://www.geeksforgeeks.org/find-a-pair-with-given-sum-in-bst/](http://www.geeksforgeeks.org/find-a-pair-with-given-sum-in-bst/)

```
/* In a balanced binary search tree isPairPresent two element which sums to
   a given value time O(n) space O(logn) */
#include <stdio.h>
#include <stdlib.h>
#define MAX_SIZE 100

// A BST node
struct node
{
    int val;
    struct node *left, *right;
};

// Stack type
struct Stack
{
    int size;
    int top;
    struct node* *array;
};

// A utility function to create a stack of given size
struct Stack* createStack(int size)
{
    struct Stack* stack =
        (struct Stack*) malloc(sizeof(struct Stack));
    stack->size = size;
    stack->top = -1;
    stack->array =
        (struct node**) malloc(stack->size * sizeof(struct node*));
    return stack;
}

// BASIC OPERATIONS OF STACK
int isFull(struct Stack* stack)
{   return stack->top - 1 == stack->size;  }

int isEmpty(struct Stack* stack)
{   return stack->top == -1;   }

void push(struct Stack* stack, struct node* node)
{
    if (isFull(stack))
        return;
    stack->array[++stack->top] = node;
}

struct node* pop(struct Stack* stack)
{
    if (isEmpty(stack))
        return NULL;
    return stack->array[stack->top--];
}

// Returns true if a pair with target sum exists in BST, otherwise false
bool isPairPresent(struct node *root, int target)
{
    // Create two stacks. s1 is used for normal inorder traversal
    // and s2 is used for reverse inorder traversal
    struct Stack* s1 = createStack(MAX_SIZE);
    struct Stack* s2 = createStack(MAX_SIZE);

    // Note the sizes of stacks is MAX_SIZE, we can find the tree size and
    // fix stack size as O(Logn) for balanced trees like AVL and Red Black
    // tree. We have used MAX_SIZE to keep the code simple

    // done1, val1 and curr1 are used for normal inorder traversal using s1
    // done2, val2 and curr2 are used for reverse inorder traversal using s2
    bool done1 = false, done2 = false;
    int val1 = 0, val2 = 0;
    struct node *curr1 = root, *curr2 = root;

    // The loop will break when we either find a pair or one of the two
    // traversals is complete
    while (1)
    {
        // Find next node in normal Inorder traversal. See following post
        // http://www.geeksforgeeks.org/inorder-tree-traversal-without-recursion/
        while (done1 == false)
        {
            if (curr1 != NULL)
            {
                push(s1, curr1);
                curr1 = curr1->left;
            }
            else
            {
                if (isEmpty(s1))
                    done1 = 1;
                else
                {
                    curr1 = pop(s1);
                    val1 = curr1->val;
                    curr1 = curr1->right;
                    done1 = 1;
                }
            }
        }

        // Find next node in REVERSE Inorder traversal. The only
        // difference between above and below loop is, in below loop
        // right subtree is traversed before left subtree
        while (done2 == false)
        {
            if (curr2 != NULL)
            {
                push(s2, curr2);
                curr2 = curr2->right;
            }
            else
            {
                if (isEmpty(s2))
                    done2 = 1;
                else
                {
                    curr2 = pop(s2);
                    val2 = curr2->val;
                    curr2 = curr2->left;
                    done2 = 1;
                }
            }
        }

        // If we find a pair, then print the pair and return. The first
        // condition makes sure that two same values are not added
        if ((val1 != val2) && (val1 + val2) == target)
        {
            printf("\n Pair Found: %d + %d = %d\n", val1, val2, target);
            return true;
        }

        // If sum of current values is smaller, then move to next node in
        // normal inorder traversal
        else if ((val1 + val2) < target)
            done1 = false;

        // If sum of current values is greater, then move to next node in
        // reverse inorder traversal
        else if ((val1 + val2) > target)
            done2 = false;

        // If any of the inorder traversals is over, then there is no pair
        // so return false
        if (val1 >= val2)
            return false;
    }
}

// A utility function to create BST node
struct node * NewNode(int val)
{
    struct node *tmp = (struct node *)malloc(sizeof(struct node));
    tmp->val = val;
    tmp->right = tmp->left =NULL;
    return tmp;
}

// Driver program to test above functions
int main()
{
    /*
                   15
                /     \
              10      20
             / \     /  \
            8  12   16  25    */
    struct node *root =  NewNode(15);
    root->left = NewNode(10);
    root->right = NewNode(20);
    root->left->left = NewNode(8);
    root->left->right = NewNode(12);
    root->right->left = NewNode(16);
    root->right->right = NewNode(25);

    int target = 28;
    if (isPairPresent(root, target) == false)
        printf("\n No such values are found\n");

    getchar();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-09T19:32:19.833

或者，遍历树并将所有值存储在 HashSet 中。然后再进行一次遍历，看看(target - nodeValue) 是否在集合中。它可以在 O(n) 时间，O(n) 空间内完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-30T17:01:25.550

这个想法与早期解决方案的想法相同，只是我用两个堆栈来做 - 一个在 inorder(stack1) 之后，另一个在反向之后 - inorder order(stack2)。一旦我们到达 BST 中最左边和最右边的节点，我们就可以开始将它们一起比较。

如果总和小于所需值，则从 stack1 中弹出，否则从 stack2 中弹出。以下是相同的java实现：

```
public int sum2(TreeNode A, int B) {
    Stack<TreeNode> stack1 = new Stack<>();
    Stack<TreeNode> stack2 = new Stack<>();
    TreeNode cur1 = A;
    TreeNode cur2 = A;

    while (!stack1.isEmpty() || !stack2.isEmpty() ||
            cur1 != null || cur2 != null) {
        if (cur1 != null || cur2 != null) {
            if (cur1 != null) {
                stack1.push(cur1);
                cur1 = cur1.left;
            }

            if (cur2 != null) {
                stack2.push(cur2);
                cur2 = cur2.right;
            }
        } else {
            int val1 = stack1.peek().val;
            int val2 = stack2.peek().val;

            // need to break out of here
            if (stack1.peek() == stack2.peek()) break;

            if (val1 +  val2 == B) return 1;

            if (val1 + val2 < B) {
                cur1 = stack1.pop();
                cur1 = cur1.right;
            } else {
                cur2 = stack2.pop();
                cur2 = cur2.left;
            }
        }
    }

    return 0;
} 
```

# html - 在 Pandoc 中编号和引用图像

> ID：16181090
> 
> 赞同：5
> 
> 时间：2013-04-23T23:54:19.370
> 
> 标签：html, latex, preprocessor, pandoc

我想在 Pandoc 中为我的图像添加诸如“图 1：Blah Blah”之类的标题，并能够像查看 @Figure1 一样引用它们。我正在使用 gpp（预处理器）为我的图像添加标题并执行各种花哨的操作，例如更改大小、格式等。但是，我无法为 Figure1、Figure2 等图像实现计数器。

我在我的 gpp 脚本中定义了以下函数：

```
\define{\counter}{0}

\defeval{count}{\eval{\counter+ 1} 
```

我在我的脚本中这样称呼它：`\count`

但是，`\counter`在我的 gpp 脚本中没有得到评估，我看到以下内容`error: unfinished macro`

我应该如何实现这个计数器？我在 gpp 中使用 -T (tex) 模式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:27:37.880

我找到了解决我的问题的部分方法。我发现使用 CSS 的 counter-increment 属性可以帮助自动编号图像，如下所示：[http ://www.w3schools.com/cssref/pr_gen_counter-reset.asp](http://www.w3schools.com/cssref/pr_gen_counter-reset.asp)

但是，问题仍然存在，每次调用我的 gpp 标签时，我都使用 gpp 来复制同一段代码。因此，计数器永远不会增加。例如：我的 gpp 代码是：

```
\define{\image{src}{width}{caption}{tag}}{

<div style=" margin:50px auto; text-align:center;" class="figures">
<a  href="\src" id="\tag" style="margin:0px 20px; display:inline-block; 
text-decoration:none; color:black; "><img src="\src" width="\width px" 
alt="\caption" style="padding-bottom:0.5em;"> <div> \caption </div></a></div>}

\define{\imageref{label}}{
<span style="white-space:nowrap;"><a href="#\label" style="display:inline-block">\label</a></span>
} 
```

我的 style.css 看起来像这样：

```
div .figures{
counter-reset:figure;
}

a.figure-caption:before{
counter-increment:figure;
content: "Figure" counter(figure) ":";
} 
```

因此，每次我在标签中包含图片时`\image`，它总是会得到计数器`Figure1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-03T19:25:11.970

您可以尝试使用[pandoc-fignos](https://github.com/tomduck/pandoc-fignos)过滤器：它会自动创建图形编号，并启用图形引用。

简而言之，您可以像这样为图像添加标签：

```
![Caption.](image.png) {#fig:description} 
```

...然后像这样引用它：

```
@fig:description 
```

有关安装和使用说明，请参阅 github 上的[pandoc-fignos页面。](https://github.com/tomduck/pandoc-fignos)还有 pandoc-eqnos 过滤器可以用方程做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-02T11:20:50.027

# 没有交叉引用的多语言 CSS 编号

这是一个简单的方法，用于**使用依赖于文档语言的标签进行自动 CSS 编号。**这个简单的 CSS 方法*不允许*引用。

对于带有引用的自动编号，而不是使用[`pandoc-fignos`](https://github.com/tomduck/pandoc-fignos)套件[`pandoc-xnos`](https://github.com/tomduck/pandoc-xnos)。

```
body {
    counter-reset: figure;
}

p.caption:before {
    counter-increment: figure;
}

p.caption:lang(en):before {
    content: 'Figure ' counter(figure) ': ';
}

p.caption:lang(nl):before {
    content: 'Figuur ' counter(figure) ': ';
} 
```

# asp.net - 在 ASP.NET MVC 解决方案中放置自定义结果、过滤器和属性的位置

> ID：16181095
> 
> 赞同：1
> 
> 时间：2013-04-23T23:55:22.687
> 
> 标签：asp.net, asp.net-mvc, architecture, visual-studio-2012

这个问题是解决方案中的一般类/文件放置之一。在 MVC3/4 中，如果我定义自己的 ActionResults、Filters 和 Attributes，那么存储它们的最佳位置在哪里？

我更喜欢将我的解决方案组织得井井有条，目前我将它们放在我的 \Models 文件夹中。从建筑的角度来看，这是保持它们的最佳位置吗？

有没有人为每种类型的类使用特定文件夹，例如 \Filters、\Results 等。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T13:44:53.073

在我的解决方案中，我倾向于将所有类型的“类似”功能折叠起来，例如

**主要项目：**

*   过滤器（这是由新的 MVC4 文件夹结构生成的）
*   基础设施（这将包含助手和扩展等。
*   行动结果
*   模型（用于视图模型

**第二个项目：**

*   DTO 等

# javascript - Visual Studio 2012 Web Express：在导航中显示 javascript 方法

> ID：16181101
> 
> 赞同：0
> 
> 时间：2013-04-23T23:55:58.357
> 
> 标签：javascript, web, visual-studio-2012, intellisense

我最近决定为我的 html/css/javascript 项目从使用 Komodo Edit 转移到 Visual Studio 2012 Web Express（没有 asp.net 功能，只是一个静态网页。）

我的一些脚本文件中有很多方法，我经常使用 Komo Edit 的功能通过导航栏跳转到给定的方法。我希望能够对 Visual Studio 2012 Web Express 做同样的事情，但是列出所有脚本的导航栏只显示文件名，并且没有列出全局变量和方法的下拉胡萝卜。

关于如何启用它，我已经环顾了一段时间（智能感知工作正常，允许我从方法调用跳转到它的定义，甚至在文件之间。）我可能在这里遗漏了一些相当明显的东西，但我怀疑我可能还需要下载扩展...

谢谢你尽你所能的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T12:52:34.230

您找不到如何启用此功能的原因是*Visual Studio 2012 没有用于 javascript 编辑的导航栏*。此功能已[添加到 Visual Studio 2013](http://blogs.msdn.com/b/visualstudio/archive/2013/07/16/javascript-editor-improvements-in-visual-studio-2013-preview.aspx)中。

# javascript - 在显示之前构建一个进度条以加载所有内容

> ID：16181104
> 
> 赞同：1
> 
> 时间：2013-04-23T23:56:22.963
> 
> 标签：javascript, jquery, css, progress-bar, loading

您好，我真的在询问之前尝试搜索.. 我尝试使用 jquery 作为进度条，我发现了很多信息，问题是大多数示例只是“动画”，我的意思是，它们并没有真正显示 %, of加载过程..我找不到办法。

我正在尝试使用这个[http://www.htmldrive.net/items/show/791/Very-Beautiful-CSS3-And-JQuery-progress-bar](http://www.htmldrive.net/items/show/791/Very-Beautiful-CSS3-And-JQuery-progress-bar)

混合了这个问题的正确答案。[如何创建一个 jQuery 加载栏？（就像在 Flash 网站上使用的一样）](https://stackoverflow.com/questions/8442363/how-to-create-a-jquery-loading-bar-like-the-ones-used-on-flash-sites)

但我就是无法合并

```
$.when($.ajax("video1.ogv"))
.then(function () {
    videoLoaded[1] = true;
    updateProgressBar();
});

$.when($.ajax("video2.ogv"))
.then(function () {
    videoLoaded[2] = true;
    updateProgressBar();
});

$.when($.ajax("video3.ogv"))
.then(function () {
    videoLoaded[3] = true;
    updateProgressBar();
});

var updateProgressBar = function() {
    // iterate though the videoLoaded array and find the percentage of completed tasks
    $("#progressbar").progressbar("value", percentage);
} 
```

因此，我向您展示的 CSS 栏.. 真正显示已加载#main_content 的内容或示例中的视频的百分比..

希望我说清楚，因为我的英语很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:21:28.430

为什么不做这样的事情？只需将其更改为 AJAX 并`success`用作您的触发器。基本上是一个永无止境的动画 gif，等待您的数据加载。

```
<div id="chartDiv"></div>

var chartDiv = document.getElementById("chartDiv");
var loadingImg = document.createElement("img");
var newImg = document.createElement("img");

loadingImg.src = "http://i1267.photobucket.com/albums/jj559/rizkytanjo96/loading.gif";
chartDiv.appendChild(loadingImg);

function placeLoaded() {
    chartDiv.removeChild(loadingImg);
    chartDiv.appendChild(newImg);
}

function getNew() {
    newImg.addEventListener("load", placeLoaded, false);
    newImg.src = "http://i1276.photobucket.com/albums/y462/staffpicks/Animated_GIFs/ahhhh.gif";
}

setTimeout(getNew, 10000); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/GYE3d/)

或者，如果您不想要动画 gif，您可以使用 javascript 执行类似的操作。

```
#pwidget {
    background-color:lightgray;
    width:254px;
    padding:2px;
    -moz-border-radius:3px;
    border-radius:3px;
    text-align:left;
    border:1px solid gray;
}
#progressbar {
    width:250px;
    padding:1px;
    background-color:white;
    border:1px solid black;
    height:28px;
}
#indicator {
    width:0px;
    background-image:url("http://img827.imageshack.us/img827/269/shadedgreen.png");
    height:28px;
    margin:0;
}
#loading {
    text-align:center;
    width:250px;
}

var pwidget = {
    maxprogress: 250,
    actualprogress: 0,
    itv: 0,
    delay: 10,
    prog: function () {
        if (pwidget.actualprogress >= pwidget.maxprogress) {
            clearInterval(pwidget.itv);
            return;
        }

        var indicator = document.getElementById("indicator");

        pwidget.actualprogress += 1;
        indicator.style.width = pwidget.actualprogress + "px";

        if (pwidget.actualprogress === pwidget.maxprogress) {
            pwidget.restart();
        }
    },
    start: function () {
        pwidget.itv = setInterval(pwidget.prog, pwidget.delay);
    },
    stop: function () {
        clearInterval(pwidget.itv);
    },
    restart: function () {
        pwidget.actualprogress = 0;
        pwidget.stop();
        pwidget.start();
    },
    element: function () {
        var pwidget = document.createElement("div"),
            progressbar = document.createElement("div"),
            indicator = document.createElement("div"),
            loading = document.createElement("div");

        pwidget.id = "pwidget";
        progressbar.id = "progressbar";
        indicator.id = "indicator";
        loading.id = "loading";
        loading.textContent = "Loading ...";

        progressbar.appendChild(indicator);
        pwidget.appendChild(progressbar);
        pwidget.appendChild(loading);

        return pwidget;
    }
};

var chartDiv = document.getElementById("chartDiv");
var widget = pwidget.element();
var newImg = document.createElement("img");

function placeLoaded() {
    pwidget.stop();
    chartDiv.removeChild(widget);
    chartDiv.appendChild(newImg);
}

function getNew() {
    newImg.addEventListener("load", placeLoaded, false);
    newImg.src = "http://i1276.photobucket.com/albums/y462/staffpicks/Animated_GIFs/ahhhh.gif";
}

chartDiv.appendChild(widget);
pwidget.start();
setTimeout(getNew, 10000); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/bXxcg/)

或者[jQueryUI 有一个进度条](http://jqueryui.com/progressbar/)，你可以对我上面的例子做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:02:53.860

Part of the reason most sites have moved to a loading gif over a percent is because the percent is really unreliable.

You could possibly be in a situation where you are showing the actual progress as an exact percent then something happens causing traffic to slow down and frustrates the user when it take 5s to load 75% and then 10s to load 25%. Tere are plenty of examples but I will stop here.

If it is at all possible I would take a loading approach over a percent don't approach for this reason alone. As long as there is an indication of work being done users are generally happy.

[EDIT] sorry it took me a little bit to get back to this and give you an example. this is really basic and really depends on how you are showing this loading bar as to how you will add it to the page. Focus is on this line

```
$('<div>').progressbar({ value: false }) 
```

hope this helps. The [jQuery progress bar](http://jqueryui.com/progressbar/) does allow for percentage, still i would try to avoid it unless its absolutely required.

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-2.0.0.js"></script>
    <script src="Scripts/jquery-ui-1.10.3.js"></script>
    <link href="Content/themes/base/jquery-ui.css" rel="stylesheet" />
    <script>
        function show_loading()
        {
            $('<div>').dialog
                ({
                    title: 'loading...',
                    modal: true,
                    closeOnEscape: true,
                    draggable: false,
                    resizable: false
                })
            .append($('<div>').progressbar({ value: false }));
        }
    </script>
</head>
<body>
    <button id="show_loading" onclick="show_loading();">show loader</button>
</body>
</html> 
```

# git - GIT 标记未按预期工作

> ID：16181112
> 
> 赞同：1
> 
> 时间：2013-04-23T23:57:22.180
> 
> 标签：git

我有一个关于我在 GIT 中完成的操作的问题。我有一个存储库，其中有两个 java 项目，当前位于某个标记处。

```
Project 1 - MyTag 1.0.0
Project 2 - MyTag 1.0.0 
```

到目前为止，一切都很好。

昨天我在头部签入了一些代码并再次标记了代码。项目 1 有一些变化，但项目 2 没有。

签入更改后，我在 MyTag 2.0.0 再次标记了存储库。这是我期待看到的……

```
Project 1 - MyTag 2.0.0
Project 2 - MyTag 2.0.0 
```

但相反，我得到了...

```
Project 1 - MyTag 2.0.0
Project 2 - MyTag 1.0.0 
```

谁能告诉我为什么 Project 2 没有获得新的 TAG？

我使用 TortoiseGit 作为我的 Windows GIT 客户端。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:07:13.027

## 假设

1.  您的 git repo 的根目录中有两个目录`Project 1`， 和`Project 2`. （顺便说一句，我建议将它们分成不同的存储库。）
2.  您期望 git Tag 会以某种方式跟踪特定提交中*所有文件的状态。*

## 回答

项目 2 包含在标签中。您看到的是 git 报告最后一次*提交*是.`Project 2``MyTag 1.0.0`

`MyTag 2.0.0`仍然*包括* `Project 2`.....`Project 2`只是从那时起就没有改变`MyTag 1.0.0`。如果您结帐`MyTag 2.0.0`，您会在那时获得整个回购的快照。

## 背景

标签是*指向*提交的指针。它们指向
a）直接（轻量级标签）或
b）通过标签对象，然后指向提交（带注释的标签）。

`MyTag 2.0.0`指向`C2`包含更改集的提交（可以说）`Project 1`。我假设没有文件被更改和提交，因此标签与项目 2 的文件`Project 2`没有*直接关系。*`MyTag 1.0.0`也指向一个提交（让我们说`C1`）。

由于`MyTag 2.0.0`指向`C2`which 指向`C1`，所有这些更改都由 有效地指向`MyTag 2.0.0`，并且在签出时将被包含在内。

`MyTag 1.0.0`*大概指向对* `Project 1/`和`Project 2`目录中的文件的更改的提交。

从视觉上看，提交看起来像这样：

```
* C3 ---> C2 ---> C1 ---> init
         /        /
        /        /
  MyTag 2.0.0   /
               /
          MyTag 1.0.0 
```

请记住，我没有使用 TortoiseGit，所以我无法准确地看到您所看到的。但是，我在上面解释的 git 标签如何指向提交的概念解释了为什么*任何*git 客户端都会显示与您所描述的内容相似的结果。我在测试存储库中执行了您描述的提交和标记，并且在 SourceTree 中得到了类似（正确）的结果。

# c# - 使用字符串中的名称获取变量的值

> ID：16181118
> 
> 赞同：2
> 
> 时间：2013-04-23T23:58:23.393
> 
> 标签：c#, .net-2.0

我想从变量的名称中获取变量的值。

澄清一下，XML 文档将变量名作为字符串传递；我想获得价值。

像这样的东西：

```
string bublegumA = "strawberry";
string bubblegumB = "banana";   

//get which variable from the XML

string fromXML = "bubblegumB";

string output = getValue(fromXML);

//it should return "banana" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:01:18.017

你不能那样做。变量名仅在设计时存在。一旦它被编译（没有调试符号），变量名就会丢失。

但是你可以这样做：

```
var myValues = new Dictionary<string, string>();
myValues["bublegumA"] = "strawberry";
myValues["bublegumB"] = "banana";

string output = myValues["bublegumB"]; // "banana" 
```

[`ExpandoObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)如果您不喜欢用于设置属性的字典语法，也可以使用 an ，尽管您仍然将其转换为字典以按名称获取值：

```
dynamic myValues = new ExpandoObject();
myValues.bublegumA = "strawberry";
myValues.bublegumB = "banana";

string output1 = myValues.bublegumB; // "banana"
string output2 = (string)((IDictionary<string, object>)myValues)["bublegumB"]; // "banana" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T00:02:11.623

基本上，这是反射的应用：

如果它是一个字段，这应该有效：

```
var value = targetObject.GetType().GetField(fromXml).GetValue(targetObject, null); 
```

因此，如果您的班级是：

```
public class MyClass
{
    public string BubblegumA = "Strawberry";
} 
```

然后在你的主要课程中：

```
public static void Main()
{
    MyClass targetObject = new MyClass();

    var value = targetObject.GetType().GetField("BubblegumA").GetValue(targetObject, null);

    //value should = Strawberry
} 
```

# python - 一个非常简单的多线程并行 URL 获取（无队列）

> ID：16181121
> 
> 赞同：69
> 
> 时间：2013-04-23T23:58:42.790
> 
> 标签：python, multithreading, callback, python-multithreading, urlfetch

我花了一整天的时间在 Python 中寻找最简单的多线程 URL 获取器，但我发现的大多数脚本都使用队列或多处理或复杂的库。

最后我自己写了一个，我将其作为答案报告。请随时提出任何改进建议。

我想其他人可能一直在寻找类似的东西。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-24T01:50:02.610

尽可能简化您的原始版本：

```
import threading
import urllib2
import time

start = time.time()
urls = ["http://www.google.com", "http://www.apple.com", "http://www.microsoft.com", "http://www.amazon.com", "http://www.facebook.com"]

def fetch_url(url):
    urlHandler = urllib2.urlopen(url)
    html = urlHandler.read()
    print "'%s\' fetched in %ss" % (url, (time.time() - start))

threads = [threading.Thread(target=fetch_url, args=(url,)) for url in urls]
for thread in threads:
    thread.start()
for thread in threads:
    thread.join()

print "Elapsed Time: %s" % (time.time() - start) 
```

这里唯一的新技巧是：

*   跟踪您创建的线程。
*   如果您只想知道线程何时完成，请不要打扰线程计数器；`join`已经告诉你了。
*   如果您不需要任何状态或外部 API，则不需要`Thread`子类，只需一个`target`函数。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-01-16T14:45:56.897

`multiprocessing`有一个不启动其他进程的线程池：

```
#!/usr/bin/env python
from multiprocessing.pool import ThreadPool
from time import time as timer
from urllib2 import urlopen

urls = ["http://www.google.com", "http://www.apple.com", "http://www.microsoft.com", "http://www.amazon.com", "http://www.facebook.com"]

def fetch_url(url):
    try:
        response = urlopen(url)
        return url, response.read(), None
    except Exception as e:
        return url, None, e

start = timer()
results = ThreadPool(20).imap_unordered(fetch_url, urls)
for url, html, error in results:
    if error is None:
        print("%r fetched in %ss" % (url, timer() - start))
    else:
        print("error fetching %r: %s" % (url, error))
print("Elapsed Time: %s" % (timer() - start,)) 
```

与基于 - 的解决方案相比的优势`Thread`：

*   `ThreadPool`允许限制最大并发连接数（`20`在代码示例中）
*   输出没有乱码，因为所有输出都在主线程中
*   记录错误
*   该代码无需更改即可在 Python 2 和 3 上运行（假设`from urllib.request import urlopen`在 Python 3 上）。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-24T00:10:28.337

中的主要示例[`concurrent.futures`](http://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor-example)可以满足您的所有需求，而且要简单得多。另外，它一次只做 5 个就可以处理大量的 URL，而且它可以更好地处理错误。

当然，这个模块只内置于 Python 3.2 或更高版本……但如果你使用的是 2.5-3.1，你可以只在[`futures`](https://pypi.python.org/pypi/futures)PyPI 上安装 backport。您需要从示例代码中更改的所有内容是搜索并替换`concurrent.futures`为`futures`，并且对于 2.x，`urllib.request`使用`urllib2`.

这是向后移植到 2.x 的示例，修改为使用您的 URL 列表并添加时间：

```
import concurrent.futures
import urllib2
import time

start = time.time()
urls = ["http://www.google.com", "http://www.apple.com", "http://www.microsoft.com", "http://www.amazon.com", "http://www.facebook.com"]

# Retrieve a single page and report the url and contents
def load_url(url, timeout):
    conn = urllib2.urlopen(url, timeout=timeout)
    return conn.readall()

# We can use a with statement to ensure threads are cleaned up promptly
with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:
    # Start the load operations and mark each future with its URL
    future_to_url = {executor.submit(load_url, url, 60): url for url in urls}
    for future in concurrent.futures.as_completed(future_to_url):
        url = future_to_url[future]
        try:
            data = future.result()
        except Exception as exc:
            print '%r generated an exception: %s' % (url, exc)
        else:
            print '"%s" fetched in %ss' % (url,(time.time() - start))
print "Elapsed Time: %ss" % (time.time() - start) 
```

* * *

但是你可以让这更简单。真的，您只需要：

```
def load_url(url):
    conn = urllib2.urlopen(url, timeout)
    data = conn.readall()
    print '"%s" fetched in %ss' % (url,(time.time() - start))
    return data

with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:
    pages = executor.map(load_url, urls)

print "Elapsed Time: %ss" % (time.time() - start) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T01:02:40.257

我现在发布了一个不同的解决方案，通过**让工作线程不是守护进程并将它们加入主线程**（这意味着阻塞主线程直到所有工作线程都完成）而不是通知每个工作线程的执行结束回调到全局函数（正如我在上一个答案中所做的那样），正如在一些评论中指出的那样，这种方式不是线程安全的。

```
import threading
import urllib2
import time

start = time.time()
urls = ["http://www.google.com", "http://www.apple.com", "http://www.microsoft.com", "http://www.amazon.com", "http://www.facebook.com"]

class FetchUrl(threading.Thread):
    def __init__(self, url):
        threading.Thread.__init__(self)
        self.url = url

    def run(self):
        urlHandler = urllib2.urlopen(self.url)
        html = urlHandler.read()
        print "'%s\' fetched in %ss" % (self.url,(time.time() - start))

for url in urls:
    FetchUrl(url).start()

#Join all existing threads to main thread.
for thread in threading.enumerate():
    if thread is not threading.currentThread():
        thread.join()

print "Elapsed Time: %s" % (time.time() - start) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-23T23:58:42.790

此脚本从数组中定义的一组 URL 中获取内容。它为每个要获取的 URL 生成一个线程，因此它旨在用于一组有限的 URL。

每个线程不使用队列对象，而是通过对全局函数的回调来通知其结束，该函数保持对正在运行的线程数的计数。

```
import threading
import urllib2
import time

start = time.time()
urls = ["http://www.google.com", "http://www.apple.com", "http://www.microsoft.com", "http://www.amazon.com", "http://www.facebook.com"]
left_to_fetch = len(urls)

class FetchUrl(threading.Thread):
    def __init__(self, url):
        threading.Thread.__init__(self)
        self.setDaemon = True
        self.url = url

    def run(self):
        urlHandler = urllib2.urlopen(self.url)
        html = urlHandler.read()
        finished_fetch_url(self.url)

def finished_fetch_url(url):
    "callback function called when a FetchUrl thread ends"
    print "\"%s\" fetched in %ss" % (url,(time.time() - start))
    global left_to_fetch
    left_to_fetch-=1
    if left_to_fetch==0:
        "all urls have been fetched"
        print "Elapsed Time: %ss" % (time.time() - start)

for url in urls:
    "spawning a FetchUrl thread for each url to fetch"
    FetchUrl(url).start() 
```

# mysql - MySQL - 数据库规范化 - 我做错了吗？

> ID：16181123
> 
> 赞同：0
> 
> 时间：2013-04-23T23:58:46.207
> 
> 标签：mysql, database-normalization

我已经搜索了几个小时，但似乎仍然无法解决这个问题。我不明白我打算如何以标准化的方式填充这些内容。

问题 1-

```
+----+------+------------+-------------+----------+------+------------+--------------+-----------------+-----+-------+----------+-------------+--------+--------+------------+-----------------+---------------+---------+----------+----------+--------+----------+---------+--------+-------+------+--------+---------+
| id | year | wholesaler | design_line | style_no | size | size_range | retail_price | wholesale_price | hue | color | illusion | iridescence | fabric | length | silhouette | bodice_cut_outs | back_cut_outs | closing | neckline | shoulder | sleeve | feathers | sequins | stones | beads | lace | ruches | updated | 
```

^礼服

我为其中许多列创建了单独的表。如，

```
+----+--------+
| id | type   |
+----+--------+
|  1 | no     |
|  2 | zipper |
|  3 | corset |
+----+--------+ 
```

^close_flag

我希望 gown.closing 唯一可能的选项是 closing_flag.type 的值。如果它只有两列，则使用单独的表进行规范化是否不合适？

* * *

问题 2- 我有其他列，例如色调，我希望能够为其填充多个值——对于具有多种色调的礼服，而不是针对具有多种色调的礼服款式。所以，我创建了

```
+----+---------+
| id | hue     |
+----+---------+
|  1 | yellow  |
|  2 | green   |
|  3 | blue    |
|  4 | violet  |
|  5 | fuschia |
|  6 | red     |
|  7 | orange  |
|  8 | brown   |
|  9 | black   |
| 10 | grey    |
| 11 | white   |
| 12 | print   |
+----+---------+ 
```

^hue_flag

但是，如何将 hue_flag 中的多个值插入到礼服中？

* * *

问题 3- 我在礼服中有多个列，它们应该具有相同的可能值。羽毛、亮片、宝石、珠子、蕾丝和褶边都是应包含描述其覆盖量的值的列。所以，我创建了

```
+----+---------+
| id | amount  |
+----+---------+
|  1 | no      |
|  2 | few     |
|  3 | some    |
|  4 | many    |
|  5 | totally |
+----+---------+ 
```

^coverage_flag

如何对另一个表中的多个列使用相同的值可能性？再说一次，有一个只有两列的表是不是很奇怪？我错过了标准化的重点吗？我试图尽可能地传统，但看起来我最终会以这种方式使用更多的空间，而不是简单地将值存储在两个表中，用户和礼服。

当然，我不指望有人能达到我提出的所有观点。我只想彻底解释我的问题。相信我还有其他的，但它们都属于这三种类型中的一种。我已经倾注了 [在此处输入链接描述][this] 和其他类似文章，但可以对如何实际应用这些概念做出正面或反面。

为便于阅读而编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:26:08.267

问题 1：我会在你的礼服表中使用一个 closing_type_id 列。这样，您可以告诉数据库以确保没有关闭类型不存在的礼服，并且在重命名关闭类型时，您只需在一个地方进行更改。

我也不认为只有两列的表格有什么问题。

另外——关闭类型为 none 有意义吗？也许如果一件礼服没有closure_type，给它一个closure_type_id 0 会更有意义？

关于问题 2：您应该使用另一个表，也许是 gown_hues，具有列 gown_id 和 hue_id。然后，您可以在该表中为每件礼服的每种颜色设置一行。设置它，这样您就可以通过执行来检索与特定礼服相关的所有色调`SELECT * FROM gown_hues WHERE gown_id = $gown_id`。经验法则：几乎总有比尝试让单个字段包含多个值更好的方法。

问题3：这似乎是合理的。您的袍子表中的列是否包含字符串或coverage_flag 的id？我会选择后者（因为没有重复的信息）。然后在其他表中做同样的事情——任何其他可以被不同程度的东西覆盖的实体都可以包含你的coverage_flag表的外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:25:24.577

按顺序回答您的问题：

1) 不，这不是问题。使 gown.closure 成为依赖于 closing.id 的外键

2）我有两种方法。您可以制作一个带有 Id 的色调表，以及一个链接 Gown Id 和 Hue Id 的 Gown_Hue 链接表。或者您可以将 GownId 添加到 Hue 表并确保它没有唯一约束。这样你就不会在 Gown 中插入多个值。如果我这样做，我会使用 Link 表的第一种方法。

3）本质上，这与问题二的答案相同。

以伪代码为例，您将有 3 个表

```
table Gown
{
   id UniqueIdentifier primary Key
}

table Hue
{
   id UnqiueIdentifier primary key
   hueDescription ntext
}

table Gown_Hue_Link 
{
   gownId UniqueIdentifier foreignKey => Gown.id
   hueId UniqueIdentifier foreignKey => Hue.id
} 
```

所以要为你的礼服选择色调：

```
SELECT g.Id, h.hueDescription
FROM Gown g
 INNER JOIN Gown_Hue_Link ghl on ghl.gownId = g.id
 INNER JOIN Hue h on ghl.hueId = h.Id
WHERE G.id = <gown id> 
```

我更喜欢上面的方法，因为这意味着你只需要一个可以与许多礼服相关联的色调，但你也可以用两个表来做到这一点：

```
table Gown
{
   id UniqueIdentifier primary Key
}

table Hue
{
   id UnqiueIdentifier primary key
   gownId UniqueIdentifier foreignKey => Gown.id
   hueDescription ntext
} 
```

和：

```
SELECT g.Id, h.hueDescription
    FROM Gown g
     INNER JOIN Hue h on h.gownId = g.Id
    WHERE G.id = <gown id> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:25:49.573

听起来你在正确的轨道上。

**问题 1：**不，使用只有两列的表没有任何问题。

**问题 2：**您需要一个中间表来将色调与礼服相关联。类似于`gown_hues`“gown_id”和“hue_id”列。

**问题 3：**是的，您可以使用同一个`coverage`表作为值来关联多个表中的“覆盖”。每个表都应包含与表`coverage_id`中的值相关的一个`coverage`。

# php - 使用 while 循环进行分组

> ID：16181125
> 
> 赞同：1
> 
> 时间：2013-04-23T23:58:57.177
> 
> 标签：php

我的记录示例：

```
year  quanitity name
2012     10     john
2012     20     mark
2013     30     david
2013     40     alex
2014     50     stacy

while (!$report->EOF){
        if(is_null($year) || $year <> $report->fields['year']) {
        $year = $report->fields['year'];
        ?>
        <tr><td align="center" colspan="2" >Year : </td><td><?=$year ?></td></tr>
        <?
            }
        ?>    
        <tr><td align="center" colspan="2" >Quantity : </td><td><?=$report->fields['quanitity'] ?></td></tr>
        <?
        $report->MoveNext();                          
        } 
```

怎么做 结果是这样的

```
year : 2012
name : john quantity : 10
name : mark quantity : 20
Total : 30

year : 2013
name : david quantity : 30
name : alex quantity : 40
Total : 70 
```

我想制作一份按年分组的报告，并获得每年的总数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:03:50.160

Iterate over your data, and push each entry to its year's bin:

```
$groupedData = [];

foreach($originalData as $item){

  $groupedData[$item['year']][] = $item;

} 
```

Granted that each array has a `year` key.

# java - 计算枚举值

> ID：16181126
> 
> 赞同：1
> 
> 时间：2013-04-23T23:58:59.723
> 
> 标签：java, enums

我看过一段Java代码`enum`：

```
public enum Classname {
    UIViewAutoresizingNone(0), 
    UIViewAutoresizingFlexibleLeftMargin(1 << 0), 
    UIViewAutoresizingFlexibleWidth(1 << 1), 
    UIViewAutoresizingFlexibleRightMargin(1 << 2), 
    UIViewAutoresizingFlexibleTopMargin(1 << 3), 
    UIViewAutoresizingFlexibleHeight(1 << 4), 
    UIViewAutoresizingFlexibleBottomMargin(1 << 5);

    private int value;

    // constructor
    private Classname(int v) {
        this.value = v;
    }

    public int value() {
        return value;
    }
}

System.out.println(Classname.UIViewAutoresizingFlexibleBottomMargin.value); 
```

输出：32

我想结果是 2 的 5 次方。

一般来说，如果是

```
i << j 
```

express(i << j) 是什么意思？i 和 j 如何影响结果？有人可以指点我的教程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:00:24.093

该`<<`运算符是Java中的[左位移位运算符。](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)例如`i`为 1，位为`00000001`。左移位 ( `j`) 是 5：`00100000`即 32。左移位是将整数值乘以 2 的幂的一种快速方法。

此外，我应该提到`int`这里使用的数据类型是 32 位，而不是 8 位（为简单起见，我在上面显示了最低的 8 位）。如果您不小心，也可以将位“移开”并丢失它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:04:20.540

`<<` is the left shift operator. If you consider an integer as a binary string, it shifts the string one to the left and cuts off the leftmost bit (i.e. `0b000101` becomes `0b01010`). In terms of basic arithmetic, excluding overflow, this acts as a multiplication by two. Thus, 1<<5 is `0b100000`, or `2^5`, or 32.

In the expression `i<<j`, `i` is the base number being operated on, where `j` is the number of shifts occurring. When `i` is one, as in your example, `1<<n` creates a binary string where the n+1th bit is set and no other bits are set. This is useful because you can then add these strings together and check each individual bit to see if that particular option is on.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:19:12.730

Java 枚举是类。它们可以有实例变量，尽管使它们可写是一种非常糟糕的形式。构造函数

```
private Classname(int v) {
    this.value = v;
} 
```

意味着`Classname`必须使用 int 值构造实例。该声明`UIViewAutoresizingNone(0)`将 的值设置`UIViewAutoresizingNone`为 0，可能是为了使用外部代码。

然而，这是在 Java 中工作的一种有点愚蠢的方式。在 C 语言中，可以编写一个类似的枚举：

```
typedef enum {
    UIViewAutoresizingNone                 = 0, 
    UIViewAutoresizingFlexibleLeftMargin   = 1 << 0, 
    UIViewAutoresizingFlexibleWidth        = 1 << 1, 
    UIViewAutoresizingFlexibleRightMargin  = 1 << 2, 
    UIViewAutoresizingFlexibleTopMargin    = 1 << 3, 
    UIViewAutoresizingFlexibleHeight       = 1 << 4, 
    UIViewAutoresizingFlexibleBottomMargin = 1 << 5
} Classname; 
```

Java 和 C 之间的区别在于，在 C 中，枚举是真正`ints`的核心。鉴于上述声明，这样写是完全合法的，

```
Classname windowOptions = UIViewAutoresizingFlexibleLeftMargin |
                          UIViewAutoresizingFlexibleRightMargin; 
```

这会将 windowOptions 设置为`1 | 4 == 5`，并且外部系统将能够使用`&`操作员来挑选选项。

在 Java 中，你不能这样做。相反，您将使用`EnumSet<Classname>`：

```
EnumSet<Classname> windowOptions =
    EnumSet.of(Classname.UIViewAutoresizingFlexibleLeftMargin,
               Classname.UIViewAutoresizingFlexibleRightMargin); 
```

窗口系统将用于`Set.contains`确定已设置哪些选项。要做在 C 世界中所做的事情，必须有人写：

```
int bitMask = 0;
for(Classname option: windowOptions) {
    bitMask |= option.getValue();
} 
```

坦率地说，这是一团糟。

# json - Android PHP Mysql ...JSON 请求

> ID：16181127
> 
> 赞同：0
> 
> 时间：2013-04-23T23:59:06.553
> 
> 标签：json

我得到的错误是

> 请求失败：java.lang.IllegalArgumentException：索引 42 处查询中的非法参数：http:/10.0.2.2:8080/webservice2.php?json={\"UserName\":1,\"FullName\":2} "

**main.java**

```
package com.hamdyghanem.httprequest;

import java.*(etc etc)

public class Main extends Activity {
/** Called when the activity is first created. */
public int iLanguage = 0;
TextView lbl;
Typeface arabicFont = null;
int TIMEOUT_MILLISEC = 10000; // = 10 seconds

@Override
public void onCreate(Bundle savedInstanceState) {
    try {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        getWindow().setLayout(LayoutParams.FILL_PARENT,
                LayoutParams.FILL_PARENT);
        // ////
        arabicFont = Typeface.createFromAsset(getAssets(),
                "fonts/DroidSansArabic.ttf");

        lbl = (TextView) findViewById(R.id.lbl);
        //

    } catch (Throwable t) {
        Toast.makeText(this, "Request failed: " + t.toString(),
                Toast.LENGTH_LONG).show();
    }
}

public void clickbuttonRecieve(View v) {
    try {
        JSONObject json = new JSONObject();
        json.put("UserName", "test2");
        json.put("FullName", "1234567");
        HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams,
                TIMEOUT_MILLISEC);
        HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
        HttpClient client = new DefaultHttpClient(httpParams);

        String url = "http://10.0.2.2:8080/webservice2.php?json = {\"UserName\":1,\"FullName\":2}";

        HttpPost request = new HttpPost(url);
        request.setEntity(new ByteArrayEntity(json.toString().getBytes(
                "UTF8")));
        request.setHeader("json", json.toString());
        HttpResponse response = client.execute(request);
        HttpEntity entity = response.getEntity();
        // If the response does not enclose an entity, there is no need
        if (entity != null) {
            InputStream instream = entity.getContent();

            String result = RestClient.convertStreamToString(instream);
            Log.i("Read from server", result);
            Toast.makeText(this,  result,
                    Toast.LENGTH_LONG).show();
        }
    } catch (Throwable t) {
        Toast.makeText(this, "Request failed: " + t.toString(),
                Toast.LENGTH_LONG).show();
    }
}

public void clickbutton(View v) {
    try {
        Log.i(getClass().getSimpleName(), "send  task - start");
        HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams,
                TIMEOUT_MILLISEC);
        HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
        //
        HttpParams p = new BasicHttpParams();
        // p.setParameter("name", pvo.getName());
        p.setParameter("user", "1");

        // Instantiate an HttpClient
        HttpClient httpclient = new DefaultHttpClient(p);
        String url = "http://10.0.2.2:8080/webservice1.php?user=1&format=json";
        HttpPost httppost = new HttpPost(url);

        // Instantiate a GET HTTP method
        try {
            Log.i(getClass().getSimpleName(), "send  task - start");
            //
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                    2);
            nameValuePairs.add(new BasicNameValuePair("user", "1"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httppost,
                    responseHandler);
            // Parse
            JSONObject json = new JSONObject(responseBody);
            JSONArray jArray = json.getJSONArray("posts");
            ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

            for (int i = 0; i < jArray.length(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = jArray.getJSONObject(i);
                String s = e.getString("post");
                JSONObject jObject = new JSONObject(s);

                map.put("idusers", jObject.getString("idusers"));
                map.put("UserName", jObject.getString("UserName"));
                map.put("FullName", jObject.getString("FullName"));

                mylist.add(map);
            }
            Toast.makeText(this, responseBody, Toast.LENGTH_LONG).show();

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // Log.i(getClass().getSimpleName(), "send  task - end");

    } catch (Throwable t) {
        Toast.makeText(this, "Request failed: " + t.toString(),
                Toast.LENGTH_LONG).show();
    }

}

public class Data {
    // private List<User> users;
    public List<User> users;

    // +getters/setters
}

static class User {
    String idusers;
    String UserName;
    String FullName;

    public String getUserName() {
        return UserName;
    }

    public String getidusers() {
        return idusers;
    }

    public String getFullName() {
        return FullName;
    }

    public void setUserName(String value) {
        UserName = value;
    }

    public void setidusers(String value) {
        idusers = value;
    }

    public void setFullName(String value) {
        FullName = value;
    }
}
} 
```

webservice2.php

```
<?php 
//http://localhost:8080/sample1/webservice2.php?json= {%22UserName%22:1,%22FullName%22:2}
//$json=$_GET ['json'];
$json = file_get_contents('php://input');
$obj = json_decode($json);

//echo $json;

//Save
$con = mysql_connect('localhost','root','123456') or die('Cannot connect to the DB');
mysql_select_db('test',$con);

/* grab the posts from the db */
//$query = "SELECT post_title, guid FROM wp_posts WHERE post_author = $user_id AND post_status = 'publish' ORDER BY ID DESC LIMIT $number_of_posts";
mysql_query("INSERT INTO `test`.`users` (UserName, FullName)
    VALUES ('".$obj->{'UserName'}."', '".$obj->{'FullName'}."')");

mysql_close($con);
//
//$posts = array($json);
$posts = array(1);
header('Content-type: application/json');
echo json_encode(array('posts'=>$posts));

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:41:36.450

您应该转义您的 uri 字符。在 Android 上，您可以这样做：

```
String json = URLEncoder.encode("{\"UserName\":1,\"FullName\":2}", "utf-8");
String url = "http://10.0.2.2:8080/webservice2.php?json=" + json; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:32:38.387

`Illegal argument in Query at at index 42:` ——这是重要的一点。就是说 URI 中的第 43 个（从 0 开始）字符（恰好是反斜杠）在这种情况下是非法的。根据这个库，URI 似乎不允许包含反斜杠。（这似乎是不正确的：见[https://www.rfc-editor.org/rfc/rfc3986#section-2.1](https://www.rfc-editor.org/rfc/rfc3986#section-2.1)）

你有两个选择：

*   使用请求正文而不是查询字符串来包含 JSON 数据。
*   转义 URI 中的反斜杠，将它们替换为`%5C`（尽管您可能应该为此使用现有的库/函数）。

就个人而言，我会选择第一个。一些 HTTP 服务器对请求 URI 的长度有限制，如果您想传输超过该限制的数据，这可能会很烦人。另外，您无需担心百分比编码。

此外，您的 PHP 中存在 SQL 注入漏洞`mysql_query(...)`。想象一下，如果我上传的 JSON 是`{"UserName":"');DROP TABLE test.users;--"}`. 您应该改用 mysqli_* 函数。见[http://bobby-tables.com/](http://bobby-tables.com/)

# c++ - 包含 windows.h 时出现一百个错误

> ID：16181132
> 
> 赞同：6
> 
> 时间：2013-04-23T23:59:39.167
> 
> 标签：c++, winapi, visual-studio-2012

我正在运行 Windows 7 64 位和 VS2012。包含 windows.h 时，我遇到大约 130 个错误。当然不能编译项目。

做了一个简短的谷歌研究，我看到一些人建议再次安装 SDK。我重新安装但无济于事。

然后我尝试用我朋友的电脑上的相同文件替换 windows.h 文件，但我仍然得到错误。

然后我尝试替换整个包含文件夹：D，仍然得到相同的 130 错误。

我还确保在项目设置中启用了“允许语言扩展”选项。

有任何想法吗？

* * *

所以，我做了更多的研究。如果我开始一个新项目并编译：

```
#include <windows.h>

void main()
{

} 
```

它编译得很好。然后我包含了我的 2 个 .h 文件，然后出现了错误（我会再次提到：虽然不包含 windows.h，但我的项目可以完美编译）。

我的两个 .h 文件包含 2 个类。

数字集.h：

```
#pragma once

#include <iostream>
#include <cstdlib>
#include <ctime>
#include <algorithm>

#define SIZE 5

using namespace std;

class NumSet
{
    private:
        int _arr[SIZE];
        int _numOfNumbers;

    public:
        NumSet(void);
        ~NumSet(void);

        int max();                      //returns a player's max number.

        bool insert(int newNum);
        int freeCells();
        bool replace(int index, int newNum);

        int min();

        float average();

        int biggerThan(int num);

        int smallerThan(int num);

        NumSet& operator+=(int num);

        NumSet& operator++();

        NumSet& operator--();

        bool operator==(const NumSet& src)const;

        NumSet operator=(const int * src);

        NumSet& operator=(const NumSet& src);

        bool del(int num);

        friend ostream& operator<<(ostream& out, NumSet& numset);

        friend istream& operator>>(istream& out, NumSet& numset);
}; 
```

数字集.cpp：

```
#include "NumSet.h"

NumSet::NumSet(void)
{

    for (int i=0;i<SIZE;i++)            //generating 5 random numbers between 1-10 and storing them in the array.
    {

        _arr[i] = (rand()%10) +1;
    }

    std::sort(&_arr[0],&_arr[5]);     //sorting the numbers.

    _numOfNumbers = 5;
}

NumSet::~NumSet(void)
{
}

int NumSet::max()
{
    int max = 0;

    for (int i=0;i<SIZE;i++)
    {
        if (_arr[i]>max)
        {
            max = _arr[i];
        }
    }

    return max;
}

bool NumSet::insert(int newNum)
{
    if (freeCells()==0)
        return false;

    _arr[_numOfNumbers-1] = newNum;

    std::sort(&_arr[0],&_arr[5]);
}

int NumSet::freeCells()
{
    if (_numOfNumbers==SIZE)
        return 0;

    return (SIZE-_numOfNumbers);
}

bool NumSet::replace(int index, int newNum)
{
    if ((index<0 || index>SIZE) || (newNum<1 || newNum > 10))
        return false;

    _arr[index] = newNum;

    std::sort(&_arr[0],&_arr[5]);
}

int NumSet::min()
{
    int min = 11;

    for (int i=0;i<SIZE;i++)
    {
        if (_arr[i]<min)
        {
            min = _arr[i];
        }
    }

    return min;
}

float NumSet::average()
{
    int sum = 0;

    for (int i=0;i<SIZE;i++)
    {
        sum += _arr[i];
    }

    return ((float)sum/SIZE);
}

int NumSet::biggerThan(int num)
{
    int count = 0;

    for (int i=0;i<SIZE;i++)
    {
        if (_arr[i]>=num)
            count++;
    }

    return count;
}

int NumSet::smallerThan(int num)
{
    int count = 0;

    for (int i=0;i<SIZE;i++)
    {
        if (_arr[i]<num)
            count++;
    }

    return count;
}

NumSet& NumSet::operator+=(int num)
{
    this->insert(num);

    return *this;
}

NumSet& NumSet::operator++()
{
    for (int i=0;i<SIZE;i++)
    {
        _arr[i]++;

        if (_arr[i]==11)
        {
            _arr[i]= 1;
        }
    }

    return *this;
}

NumSet& NumSet::operator--()
{
    for (int i=0;i<SIZE;i++)
    {
        _arr[i]--;

        if (_arr[i]==0)
        {
            _arr[i]= 10;
        }
    }

    return *this;
}

bool NumSet::operator==(const NumSet& src)const
{
    if (_numOfNumbers != src._numOfNumbers)
        return false;

    for (int i =0;i<_numOfNumbers;i++)
    {
        if (_arr[i] == src._arr[i])
            continue;

        else
        {
            return false;
        }
    }

    return true;
}

NumSet NumSet::operator=(const int *src)
{
    if (sizeof(src)>(sizeof(int)*SIZE))
        return *this;

    NumSet newSet;

    for (int i=0;i<SIZE;i++)
    {
        newSet._arr[i]= src[i];
    }

    return newSet;
}

NumSet& NumSet::operator=(const NumSet& src)
{
    for (int i=0;i<SIZE;i++)
    {
        _arr[i]=src._arr[i];
    }

    _numOfNumbers=5;

    return *this;
}

bool NumSet::del(int num)
{
    if (num>SIZE)
        return false;

    _arr[num]=11;                           //setting the number to be deleted to 11 (there's no another way that 11 can be present in the array).

    std::sort(&_arr[0],&_arr[5]);           //sorting the array so the number to be deleted is in the end.

    _numOfNumbers--;                        //reducing the number of numbers in the array by 1, so the number to be deleted (the last in the array) will be ignored.
}

ostream& operator<<(ostream& out, NumSet& numset)
{
    if (numset._numOfNumbers==0)
        cout << "\n\nEmpty NumSet." << endl;

    else
    {
        for (int i=0;i<numset._numOfNumbers;i++)
        {
            cout << numset._arr[i] << " ";
        }
    }

    return out;
}

istream& operator>>(istream& in, NumSet& numset)
{

    for (int i=0;i<numset._numOfNumbers;i++)
    {
        cout << "\n\nEnter your #" << i+1 << " number:" << endl;
        int newnum;
        cin >> newnum;
        numset.replace(i, newnum);
    }

    return in;
} 
```

游戏.h：

```
#pragma once

#include "NumSet.h"

using namespace std;

class Game
{
    private:
        NumSet *player1, *player2;

        void humanVShuman();

        void humanVSpc();

        void pcVSpc();

    public:
        Game(void);
        ~Game(void);

        void game(int gameType);

}; 
```

游戏.cpp：

```
#include "Game.h"

Game::Game(void)
{
    player1 = new NumSet;
    srand(time(0));
    player2 = new NumSet;
}

Game::~Game(void)
{
}

void Game::game(int gameType)
{
    if (gameType==1)
        humanVShuman();

    else if (gameType==2)
        humanVSpc();

    else if (gameType==3)
        pcVSpc();
}   

void Game::humanVShuman()
{
    system("cls");
    cout << *player1 << endl;
    //Sleep(200);
    cout << *player2 << endl;
    system("PAUSE");
}

void Game::humanVSpc()
{

}

void Game::pcVSpc()
{

} 
```

现在是有趣的部分：

在 main.cpp 中。只要我在做

```
#include "NumSet.h"
#include "Game.h"
#include <windows.h> 
```

我在诸如wingdi.h 和winuser.h 等不同的h 文件中遇到了很多错误。

如果我不包括我的两个 h 文件 NumSet 和 Game，而只包括 windows.h，它编译时没有错误。

如果我只包含我的 2 h 文件，它会编译错误。

所以我的 2 h 文件中的某些内容会被 windows.h 中断。但是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T01:57:06.693

`SIZE`已在 中定义`windef.h`。你不想重新定义它。将其更改为`MY_SIZE`或您的`NumSet.h`. 然后它在我的机器上编译（Win7上的vs2012）。

而且，`max`您`min`的`NumSet`. 最好避免那些。我们已经在标准头文件中定义了这种宏。尝试一些其他名称。或者它会给你一些痛苦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T04:19:44.150

首先，我建议`windows.h`您将第一件事包括在内。这样，您得到的任何错误都将被视为*代码*中的错误，而不是 中的错误`windows.h`，这样您就可以修复它们。

`#define NOMINNMAX`其次，在包含之前尝试使用`windows.h`。这将阻止`windows.h`生成宏`min`和`max`（坦率地说，它们的名称非常糟糕，MS 应该为选择这些名称感到难过）。这样，您仍然可以使用您的功能`min`，并且`max`（或者，正如公知淘建议的那样，您可以重命名它们）。

（宫之涛提出的使用其他东西的建议`SIZE`可能也是正确的。）

编辑：更多信息`NOMINMAX`：http: [//support.microsoft.com/kb/143208](http://support.microsoft.com/kb/143208)

# mercurial - 如何使用“hg clone”指定端口号

> ID：16181133
> 
> 赞同：2
> 
> 时间：2013-04-23T23:59:40.323
> 
> 标签：mercurial, ssh

我正在尝试使用`hg clone ssh://user@ip:/path/to/repo .`，但我需要指定一个端口号。我试过包括一个`-p`之后，`hg clone`但这让我无处可去。我以前做过，但不记得了：-\

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T00:28:51.323

语法（from `hg help urls`，称为 from `hg help clone`）是：

```
ssh://[user@]host[:port]/[path][#revision] 
```

因此，在`:`和之间`/`你应该放你的端口号。

# c - 神秘错误：预期标识符或 '(' 在 'case' 之前

> ID：16181136
> 
> 赞同：1
> 
> 时间：2013-04-24T00:00:11.193
> 
> 标签：c

```
 case CON_QCLASS:
    if ((GET_CLASS(d->character) = parse_class(*arg)) == CLASS_UNDEFINED) {
      SEND_TO_Q("\r\nThat's not a class.\r\nClass: ", d);
      return;
    else
    SEND_TO_Q(race_menu, d);
    SEND_TO_Q("\r\nRace: ", d);
    STATE(d) = CON_QRACE;
    break;

  case CON_QRACE:
    if ((GET_RACE(d->character) = parse_race(*arg)) == CLASS_UNDEFINED) {
      SEND_TO_Q("\r\nThat's not a race.\r\nRace: ", d);
      return;

    if (GETPFILEPOS(d->character) < 0)
      GETPFILEPOS(d->character) = create_entry(GET_NAME(d->character);
    init_char(d->character);
    save_char(d->character, NOWHERE);
    SEND_TO_Q(motd, d);
    SEND_TO_Q("\r\n\n*** PRESS RETURN: ", d);
    STATE(d) = CON_RMOTD;

    sprintf(buf, "%s [%s] new player.", GET_NAME(d->character), d->host);
    mudlog(buf, NRM, LVL_IMMORT, TRUE);
    break; 
```

这是我得到的错误。

```
interpreter.c:71:3: error: expected identifier or ‘(’ before ‘case’`enter code here` 
```

最重要的是违规方。我想也许我忘记了一些东西，比如上面的括号/括号/括号，但事实似乎并非如此。至少我猜是这样，因为错误仅在添加上述代码后发生。

编辑：对不起浪费你的时间，我意识到我的错误。我最终把它放在了我原本打算的地方，完全替换了我的一部分代码。我现在觉得很傻。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:03:06.217

You are missing closing braces `}` for the if statements at the beginning of each case section.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:03:33.933

`if ((GET_CLASS(d->character) = parse_class(*arg)) == CLASS_UNDEFINED) {`

forget `}` other too.

# lucene - Apache 自定义 Lucene 评分

> ID：16181138
> 
> 赞同：1
> 
> 时间：2013-04-24T00:00:31.643
> 
> 标签：lucene, size, similarity, scoring

我正在尝试修改 Lucene 的默认相似度分数，如下所示。假设每个文档以及查询都由唯一的单词组成。我们对查询 q 和文档 d 的自定义相似度得分应该是`com(d,q)/(size(d)+size(q))`。两者中出现的术语数量在哪里`com(d,q)`（请注意，查询和文档中没有重复的术语）。`size(d)`并且`size(q)`是每一项中的项数。我们使用`WhiteSpaceAnalyzer`. 我们假设词条和文档频率为 1，并且词条没有被提升。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:20:58.580

要应用您自己的评分，您需要将 设置[`Similarity`](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/Similarity.html)为您自己的实现。您需要在 computeNorm 方法中处理 sive，该方法存储在索引时。其余的应由`coord`. 您可以免费扩展`TFIDFSimilarity`并获得很多东西，让您不必担心设置自己的`SimScorer`s 等等。你只需要删除很多功能。请记住，这将是每个文档中存储的额外信息

所以，像：

```
class MySimilarity extends TFIDFSimilarity {
    // 1/size(d) where size(d) is the number of terms in the Field,
    // rather than the Document (which doesn't really make sense)
    computeNorm(FieldInvertState state, Norm norm) {
        norm.setByte(encodeNorm(1 / state.getLength()));  // encodeNorm loses a great deal of precision, FYI.
    }

    // 1/size(q)
    float coord(int overlap, int maxOverlap) {
        return 1 / maxOverlap;
    }

    float idf(long docFreq, long numDocs) {
        return 1
    }

    float queryNorm(float sumOfSquaredWeights) {
        return 1;
    }

    float scorePayload(int doc, int start, int end, BytesRef payload) {
        return 1;
    }

    float sloppyFreq(int distance) {
        return 1;
    }

    float tf(float freq) {
        return 1;
    }

    float tf(int freq) {
        return 1;
    }
} 
```

我相信，应该按照以下方式计算分数：

```
(1 / size(q)) * ∑ (1 / size(d)) 
```

这应该适合你正在寻找的东西。

不过，我有一种强烈的感觉，你正在把婴儿和洗澡水一起扔出去。

# php - PHP 生成的 HTML 内容呈现为纯文本

> ID：16181139
> 
> 赞同：2
> 
> 时间：2013-04-24T00:00:51.553
> 
> 标签：php, html, apache, mime-types, lamp

我一直在本地（在 MAMP 中）开展一个项目，并决定将其在线上传到我的 LAMP 服务器。该服务器以前可以工作，但是在上传了我所有的新内容后，它并没有呈现 HTML，只是将源代码显示为纯文本。

所有 PHP 似乎都运行良好，因为它显示了正确的内容。

无济于事，我尝试使用`header("Content-Type: text/html")`. 但是，当我删除 PHP 包含并直接使用 HTML 时，它可以正常工作。

我正在使用一个**index.php**文件，其中包括其他一些文件：

```
<?php

include_once 'header.php';

include_once 'inc/window.php';
createWindow();

include_once 'footer.php';

?> 
```

也许我的**header.php**文件也可能包含一些线索：

```
<?php session_start(); ?>

<!doctype html>

<html>

<?php

include_once 'inc/files.php';
$files = json_decode(getFiles($ids));

?>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <?php

    $title = '';
    foreach($files as $i=>$file){
        $title .= $file->content . ' ';
        if(count($file) > 1 && $i < count($file)-1) $title .= '+ ';
    }

    ?>

    <title>* <?php echo strtolower($title); ?></title>

    <meta name="viewport" content="width=device-width,initial-scale=1">

    <link rel="stylesheet/less" type="text/css" href="css/main.css">

    <script src="js/libs/modernizr-2.0.6.min.js"></script>
</head>

<body> 
```

我的环境正在运行 PHP5+（我相信是 5.3？）、Ubuntu 和 Apache2。我也有 webmin 和 SSH 访问权限。

任何想法，将不胜感激！

强尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:44:30.453

哇 - 经过多一点调试后想通了！

该问题与 files.php 文件中设置的内容类型有关：

```
if(!headers_sent()) header('Content-Type: application/json'); 
```

出于某种原因，这是在发送页面标题之前遇到的。

我不确定为什么在我的本地网站上没有发生这种情况，如果有人可以对此发表意见，我很乐意为这个答案投票！:) 我现在已经删除了它，虽然它不是真的必要。

谢谢 S/O

# haskell - Haskell parsec 前缀运算符问题

> ID：16181142
> 
> 赞同：0
> 
> 时间：2013-04-24T00:01:19.100
> 
> 标签：haskell, parsec

我使用 GHC 在 Windows 上编译。这是我的代码（[也可在此处获得](http://hpaste.org/86423)）：

```
module GMC.GMLParser (parseGML) where

import Control.Applicative ((<$>), (<*>))
import Text.ParserCombinators.Parsec
import Text.ParserCombinators.Parsec.Expr
import Text.ParserCombinators.Parsec.Language
import qualified Text.ParserCombinators.Parsec.Token as P

type VarIdent = String
type FunIdent = String

data Expr =
      Var VarIdent
    | IntLit Integer
    | StringLit String
    | BiLit Bool
    | Op String Expr Expr
    | UnOp String Expr
    | Call FunIdent [Expr]
    deriving (Eq, Show)

data Stat =
      Seq [Stat]
    | Skip
    | Assign (Maybe VarIdent) Expr
    | If Expr Stat (Maybe Stat)
    deriving (Eq, Show)

lexer = P.makeTokenParser gmlDef

parens          = P.parens lexer    
braces          = P.braces lexer    
semi            = P.semi lexer
semiSep         = P.semiSep lexer  
semiSep1        = P.semiSep1 lexer    
commaSep        = P.commaSep lexer
commaSep1       = P.commaSep1 lexer
brackets        = P.brackets lexer
whiteSpace      = P.whiteSpace lexer    
symbol          = P.symbol lexer    
identifier      = P.identifier lexer    
reserved        = P.reserved lexer    
reservedOp      = P.reservedOp lexer
integer         = P.integer lexer    
charLiteral     = P.charLiteral lexer    
stringLiteral   = P.stringLiteral lexer

operators =
    [ [ prefix "-" ]
    , [ op "*"  AssocLeft, op "/"  AssocLeft ]
    , [ op "+"  AssocLeft, op "-"  AssocLeft ]
    , [ op "=" AssocNone, op "<>" AssocNone, op "<="  AssocNone
      , op "<" AssocNone, op ">="  AssocNone, op ">" AssocNone ]
    , [ op "&" AssocRight, op "&&" AssocRight ] -- Right for shortcircuiting
    , [ op "|" AssocRight, op "||" AssocRight ] -- Right for shortcircuiting
    , [ op ":=" AssocRight ]
    ]
    where
      op name assoc   = Infix (do{ reservedOp name
                                  ; return (\x y -> Op name x y) 
                                  }) assoc
      prefix name     = Prefix  (do{ reservedOp name
                                  ; return (\x -> UnOp name x)
                                  })

gmlDef :: LanguageDef st
gmlDef = emptyDef
    { commentStart    = "/*"
    , commentEnd      = "*/"
    , commentLine     = "//"
    , nestedComments  = True
    , identStart      = letter
    , identLetter     = alphaNum <|> oneOf "_"
    , reservedNames   = []
    , reservedOpNames = []
    , caseSensitive   = True
    }

parseGML :: String -> Either ParseError [Stat]
parseGML input = parse (whiteSpace >> many stat) "" input

intLit :: Parser Expr
intLit = IntLit <$> integer

strLit :: Parser Expr
strLit = StringLit <$> stringLiteral

variable :: Parser Expr
variable = do ident <- identifier
              memb <- optional $ symbol "." -- ignored for now, only parse its existance
              vname <- optional identifier -- ignored for now, only parse its existance
              indx <- optional $ brackets expr -- ignored for now, only parse its existance
              return (Var ident)

expr :: Parser Expr
expr = buildExpressionParser operators genExpr

genExpr :: Parser Expr
genExpr = choice [ intLit
                 , strLit
                 , try callExpr
                 , variable
                 , parens expr
                 ]

callExpr :: Parser Expr
callExpr = Call <$> identifier <*> parens (commaSep expr)

stat :: Parser Stat
stat =  do optional $ skipMany1 semi
           choice [ ifStat
                  , assignStat
                  , seqStat
                  ]

seqStat :: Parser Stat
seqStat = do stmts <- braces $ many stat
             return $ if null stmts then Skip else Seq stmts

ifStat :: Parser Stat
ifStat = If <$> (reserved "if" >> expr)
            <*> (optional (reserved "then") >> stat)
            <*> (optionMaybe $ reserved "else" >> stat)

assignStat :: Parser Stat
assignStat = do ident <- (optionMaybe $ try $ variable >> symbol "=")
                stmt <- case ident of
                    Just x -> expr
                    Nothing -> callExpr
                return (Assign ident stmt) 
```

有问题的问题是解析带前缀的实数和变量会产生奇怪的结果。

`x=-3`给出`[Assign (Just "=") (UnOp "-" (IntLit 3))]`正确的。`x=5+-3`然而，像and这样的更复杂的表达式`x = (arr[4]>-1 && 1)`似乎给出了不正确的结果。

`x = arr[4]>-1`但是`[Assign (Just '=') (Var "arr")]`应该是`[Assign (Just "x") (Op ">" (Var "arr") (UnOp "-" (IntLit 1)))]`

`x=5+-3`奇怪地给出`[Assign (Just "=" (IntLit 5))`了应该的时间`[Assign (Just "x") (Op "+" (IntLit 5) (UnOp "-" (IntLit 3)))]`

我认为这是因为与我的运算符优先级有关，或者一般来说我对前缀`-`运算符的实现似乎不可靠。我将不胜感激指导。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:31:51.777

几个问题：

```
ident <- (optionMaybe $ try $ variable >> symbol "=") 
```

这是解析和忽略`variable`，然后返回 的结果`symbol "="`。此外，`variable`这将是一个类型错误。我将`identifier`在这里进行测试，但您可能想要更高级的东西。

```
parse (whiteSpace >> many stat) "" input 
```

您的测试输入表明您打算解析整个内容。您可能应该在最后吃空格，然后使用`eof`以确保它消耗整个输入。

最后，在输入上，`"x = arr[4]>-1"`我很确定词法分析器会考虑`>-`单个标记，Haskell 自己的语法也是如此。所以在这种情况下，解析器是正确的（如果你添加`eof`我建议的，会出错）。请注意，赋值语句*不会*发生这种情况，因为 Parsec 的表达式解析器没有解析它。

这是我在进行这些更改后得到的输出（请原谅我奇怪的 GHCi 提示）：

```
∀x. x ⊢ parseGML "x=-3"
Right [Assign (Just "x") (UnOp "-" (IntLit 3))]
∀x. x ⊢ parseGML "x = arr[4]>-1"
Left (line 1, column 11):
unexpected '>'
expecting ";", "if", identifier, "{" or end of input
∀x. x ⊢ parseGML "x = arr[4]> -1"
Right [Assign (Just "x") (Op ">" (Var "arr") (UnOp "-" (IntLit 1)))]
∀x. x ⊢ parseGML "x = 5+-3"
Left (line 1, column 6):
unexpected '+'
expecting ";", "if", identifier, "{" or end of input
∀x. x ⊢ parseGML "x = 5+ -3"
Right [Assign (Just "x") (Op "+" (IntLit 5) (UnOp "-" (IntLit 3)))]
∀x. x ⊢ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T00:28:11.993

您的第 128 行：

```
assignStat = do ident <- (optionMaybe $ try $ variable >> symbol "=") 
```

我想专注于这一点：

```
variable >> symbol "=" 
```

这是做什么的：

*   解析变量，丢弃解析结果
*   解析一个`=`令牌
*   返回解析`=`结果作为整体解析的结果

你想要发生的事情：

*   解析一个变量
*   解析一个`=`令牌，丢弃解析结果
*   返回解析变量的结果作为整体解析的结果

将该代码段更改为：

```
variable <* symbol "=" 
```

（并且您需要`(<*)`从 Control.Applicative 导入）

除了不是那么简单：表达式有以下类型：

```
variable >> symbol "=" :: Parser String
variable <* symbol "=" :: Parser Expr 
```

您必须自己确定`variable`此时​​调用的解析器是否真的是正确的，或者`Align`构造函数的第一个字段是否应该改为 a `Maybe Expr`，或者您是否应该以其他方式修复它。

# ios - 使用 NSSet 从 NSMutableArray 中删除重复项

> ID：16181143
> 
> 赞同：0
> 
> 时间：2013-04-24T00:01:21.533
> 
> 标签：ios, objective-c, nsmutablearray, nsset

我正在尝试设置一个 NSSet 以从 NSDictionary 对象的 NSMutableArray 中删除所有重复项，但是我不确定如何将创建 NSSet 所需的值之一设置为 NSMutableArray 的 NSDictionary 对象中的元素...希望这是有道理的。

这就是 NSDictionary 的样子

```
ID = 22;
SERIESID = 33;
YEAREND = 2002;
YEARSTART = 1996; 
```

到目前为止，这是我的代码

```
NSSet *uniqueElements = [NSSet setWithArray:yearArray];

// iterate over the unique items
for(id element in uniqueElements) {
    // create new NSArray of unique entries
} 
```

我想知道如何根据 yearArray 中每个 NSDictionary 的 SERIESID 值创建一个唯一的 yearArray。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:04:03.597

你可以试试这个

```
NSMutableArray *resultantArray = [NSMutableArray array];

for(NSDictionary *dict in yearArray)
{
  NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SERIESID == %@",
                                          [dict valueForKey:@"SERIESID"]];

  NSArray filteredArray = [resultantArray filteredArrayUsingPredicate:predicate];

  if(![filteredArray count])
  {
    [resultantArray addObject:dict];
  }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T09:17:03.730

我已经更新了 Suhas 给出的解决方案：

```
NSMutableArray *resultantArray = [NSMutableArray array];
NSMutableArray * yearArrayCopy = [yearArray copy];
for(NSDictionary *dict in yearArrayCopy)
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SERIESID == %@",
                                      [dict valueForKey:@"SERIESID"]];

    NSArray *filteredArray = [yearArray filteredArrayUsingPredicate:predicate];

    if([filteredArray count])
    {
        [resultantArray addObject:dict];
        [yearArray removeObjectsInArray:filteredArray];
    }  
} 
```

“resultantArray”将仅包含唯一元素。

# objective-c - 单例数组目标 c 的实例

> ID：16181149
> 
> 赞同：-1
> 
> 时间：2013-04-24T00:02:09.067
> 
> 标签：objective-c, nsmutablearray, singleton

我已经用这样的单例方法实现了一个数组：

。H

```
#import <UIKit/UIKit.h>

@interface globaltextarray : NSObject 
+(NSMutableArray*)Text;

@end 
```

.m

```
#import "globaltextarray.h"

@implementation globaltextarray

+(NSMutableArray*)Text {
    static NSMutableArray *statArray;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        statArray = [NSMutableArray array];
    });
    return statArray;
}
@end 
```

我以我拥有的一种形式使用它并且效果很好。我想要实现的是以下。

在我使用这个全局数组的表单上，当我点击一个按钮时，一个新表单将打开，与我之前已经打开的表单相同，但其中的数据不同，然后在刚刚打开的第二个表单上，我点击一个按钮，同样的故事发生了上。所以我的问题是这样的：有没有办法使用这个唯一的 globaltextarray 对象创建多个单例数组，该对象应该保存不同的数据，这些数据在用户从一种形式导航到另一种形式（第二个、第三个等）时显示出来？

希望你能理解。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:40:58.153

首先最好阅读有关[如何以及何时使用单例类和 var 的](http://codeofdoom.com/wordpress/2008/04/20/how-and-when-to-use-singleton-classes/)信息。

为了实现您的功能，请不要使用单例数组。

你可以做两件事。

**第一种方法是**，`NSMutableArray`为您的每个表单创建一个属性并填写他们自己的视图加载方法。

```
@property(nonatomic,strong)NSMutableArray *formDetailsArray 
```

**第二种方法是最坏的情况**，为您的父表单创建一个全局`NSMutableArray`属性并在您的子表单中访问它。

**父表格**

```
 @property(nonatomic,strong)NSMutableArray *formParentArray;

[formParentArray addObject:form1childArray];
[formParentArray addObject:form2childArray];
[formParentArray addObject:form3childArray];
[formParentArray addObject:form4childArray]; 
```

**Child1 表单**

```
datasource = parentFormObj.form1childArray 
```

**Child2 表格**

```
datasource = parentFormObj.form2childArray 
```

# d3.js - D3 强制布局图导致 Firefox 浏览器运行缓慢

> ID：16181153
> 
> 赞同：2
> 
> 时间：2013-04-24T00:02:24.793
> 
> 标签：d3.js, force-layout

我有一个动态力图，每 3 分钟运行一次（使用 setInterval 我正在调用更新，按以下顺序开始）

*   `viz.update(); //attach new data from server like viz.path.data(data.links)`,
*   `viz.nodes.data(..)`
*   `viz.enter(); // viz.path.enter().append("path")`
*   `viz.exit(); // path.exit().remove()`
*   `force.start();`

当我将浏览器打开一段时间时，浏览器速度变慢，并且当我拖动节点时节点移动缓慢。我在这里错过了什么吗..

帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:35:09.770

Firefox 中的 SVG 性能比 Webkit/Chrome 和 IE10 慢。

在 Firefox 中的性能仍然不错。您可以尝试几件事。

*   确保你没有留下未使用/空的元素（如 <g>s），并妥善清理所有内容。太多的元素会很快扼杀你的表现。
*   减少使用不透明度的节点数量，尽量少用。
*   减少元素的数量。

我也做过一件事，但不确定是否有帮助，就是在再次调用 force.start() 之前调用 force.stop()。

# css - 如何在 IE10 中使用 css 线性渐变？

> ID：16181155
> 
> 赞同：3
> 
> 时间：2013-04-24T00:02:33.387
> 
> 标签：css, internet-explorer-10, linear-gradients

在 IE10 中，我试图创建一个 CSS 线性渐变，从页面顶部到页面底部。这是我到目前为止所拥有的

```
<!DOCTYPE HTML> 
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test</title>
    </head>
    <body>

        <meta http-equiv="X-UA-Compatible" content="IE=10">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <script type='text/javascript' src='./includes/js/jquery-2.0.0.min.js'></script>
        <link rel='stylesheet' type='text/css' href='./includes/css/css.css'/>

        <p id="title">
            Test
        </p>

    </body>
</html> 
```

css

```
body {
    margin: 0px; 
    padding: 0px;
    background-image: linear-gradient(to bottom, #dcdcdc 0%, #b0b0b0 100%);
}

#title {
    color:red;
} 
```

但它看起来不像我想要的那样。这最终会产生大约 100 像素高度的线性渐变，然后不断向下重复。类似于此图像：

![在此处输入图像描述](https://i.stack.imgur.com/xltHp.png)

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T01:03:39.643

这不仅仅是 IE10 的问题；事实上，这是设计使然。

背景在应用于和/或时具有[特殊行为](http://www.w3.org/TR/css3-background/#special-backgrounds)。当您在不触摸的情况下应用背景时，会发生主体背景传播到视口，并且该背景的行为就好像它是在 上声明的：`body``html``body``html``html`

> 对于根元素是 HTML`HTML`元素或 XHTML`html`元素的文档：如果根元素上 'background-image' 的计算值是 'none' 并且它的 'background-color' 是 'transparent'，则用户代理必须改为传播该元素的第一个 HTML`BODY`或 XHTML`body`子元素的背景属性的计算值。该`BODY`元素的背景属性的使用值是它们的初始值，并且传播的值被视为在根元素上指定了它们。

即使看起来不是这样，`html`and`body`元素实际上并不是以固有的 100% 高度开始的（除了 IE 中的 quirks 模式）；而是像任何其他块框一样采用其内容的高度。这意味着与元素`html`的组合高度`p`及其默认边距（与`body`元素一起折叠）的高度相同。

虽然默认情况下渐变背景被设计为在整个高度和宽度上延伸，但实际高度`html`并没有足够的空间让渐变本身覆盖整个视口，因此它只会在开始重复之前延伸到某个高度。AFAIK，这种行为在所有根据最新标准实现渐变的浏览器中都是一致的。

如果你想让渐变在整个视口中延伸，即使整个页面没有足够的内容，只需添加以下规则：

```
html {
    min-height: 100%;
} 
```

如果需要，您也可以将背景样式从`body`to移动`html`，但只要您一次只在其中一个元素上设置背景，将其应用于哪个元素并没有什么区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T06:41:14.250

这个固定贴在下面帮助了我。只需添加

```
background-attachment:fixed 
```

我知道这是一篇旧帖子，但我很确定人们仍然在为此苦苦挣扎，我尝试添加线性渐变并且没有工作，直到我发现我的背景附件属性是否有效。

# asp.net - 我有一个 asp.net .asmx webservice，我需要返回最接近查询 web 服务的客户端的地址列表

> ID：16181158
> 
> 赞同：0
> 
> 时间：2013-04-24T00:02:41.697
> 
> 标签：asp.net, vb.net, visual-studio-2010, .net-3.5, asmx

我目前有一个 Web 服务，我在 Visual Basic 中构建为 Visual Studio 2010 中的 asmx Web 服务。目前，当我使用我的 android 应用程序查询 Web 服务时，我从数据库中获得指定数量的地址。我需要的是 Android 应用程序将用户当前位置传递给网络服务，并让它返回数据库中最近的 10 个地址的列表，但我该怎么做呢？

下面是我有该查询的数据库的方法。

```
<WebMethod()> _
Public Function GetFuelStops(ByVal skip As Integer, ByVal take As Integer) As FuelStop()
    Dim resultList = New List(Of FuelStop)()

    Using sqlCon As New SqlConnection()
        sqlCon.ConnectionString = "Data Source=(local);Initial Catalog=****;User ID=****;Password=***(***"
        Dim sql = <sql>
            SELECT
                [Physical_Address_Street]
                , [Physical_Address_Local]
                , [Physical_Address_State]
                , [Physical_Address_Zip]
                , [Phone_Number]
            FROM Gas_Stations
            WHERE Location_Type = 1
            </sql>

        Dim command As New SqlCommand()
        command.CommandText = CStr(sql)
        command.Connection = sqlCon
        sqlCon.Open()

        Using reader = command.ExecuteReader()
            While reader.Read()
                Dim fuelStop = New FuelStop()
                fuelStop.Physical_Address_Street = reader.GetString(0)
                fuelStop.Physical_Address_Local = reader.GetString(1)
                fuelStop.Physical_Address_State = reader.GetString(2)
                fuelStop.Physical_Address_Zip = reader.GetString(3)
                fuelStop.Phone_Number = reader.GetString(4)

                resultList.Add(fuelStop)
            End While
        End Using
    End Using
    Return resultList.Skip(skip).Take(take).ToArray() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:07:20.823

您的应用需要启用 GPS（这将触发当前位置坐标），即纬度和经度。

同时，您的数据库表应该有每个地址的纬度和经度值，因为这些纬度和经度值将用于距离比较。

掌握所有纬度/经度值后，您需要在查询中使用 sin/cos 公式从数据库中返回前 5 或前 10 条记录。

干杯

# java - ImageIO.read() 返回 403 错误

> ID：16181159
> 
> 赞同：5
> 
> 时间：2013-04-24T00:02:48.093
> 
> 标签：java, http, url, http-status-code-403, javax.imageio

我有以下代码：

```
public BufferedImage urlToImage(String imageUrl) throws MalformedURLException, IOException {
    URL url = new URL(imageUrl);
    BufferedImage image = ImageIO.read(url);
    return image;
} 
```

这应该从给定的 URL 返回图像。

我用这两个随机选择的 URL 进行了测试：

*   [https://www.google.co.ma/images/srpr/logo4w.png](https://www.google.co.ma/images/srpr/logo4w.png)
*   [http://www.earthtimes.org/newsimage/osteoderms-storing-minerals-helped-huge-dinosaurs-survive_3011.jpg](http://www.earthtimes.org/newsimage/osteoderms-storing-minerals-helped-huge-dinosaurs-survive_3011.jpg)

第一个工作正常，但第二个给出 403 错误：

```
Caused by: java.io.IOException: Server returned HTTP response code: 403 for URL: http://www.earthtimes.org/newsimage/osteoderms-storing-minerals-helped-huge-dinosaurs-survive_3011.jpg
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
at java.net.URL.openStream(URL.java:1010)
at javax.imageio.ImageIO.read(ImageIO.java:1367) 
```

错误的原因可能是什么？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-24T09:40:07.113

该`ImageIO.read(URL)`方法使用几乎所有默认设置打开一个 URL 连接，包括`User-Agent`属性（将设置为您正在运行的 JVM 版本）。显然，您列出的网站需要更“标准”的 UA。使用直接 telnet 连接进行测试：

请求发送者`ImageIO.read(url)`：

> GET /newsimage/osteoderms-storing-minerals-helped-huge-dinosaurs-survive_3011.jpg HTTP/1.1
> 用户代理：Java/1.7.0_17
> 主机：www.earthtimes.org
> 接受：text/html、image/gif、image/ JPEG, *; q=.2, */* ; q=.2
> 连接：保持活动

*响应代码是 404（至少对我来说），`text/html`返回一个默认页面。*

“标准”浏览器发送的请求：

> GET /newsimage/osteoderms-storing-minerals-helped-huge-dinosaurs-survive_3011.jpg HTTP/1.1
> 用户代理：Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0 .1410.65 Safari/537.31
> 主机：www.earthtimes.org
> 接受：text/html、image/gif、image/jpeg、*；q=.2, */* ; q=.2
> 连接：保持活动

*响应码为 200，带有图像数据。*

以下简单的修复会延长您的代码，但通过设置更“标准”的 UA 来解决问题：

```
final String urlStr = "http://www.earthtimes.org/newsimage/osteoderms-storing-minerals-helped-huge-dinosaurs-survive_3011.jpg";
final URL url = new URL(urlStr);
final HttpURLConnection connection = (HttpURLConnection) url
        .openConnection();
connection.setRequestProperty(
    "User-Agent",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.65 Safari/537.31");
final BufferedImage image = ImageIO.read(connection.getInputStream()); 
```

# jquery - 删除列表中项目后的元素，jQuery

> ID：16181160
> 
> 赞同：1
> 
> 时间：2013-04-24T00:02:49.100
> 
> 标签：jquery, css

这是我的问题：

我有一个包含在主容器中的元素列表，如下所示：

```
<span class="main_container">
    <span id=".." class=".." position="1"...> </span>
    <span id=".." class=".." position="2"...> </span>  
    <span id=".." class=".." position="3"...> </span>
    <span id=".." class=".." position="4"...> </span>
    <span id=".." class=".." position="5"...> </span>
    <span id=".." class=".." position="6"...> </span>
</span> 
```

我将 ID 和位置用于不同的目的。现在，当我单击位置 4 的元素时，我希望系统删除跨度 4 及其下方的所有跨度。即5、6。

jQuery 我该怎么做？我试过`.parents()`了，但没有做到。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:09:38.740

你想用这个：

[http://api.jquery.com/nextAll/](http://api.jquery.com/nextAll/)

```
$('.main_container').find('span').click(function(){
  var jq_this = $(this);
  jq_this.nextAll().remove();  // remove all later siblings
  jq_this.remove();            // removes self
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:05:26.897

Bind [`.click()`](http://api.jquery.com/click/) on the child spans, use [`.index()`](http://api.jquery.com/index/) to get its sequence index, then use [`:gt()`](http://api.jquery.com/gt-selector/) selector to find elements past it and use [`.add()`](http://api.jquery.com/add/)

```
$('.main_container span').click(function(){
    // get position of current element
    var index = $(this).index();
    // delete this and all elements past this element
    $(this).parent().find('span:gt('+index+')').add(this).remove();
}); 
```

Example: [http://jsfiddle.net/cDZqk/](http://jsfiddle.net/cDZqk/)

You can also use [`.children()`](http://api.jquery.com/children/) if there's more nesting going on:

```
$('.main_container span').click(function(){
    // get position of current element
    var index = $(this).index();
    // delete this and all elements past this element
    $(this).parent().children(':gt('+index+')').add(this).remove();
}); 
```

Example: [http://jsfiddle.net/cDZqk/1/](http://jsfiddle.net/cDZqk/1/)

*or, ya know, you can use `.nextAll` and let it take care of it for you. **:curses:***

The "one-liner" version of BYossarian's answer:

```
$('.main_container span').click(function(){
    $(this).nextAll().add(this).remove();
}); 
```

Example: [http://jsfiddle.net/cDZqk/2/](http://jsfiddle.net/cDZqk/2/)

# java - How to check if an action is performed in Java?

> ID：16181165
> 
> 赞同：0
> 
> 时间：2013-04-24T00:03:16.453
> 
> 标签：java, swing

I have a combobox where I need the user to select something before the program can continue further. Is there someway to make sure the user has selected something before proceeding?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:13:30.817

我建议禁用所有相关组件，直到用户选择它的值。选择更改后，您可以重新启用这些组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T00:04:54.787

Check the JComboBox API and you'll find methods that will help you such as `getSelectedItem()` and `getSelectedIndex()`. Actually if you checked the API, you wouldn't have even needed to ask this question here. It's a great resource that you will want to get into the habit of using.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T00:09:45.423

您可以将代码的那部分移动到您“继续”的位置，直到用户对组合框执行操作。请参阅[动作侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-26T06:14:27.563

Java中有一个用于此的接口。您可以在此处了解如何创建：[ActionListener](https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)。这个接口处理我引用“一个动作事件发生，只要用户执行一个动作”。因此，在您的情况下，当用户在游戏继续之前单击某些内容时，您可以添加以下内容：

```
continueGame(); 
```

在 actionPerformed 方法下，并在该方法下有更多代码来处理你想要的。

我希望这对其他人有所帮助，因为我对这个问题迟了 2 年。

# sql - 在 SQL 中使用别名

> ID：16181166
> 
> 赞同：-2
> 
> 时间：2013-04-24T00:03:20.407
> 
> 标签：sql, aliases

我使用以下代码，但我试图理解别名，我收到此代码错误“SQL 命令未正确结束”，第 2 行

```
SELECT student.lastname, student.firstname
FROM student AS Student_Name
INNER JOIN memberof ON (Student_Name.SID = memberof.studentid)
INNER JOIN studentgroup ON (memberof.groupid = studentgroup.gid)
GROUP BY Student_Name.lastname , Student_Name.firstname 
HAVING COUNT(memberof.groupid) >= 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:17:40.653

我认为您使用的 Oracle 显然不支持表别名的 as 关键字。

```
SELECT s.lastname, 
       s.firstname
FROM student s
INNER JOIN memberof 
    ON s.SID = memberof.studentid
INNER JOIN studentgroup 
    ON memberof.groupid = studentgroup.gid
GROUP BY s.lastname, 
         s.firstname 
HAVING COUNT(*) >= 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:08:40.137

**MYSQL：**

如果您使用别名，则需要始终使用其别名来引用该表。通常我使用别名来缩短我的名字，这样我就不必输入太多了

```
SELECT s.lastname, s.firstname
FROM student AS s 
INNER JOIN memberof ON (s.SID = memberof.studentid)
INNER JOIN studentgroup ON (memberof.groupid = studentgroup.gid)
GROUP BY s.lastname , s.firstname 
HAVING COUNT(memberof.groupid) >= 2 
```

"s" 可能太短取决于您的代码上下文，但您明白了

**甲骨文**

Oracle 不支持表别名的**AS**，仅支持列别名： [SQL 命令未正确结束？](https://stackoverflow.com/questions/9811711/sql-command-not-properly-ended)

# jquery - Jquery Validation Plugin - 自定义方法返回

> ID：16181181
> 
> 赞同：0
> 
> 时间：2013-04-24T00:05:47.323
> 
> 标签：jquery, jquery-validate

我无法返回适当的回复。它有点像，在验证 parentAnswer 运行时，剥离名称以揭示父名称`Answer[12]`。现在，如果 this 的值为“yes”，那么我想返回如果尚未输入某些内容，这是必需的。

希望插件已经有一些内置的方式来检查它是否已经填写，而不必编写凌乱的代码来完成它。

```
<select class="input-small" name="Answers[12]">
    <option value="no">No</option>
    <option value="yes">Yes</option>
</select>    
<textarea class="parentAnswer" rows="5" cols="107" name="Answers[12a]"></textarea> 
```

方法

```
jQuery.validator.addMethod("parentAnswer", function(value, element) {
    var parentElement = element.name.replace(/(.*)\[(\d*).*\]/, "$1[$2]");
    var parentValue = $('select[name="'+parentElement+'"]').val();
    if(parentValue === 'yes'){
        return this.optional(element) || (parseFloat(value) > 0);
        //^ this is the line in question
    } else {
        return true;
    }
}, jQuery.format("Could you supply more details")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:00:15.000

用控制台日志检查你[`parseFloat(value)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)，你会发现它总是返回`NaN`，除非你`textarea`包含一些数字。我不认为那是你想要的。

试试这个更简单的逻辑：

```
jQuery.validator.addMethod("parentAnswer", function (value, element) {
    var parentElement = element.name.replace(/(.*)\[(\d*).*\]/, "$1[$2]");
    var parentValue = $('select[name="' + parentElement + '"]').val();
    return !(parentValue === 'yes' && $(element).val() === '');
}, jQuery.format("Could you supply more details")); 
```

**工作演示：http: [//jsfiddle.net/6LGFy/](http://jsfiddle.net/6LGFy/)**

**顺便说一句**：jQuery Validate 非常喜欢你`name`在所有输入字段上都有一个属性。您`textarea`缺少此属性。

* * *

**编辑**：

或者，您也许可以使用`depends`子选项而不是自定义方法。这种方式要简单得多，但您可能需要也可能不需要调整下面的选择器。

```
$(document).ready(function () {

    $('#myform').validate({
        rules: {
            answer: {
                required: {
                    depends: function(element) {
                        return $("select[name^='Answers'] option[value='yes']").is(":selected");
                    }
                }
            }
        },
        messages: {
            answer: {
                required: "Could you supply more details"
            }
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/UyMZ3/](http://jsfiddle.net/UyMZ3/)**

# php - 接收到的值不会进入图表

> ID：16181182
> 
> 赞同：0
> 
> 时间：2013-04-24T00:05:53.840
> 
> 标签：php, jquery, graph, google-visualization

我似乎无法让我的图表正确地绘制数据，我添加了值并且它们在控制台中正确接收并且没有任何错误，尽管图表没有显示这些数据。这是谷歌图表。

网址：[http ://oli.pw/stats.php?id=12131](http://oli.pw/stats.php?id=12131)

```
 google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Data', 'Visitors'],
      ['Todays Hits',  parseInt(todays)],
      ['Unique Hits Today', parseInt(uniquehitstoday)],
      ['Total Hits', parseInt(total)],
      ['Total Unique Hits', parseInt(uniquehits)]
    ]);

    var options = {
      title: 'Company Performance',
      hAxis: {title: 'Year', titleTextStyle: {color: 'red'}}
    };

    var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

如您所见，变量 todays、uniquehitstoday 都在其中，尽管它们没有出现在图表上。我解析，因为我收到错误说我不能使用字符串。

jQuery帖子：

```
 $(document).ready(function () {
         var url = $('#getid').val();
         $.post("assets/stats/getStatsData.php", {
             url: url
         },
         function (result) {
             var response = jQuery.parseJSON(result);
             if (response.available === true) {
             total = response.totalhits;
             todays = response.todays;
             uniquehits = response.uhits;
             uniquehitstoday = response.uhitstoday;
             }
             else
             {
                 alert("An error has occured");
             }
         });

     }); 
```

这在应用程序加载开始时运行，允许在构建图形之前设置变量。

PHP 如果需要

```
<?  
require("../config/config.php"); 
$id = $_POST['id'];
    $data = new stdClass();
    $data->available= true;
    $date = date("M d, Y"); 
    $uniquea = $dbh->query("SELECT DISTINCT shorturl FROM stats WHERE shorturl = '$id'"); 
    $uniqueb = count($uniquea->fetchColumn()); 
    $tdayua = $dbh->query("SELECT DISTINCT shorturl FROM stats WHERE date = '$date' AND shorturl = '$id'"); 
    $tdayub = count($tdayua->fetchColumn()); 
    $hitsa = $dbh->query("SELECT * from stats WHERE shorturl = '$id'"); 
    $hitsb = count($hitsa->fetchColumn()); 
    $tdayhitsa = $dbh->query("SELECT * from stats where date = '$date'"); 
    $tdayhitsb = count($tdayhitsa->fetchColumn()); 
    $data->totalhits= $hitsb;
    $data->todays= $tdayhitsb;
    $data->uhits = $uniqueb;
    $data->uhitstoday = $tdayub;
    echo json_encode($data);
?> 
```

没有发生连接错误。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:17:21.913

`google.setOnLoadCallback(drawChart);`在您的ajax调用之前完成。在您的文档中移动 drawChart。准备好：

```
 if (response.available === true) {
             alert(response.totalhits);
         total = response.totalhits;
         todays = response.todays;
         uniquehits = response.uhits;
         uniquehitstoday = response.uhitstoday;

         drawChart();
         } 
```

# python - Django 不存在

> ID：16181188
> 
> 赞同：102
> 
> 时间：2013-04-24T00:06:29.950
> 
> 标签：python, django, django-models, django-views

我在尝试找出“DoesNotExist 错误”时遇到问题，我试图找到管理无答案结果的正确方法，但是我继续遇到“DoesNotExist”或“对象没有属性 DoesNotExists”的问题

```
from django.http import HttpResponse
from django.contrib.sites.models import Site
from django.utils import simplejson

from vehicles.models import *
from gpstracking.models import *

def request_statuses(request):

    data = []
    vehicles = Vehicle.objects.filter()
    Vehicle.vehicledevice_
    for vehicle in vehicles:
        try:
            vehicledevice = vehicle.vehicledevice_set.get(is_joined__exact = True)
            imei = vehicledevice.device.imei
            try:
                lastposition = vehicledevice.device.devicetrack_set.latest('date_time_process')
                altitude = lastposition.altitude
                latitude = lastposition.latitude
                longitude =  lastposition.longitude
                date_time_process = lastposition.date_time_process.strftime("%Y-%m-%d %H:%M:%S"),
                date_time_created = lastposition.created.strftime("%Y-%m-%d %H:%M:%S")
            except Vehicle.vehicledevice.device.DoesNotExist:
                lastposition = None
                altitude = None
                latitude = None
                longitude = None
                date_time_process = None
                date_time_created = None
        except Vehicle.DoesNotExist:
            vehicledevice = None
            imei = ''

        item = [
                vehicle.vehicle_type.name,
                imei,
                altitude,
                "Lat %s Lng %s" % (latitude, longitude),
                date_time_process,
                date_time_created,
                '', 
                ''
                ]
        data.append(item)
    statuses = {
                "sEcho": 1,
                "iTotalRecords": vehicles.count(),
                "iTotalDisplayRecords": vehicles.count(),
                "aaData": data
                } 
    json = simplejson.dumps(statuses)
    return HttpResponse(json, mimetype='application/json') 
```

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-04-24T00:12:40.960

这条线

```
 except Vehicle.vehicledevice.device.DoesNotExist 
```

表示为 DoesNotExist 异常寻找设备*实例*，但没有，因为它在类级别，你想要类似的东西

```
 except Device.DoesNotExist 
```

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2013-04-29T21:32:37.470

我以这种方式使用 ObjectDoesNotExist 找到了解决此问题的方法

```
from django.core.exceptions import ObjectDoesNotExist
......

try:
  # try something
except ObjectDoesNotExist:
  # do something 
```

在此之后，我的代码按我的需要工作

无论如何，谢谢你的帖子帮助我解决我的问题

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-11-15T07:42:45.953

我认为最好和优化的解决方案是：

```
尝试：
   #你的代码
除了“ModelName”。DoesNotExist：
   #你的代码

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T15:30:42.300

第一种方式：

```
try:
   # Your code goes here
except Model.DoesNotExist:
   # Handle error here 
```

在 Django 中找不到另一种处理方式。它引发 Http404 而不是模型的 DoesNotExist 异常。

[https://docs.djangoproject.com/en/3.1/topics/http/shortcuts/#get-object-or-404](https://docs.djangoproject.com/en/3.1/topics/http/shortcuts/#get-object-or-404)

```
from django.shortcuts import get_object_or_404

def get_data(request):
    obj = get_object_or_404(Model, pk=1) 
```

# python - 包含换行符时如何在python中定义__str__？

> ID：16181189
> 
> 赞同：2
> 
> 时间：2013-04-24T00:06:32.397
> 
> 标签：python, string, python-3.x, newline

我正在尝试为迷宫对象定义**str** () 并让它打印出如下所示的内容：

```
#######
#J..P.#
#.###.#
#..@#.#
#@#.@.#
####### 
```

但是，当我构建要返回的字符串时，它最终会打印为：

```
'#######\n#J..P.#\n#.###.#\n#..@#.#\n#@#.@.#\n#######\n' 
```

我所做的只是遍历列表列表（每一行都是一个列表，整个迷宫是这些行列表的列表）并在每一行的末尾连接一个“\ n”。在返回结果字符串之前，我还应该对结果字符串做些什么，以便在调用 print() 或 str() 时迷宫的字符串表示将返回第一个所需的表示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:15:50.707

您是使用 print 语句进行打印，还是仅让 Python 打印值？例如。：

```
>>> a = "This is a\nmultiline string"
>>> a
'This is a\nmultiline string'
>>> print a
This is a
multiline string 
```

这只是正常的 Pythonic 行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:10:45.593

您是否尝试过使用原始字符串？（即包裹在`r""" """` 而不是`" "`或的字符串`' '`）。

此外，您可能会考虑使用`os.linesep`而不是硬编码`\n`来实现操作系统独立性。更多信息在[这里](https://stackoverflow.com/questions/1223289/how-to-write-native-newline-character-to-a-file-descriptor-in-python)。

# xml - xslt 1.0 使用复合键分组（在不同级别）

> ID：16181191
> 
> 赞同：2
> 
> 时间：2013-04-24T00:06:49.353
> 
> 标签：xml, xslt, muenchian-grouping

我有一个转换，我试图记录一组扁平化的交易细节，并在文件末尾提供按投标类型和登记号分组的总数的总和。
记录一组单独的交易细节是很容易的部分，我工作得很好，但我在总结部分苦苦挣扎。

问题是我不知道有什么或有多少不同的寄存器号，或者有什么或有多少招标类型（因此在 xslt 中明确列出带有静态过滤器字符串的摘要是不行的），所以有些某种分组似乎是有序的。

再来一把扳手——我被 XSLT 1.0 卡住了……</p>

我尝试弄乱 muenchian 分组，但是在复合键要求（注册生活在与付款方式不同的级别）和我对 muenchian 方法和键如何工作的有限理解之间，我似乎无法得到它工作，但我认为它仍然可能是需要的技巧......

关于我如何让 muenchia 神奇地让它发挥作用的任何建议？

这是一个示例源文档：

```
<s0:SalesCollection xmlns:s0="http://mySourceSchema">
  <s0:Sale transactionnumber="1" register="1">
    <s0:Tender amount="1.11" paymentmethod="visa" />
    <s0:Tender amount="2.22" paymentmethod="mastercard" />
  </s0:Sale>
  <s0:Sale transactionnumber="2" register="1">
    <s0:Tender amount="5.55" paymentmethod="discover" />
    <s0:Tender amount="4.44" paymentmethod="visa" />
  </s0:Sale>
  <s0:Sale transactionnumber="1" register="2">
    <s0:Tender amount="9.99" paymentmethod="amex" />
    <s0:Tender amount="8.88" paymentmethod="visa" />
  </s0:Sale>
</s0:SalesCollection> 
```

这就是我想要的（同样，我的记录 [@type='detail'] 记录已经在工作了）：

```
<ns0:root xmlns:ns0="http://myDestinationSchema">
  <ns0:record type="detail" transactionnumber="1" register="1" amount="1.11" paymentmethod="visa" />
  <ns0:record type="detail" transactionnumber="1" register="1" amount="2.22" paymentmethod="mastercard" />
  <ns0:record type="detail" transactionnumber="2" register="1" amount="5.55" paymentmethod="discover" />
  <ns0:record type="detail" transactionnumber="2" register="1" amount="4.44" paymentmethod="visa" />
  <ns0:record type="detail" transactionnumber="1" register="2" amount="9.99" paymentmethod="amex" />
  <ns0:record type="detail" transactionnumber="1" register="2" amount="8.88" paymentmethod="visa" />
  <ns0:record type="summary" register="1" amount="5.55" paymentmethod="visa" />
  <ns0:record type="summary" register="1" amount="2.22" paymentmethod="mastercard" />
  <ns0:record type="summary" register="1" amount="5.55" paymentmethod="discover" />
  <ns0:record type="summary" register="2" amount="9.99" paymentmethod="amex" />
  <ns0:record type="summary" register="2" amount="8.88" paymentmethod="visa" />
</ns0:root> 
```

那么如何使用 xslt 1.0 创建按 register 和 paymentmethod 分组的摘要记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:21:24.460

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:s0="http://mySourceSchema"
 xmlns:ns0="http://myDestinationSchema" exclude-result-prefixes="s0">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kTendByTypeAndReg" match="s0:Tender"
  use="concat(../@register, '#', @paymentmethod)"/>

 <xsl:template match="/*">
  <ns0:root xmlns:ns0="http://myDestinationSchema">
   <xsl:apply-templates select="*/*"/>
   <xsl:apply-templates mode="group" select=
   "*/*[generate-id()
       =generate-id(key('kTendByTypeAndReg',
                        concat(../@register, '#', @paymentmethod))[1]
                        )
       ]"/>
  </ns0:root>
 </xsl:template>

 <xsl:template match="s0:Tender">
   <ns0:record type="detail" transactionnumber="{../@transactionnumber}"
       register="{../@register}" amount="{@amount}" paymentmethod="{@paymentmethod}" />
 </xsl:template>

 <xsl:template match="*" mode="group">
    <ns0:record type="summary" register="{../@register}" paymentmethod="{@paymentmethod}"
  amount="{sum(key('kTendByTypeAndReg',concat(../@register,'#',@paymentmethod))
                   /@amount)}"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<s0:SalesCollection xmlns:s0="http://mySourceSchema">
  <s0:Sale transactionnumber="1" register="1">
    <s0:Tender amount="1.11" paymentmethod="visa" />
    <s0:Tender amount="2.22" paymentmethod="mastercard" />
  </s0:Sale>
  <s0:Sale transactionnumber="2" register="1">
    <s0:Tender amount="5.55" paymentmethod="discover" />
    <s0:Tender amount="4.44" paymentmethod="visa" />
  </s0:Sale>
  <s0:Sale transactionnumber="1" register="2">
    <s0:Tender amount="9.99" paymentmethod="amex" />
    <s0:Tender amount="8.88" paymentmethod="visa" />
  </s0:Sale>
</s0:SalesCollection> 
```

**产生想要的结果**：

```
<ns0:root xmlns:ns0="http://myDestinationSchema">
    <ns0:record type="detail" transactionnumber="1" register="1" amount="1.11" paymentmethod="visa"/>
    <ns0:record type="detail" transactionnumber="1" register="1" amount="2.22" paymentmethod="mastercard"/>
    <ns0:record type="detail" transactionnumber="2" register="1" amount="5.55" paymentmethod="discover"/>
    <ns0:record type="detail" transactionnumber="2" register="1" amount="4.44" paymentmethod="visa"/>
    <ns0:record type="detail" transactionnumber="1" register="2" amount="9.99" paymentmethod="amex"/>
    <ns0:record type="detail" transactionnumber="1" register="2" amount="8.88" paymentmethod="visa"/>
    <ns0:record type="summary" register="1" paymentmethod="visa" amount="5.55"/>
    <ns0:record type="summary" register="1" paymentmethod="mastercard" amount="2.22"/>
    <ns0:record type="summary" register="1" paymentmethod="discover" amount="5.55"/>
    <ns0:record type="summary" register="2" paymentmethod="amex" amount="9.99"/>
    <ns0:record type="summary" register="2" paymentmethod="visa" amount="8.88"/>
</ns0:root> 
```

**说明**：

正确使用：

1.  **[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

2.  **[AVT](http://www.w3.org/TR/xslt#attribute-value-templates)**（属性值模板）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:30:06.870

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ns0="http://myDestinationSchema"
  xmlns:s0="http://mySourceSchema"
  exclude-result-prefixes="s0"
  version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:key
    name="kTenderByRegisterAndMethod"
    match="s0:Tender"
    use="concat(parent::*/@register, '+', @paymentmethod)"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <ns0:root>
      <xsl:apply-templates select="*/s0:Tender"/>
      <xsl:apply-templates 
        select="*/s0:Tender[generate-id() = 
                            generate-id(key(
                              'kTenderByRegisterAndMethod',
                              concat(parent::*/@register,
                                     '+',
                                     @paymentmethod))[1])]"
        mode="summary"/>
    </ns0:root>
  </xsl:template>

  <xsl:template match="s0:Tender">
    <ns0:record type="detail">
      <xsl:apply-templates select="parent::*/@*|@*"/>
    </ns0:record>
  </xsl:template>

  <xsl:template match="s0:Tender" mode="summary">
    <ns0:record type="summary" register="{parent::*/@register}">
      <xsl:attribute name="amount">
        <xsl:value-of
          select="sum(
                    key('kTenderByRegisterAndMethod',
                        concat(parent::*/@register,
                        '+', @paymentmethod))/@amount)"/>
      </xsl:attribute>
      <xsl:apply-templates select="@*[not(name() = 'amount')]"/>
    </ns0:record>
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于原始 XML：**

```
<s0:SalesCollection xmlns:s0="http://mySourceSchema">
  <s0:Sale transactionnumber="1" register="1">
    <s0:Tender amount="1.11" paymentmethod="visa"/>
    <s0:Tender amount="2.22" paymentmethod="mastercard"/>
  </s0:Sale>
  <s0:Sale transactionnumber="2" register="1">
    <s0:Tender amount="5.55" paymentmethod="discover"/>
    <s0:Tender amount="4.44" paymentmethod="visa"/>
  </s0:Sale>
  <s0:Sale transactionnumber="1" register="2">
    <s0:Tender amount="9.99" paymentmethod="amex"/>
    <s0:Tender amount="8.88" paymentmethod="visa"/>
  </s0:Sale>
</s0:SalesCollection> 
```

**...产生了想要的结果：**

```
<ns0:root xmlns:ns0="http://myDestinationSchema">
  <ns0:record type="detail" transactionnumber="1" register="1" amount="1.11" paymentmethod="visa"/>
  <ns0:record type="detail" transactionnumber="1" register="1" amount="2.22" paymentmethod="mastercard"/>
  <ns0:record type="detail" transactionnumber="2" register="1" amount="5.55" paymentmethod="discover"/>
  <ns0:record type="detail" transactionnumber="2" register="1" amount="4.44" paymentmethod="visa"/>
  <ns0:record type="detail" transactionnumber="1" register="2" amount="9.99" paymentmethod="amex"/>
  <ns0:record type="detail" transactionnumber="1" register="2" amount="8.88" paymentmethod="visa"/>
  <ns0:record type="summary" register="1" amount="5.55" paymentmethod="visa"/>
  <ns0:record type="summary" register="1" amount="2.22" paymentmethod="mastercard"/>
  <ns0:record type="summary" register="1" amount="5.55" paymentmethod="discover"/>
  <ns0:record type="summary" register="2" amount="9.99" paymentmethod="amex"/>
  <ns0:record type="summary" register="2" amount="8.88" paymentmethod="visa"/>
</ns0:root> 
```

**解释**

你在检查 Muenchian Grouping 方面走在了正确的轨道上。请注意我使用的复合键，它`s0:Tender`通过连接元素的父`@register`值、“+”号（为方便起见并确保连接永远不会被破坏）和它们的`@paymentmethod`值来匹配元素。

坚持使用 Muenchian Grouping，即使它不是最容易立即理解的概念。我自己是通过查看[有关 SO 的 Muenchian Grouping 相关问题](https://stackoverflow.com/search?q=%5Bxslt%5D%20muenchian%20grouping)并尝试回答它们来学习的；随着时间的推移，它开始为我清理。

# html - 如何在没有 iframe 的情况下播放 youtube 视频？

> ID：16181193
> 
> 赞同：3
> 
> 时间：2013-04-24T00:06:59.127
> 
> 标签：html, css, mobile, video

寻找一种在由 HTML、Javascript、PHP 或 CSS 提供支持的视频播放器中显示 youtube 视频的方法。可能是CSS。我不反对下载视频并自己托管它，但我更愿意让谷歌托管它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:14:13.217

嵌入视频时，您可以选择使用“旧嵌入代码”，它使用对象标签而不是 iframe。这是一个例子：

```
<object width="560" height="315">
  <param name="movie" value="http://www.youtube.com/v/aBcDeFg?hl=en_US&amp;version=3"></param>
  <param name="allowFullScreen" value="true"></param>
  <param name="allowscriptaccess" value="always"></param>
  <embed src="http://www.youtube.com/v/aBcDeFg?hl=en_US&amp;version=3" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true"></embed>
</object>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:26:50.233

更好的方法：使用 Yahoo Media Player！

只需在页面正文中包含此代码：
`<script type="text/javascript" src="http://webplayer.yahooapis.com/player.js"> </script>`
只需在页面正文中添加指向 youtube 视频的链接。然后，当它被点击时，它会播放！此外，如果您添加多个视频/音频文件，那么它会将所有这些文件都包含在播放列表中。更多信息在这里：[http](http://webplayer.yahoo.com/) ://webplayer.yahoo.com/或更多代码，这里有一个演示：[http:](http://webplayer.yahoo.com/get/)
//webplayer.yahoo.com/get/ Shadowpat

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-26T21:49:17.460

截至 2015 年 1 月 27 日之后：将 API 用作目标代码已被弃用：

> 2015 年 3 月 9 日
> 
> 该文档已更新，以反映自 2015 年 1 月 27 日起，YouTube 嵌入、YouTube Flash Player API 和 YouTube JavaScript Player API 均已弃用。本文档的多个部分中显示了弃用警告，以帮助读者了解IFrame Player API 作为替代方案。

API 代码可能类似于：

```
<div id="ytplayer"></div>

<script>
  // Load the IFrame Player API code asynchronously.
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // Replace the 'ytplayer' element with an <iframe> and
  // YouTube player after the API code downloads.
  var player;
  function onYouTubePlayerAPIReady() {
    player = new YT.Player('ytplayer', {
      height: '360',
      width: '640',
      videoId: 'M7lc1UVf-VE'
    });
  }
</script> 
```

引用和代码均来自：[https ://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)

在看：[https ://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

该页面的源代码显示 API 将播放器作为 html 发出，并带有用于实际视频显示的 video 标签：

```
<div id="player" style="width: 100%; height: 100%;">
 <div class="html5-video-player unstarted-mode ytp-hide-controls" tabindex="-1" id="player_uid_7211231_1" data-version="/yts/jsbin/player-vflC8Yy7I/en_US/base.js" aria-label="YouTube Video Player">
      <div class="html5-video-container" data-layer="0">
           <video tabindex="-1" class="video-stream html5-main-video" controlslist="nodownload" style="width: 720px; height: 405px; left: 0px; top: -405px;"></video>
      </div>
      <div class="ytp-gradient-top" data-layer="1"></div>
      ...
 </div>
</div> 
```

# c# - setnamedsecurityinfo 在 Win7 x64 上运行良好，在 Win7 x86 上失败

> ID：16181195
> 
> 赞同：0
> 
> 时间：2013-04-24T00:07:06.420
> 
> 标签：c#, windows-7, pinvoke, 32bit-64bit

以下方法在 Win7 Pro SP1 x64 上运行良好，但是当我在 Win7 Pro SP1 x86 上运行它时，它在到达 //write the new owner 注释时失败

为什么它适用于一个而不适用于另一个的一些原因是什么？

这是使用 pinvoke

谢谢！

```
public static void ChangeOwner(ref string strPath, string strUserName)
    {
        IntPtr pNewOwner = default(IntPtr);
        IntPtr deUse = default(IntPtr);
        Win32Exception Win32Error = default(Win32Exception);
        string domain_name = null;
        int ret = 0;
        int sid_len = 0;
        int domain_len = 0;

        // Series of quick sanity checks before we proceed...

        //Do we have the required Privilege?
        if (SetPrivileges() == false)
        {
            throw new Exception("Required privilege not held by the user");
        }

        // Convert the name to a valid SID
        sid_len = SID_SIZE;
        pNewOwner = Marshal.AllocHGlobal(sid_len);
        domain_len = NAME_SIZE;
        string domainThing = "";
        domain_name = domainThing.PadRight(domain_len);
        if (LookupAccountName(null, strUserName, pNewOwner, ref sid_len, domain_name, ref domain_len, ref deUse) == false)
        {
            ret = Marshal.GetLastWin32Error();
            Win32Error = new Win32Exception(ret);
            //throw new Exception(Win32Error.Message);
        }

        // write the new Owner
        ret = SetNamedSecurityInfo(strPath, SE_FILE_OBJECT, OWNER_SECURITY_INFORMATION, pNewOwner, IntPtr.Zero, IntPtr.Zero, IntPtr.Zero);
        if (ret != 0)
        {
            Win32Error = new Win32Exception(ret);
            throw new Exception(Win32Error.Message);
        }

        // clean up and go home
        Marshal.FreeHGlobal(pNewOwner);
    } 
```

# xcode - 我需要 Xcode 才能使用 Quartz Composer 吗？

> ID：16181196
> 
> 赞同：1
> 
> 时间：2013-04-24T00:07:15.603
> 
> 标签：xcode, quartz-composer

或者我可以在获得 Quartz Composer 后删除 Xcode 吗？如果不需要，我不想保留该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T01:31:51.410

现在您可以单独下载图形工具并将其安装在您想要的位置 ( [https://developer.apple.com/downloads/index.action#](https://developer.apple.com/downloads/index.action#) )。您根本不必下载 XCode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:09:46.610

我怀疑你可以删除 Xcode。一个简单的查找方法是在 Finder 中压缩 Xcode（右键单击（或按住 Control 单击）它，然后选择“Compress Xcode.app”），然后丢弃该应用程序并运行 Quartz Composer。如果它坏了，解压缩 Xcode。如果它有效，你很高兴去！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T08:03:53.923

如果你需要一个基于 Quartz Composer`QCView`类的独立应用程序，你肯定需要 Xcode。还有一个`QCRenderer`类是专为 Quartz Composer 作品的低级渲染而设计的。如果您想负责将合成渲染到特定的 OpenGL 上下文，则可以使用该类。

# jquery - Coffee on Enter Keypress 重复发送 PUT 请求

> ID：16181199
> 
> 赞同：0
> 
> 时间：2013-04-24T00:07:47.017
> 
> 标签：jquery, ruby-on-rails, json, coffeescript

我有这个咖啡脚本代码，它接受“Enter”按键，以便通过 ajax 提交表单

```
$(".text_field.comment").keypress (e) ->
  if e.which is 13    
    $(this).blur()
    form = $(this).closest("form")
    $.ajax
      url: form.attr('action')
      type: "PUT"
      dataType: "json"
      data: form.serialize()
    false 
```

这里发生的是它重复发送请求近 20 次！！！必须做些什么来停止重复发送请求？

愚蠢的我！答案在于我的控制器。在我有这个之前：

```
class AnswersController < ApplicationController
  before_filter :authenticate_user!

  def update
    @answer = Answer.find(params[:id])
    if @answer.update_attributes(params[:answer])
      redirect_to(@answer,
        :notice => I18n.t('answer.notice'))
    else
      flash[:error] = @answer.errors.full_messages.to_sentence
      redirect_to @answer
    end 
  end 
end 
```

然后我把它改成这样：

```
class AnswersController < ApplicationController
  before_filter :authenticate_user!

  def update
    @answer = Answer.find(params[:id])

    respond_to do |format|
      if @answer.update_attributes(params[:answer])
        format.json { render :json => @answer }
      else
        format.json { render :json => @answer.errors.full_messages.to_sentence } #output javascript messages
      end
    end
  end
end 
```

重复请求的原因是因为它有一个“GET /answers/1”的循环请求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:11:54.107

“当浏览器注册键盘输入时，按键事件被发送到一个元素。” - [jQuery API](http://api.jquery.com/keypress/)

这对您的情况意味着您不断遇到键盘输入并运行该功能。我相信你可能一直在追求的是[`keyup`](http://api.jquery.com/keyup/)。

```
$(".text_field.comment").keyup (e) -> 
```

# matlab - 有没有办法在 MATLAB 的编辑框中屏蔽文本？

> ID：16181201
> 
> 赞同：2
> 
> 时间：2013-04-24T00:08:12.997
> 
> 标签：matlab, text, passwords, masking, editbox

有什么方法可以屏蔽输入到编辑框中的文本？

我必须制作一个非常基本的原型 GUI，它将从用户那里获取用户名和密码，它们都可以工作，但我想用星号而不是纯文本替换用户的密码。

例如，我不想在编辑框中显示“bob”，而是显示“* * *”。

在这一点上，安全性并不重要，因为它只是一种视觉表示，目前还没有正确使用。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:41:39.547

最简单的解决方案是使用别人的。在这种情况下，函数[密码](http://www.mathworks.com/matlabcentral/fileexchange/6590-passcode)来自 Matlab 文件交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T19:35:02.283

你也可以使用我提交的[Fex: passfield](http://uk.mathworks.com/matlabcentral/fileexchange/47210-passfield)。

![http://uk.mathworks.com/matlabcentral/fileexchange/screenshots/22617/original.jpg](https://i.stack.imgur.com/wZRom.png)

# c# - C# 使用结构插入字段和记录？

> ID：16181203
> 
> 赞同：1
> 
> 时间：2013-04-24T00:08:31.163
> 
> 标签：c#, struct, structure, field, records

我想将一些字段和记录插入到使用结构创建的文件中。我不确定我是否以正确的方式提出问题，但这是我编写的代码：

```
 struct Student
 {
    public string Name;
    public int Age;
    public int ID;
    public string Email;
    public string Country;
    public void ClearStudentInfo()
    {
        Name = "";
        Age = 0;
        ID = 0;
        Email = "";
        Country = "";
    }

    static void Main(string[] args)
    {
        FileStream fsw = new FileStream("SomeFile.txt", FileMode.Append, FileAccess.Write);
        StreamWriter Sw = new StreamWriter(fsw);
        Sw.WriteLine("John", 22, 3254, "John123@yahoo.com", "United States");

        Sw.Close();
        fsw.Close();
    }
} 
```

当我打开文件 SomeFile.txt 时，它只显示 John 而不是其余的记录。

反正有没有以更有条理的方式插入它？要出现在表格或文件中，如下所示：

```
Name: John
Age: 22
ID: 3254
E-mail: John123@yahoo.com
Country: United States 
```

如果我要插入的不仅仅是学生信息，此代码是否适用于此？！

任何答案将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:32:31.260

1.  你为什么使用结构？ [读这些？](https://stackoverflow.com/search?q=%5Bc#%5D%20struct%20vs%20class) 我知道你标记了 struct 但我看不出有任何理由在这里使用它。

2.  StreamWriter.WriteLine 没有做你认为它做的事情。您试图使用[它](http://msdn.microsoft.com/en-us/library/60scc1f1.aspx)不会为您写出每个项目。

3.  正如宇宙先生所提到的，您最好在常规问题中格式化您的输出。但是，请参阅下文以获取您想要的输出。如果你变得好色并想要动态输出，你可以做一个查找表或反射。

    ```
    class Student
    {
        public string Name { get; set; }
        public int Age { get; set; }
        public int ID { get; set; }
        public string Email { get; set; }
        public string Country { get; set; }

        public void ClearStudentInfo()
        {
            Name = "";
            Age = 0;
            ID = 0;
            Email = "";
            Country = "";
        }

        public string FormatForOutput()
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("Name: ");
            sb.Append(Name);
            sb.Append("\nAge: ");
            sb.Append(Age);
            sb.Append("\nID: ");
            sb.Append(ID);
            sb.Append("\nE-Mail: ");
            sb.Append(Email);
            sb.Append("\nCountry: ");
            sb.Append(Country);
            return sb.ToString();
        }
    } 
    ```

    使用 StringBuilder 来提高 4+ 级联的效率。[参考](http://support.microsoft.com/kb/306822)

然后你可以做

```
 var student = new Student() { Name = "John", Age = 22, ID = 3254, Email = "John123@yahoo.com", Country = "United StateS" };
    using (FileStream fsw = new FileStream("SomeFile.txt", FileMode.Append, FileAccess.Write))
    {
        using (StreamWriter sw = new StreamWriter(fsw))
        {
            sw.WriteLine(student.FormatForOutput());
        }
    } 
```

“使用”语句会为您处理流的关闭，因此您不必担心它。尽管我讨厌该示例不使用流，但请参见[此处。](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:16:29.183

您*非常*困惑参数的含义是什么[`WriteLine`](http://msdn.microsoft.com/en-us/library/60scc1f1.aspx)。你有这一行：

```
Sw.WriteLine("John", 22, 3254, "John123@yahoo.com", "United States"); 
```

不清楚为什么您认为此行会导致您寻求的输出，但此调用传递字符串“John”并作为*额外参数*传递（到`string.Format(...)`）值、、、`22`和`3254`该方法。由于您不使用任何字符串替换标记（例如），因此您的额外参数将被完全丢弃。`"John123@yahoo.com"``"United States"``{0}`

因此，您只打印出“John”也就不足为奇了。

你说你想要这个输出：

> 姓名：John
> 年龄：22
> ID：3254
> 电子邮件：John123@yahoo.com
> 国家：美国

但是，当您从不输出字符串“Name：”、“Age：”、“ID：”等时，如何输出呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:22:45.813

输出您希望的信息类型的最有组织的方式是使用 CSV。

```
WriteLine("Name,Age,ID,E-Mail,Contry");
WriteLine("John,22,3254,John123@yahoo.com,United States");
.... 
```

它可以很容易地被程序读取并使用 Excel 或类似的电子表格软件将其作为表格查看。

# javascript - 为什么 WCF 服务无法在托管服务器上运行？

> ID：16181206
> 
> 赞同：2
> 
> 时间：2013-04-24T00:08:41.007
> 
> 标签：javascript, asp.net-mvc, wcf, service

我在我的 ASP.NET 网站上创建了一个 WCF 服务。但是当我在托管服务器上运行网站时（例如在真实域 somedomain.com 上），WCF 服务无法运行或被来自 javascript 的任何请求调用。它只能在我的本地主机上运行。

这是我的 web.config 文件中的配置；它在配置标签中只有一些 xml 行：

```
<configuration>
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <behaviors>
      <endpointBehaviors>
        <behavior name="ServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
      <service name="Service">
        <endpoint address="" behaviorConfiguration="ServiceAspNetAjaxBehavior"
          binding="webHttpBinding" contract="Service" />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

web.config 中的信息由 Visual Studio 2008 在创建 WCF 服务时生成。服务行为名为“ServiceAspNetAjaxBehavior”，并且在端点标记中也定义了它。它使用 webHttpBiding 供客户端调用 Web 服务。

Service.svc 文件只有一行：

```
<%@ ServiceHost Language="C#" Debug="true" Service="Service" CodeBehind="~/App_Code/Service.cs" %> 
```

我网站根目录的 App_Code 文件夹中的 Service.cs 文件。Service.cs 的内容如下。由于Service.cs的行数太多，所以我只贴一些代码示例，让大家看看Service.cs文件的基本构造函数。

```
using System;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.ServiceModel.Web;
using System.Collections.Generic;
using System.Data;
using System.IO;
using System.Web;
using System.Configuration;
using System.Data.SqlClient;
using System.Collections;
using DotNetNuke.Entities.Users;

[ServiceContract(Namespace = "IELTSpedia")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class Service
{
    public Class1 class1 = new Class1();
    public static string defaultPortalAlias = Class1.GetDefaultPortalAlias1();
    public static string testViewPage = "";
    /// <summary>
    /// Reads the available products to provide data for the Kendo Grid
    /// </summary>
    /// <returns>All available products</returns>
    [OperationContract]
    [WebInvoke(ResponseFormat = WebMessageFormat.Json,
                  RequestFormat = WebMessageFormat.Json)]
    public DataSourceResult Read(int skip, int take, IEnumerable<Sort> sort, Filter filter)
    {
        take = skip + take;
        skip = skip + 1;
        return new DataSourceResult();
    }
} 
```

Service.cs 文件有一个“Read”方法，当使用 javascript 调用时，该方法将返回一个对象以填充客户端网页上的网格视图。我用来调用服务的javascript函数如下：

```
read: {
    url: "http://localhost:8698/dotnetnuke_community_06.02.01_install/Service.svc/Read", //specify the URL which data should return the records. This is the Read method of the Products.svc service.
    contentType: "application/json; charset=utf-8", // tells the web service to serialize JSON
    type: "POST" //use HTTP POST request as the default GET is not allowed for svc
},
parameterMap: function(data, operation) {
    if (operation != "read") {
        // web service method parameters need to be send as JSON. The Create, Update and Destroy methods have a "products" parameter.
        return JSON.stringify({ service: data.models })
    } else {
        return JSON.stringify(data);
    }
} 
```

在javascript中；我已经通过我的 Web 服务的 localhost url 调用了该服务。当我在 localhost 上运行我的网站时，此 url 有效。当我将我的网站上传到托管服务器时，我已将 url 更改为[http://somedomain.com/Service.svc/Read](http://somedomain.com/Service.svc/Read) 问题是 WCF 服务只能在我的本地主机上调用，而不能在托管上调用服务器。在本地主机上运行网站时，我已经测试了该服务；它成功并且对象正常返回但不在托管服务器上。

最后，我的问题是如何在 web.config 文件中的托管服务器上配置 WCF 服务。

我希望我的示例代码可以让您清楚地了解我的问题。我处于问题的边缘，需要 stackoverflow 社区的帮助。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:16:52.907

为了从 javascript 访问 WCF 服务，它应该是 RESTful 服务。因此尝试使 WCF 成为 RESTful 服务。可以参考 [http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:41:58.110

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T11:16:00.323

This is just an add-on to @tri-nguyen-dung's last comment, which I used to get my service working in a virtual directory on a hosted server (arvixe).

Here's my version of his Web.config section, that is sitting inside `\wwwroot\<virtualdirectory>\Web.config`:

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="<virtualdirectory>Behaviour" >
                <serviceDebug includeExceptionDetailInFaults="true" />
                <serviceMetadata httpGetEnabled="true" />
            </behavior>
        </serviceBehaviors>
        <endpointBehaviors>
            <behavior name="<virtualdirectory>Behaviour">
                <enableWebScript />
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="false" minFreeMemoryPercentageToActivateService="0">
        <baseAddressPrefixFilters>
            <add prefix="http://<yourserver>.com"/>
        </baseAddressPrefixFilters>             
    </serviceHostingEnvironment>
    <services>
        <service name="<virtualdirectory>.Services.<virtualdirectory>Service" behaviorConfiguration="<virtualdirectory>Behaviour">
            <host>
                <baseAddresses>
                    <add baseAddress="http://<yourserver>.com"/>
                </baseAddresses>
            </host>
            <endpoint address="http://<yourserver>.com/<virtualdirectory>/Services/<virtualdirectory>Service.svc"
                    behaviorConfiguration="EDGEBehaviour"
                    binding="webHttpBinding"
                    contract="virtualdirectory.Services.I<virtualdirectory>Service" />
        </service>
    </services>
</system.serviceModel> 
```

With `<yourserver>` and `<virtualdirectory>` being your app address; to get your e.g. service help page my address was `http://<yourserver>.com/<virtualdirectory>/Services/<virtualdirectory>Service.svc/help`. You don't have to use my naming convention for your app code, but it worked for me.

Here's my `I<virtualdirectory>Service.cs` code:

```
namespace <virtualdirectory>.Services
{
    [ServiceContract]
    public interface I<virtualdirectory>Service
    {
        [OperationContract]
        object GetFormResult(string form_id); 
```

Here's the implementation (`<virtualdirectory>Service.svc.cs`):

```
namespace <virtualdirectory>.Services
{
    using <lots>;

    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class <virtualdirectory>Service : I<virtualdirectory>Service 
    {
        [WebGet(UriTemplate = "GetFormResult?form_id={form_id}", ResponseFormat = WebMessageFormat.Json)]
        public object GetFormResult(string form_id)
        { 
```

Implementation markup (`<virtualdirectory>Service.svc`):

```
<%@ ServiceHost Language="C#" Debug="true" Service="<virtualdirectory>.Services.<virtualdirectory>Service" Factory="<virtualdirectory>.WebServiceHostFactory3WithJsonP" CodeBehind="<virtualdirectory>Service.svc.cs" %> 
```

Note that I got `WebServiceHostFactory3WithJsonP` from google somewhere, to serve REST+JSON over WCF. The newer WebAPI stuff in .NET 4.5 is better, but my site is in .NET4.

For completeness, here's my javascript that is calling this:

```
jQuery(document).ready(function ($) {
    jQuery('#formdetails').submit(function () {
    jQuery('.widget_formdetails input[type="submit"]').hide();
    jQuery('.formloading').show();
    var form_parameters = jQuery(this).serialize();
    var form_type = jQuery('#form_type').val();
    switch (form_type) {
        case '<someoption>':
        var js<someoption> = new f<someoption>(  // object helper function
                    jQuery('#textfield1').val(), 
                    jQuery('#textfield2').val(), 
                    jQuery('#textfield3').val()
                    );
        var json<someoption> = JSON.stringify({ Message: js<someoption>});
        $.getJSON(
            '/<virtualdirectory>/Services/<<virtualdirectory>Service.svc/GetFormResult',
            'form_request=' + json<someoption>,
            form_request // callback function
        );
        break; 
```

# ruby-on-rails-3 - 如何跨命名空间模型使用多态关联？

> ID：16181207
> 
> 赞同：1
> 
> 时间：2013-04-24T00:08:43.110
> 
> 标签：ruby-on-rails-3, polymorphic-associations, refinerycms

我了解如何使用活动目录中的 class_name 选项来引用命名空间模型：

```
has_one :slide, :class_name => '::Refinery::Slides::Slide' 
```

以及如何使用多态关联

```
has_one :slide, :as => :slideable 
```

你可以一起使用它们吗？

```
has_one :slide, :class_name => '::Refinery::Slides::Slide', :as => :slideable 
```

如果是这样，你如何定义多态关联？

```
belongs_to :slideable, :polymorphic => true, class_name='::Refinery::Slideables::Slideable' #NO 
```

我正在使用 RefineryCMS，您添加的每个引擎都在 Refinery::PluralModel::SingularModel 中命名。基本上，我希望能够将幻灯片与案例研究或工作相关联。以下是实际模型。

```
module Refinery
  module CaseStudies
    class CaseStudy < Refinery::Core::BaseModel
      attr_accessible :title, :description, :position
      has_one :slide, :class_name => '::Refinery::Slides::Slide', :as => :slideable
    end
  end
end

module Refinery
  module Works
    class Work < Refinery::Core::BaseModel
      attr_accessible :title, :description, :position, 
      has_one :slide, :class_name => '::Refinery::Slides::Slide', :as => :slideable
    end
  end
end

module Refinery
  module Slides
    class Slide < Refinery::Core::BaseModel
      attr_accessible :slide_id, :caption, :position, :slideable_id, :slideable
      belongs_to :slide, :class_name => '::Refinery::Image'
      belongs_to :slideable, :polymorphic => true
    end
  end
end 
```

似乎我应该可以说 slide.slideable.title 但我收到一个错误：nil:NilClass 的未定义方法“标题”

[apidoc](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/belongs_to)指定 inverse_of 不能与多态一起使用，但对 class_name 只字未提

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:54:30.130

要使多态关联起作用，您需要在模型上添加一个类型列和一个 id 列，该列“属于”另一个。类型列将存储类名，因此无需在通用关联中指定。

例如， a`Comment`可以属于 a`Question`或 an `Answer`。让我们称问题和答案为“可评论的”。评论应该有`:commentable_id`和列`:commentable_type`。

```
class Comment < ActiveRecord::Base
  # has columns :commentable_id and :commentable_type
  belongs_to :commentable, :polymorphic => true
end

class Question < ActiveRecord::Base
  has_many :comments, :as => :commentable
end

class Answer < ActiveRecord::Base
  has_many :comments, :as => :commentable
end

# example
comment = Comment.new(:body => "Nice answer!")
comment.commentable = Answer.find(1)
comment.save 
```

因此，在您的情况下，您可以从and中删除`:class_name`选项，并确保将列(to go with ) 和(to go with ) 添加到您的. 它应该与命名空间的类名一起“正常工作”。`Work``CaseStudy``:slide_type``:slide_id``:slideable_type``:slideable_id``Slide`

```
module Refinery
  module CaseStudies
    class CaseStudy < Refinery::Core::BaseModel
      attr_accessible :title, :description, :position
      has_one :slide, :as => :slideable
    end
  end
end

module Refinery
  module Works
    class Work < Refinery::Core::BaseModel
      attr_accessible :title, :description, :position, 
      has_one :slide, :as => :slideable
    end
  end
end

module Refinery
  module Slides
    class Slide < Refinery::Core::BaseModel
      attr_accessible :slide_id, :caption, :position, :slideable_id, :slideable
      # add :slide_type and :slideable_type columns
      belongs_to :slide, :polymorphic => true
      belongs_to :slideable, :polymorphic => true
    end
  end
end 
```

# ruby-on-rails - 如何避免 Rails ActiveRecord 子类中的属性重新声明？

> ID：16181208
> 
> 赞同：1
> 
> 时间：2013-04-24T00:08:45.827
> 
> 标签：ruby-on-rails, inheritance, activerecord

给定以下代码：

```
class BaseType < ActiveRecord::Base
  attr_accessible :a, :type
end

class SubType < BaseType
  attr_accessible :b
end 
```

我希望属性`a`可以在 中访问`BaseType`，并且属性`a`和`b`可以在 中访问，`SubType`而无需在 中`a`再次声明`SubType`。在这种情况下，单表继承没有帮助，或者至少我无法弄清楚。还可以应用哪些其他解决方案？

**更新：**

在 timpone 发表评论之后，这就是我测试上面代码的方式：

通过以下方式创建模型：

```
rails g model BaseType a:string type:string
rails g model SubType b:string 
```

将 sub_type.rb 中的超类从 更改`ActiveRecord::Base`为`BaseType`。迁移后，我尝试在 rails 控制台中创建一个新的 SubType 实例并收到以下错误：

```
1.9.3p194 :001 > SubType.create(:b => "A")
ActiveRecord::UnknownAttributeError: unknown attribute: b 
```

为什么呢？

# c++ - 鼠标指针渲染器

> ID：16181209
> 
> 赞同：1
> 
> 时间：2013-04-24T00:08:52.680
> 
> 标签：c++, windows, api, winapi

我正在考虑创建一个针对 Windows 7 的 c++ 软件（使用 Windows api），它允许在同一台 PC 上使用第二个鼠标指针，所以我的问题是 Windows 的一部分正在处理鼠标指针的渲染？我相信了解它的实际工作原理将使我能够模仿它以呈现第二个鼠标指针。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T00:44:47.733

Windows 的窗口系统只支持一个“真正的”光标：它是 2D 图形芯片组的低级功能（这就是光标不会出现在屏幕截图中的原因）。Windows 留出一个单独的视频内存区域来保存光标的位图：具有 AND/XOR 通道（用于索引不透明度和颜色反转）的 DDB（设备相关位图）或用于 alpha 透明的 32bpp RGBA 表面光标（这是“显示光标阴影”功能的实现方式）。我的理解是光标应用于实际输出图像，因为它被输出设备“扫描”（例如用于 VGA 输出的 DAC 或任何 DVI 和 HDMI 使用），

对光标使用这个特殊技巧也是必要的，以将延迟保持在最低限度。如果您编写一个绘制到窗口表面的程序（例如，使用 GDI 甚至通过 OpenGL 或 Direct3D），您会看到它落后于真实光标几毫秒，这对用户来说很容易注意到（这就是现代 RTS 的原因游戏使用此硬件光标功能而不是自己重新实现它）。

据我所知，没有办法扩展此功能 - 您必须成为反汇编之神才能修改 Windows 和图形驱动程序以实现绘制多个光标的能力。

这就是事物的呈现方面。对多个光标的实际应用程序级支持也很棘手 - 请记住，光标移动对应于发送到 hWnds 的各种与鼠标相关的窗口消息。两个游标的问题是这些消息会发生冲突，尽管理论上它应该可以工作，前提是它们被正确地序列化到单个队列中。应用程序会出现问题，许多人会假设，例如，一次只能有一个控件处于 Hover 状态，如果您有多个游标，那么应用程序只会尊重最近的游标消息。

我可能会建议查看在 Windows 7 中引入的 Windows 的多点触控支持，它确实支持多个同时的“光标”，尽管它是为手指而不是鼠标设计的。

# c - 阿克曼在 gcc 上的函数段错误

> ID：16181210
> 
> 赞同：1
> 
> 时间：2013-04-24T00:08:55.960
> 
> 标签：c, gcc

很明显我不是一个称职的 C 作家，但想知道，关于这个问题，[阿克曼在 Haskell/GHC 方面效率很低](https://stackoverflow.com/questions/16115815/ackermann-very-inefficient-with-haskell-ghc)（这可能让我不合理地感到恼火）为什么作者的程序来计算威廉·阿克曼的著名函数：

```
int ack(int m, int n) {
  if (m == 0) return n+1;
  if (n == 0) return ack(m-1, 1);
  return ack(m-1, ack(m, n-1));
}

int main() {
  printf("%d\n", ack(4,1));
  return 0;
} 
```

工作正常，但是当给出一个明显的优化（这在其他地方有帮助）并给出论点（4,2）——这在算法上当然是残酷的——结束时`Segmentation fault: 11`：

```
int ack(int m, int n) {
  if (m == 0) return n+1;
  if (m == 1) return n+2;
  if (n == 0) return ack(m-1, 1);
  return ack(m-1, ack(m, n-1));
}

int main() {
  printf("%d\n", ack(4,2));
  return 0;
} 
```

如果我注释掉“优化”行`if (m == 1) return n+2;`，程序会像在其他语言中一样继续运行，但不会产生相同的效果——至少在运行 5 分钟后不会。[更正，似乎确实如此——在 8 分 41 秒之后]（我应该注意，我使用的是 os x 附带的 gcc，但似乎也发生了同样的情况，例如`gcc-4.7.2`on `ideone.com`。）

我同意该程序甚至不值得被编译，但想知道为什么分段错误（通常被视为恐怖并且在我熟悉的其他语言中被视为语言缺陷或编译器错误）是对`gcc`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T00:16:10.880

这两个程序都用完了堆栈，而您的改进做得更快。请注意，所需的堆栈与参数“n”成正比，并且“n”增长很快。所以没有错误，只是一台有限的机器。

让我从我的存档中添加一些代码，只是为了好玩和更快。它还显示了“n”随着“m”的每个增量而增长的速度。

```
typedef unsigned long long N;
N acker (N m, N n)
{
        while (1)
        switch (m)
        {
        case 0: return n+1U;
        case 1: return n+2U;
        case 2: return 2U*(n+1U)+1U;
        case 3: return (1LLU<<(n+3U))-3U;
        default:
                if (n == 0U)
                        n = 1U;
                else
                        n = acker(m, n-1U);
                m--;
                break;
        }
        return n+1U;
} 
```

# java - 实例检查接口的数组列表

> ID：16181214
> 
> 赞同：1
> 
> 时间：2013-04-24T00:09:20.613
> 
> 标签：java

所以我有这个 CopyOnWriteArrayList，其中 GameObject 是一个接口。在整个程序中，我向这个数组列表中添加了一堆不同类型的游戏对象。我想知道是否可以遍历这个数组列表并检查 GameObject 是否是给定对象的实例（在方法中使用参数。这通常是我的意思：

```
public <T extends Object> List<T> getObjectsOfType(Class<T> type) {
    ArrayList<T> list = new ArrayList<T>();
    for (Object obj : objects) {
        if (/*match?*/) {
            list.add((T) obj);
        }
    }
    return list;
} 
```

那么“匹配”在哪里说，我想检查对象是否与 Class 类型有任何关系。如果 GameObject 实现“类型”，我也希望它能够工作。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:11:56.813

是的-您可以使用[`isAssignableFrom`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)以下方法`Class<T> type`：

```
if (type.isAssignableFrom(obj.getClass())) {
    list.add((T) obj);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:13:39.690

你可以使用泛型来解决这个问题。看来您的方法正在接受对象列表，所以我假设您将`GameObject`s 放入一个看起来像这样的列表中。

```
List<Object> gameObjects = new ArrayList<Object>(); 
```

如果您将列表切换为使用仅接受的泛型，`GameObject`则无需进行类型检查。

```
List<GameObject> gameObjects = new ArrayList<GameObject>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:17:03.527

您可以使用Class 中的[isInstance()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29)方法：

```
if (type.isInstance(obj)) {
    list.add(type.cast(obj));
} 
```

我还建议使用类型。[cast()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)方法用于强制转换`obj`而不是强制转换`(T)`。后者会给你一个编译时警告，而 using`type.cast()`不会。

# c# - C#中用于路径的正则表达式

> ID：16181217
> 
> 赞同：0
> 
> 时间：2013-04-24T00:09:29.600
> 
> 标签：c#, regex, url

我需要帮助以获取以下内容的常规表达：

```
/_layouts/images/ABC.RadToolBarWebPart/add.png 
```

和一个可以是完整的或相对的 url。一些例子：

```
~/Realtime/ABCSoft/Pages/My-Application.aspx
www.xyz.com
http://xyz.com
https://xyz.com 
```

我已经为图像尝试了 "/_layouts/images/" + "^[a-zA-z0-9./] *.[jpg|gif|png]$" 和 "^[~]* [/a-zA-Z0 -9]+.[aspx|com|net]$" 用于 URL

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:36:15.783

Uri 及其[Uri.Segments](http://msdn.microsoft.com/en-us/library/system.uri.segments.aspx)将是比正则表达式更好的选择。它将正确处理您需要手动删除的编码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:30:17.700

以下适用于提供的路径。虽然不完全优雅（根据您的判断添加 ^ 和 $）。

```
((https?://)|(~/)|(/)|)(([a-zA-Z .\_-]+)+/?)+ 
```

# iphone - UINavigation 按钮更改

> ID：16181223
> 
> 赞同：0
> 
> 时间：2013-04-24T00:09:59.443
> 
> 标签：iphone, ios, objective-c, xcode, uinavigationcontroller

我有 3 个视图控制器，其中 2 个带有我在第三个控制器中显示的一些数据。我想根据我从哪个控制器读取数据来更改第三个控制器导航按钮。

示例：如果我按下控制器 1 中的行，我希望控制器 3 上的按钮为“编辑”，如果我按下控制器 2 中的一行，我希望控制器 3 上的按钮消失..

我该怎么做？

我对iOS开发很陌生，所以一个带有一些解释的例子会很棒..谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:45:56.000

您可以在这一行的帮助下访问所有推送的视图控制器。

```
navigatonController.viewControllers 
```

从这个视图控制器数组中，

如果`Vc1`被推送，则检查推送的视图控制器。

```
if([Vc1 isKindOfClass:[ViewController1 classs]]) {

     // display your button.

}
else ([Vc2 isKindOfClass:[ViewController2 class]]){

    //hide your button.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:18:48.110

对于前两个视图控制器中的每一个，`title`将控制器导航项的属性设置为您希望在后退按钮中显示的标题。导航控制器将使用它来设置第三个视图控制器中的后退按钮标题。

# sql - SQL Oracle 错误 - 作业任务

> ID：16181224
> 
> 赞同：-2
> 
> 时间：2013-04-24T00:10:13.190
> 
> 标签：sql, oracle

请帮助我使用 Oracle 数据库解决以下 SQL 问题

PROMPT：按PK升序列出仓库表的所有列。• 仅列出地址以 RD 或 ST 结尾的行

```
SELECT *
FROM warehouse 
WHERE address ='% rd' 
OR WHERE address ='% st',
ORDER BY whid ASC; 
```

错误信息：

> OR WHERE 地址='%st', *
> 
> 第 4 行出错：ORA-00936：缺少表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:12:28.953

您不需要第二个`WHERE`，逗号也应该删除。此外，您可能希望有`LIKE`之前的地址，并且您可能不希望有空格。

我想你的意思是：

```
SELECT *
FROM warehouse 
WHERE address LIKE '%rd' 
OR address LIKE '%st'
ORDER BY whid ASC; 
```

或者，你可能很聪明：

```
-- You don't say this explicitly, but I think it a good idea to make sure that 
-- you are searching for rd and st in the right tense. That is why I have 'lower'
SELECT *
FROM warehouse 
WHERE lower(substr(address,-2,2)) in ('rd', 'st')
ORDER BY whid ASC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:12:58.203

摆脱第二个`WHERE`语句，并将您的等价语句更改为`LIKE`.

```
SELECT *
FROM warehouse 
WHERE address LIKE '% rd' 
OR address LIKE '% st'
ORDER BY whid ASC; 
```

如果那里有等价语句，您将只匹配完全等于`% rd`or的字符串`% st`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:11:31.040

摆脱第二个`WHERE`，使用`LIKE`代替`=`并尝试删除`%`字符后的空格。

```
SELECT *
FROM warehouse 
WHERE address LIKE '%rd' 
OR address LIKE '%st'
ORDER BY whid ASC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T00:15:31.107

使用 LIKE 关键字：

```
SELECT * FROM warehouse WHERE address LIKE '%RD' OR address LIKE '%ST' ORDER BY whid ASC; 
```

# android - Click Android 上的空指针异常（按钮保存到 SQLite 数据库）

> ID：16181225
> 
> 赞同：0
> 
> 时间：2013-04-24T00:10:14.657
> 
> 标签：android, sqlite, onclick, nullpointerexception

当我单击确认按钮将配置文件详细信息保存到 sqlite 数据库时，我得到一个空指针异常并且我的应用程序关闭。我有一个读数日志，它们具有相同的基本编码结构（显然不同的列名等）并且工作得很好。我似乎无法弄清楚出了什么问题。它说错误在 ProfileDetailActivity 文件的第 90 行，但我看不到 Logdetail 活动中几乎完全相同的结构如何完美地工作！！！！任何帮助将不胜感激，因为我快把头发扯掉了！

谢谢

简介详细活动

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import michelle.glucose.contentprovider.MyLogContentProvider;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.TimePickerDialog;
import android.content.ContentValues;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.text.TextUtils;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.TimePicker;
import android.widget.Toast;

   /*
    * TodoDetailActivity allows to enter a new todo item 
    * or to change an existing
    */
public class ProfileDetailActivity extends Activity  {
private EditText sms;
private EditText email ;
private EditText  name;
private EditText  DOB;
public  TextView textView1;
public  TextView  textView2 ;
private Spinner type;
private Spinner units;
private Spinner Gender;

private EditText max;
private EditText min;

  private Uri progUri;
  @Override
    protected void onCreate(Bundle bundle) {
super.onCreate(bundle);
setContentView(R.layout.pro_pref);

textView1 = (TextView) findViewById(R.id.textView1);
textView2 = (TextView) findViewById(R.id.textView2);

type = (Spinner) findViewById(R.id.type);
units = (Spinner) findViewById(R.id.units);
Gender = (Spinner) findViewById(R.id.Gender);
max = (EditText) findViewById(R.id.max);
min = (EditText) findViewById(R.id.min);
sms = (EditText) findViewById(R.id.sms);
email = (EditText) findViewById(R.id.Email);
DOB = (EditText) findViewById(R.id.dob);
name = (EditText) findViewById(R.id.name);

Button confirmButton = (Button) findViewById(R.id.Confirm);

Bundle extras = getIntent().getExtras();

// Check from the saved Instance
progUri = (bundle == null) ? null : (Uri) bundle
    .getParcelable(MyLogContentProvider.CONTENT_ITEM_TYPE);

// Or passed from the other activity
if (extras != null) {
  progUri = extras
      .getParcelable(MyLogContentProvider.CONTENT_ITEM_TYPE);

  fillData(progUri);
}

confirmButton.setOnClickListener(new View.OnClickListener() {
  public void onClick(View view) {
    if (TextUtils.isEmpty(DOB.getText().toString())) { SAYS ERROR HERE???
      makeToast();
    } else {
      setResult(RESULT_OK);
      finish();
    }
  }

   });

   }

  public void fillData(Uri uri) {
    String[] projection =              {ProTable.COLUMN_NAME,ProTable.COLUMN_DOB,
   ProTable.COLUMN_GENDER,ProTable.COLUMN_UNIT,                   ProTable.COLUMN_MIN,ProTable.COLUMN_MAX,                                         
            ProTable.COLUMN_TYPE, ProTable.COLUMN_EMAIL,ProTable.COLUMN_NUMBER,
        ProTable.COLUMN_ID };
Cursor cursor = getContentResolver().query(uri, projection, null, null,
    null);
if (cursor != null) {
  cursor.moveToFirst();
  String idstr = cursor.getString(cursor.getColumnIndexOrThrow(ProTable.COLUMN_ID));

  String u = cursor.getString(cursor
      .getColumnIndexOrThrow(ProTable.COLUMN_UNIT));

  for (int i = 0; i < units.getCount(); i++) {

    String s = (String) units.getItemAtPosition(i);
    if (s.equalsIgnoreCase(u))
      units.setSelection(i);
    }

String g = cursor.getString(cursor.getColumnIndexOrThrow(ProTable.COLUMN_GENDER));
  for (int i = 0; i < Gender.getCount(); i++) {

    String s = (String) Gender.getItemAtPosition(i);
    if (s.equalsIgnoreCase(g)) {
      Gender.setSelection(i);
    }
  }

  String t = cursor.getString(cursor.getColumnIndexOrThrow(ProTable.COLUMN_TYPE));
  for (int i = 0; i < type.getCount(); i++) {

    String s = (String) type.getItemAtPosition(i);
    if (s.equalsIgnoreCase(t)) {
      type.setSelection(i);
    }
  }  

  name.setText(cursor.getString(cursor
      .getColumnIndexOrThrow(ProTable.COLUMN_NAME)));
  DOB.setText(cursor.getString(cursor
      .getColumnIndexOrThrow(ProTable.COLUMN_DOB)));
  min.setText(cursor.getString(cursor
          .getColumnIndexOrThrow(ProTable.COLUMN_MIN)));
      max.setText(cursor.getString(cursor
          .getColumnIndexOrThrow(ProTable.COLUMN_MAX)));
      email.setText(cursor.getString(cursor
              .getColumnIndexOrThrow(ProTable.COLUMN_EMAIL)));
          sms.setText(cursor.getString(cursor
              .getColumnIndexOrThrow(ProTable.COLUMN_NUMBER)));

  // Always close the cursor
  cursor.close();}
}

   protected void onSaveInstanceState(Bundle outState) {
   super.onSaveInstanceState(outState);
   saveState();
    outState.putParcelable(MyLogContentProvider.CONTENT_ITEM_TYPE, progUri);
    }

       @Override
   protected void onPause() {
      super.onPause();
saveState();
     }

     private void saveState() {

  String t = (String) type.getSelectedItem();
  String u = (String) units.getSelectedItem();
String g = (String) Gender.getSelectedItem();
String n = name.getText().toString();
String d = DOB.getText().toString();
String mi = min.getText().toString();
String ma = max.getText().toString();
String e = email.getText().toString();
String s = sms.getText().toString();
// Only save if either summary or description
// is available

if (d.length() ==0) {
  return;
}

ContentValues values = new ContentValues();

values.put(ProTable.COLUMN_NAME, n);
values.put(ProTable.COLUMN_DOB, d);
values.put(ProTable.COLUMN_GENDER, g);
values.put(ProTable.COLUMN_UNIT, u);
values.put(ProTable.COLUMN_TYPE, t);
values.put(ProTable.COLUMN_MIN, mi);
values.put(ProTable.COLUMN_MAX, ma);
values.put(ProTable.COLUMN_EMAIL, e);
values.put(ProTable.COLUMN_NUMBER, s);
if (progUri == null) {
  // New log
  progUri = getContentResolver().insert(MyLogContentProvider.CONTENT_URI, values);
} else {
  // Update log
  getContentResolver().update(progUri, values, null, null);
}
  }

 private void makeToast() {
Toast.makeText(ProfileDetailActivity.this, "Please maintain a glucose log",
    Toast.LENGTH_LONG).show();
  } 
```

数据库内容提供者

```
 import java.util.Arrays;
 import java.util.HashSet;

   import michelle.glucose.ProTable;
  import michelle.glucose.ProfileDatabaseHelper;

  import android.content.ContentProvider;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.UriMatcher;
  import android.database.Cursor;
   import android.database.sqlite.SQLiteDatabase;
  import android.database.sqlite.SQLiteQueryBuilder;
import android.net.Uri;
import android.text.TextUtils;

public class MyProfileContentProvider extends ContentProvider {

    // database
    private ProfileDatabaseHelper database;

  // Used for the UriMacher
  private static final int PRO = 10;
  private static final int PROD = 20;

     private static final String AUTHORITY =                   
    "michelle.glucose.contentprovider.MyProfileContentProvider";

   private static final String BASE_PATH = "pros";
     public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
  + "/" + BASE_PATH);

  public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
  + "/pros";
 public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
  + "/pro";

  private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
 static {
  sURIMatcher.addURI(AUTHORITY, BASE_PATH, PRO);
   sURIMatcher.addURI(AUTHORITY, BASE_PATH + "/#", PROD);
  }

 @Override
public boolean onCreate() {
   database = new ProfileDatabaseHelper(getContext());
return false;
   }

  @Override
  public Cursor query(Uri uri, String[] projection, String selection,
  String[] selectionArgs, String sortOrder) {

// Uisng SQLiteQueryBuilder instead of query() method
SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

// Check if the caller has requested a column which does not exists
checkColumns(projection);

// Set the table
queryBuilder.setTables(ProTable.TABLE_PRO);

int uriType = sURIMatcher.match(uri);
switch (uriType) {
case PRO:
  break;
case PROD:
  // Adding the ID to the original query
  queryBuilder.appendWhere(ProTable.COLUMN_ID + "="
      + uri.getLastPathSegment());
  break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
}

SQLiteDatabase db = database.getWritableDatabase();
Cursor cursor = queryBuilder.query(db, projection, selection,
    selectionArgs, null, null, sortOrder);
// Make sure that potential listeners are getting notified
cursor.setNotificationUri(getContext().getContentResolver(), uri);

return cursor;
   }

   @Override
    public String getType(Uri uri) {
    return null;
     }

    @Override
  public Uri insert(Uri uri, ContentValues values) {
  int uriType = sURIMatcher.match(uri);
  SQLiteDatabase sqlDB = database.getWritableDatabase();
   int rowsDeleted = 0;
   long id = 0;
  switch (uriType) {
   case PRO:
    id = sqlDB.insert(ProTable.TABLE_PRO, null, values);
    break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
   }
getContext().getContentResolver().notifyChange(uri, null);
return Uri.parse(BASE_PATH + "/" + id);
  }

    @Override
 public int delete(Uri uri, String selection, String[] selectionArgs) {
int uriType = sURIMatcher.match(uri);
SQLiteDatabase sqlDB = database.getWritableDatabase();
int rowsDeleted = 0;
switch (uriType) {
case PRO:
  rowsDeleted = sqlDB.delete(ProTable.TABLE_PRO, selection,
      selectionArgs);
  break;
case PROD:
  String id = uri.getLastPathSegment();
  if (TextUtils.isEmpty(selection)) {
    rowsDeleted = sqlDB.delete(ProTable.TABLE_PRO,
        ProTable.COLUMN_ID + "=" + id, 
        null);
  } else {
    rowsDeleted = sqlDB.delete(ProTable.TABLE_PRO,
        ProTable.COLUMN_ID + "=" + id 
        + " and " + selection,
        selectionArgs);
  }
  break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
}
getContext().getContentResolver().notifyChange(uri, null);
return rowsDeleted;
 }

  @Override
  public int update(Uri uri, ContentValues values, String selection,
  String[] selectionArgs) {

int uriType = sURIMatcher.match(uri);
SQLiteDatabase sqlDB = database.getWritableDatabase();
int rowsUpdated = 0;
switch (uriType) {
case PRO:
  rowsUpdated = sqlDB.update(ProTable.TABLE_PRO, 
      values, 
      selection,
      selectionArgs);
  break;
case PROD:
  String id = uri.getLastPathSegment();
  if (TextUtils.isEmpty(selection)) {
    rowsUpdated = sqlDB.update(ProTable.TABLE_PRO, 
        values,
        ProTable.COLUMN_ID + "=" + id, 
        null);
  } else {
    rowsUpdated = sqlDB.update(ProTable.TABLE_PRO, 
        values,
        ProTable.COLUMN_ID + "=" + id 
        + " and " 
        + selection,
        selectionArgs);
  }
  break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
}
getContext().getContentResolver().notifyChange(uri, null);
return rowsUpdated;
  }

     private void checkColumns(String[] projection) {
       String[] available = {ProTable.COLUMN_NAME,ProTable.COLUMN_DOB,
       ProTable.COLUMN_GENDER,ProTable.COLUMN_TYPE,ProTable.COLUMN_MIN,                          

        ProTable.COLUMN_MAX,ProTable.COLUMN_UNIT,

      ProTable.COLUMN_NUMBER,
                    ProTable.COLUMN_EMAIL,
    ProTable.COLUMN_ID };
     if (projection != null) {
    HashSet<String> requestedColumns = new HashSet<String>(Arrays.asList(projection));
    HashSet<String> availableColumns = new HashSet<String>(Arrays.asList(available));
    // Check if all columns which are requested are available
       if (!availableColumns.containsAll(requestedColumns)) {
    throw new IllegalArgumentException("Unknown columns in projection");
       }
    }
     }

    } 
```

配置文件表

```
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

 public class ProTable {
 private static final String DATABASE_NAME = "protable.db";                               
  private static final int DATABASE_VERSION = 1;
private ProfileDatabaseHelper psqLiteHelper;
private SQLiteDatabase pdb; 
private Context context;
   // Database table
 public static final String TABLE_PRO = "pro";
 public static final String COLUMN_ID = "_id";
  public static final String COLUMN_NAME = "name";
  public static final String COLUMN_DOB = "dob";
 public static final String COLUMN_GENDER = "gender";
 public static final String COLUMN_TYPE = "type";
 public static final String COLUMN_GLU = "glu";
 public static final String COLUMN_MIN = "min";
 public static final String COLUMN_MAX = "max";
 public static final String COLUMN_EMAIL = "email";
 public static final String COLUMN_UNIT = "unit";
 public static final String COLUMN_NUMBER = "number";

 // Database creation SQL statement
  private static final

   String DATABASE_CREATE = "create table " 
  + TABLE_PRO
  + "(" 
  + COLUMN_ID + " integer primary key autoincrement, " 
  + COLUMN_NAME + " text not null, " 
  + COLUMN_DOB + " text not null," 
  + COLUMN_GENDER + " text not null,"
  + COLUMN_TYPE + " text not null,"
  + COLUMN_MIN + " text not null,"
  + COLUMN_MAX + " text not null,"
  + "COLUMN_UNIT" + "text not null,"
   + COLUMN_EMAIL + " text not null,"
  + COLUMN_NUMBER + " text not null"
   + ");";

   public ProTable(Context ctx) {
    this.context = ctx;
    psqLiteHelper = new ProfileDatabaseHelper(context);
}

public ProTable openToRead() throws android.database.SQLException {
        psqLiteHelper = new ProfileDatabaseHelper(context, DATABASE_NAME, null,
                DATABASE_VERSION);
        pdb = psqLiteHelper.getReadableDatabase();
        return this; }

  public Cursor getEmail (String email) throws android.database.SQLException{
        Cursor mCursor 
      = pdb.query(TABLE_PRO, new String[] {COLUMN_ID,   COLUMN_EMAIL },                    

      COLUMN_EMAIL + "=" + email ,  null, null, null, null, null);
  if (mCursor != null ){
      mCursor.moveToFirst();
  }
   return mCursor;

  }

  public String getSMS () throws android.database.SQLException{
      Cursor mCursor 
      = pdb.query(TABLE_PRO, new String[] {COLUMN_ID,   COLUMN_NUMBER }, 

      COLUMN_NUMBER + "=" + COLUMN_NUMBER,  null, null, null, null, null);
  if (mCursor != null ){
      mCursor.moveToFirst();

  }String number =mCursor.getString(mCursor.getColumnIndexOrThrow(COLUMN_NUMBER));

 return number;

  } 

 public static void onCreate(SQLiteDatabase database) {
   database.execSQL(DATABASE_CREATE);
  }

  public static void onUpgrade(SQLiteDatabase database, int oldVersion,
  int newVersion) {
   Log.w(ProTable.class.getName(), "Upgrading database from version "
    + oldVersion + " to " + newVersion
    + ", which will destroy all old data");
   database.execSQL("DROP TABLE IF EXISTS " + TABLE_PRO);
    onCreate(database);
   }
   } 
```

数据库助手类

```
 import android.content.Context;
   import android.database.sqlite.SQLiteDatabase;
   import android.database.sqlite.SQLiteDatabase.CursorFactory;
   import android.database.sqlite.SQLiteOpenHelper;

   public class ProfileDatabaseHelper extends SQLiteOpenHelper {

     private static final String DATABASE_NAME = "protable.db";
    private static final int DATABASE_VERSION = 1;

   public ProfileDatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
      }

    public ProfileDatabaseHelper(Context context, String databaseName,
      CursorFactory factory, int databaseVersion) {
  super(context, databaseName , factory, databaseVersion);
      }

     public ProfileDatabaseHelper(Context context, String databaseName,
    Object factory, int databaseVersion) {
super(context, DATABASE_NAME, null,  DATABASE_VERSION);
      }

     // Method is called during creation of the database
      @Override
     public void onCreate(SQLiteDatabase database) {
       ProTable.onCreate(database);
      }

    // Method is called during an upgrade of the database,
    // e.g. if you increase the database version
     @Override
   public void onUpgrade(SQLiteDatabase database, int oldVersion,
     int newVersion) {
    ProTable.onUpgrade(database, oldVersion, newVersion);
    }
   } 
```

LOGCAT

```
 E/AndroidRuntime(3797):FATAL EXCEPTION: main
 E/AndroidRuntime(3797): java.lang.NullPointerException
  E/AndroidRuntime(3797):at                       michelle.glucose.ProfileDetailActivity$1.onClick(ProfileDetailActivity.java:90)
        E/AndroidRuntime(3797):at android.view.View.performClick(View.java:4204)
 E/AndroidRuntime(3797):at android.view.View$PerformClick.run(View.java:17355)
 E/AndroidRuntime(3797):at android.os.Handler.handleCallback(Handler.java:725)
 E/AndroidRuntime(3797): at android.os.Handler.dispatchMessage(Handler.java:92)
 E/AndroidRuntime(3797): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(3797): at android.app.ActivityThread.main(ActivityThread.java:5041)
 E/AndroidRuntime(3797): at java.lang.reflect.Method.invokeNative(Native Method)
 E/AndroidRuntime(3797): at java.lang.reflect.Method.invoke(Method.java:511)
 E/AndroidRuntime(3797): at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(3797): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(3797): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:22:15.067

老实说，nullpointerexception 是更容易解决的错误之一，而且它几乎总是您自己代码中的错误。转到引发 nullpointerexception 的代码行并考虑可能导致这种情况的原因。我不知道您的源代码中的第 90 行是什么，但例如，如果它是以下代码行：

```
DOB.getText().toString() 
```

那么要么 DOB 为空，要么 DOB.getText() 为空。如果您无法确定哪个，则打印出该代码行之前的值。然后考虑什么可能导致空指针，或者通过代码回溯到 DOB 被（未）初始化或它的“文本”属性被（未）设置的位置。

# php - deleteAction：为什么要删除与此博客关联的类别？

> ID：16181229
> 
> 赞同：0
> 
> 时间：2013-04-24T00:11:01.213
> 
> 标签：php, mysql, symfony, doctrine-orm

我正在使用 Symfony2 处理这个界面，这里有博客和与之关联的类别，有时我们想删除不再有效的博客，所以我只想删除博客，我将此功能添加到控制器中，它确实删除了博客，但同时它删除了所有相关的类别：

```
 public function deleteAction(Request $request, $id)
        {
            $form = $this->createDeleteForm($id);
            $form->bind($request);

            if ($form->isValid()) {
                $em = $this->getDoctrine()->getManager();
                $blawg = $em->getRepository('BlogBundle:Blog')->find($id);

                if (!$blog) {
                    throw $this->createNotFoundException('Unable to find Blog entity.');
                }

                $em->remove($blog);
                $em->flush();
            }

            return $this->redirect($this->generateUrl('blogs_inactive'));
        } 
```

我该怎么做才能删除博客信息？在数据库中，我有以下表格（Synfony2 上的实体）：博客、Feed、类别、博客文章。

博客实体：

```
/**
 * @var Category[]
 *
 * @ORM\ManyToMany(targetEntity="Category", cascade={"all"})
 * @ORM\JoinTable(name="blog_categories",
 *      joinColumns={@ORM\JoinColumn(name="blog_id", referencedColumnName="blog_id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="category_id", referencedColumnName="category_id")}
 * )
 */
private $categories;

/**
 * @var Feed
 * @ORM\OneToOne(targetEntity="Feed", mappedBy="blog", cascade={"all"})
 */
private $feed;

/**
 * @var ArrayCollection $posts
 * @ORM\OneToMany(targetEntity="BlogPost", mappedBy="blog")
 */
private $posts; 
```

饲料实体：

```
/**
 * @var Blawg
 *
 * @ORM\ManyToOne(targetEntity="Blog")
 * @ORM\JoinColumn(name="blog_id", referencedColumnName="blog_id",
 * onDelete="CASCADE")
 */
private $blawg; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:51:23.943

That seems to be a drop cascade.

Take a look at your entities. You probably have either a `cascade={"remove"}` at the relationship definition or a `ON DELETE` trigger in your database. This answer might help you too:

[On delete cascade with doctrine2](https://stackoverflow.com/questions/6328535/on-delete-cascade-with-doctrine2/6334710#6334710)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:03:13.180

正如[Renan Ivo](https://stackoverflow.com/users/345290/renan-ivo)所说，您可能会遇到以下情况之一：

1）`cascade={"remove"}`在将删除类别记录的外部键（博客端）上也已定义2）在数据库级别
具有触发器。`ON DELETE`请也看看你的 SQL Schema

# three.js - Three.js 中 collada 对象的 x,y,z 大小

> ID：16181230
> 
> 赞同：1
> 
> 时间：2013-04-24T00:11:07.210
> 
> 标签：three.js, collada

假设我有一个立方体作为 collada 对象（.dae 格式）。我需要知道这个立方体的大小，然后再计算或计算，我怎样才能得到它的 x、y、z 大小（例如高度、宽度）？可能有类似 dae.size 的东西吗？或者我可以使用boundingBox（来自[http://threejs.org/docs/58/#Reference/Core/Geometry](http://threejs.org/docs/58/#Reference/Core/Geometry)）？

```
var geom = new THREE.Geometry();
geom.boundingBox() 
```

但是，我还不太明白如何在 Three.js 中使用这个边界框。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:21:49.390

Collada对象边界框的计算已经在这里讨论过： [https ://github.com/mrdoob/three.js/issues/1843](https://github.com/mrdoob/three.js/issues/1843)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-08T11:03:14.103

如果你想得到 x,y,z 大小，你可以简单地使用这个：

```
var box = new THREE.Box3().setFromObject( colladaModel );
console.log( box.min, box.max, box.getSize() ); 
```

# java - 使用 Java.io.* 读取文件

> ID：16181234
> 
> 赞同：0
> 
> 时间：2013-04-24T00:11:24.820
> 
> 标签：java, class

我必须在类中编写一个方法来读取文件。我需要在类中导入 java.io.*，还是必须在调用该方法的 main 中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:14:52.680

声明位于进行引用的翻译单元的`import`顶部。严格来说，您不必导入任何东西：导入是一种方便，可以让您避免输入正在使用的类的全名（即`BufferedReader`，而不是`java.io.BufferedReader`）。

调用者不必在其使用的类中导入与方法*实现相关的任何内容。*这是封装的优点之一：调用者需要知道它调用了什么，但它与它使用的类的实现细节完全隔离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:17:27.003

简单的例子：

```
import java.io.*;
class MyClass{
    public static void main(String[] args) throws java.io.IOException {
        FileReader f = new FileReader ("myfile.txt");
    }
} 
```

# google-analytics - 如何为多个内容实验选择变体？

> ID：16181239
> 
> 赞同：10
> 
> 时间：2013-04-24T00:11:44.333
> 
> 标签：google-analytics, content-experiments

我正在为 Google Analytics Content Experiments 使用 Javascript API，您似乎有两种选择：

1.  一次运行一项实验并让 Google 分配您可以使用的变体`chooseVariation()`，或者
2.  一次运行多个实验并使用自己分配变体`setChosenVariation()`

(1) 让谷歌控制分配给每个变体的用户数量，这是我需要的，但我有几个实验。这似乎很基本。我错过了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-13T14:19:07.097

我不认为你缺少任何东西。[我的理解是，GA Experiments API 允许您使用选择变化命令](https://developers.google.com/analytics/devguides/collection/gajs/experiments#cxjs-choose)将访问者分配给单个 A/B/N 测试的任何版本：

```
cxApi.chooseVariation(); 
```

但是，只有在页面加载 api.js 时指定了实验 ID，才能使用此功能。

如果您想做的是同时**在一个页面上运行多个 A/B 测试**，这实际上是多变量测试，不幸的是，这在 GA 内容实验中“开箱即用”不可用（它以前可通过 Google 网站优化器使用）。您仍然可以使用自己的存储桶“伪造”它，代码如下：

```
<!-- 1\. Load the Content Experiments JavaScript Client -->
<script src="//www.google-analytics.com/cx/api.js"></script>

<!-- 2\. See if the visitor has seen an experiment already -->
<script>
// loop through all active experiments server-side. 
cxApi.getChosenVariation(
 $experimentId
 );

<!-- 3\. Bucket the visitor if he isn't bucketed already -->
// loop through your live experiments 
  cxApi.setChosenVariation(
    $chosenVariation,             // The index of the variation shown to the visitor
    $experimentId                 // The id of the experiment the user has been exposed to
  );
</script> 
```

您需要决定是希望访问者一次只查看一个实验还是同时输入多个实验。

第一个选项可能更可靠，但意味着您必须将访问者分成很多桶，这意味着您的测试需要很长时间才能返回结果。

如果您使用第二个选项，则需要小心：如果您的实验不是独立的，您将无法信任来自 Google Analytics 的测试结果，因为内容实验中使用的统计测试假定独立。即使您的实验是独立的，您也需要在所有变体组合中进行平均分配。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T00:36:00.677

我使用 node.js 脚本解决了这个问题。

开箱即用的 Google 内容实验让您可以选择：

*   加载仅针对 1 个实验修补的 cxApi
*   加载 cxApi plain，并失去调用 chooseVariation() 函数的能力，使您实现自己的选择算法（这很遗憾，因为谷歌的多臂老虎机想法非常聪明）。

因此，我对如何为 1 个实验修补 google cxApi js 进行了一些逆向工程，结果证明它只是将实验信息（变化权重）捆绑在文件中间，我尝试手动触摸捆绑包添加多个实验，并且现在我可以`cxApi.chooseVariation(experimentId)`为每个实验打电话了，而且效果很好！

权重每 12 小时更改一次，因此我将其自动化，我创建了一个 node.js 小应用程序，该应用程序将从谷歌下载 cxApi，然后为您指定的每个实验重复下载它，并为您的所有实验修补一个 cxApi。

瞧！，在任何页面上进行多次实验。

这是回购：[https](https://github.com/benjamine/mutagen) ://github.com/benjamine/mutagen ，随意分叉

这个 node.js 应用程序将为多个实验修补 cxApi，并且还将打包（和缩小）您的变体

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-09T09:35:55.577

当同时运行多个实验时，问题是如果您的一个实验的访问者与您网站上运行的另一个实验的元素进行交互，那么很难考虑这些交互影响。这会扭曲您的数据并导致一些错误的结论。如果您对如何分析多个并发实验绝对有信心，那么安全并一次运行一个实验是可以的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-03T13:34:51.680

This solution works very well for me. The benefits are:

*   no node.js required
*   no changes to site needed - site remains fully cacheable
*   Google Multi-Armed-Bandit approach used, no patch
*   easily maintainable

**Javascript Module providing all functionality for executing multiple Google Experiments:**

```
var runExperiment = (function(jQ) {

    var apiUrl = '/ga-experiments-api.php?preview=true&experimentId=',
        experimentId,
        variations;

    var chooseAndApplyNewVariation = function() {
        if (typeof jQ !== 'undefined') {
          jQ.ajax({
              type: 'get',
              url: apiUrl + experimentId,
              success: function(data, status){
                  var choosenVariation = data.choosenVariation;

                  if (typeof choosenVariation !== 'undefined' && choosenVariation >= 0) {
                      cxApi.setChosenVariation(choosenVariation, experimentId);
                      applyVariation(choosenVariation);
                  }
              }
          });
        }  
    };

    var applyVariation = function(chosenVariation) {
        var variationFunction = (typeof variations[chosenVariation] === 'function') ? variations[chosenVariation] : false;

        if (variationFunction) {

            variationFunction.apply();
            sentGaEvent();
            console.log(experimentId, chosenVariation);
        }
    };

    var sentGaEvent = function() {
        if (typeof ga !== 'undefined') {
            ga('send', 'event', 'experiment', 'view');
        }
    };

    return function(experiment) {
        experimentId = experiment.id;
        variations = experiment.variations;

        if (typeof cxApi !== 'undefined') {

            var chosenVariation = cxApi.getChosenVariation(experimentId);

            if (chosenVariation >= 0) {

                applyVariation(chosenVariation);

            } else {

                chooseAndApplyNewVariation();
            }
        }
    };
})(jQuery); 
```

**Javascript Snippet for running single experiment - can be integrated multiple times on page:**

```
(function(jQ) {
    var experiment = {
        'id': 'RHwa-te2T_WnsuZ_L_VQBw',
        'variations': [
            function() {},
            function() {
                jQ('#nav #menu-item-2000927 a').text('Shop + Abo');
            }]
    };

    runExperiment(experiment);
}(jQuery)); 
```

**PHP (API) for generating new variations through Google's API, I used this class:**

[https://github.com/thomasbachem/php-gacx](https://github.com/thomasbachem/php-gacx)

```
<?php

use UnitedPrototype\GoogleAnalytics;

require_once dirname(__FILE__) . '/libs/googleAnalytics/Experiment.php';

$experimentId = (!empty($_GET['experimentId'])) ? $_GET['experimentId'] : null;

$returnData = array(
    'experimentId' => $experimentId,
);

try {
    $experiment = new GoogleAnalytics\Experiment($experimentId);

    $variation = $experiment->chooseNewVariation();

    if (is_integer($variation)) {

        $returnData['success'] = true;
        $returnData['choosenVariation'] = $variation;
    }

} catch (Exception $exception) {

    $returnData['success'] = false;
    $returnData['error'] = $exception;
}

header('Content-Type: application/json');

echo json_encode($returnData); 
```

# html - 设置 `nth-from-last-child` 颜色

> ID：16181243
> 
> 赞同：1
> 
> 时间：2013-04-24T00:12:07.890
> 
> 标签：html, css, css-selectors

是否有一个 CSS 选择器可以选择`nth-child`, 但从最后一个元素开始计数？

我想将第二个到最后一个元素的颜色设置为红色，但`<p>`元素的数量是可变的。

例子：

```
<div>
  <p>Hi</p>
  <p>Hi</p>
  <p>Hi</p>
  <p>Hi</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:13:32.073

那将是[`p:nth-last-child(2)`](http://www.w3.org/TR/selectors/#nth-last-child-pseudo)，而不是`p:nth-from-last-child(2)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:14:25.960

它被称为[`nth-last-child(2)`](https://developer.mozilla.org/en-US/docs/CSS/%3anth-last-child)。它与 相同`nth-child`，但它从项目列表的底部而不是顶部开始。

来自 MDN：

> :nth-last-child CSS 伪类匹配文档树中在其后有一个+b-1 个兄弟元素的元素，对于给定的 n 正值或零值，并且具有父元素

[小提琴](http://jsfiddle.net/K5YFJ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:15:29.160

尝试：

```
div > p:nth-last-child(2) {color: red} 
```

它从 last 开始倒数`p`，因此`div > p:nth-last-child(3)`设置倒数第三个`p`标签的颜色。

# java - 将图像目录添加到android项目

> ID：16181245
> 
> 赞同：0
> 
> 时间：2013-04-24T00:12:19.430
> 
> 标签：java, android, image, directory, ocr

我正在开发一个 OCR 应用程序，我需要一个包含训练图像的目录供 OCR 训练。我如何将这些图像添加到项目中？（我对 android 比较陌生）我知道图像有不同的可绘制文件夹，但我想我想要一个与所有这些分开的文件夹。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:52:45.000

把它们放在`assets/`文件夹里。

如果你把它们放在那里，Android 不会尝试缩放它们（或对它们做任何其他事情）。

如果我们正在谈论图像的演出，那么将它们手动放在您的 SD 卡上，并让您的应用程序在需要时检索它们。

# android - 使用 TextView 和 SetText 打印表格

> ID：16181253
> 
> 赞同：0
> 
> 时间：2013-04-24T00:12:50.657
> 
> 标签：android, textview, settext

我正在尝试使用 TextView 和 setText 打印表格，但无法正确打印表格。它只打印出一行。据我了解， setText 会覆盖上一行吗？我怎样才能解决这个问题，以便我的 for 循环打印出每一行而不是仅仅覆盖当前行？

```
 ScrollView sv = new ScrollView(this);
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    sv.addView(ll);

    TextView tv = new TextView(this);
    tv.setText("Character \t Correct \t Incorrect \t Percentage\n");
    ll.addView(tv);

    for(int counter = 0; counter<scores1.length;counter++){
        tv.setText(level1[counter] + "\t " + correct1[counter] + "\t " + incorrect1[counter] + "\t " + percentage1[counter] + "\n");
    }

    this.setContentView(sv); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:19:23.640

对于每一列，您需要`setText()`在该实例下实例化一个新的 TextView。

此外，也许最好在 LinearLayout中使用[TableLayout 。](http://developer.android.com/reference/android/widget/TableLayout.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:29:23.237

您应该考虑使用 a `ListView`，请参阅

[http://developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

Android页面上有一个示例`ListView`，您也可以查看：

[http://www.vogella.com/articles/AndroidListView/article.html#listview_listviewexample](http://www.vogella.com/articles/AndroidListView/article.html#listview_listviewexample)

`ListView`负责`TextView`为您创建 s 并重新使用它们以节省内存并提供适配器以使用来自数据库和其他来源的数据。

您的代码的快速破解将是：

```
for(int counter = 0; counter<scores1.length;counter++){
    tv = new TextView(this);
    ll.addView(tv);
    tv.setText(level1[counter] + "\t " + correct1[counter] + "\t " + incorrect1[counter] + "\t " + percentage1[counter] + "\n");
} 
```

# perl - perl 脚本要下载，而不是执行

> ID：16181254
> 
> 赞同：2
> 
> 时间：2013-04-24T00:12:56.080
> 
> 标签：perl, apache

我在尝试运行 perl 脚本时遇到了一些问题。我对 perl 完全陌生，我认为这与 apache 不知道如何处理文件有关。

这是代码：

```
#!/usr/bin/perl

print "content-type: text/html \n\n";

print "Hello, Perl!"; 
```

超级简单。从命令行运行它完美无缺

```
$/usr/bin/perl /var/www/html/test.pl 
```

当我尝试通过浏览器运行它时，它想要下载文件。有任何想法吗？

# ios - 位置管理器随机停止更新

> ID：16181256
> 
> 赞同：0
> 
> 时间：2013-04-24T00:13:13.253
> 
> 标签：ios, objective-c, core-location, cllocationmanager, locationmanager

我正在编写一个使用**CoreLocation**的应用程序，由于某种原因，位置管理器会随机停止更新位置。

我已经确保对该`startUpdating`方法的所有调用都在主线程上（不确定它是否重要）。

我已经记录了所有的委托方法，包括`didAuthorizationStatusChange`, `didPauseUpdatingLocation`，`didFailWithError`并且发现没有被调用。

它似乎在 4 次更新后停止；为什么会这样？

**更新**：`startUpdating`从`applicationDidFinish`作品中调用，但稍后在代码中对该方法的调用再次停止工作

```
-(CLLocationManager*) locationManager
{
if(locationManager == nil)
{
        locationManager = [[CLLocationManager alloc] init];
        locationManager.delegate = self;
        locationManager.desiredAccuracy = kCLLocationAccuracyBest;
        locationManager.distanceFilter = kCLDistanceFilterNone;
}

return locationManager;
}

[self.locationManager startMonitoringForRegion:self.venueRegion]; 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-24T03:22:14.277

几件事。

您编写了一个自定义的单例吸气剂，除了它不是静态的（应该是吸气剂前面的 + 号），这似乎是关闭的。获取位置管理器应如下所示：

CLLocationManager *myManager = [MyLocationManager sharedManager];

接下来，如果那是一个“Getter”方法，它应该是：

-(CLLocationManager*)getLocationManager；

否则，当你点击 self.locationManager 时，你不会通过你的 getter 并触发你试图在这里点击的必要的 getter 操作。

# c# - 使用 Silverlight/ c# wpf: NullReferenceException 错误遍历 Datagrid 行以获取复选框列的值

> ID：16181258
> 
> 赞同：0
> 
> 时间：2013-04-24T00:13:23.010
> 
> 标签：c#, silverlight, checkbox, datagridview, nullreferenceexception

我在 Silverlight xaml 中有一个 DataGrid，其中包含三个名为 Active(checkbox)、name(Textcolumn)、ID (Textcolumn) 的列和数据网格外部的 Save 按钮。当我尝试循环/迭代数据网格行以使用 GetCellContent 获取复选框的值时，出现以下错误。GetCellContent 对前 20 行工作正常，但之后会出现 NullReferenceException 错误。请帮忙。

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

XAML

```
<StackPanel Orientation="Horizontal">
                    <Button Content ="Save" Click="SavePopUp_Click"/>
                    <TextBlock x:Name="GridHeader"  Style="{StaticResource GridHeaderStyle}" Margin="0,0,0,0" Width="445" Foreground="White" HorizontalAlignment="Right" TextAlignment="Center" Visibility="Collapsed"/>
</StackPanel>

<sdk:DataGrid  x:Name="dgloss">
    <sdk:DataGrid.RowDetailsTemplate>
                <DataTemplate>
                      <Border>
                           <Border Margin="2" Padding="2" BorderBrush="#AAAAAA" BorderThickness="2" CornerRadius="4">
                       </Border>
                     </Border>
                </DataTemplate>
        </sdk:DataGrid.RowDetailsTemplate>

        <sdk:DataGrid.Columns>

         <!--<sdk:DataGridCheckBoxColumn  IsReadOnly="False" Header="Active" Binding="{Binding Active, Mode=TwoWay}" CanUserResize="False" />-->
                        <sdk:DataGridTemplateColumn Header ="Active">
                            <sdk:DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox x:Name="chkcode" Tag="{Binding Active}" Checked="HandleCheck" Unchecked="HandleUnchecked" IsThreeState="False" HorizontalAlignment ="Center" VerticalAlignment="Center" IsChecked="{Binding Active, Mode=TwoWay}" />
                                </DataTemplate>
                            </sdk:DataGridTemplateColumn.CellTemplate>
                            </sdk:DataGridTemplateColumn>

                            <sdk:DataGridTextColumn IsReadOnly="True" SortMemberPath="Name" Header="Name" Binding="{Binding Name, Mode=TwoWay}" Foreground="White"/>
                        <sdk:DataGridTextColumn x:Name="ID" IsReadOnly="True" SortMemberPath="ID" Header="ID" Binding="{Binding ID, Mode=TwoWay}" Foreground="White" Visibility="Visible"/>
         </sdk:DataGrid.Columns>

</sdk:DataGrid> 
```

**保存按钮点击事件**

```
 private void SavePopUp_Click(object sender, RoutedEventArgs e)
            {
               IEnumerable list = dgloss.ItemsSource as IEnumerable;
               List<string> lstFile = new List<string>();

               foreach (var row in list)
               {  
                   bool IsChecked = (bool)((CheckBox)dgloss.Columns[0].GetCellContent(row)).IsChecked;

                   if (IsChecked)
                   {
                      string id = ((TextBlock)grdLossCodelist.Columns[2].GetCellContent(row)).Text;
                       lstFile.Add(id);

}
}    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T20:22:21.120

我遇到了同样的问题，并确定非文本单元格（复选框、按钮等）只有在呈现时才会返回它们的值，否则它们会返回 null。此外，仅实际呈现控件上显示的 DataGrid 行。因此，在您的情况下，我敢打赌您的 DataGrid 的大小使其一次显示 20 行，因此第 21 行返回 null。

我最终要做的是遍历 ItemSource 而不是 DataGrid 本身。最终，无论如何这是一个更好的实现，以免通过将数据访问与 UI 混合来违反 MVVM。

但是，如果您真的想要/需要直接使用 DataGrid 执行此操作，您可以强制单元格在代码中呈现：

```
 foreach (var column in dataGrid.Columns)
            {
                DataGridTemplateColumn dgtColumn = null;
                DataGridBoundColumn dgbColumn = null;

                dgbColumn = column as DataGridBoundColumn;

                if (dgbColumn == null)
                {
                    dgtColumn = column as DataGridTemplateColumn;
                    CheckBox checkbox = (CheckBox)dgtColumn.CellTemplate.LoadContent();
                }
             } 
```

# django - Django A/B 拆分测试包（我发现没有一个是有据可查且是最新的。）

> ID：16181259
> 
> 赞同：12
> 
> 时间：2013-04-24T00:13:30.340
> 
> 标签：django, analytics, ab-testing

进行 A/B（拆分）测试有两种主要的思想流派：

*   基于 Javascript 的解决方案，例如 Optimizely、Google Analytics Content Experiments。
*   服务器端解决方案，例如 Django-AB、Splango 和 django-lean。（另外，写你自己的。）

我的理解是，基于 Javascript 的解决方案对于“哪种颜色的按钮转换效果更好”非常出色，但对于切换整个页面布局来说并不是那么好，并且对于尝试大型功能更改（例如漏斗中的页面序列）完全不可行。

这使我转向服务器端解决方案。我并不热衷于编写自己的代码，只有在没有其他选择的情况下才会这样做。我试图通过改进我网站的核心功能来增加价值，而不是通过创建更好的拆分测试框架。

我发现的用于拆分测试的 Django 应用程序是各种未维护、未记录、记录不正确以及与 Django 1.5 不兼容的混合体。这让我感到惊讶，因为 Django 和 Python 社区似乎非常关注良好的文档。我也很惊讶我尝试过的所有测试框架都没有与 Django 1.5 兼容——在 Django/Python 世界中，测试不像在 Rails 中那样作为核心哲学的一部分吗？

这是我发现的：

*   Splango [https://github.com/shimon/Splango](https://github.com/shimon/Splango) -- 与 Django 1.5 不兼容（尽管我发现的大多数兼容性错误都很容易修复）。自 2010 年 10 月以来基本未受影响，除了 2012 年 8 月的修复，该修复声称确保模板包含在安装中。由于通过 PyPI 安装 Splango 时模板不会包含在安装中，因此修复不起作用或未提交给 PyPI。文档在很大程度上是准确的，但并未完全涵盖如何设置测试和获取报告。它告诉您如何配置模板以收集数据，但管理界面中似乎需要额外的步骤，这些步骤完全没有记录，我不确定我是否正确完成了这些步骤。

*   Django 精益。[https://bitbucket.org/akoha/django-lean](https://github.com/anandhenry2002/django-lean)的原文自 2010 年 7 月以来没有更新。在[https://github.com/anandhenry2002/django-lean](https://bitbucket.org/akoha/django-lean)有一个明显的“祝福”叉子，它没有改变自 2012 年 5 月以来，它是从原版复制过来的。原始文档的错误导致无法遵循示例。（尽管您可能会像我一样糊涂。）新版本的文档存在格式问题，难以在 github 上阅读。（这似乎是因为它是旧项目中未更改的文档，并且 BitBucket 语法在 Github 上不起作用。） django-lean Google Group 自 2012 年 7 月以来没有收到任何消息。

*   django-mini-lean [https://github.com/DanAncona/django-mini-lean](https://github.com/DanAncona/django-mini-lean) -- 最近在 2013 年 2 月更新，但未记录。

*   Leaner - [https://bitbucket.org/brianjinwright/leaner](https://bitbucket.org/brianjinwright/leaner) - 最后更新于 2012 年 7 月，没有文档。

*   Django-AB -- 最后更新于 2009 年 5 月。不是一个包，不能通过 PIP 或 PyPI 安装。将结帐放在我的 django app 文件夹中（并将文件夹重命名为 ab）并按照安装说明进行操作后，加载模板加载器时出错，我没有进一步追踪。

到目前为止，Splango 似乎是赢家，因为我实际上已经能够让它或多或少地工作（通过手动安装模板，然后编辑它们以修复 Django 1.5 的不兼容性）。

谁能指出我错过的任何事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T07:50:16.390

你错过了这个应用程序：[https](https://github.com/mixcloud/django-experiments) ://github.com/mixcloud/django-experiments + [https://github.com/disqus/gargoyle/](https://github.com/disqus/gargoyle/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-04T22:45:21.550

然后是华夫饼：[http ://waffle.readthedocs.org/](http://waffle.readthedocs.org/)

它简单、更新、维护，但功能不是很丰富，它没有集成任何分析/报告内容。但话又说回来，谷歌分析或混合面板类型的服务更适合这个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-19T08:43:39.347

我首先查看了 Django-AB，这几乎是我想要的，但我也无法让它工作。在查看了 django-experiments 并决定我还不想乱用 redis 之后，我决定自己动手。我已经尝试将它很好地打包并使其易于初学者使用。这是超级基本的。

[https://github.com/crobertsbmw/RobertsAB](https://github.com/crobertsbmw/RobertsAB)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-14T19:31:54.693

您可以使用 Google Analytics Experiments 替换完全不同的页面布局（他们的默认实验设置会将用户重定向到您拥有的每个变体的不同 URL），尽管通常更容易解释为什么如果您测试较小的东西会更成功彼此。

您是对的，使用 Google Analytics（分析）相互测试不同的渠道和用户流需要**大量**手动设置；尽管理论上您可以通过更换不同的链接并使用 UTM 活动跟踪您的用户来做到这一点。

对于同一页面中较小的 A/B 测试，我最终使用 Google Analytics Experiments 并编写了一个自定义 Django CMS 插件，用于向模板添加一些变体选项，该模板查询 Google Analytics API 并使用 Javascript 显示正确的变体。

# php - 注册用户表单 MySQL 语法错误

> ID：16181261
> 
> 赞同：-1
> 
> 时间：2013-04-24T00:13:31.927
> 
> 标签：php, html, mysql, forms

当我提交表单以在我的网站上注册新用户时，它会提交，但是它不会提交到数据库，并且我收到一条错误消息：

> 无效查询：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '####, 800800800)' 附近使用正确的语法 整个查询：mysql_query

这是我的 MySQL 查询：

```
 $fname    =   $_POST['fnamein'];
    $lname    =   $_POST['lnamein'];
    $email    =   $_POST['emailin'];
    $phone    =   $_POST['phonein'];
    $password =   sha1($_POST['passwordin']);

    $query='INSERT INTO directoryi (Fname, Lname, password, email, phone) 
    VALUES ('.$fname.', '.$lname.', '.$password.', '.$email.', '.$phone.')';
    $result = mysql_query($query);

    if (!$result) {
        $message  = 'Invalid query: ' . mysql_error() . "\n";
        $message .= 'Whole query: ' . mysql_query;
        die($message);
    }

    echo '<h2>Thank you for registering!</h2>';

    mysql_free_result($result);
    mysql_close($dbconnect);
    ?> 
```

还有我的 HTML 表单：

```
 <form action="register.php" method='post'>
            <input type="text" class="input-small" style="width: 46%;" name="fnamein" placeholder="First Name">
            <input type="text" class="input-small" style="width: 46%;" name="lnamein" placeholder="Last Name">
            <input type="text" class="input" style="width: 46%;" name="emailin" placeholder="Email">
            <input type="text" class="input" style="width: 46%;" name="phonein" placeholder="ex. 7171234567">
            <input type="password" class="input" style="width: 96%;" name="passwordin" placeholder="Password">
            <button type="submit" class="btn">Register</button>
        </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T00:16:14.230

要直接回答您的问题，字符串文字必须用单引号括起来，

```
$query="INSERT INTO directoryi (Fname, Lname, password, email, phone) 
        VALUES ('" .$fname. "', '" .$lname. "', '".$password."', '".$email."', '".$phone."')"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:18:17.443

根据您的字段的数据类型，我的猜测是您没有正确地在插入值周围提供单引号。尝试这个：

```
$query="INSERT INTO directoryi (Fname, Lname, password, email, phone) 
VALUES ('$fname', '$lname', '$password', '$email', '$phone')"; 
```

请注意，这假定所有字段都是字符串类型字段（如 varchar）。

您还存在严重的 SQL 注入漏洞，并且正在使用`mysql_*`已弃用的函数。我强烈建议您学习如何将 mysqli 或 PDO 与准备好的语句一起使用。

# java - 如何将音频流式传输到 OpenAL Sources？

> ID：16181264
> 
> 赞同：3
> 
> 时间：2013-04-24T00:13:40.787
> 
> 标签：java, audio, stream, lwjgl, openal

我刚刚开始使用 OpenAL。

我已成功将 WAV 文件加载到其中，并成功播放。这很容易。

现在，我需要能够将音乐流式传输到 OpenAL，而不是将整个文件加载到其中。虽然这对声音效果等有好处，但对音乐来说可能非常危险，你可能知道。

问题是，我似乎在 Google 上找不到与此相关的任何内容。虽然我找到了一些与流式传输 OGG 文件相关的示例，但我更愿意制作一个支持所有音乐文件的系统。

据我了解，OpenAL 应该为此内置函数。但我找不到它们。

所以，我的问题是，如何将音频流式传输到 OpenAL 的缓冲区，同时删除已播放的部分并导入尚未播放的部分？

如果这是一个无知的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T23:57:53.123

用于`alSourceQueueBuffers()`排队缓冲区以由源直接连续播放。在播放过程中，`alGetSourcei()`与 结合使用`AL_BUFFERS_PROCESSED`来获取已完全播放并准备好重复使用的缓冲区的数量。`alSourceUnqueueBuffers()`将为您从队列中弹出这些缓冲区，因此您可以用新数据填充它们并再次将它们排队。

基本上你会在一个线程中循环：睡眠一小段时间，测试新的可用缓冲区，用数据填充它们，将它们排队并再次进入睡眠状态。

SFML 在其[SoundStream 类](https://github.com/LaurentGomila/SFML/blob/master/src/SFML/Audio/SoundStream.cpp)(C++) 中实现了这一点，如果您愿意，可以将其作为参考。

# ios - 不移动单元格的uitableview拖放

> ID：16181265
> 
> 赞同：0
> 
> 时间：2013-04-24T00:13:45.037
> 
> 标签：ios, uitableview, drag-and-drop

我想利用 tableview 单元格的拖放重新排序，但我有一个问题：

我想保持我的第一排！

这是 canMoveRowAtIndexPath 委托函数：

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row==0) {
        return NO;
    }
    return YES;
} 
```

如果我这样做，第一行无法拖动，但您仍然可以在其上拖动另一行！有什么办法可以防止单元格掉到“上面”这一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:54:27.593

你的答案是听到，你可以使用这些步骤。

[移动行的示例](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/TableView_iPhone/ManageReorderRow/ManageReorderRow.html#//apple_ref/doc/uid/TP40007451-CH11-SW4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:31:27.360

检查是否是拖动并取消滚动，如果是 = [uitableview setScrollEnabled:NO]

阅读此主题，希望对您有所帮助

[关于如何将项目从 UITableView 拖放到 UITableView 的教程](https://stackoverflow.com/questions/3481858/tutorial-on-how-to-drag-and-drop-item-from-uitableview-to-uitableview)

# java - 组合 2 个字符串字符

> ID：16181266
> 
> 赞同：0
> 
> 时间：2013-04-24T00:13:49.507
> 
> 标签：java, string

我需要创建一个要求用户输入两个单词的方法。一个变量中的第一个单词，另一个变量中的第二个单词。该程序是组合用户的输入，如下图所示： 输入第一个词：树 输入第二个词：计算机字符串 操纵器：TreCom ** 确保输出全部大写，从单个变量显示

这是我到目前为止所拥有的（不多）：

```
public static void  StringManipulator ()
{
String v1,v2;
c.println("What is the first word?");
v1 = c.readLine();
c.println("What is the second word?");
v2 = c.readLine(); 
```

您将如何组合 2 个字符串以便只显示前 3 个字母？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:16:55.847

提取每个字符串的子字符串，然后将它们连接起来，例如

```
// Extract substrings
String ss1 = v1.substring(0, 3);
String ss2 = v2.substring(0, 3);

// Concatenate substrings
String result = ss1 + ss2;

// Output in all uppercase
System.out.println(result.toUpperCase()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:17:30.167

如果我做对了，你想输入两个单词，然后得到前三个字母并打印出来？

在这种情况下，请尝试以下操作：

```
String word1 = v1.substring(0,3);
String word2 = v2.substring(0,3); 
```

现在，如果您想打印这两个，您只需执行以下操作：

```
System.out.println(word1 + " "+word2); 
```

您可以排除之间的空格以获取 1 个单词中的字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:20:28.507

此方法将组合两个字符串的前 3 个字母：

```
String combineWords(String firstWord, String secondWord){
firstWord = firstWord.substring(0,2);
secondWord = secondWord.substring(0,2);
String combinedWords  = firstWord + secondWord;
return "First word: " + firstWord + ", second word: "+ secondWord + "; Both combined are: " + combinedWords;
} 
```

你可以像这样使用它：

```
String v1,v2;
c.println("What is the first word?");
v1 = c.readLine();
c.println("What is the second word?");
v2 = c.readLine();
System.out.println(combineWords(v1, v2)); 
```

# javascript - 使用“删除”作为属性名称时出错

> ID：16181267
> 
> 赞同：1
> 
> 时间：2013-04-24T00:13:59.553
> 
> 标签：javascript, jquery, ajax

我有一个从数据库中删除画廊的表格。代码一直有效，直到几周前，我不得不从 jquery.interface 切换到 jquery-ui 时遇到其他问题，但是现在当我尝试将更改重新提交到 svn 时出现错误。无效的属性 ID。引发错误的行是这样的：

```
post:$("#post").val(), delete:true 
```

整个代码片段是：

```
var answer = confirm("This will permanently delete this entire gallery. Are you sure you want to proceed?");
    if (answer) {
        $.post(
            "admin-ajax.php?action=gallery_submit",
            { post:$("#post").val(), delete:true },
            function(data){
                if (data == 1) { //success
                    $('body').html('<div class="success">Your gallery has been successfully deleted.</div>');
                    setTimeout(function() { tinyMCEPopup.close(); }, 2000);
                } else { //error
                    alert('There was an error with deleting your gallery, and so, it was NOT deleted.\n\r\n\rThe following error was encountered:\r\n' + data);
                }
            }
        ); 
```

是否对 $.post 进行了一些我不知道的语法更改，我检查了文档并没有看到任何匹配的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:21:46.640

删除是一个保留字，所以你必须引用它。

```
 { post:$("#post").val(), "delete":true }, 
```

# python - file.replace('abcd') 也替换了 'abcde' 我如何只替换精确值？

> ID：16181270
> 
> 赞同：0
> 
> 时间：2013-04-24T00:14:25.123
> 
> 标签：python, linux, replace

```
def censor2(filename):
    infile = open(filename,'r')
    contents = infile.read()
    contentlist = contents.split()
    print (contents)
    print (contentlist)
    for letter in contentlist:
        if len(letter) == 4:
            print (letter)
            contents = contents.replace(letter,'xxxx')
    outfile = open('censor.txt','w')
    outfile.write(contents)
    infile.close()
    outfile.close() 
```

此代码适用于 Python。它接受一个文件'example.txt'，读取它并循环使用字符串'xxxx'替换所有4个字母单词并将其输出到一个名为censored.txt的新文件中（保持原始格式！）。

我使用了替换功能并找到了要替换的单词。但是，单词“abcd”被替换，下一个单词“abcde”变成了“xxxxe”

如何防止“abcde”被更改？

我无法让下面的例子工作，但在使用 re.sub 模块后，我发现下面的代码只能替换 4 个字母的单词而不是 5 个字母的单词。

```
contents = re.sub(r"(\b)\w{4}(\b)", r"\1xxxxx\2", contents) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:17:45.683

怎么样：

```
re.sub(r'\babcd\b','',my_text) 
```

这将要求它在两边都有单词边界

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:20:20.407

这是正则表达式可以提供帮助的地方。你会想要这样的东西：

```
import re
...
contents = re.sub(r'\babcd\b', 'xxxx', contents)
.... 
```

是“`\b`单词边界”标记。它匹配从单词到空白字符、标点符号等的变化。

您需要`r''`正则表达式模式的样式字符串，以便反斜杠不会被视为转义字符。

# php - Javascript POST 不起作用 - 将 Javascript 数组发送到 PHP

> ID：16181273
> 
> 赞同：-2
> 
> 时间：2013-04-24T00:14:49.867
> 
> 标签：php, jquery, ajax, post

我知道在 SO 和网络上有相当多的条目，但是我无法开始工作 - 任何帮助将不胜感激。

所以我在 Javascript 中有一个数组，我试图将它传递给 PHP。

我有一个小的 JS 函数来首先发布它，所以：

```
function sendToPHP() {
$.post("index.php", { "variable": toSearchArray });
} 
```

然后在页面下方，我有 PHP：

```
<?php 
    $myval = $_POST['variable'];
    print_r ($myval);
    ?> 
```

*印刷品就在那里供我检查。

任何想法 - 仅供参考，我使用的是 MAMP，所以它的 localhost:8888/index.php。这是否会导致 URL 不正确的问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:42:55.363

您对 ajax 的工作原理有误解。尽管 jquery 使它变得容易，但它仍然不是自动的。你应该只用 jquery 找到一个关于 ajax 的教程，但是如果你只想将一个数组发送到 php 并在屏幕上查看输出，这样的事情会起作用：

索引.php

```
<html>
<head>
<title>Test</title>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    //attach to the button a click event
    $('#btn').click(function(){
            //get the value from the textbox
        var txt=$('#txt').val();
            //if txt is blank, alert an error
        if(txt == ''){
            alert("Enter some text");
        } else {
                    //send txt to the server
                    //notice the function at the end. this gets called after the data has been sent
            $.post('catcher.php', {'text':txt}, function(data){
                            //now data is an object, so put the message in the div
                $('#response').text(data.message);
            }, 'json');
        }
    });
});
</script>
</head>
<body>
<input type="text" id="txt">
<input type="button" id="btn">
<pre id="response" style="overflow:auto;width:800px;height:600px;margin:0 auto;border:1px solid black;">&nbsp;</pre>
</body>
</html> 
```

捕手.php：

```
<?php
//if something was posted
if(!empty($_POST)){
    //start an output var
    $output = array();

    //do any processing here.
    $output['message'] = "Success!";

    //send the output back to the client
    echo json_encode($output);
} 
```

最好使用 2 个文件，一个供用户加载启动 ajax 调用，一个页面处理 ajax 调用。发送数组的工作方式相同，只需将获取文本框值替换为发送数组即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:43:21.480

这是您打开页面时发生的情况 ( `index.php`)

1.  发出`GET`请求`index.php`并返回内容。数组中**没有**值，因此您的行什么也不做。`$_POST``print_r()`
2.  执行通过 AJAX向其发送`POST`请求的Javascript。`index.php`请注意，这是一个全新的请求，与原始`GET`. 该`$_POST`数组将在*此*请求上填充，但响应被丢弃。

希望这将说明您*可以*做什么。

#### ajax.php

```
<?php
header("content-type: application/json");
exit(json_encode($_POST)); 
```

#### 索引.php

```
<script>
const toSearchArray = ['some', 'array', 'with', 'values'];
$.post('ajax.php', {
  variable: toSearchArray
}).done(data => {
  console.log(data) // here you will see the result of the ajax.php script
})
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-09T05:38:25.717

而不是将变量 toSearchArray 声明为数组。将其视为一个 javascript 对象。var toSearchArray = {}。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T00:20:29.467

好吧，当涉及到数组时，我认为这不是正确的方法，请参阅您需要在 javascript 中使用 JSON 编码，然后在 php 中使用 JSON 解码 请参阅此问题[Pass Javascript Array -> PHP](https://stackoverflow.com/questions/5035547/pass-javascript-array-php)

# android - CloudBees Jenkins Android JUnit 测试模拟器无法启动

> ID：16181275
> 
> 赞同：2
> 
> 时间：2013-04-24T00:14:55.490
> 
> 标签：android, junit, android-emulator, jenkins, cloudbees

我无法为简单的 Hello World Android 应用程序运行任何 JUnit 测试用例。我一直在尝试不同的设置，但没有任何效果。

一个错误如下：

[android] /opt/android/android-sdk-linux/tools/android 创建 avd -f -a -c 128M -s WVGA800 -n hudson_en-US_240_WVGA_android-10 -t android-10

```
There is more than one system image defined for platform 'android-10'.
Pick an image to use and set it in the 'Target ABI' config field.
Valid ABIs: armeabi, x86 
```

如果我选择 x86 以外的任何东西，我会得到不同的错误。如果我选择 x86，则消息显示“模拟器似乎没有启动；放弃”

如果有人有一个有效的 Hello World 示例，那将很有帮助。我不知道我什至可以尝试取得进展。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:19:21.607

请参阅[https://issues.jenkins-ci.org/browse/JENKINS-14901](https://issues.jenkins-ci.org/browse/JENKINS-14901) 我们正在调查此问题，但尚未修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:05:51.593

看起来这是[JENKINS-14741](https://issues.jenkins-ci.org/browse/JENKINS-14901)修复程序引入的副作用。

它应该很快修复。

# c# - 多线程中的 toolStripStatusLabel

> ID：16181277
> 
> 赞同：1
> 
> 时间：2013-04-24T00:15:04.053
> 
> 标签：c#, multithreading, winforms

我`toolStripStatusLabel`在多线程中使用，虽然它是另一个与总是返回 false 的`toolStripStatusLabel`我的 invokeRequired 方法交互的线程`statusStrip`（我也强制创建句柄）。在这个线程中，我可以访问`toolStripStatusLabel`（从 else 子句），更新它，但我的编辑无法显示在主 UI 中。这是我的代码：

```
public void safeThreaded()
{                
    Form2 form = new Form2();
    StatusStrip ss = (StatusStrip)form.Controls["statusStrip1"];
    ToolStripStatusLabel label =   (ToolStripStatusLabel)ss.Items["toolStripStatusLabel1"];
    string text = "Written by the background thread.";
    if (!(ss.IsHandleCreated))
    {
        IntPtr handler = ss.Handle;
    }
    if (ss.InvokeRequired)
    {
        ss.Invoke(new updateTextCallback(updateText), new object[]{"Text generated on non-UI thread."});
    }
    else
    {
        // It's on the same thread, no need for Invoke
        label.Text = text + " (No Invoke)";
        MessageBox.Show(label.Text.ToString());
        ss.Refresh();
    }
}

private void updateText(string text)
{
    Form2 form = new Form2();
    StatusStrip ss = (StatusStrip)form.Controls["statusStrip1"];
    ToolStripStatusLabel label = (ToolStripStatusLabel)ss.Items["toolStripStatusLabel1"];
    label.Text = text;
}

public delegate void updateTextCallback(string text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:22:50.470

这是因为拥有线程是您从中调用的任何线程- 您正在使用and`safeThreaded()`创建表单，然后在同一个线程中对其进行编辑。`StatusStrip``ToolStripStatusLabel`

如果您要在一个线程中创建表单，然后在单独的线程中运行您的`safeThreaded()`函数（*而不*在其中创建`Form2`），那么您应该会看到`InvokeRequired`是真的。

# asp.net-mvc - ASP.NET MVC 无法读取 cookie

> ID：16181278
> 
> 赞同：0
> 
> 时间：2013-04-24T00:15:07.733
> 
> 标签：asp.net-mvc, cookies

这应该很简单，尽管我发现我只能设置 cookie 但不能读回它们，尽管我的浏览器向我显示了 cookie。

在我`HomeController`的用户输入有效字符串后，我设置了 cookie：

```
[HttpPost]
public ActionResult Index(string fMemberCode)
{
    try
    {
        // TODO: controller-->member table module-->member data gateway-->DB
        // Check member num against member table
        //  Return cookie if exists
        //  Return error if not
        MembersModule membersModule = new MembersModule();
        int memberId = membersModule.AuthMember(fMemberCode);
        if (memberId > 0)
        {
            HttpCookie mCookie = new HttpCookie("MMedia");
            mCookie.Value = memberId.ToString();
            Response.Cookies.Add(mCookie);
        }
        else { }
        return RedirectToAction("Index");
    }
    catch
    {
        return View();
    }
} 
```

然后稍后，在不同的上下文中，`LibraryController`存在检查 cookie 的需求：

```
public LibraryController()
{
    // TODO
    // Check member cookie present
    int id = int.Parse(Request.Cookies["Media"].Value);
    if (id > 0)
        this.module = new LibraryModule(id);
    else throw new Exception("Invalid cookie");
} 
```

但是，当单步执行 VS2012 中的代码时，执行行`LibraryController`到达：

```
int id = int.Parse(Request.Cookies["Media"].Value); 
```

抛出异常：`Object reference not set to an instance of an object`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T00:24:55.380

您无法`Request`在控制器的构造函数中访问该属性。它在控制器生命周期的那个时候不存在。

也许动作或控制器过滤器可能会对您有所帮助。

# git - 找出哪个提交删除了 GIT 中的特定单词/行

> ID：16181279
> 
> 赞同：7
> 
> 时间：2013-04-24T00:15:19.230
> 
> 标签：git

使用 GIT 工具和命令行，找出哪个提交从文件中删除了特定单词的最简单方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T01:22:52.213

您可以使用本文中描述的[方法](https://stackoverflow.com/questions/4404444/how-do-i-blame-a-deleted-line)：

> 如果您知道该行的内容，这是一个理想的用例：

```
git log -S<string> path/to/file
git log -G<regex> path/to/file 
```

或者你可以试试：

```
git blame --reverse 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:20:29.180

`git blame`将向您显示更改文件每一行的最新提交。您可以在文件上使用它，然后转到您的单词所在的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:17:41.793

键入**`gitk`**命令行，它将显示用于比较文件的图形工具。

（或者）

```
 $ git log -p 
```

> 更有用的选项之一是`-p`，它显示了每次提交中引入的差异。

# javascript - 谷歌浏览器在大型数据提交方面滞后

> ID：16181289
> 
> 赞同：1
> 
> 时间：2013-04-24T00:16:11.530
> 
> 标签：javascript, django, forms, google-chrome, lag

# 概括：

我正在尝试通过表单字段输入传递 base64 编码的图像数据。我的代码在我测试过的所有浏览器上都可以正常工作，但是在 Google Chrome 上存在严重的 CPU 延迟、提交后延迟——其长度与提交的数据长度成正比。

# 细节：

**我在做什么：** 我的网站上有一个 SVG 编辑器，用户可以在其中创建图像以保存到他们的个人资料中。一旦用户完成他们的工作，他们点击“保存”——这会启动一些 JavaScript，通过 canvas.toDataURL() 将 SVG 转换为编码数据字符串，将其存储在隐藏的输入字段中，提交表单，然后返回用户对他们的设计进行概述。

**有什么问题？** 代码本身似乎在 Firefox 和 Google Chrome 上都没有问题。Firefox 页面加载需要 1-2 秒，无论 data_string 大小如何。但是，在 Google Chrome 上，加载“概览”页面所需的时间与隐藏字段中提交的数据字符串的大小成正比。

例如，如果我截断不同长度的数据字符串，我会收到不同的页面加载时间：

### 测试图像 1：

*   5000 个字符 - 1.78 秒
*   50000 个字符 - 8.24 秒
*   73198 个字符 - 11.67 秒（未截断）

### 测试图像 2：

*   5000 个字符 - 1.92 秒
*   50000 个字符 - 8.79 秒
*   307466 个字符 - 42.24 秒（未截断）

# 我的问题：

*延迟是不可接受的（因为大多数图像的大小至少为 100k）；有谁知道谷歌浏览器发生了什么？*

我想重申一下，无论浏览器如何，服务器都以相同的速度响应；这绝对是 Google Chrome 的客户端浏览器特定问题。

我也将不胜感激替代建议。我花了一些时间试图欺骗浏览器认为数据是文件上传（通过将文本输入更改为文件输入字段，然后手动尝试形成数据并通过 javascript 提交，但我似乎无法让 Django 识别伪造的文件（所以它会出错，认为没有上传文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T23:43:40.310

# 概括

当将所述数据放入实际输入字段时，谷歌浏览器似乎在处理大量数据时出现问题。我怀疑这是 Chrome 尝试清理用于显示数据的内存的问题。

# 细节

我能够通过完全取消客户端表单并通过 javascript XMLHttpRequest 提交数据（正如我在问题末尾提到的那样）来实现解决方法，然后将用户重定向到下一页AJAX 回调。

我永远无法让 Django 识别手动形成的 FileField 对象（作为 multipart/form-data），但我*能够*让它接受手动形成的 CharField 字符串（这是我的 base64 编码的画布数据）。

由于数据从未放入输入字段，因此 Google Chrome 会立即响应。

我希望这可以帮助任何可能遇到类似问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T14:49:41.950

我也遇到了同样的问题，正在寻找解决方案。在我的情况下，页面最初的几次运行没有这样的问题。然后它突然开始延迟消耗大量内存，这反过来又使我的整个系统运行非常缓慢。我在另一台 PC 上进行了尝试，就像预期的那样，在前几次运行中提交大尺寸的 svg 数据没有问题，但后来它也显示出同样的滞后问题。

阅读您的帖子后，我打算使用 jquery 的 ajax 来发布数据。我希望这能解决问题。

# django - 如何将特定的 Django 应用程序存储在另一个 Postgresql 数据库中

> ID：16181291
> 
> 赞同：4
> 
> 时间：2013-04-24T00:16:17.560
> 
> 标签：django, postgresql, foreign-keys, remote-server, django-apps

最近我下载了[django_messages](http://code.google.com/p/django-messages/)应用程序**（私人用户到用户消息传递 django 应用程序）**并将其添加到我的 django 项目中。

**设置.py**

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'mydjangoapp.mydjangoappdb',
    'tastypie',
    'gunicorn',
    'south',
    'relationships',
    'pyapns',
    'django_messages', 
```

该应用程序运行良好，与 Django 配合得很好。但是，对于消息传递等功能，数据库可能会变得非常大。我决定创建一个专用数据库来存储所有 django_messages 数据。

**设置.py**

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.postgresql_psycopg2',
    'NAME': 'django_db',                      
    'USER': 'django_login',                      
    'PASSWORD': 'xxxx',                  
    'HOST': '',                     
    'PORT': '',                      
},
'message_db': {
    'ENGINE': 'django.db.backends.postgresql_psycopg2',  
    'NAME': 'django_messagedb',                      
    'USER': 'django_login',                      
    'PASSWORD': 'xxxx',                 
    'HOST': 'XX.XXX.XX.XXX',                     
    'PORT': '5432', 
}

DATABASE_ROUTERS = ['mydjangoapp.messagerouter.MessageRouter'] 
```

只是为了澄清，这是我的**messagerouter.py**

```
class MessageRouter(object):
"""
A custom router written by Riegie to 
control all database operations on models in the 
django_messages application
"""
     def db_for_read(self, model, **hints):
         """
         Attempts to read django_messages models go to
         message_db.
         """
         if model._meta.app_label == 'django_messages':
             return 'message_db'
         return None

     def db_for_write(self, model, **hints):
         """
         Attempts to write django_messages models to go to
         message_db.
         """
         if model._meta.app_label == 'django_messages':
             return 'message_db'
         return None

     def allow_relation(self, obj1, obj2, **hints):
         """
         Allow relations if a model in the django_messages.
         """
         if obj1._meta.app_label == 'django_messages' or \
         obj2._meta.app_label == 'django_messages':
             return True
         return None

     def allow_syncdb(self, db, model):
         """  
         Make sure the django_messages app only appears in the
         'message_db" database.
         """
         if db == 'message_db':
             return model._meta.app_label == 'django_messages'
         elif model._meta.app_label == 'django_messages':
             return False
         return None 
```

如您所见，我有两个数据库，一个在运行 Django 的本地计算机上，另一个在远程计算机上。开箱即用，安装后，django_messages 自然会在默认数据库上创建表。但是，我希望它只在“message_db”数据库上创建表。

我查看了[Multi-db Setup](https://docs.djangoproject.com/en/dev/topics/db/multi-db/) Django 文档，但它详细介绍了主/从配置。我使用了 Auth Router 示例并创建了 messagerouter.py。一切都同步了，我没有收到任何错误。

![在此处输入图像描述](https://i.stack.imgur.com/yRYfl.jpg)

但是，当我检查远程数据库时，该表不存在！这是为什么？是因为无法与 Django 用户建立远程外键表关系吗？

* * *

**更新**

所以我设法使用以下命令将 Django_messages 应用程序同步到另一个数据库：**./manage.py syncdb --database=message_db**。这很棒。但是，当我从 Django 管理页面访问应用程序时，出现以下错误：

```
DatabaseError at /admin/django_messages/message/

relation "django_messages_message" does not exist
LINE 1: SELECT COUNT(*) FROM "django_messages_message" 
```

我觉得这个错误很奇怪，因为我可以通过 pgadmin III 看到另一台服务器上的表。所以同步工作正常，但现在 Django 似乎无法识别该表。也许我的 messagerouter.py 做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:07:42.953

所以在做了很多研究之后，我终于遇到了这个，我希望我早点看到它。Django 不支持跨数据库关系：[https ://docs.djangoproject.com/en/dev/topics/db/multi-db/#no-cross-database-relations](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#no-cross-database-relations)

正如它所说：Django 目前不提供对跨多个数据库的外键或多对多关系的任何支持。如果您使用路由器将模型分区到不同的数据库，则这些模型定义的任何外键和多对多关系必须在单个数据库的内部。

这是因为参照完整性。为了维护两个对象之间的关系，Django 需要知道相关对象的主键是有效的。如果主键存储在单独的数据库中，则无法轻松评估主键的有效性。

如果你在 InnoDB 中使用 Postgres、Oracle 或 MySQL，这是在数据库完整性级别强制执行的——数据库级别的键约束防止创建无法验证的关系。

但是，如果您将 SQLite 或 MySQL 与 MyISAM 表一起使用，则没有强制引用完整性；因此，您可能能够“伪造”跨数据库外键。但是，Django 不正式支持此配置。

希望这个答案可以为你们中的许多人省去麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:11:27.957

我还发现了这个 Django 补丁：[https](https://code.djangoproject.com/attachment/ticket/17875/foreignkey-db-using.patch) ://code.djangoproject.com/attachment/ticket/17875/foreignkey-db-using.patch这可能有助于跨数据库关系

# javascript - 在不克隆的情况下获取 div 的自动高度

> ID：16181294
> 
> 赞同：0
> 
> 时间：2013-04-24T00:16:29.650
> 
> 标签：javascript, jquery

我有一个 div 元素，其自动高度可以说是 300px。
单击按钮时，我将其高度设置为 500 像素。
我想将它的高度设置为默认高度。我知道的唯一解决方案是克隆 div，存储它的高度并相应地使用它。
一个[jsfiddle示例](http://jsfiddle.net/nLtVz/)

```
var elem = $("div").clone().height("auto").appendTo("body");
$('div').animate({"height": elem.height()});
elem.remove(); 
```

有更好的方法吗？我不想克隆，因为我的实际页面上有大量元素。

更新：我创建了[另一个 fiddle](http://jsfiddle.net/XUL9H/)。如果尚未在加载时设置元素，您将如何获得元素的默认高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:19:38.557

当您将原始高度设置为静态值时，您可以存储原始高度，可能作为元素的数据属性。所以：

```
$('button').click(function() {
    $('div').data('origHeight',$('div').height());
    //Your code to set the height
}); 
```

然后：

```
$('div').animate({"height": $('div').data('origHeight')}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:25:01.123

如何将“旧高度”保存到某个属性？

像这样。

```
$('#someDiv').attr('old-height',$('#someDiv').height()); 
```

你说什么？

# java - i18n 用于静态 html 内容

> ID：16181295
> 
> 赞同：4
> 
> 时间：2013-04-24T00:16:46.150
> 
> 标签：java, html, jsp, internationalization

我正在 REST API 前面构建一个网站（这支持 i18n），但我不确定采用哪种方式进行国际化。我研究过 js 和 html 解决方案，但它们似乎都不如服务器端选项。

鉴于大多数页面包含只需要语言环境支持的静态内容，jsp 会是一个好的解决方案吗？jsf 似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:08:55.467

我真的不推荐拥有各种 HTML 文件。本地化最佳实践建议将翻译与代码分开。

我所知道的最快、最简单、最不妨碍的方法是使用[Google ARB](https://code.google.com/p/arb/)。考虑使用以下示例 HTML：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Testing ARB...</title>
    </head>

    <body>
        <h2>This is a test.</h2>
    </body>
</html> 
```

现在需要提取可本地化的内容。可以使用 ARB 提供的[提取器工具](https://code.google.com/p/arb/source/browse/#svn%2Ftrunk%2Farb_extractor)来执行此操作，或者如果您的页面非常简单，您甚至可以手动执行此操作：

```
<html>
    <head arb:namespace="test">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title arb:id="MSG_HTML_TITLE">Testing ARB...</title>
    </head>

    <body>
        <h2 arb:id="MSG_BODY_TEST">This is a test.</h2>
    </body>
</html> 
```

然后让我们为这些消息创建资源文件并提供翻译：

```
arb.register(
    "test", 
    {
    "MSG_HTML_TITLE": "Testing ARB",
    "MSG_BODY_TEST": "This is a test.",
    "MSG_CURR_LOCALE": "...and the selected language is \"{currentLocale}\".",
      "@MSG_CURR_LOCALE": {
        "placeholders": {
          "0": {
            "description": "This variable would show the current locale.",
            "example": "fr"
          }
        }
      }
    }
);

arb.register(
    "test:de", 
    {
    "MSG_HTML_TITLE": "ARB auf Probe",
    "MSG_BODY_TEST": "Das ist ein Test.",
    "MSG_CURR_LOCALE": "...und die ausgewählte Sprache ist \"{currentLocale}\".",
      "@MSG_CURR_LOCALE": {
        "placeholders": {
          "0": {
            "description": "This variable would show the current locale.",
            "example": "fr"
          }
        }
      }
    }
); 
```

最后，将 JS 添加到 HTML。此外，提供一种从 URL 获取所选语言环境的简单方法；IE`./index.html?locale=de`

```
<html>
    <head arb:namespace="test">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title arb:id="MSG_HTML_TITLE">Testing ARB...</title>
        <script src="arb/lib/arbcore.js"></script>
        <script src="test.arb"></script> <!-- ARB file w/ translations. -->
    </head>

    <body>
        <h2 arb:id="MSG_BODY_TEST">This is a test.</h2>

        <!-- Get locale from URL and translate page HTML -->
        <script>

            function main(){
                var locale = arb.getParamFromUrl('locale');
                if (!locale){
                    locale = 'en';
                }
                arb.setResourceSelector(locale);

                // JS localization
                var r$ = arb.getResource("test");
                document.write(arb.msg(r$.MSG_CURR_LOCALE, {'currentLocale': locale}));     

                // This should appear after all the translatable HTML content
                arb.localizeHtml();                             
            }

            main();

        </script>

    </body>
</html> 
```

此示例的代码可在[此处](https://github.com/shervinafshar/arb-test)找到。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T04:11:49.777

> 1）如果您只有静态内容，请创建具有不同语言的不同 html 文件并将其放在单独的文件夹中并访问该站点，例如

```
for English
http://yourdomain.com/en/english_index.html

for French
http://yourdomain.com/fr/french_index.html 
```

> 2) 如果您有动态操作，JSP 也是一个不错的选择。有一个很好的选择来维护 i18n 资源边界。

我建议选择选项 1

# c# - 如何使用 json.net 对 json 进行递归下降？

> ID：16181298
> 
> 赞同：19
> 
> 时间：2013-04-24T00:17:19.460
> 
> 标签：c#, recursion, json.net, recursive-descent

我正在尝试使用 json.net 解析 json 文件。文件看起来像这样

```
{X:
   {
      Title:"foo",
      xxxx:xxxx
   }
}
{Y:
   {ZZ:
        {Title: "bar",...}
    }
} 
```

我正在尝试递归处理所有具有 Title 属性的对象的结构。但是我对`JToken`, `JProperty`, `JContainer`, `JValue`,感到困惑`JObject`。阅读源代码并没有让我变得更聪明，而且这些示例都没有帮助。我想要一些类似的东西

```
WalkNode(node, Action<Node> action)
{
    foreach(var child in node.Children)
    {
        Action(child);
        WalkNode(child);
    }
}

Parse()
{
   WalkNode(root, n=>
    {
        if(n["Title"] != null)
        {
           ...
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-25T06:39:26.190

下面的代码应该与您要查找的代码非常接近。我假设有一个外部数组，并且数组可以出现在层次结构中的任何位置。（如果这不是真的，您可以稍微简化一下 WalkNode 方法代码，但无论哪种方式都应该有效。）

```
using System;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

namespace JsonRecursiveDescent
{
    class Program
    {
        static void Main(string[] args)
        {
            string json =
            @"[
                {
                    ""X"":
                    {
                        ""Title"":""foo"",
                        ""xxxx"":""xxxx""
                    }
                },
                {
                    ""Y"":
                    {
                        ""ZZ"":
                        {
                            ""Title"":""bar"",
                            ""xxxx"":""xxxx""
                        }
                    }
                }
            ]";

            JToken node = JToken.Parse(json);

            WalkNode(node, n =>
            {
                JToken token = n["Title"];
                if (token != null && token.Type == JTokenType.String)
                {
                    string title = token.Value<string>();
                    Console.WriteLine(title);
                }
            });
        }

        static void WalkNode(JToken node, Action<JObject> action)
        {
            if (node.Type == JTokenType.Object)
            {
                action((JObject)node);

                foreach (JProperty child in node.Children<JProperty>())
                {
                    WalkNode(child.Value, action);
                }
            }
            else if (node.Type == JTokenType.Array)
            {
                foreach (JToken child in node.Children())
                {
                    WalkNode(child, action);
                }
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-05-07T20:08:25.223

还需要做一些事情。想提出我的解决方案。它具有以下优点：

*   不是递归的
*   没有回调
*   不假设任何内部结构（数组）
*   将树遍历与需要执行的操作分离

    ```
    IEnumerable<JToken> AllTokens(JObject obj) {
        var toSearch = new Stack<JToken>(obj.Children());
        while (toSearch.Count > 0) {
            var inspected = toSearch.Pop();
            yield return inspected;
            foreach (var child in inspected) {
                toSearch.Push(child);
            }
        }
    } 
    ```

    然后您可以使用 linq 过滤并执行操作：

    ```
    var tokens = AllTokens(jsonObj);
    var titles = tokens.Where(t => t.Type == JTokenType.Property && ((JProperty)t).Name == "Title"); 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-20T17:17:52.257

我想我会对@BrianRogers WalkNode 方法进行一些小调整，使其更加通用：

```
private static void WalkNode(JToken node,
                                Action<JObject> objectAction = null,
                                Action<JProperty> propertyAction = null)
{
    if (node.Type == JTokenType.Object)
    {
        if (objectAction != null) objectAction((JObject) node);

        foreach (JProperty child in node.Children<JProperty>())
        {
            if (propertyAction != null) propertyAction(child);
            WalkNode(child.Value, objectAction, propertyAction);
        }
    }
    else if (node.Type == JTokenType.Array)
    {
        foreach (JToken child in node.Children())
        {
            WalkNode(child, objectAction, propertyAction);
        }
    }
} 
```

然后OP可以做类似的事情：

```
WalkNode(json, null, prop =>
{
     if (prop.Name == "Title" && prop.Value.Type == JTokenType.String)
     {
         string title = prop.Value<string>();
         Console.WriteLine(title);
     }
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-06-24T06:57:28.877

您也可以使用 JSONPath：`node.SelectTokens("$..*");`

像这样使用：

```
var jObjectsWithTitle = node
    .SelectTokens("$..*")
    .OfType<JObject>()
    .Where(x => x.Property("Title") != null); 
```

要不就：

```
var jObjectsWithTitle = node.SelectTokens("$..[?(@.Title)]"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-15T16:26:49.790

试试这个方法我在一些不成功的尝试后写了它：

```
 private void Traverse(JToken token, TreeNode tn)
    {
        if (token is JProperty)
            if (token.First is JValue)
                tn.Nodes.Add(((JProperty)token).Name + ": " + ((JProperty)token).Value);
            else
                tn = tn.Nodes.Add(((JProperty)token).Name);

        foreach (JToken token2 in token.Children())
            Traverse(token2, tn);
    } 
```

您首先必须将完整的 JSON 文件传递​​给它，如下所示：

```
TreeNode rooty= tvu.Nodes.Add("Rooty") // not the Indian bread,just Rooty,  Ok?
JToken token = JToken.Parse(File.ReadAllText(<"Path to json file">));
Traverse(token, rooty); 
```

完成了，Boom 你得到了这个：哦，不，我不允许嵌入图片。伤心。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-02T16:00:58.740

我用“根”节点包装数据，并将其全部包装为数组值。然后这对我有用：

```
 private static void TraverseJson(string jsonText)
    {
        dynamic jsonObject = JsonConvert.DeserializeObject(jsonText);

        JArray ja = (JArray)jsonObject.root;
        int itemCount = ja.Count;

        foreach (JObject jobj in jsonObject.root)
        {
            WalkHierarchy(jobj);
        }
    }

    private static void WalkHierarchy(JObject jobj)
    {
        foreach (JProperty jprop in (JToken)jobj)
        {
            if (jprop.Value.Type == JTokenType.Object)
            {
                WalkHierarchy((JObject)jprop.Value);
            }
            else
            {
                Console.WriteLine(jprop.Value.ToString());
            }
        }
    } 
```

# android - 正在做 ”！” 通过我添加应用程序的所有内容

> ID：16181301
> 
> 赞同：0
> 
> 时间：2013-04-24T00:17:36.473
> 
> 标签：android, android-layout

这是我第一次使用应用程序，所以如果你知道一个我可以继续使用的网站，那么它将是超级的，或者就像我拥有全新版本的 eclipse

这是我第一次必须使用适用于 android 的应用程序。在我的路径中：**ABSB/res/layout/activity_main.xml**

进入我正在努力添加和删除东西的文件，但无论我做什么，总会有！通过图片或我的按钮。

```
 <ImageView
        android:id="@+id/imageView1"
        android:layout_width="85dp"
        android:layout_height="85dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:src="@drawable/ic_launcher" /> 
```

在这里显示 img 我对我的问题的意思！[点击她](http://billedeupload.dk/images/idc8s.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:20:34.930

别担心。这只是一个 lint 警告。它不需要遵循。

如果你将鼠标悬停在它上面。它会告诉你你的图片需要一个字符串资源，这样可以更容易地本地化。如果它不是确切的特定消息，它将是一个类似的无害警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:21:13.177

这只是 Eclipse 警告您代码的潜在问题。如果您将鼠标悬停在文件本身的图标上（行号旁边），它将显示警告消息。在这种情况下，它将类似于以下内容：

> [辅助功能] 图片上缺少 contentDescription 属性

在这种情况下，您可能可以放心地忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:21:47.040

将鼠标悬停在带黄色下划线的单词上（如图片中的 ImageView）。它会告诉你出了什么问题。但这只是警告而不是错误。

# python - 如何轻松计算出 np.convolve 的“有效”区域

> ID：16181307
> 
> 赞同：1
> 
> 时间：2013-04-24T00:18:21.320
> 
> 标签：python, numpy

愚蠢的问题 - 但是当它在“有效”模式下工作时，是否有一个 numpy 函数返回卷积函数的“形状”。

基本上我有一个问题，即确定哪些“x”值与哪些 y 匹配 - 并将其与原始数据进行比较？

IE

```
import numpy as np

x= np.arange(0,1000)
y=np.random.rand(1000)
print np.shape(x)
print np.shape(y)

window = (np.ones(10))
ydash= np.convolve(y, window, "valid")

print np.shape(ydash)
#xdash = ? 
```

我一般如何找出 ydash 的哪些元素对应于 x 中的元素。（我想我可以解决 - 但似乎应该有一个功能可以做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:28:03.077

它应该是`y.shape - window.shape + 1`

# java - 用多维表中的项目填充 JComboBox

> ID：16181308
> 
> 赞同：0
> 
> 时间：2013-04-24T00:18:22.357
> 
> 标签：java, swing, netbeans, nullpointerexception, jcombobox

我正在尝试从多维表中的项目填充 JCombobox。我试图宣传的项目是该表中城市的名称。这是我的代码：

```
String t21[][] = {{"Azores","Alaska","Pacific Time US & Canada","Chihuahua, La Paz, Mazatlan - New","Guadalajara, Mexico City, Monterrey - New","Bogota, Lima, Quito, Rio Branco","Atlantic Time","CasaBlanca GMT","Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","Athens, Bucharest, Istanbul","Moscow, St. Petersburg, Volgograd","Abu Dhabi, Muscat","Chennai, Kolkata, Mumbai, New Delh","Almaty, Novosibirsk","Bangkok, Hanoi, Jakarta","Beijing, Chongqing, Hong Kong, Urumqi","Osaka, Sapporo, Tokyo","Canberra, Melbourne, Sydney","",""},
        {"-6","-5","-4","-3","-2","-1","0","1","2","3","4","5","6","7","8","9","10"}};
for( int i = 0; i< t21.length-1; i++){
                   jComboBox1.addItem(t21[0][i]);
               } 
```

但是当我运行我的程序时，我得到了这个错误：

> java.awt 的 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251) 的 temps.interfac$2.run(interfac.java:125) 的线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常.EventQueue.dispatchEventImpl(EventQueue.java:727) at java.awt.EventQueue.access$200(EventQueue.java:103) at java.awt.EventQueue$3.run(EventQueue.java:688) at java.awt.EventQueue$3 .run(EventQueue.java:686) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java: 697) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161) 在 java.awt 的 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)。EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) at java.awt.EventDispatchThread.run(EventDispatchThread .java:91)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:01:55.987

`jComboBox1`正如@Hovercraft Full Of Eels 所建议的那样，一旦初始化，就会出现一个新问题：组合中只出现一个条目。检查循环限制的值以了解原因：

```
System.out.println(t21.length-1); 
```

假设您希望组合显示第一*行*的元素，则[*for-each*](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)循环可能更可靠：

```
for (String s : t21[0]) {
     jComboBox1.addItem(s);
} 
```

另请参见[*数组*](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T00:25:28.647

您的错误告诉您 jComboBox1 变量为空。

解决方法：使用前先初始化变量。

* * *

编辑：
你说：

> 该变量已经初始化，因为我在设计端使用 NetBeans 创建了一个 JComboBox

不要相信我的话，也不要相信你的假设。使用您的程序对此进行测试，以了解此时代码中实际发生的情况。将您的代码更改为如下所示：

```
System.out.println("is jComboBox1 null: " + (jComboBox1 == null)); // *** added *
for( int i = 0; i< t21.length-1; i++){
   jComboBox1.addItem(t21[0][i]);
} 
```

然后请向我们报告，看看 JVM 告诉你什么。

# php - Apache mod_rewrite 没有将表达式映射到参数

> ID：16181311
> 
> 赞同：2
> 
> 时间：2013-04-24T00:18:36.097
> 
> 标签：php, apache, .htaccess, mod-rewrite

我有一个网站，它使用`apache mod_rewrite`并在过去 6 个月内一直在工作，没有出现任何错误。

我有以下重写规则：

```
RewriteRule ^products/([a-z\-]+)/$ /products.php?category=$1 [NC,L] 
```

这是我页面中的代码`products.php`

```
$category = $_GET['category'];

if (isset($category)) {
    // do some processing here
}
else {
    header("Location: /500.html");
    exit;
} 
```

符合此规则的链接示例是`/products/lighting-poles/`

有谁知道为什么实际的重写仍在发生但没有映射`([a-z\-]+)`到`category=$1`？

**额外信息**

我注意到`.htaccess`主机上的文件已经注释掉了这一行`Options +FollowSymLinks`，所以我首先尝试重新启用它，只是为了让网站返回一个 apache 白屏`500`错误。

更多来自 .htaccess 文件

```
<IfModule mod_rewrite.c>
#Options +FollowSymLinks
RewriteEngine On
RewriteBase /

# Add a trailing slash to paths without an extension
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule ^(.*)$ $1/ [L,R=301]

# other rules including problem rule here

</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:46:48.733

这听起来像一个多视图问题。Multiviews 是一个内容协商的东西，如果它被打开，它会在 URL 文件映射管道中尝试一些不同的额外的东西来尝试找到一个映射到 URL 的文件。在这里，您有一个类似的 URL `/products/blah`，但是，您有一个名为 的文件`products.php`，因此多视图可能会尝试映射`products`到`/products.php/blah`. 因此完全绕过了重写规则，你看不到`category`参数。

选项在哪里，尝试添加：

```
Options -Multiviews 
```

# java - 我的数据库永远不会更新

> ID：16181312
> 
> 赞同：0
> 
> 时间：2013-04-24T00:18:40.303
> 
> 标签：java, android, sqlite

在下面的 LogCat 中，您可以看到我的数据库表永远不会更新，即使我增加了数据库版本。我在我的数据库中添加了一个表，并将其导入到 assets 文件夹中。在我的 onUpgrade 方法中，我删除了以前的旧版本 db 并复制新版本。至少我在我的代码中做到了。我现实从未调用过该方法。我每次都没有得到这样的表格错误。

```
04-24 02:08:27.502: D/szipinf(6630): Initializing inflate state
04-24 02:08:27.612: D/szipinf(6630): Initializing inflate state
04-24 02:08:27.612: D/szipinf(6630): Initializing zlib to inflate
04-24 02:08:30.972: I/Database(6630): sqlite returned: error code = 1, msg = no such table: tbl4
04-24 02:08:30.972: E/DataAdapter(6630): getTestData >>android.database.sqlite.SQLiteException: no such table: tbl4: , while compiling: SELECT * FROM tbl4  ORDER BY _ID ASC
04-24 02:08:30.982: D/AndroidRuntime(6630): Shutting down VM
04-24 02:08:30.982: W/dalvikvm(6630): threadid=1: thread exiting with uncaught exception (group=0x40018560)
04-24 02:08:31.202: E/AndroidRuntime(6630): FATAL EXCEPTION: main
04-24 02:08:31.202: E/AndroidRuntime(6630): java.lang.RuntimeException: Unable to start activity ComponentInfo{rs.androidaplikacije.themostcompleteiqtest/rs.androidaplikacije.themostcompleteiqtest.LogicTest}: android.database.sqlite.SQLiteException: no such table: tbl4: , while compiling: SELECT * FROM tbl4  ORDER BY _ID ASC
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.os.Looper.loop(Looper.java:130)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.app.ActivityThread.main(ActivityThread.java:3835)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at java.lang.reflect.Method.invoke(Method.java:507)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at dalvik.system.NativeStart.main(Native Method)
04-24 02:08:31.202: E/AndroidRuntime(6630): Caused by: android.database.sqlite.SQLiteException: no such table: tbl4: , while compiling: SELECT * FROM tbl4  ORDER BY _ID ASC
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at rs.androidaplikacije.themostcompleteiqtest.TestAdapter.getTestDataLogic(TestAdapter.java:103)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at rs.androidaplikacije.themostcompleteiqtest.LogicTest.nextQuestion(LogicTest.java:136)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at rs.androidaplikacije.themostcompleteiqtest.LogicTest.onCreate(LogicTest.java:93)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-24 02:08:31.202: E/AndroidRuntime(6630):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
04-24 02:08:31.202: E/AndroidRuntime(6630):     ... 11 more
04-24 02:08:32.912: I/Process(6630): Sending signal. PID: 6630 SIG: 9 
```

数据库助手：

```
public class DataBaseHelper extends SQLiteOpenHelper
{
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = "/data/data/rs.androidaplikacije.themostcompleteiqtest/databases/"; 
private static String DB_NAME ="pitanja.sqlite";// Database name
private static SQLiteDatabase mDataBase; 
private final Context mContext;
private static final int DATABASE_VERSION = 25;

public DataBaseHelper(Context mojContext) 
{
    super(mojContext, DB_NAME, null, DATABASE_VERSION);// 1 it's Database Version
    DB_PATH = mojContext.getApplicationInfo().dataDir + "/databases/";
    this.mContext = mojContext;
}

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
public boolean checkDataBase(){

SQLiteDatabase checkDB = null;

try{
String myPath = DB_PATH + DB_NAME;
checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

}catch(SQLiteException e){

//database does't exist yet.

}

if(checkDB != null){

checkDB.close();

}

return checkDB != null ? true : false;
}
    /*Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }*/

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }
    @Override
    public void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
         mContext.deleteDatabase(DB_NAME);
         try {
            copyDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        }
    } 
```

适配器：

```
public class TestAdapter 
{
    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public TestAdapter(Context context) 
    {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public TestAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public TestAdapter open() throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDbHelper.close();
    }

     public Cursor getTestDataMDPI(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanjaDanskaMDPI WHERE 1 = 1 " + whereClause + " ORDER BY _ID ASC";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
     public Cursor getTestDataHDPI(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanjaDanskaHDPI WHERE 1 = 1 " + whereClause + " ORDER BY _ID ASC";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
     public Cursor getTestDataLogic(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tbl4 " + whereClause + " ORDER BY _ID ASC";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
} 
```

这里只是为了让你们看到这个表存在（它是一个工作表，只是为了尝试这个 onUpgrade 方法）：

![在此处输入图像描述](https://i.stack.imgur.com/iZr3J.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:27:15.580

啊，您的用法实际上是完全错误的：您不能删除数据库文件并期望任何数据库句柄仍然有效。删除文件后，`SQLiteDatabase db`实例不再有效：我很惊讶您甚至没有更早崩溃。

你的技术（删除文件并复制一个新文件）如果不做一些严重的扭曲以确保你重置所有数据库句柄就根本无法工作：如果你想使用`onUpgrade`你想要做的就是做一对`DROP TABLE`/`CREATE TABLE`调用或调用`ALTER TABLE`以应用您的更改。

# android - 使用 Android 的示例 TicTacToe 构建失败（来自命令行）

> ID：16181321
> 
> 赞同：1
> 
> 时间：2013-04-24T00:20:16.007
> 
> 标签：android, command-line, jar, tic-tac-toe

我一直在尝试从命令行构建 TicTacToeLib 和 TicTacToeMain。由于我没有看到每个项目的 Android.mk，我创建了自己的，但在导入包时遇到了麻烦。这是我为 TicTacToeLib 提供的内容：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)
LOCAL_SRC_FILES := $(call all-subdir-java-files)
LOCAL_PACKAGE_NAME := TicTacToeLib
include $(BUILD_PACKAGE)
#LOCAL_MODULE := TicTacToeLib
#LOCAL_MODULE_CLASS := JAVA_LIBRARIES
#include $(BUILD_JAVA_LIBRARY) 
```

尝试构建一个 JAVA 库（假设我可以从构建的 .jar 导入），但与 R.stamp 相关的资源有错误。所以，我恢复到构建一个创建 apk 的包。这是我为 TicTacToeMain 提供的：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)
LOCAL_SRC_FILES := $(call all-subdir-java-files)
LOCAL_PACKAGE_NAME := TicTacToeMain
include $(BUILD_PACKAGE) 
```

我看到的错误是：

> 目标Java：TicTacToeMain (out/target/common/obj/APPS/TicTacToeMain_intermediates/classes) external/TicTacToeMain/src/com/example/android/tictactoe/MainActivity.java:25: com.example.android.tictactoe.library 包确实不存在导入 com.example.android.tictactoe.library.GameActivity；^ external/TicTacToeMain/src/com/example/android/tictactoe/MainActivity.java:26: com.example.android.tictactoe.library.GameView 包不存在导入 com.example.android.tictactoe.library.GameView.State ; ^ 外部/TicTacToeMain/src/com/example/android/tictactoe/MainActivity.java:51：找不到符号符号：类 GameActivity 位置：类 com.example.android.tictactoe。MainActivity Intent i = new Intent(this, GameActivity.class); ^ 外部/TicTacToeMain/src/com/example/android/tictactoe/MainActivity.java:52：找不到符号符号：变量 GameActivity 位置：com.example.android.tictactoe.MainActivity 类 i.putExtra（GameActivity.EXTRA_START_PLAYER，^ 外部/TicTacToeMain/src/com/example/android/tictactoe/MainActivity.java:53: 包状态不存在 startWithHuman ? State.PLAYER1.getValue() : State.PLAYER2.​​getValue()); ^ external/TicTacToeMain/src/com/example/android/tictactoe/MainActivity.java:53: 包状态不存在 startWithHuman ？State.PLAYER1.getValue() : State.PLAYER2.​​getValue());*** [out/target/common/obj/APPS/TicTacToeMain_intermediates/classes-full-debug.jar] 错误 41

最后，我注释掉了所有 R.string.* 用法并构建了一个 JAVA 库（创建了 .jar），但 TicTacToeMain 仍然失败并出现相同的构建错误。真的很感激任何帮助

# ruby-on-rails - 查找数组的交集

> ID：16181335
> 
> 赞同：1
> 
> 时间：2013-04-24T00:21:49.763
> 
> 标签：ruby-on-rails, ruby, arrays

我无法制作一个简单的表格来找到两个数组的交集。最终目标是找到两个电子邮件数组的交集，但现在我只是用整数进行测试。一切都在控制器中工作，如果我在视图中对数组进行硬编码，我会得到正确的结果。下面是我的代码

**Rails 控制台**，一切都是洁净的：

```
1.9.3p374 :011 > _a
 => [1, 2, 3, 4] 
1.9.3p374 :012 > _b
 => [1, 2, 1, 1, 1] 
1.9.3p374 :013 > c = _a & _b
 => [1, 2] 
```

当我尝试从表单传递相同的值时，我得到一个空数组结果（我将两个数组都传递到视图中以确保它们在那里。

**控制器：**

```
 def intersect 
    @array1       = [params[:a]]
    @array2       = [params[:b]]
    @intersection = @array1 & @array2
  end 
```

**查看代码：**

```
Array 1: <%= @array1 %> <br>
Array 2: <%= @array2 %><br>
Intersection: <%=  @intersection %> 
```

**浏览器中的结果：**

```
Array 1: ["1,2,3,4,5"] 
Array 2: ["1,2,2,3,3"]
Intersection: [] 
```

因为我可以让它工作硬编码，所以我确定我正在做一些新的事情！任何帮助都是不受欢迎的！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T00:24:42.593

您的数组每个都包含一个元素，即 string `"1,2,3,4,5"`。您可能想要一个包含 5 个元素的数组 ( `[1,2,3,4,5]`)。您可以通过用逗号[拆分](http://ruby-doc.org/core-2.0/String.html#method-i-split)数组来做到这一点：

```
@array1 = params[:a].split(',')
@array2 = params[:b].split(',')

@intersection = @array1 & @array2
#=> ["1", "2", "3", "4", "5"] 
```

# jquery - 鼠标事件在页面加载时立即触发并且永远不会再次触发的问题

> ID：16181337
> 
> 赞同：0
> 
> 时间：2013-04-24T00:21:55.647
> 
> 标签：jquery, jquery-animate, mouseevent

我正在尝试制作一个弹出菜单，当您将鼠标悬停以显示自身时使用 jquery 动画，然后当您将鼠标移出时它会折叠。我最初是从 hoverIntent 和以下代码开始的：

```
function collapseMenu() {
    $("#myMenu").animate({ "left": "+=50px" }, "slow");
}

function expandMenu() {
    $("#myMenu").animate({ "left": "-=50px" }, "slow");
}

$('#myMenu').hover(expandMenu(), collapseMenu()); 
```

当我加载页面时，菜单向右移动 50 像素，然后向左移动 50 像素。然后当我真正将鼠标悬停在菜单上时，我收到以下控制台错误

> 未捕获的类型错误：无法调用未定义的方法“应用”

在 hoverintent.js 的第 69 和 82 行

所以我只是尝试了 jquery 的 .hover 并得到了相同的结果，没有错误。在那之后，我离题了以下测试：

```
$('#myMenu').mouseenter(alert("mouse entered menu"));
$('#myMenu').mouseleave(alert("mouse left menu")); 
```

现在在页面加载时，我立即收到两个警报……悬停时什么也没有。我已经在 document.ready 和它之外（只是为了好玩）尝试了这些 mouseenter 和 mouseleave 事件，两者都有相同的结果。如果你好奇，这里是我的 html 菜单

```
 <ul id="myMenu" class="nav nav-list">
        <li id="lnkHome" class="active"><a href="#">Home</a></li>
        <li class="nav-header">Issue Reports</li>
        <li id="lnkSoftware" ><a href="#">Software and Apps</a></li>
        <li id="lnkOS" class="disabled"><a href="#">Operating Systems</a></li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:29:04.420

尝试以下代码

```
$('#myMenu').hover(expandMenu, collapseMenu); 
```

`$('#myMenu').hover(expandMenu(), collapseMenu());`实际上立即执行函数并将它们的返回值分配为悬停/退出事件处理程序

# html - 在 Outlook 2007 上呈现 html 时事通讯

> ID：16181339
> 
> 赞同：0
> 
> 时间：2013-04-24T00:22:36.707
> 
> 标签：html, outlook, html-email, newsletter, boilerplate

我对这些东西感到非常沮丧

我正在使用 html 电子邮件样板框架来构建我自己的。从一些测试来看，它在 Outlook 2007 上仍然不能很好地呈现

在这里获取我的代码[http://pastebin.com/nh8R4Lng](http://pastebin.com/nh8R4Lng)

截图![截图 1](https://i.stack.imgur.com/VeVDY.jpg) ![截图 2](https://i.stack.imgur.com/NReko.jpg)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:03:33.840

您需要的所有图像`style="display:block;"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T23:44:04.747

试试这个，这似乎是一个老式的桌子长度/宽度问题。Outlook 2007 不能很好地处理未设置的表格宽度。 [http://pastebin.com/swXTzT19](http://pastebin.com/swXTzT19)

我将一些 td 宽度强制为 30，并使左右边界更长，并进行了一些试金石测试。我觉得很好。

感谢您使用样板。

# wpf - 还有哪些其他因素会影响 WPF 应用程序的外观？

> ID：16181345
> 
> 赞同：0
> 
> 时间：2013-04-24T00:23:26.233
> 
> 标签：wpf, xaml

我制作了我的第一个 WPF 应用程序并将其投入使用。我的工作电脑的显示器最大为 1680 x 1050, 96 dpi, Win 7 系统，而我的家用电脑是 1920 x 1080p, 96 dpi, Win 7。

该应用程序无法在工作计算机上正确显示。文本杂乱无章，“不适合”它应该放在的地方，等等（问题似乎只出在字体大小上）。我读到我在使应用程序支持多种分辨率方面做的几乎所有错误，所以我当然有一些修改要做。

奇怪的是，工作计算机在所有较低分辨率下都显示不正确，而我的家用计算机在所有较低分辨率下都正确显示，包括 1680 x 1050 - 这意味着我无法在我正在使用应用程序的计算机上复制问题。

这是我正在使用的字体，因为这似乎是问题所在：

```
<Setter Property="FontFamily" Value="Linux Libertine G"/> 
```

除了分辨率，还有哪些其他因素会影响我的应用程序的外观？

# java - 交换方法的问题-java

> ID：16181346
> 
> 赞同：1
> 
> 时间：2013-04-24T00:23:30.403
> 
> 标签：java, arrays, indexing, swap

大家好，我目前正在创建一个程序，我想在其中交换索引 2 和 4。我已经完成了代码但是我没有收到输出，当我运行程序时我没有收到错误

这是我目前所拥有的：

```
public class test {
    public static void main(String[] args) {
        int[] intArray = {2,4,6,8,10};
    }

    char[] intArray;
    void swap(int i, int j, int[] arr) {
        int t = arr[2];
        arr[2] = arr[4];
        arr[4] = t;
        System.out.println(intArray);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:26:07.590

你从不打电话`swap`：

```
public static void main(String[] args) {
   int[] intArray = { 2, 4, 6, 8, 10 };
   new test().swap(1, 2, intArray); // use local array
}

// char[] intArray; not needed

private void swap(int i, int j, int[] arr) {
   int t = arr[i];
   arr[i] = arr[j];
   arr[j] = t;
   System.out.println(Arrays.toString(arr)); // print array passed in
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:29:54.557

您实际上从未调用过该`swap`方法，因此请添加到您的`main`方法中：

```
new test().swap(-1, -1, intArray); 
```

或者：

```
test testObj = new test();
testObj.swap(-1, -1, intArray); 
```

将原始数组发送到`PrintWriter`只会给出默认输出`Object.toString`。要获取数组元素的值，请使用`Arrays.toString`. 所以使用：

```
System.out.println(java.util.Arrays.toString(intArray)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:26:30.383

你的`swap`方法看起来不错，但它永远不会被调用。看起来它应该从`main`. 该`main`方法是静态的，并且您没有（或不需要） 的实例`test`，因此请包含`static`在您的`swap`方法中。`swap`在您的方法中添加调用`main`。

此外，您不要使用`i`and `j`in `swap`-- 替换`2`为`i`and `4`with `j`。此外，您永远不会使用`char[] intArray`，它被声明为实例变量；它可以安全地移除。

# windows - colorbox ie8 windows xp 加载问题

> ID：16181349
> 
> 赞同：0
> 
> 时间：2013-04-24T00:23:41.793
> 
> 标签：windows, internet-explorer-8, windows-xp, colorbox

```
<div class="topDivContent">
    <div class="content">
        Sample content Sample content Sample content Sample content
    </div>
</div>
<script type="text/javascript">
    $(function(){
        var displaydiv = '.' + "topDivContent";

        $.colorbox({
            inline : true,
            href : displaydiv,
            innerHeight : 150,
            innerWidth : 650,
            scrolling : false
        });

    });
</script> 
```

我有一个使用 colorbox 插件加载内容的典型问题，在页面加载时我正在尝试加载如上所示的内容。

它在 Windows XP + IE8 中的所有环境中都能正常工作，它一直显示加载符号。你能帮我解决我想念的吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:42:03.100

我只对 IE-8 有类似的格式问题，对我来说有效的是使用正确的`HTML doctype`.

使用`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`并查看是否修复。

# javascript - 使用 jquery、javascript 防止未经授权访问网页

> ID：16181351
> 
> 赞同：-1
> 
> 时间：2013-04-24T00:23:55.677
> 
> 标签：javascript, jquery

比如说，一个人的链接通过电子邮件发送给用户。如果该人已经在他/她的浏览器中登录到该网页，则单击该链接会将他/她带到该页面。但是，如果他/她没有登录，则应要求他/她登录才能访问该页面。有没有办法使用jquery、javascript来实现上述功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:14:23.637

是的。使用 AJAX 和任何您的服务器端语言构建后端身份验证系统。

从那里，开发一种超媒体风格的内容系统，以及一个模块化的、基于“小部件”的应用程序交付模型。

在您对登录的超媒体响应中（加上传递从电子邮件中获得的任何相关路径信息），要么将页面重定向到新页面（基于来自服务器的链接响应），要么下载从服务器请求的小部件（对于您在其中显示媒体的任何应用程序），然后流式传输 AJAX 内容（同样，来自服务器响应指定的 URL）。

就通过身份验证实时向客户端交付内容而言，这与您将要达到的安全性差不多。

如果您要加载报告/图库/游戏/任何内容，并在其上放置一个 div，并要求用户登录，那么聪明的用户可以直接杀死该 div。

如果您包含内容，或包含应用程序组件（JS 文件），甚至包含指向将请求和显示内容的 JS 文件的链接，那么聪明的人将在 20 秒内再次将其分解。

我能看到的唯一方法是有一个共同的请求点，触摸服务器，并有条件地加载您的应用程序，基于“下一步”URL，传递给客户端，基于成功的授权和/或成功完成上一步，加上对每个请求的某种形式的身份验证（基于 REST 的令牌+随机数，或其他）......

这将保留客户端的内容（以及任何可能存在漏洞的应用程序结构），直到您可以保证客户端已被正确授权，并且整个应用程序在多个封闭/沙盒模块中运行，没有直接访问权限彼此，并且仅基于实例访问共享库。

值得这份工作吗？谁知道。

我们是在谈论一个必须在 JavaScript 中运行的 NORAD 核发射 iPhone 应用程序吗？那么不，在接下来的六个月里设计这整件事并不过分。

再一次，一旦一个人离开自己的登录状态并将他们的手机放在桌子上（那么生物特征身份验证也是如此？），所有这些安全性都会失效。

我们是否在谈论您想要阻止人们登录的画廊或折扣优惠，所以您知道只有受邀的人在使用它们？
好吧，那么一个为期 18 个月的项目来设计、开发、调试和部署这样的系统可能会有点矫枉过正。

在这种情况下，也许您可​​以尽最大努力防止普通人窃取您的内容或使用您的降价，并接受那些花时间挖掘和逆向工程的人会找到一种方法得到他们想要的，100 次中有 95 次。

在这种情况下，也许只是在页面顶部放置一个登录 div 就是您要寻找的...

如果您正在处理公司后端、公司财务或最终用户、私人数据或任何类似的事情，那么除了满足收集/显示/存储的法律要求之外，还有多少额外的工作你投入系统的安全性取决于你的公司愿意为此付出多少。

如果它让你感觉更好，有些公司每年支付 60,000-150,000 美元来使用 Adob​​e 的 JS 跟踪/测试程序。这些程序大部分时间都在网页上，任何人都可以看到，只要你知道在哪里看。

所以这并不是一个未知的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T01:59:37.573

是的。通过身份验证（登录），您可以存储一个“loggedIn”cookie，您必须在会话结束时（注销或关闭浏览器）将其删除。您可以使用该 cookie 来检查是否有人登录。如果未登录，则可以显示登录页面并使用 ajax 发送登录请求。顺便说一句，使用这样的混合应用程序不是一个好习惯。最好将 SPA-s 与 REST 服务一起使用，或者在服务器端实现它。

# ruby - 如何在 ruby 中给出一个恒定的函数范围？

> ID：16181352
> 
> 赞同：0
> 
> 时间：2013-04-24T00:23:58.147
> 
> 标签：ruby

我是 Ruby 新手，我想知道如何定义一个范围仅限于函数的常量。

```
def foo(number)
   # I want this to be a constant defined only inside foo
   ABC = 123 
   return number * 123
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:35:48.897

没有办法做到这一点。上面的代码会`dynamic constant assignment`报错，因为没有什么可以保证`foo()`只调用一次。无论如何，Ruby 常量并不是真正的常量。您可以重新分配它们，它只会生成警告并愉快地更改值。

Ruby 是一种动态语言，鸭式语言；你通常不应该依赖解析器/解释器来保证你的恒定性。除了使您的声明靠近其使用范围之外，确定常量的范围并没有真正的好处。您可以将其移至更高的范围。另一种可能有意义的选择是将常量包装在类/模块中以命名它们。它与局部常量并不完全相同，但它可能会澄清代码；从你的小例子中很难看出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T00:43:45.863

你不能这样做，它真的没有任何意义。您的脚本似乎面向*函数式编程*，因为您在函数内声明了一个常量（这实际上是`main`对象的一种方法）。

以更加面向对象的方式思考，您*可以*在类中定义该常量`Object`（将由 继承`main`），使其在该类扩展之后的任何地方都可以访问：

```
class Object
    ABC = 123
    def foo( number ); return number * ABC; end
end 
```

或者更好的是，如果该特定常量仅在特定类或模块中有意义：

```
module/class Bar
    ABC = 123
    def foo( number ); return number * ABC; end
end 
```

# javascript - 删除表行，第一行除外

> ID：16181354
> 
> 赞同：6
> 
> 时间：2013-04-24T00:24:03.820
> 
> 标签：javascript, jquery

我有一个表单，它允许用户通过底行中的按钮添加一个新的表格行，这一切都运行良好。我现在还需要添加功能以拥有一个额外的按钮，以允许他们删除表格行。

我收集最简单的方法是使用：

```
$(this).closest('tr').remove(); 
```

但我无法将其集成到现有功能中。我也只需要“删除”按钮出现在除第一行之外的所有行上（即用户可以删除除第一行之外的所有行）。我在这里设置了一个 jsfiddle 来演示我当前的功能：

[http://jsfiddle.net/fmdataweb/daayf/1/](http://jsfiddle.net/fmdataweb/daayf/1/)

因此，在我的示例中，当用户单击“添加另一个活动”按钮时，它应该像当前一样创建新的表行，但还要添加删除该行的“删除”按钮。我目前已将“删除”按钮硬编码到第一行，因为我现在确定如何使其仅出现在通过“添加新活动”按钮创建的新行中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T08:25:26.953

变化不大

在开始标记中，添加类`addbtn`并`delbtn`隐藏删除按钮

```
<td>
    <input type="button" class="button mt5 addbtn" value="Add another activity" id="button1" name="button2" />
</td>
<td>
    <input type="button" class="button mt5 delbtn" value="Delete" id="deleteRowButton" name="deleteRowButton" style="display: none"/>
</td> 
```

然后

```
$('#lastYear').on('click', '.delbtn', function () {
    $(this).closest('tr').remove()
});

var newIDSuffix = 2;
$('#lastYear').on('click', '.addbtn', function () {
    var thisRow = $(this).closest('tr')[0];
    $(thisRow).find('.delbtn').show();

    var cloned = $(thisRow).clone();
    cloned.find('input, select').each(function () {
        var id = $(this).attr('id');
        id = id.substring(0, id.length - 1) + newIDSuffix;
        $(this).attr('id', id);
    });

    cloned.insertAfter(thisRow).find('input:text').val('');
    cloned.find('.delbtn').hide();
    cloned.find("[id^=lastYearSelect]")
    .autocomplete({
        source: availableTags,
        select: function (e, ui) {

            $(e.target).val(ui.item.value);
            setDropDown.call($(e.target));
        }
    }).change(setDropDown);

    $(this).remove();
    newIDSuffix++;
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Ln3Nk/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-10T12:09:00.537

看看这个！

`if($("table tr").length > 1) {
$(this).parent().parent("tr").remove(); }`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-06T05:05:16.960

尝试这个

在您的删除按钮上

```
$('#lastYear').on('click', '#deleteRowButton', function(e){
   $(this).closest('tr').remove()
}) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-06T06:11:20.637

首先，我将您`Button1`的“添加行”重命名为`addRowButton`，然后将委托方法更改为更具体到来自的 addRowButton

```
$('#lastYear').delegate('input[type="button"]' 
```

喜欢这样：

```
$('#lastYear')delegate('input[type="button"][id^="addRow"]' 
```

然后在委托方法中具体在之后

```
 $(this).attr('id', id); 
```

之后我添加以下内容：

```
 var checkid = $(this).attr('id').substring(0,id.length-1);

 if (checkid == 'deleteRowButto') // the 'deleteRowButto' is not a mistake
     {
         $(this).click(function() {
             $(this).closest("tr").remove(); // I assign an onclick for the delete button in order to remove a specific row
          });
      } 
```

**编辑：**

我做了一些改进，一旦删除了该行，就会显示上一个添加按钮，因此我添加了以下代码：

```
 var showmenow =  $(this).closest("tr").prev().find("td:eq(5)").find("input[type='button']");               
 $(showmenow).show();
             $(this).closest("tr").remove(); 
             }); 
```

而不是删除原始代码中的按钮：

```
$(this).remove();
newIDSuffix++; 
```

我改用隐藏：

```
$(this).hide();
newIDSuffix++; 
```

查看我创建的新[jsfiddle](http://jsfiddle.net/thirdy_dot/grCNv/1/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-11T06:54:23.823

由于您想将第一行用作所有其他行的模板，但不想对所有其他行进行删除，我们应该仅在第一次插入 java 脚本时插入删除。查看这个演示，我修改了你的小提琴这工作。

```
if(cloned.find('input.mt5[value="Delete"]').length==0){
   cloned.find('.mt5').each(function(){
       cloned.append($('<td><input type="button" class="button mt5" value="Delete" id="deleteRow'+newIDSuffix+'" name="deleteRowButton" /></td>'));
   })
} 
```

现在用于处理删除事件

```
$('#lastYear').delegate('input.button[value="Delete"]', 'click', function () {
    var thisrow=$(this).parent().parent();
    var button=thisrow.find("input.button[value='Add another activity']");
    if(button.length>0){
        var buttoncell=button.parent().detach();
        var prevrow=thisrow.prev();
        var prevDelete=prevrow.find('input.button[value="Delete"]');
        var previd=(prevDelete.length>0)?prevDelete[0].id:'deleteRow1';
        buttoncell.children()[0].id=previd.replace('deleteRow','button');
        prevrow.find('input:text:last').parent().after(buttoncell);
    }
    thisrow.remove();
 }); 
```

演示：http: [//jsfiddle.net/vwdXD/2/](http://jsfiddle.net/vwdXD/2/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-11T11:43:07.577

除了这里和那里的小疏忽之外，您在大多数情况下都做对了。我已经为你修复了你的代码，你可以在这里找到它：http: [//jsfiddle.net/ManojRK/86Nec/](http://jsfiddle.net/ManojRK/86Nec/)。

[请尝试通过使用 Code Diff Tool（如http://www.quickdiff.com](http://www.quickdiff.com)）比较您的版本和我的版本来了解更改。它会教给你很多东西。

**所做的更改：**

1.  我使用样式来显示和隐藏您的按钮。这不是唯一的方法。但是由于您正在克隆要添加的行，因此使用样式将使您的 JavaScript 变得简单。这少了很多错误，也不太容易受到变化的影响。
2.  我已经引入了 css 类来区分事件`Add Another Activity`和`Delete`按钮`click`。

希望能帮助你理解。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-05-11T20:02:36.857

我使用了您提供的 jsfiddle，希望能更直接地回答您的问题。我采取的方法是：

1.  检查是否按下了添加或删除按钮
2.  如果按下删除按钮，请检查其删除按钮是否包含在第一行中（实际上是第三行，但它是用户输入的第一行）。如果删除按钮在第一行，什么也不做
3.  如果删除按钮不在第一行，则在前一行创建一个“添加活动”按钮并删除单击按钮的父行。

步骤1：

```
 // let's check whether they clicked the add or delete button
    if ( $(this).val() == 'Add another activity' ) { // if the add button was clicked 
```

步骤 2-3：

```
 if ( $(thisRow).index() == 2 ) { // if it's the first row, don't let them delete
            return false;
        } else { // if it is not the first row remove this row and create an 'add' button in first row
            $(thisRow).prev().find('td:last').prev().append('<input type="button" class="button mt5" value="Add another activity" id="button2" name="button2">');
            $(thisRow).remove();
        } 
```

这是你的小提琴：http: [//jsfiddle.net/daayf/22/](http://jsfiddle.net/daayf/22/)

我在代码中添加了一些注释以提供一些帮助。我的编辑在：

*   275-276 号线
*   300-307 线

希望这会有所帮助！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-24T00:26:43.303

我建议`id`为每一行动态添加一个属性，这样您就可以`id`使用 jQuery 来引用它。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-05-06T04:39:51.493

您可以像这样为按钮设置特定的类

```
<input type="button" class="button mt5 deleteButton" value="Delete" id="deleteRowButton" name="deleteRowButton" /> 
```

并将此代码添加到 jquery

```
$('.deleteButton').on('click',function(){
    $(this).parent().parent().remove();
}); 
```

此 jquery 使用 deleteButton 类（删除按钮）删除输入的祖父母，这是它所在的行。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-24T00:33:45.323

这样做怎么样？

```
$(this).find('tr').length > 0 ? $(this).closest('tr').remove() : ; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-05-06T00:26:45.323

为什么您的“添加新活动”和“删除”具有相同的类“按钮 mt5”？不确定类名是否允许有空格。

您可能想在这里参考我的表格[http://jsfiddle.net/yvonnezoe/nbrSR/1/](http://jsfiddle.net/yvonnezoe/nbrSR/1/)：DI 顶部有一个固定行，后面有一个可以删除的动态行。

我的新行创建如下：

```
var str = '<tr id="' + rowID + '">' + '<td>' + index + '</td><td>' + rowID + '</td><td class="type_row_' + textInput + '">' + type + '</td><td class="feedback number">' + textInput + '</td>' + '<td id="status_'+rowID+'"></td>' + '<td><input type="checkbox" name="CB" id="monitor_' + rowID + '" class="custom" data-mini="true" /><label for="CB"> </label></td><td class="outputRemove">x</td>' + '</tr>';
$('#status_table tr:last').after(str); 
```

删除按钮具有相同的类。因此，单击时可以删除行。

```
$('#status_table').on('click', '.outputRemove', function () {
$(this).closest('tr').remove();
$('#status_table tbody tr').find('td:first').text(function (index) {
    return ++index;
}); 
```

});

希望它能以某种方式激励你:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-29T07:30:53.313

很简单的方法

```
function remove_point_item(th) {
        var tr = $(th).closest("tr");
        var _counter=0;
        $(tr.siblings('tr')).each(function(){
            _counter++;
        });
       if(_counter!=1){           
        tr.remove();
       }

} 
```

# c++ - 是否可以在 C++/SDL 中指定图像/精灵的大小？

> ID：16181355
> 
> 赞同：0
> 
> 时间：2013-04-24T00:24:12.527
> 
> 标签：c++, sdl, 2d-games

我正在创建一个与[此类](http://www.addictinggames.com/action-games/fishy.jsp)似的游戏，并试图弄清楚如何生成随机大小的敌方鱼。据我所知，您在 SDL 中创建的精灵采用您给它们的图像的大小，但我想要做的是能够在使用随机值动态创建鱼时为我的图像指定大小它的大小。

我的作业使用 SDL 和给我们的框架，所以我不能导入任何花哨的库。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:34:42.720

您要查找的内容称为`scaling`. 您可以查看本[教程](http://www.sdltutorials.com/sdl-scale-surface)以轻松将该功能添加到您的游戏中。建议`rotozoom`可以在 中找到，在[此处](http://www.ferzkopp.net/joomla/content/view/19/14/)`SDL_gfx`可用。

如果您走这条路并决定编写自己的代码用于学习目的，请记住手动缩放 a`SDL_Surface`的成本很高，因此您可能应该只在产卵时才这样做，并在生命周期内存储表面鱼。

另一种选择是使用 3D 图形制作 2D 游戏；基本上，您只需以任何您想要的方式拉伸三角形，纹理就会自行调整以填充它。

# android - android app访问php时设置cookies

> ID：16181360
> 
> 赞同：0
> 
> 时间：2013-04-24T00:24:38.487
> 
> 标签：android

（我问这个部分是为了学习目的，我意识到我正在尝试做的事情可能完全错误！）

我的网站上有一个 php 文件，用于处理登录并在登录成功时为用户设置 cookie。如果 setcookie() 失败，我会出错，而不是显示页面的其余部分。

当我尝试使用我的 android 应用程序（使用 HttpURLConnection 和 POST）访问此页面时，setcookie() 失败。我猜这是因为客户端不是浏览器并且无法处理 cookie。

所以首先，我的应用程序是否能够从服务器接收 cookie 并存储它们？如果没有，您如何处理维护与用户的登录会话，这样每次您想从服务器访问数据时都不必发送用户名和密码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:31:01.647

解决方法之前的几点注意事项：

1.  该函数称为 setcookie() 而不是 set_cookie()
2.  Android 浏览器确实支持 cookie afaik，因此您可能应该进一步研究。也许您的 setcookie 调用格式无效？

如果您不能使用 cookie，则解决方法是通过在每个请求上将 cookie 值作为 url 参数传递来模拟您自己的会话机制。

# django - 我的 ALLOWED_HOSTS 设置会阻止 googlebot 吗？

> ID：16181361
> 
> 赞同：0
> 
> 时间：2013-04-24T00:24:38.943
> 
> 标签：django, python-2.7, googlebot, http-host

如果我的 ALLOWED_HOSTS 设置为 .mywebsite.com，这会阻止谷歌抓取我的网站吗？机器人不是有很多 googlebot 吗？对不起，我对这件事有点无知..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:25:31.017

您应该使用网络服务器上的 robots.txt 文件来阻止机器人访问网站。[http://www.robotstxt.org/robotstxt.html](http://www.robotstxt.org/robotstxt.html)

Google bot 不使用“googlebot”主机，而是使用用户代理。如果机器人使用“googlebot”作为主机，那么如果网络服务器配置了多个具有不同主机的网站，它将无法访问您的网站。

# sql - 运行整个 SQL 文件时出错。（甲骨文）

> ID：16181372
> 
> 赞同：0
> 
> 时间：2013-04-24T00:25:08.167
> 
> 标签：sql, oracle

我无法完整地运行我的 SQL 脚本，即使我单独选择它们很容易运行的语句。

我相信问题出在我添加的块上。

其中之一是：

```
begin
for i in (select constraint_name, table_name from user_constraints where constraint_type ='R'
and status = 'ENABLED') LOOP
execute immediate 'alter table '||i.table_name||' disable constraint '||i.constraint_name||'';
end loop;
end; 
```

同样，我可以毫无故障地单独运行每个段，甚至整个文件也可以减去这些代码块。但是当我添加这些代码块时，它不会运行。

编辑：对不起，这里有错误和更好的解释。

日志以“old:begin”开始，然后记录整个脚本而不是运行它。错误本身是：

```
Error report:
ORA-06550: line 11, column 1:
PLS-00103: Encountered the symbol "TRUNCATE" 
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

这是没有 INSERT 语句的代码，因为我知道它们可以正常工作。

```
/*
 * NOTE: For some reason I have yet to figure out, I can not run the Disable Foreign Keys or
 *       Enable Foreign Keys blocks with the entiriry of the script. So I have been having to
 *       disable them, run the truncates, and then enable them. Then, and only then, can I
 *       run the rest of the INSERT statements.
 */

/*
 * My New Cat Project
 */

/*
 * DISABLE FOREIGN KEYS
 *
 * CODE USED FROM: 
 * http://blog.yourdotnetsolution.com/2008/05/how-to-disable-or-enable-all-foreign.html
 */
begin
for i in (select constraint_name, table_name from user_constraints where constraint_type ='R'
and status = 'ENABLED') LOOP
execute immediate 'alter table '||i.table_name||' disable constraint '||i.constraint_name||'';
end loop;
end;

/*
 * TRUNCATE TABLES AND DROP SEQUENCES
 */
TRUNCATE TABLE CARE; 
TRUNCATE TABLE FAVORITES;
TRUNCATE TABLE MEDICINE_PRESCRIBED;
TRUNCATE TABLE MEDICATION;
TRUNCATE TABLE MEDICAL_CONDITIONS;
TRUNCATE TABLE MEDICAL_INFO;
TRUNCATE TABLE SURGERY;
TRUNCATE TABLE TREATMENT;
TRUNCATE TABLE VET_VISIT;
TRUNCATE TABLE VET;
TRUNCATE TABLE CAT_RECEIVED;
TRUNCATE TABLE RELINQUISHER;
TRUNCATE TABLE CAT_FOUND;
TRUNCATE TABLE ADOPTION;
TRUNCATE TABLE ADOPTER;
TRUNCATE TABLE EVENT;
TRUNCATE TABLE DONATIONS;
TRUNCATE TABLE DONOR;
TRUNCATE TABLE MILEAGE;
TRUNCATE TABLE FCP_EXPENSE;
TRUNCATE TABLE EXPENSE_TYPE;
TRUNCATE TABLE FCP_INITIALIZATION;
TRUNCATE TABLE FOSTER_CARE_PROVIDER;
TRUNCATE TABLE ORGANIZATION;
TRUNCATE TABLE CAT_TEMPERAMENTS;
TRUNCATE TABLE CAT;

DROP SEQUENCE CAT_SEQ;
DROP SEQUENCE CAT_TEMPERAMENTS_SEQ;
DROP SEQUENCE ORGANIZATION_SEQ;
DROP SEQUENCE FOSTER_CARE_PROVIDER_SEQ;
DROP SEQUENCE FCP_INITIALIZATION_SEQ;
DROP SEQUENCE EXPENSE_TYPE_SEQ;
DROP SEQUENCE FCP_EXPENSE_SEQ;
DROP SEQUENCE MILEAGE_SEQ;
DROP SEQUENCE DONOR_SEQ;
DROP SEQUENCE DONATIONS_SEQ;
DROP SEQUENCE EVENT_SEQ;
DROP SEQUENCE ADOPTER_SEQ;
DROP SEQUENCE ADOPTION_SEQ;
DROP SEQUENCE CAT_FOUND_SEQ;
DROP SEQUENCE RELINQUISHER_SEQ;
DROP SEQUENCE CAT_RECEIVED_SEQ;
DROP SEQUENCE VET_SEQ;
DROP SEQUENCE VET_VISIT_SEQ;
DROP SEQUENCE TREATMENT_SEQ;
DROP SEQUENCE SURGERY_SEQ;
DROP SEQUENCE MEDICAL_INFO_SEQ;
DROP SEQUENCE MEDICAL_CONDITIONS_SEQ;
DROP SEQUENCE MEDICATION_SEQ;
DROP SEQUENCE MEDICINE_PRESCRIBED_SEQ;
DROP SEQUENCE FAVORITES_SEQ;
DROP SEQUENCE CARE_SEQ;

/*
 * ENABLE FOREIGN KEYS
 *
 * CODE USED FROM: 
 * http://blog.yourdotnetsolution.com/2008/05/how-to-disable-or-enable-all-foreign.html
 */
begin
for i in (select constraint_name, table_name from user_constraints where constraint_type ='R'
and status = 'DISABLED') LOOP
execute immediate 'alter table '||i.table_name||' enable constraint '||i.constraint_name||'';
end loop;
end; 

/*
 * CREATE SEQUENCES
 */

/*
 * CAT
 */
CREATE SEQUENCE CAT_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * CAT TEMPERAMENTS
 */
CREATE SEQUENCE CAT_TEMPERAMENTS_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * ORGANIZATION
 */
CREATE SEQUENCE ORGANIZATION_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * FOSTER CARE PROVIDER
 */
CREATE SEQUENCE FOSTER_CARE_PROVIDER_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * FCP INITIALIZATION
 */
CREATE SEQUENCE FCP_INITIALIZATION_SEQ
    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * EXPENSE TYPES
 */
CREATE SEQUENCE EXPENSE_TYPE_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * FOSTER CARE PROVIDER: EXPENSES
 */
CREATE SEQUENCE FCP_EXPENSE_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * MILEAGE
 */
CREATE SEQUENCE MILEAGE_SEQ

    MINVALUE            1
    INCREMENT BY        1
    CACHE               20;

/*
 * DONORS
 */
CREATE SEQUENCE DONOR_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * DONATIONS
 */
CREATE SEQUENCE DONATIONS_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * EVENTS
 */
CREATE SEQUENCE EVENT_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * ADOPTER
 */
CREATE SEQUENCE ADOPTER_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * ADOPTION
 */
CREATE SEQUENCE ADOPTION_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * CATS FOUND
 */
CREATE SEQUENCE CAT_FOUND_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * RELINQUISHERS
 */
CREATE SEQUENCE RELINQUISHER_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * CATS RECEIVED
 */
CREATE SEQUENCE CAT_RECEIVED_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * VET
 */
CREATE SEQUENCE VET_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * VET VISITS
 */
CREATE SEQUENCE VET_VISIT_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * TREATMENTS
 */
CREATE SEQUENCE TREATMENT_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * SURGERY
 */
CREATE SEQUENCE SURGERY_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * MEDICAL INFO
 */
CREATE SEQUENCE MEDICAL_INFO_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * MEDICAL CONDITIONS
 */
CREATE SEQUENCE MEDICAL_CONDITIONS_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * MEDICATION
 */
CREATE SEQUENCE MEDICATION_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * MEDICINE PRESCIBED
 */
CREATE SEQUENCE MEDICINE_PRESCRIBED_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * FAVORITES
 */
CREATE SEQUENCE FAVORITES_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20;

/*
 * CARE
 */
CREATE SEQUENCE CARE_SEQ

    MINVALUE        1
    INCREMENT BY    1
    CACHE           20; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:32:49.930

由于没有关于从您的块返回的错误代码的信息 - 没有详细的答案，只有一般建议。

*   如果您进行这种操作，请确保 for 循环中的 select 语句实际上返回任何内容。
*   如果您有外键，则必须禁用它们（从外键引用到禁用的主键会导致错误）

立即执行也必须包含有效的 DDL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:42:13.200

`/`从 Oracle 中的 SQL 文件运行时，函数需要结束。例如：

```
begin
for i in (select constraint_name, table_name from user_constraints where constraint_type ='R'
and status = 'ENABLED') LOOP
execute immediate 'alter table '||i.table_name||' disable constraint '||i.constraint_name||'';
end loop;
end;
/ 
```

# c++ - 长而复杂的模板成员方法会影响性能吗？

> ID：16181381
> 
> 赞同：1
> 
> 时间：2013-04-24T00:26:00.267
> 
> 标签：c++, templates

我知道一个长而复杂的内联方法可能会影响性能（尽管一个简短的简单方法可能会提高性能）。但是，模板类的方法*必须*在头文件中定义。他们是*内联*的吗？如果是这样，对表演有什么影响吗？我应该在模板类中有长而复杂的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T00:33:42.540

如果编译器认为它会提高性能，它将内联该函数。如果它认为它不会提高性能，它就不会内联它，即使它是在标题中定义的。如果它实际上没有内联该函数，它还将注意当该函数出现在不同的编译单元中时链接器不会混淆。

即使您声明了一个函数，这同样适用`inline`。

所以编译器会做最好的事情，你不必担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:34:14.827

您应该编写所需的代码并将其留给编译器以找出如何最好地使用它。在头文件中定义模板函数不会使它们内联；编译器可能会内联它们，也可能不会。

# javascript - 持久数据结构：持久索引？

> ID：16181382
> 
> 赞同：0
> 
> 时间：2013-04-24T00:26:04.360
> 
> 标签：javascript, data-structures, functional-programming, lisp

函数式编程使用不可变数据。当您修改某些内容时，您会重新实例化“世界”，尽可能多地为您的增强世界重用以前的化身。

我正在探索 JavaScript 中的 FP。我在 Lisp 中创建了一个类似于 List 的 List 对象。你`cons`是一个新的头到一个现有的尾巴上。在将项目添加到持久列表时，我想创建一个与列表一致的持久索引。因此，如果我`cons`将新联系人添加到联系人列表中，我可能想要索引姓氏和电话号码，以便我可以快速定位项目，而无需有效地启动全表扫描。

问：在 JavaScript 中，可以构建什么样的持久数据结构来提供快速键控访问？

也就是说，我认为这个想法是在构建增强索引时重用以前的索引数据。没有将前一个索引上的所有键克隆到增强索引中，我发现这个问题令人麻木。通过克隆，这将在以编程方式加载数据时浪费大量内存。索引应该是内存高效的，并提供按值快速访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:39:14.000

您可能会使用某种自平衡二叉搜索树，就像使用任何其他语言一样（尽管在许多语言中，已经提供了这样的数据结构）。平均每个插入成本`O(log n)`，包括将创建`O(log n)`新搜索节点的重新平衡。

一种相当简单的数据结构是[展开树](http://en.wikipedia.org/wiki/Splay_tree)。在 Chris Okasaki 的[*Purely Functional Datastructures*](http://books.google.com.pe/books?id=SxPzSTcTalAC)中有一个可爱的扩展树功能实现。事实上，那本书中有很多非常酷的数据结构。强烈推荐。（如果你搜索，你可能会在网上找到冈崎的论文，其中也有展开树的实现。）

# linqpad - LINQPad - 呈现 IEnumerable 时控制列顺序 ?

> ID：16181388
> 
> 赞同：1
> 
> 时间：2013-04-24T00:26:52.333
> 
> 标签：linqpad

我写了一个返回的查询`IEnumerable<Item>`，其中`Item`类有几个不同的成员：

```
public class Item
{
    public string Name { get; private set; }
    public string Type { get; private set; }

    public IEnumerable<Property> Properties;
    public IEnumerable<Item> Items;

    public Item(XElement itemElement)
    {
        Name = itemElement.Attribute("name").Value;
        Type = itemElement.Attribute("type").Value;
        Properties = from property in itemElement.Elements("Property")
                     select new Property(property);

        Items = from item in itemElement.Elements("Item")
                select new Item(item);
    }
} 
```

我不喜欢 LINQPad 选择的将`Item`属性分配给结果表中的列的顺序。我希望列以`Name`, `Type`, `Properties`,的顺序出现`Items`，但 LINQPad 默认显示为`Properties`, `Items`, `Name`, `Type`。有没有办法提示 LINQPad 属性列的顺序应该是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T11:45:24.723

> 我仍然想知道在我不控制 `IEnumerable<FooObject>`.

如果您可以更改您的 Item 类，您可以通过实现 ICustomMemberProvider 来做到这一点（请参阅[http://www.linqpad.net/FAQ.aspx#extensibility](http://www.linqpad.net/FAQ.aspx#extensibility)）

例如

```
public class Item : LINQPad.ICustomMemberProvider
{

    ...

    IEnumerable<string> ICustomMemberProvider.GetNames() 
    {
        return new [] { "Name", "Type", "Properties", "Items" };
    }

    IEnumerable<Type> ICustomMemberProvider.GetTypes ()
    {
        return new [] { typeof (string),  typeof(string) , typeof(IEnumerable<Item>), typeof(IEnumerable<Property>) };
    }

    IEnumerable<object> ICustomMemberProvider.GetValues ()
    {
        return new object [] { this.Name, this.Type, this.Properties, this.Items };
    }                           
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:39:46.370

问题中描述的 LINQPad 排序顺序正在发生，因为 Name 和 Type 是 C# 对象属性，但 Properties 成员和 Items 成员实际上是 C# 对象字段。

默认情况下，LINQPad 似乎在属性之前显示对象字段。

我向 Properties 成员和 Items 成员添加了自动实现的属性：

```
 public string Name { get; private set; }
    public string Type { get; private set; }
    public IEnumerable<Property> Properties { get; private set; }
    public IEnumerable<Item> Items { get; private set; } 
```

进行此更改后，LINQPad 列顺序与类中的成员声明顺序匹配，这正是我最初想要的。

但是，我将把这个问题留在这里并且不接受我自己的答案，因为我仍然想知道`Dump()`在我不控制`IEnumerable<FooObject>`.

# c++ - 寻找参考角的算法

> ID：16181391
> 
> 赞同：0
> 
> 时间：2013-04-24T00:27:30.553
> 
> 标签：c++, algorithm, trigonometry, angle

“参考角”的定义：

> 区间 [0, 2π) 中的角度 ϑ [r]对应于该区间外的角度 ϑ，满足条件
> sin(ϑ) = sin(ϑ [r] ) 和 cos(ϑ) = cos(ϑ [r] )。

例如（为简单起见以度数思考）：

> 参考(390 ^o ) = 30 ^o
> 参考(360 ^o ) = 0 ^o
> 参考(-40 ^o ) = 320 ^o
> 参考(540 ^o ) = 180 ^o

查找参考角度的示例代码是：

```
double FindReferenceAngle(double Angle)
{
    const double TWOPI = 2.0 * 3.1415926535897932384626433832795;
    while(true)
    {
        if (Angle >= TWOPI)
        {
            Angle -= TWOPI;
        }
        else if (Angle < 0)
        {
            Angle += TWOPI;
        }
        else
        {
            return Angle;
        }
    }
} 
```

但是，我不认为这段代码是最优的。例如，如果用户使用非常大的角度值（例如；`FindReferenceAngle(1e10)`）调用它，则在 while 循环中将花费相当长的时间。

有没有其他更有效的算法来找到参考角度，比如内置的标准 C++ 库例程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T00:30:04.927

这应该这样做。

```
double FindReferenceAngle(double Angle)
{
    const double TWOPI = 2.0 * 3.1415926535897932384626433832795;
    return fmod(Angle, TWOPI);
} 
```

尽管将 pi 的定义全球化并将其放在某个标题中可能是一个好主意，或者可能是这样：

```
#define _USE_MATH_DEFINES
#ifdef M_PI
#define TWOPI 2*M_PI
#else
#define TWOPI 2.0*3.1415926535897932384626433832795
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:29:04.500

马特菲利普斯的回答是一个有效且适当的解决方案。
我想添加另一个解决方案，其中`fmod`明确实现了函数的操作。

```
double FindReferenceAngle(double Angle)
{
    const double TWOPI = 2.0 * 3.1415926535897932384626433832795;
    if (Angle >= 0)
    {
        return Angle - TWOPI * floor(Angle / TWOPI);
    }
    else
    {
        return Angle - TWOPI * ceil(Angle / TWOPI);
    }
} 
```

# android - 如何在多部手机上安装 .apk 进行测试

> ID：16181393
> 
> 赞同：1
> 
> 时间：2013-04-24T00:27:39.923
> 
> 标签：android, installation, apk, adb

嗨，我正在为 android 开发一个云应用程序。在开发一行代码后，在每部手机上安装 apk 是一种折磨。有没有办法通过脚本安装它。或者，也许我可以将 apk 放到某个 web/ftp 服务器上，然后我可以从那里以某种方式在每部手机上安装它。至少我不必每次都通过 USB 连接每部手机。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:31:29.447

出于生产目的，我们在我们的计算机和设备上使用 Dropbox，将 APK 复制到其中，然后在我们的每部手机上从 Dropbox 中单击。

编辑：当我过去不得不以编程方式安装 APK 时，我使用了这样的东西（我再也找不到从哪里得到它了）：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + "app.apk")), "application/vnd.android.package-archive");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T00:44:45.553

如果您愿意根植其中一些设备，则可以通过 wifi 执行 adb（除非他们已经内置了该选项）。

您还可以使用 Web 服务器/gmail（或仅用于 Jellybean 的设备的 PushBullet）将您的 apk 传送到这些设备，但该解决方案仍需要用户执行几个额外的步骤。

可以使用您自己的 Google 帐户通过无线方式将应用程序远程安装到您的设备上，而无需用户干预手机本身，但前提是该应用程序已在 Google Play 上发布。我想如果您查看新的 Google+ 登录 api 和/或如果您使用 selenium 脚本从台式计算机的网络浏览器触发安装，那么其中一些过程可以自动化（因为仍然需要用户授权通过桌面本身的网络浏览器，这就是为什么你需要 Selenium 来做这件事）。

# vim - 什么 vim 设置控制这种行为？

> ID：16181397
> 
> 赞同：0
> 
> 时间：2013-04-24T00:28:07.843
> 
> 标签：vim

`hello world`

如果我将光标`o`放在 on之后`hello`并进入插入模式，然后在第二行键入`<CR>`,`world`前面没有空格。但是对于 vanilla vimrc 文件，原来前面的空格字符`world`会保留在换行符上。我不知道是什么设置控制了这种特定的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:38:19.890

万一被`autoindent`定了？这将使行首的空白与前一行匹配，并且由于前一行没有前导空白，vim 将删除空白。（我刚刚测试了这个。）

# prolog - Prolog 中用于逻辑语句的 DCG 解析器

> ID：16181399
> 
> 赞同：0
> 
> 时间：2013-04-24T00:28:44.740
> 
> 标签：prolog, dcg

给定以下语法：

```
BoolExpr ::= BoolConj { "or" BoolConj }.
BoolConj ::= BoolLit { "and" BoolLit }.
BoolLit ::= [ "not" ] BoolPosLit.
BoolPosLit ::= "true"|  "false"|  "(" BoolExpr ")". 
```

我想为上面的语法写一个 DCG 解析器。解析器只需要接受（成功）或拒绝（失败）给定的输入，

这是我所拥有的：

```
 boolepxr([or(O)|BoolExpr]) -->
    ['or'],
    boolconj(O),
    boolexpr(BoolExpr).

boolconj([and(A)|BoolConj]) -->
    ['and'],
    boollit(A),
    boolconj(BoolConj).

boollit([not(N)|BoolLit]) -->
    ['not'],
    boolps(N).

boolps([true(B)|BoolPs]) -->
    ['true'],
    boolexpr(B),
    boolps(BoolPS).

 boolps([false(B)|BoolPs]) -->
    ['false'],
    boolexpr(B),
    boolps(BoolPS). 
```

但是，当我运行这个程序时，我没有得到适当的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:41:08.983

因为 DCG 必须*只*识别输入，所以我简化了：

```
boolexpr --> boolconj, [or], boolexpr.
boolexpr --> boolconj.

boolconj --> boollit, [and], boolconj.
boolconj --> boollit.

boollit --> [not], boolps.
boollit --> boolps.

boolps --> [true].
boolps --> [false].
boolps --> ['('], boolexpr, [')']. 
```

产量

```
?- phrase(boolexpr, [true,or,false,and,not,true]).
true ;
false. 
```

# php - 在 MySQL 中连接两个表

> ID：16181402
> 
> 赞同：-3
> 
> 时间：2013-04-24T00:29:00.407
> 
> 标签：php, mysql, join

大家好，这是我的 SQL 查询：

```
SELECT * 
FROM path JOIN (
    SELECT * FROM invoice WHERE client_Id='$_SESSION[user]'
) ON INVOICE.path_Id=PATH.Id 
```

我想在第一个表中加入两个表必须有`client_Id=$_SESSION[user]`。这两个表必须在 上连接`path_Id`。请帮助我以正确的方式编写此查询。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:33:35.797

试试这个查询

```
SELECT * 
FROM `PATH` JOIN `INVOICE` 
    ON `INVOICE`.`path_Id`=`PATH`.`Id` 
WHERE `INVOICE`.`client_Id`='$_SESSION[user]' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:36:57.510

那行代码有很多错误：

1.  Saintize 用户输入。通过将 $_SESSION 变量直接插入 SQL 查询，您将引入 SQL 注入漏洞以及 XSS 和 CSRF 漏洞。如果有机会，人们可以并且会对您的应用程序做一些讨厌的事情。

2.  永远不要选择比您需要的更多的数据。您真的需要两个表中的所有列吗？

3.  为什么选择两个？A`SELECT * FROM Path p JOIN Invoice i ON i.path_id = p.id WHERE i.client_id = 1 LIMIT 1`将完成这项工作。

# java - 重写 ArrayList 类 - Java

> ID：16181409
> 
> 赞同：0
> 
> 时间：2013-04-24T00:29:36.317
> 
> 标签：java, oop, arraylist

我正在为期末考试而学习，我在期中看一个问题，我错了，老实说，我不知道该怎么做。问题如下：

> 重写 Person 类，以便如果您有一个 Person 对象的 ArrayList ArrayList，您可以使用 Collections 排序方法对其进行排序。sort 方法应该首先按年龄递减，然后按字母顺序（对于相同年龄的人）对列表进行排序。

问题中提供的相同代码（Person 类）如下。

```
public class Person {
   public String name;
   public int age;
} 
```

这是一个中期问题，所以我不得不手写代码。我想知道回答这个问题的有效和正确的方法是什么。非常感谢所有答案或输入。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:40:26.030

我想注意@Kevin Bowersox 的回答，他的回答按年龄增长排序，没有考虑到姓名的第二个排序。用这个替换 compareTo 来解决这两个问题

```
@Override
public int compareTo(Person person)
{
    int ageSort = new Integer(person.age).compareTo(this.age);

    // If the ages aren't the same
    if(ageSort != 0)
    {
        return ageSort;
    }

    // otherwise sort on name alphabetically
    return name.compareTo(person.name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:43:01.707

使`Person`类实现`Comparable`接口并为方法提供实现`CompareTo`。

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class Person implements Comparable<Person> {
    public String name;
    public int age;

    @Override
    public int compareTo(Person person) {
        return new Integer(this.age).compareTo(person.age);
    }

    public static void main(String[] args) {
        Person person = new Person();
        person.name = "Kevin";
        person.age = 28;
        Person person2 = new Person();
        person2.name="Bob";
        person2.age = 40;
        Person person3 = new Person();
        person3.name="Joe";
        person3.age = 90;

        List<Person> people = new ArrayList<Person>();
        people.add(person2);
        people.add(person3);
        people.add(person);

        Collections.sort((List<Person>)people);

        for(Person p:people){
            System.out.println(p.name);
        }
    }

} 
```

# mysql - MySQL VIEW 表

> ID：16181410
> 
> 赞同：0
> 
> 时间：2013-04-24T00:29:40.133
> 
> 标签：mysql, view

我正在努力如何在 MySQL 中创建 VIEW。我有 5 张桌子：

```
- 用户 - 包含用户数据的表
- 组 - 包含组数据的表
- group_membership - 将用户成员资格存储在组中的关系表
- pages - 存储所有页面数据的表
- 权限 - 页面和组之间的关系表，存储按组查看页面的权限。

```

我要创建的视图应该根据用户在组中的成员身份向我显示允许用户查看哪些页面。例子：

```
用户 ID 1，在组 1、2、3 中
第 1 组有权访问第 1、2、3 页
第 2 组有权访问第 1、2、3、4 页
第 3 组有权访问第 1、2、3、4、5、6、7 页

```

我如何创建将包含数据的视图

```
用户 ID | page_ID
--------------------
1 | 1
1 | 2
1 | 3
1 | 4
1 | 5
1 | 6
1 | 7

```

感谢所有可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:39:44.453

这将做你想要的。

```
CREATE OR REPLACE VIEW `user_permissions` AS
SELECT DISTINCT `gm`.`user_ID`, `p`.`page_ID`
FROM `group_memberships` AS `gm`
INNER JOIN `permissions` AS `p` ON `gm`.`group_ID` = `p`.`group_ID`; 
```

但是，您将在此过程中失去索引，并且您的性能将低于标准。

将其作为存储过程或只是一个普通查询可能会更好，例如：

```
SELECT DISTINCT `p`.`page_ID`
FROM `group_memberships` AS `gm`
INNER JOIN `permissions` AS `p` ON `gm`.`group_ID` = `p`.`group_ID`;
WHERE `gm`.`user_ID` = 123; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:42:13.990

像这样的东西应该可以工作：

```
CREATE OR REPLACE VIEW `user_permission_view` AS
SELECT g.user_ID, p.page_ID
FROM group_membership g
JOIN permissions p ON p.group_ID = g.group_ID
GROUP BY g.user_ID, p.page_ID 
```

# ios - UIImageView 的动画怎么这么流畅？（或者：如何让 OpenGL 有效地逐帧为纹理设置动画）

> ID：16181411
> 
> 赞同：3
> 
> 时间：2013-04-24T00:29:41.517
> 
> 标签：ios, animation, opengl-es, uiimageview, opengl-es-2.0

澄清一下，我知道纹理图集在使用多个不同图像时可以提高性能。但我感兴趣的是，当你不这样做时，事情是如何完成的。

我尝试在自定义 OpenGL 中手动制作一些逐帧动画，其中每一帧我绑定一个新纹理并将其绘制在同一个点精灵上。`UIImageView`它可以工作，但与抽象相同的能力相比，它非常慢。我预先加载了所有纹理，但每帧都会重新绑定。相比之下，`UIImageView`接受单独的图像，而不是纹理图集，所以我想它会做类似的事情。

这些是单独加载的 76 张图像，而不是作为纹理图集，每个大约 200 像素正方形。在 OpenGL 中，我怀疑瓶颈是需要在每一帧重新绑定纹理。但是如何`UIImageView`做到这一点，因为我期望有类似的瓶颈？是否`UIImageView`以某种方式在幕后创建地图集，因此不需要重新绑定纹理？由于 UIKit 最终会在其下运行 OpenGL，我很好奇它是如何工作的。

如果有一种更有效的方法来为*多个纹理*设置动画，而不是在 OpenGL 中每帧换出不同的绑定纹理，我想知道，因为它可能暗示 Apple 在他们的框架中正在做什么。

如果我确实在一秒钟内为 60 帧中的每一帧获得了一个新帧，那么在我的 76 帧中制作动画大约需要 1.25 秒。事实上，我使用 UIImageView 得到了这一点，但 OpenGL 大约需要 3 - 4 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:36:46.247

我会说你的瓶颈在别的地方。openGL 更有能力按照您的方式制作动画。由于所有纹理都已加载，并且您每帧只需绑定另一个纹理，因此没有加载时间或其他任何内容。考虑进行比较，我有一个应用程序可以在运行时生成或删除纹理，并且可以在某些时候在 GPU 上加载大量纹理，我必须每帧绑定所有这些纹理（不是每帧 1 个），使用所有从深度缓冲区、模板、多个 FBO、大量用户输入、大约 5 个线程瓶颈到 1 个来处理所有 GL 代码，我对 FPS 完全没有问题。

由于您使用的是 iOS，我建议您运行一些分析器来查看哪些代码负责开销。如果由于某种原因你的时间分析器会告诉你这条线`glBindTexture`太长了，我仍然会说问题出在其他地方。

因此，要回答您的问题，UIImageView 的工作如此顺利是正常且很棒的，并且使用 openGL 实现相同的性能应该没有问题。不过，此时有几件事情需要考虑。你怎么能说图像视图不跳过图像，你可能会设置一个指向不同图像的指针每秒 60 次，但图像视图可能只是每秒要求自己 30 次重绘，并且当它确实使用分配的当前图像时给它。另一方面，使用您的 GL 代码，您正在强制应用程序执行 60FPS 重绘，无论它是否能够这样做。

综合考虑，苹果开发者为你创建了一个叫做显示链接的东西。我相信这正是您想做的事情。显示链接将告诉您帧之间经过了多长时间，通过该键您应该问自己要绑定什么纹理，而不是试图在可能太短的时间范围内强制它们全部。

还有一件事，我已经看到，如果您尝试在大多数 iOS 设备（可能全部）上以 100 FPS 呈现渲染缓冲区，您将只能获得 60 FPS，因为呈现渲染缓冲区的方法将暂停您的线程，如果它已被调用在不到 1/60 秒内。话虽如此，在 iOS 设备上以 60 FPS 的速度显示任何东西是相当不可能的，并且运行 30+ FPS 的所有东西都被认为是好的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T03:16:04.517

“不是纹理图集”对我来说是一个危险信号。

使用纹理图集是一件好事......纹理被加载到内存中一次，然后您只需移动矩形位置即可播放动画。它很快，因为它已经全部在内存中。任何涉及不断加载和重新加载新图像帧的操作都会比这慢。

您必须发布源代码才能获得比这更准确的答案。

# javascript - 如何使 Ul 列表项不可选择

> ID：16181413
> 
> 赞同：7
> 
> 时间：2013-04-24T00:29:51.450
> 
> 标签：javascript, css

我有关注 ul。我想让任何特定的列表项无法选择。

```
<ul>
  <li>ABC</li>
  <li>PQR</li>
  <li>XYZ</li>
</ul> 
```

我怎样才能做到这一点？我尝试设置以下css类，但没有帮助

```
.unselectable {
 -moz-user-select: -moz-none;
 -khtml-user-select: none;
 -webkit-user-select: none;
  -o-user-select: none;
  user-select: none
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:40:54.523

它确实有效，但我认为您可能遇到的问题在于您设置 HTML 的方式。

确保`<li>`您不希望选择的元素具有`unselectable`类，如本示例所示：

```
<li class="unselectable">unselectable</li> 
```

**小提琴：http:**
[//jsfiddle.net/TtLQa/1/](http://jsfiddle.net/TtLQa/1/)

此外，请参阅[此链接](http://caniuse.com/user-select-none)以获取有关`user-select:none`.

* * *

**编辑：**

我刚刚看到您的评论，您想通过 javascript 执行此操作。

使用 jQuery，您可以根据需要轻松添加或删除类：

```
$(element).addClass("unselectable");
$(element).removeClass("unselectable");

//removes it if it is there, or adds it if it is not
$(element).toggleClass("unselectable"); 
```

**小提琴：http:**
[//jsfiddle.net/TtLQa/4/](http://jsfiddle.net/TtLQa/4/)

# nltk - 是否可以加快 Wordnet Lemmatizer？

> ID：16181419
> 
> 赞同：16
> 
> 时间：2013-04-24T00:30:58.720
> 
> 标签：nltk, wordnet, lemmatization

我在 Brown Corpus 上通过 NLTK 使用 Wordnet Lemmatizer（以确定其中的名词是更多地以单数形式还是复数形式使用）。
IE `from nltk.stem.wordnet import WordNetLemmatizer`
`l = WordnetLemmatizer()`

我注意到即使是最简单的查询（例如下面的查询）也需要很长时间（至少一两秒）。
`l("cats")`

大概这是因为每个查询都必须与 Wordnet 建立网络连接？..
我想知道是否有办法仍然使用 Wordnet Lemmatizer 但它的执行速度要快得多？例如，将 Wordnet 下载到我的机器上对我有帮助吗？或者有什么其他建议？

我试图弄清楚 Wordnet Lemmatizer 是否可以做得更快，而不是尝试不同的 lemmatizer，因为我发现它在 Porter 和 Lancaster 等其他工具中效果最好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-01-20T20:42:38.843

它不查询互联网，NLTK 从您的本地机器读取 WordNet。当您运行第一个查询时，NLTK 将 WordNet 从磁盘加载到内存中：

```
>>> from time import time
>>> t=time(); lemmatize('dogs'); print time()-t, 'seconds'
u'dog'
3.38199806213 seconds
>>> t=time(); lemmatize('cats'); print time()-t, 'seconds'
u'cat'
0.000236034393311 seconds 
```

如果您必须对数千个短语进行词形还原，这会相当慢。但是，如果您正在执行大量冗余查询，则可以通过缓存函数的结果来获得一些加速：

```
from nltk.stem import WordNetLemmatizer
from functools32 import lru_cache
wnl = WordNetLemmatizer()
lemmatize = lru_cache(maxsize=50000)(wnl.lemmatize)

lemmatize('dogs') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T21:18:25.633

我已经像这样使用了词形还原器

```
from nltk.stem.wordnet import WordNetLemmatizer # to download corpora: python -m    nltk.downloader all
lmtzr = WordNetLemmatizer() # create a lemmatizer object
lemma = lmtzr.lemmatize('cats') 
```

在我的机器上一点也不慢。无需连接到网络即可执行此操作。

# javascript - 在对象内部调用 JS 函数

> ID：16181422
> 
> 赞同：2
> 
> 时间：2013-04-24T00:31:21.580
> 
> 标签：javascript

我是 JavaScript 中的 OO 新手，并试图制作这个简单的画布演示：

```
var c; // typeof c is the canvas element
function SolarSystem(plane, sun) {

    this.plane = plane; // typeof plane is Canvas Ctxt
    this.sun = sun;

    this.init = function () {
        draw();
    }

    this.render = function () {
        c.height = c.height;
        requestAnimationFrame(this.render);
        this.draw();
    }

    this.draw = function () {
        console.log(1);
    }

} 
```

我想要做的是，为了渲染`SolarSystem`，我想调用它里面的 render() 。我不能从渲染（）调用渲染（），我怎么能不进入`Uncaught TypeError: Type error`控制台呢？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:34:09.293

```
this.init = function () {
    draw();
} 
```

`draw()`应该是`this.draw()`，否则该函数是通过全局`window`对象调用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T00:33:37.040

通常在对象中使用的是这条小线：

```
var self = this; 
```

因为`this`根据您所在的范围进行更改，`self`所以很容易引用原始对象。然后，当您需要`SolarSystem()`对象之外的东西时，您可以使用`self.method()`.

您可能看不到示例中的好处，但是如果/当您开始将作用域应用于您的方法时，您会看到它是如何有用的。例如

```
function MyObject(){
  var self = this;

  var private = function(){
  };
  this.Public = function(){
    // try it at home:
    // call      `self.private();`
    // then call `this.private();`
  };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:40:13.290

好的，正如 Brad Christie 所说，我指的是函数的本地范围，而不是对象 SolarSystem。以下工作完美。再次感谢！

```
function SolarSystem(plane, sun){

this.plane = plane;
this.sun = sun;

var self = this;

this.init = function(){
    self.draw();
}

this.render = function(){
    c.height = c.height; // reset canvas
    requestAnimationFrame(self.render);
    self.draw();
}

this.draw = function(){
    console.log(1);
}
} 
```

# function - AS2：函数未调用，使用计时器和 myFunction()；

> ID：16181423
> 
> 赞同：0
> 
> 时间：2013-04-24T00:31:21.853
> 
> 标签：function, actionscript, timer, actionscript-2

我正在编写一个有趣的游戏。我正在使用一个计时器，当它达到 0 时它应该调用函数（我认为这是游戏的工作方式，对吧？）。无论如何，myFunc；当计时器达到 0 时根本不做任何事情，但它确实做了 timer = TIMER_INIT;。

此外，下面的第一行有 myFunction; 被称为第一件事，这也失败了。

```
myFunction;

// Timer
var timer = TIMER_INIT;
countdown = function() {

    if (timer == 0) {
        myFunc ;
        timer = TIMER_INIT;
    } else {
            timer--; 
    }
}

countdownInterval = setInterval(countdown, TIMER_INTERVAL);

myFunc = function() {
    ab += abI;
    abc += abcI;
    abcd += abcdI;
    myFunction;
}

myFunction= function() {
    a.ab.text = ab + " / 200";
    a.abc.text = abc+ " / 200";
    a.abcd.text = abcd+ " / 200";   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:07:19.807

当你想执行一个函数时，你需要添加 ()。这是您的代码的工作版本（我只是在每个函数中添加了跟踪，以便您可以看到发生了什么）

```
myFunction();

// Timer
var timer = 10;
countdown = function() {
trace('countdown()');
    if (timer == 0) {
        myFunc() ;
        timer = 10;
    } else {
        timer--; 
    }
}

var countdownInterval = setInterval(countdown, 200);

myFunc = function() {
    trace('-->myFunc()');
    myFunction();
}

myFunction= function() {
    trace('-->myFunction()');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:03:34.923

我根本不记得 as2 ，但可能你应该尝试调用这样的函数：

```
myFunction();
myFunc(); 
```

# javascript - jQuery背景更改闪烁

> ID：16181424
> 
> 赞同：4
> 
> 时间：2013-04-24T00:31:24.593
> 
> 标签：javascript, jquery, css, preload

我为我当前的代码创建了一个 jsfiddle。[http://jsfiddle.net/gL5sB/38/](http://jsfiddle.net/gL5sB/38/)

我正在尝试更改滚动事件的正文背景 css。当背景发生变化时，当 css 更新并加载新图像时，它会闪烁。有时它看起来很顺利，然后似乎变得更糟。很奇怪。好奇是否有人知道如何优化？

我正在预加载图像。不知道为什么闪烁。有任何想法吗？

```
$(document).ready(function () {
    switchImage();
});

$(window).scroll(function () {
    switchImage();
});

var pics = []; // CREATE PICS ARRAY

//PRELOAD FUNCTION TO SET UP PICS ARRAY IN MEMORY USING IMAGE OBJECT
function preload() {
    for (i = 0; i < arguments.length; i++) {
        pics[i] = new Image();
        pics[i].src = arguments[i];
        //alert("preload " + arguments[i]);
    }
}
preload(
    'bgImage/100.jpg',
    'bgImage/101.jpg',
    'bgImage/102.jpg',
    'bgImage/103.jpg',
    'bgImage/104.jpg',
    'bgImage/105.jpg',
    'bgImage/106.jpg',
    'bgImage/107.jpg',
    'bgImage/108.jpg',
    'bgImage/109.jpg',
    'bgImage/110.jpg',
    'bgImage/111.jpg',
    'bgImage/112.jpg',
    'bgImage/113.jpg'
);

function switchImage() {
    var s = $(window).scrollTop()/10;
    var index = Math.floor(s / 5);

    $('body').css('background-image', 'url(' + pics[index].src + ')');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T22:36:36.947

为什么不使用一个图像（精灵图像）并移动它`background-position`而不是替换图像？（关于大小 - 您可以根据`background-size`您的情况设置百分比 - 高度将为`1400%`

因为无论如何您都在预加载所有图像-它不会花费您页面加载时间-而且它还可能节省一些时间，因为通过正确的压缩，14 的 1 图像的重量将小于 14 图像的 1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T22:29:08.093

铬没问题。我可以在 IE 中看到闪烁。解决方案在这篇文章的底部。

我怀疑视频版本会比所有图像更快地压缩和加载，但正如@Allendar 绘图所建议的那样，它将是最高效的传输。我建议使用画布或 SVG。

另一种使用图像的方法是将单个组件作为图像或图标字体以绝对定位放置在显示器上，然后在脚本中打开或关闭它们。但这是一个非常复杂的解决方案。

我认为您今天解决问题的最简单和最快的方法就是调整您拥有的解决方案。正如其他人所建议的那样，多图像方法不会非常有效，如果您要采用该路线，至少请确保将 Web 服务器上的缓存标头设置为无限期缓存；

```
Cache-Control: public;
Expires: Mon, 31 Dec 2035 12:00:00 GMT 
```

好的，所以闪烁问题只是 IE 中渲染引擎的错误/效率低下，所以这里有一个使用不同方法的解决方法。

基本上拉伸绝对定位`DIV`在 上`body`，而不是使用`body`本身。事实上，在这种情况下，我们使用多个`DIV`s，每个图像一个，并将它们叠加在另一个之上。您也可以在脚本中创建这些节点。

其次，`DIV`为您的内容添加另一个，并将其覆盖在`body`上面；

```
<body>
    <div id="b100" class="background" style="background-image:url('http://ingodwetrustthemovie.com/bgImage/100.jpg')"></div>
    <!-- rest omitted -->
    <div id="b113" class="background" style="background-image:url('http://ingodwetrustthemovie.com/bgImage/113.jpg')"></div>
    <div id="content">
        <div id="test">test div</div>
        here is some text
    </div>
</body> 
```

一次只显示一个并隐藏其余部分；

```
function switchImage() {
    var s = $(window).scrollTop()/10;
    var index = Math.floor(s / 5);

    $('.background').hide();
    $('.background').eq(index).show();
} 
```

我怀疑与更改 src 属性相比，调整 css 显示选项的闪烁会更少，而且它似乎可以解决问题。

### 这是[小提琴](http://jsfiddle.net/EZU8a/1/)

当然，您可能仍需要优化代码以允许首先显示第一个加载的图像而不是纯背景，但我认为这说明了修复的原理。

您还可以考虑制作一个非常大的 CSS Sprite，将图像捆绑成一个巨大的条带，然后使用`background-position`. 那可能会在`body`标签本身上起作用。当然，这意味着在显示任何图像之前下载一个巨大的文件，但有两个优点；

1.  一张图像（尤其是具有这种相似性的图像）将比单独的每个单独的图像更好地压缩。
2.  使用相同的缓存指令，一旦您第一次获取图像，这只是一个 HTTP/GET/302 周期而不是 13 个周期，因此您的页面加载速度可能会更快。

## SVG

SVG 元素的工作方式与 DOM 非常相似。如果您可以将内容作为 SVG 交付，您可以深入了解图形、定位元素、给它们 ID 等，并像处理任何其他 DOM 元素一样操作它们；

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
   <ellipse id="e1" cy="420" cx="200" rx="420" ry="30" style="fill:3f5566" />
   <ellipse id="e2" cy="420" cx="170" rx="390" ry="20" style="fill:4f5566" />
   <ellipse id="e3" cy="420" cx="145" rx="370" ry="15" style="fill:5f5566" />
   <ellipse id="e4" cy="420" cx="100" rx="370" ry="20" style="fill:6f5566" />
   <ellipse id="e5" cy="420" cx="45"  rx="300" ry="15" style="fill:8f5566" />
</svg> 
```

这是另一个基于滚动隐藏/取消隐藏 SVG 元素的[小提琴。](http://jsfiddle.net/danieljsinclair/Kcah9/)

理想情况下，假设他们已经在“图层”中生成了该图形，请尝试让您的设计师为您提供一个 SVG，其中图层被转换为[组](http://www.w3.org/TR/SVG11/struct.html#Groups)。例如， Adobe Illustrator 可以[做到这一点](http://help.adobe.com/en_US/illustrator/cs/using/WS714a382cdf7d304e7e07d0100196cbc5f-6360a.html)。

然后，您可以根据需要轻松关闭图层/组以创建动画效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-27T22:30:38.000

如果真的不需要图像，您可以为自己创建一些系统，在其中使用画布绘制并不断更新背景。这将是开始；

[JSfiddle](http://jsfiddle.net/Allendar/4pFHC/)

**HTML**

```
<img id="template" src="http://ingodwetrustthemovie.com/bgImage/100.jpg" />
<canvas id="absBg" width="1000px" height="560px"></canvas> 
```

**CSS**

```
body {
    margin: 0px;
}

#template {
    position: absolute;
    width: 1000px;
    height: 563px;
}

#absBg {
    position: absolute;
    /*background: rgba(0, 0, 0, 0.50);*/
    /*height: 100%;*/
} 
```

**JavaScript/jQuery**

```
'use strict';

function drawBlock(ctx, color, line_width, start, lines) {
    ctx.lineWidth = line_width;
    ctx.strokeStyle = color;

    ctx.beginPath();

    ctx.moveTo(start[0], start[1]);

    for (var i = 0; i < lines.length; i++) {
        ctx.lineTo(lines[i][0], lines[i][1]);
    }

    ctx.closePath();
    ctx.stroke();
}

function drawBg() {
    var absBg = document.getElementById('absBg');
    var ctx = absBg.getContext('2d');

    var demo_red = 'red';
    var grey = '#28282';

    var color = demo_red;

    drawBlock(ctx, color, 1, [185, 87], [[205, 75], [226, 98], [207, 110]]);
    drawBlock(ctx, color, 1, [235, 60], [[253, 50], [272, 71], [254, 81]]);
}

$(document).ready(function () {
    drawBg();

    // Scroll trigger
    $(window).scroll(function () {

    });
}); 
```

该演示使用您拥有的实际背景图像作为背景模型，您可以在其中使用画布进行绘制。通过这种方式，您可以模仿您拥有的原始图像的外观。

您可以尝试管理某种“差异数组”，在其中存储哪些块在哪些位置不同。通过这种方式，您可以使用某些参数触发该功能，`scroll`以使其根据该参数更改绘图。

我希望你不“需要”图像本身。用画布绘图比加载大量图像要快得多:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-11T06:36:42.353

这是一个适用于 Firefox 30.0、chrome 35.0、opera 22.0 即 11.0 的解决方案（2014.7.11）：

**第 1 步：在 .htaccess 中添加这些行**：

```
# cache for images
<FilesMatch "\.(png)$">
Header set Cache-Control "max-age=10000, public"
</FilesMatch> 
```

*   **此问题的详细描述以及如何解决它**： [https ://code.google.com/p/chromium/issues/detail?id=102706](https://code.google.com/p/chromium/issues/detail?id=102706)

**STEP 2：添加图片预加载，例如**：

```
var pics = []; // CREATE PICS ARRAY

$(document).ready(function(){
    ...
    preload(
        '/public/images/stars.red.1.star.png',
        '/public/images/stars.red.2.star.png',
        '/public/images/stars.red.3.star.png',
        '/public/images/stars.red.4.star.png',
        '/public/images/stars.red.5.star.png',
        '/public/images/stars.empty.png'
    );
    ...
    $('.rating').on('mousemove', function(event){
        var x = event.pageX - this.offsetLeft;
        var id = getIdByCoord(x); //
        if ($(this).data('current-image') != id) {
            $(this).css('background-image', 'url(' + pics[id].src + ')');
            $(this).data('current-image', id);
        }
    })
    ...
})

...

// PRELOAD FUNCTION TO SET UP PICS ARRAY IN MEMORY USING IMAGE OBJECT
function preload() {
    for (i = 0; i < arguments.length; i++) {
        pics[i] = new Image();
        pics[i].src = arguments[i];
        // alert("preload " + arguments[i]);
    }
} 
```

PS感谢肖恩奥特曼

# unit-testing - 行为类似于 getter/setter 但更像工厂的测试方法

> ID：16181433
> 
> 赞同：0
> 
> 时间：2013-04-24T00:32:17.063
> 
> 标签：unit-testing, phpunit, factory

假设我有一个处理与 MySQL 数据库的连接的小类：

```
class myDatabaseHandler{

  private $_databases;

  public function addDatabase($name, $dsn, $username, $password){
     $this->_databases[$name] = array('dsn' => $dsn, 'username' => $username, 'password' => $password);
     return true;
  }

  public function getDatabase($name){

     $connectionInfo = $this->_databases[$name];
     $database = new Database($connectionInfo['dsn'], $connectionInfo['username'], $connectionInfo['password']);

     $database->doSomeSetup();
     $database->attachMoreThings();

     return $database;
  }
} 
```

我想对这两种方法进行单元测试：

```
class myDatabaseHandlerTest extends \PHPUnit_Framework_TestCase
{
    public function testAddDatabase(){

    }

    public function testGetDatabase(){

    }
} 
```

我该如何测试这两种方法？如果 I `addDatabase()`，最多它会返回一个`Boolean`告诉我操作成功。由于它写入私有财产，我无法确认确实写入了正确的数据。

我觉得使用`getDatabase()`来获取数据库对象并对其进行测试并不完全理想，因为我需要公开`dsn`，`username`并且`password`只是为了测试。此外，`Database`对象可能会将这些值修改为它使用的格式，因此我需要存储原始值仅用于测试。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:29:09.740

当您尝试在同一个地方构造*和*使用对象时，测试肯定会变得棘手。在这种情况下，您既要在方法中构造 a`Database`又要在其上调用方法`getDatabase($name)`。例如，这使得模拟几乎不可能，并且为了获得良好的覆盖率，您的测试需要测试`Database`类提供的功能以确保系统按预期运行。

更好的方法可能是使用适当的工厂作为依赖项。

```
interface iDatabaseFactory 
{
    public function buildDatabase($dsn, $username, $password);
} 
```

然后，您可以模拟数据库工厂和数据库实例本身，以验证它的构造和初始化是否正确：

```
class MockDatabaseFactory implements iDatabaseFactory
{
    public $databaseParams = array();
    public $databaseToReturn = NULL;

    public function buildDatabase($dsn, $username, $password)
    {
        $this->databaseParams['dsn'] = $dsn;
        $this->databaseParams['username'] = $username;
        $this->databaseParams['password'] = $password;
        return $this->databaseToReturn;
    }
}

class myDatabaseHandlerTest extends PHPUnit_Framework_TestCase
{
    public function testAddAndGetDatabaseUsesCorrectDbParameters(){
        $mockDatabaseFactory = new MockDatabaseFactory();
        $dbHandler = new myDatabaseHandler($mockDatabaseFactory);

        // implement MockDatabase according to your interface
        $mockDatabase = new MockDatabase(); 
        $mockDatabaseFactory->databaseToReturn = $mockDatabase;

        $dbHandler.addDatabase("some name", "some dsn", 
                               "some username", "pa$$w0rd");
        $builtDatabase = $dbHandler.getDatabase("some name");

        $this->assertEquals($mockDatabase, $builtDatabase);
        $dbParams = $mockDatabaseFactory->databaseParams;
        $this->assertEquals("some dsn", $dbParams['dsn']);
        $this->assertEquals("some username", $dbParams['username']);
        $this->assertEquals("pa$$w0rd", $dbParams['password']);
    }

    public function testAddAndGetDatabaseInitializesDb(){
        $mockDatabaseFactory = new MockDatabaseFactory();
        $dbHandler = new myDatabaseHandler($mockDatabaseFactory);

        $mockDatabase = new MockDatabase();
        $mockDatabaseFactory.setDatabaseToBuild($mockDatabase);

        $dbHandler.addDatabase("name", "dsn", "user", "pass"); 
        $builtDatabase = $dbHandler.getDatabase("some name");

        $this->assertTrue($mockDatabase->doSomeSetupWasCalled);
        $this->assertTrue($mockDatabase->attachMoreThingsWasCalled);
    }
} 
```

# haskell - Haskell 无法匹配预期的字符类型？

> ID：16181438
> 
> 赞同：0
> 
> 时间：2013-04-24T00:32:59.240
> 
> 标签：haskell, input, io, output

我想要做的是将我已经创建的函数调用到输入输出主函数中。im 调用的函数是一个高阶函数，如下所示：

```
filmsByFan' f = map title $ filter (elem f . fans) testDatabase 
```

这是每当我尝试调用这个高阶函数时吐出错误消息的代码部分：

```
getInt :: IO Int
getInt = do str <- getLine
            return (read str :: Int)

main :: IO ()
main = do putStrLn "Enter 1\. Add Film / 2\. Display all Films / 3\. Display film by Year / 4\. Display film by fan / 5\. Display film by actor and period / 6\. Become Fan: "
          str <- getLine
          if str == "1"
            then do return ()
                else if str == "2"
            then do putStrLn (displayAllFilms' testDatabase "")
                else if str == "3"
                    then do putStrLn "Enter a film year: "
                        filmyear <- getInt
                        putStrLn (filmsByYear' filmyear)  <<< **ERROR HERE** (154:47)
                 else main 
```

直到这里的其余代码都可以正常工作，即如果用户输入“2”，它将运行 displayAllFilms 函数（注意 displayAllFilms 函数不是高阶函数）

是因为该功能是“高阶”，因此会出现此错误吗？

```
Coursework v1.hs:154:47:
    Couldn't match expected type `Char' with actual type `[Char]'
    Expected type: String
      Actual type: [Title]
    In the return type of a call of `filmsByYear''
    In the first argument of `putStrLn', namely
      `(filmsByYear' filmyear)' 
```

任何帮助将非常感激！提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T00:51:55.620

```
Expected type: String 
```

这意味着在程序的这一点上， ghc 期望找到一个类型的表达式`String`（因为第一个参数`putStrLn`必须是 a `String`）。

```
 Actual type: [Title] 
```

这意味着这里实际找到的表达式 ghc`(filmsByYear' filmyear)`具有类型`[Title]`（因为给出的结果`filmsByYear'`是 a `[Title]`）。

如果预期类型和实际类型相同，则不会出现错误。

大概你有，`type Title = String`所以它试图统一失败。（因为，它试图与...统一，但仍然失败。）`String``[String]``type String = [Char]``[Char]``[[Char]]`

解决此问题的可能方法：

*   变成`[String]`a `String`，例如使用[`unlines`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:unlines)

    ```
    putStrLn (unlines (filmsByYear' filmyear)) 
    ```

    您可能更喜欢[`intercalate`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v:intercalate)从 Data.List 使用，具体取决于您希望列表的格式。

*   依次调用`putStrLn`列表中的每个字符串，使用[`mapM_`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:mapM_)

    ```
    mapM_ putStrLn (filmsByYear' filmyear) 
    ```

nb高阶函数`putStrLn`也不是。`filmsByYear'`

# grails - 如何知道 grails 插件是独立运行还是插件何时安装到应用程序中

> ID：16181439
> 
> 赞同：1
> 
> 时间：2013-04-24T00:33:07.207
> 
> 标签：grails, grails-plugin

基本上，我想检索 gsp 中使用的[“pluginContextPath”](http://grails.org/doc/latest/guide/plugins.html#12.3%20Understanding%20a%20Plug-ins%20Structure)变量提供的相同值，但在 groovy 类中。

* * *

班级 {

字符串 pluginCtx = $pluginContextPath

byte[] logo = grailsApplication.getParentContext().servletContext.getResource("${pluginCtx}images/myImage.jpg").bytes;

}

* * *

我知道我不能在 groovy 类中使​​用 $pluginContextPath 变量，但我尝试使用[帖子](https://stackoverflow.com/questions/9235840/grails-plugin-get-plugins-root-or-installed-directory)中建议的东西，但它给了我 dir 完整路径

GrailsPluginUtils.pluginInfos.find { it.name == pluginName }.pluginDir

但我想要的是[pluginContextPath](http://grails.org/doc/latest/guide/plugins.html#12.3%20Understanding%20a%20Plug-ins%20Structure) 变量的作用

“当您在开发模式下运行插件时，资源链接将解析为 /js/mycode.js 之类的内容。但是，当插件安装到应用程序中时，路径将自动更改为 /plugin/example-0.1 之类的内容/js/mycode.js 和 Grails 将确保资源在正确的位置。”

# xml - 在 AS3 中从外部 XML 加载具有状态的图像时遇到问题

> ID：16181445
> 
> 赞同：0
> 
> 时间：2013-04-24T00:33:26.110
> 
> 标签：xml, image, actionscript-3, states

当我在整个应用程序中进入不同的状态时，我使用状态来显示不同类型的媒体。我正在处理图像状态，我可以从我的 XML 中获取数据以显示在我布局的数据网格中，并在单击它时显示我正在查看的图像的名称，但是图像不显示。这是我现在的代码：

```
 <fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <fx:XML id="images" source="img_data/images.xml" />
    <s:XMLListCollection id="imageCollection" source="{images.IMAGE}" />
</fx:Declarations>
<s:HGroup>
    <s:DataGrid id="imageGrid" dataProvider="{imageCollection}" click="onClick()" />

    <s:VGroup height="55">
        <s:Label text="Now viewing: {imageGrid.selectedItem.@name}" />
        <s:Label id="txtPosition" width="91"/>
    </s:VGroup>

</s:HGroup>
<fx:Script>
    <![CDATA[
        import mx.controls.Image;

        public var newImage:Image;
        public var myXML:XML;
        [Bindable]public var myURLLoader:URLLoader = new URLLoader;

        public function onClick():void{
            newImage = new Image();
            newImage.load(new URLRequest(imageGrid.selectedItem.file.toString()));
            newImage.addEventListener(Event.COMPLETE, processXML);

            newImage.source = images.IMAGE.@src;
        }

        public function processXML(e:Event):void{
            myXML = new XML(e.target.data);
                //newImage = new Image();

                newImage.height = 200;
                newImage.width = 400;
                imgGroup.addElement(newImage);

        }

    ]]>
</fx:Script> 
```

我从中提取的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<GALLERY COLUMNS="5" XPOSITION="30" YPOSITION="30" WIDTH="100" HEIGHT="100">
<IMAGE name="Cabin in the Woods" >
<file>img_data/cabin.jpg </file>
</IMAGE>
<IMAGE name="Batman" src="img_data/batman.jpg" >
<file>img_data/batman.jpg</file>
</IMAGE>
<IMAGE name="Christmas Vacation">
<file>img_data/christmasVacation.jpg</file>
</IMAGE>
<IMAGE name="Inception">
<file>img_data/inception.jpg</file>
</IMAGE>
</GALLERY> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:20:37.947

首先，您应该使用 URLLoader 加载 XML，而不是 Image。

```
 public function onClick():void{
        myURLLoader.load(new URLRequest(imageGrid.selectedItem.file.toString()));
        myURLLoader.addEventListener(Event.COMPLETE, processXML);
    } 
```

在从 XML 中实际读取图像之前，不应设置图像的源。

```
 public function processXML(e:Event):void{
        myXML = new XML(e.target.data);
        newImage = new Image();
        newImage.source = myXML.IMAGE[0].file.text();
        imgGroup.addElement(newImage);
    } 
```

我随意放置了 [0]，因为我不知道您想从 XML 中加载哪个 IMAGE。

# mongodb - 防止 mongodb 接受非本地连接

> ID：16181447
> 
> 赞同：2
> 
> 时间：2013-04-24T00:33:36.323
> 
> 标签：mongodb, unix, networking

我在不受信任的环境中运行 MongoDB（运行单个 mongod 实例的机器上的所有内容都是受信任的，其他一切都不是）。结果，我只希望本地运行的东西连接到 mongod 实例。有没有办法阻止 MongoDB 接受任何远程连接，或者更好的是，打开其他人可以尝试连接的端口？

如果这类问题的典型解决方案不是特定于 MongoDB 的（即它依赖于操作系统配置），那么我在 *nix 系统上运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T00:39:59.727

来自[http://docs.mongodb.org/manual/reference/configuration-options/](http://docs.mongodb.org/manual/reference/configuration-options/)：

> `bind_ip` 默认值：所有接口。
> 
> 设置此选项以配置 mongod 或 mongos 进程以绑定并侦听来自此地址上的应用程序的连接。您可以将 mongod 或 mongos 实例附加到任何接口；但是，如果您将进程附加到可公开访问的接口，请实施适当的身份验证或防火墙限制以保护数据库的完整性。

将其设置为只能在内部访问的地址（或者极端情况下，只能由该主机上的进程访问， ex `127.0.0.1`）可能会满足您的要求。

# css - 一个模拟 LCARS（星际迷航）的 CSS 可变宽度问题只是为了好玩

> ID：16181454
> 
> 赞同：0
> 
> 时间：2013-04-24T00:34:15.997
> 
> 标签：css, width, expand, pixels

为了让我的前端 Web 开发技能保持最新，我决定基于星际迷航粉丝熟悉的虚构 LCARS 用户界面创建一个“沙盒/游戏围栏”网站。这是链接。

[http://www.king-con.com/sto/console/](http://www.king-con.com/sto/console/)

如果您看一下，您可能会注意到一些子部分（视图）具有看起来像跋涉的标题，其基本 HTML 是：

```
<div style="display:table;width:100%">
<div style="display:table-row;">

    <div style="display:table-cell;width:15px;background-color:somecolor;border-radius:10px;">FIXED WIDTH (15px)</div>

    <div style="display:table-cell;">WIDTH VARIES WITH HEADER TEXT</div>

    <div style="display:table-cell;background-color:somecolor;border-radius:10px;>WIDTH EXPANDS TO FILL REMAINING SPACE</div>

</div> 
```

ATM，我正在使用服务器端函数来写出这些标头。*它只需要一个参数（文本）并根据文本的字符*长度写出 HTML 。

您可能还会注意到它*并没有真正起作用*，也就是说，它不能非常精确地猜测标题文本的实际*像素宽度，并相应地调整 div 的大小。*

我想知道是否没有客户端，也许是基于 jquery 的方法来精确测量各种标题标题的像素宽度。

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:06:10.170

我相信您最好的选择是使用 CSS 完成所有样式客户端，而不是尝试计算服务器上的文本宽度。

HTML：

```
<div class="container">
   <span class="fixed">FIXED WIDTH (110px)</span>
   <div class="varies">WIDTH VARIES WITH HEADER TEXT</div>
   <div class="right">WIDTH EXPANDS TO FILL REMAINING SPACE</div>
</div> 
```

CSS：

```
.container {
    overflow: hidden; /* clear the float */

}
.fixed {
    height: 50px;
    width: 110px;
    vertical-align:middle;
    float: left;
    border-radius:10px;
    background-color:red;
}
.varies {
    height: 50px;
    float: left;
    border-radius:10px;
    background-color:green;
}

.right {
    height: 50px;
    overflow: hidden;
    background-color: blue;
    border-radius:10px;
} 
```

基于此答案：[如何使 inline-block 元素填充该行的其余部分？](https://stackoverflow.com/questions/5540485/how-to-make-an-inline-block-element-fill-the-remainder-of-the-line)

小提琴在这里：http: [//jsfiddle.net/YRDCF/](http://jsfiddle.net/YRDCF/)

# javascript - 使用 jquery 从 HTML 表中提取数据

> ID：16181456
> 
> 赞同：0
> 
> 时间：2013-04-24T00:34:21.350
> 
> 标签：javascript, jquery, html, jsp

我正在尝试使用 jquery 获取生成的表并从中创建一个对象。我已经查找[了](http://encosia.com/use-jquery-to-extract-data-from-html-lists-and-tables/) [示例](https://stackoverflow.com/questions/13362936/usage-of-jquery-map-function-for-table)，但是当我尝试实现时遇到了一些奇怪的行为。鉴于我的表的这个简化版本（通过 Spring MVC 生成）：

```
<table id="notices"> 
  <thead>
    <tr>
      <td class="columnheader">Order</td>
      <td class="columnheader" style="display: none;">ID</td>
      <td class="columnheader">Title</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="formlabel"><input class="fields" size="2" type="text" value="3"></td>
      <td class="formlabel" style="display: none;">JP-L2913666442781178567X</td>
      <td class="formlabel"><a href="javascript:void(0);" class="editNoticeOpen">*Notice1</a></td>
    </tr>

    <tr>
      <td class="formlabel"><input class="fields" size="2" type="text" value="2"></td>
      <td class="formlabel" style="display: none;">JP-L2913666442760937100X</td>
      <td class="formlabel"><a href="javascript:void(0);" class="editNoticeOpen">Quiz Notice - Formative</a></td>
    </tr>
  </tbody>
</table> 
```

以及我当前脚本的片段：

```
var noticeMap = $('#notices tbody tr').map(function() {
    var $row = $(this);
    return {
      sequence: $row.find(':nth-child(1)').text(),
      noticeUID: $row.find(':nth-child(2)').text()
    };
}); 
```

当我 de[fire]bug 时，noticeMap 看起来像这样：

```
Object { sequence="*Notice1", noticeUID="JP-L2913666442781178567X"}, 
Object { sequence="Quiz Notice - Formative", noticeUID="JP-L2913666442760937100X"} 
```

不知何故`:nth-child(1)`正在检索标题，第三个`td`。我相信这与检索输入的值有关，但我不确定从这里去哪里。可能是因为输入字段在我指定的 td 子项中，所以它不被视为直系后代，所以没有检索到正确的文本？对我来说似乎很奇怪，然后它会跳到第三个 td。唉，我还在用jquery学习，谦虚地请求任何想法和指导。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:52:35.737

你是对的`input`，你必须得到`input`inside then的值`td`，它没有被定义为文本节点，而是作为它自己的元素，因此你必须在 jQuery 选择器中指定子元素。也不`.text()`适用于输入元素，您可以使用`.val()`.

这将有助于您在对象中获得正确的值：

```
$row.find(':nth-child(1) input').val(); 
```

或使用[`.eq()`](http://api.jquery.com/eq/)

```
var noticeMap = $('#notices tbody tr').map(function() {
    var $cells = $(this).children();
    return {
      sequence: $cells.eq(0).children('input').val(),
      noticeUID: $cells.eq(1).text()
    };
}); 
```

或者到具有键/值对的单个对象中：

```
var noticeMap = {};

$('#notices tbody tr').each(function() {
  var $cells = $(this).children();
  noticeMap[$cells.eq(0).children('input').val()] = $cells.eq(1).text();      
}); 
```

我不太确定为什么您最初的尝试会返回 3rd 内的文本`td`。这真的很奇怪。我会修补一下。

**编辑**

在我看来，[`.find()`](http://api.jquery.com/find/)它返回的内容以某种方式很聪明，它似乎意识到调用`.text()`不会在它找到的第一个匹配项（第一个`td`）上返回任何内容，因此它沿着 DOM 向下移动以找到下一个确实具有`:first-child`，它匹配`a`3rd 内的标签`td`，然后它返回该`a`标签的文本。当我删除`a`标题周围的标题，再次`.find()`开始返回`""`时，我认为那是因为在第一个没有返回任何有用的东西之后它找不到另一个匹配项。

在这种情况下使用[`.children()`](http://api.jquery.com/children/)会更安全，因为它只会找到直接后代并且不会沿着 DOM 向下移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:37:30.003

为了获得更好的性能，[`.eq()`](http://api.jquery.com/eq/)请在匹配集上使用：

```
var noticeMap = $('#notices tbody tr').map(function() {
    var $cells = $(this).children();
    return {
      sequence: $cells.eq(0).find('input').val(),
      noticeUID: $cells.eq(1).text()
    };
}); 
```

# xml - Node.JS 接收帖子数据的奇怪行为

> ID：16181460
> 
> 赞同：2
> 
> 时间：2013-04-24T00:34:48.830
> 
> 标签：xml, node.js, http, rest, post

我在 post 请求中将 XML 数据发送到我的 node.js 服务器。服务器设置为接受帖子，并且通过 CURL 运行测试没有问题。现在，我试图通过来自多个 REST 客户端的 POST 请求以及通过 Chrome 中名为 Postman 的插件来获取相同的数据。最终目标是在启动 EXE 文件时将数据接收到服务器。

我遇到的问题是 XML 数据似乎进入并停止在 1439 个字符（总字符接近 3900）。然后它接收完整的 3900 个字符。问题是 XML 解析器将其视为错误的 XML 文档，因为前 1439 个字符正在扼杀语法。我继续测试，但不明白为什么发送了 1439 个字符，然后是完整的 3900 个字符。

此外，这似乎并不总是发生。我已经连续多次从这些来源进行测试，这种行为似乎只是随机发生的。下面列出了我正在使用的完整代码。

```
http.createServer(function (req, res) {
if(req.method=='POST'){
    var body='';
req.on('data', function (data) {
    body +=data;
    body = body.toString();
    var xmlDoc = libxmljs.parseXml(body));
    var status = xmlDoc.get('//Status').text();
    var ticket = xmlDoc.get('//Incident_ID').text();
    console.log(status + " " + ticket);
});
req.on('end', function(){

});
}
else if(req.method=='GET'){

    var url_parts = url.parse(req.url,true);

        spectrum['alarm'] = url_parts.query.AlarmID;
        spectrum['troubleshooter'] = url_parts.query.TroubleShooter;
        spectrum['title'] = url_parts.query.AlarmTitle;
        spectrum['date'] = url_parts.query.CreationDate;
        spectrum['model'] = url_parts.query.ModelName;
        spectrum['mac'] = url_parts.query.MAC;
        spectrum['ip'] = url_parts.query.IP;
        spectrum['severity'] = url_parts.query.Severity;
        spectrum['knowledge'] = url_parts.query.KnowledgeID;

    console.log("Contacted");

    console.log("got varabiles");
    eventEmitter.emit("gotVariables", spectrum);        
}

res.writeHead(200, {'Content-Type': 'text/plain'});
res.end("Request Submitted");

}).listen(1234, "localhost"); 
```

我完全不知道为什么会发生这种情况，并且无法理解为什么它会随机发生。就目前而言，它似乎只发生在长数据上。当我发送一个简单的 500 个字符的 XML 文档时，它 100% 的时间运行良好。

我在使用 CURL 时确实注意到有一个标题显示 Expect: 100-continue。我试图将其放入其他请求的标头中，但无济于事。我可能没有正确使用它，或者 node.js 中可能没有处理某些东西，但我不确定。

希望这为我正在尝试做的事情提供了足够的细节。我感谢任何帮助解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:52:47.167

该`data`事件在数据块进入时被多次触发，您需要通过等待解析`end`事件来等待它们全部被接收。

```
var chunks = [];
req.on('data', function (data) {
  chunks.push(data);
});
req.on('end', function(){
  var body = Buffer.concat(chunks).toString();

  var xmlDoc = libxmljs.parseXml(body));
  var status = xmlDoc.get('//Status').text();
  var ticket = xmlDoc.get('//Incident_ID').text();
  console.log(status + " " + ticket);
}); 
```

# c - 在C中有几个子进程的最佳方法是什么

> ID：16181461
> 
> 赞同：1
> 
> 时间：2013-04-24T00:34:59.327
> 
> 标签：c, multithreading, multiprocessing

从事一个项目，该项目要求`wget`每 20 分钟使用一次从不同位置下载大约 300 张图片。我编写了一个 C 程序，它将所有 Id 和位置的数据库读取到一个数组中。对于数组中的每个条目，我调用外部`wget`命令来下载它。它可以工作但很慢，因为它是一个接一个地做的。

我的想法是使用多进程、多线程或 openMP 来创建几个孩子。任何有关如何执行此操作的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:39:50.013

**多进程**

一个进程中的错误不会使另一个进程崩溃。当您将托管第三方代码（例如插件）时，这特别有用，这就是（以及其他）Google Chrome 采用的方法。缺点是*N*个进程比*N*个线程使用更多的系统资源。

**多线程**

与同等数量的进程相比，使用更少的系统资源。线程编程对许多开发人员来说更容易出错，一个线程中的错误会影响其他线程。

**最佳选择**

对于您正在做的事情，您不太可能看到资源利用率的显着差异。使用您可以快速高质量编写的任何模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:41:12.667

我个人会选择多进程。wget 不需要共享任何内存或通信（除了只有根需要的退出状态），因此线程不会提供任何额外的好处（在我看来）。除了将它们创建为已处理之外，还允许操作系统调度程序最好地决定何时运行每个进程。

# c++ - 在 C++ 中实现固定字节串行协议的最佳实践？

> ID：16181462
> 
> 赞同：1
> 
> 时间：2013-04-24T00:35:01.203
> 
> 标签：c++, linux, serial-port, protocols

我有一个通过串行接口连接到 BeagleBone 计算机的设备。我以简单的二进制格式进行通信，例如

```
|MessagID (1 Byte) | Data (n Bytes) | checksum (2 bytes) | 
```

每个命令的消息长度是固定的，这意味着在接收到命令的第一个字节后知道要读取多少字节。在一些初始设置通信之后，它每 20 毫秒发送一次数据包。

我的方法是使用 termios 或类似串行库的东西，然后开始一个循环这样做（a：

```
while(keepRunning)
{
    char* buffer[256];
    serial.read(buffer, 1)
    switch(buffer[0])
        {
        case COMMAND1:
            serial.read(&buffer[1], sizeof(MessageHello)+2); //Read data + checksum
            if (calculateChecksum(buffer, sizeof(MessageHello)+3) )
            {
                extractDatafromCommand(buffer);
            }
            else
            {
                doSomeErrorHandling(buffer[0]);
            }
            break;
        case COMMAND2:
            serial.read(&buffer[1], sizeof(MessageFoo)+2);
            [...]
    }
} 
```

然后 extractDatafromCommand 将创建一些结构，例如：

```
struct MessageHello
{
    char name[20];
    int version;
} 
```

将所有内容放在自己的读取线程中，并使用信号量（或简单标志）向程序的其他部分发出新数据包的可用性信号。

这是一个可行的解决方案还是有更好的改进（我假设是这样）？

也许制作一个抽象类 Message 并派生其他消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:09:29.620

这真的取决于。两种主要方式将被线程化（就像你提到的那样）和事件。

线程代码很棘手，因为您可以轻松引入竞争条件。你测试了一百万次的代码在工作了几天、几周或几年后偶尔会出错并做错事。很难“证明”事情总是会正确运行。像“i++”这样看似微不足道的东西突然变成了有漏洞的抽象。（看看[为什么 i++ 在单核机器上不是线程安全的？](https://stackoverflow.com/questions/6052768/why-is-i-not-thread-safe-on-a-single-core-machine)）

另一种选择是事件编程。基本上，您有一个在所有文件句柄上执行 select() 的主循环。任何准备好的东西都会被查看，并且您尝试在不阻塞的情况下读取/写入尽可能多的字节。（通过 O_NONBLOCK）。有两个棘手的部分：1）在没有办法返回主循环的情况下，您绝不能进行长时间计算，以及 2）您绝不能进行阻塞操作（内核停止您的进程等待读取或写入） .

在实践中，大多数程序的计算时间不长，而且审核少量代码以阻止调用比审核比赛更容易。（尽管在不阻塞的情况下进行 DNS 比应有的要棘手。）

事件代码的好处是不需要锁定（无需担心其他线程）并且它浪费的内存更少（在您创建大量线程的一般情况下。）

最有可能的是，您想使用串行库。termios 处理只是开销和杂散字节做坏事的机会。

# nhibernate - 管理多个 NHibernate 会话/UnitOfWork

> ID：16181465
> 
> 赞同：1
> 
> 时间：2013-04-24T00:35:32.283
> 
> 标签：nhibernate, fluent-nhibernate, unit-of-work

我对 NHibernate 相当陌生，我正在尝试提出一个很好的模式来使用 NHibernate 会话的工作单元模式，但允许使用不同`Connection Strings`的方式连接到不同的数据库/作为不同的用户。

我倾向于工厂模式，因为我需要它来与 Oracle 和 SQL Server 一起工作。

我正在使用流畅的 NHibernate。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:44:38.300

对于每个连接字符串，您将需要来自不同配置的不同 ISessionFactory。

这是 ISessionFactory 工厂的一个非常粗略的实现。请注意，配置可能在许多方面有所不同（例如在 DLL 范围内），而不仅仅是连接字符串。因此，您可能很快需要将一个整体传递`configSection`给您的`_buildConfiguration`，或者已经`_buildConfiguration`通过自定义 IMyConfigurationBuilder 实现。

```
// The main method to be called with "oracle" or "sqlserver" as parameter
public NHibernate.ISessionFactory BuildSessionFactory(string configName)
{
    return GetConfiguration(configName).BuildSessionFactory();
}

public NHibernate.Cfg.Configuration GetConfiguration(string configName)
{
    switch (configName)
    {
        case "oracle": return _buildConfiguration("connectionstringtoOracleFromApplicationConfig");
        case "sqlserver": return _buildConfiguration("connectionstringtoSqlserverFromApplicationConfig");
    }
    return null;
}

private NHibernate.Cfg.Configuration _buildConfiguration(string connectionString)
{
    var cfg = new Configuration();
    //.
    //.
    cfg.Properties.Add("connection.connection_string", connectionString);
    //.
    //.
    return cfg;
} 
```

希望这会有所帮助

# model-view-controller - extjs 更改图表轴标签颜色

> ID：16181470
> 
> 赞同：0
> 
> 时间：2013-04-24T00:36:25.890
> 
> 标签：model-view-controller, extjs, colors, themes, axes

我有一个带有轴标签的图表，我想将标签的颜色从黑色更改为红色。我看过这里：[http](http://www.sencha.com/learn/drawing-and-charting/) ://www.sencha.com/learn/drawing-and-charting/在“主题”下，我想我可以通过定义自定义主题来做我想做的事情并做这样的事情：

```
axisTitleTop: {
    fill: '#000',
    font: '11px Arial'
},
axisTitleLeft: {
    fill: '#000',
    font: '11px Arial'
},
axisTitleRight: {
    fill: '#000',
    font: '11px Arial'
},
axisTitleBottom: {
    fill: '#000',
    font: '11px Arial'
}, 
```

弄乱轴标题。

**我的问题是：使用 MVC，我在哪里定义我的自定义主题类以及如何包含它？**

**编辑**：我想出了一个更简单的方法来做到这一点（不使用主题），见下文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:42:52.937

请参考示例代码，它将起作用。以下所有代码都需要在控制器中编写。

注意：所有 MyChart.xxxxx 值都写在我的自定义 css 文件中。您可以编写自己的 css 或硬编码该值。

```
/* 
 * Inside init function of controller
*/
this.control({
            'Panel[id = chartPanel]' : {
                afterrender  :   this.onPanelRendered
            }

/*
* This function will be invoked on initial rendering of chart panel
*/
    ,onPanelRendered : function(chartPanel) {
        this.loadPanel(chartPanel);
    }

,loadPanel : function(chartPanel) {
        this.setChartTheme();
        this.updateChartInfo();

    }

/*
     * to set chart custom theme
     */
    ,setChartTheme:function(){
        Ext.define('Ext.chart.theme.myTheme',{
            extend:'Ext.chart.theme.Base'
            ,constructor:function(config){
                this.callParent([Ext.apply({
                    axisTitleTop: {
                        font: MyChart.chartThemeAxisTitleTopFont,
                        fill: MyChart.chartThemeAxisTitleTopFill
                    },
                    axisTitleRight: {
                        font: MyChart.chartThemeAxisTitleFont,
                        fill: MyChart.chartThemeAxisTitleTopFill,
                        rotate: {
                            x:MyChart.chartThemeAxisTitleRotatex,
                            y:MyChart.chartThemeAxisTitleRotatey,
                            degrees: MyChart.chartThemeAxisTitleRotateDegree
                        }
                    },
                    axisTitleBottom: {
                        font: MyChart.chartThemeAxisTitleFont,
                        fill: MyChart.chartThemeAxisTitleTopFill
                    },
                    axisTitleLeft: {
                        font: MyChart.chartThemeAxisTitleFont,
                        fill: MyChart.chartThemeAxisTitleTopFill,
                        rotate: {
                            x:MyChart.chartThemeAxisTitleRotatex,
                            y:MyChart.chartThemeAxisTitleRotatey,
                            degrees: MyChart.chartThemeAxisTitleRotateDegree
                        }
                    }
                },config)]) ;

            }
        });
    }

,updateChartInfo : function() {
        this.updatexChart();
        Ext.getCmp(<Ur panel id>).add(MyChart.xChart);

    }

,updatexChart:function(){

        MyChart.xChart   =    Ext.create('Ext.chart.Chart',{
            ........
            ........
            ........
            ,style  :  
            ,theme  :  'myTheme'   // This is our custom theme
            ,legend : {
                position        :  
                labelFont       :  
            }
            ,store  : 
            ,axes   :[
                {
                    type     :  
                    ,position:  
           ......
           .......
           ....... 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:31:43.440

找到了一种更简单的方法来做到这一点，而无需使用主题。

要配置轴的标题标签颜色，只需将标签标题配置添加到该轴：

```
labelTitle:{
   fill:"#B22222"
} 
```

# filepicker.io - 验证 FPFile 真实性

> ID：16181471
> 
> 赞同：0
> 
> 时间：2013-04-24T00:36:30.070
> 
> 标签：filepicker.io

我在客户端使用 filepicker.io 来获取 FPFile 对象，然后将此对象发送到服务器。服务器如何验证 FPFile 对象是真实的？难道不应该有一个简单的方法来做到这一点，比如说，使用 HMAC 签名吗？我找不到任何文档。

更新：

理想情况下，我想验证该文件是：

1.  使用我的 API 密钥上传。

2.  由在 AJAX 请求中向我发送 FPFile 的同一个人上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T01:44:41.630

最好的方法是验证 FPFile 中的文件选择器 url 和元数据是否与通过 /metadata 端点返回的内容相匹配，例如

[https://www.filepicker.io/api/file/JhJKMtnRDW9uLYcnkRKW/metadata](https://www.filepicker.io/api/file/JhJKMtnRDW9uLYcnkRKW/metadata)

# php - 在 yii 中为小部件创建测试

> ID：16181472
> 
> 赞同：4
> 
> 时间：2013-04-24T00:36:33.320
> 
> 标签：php, unit-testing, yii, phpunit, yii-extensions

我在 Yii 中创建了一个小部件来使用[http://www.highcharts.com/](http://www.highcharts.com/)库显示图形。`CGridView`我的小部件的工作方式与Yii的小部件非常相似。

我知道对于视觉元素，我可以使用 Selenium 进行功能测试，我将拥有它。但是，由于我的小部件的特性（显示 javascript 结果），我在视觉元素上找不到太多问题。

如何编写单元测试以确保显示或加载必要的元素？我将在下面给出一些示例（`CGridView`用作示例）。

官方的单元测试`CGridView`可以在这里找到：[https ://github.com/yiisoft/yii/blob/master/tests/framework/zii/widgets/CGridViewTest.php](https://github.com/yiisoft/yii/blob/master/tests/framework/zii/widgets/CGridViewTest.php)

如您所见，测试仅确保脚本已注册，但是，背后的逻辑如何？例如，这个简单的代码：

```
public function renderTableBody()
{
    $data=$this->dataProvider->getData();
    $n=count($data);
    echo "<tbody>\n";
    echo '<tr><td colspan="'.count($this->columns).'" class="empty">';
    $this->renderEmptyText();
    echo "</td></tr>\n";
    echo "</tbody>\n";
} 
```

没有测试，有什么合乎逻辑的原因吗？我如何为此编写测试？也许用`ob_start`and `ob_end_clean`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T03:38:13.793

PHPUnit 用于服务器端逻辑验证。你不能通过 PHP 运行 JS 代码，所以 PHPUnit 不能用于测试脚本背后的逻辑。如果您想确保您的脚本在客户端正常工作，您可以使用[QUnit](http://qunitjs.com/ "QUnit")。

# ruby-on-rails - 如何在 Ruby/Rails 中构建/运行准备好的语句？

> ID：16181479
> 
> 赞同：0
> 
> 时间：2013-04-24T00:37:22.660
> 
> 标签：ruby-on-rails, ruby, activerecord

我不想使用 ActiveRecord 和模型。有没有办法在 Ruby 中轻松构建和执行准备好的语句？

我浏览了整个网络，似乎找不到一个简单的方法来做到这一点。我知道 ActiveRecord 在您进行插入时会在后端构建它们，但如果可能的话，我想自己生成它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:20:31.657

你可能想看看这些：

[https://github.com/jeremyevans/sequel](https://github.com/jeremyevans/sequel)

或者

[https://github.com/rails/arel](https://github.com/rails/arel)

# ios - 当root是数组然后是字典时plist到tableview

> ID：16181482
> 
> 赞同：0
> 
> 时间：2013-04-24T00:38:07.303
> 
> 标签：ios, arrays, dictionary, plist, tableview

当root是字典时，我在教程之后看到了如何从plist加载tableview的示例和教程，但我必须使用作为数组的plist。plist设置：

```
root  Array
   Item 0  Dictionary
         name String
   Item 1  Dictionary
         name String 
```

...

```
- (void)viewDidLoad
{
    [super viewDidLoad];  

    NSString *path = [[NSBundle mainBundle] pathForResource:@"food" ofType:@"plist"];

    NSArray *tableData = [[NSArray alloc]initWithContentsOfFile:path];
    NSArray *thumbnails = [[NSArray alloc] init];

      for (NSDictionary *dict in tableData){

         NSLog(@"%@",dict); // prints all key value pairs in dictionary

         thumbnails = [dict objectForKey:@"name"];

      }
      NSLog(@"outside %@", thumbnails);  // this prints last value added to thumbnails array 
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }
    NSLog(@"%@", thumbnails);  // this loads last value added to array thumbnails

    cell.textLabel.text = [thumbnails objectAtIndex:indexPath.row];

    return cell;
} 
```

我做错了......它没有加载到我的表格视图中并崩溃。我认为我的 for 循环是错误的，我认为我的 objectAtIndex 是错误的，因为它在该行崩溃了。我非常乐意分享更多信息。我有数据源和 tableview 的委托连接到文件的所有者。我已经测试过 tableview 可以直接将数组加载到其中。请帮忙，我很感激。

编辑：

我在 .m 文件的顶部放置了可变数组缩略图的声明，如下所示：

```
@interface SimpleTableViewController ()
@property (nonatomic, strong) NSMutableArray *thumbnails;
@end 
```

不幸的是，这些更改仍然让我在 cellForRowAtIndexPath 中留下空的缩略图数组

将 @property 放入 .h 文件时相同

编辑：.m 文件（最新代码）

```
#import "SimpleTableViewController.h" 

@interface SimpleTableViewController ()

@end

@implementation SimpleTableViewController

- (void)viewDidLoad
{
    [super viewDidLoad];   

   NSString *path = [[NSBundle mainBundle] pathForResource:@"food" ofType:@"plist"];

   NSArray *tableData = [[NSArray alloc]initWithContentsOfFile:path];
   NSMutableArray *thumbnails = [NSMutableArray array];

   for (NSDictionary *dict in tableData){
       NSLog(@"%@",dict); // prints all key value pairs in dictionary
      [thumbnails addObject:dict[@"name"]];
   }
       NSLog(@"outside %@", thumbnails);   

// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
   // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

   return 50;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:simpleTableIdentifier];
    }
    NSLog(@"other method%@", self.thumbnails);  // this loads last value added to array thumbnails
    cell.textLabel.text = self.thumbnails[indexPath.row];

    return cell;

}

@end 
```

.h 文件

```
#import <UIKit/UIKit.h>

@interface SimpleTableViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> 

@property (strong, nonatomic) NSMutableArray *thumbnails;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:09:53.423

尝试

```
- (void)viewDidLoad
{
    [super viewDidLoad];  

    NSString *path = [[NSBundle mainBundle] pathForResource:@"food" ofType:@"plist"];

    NSArray *tableData = [[NSArray alloc]initWithContentsOfFile:path];

    NSMutableArray *thumbnails = [NSMutableArray array];

      for (NSDictionary *dict in tableData){
         NSLog(@"%@",dict); // prints all key value pairs in dictionary
         [thumbnails addObject:dict[@"name"];
      }
      NSLog(@"outside %@", thumbnails);  // this prints last value added to thumbnails array 
} 
```

编辑 ：

```
@property (nonatomic, strong) NSMutableArray *thumbnails;

- (void)viewDidLoad
    {
        [super viewDidLoad];  

        NSString *path = [[NSBundle mainBundle] pathForResource:@"food" ofType:@"plist"];

        NSArray *tableData = [[NSArray alloc]initWithContentsOfFile:path];

        self.thumbnails = [NSMutableArray array];

          for (NSDictionary *dict in tableData){
             NSLog(@"%@",dict); // prints all key value pairs in dictionary
             [self.thumbnails addObject:dict[@"name"];
          }
          NSLog(@"outside %@", self.thumbnails);  // this prints last value added to thumbnails array 
    }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Initialize Cell

   cell.textLabel.text = self.thumbnails[indexPath.row];

   return cell;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:11:42.430

您的代码有几个问题。

A. 查看提供的 plist 数据，您有一个字典数组。

B. 这一行，将缩略图分配为本地 NSArray。

```
NSArray *thumbnails = [[NSArray alloc] init]; 
```

但是这一行，self.thumbnails 是什么属性呢？它不是上面的缩略图。看起来谎言键@“name”包含一个数组而不是最终对象。

```
self.thumbnails = [dict objectForKey:@"name"]; 
```

# c++ - 我应该如何写一个雄辩的继续？

> ID：16181484
> 
> 赞同：3
> 
> 时间：2013-04-24T00:38:25.860
> 
> 标签：c++, loops

所以它经常出现在我的课程中，我需要能够拥有一个用户可以多次执行操作的程序。

所以我写了类似的东西

```
boolean continue=true;

while (continue) {
    //do code
    boolean isAnswerGood=false;
    while (!isAnswerGood) {
        cout << "Do you wish to continue" << endl;
        string answer;
        getline(cin, answer);
        if (answer=="y") //or something else
            isAnswerGood=true;
        else if (answer=="n") {
            isAnswerGood=true;
            continue=false;
        } else 
            cout << "That wasnt "y" or "n" please type something again" << endl;
    }
} 
```

对于如此简单的事情，这似乎很臃肿并且有很多代码。我愿意在这个问题上跳出框框思考，所以如果有人可以给我一个关于更好解决方案的线索，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:48:52.930

将其分解为单独的功能。（几乎总是回答“我如何写一个雄辩的......？”）

例如：

```
do {
  // something
} while (UserWantsMore());

/////////

bool UserWantsMore() {
  std::string answer = GetAnswer("Continue?");
  while (!GoodAnswer(answer))
    answer = GetAnswer("Please answer 'yes' or 'no'!");
  return IsAnswerYes(answer);
}

bool GoodAnswer(const std::string& answer) {
  return !answer.empty() && (answer[0] == 'y' || answer[0] == 'n');
}

bool IsAnswerYes(const std::string& answer) {
  return !answer.empty() && answer[0] == 'y';
}

std::string GetAnswer(const char* prompt) {
  std::cout << prompt << std::cend;
  std::string answer;
  std::getline(std::cin, answer);
  return answer;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T00:48:45.500

对不起，但那是关于正确数量的代码。与其他一些语言相比，C 和 C++ 相对冗长。

但是，如果这是一个常见问题，您可以将其抽象出来并从中制作一个函数。该功能将与您已经拥有的功能非常相似，但是您可以这样称呼它：

```
boolean again = true;
while (again) {
    // do code
    again = ask_user("Do you wish to continue?", "y", "n");
} 
```

论据`ask_user()`应该是要问的问题，接受的答案是“是”，接受的答案是“否”。可以使用第二个和第三个参数生成错误消息（关于意外输入），因此我们实际上不需要将其传入。

当然，问题可能比这更复杂......如果您的代码将被非英语使用者使用怎么办？如果您需要处理本地化，您可以创建一个基本函数，其中包含传入的所有字符串，包括错误消息，然后创建一个用户使用语言规范调用的包装器。这是一个示例，这次使用 C++ 中的“无限循环”：

```
for (;;) {
    // do code
    if (!ask_user_yesno("en_us"))  // locale: English, USA
        break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T01:47:38.167

如果你只是想用更少的代码让你已经拥有的东西做同样的事情，这将起作用。

```
string answer="y";

while (answer=="y") {
    //do code
    for(;;) {
        cout << "Do you wish to continue" << endl;
        getline(cin, answer);
        if ((answer=="y")||(answer=="n")) break;
        cout << "That wasnt \"y\" or \"n\" please type something again" << endl;
    } 
} 
```

* * *

代码略少，但更模糊：

```
string answer="y";

while (answer!="n") {
    if (answer=="y") {
        //do code
    } else {
        cout << "That wasnt \"y\" or \"n\" please type something again" << endl;
    }
    cout << "Do you wish to continue" << endl;
    getline(cin, answer);
} 
```

* * *

这是一个`<termios.h>`用来获得答案的版本。它使用更多代码，但表现得更“雄辩”。

```
int getch (void)
{
    int c;
    struct termios oldt;
    struct termios newt;
    tcgetattr(STDIN_FILENO, &oldt);
    newt = oldt;
    newt.c_lflag &= ~ICANON;
    tcsetattr(STDIN_FILENO, TCSANOW, &newt);
    c = getchar();
    tcsetattr(STDIN_FILENO, TCSANOW, &oldt);
    return c;
}

bool again (std::string prompt, std::string yes, std::string no)
{
    bool doyes = false;
    bool dono = false;
    for (;;) {
        std::cout << prompt;
        int c = getch();
        std::cout << std::endl;
        doyes = (yes.find(c) != yes.npos);
        dono = (no.find(c) != no.npos);
        if (doyes || dono) break;
        std::cout << "Type [" << yes << "] for yes, or [" << no << "] for no.";
        std::cout << std::endl;
    }
    return doyes;
} 
```

您可以按照其他人的建议使用它：

```
do {
    // the interesting code
} while (again("Do you wish to continue? ", "y", "n")); 
```

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T01:02:05.687

怎么样：

```
void DoYesCode()
{
   // Do the code for the yes stuff...
}

...

do{
    cout << "Do you wish to continue" << endl;
    string answer; 
    getline(cin, answer);
    if (answer=="y")
       DoYesCode();
    else if (answer=="n")
       break;
    else 
       cout << "That wasnt 'y' or 'n' please type something again" << endl;
} while(true); 
```

# c++ - 我不能声明地图

> ID：16181486
> 
> 赞同：1
> 
> 时间：2013-04-24T00:38:46.303
> 
> 标签：c++, compiler-construction, map, iso

所以在我的 cpp 文件中，我试图声明一个映射如下：

```
map<string, vector<myStruct>> myMap; 
```

在我的文件顶部，我写了`using namespace std`，我也有`#include <string>` .

但是我收到了这些奇怪的错误：

错误：ISO C++ 禁止声明没有类型的“地图”

我不知道如何解决它。如果我写`#include <map>`这只会导致编译器吓坏了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:41:10.827

你有`#include <map>`吗？rest 看起来有效，但是如果您的 C++ 标准不是 C++11，您可能需要添加一个空格：

```
#include <map>
#include <vector>
#include <string>
using namespace std;

map<string, vector<myStruct> > myMap;
                           ^^^ 
```

最好不要使用命名空间标准：

```
#include <map>
#include <vector>
#include <string>

std::map<std::string, std::vector<myStruct> > myMap; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:49:13.443

注意，缺少 using 语句；）

```
#include <vector>
#include <string>
#include <map>

#include <iostream>

typedef int myStruct;

std::map<std::string, std::vector<myStruct>> myMap;

int
main()
{
  std::vector<myStruct> testMe = { 1, 2, 3};
  myMap["myTest"] = testMe;
  std::cout << myMap.size() << std::endl;
  return(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:40:25.350

您还应该包括[`<map>`](http://en.cppreference.com/w/cpp/header/map). [`std::map`](http://en.cppreference.com/w/cpp/container/map)通过此标头引入。

此外，[**`using namespace std`**被认为是一种不好的做法](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)。您应该有一个`using`声明或使用名称的前缀`std::`来表示完全限定的标识符：

```
#include <map>
#include <string>
#include <vector>

std::map<std::string, std::vector<myStruct>> myMap; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T00:41:37.957

您需要包含`map`头文件。

```
 #include <map> 
```

同时，如果您不使用 C++11，则需要一个空格：

```
 map<string, vector<myStruct> > myMap;
                           //^^ 
```

# android - 无法将正确的表格行数据传递给下一个活动

> ID：16181488
> 
> 赞同：0
> 
> 时间：2013-04-24T00:38:52.103
> 
> 标签：android, dynamic, row, onclicklistener, android-tablelayout

我对 Android 编程相当陌生，并且已经完成了我的第一个应用程序，除了一个关于从选定的表行传递数据的问题 (onClick)。我在这里进行了研究并尝试了大部分建议，但我显然遗漏了一些关键的东西。我对 getTag/Id 和 setTag/Id 有点困惑，所以也许这就是我出错的地方。

一点背景知识，该表可以从数据库动态填充 1 到 N 行，每一行都是可点击的。单击一行后，我需要将该行的唯一数据传递给下一个活动（使用 Bundle 可以正常工作）。不起作用的是，无论我点击哪一行，我只会将最后一行的数据传递给下一个活动，而不是点击的行的数据。

这是我的一些相关代码，用于将数据添加到行/表并单击...我做错了什么只能获取最后一行的数据？非常感谢任何人帮助我指出正确的方向。

```
 public void addData(ArrayList<Auctions> auctions) {

        prevCity = "";
        currCity = "";
        prevDate = "";
        currDate = "";
        prevTime = "";
        currTime = "";
        prevUnit = "";
        currUnit = "";

        for (Iterator i = auctions.iterator(); i.hasNext();) {
            Auctions p = (Auctions) i.next();

            if (p.getCity().equals(prevCity) && p.getDate().equals(prevDate) && p.getTime().equals(prevTime) && p.getSunit().equals(prevUnit)) {
                //skip to next unique record
            } else {

                /** Create a City TableRow dynamically **/
                row2 = new TableRow(this);
                row2.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));

                /** Creating a TextView to add to the row **/
                tvcity = new TextView(this);
                currCity = p.getCity();
                if (currCity.toString().equals(prevCity)) {
                    tvcity.setText("");
                } else {
                    //create a blank row to separate from previous city entries
                    row1 = new TableRow(this);
                    row1.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
                    tvdummy = new TextView(this);
                    tvdummy.setText("");
                    tvdummy.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
                    row1.addView(tvdummy);
                    auctions_table.addView(row1, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                    // work on the new city data
                    tvcity.setText(p.getCity());
                }

                tvcity.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
                tvcity.setTextColor(getResources().getColor(R.color.red));

                //add TextView data to row
                row2.addView(tvcity);

                // Add the TableRow to the TableLayout
                auctions_table.addView(row2, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                // Create date, time, and unit name row dynamically
                row3 = new TableRow(this);
                row3.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));

                // Create TextViews to add to the Row -- Date and Time
                tvdate = new TextView(this);
                tvtime = new TextView(this);
                tvsunit = new TextView(this);

                currDate = p.getDate();
                currTime = p.getTime();
                currUnit = p.getSunit();

                if ((currDate.toString().equals(prevDate)) && (currTime.toString().equals(prevTime))) {
                    tvdate.setText("");
                    tvtime.setText("");
                } else {
                    tvdate.setText(p.getDate());
                    tvtime.setText(p.getTime());
                }

                if (currUnit.toString().equals(prevUnit)) {
                    tvsunit.setText("");
                } else {
                    tvsunit.setText("Dynamic UNIT");
                    tvsunit.setText(p.getSunit());
                }

                tvdate.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));
                tvdate.setTextColor(getResources().getColor(R.color.blue));

                tvtime.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));
                tvtime.setTextColor(getResources().getColor(R.color.blue));

                tvsunit.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));
                tvsunit.setTextColor(getResources().getColor(R.color.blue));                

                //add TextView data to row
                row3.addView(tvdate);
                row3.addView(tvtime);
                row3.addView(tvsunit);

                row3.setId(t);
                row3.setFocusable(false);
                //row3.setClickable(true);
                row3.setOnClickListener(new View.OnClickListener() {    
                    //public OnClickListener tablerowOnClickListener = new OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            // Get the selected row's data
                            //row3.getId();
                            Bundle basket2 = new Bundle();
                            basket2.putString("ustate", state.getText().toString());
                            basket2.putString("abbrev", abbrev);
                            basket2.putString("ucity", currCity);
                            basket2.putString("uname", currUnit);
                            basket2.putString("auctiondate", currDate);
                            basket2.putString("auctiontime", currTime);

                            Intent StAuctions = new Intent(getApplicationContext(), StorageAuctionDetails.class);
                            StAuctions.putExtras(basket2);
                            StAuctions.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(StAuctions);
                            // Closing screen
                            //finish();
                        }
                    });  
                row3.setBackgroundResource(drawable.list_selector_background);

                // Add the TableRow to the TableLayout
                auctions_table.addView(row3, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));                
            }

            prevCity = currCity;
            prevDate = currDate;
            prevTime = currTime;
            prevUnit = currUnit;
            t++;
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:13:22.293

无法充分解密您的代码。但我建议的是，在您的`onClick()`, 中放入`Log.v("Row id is: ", Integer.toString(v.getId()))`并在 LogCat 中查看是否每次单击时，它都会返回相同的值。

此外，如果我正在编写类似的功能，我可能希望在 中执行行信息的提取`onClick()`，因此信息会从行中提取并即时放入 bundle 中，而不是在迭代器期间将值传递到 bundle 中。就像是：

```
public void onClick(View v) {
    String a;    //extras for bundle
    Bundle basket2 = new Bundle();
    //iterate row's children and assign values to string here
    for(int i = 0; i < v.getChildSize(); i++){
        TextView t = (TextView)v.getChildAt(i);
        //assignment
        basket2.putString("someKey", a);
    }
    //send your intent
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:46:39.653

您将根据激活 onClick 时的变量来获取这些变量：

```
 basket2.putString("ustate", state.getText().toString());
                            basket2.putString("abbrev", abbrev);
                            basket2.putString("ucity", currCity);
                            basket2.putString("uname", currUnit);
                            basket2.putString("auctiondate", currDate);
                            basket2.putString("auctiontime", currTime); 
```

那些被重视的将是你最后一次通过你的迭代。

您需要为每个行条目创建一个新的“篮子”。不是在点击侦听器中，而是在迭代循环中，并让该篮子成为该行的标签，如下所示：

```
row3.setTag(basket2); 
```

# vim - 运行自定义 vim 映射键绑定一次有效，但运行 x 次无效

> ID：16181489
> 
> 赞同：0
> 
> 时间：2013-04-24T00:38:55.750
> 
> 标签：vim

我正在尝试映射 Ctrl-j 键以使用逗号连接两行。我的 .vimrc 文件中有以下行

```
:map <C-j> A<space>,<ESC>J 
```

当我按一次 Ctrl-j 时，这工作正常

```
Before           After
test             test , test
test             test
test 
```

但是当我尝试通过按“2Ctrl-j”一次加入多行时，我得到以下信息

```
Before           After
test             test , , test
test             test
test 
```

我究竟做错了什么？如何将多行加入一个逗号分隔的行？我尝试用 替换`<Esc>`，`<C-[>`但这没有用。

另外，有没有办法参数化连接符号？例如，如果我想映射 Ctrl-k 后跟任何字符以使用指定字符连接两行，那么映射将是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:46:44.857

如果您不介意使用其中一个寄存器，您可以将命令存储在寄存器中。

例如，您可以将以下内容添加到您的 vimrc

```
let @j = "A,\eJ"
nnoremap <C-j> @j 
```

使用寄存器`@j`来`j`存储命令。当您键入一个数字后跟，`@j`否则`<C-j>`您将运行命令 n 次，这将加入以逗号分隔的下 n 行。

* * *

将多条线连接在一起的另一种方法是使用下面的函数。

```
function! CustomJoinLines(delim) range
    for i in range(a:firstline, a:lastline) 
        exec "normal A" . a:delim . "\eJ"
    endfor
endfunction 
```

此功能将使用您传入的分隔符将多行连接在一起。它还将保留`J`通常添加的空间。

要映射此命令，请将函数添加到您的 vimrc 和以下 nnoremaps

```
nnoremap <C-j> :call CustomJoinLines(" ,")<CR>
nnoremap <C-k> :call CustomJoinLines("!")<CR> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:36:57.047

您的方法有缺陷，因为`2<C-j>`：

*   告诉 Vim 在当前行附加逗号 2 次 ( `2A<space>,`)
*   并且`J`不会计数，因此只工作一次（即使这样做，`J`也与......相同`2J`）。

类似的命令序列`A<space>,<ESC>J`也更适合宏。如果您希望您的映射使用计数，您应该在映射的右侧只使用一个命令（最好是 Ex 命令），并且如果可能的话，使用较少“行人”的方法。

这是一个更好的方法：

```
:nnoremap <C-j> :s/\n/ , <CR>
:xnoremap <C-j> :s/\n/ , <CR> 
```

`<C-j>`使用这些映射，您可以`3<C-j>`在正常模式`<C-j>`下毫无问题地进行操作。这是 Vim 在上述三个场景中所做的：

*   正常模式`<C-j>`将 EOL 替换`,`为当前行

    ```
    :s/\n/ , <CR> 
    ```

*   正常模式用这一行和下面的两个`3<C-j>`替换 EOL`,`

    ```
    :.,.+2s/\n/ , <CR> 
    ```

*   视觉模式`<C-j>`将 EOL 替换`,`为视觉选择中的每一行

    ```
    :'<,'>s/\n/ , <CR> 
    ```

如您所见，使用 Ex 命令会自动插入正确的范围，并使您的映射更加可预测。

***编辑***

基本上，当您在 Ex 命令之前使用计数或在可视模式下发出 Ex 命令时，Vim 会自动在命令本身*之前*插入与该计数或可视选择相对应的范围，以节省您的打字时间。

```
3<C-j> 
```

做：

```
3:s/\n/ , 
```

转换为：

```
:.             " from this line
:.,            " to
:.,.+2         " two lines below this line
:.,.+2s/\n/ ,  " do this substitution 
```

# c# - 如何将 iphone 联系人检索到我的 Windows 窗体应用程序 c#？

> ID：16181491
> 
> 赞同：-1
> 
> 时间：2013-04-24T00:39:03.423
> 
> 标签：c#, iphone, windows, contacts

我想成为一个接收 iphone 联系人的程序（适用于 windows 应用程序而不是 ios）并添加新联系人和删除联系人，如 iTools for windows。备份和恢复，删除所有等我可以使用哪个参考？

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:59:26.800

1.  这可能只适用于[越狱](http://en.wikipedia.org/wiki/IOS_jailbreaking)的手机，并为您提供一些机制来向/从设备传输文件，例如[ssh/sftp/scp](http://en.wikipedia.org/wiki/Secure_Shell#File_transfer_protocols_using_SSH)。有关在 C#中使用 SSH 的讨论，请参阅[C# Library for SSH 和 Telnet 。](https://stackoverflow.com/questions/4881587/c-sharp-library-for-ssh-and-telnet)

2.  联系人存储在此位置的 SQLite 数据库中：`/private/var/mobile/Library/AddressBook/AddressBook.sqlitedb`

3.  该文件是一个[sqlite](http://www.sqlite.org/)数据库。请参阅[SQLite 是否有 .NET/C# 包装器？](https://stackoverflow.com/questions/93654/is-there-a-net-c-wrapper-for-sqlite)有关从 C# 访问 SQLite 的更多信息。

# c++ - ptrace 寄存器中返回的异常值

> ID：16181497
> 
> 赞同：1
> 
> 时间：2013-04-24T00:39:20.337
> 
> 标签：c++, ptrace

我有一个任务，我必须使用 ptrace 来跟踪应用程序的系统调用。问题是当我运行程序时，它给了我一些不常见的值，我从寄存器中获得，作为输出。其中一些值是负数。

这是代码：[http](http://pastebin.com/iMXYmqG6) ://pastebin.com/iMXYmqG6 这里是一些示例输出： http: [//pastebin.com/bVa5vnWT](http://pastebin.com/bVa5vnWT)

如果有人能给我一些关于我做错了什么的指示，我将非常感激。

PS 我正在使用 64 位操作系统，但我正在构建 32 位应用程序（这是分配的限制。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T08:32:37.560

当您使用 64 位操作系统时，您必须使用兼容 64 位的寄存器。即，RAX，ORIG_EAX，EBX，EBX .....如果不是，您将获得垃圾值

# analytics - 哪个数据库用于游戏分析？

> ID：16181498
> 
> 赞同：2
> 
> 时间：2013-04-24T00:39:38.113
> 
> 标签：analytics, hbase, hive

我们正在构建一个包含许多游戏的应用程序。孩子们将在玩这些游戏时学习数学。所有用户资料数据、游戏数据和课程/问题数据都存储在应用程序中，并将同步到服务器端的 MySQL 数据库。

还有大量的事件数据我们想要捕捉、分析和改进我们的游戏。这些事件可能是课程的开始，触摸游戏对象，选择正确的游戏对象但错误地瞄准它，正确回答但超时等等。对于孩子们玩的每个游戏，我们预计这将是 100 行。此外，存储的数据将取决于事件的类型。

该数据库应该允许我们分析数据并回答问题，例如哪些游戏对孩子来说很难，哪些课程对孩子来说太容易了，来自某些国家的孩子是否觉得有些课程很难，这些游戏中的每一个能玩多久抓住孩子的注意力等等。

哪个数据库可以让我们存储这么多不同类型的事件，每天扩展到数百万行并允许进行所有这些类型的分析？鉴于数据模型不断变化的性质，NoSQL 似乎是一个显而易见的选择。但是哪一个可以让我们进行所有这些分析。还是我们应该使用 Hadoop / Hive？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:44:31.827

虽然您可以使用 Hadoop/Hive 执行此操作，但您不会获得实时性能，因为 Hive 最适合批处理有点东西。在这种情况下，Hbase 将是更好的选择。您可以创建 OLAP 数据立方体，其维度可以是您指定的信息，例如会话信息、每个孩子的信息等。或者您可以将所有这些信息序列化为 JSON 对象，然后将它们存储在 Hbase 单元中。您也可以将这些事件中的每一个存储在单独的单元格中，但这会占用不必要的空间，并且在取回数据时效率不会那么高。

高温高压

# php - SQL返回“变体对象”如何转换为常规数据

> ID：16181503
> 
> 赞同：0
> 
> 时间：2013-04-24T00:39:59.183
> 
> 标签：php, sql

我是一名网络开发人员，但我对 sql 了解不多，现在我可以连接到服务器没问题但它返回

```
variant Object 
```

但在数据库中，该信息具有数据值。我怎样才能转换它？

```
[0] => Array
    (
        [0] =>      .0000
        [1] => 70042
        [2] => POLLERA LERGA C/CUERO EN CINTO
        [3] => 1
        [4] => 28
        [5] => variant Object

        [6] => INV02
        [7] => 
        [8] =>  
        [9] => variant Object

        [10] => variant Object

        [11] => variant Object

    ) 
```

顺便说一句，我正在与 ADODB.Connection 建立连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:02:39.480

我不得不把

```
(string) 
```

它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T19:11:57.203

请参阅此以获得帮助 - 我将其用作在 php 中处理变体的一种方式。[如何从 PHP 中的 COM 对象返回的多维变量数组中读取？](https://stackoverflow.com/questions/4800728/how-do-you-read-from-a-multidimensional-variant-array-returned-from-a-com-object)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:07:52.143

从[手册](http://php.net/manual/en/class.variant.php)：

> VARIANT 是 COM 的 PHP zval 等价物；它是一个结构，可以包含具有一系列不同可能类型的值。COM 扩展提供的 VARIANT 类允许您更好地控制 PHP 将值传入和传出 COM 的方式。

和：

> PHP 5 采用更简单的方法来处理 VARIANT；在返回值或获取变体属性时，只有当类型之间存在不会导致信息丢失的直接映射时，变体才会转换为 PHP 值。在所有其他情况下，结果将作为 VARIANT 类的实例返回。**您可以通过显式使用强制转换运算符强制 PHP 将变体转换或评估为 PHP 本机类型，或通过打印隐式强制转换为字符串**。您可以使用范围广泛的变体函数对变体执行算术运算，而无需强制转换或冒丢失数据的风险。

您没有发布代码，但这意味着您通常可以打印它：

```
echo $result; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-22T16:24:22.210

我已经为这个问题苦苦挣扎了一段时间，并找到了一个对我有用的解决方案。因此，假设我们需要通过 ADODB 从 MSSQL 数据库中返回每行四个值的记录集。**这一切都归结为你在哪里转换数据类型！**如果您在将（变体）值复制到您选择的变量（主要是一些数组）之前转换数据类型，它将起作用。

**例子：**

```
$buffer = array();

$sql = "SELECT col1, col2, col3, col4 FROM tbl_mydata WHERE col1 > 100";

$rec = OpenRecordset($sql); // connect to db, make your own!

while (!$rec->EOF){

    $buffer[] = array((string)$rec->fields[0], (string)$rec->fields[1], (string)$rec->fields[2], (string)$rec->fields[3]);

    $rec->MoveNext();
}

closeRecordset($rec); 
```

对于 ADOdb 文档，请参见此处的手册（[http://adodb.org/dokuwiki/doku.php?id=v5:userguide:userguide_index](http://adodb.org/dokuwiki/doku.php?id=v5:userguide:userguide_index)）

现在您的**$buffer**数组已准备好字符串类型值。

```
foreach($buffer as ..... blabla... 
```

# html - 如何将页脚保持在页面底部（HTML Javascript CSS）

> ID：16181505
> 
> 赞同：-4
> 
> 时间：2013-04-24T00:40:02.023
> 
> 标签：html, css, sticky-footer

如何将页脚保持在页面底部？这是我的代码：

```
<footer> Copyright 2013 All rights reserved. 
```

就是这样。是否有任何 CSS 可用于将页脚降低到页面底部，因为当我使用`<footer>`代码时，它会停留在中间而不是底部。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T00:47:55.083

你可以只使用CSS：

```
.footer {
    position:fixed;bottom:0;

    width:100%;
    display:block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T01:54:18.413

我用：

```
#footerbox {
height:125px;width:55%;
background: #333;
position:absolute;
bottom:50px;
left:0;
right:0;
margin-left:auto;
margin-right:auto;
color:#FF9966;
font: normal 13px verdana, sans-serif; 
```

我建议将高度设置为您喜欢的任何值，但我会保持它更大以包含所有信息，例如法律资料，联系信息等。然后，对于版权，我使用

```
#copyright {
height:20px;width:55%;
background: #333;
position:absolute;
bottom:50px;
left:0;
right:0;
margin-left:auto;
margin-right:auto;
color:#FFFFFF;
font: normal 13px verdana, sans-serif;
border-top:2px solid #FF9966;
} 
```

希望这会有所帮助。您还可以将宽度设置为您想要的任何值，像素或百分比。如果这是您想要的，将它连接到底部并不难。要使版权与较大的页脚重叠，只需使用

```
.class{
clear:both;
} 
```

在 CSS 的顶部，然后像这样清除 HTML 中的 P 标签

```
<div id="copyright">
<p class="clear">&copy herp derp</p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:50:49.780

1) 给出`<body>`100% 的高度

```
body { height:100%; } 
```

2) 假设 HTML 结构如下：

```
<div id="container">
  some content
</div>
<footer>
  Copyright 2013 All rights reserved.
</footer> 
```

，并假设您`<footer>`的`40px`身高，将其添加到`#container`：

```
#container { min-height:100%; padding-bottom:40px; margin-bottom:-40px; } 
```

# asp.net - 特定于实例的购物车会话

> ID：16181511
> 
> 赞同：0
> 
> 时间：2013-04-24T00:40:54.387
> 
> 标签：asp.net, c#-4.0, shopping-cart

奇怪 - 会话 - Inproc - 模式使用 cookie 名称 asp_net 会话 id，超时 20，在客户端之间共享，不确定！！！session 对于每个客户端应该是唯一的，但它是在客户端之间共享的！

在我的 asp.net 应用程序中，购物车会话已在请求之间共享，不知道是如何发生的，它应该因请求而异，IIS 中的每个请求都应该有每个会话，但 IIS 中的所有请求都是共享的通过本次会议`public class PODCart {

```
#region Properties

public List<PODCartItem> Items { get; private set; }

#endregion

#region Singleton Implementation

public static readonly PODCart Instance;

static PODCart()
{
    if (HttpContext.Current.Session["C"] == null)
    {
        Instance = new PODCart();
        Instance.Items = new List<PODCartItem>();
        HttpContext.Current.Session["C"] = Instance;
    }
    else
        Instance = (PODCart)HttpContext.Current.Session["C"];
}

protected PODCart() { } 
```

}`

尽管单例实现已经完成，但确实需要尽快知道修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:55:34.390

您定义了一个单例类，并将其分配给每个会话。当然，它会使用相同的。

看起来 PODCart 不应该是单例。

# php - 根据其值更改返回的 $_POST 值

> ID：16181518
> 
> 赞同：3
> 
> 时间：2013-04-24T00:41:19.990
> 
> 标签：php

当我`print_r`返回一个数据数组时。

```
print_r($_POST); 
```

我的输入字段是标准地址信息和患者 ID：

```
Array ( [patient_id] => this [Last] => that [First] => Ted [ADDRESS1] => dey
[DOB] => [email] => [insurance_id] => [Phone] => [State] => CA [Zip] => 91236
[Status] => 3 [select_top] => 17 ) 
```

对于状态，它通常输入为 1、2 或 3。

*   1 等于铅
*   2 等于激活
*   3 等于不活动

如何更改 POST 值，以便在输入 3 时将其返回为 Inactive 或 2 返回为 Active？

是否可以进行`foreach`循环并将值更改为别名或其他内容？

```
foreach($_POST as $key => $val){
    if($key == '3') $val = Inactive;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T00:46:16.950

你可以使用一个[`switch`语句](http://uk1.php.net/manual/en/control-structures.switch.php)。无需使用`foreach`循环：

```
switch($_POST['status']) {
    case 1: $_POST['status'] = 'Lead'; break;
    case 2: $_POST['status'] = 'Active'; break;
    case 3: $_POST['status'] = 'Inactive'; break;
    default: $_POST['status'] = 'Huh?';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T00:58:20.553

而不是操纵`$_POST`超级全局，我宁愿从一组*已知*的有效条目中查找值。例如

```
$statusValues = array(
    1 => 'Lead',
    2 => 'Active',
    3 => 'Inactive'
);

if (!array_key_exists($_POST['status'], $statusValues)) {
    throw new UnexpectedValueException($_POST['status']);
}
$status = $statusValues[$_POST['status']]; 
```

# java - 判断一个类的超类是否实现了java中的某个接口

> ID：16181520
> 
> 赞同：0
> 
> 时间：2013-04-24T00:41:27.367
> 
> 标签：java, inheritance, instanceof

如果我错了，请告诉我，但根据我的经验，instanceof 调用并不能满足我的需要。

我有一个实现接口并显式覆盖接口中所有方法的抽象类。我有这个类的一个子类。如何判断子类是否是接口的实例？

```
public interface IAnimal {
    public void eat();
} 
```

* * *

```
public abstract class Dog implements IAnimal {
    @Override
    public void eat(){
        //eat things
    }

    public abstract void bark();
} 
```

* * *

```
public class Beagle extends Dog {
    @Override
    public void bark(){
        //specific bark
    }
} 
```

* * *

所以我有一个 Beagle 的实例，我如何确定它是否是 IAnimal 的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:46:13.993

你可以做一个

```
IAnimal.class.isAssignableFrom(Beagle.class) 
```

或者

```
IAnimal.class.isAssignableFrom(someObjectInstance.getClass()); 
```

甚至是接口作品的实例

```
if (object instanceof IAnimal) { } 
```

# sqlite - What is the defined behavior of SQLite when interleaving statements that affect each other?

> ID：16181521
> 
> 赞同：1
> 
> 时间：2013-04-24T00:41:30.967
> 
> 标签：sqlite

In SQLite if I prepare a `SELECT` statement and begin stepping through it, then before the last row of the results is reached I execute another statement that has an effect on the `SELECT` statement that I am stepping through, what is the expected result?

I can't find anything in the SQLite documentation about what is supposed to happen but it seems like an extremely common case when programming in a multi-threaded environment.

Below is a c++ file that can be compiled and run on Windows to demonstrate the situation.

```
#include "stdafx.h"
#include "sqlite3.h"
#include <Windows.h>
#include <iostream>
#include <Knownfolders.h>
#include <Shlobj.h>
#include <wchar.h>
#include <comdef.h>

using namespace std;

int exec_sql(sqlite3 *db, const char* sql)
{
    char *errmsg;
    int result = sqlite3_exec(db, sql, NULL, NULL, &errmsg);
    if (result != SQLITE_OK) {
        cout << errmsg << endl;
        return -1;
    }

    return 0;
}

int _tmain(int argc, _TCHAR* argv[])
{
    cout << "Running jsqltst with SQLite version: ";
    cout << sqlite3_libversion();
    cout << endl;

    PWSTR userhome;

    if (!SUCCEEDED(SHGetKnownFolderPath(FOLDERID_Profile, NULL, NULL, &userhome))) {
        cout << "Failed getting user home dir\n";
        return -1;
    }

    wcout << "User home: " << userhome << endl;

    wchar_t *ws1 = userhome, *ws2 = L"\\test.sqlite";
    wstring dbpath_str(ws1);
    dbpath_str += wstring(ws2);
    _bstr_t dbpath(dbpath_str.c_str());

    cout << "DB path: " << dbpath << endl;

    sqlite3 *db;

    int result = sqlite3_open_v2(dbpath, &db, SQLITE_OPEN_READWRITE|SQLITE_OPEN_CREATE, NULL);
    if (result != SQLITE_OK) {
        cout << sqlite3_errmsg(db) << endl;
        return -1;
    }

    const char * create_stmt = "CREATE TABLE IF NOT EXISTS atable (id INTEGER PRIMARY KEY, name TEXT, number INTEGER);";
    if (exec_sql(db, create_stmt) != 0) {
        return -1;
    }

    const char * delete_stmt = "DELETE FROM atable;";
    if (exec_sql(db, delete_stmt) != 0) {
        return -1;
    }

    const char * insert_stmt = "INSERT INTO atable (name,number) VALUES ('Beta',77),('Alpha',99);";
    if (exec_sql(db, insert_stmt) != 0) {
        return -1;
    }

    sqlite3_stmt* select_ss;
    const char * select_stmt = "SELECT * FROM atable;";
    result = sqlite3_prepare_v2(db, select_stmt, -1, &select_ss, NULL);
    if (result != SQLITE_OK) {
        cout << sqlite3_errmsg(db) << endl;
        return -1;
    }

    int i = 0;
    boolean gotrow;
    do {
        result = sqlite3_step(select_ss);
        gotrow = result == SQLITE_ROW;
        if (gotrow) {
            i++;
            cout << "I got a row!" << endl;

            if (i == 1) {
                if (exec_sql(db, insert_stmt) != 0) {
                    return -1;
                }
            }
        }
    } while (gotrow);

    cout << "Last result: " << result << ", errstr: " << sqlite3_errstr(result) << endl;

    result = sqlite3_finalize(select_ss);
    if (result != SQLITE_OK) {
        cout << sqlite3_errmsg(db) << endl;
        return -1;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:21:28.940

SQLite 对同一事务中的并发语句的行为既没有记录也没有定义。

如您所见，当`SELECT`的游标尚未到达表的该部分时，可能会看到新插入的记录。但是，如果 SQLite 需要为排序或分组创建一个临时结果表，则该表中的后续更改将不会出现在该结果中。您是否有临时表可能取决于查询优化器做出的决定，因此这通常是不可预测的。

如果多个线程访问同一个连接，SQLite 将在每次`sqlite3_step`调用时锁定数据库。这可以防止数据损坏，但是您仍然会遇到自动事务在其最后一个活动语句结束时结束的问题，并且`COMMIT`如果有其他活动语句，显式事务将失败。

多线程程序最好每个线程使用（至少）一个连接。

# html - Absolutizing an image url with a ".."

> ID：16181522
> 
> 赞同：2
> 
> 时间：2013-04-24T00:41:34.067
> 
> 标签：html, image, tritium

I have an HTML document I'm transforming with an image whose source url looks like this:

```
"../foo/bar/baz.png" 
```

I'm using a tritium function to absolutize image source urls, but the ".." seems to be stumping it. It's prepending the hostname, etc, but when it does, it adds one too many layers.

So for example, the correct URL of the image is:

```
"www.host.com/foo/bar.png" 
```

But the page on which it appears is at `"www.host.com/site/baz/page.html"`

The source of the image in the original html is therefore `"../foo/bar.png"`

But the absolutized result I'm getting is: `"www.host.com/site/foo/bar.png"`

In other words it's going up the file tree to "/site/", but it needs to be going up one more. I don't really see how it even works on the original page without another ".." How should I be handling the ".." in the url?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:47:03.203

`..`意味着向上遍历一个级别；您使用的是相对路径，而不是您应该使用的绝对路径。删除点：

`<img src="/foo/bar.png">`将从域的根目录加载图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T01:12:20.527

`src="/foo/bar.png"`和之间有很大的不同`src="foo/bar.png"`（注意第一个双引号后的斜线）

第一个指向[http://example.com/foo/bar.png](http://example.com/foo/bar.png)没关系。
然而，第二个（没有开始的斜杠）是**相对 URL**，因此输出路径取决于图像出现的文件。

这就是为什么你得到“www.host.com/site/foo/bar.png”（**相对于文件路径**上一级）。

两种解决方案：
1）`src="/foo/bar.png"`或
2）`src="../../foo/bar.png"`

我总是推荐第一种方法，因为即使在您移动文件之后，您也不必更改绝对 URL。（我学得很辛苦）

PS这条规则也适用于CSS文件。（例如在指定背景图片的URL时）如果使用绝对路径，当你改变CSS文件的目录时，你就不用撞墙了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T00:24:41.333

当您在 Moovweb 项目中时，我建议您在使用该功能*之前处理有问题的 src。*`absolutize()`

有没有一种简单的方法可以使用 Tritium 选择图像？我建议这样做，然后操作 src 属性：

```
$("./img[@id='']") {
  attribute("src", "/foo/bar.png")
} 
```

在此之后，您应该能够使用该`absolutize()`功能并且 src 将正确呈现。

# debugging - 在 QT Creator 中运行调试器时处理“停止”发送的信号

> ID：16181526
> 
> 赞同：3
> 
> 时间：2013-04-24T00:41:50.653
> 
> 标签：debugging, qt-creator, exit, signal-handling, sigterm

在 QT Creator（在 Linux 机器上）中正常运行我的程序时，当我点击“停止”按钮时，我能够处理 SIGTERM 信号并优雅地关闭我的软件。但是，当我在调试模式下运行并点击同一个按钮时，似乎没有执行任何信号，程序就死了。在调试模式下运行时停止按钮是否会发送其他信号，如果是，是什么信号？甚至可以在 QT Creator 中处理这个问题吗？它是否会发送一个我什至无法处理的信号，例如 SIGKILL？如果我向我的软件进程发出 SIGTERM 信号，我可以优雅地关闭在调试模式下完成的软件，但我希望有一种方法可以在 QT Creator 中执行此操作，而不是使用另一个终端窗口。

谢谢！

# .net - The input stream is not a valid binary format. The starting contents (in bytes) are: 53-79-73-74-65-6D-2E-52-75-6E-74-69-6D-65-2E-52-65

> ID：16181527
> 
> 赞同：0
> 
> 时间：2013-04-24T00:41:58.590
> 
> 标签：.net, c#-4.0, .net-remoting

I have a VSTO Word Addin project which integrates with the Word 2007, when I click on login button on my Addin, I execute the following method:

```
 private void btnOK_Click(object sender, System.EventArgs e)
    {
        AuditDataAccess auditDataAccess = 
(AuditDataAccess)DataAccessFactory.GetNewInstance(typeof(AuditDataAccess));
    } 
```

Here, `DataAccessFactory` is a class in another referenced assembly named `RemoteData` as follows:

```
public class DataAccessFactory
{
    static DataAccessFactory()
        {
            objADDataAccess = new ADDataAccess();
        }
} 
```

Here, `ADDataAccess` is a class in the same assembly `RemoteData` as:

```
namespace RemoteData.Client
{
    public class ADDataAccess : IDataAccess
        {
            RemoteData.Server.ADDataAccess proxy = null;

            internal  ADDataAccess()
            {
                proxy = new RemoteData.Server.ADDataAccess(); // Error Line
            }
         }

public interface IDataAccess
    {
        bool IsActive
        {
            get;
        }
    }

} 
```

`Server.ADDataAccess` is in the same assembly `RemoteData` as:

```
namespace RemoteData.Server
{
    public class ADDataAccess:DataAccess
    {
        DataAccess.ADDataAccess objDataAccess;

        public ADDataAccess()
        {
            //objDataAccess = new DataAccess.ADDataAccess();
        }
    }
public abstract class DataAccess : MarshalByRefObject
    {
        public bool IsActive
        {
            get { return true; }
        }
    }
} 
```

I have commented the code for `new DataAccess.ADDataAccess()` which is creating a new object of a class in another reference assembly named `DataAccess`, thinking that this might be the one creating the problem, but I am still receiving the same error mentioned in the question header on the line commented as `Error Line`

`EDIT`: I have created a small project with the same architecture and it is working fine. Here is the download link: [http://www.2shared.com/file/dGXNtsAK/Server.html](http://www.2shared.com/file/dGXNtsAK/Server.html)

Please please help...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T16:47:27.610

此问题已解决。问题是在`Project.dll.config`文件中，有一个这样的远程配置：

```
<system.runtime.remoting>
        <application>
            <channels>
                <channel ref="http">
                    <clientProviders>
                        <formatter ref="binary"/>
                    </clientProviders>
                </channel>
            </channels>
            <client url="" displayName="">
                <activated />
            </client>
        </application>
    </system.runtime.remoting> 
```

因为，我们直接实例化了通过其中的`<activated/>`元素公开的类型，而不是通过远程调用获取它们，所以它导致了异常。在 中评论了整个远程配置部分后`web.config`，它开始工作。

# php - PHP - 覆盖一个输出，多个配置

> ID：16181532
> 
> 赞同：0
> 
> 时间：2013-04-24T00:42:35.423
> 
> 标签：php, if-statement

我有一个回声：

```
echo 'Hello world'; 
```

如果这个回声是否可见，我可以在两个地方进行管理，我可以使用以下方法检查它们：

```
global_option('show_echo'); 
```

和

```
post_option('show_echo'); 
```

请告诉如何覆盖`global_option`from `post_option`，例如：

在回声中设置为隐藏，并在随后输出回声`global_option('show_echo')`中可见。`post_option('show_echo');`

怎么办 我做一个`else if`哪个为主 `post_option`，意思是 `post_option`可以覆盖`global_option`。

建议我一个最简单的方法来实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:53:45.347

听起来您需要一个实现优先级顺序的函数：

```
function check_config( $key) {
    // Your question is unclear as to the exact logic necessary here
    $post = post_option( $key);
    if( isset( $post)) return $post;

    $global = global_option( $key);
    if( isset( $global)) return $global;

    return false;
} 
```

然后只需调用它：

```
if( check_config( 'show_echo')) {
} 
```

# sql - 使用一列中的字符串在另一个 SQL 中的字符串内进行搜索

> ID：16181541
> 
> 赞同：1
> 
> 时间：2013-04-24T00:43:42.340
> 
> 标签：sql, string, oracle, search, concatenation

我正在尝试使用 SQL 中另一列中的字符串在句子中搜索。我有一个大的关键词列表和他们从 1 到 6 的评分。我正在尝试搜索从 Twitter 中提取的数据，以了解人们对某些电影的看法（即 Wreck It Ralph）并给电影一个总分. 我遇到的问题是从 Twitter 中提取的数据没有分解，但仍然是一个完整的句子。我想不出一种在句子中搜索关键字的方法。这是一个有效的查询：

```
SELECT SUM(K.Score) 
FROM wreck_it_ralph WIR, Keyword K
WHERE t_text LIKE '%fantastic%'
       AND K.word = 'fantastic'; 
```

这是我尝试使用连接的查询，但未成功：

```
SELECT SUM(K.Score) 
FROM Wreck_it_Ralph WIR, Keyword k
WHERE t_text LIKE ('%' + k.word + '%'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:58:00.120

不同的数据库有不同的连接字符串的方式。在 Oracle 或 Postgres 中，试试这个：

```
SELECT SUM(K.Score) 
FROM Wreck_it_Ralph WIR, Keyword k
WHERE t_text LIKE '%' || k.word || '%' 
```

在 SQL Server 或 Sybase 中：

```
SELECT SUM(K.Score) 
FROM Wreck_it_Ralph WIR, Keyword k
WHERE t_text LIKE '%' + k.word + '%' 
```

在 MySQL 中：

```
SELECT SUM(K.Score) 
FROM Wreck_it_Ralph WIR, Keyword k
WHERE t_text LIKE concat('%', k.word, '%') 
```

请注意，部分单词匹配存在问题。所以，“不喜欢”的东西会匹配“喜欢”。您可能想要查看您正在使用的任何数据库的全文功能，因为这会考虑标点符号、完整单词和停止列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:51:34.790

MSSQL-:

```
SELECT SUM(K.Score) 
FROM Wreck_it_Ralph WIR, Keyword k
WHERE t_text LIKE '%' + k.word + '%'; 
```

# ios - Is ok to release my object after I call performSelectorOnMainThread

> ID：16181544
> 
> 赞同：1
> 
> 时间：2013-04-24T00:44:01.040
> 
> 标签：ios, objective-c, cocoa, nsobject

Memory management is being done manually, ARC is not used in this project..

The message object is created using `alloc` `init` and the code below is being called on background thread.

I pass a message object before the following call:

```
 [self performSelectorOnMainThread:@selector(serverConnectionResult:) withObject: message waitUntilDone:NO]; 
```

After the call I want to do:

```
 [message release]; 
```

I am confused whether I should do this, because I am concerned whether the message object will be always valid when `serverConnectionResult` is called? Is the method call `performSelectorOnMainThread` retaining the message object itself? What's the rule to know that the called method retains my passed object?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:46:33.463

这样做是安全的。`-performSelectorOnMainThread:withObject:waitUntilDone:`将保留消息的目标和对象。同样`-performSelector:withObject:afterDelay:`也会保留目标和对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:17:29.450

You could also use Grand Central Dispatch and use `dispatch_async` on the main thread and pass in a block that calls your method and afterwards releases the message.

# authentication - Laravel 4 authentication not working

> ID：16181546
> 
> 赞同：9
> 
> 时间：2013-04-24T00:44:10.630
> 
> 标签：authentication, laravel, laravel-4

I have a Laravel 4 app in which I have set up one user. In my login route I'm calling `Auth::attempt` with the email and password but it always comes back as false. I definitely have the password correct and the correct hash in the database as `Hash::check` returns true.

I think it may be due to using `email` as the login field instead of `username`, but I can't see any setting for that. [This question](https://stackoverflow.com/questions/13231234/authattemptcredentials-always-returns-false) implied you could add an option to `config/auth.php` but it didn't work. [This question](https://stackoverflow.com/questions/14814526/user-login-laravel-4) says to use `username` as the array key, but then I get SQL error because it tries to select on a username field in the database.

Do I need to add something to the User model to specify the username field? Here is my login route:

```
Route::post('login', function() {

    // data from login form
    $credentials = array(
        'email' => Input::get('email'),
        'password' => Input::get('password')
    );

    $auth = Hash::check(Input::get('password'), Hash::make('mypass'));
    var_dump($auth); // this is TRUE

    // login was good
    $auth = Auth::attempt($credentials);
    var_dump($auth); // this is FALSE
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T09:57:25.150

我发现了问题。正如 Jason 在上面的评论中所建议的那样，我已经修改了`models/User.php`文件并删除了一些我没有意识到是必要的功能。

和方法必须包含在 User 模型中才能进行身份验证`getAuthIdentifier()`！`getAuthPassword()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T03:10:21.900

在 app/config/app.php 中确保您设置了“密钥”。这让我把头发拉了出来。一切都会正常工作，密码似乎在数据库中散列，但它总是会返回 false，直到您设置此密钥并将密码重新散列到数据库中。

> > > “php 工匠密钥：生成”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-18T18:05:26.623

有同样的问题，让我汗流浃背几个小时。明确检查您的**User.php**模型并确保您没有**覆盖**默认模型。谢谢杰森！

# php - iCal decoder function returning blank array in PHP

> ID：16181551
> 
> 赞同：0
> 
> 时间：2013-04-24T00:44:29.790
> 
> 标签：php, arrays, icalendar

I followed a tutorial to import iCal data into my website using PHP. For some reason, the array doesn't seem to include any data even though the feed shows info in a feed validator website. Can anyone take a look at the decoder function? I'm guessing there's a simple reason for this but I'm a novice.

```
 public function iCalDecoder($file) {
    $ical = file_get_contents('https://www.google.com/calendar/ical/689afn1fkt0cb59kame9bg56mg%40group.calendar.google.com/private-584915c30803f5ad6c548f021e84f836/basic.ics');
    preg_match_all('/(BEGIN:VEVENT.*?END:VEVENT)/si', $ical, $result, PREG_PATTERN_ORDER);
    for ($i = 0; $i < count($result[0]); $i++) {
        $tmpbyline = explode("rn", $result[0][$i]);

        foreach ($tmpbyline as $item) {
        $tmpholderarray = explode(":",$item);
        if (count($tmpholderarray) >1) {
            $majorarray[$tmpholderarray[0]] = $tmpholderarray[1];
        }
        }

        if (preg_match('/DESCRIPTION:(.*)END:VEVENT/si', $result[0][$i], $regs)) {
        $majorarray['DESCRIPTION'] = str_replace("  ", " ", str_replace("rn", "", $regs[1]));
        }
        $icalarray[] = $majorarray;
        unset($majorarray);

    }
    return $icalarray;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:52:37.617

找到了另一个实际有效的功能。感谢您的关注，我希望这对未来的人有所帮助！

```
function icsToArray($paramUrl) {
    $icsFile = file_get_contents($paramUrl);

    $icsData = explode("BEGIN:", $icsFile);

    foreach($icsData as $key => $value) {
        $icsDatesMeta[$key] = explode("\n", $value);
    }

    foreach($icsDatesMeta as $key => $value) {
        foreach($value as $subKey => $subValue) {
        if ($subValue != "") {
            if ($key != 0 && $subKey == 0) {
            $icsDates[$key]["BEGIN"] = $subValue;
            } else {
            $subValueArr = explode(":", $subValue, 2);
            $icsDates[$key][$subValueArr[0]] = $subValueArr[1];
            }
        }
        }
    }

    return $icsDates;
} 
```

# java - OR位运算的数学方程？

> ID：16181556
> 
> 赞同：1
> 
> 时间：2013-04-24T00:44:51.500
> 
> 标签：java, math, bit-manipulation, bitwise-operators, bitwise-or

`*`是否有使用基本运算符（如、`+`、`-`和）进行按位或运算的数学表达式`/`？我正在寻找的一个例子（对于轮班）`n<<a`将变成`n*Math.pow(2,a)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:41:59.850

可以提出算法解决方案

```
public static void main(String[] args) throws Exception {
    byte a = 0x14;
    byte b = 0x1;
    int c = or(a, b);
    System.out.println(Integer.toHexString(c));
}

static int or(byte a, byte b) {
    int c = 0;
    for (int i = 0; i < 8; i++) {
        if (bit(a, i) != 0 || bit(b, i) != 0) {
            c += Math.pow(2, i);
        }
    }
    return c;
}

static int bit(int x, int i) {
    return x / (int) Math.pow(2, i) % 2;
} 
```

它可以转换为单行表达式，但它会太长

```
int c = (a % 2 != 0 ? 1 : b % 2 !=0 ? 1 : 0) + (a % 4 / 2 != 0 ? 2 : b % 4 / 2 !=0 ? 2 : 0) ... 
```

这就是它计算位的方式

```
int a0 = a % 2;
int a1 = a % 4 / 2;
int a2 = a % 8 / 4;
int a3 = a % 16 / 8;
int a4 = a % 32 / 16;
... 
```

# string - 需要帮助在 C# 中将十六进制字符串转换为时间

> ID：16181559
> 
> 赞同：0
> 
> 时间：2013-04-24T00:45:16.977
> 
> 标签：string, time, hex, type-conversion

我在理解如何将十六进制值转换为持续时间时遇到问题。

以下是我在研究案例中看到的一些示例：

```
2b3da = 2:44.986
2bf64 = 2:47.868
2c84a = 2:50.074 
```

有人可以帮助了解这些结果是如何达到的吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T07:41:42.840

```
string hex1;
string[] hex = new string[16];
hex[0] = hex1.Substring(0, 2);       
hex[1] = hex1.Substring(2, 2);
hex[2] = hex1.Substring(4, 2);
hex[3] = hex1.Substring(6, 2);
hex[4] = hex1.Substring(8, 2);
hex[5] = hex1.Substring(10, 2);
hex[6] = hex1.Substring(12, 2);
hex[7] = hex1.Substring(14, 2);
//WE DONOT NEED TO REVERSE THE STRING

//CONVERTING TO INT SO WE CAN ADD TO THE BYTE[]
int[] decValue = new int[8];
for (int i = 0; i < 8; i++)
{
    decValue[i] = Convert.ToInt32(hex[i], 16);
}

//CONVERTING TO BYTE BEFORE WE CAN CONVERT TO UTC 
byte[] timeByte = new byte[8];

for (int i = 0; i < 8; i++)
    timeByte[i] = (byte)decValue[i];

    DateTime convertedTime = ConvertWindowsDate(timeByte);
    textBox7.Text = convertedTime.ToString();    
}

public static DateTime ConvertWindowsDate(byte[] bytes)
{
    if (bytes.Length != 8) throw new ArgumentException();
    return DateTime.FromFileTimeUtc(BitConverter.ToInt64(bytes, 0));
} 
```

输入：0060CE5601D6CE01

输出 : 31-10-2013 06:20:48

# bash - 遍历列然后行

> ID：16181562
> 
> 赞同：1
> 
> 时间：2013-04-24T00:45:50.457
> 
> 标签：bash, unix, loops, for-loop

我确定这已被多次讨论，但我似乎无法找到一个好的答案......

这是我的文件：

```
$ cat myfile.txt
server1     instance1 instance2 instance3
server2     instance4
server3     instance5 instance6 
```

我想要的是：

```
Server: server1, Instance: instance1
Server: server1, Instance: instance2
Server: server1, Instance: instance3
Server: server2, Instance: instance4
Server: server3, Instance: instance5
Server: server3, Instance: instance6 
```

我找到了一种在循环中使用 if 语句的方法，但肯定有更好的方法......

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:21:32.123

Bash can handle this task with ease:

```
#!/bin/bash
# File: format_output.sh
while read server instances
do
    for instance in $instances
    do
        echo "Server: $server, Instance: $instance"
    done
done 
```

To use it:

```
$ bash format_output.sh < myfile.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T00:59:22.843

如果允许 awk，则类似于

```
awk '{for(i=2;i<=NF;i++) print "Server: " $1 ", Instance: " $i }' < myfile.txt 
```

# java - 2d 侧滚动条上的碰撞检测：未正确碰撞

> ID：16181563
> 
> 赞同：0
> 
> 时间：2013-04-24T00:46:11.153
> 
> 标签：java, collision-detection

我的碰撞方法有问题。问题是当游戏中有两个敌人时。它在循环中与一个敌人相交，并继续返回真以表示碰撞。但是如果这个数组 List 中有第二个敌人，它就不会与第二个对象发生碰撞，因此导致它返回 false 并且玩家继续行走。有什么想法可以让他在与任何敌人接触时停下来，而不是因为他没有与所有敌人接触而继续前进？谢谢，这里是代码。

```
public void checkCollision(){
    ArrayList<Enemy> enemy = c.getEnemyList();
    for ( int i = 0; i < enemy.size(); i++){
        Enemy e = enemy.get(i);

        if (!getBounds().intersects(e.getBounds())){
            walk();
            return;
        }
        if (getBounds().intersects(e.getBounds())){
            if (e.getHP() <= 0){
                c.removeEnemy(e);
                walk();
                return;
            }
            fight();
            if (count == 25 || count == 65){
                int dd = DCalc.calcDmg(atk, atkMAX);
                e.dmg(dd);
            }

    }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:53:19.400

这只是“提前返回”问题的另一个例子。当您需要检查格式（if ANY，x，else y）或（if ALL，x，else y）并以格式（如果 FIRST，x，else y）重新表述它时，就会出现此问题。

为了解决这个问题，您需要重新制作算法，如下所示：

```
bool collided = false
For each enemy:
    Are we colliding with this enemy?
    If we are, do collision detection and set `collided` to true
end for

If `collided` is false, NOW we can run the code that should only run if we collided with nothing 
```

# html - 身体背景图像不跨越整个高度

> ID：16181569
> 
> 赞同：0
> 
> 时间：2013-04-24T00:47:07.850
> 
> 标签：html, css

我的身体标签有这个 css

```
background: url(images/homepagebg.jpg) no-repeat center; 
```

但它在页面底部停止。图像足够高，可以填满我的整个屏幕。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:49:12.307

如果整个屏幕都被内容用完，HTML 正文只会覆盖整个屏幕。

你可以试试

```
 body{
    min-height: {height-of-your-image-in-pixels}px;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:27:17.830

我找到了解决方案，我不得不将 fixed 添加到背景属性的末尾，例如

```
 background: url(images/homepagebg.jpg) no-repeat center center fixed; 
```

# silverstripe - SilverStripe 3：ModelAdmin 与 DataObject 与 $has_many 到 DataObject 给出错误

> ID：16181570
> 
> 赞同：4
> 
> 时间：2013-04-24T00:47:09.100
> 
> 标签：silverstripe, modeladmin

在 SilverStripe 3 中，我有两个相关的 DataObject，`Order`和`OrderItem`. `Order`有很多`OrderItems`。`OrderItem`有一个`Order`。

我正在`Order`使用 ModelAdmin 进行管理。

我可以创建一个新的`OrderItem`，但是当它尝试加载时，我收到以下错误：

> SELECT DISTINCT "OrderItem"."ClassName", "OrderItem"."Created", "OrderItem"."LastEdited", "OrderItem"."ItemQuantity", "OrderItem"."ItemDiscount", "OrderItem"."OrderID", "OrderItem"."ProductID", "OrderItem"."ID", CASE WHEN "OrderItem"."ClassName" IS NOT NULL THEN "OrderItem"."ClassName" ELSE 'OrderItem' END AS "RecordClassName", "Product"。来自“OrderItem”的“Title” WHERE (“OrderID” = '9') AND (“OrderItem”.“ID” = 11) ORDER BY Product.Title ASC LIMIT 1
> 
> “字段列表”中的未知列“Product.Title”

这是我的代码：

```
class Order extends DataObject { 
    public static $db = array(
        'OrderDate'=>'Date',
        'FulfilledDate'=>'Date',
        'OrderStatus'=>'Enum("New, InvoiceRequested, InvoiceSent, Paid, Cancelled")',
        'ShippingStatus'=>'Enum("Unshipped, Shipped")'
    );

    public static $has_one = array(
        'Customer' => 'Customer'
    );  

    public static $has_many = array(
        'OrderItems' => 'OrderItem'
    );
    // ...
}

class OrderItem extends DataObject { 

    public static $db = array(
        'ItemQuantity'=>'Int',
        'ItemDiscount'=>'Decimal'
    );

    public static $summary_fields = array( 
        'Product.Title',
        'ItemQuantity',
        'ItemDiscount'
    );

    public static $has_one = array(
        'Order' => 'Order',
        'Product' => 'Product'
    );
    // ...
} 
```

关于如何将 ModelAdmin 中的连接添加到`Product`对象/表的任何想法？

## 编辑

我发现了我遇到的问题。

```
public static $default_sort = array('Product.Title'); 
```

删除它解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-21T23:09:27.370

正因为如此，还有一个没有答案的问题，@MilesParker 编辑了这个问题：

> 我发现了我遇到的问题。
> 
> ```
> public static $default_sort = array('Product.Title'); 
> ```
> 
> 删除它解决了这个问题。

这条线本来应该在`OrderItem`课堂上，因为这就是 SQL 错误所显示的。该问题可能是由于缺少 a 引起的，`dev/build`但也可能是由于该特定版本的 Silverstripe 3.0 中的错误引起的。

# c++ - socket编程的select()中重启定时器

> ID：16181571
> 
> 赞同：2
> 
> 时间：2013-04-24T00:47:15.893
> 
> 标签：c++, c, linux, sockets

我想使用 select() 从其他服务器接收更新并定期发送消息。考虑以下设置：

> while(1){ select(... timeout = 5 秒); // 一些其他代码}

**如果我在t = 2**秒时收到更新，则**select()**将返回并执行相应的语句。当下一个循环开始时，超时将再次设置为 5 秒。但是，它应该是**5 - 2 = 3**秒。有没有办法用正确的时间更新计时器？

我想在 select() 之前手动启动一个计时器，但是这个计时器可能与**select()**中使用的计时器不同步。并且会引起其他潜在的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T01:04:12.323

根据[`select`手册页](http://linux.die.net/man/2/select)：

> 在 Linux 上，`select()`修改超时以反映未睡眠的时间量；大多数其他实现不这样做。（POSIX.1-2001 允许任何一种行为。）

因此，您只需简单地重用该`timeout`变量。仅当您真正超时时才重置其值。

正如警告所暗示的那样，依赖此行为会导致移植问题，因此如果您依赖此行为，请确保将其记录在案，以便在移植代码时完成正确的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T00:50:43.367

`time()`在调用之前记住一个变量，在返回时`select()`获取另一个变量，并且......在下一次迭代中使用 not ，但作为超时值。`time()``select()``while(1)``5``5 - difference_between_times`

也许您想使用`new_timeout = 5 - difference_between_times % 5`，因此如果*您*在返回后的操作`select`时间超过 5 秒......您仍然设置`timeout`5 秒间隔。

您可能不应该使用秒，而是更细化的时间单位。并考虑以上是否是您真正想要的行为（使用模数）。也许何时`difference_between_times > 5`，您应该等待 5 秒。随心所欲，但你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T03:29:45.473

当您的应用程序变得更复杂时，您可能有多个具有不同超时间隔的计时器。我们的确是。这是我们如何处理它。

每个计时器都有一个计时器对象，time_t 是计时器到期的时间。我们将所有计时器存储在堆数据结构中，因此最快到期的计时器位于堆的根部。在执行 select() 之前，我们获取堆的根，并从计时器的到期时间中减去当前时间，并将该增量用作 select() 调用的超时时间。

```
Timer * t = heap->Root();
time_t now = time(0);
timeval tv;
tv.tv_sec = t->when - now;
tv.tv_usec = 0;
select( ... & tv ); 
```

# c# - 变量不接受赋值吗？

> ID：16181572
> 
> 赞同：0
> 
> 时间：2013-04-24T00:47:16.823
> 
> 标签：c#, nullreferenceexception

我在第 103 行收到“System.NullReferenceException”：

![空1](https://i.stack.imgur.com/Xeb8F.jpg)

它显示变量“r”为空，但如下图所示，第 102 行显示“this.parentRack”指向 JNV.Rack 的一个实例。就好像第 102 行的分配没有发生。

![空4](https://i.stack.imgur.com/RPT7d.jpg)

当语句如第 105 行所示链接在一起时，所有引用似乎都在工作。正在设置的值（'Altitude'）可使用父引用获得，但它会引发 NullReferenceException（这就是我分解语句以查找问题的原因。）

![空3](https://i.stack.imgur.com/OqWGf.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:31:38.330

你这里有任何多线程访问吗？可能`this.parentRack`是`null`在第 102 行执行时，但是当您点击第 103 行时，另一个线程已为其分配了一个值？

# python - 检查 1 在二进制数中的位置

> ID：16181585
> 
> 赞同：-2
> 
> 时间：2013-04-24T00:48:52.203
> 
> 标签：python, binary, append

我有一个二进制数：1010

我需要先将它附加到 0000000001010 （大小 13 ），然后计算“1”出现在哪个位置

我每次得到不同的二进制数，所以下次它可能是 100000000，这意味着我只需要附加“0000”，然后计算哪个位中有 1。

我无法弄清楚如何在 python 中追加。

我有一个基本约定，即位 0 执行某些操作……位 12 执行“xyz”并且它采用小印度格式，因此在开始处理哪个位处于活动状态之前，我需要使我得到的任何二进制数的长度等于 12（即有 1)

请帮助..它只能在python中完成，因为其余的代码都在python中......

编程新手。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:57:23.047

您可以使用以下字符串格式实现填充

```
yourBinNumber = 1010
paddedString = "%013d" % yourBinNumber 
```

然后找出1的位置如下

```
paddedString.index("1") 
```

有关 Python 字符串格式的更多信息，请参见[此处](http://docs.python.org/2/library/stdtypes.html#string-formatting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:01:20.227

天真的案例；

假设您的起始数字始终以“1”开头，并且您始终创建一个具有 13 位二进制表示的字符串，那么结果始终是

```
 13 - len(initialNumber) 
```

例如;

```
 = 13 - len("1010") 

 = 13 - 4

 = 9 

 Result:  0000000001010
          ^^^^^^^^^X^^^
 Indices: 0123456789... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T01:44:25.837

假设您想为二进制字符串中的每个 1 运行不同的函数，您可以执行以下操作：

```
def fun0():
    print('fun0');

def fun1():
    print('fun1');

... 

def fun12():
    print('fun12');

funs = [fun0, fun1, ... , fun12]

# ass x is binary string
x = '1010'

# convert to integer
xi = int(x,2)
for i in range(0,13):
    if(xi & (1 << i) != 0):
        funs[i]() 
```

输出：

> > > ```
> > > fun1
> > > fun3 
> > > ```

# java - 分配和随机

> ID：16181596
> 
> 赞同：0
> 
> 时间：2013-04-24T00:50:27.773
> 
> 标签：java

我正在尝试编写一种反复掷硬币直到看到连续三个正面的方法。每次抛硬币时，都会显示所看到的内容（H 表示正面，T 表示反面）。当连续翻转 3 个头时，会打印一条祝贺信息。eg.TTTHTHHH 连续三个头！

```
public static void threeHeads(){
  Random rnd=new Random();
    char c = (char) (rnd.nextInt(26) + 'a');
    for(int i=1;i<=c.
} 
```

我被困在 for 循环中。我应该如何指定它将循环的次数。即使我声明了 3 个不同的字符 c，我怎样才能将其转换为循环的次数。我在想是否应该找到 ascii表找到哪个数字是 H 和 T 来专门打印这 2 个？或者循环是多余的？

```
public static void threeHeads(){
  Random rnd=new Random();
    char c = (char) (rnd.nextInt(26) + 'a');
    if(c=='H' && c=='H' && c=='H'){
        System.out.println("Three heads in a row!");
    }
} 
```

另一个问题是 == 和等于的赋值。对于布尔值，我使用 == 我知道对于字符串，我应该使用 equal。那么对于 char 字符，我应该使用什么？eg.char=='y'
我是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T00:58:48.403

我认为这是一个家庭作业。

而不是使用`Random.nextInt`，使用`Random.nextBoolean`。
说**TAIL**是`false`，**HEAD**是`true`

然后，您需要一个连续的 HEADS 计数器，当转动新**HEAD**时递增，并在翻转**TAIL**`0`时重置。

 **一旦该计数器的值为`3`您的循环就有一个退出条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T00:58:28.093

1.  掷硬币的结果是二元的。将 H 匹配为 1，将 T 匹配为 0。您只能随机生成这两个数字。
2.  在循环中放置一个计数器`cnt`，当它为 T (0) 和`cnt++`H (1) 时将设置为 0。然后你必须跳出循环 if `cnt > 2`（类似`if(cnt>2) break;`）

3.  不要忘记每次循环时都需要重新生成随机数。在您当前的代码中，它只执行一次。

我认为这些想法应该足以编写您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T01:02:42.077

通常，每当您发现自己问“我如何跟踪 XXX”时，答案就是声明一个新变量。但是，在您的情况下，您可以使用循环计数器`i`：

以下是我将如何解决这个问题：

```
public static void threeHeads()
{
    Random rnd=new Random();
    char c; //no need to initialize the char

    //ostensibly, we will loop 3 times
    for(int i=0; i < 3; i ++)
    {
          c = rnd.nextBoolean() ? 'h' : 't'; /*get random char*/;

          if (c != 'h')
          {
               //but if we encounter a tails, reset the loop counter to -1
                             //that way it will be 0 next time the loop executes
               i = -1;
          }

          System.out.println(c);
     }
} 
```

这样它会一直尝试循环三次，直到每次都是`c`。`'h'`

要回答您关于`==`vs的问题`equals()`：

您始终可以`==`在原始类型（int、char、double、任何非对象）上使用。对于对象（字符串、Double-with-a-capital D's、Lists），最好使用`equals`. 这是因为`==`将测试对象是否是*完全相同的对象*——仅当它们在内存中占据相同位置时才是正确的。十分之九，您实际上对检查对象是否*等效*感兴趣，并且您不在乎它们实际上是否是同一个对象。但是，如果您遇到确实想使用`==`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T01:02:25.650

```
 int head =0;
 int tail =1;
 public static void threeHeads(){
      Random rnd=new Random();
      int headsSeen = 0;
       while(headsSeen < 3){
         int res = rnd.nextInt(1); //returns 1 or 0
         if (res == head){
              headsSeen ++; 
         }else{
              headsSeen = 0; //there was a tail so reset counter
         }
           }
         ///At this point three heads seen in a row
} 
```**

# grails - grails验证嵌套命令对象不起作用

> ID：16181599
> 
> 赞同：6
> 
> 时间：2013-04-24T00:50:46.803
> 
> 标签：grails, grails-2.0, grails-validation, command-objects

我正在使用 grails 2.2.1 并尝试验证嵌套的命令结构。这是我的命令对象的简化版本：

```
@Validateable
class SurveyCommand {

    SectionCommand useful
    SectionCommand recommend

    SurveyCommand() {
        useful = new SectionCommand(
                question: 'Did you find this useful?',
                isRequired: true)
        recommend = new SectionCommand(
                question: 'Would you recommend to someone else?',
                isRequired: false)
    }
}

@Validateable
class SectionCommand {
    String question
    String answer
    boolean isRequired

    static constraints = {
        answer(validator: answerNotBlank, nullable: true)
    }

    static answerNotBlank = { String val, SectionCommand obj ->
        if(obj.isRequired) {
            return val != null && !val.isEmpty()
        }
    }
} 
```

当我尝试验证它的实例时，无论节值如何，`SurveyCommand`它总是返回，并且我在( ) 中的自定义验证器永远不会被调用。从 grails 文档来看，似乎[支持这种嵌套结构](http://grails.org/doc/2.2.1/ref/Domain%20Classes/validate.html)（默认为 true）。但是，也许这条规则只适用于域对象而不适用于命令对象？还是我只是在这里遗漏了什么？`true``SectionCommand``answerNotBlank``deepValidate`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-18T22:43:02.343

对于 Grails 2.3 及更高版本，我发现[Cascade Validation Plugin](https://grails.org/plugin/cascade-validation)很好地解决了这个问题。它定义了一个名为 cascade 的新验证器类型，它完全符合您的期望。安装后，您的示例将变为：

```
class SurveyCommand {
    ...

    static constraints = {
        useful(cascade: true)
        recommend(cascade: true)
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T02:41:58.417

您可以将自定义验证器添加到您的主命令对象

```
@Validateable
class SurveyCommand {

    SectionCommand useful
    SectionCommand recommend

    static subValidator = {val, obj ->
        return val.validate() ?: 'not.valid'
    }

    static constraints = {
        useful(validator: subValidator)
        recommend(validator: subValidator)
    }

    SurveyCommand() {
        useful = new SectionCommand(
            question: 'Did you find this useful?',
            isRequired: true)
        recommend = new SectionCommand(
            question: 'Would you recommend to someone else?',
            isRequired: false)
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T05:26:53.883

如果您尝试使用测试`validation`进行`unit`测试，`mockForConstraintsTest()`那么您应该注册`command`对象`Config.groovy`而不是使用`@Validateable`，因为现有的[Grails Bug](http://jira.grails.org/browse/GRAILS-9162)。有关详细信息，请参阅此[SO 问题/答案](https://stackoverflow.com/questions/16108556/grails-2-1-unit-testing-command-object-mockforconstraintstests-not-working/16110864#16110864)。

您可以在下面注册可验证的类`Config.groovy`

```
grails.validateable.classes = 
           [yourpackage.SurveyCommand, yourpackage.SectionCommand] 
```

# java - run 方法中的同步块

> ID：16181600
> 
> 赞同：0
> 
> 时间：2013-04-24T00:50:49.457
> 
> 标签：java, multithreading, concurrency, synchronized

在 run 方法中使用同步块是否有意义？我认为确实如此，只要我使用的是相关锁，而不是包含此 run 方法的 Runnable 实例。阅读 stackoverflow 上类似问题的答案似乎证实了这一点。我尝试编写一些简单的代码来测试它，并且 run 方法中的同步块并不能防止数据损坏：

```
public class Test {

    public Test() {
        ExecutorService es = Executors.newCachedThreadPool();
        for (int i = 0; i < 1000; i++) {
            es.execute(new Runnable() {
                @Override
                public void run() {
                    synchronized (lock) {
                        sum += 1;
                    }
                }
            });
        }
        es.shutdown();
        while(!es.isTerminated()) {
        }
    }
    private int sum = 0;
    private final Object lock = new Object();

    public static void main(String[] args) {
        Test t = new Test();
        System.out.println(t.sum);
    }
} 
```

为什么这段代码会产生不正确的结果？这是因为同步块还是其他错误？我觉得我在这里缺少一些基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:52:38.683

除了看起来不错的简单示例之外，您应该小心 Runnables 中的同步，以防止它们在一个 Runnable 等待某个资源仅由队列中的另一个 Runnable 释放但尚未启动且永远不会相互阻塞时相互阻塞will 因为当前等待的 Runnable 必须首先完成。

但是，如果有足够的工作线程执行作业，这种情况就不太可能发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:41:32.133

您的执行程序可能会遇到某种意外错误。如果发生这种情况，您将不会知道，因为您没有得到任何要检查的返回值。

尝试切换到[submit() 而不是](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.lang.Runnable%29)execute() 并存储Executor 为您提供的[Future实例列表。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)如果最终总和小于 1000，则迭代期货并 get() 每个。如果引发异常，您将看到该特定可运行任务发生了什么。

# angularjs - AngularJS 高级选项卡 - 两个 ng-transclude

> ID：16181602
> 
> 赞同：1
> 
> 时间：2013-04-24T00:50:52.150
> 
> 标签：angularjs, angularjs-directive

Angular UI，仅支持基本选项卡。我想创建一个支持嵌套选项卡和高级标题（可以包括 html）的指令。

我认为，最好的语法是

```
<tabs>
    <tab>
        <title><i class="myIcon"></i> Title 1</title>
        <p>Content 1</p>
    </tab>
    <tab>
        <title class="pull-right">Title 2 (Nested)</title>
            <tab>
                <title>Title 2.1</title>
                <p>Content 2.1</p>
            </tab>
        <p>Content 2</p>
    </tab>
</tabs> 
```

我对这种方法的问题是我需要 2 ng-transclude - 一个用于窗格，一个用于标题。

因为第一个 ng-transclude 很容易（就像在教程中一样）：

```
<div>
    <ul>
        <li ng-repeat="pane in panes" transclude-title></li>
    </ul>
    <div class="tab-content" ng-transclude="">
    </div>
</div> 
```

我不知道如何在这里嵌入标题？如何保留选项卡的嵌套结构？

也许这个问题有更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T09:43:08.460

这是一个多重嵌入示例。我希望它为您指明正确的方向。

[http://plnkr.co/edit/wpgvgr5h6nAQDOZYEHNI?p=preview](http://plnkr.co/edit/wpgvgr5h6nAQDOZYEHNI?p=preview)

# php - php while循环中的javascript onchange

> ID：16181604
> 
> 赞同：0
> 
> 时间：2013-04-24T00:51:04.757
> 
> 标签：php, javascript, forms, onload

我有一个表单，其中无线电类型在 PHP while 循环中生成。根据选择的收音机，java 脚本查询 MySQL 以获取正确的值并将其返回到文本框。它除了 onload 外都可以工作。OnLoad 返回不正确的值，无论是 while 循环迭代中的第一个值。Onchange 将返回正确的值。

如何让 onload 返回正确的值？在整个 while 迭代中，我在收音机中使用“已检查”，以便始终检查一个圆圈。默认情况下检查哪个收音机对我来说并不重要。在 while 迭代中使用 checked 总是会检查最后一个迭代，这是可以的，但它显示的是第一个迭代的值。

这是我的代码。

```
<script type="text/javascript">
function getNextcheck(str)
{
if (str=="")
  {
  document.getElementById("nextcheck").innerHTML="";
return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("nextcheck").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getnextcheck.php?id="+str,true);
xmlhttp.send();
}
window.onload = function() {
document.getElementsByName('ID')[0].onchange();
}

</script> 
```

它拉出的文件 getnextcheck.php

```
<?php
include $_SERVER['DOCUMENT_ROOT']."/connect.php";

$result = mysql_query("SELECT * FROM bankaccount WHERE ID = '$_GET[id]'");
$row = mysql_fetch_array($result);

$nextcheck = $row['next_check'];

if (empty($nextcheck)) { $nextcheck = 0; }

echo "<tr><td>Check Number <input type=\"text\" name=\"checkno\" value=\"".$nextcheck."\" /></td></tr>"; 
```

和表格里面的收音机。

```
while($row2 = mysql_fetch_array($result2)) {
$id = $row2['ID'];

echo "<tr><td><input type=\"radio\" name=\"ID\" value=\"".$row2['ID']."\" onchange=\"getNextcheck(this.value)\" checked></td><td>".$row2['name']."</td><td>".$row2['acctnum']."</td>";
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:09:36.913

只做第一次无线电检查

```
<?
$i=0;
while($row2 = mysql_fetch_array($result2)) {
$id = $row2['ID'];
$checked = $i?'':'checked'; 
echo "<tr><td><input type=\"radio\" name=\"ID\" value=\"".$row2['ID']."\" onchange=\"getNextcheck(this.value)\" {$checked}></td><td>".$row2['name']."</td><td>".$row2['acctnum']."</td>";
$i=1;
}
?> 
```

# oauth-2.0 - 有没有办法避免“https://www.googleapis.com/auth/plus.login”范围？

> ID：16181605
> 
> 赞同：1
> 
> 时间：2013-04-24T00:51:13.993
> 
> 标签：oauth-2.0, google-plus

我正在使用 Google 注册按钮构建一个应用程序。Google 建议我改用 Google+，我照做了。

我要求提供两个不同范围（`https://www.googleapis.com/auth/userinfo.email`和`https://www.googleapis.com/auth/userinfo.profile`）中的用户个人资料和电子邮件地址。但是，我注意到范围`https://www.googleapis.com/auth/plus.login`是自动添加到令牌请求响应中的。

有没有办法删除它？我只想向用户询问我提到的两个，以免在对话框中出现额外的权限请求，而这个也会导致弹出确认访问用户圈子（我不需要） . 我用谷歌搜索了很多，但找不到与此问题相关的任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T15:05:34.860

以前，您无法`plus.login`从 Google+ 登录按钮中删除范围，因为未升级到 Google+ 的用户的个人资料信息无法从 Google+ API 获得。[现在，您可以选择是否需要 Google+ 升级用户](http://googleplusplatform.blogspot.com/2013/12/google-sign-in-improvements11.html)并获得对用户圈子的访问权限和编写应用活动的能力，或者只是请求基本的个人资料信息。

1.  完整的 Google+ 登录包括`email`和`https://www.googleapis.com/auth/plus.login`范围。
2.  对于基本配置文件信息包括`email`和`profile`范围。请注意，这些只是裸字符串`profile`，并且`email`- 它们不是 URL 形式。

用户的电子邮件地址和个人资料信息可从[Google+ 个人资料端点](https://developers.google.com/+/api/latest/people/get)获得。您始终可以允许用户使用[增量身份验证](https://developers.google.com/+/api/oauth#incremental)`https://www.googleapis.com/auth/plus.login`升级到以后，这样他们就可以利用对圈子用户的访问和编写应用程序活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T09:02:32.387

要使用 Google+ 登录按钮，您必须请求[https://www.googleapis.com/auth/plus.login](https://www.googleapis.com/auth/plus.login)

plus.login 包括一组基本权限，通常有用，包括读取用户圈子的请求。用户只需选择同意对话框中突出显示的“仅限您”选项，即可轻松选择不授予您的应用访问其圈子的权限。但是，无法减少 plus.login 中包含的权限集。

# ios - 为什么这个动画只运行一次？

> ID：16181606
> 
> 赞同：0
> 
> 时间：2013-04-24T00:51:37.010
> 
> 标签：ios, objective-c, core-animation, cabasicanimation

我有一个 UIView，其中包含一个触发名为`handleLeftTap`.

```
-(void)handleLeftTap {

    self.player.direction = LEFT;

    if(!self.isAnimating && self.toTile.isWalkable) {
        for(UIView *currentView in self.subviews) {
            CABasicAnimation *moveAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
            [moveAnimation setDuration:MOVE_ANIMATION_DURATION];
            [moveAnimation setDelegate:self];
            [moveAnimation setRemovedOnCompletion:NO];
            [moveAnimation setFillMode:kCAFillModeForwards];
            moveAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(currentView.center.x+TILE_WIDTH, currentView.center.y)];
            [currentView.layer addAnimation:moveAnimation forKey:nil];
        }
        NSLog(@"animated\n");
    }
} 
```

当我第一次点击屏幕时，这个动画效果很好；每个子视图向右移动`TILE_WIDTH`像素。但是，如果我再次点击屏幕，动画根本不起作用；没有视图移动。我用断点单步执行了这段代码，并验证了这个动画是否被添加到图层中。只是没有应用动画或类似的东西。有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:09:15.167

不太确定，但您确定第二个动画与第一个动画之后的位置不同吗？

# css - 单页，内容上方有菜单

> ID：16181607
> 
> 赞同：0
> 
> 时间：2013-04-24T00:51:40.887
> 
> 标签：css, single-page-application, singlepage

我正在构建一个单页网站，并希望将固定菜单放在滚动条内容上：

[http://jsfiddle.net/VFQF8/](http://jsfiddle.net/VFQF8/)

但是使用固定位置，我无法将菜单保留在内容之上。任何想法？

```
#nav {
    left: 20px;
    list-style: none;
    position: fixed;
    top: 20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:03:26.223

[演示](http://jsfiddle.net/cwHDX/)

```
#nav {
    list-style: none;
    position: fixed;
    top: 20px;
    width: inherit;
}
#section-1{
    margin-top:200px;
} 
```

# django - POST后django重定向不起作用

> ID：16181609
> 
> 赞同：0
> 
> 时间：2013-04-24T00:52:06.403
> 
> 标签：django, mongodb, django-views

我显然忘记了关于 django 的一些非常基本的东西。这是我的views.py：

```
def sourcedoc_create(request):

if request.method == 'POST': # If the form has been submitted...
    form = SourcedocForm(request.POST, request.FILES) # A form bound to the POST data
    if form.is_valid(): # All validation rules pass
        handle_uploaded_file(request.FILES['doc'])
        form.save()
        return HttpResponseRedirect('/index/') # Redirect after POST
else:
    form = SourcedocForm() # An unbound form
    return render_to_response(
        'sourcedoc_create.html',
        {'form': form},
        RequestContext(request) 
```

这是 urls.py 的相关部分：

```
url(r'^$', index),
url(r'^index/', index),
url(r'^sourcedoc/create/', sourcedoc_create), 
```

当我运行应用程序时，我在数据库中创建了记录，并且上传的文件成功出现在相关目录中（因此我推断 form.save 工作正常），但后来我得到：

```
KeyError at /sourcedoc/create/

0

Request Method:     POST
Request URL:    http://www.rosshartshorn.net/worldmaker/sourcedoc/create/
Django Version:     1.4.3 
```

看来我的 HttpResponseRedirect 无论出于何种原因都无法正常工作，并且它正在尝试重新发布并从空白表单中抛出 KeyError ？或者其他的东西。无论如何，它不会重定向。当我手动转到 /index/ 时，一切都很好，新记录就在那里。

任何想法我的重定向有什么问题？

如果表格相关：

```
 <body>
{% if form.errors %}
    <p style="color: red;">
        Please correct the error{{ form.errors|pluralize }} below.
    </p>
{% endif %}
<h1>New Post</h1>
<form enctype="multipart/form-data"  action="" method="post">
    <table>
        {{ form.as_table }}
    </table>
    {% csrf_token %}
    <input type="submit" value="Submit">
</form> 
```

另外，我正在使用 mongoforms，它应该像 ModelForms 一样工作：

```
from mongodbforms import DocumentForm

class SourcedocForm(DocumentForm):
class Meta:
    document = Sourcedoc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T14:52:22.747

它似乎至少与这篇文章有点相关：[Django MongodbForms KeyError _meta['cascade']](https://stackoverflow.com/questions/14621235/django-mongodbforms-keyerror-metacascade)。

所以，我刚刚升级到 Django 1.5 和最新的 mongodbforms。这消除了该错误，尽管我遇到了与此类似的问题： [MongoKit "ImportError: No module named objectid" 错误](https://stackoverflow.com/questions/10401499/mongokit-importerror-no-module-named-objectid-error)

我刚刚从第二篇文章中实现了 keppla 的答案，现在它似乎工作了！

# jquery - jQuery vs jQuery Mobile - 脚本顺序重要吗？

> ID：16181610
> 
> 赞同：2
> 
> 时间：2013-04-24T00:52:29.820
> 
> 标签：jquery, jquery-mobile

我不知道为什么，但是当我以不同的顺序包含脚本时，它似乎会导致一些问题。

当它是这种方式时：

```
 <script src="static/jquery.mobile-1.3.1.min.js"></script>
    <script src="static/jquery-1.9.1.min.js"></script>
    <script src="static/jquery-migrate-1.1.1.min.js"></script> 
```

我的程序有效！Fiddle 也可以工作：http: [//jsfiddle.net/yvonnezoe/MKfLU/4/](http://jsfiddle.net/yvonnezoe/MKfLU/4/) 但是 jQuery mobile 的 css 主题在我的网络应用程序上不再工作了。

当它是这种方式时：

```
 <script src="static/jquery-1.9.1.min.js"></script>
    <script src="static/jquery-migrate-1.1.1.min.js"></script>
    <script src="static/jquery.mobile-1.3.1.min.js"></script> 
```

它不起作用，并给了我变量“textInput”的“未定义”，即使在 Fiddle 上也是如此：http: [//jsfiddle.net/yvonnezoe/7NZzr/](http://jsfiddle.net/yvonnezoe/7NZzr/)

有人能告诉我为什么吗？:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:35:04.547

要理解这个问题，您需要了解 jQuery Mobile 的工作原理。

在您的第二个示例中，初始化顺序不是问题。如果这是一个问题，所有这些元素都不会被样式化。在您的情况下，您不知道的是，当 jQuery Mobile 样式形成元素时，它会改变它们的 DOM 结构。因此，按钮和输入元素不再像您的非样式化第一个示例那样位于同一位置。

这是对您的 jsFiddle 的修复：http: [//jsfiddle.net/FmPPW/](http://jsfiddle.net/FmPPW/)

改变这个：

```
$('.TextInput').empty();
textInput = $(this).prev('.TextInput').val(); 
```

对此：

```
$('.TextInput').empty();
textInput = $(this).parent().prev().find('.TextInput').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:03:44.427

“配置默认值”的文档讨论了 mobileinit 事件：http: [//jquerymobile.com/demos/1.0a4.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.0a4.1/docs/api/globalconfig.html)

> 因为 mobileinit 事件在执行时立即触发，所以您需要在加载 jQuery Mobile 之前绑定您的事件处理程序。因此，我们建议按以下顺序链接到您的 JavaScript 文件：
> 
> ```
> <script src="jquery.js"></script>
> <script src="custom-scripting.js"></script>
> <script src="jquery-mobile.js"></script> 
> ```

快速入门指南显示了具有相同顺序的页面模板：http: [//jquerymobile.com/demos/1.2.1/docs/about/getting-started.html](http://jquerymobile.com/demos/1.2.1/docs/about/getting-started.html)

似乎需要加载 jquery 才能使 jquery-mobile 工作。

# jquery - Jquery Cycle FX 导致图像消失？

> ID：16181615
> 
> 赞同：0
> 
> 时间：2013-04-24T00:52:52.453
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我已将 jquery 循环插件添加到我的网站，并将其用作基本的“从左到右”幻灯片。问题是只有一些 FX 转换似乎有效。

[http://www.petsdomain.com.au/natures_test/index.html](http://www.petsdomain.com.au/natures_test/index.html)

例如，目前我将它设置为：

```
$("ul#slides").cycle ({
    fx: 'fade',
    pause: 1,
    speed: 2000,
    prev: '#prev',
    next: '#next',
    cleartypeNoBg: true,
}); 
```

如果我尝试将 fx 更改为“scrollLeft”，幻灯片中的图像就会消失！如果我在 Chrome 中查看代码，幻灯片似乎正在运行（您可以看到代码正在更改），但没有图像出现！

我很高兴让效果保持淡化 - 但我真的很想知道为什么会在未来的项目中发生这种情况......

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T04:24:16.730

你下载了完整的jquery循环js还是min版本？最小版本仅包含有限数量的效果。

# php - 使用 jquery 发送动态创建的表单

> ID：16181617
> 
> 赞同：0
> 
> 时间：2013-04-24T00:53:05.390
> 
> 标签：php, jquery, forms, form-submit

```
 ....... while(mysql_fetch_array($loop))
    {..............
    echo '
    <form name="myform" method="POST" action="reply.php">
    <textarea style="width:400px;" name="text'.$idanswer.'" id="text'.$idanswer.'"></    textarea>
    <input type="submit" name="submit'.$idanswer.'" id="submit'.$idanswer.'"     value="Submit">
     <input type="hidden" name="idquest" id="idquest" value="'. $question_id .'">
     <input type="hidden" name="idansw" id="idansw" value="'. $idanswer .'">
     <input type="hidden" name="idsend" id="idsend" value="'. $logOptions_id .'">
     <input type="hidden" name="namer" id="namer" value="'. $usr .'">
     </form>';
     } 
```

它运作良好。但是我想用jquery发送这个表单而不刷新页面，我不知道如何在函数中传递变量。
我需要这样的东西：

```
 <script type="text/javascript">
    $(document).ready(function() {
    $('submit'.$idanswer.'').click(function (e) {
            e.preventDefault();
            var dataString = 'text'.$idanswer.'=' + $('#text'.$idanswer.'').val() + '&idquest=' + $("#idquest").val() + '&idansw=' + $("#idansw").val() + '&idsend=' + $("#idsend").val() + '&namer=' + $("#namer").val();
            jQuery.ajax({
            type: "POST",
            url: "reply.php",
            data:dataString,
            success:function(response){
                $("#respond").prepend(response);
                                $('#text'.$idanswer.'').val('');
            },
            error:function (xhr, ajaxOptions, thrownError){
                alert(thrownError);
            }
        });
    });
});
</script> 
```

由于变量，这不起作用。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:06:39.163

你需要回显你的 php 变量

```
var dataString = 'text <?= $idanswer ?>=' + $('#text<?= $idanswer ?>').val() +&idquest=' + $("#idquest").val() + '&idansw=' + $("#idansw").val() + '&idsend=' + $("#idsend").val() + '&namer=' + $("#namer").val(); 
```

只需将每个更改`$phpvar`为`<?= $phpvar; ?>`或`<?php echo $phpvar; ?>`

php不能和js混用，但是可以嵌入；

这是错误的：

```
 $('submit'.$idanswer.'') 
```

右边是：

```
$('submit <?= $idanswer ?>') 
```

或者

```
$('submit <?php echo $idanswer; ?>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:35:12.110

给每个表单一个唯一的`id`，将提交按钮更改为普通按钮`input="button"`，以便它不会在单击时提交表单并将`onclick`属性添加到按钮，如下所示：

```
<form name="myform" id="form'.$idanswer.'" method="POST" action="reply.php">
<input type="button" class="submit" name="submit'.$idanswer.'" id="submit'.$idanswer.'"     value="Submit" onClick="submitForm(\'form'.$idanswer.'\')" /> 
```

创建 ajax 函数并使用`serialize()`方法从每个表单获取参数，该方法将获取所有表单输入值，而不是手动添加每个值：

```
$(document).ready(function() {
    function submitForm(form){
       jQuery.ajax({
            type: "POST",
            url: "reply.php",
            data: $('#' + form).serialize(),
            success:function(response){
                $("#respond").prepend(response);
                                $('#text'.$idanswer.'').val('');
            },
            error:function (xhr, ajaxOptions, thrownError){
                alert(thrownError);
            }
        });
    }
}); 
```

# java - 限制数组中的小数位

> ID：16181618
> 
> 赞同：1
> 
> 时间：2013-04-24T00:53:15.377
> 
> 标签：java, android, arrays, decimal-point

目前，这个数组的输出有一个太大的小数位轨迹。我怎样才能将其限制为小数点后 2 位？我的意思是数组'percentage1'。我在网上看到过方法，但我不明白如何将这些方法实现到代码中，如下所示。

```
int[] correct1 = {20, 20, 13, 15, 22, 18, 19, 21, 23, 25};
int[] incorrect1 = {2, 1, 5, 2, 2, 5, 8, 1, 0, 0};

    double[] percentage1 = new double[correct1.length];
    for(int a = 0; a < correct1.length; a++ ){ 
             percentage1[a] = (((double)correct1[a] / (correct1[a] + incorrect1[a]))*100);
        } 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T01:04:01.787

请尝试添加`DecimalFormat`对象。

1.  将此添加到循环的开头，它声明了您要查找的格式 - 2 位小数：`DecimalFormat df = new DecimalFormat("#.##");`

2.  使用 对其进行格式化`format`，然后将其转换回双精度。您需要恢复它的原因是`format`返回一个字符串。

    **percent1[a] = Double.valueOf(df.format((((double)correct1[a] / (correct1[a] + wrong1[a]))*100)));**

请参阅下面的修订代码：

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    int[] correct1 = {20, 20, 13, 15, 22, 18, 19, 21, 23, 25};
    int[] incorrect1 = {2, 1, 5, 2, 2, 5, 8, 1, 0, 0};

        double[] percentage1 = new double[correct1.length];
        DecimalFormat df = new DecimalFormat("#.##");
        for(int a = 0; a < correct1.length; a++ ){ 
                 percentage1[a] = Double.valueOf(df.format((((double)correct1[a] / (correct1[a] + incorrect1[a]))*100)));
                 System.out.println(percentage1[a]);
            }

} 
```

样本结果：

```
90.91
95.24
72.22
88.24
91.67
78.26
70.37
95.45
100.0
100.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:32:38.007

你不能。双打没有小数位。他们有二进制的地方。如果您想要小数位，则必须使用小数基数，即由`DecimalFormat`或`BigDecimal`.

证明[在这里](https://stackoverflow.com/a/12684082/207421)。

# ios - ios使用mailcore发送电子邮件不起作用

> ID：16181622
> 
> 赞同：1
> 
> 时间：2013-04-24T00:53:38.747
> 
> 标签：ios, mailcore

我正在尝试使用 MailCore 发送电子邮件，但没有发送电子邮件。请建议我是否做错了什么。发送电子邮件的代码如下：

```
-(void) sendMail{
     NSLog(@"entered");
    CTCoreMessage *testMsg = [[CTCoreMessage alloc] init];
    [testMsg setTo:[NSSet setWithObject:[CTCoreAddress addressWithName:@"recipients name" email:@"recipient@gmail.com"]]];
    [testMsg setFrom:[NSSet setWithObject:[CTCoreAddress addressWithName:@"sender name(me)" email:@"my_e_mail@google.com"]]];
    [testMsg setBody:@"This is a test message!"];
    [testMsg setSubject:@"This is a subject"];
    NSLog(@"Init values");
    NSError *error;
    BOOL success = [CTSMTPConnection sendMessage:testMsg
                                          server:@"smtp.gmail.com"
                                        username:@"my_e_mail"
                                        password:@"pwd"
                                            port:587
                                  connectionType:CTSMTPConnectionTypeStartTLS
                                         useAuth:YES
                                           error:&error];
    NSLog(@"Success is %c", success);
    if (!success) {
        // Present the error
        NSLog(@"Mail not sent");
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-08-31T13:05:28.940

这是您可以使用的示例代码：

```
MCOSMTPSession *smtpSession = [[MCOSMTPSession alloc] init];
smtpSession.hostname = @"smtp.gmail.com";
smtpSession.port = 465;
smtpSession.username = USERNAME;
smtpSession.password = PASSWORD;
smtpSession.connectionType = MCOConnectionTypeTLS;

MCOMessageBuilder * builder = [[MCOMessageBuilder alloc] init];
[[builder header] setFrom:[MCOAddress addressWithDisplayName:nil mailbox:USERNAME]];
NSMutableArray *to = [[NSMutableArray alloc] init];
for(NSString *toAddress in RECIPIENTS) {
    MCOAddress *newAddress = [MCOAddress addressWithMailbox:toAddress];
    [to addObject:newAddress];
}
[[builder header] setTo:to];
NSMutableArray *cc = [[NSMutableArray alloc] init];
for(NSString *ccAddress in CC) {
    MCOAddress *newAddress = [MCOAddress addressWithMailbox:ccAddress];
    [cc addObject:newAddress];
}
[[builder header] setCc:cc];
NSMutableArray *bcc = [[NSMutableArray alloc] init];
for(NSString *bccAddress in BCC) {
    MCOAddress *newAddress = [MCOAddress addressWithMailbox:bccAddress];
    [bcc addObject:newAddress];
}
[[builder header] setBcc:bcc];
[[builder header] setSubject:SUBJECT];
[builder setHTMLBody:BODY];
NSData * rfc822Data = [builder data];

MCOSMTPSendOperation *sendOperation = [smtpSession sendOperationWithData:rfc822Data];
[sendOperation start:^(NSError *error) {
    if(error) {
        NSLog(@"%@ Error sending email:%@", USERNAME, error);
    } else {
        NSLog(@"%@ Successfully sent email!", USERNAME);
    } 
```

在这里您可以找到此示例代码的参考（[示例代码](https://github.com/MailCore/mailcore2/wiki/SMTP-Examples)）。

# javascript - 如何在 JavaScript 中从内存中删除对象？

> ID：16181624
> 
> 赞同：1
> 
> 时间：2013-04-24T00:53:41.907
> 
> 标签：javascript, memory, garbage-collection, easeljs, box2dweb

我正在使用 EaselJS 和 Box2DWeb 创建一个射箭游戏。每次箭头与另一个物体碰撞时，它就会死掉，我调用这个函数：

```
if(body.dead){
    removeActor(body.GetUserData()) //the user data is the actor object (sprite) of the arrow
    world.DestroyBody(body);
    delete body;
    bodies.splice(i, 1);
    i--;
} 
```

和 removeActor 函数：

```
 // remove actor and it's skin object
var removeActor = function(actor) {
        if(actor){
    stage.removeChild(actor.skin);
    actors.splice(actors.indexOf(actor),1);
            delete actor;                
        }
} 
```

我尝试不断创建箭头并检查内存是否已被释放（使用 chrome 任务管理器），但使用的内存只会增加。有没有办法让我从内存中完全删除这些对象？

# java - 如何检索包含搜索词子字符串的 DBObject？

> ID：16181626
> 
> 赞同：0
> 
> 时间：2013-04-24T00:53:49.883
> 
> 标签：java, mongodb, substring, dbobject

我正在使用带有 Java 驱动程序的 MongoDB ( [http://tinyurl.com/dyjxz8k](http://tinyurl.com/dyjxz8k) )。在我的应用程序中，我希望能够提供包含用户搜索词子字符串的结果。该方法如下所示：

*searchlabel = 字段名称 *searchTerm = 用户搜索词

```
 private void dbSearch(String searchlabel, String searchTerm){
    if(searchTerm != null && (searchTerm.length() > 0)){

        DBCollection coll = db.getCollection("MediaCollection");
        BasicDBObject query = new BasicDBObject(searchlabel, searchTerm);
        DBCursor cursor = coll.find();
        cursor = coll.find(query);

        try {
            while(cursor.hasNext()) {
                System.out.println(cursor.next());
                //view.showResult(cursor.next());
            }
        } finally {
            cursor.close();
        }

    }
} 
```

有人知道我该如何解决这个问题吗？在此先感谢=）还有一个小问题：如何根据（JLabel 中的）视图中的表示来处理 DBObjects？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:39:01.540

对于 Mongo 中的文本搜索，有两个选项：

*   [`$regex`运算符](http://docs.mongodb.org/manual/reference/operator/regex/)- 但是，除非您有一个简单的前缀正则表达式，否则查询不会使用索引，并且会导致完全扫描，这通常很慢
*   在 Mongo 2.4 中，引入了新的[文本索引](http://docs.mongodb.org/manual/reference/command/text/#dbcmd.text)。查询会将您的`text`查询拆分为单词，并对包含任何单词的文档进行或搜索。文本索引还消除了一些停用词，并为某些语言提供了简单的词干提取（参见[文档](http://docs.mongodb.org/manual/core/indexes/#index-feature-text)）。

如果您正在寻找更高级的全文搜索引擎，具有更强大的标记、词干提取、自动完成等功能，那么 ElasticSearch 可能更[合适](http://www.elasticsearch.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:34:13.903

我在 mongo 控制台中使用此方法在 JavaScript 中使用正则表达式进行搜索：

```
// My name to search for
var searchWord = "alex";

// Construct a query with a simple /^alex$/i regex
var query = {};
query.animalName = new RegExp("^"+searchWord+"$","i");

// Perform find operation
var lionsNamedAlex = db.lions.find(query); 
```

# c - 在 GCC 4.8 上构建 Python (2.7) 模块失败

> ID：16181628
> 
> 赞同：-2
> 
> 时间：2013-04-24T00:53:54.033
> 
> 标签：c, gcc, python-2.7, compilation

我正在尝试使用 C API 构建 Python 模块/扩展编写，但它失败了：

```
% python2 cmath.py build
running build
running build_ext
building 'c_math' extension
creating build
creating build/temp.linux-x86_64-2.7
gcc -pthread -fno-strict-aliasing -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector --param=ssp-buffer-size=4 -D_FORTIFY_SOURCE=2 -DNDEBUG -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector --param=ssp-buffer-size=4 -D_FORTIFY_SOURCE=2 -fPIC -I/usr/include/python2.7 -c c_math.c -o build/temp.linux-x86_64-2.7/c_math.o
c_math.c:18:5: warning: initialization from incompatible pointer type [enabled by default]
 {"more", c_math_more, METH_VARARGS, "n + nn Using C API"},
 ^
c_math.c:18:5: warning: (near initialization for ‘c_mathMethods[0].ml_meth’) [enabled by default]
In file included from /usr/include/python2.7/Python.h:58:0,
             from c_math.c:1:
/usr/include/python2.7/pyport.h:802:39: error: expected ‘,’ or ‘;’ before ‘void’
 #               define PyMODINIT_FUNC void
                                   ^
c_math.c:22:1: note: in expansion of macro ‘PyMODINIT_FUNC’
 PyMODINIT_FUNC
 ^
error: command 'gcc' failed with exit status 1 
```

我尝试在没有 distutils 的情况下手动构建，但我收到相同的错误/警告消息

c_math.c：

```
#include <Python.h>

static PyObject *
c_math_more(PyObject *self, PyObject *n, PyObject *nn) {
    if ( PyInt_Check(n) && PyInt_Check(nn) ) {
        float cn, cnn, result;

        cn = PyInt_AsLong(n);
        cnn = PyInt_AsLong(nn);

        result = cn + cnn;

        return PyInt_FromLong(result);
    }
}

static PyMethodDef c_mathMethods[] = {
    {"more", c_math_more, METH_VARARGS, "n + nn Using C API"},
    {NULL, NULL, 0, NULL}
}

PyMODINIT_FUNC
initc_math() {
    (void) Py_InitModule("c_math", c_mathMethods);
}

int
main(int argc, char *argv[]) {
    Py_SetProgramName(argv[0]);

    Py_Initialize();

    initc_math();
} 
```

和 cmath.py：

```
from distutils.core import setup, Extension

c_math = Extension('c_math', sources = ['c_math.c'])

setup(name = 'c_math',
      version = '1.0',
      description = "c_math setup",
      ext_modules = [c_math]) 
```

我在做什么不正确？

ps：拜托，如果c_math.c上存在其他错误（我的意思是gcc没有显示的错误）不要跟我说话，我想自己找到错误^^

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:08:29.710

```
 static PyMethodDef c_mathMethods[] = {
      {"more", c_math_more, METH_VARARGS, "n + nn Using C API"},
      {NULL, NULL, 0, NULL}
- }
+ }; 
```

你最后少了一个分号......

# c++ - 如果 std::string 确实是整数，如何检查它？

> ID：16181630
> 
> 赞同：5
> 
> 时间：2013-04-24T00:54:21.147
> 
> 标签：c++, string, integer, type-conversion, typechecking

以下代码将转换`std::string`为`int`，问题在于它无法区分真正的整数或随机字符串。是否有处理此类问题的系统方法？

```
#include <cstring>
#include <iostream>
#include <sstream>

int main()
{
    std::string str =  "H";

    int int_value;
    std::istringstream ss(str);
    ss >> int_value;

    std::cout<<int_value<<std::endl;

    return 0;
} 
```

**编辑**：这是我喜欢的解决方案，因为它非常简约和优雅！它不适用于负数，但无论如何我只需要正数。

```
#include <cstring>
#include <iostream>
#include <sstream>

int main()
{
    std::string str =  "2147483647";

    int int_value;
    std::istringstream ss(str);

    if (ss >> int_value)
        std::cout << "Hooray!" << std::endl;

    std::cout<<int_value<<std::endl;

    str =  "-2147483648";
    std::istringstream negative_ss(str);

    if (ss >> int_value)
        std::cout << "Hooray!" << std::endl;

    std::cout<<int_value<<std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T00:59:02.013

您可以尝试使用 Boost `lexical_cast`，如果转换失败，它将抛出异常。

```
int number;
try
{
     number = boost::lexical_cast<int>(str);
}
catch(boost::bad_lexical_cast& e)
{
    std::cout << str << "isn't an integer number" << std::endl;
} 
```

**编辑** 根据@chris，您也可以尝试`std::stoi`从 C++11 开始使用。`std::invalid_argument`如果无法执行转换，它将抛出异常。您可以在这里找到更多信息：[std::stoi](http://en.cppreference.com/w/cpp/string/basic_string/stol)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T01:09:57.730

WhozCraig 的方法要好得多，我想使用[C++ FAQ](http://www.parashift.com/c++-faq/convert-string-to-num.html)使用的方法对其进行扩展，如下所示：

```
#include <iostream>
#include <sstream>
#include <string>
#include <stdexcept>

class BadConversion : public std::runtime_error {
public:
  BadConversion(std::string const& s)
    : std::runtime_error(s)
    { }
};

inline int convertToInt(std::string const& s,
                              bool failIfLeftoverChars = true)
{
  std::istringstream i(s);
  int x;
  char c;
  if (!(i >> x) || (failIfLeftoverChars && i.get(c)))
    throw BadConversion("convertToInt(\"" + s + "\")");
  return x;
}

int main()
{
    std::cout << convertToInt( "100" ) << std::endl ;
    std::cout << convertToInt( "-100" ) << std::endl ;
    std::cout << convertToInt( "  -100" ) << std::endl ;
    std::cout << convertToInt( "  -100  ", false ) << std::endl ;

    // The next two will fail
    std::cout << convertToInt( "  -100  ", true ) << std::endl ;
    std::cout << convertToInt( "H" ) << std::endl ;
} 
```

这是健壮的，并且会知道转换是否失败，您还可以选择在剩余字符上失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:56:17.300

```
/* isdigit example */
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
int main ()
{
  char str[]="1776ad";
  int year;
  if (isdigit(str[0]))
  {
    year = atoi (str);
    printf ("The year that followed %d was %d.\n",year,year+1);
  }
  return 0;
} 
```

# android - 如何获取 CACHED 进程的列表？

> ID：16181631
> 
> 赞同：0
> 
> 时间：2013-04-24T00:54:21.560
> 
> 标签：android, process

我正在尝试获取缓存进程的列表。我已经知道如何通过类名获取正在运行的进程和服务，但是如何通过它们的主机名获取缓存进程和服务的列表？

如果您在安卓设备上进行设置，然后单击“应用程序”，然后按菜单按钮选择“运行”，您可以在正在运行的服务或缓存进程之间切换。我正在尝试按类名获取所有缓存进程的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:30:33.900

您可以在 android 的设置中检查源代码： [http](http://androidxref.com/4.2_r1/xref/packages/apps/Settings/src/com/android/settings/applications/RunningProcessesView.java) ://androidxref.com/4.2_r1/xref/packages/apps/Settings/src/com/android/settings/applications/RunningProcessesView.java 并检查各种： `mSetBackground`在`ActiveItem` 所有`mSetBackground = true`是缓存的进程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:18:48.523

所以我有点明白了，这正是设置视图所做的。

```
StringBuilder temp = new StringBuilder();
                for(RunningAppProcessInfo processInfo : am.getRunningAppProcesses()){

                    if(processInfo.importance == 400) {
                        temp.append(processInfo.processName);
                        temp.append("\n");
                    } 
```

但它只返回包名称而不是完整的活动名称。

# android - 空指针异常导致 Android App Activity 无法暂停

> ID：16181633
> 
> 赞同：1
> 
> 时间：2013-04-24T00:55:09.663
> 
> 标签：android, nullpointerexception, onpause, savestate

LOGCAT

```
 FATAL EXCEPTION: main
 E/AndroidRuntime(1937): java.lang.RuntimeException: Unable to pause activity {michelle.glucose/michelle.glucose.ProfileDetailActivity}: java.lang.NullPointerException
 E/AndroidRuntime(1937):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3016)
 E/AndroidRuntime(1937):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2971)
 E/AndroidRuntime(1937):    at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2949)
 E/AndroidRuntime(1937):    at android.app.ActivityThread.access$800(ActivityThread.java:141)
 E/AndroidRuntime(1937):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1251)
 E/AndroidRuntime(1937):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(1937):     at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(1937):     at android.app.ActivityThread.main(ActivityThread.java:5041)
E/AndroidRuntime(1937):     at java.lang.reflect.Method.invokeNative(Native Method)
 E/AndroidRuntime(1937):    at java.lang.reflect.Method.invoke(Method.java:511)
 E/AndroidRuntime(1937):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 E/AndroidRuntime(1937):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 E/AndroidRuntime(1937):    at dalvik.system.NativeStart.main(Native Method)
  E/AndroidRuntime(1937): Caused by: java.lang.NullPointerException
  E/AndroidRuntime(1937):   at michelle.glucose.ProfileDetailActivity.saveState(ProfileDetailActivity.java:201)
E/AndroidRuntime(1937):     at michelle.glucose.ProfileDetailActivity.onPause(ProfileDetailActivity.java:190)
 E/AndroidRuntime(1937):    at android.app.Activity.performPause(Activity.java:5206)
 E/AndroidRuntime(1937):    at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1226)
 E/AndroidRuntime(1937):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3002) 
```

您好，当我尝试保存到我的数据库时，我不断收到上述错误，这可能真的很愚蠢，我似乎在我的保存状态和暂停方法中看不到，因为我几乎完全相同的代码可以完美地为另一个工作数据库。我已经比较了两者，似乎看不出我哪里出错了！！！！如果有人能看一下并指出对我来说显而易见的事情，我将不胜感激！（一双新鲜的眼睛总是有帮助的！）

非常感谢！

米歇尔！

简介详细活动

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import michelle.glucose.contentprovider.MyLogContentProvider;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.TimePickerDialog;
import android.content.ContentValues;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.text.TextUtils;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.TimePicker;
import android.widget.Toast;

   /*
    * TodoDetailActivity allows to enter a new todo item 
    * or to change an existing
    */
public class ProfileDetailActivity extends Activity  {
private EditText sms;
private EditText email ;
private EditText  name;
private EditText  DOB;
public  TextView textView1;
public  TextView  textView2 ;
private Spinner type;
private Spinner units;
private Spinner Gender;

private EditText max;
private EditText min;

  private Uri progUri;
  @Override
    protected void onCreate(Bundle bundle) {
super.onCreate(bundle);
setContentView(R.layout.pro_pref);

textView1 = (TextView) findViewById(R.id.textView1);
textView2 = (TextView) findViewById(R.id.textView2);

type = (Spinner) findViewById(R.id.type);
units = (Spinner) findViewById(R.id.units);
Gender = (Spinner) findViewById(R.id.Gender);
max = (EditText) findViewById(R.id.max);
min = (EditText) findViewById(R.id.min);
sms = (EditText) findViewById(R.id.sms);
email = (EditText) findViewById(R.id.Email);
DOB = (EditText) findViewById(R.id.dob);
name = (EditText) findViewById(R.id.name);

Button confirmButton = (Button) findViewById(R.id.Confirm);

Bundle extras = getIntent().getExtras();

// Check from the saved Instance
progUri = (bundle == null) ? null : (Uri) bundle
    .getParcelable(MyLogContentProvider.CONTENT_ITEM_TYPE);

// Or passed from the other activity
if (extras != null) {
  progUri = extras
      .getParcelable(MyLogContentProvider.CONTENT_ITEM_TYPE);

  fillData(progUri);
}

confirmButton.setOnClickListener(new View.OnClickListener() {
  public void onClick(View view) {
    if (TextUtils.isEmpty(DOB.getText().toString())) { SAYS ERROR HERE???
      makeToast();
    } else {
      setResult(RESULT_OK);
      finish();
    }
  }

   });

   }

  public void fillData(Uri uri) {
    String[] projection =              {ProTable.COLUMN_NAME,ProTable.COLUMN_DOB,
   ProTable.COLUMN_GENDER,ProTable.COLUMN_UNIT,                   ProTable.COLUMN_MIN,ProTable.COLUMN_MAX,                                         
            ProTable.COLUMN_TYPE, ProTable.COLUMN_EMAIL,ProTable.COLUMN_NUMBER,
        ProTable.COLUMN_ID };
Cursor cursor = getContentResolver().query(uri, projection, null, null,
    null);
if (cursor != null) {
  cursor.moveToFirst();
  String idstr = cursor.getString(cursor.getColumnIndexOrThrow(ProTable.COLUMN_ID));

  String u = cursor.getString(cursor
      .getColumnIndexOrThrow(ProTable.COLUMN_UNIT));

  for (int i = 0; i < units.getCount(); i++) {

    String s = (String) units.getItemAtPosition(i);
    if (s.equalsIgnoreCase(u))
      units.setSelection(i);
    }

String g = cursor.getString(cursor.getColumnIndexOrThrow(ProTable.COLUMN_GENDER));
  for (int i = 0; i < Gender.getCount(); i++) {

    String s = (String) Gender.getItemAtPosition(i);
    if (s.equalsIgnoreCase(g)) {
      Gender.setSelection(i);
    }
  }

  String t = cursor.getString(cursor.getColumnIndexOrThrow(ProTable.COLUMN_TYPE));
  for (int i = 0; i < type.getCount(); i++) {

    String s = (String) type.getItemAtPosition(i);
    if (s.equalsIgnoreCase(t)) {
      type.setSelection(i);
    }
  }  

  name.setText(cursor.getString(cursor
      .getColumnIndexOrThrow(ProTable.COLUMN_NAME)));
  DOB.setText(cursor.getString(cursor
      .getColumnIndexOrThrow(ProTable.COLUMN_DOB)));
  min.setText(cursor.getString(cursor
          .getColumnIndexOrThrow(ProTable.COLUMN_MIN)));
      max.setText(cursor.getString(cursor
          .getColumnIndexOrThrow(ProTable.COLUMN_MAX)));
      email.setText(cursor.getString(cursor
              .getColumnIndexOrThrow(ProTable.COLUMN_EMAIL)));
          sms.setText(cursor.getString(cursor
              .getColumnIndexOrThrow(ProTable.COLUMN_NUMBER)));

  // Always close the cursor
  cursor.close();}
}

   protected void onSaveInstanceState(Bundle outState) {
   super.onSaveInstanceState(outState);
   saveState();
    outState.putParcelable(MyLogContentProvider.CONTENT_ITEM_TYPE, progUri);
    }

       @Override
   protected void onPause() {
      super.onPause();
saveState();
     }

     private void saveState() {

  String t = (String) type.getSelectedItem();
  String u = (String) units.getSelectedItem();
String g = (String) Gender.getSelectedItem();
String n = name.getText().toString();
String d = DOB.getText().toString();
String mi = min.getText().toString();
String ma = max.getText().toString();
String e = email.getText().toString();
String s = sms.getText().toString();
// Only save if either summary or description
// is available

if (d.length() ==0) {
  return;
}

ContentValues values = new ContentValues();

values.put(ProTable.COLUMN_NAME, n);
values.put(ProTable.COLUMN_DOB, d);
values.put(ProTable.COLUMN_GENDER, g);
values.put(ProTable.COLUMN_UNIT, u);
values.put(ProTable.COLUMN_TYPE, t);
values.put(ProTable.COLUMN_MIN, mi);
values.put(ProTable.COLUMN_MAX, ma);
values.put(ProTable.COLUMN_EMAIL, e);
values.put(ProTable.COLUMN_NUMBER, s);
if (progUri == null) {
  // New log
  progUri = getContentResolver().insert(MyLogContentProvider.CONTENT_URI, values);
} else {
  // Update log
  getContentResolver().update(progUri, values, null, null);
}
  }

 private void makeToast() {
Toast.makeText(ProfileDetailActivity.this, "Please maintain a glucose log",
    Toast.LENGTH_LONG).show();
  } 
```

数据库内容提供者

```
 import java.util.Arrays;
 import java.util.HashSet;

   import michelle.glucose.ProTable;
  import michelle.glucose.ProfileDatabaseHelper;

  import android.content.ContentProvider;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.UriMatcher;
  import android.database.Cursor;
   import android.database.sqlite.SQLiteDatabase;
  import android.database.sqlite.SQLiteQueryBuilder;
import android.net.Uri;
import android.text.TextUtils;

public class MyProfileContentProvider extends ContentProvider {

    // database
    private ProfileDatabaseHelper database;

  // Used for the UriMacher
  private static final int PRO = 10;
  private static final int PROD = 20;

     private static final String AUTHORITY =                   
    "michelle.glucose.contentprovider.MyProfileContentProvider";

   private static final String BASE_PATH = "pros";
     public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
  + "/" + BASE_PATH);

  public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
  + "/pros";
 public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
  + "/pro";

  private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
 static {
  sURIMatcher.addURI(AUTHORITY, BASE_PATH, PRO);
   sURIMatcher.addURI(AUTHORITY, BASE_PATH + "/#", PROD);
  }

 @Override
public boolean onCreate() {
   database = new ProfileDatabaseHelper(getContext());
return false;
   }

  @Override
  public Cursor query(Uri uri, String[] projection, String selection,
  String[] selectionArgs, String sortOrder) {

// Uisng SQLiteQueryBuilder instead of query() method
SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

// Check if the caller has requested a column which does not exists
checkColumns(projection);

// Set the table
queryBuilder.setTables(ProTable.TABLE_PRO);

int uriType = sURIMatcher.match(uri);
switch (uriType) {
case PRO:
  break;
case PROD:
  // Adding the ID to the original query
  queryBuilder.appendWhere(ProTable.COLUMN_ID + "="
      + uri.getLastPathSegment());
  break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
}

SQLiteDatabase db = database.getWritableDatabase();
Cursor cursor = queryBuilder.query(db, projection, selection,
    selectionArgs, null, null, sortOrder);
// Make sure that potential listeners are getting notified
cursor.setNotificationUri(getContext().getContentResolver(), uri);

return cursor;
   }

   @Override
    public String getType(Uri uri) {
    return null;
     }

    @Override
  public Uri insert(Uri uri, ContentValues values) {
  int uriType = sURIMatcher.match(uri);
  SQLiteDatabase sqlDB = database.getWritableDatabase();
   int rowsDeleted = 0;
   long id = 0;
  switch (uriType) {
   case PRO:
    id = sqlDB.insert(ProTable.TABLE_PRO, null, values);
    break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
   }
getContext().getContentResolver().notifyChange(uri, null);
return Uri.parse(BASE_PATH + "/" + id);
  }

    @Override
 public int delete(Uri uri, String selection, String[] selectionArgs) {
int uriType = sURIMatcher.match(uri);
SQLiteDatabase sqlDB = database.getWritableDatabase();
int rowsDeleted = 0;
switch (uriType) {
case PRO:
  rowsDeleted = sqlDB.delete(ProTable.TABLE_PRO, selection,
      selectionArgs);
  break;
case PROD:
  String id = uri.getLastPathSegment();
  if (TextUtils.isEmpty(selection)) {
    rowsDeleted = sqlDB.delete(ProTable.TABLE_PRO,
        ProTable.COLUMN_ID + "=" + id, 
        null);
  } else {
    rowsDeleted = sqlDB.delete(ProTable.TABLE_PRO,
        ProTable.COLUMN_ID + "=" + id 
        + " and " + selection,
        selectionArgs);
  }
  break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
}
getContext().getContentResolver().notifyChange(uri, null);
return rowsDeleted;
 }

  @Override
  public int update(Uri uri, ContentValues values, String selection,
  String[] selectionArgs) {

int uriType = sURIMatcher.match(uri);
SQLiteDatabase sqlDB = database.getWritableDatabase();
int rowsUpdated = 0;
switch (uriType) {
case PRO:
  rowsUpdated = sqlDB.update(ProTable.TABLE_PRO, 
      values, 
      selection,
      selectionArgs);
  break;
case PROD:
  String id = uri.getLastPathSegment();
  if (TextUtils.isEmpty(selection)) {
    rowsUpdated = sqlDB.update(ProTable.TABLE_PRO, 
        values,
        ProTable.COLUMN_ID + "=" + id, 
        null);
  } else {
    rowsUpdated = sqlDB.update(ProTable.TABLE_PRO, 
        values,
        ProTable.COLUMN_ID + "=" + id 
        + " and " 
        + selection,
        selectionArgs);
  }
  break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
}
getContext().getContentResolver().notifyChange(uri, null);
return rowsUpdated;
  }

     private void checkColumns(String[] projection) {
       String[] available = {ProTable.COLUMN_NAME,ProTable.COLUMN_DOB,
       ProTable.COLUMN_GENDER,ProTable.COLUMN_TYPE,ProTable.COLUMN_MIN,                          

        ProTable.COLUMN_MAX,ProTable.COLUMN_UNIT,

      ProTable.COLUMN_NUMBER,
                    ProTable.COLUMN_EMAIL,
    ProTable.COLUMN_ID };
     if (projection != null) {
    HashSet<String> requestedColumns = new HashSet<String>(Arrays.asList(projection));
    HashSet<String> availableColumns = new HashSet<String>(Arrays.asList(available));
    // Check if all columns which are requested are available
       if (!availableColumns.containsAll(requestedColumns)) {
    throw new IllegalArgumentException("Unknown columns in projection");
       }
    }
     }

    } 
```

配置文件表

```
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

 public class ProTable {
 private static final String DATABASE_NAME = "protable.db";                               
  private static final int DATABASE_VERSION = 1;
private ProfileDatabaseHelper psqLiteHelper;
private SQLiteDatabase pdb; 
private Context context;
   // Database table
 public static final String TABLE_PRO = "pro";
 public static final String COLUMN_ID = "_id";
  public static final String COLUMN_NAME = "name";
  public static final String COLUMN_DOB = "dob";
 public static final String COLUMN_GENDER = "gender";
 public static final String COLUMN_TYPE = "type";
 public static final String COLUMN_GLU = "glu";
 public static final String COLUMN_MIN = "min";
 public static final String COLUMN_MAX = "max";
 public static final String COLUMN_EMAIL = "email";
 public static final String COLUMN_UNIT = "unit";
 public static final String COLUMN_NUMBER = "number";

 // Database creation SQL statement
  private static final

   String DATABASE_CREATE = "create table " 
  + TABLE_PRO
  + "(" 
  + COLUMN_ID + " integer primary key autoincrement, " 
  + COLUMN_NAME + " text not null, " 
  + COLUMN_DOB + " text not null," 
  + COLUMN_GENDER + " text not null,"
  + COLUMN_TYPE + " text not null,"
  + COLUMN_MIN + " text not null,"
  + COLUMN_MAX + " text not null,"
  + "COLUMN_UNIT" + "text not null,"
   + COLUMN_EMAIL + " text not null,"
  + COLUMN_NUMBER + " text not null"
   + ");";

   public ProTable(Context ctx) {
    this.context = ctx;
    psqLiteHelper = new ProfileDatabaseHelper(context);
}

public ProTable openToRead() throws android.database.SQLException {
        psqLiteHelper = new ProfileDatabaseHelper(context, DATABASE_NAME, null,
                DATABASE_VERSION);
        pdb = psqLiteHelper.getReadableDatabase();
        return this; }

  public Cursor getEmail (String email) throws android.database.SQLException{
        Cursor mCursor 
      = pdb.query(TABLE_PRO, new String[] {COLUMN_ID,   COLUMN_EMAIL },                    

      COLUMN_EMAIL + "=" + email ,  null, null, null, null, null);
  if (mCursor != null ){
      mCursor.moveToFirst();
  }
   return mCursor;

  }

  public String getSMS () throws android.database.SQLException{
      Cursor mCursor 
      = pdb.query(TABLE_PRO, new String[] {COLUMN_ID,   COLUMN_NUMBER }, 

      COLUMN_NUMBER + "=" + COLUMN_NUMBER,  null, null, null, null, null);
  if (mCursor != null ){
      mCursor.moveToFirst();

  }String number =mCursor.getString(mCursor.getColumnIndexOrThrow(COLUMN_NUMBER));

 return number;

  } 

 public static void onCreate(SQLiteDatabase database) {
   database.execSQL(DATABASE_CREATE);
  }

  public static void onUpgrade(SQLiteDatabase database, int oldVersion,
  int newVersion) {
   Log.w(ProTable.class.getName(), "Upgrading database from version "
    + oldVersion + " to " + newVersion
    + ", which will destroy all old data");
   database.execSQL("DROP TABLE IF EXISTS " + TABLE_PRO);
    onCreate(database);
   }
   } 
```

数据库助手类

```
 import android.content.Context;
   import android.database.sqlite.SQLiteDatabase;
   import android.database.sqlite.SQLiteDatabase.CursorFactory;
   import android.database.sqlite.SQLiteOpenHelper;

   public class ProfileDatabaseHelper extends SQLiteOpenHelper {

     private static final String DATABASE_NAME = "protable.db";
    private static final int DATABASE_VERSION = 1;

   public ProfileDatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
      }

    public ProfileDatabaseHelper(Context context, String databaseName,
      CursorFactory factory, int databaseVersion) {
  super(context, databaseName , factory, databaseVersion);
      }

     public ProfileDatabaseHelper(Context context, String databaseName,
    Object factory, int databaseVersion) {
super(context, DATABASE_NAME, null,  DATABASE_VERSION);
      }

     // Method is called during creation of the database
      @Override
     public void onCreate(SQLiteDatabase database) {
       ProTable.onCreate(database);
      }

    // Method is called during an upgrade of the database,
    // e.g. if you increase the database version
     @Override
   public void onUpgrade(SQLiteDatabase database, int oldVersion,
     int newVersion) {
    ProTable.onUpgrade(database, oldVersion, newVersion);
    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:24:12.143

什么语句导致 saveState() 中的 NullPointerException？您正在尝试访问 null 但不应访问的内容，考虑到您正在尝试从 UI 读取值，这是有道理的。向自己证明它们都包含值，并在必要时逐行调试。

# c# - 使用 csv helper 将集合写入 csv 文件

> ID：16181634
> 
> 赞同：2
> 
> 时间：2013-04-24T00:55:16.250
> 
> 标签：c#, csv

我正在使用 csvhelper 将数据写入 csv 文件。我正在使用 C# 和 VS2010。我想写的对象是类型的复杂数据类型对象`Dictionary< long,List<HistoricalProfile>>`

下面是我用来将数据写入 csv 文件的代码：

```
Dictionary<long, List<HistoricalProfile>> profiles 
    = historicalDataGateway.GetAllProfiles(); 

var fileName = CSVFileName + ".csv";
CsvWriter writer = new CsvWriter(new StreamWriter(fileName));

foreach (var items in profiles.Values)    
{
    writer.WriteRecords(items);
}

writer.Dispose(); 
```

当它第二次循环时出现错误

> 标题记录已经写入。你不能多写一次。

你能告诉我我在这里做错了什么吗？我的最终目标是拥有一个包含大量记录列表的单个 csv 文件。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:00:45.617

你见过这个库[http://www.filehelpers.net/](http://www.filehelpers.net/)这使得读写 CSV 文件变得非常容易

那么你的代码就是

```
var profiles = historicalDataGateway.GetAllProfiles();  // should return a list of HistoricalProfile
var engine = new FileHelperEngine<HistoricalProfile>();
// To Write Use:
engine.WriteFile("FileOut.txt", res); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-24T08:30:28.913

我会更底层并自己遍历集合：

```
var fileName = CSVFileName + ".csv";

var writer = new StreamWriter(fileName);

foreach (var items in profiles.Values)
{
    writer.WriteLine(/*header goes here, if needed*/);
    foreach(var item in items)
    {
        writer.WriteLine(item.property1 +"," +item.propery2...);
    }
}
writer.Close(); 
```

如果您想让例程更有用，您可以使用反射来获取您希望写出的属性列表并从那里构建您的记录。

# css - 这个 HTML5 砖是怎么掉下来的？

> ID：16181638
> 
> 赞同：14
> 
> 时间：2013-04-24T00:55:28.600
> 
> 标签：css, html, layout

我准备了一个示例 jsfiddle 来展示我目前在布局中面临的问题：当我将内容动态插入到特定元素（砖块）中时，该元素会以一种超出我理解的方式与其父元素一起下沉的 HTML/CSS。当我删除内容时，原始布局会恢复，除非我使用的是 Chrome……然后它会保留其位置并在插入新内容时再次下降。

概念证明：http: [//jsfiddle.net/GADk9/](http://jsfiddle.net/GADk9/)

示例中的复选框只是切换块内的文本，仅此而已。我想知道上面的边距（是吗？）来自哪里。

这是一个完整的 HTML5 文档：

```
<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<title>HTML5 Falling Brick - What is this?</title>
<style>
#brick {
    background-color: lightgray;
    border: solid black medium;
    border-radius: 1em;
    color: red;
    font-size: 2em;
    height: 100%;
    text-align: center;
}
#contrail { background-color: lightblue; width: 20em; }
#pit { display: table; }
#pit>* { display: table-cell; }
#pit>*>* { height: 4em; }
</style>
</head>
<body>
    <div>
        <label>Click me twice
            <input onchange="document.getElementById('brick').innerHTML = this.checked ? 'FALL!!!' : ''" type='checkbox'></input>
        </label>
    </div>
    <div id='pit'>
        <div>
            <div>
            </div>
        </div>
        <div id='contrail'>
            <div>
                <div id='brick'></div>
            </div>
        </div>
    </div>
</body>
</html> 
```

# 更新

再次阅读我的问题后，我意识到这可能暗示我真正想要完成的是修复一些 HTML 的错误印象。为了明确强调这一点，我不需要在这里更改任何内容。砖块的例子只是我正在观察的问题的一个有趣的演示。我真的很想了解在这样的排列**中插入内容时导致元素改变位置的原因。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T03:03:25.323

你有

```
<div id='pit'>
    <div>
        <div>
        </div>
    </div>
    <div id='contrail'>
        <div>
            <div id='brick'></div>
        </div>
    </div>
</div> 
```

你正在使用

```
#pit { display: table; }
#pit>* { display: table-cell; }
#pit>*>* { height: 4em; } 
```

现在这是我们的问题，因为它说`#pit`的是表格，并且是一个表格单元，它每次都`#pit>*`在加起来。`height: 4em;`

现在这是我的解决方案。

```
#pit { display: block; }
#pit>* { display: table; }
#pit>*>* { height: 4em; display: table-cell;} 
```

[http://jsfiddle.net/AAbhishekk/GADk9/28/](http://jsfiddle.net/AAbhishekk/GADk9/28/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-02T05:43:58.287

在多次使用表格、表格行和表格单元格显示时，我已经看到浏览器之间的行为差​​异。首先，我从不使用它们，因为总会有更好的解决方案。但是，对于您的问题：

在处理旨在表现得像表格的 CSS 时，想想有点老派是有帮助的。

事实证明，让 Fiddle 中的 POC 正常运行的神奇 CSS 属性是垂直对齐。事实上，这解决了所有浏览器中奇怪的插入额外垂直空间的问题，而不仅仅是 Chrome，同时也解决了 Chrome 保留额外空间的问题。

看看这个小提琴的小修改：http: [//jsfiddle.net/rtzeK/](http://jsfiddle.net/rtzeK/)

```
#brick {
    background-color: lightgray;
    border: solid black medium;
    border-radius: 1em;
    color: red;
    font-size: 2em;
    height: 100%;
    text-align: center;
}
#contrail { background-color: lightblue; width: 20em; }
#pit { display: table; }
#pit>* { display: table-cell; vertical-align: top; }
#pit>*>* { height: 4em; } 
```

在我链接的小提琴中，我只是将显示的子项设置为：table-cell 以具有附加属性，vertical-align:top。事实证明，您可以将其设置为中间或底部，都具有相同的效果。它阻止了不当行为 - 显然 Chrome 需要被告知在这种情况下*如何表现。*

我确实觉得 Chrome 的行为不端有点奇怪，而且它似乎是一个错误。也就是说，我回到我之前关于避免像瘟疫一样的显示属性值的声明。显示的组合：inline、inline-block、block，结合相对和绝对定位，在父母和孩子之间适当地使用，使得其他麻烦的 css 属性，例如浮动，变得不必要。

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T13:53:13.303

如果您将标记简化为仅包含一个 div 的几个单元格，这将更容易理解。

```
<div class="cell left">
  <div class="inner"></div>
</div>
<div class="cell middle">
  <div class="inner"></div>
</div>
<div class="cell right">
  <div class="inner"></div>
</div> 
```

然后用一些像这样的 CSS 为每个 div 分配不同的高度。

```
.cell {
  display:table-cell;
  background-color:black;
  width:200px;
}

.inner {
  background-color:silver;
}

.left .inner {
  height:80px;
}
.middle .inner {
  height:140px;
}
.right .inner {
  height:100px;
} 
```

默认情况下，这些内部 div 与其基线垂直对齐。因此，没有任何文本，所有 div 都沿单元格底部对齐：

```
       +------+
       | |
       | +------+
+--------+ | |
| | | |
| | | |
+-----+------+------+

```

但是，如果您将文本添加到其中任何一个，则该 div 将被下推，以便第一行文本的基线与其他 div 的底部边缘对齐。

```
       +------+
       | |
       | |
+--------+ |      
| | +------+
| | |正文 |
+--------+------+ |
              | |
              +------+

```

正如其他人指出的那样，您可以通过设置不同的`vertical-align`属性来更改发生的情况。例如，添加`vertical-align:top`到*.cell*选择器会给你这样的东西：

```
+-----+------+------+
| | |正文 |
| | | |
+--------+ | |
       | +------+
       | |
       +------+           

```

我发现在 codepen 中玩这种东西最容易，你可以在其中看到所做的更改。[这是一个](http://codepen.io/anon/pen/EzHqr)实验的例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T01:38:16.917

这是我能想到的最好的主意，我希望我能做到，或者它至少接近它。
在您的 CSS 规则中，您有：

```
#pit { display: table; }
#pit>* { display: table-cell; }
#pit>*>* { height: 4em; } 
```

它告诉浏览器这`#pit`是一个表格，并且它的所有子元素都是单元格（而孙子元素是它们的样子，因为 CSS 没有强制显示）

# 在这里，我看到了 2 个问题：

## 问题 1

里面`#pit`你有：

```
<div>
    <div>
    </div>
</div>
<div id='contrail'>
    <div>
        <div id='brick'></div>
    </div>
</div> 
```

注意孩子，因为你有 2 个，选择器`#pit>*`说**每个`#pit`孩子** 我都会为此更改 CSS 规则：

```
#pit { display: table; }
#pit>#contrail { display: table-cell; }
#pit>#contrail>* { height: 4em; } 
```

但是要小心你想要什么，因为这会让`#pit>#contrail`4em高的孩子，而不是内在的孩子`#brick`，也许这就是你想要的，但要注意它。

## 问题 2 @ Chrome（如果您“解决”第一个问题，则不存在）

我不确定我在这里说什么，但是......这可能是一个 webkit 错误吗？Opera也会发生这种情况吗？
编辑：Opera 的行为不像 Chrome，它返回到正常布局，所以也许它毕竟不是 webkit 错误：/

所以你有一个表格和表格单元格，但是浏览器然后认为*“等等……如果这是一个表格，这是一个单元格……行在哪里！？”* ，所以它创造了一个“鬼排”，所以它可以快乐。但是，我不确定当您删除文本时“它”会怎么想，因为它“正常工作”。如果您查看开发人员工具，您会发现没有实际的行元素或类似的东西。
当您“重新添加”文本时，浏览器会介意=打击，因为表格布局。所以它再次重新创建行（拉伸`#pit`），可能是因为“幽灵行”没有被清除，或者因为`#pit`' 的高度永远不会再次重新计算，它只会在幽灵行产生时增加。

如果您想保留相同的 CSS 规则，则必须执行以下操作：

```
#pit { display: table; }
#pit>* { display: table-row; }
#pit>*>* { height: 4em; display: table-cell; } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-02T17:19:09.727

有时，最简单的答案会被忽略。无需将内容重置为空（例如“”），只需将空内容作为非中断空间开始，然后将其重置回非中断空间。表格单元格在没有内容时不会呈现。不间断的空间被单元格视为内容，因此它可以正确呈现。

[JSFiddle在这里](http://jsfiddle.net/GADk9/73/)

**这是摩擦：**

您需要将此规则添加到您的#brick 块中：

```
vertical-align: top; 
```

并且您需要为应该呈现内容的空表格单元格提供一些内容，以这种方式完成：

```
<div id='contrail'>
    <div>
        <div id='brick'>&nbsp;</div>
    </div>
</div> 
```

瞧，它已在 Chrome 中修复，并且在其他任何地方都以相同的方式显示。这是一个老式的表问题。看来 Chrome 决定忠实于他们在过去糟糕的日子里最初的行为方式。

或者，对于纯 CSS 解决方案，您也可以将内容规则添加到 #brick 块：

```
vertical-align: top;
content: '&nbsp;'; 
```

这以完全相同的方式工作。享受！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T02:17:01.893

```
#pit { display: table; }
#pit>* { display: table-cell; } 
```

以上导致它膨胀（而不是收缩）。这是预期的行为吗？不，因为它不会发生在 IE 或 Firefox 上，我相信这是一个误解`display: table`和`display: table-cell`行为的 Chrome 错误。`<div id="contrail">`在您删除文本的情况下，它似乎不会重新计算表格单元格的高度。

[看看这个小提琴](http://jsfiddle.net/PU57W/1/)- 我已经用实际的表格替换了 div。每次填充文本时，表格单元格的高度都会扩大，但在清除文本时会收缩回原始大小。我会得出结论，这是一个 Chrome 错误，因为这种 CSS 显示模式的目的是模仿`<table><td>`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T01:38:21.610

看起来 chrome 不满意 display:table-cell 里面 display:table 没有 display:table-row 介于两者之间。

如果你添加它（并给砖一些宽度），它会停止下降：

```
#brick {
    background-color: lightgray;
    border: solid black medium;
    border-radius: 1em;
    color: red;
    font-size: 2em;
    height: 100%;
    width: 200px;
    text-align: center;
}
#contrail { background-color: lightblue; width: 20em; }
#pit { display: table; }
#pit>* { display: table-row; }
#pit>*>* { display: table-cell; }
#pit>*>* { height: 4em; } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-02T21:25:08.170

我相信有一个奇怪的规则：

```
#brick {
    background-color: lightgray;
    border: solid black medium;
    border-radius: 1em;
    color: red;
    font-size: 2em;
    line-height:2em;
    height: 100%;
    text-align: center;
    margin:0;
    padding:0;
    height:2em;
}
#contrail { background-color: lightblue; width: 20em; }
#pit { display: table; }
#pit>* { display: table-cell; } 
```

[http://jsfiddle.net/GADk9/77/](http://jsfiddle.net/GADk9/77/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-03T15:16:21.663

答：浏览器不理解你的 html/css 布局组合，因为它没有按照官方规范格式化。格式不正确的 HTML 会使浏览器不正确地显示元素。

表格单元格必须有一个父表格行：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/tabular-data.html#the-td-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/tabular-data.html#the-td-element)

不允许将表格单元格作为表格元素的直接子元素：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/tabular-data.html#the-table-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/tabular-data.html#the-table-element)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-03T09:32:48.723

我注意到只是添加了一个

```
 <p> around your text </p> 
```

解决了问题

这是一个工作的[jsfiddle](http://jsfiddle.net/TDsouza/aan2D/)

# vb.net - 使用 Vb.NET 中的套接字将数据转发到另一台服务器

> ID：16181639
> 
> 赞同：0
> 
> 时间：2013-04-24T00:55:31.493
> 
> 标签：vb.net

我正在尝试测试一台服务器接受多个连接或多个客户端的场景。

目的是将数据转发到具有不同IP和不同端口的另一台服务器。每当我在另一台服务器上查看不同的连接时转发数据。

这是我的代码：

```
Private Sub ConectarTcp(ByVal id_gps As String, ByVal data As String)
    Try
        With WinSockClient                
            .IPDelHost = "192.168.5.8"
            .PuertoDelHost = 3030                
            .Conectar()
        End With            
        WinSockCliente.EnviarDatos(trama)
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try
End Sub

Public Sub Conectar()
    Dim tcpClnt As TcpClient
    Dim tcpThd As Thread 

    tcpClnt = New TcpClient()      

    tcpClnt.Connect(IPDelHost, PuertoDelHost)
    Stm = tcpClnt.GetStream()

    tcpThd = New Thread(AddressOf LeerSocket)
    tcpThd.Start()

End Sub

Public Sub EnviarDatos(ByVal Datos As String)
    Dim BufferDeEscritura() As Byte
    BufferDeEscritura = Encoding.ASCII.GetBytes(Datos)
    If Not (Stm Is Nothing) Then
        'Envio los datos al Servidor 
        Stm.Write(BufferDeEscritura, 0, BufferDeEscritura.Length)
    End If
End Sub 
```

# google-apps-script - ScriptDB Visualiser 不工作？Caja

> ID：16181643
> 
> 赞同：0
> 
> 时间：2013-04-24T00:56:27.550
> 
> 标签：google-apps-script, google-caja

我一直在使用出色的[ScriptDB 可视化工具](https://github.com/entaq/GoogleAppsScript/tree/master/ScriptDbVisualizer)来帮助开发 google-apps-script。

这使用 HTMLService 并在上周工作，但现在我无法让它工作。

HTML 仍然提供并加载，但没有运行 javascript。单击按钮时，错误控制台（在 Firefox 中）会给出错误；
**错误：不应该发生：ES5/3 对象传递给 makeDOMAccessible
源文件：[https](https://ssl.gstatic.com/caja/5346m/es53-taming-frame.opt.js?debug=1) ://ssl.gstatic.com/caja/5346m/es53-taming-frame.opt.js?debug=1 行：1788**

我怀疑有些Caja 问题，但我去了 Caja 游乐场并没有取得任何进展。

任何建议如何让它再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:19:50.697

正如消息所暗示的那样，这不应该发生。

也就是说，这是 Caja 中的一个内部错误，或者可能是 Google Apps 脚本对 Caja 的使用。请[在 Caja 问题跟踪器上报告它，](https://code.google.com/p/google-caja/issues/entry)包括一个（最好尽可能短）导致错误的 HTML 示例（最好在 Caja Playground 中运行时，但如果不是在 Google Apps 脚本中运行时）。

# mysql - 不允许为空，但应该可以为空

> ID：16181646
> 
> 赞同：0
> 
> 时间：2013-04-24T00:56:42.593
> 
> 标签：mysql, hibernate, jpa, h2

我有两个表加入一个映射表。不过，我遇到了一个空约束问题。下面是错误消息和两个映射。由于两者都是 manyTomany，我的假设是 many 可能没有，我怎样才能做到这样 product_id 或 category_id 都可以为空？

错误信息

```
Caused by: org.h2.jdbc.JdbcBatchUpdateException: NULL not allowed for column "PRODUCT_OPTION_ID"; SQL statement:
insert into ImageMapping (product_id, image_id) values (?, ?) [23502-168] 
```

类别

```
@JoinTable(
        name = "ImageMapping",
        joinColumns = @JoinColumn(name = "category_id"),
        inverseJoinColumns = @JoinColumn(name = "image_id")
)
@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.PERSIST)
private Set<Image> categoryImageId; 
```

产品

```
@JoinTable(
        name="ImageMapping",
        joinColumns = @JoinColumn(name = "product_id"),
        inverseJoinColumns = @JoinColumn(name = "image_id")
)
@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.PERSIST)
private Set<Image> productImageGroup; 
```

产品选项

```
@JoinTable(
        name="ImageMapping",
        joinColumns = @JoinColumn(name = "product_option_id"),
        inverseJoinColumns = @JoinColumn(name = "image_id")
)
@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
private Set<Image> productOptionImageGroup; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:19:04.457

您应该为每个关联创建一个单独的连接表，而不是尝试对所有关联使用同一个连接表。

# powershell - 脚本接受路径作为参数，然后删除所有空目录需要一些增强

> ID：16181648
> 
> 赞同：0
> 
> 时间：2013-04-24T00:56:53.997
> 
> 标签：powershell, directory

在@Shay Levy 的帮助下，我有这样一个脚本：

```
param (
[parameter (mandatory=$true,position=0)]
[string]$Path
)
Get-ChildItem $Path -Recurse -Force | 
Where-Object {$_.PSIsContainer -and (Get-ChildItem $_.FullName -Force | Measure-Object).Count -eq 0} | Remove-Item 
```

它的作用是：接受路径作为参数 - 递归查找所有目录 - 如果它是一个空文件夹（下面没有子项），它将被删除。它工作正常，但我想让它变得完美。

解释一个特殊情况的例子：我有一个文件夹这样的文件夹结构：`folder/subfolder1.1/subfolder2.1/subfolder3.1.`每个子文件夹都是其父项下的唯一子项。我有一个名为“文件夹”的目录，它只包含一个子文件夹“subfolder1.1”，没有文件。“Subfolder1.1”只包含一个子文件夹“subfolder2.1”，没有文件。“subfolder2.1”包含“subfolder3.1”并且没有文件。运行此脚本后，真正被删除的是“subfolder3.1”，这是有道理的。

这里有一些东西：在“subfolder3.1”被删除后，它的父文件夹“subfolder2.1”成为空文件夹并且可以被删除。但是由于脚本已经过了这一点，在我再次运行脚本之前，无法删除“subfolder2.1”。

完美的脚本会：先删除“subfolder3.1”，然后检查它的父文件夹，发现“哦，它的父子文件夹2.1现在也是空的，让我们删除它父文件夹subfolder2.1”。删除 subfolder2.1 后，检查其父文件夹，发现“哦，subfolder1.1 现在为空，我们删除它”。最终，在删除所有子文件夹后，该结构“文件夹”的顶层将被删除，因为它是空的。

我在脚本中添加了一个“排序降序”，它似乎对我没有任何作用。

```
param (
[parameter (mandatory=$true,position=0)]
[string]$Path
)
Get-ChildItem $Path -Recurse -Force | 
Where-Object {$_.PSIsContainer -and (Get-ChildItem $_.FullName -Force | Measure-Object).Count -eq 0} | 
Sort -descending |Remove-Item 
```

添加“排序”命令的逻辑是：上述文件夹结构按以下顺序管道：

```
folder
folder/subfolder1.1
folder/subfolder1.1/subfolder2.1
folder/subfolder1.1/subfolder2.1/subfolder3.1 
```

按上述顺序，删除“文件夹/子文件夹1.1/子文件夹2.1/子文件夹3.1”后，2.1和1.1和文件夹不能被删除，因为脚本已经通过了点。所以我在脚本中加入了“sort -descending”，希望这个文件夹结构按以下顺序传输：

```
folder/subfolder1.1/subfolder2.1/subfolder3.1
folder/subfolder1.1/subfolder2.1
folder/subfolder1.1
folder 
```

我希望它首先删除 3.1，然后它可以删除 2.1，因为在删除 3.1 后 2.1 变为空。等等。这个梦想很美好，但行不通。

===================================更新1：

2013 年 4 月 25 日：@mjolinor 感谢您的帮助。我立即运行它并收到这样的错误：

…………………………………………………………………………

```
+ Foreach {
+        ~
Missing opening '(' after keyword 'foreach'. 
```

…………………………………………………………………………

我通过在第一个 foreach 循环中修改这一行来修复它：

…………………………………………………………………………

```
Foreach ($dir in $dirs) { 
```

…………………………………………………………………………

现在上面的错误消失了，又向前移动了一步。当我可以运行它时，我可以看到它正在迭代文件夹，但最终出现另一个错误：

…………………………………………………………………………

```
Index operation failed; the array index evaluated to null.
At C:\Documents\ManualScripts\Cleanup-no-file-and-subdir-dir-rev02.ps1:11 char:13
+             $dirs[$_] = (Get-ChildItem $_ -Force | Measure-Object).Count
+             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : NullArrayIndex 
```

…………………………………………………………………………

正在研究它，并将与您分享。

==============================更新2：

2013 年 4 月 25 日

上述错误的原因是这一行：......

```
Foreach ($dir in $dirs) { 
```

............

改成：......

```
Foreach ($dir in $_) { 
```

............

错误消失了。我可以看到向下滚动控制台的目录列表。但似乎“排序”没有像我预期的那样工作，因为测试文件夹仍然显示“升序”顺序。摘录如下：

............

```
H:\archive\folder\Sub1
H:\archive\folder\Sub1\Sub2.1
H:\archive\folder\Sub1\Sub2.1\Sub3.1 
```

............

“folder\Sub1\Sub2.1\Sub3.1”是我创建的测试文件夹结构。

==================================== 更新3

2013 年 4 月 26 日。

现在可以了！

.........................................................

```
param (
[parameter (mandatory = $True, position = 0)]
[string]$Path
)
$dirs = @{}

Get-ChildItem $Path -Recurse -Force |
Where-Object {$_.PSIsContainer} |
Select -ExpandProperty FullName |
Foreach {
            $dirs[$_] = (Get-ChildItem $_ -Force | Measure-Object).Count
        }
$dirs.keys | Sort Length -Descending # This line is only for displaying output to mornitor sorting is all right
$dirs.keys | Sort Length -Descending  |
Foreach {
         If ($dirs[$_] -eq 0)
          {
           Remove-item $_
           $dirs[($_ | Split-Path -Parent)]--
           }
        } 
```

...................................................

谢谢@mjolinor。我喜欢哈希表:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:33:32.173

未经测试，但我认为这应该有效：

```
param (
[parameter (mandatory=$true,position=0)]
[string]$Path
)
$dirs = @{}

Get-ChildItem $Path -Recurse -Force | 
Where-Object {$_.PSIsContainer} |
select -ExpandProperty FullName
foreach {
         $dirs[$_] = (Get-ChildItem $_ -Force | Measure-Object).Count 
         }

$dirs.keys | Sort length -descending |
foreach {
          if ($dirs[$_] -eq 0)
            {
             Remove-Item $_
             $dirs[($_ | Split-Path -Parent)]--
             }
        } 
```

# r - Use the original columns to get a new matrix

> ID：16181650
> 
> 赞同：0
> 
> 时间：2013-04-24T00:57:40.307
> 
> 标签：r

I have a matrix which is made up of 4 columns (i.e. column 1, column 2, column 3 and column 4)

```
 V1 V2 V3 V4
1  1  1  1  1
2  1  1  1  1
3  1 -1 -1 -1
4  1 -1 -1 -1
5  2  1  1 -1
6  2  1  1 -1
7  2 -1 -1  1
8  2 -1 -1  1
9  3  1 -1  1
10 3  1 -1  1
11 3 -1  1 -1
12 3 -1  1 -1
13 4  1 -1 -1
14 4  1 -1 -1
15 4 -1  1  1
16 4 -1  1  1 
```

My question is: I want to use this 4 columns to get a new matrix which has 15 columns. And these 15 columns are:

```
1, 2, 3, 4, 12, 13, 14, 23, 24, 34, 123, 124, 134, 234, 1234. 
```

Here I use 12 to represent `column 1 * column 2`

So `1234 = column 1 * column 2 * column 3 * column 4`.

Does anyone have some simple pieces of code to do this? Thanks for everyone's help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T01:13:46.913

使用您拥有的三列，您可以执行以下操作：

```
 model.matrix(~ V1*V2*V3, data=x) 
```

或这个：

```
 model.matrix(~ 0 + V1*V2*V3, data=x) 
```

（编辑：最初有三列。解决方案以明显的方式扩展到 4 列）

这个想法很容易扩展到更多的列。

但是，如果您尝试这样做以拟合模型，那么您就是在浪费时间——无需直接计算它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:34:14.033

尽管@Glen_b 的答案几乎可以肯定是可取的，但这是另一种尝试：

```
# make some sample data
dat <- data.frame(V1=1:3,V2=2:4,V3=3:5,V4=5:7)

# get all the possible combinations
comps <- Reduce(c,sapply(2:4,function(x) combn(1:4,x,simplify=FALSE)))
#str(comps)
#List of 11
# $ : int [1:2] 1 2
# $ : int [1:2] 1 3
# $ : int [1:2] 1 4
# $ : int [1:2] 2 3
# $ : int [1:2] 2 4
# $ : int [1:2] 3 4
# $ : int [1:3] 1 2 3
# $ : int [1:3] 1 2 4
# $ : int [1:3] 1 3 4
# $ : int [1:3] 2 3 4
# $ : int [1:4] 1 2 3 4

# multiply out the combinations    
data.frame(dat,sapply(comps,function(x) Reduce("*",dat[x]) ))

#  V1 V2 V3 V4 X1 X2 X3 X4 X5 X6 X7 X8  X9 X10 X11
#1  1  2  3  5  2  3  5  6 10 15  6 10  15  30  30
#2  2  3  4  6  6  8 12 12 18 24 24 36  48  72 144
#3  3  4  5  7 12 15 21 20 28 35 60 84 105 140 420 
```

正如@mnel 在下面的评论中指出的那样，您还可以将一个函数传递给`combn`将应用于每个组合的函数，因此这将一步到位：

```
do.call(
        cbind,
          sapply(
          seq_along(dat),
          function(m) combn(m=m, x = dat, FUN = function(xx) Reduce('*',xx ))
                )
       ) 
```

# php - drawing alpha transparent rectangles to PDF from PHP

> ID：16181654
> 
> 赞同：0
> 
> 时间：2013-04-24T00:58:12.967
> 
> 标签：php, pdf-generation, alpha-transparency

I am currently using FPDF to generate PDF files. What I would need is to draw alpha-transparent rectangles (say with opacity 0.5) on top of an image.

I cannot find how to do this in FPDF, since `SetDrawColor` and `SetFillColor` (which are used to draw the rectangles) only take RGB arguments, no alpha value. So they automatically completely cover images or lines placed there with `Image` or `Line`.

How can I generate PDF files from PHP that have semi-transparent colored rectangles on top of a given background image and/or on top of a given set of (dashed/full) lines?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:45:39.320

我突然想到了答案：显然，透明度不是存储在 PDF 中的颜色级别上，而是存储在对象级别上。这个附加组件为其提供了功能：http: [//fpdf.org/en/script/script74.php](http://fpdf.org/en/script/script74.php)

# python - How can I read a task's 'params' value during unit testing in App Engine

> ID：16181657
> 
> 赞同：1
> 
> 时间：2013-04-24T00:58:24.720
> 
> 标签：python, google-app-engine

I am using Taskqueue stub in google app engine. It is very nice, but there is one thing that is driving me nuts.

During my test, a method I'm testing creates a task, and I want to check if that task has been created correctly. So, one of the things I have to check is that the proper 'params' have been passed. To do that, I do the following to get the task:

```
tasks = self.taskqueue_stub.GetTasks(queue_name)
self.assertEqual(1, len(tasks))
task = tasks[0] 
```

But this task does not have a 'params' key, which is a shame, because that info is very valuable to assert that everything is fine.

Instead, the task has a 'body' key, which contains a base64 encoded version of the request body, something like this (once base64decoded):

> muted=False&class_=Decoder&failures=3&last_orders=Key%28%27ProspectiveSale%27%2C+%27cl1%27%29&last_orderl=Key%28%27ProspectiveSale%27%2C+%27cl2%27%29&hit_per=5.0

I have tried to parse that to get the 'params' dict, but I'm finding it a bit tedious to parse all different items to their corresponding types, etc. Somehow, I feel that is just wrong, there has to be a simpler way to do this.

So, to consider this question as answered, I would need one of the following:

*   A way to read the 'params' dict.
*   A way to reconstruct the 'params' dict from the 'body' value mentioned above.
*   Another solution that I cannot imagine now but that would let me read that frikin 'params' dict ;-)

Cheers!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:15:35.040

urlparse模块具有将参数字符串转换为 dict: 的[功能](http://docs.python.org/2/library/urlparse.html#module-urlparse)[`parse_qs`](http://docs.python.org/2/library/urlparse.html#urlparse.parse_qs)。

例如：

```
import urlparse

params = 'muted=False&class_=Decoder&failures=3&last_orders=Key%28%27ProspectiveSale%27%2C+%27cl1%27%29&last_orderl=Key%28%27ProspectiveSale%27%2C+%27cl2%27%29&hit_per=5.0'
print urlparse.parse_qs(params) 
```

打印以下内容：

```
{'muted': ['False'], 'class_': ['Decoder'], 'hit_per': ['5.0'], 'last_orders': ["Key(
'ProspectiveSale', 'cl1')"], 'last_orderl': ["Key('ProspectiveSale', 'cl2')"], 'failu
res': ['3']} 
```

# eclipse - How do I force push local project folder (updated) to remote branch of same folder but slightly outdated?

> ID：16181660
> 
> 赞同：1
> 
> 时间：2013-04-24T00:58:34.707
> 
> 标签：eclipse, git, branch

I am using Eclipse with eGit plugin, my problem is: I had to work in college today on project without git (Downloaded as project from Bitbucket), worked on it, did quite a lot of updates, about 600 new lines in different files so manual merging would be very bad. So I have right now an offline version (the newer one) and I have online branch version which is older. How can I force update online version with offline version?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:11:18.227

您可以简单地压缩您的离线项目，将其解压缩到您将首先清空的本地工作树上。

Git 将检测所有更改，所有添加或删除的文件。
简单地：

```
git add -A
git commit -m "new commit"
git push. 
```

您发布（推送）一个新的提交，它将代表您的所有更改。
这里不需要合并。

# javascript - JavaScript 中所有事件处理程序注册的动态跟踪

> ID：16181665
> 
> 赞同：2
> 
> 时间：2013-04-24T00:58:53.953
> 
> 标签：javascript, phantomjs, prototypal-inheritance

我的目标是动态跟踪 JavaScript 中事件处理程序的所有注册，包括但不限于文档和窗口对象。一段代码应该在网站的其余部分执行（onLoad）之前运行，并且应该报告哪些函数注册了事件。我想包装`addEventListener`,等`onmouseclick`，`onmessage`但我不想单独为每个对象执行此操作。

我正在研究修改`Object.constructor`在构造函数中执行自检的行为。代码应该很简单，大致如下所示：

```
var toWrap = [ "addEventListener", "onclick", "..." ];

for ( var x in toWrap ) {
    if ( toWrap[x] in this ) {
        this[toWrap[x]] = wrap(toWrap[x], this[toWrap[x]]);
    }
} 
```

...但是插入代码的正确位置是什么？

纯 JavaScript 解决方案将优于 jQuery 等，我在 PhantomJS 中实现。

**更新：**

[阅读此](https://stackoverflow.com/a/623624/2125578)内容后，我想出了以下代码。它似乎工作正常 - 有任何异议吗？

```
Object = ( function ( ) {
    this.wrap = function(e) {
        // ....
    }   
    this.wrap();
}); 
```

# html - 如何将外圆角添加到 div？

> ID：16181669
> 
> 赞同：8
> 
> 时间：2013-04-24T00:59:13.457
> 
> 标签：html, css, twitter-bootstrap, less

我希望将“外”圆角添加到选定的侧边栏项目，以使该项目很好地“倾注”到内容中。

在下面的示例中，我希望`.top`具有灰色背景的圆形右下角，以及`.bottom`. 你怎么看？

我正在使用 Twitter Bootstrap 和 LESS，如果这样更容易的话。

jsfiddle：http: [//jsfiddle.net/3YXb2/](http://jsfiddle.net/3YXb2/)

转这个：

![渲染](https://i.stack.imgur.com/ODTqg.png)

进入这个：

![在此处输入图像描述](https://i.stack.imgur.com/Ibm8b.png)

标记：

```
<div class="wrapper">
    <div class="sidebar">
        <div class="top">
            <p>Top</p>
        </div>
        <div class="middle">
            <p>Middle</p>
        </div>
        <div class="bottom">
            <p>Bottom</p>
        </div>
    </div>
    <div class="container">
        <p>Content</p>
    </div>
</div> 
```

CSS：

```
body {
    margin:10px;
}
div {
    margin:0;
    margin-right:-4px;
    padding:0;
    display:inline-block;
    vertical-align:middle;
}
.wrapper {
    width:100%;
    display:block;
    border:1px solid;
}
.container {
    background-color:gray;
    width:70%;
    height:300px;
}
.sidebar {
    background-color:white;
    width:30%;
    height:300px;
}
.middle {
    background-color:gray;
}
.top,.middle,.bottom {
    width:100%;
    height:100px;
    display:block;
}
p {
    padding:40px 0 0;
    margin:0;
    text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T01:04:15.490

CSS3 提供该`border-radius`属性。但是，请注意这不适用于 IE8 或任何更低版本。有可用的*技巧*；但他们就是这样：黑客。

用法如下所示：

```
 .sidebar {
        background-color:gray;
        width:30%;
        height:300px;
    }
    .middle {
        background-color:gray;
    }
    .top,.middle,.bottom {
        width:100%;
        height:100px;
        display:block;
    }
    .top{
        background: white;
        border-bottom-right-radius:10px;
    }
    .bottom{        
        background: white;
        border-top-right-radius: 10px;
    } 
```

# [jsFiddle 示例](http://jsfiddle.net/3YXb2/7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T01:18:24.690

如果我理解正确，您正在寻找一个倒置的边界半径。这是你的想法吗？

[http://jsfiddle.net/3pW2M/](http://jsfiddle.net/3pW2M/)

例如，如果白色区域需要透明以显示背景图像，这将不起作用。

```
.top {
    position: relative;
}

.topcorner {
    position: absolute;
    margin: 0;
    bottom: 0;
    right: 0;
    height: 50px;
    width: 50px;
    background: gray;
}

.topcorner:after {
    content: '';
    position: absolute;
    height: 50px;
    width: 50px;
    background: white;
    border-radius: 0 0 50px 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T01:01:44.080

你可以使用 CSS 的边框半径。你可以在这里看到一个在线圆形边框生成器：http: [//border-radius.com/](http://border-radius.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T02:59:25.937

我假设某些类型的用户交互、导航、选项卡、分机都需要这个。所以我将它设置在 jquery 悬停功能上[- jsFiddle](http://jsfiddle.net/apaul34208/dKsBg/2/)

```
$(document).ready(function () {
  $('.top').hover(function () {
    $('.middle').toggleClass('notSelect2');
    $('.bottom').toggleClass('notSelect3');
  });

  $('.middle').hover(function () {
    $('.top').toggleClass('notSelect');
    $('.bottom').toggleClass('notSelect2');
  });

  $('.bottom').hover(function () {
    $('.middle').toggleClass('notSelect');
    $('.top').toggleClass('notSelect3');
  });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T01:07:07.317

使用 CSS3*边框半径*。

```
 .top
     {
       border-bottom-right-radius: 3px;
       -moz-border-radius-bottomright: 3px;
       -webkit-border-bottom-right-radius: 3px;
     }

 .bottom
    {
      border-top-right-radius: 3px;
      -moz-border-radius-topright: 3px
      -webkit-border-top-right-radius: 3px;
    } 
```

# php - hasOne relationship saving new record instead of using existing one

> ID：16181673
> 
> 赞同：0
> 
> 时间：2013-04-24T00:59:37.070
> 
> 标签：php, cakephp, models

I have a `Page` model and a `Category` model. Basically, each page belongs to a category. The models are set up so `Page belongsTo Category`, and `Category hasMany Page`.

When adding new pages, I'm using this controller action:

```
public function admin_add() {
    if($this->request->is('post')) {
        $this->Page->create();
        if($this->Page->saveAssocated($this->request->data)) {
            $this->Session->setFlash('The page has been created.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to save the page.');
        }
    }
} 
```

and this is the view for that action:

```
<h1>Add Page</h1>
<?php
    echo $this->Form->create('Page');
    echo $this->Form->input('Page.title', array('required' => 'required'));
    echo $this->Form->input('Page.body', array('type' => 'textarea', 'class' => 'redactor', 'required' => 'required'));
    echo $this->Form->input('Category.name');
    echo $this->Form->input('Page.in_header');
    echo $this->Form->end('Save Page');
?> 
```

Now, when I save a page with "Services" as the category, it all gets saved correctly. The page gets saved and the category with `name` of "Services" gets inserted and they both get linked up properly.

However, when I add another page with the same category of "Services", instead of using the existing record in the `categories` table Cake makes a new one and links that one instead. I need it to use the existing record.

How can I fix my view/controller/database to make this work properly?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:52:18.050

你有几个解决方案来解决这个问题。

pollirata 提供的解决方案是一个非常好的解决方案。为用户提供现有类别的选择是了解哪些类别已存在的最简单方法。当您只需要一个简单的文本输入时，无论如何都会导致拼写错误或非常相似的类别名称。

如果要保留文本输入，则应在 beforeSave() 函数中检查 Page.php 模型中的现有类别：检索类别列表并将其与 $this->data['Category']['name '] 您尝试保存的数据。如果现有类别匹配，则在 $this->data['Category']['id] 中添加其 id，这样 Cake 就不会创建新记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:30:45.937

创建记录时，没有地方可以指定现有类别的 id。因此，Cake 假定它是一条新记录，因为没有用于搜索的 ID。

您需要提供该类别的 id 以帮助 Cake 了解该记录已经存在

希望能帮助到你

# java - 将图片添加到 Excel 单元格时，Apache POI-HSSF 会扭曲图像大小

> ID：16181674
> 
> 赞同：8
> 
> 时间：2013-04-24T00:59:48.620
> 
> 标签：java, image, excel, apache-poi, hssf

我正在使用 Apache POI-HSSF 将图片添加到单元格中。图像是 120x100，但无论我做什么以及如何调整它，Excel 电子表格总是显示它跨越多行并将其扭曲到比宽度大得多的高度。

如何保持原始尺寸？

我的代码：

```
InputStream is = new FileInputStream(getImageURL());
byte[] bytes = IOUtils.toByteArray(is);
int pictureIdx = wb.addPicture(bytes, Workbook.PICTURE_TYPE_JPEG);
is.close();

//add a picture shape
CreationHelper helper = wb.getCreationHelper();
ClientAnchor anchor = helper.createClientAnchor();
// Create the drawing patriarch.  This is the top level container for all shapes.
Drawing drawing = sheet1.createDrawingPatriarch();
//set top-left corner of the picture,
//subsequent call of Picture#resize() will operate relative to it

anchor.setAnchorType(0);
anchor.setCol1(1);
anchor.setRow1(1);

Picture pict = drawing.createPicture(anchor, pictureIdx);

//auto-size picture relative to its top-left corner
pict.resize(); 
```

我已经尝试了所有 dx/dy 坐标和 Col/Row。位置无关紧要，它水平拉伸图像的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-20T19:21:47.987

我一直面临着类似的问题，我添加的图像被扭曲了。我尝试了 pict.resize() 和 sheet.autoSizeColumn() 但它没有用。最后我找到了以下网址：- [https://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/examples/ss/AddDimensionedImage.java](https://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/examples/ss/AddDimensionedImage.java)

我将上面的类添加到我的代码中，并使用它的方法将图像添加到 excel 中。我能够添加几乎没有失真的图像。希望这对你也有帮助。我写了下面的代码： -

```
BufferedImage imageIO = ImageIO.read(new URL(image));
int height= imageIO.getHeight();
int width=imageIO.getWidth();
int relativeHeight=(int)(((double)height/width)*28.5);
new AddDimensionedImage().addImageToSheet(2,  sheet.getPhysicalNumberOfRows()-1 , sheet, sheet.createDrawingPatriarch(),new URL(image), 30, relativeHeight, AddDimensionedImage.EXPAND_ROW); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-07T14:51:34.780

据我从 Apache POI 的文档中了解到，这是因为`pict.resize();` ，正如这里所说[，](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Picture.html#resize%28%29)如果更改了工作簿的默认字体大小，图片可能会垂直或水平拉伸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-28T16:45:00.877

我有同样的问题，我的解决方案是在我的项目 [AddDimensionedImage](https://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/ss/examples/AddDimensionedImage.java)中复制这个类，然后使用这个方法。

```
protected void addImageInCell(Sheet sheet, URL url, Drawing<?> drawing, int colNumber, int rowNumber) {
    BufferedImage imageIO = ImageIO.read(url);
    int height = imageIO.getHeight();
    int width = imageIO.getWidth();
    int relativeHeight = (int) (((double) height / width) * 28.5);
    new AddDimensionedImage().addImageToSheet(colNumber, rowNumber, sheet, drawing, url, 30, relativeHeight,
            AddDimensionedImage.EXPAND_ROW_AND_COLUMN);

} 
```

您可以使用以下行调用此方法：

```
URL url = new URL("https://blog.expedia.mx/por-que-los-viajeros-internacionales-visitan-mexico/");
addImageInCell(sheet, url, sheet.createDrawingPatriarch(), 0, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-01T13:15:00.863

我创建了另一个宽度取自 的空图像，在其`sheet.getColumnWidthInPixels`上绘制必要的图像并用于`AddDimensionedImage.EXPAND_ROW_AND_COLUMN`将其完全适合单元格：

```
 HSSFRow imageRow = sheet.createRow(row);

    BufferedImage image = ImageIO.read(Paths.get(pathToImage).toUri().toURL());

    AddDimensionedImage addImage = new AddDimensionedImage();
    float columnWidth = sheet.getColumnWidthInPixels(0);

    BufferedImage off_Image = new BufferedImage((int) columnWidth, actualImageHeight, BufferedImage.TYPE_INT_RGB);
    Graphics2D g2 = off_Image.createGraphics();
    g2.setColor(new Color(192,192,192));
    g2.fillRect(0, 0, off_Image.getWidth(), off_Image.getHeight());
    g2.drawImage(image, 0, 0, null);
    g2.dispose();

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ImageIO.write(off_Image, "jpg", baos);
    byte[] bytes = baos.toByteArray();

    double reqImageWidthMM = ((double) off_Image.getWidth()) / ConvertImageUnits.PIXELS_PER_MILLIMETRES;
    double reqImageHeightMM = ((double) off_Image.getHeight()) / ConvertImageUnits.PIXELS_PER_MILLIMETRES;

    addImage.addImageToSheet("A1", sheet, bytes, reqImageWidthMM, reqImageHeightMM, AddDimensionedImage.EXPAND_ROW_AND_COLUMN); 
```

我必须将[AddDimensionedImage.java](https://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/ss/examples/AddDimensionedImage.java)复制到我的类路径并重载`addImageToSheet`以接受字节数组。

在此之前，我尝试了此处提到的其他选项，但没有帮助。希望我的回答对某人有用。

# vb.net - 以编程方式设置静态 DNS 和备用 DNS 服务器？

> ID：16181677
> 
> 赞同：2
> 
> 时间：2013-04-24T01:00:05.817
> 
> 标签：vb.net, dns, ip-address, static-ip-address

我在谷歌上搜索时发现了这段代码。我只想将我的 DNS 服务器更改为静态。我只是不知道将我的静态 DNS 和备用 DNS 服务器放在哪里。请帮我。谢谢 ：）

```
Public Sub setDNS(ByVal NIC As String, ByVal DNS As String)
   Dim objMC As New ManagementClass("Win32_NetworkAdapterConfiguration")
   Dim objMOC As ManagementObjectCollection = objMC.GetInstances()

   For Each objMO As ManagementObject In objMOC
      If CBool(objMO("IPEnabled")) Then
         ' if you are using the System.Net.NetworkInformation.NetworkInterface you'll need to change this line to if (objMO["Caption"].ToString().Contains(NIC)) and pass in the Description property instead of the name 
         If objMO("Caption").Equals(NIC) Then
            Try
               Dim newDNS As ManagementBaseObject = objMO.GetMethodParameters("SetDNSServerSearchOrder")
               newDNS("DNSServerSearchOrder") = DNS.Split(","c)
               Dim setDNS As ManagementBaseObject = objMO.InvokeMethod("SetDNSServerSearchOrder", newDNS, Nothing)
            Catch generatedExceptionName As Exception
               Throw
            End Try
         End If
      End If
   Next
End Sub 
```

任何帮助将不胜感激。提前致谢。

# javascript - 为什么方法返回0？

> ID：16181681
> 
> 赞同：-2
> 
> 时间：2013-04-24T01:01:02.243
> 
> 标签：javascript, object, methods

使用下面的对象和方法，为什么会`console.log(FizzBuzzPlus.getFizzBuzzCount(20))`打印 0？

```
var FizzBuzzPlus = {
    isFizzBuzzie: function(a) {
        if(a%5 === 0 || a%3 === 0) {
            if (a%5 === 0 && a%3 === 0) {
                return false;
            }
            return true;
        } else {
            return false;
        }
    },

    isFizzBuzzieChecker: function(c) {
        var theFizzBuzzes = [];
        for (var i = 0; i < c; i++) {
            if (this.isFizzBuzzie(i)) {
                theFizzBuzzes += i + " ";
            }
        }
        return theFizzBuzzes;
    },

    getFizzBuzzSum: function(b) {
        var sum = 0;
        for (var i = 0; i < b; i++) {
            if (this.isFizzBuzzie(i)) {
                sum += i;
            }
        }
        return sum;
    },

    getFizzBuzzCount: function(c) {
        var count = 0;
        for (var i = 0; i < c; i++) {
            if (this.isFizzBuzzie(i)) {
                count++;
            }
        return count;
        }
    }
};

console.log(FizzBuzzPlus.isFizzBuzzieChecker(20));
console.log(FizzBuzzPlus.getFizzBuzzSum(20));
console.log(FizzBuzzPlus.getFizzBuzzCount(20)); 
```

有些人可能会认出这是来自 Codecademy 的 FizzBu​​zz。我正在使用他们的在线 JavaScript 编辑器玩这个对象。该方法的打印结果始终为 0。它应该返回可被 3 或 5 整除的 0 到 20 之间的数字数量，但不能同时被 3 和 5 整除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:09:17.960

此时在您的代码中，您的循环中有您的`return`语句：`for`

```
getFizzBuzzCount: function(c) {
    var count = 0;
    for (var i = 0; i < c; i++) {
        if (this.isFizzBuzzie(i)) {
            count++;
        }
    return count; //<-- this return is INSIDE the for loop
    }
} 
```

将其`return`移出`for`循环：

```
getFizzBuzzCount: function(c) {
    var count = 0;
    for (var i = 0; i < c; i++) {
        if (this.isFizzBuzzie(i)) {
            count++;
        }
    }
    return count; 
} 
```

**小提琴：http:**
[//jsfiddle.net/hVf9n/](http://jsfiddle.net/hVf9n/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:09:22.870

您在 for 循环中有 return 语句，在 中也有语法错误，条件中缺少`isFizzBuzzieChecker`关闭`)``if`

```
getFizzBuzzCount: function(c) {
    var count = 0;
    for (var i = 0; i < c; i++) {
        if (this.isFizzBuzzie(i)) {
            count++;
        }
    }
    return count;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/R9jZ4/)

# sql - Combine many tables in Hive using UNION ALL?

> ID：16181684
> 
> 赞同：9
> 
> 时间：2013-04-24T01:01:24.290
> 
> 标签：sql, hive, hiveql

I'm trying to append one variable from several tables together (aka row-bind, concatenate) to make one longer table with a single column in Hive. I think this is possible using `UNION ALL` based on this question ( [HiveQL UNION ALL](https://stackoverflow.com/questions/14096968/hiveql-union-all) ), but I'm not sure an efficient way to accomplish this?

The pseudocode would look something like this:

```
CREATE TABLE tmp_combined AS
SELECT b.var1 FROM tmp_table1 b
UNION ALL
SELECT c.var1 FROM tmp_table2 c
UNION ALL
SELECT d.var1 FROM tmp_table3 d
UNION ALL
SELECT e.var1 FROM tmp_table4 e
UNION ALL
SELECT f.var1 FROM tmp_table5 f
UNION ALL
SELECT g.var1 FROM tmp_table6 g
UNION ALL
SELECT h.var1 FROM tmp_table7 h; 
```

Any help is appreciated!

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-24T12:16:49.890

尝试以下编码...

```
Select * into tmp_combined  from 
(
    SELECT b.var1 FROM tmp_table1 b
    UNION ALL
    SELECT c.var1 FROM tmp_table2 c
    UNION ALL
    SELECT d.var1 FROM tmp_table3 d
    UNION ALL
    SELECT e.var1 FROM tmp_table4 e
    UNION ALL
    SELECT f.var1 FROM tmp_table5 f
    UNION ALL
    SELECT g.var1 FROM tmp_table6 g
    UNION ALL
    SELECT h.var1 FROM tmp_table7 h
) CombinedTable 
```

与语句一起使用：set hive.exec.parallel=true

这将同时执行不同的选择，否则它将是一步一步的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T20:43:19.567

我会说这是进行行绑定的既简单又有效的方法，至少，这就是我将在我的代码中使用的方法。顺便说一句，如果您直接输入伪代码，可能会导致一些语法错误，您可以尝试：

```
create table join_table as
select * from
(select ...
join all
select
join all
select...) tmp; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-29T03:47:57.407

我做了同样的概念，但对于不同的表`employee`，`location`我相信这可能会对你有所帮助：

```
DATA:Table_e-employee
empid empname
13  Josan
8   Alex
3   Ram
17  Babu
25  John

Table_l-location
empid emplocation
13  San Jose
8   Los Angeles
3   Pune,IN
17  Chennai,IN
39  Banglore,IN

hive> SELECT e.empid AS a ,e.empname AS b FROM employee e 
UNION ALL 
SELECT l.empid AS a,l.emplocation AS b FROM location l; 
```

带有别名`a`和 的输出`b`：

```
13  San Jose
8   Los Angeles
3   Pune,IN
17  Chennai,IN
39  Banglore,IN
13  Josan
8   Alex
3   Ram
17  Babu
25  John 
```

# c# - How to change Repeater DataSourceID?

> ID：16181685
> 
> 赞同：0
> 
> 时间：2013-04-24T01:01:24.907
> 
> 标签：c#, asp.net

I have a repeater and and and I set its `DataSourceID` .

```
<asp:Repeater ID="rpProducts" runat="server" DataSourceID="ItemDataSource" >
    <HeaderTemplate>....</HeaderTemplate>
    <ItemTemplate>
       ....
    </ItemTemplate>
    <FooterTemplate>
    </FooterTemplate>
</asp:Repeater> 
```

But I some time I want to change the `DataSourceID` and load data and again set the `ItemDataSource`.

This is my code for change the rpProducts `DataSourceID` .

```
rpProducts.DataSourceID = null;
rpProducts.DataSource = goods;
rpProducts.DataBind(); 
```

So then again I want to set the `DataSourceID` to `ItemDataSource`.

How can I do it?

I try like this. but is not working

```
 rpProducts.DataSourceID = null;
    rpProducts.DataSourceID = ItemDataSource.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:09:38.120

你可以试试：ItemDataSource.ID
另外，datasource 和 datasourceid 不能同时设置，所以你必须将 datasource 设置为 null。

```
rpProducts.DataSource = null;
rpProducts.DataSourceID = ItemDataSource.ID;
rpProducts.DataBind(); 
```

# django - 为 Django 应用程序设置单独的媒体文件夹

> ID：16181690
> 
> 赞同：0
> 
> 时间：2013-04-24T01:02:13.623
> 
> 标签：django, django-templates

我可以在我的 Django 应用程序中为本地媒体设置一个文件夹，该文件夹使用类似于的标签引用`{{ STATIC_URL }}`吗？

目前，我的静态目录中设置了几个 JavaScript、CSS 和图像文件。但是，这些文件实际上是我的应用程序的本地文件，不会被 Django 站点中的其他应用程序使用。在某些情况下，这些其他应用程序由其他人管理，因此，我们可能会不小心将两者命名为`site.js`- 例如。

是否有一个标签可以用来始终指向根（相对于应用程序）媒体目录 - 例如`{{ LOCAL_MEDIA }}/js/site.js`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:44:35.933

对此的常见解决方案与应用程序模板相同：使用为应用程序命名的目录来命名静态资源。这里的目录看起来像

```
myapp/
    __init__.py
    models.py
    views.py
    static/
        myapp/
            js/site.js
            css/site.css 
```

在模板中，它们将`{{ STATIC_URL }}`像往常一样被引用

```
<script src="{{ STATIC_URL }}myapp/js/site.js"></script> 
```

# c# - 删除At(x); 它会处理元素 x 吗？

> ID：16181693
> 
> 赞同：14
> 
> 时间：2013-04-24T01:02:24.100
> 
> 标签：c#, winforms, image, list

每次用户单击下一个图像时，我都有一个缓存来存储最近的两个图像，“RemoveAt（x）”是否处理 x 图像，或者我想要的是删除的图像不在内存中。被完全删除。

```
 List<Image> BackimageList = new List<Image>();

 private void BackimageListCache(Image img)
{
  BackimageList.Add(img);
  if (BackimageList.Count > 2) 
   {
    BackimageList.RemoveAt(0); //oldest image has index 0
   }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-24T01:16:33.443

.NET 中的集合不“拥有”一个对象。所以他们不能假设该对象没有在其他任何地方使用，因此他们不能处置该对象。所有权规则完全由您自己实施。这确实意味着您还必须确保图像不会显示在 PictureBox 中。

确保图像不再占用*任何*内存也是不确定的。你不能自己管理内存，这是垃圾收集器的工作。但是，Image 使用相当大量的非托管内存来存储像素数据，当您调用 Dispose() 时，该内存确实会被释放。Image 的托管部分保留在内存中，直到 GC 到达它。它很小。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-24T01:06:01.160

该`RemoveAt`方法不会调用`Dispose`图像。在调用之前，您必须自己处理它`RemoveAt`。

## 编辑

如果类型 implements `IDisposable`，那么你写的处置它

```
BackImageList[0].Dispose();
BackImageList.RemoveAt(0); 
```

`RemoveAt(0)`本质上是：

```
for (int i = 1; i < BackImageList.Count; ++i)
{
    BackImageList[i-1] = BackImageList[i];
}
BackImageList.Count--; 
```

当然，这一切都是在内部完成的。你不能设置`Count`属性。是通过`RemoveAt`方法完成的。

`null`调用之前无需将值设置为`RemoveAt`。

# git - Share my current project using git

> ID：16181694
> 
> 赞同：-2
> 
> 时间：2013-04-24T01:02:25.153
> 
> 标签：git

I have a project which is managed myself. And I want to use git to manage it.

And the project is located at: `/home/maven/workspace/tmkproject`(this is my current working directory). And I am using the Eclipse IDE.

I do not prefer to use the `git init` under my working directory to create the repository .

I want to create the repository at a certain location like `/home/maven/gitrepo`.

Then I pull the project to my directory.

So in my situation, how to make it?

Because the project may be worked with more people in my team.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:45:23.327

如果我理解正确，您希望多个人使用 git 处理一个项目。您的想法是将存储库放入`/home/maven/gitrepo`并让每个人直接使用该存储库。您*可以*使用`GIT_DIR`环境变量执行此操作，这不是使用 git 的好方法。

相反，`/home/maven/gitrepo`应该包含一个存储库，并且每个人都应该有这个存储库的克隆。然后他们可以正常推拉。

首先，首先将所有内容转储到 git 中。确保所有临时文件和构建文件都不碍事，或者写一个 .gitignore 文件让 git 忽略它们。

```
cd /home/maven/workspace/tmkproject
git init
git add .
git commit -a 
```

现在您已经有了一个 git 存储库，`/home/maven/workspace/tmkproject/.git`您需要将副本复制到`/home/maven/gitrepo`.

```
cd /home/maven/gitrepo
git clone --bare /home/maven/workspace/tmkproject 
```

这将使`/home/maven/gitrepo/tmkproject.git`其中包含您的`.git`目录的内容。

下一步是设置`/home/maven/workspace/tmkproject`用作`/home/maven/gitrepo/tmkproject.git`推送和拉取的远程存储库。

```
cd /home/maven/workspace/tmkproject
git remote add origin /home/maven/gitrepo/tmkproject.git
git fetch origin 
```

现在您可以从该中央存储库推送和拉取。

```
git push -u origin master    # send changes and set up the branch default
git push                     # now it will use the default
git pull                     # get new changes 
```

其他人可以克隆他们自己的副本以进行开发和推拉。

```
cd ~user/devel
git clone /home/maven/gitrepo/tmkproject.git 
```

您会注意到设置起来需要一些工作，最终您将需要远程访问。使用现有的 git 服务之一通常更容易，例如 Github、Bitbucket、Gitorious 或 Gitlab。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:24:34.717

*免责声明：如果您是在项目根目录中***使用**Git 和/或 Linux 命令行工具的初学者**，它会让您的事情变得更容易。****`git init`**

此外，它只会`.git`在您的根级工作副本的根目录创建一个目录，因此它不会太侵入。

如果您确实想将工作副本与本地计算机上的存储库备份分开，请创建两个存储库并将工作副本推送到“备份存储库”。

* * *

Git 支持`GIT_DIR`环境变量，可用于覆盖`.git`目录的默认位置。您可以将其设置为`/home/maven/workspace/tmkproject`并键入`git init`. 确保始终正确设置此变量，并在对应于不同存储库的两个 Git 工作副本之间切换时更改它。

有关更多信息，请参阅[man git(1)](https://www.kernel.org/pub/software/scm/git/docs/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T01:44:17.383

不错，好图 那是主叉风格。

你有你的主人（可能`/home/maven/workspace/tmkprojec`）。

您和您的成员可以`git clone /home/maven/workspace/tmkprojec /path/to/saved/repo`通过文件系统...

现在，我不知道您如何将计算机设置为 git 服务器，我建议不要这样做。如果您不在同一个网络上或没有 NFS（网络文件系统）设置，则需要 SSH 或服务器公开。

Github / Bitbucket 应该可以解决您的问题。

最佳实践如下，使用 Bitbucket：

1.  你被称为 Scrum 大师。您在 Bitbucket 上创建一个团队帐户，将您的成员添加到团队帐户。

2.  您将现有的主存储库推送到 Bitbucket

3.  您和您的成员将从 Bitbucket 上的存储库中分叉

4.  您和您的成员将把来自 Bitbucket 的 repo 克隆到您的本地机器上

5.  您和您的成员将在 Bitbucket 上将更改推送到您自己的分叉 rpeo

6.  当你完成一个特性/认为是时候交换代码时，你可以向 master 提交一个 Pull 请求。

7.  您和您的团队成员将轮流进行代码审查并合并源代码。

我说 Bitbucket 的唯一原因是它有免费的私有存储库。否则，您可以使用 Github。没关系。

# google-drive-api - Documents List 3.0 更改提要 API 调用似乎失败了约 5% 的时间

> ID：16181699
> 
> 赞同：0
> 
> 时间：2013-04-24T01:02:45.013
> 
> 标签：google-drive-api, google-docs-api

我一直在以很低的百分比出现这个错误，但不可忽略（我的测试中的低个位数）。

我很肯定这不是我的代码，因为我能够使用相同 API 调用的测试用例来重现此代码，以检查更改提要，而无需对用于我的帐户的数据集进行任何更改。

```
<errors xmlns='http://schemas.google.com/g/2005'><error><domain>GData</domain><code>ServiceException</code><internalReason>An unknown error has occurred.</internalReason></error></errors> 
```

鉴于错误消息中没有更多详细信息，如何调试此问题？

即使它发生大约 5% 的时间，它也足够高，以至于失败是显而易见的。我看到 drive.changes.list() 的行为非常相似，这似乎再次以可比的速度失败。

# mysql - Spring JDBC在运行时指定表进行查询

> ID：16181701
> 
> 赞同：2
> 
> 时间：2013-04-24T01:02:56.627
> 
> 标签：mysql, spring, jdbc

我的应用程序动态创建表，我不知道如何使用 Spring jdbc 读取表而不将其硬编码到字符串查询中。我在想这样的事情：

```
jdbcTemplate.query("SELECT * FROM ?", new Object[] { tableName }, new TableMapper()); 
```

但是春天不喜欢问号:-(

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T04:20:23.473

尝试`String query = String.format("SELECT * FROM %s", tableName);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T11:10:14.110

解释一下：`Spring`不是这里的罪魁祸首，异常是从您的数据库驱动程序一路抛出的。`PreparedStatement`不允许对表名进行参数化，您只能将 应用于`?`查询参数。如[另一个答案](https://stackoverflow.com/a/16183318/1240557)中所述，解决此问题的唯一方法是将其插入查询字符串中。

# mysql - vb.net，恢复 mysql 数据库在 windows xp 中不起作用

> ID：16181703
> 
> 赞同：0
> 
> 时间：2013-04-24T01:03:29.830
> 
> 标签：mysql, database, vb.net, restore

我有一个使用 vb.net 恢复 mysql 数据库的代码。它在 windows 7 中完美运行，但是当我在 windows xp 中尝试时它不起作用。希望大家能帮我解决这个问题。这是我的代码..

```
 Function RestoreDb()
    With dlg_openfile 'Executes a series of statements making repeated reference to a single object or structure.
        .Title = "Please Select a Image" 'title
        .InitialDirectory = "C:\" 'browse start directory
        .Filter = "All files (*.*)|*.*|All files (*.*)|*.*" 'only possible to select this extensions
        .FilterIndex = 0 'index number filter
        .FileName = "" 'empty
        Dim answ = .ShowDialog
        If answ = DialogResult.OK Then 'if answer not cancel, etc..
            Dim myProcess As New Process()
            myProcess.StartInfo.FileName = "cmd.exe"
            myProcess.StartInfo.UseShellExecute = False
            myProcess.StartInfo.WorkingDirectory = "C:\wamp\bin\mysql\mysql5.5.24\bin\"
            myProcess.StartInfo.RedirectStandardInput = True
            myProcess.StartInfo.RedirectStandardOutput = True
            myProcess.Start()
            Dim myStreamWriter As StreamWriter = myProcess.StandardInput
            Dim mystreamreader As StreamReader = myProcess.StandardOutput
            myStreamWriter.WriteLine(String.Format("mysql -u IS_DB -p2240624 db_innovaserver < {0}", .FileName))
            myStreamWriter.Close()
            myProcess.WaitForExit()
            myProcess.Close()
        End If
    End With

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T11:05:39.243

尝试这个

```
 Function RestoreDb()
With dlg_openfile 'Executes a series of statements making repeated reference to a single object or structure.
    .Title = "Please Select a Image" 'title
    .InitialDirectory = "C:\" 'browse start directory
    .Filter = "All files (*.*)|*.*|All files (*.*)|*.*" 'only possible to select this extensions
    .FilterIndex = 0 'index number filter
    .FileName = "" 'empty
    Dim answ = .ShowDialog
    If answ = DialogResult.OK Then 'if answer not cancel, etc..
        Dim myProcess As New Process()
        myProcess.StartInfo.FileName = "cmd.exe"
        myProcess.StartInfo.UseShellExecute = False

        myProcess.StartInfo.RedirectStandardInput = True
        myProcess.StartInfo.RedirectStandardOutput = True
        myProcess.Start()
        Dim myStreamWriter As StreamWriter = myProcess.StandardInput
        Dim mystreamreader As StreamReader = myProcess.StandardOutput
        myStreamWriter.WriteLine(String.Format("C:\wamp\bin\mysql\mysql5.5.24\bin\mysql.exe -u IS_DB -p2240624 db_innovaserver < {0}", "dbFile.sql"))
        myStreamWriter.Close()
        myProcess.WaitForExit()
        myProcess.Close()
    End If
End With 
```

结束功能

# c# - 让 ComboBox 将修改后的文本显示为值输入而不是实际值

> ID：16181704
> 
> 赞同：1
> 
> 时间：2013-04-24T01:03:31.503
> 
> 标签：c#, properties, combobox, propertygrid, uitypeeditor

我正在尝试创建一个属性，该属性将在每次用户选择一个项目时在其值输入中显示不同的文本。但我对这些值的问题是它们是带有下划线和小写首字母的字符串，例如：*"naval_tech_school"*。所以我需要`ComboBox`显示一个不同的值文本，看起来像这个*“海军技术学校”*。

**但如果尝试访问它，该值应保持为*“naval_tech_school” 。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:06:43.443

如果您只想在两种格式之间来回更改值（无需特殊编辑器），则只需要自定义 TypeConverter。像这样声明属性：

```
public class MyClass
{
    ...

    [TypeConverter(typeof(MyStringConverter))]
    public string MyProp { get; set; }

    ...
} 
```

这是一个示例 TypeConverter：

```
public class MyStringConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return sourceType == typeof(string) || base.CanConvertFrom(context, sourceType);
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        return destinationType == typeof(string) || base.CanConvertTo(context, destinationType);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, object value)
    {
        string svalue = value as string;
        if (svalue != null)
            return RemoveSpaceAndLowerFirst(svalue);

        return base.ConvertFrom(context, culture, value);
    }

    public override object ConvertTo(ITypeDescriptorContext context, CultureInfo culture, object value, Type destinationType)
    {
        string svalue = value as string;
        if (svalue != null)
            return RemoveUnderscoreAndUpperFirst(svalue);

        return base.ConvertTo(context, culture, value, destinationType);
    }

    private static string RemoveSpaceAndLowerFirst(string s)
    {
        // do your format conversion here
    }

    private static string RemoveUnderscoreAndUpperFirst(string s)
    {
        // do your format conversion here
    }
} 
```

# mysql - 如何将 CSV 导入 MySQL，其中字段用逗号分隔，还包含逗号但不包含分隔符

> ID：16181712
> 
> 赞同：0
> 
> 时间：2013-04-24T01:04:24.337
> 
> 标签：mysql, sql, csv

我有一个 CSV 文件，但字段中的字符串包含逗号。字段内没有用于区分字段和逗号的附件。

即：Sat Apr 20 14:50:47 CDT 2013,twitter_handle,News 'SURPRISE': Blah blah 'Stuff,' 人们说[http://link.to/something](http://link.to/something) ,,

我一直在阅读 LOAD DATA INFILE 但我没有看到任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:16:58.907

如果包含逗号的数据字段未正确引用，则任何计算机程序都无法确定哪些逗号用作字段分隔符，哪些是数据本身的一部分。

与您的 CSV 文件的来源交谈，并要求他们使用正确的引用，或使用不会出现在数据字段中的分隔符（例如制表符分隔符）。

# python - Print information from fql\sql table

> ID：16181714
> 
> 赞同：0
> 
> 时间：2013-04-24T01:04:54.007
> 
> 标签：python

I'm new to python, this is currently printing correctly, though I want it to show a specific number from the print.

```
from facepy import GraphAPI

graph = GraphAPI("Facebook access token")
query = graph.fql('SELECT unread_count FROM mailbox_folder WHERE folder_id = 0')
print query 
```

This prints out

```
{u'data': [{u'unread_count': 2}]} 
```

though I'd like to only show the number 2.. I've tried countless methods which I've deleted them as I tried. Why does python prints with the u' behind the information being printed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:16:51.730

`query`是字典列表的字典。

```
>>> k = {u'data': [{u'unread_count': 2}]}
>>> k['data'][0]['unread_count']
2 
```

**字典**是`{'key': value}` 键必须是字符串但值可以是任何东西，从整数到图像。任何有效的 Python 对象。

**列表**包含在内`[]`，其元素是逗号分隔值。例如：

```
lst_ints = [1,2,3,4]
lst_strs = ['1','2']
lst_dict = [ {'key1': val1}, {'key1': val1} ] 
```

在大多数编程语言中，要访问列表和数组，您可以从索引 0 开始。SO`lst_ints[0]`将是整数 1。

`query`有一个键，`data`所以我们首先访问它。然后我们看到一个列表，其中有一个元素，索引为 0。最后，列表包含 key `unread_count`。

`u`只是意味着unicode字符串。

# overflow - 文本溢出省略号，在浮动的左侧跨度和浮动的右侧跨度之间

> ID：16181719
> 
> 赞同：0
> 
> 时间：2013-04-24T01:05:20.153
> 
> 标签：overflow, css

我在向左浮动的跨度和向右浮动的跨度之间发现省略号文本 (.title) 时遇到问题。当溢出发生时，.length 被下推到新的一行。我怎样才能解决这个问题？

JS 小提琴：http: [//jsfiddle.net/VfHdS/6/](http://jsfiddle.net/VfHdS/6/)

HTML：

```
<div class="song">
<span class="tracknumber">4</span>
<div class="title">This is the song tittle!!!!!!!!!!!</div>
<span class="length">4:31</span>
</div> 
```

CSS：

```
.song {
    font-size: 14px;
    padding: 2px 20px;
}
.tracknumber {
    margin-right: 10px;
}
.title {
    color: #262626;
    display:inline-block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.length {
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:38:07.933

使用您提供的示例 html，我设置了一个小提琴。将 .title 元素设置为显示块是使省略号显示的原因。

[http://jsfiddle.net/f4uUJ/](http://jsfiddle.net/f4uUJ/)

我还完全重新定位了曲目编号和播放时间，因此歌曲标题可以是 100% 宽度。您只需要在轨道上添加填充，就可以给标题一些喘息的空间。

CSS

```
.song {
     font-size: 14px;
     padding: 2px 40px 2px 20px;
     position:relative;
}
.tracknumber {
     position:absolute;
     left:0;
     top:2px;
}
.title {
     white-space: nowrap;
     width: 100%;
     display:block;
     overflow: hidden;
     text-overflow:ellipsis;
}
.length {
     position:absolute; 
     right:0;
     top:2px;
} 
```

# iis - 用于在 IIS 中查找当前绑定的过期证书的 Powershell 脚本

> ID：16181725
> 
> 赞同：5
> 
> 时间：2013-04-24T01:05:56.047
> 
> 标签：iis, powershell, ssl, windows-server-2008-r2

我正在尝试获取一个工作脚本来检查 IIS 中过期的 SSL 证书。有许多类似的条目只需获取过期已安装证书的列表，但我需要一些额外的逻辑。

我需要知道在 x 天内到期的所有证书，即 A）当前绑定到网站和 B）该网站必须处于“已启动”状态

我收集了某些信息（如下），但我无法将它们关联起来，所以它们只给我我需要的过期证书。为了增加复杂性，我不能简单地在证书主题中查找 CN 中的站点名称，因为安装了数百个证书，并且同一站点的 1 个或多个旧证书仍然存在的情况并不少见被安装。话虽如此，他们有相同的主题。我需要比较指纹，但通过简单地指定站点名称来获取指纹被证明是困难的。

收集各种相关细节的一些代码如下：

```
ActiveSites = get-website | where {$_.State -eq "Started"}
$DaysToExpiration = 7
$InstalledCerts = gci cert:\localmachine\my
$ExpiringCerts = $InstalledCerts | Where {(($_.NotAfter - (Get-Date)).Days) -lt $DaysToExpiration} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T07:49:53.160

可以从`IIS:`提供商处获得绑定到网站的证书列表：

```
Get-ChildItem IIS:SSLBindings 
```

试试这个：

```
$DaysToExpiration = 7

$expirationDate = (Get-Date).AddDays($DaysToExpiration)

$sites = Get-Website | ? { $_.State -eq "Started" } | % { $_.Name }
$certs = Get-ChildItem IIS:SSLBindings | ? {
           $sites -contains $_.Sites.Value
         } | % { $_.Thumbprint }

Get-ChildItem CERT:LocalMachine/My | ? {
  $certs -contains $_.Thumbprint -and $_.NotAfter -lt $expirationDate
} 
```

# intuit-partner-platform - How to redirect the user to a custom page when user click "Connect to QuickBooks" button?

> ID：16181738
> 
> 赞同：1
> 
> 时间：2013-04-24T01:07:08.267
> 
> 标签：intuit-partner-platform

So Intuit charges for each active connections to QuickBooks. Therefore, I want to restrict the QuickBooks functionality in my application to premium users only.

Ideally when any user clicks the "Connect to QuickBooks" button and my RequestOAuthToken http handler is called, I want to check if the user is allowed to use QuickBooks. If that is the case, then the normal OAuth flow continue. If the user is NOT allowed, then I want to redirect the user to the upgrade page of my app.

Given that the "Connect to QuickBooks" button opens a new window (at least on desktop, I haven't tried on phone/tablets), the window should get closed, and the main window (my app) should redirect the user to the right page. And actually this is exactly what happens if the normal OAuth flow completes.

Now, I have tried a few different approaches but I couldn't get it working.

1) In my RequestOAuthToken, return a HTTP redirect to the plan page

2) In my RequestOAuthToken, return an html page with javascript logic to redirect to page

3) In my RequestOAuthToken, return HTTP redirect to a page with javascript logic to redirect to page

4) I haven't tried that one but could I somehow intercept the javascript click handler on the Intuit button. I'm not sure if that is an accepted practice.

Here is the piece a javascript I grabbed from the .Net sample:

```
try
{
    var parentlocation = window.parent.opener.location.hostname;
    var currentlocation = window.location.hostname;
    if (parentlocation != currentlocation)
    {
        window.location = plansUrl;
    }
    else
    {
        window.opener.location.href = window.opener.location.href;
        window.close();
    }
}
catch (e)
{
    window.location = plansUrl;
} 
```

Help me out please.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:28:07.600

I don't think you'll be able to do exactly what you're asking, but you can probably come close by taking a different approach.

Rather than trying to redirect them *after* they click the button, why not try to redirect them *before* they click it? e.g. when they try to get to the page that has the "Connect to QuickBooks" button it, check if they are a premium user there, and redirect them if they are not.

I don't think you'll be able to redirect them *after* they click the button because once they click that button, they get kicked over to Intuit's website and it's beyond your control at that point.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T20:21:51.567

Clement, Keith has provided the answer we would want you to pursue. You may not alter the behavior of the Connect To QuickBooks button. It must be used as described in our documentation. Providing a link to a page that shows the Connect To QuickBooks buttons for your premium users and an upgrade message to non-premium users is the way to go.

I highly recommend that you visit [http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0040_Publishing_Your_App](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0040_Publishing_Your_App) and review all of the documentation there. If you develop with our guidelines and requirements in mind it will speed up the review process.

Tony Purmal Developer Relations Engineer Intuit Partner Platform

# java - 使用 for 循环进行 Java 跟踪

> ID：16181739
> 
> 赞同：0
> 
> 时间：2013-04-24T01:07:13.150
> 
> 标签：java, loops, for-loop, trace

我试过追踪这个，但发现很难弄清楚发生了什么。我也尝试过调试，但没有运气。

```
public class bob {

  public static void main(String[] args) {

    int[][] numbers = {{1, 0}, {4, 1}, {2, 3}, {1, 4}};
    int[] frequencies = new int[5];

    for (int row = 0; row < numbers.length; row++)
      for (int col = 0; col < numbers[row].length; col++) {
        frequencies[numbers[row][col]]++;
      }
    for (int i = 0; i < frequencies.length; i++)
      System.out.print(frequencies[i] + " ");
  }
} 
```

我的打印输出是`1,4,4,1`但 eclipse 给了我`1,3,1,1,2` 如果有人可以追踪第一部分，我应该能够关注其余部分。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:37:18.573

您的打印输出不应该`1,4,4,1`，因为您*在频率上循环了* ***5 次***。

`1,3,1,1,2`是正确的输出。

我建议您在外部`for-loop` *(rows)*中添加大括号，因为如果您在内部循环之后添加代码，它将不会成为主循环的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:48:34.080

您首先初始化`frequencies`为`ints`具有值 {0,0,0,0,0} 的默认数组。

在遍历循环时，您可以使用数组提供的索引访问此默认数组`numbers`，然后在 处递增每个 int `frequencies[numbers[row][col]]`。因此，在您的第一次通过时，您将增加 1 的第一个元素`frequencies`；在您的下一次通过时，您将 的第 0 个元素增加`frequencies`1。

因此，在您的迭代结束时，`frequencies`包含中每个特定数字的*频率*`numbers`，从 0 到 4，从而产生`frequencies`{1,3,1,1,2} 的数组。弄清楚非常有趣，一旦你这样做就很简单！希望能帮助到你！

# php - Infinite Loop with While inside Foreach and MySQL

> ID：16181740
> 
> 赞同：0
> 
> 时间：2013-04-24T01:07:25.317
> 
> 标签：php, arrays, foreach, mysqli, while-loop

I'm having a very odd problem with PHP/MySQL...

**echos "id;id"**

```
 foreach($ids as $id) {
      echo "id;";
 } 
```

**echos "id;id;id;id;..." (infinite loop)**

```
 foreach($ids as $id) {
      while($row = mysqli_fetch_array(mysqli_query($conn, "SELECT * FROM `Table` WHERE `id`=$id;") {
           echo "id;";
      }
 } 
```

The reason I have a foreach() statement is because I have $ids sorted.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:10:03.903

您*将*获得一个无限循环，这仅仅是因为您每次通过`while`循环都重新运行查询。这意味着，对于每个`$id`，您不断运行查询并从中提取第一行。因此，对于返回多于零行的任何查询，该查询的持续重新执行将使`while`循环无限循环。

它在功能上类似于下面的伪代码，它也将永远循环，因为您正在修改循环中的控制条件：

```
loop i from 1 to 10
    set i to 1
endloop 
```

您应该尝试以下方法：

```
foreach($ids as $id) {
    $result = mysqli_query($conn, "SELECT * FROM `Table` WHERE `id`=$id;");
    while($row = mysqli_fetch_array($result)) {
       echo "id;";
    }
} 
```

这将为每个 ID运行*一次*`while`查询，循环将处理该查询的行。

# haskell - Haskell LLVM -- Duplicate Functions Created

> ID：16181742
> 
> 赞同：5
> 
> 时间：2013-04-24T01:08:00.073
> 
> 标签：haskell, code-generation, llvm, dsl, dsl-tools

The problem I am having with the LLVM-Haskell bindings is that I am getting "duplicated" names. I think the best way to explain my problem is with a small concrete example (note the example is contrived, and for such a small example there are easy ways around it... however it does point out my problem).

```
putc :: TFunction (Int32 -> IO Word32)
putc = newNamedFunction ExternalLinkage "putchar"

simple :: TFunction (Int32 -> IO Word32)
simple = do
    internalputc <- putc
    createNamedFunction ExternalLinkage "simple" $ \x -> do
        call internalputc x
        call internalputc x
        ret (0 :: Word32)

easy :: TFunction (Int32 -> IO Word32)
easy = do 
    internalputc <- putc
    internalsimple <- simple
    createNamedFunction ExternalLinkage "easy" $ \x -> do
        call internalsimple x
        y <- add x (42 :: Int32)
        call internalputc y
        ret (0 :: Word32)

main :: IO ()
main = do
    m <- newNamedModule "Main"
    defineModule m easy
    writeBitcodeToFile "SillyLib" m 
```

If you now run this haskell program (you'll need some imports like Data.Int/Word, and LLVM.Core), you'll get the following output.

```
; ModuleID = 'SillyLib'

declare i32 @putchar(i32)

declare i32 @putchar1(i32)

define i32 @simple(i32) {
_L1:
  %1 = call i32 @putchar1(i32 %0)
  %2 = call i32 @putchar1(i32 %0)
  ret i32 0
}

define i32 @easy(i32) {
_L1:
  %1 = call i32 @simple(i32 %0)
  %2 = add i32 %0, 42
  %3 = call i32 @putchar(i32 %2)
  ret i32 0
} 
```

The problem is that in the IR, the (external) putchar is declared twice, but the second time with the name putchar1\. I have a good sense as to why this is, but not a good sense for a nice general way around this. I.e. I don't want to have to put everything inside of one giant CodeGenModule.

This brings me to the another related issue. Is the LLVM-Haskell binding appropriate for building the backend of a compiler. Perhaps with a reasonable solution to the above -- I can figure out a way to use it ... but it seems simpler just to hand write the IR code...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:54:54.180

您在monad`newNamedFunction "putchar"`内部调用了两次，这显然具有两次添加到模块`CodeGenModule`的副作用。`putchar`这导致两个声明而不是错误的事实可能是一个错误，请考虑报告它。要解决此问题，只需为and`putc`设置一个参数。这看起来大致如下（未经测试）：`simple``easy`

```
simple :: Function (Int32 -> IO Word32) -> TFunction (Int32 -> IO Word32)
simple putc =
    createNamedFunction ExternalLinkage "simple" $ \x -> do
        call putc x
        call putc x
        ret (0 :: Word32)

easy :: Function (Int32 -> IO Word32) -> Function (Int32 -> IO Word32) 
        -> TFunction (Int32 -> IO Word32)
easy putc simple' =
    createNamedFunction ExternalLinkage "easy" $ \x -> do
        call simple' x
        y <- add x (42 :: Int32)
        call putc y
        ret (0 :: Word32)

main :: IO ()
main = do
    m <- newNamedModule "Main"
    defineModule m $ do
        putc <- newNamedFunction ExternalLinkage "putchar"
        simple' <- simple putc
        easy putc simple'
    writeBitcodeToFile "SillyLib" m 
```

# mysql - 两个选择语句

> ID：16181746
> 
> 赞同：1
> 
> 时间：2013-04-24T01:08:53.460
> 
> 标签：mysql

```
SELECT COUNT( DISTINCT `student_id` ) 
FROM a
WHERE `marks` >=90 
```

以上给了我分数大于 90 的学生数，

```
COUNT( DISTINCT `student_id` )
4 
```

现在我想要两个答案，一个分数 > 90 另一个 > 80

像这样的东西

```
COUNT( DISTINCT `student_id` )  |COUNT( DISTINCT `student_id` )
    4                                            5 
```

这是我在谷歌搜索后尝试过的

```
 select

count_1 =( SELECT COUNT( DISTINCT `student_id` ) 
FROM a
WHERE `marks` >=90),

count_2 =( SELECT COUNT( DISTINCT `student_id` ) 
FROM a
WHERE `marks` >=80) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:10:29.343

我认为最简单的答案是使用隐式布尔条件，因为 MySQL 支持它，

```
SELECT  SUM(marks >= 90) Count_1,
        SUM(marks >= 80) Count_1
FROM    a
WHERE   marks >= 80 
```

该`WHERE`子句使搜索更快，因为它将首先过滤记录而不是遍历所有记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:11:11.930

您可以将`CASE`表达式与聚合函数一起使用：

```
SELECT 
  sum(case when `marks` >= 90 then 1 else 0 end) count_1,
  sum(case when `marks` >= 80 then 1 else 0 end) count_2
FROM a 
```

然后，如果您有更多的计数，您将添加更多的 case 表达式。

或者您可以使用：

```
SELECT 
  count(distinct case when `marks` >= 90 then `student_id` end) count_1,
  count(distinct case when `marks` >= 80 then `student_id` end) count_2
FROM a 
```

# java - Sending an ArrayList of serialized objects to client (TCP) from server

> ID：16181747
> 
> 赞同：0
> 
> 时间：2013-04-24T01:08:56.133
> 
> 标签：java, serialization, tcp, arraylist

My first question is that should I serialize each individual object in the arrayList or should I serialize the whole arrayList because I know that ArrayLists are serializable.

Also, how would I send it from a server to a client. I'm thinking of using ObjectOutputStream on the server side. But I think my instructor wants each and every object to be serialized.

How would I serialize each object and then add it to the ArrayList. After adding it to the ArrayList, I'd need to send the ArrayList to client which after receiving it, will de-serialize each object and read it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:20:51.560

No matter how you achieve serializing the items, you'll also need to serialize whatever you send them in. I see no real difference between serializing a list of serializables vs. doing so individually. Then you'd still have to serialize the list itself.

If you are not required to use ObjectInputStream, just to serialize and send, consider using XML. You have a couple options - [XMLEncoder](http://docs.oracle.com/javase/7/docs/api/java/beans/XMLEncoder.html)/[XMLDecoder](http://docs.oracle.com/javase/7/docs/api/java/beans/XMLDecoder.html) (older) or [JAXB](http://www.mkyong.com/java/jaxb-hello-world-example/) (newer), for example. One advantage with XML serialization over ObjectInput/OutputStream is the data is textual and (relatively) human readable on-the-wire.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:29:04.210

> 我将如何序列化每个对象，然后将其添加到 ArrayList。

你不会的。您只需将其添加到`ArrayList`并序列化即可。

> 将其添加到 ArrayList 后，我​​需要将 ArrayList 发送到客户端，客户端在接收到它后，将对每个对象进行反序列化并读取它。

不，客户端将反序列化`ArrayList`. 完毕。

# r - Correlation of subsets of dataframe using aggregate

> ID：16181750
> 
> 赞同：5
> 
> 时间：2013-04-24T01:09:12.103
> 
> 标签：r, aggregate, correlation

I have a data frame made by row binding many data frames, each identified with a unique key. I wish to calculate the correlation coefficients for columns in each subset (using the unique key) of the big data frame. For example, using the mtcars data I might want to calculate the correlation between columns `hp` and `wt` for each unique value in column `cyl`. I could do it in a loop

```
data("mtcars")
for(i in c(4,6,8)){
temp = subset(mtcars,mtcars$cyl==i)
cor(temp$hp,temp$wt)
} 
```

I think aggregate would be better, but this code doesn't work:

```
data("mtcars")
aggregate(mtcars,by=mycars$cyl,cor) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T01:20:17.527

You could use

```
 data("mtcars")
 library(plyr)
 ddply(mtcars, "cyl", function(x) cor(x$hp, x$wt)) 
```

This splits the data in `mtcars` by `cyl`, applies for each subset `x` the function `cor(x$hp, x$wt)` and then aggregates the results for each of the subsets in a data.frame.

I can highly recommend the `plyr` package. It's one of the packages I use most in R.

* * *

Edit: As per request, here a `dplyr` version. I have to say that I am not a big `dplyr` user, but the code should be ok.

```
library(dplyr)
mtcars %>% group_by(cyl) %>% summarise(V1=cor(hp, wt)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-24T02:12:55.213

在`base`R 中，它的工作是`split`and `lapply`or`sapply`

```
lapply(split(mtcars, mtcars$cyl), function(X) cor(X$hp, X$wt))
## $`4`
## [1] 0.1598761
## 
## $`6`
## [1] -0.3062284
## 
## $`8`
## [1] 0.01761795
## 

sapply(split(mtcars, mtcars$cyl), function(X) cor(X$hp, X$wt))
##           4           6           8 
##  0.15987614 -0.30622844  0.01761795 
```

# mysql - 计算发送/接收对的不同集合

> ID：16181752
> 
> 赞同：0
> 
> 时间：2013-04-24T01:09:16.963
> 
> 标签：mysql, sql

我们有一个表格来跟踪我们应用程序用户之间发送的消息。每行都有一个`fromid`, `toid`, `messageid`, 和`datetime`。

我想计算相互通信的不同用户对。另一种说法是计算用户之间不同的“对话”，其中对话被简单地定义为两个用户之间发送的一条或多条消息。因此，举一个具体的例子，一个对话可能是 Fred 向 Bob 发送 2 条消息，而 Bob 向 Fred 发送 3 条消息。

```
fromid toid messageid datetime
Fred Bob 123 2013-04-22 00:00:01
Bob Fred 135 2013-04-22 00:01:02
Fred Bob 238 2013-04-22 00:05:00
Bob Fred 300 2013-04-22 00:09:13
Bob Fred 312 2013-04-22 00:10:48 
```

所有这些都将是 1 次对话。对此进行查询的有效方法是什么（表非常大）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:19:12.063

```
SELECT COUNT(DISTINCT LEAST(fromID, toID), GREATEST(fromID, toID)) TotalConversation
FROM   messages 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ee8dd/7)
*   [SQLFiddle Demo（*增加了一条新记录*）](http://www.sqlfiddle.com/#!2/142d6f/1)

输出

```
╔═══════════════════╗
║ TOTALCONVERSATION ║
╠═══════════════════╣
║                 1 ║
╚═══════════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:15:57.543

您可以尝试一些涉及`CONCAT`功能的小技巧，例如：

```
SELECT DISTINCT CONCAT(fromid, '-', toid) AS 'conversation',
       fromid,
       toid,
       ...
  FROM table_name
 WHERE ... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T01:23:15.920

在 MYSQL 中，那将是

```
select count(distinct greatest(fromid, toid) + ':' + least(fromid, toid)) from messages; 
```

但是，我认为没有一种有效的方法可以在一个查询中为整个表执行此操作。

# sql-server - Creating a SQL Server stored procedure in VB.NET

> ID：16181757
> 
> 赞同：-2
> 
> 时间：2013-04-24T01:09:54.290
> 
> 标签：sql-server, vb.net, stored-procedures

How to create a SQL Server stored procedure in VB.NET by using `Imports System.Data.SqlClient`?

```
Public Function createstbkdb()
    Return "CREATE PROCEDURE test4444 " + _
            +"AS" + _
            +"GO"
End Function 
```

Regards,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:13:24.407

您可以使用[SqlCommand.ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx) ()，传入您的过程文本（作为链接的 MSDN 示例中的 queryString）。

请注意，执行 VB.NET 代码的连接必须在数据库中具有适当的权限才能创建过程。

**更新**

正如@CmlJame 所说，省略“GO”。这对 SSMS 有意义，但不应包含在对 ExecuteNonQuery() 的调用中。

# php - 为什么评论插件向右移动？

> ID：16181771
> 
> 赞同：0
> 
> 时间：2013-04-24T01:12:27.217
> 
> 标签：php, facebook-comments

今天突然之间，评论插件脱离了它的预期位置，它已经向右移动，从而造成了不便。我如何解决它？

我已经尝试过更新到最新的代码或者你想怎么称呼它。

求大神帮忙，问题怎么解决。

示例网址是[http://apne.tv/episodes/episodes/181/Diya-Aur-Baati-Hum.html](http://apne.tv/episodes/episodes/181/Diya-Aur-Baati-Hum.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:54:53.253

有同样的问题。将此添加到我的页面/站点 CSS 中：

```
.fb_iframe_widget iframe {position:relative; left:0px;} 
```

似乎解决了我的问题。我认为这个问题似乎已经解决了。

# c# - 遍历 WebBrowser 控件中页面上的每个 Html 元素

> ID：16181773
> 
> 赞同：2
> 
> 时间：2013-04-24T01:13:04.283
> 
> 标签：c#, webbrowser-control

我正在尝试创建一个循环以从网页中查找每个 HtmlElement，我目前在 C# 的 Web 浏览器控件中。

我试过了：

```
var elements = webbrowser1.Document.GetElementsByTagName("textarea");

foreach (HtmlElement el in elements) {
    MessageBox.Show(el);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T01:30:07.753

我会将其发布为答案，以便于查找。

所有文档元素都在`webBrowser1.Document.All`.

您可以像这样迭代它们：

```
foreach (HtmlElement element in webBrowser1.Document.All)
{
    MessageBox.Show(element.Id);
} 
```

# audio - Sending to two Bluetooth Speakers at once

> ID：16181779
> 
> 赞同：2
> 
> 时间：2013-04-24T01:14:04.273
> 
> 标签：audio, bluetooth, pulseaudio

Is it possible to send the same audio signal to two different Bluetooth speakers at once from a single source?

I remember reading somewhere that it's possible to send audio to two different sinks using PulseAudio, but I'm not sure if that applies to Bluetooth speakers or if Bluetooth has a built in limitation on something like this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T04:51:19.560

Bluetooth works as a source and sink profile. Normally phones are source devices and bluetooth headsets/speakers are sink device. If source has a capability of connecting 2 sink profiles at a time, audio can be send to 2 different devices,not sure if the device(Audio Source) which you have is capable to connect AVDTP(Music profile) profile with 2 devices at a time

# c - C、纸牌游戏WAR

> ID：16181781
> 
> 赞同：0
> 
> 时间：2013-04-24T01:14:31.503
> 
> 标签：c

我正在尝试使用 C 创建一个战争纸牌游戏。我没有为稍后将“丢弃”卡添加到玩家手牌中制作 2 个套牌，而是尝试添加经销商卡 [i] - 这之前与玩家 card[i] 进行比较，以确保玩家赢得手牌 - 直接到玩家手牌。index 用于通过将另一张牌附加到“手牌”的末尾来确保没有任何空元素 playerhand 指向，“手牌”最初有 26 张牌（一副牌的一半）。牌组最初被分成 2 份，前 26 张牌组 [0-25] 进入玩家手中，最后 26 张牌组 [26-51] 进入庄家手中。

这是我有问题的代码：

```
 //adds new card to deck at given index
void addToPlayerHand(int i) {
    int index=0;
    playerHand[index+26] = deck[i+26];
    index++;
    } 
```

这是我的完整游戏代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

//Type Stucture for Card
typedef struct cards {
    char suit;
    int face;
    struct cards *listp; // didn't use in this program
} card;

//Functions
//
int welcome();
//int checkWinWar();
int playGame();

int getComparison(card *firstCard,card *secndCard,int index);

void printingGame(int a,int b, int i);
void addToPlayerHand(int i);
void addToDealerHand(int i);
int addToDeck(card myCards, int index);
void hitPlayer(card theCard);
void hitDealer(card theCard);
void initilizeDeck();
int shuffleDeck();
int printFun(); // not used for game play

void freePlayers();

//Card Dynamics
//
card *playerHand;  // contains contents of players cards
card *dealerHand; // contains contents of dealers cards

//Deck of 52 Cards with discard decks
card deck[52];
card playerDeck[52];
card dealerDeck[52];

int numPlayer = 0;
int numAllPlayer = 0;

int numDealer = 0;  // needed for temp
int numAllDealer = 0;

//Main
int main(void) {

    printf("Hello..Welcome to WAR\n");

    //Game loop
    while (welcome() == 1) {  // welcome returns whether the player wants to play (1) or not (0)

        // put first card face up
        // display how many cards
        // indicate (if/if no) war has occurred
        // complete the war
        // add cards to player discard pile
        // check player for card count
        // if end game conition met, end hame

        if(playGame() == 1) { // playGame returns 1 if the function went through correctly

            if(checkWinWar()==1){

            }
            else{

            }

        } else {
            printf("Bust! Try Again\n\n");
            freePlayers(); // refreshes the dynamics of the hands
        }

    }

    //initilizeDeck();
    //shuffleDeck();
    //printFun();

    return 0;
}

//To allow the player to begin the game; 1 = True 0 = False
int welcome() {

    printf("Play a new round of WAR? (enter/return for yes):\t");

    if(getchar()=='\n'){
        return 1;
    }
    else
        return 0;

}

// refreshes the game and players
void freePlayers () {

    numDealer = 0;
    numPlayer = 0;

    numAllPlayer = 0;
    numAllDealer = 0;

    free(playerHand);
    free(dealerHand);

    playerHand = NULL; // needed so playerHand doesn't point to anything
    dealerHand = NULL;

    return;
}

// Playing of the game
int playGame() {

    initilizeDeck();  // initialize Deck returns the new deck of cards
    shuffleDeck();  // shuffleDeck returns the shuffled deck of cards

    int gameTrue = 1;  // gameTrue checks the state of the game

    int war = 0;
    int PlayerCardsRemaining=0;
    int DealerCardsRemaining=0;

    int temp,i,j=0;

    while (gameTrue == 1) {
        // splitting the deck
        for (j=0;j<26;j++){
            hitPlayer(deck[j]); // adding cards to playerHand
            PlayerCardsRemaining+=1;  //adding to player deck count.
        }
        for (j=26;j<52;j++){
            hitDealer(deck[j]);
            DealerCardsRemaining+=1;}  // adding to dealer deck count.

        i=0;
        while(PlayerCardsRemaining>0 && DealerCardsRemaining>0 && i<26) {

            printingGame(DealerCardsRemaining,PlayerCardsRemaining, i);

            if (getComparison(playerHand, dealerHand, i)==0){
                addToDealerHand(i);
                DealerCardsRemaining++;
                return 1;
            }
            else if(getComparison(playerHand,dealerHand,i)==1){
                addToPlayerHand(i);
                PlayerCardsRemaining++;
                return 1;
            }
            else if(getComparison(playerHand, dealerHand, i)==2){
                printf("There is an impending WAR\n");
                printf("press enter to engage in the WAR");
                war=1;

                if(war==1 && DealerCardsRemaining>=4 && PlayerCardsRemaining>=4){
                    temp=getComparison(playerHand, dealerHand, i+4);

                    while(war==1){

                        if(temp==0){
                            for(i=i;i<i+4;i++){
                                addToDealerHand(i);
                            }
                            war=0;
                            PlayerCardsRemaining-=4;
                            DealerCardsRemaining+=4;
                        }
                        else if(temp==1){
                            for(i=i;i<i+4;i++){
                                addToPlayerHand(i);
                            }
                            war=0;
                            DealerCardsRemaining-=4;
                            PlayerCardsRemaining+=4;
                        }
                        else
                            war=1;
                    }
                return 1;
                }
                if (DealerCardsRemaining<<4){
                    for(i=i;i<i+4;i++){
                        addToPlayerHand(i);
                    }
                }
                else if (PlayerCardsRemaining<<4){
                    for(i=i;i<i+4;i++){
                        addToDealerHand(i);
                    }
                }
            }
            i++; // increment i

        }

    }
    return 0;
}

void printingGame(int DealerCardsRemaining, int PlayerCardsRemaining, int i)
{
    // Gameplay Prompts

    //Prints interface that comes up after player(s) choose to play
    printf("*********\t\t*********\n");
    printf("*\t \t*\t\t*\t \t*\n");

    // Cases for cards that are face cards

    if(dealerHand[i].face==11){ // if dealer card is a jack
        printf("*\tJ\t*\t\t");
        if (playerHand[i].face<11){ // if player card isnt a face card
            printf("*\t%d\t*\n",playerHand[i].face);
        }
        else if(playerHand[i].face==11){ // if player card is a face card
            printf("*\tJ\t*\n");
        }
        else if(playerHand[i].face==12){
            printf("*\tQ\t*\n");
        }
        else if(playerHand[i].face==13){
            printf("*\tK\t*\n");
        }
        else if(playerHand[i].face==14){
            printf("*\tA\t*\n");
        }
    }
    else if(dealerHand[i].face==12){ // if dealer card is a queen
        printf("*\tQ\t*\t\t");
        if (playerHand[i].face<11){ // if player card isnt a face card
            printf("*\t%d\t*\n",playerHand[0].face);
        }
        else if(playerHand[i].face==11){ // if player card is a face card
            printf("*\tJ\t*\n");
        }
        else if(playerHand[i].face==12){
            printf("*\tQ\t*\n");
        }
        else if(playerHand[i].face==13){
            printf("*\tK\t*\n");
        }
        else if(playerHand[i].face==14){
            printf("*\tA\t*\n");
        }
    }
    else if(dealerHand[i].face==13){ // if dealer card is a king
        printf("*\tK\t*\t\t");
        if (playerHand[i].face<11){ // if player card isnt a face card
            printf("*\t%d\t*\n",playerHand[i].face);
        }
        else if(playerHand[i].face==11){ // if player card is a face card
            printf("*\tJ\t*\n");
        }
        else if(playerHand[i].face==12){
            printf("*\tQ\t*\n");
        }
        else if(playerHand[i].face==13){
            printf("*\tK\t*\n");
        }
        else if(playerHand[i].face==14){
            printf("*\tA\t*\n");
        }
    }
    else if(dealerHand[i].face==14){ // if dealer card is an ace
        printf("*\tA\t*\t\t");
        if (playerHand[i].face<11){ // if player card isnt a face card
            printf("*\t%d\t*\n",playerHand[i].face);
        }
        else if(playerHand[i].face==11){ // if player card is a face card
            printf("*\tJ\t*\n");
        }
        else if(playerHand[i].face==12){
            printf("*\tQ\t*\n");
        }
        else if(playerHand[i].face==13){
            printf("*\tK\t*\n");
        }
        else if(playerHand[i].face==14){
            printf("*\tA\t*\n");
        }
    }
    if (dealerHand[i].face<11 && playerHand[i].face<11){ // if both cards arent face cards
        printf("*\t%d\t*\t\t*\t%d\t*\n",dealerHand[i].face,playerHand[i].face);
    }
    printf("*\t \t*\t\t*\t \t*\n");
    printf("*********\t\t*********\n");
    printf("Dealer: %d cards. ",DealerCardsRemaining); // print how many cards the 'dealer' has
    printf("Player: %d cards. ",PlayerCardsRemaining); // print how many cards the player  has

}

int getComparison (card *firstCard, card *secndCard, int i)
{
    int a,b;
    a=firstCard[i].face;
    b=secndCard[i].face;
    if (b>a)
        return 0;
    else if (a>b)
        return 1;
    else
        return 2;
}

// gives player another card
void hitPlayer (card theCard) {
    if(numPlayer == 0) {  // if hitPlayer is giving playerHand its first card (for new deck or initial deck)

        if (numAllPlayer == 0)      // if its the first hand
            numAllPlayer = 1; // there is only one card in need of space
        else                        // if its not the first hand
            numAllPlayer++;   // you need space for all existing cards plus the one just added

        void *_tmp = realloc(playerHand, (numAllPlayer * sizeof(card))); // realloc is used since playerHand never has a constant size

        if (!_tmp) 
        {
            fprintf(stderr, "ERROR: Couldn't realloc memory!\n"); // stderr prints
        }
        playerHand = (card*)_tmp; // playerHand is card type pointer which points to void pointer tmp which is reallocating memory
    }
    playerHand[numPlayer] = theCard;
    numPlayer++;
}

// gives dealer another card
void hitDealer (card theCard) {
    if(numDealer == 0) {

        if (numAllDealer == 0)
            numAllDealer = 1;
        else
            numAllDealer++;

        void *_tmp = realloc(dealerHand, (numAllDealer * sizeof(card)));

        if (!_tmp)
        {
            fprintf(stderr, "ERROR: Couldn't realloc memory!\n");
        }
        dealerHand = (card*)_tmp;
    }
    dealerHand[numDealer] = theCard;
    numDealer++;
}

// creates a new deck of cards
void initilizeDeck() {

    //Loop Indexes like: count, i.... etc
    int i, p;

    int count = 0;
    card temp;

    for (i = 1; i < 5; i++) {
        for (p = 2; p <= 14; p++) {
            //Clubs
            if (i == 1) {
                temp.suit = 'C';
                temp.face = p;
            }
            //Diamonds
            if (i == 2) {
                temp.suit = 'D';
                temp.face = p;
            }
            //Hearts
            if (i == 3) {
                temp.suit = 'H';
                temp.face = p;
            }
            //Spades
            if (i == 4) {
                temp.suit = 'S';
                temp.face = p;
            }
            addToDeck(temp, count);
            count++;
        }
    }
}

//adds new card to deck at given index
int addToDeck(card myCards, int index) {
    deck[index] = myCards;
    return 1;
}
//adds new card to deck at given index
void addToPlayerHand(int i) {
    int index=0;
    playerHand[index+26] = deck[i+26];
    index++;
    }
//adds new card to deck at given index
void addToDealerHand(int i) {
    int index=0;
    dealerHand[index+26] = deck[i];
    index++;
}

//finds deck and shuffles cards 100 times from swaping a random value from  1-52
int shuffleDeck() {

    card temp;  // for an individual card

    int i,p;

    srand(time(NULL));

    for (i = 0; i < 100; i++) {
        for (p = 0; p < 52; p++) {
            int r = rand()%52;

            temp = deck[p];  // swaps to randomly pick another card
            deck[p] = deck[r];
            deck[r] = temp;
        }
    }

    return 0;
} 
```

它一直告诉我我的访问代码错误，code=2。

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:45:54.060

我将省去“我永远不会这样编码”的对话足够长的时间来暗示这种循环意识形态：

```
for(i=i;i<i+4;i++) 
```

将远远超出您的卡片阵列的限制，进入**未定义行为**的领域。想一想。然后问自己这个问题：在什么时候将`i`不再小于`i+4`？答案：当你达到`i+4`溢出变为负数的时候（假设优化器没有完全抛出条件，只是假设它总是正确的；谢谢杰里米）。

即`INT_MAX-3`。在 32 位系统上，只有大约 2147483562 个插槽**超出**阵列末端。

`playGame()`此错误在函数 中再重复 3 次。

# javascript - 如何触发 javascript 响应式菜单以在点击时隐藏？

> ID：16181782
> 
> 赞同：0
> 
> 时间：2013-04-24T01:15:09.530
> 
> 标签：javascript, responsive-design

我正在使用以下 JS 来显示和配置响应式特定菜单。基本上，当单击 h4 时，我在 #secondary-navigation 内的列表会向下滑动。我在带有页面锚点的页面上使用此菜单，因此我希望菜单在单击其中一个菜单项时向上滑动。我将如何使用下面的代码来完成此任务？谢谢你的帮助。

```
 <script>
            (function($) {
                $(function() {
                    var header = $('h4', '#secondary-navigation');
                    header.click(function() {
                        if($(this).next().is(':hidden')) {
                            $(this).next().slideDown('fast');
                        } else {
                            $(this).next().slideUp('fast');
                        }
                    });
                });
            })(jQuery);
            </script><!-- end mobile nav --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:21:32.530

编辑：我起初误读了你的问题。您需要添加第二个函数，该函数在单击其中一个子菜单时触发。那是一个单独的事件。

假设您的菜单项包含在 a`div`或`ul`id 中`#menu`：

```
$('#menu a').click(function() {
    $('#menu').slideUp('fast');
}); 
```

将此添加为一个单独的功能，在您上面发布的功能之外。

# jquery - Slide to an item by its Id instead of Index - .carousel(index)

> ID：16181783
> 
> 赞同：0
> 
> 时间：2013-04-24T01:15:12.087
> 
> 标签：jquery, twitter-bootstrap, carousel

With the code below, when I click on *MY BUTTON*, the item number 3 is shown.

```
$('#myButton').click(function () {
    $('#myCarousel').carousel(3);
}); 
```

-

```
<div id="myCarousel" class="carousel slide">
    <div class="carousel-inner">
        <div class="active item">0</div>
        <div class="item">1</div>
        <div class="item">2</div>
        <div id="myItem3" class="item">3</div>
    </div>
    <!-- Carousel nav -->
    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>

    <a id="myButton">MY BUTTON</a>
</div> 
```

Is there a way to show the item by his Id, not his index ?

somehting like that :

```
$('#myButton').click(function () {
    $('#myCarousel').carousel($('#myItem3'));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:19:43.347

you could do something like `$("#myItem4").prevAll("div").length + 1`

this will get all the previous siblings, count them, and add 1... getting it's own index within it's siblings

Edit: I just found some documentation and the carousel has a 0-based index. I had assumed it was 1-based because you said .carousel(4) took you to the 4th item. Since it is 0-based, remove the `+ 1`...

```
$('#myButton').click(function () {
    $('#myCarousel').carousel($("#myItem4").prevAll("div").length);
}); 
```

# java - java - 判断表达式语法有效性的递归程序（初级）

> ID：16181788
> 
> 赞同：0
> 
> 时间：2013-04-24T01:16:01.087
> 
> 标签：java, recursion

我刚刚学习java，我有一个任务，我必须编写一个程序来检查关于集合的表达式的有效性。有效的表达式是大写字母，前面带有波浪号的表达式，可以使用 + 和 x 以及括号组合。我编写了一个几乎可以工作的程序，但我不知道如何让二元运算符与括号一起工作。

也可能是我以错误的方式解决了问题（尝试从左到右进行验证，一旦验证就忽略左侧的所有内容）。对于此类问题，我可以使用任何我能获得的帮助来编写递归程序；也就是说，如果您对解决问题的更好方法有任何指示，那将非常有帮助。

作为参考，这是我拥有的代码：

```
public static boolean check(String expr) {       
         char spot;
         int close=0;
         expr = expr.trim();

  //base case
     if (expr.length() == 1 && expr.charAt(0)>= 'A' && expr.charAt(0) <= 'Z')
        return true;

        if (expr.charAt(0) == '~') {
            if (expr.charAt(1) == 'x' || expr.charAt(1) == '+' || expr.charAt(1) == ')')
                return false;
        return check(expr.substring(1));
        }

        if (expr.indexOf('x') > 0 && expr.indexOf('x') > expr.indexOf(')')) {
            int x = expr.indexOf('x');
            if (check(expr.substring(0, x)) && check(expr.substring(x)))
                return true;
        }

        if (expr.indexOf('+') > 0 && expr.indexOf('+') > expr.indexOf(')')) {
            int plus = expr.indexOf('+');
            if (check(expr.substring(0, plus)) && check(expr.substring(plus+1)))
                return true;
        }

        if (expr.charAt(0) == '(') {
        close = findEnd(expr.substring(1));
        if (close < 0)
           return false;
        if (check(expr.substring(1,close)) && check(expr.substring(close+1)))
           return true; 
     }      

     return false;

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:37:11.447

我不确定你的代码为什么那么复杂。总体而言，递归非常简单；这就是我要做的：

```
public static boolean check(String str) {
    if(str.equals("")) return true;
    if(str.charAt(0).isAlphaNumeric() || str.charAt(0) == '(' || str.charAt(0) == ')') return check(str.substring(1));
    return false;
} 
```

您的极端情况是字符串是否为空；如果是这种情况，则该字符串是有效的。如果字符与您要查找的字符不匹配，则返回 false。否则，检查下一个字符。

# version-control - mercurial forget revision changes to particular file

> ID：16181789
> 
> 赞同：0
> 
> 时间：2013-04-24T01:16:10.003
> 
> 标签：version-control, mercurial

In a recent commit I accidentally included changes to a settings file which had passwords and sensitive information for the production server. I pushed the changes to the private repository but there's also a public repository. I'd like to push the changes to the public repo but how can I avoid including the changes in that particular file from being included? It's already in the commit.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:42:02.673

如果您只有*提交*（到您的`.hg`存储库）但没有*推*送到默认的中央存储库，那么您可以使用`hg rollback`它将“*撤消*”您的提交。然后您可以修改：忘记文件、进行修改、更改日志消息等，然后再次提交，最后推送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:38:11.520

> 我将更改推送到私有存储库

您的意思是您在本地提交了更改集，还是将其推送到只有您有权访问的另一个存储库？你真的跑了`hg push`吗？

> 但也有一个公共存储库。

变更集是否已发布到公共仓库？

基本上，如果变更集是公开的，它就消失了。这是你无法控制的。更改服务器上的凭据。

如果变更集仍然是私有的，那么您可能很幸运。如果它是本地的，那么您可以使用它`hg strip`来删除更改集，但请注意它也会删除任何后代。如果它已成为任何其他回购的方式，那么您也需要将其从这些回购中剥离。`pull`如果更改集存在于任何地方，那么当您从它们那里时它会回来。

无论如何，可能是时候更改服务器上的凭据了。

# knockout.js - knockout 2 fields binding each other

> ID：16181790
> 
> 赞同：2
> 
> 时间：2013-04-24T01:16:18.450
> 
> 标签：knockout.js, computed-observable

This is my first post here after trying to google an answer. If this had been answered somewhere before then if you could help directing me to right place that would be great.

I am trying to figure out a way to do 2 way binding between 2 fields.

I have a 2 fields on my form that do weight calculation. If you enter weight in pounds into field #1 then Knockout will calculate the weight in kilograms into field #2\. I have no problem with this one and here is my jsfiddle for this [http://jsfiddle.net/ubiquitous_tom/tVh3g/](http://jsfiddle.net/ubiquitous_tom/tVh3g/)

```
var weight = 180;
self.weight = ko.observable(weight.toFixed(2));
self.weightKG = ko.computed(function(){
    var kg_weight = parseFloat(self.weight())/2.2;
    return !isNaN(kg_weight) ? kg_weight.toFixed(2) : undefined;
}); 
```

Now the problem I have is that when I'm trying to put weight in kilograms into field #2\. It should calculate the weight in pounds into field #1 but it doesn't do it. I have no idea how to make it work because all the code that i try using computed "read" and "write" on both fields give me infinite loop error so I think I'm just not doing something right.

If anyone can help me out that would be great. I'm sure this is something super simple but I am totally new to Knockout and I am not quite sure how to make it work right. here's the jsfiddle for the one i'm trying to work on [http://jsfiddle.net/ubiquitous_tom/VmZLZ/](http://jsfiddle.net/ubiquitous_tom/VmZLZ/)

```
var weight = 180;
self.weight = ko.observable(weight.toFixed(2));
self.weightKG = ko.computed({
    read: function() {
        return parseFloat(self.weight().toFixed(2));
    },
    write: function(newValue) {
        var kg_weight = parseFloat(newValue)/2.2;
        return !isNaN(kg_weight) ? kg_weight.toFixed(2) : undefined;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:42:45.883

这是一个工作小提琴：http: [//jsfiddle.net/jearles/VmZLZ/6/](http://jsfiddle.net/jearles/VmZLZ/6/)

关键是让可写计算的读取和写入都引用另一个可观察字段。当您读取计算时，它从“主”字段计算，当您写入计算时，它重新计算“主”字段。

--

```
function weightModel() {
    var self = this;
    var weight = 180;
    self.weight = ko.observable(weight.toFixed(2));
    self.weightKG = ko.computed({
        read: function() {
            return !isNaN(self.weight()) ? 
               (self.weight() / 2.2).toFixed(2) : undefined;
        },
        write: function(newValue) {
            var pd_weight = !isNaN(newValue) ?
                   (parseFloat(newValue) * 2.2).toFixed(2) : undefined;
            self.weight(pd_weight);
        }
    });
}
ko.applyBindings(new weightModel()); 
```

# java - 去除内部双引号的正则表达式

> ID：16181793
> 
> 赞同：0
> 
> 时间：2013-04-24T01:16:35.100
> 
> 标签：java, regex, csv

我有一个带有外部双引号的字符串`""`。我需要删除内部双引号。什么是正则表达式？

例如：

> 输入：“你好，今晚我到了”---> 输出：“你好，我今晚到了”
> 输入：“你好，我今晚到了””---> 输出：“你好，我今晚到了”
> 输入： “你好，我今晚到了”---> 输出：“你好，我今晚到了”

我尝试了以下代码，但它不适用于我的示例 2 和 3。它适用于示例 1。

```
data.replaceAll("\"(\\b[^\"]+)?\"\\b([^\"]+)\\b\"([^\"]+\\b)?\"","\"$1$2$3\""); 
```

背景：我有一个 CSV 文件，我需要对其进行解析。数据带有外部引号内的内部引号。例如：

```
"aa","bb","cc","dd "REMOVE QUOTES" "
"aaa","bbb","ccc",""REMOVE QUOTES" ddd " 
```

我希望正则表达式仅删除内部引号并保留外部引号。输出：

```
"aa","bb","cc","dd REMOVE QUOTES "
"aaa","bbb","ccc","REMOVE QUOTES ddd " 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:19:59.627

You could use a combination of negative look-behind and look-ahead:

```
data = data.replaceAll("(?<!^)\"(?!$)", "") 
```

*   `(?<!^)` Negative look-behind for start of line
*   `(?!$)` Negative look-ahead for `EOL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:23:44.323

试一试。我得到内部字符串（忽略外部引号）然后删除所有引号并添加外部引号。

```
String input1 = "\"Hello there \"I arrive\" tonight\"";
String output1 = "\"" + input1.substring(1, input1.length() - 1).replaceAll("\"", "") + "\"";
System.out.println(output1); 
```

输出

> “你好我今晚到”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T01:35:46.153

如果我假设您的字符串以第一个 " 开头并以最后一个 " 结束，您可以将其用于正则表达式：

```
data.replaceAll("(?<!^)\"(?!$)", ""); 
```

# ios - CATransition not work

> ID：16181799
> 
> 赞同：0
> 
> 时间：2013-04-24T01:17:21.203
> 
> 标签：ios, cocoa-touch

I want to make a custom segue with ripple transition.The transition works,but no ripple effect.Here is my code

```
 - (void)perform
{
    // Add your own animation code here.

    CATransition *animation = [CATransition animation];
    animation.delegate = self;
    animation.duration = 0.7;
    animation.timingFunction = UIViewAnimationCurveEaseInOut;
    animation.type = @"rippleEffect";

    [[[[self sourceViewController] view] layer] addAnimation:animation forKey:@"animation"];

    [[self sourceViewController] presentModalViewController:[self destinationViewController] animated:NO];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:43:52.737

`rippleEffect`是一种未记录的动画类型，你不能依赖它在任何特定的 iOS 版本之间工作相同（或根本），如此处讨论的：[涟漪效果动画](https://stackoverflow.com/questions/10283105/ripple-effect-animation)。我强烈建议您自己实现动画或寻找替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:01:57.883

这是一个可以附加到 UIViewController 的类别方法，以使用 CAAnimations 在父视图容器中的子视图之间进行转换。您可能需要根据您的目的对其进行修改，但它显示了 CATransitions 如何正确用于动画。

我写这个是为了在父 UIViewController 中创建一个来回分页效果，以便在子视图之间滑动。

```
 - (void) transitionFromView:(UIView*)fromView
                     toView:(UIView*)toView
         usingContainerView:(UIView*)container
              andTransition:(NSString*)transitionType{

    __block CGPoint targetOffset = fromView.center;
    __block BOOL transitionFromSameView = [toView isEqual:fromView];

    // In some cases, we want to perform the illusion of a transition when we are really just changing data in the same view.
    // In those cases, we don't need to perform this position modification.
    __block CGPoint centerOffset  = fromView.center;

    __block BOOL useAnimatedTransition = (transitionType != nil)?YES:NO;
    __block BOOL isLeftToRight = ([transitionType isEqualToString:kCATransitionFromRight])?YES:NO;

    if(transitionFromSameView == NO){
        CGFloat horizontalOffset = (isLeftToRight == YES)?[toView sizeWidth] + 100:-([toView sizeWidth] + 100);
        centerOffset = CGPointMake(fromView.center.x + horizontalOffset, fromView.center.y);
        [toView setCenter:centerOffset];
        [container insertSubview:toView belowSubview:fromView];
    }
    UIView *blockToView = toView;
    UIView *blockFromView = fromView;
    UIView *blockContainerView = container;

    if(useAnimatedTransition == NO){
        if(transitionFromSameView == NO){
            [blockToView setCenter:targetOffset];
            [blockFromView setCenter:centerOffset];
            [blockFromView removeFromSuperview];
        }  else {
            [blockToView setCenter:targetOffset];
            [blockFromView setCenter:centerOffset];
        }
    } else {

        [UIView animateWithDuration:kTransitionTime animations:^{

            CATransition *animation = [CATransition animation];
            [animation setDuration:kTransitionTime];
            [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
            [animation setType:kCATransitionMoveIn];
            [animation setSubtype:transitionType];
            [[blockContainerView layer] addAnimation:animation forKey:@"TransitionViews"];
            if(transitionFromSameView == NO){
                [blockToView setCenter:targetOffset];
                [blockFromView setCenter:centerOffset];
            }
        } completion:^(BOOL finished) {
            if(transitionFromSameView == NO){
                [blockFromView removeFromSuperview];
            }
        }];
    }
} 
```

# android - Trying to read a txt file in android

> ID：16181804
> 
> 赞同：0
> 
> 时间：2013-04-24T01:17:52.247
> 
> 标签：android, file-io

I'm attempting to read a txt file I have in my project. I keep getting the exception FileNotFound and have no idea why. The file is in the project folder under the AnroidManifest XML, but yet it is great at hiding from me anyway. Please help because I am about to go crazy getting frustrated with this. I know I can use Raw and Assets to read txt files, but I need to be able to write to this txt file as well as read it.

```
public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    FileInputStream getIn;
    try {
        getIn = openFileInput("filenames.txt");
        //Creating an InputStreamReader and setting my FileInputStream
        InputStreamReader read = new InputStreamReader(getIn);
        //Creating a new BufferReader and adding the InputStreamReader
        BufferedReader dis = new BufferedReader(read);
        Toast.makeText(getApplicationContext(), dis.readLine(), Toast.LENGTH_SHORT).show();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:57:13.153

不要将文件存储在资产中。转到 YourProject/res 并创建一个名为 raw 的目录并将其存储在那里。

您也可以将文件存储在内部存储中，但我怀疑 res/raw 方法更适合您的目的。

读这个：

[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:18:18.813

您不能将文件放在清单文件也存在的应用程序的主文件夹中。openFileInput("filenames.txt") 函数仅在您尝试读取或写入存在于手机内存中以下路径的文件时才有效

```
/data/data/<application-package>/files/<file-name> 
```

您可以做的一件事是当您第一次运行应用程序时保存文件，然后再读取或写入该文件。

# visual-studio-2010 - How to make MSI file by vs2010 that allow my app to create .txt file in Client Machine which is installed in C:\Program File\myAppFolder

> ID：16181806
> 
> 赞同：0
> 
> 时间：2013-04-24T01:18:23.297
> 
> 标签：visual-studio-2010, windows-installer

I'm deploying a .NET application with VS2010\. My application creates .txt file in the logs folder in the same directory with .exe:

```
app.exe
add.exe.config
logs (folder) 
```

I used setup project to create a MSI installer. When I installed in the client machine C: drive or any drives I have no problem to create the .txt file, but when I installed in C:\Program File\myAppFolder or C:\Program File(x86)\myAppFolder I cannot to create the .txt file.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:01:45.613

编写应用程序的安装位置是一个糟糕的设计。最好写到`ApplicationDataFolder`. 位于`ApplicationDataFolder`用户配置文件下，当以该用户身份运行时，应用程序将有权在此处写入。@Ken White 提供了一个非常好的指针，指向[关于 this 的现有 StackOverflow 答案](https://stackoverflow.com/a/13163750/23852)。

如果这是必须写入该文件夹的旧版应用程序，则您需要修改该`log`文件夹的权限，以便所有用户都可以写入该文件夹。这可能与 Windows Installer（又名：MSI）有关，但我不确定 Visual Studio 安装项目是否会公开它。[WiX 工具集](http://wixtoolset.org/)绝对支持[执行此类操作](https://stackoverflow.com/a/11345913/23852)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T13:21:23.160

一个旧帖子，但我最近需要做类似的事情，所以我想它仍然有效！虽然我不提倡糟糕的设计，但在现实世界中，有时我们不得不屈服于需求。

写入应用程序文件夹可能在 Win7 下，可以通过 VS2010 创建的 MSI 中的安装程序类进行设置。您只需要提供一个相关组（建议“用户”组，或者如果您想更多地控制谁获得什么，请提供一个选择屏幕）写入数据访问权限。

然后在路径上使用 DirectoryInfo，您可以从 GetAccessControl 获取安全数据。当您知道您的组时，获取组的 SID，并且 AddAccessRule 也提供所需的 ControlType 值。

然后使用安全数据对象对 DirectoryInfo 对象 (SetAccessControl) 设置访问控制。

如果使用 PrincipalSearcher 进行搜索，则可以从 Groups 主体对象获取 SID。

希望这可以帮助

保罗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T18:16:48.837

这通常取决于：

1.  您的应用程序是否因其他原因需要以管理员身份运行以及..

2.  您的应用程序是否提供给受限用户。

如果应用程序出于一系列其他原因需要提升（而不仅仅是在受限位置更新文件），那么通常的方法是在您的应用程序中嵌入提升清单。从安全的角度来看，这不是一件好事，但是如果您绝对需要管理员权限，那么这就是这样做的方法。

如果唯一需要提升的操作是在 Program Files 文件夹中更新/创建数据，则不要将文件放在那里。我见过的每个案例都是惰性编程，其中代码仅引用文件名，因此它位于 Program Files 文件夹中（更准确地说是在应用程序运行所在的同一文件夹中）。解决此问题的方法是将数据文件放在正确的位置（例如用户的应用程序数据文件夹）。正如 Rob Mensching 所说，只有当这是您无法更改的旧版应用程序时，您才应该更改安装文件夹的权限。

# node.js - node.js jquery - .post ajax like php

> ID：16181808
> 
> 赞同：1
> 
> 时间：2013-04-24T01:18:24.937
> 
> 标签：node.js

I am coming from `PHP` where an `AJAX` call from `jQuery` is done like this.
html:

```
$('a').click(function(){
    var mydata = 'abc123';
    $.post( 'process.php', { mydata:mydata}, function(data){
            $('body').append('<h1>'+data+'</h1>');
        });
    return false;
}); 
```

php:

```
$post = $_POST['mydata'];
echo $post; 
```

**Question:** how can i replace the `PHP` part with `node.js` to do the same thing?
also i would need to change this part of `jQuery` `$.post( 'process.php', ...`
would that look like this? `$.post( 'process.js', ...`?

[I saw this post](https://stackoverflow.com/questions/6158933/http-post-request-in-node-js) but i couldnt translate it from php to node

This helped out, from "Node.js for PHP developers"

> In PHP, a PHP file represents an HTML page. A web server, such as Apache, accepts requests and if a PHP page is requested, the web server runs the PHP. But in Node.js, the main Node.js file represents the entire web server. It does not run inside a web server like Apache; it replaces Apache.

# javascript - 如何在动态生成的jsp页面中传递数据对应的“提交”按钮

> ID：16181809
> 
> 赞同：1
> 
> 时间：2013-04-24T01:18:26.990
> 
> 标签：javascript, jsp

我有一个jsp页面，它在“Item Url”旁边有一个“提交”按钮，可以定向到另一个jsp页面。如下所示：

|项目1 | 项目 Url_1 | 第 1 行的“提交按钮”|Item2| 项目 Url_2 | 第 2 行的“提交按钮”

我附上了生成带有“提交”按钮的项目的部分代码。如何传递与相应项目编号对应的项目？

谢谢

```
<%@ page language="java" import="java.sql.*"%>
<html>
<body bgcolor="pink">
<h2>Stage 2</h2>
<h3>Product URL List</h3> 
<form action="frame4A.jsp" name="myform" target=frame4 method="POST">
<%
    try {
    Class.forName("org.postgresql.Driver");
    } catch (ClassNotFoundException e) {
    out.println("<h1>Driver not found:" + e + e.getMessage() + "</h1>" );
    }
    try {
    Connection conn = DriverManager.getConnection (
    "jdbc:postgresql://*****/****",
"postgres", "*****" );

    Statement stmt = conn.createStatement();
    ResultSet rs;

    rs = stmt.executeQuery("select laptopname, laptopurl from selectedproduct ");

    out.println( "<table border=1>" );

    while ( rs.next() ) {
        String lName= rs.getString("laptopname");
        String laptopUrl = rs.getString("laptopurl");

        out.println("<tr><td>"+lName+"</td><td><a href="+laptopUrl+"     target=\"_new\">"+laptopUrl+"</a></td><td><input type=\"submit\" name=\"reviewItem\" value=\"Reviews\"></td></tr>");
}
    out.println( "</table>" );
    conn.close();

} catch (Exception e) {
out.println( "<h1>exception: "+e+e.getMessage()+"</h1>" );
} 
finally{

}
%>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:26:24.170

如果我正确识别了您的问题，您可以通过多种方式处理此问题，例如

*   在相应的表单中添加一个隐藏的输入字段，该字段将在单击按钮时附加到 GET 请求中。
*   如果您使用 JavaScript 提交此表单，您可以在 JSP 中执行以下操作：

> `"<input type='button' onclick='handle(" + itemid + ")'>"`

然后编写一个名为 handle() 的 JavaScript 函数

```
function handle(id){
     //proceed to submit the form
} 
```

# javascript - Send javascript variables to Mysql database

> ID：16181811
> 
> 赞同：0
> 
> 时间：2013-04-24T01:18:39.640
> 
> 标签：javascript, mysql, variables, insert

I am trying to create a basic form where the user can enter his name, a comment and click on a submit button. When user clicks on submit, his name, comment as well as geolocation (longitude + latitude) are stored in a database. I have only one problem: How can I store the javascript variable of his geolocation into the database?

I have two php files. Iamhere.php (gets the data) and Iamhere_post.php (insert data into database).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:24:55.067

在表单中填充包含所需值的隐藏字段。

创建字段**经度 + 纬度**，然后使用 javascript 用地理值填充它们，以便它们与表单一起提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:32:00.787

在 HTML 表单中为每个纬度和经度填充一个隐藏字段：

```
<input type='hidden' name='latitude' />
<input type='hidden' name='longitude' /> 
```

将您的地理位置存储到变量中并将该变量添加到隐藏字段：

```
var latitude; //store the latitude to this variable.
var longitude; //store the longitude to this variable.

document.getElementsByName("latitude")[0].setAttribute("value",latitude)
document.getElementsByName("longitude")[0].setAttribute("value",longitude) 
```

像往常一样在数据库插入中使用 PHP 脚本调用它：

```
$_POST['latitude'];
$_POST['longitude']; 
```

# pandas - 为什么我不能从 DataFrame 列更改单元格子集中的值？

> ID：16181814
> 
> 赞同：2
> 
> 时间：2013-04-24T01:19:06.553
> 
> 标签：pandas, slice

我正在索引DataFrame 列中的单元格子**集**，并尝试将布尔值分配`True`给所述子集：

```
df['mycolumn'][df['myothercolumn'] == val][idx: idx + 25] = True 
```

但是，当我 slice 时`df['mycolumn'][df['myothercolumn'] == val][idx: idx + 25]`，仍然可以找到我的初始值。换句话说**，未应用更改！**

我要扯掉我的头发了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-02T02:55:07.627

试试这个：

```
df.loc[df['myothercolumn']==val, some_column_name] = True 
```

`some_column_name`应该是您要添加或更改的列的名称。

# c++ - A类和Class1的区别

> ID：16181817
> 
> 赞同：-1
> 
> 时间：2013-04-24T01:19:18.560
> 
> 标签：c++, eclipse

我正在尝试做这个 C++ 教程。我是 C++ 编程的初学者。我不明白他们为什么使用`setValue`and `getValue`in`class Class1`而不是 setClass1。在他们使用的另一个教程`setA`和`getA`课堂`class Class1`上。以下是代码：

```
 class Class1 {
    int i;
public:
    void setValue( int value ) { i = value; }
    int getValue() { return i; }
}; 
```

第二个代码是：

```
 class A{
    int ia;
public:// accessor method because they are used to access a private date member
    void setA ( const int a);
    int getA ()const;
    int getA ();
}; 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:31:41.627

名称是任意的，您可以使用任何您想要的函数名称（当然要遵守语言规则）。

但是，尽管您*可以*使用`xyzzy()`and`plugh()`作为 getter 和 setter，但这并不是一个好主意。

您应该使用指示呼叫意图的内容，例如`getTemperature()`or `setVelocity()`。而且这些甚至不必一对一地映射到内部字段，因为封装意味着不应该暴露内部细节。

我的意思是，`getTemperatureC()`即使内部字段存储为开尔文，您也可以返回摄氏温度：

```
double getTemperatureC(void)     { return kelvins - 273.15; }
void   setTemperatureC(double t) { kelvins = t + 273.15; } 
```

（或者 getter/setter 可以使用任意复杂的计算）。

当您创建要继承的类时，使用`getA()`类`A`可能会给您带来麻烦，但这超出了语言的范围。但是遵循上面的指南是一种很好的编程实践（函数应该表明意图而不是内部）。`B``A`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:31:49.323

> 我很困惑为什么他们在 get 和 set 中使用与类名相同的名称，而在另一个类上使用不同的 get 和 set 名称。set 和 get 名称会影响代码吗？

答案是否定的**。**

`getter`并且`setter`通常被称为`accessor`和`mutators`在一个类中。它们只是根据某种约定命名的成员函数，便于阅读代码的人理解这些函数的用途，因此`get`如果您尝试访问成员变量并以`set`如果您尝试更改一些成员变量。名称可以是任何有效的标识符。

所以`setValue`or`setA`只是这些成员函数的标识符。它不会影响代码。

同时，不同的类可以具有相同命名的 getter 或 setter，因为这些函数名在不同的类范围内。

# r - 重命名 ggplot2 的 bot x 和 y 构面

> ID：16181829
> 
> 赞同：-1
> 
> 时间：2013-04-24T01:21:01.477
> 
> 标签：r, ggplot2

我正在尝试为 ggplot2 图重新标记 x 和 y 方面。

我发现了多种编写函数来重新标记一个方面的方法，但不是两者兼而有之。

```
head(nh2)  
        RatioIncomePoverty Ethnicity Education mean.bmi  
1                  0         1         1       26.18333  
2                  0         1         1       30.88000  
3                  0         1         2       32.03000  
4                  0         1         4       34.45000  
5                  0         2         1       26.33000  
6                  0         2         2       23.44000  

b2 <- qplot(RatioIncomePoverty, mean.bmi, data=nh2, facets=Education~Ethnicity)
b2 = b2 + labs(list(title="Average BMI and Ratio of Family Income to Poverty Threshold     among US Ethnic groups", x = "Ratio of Family Income to Poverty Threshold", y = "Average BMI"))
b2 
```

目前，教育和种族都有 1-5 的值，我想将它们重命名为它们在调查中对应的值。

```
Education:    
1 = "<9th"  
2 = "9th-11th"  
3 = "GED"  
4 = "Some/AA"  
5 = "Grad"  

Ethnicity:  
1 = "Mex/Amer"  
2 = "OtherHisp"  
3 = "White"  
4 = "Black"  
5 = "Other/Multi" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:32:31.713

为什么不简单地创建以这些为级别的因子呢？

```
eth <- c('Mex/Amer', 'OtherHisp', 'White', 'Black', 'Other/Multi')
edu <- c('<9th', '9th-11th', 'GED', 'Some/AA', 'Grad')

nh2 <- within(nh2, {ethFac <- factor(Ethnicity, labels = eth)
                    eduFac <- factor(Education, labels = edu)})

 b2 <- qplot(RatioIncomePoverty, mean.bmi, data=nh2, facets=eduFac~ethFac) 
```

# ruby-on-rails - Rails 循环通过“A..Z”及以上？

> ID：16181831
> 
> 赞同：3
> 
> 时间：2013-04-24T01:21:29.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要根据模型的 start_date 生成一个唯一名称。我有以下有效的代码。但是，正如您所看到的，它最多只支持字母 Z。有没有办法让它在 Z 之外工作，就像这个序列一样？`A,B,C,...X,Y,Z,AA,AB,AC,AD,AE...AZ,BA,BB,BC...`

```
 def generate_name
    ("A".."Z").each do |letter|
      random_token = start_date.strftime("%m%d%y") + letter
      break random_token unless Tour.where(name: random_token).exists?
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:35:54.613

```
def letters
  ('a'..'z').each { |i| yield i }
  letters do |i|
    ('a'..'z').each { |j| yield i+j }
  end
end

def generate_name
  letters do |letter|
    random_token = start_date.strftime("%m%d%y") + letter
    break random_token unless Tour.where(name: random_token).exists?
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:17:43.617

Sam 的回答看起来正是您所要求的，但这里有另一种可能有用的方式来查看您的问题：

将您的字符串视为以 26 为基数的数字，其中数字由“a”..“z”表示。这种方式与您要求的方式之间的唯一区别是第一个两位数（错误，两个字母的字符串）将是*ba*而不是*aa*（假设您从*a* = 0，*b* = 1 开始计数，等）并且您不会生成任何以 a 开头*的*字符串（第一个除外），原因与您不写以 0 开头的整数（第一个除外）相同的原因。

如果快速计算出名称*dw*是您生成的第 100 个名称对您很有用，那么这种方法是有好处的。这也是将十六进制这个词用于对话或至少用于文档的好*[方法](http://en.wikipedia.org/wiki/Hexavigesimal)*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T03:43:56.863

谢谢Sunxperous。

这有效：

```
 def generate_name
    ("A".."ZZZ").each do |letter|
      random_token = start_date.strftime("%m%d%y") + letter
      break random_token unless Tour.where(name: random_token).exists?
    end
  end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T01:28:07.130

您正在寻找[Kleene 明星](http://en.wikipedia.org/wiki/Kleene_star)。未经测试，但似乎[RLTK](https://github.com/chriswailes/RLTK) gem 可以为您提供这样的功能。

# asp.net - How to have a Fixed Header in a Gridview?

> ID：16181836
> 
> 赞同：3
> 
> 时间：2013-04-24T01:22:10.107
> 
> 标签：asp.net, gridview

I have this current implementation from a friend of mind. The project has a GridView as shown below

```
<div ID="divGrid" runat="server">
<asp:GridView ID="docGrid" runat="server" AutoGenerateColumns="False" GridLines="None"
    DataSourceID="pagedDatasetSourceControl" OnRowDataBound="docGrid_RowDataBound" OnSelectedIndexChanging="docGrid_SelectedIndexChanging" DataKeyNames="ID"
    CssClass="gridTable" AllowSorting="True" AllowPaging="True" meta:resourcekey="docGridResource1">
    <PagerSettings Visible="false"></PagerSettings>
    <Columns>
        ..................
    </Columns>
    <RowStyle CssClass="tableRow"></RowStyle>
    <PagerStyle VerticalAlign="Bottom" HorizontalAlign="Right"></PagerStyle>
    <AlternatingRowStyle CssClass="tableRowAlt"></AlternatingRowStyle>
</asp:GridView>
</div> 
```

Now, more that one (1) .cs classes using this GridView, then each implementation is different. Then "ONE" of the .cs class implements a "scrolling" which is shown below.

```
this.divGrid.Attributes.Add("class", "fleft scroll");
this.divGrid.Attributes.Add("style", "width:100%; height:250px;"); 
```

But the code above scrolls the header as well, so when I scroll down the header scrolls as well. Is there a way to fix this issue by adding an "Attributes" in my .cs file for this class.

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-06T18:40:25.987

我写的jQuery插件可以固定标题和冻结列，它可以应用于GridView。看图片：

![在此处输入图像描述](https://i.stack.imgur.com/d7pF5.png)

看网站： http: [//gridviewscroll.aspcity.idv.tw/](http://gridviewscroll.aspcity.idv.tw/)

支持的浏览器

*   Internet Explorer 7、8（IE 9 兼容性）
*   Internet Explorer 9 (9.0.8112)
*   Windows 7 预览版上的 Internet Explorer 10
*   谷歌浏览器(23.0.1271.64 m)
*   火狐 (16.0.2)
*   苹果 Safari (5.1.7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-04T12:35:57.297

替代解决方案，如果您将 CssClass 添加到标题（ShowHeader="true"）：

```
<HeaderStyle CssClass="StickyHeader" /> 
```

并添加以下css

```
.StickyHeader th {
   position: sticky;
   top: 0
} 
```

它使第一行的表格数据，而不是行。这就是为什么这只是一个替代解决方案的原因，因为滚动条是从标题行开始的。但是在你稍微设置了滚动条的样式之后，结果还不错。

[![表格粘性标题](https://i.stack.imgur.com/wZg86.png)](https://i.stack.imgur.com/wZg86.png)

# php - 在 VPS 上使用 finfo

> ID：16181844
> 
> 赞同：1
> 
> 时间：2013-04-24T01:23:18.357
> 
> 标签：php, mime-types

我已经测试过这在本地有效，但是现在我已经将我的内容移动到了一个godaddy VPS，我发现了一些问题。

我就此事联系了支持人员，他们告诉我对此进行研究。

我发现的是这段代码：

```
 $finfo = new finfo(FILEINFO_MIME, "../../../../../etc/httpd/conf/magic"); 
```

正在指向正确的位置，但根据支持，该网络用户无权访问。

最安全的方法是什么？我对服务器管理比较陌生。

编辑：更新

/etc 中仅包含 php.ini 文件，这使 /etc/httpd/conf/magic 成为我无法使用的无效路径。我的本地开发机器是 Ubuntu Linux。我能以某种方式在我的 PHP 代码中即时 chmod 吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:51:52.467

尝试这个：

```
# chmod +r /etc/httpd/conf/magic 
```

这将授予您的用户读取权限。

# variables - 将批处理文件中的变量插入文本文件

> ID：16181845
> 
> 赞同：0
> 
> 时间：2013-04-24T01:23:19.467
> 
> 标签：variables, batch-file, insert, text-files

我如何将先前在批处理文件中建立的变量插入到文本文件中。我将文本插入到文本文件中，我只是无法弄清楚变量的插入。

我在做什么

```
SET name = "Casey"
ECHO "Hey" + name  > file.txt 
```

结果

```
"Hey" + name 
```

我想要的是

```
"Hey Casey" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:49:49.993

你应该这样做：

```
SET name=Casey
ECHO "Hey %name%"  > file.txt 
```

请注意，=**前后**没有**空格**

 **> 名称=凯西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:30:16.463

语法太糟糕了，你需要忘记其他编程语言，这就是 Batch。

首先，在为变量赋值时不能使用空格，这是这样做的方法：

```
SET "name=Casey" 
```

你也可以这样做：

```
SET "name=        Casey" 
```

Second Batch 没有用于字符串的**任何**连接运算符，忘记 + 和 &，& 用于连接命令。

所以这是正确的语法：

```
SET "name=Casey"
(ECHO Hey %name%)> "file.txt" 
```

尝试在回显“MyName 2”之类的数字结尾字符串时使用 () agrupation 运算符，以避免在具有批量重定向的大型脚本中出现问题。**

# java - 计算 jdbc 中一张表的相似行数

> ID：16181848
> 
> 赞同：0
> 
> 时间：2013-04-24T01:23:57.373
> 
> 标签：java, jdbc

我正在尝试从表的一列中计算相同的值并返回值和计数器，例如：值 1 重复 3 次，值 2 重复 2 次，...

到目前为止，我的程序可以将所需列的所有值存储在一个数组中。我的问题是我不知道如何将每个值与其他值进行比较。我知道我需要一个计数器，也许还需要一个数组。所以我陷入了If条件。

```
try{
  Statement stmt = conn.createStatement();
//Statement stmt1 = conn.createStatement();

ResultSet rset = stmt.executeQuery( "SELECT N_REGIONKEY FROM NATION " );

List N_REGIONKEY = new ArrayList ();
while (rset.next()){

  N_REGIONKEY.add(rset.getInt("N_REGIONKEY"));
  if (rset.next ==N_REGIONKEY){
           .
           .
           .

   }
  //System.out.println(N_REGIONKEY);
 }
} 
```

这是我在您的帮助下写的新版本，但答案仍然不是应该的..

```
try{

  System.out.println("counting rows in NATION table");

  Statement stmt = conn.createStatement();

//  Statement stmt1 = conn.createStatement();

  ResultSet rset = stmt.executeQuery( "SELECT N_REGIONKEY FROM NATION " );

  ArrayList N_REGIONKEY = new ArrayList ();

  while (rset.next()){

      N_REGIONKEY.add(rset.getInt("N_REGIONKEY"));

      int occurrences = 0;  

      for (int i = 0; i<N_REGIONKEY.size();i++)
{    
occurrences = Collections.frequency(N_REGIONKEY,N_REGIONKEY.get(i) );

System.out.println("There is " + occurrences + "occurrences for " + N_REGIONKEY.get(i));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:34:16.160

```
int occurrences = 0;
for (int i = 0; i<N_REGIONKEY.size();i++){
occurrences = Collections.frequency(REGIONKEY, REGIONKEY.get(i));
System.out.println("There is " + ocurrences "ocurrences for " + N_RegionKey.get(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:59:21.650

尝试按 sql 查询计数，而不是按数组

```
select N_REGIONKEY, count(N_REGIONKEY) as 'COUNT' 
FROM NATION
group by N_REGIONKEY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T00:28:08.777

感谢大家的帮助。最后，我编写了这个程序，没有分组（尽管我知道它要慢得多）。这与“分组依据”的结果相同。

```
 try{ 
```

System.out.println("统计 NATION 表中的相似行");

语句 stmt = conn.createStatement();

ResultSet rset = stmt.executeQuery("SELECT N_REGIONKEY FROM NATION");

ArrayList N_REGIONKEY = new ArrayList ();

int[] MyCounter = 新的 int[5];

而（rset.next（））{

```
 MyCounter[rset.getInt("N_REGIONKEY")] ++; 
```

}

对于 (int i = 0; i<5;i++){

```
 if (MyCounter[i] > 0) {

        System.out.println("There is " + MyCounter[i] + " ocurrences for " + i);
    } 
```

# python - 在 Python 中创建类的简短作业中，如何解决这些错误？

> ID：16181849
> 
> 赞同：0
> 
> 时间：2013-04-24T01:24:04.613
> 
> 标签：python, class

我有一个简短的任务需要完成，这与创建类有关，我不确定我的代码有什么问题。这是下面的说明，下面是我的代码。请解释我的错误是什么以及如何解决它/它们：

构建 2 个类。第一堂课是“书”课。book 类有 4 个变量，它们都是私有的。第一个是checkOut，它是一个布尔值，初始化为false，title是一个由输入变量初始化的字符串，author是一个字符串，由一个输入变量初始化，pages是一个整数，也由一个输入变量。这个类还将有 4 个与 is 关联的函数。第一个将返回变量checkedOut。第二个将更改checkedOut 的值。如果该值设置为 true，那么它将更改为 false，反之亦然。第三个函数将返回页数，最后一个函数将返回标题。打印书籍对象时，其格式为“标题作者页面已签出”。

第二类将被称为库。初始化库时，它将创建一个名为集合的空字典。库类将有 2 个功能。第一个函数将被称为 addBook，它将接受 3 个输入变量，标题、作者和页面。在此函数中，您将创建一个书籍对象，然后将其添加到以标题为键的字典中。第二个函数将接收一本书的标题，在字典中找到这本书并调用改变已签出状态的 books 函数。最后，当打印出图书馆对象时，它将在单独的行上打印出图书馆中的每本书。

最后，库类将在名为 main.py 的 python 程序中实现。

这是我的代码：

```
class Book:

    title = str(input("Enter the title of the book. "))
    author = str(input("Enter the author of the book. "))
    pages = int(input("Enter the number of pages in the book. "))
    checkedOut = False

    def checked_Out(self):
        print(checkedOut)
        return checkedOut

    def change_value_of_checkedOut(self):
        if checkedOut == False:
            checkedOut = True
            print("Switched from False to True.")
        elif checkedOut == True:
            checkedOut = False
            print("Switched from True to False.")

    def return_pages(self):
        print(pages)
        return pages

    def return_title(self):
        print(title)
        return title

class Library(Book):
    def __init__(self):
        collection = {}

    def addBook(self, title, author, pages):
        new_book = Book()
        collection[title] = author

    def change_checked_out_status(self, title):
        if title in collection:
            new_book.change_value_of_checkedOut(self)
        else:
            print("This book is not in the collection.") 
```

我在这里做的有什么问题？当我尝试创建对象并在 IDLE 中运行代码时，我不断收到错误，即未定义某个变量名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T01:31:40.617

(0) 下次粘贴错误。

```
class Book:

    title = str(input("Enter the title of the book. "))
    author = str(input("Enter the author of the book. "))
    pages = int(input("Enter the number of pages in the book. "))
    checkedOut = False

    def checked_Out(self):
        print(checkedOut)
        return checkedOut 
```

(1) 仅此部分。

`checkedOut`没有定义。你在哪里看到签出？就在函数的正上方`checked_Out`。好的。简短的回答，添加`self.`。

例子：

```
 def checked_Out(self):
        print(self.checkedOut)
        return self.checkedOut 
```

你真的不应该在那里做标题，作者的东西。它们成为类变量，而不是实例变量。有区别。

`input`(2)如果您仍在使用 2.x Python，请避免使用。

使用`raw_input`和摆脱`str`. 这样更安全。在 3.x 中，您可以使用输入，它始终是字符串（raw_input 将始终返回字符串）。这也造成了问题。

（3）你有把一切都搞定的坚韧。我通常很冷静，但有点糟糕。不要称它为`checked_Out`真正的不一致加上 Python 程序员更喜欢`checked_out`. `checkedOut`可以起名来`checked_out`和嘿嘿，可以冲突。不要将您的函数和变量命名如此相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:03:46.337

单独创建类，单独获取输入。另外，您要提到每个变量都是实例变量，而不是在本地范围内：

```
class Book:
    def __init__(self, title, author, pages):
        self.title = title
        self.author = author
        self.pages = pages
        self.checkedOut = False

    def checked_Out(self):
        print(self.checkedOut) # it has to be the instance variable
        return self.checkedOut

    def change_value_of_checkedOut(self):
        if self.checkedOut == False:
            self.checkedOut = True
            print("Switched from False to True.")
        elif self.checkedOut == True:
            self.checkedOut = False
            print("Switched from True to False.")

    def return_pages(self):
        print(self.pages)
        return self.pages

    def return_title(self):
        print(self.title)
        return self.title

class Library:
    def __init__(self):
        collection = {}

    def addExistingBook(self, book):
        collection[book.title] = book.author

    def addNewBook(self, title, author, pages): # create a book
        new_book = Book(title, author, pages)
        collection[title] = new_book.author # access the author

    def change_checked_out_status(self, title):
        if title in collection.keys():
            title.change_value_of_checkedOut()
        else:
            print("This book is not in the collection.") 
```

然后，将其余部分添加到`main`函数中：

```
def main():
    # if you are using Python 2.x, change input() to raw_input()
    title = str(input("Enter the title of the book. "))
    author = str(input("Enter the author of the book. "))
    pages = int(input("Enter the number of pages in the book. "))
    myBook = Book(title, author, pages)
    myLib = Library()
    myLib.addExistingBook(myBook) 
```

# php - 如何显示数组并将数字转换为字符串？

> ID：16181852
> 
> 赞同：-2
> 
> 时间：2013-04-24T01:24:19.357
> 
> 标签：php, arrays

```
$jobid = $_GET['idx'];
$sql2 = "SELECT * FROM job WHERE job_idx = '$jobid' ";
$result2 = mysql_query($sql2);
while($row = mysql_fetch_assoc($result2))
{
if($row["job_specialization"] == '228')
{ $spec.=" Accounting ";}
if($row["job_specialization"] == '24')
{ $spec.=" Admin / Clerical / Secretarial ";}
if($row["job_specialization"] == '3')
{ $spec.=" Audit & Taxation ";}
if($row["job_specialization"] == '5')
{ $spec.=" Banking / Finance / Investment / Credit Control ";}
}

echo "$spec"; 
```

在我的数据库中，我设法插入了一个最多只有 3 个值的数组，它们是 228,24,3。我可以在 preview-ad3.php 中显示这些数字，但是如何将值更改为如上所述的单词？例如。

```
echo $spec; 
```

会像这样 会计，行政/文员/秘书，审计和税务

如果有人可以帮助我，我将不胜感激，因为我只留下这件事来完成我的工作。感谢：D

* * *

答案已更新

```
 $jobarr = explode(",", $row['job_specialization']); 

if(in_array("228", $jobarr))
{ $spec.=" Accounting,";}
    if(in_array("3", $jobarr))
{ $spec.=" Audit & Taxation,";} 
```

我试过这段代码。而且效果很好！无论如何，谢谢你们的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:32:44.153

这样做的正确方法是创建一个表来保存有关工作详细信息的信息，以便您的查询如下所示：

```
SELECT j.*, i.title 
FROM job AS j INNER JOIN job_info AS i ON j.job_idx=i.id 
WHERE j.job_idx = '$jobid' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:43:45.773

跳这个帮助

```
$spec_map = array('228'=>'Accounting',
                '24'=>' Admin / Clerical / Secretarial',
                 '3' =>'Audit & Taxation',
                 '5'=>'Banking / Finance / Investment / Credit Control'
                );

$spec='';

while($row = mysql_fetch_assoc($result2))
{
$spec .= $spec?',':'';
$spec .= $spec_map[$row["job_specialization"]];
} 

echo $spec; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T01:41:48.483

我将忽略您的代码容易受到 SQL 注入攻击的事实，如果您不清理 GET 变量或使用准备好的语句来执行查询，入侵者可能会在您的数据库中做一些令人讨厌的事情。

据我了解，您的数据库通过 ID 存储 job_specialization，并且您希望将数字映射到名称。

很长的路要走是改变你当前的数据库模式，有两个表，一个用于 job_specialization，一个 id 和一个 name 列，并将这些表连接起来，以便从数据库中检索 job_specialization 的名称。

另一种方式，只是为了让您的代码更具可读性，我会使用该`define`函数，因此您的代码如下所示：

```
define('ACCOUNTING','228');
define('SECRETARIAL','24');
define('AUDIT','3');
define('BANKING','5');

$jobid = mysql_real_escape_string($_GET['idx']);
$sql2 = "SELECT * FROM job WHERE job_idx = '$jobid' ";
$result2 = mysql_query($sql2);

while($row = mysql_fetch_assoc($result2)) {

    switch($row['job_specialization']) {
     case ACCOUNTING:
         $spec.=" Accounting ";
         break;
     case SECRETARIAL:
         $spec.="Secretarial ";
         break;
    }

}

echo $spec; 
```

再说一次，这可能不是最好的代码性能，但至少比您发布的更具可读性。

# c++ - 我可以将递归函数的返回值设置为 const 吗？

> ID：16181854
> 
> 赞同：0
> 
> 时间：2013-04-24T01:24:34.210
> 
> 标签：c++, recursion, constants, return-value

我正在用 C++ 编写二叉树（使用链接节点表示）。我想编写一个成员函数来计算树中的节点数，所以我编写了一个递归函数来完成这项工作：

```
template<class Item> size_t binary_tree<Item>::count_node(
                                binary_tree_node<Item>* const node)
{
    if(node == NULL) return 0;
    else return 1 + count_node(node->get_left())
                  + count_node(node->get_right());
} 
```

我在 binary_tree 类的私有中设置了这个函数。我有一个公共函数 size() 来调用它：

```
template<class Item> size_t binary_tree<Item>::size()
{
    return count_node(root);
} 
```

现在我的问题来了：如果我像代码一样编写 size() ，它可以正常工作。但是，如果我像这样将返回值设置为 const：

```
template<class Item> size_t binary_tree<Item>::size() const
{
    return count_node(root);
} 
```

此代码无法编译。编译器抱怨无法将 size_t 转换为 const size_t。如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:26:21.863

在方法内部调用的任何方法都`const`必须是`const`它们自己。所以在你的情况下，这个`count_node`类也需要被标记`const`。

更正式地说，当你进入一个被标记的函数`const`时，`this`指针变为 a `const T*`，因此你不能使用它调用任何不接受 a 的方法`const T*`，因为你必须将 a强制`const T*`转换为 a `T*`，这不是允许。如果你真的想做一些不是 const 的事情，你可以`const_cast`用来移除 const-ness（不推荐），或者使用 volatile 成员/方法。

# time - Luaj os.time() 返回毫秒

> ID：16181858
> 
> 赞同：3
> 
> 时间：2013-04-24T01:25:01.240
> 
> 标签：time, lua, luaj

Luaj 中的 os.time() 以毫秒为单位返回时间，但根据 lua 文档，它应该以秒为单位返回时间。

1.  这是Luaj中的错误吗？
2.  您能否建议一种适用于 Luaj（for java）和真正的 Lua（c/c++）的解决方法？因为我必须对两个应用程序使用相同的 lua 源。（不能简单地将其除以 1000，因为它们都返回不同的时间尺度）

我的 lua 文件中的示例：

```
local start = os.time()
while(true) do
    print(os.time() - start)
end 
```

在 c++ 中，我收到了输出：

```
1
1
1
...(1 seconds passed)
2
2
2 
```

在java中（**使用Luaj**），我得到：

```
1
...(terminate in eclipse as fast as my finger can)
659
659
659
659 
```

仅供参考，我在 Windows 上试试这个

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T11:16:23.370

是的，luaj 中有一个错误。

`System.currentTimeMillis()`当您调用 os.time() 时，该实现只会返回。它真的应该返回类似的东西`(long)(System.currentTimeMillis()/1000.)`

还值得指出的是，luaj 中的 os.date 和 os.time 处理几乎完全缺失。我建议您假设它们尚未实施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:28:30.453

关于 os.time() 的 Lua 手册：

> 返回值是一个数字，其含义取决于您的系统。在 POSIX、Windows 和其他一些系统中，此数字计算自某个给定开始时间（“纪元”）以来的秒数。在其他系统中，没有指定含义，时间返回的数字只能作为os.date和os.difftime的参数。

因此，任何 Lua 实现都可以自由地改变`os.time()`值的含义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T16:31:40.463

看来您已经确认这是 LuaJ 中的错误；至于解决方法，您可以将 os.time() 替换为您自己的版本：

```
if (runningunderluaj) then
  local ostime = os.time
  os.time = function(...) return ostime(...)/1000 end
end 
```

where`runningunderluaj`可以检查一些仅在 luaj 下设置的全局变量。`os.clock`如果这不可用，您可能可以通过比较调用结果和`os.time`测量时间差来进行自己的检查：

```
local s = os.clock()
local t = os.time()
while true do
  if os.clock()-s > 0.1 then break end
end
-- (at least) 100ms has passed
local runningunderluaj = os.time() - t > 1 
```

注意：也有可能`os.clock()`是“坏的”。我无权访问 luaj 来测试这个......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-07T16:28:34.363

在 luaj-3.0-beta2 中，这已被修复为以秒为单位返回时间。

这是所有版本的 luaj 中的错误，包括 luaj-3.0-beta1。

# c++ - 在 std:sort() 上使用类

> ID：16181859
> 
> 赞同：0
> 
> 时间：2013-04-24T01:25:16.250
> 
> 标签：c++, class, sorting, vector, struct

这里的一个例子： [http ://www.cplusplus.com/reference/algorithm/sort/](http://www.cplusplus.com/reference/algorithm/sort/)

表明

```
struct myclass {
  bool operator() (int i,int j) { return (i<j);}
} myobject;

int main () {
  int myints[] = {32,71,12,45,26,80,53,33};
  std::vector<int> myvector (myints, myints+8);               // 32 71 12 45 26 80 53 33

  // using object as comp
  std::sort (myvector.begin(), myvector.end(), myobject);     //(12 26 32 33 45 53 71 80)
} 
```

这很好用，但是我正在尝试使用类而不是结构。所以我正在做的是：

CardComparer 类：

```
bool CardComparer::operator() (Card* firstCard, Card* secondCard) {
    this->firstCard = firstCard;
    this->secondCard = secondCard;
    if (firstCard->GetRank() == secondCard->GetRank()) {
        return firstCard->GetSuit() > secondCard->GetSuit();
    }
    else {
        return firstCard->GetRank() > secondCard->GetRank();
    }
} 
```

这是主要的：

```
CardComparer* compare;
compare = new CardComparer();
sort(cards.begin(), cards.end(), compare->operator()); 
```

我收到了这个很长的错误：

```
hand.cpp: In member function 'void Hand::AddCard(Card*)':
hand.cpp:60:54: error: no matching function for call to 'sort(std::vector<Card*>::iterator, std::vector<Card*>::iterator, <unresolved overloaded function type>)'
hand.cpp:60:54: note: candidates are:
In file included from /usr/include/c++/4.7/algorithm:63:0,
                 from hand.cpp:4:
/usr/include/c++/4.7/bits/stl_algo.h:5463:5: note: template<class _RAIter> void std::sort(_RAIter, _RAIter)
/usr/include/c++/4.7/bits/stl_algo.h:5463:5: note:   template argument deduction/substitution failed:
hand.cpp:60:54: note:   candidate expects 2 arguments, 3 provided
In file included from /usr/include/c++/4.7/algorithm:63:0,
                 from hand.cpp:4:
/usr/include/c++/4.7/bits/stl_algo.h:5499:5: note: void std::sort(_RAIter, _RAIter, _Compare) [with _RAIter = __gnu_cxx::__normal_iterator<Card**, std::vector<Card*> >; _Compare = bool (CardComparer::*)(Card*, Card*)]
/usr/include/c++/4.7/bits/stl_algo.h:5499:5: note:   no known conversion for argument 3 from '<unresolved overloaded function type>' to 'bool (CardComparer::*)(Card*, Card*)' 
```

我真的找不到解决方案，因为如果我修改示例并将其保留为结构，它可以正常工作，但是当我将其转换为类时不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:28:46.803

第三个参数称为函子，是可以调用的东西。指向函数的指针、C++11 lambda 或具有成员函数的对象*实例*（不是指针） 。`operator()`

在您的情况下，不要在堆上动态分配仿函数对象，在`std::sort`调用中将其声明为临时对象就足够了：

```
std::sort(cards.begin(), cards.end(), CardComparer()); 
```

在上面的`std::sort`调用中，using在栈上`CardComparer()` *创建*了一个对象，这个对象是临时的，只在`std::sort`运行时有效。`std::sort`函数会*调用*这个对象，这和`operator()`在对象上调用函数是一样的。

由于这个比较函子非常简单，它不需要存储任何数据：

```
struct CardComparer
{
    bool operator() (const Card* firstCard, const Card* secondCard) const { ... }
}; 
```

所以不需要成员数据字段。

# excel - 交叉表比较，sumproduct

> ID：16181867
> 
> 赞同：0
> 
> 时间：2013-04-24T01:26:24.840
> 
> 标签：excel, match, criteria

我正在尝试将两个不同的 Excel (2010/xlsx) 表与相关数据进行比较以查找匹配项。它们将在不同的工作表上，但在同一个工作簿中（并不是说它会影响问题）。

![Excel 截图](https://i.imgur.com/FMDpKyb.png)

我认为最好的路线是, 和... 的某种组合`sumproduct`，但到目前为止我还没有让它们工作。我看到主要问题（单元格 G17）通过创建表 2 中的行子集以与表 1 中的相应数据（索引/匹配）进行比较来解决，然后使用数组进行多标准选择以计算有多少匹配我选择的标准（）。`match``index``sumproduct`

我玩过`vlookup`, `countif(s)`，`sumif(s)`但还没有看到将它们应用于这个问题的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:42:01.630

您可以像这样使用 SUMIF 作为“准查找”

`=SUMPRODUCT((file="doc")*(modified < SUMIF(user,creator,create)))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:33:49.170

我不确定如何按照您的要求在单个单元格中执行此操作，但我会在第二个表中创建一个额外的列，该列使用 vlookup 查找创建日期，另一列包含创建日期是否为大于修改日期。最后，您可以使用 countif 来组合它们。

更具体地说，在您的示例中，我将放入`=vlookup(F3,A$3:D$5,2,FALSE)`单元格 I3 和`=I3>H3`单元格 J3，然后将它们都向下扩展。然后单元格 G17 可以由 给出`=countif(J3:J5,TRUE)`。

# wpf - 有关 HierarchicalDataTemplate 如何工作的细节

> ID：16181868
> 
> 赞同：0
> 
> 时间：2013-04-24T01:26:30.980
> 
> 标签：wpf, hierarchicaldatatemplate

使用什么逻辑`HierarchicalDataTemplate`来创建新分支？我的意思是“HierarchicalDataTemplate 使用 ItemsSource 中项目的哪些可用属性来知道它需要创建一个新分支。”

--UPDATE-- 让我措手不及，因为我看到很多帖子显示当指定 DataType 的属性可用时 Hier.DataTemplate 将如何创建新分支。我知道这必须能够通过所有项目都具有相同数据类型的自引用表来完成，但找不到任何关于此的已回答问题。

TreeView 绑定不能只具有正确的向下钻取路径——我没有在我的 ObservableCollection 家族中定义足够的递归来理解 Hier.DataTemplate 只需要被赋予一个属性来向下查看以查看孩子.

谢谢！

# ios - UITableViewCell 中嵌入的 UIWebView 中的触摸与滚动

> ID：16181869
> 
> 赞同：0
> 
> 时间：2013-04-24T01:26:35.260
> 
> 标签：ios, uitableview, uiwebview, uiscrollview

我在 UITableViewCell 中嵌入了一个 UIWebView。

webview 内容是静态大小并且具有`.scrollView.scrollEnabled = NO`.

webview 中的 javascript 响应`touchend`事件。

一切正常，除了`touchend`当用户在表格视图中滚动时触发事件。

我试过`canCancelContentTouches`在表格视图上设置但没有成功。

有没有办法在滚动时停止 javascript 事件触发，或者在 javascript 中检测到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:08:50.897

您将要使用 UIScrollViewDelegate，它具有以下方法：

```
– scrollViewDidScroll:
– scrollViewWillBeginDragging:
– scrollViewWillEndDragging:withVelocity:targetContentOffset:
– scrollViewDidEndDragging:willDecelerate:
– scrollViewShouldScrollToTop:
– scrollViewDidScrollToTop:
– scrollViewWillBeginDecelerating:
– scrollViewDidEndDecelerating: 
```

将 UITableViewController 委托的“scrollView.delegate”属性设置为“self”并在将 UIScrollViewDelegate 添加到表视图控制器后执行以下操作（您甚至可能不需要这样做，我不记得了，但它可能已经自动完成，您只需要公开这些方法）。

```
– scrollViewWillBeginDragging:

-> take your webview and "yourWebview setUserInteractionEnabled:NO"

– scrollViewWillEndDragging:withVelocity:targetContentOffset:

-> take your webview and "yourWebview setUserInteractionEnabled:YES" 
```

这只是一种方法。另一个可能是使用 UIGestureRecognizerDelegate 并尝试使用“–gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T23:52:27.373

我找到的解决方案是在 javascript 中设置一个标志以指示`touchend`应该忽略该事件。`touchend`如果设置了标志，则处理程序将退出。

标志置入`scrollViewWillBeginDragging:`并清除`scrollViewWillEndDragging:withVelocity:targetContentOffset:`

设置和清除标志很简单`[self.webView stringByEvaluatingJavaScriptFromString:@"ignoreTouchEvents = false;"]`

# jquery - 使用多级 jQuery 插件函数访问“this”上下文

> ID：16181871
> 
> 赞同：4
> 
> 时间：2013-04-24T01:26:50.750
> 
> 标签：jquery

我有一个要定义的多级插件：

```
$.fn.module = {};
$.fn.module.myfunc = function() { console.log(this); } 
```

所以我可以这样称呼它：

```
$(el).module.myfunc(); 
```

但是，一旦到达，就不再定义`myfunc`上下文变量，并且我无法访问所选元素 ( )。`this``$(el)`

有没有办法`$(el)`从内部访问`myfunc`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:18:30.243

将“this”存储到某个变量中，下次将该变量传递给 myfunc()

# ios - 当一个按钮通过指定的 Y 值时，所有其他下落的按钮也随之消失

> ID：16181874
> 
> 赞同：0
> 
> 时间：2013-04-24T01:27:23.180
> 
> 标签：ios, objective-c, xcode

我试图让多个按钮以不同的速度同时从屏幕上掉下来。但是当我让我的`if`语句检查它是否通过值时，所有其他按钮都会随之消失。每次按钮通过 Y 值时，我也会将分数增加为 -1。任何帮助表示赞赏，谢谢。

```
- (void)b1Fall
{
b1.center = CGPointMake(b1.center.x, b1.center.y+6);

if (b1.center.y >= 506) {
    [self updateScore];
    b1.center = CGPointMake(44, 11);
  }
}

- (void)b2Fall
{
b2.center = CGPointMake(b2.center.x, b2.center.y+7);

if (b2.center.y >= 506) {
    [self updateScore];
    b2.center = CGPointMake(160, 11);
}
}

- (void)b3Fall
{
b3.center = CGPointMake(b3.center.x, b3.center.y+8);

if (b3.center.y >= 506) {
    [self updateScore];
    b3.center = CGPointMake(276, 11);
  }
}

- (void)updateScore
{
healthLabel.text = [NSString stringWithFormat:@"%d", [healthLabel.text intValue]-1];
}

- (void)viewDidLoad
{
[super viewDidLoad];

// REMOVE AFTER TESTING    
b1Timer = [NSTimer scheduledTimerWithTimeInterval:0.02 target:self selector:@selector(b1Fall) userInfo:nil repeats:true];
b2Timer = [NSTimer scheduledTimerWithTimeInterval:0.02 target:self selector:@selector(b2Fall) userInfo:nil repeats:true];
b2Timer = [NSTimer scheduledTimerWithTimeInterval:0.02 target:self selector:@selector(b3Fall) userInfo:nil repeats:true];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:58:42.073

一些东西：

1.) 将这些动画放在 viewDidAppear 而不是 viewDidLoad - 您希望动画在用户实际查看按钮时开始，而不是在视图加载到内存时开始，用户可能无法看到它 (viewDidLoad) .

2.) 不要将 NSTimer 用于动画，使用这个：

```
 [UIView animateWithDuration:0.5
                          delay:1.0
                        options: UIViewAnimationCurveEaseOut
                     animations:^{

                     } 
                     completion:^(BOOL finished){
                        // loop your animation here.

                     }]; 
```

3.) 如果你想制作游戏，我不建议使用这种方法。所有使用 UIKit 的动画都将在主线程上执行并阻塞用户流。你想要的是一个像 Cocos2D 这样的框架，其中动画在 GPU 中执行，并且很容易支持 ASYNC 游戏逻辑。UIKit 通常不是游戏开发的好选择。

# c# - 32 位操作系统的 IBM MQ 问题（无法连接）

> ID：16181876
> 
> 赞同：0
> 
> 时间：2013-04-24T01:27:45.383
> 
> 标签：c#, ibm-mq

与 IBM MQ 7.1 客户端连接时，我在使用 32 位 Windows 操作系统（Windows XP）时遇到了一个问题。

我正在使用 7.1.0.0 amqmdnet.dll（引用自 IBM\websphere\bin 文件夹）

```
<Reference Include="amqmdnet, Version=7.1.0.0, Culture=neutral, PublicKeyToken=da2dc1d9abf9ed97, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..IBM\WebSphereMQ\7.1.0.0\amqmdnet.dll</HintPath>
</Reference> 
```

（从[IBM 链接](https://www14.software.ibm.com/)下载）

并使用 MQ.NET 类构建我的 .net 应用程序，但是在部署之后，如果目标计算机安装了 7.1.0.0 MQ 客户端，则应用程序会抛出

> System.DllNotFoundException：无法加载 DLL 'C:\Program Files\IBM\WebSphere MQ\bin\mqz.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

```
 at NativeUnmanagedType.zstSPI(Int32 hConn, Int32 verbId, Int32 hObj, Byte[] pInOut, Byte[] pIn, Byte[] pOut, Int32& compCode, Int32& reason)
   at IBM.WMQ.Nmqi.UnmanagedNmqiMQ.SPIQuerySPI(Hconn hConn, Int32 verbId, Int32& maxInOutVersion, Int32& maxInVersion, Int32& maxOutVersion, Int32& flags, Int32& pCompCode, Int32& pReason)
   at IBM.WMQ.Nmqi.UnmanagedNmqiMQ.MQCONNX(String pQMgrName, MQCNO& pConnectOpts, Hconn parentHconn, Phconn phconn, Int32& pCompCode, Int32& pReason)
   at IBM.WMQ.Nmqi.UnmanagedNmqiMQ.MQCONNX(String pQMgrName, MQConnectOptions pConnectOpts, Phconn phconn, Int32& pCompCode, Int32& pReason)
   at IBM.WMQ.MQQueueManager.Connect(String queueManagerName)
   at IBM.WMQ.MQQueueManager..ctor(String queueManagerName, Hashtable properties) 
```

我的代码是

```
// mq properties
properties = new Hashtable();
properties.Add(MQC.CONNECTION_NAME_PROPERTY, "Connection Name");
properties.Add(MQC.TRANSPORT_PROPERTY, "Transport Type");
properties.Add(MQC.CHANNEL_PROPERTY, "Channel Name"); 
properties.Add(MQC.CONNECT_OPTIONS_PROPERTY, MQC.MQCNO_HANDLE_SHARE_BLOCK);

//To read the messages
mqGetMsgOpts = new MQGetMessageOptions();

if (mqQueue != null)
            {
                //Get options for the messsage                
                mqGetMsgOpts.Options = MQC.MQGMO_BROWSE_FIRST | MQC.MQGMO_WAIT |  MQC.MQOO_INQUIRE;
                mqGetMsgOpts.MatchOptions = MQC.MQMO_NONE;
                mqGetMsgOpts.WaitInterval = 5000;  // 5 seconds limit for waiting
            }

      if (mqMsg.MessageLength > 0 && mqMsg.DataLength > 0)
      {
        messageData = mqMsg.ReadString(mqMsg.MessageLength);
      } 
```

调用队列管理器提交后有browse_next（因此浏览下一条消息）。

```
//To put the message
if(mqQueue==null)   
mqQueue = mqQMgr.AccessQueue("Queue Name",
 MQC.MQOO_OUTPUT | MQC.MQOO_INPUT_SHARED | MQC.MQOO_INQUIRE);

    mqMsg.WriteString(message); 
```

我该如何解决这个错误，知道吗？同一段代码在 Windows 64 位操作系统上运行良好。我在 64 位操作系统的 websphere MQ 客户端安装文件夹中的 bin 文件夹中没有那个 mqz.dll，它在那里工作，但是它在 32 位操作系统中失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:59:58.547

我只是在 64 位机器上安装 MQ v71 客户端。`Program Files (x86)\IBM\WebSphere MQ\bin`我可以在和文件夹中看到 MQZ.DLL `Program Files (x86)\IBM\WebSphere MQ\bin64`。

你在 WinXP 机器上**安装**了 MQ v71 客户端吗？

# javascript - jQuery 以编程方式选择值 - 奇怪的问题

> ID：16181880
> 
> 赞同：7
> 
> 时间：2013-04-24T01:28:38.607
> 
> 标签：javascript, jquery, fullcalendar, jquery-select2

我遇到了一个有趣的问题，使用[Select2](http://ivaynberg.github.io/select2/)和[FullCalendar](http://arshaw.com/fullcalendar)似乎无法解决。

单击事件后，我尝试使用数据库中的内容预先选择 Select2 下拉列表：

```
 $('#calendar').fullCalendar({
   eventClick: function(calEvent, jsEvent, view) {
            $("#view_event").modal();  //launches bootstrap modal
            $("#client_list_edit").select2();
            $("#client_list_edit").select2("val", calEvent.ClientID);
        }
 }); 
```

**这是我无法弄清楚的：**当我`eventClick`第*一次*时，它*没有*预先填充信息。

但是，当我`eventClick`第二次（或`eventClick`日历上的任何其他事件）*时，它可以*正常工作，选择并显示正确的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T20:34:35.323

我认为这是你想要的工作：

[http://jsfiddle.net/bU7wj/10/](http://jsfiddle.net/bU7wj/10/)

**HTML**

```
<select id="events">
    <option>??????</option>
    <option value="00001">All Day Event</option>
    <option value="00002">Long Event</option>
    <option value="00003">Repeating Event</option>
    <option value="00004">Repeating Event x</option>
    <option value="00005">Meeting</option>
    <option value="00006">Lunch</option>
    <option value="00007">Birthday Party</option>
    <option value="00008">Click for Google</option>
</select>
<div id="calendar"></div>
<div id="view_event" class="modal hide fade" tabindex="-1" role="dialog">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
        <p>More info here…&lt;/p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Ok</button>
    </div>
</div> 
```

**JS**

```
$(function() {

    var events = $('#events');
    var calendar = $('#calendar');
    var modal = $('#view_event');

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    events.select2();
    calendar.fullCalendar({
        eventClick: function(event, jsEvent, view) {

            modal.find('h3').text(event.title);
            modal.modal();
            events.select2('val', event.ClientID);

        },
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: true,
        events: [
            {
                title: 'All Day Event',
                start: new Date(y, m, 1),
                ClientID: '00001'
            },
            {
                title: 'Long Event',
                start: new Date(y, m, d-5),
                end: new Date(y, m, d-2),
                ClientID: '00002'
            },
            {
                id: 999,
                title: 'Repeating Event',
                start: new Date(y, m, d-3, 16, 0),
                allDay: false,
                ClientID: '00003'
            },
            {
                id: 999,
                title: 'Repeating Event x',
                start: new Date(y, m, d+4, 16, 0),
                allDay: false,
                ClientID: '00004'
            },
            {
                title: 'Meeting',
                start: new Date(y, m, d, 10, 30),
                allDay: false,
                ClientID: '00005'
            },
            {
                title: 'Lunch',
                start: new Date(y, m, d, 12, 0),
                end: new Date(y, m, d, 14, 0),
                allDay: false,
                ClientID: '00006'
            },
            {
                title: 'Birthday Party',
                start: new Date(y, m, d+1, 19, 0),
                end: new Date(y, m, d+1, 22, 30),
                allDay: false,
                ClientID: '00007'
            },
            {
                title: 'Click for Google',
                start: new Date(y, m, 28),
                end: new Date(y, m, 29),
                url: 'http://google.com/',
                ClientID: '00008'
            }
        ]
    });

}); 
```

**更新**

我添加了一个 Bootstrap 的模态，js 库版本是：

*   jQuery 1.9.1
*   选择器2 3.3.2
*   完整日历 1.6.1
*   jQuery UI 1.10.2
*   引导程序 2.3.1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T15:45:18.420

尝试

```
$('#calendar').unbind('click').fullCalendar({
   eventClick: function(calEvent, jsEvent, view) {
        $("#view_event").modal();  //launches bootstrap modal
        $("#client_list_edit").select2();
        $("#client_list_edit").select2("val", calEvent.ClientID);
    }
}); 
```

看起来与我遇到的问题相似..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T21:43:39.543

不确定您指的是哪个模态库，但如果它正在使用 setTimeout 打开和加载内容，那么您的代码会在模态库中有内容之前执行。你可以试试这个看看是不是这样：

```
$('#calendar').fullCalendar({
   eventClick: function(calEvent, jsEvent, view) {
            $("#view_event").modal();  //launches bootstrap modal
            setTimeout(function(){
                $("#client_list_edit").select2();
                $("#client_list_edit").select2("val", calEvent.ClientID);
            }, 1000);
        }
 }); 
```

也许它有一个类似于[https://github.com/tkirda/modal-box](https://github.com/tkirda/modal-box)的 API ，以便在内容加载完成后执行代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T07:33:49.653

（应该是评论，但我还是没有这个能力）

我认为您应该在“eventClick”中`$(document).ready`而不是在“eventClick”中初始化select2。在“eventClick”中，您应该只有第二行`$("#client_list_edit").select2("val", calEvent.ClientID);`

# wcf - 调用 WCF 方法时导航属性为空

> ID：16181881
> 
> 赞同：1
> 
> 时间：2013-04-24T01:28:40.653
> 
> 标签：wcf, entity-framework

我有以下分层的代码：

1.  数据 - DbContext 数据库访问。
2.  实体 - 具有 INotifyPropertyChanged 的​​ POCO 实体
3.  WCF 服务 - 使用数据和实体
4.  测试库

这是来自测试方法的代码。

```
 SalesOrder order = new SalesOrder();
        order.CustomerID = 1;
        order.OrderDate = DateTime.Now;
        order.SalesTax = 5.60M;
        order.ShipCharge = 5.00M;
        order.DiscountPercent = 20;
        order.ModifiedByUser = Environment.UserName;
        order.CreatedByUser = Environment.UserName;

        SalesOrderDetail detail = new SalesOrderDetail();
        detail.SalesOrder = order;
        detail.OrderID = order.OrderID;
        detail.OrderQuantity = 15;
        detail.UnitPrice = 20;
        detail.Description = "Test";
        detail.ModifiedByUser = Environment.UserName;
        detail.CreatedByUser = Environment.UserName;
        order.SalesOrderDetails.Add(detail);

        order = _service.SaveOrder(order); 
```

order.SalesOrderDetails 此时有一项。但是当它到达 WCF 方法时，order.SalesOrderDetails 的计数为 0。

这是我的 SalesOrder 类和 SalesOrderDetail 类

```
public partial class SalesOrder: EntityBase
{

    public SalesOrder()
    {
        this.SalesOrderDetails = new BindingList<SalesOrderDetail>();
        ((BindingList<SalesOrderDetail>)SalesOrderDetails).ListChanged += SalesOrder_ListChanged;
    }

    .... other properties

    [DataMember]
    public ICollection SalesOrderDetail{get; set;}
}

public partial class SalesOrderDetail : EntityBase
{

    .... other properties

    [DataMember]
    public SalesOrder SalesOrder{get; set;}
} 
```

我的实体库

```
[DataContract(IsReference = true)]
public class EntityBase:IAuditable, INotifyPropertyChanged
{
   .... IAuditable, INotify members
} 
```

我的 WCF 方法

```
 public SalesOrder SaveOrder(SalesOrder order) // At this point order.SalesOrderDetails count is 0.
    {
        if (order.OrderID == 0)
            AddSalesOrder(order);
        else
            UpdateSalesOrder(order);

        return order;
    } 
```

我在这里想念什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:20:18.373

我通过将 [DataContract(IsReference = true)] 添加到公共部分类 SalesOrder: EntityBase 和公共部分类 SalesOrderDetail: EntityBase 来修复它。不知道它是如何产生影响的。但这解决了我的问题。

# jquery - 如何访问 JQuery 函数的“选项”？

> ID：16181884
> 
> 赞同：0
> 
> 时间：2013-04-24T01:28:51.030
> 
> 标签：jquery, json, jquery-ui

JQuery 函数通常接受一个“选项”参数，该参数采用 JSON 对象的形式。例如，取自 JQuery 网站：

```
$('#book').animate({
    opacity: 0.25,
    left: '+=50',
    height: 'toggle'}); 
```

有没有办法在 JSON 对象之外访问这些“选项”？此外，有没有办法从函数外部更改 JSON 对象的属性？

例如，假设我有一个可拖动元素，并且我想在拖动中将“网格”从 [1,1] 更改为 [20,20]。我知道可以通过使用全新的 JSON 对象将新的可拖动函数完全重新附加到元素来解决这个问题，但我的问题是——我可以在不附加新`.draggable()`函数的情况下更改这些选项吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:32:35.030

在创建可拖动实例后，您应该使用可拖动的[选项 API来更新任何选项：](http://api.jqueryui.com/draggable/#method-option)

```
$('#book').draggable('option', 'grid', [20, 20]); 
```

# php - 将输入值存储到数据库中

> ID：16181887
> 
> 赞同：0
> 
> 时间：2013-04-24T01:29:12.820
> 
> 标签：php, javascript, mysql

我正在尝试为我的购物车制作一个数量框，但不知道如何将值存储在我的数据库中。

```
<?php 
     $db = mysqli_connect('localhost', 'root', '', 'store');
     $select_product = mysqli_query($db, "SELECT * FROM cart WHERE id = 0");
     $select_product_values = mysqli_fetch_assoc($select_product);
     $product_quantity = select_product_values['quantity'];

     echo "<input type='text' maxlength='2' name='quantity' value=".$product_quantity." class='quantity_box'/>";
     echo "<form action='checkout.php' method='post'><button type='submit' id='checkout'>Checkout</button></form>";
     mysqli_close($db);
?> 
```

结帐时最简单的方法是什么`update`？`value``quantity`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T01:31:43.377

# 更新 -

要获取数量，您可以这样做：（固定 HTML）：

```
 echo '
    <form action='checkout.php' method='post'>
        <input type="text" maxlength="2" name="quantity" value="'.$product_quantity.'" class="quantity_box"/>
        <button type="submit" id="checkout">Checkout</button>
    </form>'; 
```

检查从表单发送的值：

```
if(isset($_POST['quantity']) && !empty($_POST['quantity'])){
    $quantity = $_POST['quantity'];
    $updateCartSQL = "Update yourTable set quantity = '" . mysql_real_escape_string($quantity) . "'";
} 
```

* * *

# 重要的！

**确保在将数据插入数据库之前清除所有用户输入。更好的是，查看[mysqli 准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)以更加安全！**

# java - Apache CXF (SOAP) 和 NTLM 代理 - 连接被拒绝

> ID：16181888
> 
> 赞同：1
> 
> 时间：2013-04-24T01:29:29.250
> 
> 标签：java, web-services, soap, proxy, ntlm

我在使用 Apache CFX 调用 SOAP Web 服务并与我们的公司 NTLM 代理进行身份验证时遇到了一些麻烦。我必须使用[JCFS](http://jcifs.samba.org/)，因为我们的安装程序使用 Java 5。应用程序服务器是 Glassfish 2.1.1。

```
public Client() {

        final String username = USERNAME;
        final String password = PASSWORD;
        final String url = CONNECTION_URL;

        final JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
        logger.debug("JaxWSProxy Factory created");

        // Basic authentication
        factory.setUsername(username);
        logger.debug("Set SOAP username");
        factory.setPassword(password);
        logger.debug("Set SOAP password");

        final GZIPInInterceptor gzipInterceptor = new GZIPInInterceptor();
        factory.getInInterceptors().add(gzipInterceptor);
        final FIStaxInInterceptor fastInfoSetIn = new FIStaxInInterceptor();
        factory.getInInterceptors().add(fastInfoSetIn);
        final FIStaxOutInterceptor fastInfoSetOut = new FIStaxOutInterceptor();
        factory.getOutInterceptors().add(fastInfoSetOut);
        logger.debug("Interceptors initialized");

        // Configure WS-Security Header
        // Connnection to SOAP endpoint - only possible with security header
        Map properties = new HashMap();

        WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(properties);

        factory.getOutInterceptors().add(wssOut);
        factory.getOutInterceptors().add(new SAAJOutInterceptor());

        properties.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN + " " + WSHandlerConstants.TIMESTAMP);

        // Specify username
        properties.put(WSHandlerConstants.USER, username);

        // Password type :plain text
        properties.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);

        // Callback used to retrieve password for given user
        properties.put(WSHandlerConstants.PW_CALLBACK_REF, new ClientPasswordHandler(password));

        // Set interface class
        factory.setServiceClass(FeedInterface.class);

        // Set url
        factory.setAddress(url);

        this.Feed = (FeedInterface) factory.create();

         //Set the jcifs properties
        jcifs.Config.setProperty("jcifs.smb.client.domain", "domain");
        jcifs.Config.setProperty("jcifs.netbios.wins", "xxx.xxx.xxx.xx");
        jcifs.Config.setProperty("jcifs.smb.client.soTimeout", "300000");
        jcifs.Config.setProperty("jcifs.netbios.cachePolicy", "1200");
        jcifs.Config.setProperty("jcifs.smb.client.username", " username ");
        jcifs.Config.setProperty("jcifs.smb.client.password", " password ");

        //Register the jcifs URL handler to enable NTLM
        jcifs.Config.registerSmbURLHandler();

        //Turn off chunking so that NTLM can occur
        Client client = ClientProxy.getClient(this.Feed);
        HTTPConduit http = (HTTPConduit) client.getConduit();
        HTTPClientPolicy httpClientPolicy = new HTTPClientPolicy();
        httpClientPolicy.setConnectionTimeout(36000);
        httpClientPolicy.setAllowChunking(false);
        http.setClient(httpClientPolicy);

        logger.debug("Client created");

    }

    /**
     * Gets the Service web service client. <p>
     * <p/>
     * @return Returns the feed.
     */
    public FeedInterface getfeed() {
        return Feed;
    }

    /**
     * Private class to handle setting the client password on the WS-Security envelope.
     */
    class ClientPasswordHandler implements CallbackHandler {

        private String password = null;

        public ClientPasswordHandler(String password) {
            this.password = password;
        }

        public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {

            WSPasswordCallback pc = (WSPasswordCallback) callbacks[0];
            // set the password for the outbound message.
            pc.setPassword(this.password);
        }

    }
} 
```

我也测试了这个解决方案：

```
public Client() {

        final String username = USERNAME;
        final String password = PASSWORD;
        final String url = CONNECTION_URL;

        final JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
        logger.debug("JaxWSProxy Factory created");

        // Basic authentication
        factory.setUsername(username);
        logger.debug("Set SOAP username");
        factory.setPassword(password);
        logger.debug("Set SOAP password");

        final GZIPInInterceptor gzipInterceptor = new GZIPInInterceptor();
        factory.getInInterceptors().add(gzipInterceptor);
        final FIStaxInInterceptor fastInfoSetIn = new FIStaxInInterceptor();
        factory.getInInterceptors().add(fastInfoSetIn);
        final FIStaxOutInterceptor fastInfoSetOut = new FIStaxOutInterceptor();
        factory.getOutInterceptors().add(fastInfoSetOut);
        logger.debug("Interceptors initialized");

        // Configure WS-Security Header
        // Connnection to  SOAP endpoint - only possible with security header
        Map properties = new HashMap();

        WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(properties);

        factory.getOutInterceptors().add(wssOut);
        factory.getOutInterceptors().add(new SAAJOutInterceptor());

        properties.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN + " " + WSHandlerConstants.TIMESTAMP);

        // Specify username
        properties.put(WSHandlerConstants.USER, username);

        // Password type :plain text
        properties.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);

        // Callback used to retrieve password for given user
        properties.put(WSHandlerConstants.PW_CALLBACK_REF, new ClientPasswordHandler(password));

        // Set interface class
        factory.setServiceClass(FeedInterface.class);

        // Set url
        factory.setAddress(url);

        final String authUser = "username";
        final String authPassword = "password";
        Authenticator.setDefault(new Authenticator() {

        public PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(authUser, authPassword.toCharArray());
        }

        });

        System.setProperty("http.proxySet", "true");
        System.setProperty("https.proxyHost", "xxxx.xxxx");
        System.setProperty("https.proxyPort", "8080");

        this.Feed = (FeedInterface) factory.create();

        logger.debug("Client created");

    }

    /**
     * Gets the Service web service client. <p>
     * <p/>
     * @return Returns the feed.
     */
    public FeedInterface getfeed() {
        return Feed;
    }

    /**
     * Private class to handle setting the client password on the WS-Security envelope.
     */
    class ClientPasswordHandler implements CallbackHandler {

        private String password = null;

        public ClientPasswordHandler(String password) {
            this.password = password;
        }

        public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {

            WSPasswordCallback pc = (WSPasswordCallback) callbacks[0];
            // set the password for the outbound message.
            pc.setPassword(this.password);
        }

    }
} 
```

我总是收到此连接被拒绝异常：

```
 2013-04-23 16:52:34 SessionCron [ERROR] Exception encountered running SessionCron. For stack trace see debug log.
2013-04-23 16:52:34 SessionCron [DEBUG] Stack trace: 
javax.xml.ws.soap.SOAPFaultException: Connection refused
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:156)
    at com.sun.proxy.$Proxy103.getXXXX(Unknown Source)
    at xxx.yyyyyy..SessionAgent.updateXXXXData(SessionAgent.java:260)
    at xxx.yyyyyy..SessionAgent.checkForUpdates(SessionAgent.java:143)
    at xxx.yyyyyy.util.SessionCron.run(SessionCron.java:40)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Caused by: com.sun.xml.stream.XMLStreamException2
    at com.sun.xml.stream.writers.XMLStreamWriterImpl.writeStartElement(XMLStreamWriterImpl.java:1363)
    at org.apache.cxf.staxutils.StaxUtils.writeStartElement(StaxUtils.java:586)
    at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:525)
    at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:513)
    at org.apache.cxf.binding.soap.saaj.SAAJOutInterceptor$SAAJOutEndingInterceptor.handleMessage(SAAJOutInterceptor.java:210)
    at org.apache.cxf.binding.soap.saaj.SAAJOutInterceptor$SAAJOutEndingInterceptor.handleMessage(SAAJOutInterceptor.java:171)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:535)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:465)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:368)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:321)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:88)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134)
    ... 13 more
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.Socket.connect(Socket.java:529)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:158)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:388)
    at sun.net.www.http.HttpClient$3.run(HttpClient.java:451)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.http.HttpClient.privilegedOpenServer(HttpClient.java:433)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:514)
    at sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:272)
    at sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:329)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:172)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:949)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:158)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1014)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleHeadersTrustCaching(HTTPConduit.java:1368)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.onFirstWrite(HTTPConduit.java:1310)
    at org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:42)
    at org.apache.cxf.io.AbstractThresholdOutputStream.unBuffer(AbstractThresholdOutputStream.java:89)
    at org.apache.cxf.io.AbstractThresholdOutputStream.write(AbstractThresholdOutputStream.java:79)
    at com.sun.xml.stream.writers.UTF8OutputStreamWriter.write(UTF8OutputStreamWriter.java:107)
    at com.sun.xml.stream.writers.XMLStreamWriterImpl.openStartTag(XMLStreamWriterImpl.java:1588)
    at com.sun.xml.stream.writers.XMLStreamWriterImpl.writeStartElement(XMLStreamWriterImpl.java:1322)
    ... 25 more 
```

# python - 扩展超类的所有子类

> ID：16181897
> 
> 赞同：0
> 
> 时间：2013-04-24T01:30:30.680
> 
> 标签：python, inheritance, dry

我有一个一对多的类继承结构，如下所示：

```
class SuperClass:
  def func1():
    print 'hello'

  def func2():
    print 'ow'

class SubClass1(SuperClass):
   def func1():
     print 'hi'

class SubClass2(SuperClass):
   def func1():
     print 'howdy'

... 
```

我想向 A 类添加功能，以便在创建 B 类和 C 类（等）时可以使用它，但我无法直接编辑 A 类的代码。我目前的解决方案是：

```
def func3():
  print 'yes!'

SuperClass.func3 = func3 
```

有没有更好和/或更多的pythonic方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:37:05.310

这被称为“monkeypatching”，在某些情况下是完全合理的。

例如，如果您必须使用依赖于 的其他人的代码（您无法修改）`SuperClass`，并且您需要更改该代码的行为，那么您唯一真正的选择是替换`SuperClass`.

* * *

但是，在您的情况下，似乎没有任何充分的理由这样做。您正在定义 的所有子类`SuperClass`，那么为什么不在两者之间添加另一个类呢？

```
class Intermediate(SuperClass):
    def func3():
        pass

class SubClass1(Intermediate):
    def func1():
        print 'hi' 
```

`SuperClass`如果您无法控制的其他代码需要该功能，这对于“应该存在但没有的功能”来说还不够好......但是当只有*您的代码*需要该功能时，它同样好，而且很多更简单。

* * *

*如果连子类都不受您的控制，通常*您可以从每个. 例如：

```
class Func3Mixin(object):
    def func3():
        pass

class F3SubClass1(SubClass1, Func3Mixin):
    pass

class F3SubClass2(SubClass2, Func3Mixin):
    pass 
```

现在您只需构造实例`F3SubClass1`而不是`SubClass1`. 期望`SubClass1`实例的代码可以使用`F3SubClass1`就好了。而 Python 的鸭子类型使得这种“面向 mixin 的编程”特别简单：在 的实现中`Func3Mixin.func3`，你可以使用 的属性和方法`SuperClass`，尽管它`Func3Mixin`本身并没有以`SuperClass`任何方式静态相关，因为你知道任何作为 a 的运行时对象`Func3Mixin`也将是`SuperClass`.

* * *

同时，即使猴子补丁*是*合适的，它也不一定是最好的答案。例如，如果您正在修补以解决某些第三方代码中的错误，该代码有一个很好的许可证和一个源存储库，可以轻松维护自己的补丁，您可以只分叉它，创建一个固定副本，并使用它来代替原来的。

* * *

此外，值得指出的是，您的任何类实际上都不能像编写的那样使用——任何调用任何方法的尝试都会引发 a `TypeError`，因为它们缺少`self`参数。但是你用猴子补丁的方式`func3`，它会以完全相同的方式失败`func1`。（我上面勾勒的替代方案也是如此。）

* * *

最后，这里所有的类都是经典类而不是新式的，因为你忘记了`SuperClass`继承自`object`。如果你不能改变`SuperClass`，当然，这不是你的错——但你可能想通过让你的子类（或`Intermediate`）乘以继承`object`来修复它`SuperClass`。（如果您一直在关注：是的，这意味着您可以混入新式类。尽管在幕后您必须了解元类才能理解原因。）

# less - 在 less 中引用班级的高度

> ID：16181899
> 
> 赞同：0
> 
> 时间：2013-04-24T01:30:47.523
> 
> 标签：less

我今天早上刚进入LESS。写起来比纯 css 好得多，但是如果可以在类中引用类中的属性，它真的会解决我的一个大难题……

说我有

```
#El1
{
    width: 100%;
} 
```

我想做类似的事情

```
#El2
{
    position: absolute;
    width: 100%;
    top: #El1.height;
    bottom: 0;
} 
```

因此`#El1`可以随意调整自己的大小，并且`#El2`可以定位在其下方并填充整个剩余的视口。

无论我多么努力地用谷歌搜索，我都找不到任何似乎表明这是可能的东西。从我如何理解样式表的处理发生在加载时，我的直觉是这无法完成，因为在`El1`处理 css 规则时不知道高度。但是，如果有办法做到这一点，我想我会问......那么有什么办法可以做到这一点吗？

# regex - 正前瞻正则表达式

> ID：16181905
> 
> 赞同：7
> 
> 时间：2013-04-24T01:31:40.900
> 
> 标签：regex

我有以下正则表达式：

```
^(?=.{8}$).+ 
```

我理解这一点的方式是它将接受 8 个任何类型的字符，然后是 1 个或多个任何字符。我觉得我没有掌握*积极前瞻*的工作原理。因为正则表达式的两个部分都在寻找“。” 没有任何系列的角色适合这个吗？

我的问题是，积极的前瞻如何影响这个正则表达式，什么是匹配字符串的例子？

[在以下正则表达式工具](http://regexlib.com/RETester.aspx)中提供时，以下内容不匹配：

*   123456781
*   (12345678)1
*   (12345678)
*   (abcdefgh)a
*   (abcdefgh)
*   美国广播公司
*   123

编辑：删除了前两个数据条目，因为我显然没有正确使用正则表达式工具，因为它们现在正好匹配 8 个字符。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T01:37:27.290

`^(?=.{8}$).+`

将匹配字符串

`aaaaaaaa`

推理：

括号内的内容是先行内容，因为它以`?=`.

前瞻内的内容被解析 - 它不是字面解释的。

因此，前瞻仅允许正则表达式匹配 if`.{8}$`将匹配（在这种情况下，在字符串的开头）。所以字符串必须正好是八个字符，然后它必须结束，如`$`.

然后 .+ 将匹配这八个字符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T01:36:56.407

它试图匹配：

```
^               # start of line, but...
(?=.{8}$)       # only if it precedes exactly 8 characters and the end of line
.+              # this one matches those 8 characters 
```

并且根据您的输入，它也应该与这些匹配（[尝试使用此引擎](http://regexpal.com/)并检查换行符匹配）：

```
12345678
abcdefgh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T01:39:37.140

匹配 12345678 在 ruby​​ 中有效：

```
'12345678' =~ /^(?=.{8}$).+/ 
=> 0 
```

也许您的测试站点不支持正则表达式的前瞻性？

# javascript - 为什么我的 JavaScript onresize 会触发两次？

> ID：16181912
> 
> 赞同：0
> 
> 时间：2013-04-24T01:32:29.320
> 
> 标签：javascript

我在这里有一个小提琴：

[http://jsfiddle.net/fJMe9/](http://jsfiddle.net/fJMe9/)

```
window.onresize = function (e) {
    console.log("Page resized");
}; 
```

每次我调整窗口大小时，我都会在控制台中收到两个日志

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T01:34:04.903

这是一个众所周知的错误（可能与事件冒泡有关？我说众所周知，但那是其他人知道它，而不是我：P）。使用 a`setTimeout`检查最后一次调整窗口大小以避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:54:19.370

尝试：

```
window.onresize = function (e) {
    console.log(e);
}; 
```

每次拖动浏览器窗口时都会触发事件

取决于实现：可能 2 次，第一次告诉你窗口正在调整大小，第二次告诉你窗口完成调整大小。

# mysql - 试图将 MySQL 数据放入 d3 的嵌套 json 文件中？

> ID：16181917
> 
> 赞同：2
> 
> 时间：2013-04-24T01:32:42.033
> 
> 标签：mysql, json, treeview, d3.js, nested-queries

我正在尝试将 MySQL 数据库数据转换为 json 格式。我的文件需要采用嵌套父母和孩子的格式。（见代码片段）这是因为我正在尝试使用 d3 数据可视化（可折叠树布局），它需要以某种方式格式化 json 数据。下面我附上了我的 json 文件的片段。我在尝试编写嵌套的 sql 语句来执行此操作时遇到一些问题。我还附上了我的数据库的视觉效果，以查看我正在处理的内容。任何建议都会有很大帮助。谢谢！![在此处输入图像描述](https://i.stack.imgur.com/gNE22.jpg)

我想要得到的 json 格式是这样的：

```
{
  "name": "Projects",
  "children": [
   {
     "name":"category_name#1", "description":"category",
     "children": [
    {
            "name":"sub_category_name1",
            "description":"category description text here",
                    "children":[
                    {"name": "project1",
                     "description":"project 1 text goes here",
                                "children":[
                        {"name":"mike", "email":"xxx@mail.com"},
                        {"name":"dan", "email":"xxx@gmail.com"}
                        ]
                    },
                    {
                    "name": "project2",
                    "description":"project 2 text goes here",
                                "children":[
                        {"name":"steve", "email":"xxx@mail.com"},
                        {"name":"chris", "email":"xxx@gmail.com"}
                                ]                       
                    }
                    ]   
            },
            {
            "name": "sub_category_name2",
            "description":"sub category description text goes here..",
            "children": [
                {"name": "project3",
                "description":"project3 text goes here ",
                "children":[
                    {"name":"Alex", "email":"xxx@gmail.com"}                        
                ]                   
                }
            ]
            }

    ]
    },
    .
    . //more categories with children of subcategories and sub_cat children of projects
    .
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:14:38.267

我过去在本教程中取得了成功： [http ://www.d3noob.org/2013/02/using-mysql-database-as-source-of-data.html](http://www.d3noob.org/2013/02/using-mysql-database-as-source-of-data.html)

简而言之，您要做的是创建一个连接到 MySql、执行查询并将结果转换为 json 的 php 文件。然后，您将使用此文件代替 d3 代码中的数据源。

# sql-server - 与在执行 SQL 任务中编写 sql 查询相比，SSIS 中的 DataFlow 任务非常慢

> ID：16181921
> 
> 赞同：8
> 
> 时间：2013-04-24T01:32:44.387
> 
> 标签：sql-server, ssis, etl

我是 SSIS 新手，有两个问题

1.  我想将 1,25,000 行从一个表传输到同一个数据库中的另一个表。但是当我使用`Data Flow Task`时，它花费了太多时间。我尝试使用 an`ADO NET Destination`和 an，`OLE DB Destination`但性能无法接受。当我在其中编写等效查询时，`Execute SQL Task`它提供了可接受的性能。为什么会出现这样的性能差异。

    INSERT INTO table1 从 table2 中选择 *

2.  根据第一次观察，我改变了我的包裹。它完全由`Execute SQL Tasks`直接查询或存储过程组成。如果我可以仅`Execute SQL Task`使用 . 我已经看到它可靠，易于维护且相对较快。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-24T02:32:39.577

## 性能差异

有很多事情可能会导致“直接”数据流任务和等效的执行 SQL 任务的性能。

1.  网络延迟。您正在同一服务器和实例上从表 b 插入表 a。在执行 SQL 任务中，该工作将完全在同一台机器上执行。我可以在服务器 B 上运行一个包，该包从服务器 A 查询 125 万行，然后这些行将通过网络流式传输到服务器 B。然后，该数据将被流式传输**回**服务器 A 以进行相应的 INSERT 操作。如果你的网络很差，数据很宽——尤其是二进制类型，或者服务器之间的距离很远（服务器 A 在美国，服务器 B 在印度），性能就会很差
2.  内存不足。假设包在与目标/源数据库相同的服务器上执行，它仍然可能很慢，因为数据流任务是一个内存引擎。这意味着，将从源流向目标的所有数据都将进入内存。SSIS 可以获得的内存越多，运行速度就越快。但是，它将不得不与操作系统争夺内存分配以及 SQL Server 本身。即使 SSIS 是 SQL Server 集成服务，它也不会在与 SQL Server 数据库相同的内存空间中运行。如果你的服务器分配了 10GB 内存，而操作系统使用 2GB，而 SQL Server 声称有 8GB，那么 SSIS 运行的空间很小。它不能要求 SQL Server 放弃其部分内存，因此操作系统将不得不在数据流通过受限数据管道时进行分页。
3.  粗制滥造的目的地。根据您使用的 SSIS 版本，OLE DB 目标的默认访问模式是“表或视图”。这是一个很好的设置，可以尝试防止低级锁升级为表锁。但是，这会通过痛苦的行插入（发送 125 万个唯一插入语句）导致行。`Execute SQL Task`将其与s INSERT INTO的基于集合的方法进行对比。较新版本的 SSIS 将访问方法默认为目标的“快速”版本。这将更像基于集合的等效项，并产生更好的性能。
4.  OLE DB 命令转换。有一个[OLE DB 目标](http://msdn.microsoft.com/en-us/library/ms141237.aspx)，有些人将其与[OLE DB 命令转换](http://msdn.microsoft.com/en-us/library/ms141138.aspx)混淆。这是两个具有不同用途的非常不同的组件。前者是*目的地*并消耗所有数据。它可以非常快。后者**始终**是RBAR。它将对流经它的*每一行执行单例操作。*
5.  调试。在 BIDS/SSDT 中运行包存在开销。该包执行被包装在 DTS 调试主机中。这可能会导致包执行的“不显着”减慢。调试器对执行 SQL 任务无能为力——它运行或不运行。一个数据流，它可以检查、监视大量内存等，这会减少可用内存量（参见第 2 部分），并且由于它正在执行的各种检查而减慢它的速度。要获得更准确的比较，请始终从命令行 (dtexec.exe /file MyPackage.dtsx) 运行包或从 SQL Server 代理计划它。

## 包装设计

只是`Execute SQL Task`s 的 SSIS 包本质上没有任何问题。如果问题很容易通过运行查询来解决，那么我会完全放弃 SSIS 并编写适当的存储过程并使用 SQL 代理安排它并完成。

也许。即使对于像这样的“简单”案例，我仍然喜欢使用 SSIS 的原因是它可以确保一致的可交付成果。这听起来可能不多，但从维护的角度来看，很高兴知道*一切*与数据混淆的内容包含在这些源代码控制的 SSIS 包中。我不必记住或培训新人任务 AC 是“简单的”，因此它们是从 SQL 代理作业调用的存储过程。Tasks DJ，或者它是 K，甚至比这更简单，所以它只是代理作业中的“在线”查询来加载数据，然后我们为其余的东西准备了包。除了 Service Broker 和一些 Web 服务之外，它们也会更新数据库。我年纪越大，接触的地方越多，我就越能在一致的（即使是矫枉过正的）解决方案交付方法中找到价值。

性能并不是一切，但 SSIS 团队确实使用 SSIS 设置了 ETL 基准，因此它绝对有能力快速推送一些数据。

随着这个答案越来越长，我只是将其保留为 SSIS 的优势和直接 TSQL 上的数据流是本机的，开箱即用

*   日志记录
*   错误处理
*   配置
*   并行化

为了我的钱很难打败那些。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-13T05:35:51.613

如果您在参数映射选项卡中将 SSIS 变量作为参数传递并通过表达式将值分配给这些变量，那么您的执行 SQL 任务会在评估该表达式时消耗大量时间。使用表达式任务（单独）分配变量，而不是在变量选项卡中使用表达式。

# java - Facebook 黑莓 SDK 错误 500

> ID：16181928
> 
> 赞同：5
> 
> 时间：2013-04-24T01:34:06.143
> 
> 标签：java, facebook, blackberry

我正在尝试在 BlackBerry 中创建使用**facebook-bb-sdk-0.8.25**连接到 Facebook 的应用程序。我第一次使用它，它运行了几天。但是自从 5 天前，进入登录页面后，响应没有返回**access_token**或**auth_token**并且我得到了**Error 500**。

我试图在[这里](http://supportforums.blackberry.com/t5/Java-Development/Facebook-SDK-problems/td-p/730881)找到解决方案，但仍然没有解决我的问题。我不知道这个应用程序代码或 Facebook 服务有什么问题？有人遇到同样的问题或解决方案请在这里讨论。谢谢

登录页面后，显示以下错误 -

> 错误 500
> 服务器遇到内部错误，无法满足您的请求。
> 
> *   将问题网站通知网站管理员。
> 
> 再试一次

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T12:42:19.847

现在问题解决了。Facebook 解决了这个问题。您现在可以使用相同的 facebook jar 文件。它现在工作正常。

# python - 我正在用 pygame 编写一个塔防程序。我产生新浪潮的代码不起作用

> ID：16181932
> 
> 赞同：0
> 
> 时间：2013-04-24T01:34:39.783
> 
> 标签：python, pygame

这是我的程序中的一个例外代码。第一个块处理射击+敌人的碰撞，第二个处理地雷+敌人的碰撞，第三个实际产生新的波浪。目前，初始波大小会产生 10 个敌人，并且游戏循环不会在第一波之后产生新的敌人。

```
 # baddie and shot collision
        removed = False
        for a in baddies[:]:
            for b in shots[:]:
                if a.imgRect.colliderect(b.imgRect):
                    shots.remove(b)
                    a.toughness -= 1
                    if a.toughness < 1:
                        baddies.remove(a)
                        removed = True

                        print str(wavesize)

                        break

        # baddie and mine collision
        removed = False
        for a in baddies[:]:
            for b in mines[:]:
                if a.imgRect.colliderect(b.imgRect):
                    mines.remove(b)
                    a.toughness -= 1
                    if a.toughness < 1:
                        baddies.remove(a)
                        removed = True
                        break

        if removed:
            wavesize -= 1
            if wavesize < 1:
                loopcount += 1
                wavesize = 10+(loopcount*5)
                baddies = createNewWave(wavesize) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:39:51.090

每次运行循环并删除一个坏人时，您只会减少`wavesize`一，但您很可能一次删除多个坏人。此外，您在`removed`第一组循环之后重置变量，因此如果坏人被射击摧毁，您可能会错过他们。您应该做的是跟踪您删除了多少坏人，然后将波浪大小减少那么多。

```
removed = 0
for a in baddies[:]:
    for b in shots[:]:
        ...
        baddies.remove(a)
        removed += 1

for a in baddies[:]:
    for b in mines[:]:
        ...
        baddies.remove(a)
        removed += 1

wavesize -= removed
if wavesize < 1:
    loopcount += 1
    wavesize = 10+(loopcount*5)
    baddies = createNewWave(wavesize) 
```

# javascript - 在 html 中选择和显示音频和视频

> ID：16181936
> 
> 赞同：0
> 
> 时间：2013-04-24T01:35:37.367
> 
> 标签：javascript, html, html5-video, html5-audio

我正在编写一个程序，允许用户选择和显示图像、音频和视频我目前有图像部分工作。我已经按照 w3schools 上的所有示例进行操作，但我认为使用 java 脚本和 select 而不是像示例中那样说明特定文件，但对于此作业，我必须允许用户从硬盘驱动器中进行选择。 . 这是我迄今为止所拥有的重要部分。

```
<script>
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#blah')
                .attr('src', e.target.result)
                .width(150)
                .height(200);
        };

        reader.readAsDataURL(input.files[0]);
    }
}
</script> 
```

应用程序工作图像部分的 HTML

```
<div data-role="page" id="page2">
    <div data-role="header">
        <h1>Image</h1>
        <a href="#page" data-icon="gear" class="ui-btn-right">Back</a>
    </div>
    <div data-role="content">

        <input type='file' accept="image/*" onchange="readURL(this);" />
        <img id="blah" src="#" alt="your image" />

    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div> 
```

非工作音频部分

```
<input type='file' accept="audio/*" onchange="readURL(this);" /> 

<audio controls>
    <source id="blah" src="#" type="audio/ogg">
    <source id="blah" src="#" type="audio/mpeg">
    Your browser does not support the audio element.
</audio> 
```

非工作视频部分

```
<input type='file' accept="video/*" onchange="readURL(this);" />

<video width="320" height="240" controls autoplay>
    <source id="blah" src="#" type="video/ogg">
    <source id="blah" src="#" type="video/mp4">
    <source id="blah" src="#" type="video/webm">
    <source id="blah" src="#" type="video/">
    <object data="movie.mp4" width="320" height="240">
        <embed width="320" height="240" id="blah" src="#.swf">
    </object>
</video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T20:23:15.310

您违反了一条重要的 HTML 规则：ID 是唯一的，类是可重用的。HTML 的工作图像部分是唯一包含 1 ID #blah 的部分。 *参考：*[http ://webdesign.about.com/cs/css/qt/tipcssclassvsid.htm](http://webdesign.about.com/cs/css/qt/tipcssclassvsid.htm)

此外，如果这不是问题：我也尝试过 `<input type="file">`，但它不是一种稳定的获取文件的方式（稍后会）。为什么？

1.  输入检索的 URL 因浏览器而异。有些只会获取文件名（webkit），有些会获取父目录，有些可能会获取完整路径。
2.  完整的 FileSystem API 仅受最新版本的 Google Chrome 支持，并且截至目前，还没有提供跨浏览器解决方案。*参考：*[http ://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

最后一个参考，如果您想知道文件输入的确切规格： *参考：*[http://www.w3.org/TR/html5/forms.html#file-upload-state-(type=file)](http://www.w3.org/TR/html5/forms.html#file-upload-state-(type=file))

# asp.net - 在 asp.net mvc 中使用 Web 服务时找不到引用合同“服务”错误的默认端点元素

> ID：16181939
> 
> 赞同：0
> 
> 时间：2013-04-24T01:35:57.697
> 
> 标签：asp.net, asp.net-mvc

在 ASP.net MVC 中调用 Web 服务时出现问题，我执行以下操作

通过将服务引用添加到解决方案来添加 Web 服务，并且我也将 service.cs 文件包含到解决方案中，但是当我尝试在主控制器中创建对象时，出现以下错误

在 ServiceModel 客户端配置部分中找不到引用合同“服务”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此协定匹配的端点元素。

谁能帮帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:16:22.730

这里发生了几件事。首先，您使用 SVCUTIL 为非 WCF 服务生成代理和配置设置 - .asmx 是旧版。我能够生成代理和配置设置，但要克服您遇到的错误，您需要调用`WeatherHttpClient`.

我不是 100% 确定，但这是我根据我观察到的想法。

原因是配置文件中定义了两个端点（一个用于 SOAP 1.1，一个用于 SOAP 1.2），并且由于两个端点都已命名，因此没有可供选择的默认端点。

当我使用时，`var x = new WeatherHttpClient(new BasicHttpBinding("WeatherSoap"), new EndpointAddress("http://wsf.cdyne.com/WeatherWS/Weather.asmx"));`我能够很好地创建代理。

但是，当我打电话时，`GetCityForecastByZip`我收到以下错误：

`Server did not recognize the value of HTTP Header SOAPAction: http://ws.cdyne.com/WeatherWS/WeatherHttpGet/GetCityForecastByZIPRequest.`

因此，我使用 WSDL.exe 以 .ASMX 样式生成代理。我将它包含在我的项目中，并且以下代码返回了一个结果（在包含对`System.Web.Services`- 我正在使用控制台应用程序的引用之后）：

```
var x = new Weather();

ForecastReturn result = x.GetCityForecastByZip("91504");` 
```

为了简单起见，我建议使用 WSDL.exe 为您的服务生成代理，因为它似乎更简单。

我还要补充一点，我所做的 MVC 很少，但我认为这不是 MVC 问题。我希望这可以帮助你。

# html - HTML div 需要位于所有其他控件之上

> ID：16181944
> 
> 赞同：0
> 
> 时间：2013-04-24T01:36:21.937
> 
> 标签：html, css, opacity

父屏幕上的一些控件正在通过 div 流血（见图）。我需要这个 div 位于所有其他控件之上。现在单选按钮列表和选项卡以某种方式位于顶部。

![在此处输入图像描述](https://i.stack.imgur.com/uXCr0.png)

这是对话框的声明：

```
<div id="divSaveAnalysis" style="display: block; opacity: 100; width: 350px; font-size: 40px; position: absolute; top: 35px; left: 100px; background-color: rgb(247, 219, 111); padding: 15px; border: 1px solid #000;">
    <div id="saving" style="font-size:medium; font-weight:bold;">
        <span id="savingSpan" style="font-size: xx-large">Saving Analysis...</span>
        <img src="css/images/Indicators/Activity/GearGreen_66x66.gif" style="float: right; height: 80px;"
            title="Saving FLSA Analysis" alt="Saving..." />
        <br />
        <br />
        <div><span id="savingReport" style="font-size: small;"></span></div>
        <div><span id="savingInputs" style="font-size: small;"></span></div>
        <div><span id="savingResults" style="font-size: small;"></span></div>
        <div><span id="savingComplete" style="font-size: small;"></span></div>
    </div>
</div> 
```

div 的计算样式为：

```
background-color: rgb(247, 219, 111);
border-bottom-color: rgb(0, 0, 0);
border-bottom-style: solid;
border-bottom-width: 0.9090908765792847px;
border-left-color: rgb(0, 0, 0);
border-left-style: solid;
border-left-width: 0.9090908765792847px;
border-right-color: rgb(0, 0, 0);
border-right-style: solid;
border-right-width: 0.9090908765792847px;
border-top-color: rgb(0, 0, 0);
border-top-style: solid;
border-top-width: 0.9090908765792847px;
color: rgb(51, 51, 51);
display: none;
font-family: Tahoma, Verdana, Arial, Helvetica, sans-serif;
font-size: 40px;
height: auto;
left: 100px;
line-height: 17.99715805053711px;
opacity: 1;
padding-bottom: 15px;
padding-left: 15px;
padding-right: 15px;
padding-top: 15px;
position: absolute;
text-align: left;
top: 35px;
visibility: visible;
width: 350px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:42:10.870

您可以使用 z-index 更改接触堆叠的方式。默认情况下，它基于内容随页面加载的顺序。

默认情况下 z-index 为“自动”。尝试将其设置为 100 之类的整数。

```
z-index:100;
position:absolute; 
```

当您使用 z-index 时，您还必须更改内容的位置值。

您可以在此处阅读有关 z-index 的更多信息[http://www.w3.org/TR/CSS2/visuren.html#z-index](http://www.w3.org/TR/CSS2/visuren.html#z-index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:44:06.457

设置 z-index 将控制元素的堆叠顺序。

```
#divSaveAnalysis {
  z-index:10000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:26:32.497

你需要添加的属性 `z-index:99999;`

并确保添加

```
position: relative; 
```

为 z-index 工作。

# android - 在谷歌地图中获取标记的纬度和经度

> ID：16181945
> 
> 赞同：11
> 
> 时间：2013-04-24T01:36:27.967
> 
> 标签：android, google-maps, google-maps-markers

我正在使用以下代码创建地图并为其附加标记。我还添加了一个标记侦听器，我需要在拖动后获取标记位置的经度和纬度。

它所做的是在拖动后返回我当前的位置而不是标记的位置。这部分有什么帮助吗？！

```
package com.example.mysample;

import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMarkerDragListener;
import com.google.android.gms.maps.MapView;
import com.google.android.gms.maps.Projection;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptor;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;
import com.google.android.maps.GeoPoint;

import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.view.MotionEvent;
import android.widget.Toast;
import android.graphics.*;

public class MainActivity extends FragmentActivity implements LocationListener {

    GoogleMap map;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        GooglePlayServicesUtil
                .isGooglePlayServicesAvailable(getApplicationContext());
        map = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();
        map.setMyLocationEnabled(true);
        map.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        map.addMarker(new MarkerOptions()
                .position(new LatLng(0, 0))
                .title("Marker")
                .draggable(true)
                .snippet("Hello")
                .icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_YELLOW)));

        map.setOnMarkerDragListener(new OnMarkerDragListener() {

            @Override
            public void onMarkerDragStart(Marker marker) {
                // TODO Auto-generated method stub
                // Here your code
                Toast.makeText(MainActivity.this, "Dragging Start",
                        Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onMarkerDragEnd(Marker marker) {
                // TODO Auto-generated method stub
                Toast.makeText(
                        MainActivity.this,
                        "Lat " + map.getMyLocation().getLatitude() + " "
                                + "Long " + map.getMyLocation().getLongitude(),
                        Toast.LENGTH_LONG).show();
                System.out.println("yalla b2a "
                        + map.getMyLocation().getLatitude());
            }

            @Override
            public void onMarkerDrag(Marker marker) {
                // TODO Auto-generated method stub
                // Toast.makeText(MainActivity.this, "Dragging",
                // Toast.LENGTH_SHORT).show();
                System.out.println("Draagging");
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public boolean onMarkerClick(final Marker marker) {

        if (marker.equals(map)) {
            // handle click here
            // map.getMyLocation();
            System.out.println("Clicked");
            double lat = map.getMyLocation().getLatitude();
            System.out.println("Lat" + lat);
            Toast.makeText(MainActivity.this,
                    "Current location " + map.getMyLocation().getLatitude(),
                    Toast.LENGTH_SHORT).show();
        }
        return true;
    }

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-24T02:48:55.990

看看你的代码中的这个函数。

```
 @Override
    public void onMarkerDragEnd(Marker marker) {
        // TODO Auto-generated method stub
        Toast.makeText(
                MainActivity.this,
                "Lat " + map.getMyLocation().getLatitude() + " "
                        + "Long " + map.getMyLocation().getLongitude(),
                Toast.LENGTH_LONG).show();
        System.out.println("yalla b2a "
                + map.getMyLocation().getLatitude());
    } 
```

在这里，您试图在地图上获取当前位置，这是错误的，您应该获得拖动的标记的位置。您在这里已经有了“标记”对象。使用它来获取此拖动标记位置的位置。

```
LatLng position = marker.getPosition(); //
Toast.makeText(
                MainActivity.this,
                "Lat " + position.latitude + " "
                        + "Long " + position.longitude,
                Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-18T18:36:25.660

我想这很简单，如果你想要*长按的*经纬坐标...

首先，您必须`GoogleMap.setOnMapLongClickListener(this);` 添加到包含类的签名中：`implements OnMapLongClickListener`

这是代码：

```
@Override    
public void onMapLongClick(LatLng point) { 
    Toast.makeText(MainActivity.this, point.latitude+" "+point.longitude, Toast.LENGTH_SHORT).show();

} 
```

# ssis - SSIS“数据流任务”平面文件目标中没有记录

> ID：16181946
> 
> 赞同：5
> 
> 时间：2013-04-24T01:36:31.453
> 
> 标签：ssis

请原谅我最初的帖子是一个问题而不是一个解决方案。

我有两个基本上做同样事情的 SSIS 包。两者的最后一步是查询数据库并尝试将结果写入平面文件的“数据流任务”。其中一个包正确构建了平面文件，另一个包构建了文件，但没有用任何记录填充它。运行 SQL Server 2008 R2。

这是在大学环境中，涉及在两个系统之间传输学位代码和人口统计数据。degree_code 包正在运行，但人口统计数据却没有。两个“数据流任务”都包含一个链接到平面文件目标（制表符分隔的文本）的 OLE DB 源。预览 OLE DB 源时，这两个包都显示正确的数据集。

在平面文件目标中，两个包中的映射都是正确的。但是，在预览数据时，学位详细信息显示正确，但人口统计预览中没有记录。在查看连接管理器时也是如此。并且当包运行时，degree_codes 文件是正确的，而人口统计文件只包含一个标题。OLE DB Source 和 Flat File Destination 之间的链接似乎有问题

两个包都运行时只发出关于共享全局内存影响性能的警告。我已经删除并重建了不起作用的数据流任务和连接管理器，但没有解决问题。在这一点上，我不知道该往哪个方向发展，也不知道如何诊断问题。有没有人遇到过类似的情况，或者你有任何建议如何追赶它。我将不胜感激任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T09:38:32.063

尝试将数据导出到数据库中的 tmp 表，如果数据保存在那里，则问题出在文件连接上，如果不是，则需要重写查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-12T03:50:49.430

验证您在表上执行的查询列是否匹配并且数据类型与输出中的预期一致，尝试将所有内容最初都作为字符串类型并检查它是否有效，然后在成功执行后应用正确的数据类型您可以根据需要修改数据类型

# ruby - 在 Ruby 模块中定义公共方法？

> ID：16181947
> 
> 赞同：6
> 
> 时间：2013-04-24T01:36:35.043
> 
> 标签：ruby

我一定在这里犯了一个 n00b 错误。我编写了以下 Ruby 代码：

```
module Foo
   def bar(number)
      return number.to_s()
   end
end
puts Foo.bar(1) 
```

test.rb:6:in `<main>': undefined method`bar' for Foo:Module (NoMethodError)

我希望在名为 Foo.bar 的模块上定义一个方法。但是，当我尝试运行代码时，出现未定义的方法错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T01:41:30.087

你可以这样做：

```
module Foo
   def self.bar(number)
      number.to_s
   end
end
puts Foo.bar(1) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T03:06:47.043

Ruby 中的每个模块都可以混合在一个对象中。一旦一个类**是一个对象**，你就可以在一个类中使用*extend*这个词来混合方法：

```
module Foo
  def bar
    'bar'
  end
end

class MyInstanceMethods
   include Foo
end

class MyClassMethods
   extend Foo
end

## Usage:
MyInstanceMethods.new.bar
=> "bar"

MyClassMethods.bar
=> "bar" 
```

如果您希望直接从 Foo 模块调用 bar 方法，您可以按照@xdazz 所写的相同方式进行操作，但是由于*扩展*字混合为一个类：

```
MyInstanceMethods.class
=> Class

MyClassMethods.class
=> Class

Module.class
=> Class # Hey, module is also a class!!!!! 
```

诀窍：

```
module Foo
  extend self # self of Foo is the Module!

  def bar
    # .....
  end
end 
```

现在您可以看到**Foo.bar**返回预期结果：P

# javascript - 我当前脚本的巧妙解决方法？

> ID：16181955
> 
> 赞同：2
> 
> 时间：2013-04-24T01:37:28.820
> 
> 标签：javascript, jquery, html, css

我目前正在使用 JavaScript 来允许用户在一个页面上观看多个视频。页面顶部有一个大播放器，其下方是更多视频的较小缩略图。

从理论上讲，它工作正常。但是，有一个主要问题：所有视频在页面加载的同时加载。

请参阅[此](http://spuxystudios.com/mvibo/30day_new3/)页面以供参考。我已将 JavaScript 警报分配给每个单独的视频以举例说明问题（视频 1、视频 2 等）。

是否有一个简单的解决方法，无需重写整个页面，让视频**在点击**时加载，而不是在页面加载时加载？到目前为止，代码如下所示：

调用视频的 Javascript：

```
function playVideo(cap, file, streamer, alertmsg) {
    var so = new SWFObject('player/player-licensed_5_2.swf', 'ply1', '586', '330', '9');
    so.addParam('displaywidth', '586');
    so.addParam('displayheight', '330');
    so.addParam('allowfullscreen', 'true');
    so.addParam('allowscriptaccess', 'always');
    so.addVariable('skin', 'player/skins/glow.zip');
    so.addVariable('controlbar', 'over');
    so.addVariable('plugins', 'captions-1');
    so.addVariable('captions.file', cap);
    so.addVariable('dock', 'true');
    so.addVariable('image', 'landing_img/video.jpg');
    so.addVariable('file', file);
    so.addVariable('streamer', streamer);
    so.addVariable('autostart', 'false');
    so.write('player1');
    window.alert(alertmsg);
} 
```

视频的缩略图：

```
<div class="mini_player1"> <a href="#" class="vidpic" title="">
    <!-- thumbnail-->
    <img src="images/1_panda.jpg" alt="Video 1" class="vidpic"  />
    <span class="play-button"><img src="images/yt.png"  alt="Play"></span>
    </a>
</div>
<div class="content_mini_player1 cmp">
    <script>
        playVideo('<caption file>', '<videofile>', '<streamer>', 'video1');
    </script>
</div> 
```

`bigplayer`用新选择的视频“替换”内容的脚本：

```
jQuery(function ($) {
    $(".mini_player1, .mini_player2, .mini_player3, .mini_player4, .mini_player5, .mini_player6, .mini_player7, .mini_player8, .mini_player9, .mini_player10, .mini_player11, .mini_player12, .mini_player13, .mini_player14, .mini_player15, .mini_player16, .mini_player17, .mini_player18, .mini_player19, .mini_player20").click(function () {
        var player_content_id = "content_" + $(this).attr("class");
        var player_content = $("." + player_content_id).html();
        $(".big_player").html('');
        $(".big_player").html(player_content);
    });
}); 
```

有什么建议么？也许巩固`playVideo`和 jQuery 功能？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:33:31.750

首先，在缩略图代码中，有一个随机的结束`</a>`标签。除非有您没有发布的代码，否则我建议将其删除。

其次，您的 jQuery 可以进一步简化。目前，您正在使用以下选择器：

```
$(".mini_player1, .mini_player2, .mini_player3, .mini_player4, .mini_player5, .mini_player6, .mini_player7, .mini_player8, .mini_player9, .mini_player10, .mini_player11, .mini_player12, .mini_player13, .mini_player14, .mini_player15, .mini_player16, .mini_player17, .mini_player18, .mini_player19, .mini_player20") 
```

哇！那就是……哇。

为玩家分配一个他们可以全面关联的类，按该类选择，然后运行该`each()`方法，即：

```
$(".mini-player").each(function() {
    var player_content_id = "content_" + $(this).attr("class");
    var player_content = $("." + player_content_id).html();
    $(".big_player").html('');
    $(".big_player").html(player_content);
}); 
```

最后，当您像正在执行的那样在脚本标签中调用函数时：

```
<script>
    playVideo('<caption file>', '<videofile>', '<streamer>', 'video1');
</script> 
```

这将运行该`playVideo()`功能。合并`playVideo()`和 jQuery 代码将是您最好的选择，即（使用上面相同的构造）：

```
$(".mini-player").each(function() {
    var player_content_id = "content_" + $(this).attr("class");
    var player_content = $("." + player_content_id).html();
    $(".big_player").html('');
    $(".big_player").html(player_content);
    //Add event handler
    $(this).on('click',function() {
        playVideo('<caption file>', '<videofile>', '<streamer>', 'video1');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:55:02.020

您的内联 JavaScript 函数 playVideo 将在页面加载时被调用。您将希望从那里删除它并执行以下操作：

```
<div onclick="playVideo()" class = "mini_player1"> 
```

# android - 想听来电和去电

> ID：16181956
> 
> 赞同：0
> 
> 时间：2013-04-24T01:37:31.963
> 
> 标签：android, android-activity, android-service

我想收听来电和去电，这个过程应该作为服务运行。我做了一个活动，可以很好地识别来电和去电，但我需要将其更改为服务，以便它可以运行到后台。我可以不知道如何改变它。我的活动如下：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TelephonyManager mTelephonyMgr = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    mTelephonyMgr.listen(new TeleListener(), PhoneStateListener.LISTEN_CALL_STATE);
}

class TeleListener extends PhoneStateListener
{
    public void onCallStateChanged(int state, String incomingNumber)
    {
        super.onCallStateChanged(state, incomingNumber);
        switch (state)
        {
        case TelephonyManager.CALL_STATE_IDLE:
            //CALL_STATE_IDLE;
            Toast.makeText(getApplicationContext(), "CALL_STATE_IDLE", 10000).show();
            break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
            //CALL_STATE_OFFHOOK;
            Toast.makeText(getApplicationContext(), "CALL_STATE_OFFHOOK", 10000).show();
            break;
        case TelephonyManager.CALL_STATE_RINGING:
            //CALL_STATE_RINGING
            Toast.makeText(getApplicationContext(), "CALL_STATE_RINGING", 10000).show();
            break;
        default:
            break;
        }
    }

  }
} 
```

**我的第二个问题**可以在我的手机中安装一项没有活动的服务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T01:56:17.170

只是`extends` `Service`代替`Activity`. 您确实需要一个活动来启动服务。您可以通过注册 a 在启动时启动服务`ACTION_BOOT_COMPLETED`并`broadcast receiver`启动您的服务。但是，从`ICS`上往下，您需要一个活动来启动您的服务至少一次。之后，将不再需要该活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T01:57:47.373

您需要传递启动服务的意图。您可以创建一个仅启动您的服务的活动，并且该活动没有视图。使您的类扩展`Service`而不是`Activity`，并创建另一个活动来实例化您的服务并执行`startService(yourserviceInstance);`

# data-structures - 缺点是什么？

> ID：16181958
> 
> 赞同：4
> 
> 时间：2013-04-24T01:37:51.673
> 
> 标签：data-structures, functional-programming

许多*函数*式编程语言支持并推荐数据构造函数`Cons`（对于像[Haskell](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)和[Scala](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)`(1, (2, (3)))`这样的列表） 。

但它的优点是什么？这样的列表既不能随机访问，也不能附加到 in 中`O(1)`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T01:46:16.733

`Cons`（“构造”的简写）不是数据结构，它是创建*cons-cell的**操作*的名称。通过将几个单元链接在一起，可以构建一个数据结构，特别是一个链表。其余的讨论假设一个链表是用操作创建的。*`cons`*

 *尽管可以在头部追加 O(1)，但通过索引随机访问元素是一项代价高昂的操作，这需要在被访问的元素之前遍历所有元素。

链表的优点？它是一种*功能性*数据结构，在修改的情况下创建或重新创建成本低；它允许在多个列表之间共享节点，并且可以轻松进行垃圾收集。它非常灵活，通过正确的抽象可以表示其他更复杂的数据结构，例如堆栈、队列、树、图。并且有很多很多专门为处理列表而编写的程序——例如`map`、`filter`、`fold`等，它们使处理列表变得很有趣。最后，列表是*递归的*数据结构和递归（特别是尾递归）是解决函数式编程语言问题的首选方式；所以在这些语言中，将递归数据结构作为主要数据结构是很自然的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:16:25.857

首先，让我们区分“cons”作为通常调用的 ML 风格的列表数据构造函数`::`的昵称和这个昵称的来源，原始 Lisp 风格的`cons`函数。

在 Lisps 中，cons 单元格是一种通用数据结构，不限于同类元素类型的列表。ML 风格语言中的等价物将是嵌套对或 2 元组，空列表由通常编写的“单元”类型表示`()`。Óscar López 很好地概述了 Lisp 的实用性`cons`，所以我将把它留在那里。

在大多数 ML 风格的语言中，不可变 cons 列表的优点与它们在 Lisps 中的列表使用并没有太大区别，牺牲了动态类型的灵活性来保证静态类型和 ML 风格的模式匹配的语法。

然而，在 Haskell 中，由于惰性求值，情况就大不相同了。构造函数是惰性的，对它们进行模式匹配是强制求值的少数方法之一，因此与严格求值的语言相比，通常情况下应该*避免*尾递归。相反，通过将递归调用放在列表的尾部，可以仅在需要时计算每个递归调用。如果使用适当的惰性函数（如`map`or ）处理延迟生成的列表`foldr`，则可以在常量内存中构造和消耗一个大列表，并且尾部以与头部被丢弃以供 GC 清理的速度相同的速率强制执行。

Haskell 中的一个常见观点是惰性 cons 列表与其说是一种数据结构，不如说是一种*控制*结构——一个与其他此类循环有效组合的具体循环。

也就是说，在很多情况下 cons 列表是*不合适*的——例如当需要重复随机访问时——在这些情况下当然不建议使用列表。*

# mysql - 如果表有重复值，是否可以在 MySQL 中创建唯一索引？

> ID：16181964
> 
> 赞同：6
> 
> 时间：2013-04-24T01:38:37.653
> 
> 标签：mysql, database

对于现有表，是否允许在可能具有重复值的列上创建唯一值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T01:45:38.760

不，这是不允许的。

下面的 SQL：

```
ALTER TABLE `table`
ADD UNIQUE (`column`) 
```

会产生以下错误：

> #1062 - 键“列”的重复条目“数据”

您可以使用以下方法识别重复项：

```
SELECT * FROM `table`
GROUP BY `column`
HAVING COUNT(`column`) > 1 
```

删除所有重复项后，您可以添加`UNIQUE`约束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-28T22:57:45.963

实际上这是可能的，至少在 MySQL 5.1+ 中是这样。您可以使用：

```
ALTER IGNORE TABLE `table` ADD UNIQUE INDEX (`column`); 
```

如果你的表是 InnoDB，你需要先运行这个：

```
set session old_alter_table=1 
```

参考[http://www.mikeperham.com/2012/03/02/deleting-duplicate-rows-in-mysql/](http://www.mikeperham.com/2012/03/02/deleting-duplicate-rows-in-mysql/)

编辑：从 MySQL 5.7.4 开始，ALTER TABLE 的 IGNORE 子句被删除，它的使用会产生错误。感谢@EdwardvanKuik 在评论中指出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T01:45:28.383

这不可能：

```
Mysql2::Error: Duplicate entry 'foo' for key 'index_clubs_on_url': CREATE UNIQUE INDEX `index_clubs_on_url` ON `clubs` (`url`) 
```

# sed - 如何用 sed 替换部分行

> ID：16181965
> 
> 赞同：2
> 
> 时间：2013-04-24T01:38:39.340
> 
> 标签：sed, grep

我想替换一行中*不匹配*的部分。例如，我有来自 grep 的一行：

`./XYZ/SportsDataManager.m:static NSString* REDEEM_SPORT_CREDIT_URL = @"http://example.com/clients/XYZ/services/sports/prod/prod_sportRedeemUserCredit.php";`

从我读过的内容来看，最好通过 sed 进行管道传输。我想删除除 url 之外的所有内容。怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:41:53.383

例如，我会将 egrep 与 -o 一起使用

```
 echo "./XYZ/SportsDataManager.m:static NSString* REDEEM_SPORT_CREDIT_URL = @\"http://example.com/clients/XYZ/services/sports/prod/prod_sportRedeemUserCredit.php\";" | egrep 'http://.*?\.php' -o
http://example.com/clients/XYZ/services/sports/prod/prod_sportRedeemUserCredit.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:48:07.500

使用 sed，如果你总是有双引号内的 URL：

```
sed -n 's/[^"]*"\([^"]*\).*/\1/p' input 
```

# javascript - 可以在不调用“测试”的情况下获得 b 吗？

> ID：16181966
> 
> 赞同：1
> 
> 时间：2013-04-24T01:38:46.897
> 
> 标签：javascript, node.js

我目前正在考虑在 node.js 中实现一个包含其他应用程序的虚拟机。为此，我将覆盖一些基础知识，但有一点我不确定。

```
var A = (function() {
    var b = 1;

    var A = function() {};
    A.prototype.test = function() { // Can't touch this
        return b;
    };
    A.prototype.foo = function(callback) {
        callback();
    };
    return A;
})();

// Objective: Get b without touching `test` in any way 
```

这有可能吗？通过注入原型或使用 call()、apply()、bind() 或类似方法？还有什么反映吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:48:05.197

不使用`test`? 使用不同的`function`：

```
var A = (function() {
    var b = 1;

    // ...    

    A.prototype.foo = function () {
        return b;
    };
    return A;
})();

console.log(new A().foo()); 
```

否则，没有。该片段是一个[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)，并且*只能通过在同一范围内定义的函数访问局部变量*是它们的工作方式。

# ruby - 运行 Chef 时，RubyGems 抛出系统堆栈错误

> ID：16181969
> 
> 赞同：2
> 
> 时间：2013-04-24T01:39:30.613
> 
> 标签：ruby, rubygems, bundler, chef-infra

我正在运行 Ruby 1.9.3p392，并且安装了最新的 chef gem (11.4.2)。当我尝试运行任何厨师命令行实用程序时，我收到以下错误：

`bin/ruby_noexec_wrapper:14: stack level too deep (SystemStackError)`

实际上，运行以下命令也会导致抛出类似的错误：

```
require 'rubygems'
gem 'chef' # or gem 'chef', '11.4.2' 
```

再深入一点，我发现问题似乎来自 lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb：

`lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb:24: stack level too deep (SystemStackError)`

这很奇怪，因为该行是定义代表各种需求操作的 lambda 哈希的块的一部分（即，版本 =，版本 1 > = 版本 2 等）。

```
class Gem::Requirement
  OPS = { #:nodoc:
    "="  =>  lambda { |v, r| v == r },
    "!=" =>  lambda { |v, r| v != r },
    ">"  =>  lambda { |v, r| v >  r },
    "<"  =>  lambda { |v, r| v <  r },
    ">=" =>  lambda { |v, r| v >= r }, # <-- line 24
    "<=" =>  lambda { |v, r| v <= r },
    "~>" =>  lambda { |v, r| v >= r && v.release < r.bump }
  }
  #...
end 
```

向下滚动文件，我看到唯一`OPS[">="]`可以调用的地方是第 198 行：

```
 def satisfied_by? version
    raise ArgumentError, "Need a Gem::Version: #{version.inspect}" unless
      Gem::Version === version
    # #28965: syck has a bug with unquoted '=' YAML.loading as YAML::DefaultKey
    requirements.all? { |op, rv| (OPS[op] || OPS["="]).call version, rv } # <-- line 198
  end 
```

我注意到在运行时`requirements.all?`，要求设置为`[[">=", #<Gem::Version "0">]]`. 好像在评价`<Gem::Version "11.4.2"> >= <Gem::Version "0">`。

我整天都在做这件事，但我还没有深入了解它。谁能帮我理解为什么 RubyGems 会抛出这个错误？

谢谢。

**编辑**：厨师似乎在 1.8.7 上运行良好。会不会是 1.9.3 的问题？

# html - 使 iframe 默认图片与空白 iframe 大小相同

> ID：16181971
> 
> 赞同：0
> 
> 时间：2013-04-24T01:39:42.967
> 
> 标签：html, css, iframe, image

我不确定这是否可行，但我将 iframe 设置为相对。我的问题是如何将默认图像设置为自动调整为 iframe 的大小？编码...

```
<iframe name="iframe1"src="../Pictures/coolcenturylink.jpg" height="%"width="%"/></iframe>

iframe
{
position:relative;
float:right;
height:80%;
width:84.5%;
top:%;
background-color:;
} 
```

下面的编辑点...

```
<img src="coolcenturylink.jpg"/>

.coolcenturylink.jpg
{
    max-width: 100%;
}

<iframe name="iframe1"src="../Pictures/coolcenturylink.html"></iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:53:52.837

**iframe 包含与您网站不同的内容。您不能将 css 传递到 iframe**中，因此无法定位您从该端加载的图像。

您可以在从中加载图像的页面上设置页面中的图像样式。如果您只使用图像创建第二个 html 页面并将 css 应用到它那里，它将与它一起加载。

**工作示例** [http://jsfiddle.net/KArXd/](http://jsfiddle.net/KArXd/)

**在 iframe 中加载的图像页面：http:** [//jsfiddle.net/NsJyR/](http://jsfiddle.net/NsJyR/)

您仍然遇到高度问题。

我不确定为什么要使用 iframe 加载图像，但是如果将其更改为 img 标签，则可以应用最大宽度。

```
.your-image {
    max-width: 100%;
} 
```

# php - 如果出现错误消息，如何禁用特定按钮？

> ID：16181973
> 
> 赞同：0
> 
> 时间：2013-04-24T01:39:54.973
> 
> 标签：php, javascript, jquery, ajax, user-interface

![在此处输入图像描述](https://i.stack.imgur.com/WtAM6.png)

我这里有一个创建帐户表单，在我的**用户 ID**字段旁边带有**抱歉，用户 ID 已经存在！**是由 AJAX 生成的错误消息，如果他输入的用户 id 明显存在，则通知用户。**这里的Username**字段也与**User ID**具有相同的功能。我的问题是，如果显示的错误消息是**对不起，用户 ID/用户名已经存在，**我该如何**禁用我的创建按钮**？. 顺便说一句，消息更改为**用户 ID/用户名，**否则可用。

 ******这是我的 Jquery 代码**

```
 $(document).ready(function()
   {
     $('#create_btn').hover(function()
     {
       var id = $('#labeler').val();
       var user = $('#labeler2').val();

    if((id.indexOf('available') >= 0) && user.indexOf('available') >= 0)
    {
        $('#create_btn').removeProp('disabled');
    }
    else
    {
        $('#create_btn').prop('disabled', true);
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:00:49.897

当您使用 jQuery 时，您可以这样做：

```
$("#buttonId").prop("disabled",true) 
```

[更多讨论在这里](https://stackoverflow.com/questions/577548/how-can-i-disable-a-button-in-a-jquery-dialog-from-a-function "在这里查看更多")

我怀疑`labeler`/`labeler2`是`span`/ `div`。在这种情况下，您应该使用`text()`，而不是`val()`。将这些行更改为：

```
var id = $('#labeler').text();//user id notification AJAX
var user = $('#labeler2').text();//username notification AJAX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:02:34.353

我最终这样做了，因为我上面使用的代码能够禁用创建按钮，但无法再次启用它，因为 .hover() 无法读取禁用的按钮。感谢您的所有帮助！

```
$(document).ready(function()
{
    $(':text').blur(function()
    {
        var id = $('#labeler').val();
        var user = $('#labeler2').val();

        if((id.indexOf('available') >= 0) && user.indexOf('available') >= 0)
            $('#create_btn').removeProp('disabled');
        else
            $('#create_btn').prop('disabled', true);
    });
}); 
```****

# wpf - 无法清除 WPF ListBox.SelectedItems 集合

> ID：16181974
> 
> 赞同：5
> 
> 时间：2013-04-24T01:40:13.843
> 
> 标签：wpf, listbox, unselect

我似乎无法清除数据绑定 WPF ListBox 的 SelectedItems 集合。我尝试调用 ListBox.SelectedItems.Clear()，尝试将 SelectedIndex 设置为 -1，将 SelectedItem 设置为 null 并调用 ListBox.UnselectAll()。在调试时，似乎要么没有分配任务，要么正在重置 SelectedItems 集合，但我不确定是什么。我在 SelectionChanged 回调中放置了一个断点，它永远不会被意外击中，但 SelectedItems.Count 成员始终至少为 1（有时大于 1，因为此 ListBox 的选择模式是 MultiExtended）。

有没有人见过这个并且知道我做错了什么？这个问题似乎与这个问题完全相同： [WPF - 如何从 ListView 中清除选择？](https://stackoverflow.com/questions/5098213/wpf-how-to-clear-selection-from-listview)

除了在那篇文章中，Sonny Boy 使用的是 ListView，而我使用的是 ListBox。无论如何，投票的答案是调用 ListView.UnselectAll() 这在我的情况下不起作用。

我觉得我必须做一些非常明显错误的事情，因为清除选择应该非常简单。

注意：为了清楚起见，我不想从 ListBox 中删除选择，我只想不选择任何内容。

谢谢！

```
 <ListBox Background="{StaticResource ResourceKey=DarkGray}" Name="lbx_subimageThumbnails" Margin="6,6,6,0" ItemsSource="{Binding ElementName=lbx_thumbnails, Path=SelectedItem.Swatches}" Style="{StaticResource WPTemplate}" SelectionMode="Extended" Height="{Binding ElementName=sld_swatchRows, Path=Value}" VerticalAlignment="Top" SelectionChanged="lbx_subimageThumbnails_SelectionChanged" DataContext="{Binding}">
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel HorizontalAlignment="Stretch" />
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ListBoxItem}">
                                    <Setter Property="Visibility" Value="{Binding Path=Vis}" />
                                </Style>
                            </ListBox.ItemContainerStyle>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid Width="270" Height="270" Margin="5,5,5,5" Tag="{Binding}" Name="lbx_swatchThumbnail" Background="{StaticResource ResourceKey=LightGray}" PreviewMouseLeftButtonDown="lbx_swatchThumbnail_PreviewMouseLeftButtonDown" PreviewMouseMove="lbx_swatchThumbnail_PreviewMouseMove">
                                        <Grid.LayoutTransform>
                                            <ScaleTransform CenterX="0" CenterY="0" ScaleX="0.50" ScaleY="0.50" />
                                        </Grid.LayoutTransform>
                                        <Grid.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem Header="Sync selected" Click="btn_syncSwatch_Click" />
                                                <MenuItem Header="Re-export selected" Click="btn_exportSelected_Click"/>
                                                <MenuItem Header="Set as default thumbnail" Click="btn_setThumbnail_Click"/>
                                                <MenuItem Header="Delete selected" Click="btn_deleteSwatch_Click"/>
                                                <MenuItem Header="Show in Explorer" Click="mnu_showSwatchesInExplorer_Click" />
                                                <MenuItem Header="Create Frames" Click="mnu_createFrames_Click" ToolTip="Creates FRAMEs groups to your PSD file under the Group associated with the selected swatch. DO NOT RE-ORDER OR RENAME THE GENERATED groups!" />
                                                <MenuItem Header="Create MIPs" Click="mnu_createMIPs_Click" ToolTip="Creates MIPs groups to your PSD file under the Group associated with the selected swatch. DO NOT RE-ORDER OR RENAME THE GENERATED groups!" />
                                            </ContextMenu>
                                        </Grid.ContextMenu>
                                        <Border BorderBrush="Black" BorderThickness="1">
                                            <Grid ToolTip="{Binding Path=Texture}">
                                                <Image VerticalAlignment="Center" HorizontalAlignment="Center" PhotoLoader:Loader.DisplayOption="Preview" PhotoLoader:Loader.DisplayWaitingAnimationDuringLoading="True" PhotoLoader:Loader.Source="{Binding Path=Texture}" PhotoLoader:Loader.DisplayErrorThumbnailOnError="True" Width="256" Height="256" />
                                                <TextBlock VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,10,0,0" FontSize="20"  Text="{Binding Path=Group}" Background="Black" Foreground="White"/>
                                                <TextBlock VerticalAlignment="Bottom"  HorizontalAlignment="Center" Background="Black" Margin="0,0,0,10" FontSize="20" Foreground="White">
                                                    <TextBlock.Text>
                                                        <MultiBinding StringFormat="{}{0} x {1} {2}" >
                                                            <Binding Path="Width" />
                                                            <Binding Path="Height" />
                                                            <Binding Path="Format" />
                                                        </MultiBinding>
                                                    </TextBlock.Text>
                                                </TextBlock>
                                            </Grid>
                                        </Border>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox> 
```

```
 // this callback kicks everything off. 
        private void btn_editSwatch_Click(object sender, RoutedEventArgs e)
        {
            // get a list of the selected indices - we will have to unselect the texture source and reselect it after the re-export in order to force the thumbnail display to update
            // so we will save a list of indices to reselect them after the export
            List selectedIndices = new List();
            for (int i = 0; i < lbx_subimageThumbnails.Items.Count; i++)
            {
                if (lbx_subimageThumbnails.SelectedItems.Contains(lbx_subimageThumbnails.Items[i]))
                {
                    selectedIndices.Add(i);
                }
            }

```
 // store the index of the selected texture source to reselect it after the re-export
        int selIndex = lbx_thumbnails.SelectedIndex;

        // edit and re-export the selected thumbnails
        if (this.EditThumbnails(lbx_subimageThumbnails.SelectedItems, lbx_thumbnails.SelectedItem))
        {

            // re-select the texture source
            lbx_thumbnails.SelectedIndex = selIndex;

            // re-select the previously selected thumbnails.
            foreach (int index in selectedIndices)
            {
                if (!lbx_subimageThumbnails.SelectedItems.Contains(lbx_subimageThumbnails.Items[index]))
                {
                    lbx_subimageThumbnails.SelectedItems.Add(lbx_subimageThumbnails.Items[index]);
                }
            }
        }
    }

    private void lbx_subimageThumbnails_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        ListBox textureSelector = sender as ListBox;
        if (textureSelector != null)
        {
            //update some UI elements
        }
    }

    /*
    this is the SelectionChanged callback for another listbox which is bound as the ItemSource of lbx_subimageThumbnails. When the selection here changes, we default the selection of the subimage listbox to the first subimage after first clearing the selected items in the subimage listbox
    */
    private void lbx_thumbnails_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        // clear the previous swatch selection and select the first thumbnail
        // None of these methods works. after each, lbx_subimageThumbnails.SelectedItems.Count is still >= 1
        // Also, trying to set the SelectedIndex doesn't take. After the assignment, debugger shows                          
        // SelectedIndex is still 0 
        lbx_subimageThumbnails.SelectedIndex = -1;
        lbx_subimageThumbnails.SelectedIndex = -1;

        // Trying to set SelectedItem to null doesn't work...after assignment, SelectedItem is still a vaild
        // reference
        this.lbx_subimageThumbnails.SelectedItem = null;
        if (lbx_subimageThumbnails.SelectedItems.Count > 0)
        {
            lbx_subimageThumbnails.UnselectAll();
            lbx_subimageThumbnails.SelectedItems.Clear();
        }

        lbx_subimageThumbnails.SelectedIndex = 0;

        // reset the preview pane size
        sld_previewSize.Value = 1.0;
    } 
``` 
            回答 #1

赞同：10

时间：2013-06-03T14:27:28.573

您是否覆盖了 ListBox`Equals()`中`GetHashCode()`的项目？我可以通过以下方式复制它：

1.  选择列表中的项目。
2.  更改项目的属性会导致其哈希码发生更改。
3.  选择不同的项目。

第一项没有被删除`SelectedItems`，也无法按照您描述的方式手动删除。即使`SelectionMode`是单一的情况也是如此，并且如果您重新选择第一项，将导致抛出异常。

```

# c# - 如何将图像添加到 ToolStripMenuItem

> ID：16181980
> 
> 赞同：3
> 
> 时间：2013-04-24T01:40:50.723
> 
> 标签：c#, winforms

我有一个使用 ContextMenuStrip 的 C# winForm 项目。我根据使用交互动态地将 ToolStripMenuItems 添加到 ContextMenuStrip。当我添加一个新的 ToolStripMenuItem 时，我将它设置为 Text 属性和 Image 属性。如果不从图像所在的位置获取图像，我不知道如何设置 Image 属性。如何将想象添加到我的项目中？这是我的代码正在执行的示例

```
    上下文菜单条 cxtMnuStrp = 新的上下文菜单条；

    私人无效Button_Click（对象发送者，EventArgs e）
    {
       // 一些过滤和逻辑
       // 确定天气
       // 创建并添加一个 ToolStripMenuItem
       // 等等等等等等...

       ToolStripMenuItem item = new ToolStripMenuItem("uniqueName");

       item.Image = Image.FromFile(@"C:\MyFolder\MyIcon.ico");

       if (cxtMnuStrp.Items.ContainsKey(item) == false)
           cxtMnuStrp.Items.Add(item);
    }

```

使用 "item.Image = Image.FromFile(@"C:\MyFolder\MyIcon.ico")" 当我分发我的每台机器时，必须有 "C:\MyFoler" 目录并且还有 "MyIcon.ico"在他们的计算机上的“C:\MyFoler”目录中。

另外，每次我想向我的 ToolStripMenuItem 添加图标时，我似乎都点击了硬盘驱动器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T01:46:29.440

您可以将图标保存在资源文件中或将图像保存为嵌入式资源。

使用资源文件。

*   [添加和编辑资源 (Visual C#)](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.90%29.aspx)

将图像添加为嵌入式资源

*   [Visual Studio：如何将图像资源存储为嵌入式资源？](https://stackoverflow.com/q/278838/1012641)

您的代码将如下所示。

```
private void BuildContextMenuStrip_Click(object sender, EventArgs e)
{
    ContextMenuStrip cxtMnuStrp = new ContextMenuStrip();

    ToolStripMenuItem item = new ToolStripMenuItem("uniqueName") { Image = WindowsFormsApplication2.Properties.Resources.Search.ToBitmap() };

    if (cxtMnuStrp.Items.Contains(item) == false)
        cxtMnuStrp.Items.Add(item);

    this.ContextMenuStrip = cxtMnuStrp;
} 
```

**笔记：**

1.  如果您在资源文件中添加了一个图标。您必须使用*.ToBitmap()*将其转换为图像。
2.  这些图像现在可以在智能感知中使用，而不是使用路径字符串。
3.  我已将 contextMenuStrip 添加到上面示例中的表单中。

除了上面链接中提供的有关如何添加资源的信息之外，您还可以按如下方式添加它们

![在此处输入图像描述](https://i.stack.imgur.com/jY3wg.jpg)

# javascript - 访问 iframe 中的函数

> ID：16181981
> 
> 赞同：1
> 
> 时间：2013-04-24T01:40:57.317
> 
> 标签：javascript, html, iframe

我知道这已被多次提及，但我找不到我正在寻找的确切内容。

**Index.html 代码。**

```
<html>
 <head>
    <meta charset="utf-8">
    <title>myPage</title>
    <script src="libs/h5.js"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
 </head>
 <body>
   <div id="content" width="1025" height="670">
      <iframe id="homePage" src="pages/homepage.html" width="1025" height="670" seamless></iframe>
   </div>
 </body>
</html> 
```

**h5.js 代码**

```
function setTextHidden()
{
       <------------ **How do I call the hideText function inside the iframe from the parent?**
} 
```

**iframe 中 homepage.html 的 js 代码**

```
function hideText()
{
   console.log("hideText");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:43:36.117

您可以使用[`window.frames`](https://developer.mozilla.org/en-US/docs/DOM/window.frames)属性访问`window`iFrame 的对象，您可以从中调用`hideText`：

```
function setTextHidden() {
    window.frames[0].hideText(); // assuming this is the first iframe on your page
} 
```

# jquery - 多个选择器的 jQuery .on() 事件映射

> ID：16181983
> 
> 赞同：1
> 
> 时间：2013-04-24T01:41:01.757
> 
> 标签：jquery, delegates

我已经阅读了几篇关于使用 jQuery 的 .on() 方法进行事件委托的文章，但没有一篇文章显示是否有一种方法可以在同一方法中将不同的映射绑定到不同的选择器。这适用于例如：

```
$(document) 
.on("click", ".someSelector", function(){...})
.on("click", ".someOtherSelector", function(){...}) 
```

但理想情况下，我希望能够做这样的事情：

```
$(document).on({
"click": someFunction,
"change": somethingElse
}, .selector1,{
"click": function(){...},
"change": function(){...}
}, .selector2); 
```

这或类似的可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-29T21:38:59.237

确定的事！在我看来，您只需将几个方法[堆叠在一起即可。](https://jsfiddle.net/unitof/3dszoheu/)`.on()`

```
$(document).on({
    "click": function() {...},
    "change": function() {...}
}, ".selector1").on({
    "click": function() {...},
    "change": function() {...}
}, ".selector2"); 
```

# javascript - 更改 jQuery 函数中的参数？

> ID：16181985
> 
> 赞同：1
> 
> 时间：2013-04-24T01:41:06.287
> 
> 标签：javascript, jquery, function, arguments

如何将参数传递给 jQuery 函数，对其进行更改，然后在函数执行后保留更改？在下面的示例中，函数中的参数已更改，但在函数终止后不保留其值。我需要添加一个关键字`$.fn.myfunction = function(ref a)`吗？

```
(function($)
{
    $.fn.myfunct = function(a)
    {
        arguments[0]='test';                
    };
})(jQuery);

$(document).ready(function() {
    var a='1';
    $().myfunct(a);
    alert(a);
}); 
```

# database - wp_usermeta 键的用途是什么：wp_user_level

> ID：16181986
> 
> 赞同：1
> 
> 时间：2013-04-24T01:41:10.320
> 
> 标签：database, wordpress, metadata

我正在尝试优化我们的数据库，因为我们有很多用户并且 wp_usermeta 表变得非常大。我注意到每个新用户都会使用密钥添加一行，`wp_user_level`但是当我对整个站点进行多文件搜索时，该密钥不会被引用一次。所以我很难过。它是什么？我可以摆脱它而不会着火吗？

# database - 什么是存储这种关系的好方法，以便我可以有效地回答这种形式的查询？

> ID：16181987
> 
> 赞同：2
> 
> 时间：2013-04-24T01:41:17.190
> 
> 标签：database, language-agnostic

对不起，如果我有点数学的话：

> 我有两个**集合**，X 和 Y，以及多对多**关系**ℜ⊆ X✗Y。
> 
> *   对于所有 x ∈ X，令 xℜ = { y | (x,y) ∈ ℜ } ⊆ Y，Y 的子集与 x 关联 ℜ。
> *   对于所有 y ∈ Y，令 ℜy = { x | (x,y) ∈ ℜ } ⊆ X，X 的子集与 y 通过 ℜ 关联。
> 
> **将查询**定义为 Y 的一组子集，Q ⊆ ℘(Y)。
> 
> 让查询的**图像**是 Q 中子集的并集：
> 
> ```
> 图像(Q) = U q∈Q q
> ```
> 
> 假设 X x 的一个元素满足查询 Q 如果对于所有 q ∈ Q，q ∩ **xℜ** ≠ ∅，即如果 Q 中的所有子集与 Y 的与 x 关联的子集重叠。
> 
> 定义满足查询 Q 的元素 x 的**证据**，使得：
> 
> ```
> 证据(x,Q) = xℜ ∩ 图像(Q)
> ```
> 
> 也就是说，Y 中与 x 相关联并用于匹配 Q 的某些部分的部分。这可以用来验证 x 是否满足 Q。

我的问题是我应该如何存储我的关系 ℜ 以便我可以有效地报告哪些 x∈X 满足查询，并且最好报告满足的证据？

这种关系并不太大，因为 csv 它只有大约 6GB。我有几个想法，但都不是我特别满意的：

1.  我可以存储 { (x, xℜ) | ∀ x∈X } 只是在一个平面文件中，然后做 O(|X||Q||Y|) 工作检查每个 x 以查看它是否满足查询。这可以并行化，但感觉不对。
2.  我可以将ℜ存储在以 Y 为索引的数据库表中，检索 { (y, ℜy) | ∀ y∈image(Q) }，然后将其反转得到 { (x, evidence(x,Q)) | ∀ x st evidence(x,Q) ≠ ∅ }，然后仅检查以找到满足 Q 的 x 和证据。这似乎好一点，但我觉得自己倒置它可能会做一些我可以要求我的 RDBMS 做的事情。

我怎么能做得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:01:19.137

我认为＃2是要走的路。此外，如果 Q 可以在 CNF 中表示，您可以使用多个查询加上 INTERSECT 来让 RDBMS 完成一些繁重的工作。（与 DNF 和 UNION 类似。）

这看起来也有点像您想要一些 RDBMS 支持的“反向索引”。X = 文档集，Y = 词集，q = 匹配 glob "a*c" 的词集。

高温高压

# php - 如何验证SCP是否成功？

> ID：16181991
> 
> 赞同：-1
> 
> 时间：2013-04-24T01:41:34.023
> 
> 标签：php, ssh, scp, phpseclib

我正在使用[http://phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/)与我的服务器建立 SSH 连接，然后执行 SCP 命令以传输到远程服务器。库的 exec() 方法返回一个字符串（看起来像 SCP 命令的标准输出）而不是命令的返回值（例如，0 表示成功）。

我不愿意进行某种字符串比较来确定 SCP 传输是否成功（现在，我得到“stdin: is not a tty”）。是否有可用于确定文件是否存在于另一台服务器上的 SSH 命令？或者关于我如何验证文件是否传输的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:47:34.297

`enablyPTY()`应该修复标准输入：不是 tty。您还可以在 phpseclib 中使用`enableQuietMode()`. `getExitStatus()`将返回退出状态。

# java - 如何以编程方式在 Java 中启动 Mysql 服务器？

> ID：16181993
> 
> 赞同：3
> 
> 时间：2013-04-24T01:41:44.353
> 
> 标签：java, mysql, jdbc

我的 Java 应用程序需要连接到磁盘上的 Mysql 数据库文件。

为此，它需要启动一个 Mysql 服务器并使用该服务器读取文件。问题是我不确定如何从我的 Java 代码中启动服务器，读取 Mysql 文件，对其进行修改，然后停止服务器。

目前，我正在使用类似下面的东西，但我看不到从代码启动服务器的方法。

```
MysqlDataSource dataSource = new MysqlDataSource();
dataSource.setUser("root");
dataSource.setPassword("root");
dataSource.setServerName("MysqlServer");
Connection conn = dataSource.getConnection(); 
```

使用这个，我遇到

> 线程“主”java.lang.RuntimeException 中的异常：com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链接失败

我认为这是因为服务器没有启动。如何从代码启动服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:01:51.000

*   选项 1：了解如何从命令行启动 mysql。然后使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)来做到这一点
*   选项 2：使用 mysql 的可嵌入版本，如果适合您：查看[详细信息](http://dev.mysql.com/doc/connector-mxj/en/connector-mxj-configuration-java-object.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T03:29:15.567

您需要运行“mysqld.exe”来启动 mysql 服务器。该文件可以在 mysql 主文件夹的“bin”文件夹中找到（假设您在 Windows 中工作）。在我的情况下 'mysql-5.6.10-win32\bin\mysqld.exe' 。

如果你想从 Java 中做同样的事情 - 我使用了以下代码并且它有效。希望能帮助到你。

==================================================== ====

```
String command = "~path~\\mysql-5.6.10-win32\\bin\\mysqld.exe";

try
{
    Process process = Runtime.getRuntime().exec(command);
} 
catch (IOException e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T01:51:04.007

查看 Runtime.exec()，它将允许您通过控制台启动 mySQL。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T03:11:09.887

```
Runtime runTime = Runtime.getRuntime();
Process p = runTime.exec(String[] cmdarray, String[] envp, File dir);
p.waitFor(); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-24T02:46:39.627

最简单的方法是使用[JDBC](http://dev.mysql.com/downloads/connector/j/5.0.html)，然后您需要做的就是向服务器发送查询并解释结果。下面是一个简单的连接方法。

```
import java.sql.*;
Connection conn;
private void connect()
{
    try
    {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        conn = DriverManager.getConnection("jdbc:mysql://serverURL","user","pass);
        System.out.println("Connection Established");
    }
    catch (Exception ex) 
    {
        System.err.println("Unable to load the MySQL driver.");
        ex.printStackTrace();
    } 
```