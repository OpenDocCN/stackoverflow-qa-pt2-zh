# StackOverflow 问答 15726000-15726999

# html - 类似于 Mac OS X 10.8 无效密码“摇晃”的 CSS 动画？

> ID：15726000
> 
> 赞同：25
> 
> 时间：2013-03-31T03:21:41.883
> 
> 标签：html, macos, css, user-interface, css-animations

在 Mac OS X 10.8 的“密码”屏幕上，如果您输入了无效的密码，它将来回“摇晃”（也就是左右）。我正在尝试使用 CSS 动画为 HTML 密码输入字段实现类似的效果。

我创建了一个似乎模仿这种行为的[“密码摇动”jsfiddle 。](http://jsfiddle.net/hakanson/MWgnf/)然而，这似乎不太对劲。我不确定显式关键帧和`linear`计时功能是否正确。这是我第一次尝试 CSS 动画，我正在寻找有关实现此目标的正确方法的反馈。

**HTML**

```
<div class="box">
    <input type="password" id="demo-password" placeholder="password" autofocus />
</div> 
```

**JavaScript**

```
$('#demo-password').on('keyup', function (e) {
    var $input = $(this);
    var val = $.trim($input.val());
    $input.removeClass("invalid");

    if (e.which !== 13 || !val) {
        return;
    }

    if (val != "password") {
        $input.select();   
        $input.addClass("invalid");
    }
}); 
```

**CSS**

```
#demo-password.invalid {
    outline-color: red;
    /* also need animation and -moz-animation */
    -webkit-animation: shake .6s linear;
}
/* also need keyframes and -moz-keyframes */
 @-webkit-keyframes shake {
    0% {
        left:-10px;
    }
    16% {
        left:9px;
    }
    33% {
        left:-6px;
    }
    50% {
        left:5px;
    }
    66% {
        left:-2px;
    }
    83% {
        left:1px;
    }
    100% {
        left: 0px;
    }
} 
```

* * *

**编辑**

我确实找到了具有抖动动画的[Animate.css 。](http://daneden.me/animate/)我在下面包含了（非浏览器前缀的）CSS。而不是设置`left`是做 a `transform: translateX()`，这可能有更好的硬件加速机会。

```
.animated {
    animation-duration: 1s;
    animation-fill-mode: both;
}

@keyframes shake {
    0%, 100% {transform: translateX(0);}
    10%, 30%, 50%, 70%, 90% {transform: translateX(-10px);}
    20%, 40%, 60%, 80% {transform: translateX(10px);}
}

.shake {
    animation-name: shake;
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-13T18:12:47.473

我用我的 iPad 相机记录了 Mac 密码屏幕。看起来它每个方向摇晃 3 次，前 2 次是全距离，最后 1 次是更短的距离。

```
#demo-password.invalid {
    outline-color: red;
    /* also need animation and -moz-animation */
    -webkit-animation: shake .5s linear;
}
/* also need keyframes and -moz-keyframes */
 @-webkit-keyframes shake {
    8%, 41% {
        -webkit-transform: translateX(-10px);
    }
    25%, 58% {
        -webkit-transform: translateX(10px);
    }
    75% {
        -webkit-transform: translateX(-5px);
    }
    92% {
        -webkit-transform: translateX(5px);
    }
    0%, 100% {
        -webkit-transform: translateX(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:51:31.910

我也会给[jRumble](http://jackrugile.com/jrumble/#demos)一个机会，它有大量的震动，它们可以组合起来让各种疯狂的事情发生。一些有趣的例子：

*   [根据百分比摇动](http://bit.ly/JgSyI6)
*   [基于时间的震动](http://bit.ly/ZzC7LG)

# python - grep: write error: Broken pipe with subprocess

> ID：15726003
> 
> 赞同：4
> 
> 时间：2013-03-31T03:21:56.523
> 
> 标签：python, grep, subprocess

I get couple of grep:write errors when I run this code. What am I missing?

This is only part of it:

```
 while d <= datetime.datetime(year, month, daysInMonth[month]):
        day = d.strftime("%Y%m%d")
        print day
        results = [day]
        first=subprocess.Popen("grep -Eliw 'Algeria|Bahrain' "+ monthDir +"/"+day+"*.txt | grep -Eliw 'Protest|protesters' "+ monthDir +"/"+day+"*.txt", shell=True, stdout=subprocess.PIPE, )
        output1=first.communicate()[0]
        d += delta
        day = d.strftime("%Y%m%d")
        second=subprocess.Popen("grep -Eliw 'Algeria|Bahrain' "+ monthDir +"/"+day+"*.txt | grep -Eliw 'Protest|protesters' "+ monthDir +"/"+day+"*.txt", shell=True,  stdout=subprocess.PIPE, )
        output2=second.communicate()[0]
        articleList = (output1.split('\n'))
        articleList2 = (output2.split('\n'))
        results.append( len(articleList)+len(articleList2))
        w.writerow(tuple(results))
        d += delta 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T09:31:03.197

When you do

```
A | B 
```

in a shell, process A's output is piped into process B as input. If process B shuts down before reading all of process A's output (e.g. because it found what it was looking for, which is the function of the `-l` option), then process A may complain that its output pipe was prematurely closed.

These errors are basically harmless, and you can work around them by redirecting `stderr` in the subprocesses to `/dev/null`.

A better approach, though, may simply be to use Python's powerful regex capabilities to read the files:

```
def fileContains(fn, pat):
    with open(file) as f:
        for line in f:
            if re.search(pat, line):
                return True
    return False

first = []
for file in glob.glob(monthDir +"/"+day+"*.txt"):
    if fileContains(file, 'Algeria|Bahrain') and fileContains(file, 'Protest|protesters'):
        file.append(first) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T03:50:11.633

To find the files matching two patterns, the command structure should be:

```
grep -l pattern1 $(grep -l pattern2 files) 
```

`$(command)` substitutes the output of the command into the command line.

So your script should be:

```
first=subprocess.Popen("grep -Eliw 'Algeria|Bahrain' $("+ grep -Eliw 'Protest|protesters' "+ monthDir +"/"+day+"*.txt)", shell=True, stdout=subprocess.PIPE, ) 
```

and similarly for `second`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T09:22:16.847

If you are just looking for whole words, you could use the `count()` member function;

```
# assuming names is a list of filenames
for fn in names:
    with open(fn) as infile:
        text = infile.read().lower()
    # remove puntuation
    text = text.replace(',', '')
    text = text.replace('.', '')
    words = text.split()
    print "Algeria:", words.count('algeria')
    print "Bahrain:", words.count('bahrain')
    print "protesters:", words.count('protesters')
    print "protest:", words.count('protest') 
```

If you want more powerful filtering, use `re`.

# node.js - Is there a way to quit Node.js and launch VIM on a file?

> ID：15726004
> 
> 赞同：4
> 
> 时间：2013-03-31T03:22:31.293
> 
> 标签：node.js, vim, terminal

I'm creating a simple terminal-based file manager on Node.js. Is there any way I can, from while my program is running on the terminal, quit it and open a file with VIM?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T05:55:38.807

Simply:

```
require('child_process').spawn('vim', ['test.txt'], {stdio: 'inherit'}); 
```

If there is nothing left in the Node.js event loop when vim exits, then node will exit automatically as well. Or, if you need to guarantee node will exit when vim does:

```
var vim = require('child_process').spawn('vim', ['test.txt'], {stdio: 'inherit'});
vim.on('exit', process.exit); 
```

As for closing the node application *before* vim exits, that's not really possible because vim inherits standard input/output/error streams from the spawning process (node) which are destroyed when node exits.

# objective-c - NSArray of NSStrings Subtraction/Difference

> ID：15726007
> 
> 赞同：0
> 
> 时间：2013-03-31T03:23:03.470
> 
> 标签：objective-c, nsarray, set-difference

I have 2 NSArrays with a bunch of NSStrings. I want to do an array subtraction, so I get all the elements from Array1 that are only in Array1 and not also in Array2\. These NSString objects are different objects, but with the same string values.

Is there an easy way to do this, or do I need a double loop? In python, for example I could use a set operation, but I'm not sure how to do it in Obj-C.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:31:30.710

NSMutableSet gives you much of set operations you get in python

# postgresql - 关于“选择更新”的一些问题？

> ID：15726009
> 
> 赞同：-1
> 
> 时间：2013-03-31T03:23:18.853
> 
> 标签：postgresql

这是使用 libpq.so 的伪代码；但它并不像我想的那样。

```
transaction begin

re1 = [select ics_time from table1 where c1=c11, c2=c22, c3=c33, c4=c44 for update];

if(re1 satisfies the condition)
{
   re2 = [select id where c1=c11, c2=c22, c3=c33, c4=c44 for update];
   delete from table1 where id = re2;
   delete from table2 where id = re2;
   delete from table3 where id = re3;
   insert a new record into table1,table2,table3 with the c1,c2,c3,c4 as primary keys;
]
commit or rollback 
```

注意c1,c2,c3,c4在数据库中都设置为主键，所以数据库中只有一行有这些键。

让我感到困惑的是：

1.  有两个“选择更新”将锁定同一行。在这段代码中，第二条 SQL 语句是否等待被第一条语句阻塞的排他锁？但是，实际情况是它并没有发生。
2.  发生了一些出乎我意料的事情。在日志中，我看到大量重复插入错误。在我看来，“选择更新”用唯一的键锁定行，两个过程连续进行。插入操作在删除之后进行。这些重复插入是如何发生的？“select for update”不是为该行添加了一个排他锁，这会阻止所有其他想要锁定同一行的进程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:14:28.980

关于您的第一点：语句不持有锁，周围事务持有锁。您的伪代码似乎对一个事务使用一个连接，而该事务又使用多个语句。所以第二个`SELECT FOR UPDATE`不会被第一个阻止。阅读[有关锁定的文档](http://www.postgresql.org/docs/current/interactive/explicit-locking.html#LOCKING-ROWS)：

> [...]当行被更新或删除时，会自动获取特定行的排他行级锁。锁一直保持到事务提交或回滚，就像表级锁一样。行级锁不影响数据查询；他们只阻止同一行的作者。

否则，如果交易可以如此轻易地阻止自己，那将是非常有趣的。

关于你的第二点：我无法回答这个问题，因为a）你的伪代码是针对这个问题的伪代码，b）我不明白你所说的“进程”和确切的用例是什么意思。

# java - 按第二个节点元素对单链表进行排序。爪哇

> ID：15726010
> 
> 赞同：0
> 
> 时间：2013-03-31T03:23:30.430
> 
> 标签：java, sorting, singly-linked-list

我试图找到一种方法来按已输入的姓氏对这个单链表进行排序。我想我可能会尝试冒泡排序，但我在通过第二个元素遍历列表并进行比较时遇到问题。该列表现在仅包含 3 个名称作为控制台条目，但完成后它应该有 10 个名称。任何帮助将不胜感激。

```
package LinkedList;

import java.util.*;

class SLinkedList
{

   public String data1;
   public String data2;
   public SLinkedList next;

   public SLinkedList()
   {
      data1 = "";
      data2 = "";
      next = null;
   }
   public SLinkedList(String value1, String value2)
   {
      data1 = value1;
      data2 = value2;
      next = null;
   }
   public SLinkedList InsertNext(String value1, String value2)
   {
      SLinkedList node = new SLinkedList(value1, value2);
      if(this.next == null)
      {
         // Easy to handle
         node.next = null; // already set in constructor
         this.next = node;
      }
      else
      {
         // Insert in the middle
         SLinkedList temp = this.next;
         node.next = temp;
         this.next = node;
       }
       return node;
   }

   public int DeleteNext()
   {
      if(next == null)
         return 0;
       SLinkedList node = this.next;
       this.next = this.next.next;  // can be NULL here
       node = null;
       return 1;
   }
   public void Traverse(SLinkedList node)
   {
      if(node == null)
         node = this;
      System.out.println("\nTraversing in Forward Direction\n");
      while(node != null)
      {
         System.out.println(node.data1 + " " + node.data2);
         node = node.next;
      }
   }
   public void bubbleSort(SLinkedList node) {
       if(node == null)
           node = this;
       String current;
       String second;
       String temp;
       System.out.println("Attemptint to sort...");
       while(node != null)
       {
           current = node.data2;
           node = node.next;
           second = node.data2;
           System.out.println(current + " " + second);
           if(current.compareTo(second) < 0) {

               System.out.println("greater than zero");
           }

           node = null;
           //node = node.next;

       }    
   }

      public static void main(String[] args)
   {

      String firstName;
      String lastName;
      Scanner sc = new Scanner(System.in);
      System.out.print("Enter names in the format of: 'Ed King' with"
              + " a single space in between.");
      firstName = sc.next();
      lastName = sc.next();
      SLinkedList node1 = new SLinkedList(firstName, lastName);
      System.out.print("Enter second name: ");
      firstName = sc.next();
      lastName = sc.next();
      SLinkedList node2 = node1.InsertNext(firstName, lastName);
      System.out.print("Enter third name: ");
      firstName = sc.next();
      lastName = sc.next();
      SLinkedList node3 = node2.InsertNext(firstName, lastName);

      node1.bubbleSort(null);

   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:57:53.657

首先应该使用归并排序对链表进行排序。所以改变你的算法。

来到冒泡排序实现，你的实现不正确[为什么你根本不使用 temp ]。您应该寻找交换节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:23:18.507

提示：

*   您对冒泡排序的实现从根本上是错误的。冒泡排序需要一个嵌套循环。

*   鉴于您设计数据结构的方式，冒泡排序方法必须返回列表的新开始。

*   不要以大写字母开头的方法名称。这是 Java 而不是 C#。

*   如果您无法可视化代码在做什么，请使用调试器单步执行并观察状态如何变化。

# opengl - OpenGL 的 glBlendFunc

> ID：15726017
> 
> 赞同：3
> 
> 时间：2013-03-31T03:24:54.943
> 
> 标签：opengl, glblendfunc

OpenGL 的 glBlendFunc 中有没有办法放大目标 RGB？（即（10,50,5）到（20,100,10）

看来您唯一能做的就是添加源 rgb（乘以 <1 的一些因素）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T10:39:33.880

如果您想将此混合功能用于所有绘制操作/所有对象（并且当然具有初始非零值），您可以做的是以指数方式解释颜色。想象一下颜色缓冲区中写入的内容是某个基数的指数，例如 2，因此*添加*到指数基本上*将乘以*2 到您添加的幂。

如果您还没有这样做，那么您需要引入一个后处理步骤。在那里，您读取颜色值并将 2 乘以颜色的幂，这将为您提供最终颜色。

当然，初始值必须是对数的。

但是，如果您只想将*某些*绘制操作的颜色相乘（我希望只有场景中的最后一个），则必须进一步拆分该过程：首先在使用正常颜色混合的地方绘制“正常”内容。然后将颜色转换为对数刻度（您可以为此使用单独的纹理），将其用于下一个应该乘以颜色的绘制操作（但您告诉 OpenGL 添加颜色），然后通过采用力量。

当然你也可以使用*e*作为底数，在这种情况下你使用自然对数和*exp*函数。

# php - 你可以使用 array_push() 将一个数组推送到另一个数组上吗？

> ID：15726019
> 
> 赞同：3
> 
> 时间：2013-03-31T03:25:29.397
> 
> 标签：php

这是将数组推入另一个数组的正确方法吗？此外，是否所有数组推送都需要 2 个参数？

```
$edge = array( "nodeTo" => "$to");
array_push( $node["adjacencies"], $edge); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T03:37:37.150

[文档](http://www.php.net/manual/en/function.array-push.php)对此非常清楚：

> 注意：如果您使用 array_push() 向数组添加一个元素，最好使用 $array[] = 因为这样就没有调用函数的开销

函数定义列出了两个参数的要求。你至少需要推手和一些东西来推动。

`array_push`真正设计用于同时推送/附加多个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T03:42:36.637

array_push 会将你给它的任何内容添加为目标数组末尾的新元素。

因此，您的示例将添加一个新数组作为 $node["adjacencies"] 的最后一个元素，这将是您的节点连接数组。对于您的示例，我相信您想使用

`$node["adjacencies"] += $edge`

正确组成邻接图

# node.js - Node.js 快速应用缓存/缓慢的页面加载（swig 模板引擎）

> ID：15726023
> 
> 赞同：2
> 
> 时间：2013-03-31T03:26:02.860
> 
> 标签：node.js, caching, express, swig-template

我正在将我的 apache 站点（在 bluehost 上）移动到 node.js（在 heroku 上），并且注意到它的运行速度要慢一些。我想知道这是缓存问题还是我做错了什么。

这是heroku上的网站：http: [//ak-web-prod.herokuapp.com/](http://ak-web-prod.herokuapp.com/)

这是 bluehost 上的网站：http: [//ardentkid.com](http://ardentkid.com)

如果您注意到，页面在加载过程中有时会在导航站点时闪烁白色（这就是为什么我认为这可能是缓存问题）。我已经为：

```
app.enable('view cache'); 
```

似乎没有任何改变。有人有想法么？

这是我的应用程序配置

```
app.configure(function(){
    app.set('config', config);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'html');
    app.set('db', db);
    app.set('port', process.env.PORT || 3000);
    app.engine('.html', cons.swig);
    app.use(express.logger('dev'))
    app.use(express.favicon(__dirname + '/public/img/favicon.ico'));
    app.use(express.cookieParser())
    app.use(express.bodyParser()) //enables req.body
    app.use(express.methodOverride()) //enables app.put and app.delete (can also just use app.post)
    app.use(express.session({
        secret: 'topsecret'
        , store: new RedisStore({
              client:db
            , secret:config.db.auth
            })
    }));
    app.use(passport.initialize()) // use passport session
    app.use(passport.session())
    app.use(app.router) // routes should be at the last
});

app.configure('development', function(){
    console.log('app in development mode');
    app.use('/assets', express.static(__dirname + '/public'));
    app.use('/', express.static(__dirname + '/'));
    swig.init({root: __dirname + '/views', allowErrors: true, cache: false});
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('stage', function(){
    console.log('app in development mode');
    app.use('/assets', express.static(__dirname + '/public', { maxAge: 86400000 }));
    app.use('/', express.static(__dirname + '/', { maxAge: 86400000 }));
    swig.init({root: __dirname + '/views', allowErrors: true, cache:true});
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
    app.enable('view cache');
    app.use('/assets', express.static(__dirname + '/public', { maxAge: 86400000 }));
    app.use('/', express.static(__dirname + '/', { maxAge: 86400000 }));
    swig.init({root: __dirname + '/views', cache:true});
    app.use(express.errorHandler());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:53:54.537

很难说，但我认为可能有两件事会影响加载时间

1.  If you are using the free version of Heroku, it could be causing the slowness.
2.  The Headers being sent aren't allowing the browser to cache, requiring it to re-download everything. Ex.

`curl -XHEAD -v http://ak-web-prod.herokuapp.com/assets/img/logo.png`

```
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: public, max-age=0
< Content-length: 11264
< Content-Type: image/png
< Date: Sun, 31 Mar 2013 03:41:33 GMT
< Etag: "11264-1364696076000"
< Last-Modified: Sun, 31 Mar 2013 02:14:36 GMT
< X-Powered-By: Express
< Connection: keep-alive 
```

To have your static assets served up with Cache-Control set to something besides zero, take a look at the static middleware - [http://www.senchalabs.org/connect/static.html](http://www.senchalabs.org/connect/static.html), it allows you to set the max-age. This will affect images, JS, and CSS.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:18:10.263

Issue was due to my redis database (on RedisToGo) not connecting properly. I didn't think this would affect the page loads, but it definitely did. Now that it's fixed, the app is speedier than ever!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-13T08:17:36.937

You should add this :

```
swig.setDefaults({
    cache: false,
}); 
```

# xcode - xcode debugger options

> ID：15726024
> 
> 赞同：3
> 
> 时间：2013-03-31T03:26:12.817
> 
> 标签：xcode, debugging

![enter image description here](https://i.stack.imgur.com/UMDwH.png)

What are the three options we see in the debug console in Xcode? Just curious to know why there are three options? What purpose each option serve?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T03:28:55.073

Debugger output is stuff printed by the debugger itself, and target output is what is printed by your application (printf, NSLog, etc).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T03:35:51.690

Perhaps a read through of the [Xcode User's Guide](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode_User_Guide/060-Debug_and_Tune_Your_App/debug_app.html) would do us all a little good tonight:

> The Console Pane
> 
> The console pane displays program output and lets you enter commands to the debugger tool. You specify the type of output the console displays with the pop-up menu in the top-left corner of the console pane:
> 
> All Output displays target and debugger output.
> 
> Debugger Output displays debugger output only.
> 
> Target Output displays [target](http://developer.apple.com/library/ios/featuredarticles/XcodeConcepts/Concept-Targets.html) output only.

# android - 启动新活动会重置 ViewPager

> ID：15726025
> 
> 赞同：0
> 
> 时间：2013-03-31T03:26:16.340
> 
> 标签：android, android-webview, android-viewpager

我有一个`ViewPager`，每个视图都是一个`WebView`. 在`Actionbar`我有一个菜单项中，用户可以使用以下代码在默认浏览器中打开网页：

```
 startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(mUrl))); 
```

但是，如果用户单击 中的链接`WebView`，然后在其默认浏览器中打开该站点，然后返回到我的应用程序，则会向他们显示原始网页，而不是他们单击的页面。我考虑过使用`startActivityForResult`而不是`startActivity`，但这只有在我自己的应用程序中打开一个新活动时才有效，对吧？

这是我的代码`ViewPager`：

**分段**

```
public class Browser extends SherlockFragment {
    private String mUrl;    

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        activity = getActivity();

        setHasOptionsMenu(true);

        mUrl = GetUrl();

        mWebView = (WebView)getView().findViewById(R.id.webview);
        mWebView.loadUrl(mUrl);

        mWebView.setWebViewClient(new WebViewClient() {

            public void onPageFinished(WebView view, String url) {

            }

             @Override
             public boolean shouldOverrideUrlLoading(WebView view, String url) {
                  view.loadUrl(url);

                 return true;
             }            
        });
    }

    @Override
    public boolean onOptionsItemSelected(final MenuItem item) 
    {
        if (item.getItemId() == R.id.open) {
                this.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(mUrl)));
            return true;
        } else {
            return super.onOptionsItemSelected(item);
        }
    }

} 
```

**活动**

```
public class BrowserPager extends SherlockFragmentActivity implements Interfaces.OnBrowserSetTitle {

    @Override
    public void onCreate(final Bundle icicle)
    {    
        super.onCreate(icicle);

        setContentView(R.layout.browser_pager);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:06:33.757

没关系，我是个白痴。我正在重置 的`ViewPager`in `onResume`，`Activity`这导致网页重置。移动代码以重置`ViewPager`以`onCreate`解决我的问题。

# android - 在 MediaCodec 的上下文中，错误“OMX_GetExtensionIndex failed”是什么意思，我该如何解决？

> ID：15726031
> 
> 赞同：3
> 
> 时间：2013-03-31T03:27:54.773
> 
> 标签：android, decoder

我正在尝试使用低级媒体 API 来解码 mp3 和其他格式的文件，以便我可以处理它们。我正在按照[此处](http://dpsm.wordpress.com/2012/07/28/android-mediacodec-decoded/)的教程获取编码文件并使用 AudioTrack 播放它，我的代码基本相同，但出现错误。

这是我的代码：

```
public void playSongMono(View view)
{   
    //create extractor and point it to file
    AssetFileDescriptor fd = getResources().openRawResourceFd(R.raw.song);

    MediaExtractor extractor = new MediaExtractor();
    extractor.setDataSource(fd.getFileDescriptor(),fd.getStartOffset(),fd.getLength());

    //get MIME type of file
    MediaFormat inputFormat = extractor.getTrackFormat(0);
    Log.d("MonoPlayer","TRACKS #: "+extractor.getTrackCount());
    String mime = inputFormat.getString(MediaFormat.KEY_MIME);
    Log.d("MonoPlayer","FORMAT: "+mime);

    extractor.selectTrack(0);

    //create codec
    MediaCodec codec = MediaCodec.createDecoderByType(mime);
    Log.d("MonoPlayer","1");
    codec.configure(inputFormat, null, null, 0);
    Log.d("MonoPlayer","2");
    codec.start();
    Log.d("MonoPlayer","3");

    ByteBuffer[] inputBuffers = codec.getInputBuffers();
    ByteBuffer[] outputBuffers  = codec.getOutputBuffers();

    //get a buffer and fill it
    int inputBufferIndex = codec.dequeueInputBuffer(1000000);

    if(inputBufferIndex >= 0)
    {
        Log.d("MonoPlayer","4");
        //fill the buffer
        int sampleSize = extractor.readSampleData(inputBuffers[inputBufferIndex], 0);
        long presentationTimeUs = 0;
        boolean sawInputEOS= false;

        if (sampleSize < 0) {
            sawInputEOS = true;
            sampleSize = 0;
        } else {
            presentationTimeUs = extractor.getSampleTime();
        }

        codec.queueInputBuffer(inputBufferIndex,
                                0,
                                sampleSize,
                                presentationTimeUs,
                                sawInputEOS ? MediaCodec.BUFFER_FLAG_END_OF_STREAM : 0);

        if (!sawInputEOS) {
            extractor.advance();
        }
    }

    BufferInfo info = new BufferInfo(); //this will be populated with data by dequeueOutputBuffer

    //get the index of a finished buffer. since we only enqueued one we should only wait for one
    int resultBufferIndex = codec.dequeueOutputBuffer(info, 1000000);

    if (resultBufferIndex >= 0 )
    {
        Log.d("MonoPlayer","5");
        //we now have a buffer of pcm data
        byte[] chunk = new byte[info.size];
        outputBuffers[resultBufferIndex].get(chunk); 
        outputBuffers[resultBufferIndex].clear();
        codec.releaseOutputBuffer(resultBufferIndex, false);

        //create audiotrack to play sound
        audiotrack = new AudioTrack(AudioManager.STREAM_MUSIC,
                44100,
                AudioFormat.CHANNEL_OUT_STEREO,
                AudioFormat.ENCODING_PCM_16BIT,
                chunk.length,
                AudioTrack.MODE_STATIC);

        audiotrack.play();
        audiotrack.write(chunk, 0, chunk.length);

    }

    extractor.release();
    extractor = null;

    codec.stop();
    codec.release();
    codec = null;
} 
```

执行此代码后，我得到以下 logcat 输出

```
D MonoPlayer       TRACKS #: 1
D MonoPlayer       FORMAT: audio/mpeg
I OMXClient        Using client-side OMX mux.
D MonoPlayer       1
E OMXNodeInstance  OMX_GetExtensionIndex failed
D MonoPlayer       2
D MonoPlayer       3
D MonoPlayer       4 
```

以上是我提到的错误。我不确定为什么会发生此错误或它意味着什么。但是，我试图收集一些信息。使用日志输出表明错误发生在行`codec.configure(inputFormat, null, null, 0);`。我尝试删除该行，这可以预见会导致非法状态错误，但会删除有问题的错误。此外，在我发布的代码中`Log.d("MonoPlayer","5");`，即使出队调用的超时设置为无限期，也永远不会达到，所以我假设解码器没有正确配置。

如果有人知道为什么我可能会收到此错误以及我可以采取哪些措施来修复它，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:09:32.227

该消息可能是无害的。我在成功的测试中看到了这一点。

它似乎来自[OMXNodeInstance.cpp](https://android.googlesource.com/platform/frameworks/av/+/jb-mr1-release/media/libstagefright/omx/OMXNodeInstance.cpp)的第 288 行。扩展查找失败，这仅意味着该`OMX.google.android.index.enableAndroidNativeBuffers`扩展未在该设备上定义。

# python - django 关于“无法导入设置'test.settings'

> ID：15726035
> 
> 赞同：0
> 
> 时间：2013-03-31T03:29:42.470
> 
> 标签：python, mysql, connect

当我尝试使用 Django 测试网站时，它会报告错误。

```
python manage.py shell 
```

它报告说：

> 错误：无法导入设置“test.settings”（它在 sys.path 上吗？）：没有名为 settings 的模块

但是当我使用 Python 脚本查找“test.settings”时，我找不到它：

```
Python 2.7.3 (default, Sep 26 2012, 21:53:58)
>>> import sys
>>> print sys.path

> ['',
> '/usr/local/lib/python2.7/dist-packages/distribute-0.6.35-py2.7.egg',
> '/usr/local/lib/python2.7/dist-packages', '/usr/bin/python2.7',
> '/home/hua/django/mysite/~share', '/usr/lib/python2.7',
> '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk',
> '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload',
> '/usr/local/lib/python2.7/dist-packages',
> '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info',
> '/usr/lib/python2.7/dist-packages',
> '/usr/lib/python2.7/dist-packages/PIL',
> '/usr/lib/python2.7/dist-packages/gst-0.10',
> '/usr/lib/python2.7/dist-packages/gtk-2.0',
> '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:57:14.683

Django 创建不应重命名的文件和文件夹。编辑您的`manage.py`文件：

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings") 
```

# android - small conformation on activity life cycle

> ID：15726037
> 
> 赞同：1
> 
> 时间：2013-03-31T03:30:17.577
> 
> 标签：android, android-activity, android-lifecycle

As i am new to Android i need clarify some doubts in **Activity** Life cycle. I have two activities A and B. I launched first Activity **A** and i called Activity **B** from Activity **A**. So, Activity **A** went into **onPause()** state and **onStart()** state will start for Activity **B**. Now i pressed **BACK** key in Acitivity **B**.So, automatically **onResume()** method of Activity **A** will start.

> Then what is state of Activity **B**?? **onPause()** or **onStop()**? Again if we press **BACK** key in Activity **A** what will happen? It goes to Activity **B** or close the application?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:34:16.070

> Then what is state of Activity B?

If you hit the back key then, unless you overrode `onBackPressed()`, the Activity will be finished (`finish()`). -> The Activity state will be destroyed (`onDestroy()`).

> Again if we press BACK key in Activity A what will happen?

Activity A will also be finished and the app will close itself (since there is no other Activity in the backstack).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T09:34:43.920

AS we pressing back button Activity B should be destroyed After that we are again going back from Activity A hence application should close

# c++ - QT creator and Designer difference - Starting QT

> ID：15726044
> 
> 赞同：2
> 
> 时间：2013-03-31T03:31:22.210
> 
> 标签：c++, visual-studio-2010, qt, qt-designer

I am trying to learn the QT framework so that I could develop GUI based C++ applications using QT. I am currently using Windows 7 64bit . So far I have just downloaded the QT library from [here](http://qt-project.org/downloads). All the tutorials I came across use QT Creator and I only have QT designer. My question is should I download QT creator ? if so which one ? Can I simply use forms created in QT designer in my visual studio 2010 console app ?? Any suggestions or links that might help would be appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:44:36.360

**Qt designer** is a **part of IDE**, it is used to generate a code for widgets(look and fill interface);
Qt creator is IDE;
If you used to work with Visual studio 2010, I advice you to download Qt plugin for it([http://qt-project.org/downloads](http://qt-project.org/downloads)), which allows to enjoy Qt library in VS (it provides Qt designer).
I have the expirience both with Qt Creator and VS 2010 plugin, difference is subtle.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:37:01.080

From QT's own [forum](http://qt-project.org/forums/viewthread/16885)

> QT Designer is for designing dialog's and Main Windows. QT Creator is a full IDE for developing your programs It comes with an integrated version of Qt Designer.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T07:24:01.007

I'm asking for a good re-confirmation! (don't take it otherwise).. As I'm quite new in the Qt platform, I've found it quite confusing!! In Windows platform, you've: Qt 5.4.1 for Windows 32-bit (VS 2012, OpenGL) which is a whooping 644 MB file! & also the info about "Qt Creator" in download says:

> Blockquote Qt Creator 3.3.1 is included in the Qt 5.4.1 binary packages. If you need a standalone installer, please select the file according to your operating system from the list below to get the latest Qt Creator for your computer

--- this a layman would understand as Qt Creator is the GUI of Qt IDE & also you need to download "Qt 5.4.1 for Windows" which is a whooping 644MB !! so, is this the case? or I've to download just the Qt Creator for my work?

# hash - 找到哈希算法？

> ID：15726046
> 
> 赞同：1
> 
> 时间：2013-03-31T03:31:44.050
> 
> 标签：hash

我试图找出使用哪种散列方法来生成某些字符串。它是 32 位（4 字节）。

发现它是 DBJ v1。知道如何在 C# 中实现吗？谢谢 ：）

示例哈希：00 02 B5 D5 - 哈希 30 - 字符串

35 A0 FD 6A - 哈希 6F 66 66 65 6E 73 69 76 - 字符串

05 7B DC 6C - 哈希 70 6C 61 79 65 72 20 75 73 65 64 20 6F 66 66 65 6E 73 69 76 65 20 6C 61 6E 67 75 61 67 65 - 字符串

这很重要，所以谢谢！

# rotation - Kinetic JS - Calculate the degree of rotation of a circle

> ID：15726054
> 
> 赞同：1
> 
> 时间：2013-03-31T03:33:17.800
> 
> 标签：rotation, kineticjs

I am trying to calculate the angle of rotation of a circle, I am using the following script:

```
 var circle = new Kinetic.Circle({
            x: 256,
            y: 256,
            radius: 140,
            stroke: 'black',
            strokeWidth: 4 ,
            offset: [0, 0],
            draggable: true,
            dragBoundFunc: function (pos) {
                var pos = stage.getMousePosition();
                var xd = 140 - pos.x;
                var yd = 140 - pos.y;
                var theta = Math.atan2(yd, xd);
                var degree = (theta / (Math.PI / 180) - 45);
                this.setRotationDeg(degree);
                return {
                    x: this.getAbsolutePosition().x,
                    y: this.getAbsolutePosition().y
                };
            }
        }); 
```

I don't think it is accurate, I added a shape inside the circle to see the rotation but could not group them together, I would appreciate your suggestions on how to calculate the degree of rotation and how to group the shape with the circle so the rotate at the same time. The complete project script is at [http://jsfiddle.net/user373721/Ja6GB](http://jsfiddle.net/user373721/Ja6GB). Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:15:42.033

**Here is how you calculate the angle of the mouse position from "12 o'clock"**

Pretend your canvas is a clock centered in the canvas.

Here's how to calculate the angle of the current mouse position assuming 12 o'clock is zero degrees.

```
 function degreesFromTwelveOclock(cx,cy,mouseX,mouseY){
        // calculate the angle(theta)
        var theta=Math.atan2(mouseY-centerY,mouseX-centerX);
        // be sure theta is positive
        if(theta<0){theta += 2*Math.PI};
        // convert to degrees and rotate so 0 degrees = 12 o'clock
        var degrees=(theta*180/Math.PI+90)%360;
        return(degrees);
    } 
```

Here is complete code and a Fiddle: [http://jsfiddle.net/m1erickson/HKq77/](http://jsfiddle.net/m1erickson/HKq77/)

```
<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    var centerX=canvas.width/2;
    var centerY=canvas.height/2;
    var radius=10;

    // draw a center dot for user's reference
    ctx.beginPath();
    ctx.arc(centerX,centerY, radius, 0 , 2 * Math.PI, false);
    ctx.fill();

    function handleMouseMove(e){
      mouseX=parseInt(e.clientX-offsetX);
      mouseY=parseInt(e.clientY-offsetY);
      $("#movelog").html("Mouse: "+ mouseX + " / " + mouseY);
      $("#angle").html("Angle: "+parseInt(degreesFromTwelveOclock(centerX,centerY,mouseX,mouseY)));
    }

    function degreesFromTwelveOclock(cx,cy,mouseX,mouseY){
        // calculate the angle(theta)
        var theta=Math.atan2(mouseY-centerY,mouseX-centerX);
        // be sure theta is positive
        if(theta<0){theta += 2*Math.PI};
        // convert to degrees and rotate so 0 degrees = 12 o'clock
        var degrees=(theta*180/Math.PI+90)%360;
        return(degrees);
    }

    $("#canvas").mousemove(function(e){handleMouseMove(e);});

}); // end $(function(){});
</script>

</head>

<body>
    <p id="movelog">Move</p>
    <p id="angle">Out</p>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

# perl - In Perl, what is the difference between accessing an array element using @a[$i] as opposed to using $a[$i]?

> ID：15726058
> 
> 赞同：6
> 
> 时间：2013-03-31T03:33:52.083
> 
> 标签：perl, syntax

Basic syntax tutorials I followed do not make this clear:

> Is there any practical/philosophical/context-dependent/tricky difference between accessing an array using the former or latter subscript notation?

```
$ perl -le 'my @a = qw(io tu egli); print $a[1], @a[1]'
```

The output seems to be the same in both cases.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T04:07:53.253

```
$a[...]   # array element 
```

returns the one element identified by the index expression, and

```
@a[...]   # array slice 
```

returns all the elements identified by the index expression.

As such,

*   You should use `$a[EXPR]` when you mean to access a single element in order to convey this information to the reader. In fact, you can get a warning if you don't.
*   You should use `@a[LIST]` when you mean to access many elements or a variable number of elements.

But that's not the end of the story. You asked for practical and tricky (subtle?) differences, and there's one noone mentioned yet: The index expression for an array element is evaluated in scalar context, while the index expression for an array slice is evaluated in list context.

```
sub f { return @_; }

$a[ f(4,5,6) ]     # Same as $a[3]
@a[ f(4,5,6) ]     # Same as $a[4],$a[5],$a[6] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T03:39:19.850

If you turn on [warnings](http://perldoc.perl.org/warnings.html) (which you always should) you would see this:

```
Scalar value @a[0] better written as $a[0]
```

when you use `@a[1]`.

The `@` sigil means "give me a list of something." When used with an array subscript, it retrieves a slice of the array. For example, `@foo[0..3]` retrieves the first four items in the array `@foo`.

When you write `@a[1]`, you're asking for a one-element slice from `@a`. That's perfectly OK, but it's much clearer to ask for a single value, `$a[1]`, instead. So much so that Perl will warn you if you do it the first way.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T03:35:57.433

The first yields a scalar variable while the second gives you an array slice .... Very different animals!!

# jquery - Reload Browser Based on innerHTML Contents

> ID：15726059
> 
> 赞同：0
> 
> 时间：2013-03-31T03:33:58.997
> 
> 标签：jquery, ajax, jquery-mobile, innerhtml

I am using AJAX to load content from a PHP file into a div every 5 seconds. This works fine, but I would like to refresh the browser if the contents of the div are equal to "Your item has expired."

**Here is my HTML:**

```
<div id="tableHolder"></div> 
```

**Here is my JS:**

```
 $(document).ready(function(){
  refreshTable();
});

function refreshTable(){
    $('#tableHolder').load('ajax_time.php', function(){
       setTimeout(refreshTable, 5000);
    });
} 
```

I think I can use something like:

```
if (document.getElementById('tableHolder').innerHTML == "Your item has expired.") 
```

But I'm not sure how to go about putting it together. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T03:35:32.007

You can do this

```
$('document').ready(function(){
    refreshTable();
});

function refreshTable(){
       if($("#tableHolder").text() == "Your item has expired."){
         location.reload();
       } 
   $('#tableHolder').load('ajax_time.php', function(){
      setTimeout(refreshTable, 5000);
   });
} 
```

# sql - 试图创建一个过程（从 inv 中删除项目）

> ID：15726062
> 
> 赞同：0
> 
> 时间：2013-03-31T03:34:40.297
> 
> 标签：sql, stored-procedures

好吧，我试图创建一个 proc 有能力从我的 inv 游戏中删除项目，但我一直失败 ^^ 似乎我的查询不正确或遗漏了一些东西

```
USE [OVERLIMIT_SHARD_NOW]
GO
/****** Object:  StoredProcedure [dbo].[_Remove_Items_From_Inv]    Script Date: 03/31/2013 04:18:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[_Remove_Items_From_Inv] /* by Me */

    @CharID INT

AS

SET NOCOUNT ON;

declare @ID64 INT ;

 (SELECT RefItemID FROM [DataBaseName].[dbo].[_Items] with(NOLOCK) WHERE ID64 = @ID64)

    BEGIN
        UPDATE _Inventory SET ItemID = 0 WHERE ItemID  IN ( SELECT ID64 FROM _Items WHERE RefItemID in ( 46440 , 46441 , 46442 ) and CharID = @CharID )
    END

SET NOCOUNT OFF; 
```

# java - Java - 方法正在更改相同对象类型的其他实例

> ID：15726064
> 
> 赞同：-1
> 
> 时间：2013-03-31T03:35:11.450
> 
> 标签：java

下面的 evalBoard() 方法接受 brd，并将其参数复制到 pos 中。然后它遍历一些可能的值，通过调用 makeMove() 对 pos 进行更改。这些对 pos.makeMove 的调用也在某种程度上改变了 brd 内部的值。通过我在 evalBoard 中标记的区域可以清楚地看到它。为什么会这样？

```
public Move evalBoard(Board brd) {
    // evaluates current board and returns point of best move

    Move best;
    Move tmp = new Move(-1, -1, LOSE, brd.getPlayer());
    if (brd.getPlayer() == PLAYER1) {
        best = new Move(-1, -1, LOSE, PLAYER1);
    } else {
        best = new Move(-1, -1, WIN, PLAYER2);
    }
    // check if board is empty if so return optimal move
    //

    if (brd.isEmpty()) {

        return (new Move(0, 0, 0, PLAYER1));

    }

    // iterate through possible moves
    for (int x = 0; x < 3; x++) {
        for (int y = 0; y < 3; y++) {
            if (brd.getSpace(x, y) == ' ') {
                // copy all of brd to pos

                pos=new Board(brd.getBoard(),brd.getPlayer());

                tmp.setX(x);
                tmp.setY(y);
                tmp.setPlayer(brd.getPlayer());
/*
 *   problem can be seen by stepping through the next line.  brd is changed at the same time.
*/
                pos.makeMove(tmp);//Problem is here this call is changing brd as well

                // evaluate for immediate win or loss
                if (brd.getPlayer() == PLAYER1) {
                    if (pos.win()) {// immediate win
                        tmp.setValue(WIN);
                        return tmp;
                    } else { // not a winning move check it's recursive
                                // value
                        pos.setPlayer(PLAYER2);
                        tmp.copyFrom(evalBoard(pos));
                        if (tmp.getValue() >= best.getValue()) {
                            best.copyFrom(tmp);
                        }

                    }
                } else {
                    if (pos.win()) {// immediate loss
                        tmp.setValue(LOSE);
                        return tmp;
                    } else {// not a losing move check it's recursive value
                        pos.setPlayer(PLAYER1);
                        tmp.copyFrom(evalBoard(pos));
                        if (tmp.getValue() <= best.getValue()) {
                            best.copyFrom(tmp);
                        }
                    }
                }

            }
        }
    }
    return best;

} 
```

这是董事会课程：

```
public class Board {
final boolean PLAYER1=true;
final boolean PLAYER2=false;
public char[][] board = new char[3][3];
public boolean Turn;

public Board(char[][] brd,boolean plr1){
    board=brd;
    Turn=plr1;

}
public char getPlayerChar(){
    if (Turn==PLAYER1){
        return 'X';
    }else{
        return 'O';
    }
        }
public char[][] getBoard(){
    return board;
}
public void setBoard(char[][] brd){
    board=brd;
}
public void displayBoard(){
    for(int y=0;y<3;y++){
        for(int x=0;x<3;x++){
            System.out.print(board[x][y]);
            if (x<2){
                System.out.print(" | ");
            } 

        }
        System.out.println("");
        if (y<2){
            System.out.println("----------");

        }

    }
}
public void makeMove(Move mv){
    //System.out.println("hit");

    if (mv.getPlayer()==PLAYER1){
        board[mv.getX()][mv.getY()]='X';
    }else{
        board[mv.getX()][mv.getY()]='O';
    }

}
public void setPlayer(boolean plr){
    Turn=plr;
}
public boolean getPlayer(){
    return Turn;
}
public char getSpace(int x,int y){
    return board[x][y];

}
public boolean isEmpty(){
    for(int x=0;x<3;x++){
        for(int y=0;y<3;y++){

            if(!(board[x][y]==' ')){
                return false;
            }
        }
    }
    return true;
}
public boolean win(){
    char plrChar;
    //returns true if board is winning position for current player
    if (Turn==PLAYER1){
        plrChar='X';
    }else {
        plrChar='O';
    }
    //Across
    for(int y=0;y<3;y++){
        if (board[0][y]+board[1][y]+board[2][y]==(plrChar+plrChar+plrChar)){
            return true;
        }
    }
    //Up/Down
    for(int x=0;x<3;x++){
        if (board[x][0]+board[x][1]+board[x][2]==(plrChar+plrChar+plrChar)){
            return true;
        }
    }
    //Diagonals
        //top left to bottom right
    if (board[0][0]+board[1][1]+board[2][2]==(plrChar+plrChar+plrChar)){
        return true;
    }
        //bottom left to top right
    if (board[0][2]+board[1][1]+board[2][0]==(plrChar+plrChar+plrChar)){
        return true;
    }
    return false;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:43:45.873

问题是当你这样做时：

```
 pos=new Board(brd.getBoard(),brd.getPlayer()); 
```

您正在创建一个与原始(in `pos`)*共享*其`board`数组的新 Board (in )。这就是构造函数在这里所做的：`Board``brd``Board`

```
 public Board(char[][] brd,boolean plr1){
      board=brd;
      ... 
```

Naturally, since there is only one array, when you update it via one `Board` the changes are visible via the other `Board`.

If you don't want the old and new `Board` instances to share the same char array, then you should not assign like that. Instead, you should use a nested loop to copy the state from `brd` to `board`.

* * *

## The Lesson to be learned

This is an example of a *"leaky abstraction"*. The `getBoard` and `setBoard` methods allow code external to the `Board` to damage the state of a `Board` instance ... in a rather unexpected way. Non-leaky versions of these methods and the `Board` constructor would copy the contents of the array (may be to a new array) rather than allowing the `Board`s array instance to be accessible outside of the abstraction boundary.

# .net - 在不使用内置 Visual Studio 脚手架模板的情况下创建 ASP.net MVC C# 应用程序

> ID：15726072
> 
> 赞同：1
> 
> 时间：2013-03-31T03:36:03.470
> 
> 标签：.net

首先祝你有个愉快的周末，我对这个 stackoverflow 完全陌生，我在这里的原因是我正在为我最后一年的项目开发一个技术论坛，并决定使用 ASP.net MVC 和 MYSQL，但我的问题是
1：Visual Studio 2010 提供了一些用于创建空视图或列表视图等的内置脚手架模板（即右键单击操作->创建视图）。我不想使用它们，但我可以在不使用它们的模板的情况下开发自己的视图。？

2：如果我创建这样的，我如何继续使用控制器或模型来执行 CURD 操作，例如，我编写自己的视图，如何为按钮、文本框等编写代码

3：有人能给我一个好的教程或好的网站吗？东西，即**在没有模板的asp.net MVC中构建Web应用程序**即从基础开始一个基本的 MVC 教程，它在 CURD 和其他操作中对我有
帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:46:35.653

欢迎来到 StackOverflow！

您绝对可以 100% 构建 ASP.NET MVC 应用程序，而无需为视图和控制器使用 MVC 的“脚手架”功能。脚手架所做的一切都是自动化您可以自己完成的任务。事实上，它也是学习 MVC 的好方法。如果您想了解如何在 MVC Web 应用程序中执行 CRUD 操作，我建议您尝试 MVC 中的“添加控制器”功能，并查看它为控制器、数据库上下文和视图生成的内容。

**MVC4：**

为了帮助学习 MVC4，在官方 ASP.NET MVC 网站上有一个免费的 10 模块系列视频。在这里查看它们：[http ://www.asp.net/mvc/videos/pluralsight-building-applications-with-aspnet-mvc-4](http://www.asp.net/mvc/videos/pluralsight-building-applications-with-aspnet-mvc-4)

**MVC3：**

同样，还有一系列 MVC3 的免费视频，可在此处获得：[http ://www.asp.net/mvc/pluralsight](http://www.asp.net/mvc/pluralsight)

特别是对于数据，请查看此视频：[http ://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-data-i&mode=live&clip=0&course=aspdotnet-mvc3-intro](http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-data-i&mode=live&clip=0&course=aspdotnet-mvc3-intro)

# java - 从特定的对象变量数组列表中获取数据频率

> ID：15726073
> 
> 赞同：0
> 
> 时间：2013-03-31T03:36:14.200
> 
> 标签：java

我有一个名为 objectOne 的对象，它的每一行都包含 3 个变量（String var1、String var2、int var3）。所以对于每一行，数据应该是`var1;var2;var3`

我的问题是如何根据其对象及其变量来计算频率？因为类似代码`int occurrences = Collections.frequency(list, item);`无法获取特定对象中变量的出现次数。

例如我有

```
objectOne :
is;is;125
that;is;861
you;are;90
that;is;469 
```

我想得到`is`var2 列中出现了多少单词（答案应该是 3）以及 var1 列中出现了多少`that`单词（答案应该是 2）？

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:21:17.430

我将在类中实现自己查找频率的逻辑，因为现有 Collection 框架中没有为此目的存在的直接 API。

```
public int findOccurances(Collection list, String column,String item) {
    int count = 0;
ObjectOne myObj;
String value="";
Iterator itr = list.iterator();
while(itr.hasNext()) {
        myObj = (ObjectOne)itr.next();
    if(column.equalsIgnoreCase("col1")) value = myObj.getCol1();
    if(column.equalsIgnoreCase("col2")) value = myObj.getCol2();
    if(value.equalsIgnoreCase(item)) {
       count++;
    }
}
return count;
} 
```

希望这会有所帮助，并为改进带来一些启发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:38:26.033

将数据元素包装在具有计数和值的节点中。在插入时，如果不存在则创建一个新的并将计数设置为 1，或者如果它已经存在则增加计数。然后只需要检查节点计数而不是计算节点计数。

# java - 关于构造函数的困惑

> ID：15726075
> 
> 赞同：0
> 
> 时间：2013-03-31T03:36:45.443
> 
> 标签：java, constructor

> 考虑以下代码段。
> 
> ```
> SomeClass someObject1 = new SomeClass("Computer Science");
> SomeClass someObject2 = new SomeClass("Computer Science", "Rocks");
> SomeClass someObject3 = new SomeClass("Computer", "Science", "Rocks"); 
> ```
> 
> 为这些语句中的每一个编写完整的构造函数，包括变量的赋值。

我不确定这个问题到底在寻找什么。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:50:13.640

所以你的答案是

```
public SomeClass{

 String str1;
 String str2;
 String str3;

public SomeClass(String str1){
  this.str1=str1; 
}; 
public SomeClass(String str1,String str2){
this.str1=str1;
this.str2=str2;
}; 
public SomeClass(String str1,String str2,String str3){
this.str1=str1;
this.str2=str2;
this.str3=str3;
}; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T03:42:46.847

我在之前的 Java 课程中遇到过类似的问题。您正在为 SomeClass 编写构造函数。您应该重载构造函数，例如它可以接受不同数量的参数（不同的签名）。您的第二个语句缺少引号 (")。

# ios - 在 Objective C 中播放来自 SWF Flash Player 的音频

> ID：15726076
> 
> 赞同：1
> 
> 时间：2013-03-31T03:36:58.463
> 
> 标签：ios, objective-c, audio, flash, playback

我目前正在制作一个 iOS 应用程序，您可以在其中搜索歌曲。然后，您将获得一个歌曲列表，您可以从中进行选择，然后从应用程序中流式传输。它使用了 tinysong API 的组合，我正在尝试使用 Grooveshark 中的 URL 和给我的 songID 来播放歌曲......例如

[https://grooveshark.com/facebookWidget.swf?songID=13963](https://grooveshark.com/facebookWidget.swf?songID=13963)

我已经快速浏览了这篇文章：[如何使用音乐小部件将 Grooveshark 音乐 url 分享到 facebook？](https://stackoverflow.com/questions/10521264/how-can-i-share-a-grooveshark-music-url-to-facebook-with-the-music-widget)

但我想知道是否可以获得更多信息。

我想要做的是播放该链接中的音频，并使用不断变化的歌曲ID ...

我的目标 C 代码是：

```
//Opens the link of Url from first song and plays it
NSString *SongID = [[jsonArray objectAtIndex:0] objectForKey:@"SongID"];
NSString *playString = [@"https://grooveshark.com/facebookWidget.swf?songID="     stringByAppendingString:SongID];

//Converts songURL into a playable NSURL
NSURL *playURL = [NSURL URLWithString:playString];

AVAudioPlayer *backgroundMusicPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:playURL error:&error];
[backgroundMusicPlayer prepareToPlay];
[backgroundMusicPlayer play]; 
```

但它没有播放。我应该怎么做才能让它发挥作用？我知道 iOS 无法播放 Adob​​e Flash 播放器，并且考虑到它是 swf 格式，这就是为什么我认为它无法播放但我不太了解 Flash 和/或它与 iOS 的结合。因此，任何帮助或想法将不胜感激。

如果还有另一种方法可以从 Objective C 中访问和播放海量歌曲数据库中的歌曲以及他们的艺术家和专辑（如 spotify API，但免费），请发表评论，因为这可能是另一种解决方案！

谢谢！

# mysql - SQL to return NULL rows and corresponding next rows

> ID：15726078
> 
> 赞同：2
> 
> 时间：2013-03-31T03:37:01.357
> 
> 标签：mysql, sql, null

I have a mysql table where a column can have NULL values. Can someone help me with a SQL to return all the rows with the column is null, and as well as the next non-null rows?

Eg:

```
row 1, NULL
row 2, foo 1
row 3, foo 2
row 4, NULL
row 5, foo 3
row 6, foo 4
row 7, foo 5
row 8, NULL
row 9, foo 6 
```

SQL will return:

```
row 1, NULL
row 2, foo 1
row 4, NULL
row 5, foo 3
row 8, NULL
row 9, foo 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:39:15.893

I would suggest something like

```
select * from table t1
where t1.col2 = null
or (t1.col2 != null and exists (select 1 from table t2 where t1.col1 - 1 = t2.col1 and t2.col2 = null)) 
```

We return rows whos col2 is null, or if the col2 is null, we run a subquery to see if the row one before it (col1 - 1) has null in col2, if so we return that too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:55:40.740

Here's one way to do it using user defined variables:

```
select col1, col2 
from (
  select *,
    @showRow:=IF(@prevCol2 is NULL,1,0) showRow,
    @prevCol2:=col2
  from yourtable
    join (SELECT @showRow:= 0, @prevCol2:= NULL) t
  ) t
where showRow = 1 or col2 is null
order by col1, col2 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!2/8b60d/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T04:49:55.073

Basing on your comment, update the answer. Actually for your case, you don't need any order by in the last, you need the native order of data I think. Probably I'm wrong, if so, please add order by as you need.

I borrow **@sgeddes's solution**, actually his solution fit your case best as far as I know. Only a tiny change is the second variable intialization, instead of NULL, give a non-null contanst value, then it can handle the first fews rows of data are not null scenario.

```
 select col1, col2 
from (
  select *,
    @showRow:=IF(@prevCol2 is NULL,1,0) showRow,
    @prevCol2:=col2
  from yourtable
    join (SELECT @showRow:= 0, @prevCol2:= 'foo') t
  ) t
where showRow = 1 or col2 is null 
```

**[SQL FIDDLE DEMO](http://sqlfiddle.com/#!2/6d71d/1)**

# asp.net-mvc - 发送到 ASP MVC 的 KendoUI 日期中的 ModelState 无效

> ID：15726081
> 
> 赞同：2
> 
> 时间：2013-03-31T03:37:39.943
> 
> 标签：asp.net-mvc, kendo-ui

我正在使用 ASP MVC 和 KendoUI。数据以 json 格式发送。我从 KendoUI 网格更新中收到 ModelState 错误，其中根据调试器 ModelState ErrorMessage - **“值'/Date(1361499139623)/'对 FirstAvailableDate 无效。”**

这是我的萤火虫 POST 的打印屏幕 ![在此处输入图像描述](https://i.stack.imgur.com/q93xn.jpg)

如何解决这个问题？我目前正在做 ModelState.Clear(); ...伤心...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:56:16.933

该项目很可能缺少“ [kendo.aspnetmvc.min.js](http://docs.kendoui.com/getting-started/javascript-dependencies) ”脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T05:49:20.077

在将日期发布回 ASP MVC 控制器之前，我最终使用 javascript 格式化了日期。

这是我的javascript：

```
 function toISOString(d) {
        var year = d.getFullYear();
        var month = d.getMonth() + 1;
        var date = d.getDate();
        return year + '-' + month + '-' + date;
    }

    function toMVCDateTime(d) {
        return d.getUTCFullYear() + '-' + padzero(d.getUTCMonth() + 1) + '-' + padzero(d.getUTCDate()) + 'T' + padzero(d.getUTCHours()) + ':' + padzero(d.getUTCMinutes()) + ':' + padzero(d.getUTCSeconds()) + '.' + pad2zeros(d.getUTCMilliseconds()) + 'Z';
    }

    $.ajax({
        url: "TimeSheet/GetWeeklyHistoricalTimeSheets",
        type: "POST",
        //data: { date: utcDate.toISOString() },
        data: { date: toISOString(utcDate)},
        success: function (response) {
            htmlFactory(response);
        }
    }); 
```

# xcode - Xcode 4.6 how to assign the text of a label to an NSString variable

> ID：15726082
> 
> 赞同：1
> 
> 时间：2013-03-31T03:38:04.703
> 
> 标签：xcode, text, nsstring, label

I have an app that has a label in an xib, which contains text. I would like to assign the text to an NSString for use in other areas of the View. My attempt to accomplish this is:

*   In the xib, select the label, show the Identity Inspector, and under Document, fill in the Label field with the desired label name - example: mylabelname
*   In the .m file, of the same name as the xib, inside a method, assign the value of the label to the variable, example: mytextfield

    NSString *mytextfield =[mylabelname.text];

I get an error on the above - Use of undeclared identified 'mylabelname'.

From my research, I think I want to do something like this in my label:

```
[label mytextfield: mylabelname.text]; 
```

Or something similar, but I am not sure how, or where. Can anyone provide me some pointers or guidance on this? I bet this is simple, but I have not been able to figure it out.

Thanks! Rob

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:42:47.140

`NSString *myString = myLabel.text;`

Your problem is enclosing this in `[]`'s

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T03:51:12.050

Any one will work

```
NSString *mytextfield =[mylabelname text]; 
```

or,

```
NSString *mytextfield =mylabelname.text; 
```

# android - Convert Double to Int

> ID：15726085
> 
> 赞同：0
> 
> 时间：2013-03-31T03:38:24.057
> 
> 标签：android

I have a calculator application.

How do I achieve the following?

1.  If there are non-zero numbers after the decimal, then it should stay as double.

2.  If there is NO non-zero number after the decimal, it should be converted to the integer equivalent of double.

    For Example, 10.0003 should be displayed as 10.0003\. Where as 10.0 should be displayed as 10.

Currently I display all the results as Double (10.0). How can I check if there are any non-zero numbers after the decimal? Do we have a simple solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:42:29.680

`floating point` numbers are not represented *exactly* and *accurately* in the machine. They are not fixed point. So `10.0` may be actually `9.99999988451` or something similar. Or, 10.0003 may actually be `10.0000228993` - so it is extremely hard to write a logic that satisfies this.

please read [What every computer scientist must know about floating point numbers](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T03:46:50.370

```
x is a double  
y = round(x)  
if (x - y == 0) 
{
   // x has no non-zero decimal
}
else
{
   // x has non-zero decimal
} 
```

# django - 如何使 Google OAuth2 身份验证工作？

> ID：15726094
> 
> 赞同：0
> 
> 时间：2013-03-31T03:40:44.800
> 
> 标签：django, oauth-2.0, django-socialauth

我正在使用优秀的[Django Social Auth](https://github.com/omab/django-social-auth)应用程序来处理来自各种服务的登录。这适用于 Twitter、Facebook 和 LinkedIn，但我不明白为什么它不适用于 Google。我多次收到这条消息，尝试了我能想到的所有选项：

```
Error: redirect_uri_mismatch
Request Details
scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email
response_type=code
access_type=offline
redirect_uri=http://dev.mysite.com/complete/google-oauth2/
next=/close_login_popup/
state=OHZtGyZPyrM0XUjzEsf8dv22VAZGXSY6
display=page
client_id=820357455247-4levikqugduodacfc8j3b5dhsvmbbnnb.apps.googleusercontent.com 
```

要创建 API 密钥，我访问了[https://code.google.com/apis/](https://code.google.com/apis/) ，然后使用以下步骤填写了表单：

![在此处输入图像描述](https://i.stack.imgur.com/azEK0.png)

然后，我选择了我不完全理解的“已安装的应用程序”，但大多数文档都建议使用此选项。我尝试了其他两种选择都没有成功：

![在此处输入图像描述](https://i.stack.imgur.com/1GJH0.png)

如果我尝试创建`Web Application`指定，则会`http://.dev.mysite.com`收到以下错误：

```
Error: redirect_uri_mismatch
The redirect URI in the request: http://dev.mysite.com/complete/google-oauth2/ did not match a registered redirect URI

Learn more

Request Details
scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email
response_type=code
access_type=online
redirect_uri=http://dev.mysite.com/complete/google-oauth2/
next=/close_login_popup/
state=xcpu93i7XJJmYlwXnRbkfgEwsbbR1O7c
display=page
client_id=606300275392.apps.googleusercontent.com 
```

我的目标是有一个链接，有人可以点击，授予谷歌权限，然后登录到我的网站。我正在实际站点上对此进行测试，`wwww.dev.mysite.com`并在尝试其他我指定的密钥生成选项时`dev.mysite.com`。我会很感激任何关于下一步尝试的建议，因为我已经没有想法了。

# r - 使用 qplot 绘制函数族而不复制数据

> ID：15726096
> 
> 赞同：2
> 
> 时间：2013-03-31T03:41:51.943
> 
> 标签：r, plot, ggplot2

给定函数族*f(x;q)*（*x*是参数，*q*是参数）我想在*x*上可视化这个函数族，从区间*[0,1]*获取 9 个*q*值（从 0.1 到 0.9） . 到目前为止，我的解决方案是：

```
f = function(p,q=0.9) {1-(1-(p*q)^3)^1024}
x = seq(0.0,0.99,by=0.01)
q = seq(0.1,0.9,by=0.1)

qplot(rep(x,9), f(rep(x,9),rep(q,each=100)), colour=factor(rep(q,each=100)), 
      geom="line", size=I(0.9), xlab="x", ylab=expression("y=f(x)")) 
```

*使用qplot*我可以快速轻松地查看：

![在此处输入图像描述](https://i.stack.imgur.com/bynxi.jpg)

我担心的是这种方法相当消耗内存，因为我需要为每个参数复制 x 并为整个 x 范围复制每个参数值。在没有这些重复的情况下生成相同图表的替代方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:07:13.017

在某些时候**ggplot**需要有可用的数据来绘制它，并且包的工作方式禁止简单地做你想做的事。如果您知道 x 和 y 轴限制，我想您可以设置一个空白图，然后遍历 的 9 个值`q`，为其生成数据，并向现有的绘图对象`q`添加一个图层。`geom_line`但是，您必须自己为每一层生成颜色。

如果这代表您遇到的问题的大小，我不会太担心内存占用。我们只讨论长度为 900 的两个向量

```
> object.size(rnorm(900))
7240 bytes 
```

范围内的 100 个值`x`似乎足以给出平滑图。

## `for`循环将图层添加到**ggplot**

```
require("ggplot2")

## something to replicate ggplot's colour palette, sure there is something
## to do this already in **ggplot** now...
ggHueColours <- function(n, h = c(0, 360) + 15, l = 65, c = 100,
                         direction = 1, h.start = 0) {
    turn <- function(x, h.start, direction) {
        (x + h.start) %% 360 * direction
    }

    if ((diff(h) %% 360) < 1) {
      h[2] <- h[2] - 360 / n
    }

    hcl(h = turn(seq(h[1], h[2], length = n), h.start = h.start,
        direction = direction), c = c, l =  l)
}

f = function(p,q=0.9) {1-(1-(p*q)^3)^1024}
x = seq(0.0,0.99,by=0.01)
q = seq(0.1,0.9,by=0.1)
cols <- ggHueColours(n = length(q))

for(i in seq_along(q)) {
  df <- data.frame(y = f(x, q[i]), x = x)
  if(i == 1) {
    plt <- ggplot(df, aes(x = x, y = y)) + geom_line(colour = cols[i])
  } else {
    plt <- plt + geom_line(data = df, colour = cols[i])
  }
}

plt 
```

这使：

![在此处输入图像描述](https://i.stack.imgur.com/w4JLU.png)

**我会把剩下的留给你——我对ggplot**不够熟悉，无法手动绘制图例。

# java - 哈希表和哈希图

> ID：15726107
> 
> 赞同：2
> 
> 时间：2013-03-31T03:45:00.413
> 
> 标签：java, collections, hashmap, hashtable

hashmap 和 hashtable 的内部数据结构有什么不同，体现在以下差异上？

1.  Hashmap 允许一个空键，而 hashtable 不允许。
2.  Hashmap 不保证要维护的顺序 - 虽然我还没有阅读过哈希表的内容。

我认为它们本质上都是内部的“桶”数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:56:24.540

而因为它们都使用哈希值来识别其中的元素。所以他们不能保证订单。对于您提到的差异，这是因为它们扩展了不同的抽象类。字典是一个抽象映射类，其键必须是非空值。而且只有 1 条建议，对于这种你可以在 JDK 中找到更多东西的问题，不要害怕检查它。

```
public class Hashtable<K,V>
    extends Dictionary<K,V>
    implements Map<K,V>, Cloneable, java.io.Serializable {

public class HashMap<K,V>
    extends AbstractMap<K,V>
    implements Map<K,V>, Cloneable, Serializable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:04:02.910

是的，内部都维护数组存储桶。我可以看到`Hashtable`类的`synchronized`方法`HashMap`是方法不是。

以供参考

*   [哈希表](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/Hashtable.java#Hashtable.put%28java.lang.Object,java.lang.Object%29)
*   [哈希映射](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/HashMap.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:31:09.483

除非您正在学习考古学，否则您应该使用 HashMap 和 ConcurrentHashMap（线程安全）。并且请将它们分配给 Map 接口实例，除非您使用特定于任何一个的方法。

# 3d - 我正在尝试以编程方式为角色的头发设置动画。最好的方法是什么？

> ID：15726111
> 
> 赞同：2
> 
> 时间：2013-03-31T03:45:23.597
> 
> 标签：3d, three.js, unity3d, blender

我用 JavaScript 编写了一个布料模拟程序（[见链接](http://maia.im/cloth)），我想用它来以编程方式控制角色的头发和衣服。也就是说，我会在网格上“固定”一些向量，根据运动/重力/力实时获取枢轴点，然后将它们应用于网格。我没有使用自定义布料模拟器，因为它们没有给我所需的完全控制权。

在网格上应用我生成的矢量的最佳方法是什么？我应该用骨头还是什么？我正在尝试使用 Three.js 来做到这一点，但它不是为此而设计的。我正在尝试做的事情是否有合适的工具？实际上，我正在尝试做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:03:27.367

3d 中的头发管理是一项非常艰巨的任务，它将大量模拟与大量伪造混合在一起。如果您只需要一点点运动就可以使传统的发网看起来不像静态的那么您可以使用带有固定点的高阻尼软体模拟器。然而，这很少看起来很逼真——它只是没有头盔头发那么不切实际。逼真的头发渲染是一项非常复杂的业务 -[迪士尼的这个 pdf](http://disney-animation.s3.amazonaws.com/library/artDirectHair11.pdf)提供了一个很好的例子，说明了电影制作必须达到的长度（同一网站也有很好的头发渲染参考，标准着色模型不能很好地处理）

VFX 渲染中的一个常见技巧是模拟股的子集，然后在附近的模拟股之间插入其余部分。这使计算成本保持在合理范围内。您可以尝试 - 将引导毛发模拟为简单的骨骼链，并通过链中的关节绘制 b 样条线，然后使用引导样条线作为大量插值的基础。根据您的渲染器，这些样条线可以渲染为线段或带有 alpha 纹理的纹理色带，以赋予它们正确的外观。这是[Blender 中有限模拟方法的示例](http://www.blendernation.com/2011/12/19/hair-collision-in-blender-2-61/)

但是，很难想象在JS中做一个彻底的头发模拟，模拟非常耗时。这通常不是实时完成的：您会注意到，目前很少有游戏实时进行头发或详细的布料模拟。

通常的电影/电视方法是创建一组手动编辑的指南（两条样条线用于引导头发和“力场”来塑造它），然后运行冗长的离线模拟。例如，[Maya包括头发渲染，但大多数真正关心的作品都使用专用插件，例如](http://www.youtube.com/watch?v=p7nCndZKvVs)[Shave And A Haircut](http://www.joealter.com/shave.htm)。

# c++ - c++: string::insert(string::iterator _where, char _Ch) 突然不工作

> ID：15726113
> 
> 赞同：0
> 
> 时间：2013-03-31T03:46:00.980
> 
> 标签：c++, stl

我正在做一些字符串操作，并使用字符串迭代器循环遍历字符串，并在某些条件下将字符插入字符串。这是代码：

```
string * const Expression::process(char * const s)
{
    if(s == NULL)
    {
        printf("(from Expression::process())\n > NULL data");
        return NULL;
    }

    string *rtrn = new string(s);
    string garbage;

    //EDIT
    rtrn->erase(remove(rtrn->begin(), rtrn->end(), ' '), rtrn->end());

    for(string::iterator j = rtrn->begin(); (j+2) != rtrn->end(); j++)
    {
        if(Operator::isValid(&*j, garbage) != Operator::SYM && *(j+1) == '-' &&            (Operator::isValid(&(*(j+2)), garbage) != Operator::INVALID))
            rtrn->replace(j+1, j+2, "+-");
    }

    rtrn->insert(rtrn->begin(), '(');
    rtrn->append(")");
    for(string::iterator k = rtrn->begin(); k+1 != rtrn->end(); k++)
    {
        if(*k == '-' && !Operator::isValidNum(*(k+1)))
            rtrn->replace(k, k+1, "-1*");
        if((Operator::isValid(&*(k+1), garbage) != Operator::INVALID && (Operator::isValid(&*(k+1), garbage) != Operator::SYM || *(k+1)=='(')) &&
            (Operator::isValid(&*k, garbage) == Operator::VAR || Operator::isValidNum(*k) || *k==')') &&
        !(Operator::isValid(&*k, garbage) == Operator::NUM && Operator::isValid(&*(k+1), garbage) == Operator::NUM))
        {
            if(Operator::isValid(&*k, garbage) == Operator::SYM)
            {
                if(opSymb::valid[garbage]->getArguments())
                    rtrn->insert(k+1, '*');
            }
            else
            {
                rtrn->insert(k+1, '*');
            }
        }
    }

return rtrn;
} 
```

当`s`等于“20x(​​5x+3)-6x(5x^2+11/2)”时，`rtrn->insert(k+1, '*');`当它到达字符串中的“5x^2”时，在 else 语句下会出现运行时错误。基本上，当它进行第 6^次插入时，它在我身上崩溃并抱怨迭代器 + 运算符超出范围。虽然，当我调试时，它确实传递了正确的偏移量。它确实成功地将 char 插入到字符串中，但是在函数执行后，迭代器指向损坏的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T03:51:48.020

for(string::iterator i = rtrn->begin(); i != rtrn->end(); i++) { if(*i == ' ') rtrn->erase(i); }

这个和所有代码片段都存在这样的错误：**for循环不能用于从容器中删除元素，因为**erase **（） - 使与容器相关的所有迭代器无效**，
我建议您**使用while循环**，这里是我回答的另一个问题的简短示例：

```
string::iterator it = input.begin();

while (it != input.end())
{
     while( it != input.end() && isdigit(*it))
     {
          it = input.erase(it);
     }
     if (it != input.end())
         ++it;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:16:14.353

因此，经过你们的研究和帮助，看来我必须改进我的代码，以便任何字符串函数（如擦除、插入或替换）都可以在传递给函数的迭代器上写入。所以我需要把我的代码改成这样

```
for(string::iterator k = rtrn->begin(), m=k+1; m != rtrn->end(); k=m, m=k+1)
{
    if(*k == '-' && !Operator::isValidNum(*m))
        rtrn->replace(k, m, "-1*");
    if((Operator::isValid(&*m, garbage) != Operator::INVALID && (Operator::isValid(&*m, garbage) != Operator::SYM || *m=='(')) &&
    (Operator::isValid(&*k, garbage) == Operator::VAR || Operator::isValidNum(*k) || *k==')') &&
    !(Operator::isValid(&*k, garbage) == Operator::NUM && Operator::isValid(&*m, garbage) == Operator::NUM))
    {
        if(Operator::isValid(&*k, garbage) == Operator::SYM)
        {
            if(opSymb::valid[garbage]->getArguments())
        rtrn->insert(m, '*');
        }
        else
        {
            m=rtrn->insert(m, '*');
        }
    }
} 
```

# algorithm - 有没有办法暴力破解一个数学函数？

> ID：15726115
> 
> 赞同：0
> 
> 时间：2013-03-31T03:46:06.413
> 
> 标签：algorithm, brute-force

我不确定这是否是一个愚蠢的问题，但我在谷歌上找不到任何东西。给定函数 f(x) 的一些数据点，是否有可能暴力破解函数 f(x) 本身可能是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T03:57:25.030

这将依赖于 f(x) 的一些先验知识。

如果知道函数是常数，一点就够了；一条线，然后是两个点，等等，用于多项式函数。

但如果你没有限制，这是不可能的。假设这里的函数意味着类似于实数上的实值函数，有（不可数）无限多个函数将在任何有限的数据点集上取指定值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T03:52:20.363

这主要是数学问题。这取决于可用数据点的数量。您基本上是在将数据拟合到函数中。直线等需要两个数据点。商业解决方案是 TableCurve 2D，[http](http://en.wikipedia.org/wiki/TableCurve_2D) ://en.wikipedia.org/wiki/TableCurve_2D 。我会在谷歌上搜索非线性拟合。[Numerical Recipes ( http://en.wikipedia.org/wiki/Numerical_Recipes](http://en.wikipedia.org/wiki/Numerical_Recipes) )中也描述了拟合算法。最简单的算法将寻找假设函数和数据点之间的偏差。如果您假设数据点存在某些错误，则可以计算卡方和拟合优度。

# javascript - 如何在javascript中制作类似于文本更改效果的矩阵？

> ID：15726123
> 
> 赞同：2
> 
> 时间：2013-03-31T03:47:45.093
> 
> 标签：javascript, text, random

我试图在 JavaScript 中制作这种文本更改矩阵电影的效果。基本概念是 html 中存在一个 div，而 JavaScript 获取该 div 的内部文本并对其进行操作以创建像矩阵电影中那样不断变化的随机文本效果。我对 JavaScript 很陌生，我很难弄清楚动画背后的逻辑，比如每一步，一步一步，就像整个动画过程中接下来会发生什么。

不管怎样，我试着自己做，但你可以怀疑我失败了。

这是我的代码：

```
<html>
<head>
    <script>

        var text = document.getElementById("text").innerText;
        var length_var = text.length;
        var possible = [];
        var possible_text ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        var counter = 0;
        var arr_text = [];

        var new_func = function(){
            arr_text[Math.floor(Math.random() * length_var)] = possible.charAt(Math.floor(Math.random() * possible.length));
            alert(arr_text);

        };

        var call_func = function(){

            for(var i=0; i<=possible_text.length; i++){
                possible[i] = possible_text.charAt(i);
            }

            for(var i=0; i<= length_var ; i++){
                arr_text[i] = text.charAt(i);
            }

            setInterval(new_func, 100);

        };

    </script>
</head>
<body onload="call_func()">

    <div id="text">
        Hello There!
    </div>
</body>
</html> 
```

我计划做的事情可以在这个页面上看到，因为我非常有动力自己做这个效果。

链接：[http ://events.ccc.de/congress/2012/wiki/Main_Page](http://events.ccc.de/congress/2012/wiki/Main_Page)

页面的标题文本包含这样的动画。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:27:38.447

试试这个-

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
        function randString(len) {
            "use strict";
               var i, out="", all ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
                for (i = 0; i < len; i++) {
                    out += all.charAt(Math.floor(Math.random()*all.length));
                }
            return out;
        }
        function main() {
            "use strict";
            var $_inter = setInterval(function() {
                var text = document.getElementById("text");
                text.innerHTML = randString(text.innerHTML.length);
            }, 100);
        }
        window.onload = main;
        </script>
    </head>
    <body>
        <div id="text">Hello World!</div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T04:59:07.877

这会按顺序更改字符串。

```
function main() {
    "use strict";
    var counter = 0, all = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
    var $_inter = setInterval(function() {
        var text = document.getElementById("text");
        text.innerHTML = text.innerHTML.substring(0, counter) + all.charAt(Math.floor(Math.random()*all.length)) + text.innerHTML.substring(counter+1);
        counter = (counter+1)%text.innerHTML.length;
    }, 100);
}
window.onload = main; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-27T12:50:31.847

在这里看看这个[JSFiddle](https://jsfiddle.net/w5wsudd0/)，从[这个资源](http://thecodeplayer.com/walkthrough/matrix-rain-animation-html5-canvas-javascript)放在一起。它非常快，您可以轻松配置它。

基本上创建一个空白画布并渲染图形。这是执行此操作的 JS 和 HTML 代码：

HTML：

```
<html style="background:black; width:100%; height:100%">
    <body style="background:black; width:100%; height:100%">
        <canvas id="c" style="display: block;"></canvas>
    </body>
</html> 
```

JS：

```
var c = document.getElementById("c");
var ctx = c.getContext("2d");

//making the canvas full screen
c.height = window.innerHeight;
c.width = window.innerWidth;

//chinese characters - taken from the unicode charset
var chinese = "田由甲申甴电甶男甸甹町画甼甽甾甿畀畁畂畃畄畅畆畇畈畉畊畋界畍畎畏畐畑";
//converting the string into an array of single characters
chinese = chinese.split("");

var font_size = 10;
var columns = c.width/font_size; //number of columns for the rain
//an array of drops - one per column
var drops = [];
//x below is the x coordinate
//1 = y co-ordinate of the drop(same for every drop initially)
for(var x = 0; x < columns; x++)
    drops[x] = 1; 

//drawing the characters
function draw()
{
    //Black BG for the canvas
    //translucent BG to show trail
    ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
    ctx.fillRect(0, 0, c.width, c.height);

    ctx.fillStyle = "#0F0"; //green text
    ctx.font = font_size + "px arial";
    //looping over drops
    for(var i = 0; i < drops.length; i++)
    {
        //a random chinese character to print
        var text = chinese[Math.floor(Math.random()*chinese.length)];
        //x = i*font_size, y = value of drops[i]*font_size
        ctx.fillText(text, i*font_size, drops[i]*font_size);

        //sending the drop back to the top randomly after it has crossed the screen
        //adding a randomness to the reset to make the drops scattered on the Y axis
        if(drops[i]*font_size > c.height && Math.random() > 0.975)
            drops[i] = 0;

        //incrementing Y coordinate
        drops[i]++;
    }
}

setInterval(draw, 33); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T04:33:01.707

该网站上的程序的症结（真的，真的很丑）涉及创建一个“haXX0r-like”字符数组，然后将它们注入并从文本中删除。

从我在快速通读中看到的情况来看，他们还加快和减慢了他们的过程，并在添加通道和移除通道之间反弹。

他们的代码的缺点是，这都是一堆乱七八糟的循环，一堆“if”包含两个或三个循环，一个接一个……然后他们添加了“模式切换”对此，他们说“如果我们处于模式 1，添加东西并快速完成，如果我们处于模式 2，删除东西并降低速度，如果我们处于任一模式的子模式，相应地设置速度，如果速度大于或小于该速度，并且我们处于此模式，则停止我们正在做的事情，等待 5 秒并再次调用它“......

...不漂亮。

但他们从引号开始，在字符串中找到一个随机点，然后用该字符替换该点的字符，加上新的“<”、“?”、“{”等......

随着他们添加和删除随机选择的字符类型，加速和减速。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-04T15:08:07.740

优雅的片段

```
canvas = document.body.appendChild(document.createElement('canvas'))
screen = window.screen;
width = canvas.width = screen.width;
height = canvas.height = screen.height;
p = Array(255).join(1).split('');
context = canvas.getContext('2d');

setInterval(function(){
    context.fillStyle = 'rgba(0,0,0,0.05)';
    context.fillRect(0, 0, width, height);
    context.fillStyle = 'rgba(0,255,0,1)';
    p = p.map(function(v,i){
        r = Math.random();
        context.fillText(String.fromCharCode(Math.floor(2720 + r * 33)),i*10,v);
        v += 10; 
        return v > 768 + r * 1e4 ? 0 : v
    })
}, 33)
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T06:17:46.280

如果您想要一些可以随机化字符串并慢慢将每个字符替换为原始字符的东西，那么这里可能会适合您。替换顺序也是随机的，因此字符串被乱序替换，但最终以原始字符串结束。

一个更好的解决方案是给每个字母一个不同延迟的计时器，以便它们以不同的速度和不同的时间长度运行。但这可能会为大字符串消耗一些严重的系统资源。

```
function Randomiser(el, count, delay) {
  this.element = el;
  this.originalText = el.textContent || el.innerText || '';
  this.places = [];
  this.currentText = [];
  this.count = count || 3;   // iterations before fixing a character
  this.delay = delay || 100; // milliseconds between updates
  this.iteration = 0;
  this.startTime = new Date();

  var i = this.originalText.length;

  while (i--) {
    this.places[i] = [i];
  }
}

Randomiser.prototype.randomise = function() {
  var charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  var i = this.places.length;

  while (i--) {
    this.currentText[this.places[i]] = charSet.charAt((Math.random() * charSet.length) | 0);
  }
  this.iteration += 1;
}

Randomiser.prototype.setContent = function() {
  var t = this.currentText.join('');

  if (typeof this.element.textContent == 'string') {
    this.element.textContent = t;
  } else {
    this.element.innerText = t;
  }
}

Randomiser.prototype.run = function() {
  var n;
  var temp = [];

  // If first run, randomise to initiate
  if (!this.iteration) {
    this.randomise();
  }

  // If there are places left
  if (this.places.length) {

    // If reached count, randomly remove one place and set its character
    // to the original value
    if (!(this.iteration % this.count)) {
      n = this.places.splice((Math.random() * this.places.length|0), 1)[0];
      this.currentText[n] = this.originalText.charAt(n);
    }

    // Randomise the string and call itself
    this.randomise(); 
    this.setContent();
    var randomiser = this;
    setTimeout(function(){randomiser.run();}, this.delay); 
  }
  // If no places left, end
}

// Kick it off
var r = new Randomiser(document.getElementById('text'), 5, 200);
r.run(); 
```

上面使用了经典的原型继承，它可以使用闭包来做同样的事情。此外，所有这些原型函数都可以放在分配给 Randomiser.prototype 的单个对象中。

# bash - 在子shell中，如何从调用shell中读取环境变量？

> ID：15726127
> 
> 赞同：1
> 
> 时间：2013-03-31T03:49:06.053
> 
> 标签：bash, environment-variables, ls, subshell

出于显而易见的原因，我不想`export COLUMNS`在我的普通 bash shell 中使用。

但是，出于一个特定子外壳的目的，我需要访问其父级的 COLUMNS 的值。换句话说，在常规的 bash shell 中，我想调用一个使用`ls -Cw $COLUMNS`, 的 shell 脚本，其值`$COLUMNS`来自其父级。

除了由父级导出之外，还有什么方法可以访问父级的环境变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T03:57:25.247

你不能。但是除了环境变量之外，还有其他方法可以获取列数。例如

```
COLUMNS=$(tput cols) 
```

# gmail - 根据电子邮件文本（不是表单）填充谷歌电子表格

> ID：15726130
> 
> 赞同：0
> 
> 时间：2013-03-31T03:49:25.067
> 
> 标签：gmail, google-sheets

我想根据收到的电子邮件中的文本在谷歌电子表格中填充电子表格。例如，如果特定文本出现在电子邮件中，“计数器”的值应该增加。这样的功能可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:30:20.497

您可能可以使用 Google Apps Scripts 来实现这一点。

1 - 从 Gmail 中获取数据到电子表格[中：GmailApp 类](https://developers.google.com/apps-script/reference/gmail/)

2 - 设置带有触发器的电子表格：[了解事件](https://developers.google.com/apps-script/understanding_events)

然后，使用 (2) 设置一个电子表格，该电子表格可以定期或每次打开时执行使用 (1) 解析 Gmail 邮件并写入电子表格的代码。以下是一个很好的起点：

3 - 教程：[创建 Gmail 收件箱统计报告](https://developers.google.com/apps-script/articles/gmail-stats)

# php - PHP构造函数

> ID：15726133
> 
> 赞同：-2
> 
> 时间：2013-03-31T03:49:48.587
> 
> 标签：php

问题：**比较这两段代码，为什么第一段没有打印出来？**
当我使用eclipse运行这些代码时，什么也没发生，我不知道为什么它不打印“构造正在运行”。

但是，当我运行第二段代码时，它打印出：
“构造正在运行……”
“管理器构造正在运行……”
**为什么？**

*第一段：*

```
<?php
class Employee 
{
    protected $name;
    protected $title;

    function _construct()
    {
      echo "The constrcut is running..." . '<br>'';
    }   
}
$employee = new Employee();
?> 
```

*第二段*

```
<?php
class Employee 
{
    protected $name;
    protected $title;

    function _construct()
    {
      echo "The constrcut is running..." . '<br>'';
    }   
}

class Manager extends Employee
{

    function __construct()
    {
      parent:: _construct();
      echo  "The Manager construct is running...";
    }
}
 $employee = new Manager();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:56:07.523

在课堂上替换`Employee`：

```
function _construct()
{
  echo "The constrcut is running..." . '<br>'';
} 
```

和：

```
function __construct()
{
  echo "The constrcut is running..." . '<br>'';
} 
```

注意双下划线 ( `__`)。

* * *

你也有一个语法错误：

```
echo "The constrcut is running..." . '<br>'';
-------------------------------------------^ Why two 's? 
```

# magento - magento PHP致命错误：类'Varien_Data_Tree_Node_Collection'

> ID：15726136
> 
> 赞同：0
> 
> 时间：2013-03-31T03:50:07.040
> 
> 标签：magento, magento-1.7

将我的 mangento 安装从 mywebsite.com/mangento 移动到 mywebsite.com 后，我收到一条错误消息：\

我的磁电机以白屏显示“站点停机维护”

我的 error_log 文件中出现错误

PHP 致命错误：在第 51 行的 public_html/lib/Varien/Data/Tree.php 中找不到类 'Varien_Data_Tree_Node_Collection'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:08:58.443

Varien_Data_Tree_Node_Collection 确保此类文件 collection.php 存在于文件夹 Varien/Data/Tree/Node/Collection.php 中，同时检查其权限。

上传/移动过程中可能有一些文件没有成功上传

# zsh - 在 zsh 中使用 vi 绑定导航列表选择

> ID：15726139
> 
> 赞同：2
> 
> 时间：2013-03-31T03:50:18.043
> 
> 标签：zsh

我最近从 bash 迁移到 zsh，到目前为止我很喜欢它：) 我主要使用 vi 绑定来编辑命令和搜索历史记录。

有没有办法使用 vi bindings(hjkl) 导航自动完成选项，而不必使用 TAB 循环浏览选项？

# java - usaco：十三号星期五我的逻辑有什么问题？

> ID：15726140
> 
> 赞同：1
> 
> 时间：2013-03-31T03:50:23.687
> 
> 标签：java

该问题要求计算一周中每一天的第 13 天的数量。这是我的代码。

```
class CopyOffriday {
public static void main(String[] args) throws IOException {
        BufferedReader f = new BufferedReader(new FileReader("friday.txt"));

        int n1=Integer.parseInt(f.readLine());
        int[] counter=new int[7];

        int N=1900+n1-1;
        int position=1; //first 13th is a Saturday

        for(int i=1900; i<=N;i++){
            for(int month=1; month<=12;month++){
                if((i==1900)&&(month==1)) counter[position-1]++; 
                else if((i==N)&&(month==11)){
                    position+=2;
                    position%=7;
                    counter[position-1]++; 
                     System.out.println(i+" "+month+" "+ position+" ");
                    break;  }
                else if((month==4)|| (month==6)||(month==8)||(month==11)) 
                    position+=2;
                else if(month==2){
                    if((i%400==0)||((i%100!=0)&&(i%4==0))) 
                    position+=1;                
                    else  
                    position+=0; }
                else 
                    position+=3;

                if(position>7) position%=7;

                counter[position-1]++;

                System.out.println(i+" "+month+" "+ position+" ");
            }

            }

        for(int x : counter){
              System.out.print(x+" ");

                    }} 
```

我真的很难过，因为我的逻辑给出了错误的答案。我所做的是获取额外的天数，即 31 天月 3 天，30 天月 2 天等，并将其添加到该位置。但它给出了错误的答案。

我的逻辑有什么问题。

我被困在这个简单的问题上感到非常沮丧。非常感谢所有帮助。

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:44:30.430

明白了！

```
for (int i = 1900; i <= N; i++) {
        for (int month = 1; month <= 12; month++) {
            if ((i == 1900) && (month == 1)) {
                counter[position - 1]++;
                position = 31%7 + 1;
            } 
```

有两个错误，首先应该是 9 而不是 8。我们遵循的一般逻辑是我们知道 1900 年的第一个 13 日。一旦你进入 1900 年 1 月的代码，你需要做两件事情。首先，增加星期六的计数，然后由于 Jan 有 31 天，您循环查找 2 月的第 13 天，即您在同一段代码中从 1900 年 1 月 13 日移动到 1900 年 2 月 13 日，这通过添加 31 天来完成这是 2 月 13 日到 1 月 13 日之间的天数。要将其转换为一天，请执行 31%7（在您的情况下为 +1，因为您的编号从 1 开始）。因此，在月份 = 一月的循环中，二月也会增加。

对于月份 = 2 月，您循环查找 3 月的日期，并在 for 循环关闭时递增。类似地，在循环 month = Nov 中，您循环查找 12 月的日期，然后如果该年是最后一年则中断，以免溢出到下一年。如果那一年不是最后的你进入

```
 if ((month == 4) || (month == 6) || (month == 9)
                || (month == 11)) 
```

做你平时的生意，在 12 月加薪，不会中断。对于月份 = 12 月，您增加了下一年 1 月 13 日的天数，从而允许我们隔离 1900 年 1 月的特殊情况，因为任何其他年份的 1 月都会跳过所有 if 语句并执行

```
position += 3; 
```

没有任何问题。特例 ：

```
if ((i == 1900) && (month == 1)) {
            counter[position - 1]++;
            position = 31%7 + 1;
        } 
```

您的完整代码。

```
public static void main(String[] args) throws IOException {
    // Use BufferedReader rather than RandomAccessFile; it's much faster
    BufferedReader f = new BufferedReader(new FileReader(
            "/home/shaleen/USACO/friday/friday.in"));
    // input file name goes above

    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter(
            "/home/shaleen/USACO/friday/friday.out")));
    // Use StringTokenizer vs. readLine/split -- lots faster
    // StringTokenizer st = new StringTokenizer(f.readLine());
    // Get line, break into tokens.

    int n1 = Integer.parseInt(f.readLine());
    int[] counter = new int[7];

    int N = 1900 + n1 - 1;
    int position = 1; // first 13th is a Saturday

    for (int i = 1900; i <= N; i++) {
        for (int month = 1; month <= 12; month++) {
            if ((i == 1900) && (month == 1)) {
                counter[position - 1]++;
                position = 31%7 + 1;
            }
            else if ((i == N) && (month == 11)) {
                position += 2;
                position %= 7;
                counter[position - 1]++;
                System.out.println(i + " " + month + " " + position + " ");
                break;
            } else if ((month == 4) || (month == 6) || (month == 9)
                    || (month == 11))
                position += 2;
            else if (month == 2) {
                if ((i % 400 == 0) || ((i % 100 != 0) && (i % 4 == 0)))
                    position += 1;
                else
                    position += 0;
            } else
                position += 3;

            if (position > 7)
                position %= 7;

            counter[position - 1]++;

            System.out.println(i + " " + month + " " + position + " ");
        }

    }

    for (int x : counter) {
        System.out.print(x + " ");

    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:05:33.567

正如评论中所指出的，您将迭代 11 个月。在您发布后我尝试了这个问题，以了解我是否遗漏了什么。除此之外它看起来还可以。让我们知道 12 个月是否可以解决问题。否则，我会尝试更多地研究您的代码。

我提到的代码的剧透警报。

```
 HashMap<Integer, Integer> daysInAMonth = new HashMap<Integer, Integer>();
    daysInAMonth.put(0, 31);
    daysInAMonth.put(2, 31);
    daysInAMonth.put(3, 30);
    daysInAMonth.put(4, 31);
    daysInAMonth.put(5, 30);
    daysInAMonth.put(6, 31);
    daysInAMonth.put(7, 31);
    daysInAMonth.put(8, 30);
    daysInAMonth.put(9, 31);
    daysInAMonth.put(10, 30);
    daysInAMonth.put(11, 31);

    HashMap<Integer, Integer> dayFrequency = new HashMap<Integer, Integer>(7);
    //sat - 0
    //      sun -1
//      mon -2
//      tue -3
//      wed -4
//      thu -5 
//      fri -6

    dayFrequency.put(0, 0);
    dayFrequency.put(1, 0);
    dayFrequency.put(2, 0);
    dayFrequency.put(3, 0);
    dayFrequency.put(4, 0);
    dayFrequency.put(5, 0);
    dayFrequency.put(6, 0);

    int N = Integer.parseInt(st.nextToken());
    if (N==0) {
        out.println("0 0 0 0 0 0 0");
        System.exit(0);
    }
    System.out.println(N);
    int firstFriday = 0;
    int lastFriday = 0;
    for(int i=0 ;i<N; i++) {
        int year = 1900+i;

        for(int month=0; month<12;month++){

            if(month ==0 && year ==1900) {
                int prevCount  = dayFrequency.get(0);
                dayFrequency.put(0, prevCount + 1);
                lastFriday = 0;
            }

            int noOfdays;
            if(month != 1)
                noOfdays = daysInAMonth.get(month);
                else
                    noOfdays = daysInFebruary(year);

            int wrapDays = (noOfdays-13) + 13;

            lastFriday = (lastFriday + wrapDays)%7;

            dayFrequency.put(lastFriday, dayFrequency.get(lastFriday) + 1);

        }           
    }

    dayFrequency.put(lastFriday, dayFrequency.get(lastFriday) - 1);     

    for(int i=0;i<7;i++) {
        out.print(dayFrequency.get(i));
        if( i != 6)
            out.print(" ");
    }
    out.println("");
    out.close();
    System.exit(0);  
}
public static int daysInFebruary(int year) {
    if(year % 400 == 0)
        return 29;
    if(year % 4 == 0 && year % 100 != 0)
        return 29;
    return 28;      
}   
} 
```

# ios - 打开 Siri 会停止 AVAudioPlayer

> ID：15726141
> 
> 赞同：0
> 
> 时间：2013-03-31T03:50:54.170
> 
> 标签：ios, objective-c, audio, avaudioplayer, siri

我目前正在使用 AVAudioPlayer 在我的应用程序背景中播放循环音乐。但是，当在我的应用程序中打开 siri 时，它会关闭它。我在目标 c 方面经验丰富，但我似乎无法让它发挥作用。有什么方法可以告诉我用户何时打开 siri，以便我可以在 AVAudioPlayer 停止后再次启动它。请帮忙！PS 我曾尝试连续播放音频，但 siri 无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:54:26.487

您可以使用 AVAudioPlayerDelegate 的`audioPlayerEndInterruption:withOptions:`

```
- (void)audioPlayerEndInterruption:(AVAudioPlayer *)player withOptions:(NSUInteger)flags {
      [player play];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T23:20:32.120

对于其他人来说，`endInterruption`当我的应用程序被 Siri 打断时，我不会打电话给代表。我必须让应用程序在再次激活时恢复播放（使用通知）。

# java - 在 ListView 中编辑文本奇怪的行为

> ID：15726143
> 
> 赞同：0
> 
> 时间：2013-03-31T03:51:18.130
> 
> 标签：java, android, eclipse

我正在使用以下代码在列表视图中显示编辑框

我的每个 ListView 项目都包含以下模式

```
 [EditText 1] [EditText 2] [EditText 3 ][EditText  4][EditText 5]

       class CustomArrayAdapterForScore extends ArrayAdapter<ScoreModel> 
        {
            public CustomArrayAdapterForScore() 
            {
                super(MeetScore.this, R.layout.score_event_layout, myScoreArray);
            }

            @Override
            public View getView(final int position, View convertView, ViewGroup parent) 
            {
                    View view = null;
                    LayoutInflater inflator = MeetScore.this.getLayoutInflater();
                    view = inflator.inflate(R.layout.score_event_layout, parent, false);
                    final ViewHolder viewHolder = new ViewHolder();

                    viewHolder.title = (TextView) view.findViewById(R.id.title);

                    viewHolder.box1 = (EditText) view.findViewById(R.id.box1);
                    viewHolder.box2 = (EditText) view.findViewById(R.id.box2);
                    viewHolder.box3 = (EditText) view.findViewById(R.id.box3);
                    viewHolder.box4 = (EditText) view.findViewById(R.id.box4);
                    viewHolder.box5 = (EditText) view.findViewById(R.id.box5);
                    viewHolder.box6 = (EditText) view.findViewById(R.id.box6);

                    viewHolder.box1.addTextChangedListener(new TextWatcher() 
                    {
                        public void onTextChanged(CharSequence c, int arg1, int arg2, int arg3) 
                        {
                            ScoreModel score = myScoreArray.get(position);
                            score.box1 = Integer.valueOf(viewHolder.box1.getText().toString());
                            myScoreArray.set(position, score);
                            listView.invalidateViews();
                        }
                        public void beforeTextChanged(CharSequence c, int arg1, int arg2, int arg3){} 
                        public void afterTextChanged(Editable arg0){} 
                    });

    view.tag(viewHolder);
return view; 
```

每当我更改 Editbox 的文本时，单击它并使用键盘书写，例如，如果我写 9，它会显示 9，但是一旦键盘消失，文本就几乎消失了。编辑文本显示空白。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:45:25.903

1.  使用 View holder 有什么意义，当你不重复使用`convertView`时，你总是在膨胀一个新的 View。

2.  我看到了对`listView.invalidateViews()`in的调用`getView()`。这最终可能会`ListView`在每个文本更改上失效。在失效时，`getView()`被调用并且一个新`TextChangedListener`的被附加到`EditText`. 所有这样的听众都在做同样的事情 n 次，这是混乱的根源。

3.  `myScoreArray`此外，当您膨胀视图时，您不会将文本从保存位置 ( ) 设置回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:20:04.593

这不是您使用 ViewHolder 的方式。这就是你应该如何使用它：

```
public View getView(...)
{
View rootView=convertView;
ViewHolder holder;
if(rootView==null)
  {
  rootView=inflater....
  rootView.setTag(holder =new ViewHolder());
  //...
  }
else holder=(ViewHolder) rootView.getTag();
//...
} 
```

listView 中的 EditText 是有问题的，因为它会导致 listView 项目因为软键盘而移动。要么设置清单：

```
android:windowSoftInputMode="adjustPan" 
```

（我不确定这是正确的值）。或者，制作一个用于编辑所选项目的对话框。

# facebook - Facebook og:image 标签仍然允许其他缩略图

> ID：15726144
> 
> 赞同：2
> 
> 时间：2013-03-31T03:51:31.997
> 
> 标签：facebook, thumbnails, facebook-opengraph

对于我的网站，我设置了

```
<meta property="og:image" content="http://www.jondaou.com/resources/fthr.jpg" /> 
```

一切都按预期工作（facebook 找到并使用该缩略图）除了：

当我在 Facebook 上发布网站时，我指定的缩略图是 3 个选项中的第一个。Facebook 允许在我的网页上找到另外两个缩略图。

如何让 facebook 专门使用我的 <og:image> 缩略图，并且不允许用户在发布时选择另一个？

# r - 使用 R 操作 excel 电子表格数据并将输出返回到单独的工作表

> ID：15726150
> 
> 赞同：2
> 
> 时间：2013-03-31T03:52:55.227
> 
> 标签：r, excel

所以我有这个名为`'Birth.xls'`. 我在这个电子表格中有 10 张表格，格式如下：

```
Sheet1
Number  Value 
3   0.125
6   0.2
9   0.275
12  0.35
15  0.425
17  0.5
19  0.575
21  0.65
23  0.725
25  0.8
27  0.875
29  0.95
31  1.025
Sheet2
Number  Value
3   0.614
6   0.654
9   0.694
12  0.734
15  0.774
17  0.814
19  0.854
21  0.894
23  0.934
25  0.974
27  1.014
29  1.054
31  1.094 
```

我将如何在此电子表格中创建另一个“表格”，其中包含我上面使用 R 给出的表格的行平均值？...我知道我可以在 excel 中执行此操作，但由于有时我有 10 张或更多表格，它可以很痛苦……尤其是当我必须做比平均水平更复杂的事情时……所以总而言之，我想要一个类似于下面的输出

```
Sheet3
Number  Average Value
3   0.3695
6   0.427
9   0.4845
12  0.542
15  0.5995
17  0.657
19  0.7145
21  0.772
23  0.8295
25  0.887
27  0.9445
29  1.002
31  1.0595 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T08:51:30.737

Here is a way I would do it. First, load all data, make them as one data frame, calculate means and then export to new sheet.

```
library(XLConnect)

#load xls file
wb<-loadWorkbook("Birth.xls")

#get sheet names of file
lp<-getSheets(wb)

#load each sheet in seperate list element
dat<-lapply(seq_along(lp),function(i) readWorksheet(wb,sheet=lp[i]))

#convert all data to one data frame by merging individual data frame
dat2<-Reduce(function(...) merge(..., by="Number"), dat)

#calculate row means  of merged data frames (-1 as first column contains Number)
dat2$res<-rowMeans(dat2[,-1])

#create new sheet to export data
createSheet(wb, name = "together")

#write calculated data to new sheet
writeWorksheet(wb,dat2[,c("Number","res")],sheet="together")

#save workbook
saveWorkbook(wb) 
```

# javascript - 当我使用 css3 过渡时，如何在每一帧获得确切的过渡属性？

> ID：15726151
> 
> 赞同：-2
> 
> 时间：2013-03-31T03:52:57.413
> 
> 标签：javascript, css

我知道转换结束时会触发一个 transitionEnd 事件。

但是当我想在过渡期间做某事时，我发现没有这样的“onTransition”事件处理程序。

那么有什么办法可以得到每一帧的过渡细节呢？

```
var el = document.getElementById('test');
el.style.webkitTransitionDuration = '.4s';
el.style.webkitTransitionProperty = 'left';
el.style.left = '500px'; 
```

我想在每个过渡帧中获得完全左属性，就像这样（假代码）：

```
el.onTransition = function(e) {
    console.log(e.currentLeftValue);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:25:38.313

每一帧都没有事件，但您可以使用它[`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)来获得希望以相似速率调用的东西。至于动画的当前属性，可以使用[`getComputedStyle`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle).

# java - 谷歌应用引擎Java中的静态文件

> ID：15726155
> 
> 赞同：1
> 
> 时间：2013-03-31T03:53:22.497
> 
> 标签：java, google-app-engine

我正在构建一个项目，我必须在其中检索文件的文本内容，我阅读了这篇文章[https://developers.google.com/appengine/docs/java/gettingstarted/staticfiles](https://developers.google.com/appengine/docs/java/gettingstarted/staticfiles)。在这篇文章中，我可以将文件存储在war/ 目录并访问它。但它是可公开访问的，任何人都可以访问此文件我的文件包含一些敏感数据，该文件的存储位置以及如何访问它？请指导！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:03:43.890

您需要指定静态文件，如下所述：

[https://developers.google.com/appengine/docs/java/config/appconfig#Static_Files_and_Resource_Files](https://developers.google.com/appengine/docs/java/config/appconfig#Static_Files_and_Resource_Files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T04:55:06.817

您绝对可以存储统计文件并根据应用程序的需要处理它们。请将您的文件保存在其他人无法直接访问的文件夹中。

我建议如下：

1.  将文件保存在文件夹内`/WEB-INF/myfiles`或文件夹内的某个文件夹内`/WEB-INF`。
2.  使用文件 API 读取文件的内容。

希望这可以帮助。

# entity-framework - 在实体框架中创建未与数据库中的字段映射的外键字段

> ID：15726156
> 
> 赞同：1
> 
> 时间：2013-03-31T03:53:23.213
> 
> 标签：entity-framework, c#-4.0

如何在实体框架的数据库中创建具有字段的外键字段？

`DecodePersonnelID`我想在表`MyUser`和`PersonnelID`表`Personnel`（字段键）之间创建关系。

```
public partial class MyUser
{
    public int UsersID { get; set; }
    public string PersonnelID { get; set; }
    [NotMapped]
    public int DecodePersonnelID
    {
        get { return DecodeMD5PersonnelID(PersonnelID); }
        set { PersonnelID = EncodeMD5(value.ToString() ); }
    }
    public string UsersName { get; set; }
}

public partial class Personnel
{
    public int PersonnelID { get; set; }
    public string FirstNameFa { get; set; }
    public string LastNameFa { get; set; }
    public bool Gender { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:00:25.453

你可以`public virtual Personnel Personnel { get; set; }`在你的定义`MyUser`：

```
public partial class MyUser
{
    public int UsersID { get; set; }

    public string PersonnelID { get; set; }
    [NotMapped]
    public int DecodePersonnelID
    {
        get { return DecodeMD5PersonnelID(PersonnelID); }
        set { PersonnelID = EncodeMD5(value.ToString() ); }
    }
    public string UsersName { get; set; }
    public virtual Personnel Personnel { get; set; }
}
public partial class Personnel
{
    public int PersonnelID { get; set; }
    public string FirstNameFa { get; set; }
    public string LastNameFa { get; set; }
    public bool Gender { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:13:19.770

如果`DecodePersonnelID`是表中的列，则`MyUser`必须以相反的方式进行操作，即`PersonnelID`用标记`[NotMapped]`，然后标记`DecodePersonnelID`为外键：

```
public partial class MyUser
{
    public int UsersID { get; set; }

    [NotMapped]
    public string PersonnelID
    {
        get { return EncodeMD5(DecodePersonnelID.ToString()); }
        set { DecodePersonnelID = DecodeMD5PersonnelID(value); }
    }

    [ForeignKey("Personnel")]
    public int DecodePersonnelID { get; set; }
    public string UsersName { get; set; }

    public Personnel Personnel { get; set; }
}

public partial class Personnel
{
    public int PersonnelID { get; set; }
    public string FirstNameFa { get; set; }
    public string LastNameFa { get; set; }
    public bool Gender { get; set; }
} 
```

这将在导航和`MyUser`外键属性之间创建一对多的关系。`Personnel``MyUser.Personnel``DecodePersonnelID`

# c++ - 如何使文件结束输出它的数据？

> ID：15726160
> 
> 赞同：0
> 
> 时间：2013-03-31T03:54:09.853
> 
> 标签：c++, function, output, eof

这是我第一次问问题，如果我遇到任何问题，请原谅我。我一直在研究汽车悬挂系统的项目。我需要为汽车和轮胎的位移以及汽车和轮胎的速度制作 4 个函数。我觉得我的代码结构很好，但它根本没有输出最终产品。主要目的是找到每个函数的最大值。我尝试了很多尝试修复它，但我似乎无法提出解决方案。重点是。我构建了一个具有四个函数的程序，数据文件将这些函数与信息一起提供，直到它结束。当我尝试运行它时，只输出标题。我不知道这是怎么回事。

数据文件有四组，从汽车 A 到汽车 D 组织起来像这样，轮胎的弹簧常数，缓冲器的阻尼常数，车轮的质量，汽车的质量，开始/结束时间，增量值

功能本身有点……难以下咽。所以我想分享一些我认为有问题的代码部分。

任何帮助/提示/评论将不胜感激。

```
csdatafiles>> total_readings;      

csdatafiles >> car_name >> spring_constant_tire >> spring_constant_spring 
>> damp_constant >> mass_of_tire >> mass_of_car 
>> start_time_value >> end_time_value >> increment_time_value;

//Initialize max min
max_displacement_car=displacement_of_car;
max_displacement_tire=displacement_of_tire;
max_velocity_car=velocity_of_car;
max_velocity_tire=velocity_of_tire;

//Output Header
 cout << "\nCar Name    Max Tire Displace   Max Tire Vel   Max Car Displace   Max Car Vel \n" << endl;

{

//recall functions
velocity_of_tire= old_new_tire_velocity (variables needed);
velocity_of_car=old_new_car_velocity (variables needed);
displacement_of_car= old_new_car_displacement (variables needed);

//check for max
if (displacement_of_car>max_displacement_car)
    max_displacement_car=displacement_of_car;

if (displacement_of_tire>max_displacement_tire)
    max_displacement_tire=displacement_of_car;

if (velocity_of_car>max_velocity_car)
    max_velocity_car=velocity_of_car;

if (velocity_of_tire>max_velocity_tire)
    max_velocity_tire=velocity_of_tire;

total_readings++;

//read rest of data
csdatafiles >> spring_constant_tire >> spring_constant_spring 
>> damp_constant >> mass_of_tire >> mass_of_car 
>> start_time_value >> end_time_value >> increment_time_value;

} while (!csdatafiles.eof());
//Output
cout << car_name << max_displacement_tire << max_velocity_tire << max_displacement_car << max_velocity_car; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:09:59.680

刚刚离开你发布的代码，看起来你试图放一个`do-while`但忘记了`do`......

代替

```
do {

//recall functions
//...
//check for max
//...
//read rest of data
//....

} while (!csdatafiles.eof()); 
```

你有

```
{

//recall functions
//...
//check for max
//...
//read rest of data
//....

} while (!csdatafiles.eof()); 
```

这是**非常**不同的！没有`do`，您的代码相当于：

```
{

//recall functions
//...
//check for max
//...
//read rest of data
//....

}

while (!csdatafiles.eof()) {
  ;
} 
```

如您所见，在最后一个 cout 语句**之前有一个无限循环，因此您永远无法到达它。**

# css - 如何使用css将图像与中心对齐？

> ID：15726164
> 
> 赞同：1
> 
> 时间：2013-03-31T03:55:12.337
> 
> 标签：css, alignment

我有三个图像。需要对齐，以便它们适合在同一条线上并居中。我已经设法使用 float: left; 对齐第一张和第三张图像。和浮动：对；但我正在努力对齐中心图像。

![https://dl.dropbox.com/u/94786808/example.png](https://i.stack.imgur.com/IGxLQ.png)

这是涉及的代码：

```
.postprojects {
     margin-top: 60px;
     padding-left: 35px;
     padding-right: 35px;
     padding-top: 35px;
     background-image:url('image/bgprojects.png');
     width: 889px;
     height: 300px;
     }

.postproject1 {
     float: left;
     overflow: hidden;
}

.postproject2 {
     float: left;
     overflow: hidden;
}

.postproject3 {
    float: right;
    overflow: hidden;
} 
```

有什么建议么？

（PS忽略网站底部的奇怪剪辑。这是一个填充错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:13:24.043

试试这段代码，可能是：

```
.postproject2 {
    float: left;
    overflow: hidden;
    margin: 73px 10px 0;
} 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/eFK7F/2/](http://jsfiddle.net/praveenscience/eFK7F/2/)

# php - 在同一网页中从 mysql 数据库发送数据和接收数据

> ID：15726165
> 
> 赞同：0
> 
> 时间：2013-03-31T03:55:20.417
> 
> 标签：php, mysql, ajax

我正在尝试将讨论板作为我自己的项目，现在我有一个用户输入他的评论的页面，另一个确认他的评论已发布的页面，然后是第三个页面，您可以在其中看到所有评论. 所有这些都是使用 php 和 mysql 作为包含所有用户信息的数据库来完成的，例如用户、姓名、评论、日期等。

我想要做的不是三页，我只想要一个用户输入评论的页面，他可以立即在同一页面中看到评论。这个可以吗，网上有什么好的教程可以看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:44:14.157

您可以使用[Ajax](https://www.google.com/search?q=ajax)来实现。

# ruby-on-rails - Rails - 使用现有的父资源数据验证子对象

> ID：15726180
> 
> 赞同：0
> 
> 时间：2013-03-31T03:57:45.457
> 
> 标签：ruby-on-rails

使用现有父资源中的数据验证新子对象的正确程序是什么？我不明白如何从子模型访问父资源的数据。

上下文：我的子模型`Reservation`具有不能与`Reservation`父对象的其他对象冲突/重叠的日期范围属性。我试图实现这一点的方式是在`Reservation`模型中编写一个自定义验证器，该验证器提取父对象的所有现有保留并遍历它们，确保没有冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:39:08.503

您使用自定义验证器并迭代保留的方法对我来说听起来不错。

假设你有这个：

```
class Parent < ActiveRecord::Base
  has_many :reservations
end

class Reservation < ActiveRecord::Base
  belongs_to :parent
end 
```

然后您可以使用 reservation.parent.reservations 来迭代现有的预订。

# kineticjs - Kinetic JS - getDragLayer 4.4 版

> ID：15726181
> 
> 赞同：0
> 
> 时间：2013-03-31T03:57:47.217
> 
> 标签：kineticjs

我将 Kinetic JS 从 4.3.1 更新到 4.4 版，getDragLayer 出现以下错误：

```
Object doesn't support property or method 'getDragLayer' 
```

我正在使用以下脚本。

```
 stage.getDragLayer().afterDraw(function () {
                layer.draw();
            }); 
```

[在http://jsfiddle.net/user373721/sTbFV/](http://jsfiddle.net/user373721/sTbFV/)完成项目。我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:45:18.253

是的，你是对的。

getDragLayer() 在 4.3.3 版中，但不在 4.4 版中。

我还没有消化对 Kinetic 4.4 源代码的更改，但您仍然可以在图层上使用 .afterDraw()。这导致我建议您可以只执行 myLayer.afterDraw 而不是 stage.getDragLayer.afterDraw()。不过不要引用我的话……我还没试过！

# string - 用于模式数组的 Powershell 搜索字符串

> ID：15726184
> 
> 赞同：4
> 
> 时间：2013-03-31T03:58:40.677
> 
> 标签：string, powershell, design-patterns

在 Powershell 中，如何在文本文件中的每一行中搜索模式数组？Select-string 的模式可以接受一个数组，但如果找到数组中的任何字符串，它就会返回一个真值。如果在行中找到数组中的所有字符串，我需要它返回 true（或实际上是行）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:07:57.287

为了将字符串数组与模式数组匹配，我相信您需要这样的东西：

```
$patterns = @( ... )

Get-Content sample.txt | % {
  $count = 0
  foreach ($p in $patterns) {
    if ($_ -match $p) { $count++ }
  }
  if ($count -eq $patterns.Length) { $_ }
} 
```

或像这样：

```
$patterns = @( ... )

$content = Get-Content sample.txt
foreach ( $line in $content ) {
  $count = @($patterns | ? { $line -match $_ }).Length
  if ( $count -eq $patterns.Length ) { $line }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T09:31:41.633

在我的头顶

```
Get-Content file.txt | 
Where-Object {$_ -match $ptrn1 -and $_ -match $ptrn2 -and $_ -match $ptrn3} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T16:44:01.750

另外两种可能性：

```
$patterns = 'abc','def','ghi'
$lines = 'abcdefghi','abcdefg','abcdefghijkl'

:nextline foreach ($line in $lines)
 {foreach ($pattern in $patterns)
  {if ($line -notmatch $pattern){continue nextline}
 }$line}

abcdefghi
abcdefghijkl 
```

一旦任何模式不匹配，这将放弃对一行的进一步处理。

这一次对整个行集合起作用，而不是做一个 foreach：

```
$patterns = 'abc','def','ghi'
$lines = 'abcdefghi','abcdefg','abcdefghijkl'

foreach ($pattern in $patterns)
{$lines = $lines -match $pattern}
$lines

abcdefghi
abcdefghijkl 
```

用你的 get-content 替换测试文字来填充 $lines。

# css - css：inline-block 帮助导航栏居中 - 需要了解工作原理

> ID：15726187
> 
> 赞同：0
> 
> 时间：2013-03-31T03:59:41.680
> 
> 标签：css

在本站示例页面下面的源代码中：

```
 http://6.470.scripts.mit.edu/css_exercises/exercise5.html

<head>
<style>
body
{
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    background-color: #bbbbbb;
}
#container
{
    width:1000px;
    background-color:#dddddd;
    text-align: center;
    margin: auto;
}
#navigation
{
    display: inline-block;
    margin-top:20px;
}

#navigation_bar
{
    list-style-type:none;
    margin:auto;
    padding:0;
    overflow:hidden;
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
}
#navigation_bar li
{
    float:left;
}
#navigation_bar a:link, #navigation_bar a:visited
{
    display:block;
    width:120px;
    font-weight:bold;
    color:#FFFFFF;
    background-color:#993738;
    text-align:center;
    padding:4px;
    text-decoration:none;
    text-transform:uppercase;
}
</style>
</head>
<body>
<div id="container">
    <div id="header">
        <h1 id="big_title">6.470 Web Programming Competition</h1>
    </div>
    <div id="navigation">
        <ul id="navigation_bar">
            <!--On a real website, you would put the URL you want to navigate to inside href-->
            <li><a href="#home">Home</a></li>
            <li><a href="#materials">Materials</a></li>
            <li><a href="#competition">Competition</a></li>
            <li><a href="#pastyears">Past Years</a></li>
            <li><a href="#about">About</a></li>
        </ul>
    </div>
</body> 
```

仅当在 div#navigation 中使用 display: inline-block 时，导航栏才会居中。如果将其删除，则导航栏根本不会居中。甚至 ul#navigation_bar 的 margin: auto 也无济于事。如果 ul##navigation_bar 提到了宽度，那么它可以使导航栏居中。我的问题是，整个事情是如何工作的，即 display:inline-block 如何使导航栏居中，固定宽度如何使 ul#navigation_bar 也起作用？以及 margin: auto 如何没有像其他情况一样的效果？

非常感谢帮助澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:15:28.123

这`<ul>`是一个块元素，默认情况下会尝试占据其容器的整个宽度。在`inline-block`父级上，它只会增长到其内容（`<li>`s）的宽度，因为元素的内容`inline-block`被[格式化为块框](http://www.w3.org/TR/CSS2/visuren.html)。这受[块格式化上下文](http://www.w3.org/TR/CSS2/visuren.html#block-formatting)的影响 -`<ul>`触及其容器的边缘。如果`display: inline-block`未在 上指定`<div>`，它将占据整个宽度， , 也是如此`<ul>`，并且`margin: 0 auto;`没有效果。

请注意，您也可以自己穿上`display: inline-block`以`<ul>`减小其宽度并使其`margin: 0 auto`生效。

# android - 在取消 AsyncTask 时执行 onPostExecute

> ID：15726188
> 
> 赞同：0
> 
> 时间：2013-03-31T03:59:45.930
> 
> 标签：android, android-asynctask

据我了解，一旦调用 AsyncTask，结果将更改为 null 并取消 AsyncTask。有没有办法保留结果并将其传递给`onPostExecute(String result)`. `developer.android.com`表示不要显式调用这些函数。

该应用程序基本上扫描图像，如果用户取消异步任务，我希望异步任务显示到目前为止扫描的图像。所以结果不应该设置为null。

这有可能实现吗？如果是，如何？

```
class openCVOperation extends AsyncTask<String, String, String>{
    private MainActivity context = null;
    /*lots of variables here*/
    public openCVOperation(MainActivity context1) {
        context = context1;// set context from mainActivity
                                        // which
                                        // inherits Activity super class.
                                        // Needed
                                        // for accessing widgets.
    }

    @Override
    protected void onPreExecute() {
        pd = new ProgressDialog(context);
        pd.setIndeterminate(false);
        pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pd.setMax(100);
        pd.setCancelable(true);
        pd.setCanceledOnTouchOutside(false);
        pd.setMessage("Starting up");
        pd.show();
    }
    @Override
    protected String doInBackground(String... params) {
        publishProgress("Finding path to Storage...");
        path = Environment.getExternalStorageDirectory();
        p = path.getAbsolutePath();
        p=p+"/location";
        rm(p);// this has a loop!
        return null;

    }
    @Override
    protected void onCancelled()
    {
        System.out.println("In onCancelled");
        super.onCancelled();
    }
@Override
    protected void onPostExecute(String result) {
        pd.dismiss();
        /*post execute stuff*
    } 
```

`rm(p)`有一个循环，所以我尝试使用`isCancelled()`作为条件，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:17:26.737

在 doInBackground

```
if (isCancelled())
{
    return // image so far
}

onPostExecute(String result)
{

     // show result
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:19:05.210

我只需要将它添加到我的`doInBackground()`

```
pd.setOnCancelListener(new DialogInterface.OnCancelListener() {

            @Override
            public void onCancel(DialogInterface dialog) {
                // TODO Auto-generated method stub
                task.cancel(true);
            }
        }); 
```

`pd`我的进度对话框在哪里。

还要确保您签`isCancelled()`入`doInBackground()`或`onCancelled()`永远不会被调用，并且应用程序将强制关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:20:27.697

收集结果：

```
public class MyTask extends AsyncTask<Void,Void,Void>{
  private final List<String> data;

  public MyTask(){
    data =  new ArrayList<String>();
  }

  public synchronized List<String> getData(){
    return new ArrayList<String>(data); //--current data snapshot--
  }

  private synchronized collect(String s){
    data.add(s);
  }     

  @Override
  public Void doInBackground(Void...args){
    //---do stuff--
    collect(/*-stuff-*/);
  }
} 
```

即使线程中断，您也不会丢失任何东西。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-31T05:23:45.373

如果`onCancelled`没有被调用，那么您的`rm`方法仍在运行。因为正如你提到的，它正在运行一个循环。

控制进程（知道是否需要停止）的最佳方法是轮询或检查方法中`volatile boolean`变量的状态`rm`。

例如，`static volatile boolean`在 AsyncTask 类中创建一个名为`cancel`. `false`在方法中将此变量设置为`onPreExecute`。

在您的方法中，检查繁重任务（打开文件、读取文件、下载循环的一部分）之前和之后`rm`是否为真。`cancel`

`return`如果它是真的，那么用一个语句打破这个方法。更好的是，让您的`rm`方法返回一个整数，0 表示良好，1 表示已取消。

最后，在`doInBackground`方法返回之前，查看是否需要在线程上调用取消。

```
public class asyncTask extends AsyncTask<Void, Void, Void>
{
    private static synchronized boolean cancel;

    protected void onPreExecute()
    {
        cancel = false;
    }

    protected String doInBackground(Void ... params)
    {

        rm(p);

        if(cancel)
            asyncTask.cancel;
        else
            return null;
    }

    protected void onCancelled()
    {
        // only executed if doInBackground resulted in a cancel == true
    }

    protected void onPostExecute(Void param)
    {
        /// only executed if doInBackground resulted in a cancel == false 
    }

    private int rm(String str)
    {
        if(cancel)
            return 1;

        //do part of task

        if(cancel)
            return 1;

        //another part of task

        if(cancel)
            return 1;

        //another part of task

        return cancel ? 1 : 0;
    }

} 
```

# javascript - $(elem).html() = localStorage 不起作用

> ID：15726190
> 
> 赞同：-1
> 
> 时间：2013-03-31T04:00:06.000
> 
> 标签：javascript, jquery

我的选项.html：

```
<!doctype html>

<html>
<head>
    <title>Item Notifier v1.0.2</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <script src="jquery.js"></script>
    <script src="options.js"></script>
</head>
<body>
    <h1>Cowboy's Item Notifyer</h1>
    <label>Last updated hat:<h2 id='itemname'>[ loading... ]</h2></label>
</body>
</html> 
```

然后是我的 options.js：

```
$(document).ready(function() {
    $('#itemname').html() = localStorage.mostRecentHat;
}); 
```

它应该将innerHTML 从更改`[ loading... ]`为的值，`mostRecentHat`但它会将值变为未定义并且不会更改innerHTML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:01:40.077

您应该将该值作为参数传递给`html`方法。

```
$(document).ready(function() {
    $('#itemname').html(localStorage.mostRecentHat);
    // document.getElementById('itemname').innerHTML = localStorage.mostRecentHat;
}); 
```

# binding - SqlDataSource 在 page_load 之后才填充控件

> ID：15726193
> 
> 赞同：1
> 
> 时间：2013-03-31T04:00:36.187
> 
> 标签：binding, controls, sqldatasource

对 asp.net 有点新，所以请多多包涵。我有一个从 SqlDataSource 填充的下拉列表。此下拉列表的选定值用作我的结果网格的另一个 SqlDataSource 中的参数。

问题是我的下拉列表在 page_load 之后没有填充任何内容。这导致了一个问题，因为我正在调用一个在 page_load 中使用依赖 SqlDataSource 的方法，并且由于其中一个参数为空而导致崩溃。

我也尝试过 page_prerender ，到那时下拉菜单仍然没有填充。关于我可以在生命周期中使用什么方法，或者更早地填充 SqlDataSource 控件的任何想法？

# ios - UIImageView 中突出显示的图像到底是什么？

> ID：15726195
> 
> 赞同：35
> 
> 时间：2013-03-31T04:01:16.347
> 
> 标签：ios, objective-c, image, uiimageview

这个问题让我大吃一惊，我找不到答案。我查看了所有文档，尝试了代码，并搜索了谷歌，但我找不到任何东西。iOS 编程中的 UIImageView 可以设置一个图像，但你也可以设置一个突出显示的图像。这个突出显示的图像到底是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-31T04:17:03.060

您可以为 UIImageView 设置两个不同的图像，一个为其 image 属性，另一个为其 highlightImage 属性。

在许多情况下，您希望将图像的状态（例如：复选标记）从关闭更改为打开，反之亦然。在这种情况下，您不必每次都将 UIImageView 的图像设置为适当的图像，而是可以说

```
theCheckMarkImageView.image = regularImage;//set the regular image
theCheckMarkImageView.highLightedImage = highlightedImage; 
```

（根据您的逻辑显示它是否突出显示）。

```
theCheckMarkImageView.highlighted = YES/NO; 
```

除此之外，请查看 Ethan Huang 关于 tabelviewcell 如何使用此属性的回答。如果您根据单元格选择显示不同的图像，这将非常有用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T04:11:57.927

highlightedImage 用于高亮 ImageView，简单。

```
imageView.highlightedImage = [UIImage imageNamed:@"hightlighted.png"];
imageView.highlighted = YES; 
```

无需浪费时间搜索或阅读大量内容。Objective-C 是有意义的语言。只需要拖拽ImageView，做一个try code，一步步测试UIImageView.h(in UIKit framework)中的所有属性，方法，你就明白了。对其他 UI 元素执行相同操作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-27T05:19:37.277

除了 Nitin Alabur 的回答，这里还有一个有用的提示：

UITableViewCell 或 UICollectionViewCell 有一个 .selected 属性。如果你将 UIImageView 放在一个单元格中，那么当你选择单元格时，imageView 将使用 .highlightedImage 而不是 .image。

因此，您可以轻松地使单元格选择视觉状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T04:28:46.020

突出显示的图像适用于当您有一个`UIImageView`可以按下的控件时。当用户按下控件时，会显示突出显示的图像。未按下控件时，将显示正常图像。

* * *

## 回答 #5

> 赞同：-15
> 
> 时间：2013-03-31T04:35:57.880

所有评论者都错了或回答了错误的问题或太罗嗦了。这是简单而正确的答案：

突出显示的图像状态是当用户的手指正在触摸图像视图时。

# c# - 使用 Json.Net 解析 JSON 数组

> ID：15726197
> 
> 赞同：57
> 
> 时间：2013-03-31T04:01:36.830
> 
> 标签：c#, asp.net, json, json.net

我正在使用 Json.Net 来解析一个数组。我要做的是将名称/值对从数组中提取出来，并在解析 JObject 时将它们分配给特定的变量。

这是我在数组中的内容：

```
[
  {
    "General": "At this time we do not have any frequent support requests."
  },
  {
    "Support": "For support inquires, please see our support page."
  }
] 
```

这是我在 C# 中得到的：

```
WebRequest objRequest = HttpWebRequest.Create(dest);
WebResponse objResponse = objRequest.GetResponse();
using (StreamReader reader = new StreamReader(objResponse.GetResponseStream()))
{
    string json = reader.ReadToEnd();
    JArray a = JArray.Parse(json);

    //Here's where I'm stumped

} 
```

我对 JSON 和 Json.Net 还很陌生，所以它可能是其他人的基本解决方案。我基本上只需要在 foreach 循环中分配名称/值对，以便我可以在前端输出数据。有没有人这样做过？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-03-31T04:58:42.730

您可以像这样获取数据值：

```
string json = @"
[ 
    { ""General"" : ""At this time we do not have any frequent support requests."" },
    { ""Support"" : ""For support inquires, please see our support page."" }
]";

JArray a = JArray.Parse(json);

foreach (JObject o in a.Children<JObject>())
{
    foreach (JProperty p in o.Properties())
    {
        string name = p.Name;
        string value = (string)p.Value;
        Console.WriteLine(name + " -- " + value);
    }
} 
```

小提琴：[https ://dotnetfiddle.net/uox4Vt](https://dotnetfiddle.net/uox4Vt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-20T18:42:11.237

使用 Manatee.Json [https://github.com/gregsdennis/Manatee.Json/wiki/Usage](https://github.com/gregsdennis/Manatee.Json/wiki/Usage)

您可以将整个对象转换为字符串，filename.json 预计位于文档文件夹中。

```
 var text = File.ReadAllText("filename.json");
        var json = JsonValue.Parse(text);

        while (JsonValue.Null != null)
        {
            Console.WriteLine(json.ToString());

        }
        Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-09T13:11:35.487

我知道这是关于 Json.NET，但时代在变，所以如果有人在使用 .NET Core/5+ System.Text.Json 时在这里绊倒，请不要绝望，因为 尝试来自 .NET[的新 System.Text.Json API](https://devblogs.microsoft.com/dotnet/try-the-new-system-text-json-apis/)博客展示了一个例子。

> ```
> [
>    {
>        "date": "2013-01-07T00:00:00Z",
>        "temp": 23,
>    },
>    {
>        "date": "2013-01-08T00:00:00Z",
>        "temp": 28,
>    },
>    {
>        "date": "2013-01-14T00:00:00Z",
>        "temp": 8,
>    },
> ] 
> ```
> 
> ...
> 
> ```
> using (JsonDocument document = JsonDocument.Parse(json, options))
> {
>    int sumOfAllTemperatures = 0;
>    int count = 0;
> 
>    foreach (JsonElement element in document.RootElement.EnumerateArray())
>    {
>        DateTimeOffset date = element.GetProperty("date").GetDateTimeOffset();
>        (...) 
> ```

# c - 当测试函数需要参数时，have_func 的正确用法是什么？

> ID：15726199
> 
> 赞同：2
> 
> 时间：2013-03-31T04:01:48.877
> 
> 标签：c, ruby, atlas, extconf.rb, mkmf

我有`extconf.rb`以下几行：

```
have_header("cblas.h")                 # checking for cblas.h... yes
have_func("cblas_dgemm", ["cblas.h"])  # checking for cblas_dgemm() in cblas.h... no
create_header("nmatrix_config.h")      # creating nmatrix_config.h 
```

所以，`cblas_dgemm`肯定是在`cblas.h`。当我查看[mkmf.log](https://gist.github.com/mohawkjohn/5279488)时，我发现这个检查实际上是在寻找两件事：

1.  某处的`_cblas_dgemm`符号（？）
2.  一个可调用`cblas_dgemm`的`cblas.h`.

两个测试都失败了。我认为前者失败了，因为我需要一条`dir_config`线`cblas`，也许还有一条线`have_library('cblas')`。

但我不知道如何使后一个测试通过（参见[要点](https://gist.github.com/mohawkjohn/5279488)的第 24 行）。是否可以将一个块传递给它，`have_func`以便它实际上用合理的参数调用它？还是有其他方法可以运行此测试？还是我必须`dir_config`正确设置这些东西？

顺便说一下，这是第 24 行：

```
conftest.c:7:1: error: too few arguments to function ‘cblas_dgemm’ 
```

是的，当然，`cblas_dgemm`需要很多参数——其中一些是矩阵。

`mkmf`令人沮丧的是，关于这些功能的文档很少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-22T20:19:31.607

不幸的是，它看起来`have_func`记录得很差，但经过一番挖掘，我发现了一些可能有帮助的东西：

```
[25] pry(main)> have_func("clapack_dgetrf", "/usr/local/atlas/include/clapack.h")
checking for clapack_dgetrf() in /usr/local/atlas/include/clapack.h... no
=> false
[26] pry(main)> have_func("int clapack_dgetrf", "/usr/local/atlas/include/clapack.h")
checking for int clapack_dgetrf() in /usr/local/atlas/include/clapack.h... yes
=> true 
```

因此，基本上看起来您至少需要包含返回类型才能`have_func`正常工作。您能否验证这在您的机器上是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T13:09:22.760

在`mkmf.rb`,`ruby 1.9.3p392`后一个测试只有在前者失败时才会执行。当前者过去时，`have_func`成功。所以你不必让后者通过。有关详细信息，请参阅`try_func`中。`mkmf.rb`

仅供参考，在[`mkmf.rb`2013-04-13 11:00:25](https://github.com/ruby/ruby/blob/b35529bb4e9b7c1f328e4515106b4b96aec94167/lib/mkmf.rb#L721)中，您似乎可以给出这样的论点：`have_func("some_func(some_arg, another_arg)", ["foo.h"])`.

# php - file_get_contents 返回 html 文件中的文本

> ID：15726205
> 
> 赞同：2
> 
> 时间：2013-03-31T04:03:11.917
> 
> 标签：php

我最近遇到了 file_get_contents 的问题......当我使用它从网络上获取网页时，它工作正常，但是当我用它打开本地页面时，它只输出页面中的文本。即当我将它用作

```
file_get_contents("http://www.google.com"); 
```

并回显它我得到了谷歌页面及其整个结构但是当我使用

```
file_get_contents("localfile.html"); 
```

并回显它，它只输出页面中没有标签的文本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T04:04:19.947

这是因为，HTML 标签是由浏览器解析的。使用[`htmlentities`](http://www.php.net/manual/en/function.htmlentities.php)这种方式：

```
htmlentities(file_get_contents("localfile.html")); 
```

但有一件事，当你看到文件的来源时，它会告诉你你需要什么。此外，您也可以在`textarea`.

```
<textarea><?php echo htmlentities(file_get_contents("localfile.html")); ?></textarea> 
```

# sharepoint - 无法将库加载到程序集中 (GAC)

> ID：15726213
> 
> 赞同：1
> 
> 时间：2013-03-31T04:05:02.187
> 
> 标签：sharepoint, web-parts, .net-assembly, gacutil

我在 Windows Server 2010 上使用 Visual Studio 2010 和 Sharepoint 2010 服务器。我正在将 webpart 部署到在同一台服务器上运行的 Sharepoint 实例。

我的新 webpart 使用自定义库，`AE.Net.Mail`. 当我部署此 Web 部件时，我收到`Could not load file or assembly...`了`AE.Net.Mail`. 我已经跑`gacutil`了，但在`C:\Windows\assembly`. 我确实在`C:\Windows\Microsoft.NET\assembly`.

现在我不确定这一点，但我认为当我的 Sharepoint 实例运行时，它只会查看`C:\Windows\assembly`. 这就是它无法找到图书馆的原因。我相信这是因为我的 webpart 的名称存在于`C:\Windows\assembly`. 它被缓存在那里，而不是在`C:\Windows\Microsoft.NET\assembly`.

我正在使用`AE.Net.Mail Version 1.6.0.0`与`.NET 3.5`. 我认为我的 Sharepoint 服务器正在使用 3.5，尽管机器上存在 4.0。我是这么认为的，因为当我尝试使用 nuget 安装库时，我无法安装需要 .NET 4.0 的最新版本。错误说我的项目使用的是3.5。1.6.0.0 版本与 3.5 兼容

那么，你们认为发生了什么，你们认为我可以如何`AE.Net.Mail`进入`C:\Windows\assembly`？一直在这几个小时，我想不通（拖放不起作用）

多谢你们。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:31:53.250

从来源来看，AE.Net.Mail 不是强类型，这是 GAC 部署（和 SharePoint）所需要的。

要将二进制文件添加到 GAC，您必须从 Github 下载 AE.Net.Mail 的二进制文件，签署程序集并自行编译。这很简单，只需按照本指南[http://msdn.microsoft.com/en-us/library/ms247123(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms247123(v=vs.100).aspx)

请记住为 .net 3.5 编译，因为这是 SP2010 支持的，它不会识别 net4 程序集

# c# - 托管环境中的暂存内存

> ID：15726214
> 
> 赞同：10
> 
> 时间：2013-03-31T04:05:06.707
> 
> 标签：c#, memory-management, managed

我正在用 C# 进行流体模拟。每个循环我都需要计算空间中离散点的流体速度。作为该计算的一部分，我需要几十 KB 的暂存空间来保存一些 double[] 数组（数组的确切大小取决于一些输入数据）。数组仅在使用它们的方法期间才需要，并且有一些不同的方法需要像这样的暂存空间。

如我所见，构建临时数组有几种不同的解决方案：

1.  每次调用该方法时，使用“new”从堆中获取内存。这就是我一开始在做的事情，但是它给垃圾收集器带来了很大的压力，而且每秒一到两次的几毫秒的峰值真的很烦人。

2.  调用方法时将临时数组作为参数传递。问题是这迫使用户管理它们，包括适当地调整它们的大小，这是一个巨大的痛苦。由于它更改了 API，因此使用或多或少的暂存内存变得困难。

3.  在不安全的上下文中使用 stackalloc 从程序堆栈中分配暂存内存。这可以正常工作，除了我需要使用 /unsafe 编译并在我的代码中不断地撒上不安全的块，我想避免这种情况。

4.  程序启动时预分配私有数组一次。这很好，除非我不一定知道我需要的数组的大小，直到我可以查看一些输入数据。而且它变得非常混乱，因为你不能将这些私有变量的范围限制在一个方法中，所以它们会不断地污染命名空间。随着需要暂存内存的方法数量的增加，它的扩展性很差，因为我分配了很多只在一小部分时间内使用的内存。

5.  创建某种中央池，并从池中分配暂存内存数组。这样做的主要问题是我看不到从中央池分配动态大小的数组的简单方法。我可以使用起始偏移量和长度，并让所有暂存内存本质上共享一个大数组，但我有很多现有代码假定为 double[]s。而且我必须小心使这样的池线程安全。

...

有没有人有类似问题的经验？从经验中可以提供任何建议/教训？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T14:53:09.990

我同情你的处境；当我在 Roslyn 工作时，我们非常仔细地考虑了由分配临时工作数组的收集压力引起的潜在性能问题。我们确定的解决方案是池化策略。

在编译器中，数组大小往往很小，因此经常重复。在您的情况下，如果您有大型阵列，那么我会遵循 Tom 的建议：简化管理问题并浪费一些空间。当您向池请求大小为 x 的数组时，将 x 向上舍入到最接近的 2 的幂并分配该大小的数组，或者从池中取出一个。调用者得到一个有点太大的数组，但可以编写它们来处理它。在池中搜索适当大小的数组应该不会太难。或者您可以维护一堆池，一个用于 1024 大小的数组，一个用于 2048，依此类推。

编写线程安全池并不太难，或者您可以将池线程设为静态，每个线程拥有一个池。

棘手的一点是将内存恢复到池中。有几种方法可以解决这个问题。首先，如果他们不想承担收集压力的代价，您可以简单地要求池化内存的用户在完成数组处理后调用“返回池中”方法。

另一种方法是在数组周围编写一个外观包装器，使其实现 IDisposable 以便您可以使用“使用”（*），并在将对象放回池中的对象上进行终结器，使其复活。（确保让终结器重新打开“我需要被终结”位。）复活的终结器让我紧张；我个人更喜欢前一种方法，这就是我们在罗斯林所做的。

* * *

(*) 是的，这违反了“使用”应该表明将非托管资源返回给操作系统的原则。本质上，我们通过自己的管理将托管内存视为非托管资源，因此还不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T04:21:29.587

~~您可以将使用这些临时数组的代码包装在 using 语句中，如下所示：~~

 ~~```
using(double[] scratchArray = new double[buffer])
{
    // Code here...
} 
```~~ 

~~这将通过在 using 语句末尾调用析构函数来显式释放内存。~~

不幸的是，上面的内容似乎不正确！取而代之的是，您可以尝试使用帮助函数返回适当大小的数组（大于大小的 2 的最接近幂），如果它不存在，则创建它。这样，您将只有对数个数组。如果您希望它是线程安全的，尽管您需要遇到更多麻烦。

它可能看起来像这样：（使用[算法中的 pow2roundup 来查找大于或等于给定值的 2 的最小幂](https://stackoverflow.com/questions/364985/algorithm-for-finding-the-smallest-power-of-two-thats-greater-or-equal-to-a-giv)）

```
private static Dictionary<int,double[]> scratchArrays = new Dictionary<int,double[]>();
/// Round up to next higher power of 2 (return x if it's already a power of 2).
public static int Pow2RoundUp (int x)
{
    if (x < 0)
        return 0;
    --x;
    x |= x >> 1;
    x |= x >> 2;
    x |= x >> 4;
    x |= x >> 8;
    x |= x >> 16;
    return x+1;
}
private static double[] GetScratchArray(int size)
{
    int pow2 = Pow2RoundUp(size);
    if (!scratchArrays.ContainsKey(pow2))
    {
        scratchArrays.Add(pow2, new double[pow2]);
    }
    return scratchArrays[pow2];
} 
```

编辑：线程安全版本：这仍然会有垃圾收集的东西，但它将是特定于线程的，并且开销应该少得多。

```
[ThreadStatic]
private static Dictionary<int,double[]> _scratchArrays;

private static Dictionary<int,double[]> scratchArrays
{
    get
    {
        if (_scratchArrays == null)
        {
            _scratchArrays = new Dictionary<int,double[]>();
        }
        return _scratchArrays;
    }
}

/// Round up to next higher power of 2 (return x if it's already a power of 2).
public static int Pow2RoundUp (int x)
{
    if (x < 0)
        return 0;
    --x;
    x |= x >> 1;
    x |= x >> 2;
    x |= x >> 4;
    x |= x >> 8;
    x |= x >> 16;
    return x+1;
}
private static double[] GetScratchArray(int size)
{
    int pow2 = Pow2RoundUp(size);
    if (!scratchArrays.ContainsKey(pow2))
    {
        scratchArrays.Add(pow2, new double[pow2]);
    }
    return scratchArrays[pow2];
} 
```

# jquery - 遍历包含特定后代节点的父元素

> ID：15726216
> 
> 赞同：0
> 
> 时间：2013-03-31T04:05:54.000
> 
> 标签：jquery, xpath, jquery-selectors

我只想遍历包含特定元素作为后代节点的父元素。

例如：

```
<div class="field">
   <input type="text" />
</div>
<div class="field">
   <input type="button" />
</div>
<div class="field">
   <input type="text" />
</div> 
```

我知道使用xpath，它可以通过使用来完成`div[@class = 'field' and input[@type = 'text']]`

使用 jQuery，我想使用类似于`div.field[input[type = 'text']]`.

我知道的最接近的选项是`div.field > input[type = 'text']`，但这样我将通过输入而不是 div 进行迭代。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T04:07:43.577

您可以使用 jQuery 的`:has()`伪选择器：

```
$('.field:has(.text)') 
```

由于它是一个非标准选择器，因此与常规选择器相比它会很慢，因此如果您要迭代大量元素，请记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:13:35.010

您可以使用 .parents()

```
$('input[type=text]').parents('.field').each(function(){
//do your stuff
}) 
```

示例 - [http://jsfiddle.net/dYKRz/](http://jsfiddle.net/dYKRz/)

# java - 回复邮件格式库或方法？

> ID：15726218
> 
> 赞同：0
> 
> 时间：2013-03-31T04:06:35.607
> 
> 标签：java, email, jakarta-mail

我正在用 Java 编写电子邮件自动回复器，我希望能够创建回复格式，就像您在 Yahoo Mail、Gmail 等上单击回复时一样，将日期、姓名等放在原始消息的顶部。有什么我可以使用的，还是我必须从头开始编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:39:33.617

我认为您可以使用 Java 模板库（例如 Freemarker/Velocity）来编写您的电子邮件模板，并通过在运行时将数据/来自名称等作为参数传递给模板来生成真实内容。你可以参考这个问题：

[使用 Velocity 或 FreeMarker 创建电子邮件模板](https://stackoverflow.com/questions/5720706/use-velocity-or-freemarker-for-creating-e-mail-templates)

# windows - 为什么 Cygwin 拒绝执行 nbtstat？

> ID：15726220
> 
> 赞同：0
> 
> 时间：2013-03-31T04:06:42.873
> 
> 标签：windows, cygwin

我在 Windows 7 上安装了 cygwin。Cygwin 将运行`C:\Windows\System32\`我尝试过的所有其他命令，例如`ipconfig` **除了** `nbtstat`.

`nbtstat`按预期工作`cmd.exe`。我什至尝试以管理员身份运行 Cygwin shell，但它仍然无法执行`nbtstat`。它甚至不会出现在`ls -l`.

为什么cygwin拒绝执行`nbtstat`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:30:26.567

我的通灵调试能力告诉我，您正在 64 位版本的 Windows 上运行 32 位版本的 Cygwin。

尝试运行`/cygdrive/c/Windows/sysnative/nbtstat.exe`。

# c - fclose(in) 分段错误

> ID：15726223
> 
> 赞同：1
> 
> 时间：2013-03-31T04:07:13.670
> 
> 标签：c

我已将带有注释的程序简化为：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) 
{
    FILE * in;
    in = fopen(argv[1], "r");
    fclose(in);
    fprintf(stderr, "clear **** \n");
    return(0);
 } 
```

但它仍然存在段错误。输出是：

```
clear
Segmentation Fault 
```

我知道是 fclose(in) 导致了问题，我只是不知道为什么。无论出于何种原因， fclose(out) 都可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:10:51.473

您应该做的第一件事是：

```
in = fopen(argv[1], "r");
if (in == NULL)
    printf ("Could not open file '%s'\n" argv[1]);
else
    fclose(in); 
```

在您的原始代码中无法保证`fopen`实际工作，在这种情况下它将返回 NULL 并且`fclose`不会定义行为。

# php - 如何在PHP中获得下个月？

> ID：15726228
> 
> 赞同：0
> 
> 时间：2013-03-31T04:08:03.517
> 
> 标签：php, date, strtotime

我目前正在使用以下代码来计算下个月：

```
$nextMonth = date("m",strtotime("+1 months")); 
```

如果当前日期是 3 月 31 日 (03)，则此代码给我“05”，这实际上距当前日期 2 个月。我希望它改为返回四月 (04)。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:20:41.093

试试这个怎么样：

```
$d = new DateTime(date("Y-m-d"));
$d->modify( 'first day of next month' );
echo $d->format( 'F' ), "\n"; 
```

丁斯

# ios - 项目名称必须与 iTunes Connect 应用名称匹配？

> ID：15726229
> 
> 赞同：2
> 
> 时间：2013-03-31T04:08:13.797
> 
> 标签：ios, xcode

我的应用程序名为 Easy Calculator。在 iTunes Connect 中，当我创建我的应用程序配置文件时，应用程序名称是否必须与我在 Xcode 中的项目名称相匹配？如果该名称已经存在于 App Store 的其他地方怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:19:39.327

您在 iTunes Connect 中的应用名称不需要与您在 Xcode 中的项目名称相匹配。我从经验中知道这一点 -**我有一个名为 Physics 的应用程序！Pro 在 Xcode 中的项目名称为“PhysicsAppBuild2Primary”。**当然，这是一个极端的例子，但它起到了说明作用。

iTunes 和 Xcode 之间唯一需要匹配的是您的 Bundle ID。通常这遵循反向 DNS 样式 -`com.erwaysoftware.physicspro`将是我的 Bundle ID（有时称为 App ID）。App ID 实际上与捆绑包 ID 不同 - 但这是另一个主题。我希望我已经满意地回答了你的问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T04:11:01.423

不可以。捆绑包 ID 应该匹配。它们通常类似于`com.youcompany.awesomeapp`.

# java - 使用引用（临时变量）来操作 LinkedList？

> ID：15726233
> 
> 赞同：2
> 
> 时间：2013-03-31T04:09:35.007
> 
> 标签：java, linked-list, nodes

```
public void deleteItem(int target) 
{
    int index = 0;
    CarNode item = head;

    while(item != null)
    {

        CarNode next = (item.node).node;
        CarNode previous = item;

        if (index == target)
        {

            previous.setNode(next);

        }

    item = element.node
    index++;

    }
} 
```

是的，我不知道我是否理解得很好，但是有人告诉我，您可以使用引用，而不必直接引用链表的对象来对链表执行更改。

一个节点包含 Car 对象和 LinkedList 的另一个元素的节点，对，所以引用基本上是一个克隆，指向与原始对象相同的对象，但是为什么原始被忽略并且引用优​​先于原来我们修改引用的节点的时候？抱歉，这对我来说没有任何意义，我已经为此挠头好几个小时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:46:41.787

代码应如下所示：

```
public void deleteItem(int target) 
{
    int index = 0;
    CarNode item = head;
    CarNode prev = null;

    while(item != null)
    {
        if (index == target) {
            if (prev == null) {
                head = item.getNode();
                return; // We've removed the target.
            } else {
                prev.setNode(item.getNode());
                return; // We've removed the target.
            }
        }
        prev = item;
        item = item.getNode();
        index++;
    }
} 
```

所以让我们分解一下：

```
int index = 0;
CarNode item = head;
CarNode prev = null; 
```

我们需要两个变量：一个存储我们正在查看的元素，另一个存储前一个元素（一旦我们删除一个元素，我们将使用它来重新连接列表）。首先，我们的当前是头部，而我们的前一个不存在。`index`当我们达到目标时会通知我们。

```
while(item != null) 
```

我们想要迭代直到我们到达列表的末尾，由一个`null`节点标记。

```
if (index == target) {
    if (prev == null) {
        head = item.getNode();
        return; // We've removed the target.
    } else {
        prev.setNode(item.getNode());
        return; // We've removed the target.
    }
} 
```

如果我们找到了目标，我们将其移除。如果previous 为null，那么目标是头部，所以我们将头部移动到第二个元素。否则，我们将前一个节点的引用设置为当前节点的引用，这会将当前节点从列表中删除。一旦我们移除目标，我们就完成了，所以我们返回。

```
prev = item;
item = item.getNode();
index++; 
```

更新先前和当前节点。两者都向前移动一个节点。索引递增。

一个图解的例子怎么样：

取一个大小为 3 的列表。它看起来像这样：

![1](https://i.stack.imgur.com/wIi3B.png)

我们现在调用`list.deleteItem(1);`This 实例化一个`prev`和一个`next`节点。`next`指向第一个节点，并且`prev`为空。

![2](https://i.stack.imgur.com/WL7Ja.png)

我们的目标是 1，所以我们移动到下一个节点。现在`prev`指向以前`next`指向的对象，并`next`指向列表中的第二个对象（我们要删除的对象）。

![3](https://i.stack.imgur.com/8lhIs.png)

我们通过将节点的引用设置为`prev`节点的引用来删除它`next`。

![4](https://i.stack.imgur.com/nuy4p.png)

当我们从该方法返回时，Java 垃圾收集完成了它的工作，剩下的就是：

![5](https://i.stack.imgur.com/oXuj2.png)

多田！节点从列表中删除！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T04:50:17.723

```
public void deleteItem(int target) 
{
    int index = 0;
    CarNode item = head;

    CarNode next = null;
    CarNode previous = null;

    // stop when the linked-list ends
    while(item != null)
    {
        // the tail has no next node
        if (item.node != null)
            next = item.node.node;
        else
            next = null;

        // if targetIndex exist, remove it
        //     "logically" from the linekd-list
        if (index == target)
        {
            previous.setNode(next);
            break;
        }

        // today is tomorrow's yesterday
        previous = item;
        item = item.node;
        index++;

    }
} 
```

# c# - 查找重复的字符索引

> ID：15726235
> 
> 赞同：1
> 
> 时间：2013-03-31T04:09:52.123
> 
> 标签：c#

我真的不擅长解释事情，但我会尽力而为。

我正在制作一个小程序，可以在您键入时将一个单词转换为另一个单词。键入的每个字母都会经过这部分代码，根据整个单词的索引位置将其更改为不同的字母。

我的问题是，当有重复的字母时，重复的字母不会根据它们在单词中的位置而改变，而是根据第一次出现而改变。

例如，这组成了单词“bacca”。如果你把它放在代码中，它应该改为“vrwiy”，但改为“vrwwr”。我也知道为什么会这样。这是因为 switch 语句循环遍历需要转换的单词。但是，我不知道如何根据每个字符在字符串索引中的位置来更改每个字符。我认为 LastIndexOf() 方法可能会起作用，但它只是颠倒了顺序。所以如果我输入字母“a”，它会输出为“n”，但如果我输入“aa”，它会将第一个“a”切换为“r”，因为第二个在 IndexOf 1 get 更改为“r”。

```
private void inputTbox_TextChanged(object sender, EventArgs e)
{
    List<string> rawZnWordList = new List<string>();
    foreach (char a in inputTextBox.Text) 
    {
        switch (inputTextBox.Text.IndexOf(a)) 
        {
            case 0: 
                switch (a) 
                {
                    case 'a':
                        rawZnWordList.Add("n");
                        continue;
                    case 'b':
                        rawZnWordList.Add("v");
                        continue;
                    case 'c':
                        rawZnWordList.Add("a");
                        continue;
                    default:
                        break;
                }

                continue;
            case 1:
                switch (a)
                {
                    case 'a':
                        rawZnWordList.Add("r");
                        continue;
                    case 'b':
                        rawZnWordList.Add("x");
                        continue;
                    case 'c':
                        rawZnWordList.Add("z");
                        continue;
                    default:
                        break;
                }
                continue;
            case 2:
                switch (a)
                {
                    case 'a':
                        rawZnWordList.Add("t");
                        continue;
                    case 'b':
                        rawZnWordList.Add("l");
                        continue;
                    case 'c':
                        rawZnWordList.Add("w");
                        continue;
                    default:
                        continue;
                }
                continue;
            case 3:
                switch (a) 
                {
                    case 'a':
                        rawZnWordList.Add("u");
                        continue;
                    case 'b':
                        rawZnWordList.Add("i");
                        continue;
                    case 'c':
                        rawZnWordList.Add("o");
                        continue;
                    default:
                        break;
                }
                continue;
            case 4:
                switch (a)
                {
                    case 'a':
                        rawZnWordList.Add("y");
                        continue;
                    case 'b':
                        rawZnWordList.Add("m");
                        continue;
                    case 'c':
                        rawZnWordList.Add("d");
                        continue;
                    default:
                        break;
                }
                continue;
            default:
                break;
        }
    }
    string finalZnWord = string.Join("", rawZnWordList.ToArray()); 
    outputTextBox.Text = finalZnWord;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:29:21.063

您应该尝试使用`for`循环，如下所示：

```
for (int i = 0; i < inputTextBox.Text.Length; i++) 
    {
        char a = inputTextBox.Text[i];
        switch (i) 
        {
            case 0: 
                switch (a) 
                ... 
```

希望这可以帮助 ;）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:25:55.210

您需要跟踪您内部的索引，`foreach`而不是使用`.IndexOf`. 您也可以使用常规`for`循环而不是 a，`foreach`但这种方式对您的代码的更改很小。

```
`private void inputTbox_TextChanged(object sender, EventArgs e)
{
    List rawZnWordList = new List();
    int index = 0;
    foreach (char a in inputTextBox.Text) 
    {
        switch (index) 
        {
            case 0: 
                switch (a) 
                {
                    case 'a':
                        rawZnWordList.Add("n");
                        continue;
                    case 'b':
                        rawZnWordList.Add("v");
                        continue;
                    case 'c':
                        rawZnWordList.Add("a");
                        continue;
                    default:
                        break;
                }
                continue;
            case 1:
                switch (a)
                {
                    case 'a':
                        rawZnWordList.Add("r");
                        continue;
                    case 'b':
                        rawZnWordList.Add("x");
                        continue;
                    case 'c':
                        rawZnWordList.Add("z");
                        continue;
                    default:
                        break;
                }
                continue;
            case 2:
                switch (a)
                {
                    case 'a':
                        rawZnWordList.Add("t");
                        continue;
                    case 'b':
                        rawZnWordList.Add("l");
                        continue;
                    case 'c':
                        rawZnWordList.Add("w");
                        continue;
                    default:
                        continue;
                }
                continue;
            case 3:
                switch (a) 
                {
                    case 'a':
                        rawZnWordList.Add("u");
                        continue;
                    case 'b':
                        rawZnWordList.Add("i");
                        continue;
                    case 'c':
                        rawZnWordList.Add("o");
                        continue;
                    default:
                        break;
                }
                continue;
            case 4:
                switch (a)
                {
                    case 'a':
                        rawZnWordList.Add("y");
                        continue;
                    case 'b':
                        rawZnWordList.Add("m");
                        continue;
                    case 'c':
                        rawZnWordList.Add("d");
                        continue;
                    default:
                        break;
                }
                continue;
            default:
                break;
        }
        index++;
    }
    string finalZnWord = string.Join("", rawZnWordList.ToArray()); 
    outputTextBox.Text = finalZnWord;
}`
```

* * *

 `## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:25:00.060

我认为这做同样的事情并且更具可读性。当然用你自己的值替换字母环。我只去了5个字符。我猜你会想要更多。

```
//replacement letter rings
char[][] aRep = { 
    "xfhygaodsekzcpubitlvnjqmrw".ToCharArray(),
    "wqtnsepkbalmzyxvordhjgifcu".ToCharArray(),
    "nyxgmcibplovkwrszaehftqjud".ToCharArray(),
    "soqjhpybuwfxvartkzginemdcl".ToCharArray(),
    "pldquhegkaomcnjrfxiysvtbwz".ToCharArray(),
};
private string newText(string inVal)
{
    char[] ia = inVal.ToCharArray(); //in array
    int l = ia.Length;
    char[] oa = new char[l]; //out array
    for (int i = 0; i < l; i++)
        oa[i] = aRep[i][(int)ia[i]-97]; //lowercase starts at char97
    return new string(oa);
} 
```

这也是我用来生成戒指的代码：

```
//generate random letter rings
//char[] ascii = "abcdefghijklmnopqrstuvwxyz".ToCharArray();
//for (int i = 0; i < 8; i++)
//  new string(ascii.OrderBy (x => Guid.NewGuid() ).ToArray()).Dump(); 
```

我做了一些非常简单的测试，这似乎比原来的方法快了很多，更重要的是（对我来说）它更具可读性并且更容易看到你的替换字母序列。我认为还有一些优化要做，但我认为这是一个好的开始。只需在“更改时”期间用您的文字调用它。`

# php - 使用 php 和谷歌地图

> ID：15726236
> 
> 赞同：0
> 
> 时间：2013-03-31T04:09:57.007
> 
> 标签：php, html, mysql, google-maps

我只是在学习如何将谷歌地图与我的数据库中的信息一起使用，我遇到了一些麻烦。我可以毫无问题地显示地图，并且我的数据库中的信息在 php 页面中被正确提取，但我似乎无法在我的 html 页面中调用该信息。我试图让小图标出现在数据库中每个位置的地图上，但到目前为止，除了谷歌地图框之外什么都没有出现。任何帮助将不胜感激！

***谷歌地图.php***

```
<?
$username="myUsername";
$password="myPassword";
$database="myDatabase"; 
?> 

<?php

function parseToXML($htmlStr) 
{ 
$xmlStr=str_replace('<','&lt;',$htmlStr); 
$xmlStr=str_replace('>','&gt;',$xmlStr); 
$xmlStr=str_replace('"','&quot;',$xmlStr); 
$xmlStr=str_replace("'",'&#39;',$xmlStr); 
$xmlStr=str_replace("&",'&amp;',$xmlStr); 
return $xmlStr; 
} 

// Opens a connection to a MySQL server
$connection=mysql_connect (localhost, $username, $password);
if (!$connection) {
die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
die ('Can\'t use db : ' . mysql_error());
}

// Select all the rows in the markers table
$query = "SELECT * FROM markers";
$result = mysql_query($query);
if (!$result) {
die('Invalid query: ' . mysql_error());
} 

// Start XML file, echo parent node

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
// ADD TO XML DOCUMENT NODE
echo 'marker ';
echo 'name="' . parseToXML($row['name']) . '" ';
echo 'address="' . parseToXML($row['address']) . '" ';
echo 'lat="' . $row['lat'] . '" ';
echo 'lng="' . $row['lng'] . '" ';
echo 'type="' . $row['type'] . '" ';
echo '/>';
}
?> 
```

**googleMap.html**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Google Maps AJAX + mySQL/PHP Example</title>
<script src="http://maps.google.com/maps/api/js?sensor=false"
        type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[

var customIcons = {
  restaurant: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  bar: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(47.6145, -122.3418),
    zoom: 13,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  downloadUrl(googleMap.php, function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}
</script>
</head>

<body onload="load()">
<div id="map" style="width: 500px; height: 300px"></div>
/body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:16:32.397

在您的 PHP 文件中，您正在回显每一行。但是标记不正确。它应该是一个适当的 xml 节点，您只显示一些文本。

```
header("Content-type: text/xml");

// Start XML file, create parent node
$doc = domxml_new_doc("1.0");
$node = $doc->create_element("markers");
$parnode = $doc->append_child($node);

// Iterate through the rows, adding XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  // ADD TO XML DOCUMENT NODE
  $node = $doc->create_element("marker");
  $newnode = $parnode->append_child($node);

  $newnode->set_attribute("name", $row['name']);
  $newnode->set_attribute("address", $row['address']);
  $newnode->set_attribute("lat", $row['lat']);
  $newnode->set_attribute("lng", $row['lng']);
  $newnode->set_attribute("type", $row['type']);
} 
```

请参阅此链接：[https ://developers.google.com/maps/articles/phpsqlajax_v3#outputxml](https://developers.google.com/maps/articles/phpsqlajax_v3#outputxml)

# android - 我更改了我的包名称，但它只更改了 gen 文件夹名称，而不是 src

> ID：15726240
> 
> 赞同：0
> 
> 时间：2013-03-31T04:10:53.580
> 
> 标签：android, package

我更改了我的包名称，但它只更改了 gen 文件夹名称，而不是 src。当我去更改 src 文件夹时，它警告我已经有一个同名的文件夹......

编辑：我发现我的清单文件中有错误！修复了这些，一切都很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:48:30.513

是的，这是我讨厌日食的许多事情之一......你应该重新启动日食，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T12:47:39.603

真正的答案是我的清单文件中存在问题，导致所有内容都无法编译。如果您看到看似不合理的疯狂错误，请尝试此解决方案。您的清单文件可能有问题。对我来说，更改包名后清单中的包名错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:45:20.300

尝试做一个项目>清理。如果重新启动没有，这在大多数情况下会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-22T08:05:21.323

Eclipse 是一个非常糟糕的实用程序。无论如何，您可以重新开始整个事情或重新开始。

# grails - Jetty 8.1中的Grails请求对象null

> ID：15726242
> 
> 赞同：0
> 
> 时间：2013-03-31T04:11:14.623
> 
> 标签：grails, groovy, jetty, httprequest

以下代码使用 Eclipse 的嵌入式 tcServer 2.7 作为 Web 容器在 Grails 2.0.4 和 Eclipse STS 3.2 上按预期工作......

```
class TestController {

    def service() {
      println request.request.getRequestURL()
      //render response here...
    } 
```

对于 的客户端请求`http://svr1:8080/testapp/test/node1`，上面的代码打印完整的请求 URL，`http://svr1:8080/testapp/test/node1`。

我们创建了一个 WAR 并将其部署到 Jetty 8.1.10，但发现它`request.request`返回 null，所以上面的代码失败并返回一个空指针。我们尝试使用`request.getRequestURL()`，但它返回一个包含 grails 调度语法的 URL，因此它与我们需要的原始客户端请求 url 不匹配。

`request.getServerName()`作为一种解决方法，我们使用,`request.getServerPort()`和`request.getContextPath()`,手动构建了大部分 URL `http://svr1:8080/testapp`，但仍然忽略了 uri 部分 , `/test/node1`。我们假设这个问题可能归因于 Jetty 的 Servlet API 实现，但如果是这样的话，肯定有人会在我们之前发现这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:47:13.193

找到了一个似乎适用于 tcServer 和 Jetty 的解决[方法](https://stackoverflow.com/a/8611398/791406)。我们手动构建基本 URL，然后使用此实用程序获取剩余部分。

# django - 使用 Django 模板化电子邮件的错误

> ID：15726245
> 
> 赞同：0
> 
> 时间：2013-03-31T04:11:49.033
> 
> 标签：django, django-email

我正在尝试使用 Django-Templated-Email (0.4.7) 发送电子邮件，但我不断收到以下错误：

```
TypeError at /intake/basic/
send_templated_mail() takes at least 4 arguments (4 given)
Request Method: POST
Request URL:    http://127.0.0.1:8000/intake/
Django Version: 1.5.1
Exception Type: TypeError
Exception Value:    
send_templated_mail() takes at least 4 arguments (4 given) 
```

下面是我从views.py中摘录的代码：

```
from templated_email import send_templated_mail

class IntakeFormView(CreateView):
"""
Creates intake form request
"""
model = Intake
form_class = IntakeForm
template_name = 'intake.html'
success_url = '/intake/sent/'

def form_valid(self, form):
    # Save form to database
    self.object = form.save()

    from_email = 'from@fakemail.com'
    recipient_list = ['get@fakemail.com']

    send_templated_mail(context=
        {'client': self.object.client, 
         'type': self.object.type,     
         'issue': self.object.issue},
    template_name='intake',
    to=['to@fakemail.com'],
    bcc=recipient_list,
    from_email=from_email)

    return HttpResponseRedirect(self.get_success_url()) 
```

下面是intake.email 模板文件：

```
{% block subject %}
CLIENT ALERT: {{type}}
{% endblock %}

{% block plain %}

{{client}} needs help re {{issue}}.

{% endblock %} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:17:59.230

`send_templated_email`没有`to`作为关键字参数。您需要使用`recipient_list`：

```
send_templated_email(
    recipient_list = ['to@fakemail.com']
    # your other arguments
) 
```

# javascript - 锚链接到外部站点并避免使用 javascript 显示为引用站点或流量源

> ID：15726247
> 
> 赞同：0
> 
> 时间：2013-03-31T04:11:55.660
> 
> 标签：javascript, html, seo, anchor

我在我的网站中添加引用外部网站的锚链接。

```
<a href="externalwebsite.com"  rel="nofollow">external website</a> 
```

这使我的网站显示为引荐网站和/或可能是这些外部网站的流量来源。一些网站管理员不喜欢这样（他们说这会影响他们的 SEO 工作）并要求我删除链接。我想避免这种情况。

有 Javascript 的任何解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:17:58.413

您可以尝试使用类创建一个空链接，并让脚本运行 onload 以正确创建这些链接。

以下文章复制自：[http ://www.seomofo.com/ethics/using-javascript-to-hide-links.html](http://www.seomofo.com/ethics/using-javascript-to-hide-links.html)

```
1\. Remove affiliate links from your pages’ HTML code.
2\. If it’s a text link embedded in page content, then just remove the <a> tags
    and leave the anchor text there (as plain text).
3\. If it’s an image link, remove the <a> tags AND the <img> tag.
4\. Replace the <a> tags with <span> tags, and assign a class name to them
    (e.g. <span class="affiliate">).
5\. Write a JavaScript function that looks for <span> elements that contain 
    class="affiliate" and replaces them with your affiliate links. 
    (Yes, the ones you removed in Step 1).
6\. Put the JavaScript function in an external .js file and block Google from \
    accessing it (using robots.txt).
7\. Attach the JavaScript function to the onload event, which means users’ web 
     browsers won’t call the function until after the page is finished loading.
8\. Googlebot–and users without JavaScript enabled–can’t call the JavaScript 
     function, so your affiliate links are never inserted into the page content.
9\. Only users with JavaScript-enabled browsers will see your affiliate links. 
    Everything/everyone else sees plain text instead of affiliate text links, 
    and an empty space instead of affiliate image links. 
```

# c - 如何使用 C 释放二叉树？

> ID：15726249
> 
> 赞同：1
> 
> 时间：2013-03-31T04:11:59.833
> 
> 标签：c, memory-management

我写了一个二叉搜索树，它工作得很好，但我不确定我的程序是否释放了所有的内存。

这是我对树节点的定义

```
typedef struct node  {
    int val;
    struct node *left, *right;
} nodeOfTree; 
```

我写了这个函数来输出结果并释放所有节点，似乎答案是正确的但内存没有释放。

```
void outputAndDestroyTree(nodeOfTree *root)  {
    if (!root) {return;}
    outputAndDestroyTree(root->left);
    printf("%d ", root->val);
    outputAndDestroyTree(root->right);
    free(root);      // I free this pointer, but after doing that, I can still access this  pointer in the main() function
} 
```

这是否意味着我无法在递归函数中释放一段记忆？谢谢~~~~~

更新：谢谢大家~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T04:19:14.360

您的代码似乎没问题，但释放分配的内存不会神奇地将其引用指针设置为`NULL`. 由于您没有为指针设置新值，因此旧地址将保持不变。也许你甚至可以在不崩溃的情况下读取它，尽管它是未定义的行为。

如果您希望`NULL`在释放内存后将其设置为，那么就这样做。打电话`outputAndDestroyTree(root->left);`然后做`root->left = NULL;`。

# cocos2d-iphone - 如何给 CCSprite 一个指定的 alpha 通道？

> ID：15726250
> 
> 赞同：1
> 
> 时间：2013-03-31T04:12:01.810
> 
> 标签：cocos2d-iphone, opengl-es-2.0, alphablending

我想在 Cocos2D 中创建一个画笔。我有一个 png 文件，它指定图像的 alpha 通道值。（只有一个通道）我想将 alpha 值赋予 ccsprite 的纯色纹理。并利用 ccsprite 单元作为 pan.在屏幕上绘制。

我如何在编程中做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-29T02:23:09.597

我也必须为我的项目这样做。我想出了这个主意。（在 cocos2d-x 中）

1.  将禁用 rgb 但启用 alpha 的“alpha sprite”（通过 glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_TRUE)）渲染到 CCRenderTexture。

2.  使用禁用但启用 rgb 渲染您的实际精灵（通过 glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_FALSE)）

3.  现在你有来自实际精灵的rgb和来自'alpha sprite'的rgb，然后你将渲染纹理的精灵的alpha混合属性设置为{GL_SRC_ALPHA，GL_ONE_MINUS_SRC_ALPHA}。

4.  现在您可以添加渲染纹理并将其绘制到场景中。

我已经尝试过了，这对我的项目有用。希望这对你也有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:41:49.557

```
sprite.opacity = 100; 
```

opacity range is 0-255\. You can't change alpha of a texture and all sprites using the texture at once, unless you write a custom shader.

# netbeans - netbeans Web 应用程序中的文本文件

> ID：15726252
> 
> 赞同：1
> 
> 时间：2013-03-31T04:12:19.413
> 
> 标签：netbeans, web

请帮助我...我想将我使用netbeans的java类填充到文本文件中的form.jsp信息存储起来。所以我的问题是在netbeans中存储文本文件的位置？我正在使用 apache tomcat 运行我的 Web 应用程序

# php - 二维数组返回具有特定值的 null

> ID：15726253
> 
> 赞同：0
> 
> 时间：2013-03-31T04:12:37.757
> 
> 标签：php, json

我目前正在尝试使用 json_decode 用数据填充 2D 数组。但是，它似乎加载正确，但是当我尝试获取特定值时，即使不是，它也会返回 null。

我的 2dtestarray.php：

```
<?php
class testarray {

public static $listConfigs;

public function __construct() {
    $this->listConfigs = json_decode(file_get_contents('configuration.json'), true);
}

public static function getValue($list, $property) {
    return self::$listConfigs[$list][$property];
}

public function save() {
    file_put_contents('configuration.json',json_encode($listConfigs));
}
}
?> 
```

我的testload.php：

```
<?php
    require_once("2darraytest.php");
    $ta = new testarray();

    var_dump($ta->getValue('main', 'canView'));

    var_dump($ta->listConfigs);

    $test = json_decode(file_get_contents('configuration.json'), true);

    var_dump($test);

    $mainList = $test['main']['canView'];
    echo $mainList;
?> 
```

我的配置.json：

```
{"main":{"canView":"true"},"secondary":{"canView":"false"}} 
```

testload.php 的输出：

```
NULL 
array(2) { ["main"]=> array(1) { ["canView"]=> string(4) "true" } ["secondary"]=> array(1) { ["canView"]=> string(5) "false" } } 
array(2) { ["main"]=> array(1) { ["canView"]=> string(4) "true" } ["secondary"]=> array(1) { ["canView"]=> string(5) "false" } } 
true 
```

最后，我的问题，这就是为什么是“var_dump($ta->getValue('main', 'canView'));” 返回 null 而不是 true，例如 "$mainList = $test['main']['canView']; echo $mainList;" 做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:17:38.943

您正在访问一个静态属性`getValue`：

```
self::$listConfigs[$list][$property] 
```

但访问`$ta->listConfigs`. 构造函数将值设置到实例属性中。

```
$this->listConfigs = json_decode(file_get_contents('configuration.json'), true); 
```

因此，这会导致实例同时访问静态`self::$listConfigs`属性和实例属性`$this->listConfigs`。

尝试更改构造函数以使用静态属性。

```
public function __construct() {
    self::$listConfigs = json_decode(file_get_contents('configuration.json'), true);
} 
```

# autohotkey - 如何优化此代码以与其他热键一起使用？

> ID：15726255
> 
> 赞同：0
> 
> 时间：2013-03-31T04:12:46.213
> 
> 标签：autohotkey, autologin

我创建了这个脚本来自动登录游戏。它工作正常，但有多个帐户，（^！2:: %acc2% %pw2%.. 等等）。我不想在每个热键下单独复制代码，而是想将它们组合起来，但我不知道如何。

```
;Autologin #1.
^!1::
ImageSearch,ExistUser_X,ExistUser_Y,0,0,A_ScreenWidth,A_ScreenHeight,%A_TEMP%\ExistUser.bmp
If !ErrorLevel
{
    Click,%ExistUser_X%,%ExistUser_Y%
    ImageSearch,Login_X,Login_Y,0,0,A_ScreenWidth,A_ScreenHeight,%A_TEMP%\Login.bmp
    Click,%Login_X%,%Login_Y%
    If !ErrorLevel
        Send,%acc1%{Tab}%pw1%{Enter}
    Else
        MsgBox,The login page is not visible.
    Return
}
Else If ErrorLevel=1
{
    ImageSearch,Login_X,Login_Y,0,0,A_ScreenWidth,A_ScreenHeight,%A_TEMP%\Login.bmp
    Click,%Login_X%,%Login_Y%
    If !ErrorLevel
        Send,%acc1%{Tab}%pw1%{Enter}
    Else
    MsgBox,The login page is not visible.
    Return
}
Else
MsgBox,The login page is not visible.
Return 
```

***对它的作用有点失望；***当您按下热键时，它会搜索一个按钮 (ExistUser.bmp)，如果它在那里，请单击它。然后它将进入真正的登录页面（并确保它是实际页面），它将发送帐户详细信息（%acc1% 和 %pw1%）。如果用户手动单击了 ExistUser 按钮，它将检查登录页面然后发送详细信息。如果它找不到任何一个页面，它会吐出一个错误 MsgBox。

感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:25:14.663

为什么不将各种帐户和密码存储在二维数组中并在循环中运行您的代码。

像这样的东西：

```
Loop, read, %A_ScriptDir%\Login.txt ; in username{Tab}Password{NewLine} format
{
    RecordNumber:=A_Index
    Loop, parse, A_LoopReadLine, %A_Tab% ; uses tab to separate items
    {
        Array_%RecordNumber%_%A_Index% := A_LoopField
    }
}
MaxRecords:=RecordNumber

Loop, %MaxRecords% 
{
        acc1:=Array_%A_Index%_1
        pw1:=Array_%A_Index%_2
        Run your code here
}
Return 
```

添加更多 {Tab} 分隔的项目，例如文本文件的唯一按钮位置会自动存储在数组中，如 Array_%A_Index% *3、Array* %A_Index%_4 等，并可在循环代码中使用。

或者，如果您想使用`Ctrl`+ `Alt`+1 、`Ctrl`+ `Alt`+2 等启动它，请定义每个热键的 acc1 和 pw1 并运行代码。

```
;Autologin #1.
Return

^!1::
acc1=UserName
pw1=passwd
GoSub, MyScript
Return

^!2::
acc1=UserName2
pw1=passwd2
GoSub, MyScript
Return

MyScript:
ImageSearch,ExistUser_X,ExistUser_Y,0,0,A_ScreenWidth,A_ScreenHeight,%A_TEMP%\ExistUser.bmp
If !ErrorLevel
{
    Click,%ExistUser_X%,%ExistUser_Y%
    ImageSearch,Login_X,Login_Y,0,0,A_ScreenWidth,A_ScreenHeight,%A_TEMP%\Login.bmp
    Click,%Login_X%,%Login_Y%
    If !ErrorLevel
        Send,%acc1%{Tab}%pw1%{Enter}
    Else
        MsgBox,The login page is not visible.
    Return
}
Else If ErrorLevel=1
{
    ImageSearch,Login_X,Login_Y,0,0,A_ScreenWidth,A_ScreenHeight,%A_TEMP%\Login.bmp
    Click,%Login_X%,%Login_Y%
    If !ErrorLevel
        Send,%acc1%{Tab}%pw1%{Enter}
    Else
    MsgBox,The login page is not visible.
    Return
}
Else
MsgBox,The login page is not visible.
Return 
```

# python - PyModule_New 的用途和用法

> ID：15726256
> 
> 赞同：1
> 
> 时间：2013-03-31T04:13:19.000
> 
> 标签：python, c, python-module, python-c-api, cpython

`PyModule_New`从表面上看，C-API 函数`PyModule_NewObject`显然创建了一个新的模块对象。

[官方 Python 文档](http://docs.python.org/3/c-api/module.html#PyModule_New)提供了以下解释`PyModule_NewObject`：

> 返回一个**name**属性设置为 name 的新模块对象。只填写模块的**doc**和**name**属性；调用者负责提供**文件**属性。

`PyModule_New`做同样的事情，除了它接受一个 C 字符串 ( `char*`) 作为模块名称的参数，而不是一个`PyObject*`字符串。

好的，这很简单，但是...

我的问题是：**调用 API 函数有什么用`PyModule_NewObject`？**

当然，理论上这对于您想要动态创建新模块的情况来说会很棒。但问题是，实际上，在创建一个新的模块对象之后，对其有用的唯一方法是将对象（如方法、类、变量等）添加到模块的`__dict__`属性中。这样，模块的用户可以导入它并实际使用它。

问题是`__dict__`模块的属性是***只读的***：

```
>>> import re
>>> x = re
>>> re.__dict__ = { "foo" : "bar" }
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: readonly attribute 
```

所以，在实践中，就我所见，动态创建的模块真的没有办法做任何有用的事情。那么，C API 函数的目的是`PyModule_New`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:30:12.643

`PyModule_New`是模块对象的构造函数。`__new__`作为类的方法，它也暴露给纯 Python 代码`types.ModuleType`。

用户代码可能很少需要使用其中任何一个，因为您通常通过导入它们来获取模块。但是，Python 解释器使用的机制`PyModule_New`在请求导入时用于生成模块对象。

您可以[`import.c`在 Python 源代码](http://hg.python.org/cpython/file/225022955c65/Python/import.c#l624)中看到这一点：

```
/* Get the module object corresponding to a module name.
First check the modules dictionary if there's one there,
if not, create a new one and insert it in the modules dictionary.
Because the former action is most common, THIS DOES NOT RETURN A
'NEW' REFERENCE! */

PyImport_AddModule(const char *name)
{
    PyObject *modules = PyImport_GetModuleDict();
    PyObject *m;

    if ((m = PyDict_GetItemString(modules, name)) != NULL &&
        PyModule_Check(m))
        return m;
    m = PyModule_New(name);
    if (m == NULL)
        return NULL;
    if (PyDict_SetItemString(modules, name, m) != 0) {
        Py_DECREF(m);
        return NULL;
    }
    Py_DECREF(m); /* Yes, it still exists, in modules! */

    return m;
} 
```

至于如何在新的模块对象中设置值，您可以使用常规属性访问。在 Python 代码（而不是 C）中，这很简单：

```
import types

mymodule = types.ModuleType("mymodule")
mymodule.foo = "foo" 
```

请注意，除非您做一些额外的工作，否则无法将这种方式创建的模块导入其他任何地方。例如，您可以将其添加到模块查找字典中`sys.modules`：

```
import sys

sys.modules["mymodule"] = mymodule 
```

现在其他模块可以按名称导入`mymodule`。

# c# - C# SQlite 连接字符串格式

> ID：15726265
> 
> 赞同：13
> 
> 时间：2013-03-31T04:15:06.237
> 
> 标签：c#, .net, database, sqlite

我在这里有一个两部分的问题

1) 我从这里下载了 SQLite：[SQLite 网站](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki) ，对于 .NET 4.5，有一个“混合”模式版本和“非混合模式”版本。我怎么知道我应该使用哪一个？

建立连接时，我使用以下命令：

> sqlite_conn = new SQLiteConnection("Data Source=db.db;Version=3;New=True;Compress=True;");

2）我假设的“版本= 3”代表正在使用的 SQLite 版本。因此，如果我从上面的链接下载版本说 System.Data.SQLite 1.0.84.0 (3.7.15.2) 包，那么我应该将 Version=3 更改为 Version=3.7.15.2 吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-05T14:25:29.733

1.  你应该选择混合的。
2.  1.0.84.0 是`SQLite DLL`. `SQLite`我也用 in创建了一个应用程序`c#`，我的连接*字符串*如下所示：

    ```
    sqlite_conn = new SQLiteConnection("Data Source=C:\SQLITEDATABASES\SQLITEDB1.sqlite;Version=3;"); 
    ```

您使用的版本是`SQLite`版本 3，DLL 只是一个不同的版本，但适用于`SQLite`版本 3。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-08T01:15:05.283

以下是不同类型的 Sqlite 连接字符串

**基本的**

`Data Source=c:\mydb.db;Version=3;`

*此类库不支持版本 2。*

**内存数据库** SQLite 数据库通常存储在磁盘上，但数据库也可以存储在内存中。

`Data Source=:memory:;Version=3;New=True;`

**使用 UTF16**

`Data Source=c:\mydb.db;Version=3;UseUTF16Encoding=True;`

**有密码**

`Data Source=c:\mydb.db;Version=3;Password=myPassword;`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-19T19:12:21.460

SQLite 是用 C 编写的。对于 Windows，它以编译后的 32 位 (x86) .dll 的形式分发。这不能直接从 .NET 使用，因为它是本机代码，而 .NET 程序通常不喜欢与本机代码交互。它可以用一种叫做 COM Interop 的东西来完成，但在我手中这并不容易或漂亮。

在您的问题中，您引用了 System.Data.SQLite 的下载页面。这是一个与普通的旧 SQLite 略有不同的实现。它采用 C SQLite 并用 .NET 代码包装它 - 允许 .NET 程序使用 C 本机代码（万岁，其他人做了这项工作）。

当您将本机代码（C SQLite）和 .NET 代码（包装函数）放在一个程序集中时，这称为混合模式程序集，最初将所有内容放在一个文件中是有意义的。如果您正在开发或仅在您自己的机器上使用 SQLite，那么使用混合模式程序集就可以了。

但是，如果您想将应用程序分发给客户，则使用 64 位 Windows 时情况发生了变化。这是因为混合模式程序集只能在编译它们的体系结构上运行（一个善意的谎言，但对于这个答案来说是正确的）。从 System.Data.SQLite 版本 1.0.80.0 开始，强烈建议您分发： 1.）所有 .NET .dll System.Data.SQLite.dll，可以在 32 位或 64 位架构上运行）和 2 .) 32 位 .dll x86\SQLite.Interop.dll 和 3\. 64 位 .dll x64\SQLite.Interop.dll

所有 .NET 包装器（第 1 项）确定它在哪个架构上运行，并相应地选择 32 位或 64 位 .dll。

所有这些都在您引用的 System.Data.SQLite 下载页面上进行了描述，但我发现它令人困惑，所以我提供了我的摘要。

您在问题中注意到的版本差异也是由于 SQLite 和 System.Data.SQLite 之间的差异。

# php - mysql_fetch_array 问题

> ID：15726267
> 
> 赞同：0
> 
> 时间：2013-03-31T04:15:28.363
> 
> 标签：php, html, mysql, css, web

这是代码：

```
<select name="op1" id="op1" class="op1">
    <option value=""> -- please choose -- </option>
    <?php
        while($row = mysql_fetch_array($query)){
            $id = $row['id'];
            $name = $row['name'];
            echo '<option value="'.$id.'">'.$name.'</option>';
        }
    ?>
</select>
<br />
<select name="op2" id="op2" style="margin-top:20px" class="op2">
    <option value=""> -- please choose -- </option>
    <?php
        $query2 = mysql_query("SELECT * FROM cat2 WHERE cor = '$id' ORDER BY id ASC");
        while($row2 = mysql_fetch_array($query2)){
            $id2 = $row2['id'];
            $name2 = $row2['name'];
            echo '<option value="'.$id2.'">'.$name2.'</option>';
        }
    ?>
</select> 
```

我想要做的是从第一个循环中选择 $id 并在第二个循环查询中使用它，但由于管道可变，似乎无法让它工作，有人知道解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:19:29.083

```
<?php
 $ids=array();
    while($row = mysql_fetch_array($query)){
            $id = $row['id'];
        $ids[]=$id;
        $name = $row['name'];
        echo '<option value="'.$id.'">'.$name.'</option>';
    }
?> 
```

第二个php块；

```
<?php
foreach ($ids as $id) {
    $query2 = mysql_query("SELECT * FROM cat2 WHERE cor = '$id' ORDER BY id ASC");
    while($row2 = mysql_fetch_array($query2)){
        $id2 = $row2['id'];
        $name2 = $row2['name'];
        echo '<option value="'.$id2.'">'.$name2.'</option>';
    }
}
?> 
```

下一行代码使用 ajax。您必须创建一个名为 ajax.php 的新文件。您可以使用同一个文件，将 ajax.php 中的所有代码（添加出口；在末尾）放在文档的最顶部，然后将 ...load('ajax.php'... 更改为 ...加载（''...

如果将脚本放在文档的头部，则必须将其包装在 $(function(){}); 加载页面中的所有元素后运行。

未经测试的代码。但我们走了。如果我在某个地方错了，请任何人评论。

**AJAX**

```
 <select name="op1" id="op1" class="op1">
        <option value=""> -- please choose -- </option>
        <?php
            while($row = mysql_fetch_array($query)){
                $id = $row['id'];
                $name = $row['name'];
                echo '<option value="'.$id.'">'.$name.'</option>';
            }
        ?>
    </select>
    <br />
    <select name="op2" id="op2" style="margin-top:20px;" class="op2">

    </select>

 <script type="text/javascript">
      $('#op1').change(function() {
          $('#op2').load('ajax.php',{id:$(this).val()});
     });

 </script> 
```

ajax.php 文件：

```
 <?php if (isset($_REQUEST['id'])) {  $id = $_REQUEST['id']; ?>
      <option value=""> -- please choose -- </option>
        <?php
            $query2 = mysql_query("SELECT * FROM cat2 WHERE cor = '$id' ORDER BY id ASC");
            while($row2 = mysql_fetch_array($query2)){
                $id2 = $row2['id'];
                $name2 = $row2['name'];
                echo '<option value="'.$id2.'">'.$name2.'</option>';
            }
        } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:59:55.720

> 当用户在第一个选择框中选择第一个选项时，我希望它滑下第二个框（已经可以使用）但是我需要帮助根据用户的首选将数据从 mysql 数据库获取到第二个选择框。

对于您想要的，您需要：

*   通过 jQuery 收集选择的第一个选项（客户端）
*   [通过jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)或同义词（客户端）执行 AJAX 请求
*   为 AJAX 请求定义登录页面以收集信息（服务器端）
*   更新第二个选项集（客户端）

# java - java.lang.NoClassDefFoundError：使用 EJB 和 JasperReports

> ID：15726268
> 
> 赞同：0
> 
> 时间：2013-03-31T04:15:31.253
> 
> 标签：java, glassfish, jasper-reports, ejb, noclassdeffounderror

我需要为我的 EJB 应用程序使用*iReport 5.0*生成报告。

当我从前端调用报告时，它工作正常，但是当我尝试在我的 EJB 模块中调用相同的报告时，它给了我一个 no class def found 错误。

这就是我如何称呼我的报告：

```
Map parameters = new HashMap();

parameters.put("Emp_ID", empNo);
parameters.put("From", startDate);
parameters.put("To", endDate);

Connection conn = DB_Conn.getDataBasConnection();
JasperDesign jDesign = JRXmlLoader.load("C:\\SalesRep_Sales_Sub01.jrxml");

JasperReport jasperReport = JasperCompileManager.compileReport(jDesign);
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters,conn);
JasperViewer.viewReport(jasperPrint,false); 
```

这些是我使用的库：

*   jasperreports-4.5.0
*   commons-beanutils-1.8.2
*   commons-collections-3.2.1
*   commons-digester-1.7
*   commons-javaflow-20060411
*   公共日志记录-1.1
*   groovy-all-1.7.5
*   jcommon-1.0.15
*   jfreechart-1.0.12

有人可以告诉我从 EJB 调用我的报告的方法是什么，还有我应该使用的任何其他库。

输出中生成错误报告：

```
Exception in thread "AWT-EventQueue-0" javax.ejb.EJBException
    at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:213)
    at com.sun.ejb.containers.EJBObjectInvocationHandlerDelegate.invoke(EJBObjectInvocationHandlerDelegate.java:79)
    at $Proxy175.getEmployeeSales(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.corba.ee.impl.presentation.rmi.ReflectiveTie.dispatchToMethod(ReflectiveTie.java:144)
    at com.sun.corba.ee.impl.presentation.rmi.ReflectiveTie._invoke(ReflectiveTie.java:174)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/digester/Digester
    at BeansPerf.EmployeePerformance.getEmployeeSales(EmployeePerformance.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:206)
    ... 19 more
Caused by: java.lang.ClassNotFoundException: org.apache.commons.digester.Digester
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at com.sun.enterprise.v3.server.AppLibClassLoaderServiceImpl$URLClassFinder.findClass(AppLibClassLoaderServiceImpl.java:158)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 42 more 
```

只是我不能从导入的 jasperReport 库中调用任何方法。

# python - sqlalchemy.exc.ProgrammingError：（ProgrammingError）不能适应类型'UUID'

> ID：15726272
> 
> 赞同：6
> 
> 时间：2013-03-31T04:16:20.453
> 
> 标签：python, postgresql, sqlalchemy

我的桌子是

```
 categories = table('categories',
                       Column('uuid', UUID(), default=uuid.uuid4,
                              primary_key=True,
                              unique=True, autoincrement=False),
                       Column('name', String),
                       Column('parent', String),
                       Column('created_on', sa.types.DateTime(timezone=True),
                              default=datetime.utcnow())
    ) 
```

当我尝试插入数据时，我看到

```
sqlalchemy.exc.ProgrammingError: (ProgrammingError) can't adapt type 'UUID' 'INSERT INTO categories (uuid, name, parent, created_on) VALUES (%(uuid)s, %(name)s, %(parent)s, %(created_on)s)' ({'created_on': datetime.datetime(2013, 3, 31, 4, 12, 26, 801940), 'name': 'Alcohol & Bars', 'parent': 'Food & Drink', 'uuid': UUID('860e5bae-b770-425f-8672-c15c49508a1f')}, {'created_on': datetime.datetime(2013, 3, 31, 4, 12, 26, 801940), 'name': 'Coffee & Tea', 'parent': 'Food & Drink', 'uuid': UUID('de6ad60e-a076-483d-90e9-93916c537583')}, 
```

然后我把我的桌子改成

```
categories = table('categories',
                   Column('uuid', UUID(), default=str(uuid.uuid4()),
                          primary_key=True,
                          unique=True, autoincrement=False),
                   Column('name', String),
                   Column('parent', String),
                   Column('created_on', sa.types.DateTime(timezone=True),
                          default=datetime.utcnow())
) 
```

然后我开始看到错误

```
sqlalchemy.exc.IntegrityError: (IntegrityError) duplicate key value violates unique constraint "categories_pkey"

    DETAIL:  Key (uuid)=(cb80a166-adce-4a6e-9e1a-c210d9b86732) already exists.
     'INSERT INTO categories (uuid, name, parent, created_on) VALUES (%(uuid)s, %(name)s, %(parent)s, %(created_on)s)' ({'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Alcohol & Bars', 'parent': 'Food & Drink', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}, {'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Coffee & Tea', 'parent': 'Food & Drink', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}, {'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Dessert', 'parent': 'Food & Drink', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}, {'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Fast Food', 'parent': 'Food & Drink', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}, {'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Groceries', 'parent': 'Food & Drink', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}, {'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Other', 'parent': 'Food & Drink', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}, {'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Restaurants', 'parent': 'Food & Drink', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}, {'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Snacks', 'parent': 'Food & Drink', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}  ... displaying 10 of 43 total bound parameter sets ...  {'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Other', 'parent': 'Financial', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}, {'created_on': datetime.datetime(2013, 3, 31, 4, 14, 22, 732107), 'name': 'Tax Preparation', 'parent': 'Financial', 'uuid': 'cb80a166-adce-4a6e-9e1a-c210d9b86732'}) 
```

现在为什么`uuid.uuid4()`总是给出相同的值？我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T09:33:37.187

要使您的第一个代码示例正常工作，您需要设置`UUID(as_uuid=True)`（请参阅 文​​档[`UUID`](http://docs.sqlalchemy.org/en/rel_0_8/dialects/postgresql.html#sqlalchemy.dialects.postgresql.UUID)），否则 DBAPI 适配器需要一个字符串值。

您的第二个示例不起作用，因为`default=str(uuid.uuid4())`存储了一个字符串值，该字符串值在定义表对象时生成一次，并且每次都使用（因此出现重复值异常）。您需要在此处传递一个函数，因此每次插入一行时都会对其进行评估：

```
default=lambda: str(uuid.uuid4()) 
```

相同的代表`default=datetime.utcnow()`，它需要`default=datetime.utcnow`。另一件事是`unique=True`主键不需要约束，因为它已经保证是唯一的。

# sql-server - 在连接到 sql 的 vb10 中递增 1 已编辑

> ID：15726273
> 
> 赞同：0
> 
> 时间：2013-03-31T04:16:24.967
> 
> 标签：sql-server, visual-studio-2010

我想有一个学生 ID 与一年的最后 2 位数字和一个字符串 -001 示例 13-001 并读取表中的最后一个值 示例 13-002 是表中的最后一个值它如何变为 13-003当表单加载时。我在表 13-001 上有一个值，我一直在尝试这个代码，但它给了我 14 而不是 13-002

```
 Dim dr As SqlDataReader
    Dim Cmd As New SqlCommand
    con.Open()
    With Cmd
        .Connection = con
        .CommandText = "SELECT * FROM tbl_student ORDER BY Student_no DESC"
    End With
    dr = Cmd.ExecuteReader

    If dr.Read Then
        lblstudno.Text = Val(dr.Item(0)) + 1

    End If

    con.Close() 
```

谢谢希望你理解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:25:26.220

```
INSERT INTO
    students
( student_id ) VALUES
(
    CAST( ( YEAR( GETDATE() ) % 100 ) + 1 AS varchar(2) ) + '-' + 
    CAST( 
           SELECT TOP 1
               CAST( RIGHT( student_id, 3 ) AS int ) + 1
           FROM
               students
           ORDER BY
               student_id DESC

    AS varchar(3) )
) 
```

请注意，如果您达到 999 名学生，这将失败。还有一个潜在的竞争条件，除非您在表上执行某种锁定（请参阅事务隔离）。

我的帖子还演示了为什么`IDENTITY`键通常是一个好主意，而不是自己滚动（假设你想使用这个系统作为你的主键）。

# r - 在 R 2.15.3 下安装 SVGAnnotation 包

> ID：15726275
> 
> 赞同：1
> 
> 时间：2013-03-31T04:16:46.480
> 
> 标签：r, svg

我在 R 2.15.3 下安装 SVGAnnotation 包时遇到问题

因为这个包在 CRAN 不可用，我从[http://www.omegahat.org/SVGAnnotation/下载了 0.93-1 版本](http://www.omegahat.org/SVGAnnotation/)

并尝试通过安装它

```
install.packages("SVGAnnotation_0.93-1.tar.gz", repos=NULL, 
type="source") 
```

不幸的是，会出现以下问题：

![在此处输入图像描述](https://i.stack.imgur.com/wz5fF.png)

任何人都知道如何让它为 R 2.15.3 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-28T15:13:57.897

如果您想安装最新版本，请尝试

`library(devtools)`

`install_github('duncantl/SVGAnnotation')`

# php - PHP 是否根据其限制动态处理内存使用情况？

> ID：15726282
> 
> 赞同：5
> 
> 时间：2013-03-31T04:17:17.143
> 
> 标签：php, memory, memory-management

当 PHP 的 memory_limit 设置为`50M`大约 25 秒的运行时间时，我有一个脚本可以成功运行。当我在脚本末尾打印`memory_get_peak_usage`时，它非常接近`50M`. 当我将 memory_limit 设置得更高时，to 会`90M`显示`memory_get_peak_usage`，`75M`脚本加载速度会快 10 秒。

无论memory_limit如何，脚本都会使用大约相同数量的内存，这似乎很直观，但似乎并非如此。如果脚本在 50M 的限制下达到最大值`50M`，我预计即使 memory_limit 已增加，峰值使用量也会相同。

我唯一的解释是 PHP 认识到它接近其限制并花时间清除未使用的内存以避免达到限制。这是它实际工作的方式还是我只是触及了更大的东西的表面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:55:01.483

你看到的是垃圾收集器在做它的工作。

当您重新定义非原始变量值时，旧值不会立即从内存中丢弃。它仍然存在，作为脚本内存使用的一部分。

只有当您的脚本危险地接近其内存限制时，才会调用垃圾收集器来清理那些未使用的已分配内存，以便为脚本释放更多空间。这个过程是缓慢的，这就是为什么脚本会在更多内存的情况下运行得更快 - 垃圾收集器并不经常需要。

编辑：

缓冲也参与其中。如果您的脚本正在向文件写入大量数据，则此数据首先在内存中排队，因为您的硬盘将无法像您生成它那样快地写入此数据。如果您生成数据的速度比磁盘写入数据的速度快得多，最终可用内存将被填满，并且您的程序将被迫等待下次您尝试`fwrite()`或使用任何将数据放入缓冲区的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T04:31:24.790

我找不到确切的证据，但我记得/相信 memory_limit 设置了 php 将使用每个脚本的内存量，而 memory_get_peak_usage 显示了你的脚本分配的内存（php 用来管理的开销的数量略有不同本身）

来自[memory_get_peak_usage的手册](http://php.net/manual/en/function.memory-get-peak-usage.php)

> **参数**
> 
> real_usage
> 
> 将此设置为 TRUE 以获取从系统分配的内存的实际大小。如果未设置或 FALSE，则仅报告 emalloc() 使用的内存。

# c++ - C++ 与 System.DateTime.Now.Ticks 等价的东西？

> ID：15726284
> 
> 赞同：2
> 
> 时间：2013-03-31T04:17:27.763
> 
> 标签：c++

我只是用C#开发游戏，我是新迁移C++的，我只想把游戏重写成C++，几乎成功地将所有代码从C#翻译成C++，但是有一些问题，我的游戏使用系统。 C# 中的 DateTime.Now.Ticks ......我被卡住了

所以.. C++ 中有与 System.DateTime.Now.Ticks 等价的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:11:34.727

## 在 cplusplus.com 上查看**本** [教程](http://www.cplusplus.com/reference/ctime/clock/)以独立于平台。

函数`Clock()`返回此进程已消耗的抽动量。要访问此功能，您需要包括：`#include <time.h>`.

要获得同样的结果，只需几秒钟，您可以使用`CLOCKS_PER_SEC`宏，因此您可以：`Clock() / CLOCKS_PER_SEC`获取此过程所用的秒数。但请记住，您可能会以这种方式失去一些精确度。

* * *

不过，您可能不需要这个确切的功能......如果您正在寻找自程序启动以来经过的确切时间，您（据我所知）必须使用[`difftime()`](http://www.cplusplus.com/reference/ctime/difftime/)function. 如果您需要精确的抽动，您可能会失去一些精度，具体取决于您的平台。

这样，您必须在申请开始时保存当前时间，并在申请期间从当前时间中减去它。

```
#include <stdio.h>
#include <time.h>

time_t programstart;

int main ()
{
  time(&programstart); //assign the current time 

  /*... the program ...*/

  //get seconds since start
  double secondssincestart = difftime(time(NULL), programstart);

  printf ("the program took: %f seconds\n", secondssincestart);

  return 0;
} 
```

* * *

**编辑：**

由于这篇文章仍然受到一些关注，重要的是要注意，今天的 C++11 具有标准、易于使用和非常方便的库[`chrono`](http://en.cppreference.com/w/cpp/header/chrono)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:07:22.283

使用`QueryUnbiasedInterruptTime`. 就像`DateTime.Ticks`，每个刻度`QueryUnbiasedInterruptTime`也是 100 纳秒。如果您需要更高的分辨率，则需要选择`QueryPerformanceCounter`.

链接： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee662306 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee662306(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T05:09:00.690

没有等效的类或方法，但您可以这样做：

```
SYSTEMTIME systemTime;
GetLocalTime(&systemTime);

FILETIME fileTime;
SystemTimeToFileTime(&systemTime, &fileTime);

ULARGE_INTEGER largeInteger;
largeInteger.LowPart = fileTime.dwLowDateTime;
largeInteger.HighPart = fileTime.dwHighDateTime;

ULONGLONG ticks = reinterpret_cast<ULONGLONG&>(largeInteger); 
```

# macos - 在 OS X 10.8 上构建 pkg-config-0.28 时出错

> ID：15726290
> 
> 赞同：2
> 
> 时间：2013-03-31T04:18:28.950
> 
> 标签：macos, build-dependencies

我是 Mac 新手，正在尝试在 OS X 10.8 上构建 pkg-config-0.28。我能够使用以下方法成功配置：

```
./configure CC="gcc -arch i386 -arch x86_64" CXX="g++ -arch i386 -arch x86_64" CPP="gcc -E" CXXCPP="g++ -E" --with-internal-glib 
```

在收到错误提示未找到 glib 后，我尝试了“--with-internal-glib”。

但是现在我在输入时收到以下错误：

```
$ make -j8 
```

错误信息：

```
> CC       gvarianttype.lo
  CC       gversion.lo
  CC       gwakeup.lo
  CC       gprintf.lo
  CC       glib-unix.lo
  CC       gthread-posix.lo
  CC       giounix.lo
gutils.c: In function 'find_folder':
gutils.c:1423: warning: 'FSFindFolder' is deprecated (declared at /System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/Folders.h:290)
  CC       gspawn.lo
echo   > glib-public-headers.txt.tmp && mv glib-public-headers.txt.tmp glib-public-headers.txt
lipo: can't figure out the architecture type of: /var/folders/wn/zc31626x5mz7w57dq6cf8f7w0000gn/T//cczwFoWN.out
make[6]: *** [gvariant.lo] Error 
make[6]: *** Waiting for unfinished jobs....
make[5]: *** [all-recursive] Error 1
make[4]: *** [all] Error 2
make[3]: *** [all-recursive] Error 1
make[2]: *** [all] Error 2
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

在此之前，我从 .pkg 文件安装了 pkg-config-0.26，但问题是，它显示安装成功，但是当我在终端中输入“pkg-config”时，它说找不到命令。出于这个原因，我想从最新版本开始构建。

我真的需要这个来构建/编译一个 opencv 项目。现在我怎样才能让 pkg-config 工作？请帮忙。

# python - 在 virtualenv 上使用 django-filer 的 Django 失败

> ID：15726294
> 
> 赞同：0
> 
> 时间：2013-03-31T04:19:11.870
> 
> 标签：python, django, virtualenv

我正在使用`django 1.5.1`with`django-filer 0.9.3`包来处理带有`FilerImageField`.

我使用`virtualenv`环境。

`python manage.py runserver`当我使用（当然是在新的）运行我的 django 网络应用程序并`syncdb`在我的 chrome 浏览器中转到网络应用程序时，我选择了 FilerImageField 并且它失败并出现以下错误：

```
TemplateSyntaxError at /admin/filer/folder/
'adminmedia' is not a valid tag library: Template library adminmedia not found, tried django.templatetags.adminmedia,...

Error during template rendering

In template c:\temp\hc-sofware\venv\lib\site-packages\filer\templates\admin\filer\folder\directory_listing.html, error at line 2
'adminmedia' is not a valid tag library: Template library adminmedia not found, tried django.templatetags.adminmedia,django.contrib.staticfiles.templatetags.adminmedia,django.contrib.admin.templatetags.adminmedia,filer.templatetags.adminmedia,easy_thumbnails.templatetags.adminmedia
{% extends "admin/filer/base_site.html" %}
{% load adminmedia filer_admin_tags filermedia i18n %}
{% load url from future %}

{% block extrahead %}{{ block.super }}
{# upload stuff #}
{{ media.js }}
<script type="text/javascript" src="{% admin_js_base %}jquery.min.js"></script>
<script type="text/javascript" src="{% filer_staticmedia_prefix %}js/jquery-ui-1.7.2.custom.min.js"></script>
<script type="text/javascript" src="{% filer_staticmedia_prefix %}js/jquery.cookie.js"></script>
<script type="text/javascript" src="{% filer_staticmedia_prefix %}js/fileuploader.js"></script>
<script type="text/javascript" src="{% admin_js_base %}admin/RelatedObjectLookups.js"></script> 
```

**奇怪的是，不使用 virtualenv 它可以工作。**

您可能拥有的任何线索都会非常有帮助。

**编辑1：settings.py**

```
...
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'hc',
    'filer',
    'easy_thumbnails'
)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:26:34.540

`django-filer`[如文档](http://django-filer.readthedocs.org/en/latest/installation.html#dependencies)中所述，与 django 1.5 不兼容。

# javascript - javascript文本字段焦点禁用块

> ID：15726298
> 
> 赞同：-1
> 
> 时间：2013-03-31T04:20:09.320
> 
> 标签：javascript, jquery

我想制作两个文本字段如下

```
<input id="email" class="email" value = "${user.email}" />
<input id="password" class="password" display="none" /> 
```

我想用当前密码更改我的电子邮件。因此，当我尝试输入电子邮件文本字段以更改电子邮件地址时，我想激活密码文本字段（其默认显示为无）。

为此，我使用 javascript 代码。我怎样才能为此编写代码？我应该为此使用 focus() 还是 live() ？请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:46:00.890

尝试

```
$('#email').keyup(function() {  
    $('#password').show();
} 
```

# git - ACE 在线 IDE 的 GIT 支持

> ID：15726300
> 
> 赞同：1
> 
> 时间：2013-03-31T04:20:29.890
> 
> 标签：git, ide, egit, jgit, ace-editor

我扩展了 ACE - Web 代码编辑器以支持我们正在开发的语言。现在我想在我们用 ACE 构建的 IDE 中添加 Git 支持或使用 GitHub API。我已经研究过 JGIT，但我想知道是否可以将它与 ACE 集成。我需要支持一些简单的 GIT 功能，比如探索 repo、push、pull、merge 等。

我想用我的 IDE 做类似 SCM Manger 的事情。

我发现了一个类似的主题：[Git integration with my Java EE application](https://stackoverflow.com/questions/9689159/git-integration-with-my-java-ee-application)

但这并没有太大帮助。

有人可以指出正确的方向来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:51:48.893

Ace 只是一个编辑器，它需要一些插件/后端逻辑来实现这种集成。

王牌只是[装饰](https://github.com/ajaxorg/ace#embedding-ace)你的`div`（或`textarea`）。它对您如何处理内容的控制有限。

如果您想与 Github 或 Bitbucket 或任何其他提供商集成，则需要在 Ace 前端与 git 之间添加一些东西。

我已经看到应用程序使用以下内容 -

1.  [格里特](https://github.com/blog/270-the-fork-queue)
2.  [要旨](https://gist.github.com/)

在上述两种情况下，ace 编辑器都被用作代码编辑的前端。虽然，Gist 本身有一个很酷的编辑器。

编辑 - 是的，与 Github 集成是有意义的。您可能已经看过[Github Repositories API](http://developer.github.com/v3/repos/)。此外，如果您正在寻找替代方案，请查看[BitBucket API 。](https://confluence.atlassian.com/display/BITBUCKET/Using+the+Bitbucket+REST+APIs)

有一些可用的 Github 客户端库可能会让您的生活更轻松 -

1.  [C＃](https://github.com/sgrassie/csharp-github-api)
2.  [爪哇](https://github.com/kohsuke/github-api)
3.  [PHP](https://github.com/ornicar/php-github-api)

这些库的文档值得浏览一下，即使您决定构建自己的 :)。

如果您打算使用 Private Github 存储库，请查看[此问题。](https://stackoverflow.com/questions/8975848/getting-private-repos-from-organization-with-github-api-v3)

# javascript - PayPal Express Checkout 后重定向父页面

> ID：15726306
> 
> 赞同：3
> 
> 时间：2013-03-31T04:21:43.543
> 
> 标签：javascript, servlets, spring-mvc, paypal

我有一个父页面，`PayPal`上面有按钮。按下按钮将触发一个迷你浏览器，用户可以在其中登录并付款。

以下代码在用户付款成功后关闭 PayPal 迷你浏览器。

```
// Add javascript to close Digital Goods frame. You may want to
                // add more javascript code to
                // display some info message indicating status of purchase in
                // the parent window
                response.setContentType("text/html");
                response.getWriter()
                        .println(
                                "<script>\n alert(\"Payment Successful\");\n// add relevant message above or remove the line if not required \n window.onload = function(){\nif(window.opener){\nwindow.close();\n}\nelse{\nif(top.dg.isOpen() == true){\ntop.dg.closeFlow();\nreturn true;\n}\n}\n};\n</script>"); 
```

迷你浏览器已成功关闭，但我的应用程序上的父页面保持不变。如何使用付款状态更新父页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T04:11:13.443

`window.close();`我通过在父页面访问表单之前添加以下 JS 代码解决了这个问题。获得表单后，我可以提交页面或显示有关状态的对话框通知。

```
 window.onload = function() {
    if (window.opener) {
        window.opener.document.forms[0].submit(); // submit form
        window.close();
    } else {
        if (top.dg.isOpen() == true) {
            top.document.forms[0].submit(); // submit form
            top.dg.closeFlow();
            return true;
        }
    }
}; 
```

# c# - 查询总是返回以前的值？

> ID：15726309
> 
> 赞同：0
> 
> 时间：2013-03-31T04:23:03.240
> 
> 标签：c#, sql-server, linq, linq-to-sql

这是我第一次尝试使用 LINQ to SQL 创建 C# 桌面应用程序和 SQL Server 数据库。一切都很顺利，直到..

我总是得到表的先前值，即使我肯定已经更新了表，并检查了 MSSQL 表中的值是否发生了变化。

这可能是什么原因？

我的代码如下：

**A. 打开 StockAdjusment 表单**

```
StockAdjustment stockAdjustment = new StockAdjustment();
stockAdjustment.prepareForm(product); 
```

**B. 在里面`prepareForm()`我调用代码来查询所选产品的当前数量**

```
inventory = db.Inventories.Where(i => i.ProductID == product.ID).Single();
numCurrentStock.Value = inventory.Current_Quantity; 
```

**C. stockAdjustment form Close后，我存储新的库存调整**

```
if (stockAdjustment.ShowDialog() == DialogResult.OK)
{
    db.InsertInventoryChange(stockAdjustment.inventory.ID, product.ID, stockAdjustment.stockChange, stockAdjustment.currentStock, stockAdjustment.Date, stockAdjustment.Message);
    db.SubmitChanges();
    readData();
} 
```

该`readData()`方法工作得很好。它将显示新的库存调整，并且产品的当前数量确实发生了变化。我还检查了 SQL Server 表，它确实发生了变化。

**D. 但是，每次我打开一个新的 StockAdjustment 对话框时，它总是会显示 Current Quantity 的旧值。**

只有当我关闭应用程序并重新启动它时，它才能显示实际值。

不知何故，我认为这是我的应用程序代码问题，而不是 LINQ。但我不知道..

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:39:37.583

是`db.InsertInventoryChange`存储过程调用吗？如果是这样，我的外行的理解是，LINQ to SQL 不会跟踪因调用而导致的任何值更改（而不是通过 DataContext 直接更新实体，因为 LINQ to SQL 的跟踪会知道这一点），所以调用：

```
db.SubmitChanges(); 
```

是多余的，因为 LINQ to SQL DataContext 不知道您已经进行了更改，并且可能没有提交任何内容并且不更新其内部值。所以当你这样做时：

```
db.Inventories.Where(i => i.ProductID == product.ID).Single(); 
```

您将获得以前的值，因为 LINQ to SQL 不知道更改，因此没有更新它一直在跟踪的值。

如果您坚持自己的`DataContext`而不是每次都创建一个新的，则可以考虑在打电话之前[刷新](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.refresh.aspx)`db.Inventories.Where(i => i.ProductID == product.ID).Single();`，例如：

```
db.Refresh(RefreshMode.OverwriteCurrentValues);
inventory = db.Inventories.Where(i => i.ProductID == product.ID).Single();
numCurrentStock.Value = inventory.Current_Quantity; 
```

可能有一种更优雅的调用方式，`Refresh()`因此您不会完全破坏所有内容，但我在这里的经验是有限的。

# c# - 转换为 Base64 时从字节数组中得到反转图像

> ID：15726310
> 
> 赞同：3
> 
> 时间：2013-03-31T04:23:03.557
> 
> 标签：c#, image, bytearray, reverse

我只需要获取原始位图数据（没有标题或其他信息）。我使用以下代码获取位图数据：

```
using (Bitmap bitmap = svgDocument.Draw())
{
  Rectangle rect = new Rectangle(0, 0, bitmap.Width, bitmap.Height);
  BitmapData bitmapData = bitmap.LockBits(rect, ImageLockMode.ReadWrite, bitmap.PixelFormat);
  var length = Math.Abs(bitmapData.Stride) * bitmapData.Height;

  byte[] bytes = new byte[length];
  Marshal.Copy(bitmapData.Scan0, bytes, 0, length);
  bitmap.UnlockBits(bitmapData);

  MemoryStream memoryStream = new MemoryStream();
  string filename = DateTime.Now.Ticks.ToString() + ".bmp"; // this works fine
  bitmap.Save(filename, ImageFormat.Bmp);

  string base64 = Convert.ToBase64String(bytes, Base64FormattingOptions.InsertLineBreaks); // the base64 is reversed. 
} 
```

当我保存位图时，一切看起来都很好。图像没有反转。但是，当我仅使用字节将数据转换为 Base64 时，图像就会反转。

**编辑1：**

我认为这与 Base64 转换无关。似乎字节的顺序相反。

当我使用代码保存图像时，图像如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/0EQmQ.png)

当我使用字节时，我会看到：

![在此处输入图像描述](https://i.stack.imgur.com/wR8Gt.png)

**解决方案：**

我找到了解决方案。我没有创建新的位图，而是跳过了头信息的前 54 个字节，然后存储了字节数组。

```
MemoryStream memoryStream = new MemoryStream();
bitmap.Save(memoryStream, ImageFormat.Bmp);

// Skip header
IEnumerable<byte> bytes = memoryStream.ToArray().Skip(54); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:23:33.487

标准 BMP 格式允许以经典的上/下顺序或反向顺序存储图像的字节。

判断您的图像是否以这种方式存储的方法是检查`Height`BMP 标头中参数的值：

*   如果`Height < 0`，则图像的高度为`abs(Height)`，并且像素以反向（底部/顶部）顺序存储。

*   如果`Height > 0`，那么您就是您所期望的情况，其中像素处于“正常”顺序，从上到下。

我会说，在您的情况下发生的事情是您从存储有负`Height`标头的图像开始（`SVG`对象出于某种原因必须这样做）。但是您不检查它，因此您将像素按从下到上的顺序存储。

当您与`BMP`对象一起存储时，它会从上下文中为您计算出来。但是，当您仅导出像素时，加载您的图像的第三方应用程序会看到正面`Height`，从而将您的图像颠倒显示。

[您可以在BMP 文件格式](http://en.wikipedia.org/wiki/BMP_file_format)的 Wikipedia 页面中找到有关此像素排序的详细信息。

**编辑：**

因此，当您将 BMP 文件写入磁盘时，您必须执行以下操作：

1.  检查您的字节是从上到下的顺序（a）还是从下到上的顺序（b）

2.  If (a): 把`height`你的图片作为一个正值放在 BMP 头中

3.  If (b)：将`- height`负值放入 BMP 标头中。这样显示您的图像的第三方程序就知道它被颠倒了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T19:03:53.570

我找到了解决方案。我没有创建新的位图，而是跳过了头信息的前 54 个字节，然后存储了字节数组。

```
MemoryStream memoryStream = new MemoryStream();
bitmap.Save(memoryStream, ImageFormat.Bmp);

// Skip header
IEnumerable<byte> bytes = memoryStream.ToArray().Skip(54); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-25T13:04:23.017

我遇到了同样的问题，但仍然需要一个 base 64 字符串（用于 HTML5 画布）。所以我使用 Image 类来旋转图像，存储在一个新的流中，然后转换为 base64 字符串。

```
var image = System.Drawing.Image.FromStream(new MemoryStream(bytes));

//Rotate and save to new stream
image.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
MemoryStream streamOut = new MemoryStream();
image.Save(streamOut, System.Drawing.Imaging.ImageFormat.Jpeg);

//Convert to base64 string
string base64String = Convert.ToBase64String(streamOut.ToArray()); 
```

# jsp - 无法将 bean 添加到 ArrayList

> ID：15726312
> 
> 赞同：0
> 
> 时间：2013-03-31T04:23:28.083
> 
> 标签：jsp, servlets, javabeans

我创建了一个这样的 JavaBean 类。

```
package beans;

public class Invoice {
    private String companyName;
    private double price;

    public String getCompanyName() {
        return companyName;
    }

    public void setCompanyName(String companyName) {
        this.companyName = companyName;
    }

    public double getPrice() {
        return price;
    }

    public void setPrice(double price) {
        this.price = price;
    }

} 
```

然后我创建了一个 Servlet，其中从 HTML 文件中获取参数，创建了一个 Bean。我正在尝试将 bean 添加到 ArrayList。

```
protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        String companyName = request.getParameter("txtCompany");
        double price = Double.parseDouble(request.getParameter("txtPrice"));

        ArrayList<Invoice> list = (ArrayList<Invoice>) new ArrayList();
        Invoice r = new Invoice();
        r.setCompanyName(companyName);

        list.add(r.getCompanyName());
        r.setPrice(price);

    }

} 
```

但我在**.add上收到此错误**

```
The method add(Invoice) in the type ArrayList<Invoice> is not applicable for the arguments (String) 
```

我在哪里可能是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:27:59.120

ArrayList<Invoice> list = (ArrayList<Invoice>) new ArrayList(); 发票 r = 新发票 (); r 。设置公司名称（公司名称）；r 。设置价格（价格）；列表 。add (r)} } 你应该只添加调用对象......你试图直接插入字符串......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:09:31.430

您的代码管理不善并且有错误。

1.  **声明和赋值**。你有`ArrayList<Invoice> list = (ArrayList<Invoice>) new ArrayList();`. 虽然代码可以工作，但很难理解*为什么*在分配期间不使用泛型并进行强制转换。接下来，为了避免紧密耦合，我们通常*将变量声明为接口，而不是具体实现*。更正，您将拥有以下行：`List<Invoice> list = new ArrayList<Invoice>();`.
2.  **填充集合**。当您声明您的列表仅包含*class**的实例时`Invoice`*，您将能够*仅添加`Invoice`对象和继承自的对象`Invoice`*。Onviously，`list.add(r.getCompanyName());`你试图添加一个字符串，它不扩展`Invoice`，也不是它的任何子类。所以，只需添加对象：`list.add(r)`就可以了。

# c++ - 游戏运行几分钟后 SDL_Surface 消失？

> ID：15726313
> 
> 赞同：1
> 
> 时间：2013-03-31T04:23:53.733
> 
> 标签：c++, sdl, surface

运行我的小行星游戏几分钟后，代表我的船的 SDL_Surface 消失了。不知何故，保存船舶旋转图像（rot）的表面被设置为 NULL。我不知道为什么！在我添加该行之前`if(rot != NULL && image != NULL)`，程序会在运行大约一分三十秒后崩溃，但现在图像消失了。我似乎无法弄清楚什么是错的！提前致谢！

涉及旋转和渲染的 Sprite 类函数。

```
void Sprite::Rotate(double angleAdd)
{
    rotated = true;
    double temp = 0;
    angle += angleAdd;
    temp = angleAdd + angle;
    if (temp >= 360)
        angleAdd = temp - 360;
    if (temp <= 360)
        angleAdd = temp + 360;

    rot = rotozoomSurface(image, angle , 1.0, 1);
}

void Sprite::Draw(SDL_Surface* screen)
{
    if(image == NULL)
        SDL_FillRect(screen, &rect, color);
    else
    {
        if (rotated)
        {
            rotRect.x = x;
            rotRect.y = y;
            //Center the image
            if(rot != NULL && image != NULL){
                rotRect.x -= ((rot->w/2) - (image->w/2));
                rotRect.y -= ((rot->h/2) - (image->h/2));
            }
            SDL_BlitSurface(rot, NULL, screen, &rotRect);
        }
        else
            SDL_BlitSurface(image, NULL, screen, &rect);
    }
}

bool Sprite::SetImage(std::string fileName)
{
    imageFileName = fileName;
    SDL_Surface* loadedImage = NULL;
    loadedImage = SDL_LoadBMP(fileName.c_str());
    if(loadedImage == NULL)
    {
        if (debugEnabled)
            printf("Failed to load image: %s\n", fileName.c_str());
            SDL_FreeSurface(loadedImage);
        return false;
    }
    else
    {
        image = SDL_DisplayFormat(loadedImage);

        SDL_FreeSurface(loadedImage);
        return true;
    }

} 
```

主要的：

```
 if (arrowPressed[0])
    {
        ship.SetImage(shipFor.GetImage());
        if(!phase)
            ship.Accel(-moveSpeed);
        else
            ship.Accel(-moveSpeed * 2);
    }
    if (arrowPressed[1])
    {
        ship.Rotate(turnSpeed);
        ship.SetImage(shipRig.GetImage());
    }
    if (arrowPressed[3])
    {
        ship.Rotate(-turnSpeed);
        ship.SetImage(shipLef.GetImage());
    }

    if (arrowPressed[0] && arrowPressed[1])
        ship.SetImage(shipForRig.GetImage());
    if (arrowPressed[0] && arrowPressed[3])
        ship.SetImage(shipForLef.GetImage());
    if (!arrowPressed[0] && !arrowPressed[1] && !arrowPressed[3])
        ship.SetImage(shipNor.GetImage());

    if (ship.GetCenterX() >= RESX - 40)
        ship.SetPosCentered(50, ship.GetCenterY());
    if (ship.GetCenterX() <= 40)
        ship.SetPosCentered(RESX - 50, ship.GetCenterY());
    if (ship.GetCenterY() >= RESY - 40)
        ship.SetPosCentered(ship.GetCenterX(), 50);
    if (ship.GetCenterY() <= 40)
        ship.SetPosCentered(ship.GetCenterX(), RESY - 150); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:57:37.927

您似乎没有释放最后一个旋转的图像。检查是否为空，并在创建新表面之前释放表面：

```
void Sprite::Rotate(double angleAdd)
{
    if(rot != NULL)
        SDL_FreeSurface(rot);

    rotated = true;
    double temp = 0;
    angle += angleAdd;
    temp = angleAdd + angle;
    if (temp >= 360)
        angleAdd = temp - 360;
    if (temp <= 360)
        angleAdd = temp + 360;

    rot = rotozoomSurface(image, angle , 1.0, 1);
} 
```

# jquery - 有没有办法从这个 js 获取 img 大小并将它应用到这个 jQuery 函数

> ID：15726314
> 
> 赞同：0
> 
> 时间：2013-03-31T04:24:13.320
> 
> 标签：jquery

我正在一个弹出旧js的程序中工作，我正在尝试将它放入一个jQuery模式窗口，我遇到的问题是获取img大小。

这是[24 小时演示](http://trialsites.ihoststudio.com/trialsite367039/website/)

原来的脚本是这样的：

```
<script type="text/javascript">
  <!--
    function newWin(strURL,imgheight,imgwidth) {
    var mybar='toolbar=no,directories=no,status=no,menubar=no,resizable=no';
    mybar+=',width=';
    mybar+=imgwidth;
    mybar+=',height=';
    mybar+=imgheight;

    window.open(strURL, 'newWin', mybar);
  }
//-->
</script> 
```

..和 HTML get 是这样写的：

```
<div id="TMBOBJ7DD361E59F1760" style=" position:absolute; top:201px; left:79px; width:150px; height:96px;  z-index:4;" >
<a href="nextpop/imag001A.html" onclick="newWin('nextpop/imag001A.html',408,630);return false;" target="_blank">
<img src="nextpop/imag001.jpg" width=150 height=96 border=0 alt="Mustang">
</a>
</div> 
```

现在我有了它，所以它都可以用这个 jQuery 进行转换，正如你在 DEMO 中看到的那样

```
$(document).ready(function() {

$('[id^=TMBOBJ]').each(function() {
var $a = $(this).find('a');
$a.attr('href' , $a.attr('href').replace('html', 'jpg' ));
$a.removeAttr('onclick');
$a.removeAttr('target');
});

$(function () {
var top = Math.max($(window).height() / 2 - $("#large")[0].offsetHeight / 2, 0);
var left = Math.max($(window).width() / 2 - $("#large")[0].offsetWidth / 2, 0);
$("#large").css('top', top + "px");
$("#large").css('left', left + "px");
$("#large").css('position', 'fixed');
});

$('#background').each(function() {
$(this).css('height',$(document).height());
$(this).css('width',$(document).width());
});

$('[id^=TMBOBJ] img').click(function(){

$("#background").css({"opacity" : "0.7"})
.fadeIn("slow");

$("#large").html("<img src='"+$(this).parent().attr("href")+"' alt='"+$(this).attr("alt")+"' /><br/>"+$(this).attr("alt")+"")
.fadeIn("slow");
return false;
});

$("#background").click(function(){
$("#background").fadeOut("slow");
$("#large").fadeOut("slow");
});

$("#large").click(function(){
$("#background").fadeOut("slow");
$("#large").fadeOut("slow");
});

}); 
```

除了我无法弄清楚如何获得 img 大小任何想法对于像我这样的初学者来说这是一个艰难的想法。我试过这个：

```
$("img").load(function(){
    var img = document.getElementById('[id^=TMBOBJ]'); 
    var width = img.clientWidth;
    var height = img.clientHeight;
}); 
```

但是我需要从原始脚本中获取大小是我在想的吗？我知道......但它会帮助更新人们的所见即所得程序，我很接近*（事实证明，这也是一个有趣的问题）*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:36:20.290

`document.getElementById('[id^=TMBOBJ]');`是一个问题/不会像预期的那样工作`ID`，而不是查询选择器。

要么让它成为一个 jQuery 选择器：

```
var img = $('[id^=TMBOBJ]'); 
```

或使用**document.querySelectorAll()**

```
var img = document.querySelectorAll('[id^=TMBOBJ]') 
```

这两个选择器都将返回一个 DOM 元素数组，因此您的加载函数应该被修改，或者简单地`$(this)`用于您的范围。

此外，充分发挥 jQuery 的潜力！

*   [jQuery的`$(this)`揭秘](http://remysharp.com/2007/04/12/jquerys-this-demystified/)
*   [`outerWidth()`](http://api.jquery.com/outerWidth/)
*   [`outerHeight()`](http://api.jquery.com/outerHeight/)

```
$("img").load(function(){
    var img = $(this),
        width = img.outerWidth(true),
        height = img.outerHeight(true);
}); 
```

# java - ClassCastException Double to Float

> ID：15726316
> 
> 赞同：2
> 
> 时间：2013-03-31T04:24:22.727
> 
> 标签：java, android, casting

出于某种原因，这段代码抛出了一个`ClassCastException`，告诉我我不能将 Double 转换为 Float。异常来自下面的第一行代码。`mapData.speeds`是一个`ArrayList<Float>`。双子在哪里？

```
float spd = mapData.speeds.get(focusPointIndex);
spd = (spd * 3600/1609.34); 
```

这是完整的堆栈跟踪：

```
03-31 01:00:51.008: E/AndroidRuntime(17778): FATAL EXCEPTION: main
03-31 01:00:51.008: E/AndroidRuntime(17778): java.lang.ClassCastException: java.lang.Double cannot be cast to java.lang.Float
03-31 01:00:51.008: E/AndroidRuntime(17778):    at net.taptools.android.trailtracker.ResultsMapViewingFragment$4.onMapLongClick(ResultsMapViewingFragment.java:224)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at com.google.android.gms.maps.GoogleMap$5.onMapLongClick(Unknown Source)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at com.google.android.gms.internal.k$a.onTransact(Unknown Source)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at android.os.Binder.transact(Binder.java:326)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at com.google.android.gms.maps.internal.IOnMapLongClickListener$Stub$Proxy.onMapLongClick(IOnMapLongClickListener.java:93)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at maps.i.s.a(Unknown Source)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at maps.y.v.d(Unknown Source)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at maps.y.bf.onLongPress(Unknown Source)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at maps.d.v.onLongPress(Unknown Source)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at maps.d.h.c(Unknown Source)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at maps.d.h.c(Unknown Source)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at maps.d.j.handleMessage(Unknown Source)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at android.os.Looper.loop(Looper.java:137)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at android.app.ActivityThread.main(ActivityThread.java:5059)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at java.lang.reflect.Method.invokeNative(Native Method)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at java.lang.reflect.Method.invoke(Method.java:511)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:792)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
03-31 01:00:51.008: E/AndroidRuntime(17778):    at dalvik.system.NativeStart.main(Native Method) 
```

# - 编辑 -

我想我已经找到了导致错误的原因，但仍然不知道它为什么会发生，或者如何解决它。我正在从 JSON 中解析 mapData 对象，并且因为它包含许多各种类型的 ArrayList，我创建了一个将 JSONArray 解析为指定类型的 ArrayList 的方法。这是方法。

```
private <T> ArrayList<T> JSONArrayToList(JSONArray jsonArr){
        ArrayList<T> arrList = new ArrayList<T>();
        for(int i = 0; i<jsonArr.length(); i++){
            try {
                arrList.add((T)jsonArr.get(i));
            } catch (JSONException e){e.printStackTrace();}
        }
        return arrList;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:29:12.290

我猜你的代码实际上声明`spd`为 a `Float`（而不是 a `float`）。我也猜测例外来自第二行。尝试将第二行更改为：

```
spd = (spd * 3600 / 1609.34f); 
```

这将使右侧 a`float`而不是 a `double`。Java 中的浮点文字`double`除非以`f`or结尾`F`。

~~如果我的猜测是准确的，那么异常是由 Java 将`double`-valued 表达式自动装箱到 a`Double`然后尝试将其强制转换为 a`Float`以便将其分配给 variable 引起的`spd`。~~

玩了一会儿后，我发现我无法复制您的错误消息。您的代码甚至无法编译；编译器在第二行抱怨“错误：可能的精度损失”。所以现在我有另一个猜测：您已经隐藏了该错误消息（或将其设置为警告而不是错误并忽略它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T04:30:33.147

如果`mapData.speeds`真的被声明为，`ArrayList<Float>`那么获得类转换异常的唯一方法是，如果您抑制/忽略了一些关于不安全转换的警告。（在设置 `speed`属性的代码或将值放入列表的代码中。）

将发生类转换，因为您的代码实际上等同于：

```
Float tmp = (Float) (mapData.speeds.get(focusPointIndex));
float spd = tmp.floatValue(); 
```

`mapData.speeds.get`以及is的实际（已删除）签名`Object get(int)`。

通常（即，如果您不禁止警告）编译器会告诉您是否做了*会*导致 a`Double`被添加到`ArrayList<Float>`. 但是，如果您忽略这些警告，您最终`Double`可能会得到一个应该是`ArrayList<Float>`. `get`如果发生这种情况，当您使用as的结果时，您将得到一个类强制转换异常`float`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T04:59:36.967

更改`3600/1609.34`为`3600f / 1609.34f`

如果您在代码中使用十进制数，它将被推断为双精度类型。在数字末尾包含 F 以告诉编译器它是浮点数而不是双精度数。

为获得最佳实践，请养成始终以 D 或 F（Double 或 Float）结尾的十进制常量的习惯。考虑到 Java 让您只为编写最简单的流程而绞尽脑汁，这似乎并不过分。

# database - 搜索索引与数据库索引

> ID：15726333
> 
> 赞同：2
> 
> 时间：2013-03-31T04:27:40.400
> 
> 标签：database, search, indexing

我想知道搜索索引和数据库索引之间的区别是什么。我知道数据库索引使用指向实际数据的排序指针，而搜索索引（例如，使用倒排索引）使用类似哈希表的结构将单词与包含该单词的文档进行映射。索引在这两种情况下意味着不同的东西。我的问题是——这两种情况真的不同吗？数据库索引和搜索索引是不同的概念吗？我想我只是对这里的“索引”一词感到困惑。对此的任何澄清表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:41:20.103

数据库索引由来自目标应用程序的查询驱动。通常，您在设计数据库并决定要索引哪些属性时有明确的要求。例如，如果属性 A 在数据库中被索引，那么它的目的是加速属性 A 上的一些已知的、潜在的查询 Q（或查询集）。

另一方面，网络搜索（或关键字搜索）更多的是自由形式。当搜索引擎索引一个文档（网页）时，它没有关于查询的先验知识。因此，它需要尝试理解文档（通过自然语言处理）并索引可能感兴趣的任何关键字和短语。

虽然搜索索引和数据库索引共享许多通用技术，但要求是不同的。I/O 效率和一致性是数据库索引的首要关注点。而搜索索引有利于可扩展性和空间效率（时间效率是通过分布和并行性实现的）。此外，搜索索引不需要召回所有匹配的文档；在大多数情况下，检索几百个排名靠前的条目就足够了。

# vb.net - 空引用异常运行时错误

> ID：15726338
> 
> 赞同：0
> 
> 时间：2013-03-31T04:28:37.183
> 
> 标签：vb.net, nullreferenceexception

大家好，我的项目中的一行代码出现空引用运行时错误，但是如果我断点然后单步执行，一切正常。有什么想法吗

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim checkbox_l As String = "CheckBox"
    Dim checkbox_i As string
    For i As Integer = 1 To id Step 1
        checkbox_i = checkbox_l + i.ToString
        Try
            If CType(Panel1.Controls(checkbox_i), CheckBox).Checked = True Then
                My.Settings.name = Panel1.Controls("CheckBox" & i).Text
                Call installer_properties()
                Call start_install()
            End If
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
    Next
End Sub 
```

该代码旨在检查是否已选中动态创建的复选框，然后相应地继续前进，但是我在该行中遇到错误

```
If CType(Panel1.Controls(checkbox_i), CheckBox).Checked = True Then 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:41:09.083

使用 Debug.Assert 捕捉它

```
Dim c as Control = Panel1.Controls(checkbox_i)
Debug.Assert(c IsNot Nothing)
Dim cb as CheckBox = TryCast(c, CheckBox)
If cb isNot Nothing Then
   If cb.Checked = True Then
      My.Settings.name = cb.Text
      Call installer_properties()
      Call start_install()
   End If
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T03:18:03.060

如果选中则得到结果 1 和 0 - 如果没有，你可以写下：

textbox1.text = Microsoft.VisualBasic.Right(Panel1.Controls("CheckBox" & i).ToString, 1)

# python - Python读取二进制：如何解包大量数字？

> ID：15726339
> 
> 赞同：1
> 
> 时间：2013-03-31T04:28:38.813
> 
> 标签：python

基本上我想读取一个包含大量双打的二进制文件。不知道如何实现以下目标：

```
N=10000000
fin=open("sth.bin","rb")
data = struct.unpack('dddddd......',fin.read(8*N)) #of course not working, but this is what I want
fin.close() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T04:42:22.580

遍历文件，一次解压块：

```
with open("sth.bin", "rb") as f:
    numbers = [
        struct.unpack('d', chunk)[0]
        for chunk in iter(lambda: f.read(8), "")
    ] 
```

你可以在这里做很多优化——一次读取更大的文件块（4096 字节通常是理想的）并创建一个[编译的结构](http://docs.python.org/2/library/struct.html#struct.Struct)——但这是一般的想法。如果性能特别重要，您还可以一次解压缩多个双精度数（例如，`struct.unpack('d' * 8, chunk)`）以减少函数调用的数量：

```
numbers = []
struct_4096 = struct.Struct("d" * 4096 / 8)
with open("sth.bin", "rb") as f:
    while True:
        chunk = f.read(4096)
        try:
            numbers.extend(struct_4096.unpack(chunk))
        except struct.error:
            numbers.extend(struct.unpack("d" * len(chunk) / 8)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T05:35:28.563

struct 支持计数的格式，例如以下代码将解包 100 个双精度：

```
import struct
struct.unpack("100d", string) 
```

如果您正在处理大量双打，我建议您使用 numpy：

```
np.fromfile(f, dtype=float, count=100) 
```

将从文件中创建一个 100 双数组。

# python - Python：将 pdb 与 Flask 应用程序一起使用

> ID：15726340
> 
> 赞同：5
> 
> 时间：2013-03-31T04:28:40.060
> 
> 标签：python, flask, pdb

我在 virtualenv 中使用 Flask 0.9 和 Python 2.7.1，并使用`foreman start`

在我将以下行添加到我的应用程序时构建的其他应用程序中：

```
import pdb; pdb.set_trace() 
```

然后重新加载浏览器窗口，我的终端窗口显示 pdb 交互式调试器：

```
(pdb) 
```

但是，在我的应用程序中，当我添加这些行时，什么也没有发生。浏览器窗口挂起并显示恒定的加载状态，但控制台中没有显示任何内容。

有什么魔法需要发生吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T04:33:19.180

这是因为您使用的是 Foreman，它捕获标准输出。

要使用 调试您的应用程序`pdb`，您需要“手动”运行它，使用`python app.py`或任何您使用的东西。

或者，您可以使用[WinPDB](http://winpdb.org/)（尽管名称与操作系统*无关），它可以让您远程调试 Python 进程。*当程序在另一台服务器上运行时，您甚至可以使用它。

# jquery - 请帮助我理解 jQuery 的新 .on 方法

> ID：15726345
> 
> 赞同：0
> 
> 时间：2013-03-31T04:29:06.597
> 
> 标签：jquery

我曾经使用 .live 但我现在尝试用更好的 .on 替换那些，但我似乎不理解 API 说明，因为下面的代码什么都不做，我应该收到警报。谁能看到我在哪里搞砸了？

```
<!DOCTYPE html>
<html>
    <head>
        <title>Online Media Player</title>
        <link rel="stylesheet" href="/assets/css/music-player.css" type="text/css" media="screen" charset="utf-8">

        <script src="/assets/js/jquery-1.8.3.js"></script>
    </head>

    <body>
        <div class="main-center">
            <h1>Please select your choice of music</h1>
            <a class="openplayer" data-genre="rock" href="#">Rock</a>
            <a class="openplayer"  data-genre="hip" href="#">Hip Hop</a>
            <a class="openplayer"  data-genre="country" href="#">Country</a>
            <a class="openplayer"  data-genre="featured" href="#">Featured Artist</a>
        </div> <!-- /.main-center -->

        <script type="text/javascript">
            (function($) {
                $('.openplayer').on('click', 'a', function(e){
                    var genre = $(this).data('genre');
                    e.preventDefault();
                    alert(genre);
                });
            })(jQuery);
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T04:31:17.450

您应该调用`on`元素的容器并将要附加到的元素的选择器传递给它。您现有的代码`on`不是在容器上调用，而是在链接本身上调用。尝试：

```
$('.main-center').on('click', '.openplayer', function(e) {
    var genre = $(this).data('genre');
    e.preventDefault();
    alert(genre);
}); 
```

# delphi-2010 - 没有客户端数据集的 dbgrid

> ID：15726347
> 
> 赞同：2
> 
> 时间：2013-03-31T04:29:15.387
> 
> 标签：delphi-2010, dbexpress, delphi

我有一个带有 dbgrid 和 sqlquery 组件的表单。我正在尝试用 sqlquery 填充 dbgrid。当我这样做时，我收到消息“单向数据集上不允许操作”。我不想使用客户端数据集，因为我不想要数据的“本地”副本，我想直接读取和显示数据。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T05:03:15.710

[文档](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.SqlExpr.TSQLQuery)清楚地指出（强调）：

> TSQLQuery 是一个**单向数据集**。与其他数据集不同，**单向数据集不会在内存中缓冲多条记录。因此，您只能使用 First 和 Next 方法进行导航**。没有内置的编辑支持：您只能通过显式创建 SQL UPDATE 命令或使用提供程序将数据集连接到客户端数据集来编辑 SQL 查询中的数据。

因为没有多条记录的缓冲，除了向前，你不能向任何方向移动，这意味着`DBGrid`不能显示多行或支持滚动。

（事实上​​，所有`DBExpress`组件都是单向的，根据关于[DBExpress 数据集类型的](http://docwiki.embarcadero.com/RADStudio/XE3/en/Types_of_dbExpress_Datasets)文档。）

您必须使用 a`TClientDataSet`或从 using 更改`DBExpress`为其他访问数据的方法，例如`ADO`，或者使用除`TDBGrid`（如 a `TStringGrid`）以外的其他方法显示数据并实现您自己的内部存储。但是，`TClientDataSet`如果您要检索的数据量在内存中是可管理的，则不必是磁盘文件；所有数据都可以保留在那里，而不是“本地副本”（“内存数据集”）。

# javascript - HTML5 Canvas 未在浏览器中显示

> ID：15726349
> 
> 赞同：0
> 
> 时间：2013-03-31T04:29:29.320
> 
> 标签：javascript, jquery, html

我正在按照[本](http://www.html5rocks.com/en/tutorials/canvas/notearsgame/#toc-introduction)教程学习使用 javascript 和 jQuery 进行 HTML5 游戏开发。但是，我已经遇到了一个问题。当我运行引用我的 js 文件的 HTML 页面时，没有加载任何内容，并且只是一个空白屏幕。这是两个文件的代码。请注意，我在本教程中还没有走得太远。

索引.html

```
<HTML>
<head>
</head>
<body>
<p>HTML5 and jQuery Tests</p>
<script type ="text/javascript" src="test.js"></script>
</body>
</HTML> 
```

测试.js

```
var CANVAS_WIDTH = 480;
var CANVAS_HEIGHT = 320;

var canvasElement = $("<canvas width='" + CANVAS_WIDTH +"' height='" + CANVAS_HEIGHT +        "'></canvas>");
var canvas = canvasElement.get(0).getContext("2d");
canvasElement.appendTo('body');
var FPS = 30;
setInterval(function() {
update();
draw();
}, 1000/FPS);
function draw() {
canvas.fillStyle = "#000"; 
canvas.fillText("hello.", 50, 50);
} 
```

任何帮助将不胜感激！另外，我是否可以在这个论坛上，在同一个线程上询问有关此代码的问题，还是我必须统计另一个？

谢谢！~地毯嘶嘶声

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:35:54.237

您没有`update`要调用的函数。当`setInterval`触发时（脚本加载后约 32 毫秒），您会收到错误消息。

您需要添加 jQuery。
这是一个为使 HTML 工作更容易而编写的库。
它需要存在于where does***之上。***`test.js`

您可以下载自己的副本，也可以链接到网络上其他地方的副本 - 两者都可以正常工作。

`$`jQuery 使用它作为一个函数来智能地抓取不同类型的项目：HTML、JS 等，并返回带有有用函数的 JS 对象，以便处理您所要求的任何内容。

无论如何，`update`仍然会导致错误，它只是排在第二位，落后于丢失的脚本。

# php - 按月份形式存储的日期对行进行排序

> ID：15726351
> 
> 赞同：-1
> 
> 时间：2013-03-31T04:29:37.643
> 
> 标签：php, mysql, sorting

实际上，我正在尝试按日期字段对我的行进行排序，其中日期以类似的形式存储

```
DateC
===========
April, 2012
May, 2012
January, 2013

Date
===========
2013-01-03 10:51:23
2013-02-19 10:51:23
2013-03-26 10:51:23 
```

但我不能简单地通过使用来对其进行排序`ORDER BY datec DESC`。

我不能使用`ORDER BY FIELD (datec, 'December 2012', November 2012'...)`，因为我的数据库中存储了两个日期。一个是时间戳 ie `date`，另一个是自定义日期，即`datec`用户自己输入的日期。如果该`datec`字段为空，则输出该`date`字段。

所以，我想要的是它应该按日期列对行进行排序......

请帮忙。如果你有什么问题，请问我......

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:42:33.037

日期以字符串格式存储。所以你需要使用[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)功能

尝试这个

```
SELECT * FROM table ORDER BY STR_TO_DATE(datec, "%M, %Y") DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T04:43:12.330

这是将日期作为字符串存储在数据库中的优点之一。`STR_TO_DATE()`如果您需要使用函数将字符串转换为有效日期，则仍然可以应用排序。

```
SELECT *
FROM   tableName
ORDER  BY STR_TO_DATE(datec, '%M, %Y') DESC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7bd9f/2)

关联

*   [STR_TO_DATE()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

* * *

如果您有时间更改架构，最好的方法是将这些日期存储为数据库`DATE`或`DATETIME`数据库中。如果您担心`SELECT`语句期间值的格式，仍然有一个函数可以调用`DATE_FORMAT()`，它将日期转换为您想要的格式的字符串。

*   [日期格式（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

例子，

```
SELECT DATE_FORMAT(CURDATE(), '%M, %Y') DateC 
```

将产生

```
March, 2013 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/9818)

* * *

**更新 1**

```
SELECT *
FROM   tableName
ORDER  BY STR_TO_DATE(datec, '%M, %Y') DESC,
          date DESC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/5e990/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T04:45:27.420

我认为这就是您正在寻找的，使用`STR_TO_DATE`and `COALESCE`：

```
select *
from yourtable
order by 
  COALESCE(STR_TO_DATE(datec, '%M %Y'),date) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/732a5/6)

# android - 用户 10036 和当前进程都没有 android.permission.DEVICE_POWER。

> ID：15726352
> 
> 赞同：2
> 
> 时间：2013-03-31T04:29:39.977
> 
> 标签：android, android-permissions

我需要通过应用程序上的按钮关闭设备。我向清单文件添加权限：

```
 <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="13" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.DEVICE_POWER"/> 
```

并在单击按钮上使用 powerOff 方法：

```
void powerOff(){
        PowerManager pm = (PowerManager) getSystemService(this.POWER_SERVICE);
        pm.goToSleep(SystemClock.uptimeMillis());
    } 
```

当我单击按钮时出现错误：

> 用户 10036 和当前进程都没有 android.permission.DEVICE_POWER。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:39:11.577

`DEVICE_POWER`是受限权限。除非您的应用使用系统签名进行签名，否则 PackageManager 不会授予您此权限。

# php - PHP：如何按列位置而不是按列名从 MySQL 表中选择？

> ID：15726356
> 
> 赞同：1
> 
> 时间：2013-03-31T04:30:20.693
> 
> 标签：php, mysql, select

我有一个有多个列的表，列名将来可以更改，而不是我的脚本按名称从列中选择（因为该信息可以更改），有没有办法按列位置选择？

例如，我想选择表格中的第二列...我可以轻松做到吗？

我明白不这样做的原因，但我仍然想这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:43:54.773

简单的解决方案？只是`SELECT * FROM table`，使用 $row = 获取`mysql_fetch_row()`并从中读取`$row[1]`，它将按顺序成为“第二列”的内容（因为它从 0 开始）。

如果您希望它更专业一点并且只选择需要的内容，您可以`INFORMATION_SCHEMA`使用如下查询获取第二列名称：

```
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = 'your database schema' AND TABLE_NAME = 'the wanted table name' AND ORDINAL_POSITION = 2; 
```

但是，如果您真的想以正确的方式做到这一点，那么请知道您将鼻子放在哪里。如果表结构发生了变化，并且您的代码因此需要进行调整，那就这样吧。这就是应该这样做的方式。如果你让它“工作”但依赖潜在的错误信息，它可能会在以后给你带来更大的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:33:41.300

在 PHP 中，您可以使用`$res = mysql_fetch_row($query)`. `$res[1]`然后您可以通过;获取第二列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T04:35:52.220

以下三个示例向您展示如何使用 MySQL、MySQLi 和 PDO 打印第 3 列。

# MySQL

```
while ($row = mysql_fetch_array($query)) {
  print $row[2];
} 
```

# MySQLi

```
$sth->execute();
$sth->bind_result($var1, $var2, $var3);
while ($sth->fetch()) {
  print $var3;
} 
```

# PDO

```
$sth->execute();
while ($row = $sth->fetchAll()) {
  print $row[2];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T04:37:38.690

这是一个糟糕的主意，我几乎不想给你一个解决方案，但这是可能的。MySQL 有一个名为的数据库`information_schema`，用于存储您可以查询的 DDL 数据。你所追求的将是`COLUMNS.ORDINAL_POSITION`。

```
SELECT COLUMN_NAME FROM information_schema.COLUMNS
WHERE TABLE_NAME = ? AND ORDINAL_POSITION = ? 
```

这将为您提供第 n 列的名称，您可以在后续查询的字段列表中使用它。在单个查询中执行此操作没有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-02T16:49:55.533

很多天前我遇到过这样的问题。但我找到了解决方案：

```
 $conn = new mysqli("localhost", "root", "", "Mybase");
  $result = $conn->query("SELECT * FROM imagesbase");
  $outp = "";
  while($rs = $result->fetch_array(MYSQLI_BOTH)) {`
     $outp .= "Picture: ".$rs[0]." ".$rs["ImgPathName"]."";`
  }
  $conn->close();
  echo "$outp"; 
```

此代码可以通过列号或列名更改。`MYSQLI_BOTH`，`MYSQLI_NUM`或`MYSQLI_ASSOC`用于此。

# java - ActionListener 无法通过按钮将数据从 JList 移动到其他 JList

> ID：15726359
> 
> 赞同：0
> 
> 时间：2013-03-31T04:30:39.343
> 
> 标签：java, swing, actionlistener, jlist, defaultlistmodel

我的程序基于 API。我有一个 JList 和一个有一些名称的模型。还有一个 selectListener 来获取选中的项目和一个按钮来将该项目发送到另一个窗口，这是我的第一个列表：

第一个列表（窗口）并将项目发送到另一个列表。

```
final DefaultListModel<String> Names = new DefaultListModel<String>();
final JList<MyAPI> Places = new JList(Names);

private JList<MyAPI> locList;
private DefaultListModel<MyAPI> favourites;

    public AddLocation(JList<MyAPI> locList, DefaultListModel<MyAPI> favourites){
        this.locList = locList;
        this.favourites = favourites;
}

addThis.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e) {
     Object chose = Places.getSelectedValue();
     favourites.addElement((MyAPI) chose); // error in this line
                }
            }); 
```

这是应在此处添加所选项目的另一个窗口：

```
final DefaultListModel<MyAPI> favourites;
final JList<MyAPI> locList;

favourites = new DefaultListModel<MyAPI>();
locList = new JList<MyAPI>(favourites); 
```

所以现在两个窗口都加载了，第一个列表加载了它的名字。但是当我按下按钮添加这个时，它会给出错误并指向这一行：

```
favourites.addElement((MyAPI) chose); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:52:18.227

您的第一个模型定义如下：

```
final DefaultListModel<String> Names ...; 
```

您的第二个模型定义如下：

```
final DefaultListModel<MyAPI> favourites; 
```

您的第一个列表模型包含`String`实例，您的第二个模型包含`MyAPI`实例。因此，当执行此行时：

```
favourites.addElement((MyAPI) chose); 
```

您正在尝试从 a`MyAPI`中提取 a `String`，但这不起作用，并且可能 a`ClassCastException`被抛出。

您需要将第二个列表模型声明为，`final DefaultListModel<String> favourites;`或者您创建一个`MyAPI`基于所选`String`( `new MyAPI(chose)`?) 的实例。

# data-structures - 给定路线信息和站点列表的活动站点时间表的算法选择？

> ID：15726364
> 
> 赞同：0
> 
> 时间：2013-03-31T04:31:36.383
> 
> 标签：data-structures

1.  SHOW_SCHEDULE(START_CITY, START_STATE, HOURS)

此功能查看存储在系统中的当前活动停止集，以为候选人创建时间表。时间表包括当前存储的活动站点集合的子集以及这些活动站点之间的路线信息。时间表必须包括在给定小时数内可以容纳的最大活动停止次数。START_CITY、START_STATE 一起表示时间表中的第一个城市。HOURS 表示制定计划的小时数。

这个函数的最佳算法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:46:46.593

你可以看看这个关于 Djikstra 路由算法的[答案（你可能需要这样定义你的图）。](https://stackoverflow.com/a/7245904/326543)

基本上，将您的停靠点作为顶点，并且路线可能会踩到这些顶点。

现在，由于您引入了时间维度，因此他使路线有些非静态静态。再次按照上述答案中的建议查看距离矢量路由。

以下链接应提供有关路由算法的更多见解和比较

1.  [维基百科旅程规划师](http://en.wikipedia.org/wiki/Journey_Planner)
2.  [本文](http://algo2.iti.kit.edu/documents/routeplanning/weaOverview.pdf)比较了其他比 Djikstra 算法更快的算法

# java - 如何根据设置的对象实例变量值自定义java hashset以检查重复

> ID：15726366
> 
> 赞同：0
> 
> 时间：2013-03-31T04:31:49.707
> 
> 标签：java

默认设置不能有重复记录，但假设我有类

```
class Employee {
   Integer emp_id;
    String name;
   // other fields and their getter 
  Employee(String name) {
       emp_id++;
   this.name=name;
}
} 
```

现在我在我的另一个类中声明了一个集合

```
 set<Employee> empSet = new HashSet<Employee>();
      Employee e1 = new Employee ("abc");
      Employee e2 = new Employee ("abc"); 
```

所以在将它插入到集合中时

```
 empSet.add(e1);
      empSet.add(e2); 
```

然后第一个 e1 添加到 set 但第二个 e2 返回 false。

现在我想要的是他们的名字没有重复。所以我想在插入集合时检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:37:41.790

您应该重写class 的`hashcode`and`equals`方法。`Employee`

您可以通过为不同的对象 `equals`填充不同的方法来确保方法的重复策略。`hashcode`

[查找相同实现的示例](http://www.javabeat.net/2007/08/hashcode-and-equals-methods/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:39:40.180

您可以使用 COMPARATOR 类删除重复项...您必须覆盖比较方法...例如代码请参阅此页面：http: [//java2novice.com/java-collections-and-util/treeset/duplicate-objects/](http://java2novice.com/java-collections-and-util/treeset/duplicate-objects/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T05:03:05.797

正如其他用户所提到的，您需要覆盖 Employee 类的 hashCode() 和 equals() 方法，以确定任何两个 Employee 对象是否相等/相同。

以下是示例实现，供您快速理解。这将不允许您将两个同名的 Employee 对象添加到 Set 中。

```
public class Employee {
static int emp_id;
String name;
// other fields and their getter 
Employee(String name) {
  emp_id++;
  this.name=name;
}

@Override
public int hashCode() {
    int code = name.hashCode();
    return code;
}

@Override
public boolean equals(Object obj) {
Employee empObj = (Employee) obj;
if(empObj.name.equalsIgnoreCase(this.name)) {
      return true;
}
return false;
}
} 
```

希望这会有所帮助。

# c# - 使用 C# 在 Word 中选择每个新段落的第一个字符

> ID：15726368
> 
> 赞同：0
> 
> 时间：2013-03-31T04:32:31.937
> 
> 标签：c#, ms-word

我正在做 Word Automation，想选择 Word 中每个新段落的每个第一个字符。使用我的代码，我只能选择第一段*的第一个字符，而不能选择其他任何*字符。谁能告诉我哪里出错了？

```
foreach (Word.Paragraph aPar in oWordDoc.Paragraphs) {

    Word.Range parRng = aPar.Range;
    string sText = parRng.Text;
    object startLocation5 = 2;
    object endLocation5 = 3;
    rng5 = oWordDoc.Range(ref startLocation5, ref endLocation5);
    rng5.Text = rng5.Text;
} 
```

这是我的文件：

> 馏分（甘露聚糖和木聚糖）酶水解。结晶纤维素的酶水解 – 裂解为可发酵的 D – 葡萄糖 [71,74–79]。
> 
> 半乳糖（葡糖）甘露聚糖的酶水解，特别是存在于软木中，是通过 endo-b-1,4-甘露聚糖酶的作用完成的，该酶随机切割

我想选择“f”，然后选择“T”（第二段的第一个字符）。

# autofac - 将派生存储库注册为立即实现的接口

> ID：15726374
> 
> 赞同：1
> 
> 时间：2013-03-31T04:33:21.987
> 
> 标签：autofac

我有一种使用存储库模式的情况，我希望有一些不对应于任何实体的额外存储库。

例如，这是一个：

```
 public class TargetRepository : RepositoryBase<Target>, ITargetRepository
{
    public TargetRepository(IDatabaseFactory databaseFactory)
        :base(databaseFactory)
    {
    }

            public IEnumerable<Target>  GetValidTargets(){ ... }
}
public interface ITargetRepository : IRepository<Target>
{
            IEnumerable<Target>  GetValidTargets();
} 
```

`Target`实体在哪里。

然后我想有一些像这样的其他存储库：

```
 public class ScatterPlotRepositoryProxy : TargetRepository, IScatterPlotRepositoryProxy
{
    public ScatterPlotRepositoryProxy(IDatabaseFactory databaseFactory)
        :base(databaseFactory)
    { }

            public IEnumerable<ScatterPlotModel> GetSavedScatterPlots() {
                   this.GetValidTargets().Select(t => new ScatterPlotModel{ ... });
            }
}

public interface IScatterPlotRepositoryProxy
{
         IEnumerable<ScatterPlotModel> GetSavedScatterPlots()
} 
```

注意这个是如何从`TargetRepository`not继承的`RepositoryBase<Entity>`。那是因为`ScatterPlotModel`它不是一个实体，甚至没有持久化。但是，我想要另一层分离，这样我`TargetRespository`就不会被所有不同图表类型的方法弄得一团糟。

我还没有真正实现这个，所以还没有错误。但我预见我的 Autofac DI 调用会在以后引起问题，所以我提前询问。

我将如何使用 Autofac 正确注册这些“存储库代理”？目前我有这个：

```
builder.RegisterAssemblyTypes(typeof(TargetRepository ).Assembly).Where(t => t.Name.EndsWith("Repository")).AsImplementedInterfaces().InstancePerApiRequest(); 
```

添加这个似乎会发生冲突：

```
 builder.RegisterAssemblyTypes(typeof(TargetRepository ).Assembly).Where(t => t.Name.EndsWith("RepositoryProxy")).AsImplementedInterfaces().InstancePerHttpRequest(); 
```

我会得到我期望的行为（`IScatterPlotRepositoryProxy`将解决`ScatterPlotRepositoryProxy`并且`ITargetRepository`应该继续解决，`TargetRepository`尽管`ScatterPlotRepositoryProxy`也从基本存储库实现它）？

尝试从程序集中一次性完成所有操作，以避免必须为每个存储库添加行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:05:33.927

您的系统中缺少抽象。这给你带来了各种各样的麻烦和你已经目睹的痛苦。

您需要的是对系统中查询的通用抽象。这消除了对自定义存储库接口的需要。自定义存储库接口，例如`ITargetRepository`违反五分之三的[SOLID](https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则，这毫无疑问会导致各种可维护性问题。

我过去写过一篇关于这个主题的文章，所以我不会在这里重复自己（让我们保持[干燥](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)），但你绝对应该阅读这篇文章：[同时......在我的架构的查询方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。

应用该文章中给出的体系结构指南时，使用 Autofac 注册存储库和查询不会有任何问题。这只是一个问题：

```
builder.RegisterAssemblyTypes(typeof(IRepository<>).Assembly)
    .AsClosedTypesOf(typeof(IRepository<>));

builder.RegisterAssemblyTypes(typeof(IQueryHandler<,>).Assembly)
    .AsClosedTypesOf(typeof(IQueryHandler<,>)); 
```

# jsf - 如何在运行时以编程方式生成 JSF 组件？

> ID：15726376
> 
> 赞同：1
> 
> 时间：2013-03-31T04:33:46.247
> 
> 标签：jsf, jsf-2

我必须创建屏幕以在视图中显示大量 JPA 实体。创建一个 facelet 并将一组字段传递给它会很棒，例如`List<Object>`.

facelet/自定义组件需要将列表中的每个元素转换为适当的标签以进行显示，例如将枚举字段转换为 h:selectOneMenu，将字符串字段转换为 h:inputText 等。这需要在运行时完成。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:45:13.340

之前参与过一个从存储的配置动态创建整个页面的项目。你需要两个基本的东西

*   一个BackingBean。您将使用它来访问 facelet 上的 UIComponent，它将充当生成的 UIComponents 的父级。类似于 panelGroup 的东西。但是，您需要将 UIComponent 绑定到支持 bean，以便拥有一个父级，您将针对该父级添加动态创建的 UIComponents
*   访问应用程序组件。通常是 FacesContext.getApplication()（我在 JavaEE 5 中处理过这个问题，所以它看起来可能与注入有点不同）。拥有 Application 组件后，调用 createComponent 方法，传入要创建的组件类型。

然后它变成了动态创建组件、在代码中配置它们并将它们添加到通过绑定 bean 定义的父 UIComponent 的活动。这可能很棘手，但可以做到。

# javascript - 如何捆绑 Angular $http.get() 调用？

> ID：15726377
> 
> 赞同：18
> 
> 时间：2013-03-31T04:34:00.987
> 
> 标签：javascript, angularjs

我有一个控制器需要检索两个单独的 REST 资源，这些资源将填充两个下拉列表。我想避免填充它们中的任何一个，直到两个 $http.get() 调用都返回，以便下拉列表看起来是同时填充的，而不是一个接一个地滴入。

是否可以捆绑 $http.get() 调用并为两个返回的数组优雅地设置 $scope 变量，而不必为两种情况编写状态逻辑，例如 a 在 b 之前返回，b 在 a 之前返回？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-31T05:11:22.800

调用 Angular [$http](http://docs.angularjs.org/api/ng.$http)函数的返回值是一个`Promise`使用[$q](http://docs.angularjs.org/api/ng.$q)的对象（受[Kris Kowal 的 Q](https://github.com/kriskowal/q)启发的 promise/deferred 实现）。

看一下`$q.all(promises)`方法文档：

> 将多个 Promise 组合成一个 Promise，当所有输入 Promise 都解决时，该 Promise 将被解决。
> 
> **参数**
> 
> *   承诺——`{Array.<Promise>}`一系列承诺。
> 
> **退货**
> 
> `{Promise}`– 返回一个单独的 Promise，该 Promise 将使用一个值数组解析，每个值对应于 Promise 数组中相同索引处的 Promise。如果其中任何`promises`一个被拒绝解决，那么这个产生的承诺将被同样的拒绝解决。

您可以使用`$q.all`“加入”您的 http 调用的结果，代码类似于：

```
app.controller("AppCtrl", function ($scope, $http, $q) {

  $q.all([
    $http.get('/someUrl1'),
    $http.get('/someUrl2')
  ]).then(function(results) {
     /* your logic here */
  });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T04:53:51.863

你的意思是这样的：

```
function someController( $scope, $http, $q ) {
    var first_meth = $http.get("first_url"),
        second_meth = $http.get("second_url");
    $q.all([first_meth, second_meth]).then(function(all_your_results_array) { 
        //here you'll get results for both the calls
    });
} 
```

参考：[Angular JS 文档](http://docs.angularjs.org/api/ng.$q)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T14:36:29.113

您可以在此处使用异步 javsscript 库：[https](https://github.com/caolan/async) ://github.com/caolan/async 。

使用系列电话。它将进行 2 次调用，然后在两者都完成后调用一次回调。

# python - 如何在 Jython 中使用 Weka 库中的 Adaboost 算法

> ID：15726380
> 
> 赞同：0
> 
> 时间：2013-03-31T04:34:48.917
> 
> 标签：python, jython, weka

我在 Jython 中使用 Weka 类，问题是如何定义 Adaboost 的分类器。

我用：

导入 weka.classifiers.meta.AdaBoostM1 作为 AdaBoost

但我不知道如何调整其分类器，例如设置 J48。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T18:03:47.127

这个 jython 代码在 3.7.10 中为我工作

```
algo = AdaBoostM1()
option_string = " -P 100 -S 1 -I " + str(num) + " -W weka.classifiers.trees.J48"
options = splitOptions(option_string)
algo.setOptions(options)
algo.buildClassifier(data) 
```

你也可以这样做：

```
algo = AdaBoostM1()
options = [];
options.append("-P");
options.append("100");
options.append("-S");
options.append("1");
options.append("-I");
options.append(str(num));
options.append("-W");
options.append("weka.classifiers.trees.J48");
algo.buildClassifier(data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:38:49.787

weka 中的几乎每个分类器都可以从命令行使用。此命令行用法通过选项处理程序接口提供给 java 用户。请参阅[在您的 Java 代码中使用 WEKA](http://weka.wikispaces.com/Use+WEKA+in+your+Java+code)。

```
Option handling
Weka schemes that implement the weka.core.OptionHandler interface, 
such as classifiers, clusterers, and filters, offer the following methods 
for setting and retrieving options: 
```

据此，您将使用以下 java 代码：

```
import weka.classifiers.meta.AdaBoostM1;

AdaBoostM1 classifier = new AdaBoostM1();
Instances data = readArffFile();
String optionString = " -P 100 -S 1 -I 10 -W weka.classifiers.trees.DecisionStump";
classifier.setOptions(weka.core.Utils.splitOptions(optionString);
classifier.buildClassifier(data); 
```

恐怕您需要将此 java 代码更改为 jython。我不认为，这会很难。

# c - 模拟网络接口

> ID：15726382
> 
> 赞同：0
> 
> 时间：2013-03-31T04:35:01.800
> 
> 标签：c, networking, virtualization

有人可以解释（在stackoverflow答案的大小范围内）模拟网络接口所需的代码吗？我只知道有像 Qemu 这样的虚拟化软件可以进行这种特定类型的硬件仿真，但不知道它是如何工作的。许多书籍将向您展示如何创建一个侦听 TCP 套接字的程序，而不是创建一个获取自己 IP 地址的主机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:37:29.400

VirtualBox 是开源的。作为一个具有网络支持的虚拟机，它应该足以向您展示该做什么以及一个有效的实现。 [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:51:25.703

这实际上取决于您的意思以及您想要实现的目标。如果你想通过虚拟机管理程序的原语模拟一些你需要的真实硬件，模拟相应适配器的数据表中提到的大部分方面，如果你想引入一些服务，例如在内部网络中可见的 DNS 或 HTTP 服务：你需要端口教一些用户土地堆栈（例如LWIP 或 Slirp，或者如果您只需要 UDP 或更低版本，则部分）与管理程序的内部网络通信。

# c# - 从另一个线程写入日志，在计时器内，在线程内

> ID：15726389
> 
> 赞同：0
> 
> 时间：2013-03-31T04:35:56.060
> 
> 标签：c#

我正在编写一个应用程序来扫描图像板上的图像，然后下载它们。当然，这必须是螺纹，因为可以一次刮掉多个板。我已经完成了基本的功能，但现在我正在碰壁。

目前我通过给出一个url来启动线程，然后按下一个按钮，这个按钮启动一个指向一个类的线程。

我的问题存在于这个类中，因为我在那里使用了一个计时器。

目前，数据被一次性推送到日志，但应该按设置推送数据。

目前，这是我绑定到计时器的滴答事件的函数：

```
 public void scanForImages(object s, ElapsedEventArgs e)
    {

        if (status != 1 && status != 4)
        {
            status = 1;
            int i = 0;
            while (status == 1)
            {
                main.updateLog(th.Name + ": Blaat\n");
                i++;
                if (i > 50)
                {
                    status = 4;
                    t.Stop();
                    main.updateThreads("Aborting: " + th.Name, th);

                    th.Abort();
                }
            }
        }
        else
        {
            t.Stop();
        }
    } 
```

它在我的文本框中返回输出，但它同时推送所有内容（所有`th.Name + ": Blaat\n"`

更新日志：公共无效更新日志（字符串 txt）{

```
 if (InvokeRequired) 
        { 
            Action action = () => textBox2.AppendText(txt); 
            textBox2.Invoke(action); 
        } 
        else 
        { 
            textBox2.AppendText(txt); 
        } 

    } 
```

我究竟做错了什么？（如果需要，可以提供更多代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:32:51.617

您没有提供 .updatelog 代码，因此我们可以正确回答......您必须刷新该函数内的文件，或者您必须启动调度程序

```
Dispatcher.Invoke(DispatcherPriority.Normal,
                      new Action<string>(main.updateLog),
                      th.Name + ": Blaat\n"); 
```

# c++ - 定点处理器中浮点运算的数据结构

> ID：15726393
> 
> 赞同：2
> 
> 时间：2013-03-31T04:36:34.217
> 
> 标签：c++, c, data-structures, floating-point, fixed-point

我需要对用于遗留应用程序的定点处理器进行编程。需要新功能，这些功能需要大的动态范围，即使在缩放之后也很可能超出定点范围。由于处理器不会因为几个原因而改变，我计划结合基于定点算术的浮点运算——基本上是基于软件的方法。我想为底层定点处理器定义一些数据结构来表示 C 中的浮点数。有可能做吗？我打算使用[IEEE 浮点表示](http://en.wikipedia.org/wiki/IEEE_floating_point)。什么样的数据结构有利于实现乘法、除法、加法和减法等基本运算。是否已经有一些 C/C++ 中可用的开源库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:10:34.413

大多数不支持本机浮点的微控制器的 C 语言开发工具都提供了用于浮点运算的软件库。即使您使用汇编程序进行编程，您也可能会使用这些库。（只是好奇，您使用的是哪种处理器和哪些开发工具？）

但是，如果您认真编写自己的浮点库，最有效的方法是将例程视为对整数进行操作的例程。您可以使用联合或类似以下的代码在浮点和整数表示之间进行转换。

```
uint32_t integer_representation = *(uint32_t *)&fvalue; 
```

请注意，这本质上是*未定义的行为*，因为 C 标准中未指定浮点数的格式。

如果您坚持使用匹配的浮点和整数类型（通常是 32 或 64 位类型），问题会容易得多，这样您就可以将例程视为普通*整数*例程，例如，*加法*需要两个 32 位整数表示浮点值并返回结果的 32 位整数表示。

此外，如果您自己使用这些例程，您可能会逃脱标准的部分未实现，例如异常标志、次正规数、NaN 和 Inf 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:45:20.993

你真的不需要*任何*数据结构来做到这一点。您只需使用整数来表示浮点编码，使用整数来表示解压缩的符号、指数和有效数字字段。

# eclipse - 在 Eclipse 中使用 Pydev 自动完成时，如何保持可选关键字的持久显示？

> ID：15726395
> 
> 赞同：3
> 
> 时间：2013-03-31T04:36:55.257
> 
> 标签：eclipse, autocomplete, pydev

在 Pydev 我输入这个：

```
import logging
logging.basicConfig 
```

这将在一个窗口中显示自动完成。列出了几个可选关键字。但是只要我输入括号，自动完成窗口就会消失，我再也看不到关键字了。有没有办法让这些信息持久化？如果没有，有没有办法将自动完成输出到控制台窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:43:54.600

似乎没有为此设置。如果你想开始逆向工程，这可能是一个很好的起点：

[http://xpomul.bloggles.info/2008/08/12/advanced-features-in-eclipse-popup-menus-take-2-the-new-api/](http://xpomul.bloggles.info/2008/08/12/advanced-features-in-eclipse-popup-menus-take-2-the-new-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T00:22:53.447

如果您不介意输入一些额外的按键，您可以将内容复制到剪贴板：tab、tab、Ctrl-A、Ctrl-C。然后你可以 Ctrl-V 进入某个编辑器窗口。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T14:43:42.537

输出自动完成使用 ctrl+space

# html - 无法单击以聚焦/编辑浮动表单元素

> ID：15726397
> 
> 赞同：0
> 
> 时间：2013-03-31T04:37:01.133
> 
> 标签：html, css, grid, css-float, zurb-foundation

我正在使用[Zurb Foundation 的 Grid](http://foundation.zurb.com/docs/components/forms.html)来布置表格。当我浮动前几个文本并选择输入以将它们布置在 2 列中时，我无法单击它们来编辑它们。请注意，我可以通过输入选项卡来编辑它们。

查看[演示问题的示例](http://jsfiddle.net/prembo/pEzYu/)。

可以单击浮动输入下方的文本区域进行聚焦和正常编辑。

当我`float: left;`从`form#Form_Form div.field.text, form#Form_Form div.field.dropdown`所有元素中删除时，可以正常编辑。

是什么阻止了浮动输入在单击时获得焦点？

经过一番调查，我发现了原因 - 希望以下答案能帮助其他遇到同样问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:37:01.133

我所要做的就是让 textarea 也浮动。请参阅[工作示例](http://jsfiddle.net/prembo/j9umH/)。

```
form#Form_Form div.field.textarea {
    ...
    float: left;
    // clear: both;  // clearing also worked.
} 
```

未浮动的 textarea 的 div 正在*“覆盖”*浮动输入，防止输入在单击鼠标时获得焦点。因此，[另一种解决方案](https://stackoverflow.com/questions/11281271/why-a-fixed-element-covers-a-floated-element)是更改“z-index”，使 textarea 的 div 低于浮动输入。

# jquery - 根据窗口大小有条件地加载一些 html

> ID：15726399
> 
> 赞同：1
> 
> 时间：2013-03-31T04:37:03.527
> 
> 标签：jquery

我想加载地图，但我只想加载它，如果我可以假设他们在 wifi 上。由于没有真正的方法可以做到这一点，我将假设如果窗口宽度大于 600，那么它们就是。加载 iframe 有点棘手 - 但只需加载图像就可以让我开始。这行得通，但是如果我在其中塞入一堆复杂的html，它似乎就行不通了。无论如何，我不确定我是否应该在我的 html 中间放置脚本。

```
<script>
  if (document.documentElement.clientWidth > 600) {
    document.write("<h1>Hello</h1>");
  }
</script> 
```

我认为这篇[文章](http://24ways.org/2011/conditional-loading-for-responsive-designs/)会对我有所帮助，但它有点过头了。

有没有人有一些提示或一些读物给我？

谢谢。

# 编辑：看看[这个小提琴](http://jsfiddle.net/sheriffderek/m3jZz/)

也许我应该有一个永恒的 .html 文件并将其拉入......？

转义和东西存在问题 - 当嵌入代码中有大量疯狂的字符时......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T05:22:53.893

您永远不应该使用`document.write()`它，这不是使用它的好习惯。相反，您可以使用`.innerHTML`javascript 或`.html()`jQuery。jQuery 还有其他几种方法可以完成此类工作，例如`.append()`，`.appendTo()`类似`.prepend()`地`.prependTo()`：

### jQuery：

```
$(function () {
   var width = $(window).width();
   if (width <= 600) {
      $('<p>lesser than 600</p>').appendTo('body');
   } else {
      $('<p>greater than 600</p>').appendTo('body');
   }
}); 
```

### [演示小提琴](http://jsfiddle.net/gWfe4/)

### CSS 媒体查询：

您也可以使用 css 媒体查询来实现这种事情：

```
span {
   color:green;
   font-weight:bold;
}
.div600 {
   display:none
}
.divOther {
   display:block
}
@media all and (max-width:600px) { /****<-----This media query******/
   .div600 {
       display:block
   }
   .divOther {
       display:none
   }
} 
```

### [演示小提琴 CSS 媒体查询](http://jsfiddle.net/mXQ9H/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T04:46:20.217

你想要这样的东西吗...

```
 var width =  $(window).width(); //retrieve current window width

  if(width > 600){
      $("#articleID").html(Your_Html_Section_Which_you_want_to_put_in_article);
      //document.write("<h1>Hello</h1>");
  } 
```

# clojure - 如何用这个 Clojure 代码重写（def）？

> ID：15726406
> 
> 赞同：1
> 
> 时间：2013-03-31T04:37:58.737
> 
> 标签：clojure, functional-programming, lisp, state

我写了一个基于[deWitter 的游戏循环的游戏循环](http://www.koonsolo.com/news/dewitters-gameloop/)。

但是，我不确定如何将其转移到更实用的状态。我意识到代码中可能需要保留一些可变状态，但是是否有清理无关`def`s 的一般原则？

```
(ns beepboop.core)

(def ticks-per-second 25)
(def skip-ticks (/ 1000 ticks-per-second))
(def max-frameskip 5)

(defn update []
  (println "Updating."))

(defn display [delta]
  (println "Displaying with delta: " delta))

(defn -main []
  (def *next-tick* (System/currentTimeMillis))
  (while true
    (def *loops* 0)
    (while (and
            (> (System/currentTimeMillis)
               *next-tick*)
            (< *loops*
               max-frameskip))
      (update)
      (def *next-tick* (+ *next-tick* skip-ticks))
      (def *loops* (+ *loops* 1)))
    (display
     (/ (+ (System/currentTimeMillis) skip-ticks (* -1 *next-tick*))
        skip-ticks)))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T05:03:38.263

您应该使用`loop`and`recur`来更新循环变量：

```
(defn -main []
  (loop [next-tick (System/currentTimeMillis)]
    (let [next-next 
          (loop [next-tick next-tick
                 loops 0]
            (if (and (> (System/currentTimeMillis) next-tick)
                     (< loops max-frameskip))
                (do (update)
                    (recur (+ next-tick skip-ticks) (+ loops 1)))
                next-tick))]
      (display (/ (+ (System/currentTimeMillis) skip-ticks (- next-next))
                  skip-ticks))
      (recur next-next)))) 
```

# jquery - 如何使用引导选择？

> ID：15726411
> 
> 赞同：13
> 
> 时间：2013-03-31T04:39:35.303
> 
> 标签：jquery, html, twitter-bootstrap, select

我是新手。我正在尝试**Bootstrap-select**但我没有得到像这里[https://developer.snapappointments.com/bootstrap-select/](https://developer.snapappointments.com/bootstrap-select/)这样的预期效果。我已经下载了文件并指向了头部的 CSS 和 JS。我也在头部通过 JavaScript 启用了 Bootstrap-select，但仍然无法正常工作——我只是获得了默认外观。这是我的完整代码。我在这里做错了什么？任何提示将不胜感激。

```
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Untitled 1</title>
<link href="bootstrap-master/docs/assets/css/bootstrap.css" rel="stylesheet" />
<link href="bootstrap-master/docs/assets/css/bootstrap-select.css" rel="stylesheet" />
<script src="bootstrap-master/docs/assets/js/bootstrap-select.js" type="text/javascript"></script>
<script>
$('.selectpicker').selectpicker({
      style: 'btn-info',
      size: 4
  });
</script>
</head>

<body>
<select class="selectpicker">
    <option>Mustard</option>
    <option>Ketchup</option>
    <option>Relish</option>
</select>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-25T09:43:47.957

我有一个类似的问题。对于以后像我一样提出这个问题的任何人来说，这是一个工作示例。

请注意，您必须包含**2 个 CSS**文件和**3 个 JavaScript文件。**

```
$(document).ready(function(e) {
  $('.selectpicker').selectpicker();
});
```

```
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" media="screen" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.9.3/css/bootstrap-select.min.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.9.3/js/bootstrap-select.min.js"></script>

<select class="selectpicker">
  <option>Mustard</option>
  <option>Ketchup</option>
  <option>Relish</option>
</select>
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T05:35:35.453

```
$(document).ready(function() {
  $('.selectpicker').selectpicker({
    style: 'btn-info',
    size: 4
  });
}); 
```

您的脚本已声明并因此在 -declaration 之前执行，*导致*`<select class="selectpicker">`bootstrap-select 永远不会被初始化 opon `.selectpicker`（运行脚本时 selectpicker 不存在）。所以把它放在`document(ready)`HTML 之后。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-31T04:42:00.170

包括 jquery 库和 bootstrap js

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="bootstrap-master/docs/assets/js/bootstrap.min.js" type="text/javascript"></script> 
```

并编码为

```
$(document).ready(function() {
$('.selectpicker').selectpicker({
      style: 'btn-info',
      size: 4
  });
  }); 
```

**注意：** 始终使用缩小的 css 和 js，以提高页面速度

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-09T22:33:33.793

1年后，我遇到了同样的问题。这对我有用：

1-在所有者站点下载 zip 文件 - [https://developer.snapappointments.com/bootstrap-select/](https://developer.snapappointments.com/bootstrap-select/)

2-CSS，内头标签->2files

```
<link rel="stylesheet" type="text/css" href="yourPath/silviomoreto-bootstrap-select-83d5a1b/dist/css/bootstrap-select.css">
<link href="yourPath/bootstrap.min.css" rel="stylesheet"> 
```

3-Js 文件，在关闭 bode 标记之前的末尾。

```
<body>
<select class="selectpicker">
    <option>Mustard</option>
    <option>Ketchup</option>
    <option>Relish</option>
  </select> 

<script type="text/javascript" src="yourPath/silviomoreto-bootstrap-select-83d5a1b/dist/js/bootstrap-select.js"></script>
<script type="text/javascript" src="yourPath/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="yourPath/bootstrap.min.js"></script>

<script>
  $(document).ready(function () {
    $('.selectpicker').selectpicker();
  });
</script>
</body> 
```

# c++ - 我的 socks v5 握手有什么问题？

> ID：15726415
> 
> 赞同：-2
> 
> 时间：2013-03-31T04:39:57.120
> 
> 标签：c++, c, network-programming, socks

我正在尝试通过实现 SOCKS5 来让我的程序通过 tor 引导它的流量，到目前为止我已经得到了这个：

```
char first =(0x00,0x01,0x05);
char sec=(0x50,0x00,0xE2,0xE1,0x7D,0x4A,0x01,0x00,0x01,0x05);
send(ProxySocket, &first,(int) 3,0);
send(ProxySocket, &sec, (int) sizeof(sec),0); 
```

但是当我运行我的程序时，tor 告诉我“[警告] 获取袜子握手失败。关闭。” 我发送的数据包有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:47:00.517

这段代码是错误的。char first 的值 = (0x00, 0x01, 0x05); 将是 0x05。请参阅作业中的括号规则。我认为应该是 char first[] = {0x00, 0x01, 0x05}; 现在您可以先使用 sizeof 运算符。

在第二个发送调用中，您使用的是 sizeof(sec) ，结果是一个字符。

采用：

```
 char sec[] = {0x50,0x00,0xE2,0xE1,0x7D,0x4A,0x01,0x00,0x01,0x05}; 
```

您的代码应该是：

```
char first[] ={0x00,0x01,0x05};
char sec[]={0x50,0x00,0xE2,0xE1,0x7D,0x4A,0x01,0x00,0x01,0x05};
send(ProxySocket, first,(int) sizeof(first),0);
send(ProxySocket, sec, (int) sizeof(sec),0); 
```

# html - Rails 从 Helper 模块返回多个 content_tags

> ID：15726417
> 
> 赞同：5
> 
> 时间：2013-03-31T04:40:18.600
> 
> 标签：html, ruby-on-rails, ruby, module, helper

我写了以下助手：

```
def section_to_html (block)
      case block[0].downcase
      when "paragraph"
        block.shift
        block.each do |value|
          return content_tag(:p, value)
        end
      end
  end 
```

目前正在解析这些数组。

```
["paragraph", "This is the first paragraph."]
["paragraph", "This is the second.", "And here's an extra paragraph."] 
```

它返回：

```
<p>This is the first paragraph.</p>
<p>This is the second.</p> 
```

有没有办法积累 content_tag？所以它返回：

```
<p>This is the first paragraph.</p>
<p>This is the second.</p>
<p>And here's an extra paragraph.</p> 
```

我现在唯一的解决方案是使用部分代替。但是一旦我开始在案例条件中添加更多内容，这将变得非常混乱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T11:21:32.147

使用#concat：

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-concat](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-concat)

这个线程可能会有所帮助：

[rails，如何使用 content_tag 在助手中构建表？](https://stackoverflow.com/questions/3863844/rails-how-to-build-table-in-helper-using-content-tag)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-27T18:46:43.353

由于您想返回一系列标签而不必将它们嵌套在另一个标签中，并且您正在处理来自数组的内容，因此可以解决问题：

```
paragraphs = %w(a b c d e) # some dummy paragraphs
tags = html_escape('') # initialize an html safe string we can append to
paragraphs.each { |paragraph| tags << content_tag(:p, paragraph) }
tags # is now an html safe string containing your paragraphs in p tags 
```

`content_tag`[`ActiveSupport::SafeBuffer`](https://api.rubyonrails.org/classes/ActiveSupport/SafeBuffer.html)返回（继承自`String`）的一个实例。调用[`html_escape`](https://api.rubyonrails.org/classes/ERB/Util.html#method-c-html_escape)空字符串将使该字符串成为 的实例`ActiveSupport::SafeBuffer`，因此当您将`content_tag`调用的输出附加到它时，您将获得 html 安全字符串中的所有标签。

（我今天在尝试解决同样的问题时发现了这个问题。我的解决方案对于最初的问题来说为时已晚，但希望能对其他人有所帮助！）

# python - py2app 导入会破坏 cython

> ID：15726418
> 
> 赞同：0
> 
> 时间：2013-03-31T04:40:28.277
> 
> 标签：python, cython, py2app

我直接使用 Cython 文档中的基本“hello world”演示。除非我尝试在同一个 setup.py 文件中导入 py2app，否则它工作正常：

```
import py2app
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

setup(
    cmdclass = {'build_ext': build_ext},
    ext_modules = [Extension("helloworld", ["helloworld.pyx"])]
) 
```

只要我`.c`为我的 Cython 模块预先生成文件，Py2app 本身就可以正常工作。但如果我没有，那么`build_ext`失败：

```
running build_ext
gcc-4.2 not found, using clang instead
building 'helloworld' extension
clang -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c helloworld.c -o build/temp.macosx-10.6-intel-2.7/helloworld.o
clang: error: no such file or directory: 'helloworld.c'
clang: error: no input files
error: command 'clang' failed with exit status 1 
```

**`import py2app`如果我在 setup.py 中注释掉，`build_ext`可以正常工作**，并且我的编译中缺少中间步骤：

```
...
gcc-4.2 not found, using clang instead
cythoning helloworld/helloworld.pyx to helloworld/helloworld.c
building 'helloworld' extension
... 
```

那么破坏 Cython 的 py2app 是什么？我能做些什么呢？显然，我只想为我的项目提供一个 setup.py。

我有从 PyPI 安装的 Cython 0.18 和 py2app 0.7.2。我将 Mac OS X 10.8 与 python.org Python 2.7.3 一起使用，而不是 Apple 的构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:16:32.987

构建失败是因为 py2app 使用 setuptools，并且旧版本的 setuptools（和分发）与 Cython 不兼容。

解决方案是安装更新版本的 setuptools 或分发。

# asp.net-mvc-4 - MVC 4 将目录中的文件映射到控制器操作以确保对文档的授权访问

> ID：15726420
> 
> 赞同：0
> 
> 时间：2013-03-31T04:40:50.887
> 
> 标签：asp.net-mvc-4, controller, authorization, directory

如果我的网站目录中有文件：

~/documents/file1.pdf

如何强制对以下 url 的请求通过控制器：

www.mydomain.com/documents/file1.pdf

然后控制器看起来像

```
[Authorize]
public DocumentsController : Controller
{
     public FileResult Index(string fileName)
     {
          //Check user has permission to view file

          return File(...);
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:17:00.533

这并不难，只要你能做出一些假设。

首先，按照您的建议创建您的操作方法：

```
[Authorize]
public DocumentsController : Controller
{
     public FileResult Index(string fileName)
     {
          //Check user has permission to view file

          return File(...);
     }
} 
```

接下来，您创建一个路由：

```
routes.MapRoute(
    name: "Documents",
    url: "documents/{fileName}",
    defaults: new { controller = "Documents", action = "Index" } 
```

您可能需要通过将以下内容添加到 web.config 来放宽 url 验证要求（这仅适用于 IIS7-8，但据我所知，IIS6 需要一个 http 模块）：

```
<httpRuntime relaxedUrlToFileSystemMapping="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:37:05.173

我通过将文档目录放在 App_Data 文件夹中来解决这个问题，这样公众就无法访问它，并使用数据库中的文档 ID 来检索相关信息，例如

/文件/21

我认为无论如何我更喜欢这种方法而不是我最初的计划，因为它更彻底地抽象了路径的标识和文档标题，因为控制器路径可以是任何东西并且不必映射到物理目录路径。

# function - 如何从 PostgreSQL 9 中的函数返回表、行或记录？

> ID：15726421
> 
> 赞同：7
> 
> 时间：2013-03-31T04:41:03.810
> 
> 标签：function, postgresql

我有一个名为的表`person`，`id,name,status`我想返回行作为具有 1 个参数（名称）的函数的结果。谁能帮我？请让它变得简单，因为我在 PostgreSQL 中很菜鸟。

这是我的正常功能代码

```
create or replace function fn_list(vname varchar) returns void as $$
begin
    SELECT id,name,status from usuario WHERE name= vname;
end;
$$ language plpgsql; 
```

我知道我正在返回一个 void 函数，但是如果我想要一个行列表，我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T05:18:03.970

我知道 Oracle 中的流水线返回是这样做的，所以我用它从 plpgsql 中找到“RETURN NEXT”：

[http://www.postgresql.org/message-id/007b01c6dc31$ae395920$0a00a8c0@trivadis.com](http://www.postgresql.org/message-id/007b01c6dc31%24ae395920%240a00a8c0@trivadis.com)

同样在 grokbase 上：

[http://grokbase.com/t/postgresql/pgsql-performance/069kcttrfr/pipelined-functions-in-postgres](http://grokbase.com/t/postgresql/pgsql-performance/069kcttrfr/pipelined-functions-in-postgres)

（编辑添加官方文档）：[http ://www.postgresql.org/docs/9.2/static/plpgsql-control-structures.html](http://www.postgresql.org/docs/9.2/static/plpgsql-control-structures.html)

杀手，我将不得不自己利用这个。

再编辑一次以添加一些演示代码（直接来自 postgresql.org 文档）：

```
CREATE TABLE foo (fooid INT, foosubid INT, fooname TEXT);
INSERT INTO foo VALUES (1, 2, 'three');
INSERT INTO foo VALUES (4, 5, 'six');

CREATE OR REPLACE FUNCTION getAllFoo() RETURNS SETOF foo AS
$BODY$
DECLARE
    r foo%rowtype;
BEGIN
    FOR r IN SELECT * FROM foo
    WHERE fooid > 0
    LOOP
        -- can do some processing here
        RETURN NEXT r; -- return current row of SELECT
    END LOOP;
    RETURN;
END
$BODY$
LANGUAGE 'plpgsql' ;

SELECT * FROM getallfoo(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-12T05:57:26.540

使用循环返回查询结果既慢又低效。这甚至不需要 PL/pgSQL 的开销。

最好的解决方案是：

```
create or replace function fn_list(vname varchar) 
  returns table(id integer, name text, status text) 
as $$
  SELECT id,name,status 
  from usuario 
  WHERE name= vname;
$$ language sql; 
```

*如果*需要 PL/pgSQL 是因为需要在查询之前运行一些其他过程代码，`return query`则应使用 then 而不是循环：

```
create or replace function fn_list(vname varchar) 
  returns table(id integer, name text, status text) 
as $$
begin
  -- do some work....
  return query
    SELECT id,name,status 
    from usuario 
    WHERE name= vname;
end;
$$ language plpgsql; 
```

* * *

然后使用以下命令调用它：

```
select *
from fn_list('Arthur'); 
```

# web-services - CORS 如何为用户提供至少一些安全性？

> ID：15726423
> 
> 赞同：6
> 
> 时间：2013-03-31T04:41:53.183
> 
> 标签：web-services, http, security, cors, same-origin-policy

首先道歉：这对我来说是一个“愚蠢”的问题，我希望我很快就会后悔问这个问题......但我现在无法弄清楚，因为我的想法似乎陷入了错误的轨道. 所以请耐心等待并帮助我：

我的理解是，“同源”对于 Web 服务来说是个痛点，作为回应，CORS 放宽了限制，足以使 Web 服务合理工作，但仍然为用户提供了不错的安全性。我的问题是 CORS 究竟是如何做到这一点的？

假设用户访问网站A，该网站提供了向网站Z发出Web服务请求的代码。但是我已经侵入并破坏了网站Z，并将其变成了攻击站点。我很快让它对所有 CORS 请求做出积极响应（标题添加 Access-Control-Allow-Origin：“*”）。很快用户的计算机就被我从 Z 的攻击颠覆了。

在我看来，用户从未直接访问过 Z，对 Z 的存在一无所知，也从未“批准”过 Z。在我看来——即使在入侵被知道之后——网站 A 也无法阻止它（*除了*去离线本身:-)。安全问题会不会要求 A 证明 Z，而不是 Z 证明 A？我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-17T07:19:42.110

我也在调查这个问题，因为我的思维过程和你的相似。根据我的新理解：CORS 不*提供*安全性，它绕过它来提供功能。浏览器一般不允许跨域请求；如果您访问 shady.com，并且那里有一个脚本尝试*使用您机器上的 cookie*访问 bank.com ，则 shady.com 的脚本将能够使用该 cookie 来模拟您在 bank.com 上执行操作。为了防止这种情况，bank.com 不会将其 API 标记为启用 CORS，因此当 shady.com 的脚本开始 HTTP 请求时，浏览器本身会阻止该请求。

所以同源保护用户免受他们自己的伤害，因为他们不知道什么 auth cookie 在周围放置；CORS 允许代表用户拥有资源的服务器将 API 标记为可从其他站点的脚本访问，这将导致浏览器随后忽略其自己的跨域保护策略。

（有更好理解的，请根据需要补充或更正！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-25T01:56:17.540

CORS 对安全没有任何作用。它确实允许销售网络字体的人决定哪些网站可以轻松访问他们的字体。这几乎是唯一的用例。

用户与引入 CORS 之前一样不知道。请记住，跨源请求过去在 CORS 之前就可以工作（人们经常抱怨您必须 shim jQuery 才能在 IE 中获得 CORS 支持......但在 IE 中，您可以直接发出请求并获得响应，而无需任何额外的努力......它刚刚工作）。

一般来说，信任模型是倒退的。正如其他人所说，您通过引用其他网站暗示了信任......所以给我这些可怕的数据！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-01T19:51:17.400

CORS 通过告诉用户的浏览器允许或不允许查看请求的响应来保护接收请求的网站（在您的示例中为 Z）免受发出请求的网站（在您的示例中为 A）的影响。

当 JavaScript 应用程序要求浏览器向与其自己不同的源发出 HTTP 请求时，浏览器不知道这两个源之间是否存在相互协议以进行此类调用。当然，如果请求来自源 A，那么 A 同意（**如果 Z 是恶意的，A 对它的用户负责**），但是接收者 Z 同意吗？浏览器知道的唯一方法是询问 Z，它通过实际执行请求来做到这一点。除非 Z 明确允许 A 接收响应，否则浏览器不会让 A 的应用程序读取它。

你说得对，CORS 的唯一作用就是放宽同源政策。在此之前，允许跨域请求，并且**浏览器会自动包含它对目标的 cookie**，也就是说，它会向 Z 发送经过*身份验证*的请求。这意味着，如果没有同源策略，A 可以浏览 Z就像是用户一样，看它的数据等等。同源修复了这个非常严重的安全漏洞，但是由于某些服务有时仍然需要使用跨域请求，所以创建了CORS。

请注意，CORS 不会阻止*发送*请求，因此如果 A 的 JS 应用程序向 Z 发送请求，命令它将所有用户的钱发送到某个帐户，Z 将收到包含所有 cookie 的请求。这称为跨站点请求伪造 (CSRF)。有趣的是，针对此类攻击的主要防御是基于 CORS。它包括在请求中要求一些秘密值（“CSRF 令牌”），只能通过跨域请求获得，如果它不在 Z 的授权列表中，A 无法获得。现在，同站点 cookie 可以也可以使用，它们更易于管理，但不能跨域工作。

# php - 如何获取 .csv 文件中的某些列

> ID：15726424
> 
> 赞同：0
> 
> 时间：2013-03-31T04:41:59.753
> 
> 标签：php, file-upload, csv

大家好，我已经有一些代码可以在 .csv 文件中获取列的名字、姓氏和电子邮件，但它不能正常工作，我可以帮忙解决这个问题。

继承人当前代码：

```
//this file is used to grab the usernames of the csv file and put them in a session, returning it memberinterface that will open a dialog box with the usernames
$seterror = 0;

function returnBack(){

    header("Location:../memberinterface.php?getmsg=15");
    exit;

}
function returnBackfile(){

    header("Location:../memberinterface.php?getmsg=16");
    exit;
}
if (!empty($_FILES['csvfile']['error'] ) )
    {

        $seterror = 1;
        returnBack();

    } 
    if (empty($_POST['firstname'])){

        $seterror =1;
        returnBack();
    }
    if (empty($_POST['lastname'])){
        $seterrro =1;

        returnBack();
    }
    if (empty($_POST['email'])){
        $seterror =1;

        returnBack();
    }
    if ($seterror !== 1){

    $file = $_FILES['csvfile']['tmp_name']; 

    $handle = fopen($file , "r");

    $fileop = fgetcsv($handle,1000,",");

    $fileop=array_map("strtoupper",array_map("trim",$fileop));

    $firstname_index = array_search(strtoupper($_POST["firstname"]),$fileop); <!-----these right here are not working correctly and will always send me back with the error, it does not find the firstname column? and same with the other ones.
    if ($firstname_index===false){

        returnBack();
    }
    $lastname_index = array_search(strtoupper($_POST['lastname']),$fileop);
    if ($lastname_index===false){

        returnBack();
    }
    $email_index = array_search(strtoupper($_POST['email']),$fileop);
    if ($email_index===false){

        returnBack();
    }
        //open file and store values
        $j = 0;
        while (($fileop=fgetcsv($handle)) !== false)
        {

            $fileop=array_map("trim",$fileop);
            $firstname[$j] = $fileop[$firstname_index];
            if (empty($firstname[$j])){ 

            returnBackfile();

            }

            $lastname[$j] = $fileop[$lastname_index];
                if (empty($lastname[$j])){

            returnBackfile();

            }
            $email[$j] = $fileop[$email_index];
                if (empty($email[$j])){

            returnBackfile();

            }
            $j++;
        }

        print_r($firstname);

    } 
```

所以当我打印出 $firstname 值时，它会打印出 .csv 文件中的值但包含所有值？

所以回顾一下，我试图让它从 .csv 文件中获取名字、姓氏和电子邮件列，将其存储在 $firstname 数组、$lastname 数组等​​中......

请如果你能帮助我将不胜感激！！

大卫

更新：

放在`var_dump($fileop); var_dump($POST);`上面之后`$firstname_index = array_search($_POST["firstname"],$fileop);`

我用 .csv 文件得到了这些结果：

```
 array(1) { [0]=> string(162) "FIRSTNAME LASTNAME    EMAIL   PHONE   COMBINED SINGLE LIMIT   BODILY INJURY EACH PERSON   BODILY INJURY EACH ACCIDENT PROPERTY 
DAMAGE  STATUS  ADDRESS NOTES   STATUS CHANGE DATE" } 
NULL Array ( [0] => Hank    Aaron biga.@gsadf.com   777.777.7777    '0  20000   
40000   10000   Non-Active [1] => Fred  Astaire astaire@test.com    222.431.5843    '0  
'0  '0  '0  Open    98 Ocean Blvd [2] => Jim    Belushi biga.@gsadf.com 
333.333.3333    '0  '0  '0  '0  Open    98 Ocean Blvd [3] => Charlie    
Brown   charlie@test.com    909.111.1111    '0  '0  '0  '0  Open    98 
Ocean Blvd [4] => Carol Burnett burnett@test.com    911.911.9999    '0  '0  '0  
'0  Enrolled - PCG to Follow-Up 98 Ocean Blvd [5] => Bill   Cosby   
cosby@test.com 989.989.9898 '0  100000  300000  100000  Confirmed   23 Surf Rd 
[6] => Charles  Dickens dickens@test.com    897.333.3333    '0  '0  '0  '0  
Non-Active - Driver Chose Non-Compliance    23 Surf Rd [7] => Walt  Disney  
disney@test.com 909.909.9090    '0  '0  '0  '0  Non-Active - Driver Chose 
Non-Compliance  23 Surf Rd [8] => Bob Dylan dylan@test.com  333.444.5555    '0  '0  
'0  '0  Enrolled - Agent Emailed    23 Surf Rd [9] => Thomas    Edison  
edison@test.com 765.222.1111    '0  '0  '0  '0  Enrolled - Agent Emailed    
23 Surf Rd [10] => Harrison Ford    harrison@test.com   345.543.5555    '0  '0  
'0  '0  Enrolled - Agent Emailed    23 Surf Rd [11] => Bill Gates 
gates@test.com  123.456.7890    350000  '0  '0  '0  Enrolled - Employee Follow-
Up Required 16 Tulip Ln [12] => Tom Hanks   hanks@test.com  777.888.9999    '0  '0  
'0  '0 Enrolled - Agent Emailed 16 Tulip Ln [13] => Alfred  Hitchcock   
alfred@test.com 878.000.9999    '0  '0  '0  '0  Non-Active - Other  16 
Tulip Ln [14] => Michael    Jackson jackson@test.com    123.123.1234    '0  '0  
'0  '0  Non-Active - PolicyHolder Cancelled Additional Interest 16 Tulip Ln [15] => 
Michael Jordan  michael@test.com 888.888.8888   '0  '0  '0  '0  Non-Active 
- Employee Not Covered Under Listed Policy  16 Tulip Ln [16] => John    Lennon  
lennon@test.com '098.765.5432   '0  '0  '0  '0 Non-Active - Insurance Cancelled 
16 Tulip Ln [17] => Joe Lewis   b@hotmail.com   888.999.1111    '0  15000   
30000   5000    Confirmed   4765 E Palm Rd [18] => Peyton   Manning peyton@test.com 
111.222.3333    '0  '0  '0  '0  Enrolled - Agent Emailed    4765 E Palm 
Rd [19] => Marilyn  Monroe  monroe@test.com 212.121.1212 '0 '0  '0  '0  
Enrolled - Policyholder Follow-Up Required  4765 E Palm Rd [20] => Elvis    Presley 
elvis@test.com  909.000.8761    '0  '0  '0  '0  Enrolled - New Carrier 
Being Processed 4765 E Palm Rd [21] => Dan  Rather  rather@test.com 333.333.8888    '0  
25000   50000   15000   Confirmed   909 Kodak Ln [22] => Chris  Rhodes 
crhodes@rhodesretail.com    916-205-2474 '0 '0  '0  '0  Open    909 Kodak 
Ln [23] => William  Shakespeare william@test.com    444.444.4444    '0  
100000  300000 100000   Confirmed   926 Maple St [24] => Meryl  Streep  
streep@test.com 411.411.4111    '0  100000  300000  100000  Confirmed   412 East 
3rd St [25] => Mark Twain   twain@test.com  323.323.3232    '0  '0  '0  '0  
Enrolled - Agent Emailed    412 East 3rd St [26] => Darth   Vader   darth@test.com  
874.321.4444    '0  25000   50000 15000 Confirmed   1234W U Parkway [27] => 
George  Washington  george@test.com 876.321.1234    '0  100000  300000  100000  
Confirmed   12 oak blvd [28] => Robin   Williams    rwilliams@test.com  
444.555.6666    '0  '0  '0  '0  Open    12 oak blvd ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:29:23.963

默认情况下，`fgetcsv()`使用逗号作为列分隔符。您的文件是制表符分隔的，因此您需要明确指定分隔符参数。

改变：

```
$fileop = fgetcsv($handle,1000,","); 
```

到：

```
$fileop = fgetcsv($handle,0,"\t"); 
```

并改变：

```
while (($fileop=fgetcsv($handle)) !== false) 
```

到：

```
while (($fileop=fgetcsv($handle, 0, "\t")) !== false) 
```

# html - 如何使用一个文件输入元素上传多个文件

> ID：15726439
> 
> 赞同：22
> 
> 时间：2013-03-31T04:43:58.287
> 
> 标签：html, google-apps-script

我正在尝试使用一个文件输入元素使用 html 表单将多个文件上传到云端硬盘。这似乎只适用于一个文件，尽管文件选择器允许选择多个文件。回到脚本日志查看器，我只看到我上传的两个文件中的一个文件。这是不受支持的，还是我走错了路？

代码.gs：

```
function logForm(form) {
  Logger.log(JSON.stringify(form));
  return true;
} 
```

索引.html：

```
<html>
  <form id="uploadTest" enctype="multipart/form-data">
    <input type="file" multiple="multiple" name="fileUpload">
    <input type="button" id="upload" value="upload"
    onclick="google.script.run.logForm(document.getElementById('uploadTest'));">
  </form>
</html> 
```

日志视图：

```
{"fileUpload":{"contents":"GIF87a\u0001\u0000\u0001\u0000�
\u0000\u0000��̖��,\u0000\u0000\u0000\u0000\u0001\u0000
\u0001\u0000\u0000\u0002\u0002D\u0001\u0000;",
"type":"image/gif","name":"1x1.gif","length":35}} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T04:35:01.647

当您单击文件字段的浏览按钮时，对话框中的多个文件选择仅适用于[支持 HTML5 的新浏览器](http://caniuse.com/#feat=input-file-multiple)。它不允许旧浏览器的多项选择。对于较旧的浏览器，唯一好的解决方案是 flash 或 javascript 插件。这是 jquery 上传者的一个很好的资源（有些支持多个文件）：[http](http://creativefan.com/10-ajax-jquery-file-uploaders/) ://creativefan.com/10-ajax-jquery-file-uploaders/ 。因此我的建议是使用一些插件，以便在旧浏览器和新浏览器上都支持它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-26T07:13:44.927

我正在使用发送文件数组的可能性。只需添加`[]`到名称属性：

```
<form action="/" enctype="multipart/form-data" method="post">
    <input type="file" name="files[]" />
    <input type="file" name="files[]" />
    // etc.
    <input type="submit">
</form> 
```

你将有数组数组`$_FILES`

```
Array
(
    [files] => Array
        (
            [name] => Array
                (
                    [0] => 1.png
                    [1] => 2.png
                )

            [type] => Array
                (
                    [0] => image/png
                    [1] => image/png
                )

            [tmp_name] => Array
                (
                    [0] => /tmp/phpDQOZWD
                    [1] => /tmp/phpCELeSw
                )

            [error] => Array
                (
                    [0] => 0
                    [1] => 0
                )

            [size] => Array
                (
                    [0] => 32209
                    [1] => 64109
                )

        )

) 
```

当然，您必须一一上传。不方便处理大量文件，但适用于所有浏览器。例如，使用 jQuery，您可以在每次`files[]`更改最后一个输入时再添加一个输入。

```
function addOneMoreInput() {
    $('input[type=file]').last().change(function() {
        $(this).after('<input type="file" name="files[]" />');
        $(this).off('change');
        addOneMoreInput();
    });
}
addOneMoreInput(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-22T04:09:36.433

这个示例脚本怎么样？

在此示例中，运行以下流程。

1.  在浏览器中选择文件。
2.  上传每个文件的文件。
3.  将每个文件保存在 Google Drive 中。
4.  在此示例脚本中，创建的文件的文件 ID 将返回到控制台。

当您使用它时，请将 Google Apps 脚本和 HTML 复制并粘贴到脚本编辑器中，然后使用对话框、侧边栏和 Web 应用程序运行 HTML。

### Code.gs：Google Apps 脚本

```
function saveFile(obj) {
  var blob = Utilities.newBlob(Utilities.base64Decode(obj.data), obj.mimeType, obj.fileName);
  return DriveApp.createFile(blob).getId();
} 
```

### index.html：HTML 和 Javascript

```
<input name="file" id="files" type="file" multiple>
<input type='button' value='Upload' onclick='getFiles()'>

<script>
function getFiles() {
  const f = document.getElementById('files');
  [...f.files].forEach((file, i) => {
    const fr = new FileReader();
    fr.onload = (e) => {
      const data = e.target.result.split(",");
      const obj = {fileName: f.files[i].name, mimeType: data[0].match(/:(\w.+);/)[1], data: data[1]};
      google.script.run.withSuccessHandler((id) => {
        console.log(id);
      }).saveFile(obj);
    }
    fr.readAsDataURL(file);
  });
}
</script> 
```

### 笔记：

*   `index.html`可以作为[Web Apps](https://developers.google.com/apps-script/guides/web)和[Google Docs 的侧边栏和对话框](https://developers.google.com/apps-script/guides/dialogs)运行。
*   在此示例脚本中，输入标记使用 multiple 属性。

# ruby-on-rails - rails每当删除记录sql

> ID：15726440
> 
> 赞同：0
> 
> 时间：2013-03-31T04:44:17.727
> 
> 标签：ruby-on-rails, whenever

我尝试在一段时间（6 个月）后使用 gem 'whenever' 进行记录清理。

在我的每当调度程序中：

```
every 1.month, at: '1am' do
  rake 'lib/tasks/cleanup_user.rake'
end 
```

在 lib/tasks/cleanup_user.rake

```
@user = User.all.where(:created_at > 'Time.6.month.ago').delete 
```

这似乎是对的。但是，我收到错误“未初始化的常量用户”。我在rails方面相对较新。请帮助我。

编辑：我通过运行 clean 一行命令更改了游戏：

```
set :output, "log/cron.log"
    every 1.minutes, :environment => :development do
      command 'User.where("confirmed = 0 AND created_at <= ?", 6.months.ago).delete'
    end 
```

我设置了特定的环境，并在命令中运行它：

```
whenever --set environment=development --update-crontab userscleaning 
```

检查 crontab，它在那里但仍然无法正常工作。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:15:03.927

尝试将`environment`依赖项添加到您的任务中。

```
task :cleanup_users => :environment do
  User.where(:created_at > 'Time.6.month.ago').delete_all
end 
```

如果要触发回调，请使用`destroy_all`

```
task :cleanup_users => :environment do
  User.where(:created_at > 'Time.6.month.ago').destroy_all
end 
```

这是一个相关的[Railscasts](http://railscasts.com/episodes/66-custom-rake-tasks)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-05T04:50:06.147

根据[这里](https://stackoverflow.com/questions/13975376/erase-records-every-60-days)的答案：

```
# lib/tasks/delete_old_records.rake
namespace :delete do
  desc 'Delete records older than 6 months'
  task old_records: :environment do
    User.where('created_at > ?', 6.month.ago).destroy_all
  end
end 
```

运行：

```
RAILS_ENV=production rake delete:old_records 
```

在任何时候：

```
every 1.minutes do
  rake "delete:old_records"
end 
```

或者在 cron 中：

```
0 8 * * * /bin/bash -l -c 'cd /my/project/releases/current && RAILS_ENV=production rake delete:old_records 2>&1' 
```

# css - Magento local.xml 引用 name="head" 从根目录添加项目

> ID：15726459
> 
> 赞同：0
> 
> 时间：2013-03-31T04:49:11.680
> 
> 标签：css, magento, local

我需要能够在引用 name="head" 中的 local.xml 中调用不同的 CSS 文件，以使用来自根目录（而不是来自主题文件夹）的完整路径来添加项目。

现在我有 skin_csscss/skin.css

那将是[http://www.domain.com/skin/theme_name/css/skin.css](http://www.domain.com/skin/theme_name/css/skin.css)

我需要能够指向[http://www.domain.com/skin/OTHER-theme_name/css/skin.css](http://www.domain.com/skin/OTHER-theme_name/css/skin.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:33:20.967

尝试做这样的事情：

```
<reference name="head">
    <action method="addLinkRel">
        <rel>stylesheet</rel>
        <href>http://www.domain.com/skin/OTHER-theme_name/css/skin.css</href>
    </action>
</reference> 
```

第二个参数`addLinkRel`是你的魔法酱。查看位于 app/code/core/Mage/Page/Html/Head.php 的块对象以获取更多详细信息。

# oracle - NamedQuery 中的参数

> ID：15726460
> 
> 赞同：1
> 
> 时间：2013-03-31T04:49:13.180
> 
> 标签：oracle, jpa, netbeans

我正在使用 JSF 2.0、Primefaces 3.4、Oracle、NetBeans 7.2.1，但出现以下错误：

```
ADVERTENCIA: Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLSyntaxErrorException: ORA-00936: missing expression
Error Code: 936
Call: SELECT t1.OPT_ID, t1.OPT_ANT_FM_DET FROM SAE_PACIENTE t0, SAE_OPTOMETRIA t1 WHERE ((((t0.P_ID = ) AND (t0.P_IDENTIFICACION = ?)) AND (t0.P_TIPO_IDENTIFICACION = ?)) AND (t0.P_ID = t1.OPT_P_ID)) 
```

我有两个豆 SaeOptometria 和 SaePaciente；在 SaeOPtometria 中，我有这个属性，即与 SaePaciente bean 的关系：

```
@JoinColumn(name = "OPT_P_ID", referencedColumnName = "P_ID")
@ManyToOne
private SaePaciente optPId; 
```

并且还有以下命名查询：

```
@NamedQuery(name = "SaeOptometria.findByPaciente", query = "SELECT s FROM SaeOptometria s INNER JOIN s.optPId d WHERE d.pId=s.optPId AND d.pIdentificacion = :pIdentificacion AND d.pTipoIdentificacion = :pTIdentificacion"), 
```

我使用以下代码在 SaeOptometriaFacade 文件中传递参数 :pIdentificacion 和 :pTIdentificacion ：

```
public List<SaeOptometria> consultaporIdYTI(String UIpIdentificacion, String UIpTipoIdentificacion){

    Query query= em.createNamedQuery("SaeOptometria.findByPaciente");
    query.setParameter("pIdentificacion", UIpIdentificacion);
    query.setParameter("pTIdentificacion", UIpTipoIdentificacion);
    List<SaeOptometria> SaeOptometriaList= query.getResultList();
    return SaeOptometriaList;
} 
```

我澄清了 NamedQuery 中的参数 pIdentificacion 和 pTipoIdentificacion 属于 SaePaciente bean：

```
@Id
@SequenceGenerator(name="SEQ1",sequenceName = "SAE_AINCR_PACIENTE",allocationSize=1)  
@GeneratedValue(strategy=GenerationType.IDENTITY, generator="SEQ1")
@Basic(optional = false)
@NotNull
@Column(name = "P_ID")
private Integer pId;
@Size(max = 15)
@Column(name = "P_IDENTIFICACION")
private String pIdentificacion;
@Size(max = 20)
@Column(name = "P_TIPO_IDENTIFICACION")
private String pTipoIdentificacion; 
```

为什么不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:03:26.327

您的查询似乎错误：

```
SELECT s FROM SaeOptometria s INNER JOIN s.optPId d WHERE d.pId=s.optPId AND d.pIdentificacion = :pIdentificacion AND d.pTipoIdentificacion = :pTIdentificacion 
```

FROM SaeOptometria 的 INNER JOIN TO_WHAT

在您发表评论后，我认为我的第一个理解是错误的。你都加入了 FROM 子句和 from WHERE 子句。尝试只做其中之一。

您可以尝试以下查询并报告结果：

第一个：Join 由 JPA 提供。没有明确提供 ID。此信息应在您的 JPA 映射中提供

```
SELECT s FROM SaeOptometria s INNER JOIN s.optPId d WHERE d.pIdentificacion = :pIdentificacion AND d.pTipoIdentificacion = :pTIdentificacion 
```

第二个：您明确加入。我们给出表并加入显式地给出 ID 值。

```
SELECT s FROM SaeOptometria s WHERE s.optPId.pId=s.optPId and s.optPId.pIdentificacion = :pIdentificacion AND s.optPId.pTipoIdentificacion = :pTIdentificacion 
```

# character-encoding - 腻子中串行连接的字符集编码

> ID：15726461
> 
> 赞同：0
> 
> 时间：2013-03-31T04:49:46.480
> 
> 标签：character-encoding, serial-port, putty, at-command

我已将 gsm/gprs 调制解调器连接到 windows 7 上的 putty 终端以进行串行通信。AT 命令有效，但调制解调器的响应显示为不可读的特殊字符。端口和调制解调器均配置为 9600 波特。我将字符编码更改为utf-8（Window->translation->character set），但结果是一样的。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:02:15.513

发送到调制解调器/从调制解调器发送的字符串的字符编码由`AT+CSCS`命令选择 TE 字符集控制。如果你想要 UTF-8 运行`AT+CSCS="UTF-8"`. 您可以使用 . 检查当前选定的字符集`AT+CSCS?`和支持的字符集`AT+CSCS=?`。有关详细信息，请参阅[27.007规范。](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)

# html - 哪个框架更适合 RAD - Corona、Actionscript、HTML5、Unity 或 Marmalade？

> ID：15726462
> 
> 赞同：2
> 
> 时间：2013-03-31T04:49:53.823
> 
> 标签：html, flash, unity3d, coronasdk, marmalade

在你谴责这是主观的之前，请考虑不同框架之间的差异。我认为，用 PHP 编写东西可能比用二进制编写更简洁，因此既耗时又昂贵。虽然标题选项之间的差异可能不那么明显，但我认为可能存在显着差异，这可能导致例如 DoodleJump 类型的应用程序花费或多或少的时间来编写每个选项。

尽管在选择框架时还涉及其他因素，但我只是想问哪个框架需要最少的编码，因此同样熟练的开发人员完成相同的事情所需的时间和费用最少（召唤 DoodleJump 物理，一个基本的井字游戏，创建一个用户界面，随便）。如果您有资源链接，以及比较一个或多个完成相同任务的详细程度的直接经验，我将不胜感激。

我最想了解 Flash 和 HTML5 与 Corona 的比较（在开发时间方面），但我也对其他人感到好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:50:53.740

那么你应该认真地改写这个问题。看起来很主观。

我只会给出我对所有这些工具的经验。

**免责声明：-**以下评论是我个人的观点，涉及我的个人经历。你可能有不同的看法。

**Marmalade**
虽然我在大部分部署的项目中都使用过marmalade，但我从未将他们的RAD 工具`quick`用于任何严肃的开发。我被要求通过重新制作我们部署的一款游戏来尝试一下。我对它的快速和简洁印象深刻。虽然它只适用于 2D，但我建议在我们所有的 2D 游戏中使用它而不是普通的果酱。不幸的是，在那之后我们再也没有制作过任何 2D 游戏。好处是它预装了 box2D 和 Cocos-2Dx 并且仍然支持 C++ 库。尚未尝试使用 EDK，但它也应该支持它。缺点（对我而言）是我必须为此学习 luascript。

**Flash**
好吧，我在这里不是 Flash 专家，但我在我们部署的两个游戏上尝试过它，这是一个很好的游戏。尽管它似乎拥有的东西太有限了。我们不得不在 marmlade 中重新编写其中一款游戏，以支持一些 3D 元素，而这在 flash 中是不可能的（至少对我而言）。Flash 对我来说太冗长而且太混乱了，因为我们不知道实际脚本的附加位置。我想所有在尝试过任何其他工具（如果酱）后尝试过 flash 的程序员肯定都发生过这种情况。它只会让你感到困惑。

**Unity**
嗯，它比 Flash 好得多，实际上是一个编写良好的游戏引擎。虽然对于独立开发者来说可能要花一大笔钱，但仍然值得。我已经使用它将近 4-5 个月了，我已经开始喜欢它胜过任何其他引擎。它很容易学习，也不太冗长。您只需要拖放脚本并将其附加到游戏对象。（实际上并不是那么简单）。无需担心物理引擎，无需担心插件（因为大多数插件已经可用）。你也可以在里面做 3D。

从未在任何开发项目中尝试过 Corona 和 HTML5，所以对此没有发言权。

# android - 来回切换后片段不膨胀菜单

> ID：15726466
> 
> 赞同：1
> 
> 时间：2013-03-31T04:50:32.090
> 
> 标签：android, menu, android-fragments, android-actionbar

我对android编程完全陌生，所以我会尽可能准确地解释这个问题。

我有一个由 MainActivity 组成的应用程序。此活动包含 3 个片段，这些片段使用 ViewPager 和 FragmentPagerAdapter 进行控制。当我最初单击（通过操作栏）或滑动到设置片段时，我的“保存”和“取消”选项出现在操作栏中。但是，当我从片段滑开（通过滑动）然后向后滑时，菜单无法加载。无论我移动到不同的片段多少次，也无论我如何移动（通过选项卡和滑动），在应用程序关闭或旋转之前，菜单都不会返回。

但是，我检查了日志，似乎没有抛出错误，但是当我将调试输出放入 OnCreateOptionsMenu 时，我可以看到它确实被调用了。更奇怪的是，如果我旋转显示器，菜单就会出现，并且 OnCreateOptionsMenu 会被调用几次。我还检查了可见性，它显示项目既可见又启用。就好像该项目正在从屏幕上移开。

SettingsFragment.java

```
public class SettingsFragment extends Fragment implements TextWatcher {
    private EditText txtCost;
    private String current = "";

    private DatePicker dtDateQuit;
    private TimePicker dtTimeQuit;

    public SettingsFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_settings, container, false);

        NumberPicker np = (NumberPicker) rootView.findViewById(R.id.npCigs);
        np.setMaxValue(100);
        np.setMinValue(0);

        txtCost = (EditText)rootView.findViewById(R.id.txtCost);
        txtCost.addTextChangedListener(this);

        dtDateQuit = (DatePicker)rootView.findViewById(R.id.dtQuit);
        dtTimeQuit = (TimePicker)rootView.findViewById(R.id.tmQuit);

        txtCost.setText("$" + String.valueOf(MainActivity.dblCost) + "0");
        dtDateQuit.updateDate(MainActivity.dtStopDate.get(Calendar.YEAR),MainActivity.dtStopDate.get(Calendar.MONTH), MainActivity.dtStopDate.get(Calendar.DAY_OF_MONTH));
        dtTimeQuit.setCurrentHour(MainActivity.dtStopDate.get(Calendar.HOUR));
        dtTimeQuit.setCurrentMinute(MainActivity.dtStopDate.get(Calendar.MINUTE));
        np.setValue(MainActivity.intCigDay);

        setHasOptionsMenu(true);
        return rootView;
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
    {
        System.out.println("-------------- Starting Inflation --------------");
        super.onCreateOptionsMenu(menu, inflater);
        inflater.inflate(R.menu.settings_fragment_menu, menu);
        System.out.println("-------------- Inflation Finished --------------");

        System.out.println("------------ Menu Item: " + menu.getItem(0).getTitle());
        System.out.println("------------ Visible: " +menu.getItem(0).isVisible() );
        System.out.println("------------ Enabled: " + menu.getItem(0).isEnabled() );
    }

    @Override
    public void afterTextChanged(Editable s) {
        String replaceable = String.format("[%s,.\\s]", NumberFormat.getCurrencyInstance().getCurrency().getSymbol());

        if(!s.toString().equals(current)){
            txtCost.removeTextChangedListener(this);

            String cleanString = s.toString().replaceAll(replaceable, "");

            double parsed = Double.parseDouble(cleanString);
            String formated = NumberFormat.getCurrencyInstance().format((parsed/100));

            current = formated;
            txtCost.setText(formated);
            txtCost.setSelection(formated.length());

            txtCost.addTextChangedListener(this);
         }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }
} 
```

**编辑：**我似乎偶然发现了一些修复，但它很脏。

在包含片段的 MainActivity 中，在 onTabSelected 中，我调用了 invalidateContextMenu，然后我将充气器也移动到了 MainActivity，检查选择了哪个选项卡。这使得菜单绘制速度更快，但似乎是一种非常奇怪的方式。

使用这种方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T13:47:55.153

将您的 viewpager 偏移限制设置为您拥有的标签数量，

就像我有 3

```
viewPager.setOffscreenPageLimit(3); 
```

# path - 设置 zsh PATH 不产生所需的顺序

> ID：15726467
> 
> 赞同：5
> 
> 时间：2013-03-31T04:50:56.047
> 
> 标签：path, zsh, homebrew, zshrc

我在 Mac OS X 10.8.3 上使用 Homebrew。Homebrew 希望`/usr/local/bin`PATH 中的目录早于`/usr/bin`，否则将使用系统提供的程序而不是 Homebrew 管理的替换。

我正在使用 zsh，并在我`.zshenv`的重置 PATH 中，然后使用 path_helper 对其进行初始化，如下所示：

```
if [ -x /usr/libexec/path_helper ]; then
  PATH=''
  eval `/usr/libexec/path_helper -s`
fi 
```

紧接着`.zshenv`，我也在`/usr/local/bin`PATH 中添加了前缀。

```
export PATH="/usr/local/bin:$PATH" 
```

$PATH 还有其他各种附加功能。RVM`/usr/local/sbin`和我的个人`bin`目录：

```
export PATH=$HOME/.rvm/bin :$PATH
...
export PATH=$PATH:/usr/local/sbin:$HOME/bin 
```

最后，我使用`typeset -u`从 PATH 中删除任何重复项（尽管它们来自哪里对我来说是个谜）。

```
typeset -U PATH 
```

毕竟这就是我的 PATH 的样子：

```
/Users/mark/.rvm/gems/ruby-1.9.3-p374/bin
/Users/mark/.rvm/gems/ruby-1.9.3-p374@global/bin
/Users/mark/.rvm/rubies/ruby-1.9.3-p374/bin
/Users/mark/.rvm/bin
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin
/usr/local/sbin
/Users/mark/bin 
```

我知道`/etc/paths`设置这些路径：

```
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin 
```

所以我编辑了那个文件并删除了`/usr/local/bin' option so that the only place it is being set is in`.zshenv`。

[所有这些都包含在我在 GitHub ( https://github.com/zan5hin/dotfiles](https://github.com/zan5hin/dotfiles) )上的 dotfile 存储库中，并且正在两台笔记本电脑上使用。在第一台笔记本电脑上，路径是正确的，`/usr/local/bin`紧跟在 RVM 条目之后。正如我在上面详述的那样，在第二台笔记本电脑上它出现了。

当 zsh 配置是相同的副本时，我无法解释为什么第二台机器上的路径不正确。

任何人都可以建议为什么路径会乱序吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-08-10T16:44:32.057

zsh 按以下顺序读取文件（从[`man 1 zsh`](https://linux.die.net/man/1/zsh)）

1.  `$ZDOTDIR/.zshenv`
2.  `/etc/zprofile`（如果登录）
3.  `$ZDOTDIR/.zprofile`（如果登录）
4.  `/etc/zshrc`（如果是交互式的）
5.  `$ZDOTDIR/.zshrc`（如果是交互式的）
6.  `/etc/zlogin`（如果登录）
7.  `$ZDOTDIR/.zlogin`（如果登录）

> 如果 ZDOTDIR 未设置，则使用 HOME。上面列出的 /etc 中的文件可能位于另一个目录中，具体取决于安装。

您对 (2) 之前的 (1) 进行了更改；(2) 的 macOS 默认值为：

```
% cat /etc/zprofile
# System-wide profile for interactive zsh(1) login shells.

# Setup user specific overrides for this in ~/.zprofile. See zshbuiltins(1)
# and zshoptions(1) for more details.

if [ -x /usr/libexec/path_helper ]; then
    eval `/usr/libexec/path_helper -s`
fi 
```

因此，您的更改将被 macOS 默认值覆盖。您需要稍后在管道中进行 PATH 更改以保持顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:26:34.133

这一行是错误的：

```
export PATH=$HOME/.rvm/bin :$PATH 
```

它应该是：

```
export PATH=$HOME/.rvm/bin:$PATH 
```

之前的空格`:$PATH`导致您丢失`$PATH`.

# c# - 全局配置对象

> ID：15726472
> 
> 赞同：1
> 
> 时间：2013-03-31T04:52:39.903
> 
> 标签：c#

我想初始化一种全局对象，我可以随时从我的应用程序的任何部分引用它。我不想在执行过程中将它从一种方法传递给另一种方法，我只想从我的配置文件中读取一次所有信息并将其存储到对象中，并在我需要的任何时间从任何地方使用该信息时。我的问题是不确定如何在技术上声明该类可访问并且不会被垃圾收集器清理。您能否提供此类“全局类”的代码示例。

寻求您的建议。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T05:06:54.853

您可以使用单例来声明它。[以下](http://www.yoda.arachsys.com/csharp/singleton.html)是一些示例实现。我个人更喜欢使用带有属性的静态类

```
public static class Config
{
    public static string IP { get {... 
```

请记住，只要任何东西都引用了您的实例，它就不会被垃圾收集。

# html - 如何使用 CSS 制作有角度的工具提示指针元素？

> ID：15726473
> 
> 赞同：0
> 
> 时间：2013-03-31T04:52:48.560
> 
> 标签：html, css, tooltip

我想知道如何制作一个作为箭头的有角度的元素，附加到工具提示。我已经看到 Google Accounts 完成了这项工作，并附上了屏幕截图。看来他们正在通过几个`span`元素实现这一目标。

我无法从他们的 HTML/CSS 中弄清楚他们是如何做到的……我唯一的想法是在常规 div 或图像上使用 CSS3 旋转，但我猜有一种更基本的方法。

谁能给我一个提示？我不是在寻找一个完整的解决方案，我只是对如何处理它感到困惑。此外，它不是关于工具提示本身，而是关于那个有角度的元素。

![在此处输入图像描述](https://i.stack.imgur.com/pPOlx.png)

编辑：[这是一个相关的问题。](https://stackoverflow.com/questions/11355177/tooltip-arrow-right?rq=1)他们使用透明边框、边框半径和盒子阴影？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:03:43.227

您可以使用图像或操纵跨度创建它，我知道 Facebook 使用精灵图像创建它，谷歌和推特使用样式跨度创建它，只需使边框透明，底部除外。这是推特：

![在此处输入图像描述](https://i.stack.imgur.com/oD2pe.png)

[这是一个教程](http://www.howtocreate.co.uk/tutorials/css/slopes)。

# javascript - 谷歌网站搜索

> ID：15726481
> 
> 赞同：1
> 
> 时间：2013-03-31T04:55:01.367
> 
> 标签：javascript, html

我需要实现谷歌网站搜索我正在使用下面的代码

```
<script>
 (function() {
 var cx = '012847953619635190580:vrz-2wloub8';
 var gcse = document.createElement('script');
 gcse.type = 'text/javascript';
 gcse.async = true;
 gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    '//www.google.com/cse/cse.js?cx=' + cx;
 var s = document.getElementsByTagName('script')[0];
 s.parentNode.insertBefore(gcse, s);
 })();
</script>
<gcse:searchbox></gcse:searchbox> 
```

问题是显示警告说“未知标签”。

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:24:32.927

我以前从未遇到过这个问题，但我使用 Google Site Search 并且可以做出一些有根据的猜测。

1.  将该脚本标记放在封闭文件的“头”部分的末尾。理想情况下它应该在那里。

2.  这是你最好的朋友：[https ://developers.google.com/custom-search/docs/element](https://developers.google.com/custom-search/docs/element)

该页面显示了实现 Google 自定义搜索的许多不同方法，甚至提供了您可以玩弄的示例。

顺便说一句，你在某处有相应的部分吗？

引用该页面：“两列和两列布局，一侧是搜索结果，另一侧是搜索框。如果您打算在网页中以两列模式插入多个元素，则可以使用 gname属性以将搜索框与搜索结果块配对。”

基本上，如果您使用的是“搜索框”部分，您还需要一个“搜索结果”部分。

# c# - 在成功提交到数据库的表单数据上显示 jQuery Modal

> ID：15726485
> 
> 赞同：1
> 
> 时间：2013-03-31T04:55:08.867
> 
> 标签：c#, jquery, asp.net, modal-dialog

我遇到了 jquery modal 对话框的问题。我希望模式框仅在我的数据成功保存到数据库时显示。我正在使用 c# 和 asp.net，在后端我使用的是 Sql server 2008 R2。目前我的数据已成功输入，单击按钮后我显示“数据已成功保存在标签上”，但**我只想在单击按钮并保存数据时显示模式框。**

我创建了这个脚本

```
$("#Btndiag").click(function () { $("#myModal").modal(); }); 
```

在内容页面正文上我写了这个

```
<asp:Button ID="Btndiag" runat="server" Text="show dialog" onclick="Btndiag_Click1" />
<div class="modal hide fade" id="myModal">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Settings</h3>
    </div>
    <div class="modal-body">
        <p>Here settings can be configured...</p>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <a href="#" class="btn btn-primary">Save changes</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:15:31.480

要实现您想要的，您必须在后端处理数据，然后让 ASP.NET 框架为您执行脚本。

为此，您可以[`ClientScriptManager.RegisterClientScriptBlock`](http://msdn.microsoft.com/en-us/library/bahh2fef.aspx)在整页回[`ScriptManager.RegisterClientScriptBlock`](http://msdn.microsoft.com/en-us/library/bb350750.aspx)发期间使用，或者如果控件位于[`UpdatePanel`](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx).

**C#代码：**

```
protected void Btndiag_Click1(object sender, EventArgs e)
{
    // process database

    // verify results
    if (success)
    {
       ClientScriptManager.RegisterClientScriptBlock(this, "Btndiag_Click1", "$('#myModal').modal();", true);
    }
} 
```

请记住，如果按钮和模态 div 在内部`UpdatePanel`，请替换`ClientScriptManager.RegisterClientScriptBlock`为`ScriptManager.RegisterClientScriptBlock`.

* * *

最后，作为最后的信息说明...您的脚本 ( `$("#Btndiag").click(...)`) 将不起作用，因为[ASP.NET 在呈现为 HTML 时会更改元素 ID](http://www.asp.net/web-forms/tutorials/master-pages/control-id-naming-in-content-pages-cs)。

您必须按以下方式工作：

```
$("#<%= Btndiag.ClientID %>").click(function () { $("#myModal").modal(); }); 
```

请注意，您**不需要**对按钮的单击事件执行任何操作。您希望框架在回发后自动运行您的脚本。

# java - 将多条记录写入 NFC 标签：示例源代码

> ID：15726486
> 
> 赞同：0
> 
> 时间：2013-03-31T04:55:17.617
> 
> 标签：java, android, nfc, ndef

我正在寻找一些可以下载和导入的示例源代码，它可以将多条记录保存到一个 NFC 标签。

有人见过这样的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:52:39.827

您所描述的是一种常见的情况。您可以使用内置的 Android NdefMessage 和 NdefRecord 类来执行此操作，但是我编写了一个简化操作的库：[NDEF Tools for Android](http://code.google.com/p/ndef-tools-for-android/)。

我可以建议以下方法，使用外部类型记录吗？

```
AndroidApplicationRecord aar = new AndroidApplicationRecord();
aar.setPackageName("org.my.app");

Message message = new Message(); //  org.ndeftools.Message
message.add(androidApplicationRecord);
message.add(new GenericExternalTypeRecord("org.my.app", "username", myUsernameBytes);
message.add(new GenericExternalTypeRecord("org.my.app", "password", myPasswordBytes);

NdefMessage toWrite = highLevel.getNdefMessage(); 
```

或者，您可以为用户名+密码创建一个字节格式，然后使用单个外部类型记录。对于更高版本的 Android，您实际上可以使用内置的辅助方法执行上述操作（但您必须手动进行解析）。

有关对标签的实际读/写，请参阅[这些示例类](http://code.google.com/p/ndef-tools-for-android/source/browse/#git/ndeftools-util/src/org/ndeftools/util/activity)。

# codeigniter - 多个视图中的可重用功能

> ID：15726487
> 
> 赞同：0
> 
> 时间：2013-03-31T04:55:26.623
> 
> 标签：codeigniter

我正在开发一个 Codeigniter 项目，需要在多个视图中使用相同的功能。

这是我想做的基本概述：

在我网站的几个区域中，我需要显示一些关于用户的信息。此信息包括个人资料图片、评级和用于发送电子邮件或查看评论的链接。

必须动态修改显示。ex; 有时，由于各种设置，发送电子邮件的链接不可用。

现在，有些页面可能只有其中一个，有些页面可能有几个。

所以我想做的是构建一个可以加载的小组件，提供用户信息然后处理构建显示。

我的第一个想法是构建一个助手，但我读过在视图中包含助手并不是好的 MVC 实践。那么 CI 中还有什么其他技术可以做这样的事情呢？

保重，李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:31:24.140

您可以构建部分视图并将其作为 HTML 块加载到主视图中。

```
// In Controller
$data['user_info_box'] = $this->load->view('partials/user_info', $settings, true);

$this->load->view('main_view', $data); 
```

然后`$user_info_box`在您的主视图上使用该 ( )。

# java - 我既没有看到按钮上的标签，也没有看到它被涂成绿色。这是为什么 ？

> ID：15726488
> 
> 赞同：0
> 
> 时间：2013-03-31T04:55:45.613
> 
> 标签：java, swing, paint, paintcomponent

下面的代码在面板上放置一个按钮。但是有一个问题。`Click Me`我既没有看到按钮上的标签，也没有看到涂有`green`. 这是为什么 ？

```
import javax.swing.*;
import java.awt.*;

class Tester extends JButton {

        public Tester(String label) {
            super(label);
        }

        @Override
        public void paintComponent(Graphics g) {
            g.setColor(Color.GREEN);
        }

        public static void main(String args[]) {
            JFrame fr = new JFrame();
            JPanel p = new JPanel();
            JButton button = new Tester("Click Me !");
            p.add(button);
            fr.add(p);
            fr.setVisible(true);
            fr.setSize(400,400);    
            fr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:58:25.887

你需要打电话

```
super.paintComponent(g); 
```

这将绘制所有子组件。但是，这里不需要自定义绘画，因为`JButton`它提供了一个方法[setBackground](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBackground%28java.awt.Color%29)来直接设置背景颜色。您可以使用

```
button.setBackground(Color.GREEN); 
```

请参阅：[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T05:04:59.893

首先你需要调用： super.paintComponent(g); 如果您想覆盖它的任何行为，请在 paintComponent() 中。但是，如果您只想更改背景颜色，请在构造函数中执行此操作。无需为属性更改覆盖paintComponent。

# c++ - 使用 I2C 发送 0x00

> ID：15726492
> 
> 赞同：0
> 
> 时间：2013-03-31T04:56:30.020
> 
> 标签：c++, arduino, i2c

我正在使用 Wire 类让两个 Arduino Unos 使用 I2C 进行通信。似乎 Wire 类以 0 值结束传输。因此，如果我发送字节 0x01、0x02、0x00 和 0x04，主设备会收到：0x01、0x02、0xFF、0xFF。

为处理器通信设计的通信网络无法发送 0x00 似乎很奇怪。我见过的所有 I2C 示例都只使用 ASCII。仅限于 ASCII 的处理器间通信似乎没有任何意义。我是否缺少 I2C 的某些内容，或者这只是 Arduino Wire 类的实现限制？

掌握

```
void loop() {
  Wire.requestFrom(2, 4); 

  while(Wire.available()) { 
    byte b = (byte) Wire.read(); 
    Serial.println(b); 
  }

  delay(1000);
} 
```

奴隶

```
void requestEvent() {
  char bytes[4] = {0x01,0x02,0x00,0x04};
  Wire.write(bytes);
} 
```

结果是：1 2 255 255。

当 0x00 是 0x03 时，我得到了预期：1 2 3 4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T05:54:46.497

您将 s 数组传递`char`给`Wire.write()`... 这使得`Wire`将参数视为以 null 结尾的字符串，因此`NULL`字节终止传输。如果要发送`byte`s，请`write()`为每个字节调用一次函数，并传递它的`byte`类型。

或者，您可以调用`write(const uint8_t *, size_t);`版本：您将一个指向 / 字节数组的指针传递给它，但您还必须给它一个数据数组的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:48:32.130

在调用 Wire.write() 之前，是否发生了 Wire.begin() 和 Wire.beginTransmission()（地址正确）？

# ruby - 如何在递归期间删除字符串中的某些元素（Ruby）

> ID：15726495
> 
> 赞同：-2
> 
> 时间：2013-03-31T04:57:43.437
> 
> 标签：ruby

每次递归我都会得到一个像这样的新字符串： [3 x i32] 但我不想得到 [5 x i32][4 x i32]... 而是将它们修改为 [5 x [4 x [3 x i32]]]，我怎样才能得到它？（假设原始字符串在变量*old*中。新字符串存储在*new*中。）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:52:56.260

```
def step(old = '', start = 5)
  if old =~ /\A\z/ or old =~ /\A\[\]\z/
    old = "[#{start} x i32]"
  else
    old.sub!(/(\d+)( x i32)/) do |match|
      num = Integer($1)
      "#{$1} x [#{num - 1}#{$2}]"
    end
  end
end

new = step
puts new
1.upto(5) do
  new = step(new)
  puts new
end 
```

# knockout.js - 使用 KnockoutJS 使对象的属性可单独编辑

> ID：15726496
> 
> 赞同：3
> 
> 时间：2013-03-31T04:57:49.887
> 
> 标签：knockout.js, knockout-mapping-plugin

我是 KnockoutJS 的新手。我想知道是否有更好的方法来完成以下功能。

对象的属性在表格行中显示为文本。我可以单独单击每个文本范围以显示一个文本框，以便我可以编辑文本。请务必注意，与对象相关的其他属性不会变为可编辑的。一次只能编辑一个属性。为了实现这一点，在 KO 映射期间，我实际上用一个具有两个属性的对象覆盖了每个属性：一个保存原始属性值的“value”属性，以及一个用于跟踪文本框可见性的“hasFocus”属性.

这是一个[JSFiddle](http://jsfiddle.net/a2EPT/3/)来展示我目前是如何对其进行编程的。请务必单击项目名称和价格以查看出现的文本框。

**进一步说明**

我有一个表，其中每一行代表一个 TransactionItem。

在开始状态下，每个字段都是文本。单击时，文本消失并出现一个文本框。当文本框失去焦点时，文本框消失，修改后的文本重新出现。

以下步骤显示了我为完成此任务所做的工作：

1.  使用 KO Mapping 插件（本例中为“myData”）从服务器映射数据，

    ```
    var  myData = [
        {
        TransactionItems: [
            {
            Name: "Item1",
            Price: "1.00"       
            },
            {
            Name: "Item2",
            Price: "2.00"       
            },
            {
            Name: "Item3",
            Price: "3.00"       
            },
        ]},
    ];

    var mappingOptions = {          
        'TransactionItems': {
            create: function (options) {
                return new TransactionItem(options.data);
            }
        }   
    }
    var viewModel = {};
    var self = viewModel;
    viewModel.transactions = ko.mapping.fromJS(myData, mappingOptions);

    ko.applyBindings(viewModel); 
    ```

2.  在 TransactionItems 构造函数中，获取 TransactionItem 属性（'name'、'price'）的当前值，并将它们存储在临时变量中。用新对象覆盖属性。这些新对象包含两个值：原始属性的“值”和新的“hasFocus”属性

    ```
    //Grab the current values of the properties
    var itemValue = this.Name();
    var priceValue = this.Price();

    //Recreate properties as objects, give them a 'hasFocus' property
    this.Name = { value: itemValue, hasFocus: ko.observable(false)};
    this.Price = { value: priceValue, hasFocus: ko.observable(false) }; 
    ```

例如，'name' 属性变为对象 Name: { value: 'Item1', hasFocus: false }。

1.  在 HTML 中，数据绑定每个属性的“hasFocus”以控制何时显示/隐藏文本/文本框。

2.  单击文本时，'hasFocus' 属性设置为 true，这将隐藏文本并显示文本框。

3.  当文本框模糊时，'hasFocus' 属性设置为 false，这会隐藏文本框并显示文本。

我想知道是否有更好的方法来完成此功能。我是不是偏离轨道了？谢谢！

更大的代码片段：

```
<table>
    <thead>
        <tr>            
            <th>Name</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>  
        <!-- ko foreach: transactions -->
            <!-- ko template: { name: 'listItems', foreach: TransactionItems } --> 
            <!-- /ko -->
        <!-- /ko -->
    </tbody>
</table>

<script type="text/html" id="listItems">
    <tr>
        <td>
            <!-- Either show this -->
            <span data-bind="visible: !Name.hasFocus(), 
                             text: Name.value, 
                             click: editItem.bind($data, Name)"></span>

            <!-- Or show this -->
            <input data-bind="visible: Name.hasFocus, 
                              value: Name.value, 
                              hasfocus: Name.hasFocus, 
                              event: { 
                                        focus: editItem.bind($data, Name), 
                                        blur: hideItem.bind($data, Name) 
                                     }" 
            /><!-- end input -->
        </td>
        <td>
            <!-- Either show this -->
            <span data-bind="visible: !Price.hasFocus(), 
                             text: Price.value, click: editItem.bind($data, Price)"></span>

            <!-- Or show this -->
            <input data-bind="visible: Price.hasFocus, 
                              value: Price.value, 
                              hasfocus: Price.hasFocus, 
                              event: { 
                                        focus: editItem.bind($data, Price), 
                                        blur: hideItem.bind($data, Price) 
                                     }" 
            /><!--input end -->
        </td>
    </tr>
</script>

<!-- END OF HTML -->

<script >

function TransactionItem(data) {

    ko.mapping.fromJS(data, {}, this);

    this.editable = ko.observable(false);
    this.hasFocus = ko.observable(false);

    //Grab the current values of the properties
    var itemValue = this.Name();
    var priceValue = this.Price();

    //Recreate properties as objects, give them a 'hasFocus' property
    this.Name = { value: itemValue, hasFocus: ko.observable(false)};
    this.Price = { value: priceValue, hasFocus: ko.observable(false) };

    this.editItem = function (objProperty) {
        this.editable(true);
        objProperty.hasFocus(true);        
    }

    this.hideItem = function (objProperty) {
        this.editable(false);
        objProperty.hasFocus(false);
    }       

}

//MAPPING
var mappingOptions = {

    'TransactionItems': {
        create: function (options) {
            return new TransactionItem(options.data);
        }
    }   
}

//DATA
var  myData = [
    {
    TransactionItems: [
        {
        Name: "Item1",
        Price: "1.00"       
        },
        {
        Name: "Item2",
        Price: "2.00"       
        },
        {
        Name: "Item3",
        Price: "3.00"       
        },
    ]},
        ];

//VIEWMODEL        
var viewModel = {};
var self = viewModel;
viewModel.transactions = ko.mapping.fromJS(myData, mappingOptions);

ko.applyBindings(viewModel);

        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:28:33.700

我认为在根 VM 对象中设置字段来指定当前正在编辑的项目/字段并使用它更简单，而不是为每个项目和字段的编辑状态设置单独的 observables。你可以在你的 VM 中放置辅助函数帮助您在绑定中处理它。

为了处理输入模糊，我处理了对文档元素（或任何合适的元素）的点击，并确保点击事件不会从可编辑元素中冒泡。我使用`clickBubble`绑定做到了这一点，但使用 jQuery（或替代方法）可能更容易。

JSFiddle：http: [//jsfiddle.net/antishok/a2EPT/7/](http://jsfiddle.net/antishok/a2EPT/7/)

JS：

```
function TransactionItem(data) {
    ko.mapping.fromJS(data, {}, this);
}

function ViewModel(data) {
    var self = this;
    this.transactions = ko.mapping.fromJS(data, mappingOptions);
    this.editedItem = ko.observable();
    this.editedField = ko.observable();

    this.isEdited = function (item, field) {
        return self.editedItem() === item && self.editedField() === field;
    }

    this.editItem = function (field, item) {
        self.editedItem(item);
        self.editedField(field);
    }

    this.stopEditing = function() {
         self.editItem(undefined, undefined);
    }
}

var viewModel = new ViewModel(myData);
ko.applyBindings(viewModel);

ko.utils.registerEventHandler(document, 'click', function(event) {
    viewModel.stopEditing();
}); 
```

HTML：

```
<td>
        <!-- Either show this -->
        <span data-bind="visible: !$root.isEdited($data, 'Name'), 
                         text: Name, 
                         click: $root.editItem.bind($data, 'Name'), clickBubble: false"></span>

        <!-- Or show this -->
        <input data-bind="visible: $root.isEdited($data, 'Name'), 
                          value: Name, 
                          hasfocus: $root.isEdited($data, 'Name'), 
                          click: function(){}, clickBubble: false" 
        /><!-- end input -->
</td> 
```

# r - 为什么 R 的哪个函数没有返回“正确”的答案

> ID：15726501
> 
> 赞同：0
> 
> 时间：2013-03-31T04:58:43.977
> 
> 标签：r, function

我正在编写[**蒙蒂霍尔问题**](http://en.wikipedia.org/wiki/Monty_Hall_problem)的变体，建立在另一个人的代码之上。不同之处在于，我有“n”个门，而不是 3 个门。`n = 4`就这个问题来说吧。门上有标签`A, B, C and D`。

代码如下：

```
n <- 4
doors <- LETTERS[seq( from = 1, to = n )]
xdata = c()
for(i in 1:10000) {
    prize <- sample(doors)[1]
    pick  <- sample(doors)[1]
    open1 <- doors[which(doors != pick & doors != prize)]
    open  <- sample(open1,n-2)

    # the line with the problem
    switchyes <- doors[which( doors != open & doors != pick)]

    if(pick==prize) {
        xdata <- c(xdata, "noswitchwin")
    }
    if(switchyes==prize) {
        xdata=c(xdata, "switchwin")
    }
} 
```

当我运行代码时，我收到警告：

```
There were 50 or more warnings (use warnings() to see the first 50) 
```

**问题**似乎是由于该行：

```
switchyes <- doors[which( doors != open & doors != pick)] 
```

这应该只返回 1 个项目 ( `C`)，因为声明`doors != open`和`doors != pick`消除了门`A`和`B`和`D`。但是，我得到的不止一个，`B`而且`C`. 有人看到发生了什么吗？

```
length(which(xdata == "switchwin"))
# [1] 4728
length(which(xdata == "noswitchwin"))
# [1] 2424
switchyes
# [1] "B" "C"
open
# [1] "B" "D"
open1
# [1] "B" "D"
pick
# [1] "A"
prize
# [1] "C" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:03:59.573

`!=`您遇到的问题是LHS 和 RHS 大小不同时的用法：

```
p <- letters[1:4] 
# [1] "a" "b" "c" "d"

q <- c("a", "e", "d", "d")
# [1] "a" "e" "d" "d"

p == q
# [1]  TRUE FALSE FALSE  TRUE

p != q
# [1] FALSE  TRUE  TRUE FALSE 
```

怎么了？因为`p`和`q`大小相等，所以将 的每个元素`p`与 的对应索引处的值进行比较`q`。现在，如果我们改成`q`这样：

```
q <- c("b", "d")

p == q
# [1] FALSE FALSE FALSE  TRUE 
```

这里发生了什么事？由于`q`(RHS)的长度*不等于* `p`(LHS)，`q`因此被回收以达到 的长度`p`。那是，

```
# p    q  p    q
  a == b, b == d # first two comparisons
  c == b, d == d # recycled comparisons 
```

相反，您应该使用

```
!(doors %in% open) & !(doors %in% pick). 
```

此外，通过注意到`!A AND !B = !(A OR B)`. 因此，您可以将其重写为

```
!(doors %in% open | doors %in% pick) 
```

反过来，这可以简化为仅使用一个`%in%`：

```
!(doors %in% c(open, pick)) 
```

此外，您可以使用`Negate`, 说`%nin%`（对应于）创建一个函数，并将上述语句中的`!(x %in% y`and 替换为如下：`!``%in%`

```
`%nin%` <- Negate(`%in%`)
doors %nin% c(open, pick) # note the %nin% here 
```

所以基本上你的声明分配给`switchyes`可以只是：

```
# using %bin% after defining the function
switchyes <- doors[doors %nin% c(open, pick)] 
```

你不需要在`which`这里使用，因为你不是在寻找索引。你可以直接使用这里的逻辑来得到结果。希望这可以帮助。

# xml - Eclipse Indigo 中的 XML 保存错误

> ID：15726503
> 
> 赞同：0
> 
> 时间：2013-03-31T04:59:13.120
> 
> 标签：xml, eclipse

谁能告诉我为什么在eclipse（Indigo）中保存XML文件时总是弹出保存失败和NullPointer错误对话框。?? 谢谢。！！

# c - 进行函数调用时如何让 GCC 警告不匹配数量的参数？

> ID：15726506
> 
> 赞同：1
> 
> 时间：2013-03-31T04:59:42.943
> 
> 标签：c, gcc, gcc-warning

刚刚调试了一个C程序半天，才发现在进行函数调用的时候漏掉了一个参数，于是用junk代替了这个漏掉的参数。像这样的愚蠢错误确实令人沮丧，但我想编译器应该能够检测到这一点。（C 甚至不支持默认参数；即使在 C++ 中，也需要显式声明默认参数。）

更新：原型也被发现是错误的......

那么，是否有一个 GCC 标志来警告不匹配的函数调用参数号？我一直都有`-Wall`；`-pedantic`如此明显的错误未被发现是相当令人惊讶的。（其实我想GCC没有报告是有原因的，但我现在想不出任何原因。）

尴尬的代码示例：

```
 static void dfs();

    int main(int argc, const char *argv[]) {
         dfs(1);
    }

    static void
    dfs(int remain, int last) {
        // dfs
    } 
```

我刚刚发现的另一个发现是，如果原型包含参数，编译器会报告；但是原型碰巧不包含任何参数，然后编译器就滑倒了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T05:01:21.367

不匹配的函数调用参数数量是所有编译器都将并且必须在没有任何特殊设置的情况下提供的强制性诊断。这是标准规定的。

**C99Standard 6.5.2.2 函数调用：**
**约束**

> 如果表示被调用函数的表达式具有包含原型的类型，则参数的数量应与参数的数量一致。每个参数都应具有一个类型，以便可以将其值分配给具有其相应参数类型的非限定版本的对象。

* * *

```
 static void dfs(); 
```

告诉编译器`dfs`是一个`static`函数，它返回 a`void`并且可以接受未指定数量的参数。此外，您为接受 2 个参数并调用相同的函数提供定义。如您所见，没有违约。问题是函数的声明不正确。如果你想声明一个不带参数的函数，你必须使用：

```
 static void dfs(void); 
```

一旦你这样做，[**编译器将为你提供一个诊断**](http://ideone.com/RUkMCR)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:35:17.953

您可以使用多种选项：

*   `-Wstrict-prototypes`
*   `-Wmissing-prototypes`
*   `-Wold-style-definition`
*   `-Wold-style-declaration`

即使您不使用`-std=c99`或类似的东西，这些也可以工作。我在办公室受到古董代码的困扰，并`-Wstrict-prototypes`在清理一些没有得到“处理”的代码时使用这些代码（除了 ）。例外是因为代码库中指向函数的指针大多没有必要的参数列表。对于个人代码或我负责的代码，这不是问题。

# php - Symfony 2：抽象数据输入以允许多个控制器，一个模型

> ID：15726507
> 
> 赞同：1
> 
> 时间：2013-03-31T05:00:08.897
> 
> 标签：php, symfony

我目前正在努力寻找适合系统的架构，但我想我需要 Symfony 专家的帮助。我正在构建一个非常简单的应用程序，它有两个接口：普通的 Web 应用程序（HTML 表单等）和一个 RESTful API。两者并不相同，但它们共享很多 CRUD 操作。

我有两个捆绑包，每个捆绑包都包含特定于每个接口的控制器。一种使用 Form 组件创建和验证表单，另一种只是以任何格式（JSON 或 XML）从请求中解析数据。然而，这很糟糕。这两个接口之间有很多共享代码，例如参数绑定和验证。尽管模型相同，但我从用户那里接收数据并与模型交互的方式是纯粹的反 DRY。

有没有办法将输入绑定和验证带入一个抽象的操作中？我首先创建了一个从每个控制器接收请求对象的类，验证每个参数并与模型通信。它对 API 非常有用，但我完全失去了 Form 组件的优势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:16:08.760

您可以尝试为每个操作使用 2 条不同的路线，但执行相同的实际操作

```
blah_blah.blahbadeblah:
    pattern: /blah/
    defaults:
        _controller: "BlahBlahBundle:Blah:index"
        json: false

blah_blah.blahbadeblah_json:
    pattern: /json/blah/
    defaults:
        _controller: "BlahBlahBundle:Blah:index"
        json: true 
```

然后您可以在控制器末尾进行检查，`json`然后使用完整模板或包含最少内容的 JsonResponse 进行响应。

# java - 从控制台运行时自动启动 Play2 应用程序

> ID：15726509
> 
> 赞同：0
> 
> 时间：2013-03-31T05:00:24.303
> 
> 标签：java, playframework-2.0

当我在游戏控制台中输入“开始”时，我的应用程序会立即启动。当我使用“运行”命令时，我需要为此刷新网页，有没有办法避免这种行为？我在 Global 类中有一些代码，我想在“运行”命令上运行它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:15:27.113

我不确定你在找什么。

我的理解：

*   当您调用时`start`，您的项目将被编译，然后应用程序才会启动；
*   当您调用时`run`，您的应用程序会在浏览器的第一次调用时编译。

为避免第一次访问时的编译时间，只需在`compile`之前运行`run`，您将获得相同的行为。

# shell - UNIX 管道的问题

> ID：15726514
> 
> 赞同：-1
> 
> 时间：2013-03-31T05:01:01.777
> 
> 标签：shell, command-line, pipe, stdout, stdin

所以我有一些 ruby​​ 代码循环将字符串放入标准输出，`puts`然后使用`sleep`. 然后，我有一些 node.js 代码在标准输入上侦听数据事件，并简单地记录它从标准输入获得的内容。

如果我跑`echo 'something' | node my_code.js`，我会看到一些东西，但如果我跑，`ruby my_code.rb | node my_code.js`我什么也看不到。

我是否无法使用 UNIX 管道将标准输出从 ruby​​ 代码重定向到 node.js 代码的标准输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:18:21.790

两者之间应该没有什么区别，Ruby 代码应该没问题。

但是，您发现了一些问题。如果你运行 Ruby 会发生什么`tee`？

```
ruby my_code.rb | tee file 
```

你看到输出了吗？如果没有，请开始调查您的 Ruby 代码。（当你运行它而不用管道输出它时它工作吗？）。如果您确实看到了预期的输出，Ruby 程序是否停止（退出）？你得到你的命令行提示符了吗？

如果 Ruby 没有任何异常，那么当您通过管道将多行文件传递给 JavaScript 时会发生什么：

```
cat my_code.rb | node my_code.js 
```

我希望其中一种情况能够为您提供一些追逐的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:42:55.577

试试这个：

```
ruby my_code.rb | awk '{print;fflush()}' | node my_code.js 
```

或这个：

```
ruby my_code.rb | grep --line-buffer '.*' | node my_code.js 
```

# scheme - Scheme中的交错对

> ID：15726517
> 
> 赞同：0
> 
> 时间：2013-03-31T05:02:25.997
> 
> 标签：scheme, racket

我正在尝试编写一个程序，该程序需要 2 个流并将它们的对放在一起，然后将它们交错。现在它没有产生正确的输出。这是我的代码：

```
(define (interleave-pairs s t)
  (cons-stream (cons (stream-car s) (stream-car t))
               (cons-stream
               (stream-map (lambda (x) (cons (stream-car s) x))
                           (stream-cdr t))
               (interleave-pairs t (stream-cdr s))))) 
```

为了获得值，我编写了一个过程：

```
(define (take n s)  
  (if (= n 0)
      '()
      (cons (stream-car s) (take (- n 1) (stream-cdr s))))) 
```

这是针对整数流的：

```
(define integers (cons-stream 1 (add-streams ones integers))) 
```

所以当我打电话时

```
(take 6 (pairs integers integers)) 
```

我越来越：

```
((1 . 1)
((1 . 2) . #<promise>)
(1 . 2)
((1 . 3) . #<promise>)
(2 . 2)
((2 . 3) . #<promise>)) 
```

而我想要 (1 1) (1 1) (1 2) (1 3) (2 2) (2 3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:13:37.980

缺少过程中的基本情况（如果其中一个流在另一个之前结束会发生什么？）。该过程相当简单，只需取一对元素（每个流中的一个）然后将它们交错，此处无需使用`stream-map`：

```
(define (pairs s1 s2)
  (if (stream-null? s1)
      s2
      (stream-cons (list (stream-car s1) (stream-car s2))
                   (pairs s2 (stream-cdr s1))))) 
```

# asp.net - 将两个 DataTable 的数据合并到一个 DataTable 中而不使用循环等？

> ID：15726518
> 
> 赞同：3
> 
> 时间：2013-03-31T05:02:36.253
> 
> 标签：asp.net, performance, datatable

我有两个不同`DataTable`的 s`dt1`和`dt2`。两个`DataTable`s 具有相同的结构，但包含不同的数据。

我想将数据`dt1`存储`dt2`在`dt1`.

我目前正在使用for循环通过`dt1`在每次迭代中添加一行来执行此操作，但这需要太多时间。

有没有更快/直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:05:55.173

是的，一旦我尝试过。

我认为有一种`merge`方法`datatable`。通过使用它，您可以`merge`在 dt1 中获取 dt2 的数据。

但条件是两者都`datatables`应该遵循相同的表结构，并且`datatypes`每个`column`应该相同。

你可以像下面这样使用它：

```
 dt1.Merge(dt2); 
```

让我知道，它对你有用吗？

# google-app-engine - 在 Google 应用引擎上安装 QuantLib python SWIG 模块

> ID：15726520
> 
> 赞同：0
> 
> 时间：2013-03-31T05:02:56.630
> 
> 标签：google-app-engine, python-2.7, quantlib, quantlib-swig

我是 GAE 的新手。我希望使用 QuantLib python 库 (SWIG) 作为谷歌应用引擎中的一个模块。我正在关注这篇博文以在 Ubuntu 上设置 QuantLib-SWIG。[http://blog.quantess.net/2012/09/26/quantlib-get-it-working-on-ubuntu/](http://blog.quantess.net/2012/09/26/quantlib-get-it-working-on-ubuntu/)

`make -c Python`如帖子中所述，在安装所需的 boost c++ 库后，我已经使用 python 编译了模块。

我已将 QuantLib 文件夹复制到我的 app 文件夹中。QunatLib 文件夹包含以下文件：

```
__init__.py
__init__.pyc
QuantLib.py
QuantLib.pyc
_QuantLib.so* 
```

这是我的应用程序目录结构：

```
app.yaml
index.py
QuantLib/ 
```

但是，当我做一个

```
import QunatLib 
```

在我的应用程序文件夹的 index.py 中，我收到以下错误：

```
<type 'exceptions.ImportError'>: No module named _QuantLib 
      args = ('No module named _QuantLib',) 
      message = 'No module named _QuantLib' 
```

我也得到这是 dev_appserver 日志：

```
ImportError: No module named _QuantLib 
```

_QuantLib 是一个`.so`文件。有没有办法解决这个问题？或者以任何其他方式将 QuantLib 库用于 GAE？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:14:07.870

不。

有数量有限的不是纯 python 的 3rd 方库。您不能将自己的非纯 python 库添加到 appengine 运行时。

这是包含的 3rd 方库的当前列表[https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)

您可以在自己的代码库中添加任何**纯 Python库。**

# sql - Reporting Services 中的 SQL 聚合

> ID：15726530
> 
> 赞同：1
> 
> 时间：2013-03-31T05:04:59.890
> 
> 标签：sql, sql-server, tsql

我正在使用 ingres 数据库将报告从 powerbuilder 迁移到 MS Reporting Services。我有以下数据集：

```
Code| Code Description | Carer_Id| Child_id | Child_age
=======================================================
738  Workflow           1234       2345        10
738  Workflow           1234       2346        15
739  Estimate           1235       2367        10 
```

powerbuider 报告使用内置函数来运行总计以输出数据，例如：

```
code | Code Description | carer | child | age 0 < 10 | age 10 > 15
738   Workflow             1        2        1          1
==================================================================
739   Estimate             1        1        1          0 
```

基本上要求是显示照顾者的总数，代码的儿童（按代码分组），但也显示 10 岁以下儿童的总数，以及按代码分组的 10 岁及以上儿童的总数.

我的问题是如何在 T-sql 2005 或 SSRS 中获得相同的东西？我可以得到 carer_id 和 Child_id 的不同 COUNT，然后将它们分组以获得照顾者和孩子的总数，但我无法得到年龄？如果可能我不想使用光标，我应该使用 CTE 吗？请任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:08:20.790

```
SELECT  Code,
        [Code Description],
        COUNT(DISTINCT carer_ID) Carer,
        COUNT(DISTINCT Child_ID) child,
        SUM(CASE WHEN Child_Age BETWEEN 0 AND 10 THEN 1 ELSE 0 END) [age 0 < 10],
        SUM(CASE WHEN Child_Age BETWEEN 11 AND 15 THEN 1 ELSE 0 END) [age 10 > 15]
FROM    TableName
GROUP   BY Code, [Code Description] 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/2b920/2)

输出

```
╔══════╦══════════════════╦═══════╦═══════╦════════════╦═════════════╗
║ CODE ║ CODE DESCRIPTION ║ CARER ║ CHILD ║ AGE 0 < 10 ║ AGE 10 > 15 ║
╠══════╬══════════════════╬═══════╬═══════╬════════════╬═════════════╣
║  738 ║ Workflow         ║     1 ║     2 ║          1 ║           1 ║
║  739 ║ Estimate         ║     1 ║     1 ║          1 ║           0 ║
╚══════╩══════════════════╩═══════╩═══════╩════════════╩═════════════╝ 
```

# sql - PostgreSQL：货币应该使用哪种数据类型？

> ID：15726535
> 
> 赞同：182
> 
> 时间：2013-03-31T05:06:14.797
> 
> 标签：sql, postgresql, database-design

似乎不鼓励使用[此处](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/USD3cdng9-s)`Money`描述的类型

我的应用程序需要存储货币，我应该使用哪种数据类型？数字、金钱还是浮点数？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-03-31T12:56:44.367

您的消息来源绝不是官方的。它可以追溯到 2011 年，我什至不认识作者。如果货币类型被官方“劝阻”，PostgreSQL 会在手册中这样说 -[它没有](https://www.postgresql.org/docs/current/datatype-money.html)。

如需**更官方的来源**，请阅读[pgsql-general 中的此线程（仅从本周开始！）](https://www.postgresql.org/message-id/flat/20130328092819.237c0106@imp#20130328092819.237c0106@imp)，其中包含核心开发人员的声明，包括 D'Arcy JM Cain（金钱类型的原作者）和 Tom Lane：

有关最近版本改进的相关答案（和评论！）：

*   [Jasper 报告：无法获取类“org.postgresql.util.PGmoney”的字段“x”的值](https://stackoverflow.com/questions/12262266/jasper-report-unable-to-get-value-for-field-x-of-class-org-postgresql-util-p/12264256#12264256)

基本上，[`money`](https://www.postgresql.org/docs/current/datatype-money.html)有其（非常有限的）用途。[Postgres Wiki](https://wiki.postgresql.org/wiki/Don%27t_Do_This#Don.27t_use_money)建议在很大程度上避免它，除了那些狭义的情况。优势`numeric`在于*性能*。

[`decimal`](https://www.postgresql.org/docs/current/datatype-numeric.html)只是[**`numeric`**](https://www.postgresql.org/docs/current/datatype-numeric.html)Postgres 中的别名，广泛用于货币数据，是一种“任意精度”类型。[手册](https://www.postgresql.org/docs/current/datatype-numeric.html)：

> 该类型`numeric`可以存储具有非常多位数的数字。特别推荐用于存储货币数量和其他需要精确性的数量。

就个人而言，我喜欢将货币存储为[**`integer`**](https://www.postgresql.org/docs/current/datatype-numeric.html)代表美分，如果小数美分永远不会出现（基本上是在货币有意义的地方）。这比任何其他提到的选项都更有效。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2013-03-31T11:03:56.853

具有强制 2 个单位精度的[数字。](http://www.postgresql.org/docs/9.0/static/datatype-numeric.html#DATATYPE-NUMERIC-DECIMAL)永远不要使用 float 或 float like 数据类型来表示货币，因为如果你这样做了，当财务报告的底线数字不正确 + 或 - 几美元时，人们会不高兴。

据我所知，货币类型只是出于历史原因而保留。

> 以此为例：1 伊朗里亚尔等于 0.000030 美元。如果您使用少于 5 个小数位，则 1 IRR 将在转换后四舍五入为 0 美元。我知道我们在这里分割里亚尔，但我认为在处理金钱时你永远不会太安全。

* * *

## 回答 #3

> 赞同：101
> 
> 时间：2013-03-31T11:18:06.077

您的选择是：

1.  `bigint`：以美分存储金额。这是 EFTPOS 交易使用的。
2.  `decimal(12,2)`: 存储精确到小数点后两位的金额。这是大多数总帐软件使用的。
3.  `float`: 糟糕的想法 - 准确性不足。这是天真的开发人员使用的。

选项 2 是最常见和最容易使用的。使精度（在我的示例中为 12，意味着总共 12 位数字）尽可能大或小，以最适合您。

请注意，如果您将计算结果（例如涉及汇率）的多个交易汇总为具有商业意义的单个值，则精度应该更高以提供准确的宏观值；考虑使用类似的东西，`decimal(18, 8)`这样总和是准确的，并且各个值可以四舍五入到分精度以进行显示。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2018-07-09T05:34:11.720

**使用存储为的 64 位整数`bigint`**

我建议使用微型美元（或类似的主要货币）。微意味着百万分之一，因此 1 微美元 = 0.000001 美元。

*   易于使用并与每种语言兼容。
*   足够的精度来处理一分钱。
*   适用于非常小的单位定价（如广告展示或 API 费用）。
*   比字符串或数字更小的存储数据大小。
*   通过计算轻松保持准确性并在最终输出中应用舍入。

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2015-10-16T18:52:47.217

我将所有货币字段保留为：

`numeric(15,6)`

有这么多小数位似乎有点过分，但如果有哪怕是最微小的机会，您将不得不处理多种货币，那么您将需要如此高的精度来进行转换。无论我向用户展示什么，我总是以美元存储。考虑到当天的兑换率，我可以很容易地兑换成任何其他货币。

如果你只做一种货币，最糟糕的是你浪费了一点空间来存储一些零。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2020-05-29T14:35:57.827

用于`BigInt`将货币存储为以最小货币单位表示货币价值的正整数（例如，100 美分存储 1.00 美元或 100 存储 ¥100（日元，一种零十进制货币）。这就是 Stripe 所做的——一个全球电子商务最重要的金融服务公司。

[资料来源：请参阅https://stripe.com/docs/currencies](https://stripe.com/docs/currencies)上的“零十进制货币”

# twitter-bootstrap - 使用 Bootstrap 双下拉菜单自动完成

> ID：15726537
> 
> 赞同：1
> 
> 时间：2013-03-31T05:06:41.983
> 
> 标签：twitter-bootstrap

使用 Bootstrap 的自动完成功能时，只有当我包含包含空格作为选项的字符串时，我才会得到两个下拉列表（似乎是浏览器默认的一个）。

A）我试过 autocomplete="off" 无济于事
B）这很好：

```
 data-source='["Apple", "Orange", "Banana"]' /> 
```

C）这给出了双重下拉：

```
 data-source='["Two words", "Anything else"]' /> 
```

D）即使这给出了双重下拉：

```
data-source='["Two&nbsp;words", "Anything&nbsp;else"]' 
```

E) Bootstrap 文档中的示例可以很好地处理空格...

F) 是的，我的 DOCTYPE 是 HTML5

知道为什么会这样以及如何解决吗？

谢谢，布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:16:52.687

对于这个愚蠢的问题，我很抱歉——我对 bootstrap-typeahead.js 有一个额外的参考，它把它翻了一番。

# jquery - Jquery xml解析读取XML一次

> ID：15726543
> 
> 赞同：0
> 
> 时间：2013-03-31T05:08:56.690
> 
> 标签：jquery, xml-parsing

示例来自： http: [//papermashup.com/parse-xml-with-jquery/](http://papermashup.com/parse-xml-with-jquery/)

***函数 xmlParser(xml)***工作正常，因为它在成功时被调用。

我想写另一个***function xmlParser_selective(selection parameters)***

这是否意味着我将不得不通过*$.ajax({type: "GET", url: "books.xml", dataType: "xml", success: xmlParser});重新读取 xml* ? 我的目标是编写一个可以根据请求解析一些选择性节点的函数，但我不想再次读取 xml，因为我已经在准备好文档时完成了它。我不能让它看起来工作。有什么想法吗？ **函数 xmlParser_selective(选择参数) ??**

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "books.xml",
        dataType: "xml",
        success: xmlParser
    });
});

function xmlParser(xml) {

    $('#load').fadeOut();

    $(xml).find("Book").each(function () {

        $(".main").append('<div class="book"><div class="title">' + $(this).find("Title").text() + '</div><div class="description">' + $(this).find("Description").text() + '</div><div class="date">Published ' + $(this).find("Date").text() + '</div></div>');
        $(".book").fadeIn(1000);

    });

}

function xmlParser_selective(selection,parameters) {
    $(xml).find("Book").each(function () {
    // this is not working.How do i get to  $(xml) ? that is read on document ready
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:26:18.107

您不需要再次加载 xml ..

```
 var my_xml;
   $.ajax({
        type: "GET",
        url: "books.xml",
        dataType: "xml",
        success: function(data){
          my_xml = data;
        }
    });

function xmlParser_selective(selection,parameters) {
    $(my_xml).find("Book").each(function () {
    // this is not working.How do i get to  $(xml) ? that is read on document ready
    });
} 
```

# matlab - 向量化搜索函数 matlab

> ID：15726546
> 
> 赞同：0
> 
> 时间：2013-03-31T05:09:08.593
> 
> 标签：matlab, search, find

寻找矢量化搜索的有效方法

说 A 是 2 x 4 数组

```
 x      y     z     a
.2      0.97  34.2  4.5 
```

B 是一个 1 x 1000 数组

```
a x x x x y y y z z a ......... 
```

如何获取数组 B 的 A 的相应第 2 行值。寻找向量化的有效解决方案，我有一个有效但效率不高的 if 循环。

谢谢

我目前有

```
A(2,A(1,:)==B(:)) 
```

但这不起作用，因为两个数组的大小不同。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:15:20.423

您可以使用该`ismember`函数的第二个输出，如下所示：

```
%Setup
A = [24 25 26 1; 0.2 0.97 34.2 4.5]
B = [1 24 24 24 24 25 25 25 26 26 1];

%Use ismember to get matching indexes
[~, ixs] = ismember(B, A(1,:))

%Use indexes to get desired result
out = A(2,ixs) 
```

# c - 如何使用 C 语言获取 Windows 进程的状态（正在运行或已终止）？

> ID：15726547
> 
> 赞同：0
> 
> 时间：2013-03-31T05:09:23.983
> 
> 标签：c, windows, process, triggers, status

我想知道 Windows 任务管理器上的进程终止的天气？（这意味着我想制作一个类似数据库触发器的功能）在某个特定进程终止的那一刻，我想做一些任务。

从前天开始，我在很多方面都厌倦了它。但我没有得到正确的配合。

先感谢您。

```
#include "stdio.h"
#include "Windows.h"

int main()
{
HANDLE jvminst = GetCurrentProcess();

printf("%d %d \n",jvminst,WaitForSingleObject(jvminst,0));

return 0;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:10:42.333

获取`HANDLE`进程并使用[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/ms687032.aspx).

# ruby - 无法在 Mountain Lion 上安装 RVM 和 Ruby

> ID：15726549
> 
> 赞同：0
> 
> 时间：2013-03-31T05:09:33.167
> 
> 标签：ruby, macos, installation, rvm, osx-mountain-lion

我在 StackOverflow 尝试了所有解决方案，但没有一个对我有用。我尝试使用以下命令：

```
rvm get head; rvm install 1.9.3 --debug 
```

输出可以在这里找到：http: [//pastie.org/7189647](http://pastie.org/7189647)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:29:41.320

最后我解决了这个问题。

1.  打开 Xcode 4.6 或 4.6.1 并转到 Preference -> Downloads 并安装“命令行工具”。

2.  打开终端并输入

    `\curl -L https://get.rvm.io | bash -s stable --rails --autolibs=enabled`

按照 RVM 站点中的说明。它完美无瑕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:14:21.873

您是否分别尝试了这两个命令？看来`rvm get head`命令的一部分起作用了。尝试运行`rvm install 1.9.3`或`rvm install 1.9.3-p392`.

# jquery - 如何在页面加载时加载数据？

> ID：15726550
> 
> 赞同：0
> 
> 时间：2013-03-31T05:09:56.690
> 
> 标签：jquery, codeigniter

我正在使用 hashchange 事件来了解 URI 何时更改并将内容加载到 div 中，但我想在第一次加载页面时获取主题标签以将内容加载到 div 中。. . 如果它没有主题标签，则将默认页面加载到 div

这是我的代码。. .

```
$(window).bind('hashchange', function () {
    var hash = window.location.hash.slice(1);
    $('#content').load('<? echo base_url(); ?>index.php/controller/'+ hash)
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:14:03.620

您可以[`.trigger()`](http://api.jquery.com/trigger/)在 DOM 上设置事件，[`.ready()`](http://api.jquery.com/ready/)以便在页面加载时执行一次处理程序。

```
$(window).on('hashchange', function() {

    var url = '<?php echo base_url(); ?>index.php/controller/';
    if (window.location.hash) url += '...';

    $('#content').load(url);

}).trigger('hashchange'); 
```

请注意，较旧的浏览器不支持此事件。

# c# - LINQ to Entities 不支持“刻度”

> ID：15726551
> 
> 赞同：1
> 
> 时间：2013-03-31T05:10:27.257
> 
> 标签：c#, linq, entity-framework

这是我的代码：

```
 var count = this.Repository.ObjectContext.LogDetail
                .Count(p => p.LogId == logId &&System.Data.Objects.EntityFunctions. p.LogDetailTime. == logDetailTime.Ticks && p.OperationId == operationId);
            return (count > 0); 
```

我得到这个错误：

> LINQ to Entities 不支持指定的类型成员“Ticks”。仅支持初始化程序、实体成员和实体导航属性。

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-02T08:21:06.417

如前所述，您不应该将所有记录提取到内存中然后进行过滤。您可以轻松比较日期值而无需转换为刻度：

```
var query = this.Repository.ObjectContext.LogDetail
            .Where(p => p.LogId == logId 
                     && p.OperationId == operationId
                     && EntityFunctions.DiffSeconds(p.LogDetailTime,
                                                      logDetailTime) == 0);
return (query.Any()); 
```

请注意，`DiffSeconds`当差异大于时可能导致溢出`Int32.MaxValue`（错误：*datediff 函数导致溢出*）。我不知道您所追求的精度以及比较的值相距多远，因此您必须在这里做出选择。你真的对具有完全相同数量的刻度的记录感兴趣吗？很难想象。也许`DiffMinutes`已经足够好了。

另一种可能的优化是使用`Any`而不是`Count`. `Any`生成一个`WHERE EXISTS`子句。这可能比`COUNT`SQL 更有效。

您获得的是现在只传输一个布尔值（位）而不是潜在的大量记录。

* * *

**注意**：在 Entity Framework 6`EntityFunctions`中已被[`DbFunctions`](https://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions.diffseconds%28v=vs.113%29.aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T07:42:16.327

当使用无法在数据库中使用的某些方法/属性时，LINQ to Entities 经常发生这种情况。

在这种情况下，您可以将它的值放入变量中。

我注意到您也有语法错误，但您可以修复它。在您修复该语法错误之后，以下代码应该可以工作`System.Data.Objects.EntityFunctions. p.LogDetailTime.`

```
var ticks = logDetailTime.Ticks;
var count = this.Repository.ObjectContext.LogDetail
            .Count(p => p.LogId == logId &&System.Data.Objects.EntityFunctions. p.LogDetailTime. == ticks && p.OperationId == operationId);
        return (count > 0); 
```

# php - 来自 PHP 服务的 JSON 解析问题

> ID：15726552
> 
> 赞同：1
> 
> 时间：2013-03-31T05:10:28.377
> 
> 标签：php, ios, objective-c, json

我在 PHP 脚本中的二维数组上使用 json_encode，如下所示：

```
$myjsons[] = json_encode(array($runners)); 
```

脚本后面还有许多一维数组：

```
$myjsons[] = json_encode(array($mrow)); 
```

然后我在脚本末尾对整个数组进行编码后回显：

```
echo json_encode($myjsons); 
```

我正在开发一个与该服务通信的 iOS 应用程序。好吧，至少它是假设的。这是减去错误检查的 iOS 代码：（我正在使用 JSONKit，顺便说一句）

```
NSMutableURLRequest *urlReq = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:kStartRaceURL]];
[urlReq setHTTPMethod:@"GET"];

NSError *requestError;
NSURLResponse *urlResponse = nil;

NSData *response = [NSURLConnection sendSynchronousRequest:urlReq returningResponse:&urlResponse error:&requestError];

NSArray *deserializedData = [response objectFromJSONData]; 
```

deserializedData 是一个数组，但其中的所有对象都是字符串。我在其中放入了数组，如 PHP 所示，那么为什么它们是 NSString 的呢？实施的问题在哪里？或者我应该对 NSString 做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T05:16:22.553

`json_encode`返回一个字符串，所以当你把它们放在一个数组中时，你会得到一个字符串数组。当您`json_encode`使用该数组时，您会得到一个 (JSON) 字符串数组。

要解决此问题，您应该首先将所有数组合并到一个大数组中，然后只`json_encode`在该最终数组上调用一次。例子：

```
$myjsons[] = array($runners);
$myjsons[] = array($mrow);

echo json_encode($myjsons); // Correct JSON as you expect it. 
```

# django - 在 django 中调用 create 时是否隐式调用 save()？

> ID：15726553
> 
> 赞同：38
> 
> 时间：2013-03-31T05:10:28.877
> 
> 标签：django, django-models, django-validation

我正在尝试对模型执行一些自定义验证，但我很困惑。让我具体一点。假设我的代码如下：

```
class FooManager(models.Manager):
  def create_foo(self, name):
    return self.create(foo_name = name)

class Foo(models.Model):
  foo_name = models.CharField(max_length=30)
  objects = FooManager()

  def clean(self):
    ...
  def save(self, *args, **kwargs):
    self.full_clean()
    super(User, self).save(*args, **kwargs) 
```

现在，当我从 shell 使用这个模型时，如果我调用：

> f = Foo.objects.create_foo("")

在我有机会在 f 上调用 save() 之前，它会引发验证错误。为什么会这样？不应该只在我调用 f.save() 后才引发验证错误吗？

注意：如果我使用 objects.create() 而不是自定义定义的 create 方法，也会发生同样的事情。任何帮助将不胜感激，因为我发现 django 中的验证相当令人沮丧。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-31T05:43:25.530

[`create()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#create)将自动保存，因此即使您修复了错误 - 您仍然必须确保创建的参数满足数据库要求以保存记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:36:15.517

你忘了把`self`你的经理

```
class FooManager(models.Manager):
    def create_foo(self, name):
        return self.create(foo_name = name) 
```

# java - 该代码适用于 notifyAll，但不适用于 notify

> ID：15726557
> 
> 赞同：1
> 
> 时间：2013-03-31T05:10:58.927
> 
> 标签：java, multithreading, concurrency, wait, notify

我正在尝试创建一个带有两个线程的简单“Ping-Pong”程序（Pong 线程仅在 Ping 线程之后打印他的消息）。

问题是为什么下面的代码一直卡住，但在`notifyAll`?

这是我的代码：

```
public class Main {
private static class Ping extends Thread {
    private int rounds;
    Ping(int rounds) { this.rounds = rounds; }
    @Override
    public void run() {
        try {
            synchronized(this) {
                while(rounds > 0) {
                    System.out.println("Ping");
                    notify();
                    wait();
                    --rounds;
                }
                notify();
            }
            System.out.println("Ping done");
        } catch(Exception ignored) { ignored.printStackTrace(); }
    }

    public boolean isDone() { return rounds <= 0; }
}

private static class Pong extends Thread {
    private final Ping ping;
    Pong(Ping ping) { this.ping = ping; }
    @Override
    public void run() {
        try {
            synchronized(ping) {
                while(!ping.isDone()) {
                    System.out.println("Pong");
                    ping.notify();
                    ping.wait();
                }
            }
            System.out.println("Pong done");
        } catch(Exception ignored) { ignored.printStackTrace(); }
    }
}

public static void main(String[] args) throws Exception {
    Ping ping = new Ping(15);
    Pong pong = new Pong(ping);

    ping.start();
    pong.start();

    ping.join();
    pong.join();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:17:22.447

从代码中删除 ping.join 它将起作用。ping.join 使主线程等待 ping 实例，因此您有 2 个线程等待 ping。这就是为什么它只适用于 notifyAll。

实际上不需要连接，Java 将等待 Ping 和 Pong 终止

如果您使用单独的锁进行同步，则不会出现此类问题。在线程上同步（Ping 是一个线程）是个坏主意

线程协调是不可靠的，它取决于线程调度程序。这

```
notify();
wait(); 
```

可能是个问题。假设您发送 notify() 并且当当前线程移动到 wait() 时，另一个线程醒来完成它的工作并发送 notify() ，如果当前线程尚未到达 wait() 但通知将丢失。您可以轻松地模拟此场景以查看其真实性。

# php - 我无法将我的 styles.css 文件恢复为原始形式

> ID：15726558
> 
> 赞同：0
> 
> 时间：2013-03-31T05:11:15.390
> 
> 标签：php, css, wordpress, file-permissions

我似乎无法更新在**[我的博客](http://longgame.org/)****中找到的style.css**文件。让我感到沮丧的是，直到几个小时前，我还能够对事物进行增量更改（而不是使用子主题）。

但是，我一直遇到问题。例如，我在#main-content 区域中*有一个背景图像。*一旦我更新了图像（保持相同的名称），它就无法显示。然后我一直在摆弄，试图完善这件事。我的问题是编辑东西的行为似乎**不一致。**

所以：

我试图将**style.css** *恢复*到其原始形式，以便我可以学习 - 并使用 - 整个“儿童主题”。问题？我*无法*恢复。我进入了我的 FTP 程序，物理上删除了旧的 styles.css 文件，然后复制了原始文件。

我刷新了，尝试了其他浏览器，清除了 WP 中的缓存，并做了我能想到的一切。更重要的是，我已经确保有问题的代码......

```
#main-content { background-image: url(gridpaper.gif repeat; padding: 25px; background-color: 0px 0px 6px rgba(0, 0, 0, 0)} 
```

...包括我将 dang 'gridpaper.gif' 放在一堆位置的事实，以防万一我误解了 url 位置错误。我刚刚重新访问了该站点，发现上面显示的代码实际上*并不*存在。我的修改版本是，我一直在疯狂地*恢复它。*

我已经查看了文件权限，并且可以确认*style.css*文件的“666”。我完全受阻，并且花在这上面的时间比我应该做的要多得多。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:20:02.647

尝试更改属性：

```
background-image: url('gridpaper.gif') repeat; 
```

# three.js - 当对象不属于场景时，Three.js raycaster 交叉点为空

> ID：15726560
> 
> 赞同：2
> 
> 时间：2013-03-31T05:11:30.593
> 
> 标签：three.js

我已经尝试通过创建网格并将它们作为更大几何图形的一部分来改进我的项目的渲染时间，并且将单个几何图形作为我添加到场景中的对象。我认为我仍然可以通过一组原始网格来管理对象的拾取，并将它们传递给光线投射器。我使用了以下代码：

```
var vector = new THREE.Vector3( ( loc_x / window.innerWidth ) * 2 - 1, - ( loc_y / window.innerHeight ) * 2 + 1, 0.5 );
projector.unprojectVector(vector, camera);
var raycaster = new THREE.Raycaster( camera.position, vector.sub( camera.position ).normalize() );
var objects = [];

var i = active_regions.length;
while (i--) {
  objects = objects.concat(active_regions[i].mesh_entities);
}
var intersects = raycaster.intersectObjects( objects );
if ( intersects.length > 0 ) {
  console.log("Intersection: " + intersects);
} 
```

所以在上面的代码中，active_regions 包含原始的单个网格，我动态创建一个数组来指定我想从中选择哪些对象。不幸的是 intersects 是空的。

如果我稍微修改我的项目，以便将所有这些 mesh_entities 单独添加到场景中，那么上面的代码就可以工作并且我可以成功选择对象。不幸的是，整个场景渲染得很慢。

有什么好方法（或一些好方法）让我成功地检查与光线的交点，而不减慢我的渲染速度？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-27T12:08:31.970

您需要手动更新不在渲染场景中的对象的矩阵，因为它是作为渲染过程的一部分完成的，因此如果您使用的是幻影场景，则不需要渲染它，只需在进行交集之前更新矩阵：

```
scene_ghost.updateMatrixWorld(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:42:12.353

我通过鬼场景解决了这个问题。本质上，我将所有对象作为单独的网格添加到幽灵场景中，然后当我使用 raycaster 时它就可以工作了。

但是，我必须使用这些功能：

```
function flip_render_ghost(yes) {
  if (yes == true) {
    scene_ghost.add(camera);
    render_ghost = true;
  } else {
    scene.add(camera);
    render_ghost = false;
  }
  render();
}

function render() {

  if (render_ghost == true) {
    renderer.render( scene_ghost, camera );
  } else {
    renderer.render( scene, camera );
  }

} 
```

每当我要检查碰撞时，我会翻转到渲染幽灵场景，检查命中，然后翻转回正常渲染。

编辑：我后来发现对象不能属于多个场景（尽管可以共享几何图形）。所以我所做的是为采摘场景创建了简单的网格。这需要更多内存，但可以选择使用更简单的网格进行选择，以便更快地拾取。此外，将幽灵场景本身的孩子发送到光线投射器似乎对我有用。您可能需要像我一样，为幻影场景中的每个对象添加一个属性，该属性引用您尝试选择的主要对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T20:34:18.910

我正在做类似的事情，并且已经验证您需要渲染场景才能进行正确的光线投射。优化这一点很容易，但是只渲染两个屏幕并让一个清晰地覆盖另一个。您应该能够将您的代码更改为此，因为第二个渲染调用将在第一个屏幕上清除：

```
function render() {
  renderer.render( scene_ghost, camera );
  renderer.render( scene, camera );
} 
```

# c# - windows phone 中的覆盖窗口实现

> ID：15726562
> 
> 赞同：0
> 
> 时间：2013-03-31T05:11:38.180
> 
> 标签：c#, windows-phone-8

在我的 wp8 手机应用程序中，我想在基于某些数据 a（例如：摘要或游戏级别详细信息）完成特定操作时显示覆盖窗口。

有没有办法在 c# 中做到这一点？

# coldfusion - 图像上的水印和文本放置问题

> ID：15726563
> 
> 赞同：0
> 
> 时间：2013-03-31T05:11:41.633
> 
> 标签：coldfusion, cfimage

我正在为图像添加水印并且我的代码有问题。它确实在右下角创建了一个水印，但没有写入文本。

谁能发现代码有什么问题？

```
<cfset objImage = ImageRead("#UploadDir2#\#uploadfile#") />
<cfset objImage2 = ImageRead("#UploadDir2#\#uploadfile#") />
<cfset ImageResize(objImage,800,"")>
<cfif form.textonImage NEQ "">
     <cfset objWatermark = ImageNew("",20,20,"rgb","##F0F0F0")/>
     <cfset ImageSetDrawingColor(objWatermark,"##000000") />
     <cfset ImageDrawRect(objWatermark,0,0,(objWatermark.GetWidth() - 1),(objWatermark.GetHeight() - 1)) />
     <cfset ImageSetAntialiasing(objWatermark,"on") />
     <cfset objAttributes = {Font = "Verdana",Size = "8",Style = "bold"} />
     <cfset ImageDrawText(objWatermark,"#form.textonImage#",11,40,objAttributes) />
     <cfset ImageSetDrawingTransparency(objImage,60) />
     <cfset ImagePaste(objImage,objWatermark,(objImage.GetWidth() - objWatermark.GetWidth() - 0),(objImage.GetHeight() - objWatermark.GetHeight() - 0)) />
</cfif>   

<cfset ImageWrite(objImage,"#UploadDir2#\#uploadfile#")>            
<cfset ImageResize(objImage2,#request.pic_th_width#,"")>
<cfif form.textonImage IS NOT "">
    <cfset objWatermark = ImageNew("",#request.pic_th_width#,#request.pic_th_width#,"rgb","##F0F0F0")/>
    <cfset ImageSetDrawingColor(objWatermark,"##000000") />
    <cfset ImageDrawRect(objWatermark,0,0,(objWatermark.GetWidth() - 0),(objWatermark.GetHeight() - 0)) />
    <cfset ImageSetAntialiasing(objWatermark,"on") />
    <cfset objAttributes = {Font = "Verdana",Size = "20",Style = "bold"} />
    <cfset ImageDrawText(objWatermark,"#form.textonImage#",11,40,objAttributes) />
    <cfset ImageSetDrawingTransparency(objImage2,60) />
    <cfset ImagePaste(objImage2,objWatermark,(objImage2.GetWidth() - objWatermark.GetWidth() - 0),(objImage2.GetHeight() - objWatermark.GetHeight() - 0)) />
</cfif> 
```

**编辑：**

我回答了我自己的问题，所以让我们删除它或忽略它。

# ios - iOS 6 - MPMoviePlayerViewController 生成 CGContext 错误并卡在“正在加载...”

> ID：15726565
> 
> 赞同：0
> 
> 时间：2013-03-31T05:12:34.153
> 
> 标签：ios, mpmovieplayercontroller, loading, cgcontext

之前工作正常，但由于某种原因，我遇到了所有这些问题。URL 正确，适用于 MP4 文件。

代码：

```
[movieView.moviePlayer setContentURL:videoLink];
[movieView.moviePlayer prepareToPlay];
[self presentViewController:movieView animated:YES completion:nil]; 
```

日志：

```
 <Error>: CGContextSaveGState: invalid context 0x0
   <Error>: CGContextClipToRect: invalid context 0x0
   <Error>: CGContextTranslateCTM: invalid context 0x0
   <Error>: CGContextDrawShading: invalid context 0x0
   <Error>: CGContextRestoreGState: invalid context 0x0 
```

**编辑**

看起来 CGContext 错误是框架中的一个错误，所以不需要做太多的事情。但仍然不明白“正在加载..”错误。我已经验证了这些 URL，它们都可以在网络浏览器上正常播放视频。记录电影播放器​​的 URL 会显示正确的 URL。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:29:41.150

事实证明，播放的问题是我的可达性方法没有检测到低连接性。

# java - 如何在 Java 中使用正则表达式从一个字符串中找到多个子字符串？

> ID：15726566
> 
> 赞同：0
> 
> 时间：2013-03-31T05:12:40.637
> 
> 标签：java, regex

我想找到一个数字的每个实例，后跟一个逗号（没有空格），后跟一个字符串中的任意数量的字符。我能够获得一个正则表达式来找到我正在寻找的所有实例，但我想单独打印它们而不是一起打印。我一般是正则表达式的新手，所以也许我的模式是错误的？

这是我的代码：

```
String test = "1 2,A 3,B 4,23";
Pattern p = Pattern.compile("\\d+,.+");
Matcher m = p.matcher(test);
while(m.find()) {
  System.out.println("found: " + m.group());
} 
```

这是它打印的内容：

```
found: 2,A 3,B 4,23 
```

这就是我希望它打印的内容：

```
found: 2,A
found: 3,B
found: 4,23 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T05:17:15.597

试试这个正则表达式

```
 Pattern p = Pattern.compile("\\d+,.+?(?= |$)"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T05:17:17.763

您可以采取更简单的路线并按空格分隔，然后忽略不带逗号的任何内容：

```
String values = test.split(' ');

for (String value : values) {
    if (value.contains(",") {
        System.out.println("found: " + value);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T05:17:34.743

您显然在需求声明中遗漏的是“任意数量的字符”应该结束的地方。就目前而言，它在字符串的末尾结束；从您的示例输出中，您似乎希望它在第一个空格处结束。

试试这个模式：`"\\d+,[^\\s]*"`

# forms - Firefox 中表单的 CSS 多列布局

> ID：15726569
> 
> 赞同：1
> 
> 时间：2013-03-31T05:13:50.010
> 
> 标签：forms, css, firefox, webkit, multiple-columns

看起来 FireFox（我的版本是 19.0.2 - OSX）没有使用多列布局正确呈现表单。它正确呈现正常的段落文本等，但不呈现形式。

**CSS：**

```
fieldset {
    -moz-column-count: 2;
    column-count: 2;
    -webkit-column-count: 2;
} 
```

**这是它在 FireFox 中的样子：** ![FireFox中表单字段集的CSS多列渲染-不渲染列](https://i.stack.imgur.com/1qLRJ.jpg)

**这是它在 WebKit 浏览器中的样子：** ![WebKit 浏览器中表单字段集的 CSS 多列渲染 - 正确渲染列](https://i.stack.imgur.com/x0guD.jpg)

请在 FireFox 中查看此[示例代码/现场演示](http://jsfiddle.net/prembo/3NWFp/)，以查看它不会呈现表单元素的多列布局。

这是一个错误，还是我可以做些什么让它在 FireFox 中也能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:31:53.740

也许多列属性暂时不适用于您使用的这个特定标记元素（即字段集）。Fieldset 专用于对一些表单字段进行分组，但我不确定它是否已经实现以在多列中呈现...所以我应该认为这是一个错误，将来会更正...

您可以通过为第一个表单元素创建一个带有 flot left 的简单 div 来解决这个问题...当然，使用此选项，您必须手动拆分将在左侧和右侧绘制的表单元素，您不需要不再具有等于长度多列的魔力了...

```
div#column1{
  width : 400px;
  float : left;
}
div#column2 {
 float : left;
}

<div id="#column1">Your first fields</div>
<div id="#column2">Your second fields</div> 
```

# mpi - 试图 MPI_Send 和 MPI_Recv 字符数组得到垃圾

> ID：15726573
> 
> 赞同：6
> 
> 时间：2013-03-31T05:14:54.857
> 
> 标签：mpi

我正在尝试从每个处理器创建一个日志文件，然后将其作为 char 数组发送到根目录。我首先发送长度，然后发送数据。长度发送正常，但数据总是垃圾！这是我的代码：

```
MPI_Barrier (MPI_COMM_WORLD);
string out = "";

MPI_Status status[2];
MPI_Request reqs[num_procs];

string log = "TEST";
int length = log.length();
char* temp = (char *) malloc(length+1);
strcpy(temp, log.c_str());

if (my_id != 0)
{
    MPI_Send (&length, 1, MPI_INT, 0, 1, MPI_COMM_WORLD);
    MPI_Send (&temp, length+1, MPI_CHAR, 0, 1, MPI_COMM_WORLD);
}   
else {      
    int length;
    for (int i = 1; i < num_procs; i++)
    {
        MPI_Recv (&length, 2, MPI_INT, i, 1, MPI_COMM_WORLD, &status[0]);
        char* rec_buf;
        rec_buf = (char *) malloc(length+1);
        MPI_Recv (rec_buf, length+1, MPI_CHAR, i, 1, MPI_COMM_WORLD, &status[1]);
        out += rec_buf;
        free(rec_buf);
    }
}

MPI_Barrier (MPI_COMM_WORLD);
free(temp); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-28T20:56:13.650

您传递的是`char**`to`MPI_Send`而不是 a`char*`这会导致内存损坏，或者在您的情况下会导致您得到的输出乱码。如果你使用一切都应该没问题

```
MPI_Send (temp, length+1, MPI_CHAR, 0, 1, MPI_COMM_WORLD); 
```

`&`（注意第一个参数前面的删除， `temp`。）

# c - 使用 malloc 进行堆栈对齐

> ID：15726574
> 
> 赞同：-4
> 
> 时间：2013-03-31T05:14:56.280
> 
> 标签：c, stack, malloc

我正在实现一个用户级线程库作为分配。内存分配是在原始代码本身中完成的。但似乎很难理解代码中发生了什么。谁能帮我解释一下。

```
void * malloc_stack() 
{
  /* allocate something aligned at 16
   */
   void *ptr = malloc(STACK_SIZE + 16);
   if (!ptr) return NULL;
   ptr = (void *)(((int)ptr & (-1 << 4)) + 0x10);
   return ptr;
} 
```

编辑：因为堆栈向下增长，分配给 ptr 的地址是什么？它是堆栈的底部还是堆栈的顶部？

假设base在较高的内存地址，top在较低的内存地址（因为向下增长）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:50:55.780

这看起来像 的实现`aligned_malloc`，当您有一个处理器（或协处理器，或支持 DMA 的设备），其中一些或所有指令（操作）只能在对齐的内存上工作时，这很有用。除了在未对齐的内存上完全失败的指令外，对齐可能会影响原子性。

它与堆栈无关。就其本质而言，**动态分配不能来自堆栈**，因为堆栈上的分配不会在返回到调用函数时继续存在，但动态分配必须在匹配的释放调用之前继续存在。

（换一种说法：根据定义，堆栈是后进先出。动态分配不是 LIFO，但可以适应生命周期的任意顺序。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:25:03.750

> 我正在实现一个用户级线程库作为分配。内存分配是在原始代码本身中完成的。但似乎很难理解代码中发生了什么。谁能帮我解释一下。

当然。C 标准说：*E1 << E2 的结果是 E1 左移 E2 位；空出的位用零填充。如果 E1 具有无符号类型，{无关遗漏}。如果 E1 具有带符号类型和非负值，并且 E1 × 2E2 在结果类型中是可表示的，那么这就是结果值；否则，行为未定义。*

因此，`-1 << 4`是未定义的行为。以下是 C 标准对未定义行为的解释：*行为，在使用不可移植或错误程序构造或错误数据时，本国际标准对此没有任何要求*

因此，没有此代码的要求。它可以做任何事情，或者什么都不做，而且它不需要任何理由或逻辑来这样做。据我们所知，它可以依靠*仙尘传感器*正常运行……

> 编辑：因为堆栈向下增长，分配给 ptr 的地址是什么？...

什么栈？这不是一个地址，因为它不能保证指向一个对象。将其视为存在也是未定义*的行为：如果左值在评估时未指定对象，则该行为是未定义的。*

下一个问题：

> ...它是堆栈的底部还是堆栈的顶部？

它可能是，也不是，任何东西或一切（包括高度传染性的仙女癌症尘埃）。未定义的行为...

> 假设base在较高的内存地址，top在较低的内存地址（因为向下增长）

......会很愚蠢。未定义的行为...

此代码可能在您的系统上以您的配置正常运行，但考虑到不同的操作系统、硬件、C 标准库或编译器可能会出现故障。C 的设计并非只与您的系统兼容，而是与多种系统兼容；C代码不应该这样写！C 语言的设计目的是让程序可以移植或独立于操作系统、硬件、C 标准库和编译器实现编写！你在看哪本书？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-31T05:56:00.493

因此，如果我正确理解了这个问题，您需要帮助理解这段代码

我假设你理解函数的前两行和最后一行，所以只剩下

```
ptr = (void *)(((int)ptr & (-1 << 4)) + 0x10); 
```

首先我们应该看看`(-1 << 4)`。既然你投了`ptr`我相信假设 -1 也将被视为一个 int 并将成为值是安全的`0xFFFFFFFF`（这将假设你的系统的 int 有 4 个字节或 32 位，我认为这是一个非常普遍的东西现在。接下来，既然有一个转变，我们应该看看这个的二进制表示，所以`-1 = 0xFFFFFFFF = 0b11111111111111111111111111111111`如此移位 4 `(-1 << 4) = 0b11111111111111111111111111110000 = 0xFFFFFFF0`...。

接下来`ptr`是与这个值相加，这意味着`ptr`将被强制以 结束`0000`。请注意，使用这种格式转换任何类型的数字时，它都可以被 16 整除，从而`ptr`将`16`. 然后它添加`0x10`以强制地址位于分配的区域内。

希望这可以帮助！

编辑：因为堆栈向下增长，分配给 ptr 的地址是什么？它是堆栈的底部还是堆栈的顶部？

假设base在较高的内存地址，top在较低的内存地址（因为向下增长）

正如评论中的人指出的那样：这种行为非常不确定。如果这是为了家庭作业，我怀疑是这样，我建议您验证这是您的机器的行为（并且可能是正在评分的机器）。否则要修复它，您可以简单地替换`-1`为`0xFFFFFFFF`，然后我相信问题应该得到解决（我再次没有咨询 c 标准，这只是从经验的角度来看）。请注意，用我解释的内容替换`-1`应该`0xFFFFFFFFu`仍然有意义。

# android - RuntimeException：在android中将图像上传到twitpic时

> ID：15726580
> 
> 赞同：0
> 
> 时间：2013-03-31T05:16:51.960
> 
> 标签：android, twitpic

在我的 android 应用程序中，我需要将图像上传到 twitpic。我的 SD 卡中有一些图片，想在点击按钮后上传到 twitpic。这是我的代码。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    uploadImage = (Button) findViewById(R.id.uploadImage);
    uploadImage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            new ImageSender().execute();                
        }
    });

    uri = getIntent().getData();
    if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
        // oAuth verifier
        String verifier = uri
                .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);
        try {
            // Get the access token
            oAuthAccessToken = twitter.getOAuthAccessToken(
                    verifier);
            int userID = oAuthAccessToken.getUserId();
            User user = twitter.showUser(userID);
            username = user.getName();
        }
        catch (Exception e) {
            // TODO: handle exception
        }
    }
}
private class ImageSender extends AsyncTask<URL, Integer, Long> {
     private String url;

     protected void onPreExecute() {
mProgressDialog = ProgressDialog.show(MainActivity.this, "", "Sending image...", true);

mProgressDialog.setCancelable(false);
mProgressDialog.show();
}

        protected Long doInBackground(URL... urls) {
            long result = 0;

            TwitterSession twitterSession   = new TwitterSession(MainActivity.this);
            twitterSession.storeAccessToken(oAuthAccessToken, username);
            AccessToken accessToken = twitterSession.getAccessToken();

Configuration conf = new ConfigurationBuilder()
            .setOAuthConsumerKey(twitter_consumer_key)
            .setOAuthConsumerSecret(twitter_secret_key)
            .setOAuthAccessToken(accessToken.getToken())
            .setOAuthAccessTokenSecret(accessToken.getTokenSecret())
            .build();

OAuthAuthorization auth = new OAuthAuthorization (conf, conf.getOAuthConsumerKey (), conf.getOAuthConsumerSecret (),
new AccessToken (conf.getOAuthAccessToken (), conf.getOAuthAccessTokenSecret ()));

ImageUpload upload = ImageUpload.getTwitpicUploader (twitpic_api_key, auth);

Log.d(TAG, "Start sending image...");

try {
    String ExternalStorageDirectoryPath = Environment
              .getExternalStorageDirectory()
              .getAbsolutePath();

    String targetPath = ExternalStorageDirectoryPath + "/Friends/"+"/image2.jpg";

    File targetDirector = new File(targetPath);
url = upload.upload(new File(targetDirector.getAbsolutePath()));
result = 1;

Log.d(TAG, "Image uploaded, Twitpic url is " + url);    
} catch (Exception e) { 
Log.e(TAG, "Failed to send image");

e.printStackTrace();
}

            return result;
        }

        protected void onProgressUpdate(Integer... progress) {
        }

        protected void onPostExecute(Long result) {
         mProgressDialog.cancel();

         String text = (result == 1) ? "Image sent successfully.\n Twitpic url is: " + url : "Failed to send image";

         Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG).show();
        }
    } 
```

这是我的 TwitterSession 课程

```
public class TwitterSession {
private SharedPreferences sharedPref;
private Editor editor;

private static final String TWEET_AUTH_KEY = "auth_key";
private static final String TWEET_AUTH_SECRET_KEY = "auth_secret_key";
private static final String TWEET_USER_NAME = "user_name";
private static final String SHARED = "Twitter_Preferences";

private static Twitter twitter;

public TwitterSession(Context context) {
    sharedPref    = context.getSharedPreferences(SHARED, Context.MODE_PRIVATE);

    editor        = sharedPref.edit();

}

public void storeAccessToken(AccessToken accessToken, String username) {
    editor.putString(TWEET_AUTH_KEY, accessToken.getToken());
    editor.putString(TWEET_AUTH_SECRET_KEY, accessToken.getTokenSecret());
    editor.putString(TWEET_USER_NAME, username);

    editor.commit();
}

public void resetAccessToken() {
    editor.putString(TWEET_AUTH_KEY, null);
    editor.putString(TWEET_AUTH_SECRET_KEY, null);
    editor.putString(TWEET_USER_NAME, null);

    editor.commit();
}

public String getUsername() {
    return sharedPref.getString(TWEET_USER_NAME, "");
}

public AccessToken getAccessToken() {
    String token        = sharedPref.getString(TWEET_AUTH_KEY, null);
    String tokenSecret  = sharedPref.getString(TWEET_AUTH_SECRET_KEY, null);

    if (token != null && tokenSecret != null) 
        return new AccessToken(token, tokenSecret);
    else
        return null;
} 
```

这是一个 NullPointer 异常。

```
editor.putString(TWEET_AUTH_KEY, accessToken.getToken()); 
```

我的日志是

> 03-31 05:09:20.178: E/AndroidRuntime(1075): 致命异常: AsyncTask #1 03-31 05:09:20.178: E/AndroidRuntime(1075): java.lang.RuntimeException: 执行 doInBackground 时发生错误() 03-31 05:09:20.178: E/AndroidRuntime(1075): 在 android.os.AsyncTask$3.done(AsyncTask.java:299) 03-31 05:09:20.178: E/AndroidRuntime(1075):在 java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352) 03-31 05:09:20.178: E/AndroidRuntime(1075): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:219) 03-31 05:09:20.178: E/AndroidRuntime(1075): 在 java.util.concurrent.FutureTask.run(FutureTask.java:239) 03-31 05:09:20.178: E/AndroidRuntime(1075): 在android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230) 03-31 05:09:20.178: E/AndroidRuntime(1075): 在 java.util.concurrent.ThreadPoolExecutor。runWorker(ThreadPoolExecutor.java:1080) 03-31 05:09:20.178: E/AndroidRuntime(1075): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 03-31 05:09: 20.178: E/AndroidRuntime(1075): at java.lang.Thread.run(Thread.java:856) 03-31 05:09:20.178: E/AndroidRuntime(1075): 原因：java.lang.NullPointerException 03- 31 05:09:20.178: E/AndroidRuntime(1075): 在 com.my.androidtwitpicapplication.TwitterSession.storeAccessToken(TwitterSession.java:36) 03-31 05:09:20.178: E/AndroidRuntime(1075): 在 com. my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:91) 03-31 05:09:20.178: E/AndroidRuntime(1075): at com.my.androidtwitpicapplication.MainActivity$ImageSender.doInBackground(MainActivity.java:1 ) 03-31 05:09:20.178: E/AndroidRuntime(1075): 在 android.os。AsyncTask$2.call(AsyncTask.java:287) 03-31 05:09:20.178: E/AndroidRuntime(1075): at java.util.concurrent.FutureTask.run(FutureTask.java:234)

我认为调用方法时有问题`public void storeAccessToken(AccessToken accessToken, String username)`但无法解决问题。请帮我解决问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:22:21.107

```
catch (Exception e) {
   // TODO: handle exception
} 
```

如果在此处捕获异常，则`oAuthAccessToken`可能是`null`，这将导致`storeAccessToken`抛出`NullPointerException`. 您需要确保您采取更多措施来处理该异常（包括不`storeAccessToken`使用 null调用`AccessToken`）。

# objective-c - 如何在 Xcode 中创建检索到的 JSON 值的数组

> ID：15726583
> 
> 赞同：1
> 
> 时间：2013-03-31T05:17:08.730
> 
> 标签：objective-c, xcode, arrays, json

我有多个 JSON 对象，我必须为其检索值“title”。我成功地检索了每个“标题”值，但是，我不确定如何将所有这些标题值放入`NSMutableArray`以后可以填充的值`UITableView`中。

目前，storyTitle (a `NSString`) 返回几个不同的字符串，但它们都是独立的。例如，控制台返回

```
2013-03-30 21:39:30.416 Appv0.1[32742:11303] (
    "Boys\U2019 lacrosse display drive at Watsonville Jamboree"
)

2013-03-30 21:39:31.799 Appv0.1[32742:11303] (
    "Volleyball teams currently undefeated midway through season"
)

2013-03-30 21:39:32.093 Appv0.1[32742:11303] (
    "Wrestling season ends with a CCS victory and 2 state berths"
) 
```

如何将这些字符串组合成一个数组？提前致谢！任何帮助，将不胜感激。

```
NSDictionary *res = [NSJSONSerialization JSONObjectWithData: returnData options:NSJSONReadingMutableLeaves error:&myError];

storyList =  [NSMutableArray alloc];

storyTitle = [res objectForKey:@"title"];

//create array of storyTitles
NSString * story1 = [NSString stringWithFormat:@"%@", storyTitle];
//not sure how to do this array part 
storyList = [NSMutableArray arrayWithObjects:story1,nil]; 
```

**编辑：**如果我这样做：

```
 for(int i = 0; i < 5; i++){
            storyTitle = [res objectForKey:@"title"];
            NSString * story1 = [NSString stringWithFormat:@"%@", storyTitle];
            [self.storyList addObject:story1];
        } 
```

控制台返回

```
array: (
"Boys\U2019 lacrosse display drive at Watsonville Jamboree",
"Boys\U2019 lacrosse display drive at Watsonville Jamboree",
"Boys\U2019 lacrosse display drive at Watsonville Jamboree",
"Boys\U2019 lacrosse display drive at Watsonville Jamboree",
"Boys\U2019 lacrosse display drive at Watsonville Jamboree",) 
```

如何使阵列具有所有 3 个单独的故事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:28:43.410

所以基本上你想将字符串添加到数组中？

正如 sapi 所指出的，`storyList`如果你想重用它，它应该是一个属性。

```
@property(nonatomic, strong)NSMutableArray *storyList; 
```

然后在你的 init 方法中

```
self.storyList = [[NSMutableArray alloc]init]; 
```

然后在你的代码中的某个地方

```
storyTitle = [res objectForKey:@"title"];
[self.storyList addObject:storyTitle]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:41:18.463

您还需要遍历 res 字典的元素（以获取每个元素）：

```
 NSMutableArray * storyList =  [[NSMutableArray alloc] init];
    for (id item in res) {
        [storyList addObject:[item[@"title"]]];
    } 
```

注意：'item[@"title"]' 是 '[item objectForKey:@"title"]' 的新 ObjC 语法。

# c++ - ns2 中的分段错误

> ID：15726589
> 
> 赞同：0
> 
> 时间：2013-03-31T05:17:56.870
> 
> 标签：c++, networking, ns2

我在 ns2 上工作...在 aodv.cc 中做了一些更改并添加了我自己的一些功能

void nb_traffic_update（int id，struct nb_traffic_stat **nblist，int nid，int flag，int hop_count）

..检测沉洞攻击..当我运行具有少量节点的代码时，我得到了结果，但是当我增加节点数时，我得到分段错误。这是我的 nb_traffic.h 文件

```
 struct nb_traffic_stat
    {
        int id;
        int recvrequest;
        int routereply;
        int no_of_hops;
        //int no_of_updation;
        struct nb_traffic_stat *next;
    };
    struct traffic_stat
    {
       int id;
       struct nb_traffic_stat **list;
       struct traffic_stat *next;
    };
    struct ftraffic_stat
    {
       int sendrequest;
       int routereply;
    }; 
```

修改 aodv.cc

```
 struct traffic_stat *tlist=NULL,*ttail=NULL;
    void
    AODV::recvReply(Packet *p) {
    ...
    if (ih->daddr() == index) { // If I am the original source
    .....

    nb_traffic_update(index,&nblist,ih->saddr(),1,rp->rp_hop_count);//1 is for   receiving the route reply

     }
    } 

    void
    AODV::recvRequest(Packet *p) {
    ....
    /*after ensuring this is the new routerequest*/

    struct hdr_cmn *ch = HDR_CMN(p);
    if(ch->num_forwards()==1)
    {
       nb_traffic_update(index,&nblist,rq->rq_src,0,0);//0 is for receiving the request
    }
   } 
```

我的邻居流量更新功能

```
 void nb_traffic_update(int id,struct nb_traffic_stat **nblist,int nid,int flag,int  hop_count)
    {
       int n;
       //printf("inside nb_traffic_update:%d\n",id);
       if(*nblist==NULL)
       {
           struct nb_traffic_stat *ptr;
           ptr=(struct nb_traffic_stat*)malloc(sizeof(struct nb_traffic_stat));
           ptr->id=nid;
           ptr->next=NULL;
           if(flag==0)
           {
         ptr->recvrequest=1;
             ptr->routereply=0;
             ptr->no_of_hops=0;
            //ptr->no_of_updation=0;
           }
           else 
           {
             ptr->recvrequest=0;
             ptr->routereply=1;
             ptr->no_of_hops=hop_count;
             //ptr->no_of_updation=1;
           }
           *nblist=ptr;
           struct traffic_stat *sptr;
           sptr=tlist;
           while(sptr!=NULL&&sptr->id!=id)
           {
              sptr=sptr->next;
           }
           assert(sptr!=NULL);
           sptr->list=nblist;
      }
     else
     {
        int found=0;
        struct nb_traffic_stat *tptr,*prevtptr;
        tptr=*nblist;
        while(tptr!=NULL&&tptr->id<=nid)
        {
            if(tptr->id==nid)
           {
              found=1;
              break;
           }
           prevtptr=tptr;
           tptr=tptr->next;
        }
        if(found)
        {
          if(flag==0)
          {
           tptr->recvrequest++;
          }
          else 
          {
              tptr->routereply++;
              tptr->no_of_hops=hop_count;
              //tptr->no_of_updation++;
          }

        }
        else
        {
            struct nb_traffic_stat *ptr;
            ptr=(struct nb_traffic_stat*)malloc(sizeof(struct nb_traffic_stat));
            ptr->id=nid;
            if(flag==0)
            {
          ptr->recvrequest=1;
              ptr->routereply=0;
              ptr->no_of_hops=0;
              //ptr->no_of_updation=0;
            }
            else 
            {
              ptr->recvrequest=0;
              ptr->routereply=1;
              ptr->no_of_hops=hop_count;
              //ptr->no_of_updation=1;
            }
            ptr->next=prevtptr->next;
            prevtptr->next=ptr;
         }

        } 
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:49:58.433

您没有`nblist`在函数内部检查是否为 NULL `nb_traffic_update(int, nb_traffic_stat**, int, int, int)`，这会导致段错误。

`if (*nblist==NULL)`同样在您正在执行的条件语句中： `*nblist=ptr;`. 这意味着`*NULL = ptr;`可能导致段错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T08:45:33.650

使用 gdb 运行 tcl，它将显示导致段错误的函数...

例如，**gdb -args ns path/to/tcl/script.tcl**

# linq - 我们可以将此 For 循环转换为 LINQ 吗？

> ID：15726593
> 
> 赞同：0
> 
> 时间：2013-03-31T05:18:26.317
> 
> 标签：linq

我们可以将此 For 循环转换为 LINQ 表达式吗？查询语法和方法语法？

```
List<INode> sds = new List<INode>();

foreach (INode n in lnd)
{
    foreach(string s in Pages)
    {
        if (n.NiceUrl == s)
        {
            sds.Add(n);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:59:10.730

```
sds = lnd.Join(Pages, n => n.NiceUrl, p => p, (n, p) => n).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T05:21:10.257

```
from n in lnd
from s in Pages
where n.NiceUrl == s
select n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T05:22:08.120

```
Pages.Where(y => lnd.Select(x => x.NiceUrl).Contains(y)).Tolist(); 
```

lnd.Select(x => x.NiceUrl) 部分可以替换为 HashSet。

# sphero-api - 您是否需要 Sphero 才能使用 Sphero SDK？

> ID：15726594
> 
> 赞同：2
> 
> 时间：2013-03-31T05:18:27.327
> 
> 标签：sphero-api

所以我终于找到了一个程序员来编写我不久前在原始 Sphero Dev 论坛上发布的[“Orb Warriors”游戏创意。](http://forum.gosphero.com/archive/index.php/t-815.html)

由于我对编程知之甚少，并且将做游戏的图形部分，我想知道他是否真的需要一个 Sphero 来设置和使用 SDK？或者他是否能够编程，然后将 APK 的测试版本发送给我，以便用我的 Sphero 对其进行测试？他还没有 Sphero，但希望尽快得到一个。
他住在离我大约 1200 英里的地方，所以我想如果他需要它来进行编程，我可以暂时将我的 Sphero 邮寄给他，但我试图避免这种情况，因为我仍在使用我的 Sphero。:)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:58:46.057

是的，他需要一个 Sphero 才能使用 SDK。

# css - 带有 LESS css 的双 url

> ID：15726596
> 
> 赞同：2
> 
> 时间：2013-03-31T05:19:53.927
> 
> 标签：css, less, retina.js

我有一个用于视网膜背景图像的简单 LESS 样式表，但最终发生的是将我的域名添加到 url 并且无法显示图像。

例如：它会将 url 更改为`http://mydomain.com/'_img/background@2x.jpg'`，然后它不会显示，因为它有 ' 在那里。我怎样才能防止它这样做？

```
.at2x(@path, @w: auto, @h: auto) {
    background-image: url(@path);
    @at2x_path: ~`"@{path}".split('.').slice(0, "@{path}".split('.').length - 1).join(".") +     "@2x" + "." + "@{path}".split('.')["@{path}".split('.').length - 1]`;

    @media all and (-webkit-min-device-pixel-ratio : 1.5) {
        background-image: url("at2x_path);
        background-size: @w @h;
    }
}

html {
    .at2x('_img/background.jpg', 1440px, 900px);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T06:11:28.510

I believe there is a typo in the code you posted ... I believe in the second background-image line the `"` should be an `@`.

Anyway, he way you could fix your problem is by doing it like this (without the quotes around @{path} in the javascript part) and then using string interpolation `'@{at2x_path}'` to get quotes around the output url.

in **LESS**:

```
.at2x(@path, @w: auto, @h: auto) {
    background-image: url(@path);
    @at2x_path: ~`@{path}.split('.').slice(0, @{path}.split('.').length - 1).join('.') +  '@2x.' + @{path}.split('.')[@{path}.split('.').length - 1]`;

    @media all and (-webkit-min-device-pixel-ratio : 1.5) {
        background-image: url('@{at2x_path}');
        background-size: @w @h;
    }
}

html {
    .at2x('_img/background.jpg', 1440px, 900px);
} 
```

I tested this in 1.3.3 and 1.4 beta, both times it gave the following

**CSS output**:

```
html {
  background-image: url('http://mydomain.com/_img/background.jpg');
}
@media all and (-webkit-min-device-pixel-ratio: 1.5) {
  html {
    background-image: url('http://mydomain.com/_img/background@2x.jpg');
    background-size: 1440px 900px;
  }
} 
```

* * *

**Edit:** As this uses javascript Andre noticed in a comment below, that it throws a parsing error in lessphp. So here is a way how you could do this only with LESS with no javascript, by feeding the mixin the file ending as a separate argument:

```
.at2x(@path, @sfx, @w: auto, @h: auto) {
    background-image: url('@{path}.@{sfx}');
    @media all and (-webkit-min-device-pixel-ratio : 1.5) {
        background-image: url('@{path}@2x.@{sfx}');
        background-size: @w @h;
    }
}

html {
    .at2x('_img/background', 'jpg', 1440px, 900px);
} 
```

This solution should give the same result and does not require javascript. However, now you need to make sure you send the file name split in two arguments.

# jsf - 如何使用 迭代嵌套列表？

> ID：15726600
> 
> 赞同：9
> 
> 时间：2013-03-31T05:20:36.803
> 
> 标签：jsf, jsf-2, nested-lists, uirepeat

使用 JSF 2.0，我需要显示一个表格，其中每一行都包含一个打开弹出窗口的链接。我有两个模型：`A`哪个具有`id`和`List<B>`属性，`B`哪个具有`id`和`name`属性。在我的 backing bean 中，我有一个`List<A>`属性。在我看来，我`<ui:repeat>`用来迭代`List<A>`.

要求是，根据用户点击的行，需要显示对应`List<B>`的。`A`但是，`<ui:repeat>`不接受要在`var`属性中分配的嵌套列表。因此，我需要做很多没有效率的变通办法。

我如何有效地解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T06:03:13.953

您需要`<ui:repeat>`在外部迭代中嵌套另一个标签：

```
<ui:repeat value="#{bean.listOfA}" var="a">
    ...
    <ui:repeat value="#{a.listOfB}" var="b">
        ...
    </ui:repeat>
</ui:repeat> 
```

唯一值得注意的是嵌套`<ui:repeat>`标签在 Mojarra 2.1.15 版本之前一直存在状态管理问题（[jsf listener 中的详细信息未在嵌套 ui:repeat 中调用，](https://stackoverflow.com/questions/14975758/jsf-listener-not-called-inside-nested-uirepeat/14979480#14979480)并且在许多不那么最近的问题及其答案中），其中可能导致未调用动作侦听器等，但如果您当前使用的是最新的 Mojarra JSF 实现 - 完全跳过这部分。

# android - 如何引用 menu.xml 中定义的 MenuItem？

> ID：15726602
> 
> 赞同：1
> 
> 时间：2013-03-31T05:20:44.697
> 
> 标签：android, android-actionbar, android-menu

我必须在活动中动态引用 menu.xml 中定义的项目。

我试图通过以下方式引用：

```
MenuItem homeItem = (MenuItem) findViewById(R.id.home);
homeItem.setIcon(R.drawable.home72); 
```

它引发了以下异常：

```
03-31 10:39:01.703: E/AndroidRuntime(2463): FATAL EXCEPTION: main
03-31 10:39:01.703: E/AndroidRuntime(2463): java.lang.ClassCastException: com.android.internal.view.menu.ActionMenuItemView cannot be cast to android.view.Menu
03-31 10:39:01.703: E/AndroidRuntime(2463):     at com.emg.emgstorelocator.StoreLocatorActivity.onOptionsItemSelected(StoreLocatorActivity.java:133)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at android.app.Activity.onMenuItemSelected(Activity.java:2534)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:958)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:514)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:99)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at android.view.View.performClick(View.java:4084)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at android.view.View$PerformClick.run(View.java:16966)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at android.os.Handler.handleCallback(Handler.java:615)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at android.os.Looper.loop(Looper.java:137)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at java.lang.reflect.Method.invokeNative(Native Method)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at java.lang.reflect.Method.invoke(Method.java:511)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-31 10:39:01.703: E/AndroidRuntime(2463):     at dalvik.system.NativeStart.main(Native Method) 
```

这是在 menu.xml 中定义的：

```
<item 
    android:id="@+id/home"
    android:showAsAction="always"
    android:title="Home"
    android:icon="@drawable/home72"/>
<item 
    android:id="@+id/location"
    android:showAsAction="always"
    android:title="Locations"
    android:icon="@drawable/locations72"/> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T05:29:18.850

试试这个：调用`findItem()`菜单来查找操作栏项目，通过添加覆盖到`Activity`with`onPrepareOptionsMenu`

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem homeItem= menu.findItem(R.id.home);
    homeItem.setIcon(R.drawable.home72);
    super.onPrepareOptionsMenu(menu);
    return true;
} 
```

更多信息：[https://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu(android.view.Menu)](https://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu(android.view.Menu))

# ios - 在点击图像时打开视图

> ID：15726606
> 
> 赞同：2
> 
> 时间：2013-03-31T05:22:03.907
> 
> 标签：ios, iphone, viewcontroller

我是 iPhone dev 的新手，用于构建我的示例应用程序之一，要求我必须在用户点击图像时打开一个新视图（可能是视图控制器）。任何人都可以帮助我如何处理它，我不是要求任何人编写代码，只需要一种方法来使事情发生，而且我应该为此使用手势吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:23:10.567

创建一个 UIButton，在 Interface Builder 中将按钮的类型设置为“自定义”，然后选择您的图像作为按钮的背景图像。将 IBAction 分配给按钮并使其在您的操作中不可见。

或者，

```
UIButton *button=[UIButton buttonWithType:UIButtonTypeCustom];
[button setBackgroundImage:backgroundImage 
                  forState:UIControlStateNormal];
[button addTarget:self 
           action:@selector(buttonClicked:) 
 forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:23:56.243

您需要`UITapGestureRecognizer`在图像中添加一个，并让`IBAction`该手势识别器进行`performSegueWithIdentifier:`调用。

您可以通过在情节提要中从带有图像的视图控制器控制拖动到要呈现的视图控制器来添加要使用的新 segue。

编辑：实际上，从头开始。`UITapGestureRecognizer`您可以通过从（在“文档大纲”中找到；故事板左下角的小箭头）控制拖动到目标视图控制器来使转场更加简单。不需要`IBAction`or `performSegueWithIdentifier:`。

# facebook - Xcode 4.6 - 将分配给 UILabel 的文本发布到 Facebook 时出现问题

> ID：15726609
> 
> 赞同：0
> 
> 时间：2013-03-31T05:22:19.787
> 
> 标签：facebook, label, uilabel

在 Xcode 4.6 中，我在 .xib 页面上有一列标签，每个标签都由文本组成，其右侧是一组播放按钮，用于播放每个音频，例如在 .m 代码中：

```
-(IBAction)pushButton {
    NSString *mytextfield = mylabelname.text; 
    NSString *path = [[NSBundle mainBundle] pathForResource:@"mysound" ofType:@"mp3"];
    if(theAudio)[theAudio release];
    theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate = self;
    theAudio.volume = 1.0;
    [theAudio play];
} 
```

播放声音时，我将标签“mylabelname”的关联文本分配给字段 mytextfield。.h 文件具有 IBOutlet UILabel *mylabelname; UIViewController 中的声明，.m 具有 -(void)mylabelname 并且 Outlet UILabel 连接到 xib 中的标签。

在 .m 文件中，我像这样执行 Facebook 发布代码：

```
-(IBAction)ShareFB1 {
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
        slComposeViewController = [[SLComposeViewController alloc] init];
        slComposeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
        [slComposeViewController setInitialText:[NSString stringWithFormat:@"Posting to Facebook: %@", mytextfield]];    
        [slComposeViewController addURL:[NSURL URLWithString:@"http://stackoverflow.com"]];
        [self presentViewController:slComposeViewController animated:YES completion:NULL];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Facebook Account" message:@"There are no Facebook accounts confiured, configure or create accounts in Settings." delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
} 
```

在 .m 文件中，我收到关于 NSString 的警告：未使用的变量 mylabelname。我还收到有关`slComposeViewController setInitialText`方法的错误：使用未声明的标识符“mylabelname”。

我得到这个工作的唯一方法是将`NSString *mytextfield = mylabelname.text;`，`-(IBAction)ShareFB1`并且标签值可以发布到 Facebook，但由于我在页面上有其他标签，我希望 NSString 值分配在`slComposeViewController setInitialText`. 有什么建议么？

谢谢！抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:47:46.443

您需要在 .h 文件中创建一个属性

```
@property(strong)NSMutableString *stringToPost;//if you wish to append, if replace then use NSString 
```

在您的 .m 文件中，在 viewDidLoad 方法中

```
self.stringToPost=[NSMutableString new]; 
```

在所有 IBActions 方法中，您可以附加文本（如果您愿意）或替换先前保存的字符串：

```
//for appending
[self.stringToPost appendFormat:@"%@",yourTextField.text];

//for replacing with new one
self.stringToPost=yourTextField.text; 
```

# java - keyReleased 上的 StackOverflowError，但 mouseReleased 工作正常

> ID：15726613
> 
> 赞同：0
> 
> 时间：2013-03-31T05:22:36.253
> 
> 标签：java, swing, stack-overflow, keylistener

用鼠标选择可以正常工作，如下面的运行时日志所示：

```
init:
Deleting: /home/thufir/NetBeansProjects/gnumail-providers/build/built-jar.properties
deps-jar:
Updating property file: /home/thufir/NetBeansProjects/gnumail-providers/build/built-jar.properties
compile:
run:
Mar 30, 2013 10:16:36 PM net.bounceme.dur.nntp.swing.ArticlesPanel itemSelected
INFO: selected      item        8
Mar 30, 2013 10:16:39 PM net.bounceme.dur.nntp.swing.ArticlesPanel itemSelected
INFO: selected      item        1
Mar 30, 2013 10:16:41 PM net.bounceme.dur.nntp.swing.ArticlesPanel itemSelected
INFO: selected      item        5
Mar 30, 2013 10:16:42 PM net.bounceme.dur.nntp.swing.ArticlesPanel itemSelected
INFO: selected      item        3
Mar 30, 2013 10:16:44 PM net.bounceme.dur.nntp.swing.ArticlesPanel itemSelected
INFO: selected      item        7
Exception in thread "AWT-EventQueue-0" java.lang.StackOverflowError
    at net.bounceme.dur.nntp.swing.ArticlesPanel$2.keyReleased(ArticlesPanel.java:49)
    at net.bounceme.dur.nntp.swing.ArticlesPanel$2.keyReleased(ArticlesPanel.java:49)
    at net.bounceme.dur.nntp.swing.ArticlesPanel$2.keyReleased(ArticlesPanel.java:49)
    at net.bounceme.dur.nntp.swing.ArticlesPanel$2.keyReleased(ArticlesPanel.java:49)
    at net.bounceme.dur.nntp.swing.ArticlesPanel$2.keyReleased(ArticlesPanel.java:49) 
```

但是为什么用键盘箭头选择会导致`StackOverflowError`当键和鼠标选择都（或应该）调用相同的方法时： `itemSelected`.

相关类：

```
package net.bounceme.dur.nntp.swing;

import gnu.mail.providers.nntp.GroupMetaData;
import java.util.List;
import java.util.logging.Logger;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.swing.DefaultListModel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import net.bounceme.dur.nntp.gnu.PMD;
import net.bounceme.dur.nntp.gnu.Page;
import net.bounceme.dur.nntp.gnu.Usenet;

public class ArticlesPanel extends JPanel {

    private static final Logger LOG = Logger.getLogger(ArticlesPanel.class.getName());
    private static final long serialVersionUID = 1L;
    private JList<String> jList = new JList<>();
    private JScrollPane scrollPane = new JScrollPane();
    private DefaultListModel<String> dlm;

    public ArticlesPanel() throws MessagingException {

        initComponents();
    }

    @SuppressWarnings("unchecked")
    private void initComponents() {
        setLayout(new java.awt.BorderLayout());

        dlm = new DefaultListModel<>();
        for (int i = 1; i < 9; i++) {
            dlm.addElement("item\t\t" + i);
        }

        jList.setModel(dlm);
        jList.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        jList.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mouseReleased(java.awt.event.MouseEvent evt) {
                mouseReleases(evt);
            }
        });
        jList.addKeyListener(new java.awt.event.KeyAdapter() {

            public void keyReleased(java.awt.event.KeyEvent evt) {
                keyReleased(evt);
            }
        });

        scrollPane.setViewportView(jList);
        add(scrollPane, java.awt.BorderLayout.CENTER);

        this.setSize(300, 100);
        this.setVisible(true);
    }

    private void keyReleased(java.awt.event.KeyEvent evt) {
        itemSelected();
    }

    private void mouseReleases(java.awt.event.MouseEvent evt) {
        itemSelected();
    }

    private void itemSelected() {
        LOG.info("selected\t\t" + jList.getSelectedValue());
    }
} 
```

和调用类：

```
package net.bounceme.dur.nntp.swing;

import java.util.logging.Logger;
import javax.mail.MessagingException;
import javax.swing.*;
import java.awt.*;

public class Driver {

    private static final Logger LOG = Logger.getLogger(Driver.class.getName());

    private static void createAndShowGUI() throws MessagingException  {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(true);
        GraphicsEnvironment e = GraphicsEnvironment.getLocalGraphicsEnvironment();
        frame.setMaximizedBounds(e.getMaximumWindowBounds());
        frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH);
        frame.setLayout(new BorderLayout());

        JTabbedPane tabs = new JTabbedPane();

        ArticlesPanel myPanel = new ArticlesPanel();
        tabs.add(myPanel);
        frame.add(tabs);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String... args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                try {
                    createAndShowGUI();
                } catch (MessagingException ex) {
                    LOG.warning(ex.getLocalizedMessage());
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T05:25:59.867

你得到了`StackOverflowError`你的`keyReleased(evt)`电话，因为你的方法`KeyAdapter`隐藏了你的方法`ArticlesPanel`。结果是无限递归：

```
public void keyReleased(java.awt.event.KeyEvent evt) {
    keyReleased(evt); // calling this same method again
} 
```

这不会在您的`mouseReleased`调用中发生，因为调用了您自己的方法`mouseReleases`（注意`s`）。

```
public void mouseReleased(java.awt.event.MouseEvent evt) {
    mouseReleases(evt); // calling the method in the outer class
} 
```

# magento - 致命错误：在非对象上调用成员函数 setFinalPrice()？

> ID：15726617
> 
> 赞同：3
> 
> 时间：2013-03-31T05:23:12.797
> 
> 标签：magento

当我在 magento 1.702 上安装了一个名为 ajax pro 的扩展时。当我将产品添加到购物车时，它显示

`..app\code\core\Mage\Sales\Model\Quote\Item\Abstract.php`致命错误：在第 73 行对非对象调用成员函数 setFinalPrice() 。

虽然我删除了所有这个扩展的文件和文件夹。当我将产品添加到购物车时。错误还存在吗？如何纠正它。谢谢你。我已经清除了所有缓存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T21:48:32.873

在以与默认商店 ID 不同的商店 ID 以编程方式创建报价后，我收到此错误。

修复是运行这个 sql（当然，在备份所有 sales_flat_quote 表之后）：

```
DELETE FROM sales_flat_quote_item; 
```

请注意，由于参照完整性，TRUNCATE sales_flat_quote_item 将不起作用，并且上述命令也会从其他一些 sales_flat_quote 表中删除链接记录。

回复评论 - 如果您无权访问数据库，那么~~要求您的托管服务提供商给您（大多数给您某种访问权限 - 例如 phpmyadmin）~~您可以将其作为代码片段运行，我猜：

```
<?php
// Save this in Magento root directory. 
require_once( dirname(__FILE__) . ' /app/Mage.php');
umask(0);
Mage::app()->setCurrentStore(0);

$resource = Mage::getSingleton('core/resource');
$dbw = $resource->getConnection('core_write');

$query = "DELETE FROM sales_flat_quote_item;";
$dbw->query($query); 
```

在实时生产系统上运行它不是一个好主意 - 现有客户将丢失他们购物车中的所有物品 - 但如果您的网站已损坏并且您没有什么可丢失的，也许可以试一试！

要在不访问数据库的情况下备份数据库，[https://www.phpmyadmin.net/](https://www.phpmyadmin.net/)或类似的工具会有所帮助。您也可以使用它直接运行上述查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-21T09:25:04.843

从中删除会话文件`var/session`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-21T09:24:26.243

如果它是为所有客户抛出的，那么您可以删除**sales_flat_quote_item**表。如果这只发生在特定客户身上，请执行以下操作。在这种情况下，不会删除所有引号。

1.  **从sales_flat_quote_address(column name: customer_id)**表中获取客户 ID 。在这里，您可以获得导致问题的特定报价 ID（表中的列名是 quote_id）。

    示例：SELECT quote_id FROM sales_flat_quote_address where customer_id=23423

2.  现在，转到**sales_flat_quote_item** ，然后删除导致问题的特定记录。

    示例： DELETE FROM sales_flat_quote_item WHERE quote_id=43535

# python - Python中的数组索引

> ID：15726618
> 
> 赞同：5
> 
> 时间：2013-03-31T05:23:14.457
> 
> 标签：python, arrays, list, dictionary, indexing

初学者在这里，学习python，想知道一些事情。

这给了我第二个元素：

```
list = [1,2,3,4]
list.index(2)
2 
```

但是当我尝试这个时：

```
list = [0] * 5
list[2] = [1,2,3,4]
list.index[4] 
```

我得到一个错误。有没有办法从数组中提取元素的索引，无论它放在哪个列表中？我知道字典是可能的：

```
info = {first:1,second:2,third:3}
for i in info.values:
print i
1
2
3 
```

列表有类似的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T05:25:34.627

该`index`方法不符合您的预期。要在索引处获取项目，您必须使用以下`[]`语法：

```
>>> my_list = ['foo', 'bar', 'baz']
>>> my_list[1]  # indices are zero-based
'bar' 
```

`index`用于从项目中获取索引：

```
>>> my_list.index('baz')
2 
```

如果您要问是否有任何方法可以`index`递归到子列表中，答案是否定的，因为它必须返回您可以传递的内容`[]`，并且`[]`永远不会进入子列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-11-08T14:25:27.177

list 是一个内置函数，不要将它用作变量名，它是违反协议的，而是使用 lst。

要访问列表中的元素，请使用 [ ] 和该元素的索引号

```
lst = [1,2,3,4]
lst[0]
1 
```

另一个相同的例子

```
lst = [1,2,3,4]
lst[3]
4 
```

使用 (:) 分号访问系列中第一个索引号中的元素，分号前包含和分号后排除

```
lst[0:3]
[1, 2, 3] 
```

如果未指定分号之前的索引号，则所有数字都包含在列表的开头，直到分号之后的索引号

```
lst[:2]
[1, 2] 
```

如果未指定分号后的索引号，则所有数字都包含在列表末尾，相对于分号前的索引号

```
lst[1:]
[2, 3, 4] 
```

如果我们再给一个分号，则指定字段编号将被视为步骤

```
lst[0:4:2]
[1, 3] 
```

这用于查找元素的特定索引号

```
lst.index(3)
2 
```

这是我最喜欢的 pop 函数之一

```
lst.pop(1)
2 
```

现在查看删除元素的主列表..:)

```
lst
[1, 3, 4] 
```

为了从给定列表中提取偶数，请使用这个，这里我举一个新的例子来更好地理解

```
lst = [1,1,2,3,4,44,45,56]

import numpy as np

lst = np.array(lst)
lst = lst[lst%2==0]
list(lst)
[2, 4, 44, 56] 
```

要从给定列表中提取奇数，请使用这个（注意我有 1 而不是 0）

```
lst = [1,1,2,3,4,44,45,56]

import numpy as np

lst = np.array(lst)
lst = lst[lst%2==1]
list(lst)
[1, 1, 3, 45] 
```

快乐学习...:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T05:28:30.443

您的问题的答案是否定的，但是您的代码还有其他一些问题。

首先，不要`list`用作变量名，因为它也是内置函数的名称`list`。

其次，`list.index[4]`不同于`list.index(4)`; 两者都会在您的情况下出现错误，但它们是两种不同的操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-31T05:25:13.200

在您的第二个示例中，您的列表将如下所示：

```
[0, 0, [1, 2, 3, 4], 0, 0] 
```

因此列表中没有元素`4`。

这是因为当您设置 时`list[2]`，您正在更改第三个元素，而不是更新列表中的其他元素。

如果要替换列表中的一系列值，请使用切片表示法，例如`list[2:]`（对于“从第三个到最后一个的每个元素”）。

更一般地，该`.index`方法对身份进行操作。因此，以下内容将起作用，因为您正在询问 python 您插入的特定列表对象在列表中的位置：

```
lst = [0]*5
lst2 = [1,2,3,4]
lst[2] = lst2
lst.index(lst2) # 2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-31T06:36:08.330

如果你想提取特定元素的索引，那么 index 函数会有所帮助。但是，`enumerate`会做类似于字典的例子，

```
>>> l=['first','second','third']
>>> for index,element in enumerate(l):
...     print index,element
... 
```

输出

```
0 first
1 second
2 third 
```

# php - 填充多维数组的最简单方法是什么？PHP

> ID：15726623
> 
> 赞同：1
> 
> 时间：2013-03-31T05:23:56.817
> 
> 标签：php, arrays, fill

我有以下内容：

```
$toys[1]['brand']= "";
$toys[2]['brand']= "";
$toys[3]['brand']= "";
$toys[4]['brand']= "";
// and so on.. 
```

我想用“blah”填充所有品牌键......

如果有一个就好了：

```
$toys[*]['branding'] = 'blah'; 
```

`*`意义全部。但不幸的是，这不可用。

我能想到的下一个最简单的方法是`foreach()`循环

但只是想知道是否有一个我可能不知道的功能，`array_fill`但它有点像多维？或者至少如果有更好的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:38:28.707

省略特定功能。它们的成本超过了 foreach 循环，而且它们可能还包含 foreach 循环。

只需使用类似的东西：

```
foreach ($toys as &$a) $a['brand'] = ''; 
```

这不是简单易读吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:38:16.083

```
<?php
$toys[1]['brand']= "A";
$toys[2]['brand']= "V";
$toys[3]['brand']= "asas";
$toys[4]['brand']= "dfdf";
$toys[4]['otherkey']= "dfdf";

function change_branding(&$item, $key)
{
    if($key == 'brand') $item = '';
}
echo '<pre>';

array_walk_recursive($toys, 'change_branding');
print_r($toys);
?> 

Array
(
    [1] => Array
        (
            [brand] => 
        )

    [2] => Array
        (
            [brand] => 
        )

    [3] => Array
        (
            [brand] => 
        )

    [4] => Array
        (
            [brand] => 
            [otherkey] => dfdf
        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T05:32:02.157

看看 php 的[`array_walk()`](http://www.php.net/manual/en/function.array-walk.php). 您可以对数组中的每个元素应用通用函数。

尝试这个：

```
function initialize_brand(&$value, $key) {
  $value['brand'] = '';
}

array_walk($toys, 'initialize_brand'); 
```

# java - 我们如何删除 Selenium 中的所有域 cookie？

> ID：15726625
> 
> 赞同：0
> 
> 时间：2013-03-31T05:24:24.760
> 
> 标签：java, selenium, webdriver

我的要求是使用 Selenium WebDriver 删除所有 cookie（所有域）cookie。但是在 selenium 中，我们只能删除域 cookie。所以我正在尝试使用 Ctrl+Shift+Delete 的按键事件。

在这里，我尝试如下。`Actions action = new Actions(webdriver); action.keyDown(Keys.CONTROL).keyDown(Keys.SHIFT).sendKeys(Keys.DELETE).perform();` 但它没有显示任何浏览器警报？

任何人都可以在这种情况下帮助我吗？或删除所有域cookie的任何替代解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:12:13.850

使用下面的 java 代码删除 cookie。

```
protected void deleteCookie(String cookieName)
{
String cookieDomain =
CTPropertiesManager.getProperty("site.properties","site.cookie.domain");

try
{
//get all cookies
Cookie cookies[] = request.getCookies();

Cookie ctCookie=null;
if (cookies !=null)
{
for(int i=0; i<cookies.length; i++)
{
ctCookie=cookies[i];
if (ctCookie.getName().trim().equals(cookieName))
{
if ( cookieDomain != null )
{
ctCookie.setDomain(cookieDomain);
}

ctCookie.setPath("/ct");
ctCookie.setMaxAge(0);
response.addCookie(ctCookie);
}
}//end for
}//end if cookie
}//end try
catch(Exception e){
CTLogManager.log(e);
}
}//end deleteCookie() 
```

# javascript - jQuery Mobile 重新加载页面取决于 Div 内容

> ID：15726628
> 
> 赞同：0
> 
> 时间：2013-03-31T05:24:58.017
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我正在使用 jQuery Mobile，如果 div 中的文本等于某个值，则无法重新加载页面。div 的内容是用 AJAX 加载的。div 的内容正在通过 AJAX 更新就好了，但我不知道为什么当内容等于“您的项目已过期”时页面没有重新加载。

```
 $(document).on('pagebeforeshow', '#listitem', function(event){       
        $(document).ready(function(){
      refreshTable();
    });

    function refreshTable(){

   $('#tableHolder').load('ajax_item_time.php', function(){
       if($("#tableHolder").text() == "Your item has expired."){
         window.location.assign("mobile_list.php")
       } 
       else {
      setTimeout(refreshTable, 5000);
       }
   });

    }
}); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:36:40.303

这可能会帮助您：

使用`.changePage()`而不是`window.location.assign`.

```
$.mobile.changePage("#YOUR_PAGE_ID"); 
```

这是[文档](http://jquerymobile.com/demos/1.2.1/docs/api/methods.html)。

# c++ - C++ - 一种更有效的方法来处理循环参数内的列表

> ID：15726632
> 
> 赞同：0
> 
> 时间：2013-03-31T05:25:14.370
> 
> 标签：c++, list, while-loop, arguments

正如标题所说。例如，您有一个值 char values[11] 的列表，并且您想在循环参数内循环遍历该列表：

```
while(something not in values[])
{
    doSomething(omgwtfbbq)
} 
```

但当然它在 C++ 中不起作用......或者我认为。至少'not'关键字不存在。

任何人都可以建议是否有溶剂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:52:55.337

您可以使用@Deepu 建议的方式，但更清洁和更强大的解决方案是使用系统中存在的事件机制。在一个线程上，您将等待*required-key-pressed*事件，而在另一个线程上，您将拦截按键中断并分析数据。如果它包含所需的值，则指示*所需的按键*事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:40:43.043

好的，所以问题解决了，但是在评论中回复我的人没有完整回复，所以我将在此处发布答案。

将列表更改为向量`vector<char> values[4]`。然后使用了 Raymond Chen 建议的 find 功能：

```
while(find(values.begin(),values.end(),something)==values.end())
{
    doSomething(eatBananas)
} 
```

如果 Raymond Chen 发布明确的答案，我会标记他的。

# fortran - 如何以 ifort 的名称“重新导出”在 Fortran 模块中重载的现有 bind(C) 函数？

> ID：15726633
> 
> 赞同：2
> 
> 时间：2013-03-31T05:25:20.353
> 
> 标签：fortran, intel-fortran, fortran-iso-c-binding

在我尝试使用 ifort 之前，我对与 gfortran 配合良好的构造感到非常满意。虽然我从未见过它清楚地记录在案。我刚试过，它奏效了。我很好奇如何调整以下示例，以便 ifort 11.1 可以咀嚼它。

```
module A
  use iso_c_binding
  implicit none

  interface
     function foo(x) bind(C, name="strlen")
       use, intrinsic :: iso_c_binding
       character(c_char), intent(in) :: x
       integer(c_size_t) :: foo
     end function foo
  end interface

end module A

module B
  use A
!  use A, foo0 => foo
  implicit none

  interface foo
     module procedure foo1
     procedure foo
  end interface foo

contains

  function foo1(x)
    real, intent(in) :: x
    real :: foo1
    foo1 = 2\. * x
  end function foo1

end module B

program C
  use B
  implicit none

  write (*,*) foo(C_CHAR_"Hello" // C_NULL_CHAR)
  write (*,*) foo(2.)

end program C 
```

这是我收到的错误消息

```
tst.f90(20): error #6643: This statement is incorrectly positioned.
     procedure foo0
-----^
tst.f90(20): error #8168: Parentheses are required after the PROCEDURE keyword.
     procedure foo0
-----^ 
```

它是 GNU 扩展吗？`-pedantic`不抱怨。它像我期望的那样工作

```
 5
   4.00000000 
```

我是否必须在接口 foo 中详细编写 foo0 声明？

**更新 2013-03-31**

我调整了上面的示例代码以包含`bind(C)`. 由于它位于 中，因此即使与 gfortran 一起`interface`使用也无法使用。`module`对于之前不恰当的精简示例误导我深表歉意。

**另一个更新 2013-03-31**

显然`ifort version 13.1.1`不支持这样的构造（无论我是否将 foo 重命名为 foo0 ）

```
tst.f90(22): error #6623: The procedure name of the INTERFACE block conflicts with a name in the encompassing scoping unit.   [FOO]
     procedure foo
---------------^
tst.f90(22): error #8574: A procedure-name in a generic interface block must be a nonintrinsic procedure that has an explicit interface.   [FOO]
     procedure foo
---------------^ 
```

如果我`module`在程序之前添加，我会得到

```
tst.f90(22): error #7950: Procedure name in MODULE PROCEDURE statement must be the name of accessible module procedure.   [FOO]
     module procedure foo
----------------------^ 
```

除非我在所有细节中再次明确声明该 bind(C) 接口，否则目前似乎无法做我想做的事:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T08:10:33.357

这是 Fortran 2003 的一个功能：

“指定 MODULE 时，procedure-name_list 只能包含模块过程。未指定 MODULE 时，procedure-name_list 可能包含过程指针、外部过程、伪过程或模块过程。”

您的 11.1 版本已过时，当前版本为 13，但我不确定现在是否支持。

在这种情况下，应该可以使用`module procedure`，直到您的编译器版本完全支持 Fortran 2003：

“如果出现 MODULE 关键字，则每个过程名称必须是模块过程，并且必须在当前范围内可访问。”

来源：[IBM XL Fortran 手册](http://pic.dhe.ibm.com/infocenter/compbg/v121v141/index.jsp?topic=/com.ibm.xlf141.bg.doc/language_ref/procedure.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T22:53:03.797

使用`foo`C 函数，似乎`foo`不能成为模块过程。可以使用中间函数作为解决方法：

```
module A
  use, intrinsic :: iso_c_binding
  implicit none

  interface
     function strlen(x) bind(C, name="strlen")
       use, intrinsic :: iso_c_binding
       character(kind=c_char, len=1), dimension (*), intent(in) :: x
       integer(c_size_t) :: strlen
     end function strlen
  end interface

contains

function foo (x)
   character(kind=c_char, len=*), intent(in) :: x
   integer (c_size_t) :: foo
   foo = strlen (x)
end function foo

end module A

module B
  use A
!  use A, foo0 => foo
  implicit none

  interface foo
     module procedure foo1
     module procedure foo
  end interface foo

contains

  function foo1(x)
    real, intent(in) :: x
    real :: foo1
    foo1 = 2\. * x
  end function foo1

end module B

program C
  use B
  implicit none

  write (*,*) foo(C_CHAR_"Hello" // C_NULL_CHAR)
  write (*,*) foo(2.)

end program C 
```

# php - 如何使用 php 格式化这个 json 数据

> ID：15726634
> 
> 赞同：-1
> 
> 时间：2013-03-31T05:25:24.903
> 
> 标签：php, json

链接在[这里。](http://bluewingholidays.com/xxxxx.php)请查看以下详细信息并告诉我如何获取每个 {} 块的值

JSON数据

```
 {
        "id": "1",
        "0": "1",
        "value": "Addalachchenai",
        "1": "Addalachchenai",
        "department_id": "6",
        "2": "6",
        "ordering": "1",
        "3": "1"
    }

    {
        "id": "2",
        "0": "2",
        "value": "Akkaraipattu ",
        "1": "Akkaraipattu ",
        "department_id": "6",
        "2": "6",
        "ordering": "2",
        "3": "2"
    }

    {
        "id": "3",
        "0": "3",
        "value": "Ampara ",
        "1": "Ampara ",
        "department_id": "6",
        "2": "6",
        "ordering": "3",
        "3": "3"
    } 
```

PHP

```
<?php

try {
    $dbh = new PDO('mysql:host=localhost;dbname=$db', $user, $pass);
    foreach($dbh->query('SELECT * FROM `jos_jea_towns` LIMIT 0, 500 ') as $row) {
       echo '<pre>' . json_encode($row, JSON_PRETTY_PRINT).'</pre>';

    }
    $dbh = null;
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
}
?> 
```

我想得到 joson 数据的价值..

如何使用php格式化以上json数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:28:30.633

利用

> json_decode($jsonObject, true);

此函数会将您的 json 数据转换为 php 数组。但是您正在编写的代码似乎非常低效，您不应该在 foreach() 变量中运行查询，您应该像这样使用。

```
<?php

try {
    $dbh = new PDO('mysql:host=localhost;dbname=$db', $user, $pass);
    $result = $dbh->query('SELECT * FROM `jos_jea_towns` LIMIT 0, 500 ');
    foreach($result as $row) {
       echo '<pre>';
       print_r($row);
       echo '</pre>';
       //echo '<pre>' . json_encode($row, JSON_PRETTY_PRINT).'</pre>';

    }
    $dbh = null;
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
}
?> 
```

# java - Thread.stop() 不会停止线程

> ID：15726636
> 
> 赞同：-3
> 
> 时间：2013-03-31T05:25:39.353
> 
> 标签：java, multithreading

我正在制作一个程序，我需要一个线程停止，另一个线程启动。我的问题是，如果我 t1.stop() 比 t1.start() 我得到 java.lang.IllegalThreadStateException

```
 if (t1.isAlive() == true){
                    t1.stop();
// above I stop the thread and call another
                    t2.start();
                    System.out.println("t1 was playing");
                }else{
                    t2.stop();
                    t1.start(); 
// above I stop the other thread and want to start the first thread again, but when I run the program I get the exception i said above
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T05:27:51.227

当线程停止时，您无法重新启动它。

1.  但是，您可以创建并启动一个新线程。
2.  此外，您可以暂停和恢复线程。

不推荐使用暂停和恢复线程（以及停止等）的 java 原语。请参阅此内容以了解如何实现所需的最佳效果 - [http://docs.oracle.com/javase/7/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html](http://docs.oracle.com/javase/7/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html) 检查如何执行相当于暂停和恢复的操作

> 我应该使用什么来代替 Thread.suspend 和 Thread.resume？
> 
> 与 Thread.stop 一样，谨慎的方法是让“目标线程”轮询一个变量，该变量指示线程的所需状态（活动或挂起）。当所需的状态被挂起时，线程使用 Object.wait 等待。当线程恢复时，使用 Object.notify 通知目标线程。

示例代码在相同的答案中给出，以帮助您实现这一目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T05:28:58.657

[`Thread#stop`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#stop%28%29)已弃用，您不应使用它。

来自 JavaDocs

> stop()
> 已弃用。
> 
> 这种方法本质上是不安全的。使用 Thread.stop 停止线程会导致它解锁所有已锁定的监视器（这是未经检查的 ThreadDeath 异常沿堆栈传播的自然结果）。如果以前受这些监视器保护的任何对象处于不一致状态，则损坏的对象将对其他线程可见，从而可能导致任意行为。停止的许多用法应该由简单地修改一些变量以指示目标线程应该停止运行的代码替换。目标线程应该定期检查这个变量，如果变量指示它要停止运行，则以有序的方式从它的run方法返回。如果目标线程等待很长时间（例如，在条件变量上），应该使用中断方法来中断等待。有关详细信息，请参阅[为什么不推荐使用 Thread.stop、Thread.suspend 和 Thread.resume？](http://docs.oracle.com/javase/7/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html).

线程也是不可重入的，或者是一次性使用的。一旦`run`方法终止，它们将无法重新启动

# opengl - 将opengl主帧缓冲区复制到fbo

> ID：15726638
> 
> 赞同：2
> 
> 时间：2013-03-31T05:25:50.833
> 
> 标签：opengl, fbo

我想将 opengl 主帧缓冲区复制到一个 fbo，它附加两个纹理对象。然后我想将颜色缓冲区和深度缓冲区传输到两个纹理对象。我使用glbiltframebuffer，但纹理是黑色的，正确的方法是什么？我的代码：

```
// Create the FBO
glGenFramebuffers(1, &m_fbo);    
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, m_fbo);  

// Create textures
glGenTextures(1, &m_colorTexture);
glGenTextures(1, &m_depthTexture);

// color texture
glBindTexture(GL_TEXTURE_2D, m_colorTexture);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, Width, Height, 0, GL_RGB, GL_FLOAT, NULL);
glFramebufferTexture2(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, m_colorTexture, 0); 

// depth texture
glBindTexture(GL_TEXTURE_2D, m_depthTexture);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT24, Width, Height, 0, GL_DEPTH_COMPONENT, GL_FLOAT, NULL);
glBindTexture(GL_TEXTURE_2D, 0);
glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, m_depthTexture, 0);

GLenum Status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
if (Status != GL_FRAMEBUFFER_COMPLETE) {
    printf("error, status: 0x%x\n", Status);
    return false;
}

// restore default FBO
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);

    //copy the main framebuffer to FBO
glBindFramebuffer(GL_READ_FRAMEBUFFER, 0);  
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, m_fbo);  
glBlitFramebuffer(0, 0, Width, Height, 0, 0, Width, Height,  GL_COLOR_BUFFER_BIT, GL_NEAREST); 
glBindFramebuffer(GL_READ_FRAMEBUFFER, 0);       
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);
GLenum error = glGetError(); 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:00:02.113

我解决了，代码是对的。其他地方发生错误，对不起。但我一直被比尔特的速度所困扰。我将主帧缓冲区复制到每帧的 fbo。但是好像帧率下降了很多。大家能不能给点建议。

# android - Android：使用 Handler 但仍然遇到 NetworkOnMainThreadException

> ID：15726639
> 
> 赞同：2
> 
> 时间：2013-03-31T05:25:54.397
> 
> 标签：android, handler

我做了一些网络的事情，我知道我不能在主线程上做。所以，我把它放到了Handler中。这是我的代码：

```
handler = new Handler();
handler.postDelayed(new OrderTask(this, url), 10 * 1000); // periodically run every 10 seconds. 
```

这是我的 Runnable 类：

```
public class OrderTask implements Runnable  {

    OrderFragment fragment;
    String url;

    public OrderTask(OrderFragment fragment, String url) {
        this.fragment = fragment;
        this.url = url;
    }

    @Override
    public void run() {
        synchronized (fragment.orders) {
            fragment.orders = Order.loadServerOrders(url);  // network code here
        }
        fragment.adapter.notifyDataSetChanged();
    }
} 
```

但是当它运行时，它会抛出异常：`NetworkOnMainThread`在 line `loadSeverOrder`。我无法解释为什么。请帮我解决这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T06:02:09.770

处理程序将发布`Runnable`到创建它的同一线程的消息队列。

您可能会考虑使用[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)在单独的线程中定期运行某些东西。

这是此的代码示例：

```
ScheduledExecutorService worker = Executors.newSingleThreadScheduledExecutor();

worker.scheduleAtFixedRate(new OrderTask(this, url), 
                           0,  //initial delay
                           10, //run every 10 seconds
                           TimeUnit.SECONDS); 
```

请注意，如果您在工作人员中更改 UI 元素 - 您需要在 UI 上下文中执行此操作。为此，您可以使用`Handler`.

`OrderTask`另一种选择是从[AsyncTask](http://developer.android.com/intl/ru/reference/android/os/AsyncTask.html)继承您的。但这完全是另一个故事

# java - 以最快的方式找到所有可能的子串

> ID：15726641
> 
> 赞同：41
> 
> 时间：2013-03-31T05:26:12.117
> 
> 标签：java, algorithm, performance, substring, time-complexity

对于 String A = "abcd" 那么答案应该是

```
{a,ab,abc,abcd,b,bc,bcd,c,cd,d} 
```

要查找我使用以下方法的所有子字符串

```
for (int i = 0; i < A.length(); i++) {
    for (int j = i+1; j <= A.length(); j++) {
        System.out.println(A.substring(i,j));
    }
} 
```

但根据我的理解，复杂性达到`O(N^2)`. 我们可以让它更快吗？我提到了上一个问题，并且有[后缀树](http://allisons.org/ll/AlgDS/Tree/Suffix/)的链接，但它似乎并没有解决我的问题。我从后缀树得到的输出是

```
{
 1: abcd
 2: bcd
 3: cd
 4: d
} 
```

任何人都可以帮我找到最快的方法吗？像线性时间的东西？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-31T05:38:39.740

你不能`O(N^2)`比`O(N^2)`时间更好地创建字符串。这是数学上的不可能。即使创建一个字符串需要一条指令，那仍然是一个`O(N^2)`计算。

抛开复杂性不谈，我认为您的代码无法以任何重要的方式改进。

* * *

> 我们可以让它更快吗？

可能不是。

优化这段特定的代码是徒劳的。由于您正在将字符串写入标准输出，因此实际性能将取决于写入字符的开销......以及操作系统对输出所做的任何事情。

# python - python中的wordet同义词集

> ID：15726644
> 
> 赞同：0
> 
> 时间：2013-03-31T05:26:44.670
> 
> 标签：python, python-2.7, nltk, wordnet

我`wordnet.synset()`在我的代码中使用函数

```
>>> cb = wordnet.synset('fever.n.01')
>>> cb
Synset('fever.n.01')

>>> cb = wordnet.synset('disbelieve.n.01')

Traceback (most recent call last):
  File "<pyshell#60>", line 3, in <module>
    cb = wordnet.synset('disbelieve.n.01')
  File "C:\Python27\lib\site-packages\nltk\corpus\reader\wordnet.py", line 1016, in synset
    raise WordNetError(message % (lemma, pos))
WordNetError: no lemma 'disbelieve' with part of speech 'n'

>>> cb = wordnet.synset('disbelieve.v.01')
>>> cb
Synset('disbelieve.v.01') 
```

'disbelieve.v.01' 存在于 wordnet 中。但是 nltk.pos_tag 将其标记为名词。

```
>>> import nltk
>>> tagged = nltk.pos_tag('disbelieve')
>>> tagged
[('disbelieve', 'NN')] 
```

展望未来，我将使用 wordnet 的同义词集相似度函数。我不想检查 pos 标签，因为很有可能出现上述错误。

所以我想知道nltk中是否有任何函数可以检查wordnet中是否存在以（比如'disbelieve'）开头的单词，然后获取单词的完整wordnet存储形式（即'disbelieve.v.01'）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:39:35.700

您可以通过以下方式获得`list`任何给定单词的同义词集，

```
>>> from nltk.corpus import wordnet as wn
>>> wn.synsets('disbelieve')
[Synset('disbelieve.v.01')] 
```

一个想法可能是偏爱那些 POS 标签与您的标注器匹配的同义词集，否则只需选择列表中的第一个。

# objective-c - 无法使 UITableView 显示对象中的内容 - Objective C

> ID：15726647
> 
> 赞同：0
> 
> 时间：2013-03-31T05:27:48.410
> 
> 标签：objective-c, uitableview

我正在学习Objective C，我对这门语言完全陌生，现在我被UITableView困住了。我正在阅读一本电子书，但他们在书中写的内容与当前的 Xcode 版本略有不同。我已经尝试自己修改了一天，但仍然没有任何线索。

这是我的书店的对象。

```
#import "Bookstore.h"
@implementation Bookstore
@synthesize myBookStore;

- (id)init{
    self = [super init];
    if(self){
        self.myBookStore = [[NSMutableArray alloc] init];
        Book *newBook = [[Book alloc] init];
        newBook.title = @"Objective C for Absolute Beginner";
        newBook.author = @"Bennett, Fisher and Lees";
        newBook.desc = @"iOS programming made easy";
        [self.myBookStore addObject:newBook];

        newBook = [[Book alloc] init];
        newBook.title = @"A Farewell To Arms";
        newBook.author = @"Ernest Hemingway";
        newBook.desc = @"The story of an affair between an English "
        "nurse and an American soldier "
        "on the Italian front "
        "during World War I.";
        [self.myBookStore addObject:newBook];
    }

    return self;

}
- (NSUInteger)count{
    return myBookStore.count;
}
- (Book *)bookAtIndex:(NSInteger)index{
    return [myBookStore objectAtIndex:index];
}
@end 
```

这是我尝试修改的 MasterViewController.m 中的代码首先我将对象初始化为电子书中的教程。

```
#import "LKMasterViewController.h"
#import "Bookstore.h"
#import "Book.h"
#import "LKDetailViewController.h"

@interface LKMasterViewController () {
    NSMutableArray *_objects;
}
@end

@implementation LKMasterViewController

@synthesize myBookStore;

// INIT MY BOOK OBJECT //
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        self.title = NSLocalizedString(@"Master", @"Master");
        self.myBookStore = [[Bookstore alloc] init];
    }
    return self;
}
// END INIT //
- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
}

Then I modify in my UITableView

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return myBookStore.count; // THIS IS A NUMBER OF ROW IN SECTION, IT'S EQUAL TO NUMBER OF OBJECT IN OUR ARRAY
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

//    NSDate *object = _objects[indexPath.row];  // THIS'S DEFAULT BUT I COMMENT IT
    cell.textLabel.text = [self.myBookStore bookAtIndex:indexPath.row].title;  // THIS IS WHERE I MODIFIED 
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_objects removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
} 
```

请帮助我，我知道这可能是一个愚蠢的问题，但我自己无法解决>“<，而且我的电子书似乎已经过时了:(我忘了说没有例外，没有问题或错误当我运行这个应用程序，唯一的事情是主视图中没有任何东西显示出来。>“<

注意：我把我的源代码放在这里：[http](http://wikisend.com/download/793354/myBookStore.zip) ://wikisend.com/download/793354/myBookStore.zip 希望你们能帮助我:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:56:02.670

从您的项目来看，问题似乎在于您使用的是故事板（在您写书时可能不存在）。情节提要不会使用该`initWithNibName:bundle:`方法实例化视图控制器，而是使用`initWithCoder:`，因此您的`myBookstore`属性永远不会被初始化（这样您总是可以获得`0`书籍的数量）。

将`initWithNibName:bundle:`方法替换为以下内容：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.myBookStore = [[Bookstore alloc] init];
        self.title = NSLocalizedString(@"Master", @"Master");
    }
    return self;
} 
```

您会遇到一些其他问题，因为在您的表格视图方法中，您有时使用`myBookstore`and 有时`_objects`，但这应该可以帮助您克服第一个问题。

# r - 将总计和多个分组结果堆叠到单个输出表中的惯用方式

> ID：15726649
> 
> 赞同：0
> 
> 时间：2013-03-31T05:28:01.393
> 
> 标签：r, plyr, reshape

我很好奇是否有更快或更优雅的方法从这个数据集开始..

```
# generate some fake data
x <- mtcars[ , c( 1 , 2 , 8:11 ) ] 
```

..并构建此表（带有整体、齿轮、圆柱和齿轮+圆柱突破）。请注意，这`dcast`只会创建一组突破，而不是同时创建所有突破。so`dcast`可用于单独创建第 1 行、第 2-4 行、第 5-7 行和第 8-15 行，但不能堆叠在一起。

```
 overall gear cyl 0_0_2 0_0_3 0_0_4 0_1_2    0_1_4 0_1_6 0_1_8    1_0_1 1_0_2 1_0_4 1_1_1 1_1_2
1        1   NA  NA 17.15  16.3 12.62    26 19.26667  19.7    15 20.33333  23.6  18.5  29.1  27.4
2        1   NA   4   NaN   NaN   NaN    26      NaN   NaN   NaN 21.50000  23.6   NaN  29.1  27.4
3        1   NA   6   NaN   NaN   NaN   NaN 21.00000  19.7   NaN 19.75000   NaN  18.5   NaN   NaN
4        1   NA   8 17.15  16.3 12.62   NaN 15.80000   NaN    15      NaN   NaN   NaN   NaN   NaN
5        1    3  NA 17.15  16.3 12.62   NaN      NaN   NaN   NaN 20.33333   NaN   NaN   NaN   NaN
6        1    4  NA   NaN   NaN   NaN   NaN 21.00000   NaN   NaN      NaN  23.6  18.5  29.1  25.9
7        1    5  NA   NaN   NaN   NaN    26 15.80000  19.7    15      NaN   NaN   NaN   NaN  30.4
8       NA    3   4   NaN   NaN   NaN   NaN      NaN   NaN   NaN 21.50000   NaN   NaN   NaN   NaN
9       NA    3   6   NaN   NaN   NaN   NaN      NaN   NaN   NaN 19.75000   NaN   NaN   NaN   NaN
10      NA    3   8 17.15  16.3 12.62   NaN      NaN   NaN   NaN      NaN   NaN   NaN   NaN   NaN
11      NA    4   4   NaN   NaN   NaN   NaN      NaN   NaN   NaN      NaN  23.6   NaN  29.1  25.9
12      NA    4   6   NaN   NaN   NaN   NaN 21.00000   NaN   NaN      NaN   NaN  18.5   NaN   NaN
13      NA    5   4   NaN   NaN   NaN    26      NaN   NaN   NaN      NaN   NaN   NaN   NaN  30.4
14      NA    5   6   NaN   NaN   NaN   NaN      NaN  19.7   NaN      NaN   NaN   NaN   NaN   NaN
15      NA    5   8   NaN   NaN   NaN   NaN 15.80000   NaN    15      NaN   NaN   NaN   NaN   NaN 
```

这是我的解决方案，但我想知道如果没有我庞大的函数定义，是否有更聪明的方法来做这样的事情。谢谢！

```
# program start
library(reshape2)
library(plyr)

# load your real data here
x$overall <- 1

# define a make-table function that quickly creates overall, cyl, gear, and gear+cyl-level tables using any value and any function
mt <-
    function( x , fun , var ){
        out <-
            rbind.fill(
                dcast( x , overall ~ vs + am + carb , fun , value.var = var ) ,
                dcast( x , overall + cyl ~ vs + am + carb , fun , value.var = var ) ,
                dcast( x , gear + overall ~ vs + am + carb , fun , value.var = var ) ,
                dcast( x , gear + cyl ~ vs + am + carb , fun , value.var = var )
            )

        nsm <- c( 'overall' , 'gear' , 'cyl' )

        out[ , c( 'overall' , 'gear' , 'cyl' , names( out )[ !( names( out ) %in% nsm ) ] ) ]
    }

    # make a table of the defined structure, calculating the mean of the mpg column
mt( x , mean , 'mpg' ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:32:40.350

感谢@hadley 正是我想要的

```
x <- mtcars[ , c( 1 , 2 , 8:11 ) ]
library(reshape2)

y <- add_margins( x , vars = c( 'gear' , 'cyl' ) )
dcast( y , gear + cyl ~ vs + am + carb , mean , value.var = 'mpg' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:58:47.063

这是您的代码的更通用版本：

```
mt <- function(data, y, x, fun, var) {
  formulas <- paste(y, "~", x)
  casts    <- lapply(formulas, dcast, data = data, fun.aggregate = fun,
                                      value.var = var)
  out      <- rbind.fill(casts)

  nsm <- unique(unlist(strsplit(y, '\\s?\\+\\s?')))
  out[, c(nsm, setdiff(names(out), nsm))]
}

mt(data = x,
   y    = c("overall", "overall + cyl", "gear + overall", "gear + cyl"),
   x    = "vs + am + carb",
   fun  = mean,
   var  = 'mpg') 
```

# entity-framework - 编辑数据库后 ADO.NET 模型不一致

> ID：15726651
> 
> 赞同：0
> 
> 时间：2013-03-31T05:28:15.057
> 
> 标签：entity-framework, asp.net-mvc-4

我正在开发一个 ASP.NET MVC 4 应用程序。我正在使用**实体框架数据库优先**设计原则。

最初我在**MySQL**上创建了数据库，然后在 Visual Studio 中设置了与 MySQL 的连接并生成了 ADO.NET 数据模型。但后来我在 MySQL 中添加了一些表，然后从 Visual Studio 我做了这个。

![在此处输入图像描述](https://i.stack.imgur.com/6n4Jb.png)

我可以在模型图中看到新的实体类型，但在 Model.tt 文件中没有生成与新实体对应的类。我的意思是存在旧表中的类，缺少新表中的类。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:34:12.493

您的 edmx 是否嵌套在文件夹中？如果是这样，这可能是在 VS 2012 Update1 中修复的错误，如果 edmx 在文件夹中，则不会重新生成代码。安装 VS 2012 Update 1，问题应该就消失了。您也可以右键单击 edmx 文件并单击运行自定义工具选项以强制生成代码。

# jquery - ui sortable multi toArray 方法从不通过 $.post 发送

> ID：15726653
> 
> 赞同：1
> 
> 时间：2013-03-31T05:28:19.020
> 
> 标签：jquery

我正在使用[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/) 查看此代码

```
var tmp_build_form = new Array();
var groups = $('#form_section').sortable('toArray');
var ordering = '';

if ( groups )
{
    for ( var i in groups )
    {
        if ( typeof(groups[i]) != 'function' )
        {
            ordering += groups[i]+',';

            if ( groups[i].indexOf('group') == 0 )
            {
                var fields = $('#form_section div#'+groups[i]+' div.group_fields_container').sortable('toArray');

                tmp_build_form[groups[i]] = Array();
                tmp_build_form[groups[i]] = fields;
            }
            else
            {
                tmp_build_form[groups[i]] = true;
            }
        }
    }

    tmp_build_form['ordering'] = ordering;
} 
```

我正在尝试通过帖子发送**tmp_build_form**

```
$.post(save_url,{'data' : tmp_build_form}, function(data) {
    alert(data);
}); 
```

它发送空数组，但是当`console.log`它给我数组时，我该如何解决这个问题

这是 tmp_build_form [http://img41.imageshack.us/img41/1240/30252807.jpg的控制台结果](http://img41.imageshack.us/img41/1240/30252807.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:39:31.280

尝试这个...

```
var myData = $('#form_section').sortable('serialize');

$.post(save_url,{'data' : myData}, function(data) {
    alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T05:49:19.320

是的，这会给你一个数组的输出，因为你已经传递了一个数组，所以你必须这样得到它：

```
$.post(save_url,{'data' : tmp_build_form}, function(data) {
    alert(data.data); // <-----here '.data' is the passed on which is in array
}); 
```

但我建议你使用`console.log(data.data)`

# java - 正则表达式获取图像 URL

> ID：15726665
> 
> 赞同：1
> 
> 时间：2013-03-31T05:30:14.557
> 
> 标签：java, regex

我想从 Java String 获取图像的 url：

```
String data = "[SyndContentImpl.value=<p><img class="alignnone size-full wp-image-134291"
               title="Design Store(y): Poketo Photo" 
               src="http://3.design-milk.com/images/2013/03/storey-poketo-storefront-1.jpg" 
               alt="Design Store(y): Poketo in style fashion home 
               furnishings featured  Category" width="500" height="333" /></p>"; 
```

我试过了

```
String pattern = "(http://)+[\\d\\w[-./]]*(.jpg)+"; 
```

但无法从数据中获取图像的 url。我终于需要这个网址

`http://3.design-milk.com/images/2013/03/storey-poketo-storefront-1.jpg`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T05:35:50.803

```
imageLinkPattern = linkPattern | imagePostfix 
```

所以我们有：

```
String pattern = "(http(s?):/)(/[^/]+)+" + "\.(?:jpg|gif|png)"; 
```

此模式仅接受 jpg|gif|png 类型的图像

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-25T20:45:30.923

```
String regex = "http(s?)://([\\w-]+\\.)+[\\w-]+(/[\\w- ./]*)+\\.(?:[gG][iI][fF]|[jJ][pP][gG]|[jJ][pP][eE][gG]|[pP][nN][gG]|[bB][mM][pP])";

Matcher m = Pattern.compile(regex).matcher(data);

if (m.find())
  System.out.println(m.group(0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T05:34:48.067

如果你正在解析 html，你应该使用[html 解析器](http://jtidy.sourceforge.net/)

* * *

如果不是 html，你可以使用这个正则表达式

```
http://[^"]+?\\.(jpg|jpeg|gif|png) 
```

`[^"]`匹配任何字符，除了`"`

`[^"]+`匹配 1 到多个`"`

# javascript - Javascript 创建元素

> ID：15726669
> 
> 赞同：1
> 
> 时间：2013-03-31T05:30:38.027
> 
> 标签：javascript, dom

我需要快速帮助来设置 createElement，如下所示：

```
<h1 class="headingTitle"> ENDANGERED <span class="subHeading">Animals</span> </h1> 
```

我做了这个，但它产生了一个错误，这是：

> 未捕获的错误：NotFoundError：DOM 异常 8

```
//Adds 'containr' div to the body
var containerElement = document.createElement('div');
containerElement.setAttribute('class','container');
document.body.appendChild(containerElement);

//Add the ENDANGERED ANIMALS title
var title = document.createElement("h1");
title.setAttribute('class', 'headingTitle');
var text = document.createTextNode("ENDANGERED");

var span = document.createElement('span');
span.setAttribute('class', 'subHeading');
var subText = document.createTextNode("Animals");
span.appendChild(title);
title.appendChild(text);

document.getElementsByClassName('container')[0].appendChild(title); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:39:23.133

我不完全确定您为什么会遇到该异常（我没有），但是您确实混淆了一些变量。固定，它看起来像这样：

```
var containerElement = document.createElement('div');
containerElement.setAttribute('class', 'container');
document.body.appendChild(containerElement);

var title = document.createElement('h1');
title.setAttribute('class', 'headingTitle');
title.appendChild(document.createTextNode('ENDANGERED '));

var span = document.createElement('span');
span.setAttribute('class', 'subHeading');
span.appendChild(document.createTextNode('Animals'));

title.appendChild(span);
containerElement.appendChild(title); 
```

**[试试看。](http://jsfiddle.net/batYu/)**

# orchardcms - 我可以在 Orchard CMS 中有 2 个两个主页（经过身份验证的和匿名的）吗？

> ID：15726670
> 
> 赞同：2
> 
> 时间：2013-03-31T05:30:53.587
> 
> 标签：orchardcms, orchardcms-1.6

我的“主页”中的“内容”部分应该是我构建的登录小部件，但是一旦登录，我希望人们被发送到他们现在有权查看的“内容”区域。对于这两个页面，我希望人们能够访问我的 URL，而 URL 名称后面没有任何内容。（即 www.xyz.com）并查看不同的“内容”区域是否已登录。

我面临的问题是 Orchard 将“Authenticated”和“Anonymous”设置为图层，但是您在这些图层上设置的内容必须为网站上的每个页面设置。但是我的“主页”与我网站上的其他页面发生了不同的事情。

有没有办法，我可以为已验证和匿名设置主页的单独内容部分（即当人们只需输入我网站的基本 URL 时）？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T06:58:37.607

一个 URL 应该对应一个资源。在一个 URL 后面有两个不同的资源，带有 GET 动词，除了其他讨厌的影响外，还会对 SEO 产生负面影响。但是，您可以做的一件事是将经过身份验证的用户从您的主页重定向到一个单独的 URL。

如果您仍想继续此操作，您可以定义自己的层，结合 home 和 authentication: 的条件：`url('~/') and Authenticated`并且`url('~/') and not Authenticated`应该可以解决问题。

# objective-c - 禁用精灵背后的触摸

> ID：15726673
> 
> 赞同：0
> 
> 时间：2013-03-31T05:31:38.753
> 
> 标签：objective-c, cocos2d-iphone, ccmenuitem

我的应用程序中有一个菜单，带有使用 CCMenuItemImage 的可点击按钮。当您按下其中一个按钮时，例如**购买按钮**，它会在所有内容之上生成另一个图像，一个确认屏幕（您是否真的想购买此商品）。此屏幕放置在 z:100 上只是为了确保它位于所有内容之上。

问题是下面菜单上的按钮（购买、返回、下一步（所有 CCMenuItemImage））仍然可以点击。我的想法只是使用`[button setIsEnabled:NO];`，但这似乎不起作用，除非 CCMenuItemImage 设置了 disabledImage ，但是我的一些按钮（下一个，上一个）使用 disabledImage 并且在此确认屏幕显示时禁用按钮看起来很愚蠢向上。

有没有办法只禁用对下面按钮的所有触摸，只允许确认屏幕进行触摸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:39:26.173

将 CCMenu 的启用属性设置为 NO。如果在没有禁用图像的情况下这不起作用，只需将 CCMenu 可见属性设置为 NO。这也会禁用对触摸做出反应的菜单。

# php - 使用递归构建动态超级菜单？

> ID：15726676
> 
> 赞同：6
> 
> 时间：2013-03-31T05:32:42.973
> 
> 标签：php, recursion

我正在尝试使用 PHP 创建一个 Mega Menu，但在正确输出结构时遇到问题。我已经对 Mega Menu 进行了硬编码来测试所有内容，它工作正常，但显然我需要 PHP 来为我创建它。

我有一个 Mega Menu 硬编码的示例，因此每个人都可以看到我正在尝试创建的内容：

[http://www.libertyeaglearms.com/dev](http://www.libertyeaglearms.com/dev)

**或者这里的代码：**

**期望的输出：**

```
 <div id="wrapper">
        <ul class="mega-menu">
            <li class="mega-menu-drop">
                <a href="#">Firearms</a>
                 <div class="mega-menu-content">
                     <div class="column">
                         <h4>Rifles</h4>
                          <ul>
                              <li><a href="#">One</a></li>
                              <li><a href="#">Two</a></li>
                              <li><a href="#">Three</a></li>
                              <li><a href="#">Four</a></li>
                              <li><a href="#">Five</a></li>
                          </ul>
                      </div>
                      <div class="column">
                          <h4>Handguns</h4>
                          <ul>
                              <li><a href="#">One</a></li>
                              <li><a href="#">Two</a></li>
                              <li><a href="#">Three</a></li>
                              <li><a href="#">Four</a></li>
                              <li><a href="#">Five</a></li>
                          </ul>
                      </div>
                      <div class="column">
                          <h4>Shotguns</h4>
                          <ul>
                              <li><a href="#">One</a></li>
                              <li><a href="#">Two</a></li>
                              <li><a href="#">Three</a></li>
                              <li><a href="#">Four</a></li>
                              <li><a href="#">Five</a></li>
                          </ul>
                      </div>
                  </div>
              </li>
              <li class="mega-menu-drop">
                  <a href="#">Archery</a>
                  <div class="mega-menu-content">
                      <div class="column">
                          <h4>Bows</h4>
                          <ul>
                              <li><a href="#">One</a></li>
                              <li><a href="#">Two</a></li>
                              <li><a href="#">Three</a></li>
                              <li><a href="#">Four</a></li>
                              <li><a href="#">Five</a></li>
                          </ul>
                      </div> 
                      <div class="column">
                          <h4>Arrows</h4>
                          <ul>
                              <li><a href="#">One</a></li>
                              <li><a href="#">Two</a></li>
                              <li><a href="#">Three</a></li>
                              <li><a href="#">Four</a></li>
                              <li><a href="#">Five</a></li>
                          </ul>
                      </div>
                  </div>
              </li> 
          </ul>
      </div> 
```

**当前输出：（**非常混乱。被警告，大声笑）

```
<div id="wrapper">
    <ul class="mega-menu">
    <li class="mega-menu-drop">
            <a href="#">archery</a>
            <div class="mega-menu-content">
                <div class="column">
                    <h4>compound</h4>
            <ul>
            <h4>bows</h4>
            <ul>
            </div>
        </li>
        <li class="mega-menu-drop">
            <a href="#">firearms</a>
            <div class="mega-menu-content">
                <div class="column">
                    <h4>rifle ammunition</h4>
                    <ul>
            <h4>ammunition</h4>
                    <ul>
            </div>
        </li>
            </ul>  
        </div> 
```

**这是我的PHP：**

```
$json = json_decode($category->buildDepartments(NULL),true);
function buildDepartments($array,$parent)
{
    $html = '';                 
    foreach($array as $category)
    {
        if($category['parent'] == $parent)
        {
             if($category['parent'] == NULL)
             {
                 $html .= '<li class="mega-menu-drop">' . "\n\t\t\t\t";
                 $html .= '<a href="#">'.$category['category_name'].'</a>' . "\n\t\t\t\t";
                 $html .= '<div class="mega-menu-content">' . "\n\t\t\t\t\t";                            
                 $html .= '<div class="column">' . "\n\t\t\t\t\t\t";
                 $html .= buildDepartments($array,$category['category_id']);                            
                 $html .= '</div>' . "\n\t\t\t";
                 $html .= '</li>' . "\n\t\t\t";
              }
              else
              {
                  $html .= buildDepartments($array,$category['category_id']);
                  $html .= '<h4>'.$category['category_name'].'</h4>' . "\n\t\t\t\t\t\t";
                  $html .= '<ul>' . "\n\t\t\t\t";

               }                        
          }
    }
    return $html;
}
print(buildDepartments($json,NULL)); 
```

**这是我的数据库：**

![在此处输入图像描述](https://i.stack.imgur.com/tZvfi.jpg)

**赏金后编辑**

根据 icktoofay 的建议，我似乎无法弄清楚`foreach()`循环。我遇到的问题是当我应该看到类别和子类别时，我在大型菜单中获得了部门名称。我认为问题是我需要使用特定的父 ID 执行循环才能获取所有孩子，但我不确定这是否是问题所在。这是代码：

```
<div id="wrapper">
<ul class="mega-menu">         
    <?php $json = json_decode($category->buildDepartments(NULL)); ?>
    <?php foreach($json as $category): ?>
        <li class="mega-menu-drop">
            <a href="#"><?php if($category->parent === NULL){echo $category->category_name;} ?></a>
            <div class="mega-menu-content">                 
                <?php foreach($category as $subcategory): ?>
                <div class="column">
                    <?php if($category->category_id === $category->parent){echo '<h4>' . $category->category_name . '</h4>';}?>
                    <ul>
                        <?php foreach($category as $subcategory)
                        {
                            echo '<li>' . $category->category_name . '</li>';
                        }
                        ?>
                    </ul>
                </div>
                <?php endforeach; ?>                   
            </div>
        </li>
     <?php endforeach; ?>  
</ul>  
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T05:45:30.013

由于它是一个固定的深度并且每个级别的格式不同，因此递归可能不合适。此外，将所有内容都放在字符串中是不雅的。相反，您可能想尝试像这样将 HTML 和循环编织在一起：

```
<div id="wrapper">
    <ul class="mega-menu">
        <?php foreach($categories as $category): ?>
            <li class="mega-menu-drop">
                <a href="#"><?php echo $category->name; ?></a>
                <div class="mega-menu-content">
                    <?php foreach($category->subcategories as $subcategory): ?>
                        <!-- and so on -->
                    <?php endforeach; ?>
                </div>
            </li>
        <?php endforeach; ?>
    </ul>
</div> 
```

* * *

我在这里使用的代码假设您已经将它从一个平面数组排序到一个树状结构。例如，如果我们有一个`Category`类：

```
class Category {
    public $id;
    public $parentID;
    public $name;
    public $parent;
    public $subcategories;

    public function __construct($id, $parentID, $name) {
        $this->id = $id;
        $this->parentID = $parentID;
        $this->name = $name;
        $this->parent = null;  // will be filled in later
        $this->subcategories = array();  // will be filled in later
    }
} 
```

还有一个关联数组的数组，就像您可能从数据库调用（我们将调用它`$flatCategories`）中获得的一样，我们可以构建一堆尚未连接的`Category`实例，如下所示：

```
$categories = array();
foreach($flatCategories as $flatCategory) {
    $categories[$flatCategory['id']] =
        new Category($flatCategory['category_id'],
                     $flatCategory['parent'],
                     $flatCategory['category_name']);
} 
```

然后我们可以将它们全部连接成一个层次结构：

```
foreach($categories as $category) {
    if($category->parentID !== null) {
        $category->parent = $categories[$category->parentID];
        $category->parent->subcategories[] = $category;
    }
} 
```

现在它们都连接起来了，我们只关心保留对根的引用：

```
$roots = array();
// This could, of course, be merged into the last loop,
// but I didn't for clarity.
foreach($categories as $category) {
    if($category->parentID === null) {
        $roots[] = $category;
    }
} 
```

现在`$roots`包含所有根类别，并且遍历起来相当简单。在顶部的示例中，我假设其中`$categories`有类似`$roots`的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T16:09:46.133

您需要生成称为超级树的东西并使用递归函数来回显每个分支，这将允许无限深度树，但是它也允许未知深度树。

**一、SQL：**

```
SELECT category_id, parent, category_name 
```

**二、使用SQL创建树：**

```
$super_tree = array();
while(($row = mysql_fetch_assoc($res)) != NULL) {
  $parent = $row['parent'] == NULL ? 0 : $row['parent']; //clean up the parent

  $super_tree[$parent][$row['category_id']] = $row['category_name'];
} 
```

**三、回声出树**

```
function echo_branch($tree_branch, $tree_root) {
  echo("<ul>\n"); //open up our list for this branch

  foreach($tree_branch as $id => $name) { //foreach leaf on the branch
    echo("<li>"); //create a list item

    echo("<a href=\"#{$id}\">{$name}</a>"); //echo out our link

    if(!empty($tree_root[$id])) { //if our branch has any sub branches, echo those now
      echo_branch($tree_root[$id], $tree_root); //pass the new branch, plus the root
    }

    echo("</li>\n"); //close off this item
  }
  echo("</ul>\n"); //close off this list
}

echo_branch($super_tree[0], $super_tree); //echo out unlimited depth tree structure 
```

这允许树结构的无限深度，并允许简单的代码能够在代码库中创建结构。

您现在需要做的就是在正确的位置添加额外的内容，例如类和额外的 html 元素。

如果您希望跟踪树的当前深度以便能够根据深度回显不同的内容，您可以进行以下更改

**在函数定义中**

```
function echo_branch($tree_branch, $tree_root, $depth) { 
```

**在 if 内的递归调用中**

```
echo_branch($tree_root[$id], $tree_root, $depth++); 
```

**在最初的通话中**

```
echo_branch($super_tree[0], $super_tree, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T20:47:04.680

看起来你正在使用变量

```
$category 
```

什么时候应该使用

```
$subcategory 
```

试试这个：

```
<div id="wrapper">
<ul class="mega-menu">         
    <?php $json = json_decode($category->buildDepartments(NULL)); ?>
    <?php foreach($json as $category): ?>
        <li class="mega-menu-drop">
            <a href="#"><?php if($category->parent === NULL){echo $category->category_name;} ?></a>
            <div class="mega-menu-content">                 
                <?php foreach($category as $subcategory): ?>
                <div class="column">
                    <?php if($subcategory->category_id === $category->parent){echo '<h4>' . $category->category_name . '</h4>';}?>
                    <ul>
                        <?php foreach($subcategory as $subcategory2)
                        {
                            echo '<li>' . $subcategory2->category_name . '</li>';
                        }
                        ?>
                    </ul>
                </div>
                <?php endforeach; ?>                   
            </div>
        </li>
     <?php endforeach; ?>  
</ul>  
</div> 
```

# php - PHP + Curl 使用 csrfToken 登录远程页面

> ID：15726682
> 
> 赞同：2
> 
> 时间：2013-03-31T05:34:26.157
> 
> 标签：php, api, curl, instagram

我有一个当前运行的 cronjob，当达到某个阈值时，它会尝试打开与 Instagram 的连接并提取所有最近标记的与该标签匹配的照片。

问题是，当我尝试使用 curl 从命令行启动远程登录以“授权”我的应用程序时，Instagram 始终以网页响应

> 无法加载此页面。如果您在浏览器中禁用了 cookie，或者您在隐私模式下浏览，请尝试启用 cookie 或关闭隐私模式，然后重试您的操作。

这是我的卷曲脚本。

```
 $username = "<myusername>";
    $password = "<mypassword>";
    $useragent = "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31"; // Yes cause that's the way I roll
    $cookie="InstagramCookie.txt";

    $ch  = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_COOKIEJAR, '/tmp/'.$cookie);
    curl_setopt($ch, CURLOPT_COOKIEFILE, '/tmp/'.$cookie);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.10 (maverick) Firefox/3.6.13');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

    $page = curl_exec($ch);

    // try to find the actual login form
    if (!preg_match('/<form method="POST" id="login-form" class="adjacent".*?<\/form>/is', $page, $form)) {
        throw Instagram_Manager('Failed to find log in form!');
    }

    $form = $form[0];

    // find the action of the login form
    if (!preg_match('/action="([^"]+)"/i', $form, $action)) {
        throw Instagram_Manager('Failed to find login form url');
    }

    $URL2 = $action[1]; // this is our new post url
    // find all hidden fields which we need to send with our login, this includes security tokens
    $count = preg_match_all('/<input type="hidden"\s*name="([^"]*)"\s*value="([^"]*)"/i', $form, $hiddenFields);

    $postFields = array();

    // turn the hidden fields into an array
    for ($i = 0; $i < $count; ++$i) {
        $postFields[$hiddenFields[1][$i]] = $hiddenFields[2][$i];
    }

    // add our login values
    $postFields['username'] = $username;
    $postFields['password'] = $password;

    $post = '';

    // convert to string, this won't work as an array, form will not accept multipart/form-data, only application/x-www-form-urlencoded
    foreach($postFields as $key => $value) {
        $post .= $key . '=' . urlencode($value) . '&';
    }

    $post = substr($post, 0, -1);

    // set additional curl options using our previous options
    curl_setopt($ch, CURLOPT_URL, "https://instagram.com/".$url2);
    curl_setopt($ch, CURLOPT_REFERER, $url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post);

    $page = curl_exec($ch);

    file_put_contents("/tmp/page.txt", $page); 
```

在这一点上，您的任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T05:39:23.020

修复了一些基本错误后，尝试了您的代码并正常工作。

首先检查文件夹'/tmp'是否存在，并且其中的文件是可写和可读的。

改变

```
$URL2 = $action[1]; 
```

为了

```
$url2 = $action[1]; 
```

（可变为小写）

和

```
"https://instagram.com/".$url2 
```

为了

```
$url.$url2 
```

希望能帮助到你

# java - 扫描仪输入 + do-while 循环表现得非常奇怪

> ID：15726689
> 
> 赞同：1
> 
> 时间：2013-03-31T05:35:41.453
> 
> 标签：java, input, java.util.scanner

我有这个代码：

```
Scanner inputScanner = new Scanner(System.in);
String word;
do
{
    word = inputScanner.next();
    System.out.println(word + ": " + dict.contains(word));
}
while (word != "@"); 
```

这很简单，但是在接收`@`到用户的输入后循环不会终止。我见过其他人抱怨这`Scanner`容易出错并且会产生意想不到的结果，但这并不能解释为什么在条件没有做任何事情的情况下可以`dict.contains(word)`完美运行......`while (word != "@")`

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:37:03.300

您`==`用于比较字符串；使用[String#equals](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)代替。

```
...
while (!word.equals("@")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T05:43:12.660

您需要使用 .equals() 方法而不是 == 操作。"==" 操作用于比较诸如 boolean、int、long、ect 和**references**之类的原语。

String 是一个对象，因此 Java 假定您要比较引用值而不是字符串中包含的值。另请记住，您也不能将 Long、Integer、Double 等与 == 运算符进行比较。

# java - 在netbeans中使用java swing的登录页面

> ID：15726697
> 
> 赞同：1
> 
> 时间：2013-03-31T05:37:45.557
> 
> 标签：java, swing, jframe, login-page

我正在使用 netbeans 中的 java swing 制作登录页面。当我尝试单击“登录”按钮时，输入凭据后，下一个页面不可见。我曾经`NextPage().setVisible(true)`这样做过。我应该使用其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:10:49.937

你在登录页面上使用过 actionListener() 吗？单击登录按钮时使用它转到下一页并在下一页上将其设置为可见（true）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T05:44:54.707

你必须使用 new Nextpage().setVisible(True);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-25T14:43:30.497

这就是我的登录页面从数据库中获取数据的方式

```
try{
    Class.forName("java.sql.Driver");
    Connection con=DriverManager.getConnection("jdbc:mysql://localhost/restman","root","1234");
    Statement stmt=con.createStatement();
    String pq="select * from employeelogin";
    ResultSet rs=stmt.executeQuery(pq);
    String user=a1.getText();
    String psw=a2.getText();
    while(rs.next()){
        String uname=rs.getString("username");
        String password=rs.getString("password");
        if ((user.equals(uname))&&(psw.equals(password))) {
            new customerservice().setVisible(true);
            this.setVisible(false);
        } else {
            p1.setVisible(true);
        }
    }
} catch(Exception x) {
   JOptionPane.showMessageDialog(null,x.getMessage());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-02T17:35:12.697

这是我的一段代码。登录请参见最后：

```
private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {                                         

    Connection conn=null;
    try{
        try {
            Class.forName("com.mysql.jdbc.Driver");
        } catch (ClassNotFoundException ex) {
               Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);
        }
        conn =DriverManager.getConnection(DB_URL, USER, PASS);
        Statement stmt=conn.createStatement();

        String S1 = jTextField1.getText();
        String S2 = jPasswordField1.getText().toString();
        String S3=jComboBox2.getSelectedItem().toString();

        if(S1.isEmpty() || S1 == null){
            JOptionPane.showMessageDialog(null, "Please insert a valid user name", "Warning", JOptionPane.WARNING_MESSAGE);
            return;
        }
        // if password is blank, warning message shown
        if(S2.isEmpty() || S2 == null){
            JOptionPane.showMessageDialog(null, "Password field is empty", "Warning", JOptionPane.WARNING_MESSAGE);
            return;
        }

        int flag=0;
        String sql;
        sql="SELECT * from member where EMAIL='"+S1+"'";
        ResultSet rs=stmt.executeQuery(sql);
        //System.out.println(rs.next());
        String uname="",pw="",category="";
        while(rs.next()){                       
            uname=rs.getString("EMAIL");
            pw=rs.getString("PASSWORD");
            category=rs.getString("CATEGORY");

            if(uname.matches(S1) && pw.equals(S2)==true && category.matches(S3))
            {
                flag=1;

                if(jComboBox2.getSelectedItem()=="VISITOR")
                {
                    setVisible(false);
                    Newvisitor f1= new Newvisitor(S1);
                    f1.getContentPane().setBackground(Color.darkGray);
                    f1.setVisible(true);
                    // jButton6.setVisible(true);
                }
                else if(jComboBox2.getSelectedItem()=="ACCOUNTANT")
                {
                    setVisible(false);
                    inter4 f=new inter4();
                    f.getContentPane().setBackground(new java.awt.Color(153,153,255));
                    f.setVisible(true);
                }
                else if(jComboBox2.getSelectedItem()=="ADMINISTRATOR")
                {
                    setVisible(false);
                    Admin f2=new Admin();
                    f2.getContentPane().setBackground(Color.darkGray);
                    f2.setVisible(true);
                }
            }
        } 
        if(flag==0)
            JOptionPane.showMessageDialog(null,"login failed");      
        stmt.close();
        conn.close();
    }
    catch(SQLException ss){
        ss.printStackTrace(); 
    }   `
} 
```

# iphone - 尝试刷新视图控制器时出现黑屏

> ID：15726698
> 
> 赞同：0
> 
> 时间：2013-03-31T05:37:47.540
> 
> 标签：iphone, ios, objective-c

我正在为 iphone 开发一个单词搜索益智游戏，我正在尝试为应用程序实现一个重启按钮。重启按钮应该能够初始化一个新的视图控制器，生成一个新的拼图，并显示新的拼图。

到目前为止，在益智游戏视图中，我有一个按钮，单击它会使用模态 segue 打开暂停菜单视图。（暂停菜单有三个按钮，恢复、重新启动、主菜单。）然后我做了这个谜题游戏控制器暂停菜单的代表，当按钮被按下时接收通知。恢复和主菜单按钮有效，但我无法使用重新启动按钮重新加载视图。拼图在一个容器视图中，它有一个创建网格并显示字母的集合控制器。

使用我拥有的当前代码，当我单击重新启动按钮时，我只看到一个仅显示导航栏的黑屏。但是，一旦我单击暂停菜单按钮（位于导航栏中），然后单击暂停菜单中的恢复按钮，我就会看到带有新生成的谜题的视图。

以下是 pauseMenuController 中的代码：

```
- (IBAction)IBARestart:(id)sender {
         [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
         [self.delegate goToRestart];
      } 
```

现在这是我的puzzleGameController 中的代码：

```
 -(void)goToRestart{        
     self.view = nil;
     [self.view.window setNeedsDisplay];

    PuzzleCollectionControllerViewController *puzzleInstance = [self.childViewControllers lastObject]; 
        puzzleInstance.view = nil; 
        [puzzleInstance.view setNeedsDisplay]; // I tried reloading the cointainer view too, but it still shows black screen

    } 
```

任何人都知道为什么它显示黑屏？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:57:04.770

我不确定这是否足以解决您的问题..

但我对此的担忧是：为什么你在重启时“nil”self.view？如果你这样做，视图是“nil”，因此不会显示任何东西，对于puzzleInstance.view 也是如此。

您可以在 viewDidUnload 上为它 nil/释放内存，因为视图将在 viewDidLoad 上再次设置，但通常我只是“nil”/“dealloc”任何属性、插座等（在 viewDidUnload 或 dealloc 上，取决于我设置的位置/重新设置它们）而不是视图本身。“setNeedsDisplay”只会“重绘”视图，但如果它为零，恐怕没有什么可重绘的了。所以我很确定这是你的问题。

当您按“恢复”（代码？）时有什么不同或发生了什么。

# .htaccess - htaccess mod rewrite 规则导致样式表无法加载

> ID：15726699
> 
> 赞同：1
> 
> 时间：2013-03-31T05:37:51.750
> 
> 标签：.htaccess, mod-rewrite, stylesheet

在我的 htaccess 中，我设置了一些重写规则来将我丑陋的动态 url 更改为干净的静态模仿者：

`mysite.com?content=content&content_att=content_att`
`mysite.com/content/content_att`

在`.htaccess`

```
RewriteRule ^([A-Za-z0-9]+)/([^/]+)/?$ ?a=b&content=$1&content_att=$2 [L,QSA]
RewriteRule ^([A-Za-z0-9]+)/?$ ?a=b&content=$1 [L,QSA] 
```

规则工作得很好，但我的问题是样式表根本不影响页面。我**没有**在样式表链接中使用相对路径，我检查了确认样式表已“加载”的 DOM 树。很奇怪，它们被找到了，但没有被应用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:39:58.093

在顶部添加以下内容`.htaccess`以防止它重写实际 URL：

```
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L] 
```

# android - 重新创建地图后如何删除标记？

> ID：15726701
> 
> 赞同：3
> 
> 时间：2013-03-31T05:38:28.463
> 
> 标签：android, google-maps, google-maps-markers, google-maps-android-api-2

根据[文档](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html#getId%28%29)，标记对象不会在从 Bundle 对象恢复时持续存在。那么，有没有办法在恢复后识别标记，以便以后可以删除标记？

我是否理解文档错误，文档是否有错误，或者在原始对象被破坏后根本无法删除标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:47:05.797

您不必识别标记，因为它们不会持久化并且不会恢复。文档是错误的，希望他们会更改（修复）文档而不是添加标记的持久性。

# c - 从客户端发送到服务器时无法打开 .docx 文件

> ID：15726706
> 
> 赞同：0
> 
> 时间：2013-03-31T05:39:16.100
> 
> 标签：c, sockets, client-server

我正在从客户端向服务器发送一个文件 .docx，但是当我尝试在服务器上打开它时，我无法打开它。如果结束 .txt 文件，它也可以正确打开，而不是 .docx 文件。有什么我想念的吗。谢谢

客户端代码

```
void error(char *msg)
{
perror(msg);
exit(0);
}

int main(int argc,char *argv[])
{   
FILE *fp;
size_t bytes_read;
int sockfd = 0,n = 0,i;
char recvBuffer[10],option;
struct sockaddr_in server_addr;

if(argc !=2)
{
    printf("\nUsage: %s <ip of server> \n",argv[0]);
    return 1;
}

memset(recvBuffer,'0',sizeof(recvBuffer));
if((sockfd = socket(AF_INET,SOCK_STREAM,0)) < 0)
{
    printf("\n Error : Could not create socket \n");
    return 1;
}
 // printf("%d",sockfd);

memset(&server_addr,'0',sizeof(server_addr));

server_addr.sin_family = AF_INET;
server_addr.sin_port = htons(5000);

if(inet_pton(AF_INET,argv[1],&server_addr.sin_addr) <=0)
{
    printf("\n inet_pton error occureed");
    return  1;
}

if(connect(sockfd,(struct sockaddr *)&server_addr,sizeof(server_addr)) < 0)
{
    printf("Connect failed");
    return 1;
}

    //while(1)
//{
    //printf("Please enter the message you want to send\n");
    fp = fopen("CMEA_projectreport.docx","r");

    //for(i=0;i<10;i++)
    while(!feof(fp))
    {
        bytes_read = fread(recvBuffer,1,sizeof(recvBuffer),fp);
        n = send(sockfd,recvBuffer,bytes_read,0);
        //printf("%zd",bytes_read);         
        if(n<0)
            error("Error writing to socket");
        bzero(recvBuffer,10);
        n = read(sockfd,recvBuffer,sizeof(recvBuffer)-1);

        if(n<0)
            error("Error reading from socket");
        printf("%s %d\n",recvBuffer,i);
    /*  printf("Do u want to continue y or n\n");
        scanf("%c",&option);
        if(option !='y'){
        n = send(sockfd,"exit",4,0);
        else
            goto repeat;
        exit(0);   */
    }
        fclose(fp);
        if(n < 0)
            error("ERROR writing to socket exit statement");

//  }   

    close(sockfd);
    return 0;
} 
```

服务器代码：

```
void error(char *msg)
{
perror(msg);
exit(0);
}

 int main(int argc,char *argv[])
 {
FILE *fo;
size_t bytes_read,bytes_written;
int listenfd = 0, connfd=0, clilen,n;
struct sockaddr_in server_addr,cli_addr;
char sendBuffer[1024];

listenfd = socket(AF_INET,SOCK_STREAM,0);
memset(&server_addr,'0',sizeof(server_addr));
memset(sendBuffer,'0',sizeof(sendBuffer));

server_addr.sin_family = AF_INET;
server_addr.sin_addr.s_addr = htonl(INADDR_ANY);
server_addr.sin_port = htons(5000);

bind(listenfd,(struct sockaddr*)&server_addr,sizeof(server_addr));

listen(listenfd,1);
clilen = sizeof(cli_addr);
connfd = accept(listenfd,(struct sockaddr*)&cli_addr,&clilen);
while(1)
{   

    if(connfd < 0)
        error("ERROR on accept");

    fo = fopen("Test5.docx","a+");

    n = read(connfd,sendBuffer,sizeof(sendBuffer));
    sendBuffer[n] = '\0';
    printf("%d\n",n);
    if(n < 0)
        error("ERROR reading from socket");
            bytes_written = fprintf(fo,"%s",sendBuffer);
    printf("%zd\n",bytes_written);
    fclose(fo);
            //sendBuffer[n] = '\0';

    if((strncmp(sendBuffer,"exit",4)) == 0)
        exit(0);
    printf("Here is the message : \n %s\n",sendBuffer);

    n = send(connfd,"i got your message",18,0);
    if(n < 0)
        error("ERROR writing to socket");
}
    close(connfd);
    close(listenfd);
    return 0;
} 
```

# java - java方法参数中的final

> ID：15726708
> 
> 赞同：3
> 
> 时间：2013-03-31T05:39:28.760
> 
> 标签：java, final

我需要确认我对最终方法参数的理解是否正确。如果我们不讨论匿名类，我将方法参数标记为 final 的唯一原因是在编译时捕获一些东西，而不是稍后为运行时错误挠头。我理解正确吗？还是我错过了一些设计范式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T05:41:47.903

从方法体内为参数赋值被认为是一种不好的做法：

```
public void myMethod (String parm) {
    parm = "some-value";     // This is very frowned upon
} 
```

将参数声明为`final`确保您在尝试这种做法时不会通过编译。

我不知道其他设计因素（也就是说，除了您提到的关于匿名类等的内容）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T05:57:55.577

它在运行时没有什么区别。这可以用最确凿的方式证明：添加`final`修饰符甚至不会改变编译后的字节码！

## FinalParam.java（之前）

```
class FinalParam {
   public static void main(String[] args) {
      System.out.println(java.util.Arrays.toString(args));
   }
}

$ javac -version
javac 1.7.0_15
$ javac FinalParam.java
$ md5sum FinalParam.class
7ca43ea68179f6191d5bf1de7ba21945
$ rm FinalParam.class 
```

FinalParam.java（之后）

```
class FinalParam {
   public static void main(final String[] args) {
      System.out.println(java.util.Arrays.toString(args));
   }
}

$ javac FinalParam.java
$ md5sum FinalParam.class
7ca43ea68179f6191d5bf1de7ba21945 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:52:05.167

这是正确的，final 有助于在编译时检测参数分配。但是我认为最好配置编译器来检测这种问题。例如 Eclipse`Parameter Assigment`在`Java Compiler Errors/Warnings Preferences`.

# php - 包括未选择的数据库

> ID：15726721
> 
> 赞同：1
> 
> 时间：2013-03-31T05:41:04.187
> 
> 标签：php, include, connection, xampp, dreamweaver

我有一个项目（现有），我被命令继续它

但有些奇怪

在我的连接中

```
<?php 

include "adodb5/adodb.inc.php";
$config['mysqlhost'] = 'localhost';
$config['mysqluser'] = 'xxx';
$config['mysqlpass'] = 'yyy';
$config['mysqldb'] = 'zzz';

$DB = ADONewConnection('mysql');
$DB->Connect($config['mysqlhost'],$config['mysqluser'],$config['mysqlpass'],$config['mysqldb'],true);

?> 
```

如果我尝试从此页面调用查询（与以下相同的查询），它会起作用（当我回显时，它会显示值）

所以我去其他页面

```
<?
    include ("inc/con.php");
?>

<?php 

$sql = ("SELECT * FROM table");
$query = mysql_query($sql)or die($myQuery."<br/><br/>".mysql_error());
$result = mysql_fetch_array($query);
echo $result ['table id'];

?> 
```

结果是

> 注意：未定义的变量：第 9 行 C:\xampp\htdocs\d88\www\mypage.php 中的 myQuery

未选择数据库

有什么问题吗？因为我在 con 页面上尝试，它可以工作，当我将它包含到其他页面时，它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T08:35:29.763

由于我的php版本，我必须使用`<?php ?>`而不是`<? ?>` 感谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:27:43.913

您无法连接 ADODB 连接并使用`mysql_query`. 语法是这样的`mysql_query ($query ,$con)`。`$con`是可选的，但如果您不指定它，`mysql_connect()`则假定打开的最后一个链接；但你之前没有任何`mysql_connect()`声明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T05:44:23.203

您没有在同一个文件本身中定义`$myQuery`任何内容。`inc/con.php`此外，您没有选择任何数据库[`mysql_select_db`](http://php.net/manual/en/function.mysql-select-db.php)：

```
mysql_select_db($config['mysqldb']); 
```

还建议您不要使用`mysql_*`函数，因为它们将被删除并且已被弃用（您可以使用 PDO 或 mysqli）。

*注意：我认为`$sql = ("SELECT * FROM table")`被评估为`$sql = true`*.

# scrapy - Scrapy：项目差异

> ID：15726728
> 
> 赞同：1
> 
> 时间：2013-03-31T05:43:50.607
> 
> 标签：scrapy

场景：包含多个项目的页面，每个项目由标题、描述、图像组成。当其中一项缺少标题时会发生什么？scrapy 是如何处理的？看来scrapy盲目选择所有标题 //div[id='content']/ul/li/div[id='title']/text(),

预期的输出是该行将缺少标题。但我担心，因为它在不考虑项目上下文的情况下盲目地选择页面上的所有标题。如果第 5 项缺少标题，会不会误用第 6 项的标题？

```
title1 | description | image
.
.
title4 | description | image
title6 | description | image  <--- it's supposed to be missing the title.
       | description | image 
```

scrapy有办法解决这个问题吗？

我想的一种解决方法是查看父项元素，然后查看该项的内部。如果缺少某些东西，请不要显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:03:49.910

有多种方法可以处理这种情况

1）您可以实现一个可以跳过不需要的项目的管道

2）您可以在提取部分添加检查以仅产生/返回所需的项目

您需要了解 Scrapy 是一个高级爬虫框架，它还为数据提取提供内置支持，您可以使用任何您想要的库进行提取。

# haskell - 简单的例子来说明 Category、Monoid 和 Monad？

> ID：15726733
> 
> 赞同：50
> 
> 时间：2013-03-31T05:44:30.797
> 
> 标签：haskell, monads, category-theory, monoids

我对这三个概念感到非常困惑。

有没有简单的例子来说明 Category 、 Monoid 和 Monad 之间的区别？

如果有这些抽象概念的说明，那将非常有帮助。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-03-31T06:56:21.650

这可能不是您要寻找的答案，但无论如何您都可以这样做：

# 看待 monads & co 的一种非常歪曲的方式。

查看此类抽象概念的一种方法是将它们与基本概念联系起来，例如普通的列表处理操作。那么，你可以这么说，

*   类别概括了`(.)`操作。
*   一个幺半群概括了这个`(++)`操作。
*   函子概括了该`map`操作。
*   应用函子泛化了`zip`（或`zipWith`）操作。
*   一个单子概括了这个`concat`操作。

# 一个类别

一个类别由一组（或一类）对象和一组箭头组成，每个箭头连接两个对象。此外，对于每个对象，应该有一个标识箭头将这个对象连接到它自己。此外，如果有一个箭头 ( `f`) 结束于一个对象，另一个 ( `g`) 从同一对象开始，则还应该有一个复合箭头，称为`g . f`。

在 Haskell 中，这被建模为一个类型类，将 Haskell 类型的类别表示为对象。

```
 class Category cat where
  id :: cat a a
  (.) :: cat b c -> cat a b -> cat a c 
```

类别的基本示例是函数。每个函数连接两种类型，对于所有类型，都有一个函数`id :: a -> a`将类型（和值）连接到自身。函数的组合是普通的函数组合。

简而言之，Haskell 基础中的类别是*行为类似于函数*的事物，即您可以将`(.)`.

# 一个 Monoid

幺半群是具有单位元素和关联操作的集合。这在 Haskell 中被建模为：

```
class Monoid a where
  mempty  :: a
  mappend :: a -> a -> a 
```

类半群的常见示例包括：

*   整数集、元素 0 和操作`(+)`。
*   一组正整数、元素 1 和操作`(*)`。
*   所有列表、空列表`[]`和操作的集合`(++)`。

这些在 Haskell 中建模为

```
newtype Sum a = Sum {getSum :: a}
instance (Num a) => Monoid (Sum a) where
  mempty  = Sum 0
  mappend (Sum a) (Sum b) = Sum (a + b)  

instance Monoid [a] where
  mempty = []
  mappend = (++) 
```

Monoids 用于“组合”和积累事物。例如，函数`mconcat :: Monoid a => [a] -> a`, 可用于将总和列表缩减为单个总和，或将嵌套列表缩减为平面列表。将其视为以某种方式“合并”两件事的一种概括`(++)`或操作。`(+)`

# 函子

Haskell 中的函子是一个非常直接地概括操作的东西`map :: (a->b) -> [a] -> [b]`。它不是映射到列表上，而是映射到一些*结构*上，例如列表、二叉树，甚至是 IO 操作。仿函数的建模如下：

```
class Functor f where
  fmap :: (a->b) -> f a -> f b 
```

将此与普通`map`函数的定义进行对比。

# 一个应用函子

应用函子可以看作是具有广义`zipWith`运算的事物。函子一次映射一个通用结构，但使用 Applicative 函子，您可以将两个或多个结构压缩在一起。对于最简单的示例，您可以使用应用程序将类型内的两个整数压缩在一起`Maybe`：

```
pure (+) <*> Just 1 <*> Just 2  -- gives Just 3 
```

请注意，结构会影响结果，例如：

```
pure (+) <*> Nothing <*> Just 2  -- gives Nothing 
```

将此与通常的`zipWith`功能进行对比：

```
zipWith (+) [1] [2] 
```

该应用程序不仅适用于列表，还适用于各种结构。此外，巧妙的技巧`pure`和`(<*>)`推广 zipping 可以处理任意数量的参数。要了解它是如何工作的，请检查以下类型，同时保持部分应用函数的概念：

```
instance (Functor f) => Applicative f where
  pure  :: a -> f a
  (<*>) :: f (a -> b) -> f a -> f b 
```

`fmap`还要注意和之间的相似性`(<*>)`。

# 一个单子

Monad 通常用于对不同的计算上下文进行建模，例如非确定性或副作用计算。由于 monad 教程已经太多了，我只推荐[最好的](http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html)，而不是写另一个。

与普通的列表处理函数有关，monad 将函数泛化为`concat :: [[a]] -> [a]`与列表以外的许多其他类型的结构一起工作。举个简单的例子，一元操作`join`可用于展平嵌套`Maybe`值：

```
join (Just (Just 42)) -- gives Just 42
join (Just (Nothing)) -- gives Nothing 
```

这与使用 Monads 作为结构化计算的手段有什么关系？考虑一个玩具示例，您从某个数据库执行两个连续查询。第一个查询返回一些键值，您希望使用它进行另一次查找。这里的问题是第一个值被包裹在里面`Maybe`，所以你不能直接用它来查询。相反，也许是 a `Functor`，您可以`fmap`用新查询代替返回值。这会给你两个`Maybe`像上面一样的嵌套值。另一个查询将产生三层`Maybe`s。这将很难编程，但是单子`join`给了你一种方法来扁平化这个结构，并且只使用一个级别的`Maybe`s。

（我想在这篇文章有意义之前，我会对其进行大量编辑..）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-17T19:08:27.497

我认为要理解 monad，需要使用绑定运算符 ( `>>=`)。受 [ [http://dev.stephendiehl.com/hask/#eightfold-path-to-monad-satori](http://dev.stephendiehl.com/hask/#eightfold-path-to-monad-satori](Don) ] 的影响（不要阅读 monad 教程。）

我的小玩法如下：

# 1\. 连接 getLine 和 putStrLn

改编自[http://www.haskellforall.com/2014/10/how-to-desugar-haskell-code.html](http://www.haskellforall.com/2014/10/how-to-desugar-haskell-code.html)

```
Prelude> f = getLine >>= \a -> putStrLn a
Prelude> f
abc
abc
Prelude> 
```

和签名：

```
Prelude> :t getLine
getLine :: IO String
Prelude> :t (\a -> putStrLn a)
(\a -> putStrLn a) :: String -> IO ()
Prelude> :t f
f :: IO () 
```

结果：可以看到部分`(>>=) :: Monad m => m a -> (a -> m b) -> m b`签名。

# 2\. 连接Maybe's

改编自[https://wiki.haskell.org/Simple_monad_examples](https://wiki.haskell.org/Simple_monad_examples)

```
Prelude> g x = if (x == 0) then Nothing else Just (x + 1)
Prelude> Just 0 >>= g
Nothing
Prelude> Just 1 >>= g
Just 2 
```

结果：[`fail "zero"`是`Nothing`](https://stackoverflow.com/questions/56191775)

# 3\. 将绑定视为加入计算

...如[https://www.slideshare.net/ScottWlaschin/functional-design-patterns-devternity2018中所述](https://www.slideshare.net/ScottWlaschin/functional-design-patterns-devternity2018)

[![在此处输入图像描述](https://i.stack.imgur.com/biDbv.png)](https://i.stack.imgur.com/biDbv.png)

# c# - 在循环中迭代项目

> ID：15726734
> 
> 赞同：0
> 
> 时间：2013-03-31T05:44:57.743
> 
> 标签：c#, java, javascript, algorithm, language-agnostic

我有一个像人一样`List<int>`的价值观`60,45,45,45,45,30,60,60,15`

我也有两个插槽。第一个插槽可以占用`180`人

问题是我需要循环`List<int>`以用 180 人填充 Slot1

```
var slotCount=0;
foreach(int i in list)
{
  slot[slotCount]=i;
  slotCount++;
  //Here till 60+45+45=150 its ok.
  //But if i add next item 45, I cross my slot limit(195). 
  //So i need to pick 30 from list, so it will 180 
} 
```

**一旦这个插槽被 180 填充，我需要创建另一个插槽并添加剩余的插槽。**

我正在为这个逻辑而苦苦挣扎。欢迎任何算法/方法！

**笔记：**

> 第一个插槽总是 180 第二个插槽可以是 0-180 或最大 240
> 
> 如果列表有更多项目，我们将其安排在第二天，通过为第 2 天再次创建 slot1 和 slot 2

* * *

这是我尝试但失败的方法:(

```
class Group
{
    public string Name { get; set; }
    public int Count { get; set; }
}
class Slot
{
    public int MaxSize { get; set; }
    public List<Group> Groups { get; set; }

    public int OccupiedSize
    {
        get
        {
            int count = 0;
            foreach (Group g in Groups)
            {
                count += g.Count;
            }
            return count;
        }
    }
}
class Schedule
{
    public Slot MorningSlot { get; set; }
    public Slot EveningSlot { get; set; }
}
class Program
{
    static void Main(string[] args)
    {
        List<Group> groups = new List<Group>{new Group{Count=60},
            new Group{Count=45},new Group{Count=45},new Group{Count=45},
            new Group{Count=45}, new Group{Count=30},new Group{Count=60},
            new Group{Count=60},new Group{Count=15}
        };

        int eventsCount = groups.Count;

        List<Schedule> shedules = new List<Schedule>();

        while (eventsCount > 0)
        {

            Schedule sched = new Schedule();
            sched.MorningSlot = new Slot();
            sched.MorningSlot.MaxSize = 180;

            sched.EveningSlot = new Slot();
            sched.EveningSlot.MaxSize = 240;

            sched.MorningSlot.Groups = new List<Group>();
            sched.EveningSlot.Groups = new List<Group>();

            foreach (Group g in groups.ToList())
            {

                if (sched.MorningSlot.OccupiedSize + g.Count 
                    <= sched.MorningSlot.MaxSize)
                {
                    sched.MorningSlot.Groups.Add(g);
                    groups.Remove(g);
                    eventsCount--;
                }
                else if (sched.EveningSlot.OccupiedSize + g.Count 
                   <= sched.EveningSlot.MaxSize)
                {
                    sched.EveningSlot.Groups.Add(g);
                    groups.Remove(g);
                    eventsCount--;
                }
            }

            shedules.Add(sched);
        }

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:59:18.563

您可以使用`LINQ`来计算每个的当前总和`List`。

```
int _maxSlotA = 180;
int _maxSlotB = 240;

List<int> _slotA = new List<int>();
List<int> _slotB = new List<int>();

foreach(int i in list)
{
    if (_slotA.Sum() < _maxSlotA)
    {
        _slotA.Add(i);
    }
    elseif (_slotB.Sum() < _maxSlotB)
    {
        _slotB.Add(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:37:11.287

**输入样本 I：** xPeople -- 60,45,45,45,45,30,60,60,15

```
//OutPut
Slot I: [60, 45, 45, 30]
Slot II: [45, 45, 60, 60]
Un-Allocated:[0, 0, 0, 0, 0, 0, 0, 0, 15] 
```

**输入样本二：** xPeople -- 75,45,45,45,45,30,60,60,15

```
//OutPut
Slot I: [75, 45, 45, 15]
Slot II: [45, 45, 30, 60, 60]
Un-Allocated:[0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

**输入样本 III：** xPeople -- 128,11,8,69,6,76,41,54,5,4,2,3,2,100

```
//OutPut
Slot I: [128, 11, 8, 33]
Slot II: [36, 6, 76, 41, 54, 5, 4, 2, 3, 2, 11]
Un-Allocated:[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 89] 
```

这段代码是用 测试`IDE`过的，我可能在很多情况下都测试过，如果你发现有任何问题，请在我的帖子中发表评论。

```
import java.util.ArrayList;

public class Test1 {

    public static void main(String args[])
    {

        ArrayList<Integer> xPeople=new ArrayList<Integer>();
        xPeople.add(60); xPeople.add(45); xPeople.add(45);
        xPeople.add(45); xPeople.add(45); xPeople.add(30);
        xPeople.add(60); xPeople.add(60); xPeople.add(15);

        ArrayList<Integer> xSlotOne=new ArrayList<Integer>();
        ArrayList<Integer> xSlotTwo=new ArrayList<Integer>();

        int xSlotOneCnt=0;
        int xSlotTwoCnt=0;

        for(int i=0; i<xPeople.size();i++) 
        {

            if(xSlotOneCnt<180)
            {
                if (xSlotOneCnt + xPeople.get(i) >180)
                {
                    if(xPeople.indexOf(180 - xSlotOneCnt) != -1)
                    {
                        xSlotOne.add(xPeople.get(xPeople.indexOf(180 - xSlotOneCnt)));
                        xPeople.set(xPeople.indexOf(180 - xSlotOneCnt),0);
                    }
                    else
                    {
                        xSlotOne.add(180 - xSlotOneCnt);
                        xPeople.set(i,  xPeople.get(i) - (180 - xSlotOneCnt));
                    }

                    xSlotOneCnt += 180 - xSlotOneCnt;
                }
                else
                {
                    xSlotOne.add(xPeople.get(i));
                    xSlotOneCnt += xPeople.get(i);

                    xPeople.set(i, 0);
                }
            }

                          //The code inside this if statement is as same the
                          //code which is inside the above If statement[if(xSlotOneCnt<180)]
                          //So please use a function in this case to avoid code repetetion.

            if(xSlotTwoCnt < 240 && xPeople.get(i) > 0)
            {

                                if (xSlotTwoCnt + xPeople.get(i) >240)
                {
                    if(xPeople.indexOf(240 - xSlotTwoCnt) != -1)
                    {
                        xSlotTwo.add(xPeople.get(xPeople.indexOf(240 - xSlotTwoCnt)));
                        xPeople.set(xPeople.indexOf(240 - xSlotTwoCnt),0);
                    }
                    else
                    {
                        xSlotTwo.add(240 - xSlotTwoCnt);
                        xPeople.set(i,  xPeople.get(i) - (240 - xSlotTwoCnt));
                    }

                    xSlotTwoCnt += 240 - xSlotTwoCnt;
                }
                else
                {
                    xSlotTwo.add(xPeople.get(i));
                    xSlotTwoCnt += xPeople.get(i);
                    xPeople.set(i, 0);
                }
            }

        }

        System.out.println("Slot I: " + xSlotOne);
        System.out.println("Slot II: " + xSlotTwo);
        System.out.println("Un-Allocated:" + xPeople);

    }

} 
```

# html - CSS3 / HTML5 /Javascript 竖屏调整大小

> ID：15726737
> 
> 赞同：0
> 
> 时间：2013-03-31T05:45:18.377
> 
> 标签：html, css, alignment

我希望我的网页中的一个 div 占据屏幕的整个区域 - 垂直和水平。

下面会有更多的div。

我得到了水平部分，但我不确定如何做垂直部分。
这个网站在一定程度上做到了：http: [//ournameismud.co.uk/#](http://ournameismud.co.uk/#)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:58:10.337

`html`尝试将and的高度设置`body`为 100%，然后将 your的高度也设置`div`为 100%。
例如

```
html, body {
  height: 100%
  padding: 0;
  margin: 0;
}

#my-div {
  width: 100%;
  height: 100%;
} 
```

**编辑：**忘记将边距和填充设置为 0。

# php - 如何检查上传的文件中的图像

> ID：15726738
> 
> 赞同：1
> 
> 时间：2013-03-31T05:45:20.980
> 
> 标签：php, image, filter, detect

我知道 PHP 中带有`getimagesize`和`Fileinfo`扩展的方法，但它们都需要一些库（`GD`或`Fileinfo`）。

我发现此代码用于从提供的文件中检测图像：

```
function is_image($image_path)
{
    if (!$f = fopen($image_path, 'rb'))
    {
        return false;
    }

    $data = fread($f, 8);
    fclose($f);

    // signature checking
    $unpacked = unpack("H12", $data);
    if (array_pop($unpacked) == '474946383961' || array_pop($unpacked) == '474946383761') return "gif";
    $unpacked = unpack("H4", $data);
    if (array_pop($unpacked) == 'ffd8') return "jpg";
    $unpacked = unpack("H16", $data);
    if (array_pop($unpacked) == '89504e470d0a1a0a') return "png";

    return false;
} 
```

它是安全的吗？要不要用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:55:44.600

我从函数的 PHP 文档中引用`getimagesize`：-

> 此功能不需要 GD 图像库。

所以你应该可以使用它。

# css - 使用 flexbox 垂直居中项目

> ID：15726740
> 
> 赞同：24
> 
> 时间：2013-03-31T05:45:29.453
> 
> 标签：css, flexbox

我正在尝试使用 CSS 的 flexbox 将项目垂直居中；而且，我知道如何使用非供应商前缀代码来做到这一点，但即使使用供应商前缀，我也无法让它在 Webkit (Chrome) 中工作。

我正在尝试垂直对齐#trigger 中的跨度。

这是我的CSS：

```
#trigger{
    /* 2009 syntax */
    display: -webkit-box;
    display: box;
    /* current syntax */
    display: -webkit-flex;
    display: flex;
}

#trigger span{
    /* 2009 syntax */
    -webkit-box-align: center;
    /* current syntax */
    -webkit-align-items: center;
    flex-align: center;
} 
```

任何想法我做错了什么？

如果您知道我正在使用的其他供应商前缀/属性版本，请随时分享它们，以便它可以在不仅仅是 Webkit 中工作。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-31T11:33:25.513

该`align-items`属性适用于*弹性容器*（`display: flex`应用到它们的元素），而不是*弹性项目*（*弹性容器*的子项）。旧的 2009 规范没有与`align-items`;相媲美的属性。2009 年的`box-align`房产符合`align-content`标准规格。

[http://jsfiddle.net/mnM5j/2/](http://jsfiddle.net/mnM5j/2/)

```
#trigger {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  text-align: center;
  height: 10em;
  background: yellow;
}

<div id="trigger">
    <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porta elit vel ante hendrerit facilisis. Curabitur aliquam sollicitudin diam, id posuere elit consectetur nec.</span>
</div> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-31T08:00:59.310

可以使用以下属性实现垂直对齐的布局，请注意这是使用旧语法，尽管我已经在 Chrome、Firefox 和 Firefox Aurora 的最新版本上进行了测试 -

```
#trigger {
  width: 200px;
  height: 200px;

  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-pack: center;
  -webkit-box-align: center;

  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-pack: center;
  -moz-box-align: center;

  display: box;
  box-orient: vertical;
  box-pack: center;
  box-align: center;
}

#trigger span {
  display: block;
} 
```

`box-orient`指定盒子的孩子应该如何对齐，在我们的例子中是垂直的。

`box-pack`沿着 box-orient 轴对齐子元素。

`box-align`对齐盒子内的孩子，它的轴垂直于盒子方向轴，即在我们的例子中，因为盒子方向是垂直的，它将决定孩子水平的对齐方式。

这是一个[Codepen 演示](http://codepen.io/anon/pen/Lymle)，我在 span 元素上应用的属性并非`display: block`纯粹用于装饰目的。

# bash - 在作业和终端之间分配联系

> ID：15726743
> 
> 赞同：0
> 
> 时间：2013-03-31T05:45:42.177
> 
> 标签：bash, terminal

如何将平局分配给当前打开的终端？抱歉 - 澄清一下：正如我在这个问题中提到的那样 [https://superuser.com/questions/575847/kill-running-script-i-think-i-must-allocate-terminal](https://superuser.com/questions/575847/kill-running-script-i-think-i-must-allocate-terminal) 我在运行命令时遇到问题另一台使用 ssh 和 here-doc 的机器。即 ssh another_machine << 'ENDSSH' commands/script-to-run ENDSSH 但我收到此消息：将不会分配伪终端，因为 stdin 不是终端。这会产生一个问题，即现在的作业/进程无法使用 ps/job 命令检测/终止。

我可以将作业绑定到当前打开的终端或新的终端窗口吗？

非常感谢！

仅供参考：我使用另一个问题（上面链接）仅作为我何时需要分配平局的一个例子。我期待其他人出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:47:26.313

尝试提供`ssh`选项`-t`，这会强制它创建一个伪终端。

# ruby - 对 https 的 Ruby 请求 - “在‘read_nonblock’中：对等方重置连接 (Errno::ECONNRESET)”

> ID：15726744
> 
> 赞同：17
> 
> 时间：2013-03-31T05:46:14.900
> 
> 标签：ruby, ruby-2.0

这是我的代码

```
domain = 'http://www.google.com'
url = URI.parse "https://graph.facebook.com/fql?q=SELECT%20url,normalized_url%20FROM%20link_stat%20WHERE%20url='#{domain}'"
req = Net::HTTP::Get.new url.path
res = Net::HTTP.start(url.host, url.port) {|http| http.request req}
puts res.body 
```

它给了我

```
/home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/protocol.rb:153:in `read_nonblock': Connection reset by peer (Errno::ECONNRESET)
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/protocol.rb:153:in `rbuf_fill'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/protocol.rb:134:in `readuntil'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/protocol.rb:144:in `readline'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/response.rb:39:in `read_status_line'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/response.rb:28:in `read_new'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1405:in `block in transport_request'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1402:in `catch'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1402:in `transport_request'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1375:in `request'
    from /home/alex/Documents/ruby_test1.rb:20:in `block in <main>'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:851:in `start'
    from /home/alex/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:582:in `start'
    from /home/alex/Documents/ruby_test1.rb:20:in `<main>' 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-31T07:23:28.717

您的代码中有几个奇怪的地方。主要是：因为你使用`SSL`你要`HTTP.start`知道 with `:use_ssl => url.scheme == 'https'`。`HTTP.Get`构造函数等待一个`URI`，而不是路径。总结：

```
domain = 'http://www.google.com'
url = URI.parse("https://graph.facebook.com/fql?q=SELECT%20url,normalized_url%20FROM%20link_stat%20WHERE%20url='#{domain}'")
req = Net::HTTP::Get.new url 
res = Net::HTTP.start(url.host, url.port, 
        :use_ssl => url.scheme == 'https') {|http| http.request req}
puts res 
```

给出：

```
#<Net::HTTPOK:0x000000027d0558> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-20T09:40:01.810

[接受](https://stackoverflow.com/a/15727341/2767755)的答案给了我一个错误-

```
`initialize': no implicit conversion of Hash into String (TypeError) 
```

当我使用 -

```
Net::HTTP.start(url.host, url.port, :use_ssl => url.scheme == 'https') 
```

我的 Ruby 版本是 -

```
arup_ruby$ ruby -v
ruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-darwin12.0] 
```

然后，我修改了代码如下：-

```
require "uri"
require "net/http"

domain = 'http://www.google.com'
uri = URI.parse("https://graph.facebook.com/fql?q=SELECT%20url,normalized_url%20FROM%20link_stat%20WHERE%20url='#{domain}'")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true if uri.scheme == 'https'
req = Net::HTTP::Get.new uri
res = http.start { |http| http.request req }
puts res
# >> #<Net::HTTPOK:0x000001018f8520> 
```

它奏效了。

# magento - SEOmoz 显示 10k+ 抓取错误 - 302 重定向问题，magento 1.6 和 1.7

> ID：15726751
> 
> 赞同：1
> 
> 时间：2013-03-31T05:48:01.190
> 
> 标签：magento, seo, web-crawler

我有一个 SEOmoz 帐户 PRO，在添加活动和几天后，抓取统计数据进来了，并且 10k 302 重定向不应该存在，有比较产品页面、启用 cookie URL 等 URL，这是正确的现在是 302，我需要到达 301。我正在使用 magento 1.6，而在另一家商店使用 1.7 版本的 magento 两者都有同样的问题。

我实际上遵循了这个：

app/code/core/Mage/Core/Controller/Response/Http.php

但是该文件上没有 302 或 301 我该怎么办？我有 10,000 个重定向抓取错误，它们需要是 301，它们目前是 302。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T09:31:29.413

检查您的规范网址设置。当看到规范的 url 错误时，也许 MOZ 大量出现。

# angularjs - testacular / karma 跳过我的 e2e 测试

> ID：15726752
> 
> 赞同：2
> 
> 时间：2013-03-31T05:48:01.270
> 
> 标签：angularjs, karma-runner

这个问题之前好像已经回答[过](https://stackoverflow.com/questions/14334934/testacular-does-not-run-e2e-test)了，但是链接已经不存在了，因为睾丸组不存在了。即使我的搜索技能适中，我也无法在 Angular 组中找到任何关于跳过测试的参考。

我在 config/karma-e2e.js 中的配置文件：

```
basePath = '../';

files = [
  JASMINE, JASMINE_ADAPTER,
  'app/assets/javascripts/v2/vendor/angular.1.0.5.js',
  'app/assets/javascripts/v2/vendor/angular-*.js',
  'karma/lib/angular/angular-scenario.js',
  'karma/lib/angular/angular-mocks.js',
  'app/assets/javascripts/v2/vendor/*.js',
  'app/assets/javascripts/v2/services/*.js',
  'app/assets/javascripts/v2/controllers/*.js',
  'app/assets/javascripts/v2/*.js',
  'karma/e2e/*.js'
];

autoWatch = true;

browsers = ['Chrome'];

singleRun = true;

proxies = {
  '/': 'http://localhost:3000/'
};

junitReporter = {
  outputFile: 'test_out/e2e.xml',
  suite: 'e2e'
}; 
```

我的应用程序在（rails）端口 3000 上提供服务。我的测试尽可能简单。它看起来像这样：

```
'use strict';

describe("A suite", function() {
  beforeEach(function() {
    browser().navigateTo('/');
  });

  it("contains spec with an expectation", function() {
    expect(true).toBe(true);
  });
}); 
```

这个测试被跳过了！

```
[2013-03-30 22:35:28.945] [WARN] config - "/" is proxied, you should probably change urlRoot to avoid conflicts
INFO [karma]: Karma server started at http://localhost:9876/
INFO [launcher]: Starting browser Chrome
INFO [Chrome 26.0 (Mac)]: Connected on socket id GRDVn96Wxr7xEzxe8XjU
Chrome 26.0 (Mac): Executed 0 of 1 (skipped 1) SUCCESS (3.771 secs / 0 secs) 
```

即使我使用 ddescribe 或 iit 来尝试强制运行它，我仍然会被跳过。上一个问题引用的错误是什么？

我正在使用 karma 0.8.0 & angular-scenario 1.0.5 。我能够成功地从[angular-seed](https://github.com/angular/angular-seed)运行 e2e 测试，所以我完全感到困惑。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T11:45:22.227

您应该从 JASMINE 运行器更改为 ANGULAR_SCENARIO 运行器。

当您运行 E2E 测试时，测试运行器将连接到您正在运行的站点并依靠它来为被测的正确应用程序提供服务。它连接到应用程序各个部分的位置可以由`proxies`配置控制。您需要为 Karma 提供的唯一另一件事是场景运行器和测试本身。

[注意：即使在 angular-seed 中， e2e 测试](https://github.com/angular/angular-seed/blob/master/config/testacular-e2e.conf.js)和[单元测试](https://github.com/angular/angular-seed/blob/master/config/testacular.conf.js)也有不同的配置。请注意 e2e 配置中 files 数组的配置：

```
files = [
  ANGULAR_SCENARIO,
  ANGULAR_SCENARIO_ADAPTER,
  'test/e2e/**/*.js'
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T14:37:54.093

现在不赞成在设置中使用此功能：

```
...
frameworks: ["ng-scenario"],
... 
```

您还需要通过以下方式安装它：

```
npm install karma-ng-scenario 
```

# android-layout - 如何在android中动态发送ListView中的数据。？

> ID：15726755
> 
> 赞同：0
> 
> 时间：2013-03-31T05:48:17.547
> 
> 标签：android-layout

我的问题是如何通过单击按钮发送在对话框的 EditText 中写入的数据并将其显示在 Main Activity 的 LIstView 上。?

```
public class TaskDetailsActivity extends Activity implements OnClickListener{
    String[] timepass= new String[100];

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.taskdetails);
            //timepass[0] = "sidd";
            /*ListView tasklist= (ListView)findViewById(R.id.listview);

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(), R.layout.insideaddtask, R.id.tp, timepass);
            tasklist.setAdapter(adapter);*/
    }
    public void addnewtask(View view)
    {
            showDialog(1);
    }

    @Override
    protected Dialog onCreateDialog(int id)
    {
            Dialog dialog=null;
            switch (id) 
            {
            case 1:        dialog = new Dialog(TaskDetailsActivity.this);
                            dialog.setContentView(R.layout.addtask);

                            Button task_add_ok = (Button)findViewById(R.id.btn_ok);
                            task_add_ok.setOnClickListener(new OnClickListener() 
                            {
                                    @Override
                                    public void onClick(View arg0)
                                    {
                                            EditText writetask = (EditText)findViewById(R.id.txt_writetask);
                                            String data = writetask.getText().toString();
                                            timepass[0] = data;
                                    }
                            });
                    break;

            default:
                    break;
            }
            return dialog;
    }

    @Override
    public void onClick(View v) 
    {
            // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:45:25.883

你可以为这个字符串类型的arrayadapter使用任何适配器......

并使用按钮的 onclick 方法填充列表视图...

下面的链接提供了一个很好的例子......

[http://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)

www.androidhive.info/2011/10/android-listview-tutorial/

# javascript - char 为大写时的子字符串数组元素

> ID：15726759
> 
> 赞同：0
> 
> 时间：2013-03-31T05:49:12.500
> 
> 标签：javascript

我在javascript中的数组有问题。我有这个数组：

```
Subjects[]:
[0] = 'Introduction to interesting things'
[1] = 'Cats and dogs'
[2] = 'I can't believe it's not butter Á machine lord'
[3] = 'I Intergalactic proton powered advertising droids ' 
```

如您所见，在 Subjects[2] 中，有 2 个字符串

```
'I can't believe it's not butter' and 'Á machine lord' 
```

此外，在 Subjects[3] 中，字符串以 'I' 开头，应该是

```
'Á machine lord I'. 
```

有没有办法剪切大写开始的字符串并为字符串创建一个新索引？像这样：

```
Subjects[]:
[0] = 'Introduction to interesting things'
[1] = 'Cats and dogs'
[2] = 'I can't believe it's not butter'
[3] = 'Á machine lord I'
[4] = 'Intergalactic proton powered advertising droids' 
```

我试过使用`.split`没有成功。任何帮助都会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:12:15.863

您不能（可靠地）使用 JavaScript 匹配 Unicode 字符。请参阅：[https ://stackoverflow.com/a/4876569/382982](https://stackoverflow.com/a/4876569/382982)

否则，您可以使用`.split`：

```
subjects = [
    'Introduction to interesting things Cats and dogs',
    "I can't believe it's not butter Á machine lord",
    'I Intergalactic proton powered advertising droids'
];

subjects = subjects.join(' ').split(/([A-Z][^A-Z]+)/).filter(function (str) {
    return str.length;
});

// [Introduction to interesting things, Cats and dogs, I can't believe it's not butter Á machine lord, I, Intergalactic proton powered advertising droids] 
```

# ios - 从 CMSampleBuffer 制作 UIImage

> ID：15726761
> 
> 赞同：18
> 
> 时间：2013-03-31T05:49:13.507
> 
> 标签：ios, core-image, quartz-core

`CMSampleBuffer`这与将 a 转换为 a的无数问题不同`UIImage`。我只是想知道为什么我不能像这样转换它：

```
CVPixelBufferRef pixelBuffer = (CVPixelBufferRef)CMSampleBufferGetImageBuffer(sampleBuffer);
CIImage * imageFromCoreImageLibrary = [CIImage imageWithCVPixelBuffer: pixelBuffer];
UIImage * imageForUI = [UIImage imageWithCIImage: imageFromCoreImageLibrary]; 
```

它似乎更简单，因为它适用于 YCbCr 颜色空间，以及 RGBA 和其他颜色空间。这段代码有问题吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-11-16T18:24:21.417

对于 JPEG 图像：

**斯威夫特 4：**

```
let buff: CMSampleBuffer ...            // Have you have CMSampleBuffer 
if let imageData = AVCapturePhotoOutput.jpegPhotoDataRepresentation(forJPEGSampleBuffer: buff, previewPhotoSampleBuffer: nil) {
    let image = UIImage(data: imageData) //  Here you have UIImage
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-10-22T14:35:15.460

使用 Swift 3 和 iOS 10 AVCapturePhotoOutput：包括：

```
import UIKit
import CoreData
import CoreMotion
import AVFoundation 
```

创建用于预览的 UIView 并将其链接到主类

```
 @IBOutlet var preview: UIView! 
```

创建这个来设置相机会话（**kCVPixelFormatType_32BGRA**很重要！！）：

```
 lazy var cameraSession: AVCaptureSession = {
    let s = AVCaptureSession()
    s.sessionPreset = AVCaptureSessionPresetHigh
    return s
  }()

  lazy var previewLayer: AVCaptureVideoPreviewLayer = {
    let previewl:AVCaptureVideoPreviewLayer =  AVCaptureVideoPreviewLayer(session: self.cameraSession)
    previewl.frame = self.preview.bounds
    return previewl
  }()

  func setupCameraSession() {
    let captureDevice = AVCaptureDevice.defaultDevice(withMediaType: AVMediaTypeVideo) as AVCaptureDevice

    do {
      let deviceInput = try AVCaptureDeviceInput(device: captureDevice)

      cameraSession.beginConfiguration()

      if (cameraSession.canAddInput(deviceInput) == true) {
        cameraSession.addInput(deviceInput)
      }

      let dataOutput = AVCaptureVideoDataOutput()
      dataOutput.videoSettings = [(kCVPixelBufferPixelFormatTypeKey as NSString) : NSNumber(value: **kCVPixelFormatType_32BGRA** as UInt32)]
      dataOutput.alwaysDiscardsLateVideoFrames = true

      if (cameraSession.canAddOutput(dataOutput) == true) {
        cameraSession.addOutput(dataOutput)
      }

      cameraSession.commitConfiguration()

      let queue = DispatchQueue(label: "fr.popigny.videoQueue", attributes: [])
      dataOutput.setSampleBufferDelegate(self, queue: queue)

    }
    catch let error as NSError {
      NSLog("\(error), \(error.localizedDescription)")
    }
  } 
```

在将出现：

```
 override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    setupCameraSession()
  } 
```

在出现：

```
 override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    preview.layer.addSublayer(previewLayer)
    cameraSession.startRunning()
  } 
```

创建一个函数来捕获输出：

```
 func captureOutput(_ captureOutput: AVCaptureOutput!, didOutputSampleBuffer sampleBuffer: CMSampleBuffer!, from connection: AVCaptureConnection!) {

    // Here you collect each frame and process it
    let ts:CMTime = CMSampleBufferGetPresentationTimeStamp(sampleBuffer)
    self.mycapturedimage = imageFromSampleBuffer(sampleBuffer: sampleBuffer)
} 
```

这是将**kCVPixelFormatType_32BGRA** CMSampleBuffer 转换为**UIImage**的代码，关键是**bitmapInfo**必须与 premultfirst 和 alpha info对应的**32BGRA 32 little ：**

```
 func imageFromSampleBuffer(sampleBuffer : CMSampleBuffer) -> UIImage
  {
    // Get a CMSampleBuffer's Core Video image buffer for the media data
    let  imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    // Lock the base address of the pixel buffer
    CVPixelBufferLockBaseAddress(imageBuffer!, CVPixelBufferLockFlags.readOnly);

    // Get the number of bytes per row for the pixel buffer
    let baseAddress = CVPixelBufferGetBaseAddress(imageBuffer!);

    // Get the number of bytes per row for the pixel buffer
    let bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer!);
    // Get the pixel buffer width and height
    let width = CVPixelBufferGetWidth(imageBuffer!);
    let height = CVPixelBufferGetHeight(imageBuffer!);

    // Create a device-dependent RGB color space
    let colorSpace = CGColorSpaceCreateDeviceRGB();

    // Create a bitmap graphics context with the sample buffer data
    var bitmapInfo: UInt32 = CGBitmapInfo.byteOrder32Little.rawValue
    bitmapInfo |= CGImageAlphaInfo.premultipliedFirst.rawValue & CGBitmapInfo.alphaInfoMask.rawValue
    //let bitmapInfo: UInt32 = CGBitmapInfo.alphaInfoMask.rawValue
    let context = CGContext.init(data: baseAddress, width: width, height: height, bitsPerComponent: 8, bytesPerRow: bytesPerRow, space: colorSpace, bitmapInfo: bitmapInfo)
    // Create a Quartz image from the pixel data in the bitmap graphics context
    let quartzImage = context?.makeImage();
    // Unlock the pixel buffer
    CVPixelBufferUnlockBaseAddress(imageBuffer!, CVPixelBufferLockFlags.readOnly);

    // Create an image object from the Quartz image
    let image = UIImage.init(cgImage: quartzImage!);

    return (image);
  } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-31T05:56:48.340

使用以下代码从 PixelBuffer 选项 1 转换图像：

```
CIImage *ciImage = [CIImage imageWithCVPixelBuffer:pixelBuffer];

CIContext *context = [CIContext contextWithOptions:nil];
CGImageRef myImage = [context
                         createCGImage:ciImage
                         fromRect:CGRectMake(0, 0,
                                             CVPixelBufferGetWidth(pixelBuffer),
                                             CVPixelBufferGetHeight(pixelBuffer))];

UIImage *uiImage = [UIImage imageWithCGImage:myImage]; 
```

选项 2：

```
int w = CVPixelBufferGetWidth(pixelBuffer);
int h = CVPixelBufferGetHeight(pixelBuffer);
int r = CVPixelBufferGetBytesPerRow(pixelBuffer);
int bytesPerPixel = r/w;

unsigned char *buffer = CVPixelBufferGetBaseAddress(pixelBuffer);

UIGraphicsBeginImageContext(CGSizeMake(w, h));

CGContextRef c = UIGraphicsGetCurrentContext();

unsigned char* data = CGBitmapContextGetData(c);
if (data != NULL) {
    int maxY = h;
    for(int y = 0; y<maxY; y++) {
        for(int x = 0; x<w; x++) {
            int offset = bytesPerPixel*((w*y)+x);
            data[offset] = buffer[offset];     // R
            data[offset+1] = buffer[offset+1]; // G
            data[offset+2] = buffer[offset+2]; // B
            data[offset+3] = buffer[offset+3]; // A
        }
    }
}
UIImage *img = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-03-10T05:38:51.070

我编写了一个简单的扩展，用于**Swift 4.x/3.x**以`UIImage`从`CMSampleBuffer`.

这也处理缩放和方向，但如果它们适合您，您可以只接受默认值。

```
import UIKit
import AVFoundation

extension CMSampleBuffer {
    func image(orientation: UIImageOrientation = .up, 
               scale: CGFloat = 1.0) -> UIImage? {
        if let buffer = CMSampleBufferGetImageBuffer(self) {
            let ciImage = CIImage(cvPixelBuffer: buffer)

            return UIImage(ciImage: ciImage, 
                           scale: scale,
                           orientation: orientation)
        }

        return nil
    }
} 
```

1.  如果可以从图像中获取缓冲区数据，则继续，否则返回nil
2.  使用缓冲区，它初始化一个`CIImage`
3.  它返回一个用该值`UIImage`初始化的`ciImage`值，以及`scale`&`orientation`值。如果没有提供，则分别使用`up`和的默认值`1.0`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-03T12:50:41.240

**对所有人**：不要使用以下方法：

```
 private let context = CIContext()

    private func imageFromSampleBuffer2(_ sampleBuffer: CMSampleBuffer) -> UIImage? {
        guard let imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer) else { return nil }
        let ciImage = CIImage(cvPixelBuffer: imageBuffer)
        guard let cgImage = context.createCGImage(ciImage, from: ciImage.extent) else { return nil }
        return UIImage(cgImage: cgImage)
    } 
```

他们吃更多的CPU，更多的时间来转换

使用来自[https://stackoverflow.com/a/40193359/7767664的解决方案](https://stackoverflow.com/a/40193359/7767664)

不要忘记为 AVCaptureVideoDataOutput 设置下一个设置

```
 videoOutput = AVCaptureVideoDataOutput()

    videoOutput.videoSettings = [(kCVPixelBufferPixelFormatTypeKey as String) : NSNumber(value: kCVPixelFormatType_32BGRA as UInt32)]
    //videoOutput.alwaysDiscardsLateVideoFrames = true

    videoOutput.setSampleBufferDelegate(self, queue: DispatchQueue(label: "MyQueue")) 
```

转换方法

```
 func imageFromSampleBuffer(_ sampleBuffer : CMSampleBuffer) -> UIImage {
        // Get a CMSampleBuffer's Core Video image buffer for the media data
        let  imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
        // Lock the base address of the pixel buffer
        CVPixelBufferLockBaseAddress(imageBuffer!, CVPixelBufferLockFlags.readOnly);

    // Get the number of bytes per row for the pixel buffer
    let baseAddress = CVPixelBufferGetBaseAddress(imageBuffer!);

    // Get the number of bytes per row for the pixel buffer
    let bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer!);
    // Get the pixel buffer width and height
    let width = CVPixelBufferGetWidth(imageBuffer!);
    let height = CVPixelBufferGetHeight(imageBuffer!);

    // Create a device-dependent RGB color space
    let colorSpace = CGColorSpaceCreateDeviceRGB();

    // Create a bitmap graphics context with the sample buffer data
    var bitmapInfo: UInt32 = CGBitmapInfo.byteOrder32Little.rawValue
    bitmapInfo |= CGImageAlphaInfo.premultipliedFirst.rawValue & CGBitmapInfo.alphaInfoMask.rawValue
    //let bitmapInfo: UInt32 = CGBitmapInfo.alphaInfoMask.rawValue
    let context = CGContext.init(data: baseAddress, width: width, height: height, bitsPerComponent: 8, bytesPerRow: bytesPerRow, space: colorSpace, bitmapInfo: bitmapInfo)
    // Create a Quartz image from the pixel data in the bitmap graphics context
    let quartzImage = context?.makeImage();
    // Unlock the pixel buffer
    CVPixelBufferUnlockBaseAddress(imageBuffer!, CVPixelBufferLockFlags.readOnly);

    // Create an image object from the Quartz image
    let image = UIImage.init(cgImage: quartzImage!);

    return (image);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-02T14:38:53.793

这将与 iOS 10 AVCapturePhotoOutput 类有关。假设用户想要拍摄一张照片，而您致电，并且您的设置包括对*预览*图像`capturePhoto(with:delegate:)`的请求。这是获取预览图像的一种非常有效的方法，但是您将如何在界面中显示它呢？在您的委托方法的实现中，预览图像作为 CMSampleBuffer 到达：

 *```
func capture(_ output: AVCapturePhotoOutput, 
    didFinishProcessingPhotoSampleBuffer buff: CMSampleBuffer?, 
    previewPhotoSampleBuffer: CMSampleBuffer?, 
    resolvedSettings: AVCaptureResolvedPhotoSettings, 
    bracketSettings: AVCaptureBracketedStillImageSettings?, 
    error: Error?) { 
```

您需要将 CMSampleBuffer`previewPhotoSampleBuffer`转换为 UIImage。你打算怎么做？像这样：

```
if let prev = previewPhotoSampleBuffer {
    if let buff = CMSampleBufferGetImageBuffer(prev) {
        let cim = CIImage(cvPixelBuffer: buff)
        let im = UIImage(ciImage: cim)
        // and now you have a UIImage! do something with it ...
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-03-31T03:33:24.863

斯威夫特 5.0

```
if let cvImageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer) {
   let ciimage = CIImage(cvImageBuffer: cvImageBuffer)
   let context = CIContext()

   if let cgImage = context.createCGImage(ciimage, from: ciimage.extent) {
      let uiImage = UIImage(cgImage: cgImage)
   }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-02-16T19:59:46.353

Popigny 回答的 Swift 4 / iOS 11 版本：

```
import Foundation
import AVFoundation
import UIKit

class ViewController : UIViewController {
    let captureSession = AVCaptureSession()
    let photoOutput = AVCapturePhotoOutput()
    let cameraPreview = UIView(frame: .zero)
    let progressIndicator = ProgressIndicator()

    override func viewDidLoad() {
        super.viewDidLoad()

        setupVideoPreview()

        do {
            try setupCaptureSession()
        } catch {
            let errorMessage = String(describing:error)
            print("[--ERROR--]: \(#file):\(#function):\(#line): " + errorMessage)
            alert(title: "Error", message: errorMessage)
        }
    }

    private func setupCaptureSession() throws {
        let deviceDiscovery = AVCaptureDevice.DiscoverySession(deviceTypes: [AVCaptureDevice.DeviceType.builtInWideAngleCamera], mediaType: AVMediaType.video, position: AVCaptureDevice.Position.back)
        let devices = deviceDiscovery.devices

        guard let captureDevice = devices.first else {
            let errorMessage = "No camera available"
            print("[--ERROR--]: \(#file):\(#function):\(#line): " + errorMessage)
            alert(title: "Error", message: errorMessage)
            return
        }

        let captureDeviceInput = try AVCaptureDeviceInput(device: captureDevice)
        captureSession.addInput(captureDeviceInput)
        captureSession.sessionPreset = AVCaptureSession.Preset.photo
        captureSession.startRunning()

        if captureSession.canAddOutput(photoOutput) {
            captureSession.addOutput(photoOutput)
        }
    }

    private func setupVideoPreview() {

        let previewLayer = AVCaptureVideoPreviewLayer(session: captureSession)
        previewLayer.bounds = view.bounds
        previewLayer.position = CGPoint(x:view.bounds.midX, y:view.bounds.midY)
        previewLayer.videoGravity = AVLayerVideoGravity.resizeAspectFill

        cameraPreview.layer.addSublayer(previewLayer)
        cameraPreview.addGestureRecognizer(UITapGestureRecognizer(target: self, action:#selector(capturePhoto)))

        cameraPreview.translatesAutoresizingMaskIntoConstraints = false

        view.addSubview(cameraPreview)

        let viewsDict = ["cameraPreview":cameraPreview]
        view.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "V:|-0-[cameraPreview]-0-|", options: [], metrics: nil, views: viewsDict))
        view.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|-0-[cameraPreview]-0-|", options: [], metrics: nil, views: viewsDict))

    }

    @objc func capturePhoto(_ sender: UITapGestureRecognizer) {
        progressIndicator.add(toView: view)
        let photoOutputSettings = AVCapturePhotoSettings(format: [AVVideoCodecKey:AVVideoCodecType.jpeg])
        photoOutput.capturePhoto(with: photoOutputSettings, delegate: self)
    }

    func saveToPhotosAlbum(_ image: UIImage) {
        UIImageWriteToSavedPhotosAlbum(image, self, #selector(photoWasSavedToAlbum), nil)
    }

    @objc func photoWasSavedToAlbum(_ image: UIImage, _ error: Error?, _ context: Any?) {
        alert(message: "Photo saved to device photo album")
    }

    func alert(title: String?=nil, message:String?=nil) {
        let alert = UIAlertController(title: title, message: message, preferredStyle: .alert)
        alert.addAction(UIAlertAction(title: "OK", style: .default, handler: nil))
        present(alert, animated:true)
    }

}

extension ViewController : AVCapturePhotoCaptureDelegate {
    func photoOutput(_ output: AVCapturePhotoOutput, didFinishProcessingPhoto photo: AVCapturePhoto, error: Error?) {

        guard  let photoData = photo.fileDataRepresentation() else {
            let errorMessage = "Photo capture did not provide output data"
            print("[--ERROR--]: \(#file):\(#function):\(#line): " + errorMessage)
            alert(title: "Error", message: errorMessage)
            return
        }

        guard let image = UIImage(data: photoData) else {
            let errorMessage = "could not create image to save"
            print("[--ERROR--]: \(#file):\(#function):\(#line): " + errorMessage)
            alert(title: "Error", message: errorMessage)
            return
        }

        saveToPhotosAlbum(image)

        progressIndicator.hide()
    }
} 
```

在上下文中查看此内容的完整示例项目：[https ://github.com/cruinh/CameraCapture](https://github.com/cruinh/CameraCapture)*

# azure - 如何以编程方式链接 Azure 云服务中的资源？

> ID：15726765
> 
> 赞同：3
> 
> 时间：2013-03-31T05:49:25.193
> 
> 标签：azure

请让我知道是否有任何方法可以将资源（sql 数据库或存储帐户）以编程方式链接到我的 Azure 云服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:37:52.193

这是一个模糊的问题，但是... Windows Azure SQL 数据库和 Windows Azure 存储都是您只需*使用*的服务- 获取端点并连接。那是链接。非常松散的耦合。对于 SQL 数据库，就像访问本地数据库一样：通过连接字符串打开连接并开始使用数据库。

对于 Windows Azure 存储，只要您有帐户名称和访问密钥，您就可以连接到您创建的任何存储帐户，甚至是不同订阅中的帐户。

如果您正在寻找更具体的内容，则需要发布更具体的问题。

# mysql - 我怎样才能备份mysql数据库表

> ID：15726766
> 
> 赞同：0
> 
> 时间：2013-03-31T05:49:36.520
> 
> 标签：mysql, database

我想将驻留在一台计算机中的 mysql 数据库表移动到另一台计算机。我如何创建我们在 Oracle 中创建的转储文件？我正在使用 exp 命令但无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:51:14.793

使用`mysqldump`.

```
mysqldump -u <username> -p<password> <db_name> > <filename>.sql 
```

要导入，请创建名为 的空数据库`<db_name>`，然后 -

```
mysql -u <username> -p<password> <db_name> < <filename>.sql 
```

导出所有数据库 -

```
mysqldump -u <username> -p<password> --all-databases > <filename>.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:03:19.033

```
mysqldump -u <username> -p<password> -h <hostname> <dbname> <tablename> > filename.sql 
```

现在您可能只需要转储模式。例如，您使用一个名为 like 的命令。

```
mysql> show create table tablename; 
```

这将为您提供创建表的查询。现在由于某种原因，您需要对数据库/数据库中的所有表进行模式转储，您可以像这样使用 -d 选项

```
mysqldump -d -u <username> -p<password> -h <hostname> <dbname> > filename.sql 
```

该`-d`选项的意思是“没有数据”。现在您有了完全转储，没有数据，只有模式。

# jquery-mobile - 关闭jquery mobile中的所有弹出窗口

> ID：15726772
> 
> 赞同：6
> 
> 时间：2013-03-31T05:50:29.623
> 
> 标签：jquery-mobile

我正在使用 JQM，需要关闭任何“打开”的弹出窗口。

有没有办法关闭 JQM 中任何当前“打开”的弹出窗口？

李

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T07:03:18.533

我找到了答案。对于其他想要这样做的人，这里是诀窍：

$('.ui-popup').popup('close');

李

# android - 如何在 android 2.3 中同时禁用通知栏和主页按钮？

> ID：15726773
> 
> 赞同：0
> 
> 时间：2013-03-31T05:50:33.133
> 
> 标签：android, locking, lockscreen

我正在为 android 制作一个锁屏应用程序，因此它需要禁用通知栏和主页按钮。由于 ICS 和其他版本不允许禁用主页按钮，有没有办法在以前的版本中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:59:47.020

您可以将此代码段添加到您的活动中：

```
@override

public void onAttachedToWindow()
{  
       this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);     
       super.onAttachedToWindow();  
} 
```

但在 ICS 和果冻豆中不起作用，并且会让您在应用程序中崩溃。有关更多详细信息，请参阅以下参考资料：

[Android - 是否可以禁用单击主页按钮](https://stackoverflow.com/q/2162182/1043882)

[这 4 行 java 代码在 android 应用程序中意味着什么？](https://stackoverflow.com/q/12560180/1043882)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:00:39.853

在此处检查最后一个答案...这是一种解决方法，但很有意义

[无法禁用特定 Android 设备上的主页按钮](https://stackoverflow.com/questions/10349685/not-able-disable-home-button-on-specific-android-devices)

# javascript - 如何在 JavaScript 中操作 DOM 中的特定字符？

> ID：15726774
> 
> 赞同：2
> 
> 时间：2013-03-31T05:50:41.093
> 
> 标签：javascript, html

假设我在 html 文件的 DIV 中有名为“Hello World”的文本。我想操纵“Hello World”文本中的第六个位置并将结果替换为 DOM，例如使用 innerHTML 或类似的东西。

我的做法是

```
var text = document.getElementById("divID").innerText; 
```

现在不知何故，我得到了文本，并使用 charAt 为特定位置操作结果，并通过替换整个字符串而不只是那个位置元素来替换 html 中的结果。我想问的是我们是否必须每次都替换整个字符串，或者有没有一种方法可以从特定位置提取字符并仅替换该位置的结果而不是整个字符串或 div 内的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:12:41.463

var newtext=text.replace(text[6],'b'); 应该管用。很高兴你问，我不知道这会奏效。

好奇它的工作原理，它也不会替换该字符的所有实例，这很奇怪……我猜用括号表示法访问字符会将字符视为一些“字符”对象，而不仅仅是字符串。

不要引用我的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:12:41.527

是的，您必须用另一个替换整个字符串，因为字符串在 JavaScript 中是不可变的。您可以通过各种方式将其隐藏在函数调用后面，但最终会发生的是构造一个替换旧字符串的新字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T06:12:49.373

如果您只需要在已经存在的字符串中插入一些文本，您应该使用`replace()`. 尝试仅替换一个字符不会真正获得任何好处，因为无论如何它都需要创建一个新字符串（[因为字符串是不可变的](https://stackoverflow.com/questions/51185/are-javascript-strings-immutable-do-i-need-a-string-builder-in-javascript)）。

[jsFiddle](http://jsfiddle.net/Tyriar/xvubY/)

```
var text = document.getElementById("divID").innerText;

// find and replace
document.getElementById("divID").innerText = text.replace('hello world', 'hello big world'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T06:20:06.887

带有 div 的文本实际上是文本节点，因此我们必须通过用新内容替换旧内容来显式地操作它们的内容。

如果您使用的是 jQuery，那么您可以参考以下链接了解可能的技术：

[链接用 jQuery 替换文本节点] [http://www.bennadel.com/blog/2253-Replacing-Text-Nodes-With-jQuery.htm](http://www.bennadel.com/blog/2253-Replacing-Text-Nodes-With-jQuery.htm)。

在幕后，我猜 jQuery 仍然会替换该文本节点的**整个**字符串 ** **

# c# - 首先使用实体 框架代码插入数据

> ID：15726778
> 
> 赞同：2
> 
> 时间：2013-03-31T05:51:16.403
> 
> 标签：c#, asp.net-mvc-3, orm, entity-framework-4.1, entity-framework-5

我正在尝试首先使用 EF 代码和 ASP.NET MVC 3 保存数据

我的 POCO 课

```
public class UserAccount { 
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
   [Required(ErrorMessage="Username is required")]
    public string Username { get; set; }
    [Required(ErrorMessage = "Password is required")]
    public string Password { get; set; }
    public string Department { get; set; }
    public string Category_ID { get; set; }

} 
```

上下文

```
public class OnlineTest : System.Data.Entity.DbContext {
    public DbSet<UserAccount> UserAccounts { get; set; }
    public OnlineTest()
        : base("OnlineTest")
    {

    }
}

public class OnlineTestInitializer : DropCreateDatabaseIfModelChanges<OnlineTest> {
    protected override void Seed(OnlineTest context)
    {
        context.UserAccounts.Add(new UserAccount { Name = "Admin", Username = "admin", Password = "adminpass", Department="All", Category_ID = "1" });
        base.Seed(context);
        context.SaveChanges();
    }
} 
```

我的申请开始

```
protected void Application_Start() {
    Database.SetInitializer(new OnlineTestMVC.Models.OnlineTestInitializer());
    var contex = new OnlineTest();
    contex.Database.Initialize(true);
    AreaRegistration.RegisterAllAreas();

    // Use LocalDB for Entity Framework by default
    Database.DefaultConnectionFactory = new SqlConnectionFactory(@"Data Source=(localdb)\v11.0; Integrated Security=True; MultipleActiveResultSets=True");

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);
} 
```

我可以使用默认的种子数据初始化数据库。我的问题是，我无法使用下面的代码插入数据。

```
var User = new UserAccount { Name = "abc", Username = "abc123", Password = "passwrd", Department = "CS", Category_ID = "2" };

using (var db = new OnlineTest())
{
    db.UserAccounts.Add(User);
    db.SaveChanges();
} 
```

# python - Python计时器未按预期显示文本

> ID：15726779
> 
> 赞同：0
> 
> 时间：2013-03-31T05:51:23.020
> 
> 标签：python, python-2.7, timer

我决定从这个网站上找到的计时器构建，在我对它做任何事情以确保它看起来不错之前，我决定测试它，但是我设置显示的标签不起作用。请注意有些事情可能看起来不合逻辑，但是我只是在尝试各种事情来尝试让它发挥作用

代码：

```
import Tkinter

class Timer(Tkinter.Tk):

    def __init__(self):

        Tkinter.Tk.__init__(self)

        '''Variable Setup'''
        self.hour = Tkinter.StringVar()
        self.minutes = Tkinter.StringVar()
        self.seconds = Tkinter.StringVar()

        '''Setting Up Time Inputes'''
        hourLabel = Tkinter.Label(self, text="Hours: ").pack()
        hourEntry = Tkinter.Entry(self, width=5,textvariable=self.hour).pack()

        minLabel = Tkinter.Label(self, text="Minutes: ").pack()
        minEntry = Tkinter.Entry(self, width=5,textvariable=self.minutes).pack()

        secsLabel = Tkinter.Label(self, text="Seconds: ").pack()
        secsEntry = Tkinter.Entry(self, width=5,textvariable=self.seconds).pack()

        self.timerLab = Tkinter.Label(self, text="", width=10).pack()

        startBut = Tkinter.Button(self, text="Start Timing", command=self.validation).pack()

    def validation(self):

        '''Simple Try to turn it to int value method to validate'''
        hours = self.hour.get()
        minutes = self.hour.get()
        seconds = self.seconds.get()

        try:
            hours = int(hours)
        except ValueError:
            print("Invalid Inputs")

        try:
            minutes = int(minutes)
        except ValueError:
            print("Invalid Inputs")

        try:
            seconds = int(seconds)
        except ValueError:
            print("Invalid Inputs")

        self.timer_init

    def timer_init(self):

        hours = self.hour.get()
        minutes = self.hour.get()
        seconds = self.seconds.get()

        if hours != 0:
            hoursToSeconds = int(hours)*60*60
        else:
            hoursToSeconds = 0
        if minutes != 0:
            minutesToSeconds = int(minutes)*60
        else:
            minutesToSeconds = 0

        self.totalTime = hoursToSeconds + minutesToSeconds + seconds
        self.remaining = 0
        self.countdown(10)

    def countdown(self, remaining = None):
        if remaining is not None:
            self.remaining = remaining

        if self.remaining <= 0:
            self.timerLab.configure(text="Time's Up")
        else:
            self.timerLab.configure(text="%d" % self.remaining)
            self.remaining = self.remaining - 1
            self.after(1000, self.countdown)

if __name__ == "__main__":
    app = Timer()
    app.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:22:23.860

你有很多错别字

1.  `minutes = self.hour.get()`应该`minutes = self.minutes.get()`
2.  `self.timer_init`- 忘记括号
3.  `self.countdown(10)`- 你，可能，想要`self.countdown(self.totalTime)`或类似的东西
4.  `self.totalTime = hoursToSeconds + minutesToSeconds + seconds`- 你应该转换`seconds`为类型`int`

但你也有一个真正的错误：

```
self.timerLab = Tkinter.Label(self, text="", width=10).pack() 
```

`pack()`方法返回`None`。因此，您必须将其更改为

```
self.timerLab = Tkinter.Label(self, text="", width=10)
self.timerLab.pack() 
```

# javascript - Javascript中具有相同名称和不同类型的属性

> ID：15726780
> 
> 赞同：0
> 
> 时间：2013-03-31T05:51:27.270
> 
> 标签：javascript

我可以在 JavaScript 中像下面这样的对象中拥有具有相同名称和不同类型的属性和方法吗？

```
var o = {};
o.sample = {
  x : 10,
  y : 20 }

o.sample = function() {
  return this.sample.x + this.sample.y
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T05:55:56.597

不，您不能，该`sample`方法会覆盖该`sample`属性。

# jquery - NetworkError: 404 Not Found - http://localhost:8080/login

> ID：15726786
> 
> 赞同：0
> 
> 时间：2013-03-31T05:53:47.327
> 
> 标签：jquery, ajax, json

我第一次尝试使用 ajax、json 并且遇到 404 错误。尽管我在 web.xml 中使用 url 模式 /login 定义了 LoginServlet，但问题描述了 /login 未找到。下面是 web.xml 的代码

```
 <servlet>
    <description></description>
    <display-name>LoginServlet</display-name>
    <servlet-name>LoginServlet</servlet-name>
    <servlet-class>com.login.LoginServlet</servlet-class>

  </servlet>
  <servlet-mapping>
    <servlet-name>LoginServlet</servlet-name>
    <url-pattern>/login</url-pattern>
  </servlet-mapping> 
```

下面是 login.js 的代码

```
function Login(){
    console.log("in login function");
    var userId=$('#username').val();
    var pass=$('#password').val();

    if(userId=="" || pass==""){
        alert("UserId or Password cannot be blank!");
        document.getElementById("username").focus();
    }else{
        var url='/login';
        var dataString= 'action=login&userId='+userId+'&pass='+pass;
        $.ajax({
            type: 'POST',
            url: url,
            data: dataString,
            success: function (data){
                var loggedIn=data.html();
                console.log(loggedIn + " " + data);
                $('#loggedIn').val(loggedIn);
                $('#loggedIn').show();
            }
            });
    } 
```

我在 LoginServlet 中使用了服务方法，而不是 doGet() 和 doPost()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:56:17.547

尝试`http://localhost/{web-app-name}/login`

通常，web-app 目录是部署代码的地方。另外，检查输入的端口是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:58:29.280

我猜你正在尝试`login`在 Web 应用程序中访问 servlet，因此它应该是`http://localhost:8080/webApp/login`正确的？由于您尝试访问`localhost:8080/login`，因此收到 404 错误。

您应该将 ajax 调用中的 url 更改为`login`而不是`/login`. 还可以尝试在普通浏览器窗口中访问 url，看看你得到了什么回复..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:01:45.427

您是否尝试过直接查看网址，只是为了检查它是否正常工作？另外，首先尝试一个简单的 HTML 表单，不要使用 Ajax，纯 HTML，只是为了在您发布到该 url 时检查您的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T06:01:56.513

我`/`在我的应用程序中没有这样做。

尝试

```
var url='login'; 
```

# c++ - 在 .pro 文件 QT 中定义带有转义字符的字符串宏

> ID：15726787
> 
> 赞同：1
> 
> 时间：2013-03-31T05:54:17.533
> 
> 标签：c++, qt, macros, definition

我正在尝试在`.pro`QT 项目的文件中定义一个带有字符串值的宏，如下所示：

`DEFINES += DRIVESDB=\\\"C:\\users\\grant\\desktop\\log.db\\\"`

在我的源文件中，我想`DRIVESDB`equal `C:\\users\\grant\\desktop\\log.db`，但是 QT 吐出错误，声称`\u`, `\g`,`\d`和`\l`是无效的转义字符。显然，我在逃避反斜杠时做错了什么。是否可以在宏定义中创建带有反斜杠的字符串？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:56:12.757

使用正斜杠分隔路径。Qt 和 Windows 都理解它。

顺便说一句，Q **T** - 是 QuickTime，而 Q **t** - 是一个库））

# c# - 文件上传功能和消息合约使用

> ID：15726788
> 
> 赞同：0
> 
> 时间：2013-03-31T05:54:42.610
> 
> 标签：c#, .net, wcf, file-upload

我是 WCF 的新手。有一次我正在搜索通过 wcf 将文件上传到 Web 服务器的代码。我找到了一个使用消息合同获取文件详细信息的代码。我只是不明白为什么人们使用消息合同。根据这种情况，编码人员只能使用数据合同而不是消息合同......所以他们为什么使用消息合同尚不清楚。

这是wcf文件上传的源代码链接。看看并告诉我我们可以使用数据合同而不是消息合同来获取文件信息。当必须使用消息契约而不是数据契约时，给出一些好的情况。谢谢

这些是链接

*   [http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)
*   [http://kjellsj.blogspot.in/2007/02/wcf-streaming-upload-files-over-http.html](http://kjellsj.blogspot.in/2007/02/wcf-streaming-upload-files-over-http.html)
*   [http://stefanoricciardi.com/2009/08/28/file-transfer-with-wcp/](http://stefanoricciardi.com/2009/08/28/file-transfer-with-wcp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:59:02.130

数据合约和消息合约的主要区别在于：

**DataContracts**用于描述服务使用的数据类型。这使得可以在元数据中描述类型，以使客户端能够与服务互操作。DataContracts 可用于描述参数或返回值。如果服务仅使用简单类型，则不需要 DataContract。

**MessageContracts**用于显式描述soap 消息格式。它可用于声明各种消息元素的标头。

在一些关键问题上，开发人员还需要控制 SOAP 消息格式。在这种情况下，WCF 提供 Message Contract 以根据要求自定义消息。

很好的链接在这里：http:
[//izlooite.blogspot.co.il/2010/01/wcf-why-use-messagecontract-when.html](http://izlooite.blogspot.co.il/2010/01/wcf-why-use-messagecontract-when.html)
[我可以在 WCF 中使用数据合同进行流式传输吗](https://stackoverflow.com/questions/3574356/can-i-use-datacontracts-in-wcf-for-streaming)

# php - 通过关系连接 Yii 中的两个表

> ID：15726790
> 
> 赞同：0
> 
> 时间：2013-03-31T05:54:51.037
> 
> 标签：php, join, yii

我是 Yii 框架的新手。我的任务是列出两个表的组合数据，并在两个表之间匹配一个键。我有下表结构，

> **日志表**
> 
> id,instance_id,user_id
> 
> **实例表**
> 
> id,instance_id,instance_name

我必须在 CGridview 中显示“日志表”中的所有记录。我需要的是也在那个gridview中显示instance_name。

如何在这两个模型中设置关系以达到结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:35:10.450

假设您有两个名为 Log 和 Instance 的模型：

1.  在 Log.php 中添加方法：

    公共函数关系（）{返回数组（'instance'=>数组（self :: BELONGS_TO，'Instance'，'instance_id'），）；}

2.  将 instance.instance_name 添加到您的 CGridView 小部件。

    ```
    'columns'=>array(
    'id',
    'instance.instance_name',
     ... 
    ```

...

# javascript - 为什么我不能渲染我的视图的两个实例？

> ID：15726792
> 
> 赞同：0
> 
> 时间：2013-03-31T05:55:28.107
> 
> 标签：javascript, jquery, templates, backbone.js

我是backbone.js和JavaScript的菜鸟......我正在尝试使用Jquery和backbone.js构建一个简单的小部件系统，但我似乎无法弄清楚如何获取多个实例我要渲染的视图。但是，我能够获得一个实例来呈现......我的最终目标是构建一个系统，我可以在其中单击一个按钮并让它每次都在屏幕上呈现一个新的小部件。这是我的代码：

```
 <script type="text/template" id="widget-template">
    <div class="widget-wrap">
        <div class="widget-header">
            <span class="widget-title"><%= widgetInfo.get('title') %></span>
            <span class="widget-close"></span>
            <span class="widget-hide"></span>
            <span class="widget-expand"></span>
        </div>
        <div class="widget-container">
            <!-- this is where the widget content goes --> 

        </div>
</div>
    </script>

    <script typ="text/javascript">

        var baseWidget = Backbone.Model.extend({
            defaults: {
                title: "Base",
                author: "AB",
                multipleInstances: false,
                description: "This is the base widget",
                pathToIcon: "",
                state: "Open",
                position: {left:0, top:0}
                }

        });

    var widgetCollection = Backbone.Collection.extend({
        model: baseWidget

    });

    var widgetcol = new widgetCollection();  

        var baseView = Backbone.View.extend({
            el: '.wraper',
            render: function(pos = {left:0, top:0}) {
                var widget = new baseWidget();
                widgetcol.add(widget); 
                console.log(widgetcol.length); 
                widget.set({'position':pos})

                var template = _.template($('#widget-template').html(), {widgetInfo: widget});
                this.$el.html(template);
                this.$el.offset({top:widget.get('position').top, left:widget.get('position').left})
                $('.widget-wrap').draggable({ 
                    handle: ".widget-header",
                    stop: function (event, ui) {
                        widget.set({position: ui.position});
                        console.log(widget.get('position')); 
                    }

                }); 

            }
        });

        BV = new baseView(); 
        BV.render({left:0, top:0}); 

        b = new baseView();
        b.render({left:500, top:0}); 
```

任何帮助将不胜感激，如果我做的事情真的很奇怪，我会喜欢关于如何做得更好的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:21:07.037

当您`el`在视图中设置属性时，您将视图绑定到 dom 中的现有元素，从而限制自己仅创建一个小部件。您真正想要做的是让视图生成元素标记，并将所有生成的小部件附加到某个父级。您可以通过在视图中设置`tagName`,`className`和`id`属性来做到这一点。

例如：

```
var baseView = Backbone.View.extend({
  tagName: 'div',
  className: '.wrapper'
  ...
}); 
```

这将生成一个可以附加到容器`div`的类。`wrapper`

稍后，您定义一个点击事件来每次创建一个新的小部件：

```
$('button').click(function() {
  var newView = new baseView();
  newView.render();
  $('.container').append(newView.el); // now 'el' correspond to the div.wrapper you just created
}); 
```

`this`从视图的渲染方法返回被主干开发人员认为是一种很好的做法。这样你就可以像这样混合最后两行：

```
$('.container').append(newView.render().el); 
```

此外，如果在视图定义之前实例化集合，人们倾向于将集合作为构造函数参数的属性传递：

```
var collection = new widgetCollection();
BV = new baseView({ collection: collection }); 
```

现在您可以通过简单地引用视图内的集合`this.collection`。

# javascript - 一旦它是一个 jquery 对象，清除输入的值

> ID：15726793
> 
> 赞同：-1
> 
> 时间：2013-03-31T05:55:29.640
> 
> 标签：javascript, jquery, input

需要清除一个 jQuery 对象的值。标准方法对我不起作用，我想我错过了一些东西。

HTML

`<input class="file" type="file" />`

JavaScript

```
var file = $input.find('input.file');

    /*blahblahblah stuff*/

    file.value = ''; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:58:53.863

使用 jQuery，您有一种方法来设置值`val(string)`，您也可以使用它来获取输入的值，即不传递字符串...

```
file.val(''); 
```

请参阅 api 文档[http://api.jquery.com/val/#val2](http://api.jquery.com/val/#val2)

# jquery - 使用固定标题偏移锚链接

> ID：15726795
> 
> 赞同：14
> 
> 时间：2013-03-31T05:55:36.100
> 
> 标签：jquery, html, css, header

有一些类似的帖子（例如，[偏移 html 锚以调整固定标题](https://stackoverflow.com/questions/10732690/offsetting-an-html-anchor-to-adjust-for-fixed-header)），但这些解决方案不适用于我的特定情况。

我正在使用 jQuery 来填充目录，特别是这里描述的方法：http: [//css-tricks.com/automatic-table-of-contents/](http://css-tricks.com/automatic-table-of-contents/)。它在文章中搜索 h2 标签，然后创建锚链接。

问题是我使用的是固定标题。当我单击这些锚链接之一时，目标 h2位于标题*下方。*我正在使用的一种临时解决方案是：

```
h2:target{
  padding-top:[header-height];
} 
```

这一直有效，直到您向上滚动，并且内容中间有一个巨大的差距。你们对如何抵消这些锚链接以解释标题有什么想法吗？我想尽可能地保持 HTML 的语义。任何帮助，将不胜感激。

**这是我正在谈论的内容的 jsFiddle：http: [//jsfiddle.net/aweber9/GbNFv/](http://jsfiddle.net/aweber9/GbNFv/)**

谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-31T06:04:30.073

您可以包括`padding-top`然后使用负数`margin-top`来平衡它。

[jsFiddle](http://jsfiddle.net/Tyriar/pp9dg/)

```
h2 {
    padding-top: 70px;
    margin-top: -70px;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-16T10:26:28.737

@Daniel Imms 解决方案很好，但如果标题有上边距，它将被这个负上边距重置。我找到了一个使用伪类的解决方案：

```
h2:before {
    display: block;
    content: " ";
    height: 20px;  /* Give height of your fixed element */
    margin-top: -20px; /* Give negative margin of your fixed element */
    visibility: hidden;
} 
```

因此，这不会重置原始上边距。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-11-26T05:45:56.560

好。我也有这个问题。我可以在这里找到的最好和最快的解决方案是在您的样式标签或 CSS 文件中使用以下代码片段。

```
html
{
  scroll-padding-top: 12vw; /* height of sticky header */
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-22T02:59:18.040

我发现这两个答案一起提供了跨多个浏览器的最强大的解决方案。我将两者都包含在我的 CSS 中...

```
a[name]:not([href]) {
    padding-top: 90px;
    margin-top: -90px;
}
a[name]:not([href]):before {
    display: block;
    content: " ";
    padding-top: 90px;
    margin-top: -90px;
    visibility: hidden;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-18T21:50:19.563

这对我有用。

```
:target {
    display: block;
    position: relative;
    top: -100px;
    visibility: hidden;
} 
```

# asp.net - 使用适用于 Ipad 的新 CSS 将网站定向到 Ipad

> ID：15726796
> 
> 赞同：-1
> 
> 时间：2013-03-31T05:55:38.263
> 
> 标签：asp.net, html, css, ipad, web

我的网站有两个 css 苍蝇，第一个在桌面屏幕中查看站点，第二个在 Ipad 屏幕中查看，知道它们具有相同的 HTML 代码，
我的问题：是否有任何代码来检测 Ipad 和强行取适合它的css文件？？

谢谢

编辑部分：
亲爱的thxxx答案，但css效果不再出现，我想我的代码有问题，我所做的是：

在标题的主页中我添加了ss行：

```
<meta name="viewport" content="width=980" /><br/>
<link href="css/site.css" rel="stylesheet" type="text/css"> 
```

在 site.css 里面我编码：

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 

{
*
    {
        margin::0;
        padding:0;
    }
    html , body
    {
        margin:0;
        padding:0;
        width:100%;
        font-family:"Trebuchet MS";
        font-size:12px;

    }
    .Wrapper{margin:0 auto;}

    .InnerWrapper{width:100%;
        margin:0; 
        padding-top:140px; 
        float:none; 
        display:block; 
        height:auto;}

    .Header{padding-bottom:0; 
        height:140px;
        background: none repeat scroll 0 0 #FFFFFF;
        z-index: 100000;
        position: fixed;
        color: #000000;
        float: left;
        width: 100%;
        box-shadow:0 -1px 7px 5px #888888;}
} 
```

但这不起作用......你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:02:11.187

您可以为此使用媒体查询。只需将下面的 CSS 代码放在 iPad 文件的顶部以及与该设备相关的所有样式中：

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Put your iPad styles here (this covers portrait and landscape modes) */
}

@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Put your iPad styles here (this covers landscape mode)*/
}

@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Put your iPad styles here (this covers portrait mode)*/
} 
```

媒体查询所做的是检查设备宽度以识别它是 iPhone、iPad 还是任何其他移动设备。欲了解更多信息，只需谷歌“媒体查询”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:41:29.440

使用媒体查询来确定屏幕大小。

电话和 iPod touch：

```
<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="../iphone.css" type="text/css" /> 
```

iPhone 4 和 iPod touch 4G：

```
<link rel="stylesheet" media="only screen and (-webkit-min-device-pixel-ratio: 2)" type="text/css" href="../iphone4.css" /> 
```

平板电脑：

```
<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="../ipad.css" type="text/css" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:28:32.223

最好的方法是媒体查询：

[纯粹通过 css 检测 iPhone/iPad](https://stackoverflow.com/questions/3839809/detect-iphone-ipad-purely-by-css)

[仅为 ipad 加载 css 文件](https://stackoverflow.com/questions/4880603/load-css-file-for-ipad-only)

或者用JS或PHP检测USER-AGENT。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T07:36:32.117

我在我的 asp.net 解决方案中添加了这行代码`<header>`：

```
 <% if (Request.UserAgent.ToLower().Contains("ipad"))
    { %>
    <link rel="stylesheet" type="text/css" href="css/siteIpad.css" />

    <% } %> 
```

工作正常，，，，

# macos - 非常基本的 Mac 终端问题

> ID：15726800
> 
> 赞同：-1
> 
> 时间：2013-03-31T05:55:48.360
> 
> 标签：macos, terminal

我是使用 Mac Terminal 的新手，当我尝试导航目录时，我似乎无法弄清楚发生了什么。我在 MS-DOS 方面有经验（从很多年前开始......但我仍然有基本的想法）并且它没有按照我想要的方式工作。

我正在尝试导航到任何目录，但它不允许我这样做。如果我输入：

光盘/应用程序

它给了我错误：

```
-bash: cd/Applications: No such file or directory 
```

我试图从默认目录导航到它，我也尝试在键入后导航到它：

```
sudo -s 
```

我读的是如何进入绝对根目录。我知道这不可能是基本的，但是有人可以指出我做错了什么的正确方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:57:43.383

您需要在命令名称“cd”和它的每个参数之间有一个空格，在本例中是目录名称“/Applications”。所以：

```
cd /Applications 
```

# javascript - 如何在javascript中将变量传递给split()

> ID：15726806
> 
> 赞同：0
> 
> 时间：2013-03-31T05:56:39.647
> 
> 标签：javascript, variables, split, words

我是论坛的新手。非常感谢“stackoverflow”和您的机会。

我有个问题。如何将变量传递给正则表达式进行拆分？

我有这个：

```
var text = "I am new to the forum";
var term = "TO";

var textSplit = text.split(/term/gi); 
```

我喜欢做的是将变量“term”传递给正则表达式，这样你就可以在不匹配的情况下进行划分，但不是如何划分。任何想法更好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:59:53.283

使用正则表达式对象并试试这个：

```
var modifiers = "gi"
var patt = new RegExp(term,modifiers);
var textSplit = text.split(patt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:00:15.240

```
var term = /TO/gi;
var textSplit = text.split(term); 
```

# android - onResume() 后不显示 MediaController

> ID：15726811
> 
> 赞同：0
> 
> 时间：2013-03-31T05:57:42.557
> 
> 标签：android

这是我的视频播放器活动：

```
public class myActivity extends Activity
         implements MediaPlayer.OnPreparedListener, 
                    MediaController.MediaPlayerControl {
....
} 
```

并且在它的`onPause`方法中我不发布`MediaPlayer`并且我只是`pause`它：

```
@Override
protected void onPause() {
    super.onPause();
    lastPlaybackInfo.IsPlaying = mMediaPlayer.isPlaying();
    mMediaPlayer.pause();
    lastPlaybackInfo.SeekPosition = mMediaPlayer.getCurrentPosition();
} 
```

并且在`onResume`

```
@Override
protected void onResume() {
    super.onResume();
        if (mMediaPlayer != null) {
            if (lastPlaybackInfo.IsPlaying) {
                mMediaPlayer.start();
            } else {
                mMediaPlayer.seekTo(lastPlaybackInfo.SeekPosition);
            }
            mMediaController.show();
        }
} 
```

和 onTouchEvent：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
            mMediaController.show();
            return true;
} 
```

我有两个问题：

1.  第一个问题是，一旦应用程序恢复，`MediaController`所绑定的`MediaPlayer`仅显示一次（调用 in `onResume`），之后调用`onTouchEvent`不显示`MediaController`。

2.  第二个是，如果`MediaPlayer`在应用程序暂停之前暂停，则在恢复应用程序后，`SurfaceView`绑定`MediaPlayer`为黑色并且不显示最后渲染的帧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:12:24.817

事实上，我发现如果我们`onResume`延迟运行代码以让布局自行刷新，这两个问题都会得到解决。

就是这样：

```
protected void onResume() {
    super.onResume();
    try {
        if (IsMediaReady && IsSubtitleReady) {
            if (mMediaPlayer != null) {

                handler.postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        if (lastPlaybackInfo.IsPlaying) {
                            mMediaPlayer.start();
                        } else {
                            mMediaPlayer.seekTo(lastPlaybackInfo.SeekPosition);
                        }
                        mMediaController.show();
                    }
                }, 100);

            }
        }
    } catch (NullPointerException e) {
        Log.e(TAG, "Exception in resume");
    }
} 
```

# javascript - 使用 {{linkTo}} 或 transitionTo("path", model); 时未调用 setupController；

> ID：15726815
> 
> 赞同：4
> 
> 时间：2013-03-31T05:57:56.840
> 
> 标签：javascript, ember.js, javascript-framework

使用 {{linkTo}} 时没有调用 setupController 有什么原因吗？我的应用程序中有两个使用 linkTo 的实例，在第二种情况下。它不起作用。我能看到的唯一区别是，在第一种情况下，linkTo 正在循环中使用，而在第二种情况下则没有。以下是非工作代码的相关代码：

```
App.Router.map(function() {
    this.resource("search", { path: "/search/:args" });
});

App.SearchCriteria = Ember.Object.extend({ });

App.SearchRoute = Ember.Route.extend({
    serialize: function(model, params) {
        // .. some code that converts model to a string called args
        return {'args': args}

    },
    model: function(params) {
        // convert args, which is query string-formatted, to an object
        // and then make a App.SearchCriteria object out of it.
        return App.SearchCriteria.create($.deparam(params.args));
    },
    setupController: function(controller, model) {
        controller.set("searchCriteria", model);
    }
}); 
```

在搜索模板中：

```
{{view Ember.Checkbox checkedBinding="searchCriteria.music"}} Music
{{#linkTo search searchCriteria}}Search{{/linkTo}} 
```

我在日志中看到的最后一件事是：

```
Transitioned into 'search' 
```

通常，我会在某个时候看到 setupController 被调用，但它没有发生或出于某种原因。我什至尝试使用 {{action}} 方法调用处理程序，然后使用 transtionTo，但结果相同。

**更新 1：添加更多细节**

工作用例和非工作用例的唯一区别是，在工作用例中，{{linkTo}} 是从与控制器和路由器相同的模板调用的（即，linkTo 在搜索模板中，它是调用 SearchRoute）。在工作情况下，正在 SearchRoute 上调用 linkTo，但来自属于不同路由器的不同模板）。

在对 Ember 代码进行了一些 Chrome 调试后，我发现路由器没有被调用是因为`partitioned.entered`它是空的。在工作情况下，它是非空的。

```
 var aborted = false;
  eachHandler(partition.entered, function(handler, context) {
    if (aborted) { return; }
    if (handler.enter) { handler.enter(); }
    setContext(handler, context);
    if (handler.setup) {
      if (false === handler.setup(context)) {
        aborted = true;
      }
    }
  }); 
```

**更新 2：发现根本问题 - 错误？**

我想我理解为什么处理程序没有被触发的根本原因，我认为这是因为该`partitionHandlers(oldHandlers, newHandlers)`方法不认为模型已经改变，因此不会触发处理程序。

具体来说，这是视图的相关部分：

```
{{view Ember.Checkbox checkedBinding="searchCriteria.music"}} Music
{{#linkTo search searchCriteria}}Search{{/linkTo}} 
```

尽管用户勾选了复选框（从而改变了 的状态`searchCriteria`），但 Ember 认为这`searchCriteria`并没有什么不同，因此什么也不做。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-19T14:39:29.400

我不确定你的问题是什么，但这可能会有所帮助。

`setupController`每次输入路径时都会调用。但是`model`可能不会每次都调用钩子。

请参阅 Ember 指南：[http ://emberjs.com/guides/routing/specifying-a-routes-model/](http://emberjs.com/guides/routing/specifying-a-routes-model/)

> 注意：具有动态段的路由只有在通过 URL 输入时才会调用其模型挂钩。如果路线是通过转换进入的（例如，当使用链接到 Handlebars 帮助器时），则已经提供了模型上下文并且不会执行挂钩。没有动态段的路线将始终执行模型挂钩。

一般来说，如果点击生成的链接`link-to`进入路由，Ember 不会`model`为该路由调用 hook。相反，它将模型（`link-to`参数）传递给该路由。

这里的理念是由于客户端已经拥有模型上下文，Ember 认为没有必要从服务器再次获取它（这是`model`钩子的工作）。

# database - 插入两行：在一个插入失败时无

> ID：15726817
> 
> 赞同：-1
> 
> 时间：2013-03-31T05:58:00.827
> 
> 标签：database, mysqli

我有 2 个插入查询，它们在两个不同的表中插入单行。我想要一个条件，如果一个查询没有被执行，那么其他的也不应该。

我知道交易是要走的路，但我的网络主机已禁用 InnoDB 引擎，因此我无法进行交易。

Myisam 引擎有解决方法吗？

任何帮助高度赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:43:42.637

> *“过早的优化是万恶之源*”。老唐纳德·克努特。

如果你有一些任务要完成，尽你所能去做。让它工作。不要凭空捏造想象中的障碍来与之抗争。你可以用PHP代码来做吗？去吧。说实话，不惜一切代价避免往返数据库并不是*那么可怕的事情。*

所以，用 PHP 编写你的算法并继续前进。

# .net - 绘制形状和闪烁

> ID：15726818
> 
> 赞同：0
> 
> 时间：2013-03-31T05:58:09.680
> 
> 标签：.net, winforms, c++-cli

我正在尝试使用 MouseMove 在面板内的新位置重新绘制相同的矩形它可以工作，但是我有很多来自 Invalidate 的闪烁......我尝试了 Refresh（），但它相同......请帮助我

这是我使用 MouseMove 事件在面板内绘图的代码：

```
if (panel->BackgroundImage == nullptr)
{
    panel->BackgroundImage = gcnew System::Drawing::Bitmap(panel->Width, panel->Height);
}

Graphics^ buffGraphics = Graphics::FromImage(panel->BackgroundImage);

buffGraphics->Clear(panel->BackColor);
buffGraphics->DrawRectangle(System::Drawing::Pens::Blue,10, 10, 50, 50);

panel->Invalidate();
panel->Update(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:31:16.820

将 onForm 加载方法添加到您的 Form 并启用双缓冲：

```
DoubleBuffered = true; 
```

或者，如果您想要另一种方法是转到表单设计视图，右键单击表单并单击属性，然后搜索**DoubleBuffered** 属性并将其设置为 true

此外，任何绘图都应该在 Paint 事件中

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T08:03:54.340

[看起来](http://msdn.microsoft.com/en-us/library/db8dsek8%28v=vs.100%29.aspx) 可能会`Graphics->CopyFromScreen()`有所帮助

# php - SQL 连接错误

> ID：15726822
> 
> 赞同：0
> 
> 时间：2013-03-31T05:58:53.983
> 
> 标签：php, sql, join

能否请一些人帮助解释/编辑此代码以确定为什么没有显示医生 ID。它是来自另一个表的 SQL 连接。显示约会日期和约会时间的第一个 SELECT 语句确实有效，但第二个 SELECT 语句 Doctor_id 不显示医生信息。

```
<!DOCTYPE html>
<?php
session_start();
?>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" href="my.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
        </script>
        <script src="my.js">
        </script>
        <!-- User-generated css -->
        <style>
        </style>
        <!-- User-generated js -->
        <script>
            try {

    $(function() {

    });

  } catch (error) {
    console.error("Your javascript has an error: " + error);
  }
        </script>
     </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                    Back
                </a>
                <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d"class="ui-btn-right">
                 Home  
                </a>
                <h3>
                    Book appointment
                </h3>
           </div>

           <div data-role="content">
                <h3>
                    Select date/time:
                </h3>
                <br />
     <?php
{
    mysql_connect("localhost" , "" , "") or die (mysql_error());
    mysql_select_db("") or die(mysql_error());

    $pid=intval($_SESSION["Patient_id"]); $query = "SELECT Appointment_id, Doctor_id, Patient_id, Appointment_time, Appointment_date FROM Appointment where Patient_id=$pid";
    SELECT * Doctor_id
    FROM Appointment
    JOIN Doctor
    ON Appointment.Doctor_id=Doctor.Doctor_id

    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");
    //this selects the results as rows

    $num = mysql_num_rows ($result);
    //if there is only 1 result returned than the data is ok 
    if ($num == 1) {}
    {
        $row=mysql_fetch_array($result);
        $_SESSION['Appointment_date'] = $row['Appointment_date'];
        $_SESSION['Appointment_time'] = $row['Appointment_time'];
        $_SESSION['Doctor_id'] = $row['Doctor_id'];

    }
}
?>  

        <strong>Dates available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select date--</option>
        <option value="1"><?php echo $_SESSION['Appointment_date'];?></option>
        </select>

        <br />
        <br />

        <strong>Times available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select time--</option>
        <option value="2"><?php echo $_SESSION['Appointment_time'];?></option>>
        </select>

        <strong>Times available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select time--</option>
        <option value="2"><?php echo $_SESSION['Doctor_id'];?></option>>
        </select>

        <br />
        <br />

                <label for="textarea1">
                Message GP
                </label>
                <textarea name="" id="textarea1" placeholder="">
                </textarea>

             </div>
        </div>
    </body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:02:22.000

为了使表格更易于编写，请在表格上添加别名，

```
SELECT a.*, b.Doctor_id
FROM   Appointment a
       INNER JOIN Doctor b
          ON a.Doctor_id = b.Doctor_id 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# algorithm - 查找共线线之间的重叠

> ID：15726825
> 
> 赞同：12
> 
> 时间：2013-03-31T05:59:10.703
> 
> 标签：algorithm, geometry, coordinates, computational-geometry, line-segment

给定两条共线线段 AB 和 CD，我如何找到它们是否重叠？如何定位重叠的起点和终点？

以下是我正在使用的方法。我首先要确保 A < B 和 C < D。

```
if(pa < pc){
  if(pc < pb){
    if(pd < pb){
      //  overlap exists; CD falls entirely within AB
    }
    else {
      //  overlap exists; CB is the overlapping segment
    }
  }
  else {
    //  no overlap exists; AB lies before CD
  }
}
else {
  if(pa < pd){
    if(pb < pd){
      //  overlap exists; AB lies entirely within CD
    }
    else {
      //  overlap exists; AD is the overlapping segment
    }
  }
  else {
    //  no overlap exists; CD lies before AB
  }
} 
```

现在，没有更简单的解决方案来做到这一点吗？

更新：还有另一种方法......将两个段的长度之和与最外点之间的距离进行比较。如果后者较小，则存在重叠。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-04T13:28:55.420

确保 A<B，C<D：

```
if (pb - pc >= 0 and pd - pa >=0 ) { // overlap
    OverlapInterval = [ max(pa, pc), min(pb, pd) ] // it could be a point [x, x]
} // else: not overlap 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T06:10:11.513

确保`A<B`、`C<D`和`A<=C`（您可以通过简单的交换来实现）。然后：

*   如果`B<C`, 段是不相交的
*   如果`B=C`，则交点为单点`B=C`
*   如果`B>C`，则交点为线段`[C, min(B, D)]`

# jquery - 非常简单的 ajax XmlHttpRequest 代码无法正常工作

> ID：15726828
> 
> 赞同：0
> 
> 时间：2013-03-31T05:59:33.307
> 
> 标签：jquery, ajax, xmlhttprequest

我刚刚开始在 W3Schools 网站上学习 ajax。在[W3Schools.com 页面上的 Try it editor 上，](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)当我尝试以下代码时，我得到了正确的响应，正如人们可以从代码中所期望的那样。您也可以尝试将代码复制并粘贴到给定的链接页面“提交代码”上，单击“响应中的更改内容”按钮。

```
 <!DOCTYPE html>
    <html>
        <head>
            <script>
                function loadXMLDoc()
                {
                    var xmlhttp;
                    if (window.XMLHttpRequest)
                    {// code for IE7+, Firefox, Chrome, Opera, Safari
                        xmlhttp=new XMLHttpRequest();
                    }
                    else
                    {// code for IE6, IE5
                        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xmlhttp.onreadystatechange=function()
                    {
                        if (xmlhttp.readyState==0)
                        {
                            document.getElementById("myDiv").innerHTML="0: request not initialized";
                        }if (xmlhttp.readyState==1)
                        {
                            document.getElementById("myDiv").innerHTML="Server connection establish";

                        }if (xmlhttp.readyState==2)
                        {
                            document.getElementById("myDiv").innerHTML="Request has been sent";
                        }if (xmlhttp.readyState==3)
                        {
                            document.getElementById("myDiv").innerHTML="Server is processing the request";
                        }
                        if (xmlhttp.readyState==4 && xmlhttp.status==200)
                        {
                            document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
                        }
                    }
                    xmlhttp.open("GET","http://www.w3schools.com/ajax/ajax_example.asp",true);
                    xmlhttp.send();
                }
            </script>
        </head>
        <body>

            <div id="myDiv"><h2>Let AJAX change this text</h2></div>
            <button type="button" onclick="loadXMLDoc()">Change Content</button>

        </body>
    </html> 
```

但是当我在自己的 html 文件中尝试相同的代码并单击“更改内容”按钮时，我会按此顺序更改竞争（请忽略类型错误）

*   服务器连接建立
*   请求已发送。

之后没有任何反应。我已连接到 Internet，也可以在浏览器 (Firefox) 中打开链接。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:03:52.800

您无法使用本地 html 文件中编写的代码中的 ajax 访问另一个域地址。跨域 ajax 请求要求您使用`jsonp`来访问该数据。

在第一种情况下，由于您在发出 ajax 请求时已经在 w3schools 域内，因此它将起作用。

# ruby-on-rails - 一组 6 个数字连字符分隔的正则表达式是什么？

> ID：15726829
> 
> 赞同：0
> 
> 时间：2013-03-31T05:59:42.440
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3, validation

我正在使用 Ruby on Rails，并且我“是新手”/“不记得如何”匹配正则表达式。我想[`validates_format_of`](http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_format_of)用正则表达式匹配以下字符串：

```
122-162-281-5-0-221
122-162-281-05-00-221
122-162-281-005-000-221 
```

注意：正则表达式应匹配一组*6 个*数字（每个数字最小 1 位，最大 3 位）连字符分隔。

什么是正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:07:46.933

Tudor Constantin 的回答可以简化：

```
/^(?!-)(?:(?:^|-)\d{1,3}){6}$/ 
```

编辑以删除进一步的重复。

再次编辑以禁止前导连字符。此编辑需要前瞻，某些引擎不支持。但是，它确实只使用了固定宽度的前瞻，从而最大限度地提高了与支持前瞻的引擎的兼容性。

解释最新的模式：

`^`指定字符串（或行）的开头。

`(?!-)`利用前瞻来禁止匹配第一个字符是连字符的字符串。

`(?:(?:^|-)\d{1-3}){6}`指定模式的重复，该模式必须是字符串或连字符的开头，后跟一到三个数字，重复六次。

`$`确保字符串（或行）在之前的重复之后结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:33:50.877

并不是说前瞻在技术上存在任何问题，但我认为为了直观起见，我会将 Tudor Constantin 的建议缩短为：

```
/^\d{1,3}(?:-\d{1,3}){5}$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:03:38.423

尝试：

```
/^\d{1,3}-\d{1,3}-\d{1,3}-\d{1,3}-\d{1,3}-\d{1,3}$/ 
```

重构，不再重复：

```
/^(?:\d{1,3}(?:-|$)){6}/ 
```

这个想法与 eyelidlessness 的想法相同，但测试`-`字符串末尾是否存在

编辑删除匹配端`-`：

```
/^(?:\d{1,3}(?:-(?!$)|$)){6}/ 
```

不得不添加*直观*的负面预测。如果我是你，我会坚持重复的版本——未来你会感谢你的。

# c++ - 使用向量迭代器时的 EXC_BAD_ACCESS？

> ID：15726830
> 
> 赞同：0
> 
> 时间：2013-03-31T05:59:43.787
> 
> 标签：c++, iterator, exc-bad-access

我有一个用户定义类型的向量（矩阵）向量`my_type`，它是一个结构，包含整数 a、b 和 c。我希望定义一个函数，通过 b 的值查找该矩阵的元素并删除该元素。由于该函数不知道 c 的值，所以我定义了一个迭代器`it`来首先找到这个元素，然后将其指针地址设置为迭代器`it_found`，以便在 erase() 方法中使用它。但是，该程序在使用`Program received signal EXC_BAD_ACCESS, Could not access memory,`时产生了错误`it_found`。是什么导致了这个错误？

```
bool remove_V(int a, int b) {
    typename std::vector<my_type>::iterator it;  
    typename std::vector<my_type>::iterator it_found;  

        for(it = V.at(a).begin(); it != V.at(a).end(); ++it){
            if ((*it).b ==  1) {
                it_found == it;
                std::cerr << (*it).b << "\n";
                std::cerr << (*it_found).b << "\n";
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:03:55.123

我认为：

```
it_found == it;
        ^^^^ 
```

应该：

```
it_found = it;
        ^^^ 
```

否则，您将取消引用不指向任何有效内容的迭代器。
此外，您可能想要使用**[Remove-Erase Idiom](http://en.wikibooks.org/wiki/More_C++_Idioms/Erase-Remove)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T06:07:01.643

您没有初始化`it_found`任何值，因此`(*it_found)`会引发错误。我想你的意思是：

```
it_found = it; 
```

代替

```
it_found == it; 
```

# asp.net - 如何使用 facebook api 从我的墙上提供图片和视频

> ID：15726839
> 
> 赞同：0
> 
> 时间：2013-03-31T06:01:09.283
> 
> 标签：asp.net, facebook, facebook-graph-api

我正在使用 Facebook API

[https://graph.facebook.com/PAGE_ID/feed?access_token=ACCESS_TOKEN](https://graph.facebook.com/PAGE_ID/feed?access_token=ACCESS_TOKEN)

它不会从新闻提要中获取所有内容，例如图片、朋友在我的墙上分享的视频、我被标记的帖子。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:09:55.827

您需要为 Graph Api 提供正确的 GET 变量，如下所示：

```
734778xxx?fields=id,name,photos.fields(images,icon),email,posts.fields(comments.fields(message)) 
```

转到此页面并自行测试 [https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

如果您需要单独的令牌，您可以构建这样的东西，

```
<?php 
 require_once("facebook.php");//download & more info here https://developers.facebook.com/docs/reference/php/

 $config = array(
   'appId' => FBAPPID,
   'secret' => FBAPPSECRET,
);
$facebook = new Facebook($config);
$fbuserid = $facebook->getUser();

$params = array(
"scope" => "read_stream,email,user_about_me", //here you ask for the parameters you need
"redirect_uri" => "http://www.yoursite.com/"
);

//getting the info
$user_profile = $facebook->api('/me','GET');
$fname = $user_profile["first_name"];
$lname = $user_profile["last_name"];
$email = $user_profile["email"];

?> 
```

# php - Drupal 7 图像未显示在文章中

> ID：15726840
> 
> 赞同：0
> 
> 时间：2013-03-31T06:01:19.090
> 
> 标签：php, image, drupal, content-management-system, cck

我的配置：安装 MAMP，然后将 drupal 复制到 htdocs 文件夹。配置drupal。添加了 CKEditor、Transliteration 和 CKEditor SWF 模块。我创建了一篇文章并从创建文章页面上传了一张图片。图片上传成功，但没有显示在任何地方。看起来它正试图从错误的位置获取图像。

页面上的图片 URL：localhost:8888/drupal/sites/default/files/styles/medium/public/field/image/dsc_1233_2.jpg

实际图像位置：localhost:8888/drupal/sites/default/files/field/image/dsc_1233_2.jpg

以上 2 个 URL 是不同的。我应该改变什么才能使这项工作？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:28:41.660

我想你必须安装 IMCE 模块[http://drupal.org/project/imce](http://drupal.org/project/imce) ...如果这不起作用，请检查... [http://drupaldome.com/how-setup-ckeditor-imce](http://drupaldome.com/how-setup-ckeditor-imce)

# c++ - libpqxx 在 DEBUG 模式下抛出异常

> ID：15726841
> 
> 赞同：1
> 
> 时间：2013-03-31T06:01:32.273
> 
> 标签：c++, visual-c++, c++11, postgresql-9.2, libpqxx

我有一个使用 libpqxx的**MFC项目。**所有设置均为默认设置。

发布模式按我的预期正常工作。但是当我切换到调试模式时，它显示一个异常并说调试断言：

最有趣的是，如果我使用共享 DLL 而不是静态（当然是在调试中）它可以工作！

基本上，使用静态库进行调试会显示此异常/错误。如果我切换到共享 DLL，它会再次工作。当然我可以使用共享作为调试和静态作为发布，但这**是正确的**吗？

注意：这个项目是基础和新鲜的。我没有从配置管理器更改任何配置。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T15:53:03.133

好吧，我不确定是否`libpqxx`使用 MFC（以及哪个？）。我怀疑您正在从一个堆中分配一些内存，并从另一个堆中取消分配它。混合 MFC 版本以及 MFC 的静态/非静态混合将导致此断言。

不要将其视为在发布版本上*工作！*它只是不为自己辩护（即现在显示任何断言消息）。最好的办法是找出这个问题的原因，第一个是查找调用堆栈（在这个断言对话框上点击重试）。

看，如果`libpqxx`依赖于 MFC，或者它不允许混合静态版本的 MFC。您可以查看 的文档`libpqxx`，和/或使用 Dependency Walker 查看库是否正在使用 MFC。

# python - Python CGI - 脚本输出生成页面的源

> ID：15726843
> 
> 赞同：0
> 
> 时间：2013-03-31T06:01:48.237
> 
> 标签：python, html, apache, cgi

我有一个用 python 编写的 CGI 脚本，用作我正在创建的网站的主页。一切正常，除了当您查看页面而不是查看它输出的页面时，您会看到页面的源代码，这是为什么呢？我并不是说它向我展示了 .py 文件的源代码，它向我展示了所有`print`ed 信息，就好像我在记事本中查看 .htm 文件一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:17:28.963

在打印任何内容之前添加以下内容

打印“内容类型：文本/html”

可能您的脚本没有被执行。你的python脚本是可执行的吗？检查 cgi-bin 目录下是否有脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:16:30.263

默认的内容类型是文本，如果您忘记在您的 CGI 文件中发送适当的标题，您最终会得到您所看到的内容。

# jquery - 为什么要这样写代码Jquery

> ID：15726850
> 
> 赞同：9
> 
> 时间：2013-03-31T06:02:40.827
> 
> 标签：jquery

为什么要这样写代码Jquery？

```
(function ($) {
    $(function () {
     .......
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T06:06:12.587

这称为闭包以避免与正在使用的其他库发生冲突`$`。这样，您可以确保`$`在该函数中使用并`jQuery`作为参数传递。

```
(function ($) {
   $(function () {
    .......
   });
})(jQuery); //<----passing jquery to avoid any conflict with other libraries. 
```

### 来自文档：

> 将 jQuery 传递给将其映射到美元符号的 IIFE（立即调用函数表达式）是一种最佳实践，因此它不能在其执行范围内被另一个库覆盖。

### [这通常用于创作插件。在这里阅读更多](http://docs.jquery.com/Plugins/Authoring)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-31T06:05:24.843

*   `$(document).ready(function(){ ... });` **或者** `$(function(){...});`

    这指定了**在 DOM 完全加载时执行**的函数。传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。当使用依赖 CSS 样式属性值的脚本时，在引用脚本之前引用外部样式表或嵌入样式元素很重要。[阅读更多](http://api.jquery.com/ready/)

*   `(function(){ ... })();`

    这是一个在浏览器解释您**的**`ecma-/javascript`. 因此，您不太可能在`DOM elements`此处成功采取行动。它将在 Javascript 中遇到时立即执行。

[阅读更多](http://lostechies.com/derickbailey/2012/05/22/function%E2%80%A6-vs-function%E2%80%A6-or-domready-vs-the-module-pattern/)

[类似问题](https://stackoverflow.com/questions/3259496/jquery-document-ready-vs-self-calling-anonymous-function)

[类似问题 2](https://stackoverflow.com/questions/11171754/jquery-plugins-and-global-variables)

# 您的代码说明

```
(function ($) { <--  $ is just an alias for jQuery
    $(function () {
     .......  <--- Here you can use the $ without an issue.
    });
})(jQuery); <--- This is done usually to avoid conflicts. Passing jQuery object here 
```

如果您查看 jQuery 核心。它说

```
// Expose jQuery to the global object
window.jQuery = window.$ = jQuery; 
```

[阅读更多](http://learn.jquery.com/using-jquery-core/avoid-conflicts-other-libraries/)

[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T06:09:22.930

```
(function ($) {
  //
})(jQuery); 
```

这种类型的模块模式在那里非常常用。它调用自己传递对 jQuery 的引用，从而更快地访问变量，因为它现在位于函数的范围内，并且还可以防止全局污染。

第二个：

```
$(function () {
    .......
}); 
```

加载 DOM 后运行匿名函数，确保在执行任何代码之前一切就绪。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T06:10:14.630

其他一些库也将`$`用作变量名，以确保您使用的是 jQuery 而不是其他 lib var，您将把它传递给一个函数并`$`在该范围内命名它。

```
(function ($) { //<--- naming jQuery to $
   $(function () {//now we are sure that we are using $  as jQuery  
    .......
   });
})(jQuery); //<----passing jquery . 
```

# asp.net - 登录状态维护

> ID：15726851
> 
> 赞同：0
> 
> 时间：2013-03-31T06:02:45.627
> 
> 标签：asp.net

我正在为 ASP.NET 中的测试和论坛开发一个网站。我想在整个网站上保持用户登录状态，直到用户注销。用户可以随时登录，不需要在打开网站的时候登录。我有这么多页面，所以有没有简单的方法来检查天气用户是否在每个页面上登录并在每个页面上相应地显示他的状态。

请帮助解决我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:06:05.863

你可以使用`SESSION`相同的。

很好的解释，[**这里**](http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net)有很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:24:40.840

如果您是 asp.net 的新手，您可以为此目的使用 session。

当用户单击登录按钮时，只需保存用户 ID 或用户名或您在会话中想要的任何内容。

**在登录按钮上**

```
 Session["User"] = username.ToString();
   //you will get user id or username from the database. you can store anything in this session. its your wish. 
```

现在在母版页的页面加载中只需检查 Session 是否存在。因为每当内容页面回发时，母版页的页面加载都会触发。

**母版页上的 OnPageload：**

```
If(Session["user"] != null) // it should be first statement in page load event
{
  //your code
} 
```

在注销按钮上，只需删除会话或将会话值设置为 null。

它是维护用户登录的最简单且无需代码的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:31:11.673

您需要实现 ASP.NET 成员资格。会员资格基本上会迅速创建一个安全系统，而您无需创建自己的。

搜索它以找到大量资源，自 ASP.NET 2.0 以来并没有太大变化。例如，[http://www.troyhunt.com/2011/10/5-minute-wonders-aspnet-membership.html](http://www.troyhunt.com/2011/10/5-minute-wonders-aspnet-membership.html)

这将很快让您拥有安全的部分和用户权限。

就您的实际问题而言，确定某人是否登录的唯一机制是使用 ASP.NET Membership。您可以使用 Windows 身份验证，但如果没有额外的工作，您将无法轻松获取用户信息，例如他们的姓名。

如果您使用 ASP.NET Membership 路由，您将使用表单身份验证，这将有两种状态，匿名（未登录）和登录。

要显示某人已登录，您将使用该`LoginView`控件。[http://www.codeguru.com/csharp/csharp/cs_misc/security/article.php/c13127/ASPNET-Tip-Using-the-LoginView-Control.htm](http://www.codeguru.com/csharp/csharp/cs_misc/security/article.php/c13127/ASPNET-Tip-Using-the-LoginView-Control.htm)

```
<asp:LoginView ID="ctlRightNavbar" runat="server">
    <AnonymousTemplate>
        Not logged in
    </AnonymousTemplate>
    <LoggedInTemplate>
        Welcome <asp:Label ID="lblName" runat="server" />
    </LoggedInTemplate>
</asp:LoginView> 
```

在后面的代码中，您将使用 Membership 详细信息来获取用户信息，特别是使用[MembershipUser](http://msdn.microsoft.com/en-us/library/za59c2aa.aspx)类。

```
// get the logged in user
MembershipUser user = Membership.GetUser();
// user will be null if not logged in
if (user != null)
    // display the user details
    lblName.Text = user.UserName; 
```

# zend-framework - 在zend框架中调用自定义类

> ID：15726857
> 
> 赞同：2
> 
> 时间：2013-03-31T06:03:38.710
> 
> 标签：zend-framework

我有一个非常粗略的项目，部分是在 zend 框架（不是 ZF2）中完成的。' **application'**、**'library'**和**'public'**文件夹在同一个根目录下。现在我需要在**'zend'**所在的同一级别的*'library'文件夹中创建一个库***'Anil'**。

 ****我通过在bootstrap.php*中添加以下行来尝试它：

```
protected function _initAutoload()
{   
  Zend_Loader_Autoloader::getInstance()->registerNamespace('Anil');    
} 
```

然后在**“Anil”**文件夹中，我创建了**Anil_Test.php**：

```
class Anil_Test{

} 
```

在控制器文件中，我添加了以下几行：

```
$myTest= new Anil_Test(); 
```

但它显示了一个致命错误：

**致命错误：在.....中找不到类“Anil_Test”**

我知道我在这里做了一些愚蠢的事情，因为这是我在 Zend Framework 中的第一个项目。我相信问题出在文件夹结构上。我对此无能为力，因为 50% 的项目已经编码。

提前致谢。安尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:39:48.190

文件名应该是`library/Anil/Test.php`. ;-)***

# android - 具有多个参数的 SQLite 查询

> ID：15726860
> 
> 赞同：0
> 
> 时间：2013-03-31T06:03:53.170
> 
> 标签：android, sql, sqlite

我正在尝试在 SQLite 表中查询在开始时间和结束时间之间具有一周中同一天的行，如下所示：

```
 String whereClause = String.format("%s = '?' AND %s <= '?' %s > '?'",
            Shift.PROP_DAY_OF_THE_WEEK, Shift.PROP_START_TIME,
            Shift.PROP_END_TIME);
    String[] whereargs = new String[] { String.valueOf(dow), time, time };
    Cursor cursor = db.rawQuery(whereClause, whereargs); 
```

但是我收到以下 Logcat 错误。

```
03-30 22:46:02.827: E/AndroidRuntime(11507): android.database.sqlite.SQLiteException: near "dayOfTheWeek": syntax error (code 1): , while compiling: dayOfTheWeek = '?' AND startTime <= '?' endTime > '?' 
```

我添加了单引号（'）来包围问号（？）。如果没有单引号，它也不起作用。我已经添加了它们，因为 sql 语句可能对是否有引号很敏感。如果我走错了路，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:51:21.763

除了缺少的`AND`，您还在参数标记周围放置了字符串分隔符，这会阻止它们被识别为参数。 `'?'`只是一个包含问号的字符串；对于参数，使用普通的`?`：

```
String.format("%s = ? AND %s <= ? AND %s > ?", ...); 
```

此外，在使用时`rawQuery`，您必须写出整个 SQL 查询。要像您尝试使用的那样使用 where 子句，您需要`query`：

```
Cursor cursor = db.query("MyTableName",
                         null,  // or column list
                         whereClause, whereargs,
                         null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:07:38.757

`"%s = '?' AND %s <= '?' %s > '?'"`

忘记了第二个和第三个条件之间的 AND

`"%s = '?' AND %s <= '?' AND %s > '?'"`

然后测试它是否需要''

# asp.net - 在 asp.net 中绑定一个值

> ID：15726869
> 
> 赞同：0
> 
> 时间：2013-03-31T06:05:50.873
> 
> 标签：asp.net

我想在文本字段中绑定非零值。

我是这样写的：

```
 <asp:TextBox ID="txtHaulZoneCodeLEM" runat="server" CssClass="cagText" Text='<%# Bind("HaulZoneCodeLEM") %>'></asp:TextBox 
```

如何确保该字段中的值非零？我不想在这个文本字段中出现零。

我是这样尝试的：它给出了语法错误：“预期标识符”

```
<asp:TextBox ID="txtHaulZoneCodeLEM" runat="server" CssClass="cagText" Text='<%# Eval("HaulZoneCodeLEM") != 0 ? Eval("HaulZoneCodeLEM") : "" %>'></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:38:49.733

试试这个

> <%# Eval("HaulZoneCodeLEM").ToString().Equals("0") ? "" :Eval("HaulZoneCodeLEM").ToString() %> 希望对您有所帮助

# php - 将数组推送和追加到php中的关联数组中

> ID：15726879
> 
> 赞同：0
> 
> 时间：2013-03-31T06:07:39.833
> 
> 标签：php

如何在“邻接”键值对中推送数组，该键值对应该有一个包含“数组”的封装数组（即。array（（“nodeTo”=>“$to”），（“nodeTo”=>“$to "))) 而不覆盖它们并将它们附加到类似于“+=”。对关键“邻接”的推动似乎也没有增加价值。

```
 $node[] = array(
        "adjacencies" => array(), //inside this array should go all the arrays seprated by commas.
        "data" => array(
                "color" => $color1,
                "type" => $type1 
            );

 // this push doesnt seem to detect the adjacencies value and doesnt really push the array inside of the container array. I also tried $node["adjacencies"][]=array("nodeTo" => "$to"); but it didnt work
    $node["adjacencies"]=array("nodeTo" => "$to");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:11:05.597

顺便说一句，您`$node`在第二个语句中使用的方式，我认为您的意思是：

```
$node = array( 
```

不是：

```
$node[] = array(
//   ^^ 
```

然后，您可以通过执行以下操作来推送数组：

```
$node['adjacencies'][] = array('nodeTo' => $to); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:12:09.483

如果您想要多个数组`'adjacencies'`，请将它们附加到数组的末尾：

```
$node[0]['adjacencies'][] = array("nodeTo" => "$to"); 
```

当然，您需要知道要`$node`使用哪个索引（如果有多个节点）。

**编辑：**

阅读评论后，看起来 OP 所需的数组结构是这样的：

```
$node = array(
  'adjacencies' => array(),
  'data' => array(
    'color' => $color1,
    'type' => $type1,
  );
); 
```

因此，要将其他节点附加到`adjacencies`数组中，您可以这样做：

```
$node['adjacencies'][] = array('nodeTo' => "$to"); 
```

# php - mysql查询返回“指定参与者的对话ID”

> ID：15726882
> 
> 赞同：1
> 
> 时间：2013-03-31T06:08:32.447
> 
> 标签：php, mysql, message

我正在构建表格以在我的 OA 系统中创建一个对话框外观的用户消息功能。

我得到了一个表格，指示像这样的 dialog_user 对话的参与者：

```
dialog  user
1       1
1       2
2       1
2       3 
```

现在用户 1 向用户 2 发送消息。所以我需要创建一条消息，并将消息插入到用户 1 和用户 2 参与的对话框中。

如何在一个或有限的查询中找到对话 ID？

此外，我还在实现一对多的消息发送功能。每个接收者都会在他和发送者参与的对话中看到消息。所以我需要找到发送者和每个接收者参与的所有对话，并将新的消息 ID 插入其中。这可以在一个漂亮的查询中完成吗？

我考虑过保存参与者内爆排序的字符串，例如

```
dialog  users
1       1,2
1       1,3 
```

但我认为这不是一个好习惯，因为*用户*字段应该是 varchar 并且长度有限（比如 255）。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:47:44.117

```
SELECT d1.dialog
FROM dialog_user d1
JOIN dialog_user d2 USING (dialog)
WHERE d1.user = 1
AND d2.user = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:25:38.107

可能是这样的（假设 DialogId/UserId 已编入索引）：

```
SELECT
    DISTINCT(DialogId)
FROM
    Dialogs d
WHERE
    EXISTS (SELECT NULL FROM Dialogs p1 WHERE p1.DialogId = d.DialogId AND p1.UserId = 1)
    AND EXISTS (SELECT NULL FROM Dialogs p1 WHERE p1.DialogId = d.DialogId AND p1.UserId = 2) 
```

# ruby-on-rails - 预期的 css“标题”和文本“Ruby on Rails 教程示例应用程序 |

> ID：15726883
> 
> 赞同：1
> 
> 时间：2013-03-31T06:09:03.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, railstutorial.org

我正在阅读 Michael Hartl 编写的[Ruby on Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)，但我不断收到一个我无法弄清楚的失败测试。如果您想要[github 上的代码，这里是代码的链接](https://github.com/mcadamsrails/sample_app.git)

这是我遇到的失败：

```
1) Static pages should have the right links on the layout
[31mFailure/Error:[0m [31mpage.should have_selector 'title', text: full_
title('About Us')[0m
[31mexpected css "title" with text "Ruby on Rails Tutorial Sample App |
About Us" to return something[0m    
[36m     # ./spec/requests/static_pages_spec.rb:52:in `block (2 levels) in <top
(required)>'[0m
Finished in 0.3432 seconds
[31m15 examples, 1 failure[0m

Failed examples:
[31mrspec ./spec/requests/static_pages_spec.rb:49[0m [36m# Static pages shoul
d have the right links on the layout[0m 
```

**规范/请求/static_pages_spec.rb**

```
require 'spec_helper'

describe "Static pages" do

subject { page }

shared_examples_for "all static pages" do
 it { should have_selector('h1',    text: heading) }
 it { should have_selector('title', text: full_title(page_title)) }
end

describe "Home page" do
before { visit root_path }

let(:heading)    { 'Sample App' }
let(:page_title) { '' }

it_should_behave_like "all static pages"
it { should_not have_selector 'title', text: '| Home' }
end

describe "Help page" do
before { visit help_path }

let(:heading)    { 'Help' }
let(:page_title) { '' }

it_should_behave_like "all static pages"  
end

describe "About page" do
before { visit about_path }

let(:heading)    { 'About Us' }
let(:page_title) { '' }

it_should_behave_like "all static pages"
end

describe "Contact page" do
before { visit contact_path }

let(:heading)    { 'Contact' }
let(:page_title) { '' }

it_should_behave_like "all static pages"
end

it "should have the right links on the layout" do
visit root_path
click_link "About"
page.should have_selector 'title', text: full_title('About Us')
click_link "Help"
page.should have_selector 'title', text: full_title('Help')
click_link "Contact"
page.should have_selector 'title', text: full_title('Contact')
click_link "Home"
click_link "Sign up now!"
page.should have_selector 'title', text: full_title('Sign Up')
click_link "sample app"
page.should_not have_selector 'title', text: full_title(' | Home')
end
end 
```

**app/helpers/application_helper.rb**

```
module ApplicationHelper
def full_title(page_title)
    base_title = "Ruby on Rails Tutorial Sample App"
    if page_title.empty?
        base_title
    else
        "#{base_title} | #{page_title}"
    end
end
end 
```

**app\views\static_pages\home.html.erb**

```
<div class="center hero-unit">
<h1>Welcome to the Sample App</h1>

<h2>This is the home page for the
<a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
sample application.</h2>

<%= link_to "Sign up now!", signup_path, class: "btn btn-large btn-primary" %>
</div>

<%= link_to image_tag("rails.png", alt: "Rails"), 'http://rubyonrails.org/' %> 
```

**应用程序/视图/布局/_footer.html.erb**

```
<footer class= "footer">
<small>
    <a href="http://railstutorial.org/">Rails Tutorial</a> by Michael Hartl
</small>
<nav>
    <ul>
        <li><%= link_to "About",    about_path %></li>
        <li><%= link_to "Contact",  contact_path %></li>
        <li><a href="http://news.railstutorial.org/">News</a></li>
    </ul>
</nav>
</footer> 
```

**应用程序/视图/布局/_header.html.erb**

```
<header class="navbar navbar-fixed-top navbar-inverse">
<div class="navbar-inner">
<div class="container">
  <%= link_to "sample app", root_path, id: "logo" %>
  <nav>
    <ul class="nav pull-right">
      <li><%= link_to "Home",   root_path %></li>
      <li><%= link_to "Help",    help_path %></li>
      <li><%= link_to "Sign in", signup_path %></li>
    </ul>
  </nav>
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:52:44.373

+1 用于提供指向您的 Github 帐户的链接，因为不幸的是，您提供的代码并未指出问题出在哪里。

问题是在您的**app/views/layouts/application.html.erb**文件中，您有以下行：

```
<title><%= full_title(yield(:title)) %></title> 
```

但是在[**app/views/static_pages**](https://github.com/mcadamsrails/sample_app/tree/master/app/views/static_pages)[下的](https://github.com/mcadamsrails/sample_app/tree/master/app/views/static_pages)**视图中，您还没有`provide`d`:title`被编辑的 s `yield`。例如，在您的**app/views/static_pages/about.html.erb**文件中，您需要添加以下行：**

 **```
<% provide(:title, 'About Us') %> 
```

您还需要将相关行添加到**app/views/static_pages**下的其他视图中，以使测试通过。有关详细信息，请参阅[Rails Tutorial github repo中的](https://github.com/railstutorial/sample_app_2nd_ed/tree/master/app/views/static_pages)[**static_pages**](https://github.com/railstutorial/sample_app_2nd_ed/tree/master/app/views/static_pages)[目录下的视图](https://github.com/railstutorial/sample_app_2nd_ed/tree/master/app/views/static_pages)**。****

# cocos2d-iphone - cygwin 无法打开 .sh 文件

> ID：15726885
> 
> 赞同：0
> 
> 时间：2013-03-31T06:09:11.173
> 
> 标签：cocos2d-iphone, cygwin

我使用 cocos2d 创建一个 Android 投影。

其中一个步骤是使用 cygwin 打开 build_native.sh。当执行 LS 命令时，我可以看到 build_native.sh 文件存在。但是当我尝试打开它时（只需在此目录中输入文件名）。它告诉我找不到命令。

这是我第一次使用 cygwin。所以我需要有人帮忙:)

# javascript - 在分配更高分数的同时删除两个数组中的重复元素

> ID：15726889
> 
> 赞同：0
> 
> 时间：2013-03-31T06:10:06.647
> 
> 标签：javascript

我有 2 个数组，其中包含如下对象。

```
var arrayl = {
 1: {url:google.com, score:0},
 2: {url:bing.com, score: 2},
 3: {url:yahoo.com, score: 0},
 4: {url:facebook.com, score: 5},
 5: {url:dopgile.com, score: 1},
 6: {url:ask.com, score: 10}, 
 7: {url:duckduckgo.com, score: 10}
},

array2 = {
 1: {url:google.com, score: 2},
 2: {url:facebook.com, score: 3}, 
 3: {url:twitter.com, score: 0},
 4: {url:duckduckgo.com, score: 0},
 5: {url:mamma.com, score: 4},
 6: {url:myspace.com, score: 5}
}; 
```

数组 1 和数组 2 本身都有独特的元素。但是，它们之间有重复。

我想将数组 2 与数组 1 合并，以便在数组 1 中重复元素发生时将其分数增加 1。

例如，google.com 存在于数组 2 和数组 1 中。当合并过程开始时，它将数组 1 的第一个元素 google.com 的分数增加到 1 而不是 0。它不应该添加第一个元素array2 的元素给它，因为它是重复的。

类似地，元素 2,3,5,6 将被合并而不增加任何分数，因为数组 1 中没有重复项。但是，duckduckgo 是重复的，会将array1[7] 中的duckduckgo.com 的分数增加到11，并且不会将其添加到数组中。

最后，数组应该是：

```
var arrayl = {
 1: {url:google.com, score:1},
 2: {url:bing.com, score: 2},
 3: {url:yahoo.com, score: 0},
 4: {url:facebook.com, score: 5},
 5: {url:dopgile.com, score: 1},
 6: {url:ask.com, score: 10}, 
 7: {url:duckduckgo.com, score: 11}
 8: {url:facebook.com, score: 3}, 
 9: {url:twitter.com, score: 0},
 10: {url:mamma.com, score: 4},
 11: {url:myspace.com, score: 5} 
```

},

我尝试使用以下循环遍历数组。

```
for(var j=0; j<10;j++) {
 for(var k=0; k<10; k++) {
  if(array1[k].url==array2[j].url){

   array1[k].changeRankScore(array1[k].score+1);

  }else{
   //this is the case where it is not the same. Ideally i should just push it to array1    but since it's a double loops, finally all the items will be added from array2 to array1 with several duplicates. 
  }
 }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:55:23.217

创建一个对象映射 url 到 array1 的元素：

```
var a1_assoc = {};
for (var i = 0; i < array1.length; i++) {
    a1_assoc[array1[i].url] = array1[i];
} 
```

然后在合并步骤中使用它：

```
for (i = 0; i < array2.length; i++) {
    var url = array2[i].url;
    if (a1_assoc[url]) {
        a1_assoc[url].score++;
    } else {
        array1.push(array2[i]);
    }
} 
```

[小提琴](http://jsfiddle.net/barmar/H7Gj8/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:13:02.693

不是做一个双循环，而是在第二个数组上做一个循环。对于每个项目，检查当前项目的 url 是否包含在 array1 中 - 然后根据需要执行第一种或第二种情况。这样，您只需对每个 array2 条目执行一次操作。

# java - 聚合器的通用实现

> ID：15726892
> 
> 赞同：0
> 
> 时间：2013-03-31T06:10:15.907
> 
> 标签：java, generics, aggregation

我正在创建一个类 CommonAggregator，它可以聚合任何可聚合的对象。

```
public interface Aggregatable<T> {
    public void addFieldValue(T t, AggregationField<T> field);
}

public class Charges implements Aggregatable<Charges>{

//privat fields
//Getter and Setters

    @Override
    public void addFieldValue(Charges Charges, AggregationField<Charges> field){
        if(ChargeDetailAggregationField.TYPE1 == field){
            Type1 += Charges.getType1();
        }else if(ChargeDetailAggregationField.TYPE2 ==  field){
            Type2 += Charges.getType2();
        }else if(ChargeDetailAggregationField.TYPE3 == field){
            Type3 += Charges.getType3();
        }
    }
}

public class CommonAggregator<T extends Aggregatable<T>> {

    private static enum AggregationOperation {
        SUM, MAX, MIN, AVG;
    }

    private AggregationField<T>[] fieldsForSum;
    private AggregationField<T>[] fieldsForMax;
    private AggregationField<T>[] fieldsForMin;
    //private AggregationField groupByField = null;

    public CommonAggregator<T> sum(AggregationField<T>... fields){
        this.fieldsForSum = fields;
        return this;
    }

    public CommonAggregator<T> max(AggregationField<T>... fields){
        this.fieldsForMax = fields;
        return this;
    }

    public CommonAggregator<T> min(AggregationField<T>... fields){
        this.fieldsForMin = fields;
        return this;
    }

    private <T> void performOperation(AggregationOperation op,AggregatedResponse<T> aggregatedDetails,List<T> aggregatables,AggregationField<T>... fields){
        Aggregatable<T> aggregatedResponse = (Aggregatable<T>) getNewInstance();
        T response = null;
        for(AggregationField<T> field:fields){

            if(op == AggregationOperation.MAX){
                response = max(field,aggregatables);//Compilation Err
            }else if(op == AggregationOperation.MIN){
                response = min(field,aggregatables);//Compilation Err
            }else if(op == AggregationOperation.SUM){
                response = sum(field,aggregatables);//Compilation Err
            }

            aggregatedResponse.setFieldValue(response, field);

            if(op == AggregationOperation.MAX){
                aggregatedDetails.setMax(aggregatedResponse);
            }else if(op == AggregationOperation.MIN){
                aggregatedDetails.setMin(aggregatedResponse);
            }else if(op == AggregationOperation.SUM){
                aggregatedDetails.setSum(aggregatedResponse);
            }
        }
    }

    private T max(AggregationField<T> field,List<T> aggregatables){
        CommonComparator<T> comparator = new CommonComparator<T>(SortOrder.ASCENDING, field);
        return Collections.max(aggregatables, comparator);
    }

    private T min(AggregationField<T> field,List<T> aggregatables){
        CommonComparator<T> comparator = new CommonComparator<T>(SortOrder.ASCENDING, field);
        return Collections.min(aggregatables, comparator);
    }

    private T sum(AggregationField<T> field,List<T> listOfAggregatables){
        T aggregatable = listOfAggregatables.get(0);

        for(T response :listOfAggregatables.subList(1, listOfAggregatables.size())){
            aggregatable.addFieldValue(response, field);
        }
        return aggregatable;
    }

    public AggregatedResponse<T> aggregate(List<T> aggregatables){

        AggregatedResponse<T> aggregatedDetails = new AggregatedResponse<T>();
        if(fieldsForMax != null)
            performOperation(AggregationOperation.MAX,aggregatedDetails,aggregatables,fieldsForMax);
        if(fieldsForMin != null)
            performOperation(AggregationOperation.MIN,aggregatedDetails,aggregatables,fieldsForMin);
        if(fieldsForSum != null)
            performOperation(AggregationOperation.SUM,aggregatedDetails,aggregatables,fieldsForSum);

        return aggregatedDetails;
    }

    public <E> Map<E,List<T>> groupBy(AggregationField<T> fieldName, List<T> listOfAggregatable){
        Map<E,List<T>> groupedList = new HashMap<E,List<T>>();

        for(T t:listOfAggregatable){
            List<T> subList = null;

            E fieldValue = (E)t.getFieldValue(fieldName);
            if((subList = groupedList.get(fieldValue)) != null){
                subList.add(t);
            }else{
                subList = new ArrayList<T>();
                subList.add(t);
                groupedList.put(fieldValue,subList);
            }
        }

        return groupedList;
    }

    public <E> Map<E,AggregatedResponse<T>> groupByWithAggregation(AggregationField<T> fieldName, List<T> listOfAggregatable){
        //groupByField = fieldName;
        Map<E, List<T>> groupedByList = groupBy(fieldName, listOfAggregatable);
        Map<E,AggregatedResponse<T>> mapOfAggregatedDetails = new HashMap<E, AggregatedResponse<T>>();
        for(E key : groupedByList.keySet()){
            mapOfAggregatedDetails.put(key, aggregate(groupedByList.get(key)));
        }
        return mapOfAggregatedDetails;
    }

    :
} 
```

这不是完整的代码。

在这里，AggregationField 告诉必须聚合 Aggregatable 类的哪个字段。

**问题**：

在 performOperation() 中调用 max()、min() 和 sum() 时，我遇到了 followinf 错误

CommonAggregator< T> 类型中的方法 max(AggregationField< T>, List< T>) 不适用于参数 (AggregationField< T>, List< T>)

编辑：我在@Mikhail 建议后修改了原始代码和问题。

我不擅长泛型。而且我想我只是在泛型中做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:01:58.123

```
public interface AggregationField <T>
{
    // ...
}

public interface Aggregatable <T>
{
    public void addFieldValue (T t, AggregationField <T> field);
}

public class Charges implements Aggregatable <Charges>
{
    @Override
    public void addFieldValue (
        Charges Charges, AggregationField <Charges> field)
    {
        // ...
    }
}

public class CommonAggregator <T extends Aggregatable <T>> {
    private T sum (
        AggregationField <T> field,
        List <? extends T> listOfAggregatables)
    {
        T aggregatable = listOfAggregatables.get(0);

        for (T response: listOfAggregatables.subList (1, listOfAggregatables.size())){
            aggregatable.addFieldValue(response, field);
        }

        return aggregatable;
    }
} 
```

# android - 设置提琴手和 Bluestacks 的方向

> ID：15726893
> 
> 赞同：7
> 
> 时间：2013-03-31T06:10:19.560
> 
> 标签：android, fiddler, sniffing, bluestacks

有谁知道如何设置`fiddler`监控/嗅探来自的流量`bluestacks`？我看到其他人提到它可以完成，但需要一些配置`fiddler`或配置的指导`bluestacks`才能让它继续。目前`fiddler`正在返回一条消息，一些隧道到消息。也许我需要为/`port`配置. 如果是这种情况，有谁知道如何做到这一点，或者可以指出我正确的方向吗？`proxy``bluestacks`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-04T19:32:40.027

您可以使用以下方法捕获 Bluestacks 流量：

*   Wireshark（问题：我们看不到 https (SSL) 流量）..
*   我们可以使用 ProxyCap 软件并设置所有 BlueStacks 可执行文件以通过我们的 Fiddler 本地代理工作。但是我们这里有一个问题 - 我们无法将 Fiddler 证书导入 BlueStacks（至少我还没有找到方法）..

一种可能的解决方案是：

*   杀死 BlueStacks 进程。
*   查找 BlueStacks Root.fs 文件（在我的情况下，它位于此处：c:\ProgramData\BlueStacks\Android）
*   使用linux工具编辑该文件（它是一个图像..我们可以做fdisk Root.fs来查看分区..然后用loop rw mout它..并修改..但这需要更多的挖掘）。

一个重要提示：我们需要找到一种方法来阻止 BlueStacks 自动更新（并丢弃我们在 Root.fs 中的更改）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:56:13.770

据说，BlueStacks 不支持代理设置（[https://android.stackexchange.com/questions/27224/how-to-configure-bluestack-appplayer-to-use-proxy-settings-when-connecting-to-ne](https://android.stackexchange.com/questions/27224/how-to-configure-bluestack-appplayer-to-use-proxy-settings-when-connecting-to-ne)）这意味着它的流量不会通过 Fiddler。

但是，您说“Fiddler 正在返回一条消息到某个隧道的消息”，这对我来说意味着它们可能不正确，并且流量*正在*通过 Fiddler，而客户端只需要配置为信任 Fiddler 根证书。

您能否分享 Fiddler UI 的屏幕截图，显示有问题的“Tunnel to”？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-05T15:48:51.353

如果您只需要在 Bluestacks 代理中设置*浏览器*，此代理设置应用程序对我有用： [https://play.google.com/store/apps/details? id=com.lechucksoftware.proxy.proxysettings](https://play.google.com/store/apps/details?id=com.lechucksoftware.proxy.proxysettings)

# html - 组合框验证

> ID：15726897
> 
> 赞同：0
> 
> 时间：2013-03-31T06:11:14.880
> 
> 标签：html, mysql

内容这是用于验证组合框的java脚本代码..验证无法正常工作..我需要你的帮助..请帮助我..如果用户没有选择它必须显示所有树的警报框

```
<script type="text/javascript">
function checkseats() {
    if (!document.getElementsByName("seats")[0].selectedIndex == 1) {
        alert("Select No of Seats");
        return false;
    }
    return true;
}

function checkmovie() {
    if (document.getElementsByName("movie")[0].selectedIndex == 2) {
        alert("Please select Movie from the list");
        return false;
    }
    return true;
}

function checkdate() {
    if (document.getElementsByName("date")[0].selectedIndex == 3) {
        alert("Please select Date from the list");
        return false;
    }
    return true;
}

function validate() {
    checkdate();
    checkseats();
    checkmovie();
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:18:26.923

我想你想要这个，

```
if (document.forms["yourFormName"].seats.value == "0"){
    alert("Select No of Seats");
    return false;  
    }
    return true;
} 
```

# php - 如何在 wordpress 中搜索来自 2 种不同语言的数据

> ID：15726899
> 
> 赞同：0
> 
> 时间：2013-03-31T06:11:49.203
> 
> 标签：php, wordpress

我在 wordpress 中创建了一个双语网站。英文和阿拉伯文版本。现在我的问题在于搜索。因为当我使用阿拉伯版本时，我无法搜索英文版本的任何数据。

当我在阿拉伯语版本中时，是否可以从英文版本中搜索数据？

我是这个东西的新手。所以我需要你们的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:20:53.537

试试这个插件 我最近在我的 wordpress 中使用了这个插件，希望这能解决你的问题。

```
http://wordpress.org/extend/plugins/transposh-translation-filter-for-wordpress/ 
```

# r - ggplot散点图没有填充

> ID：15726907
> 
> 赞同：21
> 
> 时间：2013-03-31T06:12:50.583
> 
> 标签：r, ggplot2

我想制作一个散点图，其点没有填充（或等效地，有透明填充）。

```
# generate some random data for the scatterplot
n <- 5
f <- factor(1:n)
df <- expand.grid(f1 = f, f2 = f)
df <- transform(df, v1 = round(10 * runif(n ** 2)))

# plot the scatterplot
ggplot(df) + geom_point(aes(x = f1, y = f2, size = v1, fill = NA)) 
```

设置`fill`为`NA`似乎合乎逻辑但不起作用。我也尝试过`NULL`，`""`但无济于事。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-31T06:20:10.740

我认为您想玩形状但可能是错误的：

```
ggplot(df) + geom_point(aes(x = f1, y = f2, size = v1), shape=1) 
```

或许...

```
ggplot(df) + geom_point(aes(x = f1, y = f2, size = v1), fill="green", shape=21) 
```

如果你想填充颜色。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-08-09T21:05:22.597

在更高版本的 ggplot (ggplot2_3.0.0) 中，您可以使用任何形状执行以下操作：

```
 ggplot(df) +
      geom_point(aes(x = f1, y = f2, size = v1, shape = v1)) +
      scale_shape(solid = FALSE) 
```

# asp.net-mvc - 从 HTML 帮助程序 MVC 发出 JS 代码

> ID：15726910
> 
> 赞同：1
> 
> 时间：2013-03-31T06:13:05.230
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html-helper

假设我想编写一个 HTML 助手来绘制图表。该帮助程序需要将特定的 JS 脚本代码发送到调用它的页面正文中。

这是推荐的吗？

如果不是，我将如何解决这个问题？

我可以告诉助手将代码发送到主布局中定义的特定部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T20:10:56.423

这应该这样做：

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString HelloWorld(this HtmlHelper helper)
    {
        return new MvcHtmlString("alert('Hello World');");
    }
} 
```

在您的 Razor 视图中：

```
<script type="text/javascript">

    @Html.HelloWorld();

</script> 
```

你可能不应该这样做。

我会考虑构成您视图一部分的 JS 前端内容。您的视图应该只显示您的视图模型。

我很想知道为什么你觉得你需要能够以这种方式交付 JS？

# java - 使用 java 正则表达式从字符串中删除括号

> ID：15726914
> 
> 赞同：14
> 
> 时间：2013-03-31T06:14:04.030
> 
> 标签：java, regex

我想使用 Java 正则表达式删除括号，但遇到错误`No group 1`请查看我的代码并帮助我。

```
public String find_parenthesis(String Expr){
        String s;
        String ss;
        Pattern p = Pattern.compile("\\(.+?\\)");
        Matcher m = p.matcher(Expr);
        if(m.find()){
            s = m.group(1);
            ss = "("+s+")";
            Expr = Expr.replaceAll(ss, s);
            return find_parenthesis(Expr);
        }
        else
            return Expr;
    } 
```

这是我的主要内容：

```
public static void main(String args[]){
    Calculator c1 = new Calculator();
    String s = "(4+5)+6";
    System.out.println(s);
    s = c1.find_parenthesis(s);
    System.out.println(s);
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-31T11:30:33.250

最简单的方法是从字符串中删除*所有*括号，无论它们是否平衡。

```
String replaced = "(4+5)+6".replaceAll("[()]", ""); 
```

正确处理平衡需要解析（或仅匹配有限深度的真正丑陋的 RE，或重复正则表达式替换的“聪明”）。在大多数情况下，这种复杂性是多余的。可能工作的最简单的事情就足够了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-01T22:39:33.883

你想要的是这样的：`s = s.replaceAll("[()]","");`

有关正则表达式的更多信息，请访问[正则表达式教程](http://www.vogella.com/articles/JavaRegularExpressions/article.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T11:21:31.277

您收到错误是因为您的正则表达式没有任何组，但我建议您使用这种更简单的单行方法：

```
expr = expr.replaceAll("\\((.+?)\\)", "$1"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T07:39:12.033

你根本不能用正则表达式来做到这一点。它不会删除*匹配*的括号，只删除第一个左和第一个右，然后您将无法从表达式中获得正确的结果。您需要一个表达式*解析器*。看看递归下降 ezpresssion 解析器、Dijkstra 分流场算法等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-14T10:09:07.183

正则表达式定义了一个字符类，它包含任何空白字符（\s，因为我们传入一个字符串，所以转义为 \s），一个破折号（转义是因为破折号在字符类的上下文中意味着特殊的东西），和括号。试试它的工作代码。

```
phoneNumber.replaceAll("[\\s\\-()]", ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-08T10:00:12.327

我知道我在这里很晚了。但是，以防万一您仍在寻找更好的答案。如果要从字符串中删除左括号和右括号，可以使用如下非常简单的方法：

```
String s = "(4+5)+6";
s=s.replaceAll("\\(", "").replaceAll("\\)",""); 
```

如果你使用这个：

```
s=s.replaceAll("()", ""); 
```

您正在指示代码查找`()`字符串中不存在的代码。相反，您应该尝试单独删除括号。

要详细解释，请考虑以下代码：

```
String s = "(4+5)+6";
String s1=s.replaceAll("\\(", "").replaceAll("\\)",""); 
System.out.println(s1);
String s2 = s.replaceAll("()", "");
System.out.println(s2); 
```

此代码的输出将是：

> 4+5+6
> 
> (4+5)+6

此外，`replaceAll`仅在您需要`regex`. 在其他情况下，`replace`工作得很好。见下文：

```
String s = "(4+5)+6";
String s1=s.replace("(", "").replace(")",""); 
```

输出：

> 4+5+6

希望这可以帮助！

# asp.net - 直接链接到asp.net数据库中的图像

> ID：15726915
> 
> 赞同：0
> 
> 时间：2013-03-31T06:14:42.983
> 
> 标签：asp.net, sql, image

我们如何通过直接链接从数据库中检索图像？

我知道我们可以得到图像`/getImage.aspx?id=1`，例如。

但是我们怎样才能创建一个直接链接`/image1.jpg`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:22:02.750

你可以使用[URL Rewrite](http://msdn.microsoft.com/en-us/library/ms972974.aspx "网址重写")来解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:24:19.767

```
YOU SHOULD TRY THIS

 <asp:GridView ID="GridView1" runat="server" EnableViewState="false"
    AutoGenerateColumns="false"> 
   <Columns> 
    <asp:BoundField HeaderText="AutoId" DataField="AutoId" /> 
     <asp:BoundField HeaderText="File Name" DataField="FileName" />  
      <asp:TemplateField HeaderText="File"> 
      <ItemTemplate> <img src="ShowImage.ashx?autoId=<%# Eval("AutoId") %>" alt="<%# 
       Eval("FileName") %>" /> 
       </ItemTemplate> 
      </asp:TemplateField> 
      <asp:TemplateField HeaderText="IsActive"> 
    <ItemTemplate> <%# Eval("Active").ToString().Equals("True") ? "Yes" : "No" %> 
     </ItemTemplate> 
      </asp:TemplateField> 
    </Columns> 
     </asp:GridView> 

   Behind Code: 
   string _connStr =
   ConfigurationManager.ConnectionStrings["ConnStr"].ConnectionString; 
    protected void Page_Load(object sender, EventArgs e) 
  { 
     if (!IsPostBack) 
       { 
           BindFiles(); 
       } 
   } 

        private void BindFiles() 
        { 
          DataTable table = new DataTable(); 

         using (SqlConnection conn = new SqlConnection(_connStr)) 
             { 

                string sql = "SELECT AutoId, FileName, FileContent, Active FROM Files
                Order By AutoID ASC"; 

            using (SqlCommand cmd = new SqlCommand(sql, conn)) 
                { 

               using (SqlDataAdapter ad = new SqlDataAdapter(cmd)) 
                      { 
                          ad.Fill(table); 
                      } 

                 } 
                } 
           GridView1.DataSource = table; 
            GridView1.DataBind(); 
           } 
```

# matlab - 在matlab的行尾绘制多行文本

> ID：15726916
> 
> 赞同：0
> 
> 时间：2013-03-31T06:14:42.877
> 
> 标签：matlab, text, plot

我创建了一些 matlab 代码，用于在图中绘制多条线。然而，它似乎并没有像我希望的那样在行尾绘制文本。有没有人知道一种使方法变得更容易的方法以及为什么它可能不起作用。

```
format long;
options = optimset('TolFun',1e-12);
vfb = -0.9;
fT= 0.026;
fF = 0.4591431;
gamma = 0.2377589;
datafile = fopen('quiz3p2bresults.text','w');
if datafile == -1
    error('Error opening data file!');
end

fprintf(datafile, '%s\t %s\n', 'Vgb', 'PSIL')
vgb = 1:0.5:2;
vgb = vgb';
vdb = 0:0.1:1.5;
vdb = repmat(vdb,3,1);
eqn = @(psiL) (vgb-vfb-gamma*(sqrt((psiL-vdb)/fT)));
result = fsolve(eqn,vgb,options);
plot(vdb,result(1,:),'r',vdb,result(2,:),'y',vdb,result(3,:),'g');
text(max(vdb), max(result), num2str(vgb));

fclose(datafile); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:27:28.127

尝试

```
text(max(vdb), result( : , max(size(result)) ), num2str(vgb)); 
```

您可能还想将情节更改为

```
plot(vdb(1,:),result(1,:), ... 
```

# php - 为什么Unicode数据以数字形式存储在mysql数据库中

> ID：15726917
> 
> 赞同：2
> 
> 时间：2013-03-31T06:14:56.770
> 
> 标签：php, mysql, unicode

我有以下

```
$html = <div>ياں ان کي پرائيويٹ ليمٹڈ کمپنياں ہيں</div> 
```

但它被存储在mysql数据库中，格式如下

```
&#1578;&#1608; &#1610;&#1729; &#1575;&#1587;&#1605;&#1576;
&#1604;&#1610; &#1605;&#1610;&#1722; &#1594;&#1585;
&#1610;&#1576; &#1705;&#1608; &#1570;&#1606;&#1746; 
&#1606;&#1729;&#1610;&#1722; 
```

实际上，当我从 mysql 数据库中检索数据并将其显示在网页上时，它会正确显示。但我想知道是unicode的标准格式存储在数据库中，还是unicode数据应该按原样存储

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:20:39.773

当您将 unicode 存储在数据库中时...

首先，您的数据库必须设置为“utf-general”，这不是默认设置。使用 MySQL，您必须将表设置为 utf 格式，并将各个列设置为 utf。除此之外，您必须确保您的连接是 utf-8 连接，但这样做会因您使用何种方法将 unicode 文本存储到数据库中而有所不同。

要设置连接的字符集，如果您使用的是 Mysqli，您可以这样做：

```
$c->set_charset('utf8'); where $c is a Mysqli connection. 
```

不过，您必须像我之前所说的那样更改数据库字符集。

编辑：老实说，我认为你如何存储它并不重要，尽管我将它存储为实际的 unicode 字符，因为如果某些用户输入 '& #1610;' 到数据库中，它不会被错误地检索为 unicode 字符。

编辑：这是一个很好的例子，如果你删除 & 和 #1610; 之间的空格。在我的回答中，它将被错误地从服务器检索为 unicode 字符，除非您希望用户能够使用这样的代码创建 unicode 字符。

这不是一个完美的例子，因为 stackoverflow 是故意这样做的，它实际上并没有那样工作，但概念是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:20:23.133

数据字符集有问题。我不知道具体是什么。这是解决方法。在插入/更新之前执行此操作：

```
$str = html_entity_decode($str, ENT_COMPAT, 'UTF-8'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T07:03:40.450

似乎您的 PHP 代码中的某处[`htmlentities`](http://www.php.net/manual/en/function.htmlentities.php)被用于文本 - 而不是[`htmlspecialchars`](http://www.php.net/manual/en/function.htmlspecialchars.php). 不同之`htmlentities`处在于它以您在此处看到的形式转义了许多非 ASCII 字符。然后将结果存储在数据库中。这不是 MySQL 做的。

理论上这不应该是必要的。如果正确设置了页面的字符集，应该可以输出纯字符。假设 UTF-8，例如，使用`header('Content-Type: text/html; charset=utf-8');`or `<meta http-equiv="Content-Type" value="text/html; charset=utf-8">`。

*如果您直接*查看数据库（尽管它会在网页上正常显示） ，这可能会导致乱码（[mojibake](https://en.wikipedia.org/wiki/Mojibake) ） ，除非您还确保数据库的字符集设置正确。这意味着表列、表、数据库和连接字符集全部为、可能或（或）。在实践中，让它全部工作可能有点麻烦。如果您没有编写此代码，那么您的代码库中的某个人可能决定在某个时候使用它来将外来字符转换为 ASCII HTML 实体，以使存储更容易。或者有时人们会出于习惯而使用更多的东西。*`utf8mb4_general_bin``utf8_general_bin``..._general_ci``htmlentities``htmlentities``htmlspecialchars`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T06:19:15.363

在我看来，这是 HTML 编码，PHP 编码 unicode 的方式，以确保无论页面编码如何，它都会在网页上显示 OK。

您是否尝试使用 MySQL Workbench 获取相同的数据？*

# wpf - 将 Button.IsEnabled 绑定到 CollectionView 中的当前位置

> ID：15726920
> 
> 赞同：2
> 
> 时间：2013-03-31T06:15:21.273
> 
> 标签：wpf, binding, collectionviewsource

我正在尝试将按钮的 IsEnabled 属性绑定到窗口的 CollectionViewSource 的属性。我这样做是为了实现第一个/上一个/下一个/最后一个按钮，并希望在视图位于第一个项目等时禁用第一个和上一个。

我已经设置了集合视图源，UI 控件正确绑定到它，并可以在代码中访问它的视图，因此单击事件处理程序在浏览视图时可以正常工作。

```
 <CollectionViewSource x:Key="cvMain" /> 
```

DockPanel 是窗口的根元素

```
 <DockPanel DataContext="{StaticResource cvMain}"> 
```

FoJobs 是一个可观察的集合，cvJobs 是我在按钮的单击处理程序中使用的 CollectionView

```
private void Window_Loaded(object sender, RoutedEventArgs e) {
  ((CollectionViewSource)Resources["cvMain"]).Source = FoJobs;
  cvJobs = (CollectionView)((CollectionViewSource)Resources["cvMain"]).View;
} 
```

我已经尝试过了，但出现绑定错误“BindingExpression path error: '' property not found on 'object' ''ListCollectionView'”

```
 <Button Name="cbFirst" Click="cbMove_Click" IsEnabled="{Binding Source={StaticResource cvMain}, Converter={StaticResource CurrPos2BoolConverter}}" /> 
```

我首先尝试使用转换器，但认为带有触发器的样式会更有效，但无法访问集合视图。即使底层数据上下文设置为集合视图源，绑定也会作为视图源传递给转换器（如果我没有明确设置绑定的源，如上所述），它没有货币属性（CurrentPosition、Count 等）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:32:07.987

你为什么不使用 a `RoutedCommand`（即使你不使用 MVVM）？

像这样说：

```
<Button x:Name="nextButton"
        Command="{x:Static local:MainWindow.nextButtonCommand}"
        Content="Next Button" /> 
```

并在您的代码隐藏中：

```
public static RoutedCommand nextButtonCommand = new RoutedCommand();

public MainWindow() {
  InitializeComponent();
  CommandBinding customCommandBinding = new CommandBinding(
    nextButtonCommand, ExecuteNextButton, CanExecuteNextButton);
  nextButton.CommandBindings.Add(customCommandBinding);  // You can attach it to a top level element if you wish say the window itself
}

private void CanExecuteNextButton(object sender, CanExecuteRoutedEventArgs e) {
  e.CanExecute = /* Set to true or false based on if you want button enabled or not */
}

private void ExecuteNextButton(object sender, ExecutedRoutedEventArgs e) {
  /* Move code from your next button click handler in here */
} 
```

您还可以应用[Explicitly raise CanExecuteChanged()](https://stackoverflow.com/questions/1340302/wpf-how-to-force-a-command-to-re-evaluate-canexecute-via-its-commandbindings)中的建议之一来手动重新评估`Button.isEnabled`状态。

这样，您就可以在一个区域中封装与按钮相关的逻辑。

# java - for 循环如何将文本放入 3 JTextArea

> ID：15726921
> 
> 赞同：0
> 
> 时间：2013-03-31T06:15:27.900
> 
> 标签：java, swing, for-loop, while-loop, jtextarea

我有一个 API，它有一个 for 循环并打印出接下来 3 天的天气状况。

```
for (ForecastForday1 day : forecast) 
          {
            // Print out what day the forecast is for, and
            // the conditions on that day
            System.out.println("The weather on " + day.getDayOfWeek()
                   + " will be " + day.getInfo("Conditions"));
          } 
```

但是我有 3 个 JTextArea，所以每次循环重复时，我都希望将数据放入一个文本区域，然后再放入下一个。

我的文本区域：

```
day1.append("");
day2.append("");
day3.append(""); 
```

所以我想我必须在这个循环上放一个循环，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:35:05.983

如果您可以使用 Array of textareas 而不是 3 个不同的变量，则可以执行以下操作

```
JTextArea  days[] = new JTextArea[3];
        int i=0;   
        for (ForecastForday1 day : forecast)  {
            days[i++].append("Append string");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:25:00.333

我可以从许多可能的方法中提出一种方法来解决这个问题，

```
 int i=0;   
    for (ForecastForday1 day : forecast) 
                  {
                    if (i%3==0)
                       day1.append("string here");
                    else if (i%3==1)
                       day2.append("string here");
                    else if (i%3==2)
                       day3.append("string here");

                    i++;
                    // Print out what day the forecast is for, and
                    // the conditions on that day
                    System.out.println("The weather on " + day.getDayOfWeek()
                           + " will be " + day.getInfo("Conditions"));
                  } 
```

我想这就是你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T06:33:44.093

你在寻找这样的东西吗？告诉我这是否有帮助或是否需要调整。

```
 {

ArrayList<JTextArea> list = new ArrayList<JTextArea>() ;

list.add(day1);
//add day2 and day3 etc

Int i=0;
for (ForecastForday1 day : forecast) 
          {
           //add check to see of list size is greater than i

             list.get(i).append( //day data);
            i=i+1;
          }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T06:38:06.860

这是解决方案。感谢@redDevil 的帮助。它给了我这个想法。

```
 int i=0;   
    for (ForecastForday1 day : forecast) 
    {

          if (i==0){
             day1Weather.append("The weather on " + day.getDayOfWeek() + " will be " + day.getInfo("Conditions")");
          }
          else if (i==1){
             day2Weather.append("The weather on " + day.getDayOfWeek() + " will be " + day.getInfo("Conditions")");
          }
          else if (i==2){
             day3Weather.append("The weather on " + day.getDayOfWeek() + " will be " + day.getInfo("Conditions")");
          }
          i++;
    } 
```

# javascript - 访问选择列表的选项时出现“null or not an object error”

> ID：15726929
> 
> 赞同：1
> 
> 时间：2013-03-31T06:16:31.553
> 
> 标签：javascript, select, null

`null or not an object`当我尝试用 javascript 编码时，我似乎一遍又一遍地得到这个错误。这是一个简单的例子，我只是想弹出一个显示选项名称的窗口。编码时如何避免出现此错误？

代码在 Internet Explorer 中返回此错误：

> 错误：“ `document.forms.0.questions`”是`null`或不是对象

```
<!DOCTYPE html>
<!-- HTML5 style -->
<head>
<title>Challenge Question</title>
<script type="text/javascript">
/* <![CDATA[ */
window.alert(document.forms[0].questions.pet.name);
/* ]]> */
</script>
</head>
<body>
<form action="get" >
    <select name="questions">
        <option value="pet" name="pet">What is your pet's name?</option>
    </select>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:19:47.727

必须先将元素添加到 DOM，然后才能访问它。现在您正在尝试访问一个尚不存在的元素：

```
<!DOCTYPE html>
<html>

<head>
    <title>Challenge Question</title>
</head>
<body>
    <form action="get">
        <select name="questions">
            <!-- Element is added here -->
            <option value="pet" name="pet">What is your pet's name?</option>
        </select>
    </form>
    <script type="text/javascript">
        /* and can be accessed here, after it's added */
        console.log(document.forms[0].questions.options['pet']);
    </script>
</body>

</html> 
```

[**小提琴**](http://jsfiddle.net/Y2Fja/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:33:21.250

我已经测试了代码。它工作正常。

```
<script type="text/javascript">
 function func1()
  {
    var index = document.getElementById("pet").selectedIndex;
    var value = document.getElementById("pet").options[index].text;
    alert(value);
  } 
```

```
 <form action="get">
 <select name="questions" id="pet" onchange="if (this.selectedIndex) func1();">
    <!-- Element is added here -->
    <option value="pet" name="pet"  >What is your pet's name?</option>
     <option value="pet" name="pet"  >What is your pet's 1?</option>
  </select>
  </form> 
```

# opencl - 在 Nvidia Quadro FX 880 上使用乱序执行

> ID：15726930
> 
> 赞同：0
> 
> 时间：2013-03-31T06:16:34.403
> 
> 标签：opencl

我正在使用 Quadro FX 880 卡。在我的图像分割代码中，我将图像分为 4 个部分（即如果有 4000 个像素，则每个部分为 1000 个像素）。我的代码中有 8 个内核......其中前 4 个将并行执行，接下来的四个将再次并行执行，但在前四个内核执行之后。如果我对所有 8 个内核使用相同的命令队列并为前四个内核中的每一个指定一个 clEnqueueNDRangekernel 命令并且我在创建命令队列时提到 OUT_OF_ORDER 参数，这是否可能......？如果这是可能的，如何并行执行接下来的四个内核，即在前四个内核之后执行..？我可以在前四个内核之后给出一个 clWaitForEvents 命令，然后指定接下来的四个内核.. ? 这将保证前四个内核并行执行，接下来的四个内核在它们之后但并行执行..？

我认为 clEnqueueTask 会使我的代码变慢，因为我在每个内核中有大约 1000 个像素，而 clEnqueueTask 允许 gobal_workitem_size 和 local_work_item_size 仅为 1....！

我不确定所有这些事情是否可以完成......以及什么是错或对......所以我只需要确认......！但如果不是这种方式，请建议另一种方式......！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T07:49:24.857

较新的设备应该支持在多个命令队列上并行运行多个内核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:40:31.903

FX880M 是一款计算能力为 1.2 的设备。它不支持同时/并发内核执行，仅支持执行复制重叠。您可以创建一个无序执行的命令队列，但它不会产生您所询问的效果。

# c++ - c++ qt未定义引用`_imp

> ID：15726931
> 
> 赞同：5
> 
> 时间：2013-03-31T06:17:05.260
> 
> 标签：c++, qt, shared-libraries

我使用 Qt Creator 来制作静态 C++ 库和一个 Qt 应用程序。

我的库包括 MyLib_global.h：

```
#if defined(MYLIB_LIBRARY)
#  define MYLIBSHARED_EXPORT Q_DECL_EXPORT
#else
#  define MYLIBSHARED_EXPORT Q_DECL_IMPORT
#endif 
```

myclass.h 文件：

```
#include "MyLib_global.h"

class MYLIBSHARED_EXPORT MyClass : public QObject
{
    Q_OBJECT
    public:            
        enum Log
        {
            SomeValue,
            NotARealValue
        };
        MyClass(double var, Log e);
        ~MyClass();
} 
```

和 myclass.cpp 文件：

```
#include "myclass.h"

MyClass::MyClass(double var, Log e)
{
}
MyClass::~MyClass()
{
} 
```

我在 .pro 文件中写的这个块：

```
QT       -= gui
QMAKE_CXXFLAGS += -std=c++0x
TARGET = MyLib
TEMPLATE = lib
CONFIG += staticlib 
```

所以我在 Windows 上使用 MinGW 4.7 32bit 构建了这个项目。然后我尝试通过在 .pro 文件中写入此库来在 Qt GUI 应用程序中包含库：

```
LIBS += -Ld:/l -lAgemarkerCore
INCLUDEPATH += d:/l/includes 
```

*“l”是我放置“libMyLib.a”文件的“D:”驱动器上的一个文件夹。在“d:/l/includes”文件夹中，我放置了 MyLib 项目的所有标题。*

现在我正在尝试在 mainwindow.cpp 文件中创建 MyClass 的新实例：

```
#include "myclass.h"

void MainWindow::someFunction()
{
    double var = 3.5;
    MyClass::Log enum_value = MyClass::SomeValue;
    MyClass* c = new MyClass(var, enum_value);
} 
```

还有一个问题。在我使用放置在同一房间的同一台计算机、在同一系统上运行的同一台计算机、同一 IDE 和与 MyLib 一起使用的同一编译器编译此 GUI 项目后，我收到此错误：

```
mainwindow.cpp:29: error: undefined reference to `_imp___ZN12MyClassC1EPdS0_S0_xiNS_3LogEi' 
```

我搜索了很多论坛并尝试了一些我找到的解决方案，但它们没有帮助。大多数这些错误都与 GCC 编译器有关，只需更改项目文件和库的顺序即可解决此问题，但我使用 MinGW 时只有一个库，因此没有任何库的顺序。

我该怎么做才能成功链接我的图书馆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T06:56:16.430

您正在编译一个*静态库*( `config += staticlib`)，但您正在使用`Q_DECL_EXPORT`and`Q_DECL_IMPORT`宏。这些宏仅*在编译共享库时*使用，因为它们暗示 DLL 链接（至少在 Windows 上）。

当应用程序尝试针对您的*静态*库进行编译时，它会尝试将其链接为共享库，因为标头指定了 DLL 链接。这会中断，结果是链接器错误。

解决方案是构建一个共享库，或者不使用`MYLIBSHARED_EXPORT`（哎呀，它甚至`SHARED`在宏名称中说！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-09T08:51:12.190

我通过`undefined reference to '__imp_..`添加`QT += gui widgets`项目的 .pro 文件解决了所有错误。我正在使用`Qt Creator 4.12.4`.

# linux - 编译 glib 失败

> ID：15726933
> 
> 赞同：1
> 
> 时间：2013-03-31T06:17:18.587
> 
> 标签：linux, compilation, gtk, glib

我尝试从源代码编译 glib。但是一个 I/O 错误阻止了我。

```
make[2]: Entering directory `/usr/src/gtk3/glib-2.36.0/docs'
Making all in reference
make[3]: Entering directory `/usr/src/gtk3/glib-2.36.0/docs/reference'
Making all in glib
make[4]: Entering directory `/usr/src/gtk3/glib-2.36.0/docs/reference/glib'
  GEN      glib-gettextize.1
I/O error : Attempt to load network entity http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl
warning: failed to load external entity "http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl"
cannot parse http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl
make[4]: *** [glib-gettextize.1] Error 4
make[4]: Leaving directory `/usr/src/gtk3/glib-2.36.0/docs/reference/glib'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/usr/src/gtk3/glib-2.36.0/docs/reference'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/usr/src/gtk3/glib-2.36.0/docs'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/usr/src/gtk3/glib-2.36.0'
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:26:39.920

无法构建文档，因为`http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl`无法加载外部转换样式表。

尝试将此机器连接到 Internet 并再次运行构建。

# ios - 参数化 UIView 类属性不显示视图

> ID：15726935
> 
> 赞同：1
> 
> 时间：2013-03-31T06:17:22.717
> 
> 标签：ios, objective-c, uiviewcontroller

我正在尝试在我的 viewController 类中显示 UIView。我从 viewController 中的方法调用 initCard 方法`viewDidLoad`。第一个功能有效，但第二个无效。在该函数的第二个版本中，我试图显示的视图没有显示，但程序的其余部分正常运行。我究竟做错了什么？

方法调用`viewDidLoad`，工作：

```
[self initCard];

- (void) initCard {
    [[NSBundle mainBundle] loadNibNamed:@"Card1View_iPhone" owner:self options:nil];
    [self.view addSubview:self.card1ContainerView];
    self.card1ImageView.image = [UIImage imageNamed:@"b1fv.png"];
    CGRect sFrame = CGRectMake(100, 100,
                               self.card1ContainerView.frame.size.width,
                               self.card1ContainerView.frame.size.height);
    self.card1ContainerView.frame = sFrame;
} 
```

方法调用`viewDidLoad`，不起作用：

```
[self initCard:self.card1ContainerView cardImageView:self.card1ImageView];

- (void) initCard: (UIView*)cardContainerView cardImageView:(UIImageView*)cardImageView {
    [[NSBundle mainBundle] loadNibNamed:@"Card1View_iPhone" owner:self options:nil];
    [self.view addSubview:cardContainerView];
    cardImageView.image = [UIImage imageNamed:@"b1fv.png"];
    CGRect sFrame = CGRectMake(100, 100,
                               cardContainerView.frame.size.width,
                               cardContainerView.frame.size.height);
    cardContainerView.frame = sFrame;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:07:52.290

因为`self.card1ContainerView`是`IBOutlet`卡片视图笔尖中的一个已连接，所以在您调用第二个示例时它尚未连接，因为您仅在方法本身中加载笔尖。因此，您将`nil`作为参数传递给该方法。在该方法中加载 nib 设置`self.card1ContainerView`为您可能感兴趣的视图，但此时为时已晚 - 该方法继续使用传递给它的 nil 值。方法参数是按值传递的，因此即使您更改调用时传递的指针，该方法仍使用它在调用时复制的值。因此，您正在将`nil`视图添加到视图层次结构中，但它什么也不做。

如果您需要参数化容器视图参数，请从方法调用中删除 nib 加载步骤，然后确保在使用参数调用之前已加载 nib `self.card1ContainerView`：

```
- (void)setupCard {
   [[NSBundle mainBundle] loadNibNamed:@"Card1View_iPhone" owner:self options:nil];
   [self setupCard:self.card1ContainerView  imageView:self.card1ImageView];
}

- (void) setupCard: (UIView*)cardContainerView cardImageView:(UIImageView*)cardImageView {
    [self.view addSubview:cardContainerView];
    cardImageView.image = [UIImage imageNamed:@"b1fv.png"];
    CGRect sFrame = CGRectMake(100, 100,
                               cardContainerView.frame.size.width,
                               cardContainerView.frame.size.height);
    cardContainerView.frame = sFrame;
} 
```

我将名称从 更改为`init...`，`setup...`因为以 开头的方法`init`在大多数 Objective-C 框架中具有特定的作用。

请注意，您必须确保不要将`nil`参数传递给参数化方法，方法是在调用之前加载 nib，或者在代码中实例化视图并将它们传递给方法。这就是新`setupCard`方法的作用。

# javascript - Python、Javascript（PhantomJS）服务器端通信

> ID：15726937
> 
> 赞同：0
> 
> 时间：2013-03-31T06:17:32.573
> 
> 标签：javascript, python, phantomjs

什么是我的 .py 和 .js 脚本进行通信的好方法？.js 脚本通过 PhantomJS（或 Casper）执行，两者都是服务器端。

理想情况下，Python 脚本会将一些参数发送给 .js 脚本，.js 脚本会做它的事情，然后 .js 脚本会将结果发送回 Python 脚本。如果 .js 脚本使结果在某处可用，但不一定对原始 Python 调用可用。

我的问题不是数据格式（HTML/JSON 等），而是实际的通信。

由于内存使用率高的问题，我对使用 Selenium 不感兴趣。

编辑：

问题不在于刮擦。我将为此使用 PhantomJS。PhantomJS 运行一个用 javascript 编写的小程序。它有一个 .js 扩展名。大概我可以访问所有 javascript 函数。Python 是 2.7

# c# - 如何在 XML 中找到特定节点及其所有子节点？

> ID：15726939
> 
> 赞同：0
> 
> 时间：2013-03-31T06:18:19.267
> 
> 标签：c#, xml

这是我的 XML：

```
<?xml version="1.0"?>
<formatlist>
<format>
    <formatName>WHC format</formatName>
    <delCol>ID</delCol>
    <delCol>CDRID</delCol>
    <delCol>TGIN</delCol>
    <delCol>IPIn</delCol>
    <delCol>TGOUT</delCol>
    <delCol>IPOut</delCol>
    <srcNum>SRCNum</srcNum>
    <distNum>DSTNum</distNum>
    <connectTime>ConnectTime</connectTime>
    <duration>Duration</duration>
</format>
<format>
    <formatName existCombineCol="1">Umobile format</formatName>   //this format
    <delCol>billing_operator</delCol>
    <hideCol>event_start_date</hideCol>
    <hideCol>event_start_time</hideCol>
    <afCombineName dateType="DateTime" format="dd/MM/yyyy HH:mm:ss">  //node i want
        <name>ConnectdateTimeAFcombine</name>
        <combineDate>event_start_date</combineDate>
        <combineTime>event_start_time</combineTime>
    </afCombineName>
    <afCombineName dateType="DateTime" format="dd/MM/yyyy HH:mm:ss">  //node i want
        <name>aaa</name>
        <combineDate>bbb</combineDate>
        <combineTime>ccc</combineTime>
    </afCombineName>
    <modifyPerfixCol action="add" perfix="60">bnum</modifyPerfixCol>
    <srcNum>anum</srcNum>
    <distNum>bnum</distNum>
    <connectTime>ConnectdateTimeAFcombine</connectTime>
    <duration>event_duration</duration>
</format>
</formatlist> 
```

我想用 Umobile 格式查找格式，然后遍历这两个节点。

```
<afCombineName dateType="DateTime" format="dd/MM/yyyy HH:mm:ss">  //node i want
    <name>ConnectdateTimeAFcombine</name>
    <combineDate>event_start_date</combineDate>
    <combineTime>event_start_time</combineTime>
</afCombineName>
<afCombineName dateType="DateTime" format="dd/MM/yyyy HH:mm:ss">  //node i want
    <name>aaa</name>
    <combineDate>bbb</combineDate>
    <combineTime>ccc</combineTime>
</afCombineName> 
```

并列出所有两个节点的子节点。结果应该是这样的：

```
ConnectdateTimeAFcombine,event_start_date,event_start_time.
aaa,bbb,ccc 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:31:48.940

```
foreach(var children in format.Descendants())

  {

     //Do something with the child nodes of format.
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:51:23.040

这样您就可以访问这些元素：

```
var doc = System.Xml.Linq.XDocument.Load("PATH TO YOUR XML FILE");
var result = doc.Descendants("format")
            .Where(x => (string)x.Element("formatName") == "Umobile format")
            .Select(x => x.Element("afCombineName")); 
```

然后你可以这样迭代`result`：

```
foreach (var item in result)
{
    string format = item.Attribute("format").Value.ToString();
    string name = item.Element("name").Value.ToString();
    string combineDate = item.Element("combineDate").Value.ToString();
    string combineTime = item.Element("combineTime").Value.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:43:54.613

对于所有与 XML 相关的遍历，您应该习惯使用 XPath 表达式。这是非常有用的。即使您可以在特定情况下做一些更简单的事情，使用 XPath 也是一种很好的做法。这样，如果您的方案在某个时候发生变化，您只需更新您的 XPath 表达式，您的代码就会启动并运行。

对于一个完整的例子，你可以看看[这篇文章](http://www.codeproject.com/Articles/9494/Manipulate-XML-data-with-XPath-and-XmlDocument-C)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T06:44:53.370

您可以将 System.Xml 命名空间 API 与 System.Xml.XPath 命名空间 API 一起使用。这是一个快速算法，可以帮助您完成任务：

1.  使用以下 XPATH获取包含字符串**Umobile 格式**的文本节点：

    XmlNode umobileFormatNameNode = document.SelectSingleNode("//formatName[text()='Umobile format']");

2.  现在 umobileFormatNameNode 的父节点将是您感兴趣的节点：

    XmlNode formatNode = umobileFormatNameNode.ParentNode;

3.  现在获取该节点的子节点：

    XmlNodeList afCombineFormatNodes = formatNode.SelectNodes("afCombineName");

4.  您现在可以处理 afCombineFormatNodes 列表

    for(XmlNode xmlNode in afCombineNameFormtNodes) { //进程节点 }

# shell - grep -v '^#' 做什么

> ID：15726945
> 
> 赞同：18
> 
> 时间：2013-03-31T06:19:18.507
> 
> 标签：shell

我的程序看起来像这样。

```
ALL=`cat $1 | grep -v '^#' | wc -l`
FINISHED="0"

for i in `cat $1 | grep -v '^#'`; do
        echo "PROBE $i"
 I will be doing some operation
FINISHED=`echo $FINISHED"+1"|bc` 
```

我将通过给出一个文件名作为参数来运行这个脚本，其中将出现一个探针列表。

我有 2 个问题

1.  什么`grep -v '^#'`意思。我了解到这`'^`通常用于匹配特定的字符串。但是在我给出的文件名中没有`#`. 此外，我得到了`cat $1 | grep -v '^#' | wc -l`.

2.  `echo $FINISHED"+1"|bc`. 关于为什么添加开发人员的任何想法`|bc`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-31T06:24:17.273

*   `^`意思是“行首”
*   `#`是文字字符`#`
*   `-v`在 grep 中表示“反转匹配”，换句话说，返回所有*不匹配*的行。

把它们放在一起，你的表达就是“选择所有不以`#`”开头的行

`|`是管道字符，它获取左侧命令的输出，并将其用作右侧命令的输入。`bc`就像一个命令行计算器（做基本的数学）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-18T18:09:18.990

我会用它来排除我正在阅读的代码中的注释。所以所有的注释行都以 # 开头，如果它们太多，我不想看到它们。

```
grep -v '^#' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:35:46.690

我们有不同的计算方法。选择你喜欢的那个。

```
a=`echo 1+1 | bc`; echo $a
b=$((1+1)); echo $b
c=`expr 1 + 1`; echo $c
let d=1+1; echo $d 
```

# c - 使用宏检查宏名称的预先存在

> ID：15726961
> 
> 赞同：2
> 
> 时间：2013-03-31T06:21:46.377
> 
> 标签：c, macros, c-preprocessor, directive

我编写了一个包含多个包含和数十个宏的头文件 (.h)。在每个宏之前我已经编写了这个：

```
#if defined (MACRO_NAME)
#warning "Macro name MACRO_NAME is already in use. Please rename the macro"
#endif 
```

如果有一个宏可以执行所有检查以提高代码的可读性，那就太好了，但是宏中不允许使用指令。

我想要这样的东西：

```
#define CHECK_MACRO_NAME(MACRO_NAME) \
    #if defined (MACRO_NAME) \
    #warning "Macro name "MACRO_NAME" is already in use. Please rename the macro" \
    #endif 
```

你知道其他（更好的）方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T06:30:13.803

更好的方法可能是让您的编译器进行检查。

```
/* test.c */

#define MACRO

#define MACRO 1 
```

编译使用`gcc`：

```
$ gcc -c test.c
test.c:3:0: warning: "MACRO" redefined [enabled by default]
test.c:1:0: note: this is the location of the previous definition 
```

# cgimage - CIBloom使图像更小

> ID：15726967
> 
> 赞同：3
> 
> 时间：2013-03-31T06:22:35.237
> 
> 标签：cgimage, ciimage

我正在使用 CIBloom 来模糊 a 中的一些文本`CGImage`，但正在发生的是 CIBloom 过滤器似乎***使我的图像变得非常小***。

当过滤器内核变大时效果更差。我有点预料到这一点，但我需要一种方法来关闭它，或者一个公式来调整图像的大小，以便每个字母的大小与它最初的大小完全相同。我故意在源图像上留出边距。

CIBloom过滤器之前：

![一个](https://i.stack.imgur.com/fYuaX.png)

CIBloom过滤器后：

![在此处输入图像描述](https://i.stack.imgur.com/o0BI4.png)

模糊过滤器的代码：

```
CGImageRef cgImageRef = CGBitmapContextCreateImage( tex->cgContext ) ;

CIImage *cii = [CIImage imageWithCGImage:cgImageRef] ;

CIFilter *filter = [CIFilter filterWithName:@"CIBloom"] ; //CIGaussianBlur

[filter setValue:cii forKey:kCIInputImageKey];
[filter setValue:[NSNumber numberWithFloat:1.1f] forKey:@"inputIntensity"];

// Large radius makes result EVEN SMALLER:
//[filter setValue:[NSNumber numberWithFloat:100.f] forKey:@"inputRadius"];

CIContext *ciContext = [CIContext contextWithOptions:nil];

CIImage *ciResult = [filter valueForKey:kCIOutputImageKey];
CGImageRef cgIRes = [ciContext createCGImage:ciResult fromRect:[ciResult extent]];

//Clear old tex
tex->clearBacking( 0, 0, 0, 1 ) ;

// Drop CIImage result into texture raw data
CGContextDrawImage( tex->cgContext, CGRectMake(0, 0, tex->w, tex->h), cgIRes ) ; 
```

我喜欢`CIBloom`过滤器，但我需要结果与**我的原始图像大小相同**，而不是下采样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:17:22.180

好吧，为默认内核大小 10 添加到图像的额外空间是 21x28。

![在此处输入图像描述](https://i.stack.imgur.com/T0ryL.jpg)

对于 K=10，生成的图像每边添加 21 px，顶部和底部添加 28 px。请记住，背景是 768x1024 像素，看起来放大后会生成 810x1080 的图像。

玩弄这个，我想出了以下

```
CGContextDrawImage( tex->cgContext, CGRectMake(-30, -36, tex->w+2*30, tex->h+2*36), cgIRes ) ; 
```

这看起来非常近似（必须有一个公式）并引入了一些失真，但它可以使图像几乎与原来的大小相同，而不会引入边界。

![在此处输入图像描述](https://i.stack.imgur.com/j2Atv.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-15T06:15:18.913

绽放效果会改变原始图像的位置和大小。所以你需要重新编辑它们。
在您的情况下，您更改以下代码行：

```
CGImageRef cgIRes = [ciContext createCGImage:ciResult fromRect:[ciResult extent]]; 
```

进入

```
CGImageRef cgIRes = [ciContext createCGImage:ciResult fromRect:[cii extent]]; 
```

希望对你有帮助

# ios - iOS：lldb EXC_BAD_ACCESS 自定义单元

> ID：15726970
> 
> 赞同：0
> 
> 时间：2013-03-31T06:23:23.853
> 
> 标签：ios, memory-management, exc-bad-access, lldb

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"LibraryListingCell";

    InSeasonCell *cell = (InSeasonCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"InSeasonCellView" owner:self options:nil];
        cell = [_cell autorelease];
        _cell = nil;
    }
    if(_dataController!=NULL){
        Product *productAtIndex = [_dataController objectInListAtIndex:indexPath.row];
        // Configure the cell...
        if (productAtIndex.name != nil && productAtIndex.week != nil && productAtIndex.image != nil) {
            cell.name.text = productAtIndex.name;
            cell.week.text = productAtIndex.week;
            cell.image.image = productAtIndex.image;
        }
    }

    return cell;
} 
```

**cell.name.text cell.week.text cell.image.text**的消息错误。很确定这是一个内存管理错误。据我所知，我已妥善保留和释放。该应用程序将在启动时崩溃，有时它可以正常加载所有内容，但是当您滚动时它会崩溃。任何有关内存管理的帮助或指针表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:30:41.917

而不是这个：

```
 if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"InSeasonCellView" owner:self options:nil];
    cell = [_cell autorelease];
    _cell = nil;
  } 
```

您发送了 autorelease 消息并将其设置为 nil，稍后您尝试访问已发布`cell`的 .

我认为应该是这样的：

```
static NSString *CellIdentifier = @"LibraryListingCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil){
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
} 
```

# java - 使用for循环在使用java的文件中逐行写入

> ID：15726972
> 
> 赞同：18
> 
> 时间：2013-03-31T06:24:25.320
> 
> 标签：java, file-io

```
for(i=0;i<10;i++){
    String output = output + "Result "+ i +" : "+ ans +"\n";   //ans from other logic
    FileWriter f0 = new FileWriter("output.txt");
    f0.write(output);
} 
```

但它不起作用，请给`append`或`PrintWriter`方法一些帮助，我不知道如何使用这些方法。

我需要像这样的文件输出

```
Result 1 : 45           //here 45 is ans
Result 2 : 564856
Result 3 : 879
.
.
.
.
Result 10 : 564 
```

谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-31T06:26:55.923

您的代码正在为每一行创建一个新文件。将文件拉到 for 循环之外打开。

```
FileWriter f0 = new FileWriter("output.txt");

String newLine = System.getProperty("line.separator");

for(i=0;i<10;i++)
{
    f0.write("Result "+ i +" : "+ ans + newLine);
}
f0.close(); 
```

如果你想用`PrintWriter`，试试这个

```
PrintWriter f0 = new PrintWriter(new FileWriter("output.txt"));

for(i=0;i<10;i++)
{
    f0.println("Result "+ i +" : "+ ans);
}
f0.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T07:10:56.363

PrintWriter.printf 似乎是最合适的

```
PrintWriter pw = new PrintWriter(new FileWriter("output.txt"));
    for (int i = 0; i < 10; i++) {
        pw.printf("Result %d : %s %n",  i, ans);
    }
    pw.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:29:36.963

试试这个：

```
FileWriter f0 = new FileWriter("output.txt");
for(i=0;i<10;i++){
    f0.newLine();
    String output = output + "Result "+ i +" : "+ ans;   //ans from other logic
    f0.append(output);
} 
```

# bundle - throw new TypeError('arguments to path.join must be strings'); 在流星

> ID：15726980
> 
> 赞同：4
> 
> 时间：2013-03-31T06:26:17.707
> 
> 标签：bundle, meteor

当我输入 $ PORT=3000 MONGO_URL=mongodb://localhost:27017/myapp 节点 bundle/main.js

打开浏览器

出现此错误

```
 path.js:360
        throw new TypeError('Arguments to path.join must be strings');
              ^
TypeError: Arguments to path.join must be strings
    at path.js:360:15
    at Array.filter (native)
    at exports.join (path.js:358:36)
    at exports.send (/root/webapp/bundle/server/node_modules/connect/lib/middleware/static.js:129:20)
    at pass (/root/webapp/bundle/server/node_modules/gzippo/lib/staticGzip.js:111:4)
    at /root/webapp/bundle/server/node_modules/gzippo/lib/staticGzip.js:180:12
    at Object.oncomplete (fs.js:93:15) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:41:34.703

这是因为您安装了节点版本 0.10 而不是节点 0.8。

目前，meteor 使用节点 0.8。

删除节点 0.10 并安装节点 0.8 将解决您的错误

# javascript - Quaid js 只需要数字

> ID：15726981
> 
> 赞同：-1
> 
> 时间：2013-03-31T06:26:22.027
> 
> 标签：javascript, validation

在 Quiad js 中，我如何确保它只接受数字，我试过 pattern="/d*"

但无济于事。

```
 <p><label for="mobile">Mobile Phone <small class="hint">
   (if you have one)</small>  </label> 
    <input type="tel" name="mobile" id="mobile" size="13" maxlength="13" 
   class="mobile" pattern="/d*" required> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:08:58.470

我猜您正在尝试使用 html5 表单输入模式，更改为`pattern="\d*"`，例如：

```
<p><label for="mobile">Mobile Phone <small class="hint">
   (if you have one)</small>  </label> 
    <input type="tel" name="mobile" id="mobile" size="13" maxlength="13" 
    class="mobile" pattern="\d*" required />
    </p> 
```

添加

```
<input type="text" name="username" id="username" pattern="\d*" size="40" maxlength="100" required /> 
```

见：[演示](http://jsfiddle.net/Rjwzp/)

# performance - 为什么要反序列化一棵树？

> ID：15726982
> 
> 赞同：-1
> 
> 时间：2013-03-31T06:26:24.103
> 
> 标签：performance, serialization, tree

假设一个人已经建立了一棵树（如果你愿意，可以说它是二元的），并且由于某种原因已经对树进行了序列化（例如存储为矩阵），最后知道不会添加新节点到树上。

这是我的问题：为什么要反序列化？我可以看到，如果要添加新节点，这可能很重要，但否则，串行树上的操作似乎应该与树存储在传统指针类结构中一样快。

我什至不认为这是一个值得问的问题，但似乎对进行反序列化有很大的兴趣，因此必须有一些动机。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:31:11.593

1.  参考地点。将树合并到一个连续的数组中应该可以提高缓存性能。
2.  节省内存。树结构自然是指针繁重的，如果存储的数据不比指针大很多，这可能会产生很大的开销。

# java - 如何在扩展 JPanel 的类中添加用于加载/保存文件的菜单栏？

> ID：15726986
> 
> 赞同：1
> 
> 时间：2013-03-31T06:27:22.187
> 
> 标签：java, swing, user-interface, menu, jpanel

考虑以下代码：

```
/**
 * Main class
 * @author X2
 *
 */
class DrawingPanel extends JPanel implements MouseListener, MouseMotionListener ,KeyListener
{
    /**
     *    private variables
     */

    // dimensions of the window
    private static final long serialVersionUID = 1L;
    private static final Dimension MIN_DIM = new Dimension(300, 300);
    private static final Dimension PREF_DIM = new Dimension(500, 500);

    /**
     * Setting the dimensions of the window
     */
    public Dimension getMinimumSize() { return MIN_DIM; }

    public Dimension getPreferredSize() { return PREF_DIM; }

    /**
     *  The constructor
     */
    DrawingPanel()
    {
        super();
        addMouseListener(this);
        addMouseMotionListener(this);
        addKeyListener(this);
        setFocusable(true);
        requestFocusInWindow();
    }

public void paintComponent(Graphics g)
{
// code 
}

public void mouseClicked(MouseEvent evt) 
{ // code 

}

// more code 
```

如何在需要打开和保存文件选项的窗口中添加面板。

目前窗口看起来像这样： ![在此处输入图像描述](https://i.stack.imgur.com/VeOBE.gif)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:41:18.957

您可以将 a[`JMenuBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)或 a添加[`JToolBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)到封闭中，如此[处](https://stackoverflow.com/a/4039359/230513)`JFrame`所示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T06:41:29.867

将[JMenuBar 添加到 JFrame](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setMenuBar%28java.awt.MenuBar%29)中，而不是添加到`JPanel(add JMenuBar, BorderLayout.NORTH)`（可能，没问题，也许不是正确的方式）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T06:45:23.733

这取决于。

您可以使用a ，`BorderLayout`将`JMenuBar``NORTH`

然后问题归结为您如何布局任何子组件？您需要一种内容窗格，这将允许在该`CENTRE`位置为容器设置不同的布局管理器

或者，您可以使用在父组件层次结构中[`SwingUtilities.getAncestorOfClass`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#getAncestorOfClass%28java.lang.Class,%20java.awt.Component%29)查找第一个实例，或者如果您介意转换结果。`JFrame`[`SwingUtilities.getWindowAncestor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#getWindowAncestor%28java.awt.Component%29)

**更新**

我突然想到，如果你要使用`getAncestorOfClass`，你最好寻找一个 的实例`JRootPane`，它有一个`setJMenuBar`. 布局`JRootPane`菜单栏和内容窗格（以及其他一些事情）是由

# django - 如何使用通用关系检索与模型关联的所有项目？

> ID：15726987
> 
> 赞同：0
> 
> 时间：2013-03-31T06:27:22.540
> 
> 标签：django, django-models, generic-relationship

我在尝试学习 Django 时正在制作一个基于浏览器的小型游戏。我有很多模型都可以有与之关联的“项目”。

这是可以包含项目的模型之一：

```
class Bank(models.Model):
    user = models.ForeignKey(User, unique=True)
    cash = models.IntegerField() 
```

我的 Item 类具有通用关系，因此它可以与我需要包含项目的任何模型相关联。它还具有用户的 ForeignKey，因为每个项目都必须由用户拥有：

```
class Items(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    description = models.TextField()
    itemType = models.CharField(max_length=50)
    stats = models.CommaSeparatedIntegerField(max_length=100)
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id') 
```

我的问题是如何获取当前与银行关联的项目列表（或我的任何其他可以拥有项目的模型）？

使用泛型关系是实现此目的的好方法吗？使用多对多关系来做这样的事情会更容易（甚至可能）吗？

我想避免在我的模型中使用可以包含项目的实际 GenericRelation 字段，因为如果我删除了项目，它将删除模型。这个想法是项目是临时的，但具有项目的模型是永久性的。

感谢您花时间阅读和回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:25:19.510

要轻松访问您`Items`的`Bank`模型，您可以在模型中提供快捷方式：

```
class Bank(models.Model):
    ...
    items = generic.GenericRelation(Item) 
```

请注意，这只是 django 知道要查找什么的捷径。如果你删除你`Bank`的`Items`不会受到影响。

# php - 在一行中的三列中查找用户 ID

> ID：15726990
> 
> 赞同：0
> 
> 时间：2013-03-31T06:28:21.437
> 
> 标签：php, mysql

我需要检查 10 行中的 3 列，我们按降序匹配用户 ID 并找到用户 ID 并显示结果

假设这是我的桌子

表名**提要**

```
id   buy_id sell_id sold_id
30     2      5       3
29     6      4       9  
28     44     21      36
27     26     2       15
26     4      2       9
25     8      7       2
24     11     2       3
23     2      1       9 
```

例如：我们需要找到**用户 ID 2**并将限制设置为 10 输出。

我只使用一列，所以我不知道如何匹配一行中的 3 列。

我想要10个输出...

```
if userid = buy_id then echo "buyer";
if userid = sell_id then echo "seller";
if userid = sold_id then echo "third party"; 
```

当我们在每一行的列中匹配用户 ID 2 时，输出应该是这样的：

```
1.buyer
2.seller
3.seller
4.third party
5.seller
6.buyer 
```

因为用户 ID 2 只有 6 个活动，所以只有 6 个输出，但我需要最多 10 个和最少 0 个。

我还没有尝试过任何代码，因为我不知道如何处理这个问题。

谢谢希望我说清楚了：|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:35:12.083

```
select id,
       case when buy_id = $userid then "buyer"
            when sell_id = $userid then "seller"
            else "third party"
       end who
from feeds
where $userid in (buy_id, sell_id, sold_id)
limit 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:59:23.397

试试这个：

```
SELECT *
FROM (
  (SELECT buy_id userid, id, 'buyer' type
   FROM feeds)
  UNION
  (SELECT sell_id userid, id, 'seller' type
   FROM feeds)
  UNION
  (SELECT sold_id userid, id, 'third party' type
   FROM feeds)
) feeds_data
WHERE feeds_data.userid = $CHOOSE_USERID
LIMIT 10 
```

当您选择`2`for`$CHOOSE_USERID`时，这应该返回一个表格，如：

```
| userid | id |    type     |
|--------|----|-------------|
| 2      | 30 | buyer       |
| 2      | 27 | seller      |
| 2      | 26 | seller      |
| 2      | 25 | third party |
| 2      | 24 | seller      |
| 2      | 23 | buyer       | 
```

您可以通过更改值来自定义查询，`$CHOOSE_USERID`并且可以通过使用`id`字段或`type`使用`feeds_data`表别名的字段进一步向下钻取。

# windows-8 - 如何使用 nuget 分发特定于处理器的 WindowsStore 程序集

> ID：15726996
> 
> 赞同：2
> 
> 时间：2013-03-31T06:28:49.907
> 
> 标签：windows-8, windows-runtime, windows-store-apps, nuget

我有一个程序集，它链接到 Windows Store 应用程序的本机 Sqlite。

因为 Sqlite 是本机的，所以这个程序集不能使用 AnyCPU 配置文件 - 相反，它必须提供单独的 AnyCPU/x86/x64 程序集。

我想通过 nuget 分发这组程序集 - 这样，当导入包时，nuget 安装程序会将单独的程序集安装到 csproj 文件中的每个平台配置中。

有没有人这样做过或者有一个例子？有人对如何完成有任何建议吗？

**使用 Nuget2.5更新**我被告知这是可能的 - 请参阅[https://nuget.codeplex.com/discussions/396720](https://nuget.codeplex.com/discussions/396720) - 但我不知道如何......有人有这个工作的任何样本吗？

谢谢

斯图尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:38:44.370

NuGet 无法做到这一点，因为它不支持特定于体系结构的部署。

来自 Tim Heuer 的博客页面[SQLite with Windows 8 Apps](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)：

> 为什么没有 NuGet？嗯，NuGet 基础架构现在不支持围绕本机组件处理标头、链接和特定于体系结构的部署的其中一些语义。我们将继续与他们合作，看看我们是否可以将这些变化引入该平台。

另请参阅 Nuget 问题跟踪器中的工作项：[为装配平台添加第一类支持](http://nuget.codeplex.com/workitem/679)

一种方法可能与 SQLite 相同，通过扩展包。不过，我个人并没有这样做，尽管谷歌搜索似乎确实提供了有关如何创建扩展的示例。

# android - 如何在列表视图中将我的布局文本设置为并排？

> ID：15726998
> 
> 赞同：0
> 
> 时间：2013-03-31T06:29:28.327
> 
> 标签：android, android-layout, android-listview

在这里，我希望我的日期在我的标题旁边，在 razin 旁边，并且在 listviev 的角落，而不是在标题下方。我使用了listview的android默认布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="@drawable/myyellow">

    <ListView android:id="@+id/android:list"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"/>

</LinearLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/jnaFk.jpg)

编辑：我按照你的建议得到了这个，但我想在角落里约会。

![图片](https://i.stack.imgur.com/WiCcU.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:32:21.377

使`ListView`项目顶层布局`LinearLayout`具有“水平”方向。然后`TextViews`将并排。

您也可以使用 a`RelativeLayout`然后轻松地将每个放置`TextView`在任何位置。

默认`ListView`布局`android.R.layout.simple_list_item_2`如下所示：

```
<TwoLineListItem xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:mode="twoLine"
    android:paddingBottom="9dp"
    android:paddingTop="5dp" >

    <TextView
        android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:textAppearance="?android:attr/textAppearanceListItem" />

    <TextView
        android:id="@android:id/text2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@android:id/text1"
        android:layout_below="@android:id/text1"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</TwoLineListItem> 
```

从这个开始。
要使用“水平” `LinearLayout`，您必须用“ ”将其更改`TwoLineListItem`为并添加额外的. 要使用 a您必须更改into ，添加附加，然后根据需要放置它们。`LinearLayout``android:orientation="horizontal``TextView`
`RelativeLayout``TwoLineListItem``RelativeLayout``TextView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:57:30.507

这将是组件。使用 Baseadapter 将其添加到列表中将为您提供所需的内容。您可以使用 baseadapter 中的 getview 功能添加。此[链接](http://www.mkyong.com/android/android-listview-example/)将为您提供帮助

```
 <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Title"
        android:textSize="45dp"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:layout_marginRight="18dp"
        android:text="Sub content"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/uLtas.png)