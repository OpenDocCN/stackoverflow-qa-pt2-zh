# StackOverflow 问答 15139000-15139999

# python - 如何从 Python 中的方法访问函数

> ID：15139000
> 
> 赞同：1
> 
> 时间：2013-02-28T15:12:28.960
> 
> 标签：python, oop, sockets, tkinter

**问题**

在同一个类中，如何从方法中访问函数？

**背景**

你好世界！我目前正在使用 Tkinter 开发一个 GUI IM 程序。要通过套接字发送消息，我需要从方法中访问函数。我的`self.network`方法有一个`send_message()`我想访问的函数。

**代码**

要访问它，我尝试使用以下代码：

```
def messageFun(self):

    //Other widgets are here//

    self.send = Button (self.messageFrame, text = "Send",
                        command = self.network(send_message()))
    self.send.grid(row = 1, column = 1, sticky = S) 
```

`self.network`方法和作用`send_message`如下：

```
def network(self):

    def send_message():   
            #Send some data to the remote server
            message = self.message.get("0.0",END)

            try:
                 #set the whole string
                 s.sendall(message)
            except socket.error:
            #Send Failed
                print "Send failed"
                sys.exit() 
```

尽管我努力调试代码，但我总是得到以下消息的奖励：

```
Traceback (most recent call last):
  File "D:\Python Programs\Sockets\First Project\IM Project\Server GUI InDev.py", line 178, in <module>
    app = Application(root)
  File "D:\Python Programs\Sockets\First Project\IM Project\Server GUI InDev.py", line 73, in __init__
    self.messageFun()
  File "D:\Python Programs\Sockets\First Project\IM Project\Server GUI InDev.py", line 156, in messageFun
    command = self.network(send_message()))
NameError: global name 'send_message' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:30:17.607

`network(send_message())`尝试触发函数是一种奇怪的语法`send_message()`

我建议以这种方式：

```
def send_message(instance):   
        #Send some data to the remote server
        message = instance.message.get("0.0",END)

        try:
             #set the whole string
             s.sendall(message)
        except socket.error:
        #Send Failed
            print "Send failed"
            sys.exit()

def network(self,what,send_message=send_message):
    if what =='send message":
        send_message(self)

self.send = Button (self.messageFrame, text = "Send",
                    command = self.network("send message")) 
```

要么这个：

```
class NENE:
    def __init__(self):
        self.network.__dict__['send'] = send_message

    def send_message(self):   
        #Send some data to the remote server
        message = self.message.get("0.0",END)
        try:
             #set the whole string
             s.sendall(message)
        except socket.error:
        #Send Failed
            print "Send failed"
            sys.exit()

    def network(self):
        pass

self.send = Button (self.messageFrame, text = "Send",
                    command = self.network.send_message()) 
```

在第二个代码中，我放入`pass`了`network()`函数，因为我不知道你的真实函数的内容，但你会用这个内容代替这个`pass`

我已经将这些方法放在一个类`NENE`中以展示它是如何工作的。因为`send_message()` 必须是与**方法**相同的实例`network()`的方法。
然后，在每次创建新实例时，也将其设为该方法`send_message()`的一个属性。 因此，完全是实例及其方法之一的属性；但没关系，除了它实现了你的目标：现在是一个可以通过属性调用的属性，它知道它适用的实例是什么。`network()`
`send_message()``send_message()``network()``network`

原谅我糟糕的英语

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:20:01.023

如果`send_message`需要在 之外访问`network`，则应在 之外定义`network`。

```
def send_message(self):   
    #Send some data to the remote server
    message = self.message.get("0.0",END)

    try:
        #set the whole string
        s.sendall(message)
    except socket.error:
    #Send Failed
        print "Send failed"
        sys.exit()
def network(self):
    #do network stuff...

def messageFun(self):

    //Other widgets are here//

    self.send = Button (self.messageFrame, text = "Send",
                        command = self.send_message)
    self.send.grid(row = 1, column = 1, sticky = S) 
```

如果`send_message`需要访问 本地的变量`network`，并且`network`当前不返回任何内容，那么您可以定义`send_message`inside `network`，并在最后返回它。

```
def network(self):
    #create the socket needed for send_message
    s = Socket()

    def send_message():   
        #Send some data to the remote server
        message = self.message.get("0.0",END)

        try:
            #set the whole string
            s.sendall(message)
        except socket.error:
        #Send Failed
            print "Send failed"
            sys.exit()

    #do other network stuff...
    return send_message

def messageFun(self):

    //Other widgets are here//

    self.send = Button (self.messageFrame, text = "Send",
                        command = self.network()
    self.send.grid(row = 1, column = 1, sticky = S) 
```

如果网络已经有返回值，那么您可以将网络的局部变量放在类范围内以便`send_message`可以看到它们。

```
def send_message(self):   
    #Send some data to the remote server
    message = self.message.get("0.0",END)

    try:
        #set the whole string
        self.s.sendall(message)
    except socket.error:
    #Send Failed
        print "Send failed"
        sys.exit()

def network(self):
    #create the socket needed for send_message
    self.s = Socket()
    #do other network stuff

def messageFun(self):

    //Other widgets are here//

    self.send = Button (self.messageFrame, text = "Send",
                        command = self.send_message
    self.send.grid(row = 1, column = 1, sticky = S) 
```

# silverlight - 在 WrapPanel 中动态创建和绑定按钮

> ID：15139003
> 
> 赞同：0
> 
> 时间：2013-02-28T15:12:35.723
> 
> 标签：silverlight, xaml

在这种情况下，一组资源被发送到 ViewModel。

目标是将这些资源显示为视图中 WrapPanel 中的按钮。

此时，我正在使用下面的 C# 代码执行此操作。但是，我想在 Xaml 方面执行此操作。最后，我想使用 DataTemplates 来格式化具有 Resource 类的其他属性的按钮。

解决这个问题的最佳方法是什么？提前致谢。

```
 public void SetResources(Resource[] resources)
    {
        WrapPanel panel = this.View.ResourcesPanel;
        panel.Children.Clear();
        foreach(Resource resource in resources)
        {
            var button = new Button
            {
                Tag = resource.Id,
                Content = resource.Content,
                Width = 300,
                Height = 50
            };
            button.Click += this.OnResourceButtonClick;
            panel.Children.Add(button);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:55:19.840

显示一组可变项目的常用方法是使用[`ItemsControl`](http://msdn.microsoft.com/en-us/library/ms611045%28v=vs.95%29.aspx). 您可以将 ItemsControl 的[`ItemsSource`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource%28v=vs.95%29.aspx)属性绑定到[`ObservableCollection`](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.95%29.aspx)您的一个`Resource`对象。

```
<UserControl ...>
    <UserControl.DataContext>
        <local:ViewModel/>
    </UserControl.DataContext>
    <Grid>
        <ItemsControl ItemsSource="{Binding Resources}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button Tag="{Binding Id}" Content="{Binding Content}"
                            Width="300" Height="50"
                            Click="OnResourceButtonClick"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</UserControl> 
```

ViewModel 类可能如下所示：

```
public class ViewModel
{
    public ViewModel()
    {
        Resources = new ObservableCollection<Resource>();
    }

    public ObservableCollection<Resource> Resources { get; private set; }
} 
```

* * *

您可以通过强制转换 DataContext 来访问 UserControl 或 MainPage 代码中的 ViewModel 实例：

```
var vm = DataContext as ViewModel;
vm.Resources.Add(new Resource { Id = 1, Content = "Resource 1" });
... 
```

# html - 如何在子div悬停时更改父div的属性

> ID：15139011
> 
> 赞同：0
> 
> 时间：2013-02-28T15:13:16.073
> 
> 标签：html, css

如何在子 div 悬停时更改父 div 的属性。可以用纯css完成吗？

**html:**

```
<div class="parent">
    <div class="child">
    </div>
</div> 
```

**CSS：**

```
.parent{width:200px;height:100px;background:#cccccc;}
.child{width:200px;height:100px;background:transparent;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:44:23.990

不是使用纯 CSS，您需要某种形式的脚本来通知父母孩子正在悬停（例如）：

```
<div id="parentId" class="parent">
    <div id="childId" onmouseover="doOnMouseOver()" onmouseout="doOnMouseOut()" class="child">
    </div>
</div>
<script type="text/javascript">
    function doOnMouseOver() {
        var parentNode = this.parentNode;
        var newParentClass = parentNode.getAttribute('class') + 'child-beeing-hovered';
        parentNode.setAttribute('class', parentClass);
    }

    function doOnMouseOut() {
        var parentNode = this.parentNode;
        var newParentClass = parentNode.getAttribute('class').replace('child-beeing-hovered', '');
        parentNode.setAttribute('class', parentClass);
    }
</script> 
```

请注意，我已将 id 添加到您的 html 元素中，这样我就可以使用 javascript 获取它们，而不会使代码变得不必要的复杂，也不会使用 jQuery 等第三方库。

请注意，您还需要绑定 onmouseout 否则父元素将保留新类**child-beeing-hovered**。

jQuery 实际上让你的工作变得更轻松，但你应该至少尝试一次使用 javascript 来做这件事。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:23:46.767

您是否有不想使用 JavaScript 或 JQuery 的原因？

你可以简单地：

```
$("#child_id").hover(function (){
  $(this).parent("div").addClass("some-class")
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:15:55.807

`parent`CSS中没有选择器。

您可以在这里找到很好的解释为什么不支持它：http: [//snook.ca/archives/html_and_css/css-parent-selectors](http://snook.ca/archives/html_and_css/css-parent-selectors)

# java - 在 weblogic 管理控制台 > 部署中，停止命令有什么作用？

> ID：15139016
> 
> 赞同：0
> 
> 时间：2013-02-28T15:13:25.363
> 
> 标签：java, servlets, web, weblogic

我是 weblogic 的新手，想知道：在部署下的管理控制台中，您可以选择一个部署并单击停止（选项 a：工作完成时，b：现在强制停止，c：停止，但继续为管理请求提供服务）。停止命令有什么作用？我读了[http://docs.oracle.com/cd/E15523_01/apirefs.1111/e13952/taskhelp/applications/StopDeployedEnterpriseApplications.html](http://docs.oracle.com/cd/E15523_01/apirefs.1111/e13952/taskhelp/applications/StopDeployedEnterpriseApplications.html)

但我还是不明白。从我收集的其他读数中，停止调用 servlet 的 destroy() 方法（如果存在），然后删除容器（从部署中？）？我有一个带有 destory() 方法的 servlet，我想了解是否需要调用它，或者是否可以删除部署。当我尝试立即强制停止并在部署工作完成时停止时，我收到以下消息：

```
 The application _auto_generated_ear_ is in an incompatible state and will not be included in this operation.
 All of the Deployments selected are currently in a state which is incompatible with this operation. No action will be performed. 
```

有没有人链接到这些停止命令执行的过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:15:23.753

首先，您不能删除正在运行的应用程序。如果您尝试这样做，您将收到错误“应用程序 xxxxx 当前正在运行并且可能不会被删除”。

其次，如果是生产系统，最好**在工作完成时停止**。在这种情况下，应用程序会停止为新请求提供服务，但会通过正在进行的会话继续为来自用户的请求提供服务。因此，它对您的最终用户的破坏性会更小。

如果重启服务器呢？重启后消息会消失吗？

如果应用程序由于某些奇怪的原因拒绝停止/删除，您可以随时关闭服务器，删除 config.xml 中的相应条目并重新启动服务器。

**编辑：基于评论**

自动生成的 EAR 功能本身是 OEPE 如何将独立 WAR 模块发布到 WLS 的优化的一部分。WLS 拆分源部署功能需要一个 EAR，因此 OEPE 为用户生成一个作为拆分源部署。我怀疑你的问题可能是由这个自动生成的耳朵引起的。

但是，它看起来像是具有拆分源部署的开发环境。为什么需要通过控制台启动/停止应用程序或删除应用程序？为什么不能通过 OEPE 将应用程序重新发布到服务器？它将获取您在应用程序中的新更改。要回答您的问题，**删除**基本上是取消部署应用程序。**Stop**不会取消部署您的应用程序。它只是停止服务请求。如部署屏幕所示，该应用程序仍处于部署状态。

# ruby - Ruby 可选参数和多参数

> ID：15139017
> 
> 赞同：6
> 
> 时间：2013-02-28T15:13:26.367
> 
> 标签：ruby, parameters, arguments, optional-parameters

我试图将方法的第一个参数设置为可选，然后是任意数量的参数。例如：

```
def dothis(value=0, *args) 
```

我遇到的问题是这似乎实际上不可能？当我打电话时，`dothis("hey", "how are you", "good")`我希望它将值设置为默认值 0，但它只是在制作`value="hey"`. 有没有办法完成这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:25:54.533

这在 Ruby 中是不可能的

不过，有很多选择，具体取决于您使用扩展参数做什么，以及该方法打算做什么。

明显的选择是

1) 使用哈希语法获取命名参数

```
def dothis params
  value = params[:value] || 0
  list_of_stuff = params[:list] || [] 
```

Ruby 有很好的调用约定，你不需要提供哈希 {} 括号

```
dothis :list => ["hey", "how are you", "good"] 
```

2）将值移动到末尾，并为第一个参数取一个数组

```
def dothis list_of_stuff, value=0 
```

像这样调用：

```
dothis ["hey", "how are you", "good"], 17 
```

3) 使用代码块提供列表

```
dothis value = 0
  list_of_stuff = yield 
```

像这样调用

```
dothis { ["hey", "how are you", "good"] } 
```

4) Ruby 2.0 引入了命名散列参数，它为你处理了很多上面的选项 1：

```
def dothis value: 0, list: []
  # Local variables value and list already defined
  # and defaulted if necessary 
```

调用方式与（1）相同：

```
dothis :list => ["hey", "how are you", "good"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-22T23:12:08.537

这篇文章有点老了，但如果有人正在为此寻找最佳解决方案，我想做出贡献。**从 ruby​​ 2.0 开始**，您可以使用散列定义的命名参数轻松完成此操作。语法简单易读。

```
def do_this(value:0, args:[])
   puts "The default value is still #{value}"
   puts "-----------Other arguments are ---------------------"
  for i in args
    puts i
  end
end
do_this(args:[ "hey", "how are you", "good"]) 
```

您也可以使用贪婪关键字****args**作为哈希执行相同的操作，如下所示：

```
#**args is a greedy keyword
def do_that(value: 0, **args)
  puts "The default value is still #{value}"
  puts '-----------Other arguments are ---------------------'
  args.each_value do |arg|
    puts arg
  end
end
do_that(arg1: "hey", arg2: "how are you", arg3: "good") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:24:59.207

您将需要使用命名参数来完成此操作：

```
def dothis(args)
  args = {:value => 0}.merge args
end

dothis(:value => 1, :name => :foo, :age => 23)
 # => {:value=>1, :name=>:foo, :age=>23} 
dothis(:name => :foo, :age => 23)
 # => {:value=>0, :name=>:foo, :age=>23} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T11:10:04.447

通过使用 value=0，您实际上是在为 value 分配 0。只是为了保留该值，您可以使用上述解决方案，也可以在每次调用此方法 def dothis(value, digit=[*args]) 时简单地使用 value。

未提供参数时使用默认参数。

我遇到了类似的问题，我通过使用解决了这个问题：

```
def check(value=0, digit= [*args])
puts "#{value}" + "#{digit}"
end 
```

并像这样简单地调用检查：

```
dothis(value, [1,2,3,4]) 
```

您的值将是默认值，其他值属于其他参数。

# c++ - Is libdmtx dead, suggested replacement?

> ID：15139031
> 
> 赞同：5
> 
> 时间：2013-02-28T15:13:53.560
> 
> 标签：c++, c, windows, barcode

I've been using [libdmtx](http://www.libdmtx.org) in a project and looking to update to a newer version, but it seems the project hasn't been updated in well over a year. The last update/version was June, 2011\. The [Git repository](http://libdmtx.git.sourceforge.net/git/gitweb.cgi?p=libdmtx/libdmtx;a=shortlog) shows that the last commit was August, 2011\. Finally, the author's web site, which previously promoted libdmtx, [Dragonfly Logic](http://www.dragonflylogic.com/), is dead with a 404 Not Found error.

Is there another data matrix library that can meet this criteria?

*   Open source
*   Platform-neutral C/C++ (i.e. can build for Windows, POSIX environments)
*   Encodes/decodes data matrix
*   Actively maintained

Alternatively, did libdmtx move somewhere else and continue to get maintained somewhere that I'm not aware of?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-28T16:20:38.443

I can't say that I'll *never* develop on libdmtx again, but it certainly wouldn't be anytime soon. I simply don't have the spare hours anymore to even keep up with the correspondence, let alone to perform any meaningful development.

So if you wish to fork it, you have my blessing. :)

Unfortunately I'm not aware of any other open source packages that do exactly the same things as libdmtx (which is why I created it in the first place), but I tried to list any similar projects I came across at [http://libdmtx.sourceforge.net/resources.php](http://libdmtx.sourceforge.net/resources.php)

Good luck!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T15:19:25.773

As libdmtx is currently unmaintained (I wouldn't say dead, as there are several users of the library) one should have to look at options.

[zxing-cpp](https://github.com/glassechidna/zxing-cpp) is a viable alternative. It can code and decode both DataMatrix, QR codes and barcodes. It compiles both on windows and posix, and are open source (Apache 2)

My only complaint about the zxing-cpp library is that is doesn't support dot peen generated data matrix images.

# php - 填写一个word文件并使用PHP将其转换为PDF文件

> ID：15139034
> 
> 赞同：0
> 
> 时间：2013-02-28T15:14:03.023
> 
> 标签：php, pdf, ms-word

我有一个单词模板。我想用数据填充它，然后将其转换为 PDF 文件。有没有简单的方法可以用 PHP 做到这一点？

还是先转换成PDF再填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:22:12.323

将您的 word 模板转换为 PDF。然后使用

[http://www.setasign.de/products/pdf-php-solutions/fpdi/](http://www.setasign.de/products/pdf-php-solutions/fpdi/)

您可以导入 PDF 模板并添加一些内容。然后输出一个PDF。

检查这个简单的演示：

[http://www.setasign.de/products/pdf-php-solutions/fpdi/demos/simple-demo/](http://www.setasign.de/products/pdf-php-solutions/fpdi/demos/simple-demo/)

# database - Windows Server 2003 中使用经典 ASP 的 MS Access 数据库

> ID：15139036
> 
> 赞同：1
> 
> 时间：2013-02-28T15:14:06.207
> 
> 标签：database, ms-access, asp-classic, database-connection, vba

我正在将一个经典的 ASP 站点从 Windows Server 2003 迁移到 Windows Server 2008 R2。问题是该站点使用 Microsoft Access 数据库并使用 Microsoft.Jet.OLEDB.4.0 作为提供程序。

我已经在 Internet 上搜索解决方案，但找不到任何适用于 64 位 Windows 的驱动程序。我可以使用它来访问数据库的任何其他提供程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:41:31.807

我找到了解决方案

我将连接字符串更改为

```
"Driver={Microsoft Access Driver (*.mdb)};Dbq=c:\database.mdb;Uid=Admin;Pwd=" 
```

然后我启用 32 位应用程序。请参阅[http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/using-classic-asp-with-microsoft-access-databases -on-iis](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/using-classic-asp-with-microsoft-access-databases-on-iis)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:13:30.463

用于在 64 位机器上运行 ASP 应用程序

请将本网站使用的应用程序池更改为在 IIS 中启用 32 位 = true（不知道确切的属性名称）

# java - Birt 报告查看器无法启动

> ID：15139040
> 
> 赞同：2
> 
> 时间：2013-02-28T15:14:15.747
> 
> 标签：java, java-native-interface, java-7, birt

在我的电脑上安装 java JDK1.7.0_15 后，我的 Birt 报表查看器设计器 3.7.2 没有启动。而是打印此错误消息：

> 无法加载 JNI 共享库“C:\Program Files\java\jdk1.7.0_15..\jre\bin\server\jvm.dll”。

我尝试下载并安装新版本的 Birt v4.7.2 但我仍然遇到同样的错误。

我的操作系统是 64 位的 Windows 7。我在我的项目中使用 eclipse indigo 和 juno，一切顺利..

谁能帮我？

重新编辑：我不知道为什么，但是如果我在 PATH 系统变量中删除此语句： `;C:\Program Files\Java\jdk1.7.0_15`

我在eclipse中移动jre目录和birt主目录都恢复正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:46:11.020

基本上，我认为这与[Failed to load the JNI shared Library (JDK)](https://stackoverflow.com/questions/7352493/failed-to-load-the-jni-shared-library-jdk)的问题相同，只是它是在您启动 Birt Viewer 而不是 Eclipse 本身时发生的。

简而言之，您需要：

*   64 位操作系统、64 位 Java 安装和 64 位 Birt 报告查看器，或

*   32 位或 64 位操作系统、32 位 Java 安装和 32 位 Birt 报告查看器。

而且您需要确保 Birt 报告查看器的启动器使用正确的 Java 安装……如果您的机器上有多个 Java 安装。

# javascript - 意外的令牌）节点js评估功能

> ID：15139045
> 
> 赞同：0
> 
> 时间：2013-02-28T15:14:27.120
> 
> 标签：javascript, node.js, eval

我在我的数据库中存储一个函数并使用 node.js 从数据库中检索它

当我`console.log`包含函数的列时，这是输出

```
(function(settings){var options = {host: 'somehost.com',path: 'some/path/' + settings.token + '?mobile=' + settings.number + '&message=' + settings.message};callback = (function(response) {var str = '';response.on('data', (function (chunk) {str += chunk;}));response.on('end', (function () {settings.result(str);})));}settings.httpRequest.request(options, callback).end();}) 
```

当我`console.log` `typeof`列它打印出来`string`

但是当我这样做时

```
var func = eval(column); 
```

结果是`Unexpected token )`

有谁知道为什么？

我现在把我的功能变小了：

```
function(settings){var options = {host: 'api.smsmonster.co.za',path: '/uv1.svc/SendSMS/' + settings.token + '?mobile=' + settings.number + '&message=' + settings.message}settings.httpRequest.request(options, settings.callback).end();} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:23:18.190

```
(
function(settings){
 var options = 
  {
     host: 'somehost.com',
     path: 'some/path/' + settings.token + '?mobile=' + settings.number + '&message=' +        settings.message
  };
 callback = ( function(response) {
   var str = '';
   response.on('data', (function (chunk) {
    str += chunk;
    })
);
response.on('end', (function () {
  settings.result(str);
  })
  )
 /*{!here}*/);
} //<-- this is your problem it need to go to:{!}
settings.httpRequest.request(options, callback).end();
 }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:18:48.597

您是否考虑过可能存在多余的或放错位置的右括号的可能性？这就是 node.js 在输入您问题中包含的内容时输出的内容

```
chunk;}));response.on('end', (function () {settings.result(str);})));}setting
                                                                    ^
SyntaxError: Unexpected token )
    at Module._compile (module.js:437:25)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:30:15.547

您的 JSON 可能有问题。您应该使用多行编写它：

```
function(settings){
  var options = {
   host : 'api.smsmonster.co.za',
   path : '/uv1.svc/SendSMS/' 
          + settings.token 
          + '?mobile=' + settings.number 
          + '&message=' + settings.message
  }settings.httpRequest.request(options, settings.callback).end();
} 
```

正如您现在所看到的，这里有一个问题：

```
 }settings.httpRequest.request(options, settings.callback).end(); 
```

您可能在“设置”之前忘记了一点

# twitter-bootstrap - Bootstrap：如何覆盖弹出框的动态位置？

> ID：15139046
> 
> 赞同：7
> 
> 时间：2013-02-28T15:14:32.907
> 
> 标签：twitter-bootstrap

我会调整 bootstrap 核心中的位置，但我想保持我的 bootstrap-sass gem 可以更新。弹出框偏移没有变量，我只需要偏移 1 种弹出框。

![在此处输入图像描述](../Images/6a8b2d4b0f4519d2d1f8416cc5fbe3bf.png)

顶部描述了这个问题。底部是我使用 chrome 开发工具进行的调整。如果我将此更改提交给我的 css，Bootstrap 的动态放置会重新调整，它看起来又像上面的情况。有没有办法让弹出框自动出现在它的父 div 的范围内？如果没有，我如何克服具有负边距的动态弹出框放置？

更新：添加代码。这是按钮组的结果 HTML。第一个链接上的弹出框有效，您可以忽略它。

```
<div class="btn-group btn-section pull-right">
  <a href="/sections/edit_section_text/118" class="noprint btn active-workers hidden-phone bs-popover btn-primary" data-content="<ul id="sectionworkers" class="unstyled"><li><img alt="Avatar" class="avatar" height="25" src="https://secure.gravatar.com/avatar.php?d=mm&gravatar_id=9ac2c7fd1c8e43cd5b4d73d3cb585973" width="25" /> <small>Ben</small></li></ul> <!-- #sectionworkers -->" data-placement="bottom" data-target="#s118section" id="edit_btn118" rel="popover" data-original-title="Active Users: ">
    <i class="icon-edit icon-white"></i> Edit
  </a><option>View revision...</option>

  <a href="#" class="noprint btn bs-popover" data-content="<select></select>" data-placement="bottom" data-toggle="popover" id="hist_btn" rel="popover" data-original-title="View and difference revisions"><i class="icon-time"></i> History</a>

  <div class="popover popover-offset fade bottom in" style="top: 30px; left: 155.5px; display: block;">
    <div class="arrow"></div>
    <div class="popover-inner">
      <h3 class="popover-title">
        View and difference revisions
      </h3>
      <div class="popover-content">
        <select></select>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-04T05:42:16.047

在阅读了 Archonic 的 PR 和 FATs 回复后，我调查了他所说的模板。

如果您复制 Bootstrap 的模板并在您的弹出选项中指定它，您可以在此时注入类，这至少解决了我的问题。

```
$el.popover(
  placement: 'top',
  trigger: 'manual', 
  html: true, 
  content: @popoverContent, 
  container: '#mycontainer',
  template: '<div class="popover my_ace_class_name"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:08:56.423

在 bootstrap-tooltip.js 中用 2 行修复了它，并将发出拉取请求。这可以添加您想要的任何样式，这可以解决您可能遇到的工具提示或弹出框的任何放置问题。

在 bootstrap-tooltip.js 中，就在`this.$element.trigger('shown')`in之前`show: function ()`，添加：

```
$tip.addClass(this.options.class) 
```

然后就在`this.$element.trigger('hidden')`in之前`hide: function ()`，添加

```
$tip.removeClass(this.options.class) 
```

然后在初始化工具提示或弹出框时，添加您的样式，如下所示：

```
$('.bs-popover').popover({html:true, trigger:'click', class:'whatever-you-want'}) 
```

然后当然`.whatever-you-want`在你的css中声明。

它应该比这容易得多-_-。别客气！

# c# - Default values for method optional attributes

> ID：15139047
> 
> 赞同：4
> 
> 时间：2013-02-28T15:14:36.477
> 
> 标签：c#

I have a method:

```
public void MyMethod(string myParam1,string myParam2="")
{
     myParam2 = (myParam2 == "")?myParam1:myParam2;
} 
```

Is there any way to do this something like:

```
public void MyMethod(string myParam1,string myParam2 = (myParam2 == "")?myParam1:myParam2) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:15:43.540

**No.**

The default value of parameters needs to be known at compile time. The first snippet you provided is the correct way to do this. Or as has been pointed out by other answers, provide an overload method that only accepts a single parameter.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:16:11.493

In order to perform what you want you'll need to use an overload instead of an optional parameter.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T15:18:37.500

There is no chance I believe what you tried to.

If you want to do process like this, best options looks like **[method overloading](http://msdn.microsoft.com/en-us/library/aa691336%28v=vs.71%29.aspx)**.

> Overload resolution is a **compile-time mechanism** for selecting the best function member to invoke given an argument list and a set of candidate function members.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T15:20:27.137

Not directly, as the default value must be known at *compile time*. The first method you describe is the correct way to do this.

However, you *could* do:

1.  Set a default of null and coalesce it as you use it:

    ```
    public void MyMethod(string myParam1, string myParam2 = null)
    {
        Console.WriteLine(myParam2 ?? myParam1);
    } 
    ```

2.  Use overloading:

    ```
    public void MyMethod(string myParam1, string myParam2)
    {
        Console.WriteLine(myParam2);
    }

    public void MyMethod(string myParam1)
    {
        MyMethod(myParam1, myParam1);
    } 
    ```

# android - 应用程序级别变量在 Sencha Touch 2 中导致 Android 上的未定义错误

> ID：15139049
> 
> 赞同：0
> 
> 时间：2013-02-28T15:14:41.820
> 
> 标签：android, global-variables, undefined, sencha-touch-2.1

我在我的应用程序中使用应用程序级别的全局变量，它们在 iOS 上运行良好。在 Android 上，我收到以下错误：无法读取`baseFetchUrl`未定义的属性。

有没有人有任何建议为什么会发生这种情况？

```
Ext.application({
    name: 'MyApp',

    //Development URLs
    baseFetchUrl: 'http://xxxx',
    baseStoreUrl: 'http://xxxx',
    rootApiUrl: 'http://xxxx', 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:55:55.577

我遇到了同样的问题 - 没有得到解决方案（我认为这与 senach 的打包方法有关，也许打包过程打乱了定义的顺序，因此尚未定义“basFetchUrl”）。可能最好的方法是创建一个外部配置文件。例子：

```
Ext.define('AppName.Config', {
    singleton : true,

    config : {
        urls : {
            baseUrl     : 'http://domain.de/file.php',
            superUrl    : 'http://domain.de/files.php'
        },
    },
    constructor: function(config) { // with this you create kind of object, simple said
        this.initConfig(config);
        return this;
    }
}); 
```

在你的 app.js 添加/扩展

```
requires: [
'AppName.Config' // make sencha loading the file
] 
```

现在您可以访问这些数据 URL，例如：

```
AppName.Config.getUrls().baseUrl 
```

或者，您可以使用（不推荐） AppName.Config.config.urls.baseUrl （如果我们忘记启动构造函数，则需要

希望这会有所帮助（PS。在发送我的评论之前我绝对应该做一些拼写检查，否则我必须做很多编辑 - 没有人有时间这样做；））

# java - 使用 Java 读取/写入访问表

> ID：15139052
> 
> 赞同：0
> 
> 时间：2013-02-28T15:14:52.390
> 
> 标签：java, mysql

我以示例的形式解释了我的问题，因为我无法将所有内容都放入其中。

我在本地 MS 访问数据库中有 3 个表，我使用来自 java 的 SQL 查询来读/写，

```
Table1 // 3 columns. 1) id 2) department1 yes/no 3) department2 yes/no
Table2 //Department1 with emails address //1 column. email address
Table3 //Department2 with emails address // 1 column. email address 
```

我知道如何开发的功能 - 从界面，用户输入一个 id 并选择部门 1 和/或部门 2。选择保存在表 1 中。稍后将根据表 1 中的可用数据从软件发送电子邮件。我能做这个任务吗？

我的问题是，我不想向每个部门的所有电子邮件地址发送电子邮件，而是想为用户提供一个选项

```
Department1//Jbutton 
```

当用户单击按钮时，弹出窗口应显示该表中所有可用的电子邮件地址，并且用户应该能够选择指定的电子邮件地址（多个），并且它应该以“某种方式”保存在另一个表中或 . ...

```
SOME WAY - I am looking for a way to do this. 
Because each Id will not be sent to all email address in a department.
There will be lot of Id created everyday
I need to save them because, It works with a reminder system. 
```

如果需要，我很乐意提供更多信息，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:36:25.423

如果我理解正确，您的代码中需要一个 sql 查询，以便在按下按钮时带回所需部门的所有电子邮件？如果是这样，您的代码和查询将类似于

```
 if (buttonDepartment1.click){ //where the button pressed is called buttonDepartment1
        messageBoxDialog =('select * from Table1 where Department1 like "yes"')}; 
```

这是从我的头顶写的，我不确定它有多完美。

您还需要编写代码来说明何时从列表中选择或单击电子邮件，以创建表并将该数据插入该表中？

我不确定选择电子邮件，但插入新表不会太难，比如

```
 For (email){
       connection.query("create table email(select email from Table1 where id like"' + email + '")}; 
```

电子邮件是从表中选择的。您需要创建变量并将其存储在您的代码中，以便在从 messageBox 中选择它时使用。

我确信可能有一种更简单的方法可以做到这一点，但正如我在脑海中所说的那样，我认为这就是你正在寻找的东西。

# svn - 重写中断svn

> ID：15139054
> 
> 赞同：3
> 
> 时间：2013-02-28T15:14:55.423
> 
> 标签：svn, mod-rewrite

我正在尝试创建一个基于 HTTP_USER_AGENT 的重写，由于各种原因，我不能将 svn 放在根目录中，但需要将它放在 /svn 上

现在的规则如下：

```
RewriteCond %{HTTP_USER_AGENT} ^SVN
RewriteRule ^(.*)$ /svn/$1 [L] 
```

位置定义是：

```
 <Location /svn>
    DAV svn
    SvnPath /home/subgit/repos/testrepo
    AuthType Basic
    AuthName "subgit"
    AuthBasicProvider file
    AuthUserFile /home/subgit/etc/subgit
    AuthzSVNAccessFile /home/subgit/etc/subgit.access
    <LimitExcept GET PROPFIND OPTIONS REPORT>
      Require valid-user
    </LimitExcept>
  </Location> 
```

但是尝试使用 SVN 客户端访问它，我得到以下结果：

> svn：E175002：无法连接到位于 URL ' [http://server.tld/trunk](http://server.tld/trunk) ' 的存储库 svn：E175002：OPTIONS 请求在响应中返回了无效的 XML：第 1 行的 XML 解析错误：未找到元素（[http: //server.tld/trunk](http://server.tld/trunk) )

删除规则并查询 /svn/trunk 工作正常。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:22:30.553

首先，请求永远不会到达 mod_dav_svn，因为默认情况下 mod_rewrite 将替换视为文件路径而不是 URI。由于它不是 URI，因此 Location 部分不匹配。您可以使用`PT`标志`RewriteRule`来将替换视为 URI，从而允许它访问 SVN： [http ://httpd.apache.org/docs/current/rewrite/flags.html#flag_pt](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_pt)

但是，即使您添加了`PT`标志，您也会遇到另一个问题。特别是关于 URL 不是同一个存储库的错误。这是因为服务器向客户端提供了 URI，而客户端已经意识到 SVN 提供的 URI 不是它发现的存储库根 URL 的子级。

您尝试基于 UserAgent 检测 SVN 服务器并不能真正保证工作。大多数 SVN 客户端都在使用 subversion 项目库，但是有几个独立的实现可能会或可能不会遵循该模式。

最终，重写或重定向 URI 对 Subversion 不起作用。该协议对此并不友好。我建议只使用`/svn/trunk`.

# android - 使用完整的详细信息启动 android 模拟器 -avd

> ID：15139055
> 
> 赞同：1
> 
> 时间：2013-02-28T15:14:56.810
> 
> 标签：android, android-emulator, qemu

我可以像这样启动android模拟器

```
emulator -avd testdevice 
```

有没有办法可以将此调用转换为完全相同的调用，并在 cli 中提供所有详细信息：

```
emulator -sysdir $ANDROID_TARGET/images 
-kernel $ANDROID_TARGET/images/kernel-qemu 
-datadir $ANDROID_AVD 
-ramdisk $ANDROID_TARGET/images/ramdisk.img 
-system $ANDROID_TARGET/images/system.img 
-data $ANDROID_AVD/userdata-qemu.img 
-cache $ANDROID_AVD/cache.img 
-sdcard $ANDROID_AVD/sdcard.img 
-snapstorage $ANDROID_AVD/snapshots.img 
-no-snapshot-load 
-noskin 
-show-kernel 
```

# javascript - 这些东西是否容易受到 JavaScript 注入的影响？

> ID：15139057
> 
> 赞同：1
> 
> 时间：2013-02-28T15:15:02.110
> 
> 标签：javascript, security

我有几个地方可以将用户输入显示给其他用户。

一个输入框。

`<p>`标签之间的输入框中的值。

`<a>`标签之间的输入框中的值。

它几乎是用户输入显示名称的一种形式，然后您会在下一页上的两个位置上看到名称显示在两个标签之间的位置。某些用户可以返回并编辑此文本框。

如果用户输入“hello world”，下一个用户将看到一个预先填充有“hello world”的文本框，以及`<a href="#">hello world</a> <p>hello world</p>`

我对 JavaScript 或 JavaScript 安全性不太熟悉。这是否容易受到某种方式的攻击？如果是这样，我应该怎么做才能防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:20:57.947

是的，这打开了一个可能的 XSS 漏洞。

您应该使用`.innerText`要填充用户内容的节点的属性。

```
var node = document.getElementById('foo');
node.innerText = 'whatever the user entered'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:18:20.323

是的，这很容易受到 XSS 攻击，请查看[https://www.owasp.org/index.php/Top_10_2010-A2](https://www.owasp.org/index.php/Top_10_2010-A2)

# doxygen - 外部文档页面与 Doxygen 之间的名称冲突

> ID：15139061
> 
> 赞同：1
> 
> 时间：2013-02-28T15:15:08.443
> 
> 标签：doxygen

我正在尝试通过 .tag 文件在我的 Doxygen 文档中链接多个库文档。

问题是，这些库中的每一个都包含具有相同名称的附加 .dox 页面。

结构如下所示：

*   图书馆1
    *   页面.dox
    *   其他文件正确处理
    *   library1.tag
*   Library2（链接 library1.tag）
    *   页面.dox
    *   其他文件正确处理
    *   library2.tag
*   链接两个 .tag 文件的主项目
    *   页面.dox
    *   其它文件

在主项目文档“相关页面”列表中，我只得到以下链接：

*   Library1（外部）（正如预期的那样）
*   页面（外部）（这实际上是 Library1 的 page.dox，与预期不同）
*   Library2（外部）（正如预期的那样）

Main Project 中的 page.dox 不存在。

（Library2的文档中也有同样的情况：它自己的page.dox被Library1 page.dox隐藏了）

如何强制 Doxygen 区分不同的 page.dox 文件而不重命名它们？

# java - 在 Eclipse 中使用带有 JAX-WS 的 Java 枚举和数组列表

> ID：15139062
> 
> 赞同：1
> 
> 时间：2013-02-28T15:15:09.760
> 
> 标签：java, jakarta-ee, enums, jax-ws, webmethod

我目前正在 Eclipse（Juno、JavaEE）中使用 JAX-WS 构建 Web 服务。我仅限于使用 JAX-WS 和 Java 1.6（这是我无法控制的更新）

当我尝试从我的代码生成 Web 服务时遇到的错误是：

> 服务类“webservice.WebService”不符合 JAX-RPC 1.1 规范的一项或多项要求，并且可能无法正确部署或运行​​。
> 
> 通过服务类“webservice.WebService”使用的值类型“java.lang.Enum”上的字段或属性“declaringClass”具有 JAX-RPC 不支持的数据类型“java.lang.Class” 1.1 规范。该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。
> 
> 通过服务类“webservice.WebService”使用的值类型“webservice.ReferenceDataSetList”上的字段或属性“referenceDataSet”具有数据类型“java.util.ArrayList”，JAX-RPC 1.1 规范不支持该数据类型. 该类型的实例可能无法正确序列化或反序列化。可能会导致数据丢失或 Web 服务完全失败。

生成此警告的 @WebMethod 是：

```
@WebMethod
public RequestStatus setReferenceData(ReferenceDataSetList refData)
{
    // TODO
    RequestStatus status = new RequestStatus(Result.FAILURE);

    return status;
} 
```

*   RequestStatus 是一个包含枚举结果和可选字符串消息的对象。
*   ReferenceDataSetList 包含一个 ArrayList 并且 ReferenceDataSet 与 RequestStatus 具有相同的结构（不同的枚举类型）

我环顾四周，找不到任何解决此警告的方法。

我真的不知道下一步该往哪里看...

**编辑** 我应该补充一点，我可以运行该服务，但我得到的错误是当我尝试生成到 WSDL 以便我可以构建客户端时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:32:41.897

我不确定可能是什么问题。我在 JDK 6 中使用 JAX-WS RI 2.1.6（这个运行时是 JDK 的一部分）并且运行顺利。

枚举：

```
public enum Result {
    FAILURE;
} 
```

响应包装器：

```
public class RequestStatus {

    private Result result;

    public RequestStatus() {
    }

    public RequestStatus(Result result) {
        this.result = result;
    }

    public Result getResult() {
        return result;
    }

    public void setResult(Result result) {
        this.result = result;
    }

} 
```

请求包装器：

```
public lass ReferenceDataSetList {

    private List<String> list;

    public List<String> getList() {
        return list;
    }

    public void setList(List<String> list) {
        this.list = list;
    }

} 
```

和 SEI 类：

```
package test;

import java.util.List;

import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.xml.ws.Endpoint;

@WebService
public class TestService {

    @WebMethod
    public RequestStatus setReferenceData(ReferenceDataSetList refData) {
        return new RequestStatus(Result.FAILURE);
    }

    public static void main(String[] args) {
        Endpoint.publish("http://localhost:8084/service", new TestService());
    }

} 
```

控制台输出是：

```
28/02/2013 10:34:43 AM com.sun.xml.internal.ws.model.RuntimeModeler getRequestWrapperClass
INFO: Dynamically creating request wrapper Class test.jaxws.SetReferenceData
28/02/2013 10:34:43 AM com.sun.xml.internal.ws.model.RuntimeModeler getResponseWrapperClass
INFO: Dynamically creating response wrapper bean Class test.jaxws.SetReferenceDataResponse 
```

我可以在`http://localhost:8084/service?wsdl`. 列表和枚举（片段）的架构是：

```
<xs:complexType name="setReferenceData">
<xs:sequence>
<xs:element name="arg0" type="tns:referenceDataSetList" 
            minOccurs="0"></xs:element>
</xs:sequence>
</xs:complexType>

<xs:complexType name="referenceDataSetList">
<xs:sequence>
<xs:element name="list" type="xs:string" nillable="true" minOccurs="0" 
            maxOccurs="unbounded"></xs:element>
</xs:sequence>
</xs:complexType>

<xs:complexType name="requestStatus">
<xs:sequence>
<xs:element name="result" type="tns:result" minOccurs="0"></xs:element>
</xs:sequence>
</xs:complexType>

<xs:simpleType name="result">
<xs:restriction base="xs:string">
<xs:enumeration value="FAILURE"></xs:enumeration>
</xs:restriction>
</xs:simpleType>
</xs:schema> 
```

# python - Python 中的属性访问：首先是插槽，然后是 __dict__？

> ID：15139067
> 
> 赞同：7
> 
> 时间：2013-02-28T15:15:20.770
> 
> 标签：python, attributes, slots

在下面的示例中，`x`即使`x`存在于对象的插槽中，也可以从对象的插槽中访问属性`__dict__`（这不是典型或可能有用的情况，但我很好奇）：

```
>>> class C(object):
...     __slots__ = 'x'
...     
>>> class D(C):
...     pass
... 
>>> obj = D()
>>> obj.x = 'Stored in slots'
>>> obj.__dict__
{}
>>> obj.__dict__['x'] = 'stored in __dict__'
>>> obj.x
'Stored in slots' 
```

这种访问顺序（插槽优先）是记录在案的行为吗？或者只是一个实现细节？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T15:22:03.080

是的，`__dict__`只有在查阅了数据描述符之后才会查阅对象的 。`__slots__`属性被实现为数据描述符。

请参阅[调用描述符](http://docs.python.org/2/reference/datamodel.html#invoking-descriptors)：

> 例如绑定，描述符调用的优先级取决于定义的描述符方法。描述符可以定义和`__get__()`的任意组合。如果未定义，则访问该属性将返回描述符对象本身，除非该对象的实例字典中有值。如果描述符定义和/或，它是一个数据描述符；如果两者都没有定义，则它是非数据描述符。通常，数据描述符定义了and ，而非数据描述符只有方法。带有和定义的数据描述符总是覆盖实例字典中的重新定义。相反，非数据描述符可以被实例覆盖。`__set__()``__delete__()``__get__()``__set__()``__delete__()``__get__()``__set__()``__get__()``__set__()``__get__()`

并在同一页面上，[关于插槽的部分](http://docs.python.org/2/reference/datamodel.html#slots)：

> `__slots__`通过为每个变量名创建描述符（实现描述符）在类级别实现。因此，类属性不能用于设置由`__slots__`;定义的实例变量的默认值。否则，类属性将覆盖描述符分配。

# javascript - 带有下拉菜单的自定义反馈表

> ID：15139068
> 
> 赞同：0
> 
> 时间：2013-02-28T15:15:22.583
> 
> 标签：javascript, jquery, slidetoggle, slidedown

我已经创建了自定义反馈表单，但问题是当我单击第一个选项卡时，它的幻灯片就像我想要的那样，但是当向下滑动并且我单击最后一个选项卡时，我不想再次开始滑动。我要一样：[http](http://www.feedbackify.com/) ://www.feedbackify.com/ （点击反馈看demo）。js：

```
 $(function () {
        $('#other').click(function () {
            $(".details").hide();
            $('#other-slide').slideDown('slow');
        });

        $('#problem').click(function () {
            $(".details").hide();
            $('#problem-slide').slideDown('slow');
        });

    }); 
```

我的演示：http: [//jsfiddle.net/VnXaU/1/](http://jsfiddle.net/VnXaU/1/)

请帮我完成这个表格:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:34:16.067

我做了`some mods in the script`一个`wrapper div for the sliders`。

```
<div class='form-wrapper'>
  ......slider divs.....
</div> 
```

## 和 jQuery：

```
$('#problem, #other').click(function () {
      var ID = this.id;
      if ($('.form-wrapper').is(':not(:visible)')) {
          $('.form-wrapper').slideDown('fast').promise().done(function () {
              $('[id="' + ID + '-slide"]').fadeIn('slow');
          });
      } else {
          $('[id$="-slide"]').hide();
          $('[id="' + ID + '-slide"]').fadeIn('slow');
      }
  }); 
```

[**在这里找到这个小提琴**](http://jsfiddle.net/VnXaU/5/)

# c++ - c++ 右值引用和移动语义

> ID：15139080
> 
> 赞同：6
> 
> 时间：2013-02-28T15:15:59.037
> 
> 标签：c++, c++11, move-semantics

所以我昨天在 youtube 上观看 c++ 视频，偶然发现了一个关于 C++-11 右值引用和移动语义的视频。我想我从广义上理解了这个概念，但是今天当我和 TA 一起浏览我的代码时，他问我为什么没有`std::pair<HostName, IPAddress>& p`在下面的代码中引用（比如）。在这种情况下，我根本没有考虑过，但是当他问我时，我记得视频中说“在 C++-11 中，您通常应该使用按值传递”。

因此，我的问题是：在下面的代码中，是否`std::pair<HostName, IPAddress> p`会更好`std::pair<HostName, IPAddress>& p`？是否会使用移动语义，它会有所作为吗？

```
IPAddress NameServer::lookup( const HostName& host ) const {
    auto it = std::find_if( vec.begin(), vec.end(),
                       [host] ( std::pair<HostName, IPAddress> p ) {
        return p.first == host;
    } );
    ...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T15:18:36.200

在这种情况下，您应该通过`const`引用传递。当您最终想要生成传递值的副本或移动时，按值传递是有意义的；如果你不想复制也不想移动，特别是如果你只想**观察**，你应该通过 ( `const`) 引用。

在这里，您的 lambda 谓词不需要生成它在输入中接收到的对的任何副本：因此，没有理由按值传递（也没有通过 vaue*捕获）。*

```
IPAddress NameServer::lookup( const HostName& host ) const {
    auto it = std::find_if( vec.begin(), vec.end(),
        [&host] ( std::pair<HostName, IPAddress> const& p ) {
    //   ^^^^^                                   ^^^^^^
        return p.first == host;
    } );
    ...
} 
```

相反，考虑这种情况（典型的 C++03 代码）：

```
struct A
{
    A(string const& s) : _s(s) { }
private:
    string _s;
}; 
```

在 C++11 中，由于您具有移动语义，而不是通过`s`常量引用传递，您可以简单地通过值传递并将其移动到成员变量中：

```
struct A
{
    A(string s) : _s(move(s)) { }
private:
    string _s;
}; 
```

这是有道理的，因为我们最终总是会生成正在传递的值的副本。

[正如Benjamin Lindley](https://stackoverflow.com/users/440119/benjamin-lindley)在评论中正确指出的那样，如果您可以接受，您*可以*编写上述构造函数的重载，通过引用获取它们的参数：

```
struct A
{
    A(string const& s) : _s(s) { }    // 1 copy
    A(string&& s) : _s(move(s)) { }   // 1 move
private:
    string _s;
}; 
```

上面的版本只允许对左值执行一次复制，对右值执行一次移动，而按值传递的版本总是执行一次额外的移动。因此，如果移动对于您的参数类型而言是一项昂贵的操作，则此解决方案可能更可取（这不是 的情况`string`，但可能是其他类型的情况）。

*但是，如果您的函数需要多个*参数，这样做可能会很麻烦。为了减少工作量，您可以编写一个单独的函数模板，该模板接受*通用引用*并完美转发其参数。[StackOverflow 上的这个问答与](https://stackoverflow.com/questions/14197526/should-all-most-setter-functions-in-c11-be-written-as-function-templates-accep)主题相关。

# php - 覆盖 joomla template.php 正文背景颜色（网站背景）

> ID：15139088
> 
> 赞同：0
> 
> 时间：2013-02-28T15:16:13.447
> 
> 标签：php, html, css, joomla, joomla-template

我正在使用带有艺术家模板的 joomla 2.5，我编写了一个自定义组件，用于显示和排序产品列表，产品本身也是组件的一部分并保存在数据库中。我要做的是根据if条件为特定产品或产品类别设置不同的正文背景

```
if (product_category == 1):
   <body id="background1">
   ... 
```

但问题是在`<body id="someID">`加载组件之前在template.php中加载了，所以即使我在组件中设置了body背景，背景也不会改变。但是，如果我从 template.php 中删除 body css id decleration 并将其保留为`<body>`而不是`<body id="someID">`，则组件`<body id...>`声明会正确设置背景，但是与该组件无关的任何其他页面都有空白的白色背景。

我认为我需要做的是找到一种方法来设置默认背景，以防其他地方未定义背景，或者以某种方式覆盖当前背景并使组件再次加载正文背景，我对 php 和 css 相对陌生，但是有一点帮助和指导，我想我可以找到自己的方式:) 任何帮助将不胜感激！！！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:29:08.987

嗨@mar​​ko 和@Lodder 非常感谢您的回复！不幸的是，您提供的解决方案不起作用，因为样式表是在组件之前加载的，因此模板代码中的任何新设计更改都不会影响模板设计。不幸的是，由于template.php无法初始化组件veriables（例如Category_id）我无法创建条件并检查category_Id是什么并相应地更改背景......我找到了一个简单的解决方案，它在我的组件代码中实现了这个代码：

```
app =& JFactory::getApplication(); 
```

if ($category_id == 1) $app->setTemplate("template2");
别的 ....

$this 只是根据 category_id 设置一个新模板，我知道这不是内存效率，加载时间更长，最糟糕的是我需要为每个类别创建一个新模板......但这可以解决问题。 ..如果您能想到任何更好的解决方案，我将不胜感激？

十分感谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:33:55.327

尝试做这样的事情：

```
<?php
$doc = JFactory::getDocument();
  if(product_category == 1){
     $css = 'body {'
           .'background: url(' . JURI::root() . 'components/com_yourcomponent/file.jpg) !important;'
           .'}';
     $doc->addScriptDeclaration($css);
  }    
?> 
```

您需要将背景的路径更改为适合您需要的任何内容。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:35:47.523

在 template.php 文件中，在加载正文之前，您可以这样做

```
if (JRequest::getCmd('option') == 'com_mycontent'){
    echo '<body id="myid">';
}
else
    echo '<body id="anotherid">'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T21:35:03.753

实际上，您可以只使用菜单项中的内置页面类后缀参数来完成您想要的。如果您有自定义模板，请将其添加到其中：

```
<?php
$app = JFactory::getApplication('site');
$params =  & $app->getParams('com_content');
$pageclass = trim($params->get('pageclass_sfx'));
?>
<body id="<?php echo $pageclass ? $pageclass : 'default'; ?>"> 
```

大多数信誉良好的模板开发人员都包含页面类后缀的代码，因此除了在要自定义的页面参数中添加一些内容之外，您可能不需要做任何事情。

通过将 ID 添加到 body 标记，可以确保您可以轻松准确地覆盖页面上的任何 CSS。

# c# - 从存储库评估数据到转发器

> ID：15139089
> 
> 赞同：1
> 
> 时间：2013-02-28T15:16:15.227
> 
> 标签：c#, asp.net

我正在尝试从 .cs 文件中的数据绑定将数据分配给中继器。在数据绑定方面，我已经离开了 ASP 和 C# 游戏一段时间，并且完全忘记了基础知识。

```
public partial class Project : System.Web.UI.Page {
IUnitOfWork unitofwork = new UnitOfWork();
    IProjectRepository _projectRepo = null;
    IProjectRepository Projects
    {
        get
        {
            if (_projectRepo == null)
                _projectRepo = new ProjectRepository(unitofwork);
            return _projectRepo;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Request.IsAuthenticated)
        {
            FormsAuthentication.RedirectToLoginPage();
        }

        var projectId = Convert.ToInt32(Request.QueryString["ProjectId"]);
        var projectTask = Request.QueryString["ProjectStatus"];

        if (!IsPostBack)
        {
            currentProject = Projects.GetByExpression(p => p.ID == projectId).FirstOrDefault();
            currentProject = Projects.GetByExpression(p => p.Status == projectTask).FirstOrDefault();
        } 
```

将数据分配给中继器的最佳方法是什么。如果这对任何人来说都是重要信息，那么中继器是一种基本的表格格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:24:45.480

`GridViews`中继器与or等​​没有什么不同`DropDownLists`。您需要做的就是收集数据，设置 DataSource，然后调用 DataBind()。

例如：

```
var data = rep.GetData();
repeater.DataSource=data;
repeater.DataBind(); 
```

中继器本身必须有标记代码来定义数据的绑定方式。例如：

```
<asp:Repeater id="cdcatalog" runat="server">
<ItemTemplate>
   <asp:TextBox id="txtName" runat="server" Text='<%#Bind("SomeProperty")%>' />
</ItemTemplate>
</asp:Repeater> 
```

# html - 在 SVG 组上设置变换原点在 Firefox 中不起作用

> ID：15139090
> 
> 赞同：26
> 
> 时间：2013-02-28T15:16:21.617
> 
> 标签：html, css, firefox, svg, css-transforms

我在让 transform-origin 在 Firefox 中工作时遇到问题（v.18+，其他版本未测试）。Webkit 浏览器按预期工作。我正在尝试将原点设置为组的中心，但到目前为止我尝试过的任何方法都没有奏效。

这是代码：

```
#test {
  -webkit-transform-origin: 50% 50%;
  transform-origin: center center;
  -webkit-animation: prop 2s infinite;
  animation: prop 2s infinite;
}

@-webkit-keyframes prop {
  0% {
    -webkit-transform: scale(1, 1);
  }
  20% {
    -webkit-transform: scale(1, .8);
  }
  40% {
    -webkit-transform: scale(1, .6);
  }
  50% {
    -webkit-transform: scale(1, .4);
  }
  60% {
    -webkit-transform: scale(1, .2);
  }
  70% {
    -webkit-transform: scale(1, .4);
  }
  80% {
    -webkit-transform: scale(1, .6);
  }
  90% {
    -webkit-transform: scale(1, .8);
  }
  100% {
    -webkit-transform: scale(1, 1);
  }
}

@keyframes prop {
  0% {
    transform: matrix(1, 0, 0, 1, 0, 0);
  }
  20% {
    transform: matrix(1, 0, 0, .8, 0, 0);
  }
  40% {
    transform: matrix(1, 0, 0, .6, 0, 0);
  }
  50% {
    transform: matrix(1, 0, 0, .4, 0, 0);
  }
  60% {
    transform: matrix(1, 0, 0, .2, 0, 0);
  }
  70% {
    transform: matrix(1, 0, 0, .4, 0, 0);
  }
  80% {
    transform: matrix(1, 0, 0, .6, 0, 0);
  }
  90% {
    transform: matrix(1, 0, 0, .8, 0, 0);
  }
  100% {
    transform: matrix(1, 0, 0, 1, 0, 0);
  }
}
```

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="128px" height="128px" viewBox="0 0 16 16">
    <g id="test">
        <rect fill="#404040" x="7.062" y="3.625" width="1.875" height="8.75"/>
    </g>
</svg>
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-23T07:30:20.330

我试图使用 CSS 过渡围绕其中心点旋转一个简单的 cog svg 图形。我在使用 Firefox 时遇到了和你一样的问题；transform-origin 似乎没有效果。

解决方案是绘制原始 svg 形状，使其中心位于坐标 0, 0：

```
<svg x="0px" y="0px" width="400px" height="400px" viewBox="0 0 400 400">
    <rect id="myObject" x="-50" y="-50" fill="#E52420" width="100" height="100"/>
</svg> 
```

然后在它周围添加一个组并翻译到你想要的位置：

```
<svg x="0px" y="0px" width="400px" height="400px" viewBox="0 0 400 400">
    <g transform="translate(150, 100)">
        <rect id="myObject" x="-50" y="-50" fill="#E52420" width="100" height="100"/>
    </g>
</svg> 
```

现在您可以应用应该在 Firefox 中工作的 css 转换（我使用基于用户操作 ( `js-rotateObject`) 的 JavaScript 向 HTML 标记添加一个类，并使用 Minimizr 检查浏览器是否可以处理转换和转换 ( `.csstransforms.csstransitions`)：

```
#myObject{
    transform: rotate(0deg);
    transition: all 1s linear;
}

.csstransforms.csstransitions.js-rotateObject #myObject{
    transform: rotate(360deg);
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-08-09T03:40:06.067

从 Firefox 55（2017 年 8 月 8 日发布）开始，现在支持“transform-b​​ox”CSS 属性。将其设置为“填充框”将在 SVG 树中的变换原点方面模仿 Chrome。

```
transform-origin: center; /* or transform-origin: 50% */
transform-box: fill-box; 
```

**2017-9-14 更新**

您可以在 SVG 结构中选择您需要的元素，或者正如 Tom 在评论中指出的那样，您可以简单地将其应用于 SVG 元素的所有后代（只要样式不会干扰您尝试的任何其他内容）达到）：

```
svg .my-transformed-element {
    transform-origin: center; /* or transform-origin: 50% */
    transform-box: fill-box;
} 
```

或者

```
svg * {
    transform-origin: center; /* or transform-origin: 50% */
    transform-box: fill-box;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-12T20:28:49.083

@PatrickGrey 的回答对我来说非常有效，但我需要处理具有多个路径的更复杂的 SVG。我能够使用 Inkscape 完成此修复，但这是一个多步骤的过程。我建议在打开 Inkscape XML 编辑器的情况下执行此操作，这样您就可以看到正在发生的事情。

1.  选择要转换的元素，然后选择“*对象”>“组*”来创建一个新组。拖动该组，使其位于文档左上角的中心。这`transform="translate(…, …)"`会将属性应用于组。

2.  从菜单中选择*对象 > 取消组合。*这将“展平”变换属性，将任何坐标变换应用于组中的元素。

3.  仍应选择原始元素。选择“*对象”>“组*”将它们放回组中。如果您使用 CSS 来转换元素，请将您的`ID`or`class`属性添加到该组（XML 编辑器对此非常有用，或者您可以通过右键单击它并选择*Object Properties*来修改组的 ID 。类将需要通过 XML 编辑器或稍后在您的文本编辑器中添加。）。

4.  选择组后，再次选择*对象 > 组*。这将围绕原始组创建一个新组。

5.  将此新组拖动到文档中的正确位置。如果您使用 XML 编辑器检查 DOM，您会看到 DOM`transform="translate(…, …)"`已添加到*外部*组中。

6.  任何 CSS 转换现在都可以应用于*内部*组，Chrome 和 Firefox 将一致地处理它们。

感谢@PatrickGrey.co.uk 的初步见解。最棘手的部分是弄清楚如何将初始变换应用于复杂对象的坐标，而无需借助头发拉扯和大量数学运算。StackOverflow 上有几个地方记录了“分组、移动、取消分组”的技巧，但直到今天我才忘记它。希望这些步骤可以为其他人节省相当多的悲伤。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-03T02:26:21.767

根据[此错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=1209061)中的评论，Firefox 的默认值`transform-box`与 Chrome 的不同。从 Firefox 55 开始，现在可以在不设置标志的情况下设置此属性。

这为我解决了这个问题：

```
transform-box: fill-box;
transform-origin: center center; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-01T17:50:30.807

如果您可以使用固定的像素值，请改用它来使其工作。

```
-moz-transform-origin: 25px 25px;
-ms-transform-origin:  25px 25px;
-o-transform-origin: 25px 25px;
-webkit-transform-origin:  25px 25px;
transform-origin: 25px 25px; 
```

一些浏览器仍然不支持带有百分比值的转换原点，至少不是在所有情况下。如果您没有固定的 px 值，请为每个 javascript 计算一个并使用您选择的库（如 jQuery、Greensock 等）来设置该值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-21T00:36:26.993

FWIW，我能够使用 Greensock 解决我的问题，使用 TweenMax 为内部的各个路径设置动画，这在 Firefox Gecko 和 Webkit 浏览器（Safari/Chrome）中工作它在计算原点方面做得更好（不完全确定如何，但它对我有用）

有一个带有两个齿轮的 SVG，我想在另一个形状内旋转。所以我给每个齿轮一个唯一的 id (id="gear1", id="gear2") 然后用 Greensock 旋转它们，如下所示：

```
TweenMax.to("#gear1", 3.2, { 
  repeat: -1, //repeat infintely 
  ease: Linear.easeNone,  //no easing, linear motion 
  rotation:360,  //amount to rotate (full) 
  transformOrigin:"center"  //transform origin that WORKS :) 
}); 
```

#gear2 相同，时间稍有不同，并且跨浏览器效果很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-18T08:52:35.903

缺少`-moz-transform-origin`您的 css 代码中的 。

```
#test{
    -webkit-transform-origin: 50% 50%;
    -moz-transform-origin: 50% 50%;
    ...
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-18T10:16:02.970

另外，您可以考虑禁用不支持的 Firefox 版本的动画`transform-box: fill-box`

像这样：

```
@supports (-moz-transform: rotate(0deg)) and (not (transform-box: fill-box)) {
    #test {
        animation: none;
    }
} 
```

第一条语句只是检查您是否在使用 firefox，因为无论如何您都不想在其他浏览器上禁用它。第二条语句检查`transform-box`浏览器是否支持 -property。我在当前的项目中使用了它，它就像一个魅力。

# android - 无法从适配器中的 getView 返回两个不同的视图

> ID：15139092
> 
> 赞同：1
> 
> 时间：2013-02-28T15:16:24.287
> 
> 标签：android, android-adapter

在开发我的第一个应用程序时，我试图在列表视图中将部分添加到我的元素中。所有项目都有一个日期，我想在每次日期更改时返回一个包含日期的简单布局。在我的适配器中，我有以下内容：

```
 public View getView(int position, View convertView, ViewGroup parent) {
    Match match = matchArrayList.get(position);
    Calendar matchTime = match.getDate();
    SimpleDateFormat date = new SimpleDateFormat("dd-MM-yyyy");
    SimpleDateFormat time = new SimpleDateFormat("HH:mm"); 
    String sDate = date.format(matchTime.getTime());
    SeparatorHolder separatorHolder = null;
    MatchHolder matchHolder = null;

    if (convertView == null) {
        if (!sDate.equals(_lastDate)) {
            convertView = inflator.inflate(R.layout.date_separator, null);
            separatorHolder = new SeparatorHolder();
            separatorHolder.Date = (TextView) convertView.findViewById(R.id.date);
            convertView.setTag(separatorHolder);
        } else {
            convertView = inflator.inflate(R.layout.match_layout, null);
            matchHolder = new MatchHolder();
            matchHolder.Time = (TextView) convertView.findViewById(R.id.time);
            matchHolder.HomeTeam = (TextView) convertView.findViewById(R.id.homeTeam);
            matchHolder.AwayTeam = (TextView) convertView.findViewById(R.id.awayTeam);
            matchHolder.HomeTeamImage = (ImageView) convertView.findViewById(R.id.homeTeamImageView);
            matchHolder.AwayTeamImage = (ImageView) convertView.findViewById(R.id.awayTeamImageView);
            matchHolder.TournamentImage = (ImageView) convertView.findViewById(R.id.tournamentImageView);
            matchHolder.TVChannelImage = (ImageView) convertView.findViewById(R.id.tvChannelImageView);
            convertView.setTag(matchHolder);
        }
    } 
    else {
        if (!sDate.equals(_lastDate)) 
            matchHolder = (MatchHolder) convertView.getTag();
        else
            separatorHolder = (SeparatorHolder) convertView.getTag();
    }

    if (!sDate.equals(_lastDate)) {
        _lastDate = sDate;
        separatorHolder.Date.setText(sDate);
    } else {
        UrlImageViewHelper.setUrlDrawable(matchHolder.TournamentImage, match.getTournamentImage());
        UrlImageViewHelper.setUrlDrawable(matchHolder.HomeTeamImage, match.getHomeTeamImage());
        matchHolder.HomeTeam.setText(match.getHomeTeam());
        UrlImageViewHelper.setUrlDrawable(matchHolder.AwayTeamImage, match.getAwayTeamImage());
        matchHolder.AwayTeam.setText(match.getAwayTeam());
        matchHolder.Time.setText(time.format(matchTime.getTime()));
        UrlImageViewHelper.setUrlDrawable(matchHolder.TVChannelImage, match.getTVChannelImage());
    }

    return convertView;
} 
```

一切正常，直到我到达最后一行：

```
return convertView; 
```

向该行添加一个断点并尝试单步通过它会立即引发某种错误。

现在是 Android 和 Eclipse 的新手，我真的找不到类似于我在 Visual Studio 中编写 .Net 时得到的堆栈跟踪。我所能看到的是，在 Eclipse 的 Debug 透视图中，打开了一个带有 AbsListView.class 的选项卡......

任何人都可以理解我想要实现的目标吗？也许能帮上忙？我查看了[此链接](http://android.cyrilmottier.com/?p=232)，据我所知，他还根据项目类型返回两个不同的视图：-？

编辑：实施波士顿街道答案并将代码更改为

```
@Override
public int getItemViewType(int position) {
    Match match = matchArrayList.get(position);
    if (match.HomeTeam == "") {
        return 0;
    }
    else {
        return 1;
    }
} 
```

现在它可以工作了，但在我的列表 FC 的我的应用程序中滚动

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T15:20:27.387

您的问题中没有足够的信息。但是，我会尽力而为:-)

如果您返回多个（类型）`View`（`R.layout.date_separator`或`R.layout.match_layout`），则必须实现适配器的`getViewTypeCount`和`getItemViewType`方法：

```
@Override
public int getViewTypeCount() {
    return 2;
}

@Override
public int getItemViewType(int position) {
    Match match = matchArrayList.get(position);
    ...
    ...
    if (!sDate.equals(_lastDate)) {
        return 0; // matches R.layout.date_separator
    }
    else {
        return 1; // matches R.layout.match_layout
    }
} 
```

它与视图的回收有关。当 时`convertView != null`，您必须确保参数与较早时间完成`convertView`的原始膨胀相匹配。`convertView`该方法`getItemViewType`可以确保这一点。

这是一个**建议** `getView`的实现：

*   通胀`convertView`并非完全由`getItemViewType`
*   在第二个 if 语句中切换了 if 和 else（`SeparatorHolder`并`MatchHolder`在调用中切换`convertView.getTag`）

.

```
public View getView(int position, View convertView, ViewGroup parent) {
    Match match = matchArrayList.get(position);
    Calendar matchTime = match.getDate();
    SimpleDateFormat date = new SimpleDateFormat("dd-MM-yyyy");
    SimpleDateFormat time = new SimpleDateFormat("HH:mm"); 
    String sDate = date.format(matchTime.getTime());
    SeparatorHolder separatorHolder = null;
    MatchHolder matchHolder = null;

    int itemType = getItemViewType(position);
    if (convertView == null) {
    if (itemType == 0) {
        convertView = inflator.inflate(R.layout.date_separator, null);
        separatorHolder = new SeparatorHolder();
        separatorHolder.Date = (TextView) convertView.findViewById(R.id.date);
        convertView.setTag(separatorHolder);
    } else {
        convertView = inflator.inflate(R.layout.match_layout, null);
        matchHolder = new MatchHolder();
        matchHolder.Time = (TextView) convertView.findViewById(R.id.time);
        matchHolder.HomeTeam = (TextView) convertView.findViewById(R.id.homeTeam);
        matchHolder.AwayTeam = (TextView) convertView.findViewById(R.id.awayTeam);
        matchHolder.HomeTeamImage = (ImageView) convertView.findViewById(R.id.homeTeamImageView);
        matchHolder.AwayTeamImage = (ImageView) convertView.findViewById(R.id.awayTeamImageView);
        matchHolder.TournamentImage = (ImageView) convertView.findViewById(R.id.tournamentImageView);
        matchHolder.TVChannelImage = (ImageView) convertView.findViewById(R.id.tvChannelImageView);
        convertView.setTag(matchHolder);
    }
    } 
    else {
        if (itemtype == 0) 
            separatorHolder = (SeparatorHolder) convertView.getTag();
        else
            matchHolder = (MatchHolder) convertView.getTag();
    }

    if (itemType == 0) {
    _lastDate = sDate;
    separatorHolder.Date.setText(sDate);
    } else {
    UrlImageViewHelper.setUrlDrawable(matchHolder.TournamentImage, match.getTournamentImage());
    UrlImageViewHelper.setUrlDrawable(matchHolder.HomeTeamImage, match.getHomeTeamImage());
    matchHolder.HomeTeam.setText(match.getHomeTeam());
    UrlImageViewHelper.setUrlDrawable(matchHolder.AwayTeamImage, match.getAwayTeamImage());
    matchHolder.AwayTeam.setText(match.getAwayTeam());
    matchHolder.Time.setText(time.format(matchTime.getTime()));
    UrlImageViewHelper.setUrlDrawable(matchHolder.TVChannelImage, match.getTVChannelImage());
    }

    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:01:23.567

我看到问题已经结束，但是您应该像这样使用 equal 方法进行字符串比较`match.HomeTeam == ""`。查看此[答案](https://stackoverflow.com/a/513839/1645641)以获取更多信息

# flash - 重用图像影片剪辑

> ID：15139094
> 
> 赞同：0
> 
> 时间：2013-02-28T15:16:25.387
> 
> 标签：flash, actionscript

我想要做的是构建图像墙，比如 2 个随机图像。

X0X0X0X0X0（其中 X 和 O 是图像。）

现在要加载这些，我通常会使用 for 循环，例如（代码不准确，但希望你明白）

```
imageArray = "X", "O";

for (x = 0; x < numberOfImagesInWall; x++){

randomNum = random(2)

imageName = imageArray[randomNum];

loadimage (imageName)

.....etc....

} 
```

当我使用这种方法时，我发现它每次都会为 X 和 O 加载图像。我想知道是否有一种方法可以预加载 X 和 O 的图像，并在我想要的任何时候重用它们，而不涉及加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:05:15.500

```
var images.Array=[new Image1().bitmapData,new Image2().bitmapData]; // adjust for your case
// this syntax is valid if you have Image1 and Image2 in your library, as bitmap images
for (var i:int=0;i< numberOfImagesInWall; i++)
{
    var b:Bitmap=new Bitmap(images[Math.floor(Math.random()*2.0)]); 
        // provide existing BitmapData as source for the image
    b.x=getX(i);
    b.y=getY(i); // give coordinates as you need it
    addChild(b);
} 
```

提供现有 BitmapData 作为所有 Bitmap 的链接具有低内存消耗的好处，并且能够通过对所引用 BitmapData 的单个操作来更改所有相关 Bitmap。因此，例如，如果您这样做了，`images[0].fillRect(images[0].rect,0xffff0000)`那么您有一半的围墙位图会在没有额外努力的情况下变成红色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:27:20.547

尝试这个！

```
var images:Array = [img1, img2];//u will obviously need to populate this with real images
var pos:int = 0;
var newX:int = 0;

for(var i:int = 0; i < numberOfImagesInWall; i++)
{
    var bd:BitmapData = new BitmapData(images[pos].width, images[pos].height, true, 0x00000000);
    bd.draw(images[pos]); 
    var b:Bitmap = new Bitmap(bd);
    addChild(b);
    b.x = newX;
    newX += b.width;

    if(pos == 0)
        pos++;
    else
        pos = 0; 
} 
```

# node.js - 一个js不同的进程，想在一个jade中调用不同的form

> ID：15139097
> 
> 赞同：0
> 
> 时间：2013-02-28T15:16:32.303
> 
> 标签：node.js, pug

我有一个 index.jade 文件，有两种形式的登录和注册。目前他们正在调用一个单独的 js 文件（action='/login' 和 action='/register'）。我想知道是否可以将这两个进程放入一个 js 文件中，例如 index.js 具有exports.register 和exports.login，但我不知道如何根据提交的表单来区分它们；表格中的动作是什么？或者如果这是可能的？

我现在不介意这样，我的问题是现在我正在尝试创建具有不同形式的个人资料页面，我不想为每个部分设置单独的 js 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:22:27.163

你在使用 express 框架吗？然后，您可以为这两种操作创建一条路线。例如：account/login 和 account/register 将使用一个名为“account”的路由，该路由位于 account.js 文件中。像这样的东西：

```
var routes = require('./routes');

app.get ('/account/:action', routes.account); 
```

操作将是：注册和登录

编辑：正如迈克所说，你可以得到这样的行动价值：req.params.action

# asp.net-mvc - ASP.NET MVC 4 预加载器

> ID：15139101
> 
> 赞同：1
> 
> 时间：2013-02-28T15:16:47.330
> 
> 标签：asp.net-mvc, asp.net-mvc-4, preloader

目前，我的应用程序在 global.asax 的 Session_Start 方法中执行 API 调用，该方法填充了一堆会话变量。问题是这使得应用程序第一次加载需要 10 秒。

我想在这段时间内放置某种“正在加载...”预加载器，但我不知道该怎么做或放在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:57:49.610

Session_Start 在用户能够登录之前触发，这可能是您获取的数据在应用程序范围内是相同的吗？如果是，请将您的代码移至 Application_Start。如果不是，最好改变你的方法。延迟加载 - 仅在需要时获取数据，或使用缓存 - 如果可能的话。

# visual-studio-2010 - 管理 Visual Studio 解决方案和许多常见的 .Net 库

> ID：15139102
> 
> 赞同：1
> 
> 时间：2013-02-28T15:16:50.707
> 
> 标签：visual-studio-2010, shared-libraries

我使用 Java 已经有一段时间了，而且我对 C# 还很陌生。

我现在在一个使用大量通用库/DLL（主要是 .Net）的团队中工作。

我从事一些（Visual Studio）项目，所有这些项目都需要公共库，Visual Studio 在发布和调试模式下的常见做法是什么？

对于 Debug Configuration Mode (CM)，我的同事建议我将所有库放入一个文件夹（称为 L），然后将“Startup”文件夹设置为 L。但 Release CM 没有这样的概念。所以，我需要 a) 将 L 的内容复制到可执行输出路径或 b) 将项目的输出路径设置为 L。这两个似乎都不是一个干净的解决方案，你有什么建议？

Java中是否有类似于类路径的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:21:37.793

将常见的 .dll/引用添加到“库”项目或作为解决方案项是很常见的。从您的项目中引用这些 .dll，它们将被复制到输出目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:56:54.547

在我的商店中，我们在解决方案的文件夹中创建了一个“lib”文件夹。在 lib 文件夹中，有解决方案引用的每个 DLL 的副本；因此 VS 在构建或执行解决方案时将引用的 DLL 复制到输出目录。如果您有需要，它还允许您为不同的解决方案使用相同 DLL 的不同版本（尽管我不推荐它）。

# php - tcp 服务器工作正常，但 udp 服务器在 php 中显示错误

> ID：15139109
> 
> 赞同：0
> 
> 时间：2013-02-28T15:17:06.153
> 
> 标签：php, tcp, udp, port

这是php代码

```
 <?php

$hostname = "127.0.0.1";
$portno = "5060";

$sock = socket_create(AF_INET, SOCK_STREAM, 0) or die("Socket create error\n");
socket_bind($sock, $hostname, $portno) or die("Socket bind error\n");
socket_listen($sock, 3) or die("Could not set up socket listener\n");

while(1)
{
    echo "socket connection started\n";
    $accept = socket_accept($sock) or die("Could not accept incoming connection\n");
    while($recv = socket_read($accept, 24000))
    {
        $sent = socket_write($sock, $recv, strlen($recv));
        echo $recv;
    }
    socket_close($accept);
    echo "socket connection done\n";
}

socket_close($sock);
?> 
```

它作为 TCP 服务器工作。为了将其转换为 udp 服务器，我在创建服务器时修改了一行

```
$sock = socket_create(AF_INET, SOCK_DGRAM, 0) or die("Socket create error\n"); 
```

但它显示错误

```
Could not set up socket listener 
```

在尝试听的时候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:21:13.547

我不相信`socket_listen`可以与UDP一起使用。从[手册](http://php.net/manual/en/function.socket-listen.php)：

> socket_listen() 仅适用于 SOCK_STREAM 或 SOCK_SEQPACKET 类型的套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:25:11.253

你不需要socket_listen()。

利用`socket_recvfrom()`

[http://php.net/manual/en/function.socket-recvfrom.php](http://php.net/manual/en/function.socket-recvfrom.php)

# c# - 如何更改日期时间？

> ID：15139113
> 
> 赞同：3
> 
> 时间：2013-02-28T15:17:16.413
> 
> 标签：c#, .net, datetime

我想删除日期（dataType DatTime）的小时、分钟和秒。

示例来自

```
28/02/2013 15:66:26 
```

到

```
28/02/2013 00:00:00 
```

我曾尝试使用`AddMinutes`, 和`AddHours`，但没有成功。

你能给我一些伪代码吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T15:18:07.437

只需使用该[`Date`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)属性：

```
var date = dateAndTime.Date; 
```

或者

```
DateTime date = dateAndTime.Date; 
```

如果你不喜欢使用`var`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:18:06.907

使用. `.Date` [_](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx) _`DateTime`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:18:38.070

这应该这样做：

```
var mydate = DateTime.Now;
var date = mydate.Date.ToString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:18:41.967

要仅获取日期部分，请使用

```
var myDate myDateTime.Date; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T15:18:59.963

DateTime 结构有一个名为 Date 的属性。这暴露了时间组件为 00:00:00 的日期

[http://msdn.microsoft.com/en-us/library/system.datetime.date(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/system.datetime.date(v=VS.85).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T15:22:20.563

```
//If you are creating the date time
var newDate = DateTime.Now.Date;

//Another way to do it, just for seeing that it exists
var newDate = existingDate.Date + new TimeSpan(0, 0, 0); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T20:43:31.080

最简单的方法是：

```
date = 28/02/2013 15:66:26;
var date1 = date.Tostring("dd/MM/yyyy"); 
```

如果您还想将 date1 的类型从 String 转换为 DateTime 然后使用

```
Convert.ToDateTime(date1); 
```

# java - 将int分配给对象时Java会自动装箱吗？

> ID：15139117
> 
> 赞同：5
> 
> 时间：2013-02-28T15:17:32.003
> 
> 标签：java, object, autoboxing

这是自动装箱吗？

```
Object ob = 8; 
```

上面的代码是否会先将 int 字面量 8 包装在 Integer 中，然后将其引用分配给变量 ob？因为 java 语言规范对这种情况没有任何规定。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T15:19:36.513

> 上面的代码是否会先将 int 字面量 8 包装在 Integer 中，然后将其引用分配给变量 ob？

是的。（或者更确切地说，它会将`int`值装箱到一个`Integer`对象中，然后将引用分配给变量`ob`。整数值是文字的事实在这里是无关紧要的，真的。它可能是一个返回的方法调用`int`，例如。）

> 因为 java 语言规范对这种情况没有任何规定。

这不是真的。我的意思是，它没有*明确*处理分配 to `Object`，但它的工作方式与正常转换相同。

[规范的第 5.1.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)处理装箱，它将转换`int`为`Integer`... 然后将`Integer`引用分配给`Object`变量是正常的引用转换。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T15:21:49.877

[分配转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2)中详细说明了此特定情况：

> 当将表达式的值（第 15.26 节）分配给变量时，就会发生赋值转换：必须将表达式的类型转换为变量的类型。
> 赋值上下文允许使用以下之一：
> 
> *   [...]
> *   可选的装箱转换，然后是扩大的参考转换

所以在你的情况下：

```
8 (int) === boxing ===> 8 (Integer) ==== reference widening ===> 8 (Object) 
```

# git - 通过 ssh 进行两步 git 导入

> ID：15139128
> 
> 赞同：7
> 
> 时间：2013-02-28T15:18:10.777
> 
> 标签：git, import, ssh, bitbucket

Bitbucket 有一个用于从远程位置导入存储库的导入工具，但它仅支持该`git://`协议。我们现有的存储库位于防火墙后面的公司控制机器上，我无法更改`git://`且不可用。我需要将存储库从我们公司的机器移动到 bitbucket，保持原始存储库中的所有历史记录和详细信息完好无损。

有什么方法可以通过 ssh 将原始存储库克隆到本地计算机，然后将该存储库推送到 bitbucket 上新的裸初始化存储库来完成此操作？我会以这种方式丢失任何历史记录或数据吗？

（我希望得到一个不是特定于 bitbucket 的答案，但无论如何都可以“移动”一个 git 存储库。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T16:57:33.063

您需要确保您拥有*完整*的历史记录。您可以通过先执行完整的本地裸克隆来做到这一点。

```
git clone --mirror git://LOCAL_URL/somerepo.git 
```

然后按照蒂莫西指出的那样添加遥控器并推送。不过，您可能希望使用除 origin 以外的其他东西作为远程别名。

```
git remote add bitbucket ssh://git@bitbucket.org/someuser/somerepo.git
git push -u bitbucket --all 
```

这可以用于任何 Git 托管服务。只需将远程 URL 替换为您想要的任何内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T15:29:13.660

据我所知，克隆整个回购并推动它是有效的。Bitbucket 甚至为您提供命令：

```
cd /path/to/my/repo
git remote add origin ssh://git@bitbucket.org/someuser/somerepo.git
git push -u origin --all   # to push changes for the first time 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T00:58:23.413

是什么让你认为我们只支持 git:// 协议？我们支持智能 http 协议，例如您可以导入[https://github.com/jquery/jquery](https://github.com/jquery/jquery)

因此，如果您的 repo 可以从 Internet 访问并且执行 HTTP(S)，那么您使用导入器应该没有问题（它会进行正确的克隆并保留历史记录）。

# linux - Bash linux：并行启动多个程序并在一个完成后停止所有程序

> ID：15139132
> 
> 赞同：5
> 
> 时间：2013-02-28T15:18:25.700
> 
> 标签：linux, bash

我在 Ubuntu 上工作，我想创建一个 bash 文件来执行这些操作：
在核心 1 上启动一个程序 (prog0)。
等待 3 秒。
然后记录 prog0 的 CPU 和内存使用信息（我在核心 0 上使用两个 pidstat 实例来记录该信息）。
然后在核心 0 上启动另一个程序（prog1）。
当 prog1 完成后（我认为 prog1 自动退出），我想退出所有先前的进程（prog0 和两个 pidstat）。

```
taskset -c 1 prog0 -option0 &
sleep 3
taskset -c 0 pidstat 1 -C prog0 -u > log2 &
taskset -c 0 pidstat 1 -C prog0 -r > log3 &
taskset -c 0 prog1 -option1 > log1 
```

我不知道如何退出或终止 prog1 完成后启动的所有进程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:37:05.660

添加：

```
trap 'kill $(jobs -p)' EXIT 
```

到脚本的开头。当您的脚本退出时，这将终止所有后台作业。

* * *

要创建脚本，请打开一个新文件并将以下内容粘贴到其中：

```
#!/bin/bash
trap 'kill $(jobs -p)' EXIT
taskset -c 1 prog0 -option0 &
sleep 3
taskset -c 0 pidstat 1 -C prog0 -u > log2 &
taskset -c 0 pidstat 1 -C prog0 -r > log3 &
taskset -c 0 prog1 -option1 > log1 
```

将文件另存为`runme.sh`.

使其可执行：`chmod +x runme.sh`

通过执行`./runme.sh`来运行它：或在后台运行它：`./runme.sh &`

现在，当最后一个命令`taskset -c 0 prog1 -option1 > log1`完成时，脚本将退出并杀死它启动的所有后台进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-01T16:27:12.070

在大多数系统中使用 xargs 怎么样？它是一个基本的 linux 程序

```
xargs -P 2 -I {} sh -c 'eval "$1"' - {} <<EOF
LD_LIBRARY_PATH=$HOME/vendor/usr/lib $HOME/vendor/usr/sbin/pgbouncer -v $HOME/vendor/etc/pgbouncer/pgbouncer.ini ; kill -15 $PPID
nameko run --config config.yaml $@ ; kill -15 $PPID
EOF 
```

有了这个，两个命令都并行运行，直到其中一个死掉才退出。如果其中一个死了，它将杀死父 PPID，并在那里杀死其他姐妹作业/进程作业

我用它来解决 CloudFoundry 中的一个问题，同时启动 2 个进程，而不是无视如果应用程序进程死亡，它应该使容器崩溃的规则

[在这里向答案](https://stackoverflow.com/questions/3004811/how-do-you-run-multiple-programs-in-parallel-from-a-bash-script)致敬

# artificial-intelligence - 证明 f(n) 是 O(2^n)

> ID：15139134
> 
> 赞同：0
> 
> 时间：2013-02-28T15:18:33.333
> 
> 标签：artificial-intelligence, computer-science, complexity-theory, big-o

我了解如何使用 Big-O 的定义来证明 f(n) 是 O(n) 或 O(n^2) 但我迷失了 O(2^n) 你能帮忙证明 2^n +n ^3 + 30 是 O(2^n) 吗？Bsc AI Yr1 喜欢这一切，但复杂性让我大吃一惊！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:07:00.533

[Big O Notation](http://en.wikipedia.org/wiki/Big_O_notation)定义了函数在接近某个值时的行为。通常，我们说无穷大，但通常“任意大的数”就足够了。

因此，您处于数学极限的世界中；[Math SE](https://math.stackexchange.com/)在这里会有所帮助，但让我们考虑一下您的情况。为了表明：

```
O(2^n +n^3 + 30) == O(2^n) 
```

我们需要证明，当`n`趋向于一个大数时，`2^n +n^3 + 30`趋向于`2^n`。通过检查，您可以看到，当`n`是 10 时，`n^3`是 1000，所以已经比 30 大得多（并且随着增长而`n`增长）。此时，`2^n`是 1024，所以它的数量级与 相同`n^3`，但也越来越大。一次`n`是 100，`n^3`是 100 万，`2^n`是这个数字的 5 倍（`1 x 10^30`）......很明显，第一项超过了其他项，`n`而不是我们所说的“任意大”

所以，通过检查，我们知道

```
O(2^n +n^3 + 30) == O(2^n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:26:25.733

好吧，这取决于您可以使用的工具。乍一看，这很明显，因此您可能必须更深入地研究证明。

基本上，与 2^n 相比，n^3 小得离谱，所以 n^3 ~ o(2^n)。

常数 30 相同。

所以

`2^n + n^3 + 30 ~ 2^n + o(2^n) ~ O(2^n)`根据定义。

如果不足以作为证明，你可以证明

`limit n^3/2^n (when n-> infinity) = 0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:55:28.060

证明`n^3 < 2^n for some n > n0`（通过归纳或查看一些典型的数学练习并参考它。您不必找到最小的 n0，只要找到任何 n0）

然后用这个结果证明`|2^n + n^3 + 30| <= |2^n +2^n + 2^n|`并在 2 和 4 之间找到一个漂亮的 c 以表明最后一项小于`c*|2^n|`。

毕竟，把所有东西写在一起，你应该有类似的东西`|2^n +n^3 + 30| <= ... <= c*|2^n| for n > <n0> and c=<value>`（完成`<n0>`后`<value>`应该是一些数字）。这是定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T20:21:25.090

我不会为你解决问题，因为这听起来像是家庭作业。但我会解决一个你已经知道如何解决的问题，然后尝试让你相信这个问题没有什么不同。

所以。回想一下，当我们试图证明某个函数（称为 f(n)）属于某个其他函数（称为 g(n)）的 Big-Oh 时，我们正在做什么。我们试图证明*直到某个常数因子*并且*随着 n 变大*，f(n) 永远不会比 g(n) 差。我们通过选择两个数字 c 和 n [0]来做到这一点。第一个，c，是我之前提到的那个“常数因子”。我们将 f(n) 与 g(n) 关联如下：

f(n) ≤ cg(n) 对于所有 n ≥ n [0]

问题是，c 和 n0 不是唯一的。通常，您几乎可以任意选择一个，然后用简单的代数计算出另一个的值。所以让我们试试这个

f(n) = n² + 5n + 10

g(n) = n²

首先，我们根据常数因子 c 建立关系：

n² + 5n + 10 ≤ c n²

现在我们想自己得到 c，与 n 的一些其他函数相关，所以只需将 n² 从两边分开：

1 + 5/n + 10/n² ≤ c

我们想知道 n 的什么值（我们称之为 n [0]）对于所有较大的 n 值都是如此。好吧，我们可以选择 ac 并求解 n，或者选择 n [0]并求解 c。没关系，但让我们选择 n [0] = 1，只要在我们看到 n 的任何地方插入它，看看会发生什么：

1 + 5/1 + 10/1 = 1 + 5 + 10 = 16 ≤ c

这就是我们的答案：如果我们选择 c 作为 16，那么只要 n 大于 1（即 n [0] = 1），那么 f(n) 将小于 g(n)。

现在，你能用你试图解决的问题做到这一点吗？嗯……为什么不呢？我们有两个函数，f(n) 和 g(n)。我们试图证明与您知道如何解决的问题完全相同的关系。改变的只是函数的类型，从 n 中的多项式到 n 中的指数（以及混合的）。但这有关系吗？好吧，代数看起来会有点不同，但那又如何呢？是代数。

# qt - 资源文件中带有 qml 的程序不会打开非主 qml 文件

> ID：15139139
> 
> 赞同：2
> 
> 时间：2013-02-28T15:18:39.930
> 
> 标签：qt, qt5, qt-quick, qtquick2

我为 Windows 32 位安装了 Qt 5.0.1 (MinGW 4.7, 823 MB)

然后我创建了简单的 Quick 2 应用程序。我有两个简单的 qml 文件：

**main.qml**

```
import QtQuick 2.0

Rectangle {
    width: 360
    height: 360
    Text {
        text: qsTr("Hello World")
        anchors.centerIn: parent
    }
    MouseArea {
        anchors.fill: parent
        onClicked: {
            Qt.quit();
        }
    }
    HarrixMainButton{

    }
} 
```

**HarrixMainButton.qml**

```
import QtQuick 2.0

Item {
    width: 93
    height: 93

    Rectangle {
        width: 50
        height: 62
        color: "red"
    }

} 
```

并且该程序运行良好。然后我将 qml 文件放入前缀 qml 的资源 res.qrc 中并更改 main.cpp：

```
#include <QtGui/QGuiApplication>
#include "qtquick2applicationviewer.h"
#include <QUrl>
#include <QDebug>
#include <QQmlContext>
#include <QQuickItem>

int main(int argc, char *argv[])
{
    QGuiApplication app(argc, argv);

    QtQuick2ApplicationViewer viewer;
    //viewer.setMainQmlFile(QStringLiteral("qml/HarrixAI/main.qml"));
    viewer.setSource(QUrl("qrc:qml/qml/HarrixAI/main.qml"));
    viewer.showExpanded();

    return app.exec();
} 
```

并且该程序不起作用。第二个文件 HarrixMainButton.qml 未加载。仅加载主要的第一个文件 main.qml。

**qrc:qml/qml/HarrixAI/main.qml:16:5：HarrixMainButton 不是类型 尝试呈现 QtQuick2ApplicationViewer(0x28fe08) ( QRect(8,30 116x0) ) 时，无法找到可呈现的主窗口 QtQuick2ApplicationViewer(0x28fe08)。**

如何解决问题？在带有 Qt Quick 1.1 的 Qt 4.7 中，同样的方法有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:47:39.757

加载 main.qml 时不要在 URL 中使用相对路径，它应该可以工作：

[https://bugreports.qt-project.org/browse/QTBUG-26417](https://bugreports.qt-project.org/browse/QTBUG-26417)

# spring - 使用 Spring Data JPA 时常春藤未解决的依赖关系 - org.eclipse.persistence

> ID：15139142
> 
> 赞同：0
> 
> 时间：2013-02-28T15:18:45.220
> 
> 标签：spring, maven, ant, ivy, spring-data-jpa

我的构建运行良好，直到我将以下行添加到我的 ivy.xml 文件：

```
<dependency org="org.springframework.data" name="spring-data-jpa" rev="1.1.0.RELEASE"/> 
```

然后我收到以下错误：

```
::::::::::::::::::::::::::::::::::::::::::::::
::          UNRESOLVED DEPENDENCIES         ::
::::::::::::::::::::::::::::::::::::::::::::::
:: org.eclipse.persistence#org.eclipse.persistence.jpa;2.3.2: not found
:::::::::::::::::::::::::::::::::::::::::::::: 
```

我似乎在 Maven 存储库中找不到这种依赖关系。当不使用 Ivy 时，我可以使用这个 jar 成功编译我的项目：

```
com.springsource.javax.persistence-2.0.0.jar 
```

但是，我在 Maven 存储库中也找不到对那个的引用。

我错过了什么或做错了什么？使用 Ivy 的新手，因此感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:05:48.873

默认情况下，ivy 将拉下所有依赖项。[这很可能是Maven Central](http://search.maven.org/)中不存在的可选 Maven 依赖项。

您需要做的是为每个依赖项设置一个常春藤配置映射，如下所示：

```
<configurations>
    <conf name="compile" description="Compile classpath"/>
    <conf name="runtime" description="Runtime classpath" extends="compile"/>
    <conf name="test" description="Test classpath" extends="runtime"/>
</configurations>

<dependencies>
    <!-- compile dependencies -->
    <dependency org="org.springframework.data" name="spring-data-jpa" rev="1.1.0.RELEASE" conf="compile->default"/>
</dependencies> 
```

映射“compile->default”意味着从远程模块中下拉默认依赖项（这将排除选项）并将它们放入本地编译配置中。

有关 ivy 如何翻译远程 Maven 模块的更多信息，请参阅：

*   [Maven 范围如何通过 ivy 映射到 ivy 配置](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy/7116577#7116577)

# google-chrome - 使用 Chrome 构建数据包嗅探器

> ID：15139147
> 
> 赞同：2
> 
> 时间：2013-02-28T15:18:53.390
> 
> 标签：google-chrome

考虑到 Chrome 有一个[网络堆栈](http://www.chromium.org/developers/design-documents/network-stack)，是否可以在浏览器内（或外）构建网络嗅探器并在 IP、TCP 或 HTTP 层获取跟踪？

如果可能的话，我应该从哪里开始？（我对 Chrome 代码一无所知）

# java - XML。萨克斯。具有默认值的属性

> ID：15139149
> 
> 赞同：1
> 
> 时间：2013-02-28T15:18:57.283
> 
> 标签：java, xml-parsing, sax

我使用 SAX 处理 XML 文件：

```
XMLReader reader = XMLReaderFactory.createXMLReader("org.apache.xerces.parsers.SAXParser");
reader.setFeature("http://xml.org/sax/features/validation", Boolean.TRUE);
reader.setFeature("http://apache.org/xml/features/validation/schema", Boolean.TRUE); 
```

我加载语法（XSD）并将其设置给阅读器。

```
reader.setProperty("http://apache.org/xml/properties/internal/grammar-pool", grammarPool); 
```

语法包含某些元素的某些可选属性的 defaultValue。那些具有默认值的属性会与此值一起从我的处理程序传递给 startElement(ContentHandler#startElement)) 方法，即使它们不存在于源 XML 中也是如此。我能否以某种方式验证该属性是否存在于 XML 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:42:28.943

这就是属性的默认值应该如何工作。如果您需要区分这两种情况（默认与显式指定但使用默认值），那么您必须从架构中删除默认值并改为在代码级别应用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-02T21:36:03.577

报告功能标志的`http://xml.org/sax/features/use-attributes2`SAX2解析器`true`将为. 此扩展接口提供了方法和，这些方法测试是否在文档中指定了属性，或者该值是否通过 DTD 或模式默认。[`Attributes2`](http://www.saxproject.org/apidoc/org/xml/sax/ext/Attributes2.html)[`Attributes`](http://www.saxproject.org/apidoc/org/xml/sax/Attributes.html)`ContentHandler#startElement(String uri, String localName, String qName, Attributes atts)``isSpecified(int index)``isSpecified(String qName)``true``false`

我发现的一个用例是在 EPUB 3.0.1 管道中从 XHTML 4.01 Transitional 转换为 (X)HTML5。我遇到的一个问题是过渡 DTD 的`<br>`元​​素默认属性`clear`为`none`; 此属性在 HTML5中*无效。*为了避免在 HTML5 中手动过滤所有无效属性，我`Attributes`通过过滤默认属性来重建一个，如下所示：

```
public static Attributes filterDefaults(Attributes attributes) {
    // Either test the feature flag, or do an instance test
    Attributes2 attrs = (Attributes2) attributes;
    Attributes2Impl newAttrs = new Attributes2Impl();
    for (int i = 0; i < attrs.getLength(); i++) {
        if (attrs.isSpecified(i)) {
            final String qName = attrs.getQName(i);
            final String type = attrs.getType(i);
            final String value = attrs.getValue(i);
            newAttrs.addAttribute(null, null, qName, type, value);
        }
    }
    return newAttrs;
} 
```

应该设置为`XMLReader`验证 DTD 或模式以及输入 XML，或多或少如下：

```
/**
 * @see "https://xerces.apache.org/xerces2-j/features.html"
 */
private XMLReader buildParser(SAXParserFactory parserFactory) throws SAXException {
    try {
        final SAXParser parser = parserFactory.newSAXParser();
        final XMLReader reader = parser.getXMLReader();
        if (!reader.getFeature("http://xml.org/sax/features/use-attributes2"))
            throw new SAXException("SAX2 parser with Attributes2 required");

        // Set your callback instances here
        reader.setEntityResolver(/*...*/);
        reader.setErrorHandler(/*...*/);
        reader.setContentHandler(/*...*/);
        reader.setProperty("http://xml.org/sax/properties/lexical-handler", /*...*/);

        reader.setFeature("http://xml.org/sax/features/namespaces", true);
        reader.setFeature("http://xml.org/sax/features/validation", true);
        reader.setFeature("http://apache.org/xml/features/validation/schema", true);

        return reader;
    } catch (ParserConfigurationException e) {
        throw new SAXException("Can't build parser", e);
    }
} 
```

# c++ - 将临时 unique_ptr 传递给 VS2010 中的构造函数

> ID：15139153
> 
> 赞同：2
> 
> 时间：2013-02-28T15:19:23.887
> 
> 标签：c++, visual-studio-2010, constructor, rvalue-reference, unique-ptr

我有一个类，我希望能够用一个临时的 unique_ptr 构造一个类，如下所示：

```
MyCollection foo(std::unique_ptr<MyObj>(nullptr)); 
```

对象应该拥有指针的所有权。我的问题是，正确的构造函数签名是什么？

```
1\. MyCollection(std::unique_ptr<MyObj> foo);
2\. MyCollection(std::unique_ptr<MyObj>&& foo); 
```

第一个选项不链接。第二个确实如此，但是如果我继续这样做，然后尝试使用非 R 值构造 MyCollection 会发生什么？IE

```
std::unique_ptr<MyObj> pointer(nullptr);
MyCollection(pointer); 
```

答案在这里：[如何将 unique_ptr 参数传递给构造函数或函数？](https://stackoverflow.com/questions/8114276/how-do-i-pass-a-unique-ptr-argument-to-a-constructor-or-a-function)建议我应该按值获取 unique_ptr，但正如我上面所说，它在 VS2010 中没有链接（错误看起来像这样......

```
Error   5   error LNK2028: unresolved token (0A00075A) "private: __thiscall std::unique_ptr<class IVDSDocCore,struct std::default_delete<class IVDSDocCore> >::unique_ptr<class IVDSDocCore,struct std::default_delete<class IVDSDocCore> >(class std::unique_ptr<class IVDSDocCore,struct std::default_delete<class IVDSDocCore> > const &)" (??0?$unique_ptr@VIVDSDocCore@@U?$default_delete@VIVDSDocCore@@@std@@@std@@$$FAAE@ABV01@@Z) referenced in function "public: static void __clrcall std::unique_ptr<class IVDSDocCore,struct std::default_delete<class IVDSDocCore> >::<MarshalCopy>(class std::unique_ptr<class IVDSDocCore,struct std::default_delete<class IVDSDocCore> > *,class std::unique_ptr<class IVDSDocCore,struct std::default_delete<class IVDSDocCore> > *)" (?<MarshalCopy>@?$unique_ptr@VIVDSDocCore@@U?$default_delete@VIVDSDocCore@@@std@@@std@@$$FSMXPAV12@0@Z)  C:\sviluppo\FerrariGes\GesDB\VDS.NET\VDS\vdsdoc.obj 
```

一些回复建议我需要使用移动功能。如果我使用构造函数 1，并尝试像这样创建对象：

如果我使用构造函数 1，并尝试像这样创建对象：

```
MyCollection foo(move(std::unique_ptr<MyObj>(nullptr))); 
```

我得到相同的链接错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:31:51.293

你是对的，你应该按值接受 unique_ptr，但由于它不能被复制，你必须*将*它移动到构造函数中：

```
MyCollection(std::unique_ptr<MyObj> foo);

//..
std::unique_ptr<MyObj> pointer(/*something*/);
MyCollection(std::move(pointer)); 
```

**编辑**我的不好，我只是注意到我过度阅读了构造函数的第一次使用。

```
MyCollection foo(std::unique_ptr<MyObj>(nullptr)); 
```

当然，应该使用构造函数按值获取 unique_ptr 。

但是，链接器错误中提到的函数签名对我来说有点奇怪，它基本上是

```
void __clrcall unique_ptr<X>::<MarshalCopy>(unique_ptr<X>*, unique_ptr<X>*) 
```

所以也许这是一个完全不同的问题。我对 CLR 不是很坚定，如果我错了，请原谅我：你在 C++/CLI 中使用 unique_ptr 吗？支持吗？内部做什么`<MarshalCopy>`- 看起来像是生成的东西，也许它不适用于仅移动类型？

这可能是相关的：[Linker error when using unique_ptr in C++/CLI](https://stackoverflow.com/questions/12493203/linker-error-when-using-unique-ptr-in-c-cli)

# sql - 在一列中连接多行

> ID：15139158
> 
> 赞同：0
> 
> 时间：2013-02-28T15:19:39.247
> 
> 标签：sql, sql-server-2008, concatenation

我有一个产生以下结果的查询

```
NAME         WeekPattern

John Smith   
John Smith   //
John Smith   OO
Jack Jones   
Jack Jones   O
Jack Jones   // 
```

有没有办法可以连接 WeekPattern 列，所以结果将显示如下：

```
NAME         WeekPattern

John Smith     // OO
Jack Jones     O // 
```

我曾尝试使用 FOR XML PATH 但无法使其工作，这是我尝试的查询：

```
SELECT 
p.p_surname,
p.p_forenames,
LEFT(sr.sr_weekpattern , LEN(sr.sr_weekpattern )-1) AS Weekpattern
FROM 
unitesnapshot.dbo.capd_studentregister sr
INNER JOIN unitesnapshot.dbo.capd_person p ON p.p_id = sr.sr_student
CROSS APPLY
(
    SELECT sr.sr_weekpattern + ' '
    FROM unitesnapshot.dbo.capd_studentregister sr1
    INNER JOIN unitesnapshot.dbo.capd_person p1 ON p1.p_id = sr1.sr_student

    WHERE p.p_id = p1.p_id
    FOR XML PATH('')
) pre_trimmed (Weekpattern)
GROUP BY p.p_surname, p.p_forenames, sr.sr_weekpattern; 
```

运行此查询时出现此错误：

传递给 LEFT 或 SUBSTRING 函数的长度参数无效。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:22:29.683

```
SELECT
     Name,
     STUFF(
         (SELECT ' ' + WeekPattern
          FROM TableName
          WHERE NAME = a.NAME AND WeekPattern IS NOT NULL
          FOR XML PATH (''))
          , 1, 1, '')  AS WeekPatternList
FROM TableName AS a
GROUP BY Name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/1e158/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:26:35.863

根据您现有的查询，您没有引用正确的列`LEFT`，您应该使用：

```
SELECT 
  p.p_surname,
  p.p_forenames,
  LEFT(pre_trimmed.Weekpattern , LEN(pre_trimmed.Weekpattern)-1) AS Weekpattern
FROM unitesnapshot.dbo.capd_studentregister sr
INNER JOIN unitesnapshot.dbo.capd_person p 
  ON p.p_id = sr.sr_student
CROSS APPLY
(
  SELECT sr1.sr_weekpattern + ' '
  FROM unitesnapshot.dbo.capd_studentregister sr1
  INNER JOIN unitesnapshot.dbo.capd_person p1 
    ON p1.p_id = sr1.sr_student
  WHERE p.p_id = p1.p_id
  FOR XML PATH('')
) pre_trimmed (Weekpattern) 
```

# jakarta-ee - 框架如何兼容 Java EE？

> ID：15139160
> 
> 赞同：1
> 
> 时间：2013-02-28T15:19:52.000
> 
> 标签：jakarta-ee

如果我必须开发我自己的应用程序服务器，那么如何才能说我符合 Java EE 标准？

例如，GlassFish 和 WebSphere 等应用服务器声称它们与 Java EE 兼容。应该怎么做才能确保我的应用程序服务器兼容 Java EE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:46:30.653

> 应该怎么做才能确保我的应用程序服务器符合 Java EE？

通过**兼容性测试套件 (CTS)**。

来自 Oracle关于 Java EE 6的[Java EE 常见问题解答：](http://www.oracle.com/technetwork/java/javaee/javaee-faq-jsp-135209.html#compatibilitytests)

> Java EE 兼容性测试套件 (CTS) 可用于 Java EE 平台。Java EE CTS 包含数千个 Java EE 6 兼容性测试。该套件通过执行特定的应用程序功能和检查结果来测试兼容性。例如，为了测试 JPA 调用以持久化实体，EJB 测试组件会调用以持久化对象，然后调用以检查对象是否已持久化。

完整的 CTS 提供给 Java EE 许可证持有者，但[有些部分是公开的](https://stackoverflow.com/a/10473976/1434089)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:29:27.717

该规范由 Oracle（以前是 Sun）管理，您可以在[此处](http://jcp.org/aboutJava/communityprocess/final/jsr316/index.html)找到信息。

# e-commerce - 购物车：是否有使用我们客户当前登录凭据的即插即用？

> ID：15139166
> 
> 赞同：0
> 
> 时间：2013-02-28T15:20:03.543
> 
> 标签：e-commerce, cart, shopping

我们目前有一个带有自制购物车的 wordpress 网站。我们想改用即插即用的购物车。我们需要一个与我们的身份数据库对话的解决方案，并允许我们的客户在结账时使用他们当前的登录凭据。有谁知道实现这一目标的解决方案或资源？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T20:56:17.270

不确定您的首选语言是什么，但请查看[www.nopcommerce.com](http://www.nopCommerce.com)。nopCommerce 是一个用 ASP.NET MVC4 编写的免费、丰富、成熟、流行、支持良好的开源购物车。除了内置的东西之外，它还有一个用于外部身份验证方法的框架，但是，鉴于它是开源的，你最终可以做任何你想做的事情。我目前正在使用 MS VS Express 2012 for Web 开始一个项目，所以这一切都不会花费我一毛钱。

# c# - 用作委托参数时，未实现的部分方法是否会被 null 替换？

> ID：15139167
> 
> 赞同：2
> 
> 时间：2013-02-28T15:20:03.753
> 
> 标签：c#, .net, methods, delegates, partial-methods

所以我有两种不同的方法。

一种是正常的方法

```
void DoSomething(delegate x)
{
     foreach(......)
     { x(); }
} 
```

另一个是部分但未实现的

```
partial void DoWorkInForEach(); 
```

当我这样调用我的第一个方法时

```
DoSomething(DoWorkInForEach); 
```

会发生什么，委托参数是否为空，我的整个方法调用会被删除吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:25:43.500

从[语言规范](http://www.microsoft.com/en-sg/download/details.aspx?id=7029)：

> **10.2.7 部分方法**
> 
> [...]
> 
> 如果为部分方法 M 给出了定义声明而不是实现声明，则适用以下限制：
> 
> •**创建方法的委托是编译时错误（第 7.6.10.5 节）。**
> 
> • 在转换为表达式树类型（第 6.5.2 节）的匿名函数中引用 M 是编译时错误。
> 
> • 作为 M 调用的一部分出现的表达式不会影响明确的赋值状态（第 5.3 节），这可能会导致编译时错误。
> 
> • M 不能是应用程序的入口点（第 3.1 节）。

如果需要，您可以在此处使用 lambda 而不是方法组，这实际上会给您一个无操作委托：

```
DoSomething(() => DoWorkInForEach()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:22:31.443

## 理论

根据[MSDN](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)：

> 您可以将委托委托给已定义和实现的部分方法，但不能委托给仅已定义的部分方法。

还有[C# 语言规范](http://go.microsoft.com/fwlink/?LinkId=199552)：

> 如果为部分方法 M 给出了定义声明而不是实现声明，则适用以下限制： 创建方法的委托是编译时错误（第 7.6.10.5 节）。

* * *

## 例子

以下是**正确**的：

```
partial class Foo
{
    partial void Method();

    Foo()
    {
        Action action = new Action(Method);
    }
}

partial class Foo
{
    partial void Method()
    {
        // ...
    }
} 
```

以下将引发**编译错误**：

> 无法从方法“Test.Foo.Method()”创建委托，因为它是没有实现声明的部分方法

```
partial class Foo
{
    partial void Method();

    Foo()
    {
        Action action = new Action(Method); // Compilation error
    }
} 
```

# favicon - youtube 如何读取网站图标？

> ID：15139172
> 
> 赞同：0
> 
> 时间：2013-02-28T15:20:14.047
> 
> 标签：favicon, youtube-channels

Youtube 如何读取频道的图标？

我已经像这样链接了我的网站图标

```
<link rel="shortcut icon" href="/favicon.ico"> 
```

但它没有在我的频道上正确显示，并且似乎从正确的位置读取了 .ico 文件

```
<img src="//s2.googleusercontent.com/s2/favicons?feature=youtube_channel&amp;domain=www.MY_PAGE.dk" class="favicon" alt=""> 
```

谢谢你的帮助！
- 克里斯

# c# - 如何使用 C# 从 ASP.NET 中的 SQL Server 数据库中检索图像？

> ID：15139176
> 
> 赞同：0
> 
> 时间：2013-02-28T15:20:28.567
> 
> 标签：c#, asp.net, sql-server

我在 SQL Server 数据库中有一些图像，我想在 ASP.NET 中检索这些图像。但这给了我一个错误

> *文件“C:\Program Files\Common Files\Microsoft Shared\DevServer\10.0\130065367816821657”已经存在。*

请解决我的问题。

```
protected void DropDownList1_TextChanged(object sender, EventArgs e)
{
        cn.Open();
        SqlCommand cm = new SqlCommand("select * from imageCollection where img_id='" + DropDownList1.SelectedItem.ToString() + "'", cn);
        SqlDataAdapter da = new SqlDataAdapter(cm);
        SqlDataReader dr = cm.ExecuteReader();

        try
        {
            if (dr.Read())
            {

                string image1 = Convert.ToString(DateTime.Now.ToFileTime());
                string image2 = Convert.ToString(DateTime.Now.ToFileTime());
                FileStream fs1 = new FileStream(image1, FileMode.CreateNew, FileAccess.Write);
                FileStream fs2 = new FileStream(image2, FileMode.CreateNew, FileAccess.Write);
                byte[] bimage1 = (byte[])dr["passport_photo"];
                byte[] bimage2 = (byte[])dr["sign_photo"];
                fs1.Write(bimage1, 0, bimage1.Length - 1);
                fs2.Write(bimage2, 0, bimage2.Length - 1);
                fs1.Flush();
                fs2.Flush();
                Image1.ImageUrl = "~/images"+bimage1.ToString();
                Image2.ImageUrl = "~/images"+bimage2.ToString();
            }
            dr.Close();
            cn.Close();
        }
        catch (Exception ex)
        {
            throw ex;
        } 
```

我从“C:\Program Files\Common Files\microsoft shared\DevServer\10.0”上传了图片，前端代码如下：

```
 protected void Button1_Click(object sender, EventArgs e)
{
    string image1 = FileUpload1.FileName;
    string image2 = FileUpload2.FileName;
    FileStream fs1 = new FileStream(image1, FileMode.Open, FileAccess.Read);
    FileStream fs2 = new FileStream(image2, FileMode.Open, FileAccess.Read);
    byte[] bimage1 = new byte[fs1.Length];
    byte[] bimage2 = new byte[fs2.Length];
    fs1.Read(bimage1, 0, Convert.ToInt32(fs1.Length));
    fs2.Read(bimage2, 0, Convert.ToInt32(fs2.Length));
    fs1.Close();
    fs2.Close();
    cn.Open();
    SqlParameter sp = new SqlParameter();
    sp.SqlDbType = SqlDbType.Image;
    sp.ParameterName = "@passport_photo";
    sp.ParameterName = "@sign_photo";
    sp.Value = bimage1;
    sp.Value = bimage2;
    SqlCommand cm = new SqlCommand("INSERT INTO imageCollection values(@img_id," + "@passport_photo,"+"@sign_photo)", cn);
    cm.Parameters.AddWithValue("@img_id",TextBox1.Text);
    cm.Parameters.AddWithValue("@passport_photo",sp.Value=bimage1);
    cm.Parameters.AddWithValue("@sign_photo",sp.Value=bimage2);
    cm.ExecuteNonQuery();
    cm.Dispose();
    cn.Dispose();
    cn.Close();
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:25:16.507

你的问题是，`image1`并且`image2`是平等的。

```
string image1 = Convert.ToString(DateTime.Now.ToFileTime());
string image2 = Convert.ToString(DateTime.Now.ToFileTime()); 
```

考虑使用一些东西来区分两个文件名：

```
string image1 = Convert.ToString(DateTime.Now.ToFileTime()) + "1";
string image2 = Convert.ToString(DateTime.Now.ToFileTime()) + "2"; 
```

可以想象，创建文件名所涉及的代码`Convert.ToString(DateTime.Now.ToFileTime())`执行得非常快，所以没有足够的时间来`DateTime.Now`增加它的价值。

**编辑**

您还可以更改写入图像的目录：

```
 FileStream fs1 = new FileStream(Server.MapPath("~/images/" + image1), FileMode.CreateNew, FileAccess.Write);
 FileStream fs2 = new FileStream(Server.MapPath("~/images/" + image2), FileMode.CreateNew, FileAccess.Write); 
```

否则，文件将写入应用程序文件夹 ( `bin`)

接着

```
Image1.ImageUrl = "~/images/" + image1;
Image2.ImageUrl = "~/images/" + image2; 
```

现在有感觉了

确保 ASP.NET 用户在“images”文件夹中具有写入权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:27:41.303

此外，如果找到具有重复文件名的文件，您的代码将引发错误：

```
FileStream fs1 = new FileStream(image1, FileMode.CreateNew, FileAccess.Write);
FileStream fs2 = new FileStream(image2, FileMode.CreateNew, FileAccess.Write); 
```

以下代码将允许通过更改为来覆盖`FileMode.CreateNew`文件`FileMode.Create`：

```
FileStream fs1 = new FileStream(image1, FileMode.Create, FileAccess.Write);
FileStream fs2 = new FileStream(image2, FileMode.Create, FileAccess.Write); 
```

# jquery - radio + label hot 以获得正确的值（数组）

> ID：15139177
> 
> 赞同：0
> 
> 时间：2013-02-28T15:20:29.167
> 
> 标签：jquery, arrays, label, radio

我正在尝试从标签（收音机）中获取正确的值。当我单击标签时，我得到了值，但是当我单击另一个标签（标签）时，我从第一个标签中获取值，我需要再次单击它以将两个值添加到我的数组中。

我要隐藏单选按钮，因为我只想使用标签。我怎样才能避免这种行为？

看一看：

```
var radioChecked = $('#radioinstant :radio').is(':checked');

$('#radioinstant :radio').click(function() {
        radioChecked = !radioChecked;
    $(this).attr('checked', radioChecked);
});

var additionalProducts = new Array;

    $(".chk").click(function() {
        additionalProducts=[];
        $('.chk:checked').each(function() {
            additionalProducts.push($(this).val());
        });
        console.log(additionalProducts);
        alert(additionalProducts);
    }); 
```

[http://jsfiddle.net/qfagc/](http://jsfiddle.net/qfagc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:25:20.397

您每次点击都会清除数组。

```
var additionalProducts = new Array;   <--- this creates the array

    $(".chk").click(function() {
        additionalProducts=[];     <--- this clears the array on EVERY CLICK
        $('.chk:checked').each(function() {
            additionalProducts.push($(this).val());
        });
        console.log(additionalProducts);
        alert(additionalProducts);
    }); 
```

# windows-server - 终端服务服务器在 Windows 启动时使用注册表项自动运行

> ID：15139179
> 
> 赞同：0
> 
> 时间：2013-02-28T15:20:37.887
> 
> 标签：windows-server, terminal-services

我对终端服务器不熟悉，也无法在任何地方找到这些信息。

我想知道注册表项是否可以在终端服务器上使用，或者我应该使用或`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\CurrentVersion\Run`的特定条目，因为我不确定这些差异。`HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Terminal Server\Install\Software\Microsoft\Windows\CurrentVersion\Run``HKCU\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Terminal Server\Install\Software\Microsoft\Windows\CurrentVersion\Run`

我希望有更多使用终端服务器经验的人可以提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T19:30:50.633

您`HKLM\SOFTWARE\Microsoft\CurrentVersion\Run`在终端服务器环境中使用的方式与在“正常”环境中使用它的方式相同。来自[KB321707](http://support.microsoft.com/kb/321707)（它是为 Windows 2000 编写的，但也适用于现代 Windows 版本）：

> 您可以在注册表中指定命令行以在用户登录终端服务时启动程序：
> 
> 1.  在终端服务服务器上，启动注册表编辑器 (Regedt32.exe)。
> 2.  在注册表中找到并单击以下项：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`
> 3.  在**编辑**菜单上，指向**新建**，然后单击**字符串值**。
> 4.  键入值的任何名称，然后单击**编辑**菜单上的**修改。**
> ***   在**数值数据**框中，键入用户登录时要启动的程序的命令行。*   单击**确定**，然后退出注册表编辑器。**

 **有关在用户登录终端服务时自动启动程序的其他方法，请参阅相同的 KB。

* * *

关于`...\Terminal Server\...`您在问题中提到的那些注册表项，它们是所谓的注册表影子的一部分。它们由在安装模式下运行的终端服务创建，您通常不需要直接使用它们。如果您对该主题感兴趣，请查看 Nicholas Dille 的[The Shadow Key Companion 。](http://blogs.sepago.de/d/nicholas/2012/06/21/the-shadow-key-companion)**

# c# - 在 .NET 中传递事件

> ID：15139181
> 
> 赞同：3
> 
> 时间：2013-02-28T15:20:40.763
> 
> 标签：c#, events

我很抱歉发布了这么多代码，但在这种情况下，我觉得这个问题更容易理解，尽管这个问题可能非常简单（我希望答案同样简单）。

我正在玩活动和代表。在我的 Main 方法中，我有代码

```
traffic.PutInGarage(g); 
```

这意味着我正在传递我的 Garage 类的引用（参见下面的代码）。这是您期望事件通过的方式吗？我不知道为什么，我无法解释为什么，感觉不对，好像我在某些地方错过了重点。

再次，很抱歉发布所有控制台应用程序代码，但它可能更容易。

```
using System;
using System.Collections.Generic;

namespace DemoProejct
{
    public class Program
    {
        public static void Main(string[] args)
        {
            Garage g = new Garage();
            g.NewCarEvent += new Garage.NewCarDelegate(GarageCount);

            Traffic traffic = new Traffic();

            //SHOULD I BE PASSING THE Garage object here?

            traffic.PutInGarage(g);

            Console.WriteLine("Garage is now closed");
            Console.ReadKey();
        }

        private static void GarageCount(string cars, string s)
        {
            Console.WriteLine(string.Format("{0} {1}", cars, s));
            System.Threading.Thread.Sleep(2000);
        }
    }

    public class Traffic
    {
        public void PutInGarage(Garage g)
        {
            List<Vehicle> all = GetVehicles();

            Vehicle modelWeFix = new Vehicle() { Make = "Mazda", Model = "6", Year = "2012" };
            int i = 1;
            foreach (IEquatabled<Vehicle> item in all)
            {
                if (item.EqualsTo(modelWeFix))
                {
                    g.CarsInGarage = i;
                    i++;
                }
            }
        }

   private List<Vehicle> GetVehicles()
   {
        Car carMazda = new Car() { Make = "Mazda", Model = "6", Year = "2012" };
        Car carFord = new Car() { Make = "Ford", Model = "Sport", Year = "2002" };
        Car carUnknown = new Car() { Make = "Mazda", Model = "5", Year = "2012" };
        Bike mazdaBike = new Bike() { Make = "Mazda", Model = "6", Year = "2012" };

        IEquatabled<Vehicle> unknownBike = mazdaBike;

        List<Vehicle> all = new List<Vehicle>();
        all.Add(carMazda);
        all.Add(carFord);
        all.Add(carUnknown);
        all.Add(mazdaBike);
        return all;
   }
}

    public class Garage
    {
        public delegate void NewCarDelegate(string numberOfCars, string message);
        public event NewCarDelegate NewCarEvent;

        private int _carsInGarage;
        public int CarsInGarage
        {
            get { return _carsInGarage; }
            set
            {
                if (NewCarEvent != null)
                {
                    _carsInGarage = value;
                    NewCarEvent(value.ToString(), " cars in the garage.");
                }
            }
        }

        public Garage()
        {
            CarsInGarage = 0;
        }
    }

    public class Vehicle : IEquatabled<Vehicle>
    {
        public string Make { get; set; }
        public string Model { get; set; }
        public string Year { get; set; }
        public virtual int Wheels { get; set; }

        //Implementation of IEquatable<T> interface 
        public bool EqualsTo(Vehicle car)
        {
            if (this.Make == car.Make && this.Model == car.Model && this.Year == car.Year)
                return true;
            else
                return false;
        }

    }

    public class Car : Vehicle
    {}

    public class Bike : Vehicle
    {}

    interface IEquatabled<T>
    {
        bool EqualsTo(T obj);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:26:32.670

不要将它传递给每次调用 put in Garage 时，但使用车库创建 Traffic 实例是否更有意义。

```
 Garage g = new Garage();
        g.NewCarEvent += new Garage.NewCarDelegate(GarageCount);

        Traffic traffic = new Traffic(g); // pass your garage here.

        traffic.PutInGarage(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:59:14.667

在评论中回答：

> 当然，该方法应该在 Garage 对象上？Garage.StoreTraffic(traffic) - 实现似乎倒退了。交通不应该对车库的行为负责...... – 查理 2 月 28 日 15:25

这表明我确实需要将实例作为参数传递，但也有助于修复我的实现！

# javascript - JavaScript：将数组的项目插入另一个数组

> ID：15139182
> 
> 赞同：2
> 
> 时间：2013-02-28T15:20:43.963
> 
> 标签：javascript, arrays, extjs

*如何在*另一个数组中插入数组的项目？

*内部*意味着插入数组并“扩展”它以使其项目成为插入它们的数组的一部分。例子：

```
var mainArr=[a,e,f,g];
var innerArr=[b,c,d]; 
```

结果数组为：

```
[a,b,c,d,e,f,g] 
```

应保留插入项目的顺序。假设项目*不可*排序。

如果 ExtJS 框架通过它的功能来促进上述内容，[`Array`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Array)则可以在这种情况下使用这些功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:23:46.250

如果您知道要“插入”的索引，则可以使用`concat`：

```
var result = mainArr.slice(0,2).concat(innerArr, mainArr.slice(2)); 
```

如果它们仅包含要按顺序排列的数字，您也可以只`concat`将两个数组放在一起，然后对它们进行`.sort(function (a, b) { return a - b; });`排序。

* * *

编辑：我不打算建议`.splice`，因为它需要标量参数，但多亏了你的魔力，`.apply`你仍然可以做到：

```
Array.prototype.splice.apply(mainArr, [index,0].concat(innerArr)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:29:07.220

如果要在某个索引处插入数组：

```
mainArr.splice.apply(mainArr,[index,0].concat(innerArr)) 
```

将在指定索引处的主 Arr 内插入 innerArr。

这将使用参数 index,0,...innerArr 内容在 mainArr 上运行 splice，并在指定索引处添加这些额外参数。

### 更新

一个班轮修改 mainArr，它不返回值。

如果你需要保留mainArr，你可以克隆它

```
newarr = mainArr.splice(0)
newarr.splice.apply(newArr,[index,0].concat(innerArr)) 
```

或（可读性较差）

```
mainArr.splice(0).splice.apply(this,[index,0].concat(innerArr)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:27:05.030

你可以使用这个：

```
var mainArr=['a','e','f','g'];
var innerArr=['b','c','d'];
mainArr=mainArr.concat(innerArr).sort()
alert(mainArr) 
```

[http://jsfiddle.net/fR2cC/3/](http://jsfiddle.net/fR2cC/3/)

# c - 逗号分隔的文本文件到结构数组

> ID：15139184
> 
> 赞同：1
> 
> 时间：2013-02-28T15:20:49.530
> 
> 标签：c, arrays, struct

这是 C 语言的家庭作业练习，让我发疯！我已经研究了将近两天，还没有让它工作，所以非常感谢任何帮助！

这是场景：我有一个逗号分隔的文本文件，如下所示：

```
(2005 TS15),2013-Apr-07,15.2,0.0391,8.0,0.0205,20.61,20.61,1890,21,13,APO*,0.479,M
(2010 GM23),2013-Apr-13,3.9,0.0099,0.9,0.0022,13.14,13.12,61600,24.7,7,APO*,0.195,M
(2009 SQ104),2013-Apr-22,27.8,0.0714,27.8,0.0714,8.16,8.15,67300,20.9,19,APO*,0.408,S
(2012 XF55),2013-Apr-22,32.7,0.0841,32.7,0.0840,7.33,7.33,15600,22.5,7,APO*,0.446,M 
```

文件中有 10000 条记录（其数据与近地天体有关）。

我需要能够找到 10 个最大的对象/ 10 个最近的对象等，所以我的计划是将数据读入一个结构数组，每个结构都基于文件中的列。我已经创建了结构并创建了它的实例以从文件中填充。

我的问题最终在一般功能中......我认为......

我尝试将完整的结构数组初始化为结构的空白实例，但在那里没有任何效果......

我尝试将每一行作为字符串读取，然后根据“，”限制器对其进行标记，但我不知道如何将标记保存到结构的每个元素（这是注释掉的结尾部分...... )

我尝试使用`fread()`将文件读入结构数组，但那里也没有发生任何事情（那是被注释掉的结尾部分......）

我的代码如下。如果有人能指出我正确的方向，我将不胜感激！！（我希望它的格式没问题。如果我没有正确解释这个问题，请告诉我，我会的！！！）

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include <math.h>

    #define RECORDS 10972    /* number of records in the file */

    typedef struct {
        char *objectName;
        char *CADate;
        double NomDistLD;
        double NomDistAU;
        double MinDistLD;
        double MinDistAU;
        int VRel;
        int Vinf;
        int NSig;
        float HVm;
        int ref;
        char *ObjClass;
        double Diameter;
        char *Type;
    } NEO; 

    NEO textFile [RECORDS];
    NEO passing[RECORDS];

    void menu();
    void countFile (FILE*fptr);
    void general (FILE*fptr);

    int main (void)
    {
        char filename[50];
        int choice;

        FILE* fptr;

        printf("Enter name of file to open: \n");
        scanf("%s", &filename);

        fptr = fopen(filename, "r");
        if (fptr != NULL)
            printf ("File %s opened succesfully!\n\n", filename);
        else
            printf ("File %s not found!\n", filename);

        countFile(fptr);

       do
       {
     menu();
     choice= 0;

        while(choice <1 || choice >5)
        {
            printf("\nChoose an option from the above (1-5):\n");
            scanf ("%d", &choice);
        }
            switch(choice)
            {
                case 1:
                    printf("function largest\n");
                    break;
                case 2:
                    printf("function closest\n");
                    break;
                case 3:
                    printf("function largest KE\n");
                    break;
                case 4:
                    general (fptr);
                    break;
                default:
                    break;
            }
    }

    while (choice !=5); 
        printf("\n\nProgram Exiting. Goodbye!\n\n");

fclose (fptr);

return 0;
    }

    void general (FILE*fptr)
    {
int count= 0,  fileEnd= 0, i= 0, test= 0;
char **neoArray;
char hold[200];    /* string to hold tokenised strings */
char temp[10000];   /* string to hold each record as it is read in */

char *pToken;
const char *delim = ",";    /* define delimiter to tokenising each record */

passing->objectName = "";
passing->CADate = "";
passing->NomDistLD = 0.0;
passing->NomDistAU = 0.0;
passing->MinDistLD = 0.0;
passing->MinDistAU = 0.0;
passing->VRel = 0;
passing->Vinf = 0;
passing->NSig = 0;
passing->HVm = 0.0;
passing->ref = 0;
passing->ObjClass = "";
passing->Diameter = 0.0;
passing->Type = "";

for (i=0; i<RECORDS; i++)
{
    textFile[i] = passing;
}
    }

      /*  while (!feof(fptr))
{
    test = fread(&passing, sizeof(NEO), 1, fptr);

    if(test != 0)
    {
        printf("\n%s %s %f\n", passing[0].objectName, passing[0].CADate, passing[0].NomDistLD);
    }
}

/*while(!feof (fptr))
{
    for (i=0; i<RECORDS; i++)
    {

        fscanf(fptr, "%s", temp);

        pToken = strtok(temp, delim);
        {
            strcpy(textFile[i].objectName, pToken);
        }

        pToken = strtok(NULL, delim);
        while (pToken != NULL)
        {
            strcpy(textFile[i].CADate, pToken);
        }

        pToken = strtok(NULL, delim);
        while (pToken != NULL)
        {
            textFile[i].NomDistLD = atoi(pToken);
        }

        printf("\n%s %s %f\n", textFile[i].objectName, textFile[i].CADate, textFile[i].NomDistLD);
    }

    rewind (fptr);
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:24:01.233

您的问题很可能是您将字符串复制到内存的随机区域中，因为您从未初始化`objectName`and`CADate`指针。

您最好用实际的数组替换这些指针：

```
char objectName[128];
char CADate[128]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:28:55.373

我会在每一行中阅读

然后向前扫描，直到找到 ,。将每个 , 替换为 \0。数一数，

使用 count 调用不同的 sscanf 函数将不同的字段加载到当前结构中。字段的字符串类型需要 strdup'ing，为它们分配内存。

作为一个快速测试，有一个较短版本的 csv 文件（比如 4 行）并使用断言功能来检查预期值是否进入了结构

这种问题最好使用 perl 或 python 之类的脚本语言来解决

希望这可以帮助！

# actionscript-3 - Actionscript Timer 在循环次数后不会停止

> ID：15139187
> 
> 赞同：0
> 
> 时间：2013-02-28T15:20:58.780
> 
> 标签：actionscript-3, loops, timer

请帮忙！我不知道为什么我的计时器在循环数后没有停止。我在开头声明了一个变量“roundCount”。Timer 应该在它的值为零时停止，对吧？但它不断递减“roundCount”的值 3,2,1,0,-1,-2,-3 等。

```
var roundLength:uint = 1000;
var roundCount:uint = 0;

con_btn.addEventListener(MouseEvent.CLICK, conPoint);

function conPoint(m:MouseEvent)
{
    if (cB.height == 60)
    {
        conductSigns.conductMasker.y = 27;
        roundCount = 10;
        penaltyTimer.start();
    }
}

var penaltyTimer:Timer = new Timer(roundLength,roundCount);
penaltyTimer.addEventListener(TimerEvent.TIMER, countDown);

function countDown(t:TimerEvent):void
{
    timeOut_txt.text = String(roundCount - penaltyTimer.currentCount);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:27:54.360

从这段代码中，roundCount 为 0，因此您使用 repeatCount 0 启动计时器，这意味着 - 永远重复。[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html#Timer()roundCount](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html#Timer%28%29) 也不会减少。你减去它的惩罚Timer.currentCount

要使计时器在您的情况下执行 3 次，您必须
确保在创建计时器时 roundCount 为 3。在创建计时器对象后更改值不会反映到计时器。

# html - 是否有任何基于 Maven 的 HTML 验证器

> ID：15139189
> 
> 赞同：7
> 
> 时间：2013-02-28T15:21:01.457
> 
> 标签：html, maven

我有一个包含许多 HTML 文件的项目。作为我的 Maven 构建过程的一部分，我想在这些文件中运行一个验证器，以确保：

1.  这些文件在语法上是正确的（例如检查所有开始标签是否都有对应的结束标签）
2.  这些文件符合编码指南

任何人都可以推荐一个好的验证器来做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T07:45:07.073

我正在使用带有 2 个重要插件的[声纳作为](https://www.sonarqube.org/)

1.  [XML 插件](https://www.sonarsource.com/products/codeanalyzers/sonarxml.html)

这个插件可以在 Sonar 中分析 XML 文件。一些常见的用例是：

1.  根据 W3C 提供的模式（严格、过渡和其他）验证 XHTML 文件
2.  根据提供的 XML 模式验证 XML 文件
3.  验证 XML 文件中的规则（例如：根据编码标准验证 Maven pom 文件）

2\. [网络插件](https://www.sonarsource.com/products/codeanalyzers/sonarweb.html)

该插件提供对 Sonar 中 Web 文件的静态代码分析。目前支持 JSP 和 JSF。为 Ruby 模板（erb 文件）提供了一些初始支持。

支持以下指标：

1.  调整大小（文件、代码行）
2.  规则合规
3.  复杂
4.  复制
5.  评论

该插件默认扫描以下文件：.xhtml、.jspf、.jsp。文件扩展名是可配置的。

该插件在 Sonar 中导入源代码，计算测量值并扫描代码中的违规、重复和复杂性。检查可在 Sonar 规则存储库中进行配置。

它们都是*开源*的。[无论如何，Sonar 还提供了名为Web(HTML, JSP)](http://www.sonarsource.com/products/plugins/languages/web/)的商业插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-30T12:27:24.697

现在还有一个离线工作的 Nu HTML 检查器 ( [https://validator.github.io ) 的 maven 插件：](https://validator.github.io) [https](https://github.com/validator/maven-plugin) ://github.com/validator/maven-plugin 。免责声明：我是 maven 插件的作者。

# c# - 从控制台应用程序输出缓存站点

> ID：15139190
> 
> 赞同：0
> 
> 时间：2013-02-28T15:21:03.837
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, console-application, outputcache

我想运行一个控制台应用程序，它在所有输出缓存页面上调用一个网站，以便为用户缓存所有缓存的页面。使用浏览器时，页面缓存正确，但我希望能够运行一个为用户缓存所有页面的功能。

我正在使用`new System.Net.WebClient().DownloadString("http://url");`，但使用此调用时页面不会缓存。

缓存属性

```
[ChildActionOutputCache(("CacheAll"), Location = OutputCacheLocation.Server)] 
```

属性函数

```
public class ChildActionOutputCacheAttribute : OutputCacheAttribute
    {
        public ChildActionOutputCacheAttribute(string cacheProfile)
        {
            var settings = (OutputCacheSettingsSection)WebConfigurationManager.GetSection("system.web/caching/outputCacheSettings");
            var profile = settings.OutputCacheProfiles[cacheProfile];
            Duration = profile.Duration;
            VaryByParam = profile.VaryByParam;
            VaryByCustom = profile.VaryByCustom;
        }
    } 
```

属性的 web.config 属性

```
 <caching>
      <outputCacheSettings>
        <outputCacheProfiles>
          <add name="CacheAll" 
               duration="43200"
               location="Server"
               varyByParam="*"/>
        </outputCacheProfiles>
      </outputCacheSettings>
    </caching> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-13T12:37:09.580

我知道这是一个老问题，但对于其他人来说，为什么输出缓存不适用于他们的控制台应用程序发出的请求 - 答案是 cookie。

您发出的请求没有 cookie，来自服务器的响应有新的 cookie - 所以它不会缓存输出。

使用此答案中的代码提出您的请求，一切都会缓存好：[https ://stackoverflow.com/a/3892075](https://stackoverflow.com/a/3892075)

我必须做的是向我的应用程序主页发出请求。这对会话进行了排序，并返回了会话 cookie。然后将这些 cookie 添加到后续请求（添加到我想要缓存的页面）中，一切都按预期工作。

# python - Matplotlib hexbin 内存错误

> ID：15139198
> 
> 赞同：0
> 
> 时间：2013-02-28T15:21:36.210
> 
> 标签：python, matplotlib

我正在尝试在 python 中制作一个相当大的数据集的 hexbin 图。包含数据的两个数组有 3500 万个条目。但是，它们只占用 1.5 GB 的内存，而我有超过 4 GB 的可用内存。Hexbin 因内存错误而失败。

```
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
Traceback (most recent call last):
File "plotmodel.py", line 20, in <module>
plt.hexbin(d,t,m, bins='log', gridsize=20, xscale='log', lw=1, edgecolors='black',    alpha=0.8, cmap=plt.cm.jet)
File "/Library/Frameworks/Python.framework/Versions/7.1/lib/python2.7/site-packages/matplotlib/pyplot.py", line 2142, in hexbin
ret = ax.hexbin(x, y, C, gridsize, bins, xscale, yscale, extent, cmap, norm, vmin, vmax, alpha, linewidths, edgecolors, reduce_C_function, mincnt, marginals, **kwargs)
File "/Library/Frameworks/Python.framework/Versions/7.1/lib/python2.7/site-packages/matplotlib/axes.py", line 6035, in hexbin
iy2 = np.floor(y).astype(int)
MemoryError 
```

hexbin 不能在大型数据集上工作或者是由于硬件限制导致的错误，有什么根本原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:06:32.730

它看起来像`hexbin`制作了几个`np.ndarray`与输入数据大小相同的 s （粗略计算，我得到了*8*个！）。这没有什么*基本*的，它是这样写的，它完成了从`numpy`.

我建议`hexbin`从 mpl 中取出，将其分成三部分，第一部分设置 hexarray 的详细信息，第二部分将数据添加到`accum`数组中（这样你就可以分块处理数据），第三部分这需要`accum`和第一部分的输出来实际制作情节。

# jquery - jQueryUI自动完成在MVC4 c#中显示值而不是标签

> ID：15139199
> 
> 赞同：0
> 
> 时间：2013-02-28T15:21:36.757
> 
> 标签：jquery, asp.net-mvc, jquery-ui

使用 jQueryUI 自动完成 - 我返回“代理”列表及其 ID，我的控制器返回正确的 JSON，例如：

```
[{"tvid":12,"agentName":"Smith Gary"},{"tvid":43,"agentName":"Walls Arthur"},{"tvid":623,"agentName":"Mena Ati"}] 
```

我的 JavaScript 是：

```
 $("#tvID").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "/AgentList/AutoCompleteAnalyst",
            type: "POST",
            dataType: "json",
            data: { term: request.term },
            success: function (data) {
                response($.map(data, function (item) {
                    return { value: item.tvid, label: item.agentName };
                }))
            }
        })
    },
    messages: {
        noResults: "", results: ""
    }
}); 
```

而我的观点是：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.tvID)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.tvID)
        @Html.ValidationMessageFor(model => model.tvID)
    </div> 
```

自动完成显示正常，但是当我从列表中选择一个名称时，它是填充上面文本框的 tvID（这对数据库有效，因为它是我需要的 tvID） - 但是，我有没有在文本框中显示 agentName，并使其在发布到控制器时不会导致验证错误：

**自动完成正确显示**

![自动完成正确显示](../Images/5e90512c068d43e1b8cad492714fa22a.png)

**但在框中显示 tvID，而不是 agentName**

![但在框中显示 tvID，而不是 agentName](../Images/597c0397c444f21ded1001c01784fa2e.png)

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:22:26.447

试试这个并告诉我它是否有效：

```
$("#tvID").autocomplete({
source: function (request, response) {
    $.ajax({
        url: "/AgentList/AutoCompleteAnalyst",
        type: "POST",
        dataType: "json",
        data: { term: request.term },
        success: function (data) {
            response($.map(data, function (item) {
                return { value: item.tvid, label: item.agentName };
            }))
        }
    })
},
messages: {
    noResults: "", results: ""
}
}).data("autocomplete")._renderItem = function(ul,item){
  return $("<li>")
                .append($("<a>").text(item.label)).append($("input:hidden")).attr("name","some_name").val(item.tvid)
                .appendTo(ul);
}; 
```

注意：您可能需要稍微更改模型才能使用它，因为现在您将从隐藏字段而不是文本框中获取值。文本框只会提供名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:05:10.980

正如gaurav 所建议的那样，注入隐藏的输入标签与使用自动完成功能所获得的效果差不多。即使选项具有标签和值，当您选择一个时，该值也会被放入可见的输入控件中，并且它的工作就完成了。

我可以看到几个选项。

**自定义自动完成**

您可以使用两个输入，一个用于名称的虚拟可见输入，一个用于您要提交的值（绑定到您的模型）的隐藏输入。然后，您可以通过编写自己的处理程序来更改自动完成的工作方式`select`，该处理程序将获取标签并将其放入可见输入中，并将值放入模型绑定的隐藏输入中。

假设您有两个输入，第一个是可见的并接受用户输入进行搜索，第二个是隐藏的并将存储提交/绑定的值并具有 tvidValue 类，您可以像这样配置自动完成：

```
focus: function( event, ui ) {
  //prevent the autocomplete's input from changing as the
  //user navigates the available options.
  this.selectedItem = null;
  return false;
},
select: function( event, ui ) {
  if ( ui.item ) {
  valueCtl = $this.next("input.tvidValue").val(ui.item.value);
  this.value = ui.item.label;
  return false;
  }
} 
```

然后在您的 HTML 中，类似下面的内容可以让您在 tvidDisplay 上挂钩自动完成功能：

```
<input class='tvidDisplay' />
@Html.EditorFor(model => model.tvID, new { @class='tvidValue', style='display:none' }) 
```

这种方法的缺点是显示以前的值（在编辑页面上；或者在服务器端验证失败并返回视图之后）。您需要添加一个小函数来从模型绑定的隐藏输入字段中获取值，并将其解析为要存储在可见字段中的名称。这可以通过使用包含这两个值的 ViewModel 来缓解。

此外，如果用户编辑搜索字段但未选择有效的自动完成值，则`select`处理程序不会触发，您将不​​知道更新隐藏输入的值。

**包装自动完成的自定义控件**

第二种方法——我选择的方法——是在自动完成之上创建一个包装器。它在一些 HTML 中生成一个隐藏的输入，显示名称和一个 [x] 来删除它。自动完成框永远不会绑定到我的模型 - 它纯粹是标记。生成的输入被赋予适当的名称属性，因此在提交时它们会像其他表单元素一样被默认模型绑定器汇总和绑定。它支持一个人或多个人，能够从 JSON 对象中恢复值（用于编辑页面）等。

它仍然是一个早期版本，但它在内部运行良好。我只是对其进行了一些更新，以便更灵活地使用不同的服务端点并将其发布到[GitHub](https://github.com/ErikNoren/entitypicker)（[现场演示](http://htmlpreview.github.com/?https://github.com/ErikNoren/entitypicker/blob/master/entitypickerdemo.html)）。您可能需要修改`getEntityHtml`以更改其将值存储到隐藏输入字段的方式 - 现在它使用分号连接值和标签。这对我们在服务器端很有用，但可能并不适合所有人。如果您使用 jQuery UI 主题，该控件使用 jQuery 自动完成并使用 jQuery UI 类进行装饰，以尝试匹配页面外观/感觉。

**完全披露：如果我在其中到处使用“我”并不清楚，我就是作者。**

# iphone - 从可变数组中获取 uiimageviews

> ID：15139202
> 
> 赞同：0
> 
> 时间：2013-02-28T15:21:43.797
> 
> 标签：iphone, ios, objective-c

我将所有板存储`UIImageViews`到一个可变数组“brds”（相交的那些）

```
for (UIImageView *board in boardImg){
    if (CGRectIntersectsRect(image.frame, board.frame)) {
        [brds addObject:board];
    }
} 
```

然后稍后我在 brds 中找到正确的板，例如在索引 1:。然后我尝试使用该 brds[1] 的位置。为什么我没有得到正确的 x 和 y。我相信它总是给我 x = 0 和 y = 0。左上角。

```
board1 = brds[1];

CGRect frame = image.frame;
frame.origin.x = board1.frame.origin.x;
frame.origin.y = board1.frame.origin.y;
image.frame = frame; 
```

当我将图像视图放入数组时，它不会存储坐标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:01:26.623

您应该使用 . 检查您的数组是否实际包含数据`NSLog`。它可能为 null，您必须在添加对象之前对其进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:10:11.813

RGRect 数据结构不是可重用的Objective-C 对象。这意味着您无法修改它们。最简单的方法是为您的目的创建一个新的。

```
CGRect frame = CGRectMake(board1.frame.origin.x,
                          board1.frame.origin.y,
                          image.frame.size.width,
                          image.frame.size.height);

image.frame = frame; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T15:28:41.133

它不是`board1 = brds[1];` brds 也不是 C 数组，而是 NSArray。利用`board1 = [brds objectAtIndex:1];`

# sql - 获取整数数组中不相等元素的最小差异

> ID：15139207
> 
> 赞同：0
> 
> 时间：2013-02-28T15:22:01.613
> 
> 标签：sql, arrays, postgresql

我想分析 PostgreSQL (9.1) 中的整数数组列。使用`intarray`（[此处的文档](http://www.postgresql.org/docs/9.1/static/intarray.html)）我能够计算：

*   数组长度
*   最小值
*   最大值
*   独特元素的数量

我的查询是：

```
 select 
        (array_length(string_to_array(num_partition,' ')::int[], 1))::smallint as part_len,
        icount(uniq(sort(string_to_array(num_partition,' ')::int[])))::smallint as part_unq,
        ((sort(string_to_array(num_partition,' ')::int[],'desc'))[1])::smallint as part_max,
        ((sort(string_to_array(num_partition,' ')::int[]))[1])::smallint as part_min    
    from 
        tmp.npart 
```

现在我想计算任何不相等元素之间的最小差异。例子：

```
Array [1,5,5,10]
Expected result: 4 (because of 5-1 equals to 4) 
```

我想我可以使用以下方法计算：

1.  获取数组的唯一元素
2.  排序数组
3.  对数组中的每个元素减去 A[I] - A[I+1]
4.  在步骤 3 中获取最大结果

例子：

```
Input: [7,9,12,20,25,1,1,20,25]
1) Unique [1,7,9,12,20,25]
2) Sort (desc): [25,20,12,9,7,1] 
3) Diff A[i] - A[i+1]: [5,8,3,2,6]
4) Min: 2 
```

有什么简单的方法可以做到这一点吗？我需要在一个有 150 000 000 行的表上计算这个。

示例数据（或[sqlfiddle](http://sqlfiddle.com/#!1/c717e/1)）：

```
create table tmp (intarr int[]);

insert into tmp values (ARRAY[1,1,3,6,9,25]);
insert into tmp values (ARRAY[10,20,30,50]);
insert into tmp values (ARRAY[1,4,8,15,21]);
insert into tmp values (ARRAY[1]);
insert into tmp values (ARRAY[1,1,1,1,9,9,9,9,20,20,20]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:25:53.453

遍历数组的函数：

```
create or replace function array_min_diff(a int[])
returns int as
$$
declare
    min_diff int = null;
    i int = 2;
begin
    select array_agg(e order by e)
    from (
        select distinct e
        from unnest(a) s(e)
    ) s
    into a;

    loop
        min_diff = least(min_diff, a[i] - a[i - 1]);
        i := i + 1;
        exit when i > array_upper(a, 1);
    end loop;

    return min_diff;
end;
$$ language plpgsql immutable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:43:09.147

[SQL小提琴](http://sqlfiddle.com/#!1/c717e/2)

```
select intarr, min(diff) min_diff
from (
    select
        intarr,
        i - lag(i) over(partition by intarr order by i) diff
    from (
        select distinct intarr, unnest(intarr) i
        from tmp
    ) s
) s
group by intarr 
```

# ios - 在数据库中删除后插入时调用的库例程乱序

> ID：15139209
> 
> 赞同：0
> 
> 时间：2013-02-28T15:22:02.710
> 
> 标签：ios, sqlite, ios5

我正在我的 iPhone 应用程序中创建 SQLite 数据库。如果连续删除并在删除 20 个这样的项目后，在插入数据库后，我收到错误消息为“库例程调用失序”。我不知道为什么我会收到此错误无论是插入还是删除。请尽快帮助我。

我搜索了解决方案，我发现使用 NSInvocationperationQueue，如果我只使用该数据而不添加 database.so，我该怎么做，我不知道如何使用 NSInvocationperationQueue

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:07:34.993

我最近自己遇到了这个。我将我的插入和绑定步骤包装在这样的语句中：

```
If (<your SQL> != SQLITE_OK) {} 
```

如果您事先清理了数据，您可以简单地调用没有循环的 SQL 例程 - 这可能会解决您的问题。

不过要小心！这让您负责检查数据的有效性，否则您的应用程序可能会崩溃。

# iphone - 我如何从目标 c 库中调用抽象方法

> ID：15139212
> 
> 赞同：1
> 
> 时间：2013-02-28T15:22:12.797
> 
> 标签：iphone, objective-c, ios6, abstract-class

当您创建抽象类时来自java背景，并且有人使用它们并用它们的值覆盖它们：在目标c中......您如何在静态库中创建一个抽象类以供某人打开和覆盖？谢谢

编辑：更具体地说，他们如何在他们的方法中实现该方法并覆盖这些值以供自己使用？再次抱歉，如果这很容易，我来自 java 背景

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:27:10.073

> 与其他一些语言不同，Objective-C 没有将类标记为抽象的语法，也不会阻止您创建抽象类的实例。

只需在文档中说它打算被子类化而不是这样使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:27:30.573

Cocoa 不提供任何称为抽象的东西。我们可以创建一个类抽象，它只在运行时检查，编译时不检查。

这里只是一个尝试：

```
@interface AbstractClass : NSObject
@end

@implementation AbstractClass
+ (id)alloc{
    if (self == [AbstractClass class]) {
        NSLog(@"Abstract Class cant be used");
    }
    return [super alloc];
@end 
```

注意：这不是编译器检查的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:30:17.497

我自己来自 Java 背景，当我第一次开始使用 Objective-C 时，我也在寻找同样的东西。我发现这回答了我的问题：

[在 Objective-C 中创建一个抽象类](https://stackoverflow.com/questions/1034373/creating-an-abstract-class-in-objective-c)

简短的回答，Objective-C 中没有抽象类（至少在 Java 上下文中）。

# php - 将数组中的值作为选择形式传递

> ID：15139213
> 
> 赞同：0
> 
> 时间：2013-02-28T15:22:19.747
> 
> 标签：php, sql

我在这里有这部分，它为我生成了一个数组：

```
$ids_sektor = explode("/",$row['sektori']); 
```

我需要的是在选择选项中回显所有这些值......我的选择框的 html 是：

```
 <select id="sektori_pergjegjes" name="sektori_pergjegjes">
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
                <option value="E">E</option>
</select> 
```

我尝试了 foreach 但没有成功，我想我做错了什么，当然，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:26:22.400

它应该按如下方式工作：

```
 $row['sektori'] = "12/34/56";
   $ids_sektor = explode("/", $row['sektori'];

   foreach ($ids_sektor as $id) {
       echo "<option>$id</option>\n";
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:26:53.940

我不确定我是否很好地理解了这个问题，但应该这样做：

```
<select id="sektori_pergjegjes" name="sektori_pergjegjes">
<?php
    foreach($ids_sektor as $item)
    {
        $id = htmlspecialchars(item);
        echo('<option value="' . $id . '">' . $id . '</option>');
    }
?>
</select> 
```

`htmlspecialchars()`当您 100% 确定`A/B/C/D/E`您的阵列中会出现时，您可以跳过。

# javascript - 字形内填充不需要的区域

> ID：15139217
> 
> 赞同：0
> 
> 时间：2013-02-28T15:22:28.413
> 
> 标签：javascript, html, canvas, fonts, fill

有一个角色，我想画它。路径是正确的，但填充不正确。看图片（1.是预期的，2.是我得到的）：

![字母，重叠区域未填充和填充](../Images/c130cec5c439eebb5d5ec678ef13b2fa.png)

```
 c.beginPath();
  //draw curves
  c.closePath();
  c.fill(); 
```

我怎样才能让它工作？

* * *

用中风（5px红色）：

![在此处输入图像描述](../Images/6409e6314b0541d2f56fff37aff42994.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:47:56.433

使用 context.stroke() 而不是 context.fill()

stroke() 填充形状的内部。

fill() 在形状的外部绘制一个笔触。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/ZZD47/](http://jsfiddle.net/m1erickson/ZZD47/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        // draw the inside fill of a circle
        ctx.beginPath();
        ctx.arc(100, 100, 50, 0, 2 * Math.PI, false);
        ctx.fillStyle = 'blue';
        ctx.fill();

        // draw the outside stroke of a circle
        ctx.beginPath();
        ctx.arc(250, 100, 50, 0, 2 * Math.PI, false);
        ctx.lineWidth = 5;
        ctx.strokeStyle = 'red';
        ctx.stroke();

    }); // end $(function(){});
</script>

</head>

<body>
  <canvas id="canvas" width=400 height=200></canvas>
</body>
</html> 
```

# jquery - jQuery json 格式

> ID：15139218
> 
> 赞同：0
> 
> 时间：2013-02-28T15:22:28.487
> 
> 标签：jquery, json

为什么这行不通？

```
var data = {"one": [
    {"slot1":true, "app":"facebook"},
    {"slot2":true, "app2": "facebook"}
]};

$(data.one).each(function() {
    if(this.slot1==true){
        $('#dropable').find('.1_1').append('<img src="img/apps/' + this.app1 + '.png" alt="' + this.app1 + '">');
    }
    if(this.slot2==true){
        $('#dropable').find('.1_2').append('<img src="img/apps/' + this.app2 + '.png" alt="' + this.app2 + '">');
    }
}); 
```

我的#dropable：

```
<div id="dropable" class="drag"><div class="app 1_1"></div></div>
<div id="dropable" class="drag"><div class="app 1_2"></div></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:26:36.593

您有两个具有相同 ID 的 DIV。尝试将“#dropable”更改为“.drag”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:29:46.240

此代码存在多个问题。

首先`$().each`是针对 DOM 元素，而不是针对您自己的数组/对象。你想要`$.each`。其次，`this.app1`在你的对象中不存在，你有`app`and `app2`。

最后，最重要的是，您有 2 个`dropable`. 你不能那样做。ID 应该是唯一的。使用类而不是 ID。

```
<div class="drag"><div class="app 1_1"></div></div>
<div class="drag"><div class="app 1_2"></div></div> 
```

然后这样做：

```
var data = {"one": [
    {"slot1":true, "app1":"facebook"},
    {"slot2":true, "app2":"facebook"}
]};

$.each(data.one,function() {
    if(this.slot1==true){
        $('.drag').find('.1_1').append('<img src="img/apps/' + this.app1 + '.png" alt="' + this.app1 + '">');
    }
    if(this.slot2==true){
        $('.drag').find('.1_2').append('<img src="img/apps/' + this.app2 + '.png" alt="' + this.app2 + '">');
    }
}); 
```

# javascript - jQuery 计算给出 NaN

> ID：15139224
> 
> 赞同：0
> 
> 时间：2013-02-28T15:22:48.680
> 
> 标签：javascript, jquery

我试图进行计算，但我不断收到错误 NaN；你能帮我弄清楚如何为 var testBottom 做数学吗？

```
jQuery(document).ready(function(){
var test = jQuery("#test");
var testTopOffset = test.offset();
var testTop = testTopOffset;
var testHeight = test.height();
var testBottom = parseInt(testTop + testHeight);
alert(testHeight);
alert(testBottom);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:25:04.750

`test.offset();`返回具有`top`和`left`属性的对象，而不是数字。如果您想要顶部偏移量，则需要向下钻取：

```
var testTopOffset = test.offset().top; 
```

请参阅[文档](http://api.jquery.com/offset/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:25:12.427

```
var testTopOffset = test.offset(); 
```

应该

```
var testTopOffset = test.offset().top 
```

# ios - UIWebView 的 ZoomScale 不会改变

> ID：15139227
> 
> 赞同：2
> 
> 时间：2013-02-28T15:22:59.647
> 
> 标签：ios, objective-c, cocoa-touch

我试图通过更改我的 zoomScale 来缩小`UIWebview`。我正在尝试缩小页面的所有内容。这是我的方法：

```
-(void)makeSmaller
{
        _mainWebView.scalesPageToFit = NO;
        _mainWebView.scrollView.zoomScale = 0.2;
        NSLog(@"zoomScale: %f",_mainWebView.scrollView.zoomScale); //Always 1.000
} 
```

加载`zoomScale`后将始终显示 1.000 。`UIWebView`

如果我在这里设置：

```
-(void)loadCurrentMsg
{
    CTCoreMessage *msg = [_messages objectAtIndex:i];
    NSString *body = [msg htmlBody];

    [_mainWebView loadHTMLString:body baseURL:nil];
    _mainWebView.scrollView.zoomScale = 0.2;
} 
```

当我加载下一个 msg 时，`zoomScale`确实会更改并加载`UIWebView`较小的值，但会返回到 1.000 。我想也许它与重新加载页面有关，例如当您需要在 a 中重新加载数据`UITableView`但内部`makeSmaller`比例始终保持在 1.000 时，所以我认为刷新与它没有任何关系。

谁能告诉我有什么区别？谢谢

# java - 尝试捕获信号量的正确方法

> ID：15139231
> 
> 赞同：4
> 
> 时间：2013-02-28T15:23:07.133
> 
> 标签：java, try-catch, semaphore

在 try-catch 块中包装信号量操作的正确方法是什么？如果获取操作在获取了一些（但不是全部）请求的许可后被中断，会发生什么？你怎么知道又要释放多少？释放是否应该进入“最终”块，但是如果动作被中断，您是否可能释放您没有获得的许可？

```
try {
    lock.acquire(permits);

    //Do some things that require synchronization

    //Make sure to release all of the permits again!
    lock.release(permits);
} catch (InterruptedException e) {
    log.error("Interrupted!");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:35:25.733

该`Semaphore.acquire(int)`方法是全有或全无操作，要么获得所有请求的许可，要么阻止。您可以在代码周围使用双重尝试，或者让（可能的）中断异常从获取调用堆栈中冒泡。

### 双重尝试块：

```
try {
    lock.acquire(permits);

    try {
        // do some stuff here
    } finally {
        lock.release(permits);
    }
} catch(final InterruptedException ie) {
    // handle acquire failure here
} 
```

### 气泡“收购”异常：

```
lock.acquire(permits);

try {
    // do some stuff here
} finally {
    lock.release(permits);
} 
```

在切线中，请记住信号量必须通过严格的编程约定保持平衡，因此您应该始终释放尽可能多的许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-11T14:52:19.123

以`add`方法`BoundedHashSet`为例，

```
 public boolean add(T o) throws InterruptedException {
        sem.acquire();
        boolean wasAdded = false;
        try {
            wasAdded = set.add(o);
            return wasAdded;
        } finally {
            if (!wasAdded)
                sem.release();
        }
    } 
```

如果`sem.acquire();`抛出 InterruptedException，则跳过 try 块和 finally 块。

否则，我们成功获取信号量，try 块和 finally 块将被一起执行。也就是说，我们将释放我们获得的相同数量的许可证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-28T21:21:23.073

要添加@Perception 的答案，您可以选择分离嵌套的双try-catch 并在acquire 块上添加重试，这适合我的用例。

```
int retry_limit = 10;
boolean acquired = lock.tryAcquire(permits);
for (int i=0; i < retry_limit && !acquired; ++i) {
    try {
        Thread.sleep(1000);
    }
    acquired = lock.tryAcquire(permits);
}
if (!acquired) {
    throw new IllegalStateException("Unable to acquire permits");
}
try {
    // do some stuff here
} catch(InterruptedException ie) {
    // handle acquire failure here
} catch(Exception ex) {
    // handle other exceptions here
} finally {
    lock.release(permits);
} 
```

# unicode - Quickbooks 带有重音字符的客户在上传时会发生变异

> ID：15139233
> 
> 赞同：4
> 
> 时间：2013-02-28T15:23:13.370
> 
> 标签：unicode, quickbooks, intuit

我在添加带有重音字符的客户时遇到了麻烦。提交的字符没有像我预期的那样存储在 QB 中，当然，这会导致原始应用程序出现问题。这是客户添加请求和响应的示例。请注意名称的不同... División vs Divisiýn 后者是存储在 QuickBooks 中的内容。我使用的是 QB 在线版 6.0 SDK。

```
 #### REQUEST PORTION ####
 <?xml  version="1.0" encoding="ISO-8859-1" ?>
 <?qbxml version="6.0"?>
 <QBXML><QBXMLMsgsRq onError="continueOnError">
 <CustomerAddRq requestID="7770">
 <CustomerAdd><Name>Codelco División Ministro Hales</Name>

 #### RESPONSE PORTION ####
 <?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
 <!DOCTYPE QBXML PUBLIC "-//INTUIT//DTD QBXML QBO 6.0//EN" "http://apps.quickbooks.com/dtds/qbxmlops60.dtd">
 ....
 <CustomerAddRs requestID="7770" statusCode="0" statusMessage="Status OK" statusSeverity="Info">
    <CustomerRet>
     ....
     <Name>Codelco Divisiýn Ministro Hales</Name> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:48:50.887

您可以尝试两件事：

*   如果你使用实体 ó 会发生什么？而不是 ó 直接？

*   您是否尝试过使用 UTF-8 作为编码？在 XML 世界中，它被更频繁地使用，而 UTF-8 允许更多的字符，无论是重音还是其他字符。

服务器端可能发生的两件事，您可能无法确定：

*   服务器是否配置为其他 ISO-8859 标准？（例如，从-4 开始对字符 243 有不同的字符）。

*   您确定 ý 被保存在 QB 中，还是 y 后跟一个组合的 ´ 重音？

/年

# javascript - 在 JavaScript 中调用闭包时，输入闭包代码时是否会创建新的执行上下文？

> ID：15139239
> 
> 赞同：3
> 
> 时间：2013-02-28T15:23:25.823
> 
> 标签：javascript, function, closures, ecmascript-5, first-class-functions

注意下面的闭包示例：

```
<script>
  function foo() {
    var x = 1;
    function bar() {
      var y = 2;
      alert(x + y);
    }
    return bar;
  }

   var dummy = foo(); // Assign variable binding "dummy" to a reference of the "bar" function.
   dummy(); // When entering the "bar" function code, will it go through the execution context creation phase?
</script> 
```

调用虚拟变量绑定（将执行“bar”函数代码）时，是否创建了新的执行上下文？[ECMAScript 规范指定了输入函数代码](http://www.ecma-international.org/ecma-262/5.1/#sec-10.4.3)时会发生什么，但由于这是对函数/闭包的引用，我不确定它是否必须再次经历整个执行上下文创建/绑定阶段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T04:07:33.520

好问题。让我们看看发生了什么：

`dummy()`是[函数调用 (11.2.3)](http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.3)

参见步骤 #8 *“返回调用 func 的 [[Call]] 内部方法的结果，提供 thisValue 作为 this 值并提供列表 argList 作为参数值。”*

所以`dummy.[[Call]]`被调用。转到[13.2.1](http://www.ecma-international.org/ecma-262/5.1/#sec-13.2.1) ( `[[Call]]`)。

*令 funcCtx 为使用 F 的 [[FormalParameters]] 内部属性的值、传递的参数 List args 和 10.4.3 中所述的 this 值为函数代码建立新执行上下文的结果。*

事实上`dummy()`，如[10.4.3](http://www.ecma-international.org/ecma-262/5.1/#sec-10.4.3)中所述，创建新的执行上下文也是如此。

现在`dummy`执行了函数代码，按照 10.4.3 中的步骤 #5 创建 NewDeclarativeEnvironment`dummy.[[Scope]]`

`dummy`只是一个参考`bar`，所以`dummy.[[Scope]]`是`bar.[[Scope]]`。并`bar.[[Scope]]`在执行时定义（前一行），自然会为（包括）`foo`内的每个函数声明创建函数。`bar`

`bar.[[Scope]]`本质上是一个由`[global environment]`和`[foo VE]`（变量环境）组成的链。所以在执行的那一刻，它会创建自己的 VE，并使用 foo 的 VE 作为外部。范围链现在由`[global environment]->[foo VE]->[bar VE]`.

`x`在 var 的 VE`y`中找到，在 bar 的 VE 中找到，并且 alert 成功`3`作为参数接收 :)

但要回答你原来的问题，是的“输入功能代码”发生在

```
(function(){ ... })(); 
```

如果是

```
f(); 
```

因为它们本质上都是调用函数的 [[Call]]。只是第一个是`CallExpression`由 组成的`FunctionExpression`，`Arguments`而第二个是`CallExpression`由 组成`Identifier`的`Arguments`。

两者仍然解析为一个函数对象，该对象具有内部 [[Call]] 方法，这是被执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:46:53.097

我认为范围链是您在这里寻找的东西：

来自[http://www.amazon.com/JavaScript-Definitive-Guide-Activate-Guides/dp/0596805527/ref=sr_1_2?ie=UTF8&qid=1362066219&sr=8-2&keywords=javascript](https://rads.stackoverflow.com/amzn/click/com/0596805527) (3.10.3)

每次调用函数时，它都会创建一个新对象来存储其局部变量，并将该新对象添加到存储的作用域链中，以创建一个新的更长的链来表示该函数调用的作用域。

对于您的问题，是的，它将再次遍历整个执行上下文，否则您如何从 bar() 返回另一个函数，例如

```
function bar() {
      var y = 2;
      alert(x + y);

return function() {alert('hello');}
    } 
```

# c++ - WinSNMP 设置源/管理器端口

> ID：15139240
> 
> 赞同：4
> 
> 时间：2013-02-28T15:23:28.037
> 
> 标签：c++, windows, winapi, port, snmp

[SnmpSetPort](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa378246%28v=vs.85%29.aspx)的文档说 api 允许为目标实体设置端口。

但是，有没有办法影响源实体的端口号，即。管理者？或者至少将其配置为始终使用一个端口？

通过使用wireshark，我可以看到WinSNMP 正在选择一个任意端口src 端口。我的客户正在使用严格的防火墙规则。SNMP SET 发送正常（发送到代理端口 161），但响应被防火墙规则阻止。由于 WinSNMP 有效地随机选择了一个传出端口，我什至无法配置防火墙。

**编辑：**添加图片说明：

src 端口 4089 上的传出请求 ![传出请求](../Images/26c8f4a28f5a2bb82912de2c092eefcd.png)

同一端口 4089 上的传入响应，这当然被防火墙规则阻止。 ![传入请求](../Images/49dd7b74bb1ab445167254e55de4f920.png)

然而，如果我重新启动我的应用程序，WinSNMP 会分配一个不同的 src 端口号，例如。4110

如何控制请求的 src 端口？IE。响应 dst 端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:56:59.603

我认为你在错误的地方搜索，

[微软技术网](http://technet.microsoft.com/en-us/library/cc959643.aspx)

SNMP 将默认 UDP 端口 161 用于一般 SNMP 消息，将 UDP 端口 162 用于 SNMP 陷阱消息。如果这些端口正被其他协议或服务使用，您可以通过修改代理上的本地服务文件来更改设置。服务文件位于 `\%SystemRoot%\System32\Drivers\Etc`

所以去改变端口。

那么您将能够在防火墙例外中配置端口:)

==========

# 新编辑

查看以太网 II：在图像中，SRC 或 DST 是 VMWARE_79

现在这个 openCore(4089) 是远程服务/木马/使用的端口，并且默认情况下由于其漏洞被防火墙阻止，如果您在防火墙例外中添加相同的端口应该可以工作。

（注意：如果其他服务访问或远程代码执行正在进行，此端口也将不起作用。）但可能会导致一些不安全性，以避免您可能允许特定 IP，在这种情况下为 CLIENT ..，如果端口 161 被其他应用程序使用，那么这也可能发生，它会寻找其他端口。

还要寻找用于陷阱的端口 162 [参考：http://technet.microsoft.com/en-us/library/cc959637.aspx]（管理系统）。

检查端口 162 是否在客户端或您的系统中被阻止，那么这也可能发生，它将使用另一个端口。

如需更多帮助，我需要有关您的项目运作的更多详细信息。如果上述编辑没有帮助，请提供详细信息:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:46:47.897

随机端口（源端口）是从 Windows 保留的端口范围中选择的，它是完全可配置的，

[http://support.microsoft.com/kb/929851](http://support.microsoft.com/kb/929851)

通过运行`netsh int ipv4 show dynamicport udp`，`netsh int ipv6 show dynamicport udp`您可以看到当前范围。

以下命令可以设置新的范围，

```
netsh int ipv4 set dynamicport udp start=start_v4 num=number_v4
netsh int ipv6 set dynamicport udp start=start_v6 num=number_v6 
```

但一般来说，您应该更改防火墙规则，而不是更改管理器端设置。为什么防火墙规则要严格检查源端口？这对我来说不太明显。

# svn - 继承了哪些文件夹属性

> ID：15139248
> 
> 赞同：6
> 
> 时间：2013-02-28T15:23:43.090
> 
> 标签：svn, tortoisesvn

对于我们的项目，我们有一些 svn 属性应该应用于 repo 中的所有文件夹。例如`bugtraq:xxx`, 和`svn:ignore`属性。

并且在创建新文件夹并将其添加到存储库时，`bugtraq:xxx`属性将应用于新文件夹，但`svn:ignore`不是...

为什么？

**编辑** 所以我添加了一个树示例：

```
[Root]
   |-- Admin [no props]
   |-- Software [no props]
         |-- MySoftwareProject [B (=Bugtraq)]
               |-- tags [B]
               |-- branches [B]
               |-- trunk [B]
                     |-- Folder_A [B & I (=Ignore)]
                     |-- Folder_B [B & I]
                           |-- New_Folder_C [B] 
```

好的，所以当我创建和添加`New_Folder_C`它时它会自动获取`Bugtraq`但不是`svn:ignore`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-08T18:37:21.830

# Subversion 1.8 客户端的新功能

Subversion 1.8 客户端中有两个新的标准属性：

*   `svn:global-ignores`
*   `svn:auto-props`

这些属性是*可继承*的。也就是说，当您在父目录上设置这些属性之一时，它也适用于所有子目录。这允许您创建一种设置自动属性和项目范围全局忽略的新方法。

这将解决您的问题。但是，您必须确保每个人都使用最新版本的 TortoiseSVN 才能利用这一点。

我还建议您使用我的[pre-commit 钩子](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)，它可以强制使用文件和目录的属性。除非在提交中添加或修改的所有文件上正确设置了属性，否则此挂钩将拒绝评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:51:17.490

在 Subversion 中，属性永远不会被继承。您可以在设置属性时单击“递归应用属性”复选框，TortoiseSVN 会自动在每个降级文件夹上制作属性的副本，但这只是您的 Subversion 客户端提供的节省时间的功能。

`bugtraq:`属性族是[TortoiseSVN 和 Subclipse 开发团队实现的自定义](http://markphip.blogspot.com.es/2007/01/integrating-subversion-with-your-issue.html)功能。当 TortoiseSVN 在你的工作副本的根文件夹中找到给定的标签时，它就会使用 bugtracker 功能——不需要在每个文件夹上都有该属性。

情况并非如此，`svn:ignore`因为它是一个标准的 Subversion 属性，这就是它的设计方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T15:29:16.427

TortoiseSVN 可能正在使用称为[auto props](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.html#svn.advanced.props.auto)的 SVN 功能。你也可以在 TortoiseSVN 文档中看到它们[，](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-propertypage.html)因为也有特殊`tsvn:autoprops`的。

# java - Java：编辑字符串中的值[]

> ID：15139251
> 
> 赞同：1
> 
> 时间：2013-02-28T15:23:58.557
> 
> 标签：java

我是一名 C++/C# 开发人员，但我是 Java 新手。我正在尝试为基本类中的字符串数组实现 setter 和 getter，如下所示：

```
private String[] values = new String[35];

public String get_val(int idx) 
{
    return values[idx];
}

public void set_val(int idx, String val) 
{
    values[idx] = val;
} 
```

当我调用该`set_val`函数时，它将更新第 n 个字符串的值。运行如下代码后：

```
row.set_val(0, row.get_val(0) + "1");
row.set_val(0, row.get_val(1) + "2");
row.set_val(0, row.get_val(2) + "3");

string foo = row.get_val(0); 
```

到 时`string foo = row.get_val(0);`，第 0 个值恢复到其原始值。我是否缺少数组和 Java 的概念？这似乎是非常直接的代码。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:31:38.210

这应该可以正常工作，但我会认真考虑使用 java 内置的 ArrayList 结构。它是预煮成java的，如果你初始化大小，

```
private List<String> strings = new ArrayList<String>(35); 
```

你应该得到相同的（如果不是更好的运行时性能，并且不需要做任何边界检查）

```
private final MAX_SIZE = 35;

public String get_val(int idx)
{
    if(idx<strings.size())
        return strings.get(idx);
    else
        return null;
}

public void set_val(int idx, String val)
{
    if(idx<MAX_SIZE)
        strings.add(val,idx);
    else
        //throw an exception if that's how you really want to do it
} 
```

# .net - 将 .NET 用于 Web 服务并返回 XML

> ID：15139255
> 
> 赞同：1
> 
> 时间：2013-02-28T15:24:02.363
> 
> 标签：.net, xml, web-services

很抱歉在这里问了一个非常基本的问题。我什至不知道我是否在使用正确的术语。我的任务是构建一个程序，该程序可以从 SQL 数据库中检索数据，然后以 XML 格式呈现数据，以便前端开发人员可以在网站上呈现它。我只是被告知使用 .NET 和 WebService 来执行此操作。谁能提供一些关于从哪里开始的建议？特别是我在哪里可以找到要查看的示例？任何建议都很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:37:12.100

首先，您应该去谷歌 WCF 教程并熟悉 WCF Web 服务是什么以及如何创建它。您不一定必须使用 WCF，但如果您使用 .NET，它可能是您的最佳选择。然后你需要创建一个 WCF 项目并从那里开始。数据库访问很简单 - 只需 google 即可获得相关教程。根据要访问的数据类型，可以使用简单的 Sql 客户端，也可以使用实体框架。

单独做你的研究。也许您应该从一个简单的控制台应用程序访问数据库开始，然后开始编写一个简单的 WCF 服务，该服务从数据库中返回一些简单的东西，然后从那里获取它。

*编辑* 这是一个关于从 C# 应用程序使用 SQL Server DB 的教程的链接......

[http://forum.codecall.net/topic/62133-c-and-databases-part-1-high-level-intro-to-working-with-databases-from-c/](http://forum.codecall.net/topic/62133-c-and-databases-part-1-high-level-intro-to-working-with-databases-from-c/)

这是一个关于“Hello World”的基本 WCF 服务应用程序的教程......

[http://www.thebestcsharpprogrammerintheworld.com/blogs/create-and-consume-a-wcf-windows-communication-foundation-service.aspx](http://www.thebestcsharpprogrammerintheworld.com/blogs/create-and-consume-a-wcf-windows-communication-foundation-service.aspx)

这是一个关于使用 XPath 处理 XML 的教程......

[http://csharp.net-tutorials.com/xml/using-xpath-with-the-xmldocument-class/](http://csharp.net-tutorials.com/xml/using-xpath-with-the-xmldocument-class/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:41:14.370

如果您的简报没有具体说明哪种服务，我建议您使用 WCF 服务。转到此[入门教程](http://msdn.microsoft.com/en-gb/library/ms734712.aspx)以获得基本的感觉。这是一个 MSDN，但如果您愿意，我可以为您寻找其他教程。

至于实际获取数据并将其放入 XML 中，我建议使用 ADO.NET（它是 .NET 中的一个框架）。CSharp Station 上的本[教程](http://csharp-station.com/Tutorial/AdoDotNet)有望让您大开眼界。您可能只需要前 4 节课左右即可获得所需内容。

获得数据集后，您将需要一个类似于 GetXML 的方法，[如此 MSDN dataset to XML tutorial](http://msdn.microsoft.com/en-us/library/zx8h06sz.aspx)中所示。

最后一个可以减少到...

```
string xmlOutput = myDataset.GetXml(); 
```

我希望这有帮助。如果这些教程没有太大帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:41:20.970

您当然可以在 .net 中创建 Web 服务。我找到了解释基础知识的 htis 文章：

[http://www.codeproject.com/Articles/337535/Understanding-the-Basics-of-Web-Service-in-ASP-NET](http://www.codeproject.com/Articles/337535/Understanding-the-Basics-of-Web-Service-in-ASP-NET)

但是，Web 服务是一种“老技术”，如果您希望传输数据以进行 UI 渲染，它可能不是最好的。您可能想查看 ASP.NET Web API：

[http://www.asp.net/web-api](http://www.asp.net/web-api)

数据输出将是 JSON 或 XML，具体取决于请求中的“Accept”标头

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:34:03.857

*   [使用 ASP.NET 的 Web 服务](http://msdn.microsoft.com/en-us/library/ms972326.aspx)
*   [SOAP 网络服务](http://www.codeproject.com/Articles/94043/SOAP-Web-Services-Create-Once-Consume-Everywhere)
*   [Asp.net 网络服务](http://www.aspdotnet-suresh.com/2011/05/aspnet-web-service-or-creating-and.html)
*   [XML Web 服务基础](http://msdn.microsoft.com/en-us/library/ms996507.aspx)

# html - 社会图标：精灵还是不精灵？

> ID：15139258
> 
> 赞同：3
> 
> 时间：2013-02-28T15:24:09.333
> 
> 标签：html, css

我目前正在开发一个 HTML/CSS 模板，我将实现以下社交媒体图标：

[http://www.premiumpixels.com/freebies/41-social-media-icons-png/](http://www.premiumpixels.com/freebies/41-social-media-icons-png/)

它们以 41 个单独的 .png 文件的形式出现。我想使用 CSS 类将它们包含到我的模板中，以便于使用，如下所示：

```
<i class="icon-twitter"></i>
<i class="icon-facebook"></i> 
```

现在的问题是，我应该在我的 CSS 类中将每个图标作为一个单独的文件引用，还是应该将所有 41 个图标合并到一个精灵中并调整每个类的背景位置（CSS 精灵技术）？

很明显，可能没有人使用我的主题会在他的网站上使用 41 个社交媒体图标（希望如此）。我想说在一般网站上，一次使用大约 3 或 4 个图标。所以这让我想知道它是否有意义，只使用大约十分之一（41 个中的 4 个）时使用 sprites 技术。

单个文件的文件大小平均约为每个文件 2kb。我创建的精灵大小为 42kb。

这种情况的最佳解决方案是什么？

另外：精灵中的图标如何分布是否重要？我刚刚制作了 2 列和 21 行的图标。它也可能是一列和 41 行，或 6 列和 7 行。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:29:33.783

您应该将它们全部放入一个精灵中。有一些生成器可以让它很容易做到。

将它们组合成一个 sprite 将减少 HTTP 请求的数量。

[http://spritegen.website-performance.org/](http://spritegen.website-performance.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:34:22.563

由于它是您正在构建的模板，我建议为用户提供两个选项。

他们可以使用一个精灵，其中包含最流行的图标，如 Facebook、Twitter、YouTube 等。

另一个包含所有图标的精灵。

然后让模板的用户选择要与模板一起使用的精灵。

如果您在与精灵顶部相同的布局中包含“最受欢迎的图标”，并且其中包含所有这些精灵，那么无论使用什么精灵，您的 CSS 都可以是相同的。

基本原则是尽可能少的http请求，这样做会导致一个http请求的目标，但文件大小更小，可选的更大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:27:27.250

为通用精灵容器创建一个类。

制作单独的类来定位精灵。它们如何排列并不重要。这个想法是减少 HTTP 请求。

# php - 在数组中搜索键的一部分 - PHP

> ID：15139259
> 
> 赞同：3
> 
> 时间：2013-02-28T15:24:13.860
> 
> 标签：php, arrays, search

是否可以搜索数组键？

假设我有以下数组：

```
$array = array('array_one' => 'a', 'array_two' => 'b', 'three' => 'c'); 
```

我只想得到这个数组：

```
$array = array('array_one' => 'a', 'array_two' => 'b'); 
```

所以我想获取每个键，其值包含 key 中的字符串 'array_ *'*。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:31:58.063

*要静态*过滤，您可以使用[`array_intersect_key`](http://php.net/manual/en/function.array-intersect-key.php)：

```
$allowed = array('foo', 'bar');
$filtered = array_intersect_key($array, array_flip($allowed)); 
```

在你的情况下，我认为你需要循环：

```
$filtered = array();

foreach($array as $key => $val) {
    if(false !== strpos($key, 'array_')) {
        $filtered[$key] = $val;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:32:27.320

您可以改用否定过滤器：

```
foreach ($array as $key => $value) {
    if (strpos($key, 'array_') !== 0) {
        unset($array[$key]);
    }
} 
```

[**演示**](http://codepad.viper-7.com/tDGJYg)

请注意，它会就地修改数组。

**更新**

或者，从 5.6 开始，您现在可以使用[`array_filter`](http://php.net/array_filter)：

```
$array = array_filter($array, function($value, $key) {
    return strpos($key, 'array_') === 0;
}, ARRAY_FILTER_USE_BOTH); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T15:29:52.917

您可以`array_filter`在键上使用，然后相交：

```
$validKeys = array_filter(array_keys($array),
    function($key) {
        return substr($key, 0, 6) === 'array_';
    }
);

$array = array_intersect_key($array, array_flip($validKeys)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:29:17.327

我在想一个`foreach`循环：

```
$search='_array';
foreach ($array as $k => $v) {

    if (strpos($a, $search)!==false) echo "$search is in $k!<br />";

} 
```

# c++ - 为什么类或结构必须没有用户定义的构造函数或析构函数以确保 C++ 中 const 的 ROMability？

> ID：15139264
> 
> 赞同：2
> 
> 时间：2013-02-28T15:24:37.043
> 
> 标签：c++, constants

我正在阅读 C++ 的参考资料，在那里我发现为了确保定义为 const 的对象的 ROMability：
1.类或结构必须没有用户定义的构造函数
2.不能有基类或成员对象用户定义的构造函数或析构函数。
我将此参考按位常量而不是可变常量。
在我看来，第一个成立是因为构造函数或析构函数修改了 const 数据成员。因此，我们避免使用用户定义的构造函数或析构函数。
但我无法很好地解释第二点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:33:27.827

正如您所说，第一点是必要的，因为具有用户定义构造函数的对象是在运行时初始化的（在运行前的动态初始化阶段`main`，如果它们具有静态生命周期），因此不能以只读方式放置内存，因为该初始化必须修改对象的内存。

第二点从第一点开始——如果（非静态）成员或基本子对象具有用户定义的构造函数，则该构造函数也必须用于在运行时初始化成员或子对象。因此，至少有一部分对象不能存储在只读存储器中；所以物体本身不可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:30:59.463

构造函数/析构函数会修改对象，这不利于将其存储在 ROM 中。

如果类包含对象或继承了构造函数，那仍然是必须运行来构造对象的代码（成员与其父对象一起存储）。这在编译时（组装 ROM 对象时）是不可能的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T15:55:52.477

这看起来像`POD`C++03 中的定义。 `POD`表示普通的旧数据。一些编译器和平台`const`可以放置一个全局实例。`ROM`

C++11 添加了可以映射到`ROM`able 的新语言特性。 `constexpr`构造函数和标准布局类型，在它们之间，可能是一些编译器可以放入的合理限制`ROM`。但这将取决于编译器对`ROM`ing 数据的支持。

# javascript - jquery ajax，GET调用后在哪里进行异步计算

> ID：15139265
> 
> 赞同：1
> 
> 时间：2013-02-28T15:24:40.990
> 
> 标签：javascript, ajax, json, jquery, asynchronous

jQuery 中的 ajax 带有请求类型、url、成功函数。很多时候，我期待 JSON 响应。

我的问题是我需要将 json 数组重新格式化为不同的结构。这有可能在计算上很昂贵，我也想异步地做到这一点。

该语法看起来如何，我是否只是将另一个 $.ajax 嵌套在上一个 ajax 调用的成功部分中。或者有没有更聪明的方法来编写它，它进行网络调用，返回 json，然后允许我在异步线程中操作所有响应

感谢您的任何见解

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:33:56.137

如果它真的很贵，听起来你需要一个网络工作者：

[https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)

> Dedicated Web Workers 为 Web 内容在后台线程中运行脚本提供了一种简单的方法。创建后，工作人员可以通过将消息发布到创建者指定的事件处理程序来向生成任务发送消息。

有一些警告，但是是为您所描述的而创建的。不过，必须有很多 JSON 才能成为问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T15:38:13.320

我不确定我 100% 理解这个问题，但我认为你想要做的是这样的事情，一个简单的函数调用。不过，它并不是真正的异步，只是它只有在有数据时才会触发：

```
function reformat(data){
    ... reformat your data here ...
}

$.ajax({
    url: "yoururl.xyz",
    success: function(data){
         reformat(data);
    }
}); 
```

# wcf - 返回另一个服务的 WCF 服务

> ID：15139269
> 
> 赞同：1
> 
> 时间：2013-02-28T15:24:55.353
> 
> 标签：wcf

WCF 服务可以返回另一个服务吗？

代码：

```
[ServiceContract]
public interface IServiceA
{
    [OperationContract]
    IServiceB GetServiceB();

[ServiceContract]
public interface IServiceB
{

public class ServiceA : IServiceA
{
    public IServiceB GetServiceB()
    {
        return new ServiceB();
    } 
```

以及一个激活调用 ServiceB 的 ServiceA 的表单：

```
public partial class Form1 : Form
{
    private void button1_Click(object sender, EventArgs e)
    {
        ServiceReference1.ServiceAClient client = new
            ServiceReference1.ServiceAClient();
        IServiceB serviceB = client.GetServiceB(); 
```

当然，这是无法做到的，因为 GetServiceB() 在像这样进行转换时返回对象而不是服务：

```
 IServiceB serviceB = (ServiceB) client.GetServiceB(); 
```

我得到 CommunicationException：“现有连接被远程主机强行关闭”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:16:40.970

不，您不能这样做 - 您的客户端将需要 ServiceB 端点的配置数据。

解决此问题的另一种方法是让 ServiceA 调用 ServiceB，这样您的客户端将只需要与 ServiceA 交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:37:10.153

是的，你不能。

> 这种传递远程引用的简单性也是 .NET Remoting 中最大的危险之一。在许多架构中，除了一些非常有限和受控的情况外，不希望传输远程引用。错误地传递 MarshalByRefObject 而不是 [Serializable] 对象通常会导致性能和可伸缩性显着恶化。毕竟：每个方法调用现在都必须通过网络传输，可能跨越多个城市、国家或大陆。
> 
> ...
> 
> 在 WCF 中，您可以传递对远程服务的引用，但您必须非常明确地这样做。它通常不可能在没有非常明确的意图的情况下发生。

通过[英戈](http://msdn.microsoft.com/en-us/library/aa730857%28VS.80%29.aspx#netremotewcf_topic6)

因此，有**一种**能力（[可共享服务](http://msdn.microsoft.com/ru-ru/magazine/cc163590%28en-us%29.aspx#S3)）在客户端之间共享服务实例。Shareable 在 WCF 的 Beta1 或 Beta2 中，但在产品的最终版本发布之前被删除。但是文章说：

> 您可以重新使用基于 .NET Remoting 的 IRemoteFactory 接口并对其进行注释以与 WCF 兼容

保留引用（clent 对象图）[部分](http://msdn.microsoft.com/en-us/library/aa730857%28VS.80%29.aspx#netremotewcf_topic8)也很有趣。

今天，您可以使用 InstanceContextMode.Single（和自定义客户端-服务-客户端对话逻辑）或[IInstanceContextProvider在客户端（“共享实例”）之间进行交互](http://msdn.microsoft.com/en-us/library/aa354514.aspx)

# android - Google Maps Android API v2，如何从地图中删除折线？

> ID：15139271
> 
> 赞同：18
> 
> 时间：2013-02-28T15:24:59.600
> 
> 标签：android, google-maps-android-api-2

我正在尝试删除以前添加的折线并在位置更改后重新绘制新的折线。我都试过了

**this.routeToDestination.setPoints(pointsToDestination) 和 this.routeToDestination.remove()**

但他们都没有工作。

我关注[了如何使用 Google Maps Android API v2 绘制动态线（路线），](https://stackoverflow.com/questions/13933411/how-to-draw-a-dynamic-line-route-with-google-maps-android-api-v2)但无法解决问题

```
 @Override
    public void onResume() {
        super.onResume();

        routeToDestination = mMap.addPolyline(new PolylineOptions()
                .add(new LatLng(location.getLatitude(), location.getLongitude()),
                        new LatLng(this.destinationLatitude, this.destinationLongitude))
                .width(1)
                .color(Color.DKGRAY)

        );
    }

   @Override
    public void onLocationChanged(Location location) {

        List<LatLng> pointsToDestination = new ArrayList<LatLng>();
        pointsToDestination.add(new LatLng(location.getLatitude(), location.getLongitude()));
        pointsToDestination.add(new LatLng(destinationLatitude, destinationLongitude));

        this.routeToDestination.setPoints(pointsToDestination);
    }

} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-05-17T21:34:54.263

要删除折线，您应该简单地使用 API 中所述的 remove() 方法。

```
//Add line to map
Polyline line = mMap.addPolyline(new PolylineOptions()
            .add(new LatLng(location.getLatitude(), location.getLongitude()),
                    new LatLng(this.destinationLatitude, this.destinationLongitude))
            .width(1)
            .color(Color.DKGRAY)

//Remove the same line from map
line.remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-25T06:43:46.300

在折线的地图活动中创建成员变量

```
 Polyline polyline_final = null; 
```

每次将折线添加到地图时，都会像这样分配地图的值

```
polyline_final = mMap.addPolyline(polylineOptions); 
```

接下来制作新的折线同时删除以前的折线形式地图在polyline_final = mMap.addPolyline(polylineOptions);之前应用此if条件

```
if (polylineOptions_final!=null)
                        {
                            polylineOptions_final.remove();
                        } 
```

现在完成了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-25T06:50:47.927

最简单的方法

```
 implementation 'com.akexorcist:google-direction-library:1.2.1' 
```

使用这个库获取一个 Api 密钥

```
https://developers.google.com/maps/documentation/directions/get-api-key 
```

您必须为方向 api 启用此计费方式。

```
https://console.cloud.google.com/projectselector2/billing/enable 
```

在任何函数中设置此代码，但不在 onmapready 函数中

```
 String serverKey = "AIzaSyCHEn5TVLk6xxuYn0-g11xxVzCu9eZiVbU";
      GoogleDirection.

        GoogleDirection.withServerKey(serverKey)
                .from(new LatLng(30.677717,73.106812))
                .to(new LatLng(31.345394,73.429810))
                .transitMode(TransportMode.WALKING)
                .unit(Unit.METRIC)
                .execute(new DirectionCallback() {
                    @Override
                    public void onDirectionSuccess(@Nullable Direction direction) {

                        Log.d("eeeeee", direction.getStatus());

                        if(direction.isOK()) {
                            // Do something
                            Route route = direction.getRouteList().get(0);
                            Leg leg = route.getLegList().get(0);

                            ArrayList<LatLng> directionPositionList = leg.getDirectionPoint();
                            Log.d("eeeeee", directionPositionList.size()+"eeeeee");
                            if (polylineOptions_final!=null)
                            {
                                polylineOptions_final.remove();
                            }
                            PolylineOptions polylineOptions = DirectionConverter.createPolyline(getApplication(), directionPositionList, 10, Color.RED);
                            polylineOptions_final = mMap.addPolyline(polylineOptions);
                        } else {
                            // Do something
                        }
//                        Log.d("eeeeee"+direction.getGeocodedWaypointList().toString(), "onDirectionSuccess: ");

                    }

                    @Override
                    public void onDirectionFailure(@NonNull Throwable t) {
                        Toast.makeText(ClientMap.this, "d"+t.getMessage().toLowerCase(), Toast.LENGTH_SHORT).show();

                    }
                });
```

新纬度（31.345394,73.429810））；

# php - jquery 表单插件和 cakephp 2 - 通过 ajax 提交

> ID：15139274
> 
> 赞同：0
> 
> 时间：2013-02-28T15:25:03.433
> 
> 标签：php, jquery, ajax, cakephp, file-upload

我正在尝试使用 jquery 表单插件通过 ajax 上传图像。我希望响应是文件名，以便我可以在发出请求的同一页面上显示过程和图像的保存版本。这似乎应该很容易。尽管我是 cakephp 和 jquery 的新手，但我已经尝试了整整 3 天以不同的方式执行此操作，并且遇到了一个又一个的路障！无论如何 - 一些代码：

我有以下表格：

```
<?php echo $this->Form->create('Tile', array('type'=>'file', 'action' => 'uploadImage')); ?>
<div id="TileImageUpload">
        <?php echo $this->Form->input('upload_image', array('type' => 'file'));?>
        <?php echo $this->Form->button('upload image', array('onClick'=>'$(\'#TileNewtileForm\').ajaxSubmit({target: \'#TileImageUpload\''));?> 
 </div>
 <?php echo $this->Form->end(__('Submit')); ?> 
```

这样就允许用户选择图像并将其提交给图块控制器的 uploadImage 操作：

```
function uploadImage() {
$this->layout = 'ajax';
//process the image in here and save a copy of it, then return the images name
echo 'imagename';   
} 
```

返回的内容（根据教程和我对文档所做的）应该放在 #TileImageUpload - 这是响应的目标 div。但实际上它只是转到仅显示图像名称的 uploadImage 视图。我希望图像名称返回到发出请求的同一页面，以便我可以将图像附加到文档中。

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:21:56.623

你应该参考这个插件： [http ://blueimp.github.io/jQuery-File-Upload/](http://blueimp.github.io/jQuery-File-Upload/)

及其 CakePHP 版本： [https ://github.com/hugodias/FileUpload](https://github.com/hugodias/FileUpload)

# azure - 间歇性 Azure 模拟器错误：无法加载文件或程序集“XX”文件名或扩展名太长。

> ID：15139276
> 
> 赞同：5
> 
> 时间：2013-02-28T15:25:08.617
> 
> 标签：azure, azure-web-roles, azure-caching

使用 Visual Studio 2012 Premium SP1 11.051106.01 和 Emulator 版本 1.8，我收到以下关于每 3-5 次页面刷新的错误。然后我必须停止调试并重新部署到模拟器。

我至少有 5 名开发人员在 Azure 上工作，他们在将 Web 角色部署到 Azure 模拟器时都遇到了同样的问题。我怀疑它与缓存有关，但我不确定从哪里开始寻找。

我检查了我所有的文件路径长度，没有任何路径和文件名超过 220 个字符。Win 7 最多有 260 个字符，所以我不确定还有什么要检查的。

无法加载文件或程序集“Kernel32”或其依赖项之一。文件名或扩展名太长。

无法加载文件或程序集“System.ServiceModel.Web.dll”或其依赖项之一。文件名或扩展名太长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:26:15.803

当您的临时路径 + 解决方案的名称太长时，通常会发生这种情况。您可以使用一个设置来实际重新设置路径并尝试修复它。[在Jim 的博客](http://blogs.msdn.com/b/jnak/archive/2010/05/26/9942481.aspx)上阅读它。本质上，您将 _CSRUN_STATE_DIRECTORY 环境变量设置为更短的路径。

# sas - SAS - 将字段分配为另一个字段的内容

> ID：15139279
> 
> 赞同：1
> 
> 时间：2013-02-28T15:25:13.573
> 
> 标签：sas

我有一个这样的 SAS 数据集：

领域：`A1 | A2 | A3 | A4 | A5 | A6 | INDEX | B` ...

该`INDEX`字段包含变量名称：A1 或 A2 或 ... 或 A6

我想`B`拥有该字段中的`INDEX`字段内容。

如何将字段动态分配为`B`字段中指定的`INDEX`字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:35:15.110

解决此问题的一种相当简单的方法是使用数组和 VNAME。

```
data have;
input a1 a2 a3 index $;
datalines;
1 2 3 a1
2 3 4 a2
3 4 5 a3
4 5 6 a1
5 6 7 a3
;;;;
run;

data want;
set have;
array as a1-a3;
do _t = 1 to dim(as);
 if upcase(vname(as[_t])) = upcase(index) then b = as[_t];
end;
run; 
```

如果您有一个非常大的数组来提高性能，您可以在 if (make it a if... then do block) 中添加一个 LEAVE 语句。

# javascript - 如何设置按值而不是按索引选择的表单选项

> ID：15139281
> 
> 赞同：2
> 
> 时间：2013-02-28T15:25:17.880
> 
> 标签：javascript, forms, dom, select, set

[在这里](https://stackoverflow.com/questions/2343889/set-option-value-with-getelementsbyname/15136391#comment21306795_15136391)，我已经阅读了如何设置由索引选择的表单选项

```
<select name="sel"> 
  <option value="o1">option1</option>
  <option value="o2">option2</option>
</select>

document.getElementsByName('sel')[0].selectedIndex = 0; or
document.getElementsByName('sel')[0].selectedIndex = 1; 
```

但是是否可以通过引用选项值而不是索引来设置选择的选项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T15:31:43.237

您可以只设置元素的`value`属性，如[如何使用 javascript 以编程方式设置选择框元素的值？](https://stackoverflow.com/q/78932/851811)`<select>`

```
<select name="sel"> 
    <option value="o1">option1</option>
    <option value="o2">option2</option>
</select>

<select name="sel"> 
    <option value="o1">option1</option>
    <option value="o2">option2</option>
</select>

document.getElementsByName("sel")[0].value="o2"; 
```

[JSFiddle](http://jsfiddle.net/L7qkE/1/)

# iphone - 向左填充一个 tableViewCell 详细信息

> ID：15139282
> 
> 赞同：0
> 
> 时间：2013-02-28T15:25:19.663
> 
> 标签：iphone, ios, tableview

你能帮我填充我的左侧详细信息单元格吗？

我需要的是使用我的核心数据中的属性键作为左侧细节，使用属性的内容作为标题。

我已将一个对象提取到一个数组中，我需要帮助在单元格上显示数据

```
 if (matchingData.count <= 0)
{
    cell.textLabel.text = @"no item found";
}
else {
    NSString *displayData;
    for (NSManagedObject *obj in matchingData) {
        displayData = [obj valueForKey:@"Name"];
        cell.detailTextLabel.text = displayData;
        cell.textLabel.text = @"Name";

      }
   } 
```

我需要做什么才能让表格视图像苹果联系人应用程序一样显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:37:08.253

为了能够使用 detailTextLabel，您需要使用如下类型初始化单元格`UITableViewCellStyleSubtitle`：

```
static NSString *MyCellIdentifier = @"AUniqueIdentifier";

    UITableViewCell *cell = (UITableViewCell*)[tableView dequeueReusableCellWithIdentifier:MyCellIdentifier];

    if (!cell) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:MKCellIdentifier];
    } 
```

我还会检查 displayData 不是 nil 或空屏幕，像这样`if` `(displayData.length > 0)`

# python - 我想使用下面的代码，但是在 python 的文本文件中找到最长单词的长度

> ID：15139285
> 
> 赞同：-1
> 
> 时间：2013-02-28T15:25:25.407
> 
> 标签：python

使用它，但在文本文件中找到，我不知道该怎么做。

```
len(max(words, key=len)) 
```

有谁知道我怎么能做到这一点？

另外我如何找出一个 6 或 7 长度的单词出现在文本文件中的次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:39:24.507

您所要做的就是确定预期的输入，我假设主要是`words`，并考虑如何读取输出预期为`words`.

我大胆猜测`words`可能`list`是`str`. 现在我们已经确定了输入的数据结构，让我们尝试读取一个示例文件，该文件最终会为您提供这个数据结构作为输出，如`words`.

假设您有一个包含内容的普通文件，名为`sample.txt`：

```
a
bc
def 
```

你的阅读代码可能是（非常准系统）”

```
with open('sample.txt') as f:
    words = f.readlines()

print len(max(words, key=len)) 
```

现在请记住，您可能会遇到各种障碍，例如不同的文件格式，从文本文件中清除空行等，欢迎您阅读官方 Python 文档以深入了解。希望这能给你一个好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:47:22.260

听起来您需要帮助打开和阅读文本文件：

```
with open('words.txt', 'r') as words_file:
    words = words_file.read().split()
    print len(max(words, key=len)) 
```

首先，您阅读文件。然后，您通过分割空格从文本中获取单词列表，其工作原理如下：

```
>> "This is a test.".split()
['This', 'is', 'a', 'test'] 
```

您应该注意，这不处理标点符号（“This is a test.”中最长的单词是“test.”，或 5 个字符），因此如果您需要过滤掉标点符号，那将是一个单独的步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:27:16.207

对于您的后续编辑，

```
with open('textfile.txt') as f:
  words = f.read().split()
  sizes = list(map(len,words))
  print('Maximum word length: {}'.format(max(sizes)))
  print('6 letter count: {}'.format(sizes.count(6))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:29:42.040

```
>>> words = 'I am no hero'
>>> max(words.split(), key=len)
'hero' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T15:45:48.953

```
from itertools import chain

with open('somefile') as fin:
    words = (line.split() for line in fin)
    all_words = chain.from_iterable(words)
    print max(all_words, key=len) 
```

它的作用是获取输入文件，构建一个按空格分割行的生成器，然后将该生成器链接到`max`

* * *

鉴于您的编辑，然后：

```
from itertools import chain
from collections import Counter

with open('somefile') as fin:
    words = (line.split() for line in fin)
    all_words = chain.from_iterable(words)
    word_lengths = Counter(len(word) for word in all_words)

print word_lengths 
```

从那开始工作......

# ios - 应用内购买 (iOS) 不适用于某些本地商店

> ID：15139286
> 
> 赞同：1
> 
> 时间：2013-02-28T15:25:27.683
> 
> 标签：ios, objective-c, app-store, in-app-purchase

我们在一年前（2011 年 12 月 10 日）发布了我们的 iOS 游戏“民主”/“демократия”。自推出以来，到现在为止，我收到来自乌克兰和白俄罗斯的该应用程序用户的索赔，称他们无法在我们的应用程序中进行任何应用内购买。同时，来自俄罗斯、美国、英国、法国、哈萨克斯坦等国家的用户可以毫无问题地进行购买。在其他应用程序中，他们可以进行购买（例如 Candy Crush Saga）。我一遍又一遍地阅读有关 iAP 的 Apple 文档，但找不到所有 iAP 不适用于乌克兰和白俄罗斯的原因。我有白俄罗斯（白俄罗斯）帐户，也无法从我自己的游戏中购买 iAP））但是当我使用俄罗斯帐户做同样的事情时 - 它正在工作！

我所有的购买都返回为“无效的产品 ID”。

游戏链接（别担心，它是免费的） - [https://itunes.apple.com/us/app/demokratia/id484436490?mt=8](https://itunes.apple.com/us/app/demokratia/id484436490?mt=8)

我也可以用独立的代码重现这个问题。我在此页面[http://www.raywenderlich.com/2797/introduction-to-in-app-purchases](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)上找到了示例项目并下载了它，在设备上启动 - 我看到了同样的问题：我成功检索了美国的 IAP 列表,俄罗斯，但白俄罗斯、乌克兰的列表为空

重现的步骤我可以重现真实帐户的问题，也可以重现 iTunes 测试帐户的问题。我使用 iPad、iPhone 和 iOS 5.1、6.0 - 看起来使用什么设备并不重要。我正在使用 iOS 6 SDK，xCode 4.5.2

1.  重现此问题所需要做的就是将设备（例如 iPad）上的 App Store 切换到白俄罗斯或乌克兰。您可以通过使用白俄罗斯或乌克兰帐户登录来完成。

2.  下载“民主”（“Демократия”，com.neskinsoft.Democracy）

3.  然后启动应用程序，单击“播放”，然后关闭帮助窗口（单击右上角的按钮） 3.1 单击带有购物车图标的按钮（您可以在 UI 的顶部找到它） 3.2 将显示商店对话框。单击右下角的按钮（带有猪和硬币的按钮） 3.3。将显示需要钱“Нужны Деньги”对话框。单击“60 000”、“$1.99”行中的按钮。此按钮调用 IAP。

在 3.3 之后 - 甚至询问用户密码的对话框也不会显示在乌克兰/白俄罗斯的 iTunes 帐户中。但是对于所有其他国家（例如俄罗斯、美国、英国等），它工作得很好！

我检查并调试了我的代码，调试了问题。

代码非常简单，我按照 Apple 文档中的所有说明进行操作。

我调用这个方法在我的代码中购买 60 000 Gold：

```
- (void)loadStoreAndBuy60000Gold
{
    // restarts any purchases if they were interrupted last time the app was open
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];

    // get the product description (defined in early sections)
    [self requestProductData: kInAppPurchase_60000GOLD]; // PLEASE NOTE kInAppPurchase_60000GOLD = "013", I didn't use reverse DNS and it's working
} 
```

我问产品ID：

```
- (void)requestProductData: (NSString*) objectID
{
    NSSet *productIdentifiers = [NSSet setWithObject: productID]; // In this case productID = "013"
    productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
    productsRequest.delegate = self;
    [productsRequest start]; 
```

在这种方法中我发现了问题：

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{

    if ([self canMakePurchases]) // Returns TRUE
  {
        NSArray *products = response.products; // Here I receive product list, but for Ukraininan/Belarussian accounts it's EMPTY. So, no dialogs will appear since no product found. But for Russian/USA and so on accounts it returns me product!

      //.....
      // then I check invalidProductID
    for (NSString *invalidProductId in response.invalidProductIdentifiers)
    {
        NSLog("Invalid product id: %@" , invalidProductId); // And I found my product "013" is in invalid product ids!

    }
  } 
```

你能帮我解决这个问题吗？为什么我没有收到某些市场的产品列表？

# jquery - jQuery UI carousel - rcarousel 插件 rcarousel 方向

> ID：15139287
> 
> 赞同：1
> 
> 时间：2013-02-28T15:25:29.113
> 
> 标签：jquery, user-interface

我正在使用 jQuery UI carousel - rcarousel 插件（[http://ryrych.github.com/rcarousel/](http://ryrych.github.com/rcarousel/)），我想改变这个插件的方向。例如，当用户单击右箭头时，我希望该轮播指向正确的方向。下面是我正在使用的 Jquery 代码：

```
jQuery(function($) {$( "#carousel").rcarousel ({visible: 5, margin: 10, step: 5, });$( "#ui-carousel-prev" ).add( "#ui-carousel-next").hover(function() {$( this ).css( "opacity", 0.7 );},function() {$( this ).css( "opacity", 1.0 );});}); 
```

我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:35:00.177

公共 API 中有一些方法可以在按钮上使用：[http ://ryrych.github.com/rcarousel/#api](http://ryrych.github.com/rcarousel/#api)

像这样的东西会起作用：

```
$('#rightBtn').click(function() {
  $( "#carousel" ).rcarousel( "prev" );
}

$('#leftBtn').click(function() {
  $( "#carousel" ).rcarousel( "next" );
} 
```

这实质上颠倒了默认行为。不过，我重申我在评论中所说的话。这主要是为了混淆。

由于您是 SO 新手，因此我会提醒您通过单击其复选标记来接受答案和/或对您认为有帮助的任何内容进行投票。

# sql-server - SQL：如何将表列显示为行？

> ID：15139288
> 
> 赞同：1
> 
> 时间：2013-02-28T15:25:32.043
> 
> 标签：sql-server, join

我有表：

```
name quantity
abc     2
abc     3
abc     5 
```

我如何在 mssql 中查询以查看一行中的结果，例如

```
abc 2 3 5 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:29:34.910

如果您希望此数据位于单独的列中，则可以使用以下`PIVOT`函数：

```
select *
from 
(
  select name, quantity,
    'Qty_'+cast(row_number() over(partition by name order by quantity) as varchar(10)) rn
  from yourtable
) src
pivot
(
  max(quantity)
  for rn in (Qty_1, Qty_2, Qty_3)
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/59159/2)。枢轴的结果是：

```
| NAME | QTY_1 | QTY_2 | QTY_3 |
--------------------------------
|  abc |     2 |     3 |     5 | 
```

如果您希望此数据在单个列中，则可以使用`FOR XML PATH`and `STUFF()`：

```
SELECT
     t1.Name,
     STUFF(
         (SELECT ' ' + cast(quantity as varchar(10))
          FROM yourtable t2
          WHERE t1.name = t2.name
          FOR XML PATH (''))
          , 1, 1, '')  AS List
FROM yourtable t1
GROUP BY t1.Name 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/59159/4)。这个查询的结果是：

```
| NAME |  LIST |
----------------
|  abc | 2 3 5 | 
```

使用 pivot 函数，如果您有未知数量的数量值，那么您可以使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(rn) 
                    from
                    (
                      select 'Qty_'+cast(row_number() over(partition by name order by quantity) as varchar(10)) rn
                      from yourtable
                    ) t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT name,' + @cols + ' from 
             (
                select name, quantity,
                  ''Qty_''+cast(row_number() over(partition by name order by quantity) as varchar(10)) rn
                from yourtable
            ) x
            pivot 
            (
                max(quantity)
                for rn in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/59159/6)

# python - numpy.searchsorted 在结构化数组上的性能很差

> ID：15139299
> 
> 赞同：16
> 
> 时间：2013-02-28T15:25:59.953
> 
> 标签：python, arrays, numpy, binary-search

[如果我滥用任何术语，请提前道歉，请随时更正。]

我有一个排序数组`dtype` `'<f16, |S30'`。当我`searchsorted`在它的第一个字段上使用时，它的运行速度非常慢（300 万个项目大约需要 0.4 秒）。`bisect`这比在一个普通的 Python 元组列表上做同样的事情要长得多。

```
%timeit a['f0'].searchsorted(400.)
1 loops, best of 3: 398 ms per loop 
```

但是，如果我将浮点部分复制到另一个单独的数组，则搜索速度比`bisect`：

```
b = a['f0'].copy()

%timeit b.searchsorted(400.)
1000000 loops, best of 3: 945 ns per loop 
```

我的问题是：

1.  我做错了什么还是 NumPy 的回归？
2.  有没有办法在不重复数据的情况下避免这种情况？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T16:44:11.133

我记得前段时间看到过这个。如果我没记错的话，我认为 searchsorted 在数据不连续时会制作数据的临时副本。如果稍后我有时间，我会查看代码以确认正在发生的事情（或者也许更熟悉代码的人可以确认这一点）。

同时，如果您不想重组代码以避免使用结构化数组，那么最好的选择可能是使用`bisect_left(a['f0'], 400.)`. 在我的机器上，它比在连续数组上搜索排序慢 8 倍，但比在非连续数组上搜索排序快 1000 倍。

```
In [5]: a = np.arange((6e6)).view([('f0', float), ('f1', float)])

In [6]: timeit a['f0'].searchsorted(400.)
10 loops, best of 3: 51.1 ms per loop

In [7]: timeit a['f0'].copy()
10 loops, best of 3: 51 ms per loop

In [8]: timeit bisect_left(a['f0'], 400.)
10000 loops, best of 3: 52.8 us per loop

In [9]: f0 = a['f0'].copy()

In [10]: timeit f0.searchsorted(400.)
100000 loops, best of 3: 7.85 us per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-08T10:27:09.153

这是一些代码来说明问题的大小（截至 2015 年 5 月 11 日）以及如何“修复”它。

```
import numpy as np
import bisect
import timeit
from random import randint

dtype = np.dtype([ ('pos','<I'),('sig','<H') ])             # my data is unsigned 32bit, and unsigned 16bit
data1 = np.fromfile('./all2/840d.0a9b45e8c5344abf6ac761017e93b5bb.2.1bp.binary', dtype)

dtype2 = np.dtype([('pos',np.uint32),('sig',np.uint32)])    # convert data to both unsigned 32bit
data2 = data1.astype(dtype2)

data3 = data2.view(('uint32', len(data2.dtype.names)))    # convert above to a normal array (not structured array)

print data1.dtype.descr # [('pos', '<u4'), ('sig', '<u2')]
print data2.dtype.descr # [('pos', '<u4'), ('sig', '<u4')]
print data3.dtype.descr # [('', '<u4')]

print data1.nbytes  # 50344494
print data2.nbytes  # 67125992
print data3.nbytes  # 67125992

print data1['pos'].max() # 2099257376
print data2['pos'].max() # 2099257376
print data3[:,0].max()   # 2099257376

def b1():   return bisect.bisect_left(data1['pos'],           randint(100000000,200000000))
def b2():   return bisect.bisect_left(data2['pos'],           randint(100000000,200000000))
def b3():   return bisect.bisect_left(data3[:,0],             randint(100000000,200000000))
def ss1():  return np.searchsorted(data1['pos'],              randint(100000000,200000000))
def ss2():  return np.searchsorted(data2['pos'],              randint(100000000,200000000))
def ss3():  return np.searchsorted(data3[:,0],                randint(100000000,200000000))

def ricob1():   return bisect.bisect_left(data1['pos'], np.uint32(randint(100000000,200000000)))
def ricob2():   return bisect.bisect_left(data2['pos'], np.uint32(randint(100000000,200000000)))
def ricob3():   return bisect.bisect_left(data3[:,0],   np.uint32(randint(100000000,200000000)))
def ricoss1():  return np.searchsorted(data1['pos'],    np.uint32(randint(100000000,200000000)))
def ricoss2():  return np.searchsorted(data2['pos'],    np.uint32(randint(100000000,200000000)))
def ricoss3():  return np.searchsorted(data3[:,0],      np.uint32(randint(100000000,200000000)))

print timeit.timeit(b1,number=300)  # 0.0085117816925
print timeit.timeit(b2,number=300)  # 0.00826191902161
print timeit.timeit(b3,number=300)  # 0.00828003883362
print timeit.timeit(ss1,number=300) # 6.57477498055
print timeit.timeit(ss2,number=300) # 5.95308589935
print timeit.timeit(ss3,number=300) # 5.92483091354

print timeit.timeit(ricob1,number=300)  # 0.00120902061462
print timeit.timeit(ricob2,number=300)  # 0.00120401382446
print timeit.timeit(ricob3,number=300)  # 0.00120711326599
print timeit.timeit(ricoss1,number=300) # 4.39265394211
print timeit.timeit(ricoss2,number=300) # 0.00116586685181
print timeit.timeit(ricoss3,number=300) # 0.00108909606934 
```

*更新！* 因此，多亏了 Rico 的评论，似乎为要搜索的数字设置类型排序/对分确实很重要！但是，在具有 32 位和 16 位整数的结构化数组上，它仍然很慢（尽管没有以前那么慢了）

# vba - Private Sub Document_Open() 中有多个宏？

> ID：15139301
> 
> 赞同：0
> 
> 时间：2013-02-28T15:26:03.643
> 
> 标签：vba, ms-word

我对它的`Private Sub Document_Open()`工作原理有点困惑。我知道你必须把它放在“ThisDocument”区域。但是如果我想在那里放置 3 或 4 个宏怎么办？你能做到吗？如果是的话，你是怎么做的？因为我也理解您不能在两个宏中使用相同的子名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:15:10.467

```
Private Sub Document_Open()
    Macro1
    Macro2
    Macro3
End Sub

sub Macro1()
'do stuff
End Sub

sub Macro2()
'do stuff
End Sub

sub Macro3()
'do stuff
End Sub 
```

# c - 预处理阶段的恒定折叠

> ID：15139303
> 
> 赞同：5
> 
> 时间：2013-02-28T15:26:07.843
> 
> 标签：c, gcc, scripting, deobfuscation, constantfolding

我有一段需要去混淆的 C 代码。它包含一堆棘手的宏。我通过 C 预处理器和缩进运行代码，现在它看起来类似于：

```
switch (9263 + 1505) {
case 1505 + 41131 + 6729 + 2347:
            ...
case 1505 + 41131 + 6729 + 2347 + 1:
            ...
case 1505 + 41131 + 6729 + 2347 + 2:
            ... 
```

为了简化进一步的分析，我正在寻找一些可以折叠代码中所有常量的工具。我知道 C 预处理器无法做到这一点，并且将在编译阶段执行常量折叠优化。但是源代码呢？

Shell 脚本也很受欢迎，因为我怀疑这可能是唯一的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T10:24:25.483

使用 clang 编译它，并使用它的 c 后端生成 c 代码。

像这样的东西应该工作：

```
clang -emit-llvm source.cpp -o - | llc -march=c 
```

# iphone - 启用 iOS 磁盘加密

> ID：15139305
> 
> 赞同：10
> 
> 时间：2013-02-28T15:26:18.053
> 
> 标签：iphone, cocoa, encryption, ios6, data-protection

对于我的仅限 iOS 6+ 的应用程序，我想启用 iOS 提供的磁盘加密。

我阅读[了本指南](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/StrategiesforImplementingYourApp/StrategiesforImplementingYourApp.html)，并看到了 WWDC 2012（会议 714）的“保护用户数据”视频。但是，我无法让它工作。

以下是我遵循的步骤：

**1-**在[iOS 开发中心](https://developer.apple.com/devcenter/ios/index.action)，我创建了一个新的 App ID：

![启用数据保护](../Images/6fa702bfe656c7ad9998efca7e6c32e8.png)

**2-**在 Xcode 中，我添加了一个带有密钥的权利文件：

![Xcode 权利](../Images/28b142605d5485ad4f9623f457494c9f.png)

**3-**在设备上，我激活了密码锁。

如果我没记错的话，这应该就是全部了。我现在预计，当设备（在我的情况下：iPhone 5）被锁定时，受保护的文件无法访问。但是......如果我使用[iExplorer](http://www.macroplant.com/iexplorer/)，即使设备被锁定，我也可以轻松访问我的应用程序创建的文件。但这**正是**我想要避免的。我忘了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:59:52.823

您无需解锁设备即可访问文件的原因是已创建托管密钥包。这在 Apple 的[iOS 安全指南 (pdf)](http://images.apple.com/iphone/business/docs/iOS_Security_Oct12.pdf)中有解释：

> 托管密钥包用于 iTunes 同步和移动设备管理 (MDM)。此密钥包允许 iTunes 进行备份和同步，而无需用户输入密码，并且它允许 MDM 服务器远程清除用户的密码。它存储在用于与 iTunes 同步的计算机上，或存储在管理设备的 MDM 服务器上。
> 
> Escrow keybag 改善了设备同步期间的用户体验，这可能需要访问所有类别的数据。当密码锁定的设备首次连接到 iTunes 时，系统会提示用户输入密码。然后，设备会创建一个 Escrow 密钥包并将其传递给主机。Escrow keybag 包含与设备上使用的完全相同的类密钥，受新生成的密钥保护。此密钥用于解锁 Escrow 密钥包，并存储在设备上的 Protected Until First User Authentication 类中。这就是重启后首次使用 iTunes 备份之前必须输入设备密码的原因。

如果您重新启动手机，您将无法访问文件而无需解锁一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:57:41.950

如果您希望这些文件**仅**在设备解锁时可用（+ 大约 10 秒的宽限期），请将文件保护设置为 NSFileProtectionComplete。请务必实现委托方法以了解数据何时会变得 [不] 可用。

# java - Android 以编程方式创建 ID

> ID：15139310
> 
> 赞同：9
> 
> 时间：2013-02-28T15:26:29.703
> 
> 标签：java, android

我正在寻找在代码中创建 ID 而不使用 XML 声明。例如，我有代码，我在其中以编程方式创建这样的视图

```
@Override
protected void onCreate(Bundle savedInstanceState) {

  super.onCreate(savedInstanceState);
  setContentView(R.layout.new_layout);

  LinearLayout ll = (LinearLayout)findViewById(R.id.layout);
  View v = new View(this);
  v.setBackgroundColor(0xFFFF0000);
  ll.addView(v, 100, 100);

} 
```

我可以添加`v.setId(50)`，但我想添加`v.setId(R.id.some_id)`，我不想添加`some_id`到 xml 文件中，我知道这个选项。

我的问题是，如何以`R.id.some_id`编程方式创建而不在 XML 文件中设置它。谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-28T15:30:57.903

请参阅这个奇妙的答案：[https ://stackoverflow.com/a/13241629/586859](https://stackoverflow.com/a/13241629/586859)

R.* 引用明确用于访问***资源***。您尝试做的事情实际上是不可能的，但也许您可以从上面的答案中获得类似于以下部分的内容：

### 保留 XML`android:id`以在代码中使用

如果您`ViewGroup`不能通过 XML 定义（或者您不希望这样），您可以通过 XML 保留 id 以确保它保持唯一：

**在这里，*values/ids.xml*定义了一个自定义`id`：**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item name="reservedNamedId" type="id"/>
</resources> 
```

**然后，一旦创建了 ViewGroup 或 View，您就可以附加自定义 id**

```
myViewGroup.setId(R.id.reservedNamedId); 
```

# javascript - 角度请求 - 拉动动态参数

> ID：15139312
> 
> 赞同：2
> 
> 时间：2013-02-28T15:26:32.397
> 
> 标签：javascript, angularjs

本质上，这就是我想要做的：

![我的应用程序中的角流](../Images/2d36fdd2ff31b5c0cabfdf116efb06a1.png)

我正在制作一个应用程序，我必须一致地调用大量动态生成的 JSON url。我可以获得“JSON/Path”的唯一方法是在 DOM 元素中添加 url 作为参数。（遗留系统，我不知道这里的最佳解决方案）在我收到请求后，我会将数据分解回所说的 div 中，然后重新编译 innerHTML。

我需要知道的是；

*   在 Angular 编译页面并查看 ng-controller 后，如何将 jsrc（Json 路径）插入到 Get 请求中？
*   我应该使用指令执行此操作吗？或者当我通过我的控制器时，我能以某种方式获取这些信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:48:17.610

好的，给你了：

将属性添加到您的 div ：`<div ng-controller="MyCtrl" jsrc="JSON/Path" urlGetter>`

```
directives = angular.module('MyApp', [])

directives.directive ('urlGetter', function() {
    return function(scope, elements, attrs) {
        scope.url = attrs.jsrc;
    }
} 
```

在你的控制器中：

```
MyCtrl = function($scope, $http) {
    $http.get($scope.url)...
} 
```

如果您想了解更多信息：[http ://egghead.io/video/rough-draft-angularjs-useful-behaviors/](http://egghead.io/video/rough-draft-angularjs-useful-behaviors/)

# android - 更新片段内的列表视图

> ID：15139315
> 
> 赞同：1
> 
> 时间：2013-02-28T15:26:35.280
> 
> 标签：android, listview, android-listview, android-arrayadapter

在我的里面`ListFragment`我有这个：

```
private SelectedItemListAdapter selectedItemListAdapter;
public void initSelectedItemListAdapter(CellItem[] itemList)
{
  selectedItemListAdapter = new SelectedItemListAdapter(getSherlockActivity(), R.layout.listview_item_selecteditem, itemList);
  setListAdapter(selectedItemListAdapter);
} 
```

调用此方法允许我在我的数据中设置数据，`ListView`但是到目前为止我尝试更新此数据的所有操作都失败了。我设法让它工作的唯一方法是创建一个`SelectedItemListAdapter`我认为效率不高的新实例。

我尝试的一种尝试是使用：

```
public void updateSelectedItemListAdapter(CellItem[] newList)
{
  selectedItemListAdapter.clear();

  for(int i = 0; i < newList.length; i++)
    selectedItemListAdapter.add(newList[i]);

  setListAdapter(selectedItemListAdapter);
  selectedItemListAdapter.notifyDataSetChanged();
} 
```

然而，这给了我一个`java.lang.UnsupportedOperationException`. 我还阅读了有关在主线程上运行它的信息，但是它给了我同样的例外。

我还注意到，如果 与`newList`以前的计数不同，我会得到`java.util.ArrayList.throwIndexOutOfBoundsException`，这表明我缺少一些东西来刷新数据源。

根据要求，这是我的`SelectedItemListAdapter`：

```
public class SelectedItemListAdapter extends ArrayAdapter<CellItem>
{
  Context context;
  int layoutResourceId;
  CellItem data[] = null;
  private static final int ROW_ITEM = 0;
  private static final int ROW_VIEWTYPE_COUNT = 1;

  class CellItemHolder
  {
    LinearLayout rootLayout;
    TextView itemName;
    TextView itemValue;
  }

  public SelectedItemListAdapter(Context context, int layoutResourceId, CellItem[] data)
  {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent)
  {
    View row = convertView;
    CellItemHolder holder = null;
    CellItem item = getItem(position);

    if(row == null)
    {
      holder = new CellItemHolder();

      LayoutInflater inflater = ((Activity)context).getLayoutInflater();
      row = inflater.inflate(layoutResourceId, parent, false);

      holder.rootLayout = (LinearLayout)row.findViewById(R.id.itemlist_rootLayout);
      holder.itemName = (TextView)row.findViewById(R.id.selectedItem_name);
      holder.itemValue = (TextView)row.findViewById(R.id.selectedItem_value);

      row.setClickable(true);

      row.setTag(holder);
    }
    else
    {
      holder = (CellItemHolder)row.getTag();
    }

    holder.itemName.setText(item.itemName);
    holder.itemValue.setText(item.itemValue);
    holder.rootLayout.setBackgroundColor(Color.WHITE);

    return row;
  }

  @Override
  public int getCount()
  {
    return data.length;
  }

  @Override
  public int getViewTypeCount()
  {
    return ROW_VIEWTYPE_COUNT;
  }

  @Override
  public int getItemViewType(int position)
  {
    return ROW_ITEM;
  }
} 
```

有人对如何更新列表适配器有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:23:01.437

> 然而，这给了我一个 java.lang.UnsupportedOperationException。我还阅读了有关在主线程上运行它的信息，但是它给了我同样的例外。

这与主 UI 线程无关，是适配器相关的。问题是您使用扩展的适配器`ArrayAdapter`向其传递数据数组。超类`ArrayAdapter`将获取该数据数组并将其转换`List`为未实现`add()`and方法的 a。`remove()`没有这些方法意味着您的适配器将`UnsupportedOperationException`在尝试`clear`或`add`元素（从 API 级别 11 开始可用的方法，所以要小心）时向它（您正在尝试做的事情）抛出一个，因为它使用列表中的这些方法。

解决方案是使用普通`ArrayList`（或其他`List`）而不是数组`CellItem`并将其传递给`ArrayAdapter`（将能够修改它）。

> 我还注意到，如果 newList 的计数与前一个不同，我会得到 java.util.ArrayList.throwIndexOutOfBoundsException，这表明我缺少刷新数据源的内容。

我不知道是什么原因造成的，您的代码应该`UnsupportedOperationException`在超出任何边界之前抛出异常。

# sql-server-2008 - 在这种情况下，比使用 IF 更好吗？

> ID：15139318
> 
> 赞同：0
> 
> 时间：2013-02-28T15:26:45.560
> 
> 标签：sql-server-2008, if-statement

我正在编写在网站上使用的查询。当需要查询时，它会直接解析到服务器，结果全部由查询控制。该网站只是返回表格。我在网站上拥有的是客户端可以选择的复选框，这些复选框被解析为查询中的`@var = 1`or 或`@var = 0`. 正因为如此，现在我有这个代码来检查和添加或不取决于它是否被检查。我的问题是，有没有比使用这样的`IF`语句更好的方法来解决这个问题，因为我有几个代码部分包括：

```
SET @sql = 'select distinct '
If @mgchk = 1 
    SET @sql = @sql + 'p.MainGroup'
If @sgchk = 1 and @sql = 'select distinct '
    SET @sql = @sql + 'p.SubGroup'
If @sgchk = 1 and @sql not like '%SubGroup'
    SET @sql = @sql + ',p.SubGroup'
If @ssgchk = 1 and @sql = 'select distinct '
    SET @sql = @sql + 'p.SubSubGroup'
If @ssgchk = 1 and @sql not like '%SubSubGroup'
    SET @sql = @sql + ',p.SubSubGroup'
If @Seasonchk = 1 and @sql = 'select distinct '
    SET @sql = @sql + 'p.Season'
If @Seasonchk = 1 and @sql not like '%Season'
    SET @sql = @sql + ',p.Season'
If @vendorchk = 1 and @sql = 'select distinct '
    SET @sql = @sql + 'p.VendorID'
If @vendorchk = 1 and @sql not like '%VendorID'
    SET @sql = @sql + ',p.VendorID'

SET @sql = 
    @sql + 
    ' into 
        ##aa 
    from 
        RPProducts p, 
        RPIv i, 
        RPTrsd d, 
        RPTrs s 
    WHERE 
    s.StoreID = d.StoreID and 
        s.ReceiptNO = d.ReceiptNO and 
        i.UPC = d.UPC and 
        i.StoreID = d.StoreID and 
        i.IVProduct = p.Productid and 
        s.TRSdate >= '''+ convert(varchar(10), @trsfrom, 101) +''' and 
        s.TRSdate <= '''+ convert(varchar(10), @trsto, 101) +''''
execute sp_executesql @sql 
```

@mgchk / @sgchk / @ssgchk / @seasonchk / @vendorchk 是复选框变量

要回答@Aaron，

由于动态查询，全局临时。提取数据时，整个查询都会得到处理并立即删除。那里不会发生冲突。

我的日期变量是`datetime`，它在动态 SQL 中给了我一个错误。

是的，回忆同样的事情来检查，这就是整个问题的原因，如果有比`IF`检查更好的东西可以使用。

而且我发现使用别名连接更容易......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:42:35.850

```
-- rather than convert to a dangerously formatted string,
-- here is a much better way to strip time from a datetime
-- (if you need to!)

SET @trsfrom = DATEADD(DAY, DATEDIFF(DAY, 0, @trsfrom), 0);
SET @trsto = DATEADD(DAY, DATEDIFF(DAY, 0, @trsto), 0);

DECLARE @sql NVARCHAR(MAX) = N'SELECT DISTINCT ';

-- here's an easier way to strip the first comma:

SET @sql += SUBSTRING(
    CASE WHEN @mgchk     = 1 THEN ',p.MainGroup'   ELSE '' END
  + CASE WHEN @sgchk     = 1 THEN ',p.SubGroup'    ELSE '' END
  + CASE WHEN @ssgchk    = 1 THEN ',p.SubSubGroup' ELSE '' END
  + CASE WHEN @Seasonchk = 1 THEN ',p.Season'      ELSE '' END
  + CASE WHEN @vendorchk = 1 THEN ',p.VendorID'    ELSE '' END, 2, 2000);

SET @sql += ' INTO ##aa 
    FROM
      dbo.RPProducts AS p -- use schema prefix!
    INNER JOIN dbo.RPIv AS i  -- use PROPER JOINS!
      ON i.IVProduct = p.Productid
    INNER JOIN dbo.RPTrsd AS d 
      ON i.UPC = d.UPC 
      AND i.StoreID = d.StoreID
    INNER JOIN dbo.RPTrs AS s 
      ON s.StoreID = d.StoreID 
      AND s.ReceiptNO = d.ReceiptNO
    WHERE s.TRSdate >= @trsfrom -- use strongly typed parameters!
    AND s.TRSdate <= @trsto;';

EXEC sp_executesql @sql, 
    N'@trsfrom DATETIME, @trsto DATETIME', 
    @trsfrom, @trsto;
----^^^^^^^^^^^^^^^^ here is how the query gets the @trsfrom & @trsto values 
```

我仍然认为您使用##global 临时表非常危险。如果两个人同时运行这段代码，他们就会遇到严重的问题。

# php - 几乎不需要变量

> ID：15139324
> 
> 赞同：-2
> 
> 时间：2013-02-28T15:27:10.533
> 
> 标签：php, wordpress, http

我创建了一些仅用于条件检查的代码，如下所示

```
if ( $pretty_link_url==$_SERVER['HTTP_REFERER']) { 
```

如果此条件为真并且有效，则有人正在使用他们的浏览器使用相同的 URL，该 URL 位于`"$pretty_link_url"`. `"$pretty_link_url"`在数据库中找到，如果它们匹配，则运行 if 条件。现在我的问题是

无论如何要得到结果，其中两个 url 从上面`$pretty_link_url==$_SERVER['HTTP_REFERER']`相同...

```
$url = "result"; 
```

不知道能不能谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:36:58.713

我不确定您真正想要什么，但从您的评论中我认为您正在寻找：

```
<?PHP
if ( $pretty_link_url == $_SERVER['HTTP_REFERER']) {
   $url = $_SERVER['HTTP_REFERER'];
}else{
   $url = ""; // empty or some other value you want to use instead
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:37:50.453

我正在猜测您到底在寻找什么，但这是它吗？：

```
$url = '';
if ( $pretty_link_url==$_SERVER['HTTP_REFERER']) {
    $url = $_SERVER['HTTP_REFERER'];
} 
```

# sql - 从 CLOB（包含 XML）中提取特定值，同时为表的每一行创建一个分隔字符串。某些行上的 CLOB 值可能为空

> ID：15139329
> 
> 赞同：7
> 
> 时间：2013-02-28T15:27:25.453
> 
> 标签：sql, xml, oracle, clob, xmltype

一些背景：数据库是甲骨文。我正在尝试为表格的每一行创建一个分隔字符串。分隔字符串的某些值必须来自 CLOB（包含 XML）。CLOB 在某些行上可能为空，这就是问题所在。

例如，我有一个表：“Item”，其中包含以下行：“Item_ID”、“Item_CD”、“Item_TXT”（CLOB）。该表有两行。一行在“Item_TXT”中存储了以下 XML，另一行的“Item_TXT”为空。

```
<OuterTag>      
    <InnerTag>test</InnerTag>   
</OuterTag> 
```

我创建了以下 SQL 来返回分隔字符串的前 3 个元素：

```
SELECT 'Item%#'|| Item_ID ||'%#'|| Item_STAT_CD 
FROM Item; 
```

这成功了：

项目%#12345%#A

项目%#123456%#A

然后我尝试添加第四个元素（来自 CLOB 的值）。

```
SELECT 'Item%#'|| Item_ID ||'%#'|| Item_STAT_CD
EXTRACT(XMLTYPE(Item_TXT), '//OuterTag/InnerTag/text()').getStringVal()
FROM Item; 
```

这失败并出现以下错误：

```
ORA-06502: PL/SQL: numeric or value error
ORA-06512: at "SYS.XMLTYPE", line 272
ORA-06512: at line 1 
```

我已将此问题缩小到有时 Item_TXT 为 null 并且 XMLTYPE() 无法处理此问题。为了证明这一点，我运行了以下命令：

```
SELECT 'Item%#'|| Item_ID ||'%#'|| Item_STAT_CD
EXTRACT(XMLTYPE(Item_TXT), '//OuterTag/InnerTag/text()').getStringVal()
FROM Item
WHERE Item_TXT IS NOT NULL; 
```

这成功了：

项目%#12345%#A%#test

有没有办法处理整个表，如果可用的话从 clob 中提取值，否则将 null/nothing 添加到分隔字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T10:57:19.953

顺便说一句，您的错误的原因是`xmltype`构造函数存在空 lob 缺陷。就我个人而言，我总是使用`xmltype.createxml(item_txt)`。您会发现它也可以正常工作，而不必担心`nvl`等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:32:32.360

尝试使用[nvl](http://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_functions_2048.htm)：

```
SELECT 'Item%#'|| Item_ID ||'%#'|| Item_STAT_CD ||'%#'|| 
EXTRACT(XMLTYPE(nvl(Item_TXT, '<OuterTag><InnerTag/></OuterTag>')), '//OuterTag/InnerTag/text()').getStringVal()
FROM Item; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/48802/5)

或者您可以使用[CASE](http://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_functions_2048.htm)语句：

```
SELECT 'Item%#'|| Item_ID ||'%#'|| Item_CD||'%#'||
case when Item_TXT is not null then
EXTRACT(XMLTYPE(Item_TXT), '//OuterTag/InnerTag/text()').getStringVal() end
FROM Item; 
```

# process - 扭曲使用流程

> ID：15139331
> 
> 赞同：3
> 
> 时间：2013-02-28T15:27:26.757
> 
> 标签：process, twisted

我正在学习使用 twisted（最新的 12.3.0 版本），作为对移动应用程序进行一些简单服务器端处理的一种方式。

我的第一个任务本质上是在日志文件上运行“tail”命令，并将后处理的找到的行传送到移动应用程序。那应该很容易...

现在在 TwistedMatrix 网站上的文档中有一个“使用进程”页面，其中我得到了以下代码：

* * *

```
from twisted.internet import protocol, utils, reactor
from twisted.python import failure
from cStringIO import StringIO

class CommandRunner(protocol.Protocol):

    #command = "ls /"
    command = "tail -n 100 /var/log/system.log"

    def connectionMade(self):
        output = utils.getProcessOutput(self.command)
        output.addCallbacks(self.writeResponse, self.noResponse)

    def writeResponse(self, resp):
        self.transport.write(resp)
        self.transport.loseConnection()

    def noResponse(self, err):

        print err
        self.transport.write("Houston, we have an error!\n")
        self.transport.loseConnection()

if __name__ == '__main__':
    f = protocol.Factory()
    f.protocol = CommandRunner
    reactor.listenTCP(10999, f)
    reactor.run() 
```

它与“Doing it the Easy Way”下发布的代码片段有 99.9% 的相同。唯一的变化是twisted 应该执行的shell 命令（在我的Mac 上我似乎没有fortune 命令）。

当我尝试使用 telnet 从第二个终端连接 10999 端口时启动示例代码后，我收到此错误：

> [失败实例：回溯（无帧失败）：：得到标准错误：'在 execvpe tail -n 100 /var/log/system.log [\'tail -n 100 /var/log/system.log\'] 中环境 id 4315532016\n:Traceback（最近一次调用最后一次）：\n 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Twisted-12.3.0-py2.7 -macosx-10.6-intel.egg/twisted/internet/process.py”，第 420 行，在 _fork\n 可执行文件、args、环境中）\n 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/ python2.7/site-packages/Twisted-12.3.0-py2.7-macosx-10.6-intel.egg/twisted/internet/process.py"，第 466 行，在 _execChild\n os.execvpe(executable, args,环境）\n 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.py”，第 353 行，在 execvpe\n _execvpe(file, args,env)\n 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.py”，第 368 行，在 _execvpe\n func(file, *argrest)\nOSError: [Errno 2 ] 没有这样的文件或目录\n']

我看不出为什么代码应该使用 [Errno 2] No such file or directory\n'] 错误提交的任何明显原因..

蒂亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T17:29:07.963

您要运行的程序是“tail”。您想向它传递几个参数：“-n”、“100”和“/var/log/system.log”。

相反，您的代码所做的是运行程序“tail -n 100 /var/log/system.log”，该程序可能在您的系统上不存在（我不希望它存在）。

的正确用法`getProcessOutput`是将程序与参数列表分开传递：

```
getProcessOutput("tail", ["-n", "100", "/var/log/system.log"]) 
```

# c++ - 具有公共基类的多重虚拟继承

> ID：15139333
> 
> 赞同：0
> 
> 时间：2013-02-28T15:27:34.097
> 
> 标签：c++, interface, virtual

我最近浏览了一些代码以了解更多关于 C++ 编程的信息，但我遇到了一些有点奇怪的事情。

我有一个班级声明：

```
class myClass : public QObject, public virtual myObject::myOtherObject::myInterface {
    Q_OBJECT
    public: [...]
} 
```

编译时出现以下错误：

```
error: expected class-name before '{' token
error: myInterface is not a member of 'myObject::myOtherObject' 
```

这是某个地方的语法错误吗？我无法弄清楚是什么问题......

你碰巧知道什么是解决方案吗？

非常感谢 ：）

编辑：界面无关紧要，其他地方的解决方案。尽管如此，答案还是有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:32:07.637

> 这是某个地方的语法错误吗？

不，您的代码在语法上是正确的。以下编译正常，没有错误：

```
#include <QObject>

namespace myObject {
  namespace myOtherObject {
    class myInterface {
    };
  }
}

class myClass : public QObject, public virtual myObject::myOtherObject::myInterface {
    Q_OBJECT
    public:
}; 
```

因此，您需要检查您的`myInterface`类的定义位置并确保它被正确包含。

# sql - 这张表中的树层次结构如何？

> ID：15139334
> 
> 赞同：0
> 
> 时间：2013-02-28T15:27:34.380
> 
> 标签：sql, sql-server, tree

![桌子](../Images/423e7f0ee93a74785e73c3f3c24defc0.png)

我是 SQL 树和层次结构的新手，正在阅读 SQL Server 中的树实用程序。我在 codeproject 上遇到了这张表，我很难想象这棵树（我试着把它画出来，但我可能弄错了）。我的问题是......在这种情况下，NLEFT 和 NRIGHT ID 看起来如何？例如，Tranquilicity 会是 Miracle 的父级，Miracle 是 Emruad 的父级吗？？只需要一个可视化的树来理解这个概念......谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:12:15.990

这是一个自引用表，其中 P_ID 是引用另一行 ID 的外键，NLEVEL 表示每个节点在树中的深度。不确定 NLEFT 和 NRIGHT 是什么。它们似乎与树的结构没有任何关系，但我不能确定。

*   宁静
    *   奇迹的细雨
        *   埃鲁阿德
        *   乔治
            *   寒意村
            *   Carystopia
                *   结冰滴滴
                *   弗莱尔堡
                *   孤独之城
                *   阿西拉
                    *   诺城
                    *   阿内瑞尔
                    *   冷冻物体
                        *   兰塔西亚
                        *   博里夸
                        *   阿里巴斯奇
                        *   泰勒斯维尔
                *   很奇怪哦
                *   维瑞迪安
            *   醋栗村

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:03:38.920

这看起来像[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)

**编辑**

我认为文章[在 MySQL 中管理分层数据](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)会对您有所帮助，其中描述了使用**嵌套集模型**和**邻接列表模型的技术**

# c - 只取消一次双指针？

> ID：15139336
> 
> 赞同：0
> 
> 时间：2013-02-28T15:27:38.213
> 
> 标签：c, pointers, indirection

嗨，我有一个关于双指针的问题。例如在这段代码中：

```
int a, b=2;
int *iPtr1, **iPtr2;

iPtr1  = &a;
iPtr2  = &iPtr1;  
*iPtr1 = b+3;
*iPtr2 = iPtr1; 
```

在最后一行`*iPtr2 = iPtr1;` 它只是告诉`iPtr1`指向自身，因为取消引用双指针一次就像使用`iPtr1`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:30:30.430

它`*iPtr2`指向任何`iPtr1`指向的东西。并`iPtr2`指出`iPtr1`它与`iPtr1 = iPtr1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:34:09.977

用 跟踪执行`gdb`，然后你会看到最后一行`*iPtr2=iPtr1`没有改变任何东西。（有点像`iPtr1=iPtr1`）

在 上`iPtr2 = &iPtr1;`，`iPtr2`已经指向`iPtr1`THE POINTER 所在的地址 NOT THE ADDRESS`iPtr1`指向的地址。

**注意**：您不能用 替换`iPtr2=&iPtr1`，`*iPtr2=iPtr1`因为此时`iPtr2`具有垃圾值（如果它是本地非静态变量）并且取消引用它是*未定义的行为*。

# android - 如何使自定义progressBar的背景透明？

> ID：15139342
> 
> 赞同：1
> 
> 时间：2013-02-28T15:28:09.510
> 
> 标签：android

在这里得到了我的自定义进度条：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

<item android:id="@android:id/background">
    <shape>
        <corners android:radius="25dip" />

        <gradient
            android:angle="90"
            android:endColor="#222222"
            android:startColor="#222222" />

        <stroke
            android:width="1dp"
            android:color="#000" />
    </shape>
</item>
<item android:id="@android:id/progress">
    <clip>
        <shape>
            <corners android:radius="25dip" />

            <gradient
                android:angle="90"
                android:endColor="#b32730"
                android:startColor="#aa2226" />

            <stroke
                android:width="1dp"
                android:color="#000" />
        </shape>
    </clip>
</item> 
```

我想将背景设置为有点透明。

我听说我可以用这样的 8 位颜色代码制作透明颜色：

#00123123 是完全透明的，#ff123123 是完全不透明的，但没有任何变化，我试了很多次。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:46:20.013

阿尔法级别最后。您正在编写 #AARRGGBB 而它实际上是 #RRGGBBAA 其中 AA 是 alpha 级别

# git - Git 镜像问题

> ID：15139344
> 
> 赞同：2
> 
> 时间：2013-02-28T15:28:18.820
> 
> 标签：git, github, gitlab

我有一个运行 GitLab 的本地服务器，我们所有的现场开发人员都在使用它。我们还为远程开发人员设置了一个 github 帐户。我需要一种方法来保持 github 和 gitlab 彼此同步。有谁知道任何工具/程序/配置来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:33:02.540

您可以在源代码库上发布更新挂钩。

步骤 - 从源交换密钥 -> 目标。

在更新后的钩子中添加类似的行

```
git push --mirror git@dest.example.com/reponame.git 

```

假设 - 源端存储库名称是“reponame”存储库名称在 source.example.com 和 dest.example.com 之间是一致的

# java - 服务未正确自动装配 - 基于注释的配置

> ID：15139346
> 
> 赞同：0
> 
> 时间：2013-02-28T15:28:31.557
> 
> 标签：java, spring, jersey, grizzly

我正在使用基于注释的配置——根本没有 XML。

我已经配置了所有内容，但无法弄清楚为什么`OrderService`没有自动装配并继续`null`. 下面最底部的类是显示实际问题的类。其他类都是我的配置。

我确实有`log4j`这个应用程序，但对它没有经验。有没有办法可以记录正在扫描的包/类以帮助确定为什么这不起作用？

**订单服务**

```
@Service
public class OrderService extends GenericService<OrderDAO, Order> {
    @Autowired
    OrderDAO dao;
} 
```

**服务配置**

```
@Configuration
public class Config {
    @Bean
    public OrderService orderService() {
        return new OrderService();
    }
} 
```

**主要配置**

```
@Configuration
@ComponentScan(basePackages = {
        "com.production.api",

        //todo: may not need the rest of these
        "com.production.api.dao",
        "com.production.api.models",
        "com.production.api.requests",
        "com.production.api.requests.job",
        "com.production.api.resources",
        "com.production.api.resources.job",
        "com.production.api.services"
})
@Import({
        com.production.api.services.Config.class,
        com.production.api.dao.Config.class
})
@PropertySource(value= "classpath:/META-INF/application.properties")
@EnableTransactionManagement
public class Config { 
```

**主.java**

```
public static void main(String[] args) throws IOException {
    //process annotation configuration
    AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(Config.class);

    HttpServer httpServer = startServer();
    System.out.println(String.format("Jersey app started with WADL available at " + "%sapplication.wadl\nTry out %shelloworld\nHit enter to stop it...", BASE_URI, BASE_URI));
    System.in.read();
    httpServer.stop();
} 
```

**问题出在哪里...**

```
@Component
public class NewJobRequestHandler {

    public static Logger logger = Logger.getLogger(Logger.class.getName());

    //@todo Why isn't this autowiring?
    @Autowired
    OrderService orderService;

    public void instantiateOrderService() {
        //@todo remove this manual wiring
        orderService = (OrderService) ApplicationContextProvider.getApplicationContext().getBean("orderService");
    }

    public AuthenticatedApiResponse getResponse(AuthenticatedRequest<NewJobRequest> request) {
        instantiateOrderService(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:33:41.337

这里的问题是您的 Spring 配置和上下文与您的 Jersey/Grizzly 堆栈是分开的。您期望 Jersey 能够`beans`从 Spring 中获取，但它不知道 Spring 的存在，它的注释对它没有任何意义。

您需要用 Spring 的 Jersey Servlet 替换您的 Jersey Servlet 并添加一个 ContextLoaderListener。看一下[这个例子](http://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/)，了解如何连接 Jersey 和 Spring。我不确定 Grizzly 是如何工作的，但如果它像任何其他 servlet 容器一样，这应该可以工作。

对于 log4j，您可以将根记录器级别设置为`INFO`or `DEBUG`，您将从 Spring 获得各种日志语句。

# javascript - 在 Google 云端硬盘上分享来自 Google+ 的互动帖子？

> ID：15139352
> 
> 赞同：1
> 
> 时间：2013-02-28T15:28:51.393
> 
> 标签：javascript, google-plus

我正在使用 Google+ 的交互式帖子功能，但它被阻止了

*   声称的来源不在白名单中：[https ://googledrive.com](https://googledrive.com)
*   不安全的 JavaScript 尝试使用 URL 访问框架

我的 Google API 控制台正在使用来自网站的 URL 作为 JavaScript 来源，看起来一切正常。

[https://developers.google.com/+/features/interactive-posts](https://developers.google.com/+/features/interactive-posts)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:00:04.520

Google Drive 可从多个来源获得，您可能会从 API 控制台项目中遗漏其中一些可能性，例如：

```
https://drive.google.com
http://drive.google.com
https://googledrive.com
https://www.googledrive.com
http://googledrive.com
http://www.googledrive.com 
```

每一个都被认为是不同的起源。另外，根据您在做什么，它也可能在 docs.google.com 上。

# python - python stdout 重定向和返回码

> ID：15139353
> 
> 赞同：1
> 
> 时间：2013-02-28T15:28:53.033
> 
> 标签：python, redirect, stdout, return-code

无法通过标准输出的“全局”重定向到日志文件获取子进程的返回码：Fe：

```
 >>> rc = subprocess.call(['ping', '-c1', 'google.com'])
    PING google.com (173.194.69.102) 56(84) bytes of data.
    64 bytes from bk-in-f102.1e100.net (173.194.69.102): icmp_seq=1 ttl=46 time=86.1 ms
    --- google.com ping statistics ---
    1 packets transmitted, 1 received, 0% packet loss, time 0ms
    rtt min/avg/max/mdev = 86.141/86.141/86.141/0.000 ms
    >>> rc
    0 
```

**rc**为**0**，我可以使用它，但如果这样做：

```
 >>> sys.stdout=open('/var/log/test','a')
    >>> rc = subprocess.call(['ping', '-c1', 'google.com'])
    PING google.com (173.194.69.102) 56(84) bytes of data.
    64 bytes from bk-in-f102.1e100.net (173.194.69.102): icmp_seq=1 ttl=46 time=86.9 ms
    --- google.com ping statistics --- 
    1 packets transmitted, 1 received, 0% packet loss, time 0ms
    rtt min/avg/max/mdev = 86.947/86.947/86.947/0.000 ms
    >>> rc
    >>> sys.stdout.flash() 
```

1st - rc 进入文件，不再考虑脚本。所以我无法使用它。

第二 - 仅在 sys.stdout.flash() 之后

3rd - 只有当我这样做时，ping 结果才会进入文件

```
 rc = subprocess.call(['ping', '-c1', 'google.com'],stdout=sys.stdout) 
```

主要问题是如何防止返回代码重定向到标准输出文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:01:30.177

为什么不使用`commands.getstatusoutput`？

```
>>> commands.getstatusoutput('ping 8.8.8.8 -c1')
(0, 'PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_req=1 ttl=48 time=29.7 ms\n\n--- 8.8.8.8 ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 29.790/29.790/29.790/0.000 ms') 
```

输出是一个元组`status_code/output`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:41:08.763

为什么不直接将 ping 的输出重定向到文件？

```
 rc = subprocess.call(['ping', '-c1', 'google.com'],stdout=open('/var/log/test','a')) 
```

或者将 rc 写入 stderr：

```
print >> sys.stderr, rc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:02:31.403

在我看来 rc**确实**得到了返回值，但是由于您已经覆盖了进程的标准输出，因此以下行将 rc 的值写入日志文件：

```
>>> rc 
```

附带说明一下，对于运行子进程、重定向等的脚本，我强烈建议使用 plumbum。

# mysql - 是否可以使用 mysql 转储来填充 hsqldb 数据库？

> ID：15139356
> 
> 赞同：0
> 
> 时间：2013-02-28T15:29:00.260
> 
> 标签：mysql, hibernate, junit, hsqldb

我正在尝试为 hsqldb 复制我的 mysql 表，以便在我的 JPA / Hibernate 项目中运行一些单元测试。

目前只有两个表，但我无法在 hsqldb 中创建两个表。我使用 Spring 文档中的示例代码在测试用例之前运行 schema.sql 脚本：

```
db = new EmbeddedDatabaseBuilder().addDefaultScripts().build(); 
```

但它总是因“意外令牌”异常而失败，令牌范围从“数据库”到“（”。

有没有一种直接的方法可以将 mysql 转储转换为 hsqldb 可以理解的东西？或者我应该以其他方式填充测试数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:59:13.977

我使用 HSQL 和 MySQL 数据库工作了很多年，我知道没有工具可以将 MySQL 转储转换为 hsqldb 脚本。我在这里看到两个解决方案：

1.  制作将 MySQL 转储转换为 hsqldb 脚本的脚本或程序。您可以按照这篇文章中的步骤列表进行操作： [如何将 mysql 转储加载到 hsqldb 数据库？](https://stackoverflow.com/questions/3811906/how-to-load-mysql-dump-to-hsqldb-database) 使用两个响应 [https://stackoverflow.com/a/3813164/891479](https://stackoverflow.com/a/3813164/891479) 和 [https://stackoverflow.com/a/7791340/891479](https://stackoverflow.com/a/7791340/891479) 因为第一个不完整。
2.  制作一个连接到两个数据库的小程序，将您的 MySQL 表加载到对象中并填充您的 hsqldb。

我们总是使用第一个解决方案，它可能是最简单的一个。

# mysql - 如何将邮件地址从数据库插入到邮件发送脚本

> ID：15139360
> 
> 赞同：0
> 
> 时间：2013-02-28T15:29:05.660
> 
> 标签：mysql, email, bcc

有没有一种可能的方法，将数据从表插入到邮件发送脚本？我制作了这个简单的脚本，但它不起作用。如何混合这两个代码？

```
$result = mysql_query("SELECT * FROM tablename WHERE ID =1" ) or die(mysql_error()); while($row = mysql_fetch_array( $result )) { echo ''. $row['maillist'] .''; }

$to = 'here must be maillist row';  
$subject = 'my subject:';  
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";  
$message = 'html content with img src tag';  

mail($to, $subject, $message, $headers); 
```

**我的第二个问题是：**如果我使用密件抄送，那么 gmail 或其他邮件服务会显示带有所有标签的完整消息代码，但不显示图像。那么，有没有办法解决这个问题呢？

**我的第三个问题是：**如果我在消息中插入图像（观看代码），那么消息会出现在垃圾邮件中，但如果我只使用基本文本，则一切正常。如何解决？

我将不胜感激任何答案和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:35:35.237

```
$q = "SELECT email FROM table WHERE id = '" . $id . "'";
$r = mysql_query($q) or die(mysql_error().'<br />'.$q);
$d = mysql_fetch_assoc($r);

$to = $d['email']:
$subject = 'my subject:';  
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";  
$message = 'html content with img src tag';  

mail($to, $subject, $message, $headers); 
```

如果您想向多个人发送电子邮件：

```
$subject = 'my subject:';
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";
$message = 'html content with img src tag';

$q = "SELECT email FROM table WHERE id = IN (" . $array_ids . ")";
$r = mysql_query($q) or die(mysql_error().'<br />'.$q);
while($row = mysql_fetch_assoc($r)) {
    $to = $row['email']:
    mail($to, $subject, $message, $headers);
} 
```

* * *

对于垃圾邮件问题，我会说尝试像这样设置标题

```
$headers .= 'Content-type: image/jpeg' . "\r\n"; 
```

# php - 如何通过 php 将数组传递给 php soap 服务器？

> ID：15139362
> 
> 赞同：2
> 
> 时间：2013-02-28T15:29:07.870
> 
> 标签：php, arrays, object, soap, parameters

抱歉，这可能是一件很容易的事情，但我几天以来都无法让它工作！

这是我的 wsdl 的一部分：

```
<xsd:complexType name="PERSON"> 
<xsd:sequence> 
    <xsd:element name="ExterneID" minOccurs="0" type="xsd:int" />
    <xsd:element name="Email" type="xsd:string" />
    ...
</xsd:sequence> 
</xsd:complexType>

<message name="insertAdresse">
    <part name="BmLogin" type="xsd:string" />
    <part name="TS" type="xsd:int" />
    <part name="UT" type="xsd:string" />
    <part name="Person" type="typens:PERSON"/>
</message> 
```

我怎样才能将它传递给我的肥皂服务器？我怎样才能解决那里的参数？

我尝试了很多版本，但没有任何帮助！例子：

```
class c_adresse
{
    public $ExterneID;
    public $Email;

    public function __construct($ExterneID,$Email)
    {
        $this->ExterneID = $ExterneID;
        $this->Email = $Email;
    }
}

$no1 = array();
$no1[] = new c_adresse(33,"peter@xxxxxx.at"); 
```

所以 $no1 看起来像：

```
array(1) {
[0]=>
  object(c_adresse)#2 (2) {
    ["ExterneID"]=>
    int(33)
    ["Email"]=>
    string(15) "peter@xxxxxx.at"
  }
} 
```

称呼：

```
$response = $soap_client->insertAdresse($login,$ts,$token,$no1); 
```

错误信息：

```
PHP Fatal error:  SOAP-ERROR: Encoding: object hasn't 'Email' property in /home/peter/Desktop/soap.php on line 41
PHP Fatal error:  Uncaught SoapFault exception: [Client] SOAP-ERROR: Encoding: object hasn't 'Email' property in /home/peter/Desktop/soap.php:41 
```

如何设计对象/数组（？）以传递给肥皂服务器？

在服务器上我无法解决 $daten。有时，当我使用参数的顺序和样式时，我让它以某种方式工作，并且只有当我不在“消息”部分中混合字符串、int 和数组（complexType [PERSON]）时。但后来我无法解决 $daten 或 $BmLogin 为空等等...

```
function insertAdresse($BmLogin,$TS,$UT,$daten) 
```

**好的，我找到了解决方案！**

我改变了这个：

```
<xsd:element name="PERSON" type="PersonType"/>
<xsd:complexType name="PersonType"> 
```

那么这个...

```
$response = $soap_client->insertAdresse($login,$ts,$token,array("ExterneID"=>22,"Email"=>"peter@xxxxxx.at")); 
```

工作正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:05:07.880

**好的，我找到了解决方案！**

这在 WSDL 中缺失：

```
<xsd:element name="PERSON" type="typens:PersonType"/>
<xsd:complexType name="PersonType"> 
```

那么这个...

```
$response = $soap_client->insertAdresse($login,$ts,$token,array("ExterneID"=>22,"Email"=>"peter@xxxxxx.at")); 
```

工作正常！

# facebook - 通过 Phonegap 的 Sharekit 将图像发布到 Facebook/Twitter？

> ID：15139364
> 
> 赞同：2
> 
> 时间：2013-02-28T15:29:12.573
> 
> 标签：facebook, image, cordova, twitter, sharekit

是否可以使用 ShareKit 插件在 Phonegap 应用程序中将相机/图库中的图像共享到 Facebook/Twitter？是否可以使用任何其他插件来做到这一点？我看到 Facebook Connect 没有那个选项，phonegap 开发人员如何处理这种情况？

问候，贾莎

# ios - 方向改变时 Uitextfield 和 UIImageView 重叠

> ID：15139366
> 
> 赞同：1
> 
> 时间：2013-02-28T15:29:14.583
> 
> 标签：ios, objective-c, orientation, autoresizingmask

我想在用户输入无效电子邮件时显示警告气泡。我可以成功显示气泡，但是如果方向改变气泡与 uitextfield 重叠，则气泡存在

以横向视图开始： ![在此处输入图像描述](../Images/93387cf31ef1a1889615455b158b66c4.png)

方向变成纵向：

![在此处输入图像描述](../Images/148c41ff55c4883e9327ec56d298e579.png)

其他方式：

以纵向视图开始：

![在此处输入图像描述](../Images/ec00c9c9f7de70e32cc889d682ce2ba2.png)

方向变成风景（泡沫越走越远）

![在此处输入图像描述](../Images/bf9374367f1010beff6c112fb42f3a0d.png)

**我的代码：**

```
//image for warnings
        //get screen size
        CGRect screenRect = [[UIScreen mainScreen] bounds];
        float bubleOriginx;

        //detect device orientation
        UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
        if(orientation == UIInterfaceOrientationLandscapeLeft || orientation== UIInterfaceOrientationLandscapeRight)
        {
            bubleOriginx=screenRect.size.width*0.95;

        }else
        {
            bubleOriginx=screenRect.size.width*0.72;
        }

        UIImage *bubble = [[UIImage imageNamed:@"create event button.png"]
                       resizableImageWithCapInsets:UIEdgeInsetsMake(15, 21, 15, 21)];
        self.emailImage = [[UIImageView alloc] initWithImage:bubble];

        self.emailImage.frame = CGRectMake(bubleOriginx, self.email.frame.origin.y+28, 0, 0);
        UILabel  *xlabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
        xlabel.font = [UIFont fontWithName:@"Helvetica" size:15.0];
        xlabel.text = string;
        xlabel.numberOfLines = 0;

        CGSize labelSize = [xlabel.text sizeWithFont:xlabel.font
                                   constrainedToSize:xlabel.frame.size
                                       lineBreakMode:xlabel.lineBreakMode];
        xlabel.frame = CGRectMake(
                              xlabel.frame.origin.x, xlabel.frame.origin.y,
                              xlabel.frame.size.width, labelSize.height);

        [xlabel setBackgroundColor:[UIColor clearColor]];
        [self.emailImage addSubview:xlabel];
        self.emailImage.autoresizingMask =  UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin;

        [self.view addSubview:self.emailImage];

        [UIView animateWithDuration:0.85
                         animations:^(void) {
                             self.emailImage.frame = CGRectMake(bubleOriginx, self.email.frame.origin.y+28, 220, -60);
                             xlabel.frame = CGRectMake(10, 0, 210, 60);
                         } completion:^(BOOL finished) {

                         }]; 
```

我怎样才能稳定它`UIImageview`，使它不会重叠？可以说它将始终与终点保持 +30 点的距离，`uitextfield`或者至少不会重叠。

谢谢，莫德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:58:11.543

这是因为 autoResizingMask

```
 self.emailImage.autoresizingMask =  UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin; 
```

保持`UIViewAutoresizingFlexibleRightMargin`；（虽然不会像你期望的那样行事）

但是在方向更改上设置 origin.x 将解决它。

```
CGRect tempFrame = self.emailImage.frame;
tempFrame.origin.x = textField.frame.origin.x+textField.frame.size.width+30;
self.emailImage.frame = tempFrame; 
```

适用于所有方向。假设 textField 是对您在图像中显示的 UITextField 的引用。

# user-controls - 将自定义链接添加到 sharepoint 2013 Suite Bar

> ID：15139371
> 
> 赞同：0
> 
> 时间：2013-02-28T15:29:21.027
> 
> 标签：user-controls, sharepoint-2013

我已按照以下链接将自定义链接添加到 SharePoint 2013 Suite Bar。但我看不到套件栏上的链接。我也改变了委托控制的序列属性，但仍然没有运气。我通过更改 10、20、30、50、90 甚至 150 等值来检查序列属性。但没有成功。有人知道问题可能是什么吗？

[http://www.learningsharepoint.com/2013/02/10/addremove-links-in-top-suitebar-skydrivesitesnewsfeed-in-sharepoint-2013/](http://www.learningsharepoint.com/2013/02/10/addremove-links-in-top-suitebar-skydrivesitesnewsfeed-in-sharepoint-2013/)

[http://www.sharemuch.com/2012/11/04/adding-your-own-links-to-sharepoint-2013-suite-bar/](http://www.sharemuch.com/2012/11/04/adding-your-own-links-to-sharepoint-2013-suite-bar/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:11:49.927

请添加一些代码：或者`Elements.xml`控件的代码本身会有所帮助。我使用了第二个链接方法的作者，它对我有用。但是样式不起作用，所以我只是这样做`writer.Write("<a href='#'">LINK</a>'")`了。

另外，我建议在 sharepoint.stackexchange.com 上发帖。我觉得它好多了，因为它是一个特定于域的 StackExchange 站点，而且我已经看到 SharePoint MVP 和顶级博主在那里发帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T13:07:13.847

我知道可能为时已晚。

就我而言，问题出在用户控制路径上

```
~/_controltemplates/15/<feature_name>/<user_control>.ascx 
```

# jquery - LeftScroll 时间到了

> ID：15139376
> 
> 赞同：0
> 
> 时间：2013-02-28T15:29:34.517
> 
> 标签：jquery, animation

无法真正解决这个问题。我正在做一个测验，我使用一个 scrollLeft-jQuery 函数来回答下一个问题。所以我有一个计时器，当它结束时，我希望调用 scrollLeft 函数。这适用于第一个问题，但不适用于下一个问题。我知道这是因为它只针对`.aAnswers li a`. 我怎样才能让它瞄准正确的？

HTML： http: [//www.carlpapworth.com/friday-quiz/](http://www.carlpapworth.com/friday-quiz/)

JS：

```
function timesUp(){
            $('#timerBar').animate({'width':'0px'}, 1800, function(){
                nextQuestion(function(){
                    resetTimer();
                }); 
            });                 
}

function nextQuestion(event){
    var $anchor = $('.qAnswers a');
     $('#qWrap').stop(true, true).animate({
        scrollLeft: $($anchor.attr('href')).position().left
        }, 2000, function(){
            resetTimer();
        });

     event.preventDefault();
}

function resetTimer(){
    $('#timerBar').css('width', '100%');
    timesUp();
}

function stopTimer(){
    $('#timerBar').stop();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:45:48.263

您的目标始终是相同的链接而不更新它，试试这个

```
// >> define here
var $anchors = $('.qContainer');
var i = 0;
function nextQuestion(event){
     $('#qWrap').stop(true, true).animate({
        scrollLeft: $anchors.get(i).position().left
        }, 2000, function(){
            resetTimer();
        });
     event.preventDefault();
     // >> update here
     i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:36:05.323

首先你有一个错误：“TypeError：event.preventDefault 不是一个函数”。它可能会阻止您期望的流程。

# vb.net - 自定义 DataGridView 单元格

> ID：15139378
> 
> 赞同：0
> 
> 时间：2013-02-28T15:29:37.680
> 
> 标签：vb.net, winforms, datagridview, custom-controls

我需要创建一个基于数据网格的自定义控件。我需要显示当天的事件（我知道还有其他第三方控件）。我应该重新设计 datagridview 中的单元格，但我不知道从哪里开始，显然不希望代码我明白这不是一件简单的事情，但我想看看你左边的一个关于关注什么的指示。

下面是我会得到的图像 ![在此处输入图像描述](../Images/f07dd07dabc4c0bc71cb47e279b50bb6.png)

# java - 为什么方括号内的点不匹配任何字符？

> ID：15139388
> 
> 赞同：13
> 
> 时间：2013-02-28T15:30:01.637
> 
> 标签：java, regex

为什么这个`[.]+`Java 正则表达式不匹配我的`"foo"`文本，而`.+`完美匹配（在[这里](http://www.regexplanet.com/advanced/java/index.html)测试）？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-28T15:30:48.733

`[.]`相当于转义`.`（点）字符，即`\\.`.

一旦字符出现在[字符类](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)中，它就失去了作为特殊字符的状态。

由于`foo`不包含任何点，因此没有任何匹配项。`.+`另一方面，它是一个匹配所有内容的通配符贪婪表达式。

# objective-c - 如何将“在 Facebook 上关注我们”按钮添加到 iOS 应用程序？

> ID：15139392
> 
> 赞同：9
> 
> 时间：2013-02-28T15:30:12.917
> 
> 标签：objective-c, facebook, ios6

我已经完成了我的 iOS 应用程序，但只需要添加两个按钮：

*   在脸书上关注我们
*   在推特上关注我们

我以为我会在这里找到几个简单的例子，但惊讶地发现（还）根本没有答案。

我很确定我可以花接下来的几个小时试图弄清楚，但我想我会寻求一些节省时间的帮助。

只是寻找代码放在视图控制器上的按钮后面（XCode 4.5.1，iOS 6）。

我假设我可能需要提供的唯一变量是公司的 Facebook 帐户名称。

有什么建议么？（提前致谢！）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T03:40:19.600

首先，Facebook 的 URL 架构：（`fb://profile/<yourpageid>`来源[）](http://wiki.akosma.com/IPhone_URL_Schemes#Facebook)。具有这种结构的 URL 将打开 Facebook 应用程序（如果已安装）。

[有关 iOS URL 方案的更多信息](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007899)。

当您的按钮被点击时，您可以检查 Facebook 是否已安装：

```
-(IBAction)fbButtonTap:(id)sender {
    NSURL *fbURL = [[NSURL alloc] initWithString:@"fb://profile/<yourpageid>"];
    // check if app is installed
    if ( ! [[UIApplication sharedApplication] canOpenURL:fbURL] ) {
        // if we get here, we can't open the FB app.
        fbURL = ...; // direct URL on FB website to open in safari 
    }

    [[UIApplication sharedApplication] openURL:fbURL];
} 
```

对于 twitter，您遵循相同的基本步骤。iOS 的 Twitter URL 方案是`twitter://user?id=12345`或`twitter://user?screen_name=yourname`( [source](http://wiki.akosma.com/IPhone_URL_Schemes#Twitter) )。同样，如果未安装 Twitter 应用程序，您已经在 safari 中打开了 twitter 配置文件。

至于采取直接行动，我认为您不能这样做，因为没有关于设备上安装的任何其他应用程序的固有知识。我认为您能做的最好的事情就是将用户引导到每个相应的帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:26:04.087

您可以使用[SLRequest](http://developer.apple.com/library/ios/#documentation/Social/Reference/SLRequest_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012234)让某人关注您。不过，这仅适用于 iOS 6，在 iOS 5 上 Twitter 有效，但 Facebook 无效。

一个在 Twitter 上关注你的人的 SLRequest 示例，请确保在后台线程上调用它：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    [accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {

        if (granted) {

            // Get the list of Twitter accounts.
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

            // For the sake of brevity, we'll assume there is only one Twitter account present.
            // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
            if ([accountsArray count] > 0) {
                // Grab the initial Twitter account to tweet from.
                ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

                NSMutableDictionary *tempDict = [[NSMutableDictionary alloc] init];
                [tempDict setValue:@"Your twitter name" forKey:@"screen_name"];
                [tempDict setValue:@"true" forKey:@"follow"];

                SLRequest *followRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodPOST URL:[NSURL URLWithString:@"https://api.twitter.com/1/friendships/create.json"] parameters:tempDict];

                [followRequest setAccount:twitterAccount];
                [followRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                    NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
                    NSLog(@"%@", output);
                    if (error) {
                        dispatch_async(dispatch_get_main_queue(), ^{
                            //Update UI to show follow request failed
                        });
                    }
                    else {
                        dispatch_async(dispatch_get_main_queue(), ^{
                            //Update UI to show success
                        });
                    }
                }];  
            }
        }
    }]; 
```

而对于 Facebook，您只需更改其中的一些内容并查看他们的 API 并更改请求 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:53:31.687

这是我的代码，用于显示人们喜欢我的应用程序的社区页面。

您可以将 _webview 添加到要在代码中显示的位置。

facebook 提供了在 webview 中显示页面的代码。

```
 -(void)likeus
{

_webview =[[UIWebView alloc] initWithFrame:CGRectMake(14,94, 292, 250)];
AppDelegate *appdelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
//Load web view data
NSString *strWebsiteUlr =@"http://www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fenbuyukkim&width=292&height=258&show_faces=true&colorscheme=dark&stream=false&border_color&header=false&appId=433294056715040";

// Load URL

//Create a URL object.
NSURL *url = [NSURL URLWithString:strWebsiteUlr];

//URL Requst Object
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//Load the request in the UIWebView.
[_webview loadRequest:requestObj];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button addTarget:_webview
           action:@selector(removeFromSuperView)
 forControlEvents:UIControlEventTouchUpInside];
button.frame = CGRectMake(270.0, 80.0, 30.0, 30.0);
[button setBackgroundImage:[UIImage imageNamed:@"cross.png"] forState:UIControlStateNormal];
[_webview addSubview:button];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T03:05:00.983

我不确定这是否是您正在寻找的，但我想我找到了解决方案，这里是另一个线程的堆栈溢出。

看看这个线程： [在 iPhone 应用程序中添加 Facebook 点赞按钮](https://stackoverflow.com/questions/2783803/adding-the-facebook-like-button-in-an-iphone-app)

希望对你有帮助！

# java - 使用 ebean 使用 play 框架从 mysql 中获取数据

> ID：15139401
> 
> 赞同：1
> 
> 时间：2013-02-28T15:30:32.850
> 
> 标签：java, playframework, playframework-2.0, ebean

我正在尝试使用 Play 从我的 mysql 服务器获取数据！我的方法是这样的：

1.  在`/application.conf`：

    ```
    db.default.driver=com.mysql.jdbc.Driver    
    db.default.url="jdbc:mysql://localhost:3306/CED?characterEncoding=UTF-8"  
    db.default.user="root"  
    db.default.password="root"  
    ebean.default="models.*" 
    ```

2.  `/models/Budget.java`：

    ```
    package models;

    //imports

    @Entity

    public class Budget extends Model {  
    @Id  
    public String id;

    @Constraints.Required
    public String hauptkategorie;

    public static Model.Finder<String,Budget> find = new Model.Finder<String,Budget>(String.class, Budget.class);

    public static Map<String,String> options() {
        LinkedHashMap<String,String> options = new LinkedHashMap<String,String>();
        for(Budget c: Budget.find.orderBy("id").findList()) {
            options.put(c.id, c.hauptkategorie);
        }
        System.out.println(options);
        return options;
    }
    } 
    ```

我在 CED 数据库中有一个名为budget 的表，其中包含 2 列 id，hauptkategorie。当我运行服务器时，我收到此错误`Database 'default' needs evolution!`并尝试应用创建表的 sql 脚本。但是，我想要预算的是从我的数据库中获取数据。哪里可能是配置问题或缺少的部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:21:16.433

您必须在 application.conf 中取消注释此属性

```
 # Evolutions
   # ~~~~~
   # You can disable evolutions if needed
   evolutionplugin=disabled 
```

# asp.net - ASP.NET WebAPI 控制器的单元测试 POST 操作

> ID：15139403
> 
> 赞同：3
> 
> 时间：2013-02-28T15:30:36.090
> 
> 标签：asp.net, unit-testing, asp.net-web-api

```
 public HttpResponseMessage Save(IList<Models.Activity> activities)
    {
       //some controller code
        return Request.CreateResponse(HttpStatusCode.Created, activities, Configuration);
    } 
```

如何对活动正确传递给 Request.CreateResponse 进行单元测试？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T15:34:34.953

您在这里有两个选择。

您可以设置正确的上下文，以便 CreateResponse 工作。这篇博文使用 PostProductReturnsCreatedStatusCode 进行了演示：

[链接在这里](http://www.peterprovost.org/blog/2012/06/16/unit-testing-asp-dot-net-web-api)

或者您可以像我在这里提到的那样向内存服务器提交请求：

[MSDN 链接](http://blogs.msdn.com/b/youssefm/archive/2013/01/28/writing-tests-for-an-asp-net-webapi-service.aspx)

第一个选项更多的是单元测试，因为它不通过 Web API 管道，但也更难设置和配置。

如果您还需要测试响应正文，您可以使用如下所示的代码来获取被发回的实体：

```
ObjectContent content = response.Content as ObjectContent;
IList<Models.Activity> responseActivities = content.Value; 
```

# events - 在我的用于 android 的重写方法 mono 中找不到合适的方法

> ID：15139407
> 
> 赞同：0
> 
> 时间：2013-02-28T15:30:45.553
> 
> 标签：events, view, xamarin.android, draw

我正在尝试根据触摸事件画一条线。基本上它在手指移动时画线。覆盖 ontouchevent 和 onsizechanged 时出现错误。它最初是用 JAVA 编写的。我刚把它翻译成C#。这是代码：

```
protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        currentLevel = Intent.GetIntExtra("gameLevel", 0);
        playerScore = Intent.GetIntExtra("score", 0);
        SetContentView(new SampleView(this));

        // Create your application here
    }

    private class SampleView : View
    {
        private Paint mPaint;
        private static Bitmap m_bitmap;
        private DisplayMetrics m_metrics;
        private Canvas m_canvas;
        private Path m_path;
        private Paint m_bitmapPaint;
        private float m_X, m_Y;
        static bool m_pathDrawn = false;
        private static float TOUCH_TOLERANCE = 4;

        public SampleView(Context context)
            : base(context)
        {
            Focusable = true;

            mPaint = new Paint();
            mPaint.AntiAlias = true;
            mPaint.Dither = true;
            mPaint.SetStyle(Paint.Style.Stroke);
            mPaint.StrokeWidth = 12;
            mPaint.StrokeJoin = Paint.Join.Round;
            mPaint.StrokeCap = Paint.Cap.Round;
            m_metrics = context.Resources.DisplayMetrics;
            m_bitmap = Bitmap.CreateBitmap(m_metrics.WidthPixels, m_metrics.HeightPixels, Bitmap.Config.Argb8888);
            m_canvas = new Canvas(m_bitmap);
            m_bitmapPaint = new Paint();

        }

        public void onerase()
        {
            m_canvas = null;
        }

        protected override void onSizeChanged(int p_w, int p_h, int p_oldw, int p_oldh)
        {
            this.onSizeChanged(p_w, p_h, p_oldw, p_oldh);
        }

        protected override void OnDraw(Canvas canvas)
        {
            canvas.DrawColor(Color.Black);
            canvas.DrawBitmap(m_bitmap, 0, 0, m_bitmapPaint);
            canvas.DrawPath(m_path, mPaint);
        }

        private void touch_start(float p_x, float p_y)
        {
            m_path.Reset();
            m_path.MoveTo(p_x, p_y);
            m_X = p_x;
            m_Y = p_y;
        }

        private void touch_move(float p_x, float p_y)
        {
            float m_dx = Math.Abs(p_x - m_X);
            float m_dy = Math.Abs(p_y - m_Y);
            if (m_dx >= TOUCH_TOLERANCE || m_dy >= TOUCH_TOLERANCE)
            {
                m_path.QuadTo(m_X, m_Y, (p_x + m_X) / 2, (p_y + m_Y) / 2);
                m_X = p_x;
                m_Y = p_y;
                m_pathDrawn = true;
            }
        }

        private void touch_up()
        {
            m_path.LineTo(m_X, m_Y);
            // commit the path to our offscreen
            m_canvas.DrawPath(m_path, mPaint);
            // kill this so we don't double draw
            m_path.Reset();
        }

        public override bool onTouchEvent(MotionEvent p_event)
        {

            float m_x = p_event.GetX();
            float m_y = p_event.GetY();
            switch (p_event.Action)
            {
                case MotionEventActions.Down:
                    touch_start(m_x, m_y);
                    Invalidate();
                    break;
                case MotionEventActions.Move:
                    touch_move(m_x, m_y);
                    Invalidate();
                    break;
                case MotionEventActions.Up:
                    touch_up();
                    Invalidate();
                    break;
            }
            return true;
        }
    } 
```

另一件事。我想将布局中的图像视图作为我的画布，并在触摸事件上画线。我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:34:57.080

方法名称应使用帕斯卡大小写。

[Android.Views.View.OnTouchEvent 方法](http://androidapi.xamarin.com/?link=M%3aAndroid.Views.View.OnTouchEvent%28Android.Views.MotionEvent%29)

[Android.Views.View.OnSizeChanged 方法](http://androidapi.xamarin.com/?link=M%3aAndroid.Views.View.OnSizeChanged%28System.Int32,System.Int32,System.Int32,System.Int32%29)

```
public override bool OnTouchEvent(MotionEvent e)
{
}

protected override void OnSizeChanged(int w, int h, int oldw, int oldh)
{
} 
```

[单声道编码指南。](http://www.mono-project.com/Coding_Guidelines)

# jasper-reports - 我在 iReport 中向下钻取时遇到问题

> ID：15139409
> 
> 赞同：1
> 
> 时间：2013-02-28T15:30:48.730
> 
> 标签：jasper-reports, ireport, jasperserver

我有两个报告：**Summary**和**Detail**。它们都位于同一个目录中，我正在尝试在 iReport 5.0.1 中执行此操作。我正在尝试在我的**摘要**报告中创建一个字段，以便我可以单击它，它将运行并显示**详细**报告。该字段是：**$F{reason_id}**。

在摘要报告中，我在其中一个字段中创建了一个超链接，如下所示：

**超链接目标：** *自我*

**超链接类型：** *ReportExecution*

在我的链接参数中，我有以下参数：

**_report：** *详细信息*

**reason_id:** $F{reason_id}

**开始日期：** $P{开始日期}

**结束日期：** $P{结束日期}

当我在**摘要**报告中单击**预览**时，我输入了所有参数，然后出现此错误：

 **```
Error filling print... Error evaluating expression : 
    Source text : detail
net.sf.jasperreports.engine.fill.JRExpressionEvalException: Error evaluating expression : 
    Source text : detail 
    at net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:203) 
    at net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:591) 
    at net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:559) 
    at net.sf.jasperreports.engine.fill.JRFillHyperlinkHelper.evaluateHyperlinkParameters(JRFillHyperlinkHelper.java:82) 
    at net.sf.jasperreports.engine.fill.JRFillTextField.evaluateText(JRFillTextField.java:504) 
    at net.sf.jasperreports.engine.fill.JRFillTextField.evaluate(JRFillTextField.java:431) 
    at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:259) 
    at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:459) 
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2044) 
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:778) 
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:288) 
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:151) 
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:909) 
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:822) 
    at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:61) 
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:446) 
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:276) 
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:745) 
    at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:891) 
    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572) 
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) 
Caused by: groovy.lang.MissingPropertyException: No such property: nrt_detail for class: Sample_1362063546538_723686 
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:49) 
    at org.codehaus.groovy.runtime.callsite.GetEffectivePogoPropertySite.getProperty(GetEffectivePogoPropertySite.java:86) 
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGroovyObjectGetProperty(AbstractCallSite.java:239) 
    at Sample_1362063546538_723686.evaluate(calculator_Sample_1362063546538_723686:229) 
    at net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:190) 
    ... 20 more 
Print not filled. Try to use an EmptyDataSource... 
```

这是怎么回事，我该如何解决？

编辑：

```
<detail>
    <band height="20" splitType="Stretch">
        <textField isBlankWhenNull="true" hyperlinkType="ReportExecution">
            <reportElement uuid="39530e77-e079-4f4b-9533-a8f7c1a1b17d" x="0" y="0" width="100" height="20"/>
            <box leftPadding="1">
                <pen lineWidth="0.5"/>
                <topPen lineWidth="0.5"/>
                <leftPen lineWidth="0.5"/>
                <bottomPen lineWidth="0.5"/>
                <rightPen lineWidth="0.5"/>
            </box>
            <textElement/>
            <textFieldExpression><![CDATA[$F{reason_id}]]></textFieldExpression>
            <hyperlinkParameter name="_report">
                <hyperlinkParameterExpression><![CDATA["C:/JasperReports/detail"]]></hyperlinkParameterExpression>
            </hyperlinkParameter>
            <hyperlinkParameter name="reason_id">
                <hyperlinkParameterExpression><![CDATA[$F{reason_id}]]></hyperlinkParameterExpression>
            </hyperlinkParameter>
            <hyperlinkParameter name="start_date">
                <hyperlinkParameterExpression><![CDATA[$P{start_date}]]></hyperlinkParameterExpression>
            </hyperlinkParameter>
            <hyperlinkParameter name="end_date">
                <hyperlinkParameterExpression><![CDATA[$P{end_date}]]></hyperlinkParameterExpression>
            </hyperlinkParameter>
        </textField>
    </band>
</detail> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:19:00.643

将您的报告表达式更改为完整路径，例如“/reports/folder/detail”，并确保在报告名称周围包含引号！**

# selenium - 基于 GUI 的功能测试的代码覆盖率

> ID：15139412
> 
> 赞同：-1
> 
> 时间：2013-02-28T15:30:52.380
> 
> 标签：selenium, code-coverage, functional-testing, emma, jacoco

在使用基于 GUI 的功能测试工具（如 HP QuickTest Pro 或 Selenium）进行测试后，我试图使用代码覆盖工具（如 Emma 或 Jacoco）进行字节码覆盖分析。

任何做过这件事的人都可以给我一个开始这个项目的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:27:25.917

我现在正在这样做。我的方法是使用 JaCoCo ant 任务来检测二进制字节码文件，并使用特定的 CLASSPATH 从 Jenkins 的 ant build.xml 中执行检测的二进制文件。

从字节码进行代码覆盖的原因是现有的设置可以使用 HP QuickTest Pro 为大型应用程序运行测试脚本。我想测试覆盖率是个位数，但我们需要一个经验基线来证明在构建期间进行单元测试可能会提高代码覆盖率。

# ruby-on-rails - 使用“vagrant reload”更新配方后更新虚拟机

> ID：15139413
> 
> 赞同：1
> 
> 时间：2013-02-28T15:30:56.763
> 
> 标签：ruby-on-rails, virtualbox, chef-infra, vagrant

我用***vagrant up***创建了 VM 。然后我更改了一个配方并运行***vagrant reload***以根据新配方更新我的虚拟机，它不会根据新配方更改我的文件。所以我需要***vagrant destroy***和***vagrant up***来用新的配方更新我的虚拟机。

**可以吗？**

在这里，我尝试更新我的配置：

```
template "/etc/nginx/sites-available/vagrant.conf" do
  owner 'vagrant'
  mode 0644
  source 'host.conf.erb'
  notifies :reload, 'service[nginx]'
end 
```

它只能通过**vagrant destroy** + **vagrant up进行更新**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T11:24:43.403

官方文档 ( [http://docs.vagrantup.com/v1/docs/provisioners.html](http://docs.vagrantup.com/v1/docs/provisioners.html) ) 说您有 3 个不同的选项可以在 VM 上应用配置：

*   `vagrant provision`
*   `vagrant reload`
*   `vagrant up`

如果您只想重新应用配置，建议使用`vagrant provision`其他选项，因为此命令仅触发配置过程（同时`vagrant reload`执行`vagrant up`更多操作）。

最后，如果您需要`destroy`并且`up`只是为了更新您的虚拟机，那么问题可能出在您的配方上。尝试分享代码片段（[pastbin](http://pastebin.com/)、[gist](https://gist.github.com/)等），指出代码的哪一部分不起作用，这样社区可以更好地帮助你，好吗？

# c# - 有没有办法以编程方式更改进程的虚拟内存阈值？

> ID：15139418
> 
> 赞同：1
> 
> 时间：2013-02-28T15:31:03.987
> 
> 标签：c#, windows-xp, monitoring

我目前正在编写一个 WatchDog 应用程序来监控一些服务的内存使用情况。这些服务在 Windows XP 上运行。根据我的研究，进程的默认虚拟内存阈值约为 1.8GB。有没有办法以编程方式修改阈值？

# php - MAGENTO 1.7 - List.phtml 在产品名称旁边显示不需要的“否”

> ID：15139421
> 
> 赞同：0
> 
> 时间：2013-02-28T15:31:08.830
> 
> 标签：php, magento

这是它的样子： ![](../Images/a5d4ec40fbaf00e6125077c972d95824.png)

这是我的代码：

```
 <div class="product-name">
               <h22><?php echo (($_product->getResource()->getAttribute('hersteller')->getFrontend()->getValue($_product) && $_product->getResource()->getAttribute('hersteller')->getFrontend()->getValue($_product) != "Nein") ? $_product->getResource()->getAttribute('hersteller')->getFrontend()->getValue($_product) : ''); ?>
               <?php echo (($_product->getResource()->getAttribute('weingut')->getFrontend()->getValue($_product) && $_product->getResource()->getAttribute('weingut')->getFrontend()->getValue($_product) != "Nein") ? $_product->getResource()->getAttribute('weingut')->getFrontend()->getValue($_product) : ''); ?>
               <?php echo (($_product->getResource()->getAttribute('ob_hersteller')->getFrontend()->getValue($_product) && $_product->getResource()->getAttribute('ob_hersteller')->getFrontend()->getValue($_product) != "Nein") ? $_product->getResource()->getAttribute('ob_hersteller')->getFrontend()->getValue($_product) : ''); ?></h22></div> 
```

奇怪的是，“不”只出现在英文版中。我们修改了 list.phtml 以显示公司或制造商或葡萄园。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:38:26.707

您正在检查某个属性是否为“Nein”，如果不是则显示它。这个属性似乎被翻译成英文的“No”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:39:07.823

如果您显示的值与“Nein”不同，则检查您的值是否等于“Nein”。

在英文版中，它不是“Nein”，它不是，所以它总是显示。

您应该在文件中更改它或使用 Magento 的翻译功能。

# java - 无法使用反射调用主方法 - IllegalArgumentException：参数类型不匹配

> ID：15139424
> 
> 赞同：2
> 
> 时间：2013-02-28T15:31:14.063
> 
> 标签：java, reflection

我正在编写一个用于学习反思的示例应用程序。我正在尝试使用反射从另一个类调用一个类中定义的主要方法，但我得到了

> 线程“主”java.lang.IllegalArgumentException 中的异常：参数类型不匹配

在我尝试执行的代码下面找到。

调用 main 方法的类

```
import java.lang.reflect.Method;
public class Invoker {

public static void main(String[] args) throws Exception {
    Class clazz = Class.forName("com.nagpal.invokemainmethod.Invoked");

    Method method = clazz.getMethod("main", new Class[] { String[].class });

    Object[] params = new Object[4];

    params[0] = "arg 1";
    params[1] = "arg 2";
    params[2] = "arg 3";
    params[3] = "arg 4";

    method.invoke(null, new Object[] { params });
} 
```

调用main方法的类

```
public class Invoked {

public static void main(String[] args) {
    if (args.length < 3) {
        throw new IllegalArgumentException();
    }

    for (int i = 0; i < args.length; i++) {
        System.out.println("args[" + args[i] + "]");
    }
  }

  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:33:02.987

你快到了： 的类型`params`应该是`String[]`，而不是`Object[]`：

```
String[] params = new String[4];

params[0] = "arg 1";
params[1] = "arg 2";
params[2] = "arg 3";
params[3] = "arg 4"; 
```

尝试传递`Object[]`给`main(String[])`会导致您看到的错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T15:33:18.317

方法签名 is`String[]`但运行时类型`params`is `Object[]`。尝试：

```
Object[] params = new String[4] 
```

# php - 服务器端使用一长串 if / else 语句验证 HTML 表单输入 - 有效吗？

> ID：15139425
> 
> 赞同：0
> 
> 时间：2013-02-28T15:31:17.323
> 
> 标签：php, html, forms, input

在 PHP 中简单地使用一长串嵌套的 if / else 语句来验证来自 HTML 表单的用户输入是否有效？

所以说有两个领域，我只是这样接近它：

```
if ( field one is formatted right ) {
   if ( field one is long enough ) {
           if ( field two is ok ) {
               do stuff;
           }
           else {
               echo "field two is not ok!";
           }
   }
    else {
        echo "field one is not long enough!";
    }
}
else {
 echo "field one is not formatted right!";
} 
```

我希望你能明白。

因此，当有多个字段和大量验证要做，并且每个字段的验证类型不同时，这最终会很长。

这是处理这个问题的坏方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:36:35.930

我通常做的是这样的：

```
$error_msg = '';
if (field1 not valid)
    $error_msg .= 'Field One is not valid.<br>';

if (field2 not valid)
    $error_msg .= 'Field two is not valid.<br>';

if ($error_msg == '')
{
    // DO ALL YOUR VALID SUBMISSION STUFF HERE
} 
```

我通常认为最好一次通知用户所有错误，而不是一次通知一个来惹恼他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:40:17.827

该代码应该可以工作，确定其效率的一种方法是使用分析来实际测量它需要多长时间。

另一种验证方法是这样的：

```
function handle_submission(){
   $field_1_validation_result=validate_field_1_value($field_1_value);
   if($field_1_validation_result!==true)exit($field_1_validation_result);

   $field_2_validation_result=field_2_validation_result($field_2_value);
   if($field_2_validation_result!==true)exit($field_2_validation_result);

   //Everything is right
   do stuff
}

function validate_field_1_value($value){
   if ( !field one is formatted right )return "field one is not formatted right";
   if ( !field one is long enough )return "field one is not long enough";
   return true;
}

function validate_field_2_value($value){
   if( !field two is ok)return "field two is not ok"
   return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:54:14.710

向前思考肯定有更好的方法可以解决这个问题。首先，您可以尝试使用预定义的验证方法创建类似验证类的东西。

举一个（一个非常粗略的）例子：

```
class Validator {

    public function validate($args) {
        $errors = array();
        //Make sure to do any santising you need too
        foreach($args as $field=>$data) {
            if ($response = $field($data))
                $errors[$field] = $response; 

            //You could create break code here if you wanted 
            //to check if the form was invalid without detailed feedback
        }
        if (empty($errors)) {
            return false;
        }
        return $errors;
    }

    private function email_field($data) {
        $valid = true;

        //perform a validation on email here, generate an $err_msg if it's not valid

        if ($valid) 
            return false;

        return $err_msg
    }
}

$validator = new Validator();

//You probably want to explode or loop through the error messages
//Or for extra brownie points, use the key of each element in the array to place
//the error message intelligently within your HTML!
$validation_errs = $validator->validate($_POST);
if ($validation_errs) 
    print_r($validation_errs); 
```

结合你的表格...

```
<form method="post" action="">
    <input type="text" name="email_field" />
</form> 
```

然后可以将其组合起来以提供您的验证。这可能更好的原因是您可以在整个站点中使用此类，这意味着您不必复制验证逻辑，更重要的是，您不必为每个表单都有嵌套逻辑的踪迹。您只需传递 post 变量，您的类将自动运行它需要的验证，并返回一个完全清除（不直观，这里是“假”，抱歉）或与它们来的字段名称配对的验证错误消息数组从。

**此外**，这在处理结合服务器端和客户端验证时变得很有用，允许您使用 AJAX 通过 AJAX 调用非常具体的、单个字段的验证查询到您的 PHP 并返回可以使用的响应（只要您在做您的输出足以确保它对 AJAX 通信有效）。

所以，当谈到效率时，不仅仅是现在什么是重要的，或者性能差异可能有多么微不足道......它是关于它会在以后为你节省多少时间，当你的表单发生变化时，当你的验证逻辑必须被更改，并且当您需要一遍又一遍地重用相同的验证逻辑时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:40:57.070

我认为这样的格式更容易阅读和遵循：

```
if ( field one is not formatted right ) {
    echo "field one is not formatted right!"

} else if ( field one is no long enough ) {
    echo "field one is not long enough!";

} else if ( field two is not ok) {
    echo "field two is not ok!";

} else  {
    do stuff;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T15:47:43.470

这是我大多数时候做的事情：

```
$Errors = array();

if (field one is not formatted right)
    $Errors[] = "Field one is not formatted right.";

if (field one is not long enough)
    $Errors[] = "Field one is not long enough.";

if (field two is not ok)
    $Errors[] = "Field two is not ok.";

if (empty($Errors)) {
    do stuff;
} else {
    foreach ($Errors as $Error) {
        echo '<div class="error">' . $Error . '</div>';
    }
} 
```

这类似于其他答案，只是我使用数组来存储错误消息，以便我可以更轻松地格式化它们。

# sql-server - 将列选择为行以进行导出

> ID：15139430
> 
> 赞同：1
> 
> 时间：2013-02-28T15:31:38.753
> 
> 标签：sql-server, select, unpivot

我有一个名为“事务”的数据库表，其中包含多个列。对于每个交易行，我需要从指定列表中生成每列一行的导出

交易表

```
ID、DoNotEmail、DoNotMail、DoNotPhone、DoNotSMS
1000，真，假，真，真
```

以下规则需要适用。

设置 DoNotEmail 然后输出 'DNE'

设置 DoNotMail 然后输出 'DNM'

设置 DoNotPhone 然后输出 'DNP'

设置 DoNotSMS 然后输出“DNS”

导出需要如下所示：

```
ID，抑制
1000, DNE
1000，DNP
1000，DNS
```

我真的很困惑，我能让它工作的唯一方法是把每列插入两个临时表的插入语句真的很糟糕。呃。

请问这可能吗？

谢谢你的帮助。

达伦

ps 对格式感到抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:49:41.560

可以这样写的另一种方式是：

```
SELECT id,
  case col 
    when 'DoNotEmail' then 'DNE'
    when 'DoNotMail' then 'DNM'
    when 'DoNotPhone' then 'DNP'
    when 'DoNotSMS' then 'DNS'
  end Suppressions
FROM 
(
  SELECT t.ID,
    s.col,
    CASE s.col
      WHEN 'DoNotEmail' THEN DoNotEmail
      WHEN 'DoNotMail' THEN DoNotMail
      WHEN 'DoNotPhone' THEN DoNotPhone
      WHEN 'DoNotSMS' THEN DoNotSMS
    END AS DATA
  FROM Transactions t
  CROSS JOIN 
  (
    SELECT 'DoNotEmail' AS col
    UNION ALL SELECT 'DoNotMail'
    UNION ALL SELECT 'DoNotPhone'
    UNION ALL SELECT 'DoNotSMS'
  ) s
) s
where data = 'true'; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/5bde2/14)。

由于您使用的是 SQL Server，因此您可以实现该`UNPIVOT`功能：

```
select id,
  case col 
    when 'DoNotEmail' then 'DNE'
    when 'DoNotMail' then 'DNM'
    when 'DoNotPhone' then 'DNP'
    when 'DoNotSMS' then 'DNS'
  end Suppressions
from Transactions
unpivot
(
  value 
  for col in ([DoNotEmail], [DoNotMail], [DoNotPhone], [DoNotSMS])
) piv
where value = 'true' 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/c0161/3)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T15:35:55.117

如果您只有四列，这可能会起作用：

```
SELECT id, 
       'DNE' AS Suppressions 
FROM   transactions 
WHERE  donotemail = 'true' 
UNION ALL 
SELECT id, 
       'DNM' AS Suppressions 
FROM   transactions 
WHERE  donotmail = 'true' 
UNION ALL 
SELECT id, 
       'DNP' AS Suppressions 
FROM   transactions 
WHERE  donotphone = 'true' 
UNION ALL 
SELECT id, 
       'DNS' AS Suppressions 
FROM   transactions 
WHERE  donotsms = 'true' 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/799c86/1)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-28T16:21:58.710

这适用于 SQL Server 2008 或更高版本。如果需要，它也可以修改为在 SQL Server 2005 上工作。

```
select T1.ID,
       T2.Name
from Transactions as T1
  cross apply (values (DoNotEmail, 'DNE'), 
                      (DoNotMail,  'DNM'), 
                      (DoNotPhone, 'DNP'), 
                      (DoNotSMS,   'DNS')
              ) as T2(Value, Name)
where T2.Value = 'true' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T16:16:46.527

四记录表上的A`CROSS JOIN`可以节省扫描表四次。bluefeet 首先使用此 (+1) 发布了答案。这是使用 Oracle 的类似版本。

```
SELECT id, Suppressions FROM
(
  SELECT id, 
     CASE 
        WHEN Col = 1 AND donotemail = 'true' THEN 'DNE'
        WHEN Col = 2 AND donotmail  = 'true' THEN 'DNM'
        WHEN Col = 3 AND donotphone = 'true' THEN 'DNP'
        WHEN Col = 4 AND donotsms   = 'true' THEN 'DNS'
        ELSE NULL
     END Suppressions 
  FROM Transactions
  CROSS JOIN (SELECT Level Col FROM dual CONNECT BY Level <=4)
)
WHERE Suppressions IS NOT NULL; 
```

[SQL小提琴](http://sqlfiddle.com/#!4/799c8/7)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T15:37:40.187

```
select ID, 'DNE' as 'Suppressions'
from transactions
where DoNotEmail = 'true'
UNION ALL
select ID, 'DNM' as 'Suppressions'
from transactions
where DoNotMail = 'true'
UNION ALL
select ID, 'DNS' as 'Suppressions'
from transactions
where DoNotPhone = 'true'
UNION ALL
select ID, 'DNE' as 'Suppressions'
from transactions
where DoNotSMS = 'true'
order by ID 
```

# javascript - 如果我不需要结果列表中 CSS 选择器的粒度，为什么我会想要一个静态 NodeList/HTMLCollection 而不是“实时”NodeList？

> ID：15139432
> 
> 赞同：3
> 
> 时间：2013-02-28T15:31:37.930
> 
> 标签：javascript, dom, nodelist, selectors-api

我通常听说这是因为实时 NodeLists 是“坏的” [（请参阅​​这篇 Zakas 文章）](http://www.nczonline.net/blog/2010/09/28/why-is-getelementsbytagname-faster-that-queryselectorall/ "扎卡斯")，并且决定`querySelectorAll`返回一个 static `HTMLCollection`。为什么人们认为实时 NodeList 是一件坏事？代码示例可能会帮助我最好地理解这一点。

如果每当我关心使用缓存的节点集合的值进行任何计算时，该集合恰好不是过时的快照，我真的不能将其视为“坏”的事情。

我确切地了解使用 CSS Selector 字符串选择元素有多么有用，但如果我只能在获取该集合后可靠地运行代码，它似乎比 live `NodeList`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-30T09:53:57.233

实时节点列表还不错，但如果您不习惯，它们的行为可能会令人困惑。特别是如果您将它们视为数组（它们不是数组）

考虑一个将页面中的 div 数量加倍的经典示例。以下是这方面的三个尝试：

```
// Example 1 (doesn't work)
for(var i = 0; i < document.querySelectorAll("div").length ; i++){
    document.body.appendChild(document.createElement("div"));
}

// Example 2 (works)
var divs = document.querySelectorAll("div");
for(var i = 0; i < divs.length ; i++){
    document.body.appendChild(document.createElement("div"));
}

// Example 3 (doesn't work)
var divs = document.getElementsByTagName("div");
for(var i = 0; i < divs.length; i++){
    document.body.appendChild(document.createElement("div"));
} 
```

示例 1 显然是一个无限循环。每次迭代，它都会重新检查页面中 div 的数量。

示例 2 按预期工作，因为节点列表已经被缓存（当然最好只缓存长度）。

示例 3 看起来像示例 2。许多人希望它以相同的方式工作，因为节点列表是缓存的。但是由于节点列表是实时的，它实际上是另一个无限循环。这会抓住一些人。

此外，如果一个函数返回一个静态节点列表，您可以在每次需要时重新查询 DOM。这可以说比将您的实时列表转换为静态更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T16:45:32.540

**实时**NodeList 检索速度更快，因此它们的**性能更高**
**静态**NodeList性能***较差***。

通过例如[查看差异。](http://jsperf.com/queryselector-vs-getelementbyid-pure)( querySelectorAll `querySelector`) 和`getElementById`

在相同条件下`getElementsByTagName`使用比`querySelectorAll`...

至少我从微软官方培训指南“使用 JavaScript 和 CSS3 进行 HTML5 编程”中读到...

# c# - 切换内部循环会影响性能？

> ID：15139434
> 
> 赞同：3
> 
> 时间：2013-02-28T15:31:40.893
> 
> 标签：c#, performance, coding-style

我处于循环数据并根据设置以特定方式对其进行格式化的场景中，我担心我认为最好的风格可能会阻碍性能。

代码基本模式如下

```
enum setting {single, multiple, foo, bar};
Data data = getData(Connection conn, int id);
setting blah = data.getSetting();
foreach (Item item in data)
{
   switch(blah)
   {
      case blah.single:
        processDataSingle(item blah);
        break;
      ...
   }
} 
```

我担心的是数据中可能有数千甚至数万个项目。我想知道是否将开关置于循环中可能会重复评估它可能会导致一些严重的性能问题。我知道我可以将循环放在`switch`循环之前，但是每个循环都`case`包含它，这似乎不太可读，因为基本功能保持不变的情况不太明显。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T15:36:08.377

您可以设置一次委托/操作，然后每次在循环中调用它：

```
Data data = getData(Connection conn, int id);
setting blah = data.getSetting();
Action<Item> doThis;
switch (blah)
{
  case blah.single:
      doThis = i => processSingleData(i blah);
      break;
  ...
}
foreach (Item item in data)
{
    doThis(item);
} 
```

基本上，将每个“案例”的主体放在 a 中，在循环外`Action`选择它，然后在循环中调用。`Action``switch``Action`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:38:57.620

您可以创建一个方法来保持可读性，然后将数据传递给该方法：

```
void processAllData(IEnumerable<Item> data,  setting blah)
{
    switch(blah)
    {
      case blah.single:
        foreach (Item item in data)
        {

        }
    }
    // next case, next loop ...
} 
```

然后它只是一个单行：

```
processAllData(data, blah); 
```

这种方法是可读的，因为它封装了复杂性，简洁，因为你只看到你必须看到的，高效，因为你可以优化案例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:42:38.463

通过这种方式使用 Action 委托，您可以大量分解代码

```
enum setting {single, multiple, foo, bar};
Data data = getData(Connection conn, int id);

var processAll = new Action<Action<item>>(action =>
                    {
                        foreach(var item in data)                           
                            action(item);
                    });

setting blah = data.getSetting();

switch(blah)
{
    case blah.single:
       processAll(item => processDataSingle(item, blah));
       break;
       ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:42:44.470

如果您谈论可能运行数万次或更多次的比较，它肯定有可能影响性能。您在此处编写的代码中可能出现的另一个问题是，如果您需要添加到枚举中会发生什么。然后，您需要打开此代码并对其进行调整以处理这种情况，这违反了[Open/Closed Principle](http://www.oodesign.com/open-close-principle.html)。

IMO 同时解决这两个问题的最好方法是使用工厂模式来解决这个问题（请参阅[此处](http://techtaunt.wordpress.com/2011/06/15/factory-pattern-with-reflection-c/)和[此处](http://msdn.microsoft.com/en-us/magazine/cc164170.aspx)的帖子以获取有关启动该问题的一些建议）。您需要做的就是拥有一个接口，其实现将调用您想要在上面的 switch 代码中调用的方法。创建一个工厂并让它根据传入的枚举选择哪个实现返回到您的代码（在循环之前）。此时，您的循环需要做的就是调用该接口方法，该方法将完全按照您的要求执行。

之后，任何未来的功能添加只需要您创建该接口的另一个实现，并相应地调整枚举。没有混乱，没有大惊小怪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T15:37:49.933

像这样将开关置于循环中几乎肯定会更慢。是否重要无法说 - 使用秒表查看。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T15:46:24.460

如果 switch 语句中的值彼此接近，编译器将生成一个查找表而不是 N 个`if`语句。它提高了性能，但很难说编译器何时会决定这样做。
相反，您可以创建一个`Dictionary<switchType,Delegate>`，用成对的值操作填充它，然后选择适当的操作，`O(1)`因为字典是一个哈希表。
`dictionary[value].Invoke()`.

# c - 为什么 free() 并没有真正释放内存？

> ID：15139436
> 
> 赞同：6
> 
> 时间：2013-02-28T15:31:46.867
> 
> 标签：c, malloc, free

我正在做一些分配和释放内存的测试。这是我正在使用的代码：

```
#include <stdlib.h>
#include <stdio.h>

#define WAVE_SIZE 100000000

int main(int argc,char* argv[]){

    int i;
    int **p;

    printf("%d allocs...\n",WAVE_SIZE);

    // Malloc
    printf("Allocating memory...\n");
    p = (int**)malloc(WAVE_SIZE*sizeof(int*));
    for(i = 0;i < WAVE_SIZE;i++)
            p[i] = (int*)malloc(sizeof(int));

    // Break
    printf("Press a key to continue...\n");
    scanf("%*s");

    // Dealloc
    printf("Deallocating memory...\n");
    for(i = 0;i < WAVE_SIZE;i++)
            free(p[i]);             
    free(p);

    // Break
    printf("Press a key to continue...\n");
    scanf("%*s");

    return 0;
} 
```

在休息期间，我检查进程使用的总内存，但我没有看到我期望的内容。

直到第一次暂停，我看到内存消耗在增加。但是，在第二次暂停时，我没有看到它被释放。

这是操作系统的事情吗？如果我的机器负载很高，我没有可用内存并且另一个进程尝试分配，会发生什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T15:33:14.213

`free`不一定将内存释放回操作系统。大多数情况下，它只是将该内存区域放回空闲块列表中。这些空闲块可以重用于下一次调用`malloc`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T15:34:58.467

当分配内存并随后释放时，该内存仍保留在进程中，但被标记为空闲，因此可以再次分配。这是因为否则操作系统必须在每次调用`malloc`or时更改进程的虚拟内存映射`free`，这需要时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T15:38:01.487

`free()`只是告诉分配器*你的程序不再需要这个块*。`brk`分配器可以缓存它以供进一步分配，也可以通过更改指针将其返回给系统。这一切都取决于实施。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:35:37.467

实际释放系统内存的时间取决于操作系统。

在 Windows 中的例子，即使你关闭一个程序，内存也不会同时释放。它是为了在下次程序启动时重用它而制作的。

# android - 无法定位android动态加载的按钮

> ID：15139439
> 
> 赞同：1
> 
> 时间：2013-02-28T15:31:58.123
> 
> 标签：android, button, dynamic, position

我在课堂上动态创建按钮，我尝试使用 'offsetLeftAndRight()' 或 '.leftMargin' 和 '.topMargin' 来定位它们，如下所示，

```
public class instruction extends Activity {

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.instruct);
    final Button btn = new Button(this);

    RelativeLayout.LayoutParams paramsd2 = 
        new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    paramsd2.leftMargin = 500;
    paramsd2.topMargin = 500;

    paramsd2.height = 60;
    paramsd2.width = 200;

    btn.offsetLeftAndRight(300);

    btn.setLayoutParams(paramsd2);
    addContentView(btn, paramsd2);

} 
```

但是按钮总是停留在左上角，我该如何定位它，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:48:08.267

`AddContentView()`不是在已设置的布局中添加视图的正确方法。

使您的主布局成为RelativeLayout（在instruct.xml 布局文件中检查）使用它的id 在您的`onCreate()`方法中使用它来检索对它的引用

```
myRelativeLayout = (RelativeLayout) this.findViewById(R.id.itsId) 
```

然后将您的按钮添加到此布局中：

```
myRelativeLayout.addView(myButton); 
```

您的按钮的布局参数似乎可以很好地定位，因此它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:20:16.950

在按钮上设置边距而不是布局

```
 MarginLayoutParams marginParams = new MarginLayoutParams(backToMainScreenImageView.getLayoutParams());
marginParams.setMargins(0, 0, (int) UIUtil.getRadialButtonMainMargin(this), 0);
RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(marginParams);
layoutParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
backToMainScreenImageView.setLayoutParams(layoutParams); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:28:17.507

尝试这样的事情：

```
paramsd2.setMargin(500, 500, 0, 0);
btn.setLayoutParams(paramsd2); 
```

# bash - Bash 命令发送电子邮件

> ID：15139442
> 
> 赞同：0
> 
> 时间：2013-02-28T15:31:58.927
> 
> 标签：bash, sendmail

我有一个包含电子邮件地址列表的文件。我想通过 bash 命令向该列表发送电子邮件。如果可能，请让命令检查重复项，不要将电子邮件发送到重复的电子邮件。

样本文件输入：

```
 azzeddinetata@gmail.com
  testemail@gmail.com
  testsecond@gmail.com
  azzeddinetata@gmail.com 
```

所以在这个例子中`azzeddinetata@gmail.com`不应该收到重复的电子邮件。有没有人有任何 Bash 命令可以为我指明正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:34:50.677

尝试对您的文件执行此操作：

```
mail -s subject "$(sed '/^$/d;s/ *//g' file.txt | sort -u | paste -sd ",")" <<EOF
message here
EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:37:41.980

```
mail -s "Subject" $(sort -u recipients-file) <<<"msg" 
```

# protocol-buffers - Google 协议缓冲区错误：“在序列化协议缓冲区时遇到包含无效 UTF-8 数据的字符串”

> ID：15139449
> 
> 赞同：5
> 
> 时间：2013-02-28T15:32:26.290
> 
> 标签：protocol-buffers

我正在使用以下代码

```
int lenSend = odl->ByteSize();
char* buf = (char *)malloc(lenSend);
odl->SerializeToArray(buf, lenSend); 
```

我收到此错误，但我不明白为什么会收到它（是的，我收到了 3 次）：

> libprotobuf 错误 google/protobuf/wire_format.cc:1059] 在序列化协议缓冲区时遇到包含无效 UTF-8 数据的字符串。字符串必须只包含 UTF-8；对原始字节使用“字节”类型。
> libprotobuf 错误 google/protobuf/wire_format.cc:1059] 在序列化协议缓冲区时遇到包含无效 UTF-8 数据的字符串。字符串必须只包含 UTF-8；对原始字节使用“字节”类型。
> libprotobuf 错误 google/protobuf/wire_format.cc:1059] 在序列化协议缓冲区时遇到包含无效 UTF-8 数据的字符串。字符串必须只包含 UTF-8；对原始字节使用“字节”类型。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T19:54:38.873

您可以按照消息中的建议摆脱警告！

`odl`您必须在（在您的 .proto 文件中）的定义中有一个或多个字段，这些字段被定义为`string`但您将在其中放入非 UTF-8 字符。 [文档声明您不应该这样做](https://developers.google.com/protocol-buffers/docs/proto#scalar)。如果将这些更改为`bytes`，警告应该会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T05:05:02.213

字符串 字符串必须始终包含 UTF-8 编码或 7 位 ASCII 文本。字符串 字符串 str/unicode[4]

bytes 可以包含任意的字节序列。字符串 ByteString str

有时您应该使用字节而不是字符串！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-25T06:27:52.363

在golang中，可以使用strings.ToValidUTF8来避免临时

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-09T08:31:14.540

使用 byte[] 替换字符串，其编码不是 UTF-8 或 ASCII。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-04T08:58:01.353

转换 []byte 进行翻译

例子：

```
message Data {
    Object obj = 1;
} 
```

如果`<grpc: failed to unmarshal the received message string field contains invalid UTF-8>`：

```
# marshal object
message Data {
    bytes encodeObject = 1;
}
# unmarshal object 
```

# javascript - google MarkerImage 不显示的问题

> ID：15139450
> 
> 赞同：0
> 
> 时间：2013-02-28T15:32:26.783
> 
> 标签：javascript, google-maps, google-maps-markers, image-resizing

我正在尝试调整一些图标的大小以使用 MarkerImage 在 GMaps 上显示它们，但它不起作用。如果我以正常方式加载，它可以工作，代码：

```
function addMyPos(latitud,longitud){
 posi = new google.maps.LatLng(latitud,longitud)
 marker = new google.maps.Marker({
  position: posi,
  map: map,
  icon: "../res/punto_negropru.png"
 });
} 
```

但是图像太大，所以我尝试使用 MarkerImage，但不起作用：

```
function addMyPos(latitud,longitud){
 var imag = new google.maps.MarkerImage(
           "../res/sit_marron.png", 
           new google.maps.Size(26, 30), 
           new google.maps.Point(0,0), 
           new google.maps.Point(13,30) 
   );
posi = new google.maps.LatLng(latitud,longitud)
marker = new google.maps.Marker({
 position: posi,
 map: map,
 icon: imag
 });
} 
```

请注意，我尝试将所有类型的数字传递给点、大小..等，但我无法调整大小，图像总是消失。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:49:02.903

`MarkerImage`我相信最近已从他们的 API 中删除。尝试将代码的那部分更改为：

```
var imag = {
    url: "../res/sit_marron.png", 
    size: new google.maps.Size(26, 30), 
    origin: new google.maps.Point(0,0), 
    anchor: new google.maps.Point(13,30),
    scaledSize: new google.maps.Size(13, 15)
}; 
```

（将 的值更改`scaledSize`为合适的值。我只是选择了一半大小作为示例。）

# django - 在 Heroku 上搜索 Django 应用程序的后端

> ID：15139451
> 
> 赞同：1
> 
> 时间：2013-02-28T15:32:28.117
> 
> 标签：django, heroku, django-haystack, whoosh

在我的开发应用程序中，我使用了 Haystack 的组合，以 Whoosh 作为后端进行搜索。

但是，当我部署到 Heroku 时，我的搜索不再起作用，即使在运行`python manage.py update_index`.

经过一番研究，我发现这是因为 Heroku 的只读文件系统。

是否有任何免费的解决方案可以在 Heroku 上解决此问题，以便我可以进行搜索？我看过的插件每月大约 20 美元，如果可能的话，我更愿意开始使用免费的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:42:42.853

如果没有单独的搜索服务器，这样做是不切实际的。Heroku dyno 上的存储不是只读的，但它们对于 dyno 来说是短暂的和独立的，任何生产应用程序都至少有两个 dyno。您可能可以设置一些东西在测功机上运行，​​但它肯定是复杂和脆弱的，而第三方服务是交钥匙的。大多数第三方搜索附加组件随着使用量的增加而扩展，其中许多在最便宜的水平上是免费的，如果它们都不符合要求，那么您可以随时使用非 Heroku 搜索服务，其中有很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:36:24.207

请注意，dyno 文件系统是[可写](https://devcenter.heroku.com/articles/dynos#isolation-and-security)的。你能发布你得到的错误吗？

您可能想再看看 Heroku 附加组件。有几个 Elastic Search 附加组件处于免费测试版或有免费计划。[Haystack 支持弹性搜索](http://django-haystack.readthedocs.org/en/latest/installing_search_engines.html)：

*   [https://addons.heroku.com/searchbox](https://addons.heroku.com/searchbox)
*   [https://addons.heroku.com/bonsai](https://addons.heroku.com/bonsai)
*   [https://addons.heroku.com/indexden](https://addons.heroku.com/indexden)
*   [https://addons.heroku.com/foundelasticsearch](https://addons.heroku.com/foundelasticsearch)

# android - Android - ImageView 不会显示用相机拍摄的照片

> ID：15139456
> 
> 赞同：4
> 
> 时间：2013-02-28T15:32:46.637
> 
> 标签：android, camera, imageview

请多多包涵……我一直在寻找**DAYS**段代码，它可以启动相机活动、拍照并将其放置在一个简单的 ImageView 上 >。< 下面发布的代码会触发启动活动并拍摄照片，但**图像未显示在 ImageView 上！**只是缺少什么？:'(

```
public class MainActivity extends Activity
{
private static final int PICK_IMAGE = 0;

private static final int PICK_IMAGE_FROM_GALLERY = 1;

private Button mBtnCamera, mBtnGallery, mBtnCancel;

private ImageView mImageView;

private Uri mURI;
private String mPhotoPath;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mImageView = (ImageView) findViewById(R.id.imgDisplayImage);

    mBtnCamera = (Button) findViewById(R.id.btnPhotoCamera);
    mBtnGallery = (Button) findViewById(R.id.btnPhotoGallery);
    mBtnCancel = (Button) findViewById(R.id.btnCancel);

    mBtnCamera.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v)
        {
            Intent camera = new Intent();

            camera.setAction(MediaStore.ACTION_IMAGE_CAPTURE);

            camera.putExtra("crop", "true");

            File f = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);

            mURI = Uri.fromFile(new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "myFile.jpg"));

            camera.putExtra(MediaStore.EXTRA_OUTPUT, mURI);

            startActivityForResult(camera, PICK_IMAGE);
        }
    });
}   

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == PICK_IMAGE)
    {
        // Result includes a Bitmap thumbnail?
        if (data != null)
        {
            if (data.hasExtra("data"))
            {
                //Bitmap thumbnail = data.getParcelableExtra("data");

                Bitmap thumbnail = (Bitmap) data.getExtras().get("data");

                mImageView.setImageBitmap(thumbnail);
            }
        }
        // If there is no thumbnail data, the image will have been stored in target output URI.
        else
        {

            Cursor cursor = getContentResolver().query(
                    Media.EXTERNAL_CONTENT_URI, new String[]
                            {
                                Media.DATA, 
                                Media.DATE_ADDED, 
                                MediaStore.Images.ImageColumns.ORIENTATION
                            }, 
                            Media.DATE_ADDED, 
                            null, 
                            "date_added ASC"
            );

            if (cursor != null && cursor.moveToFirst())
            {
                do
                {
                    mURI = Uri.parse(cursor.getString(cursor.getColumnIndex(Media.DATA)));
                    mPhotoPath = mURI.toString();
                }
                while (cursor.moveToNext());
                cursor.close();
            }

            // Resize full image to fit out in image view.
            int width = mImageView.getWidth();
            int height = mImageView.getHeight();

            BitmapFactory.Options factoryOptions = new BitmapFactory.Options();

            factoryOptions.inJustDecodeBounds = true;

            BitmapFactory.decodeFile(/*mURI.getPath()*/ mPhotoPath, factoryOptions);

            int imageWidth = factoryOptions.outWidth;
            int imageHeight = factoryOptions.outHeight;

            // Determine how much to scale down the image
            int scaleFactor = Math.min(
                    imageWidth/width,
                    imageHeight/height
                    );

            // Decode the image file into a Bitmap sized to fill view

            factoryOptions.inJustDecodeBounds = false;
            factoryOptions.inSampleSize = scaleFactor;
            factoryOptions.inPurgeable = true;

            Bitmap bitmap = BitmapFactory.decodeFile(/*mURI.getPath()*/ mPhotoPath, factoryOptions);

            mImageView.setImageBitmap(bitmap);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:39:05.580

> 我在三星 android 的某些设备中遇到了同样的问题然后我实现了逻辑来获取捕获的照片的路径。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == PICK_IMAGE)
    {
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
        startActivityForResult(cameraIntent, CAMERA_REQUEST_CODE);

        Cursor cursor = getContentResolver().query(Media.EXTERNAL_CONTENT_URI, new String[]{Media.DATA, Media.DATE_ADDED, MediaStore.Images.ImageColumns.ORIENTATION}, Media.DATE_ADDED, null, "date_added ASC");
        if(cursor != null && cursor.moveToFirst())
        {
            do {
                uri = Uri.parse(cursor.getString(cursor.getColumnIndex(Media.DATA)));
                photoPath = uri.toString();
            }while(cursor.moveToNext());
            cursor.close();
        }

        if(photoPath != null) {
            Bitmap bitmap = BitmapFactory.decodeFile(photoPath);
            ///Do Implement your logic whatever you want.
            mImageView.setImageBitmap(bitmap);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:43:00.137

尝试和测试在 Galaxy S3 手机上工作。感谢 TGMCians 的帮助。

```
public class MainActivity extends Activity
{
private static final int PICK_IMAGE = 0;

private static final int PICK_IMAGE_FROM_GALLERY = 1;

private Button mBtnCamera, mBtnGallery, mBtnCancel;

private ImageView mImageView;

private Uri mURI;
private String mPhotoPath;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mImageView = (ImageView) findViewById(R.id.imgDisplayImage);

    mBtnCamera = (Button) findViewById(R.id.btnPhotoCamera);
    mBtnGallery = (Button) findViewById(R.id.btnPhotoGallery);
    mBtnCancel = (Button) findViewById(R.id.btnCancel);

    mBtnCamera.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            Intent camera = new Intent();

            camera.setAction(MediaStore.ACTION_IMAGE_CAPTURE);

            camera.putExtra("crop", "true");

            File f = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);

            mURI = Uri.fromFile(new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "myFile.jpg"));

            camera.putExtra(MediaStore.EXTRA_OUTPUT, mURI);

            startActivityForResult(camera, PICK_IMAGE);
        }
    });
}   

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == Activity.RESULT_OK)
    {
        if (requestCode == PICK_IMAGE)
        {
            Cursor cursor = getContentResolver().query(
                    Media.EXTERNAL_CONTENT_URI, new String[]
                            {
                                Media.DATA, 
                                Media.DATE_ADDED, 
                                MediaStore.Images.ImageColumns.ORIENTATION
                            }, 
                            Media.DATE_ADDED, 
                            null, 
                            "date_added ASC"
            );

            if (cursor != null && cursor.moveToFirst())
            {
                do
                {
                    mURI = Uri.parse(cursor.getString(cursor.getColumnIndex(Media.DATA)));
                    mPhotoPath = mURI.toString();
                }
                while (cursor.moveToNext());
                cursor.close();
            }
            if (data != null)
            {
                if (data.hasExtra("data"))
                {
                    Bitmap thumbnail = (Bitmap) data.getExtras().get("data");

                    mImageView.setImageBitmap(thumbnail);
                }
                else
                {
                    System.out.println("Intent bundle does not have the 'data' Extra");

                    int width = mImageView.getWidth();
                    int height = mImageView.getHeight();

                    BitmapFactory.Options factoryOptions = new BitmapFactory.Options();

                    factoryOptions.inJustDecodeBounds = true;

                    BitmapFactory.decodeFile(/*mURI.getPath()*/ mPhotoPath, factoryOptions);

                    int imageWidth = factoryOptions.outWidth;
                    int imageHeight = factoryOptions.outHeight;

                    // Determine how much to scale down the image
                    int scaleFactor = Math.min(
                            imageWidth/width,
                            imageHeight/height
                            );

                    // Decode the image file into a Bitmap sized to fill view

                    factoryOptions.inJustDecodeBounds = false;
                    factoryOptions.inSampleSize = scaleFactor;
                    factoryOptions.inPurgeable = true;

                    Bitmap bitmap = BitmapFactory.decodeFile(/*mURI.getPath()*/ mPhotoPath, factoryOptions);

                    mImageView.setImageBitmap(bitmap);

                }
            }
        }
    }
    else 
    {
        System.out.println("Picture taking activity NOT returning RESULT_OK");
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:32:57.907

尝试添加

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

（和轻微的延迟）就在里面

```
 if (requestCode == PICK_IMAGE) 
```

堵塞。我认为问题可能是您的设备没有正确刷新媒体存储。

（当然更好的做法是使用 MediaScanner[扫描您的文件](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28java.lang.String,%20java.lang.String%29)）

# django - django-rest-framework 和上传图片

> ID：15139457
> 
> 赞同：1
> 
> 时间：2013-02-28T15:32:50.190
> 
> 标签：django, django-rest-framework

我有一个使用[django-rest-framework](http://django-rest-framework.org/)的图像字段如何处理通过 API 上传图像？

有没有例子？

**模型.py**

```
image = models.ImageField(
        upload_to="profiles",
        height_field="height",
        width_field="width",
        null=True,
        blank=True,
        editable=True,
        help_text="Profile Picture",
        verbose_name="Profile Picture"
    )
    height = models.PositiveIntegerField(null=True, blank=True, editable=False)
    width = models.PositiveIntegerField(null=True, blank=True, editable=False) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-24T13:52:16.933

最后我可以使用 Django 上传图片。这是我的工作代码

视图.py

```
class FileUploadView(APIView):
# parser_classes = (MultiPartParser, FormParser, )
parser_classes = (FileUploadParser, )

# media_type = 'multipart/form-data'
# format = 'jpg'

def post(self, request, format='jpg'):
    up_file = request.FILES['file']
    destination = open('/Users/Username/' + up_file.name, 'wb+')
    for chunk in up_file.chunks():
        destination.write(chunk)
        destination.close()

    # ...
    # do some stuff with uploaded file
    # ...
    return Response(up_file.name, status.HTTP_201_CREATED) 
```

网址.py

```
urlpatterns = patterns('', 
url(r'^imageUpload', views.FileUploadView.as_view()) 
```

curl请求上传

```
curl -X POST -S -H -u "admin:password" -F "file=@img.jpg;type=image/jpg" 127.0.0.1:8000/resourceurl/imageUpload 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:24:40.083

图像字段不存储图像，而是存储图像的链接。您是否在设置中设置了 MEDIA_URL？例如 MEDIA_URL = '/media/' 如果你在 localhost 上运行，你应该在 localhost/media/profiles/image_name.png 找到图像

# c++ - 在调试中删除标准 C++ 库的 Visual Studio 全局互斥锁

> ID：15139461
> 
> 赞同：2
> 
> 时间：2013-02-28T15:33:00.583
> 
> 标签：c++, visual-studio-2010

我在我的代码中使用 std::map ，但在调试版本中使用它的代码运行速度比发布版本慢得令人无法接受。[这个答案](https://stackoverflow.com/a/2832511/492336)说这是因为

> 在 Microsoft Visual Studio 中，访问标准 C++ 库时有一个全局锁，以防止在调试版本中出现多线程问题。

但它没有详细说明禁用该全局互斥锁的方法。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:45:49.530

如果您的问题通常是使用 STL 的调试构建速度很慢，我会尝试关闭迭代器调试。据我所知，这是发布和调试版本之间的重大放缓之一。我认为相关`#define`的是：

```
#define _HAS_ITERATOR_DEBUGGING 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:46:13.837

据我所知，这并不是因为运行时库中的某些调试检查可能（并且很可能无法进行）线程安全，因此为了给您额外的检查，您必须拥有全局锁。

根据经验，我知道调试运行时要慢得多，但在很多情况下，额外的运行时检查很有价值。在指责运行时之前，我还会在代码中指出一个分析器 - 您的调试代码运行时未优化，除非您调整了标志，因此代码中的任何性能问题都会被放大，因为编译器按照您的要求执行:) .

也就是说，如果您愿意放弃额外的运行时检查，您可以用来解决此问题的一个选项是尝试针对发布运行时构建您的调试版本。我已经有一段时间没有尝试过了，但我最后一次尝试这样做确实有效，它可能会使一段慢得令人无法接受的代码变得更容易忍受。

# google-drive-api - 无法使用 google drive api“(401) Invalid Credentials”，即使身份验证成功

> ID：15139467
> 
> 赞同：1
> 
> 时间：2013-02-28T15:33:11.010
> 
> 标签：google-drive-api

我正在创建一个基于浏览器的应用程序，基于 php。我通过从 Google_Client() -> >createAuthUrl() 获得的 url 将用户发送到 google 权限页面。

然后，用户允许我请求的权限并被重定向回我的站点，在那里我使用查询参数（代码）生成访问令牌。设置 accesstoken 后，我尝试了一些 google drive api 调用，但无论我尝试使用什么 api 调用，调用总是失败 (401) Invalid Credentials。

在检查 google 正在使用的其余 url 时，我看到它总是返回以下内容：

```
{
    "error": {
        "errors": [
            {
                "domain": "global",
                "reason": "internalError",
                "message": "Internal Error"
            }
        ],
        "code": 500,
        "message": "Internal Error"
    }
} 
```

这是我的代码：

```
require_once 'src/Google_Client.php';
require_once 'src/contrib/Google_DriveService.php';
require_once 'src/contrib/Google_Oauth2Service.php';

class Google_drive 
{

    var $array_values = array();
    var $CI;
    var $client;

    public function __construct()
    {
        $this->CI = & get_instance();

        $client = new Google_Client();
        // Get your credentials from the APIs Console
        $client->setClientId('12340XXXXX26.apps.googleusercontent.com');
        $client->setClientSecret('4vJU1RVcXXXXXX71levO5wF-');
        $client->setRedirectUri('http://test.elemental.co.za/drm/requestlists/google_drive');
        $client->setScopes(array('https://www.googleapis.com/auth/drive','https://www.googleapis.com/auth/drive.file'));

        $service = new Google_DriveService($client);

        if (!$this->CI->input->get('code')) // (this is the query string parameter ?code=
        {
            redirect($client->createAuthUrl());
        }
        //Request authorization
        $authCode = $this->CI->input->get('code'); // (this is the query string parameter ?code=
        // Exchange authorization code for access token
        $accessToken = $client->authenticate($authCode);
        $client->setAccessToken($accessToken);
        $files = $service->files->list(array())
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:25:09.520

好的，所以事实证明我错过了 client->setDevolperKey('xxxxxxxxxxxxxxxxxxxxx')，我似乎无法在谷歌文档的任何地方找到它，即使现在我知道它是什么。

# javascript - 无法删除克隆的元素

> ID：15139469
> 
> 赞同：1
> 
> 时间：2013-02-28T15:33:15.160
> 
> 标签：javascript, jquery, html, dom

我有一个网格，如果用户将鼠标悬停在一个框上，则会生成该框的克隆并将其直接定位在其上方（这是一个 z-index/overlay 事物）。当用户用光标离开该框时，应该播放动画，并且在动画结束时该框被移除（）。

问题是动画完成但没有删除克隆。我使用console.logs 和alerts 来告诉我动画是否完成并且它会发出很好的警报，但是动画完成后对该克隆客户端所做的任何事情都不会通过。这是一个例子：

```
clonedClient.slideUp(300, function(){
        alert('ya');
        clonedClient.remove();
}); 
```

slideUp 完成后，会触发警报，但不会触发 remove。

这是一个 jsfiddle，所以你可以看到发生了什么

[http://jsfiddle.net/Q6fVP/1/](http://jsfiddle.net/Q6fVP/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:51:38.753

mouseenter 事件被触发两次（因为`selected-client`克隆，也有一个类`client`。如果在 mouseenter 事件中添加 console.log，你会注意到：

```
entering <div class=​"client">​hello​&lt;/div>​
entering <div class=​"client selected-client" style=​"background-color:​ red;​ position:​ absolute;​ top:​ 0.5em;​ background-position:​ initial initial;​ background-repeat:​ initial initial;​">​hello​&lt;/div>​ 
```

如果触发它的元素是您的`selected-client`.

即在您的第一个事件处理程序中：

`if($this.hasClass('selected-client')){return;}`

或者，更完整地，对于该代码块：

```
$(document).on({
    mouseenter: function(){
        var $this = $(this);
        if($this.hasClass('selected-client')){
            return;
        }
        var clientClone = $this.clone().css({background:'red', position:'absolute', top: '0.5em'}).addClass('selected-client');
        clientClone.insertBefore(this);
    }
}, 'div.client'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:51:50.493

您正在使用`$(document).on()`，这意味着事件处理程序已附加到文档。当您克隆`<div>`元素时，该类`.client`也应用于克隆。而当你在原始元素之后插入克隆时，`mouseenter`又被触发了，因为你输入了新克隆的元素（这里制作了另一个克隆）。

`.client`我的解决方案是在插入之前从克隆中删除类。

[http://jsfiddle.net/Q6fVP/8/](http://jsfiddle.net/Q6fVP/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:46:31.440

如果我理解正确，我认为您想替换`clonedClient.remove();`

和`$('.selected-client').remove();`

# java - Spring StringToObject.toObject() 未在列表中调用？

> ID：15139475
> 
> 赞同：1
> 
> 时间：2013-02-28T15:33:29.597
> 
> 标签：java, spring, type-conversion

所以我们使用的可能是相当老的 Spring 属性转换方式。基本上，当页面加载时，它会将实体对象转换为其 id 值，然后当页面提交时，它会获取 id 值，通过该 id 查找实体对象并将其填充回来。

示例如下；

```
import org.springframework.binding.convert.converters.StringToObject;

public class StringToExamVO extends StringToObject {

    private VerifyService verifyService;

    public StringToExamVO(VerifyService verifyService) {
        super(ExamVO.class);
        this.verifyService = verifyService;
    }

    @Override
    public String toString(Object object) {
        ExamVO spec = (ExamVO) object;
        return (spec != null && spec.getId() != null ? spec.getId().toString() : null);
    }

    @Override
    public Object toObject(String string, Class targetClass) {
        if (string != null && string.length() > 0 && targetClass.equals(ExamVO.class)) {
            String id = StringUtils.trimToNull(string);
            return verifyService.loadExam(Integer.decode(id));
        }
        return null;
    }
} 
```

现在，如果我们的表单支持命令具有单个实体属性，这将非常有用；

```
private ExamVO exam;

public void setExam(ExamVO exam) {
  this.exam = exam;
}

public ExamVO getExam() {
  return this.exam;
} 
```

但是，如果属性是实体的列表，它似乎不起作用，例如；

```
private List<ExamVO> exams;

public void setExams(List<ExamVO>exam) {
  this.exams = exams;
}

public List<ExamVO> getExams() {
  return this.exams;
} 
```

通过单一属性类型的调试器（第一个示例），我可以看到 toString 和 toObject 分别在页面加载和页面提交时被调用。

但是，当属性是 LIST 时进行调试，只会调用 toString（重复地因为它是一个列表）。在页面提交时，没有调用 toObject，这意味着我猜它甚至没有尝试将字符串 id 转换回实体对象。

在列表属性 getter 中放置一个断点`getExams`我什至可以看到，尽管列表被定义为在其索引槽中`List<ExamVO>`的`ExamVO`对象被覆盖`Strings`！

Spring 转换框架是否无法检测到，因为它填充了一个then 它可能应该为每个插槽`List<ExamVO>`调用转换器的 toObject 方法？`StringToExamVO`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:30:32.150

再想一想，关于我在底部的问题，基本上是这样的；

“Spring可以检测到它填充一个列表，即具有泛型类型的列表，因此调用转换器将字符串转换为ExamVO泛型类型”

我相信答案是否定的，因为泛型类型在运行时被剥离了。所以在运行时 List 只是一个没有类型的 List，这就是为什么 Spring 可以将 Strings 插入其中而不是 ExamVOs 的原因，也是为什么不调用转换服务的原因，因为没有通用类型，框架不知道该列表假设包含 ExamVO。

我现在已经改变了我的代码的工作方式，但做了以下想法的简单玩具；

```
@SuppressWarnings("unchecked")
public List<ExamVO> getExams() {
    if(Exams == null) {
        exams = new ArrayList() {

            @Override
            public ExamVO set(int index, Object element) {
                // TODO if element is a String, 
                // call the verifyService.loadExam(Integer.decode(element));
                // to get the ExamVO and set that to element
                return (ExamVO)super.set(index, element);
            }
        };
    }
    return exams;
} 
```

这在理论上是可行的，但是从命令/表单支持对象调用服务层对我来说似乎很不确定。

# asp.net - HTML 和 ASP.NET

> ID：15139478
> 
> 赞同：0
> 
> 时间：2013-02-28T15:33:40.980
> 
> 标签：asp.net, html, css

我创建了一个母版页并从另一个网站复制了 html，我想在我的母版页上使用它的设计。单击链接时，我的问题出现了，我按顺序得到了设计。当应用程序启动时，我单击一个链接并导航到该链接。如果我想导航到另一个链接，它会将文件夹名称添加到我的另一个页面位置。这个例子是打击：

> [http://mydomain.com/AdminSetup/Financial/AddIncome.aspx](http://mydomain.com/AdminSetup/Financial/AddIncome.aspx)

*   第 1 页 - 现在如果要导航到另一个页面，这就是 url 中发生的情况

> [http://mydomain.com/AdminSetup/Financial/Payroll/InitiatePayroll.aspx](http://mydomain.com/AdminSetup/Financial/Payroll/InitiatePayroll.aspx)

*   第二页的实际位置是/Payroll/InitiatePayroll.aspx

我不明白这是怎么回事，请帮忙。谢谢你

```
<%@ Master Language="VB" AutoEventWireup="false" CodeBehind="SSP.master.vb" Inherits="SSPayroll.SSP" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Free template built by slicejack.com</title>

<link type="text/css" media="screen" rel="stylesheet" href="stylesheets/reset.css" />
<link type="text/css" media="screen" rel="stylesheet" href="stylesheets/main.css" />
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div id="header">
  <h1><a href="Default.aspx">Company logo</a></h1>
  <ul>
    <li><a href="Default.aspx" class="active">Home</a></li>
    <li><a href="Payroll/InitiatePayroll.aspx">Payroll</a></li>
    <li><a href="~/AdminSetup/Financial/AddIncome.aspx">Finance</a></li>
    <li><a href="interior.html">Testimonials</a></li>
    <li><a href="interior.html">Blog</a></li>
    <li><a href="interior.html">Contact</a>
      </li>
  </ul>
</div>
<!-- //#header -->
<div id="sub-header">
  <div id="sub-header-inner">
    <h2>Free high quality template</h2>
    <p class="highlight">The template is made by following the latest web standards.
      PSD Files are available upon request. </p>
    <p>This website is ideal for representing a product or service. Its code is descriptive so that is understandable even to those who don't have good knowledge of web technology. All of the images are optimized for web and website will display correctly in all web browsers.</p>
    <p class="learn-more"><a href="interior.html">Learn more</a></p>
    <img src="images/layout/sub_header_img.png" alt="" /> </div>
</div>
<!-- //#sub-header -->

<div id="content" class="clearfix">
  <div id="content-inner">

        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

        </asp:ContentPlaceHolder>

</div>
<!-- //#content -->

<div id="footer">
  <ul>
    <li><a href="Default.aspx" class="active">Home</a></li>
    <li><a href="Payroll/InitiatePayroll.aspx">Payroll</a></li>
    <li><a href="interior.html">Services</a></li>
    <li><a href="interior.html">Testimonials</a></li>
    <li><a href="interior.html">Blog</a></li>
    <li><a href="interior.html">Contact</a></li>
  </ul>
  <p>Website designed by: <a href="http://www.agilo.hr">Agilo</a>, Code: <a href="http://www.slicejack.com" title="PSD to (X)HTML service">Slicejack</a></p>
</div>
<!-- //#footer -->

    </form>
</body>
</html> 
```

**这是我的母版页。**

```
body { background: #fff url(../images/layout/body.gif) top center no-repeat; font-family: Arial, Helvetica, sans-serif; }

#header { width: 960px; margin: 0 auto; height: 118px; position: relative; }
#header h1 { padding-top: 29px; }
#header h1 a { background: url(../images/layout/logo.png) no-repeat; display: block; text-indent: -5000px; width: 156px; height: 22px; }

#header fieldset { background: url(../images/layout/search.png) no-repeat; width: 181px; height: 25px; position: absolute; right: 0; top: 26px; }
#header fieldset .search { background: none; font-size: 11px; display: block; color: #969696; border: none; padding: 0 8px 0 8px; width: 138px; margin-top: 5px;  }

#header ul { position: absolute; top: 88px; left: 0; }
#header ul li { display: inline; }
#header ul li a { font-size: 11px; text-decoration: none; text-transform: uppercase; margin-right: 20px; color: #fff; }
#header ul li a:hover, #header ul li a.active { color: #acfc5d; }

#sub-header { background: #7db63c url(../images/layout/sub_header.gif) top repeat-x; color: #fff; height: 281px; }
#sub-header-inner { width: 960px; margin: 0 auto; padding: 34px 0; position: relative; }
#sub-header h2 { background: url(../images/headings/main.png) no-repeat; width: 298px; height: 23px; margin-bottom: 12px; text-indent: -5000px; }
#sub-header p { margin-bottom: 18px; width: 610px; font-size: 13px; line-height: 1.5; }
#sub-header p.highlight { font-size: 16px; }
#sub-header p.learn-more { margin: 0; }
#sub-header p.learn-more a { display: block; text-align: center; font-size: 13px; color: #fff; background: url(../images/buttons/learn_more.png) no-repeat; height: 27px; width: 105px; text-decoration: none; padding-top: 4px; }
#sub-header p.learn-more a:hover { background-position: right; }
#sub-header img { position: absolute; right: 0; top: 30px; }

#sub-header.interior { height: 142px; background: url(../images/layout/sub_header_interior.gif) repeat-x; }
#sub-header.interior p { width: auto; }
#sub-header.interior #sub-header-inner { padding: 30px 0 0 0; }

#sub-header.interior h2 { background: url(../images/headings/interior.png) no-repeat; }

#content { background: url(../images/layout/content.gif) top repeat-x; margin-bottom: 20px; }
#content-inner { width: 960px; margin: 0 auto; padding: 30px 0; }
#content .column { width: 305px; float: left; margin-right: 20px; }
#content .column.last { margin-right: 0; }
#content .column h3 { text-indent: -5000px; height: 16px; width: 300px; margin-bottom: 8px; }
#content .column h3#about { background: url(../images/headings/about.png) no-repeat; }
#content .column h3#services { background: url(../images/headings/services.png) no-repeat; }
#content .column h3#connect { background: url(../images/headings/connect.png) no-repeat; }
#content .column p { font-size: 11px; line-height: 1.6; margin-bottom: 12px; color: #333; }
#content .column a { color: #6fa235; }
#content .column a:hover { color: #527628; }
#content .column p.read-more a { display: block; width: 95px; height: 23px; font-size: 11px; text-decoration: none; color: #360; background: url(../images/buttons/read_more.gif) left no-repeat; text-align: center; padding-top: 5px; }
#content .column p.read-more a:hover { background-position: right; }
#content .column img.left { float: left; margin: 3px 10px 0 0; padding: 1px; background: #fff; border: 2px solid #ececec; }
#content .column strong { font-weight: bold; }
#content .column em { font-style: italic; }

#content .column.main { width: 600px; }
#content .column.main h2, #content .column.main h3, #content .column.main h4, #content .column.main h5 { margin-bottom: 12px; font-weight: bold; color: #333; }
#content .column.main h2 { text-indent: -5000px; height: 15px; width: 590px; }
#content .column.main h2#lorem { background: url(../images/headings/lorem.png) no-repeat; }
#content .column.main h3 { text-indent: 0; font-size: 14px; }
#content .column.main h4 { font-size: 12px; }
#content .column.main h5 { font-size: 11px; }
#content .column.main table { width: 100%; border: 1px solid #e3e3e3; font-size: 11px; margin-bottom: 12px; }
#content .column.main table th { padding: 6px 10px; border: 1px solid #e3e3e3; font-weight: bold; color: #6fa235; }
#content .column.main table td { padding: 6px 10px; border: 1px solid #e3e3e3; color: #333; }
#content .column.main table .odd { background: #fafafa; }
#content .column.main ul li { font-size: 11px; margin-left: 25px; list-style: disc; }

#content .column.sidebar { width: 310px; float: right; margin-right: 0; }
#content .column.sidebar h3 { text-indent: -5000px; height: 15px; width: 310px; }
#content .column.sidebar h3#example { background: url(../images/headings/example.png) no-repeat; }
#content .column.sidebar h3#touch { background: url(../images/headings/touch.png) no-repeat; }
#content .column.sidebar p { color: #666; }
#content .column.sidebar p.read-more { margin-bottom: 20px; }
#content .column.sidebar fieldset label { font-size: 11px; display: block; margin-bottom: 5px; color: #666; }
#content .column.sidebar fieldset li { margin-bottom: 10px; }
#content .column.sidebar fieldset .text, #content .column.sidebar fieldset textarea { border: 1px solid #e3e3e3; -webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px; padding: 3px; font-size: 11px; color: #666; width: 202px; }
#content .column.sidebar fieldset .text:hover, #content .column.sidebar fieldset textarea:hover { border: 1px solid #c5c4c4; }
#content .column.sidebar fieldset textarea { height: 90px; width: 302px; }
#content .column.sidebar fieldset .button { background: url(../images/buttons/read_more.gif) no-repeat; width: 95px; height: 28px; text-align: center; color: #360; font-size: 11px; border: none; cursor: pointer; }
#content .column.sidebar fieldset .button:hover { background-position: right; }

#footer { clear: both; margin: 0 auto; width: 940px; padding: 6px 10px 12px 10px; border-top: 1px solid #e5e5e5; position: relative; }
#footer ul li { display: inline; }
#footer ul li a { font-size: 11px; text-decoration: none; color: #b5b5b5; margin-right: 12px; }
#footer ul li a.active, #footer ul li a:hover { color: #6b9f3c; }
#footer p { position: absolute; right: 10px; top: 10px; font-size: 11px; color: #b5b5b5; }
#footer p a { text-decoration: none; color: #6b9f3c; } 
```

**这是我的 CSS 课**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:40:52.303

其他人建议的波浪号 ~ 只能在服务器控件中使用以相对于根进行渲染。尝试更改服务器控件的链接

```
<asp:HyperLink ID="myId" CssClass="active" NavigateUrl="~/Default.aspx" runat="server">Home</asp:HyperLink> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:42:13.897

尝试使用`asp:HyperLink`s 而不是普通`a`的 s：

```
<asp:HyperLink id="hlPayroll" runat="server" 
    NavigateUrl="~/Payroll/InitiatePayroll.aspx"
    Text="Payroll"></asp:HyperLink> 
```

服务器控件将使用波浪号所在的根解析客户端 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:38:00.510

正在相对于当前文件夹解析 URL。

将您的工资单链接更改为以下之一：

`<li><a href="~/Payroll/InitiatePayroll.aspx">Payroll</a></li>` （相对于根解析）

`<li><a href="../Payroll/InitiatePayroll.aspx">Payroll</a></li>` （解析为当前文件夹的兄弟）

# spring - 绑定到 Apache Tomcat tomcat-users.xml UserDatabaseRealm 的 Spring 安全性

> ID：15139481
> 
> 赞同：2
> 
> 时间：2013-02-28T15:33:51.400
> 
> 标签：spring, tomcat, spring-security

我正在将 Spring 安全性添加到内部网站。我被要求将身份验证绑定到 tomcat-users.xml，以便我们可以减少要更改/记住的密码数量。

从我已经能够谷歌起来，这不是很简单，如果可能的话。

目前一切正常，在 springSecurity.xml 中硬编码了用户 + 角色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:10:59.800

您可以将容器安全性视为[预先验证的场景](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#preauth-sample)。

代码库中有一个使用这种方法的[示例应用程序。](https://github.com/SpringSource/spring-security/tree/master/samples/preauth)它使用显式 bean 配置，但也有可用的[`<jee>`命名空间元素](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-jee)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T06:33:54.173

正如 Luke 所指出的，这可以作为预身份验证方案来完成，但我不建议使用该选项。当您使用 tomcat xml 文件时，您使用的是 MemoryRealm，但您可以切换到 JDBCRealm 并将两个用户（Spring 和 Tomcat）都存储在数据库中。我建议这样做是为了维护、一致性和安全性。如果您更改您的 servlet 容器，您将不得不迁移您的安全用户和角色。

[https://tomcat.apache.org/tomcat-8.0-doc/realm-howto.html#MemoryRealm](https://tomcat.apache.org/tomcat-8.0-doc/realm-howto.html#MemoryRealm)

# javascript - 带有简单纹理的 Webgl 怪异渲染

> ID：15139484
> 
> 赞同：3
> 
> 时间：2013-02-28T15:33:58.030
> 
> 标签：javascript, opengl-es, webgl, textures

我在自定义 3D 形状上渲染纹理时遇到问题。

使用以下参数：

```
gl.bindTexture(gl.TEXTURE_2D, texture);
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.image);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D, null); 
```

它给了我这个结果：

![结果](../Images/93aebc26397bd3614367f6667bf88d81.png)

更改以下参数：

```
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT); 
```

它给了我这个：

![结果2](../Images/c94f987be9a3ceb510698339cdeeb8ff.png)

并使用这些参数：

```
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); 
```

![结果3](../Images/557107381b5fe58317c18536dc17a4d3.png)

我尝试更改纹理坐标，但没有成功，这里用于每个面的坐标是： `0.0, 0.0, 0.0, 10.0, 10.0, 10.0, 10.0, 0.0`

知道为什么一个三角形（实际上是平行面上的 2 个）表现得很奇怪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:57:48.703

问题是您正在使用具有不同点数的面 - 但仍然使用固定数量 (4) 的纹理坐标作为面。由于某些面有 5 个点，因此在某些时候纹理坐标会“移动”。

相反，您应该像添加顶点一样添加它们：

```
for (var j=0; j < face.length; j++){
    vertices...

     //generate texture coords, they could also be stored like the points
     textureCoords.push(points[face[j]][0] / 4);
     textureCoords.push((points[face[j]][1]+points[face[j]][2]) / 4); 
```

[http://jsfiddle.net/bNTkK/9/](http://jsfiddle.net/bNTkK/9/)

# html - StringEscapeUtils escapeHtml

> ID：15139486
> 
> 赞同：5
> 
> 时间：2013-02-28T15:34:01.477
> 
> 标签：html, escaping, stringescapeutils

org.apache.commons.lang.StringEscapeUtils.escapeHtml 和 org.apache.commons.lang3.StringEscapeUtils.escapeHtml4 之间有区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:59:32.840

它们实际上来自不同的包

escapeHtml 来自 org.commons.lang (lang 2.5 API)，让我们使用 writer 对象。它还可以从 SQL 源中转义字符串

escapeHtml4 来自 org.commons.lang3（lang 3.1 API），专门用于从 HTML4 源中转义字符。不多也不少

他们做同样的工作，但我建议使用“escapeHtml4”，因为它来自较新的包

请参阅：[EscapeHtml4](http://commons.apache.org/proper/commons-lang//api/org/apache/commons/lang3/StringEscapeUtils.html)和[escapehtml](http://webcache.googleusercontent.com/search?q=cache%3aZp5dbujrxqEJ%3acommons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html+&cd=1&hl=fr&ct=clnk&gl=ca)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T14:36:52.190

请注意，`StringEscapeUtils.escapeHtml()`撇号有问题

# asp.net - IIS 中的 Web 应用程序没有选择正确的根目录

> ID：15139489
> 
> 赞同：1
> 
> 时间：2013-02-28T15:34:08.903
> 
> 标签：asp.net, iis-7

我不知道我是否在做一些非常明显的错误，但由于某种原因，我的网络应用程序认为它的根文件夹与实际不同。

我在默认网站下创建了一个 Web 应用程序。每当我过去这样做并了解它应该如何工作时，对应用程序根目录的任何请求（对于 URL 路由，例如 ~/index.aspx 或图像）总是解析到 [server][应用程序名称]\index.aspx。

出于某种原因，每当我对这个特定的应用程序执行此操作时，我都不会转到 [server][applicationname]\index.aspx，而是被重定向到 [server]\index.aspx，并且在我的一生中，并且经过广泛的谷歌搜索和摆弄设置后，我无法让它选择正确的路径。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:19:54.630

当您在 II7 中访问您的站点时，首先确保您的站点被突出显示。然后点击右侧的基本设置。仔细检查弹出窗口中的物理路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:48:39.527

好吧，我不知道问题出在哪里，但是在重新启动网站后，它似乎消失了，现在按预期工作。有可能是以前的应用程序是网站造成的，然后我把它转换成网络应用程序没有重新启动它，虽然我确实回收了应用程序池。

为评论干杯 - 我将把它作为答案，以防将来有人遇到类似问题。

# iphone - 从 ViewController 返回视图

> ID：15139492
> 
> 赞同：1
> 
> 时间：2013-02-28T15:34:23.380
> 
> 标签：iphone, ios, objective-c, xcode

我有一个返回要显示的视图的函数。当我使用：

```
UIViewController* vcontroller= [storyboard instantiateViewControllerWithIdentifier:@"meterEnlarge"];
return vcontroller.view; 
```

我看风景。但是，当我这样做时：

```
ViewController_Meter_Enlarge_iPad* controller = [[ViewController_Meter_Enlarge_iPad alloc]init];
return controller.view; 
```

我看不到景色。考虑到我需要修改 VC 上的属性，第二个选项对我来说至关重要（当我开始调用 [controller setxyz] 等时）。如何从 VC 返回视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:40:01.693

除非您创建视图控制器并从 NIB 文件初始化它，`view`否则不会设置：

```
- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle 
```

（[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/initWithNibName%3abundle%3a)）

(or manually assign a view to the view controller).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:38:45.397

我认为您希望第一个视图控制器（故事板中的那个）属于您的自定义视图控制器类？在这种情况下，您可以检查从情节提要返回给您的视图控制器的实际类，并在它与您想要的类匹配时进行自定义设置：

```
UIViewController *storyboardVC = 
    [storyboard instantiateViewControllerWithIdentifier:@"meterEnlarge"];

if ([storyboardVC isKindOfClass:[ViewController_Meter_Enlarge_iPad class]]) {
    ViewController_Meter_Enlarge_iPad *customVC = 
        (ViewController_Meter_Enlarge_iPad *)storyboardVC;

    [customVC setXYZ:@"foo"];
} 
```

# jquery - jquery css 不透明度跨浏览器性能

> ID：15139496
> 
> 赞同：0
> 
> 时间：2013-02-28T15:34:32.973
> 
> 标签：jquery, css, performance, cross-browser, opacity

我需要更改 DIV 的不透明度（如果有区别，可能包含图像）。通常人们会使用

```
$('#id1').css('opacity', opacity1);
$('#id2').css('opacity', opacity2);
...
$('#idN').css('opacity', opacityN); 
```

但是如果我有很多 DIV，性能会下降很多，尤其是在 IE 中。所以我的问题是如何提高性能？（跨浏览器解决方案，使用jQuery是可选的）

PS：opacity1,opacity2 等总是不同的，在脚本开头生成。事实上，它们会随着时间而变化……所以使用类可能很困难，对吧？所有 DIV 都已缓存（此处未显示），因此唯一的性能限制步骤是 css.opacity。由于某些原因，我无法按照 Kevin 的建议重新附加父元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T05:43:55.370

据我了解，我认为它可以通过 css 完成，并`jQuery`在需要时替换 ID。您只需对 IE 浏览器使用过滤器，如下所示。

```
#id1 {opacity:0.4; filter:alpha(opacity=40);}
#id2 {opacity:0.6; filter:alpha(opacity=60);}
#id3 {opacity:0.8; filter:alpha(opacity=80);} 
```

# ruby-on-rails - 需要将参数从部分渲染传递到 .html.erb 文件中的 javascript 函数？

> ID：15139501
> 
> 赞同：0
> 
> 时间：2013-02-28T15:34:43.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb

我将只发布文件的相关片段

**index.html.erb**

```
 <%= render "trace/outbound_message", error => @msg_error,:selector => "#ui-accordion-accordion-panel-3", :tab => "ui-id-1" %> 
```

**_outbound_message.html.erb**

```
<% unless error.blank? %>
<%= error.html_safe %>
<script>
    $(function() {
        show_error(<% selector %>,<% tab %>);
    });
</script>
<%end%> 
```

但是这个函数无法成功调用，因为我认为js不理解嵌入的ruby代码。我最快的解决方法是什么？我是否必须调用一个 js.erb 文件，以及如何将参数传递给其中的 & ？

更新我将脚本更改为

```
 <script>
  alert("check-up");
    $(function() {
        show_error(<%= selector %>,<%= tab %>);
    });
   </script> 
```

甚至没有显示警报？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:35:30.853

这个怎么样 ？

```
<script>
alert("check-up");
$(function() {
  show_error(<%= selector.to_json %>,<%= tab.to_json %>);
});
</script> 
```

该`to_json`函数将在缺少的引号之间包装您的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:41:41.047

在如下块中使用 ruby​​ 代码：

**在 Ruby 代码中：**

```
v = "show_error(<%= selector %>,<%= tab %>);" 
```

**在 JavaScript 中：**

```
<script>
    $(function() {

     $(#{v});

    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:41:29.067

我在玩，我想通了。

```
 <%=  javascript_tag( "$(function() {show_error('#{selector}','#{tab}');});")%> 
```

javascript_tag 发挥了至关重要的作用。你不能把它放在...

顺便说一句@Saurabh - 你非常接近答案，不知道为什么有人对你投了反对票。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:08:34.743

我认为问题是你引用！你应该有这样的东西

```
show_error(foo,bar); 
```

你需要类似的东西

```
show_error('foo','bar'); 
```

不要忘记逃避你的 JS ：

```
show_error('<%= escape_javascript(@selector) %>', '<%= escape_javascript(@tab) %>'); 
```

# .net - “指示在 引用内存 “ 错误

> ID：15139511
> 
> 赞同：0
> 
> 时间：2013-02-28T15:35:15.143
> 
> 标签：.net, system-error

我们有一个系统设置，我们的客户可以在其中请求我们为他们提供的关于他们的数据的报告，我们在这些报告中遇到了一些问题。

报告通常处理大量数据，一次可能会运行数小时。我们有大约十几个 .Net 3.5 控制台应用程序，每个报告类型一个，它们以所有正确的参数启动以生成报告。他们唯一的依赖是 MySql.Data.dll。它们都在 Windows Server 2003 SP2 上运行。不针对任何特定类型的报告，我们将收到此弹出错误：

`The instruction at "<address>" referenced memory at "<address>". The memory could not be "<read/written>". Click on OK to terminate the program`

导致这些弹出窗口的进程是单线程的，在弹出窗口时不会占用大量内存，计算机的 RAM 远未满，CPU 使用率通常很高，但不会使计算机达到停止或任何东西。

我找不到这些弹出窗口的任何原因。尽管弹出窗口记录在查看器的系统部分中，但事件查看器的应用程序部分没有行号，也没有例外，并且地址到处都是并且没有显示任何模式或重复（即使他们这样做了我不'认为这没有帮助）。这些程序在无人看管的情况下运行，如果我们发现其中一个弹出窗口，通常会有数百个一个接一个地显示。一旦你点击确定，就会有另一个。我们的报告有时也会成功完成，但不能保证在我们的报告运行时会出现这些错误。此外，在第一个弹出窗口上单击“确定”似乎不会终止程序。

如何防止这些错误发生？我想不出他们有什么理由。如果需要更多信息，我很乐意尽我所能提供帮助。

# css - 悬停时显示工具提示内容

> ID：15139512
> 
> 赞同：2
> 
> 时间：2013-02-28T15:35:15.687
> 
> 标签：css, jquery, tooltip

我将这个[工具提示与 Just CSS 一起](http://sixrevisions.com/css/css-only-tooltips/)使用，这很棒。我正在使用此工具提示来显示大尺寸图像，但问题是，此工具提示使我的网站变慢，因为它用于在网站加载时加载所有图像......所以，我的问题是如何显示工具提示仅在其悬停时内容？因此，当网站加载时，图像不会加载。
我已经按照这篇文章[A little guide about jqueryui tooltip ajax callback](http://html5beta.com/jquery-2/a-little-guide-about-jqueryui-tooltip-ajax-callback/)和这个[jsfiddle](http://jsfiddle.net/tvHT3/)

```
$('#tippy').tooltip({
content: '... waiting on ajax ...',
open: function(evt, ui) {
    var elem = $(this);
    $.ajax('/echo/html').always(function() {
        elem.tooltip('option', 'content', 'Ajax call complete');
     });
}
}); 
```

但无法理解如何在工具提示中使用它......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T17:00:49.703

如果要使用 JQuery 显示/预加载图像，可以`data-*`先将图像 URL 保存在 tooltip 的属性中，并将值显示为`<img>`标签：

```
<a href="#" class="has-tooltip" data-image="http://lorempixel.com/200/200/food/1">link text</a> 
```

jQuery：

```
$(document).ready(function() {
    $('.has-tooltip').hover(function() {
        $(this).find('.tooltip').html('<img src="'+$(this).data('image')+'" alt="loading...">').fadeIn();
    }, function() {
        $(this).find('.tooltip').hide();
    }).append('<span class="tooltip"></span>');
}); 
```

和CSS：

```
.has-tooltip {
  position:relative;
}

.has-tooltip .tooltip {
  display:none;
  padding:10px;
  border:1px solid black;
  background-color:gray;
  position:absolute;
  top:100%;
  left:10%;
  z-index:999;
} 
```

这是一个演示：http: [//jsfiddle.net/tovic/tvHT3/62/](http://jsfiddle.net/tovic/tvHT3/62/)

# javascript - 为什么 != 有效而 = 无效？

> ID：15139513
> 
> 赞同：-4
> 
> 时间：2013-02-28T15:35:22.507
> 
> 标签：javascript

这是我的代码：

```
 if (document.getElementById("hiddenButton").style.visibility != "visible") {
     document.getElementById("hiddenButton").style.visibility = "visible";
  }
  else {
     document.getElementById("hiddenButton").style.visibility = "hidden";

  } 
```

当您单击另一个按钮时，此代码显示和隐藏 HTML 按钮。

但是我的问题是为什么该代码有效，而这无效：

```
 if (document.getElementById("hiddenButton").style.visibility = "hidden") {
     document.getElementById("hiddenButton").style.visibility = "visible";
  }
  else {
     document.getElementById("hiddenButton").style.visibility = "hidden";

  } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-28T15:37:19.767

您的条件实际上是一项任务：

```
if (document.getElementById("hiddenButton").style.visibility = "hidden") { 
```

你应该使用`==`：

```
if (document.getElementById("hiddenButton").style.visibility == "hidden") { 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-28T15:37:16.120

这`=`是一个赋值操作。

是`!=`不等式运算符。

是`==`一个相等运算符。

我想你需要的是`==`运营商。因此，将您的代码替换为：

```
if (document.getElementById("hiddenButton").style.visibility == "hidden") { 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-28T15:38:35.383

[JS 比较运算符](http://www.w3schools.com/js/js_comparisons.asp)

```
==      is equal to 
===     is exactly equal to (value and type)
!=      is not equal 
```

例如：

```
var x = 1;  //define and assigned and now x equal to 1
x = 3;        //now x equal to 3

if( x == 4) {
    //you won't see this alert
    alert('Hello, x is 4 now');
} else {
    //you will see this alert
    alert('Hello, x hasn not been changed and it is still ' + x.toString());
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-28T15:38:52.537

我认为您的问题是您将赋值运算符（ = ）与相等运算符（ == 或 === ）混淆了。赋值运算符将左侧设置为等于右侧的任何内容，而相等运算符（ == 或 === ）实际上测试是否相等。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-28T15:37:24.373

这是因为简单的“=”不是为了比较。请改用“==”。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-28T15:39:09.297

`Left = Right`

这意味着，“无论右侧是什么，都将其作为左侧的值。”

当您只是想检查一个值时，所有比较和其他检查都使用两个符号来限制歧义和不正确的变量分配。

```
!= means not equal to
== means equal
=== means equal and same object/datatype
= means "Assign the right side (Or what it evaluates to) to the variable on the left 
```

# web.xml - 嵌入式 Jetty 服务器类路径问题

> ID：15139514
> 
> 赞同：6
> 
> 时间：2013-02-28T15:35:23.533
> 
> 标签：web.xml, embedded-jetty

我正在尝试在嵌入式 Jetty 服务器上部署 Web 应用程序。我的应用程序使用下面的代码在 Windows 环境中本地运行良好，但是当我将其部署为 Linux 服务器上的 JAR 文件时，看起来我的 web.xml 文件没有被拾取。在构建 JAR 之前，我需要在下面的 Descriptor 或 ResourceBase 字段中进行更改吗？

```
static void startJetty() {
        try {
            Server server = new Server(9090); 
            WebAppContext context = new WebAppContext();
            context.setDescriptor("/WEB-INF/web.xml");                     
            context.setResourceBase("../DemoWithMultiChannels/src/");
            context.setContextPath("/");            
            context.setParentLoaderPriority(true);   
            server.setHandler(context);

            System.out.println("Starting Server!");             
            server.start(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T18:07:05.387

我遇到了同样的问题，刚刚找到了解决方案：
当我从终端运行“java -jar ...”时它工作正常，但是当我从另一个项目中生成它时，web.xml 没有被拾取。

原因是 web.xml 路径错误，它与原始项目相关，我最终做的是：

```
context.setDescriptor(Launch.class.getResource("/WEB-INF/web.xml").toString()); 
```

如果您不使用资源，您只需阅读 src 文件夹中的常规文件，而不是 .jar 中的文件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-08T11:34:54.293

这是如何做到的。

首先，在您的 pom.xml 中，声明 webapp 文件夹的位置：

```
 <build>
    <resources>
       <resource>
            <directory>src/main</directory>
       </resource>
    </resources> 
```

这是我的 src/main 目录的树：

```
├── java
│   └── com
│       └── myco
│           └── myapp
│               └── worker
│                   ├── App.java
|                    ...
├── resources
│   ├── log4j.properties
│   └── version.properties
└── webapp
    ├── index.html
    ├── index.jsp
    ├── lib
    │   ├── inc_meta.jsp
    │   └── inc_navigation.jsp
    ├── query.html
    ├── scripts
    │   ├── angular.min.js
    │   └── bootstrap.min.css
    ├── showresults.jsp
    ├── status.jsp
    └── WEB-INF
        └── web.xml 
```

在 pom.xml 文件中添加 Maven Shade 插件：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                 <finalName>uber-${artifactId}-${version}/finalName>                            
            </configuration>                                        
        </plugin> 
```

然后像这样启动 Jetty：

```
public static void startJetty() throws Exception {
    logger.info("starting Jetty...");

    Server server = new Server(8080);
    WebAppContext webAppContext = new WebAppContext();
    webAppContext.setContextPath("/");

    /* Important: Use getResource */
    String webxmlLocation = App.class.getResource("/webapp/WEB-INF/web.xml").toString();
    webAppContext.setDescriptor(webxmlLocation);

    /* Important: Use getResource */
    String resLocation = App.class.getResource("/webapp").toString();
    webAppContext.setResourceBase(resLocation);

    webAppContext.setParentLoaderPriority(true);

    server.setHandler(webAppContext);

    server.start();
    server.join();
} 
```

重要的部分是使用`<YourApp>.class.getResource(<your location>)`它将提供 jar 内文件的路径。错误的方法是这样做：`webContext.setDescriptor("WEB-INF/web.xml");`它给出了文件系统上的路径。

然后创建包

```
$mvn clean package 
```

生成 uber-jar 文件并包含声明为资源的 webapp 目录。

将 jar 移动到任何地方或生产服务器上并像这样运行它：

```
$ java -jar myjettyembededwithwebxmlandhtmljspfile.jar 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T10:16:05.033

部署嵌入式 Jetty 如下：

# 主班

```
public static void main(String[] args) throws Exception {
   Server server = new Server(8085);         

    WebAppContext webContext = new WebAppContext();
    webContext.setDescriptor("WEB-INF/web.xml");
    webContext.setResourceBase("src/sim/ai/server/start");      
    webContext.setServer(server);
    webContext.setParentLoaderPriority(true);
    server.setHandler(webContext);

    server.start();
    server.join();
} 
```

# web.xml

```
<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">
<web-app>
    <display-name>sim.ai.server.start</display-name>
    <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>
        com.sun.jersey.spi.container.servlet.ServletContainer
        </servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>sim.ai.server.start</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
      <servlet-name>Jersey REST Service</servlet-name>
      <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

`WEB_INF`在与jar文件相同的文件夹中创建一个文件夹；复制`web.xml`到`WEB_INF`，如：

```
sim/light.jar
sim/WEB-INF/web.xml 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T17:05:33.320

我已经用可以在类路径中找到资源的特定后代替换了 WebAppContext 和 WebXmlConfiguration：

服务器：[https ://github.com/jreznot/diy-remote/blob/master/server/src/org/strangeway/diyremote/server/RemoteServer.java](https://github.com/jreznot/diy-remote/blob/master/server/src/org/strangeway/diyremote/server/RemoteServer.java)

WebAppContex：[https ://github.com/jreznot/diy-remote/blob/master/server/src/org/strangeway/diyremote/server/sys/ClasspathWebAppContext.java](https://github.com/jreznot/diy-remote/blob/master/server/src/org/strangeway/diyremote/server/sys/ClasspathWebAppContext.java)

WebXmlConfiguration：[https ://github.com/jreznot/diy-remote/blob/master/server/src/org/strangeway/diyremote/server/sys/ClasspathWebXmlConfiguration.java](https://github.com/jreznot/diy-remote/blob/master/server/src/org/strangeway/diyremote/server/sys/ClasspathWebXmlConfiguration.java)

它对我有用

# facebook - Facebook SDK 登录 URL 暴露客户端密码？

> ID：15139516
> 
> 赞同：1
> 
> 时间：2013-02-28T15:35:27.740
> 
> 标签：facebook, facebook-c#-sdk

我目前正在构建一个网站，我将为用户提供一个在 Facebook 上分享照片的链接，应用程序将：

*   向用户提供从 Facebook 请求权限的链接
*   使用用户接受权限后的访问代码重定向回网站
*   服务器端发布照片到用户的照片

为了生成第一步的链接，我这样做：

```
var fb = new FacebookClient();
var options = new
{
    client_id = "MY_APP_ID",
    client_secret = "MY_APP_SECRET",
    redirect_uri = string.Format("http://localhost:51182/Home/FacebookShare?path={0}", Server.UrlEncode(path)),
    response_type = "code",
    scope = "publish_stream"
};
var loginUrl = fb.GetLoginUrl(options); 
```

然后将此`loginUrl`值添加到我的 MVC ViewModel 并在 View 中的链接中使用。

但是，我注意到`loginUrl`包含`client_secret`明文中的值。这不是一件坏事吗？用户*不*应该看不到`client_secret`吗？我是不是走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:44:14.273

该`fb.GetLoginUrl`方法相当简单，因为它只是将您在`options`对象中提供的任何内容作为参数添加到创建的 URL。

所以拿

```
client_secret = "MY_APP_SECRET", 
```

超出您的`options`对象，并且它不应再显示在登录 URL 中。

# javascript - 如何从列表框列表项中获取价值

> ID：15139517
> 
> 赞同：1
> 
> 时间：2013-02-28T15:35:34.423
> 
> 标签：javascript, firefox-addon

在我的 Firefox 插件中，我有一个`<listbox>`. 当我左键单击框中的项目时，我希望能够使用 javascript 函数。该函数应检索项目的文本值。

现在，当我单击 a 时，我的函数*会*`listitem`被调用，因为我已将它放在事件侦听器的 onLoad 调用中：

```
 var myListBox = document.getElementById("myListBoxID");
    myListBox.addEventListener("click", function(event){
        var target = event.target;
        while (target && target.localName != "listitem"){
            target = target.parentNode;
        }
        if (!target){
            return;   // Event target isn't a list item
        }
        alert(target);                                  //returns blank
        alert(target.id);                               //returns blank
        alert(target.getAttribute("value"));        //returns blank
        alert(target.getAttribute("text"));     //returns blank
        alert(target.getAttribute("id"));           //returns blank

        var targetid = document.getElementById(target.id);
        alert(targetid);                                //returns null
    }, false);      
}, 
```

xul 是这样的：

```
<listbox id="listbox1">
    <listcols /><listcol flex="1"/><listcol flex="1"/></listcols>
    <listitem><listcell class="column1" label="label1" value="value1"</listcell><listcell label="cell1"></listcell></listitem>
    <listitem><listcell class="column2" label="label2" value="value2"</listcell></listitem><listcell label="cell2"></listcell>
</listbox> 
```

但是，我无法让它显示项目的文本。如您在上面看到的，我似乎没有正确处理`target`

我从这里[得到了原始代码，并](https://stackoverflow.com/questions/8840919/how-to-react-on-listitem-double-click-and-to-add-context-menu-for-each-listitem/8847382#comment21149507_8847382)[在`EventListener`这里工作](https://stackoverflow.com/questions/15127445/attach-function-to-left-click-on-listbox-item)。

**如何获取列表单元的值？我什么都试过了！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:46:45.267

您正在使用此代码：

```
while (target && target.localName != "listitem"){
    target = target.parentNode;
} 
```

它会从寻找`<listitem>`标签的实际点击目标上升。然而文本没有存储在`<listitem>`标签中，它在`<listcell>`- 所以你应该在层次结构中寻找那个：

```
while (target && target.localName != "listcell"){
    target = target.parentNode;
}
alert(target.getAttribute("value")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:25:28.197

您无法`click`仅在 a 上检测 a `listcell`。最接近的方法是检测 a`click`上的 a `listitem`。之后，您必须使用代码进行深入研究。

所以，`.childNode`在你的目标上使用。由于您的 中只有两个`listcell`s `listitem`，因此如果您要捕获第二个单元格，请使用`childNodes[1]`. `childNodes[0] 将引用第一个单元格。

```
onLoad: function(){
    var mylistbox= document.getElementById("mylistboxID");
    mylistbox.addEventListener("click", function(event){
        var target = event.target.childNodes[1];
        if (!target){
            return;   // In case there is not target
        }
        alert(target.getAttribute("label") + target.getAttribute("label"));
    }, false);      
}, 
```

# css - 资源 FullCalendar 中的固定列宽

> ID：15139527
> 
> 赞同：4
> 
> 时间：2013-02-28T15:36:04.300
> 
> 标签：css, fullcalendar

我正在使用支持资源视图的特殊版本的 FullCalendar。 [http://tux.fi/~jarnok/fullcalendar-resourceviews/](http://tux.fi/~jarnok/fullcalendar-resourceviews/)

我只有几个问题。它似乎自动设置列宽，我认为应用这种地址：

```
.fc-widget-header
{
    width:100px;
}
.fc-widget-content
{
    width:100px;
}
.fc-resourceName
{
    background-color:aliceblue;
    width:150px;
} 
```

然后 html 写入单元格的宽度为 100px，但它仍在尝试自动适应所有内容。

我想要它做的是如果它太大，h-scroll，但我总是希望每个单元格正好是 100px。

我有这种滚动风格：

```
#calendar
{
    overflow-x:auto;
} 
```

但是这些元素仍然根据日期显示为可变宽度。这是它的样子：

![在此处输入代码](../Images/501f743e9c9e611aa1c560ea32de29b1.png)

显然，我的每一列都不是我要求的 100px，资源列也不是要求的 150px。我该怎么做才能获得想要的外观？

另一个问题是没有为新的一周定义课程。我真的很想将第 X 周的列显示为不同的颜色。

对其中任何一个的任何见解都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:41:22.413

我想我以前遇到过这个问题，把这条线放在我的日历表上对我有用。

`#calendar table { table-layout: fixed; }`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-03T22:11:44.463

对于在**垂直资源视图**中搜索解决方案的任何人，这对我有帮助：

```
.fc table{
    table-layout: auto;
}
.fc-view > table{  
    min-width: 0;
    width: auto;
}
.fc-axis{
    min-width:100px; /*the width of times column*/
    width:100px; /*the width of times column*/
}
.fc-day,.fc-resource-cell,.fc-content-col{
    min-width:300px;
    width:300px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-03T19:25:00.357

我知道我的解决方案不相关，但感谢“overflow-x:auto;” 这帮助我解决了我的问题。

这适用于我在议程视图中使用原始 fullCalendar + Scheduler 在垂直视图中使用列资源，[如下所示](https://fullcalendar.io/js/fullcalendar-scheduler-1.6.2/demos/vertical-resource-view.html)：

```
@media (min-width: 1170px) {
    div.fc-view.fc-agendaDay-view.fc-agenda-view table {
        max-width: 100%;
    }
}
@media (max-width: 1170px) {
    div.fc-view-container {
        overflow-x: scroll;
    }
    div.fc-view.fc-agendaDay-view.fc-agenda-view table {
        min-width: 1170px;
    }
} 
```

这样，它使用原始最小宽度设置为 120px 的列，是响应式的，但使用滚动来获得额外的大小，因此它在小型设备上看起来更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-24T09:38:10.640

放

```
$('#calendar').fullCalendar({
 contentHeight: 'auto',
                aspectRation: 1.35,
}) 
```

这解决了你的问题

# javascript - phonegap - cross platform way of getting default music folders on smartphones

> ID：15139531
> 
> 赞同：2
> 
> 时间：2013-02-28T15:36:14.627
> 
> 标签：javascript, html, cordova

im trying to get the default music folders for all phonegap supported platforms. basically i can download and save file on the sdcard using the function below. but i want to add code to detect platform and give me default music folders for platform so as i can save mp3 file there.

```
 function downloadFile(remoteloc,new_name,userid,mid,errorbox,origname)
{
    window.requestFileSystem(
    LocalFileSystem.PERSISTENT, 0, 
    function onFileSystemSuccess(fileSystem) {
        fileSystem.root.getFile(
        "dummy.html", {create: true, exclusive: false}, 
        function gotFileEntry(fileEntry) {
            var sPath = fileEntry.fullPath.replace("dummy.html","");
            var fileTransfer = new FileTransfer();
            fileEntry.remove();
            $('#'+errorbox).html("<div>"+origname+"</div><div class=\"progress progress-danger progress-striped\"><div id='id_p' class=\"bar\" style=\"width: 5%\"></div></div>");
            fileTransfer.onprogress = function(progressEvent) 
            { 
                if (progressEvent.lengthComputable) { 
                    $('#id_p').css('width',Math.ceil((progressEvent.loaded / progressEvent.total)*100)+"%"); 
                } else { 

                } 
            }
            fileTransfer.download(
            remoteloc,
            sPath + new_name,
            function(theFile) {
                $('#'+errorbox).html("<div>"+origname+"</div><div class=\"alert alert-info fade in\"><button class=\"close\" data-dismiss=\"alert\"><span class=\"awe-remove-circle\"></span></button>Download Complete. Added to Media Player</div>"
                +"<div><a href='"+theFile.toURI()+"' target='_blank' class=\"btn btn-success\">Play Song</a></div>"+"<br/>"+theFile.toURI());
                //update the database field to show file has been transfered
                if (!isOnline()) 
                    {
                    $('#error_box').html("<div class=\"alert alert-error fade in\"><button class=\"close\" data-dismiss=\"alert\"><span class=\"awe-remove-circle\"></span></button>Sorry but you seem to be offline.</div>");    
                    return;
                }
                var request={'controller':'music','action':'updatedownload','userid':userid,'mid':mid};
                queryAPI(request,function (d){
                    //check result and set local storage variables
                    if (d.success>0)
                        {
                    } else
                        {

                    }   
                    localStorage.removeItem('resume');
                    window.key=false;
                    //setTimeout(function () {$('#'+errorbox).html("<div>"+origname+"</div>");},3000);
                });             
            },
            function(error) {
                $('#'+errorbox).html("<div>"+origname+"</div><div class=\"alert alert-error fade in\"><button class=\"close\" data-dismiss=\"alert\"><span class=\"awe-remove-circle\"></span></button>Download Error! Error code:"+error.code+"</div>");
            }
            );
        }, 
        fail);
    },
    fail);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:03:03.697

Because of major platform differences, there isn't a "one time `getDirectory` call" solution to do this. The best way to handle this is to do a check for the platform you're currently running and write the file based on that.

```
var platform = device.platform;
switch(platform)
{
    case 'iPhone':
      //save to the app document folder
      break;
    case 'Android':
      //save to <external_storage_root>/Music
      break;
    case 'BlackBerry':
      //Save to /SDCard/BlackBerry
      break;
} 
```

Be sure to check official documentation for the right file path's etc.

Also take note that while `/var/root/Media/iTunes_Control/Music` is sometimes mentioned as the default folder for music on iOS, it's managed by iTunes so it can be modified at any time and is only useful for temporary storage if it can be accessed at all. Using the documents folder is the prefered method.

# regex - 将 mysql 'INSERT' 语句转换为 CSV 行

> ID：15139536
> 
> 赞同：0
> 
> 时间：2013-02-28T15:36:29.377
> 
> 标签：regex, shell, scripting, sed

在导入数据仓库服务器之前，我需要将 mysql 转储文件转换为 CSV 格式。

```
 INSERT INTO `temp` VALUES (30686631,1346959848246,1346959850865,1346959998054,'18663196147','18663196147','18668839208','17326812123',3372579,'1866319614700','A',1,'','',0,147,30686632,'KeyAd','1101','38.325.Monitor2.1101@10.40.10.170','10.40.10.40',5060,'10.40.10.46',5060,'100038455383251101_Monitor2@10.40.10.170','<sip:+18668839208@10.40.10.46:5060>;tag=sansay507370834rdb810','\"O\'HALLORAE,AEAN\"  <sip:+17326812123@10.40.10.40;isup-oli=00>;tag=sansay507370829rdb1779','200',0,'',0,NULL,'','',3398812,NULL,NULL); 
```

我正在使用此命令删除 mysql insert 语句

```
sed -e 's/^INSERT INTO `temp` VALUES (//' -e 's/);$//' -e  's/(//;s/);//;s/,/|/g;s|["'\'']||g' 
```

当名称出现在两个斜杠 \ \ 之间时，它们似乎存在问题，我不知道如何解决它。

从 MySQL 插入

```
'\"O\'HALLORAE,AEAN\" 
```

无法弄清楚如何形成输出

```
"O'HALLORAN,SEAN" 
```

期望的输出：

```
30686631|1346959848246|1346959850865|1346959998054|18663196147|18663196147|18668839208|17326812123|3372579|1866319614700|A|1|||0|147|30686632|KeyAd|1101|38.325.Monitor2.1101@10.40.10.170|10.40.10.40|5060|10.40.10.46|5060|100038455383251101_Monitor2@10.40.10.170|<sip:+18668839208@10.40.10.46:5060>;tag=sansay507370834rdb810| "O'HALLORAN,SEAN"  <sip:+17326812123@10.40.10.40;isup-oli=00>;tag=sansay507370829rdb1779|200|0||0|NULL|||3398812|NULL|NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:52:31.913

试试这个：

```
$ sed -e 's/INSERT INTO `temp` VALUES (//' -e 's/);$//' -re 's/("[^"]*),([^"]*")/\1\x1\2/g;s/,/|/g;s/\x1/,/g;s/\\([^\])/\1/g' file | sed "s/'|/|/g;s/|'/|/g" 
```

输出：

```
30686631|1346959848246|1346959850865|1346959998054|18663196147|18663196147|18668839208|17326812123|3372579|1866319614700|A|1|||0|147|30686632|KeyAd|1101|38.325.Monitor2.1101@10.40.10.170|10.40.10.40|5060|10.40.10.46|5060|100038455383251101_Monitor2@10.40.10.170|<sip:+18668839208@10.40.10.46:5060>;tag=sansay507370834rdb810|"O'HALLORAN,SEAN"  <sip:+17326812123@10.40.10.40;isup-oli=00>;tag=sansay507370829rdb1779|200|0||0|NULL|||3398812|NULL|NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:23:26.813

如果 ruby​​ 对您来说是一个可接受的依赖项，那么如果您可以将语句转换为有效的 ruby​​ 数组，则可以利用它的解析器：

`script.sh`：

```
#!/bin/bash

# -r to preserve backslashes
read -r statement

ruby=$(echo -n $statement | sed -e 's/^.*VALUES //' -e 's/;$//' -e 's/^(/[/' -e 's/)$/]/' -e 's/NULL/"NULL"/g' -e 's/\\"/"/g')
echo $ruby | ruby -rcsv -e 'puts CSV.generate_line(eval($stdin.read), "|")' 
```

用法：

```
chmod +x script.sh
echo <your statement> | ./script.sh

30686631|1346959848246|1346959850865|1346959998054|18663196147|18663196147|18668839208|17326812123|3372579|1866319614700|A|1|""|""|0|147|30686632|KeyAd|1101|38.325.Monitor2.1101@10.40.10.170|10.40.10.40|5060|10.40.10.46|5060|100038455383251101_Monitor2@10.40.10.170|<sip:+18668839208@10.40.10.46:5060>;tag=sansay507370834rdb810|"""O'HALLORAE,AEAN"" <sip:+17326812123@10.40.10.40;isup-oli=00>;tag=sansay507370829rdb1779"|200|0|""|0|NULL|""|""|3398812|NULL|NULL 
```

这在 openoffice 上按预期加载（在将分隔符设置为“|”之后）

# c# - Google Analytics API 400 错误请求

> ID：15139538
> 
> 赞同：1
> 
> 时间：2013-02-28T15:36:33.067
> 
> 标签：c#, google-api, google-analytics-api, http-status-code-400

我想从 Google Analytics 导入数据。

```
var gas = new AnalyticsService(auth);

var r = gas.Data.Ga.Get("ga:6332XXXX", "2013-02-01", "2013-02-11", "ga:visits");

r.Dimensions = "ga:date";
r.Sort = "ga:visits";
r.StartIndex = 1;

var data = r.Fetch(); 
```

我在 Fetch 方法中收到 400 错误请求错误。我的代码有什么问题？

我的完整代码如下：

```
var scope = AnalyticsService.Scopes.AnalyticsReadonly.ToString();
var clientId = "--------.apps.googleusercontent.com";
var keyFile = @"C:\-----------------privatekey.p12";
var keyPassword = "notasecret";

var desc = GoogleAuthenticationServer.Description;

var key = new X509Certificate2(keyFile, keyPassword, X509KeyStorageFlags.Exportable);

var client = new AssertionFlowClient(desc, key)
{
    ServiceAccountId = clientId,
    Scope = scope
};

var auth = new OAuth2Authenticator<AssertionFlowClient>(client, AssertionFlowClient.GetState);

var gas = new AnalyticsService(auth);

var r = gas.Data.Ga.Get("ga:6332XXXX", "2013-02-01", "2013-02-11", "ga:visits");

r.Dimensions = "ga:date";
r.Sort = "ga:visits";
r.StartIndex = 1;

var data = r.Fetch(); 
```

谢谢你的兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T05:25:10.370

几个想法：

1.  您的 clientId 应该是您的服务帐户电子邮件（不是 id）
2.  你的范围应该是“ [https://www.googleapis.com/auth/analytics.readonly](https://www.googleapis.com/auth/analytics.readonly) ”

如果这不起作用，请检查[@Martyn 的答案](https://stackoverflow.com/a/17016863/3661)

# python - 适用于类方法和实例方法的装饰器

> ID：15139541
> 
> 赞同：1
> 
> 时间：2013-02-28T15:36:38.433
> 
> 标签：python, decorator, python-decorators, class-method, instance-methods

我有两个装饰器，定义如下，它们都做同样的事情：

```
# ONLY WORKS FOR CLASSMETHODS
def paginated_class_method(default_page_size=25):
    def wrap(func):
        @functools.wraps(func)
        def inner(cls, page=1, page_size=default_page_size, *args, **kwargs):
            objects = func(cls=cls, *args, **kwargs)
            return _paginate(objects, page, page_size)
        return inner
    return wrap

# ONLY WORKS FOR INSTANCEMETHODS
def paginated_instance_method(default_page_size=25):
    def wrap(func):
        @functools.wraps(func)
        def inner(self, page=1, page_size=default_page_size, *args, **kwargs):
            objects = func(self=self, *args, **kwargs)
            return _paginate(objects, page, page_size)
        return inner
    return wrap 
```

我有两个的原因是因为对于类方法我需要将第一个 arg 作为 cls=cls 传递，例如方法我需要传递 self=self。但这显然并不理想。有谁知道构造一个适用于实例方法和类方法的装饰器的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:41:35.770

只需传入`cls`or`self`作为第一个位置参数，*不需要*将它们作为关键字参数传递：

```
def paginated_class_method(default_page_size=25):
    def wrap(func):
        @functools.wraps(func)
        def inner(self_or_cls, page=1, page_size=default_page_size, *args, **kwargs):
            objects = func(self_or_cls, *args, **kwargs)
            return _paginate(objects, page, page_size)
        return inner
    return wrap 
```

# perl - 为什么 Perl 的 sub 需要 &

> ID：15139542
> 
> 赞同：3
> 
> 时间：2013-02-28T15:36:48.357
> 
> 标签：perl, compiler-errors, subroutine, reserved-words

以下文件无法编译：

```
sub s {
    return 'foo';
}
sub foo {
    my $s = s();
    return $s if $s;
    return 'baz?';
} 
```

来自的错误`perl -c`是：

```
syntax error at foobar.pl line 5 near "return"
  (Might be a runaway multi-line ;; string starting on line 3)
foobar.pl had compilation errors. 
```

但是如果我`s()`用它代替`&s()`它就可以了。你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T15:41:32.257

& 前缀明确表示你想调用你自己的名为“s”的函数，而不是任何具有相同名称的内置函数。在这种情况下，它对于替换运算符（如`$stuff =~ s///;`，也可以写成`s()()`）感到困惑。

这[是 PerlMonks 关于 & 符号的讨论](http://www.perlmonks.org/?node_id=428024)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T16:03:16.097

正如已经指出的那样，您遇到的问题是`s()`被解释为`s///`替换运算符。用 & 号作为函数名称的前缀是一种解决方法，尽管我不会说一定是正确的。在[perldoc perlsub](http://perldoc.perl.org/perlsub.html)中，关于调用子例程的内容如下：

```
NAME(LIST);  # & is optional with parentheses.
NAME LIST;   # Parentheses optional if predeclared/imported.
&NAME(LIST); # Circumvent prototypes.
&NAME;       # Makes current @_ visible to called subroutine. 
```

& 符号在这里所做的只是区分内置函数和您自己的函数。

处理这个问题的“正确”方法，除了重命名你的子程序，是要了解表面下发生了什么。当你说

```
s(); 
```

你真正想说的是

```
CORE::s(); 
```

当你的意思是

```
main::s(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T16:03:16.427

```
 my $s = 's'->(); 
```

也可以工作——奇怪的是`strict`on。

# django - 使用多个实例编辑 inlineformset_factory

> ID：15139546
> 
> 赞同：0
> 
> 时间：2013-02-28T15:37:04.877
> 
> 标签：django, inline-formset

我有一个内联表单集，其中 extra=24 是一天中的几个小时。添加新条目和保存我没有任何问题

```
OreSommInlineFormSet = inlineformset_factory(FarmacoGiornaliero, OreSomministrazione, 
                                             form=OreForm,  fields=('ore','farmaco', 'quantita'), 
                                             extra=24, can_delete=False)        

myospite = Ospite.objects.filter(cognome=cognome).filter(nome=nome)[0]                 

if request.method == 'POST':                       

    form = GiornalieroForm(request.POST)
    formset = OreSommInlineFormSet(request.POST, prefix='formset')

    if form.is_valid() and formset.is_valid():                           

        giornaliero=form.save(commit=True)      

        for form in formset.forms:
            ora = form.save(commit=False)
            ora.farmaco = giornaliero
            ora.ospite = myospite               
            ora.save() 
```

我试图弄清楚如何编辑和保存表单集的数据。我有一个查询集，它返回 24 个 OreFarmaco 实例，它应该填充表单集，但带有 instance 关键字的表单集本身只能预见一个实例。

OreSommInlineFormSet = inlineformset_factory(FarmacoGiornaliero, OreSomministrazione, form=OreForm, fields=('ore', 'quantita'), extra=24, can_delete=False)

```
myospite = Ospite.objects.filter(cognome=cognome).filter(nome=nome)[0]

locfarmaco = Farmaco.objects.filter(farmaco=farmaco)[0]

giornaliero = FarmacoGiornaliero.objects.select_related() \
            .filter(ospite=myospite) \
            .filter(farmaco=locfarmaco)[0]

orefarmaco = OreSomministrazione.objects.select_related().filter(farmaco=giornaliero).filter(ospite=myospite)           

if request.method == "POST":                      

        form = GiornalieroForm(request.POST, instance=giornaliero)                     

        formset = OreSommInlineFormSet(request.POST, prefix='formset', instance=orefarmaco[0])

        if form.is_valid() and formset.is_valid():                                                             

            giornaliero=form.save(commit=True)   
            formset.save() 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:46:01.483

```
//try to rewrite this codes it's complicated. Use get() instead
myospite = Ospite.objects.filter(cognome=cognome).filter(nome=nome)[0]
locfarmaco = Farmaco.objects.filter(farmaco=farmaco)[0]
giornaliero = FarmacoGiornaliero.objects.select_related() \
        .filter(ospite=myospite) \
        .filter(farmaco=locfarmaco)[0]
//

if request.method == "POST":                      
    form = GiornalieroForm(request.POST, instance=giornaliero)                     
    if form.is_valid():  
        gio = form.save(commit=True)                                                           
        formset = OreSommInlineFormSet(request.POST, instance=gio)
        if formset.is_valid()
            gio.save()   
            formset.save() 
```

# powershell - 以 PowerShell 对象表示法 (PSON) 保存哈希表

> ID：15139552
> 
> 赞同：17
> 
> 时间：2013-02-28T15:37:17.033
> 
> 标签：powershell, serialization, expression, powershell-2.0

[从文件加载 PowerShell 哈希表](https://stackoverflow.com/questions/10743892/loading-a-powershell-hashtable-from-a-file)的问题？文档如何将包含 PSON 格式的哈希表的文件加载到变量中，但是如何将哈希表保存到 PSON 格式的文件中？

哈希表：

```
@{            
 "name" = "report 0"            
 "parameters" = @(
    @{"name" = "parameter 0"; "default" = 1; "values"=1,2,3,4},
    @{"name" = "parameter 1"; "default" = 'A'; "values" = 'A','B','C'}
    )            
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-20T19:49:55.003

5 年后，我粘贴在原始答案中的 cmdlet 经历了如此多的更新，以至于它已经完全过时了。因此，我用最新版本的链接替换了[代码](https://github.com/iRon7/ConvertTo-Expression/blob/master/ConvertTo-Expression.ps1)和[自述文件。](https://github.com/iRon7/ConvertTo-Expression/blob/master/README.md)

除了支持更多的对象类型和更好的格式之外，它现在输出一个表达式 ( `ScriptBlock`)，其默认显示类型仍然是 a`String`并允许使用调用运算符直接调用[`&`](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_operators?view=powershell-6#call-operator-)：

```
$Object = &($Object | ConverTo-Expression) 
```

## [转换为表达式](https://www.powershellgallery.com/packages/Join)

`ConvertTo-Expression`可以使用以下命令从 PowerShell 库下载 cmdlet ：

```
Install-Script -Name ConvertTo-Expression 
```

## [自述文件](https://github.com/iRon7/Join-Object)

完整的自述文件（和源代码）可从 GitHub 获得：
[https ://github.com/iRon7/ConvertTo-Expression](https://github.com/iRon7/ConvertTo-Expression)

## 安装

下载后（`Install-Script -Name ConvertTo-Expression`），脚本可以简单地通过[**点源**](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_scripts?view=powershell-6#script-scope-and-dot-sourcing)调用：

```
. .\ConvertTo-Expression.ps1 
```

您还可以考虑通过将脚本重命名为 PowerShell 模块 ( **`.psm1`**) 文件并将其移动到`$env:PSModulePath`. 有关更多详细信息，请参阅：[如何编写 PowerShell 脚本模块](https://docs.microsoft.com/powershell/developer/module/how-to-write-a-powershell-script-module)。

## 回答

以下是序列化问题中特定示例（分配给`$Craig`）的一些可能选项：

```
ConvertTo-Expression $Craig
@{
    parameters =
        @{
            name = 'parameter 0'
            default = 1
            values =
                1,
                2,
                3,
                4
        },
        @{
            name = 'parameter 1'
            default = 'A'
            values =
                'A',
                'B',
                'C'
        }
    name = 'report 0'
} 
```

**限制树视图扩展：（**
[将`Expand -0`输出一行并`Expand -1`删除不必要的空格）]

```
ConvertTo-Expression $Craig -expand 3
@{
    parameters =
        @{name = 'parameter 0'; default = 1; values = 1, 2, 3, 4},
        @{name = 'parameter 1'; default = 'A'; values = 'A', 'B', 'C'}
    name = 'report 0'
} 
```

**保留显式类型（强类型）：**

```
ConvertTo-Expression $Craig -expand 3 -Strong
[hashtable]@{
    parameters = [array](
        [hashtable]@{name = [string]'parameter 0'; default = [int]1; values = [array]([int]1, [int]2, [int]3, [int]4)},
        [hashtable]@{name = [string]'parameter 1'; default = [string]'A'; values = [array]([string]'A', [string]'B', [string]'C')}
    )
    name = [string]'report 0'
} 
```

[（注意：根据 PowerShell 设计，HashTables 不是按顺序排列的，但如果需要，您可以改用该`[Ordered]`类型。）]

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-28T16:00:49.903

尝试`*-CliXml`cmdlet。要保存对象：

```
@{            
 "name" = "report 0"            
 "parameters" = @(
    @{"name" = "parameter 0"; "default" = 1; "values"=1,2,3,4},
    @{"name" = "parameter 1"; "default" = 'A'; "values" = 'A','B','C'}
    )            
} | Export-Clixml -Path c:\hash.xml 
```

读回来：

```
Import-Clixml c:\hash.xml 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T16:18:29.510

一种方法是将哈希表定义放在脚本块中：

```
$hashtable = {
  @{            
    "name" = "report 0"            
    "parameters" = @(
        @{"name" = "parameter 0"; "default" = 1; "values"=1,2,3,4},
        @{"name" = "parameter 1"; "default" = 'A'; "values" = 'A','B','C'}
        )            
    }
}

$hashtable.tostring() 
```

@{
"name" = "report 0"
"parameters" = @( @{"name" = "parameter 0"; "default" = 1; "values"=1,2,3,4}, @{"name " = "参数 1"; "默认" = 'A'; "值" = 'A','B','C'})
}

在脚本中，您需要调用脚本块来实例化哈希表：

```
$hash = .$hashtable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-15T10:46:57.413

如何使用速记“对象表示法”在 PowerShell 中生成对象：

```
$object = New-Object -TypeName PSObject -Property @{name="foo";age=21} 
```

免责声明：我知道这不能直接回答 OP 的问题，但它可能会帮助像我这样的人搜索一个非常相似的问题并登陆这里。

# system-verilog - SystemVerilog：使用带有类和虚拟接口的包

> ID：15139558
> 
> 赞同：2
> 
> 时间：2013-02-28T15:37:31.540
> 
> 标签：system-verilog

我是 SystemVerilog 的相对新手。

我有一个包，其中定义了 A 类。此类使用虚拟接口，因为它是测试台中的驱动程序 (BFM)。我正在使用一个包，所以我可以在其他设计中使用相同的 BFM。

在我的测试台中，我导入 A 类并将虚拟接口的实例传递给它。但是，当类中的任务尝试为接口中的信号分配值时，我收到编译错误。

我究竟做错了什么？如何将 BFM 与虚拟接口打包在一起？

谢谢，冉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:24:10.657

SystemVerilog 包不能在实际包中包含接口。所以你的接口需要和你的包源一起编译。您定义的类将驻留在包中，而接口定义驻留在模块所在的全局范围内。

包中的类可以引用虚拟接口，但除了包源之外，您需要确保接口已编译且可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:23:24.757

严格按照规范，我认为这是不可能的，因为它添加了隐式的外部依赖：

> 包中的项目通常是类型定义、任务和函数。包中的项目不应具有对标识符的分层引用，除非在包中创建或通过导入另一个包使其可见。包不应引用在编译单元范围内定义的项目。

它没有说明设计元素命名空间，这是接口声明所在的位置，但访问接口的任何成员都需要分层引用。

除了预处理器指令和`import`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-25T06:13:05.340

通常，在 systemverilog typedef 定义的帮助下解决使用之前不存在的类声明。例如“A 类使用 B 类”和“B 类使用 A 类”然后 typedef 用于解决僵局。

现在，当您使用上述情况引入包裹时，需要确保 A 类和 B 类必须在同一个包裹中。如果它们不是，那么编译将不会通过。

原因是 SystemVerilog 解析器将需要在包解析结束时使用 typedef 指示的类的定义。这失败了。

这个问题需要注意“typedef 不适用于跨包”。

# php - 无法弄清楚如何追踪 $.ajax/PHP/MySQL 插入中的错误

> ID：15139559
> 
> 赞同：2
> 
> 时间：2013-02-28T15:37:32.957
> 
> 标签：php, ajax, mysqli, syntax-error

我很难追踪 $.ajax/PHP/MySQL 数据库插入错误的原因。

这是jQuery方面：

```
function SaveNewBranch(newBranchName, dataString) {
    console.log('In function SaveNewBranch(newBranchName, dataString). Value of
        newBranchName: ' + newBranchName + '. Value of dataString: ' + 
        dataString + '.');

    $.ajax({
        type: 'POST',
        url: '../scripts/branchAdmin.php',
        data: dataString,
        dataType: 'json',
        success: function(newBranchID) {

            console.log('from server: ' . newBranchID);

            // Clear the page
            ClearPageForNewSelection();

            PopulateBranchDropdown(newBranchID);
        },
        error: function(xhr, status, error) {
            console.log('datastring: ' + dataString);
            alert('An error occurred while attempting to save the branch to the 
                database. jqXHR object: ' + xhr + '. Status: ' + status + '. Error
                message: ' + error + '. An error log with more details has been
                created on the server. If the error persists, contact your site
                administrator.');
        }
    });
} // End Save New Branch 
```

这是PHP代码：

```
if(isset($_POST['newBranchName']) &&
    isset($_POST['newBranchAddr1']) &&
    isset($_POST['newBranchAddr2']) &&
    isset($_POST['newBranchCity']) &&
    isset($_POST['newBranchState']) &&
    isset($_POST['newBranchZip']) &&
    isset($_POST['newBranchPhone']) &&
    isset($_POST['newBranchFax']) &&
    isset($_POST['newBranchUrl'])) {

    require_once('dbConnect.php');

    $log->lwrite('name: ' . mysqli_real_escape_string($dbc,$_POST['newBranchName']) .
        ', addr1: ' . mysqli_real_escape_string($dbc,$_POST['newBranchAddr1']) . ',
        addr2: ' .  mysqli_real_escape_string($dbc,$_POST['newBranchAddr2']) . ',
        city: ' . mysqli_real_escape_string($dbc,$_POST['newBranchCity']) . ',
        state: ' .$_POST['newBranchState'] . ', zip: ' .
        mysqli_real_escape_string($dbc,$_POST['newBranchZip']) . ', phone: ' .
        mysqli_real_escape_string($dbc,$_POST['newBranchPhone']) . ', fax: ' . 
        mysqli_real_escape_string($dbc,$_POST['newBranchFax']) . ', url: ' . 
        mysqli_real_escape_string($dbc,$_POST['newBranchUrl']));

    $_POST['newBranchState'] == '0' ? $newBranchState = '' : $newBranchState = 
        strtoupper(mysqli_real_escape_string($dbc,$_POST['newBranchState']));

    $queryInsertNewBranch = "INSERT INTO branches (name, address1, address2, city, 
        state, zipCode, phone, fax, url) VALUES ('" . 
        mysqli_real_escape_string($dbc,$_POST['newBranchName']) . "', '" . 
        mysqli_real_escape_string($dbc,$_POST['newBranchAddr1']) . "', '" . 
        mysqli_real_escape_string($dbc,$_POST['newBranchAddr2']) . "', '" . 
        mysqli_real_escape_string($dbc,$_POST['newBranchCity']) . "', '" .
        newBranchState . "', '" . 
        mysqli_real_escape_string($dbc,$_POST['newBranchZip']) . 
        "', '" . mysqli_real_escape_string($dbc,$_POST['newBranchPhone']) . "', '" . 
        mysqli_real_escape_string($dbc,$_POST['newBranchFax']) . "', '" . 
        mysqli_real_escape_string($dbc,$_POST['newBranchUrl']) . "')";

    $log->lwrite('new branch insert: ' . $queryInsertNewBranch);

    $resultInsertNewBranch = @mysqli_query($dbc, $queryInsertNewBranch);
    ... 
```

我已经确认好的数据正在通过“dataString”的控制台输出传递给 php 脚本。

输出到控制台以进行测试插入：

```
newBranchName: A Test Branch, datastring: newBranchName=A Test branch&
    newBranchAddr1=123 StateSt.&newBranchAddr2=#123&
    newBranchCity=Anywhere&newBranchState=MN&newBranchZip=12343&
    newBranchPhone=555-555-1212&newBranchFax=555-555-2121&newBranchUrl=minnesota 
```

我还通过检查 php 脚本中的第一行 $log->lwrite 来确认 php 脚本正在获取良好的数据。

输出到日志以进行相同的插入测试：

```
new branch insert: INSERT INTO branches (name, address1, address2, city, state,
    zipCode, phone, fax, url) VALUES ('A Test Branch', '123 State St.', '#123',
    'Anywhere', 'MN', '12343', '555-555-1212', '555-555-2121', 'minnesota') 
```

最后一个 $log->lwrite 条目（新分支插入）永远不会被写入日志文件。

同样在 jQuery 端，错误函数被触发，显示警告框。这三个对象的值是：

```
jqXHR object: [object Object]
Status: parsererror
Message: Unexpected token e 
```

无论我在获取数据的表单中输入什么内容，我总是得到相同的结果：INSERT 永远不会运行，并且错误函数中的警告框会显示 - 每次都显示相同的消息。

我一遍又一遍地查看代码的每一个细节，寻找错误的空格或单引号应该在双引号的位置，等等。我一辈子都找不到问题所在！

如果 jqXHR 对象可能有线索，我不知道如何获取其中的元素。你是怎样做的？

我（和我的客户）将非常感谢我在解决这个问题时能得到的任何帮助！

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:11:59.647

我真的不知道为什么，但这就是导致问题的原因（也许有人可以告诉我为什么这会破坏插入）：

将代码添加到我的问题时，我删除了一条我认为与问题无关的行。

这条线是这样的：

```
echo 'new branch state: ' . $newBranchState; 
```

它是在三元运算符行设置 $newBranchState 变量（确实有效）之后立即出现的。

评论 echo line out 解决了这个问题。

现在，有人可以告诉我为什么这会导致脚本的其余部分中断并给我那个错误吗？我现在看到“意外的标记 e”来自哪里，但是在该回声之前的行末尾有一个分号，所以我不明白为什么这会导致问题......

# amazon-s3 - 将列标题添加到 hive 结果集

> ID：15139561
> 
> 赞同：9
> 
> 时间：2013-02-28T15:37:40.327
> 
> 标签：amazon-s3, hive, amazon-emr

我在 Amazon EMR 上使用 hive 脚本来分析一些数据。

我正在将输出传输到 Amazon s3 存储桶。现在 hive 脚本的结果不包含列标题。

我也试过用这个：

```
 set hive.cli.print.header=true; 
```

但这无济于事。你能帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-08T15:56:10.473

您的配置单元脚本到底是什么样的？

您的配置单元脚本的输出中是否包含标头数据？当您将输出复制到您的 s3 存储桶时，它会丢失吗？

如果您可以提供有关您正在做什么的更多详细信息，那将很有帮助。

在不知道这些细节的情况下，您可以尝试以下方法。

如下创建您的配置单元脚本：

```
USE dbase_name:
SET hive.cli.print.header=true;
SELECT some_columns FROM some_table WHERE some_condition; 
```

然后运行你的脚本：

```
$ hive -f hive_script.hql > hive_output 
```

然后将您的输出复制到您的 s3 存储桶

```
$ aws s3 cp ./hive_output s3://some_bucket_name/foo/hive_output 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T08:43:02.753

我想直接的方式仍然是不可能的（[HIve：将列标题写入本地文件？](https://stackoverflow.com/questions/5656899/hive-writing-column-headers-to-local-file/12826124#12826124)）。一些解决方案是将结果导出`DESCRIBE table_name`到文件：

```
$ hive -e 'DESCRIBE table_name' > file 
```

并编写一些脚本，将列名添加到您的数据文件中。GL！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-09T01:44:07.630

我今天遇到了这个问题，并且能够通过在原始查询和创建标题行的新虚拟查询之间执行 UNION ALL 来获得所需的内容。我在每个部分添加了一个排序列，并将标题设置为 0，将数据设置为 1，这样我就可以按该字段排序并确保标题行排在最前面。

```
create table new_table as
select 
  field1,
  field2,
  field3
from
(
  select
    0 as sort_col,  --header row gets lowest number
    'field1_name' as field1,
    'field2_name' as field2,
    'field3_name' as field3
  from
    some_small_table  --table needs at least 1 row
  limit 1  --only need 1 header row
  union all
  select
    1 as sort_col,  --original query goes here
    field1,
    field2,
    field3
  from
    main_table
) a
order by 
  sort_col  --make sure header row is first 
```

它有点笨重，但至少您可以通过单个查询获得所需的内容。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-10T15:54:36.203

这可能只是一个错字（或版本相关的更改），但以下对我有用：

```
set hive.cli.print.headers=true; 
```

它是“标题”而不是“标题”

# git - 错误：无法生成 C:\Path To\TortoiseGit\Bin：没有这样的文件或目录

> ID：15139562
> 
> 赞同：19
> 
> 时间：2013-02-28T15:37:40.023
> 
> 标签：git, tortoisegit, git-bash

尝试从原点获取：

```
git remote update 
```

获取错误

```
Error: Cannot Spawn C:\Path To\TortoiseGit\Bin: No such file or directory
fatal: unable to fork
Error: Could not fetch origin 
```

为什么会这样？还有修复吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-22T11:00:25.957

对我来说，答案是从环境变量 GIT_SSH 中删除“c:\Program Files (x86)\PuTTY\plink.exe”的双引号。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T15:25:26.570

该博客似乎与您遇到的问题完全相同：

[http://www.techneiq.com/2012/08/error-cannot-spawn-cprogram.html](http://www.techneiq.com/2012/08/error-cannot-spawn-cprogram.html)

而 msysgit 上的这个问题也指向了同样的错误：

[https://code.google.com/p/msysgit/issues/detail?id=313](https://code.google.com/p/msysgit/issues/detail?id=313)

找出您的 GIT_SSH 环境变量指向什么以及该路径中是否有空格。也许重新安装 TortoiseGit 会解决它。（否则我真的可以推荐[GitExtensions](https://code.google.com/p/gitextensions/)）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-21T09:01:49.613

将环境变量设置`GIT_SSH`为

```
%ProgramFiles(x86)%\PuTTY\plink.exe 
```

或者

```
%ProgramFiles%\PuTTY\plink.exe 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-10-20T10:41:56.443

当我需要删除和安装 TortoiseGit 和 Git 时，我遇到了这个问题。以前两者都安装在 C:\ 但后来我将它们安装在 F: 上。因此，当我尝试提取存储库时重新安装后，从上下文菜单中使用时出现以下错误

错误：无法生成 C:\Program Files\TortoiseGit\bin\TortoisePlink.exe：没有这样的文件或目录

经过一番调查后，我转到设置-> 网络并将 SSH 客户端路径从 C:... 更新为 F:... ，然后它就解决了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-23T23:55:04.690

对我来说，对于 TortoiseGit>Settings>Network>SSH ，我必须将其设置为 just`ssh.exe`而不是 ssh 的完整路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-12T03:06:47.883

您可以将目录复制到错误消息指出的位置。

# bash - 使用 & 在后台 bash 不同的循环并等待

> ID：15139565
> 
> 赞同：4
> 
> 时间：2013-02-28T15:37:48.083
> 
> 标签：bash, loops, for-loop, wait

我已经查看了相关主题，但没有找到答案。

这是我的问题：

我正在尝试将这些我通常不在 for 循环中运行的命令放入两个单独的 for 循环中

原始命令：

```
command1 &
command2 &

wait

command 3 
```

这显然在后台启动了两个命令，并且在 BOTH 都完成后，它启动了命令 3

现在这里有我的 for 循环脚本：

```
file1=directory1/*.txt

for i in $file1;

do

command1 ${i} > ${i}.test & # I know, it will generate files like ".txt.test". It's ok.

done &

file2=directory2/*.txt

for i2 in $file2;

do

command1 ${i2} > ${i2}.test & 

done &

wait

command3 
```

现在我的脚本中有一些错误，因为有时在执行命令 3 时，即使我放了“等待”，我也可以从 command1 或 command2 找到一些工作。

我尝试了不同的选项，例如没有 & 的第二个“完成”。我也试过两个等待..但我所做的一切......我把所有的工作都搞砸了:(

我的错误在哪里（请......礼貌：P）？

谢谢

法比奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:02:41.453

保存两个“for”循环，但从它们中删除所有“&”，作为单独的文件：loop1，loop2。chmod a+rx loop1 loop2; 并执行：

```
loop1 &
loop2 &
wait
command3 
```

我不知道“done &”的行为，最好不要使用它。
您的代码同时执行所有内容。我假设你想要 2 个线程。

**编辑：单脚本解决方案：**

```
script1=`mktemp /tmp/.script.XXXXXX`;
cat >$script1 <<END
for i in directory1/*.txt; do
  command1 ${i} > ${i}.test;
done 
END

script2=`mktemp /tmp/.script.XXXXXX`;
cat >$script2 <<END
for i in directory2/*.txt; do
  command1 ${i} > ${i}.test;
done 
END

chmod u+rx $script1 $script2
$script1 &
$script2 &
wait;
command3

/bin/rm $script1 $script2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T11:16:59.403

您无需在每次完成后放置与号 (&)，您只需将其放在每个命令之后，两个循环中的所有作业都将被放入后台，只需等待即可。

```
for i in $( seq 1 3 ); do
    command1 "$i" > "$i.test" &
done

for i in $( seq 4 6 ); do
    command2 "$i" > "$i.test" &
done

wait

command3 
```

另一种方法是通过使用来存储每个后台进程的 pid `$!`，就像这样

```
pid=""
command & pid="$pid $!"
wait $pid 
```

# html - 如何在 HTML 中的表格后面保留可点击的链接？

> ID：15139568
> 
> 赞同：0
> 
> 时间：2013-02-28T15:38:00.450
> 
> 标签：html, css, hyperlink, background-image, html-table

我想知道是否有可能在 css 表后面有可点击的链接。当图像为 40px 时，无法选择其后面的链接。

为什么我把它放在一个表格中是因为每个文本块都需要是 248px (744/3)

CSS

```
#tabel{
    position:absolute;
}
table, td, th
{
width:744px;
height:40px;
text-align:center;
}
th
{
background-color:transparent;
color:white;
} 
```

HTML：

```
<div id="tabel">    
    <table cellspacing="0" cellpadding="0">
    <tr>
        <th>TXT 1</th>
        <th>TXT 2</th>
        <th>TXT 3</th>
    </tr>
    </table>
</div> 
```

我的目标是有 3 个可点击的按钮（用于带有导航的 jquery 图像滑块），上面有文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:06:39.297

您可能希望采用这样的无表方法：http: [//jsfiddle.net/t4tBt/](http://jsfiddle.net/t4tBt/)

CSS

```
a.mybutton {
    display:block;
    width:248px;
    height:30px;
    float:left;
    text-align:center;
    vertical-align:middle;
    color:#999;
    text-decoration:none;
    padding-top:10px;
}
a.first{
   background:url('http://www.trade-website.co.uk/wp-content/uploads/2013/02/simple_blue_background-wallpaper-1920x1080.jpg');
}
a.second {
background:url('http://www.trade-website.co.uk/wp-content/uploads/2013/02/simple_blue_background-wallpaper-1920x1080.jpg');
}
a.last {
background:url('http://www.trade-website.co.uk/wp-content/uploads/2013/02/simple_blue_background-wallpaper-1920x1080.jpg');
} 
```

HTML

```
<div id="tabel">
<a href="http://www.google.com" class="mybutton first">First Button</a>
<a href="http://www.google.com" class="mybutton second">Second Button</a>
<a href="http://www.google.com" class="mybutton last">Third Button</a>
</div> 
```

# asp.net - 尝试不在 FormView ASP.net 中打印空字段时如何捕获错误？

> ID：15139572
> 
> 赞同：0
> 
> 时间：2013-02-28T15:38:07.373
> 
> 标签：asp.net, vb.net, nullreferenceexception, formview

我正在尝试在 FormView 中构建一个地址，该地址依赖于具有联系人姓名列表的 GridView。

当我单击 GridView 中账单名称旁边的选择按钮时，它会在 FormView 中显示账单地址。当我在已经选择账单的情况下再次单击它时，它会引发 NullReferenceException 错误。

我有以下字段：address_line_1、address_line_2、address_line_3

我试图构建代码，以便在字段为空或包含空值时不会生成浪费的空白行。

```
<asp:FormView ID="addressDetails" runat="server" DataSourceID="ADetails" DataKeyNames="address_id" AllowPaging="true" >
    <ItemTemplate>
        <% If Not String.IsNullOrEmpty(addressDetails.DataItem("address_line_1").ToString()) Then%>
            <asp:Label ID="lblAddressLine1" runat="server" Text='<%# Bind("address_line_1") %>' /><br />
        <%  End If%>
        <% If Not String.IsNullOrEmpty(addressDetails.DataItem("address_line_2").ToString()) Then%>
            <asp:Label ID="lblAddressLine2" runat="server" Text='<%# Bind("address_line_2") %>' /><br />
        <%  End If%>
        <% If Not String.IsNullOrEmpty(addressDetails.DataItem("address_line_3").ToString()) Then%>
            <asp:Label ID="lblAddressLine3" runat="server" Text='<%# Bind("address_line_3") %>' /><br />
        <%  End If%>
    </ItemTemplate>
</asp:FormView> 
```

我得到的异常是“用户代码未处理 NullReferenceException”：

```
<% If Not String.IsNullOrEmpty(addressDetails.DataItem("address_line_1").ToString()) Then%> 
```

有谁知道为什么它第一次有效但第二次无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:56:13.177

我最终重新调整了页面的很大一部分，并删除了 aspx 页面中的 If 语句。

# .htaccess - 为什么我的 cakephp 网址在域后有“index.php”？

> ID：15139577
> 
> 赞同：0
> 
> 时间：2013-02-28T15:38:21.303
> 
> 标签：.htaccess, cakephp, routes

我创建了这样的重定向： [https ://www.lessonshark.com/sign-up](https://www.lessonshark.com/sign-up)

目前我的网址看起来像这样： [https ://www.lessonshark.com/index.php/sign-up](https://www.lessonshark.com/index.php/sign-up)

我知道这可能是 Cakephp 之外的问题，但不知道从哪里开始。

作为一个小提示，该应用程序已从 Linode 虚拟服务器移动到 IntoVPS 虚拟服务器。在旧的 Linode 服务器上，路由运行良好。在 IntoVPS 服务器上，“index.php”出现了。

关于如何摆脱“index.php”部分的任何想法？或者甚至如何调查导致“index.php”首先出现的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:48:45.307

您需要确保您已设置 mod_rewrite 以使用 CakePHP。检查安装指南：[1.3](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Installation.html#apache-and-mod-rewrite-and-htaccess) , [2.0](http://book.cakephp.org/2.0/en/installation/url-rewriting.html#apache-and-mod-rewrite-and-htaccess)

# dynamics-crm-4 - URL 可寻址 etn

> ID：15139582
> 
> 赞同：1
> 
> 时间：2013-02-28T15:38:32.147
> 
> 标签：dynamics-crm-4

我们正在使用 Dynamic CRM 4 和 URL 可寻址视图。

我们可以使用 etc 属性（实体代码）通过这个 url 从 url 访问视图：

```
.../_root/homepage.aspx?etc=10014 
```

[从 MSDN 的这个链接](http://msdn.microsoft.com/en-us/library/cc150850.aspx)，我们可以像这样使用 etn 属性（实体名称）：

```
.../_root/homepage.aspx?etn=contracts 
```

但它落在一个错误页面上，上面写着：

```
[InvalidOperationException: CRM Parameter Filter - Invalid parameter 'etn=contract' in Request.QueryString on page ... 
```

在 CRM 中是否需要进行任何配置以允许在 URL 中使用实体名称属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:08:05.113

我认为有些误解。您可以指定实体`etn`而不是其类型代码`etc`来寻址*表单*。

*恕我直言，这对于解决意见*是不可能的。因此您收到此错误

# file - 如何从 C# 中的文本文件一次读取/写入一行

> ID：15139590
> 
> 赞同：1
> 
> 时间：2013-02-28T15:38:53.977
> 
> 标签：file, file-io, f#

我想每次都在线读取文件“hello.txt”，然后将此行写入“bye.text”和屏幕。我怎样才能做到这一点？我在“文件”中看到的唯一功能是：

*   读取所有文本
*   读取所有行
*   WriteAllLines 等

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T18:58:08.533

正如杰克所说，如果您想使用逐行函数处理文件（或任何其他流） ，则需要使用`StreamWriter`and类型。`StreamReader`只需像这样使用构造函数：

```
open System.IO

let addLine (line:string) =     
  use wr = StreamWriter("D:\\temp\\test.txt", true)
  wr.WriteLine(line) 
```

在这里，我们使用了`StreamWriter`构造函数的重载，它接受路径（作为字符串）和布尔值，指定我们要附加到现有文件。另请注意，我使用`use`关键字来确保文件在`addLine`完成时关闭。

要将内容读取为一系列行，您可以`StreamReader`类似地使用 - 使用构造函数创建类型的实例，然后使用`ReadLine`方法，直到获得`null`结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:54:22.453

类中的方法`System.IO.File`只支持读/写整个文件。如果您想要更精细的方法（例如，逐行读取/写入），您需要使用类似`StreamReader`and的东西`StreamWriter`。

# javascript - Javascript 垃圾回收

> ID：15139597
> 
> 赞同：-1
> 
> 时间：2013-02-28T15:39:14.243
> 
> 标签：javascript, backbone.js, garbage-collection

我有扩展 Backbone.View 类的基类。我通过构造函数传递了一个 Jquery DOM 元素，这个对象是垃圾收集的候选对象吗？

```
var MainView = BaseView.extend({
  initialize: function(o) {    
    this.container = o.myJqueryDomElement;
    this.render();
  },
  render: function() {
    this.container.append(this.$el);
  },
  dispose: function() {
    this.remove();
  }
}); 
```

在我的代码中，我这样做：

```
var mainView = new MainView({
  myJqueryDomElement = $('#content')               
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:32:59.010

首先你应该传递 jQuery 元素 as `el`，所以

```
var MainView = BaseView.extend({
    initialize: function(o) {    
        this.render();
    },
    render: function() {
        this.html(someTemplate)
    },
    dispose: function() {
       this.remove();
    }
});

var mainView = new MainView({
  el: $('#content')               
}); 
```

然后这将在整个对象中作为 jQuery 对象通过`this.$el`并且视图不应该只知道它的容器只是它所在的元素。因此，如果您希望这是主视图，请将您的选择器更改为`$('#content .main')`或只是`$('#main')`

# objective-c - NSNumberFormatter 转换删除小值的小数

> ID：15139600
> 
> 赞同：1
> 
> 时间：2013-02-28T15:39:18.557
> 
> 标签：objective-c, cocoa, nsnumberformatter

我们的质量保证团队会发现缺陷。当他们写`0.095`或`0,095`在货币字段中时，`NSNumberFormatter`将内容转换为`95`.

这是我们正在使用的代码：

```
+ (NSNumber *) getNumberWithDecimalFromString:(NSString*) theSource
{
    if ([TSCommons isEmpty:theSource])
        return [[NSNumber alloc] initWithInt:0];

    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle:NSNumberFormatterDecimalStyle];

    if ([theSource rangeOfString:@","].location != NSNotFound) {
        [formatter setDecimalSeparator:@","];
        [formatter setCurrencyDecimalSeparator:@"."];
    } else if ([theSource rangeOfString:@"."].location != NSNotFound) {
        [formatter setDecimalSeparator:@"."];
        [formatter setCurrencyDecimalSeparator:@"."];
    }
    NSNumber *tmp = [formatter numberFromString:theSource];

    [formatter release];
    return [tmp retain];
} 
```

语言环境是`es_ES`

对这种意外行为有任何想法吗？

介绍更多关于这个问题的信息，因为上次XCode更新后又回来我准备了一个测试

```
- (void) testNumberFormatter
{
    NSLog(@"%f",[[TSCommons getNumberWithDecimalFromString:@"41,1"] doubleValue]);
    NSLog(@"%f",[[TSCommons getNumberWithDecimalFromString:@"41,12342"] doubleValue]);
    NSLog(@"%f",[[TSCommons getNumberWithDecimalFromString:@"41,12"] floatValue]);
    NSLog(@"%f",[[TSCommons getNumberWithDecimalFromString:@"41,123"] floatValue]);
    NSLog(@"%f",[[TSCommons getNumberWithDecimalFromString:@"41,1234"] floatValue]);
    NSLog(@"%f",[[TSCommons getNumberWithDecimalFromString:@"41,1234234"] doubleValue]);
} 
```

控制台上的结果如下：

41.100000

41.123420

41.119999

**41123.000000**

41.123402

41.123423

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:34:58.003

```
 NSString* theSource = @"0.095";
        NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
        [formatter setNumberStyle:NSNumberFormatterDecimalStyle];

        if ([theSource rangeOfString:@","].location != NSNotFound) {
            [formatter setDecimalSeparator:@","];
            [formatter setCurrencyDecimalSeparator:@"."];
        } else if ([theSource rangeOfString:@"."].location != NSNotFound) {
            [formatter setDecimalSeparator:@"."];
            [formatter setCurrencyDecimalSeparator:@"."];
        }
        NSNumber *tmp = [formatter numberFromString:theSource];
        NSLog(@"get Number %@ - %lf %lf", tmp, [theSource doubleValue], [tmp floatValue]); 
```

// output get Number 0.095 - 0.095000 0.095000

# design-patterns - 存储库、数据映射器和数据访问对象是独立工作还是协同工作？

> ID：15139606
> 
> 赞同：2
> 
> 时间：2013-02-28T15:39:39.383
> 
> 标签：design-patterns, repository-pattern, data-access-layer, dao, datamapper

在我看来，

*   **存储库**就像一个集合对象，它根据输入的标准返回或操作域对象列表。
*   **数据映射器**充当数据库和域层之间的中间层，以隐藏持久性实现（例如 SQL 语句）。
*   **数据访问对象**是整个持久层的通用接口。

我认为既然**数据访问对象**的实现有一个**repository**，并且 repository 的实现**有**一个**数据映射器**，有时**还有一个身份映射**来使域对象唯一，那么说它们协同工作是否正确？或者它们是完全不同的模式，彼此不兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T02:17:28.530

大多数时候存储库属于域层，它是所有域对象（实体）重构器。

数据映射器与DAO一起工作，它们都属于基础设施层，DAO是低级持久化接口，只返回一些DTO（数据传输对象）

存储库应该使用 DAO 来重建具有多个 DTO 的域实体。

**如果您的问题是“说他们协作工作是否正确”，则答案部分正确，因为 Data Mapper 是一种 DAO**

对不起，我的英语不好。

# google-analytics - 我可以在跟踪代码中的 _addTrans 之前使用 _addItem

> ID：15139610
> 
> 赞同：2
> 
> 时间：2013-02-28T15:39:43.460
> 
> 标签：google-analytics, google-analytics-api

我必须将电子商务的跟踪代码包含到现有代码中。我知道我应该使用这些方法`_addItem`，，，`_addTrans`。`_trackTrans`

我可以使用这个代码：

`

```
 _gaq.push(['_setAccount', 'UA-XXXXX-X']);
 _gaq.push(['_trackPageview']);

_gaq.push(['_addItem',
   '1234',          
   'DD44',           // SKU/code - required
   'T-Shirt',        // product name
   'Olive Medium',   // category or variation
   '11.99',          // unit price - required
   '1'               // quantity - required
]);

_gaq.push(['_addTrans',
  '1234',           // transaction ID - required
  'Womens Apparel', // affiliation or store name
  '28.28',          // total - required
  '1.29',           // tax
  '15.00',          // shipping
  'San Jose',       // city
  'California',     // state or province
  'USA'             // country
]);

_gaq.push(['_trackTrans']); 
```

`

`_addTrans`或者之前必须使用`_addItem`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:10:31.217

虽然您可以这样做，但该项目不会与交易相关联。如果您在没有交易的情况下先调用 _addItem，则该项目将关联到一个空交易，并且报告将按 SKU 显示。

阅读[https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiEcommerce#_gat.GA_Tracker_._addItem](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiEcommerce#_gat.GA_Tracker_._addItem)了解更多详情...

# javascript - 您可以使用拖放框触发某种类型的事件吗？

> ID：15139611
> 
> 赞同：0
> 
> 时间：2013-02-28T15:39:49.167
> 
> 标签：javascript

我正在尝试开发一个用户可以拖放图片的小型网站。因此，当用户将特定图片拖到框中时，它会以文本形式返回某种结果，例如有关该图片的详细信息...

这是我用来完成拖放的当前代码，但我不知道如何添加我上面描述的功能：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset ="utf-8">
    <style type="text/css">
        #dragBox {width:336px;height:221px;padding:10px;border:1px solid #aaaaaa;}
    </style>
    <script>
    function allowDrop(ev)
    {
        ev.preventDefault();
    }

    function drag(ev)
    {
        ev.dataTransfer.setData("Text",ev.target.id);
    }

    function drop(ev)
    {
        ev.preventDefault();
        var data=ev.dataTransfer.getData("Text");
        ev.target.appendChild(document.getElementById(data));
    }
    </script>
</head>
<body bgcolor="#333333">
<div div align="center">
    <img id="drag1" src="foodOne.jpg" draggable="true" ondragstart="drag(event)" width="336" height="221">
    <div id="dragBox" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:44:37.517

一个 drop 事件可以有一个`files`属性。您可以使用 JavaScript 读取文件。常见的方法是将其发送到服务器，然后服务器可以将信息发回，例如缩略图的路径。

已经有很多可用的脚本，只有 Google/Bing。

# css - IE上隐藏的导航下拉CSS问题

> ID：15139621
> 
> 赞同：0
> 
> 时间：2013-02-28T15:40:32.383
> 
> 标签：css, internet-explorer

我在 IE（Internet Explorer）浏览器中隐藏在容器类后面的导航下拉菜单遇到问题，但它在所有其他浏览器中都可以正常工作。我被这个问题困扰了3天。我尝试过多地更改我的容器类和导航类的 css 但失败了:(。我什至尝试了我的 css 中的显示和可见性属性但失败了......请给我提示我如何解决这个问题这里是我的网站 [http ://napodfw12.wildapricot.org/](http://napodfw12.wildapricot.org/) 如果您在除 IE 以外的所有其他浏览器中打开它，菜单栏的下拉菜单会显示，但在 ie 中它是隐藏的，

我也在上传这个问题的屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:45:28.790

IE 对 z-index 非常恼火。我发现创建一个 IE 样式表并将容器和导航位置设置为相对，然后调整 Z-index 似乎对我有用。

# html - 按钮在所有浏览器中的呈现方式不同

> ID：15139622
> 
> 赞同：2
> 
> 时间：2013-02-28T15:40:34.490
> 
> 标签：html, css

下面是我创建的用于绘制按钮的 CSS 代码。当我在 Chrome 中查看时，该按钮看起来应该是圆形的，但在 Firefox 和 IE 上，它是方形的。为什么会这样？

```
<!-- language: lang-css -->

    .button {
        width:90px;
        float:right;
        background:#FEDA71;
        background:-moz-linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
        background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#FEDA71),color-stop(100%,#FEBB49));
        background:-webkit-linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
        background:-o-linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
        background:-ms-linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
        background:linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
        padding:8px 18px;
        color:#623F1D;
        font-family:'Helvetica Neue',sans-serif;
        font-size:16px;
        -moz-border-radius:48px;
        -webkit-border-radius:48px;
        border:1px solid #623F1D
    } 
```

下面的代码使 Firefox 开始工作，但 IE 仍然无法工作

```
Code after change and still doensnt work

background:#FEDA71;
    background:-moz-linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
    background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#FEDA71),color-stop(100%,#FEBB49));
    background:-webkit-linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
    background:-o-linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
    background:-ms-linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
    background:linear-gradient(top,#FEDA71 0%,#FEBB49 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FEDA71',endColorstr='#FEBB49',GradientType=0);
    padding:8px 18px;
    color:#623F1D;
    font-family:'Helvetica Neue',sans-serif;
    font-size:16px;
    border-radius:48px;
    -moz-border-radius:48px;
    -webkit-border-radius:48px;
    border:1px solid #623F1D 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:41:36.767

您没有使用该`border-radius`属性的无前缀版本，只是`-moz-border-radius`和`-webkit-border-radius`. （顺便说一下，这两个引擎长期以来一直支持`border-radius`没有供应商前缀的属性[——Chrome 从 5.0 开始，Firefox 从 4.0 开始](http://caniuse.com/#feat=border-radius)——所以除非这是出于某种原因，否则不要费心使用它们。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:44:02.287

尝试添加

```
-moz-border-radius:48px;
-webkit-border-radius:48px;
border-radius:48px; 
```

对于较旧的 IE 版本，您可能想尝试一下 PIE [http://css3pie.com/](http://css3pie.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:51:15.310

[`-moz-border-radius`](https://developer.mozilla.org/en/docs/CSS/border-radius)作为别名从 Gecko 13.0 中删除，该别名于 2012 年 6 月 5`border-radius`日作为[Firefox 13](http://en.wikipedia.org/wiki/History_of_Firefox#Version_13)发布，因此任何更高版本的 Firefox 都不支持`-moz`前缀，`border-radius`这就是 Firefox 不应用该样式的原因。

`-webkit-border-radius`仍然支持作为别名，这就是在 Chrome 中应用该样式的原因。

正如其他人指出的那样，添加无前缀`border-radius`将纠正 Firefox 缺少的样式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T15:42:53.430

尝试添加以下代码：

```
border-radius:48px;      //W3C 
```

# java - PrimeFaces 3.4.2 / 3.5 让 ajax 请求在我的浏览器 IE 和 Firefox 中等待太久

> ID：15139629
> 
> 赞同：0
> 
> 时间：2013-02-28T15:41:09.323
> 
> 标签：java, javascript, performance, jsf, primefaces

我有一个 JSF/PrimeFaces 网络应用程序。我需要将 PrimeFaces（安全问题）从当前的 PF 2.x 升级到 3.4.2。我按照迁移指南将 2.x 升级到 3.x 实施。我在浏览器中遇到了缓慢的请求响应。我能够确定瓶颈。它似乎是客户端。我猜它与 PF 3.4.2 和 javascript 有关。我的大多数 Ajax 调用（源自 PF 客户端小部件）都是那些需要很长时间才能接收响应/呈现的调用。

有没有人经历过这种情况？

PS 我的代码库中也有一个（旧的）1.8.13-ui jQuery JS 实现。

# sql-server-2008 - 使用存储过程在 SSRS 中传递多个字符串值

> ID：15139630
> 
> 赞同：1
> 
> 时间：2013-02-28T15:41:08.447
> 
> 标签：sql-server-2008, stored-procedures, ssrs-2008, reporting-services

我对存储过程相当陌生，并将它们与 SSRS 一起使用。

我想使用带有允许多个值的参数的存储过程创建一个简单的 SSRS 报告（来自单独的过程的结果）

我有 2 个简单的存储过程，如下所示。

```
Create Procedure WO
@STARTDATE datetime, @ENDDATE datetime, @DISTRICT varchar(25)
AS
SELECT A.WO, A.CUST, A.DISTRICT, A.COMPL_DATE
FROM WORK_ORDERS A
WHERE A.COMPL_DATE between (@STARTDATE) and (@ENDDATE) 
and A.DISTRICT_NAME in (@DISTRICT)

Create Procedure DISTRICT
AS
SELECT B.DISTRICT_NAME
FROM DISTRICTS B 
```

在我的 SSRS 报告中，我使用“DISTRICT”参数和 DISTRICT 程序中的可用值（允许多个值）使用 DISTRICT 程序的结果报告 WO 程序。我还在 WO 程序的参数中使用了 DISTRICT 参数。

这在选择**一个**地区时有效，但在我选择多个地区时无效。有愿意帮忙的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:24:59.023

如果我没记错的话，问题在于处理字符串参数@district - 假设选择了 4 个区域，SSRS 传递的内容可能类似于“N、S、E、W” - 存储的 proc 然后会显示为: ...A.District_Name in ('N,S,E,W')... 仅当存在地区名称 'N,S,E,W' 时才会返回值。因此，我认为您需要拆分传入的值并将其重新组合为“N”、“S”、“E”、“W”。不幸的是，SQL Server 中没有 SPLIT 函数，因此您要么必须编写 UDF（有几篇文章可用），要么进行 CLR 调用。

这是一个聪明（且未经测试）的想法 - 尝试 Replace(@District,',',''',''') （我想我的引号是对的......）

# performance - 全文索引缓慢。寻找替代品

> ID：15139632
> 
> 赞同：11
> 
> 时间：2013-02-28T15:41:16.713
> 
> 标签：performance, sql-server-2008, jquery, autocomplete, full-text-search

我有一张表，我在上面创建了全文目录。该表只有 6000 多行。我在索引中添加了两列。第一个可以被认为是唯一的排序标识符，第二个可以被认为是该项目的内容（我的表中还有 11 个其他列*不*属于全文目录）。这是几行的示例：

```
TABLE: data_variables
ROW    unique_id    label
1      A100d1       Personal preference of online shopping sites
2      A100d2       Shopping behaviors for adults in household 
```

在前端的 Web 应用程序中，我有一个文本框，用户可以输入该文本框以获取与他们在`UNIQUE ID`or`LABEL`列中搜索的任何术语匹配的项目列表。因此，例如，如果用户输入`sho`或`a100`然后将使用上述两行填充列表。如果他们输入，`behav`则列表将仅填充上面的第 2 行。

这是通过对每个`keyup`. PHP 调用 SQL 服务器上的存储过程，如下所示：

```
SELECT TOP 50 dv.id, dv.id + ': ' + dv.label, 
              dv.type_id, dv.grouping, dv.friendly_label
FROM          data_variables dv
WHERE         (CONTAINS((dv.unique_id, dv.label), @search)) 
```

（`@search`是传递给存储过程的用户文本。）

我注意到这变得非常缓慢，尤其是当我没有`TOP 50`在查询中使用时。

我正在寻找的是一种直接在 SQL Server 上或通过放弃全文索引的想法并使用 jQuery 来搜索客户端上的可搜索项数组来加快速度的方法。我已经研究了一些 jQuery AutoComplete 的东西和其他一些用于 AutoComplete 的 jQuery 插件，但还没有尝试模拟任何东西。那将是我的下一步，但我想先在这里查看一下我会得到什么建议。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T19:57:54.703

几个建议，基于你只有 6000 行的事实，所以数据库应该活着吃掉这个。

A. 尝试使用 Like 运算符，以防万一。也不期待它，但尝试起来很简单。考虑到这些小体积，总体而言，这里还有其他事情让您检测到这很慢。

B. 可以提前缓存查询吗？对于 6000 行，可能只有 36*36 的 2 个字符查询组合，这几乎不占用内存并为数据库节省任何工作。

C. 将选择移到客户端是一个好主意，这取决于 6000 行的总体大小，以及单个查找的网络延迟。

D. 我怀疑将 b 和 c 结合起来会给你带来非常好的性能，但需要一些编码工作。如果服务器在缓存中维护所有单个字符结果的列表，并且客户端在第一次击键后下载字母缓存集，那么它们可能拥有所有行的子集，但不需要为额外的击键执行更多网络 IO。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T18:50:37.670

我建议不要使用 LIKE，除非您使用线性索引（从左到右）并且您正在执行类似`LIKE 'work%'`. 如果您正在执行`LIKE '%word%'`常规索引之类的操作，则对您没有帮助。当您想要在段落中搜索单词时，您通常想要使用全文索引。

对于大量数据，通常数据库中内置的全文引擎并不是很窃取。为了获得最佳性能，您通常必须使用专为全文构建的外部解决方案。

一些选项是[Sphinx](http://sphinxsearch.com/)、[Solr](http://lucene.apache.org/solr/)和[elasticsearch](http://www.elasticsearch.org/)，仅举几例。我不会说这些选项中的任何一个都比另一个更好。肯定有优点和缺点需要考虑：

*   你有什么样的数据？
*   这些解决方案有哪些语言支持？
*   这些解决方案支持哪些数据库引擎？

您可以做的最好的事情是根据您现有的数据对这些解决方案进行基准测试。测试每个单独的组件（单元测​​试）可以帮助您识别真正的问题并帮助您找到好的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-07T10:55:48.777

我遇到了同样的问题并选择了 LIKE 解决方案。我也发现 or 运算符太费力了，并将查询分成两个选择，并使用一个 union all（最快，在我的场景中，不可能在索引列和数据中找到相同的文本）。

你的会像

```
SELECT TOP 50 from (
select dv.id, dv.id + ': ' + dv.label, 
              dv.type_id, dv.grouping, dv.friendly_label
FROM          data_variables dv
WHERE         dv.unique_id like '%'+@search+'%'
UNION ALL
select dv.id, dv.id + ': ' + dv.label, 
              dv.type_id, dv.grouping, dv.friendly_label
FROM          data_variables dv
WHERE         dv.label like '%'+@search+'%' 
) 
```

哦！！并在 SQL Server 中测试性能，而不是在 Web 中！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T16:03:13.170

如果您计划增加数据量，最好使用反向索引进行全文搜索。

看看[Apache Solr](http://lucene.apache.org/solr/) - 目前最好的全文搜索引擎。

您可以简单地定期索引您的数据库数据并使用 solr 作为搜索引擎，它提供简单的 ajax api，可以直接从前端查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T15:10:05.787

如果你真的需要性能..你可能想看看；FTS3 和 FTS4 ...

截图...来自另一个论坛...

例如，如果将“安然电子邮件数据集”中的 517430 个文档中的每一个都插入到 FTS 表和使用以下 SQL 脚本创建的普通 SQLite 表中：

代码：使用 fts3（内容文本）创建虚拟表 enrondata1；/* FTS3 表*/ CREATE TABLE enrondata2(content TEXT); /*普通表 */ 然后可以执行下面两个查询中的任何一个来查找数据库中包含单词“linux”（351）的文档的数量。使用一台台式 PC 硬件配置，对 FTS3 表的查询在大约 0.03 秒内返回，而查询普通表则为 22.5 秒。

看...

[http://www.sqlite.org/fts3.html](http://www.sqlite.org/fts3.html)

# django - 美味派：过滤具有多个 ANDed 值的多对多表

> ID：15139635
> 
> 赞同：1
> 
> 时间：2013-02-28T15:41:23.443
> 
> 标签：django, filter, tastypie, relation, m2m

我有两个表（电影和流派），它们使用交叉表（电影流派）以多对多关系连接。

我的 models.py 文件如下所示：

```
class Genre( models.Model ):

    sName = models.CharField( max_length=176)
    [ .. ]

class Movie( models.Model ):

    sTitle = models.CharField( max_length=176)
    genre = models.ManyToManyField( Genre )
    [ .. ]

class MovieGenre( models.Model ):

    idMovie = models.ForeignKey( Movie )
    idGenre = models.ForeignKey( Genre ) 
```

我想用美味派过滤某些类型的所有电影。例如，向我展示所有类型为动作、惊悚和科幻的电影。

我的 api.py 看起来像这样：

```
class GenreResource(ModelResource):
    class Meta:
        queryset = Genre.objects.all()
        resource_name = 'genre'
        always_return_data = True
        include_resource_uri = False
        excludes = ['dtCreated', 'dtModified' ]
        authorization= Authorization()
        authentication = SessionAuthentication()
        filtering = {
            "id" : ALL,
        }

class MovieResource(ModelResource):
    genre = fields.ManyToManyField( 'app.api.GenreResource', 'genre', full=True )
    class Meta:
        queryset = Movie.objects.all()
        resource_name = 'movie'
        authorization= Authorization()
        authentication = SessionAuthentication()
        always_return_data = True
        include_resource_uri = False
        excludes = ['dtCreated', 'dtModified' ]
        filtering = {
            "sTitle" : ALL,
            "genre" : ALL_WITH_RELATIONS,
        } 
```

我的测试数据：两部电影（带有流派 id）矩阵（1 和 3）银翼杀手（1 和 2）

首先我对标题进行查询，如下查询返回1个结果（即矩阵）：

```
 http://localhost:8000/api/v1/movie/?format=json&sTitle__icontains=a&sTitle__icontains=x 
```

但是，我得到三个结果，其 URL 应使用此查询查询相关类型表（两次 Matrix 和一次 Blade Runner）：

```
 http://localhost:8000/api/v1/movie/?format=json&genre__id__in=3&genre__id__in=1 
```

我希望只取回 Matrix

我还尝试像这样覆盖 apply_filters：

```
def apply_filters(self, request, applicable_filters):
    oList = super(ModelResource, self).apply_filters(request, applicable_filters)
    loQ = [Q(**{'sTitle__icontains': 'a'}), Q(**{'sTitle__icontains': 'x'})]
    # works as intended: one result
    loQ = [Q(**{'genre__id__in': '3'}) ]
    # results in one result (Matrix)

    loQ = [Q(**{'genre__id__in': '1'}), Q(**{'genre__id__in': '3'}) ]
    # results in no results!

    loQ = [Q(**{'genre__id__in': [ 1, 3]}) ]
    # results in two results Matrix and Blade Runner which is OK since obviously ORed
    oFilter = reduce( operator.and_, loQ )
    oList = oList.filter( oFilter ).distinct()
    return oList 
```

任何想法使这项工作？

感谢您的任何想法...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:43:40.977

你有没有尝试过`http://localhost:8000/api/v1/movie/?format=json&genre__id=3&genre__id=1`

如果我理解正确，使用`__in`这种方式就像说`genre__id__in=[1, 3]`.

# asp.net-mvc - MVC 与单页应用程序 - MVC 何时更合适？

> ID：15139642
> 
> 赞同：0
> 
> 时间：2013-02-28T15:41:48.820
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, prototype

什么时候在 MVC 之类的东西中拥有多个视图，而不是通过像 Prototype 调用 Web API 之类的单一视图？似乎在 UX 方面，带有 AJAX 调用的单页应用程序总是会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:50:19.393

MVC 是一种架构方法，它将视图与模型分离，并通过控制器将两者连接起来。它用于分离可能具有不同受众和生命周期的关注点。它适用于 Web 应用程序和其他类型的用户界面应用程序，以及桌面、胖客户端和富客户端应用程序。

正如评论所说，带有 Java 小程序、Flash 电影或 Javascript/AJAX 的单个页面与 MVC 并不相互排斥。您的视图在页面中，如果您使用 AJAX，模型很可能在服务器上，但如果 AJAX 纯粹是为了持久保存到“哑”数据存储，它可能在 Javascript 中。

因此，您可以在 Javascript 应用程序中拥有完整的 MVC，并且大多数框架都是这样设计的。也许您的问题是将网页与服务器控制器与页面内的 Javascript 控制器进行比较？

# c# - 文件锁定更新的 Sharepoint 文档

> ID：15139643
> 
> 赞同：1
> 
> 时间：2013-02-28T15:41:50.947
> 
> 标签：c#, file, events, sharepoint-2010

我正在尝试使用事件处理程序对用户在 Sharepoint 2010 文档库中编辑的文档的属性进行一些更改。目前，我正在尝试使用该事件`ItemCheckedIn`。当我执行以下指令时出现问题：

```
item.File.Update(); 
```

它给了我一个例外，说文档被用户 XXX 锁定。

我是否在错误的事件中更新了属性？我怎样才能避免这个异常？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T10:58:50.223

尝试使用

```
item.SystemUpdate() 
```

反而

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T14:41:58.043

默认情况下，Microsoft Office Word 对文档发出锁定请求，它不同于“已签出”状态。只有在 Word 关闭文档后才会释放“锁定”。虽然“签出”可以通过 Word 或 Web 界面执行，但在明确要求“签入”之前将保持这种状态。

正如之前的评论所建议的，最好的补救措施是在您的代码中使用： `item.SystemUpdate(false)`因为它不会遵守“锁定”状态并保存通过事件处理程序代码完成的任何更改。

# javascript - 使用固定顶栏滚动到 id

> ID：15139644
> 
> 赞同：6
> 
> 时间：2013-02-28T15:41:53.877
> 
> 标签：javascript, jquery, html, css

我的页面有一个固定的顶部导航栏，页面上有几个 id 元素。如果我按下这些 id 元素之一的链接，它会将这个 id 滚动到顶部，但它隐藏在顶部导航栏下。在野外，页面很长，并且有不同的“跳转点”。

我有[一个简化的小提琴来显示](http://jsfiddle.net/AnmJY/)以下 html的问题

```
<div id="fixedbar">This is the fixed top bar</div>
<div id="toplinks"><a href="#first">First</a> <a href="#second">Second</a></div>
<p id="first"><strong>First</strong>
    Lorem ipsum dolor sit amet[...]
</p>
<p id="second"><strong>Second</strong>
    Duis autem vel eum iriure dolor[...]
</p>
<div id="bottomlinks"><a href="#first">First</a> <a href="#second">Second</a></div> 
```

这个CSS

```
body{padding:0;margin:0}
#toplinks{padding-top:2em}
#fixedbar{
    position:fixed;
    background-color:#ccc;
    height:2em;
    width:100%
} 
```

我希望单击链接滚动到正确的元素，但补充固定的导航栏。一个可能的解决方案最好只包括 css，但可以包括 javascript 或 jquery（1.9 用于生产）。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T15:54:54.557

这是针对此问题的 JavaScript 解决方法。将点击事件绑定到`<a>`顶部链接和底部链接，在点击事件上找到目标`<p>`偏移量并使用javascript滚动到它。

```
$("#toplinks, #bottomlinks").on('click','a', function(event){ 
    event.preventDefault();
    var o =  $( $(this).attr("href") ).offset();   
    var sT = o.top - $("#fixedbar").outerHeight(true); // get the fixedbar height
    // compute the correct offset and scroll to it.
    window.scrollTo(0,sT);
}); 
```

小提琴：http: [//jsfiddle.net/AnmJY/1/](http://jsfiddle.net/AnmJY/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:52:57.080

修改后的 JS：

```
 $("#toplinks a").click(function() {
    var id =  $(this).attr('href');
     $('html, body').animate({         
         scrollTop: $(id).offset().top-40
     }, 1000);
 }); 
```

修改后的 CSS：

```
body{padding:0;margin:0}
#toplinks{padding-top:2em}
#fixedbar{
    position:fixed;
    background-color:#ccc;
    height:40px;
    width:100%
} 
```

小提琴：http: [//jsfiddle.net/xSdKr/](http://jsfiddle.net/xSdKr/)

40(px) 是菜单高度，1000 是执行动画的时间（以毫秒为单位）。

JS 解决方案比纯 CSS 优雅得多，主要是因为它可以将元素保持在适当的位置，而没有任何可能会干扰您的网站样式的人工填充。它还包括动画——人们通常会发现平滑过渡比使用纯 CSS/HTML 的 insta-flips 更容易接受，因为它们更容易跟踪页面内容和您的确切位置。缺点是如果有人`#first`在 URL 中使用 - 他会看到菜单与标题重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:48:33.640

你可以作弊一点。

[http://jsfiddle.net/vyPkA/](http://jsfiddle.net/vyPkA/)

```
body{padding:0;margin:0}
#toplinks{padding-top:2em; margin-bottom: -40px;}
#fixedbar{
    position:fixed;
    background-color:#ccc;
    height:2em;
    width:100%;
}
#first, #second{
    padding-top: 40px;
} 
```

# rotation - three.js - 两个点，一个圆柱体，对齐问题

> ID：15139649
> 
> 赞同：5
> 
> 时间：2013-02-28T15:42:08.640
> 
> 标签：rotation, three.js, cylindrical

（stackoverflow 的新手，webgl/three.js 的新手，...）

我正在使用three.js r54 来绘制一个力导向图。节点之间的边缘是 THREE.Lines，这很好，但线不能使用 raycaster 选择。所以我的目标是用圆柱代替（/连同）线条（也因为我可以做一些进一步的事情：使用纹理，......）

这就是我放置气缸的方法：

```
// init reference vector
var upVec = new THREE.Vector3(0,1,0);

//---withhin a loop---
// get direction
var direction = startPoint.subSelf(endPoint).clone();

// half length for cylinder height
var halfLength = direction.length() * 0.5;  

// get offset
var offset = endPoint.clone().addSelf(direction.clone().multiplyScalar(0.5));

// normalize direc
direction.normalize();

//newUpVec = upVec - (upVec *(dot) direction) * direction - projection of direction
var newUpVec = upVec.clone().subSelf(direction.clone().multiplyScalar(upVec.dot(direction.clone()))).normalize();
var right = newUpVec.clone().crossSelf(direction.clone());

//build rotation matrix
var rot = new THREE.Matrix4(right.x, right.y, right.z, 0,
                            newUpVec.x, newUpVec.y, newUpVec.z, 0, 
                            direction.x, direction.y, direction.z,0,
                            0,0,0,1);
//build translation matrix
var transla = new THREE.Matrix4(1, 0, 0, offset.x,
                                0, 1, 0, offset.y,
                                0, 0, 1, offset.z,
                                0, 0, 0, 1);

 //build transformation matrix
 var transfo = new THREE.Matrix4().multiply(transla, rot);

 // create geometry
 var cylgeo = new THREE.CylinderGeometry(2, 2, halfLength * 2, 12, 1, false);
 cylgeo.applyMatrix(transfo);

 var cylMesh = new THREE.Mesh(cylgeo, new THREE.MeshLambertMaterial({color:0x000000, 
            wireframe: true, shading: THREE.FlatShading})); 
```

（描述于： http: [//www.fastgraph.com/makegames/3drotation/](http://www.fastgraph.com/makegames/3drotation/) )

因此，圆柱体放置在正确的偏移处并以某种方式对齐，但不与边缘的两个点（起点、终点）对齐。
任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T15:09:17.120

使用它： [object3d-rotation-to-align-to-a-vector](https://stackoverflow.com/questions/9038465/three-js-object3d-rotation-to-align-to-a-vector)

给定 2 Vector3 和一个场景：

```
function drawCylinder(vstart, vend,scene){
var HALF_PI = +Math.PI * .5;
var distance = vstart.distanceTo(vend);
var position  = vend.clone().addSelf(vstart).divideScalar(2);

var material = new THREE.MeshLambertMaterial({color:0x0000ff});
var cylinder = new THREE.CylinderGeometry(10,10,distance,10,10,false);

var orientation = new THREE.Matrix4();//a new orientation matrix to offset pivot
var offsetRotation = new THREE.Matrix4();//a matrix to fix pivot rotation
var offsetPosition = new THREE.Matrix4();//a matrix to fix pivot position
orientation.lookAt(vstart,vend,new THREE.Vector3(0,1,0));//look at destination
offsetRotation.rotateX(HALF_PI);//rotate 90 degs on X
orientation.multiplySelf(offsetRotation);//combine orientation with rotation transformations
cylinder.applyMatrix(orientation)

var mesh = new THREE.Mesh(cylinder,material);
mesh.position=position;
scene.add(mesh); 
```

}

r58+ 代码：

```
 function drawCylinder(vstart, vend,scene){
    var HALF_PI = Math.PI * .5;
    var distance = vstart.distanceTo(vend);
    var position  = vend.clone().add(vstart).divideScalar(2);

    var material = new THREE.MeshLambertMaterial({color:0x0000ff});
    var cylinder = new THREE.CylinderGeometry(10,10,distance,10,10,false);

    var orientation = new THREE.Matrix4();//a new orientation matrix to offset pivot
    var offsetRotation = new THREE.Matrix4();//a matrix to fix pivot rotation
    var offsetPosition = new THREE.Matrix4();//a matrix to fix pivot position
    orientation.lookAt(vstart,vend,new THREE.Vector3(0,1,0));//look at destination
    offsetRotation.makeRotationX(HALF_PI);//rotate 90 degs on X
    orientation.multiply(offsetRotation);//combine orientation with rotation transformations
    cylinder.applyMatrix(orientation)

    var mesh = new THREE.Mesh(cylinder,material);
    mesh.position=position;
    scene.add(mesh);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-04T06:34:19.857

@jdregister 的答案在 R77 中对我来说不太适用，因为圆柱体最终的中心位于 vstart （旋转和查看其他方面都很好）。

对 R58+ 答案的倒数第二行的这种修改起到了作用：

```
mesh.position.set(position.x, position.y, position.z); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-06T23:36:05.863

这里有一个非常简洁的答案：[https ://stackoverflow.com/a/44346439/1556416](https://stackoverflow.com/a/44346439/1556416)

我在这里转述：

```
function drawCylinder(vstart, vend, radius){
    var cylLength = new THREE.Vector3().subVectors(vend, vstart).length();

    var cylGeom = new THREE.CylinderGeometry(radius, radius, cylLength, 16);
    cylGeom.translate(0, cylLength / 2, 0);
    cylGeom.rotateX(Math.PI / 2);

    var material = new THREE.MeshLambertMaterial({color: "blue"})

    var cyl = new THREE.Mesh(cylGeom, material);

    cyl.position.copy(vstart);
    cyl.lookAt(vend);  // and do the trick with orienation

    return cyl
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-29T10:05:42.713

在 R87 中，“vend.clone().add(vstart).divideScalar(2);” 不管用

您可以像这样定位项目 `mesh.position.copy(start); mesh.position.lerp(end, 0.5);`

R58的所有其他人都很好:)

# css - CSS菜单a：在父div中悬停

> ID：15139653
> 
> 赞同：4
> 
> 时间：2013-02-28T15:42:19.173
> 
> 标签：css

我将尽我所能解释这一点 - 我正在使用 CSS 垂直菜单，请看这里：

[http://codepen.io/jgclifton/pen/JIfhy](http://codepen.io/jgclifton/pen/JIfhy)

我的问题是，如何确保链接在导航到该项目的子菜单时保持其悬停颜色。

我希望这是有道理的，我尝试使用 a:active 但它似乎没有效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:45:33.337

设置悬停状态的颜色`li`：

```
.menu-side-menu-container li:hover > a
{
  #FFFFFF;
} 
```

***现场演示：http:*** *[//jsfiddle.net/xxf9B/1](http://jsfiddle.net/xxf9B/1)*

# text - 如何在绘图外插入文本

> ID：15139654
> 
> 赞同：1
> 
> 时间：2013-02-28T15:42:25.997
> 
> 标签：text, matplotlib

我有以下情节（3行4列）：

```
f, ((ax1, ax2, ax3, ax4), (ax5, ax6, ax7, ax8), (ax9, ax10, ax11, ax12)) = plt.subplots(3,   4, sharex = 'col', sharey = 'row')
ax1.set_title('column1')
ax1.plot([x], [y])
ax5.plot([x1],[y1])
ax9.plot([x2],[y2])
ax2.set_title('column2')
ax2.plot([x3],[x4])
ax6.plot([x5],[x6])
..... 
```

如何在绘图窗口之外插入文本？对于每一行，我想在情节的右端写一个句子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:45:53.797

您可以使用该[`ax.set_title()`](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_title)功能。

或者，您可能希望使用该[`ax.text()`](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.text)功能放置文本。请注意，您可以在 position 参数中使用超出坐标区范围的值。此外，您可以使用参数设置参考坐标系`transform`。

# cuda - 带浮点数的减和核的精度

> ID：15139656
> 
> 赞同：2
> 
> 时间：2013-02-28T15:42:34.303
> 
> 标签：cuda

我正在创建一个调用 Nvidia 的 Sum Reduction 内核（reduction6）的例程，但是当我比较 CPU 和 GPU 之间的结果时，得到的错误会随着向量大小的增加而增加，因此：

CPU 和 GPU 减少都是浮点数

```
Size: 1024  (Blocks : 1,  Threads : 512)
Reduction on CPU:  508.1255188 
Reduction on GPU:  508.1254883 
Error:  6.0059137e-06

Size: 16384 (Blocks : 8, Threads : 1024)
Reduction on CPU:  4971.3193359 
Reduction on GPU:  4971.3217773 
Error:  4.9109825e-05

Size: 131072 (Blocks : 64, Threads : 1024)
Reduction on CPU:  49986.6718750 
Reduction on GPU:  49986.8203125 
Error:  2.9695415e-04

Size: 1048576 (Blocks : 512, Threads : 1024)
Reduction on CPU:  500003.7500000 
Reduction on GPU:  500006.8125000 
Error:  6.1249541e-04 
```

关于这个错误的任何想法？，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T03:05:50.300

[浮点加法不一定是关联](http://en.wikipedia.org/wiki/Floating_point)的。

这意味着当您更改浮点求和的运算顺序时，您可能会得到不同的结果。根据定义并行化求和会改变求和的运算顺序。

对浮点数求和的方法有很多种，每种方法对不同的输入分布都有准确性优势。[这是一个体面的调查](https://web.archive.org/web/20150929024929/http://www.sigsam.org/bulletin/articles/147/sumnums.pdf)。

给定顺序的顺序求和很少是最准确的求和方式，因此，如果这是您要比较的内容，请不要指望它与典型并行归约中使用的基于树的求和相比较。

# php - Heroku 上的 PHP 应用程序架构

> ID：15139660
> 
> 赞同：0
> 
> 时间：2013-02-28T15:42:40.463
> 
> 标签：php, architecture, heroku

我在 Heroku 上有一个 PHP 应用程序，该应用程序与外部 API 进行大量通信，从而触发数据库上的作业，然后将结果显示在 Facebook 应用程序中......

目前我有 2 个工作进程和一个 Web 进程。Web 进程触发工作人员并监视数据库标志以了解每个工作人员作业何时完成......我知道......这个设置不是很好，理想情况下，我希望在每个工作进程完成时在我的 Web 进程中得到通知完成了，但这似乎不可能......

有没有更好的方法在 Heroku 中使用 PHP 来解决这个问题？

也许 Heroku 上的 PHP 应用程序不是最好的解决方案，但我写了很多我不想重写的 PHP....

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:08:37.633

我可以想到两件相对简单的事情，你可以在不放弃 PHP 的情况下做（尽管我不得不提到 PHP 没有太多可推荐的，你可能会更好地使用 Python/Django、Python/Flask 或 Ruby/Rails ):

一是您可以切换到 Redis 来管理您的工作人员，而不是使用您的数据库。这样做的好处是 Redis 有一个发布/订阅系统，您可以在其中订阅信号，同时保持连接打开。这意味着如果连接打开，例如来自 Web 进程，您将立即收到更改通知，而无需轮询。

二是您可以切换到使用 ajax，这样您就不会在等待时阻止页面的加载。立即加载您的页面，然后使用 javascript 访问单独的 PHP 页面以定期检查您的工作状态的更新，然后在结果可用时使用 javascript 在页面上呈现结果。

更好的是，使用 ajax 长轮询。立即呈现您的页面，然后使用 javascript 发回请求。然后当您的 php 页面收到第二个请求时，向 Redis 注册订阅，然后手动检查更新（如果您不使用 Redis，只需检查更新）。如果没有更新，则等待订阅收到消息，或等待 30 秒，以两者为准。（老实说，我从来没有在 PHP 中完成过 Redis 订阅，所以我不确定如何实现它——如果你不能轻松地做到这一点，那就每隔几秒钟轮询一次。）如果 30 秒计时器到期，返回 json 表示没有结果并立即重试 javascript。如果您确实在该时间内收到了结果，请返回结果并让 javascript 呈现它们。

# html - 在垂直菜单中换行

> ID：15139668
> 
> 赞同：1
> 
> 时间：2013-02-28T15:43:09.117
> 
> 标签：html, css, word-wrap

这是我的简单菜单代码

```
 <ul id="admin-ul">
    <li id="admin-li" class="no1"><a href="dodaj.php">Dodaj informacije za sdf dsf dsfdddd</a></li>
    <li id="admin-li" class="no2"><a href="pregledaj.php">Pregledaj</a></li>
    <li id="admin-li" class="no3"><a href="veterinari.php">Veterinari</a></li>
    <li id="admin-li" class="no4"><a href="../logout.php">Logout</a></li>
  </ul> 
```

和 CSS

```
ul#admin-ul
{
    list-style-type:none;
    margin:0;
    padding:0;
}

li#admin-li
{
    display:inline-block;
    width:24%;
    height:270px;
}

ul li a
{
    display:block;
    height:270px;
    line-height:270px;
    text-align:center;
} 
```

我想知道如何换行我的文字，因为它是这样显示的![在此处输入图像描述](../Images/bc850e396810ed35f7ec734ed1e379c9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:35:12.070

只需`vertical-align: top`在您`<li>`的 s 上使用。请注意，所有 id 都必须是唯一的，因此这是无效的 HTML：

```
<li id="admin-li" class="no1"><a href="dodaj.php"></a></li>
<li id="admin-li" class="no1"><a href="dodaj.php"></a></li> 
```

`<li>`您可以使用这样的子选择器更轻松地设置所有 s 的样式：

```
ul#admin-ul > li {
    /* other li rules */
    vertical-algin: top;
} 
```

您可以将您的列表更新为：

```
<ul id="admin-ul">
    <li class="no1"><a href="dodaj.php"></a></li>
    <li class="no1"><a href="dodaj.php"></a></li>
</ul> 
```

最终演示：http: [//jsfiddle.net/eXKdG/](http://jsfiddle.net/eXKdG/)

*[更新]*

因为我没有注意到块级`<a>`-tag 中文本的垂直居中：[tesdki](https://stackoverflow.com/users/854803/tedski)只是`display: table-cell;`在`<a>`-tags 上使用是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:02:31.733

试试这个：

```
ul#admin-ul
{
    list-style-type:none;
    margin:1em 0 0 0;
    padding:0;
}

li#admin-li
{
    display:table;
    width:24%;
    position:relative;
    float:left;
    overflow:hidden;
    height:270px;
    margin: 0 3px;
}

ul li a
{
    display:table-cell;
    vertical-align:middle;
    height:270px;
    text-align:center;
} 
```

源自这里：[http ://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

这在 IE7 标准模式下不起作用，但几乎其他一切都很好。

# c# - 在richtextBox中找一个数据，我用的是富文本格式

> ID：15139669
> 
> 赞同：1
> 
> 时间：2013-02-28T15:43:10.773
> 
> 标签：c#, asp.net

我尝试在**richTextBox**中查找数据。我可以尝试使用 richTextBox1.Find("textBox1.text") 选项。我是编程新手。当运行此代码一次找到数据并且无法选择整个页面时。我一次又一次地尝试，但不能这样做。我再一次告诉我我的问题是什么，我的问题是在整个页面中找到一个数据。但找到一次数据并停止。我的编码部分在下面...请帮助我...在此先感谢..

```
 private void gOToToolStripMenuItem_Click(object sender, EventArgs e)
    {  if (richTextBox1.Text.Trim().Length > 0)
        {
            FindMyText("joginder", 0, richTextBox1.Text.Length);

        }
    }
    public int FindMyText(string searchText, int searchStart, int searchEnd)
    {         
        int returnValue = -1;            
        if (searchText.Length > 0 && searchStart >= 0)
        {               
            if (searchEnd > searchStart || searchEnd == -1)
            {                   
                int indexToText = richTextBox1.Find(searchText, searchStart, searchEnd, RichTextBoxFinds.MatchCase);                    
                if (indexToText >= 0)
                {                        
                    returnValue = indexToText;
                } }
        }

        return returnValue;
   }  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:08:25.920

您需要通过文本重复搜索，推进起始位置。

更新您的代码如下：

```
public void FindAllMatches(string searchText)
{
    int start = 0;
    int increment = searchText.Length;
    bool complete = false;
    while (!complete)
    {
        start = richTextBox1.Find(searchText, start, RichTextBoxFinds.MatchCase);
        if (start >= 0) start += increment;
        else complete = true;
    }
} 
```

# javascript - 将数据发送到服务器的最佳方式是什么？

> ID：15139670
> 
> 赞同：0
> 
> 时间：2013-02-28T15:43:11.943
> 
> 标签：javascript, json, post

我正在使用 POST 请求将数据发送到服务器，但我想发送这样的经典请求是否更好：

```
$.post(
    "<?php echo Settings\Path\URL::$ajax?>/ajaxValidator.php",
    {
                      item : "Captcha",
        recaptchaChallenge : Recaptcha.get_challenge(),
         recaptchaResponse : Recaptcha.get_response()
    },
    function(result){
        if(result == "true"){
            signup();
        } else {
            $("#signupRecaptchaError").show();
            recaptchaCreate();
        }
    }
); 
```

或者如果最好使用 JSON 的 POST 请求发送数据，如下所示：

```
var data = {
                      item : "Captcha",
        recaptchaChallenge : Recaptcha.get_challenge(),
         recaptchaResponse : Recaptcha.get_response()
}

$.post(
    "<?php echo Settings\Path\URL::$ajax?>/ajaxValidator.php",
    data,
    function(result){
        if(result == "true"){
            signup();
        } else {
            $("#signupRecaptchaError").show();
            recaptchaCreate();
        }
    }
); 
```

如果有什么不同，你能告诉它是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:48:06.873

没有区别。您只更改了客户端收集数据的方式。请求完全相同。

哪种收集数据的方法更好取决于框架的整体结构。

Looking at your code I can identify some other issues that need addressing before you can start worrying about large architectural questions like this. So my recommendation is: it doesn't matter for now, until you can come up with with a clear reason why one is better than the other.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:47:57.113

没有任何区别，但我个人更喜欢后者。将参数抽象为您提供更大的灵活性。如果需要，它允许您在运行时交换值。

# php - （字符串）是否“硬拷贝”一个字符串？

> ID：15139673
> 
> 赞同：27
> 
> 时间：2013-02-28T15:43:23.830
> 
> 标签：php, string, copy-on-write

[PHP 使用修改时复制系统。](https://stackoverflow.com/questions/4565518/php-string-is-a-value-type/4565539#4565539)

`$a = (string) $a;`($a is a already string)是否修改和复制任何内容？

* * *

特别是，这是我的问题：

参数 1 是`mixed`/ 我想允许传递非字符串并将它们转换为字符串。
但有时这些字符串非常大。所以我想省略一个参数的复制，那已经是一个字符串。

我可以使用版本`Foo`还是必须使用版本`Bar`？

```
class Foo {
    private $_foo;
    public function __construct($foo) {
        $this->_foo = (string) $foo;
    }
}

class Bar {
    private $_bar;
    public function __construct($bar) {
        if (is_string($bar)) {
            $this->_bar = $bar;
        } else {
            $this->_bar = (string) $bar;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-28T16:45:26.340

答案是肯定的，它确实复制了字符串。有点……不是真的。好吧，这取决于您对“复制”的定义...

## >= 5.4

要了解发生了什么，让我们看看源代码。[执行器在此处处理 5.5 中](http://lxr.php.net/xref/PHP_5_5/Zend/zend_vm_execute.h#13249)的变量转换。

```
 zend_make_printable_zval(expr, &var_copy, &use_copy);
    if (use_copy) {
        ZVAL_COPY_VALUE(result, &var_copy);
        // if optimized out
    } else {
        ZVAL_COPY_VALUE(result, expr);
        // if optimized out
        zendi_zval_copy_ctor(*result);
    } 
```

如您所见，[`zend_make_printable_zval()`](http://lxr.php.net/xref/PHP_5_5/Zend/zend.c#229)如果 zval 已经是一个字符串，则调用使用 which 只是短路。

所以执行复制的代码是（else分支）：

```
ZVAL_COPY_VALUE(result, expr); 
```

现在，让我们看一下[的定义`ZVAL_COPY_VALUE`](http://lxr.php.net/xref/PHP_5_5/Zend/zend.h#754)：

```
#define ZVAL_COPY_VALUE(z, v)                   \
    do {                                        \
        (z)->value = (v)->value;                \
        Z_TYPE_P(z) = Z_TYPE_P(v);              \
    } while (0) 
```

注意这是在做什么。字符串本身*不会*被复制（存储在`->value`zval 的块中）。它只是被引用（指针保持不变，因此字符串值相同，没有副本）。但它正在创建一个新变量（包装值的 zval 部分）。

现在，我们开始[`zendi_zval_copy_ctor`](http://lxr.php.net/xref/PHP_5_5/Zend/zend_variables.c#106)通话。它在内部自己做了一些有趣的事情。笔记：

```
case IS_STRING:
    CHECK_ZVAL_STRING_REL(zvalue);
    if (!IS_INTERNED(zvalue->value.str.val)) {
        zvalue->value.str.val = (char *) estrndup_rel(zvalue->value.str.val, zvalue->value.str.len);
    }
    break; 
```

基本上，这意味着如果它是一个实习字符串，它将不会被复制。但如果不是，它将**被复制**......那么什么是实习字符串，这是什么意思？

## <= 5.3

在 5.3 中，不存在内部字符串。所以字符串总是被复制。这真的是唯一的区别...

## 基准时间：

好吧，在这样的情况下：

```
$a = "foo";
$b = (string) $a; 
```

在 5.4 中不会出现字符串的副本，但在 5.3 中会出现副本。

但在这样的情况下：

```
$a = str_repeat("a", 10);
$b = (string) $a; 
```

所有版本**都会**生成一个副本。那是因为在 PHP 中，并非所有字符串都被保留...

让我们在基准测试中尝试一下：http: [//3v4l.org/HEelW](http://3v4l.org/HEelW)

```
$a = "foobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisoutfoobarbizbazbuztestingthisout";
$b = str_repeat("a", 300);

echo "Static Var\n";
testCopy($a);
echo "Dynamic Var\n";
testCopy($b);

function testCopy($var) {
    echo memory_get_usage() . "\n";
    $var = (string) $var;
    echo memory_get_usage() . "\n";
} 
```

结果：

*   5.4 - 5.5 alpha 1（不包括其他 alpha，因为差异很小，不会产生根本差异）

    ```
    Static Var
    220152
    220200
    Dynamic Var
    220152
    220520 
    ```

    所以静态var增加了48字节，动态var增加了368字节。

*   5.3.11 至 5.3.22：

    ```
    Static Var
    624472
    625408
    Dynamic Var
    624472
    624840 
    ```

    静态变量增加了 936 字节，而动态变量增加了 368 字节。

所以请注意，在 5.3 中，静态和动态变量都被复制了。所以字符串总是重复的。

但是在带有静态字符串的 5.4 中，只复制了 zval 结构。这意味着被实习的字符串本身保持不变并且不会被复制......

## 另一件事

另一件需要注意的是，以上所有内容都没有实际意义。您将变量作为参数传递给函数。然后你在函数内部进行强制转换。所以写时复制将由您的线路触发。所以运行它*总是*会触发一个变量副本（好吧，在 99.9% 的情况下）。所以充其量（实习字符串）你在谈论 zval 重复和相关的开销。在最坏的情况下，您正在谈论字符串重复...

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-28T15:47:03.047

您的代码实际上并没有这样做：

```
$a = (string)$a; 
```

更像是这样，因为当字符串作为函数参数传递时应用了写时复制语义：

```
$b = (string)$a; 
```

这两种说法有很大的不同。第一个不会对内存产生任何影响，而第二个会......通常。

以下代码大致完成了您的代码将执行的操作；传递了一些字符串，然后您将其转换并分配给另一个变量。它跟踪内存的增加。

```
<?php

$x = 0;
$y = 0;

$x = memory_get_usage();

$s = str_repeat('c', 1200);

$y = memory_get_usage();

echo $y - $x, PHP_EOL;

$s1 = (string)$s;

$x = memory_get_usage();

echo $x - $y, PHP_EOL; 
```

[**结果（5.4.9）**](http://codepad.viper-7.com/FKBSwu)：

```
1360
1360 
```

[**结果（5.3.19）**](http://codepad.viper-7.com/YF35Wq)：

```
1368
1368 
```

赋值基本上复制了整个字符串值。

**使用字符串文字**

使用字符串文字时，行为取决于版本：

```
<?php

$x = 0;
$y = 0;

$x = memory_get_usage();

$s = 'cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc';

$y = memory_get_usage();

echo $y - $x, PHP_EOL;

$s1 = (string)$s;

$x = memory_get_usage();

echo $x - $y, PHP_EOL; 
```

[**结果（5.4.9）**](http://codepad.viper-7.com/YbK5T5)：

```
152
136 
```

[**结果（5.3.19）**](http://codepad.viper-7.com/CbvE48)：

```
1328
1328 
```

原因是引擎对字符串文字的处理方式不同，正如您可以从[ircmaxell 的答案](https://stackoverflow.com/a/15140984/1338292)中看到的那样。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-28T15:58:55.197

令人惊讶的是，它确实创建了一个副本：

```
$string = "TestMe";
debug_zval_dump($string);

$string2 = $string;
debug_zval_dump($string);

$string3 = $string;
debug_zval_dump($string);

$string4 = (string) $string;
debug_zval_dump($string);

$string5 = (string) $string;
debug_zval_dump($string); 
```

输出：

```
string(6) "TestMe" refcount(2)
string(6) "TestMe" refcount(3)
string(6) "TestMe" refcount(4)
string(6) "TestMe" refcount(4)
string(6) "TestMe" refcount(4) 
```

另一个证明：

```
echo memory_get_usage(), PHP_EOL;

$s = str_repeat('c', 100000);
echo memory_get_usage(), PHP_EOL;

$s1 = $s;
echo memory_get_usage(), PHP_EOL;

$s2 = (string) $s;
echo memory_get_usage(), PHP_EOL; 
```

输出：

```
627496
727664
727760  # small increase, new allocated object, but no string copy
827928  # oops, we copied the string... 
```

# .net - 使用 VB 或 C# 从 oracle blob 中检索 img html 控件中的图像？

> ID：15139678
> 
> 赞同：0
> 
> 时间：2013-02-28T15:43:42.067
> 
> 标签：.net, oracle, blob, image, src

我有一个 webform 应用程序，我尝试了不同的方法从 Oracle 检索 blob 图像，但我做不到。我想 `<img src="" />` 在我的 .aspx 中显示 blob 图像。我希望你能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:51:50.110

试试这个帖子。它有你如何将它从数据库中获取到 Image 对象的答案，当然你只需在后面的代码中分配图像。

[http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/321ad2bf-6c83-4ac6-b6bb-e2b8472bea30](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/321ad2bf-6c83-4ac6-b6bb-e2b8472bea30)

顺便说一句，你不会`<img src=""/>`在你的 .aspx 中使用，你会使用`<asp:Image ID="someImageID" runat="server"/>`，然后你可以通过后面代码中的 ID 访问你的图像。这不是唯一的方法。我的意思是你可能会使用 Razor 或其他东西，然后你可能会以不同的方式使用它，但这是一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:21:37.083

我解决了，我做了一个返回 Byte() 的函数

```
Dim command As New OracleCommand("select photo from photoblob where id='1'", connection)
Dim reader As OracleDataReader = command.ExecuteReader
        If reader.Read Then
            Dim blob As OracleBlob = reader.GetOracleBlob(0)
            Dim byteArr As [Byte]() = New [Byte](blob.Length - 1) {}
            Dim i As Integer = blob.Read(byteArr, 0, System.Convert.ToInt32(blob.Length))
            blob.Close()
            connection.Close()
                Return byteArr
        End If 
```

最后，我使用[http://bit.ly/YDlBvM](http://bit.ly/YDlBvM)获取的这段代码将 src 添加到

```
Dim imageData As Byte() = functionReturnsByte()
Dim imageBase64 As String = Convert.ToBase64String(imageData)
Dim imageSrc As String = String.Format("data:image/gif;base64,{0}", imageBase64)
img.Attributes("src") = imageSrc 
```

抱歉打扰了。感谢您的回复

# java - 使用自定义 Java 对象回调后对象仍在内存中

> ID：15139679
> 
> 赞同：2
> 
> 时间：2013-02-28T15:43:53.243
> 
> 标签：java, matlab, custom-controls

我有一个内存泄漏问题。我正在创建一个包装在 MATLAB 类中的 jLabel 对象。我正在使用所有集合/获取的句柄来尝试防止问题和内存泄漏。

我正在使用此代码为 jLabel 设置 MouseExitedCallback。这是类的一个方法：

```
function SetMouseExitedCallback (obj, exitcallback)
    set (obj.hLabel, 'MouseExitedCallback', exitcallback)
end 
```

这个方法是从另一个实际上包含 MouseExitedCallback 代码的类调用的。在那个类中，它是这样调用的：

```
obj.tooltip.SetMouseExitedCallback (@(src, event)obj.MouseExited); 
```

我遇到的问题是，如果我添加最后一行，如果我尝试编辑项目中的文件，它会告诉我 jLabel 类仍在内存中。我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:00:55.647

首先我的想法是

```
obj.tooltip.SetMouseExitedCallback (''); 
```

它在删除（析构函数）方法中。那没有用，因为从未调用过析构函数。实际上，也从未为另一个类调用析构函数，即定义了实际 MouseExited() 回调的类。

最后起作用的是调用：

```
obj.tooltip.SetMouseExitedCallback (''); 
```

在隐藏工具提示的方法中。它与 Mouse Exited() 方法在同一个类中定义。然后在应用程序关闭后，VM 调用析构函数并销毁对象。

# c - 如何确定这个c程序的时间复杂度

> ID：15139680
> 
> 赞同：0
> 
> 时间：2013-02-28T15:43:55.260
> 
> 标签：c, algorithm, time-complexity

```
void mystery2 (int n)
{
 int i;
 for (i = 1; i <= n; i++) {
    double x = i;
    double delta = 1 / (double)i;
    while ( x > 0 )
      x -= delta;
  }
return 0;
} 
```

[如何使用像这里的跟踪表http://pages.cs.wisc.edu/~vernon/cs367/notes/3.COMPLEXITY.html#application](http://pages.cs.wisc.edu/~vernon/cs367/notes/3.COMPLEXITY.html#application)而不是通过猜测来确定该程序的时间复杂度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:50:26.793

对于每次迭代，最初你有`x=i`，然后每次`x`递减。`1/i`所以这将重复`i/(1/i)==i^2`多次。

因此，对于 的每次迭代`for(i=1;i<n;++i)`，内部的复杂度为`O(i^2)`。当`i`从 1 增长到 n 时，它就像加`(1^2+2^2+3^2+...+n^2)`，大致是`n^3/6`。就这样`O(n^3)`。

* * *

```
 Outer loop(for)          Inner Loop
    I=1                      1
    I=2                      4
    I=3                      9
    ...                      ..
    I=N                      N^2
 TOTAL_                      ~N^3/6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:56:02.203

这相对简单：您需要确定两个嵌套循环中的每一个执行多少次，并同时考虑复杂性。

外层循环是一个平凡的`for`循环；它执行`n`时间。

内部循环需要更多注意：它不断减去`1/i`，`i`直到它变为零或变为负数。很容易看出，从中减去需要`i`循环的迭代。由于最初设置为，因此内部循环所花费的总时间为。`while``1``x``x``i``i^2`

因此，对于和 ，总数是`x`平方和。`x``1``n`

[Wolfram Alpha 告诉我们，这个问题的答案是`n*(n+1)*(2n+1)/6`](https://www.wolframalpha.com/input/?i=sum%20of%20x%5E2%20for%20x%20between%201%20and%20n)

这扩展到`n^3/3 + n^2/2 +n/6`多项式，其复杂度为`O(n^3)`.

# imacros - iMacros 和许多结果网页

> ID：15139681
> 
> 赞同：0
> 
> 时间：2013-02-28T15:43:56.800
> 
> 标签：imacros

我想填写表格进行搜索。

有时可能会有 0-19 个结果，没关系，它有效。

但只要有“下一步”按钮，我想模拟点击它，然后将页面另存为`[namefile]-2`，，`[namefile]-3`等等`[namefile]-4`。

知道你会怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:06:53.130

```
var macroClickNext;

macroClickNext ="CODE:";
//this is just example of button not like your case
macroClickNext +="TAG POS=1 TYPE=BUTTON ATTR=TXT:Next";

var macroTestNext;

macroTestNext ="CODE:";
//this is just example of the button not like in your case
macroTestNext +="TAG POS=1 TYPE=BUTTON ATTR=TXT:Next CONTENT=EVENT:MOUSEOVER";

var test=false;

while(true)
{

test=iimPlay(macroTestNext)

if (test>0)
{
iimPlay(macroNext)
}
else
{
break;
}

} 
```

在您的示例中，这可以完成工作。只要它在页面上，它就会单击下一步按钮。`CONTENT:EVENT:MOUSEOVER` 是一个悬停在页面元素上的简单事件。如果存在，它将返回 true ，否则将返回 false 。

# javascript - 样式单选按钮，仅显示选中

> ID：15139686
> 
> 赞同：0
> 
> 时间：2013-02-28T15:44:06.183
> 
> 标签：javascript, jquery, css

'目前正在做一个项目，有两个选项，我想要一个指向手指图像而不是标准单选按钮，以及这个我想知道是否可以只显示一个单选按钮仅被选中。

我尝试过使用 js 库，但似乎无法让它工作

当前代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Test</title>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="js/jquery.screwdefaultbuttonsV2.min.js" ></script>
<script type="text/javascript">
$('input:radio').screwDefaultButtons({ 
    image: "url(images/hand.png)",
    width:   39,
    height:  17
});
</script>
</head>

<body>

        <div id="content">

<label for="LiquoriceandPeppermint" class="check">Liquorice and Peppermint<input type="radio" name="flavour" id="LiquoriceandPeppermint" value="option1" /></label><br>

<label for="RooibusCremeCaramel " class="check">Rooibus Crème Caramel <input type="radio" name="flavour" id="RooibusCremeCaramel " value="option2" /></label>

</div>

</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:50:09.537

单选按钮由操作系统呈现，而不是浏览器。在浏览器中，它们的样式一直受到限制且非标准化。你最好尝试设置标签的样式来完成你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:53:01.673

尝试CSS：

```
input[type='radio']:checked {
    background: url("images/hand.png") center center no-repeat;
    opacity: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:40:16.587

这可以创建完全自定义的单选按钮。甚至不同的图标...

```
 input[type="radio"] {
        display:none;
        vertical-align: middle;
    }
input[type="radio"] + label {
    display:inline;
    font-size: 18px;

}
input[type="radio"] + label:before {
    content: '';
    display:inline-block;
    width: 25px;
    height: 25px;
    border: 2px solid black;
}

input[type="radio"][class="customRadio"] + label:before {
    background: url('../icons/bc.png') no-repeat;
}

input[type="radio"][class="customRadio"]:checked + label:before {
    background: url('../icons/bc1.png') no-repeat;    
} 
```

# events - Angular.js：观察一个对象的高度并更新另一个对象的填充

> ID：15139687
> 
> 赞同：3
> 
> 时间：2013-02-28T15:44:10.053
> 
> 标签：events, resize, angularjs

我可以在指令中观察一个对象的属性（实际上是-clientHeight）。但是如何根据这个高度改变其他对象的 padding-top 呢？我知道如何使用 jQuery 来做到这一点，但我正在寻找一种 Angular 方式。

在 Angular 中，可以使用指令访问某些页面元素。好的，但是如何访问同一指令中的其他页面元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:58:28.227

有很多方法可以做到这一点。对于以下所有建议，假设您有两个指令——一个用于查看 clientHeight，另一个用于调整填充。

*   创建一个服务（注入到两个指令中）。让第一个指令修改服务中的对象属性（例如，`someObj.prop1`）。另一个指令 $watches 该对象属性。
*   使用事件。让第一个指令 $emit 或 $broadcast 一个事件，第二个指令可以使用 $on 监听它（在它的链接函数中或在它自己的控制器中）。
*   如果存在祖先关系，则可以`require`在后代指令中将祖先指令的控制器。有关示例，请参见[AngularJS：重用具有不同父级的组件。](https://stackoverflow.com/questions/14538839/angularjs-reuse-component-with-different-parent)

*   不推荐，但另一种选择：使用 $rootScope 而不是服务：将 $rootScope 注入两个指令。让第一个指令修改 $rootScope 上的对象属性。另一个指令 $watches 该对象属性。

# c# - 使用 Microsoft Translator api 转换不用于翻译的人名

> ID：15139695
> 
> 赞同：1
> 
> 时间：2013-02-28T15:44:42.147
> 
> 标签：c#, translate, microsoft-translator

我打电话给微软翻译把阿拉伯名字转换成英文但它翻译名字，我只想转换名字

例如：أحمد ماهر

需要成为艾哈迈德·马赫

该服务正在运行，但它翻译名称的含义而不仅仅是名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-24T05:03:40.320

我不了解其他语言，但对于您的示例 أحمد ماهر = Ahmed Maher 我所知道的是罗马化不适用于它

为什么？因为变形和字母“运动”使一个字母多于一种发音。例如

مَح = Mah مُح = Muh

相同的字母，但发音不同。

我所做的解决方案是转换名称的规则您可以找到我所做的代码和 npm[包](https://www.npmjs.com/package/arabic-name-to-en)。如果您有任何疑问、问题或您试图了解阿拉伯语的规则，我将很乐意为您提供帮助。

请查看以下内容以了解有关转换阿拉伯名称所需规则的更多信息：

**第一个字母规则** 我正在检查该字母是否是第一个字母，因为如果字母“و”是第一个字母，人们倾向于写它“W”，但如果它在单词内部，它将写成“O”。

**内部字母规则** 我的意思是所有不是第一个也不是最后一个的字母，它将根据字母进行更改，例如第一个图像“م”将等于“H”</p>

**下一封信规则** 在这条规则中，我检查了这封信和即将到来的一封。比如如果字母是“م”而下一个字母是“ع”则应该写成“Mua” 如果字母是“م”而下一个字母是“ي”则应该写成“May” ￼ **特殊字母规则** 它看起来像下一个字母规则，但它将包含另一个动作，例如“切片”例如：在“首字母规则”中，我说单词中的“و”将转换为“O”。我需要删除“O”并为“ا”添加一个“w”然后是“A”但是如果下一个字母是并且我相信这个规则可以得到加强，但它很重要。

**最后一个字母规则** 如果没有此规则，名称“Sarah”将从阿拉伯语转换为“Sara” 此规则检查最后一个字母是否为“ه”“ة”，如果是，则添加“H”来完成名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:53:44.217

如果它在网站上，您可以在小部件中启用协作翻译框架功能，并使用该功能将翻译“覆盖”为名称。

如果您正在构建应用程序，API 也支持这一点。

小部件文档在这里：http: [//blogs.msdn.com/b/translation/p/ctf1.aspx](http://blogs.msdn.com/b/translation/p/ctf1.aspx)在这里：http : [//blogs.msdn.com/b/translation/p/ctf2.aspx](http://blogs.msdn.com/b/translation/p/ctf2.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:52:49.923

听起来你想要一个字符替换，而不是一个真正的翻译。您可以使用`String.Replace`.

有人问了类似的关于将西里尔文音译为拉丁文的问题： [如何将西里尔文音译为拉丁文文本](https://stackoverflow.com/questions/1841874/how-to-transliterate-cyrillic-to-latin-text)

# php - Magento 获取购物车单项价格，包括。税

> ID：15139697
> 
> 赞同：10
> 
> 时间：2013-02-28T15:44:45.130
> 
> 标签：php, magento, magento-1.7

我有一个非常奇怪的问题，我希望有人能帮助我解决这个问题。

以下是影响我的问题的主要配置设置：

*   管理面板中的目录价格显示为含税
*   前端目录价格显示含税
*   购物车中的商品不含税（因此在小计附近单独显示）。

到目前为止一切正常。问题出现在自定义 ajax 迷你购物车模块中。我从购物车中获取商品集合，但是，由于我是从购物车商品中获取价格，所以我得到的是免税的。

这是一些代码来说明我的意思。我将假设一个**20%**的税和一个产品的管理价格（含税）设置为**120$**，一个成本**为 60$**（也包括税）的选项。不包括税，这些将是**100 美元**和**50 美元**。我想得到价格+期权+税=> **180$**

```
$quote = Mage::getSingleton('checkout/session')->getQuote();
$items = $quote->getAllVisibleItems();
foreach ($items as $item) {
    echo $item->getPrice(); // 150$ - price excluding tax
    echo $item->getPriceInclTax(); // 150$ - price excluding tax
    echo $item->getProduct()->getPrice(); // 120$ price including tax, BUT without the customer selected options.
} 
```

**PS：**我正在谈论的自定义选项是用户选择的，例如一个安装复选框，它会在产品价格上增加 +50 美元。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:23:00.920

```
- Get products id, name, price, quantity, etc. present in your cart.
- Get number of items in cart and total quantity in cart.
- Get base total price and grand total price of items in cart.

Get all items information in cart
// $items = Mage::getModel('checkout/cart')->getQuote()->getAllItems();
$items = Mage::getSingleton('checkout/session')->getQuote()->getAllItems();

foreach($items as $item) {
    echo 'ID: '.$item->getProductId().'<br />';
    echo 'Name: '.$item->getName().'<br />';
    echo 'Sku: '.$item->getSku().'<br />';
    echo 'Quantity: '.$item->getQty().'<br />';
    echo 'Price: '.$item->getPrice().'<br />';
    echo "<br />";           
}

Get total items and total quantity in cart
$totalItems = Mage::getModel('checkout/cart')->getQuote()->getItemsCount();
$totalQuantity = Mage::getModel('checkout/cart')->getQuote()->getItemsQty();

Get subtotal and grand total price of cart
$subTotal = Mage::getModel('checkout/cart')->getQuote()->getSubtotal();
$grandTotal = Mage::getModel('checkout/cart')->getQuote()->getGrandTotal(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:33:13.200

你有没有尝试过：

```
$product->getFinalPrice();

// or this?
$product->getPriceModel()->getFinalPrice($qty, $product); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T12:32:32.550

的输出是`$item->getOptions()`什么？你试过`$item->getData('price')`吗？您如何应用自定义选项？的输出是`$item->debug()`什么？也许你可以在那里找到你需要的东西。

问候西蒙

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T08:18:01.683

我没有找到解决我确切问题的方法，但我更改了设置以模仿这个确切的功能，我遇到的问题不再存在。

首先，我删除了网站上的所有税费，并告诉 magento 所有的价格都是不含税的（即使它们是含税的）。

减税现在是通过对自定义组应用的促销来实现的，因此对于

```
$tax = 20; // percent 
```

我添加了一个减少

```
(1 - (1 / ($tax / 100 + 1)))*100 
// for 20% tax => 16.6667% reduction
// for 24% tax => 19.3548% reduction 
```

有 4 位小数（这与 magento 接受的一样多）。它可能不时有 1 美分的误差 - 所以如果这不是问题，那就去做吧！

现在，整个网站的价格都将准确地显示为产品（因为促销是按购物车应用的，而不是按产品应用的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T06:25:38.727

你可以试试这个：

```
$grandTotal = $this->helper('checkout/cart')->getQuote()->getGrandTotal();
echo $text .= $this->__(' Total: %s', $this->helper('core')->formatPrice($grandTotal, false)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T10:28:25.143

**在我的标题中显示购物车的数量**

```
if ($parentBlock = $this->getParentBlock()) {
$count = $this->helper('checkout/cart')->getSummaryCount();
if( $count == 1 ) {
echo $text = $this->__('My Cart (%s item)', $count);
} elseif( $count > 0 ) {
echo $text = $this->__('My Cart (%s items)', $count);
} else {
echo $text = $this->__('My Cart (0 items)');
}
} 
```

**在我的标题中显示购物车的总价**

```
$grandTotal = $this->helper('checkout/cart')->getQuote()->getGrandTotal();
echo $text .= $this->__(' Total: %s', $this->helper('core')->formatPrice($grandTotal, false)); 
```

# performance - EaselJS 和多层画布系统：性能调优、游戏开发、事件处理

> ID：15139698
> 
> 赞同：2
> 
> 时间：2013-02-28T15:44:53.313
> 
> 标签：performance, caching, canvas, dom-events, easeljs

我是一名工程师，我们目前正在将我们的 Red5 + Flash 游戏移植到 Node.js + Easeljs html5 应用程序中。

基本上：这是一款棋盘游戏，而不是 rpg。图层系统意味着我们有多个画布，基于功能。例如，有一个带有图像的静态背景舞台。有一个仅用于计时器的层。

默认情况下，所有画布大小为 1920x1080，如果需要，我们会缩小以适应分辨率。

第一种方法使用了 kinetic.js，但是当游戏变得复杂时性能下降。然后我们切换到画架，因为它的抽象级别较低，所以我们可以决定如何实现更多的功能，而不仅仅是使用提供的健壮的功能。

我很乐观，但现在又开始显示缓慢，这就是为什么我想深入了解内部并进行微调。（当然在 Chrome 中一切都很好，Firefox 是问题，但游戏必须在所有现代浏览器上流畅运行）。

主要层（阶段）是地图，包含约 30 个容器，每个容器中都有一个复杂的自定义形状，约 10 个图像。容器正在侦听鼠标事件，例如鼠标悬停、退出、单击。目前，例如在鼠标悬停时，我用渐变填充形状。

不知何故，当我使用缓存时，就像 tuts 中的方式一样，性能变得更糟，所以我认为我搞砸了一些东西。

我收集了一些高级问题：

1.  在所描述的情况下，我何时可以使用缓存以及如何使用？我已经在 init 上尝试过缓存，在填充其他颜色或渐变后使用 cacheUpdate，然后`stage.update()`. 没有影响。

2.  如果我有一个静态的、从不改变的阶段缓存在该层上没有意义，对吧？

3.  究竟`stage.update()`是做什么的？触发全层重绘？该文档提到了某种智能，如果更改然后重绘效果。

4.  如果我想用新的颜色或渐变重新填充自定义形状，我必须完全重新绘制其图形，而不仅仅是使用 setFill 方法，对吗？

5.  例如，在画架中，不可能只重绘一个容器，那么我怎么能设法不更新整个舞台，而只更新一个改变的容器呢？我认为我可以通过缓存来实现这一点，缓存所有容器只需更新更改的容器，但这种方式对我来说根本不起作用。

6.  缓存位图图像有意义吗？如果容器中有自定义形状和图像，什么更好？缓存容器或仅缓存容器中的形状。

    我发现了一个奇怪的错误，或者至少是一个有趣的线索。我的画布层完全重叠。在下层，鼠标悬停监听运行良好，但点击不在同一个容器/对象上。

7.  如何将单击事件传播到具有单击侦听器的重叠层？我已经使用简单的 DOM、jquery 进行了尝试，但事件对象与画布侦听器想要获得的对象相去甚远。

简而言之，我在尝试调整时已经成功玩过的方法和道具：`cache()`, `updateCache()`, `update()`, `mouseEnabled`, `snapToPixel`, `clear()`, `autoClear`, `enableMouseOver`, `useRAF`, `setFPS()`.

任何答案，建议，起点表示赞赏。

**更新：**

这款免费的棋盘游戏是一款策略游戏，因此您面对的是一张拥有约 30 个领土的世界地图。自定义形状是区域，容器包含区域形状和应该在区域上方的图标。这个容器重叠是最小的。

一个示例鼠标事件是悬停效果。玩家在领土形状上导航，然后形状被重新着色、调整大小等，并出现一个包含该地点详细信息的气泡。

基本上，1-3 个容器的最大数量可以一次更改（除了初始化阶段 -> 此时全部）。不仅FF中的动画和重新着色很慢，而且侦听器延迟也很高。

我写了一个更改处理程序，所以我只`stage.update()`在修改阶段和动画运行的阶段（tweenjs）上打勾。

在我的第一种方法中，我将每个图像放入容器中，在游戏过程中至少需要一次，所以我只在图像（而不是矢量）上设置可见标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T10:37:41.803

2：如果你的层或阶段没有改变，不要为那个层调用 stage.update() （所以它不会被重新渲染，给我一个低得多的 cpu！）例如，保持一个全局的“stagechanged”变量并在发生变化时将其设置为 true：

```
createjs.Ticker.addEventListener("tick",
    function() {
        if (stagechanged)
        {
            stagechanged = false;
            stage.update();
        }
    }); 
```

（或者您是否已经使用它，如您的“更新”中所述？）

4：我找到了一种更新例如填充颜色的方法:)

```
contaier1.shape1.graphics._fillInstructions[0].params[1] = '#FFFFFF'; 
```

（使用 chrome 调试器查看 _fillInstructions 数组以查看哪个数组位置包含您的颜色）

5：我找到了一种只画一个容器的方法 :)

```
 //manual draw 1 component (!)
        var a = stage.canvas.getContext("2d");
        a.save();
        container1.updateContext(a);  //set position(x,y) on context
        container1.draw(a);
        a.restore(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:53:49.783

关于缓存：有一些奇怪的缓存问题，不知何故性能会随着缓存矩形的某些大小而下降：[CreateJS / EaselJS Strange Performance with certain size shapes](https://stackoverflow.com/questions/14723101/createjs-easeljs-strange-performance-with-certain-size-shapes)

(2) 取决于您调用 stage.update() 的频率；

(3)

> 每次调用 update 方法时，stage 都会勾选任何暴露了 tick 方法的后代（例如 BitmapAnimation），并将其整个显示列表渲染到画布上。传递给 update 的任何参数都将传递给任何 onTick 处理程序。

=> Afaik 如果没有缓存，它会重新渲染所有内容

(4) 是的。

(5) 没有。（我不知道）

(6) 如果容器的内容不经常变化，我会缓存整个容器，否则每帧都会重新构建容器。

不过我有一个问题：为什么要使用多个画布？你用几个？我可以想象使用多个画布可能会减慢游戏速度。

你总共使用了多少个精灵？

# mysql - 验证和创建唯一 ID

> ID：15139703
> 
> 赞同：0
> 
> 时间：2013-02-28T15:45:10.683
> 
> 标签：mysql, unique-index

好的 - 对于我的项目，我被要求为我们必须转换一些数据的过程确定一些验证技术。让我给你一个背景。

我们从客户端接收数据 - 我们加载文件，并且只提取处理所需的字段。在这个阶段进行了一些检查。从这里我们在数据上运行脚本，这些脚本基本上完成了所有繁重的工作。（删除重复项、检查日期等）。然后它通过一个黑盒系统运行并向我们吐出结果。

客户通知我们，我们对特定群体的计数非常差。这个大约4百万美元。

我们有一个识别唯一成员的过程，通过生成一个 pol_ID、一个 Suf_ID 及其关联的组名，它们在我们的系统和我们的处理系统中被认为是唯一的。

我们需要一个流程来处理这些唯一成员的记录。在给定的时间段内，唯一成员可以拥有与其姓名相关联的一对多声明。

当我们收到索赔信息时，一般是使用payor_field + claimno + 一个生成的序列号（有时这个序列号就是claimno的最后两位）来处理的……

前任。三个索赔进入系统，通过加载处理后，我们看到客户端重复了索赔号 - 因为我们使用最后两位数字，它不再使它们唯一，并删除了三个记录中的两个。只保留第一个。

```
WKS-01100 75.02 - stays
WKS-01100 6000.56 - drops
WKS-01100 560.23 - drops 
```

我的问题开始起作用，因为我们通常对声明进行假设，即如果我们解析最后两位数字，它是唯一的，在测试这种情况下，我们尝试在另一列中创建显式增量序列号以考虑这个唯一性。然后使我们的结果翻倍。

现在我的问题如下：

还有另一种方法可以使这些声明独一无二吗？自动增量不是一个选项。考虑到客户可以发送重复的claimno，这是我们的问题所在，他们可能会回收他们的claimno。

由于它是基于月份的，所以最后可能会有某种月份 ID..？

序列号的任何二进制表示都会起作用吗？它是一个 INT 数据类型。（还应注意，我们处理可追溯到 24 个月的历史数据，并且每个月我们都会获得下一个连续月份的数据，并且我们会删除集合中的第一个月）

我们不限于我们为转换此声明所做的工作，因此我愿意接受建议...尽量保持简短，但如果我需要添加更多信息，请告诉我 :) 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:57:38.333

您是否为每个索赔保存了时间戳？一种可能的解决方案是附加时间戳以使声明唯一。

WKS-01100-1330464175

WKS-01100-1327514036

WKS-01100-1341867984

# xcode - 动态 UIWebView 链接

> ID：15139705
> 
> 赞同：0
> 
> 时间：2013-02-28T15:45:14.530
> 
> 标签：xcode, ios6

所以通常加载一个 UIWebView 我做..

```
 NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
   NSURLRequest *request = [NSURLRequest requestWithURL:url];
   [_webView loadRequest:request]; 
```

但是，现在我需要根据用户单击的表格单元格动态地执行此操作。我从 JSON 加载表格单元格，一切正常。现在我需要在单元格中获取帖子的“id”，并动态加载它。目前我已经尝试过了，但它不起作用......

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com/story.php?id="];
url = [NSURL URLWithString:storyId relativeToURL:url];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[_webView loadRequest:request]; 
```

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:01:41.013

为什么不直接格式化 URL 字符串？

```
NSURL *url = [NSURL URLWithString:[NSString 
            stringWithFormat:@"http://www.google.com/story.php?id=%@", storyId]];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[_webView loadRequest:request]; 
```

# dll - lua 加载库 dll

> ID：15139706
> 
> 赞同：1
> 
> 时间：2013-02-28T15:45:19.763
> 
> 标签：dll, lua, package, assert, loadlibrary

我正在尝试加载一个 dll（它不是我的 dll），它是用 C++ 编写的

据我所知，没有出口，但它会在加载后完成我需要它做的事情。

assert(package.loadlib(dllfile,'')() 这会引发错误，obv，“找不到过程”，但 dll 仍会被加载，并按预期工作。

如果我第二次调用上述函数，它会使客户端崩溃，所以我需要某种检查器。

我的问题是，有没有办法验证它是否已加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T21:33:17.680

在 Lua 5.1 中，当`package.loadlib`用作第二个参数时，您必须指定由 DLL 实际导出的函数的名称。如果您只需要强制 Windows 动态链接器加载 DLL（这似乎是您的情况），这并不重要。

要发现此类名称，您可以使用[DependencyWalker](http://www.dependencywalker.com/)（免费工具）。使用打开 DLL`depend.exe`并查看*导出函数列表*面板（第一列有一个**E**标题标签）。选择任何函数并将其名称用作第二个参数（如果它真的没有导出的函数，那你就不走运了！）。尝试选择标记为 C（不是 C++）的函数。C++ 导出的函数具有可能导致问题的错误名称。

例如，假设您要加载 kernel32.dll：使用`depend.exe`您会发现在所有导出的函数中都有一个命名`AddAtomA`（但任何其他 C 函数都可以）。所以你可以这样使用`package.loadlib`：

```
assert( package.loadlib( "kernel32.dll", "AddAtomA" ) ) 
```

该`assert`调用确保如果无法加载 DLL，则会发出错误。

要验证 DLL 是否实际加载，您可以使用[ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)（另一个免费工具）。

*   确保您的脚本正在运行（您可以将`io.read()`语句放在合适的位置以防止脚本终止），
*   然后打开 ProcessExplorer 窗口，
*   选择与您的脚本相关的进程（可能是一些`lua.exe`，但您可以将 ProcessExplorer 工具栏上的“目标”工具拖到您的脚本窗口以发现它）
*   并输入 ctrl-D。

应出现一个下部面板，显示所选进程正在使用的所有 DLL。浏览列表以查看是否列出了您的 DLL。

希望这可以帮助。

# c - C结构会这样吗？

> ID：15139707
> 
> 赞同：0
> 
> 时间：2013-02-28T15:45:26.497
> 
> 标签：c, struct, typedef

使用 fwrite，我正在编写整个结构？我们在f1和f2？任何帮助，将不胜感激

```
typedef struct {
    int field1;
    int field2;
}mystruct;

int main(int argc,char *argv[])
{

    int size=2;
    mystruct structarray [size];
    int i=0;
    for (i=0;i<size;i++)
    {
        structarray[i]=calloc(1,sizeof(mystruct));
    }

    FILE *F1;
    if (fopen("structfile","wt")==NULL){
        err_sys("cannot be opened");
    }

     i=0;
    for (i=0;i<size;i++)
    {
        structarray[i].field1=i;
    }

    fwrite(structarray[0].field1,sizeof(mystruct),size,F1);
    fclose(F1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:59:24.543

从概念上讲，你的方法会奏效。但是，您的代码存在一些问题：

(1)`structarray`被声明为自动变量（在堆栈上分配）。没有理由调用`calloc()`每个数组元素；数组已经完全分配。也许您打算初始化数组元素（例如`memset()`，等）。

(2)`fopen()`返回指向已打开文件的指针，但您没有将返回值分配给`F1`. 结果，`F1`保持未初始化，因此调用`fwrite()`将不起作用。

(3) 如果您打算将完整的结构数组保存到文件中（而不是特定元素），请将您的调用更改`fwrite()`为如下：

```
fwrite(structarray, sizeof(mystruct), size, F1); 
```

(4) 始终检查返回值 from`fwrite()`以确保它成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:08:06.640

`structarray[0].field1`是一个`int`，但第一个参数`fwrite`是`void*`。采用

```
fwrite(structarray, sizeof(mystruct), size, F1); 
```

或者，我更喜欢

```
fwrite(structarray, sizeof *structarray, size, F1); 
```

因为它没有耦合到类型`structarray`和减少耦合是一件好事。你甚至可以做

```
fwrite(structarray, sizeof structarray, 1, F1); 
```

只要`structarray`是真正的数组而不是指针。

您应该检查`fwrite`. 并以设置为高的警告级别进行编译......编译器应该警告您尝试传递`int`to `fwrite`，以及

```
structarray[i]=calloc(1,sizeof(mystruct)); 
```

which isn't legit ... `structarray[i]` is a `mystruct` but `calloc` returns a pointer. See aardvarkk's comment under your question. It should also tell you that you used F1 without ever setting it.

# c# - MEF 合成错误，导出无法正常工作

> ID：15139710
> 
> 赞同：1
> 
> 时间：2013-02-28T15:45:29.310
> 
> 标签：c#, mef, composition

这是我的表单，它应该显示我导入的类的结果：

```
public partial class Form1 : Form
{
    [Import(typeof(ITests))]
    public ITests Template;

    public string texter;

    public Form1()
    {
        InitializeComponent();
        texter = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) + "\\bin\\dll";
        textBox1.Text = texter;
        string[] array = Directory.GetFiles(texter, "*.dll");

        foreach(string file in array)
        {
            textBox1.Text += Environment.NewLine + file;
        }
        Program();
    }

    public void Program()
    {
        AggregateCatalog catalog = new AggregateCatalog();
        catalog.Catalogs.Add(new DirectoryCatalog(texter));
        Console.WriteLine(catalog.Catalogs);
        try
        {
            CompositionContainer container = new CompositionContainer(catalog);
            container.ComposeParts(this);
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
    }
} 
```

这是我的公共界面：我在两个项目中都导入了它们，所以我已经尝试避免组装引用错误

```
namespace ClassLibrary1
{
    public interface ITests
    {
        string Result(string result);
    }
} 
```

这是我的带有导出代码的 dll：

```
namespace WindowsFormsApplication1
{
    public class Template 
    {
        //Please write all your tests in this class
        //[TestClass]
        public class Tests
        {
            //example of class
            //[TestMethod]
            public class Example : ITests
            {
                [Export(typeof(ITests))]
                public string Result(string res)
                {
                    string resa = res + " dit is door de test gegaan";
                    return resa;
                }
            }

            //[TestMethod]
            public class ExampleTest2
            {
            }
        }
    }
} 
```

我收到此错误：

> System.ComponentModel.Composition.dll 'WindowsFormsApplication1.vshost.exe'（托管（v4.0.30319））中发生了“System.ComponentModel.Composition.Primitives.ComposablePartException”类型的第一次机会异常：已加载
> 
> > 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.DebuggerVisualizers\11.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.DebuggerVisualizers.dll' 合成产生了单一合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。
> 
> 1) 导出 'WindowsFormsApplication1.Template+Tests+Example.Result (ContractName="ClassLibrary1.ITests")' 不可分配给类型 'ClassLibrary1.ITests'。
> 
> 导致：无法在“WindowsFormsApplication1.Form1”部分设置导入“WindowsFormsApplication1.Form1.Template (ContractName="ClassLibrary1.ITests")”。元素：WindowsFormsApplication1.Form1.Template (ContractName="ClassLibrary1.ITests") --> WindowsFormsApplication1.Form1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:36:08.540

看起来你放`[Export]`错地方了。您正在尝试将`Result`字符串导出为 ITests 类型。相反，导出应该在您的班级级别：

```
[Export(typeof(ITests))]
public class Example : ITests
{
    public string Result(string res)
    {
        string resa = res + " dit is door de test gegaan";
        return resa;
    }
} 
```

# java - 在 JSF 和 Primefaces 中使用奇怪的标题字符时如何解决编码问题

> ID：15139713
> 
> 赞同：0
> 
> 时间：2013-02-28T15:45:35.050
> 
> 标签：java, ajax, jsf, character-encoding, primefaces

我在编码值方面遇到了麻烦。好吧，我正在开发一个包含西班牙语内容的网页，它使用诸如 ó、á、è 等标题或诸如 ñ 之类的字符。然后，当我按下按钮保存值时，我猜按钮的 ajax 事件没有采用编码，我添加了它们 `encoding='ISO-8859-1'`，并且它起作用了。但是我有一个针对primefaces中的国家的自动完成功能，这些国家也使用ajax事件来处理信息，并且对于这个字段，编码不起作用并且在添加`encoding='ISO-8859-1'`它之前起作用。那么当解决一个，另一个失败，反之亦然。

碰巧我需要国家咨询各州并列出它们。

网页代码：

```
<p:autoComplete id="pais" value="#{personal.pais}"   
                    completeMethod="#{personal.listPaises}" forceSelection="true" required="true" effect="fade" scrollHeight="400" 
                    var="p"  itemLabel="#{p}" itemValue="#{p}" requiredMessage="Es necesario seleccionar país" label="País" validator="#{personal.validatePaises}" >
                     <p:column style="width:80%" >  
                      #{p} 
                      </p:column>
                    <p:ajax event="itemSelect" update="departamento" />  
                 </p:autoComplete> 
```

Java 代码：

```
public void setPais(String pais) {
        int codPais = pDao.getPaisCod(pais); 
        departamentosList = pDao.listDepatamentosByPais(codPais);
        this.pais = pais;
    } 
```

例如，如果我以 jsf 形式选择**España**作为 Country，则在 bean 中将被视为**Espa±a**。

我需要统一编码。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:25:02.490

您应该只使用 UTF-8，它将支持任何字符，更重要的是，它是所有事物共有的唯一编码。通常某些东西只适用于 UTF-8，例如许多 JSON 实现。如果不是这种情况，JSON 无论如何都不能支持 ISO-8859-1。

例如，primeface 的 Ajax 使用 jQuery.param，它使用[基于 UTF-8 的](http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3.3)`encodeURIComponent`URL 编码。

所以如果你想统一编码，UTF-8 是你唯一的选择。

顺便说一句，通过“使用 UTF-8”，我的意思不仅仅是将 UTF-8 放在一个看起来正确的随机位置，而是实际上确保 UTF-8 是项目中任何地方的声明和物理编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:49:54.977

我知道我的问题出在自动完成和命令按钮的 ajax 请求上。然后我尝试了一切，但没有成功。好吧，我解决了将 jsf commandButton 更改为 Primefaces commandButton 的问题。

前

`<h:commandButton value="submit" action="Periodico?faces-redirect=true" actionListener="#{personal.insertarUsuario}" />`

后

`<p:commandButton value="submit" action="Periodico?faces-redirect=true" actionListener="#{personal.insertarUsuario}" />`

所以我解决了我的问题。非常感谢您的时间和回答

# haskell - `forall v. Int -> v -> IO v` 类型是否有有用的居民？

> ID：15139715
> 
> 赞同：1
> 
> 时间：2013-02-28T15:45:39.247
> 
> 标签：haskell, ghc

假设我们要编写一个由 IO 操作支持的通用属性映射，但由于某种原因，我们需要使值类型具有多态性。

```
type Key = Int
get:: Key -> v -> IO v -- Takes a key and a default value, return the associated value
put:: Key -> v -> IO () -- store (Key,v) pair doing some IO 
```

自由定理是否要求这样做`get`并且`put`在这种情况下也只做一些琐碎的事情，如果是这样，我们可以欺骗 ghc 的类型系统来实现一个真正的类型索引 IO 数据库吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T15:57:15.567

通常，奇怪的事情可能发生在 中`IO`，所以我认为没有涉及 的自由定理的严格概念`IO`。无论如何，从我所知道`IO`的实现它，假设功能做

1.  没有什么东西会崩溃（比如做无意义的指针运算来产生一个类型为 v 的值），
2.  不使用任何不安全的函数（通常会破坏任何类似自由定理的推理），
3.  不要返回底部（例如`undefined`或异常）和
4.  最终“回归”</li>

那么“返回”值将是参数。

但这意味着*不可能*使用`IO`.

有`Typeable a`约束是可能的。在这种情况下，预期的自由定理不成立，并且`get`函数将被允许返回默认值以外的其他值。

# html - 我可以删除 css #wrapper 并将样式转移到 html 标记和 body 标记吗？

> ID：15139719
> 
> 赞同：3
> 
> 时间：2013-02-28T15:45:53.537
> 
> 标签：html, css

我可以删除 css #wrapper 并将样式向上移动到 html 标记和 body 标记以实现固定宽度、居中布局吗？

```
 html {
        background-color: lightgrey;
        text-align: center;     
    }
    body {
        margin: 0 auto;
        width: 800px;
        background-color: white;    
        display: block;
    } 
```

它似乎在 Firefox、Chrome 和 IE7+ 上运行良好。潜在的缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:52:53.337

`<body>`将用作包装器没有任何问题，**除非**您要支持 IE 7 .. 由于特殊的缩放“错误”..

当向主体应用边距或宽度并且用户缩放时，IE7 错误地将主体的左边缘视为视口的边缘。这种转变将页面右侧的内容凸出到屏幕之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:51:36.727

我没有看到任何缺点..只有好处。现在，您可以更轻松地通过向它们添加类来覆盖其他页面上`html`或其他页面上的样式。*我想如果您不想*这样做（或者如果您想让它变得更难），`body`那将是一个缺点。

 *我还主张在样式表中根本不使用 ID .. 甚至元素（即坚持使用类和伪类）。这使得元素的样式更容易通过简单地添加和删除其他类来更新。不过，使用`html`and`body`可能没问题，因为它们中的每一个都只有一个。*

# jquery - jquery 函数只能通过一次

> ID：15139722
> 
> 赞同：2
> 
> 时间：2013-02-28T15:46:01.800
> 
> 标签：jquery

我有一个带有缩略图的画廊类型页面。当您单击拇指时，它会将与该拇指有关的图像加载到隐藏的 div 中，当它们完成加载时，然后 div 会滑动打开。如果您单击另一个拇指，它将关闭 div，清除内容，加载新内​​容，然后再次打开它。当您加载页面时，您可以单击一个拇指，然后单击另一个，但如果您返回第一个拇指并单击 div 将不会再次打开，不知道为什么。感谢您对此的任何帮助。

我在这里设置了一个 jsbin [http://jsbin.com/epawub/12/edit](http://jsbin.com/epawub/12/edit)

我为拇指设置的javascript如下：

```
var imgCount = 0;
var image=$('#images');

$('#klossviolins').click(function() {
  console.log("Loading...");
  $('#images').slideUp(500, function() {
    $("#images").empty().ready(function(){ 
        $("<img>", {
            src: "http://www.klossal.com/images/klossviolins/home.jpg"
        }).appendTo("#images").load(onImage);
        $("<img>", {
            src: "http://www.klossal.com/images/klossviolins/services.jpg"
        }).appendTo("#images").load(onImage);
    });     
  });
  $("#info_header").empty();
  $('#info_header').append("Kloss Violins Website");
});

$('#light_dance').click(function() {
  console.log("Loading...");
  $('#images').slideUp(500, function() {
    $("#images").empty().ready(function(){ 
        $("<img>", {
            src: "http://www.klossal.com/light_dance_1.jpg"
        }).appendTo("#images").load(onImage);
        $("<img>", {
            src: "http://www.klossal.com/light_dance_var.png"
        }).appendTo("#images").load(onImage);
        $("<img>", {
            src: "http://www.klossal.com/light_dance_2.jpg"
        }).appendTo("#images").load(onImage);  
    });     
  });
  $("#info_header").empty();
  $('#info_header').append("Dancing With Light Series");
});

function onImage(e)
{
    console.log("Image loaded");
    imgCount++;

    if (imgCount == image.children().length)
    {
        image.slideDown(500);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:53:12.587

在设置图像的 src 值之前必须绑定到加载事件，否则如果图像被缓存，加载事件将在绑定之前触发。

```
$("<img>").load(onImage).attr("src","http://www.klossal.com/light_dance_1.jpg").appendTo("#images");
// repeat for all similar 
```

另外，请确保将 imgCount 重置为 0。

```
...
if (imgCount == image.children().length)
{
    image.slideDown(500);
    imgCount = 0;
    ... 
```

# c#-4.0 - 检查上传到 YouTube 的视频的进度 - 未发布的视频

> ID：15139726
> 
> 赞同：-1
> 
> 时间：2013-02-28T15:46:14.173
> 
> 标签：c#-4.0, youtube-api

是否有一个网址可以用来检查我通过 API 上传到 YouTube 的视频的状态？

我去了这个页面

[https://developers.google.com/youtube/2.0/developers_guide_protocol_checking_video_status](https://developers.google.com/youtube/2.0/developers_guide_protocol_checking_video_status)

告诉我去这个网址

[https://gdata.youtube.com/feeds/api/users/](https://gdata.youtube.com/feeds/api/users/) /uploads

但我得到的只是已经上传（已发布）的视频的 RSS 提要。

我正在寻找未发布的视频和相关的进展。

我正在使用可恢复上传，所以我认为如果上传了 10% 的视频，我应该能够在某个地方看到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:57:39.827

在 Java 示例中，您可以通过 MediaHttpUploader.getProgress() 或 MediaHttpUploader.getNumBytesUploaded() 请求进度状态“ [https://code.google.com/p/youtube-api-samples/source/browse/samples/java/youtube-cmdline -uploadvideo-sample/src/main/java/com/google/api/services/samples/youtube/cmdline/youtube_cmdline_uploadvideo_sample/UploadVideo.java#213](https://code.google.com/p/youtube-api-samples/source/browse/samples/java/youtube-cmdline-uploadvideo-sample/src/main/java/com/google/api/services/samples/youtube/cmdline/youtube_cmdline_uploadvideo_sample/UploadVideo.java#213) "

C# 会非常相似。

# c# - 拍摄 div 的快照

> ID：15139732
> 
> 赞同：5
> 
> 时间：2013-02-28T15:46:31.183
> 
> 标签：c#, javascript, jquery, asp.net-mvc-4

我有`<div>`一个图像。图像可以通过用户输入来调整大小，也可以将项目添加到当前图像中。完成后，我希望用户能够保存他们创建的这个图像。

我已经使用`MVC4`并`jQuery`构建了该项目。无论如何要保存创建项目的快照吗？我看过画布，但这不适用于我的情况。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:51:42.003

有趣的问题：

您可以从这里开始：[http](http://html2canvas.hertzen.com/) ://html2canvas.hertzen.com/一个允许您将 HTML“复制”到画布中的库。

然后，转到此处：[将“画布”图像数据上传到服务器](https://stackoverflow.com/questions/1590965/uploading-canvas-image-data-to-the-server)

向您展示如何将画布图像发送到服务器的答案。

你有它。

免责声明：没有尝试过自己，但我现在很想尝试。工作期限不允许:)

# android - Android AccountManager.addAccountExplicitly 正在停止我的应用程序

> ID：15139736
> 
> 赞同：3
> 
> 时间：2013-02-28T15:46:38.417
> 
> 标签：android, account, accountmanager

我仍然遇到方法 AccountManager.addAccountExplicitly 的问题。我想创建一个向网站提交用户密码组合的应用程序。该应用程序应该保存登录数据，因此我想使用 AccountManager：

**HttpAuth.java：**

```
package com.geberit.eismi.httpauth;

import android.os.Bundle;
import android.accounts.Account;
import android.accounts.AccountManager;
import android.app.Activity;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.HttpAuthHandler;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.EditText;
import android.widget.Button;

public class HttpAuth extends Activity {

 private EditText field_username;
 private EditText field_password;
 private Button btn_login;
 private AccountManager accountM;
 private Account eismi;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    accountM = AccountManager.get(this);
    eismi = new Account("eismi", "com.geberit.sap.t81");

    boolean test = accountM.addAccountExplicitly(eismi, "testpassword", null);

    field_username = (EditText) findViewById(R.id.field_user);
    field_password = (EditText) findViewById(R.id.field_password);
    btn_login = (Button) findViewById(R.id.btn_login);

    field_username.setText(accountM.getPassword(eismi)); 
```

**HttpAuth 清单：**

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.geberit.eismi.httpauth"
    android:versionCode="1"
    android:versionName="1.0"
    android:sharedUserId="com.geberit.eismi"
     >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.geberit.eismi.httpauth.HttpAuth"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

每次执行步骤时

```
boolean test = accountM.addAccountExplicitly(eismi, "testpassword", null); 
```

我的应用程序正在停止！

**控制台的一些输出：**

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.geberit.eismi.httpauth/com.geberit.eismi.httpauth.HttpAuth}: java.lang.SecurityException: caller uid 10039 is different than the authenticator's uid 
```

我希望你能帮帮我

谢谢美智

# jquery - 如何从页面加载触发按钮单击事件

> ID：15139737
> 
> 赞同：0
> 
> 时间：2013-02-28T15:46:41.310
> 
> 标签：jquery, asp.net, jquery-ui

我有 2 个文本框控件，在页面加载时使用 j-query 预填充了一些默认日期。因此，当页面加载时，我的 GridView 应该根据这两个文本框控件中的日期加载一些数据。但问题是 GridView 没有在页面加载时加载任何数据，但是只有在我单击填充 gridview 的 Generate Report 按钮后才加载 gridview 。我试图调用从页面加载填充网格视图的函数，但它没有帮助。所以我发现这段代码触发了按钮单击事件，它似乎正在工作，但问题是它一直在循环......请帮助我接受任何建议。谢谢 这是触发 btnClick 事件的 j-query 但它一直在循环..

```
<script type="text/javascript">
$(document).ready(function(){
   //this calls the btnClick event but it is looping..
   $("[id*='btnClick']").click();
});
</script> 
```

这是我在页面上的其他代码

```
<%@ Page Title="My Metrics" ClientIDMode="Static" Language="C#" MasterPageFile="~/Site.master" MaintainScrollPositionOnPostback="true" AutoEventWireup="true"
    CodeFile="Summary.aspx.cs" Inherits="About" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <link href="Styles/ui-lightness/jquery-ui-1.8.23.custom.css" rel="stylesheet" type="text/css" />
   <script src="Scripts/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.ui.datepicker.js" type="text/javascript"></script>

//here is the jquery that populates my textbox controls

       <script type="text/javascript">
           $(document).ready(function () {
               $("#txtStartClosingDate").datepicker();
               $("#txtEndClosingDate").datepicker();
               var startdate = new Date();
               startdate.setMonth(startdate.getMonth() - 1, 1);
               $("#txtStartClosingDate").datepicker("setDate", startdate);
               var endDate = new Date(); // current date
               endDate.setDate(1); // going to 1st of the month
               endDate.setHours(-1);
               $("#txtEndClosingDate").datepicker("setDate", endDate);
           });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:50:17.320

您尝试触发的点击处理程序很可能也通过 $(document).ready() 附加。可能发生的情况是您在附加处理程序之前触发了事件。解决方案是使用 setTimeout: 来代替。

```
$("document").ready(function() {
    setTimeout(function() {
        $("[id*='btnClick']").trigger('click');
    },10);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:53:54.987

我认为您的按钮正在触发回发，这就是导致循环的原因。

要修复它，您可以将需要更新的控件放在 ajax 面板中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:55:14.350

利用加载过程提供的不同事件：

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

例如使用 Page - LoadComplete = 在事件处理阶段结束时引发。将此事件用于需要加载页面上所有其他控件的任务。

# python - Python 2.7 ImportError：没有名为 _ssl 的模块

> ID：15139743
> 
> 赞同：3
> 
> 时间：2013-02-28T15:47:11.847
> 
> 标签：python, python-2.7, openssl

我正在尝试使用 SSL 在 Redhat 中构建 python 2.7。我取消了 Modules/Setup.dist 中的注释：

```
SSL=/urs/local/ssl
_ssl _ssl.c
-DUSE_SSL -I$(SSL)/include -I$(SSL)/include/openssl
-L$(SSL)/lib -lssl -lcrypto 
```

并且我确保系统上安装了 OpenSSL 以及 openssl-devel。

在运行 make 之后安装之前`openssl-devel`它会抱怨它无法构建模块`_ssl`。该错误现在消失了。成功构建`_ssl.o`，日志中没有报告错误，但没有构建`lib-dynload/_ssl.so`- 这显然是我需要让 ssl 工作的文件。我正在`./configure`使用`--enable-shared`标志运行，但到目前为止，无论我如何更改构建环境，我都无法加载该库文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T00:07:39.747

> Make 成功构建了 _ssl.o，日志中没有报告任何错误，但没有构建 lib-dynload/_ssl.so - 这显然是我需要让 ssl 工作的文件。

我不知道构建 Python 的细节，但在 Red Hat 上，您可能需要使用以下命令构建 OpenSSL：

```
$ export CFLAGS="-fPIC"
$ ./config shared -no-ssl2 -no-ssl3 --openssldir=/usr/local/ssl ...
...
$ make depend
...
$ make all
...
$ sudo -E make install 
```

进行安装后，请确保共享对象位于`/usr/local/ssl/lib`. 我在 Fedora 上遇到了“缺少共享对象”，上面为我解决了这个问题。

# iphone - 从 didReceiveRemoteNotification 打开视图

> ID：15139744
> 
> 赞同：3
> 
> 时间：2013-02-28T15:47:12.767
> 
> 标签：iphone, ios, objective-c, xcode

这个问题我问了几次，我尝试了几种不同的方法，但都没有成功。

我尝试过的最新方法如​​下：我包含了我想展示的 ViewController。然后我将此代码放入`didReceiveRemoteNotification`方法中。

```
 CarFinderViewController *pvc = [[CarFinderViewController alloc] init];
   // [self.window.rootViewController presentViewController:pvc animated:YES completion:nil];
    [(UINavigationController *)self.window.rootViewController pushViewController:pvc animated:NO]; 
```

这没有用。我认为我可能遇到的问题是我的初始视图不是像许多示例所示的导航控制器。

![在此处输入图像描述](../Images/fb5d4a47da72a421614182b14fa1128c.png)

这是我的故事板的图片> 我要发送给用户的 VC 是汽车查找器（右下）

有人可以向我解释我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:53:43.583

`didReceiveRemoteNotification`当您在这样的发布通知中收到远程通知时，您基本上可以使用 postNotification

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"pushNotification" object:nil userInfo:userInfo]; 
```

现在在您`FirstViewController`的中，您可以像这样为此通知注册 FirstViewController

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(pushNotificationReceived) name:@"pushNotification" object:nil]; 
```

在你的方法中

```
-(void)pushNotificationReceived{

CarFinderViewController *pvc = [[CarFinderViewController alloc] init];
[self presentViewController:pvc animated:YES completion:nil];

} 
```

不要忘记在您的`dealloc`方法中从通知中删除观察者

```
-(void)dealloc {
[[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:27:43.747

我认为最简单的解决方案是将其显示`CarFinderViewController`为模式视图，而不是尝试将其推送到当时可能可见或不可见的导航控制器。

避免进一步不一致的另一个重要点我建议您`CarFinderViewController`从情节提要中实例化您的实例，而不是直接通过类方法。

就像是：

```
UIViewController * vc = self.window.rootViewController;
// You need to set the identifier from the Interface
// Builder for the following line to work
CarFinderViewController *pvc = [vc.storyboard instantiateViewControllerWithIdentifier:@"CarFinderViewController"];
[vc presentViewController:pvc animated:YES completion:nil]; 
```

# c# - 在 OnCreatingUser 事件中编辑 CreateUserWizard 文本框

> ID：15139747
> 
> 赞同：1
> 
> 时间：2013-02-28T15:47:18.827
> 
> 标签：c#, asp.net, events, createuserwizard

好的，我在这里有这种情况。我有一个 Register.aspx 用于注册新用户。我正在使用 CreateUserWizard。我希望用户仅使用公司的电子邮件进行注册。因此，我在显示域的电子邮件文本框旁边放置了一个标签，这意味着用户无需再键入域。我的 HTML 如下所示：

```
<asp:TextBox ID="Email" runat="server" CssClass="textEntry1"></asp:TextBox>
<asp:Label ID="lblEmail" runat="server" Text="@domain.com"></asp:Label> 
```

因此，我将标签添加到 textbox.text 的操作如下：

```
protected void RegisterUser_CreatingUser(object sender, EventArgs e)
{
    TextBox _txtEmailAddress = (TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Email");
    Label _lblEmailAddress = (Label)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("lblEmail");
    _txtEmailAddress.Text = _txtEmailAddress.Text + _lblEmailAddress.Text;
} 
```

我正在使用 OnCreatingUser 事件来执行此操作。

_txtEmailAddress.Text 将具有用户键入的电子邮件的完整值以及我已经修复的域部分。我希望将其更新到电子邮件字段中，以便将其正确存储到数据库中。

但是当我调试代码时，我意识到`RegisterUser.Email`仍然有没有域的电子邮件。而不是得到像“myemail@domain.com”这样的东西，我只得到“myemail”的存储。不确定我是否朝着正确的方向前进，只是将我自己的域添加到他们的电子邮件中。很可能不是。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:08:18.730

您需要设置控件的[`.Email`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.email.aspx)，`CreateUserWizard`而不是`TextBox`. 这实际上是在后端传递给 MembershipProvider 的`CreateUser`方法的。

像这样：

```
protected void RegisterUser_CreatingUser(object sender, EventArgs e)
{
    TextBox _txtEmailAddress = (TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Email");
    Label _lblEmailAddress = (Label)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("lblEmail");

    // Set the email property of the CreateUserWizard control to append the domain
    RegisterUser.Email = _txtEmailAddress.Text + _lblEmailAddress.Text;
} 
```

# active-directory - Active Directory 与 Jira、Stash 和 Bamboo 的集成

> ID：15139749
> 
> 赞同：0
> 
> 时间：2013-02-28T15:47:21.080
> 
> 标签：active-directory, integration, jira, bamboo, bitbucket-server

我想为我的用户使用 Microsoft AD 在 Atlassian 产品中进行身份验证。

什么是最好的方法？

选项1：

```
Jira -> AD
Stash -> AD
Bamboo -> AD 
```

我可以集中访问 AD 吗？

像下面这样，可以吗？

选项 2：

```
Jira -> AD 
Stash -> Jira
Bamboo -> Jira 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:49:01.197

您应该看看名为 Crowd 的 Atlassian 用户身份工具 ( [http://www.atlassian.com/software/crowd/overview](http://www.atlassian.com/software/crowd/overview) )

它将帮助您集中所有 atlassian 工具的访问权限。

# android - ImageButton 拉伸背景图片

> ID：15139751
> 
> 赞同：3
> 
> 时间：2013-02-28T15:47:24.460
> 
> 标签：android, scale, padding, imagebutton, stretch

我正在尝试创建一个没有边框的 ImageButton，但我遇到了图像按钮大小的问题。

使用 Eclipse ADT，我将 ImageButton 拖到布局中并选择我的背景图像。图像按钮如下所示：

![初始图像按钮](../Images/643733d04f9cd5094fb9d362b1165ee0.png)

如您所见，背景图像和图像按钮周边之间有一个我想去掉的边界。为此，我将填充属性设置为 0dp。图像按钮现在看起来像这样：

![将填充设置为 0dp 后的图像按钮](../Images/d2eb4ef456605c2420363e7cf16c3f6b.png)

最后，我将比例类型设置为 fitXY：

![设置比例类型后的图像按钮](../Images/4fda31f0ad1be946c1f9fde31a064d11.png)

请注意，图像被*拉伸*并且不再是原始图像的大小。（我希望 ImageButton 的大小与背景图像的大小完全相同。）

这是所有 3 张图像的快照，它们彼此相邻，以使差异更加清晰：

![所有图像按钮](../Images/1de22ea5bcbed91aa011e2459199685f.png)

我尝试重新调整图像大小、设置最大尺寸属性等，但似乎没有什么能阻止图像按钮拉伸背景图像。

如何防止图像像原来那样*拉伸*？

*更新*

我也尝试将比例类型设置为矩阵，但这就是发生的事情：

![带有刻度类型矩阵的图像按钮](../Images/e59a1fa8ebe91091f0e9727dfe39c054.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:51:18.457

只需将您的图像设置`android:background`为按钮并设置`layout_height`和`layout_width`按钮即可`wrap_content`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:52:02.373

也许这可能会有所帮助，但我也知道从 android 开发中制作不同大小的图像的最佳实践。

[https://developers.google.com/appengine/docs/java/images/overview](https://developers.google.com/appengine/docs/java/images/overview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:52:03.260

改用 an`ImageView`并将其设置为`clickable`. 设置`scaleType`为`matrix`（这将导致 ImageView 与其中的图像一样大）。

问题`ImageButton`在于它添加了导致填充等的背景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T11:11:18.047

你可以设置 android:background="@null"

# firefox - iMacros - 如何将提取的数据附加到文件中？

> ID：15139754
> 
> 赞同：2
> 
> 时间：2013-02-28T15:47:44.817
> 
> 标签：firefox, web-scraping, imacros, data-extraction

我可以使用 TAG..EXTRACT..SAVEAS 获取 URL 并将其写入文件。如果我在脚本中执行 10 次，则该文件仅包含提取的最后一个 URL - 该文件正在被覆盖。我没有看到任何关于如何附加到现有文件的文档。我宁愿不必为每个 URL 提供它自己的文件名，然后从命令提示符加入所有这些文件。

Firefox 7.6.0.2 的 iMacros；视窗 XP SP3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-02T10:55:49.887

我可以保存不同的数据而不用替换文件：

```
TAG POS=1 TYPE=LABEL ATTR=ID:label-1350 EXTRACT=TXT
SAVEAS TYPE=EXTRACT FOLDER=C:\Users\username\Documents\iMacros\extractions FILE=extractions.csv 
```

无论您执行多少次宏，该文件都包含提取的所有数据。

# iphone - 如何组织后台批量下载？

> ID：15139755
> 
> 赞同：0
> 
> 时间：2013-02-28T15:47:48.803
> 
> 标签：iphone, ios, ios5

我正在尝试以不会冻结主 UI 的方式组织多个图像（几百个）的后台下载，并且我将能够控制同时下载的数量。

第一次尝试是使用串行调度队列，它失败了，因为它虽然串行跨越线程，但队列块中的同步下载代码将同时执行，从而产生错误数量（服务器将简单地丢弃大部分此类连接）。

问题是——如何组织这个后台下载？用尽可能多的下载作业填充调度队列是否更好，然后在队列块中编写同步下载例程，并在完成下载后跨越其他批量？

有没有更好或更自然的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:53:31.370

使用[NSOperationQueue](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)。还有一个很好的教程：[http ://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

# php - 通过 dblib 在 centos 上使用 php 5.2.6 连接到 MSSQL SERVER 2012

> ID：15139756
> 
> 赞同：1
> 
> 时间：2013-02-28T15:47:49.147
> 
> 标签：php, sql-server, zend-framework, pdo, yii

我正在使用 php 5.2.4 在 centos 32 位操作系统上使用 zend 框架测试我与 MS SQL Server 的连接。我收到有关 try catch 子句的错误消息

```
 try {
        $db->getConnection();
    } catch( Exception $e ) {
        print_r($e->getMessage());
        die;
    }

The mssql driver is not currently installed 
```

我的 application.ini 文件

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
phpSettings.date.timezone = "Europe/London"

resources.multidb.local.adapter = "PDO_MSSQL"
resources.multidb.local.host = ICHIGO
resources.multidb.local.username = Administrator
resources.multidb.local.password = xxx
resources.multidb.local.dbname = Navision
resources.multidb.local.isDefaultTableAdapter = true
resources.multidb.local.default = true

resources.frontController.baseUrl = "/invload"
resources.view[] = ""
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
resources.view.doctype = "XHTML1_STRICT"

ldap.log_path = ../logs/invload.log
log.path = APPLICATION_PATH "/../logs/invload.log"
log.level = 7

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1
log.level = 7 
```

我安装了freetds

```
[ichigo]
host = ichigo.uk.domain.com
port = 1433
tds version = 8.0 
```

PHPINFO

解析的其他 .ini 文件

```
 /etc/php.d/bcmath.ini, /etc/php.d/dba.ini, /etc/php.d/dbase.ini, /etc/php.d/dom.ini, /etc/php.d/gd.ini, /etc/php.d/imap.ini, /etc/php.d/json.ini, /etc/php.d/ldap.ini, /etc/php.d/mbstring.ini, /etc/php.d/mcrypt.ini, /etc/php.d/mhash.ini, /etc/php.d/mssql.ini, /etc/php.d/mysql.ini, /etc/php.d/mysqli.ini, /etc/php.d/ncurses.ini, /etc/php.d/odbc.ini, /etc/php.d/pdo.ini, /etc/php.d/pdo_mysql.ini, /etc/php.d/pdo_odbc.ini, /etc/php.d/pdo_pgsql.ini, /etc/php.d/pdo_sqlite.ini, /etc/php.d/pgsql.ini, /etc/php.d/snmp.ini, /etc/php.d/soap.ini, /etc/php.d/tidy.ini, /etc/php.d/xmlreader.ini, /etc/php.d/xmlrpc.ini, /etc/php.d/xmlwriter.ini, /etc/php.d/xsl.ini, /etc/php.d/zip.ini 
mssql
MSSQL Support   enabled
Active Persistent Links     0
Active Links    0
Library version     FreeTDS

Directive   Local Value Master Value
mssql.allow_persistent  On  On
mssql.batchsize 0   0
mssql.charset   no value    no value
mssql.compatability_mode    Off Off
mssql.connect_timeout   5   5
mssql.datetimeconvert   On  On
mssql.max_links Unlimited   Unlimited
mssql.max_persistent    Unlimited   Unlimited
mssql.max_procs Unlimited   Unlimited
mssql.min_error_severity    10  10
mssql.min_message_severity  10  10
mssql.secure_connection Off Off
mssql.textlimit Server default  Server default
mssql.textsize  Server default  Server default
mssql.timeout   60  60

PDO
PDO support enabled
PDO drivers     mysql, odbc, pgsql, sqlite 
```

以下是我的配置选项。我需要更改什么才能启用 PDO MSSQL

```
'./configure' '--host=i686-redhat-linux-gnu' '--build=i686-redhat-linux-gnu' '--target=i386-redhat-linux' '--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib' '--libexecdir=/usr/libexec' '--localstatedir=/var' '--sharedstatedir=/usr/com' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--cache-file=../config.cache' '--with-libdir=lib' '--with-config-file-path=/etc' '--with-config-file-scan-dir=/etc/php.d' '--disable-debug' '--with-pic' '--disable-rpath' '--without-pear' '--with-bz2' '--with-curl' '--with-exec-dir=/usr/bin' '--with-freetype-dir=/usr' '--with-png-dir=/usr' '--enable-gd-native-ttf' '--without-gdbm' '--with-gettext' '--with-gmp' '--with-iconv' '--with-jpeg-dir=/usr' '--with-openssl' '--with-png' '--with-pspell' '--with-expat-dir=/usr' '--with-pcre-regex=/usr' '--with-zlib' '--with-layout=GNU' '--enable-exif' '--enable-ftp' '--enable-magic-quotes' '--enable-sockets' '--enable-sysvsem' '--enable-sysvshm' '--enable-sysvmsg' '--enable-track-vars' '--enable-trans-sid' '--enable-yp' '--enable-wddx' '--with-kerberos' '--enable-ucd-snmp-hack' '--with-unixODBC=shared,/usr' '--enable-memory-limit' '--enable-shmop' '--enable-calendar' '--enable-dbx' '--enable-dio' '--without-mime-magic' '--without-sqlite' '--with-libxml-dir=/usr' '--with-xml' '--with-apxs2=/usr/sbin/apxs' '--without-mysql' '--without-gd' '--without-odbc' '--disable-dom' '--disable-dba' '--without-unixODBC' '--disable-pdo' '--disable-xmlreader' '--disable-xmlwriter' '--disable-json' 
```

**更远**

我放进去之后`resources.multidb.local.pdoType = "dblib"`。我现在遇到了这个`SQLSTATE[HY000] Unable to connect: Adaptive Server is unavailable or does not exist (severity 9)`问题`$db->getConnection();`。我已阅读[此](http://forums.whirlpool.net.au/archive/864265)内容并尝试实施

我有以下文件。我使用或编辑哪一个

```
find . -name odbc.ini
./root/php/freetds-0.91/samples/odbc.ini
./usr/local/unixODBC/etc/odbc.ini
./usr/local/etc/odbc.ini
./usr/share/doc/freetds-devel-0.64/samples/odbc.ini
./etc/php.d/odbc.ini
./etc/odbc.ini
./var/tmp/php-5.2.6-2-root-root/etc/php.d/odbc.ini
/root/php/freetds-0.91/freetds.conf
/usr/local/freetds/etc/freetds.conf
/usr/local/etc/freetds.conf
/etc/freetds.conf 
```

我的 freetds.log 提供以下信息

```
 [root@portal-test opt]# TDSDUMPCONFIG=stdout  TDSDUMP=stdout tsql -S xyz -U sharifu -P xxx
log.c:196:Starting log file for FreeTDS 0.91
    on 2013-03-15 14:57:55 with debug flags 0x4fff.
config.c:185:Getting connection information for [xyz].
config.c:189:Attempting to read conf files.
config.c:354:... $FREETDSCONF not set.  Trying $FREETDS/etc.
config.c:367:... $FREETDS not set.  Trying $HOME.
config.c:293:Could not open '/root/.freetds.conf' ((.freetds.conf)).
config.c:297:Found conf file '/usr/local/etc/freetds.conf' (default).
config.c:483:Looking for section global.
config.c:540:   Found section global.
config.c:543:Got a match.
config.c:565:   tds version = '8'
config.c:565:   dump file = '/var/log/freetds.log'
config.c:565:   debug flags = '0xffff'
config.c:565:   text size = '64512'
config.c:540:   Found section egserver50.
config.c:540:   Found section xyz.
config.c:554:   Reached EOF
config.c:483:Looking for section xyz.
config.c:540:   Found section global.
config.c:540:   Found section egserver50.
config.c:540:   Found section xyz.
config.c:543:Got a match.
config.c:565:   host = 'ichigo'
config.c:595:Found host entry ichigo.
config.c:599:IP addr is 172.16.0.85.
config.c:565:   port = '1433'
config.c:554:   Reached EOF
config.c:301:Success: [xyz] defined in /usr/local/etc/freetds.conf.
config.c:714:Setting 'dump_file' to 'stdout' from $TDSDUMP.
config.c:224:Final connection parameters:
config.c:225:            server_name = xyz
config.c:226:       server_host_name = ichigo
config.c:227:                ip_addr = 172.16.0.85
config.c:228:          instance_name = 
config.c:229:                   port = 1433
config.c:230:          major_version = 5
config.c:231:          minor_version = 0
config.c:232:             block_size = 0
config.c:233:               language = us_english
config.c:234:         server_charset = iso_1
config.c:235:        connect_timeout = 0
config.c:236:       client_host_name = portal-test.uk.domain.com
config.c:237:         client_charset = UTF-8
config.c:238:               app_name = TSQL
config.c:239:              user_name = sharifu
config.c:242:                library = TDS-Library
config.c:243:              bulk_copy = 0
config.c:244:      suppress_language = 0
config.c:245:          encrypt level = 0
config.c:246:          query_timeout = 0
config.c:249:               database = 
config.c:250:              dump_file = stdout
config.c:251:            debug_flags = ffff
config.c:252:              text_size = 64512
config.c:253:           broken_dates = 0
config.c:254:     emul_little_endian = 0
config.c:255:      server_realm_name = 
14:57:55.027461 10945 (log.c:196):Starting log file for FreeTDS 0.91
    on 2013-03-15 14:57:55 with debug flags 0xffff.
locale is "en_US.UTF-8"
locale charset is "UTF-8"
using default charset "UTF-8"
14:57:55.028231 10945 (iconv.c:330):tds_iconv_open(0x994da78, UTF-8)
14:57:55.028554 10945 (iconv.c:187):local name for ISO-8859-1 is ISO-8859-1
14:57:55.028565 10945 (iconv.c:187):local name for UTF-8 is UTF-8
14:57:55.028572 10945 (iconv.c:187):local name for UCS-2LE is UCS-2LE
14:57:55.028579 10945 (iconv.c:187):local name for UCS-2BE is UCS-2BE
14:57:55.028585 10945 (iconv.c:349):setting up conversions for client charset "UTF-8"
14:57:55.028592 10945 (iconv.c:351):preparing iconv for "UTF-8" <-> "UCS-2LE" conversion
14:57:55.028611 10945 (iconv.c:391):preparing iconv for "ISO-8859-1" <-> "ISO-8859-1" conversion
14:57:55.028621 10945 (iconv.c:394):tds_iconv_open: done
14:57:55.028630 10945 (net.c:205):Connecting to 172.16.0.85 port 1433 (TDS version 5.0)
14:57:55.028877 10945 (net.c:270):tds_open_socket: connect(2) returned "Operation now in progress"
14:57:55.029114 10945 (net.c:310):tds_open_socket() succeeded
14:57:55.029134 10945 (util.c:156):Changed query state from DEAD to IDLE
14:57:55.029153 10945 (net.c:741):Sending packet
0000 02 00 02 00 00 00 00 00-70 6f 72 74 61 6c 2d 74 |........ portal-t|
0010 65 73 74 2e 75 6b 2e 73-70 65 63 74 72 75 6d 61 |est.uk.s pectruma|
0020 73 61 2e 63 6f 6d 1e 73-68 61 72 69 66 75 00 00 |sa.com.s harifu..|
0030 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0040 00 00 00 00 00 07 77 6f-6b 69 6e 67 00 00 00 00 |......wo king....|
0050 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0060 00 00 00 00 06 31 30 39-34 35 00 00 00 00 00 00 |.....109 45......|
0070 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0080 00 00 00 05 03 01 06 0a-09 01 00 00 00 00 00 00 |........ ........|
0090 00 00 00 00 54 53 51 4c-00 00 00 00 00 00 00 00 |....TSQL ........|
00a0 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
00b0 00 00 04 78 79 7a 00 00-00 00 00 00 00 00 00 00 |...xyz.. ........|
00c0 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
00d0 00 03 00 06 77 6f 6b 69-6e 67 00 00 00 00 00 00 |....woki ng......|
00e0 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
00f0 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0100 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0110 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0120 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0130 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0140 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0150 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0160 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0170 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0180 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
0190 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
01a0 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
01b0 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
01c0 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |........ ........|
01d0 00 08 05 00 00 00 54 44-53 2d 4c 69 62 72 61 72 |......TD S-Librar|
01e0 0a 05 00 00 00 00 0d 11-75 73 5f 65 6e 67 6c 69 |........ us_engli|
01f0 73 68 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |sh...... ........|

14:57:55.031016 10945 (net.c:741):Sending packet
0000 02 01 00 61 00 00 00 00-00 00 00 00 00 00 0a 00 |...a.... ........|
0010 00 00 00 00 00 00 00 00-00 00 00 00 00 69 73 6f |........ .....iso|
0020 5f 31 00 00 00 00 00 00-00 00 00 00 00 00 00 00 |_1...... ........|
0030 00 00 00 00 00 00 00 00-00 00 00 05 01 35 31 32 |........ .....512|
0040 00 00 00 03 00 00 00 00-e2 16 00 01 09 00 08 0e |........ ........|
0050 6d 7f ff ff ff fe 02 09-00 00 00 00 02 68 00 00 |m....... .....h..|
0060 00                     -                        |.|

14:57:55.031414 10945 (token.c:328):tds_process_login_tokens()
14:57:55.032354 10945 (util.c:331):tdserror(0x994d8d0, 0x994da78, 20017, 115)
Error 20017 (severity 9):
    Unexpected EOF from the server
    OS error 115, "Operation now in progress"
14:57:55.032667 10945 (util.c:361):tdserror: client library returned TDS_INT_CANCEL(2)
14:57:55.032770 10945 (util.c:384):tdserror: returning TDS_INT_CANCEL(2)
14:57:55.032921 10945 (util.c:156):Changed query state from IDLE to DEAD
14:57:55.033007 10945 (token.c:337):looking for login token, got  0()
14:57:55.033223 10945 (token.c:122):tds_process_default_tokens() marker is 0()
14:57:55.033344 10945 (token.c:125):leaving tds_process_default_tokens() connection dead
14:57:55.033430 10945 (login.c:466):login packet accepted
14:57:55.033538 10945 (util.c:331):tdserror(0x994d8d0, 0x994da78, 20002, 0)
Error 20002 (severity 9):
    Adaptive Server connection failed
14:57:55.033721 10945 (util.c:361):tdserror: client library returned TDS_INT_CANCEL(2)
14:57:55.033834 10945 (util.c:384):tdserror: returning TDS_INT_CANCEL(2)
14:57:55.033905 10945 (mem.c:615):tds_free_all_results()
There was a problem connecting to the server 
```

以下脚本给出了以下错误

```
$serverName = "ichigo";
$databaseName = "Navision";
$username = "sharifu";
$password = "woking";
$mssql = new PDO("dblib:host=$serverName;dbname=$databaseName", $username, $password ); 
```

错误：

```
PHP Fatal error:  Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] Unable to connect: Adaptive Server is unavailable or does not exist (severity 9)' in /opt/pdo.php:8
Stack trace:
#0 /opt/pdo.php(8): PDO->__construct('dblib:host=ichi...', 'sharifu', 'woking')
#1 {main}
  thrown in /opt/pdo.php on line 8 
```

freetds.log

```
15:42:14.398739 11156 (log.c:196):Starting log file for FreeTDS 0.91
    on 2013-03-15 15:42:14 with debug flags 0xffff.
15:42:14.398816 11156 (iconv.c:330):tds_iconv_open(0x9589c30, UTF-8)
15:42:14.399018 11156 (iconv.c:187):local name for ISO-8859-1 is ISO-8859-1
15:42:14.399031 11156 (iconv.c:187):local name for UTF-8 is UTF-8
15:42:14.399039 11156 (iconv.c:187):local name for UCS-2LE is UCS-2LE
15:42:14.399047 11156 (iconv.c:187):local name for UCS-2BE is UCS-2BE
15:42:14.399054 11156 (iconv.c:349):setting up conversions for client charset "UTF-8"
15:42:14.399062 11156 (iconv.c:351):preparing iconv for "UTF-8" <-> "UCS-2LE" conversion
15:42:14.399082 11156 (iconv.c:391):preparing iconv for "ISO-8859-1" <-> "ISO-8859-1" conversion
15:42:14.399093 11156 (iconv.c:394):tds_iconv_open: done
15:42:14.399103 11156 (net.c:205):Connecting to 172.16.0.85 port 4000 (TDS version 5.0)
15:42:14.399193 11156 (net.c:270):tds_open_socket: connect(2) returned "Operation now in progress"
15:42:19.398885 11156 (net.c:316):tds_open_socket() failed
15:42:19.398990 11156 (util.c:331):tdserror(0x94add08, 0x9589c30, 20009, 115)
15:42:19.399070 11156 (dblib.c:7929):dbperror(0x95894d0, 20009, 115)
15:42:19.399097 11156 (dblib.c:7981):20009: "Unable to connect: Adaptive Server is unavailable or does not exist"
15:42:19.399137 11156 (dblib.c:5780):dbgetuserdata(0x95894d0)
15:42:19.399151 11156 (dblib.c:8002):"Unable to connect: Adaptive Server is unavailable or does not exist", client returns 2 (INT_CANCEL)
15:42:19.399160 11156 (util.c:361):tdserror: client library returned TDS_INT_CANCEL(2)
15:42:19.399168 11156 (util.c:384):tdserror: returning TDS_INT_CANCEL(2)
15:42:19.399179 11156 (dblib.c:1443):dbclose(0x95894d0)
15:42:19.399187 11156 (dblib.c:258):dblib_del_connection(0xe30680, 0x9589c30)
15:42:19.399201 11156 (mem.c:615):tds_free_all_results()
15:42:19.399214 11156 (dblib.c:305):dblib_release_tds_ctx(1)
15:42:19.399232 11156 (dblib.c:5882):dbfreebuf(0x95894d0)
15:42:19.399537 11156 (dblib.c:739):dbloginfree(0x9589428)
15:42:19.400757 11156 (dblib.c:1512):dbexit(void)
15:42:19.401383 11156 (dblib.c:1512):dbexit(void)
15:42:19.401401 11156 (dblib.c:305):dblib_release_tds_ctx(1) 
```

在日志中，您可以看到端口提及`4000`错误，TDS VERSION 也是如此。我当前的 freetds 配置文件内容如下：

```
[global]
        # TDS protocol version
;   tds version = 8

    # Whether to write a TDSDUMP file for diagnostic purposes
    # (setting this to /tmp is insecure on a multi-user system)
    dump file = /var/log/freetds.log
    debug flags = 0xffff

    # Command and connection timeouts
;   timeout = 10
;   connect timeout = 10

    # If you get out-of-memory errors, it may mean that your client
    # is trying to allocate a huge buffer for a TEXT field.  
    # Try setting 'text size' to a more reasonable limit 
    text size = 64512

# A typical Sybase server
#[egServer50]
#   host = symachine.domain.com
#   port = 5000
#   tds version = 5.0

# A typical Microsoft server
[xyz]
    host = ichigo
    port = 1433
    tds version = 7.0 
```

我无法解决的错误是`SQLSTATE[HY000] Unable to connect: Adaptive Server is unavailable or does not exist (severity 9)`. 更新到最新的 php 设置是：

```
[root@portal-test /]# php -m | grep -i pdo
PDO
pdo_dblib
pdo_mysql
PDO_ODBC
pdo_pgsql
pdo_sqlite

[root@portal-test opt]# php -r "phpinfo();" | grep -i pdo
Configure Command =>  './configure'  '--host=i686-redhat-linux-gnu' '--build=i686-redhat-linux-gnu' '--target=i386-redhat-linux' '--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib' '--libexecdir=/usr/libexec' '--localstatedir=/var' '--sharedstatedir=/usr/com' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--cache-file=../config.cache' '--with-libdir=lib' '--with-config-file-path=/etc' '--with-config-file-scan-dir=/etc/php.d' '--disable-debug' '--with-pic' '--disable-rpath' '--without-pear' '--with-bz2' '--with-curl' '--with-exec-dir=/usr/bin' '--with-freetype-dir=/usr' '--with-png-dir=/usr' '--enable-gd-native-ttf' '--without-gdbm' '--with-gettext' '--with-gmp' '--with-iconv' '--with-jpeg-dir=/usr' '--with-openssl' '--with-png' '--with-pspell' '--with-expat-dir=/usr' '--with-pcre-regex=/usr' '--with-zlib' '--with-layout=GNU' '--enable-exif' '--enable-ftp' '--enable-magic-quotes' '--enable-sockets' '--enable-sysvsem' '--enable-sysvshm' '--enable-sysvmsg' '--enable-track-vars' '--enable-trans-sid' '--enable-yp' '--enable-wddx' '--with-kerberos' '--enable-ucd-snmp-hack' '--with-unixODBC=shared,/usr' '--enable-memory-limit' '--enable-shmop' '--enable-calendar' '--enable-dbx' '--enable-dio' '--without-mime-magic' '--without-sqlite' '--with-libxml-dir=/usr' '--with-xml' '--enable-force-cgi-redirect' '--enable-pcntl' '--with-imap=shared' '--with-imap-ssl' '--enable-mbstring=shared' '--enable-mbstr-enc-trans' '--enable-mbregex' '--with-ncurses=shared' '--with-gd=shared' '--enable-bcmath=shared' '--enable-dba=shared' '--with-db4=/usr' '--with-xmlrpc=shared' '--with-ldap=shared' '--with-ldap-sasl' '--with-mysql=shared,/usr' '--with-mysqli=shared,/usr/bin/mysql_config' '--enable-dom=shared' '--with-dom-xslt=/usr' '--with-dom-exslt=/usr' '--with-pgsql=shared' '--with-snmp=shared,/usr' '--enable-soap=shared' '--with-xsl=shared,/usr' '--enable-xmlreader=shared' '--enable-xmlwriter=shared' '--enable-fastcgi' '--enable-pdo=shared' '--with-pdo-odbc=shared,unixODBC,/usr' '--with-pdo-mysql=shared,/usr' '--with-pdo-pgsql=shared,/usr' '--with-pdo-sqlite=shared,/usr' '--enable-json=shared' '--enable-zip=shared' '--with-readline' '--enable-dbase=shared' '--with-mcrypt=shared,/usr' '--with-mhash=shared,/usr' '--with-tidy=shared,/usr' '--with-mssql=shared,/usr'
/etc/php.d/pdo.ini,
/etc/php.d/pdo_dblib.ini,
/etc/php.d/pdo_mysql.ini,
/etc/php.d/pdo_odbc.ini,
/etc/php.d/pdo_pgsql.ini,
/etc/php.d/pdo_sqlite.ini,
PDO
PDO support => enabled
PDO drivers => dblib, mysql, odbc, pgsql, sqlite
pdo_dblib
PDO Driver for FreeTDS/Sybase DB-lib => enabled
pdo_mysql
PDO Driver for MySQL, client library version => 5.0.95
PDO_ODBC
PDO Driver for ODBC (unixODBC) => enabled
pdo_pgsql
PDO Driver for PostgreSQL => enabled
Revision =>  $Id: pdo_pgsql.c,v 1.7.2.11.2.1 2007/01/01 09:36:05 sebastian Exp $ 
pdo_sqlite
PDO Driver for SQLite 3.x => enabled
PECL Module version => 1.0.1 $Id: pdo_sqlite.c,v 1.10.2.6.2.2 2007/03/23 14:30:00 wez Exp $ 
```

**解析度**

我遵循了以下[指南](http://forums.whirlpool.net.au/archive/864265)。要安装 dblib，我遵循[了这个](https://bugs.php.net/bug.php?id=57045)。然后设置[freetds](http://freetds.schemamania.org/userguide/freetdsconf.htm)。这适用于全新的 centos 安装，但是我当前的机器仍然有问题，端口号不会因为奇怪的随机原因而改变，我想我可能已经损坏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:52:09.860

需要在 php.ini 中启用驱动程序。查看您的 php.ini 设置并确保您正在加载模块。您可以通过调用该`phpinfo()`函数来检查您的配置。

您启用了 mssql 扩展，但我看不到[PDO](http://www.php.net/manual/en/ref.pdo-dblib.php)扩展。我没有 centos 盒子，所以我无法测试它，但我认为您可以使用 yum 安装 PDO。

```
yum install php-pdo 
```

在您的配置中，您有`'--disable-pdo'`，但我认为您不需要重新编译。只需将其添加到 php.ini

```
; Extension PDO
  extension=pdo.so 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:50:07.960

> `net.c:306:getsockopt(2) reported: Connection timed out`

日志中在那之前的行是什么？它应该显示名称/地址、端口和 TDS 版本。如果它不是托管 SQL Server 的机器的名称和端口，那么要么你`freetds.conf`错了，要么（经常发生）具有阻止 PHP 进程读取它的权限。

为了证明，您可以设置`TDSDUMPCONFIG`获取 FreeTDS 如何搜索以解析服务器名称以及它发现了什么的日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T11:12:33.750

这对我有用：

/etc/freetds.conf

```
[mydb]
host = myserver.example.com
#port = 1434
tds version = auto
client charset = UTF-8 
```

# c - 我应该以哪种方式编译我的 C 代码？

> ID：15139758
> 
> 赞同：4
> 
> 时间：2013-02-28T15:47:52.913
> 
> 标签：c, gcc, compilation

我有三个文件，test.c、foo.c、foo.h。
在 foo.ci

```
#include "foo.h" 
```

在 test.ci 中

```
#include "foo.c." 
```

然后当我编译我的代码时，我使用 gcc -o test test.c，它编译。

但是，我的教授告诉我，我应该使用

```
#include "foo.h" 
```

在我的 test.c 而不是里面`#include foo.c`，我应该这样编译它

```
gcc -o test test.c foo.c 
```

第二种方式更受欢迎吗？如果是，为什么？这两个编译有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T15:52:40.810

在大多数情况下，您永远不应该包含源文件（除了您可能希望包含由单独脚本动态生成的一段代码的情况）。源文件将直接传递给编译器。只应包括头文件。

尽管您的教授建议的方式是正确的，但在这种情况下，以下方式具有更大的教育价值：

```
gcc -c test.c
gcc -c foo.c
gcc -o test foo.o test.o 
```

前两行将每个源文件编译为一个目标文件，第三行并没有真正编译，只是调用链接器从 2 个目标文件中生成一个可执行文件。这个想法是区分*compile*和*linking*，这将按照您的教授建议的方式透明地执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:05:57.503

其他 .c 文件中没有 .c 文件的主要原因是*：*`#include`

*   避免重复定义错误：假设`foo.c`定义了函数`foo()`。您还有另外两个使用 的文件`foo()`，因此您`#include "foo.c"`在这两个文件中。当您尝试构建项目时，编译器将翻译`foo.c`多次，这意味着它将看到多次尝试定义`foo`函数，这将导致它发出诊断并停止。

*   最小化构建时间：即使你没有引入重复的定义错误，你最终还是会不必要地重新编译相同的代码。假设您`#include "foo.c"`在 中`bar.c`，并且您发现需要在 中进行一行更改`bar.c`。当你重建时，你最终会重新翻译`foo.c` *不必要*的内容。

C 允许您将源文件彼此分开编译，然后将生成的目标文件链接在一起以构建您的应用程序或库。理想情况下，头文件应该只包含非定义对象声明、函数原型声明、类型定义和宏定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:53:01.530

通常的做法是使用`#include`头文件而不是源文件，并单独编译源文件。关注点分离使得在大型项目中工作更容易。在您的示例中，这可能是微不足道的，但当您有数百个文件要处理时可能会令人困惑。

按照教授建议的方式进行操作意味着您可以分别编译每个源代码。因此，如果您有一个大型项目，其中源代码是数千行代码，并且您`test.c`更改`test.c`了`foo.c`.

希望这有点道理:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:53:16.193

如果要在 gcc 中编译多个文件，请使用：

```
gcc f1.c f2.c ... fn.c -o output_file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T15:57:26.600

简短回答：
是的，第二种方式更受欢迎。

长答案：
在这种特定情况下，您将得到相同的结果。
为了有一个了解你首先需要知道“#include”语句基本上复制它包含的文件并放置它的值而不是“#include”语句。
因此，“h”文件用于前向声明，您没有问题将包含几个不同的文件。
虽然“c”文件具有实现，但在这种情况下，如果两个文件都实现相同的功能，则链接它们时会出错。
假设您将拥有“test2.c”，并且还将包含 foo.c 并尝试将其与 test.c 链接，您将拥有 foo.c 的两个实现。但是如果你只在所有 3 个文件（foo.c、test.c 和 test2.c）中包含 foo.h，你仍然可以链接它们，因为 foo。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-28T16:02:11.073

包含 .c 文件不是一个好习惯。

在您的情况下，在 test.c 和 foo.c 中都包含 foo.h ，但将其添加到您的头文件中

```
#ifndef foo.h 
#define foo.h

..your header code here

#endif 
```

以上述方式编写标题，确保您可以多次包含它，只是为了安全起见。

来看看你必须如何把你的代码放在文件中>

> 在 foo.h

您将使用的所有全局结构和变量与函数原型一起放置。

> 在 foo.c

在这里你定义你的模块化函数

> 在 test.c 中

这里你通常有你的 main() ，你将调用和测试 foo.c 中定义的函数

您一般将所有文件放在同一个文件夹中，编译器会找到它们并单独编译它们，稍后将通过链接器将它们连接起来。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-14T01:13:34.357

```
gcc f1.c f2.c ... fn.c -o output_file 
```

# python - Numpy 安装依赖

> ID：15139760
> 
> 赞同：1
> 
> 时间：2013-02-28T15:47:56.277
> 
> 标签：python, linux, numpy, scipy

我正在尝试更新我的机器并遇到了问题。我按照此页面上的说明进行操作：[http](http://www.scipy.org/Installing_SciPy/Linux) ://www.scipy.org/Installing_SciPy/Linux 。似乎较新的 Numpy/Scipy 版本需要较旧版本的 Python。我目前在 Scientific Linux Fermi 6.2（64 位）上运行 Python 2.6.6。

```
yum install python-numpy python-scipy
Loaded plugins: fastestmirror, protectbase, refresh-packagekit, security
Repository science_ScientificLinux is listed more than once in the configuration
Loading mirror speeds from cached hostfile
0 packages excluded due to repository protections
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package python-numpy.x86_64 0:1.6.1-15.1 will be installed
--> Processing Dependency: python < 2.5 for package: python-numpy-1.6.1-15.1.x86_64
--> Processing Dependency: libgfortran.so.1()(64bit) for package: python-numpy-1.6.1-  15.1.x86_64
--> Processing Dependency: libblas.so.3()(64bit) for package: python-numpy-1.6.1-15.1.x86_64
---> Package python-scipy.x86_64 0:0.6.0-6.3 will be installed
--> Processing Dependency: python < 2.5 for package: python-scipy-0.6.0-6.3.x86_64
--> Processing Dependency: libfftw3.so.3()(64bit) for package: python-scipy-0.6.0-6.3.x86_64
--> Running transaction check
---> Package compat-libgfortran-41.x86_64 0:4.1.2-39.el6 will be installed
---> Package fftw.x86_64 0:3.2.1-3.1.el6 will be installed
---> Package libblas3.x86_64 0:3.3.1-10.1 will be installed
---> Package python-numpy.x86_64 0:1.6.1-15.1 will be installed
--> Processing Dependency: python < 2.5 for package: python-numpy-1.6.1-15.1.x86_64
---> Package python-scipy.x86_64 0:0.6.0-6.3 will be installed
--> Processing Dependency: python < 2.5 for package: python-scipy-0.6.0-6.3.x86_64
--> Finished Dependency Resolution
Error: Package: python-numpy-1.6.1-15.1.x86_64 (science_ScientificLinux)
       Requires: python < 2.5
       Installed: python-2.6.6-29.el6_2.2.x86_64 (@slf-security)
           python = 2.6.6-29.el6_2.2
       Available: python-2.6.6-29.el6.i686 (slf)
           python = 2.6.6-29.el6
Error: Package: python-scipy-0.6.0-6.3.x86_64 (science_ScientificLinux)
       Requires: python < 2.5
       Installed: python-2.6.6-29.el6_2.2.x86_64 (@slf-security)
           python = 2.6.6-29.el6_2.2
       Available: python-2.6.6-29.el6.i686 (slf)
           python = 2.6.6-29.el6 
```

您可以尝试使用 --skip-broken 来解决问题您可以尝试运行： rpm -Va --nofiles --nodigest

有任何想法吗？谢谢！

# vbscript - 压缩文件夹

> ID：15139761
> 
> 赞同：9
> 
> 时间：2013-02-28T15:48:03.867
> 
> 标签：vbscript, zip

我正在尝试在 VBScript 中压缩一个文件夹，但它似乎不起作用。我确定我正在正确创建头文件。

它正确创建了实际文件，只是不压缩文件夹。

任何人都有任何想法：

```
Sub ArchiveFolder (folder)

    Dim fso, wShell, sApp, zipFile

    Set fso = CreateObject("Scripting.FileSystemObject")
    Set wShell = CreateObject("WScript.Shell")  
    Set sApp = CreateObject("Shell.Application")
    Set zipFile = fso.CreateTextFile(folder & ".zip")

    ' Write zip file header.
    zipFile.Write "PK" & Chr(5) & Chr(6) & String(18, 0)
    zipFile.Close

    sApp.NameSpace(folder & ".zip").CopyHere folder

End Sub 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T19:04:21.360

[我在这里](https://stackoverflow.com/a/124775)找到的答案。神奇之处在于`Do..Loop`脚本等待 Shell 完成工作的最后一个位置。

```
ArchiveFolder "sub\foo.zip", "..\baz"

Sub ArchiveFolder (zipFile, sFolder)

    With CreateObject("Scripting.FileSystemObject")
        zipFile = .GetAbsolutePathName(zipFile)
        sFolder = .GetAbsolutePathName(sFolder)

        With .CreateTextFile(zipFile, True)
            .Write Chr(80) & Chr(75) & Chr(5) & Chr(6) & String(18, chr(0))
        End With
    End With

    With CreateObject("Shell.Application")
        .NameSpace(zipFile).CopyHere .NameSpace(sFolder).Items

        Do Until .NameSpace(zipFile).Items.Count = _
                 .NameSpace(sFolder).Items.Count
            WScript.Sleep 1000 
        Loop
    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:23:14.770

检查你的论点。`folder`必须是要放入 zip 文件的对象的路径。如果是文件夹对象，则必须使用`folder.Path`，因为文件夹对象的默认方法是`Name`，并且`CopyHere`无法找到仅名称的对象。

您可以在函数中添加一些调试语句来检查：

```
WScript.Echo TypeName(folder)
If fso.FolderExists(folder) Then
  WScript.Echo folder & " exists."
Else
  WScript.Echo folder & " doesn't exist."
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-21T22:04:13.113

您可以通过 %comspec% 调用外部 zip 文件

`oShell.Run "%comspec% /c c:\windows\7za.exe a " & oFile &".zip " & oFile & " -tzip",,True`

来源[http://www.scriptlook.com/zip-large-files-in-a-directory-2/](http://www.scriptlook.com/zip-large-files-in-a-directory-2/)

# xml - 基于具有特定属性的子和/或孙子的 XML 选择

> ID：15139765
> 
> 赞同：0
> 
> 时间：2013-02-28T15:48:07.680
> 
> 标签：xml, search, xpath, vb6

我正在搜索一个 XPath 字符串（用于 VBA Excel），它可以查找特定级别上的所有节点，并且仅在它们具有特定（大）子节点的情况下才返回。不管嵌套有多“深”。关系：我不知道特定孩子的嵌套有多深，因此我无法制定固定路径。

在以下示例的情况下。我正在搜索直接在根“”下的所有节点，并且这些节点具有包含名称“Test”的任何子节点，但该子节点可能不包含函数“10”。但是功能“10”可以在更高级别上使用

XML 字符串：

```
<Program>
   <AA name="1" function="01"/>
   <BB name="2" function="10">
      <CC name="Test" function="01"/>
   </BB>
   <DD name="Test" function="05"/>
   <EE name="3" function="01">
      <FF name="4" function="05">
         <GG name="Test" function="10"/>
      </FF>
   </EE>
</Program> 
```

要求的选择：

```
Item(0) = <BB name="2" function="10">
Item(1) = <DD name="Test" function="05"> 
```

以下 XPath 表达式给出了`Program`包含名称“Test”的节点

```
xmlDoc.selectNodes("/Program/*[.//@name='Test']") 
```

**如何根据“功能”过滤孩子**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:57:27.450

你很亲近！不应该这么轻易放弃！

```
//*[@name='Test' and @function !='10'] 
```

或直接来自`<Program>`：`/Program//*[@name='Test' and @function !='10']`

**更新：**

```
/Program/*[@name='Test' and @function !='10' or .//*[@name='Test' and @function!='10']] 
```

# r - 仅用工作日填充向量

> ID：15139768
> 
> 赞同：6
> 
> 时间：2013-02-28T15:48:12.343
> 
> 标签：r, date, vector

我知道开始日期`start`和最后日期`maturity`。如何在不考虑周末日期的情况下填写带有日期的向量？例如，假设：

```
> start = as.Date("2013-02-28");
> maturity = as.Date("2013-03-07"); 
```

结果我想得到以下向量：

```
results
[1] "2013-03-01" "2013-03-04" "2013-03-05" "2013-03-06" "2013-03-07"

> start = as.Date("2013-02-28");
> maturity = as.Date("2013-03-07");
> x <- seq(start,maturity,by = 1)
> x
[1] "2013-02-28" "2013-03-01" "2013-03-02" "2013-03-03" "2013-03-04" "2013-03-05"
[7] "2013-03-06" "2013-03-07"
> x <- x[!weekdays(x) %in% c('Saturday','Sunday')]
> x
[1] "2013-02-28" "2013-03-01" "2013-03-02" "2013-03-03" "2013-03-04" "2013-03-05"
[7] "2013-03-06" "2013-03-07" 
```

结果相同...？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T15:54:35.867

可能有十亿种方法可以使用来自多个包的各种功能来做到这一点。但我的第一个想法是简单地制作一个序列，然后删除周末：

```
x <- seq(as.Date('2011-01-01'),as.Date('2011-12-31'),by = 1)
x <- x[!weekdays(x) %in% c('Saturday','Sunday')] 
```

此答案仅对基于英语的系统有效。例如，在法语版本中，“Saturday”和“Sunday”必须翻译成“samedi”和“dimanche”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T15:58:09.313

这比@joran 的回答更人性化:) ，但它不依赖于本地时间

```
dd <- seq(as.Date('2011-01-01'),as.Date('2011-12-31'),by = 1)
dd[! (as.POSIXlt(dd)$wd %in% c(0,1))] 
```

PS：另一种选择，是在申请前设置本地人`weekdays`

```
tt <- Sys.getlocale('LC_TIME')
Sys.setlocale('LC_TIME','ENGLISH')
dd <- dd[!weekdays(x) %in% c('Saturday','Sunday')]
Sys.setlocale('LC_TIME',tt) 
```

# logic - XACML 规则主题

> ID：15139769
> 
> 赞同：0
> 
> 时间：2013-02-28T15:48:15.440
> 
> 标签：logic, xacml, subject

我正在为规则编写一个带有ordered-permit-overrides 的策略。

规则 1 允许具有适当安全级别的任何人访问所有内容。

规则 2 允许任何拥有其他凭据的人访问某些内容（3 个资源）。

规则 3 拒绝访问其他所有内容。如果用户既没有安全级别也没有凭据，这就是故障保护。

我的问题是我可以让我的服务器运行程序并且规则 1 工作正常。对于规则 2，如果我给出所需的值，我得到的唯一结果是“拒绝”，如果我留下任何空白，它是“不确定的”。我认为尽管使用了ordered-permit-overrides，但该政策并未运行我的规则2。

我尝试运行注释掉规则 3 的脚本，结果只是“不确定”或“不适用”。

在规则 1 中，我将目标留空。对于规则 2，我定义了资源，但没有定义主题。我是否需要指定主题才能使此规则生效？是否有其他东西可能导致我的第一条和第三条规则起作用，但不是我的第二条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:22:02.620

如果您能在这里分享您的政策，那就太好了，我们可以看看。您使用什么来编写和测试策略。

正如您可能知道的那样，不确定是由于 PDP 内部的错误，例如，您要求存在一个属性但您没有发送它，或者您正在使用一个字符串唯一（或任何 *-one-and -only) 对缺少的属性起作用。

顺便说一句，你为什么不使用 first applicable 作为组合算法呢？

查看 Eclipse 的 ALFA 插件（它是免费的），无需了解 XACML 语法即可快速编写策略：[http ://www.axiomatics.com/axiomatics-alfa-plugin-for-eclipse.html](http://www.axiomatics.com/axiomatics-alfa-plugin-for-eclipse.html)

# sql-server-2008-r2 - 如何强制 SQL Server 2008 R2 在不属于表的列上接受 ORDER BY？

> ID：15139771
> 
> 赞同：1
> 
> 时间：2013-02-28T15:48:28.767
> 
> 标签：sql-server-2008-r2, sql-server-2000, sql-order-by

[在将我们从SQL Server 2000](http://technet.microsoft.com/en-us/sqlserver/bb972143.aspx)继承的一堆应用程序迁移到[SQL Server 2008 R2](http://technet.microsoft.com/en-us/sqlserver/ff398089)时，我遇到了一种现在失败的[ORDER BY样式。](http://msdn.microsoft.com/en-us/library/aa259187#_order_by_clause)

查询是由一种 SQL 生成层生成的（如果它更好，会尽快修复该层，但它很糟糕）。如果可能的话，我想推迟修复 SQL 生成层，直到我为它构建了一个像样的测试工具。

小例子（无论您使用哪种表：常规或本地/全局临时表）：

```
select
  #IDTABLE.*,
  #NAMETABLE.NAME as NAME -- column alias is mandatory for SQL Server 2000 to succeed
from #IDTABLE
left join #NAMETABLE on #IDTABLE.ID = #NAMETABLE.ID
order by #IDTABLE.NAME 
```

罪魁祸首是`#IDTABLE`没有`NAME`列。SQL Server 2000 执行此操作，并采用`NAME`which 引用`#NAMETABLE.NAME`. SQL Server 2008 R2 失败并显示“列名 'NAME' 无效”。

几个问题：

*   是否可以强制 SQL Server 2008 R2 接受这种查询并执行 SQL Server 2000 的行为（这样我们就可以修复 SQL 生成层，并对其执行回归）？
*   因为这种查询失败的 SQL Server 版本是什么？
*   为什么 SQL Server 2000 会愉快地接受这种查询？

如果您想查看行为，这里有一个完整的示例：

```
create table #IDTABLE (
    ID Integer
)

create table #NAMETABLE (
    ID Integer,
    NAME VarChar(50)
)

insert into #IDTABLE values (0)
insert into #IDTABLE values (1)
insert into #IDTABLE values (2)

insert into #NAMETABLE values (0, 'FOO')
insert into #NAMETABLE values (1, 'BAR')
insert into #NAMETABLE values (2, 'SNAFU')

select *
from #IDTABLE

select *
from #NAMETABLE

select
  #IDTABLE.*,
  #NAMETABLE.NAME as NAME -- NAME alias is mandatory for SQL Server 2000 to succeed
from #IDTABLE
left join #NAMETABLE on #IDTABLE.ID = #NAMETABLE.ID
order by #IDTABLE.NAME

drop table #IDTABLE
drop table #NAMETABLE 
```

[OSQL](http://blog.sqlauthority.com/2009/01/05/sql-server-sqlcmd-vs-osql-basic-comparison/)的输出：

```
(1 row affected)
(1 row affected)
(1 row affected)
(1 row affected)
(1 row affected)
(1 row affected)
 ID
 -----------
           0
           1
           2

(3 rows affected)
 ID          NAME
 ----------- --------------------------------------------------
           0 FOO
           1 BAR
           2 SNAFU

(3 rows affected)
 ID          NAME
 ----------- --------------------------------------------------
           1 BAR
           0 FOO
           2 SNAFU 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:54:37.010

您可以暂时将其破解为“工作”：

```
ALTER DATABASE [your database] SET COMPATIBILITY_LEVEL = 80; 
```

但是，您最好在升级到 SQL Server 2012 之前修复您的生成层以生成有效的 SQL，因为该兼容级别不再有效，并且在 90 及以上代码中断。别介意将数据库设置为 80 可能会产生其他不良副作用 - 我在这里讨论它们：

[SQL Server 2000 到 2008 迁移 - 使用 DISTINCT 时出现 ORDER BY 问题](https://stackoverflow.com/questions/7261568/sql-server-2000-to-2008-migration-order-by-issue-when-using-distinct/7261693#7261693)

（顺便说一句，如果`##IDTABLE`没有`NAME`列，为什么它`##IDTABLE.NAME`首先会生成？）

# java - 如何从依赖工件中获取资源文件

> ID：15139774
> 
> 赞同：0
> 
> 时间：2013-02-28T15:48:39.863
> 
> 标签：java, maven, dependency-management

我想从依赖项中获取资源文件并将其放到我的类路径或其他目录中。我尝试了 maven-dependency-plugin 但似乎我没有正确配置它。有谁知道该怎么做？

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.3</version>
    <executions>
         <execution>
         <id>get browsers.xml</id>
         <goals>
             <goal>unpack-dependencies</goal>
         </goals>
         <phase>generate-resources</phase>
         <configuration>
               <includeGroupIds>ru.fad.autotests</includeGroupIds>
               <includeArtifactIds>selenium-grid-browsers-local</includeArtifactIds>
               <includes>browsers.xml</includes>
               <outputDirectory>resources/</outputDirectory>
         </configuration>
         </execution>
      </executions>
  </plugin> 
```

我在另一个工件中有文件“browsers.xml”，并希望将其复制到我的目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:48:46.567

有几种不同的方法可以解决这个问题，但我认为最有效的解决方案是使用[Maven Build Helper](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html)来实现这一[`build-helper:add-resource`](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html)目标。

与其将依赖项解压缩到`resources/`（应该是仅受版本控制的文件），不如将所需的工件解压缩到`target/`，即`target/my-resources/`并从 build-helper 引用该目录。

# c# - 验证导致严重滞后

> ID：15139775
> 
> 赞同：0
> 
> 时间：2013-02-28T15:48:45.290
> 
> 标签：c#

我正在用 c# 制作一种射击游戏。我使用 c# 图形创建了一个目标和一个目标。这迫使我使用`Invalidate();`，但这会导致严重的闪烁和滞后。我修复了闪烁，`DoubleBuffered = true;`但在运行程序时我仍然有很严重的滞后。

```
 public Form1()
    {
        InitializeComponent();
        minTavla1 = new Mål(ClientSize.Width / 2, ClientSize.Height / 2, 50);
        sikte = new Sikte(ClientSize.Width / 3, ClientSize.Height / 3, 20);
        skott = new skott(ClientSize.Width, ClientSize.Height / 3, 5);
        minTavla1.X = 150;
        minTavla1.Y = 150;
        timer1.Start();
        DoubleBuffered = true;
        //minTavla2 = new Mål(50, 50, 50);
        //minTavla3 = new Mål(150, 200, 50);

    }
    int i = 0;
    protected override void OnMouseClick(MouseEventArgs e)
    {
        base.OnMouseClick(e);
        if (pictureBox1.Visible == true)
        {
            skott.X = e.X;
            skott.Y = e.Y;
        }
        Skott.Play();
        if (pictureBox1.Visible == false)
        {
            Reload.Play();
            progressBar1.Value = 0;
            timer3.Start();
        }
        if (pictureBox2.Visible == false)
        {
            pictureBox1.Visible = false;
        }
        if (pictureBox3.Visible == false)
        {
            pictureBox2.Visible = false;
        }
        if (pictureBox4.Visible == false)
        {
            pictureBox3.Visible = false;
        }
        if (pictureBox5.Visible == false)
        {
            pictureBox4.Visible = false;
        }
        pictureBox5.Visible = false;
        if (skott.X > minTavla1.X - 50 && skott.Y < minTavla1.Y + 50)
        {
            if (skott.X < minTavla1.X + 50 && skott.Y > minTavla1.Y - 50)
            {
                i += 5;
                label1.Text = i.ToString();
                timer2.Start();
            }
            if (skott.X > minTavla1.X - 10 && skott.Y < minTavla1.Y + 10)
            {
                if (skott.X < minTavla1.X + 10 && skott.Y > minTavla1.Y - 10)
                {
                    i += 5;
                    label1.Text = i.ToString();
                    timer4.Start();
                }

            }
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        minTavla1.Rita(e.Graphics);
        sikte.Ritasikte(e.Graphics);
        skott.ritaskott(e.Graphics);

        //minTavla2.Rita(e.Graphics);
        //minTavla3.Rita(e.Graphics);
    }

    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);
        sikte.X = e.X;
        sikte.Y = e.Y;
    }

    private void pbxMal_Click(object sender, EventArgs e)
    {
        MessageBox.Show("5points");
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
    private void timer1_Tick(object sender, EventArgs e)
    {
        minTavla1.X += 5;
        this.Invalidate();

    }

    private void timer2_Tick(object sender, EventArgs e)
    {
        if (timer2.Interval > 100)
        {
            minTavla1.X = -200;
        }
    }

    private void timer3_Tick(object sender, EventArgs e)
    {
        progressBar1.Maximum = 100;
        progressBar1.Increment(+1);

        if (progressBar1.Value == 5)
        {
            pictureBox1.Visible = true;
            pictureBox2.Visible = true;
            pictureBox3.Visible = true;
            pictureBox4.Visible = true;
            pictureBox5.Visible = true;
            timer3.Stop();
        }

    }

    private void timer4_Tick(object sender, EventArgs e)
    {
        progressBar2.Maximum = 100;
        progressBar2.Increment(+1);
        pictureBox6.Visible = true;

        if (progressBar2.Value == 10)
        {
            pictureBox6.Visible = false;
            progressBar2.Value = 0;
            timer4.Stop();
        }
    }

} 
```

}

# wpf - 如何在我的 WPF MVVM 单元测试中避免跨线程问题？

> ID：15139778
> 
> 赞同：0
> 
> 时间：2013-02-28T15:49:02.750
> 
> 标签：wpf, unit-testing

我有一个使用 MVVM 模式的 WPF 项目。

在特定的视图模型中，我使用后台任务（任务类）定期填充 ObservableCollection。

我使用下面的代码来实际填充集合：

```
 private void InitialiseAssignablePermissions()
    {
        var assignablePermissions = DetermineAssignablePermissions();

        CurrentDispatcher.Invoke(() => 
        {
            foreach (var ap in assignablePermissions)
            {
                AssignablePermissions.Add(ap);
            }
        });
    } 
```

这完美地工作，我的单元测试运行愉快，一切都变绿了。

但是，如果我有一个连接到 ObservableCollection 的 ICollectionView，当我运行测试时，我会得到一个跨线程异常并且测试失败。当我第一次尝试将项目添加到集合中时会发生异常。尽管在执行项目时，代码仍然可以愉快地运行。我需要集合视图，因为我想过滤项目。

例外是：

```
This type of CollectionView does not support changes to its
SourceCollection from a thread different from the Dispatcher thread. 
```

CurrentDispatcher 类是我为单元测试添加的一个简单类：

```
internal static class CurrentDispatcher
{
    internal static void Invoke(Action action)
    {
        if (App.Current != null)
            App.Current.Dispatcher.Invoke(action);
        else
            action();
    }
} 
```

如何添加集合视图并仍然进行单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:24:21.430

在为我的 WPF 项目编写测试时，我遇到了同样的问题。问题是当您在运行测试项目时调用调用时调度程序没有运行。

您可以通过在单独的线程上运行调度程序来解决此问题。您可能会注意到，错误的堆栈跟踪会在失败时显示，因此我不会重新抛出从调度程序接收到的未处理异常，而是调用 assert.fail 并将堆栈跟踪附加到错误消息中。如果有人知道更好的处理方法，请告诉我。

这是我最终使用的代码：

```
public static void RunTestInDispatcher(Action action)
    {
        failException = null;
        GetDispatcher().Invoke(action);

        if (failException != null)
        {
            Assert.Fail(string.Format("{0}\n{1}", failException.Message, failException.StackTrace));
        }
    }

    private static object dispatcherLock = new object();
    private static Dispatcher dispatcher = null;
    public static Dispatcher GetDispatcher()
    {
        lock (dispatcherLock)
        {
            if (dispatcher == null)
            {
                Thread t = new Thread(new ThreadStart(() =>
                {
                    lock (dispatcherLock)
                    {
                        dispatcher = Dispatcher.CurrentDispatcher;
                        dispatcher.UnhandledException += new DispatcherUnhandledExceptionEventHandler(dispatcher_UnhandledException);
                        Monitor.Pulse(dispatcherLock);
                    }
                    Dispatcher.Run();
                }));

                t.SetApartmentState(ApartmentState.STA);
                t.Start();

                Monitor.Wait(dispatcherLock);
            }
        }
        return dispatcher;

    }

    static Exception failException = null;

    static void dispatcher_UnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
    {
        e.Handled = true;
        failException = e.Exception;
    } 
```

# jquery - jquery的完整日历 - 删除一天的所有事件

> ID：15139780
> 
> 赞同：1
> 
> 时间：2013-02-28T15:49:05.443
> 
> 标签：jquery, fullcalendar

我正在尝试使用 jquery fullCalendar 插件删除一天的所有事件。这可能吗？

我试图通过 removeEvents() 函数来做到这一点，但我没有运气。文档说我可以传入一个事件对象参数，但我不确定这意味着什么。

提前致谢

詹姆士

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:58:57.690

尝试这个：

```
$('#calendar').fullCalendar( 'removeEvents', function(event) {
    if(event.start.toDateString()===new Date(2013, 1,1).toDateString())
        return true;
}); 
```

小提琴：http: [//jsfiddle.net/100thGear/wcR7a/](http://jsfiddle.net/100thGear/wcR7a/)

基本上，该`removeEvents`函数会遍历所有事件并将其传递给第二个参数。这个参数是上面的一个函数——它检查这些事件并对所有必须删除的事件返回true。

希望这可以帮助！

# ruby-on-rails - 简单的 Form 标签会产生错误，而 form_tag 不会

> ID：15139781
> 
> 赞同：0
> 
> 时间：2013-02-28T15:49:09.223
> 
> 标签：ruby-on-rails, simple-form

我试图在[http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)实现用户身份验证示例。当我使用他们的代码时，它工作得很好。但是当我尝试使用`simple_form_for`-tag 时，我得到一个路由错误。

为了更好地概述示例代码的摘录：

路线.rb：

```
get "log_out" => "sessions#destroy", :as => "log_out"
get "log_in" => "sessions#new", :as => "log_in"
get "sign_up" => "users#new", :as => "sign_up"
root :to => "users#new"
resources :users
resources :sessions 
```

会话/new.html.erb：

```
<h1>Log in</h1>

<%= form_tag sessions_path do %>
  <p>
    <%= label_tag :email %><br />
    <%= text_field_tag :email, params[:email] %>
  </p>
  <p>
    <%= label_tag :password %><br />
    <%= password_field_tag :password %>
  </p>
  <p class="button"><%= submit_tag "Log in" %></p>
<% end %> 
```

我基本上保留了 routes.rb 并且只更改了 session/new.html.erb：

```
<%= simple_form_for(log_in_path, :html => { :class => 'login form' }) do |f| %>
...
<%= button_tag(type: 'submit', class: "button") do%>
  <%= image_tag('key.png', :alt => 'login') %> Log In
<%end%> 
```

这是我得到的错误：

`No route matches [POST] "/log_in"`

无论我使用`sessions_path`还是`log_in_path`在`simple_form_for`标签中，我都会收到此错误。

为了简单起见，我缩短了我的版本，因为它有点塞满了类定义等。我真的希望您能迅速指出我所缺少的内容，因为我已经浪费了大量时间来查找它。

**Edit1**由于我使用此代码`log_in_path`而不是`sessions_path`. 但问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:11:36.977

看起来你错过了你的 routes.rb：

```
post "log_in" => "sessions#create", :as => "log_in" 
```

我不知道你的会话控制器上是否有创建操作....

# javascript - 使用 JavaScript 将所选值保留在下拉列表中

> ID：15139788
> 
> 赞同：1
> 
> 时间：2013-02-28T15:49:25.177
> 
> 标签：javascript, drop-down-menu

我有以下下拉列表：

```
Gender<select name="gender"  id="gender"> 
  <option value=" "> EMPTY </option> 
  <option value="Male">Male</option> 
  <option value="Female">Female</option> 
</select> 
```

如果我选择其中一个选项，即使我更新页面，它也应该保持被选为主选项。例如，如果我选择男性，下拉列表应将男性保持为选定选项，并且只有当我用鼠标单击它时才会更改。如何在 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:04:35.660

这是一种使用 localStorage 的 javascript/jquery 方式。如果您要在很多地方执行此操作，则可能有优化此代码的方法。

```
$(function() {
    var genderValue = localStorage.getItem("genderValue");
    if(genderValue != null) {
        $("select[name=gender]").val(genderValue);
    }

    $("select[name=gender]").on("change", function() {
        localStorage.setItem("genderValue", $(this).val());
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:53:16.563

HTML 页面是无状态的——这意味着它们不记得状态。为了执行您所描述的操作，我们通常让服务器端代码根据先前提交的表单的值输出不同的 HTML。

有使用 URL 哈希的纯 JavaScript 方法，但无论如何您都需要一些服务器端代码来运行您的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T21:59:32.880

如果您想保留该值，当您通过其后续页面上的 EDIT 按钮导航回此页面时如何。这是我的帖子： [Retain dynamic created DropDown list's selected value on event window.history.back()- JavaScript](https://stackoverflow.com/questions/28729990/retain-dynamically-created-dropdown-lists-selected-value-on-event-window-histor)

# jquery - 如何在灯箱之间传递值？

> ID：15139790
> 
> 赞同：0
> 
> 时间：2013-02-28T15:49:38.813
> 
> 标签：jquery, html

我正在使用[灯箱 jquery](http://leandrovieira.com/projects/jquery/lightbox/)。

**HTML**

```
<div id="light" class="white_content">
            <img id="closelightbox" src="Images/ExitButton.png" />
            <div id="player"></div>
        </div>
        <div id="fade" class="black_overlay">
        </div> 
```

我正在使用以下内容加载页面

```
 $("#fade").show();
 $("#player").load("../Html/mypagename.html");
}
$("#light").show(); 
```

**我有 2 页：1 个客户，2 个产品**

如何将一些价值从客户页面传递到产品页面？

*   用户来到客户页面，然后将显示带有产品网格的客户详细信息

    *   单击某些内容将加载产品页面，在产品页面上执行某些操作，然后再次返回客户页面，之前显示的客户详细信息应该在那时可见。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T15:55:24.707

HTML 通常是无状态的。*这意味着，除非您维护session*或*cookie*，否则您不能跨不同页面传递值。

要使用 javascript 设置 cookie，您可以按照本教程进行操作：

[http://www.thonky.com/javascript-and-css-guide/set-cookie/](http://www.thonky.com/javascript-and-css-guide/set-cookie/)

如果你喜欢使用 jQuery 来设置 cookie，你可以这样做：

[如何使用 jQuery 设置/取消设置 cookie？](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)

使用会话来传递数据有点复杂。这需要一些有关如何使用 Java、PHP、RoR 等服务器端编程的知识。

# r - 经纬度到 UTM 坐标

> ID：15139791
> 
> 赞同：0
> 
> 时间：2013-02-28T15:49:39.503
> 
> 标签：r, utm, rgdal

我有来自UTM-zone 33以北的大经度信息。

我尝试使用以下命令将此地理信息转换为 UTM 坐标（我的数据集对象最初称为 S3km）：

```
library(rgdal)
UTM33N<-"+proj=utm+zone=33+north"
UTM33N<-paste(UTM33N,"+ellps=WGS84",sep="")
UTM33N<-paste(UTM33N,"+datum=WGS84",sep="")
UTM33N<-paste(UTM33N,"+units=m+no_defs",sep="")
coord.UTM33N<-project(as.matrix(S3km[,c("Longitude","Latitude")]),UTM33N) 
```

我收到以下错误消息：

```
Error in project(as.matrix(S3km[,c("Longitude","Latitude")]),UTM33N):
no arguments in initialization list. 
```

有谁知道是什么问题？我下载了最新的 R 版本（即 R 2.15.2）并且 -package`rgdal`也是新下载的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:32:14.617

您的代码似乎至少有几个问题：

*   正如卢卡斯指出的那样，**PROJ4**字符串在参数之间需要空格，所以使用`sep = " "`(`paste()`的默认值) 而不是`sep = ""`.

*   此外，**sp**和**rgdal**包中的函数期望将 proj4strings 包装在对`CRS()`实用程序函数的调用中。

这是一个工作示例，您应该能够适应您的情况：

```
library(rgdal)

## Create an example SpatialPoints object
pts <- SpatialPoints(cbind(-120:-121, 39:40), 
                     proj4string = CRS("+proj=longlat +datum=NAD27"))

## Construct a proper proj4string
UTM11N <- "+proj=utm +zone=11 +datum=NAD83 +units=m +no_defs"
UTM11N <- paste(UTM11N, "+ellps=GRS80 +towgs84=0,0,0")
UTM11N <-  CRS(UTM11N)

## Project your points
ptsUTM <- spTransform(pts, UTM11N)

## Check that it worked
ptsUTM
# SpatialPoints:
#      coords.x1 coords.x2
# [1,]  240111.6   4321052
# [2,]  158420.9   4435418
# Coordinate Reference System (CRS) arguments: +proj=utm +zone=11
# +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:09:23.997

您使用的投影信息格式似乎不正确。这可能会导致函数无法识别投影字符串中的参数。如 rgdal 中所述，投影信息必须符合 PROJ.4 文档（即，在 += 和**分隔参数**的空格之间没有空格。例如：“+proj=lcc +lat_1=48 +lat_2=33 +lon_0=-100 " 将您的粘贴函数参数更改为 sep=" " 可能会解决此问题。

# validation - JSF：当 validateLongRange 失败时如何隐藏 outputText

> ID：15139793
> 
> 赞同：0
> 
> 时间：2013-02-28T15:49:47.380
> 
> 标签：validation, jsf

我有以下代码：

```
<h:form>
    <h:inputText id="inputField" value="#{bean.myProperty}">
        <f:validateLongRange
            minimum="#{bean.minimum}"
            maximum="#{bean.maximum}"/>
    </h:inputText>
    <h:commandButton id="submit" value="Submit" >
        <f:ajax execute="inputField" render="outputField errors" />
    </h:commandButton>
    <h:outputText id="outputField" value="#{bean.myPropertyFormatted}"/>
    <h:message id="errors" for="inputField"/>
</h:form> 
```

当 inputText 验证失败时，我想从用户那里删除/隐藏 outputText。什么是最优雅和面向未来的重构方式来做到这一点？

我尝试`rendered="#{!facesContext.validationFailed}"`在 outputText 元素上设置属性，但这仅确定 outputText 元素是否被重新渲染，而不是保持旧文本不变。但是，当 validateLongRange 验证失败时，我想完全删除/隐藏用户的 outputText，因为用户将看到验证错误消息，并且对基于先前有效输入的旧输出消息不感兴趣仍然是存储在 bean 中的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T17:06:06.787

作为 JSF 的经验法则，如果您想有条件地渲染**任何东西**，您应该将它包装在一个容器组件 ( `<foo:panel/>`) 中，并使该容器组件成为 ajax 更新的目标。

```
<h:form>
   <h:inputText id="inputField" value="#{bean.myProperty}">
      <f:validateLongRange
        minimum="#{bean.minimum}"
        maximum="#{bean.maximum}"/>
   </h:inputText>
   <h:commandButton id="submit" value="Submit" >
      <f:ajax execute="inputField" render="thePanel errors" />
   </h:commandButton>
   <h:panelGrid id="thePanel">
   <h:outputText rendered="#{!facesContext.validationFailed}" id="outputField" value="#{bean.myPropertyFormatted}"/>
   </h:panelGrid>
   <h:message id="errors" for="inputField"/>
</h:form> 
```

对于要进行 ajax 更新的组件，它必须已经在浏览器的 DOM 中，这就是 ajax 的工作方式。因此，当您的视图最初呈现时，由于条件评估为假`outputField`而不存在。`rendered`因此，由于上述原因，任何后续对 ajax 更新的请求都会失败。容器组件策略是确保标记区域的全面更新，无论之前有什么

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T17:06:47.730

问题是，当您将`rendered`属性设置为对象并且其值为`false`时，该组件将不会出现在组件树中，因为未渲染并且您无法重新渲染（或更新）它。解决方案是将组件设置在一个内部`UIContainer`并渲染容器：

```
<h:commandButton id="submit" value="Submit" >
    <f:ajax execute="inputField" render="pnlResult" />
</h:commandButton>
<h:panelGrid id="pnlResult">
    <h:outputText id="outputField" value="#{bean.myPropertyFormatted}"
        rendered="#{not facesContext.validationFailed}" />
    <h:message id="errors" for="inputField"/>
</h:panelGrid> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T20:14:23.653

根据 kolossus 和 Luiggi Mendoza 的出色回答，我最终做了以下事情：

```
<h:form>
    <h:inputText id="inputField" value="#{bean.myProperty}">
        <f:validateLongRange
            minimum="#{bean.minimum}"
            maximum="#{bean.maximum}"/>
    </h:inputText>
    <h:commandButton id="submit" value="Submit" >
        <f:ajax execute="inputField" render="outputField errors" />
    </h:commandButton>
    <h:panelGroup layout="block" id="outputGroup">
        <h:outputText id="outputField" value="#{bean.myPropertyFormatted}" rendered="#{not facesContext.validationFailed}"/>
        <h:message id="errors" for="inputField"/>
    </h:panelGroup>
</h:form> 
```

我选择了，`h:panelGroup`而不是`h:panelGrid`因为我的 Web 开发人员背景让我对基于表格的布局的想法不寒而栗。它似乎与 一起呈现为`layout="block"`，而呈现为。`h:panelGroup``<div/>``h:panelGrid``<table/>`

# c++ - 忽略错误 LNK2001（未解析的外部符号）

> ID：15139795
> 
> 赞同：0
> 
> 时间：2013-02-28T15:50:01.743
> 
> 标签：c++, visual-studio

我有一个复杂的项目，旨在移植为 PC 上的特定目标（微控制器）编写的半自动源代码，然后使用 Visual Studio 2010/2012 重新编译它。

我使用生成我的微控制器编译器的各种中间文件来获取定义的公共方法和变量的列表，并将它们写在我的**module.def**中，以便其他 DLL 可以看到它们。

不幸的是，在为 PC 编译之前，必须手动从源代码中删除一些符号。所以我处于我的**module.def**包含一些在我的源中不再存在的符号的情况下，它们会生成错误 LNK2001（未解析的外部符号）。

是否可以将 Visual Studio Project 配置为以某种方式忽略 LNK2001 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:11:38.837

不能简单地忽略链接器——它是从目标文件、静态库等组装最终程序的东西。关于“未解析的外部符号”的错误意味着链接器找不到构建可执行文件*所需的东西。*

# android - 如何从 DialogFragment 内的自定义元素中获取 Activity

> ID：15139799
> 
> 赞同：1
> 
> 时间：2013-02-28T15:50:15.587
> 
> 标签：android, android-dialogfragment

一开始我在 Fragment 的布局中声明了一个自定义视图元素，并且我试图为此组件使用硬件加速，因此构造函数视图中的以下代码运行良好：

```
if (currentapiVersion >= android.os.Build.VERSION_CODES.HONEYCOMB){

            Activity parent = (Activity) getContext();

            // using the activity, get Window reference
            Window window = parent.getWindow();

            window.setFlags(
                    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
                    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);
            Log.d("aaaa",""+isHardwareAccelerated()); 
```

但是现在我需要在 DialogFragment 中使用相同的组件，这意味着上下文不会是活动。我尝试了几种方法，但除了加速整个 DialogFragment 本身之外，我找不到任何解决方案。关于我如何获得 Activity/window/ 以仅加速此组件的任何提示？

谢谢！

# ios - 在不锁定 UI 的情况下禁用滚动视图

> ID：15139804
> 
> 赞同：1
> 
> 时间：2013-02-28T15:50:25.677
> 
> 标签：ios, xcode, uiscrollview

我有一个包含（以及其他控件）UIScrollview 的应用程序。在某些时候我需要禁用滚动视图上的滚动，但我不想使用

```
 scrollView.scrollEnabled = YES; 
```

财产。我该如何处理？

我试图拦截

```
 -(void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView
    { 
    if(mycondition) {
      return;
    } 
```

当我的条件有效时，代码会返回，但滚动仍然会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:40:27.447

你很接近试试这个：

```
-(void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView{  
   if(mycondition)
      [scrollView setContentOffset:scrollView.contentOffset animated:YES];    
} 
```

如果 mycondition 为真，这应该会停止滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:46:54.423

我有一种笨拙的方法来做这可能会或可能不会帮助你。

您尝试使用**scrollViewWillBeginDecelerating:**做某事没有奏效，因为该方法只是给您消息，而不是请求许可（返回无效）。

相反，您可以实现**scrollViewDidScroll:**，这也不需要请求许可，但在该方法中，您可以通过设置**contentOffset**值来防止滚动发生，这样滚动视图实际上不会移动。要完成这项工作，您必须在其他地方检测到您不想滚动并保存**contentOffset**。

```
 // Condition starts.  Save the content offset
    if (whatever) {
       lockedContentOffset = tableView.contentOffset;
    } 
```

...

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView {
    if (condition_for_which_i_dont_want_to_scroll) {
        scrollView.contentOffset = lockedContentOffset;
        NSLog(@"Reset content offset");
    }
} 
```

每次尝试滚动时，方法**scrollViewDidScroll:**都会被调用多次，因为 scrollView 仍在尝试滚动并且具有动量。然而，在我对这段代码的测试中，我没有看到任何明显的滚动。

希望这可以帮助。

# jquery - jquery appendTo 在 html 元素之外丢失文本

> ID：15139807
> 
> 赞同：1
> 
> 时间：2013-02-28T15:50:43.187
> 
> 标签：jquery

我的 ajax 看起来像这样：

```
//get ajax hint count
                        $.ajax({
                            url: "actions.php",
                            type: "GET",
                            data: "get_hint_count=1",
                            cache: false,
                            success: function (data){
                                $(".hint").empty();
                                $(data).appendTo(".hint");
                            }
                        }); 
```

数据包含：

```
?<span class="tooltip">Hint is available to registered users only</span> 
```

但是这一行：

```
$(data).appendTo(".hint"); 
```

只附加里面的内容`.tooltip`。`?`消失

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:00:21.117

正如 DanC 所说，`$()`不支持创建带有前导文本节点的文档片段。

但是，[append()](http://api.jquery.com/append/)不受此限制，因此您可以颠倒逻辑并编写：

```
success: function(data) {
    $(".hint").empty().append(data);
} 
```

这相当于对[html()](http://api.jquery.com/html/)的一次调用：

```
success: function(data) {
    $(".hint").html(data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:56:03.333

jQuery 文档中记录了您在跨度之外丢失该字符的原因：

来自[http://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)

将 HTML 传递给 jQuery() 时，还请注意文本节点不被视为 DOM 元素。除了少数方法（例如 .content()）之外，它们通常会被忽略或删除。例如：

```
var el = $( "1<br/>2<br/>3" ); // returns [<br>, "2", <br>]
el  = $( "1<br/>2<br/>3 >" ); // returns [<br>, "2", <br>, "3 &gt;"] 
```

这种行为是预期的。

你可以尝试做一些事情，比如包装你收到的东西，例如：

```
$.ajax({
    url: "actions.php",
    type: "GET",
    data: "get_hint_count=1",
    cache: false,
    success: function (data){
        $(".hint").empty();
        $('<div>' + data + '</div>').appendTo(".hint");
    }
}); 
```

# python - pygame ang非拉丁字符问题

> ID：15139809
> 
> 赞同：0
> 
> 时间：2013-02-28T15:50:46.990
> 
> 标签：python, character-encoding, pygame, non-ascii-characters

我遇到了这样的问题 - 当我在俄语布局中按下键盘按钮时，我的应用程序会被这样的消息粉碎

**UnicodeEncodeError：“ascii”编解码器无法在位置 40 编码字符“\u0444”：序数不在范围内（128）**

代码：

```
 event = pygame.event.poll()
 if event.type == KEYDOWN:
    print(event) 
```

（我按下了拉丁语'a'）在英文布局上按下键 - 工作正常。

顺便说一句 - 当我将 event.type == KEYDOWN 更改为 event.type == KEYUP - 一切正常，但在这种情况下，我无法访问 event.unicode 参数以获取按下的键

有人可以建议我如何使它与任何键盘布局 KeyDown 事件一起使用吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:57:04.057

尝试在文件开头添加这一行：

```
# -*- coding: utf-8 -*- 
```

# android - 如果应用程序仍在运行 onCreate 方法，为什么 onResume 方法会被执行两次？

> ID：15139820
> 
> 赞同：6
> 
> 时间：2013-02-28T15:51:22.557
> 
> 标签：android, google-maps, android-emulator

我正在开发一个 Android 应用程序，并在其中一个活动中使用 MapsActivity 来显示地图。我所看到的是，在 2.2 (API8) 模拟器上加载地图需要一些时间，我有时间按下菜单按钮然后返回应用程序，它仍在 setContentView() 上加载，问题当它进入将被调用两次的 onResume() 时就会出现。

根据 Android Activity 的生命周期，在应用程序再次进入前台时会调用 onPause()->[onRestart()-->onStart()]-->onResume() 和 onResume()在启动时在 onCreate()->[onStart()] 之后调用。

但是，如果它仍在 onCreate() 中的 setContentView 上加载，为什么不调用一次？

这是我感兴趣的事情，因为我不想每次使用映射时都使用布尔值，因为我认为它可以执行两次以避免出现问题，即计数器的双倍递增。

我不知道这是否是模拟器的问题，因为我看到的关于横向纵向方向的问题[http://code.google.com/p/android/issues/detail?id=2423](http://code.google.com/p/android/issues/detail?id=2423)。

请看一下：

```
 public class LocationActivity extends MapActivity {

    private static final String TAG = "LocationActivity";
    private static int i;

    protected void onCreate(Bundle savedInstanceState) {
       i = 0;
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_location);
    }

    protected void onResume(){
       super.onResume();    
       i++;
       Log.w(TAG,String.valueOf(i));           
       showDialogSettings();
    }

    private void showDialogSettings() {

      AlertDialog.Builder dialog = new AlertDialog.Builder(this);
      String title = "I-Value:" + String.valueOf(i);
      String positiveButton = "OK";
      final Intent intent = new Intent(Settings.ACTION_SETTINGS);

      dialog.setTitle(title);
      dialog.setPositiveButton(positiveButton, new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int which) {   
            Intent settingsIntent = intent;
           startActivity(settingsIntent);
         }
      });
      dialog.show();
   }

   @Override
   protected boolean isRouteDisplayed() {
      return false;
   }
  } 
```

活动位置.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <com.google.android.maps.MapView
            android:id="@+id/locationactivity"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:apiKey="XXXXXXXXXXXXXXX"
            android:clickable="false"
            android:enabled="true" />

    </LinearLayout> 
```

您可以重新创建问题：

1.  如果您在 setContentView 处设置断点，则在 super.OnResume() 处设置另一个断点。
2.  执行和当调试视图。
3.  将应用程序发送到后台并再次重新运行。
4.  完成执行，您应该会看到一个显示值的对话框：2。

* * *

* * *

阅读 Geobits 和 G. Blake Meike 的评论，这部分只是为了澄清我是否错了。

由于地图的异步加载，地图的示例可能很糟糕。我将 MapsActivity 更改为 Activity，假设手机超载，因此 onCreate 将执行 8 秒的循环（对于 Android 无响应时间来说还不够）。

这里是使用轻量级 android 布局的新代码：

```
 public class LocationActivity extends Activity {

private static final String TAG = "LocationActivity";
private static int i;

protected void onCreate(Bundle savedInstanceState) {
    i = 0;
    Log.w(TAG,"onCreate");
    super.onCreate(savedInstanceState);
    setContentView(android.R.layout.simple_spinner_item);
    Log.w(TAG,"beforeLoop");
    try {
        for(int j = 0; j < 8; j++){
            Log.w(TAG,"Sleeping...");
            Thread.sleep(1000);
        }
    } catch (InterruptedException e) {
    }
    Log.w(TAG,"afterLoop");
}

protected void onResume(){
    super.onResume();
    Log.w(TAG,"onResume" + String.valueOf(i));
    i++;
    Log.w(TAG,"check Mobile Connectivity");     
    ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();       
    if(networkInfo != null && networkInfo.getType() == ConnectivityManager.TYPE_MOBILE && networkInfo.isAvailable()){
        Toast.makeText(this, "Network available!", Toast.LENGTH_LONG).show();
        Log.w(TAG,"showingToast");
    }

}

protected void onPause(){
    super.onPause();
    Log.w(TAG,"onPause:" + String.valueOf(i));
}

protected void onStop(){
    super.onResume();
    Log.w(TAG,"onStop:" + String.valueOf(i));
}
} 
```

如果我在日志仍在打印“Sleeping...”时最小化应用程序并快速重新运行应用程序我可以看到“Sleeping...”，onResume 将检查两次连接（这是正确的方法检查网络连接）。

这里是 logCat：

*   2-28 20:02:48.643: W/LocationActivity(651): onCreate
*   2-28 20:02:48.646: W/LocationActivity(651): beforeLoop
*   02-28 20:02:48.646: W/LocationActivity(651): 睡觉...
*   02-28 20:02:49.655: W/LocationActivity(651): 睡觉...
*   02-28 20:02:50.678: W/LocationActivity(651): 睡觉...
*   02-28 20:02:51.673: W/LocationActivity(651): 睡觉...
*   02-28 20:02:52.674: W/LocationActivity(651): 睡觉...
*   02-28 20:02:53.738: W/LocationActivity(651): 睡觉...
*   02-28 20:02:54.773: W/LocationActivity(651): 睡觉...
*   02-28 20:02:55.795: W/LocationActivity(651): 睡觉...
*   02-28 20:02:56.816: W/LocationActivity(651): afterLoop
*   02-28 20:02:56.824: W/LocationActivity(651): onResume0
*   02-28 20:02:56.824: W/LocationActivity(651): 检查移动连接
*   02-28 20:02:57.134:W/LocationActivity(651):showingToast
*   02-28 20:02:57.234: W/LocationActivity(651): onPause:1
*   02-28 20:02:57.253: W/LocationActivity(651): onStop:1
*   02-28 20:02:57.264: W/LocationActivity(651): onResume1
*   02-28 20:02:57.264: W/LocationActivity(651): 检查移动连接
*   02-28 20:02:57.324:W/LocationActivity(651):showingToast

Toast 将显示两次消息。

查看 logCat 生命周期是正确的，但我只想考虑到有时 onCreate 可能会因为系统过载而延迟，如果 onResume 执行两次，那么我必须处理一些初始化，所以我必须使用布尔值我认为我不应该使用它，因为 onCreate 仍在运行。

如果不是 Toast 而是对话，则从用户的 POV 来看，不欢迎两个对话。

请以和我一样的方式执行代码，我固执地不放弃：P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:58:40.453

这是设计使然。如果将活动发送到后台，它**必须**`onResume()`在返回时调用。

从[文档中](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)：

> 请注意，每次您的活动进入前台时系统都会调用此方法，包括首次创建活动时。因此，您应该实现 onResume() 来初始化您在 onPause() 期间释放的组件，并执行每次活动进入 Resumed 状态时必须发生的任何其他初始化（例如开始动画和初始化仅在活动有用户时使用的组件重点）。

另请注意，`setContentView()`可能已经返回。它不应该花很长时间，即使是`MapView`. 地图可能是异步加载的，因此不会占用 UI 线程。

# ios - 如何在 iPad 上以宽屏模式运行 iPhone 应用程序？

> ID：15139829
> 
> 赞同：0
> 
> 时间：2013-02-28T15:51:42.357
> 
> 标签：ios, ipad, ios6, iphone-5

有一个为宽屏 iPhone 5 设计的应用程序。我有该应用程序的源代码。

需要在宽屏 iPad 上运行应用程序。我运行它，但 iPad 模拟 iPhone 的标准屏幕。

如何在 iPad 上为宽屏显示我的 iPhone 应用程序？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:59:01.817

Xcode 项目目标需要在“摘要”选项卡的“iOS 应用程序目标”部分下将其“设备”设置设置为“通用”。拥有通用应用程序后，还有其他要求，例如适合非 Retina 和 Retina iPad 的图标大小和启动图像。[Apple 用于图标和启动图像大小的 HIG](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

此外，您还需要为您的用户界面做任何必要的工作，无论是使用 iPad 特定的 Storyboard 还是 xib。

# java - 使用java远程登录Linux系统并运行“grep”

> ID：15139830
> 
> 赞同：2
> 
> 时间：2013-02-28T15:51:49.207
> 
> 标签：java, linux, ssh, asterisk

我有一个运行星号的 linux 服务器，我想知道它是否已重新启动或服务器中发生了什么，所以我编写了一个 java 应用程序来读取控制台。喜欢这里（[http://www.coderanch.com/t/556707/java/java/connect-Linux-Java-code](http://www.coderanch.com/t/556707/java/java/connect-Linux-Java-code)）；这是一个很好的例子。

但是这里有一个问题：

```
 String user=host.substring(0, host.indexOf('@'));      
  host=host.substring(host.indexOf('@')+1);

  Session session=jsch.getSession(user, host, 22);
   UserInfo ui=new MyUserInfo();
   session.setUserInfo(ui);  
   session.connect();

   String command=  "asterisk -rvvv | grep 'Disconnect' ";

   Channel channel=session.openChannel("exec"); 
   ((ChannelExec)channel).setCommand(command);

   channel.setInputStream(null);

   ((ChannelExec)channel).setErrStream(System.err);

   InputStream in=channel.getInputStream(); 

   channel.connect();
 while(in.available()==0){  
      int i=in.read(tmp, 0, 1024);  
      if(i<0)
      {break;}
      System.out.print("-"+new String(tmp, 0, i));  

    } 
```

当我执行`asterisk -rvvvvv | grep 'Disconnect`时，它给了我一个空白行，并且此代码逐行读取到控制台。所以如果我在这个空白行之后得到任何数据，什么都没有给我。程序卡在那里。所以我需要在空行之后阅读第二行。 ![控制台示例](../Images/f59e15aac13d6f0be967c0f1f0299b7e.png) 或任何想法阅读此“断开连接”字符串？

我的主要目的 - “星号重启了吗？” - 因为当星号重新启动时，会给出一个这样的字符串，而我们不知道星号为什么会重新启动！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:08:08.650

您可以使用：`asterisk -rvvvv | grep -v ^$ | grep 'Disconnect'` grep 命令将删除空行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:38:12.490

我正在使用jsch。您需要等待足够的时间才能准备好缓冲区，因此需要使用 try{Thread.sleep(1000);}catch(Exception ee){}。至少我是这样使用的。

```
 while(true){
        while(in.available()>0){
          int i=in.read(tmp, 0, 1024);
          if(i<0)break;
          System.out.print(new String(tmp, 0, i));
        }
        if(channel.isClosed()){
          System.out.println("exit-status: "+channel.getExitStatus());
          break;
        }
        try{Thread.sleep(1000);}catch(Exception ee){}
      }
      channel.disconnect();
      session.disconnect();
    }
    catch(Exception e){
      System.out.println(e);
    }
  } 
```

# jquery - jQuery children() 值？

> ID：15139835
> 
> 赞同：0
> 
> 时间：2013-02-28T15:51:54.790
> 
> 标签：jquery, xml-parsing

我试图让我的 JavaScript 在网页上生成一个选择的 HTML 输入元素。这样做的问题是它没有从该节点获取子节点的值，并且`ObjectUnknownHTMLElement`在生成我的选择框时导致。

**XML**

```
<Salutation restricted="no" type="dropdownBox" tooltip="Select a title for the customer" required="yes" size="6">
    <value>Mr</value>
    <value>Sir</value>
    <value>Mrs</value>
    <value>Miss</value>
    <value>Lord</value>
</Salutation> 
```

**jQuery代码**

```
//hack to pretend its html by wrapping divs to make jquery find work on IE7
selection = $("<div>" + xml + "</div>").find("Salutation").children();
//generate a select box
var selectBox = "<select id=\"Salutation\"> ";
for ( var j = 0; j < selection.length; j++)
{
    selectBox += "<option value=\"" + selection[j].v + "\">" + selection[j]
        + "</option>";
} 
```

**输出 HTML**

```
<select id="salutation">
    <option value="undefined">[object HTMLUnknownElement]</option>
    <option value="undefined">[object HTMLUnknownElement]</option>
    <option value="undefined">[object HTMLUnknownElement]</option>
    <option value="undefined">[object HTMLUnknownElement]</option>
    <option value="undefined">[object HTMLUnknownElement]</option>
</select> 
```

我想我在 jQuery 中使用 children 方法不能从节点获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:54:12.790

不要尝试将 XML 包装在`<div>`. 只是jQuery它：

```
selection = $(xml).find("Salutation").children(); 
```

那么，既然`<Salutation>`是XML的根节点，就不要尝试了`.find()`：

```
selection = $(xml).children(); 
```

现在您必须使用[实际的 jQuery API 方法](http://api.jquery.com/text/)从每个 XML 元素中获取文本：

```
$selection = $(xml).children();
var selectBox = '<select id="Salutation">';
$selection.each(function () {
    var value = $(this).text();
    selectBox += '<option value="' + value + '">' + value + '</option>'
});
selectBox += '</select>' 
```

我不知道是什么让您认为这些元素具有永远有效的`v`属性。`selection[j].v`

还有更好的方法来构建元素树：

```
var $selection = $(xml).children();
var $selectBox = $('<select/>', {id: 'Salutation'});
$selectBox.append(
    $selection.map(function() {
        return $('<option/>', { text: $(this).text() });
    }).get()
); 
```

[http://jsfiddle.net/mattball/RbEs9](http://jsfiddle.net/mattball/RbEs9)

* * *

撇开这些不谈，这似乎是一项比 JavaScript 更适合*XSLT*的[任务。](http://en.wikipedia.org/wiki/Xslt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:03:27.630

尝试访问您选择的 innerHTML：http: [//jsfiddle.net/Kmp7v/](http://jsfiddle.net/Kmp7v/)

```
var selectBox = "<select id=\"Salutation\"> ";
            for ( var j = 0; j < selection.length; j++)
            {
                selectBox += "<option value=\"" + selection[j].innerHTML + "\">" + selection[j].innerHTML
                        + "</option>";
            } 
```

# knockout.js - 在使用 ko.mapping 插件生成的 observableArray 中插入敲除计算 observable

> ID：15139840
> 
> 赞同：9
> 
> 时间：2013-02-28T15:52:06.163
> 
> 标签：knockout.js, knockout-mapping-plugin

是否可以手动将计算出的 observable 插入到使用映射插件生成的数组中？这是一个不使用映射插件的示例，但我想知道它是否可以使用它。

假设我有来自服务器的 JSON 数据：

```
[{
    "OrderID":1,
    "FirstName":"Bill",
    "LastName":"Smith",
},{
    "OrderID":2,
    "FirstName":"Jeff",
    "LastName":"Evans",
}
{
    "OrderID":3,
    "FirstName":"Dan",
    "LastName":"Johnson",
}] 
```

在我看来，我有一个 Order 类和一个视图模型：

```
function Order(order) {
  var self = this;
  self.OrderID = ko.observable(order.OrderID);
  self.FirstName = ko.observable(order.FirstName);
  self.LastName = ko.observable(order.LastName);

  /*This is what I want to insert after the mapping plugin 
  generates "orders on the ViewModel*/
  self.FullName = ko.computed(function () {
      return self.FirstName() + ' ' + self.LastName();
  });

}

function ViewModel() {
  var self = this;
  self.orders = ko.observableArray([])

//Get orders
  $.ajax({
    url: '@Url.Action("orders")',
    type: "post",
    success: function (data) {
        var mappedOrders = $.map(data, function (item) { return new Order(item) });
        self.orders(mappedOrders);
     }
   })    
} 
```

是否可以使用映射插件在视图模型上生成订单数组，并且还可以在订单数组中插入计算出的 observable “FullName”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T20:31:27.643

在考虑了文档之后，我成功地将其应用于我的示例，如[本 jsFiddle](http://jsfiddle.net/CDPYw/7/)和以下几行所示：

```
var data = [{
    OrderID: '1',
    FirstName: 'Bob',
    LastName: 'Stevens'
}, {
    OrderID: '2',
    FirstName: 'Jim',
    LastName: 'Johnson'

}];

function order(data) {
    var self = this;
    var model = ko.mapping.fromJS(data, {}, self);
    model.FullName = ko.computed(function () {
        return self.FirstName() + ' ' + self.LastName();
    });
    return model;
}

var mapping = {
    create: function (options) {
        return new order(options.data);
    }
};

function viewModel() {
    var self = this;
    self.orders = ko.mapping.fromJS(data, mapping);
}

var vm = new viewModel();

ko.applyBindings(vm); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T15:55:05.633

根据[文档](http://knockoutjs.com/documentation/plugins-mapping.html)，您可以：

```
var mapping = {
    'children': {
        create: function(options) {
            return new myChildModel(options.data);
        }
    }
}

var myChildModel = function(data) {
    ko.mapping.fromJS(data, {}, this);

    this.nameLength = ko.computed(function() {
        return this.name().length;
    }, this);
}

var viewModel = ko.mapping.fromJS(data, mapping); 
```

# antlr4 - 在规则定义中指定一个方法，使得某个字符类可以被识别

> ID：15139846
> 
> 赞同：0
> 
> 时间：2013-02-28T15:52:25.887
> 
> 标签：antlr4

当您为 ANTLR 编写词法分析器语法时，是否可以指定一种方法来决定是否应由规则接受读取的字符？

例如：

```
WS  :   x = . [ only accept, iff Character.isWhitespace($x.text[0])==true] -> skip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:45:03.873

是的，使用语义谓词：

```
WS : . {Character.isWhitespace(getText().charAt(0))}?
     -> skip
   ; 
```

**但这不会很快。**

# node.js - 在启动时将前端文件构建到 node.js Express 项目中

> ID：15139848
> 
> 赞同：1
> 
> 时间：2013-02-28T15:52:41.100
> 
> 标签：node.js, backbone.js, express, npm

现在，我的整个 Web 堆栈都有一个 Git 存储库。我有静态文件——HTML 文件、JS 库和 Backbone.js 应用程序——从目录提供，例如 /project/static/js。我正在使用 Express 的静态文件加载并将其指向 /project/static。

我想做的是将项目分解为前端和后端存储库，当 Express 服务器启动时，它会加载前端并提供静态文件。最好的方法是什么？我在想我可以把前端放在一个 Node 模块中，并用 Github 的 NPM 安装它（或通过 npm 链接本地安装），然后以某种方式引用该 Node 模块中的静态文件。我听说过 Grunt.js 之类的工具，也读过有关在 Node 中使用 require.js 的信息，但是正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T06:55:05.887

我会有 4 个（或更多）独立的 Git 存储库。我不喜欢在同一个 repos 中混合前端项目和后端项目。将客户端和后端分离为 2 个独立的项目将更清洁、更便携且易于维护。但是，如果您想将客户端和后端混合到一个存储库中，请确保将项目组织成模块布局。

1) 一个仅用于 api 的 repos。例如：myapp-api

2) 一个仅适用于 Web 前端的存储库。例如：myapp-web。这个 repos 将消耗 myapp-api。确保您的 myapp-api 采用某种令牌来验证客户端（在本例中为 myapp-web）以使用 api

3) 一个密钥库。您的应用程序需要访问某种数据库，此存储库将在 myapp-api 和 myapp-web 之间共享

4) 一个记录器回购。此库用于记录来自客户端的错误和请求，将在 myapp-api 和 myapp-web 之间共享

希望这可以帮助！

# jquery - 使用 RequireJs 加载 jQuery 插件

> ID：15139850
> 
> 赞同：1
> 
> 时间：2013-02-28T15:52:43.733
> 
> 标签：jquery, requirejs

我正在使用 require-jquery.js 并尝试在我的应用程序中加载[jsscrollpane](http://jscrollpane.kelvinluck.com/)插件。

我的 index.html 页面中有这个配置（这是一个单页应用程序）：

```
require( { paths: {
            'ca': 'cafe/ca',
            'casp': 'sp/sp',
            'ko': 'cafe/lib/knockout/knockout',
            'komap': 'cafe/lib/knockout/knockout.mapping',
            'kopost': 'cafe/lib/knockout/knockout-postbox',
            'jd': 'cafe/lib/jaydata/jaydata',
            'jdKo': 'cafe/lib/jaydata/jaydatamodules/knockout',
            'jdDeferred': 'cafe/lib/jaydata/jaydatamodules/deferred',
            'jqscroll': 'cafe/lib/jsscrollpane/jquery.jscrollpane.min'
        },
        waitSeconds: 60,
        shim: {
            'jd': { exports: '$data', deps: [ 'cafe/lib/jaydata/datajs-1.0.3' ] },
            'jdDeferred': { exports: '$data', deps: [ 'jd' ] },
            'jqscroll': ['jquery']
        }
         .............. 
```

然后我尝试从模块调用插件：

```
define( [ 'jquery', 'ko','jqscroll' ], function( $, ko ,jqscroll) {
     console.log(jqscroll);
} 
```

但是我一直不确定，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:00:43.930

我认为这有帮助。

```
require(["jquery", "jquery.alpha", "jquery.beta"], function($) {
    //the jquery.alpha.js and jquery.beta.js plugins have been loaded.
    $(function() {
        $('body').alpha().beta();
    });
}); 
```

# django - Django 调试工具栏问题在管理员中多次保存

> ID：15139860
> 
> 赞同：3
> 
> 时间：2013-02-28T15:53:07.367
> 
> 标签：django, django-models, django-admin

快把我逼疯了请帮忙....

在管理员中，当我保存一个新项目时，它会保存同样的东西 3 次！谁能发现为什么？这只发生在运行 Django 1.5 的 Django 调试工具栏上

![在此处输入图像描述](../Images/10f86d1fc91fbfe5f0af1a2209666518.png)

**settings.py（部分）**

```
# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    #     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
    'debug_toolbar.middleware.DebugToolbarMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

TEMPLATE_DIRS = (
    LOCAL_PATH + '/templates/',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.request",
    "django.contrib.messages.context_processors.messages",

    "allauth.account.context_processors.account",
    "allauth.socialaccount.context_processors.socialaccount",
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.flatpages',
    'grappelli.dashboard',
    'grappelli',
    'django.contrib.admin',
    'django.contrib.admindocs',
    'storages',
    'south',
    'allauth',
    'allauth.account',
    'allauth.socialaccount',
    'allauth.socialaccount.providers.facebook',
    #'allauth.socialaccount.providers.google',
    #'allauth.socialaccount.providers.twitter',
    'rest_framework',
    'rest_framework.authtoken',
    'products',

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
}

# debug_toolbar settings
if DEBUG:
    INTERNAL_IPS = ('127.0.0.1',)
    MIDDLEWARE_CLASSES += (
        'debug_toolbar.middleware.DebugToolbarMiddleware',
    )

    INSTALLED_APPS += (
        'debug_toolbar',
    )

    DEBUG_TOOLBAR_PANELS = (
        'debug_toolbar.panels.version.VersionDebugPanel',
        'debug_toolbar.panels.timer.TimerDebugPanel',
        'debug_toolbar.panels.settings_vars.SettingsVarsDebugPanel',
        'debug_toolbar.panels.headers.HeaderDebugPanel',
        'debug_toolbar.panels.profiling.ProfilingDebugPanel',
        'debug_toolbar.panels.request_vars.RequestVarsDebugPanel',
        'debug_toolbar.panels.sql.SQLDebugPanel',
        'debug_toolbar.panels.template.TemplateDebugPanel',
        'debug_toolbar.panels.cache.CacheDebugPanel',
        'debug_toolbar.panels.signals.SignalDebugPanel',
        'debug_toolbar.panels.logger.LoggingPanel',
    )

    DEBUG_TOOLBAR_CONFIG = {
        'INTERCEPT_REDIRECTS': False,
        } 
```

**模型保存方法**

```
def product_pre_save(sender, instance, **kwargs):
    """
    This is sent at the beginning of a the product save() method.
    """
    if not instance.pk:
        instance._QRCODE = True
    else:
        if hasattr(instance, '_QRCODE'):
            instance._QRCODE = False
        else:
            instance._QRCODE = True

models.signals.pre_save.connect(product_pre_save, sender=Product)

# def product_pre_delete(sender, instance, **kwargs):
#     """
#     Sent at the beginning of a product delete() method product queryset's delete() method.
#     """
#     if default_storage.exists(instance.qr_image):
#         default_storage.delete(instance.qr_image)

# models.signals.pre_delete.connect(product_pre_delete, sender=Product)

def product_post_save(sender, instance, **kwargs):
    if hasattr(instance, '_already_saving'):
        del instance._already_saving
        return
    if instance._QRCODE:
        instance._QRCODE = False
    if instance.qr_image:
        instance.qr_image.delete()
        # Create url
    instance.qr_url = instance.create_QR_URL()
    qr = QRCode(4, QRErrorCorrectLevel.L)
    qr.addData(instance.qr_url)
    qr.make()
    image = qr.makeImage()

    #Save image to string buffer
    image_buffer = StringIO()
    image.save(image_buffer, format='JPEG')
    image_buffer.seek(0)

    #Here we use django file storage system to save the image.
    file_name = 'UrlQR_%s.jpg' % instance.id
    file_object = File(image_buffer, file_name)
    content_file = ContentFile(file_object.read())
    instance._already_saving = True
    instance.qr_image.save(file_name, content_file, save=True)

models.signals.post_save.connect(product_post_save, sender=Product) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T19:19:44.223

这是 ProfilingDebugPanel 导致 Admin 模型保存多个数据。他们没有针对该错误的最新提交。到目前为止，他们正在为此寻找解决方案。

**更新：**

*状态：*
终于修复了，但还没有发布。

*临时解决方案：*
禁用分析器可修复此错误。

# wpf - 从 Kinect 视频图像中获取鼠标坐标

> ID：15139868
> 
> 赞同：0
> 
> 时间：2013-02-28T15:53:18.427
> 
> 标签：wpf, mouse, kinect

我正在学习 Kinect 和 C#，所以我的新项目遇到了一些问题。我想获得从某个物体到 Kinect 的距离。我正在考虑使用固体来简化它。所以想法是：使用鼠标从 kinect 的图像中选择一个点，获取我的 x 和 y 坐标。然后用坐标我想我可以得到距离。

我在 C# 中使用 Kinect XBOX360 和 WPF。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:21:51.823

我建议您在第 9 频道[http://channel9.msdn.com/Events/Build/2012/3-055](http://channel9.msdn.com/Events/Build/2012/3-055)上观看此会话，在那里他完全按照您的描述进行构建。

你可以在这里下载他的示例代码： [http ://robrelyea.com/demos/KinectMagicMirror/](http://robrelyea.com/demos/KinectMagicMirror/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:04:47.127

如果您在 WPF 图像中显示 Kinect 视频，那么您可以连接到图像鼠标移动事件（或鼠标按下事件）并使用以下内容获取相对于图像的光标位置。

```
 void image_MouseMove(object sender, MouseEventArgs e)
    {
        Point mouseLocation = e.GetPosition(sender as IInputElement);
    } 
```

mouseLocation 中的 0,0 将是 kinect 图片的左上角。

# c# - 为什么时间跨度总毫秒在整数和小数部分具有相同的数字？

> ID：15139869
> 
> 赞同：9
> 
> 时间：2013-02-28T15:53:19.363
> 
> 标签：c#, datetime, timespan

在计算两个`DateTime`对象之间的毫秒差时，我似乎总是得到一个返回的数字，其中数字的小数部分与数字的整数部分相同。例如：`1235.1235`

为什么会这样？难道我做错了什么？这是语言的怪癖还是`DateTime`粒度的限制或其他什么？

这可以使用以下代码进行演示：

```
 DateTime then = DateTime.Now;
        Thread.Sleep(1234);
        DateTime now = DateTime.Now;
        TimeSpan taken = now - then;
        string result = taken.TotalMilliseconds.ToString(CultureInfo.InvariantCulture);
        //result = "1235.1235" 
```

正如 CodesInChaos 评论的那样：

DateTime` 不准确到此精度级别：请参阅[C# DateTime.Now 精度](https://stackoverflow.com/questions/2143140/c-sharp-datetime-now-precision)

但是 - 这并不能完全解释这种行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T19:10:47.277

对此有技术解释，我无法以其他方式证明它解释了您的观察。它当然不会在我的机器上重现。

对于初学者来说，您正在寻找噪声数字，操作系统时钟几乎不够准确，无法为您提供亚毫秒级的精度。所以一定要确保你从不依赖他们的价值来做任何重要的事情。如果要以高分辨率测量间隔，则必须改用秒表。

操作系统时钟受时间服务器更新的影响。大多数机器都设置为定期联系`time.windows.com`以重新校准时钟。这消除了时钟漂移，机器硬件通常不足以在一个月内保持时间精确到一秒以上。低容差晶体价格昂贵，并且由于温度和老化效应而永远不会完全没有漂移。并且不时插入闰秒，以保持时钟与行星缓慢旋转的同步。最后一个崩溃了很多Linux机器，谷歌“Linux闰秒bug”找找乐子阅读。

这里重要的是当您的机器获得需要它调整时钟的新更新时会发生什么。Windows 不会**突然**跳时钟值，这会导致关注时钟并期望它以可预测的数量持续增加的程序出现重大问题。

相反，它会随着每个时钟滴答增量一次增加一点。实际上，使时钟运行得更慢或更快，因此它将逐渐弥补差异并再次变得准确。也许您可以看到它的去向，额外增加的微秒与间隔的长度成正比。所以看到噪声数字中重复的间隔是合理的。

证明这一理论的唯一真正方法是调用 GetSystemTimeAdjustment()。当系统时间调整正在进行时，它将返回非零值。然后 pinvoke SetSystemTimeAdjustment() 以禁用它并观察这是否会影响您看到的值。或者只是等待足够长的时间，直到时钟赶上，这样它就不会再调整了。

# c# - 递归方法比交互方法慢 10 倍

> ID：15139871
> 
> 赞同：3
> 
> 时间：2013-02-28T15:53:28.170
> 
> 标签：c#, recursion, rhino

尽可能地清理代码以显示我的问题。基本上它是一个八叉树搜索+相交。intersect 函数来自一个 SDK（整个项目是一个 rhino 的插件）。如果我用交叉调用进行循环，它比通过八叉树的递归搜索快 10 倍。甚至更奇怪 - 我隔离了 intersect 调用的时间 - 在递归内部它比循环慢 8 倍。它的行为可能有 1000 个原因，但我希望我犯了一些明显的错误，有人可以通过查看代码来发现。

有一个缓慢的回声片段：

```
public void NewRayCast()
{            
    int runs = 500000;                          //how many rays we cast
    Point3d raypos = new Point3d(0, 0, 0);      //raystart
    Ray3d ray = new Ray3d();                

    Random r = new Random();                    //here we create targets to scatter the ray directions
    Vector3d[] targets = new Vector3d[runs];
    for (int i = 0; i < runs; i++)
    {
        targets[i] = new Vector3d(r.NextDouble() * 200 - 100, 500, r.NextDouble() * 200 - 100);
    }

    for (int i = 0; i < runs; i++)
    {
        boxes = new List<int>();            // this collects the octree leaves the rays hits
        rayline.From = ray.Position;
        rayline.To = ray.Position + ray.Direction;                
        LineBoxer(starter);                 // this starts the raycasting - starter is a array with 1 value (the scene bounding box)
    }            
}

public void LineBoxer(int[] check)    // Cast a ray against boxes
{            
    for (int i = 0; i < check.Length; i++)  // check only because the first call is with the scene box (1 index)
    {
        if (octmanB.node[check[i]].closed == false) // if node is a dead end > empty we skip it
        {                                       
            isect = Rhino.Geometry.Intersect.Intersection.LineBox(rayline, octmanB.node[check[i]].bbox, 0, out ival); // intersection function, changing to an arbitrary bounding box doesnt speed it up either                    
            if (isect == true)
            {                        
                if (octmanB.node[check[i]].leaf == false)   // continue with recursion
                {
                    LineBoxer(octmanB.node[check[i]].child);
                }
                else
                {
                    boxes.Add(check[i]);    // here we have a leaf
                }
            }
        }
    }
} 
```

这里是快速的：

```
public void FasterTestRun()
{
    int runs = 500000;                       
    Line line = new Line(new Point3d(1, 1, 1), new Point3d(0, 1000, 0));
    BoundingBox box = new BoundingBox(new Point3d(-50, 50, -50), new Point3d(50, 150, 50));

    bool isect;
    Interval v = new Interval();

    Random r = new Random();
    Point3d[] targets = new Point3d[runs];
    for (int i = 0; i < runs; i++)
    {
        targets[i] = new Point3d(r.NextDouble() * 20 - 10, 1000, r.NextDouble() * 20 - 10);
    }

    for (int i = 0; i < runs; i++)
    {
        line.To = targets[i];                
        isect = Rhino.Geometry.Intersect.Intersection.LineBox(line, box, 0, out v);                
    }            
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:23:10.220

现在我在家，我终于可以回答你的问题了，所以让我们开始吧……

## 递归

首先：*如果您使用结构化编程语言*，递归总是比迭代慢。你不能一概而论，因为函数式编程语言中的函数调用更快（函数在那里定义不同）。有关更多信息，[维基百科](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29#Recursion_versus_iteration)是一个很好的来源。

详细来说，递归调用将函数（或方法）分配的所有局部变量推入堆栈，等到内部调用返回（这包括相同的过程不断地......），最后从*调用中弹出值-堆栈*并继续与他们合作。这不仅是沉重的内存负载，这也是垃圾收集器的痛苦：你的函数必须等待的时间越长，你的对象在内存中的持续时间越长，老化并最终到达*gen1*或*gen2*。这意味着它们实际上需要很长时间才能被释放。

我可以看到的另一个问题如下：

```
public void LineBoxer(int[] check)
{
    // ...
    LineBoxer(octmanB.node[check[i]].child);
    // ...
} 
```

递归地传递数组意味着数组的*所有*值都驻留在堆栈上很长时间。即使大部分元素已经准备好发布！

如果您迭代地做同样的事情，那么堆栈就不会受到压力。分配的变量通常是临时变量，可以很快释放。内存分配是这里的瓶颈。这（并且因为您在评论中要求）这就是为什么我将继续更详细地介绍它。

## 提高性能 - 理论上

但是（在评论中）您还询问如何更有效地处理光线跟踪。基本上你使用八叉树是对的。您要执行的基本操作是简单的搜索。还有你的问题。据我了解您的代码，您正在测试每一个八叉树叶子是否被击中：

```
public void LineBoxer(int[] check)    // Cast a ray against boxes
{            
    for (int i = 0; i < check.Length; i++)
    {
        // ...
    }
} 
```

这只是搜索所有与你的光线相交的盒子。但这不是引入树木的动机。你可以想象一个八叉树，就像一个扩展到 3 维的[二叉搜索树](http://en.wikipedia.org/wiki/Binary_Tree)。二叉搜索树可以在一维中搜索条目（例如列表或数组）。要在二维结构中搜索信息，您可以使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)。现在我们需要添加另一个维度（因为我们现在是 3D 的），所以我们使用[octrees](http://en.wikipedia.org/wiki/Octree)。

到目前为止一切都很好，但是树如何帮助我们“更好地”执行搜索操作呢？

那是因为[分而治之的原则](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)。如果我们在更大的信息集中搜索特定的东西，我们会将信息集分成小块。我们一直这样做，直到我们找到我们正在寻找的特定事物。

对于我们的八叉树，这意味着我们将一个立方体分成**8**个较小的立方体。现在我们测试每个盒子，如果我们的光线与它相交。在最好的情况下，它正好与一个盒子相交。那是要进一步检查的。但是，如果每个盒子包含*1000 个*盒子，我们只需通过一张额外的支票就可以摆脱*7000*张支票！

现在我们一次又一次地这样做，直到我们找到一个或多个叶子。递归执行此操作不应该比迭代执行此操作慢很多。想象一个有 100.000 个节点的八叉树。第一个立方体可以存储 8 个立方体，那 8 个立方体可以存储 64 个立方体（深度：2！）等等......

*   深度 = 3：512 个立方体
*   深度 = 4：4.096 个立方体
*   深度 = 5：32.768 个立方体
*   深度 = 6：262.144 个立方体
*   深度 = 7：2.097.152 个立方体
*   ...

如果我们正在搜索一个特定的盒子，我们的最大检查数量永远不会超过*8 x Depth元素。*所以我们将算法性能从*O(n)*提高到*O(log(n))*。¹

## 很好，但是如何将其应用于您的问题？

首先：您正在使用 C# - 一种面向对象的语言。所以使用对象！如果您将所有内容封装在一个对象结构中，那么将分而治之的原则应用于您的树结构非常简单。

在您的具体情况下，这意味着：

```
public class OctreeNode
{
    public bool IsLeaf { get; private set; }
    public OctreeNode[8] Children { get; private set; }

    public OctreeNode()
    {
        this.IsLeaf = true;
        this.Children = null;
    }

    // Don't forget to implement methods to build up the tree and split the node when required.
    // Splitting results in a tree structure. Inside the split-method 
    // you need to allocate the Children-Array and set the IsLeaf-Property to false.

    public bool Intersects(Line rayline, ref ICollection<OctreeNodes> Nodes)
    {
        Interval interval;

        // If the current node does not intersect the ray, then we do not need to
        // investigate further on from here.
        if (!Rhino.Geometry.Intersect.Intersection.LineBox(rayline, this.GetBoundingBox(), 0, out interval))
        {
            return false;
        }

        // If this is a leaf (in which we are interested in) we add it to 
        // the nodes-collection.
        if (this.IsLeaf)
        {
            Nodes.Add(this);
            return true;
        }

        // Not a leaf, but our box intersects with the ray, so we need to investigate further.

        for (int i = 0; i < 8; ++i)
        {
            // Recursive call here, but the result doesn't actually matter.
            this.Children[i].Intersects(rayline, Nodes)
        }

        // The ray intersects with our current node.
        return true;
    }
} 
```

这将为你做所有的魔法！它只测试树直到测试失败的深度，并继续直到你拥有光线相交的所有叶子。您还可以按照“谁获得了最大的交集间隔”对它们进行排序，以便在流式传输它们时将其中的对象置于更高的优先级，但由于我现在完全失败了这个主题，我将继续：

您甚至可以通过应用并行性进一步加快该算法的速度。这很容易使用[TPL](http://msdn.microsoft.com/en-us/library/vstudio/dd460717.aspx)，在这里很简单：

```
Parallel.For<int> (0; 8; i =>
{
    this.Children[i].Intersects(rayline, Nodes)
}); 
```

好吧，我想这已经足够了。我希望这对您和周围的更多人有所帮助。:)

*注意：我对**rhino3d*不是很熟悉。也许有内置功能可以帮助您更好地解决问题！

*注 2：请*原谅我，当我在所有方面都不是 100% 正确时，我已经有一段时间没有做这些理论考虑了......

¹在最好的情况下，我们在完全平衡的树中搜索一个特定的叶子。

# objective-c - iOS UIWebView setUserInteractionEnabled 为 NO 不适用于 iOS 6

> ID：15139875
> 
> 赞同：1
> 
> 时间：2013-02-28T15:53:38.270
> 
> 标签：objective-c, uitableview, ios6, uiwebview

我有一个 UIWebView 作为 UITableView 中的一个单元格。我知道这是不推荐的，但 WebView 不滚动，所以推荐无关紧要。我使用 web 视图来设置单元格的样式和主题。

我遇到的问题是，在 iOS 6 中，当我将 userInteractionEnabled 设置为 NO 时，UIWebView 不会将触摸事件传递给响应者链。表视图从不调用 didSelectRowAtIndexPath。我应该注意到这在 iOS 5 中运行良好。

我的问题是，Apple 是否改变了 UIWebView 处理 userInteractionEnabled 的方式？

任何评论都会有所帮助。

这是我打电话的地方。它在正确的单元格实例上被调用（我在表中只有 1 个 WebView 单元格）

```
webView.userInteractionEnabled = NO; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:14:11.533

在 iOS 6 中运行良好

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    UIWebView *wv = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, cell.contentView.frame.size.width, cell.contentView.frame.size.height)];
    NSString *html = @"<div></div>";
    [wv loadHTMLString:html baseURL:nil];
    wv.userInteractionEnabled = NO;
    [[cell contentView] addSubview:wv];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:42:22.073

我的问题与 userInteractionEnabled 无关。

这是因为我还覆盖了 shouldHighlightRowAtIndexPath: 方法

```
- (BOOL) tableView:(UITableView *)tableView shouldHighlightRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0) {
        return NO;
    }
    return YES;
} 
```

并且似乎在 iOs 6 中，这会禁用该 indexPath 处的单元格的触摸事件。很高兴知道。

# html - 自动将图像加载到 来自不同的href

> ID：15139879
> 
> 赞同：0
> 
> 时间：2013-02-28T15:53:55.257
> 
> 标签：html, href

所以我有两个div。代码如下。

```
<div class="picture">

</div><!-- end picture -->

<div class="gallery">
    <a href="link-to-image01.jpg"><img src="mythumnail01.jpg" /></a>
    <a href="link-to-image02.jpg"><img src="mythumnail02.jpg" /></a>
    <a href="link-to-image03.jpg"><img src="mythumnail03.jpg" /></a>
</div><!-- end gallery --> 
```

当页面加载时，我希望“div.gallery”中的第一个“href”显示在“div.picture”中。

图库是可管理的，因此“.gallery”中的缩略图可能最终会发生变化。这就是为什么我想查看“div.gallery”中的第一个“href”并将其显示在“div.picture”中。

这样的事情可能吗？我现在有一些代码在点击事件时将“div.gallery”的“href”加载到其中。但不知道如何在不点击的情况下自动完成。代码如下。

```
<script>
    $(document).ready(function () {
        $("div.gallery a").click(function (event) {
            event.preventDefault();
            $("div.picture").html($("<img>").attr("src", this.href).fadeIn(1000));
        });
    });
</script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:05:45.923

`<a>`您可以尝试使用 JQuery访问第一个：

```
$(document).ready(function () {
    var href = $('div.gallery a').get(0).href;
    $('div.picture').html($('<img>').attr('src', href).fadeIn(1000));
}) 
```

# zedgraph - ZedGraph - 如何修复饼图中的重叠标签？

> ID：15139880
> 
> 赞同：1
> 
> 时间：2013-02-28T15:54:03.910
> 
> 标签：zedgraph

我正在使用 PieItem AddPieSlice 方法来构建我的饼图，但无法弄清楚如何处理有时重叠的标签。有没有人找到解决方案或任何解决方法？

不幸的是，事实证明我还不能发布图片......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:51:10.197

也许尝试将`IsPreventLabelOverlap`属性设置为 true。不幸的是，这通常只会删除重叠的标签，而不是简单地将它们展开。因此，考虑到这一点，请参见下文。

没有一个库可以满足您的要求，但是可以`postpaint`选择。不幸的是，Zedgraph 没有修复重叠的标签（我尝试了很长时间但没有运气）。然而，有一种解决方法，但它很乏味，你必须真正考虑在哪里放置图形标签。请参阅下面的代码，了解添加标签的简单方法：

```
protected void Chart1_PostPaint(object sender, ChartPaintEventArgs e)
{
  if (e.ChartElement is Chart)
{
// create text to draw
String TextToDraw;
TextToDraw = "Chart Label"

// get graphics tools
Graphics g = e.ChartGraphics.Graphics;
Font DrawFont = System.Drawing.SystemFonts.CaptionFont;
Brush DrawBrush = Brushes.Black;

// see how big the text will be
int TxtWidth = (int)g.MeasureString(TextToDraw, DrawFont).Width;
int TxtHeight = (int)g.MeasureString(TextToDraw, DrawFont).Height;

// where to draw
int x = 5;  // a few pixels from the left border

int y = (int)e.Chart.Height.Value;
y = y - TxtHeight - 5; // a few pixels off the bottom

// draw the string        
g.DrawString(TextToDraw, DrawFont, DrawBrush, x, y);
} 
```

这将为您创建一个标签，您可以选择在哪里绘制它。然而，这是棘手的部分。您基本上需要找出图形在屏幕上的位置以及该点在该图形上的位置。非常麻烦，但如果它是静态图，那么它应该不是问题。我知道，这是一种 hack，但它确实有效，而且似乎是所有人都想出的。

让我们知道你想出了什么或者你是否尝试这个！

# wordpress - Wordpress 中自定义帖子类型的自定义图像大小

> ID：15139881
> 
> 赞同：5
> 
> 时间：2013-02-28T15:54:04.820
> 
> 标签：wordpress

`articles`我正在尝试通过以下函数将自定义图像大小添加到自定义帖子类型的帖子中`functions.php`：

```
function thumb_size($id)
{
    if(get_post_type() == "articles")
    {
        add_image_size('articles-thumb', 113, 72, true);
    }
}
add_action ( 'publish_post', 'thumb_size' ); 
```

并尝试通过以下代码显示它：

```
the_post_thumbnail('articles-thumb'); 
```

但是我看到的输出与我声明的大小不同，有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T13:49:45.960

我面临同样的问题，为任何上传类型生成大量图像变体不是一个好主意。我有一个自定义帖子类型“收藏”，它会生成 2 种不同大小的收藏专用，为什么每次上传都会生成这些大小？我找不到这个问题的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:31:40.950

`add_image_size('articles-thumb', 113, 72, true);`只需在您的 functions.php 文件中使用单行。删除函数的重置并添加操作代码。

然后将其与您在问题中的行一起显示。 `the_post_thumbnail('articles-thumb');`

您可能还需要重新生成缩略图。这个插件很好用：[http](http://wordpress.org/extend/plugins/regenerate-thumbnails/) ://wordpress.org/extend/plugins/regenerate-thumbnails/ 如果您的图像是在设置该图像大小之前上传的，则不会有该大小的缩略图。使用该插件为您上传的单个图像或所有图像重新生成缩略图。现在，每个重新生成的都将具有所有自定义尺寸的缩略图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-26T17:51:24.673

默认情况下将任何图像上传到 WordPress 后，它会生成 3 个默认大小的图像缩略图中号大号停止任何用户在当前主题上使用此图像大小在主题文件夹中的 functions.php 中使用以下代码使用 WordPress 操作删除这些middle_image_sizes_advanced 然后取消设置缩略图，中尺寸和大尺寸，这意味着只剩下完整的图像尺寸。

```
function w3learn_filter_image_sizes( $sizes) {

    unset( $sizes['thumbnail']);
    unset( $sizes['medium']);
    unset( $sizes['large']);

    return $sizes;
}
add_filter('intermediate_image_sizes_advanced', 'w3learn_filter_image_sizes');` 
```

关于我[在 wordpress 中删除默认媒体图像大小的详细信息](http://w3-learn.com/tutorials/removing-default-media-image-sizes-in-wordpress/)

# c# - DataGridView CellFormating 速度问题？

> ID：15139889
> 
> 赞同：0
> 
> 时间：2013-02-28T15:54:29.003
> 
> 标签：c#, datagridview, cell-formatting

我有一个 DataGridView，有很多行，大约 3k。我需要根据具体值制作一些不同颜色（3 种颜色）的行。当我这样做时，两种颜色都没有问题，如果有 3 种颜色，问题就开始了。
滚动条在 1.img 中消失了，当我向下滚动时它又出现了。第二个问题是当我双击 DGV 以查看所选项目的详细信息时，应用程序没有响应。当有 2 种颜色时，不会出现任何问题。
这是 1.img ![1.img](../Images/adf4c31f622b5f64f79f27f751786d06.png)

这是具有 2 种颜色的图像，您可以看到滚动条就位，当我双击时，没有“无响应” ![2.img](../Images/dba3ed1159bc9022ce7b4db56187ca1f.png) 这是我正在工作的代码：

```
private void CheckQuantity(DataGridViewRow dr)
    {
        var art = dr.DataBoundItem as DeArt;
        if (art != null)
            dr.DefaultCellStyle.BackColor = art.QuantityMin > art.QuantityRemaining ? Color.LightSalmon : Color.Empty;
    }
    private void CheckPVA(DataGridViewRow dr)
    {
        var art = dr.DataBoundItem as DeArt;
        foreach (DeArtPVA v in PVAprice)
        {
            if (dr.DefaultCellStyle.BackColor == Color.LightSalmon && v.IdArt == art.Id)
            {
                dr.DefaultCellStyle.BackColor = Color.FromArgb(255, 120, 10);
                break;
            }
            if (v.IdArt == art.Id)
                dr.DefaultCellStyle.BackColor = Color.Yellow;
        }
    }

    protected override void DGVWarehouse_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (e.ColumnIndex == 0)
        {
            CheckQuantity(dgrDataGridView.Rows[e.RowIndex]);
            CheckPVA(dgrDataGridView.Rows[e.RowIndex]);
        }
    } 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:09:37.807

**这条线上**的东西会有用吗？

```
private void DGVWarehouse_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
        {
            int colIndex = e.ColumnIndex;
            int rowIndex = e.RowIndex;

        if (colIndex == 0 && rowIndex >=0)
        {
            DataGridViewRow theRow = DGVWarehouse.Rows[rowIndex];

            if (theRow.Cells[colIndex].Value.ToString() != String.Empty || theRow.Cells[colIndex].Value.ToString() != null)
            {

                if (theRow.Cells[colIndex].Value.ToString() == "YourArtID")
                {
                    theRow.DefaultCellStyle.BackColor = Color.LightYellow;
                }
                else if (theRow.Cells[colIndex].Value.ToString() == "YourArtID")
                {
                    theRow.DefaultCellStyle.BackColor = Color.LightGray;
                }
                else if (theRow.Cells[colIndex].Value.ToString() == "YourArtID")
                {
                    theRow.DefaultCellStyle.BackColor = Color.Red;
                }
                else
                { 
                    // Your DEFAULT STYLE
                }
            }
        }
    } 
```

# python - 如何将 14 天添加到变量的值？

> ID：15139890
> 
> 赞同：0
> 
> 时间：2013-02-28T15:54:30.340
> 
> 标签：python, django

我使用工厂男孩，这是我的工厂：

```
class ConFactory(factory.Factory):
    FACTORY_FOR = Con

    user = factory.SubFactory(UserFactory)
    category = '1'
    number = '12345678'
    time_start = factory.Sequence(lambda n:(datetime.now() + timedelta(days=n)).date(), int)
    time_end = factory.Sequence(lambda n:(datetime.now() + timedelta(days=n+100)).date(), int)
    reminder = datetime.now() 
```

如何设置`reminder`为`time_start`+ 14 天

`reminder`=`time_start + 14 days`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:02:28.337

如果要根据其他属性值设置属性值，则需要使用`Lazy Attributes`.

在您的情况下，您应该从 datetime 导入 timedelta 并将此行放入您的工厂：

```
reminder = factory.LazyAttribute(
    lambda con_factory: con_factory.time_start + timedelta(14)
) 
```

有关更多信息，您可以阅读[此](https://github.com/dnerdy/factory_boy#lazy-attributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:18:26.047

```
 from datetime import timedelta
 reminder = datetime.now() + timedelta(14) 
```

但是，您不能添加`time_start`初始化，因此您可以在`save()`函数中添加一个钩子：

```
 def save(self, *args, **kwargs):
     if self.time_start:
         self.reminder = self.time_start + timedelta(14)
     super(ConFactory, self).save(*args, **kwargs) 
```

如果您之前没有覆盖`model`属性，这里有更多[信息](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods)。

# android - 如何为每次测试运行重新创建一个数据库？

> ID：15139891
> 
> 赞同：2
> 
> 时间：2013-02-28T15:54:32.680
> 
> 标签：android, testing, robotium

我需要为每次测试运行重新创建一个数据库。我正在使用`Robotium`为我的应用程序自动化测试，因此每个测试都扩展`ActivityInstrumentationTestCase2`. 我发现我可以`RenamingDelegatingContext`用来模拟一个新的`Context`. 但只要我从课堂上扩展`ActivityInstrumentationTestCase2`我就不能使用`setActivityContext()`哪个`ActivityUnitTestCase`。可能是我走错了路。如果有的话，请建议另一种可能的方法来重新创建数据库。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:00:35.407

我尝试了一段时间使用 renamingdelegatingcontext 但失败了，因为据我所知，要在 ActivityInstrumentationTestCase2 中使用它，我将不得不模拟我无法执行的应用程序，因为我们的应用程序实际上扩展了应用程序并且在onCreate，它变成了一个可怕的问题。

然后我采取了简单的路线，并在每次运行之间清除了数据库（以及共享首选项和 cookie）

```
context.deleteDatabase(DATABASE_NAME) 
```

我发现这（令人惊讶地）不会太慢（与通过 GUI 测试任何东西相比）它设置正确，但这很容易做到。

哦，我只是说我曾经把所有这些代码放在一个扩展 ActivityInstrumentationTestCase2 的新测试类中，所以它在设置/拆卸中自动发生。

# c# - 你能解释一下这个 lambda 分组函数吗？

> ID：15139898
> 
> 赞同：5
> 
> 时间：2013-02-28T15:54:59.187
> 
> 标签：c#, .net, linq, lambda, grouping

我使用 LINQ 和[Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)已经有一段时间了，但我仍然对这个功能的各个方面并不完全满意。

所以，当我最近在做一个项目时，我需要根据一些属性获取一个不同的对象列表，我遇到了这段代码。它有效，我对此很好，但我想了解分组机制。如果我能提供帮助，我不喜欢简单地插入代码并逃避问题。

无论如何，代码是：

```
var listDistinct
    =list.GroupBy(
        i => i.value1,
        (key, group) => group.First()
    ).ToList(); 
```

在上面的代码示例中，您首先调用`GroupBy`并传递一个 lambda 表达式，告诉它​​按属性分组`value1`。代码的第二部分引起了混乱。

我知道这`key`是`value1`在`(key, group)`声明中的引用，但我仍然没有完全理解正在发生的一切。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T15:59:02.690

> 什么表达
> 
> ```
> list.GroupBy(
>     i => i.value1,
>     (key, group) => group.First()) 
> ```
> 
> 做？

这会创建一个查询，该查询在执行时会分析序列`list`以生成组序列，然后将组序列*投影*到新序列中。在这种情况下，投影是从每组中取出第一项。

第一个 lambda 选择构建组的“键”。在这种情况下，列表中具有相同`value1`属性的所有项目都放在一个组中。他们共享的价值成为该群体的“关键”。

第二个 lambda 从键控组的序列中投影；就好像你已经`select`对组序列做了一个。此查询的最终效果是从列表中选择一组元素，使得结果序列的每个元素都具有不同的`value1`属性值。

文档在这里：

[http://msdn.microsoft.com/en-us/library/bb549393.aspx](http://msdn.microsoft.com/en-us/library/bb549393.aspx)

如果文档不清楚，我很乐意将批评意见传递给文档经理。

> 此代码`group`用作 lambda 的形式参数。不是`group`保留关键字吗？

不，`group`是*上下文关键字*。LINQ 已添加到 C# 3.0，因此可能已经有现有程序`group`用作标识符。`group`如果将这些程序设置为保留关键字，这些程序将在重新编译时被破坏。而是`group`仅在查询表达式的上下文中的关键字。在查询表达式之外，它是一个普通标识符。

如果您想注意它是一个普通标识符这一事实，或者如果您想`group`在查询表达式中使用该标识符，您可以通过在它前面加上 来告诉编译器“将其视为标识符，而不是关键字” `@`。如果我写上面的代码，我会说

```
list.GroupBy(
    i => i.value1,
    (key, @group) => @group.First()) 
```

说清楚。

> C# 中是否还有其他上下文关键字？

是的。我在这里记录了它们：

[http://ericlippert.com/2009/05/11/reserved-and-contextual-keywords/](http://ericlippert.com/2009/05/11/reserved-and-contextual-keywords/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T16:04:29.877

我想通过使用将其简化为一个列表`int`以及如何在此列表中进行区分`GroupBy`：

```
var list = new[] {1, 2, 3, 1, 2, 2, 3}; 
```

如果你`GroupBy`用打电话`x => x`，你会得到 3 组类型：

```
IEnumerable<IEnumerable<int>>

{{1,1},{2,2,2},{3,3}} 
```

每组的键是：1,2,3。然后，调用时`group.First()`，意味着你得到每组的第一项：

```
{1,1}: -> 1.
{2,2,2}: -> 2
{3,3} -> 3 
```

所以最终的结果是：`{1, 2, 3}`

你的情况与此类似。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T16:01:22.307

它使用该方法的[重载](http://msdn.microsoft.com/en-us/library/bb534501.aspx)`Enumerable.GroupBy`：

```
public static IEnumerable<TResult> GroupBy<TSource, TKey, TResult>(
   this IEnumerable<TSource> source,
   Func<TSource, TKey> keySelector,
   Func<TKey, IEnumerable<TSource>, TResult> resultSelector
) 
```

其中，如[MSDN](http://msdn.microsoft.com/en-us/library/bb549393.aspx)所述：

> 根据指定的键选择器函数对序列的元素进行分组，并根据每个组及其键创建结果值。

因此，与返回一堆组（即）的[其他重载](http://msdn.microsoft.com/en-us/library/bb341740.aspx)不同，此重载允许您将每个组投影到您选择`IEnumerable<IGrouping<TK, TS>>`的单个实例。`TResult`

请注意，您可以使用基本`GroupBy`重载和 a获得相同的结果`Select`：

```
var listDistinct = list
    .GroupBy(i => i.value1)
    .Select(g => g.First())
    .ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:57:17.897

```
(key, group) => group.First() 
```

它只是获取`First()`每个组中的元素。

在该 lambda 表达式`key`中是一个用于创建该组（`value1`在您的示例中）的键，并且`group`与`IEnumerable<T>`所有具有该`key`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T16:10:49.617

下面的自我描述示例应该可以帮助您理解分组：

```
class Item
{
    public int Value { get; set; }
    public string Text { get; set; }
}

static class Program
{
    static void Main()
    {
        // Create some items
        var item1 = new Item {Value = 0, Text = "a"};
        var item2 = new Item {Value = 0, Text = "b"};
        var item3 = new Item {Value = 1, Text = "c"};
        var item4 = new Item {Value = 1, Text = "d"};
        var item5 = new Item {Value = 2, Text = "e"};

        // Add items to the list
        var itemList = new List<Item>(new[] {item1, item2, item3, item4, item5});

        // Split items into groups by their Value
        // Result contains three groups.
        // Each group has a distinct groupedItems.Key --> {0, 1, 2}
        // Each key contains a collection of remaining elements: {0 --> a, b} {1 --> c, d} {2 --> e}
        var groupedItemsByValue = from item in itemList
                                  group item by item.Value
                                  into groupedItems
                                  select groupedItems;

        // Take first element from each group: {0 --> a} {1 --> c} {2 --> e}
        var firstTextsOfEachGroup = from groupedItems in groupedItemsByValue
                                    select groupedItems.First();

        // The final result
        var distinctTexts = firstTextsOfEachGroup.ToList(); // Contains items where Text is: a, c, e
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T16:15:30.413

相当于

```
var listDistinct=(
    from i in list
    group i by i.value1 into g
    select g.First()
    ).ToList(); 
```

原始代码中的部分`i => i.value1`是**key selector**。在这段代码中，只是在***key****的group 元素*`i.value`的语法中。

 **原始代码中的部分是**结果选择器**`(key, group) => group.First()`的委托。在这段代码中，它是用更具语义的语法*from ... select*编写的。是这里是原始代码。***`g``group`*****

# sql-server-2008 - SQL Server 2008 R2 维护计划日志记录

> ID：15139901
> 
> 赞同：0
> 
> 时间：2013-02-28T15:55:05.840
> 
> 标签：sql-server-2008, maintenance-plan

有谁知道哪个表包含存储维护计划报告和日志记录使用的文件夹的信息？我已经搜索了 MSDB 中的每一个表，这些表甚至远程命名，就像它可能包含它一样，但到目前为止我还是空的。网络上有很多与查看维护计划信息相关的示例，但没有提及这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:15:16.330

我终于找到了这个。不幸的是，它没有存储在 MSDB 中，而是作为 XML 的一部分存储在 SSIS 包本身中。

# jquery - 溢出-x 以避免浏览器中的任何水平滚动

> ID：15139906
> 
> 赞同：0
> 
> 时间：2013-02-28T15:55:21.653
> 
> 标签：jquery, html, css, scroll, overflow

**问题解决** 了，所以我有这个问题，我无法为生活弄清楚：

无论大小如何，我都会在整个页面上显示一个下拉列表，这似乎有效：

[http://jsfiddle.net/Riskbreaker/y9wZz/](http://jsfiddle.net/Riskbreaker/y9wZz/)

问题是如果你强迫你的鼠标向右滚动，它会滚动不必要的滚动，显然这是万恶之源：

```
.dd {
    margin: 0 -1000em;
    padding: 0 1000em;
    position: absolute;
    top: 100%;
    visibility: hidden;
} 
```

我试过这个：

```
body {overflow-x: hidden;} 
```

*（注意，我也尝试过 HTML 溢出-x）* .....**当然它会删除滚动条（水平）**，但这不是问题......如果你试图强制它，FF 会监听并且根本不滚动但是，休息...Chrome/IE/Safari 滚动...有解决方案吗？

这个人有类似的东西，但在这里没有答案： [overflow-x:hidden still can scroll](https://stackoverflow.com/questions/8635799/overflow-xhidden-still-can-scroll)

最后我尝试了这个：

```
$(element).scroll(function () {
    this.scrollLeft = 0;
}); 
```

但没有做任何事情。

**解决方案** 我只需要在 html 上添加这个： `html {overflow: hidden; overflow-y: auto;}`...谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:50:36.737

**解决方案**我只需要在 html 上添加这个： html {overflow: hidden; 溢出-y：自动；}...谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:25:42.513

更改这些设置...这些扩展方式延伸到您的部分/div 和正文的右侧。

保证金：0 -1000em；填充：0 1000em；

我分别将其更改为 -100px 和 100px，它仍然略微向右滚动，但停止了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-08T19:35:24.147

我已经完成了所有其他解决方案，但不幸的是它们都不适合我。

我有一个最简单的解决方案，这是一个`css`规则

```
.nicescroll-rails-hr{display:none!important} 
```

希望它也能帮助你。

# sql - 将 SQL 中的两个字段组合为 WHERE 子句

> ID：15139907
> 
> 赞同：1
> 
> 时间：2013-02-28T15:55:23.437
> 
> 标签：sql, sql-server

我[在 Stackoverflow 网站上找到了这个问题，](https://stackoverflow.com/questions/10325170/combine-two-columns-in-sql-for-where-clause/15139588#15139588)但它只回答 MySQL 服务器。我的问题非常相似，只是我正在使用 MS SQL 服务器。

这是我尝试过的，但它不起作用。任何帮助深表感谢。

```
SELECT *
WHERE ([fstName] + ' ' + [lstName]) LIKE '%John Smith%'
FROM [usersTable] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T15:55:57.860

`WHERE`子句必须在`FROM`子句之后。

```
SELECT *
FROM   Advancement.dbo.classNotes
WHERE  fstName + ' ' + lstName LIKE '%John Smith%' 
```

不好的一面是它不使用导致执行全表扫描的索引——这很慢。

# ios - 自动布局、屏幕旋转和 UIView 动画

> ID：15139909
> 
> 赞同：1
> 
> 时间：2013-02-28T15:55:28.893
> 
> 标签：ios, objective-c, autolayout

我有一个 UIView 的问题，我添加到屏幕底部并在按下按钮时将其动画以填充大部分屏幕。视图将上下动画并按预期旋转。如果我尝试在风景中设置动画，它会中断并给我错误消息：

```
*** Assertion failure in -[UIScrollView _edgeExpressionInContainer:vertical:max:], /SourceCache/UIKit_Sim/UIKit-2380.17/NSLayoutConstraint_UIKitAdditions.m:2174
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Autolayout doesn't support crossing rotational bounds transforms with edge layout constraints, such as right, left, top, bottom. The offending view is: <UIView: 0x9199340; frame = (20 0; 748 1024); transform = [0, -1, 1, 0, 0, 0]; autoresize = RM+BM; layer = <CALayer: 0x91993d0>>' 
```

有问题的视图是 self.view。

我如何创建 UIView：

```
[self.myContentView addSubview:subBar.filterListView];

[self.myContentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[filterListView]|"
                                                                           options:0
                                                                           metrics:nil
                                                                             views:@{@"filterListView": subBar.filterListView}]];

subBar.filterListView.bottomConstraint = [NSLayoutConstraint constraintWithItem:subBar.filterListView
                                                                      attribute:NSLayoutAttributeBottom
                                                                      relatedBy:NSLayoutRelationEqual
                                                                         toItem:self.mapView
                                                                      attribute:NSLayoutAttributeBottom
                                                                     multiplier:1
                                                                       constant:0];

subBar.filterListView.topConstraint = [NSLayoutConstraint constraintWithItem:subBar.filterListView
                                                                   attribute:NSLayoutAttributeTop
                                                                   relatedBy:NSLayoutRelationEqual
                                                                      toItem:self.mapView
                                                                   attribute:NSLayoutAttributeBottom
                                                                  multiplier:1
                                                                    constant:0];

[self.myContentView addConstraint:subBar.filterListView.bottomConstraint];
[self.myContentView addConstraint:subBar.filterListView.topConstraint]; 
```

self.myContentView 是一个占据整个 self.view 的 UIView：

```
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[contentView]|"
                                                                  options:0
                                                                  metrics:nil
                                                                    views:NSDictionaryOfVariableBindings(contentView)]];

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[contentView]|"
                                                                         options:0
                                                                         metrics:nil
                                                                           views:NSDictionaryOfVariableBindings(contentView)]]; 
```

要为 subBar.filterListView 设置动画，我删除了顶部和底部约束，重新分配它们，添加它们，然后设置动画：

```
[self.myContentView removeConstraint:view.topConstraint];
[self.myContentView removeConstraint:view.bottomConstraint];

view.topConstraint = [NSLayoutConstraint constraintWithItem:view
                                                  attribute:NSLayoutAttributeTop
                                                  relatedBy:NSLayoutRelationEqual
                                                     toItem:self.topToolBar
                                                  attribute:NSLayoutAttributeBottom
                                                 multiplier:1
                                                   constant:0];

view.bottomConstraint.constant -= SUB_BAR_SIZE.height;

[self.myContentView addConstraint:view.topConstraint];
[self.myContentView addConstraint:view.bottomConstraint];

[self.myContentView setNeedsUpdateConstraints];

[UIView animateWithDuration:.25 animations:^{
    [self.myContentView layoutIfNeeded];
}]; 
```

代码在旋转时会与顶部和底部混淆吗？它认为肖像顶部是风景的左边吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:55:47.323

好的，我找到了解决方案。它没有解决上述问题，而是找到了另一种解决方法。

我将约束更改为 Visual Format Language (VFL) 方法：

```
subBar.filterListView.verticalConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:[filtersSubBar][filterListView(0)]" options:0
                                                                                    metrics:nil
                                                                                      views:@{@"filterListView": subBar.filterListView, @"filtersSubBar" : subBar.filtersSubBar}]; 
```

我认为问题在于使用导致问题的属性`NSLayoutAttributeTop`,`NSLayoutAttributeRight`等。

Autolayout 无法处理旋转并尝试使用`NSLayoutAttributeTop`应该更改为的时间`NSLayoutAttributeRight`来表达新的方向。我想我们可以手动更改约束。

似乎 VFL 以不同的方式处理它并且不使用属性？

这感觉好像它要么是一个错误，要么只是 iOS 的一个缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T20:39:45.453

对于从谷歌来到这里的任何人：我在自定义 PushSegue 中调用 presentView 控制器时遇到了这个异常：

```
@implementation PushSegue
- (void) perform
{
    UIViewController* fromController = (UIViewController*) self.sourceViewController;
    UIViewController* toController = (UIViewController*) self.destinationViewController;

    CATransition* transition = [CATransition animation];

    BOOL iPad = [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad;

    transition.duration = iPad ? 0.5 : 0.3;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush;

    switch ([UIApplication sharedApplication].statusBarOrientation)
    {
        case UIInterfaceOrientationPortraitUpsideDown:
            transition.subtype = kCATransitionFromLeft;
            break;

        case UIInterfaceOrientationLandscapeLeft:
            transition.subtype = kCATransitionFromBottom;
            break;

        case UIInterfaceOrientationLandscapeRight:
            transition.subtype = kCATransitionFromTop;
            break;

        default:
            transition.subtype = kCATransitionFromRight;
            break;
    }

    [fromController.view.window.layer addAnimation:transition forKey:nil];

    [fromController presentViewController:toController animated:NO completion:nil];
}
@end 
```

原因是由于一些误解，我在我的代码中有这个：

```
[self.view setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

（这是我的第一个 ios 应用程序）你不应该执行这样的调用，所以我删除了它，现在一切正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T12:22:22.323

没错，自动布局不适用于影响 UI 对象对齐矩形的动画变换。

# c++ - 在不增加内存的情况下逐渐增加 CPU 使用率。想法？

> ID：15139913
> 
> 赞同：0
> 
> 时间：2013-02-28T15:55:50.447
> 
> 标签：c++, mysql, linux, debugging, cpu-usage

所以我有一个用 C++ 编写的应用程序，在 Ubuntu 12.04 上运行，它最初从数据库中读取一些数据，然后监视一个目录中的文件。当它们出现时，它会处理它们，然后将一些数据写回数据库。随着时间的推移，cpu 使用量逐渐增加，大约每天 5%，但内存使用量保持不变。逻辑上它看起来像这样：

```
-open db connect
-while(keep_running())
    - check dir for new files (I know - it should use the watch system and callbacks, but..)
    - process files
    - (possibly) update db
-end while
-close db connect 
```

在您发出 SIGINT 信号之前，keep_running() 始终为真

代码并没有那么复杂，所以我对 cpu 的使用感到茫然 - callgrind 看起来不错。我怀疑数据库连接，但在其他类似的应用程序中并没有表现出这种行为。我的下一步是将 valgrind 附加到一个进程并让它运行几天 - 同时，我还能尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:00:37.743

这并不奇怪。当您描述应用程序时，数据库表变得越来越大。

对较大表的查询可能会占用更多 CPU。您没有描述表、索引或查询，但行为是合理的。

您不一定会看到数据库使用的空间增加，因为数据库通常会在磁盘上为不断增长的表保留额外空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:15:03.173

结果不是数据库部分——有人在一个巨大的地图对象上使用了 .find() 。这是一个隐藏在一堆 db 部分中的调用，这就是我倾向于 db 的原因。

这里没什么可看的，继续：）

# php - 复杂：4 次连续卷曲，中间有 XML

> ID：15139915
> 
> 赞同：0
> 
> 时间：2013-02-28T15:55:51.357
> 
> 标签：php, xml, forms, post, curl

关于如何处理 PHP 中的连续卷曲，我有一个棘手的问题。我有这个令人难以置信的数据流：

1.  **example.com/one.php**通过 curl 将数据发布到**another.com/two.php**
2.  **another.com/two.php**通过 curl 将数据发布到**another.com/three.php**
3.  **another.com/three.php**用 XML（或 JSON）回复**another.com/two.php**
4.  **another.php/two.php**将 XML 转换为 php 数组，然后转换为我通过 curl 发布回源**example.com/one.php的查询字符串**

有用。如果您想知道为什么我有这种疯狂的数据流，那是因为 another.com/three.php 是一个带有 Ioncube 的混淆文件。我无法编辑它，但我必须先添加一些检查，然后才能将数据发送给他。不要浪费时间试图弄清楚我如何以另一种方式做到这一点，因为没有一个（相信我）。

在 example.com/one.php 上有一个用户填写数据的表单。当他们按“提交”时，他们会留在此页面上，而“默默地”我做出 1->2->3->4 以获得他们的响应（步骤 4 的 $_POST）然后可以将其保存到 example.com/log。文本。它再次起作用。

现在我的问题是：如何在 example.com/one.php 中显示 $_POST 响应（这与我在 log.txt 文件中得到的相同）？我的意思是这就是我在第 4 步中所拥有的。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, example.com/one.php);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $query_string);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
$xml = curl_exec($ch); 
```

$_POST 到达 example.com/one.php 但当然用户和这个 curl 处于两个不同的级别。我尝试使用 file_get_contents()、sleep() 和 CURLOPT_RETURNTRANSFER 没有成功。这个问题的答案是什么？我会去参加会议或 ob_start() 但我不确定。

# c# - 为什么我无法在 Visual Studio 2012 Pro 中将用户控件加载到我的工具箱中？

> ID：15139917
> 
> 赞同：2
> 
> 时间：2013-02-28T15:55:55.257
> 
> 标签：c#, visual-studio-2012

我去工具箱并右键单击然后选择项目然后我去COM组件选项卡然后浏览我的文件名在这种情况下是LineGraph.dll我在我的硬盘上看到这个文件我也在文件上做了属性和我看到类型是 .DLL

但是当我试图在工具箱中加载/打开它时，我得到错误：无法加载 LineGraph.tlb。但是该文件是 .dll 来自这个 .tlb 的哪里？

![在此处输入图像描述](../Images/1c1ebb0115b554cf81342f309c2b15ea.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T16:28:35.680

解决我的错误我试图将它加载为 COM Component 而不是 .Net 所以当我浏览它正在寻找的文件时 tlb 。现在它正在工作。

工具箱 > 鼠标右键单击按钮 > 选择项目 > .Net Framework 组件

等待几秒钟，直到它完成加载所有项目，然后单击右下角的浏览选择 .dll 文件并单击确定。

# java - 使用 Scanner 对象读取一系列输入

> ID：15139922
> 
> 赞同：0
> 
> 时间：2013-02-28T15:55:58.800
> 
> 标签：java, java.util.scanner

我必须检索三个输入，一个整数、一个字符串和一个双精度数；这就是我想我会怎么做[*注意：包含空格的字符串*]

```
record.setAccountNumber(input.nextInt());
record.setName(input.nextLine());
record.setBalance(input.nextDouble()); 
```

我试图替换 input.nextLine() 在

```
record.setName(input.nextLine()); 
```

使用输入 input.next()，由于 InputMisMatchException 但问题仍未解决。抛出错误是因为可能将双精度值分配给新的行值[这是我认为不确定的] 是否有办法检索包含空格的字符串并能够完成我必须输入的三个输入同时。谢谢

注意：我找不到与此相关的任何问题让我添加发生错误的整个方法

```
public void addAccountRecords(){
    AccountRecord record = new AccountRecord();
    input = new Scanner (System.in);

    try {
        output = new Formatter("oldmast.txt");
    } catch (FileNotFoundException e) {
        System.err.println("Error creating or opening the file");
        e.printStackTrace();
        System.exit(1);
    } catch (SecurityException e){
        System.err.println("No write access to this file");
        e.printStackTrace();
        System.exit(1);
    }

    System.out.println("Enter respectively an account number\n"+
            "a name of owner\n"+"the balance");

        while ( input.hasNext()){
            try{
                record.setAccountNumber(input.nextInt());
                record.setName(input.nextLine());
                record.setBalance(input.nextDouble());

                if (record.getBalance() >0){
                    output.format("%d\t%s\t%,.2f%n",record.getAccountNumber(),
                            record.getName(),record.getBalance());
                    record.setCount((record.getCount()+1));
                }else
                    System.err.println("The balance should be greater than zero");

            }catch (NoSuchElementException e){
                System.err.println("Invalid input, please try again");
                e.printStackTrace();
                input.nextLine();

            }catch (FormatterClosedException e){
                System.err.println("Error writing to File");
                e.printStackTrace();
                return;
            }
            System.out.println("Enter respectively an account number\n"+
                    "a name of owner\n"+"the balance\n or End of file marker <ctrl> z");
        }//end while
        output.close();
        input.close();

}//end AddAccountRecords 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:59:03.430

`nextLine`会将所有剩余数据读取到字符串的末尾，包括双精度数。你需要`next`改用。我不确定你为什么会得到一个`InputMisMatchException`- 例如：

```
String s = "123 asd 123.2";
Scanner input = new Scanner(s);
System.out.println(input.nextInt());    //123
System.out.println(input.next());       //asd
System.out.println(input.nextDouble()); //123.2 
```

所以问题可能出在您的输入或代码中的其他地方。

笔记：

*   如果我使用`Scanner input = new Scanner(System.in);`并输入，`123 asd 123.2`我会得到相同的结果。
*   如果字符串（第二个条目）包含空格，则第二个单词将被解析为 double 并将生成错误您的报告

# ruby - 数组中的唯一对象实例（Ruby）

> ID：15139929
> 
> 赞同：4
> 
> 时间：2013-02-28T15:56:11.453
> 
> 标签：ruby, arrays, object, instances, uniq

我有一个自定义类`Instruction`。实例被初始化并收集在一个数组中。有一些重复的（所有实例变量相同）实例，我想将它们过滤掉。

```
class Instruction
    attr_accessor :date, :group, :time
    def initialize(date, group, time)
        @date, @group, @time = date, group, time
    end
end

instructions = Array.new

instructions.push ( Instruction.new('2000-01-01', 'Big', '10am') )
instructions.push ( Instruction.new('2000-01-01', 'Small', '9am') )
instructions.push ( Instruction.new('1999-09-09', 'Small', '4pm') )
instructions.push ( Instruction.new('2000-01-01', 'Small', '9am') )

instructions.uniq.each {|e| puts "date: #{e.date} \tgroup: #{e.group} \ttime: #{e.time}"} 
```

我希望其中一个`'2000-01-01', 'Small', '9am'`条目被 删除`.uniq`，但是我仍然在输出中看到重复的条目。

我尝试向类定义中添加`==`和`eql?`方法，如下所示：

```
def ==(other)
    other.class == self.class && other.date == self.date && other.group == self.group && other.time == self.time
end
alias :eql? :== 
```

但这也不起作用……救命！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:01:30.573

您的使用`uniq`不起作用，因为即使 的两个实例`Instruction`可能共享 , , 的值，`@date`它们的身份也不同。您必须比较这些实例变量的值，而不是实例本身。`@group``@time``Instruction`

```
instructions.uniq{|e| [e.date, e.group, e.time]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T02:31:55.650

You forgot to override `hash`. `eql?` only gets called for objects with the same `hash` value.

# java - 使用快速排序

> ID：15139930
> 
> 赞同：0
> 
> 时间：2013-02-28T15:56:13.240
> 
> 标签：java, quicksort, pseudocode

我正在从我的数据结构和算法书籍中进行快速排序。在书中，它列出了一个快速排序方法，然后是一个它希望您与快速排序一起使用的 hoare 分区。我似乎遇到了一个问题，即我的 hoare 分区在数组上使用了超出范围的数字。它要么使用 8，要么如果我尝试修复它，它会变为 -1。我是否将书籍伪正确地转换为java？

快速排序伪代码

```
QuickSort(A, p, r)
if p<r
    q = partition(A, p, r);
    QuickSort(A, p, q - 1);
    QuickSort(A, q, r); 
```

霍尔分区伪代码

```
Hoare-Partition(A,p,r)
    x= A[p]
    i = p-1
    j=r+1
    while true
        repeat
            j=j-1
        until A [j] <= x
        repeat
            i = i +1
        until A[i] >= x
        if i < l
           exchange A[i] with A[j]
        else return j 
```

我的代码

```
public class RunSort {

    /**
     * @param args
     */
    public static void main(String[] args) {
        int[] sortNumbers = {4,5,6,2,3,7,2,1};
        int[] sorted = new int[sortNumbers.length];

        sorted = QuickSort(sortNumbers, 1, sortNumbers.length);
        System.out.print(sorted);
    }

    public static int[] QuickSort(int[] A, int p, int r){
        if(p < r){
            int q = partition(A, p, r);
            QuickSort(A, p, q - 1);
            QuickSort(A, q, r);
        }
        return A;

    }

    public static int partition(int[] A, int p, int r){
        int x = A[p];
        int i = p - 1;
        int j = r + 1;
        int temp;

        while(true){
            while(A[j] <= x && j != 0){
                j--;
            }
            while(A[i] >= x && i != A.length){
                i++;
            }
            if(i < j){
                temp = A[i];
                A[i] = A[j];
                A[j] = temp;
            }else{
                return j;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:59:34.777

提示：`repeat {...} until (condition)`不做与`while (condition) {...}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:08:00.160

根据文本，伪代码通常使用 1..arrayLength 作为数组的索引边界，但在 Java 等中，它是 0..arrayLength-1。您需要将参数调整为 in 中的主`QuickSort`调用`main`。

(As a nitpick, `QuickSort` should start with a lowercase letter by convention.)

# android - 导入多个属性返回错误

> ID：15139933
> 
> 赞同：1
> 
> 时间：2013-02-28T15:56:26.893
> 
> 标签：android, properties, import, greendao

我目前正在开发一个android项目，使用greenDAO作为ORM，我需要在我的数据库的不同表上发出多个请求。但是当我尝试导入多个属性（对`.where()`查询有用）时，我收到了这个错误：

```
The import psa_gt.dao.quizz_categoriesDao.Properties collides with another import statement 
```

我的进口：

```
import package.dao.quizz_questionsDao.Properties;
import package.dao.quizz_categoriesDao.Properties; 
```

我的查询（第二个返回此错误：）`"Quizz_categories_id_quizz cannot be resolved or is not a field"`：

```
List<quizz_questions> list_questions = daoquestions.queryBuilder().where(Properties.Quizz_questions_id_quizz.eq(value)).list();
List<quizz_categories> list_categories = daocategories.queryBuilder().where(Properties.Quizz_categories_id_quizz.eq(value)).list(); 
```

希望你能帮助我。

（抱歉我的英语不好，但 greenDAO 没有法语支持。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:28:36.800

代码中使用的属性不明确，因为编译器不知道是否将其解析为包 dao.quizz_questionsDao 或 dao.quizz_categoriesDao

**解决方案**：删除导入。并且在代码中使用完全限定的类名。IE

列表 list_questions = daoquestions.queryBuilder().where( **dao.quizz_questionsDao.Properties** .Quizz_questions_id_quizz.eq(value)).list(); 列表 list_categories = daocategories.queryBuilder().where( **dao.quizz_categoriesDao.Properties** .Quizz_categories_id_quizz.eq(value)).list();

# php - 使用 Laravel 通过一个代码库为多个域提供服务

> ID：15139935
> 
> 赞同：2
> 
> 时间：2013-02-28T15:56:37.907
> 
> 标签：php, laravel

我是 Laravel 的新手，现在正在弄清楚如何在我正在从事的这个项目中使用 Laravel。我对接近它有一些想法，并且想知道专家将如何完成这项工作。

我正在做的一个项目有 CMS、一个信息丰富的网站和大约 35 个专业网站。CMS、信息站点和专业站点在内容和设计上是不同的。但是所有 35 个专业网站都几乎相同。设计和布局相同，但站点包含不同的内容。目前所有网站都有自己的代码库，这使得维护非常困难。

我现在正在寻找一种只使用一个代码库的解决方案。CMS 和站点共享一些功能，并且都有自己的功能。我只是不确定如何做到这一点。

这些站点在安装了 DirectAdmin 的专用网络服务器上运行。在 DirectAdmin 中，可以创建域指针。这样，我可以通过检查 http_host 变量来创建一个显示正确内容的站点。此外，如果有一天某个专业站点需要与其他站点不同的功能，我还可以检查 http_host。我不确定这是否对 SEO 有任何影响，以及它是否是一个巧妙的解决方案。

我已经阅读了有关捆绑包的信息，并考虑将它们用于信息丰富的专业网站。然后，“主”应用程序目录将托管 CMS。site.com/ 将成为 cms，site.com/info 将显示一个包含信息站点的捆绑包，site.com/special 将显示专门站点的捆绑包。使用域指针时，某个域将显示另一个域的站点。但我认为这不适用于位于 site.com/(bundle) 的捆绑包。

我已经有一个由 http_host 区分内容的数据库。我现在想知道如何构造代码（以及如何将 35 个域指向正确的代码段）。

我希望这里的专家可以告诉我一些关于如何完成这项工作的最佳实践。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:21:46.133

我建议您保留 3 个项目（每种站点一个）。

您可以将主站点和他们建议的信息站点（作为一个捆绑包）结合起来，但这样做的唯一原因是在它们之间共享一些东西，这可能不是这种情况，因为它们具有不同的设计和内容。如果只是将它放在“/info”上，这可以通过精心设计的[虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/)配置来实现（不能给出太多的指导）。

虽然，我建议您将信息站点保留在[http://info.site.com](http://info.site.com)上。在不同的域（或子域）上拥有不同的网站对我来说是“正确的”。有些人甚至主张这是正确的做法，但谁知道...

如果您有可以在所有项目之间重用的库，我建议将它们放在一个包中，并将该包包含在所有项目中。

[现在，关于 35 个专业站点，您应该通过 Virtual Host 的ServerAlias](http://httpd.apache.org/docs/2.2/mod/core.html#serveralias)将所有 URL 指向同一个应用程序。

在该应用程序上，您应该定义允许您基于 URL 配置它的某些方面的[环境。](http://laravel.com/docs/install#environments)例如，您可以为每个网站定义不同的数据库，创建单独的日志文件、语言，以及在 /application/config 上可配置的任何内容。您也可以创建自己的配置。

# php - 字符串中的php标签

> ID：15139936
> 
> 赞同：-3
> 
> 时间：2013-02-28T15:56:39.687
> 
> 标签：php, xml

我正在尝试在 php 中创建一个 ArrayToXML 转换器。

我有这个代码：

```
function assocArrayToXML($root_element_name,$ar) {

         $xml = new SimpleXMLElement("<?xml version=\"1.0\"?><{$root_element_name}></{$root_element_name}>");

         $f = create_function('$f,$c,$a','
            foreach($a as $k=>$v) {
                       if(is_array($v)) {
                $ch=$c->addChild($k);
                $f($f,$ch,$v);
            } else {
                $c->addChild($k,$v);
            }
        }');
        $f($f,$xml,$ar);
        return $xml->asXML();
} 
```

来自[http://php.net/manual/es/book.simplexml.php](http://php.net/manual/es/book.simplexml.php)

我遇到的问题是这一行：

```
$xml = new SimpleXMLElement("<?xml version=\"1.0\"?><{$root_element_name}></{$root_element_name}>"); 
```

因为字符串有“？>”，而 php 的“thinks”是 php 标签的结尾。

如何在 php 字符串中写入这两个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:59:39.507

从您的问题中不清楚您的问题出在哪里，您可以逐字使用您的代码（[Demo](http://eval.in/11330)）：

```
$xml = new SimpleXMLElement("<?xml version=\"1.0\"?><{$root_element_name}/>"); 
```

对于 simplexml，这实际上等于以下较短的行（您可能更喜欢）：

```
$xml = new SimpleXMLElement("<{$root_element_name}/>"); 
```

SimpleXML 自己添加了 XML 序言，因此您无需编写它。

逃脱字符，所以它变成

```
$xml = new SimpleXMLElement("<?xml version=\"1.0\"?\><{$root_element_name}/>"); 
```

这不是必需的，但保留在这里，因为它是原始答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:57:34.947

只需拆分字符串：

```
'<' . '?xml .... 
```

# javascript - Openstack Swift - 尝试使用 Javascript 下载 blob

> ID：15139937
> 
> 赞同：2
> 
> 时间：2013-02-28T15:56:42.560
> 
> 标签：javascript

我在通过浏览器从容器中下载和保存 Blob 内容时遇到问题。将 blob 上传到容器可以正常工作，但我无法使用 Firefox 或 Chrome 下载它。我唯一实现的是检索响应（Firefox）中的内容，我只能下载它，因为 Chrome 缓存（这对我无效）。这是我正在使用的代码：

```
<script type="text/javascript">
function uploadFile() {
    var token = 'AUTH_AAAAAAAA';
    var method = 'GET';
    var url = 'http://ip/v1/AUTH_account/containerName/blobName';
    var xhr = new XMLHttpRequest();
    xhr.open(method, url, true);
    xhr.setRequestHeader('X-Auth-Token', token);
    xhr.setRequestHeader('accept', 'application/octet-stream');
    xhr.send();
}
</script> 
```

我不能只使用

```
<a  href='http://ip/v1/AUTH_account/containerName/blobName' onclick='javascript:uploadFile();'>Blob to download</a> 
```

因为此链接需要 Auth Token，它会以“401 Unauthorized”消息进行响应。

谢谢你的帮助。

# python - 增加 PCAP 时间戳值

> ID：15139939
> 
> 赞同：1
> 
> 时间：2013-02-28T15:56:59.237
> 
> 标签：python, scapy

Scapy 能够[在](https://stackoverflow.com/questions/10344127/specify-timestamp-on-each-packet-in-scapy)每个数据包的基础上修改时间戳，因此我想知道为什么通过指定起始值来修改 PCAP 中多个数据包的时间戳的最佳方法可能是。我能够修改数据包，但尚未成功增加微秒值。

例如，想要修改包含以下内容的 PCAP 中的数据包时间戳：

```
1360806997.231777 IP 192.168.1.100.50496 > 192.168.1.200.http: S 4211078664:4211078664(0) win 14600 <mss 1460,sackOK,timestamp 199086437 0,nop,wscale 3>
1360806997.231808 IP 192.168.1.200.http > 192.168.1.100.50496: S 256066681:256066681(0) ack 4211078665 win 14480 <mss 1460,sackOK,timestamp 199086195 199086437,nop,wscale 3>
1360806997.232034 IP 192.168.1.100.50496 > 192.168.1.200.http: . ack 1 win 1825 <nop,nop,timestamp 199086437 199086195>
1360806997.232043 IP 192.168.1.100.50496 > 192.168.1.200.http: P 1:19(18) ack 1 win 1825 <nop,nop,timestamp 199086437 199086195>
1360806997.232063 IP 192.168.1.200.http > 192.168.1.100.50496: . ack 19 win 1810 <nop,nop,timestamp 199086195 199086437> 
```

到以下：

```
1234567890.000000 IP 192.168.1.100.50496 > 192.168.1.200.http: S 4211078664:4211078664(0) win 14600 <mss 1460,sackOK,timestamp 199086437 0,nop,wscale 3>
1234567890.000001 IP 192.168.1.200.http > 192.168.1.100.50496: S 256066681:256066681(0) ack 4211078665 win 14480 <mss 1460,sackOK,timestamp 199086195 199086437,nop,wscale 3>
1234567890.000002 IP 192.168.1.100.50496 > 192.168.1.200.http: . ack 1 win 1825 <nop,nop,timestamp 199086437 199086195>
1234567890.000003 IP 192.168.1.100.50496 > 192.168.1.200.http: P 1:19(18) ack 1 win 1825 <nop,nop,timestamp 199086437 199086195>
1234567890.000004 IP 192.168.1.200.http > 192.168.1.100.50496: . ack 19 win 1810 <nop,nop,timestamp 199086195 199086437> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:52:54.963

这似乎有效：

```
def process_packets():
    pkts = rdpcap(infile)
    cooked=[]
    timestamp = 1234567890.000000
    for p in pkts:
        p.time = timestamp
        timestamp += 0.000001
        pmod=p
        cooked.append(pmod)
    wrpcap("dump.pcap", cooked) 
```

代码将以指定的秒数将每个数据包的新时间值写入新的 PCAP，并增加微秒值。如果有更优雅的方法，请告诉我。

# linux - awk 根据标志打印值

> ID：15139941
> 
> 赞同：0
> 
> 时间：2013-02-28T15:57:01.177
> 
> 标签：linux, sed, awk

我有一个格式为的数据文件

```
ID       Date            Sex     Age     r_val  r_flag  l_val    l_flag
0106610856   16/09/11    M   50      12.061  N       11.447  N
0107470802   09/09/11    F   64      3.146   A       4.338   A
0108490513   21/07/11    M   61      8.243   A   7.344   A
0108590534   18/08/11    M   52      4.714   A   5.106   A
0109480651   26/07/12    M   63      9.403   N   9.136   N
0110460758   21/07/11    M   64      5.643   I   4.272   I
0111290260   08/11/12    F   83      9.747   N   8.551   A
0111410339   07/02/13    M   71      4.979   A   4.482   A 
```

我想要做的是打印到一个新的文件 ID、性别、年龄和值（无论是 r_val 还是 l_val，只要其相应的标志设置为 N）。这是上面的示例输出

```
0106610856        M      50      12.061 
0106610856        M      50      11.447         
0109480651        M      63      9.403   
0109480651        M      63      9.136   
0111290260        F      83      9.747 
```

我尝试了以下 awk 命令来实现这一点：`awk '{if ($6 ~ /N/) print $1,$3,$4,$5; else if ($6 ~ /N/) print $1,$3,$4,$7}'`并得到以下结果

```
0106610856 M 50 12.061
0109480651 M 63 9.403
0111290260 F 83 9.747 
```

我知道这是不正确的格式，因为如果第一个条件为真，if 循环将不会搜索 if $8 ~/N/。因此，仅当 $6 条件为假时，我的 awk 命令才在 $8 条件为真时选择 l_val。如果 r_flag 和 l_flag 都设置为 N，我如何更改我的 awk 命令以获取 r_val 和 l_val。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:08:08.713

不要使用`if ..` **`else`**. 这样一来，您就简单地漏掉了一个`$6==$8=="N"`案例。

试试这个oneliner：

```
 awk 'NR>1{if($6=="N") print $1,$3,$4,$5; if($8=="N") print $1,$3,$4,$7 } ' file 
```

# php - PHP $_POST 索引在 Firefox 和 IE 中未定义，适用于 Chrome

> ID：15139942
> 
> 赞同：1
> 
> 时间：2013-02-28T15:57:01.793
> 
> 标签：php, internet-explorer, google-chrome, firefox, undefined-index

我有两个文件，一个主页 scada.php 和一个子页面 site.php。Scada.php 包含这样的链接：

```
<FORM action="site.php" method="post">
<li><td class="normal"><input type="image" name="sitename" 
value="Dublin" src="radiotower.jpg" alt="Dublin" title="Dublin"/>
Dublin
</td></li>
</form> 
```

Site.php 在这里访问站点的名称：

```
<?php
 $site = $_POST["sitename"];
 echo "<title id='title'>".$site."</title>";
?> 
```

然后它用 JS 检索它以显示在页面上并在数据库查询中使用：

```
<script>
var site = document.getElementById("title").innerHTML;
document.getElementById("alert").innerHTML = "<h2>"+site+"</h2>";
</script> 
```

我检查了站点名称的字符串长度，以确保它只包括名称的字符（“都柏林”）而不是 HTML 标题标签，并且长度正确为 6 个字符。

这在 Chrome 中运行良好；一切顺利，按预期运行。在 IE 和 Firefox 中，它会发出一个错误，指出“站点名称”是未定义的索引。我在 site.php 中的全局变量上运行了一个 vardump，结果是 Chrome 出现了 3 个变量（sitename_x、sitename_y 和 sitename）。Firefox 和 IE 只出现了两个（sitename_x 和 sitename_y），并且缺少站点名。

我搜索了仅在 Firefox 和 IE 中出现的 $_POST 问题，但没有发现任何有用的东西。有人提到提交按钮没有被按下，但这绝对不是这里的问题，因为与页面交互的唯一方法是按下输入按钮。变量站点名到底在哪里迷路了？

编辑：我最初有点不清楚。该表单包含多个输入，因此更准确：

```
<FORM action="site.php" method="post">
<li><td class="normal"><input type="image" name="sitename" value="Dublin"
src="radiotower.jpg" alt="Dublin" title="Dublin"/>
Dublin
</td></li>
<li><td class="normal"><input type="image" name="sitename" value="Temple" 
src="radiotower.jpg" alt="Temple" title="Temple"/>
Temple
</td></li>
</FORM> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:05:48.410

图像表单输入应仅返回单击它的 x 和 y 坐标。我会说 Chrome 在这里是错误的，并且没有通过返回名称和值对以及坐标来遵循标准

为站点名称创建一个单独的隐藏输入，你会很高兴，比如：

```
<form>
  <input type="hidden" name="sitename" value="Dublin" />
  <input type="image" name="siteimg" src="radiotower.jpg" />
</form> 
```

编辑：如果使用 jQuery 不是问题，我认为你最好使用这样的方法

```
<form action="" method="post" id="form">
    <div><img src="radiotower.jpg" alt="Dublin" title="Dublin" class="location" /></div>
    <div><img src="radiotower.jpg" alt="Temple" title="Temple" class="location" /></div>
    <div><input type="hidden" name="sitename" id="sitename" value="" /></div>
</form>

<script>
$(function() {
    $('.location').click(function() {
        var site = $(this).attr('alt');
        $('#sitename').val(site);

        $('#form').submit();
    });
});
</script> 
```

编辑 2：将此添加到您的 HTML 以包含 jQuery：

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:05:18.477

如果预期的值是“都柏林”，那么输入类型应该是`text`正确的——Chrome 可能足够清晰，可以识别输入实际上是文本，而 FF 和 IE 可能更容易上当，甚至不会尝试设置变量。

# javascript - Jquery - 大量链接按钮到关联的 div

> ID：15139943
> 
> 赞同：2
> 
> 时间：2013-02-28T15:57:06.303
> 
> 标签：javascript, jquery, popup, modal-dialog

我创建了一个简单的 jquery 弹出窗口。在我的网站中，我有几个 btns，每个链接到不同的弹出窗口。

**我的问题：** 有没有一种方法可以将所有按钮链接到相关的弹出窗口，而不必在下面开始按名称列出每个按钮和 div？或者是列出所有按钮和 div 的最短方法，而不必为每个按钮编写点击事件？

```
$(function() {
  $('.Btn1').click(function(e) {e.preventDefault();
  $('.Pop1').fadeIn();});
  $('.Btn2').click(function(e) {e.preventDefault();
  $('.Pop2').fadeIn();});
  var modalBgd = $('.PopBgd')
  $('.PopClose, .PopBgd').click(function(e) {e.preventDefault();
  modalBgd.fadeOut();});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:01:42.943

取决于您的链接/按钮/可点击元素的外观。我会做这样的事情：选择所有这些元素，然后将事件处理程序应用于它们，例如

```
$(".popup").click(...); 
```

您可以使用更复杂的选择器，但想法始终相同。请记住，一个元素可以有多个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:05:08.177

您可以在链接中的数据元素中提供弹出窗口的 ID/类，如下所示：

```
<a href="#" data-popup=".Pop1" class="openpopup">open popup 1</a>
<a href="#" data-popup=".Pop2" class="openpopup">open popup 2</a> 
```

这会将您的javascript减少到：

```
$('.openpopup').click(function(e) {
    e.preventDefault();
    $($(this).data('popup')).fadeIn();
}); 
```

# ada - Ada sin(x) 泰勒级数计算

> ID：15139946
> 
> 赞同：4
> 
> 时间：2013-02-28T15:57:17.210
> 
> 标签：ada, trigonometry

我是 Ada 的绝对初学者，我正在尝试使用泰勒级数计算 sin(x) [sin(3) now]，但我就是无法让它工作。

所以这是我的程序：

```
with Ada.Float_Text_IO;
with Mat;
procedure SinKoz is
    X:Float:=3.0;
    Szamlalo:Float:=0.0;
begin
    for I in 1..100 loop
        Szamlalo := Szamlalo + ((-1.0)**I)*(X**(2.0*I+1.0))/Mat.Faktorialis(2*I+1);
    end loop;
    Ada.Float_Text_IO.Put( Szamlalo );
end SinKoz; 
```

在 Mat 内部，这是我的 Faktorialis，它计算 2*I+1 的阶乘：

```
function Faktorialis( N: Float ) return Float is
      Fakt : Float := 1.0;
begin
      for I in 1..N loop
         Fakt := Fakt * I;
      end loop;
      return Fakt;
end Faktorialis; 
```

当我试图编译我的代码时，出现了这个错误： **指数必须是自然类型，找到类型“Standard.Float”**

我希望你能帮助我找出我的类型出了什么问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T16:28:11.807

第一个问题是：你需要将 X 提高到非整数幂吗？

在我看来，您好像没有：在这种情况下替换`X**(2.0*I+1.0)`为`X**(2*I+1)`，一切都会好起来的。

但是如果你真的这样做（也许不是在这里，而是在另一个应用程序中）你只需要让这样一个操作符可见：包中有一个用于 Float 的，`Ada.Numerics.Elementary_Functions`所以在你的函数之前

```
with Ada.Numerics.Elementary_Functions;
use Ada.Numerics.Elementary_Functions; 
```

它应该按书面规定工作。最后，如果您已经创建了自己的浮点类型，您可以`Ada.Numerics.Generic_Elementary_Functions`使用您的类型作为参数来实例化泛型包，从而专门为您的类型创建一组这些函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:13:51.857

一定要喜欢艾达的强打字。

在我的脑海中，我怀疑你的问题可能是这一行：

```
Szamlalo := Szamlalo + ((-1.0)**I)*(X**(2.0*I+1.0))/Mat.Faktorialis(2*I+1); 
```

`2.0*I+1.0`将返回一个浮点数。不是天生的。您可以尝试将其包装在`Integer()`or `Natural()`（Natural 是 Integer 的子类型）中，看看是否有帮助。

# java - Java：将文件从 URL 直接上传到带有库的 FTP 服务器

> ID：15139948
> 
> 赞同：1
> 
> 时间：2013-02-28T15:57:17.670
> 
> 标签：java, url, upload, ftp, java-7

可以将文件从 url (http://... .exe/ .zip ...) 直接传输到 Java 7 中的 ftp 服务器（带有一些附加库，例如来自 Apache？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:52:55.520

通过标准 API 类支持 HTTP 和至少有限的 FTP 支持`java.net.URL`。您只能限制访问特定的 FTP 功能，例如设置传输模式，但在大多数情况下它可以工作。

如果添加 Apache Commons IO，则可以使用`IOUtils`该类直接从 HTTP 服务器复制到 FTP 服务器：

```
InputStream in = new URL("http://host/path").openStream();
OutputStream out = 
    new URL("ftp://user:pass@host/path").openConnection().getOutputStream();

IOUtils.copy(in, out);

in.close();
out.close(); 
```

如果你不想添加对 Commons IO 的依赖，你只需要写几行来复制没有 3rd 方库支持的数据：

```
byte[] buffer = new byte[16384];
int r = 0;
while ((r=in.read(buffer))>=0) {
    out.write(buffer, 0, r);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:59:57.840

我不相信通常可以指示 Web 服务器将文件直接上传到 FTP 服务器，但是绝对可以编写一个程序自己下载文件然后将其上传到 FTP 服务器。

# objective-c - 调整 MKMapView 的大小

> ID：15139952
> 
> 赞同：0
> 
> 时间：2013-02-28T15:57:22.957
> 
> 标签：objective-c, mkmapview, frame

看起来很简单的任务。但是当我尝试使用**setFrame**方法调整大小时，我遇到了故障。还有一些其他 UIView 使用**setFrame**方法调整大小，并且效果很好。我用滑块和地图视图制作了自定义应用程序。SlideBar 更改 MKMapView 的 X 位置，但保持宽度等于屏幕宽度。这种方法适用于所有视图。但是 MKMapView 调整大小时遇到​​了麻烦。任何人都可以提供线索为什么会发生以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T12:00:48.973

我遇到了同样的问题，这似乎只发生在 iOS 6（Apple Maps）上而不是 iOS 5（Google Maps）上。

我的解决方案是在用户开始拖动分隔手柄时拍摄地图的“屏幕截图”，在拖动过程中用此屏幕截图替换地图，并在松开手指时将地图放回原处。

对于 UIView 屏幕截图，我使用了[How to capture UIView to UIImage 中的代码而不损失视网膜显示的质量，](https://stackoverflow.com/questions/4334233/how-to-capture-uiview-to-uiimage-without-loss-of-quality-on-retina-display)以及 Nikolai Ruhe 在[How do I release a CGImageRef in iOS](https://stackoverflow.com/questions/12147779/how-do-i-release-a-cgimageref-in-ios/12148136#12148136) for a nice background color 中的回答。

我的 UIPanGestureRecognizer 操作是这样的（这`(MKMapView)self.map`是`(UIView)self.mapContainer`在 Interface Builder 上设置自动调整大小的子视图）：

```
- (IBAction)handleMapPullup:(UIPanGestureRecognizer *)sender
{
    CGPoint translation = [sender translationInView:self.mapContainer];

    // save current map center
    static CLLocationCoordinate2D centerCoordinate;

    switch (sender.state) {
        case UIGestureRecognizerStateBegan: {
            // Save map center coordinate
            centerCoordinate = self.map.centerCoordinate;

            // Take a "screenshot" of the map and set the size adjustments
            UIImage *mapScreenshot = [UIImage imageWithView:self.map];
            self.mapImage = [[UIImageView alloc] initWithImage:mapScreenshot];
            self.mapImage.autoresizingMask = self.map.autoresizingMask;
            self.mapImage.contentMode = UIViewContentModeCenter;
            self.mapImage.clipsToBounds = YES;
            self.mapImage.backgroundColor = [mapScreenshot mergedColor];

            // Replace the map with a screenshot
            [self.map removeFromSuperview];
            [self.mapContainer insertSubview:self.mapImage atIndex:0];
        } break;

        case UIGestureRecognizerStateChanged:
            break;

        default:
            // Resize the map to the new dimension
            self.map.frame = self.mapImage.frame;

            // Replace the screenshot with the resized map
            [self.mapImage removeFromSuperview];
            [self.mapContainer insertSubview:self.map atIndex:0];

            // Empty screenshot memory
            self.mapImage = nil;
            break;
    }

    // resize map container according do the translation value
    CGRect mapFrame = self.mapContainer.frame;
    mapFrame.size.height += translation.y;

    // reset translation to make a relative read on next event
    [sender setTranslation:CGPointZero inView:self.mapContainer];

    self.mapContainer.frame = mapFrame;
    self.map.centerCoordinate = centerCoordinate; // keep center
} 
```

# php - PHP 执行 Python

> ID：15139953
> 
> 赞同：0
> 
> 时间：2013-02-28T15:57:23.977
> 
> 标签：php, python, execute

我正在尝试在 php 页面上执行 python 程序。python 程序编写了一些 html 代码，我可以在我的 php 页面中使用这些代码。当我从终端执行 python 程序时，一切正常。

但是后来我从 php 执行 python 程序什么也没发生。如果我`exec("python program.py",$output)`使用`$output == "array ( )"`

```
BUT if I remove the line `f = open('/var/www/data.php', w)`  
the `$output == " array ( 0 => 'start program', 1 => 'open error' ) "` 
```

剪切php代码：

```
 output = null;
 exec("python /var/www/webwrite.py", $output);
 echo var_export($output, TRUE); 
```

截取python代码：

```
print "start program"

f =  open('/var/www/data.php', 'w')
if f <> 0:
    print "open file"
    f.write('<div class=divdata><pclass="data">Data</p><div id="webdata">')
    fstr = '%3.1f'%data
    f.write(fstr)
    f.write('</div></div>')
    f.close()
else:
   print "open error" here 
```

如何`open(filename, w)`在从 php 执行的 python 中使用？为什么我不能使用 open 命令然后从 php 执行。是“开放”的替代品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:02:37.483

通常在这些情况下，您可能有 PATH 或权限问题。

尝试将 py 脚本分配给与运行 Web 服务器相同的所有者，例如（假设 Web 服务器以单用户身份运行）：

```
chown apache:apache your.py 
```

它打开或写入的任何文件也需要由同一用户拥有。那么你可能需要增加权限：

```
chmod 775 your.py 
```

如果这不起作用，请输入 python 脚本的完整路径。您可以通过以下方式获得：

```
which python 
```

不过，不要将这些完整路径硬编码到 PHP 代码中，将其放在配置文件中。

# xpath - SeleniumWebdriver - 集合选定元素的大小

> ID：15139960
> 
> 赞同：0
> 
> 时间：2013-02-28T15:57:36.007
> 
> 标签：xpath, selenium, webdriver, css-selectors, selenium-webdriver

我想在根 div 中选择所有子孙子孙孙等，但问题是：当这些选定元素的集合的大小大于 55 时，集合削减了元素的前半部分，我的父母中有 98 个 div div 整体，但 selenium 不知道对它们求和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T11:26:10.373

尝试运行此代码并查看显示了多少元素，对我来说它显示了 1000 多个元素：

```
public static void main(String[] args) {
    WebDriver driver = new FirefoxDriver();
    driver.get("http://yahoo.com");
    List<WebElement> allElements = driver.findElements(By.xpath("//*"));
    System.out.println("number of elements in the page: " + allElements.size());
    driver.quit();
} 
```

选择哪些元素并不重要，您可以将 xpath 更改为`By.xpath("//div")`，它仍会显示 300 多个结果。

难道你的 IDE 在调试期间只显示部分信息？

# batch-file - 更改插入符号/光标位置

> ID：15139962
> 
> 赞同：3
> 
> 时间：2013-02-28T15:57:41.777
> 
> 标签：batch-file, cursor, cmd, caret

今天我来给大家一个新的挑战！

开个玩笑：我的问题是命令提示符的插入符号。[“整个”故事在底部”]

长话短说，我必须将插入符号位置移动到`ECHO`同一位置的新行。那是因为我只需要打印几个字符串 [大约三行]；`CLS`由于执行速度的原因，每次闪烁时都会制作 a 。

我尝试了一些东西，也使用了`<NUL SET /P "=InsertHereString"`，但总是存在我已经`ECHO`编辑的问题并没有消失！

所以这是我的要求：有一种方法可以移动闪烁的一堆像素，允许从 CMD 的某个点开始写入字符串？

底部：“整个”故事是我批量制作了一种安装程序，从可移动驱动器复制和链接一些应用程序。现在，我还制作了一个状态栏，以百分比表示已完成的工作。在状态栏下我想显示程序实际上在做什么，但是当一个目录中有很多文件要链接或复制时，它会列出一个列表而不是删除以前的东西，所以此刻我只是在主字符串旁边添加`ECHO`一个`" - Done!"`或一个字符串。`" - Failed!"`我要求这样做是因为在另一种语言 [C++] 中，我找到了一种用于制作 PacMan 模拟的方法。它包含一个需要一个方法`X`和一个`Y`变量，该变量标识笛卡尔平面中的插入符号位置，该`(0,0)`位置是命令提示符的左上角。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:47:04.273

BG v2.5 (unicode)

[http://batch.xoo.it/t2238-BG-exe-Utility-for-Batch-Games.htm](http://batch.xoo.it/t2238-BG-exe-Utility-for-Batch-Games.htm)

> BG.EXE 是一个在cmd.exe 中打印文字颜色的工具。它接受打印 ascii 字符的正则表达式。它还具有有用的功能。
> 
> 定位行列：：定位光标在指定行和列中的位置，基于零索引。

调用它：`bg Locate 0 0`光标跳到那里。

* * *

**或者**

光标位置.exe

[http://www.dostips.com/forum/viewtopic.php?f=3&t=3428](http://www.dostips.com/forum/viewtopic.php?f=3&t=3428)

> 获取或设置光标位置。
> 
> CursorPos [[±]col [±]row]
> 
> 如果没有给出参数，则在 ERRORLEVEL 中以 col+(row<<16) 的形式返回当前光标位置。
> 
> 如果任何坐标有符号，则给出的位置是相对于当前坐标的。
> 
> 如果光标移动，则在 ERRORLEVEL 中返回新位置字符的 Ascii 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T20:52:26.057

习惯使用 cursorpos 需要一点时间。这是一个概念证明。不确定这是否与您的想法相似，但我认为您想到的诡计是可能的。只要有足够的啤酒，一切皆有可能。

将此另存为`pacman.bat`并运行它。结果非常壮观：P（如果您的控制台使用的是 truetype 字体，则更是如此。）

```
@echo off
setlocal enabledelayedexpansion

Rem cursorpos and colorshow created by Antonio Perez Ayala
Rem http://www.dostips.com/forum/viewtopic.php?f=3&t=3428
call :heredoc cursorpos >cursorpos.hex && goto endCursorpos
4D5A900003[3]04[3]FFFF[2]B8[7]40[35]B0[3]0E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F74
2062652072756E20696E20444F53206D6F64652E0D0D0A24[7]55B5B8FD11D4D6AE11D4D6AE11D4D6AE9FCBC5AE18D4D6AEED
F4C4AE13D4D6AE5269636811D4D6AE[8]5045[2]4C010200EB84E24F[8]E0000F010B01050C0002[3]02[7]10[3]10[3]20[4]40[2]10
[3]02[2]04[7]04[8]30[3]02[6]03[5]10[2]10[4]10[2]10[6]10[11]1C20[2]28[84]20[2]1C[27]2E74657874[3]4201[3]10[3]02[3]02[14]20[2]60
2E7264617461[2]F6[4]20[3]02[3]04[14]40[2]40[8]E806[3]50E81301[2]558BEC83C4E06AF5E81201[2]8945FC8D45E650FF75FCE8
FD[3]668B45EC668945E4E8BC[3]E8DB[3]803E0075058B45EAEB5C803E3D750646E8C6[3]668B4DEAE84A[3]8945EAE8B5[3]803E
007418803E2C750646E8A5[3]668B4DE4E829[3]668945EC8B5DEA53FF75FCE8AE[3]8D45E650536A018D45E350FF75FCE895[3]0F
B645E3C9C333C032DB33D28A164680FA2B740880FA2D750980CB0280CB018A164680FA30720F80FA39770A80EA306BC00A03
C2EBE9F6C301740BF6C302740366F7D86603C14EC3CCCCCCCCCCCCCCCCCCCCCCCCCCE847[3]8BF08A06463C2275098A06463C
2275F9EB0C8A06463C20740484C075F54EC38A06463C2074F94EC3CCFF2514204000FF2500204000FF2504204000FF250820
4000FF250C204000FF25102040[191]6E20[2]8C20[2]9C20[2]BA20[2]D620[2]6020[6]4420[10]E820[3]20[22]6E20[2]8C20[2]9C20[2]BA
20[2]D620[2]6020[6]9B004578697450726F6365737300F500476574436F6E736F6C6553637265656E427566666572496E666F
[2]6A0147657453746448616E646C65[2]380252656164436F6E736F6C654F757470757443686172616374657241006D025365
74436F6E736F6C65437572736F72506F736974696F6E[2]E600476574436F6D6D616E644C696E6541006B65726E656C33322E
646C6C[268]
:endCursorpos

call :heredoc colorshow >colorshow.hex && goto endShow
4D5A900003[3]04[3]FFFF[2]B8[7]40[35]B8[3]0E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F74
2062652072756E20696E20444F53206D6F64652E0D0D0A24[7]5549FA721128942111289421112894219F3787211A289421ED
088621132894215269636811289421[16]5045[2]4C0103001DDBEB50[8]E0000F010B01050C0006[3]04[7]10[3]10[3]20[4]40[2]10
[3]02[2]04[7]04[8]40[3]04[6]03[5]10[2]10[4]10[2]10[6]10[11]2420[2]28[84]20[2]24[27]2E74657874[3]DE04[3]10[3]06[3]04[14]20[2]60
2E7264617461[2]3201[3]20[3]02[3]0A[14]40[2]402E64617461[3]20[4]30[3]02[3]0C[14]40[2]C0[472]E806[3]50E8A304[2]558BEC81C4
E8DFFFFFFC6AF5E8A404[2]8945FC6800304000FF75FCE88804[2]8B1D043040008D85E8DFFFFF50536A018D45FA50FF75FCE8
7E04[2]668B45FA66A316304000D41086C4D510668945F88DBDF8DFFFFF89BDF4DFFFFFE81304[2]E83204[2]8A064684C00F84
4803[2]3C2F0F858C[3]2BBDF4DFFFFF74186A008D85E8DFFFFF5057FFB5F4DFFFFFFF75FCE85F03[2]8BBDF4DFFFFF8A064684
C00F840F03[2]3C20750C668B45FA66A316304000EBA73C2F750C668B45F866A316304000EB972C303C0976082C073C0F7602
2C208A264684E40F84D602[2]80FC20741286C42C303C0976082C073C0F76022C20D51066A316304000E95CFFFFFF3C227520
8A064684C00F84A502[2]3C227405880747EBEC8A06463C2274F4E938FFFFFF3C300F82C6[3]3C390F87BE[3]E8A102[2]3C2A74
083C5874043C7875278ADC468A06463C300F826102[2]3C390F875902[2]E87A02[2]0FB6CC8AC3F3AAE9F0FEFFFF80FC207379
80FC09751F8B0D0430400003CF2B8DF4DFFFFF83E10783E908F7D9B020F3AAE9C7FEFFFF2BBDF4DFFFFF741A506A008D85E8
DFFFFF5057FFB5F4DFFFFFFF75FCE83D02[2]588BBDF4DFFFFF88276A008D85E8DFFFFF506A01FFB5F4DFFFFFFF75FCE8E302
[2]6800304000FF75FCE8BE02[2]E972FEFFFF882747E96AFEFFFF2BBDF4DFFFFF74186A008D85E8DFFFFF5057FFB5F4DFFFFF
FF75FCE8E101[2]8BFE4F33DB889DF2DFFFFF8A063C3A74118885F3DFFFFF3C20746084C0745C46EBE9889DF2DFFFFFC6060046
8A06463C2D7509C685F2DFFFFF02EB0B3C2B750AC685F2DFFFFF018A06463C300F827001[2]3C390F876801[2]E86901[2]8885
F3DFFFFF3C20740884C00F855101[2]84E40F841001[2]8ADCC60600680020[2]8D85F8DFFFFF5057E80702[2]85C00F84F1[3]85
DB0F84CF[3]3BC30F84C7[3]7C2D80BDF2DFFFFF00741DF685F2DFFFFF01750A2BC30185F4DFFFFFEB0A2BC3D1E80185F4DFFF
FF8BC3E998[3]2BD88BBDF4DFFFFF03F889BDECDFFFFF50B0208BCBF3AA80BDF2DFFFFF007443F685F2DFFFFF02741C6A018D
85E8DFFFFF5053FFB5ECDFFFFFFF75FCE8C9[3]33DBEB1E8BFBD1EF2BDF6A018D85E8DFFFFF5057FFB5ECDFFFFFFF75FCE8A7
[3]588BF86A018D85E8DFFFFF5057FFB5F4DFFFFFFF75FCE88C[3]6A028D85E8DFFFFF5053FFB5ECDFFFFFFF75FCE874[3]EB1A
8BF86A008D85E8DFFFFF5057FFB5F4DFFFFFFF75FCE858[3]8A85F3DFFFFF88068DBDF8DFFFFF89BDF4DFFFFFE9A8FCFFFF2B
BDF4DFFFFF74186A008D85E8DFFFFF5057FFB5F4DFFFFFFF75FCE81F[3]0FB745FAC9C3240F8AE08A06463C30720C3C397708
2C30D50A8AE0EBED4EC3558BEC6A00FF7514FF7510FF750CFF7508E8B2[3]8B4D1066837D180172137708010D18304000EB46
030D18304000894D10578B7D0C66A116304000F366AB8B0D04304000FF751451FF7510FF750CFF7508E876[3]5F6800304000FF
7508E84A[3]C705183040[5]C9C21400CCCCCCCCCCCCCCCCE853[3]8BF08A06463C2275098A06463C2275F9EB0C8A06463C2074
0484C075F54EC38A06463C2074F94EC3CCFF2500204000FF2504204000FF2508204000FF250C204000FF2510204000FF2514
204000FF2518204000FF251C2040[291]7020[2]7E20[2]9C20[2]B620[2]C620[2]E420[2]F420[2]1221[6]4C20[10]2421[3]20[22]7020[2]7E
20[2]9C20[2]B620[2]C620[2]E420[2]F420[2]1221[6]9B004578697450726F6365737300F500476574436F6E736F6C6553637265
656E427566666572496E666F[2]1301476574456E7669726F6E6D656E745661726961626C6541006A0147657453746448616E
646C65[2]370252656164436F6E736F6C654F7574707574417474726962757465[2]EE025772697465436F6E736F6C654100F2
025772697465436F6E736F6C654F757470757441747472696275746500E600476574436F6D6D616E644C696E6541006B6572
6E656C33322E646C6C[720]
:endShow

call :heredoc hexchar >hexchar.vbs && goto endHexchar
Rem Hex digits to Ascii Characters conversion
Rem Antonio Perez Ayala - Apr/14/2012

Dim line,index,count
line = WScript.StdIn.ReadLine()
While line <> ""
   index = 1
   While index < len(line)
      If Mid(line,index,1) = "[" Then
         index = index+1
         count = 0
         While Mid(line,index+count,1) <> "]"
            count = count+1
         WEnd
         For i=1 To Int(Mid(line,index,count))
            WScript.StdOut.Write Chr(0)
         Next
         index = index+count+1
      Else
         WScript.StdOut.Write Chr(CByte("&H"&Mid(line,index,2)))
         index = index+2
      End If
   WEnd
   line = WScript.StdIn.ReadLine()
WEnd
:endHexchar

:: Create cursorpos.exe and colorshow.exe
for %%I in (cursorpos colorshow) do (
    cscript /nologo /B /E:VBS HexChar.vbs < "%%I.hex" > "%%I.exe"
    del %%I.hex
)
del hexchar.vbs

:: ---------------------------------------------------
:: Supporting applications all created.  Now use them.
:: ---------------------------------------------------

call :DefineColorCodes

set /P I="Waiting... "<NUL
cursorpos
call :GetCoords Cols Lines

for /l %%A in (1, 1, 3) do (

    colorshow /%Black% "  " /%Yellow%%Black% "(<" /%White% " o  o  o  o  o"

    for /l %%I in (2, 1, 15) do (
        call :sleep 100
        set /a pos=%Cols% + %%I
        cursorpos !pos! %Lines%
        set /a e=%%I %% 2
        if #!e!==#1 (
            colorshow /%Black% " " /%Yellow%%Black% "(<"
        ) else colorshow /%Black% " " /%Yellow%%Black% "(-"
    )

    for /l %%I in (15, -1, 2) do (
        call :sleep 100
        set /a pos=%Cols% + %%I
        cursorpos !pos! %Lines%
        set /a e=%%I %% 2
        if #!e!==#1 (
            colorshow /%Yellow%%Black% ">)" /%Black% " "
        ) else colorshow /%Yellow%%Black% "-)" /%Black% " "
    )
    cursorpos=%Cols%,%Lines%

)

:: ---------------------------------------------------
:: End of main script
:: ---------------------------------------------------
echo Done.
del cursorpos.exe colorshow.exe sleep.vbs
goto :EOF

:: ---------------------------------------------------
:: Subroutines
:: ---------------------------------------------------

:GetCoords Cols= Lines=
set /A "%1=%errorlevel%&0xFFFF, %2=(%errorlevel%>>16)&0xFFFF"
exit /B

:DefineColorCodes
set HexDigit=0123456789ABCDEF
set c=-1
for %%c in ( Black Blue  Green  Aqua  Red  Purple  Brown  White
             Grey  LBlue LGreen LAqua LRed LPurple Yellow BWhite ) do (
   set /A c+=1
   for %%C in (!c!) do set %%c=!HexDigit:~%%C,1!
)
exit /B

:sleep <ms>
if not exist sleep.vbs (echo Wscript.Sleep^(Wscript.Arguments^(0^)^)>sleep.vbs)
cscript /nologo sleep.vbs %1
goto :EOF

:heredoc <uniqueIDX>
setlocal enabledelayedexpansion
set go=
for /f "delims=" %%A in ('findstr /n "^" "%~f0"') do (
    set "line=%%A" && set "line=!line:*:=!"
    if defined go (if #!line:~1!==#!go::=! (goto :EOF) else echo(!line!)
    if "!line:~0,13!"=="call :heredoc" (
        for /f "tokens=3 delims=>^ " %%i in ("!line!") do (
            if #%%i==#%1 (
                for /f "tokens=2 delims=&" %%I in ("!line!") do (
                    for /f "tokens=2" %%x in ("%%I") do set "go=%%x"
                )
            )
        )
    )
)
goto :EOF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:13:30.667

ANSICON 为 Windows 控制台程序提供 ANSI 转义序列。`ANSI.SYS`它提供与MS-DOS相同的功能。

[https://github.com/adoxa/ansicon](https://github.com/adoxa/ansicon)

# maven - 自动化 Maven 脚本

> ID：15139972
> 
> 赞同：0
> 
> 时间：2013-02-28T15:58:12.633
> 
> 标签：maven

我有一系列 Maven 脚本，它们将在 Linux 平台上运行，用于为我的项目进行 Reversion 和 Lableing。我想知道我可以使用哪些构建工具来自动化 Linux 平台中的 Maven 脚本？

还说假设我在执行代码的 Reversioning / Lableing 时遇到了一些错误。自动化工具如何处理这些场景。

请让我知道有效的工具，我肯定会回复这些工具是否对我有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:51:35.297

[Jenkins](http://jenkins-ci.org/)是自动化 maven 构建的一个很好的解决方案：

*   易于安装
*   与 maven 轻松集成
*   允许您在构建失败/成功后自动执行简单任务，例如发送电子邮件
*   许多插件，包括[这个](https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task)插件，允许您在构建失败（或构建成功）后执行更复杂的任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:41:41.740

这其中的任何一个

1.  詹金斯
2.  哈德逊
3.  阿特拉斯竹
4.  团队城市

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-22T10:16:47.513

在使用了 LuntBuild、Jenkins 和 teamcity 之后，我可以毫无疑问地说 TeamCity 是迄今为止最好的选择。我认为对于小型配置（3 个代理和最多 10 个构建配置）是免费的。它非常易于安装和配置，与大多数源代码控制系统兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:41:23.900

我建议利用诸如 Jenkins 或 Cruise Control 之类的“工作”协调员来管理我们的所有自动化。这些工具原生支持和理解 Maven。代理将驻留在您的服务器上，并执行您的协调员的投标。

# java - 如何在java中直接将原始数据类型分配给自定义类

> ID：15139973
> 
> 赞同：1
> 
> 时间：2013-02-28T15:58:13.630
> 
> 标签：java

如何为 int、boolean 和 String 等原始数据类型创建包装类？

我想创建自己的类，以便在我做 java 项目时更容易处理这些类型。

```
 AltString s = "Hello world"; 
```

与调用构造函数相反：

```
 AltString s = new AltString("Hello world"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T15:59:35.300

你不能。Java 不允许您定义自定义转换运算符（或实际上任何运算符）。

（你当然可以创建你自己的包装类，但你不能让任务按照你想要的方式工作。）

作为旁注，`String`它不是原始类型。从[Java 语言规范第 4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)：

> ```
> PrimitiveType:
>     NumericType
>     boolean
> 
> NumericType:
>     IntegralType
>     FloatingPointType
> 
> IntegralType: one of
>    byte short int long char
> 
> FloatingPointType: one of
>     float double 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:59:57.333

你不能在 Java 中重载运算符

# php - 如何为 php 类定义多个别名？

> ID：15139974
> 
> 赞同：1
> 
> 时间：2013-02-28T15:58:16.547
> 
> 标签：php, class, alias

这是我在这个论坛上的第一个问题，很高兴来到这里，希望你能提供帮助

我正在尝试为单个 php 类定义多个别名。我知道 class_alias() 可用于定义别名，但我只看到它适用于单个别名，并且对于每个新别名，我必须为新别名重复它。我想知道是否有一种方法可以为 php 类提供多个别名，而不必每次都重复该命令。我需要这个，因为当在任何地方找到带有名称的单词时，我的网站会自动创建指向其其他部分的链接，并且我希望能够将其扩展为具有相同含义的不同单词，就像 Wikipedia 如何将类似单词重定向到相同的条目。有谁知道什么可以帮助我做到这一点

# c++ - 具有等效堆和映射功能的数据结构

> ID：15139975
> 
> 赞同：3
> 
> 时间：2013-02-28T15:58:18.207
> 
> 标签：c++, algorithm, sorting, data-structures, heap

我想设计一个元素 E 的容器 C。

E 有 2 个属性（优先级、名称），容器中的所有元素都有唯一的“名称”

我想尽可能有效地支持对这个容器 C 的以下操作。

1.  insert:- 将 element1(name1, priority1) 插入容器： C.insert(element(name1, priority1))
2.  update :- 更新元素的优先级 name=name1 作为 priorityNew1: C[name1] = priorityNew1
3.  delete:-删除name=name1的元素：C.delete(name1)
4.  获取和删除具有最高优先级的元素：C.pop()
5.  获取具有最高优先级的元素：C.peek()

基本上我想要地图和堆的组合。映射在元素的“名称”上，并堆在元素的“优先级”上。最理想的情况是，我希望每个操作都为 O(1)。否则插入、更新、删除为 O(log N) 和 pop 和 peek 为 O(1) 也可以。

我可以想到以下两种方法

1) 使用元素的哈希映射，对名称进行哈希处理。所以插入更新删除是 O(1) pop 和 peek 是 O(N)，我们在整个容器中搜索最高优先级。

2) 将 SQLite 与具有两列“名称”和“优先级”的表“元素”一起使用。运行时间将基于 SQLite 实现。

我有兴趣了解有关此问题的更多想法，我正面临与此相关的现实世界问题。感谢您的投入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:27:59.150

如果`O(logN)`对于每个操作都是可以接受的，显然[`boost::bimap`](http://www.boost.org/doc/libs/1_42_0/libs/bimap/doc/html/index.html)就足够了。这就像一个*双面的* `std::map`. `std::map`您可以通过将两者保持在一起或编写自己的包装器来获得几乎相同的效果（但为什么要这样做呢？）。具有自平衡的二叉搜索树具有`O(logN)`最小检索，其效率略低于堆。

**如果效率真的那么重要，您应该使用堆和哈希映射**实现自己的容器。`name`然后，当您在堆中交换时，在哈希映射中的堆数组中维护从到订阅的映射。这给出了插入、删除、重新分配优先级 a`O(logN)`和 中的最小/最大优先级元素`O(1)`。（这不是小菜一碟，但也不乏味）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:04:36.777

我不知道 Boost 是否适合您，但我会查看 Boost Mutli Index。 [http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html)

您可以保留一个 in 优先级索引，以便您快速获取这些索引以及插入元素。对于 MRU/LRU 情况，我类似地使用了 boost mutli 索引。

```
#include <iostream>
#include <string>
#include <algorithm>

#include <boost/multi_index_container.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/sequenced_index.hpp>
#include <boost/multi_index/identity.hpp>
#include <boost/multi_index/member.hpp>
#include <boost/optional.hpp>

struct bypriority{};
struct byseq{};

struct MyElement{
    typedef int priority_type;
    typedef std::string name_type;

    name_type name;
    priority_type priority;

    MyElement(const name_type& name, const priority_type& priority):name(name),priority(priority){};
};

std::ostream& operator<<(std::ostream& os, const MyElement& e){
    os << "Name: " << e.name << " Priority: " << e.priority;
    return os;
}

using namespace boost;
using namespace boost::multi_index;

template<typename Element>
struct Container{
    typedef multi_index_container<
        Element,
        indexed_by<
            //sequenced
            sequenced<tag<byseq> >,
            //ordered by priority
            ordered_non_unique<tag<bypriority>,member<Element,typename Element::priority_type,&Element::priority>, std::greater<typename Element::priority_type>  >
        >
    > Elements;

    void insert(const Element& e){
        typename Elements::template index<byseq>::type& list_view = elements.get<byseq>();
        list_view.push_back(e);
    }

    boost::optional<Element> peek() const{  
        boost::optional<Element> res;
        typename Elements::template index<bypriority>::type::iterator it = elements.get<bypriority>().begin();
        if(it != elements.get<bypriority>().end()){
            res.reset(*it);
        }
        return res;
    }

    boost::optional<Element> pop() {
        boost::optional<Element> res;
        typename Elements::template index<bypriority>::type& priority_index = elements.get<bypriority>();
        typename Elements::template index<bypriority>::type::iterator it = elements.get<bypriority>().begin();
        if(it != elements.get<bypriority>().end()){
            res.reset(*it);
            priority_index.erase(it);
        }

        return res;
    }

    void print_in_order(std::ostream& os) const{
        typedef  typename Elements::template index<byseq>::type elements_by_sequence;
        for(typename elements_by_sequence::iterator it = elements.get<0>().begin(); it != elements.get<0>().end(); it++){
            os << *it << std::endl;
        }
    }

    protected:
    Elements elements;
};

using namespace std;
int main(int argc, char *argv[]) {

    Container<MyElement> c;

    c.insert(MyElement("Bob",10));
    c.insert(MyElement("Alice",100));
    c.insert(MyElement("Fred",20));

    c.print_in_order(std::cout);

    cout << endl << "Highest Priority is " << endl << *c.peek() << endl;

    boost::optional<MyElement> alice = c.pop();
    if(alice){
        cout << "Popped results are " << *alice << endl;
    }

    cout << endl << "Now the contents are" << endl;
    c.print_in_order(std::cout);

} 
```

将输出：

```
Name: Bob Priority: 10
Name: Alice Priority: 100
Name: Fred Priority: 20

Highest Priority is 
Name: Alice Priority: 100
Popped results are Name: Alice Priority: 100

Now the contents are
Name: Bob Priority: 10
Name: Fred Priority: 20 
```

# sql - WCF 服务导致 SQL 死锁错误

> ID：15139976
> 
> 赞同：1
> 
> 时间：2013-02-28T15:58:20.893
> 
> 标签：sql, wcf, asynchronous, dynamics-crm-2011, deadlock

在过去的几天里，我一直在用这个来敲打我的头，我似乎无法想出一个好的解决方案。

我有一个 WCF 服务，它充当我们所有数据库交互的唯一入口点。在当前的困境中，有一个 Windows 服务针对 Microsoft Dynamics CRM 中的“AsyncOperation”表旋转。每当在 CRM 中创建实体记录时，Windows 服务都会从 AsyncOperation 表中提取记录，并使用该数据向 WCF 服务发出请求。我遇到的问题是，当该 Windows 服务同时向 WCF 服务发出多个请求时，该服务会导致 SQL 中的事务死锁。

我在 WCF 服务内的数据流中添加了一些额外的日志记录，我发现在任何给定时间，3 到 5 个请求可以在几毫秒内到达服务。似乎在这个过程中，第一个命中服务的请求是唯一进入数据库的请求，其余的最终导致 sql 死锁错误：

> 事务（进程 ID 95）与另一个进程在锁资源上死锁，并已被选为死锁牺牲品。重新运行事务。

我的问题是：有没有一种好的方法来实现某个时间的排队过程或 WCF 的单例方法，以确保 SQL 插入不会在完全相同的时间发生？由于我是在 MS Dynamics 平台之上构建的，因此我无法确保不会同时处理多个请求。输入系统的数据是由外部合作伙伴提供的，其中一些对我们的系统造成了相当大的影响。

我愿意接受任何可以寻找解决方案的建议。

WCF 服务中处理插入的方法是这样的：

```
public List<NoelGroup.Users.Core.Entity.BusinessLayer.PersonEntity> Insert(NoelGroup.Users.Core.Entity.BusinessLayer.PersonEntity businessObject)
{
    List<NoelGroup.Users.Core.Entity.BusinessLayer.PersonEntity> businessObjectList = null;

    using (SqlConnection conn = MainConnection)
    {
        int id = new Random().Next(9999);
        try
        {
            conn.Open();

            using (SqlCommand cmd = new SqlCommand("[crud].[usp_Person_InsertUpdate]", conn))
            {
                cmd.CommandType = CommandType.StoredProcedure;

                cmd.Parameters.Add(new SqlParameter("@iui_PersonId", businessObject.PersonId));
                cmd.Parameters.Add(new SqlParameter("@ii_PrefixId", businessObject.PrefixId));
                cmd.Parameters.Add(new SqlParameter("@ivn_FirstName", businessObject.FirstName));
                cmd.Parameters.Add(new SqlParameter("@ivn_MiddleName", businessObject.MiddleName));
                cmd.Parameters.Add(new SqlParameter("@ivn_LastName", businessObject.LastName));
                cmd.Parameters.Add(new SqlParameter("@ic_Gender", businessObject.Gender));
                cmd.Parameters.Add(new SqlParameter("@ii_SuffixId", businessObject.SuffixId));
                cmd.Parameters.Add(new SqlParameter("@ii_PersonTypeId", businessObject.PersonTypeId));
                cmd.Parameters.Add(new SqlParameter("@id_BirthDate", businessObject.BirthDate));
                cmd.Parameters.Add(new SqlParameter("@iti_PreferredContactMethodId", businessObject.PreferredContactMethodId));
                cmd.Parameters.Add(new SqlParameter("@iv_ModifiedUsername", businessObject.ModifiedUsername));

                Logger.Log(string.Format("-- PersonEntity Insert ({1}) Execute -- {0}", DateTime.Now, id));
                using (SqlDataReader rdr = cmd.ExecuteReader())
                {
                    businessObject = null;
                    businessObject = new NoelGroup.Users.Core.Entity.BusinessLayer.PersonEntity();

                    businessObjectList = PopulateObjectsFromReader(rdr);
                }
                Logger.Log(string.Format("-- PersonEntity Insert ({1}) Complete -- {0}", DateTime.Now, id));
            }
        }
        catch(Exception ex)
        {
            throw new SeverityException(500, string.Format("PersonEntity::Insert ({0})::Error occured.", id), ex);
            //throw new SeverityException(500, "PersonEntity::Insert::Error occured.", ex);
        }
    }

    return businessObjectList;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:04:52.810

您应该查看您使用的存储过程，以免产生死锁。Sql 旨在与多个请求并行工作。有一些方法可以审查代码并进行改进，以免陷入僵局。

如果这不可能，您可以使用服务代理将您的请求排队到 sql server（如果您使用支持它的 sql server 版本）。这意味着您必须稍后检查您的操作结果。

如果仍然不是这种情况（ms-sql <2005），那么您可以实现类似的东西。将您的请求写入表格并使用作业来处理它。稍后再检查操作结果。

如果您可以使用 CLR 存储过程，您可以使用操作结果调用您的 WCF 服务，这样您就不需要定期检查 DB。

希望这可以帮助。

作为编辑，您还可以检查 SP 中的死锁并在出现错误时重试（检查错误号 1205）

# xpath - 使用 XPath 选择没有命名空间的节点

> ID：15139979
> 
> 赞同：9
> 
> 时间：2013-02-28T15:58:25.487
> 
> 标签：xpath, xml-namespaces

我有一个像

```
<root xmlns:ns1="http://foo">
    <ns1:child1>Text</ns1:child1>
    <ns1:child2>Number</ns1:child2>
</root> 
```

现在我从不同的人那里得到这个，例如，第 2 个人给我发送了另一条具有相同结构的消息，例如

```
<root xmlns:anotherNs="http://foo">
    <anotherNs:child1>Another Text</anotherNs:child1>
    <anotherNs:child2>Another Number</anotherNs:child2>
</root> 
```

所以唯一的区别是命名空间的名称。如何使用一个 XPath 表达式为两个 xml 选择 child2 的内容？

像“/root/child2”或“//child2”这样的东西不起作用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-28T16:01:40.097

像这样使用[`local-name()`](https://www.w3.org/TR/xpath-functions-3/#func-local-name)函数：

```
//*[local-name()='child2'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:50:55.910

您可以将任何您喜欢的前缀（比如香蕉）绑定到命名空间`"http://foo"`，并且表达式`/root/banana:child2`将找到 child2 元素，而不管源文档中使用了哪个命名空间前缀。只有命名空间 URI 必须匹配。

# regex - 使用正则表达式查找字符序列

> ID：15139984
> 
> 赞同：-2
> 
> 时间：2013-02-28T15:58:46.270
> 
> 标签：regex

我正在尝试编写一个正则表达式来检测是否有任何字符序列超过了字符串中的指定阈值

例如：

如果 threshold = 4，则字符串“aaaxyzbbbb”有效；

```
ValidateString(input strToValidate, int threshold)
{

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:57:31.657

您可以使用类似于`(.)\1{N}`where的模式`N`表示某个数字，该数字应该是您的阈值减一。

图案的意思是：

*   `(.)`- 任何角色，将其捕获在一个组中
*   `\1` - 其次是第一组中匹配的任何内容
*   `{N}`- 匹配前面的东西 N 次

因此，例如，`(.)\1{3}`表示任何字符后跟三个相同字符。

# java - JSF/primefaces 显示代码中的图像 - 图像位置？

> ID：15139987
> 
> 赞同：0
> 
> 时间：2013-02-28T15:58:59.950
> 
> 标签：java, jsf, primefaces

我正在使用带有 primefaces 的 JSF，并希望显示来自 java 代码的图像。

[我已经在http://www.primefaces.org/showcase/ui/dynamicImage.jsf](http://www.primefaces.org/showcase/ui/dynamicImage.jsf)上看到了教程

但我不清楚如何正确获取图像文件的路径：

代码：

豆：

```
@ManagedBean
public class ABean {

    private StreamedContent bStatus;

    public ABean() {
        try {
            Boolean connected = false;
            if (connected == true) {
                bStatus = new DefaultStreamedContent(new FileInputStream(new File("/images/greendot.png")), "image/jpeg");
            } else {                
                bStatus = new DefaultStreamedContent(new FileInputStream(new File("/images/reddot.png")), "image/jpeg");
            }
        } catch(Exception e) {
            e.printStackTrace();
        }

    }

    public StreamedContent getBStatus() {
        return bStatus;
    }

    public void setBStatus(StreamedContent bStatus) {
        this.bStatus = bStatus;
    }
} 
```

xhtml:

```
<p:graphicImage value="#{ABean.bStatus}" /> 
```

返回：

**java.io.FileNotFoundException: \images\reddot.png**

我希望在以代码形式显示图像时在何处存储图像以及如何执行图像的最佳实践。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:20:16.557

由于您的图像位于您的网络文件夹中，因此您实际上不需要使用 DefaultStreamedContent。我**只**保留动态生成的图像。

对于您的情况，我将创建一个简单的方法，该方法根据布尔变量返回图像路径（在您的 Web 文件夹中）。像这样的东西：

```
public String getImagePath(){
    return connected ? "/images/greendot.png" : "/images/reddot.png";
} 
```

在图形图像上，您可以参考：

```
<p:graphicImage value="#{yourBean.imagePath}"/> 
```

请注意，如果您的 Web 上下文不是根目录，您可能需要调整 graphicsImage 标记。

**编辑** 您实际上可以使这更简单：

```
 <p:graphicImage value="#{yourBean.connected ? '/images/greendot.png' : '/images/reddot.png'}"/> 
```

只要确保有一个连接属性的吸气剂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:16:25.417

创建`StreamedContent`如下：

```
bStatus = new DefaultStreamedContent(FacesContext.getCurrentInstance().getExternalContext().getResourceAsStream("/images/greendot.png"), "image/jpeg"); 
```

当您创建时，`new File()`这将是您磁盘中的绝对路径，而不仅仅是在您的应用程序中。

# java - 如何防止java中重复的全局热键？

> ID：15139992
> 
> 赞同：0
> 
> 时间：2013-02-28T15:59:09.777
> 
> 标签：java, global-hotkey

如何防止注册重复的全局热键意味着不要注册已经注册的热键，如 CTRL+C 或 CTRL+V 等。

# user-input - 直接从我的 Java 代码中的 trinidad UIXComponent 获取 JSPX 用户输入？

> ID：15139993
> 
> 赞同：0
> 
> 时间：2013-02-28T15:59:22.950
> 
> 标签：user-input, myfaces, jspx, trinidad

我想从我的 Java 代码中的组件中检索用户输入。类似于 aspx/.NET 中的 textbox.text 的东西。我发现文档非常混乱，我的尝试没有编译。有办法吗？

```
 <tr:inputDate id="date" required="true"
          inlineStyle="color:rgb(0,58,117); font-weight:bold;"
          value="#{processScope.benefit.serviceDate}"
          immediate="false"
          onchange="submit();"
          label="#{mb_ResourceBean.res['claim.serviceDate.label']}">

          <tr:convertDateTime pattern="yyyy/MM/dd" secondaryPattern="yyyyMMdd"
                type="date"/>

    <tr:validateDateTimeRange minimum="#{bk_ClaimBean.minDate}"
                        maximum="#{bk_ClaimBean.maxDate}"/>

    </tr:inputDate> 
```

糟糕的半尝试抓取输入：

```
 UIViewRoot viewRoot = FacesContext.getCurrentInstance().getViewRoot();
     UIXComponent component = viewRoot.findComponent("date"); //does not compile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:47:03.443

我不确定您要实现什么，但是由于您已经有一个值绑定 ( `#{processScope.benefit.serviceDate}`) 并且您`onchange="submit();"`在`<tr:inputDate>`其中看起来想要使用`valueChangeListener`.

您需要一种方法来处理 bean 中的[值更改事件](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/event/ValueChangeEvent.html)，例如：

```
public void dateChanged(ValueChangeEvent event)
{
  System.out.println("New value: "+ event.getNewValue());
  System.out.println("instanceof Date: "+ (event.getNewValue() instanceof Date));
} 
```

在你的`jspx`你必须添加监听器。您也可能想使用`autoSubmit="true"`而不是`onchange="submit();"`，例如：

```
<tr:inputDate value="#{myBean.myDate}"
              valueChangeListener="#{myBean.dateChanged}"
              immediate="true" autoSubmit="true"/> 
```

* * *

您问题中的代码无法编译，因为`viewRoot.findComponent()`将返回[`UIComponent`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html). 您需要将其转换为[`UIXComponent`](http://myfaces.apache.org/trinidad/trinidad-api/apidocs/org/apache/myfaces/trinidad/component/UIXComponent.html).

此外，您需要考虑[命名容器](http://myfaces.apache.org/core12/myfaces-api/apidocs/javax/faces/component/NamingContainer.html)。您将需要使用类似的东西：`viewRoot.findComponent("formId:date");`. 在这种情况下`formId`是您的`<tr:form>`.

# php - ChoiceList 上的 Symfony2 选项值

> ID：15139994
> 
> 赞同：1
> 
> 时间：2013-02-28T15:59:23.603
> 
> 标签：php, forms, symfony, symfony-2.1

我正在尝试使用表单类型和“choice_list”为选择选项设置自定义值。

类型：

```
 ->add('status', 'choice', array(
      'constraints' => array(
       new Assert\NotBlank(array('message' => 'Required field missing: status'))
      ),
      'error_bubbling' => true,
      'choice_list' => new StatusChoiceList() 
```

状态选择列表文件：

```
class StatusChoiceList extends LazyChoiceList
{
    /**
     * Loads the choice list
     *
     * Should be implemented by child classes.
     *
     * @return ChoiceListInterface The loaded choice list
     */
    protected function loadChoiceList()
    {
        $array = array(
            'Preview' => 'Preview',
            'Hidden'  => 'Hidden',
            'Live'    => 'Live'
        );
        $choices = new ChoiceList($array, $array);

        return $choices;
    }
} 
```

选择标签有一个错误的值 0,1,2 和一个好的标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:15:00.633

[ChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/ChoiceList.php)类用于选择任意数据类型。在您的情况下，您应该改用[SimpleChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/SimpleChoiceList.php)。第一个参数是一个数组，其中选择作为键，标签作为值。

```
protected function loadChoiceList()
{
    $array = array(
        'Preview' => 'Preview',
        'Hidden'  => 'Hidden',
        'Live'    => 'Live'
    );
    $choices = new SimpleChoiceList($array);

    return $choices;
} 
```

# android - Android Facebook 应用与 GAE 的集成

> ID：15139997
> 
> 赞同：6
> 
> 时间：2013-02-28T15:59:28.033
> 
> 标签：android, facebook, google-app-engine

我正在考虑如何解决下一个问题：

> 1.  我想连接到 facebook 和服务器后端（Srv）的 Android 应用程序。
> 2.  我想连接到 facebook 的服务器后端（Srv）。
> 3.  服务器将运行一个任务，该任务将获取用户的所有朋友（在 fb 上）和用户状态（在 Fb 上），并将它们存储在上面。

基本假设：

> 1.  我使用 android 作为移动设备
> 2.  服务器是 GAE
> 3.  GAE 中的实体键是用户的 FB-id
> 4.  用户实体包含：
>     1.  用户 fb_id
>     2.  用户验证列表（FB_ID 字符串）=> 拥有该应用的用户的朋友）// 可能使用 HT？
>     3.  用户状态列表（状态文本、日期、网址）=> 我可以从 facebook 中的用户状态中获得的任何信息..

主要问题：

> 1.  数据表示是否经过深思熟虑？可以更好吗？
> 2.  如何处理相互连接的两个用户同时添加应用程序的情况 - 如何避免重叠？
> 3.  设备是否应该通过 GAE 服务器验证自身？
> 4.  如何使用 FB 对 GAE 进行身份验证

算法：

安卓端：

```
 User login and get access token from FB
 Posting to my server(Srv) FB Token & myUserFBId // Should I use REST protocol or HTTP 
```

邮政？

服务器端：

```
 A Servlet handles the POST   
  {
    Query FB ->for the user's friends ids(into friendList = arrayList<FBItem))
    foreach FBItem item in friendList
    {
    //check which FB-ids are in my DB
      friendEntity = getKey(item.fb_id) 
      if(friendEntity != null)
      {
      // friend exists
         verifiedFriendsList.add(item.fb_id)  //verifiedFriendsList is ArrayList<String>
         friendEntity.getVerifiedFriendList().add(myUserFBId) 
      }
    }
    Query FB ->for the user's statuses(into statuses = arrayList<StatusItem))
    add new FBEntity(myUserFBId, verifiedFriendsList, statuses) to DB    } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:50:14.997

我没有做过这样的事情，但我认为你需要

1.  要求用户验证您的应用程序以使用 FB-阅读 Facebook 的 OAuth Api
2.  一旦您的应用程序通过足够的权限进行身份验证，您就可以根据您的要求获取用户数据。
3.  一旦你得到数据，你就可以处理它。

FB 上的 Oauth 就是您要搜索的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:38:31.260

我会给你我的 4 美分：

1.  应该引导您开发 DS 的问题是： (A) 在服务器端，数据如何持久保存？到文件？到数据库？(B) 执行您想要完成的计算需要多少数据，以及计划如何访问它（例如，对于 O(n) 运行，我不会使用 HashTable）（C）如何坚持/取消坚持工作？使用 ORM？自定义查询？
2.  关于并发，你必须解释是什么困扰着你。人们始终同时登录 SO。3/4。不是安卓开发者，帮不上忙。

# c++ - 如何从 argv 中获取文件名并将其与 ifstream 一起使用 / 将其更改为 txt for ofstream？

> ID：15139998
> 
> 赞同：-1
> 
> 时间：2013-02-28T15:59:29.437
> 
> 标签：c++

我知道如何遍历 argv 参数，但我想做的是获取文件路径并在我的 ifstream 中使用该参数并确保它是正确的格式（.DAT），但是对于我的 ofstream，使用完全相同的路径但是使用 .txt 扩展名代替。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:01:21.693

我会将所需的“基本”名称作为参数传递。然后，当您尝试将其打开为 . 时，请自行`ifstream`添加`.DAT`扩展名并检查该文件是否存在。如果是这样，只需附加`.txt`您的 ofstream 并写入该文件。

例如，您会调用：`myapp.exe inout`

然后，您将检查输入文件名：

```
std::ifstream ifs(std::string(argv[1]) + ".dat"); // reads from inout.dat
if (ifs.fail()) ...

std::ofstream ofs(std::string(argv[1]) + ".txt"); // writes to inout.txt
if (ofs.fail()) ... 
```

**编辑：**您已经添加了将`.dat`文件拖到可执行文件上的重要细节。在这种情况下，您必须自己删除扩展。像这样的东西应该可以工作（但*不能*容错！）：

```
std::string basename = argv[1]; // take the whole path, including dat extension (DAT EXTENSION!)
basename.resize(basename.length() - 3); // remove dat extension (hah!)
std::string outname = basename + "txt"; // add the output extension 
```

注意：此代码未经测试，至少不可靠。它假定您传递的每个文件都具有三个字母的扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:25:41.750

我会通过调用 rfind 来查找参数中最后一次出现“.DAT”的位置，然后获取结果位置的子字符串，您可以将 .txt 附加到该位置，类似这样：

```
string fullPath = string(argv[1]);
size_t pos = fullPath.rfind(".DAT");
if (pos == string::npos)
{
//fail
}else{
string outfilePath = (fullPath.substr(0,pos)).append(".txt");
//write to file
} 
```

# mongodb - MongoDB - 索引对象的内部列表

> ID：15139999
> 
> 赞同：1
> 
> 时间：2013-02-28T15:59:29.190
> 
> 标签：mongodb, indexing

假设 MongoDB 中的数据结构如下：

```
{
    "_id" : "Bob Blocker",
    "ratings" : {
        "771206753" : 1
    },
    "prevalence" : 1
} 
```

如何索引`ratings`using的内部结构的键`ensureIndex()`？我想建立一个索引，将文档`_id`与评级对象中的任何和所有键（在本例中为“771206753”）相关联。

键入索引`ratings`就足够了吗？那不是也记录了 rating 对象的 value 部分吗？如果查找是由该特定键打算的，我应该改变我的模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:25:35.510

您不能索引动态键，并且索引`ratings`会将整个对象索引为 blob，因此您也不想这样做。

将架构重新设计为：

```
{
    "_id" : "Bob Blocker",
    "ratings" : [
        {id: "771206753", value: 1}
    ],
    "prevalence" : 1
} 
```

然后索引`'ratings.id'`。