# StackOverflow 问答 13105000-13105999

# java - Java 静态方法：创建当前类型的对象

> ID：13105001
> 
> 赞同：0
> 
> 时间：2012-10-27T23:13:00.393
> 
> 标签：java, class, inheritance, static

我有一个抽象类类型，我从它继承来创建新类。作为等效示例，请考虑：

```
public abstract class BaseClass {
    public BaseClass(String input)
    {
        ...
    }
    public abstract void doSomething();
    public String getResult()
    {
        ...
    }
} 
```

现在我可以重写 BaseClass 并实现“doSomething”来执行不同的操作（例如，如果我真的在使用字符串，则反转或大写，虽然我不是真的，这只是一个例子）。

最常见的用法是：

```
BaseClass bc = new ExtendsBaseClass(input);
bc.doSomething();
String result = bc.getResult() 
```

所以我想为此制作一个静态包装器方法。
我想实现：

```
public static String doSomethingForResult(String input)
{
     BaseClass bc = /*new current type*/;
     bc.doSomething();
     return bc.getResult();
} 
```

但是我不知道用什么来替换该评论，或者如何使它起作用；我不想强迫每个实现类重新实现它（如果这在概念上是可能的；因为`abstract static`是不允许的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:18:21.637

静态方法不是多态的，因此不能被继承和覆盖。你想做的事是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T23:18:59.837

在这种情况下，您为什么要为静态事物烦恼？

只是受益于多态性和合并`doSomething()`and `getResult()`。

你最终会得到：

```
public abstract class BaseClass {
    public BaseClass(String input)
    {
        ...
    }
    public abstract String doSomething();
} 
```

你的客户看起来像：

```
BaseClass bc = new ExtendsBaseClass(input);
String result = bc.doSomething(); 
```

一般来说，定义一个分离的`getResult()`方法在特定情况下是有意义的，比如在实现**Builder** Pattern 时。实际上，有几个不同的方法参与到对象的构造中，并最终调用了一种`getResult()`方法。

**---------------------在您的评论之后------------------------**

如果如您所说，常见情况是根据特定子类使用`doSomething()`跟随，您可以使用**模板方法**模式：`getResult()`

 **```
public abstract class BaseClass {
        public BaseClass(String input)
        {
          // assigments
        }

        public String process(){ //process is a template method
         doSomething();
         return getResult();
        }

        protected abstract void doSomething();

        protected abstract String getResult();
}

public class ExtendedClass extends BaseClass {

   protected void doSomething(){
     //...
   }

   protected String getResult(){
     //....
   }
} 
```

您的客户只会调用`process()`方法：

```
BaseClass bc = new ExtendsBaseClass(input);
String result = bc.process(); 
```

但是请 :)，尽可能避免静态的东西，它们不会导致良好的 OO 编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T00:56:42.133

> 所以我想为此制作一个静态包装器方法。

我想我明白你为什么要这样做。您需要一个简单的方法来执行一组常见的操作，而无需一次又一次地复制样板代码。但正如您现在痛苦地意识到的那样，静态方法在继承层次结构中没有位置。我建议您从各种 Apache Commons 项目及其 XxxUtils 类中获得灵感，这些类仅由静态方法组成，并且完全存在于它们所作用的类的层次结构之外。

考虑[Commons IO](http://commons.apache.org/io/)中的[FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)类。这只是静态方法，但它们非常有用。考虑两种方法：

```
static byte[] readFileToByteArray(File file) // Reads the contents of a file into a byte array.
static String readFileToString(File file) // Reads the contents of a file into a String 
```

一种方法处理文件和字节数组，另一种处理文件和字符串？你怎么知道哪个做什么 - 因为它使用一个描述性的名称来拼写它。没有继承、实现、多态性问题，因为 FileUtils 完全存在于文件、字符串、字节数组等的继承层次结构之外。

让我们回到你假设的方法。我会将这个方法放在一个名为 MyUtils 或 BitmapUtils 的单独类中，并为每个有意义的具体类组合创建一个方法。

```
public static String doSomethingWithExtendsBaseClass(String input)
{
     BaseClass bc = new ExtendsBaseClass();
     bc.doSomething();
     return bc.getResult();
}

public static String doSomethingWithOtherClass(String input)
{
     BaseClass bc = new OtherClass();
     bc.doSomething();
     return bc.getResult();
} 
```

> 但我不知道用什么来替换该评论，或者如何让它发挥作用

很简单——您只需在方法中使用相应名称直接实例化具体类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-27T23:25:44.400

我认为您可以在其中定义一个静态方法`BaseClass`并将另一个类作为参数传递给它，使用`BaseClass`作为参数类，例如

```
public static String doSomethingForResult(String input ,BaseClass bc){
    bc.doSomething();
    return bc.getResult();
} 
```

然后在你的`ExtendedBaseClass`你可以写成：

```
 ExtendedBaseClass extendedBaseObject= new ExtendedBaseClass();
    String result = BaseClass.doSomethingForResult("input", extendedBaseObject);
    System.out.println(result); 
```**

# ios - 下载图像时 UITableViewCell 高度调整大小

> ID：13105006
> 
> 赞同：19
> 
> 时间：2012-10-27T23:13:54.590
> 
> 标签：ios, dynamic, uitableview, height, afnetworking

我正在使用`UIImageView+AFNetworking`类别进行异步图像加载。一切正常，但我尝试了几件事，但在根据下载的图像调整单元格的高度时没有成功。我希望图像适合单元格的宽度，但要调整高度，但我不知道如何实现。我尝试重新加载下载图像的行，但这只会导致`cellForRowAtIndexPath`再次触发并再次设置所有内容，等等。几乎是递归。

我正在计算新的图像大小差异并将其存储`NSMutableArray`在 UIImageView 的成功块中，然后重新加载该行`setImageWithURLRequest:placeholderImage:success:`。

我得到了几行的正确高度，`heightForRowAtIndexPath`但随后，表格开始表现得很奇怪，一切都重叠了，等等。

有任何想法吗？

谢谢！

**编辑**

我最终使用了 Ezeki 的答案。我还写了一篇关于该主题的文章，并制作了一个使用这种技术的示例应用程序。

在[这里查看](http://candycode.io/dynamic-uitableview-height-for-downloaded-images/)。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-27T23:52:07.207

您需要将下载的图像存储在内存或磁盘上，因此下次尝试从该 URL 获取图像时，您将从缓存中接收到图像。

因此，如果您这样做，则必须执行以下操作：

```
[tableView beginUpdates];

[tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];

[tableView endUpdates]; 
```

并且您应该在表格视图数据源的这种方法中返回新单元格的高度：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我建议您使用[SDWebImage 库](https://github.com/rs/SDWebImage)，`AFNetworking`因为它可以为您将图像缓存到内存缓存和磁盘，并且非常易于使用。因此，如果您决定使用它，您的下载图像代码将如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    ...

    [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
           placeholderImage:[UIImage imageNamed:@"placeholder.png"]
                    success:^(UIImage *image, BOOL cached) {

                        // save height of an image to some cache
                        [self.heightsCache setObject:[NSNumber numberWithFloat:imHeight] 
                                              forKey:urlKey];

                        [tableView beginUpdates];
                        [tableView reloadRowsAtIndexPaths:@[indexPath]
                                         withRowAnimation:UITableViewRowAnimationFade];
                        [tableView endUpdates];
                    }
                    failure:^(NSError *error) {... failure code here ...}];

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    // try to get image height from your own heights cache
    // if its is not there return default one
    CGFloat height = [[self.heightsCache objectForKey:urlKeyFromModelsArrayForThisCell] floatValue];
    ...
    return newHeight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T13:33:08.543

对我来说，这有效：

您检查缓存图像是否可用，如果可用，则将其设置为图像，如果不可用，则将其下载，然后通过调用重新加载索引路径重置表的布局。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *broadcastTableCellIdentifier = @"BlockbusterTableViewCell";

BlockbusterTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:broadcastTableCellIdentifier];

if (cell == nil) {
    cell = [[BlockbusterTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:broadcastTableCellIdentifier];
}

[self configureCell:cell atIndexPath:indexPath];
return cell;
}

-(void)configureCell:(BlockbusterTableViewCell*)cell atIndexPath:(NSIndexPath*)indexPath{
    SportData *data = [self.webShared.arrSportsData objectAtIndex:self.selectedEvent];
    BroadcastData *broadcastData = [data.broadcastData objectAtIndex:indexPath.row];

NSURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:broadcastData.image]];

AFImageDownloader *downloader = [UIImageView sharedImageDownloader];
id <AFImageRequestCache> imageCache = downloader.imageCache;

UIImage *cacheimage = [imageCache imageforRequest:urlRequest withAdditionalIdentifier:nil];
    if (cell.imgBroadcast.image != cacheimage) {
        [cell.imgBroadcast setImageWithURLRequest:urlRequest placeholderImage:[UIImage imageNamed:@"placeholder_smaller"] success:^(NSURLRequest * _Nonnull request, NSHTTPURLResponse * _Nullable response, UIImage * _Nonnull image) {

                cell.imgBroadcast.image = image;
                [self.tableViewBroadcast beginUpdates];

                [self.tableViewBroadcast reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];

                [self.tableViewBroadcast endUpdates];

        } failure:^(NSURLRequest * _Nonnull request, NSHTTPURLResponse * _Nullable response, NSError * _Nonnull error) {

        }];

    }
    else{
        cell.imgBroadcast.image =cacheimage;
    }

    cell.lblTitle.text = broadcastData.title;
    cell.lblText.text = broadcastData.text;
    cell.lblEventDateTime.text = [self eventTime:broadcastData.eventTime];
} 
```

# c# - Lambda 表达式作为 ThreadStart 的奇怪行为

> ID：13105011
> 
> 赞同：0
> 
> 时间：2012-10-27T23:14:03.373
> 
> 标签：c#, multithreading, lambda

> **可能重复：**
> [C# - Eric Lippert 的博客中的 foreach 标识符和闭包](https://stackoverflow.com/questions/512166/c-sharp-the-foreach-identifier-and-closures)
> [：“不要关闭循环变量”</a>](https://stackoverflow.com/questions/3190578/from-eric-lipperts-blog-dont-close-over-the-loop-variable)
> 
> [](https://stackoverflow.com/questions/3190578/from-eric-lipperts-blog-dont-close-over-the-loop-variable)

[](https://stackoverflow.com/questions/3190578/from-eric-lipperts-blog-dont-close-over-the-loop-variable)

[我使用 lambda 表达式作为`ThreadStart`参数，使用](https://stackoverflow.com/questions/3190578/from-eric-lipperts-blog-dont-close-over-the-loop-variable)[Thread](http://msdn.microsoft.com/en-us/library/system.threading.thread(v=vs.90).aspx)类在新线程中运行方法。这是我的代码：

```
delegate void del();

static void Do(int i)
{
    Console.WriteLine(i);
}

static del CreateLoop(del Do)
{
    return () =>
    {
        while (true)
        {
            Do();
            Thread.Sleep(500);
        }
    };
}

static void Main(string[] args)
{
    int n = 0;
    var loop = CreateLoop(() => Do(n));
    new Thread(() => loop()).Start();
    Thread.Sleep(500);
    n = 1;
} 
```

这是输出：

```
0
1
1
1
... 
```

这怎么可能？
为什么如果我更改整数变量`n`的值，也会更改`i`（`Do`的参数）的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:34:25.990

您应该从中创建一个不同的变量，从而不更改原始值。

毕竟，你真正要做的只是调用同一个旧的“函数”，lambda 表达式一遍又一遍地传递变量 i，这确实发生了变化。就像您将 var i 的初始值存储在某处一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:49:17.873

```
var loop = CreateLoop(() => Do(n)); 
```

这一行只是创建一个新函数并将其分配给一个变量。除其他外，此函数将值传递`n`给`Do`函数。但它不是调用该`Do`函数，它只是创建一个函数，该函数在执行时将调用该`Do`函数。

然后，您启动一​​个调用函数等的新线程，但您的新线程仍在执行`Do(n)`，将`n`变量传递给`Do`. 该部分不会改变 - 您创建了一个函数，该函数引用内存中的特定位置（由变量表示`n`）并继续引用内存中的该位置，即使您更改了存储在那里的值。

我相信以下内容会“修复”您的代码：

```
var loop = (int x) => () => CreateLoop(() => Do(x));
new Thread(loop(n)).Start(); 
```

这会将 的值传递`n`给由 表示的函数`loop`，但该`loop`函数会在内存中创建一个新位置（由 表示`x`）来存储该值。内存中的这个新位置不受后续更改的影响`n`。也就是说，你创建的函数并没有直接引用内存中`n`指针指向的地方。

# ruby-on-rails - 如何在 Ruby on Rails 中禁用 elasticsearch 动态映射？

> ID：13105015
> 
> 赞同：1
> 
> 时间：2012-10-27T23:14:58.757
> 
> 标签：ruby-on-rails, elasticsearch, tire

在 elasticsearch.org 网站中，它声明您可以通过 将默认动态映射设置为 false `index.mapper.dynamic`。我是否`tire`在初始化程序文件夹中创建一个文件来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:54:24.133

不，只需使用此样式来创建您的映射

```
class Something < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

    settings
         :mapper => {
           "dynamic" => "false"
         } do
      mapping { indexes :bar, :type => 'string', :analyzer => "url_analyzer" }
    end
end 
```

# facebook - PHP-SDK getUser() 始终为 0 / 未通过身份验证

> ID：13105017
> 
> 赞同：1
> 
> 时间：2012-10-27T23:15:49.660
> 
> 标签：facebook, facebook-php-sdk, codeigniter-2, csrf

我正在使用带有更新的 FB PHP-SDK 3.2 的 A3M CodeIgniter 库。

我被迫从 2.x 更新，因为 Facebook 前几天停用了他们的“传统”连接方法，这就是 a3m 框架使用的方法。所以我更新到 SDK，现在由于多种原因无法使连接过程正常工作：

1.  无限重定向`getLoginUrl()`
2.  `CSRF state token does not match one provided`错误（`getLoginUrl()`如果我有用户，则不使用）。
3.  用户总是`0`，即使我在 FB 上登录。

我现在真的不知道该怎么做。

我的想法：

*   CodeIgniter 可能会剥离响应`code`/ `state`？没有把握
*   身份验证失败/除了 CSRF 错误（不是来自 CI！）
*   来自 FB 的无限重定向报告了许多问题（尤其是在 SO 上）
*   许多关于 PHP SDK 的 CSRF 问题报告的问题。

**REF：**
[https](https://github.com/facebook/facebook-php-sdk) ://github.com/facebook/facebook-php-sdk - FB SDK
[https://github.com/pengkong/A3M-for-CodeIgniter-2.0](https://github.com/pengkong/A3M-for-CodeIgniter-2.0) - A3M 框架（我参与管理）。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-01T15:28:23.673

销毁会话以`$facebook->destroySession()`获取用户 0。

关于 2 Facebook SDK 代码在同一处理程序中检查两次令牌时存在错误。

我编辑了这样的getCode函数`facebook.php`：

```
protected function getCode() {
    if (!isset($_REQUEST['code']) || !isset($_REQUEST['state']) || $this->state === null) {
      return false;
    }
    if ($this->state === $_REQUEST['state']) {
        // CSRF state has done its job, so clear it
        $this->state = null;
        $this->clearPersistentData('state');
        return $_REQUEST['code'];
    }
    self::errorLog('CSRF state token does not match one provided.');

    return false;
} 
```

更清楚，如果调用两次，则不会声明无效令牌。

需要明确的是，如果例如：

`$facebook->getUser();`然后在同一个处理程序中，`$facebook->getLogoutUrl()`然后`getCode()`调用两次，从而导致错误消息无效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:49:16.420

尝试将 modules/account/helper 中的 fb_ca_chain_bundle.crt 替换为[https://github.com/facebook/facebook-php-sdk/tree/master/src中的那个](https://github.com/facebook/facebook-php-sdk/tree/master/src)

# mysql - 如何使用 phpmyadmin 添加删除级联和更新限制？

> ID：13105019
> 
> 赞同：29
> 
> 时间：2012-10-27T23:16:12.797
> 
> 标签：mysql, phpmyadmin, foreign-keys

我想通过*phpmyadmin*`On delete cascade and on update restrict'`用户界面在外键上添加 '而不是执行查询。

 *我通常使用*Heidisql*控制面板来执行这些操作。现在我很难在*phpmyadmin*上做同样的事情。

任何的想法？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-27T23:20:53.337

在定义表结构的选项卡中，您将获得列及其属性的列表，并且在其下方应该有一个链接“关系视图”，位于“打印视图”和“建议表结构”之间。

这就是你想要去的地方，但你必须已经在两个表上创建了索引。此外，您可能需要确保您使用的是 mysql 的 innoDB 存储引擎。

编辑：一张图片值 1000 字： ![突出显示 phpmyadmin 界面中的几个按钮](../Images/25c39e1c1fe3e5bd52bc293d5de15076.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-11-26T21:29:56.393

Cimbali 的回答对我有用，但情况略有不同，所以如果您也在寻找“关系视图”链接，请尝试查看： [![在此处输入图像描述](../Images/a540da7c475abf6a92710d4345103683.png)](https://i.stack.imgur.com/Odrlg.png)

它应该带你去那里：

[![在此处输入图像描述](../Images/50d223b0c5d5f306c61e1c049a7ba00a.png)](https://i.stack.imgur.com/uii5K.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-12T12:20:01.633

关键事实： 1\. 两个表都必须有 innodb 存储引擎。2.两个表中的数据类型和长度应相同。3\. 第二张表中的字段应创建为索引。

希望它会帮助某人...*

# web-services - 在具有依赖关系的 scala 代码中调用外部服务

> ID：13105020
> 
> 赞同：2
> 
> 时间：2012-10-27T23:16:18.860
> 
> 标签：web-services, scala, design-patterns, io, pattern-matching

在这个关头，我的设计面临一个重大问题。我的方法是尝试完成以下操作：

1.  将传入的对象插入数据库。
2.  从插入中获取自动递增的 id，并使用它与对象一起调用 webservice1。
3.  从 webservice1 获取结果并使用原始对象和来自 webservice1 的一些响应调用 webservice2。
4.  将 webservice1 和 2 的结果结合起来，写入数据库。
5.  从最后一次插入中获取生成的自动递增 id，并使用最终会导致操作成功或失败的原始对象调用 webservice3。

我想以灵活的方式设计它，因为需求在不断变化，我不想继续根据任何变化修改我的逻辑。我确实意识到一些变化是不可避免的，但我想尽量减少损害并尊重开闭原则。

我最初的看法如下：

```
def complexOperation(someObject:T) = 
   dbService.insertIntoDb(someObject) match {
     case Left(e:Exception) => Left(e)
     case Right(id:Int) => webService.callWebService1(id,someObject) match {
        case Left(e:Exception) => Left(e)
        case Right(r:SomeResponse1) => webService.callWebservice2(r,someObject) match {
          case Left(e:Exception) => webService.rollbackService1();Left(e)
          case Right(context:ResponseContext) => dbService.insertContextIntoDb(context) match {
            case Left(e:Exception) => Left(e)
            case Right(id:Int) => webService.callWebservice3(id,someObject) match {
               case Left(e:Exception) => webService.rollbackService3();Left(e)
               case Right(r:Response) => Right(r)
            }
          }
        } 
     } 
```

如您所见，这是一团乱麻。如果事情失控，我既不能对它进行单元测试，也不能扩展它，也不能很容易地调试它。这段代码达到了它的目的，但如果能获得一些关于我应该如何重构它以使继承我的代码的人的生活更轻松一些的想法将会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:34:43.590

您可以使用 for comprehension 来减少代码中的噪音。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T01:46:20.790

看看[scala.util.Try](http://www.scala-lang.org/api/rc/index.html#scala.util.Try)。它在 Scala 2.10 中可用，您可能会也可能不会选择它，但它的想法非常适合您的场景。

您在代码示例中拥有的是我喜欢称之为嵌套的“金字塔”的东西。最好的解决方案是尽可能使用平面映射。但显然，当你`Either[Exception, Result]`在每一步都有类似的东西时，这是一个问题。这就是`Try`出现的地方。`Try[T]`本质上是 的替代品`Either[Exception, T]`，并且它具有`flatMap`您需要的所有优点。

假设您可以更改这些调用的返回类型，或者提供一些从to的`webService`隐式转换，您的代码块将变得更像......`Either[Exception, Result]``Try[Result]`

```
for {
    id <- dbService.insertIntoDb(someObject)
    r <- webService.callWebService1(id,someObject)
    context <- webService.callWebservice2(r,someObject)
    id2 <- dbService.insertContextIntoDb(context)
    response <- webService.callWebservice3(id,someObject).recoverWith {
        case e: Exception => webService.rollbackService3(); Failure(e)
    }
} yield response 
```

[Lift 在net.liftweb.common.Box](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.common.Box)中也有类似的机制。就像`Option`，但也有一个异常容器。

**编辑：**看起来你可以使用`left`or`right`的方法`Either`，它会让你`flatMap`几乎完全按照我描述的方式使用 -ing `Try`。唯一的区别是最终结果是 a`Either[Exception, Result]`而不是 a `Try[Result]`。查看[LeftProjection](http://www.scala-lang.org/api/current/index.html#scala.Either%24%24LeftProjection)了解详细信息/示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T22:31:31.357

@Dylan 上面有正确的想法。让我看看我是否可以帮助将您想做的事情翻译成惯用的 Scala 2.9.1 代码。

此版本不尝试任何回滚：

```
// 1: No rollbacks, just returns the first exception in Left
def complexOperation1(someObject:T): Either[Exception, Response] = {      
  for {
    id       <- dbService.insertIntoDb(someObject).right
    r        <- webService.callWebService1(id, someObject).right
    context  <- webService.callWebservice2(idResp, someObject).right
    id2      <- dbService.insertContextIntoDb(context).right
    response <- webService.callWebservice3(id,someObject).right
  } yield response 
} 
```

现在，让我们尝试完全按照上面的方式进行回滚：

```
// 2: Rolls back all web services and returns first exception in Left       
def complexOperation1(someObject:T): Either[Exception, Response] = {      
  for {
    id       <- dbService.insertIntoDb(someObject).right
    r        <- webService.callWebService1(id, someObject).right
    context  <- webService.callWebservice2(idResp, someObject).left.map { e =>
                  webService.rollbackService1()
                  e
                }.right
    id2      <- dbService.insertContextIntoDb(context).right
    response <- webService.callWebservice3(id,someObject).left.map { e =>
                  webService.rollbackService3()
                  e
                }.right
  } yield response 
} 
```

如果你定义一个函数来实现左边的效果（回滚），它会变得更干净，更容易测试，例如：

```
// 3: Factor out the side-effect of doing the follbacks on Left
def rollbackIfLeft[T](f: => Either[Exception, T], r: => Unit): Either[Exception, T] = {
  val result = f
  result.left.foreach(_ => r) // do the rollback if any exception occured
  result
}

def complexOperation1(someObject:T): Either[Exception, Response] = {      
  for {
    id       <- dbService.insertIntoDb(someObject).right
    r        <- webService.callWebService1(id, someObject).right
    context  <- rollbackIfLeft(webService.callWebservice2(idResp, someObject),
                               webService.rollbackService1()).right
    id2      <- dbService.insertContextIntoDb(context).right
    response <- rollbackIfLeft(webService.callWebservice3(id,someObject),
                               webService.rollbackService3()).right
  } yield response 
} 
```

您可以在 scala REPL 中试用`rollbackIfLeft`以了解它：

```
scala> rollbackIfLeft(Right(42), println("hey"))
res28: Either[Exception,Int] = Right(42)

scala> rollbackIfLeft(Left(new RuntimeException), println("ERROR!"))
ERROR!
res29: Either[Exception,Nothing] = Left(java.lang.RuntimeException) 
```

希望这可以帮助！

# php - 格式化编码字段

> ID：13105024
> 
> 赞同：0
> 
> 时间：2012-10-27T23:17:22.717
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

在 cakePHP 中，我有一些字段是选项字段并且不是来自数据库：

*查看/控制器/index.ctp*

```
<?php echo $model['Model']['option']; ?> 
```

*查看/控制器/add.ctp*

```
<?php echo $this->Form->create('Model'); ?>
    <?php
        echo $this->Form->input('option', array(
                'label' => __('Option'),
                'options' => array(
                    0 => __('Foo'),
                    1 => __('Bar'),
                    2 => __('Static')
                )
            )
        );
    ?>
<?php echo $this->Form->end(__('Submit')); ?> 
```

我想要`index.ctp`（和`show.ctp`）显示`Foo/Bar/Static`，而不是`0/1/n`，这是迄今为止显示的内容..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:36:26.877

好像没问题。但是你应该使用 $this->request->data 来显示表单的数据和 debug() 函数来调试。

所以，你看到的是：

```
debug($this->request->data[Model]['option']) 
```

# c# - 使用 yield 时增加 IEnumerator/IEnumerable

> ID：13105029
> 
> 赞同：0
> 
> 时间：2012-10-27T23:17:48.143
> 
> 标签：c#, iterator, ienumerable

我正在尝试对集合进行迭代，如果集合为空，则调用将获得下一组结果的增量方法。当增量表示没有更多结果时，则中断的产量；

我不能使用（我认为）标准 IEnumerator 和 MoveNext() 等，因为增量方法返回两种不同类型的数据。

我在下面尝试了一个示例，但它在一次迭代后停止。我希望有一种更简单的方法可以做到这一点（或者至少有可能只是我有一个错误）。

```
static void Main(string[] args)
{
    var query = new Query();

    foreach(var s in query.Q1())
    {
        Console.WriteLine(s);
    }

    foreach (var s in query.Q2())
    {
        Console.WriteLine(s);
    }

    Console.ReadLine();
}

public class Query
{
    int i = 0;
    bool complete;
    List<string> q1 = new List<string>();
    List<string> q2 = new List<string>();

    public IEnumerable<string> Q1()
    {
        if (complete)
        {
            yield break;
        }
        if (!q1.Any() && !complete)
        {
            Increment();
        }
        if (q1.Any())
        {
            foreach (var s in q1)
            {
                yield return s;
            }
        }
    }

    public IEnumerable<string> Q2()
    {
        if (complete)
        {
            yield break;
        }
        if (!q2.Any() && !complete)
        {
            Increment();
        }
        if (q2.Any())
        {
            foreach (var s in q2)
            {
                yield return s;
            }
        }
    }

    void Increment()
    {
        if (i < 10)
        {
                    // simulate getting two types of data back (parent and two children) from datasource
            q1.Add((1 * (i + 1)).ToString());
            q2.Add("A: " + (1 * (i + 1)).ToString());
            q2.Add("B: " + (1 * (i + 1)).ToString());

            i++;
        }
        else
        {
            complete = true;
        }
    }
} 
```

结果：

```
1
A: 1
B: 1 
```

关于更好的方法或我哪里出错的任何想法？

**编辑**

这是我的粗略和现成的修复：

```
public IEnumerable<string> Q1()
{
    var index = 0;

    if (!complete)
    {
        while (!complete)
        {
            var count = q1.Count();

            if (index + 1 == count)
            {
                for (var x = index; index < count; index++)
                {
                    yield return q1[index];
                }
            }
            else
            {
                Increment();
            }
        }
    }
    else
    {
        foreach (var s in q1)
        {
            yield return s;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:22:38.200

您仅将元素添加到`q2`列表中。因此，当您调用`Q1`迭代器时，您将在检查后退出它

```
if (q1.Any()) 
```

当你调用`Q2`迭代器时，你在之后退出它

```
if (q2.Any())
{
     foreach (var s in q2)
     {
         yield return s;
     }
} 
```

这个`foreach`循环只执行一次，它只返回三个项目，这些项目是在迭代器`q2`的单次`Increment`调用期间添加的。`Q1`

目前还不是很清楚你想要实现什么，但这里是你可以使用循环生成迭代器返回值的方式

```
public IEnumerable<string> Q2()
{
    for (int i = 1; i <= 10; i++) // start from 1
    {
        yield return i.ToString(); // do not multiply by 1
        yield return "A: " + i;    // .ToString() is not necessary 
        yield return "B: " + i;
    }
} 
```

# android - Android - 在列表视图中管理点击和长按

> ID：13105031
> 
> 赞同：1
> 
> 时间：2012-10-27T23:18:03.513
> 
> 标签：android, listview, click, onclicklistener, long-click

我目前正在编写一个新的 android 应用程序，我需要在列表视图上同时使用 OnItemClickListener 和 OnItemLongClickListener。每个侦听器在操作栏上启动不同的操作模式。问题是与点击事件关联的动作模式是唯一启动的，即使我执行长按。经过一番研究，我现在明白了为什么：长点击事件也会创建点击事件，我猜这最后一个事件总是在长点击事件之后执行，这样就解释了为什么我无法显示其他动作模式。

问题是：当我进行长按时如何阻止点击事件？或者它是否存在另一种方式来执行我想做的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T23:21:08.803

[`onLongClick()`](http://developer.android.com/reference/android/view/View.OnLongClickListener.html)：

> 退货
> 
> 如果回调消耗了长按，则为 true，否则为 false。

因此，如果您返回`true`，则不会执行 onclick。

# java - 使用 FileUpload 时嵌套表单上的检票口问题

> ID：13105046
> 
> 赞同：2
> 
> 时间：2012-10-27T23:20:00.057
> 
> 标签：java, forms, file-upload, wicket

我在检票口写了一个面板，让我上传一个文件，它完全有效。
但是当我将该面板以其他形式 ( `wicket:id="outerForm"`) 放置并上传文件时，它会从 () 中引发异常`component id= outerForm`：

`java.lang.IllegalStateException: ServletRequest does not contain multipart content. One possible solution is to explicitly call Form.setMultipart(true), Wicket tries its best to auto-detect multipart forms but there are certain situation where it cannot.`

但因为`outerform`我打电话`form.setMultipart(true)`

有谁知道如何修理它？
我使用检票口 1.4.21

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T13:45:41.943

I had the same problem now. Here is how I fixed:

My outer and inner forms both have setMultipart(true) and it works as expected.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-14T12:49:11.573

您必须更改 enctype，因为您正在处理上传文件，所以只需这样做：

在您的表单中插入“setMultipart()”。

例如：

```
public class MyForm extends Form<T>{

  public MyForm(String id){
   super(id);
   setMultiPart(true);
   }

} 
```

我认为它可以帮助你。

# java - 将字典与 GZIP 一起使用时出现 Java CRC 错误

> ID：13105047
> 
> 赞同：0
> 
> 时间：2012-10-27T23:20:12.423
> 
> 标签：java, dictionary, crc, deflate, gzipinputstream

老实说，这令人沮丧，因为我认为我知道原因，但同时我无法确定它何时在我的代码中发生。基本上，对于这个分配，我们应该读入一个输入流，将它分成 128 个字节的块，然后压缩每个块，同时使用前一个块的最后 32 个字节作为字典。

```
import java.io.*;
import java.util.zip.*;

public class TestCase
{
    protected static final int BLOCK_SIZE = 128;
    protected static final int DICT_SIZE = 32;

    public static void main(String[] args)
    {
        BufferedInputStream inBytes = new BufferedInputStream(System.in);
        byte[] buff = new byte[BLOCK_SIZE];
        byte[] dict = new byte[DICT_SIZE];
        int bytesRead = 0;

        try
        {
            DGZIPOutputStream compressor = new DGZIPOutputStream(System.out);
            bytesRead = inBytes.read(buff);

            if (bytesRead >= DICT_SIZE)
            {
                System.arraycopy(buff, 0, dict, 0, DICT_SIZE);
            }

            while(bytesRead != -1) 
            {
                compressor.write(buff, 0, bytesRead);              
                if (bytesRead == BLOCK_SIZE)
                {
                    System.arraycopy(buff, BLOCK_SIZE-DICT_SIZE, dict, 0, DICT_SIZE);
                    compressor.setDictionary(dict);
                }

                bytesRead = inBytes.read(buff);
            }
            compressor.flush();         
            compressor.close();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        System.exit(-1);
        }
    }

    public static class DGZIPOutputStream extends GZIPOutputStream
    {
        public DGZIPOutputStream(OutputStream out) throws IOException
        {
            super(out);
        }

        public void setDictionary(byte[] b)
        {
            def.setDictionary(b);
        }

        public void updateCRC(byte[] input)
        {
            crc.update(input);
            System.out.println("Called!");
        }                       
    }
} 
```

我真的偏离了一个字节。我认为是当我调用 write() 时，我知道它会更新字节数组的 crc。我认为由于某种原因 updateCRC 被调用了两次，但我一生都无法弄清楚在哪里。或者也许我完全离开了。但这是一个单字节，但当我取下字典时，它工作得很好，所以....我真的不确定。

编辑：所以当我编译和测试它时：

```
$cat file.txt

hello world, how are you? 123efd4
KEYBOARDSMASHR#@Q)KF@_{KFSKFDS
000000000000000000000000000000000000000000000000000
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
pwfprejgewojgw
12345678901234567890
!@#$%^&*(!@#$%^&*(A

cat file.txt | java TestCase | gzip -d | cmp file.txt ; echo $?

gzip: stdin: invalid compressed data--crc error
file.txt - differ: byte 1, line 1
1 
```

（忽略我选择的文件，我昨晚困了）

编辑：解决

# spring - 带有 Thymeleaf 视图集成的 Spring

> ID：13105048
> 
> 赞同：2
> 
> 时间：2012-10-27T23:20:21.250
> 
> 标签：spring, spring-mvc, thymeleaf

从 Spring MVC 和 Thymeleaf 开始一个项目 - 但我面临加载索引页面的问题 -

我的控制器如下 -

```
@Controller

public class HomeController {

        @RequestMapping(method=RequestMethod.GET, value="/")
        public ModelAndView index(){
            ModelAndView mav = new ModelAndView();
            mav.setViewName("index");
            mav.addObject("user", new UserCredential());
            return mav;
        } 
```

我的 servlet.xml 文件是

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:context="http://www.springframework.org/schema/context"
     xmlns:mvc="http://www.springframework.org/schema/mvc"
     xsi:schemaLocation="
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <context:component-scan base-package="web.controller" />

    <!-- Enabling Spring MVC configuration through annotations -->
    <mvc:annotation-driven />

    <!--  Mapping Static Resources -->
    <mvc:resources mapping="/resources/**" location="/resources/" />

    <bean id="templateResolver" class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".html" />
        <property name="templateMode" value="HTML5" />
    </bean>

    <bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
        <property name="templateResolver" ref="templateResolver" />
    </bean>

    <bean class="org.thymeleaf.spring3.view.ThymeleafViewResolver">
        <property name="templateEngine" ref="templateEngine" />
        <property name="order" value="1" />
        <property name="viewNames" value="*.html"/>
    </bean>

</beans> 
```

我的文件结构是——

```
WebContent
 -- WEB_INF
    -- views
      -- index.html 
```

但是我得到以下异常 -

`javax.servlet.ServletException: Could not resolve view with name 'index1' in servlet with name`'springMVC'

我是否将文件放在错误的位置或在我的控制器中丢失了某些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T00:21:54.620

解决了它，我不得不返回带有扩展名的视图名称，因为我告诉我的 viewResolver 只解析以 .html 结尾的名称。这个线程将我指向答案[http://forum.thymeleaf.org/Issue-with -my-Thymeleaf-Spring-configuration-td4024996.html](http://forum.thymeleaf.org/Issue-with-my-Thymeleaf-Spring-configuration-td4024996.html)

# node.js - 将目录结构部署到新路径

> ID：13105051
> 
> 赞同：0
> 
> 时间：2012-10-27T23:20:51.627
> 
> 标签：node.js, deployment, directory, package

我正在使用[bower](http://twitter.github.com/bower/)打包系统将文件提取到本地项目，但是打破惯例这些文件本身是无用的。它们需要被注入到我正在使用的 MVC 框架中的正确位置，所以无论 bower 获取什么，我都需要基本上执行一个 post 操作并将目录结构/文件复制`components/myexample/`到`application/`

**远程凉亭包：**

```
controllers
   mycontroller.php
models
   mymodel.php
view
  layout
     myview.php
composer.json 
```

**本地项目：**

```
composer.json
components
  myexample
      controllers
        mycontroller.php
      models
       mymodel.php
      view
       layout
         myview.php

application
   controllers
   models
   view 
```

我正在考虑检索目录结构和文件以将其全部压缩，然后提取到正确的目录。我需要跨平台兼容的解决方案。您将如何做到这一点，以及如何更好地实现这一点？

# c - 分配连续内存

> ID：13105056
> 
> 赞同：3
> 
> 时间：2012-10-27T23:21:11.310
> 
> 标签：c, arrays, unix, memory

我正在尝试在 C 中分配大量连续内存并将其打印给用户。我这样做的策略是创建两个指针（一个指向双精度指针，一个指向双精度指针），将其中一个分配到整个大小（m * n），在这种情况下是指向双精度指针的指针。然后将第二个 malloc 分配到 m 的大小。最后一步是遍历 m 的大小并执行指针运算，以确保大数组中双精度数的地址将存储在连续的内存中。这是我的代码。但是当我打印出地址时，它似乎并不连续（或任何顺序）。我如何正确打印出双打的内存地址（它们的值都是 0.0）？

```
/* correct solution, with correct formatting */

/*The total number of bytes allocated was:  4
0x7fd5e1c038c0 - 1
 0x7fd5e1c038c8 - 2
 0x7fd5e1c038d0 - 3
 0x7fd5e1c038d8 - 4*/

 double **dmatrix(size_t m, size_t n);

int main(int argc, char const *argv[])
{
    int m,n,i;
    double ** f;
    m = n = 2;  
    i = 0;

    f = dmatrix(sizeof(m), sizeof(n));

    printf("%s %d\n", "The total number of bytes allocated was: ", m * n);
    for (i=0;i<n*m;++i) {
        printf("%p - %d\n ", &f[i], i + 1);
    }
    return 0;
}

double **dmatrix(size_t m, size_t n) {

    double ** ptr1 = (double **)malloc(sizeof(double *) * m * n);
    double * ptr2 = (double *)malloc(sizeof(double) * m);

    int i;
    for (i = 0; i < n; i++){
        ptr1[i] = ptr2+m*i;
    }

    return ptr1;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T22:01:34.710

请记住，记忆只是记忆。听起来很陈词滥调，但很多人似乎认为 C 中的内存分配和内存管理是一些魔法巫术。它不是。在一天结束时，您分配所需的任何内存，并在完成后释放它。

所以从最基本的问题开始：如果你需要“n”个`double`值，你会如何分配它们？

```
double *d1d = calloc(n, sizeof(double));
// ... use d1d like an array (d1d[0] = 100.00, etc. ...
free(d1d); 
```

很简单。下一个问题，分两部分，第一部分**与内存分配无关**（尚未）：

1.  `double`一个大小的二维数组中有多少个值`m*n`？
2.  我们如何分配足够的内存来容纳它们。

答案：

1.  am*n 2D-matrix of doubles 中有`m*n`双打
2.  分配足够的内存来保存 (m*n) 双打。

看起来很简单：

```
size_t m=10;
size_t n=20;
double *d2d = calloc(m*n, sizeof(double)); 
```

但是我们如何访问实际元素呢？有点数学是为了。知道`m`and `n`，你可以简单地做到这一点

```
size_t i = 3; // value you want in the major index (0..(m-1)).
size_t j = 4; // value you want in the minor index (0..(n-1)).
d2d[i*n+j] = 100.0; 
```

有没有更简单的方法来做到这一点？在标准 C 中，**是**的；在 C++ 中**没有**。标准 C 支持一种非常方便的功能，可以生成适当的代码来*声明*动态大小的可索引数组：

```
size_t m=10;
size_t n=20;
double (*d2d)[n] = calloc(m, sizeof(*d2d)); 
```

不能强调这一点：标准 C 支持这一点，C++ 不支持。如果您使用的是 C++，您可能希望编写一个对象类来为您完成这一切，因此除此之外不会提及。

那么上面的实际*是做*什么的呢？首先，很明显我们仍在分配与之前相同的内存量。也就是说，`m*n`元素，每个都`sizeof(double)`很大。但你可能会问自己，“那个变量声明是怎么回事？” 这需要一点解释。

这之间有一个明显的区别：

```
double *ptrs[n];  // declares an array of `n` pointers to doubles. 
```

还有这个：

```
double (*ptr)[n]; // declares a pointer to an array of `n` doubles. 
```

编译器现在知道每行有多*宽*`n`（每行双精度数），所以我们现在可以使用*两个*索引来引用数组中的元素：

```
size_t m=10;
size_t n=20;
double (*d2d)[n] = calloc(m, sizeof(*d2d));
d2d[2][5] = 100.0; // does the 2*n+5 math for you.
free(d2d); 
```

我们可以将其扩展到 3D 吗？当然，数学开始看起来有点奇怪，但它仍然只是将计算偏移到一个 big'ol'block'o'ram 中。首先是“自己做数学”的方式，使用 [i,j,k] 进行索引：

```
size_t l=10;
size_t m=20;
size_t n=30;
double *d3d = calloc(l*m*n, sizeof(double));

size_t i=3;
size_t j=4;
size_t k=5;
d3d[i*m*n + j*m + k] = 100.0;
free(d3d); 
```

您需要盯着其中的数学一分钟，才能真正了解它如何计算`double`大块 ram 中的值实际在哪里。使用上述维度和所需索引，“原始”索引为：

```
i*m*n = 3*20*30 = 1800
j*m   = 4*20    =   80
k     = 5       =    5
======================
i*m*n+j*m+k     = 1885 
```

所以我们在那个大线性块中达到了第 1885 个元素。让我们再做一个。[0,1,2] 呢？

```
i*m*n = 0*20*30 =    0
j*m   = 1*20    =   20
k     = 2       =    2
======================
i*m*n+j*m+k     =   22 
```

即线性阵列中的第 22 个元素。

现在应该很明显，只要您保持在数组的自我规定范围内，`i:[0..(l-1)], j:[0..(m-1)], and k:[0..(n-1)]` **任何有效的索引三元组都会在线性数组中找到一个唯一值，而其他*有效*三元组也不会定位。**

最后，我们使用与之前对 2D 数组所做的相同的数组指针声明，但将其扩展到 3D：

```
size_t l=10;
size_t m=20;
size_t n=30;
double (*d3d)[m][n] = calloc(l, sizeof(*d3d));
d3d[3][4][5] = 100.0;
free(d3d); 
```

再一次，这一切真的和我们之前手工做的数学一样，但让编译器为我们做。

我意识到这可能有点绕你的头，但这很重要。如果你有连续的内存矩阵是最重要的（比如将矩阵提供给 OpenGL 等图形渲染库等），你*可以*使用上述技术相对轻松地做到这一点。

最后，您可能想知道，如果您可以这样做，为什么有人首先要做整个指针数组到指针数组到指针数组到值的事情？很多原因。假设您要替换行。交换指针很容易；复制整行？昂贵的。假设您要替换`(m*n)`3D array 中的整个表格维度`(l*n*m)`，甚至更重要的是，交换指针：easy; 复制整个`m*n`表？*贵*。而不是那么明显的答案。如果行宽需要独立于行（即 row0 可以是 5 个元素，row1 可以是 6 个元素），该怎么办？固定`l*m*n`分配根本不起作用。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:28:14.863

没关系，我想通了。

```
 /* The total number of bytes allocated was:  8
    0x7fb35ac038c0 - 1
     0x7fb35ac038c8 - 2
     0x7fb35ac038d0 - 3
     0x7fb35ac038d8 - 4
     0x7fb35ac038e0 - 5
     0x7fb35ac038e8 - 6
     0x7fb35ac038f0 - 7
     0x7fb35ac038f8 - 8 */

double ***d3darr(size_t l, size_t m, size_t n);

int main(int argc, char const *argv[])
{
    int m,n,l,i;
    double *** f;
    m = n = l = 10; i = 0;

    f = d3darr(sizeof(l), sizeof(m), sizeof(n));
    printf("%s %d\n", "The total number of bytes allocated was: ", m * n * l);
    for (i=0;i<n*m*l;++i) {
        printf("%p - %d\n ", &f[i], i + 1);
    }

    return 0;
}

double ***d3darr(size_t l, size_t m, size_t n){

    double *** ptr1 = (double ***)malloc(sizeof(double **) * m * n * l);
    double ** ptr2 = (double **)malloc(sizeof(double *) * m * n);
    double * ptr3 = (double *)malloc(sizeof(double) * m);

    int i, j;
    for (i = 0; i < l; ++i) {
        ptr1[i] = ptr2+m*n*i;
        for (j = 0; j < l; ++j){
            ptr2[i] = ptr3+j*n;
        }
    }

    return ptr1;
} 
```

# php - php用curl获取图像宽度/长度？[ 没有 getimagesize() ]

> ID：13105057
> 
> 赞同：0
> 
> 时间：2012-10-27T23:21:12.063
> 
> 标签：php, image, curl

> **可能重复：**
> [php 从 url 获取所有图像，其宽度和高度 >=200 更快](https://stackoverflow.com/questions/10035954/php-get-all-the-images-from-url-which-width-and-height-200-more-quicker)

我正在编写一个 PHP 脚本来从 URL 中获取图像。但我只想显示超过一定尺寸/或[长度/宽度]的图像。我试过`getimagesize()`了，但速度很慢，尤其是多张图片。

我阅读了有关使用 cURL 的信息。但不确定，当输入是 url 字符串时，如何获取图像的文件大小或尺寸。我读了这些和更多。

[http://forums.phpfreaks.com/topic/232507-faster-solution-to-check-image/](http://forums.phpfreaks.com/topic/232507-faster-solution-to-check-image/)

[使用 cURL 输出外部图像，但是如何更改图像的宽度？](https://stackoverflow.com/questions/5069286/output-external-image-with-curl-but-how-do-you-change-the-width-of-the-image)

[使用 Curl 获取图像尺寸](https://stackoverflow.com/questions/869989/get-image-dimensions-with-curl)

希望得到帮助，以获取图像大小/尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:28:43.027

您自己提供这些图像吗？在您的服务器/应用程序上？

如果是这样，您可以将宽度/高度信息放在图像中的一些自定义 HTTP 标头中（您需要通过在输出图像之前修改标头的任何 PHP 解决方案来处理对图像的访问......具有良好的缓存设置）。

例如，此标头可以基于在上传时计算的宽度/高度并存储在数据库中..因此它将永远只需要一个 getimagesize ..

之后，在 curl 中只需检查标题（不下载文件）。如果宽度/高度符合您的要求，您就可以真正下载它。

# perl - Perl 透明代理

> ID：13105058
> 
> 赞同：3
> 
> 时间：2012-10-27T23:21:15.313
> 
> 标签：perl, http, proxy, lwp

我正在尝试创建一个透明的**HTTP 代理**。它的目的是停留在浏览器和 Web 服务器之间并且不可见。这是我正在使用的代码。不幸的是，它运行得不是很好。`$base_uri`当我打开网页（由 我正在一个网站上尝试它，它返回包括“ `transfer-encoding: chunked`”在内的各种响应（所以我想问题可能就在那里？！）。我认为cookies也可能存在问题，但我不知道如何解决它们（如果有的话......）。

```
#!/usr/bin/perl

use strict;

use HTTP::Daemon;
use LWP::UserAgent;
use HTTP::Cookies;

my $cookie_jar = HTTP::Cookies->new();

my $ua = LWP::UserAgent->new( max_redirect => 0, env_proxy => 0,keep_alive => 1, timeout => 30, agent => "Mozilla/4.76 [en] (Win98; U)");
my $d = HTTP::Daemon->new( 
    LocalHost => "localhost",  # remove this to listen from other machines 
                   # (i.e. open-relay... be careful of spammers!)
    LocalPort => 33331
) || die;
print "[Proxy URL:", $d->url, "]\n";

fork(); fork(); fork();  # 2^3 = 8 processes

$ua->cookie_jar($cookie_jar);

my $base_uri = 'http://example.com/';

while (my $c = $d->accept) {
        while (my $request = $c->get_request) {
            my $uri = $base_uri . $request->uri->as_string();
            my $method = $request->method;
            my $req = HTTP::Request->new($method, $uri);

            $request->uri($uri);

            print "[[ $method >> $uri ]]\n";
            my $response = $ua->simple_request($request);
            $c->send_response( $response );
        }
    $c->close;
    undef($c);
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:25:13.020

不清楚，你真正想要什么。你应该更好地描述它。如果您描述需要该代理的内容和原因以及它需要哪些功能，那么任何帮助都会好得多。不过我会试试的。

您当前所做的是获取传入连接，提取 URI 和调用方法并将其传递给您的源。嗯，HTTP 要复杂得多——你去掉所有的东西，比如传输的数据（例如对于 POST 请求）以及所有的标题行（cookies、登录数据、浏览器标识、语言规范……），它们通常携带重要信息. 你也修改了很多时间行为。然后你把它发送到你的代理目标。

现在您获取服务器答案并再次剥离所有相关内容。您也只能在完成后回复答案。对于流数据，这将不起作用（您已经提到了分块传输模式）。此外，您的方法需要大量内存来存储大文件（例如 DVD 映像 - 4GB）。

如果没有有关您的应用程序的更多详细信息，则无法提供真正的建议，但有一些想法：

a) 正如评论中所说，有可用的 Perl 模块。您可以测试它们，看看它们是否符合您的需求。

b) 你可以降一级。使用`IO::Socket::INET`or`INET6`和 直接在套接字级别上工作。将每个数据包直接发送到输出。这几乎是 100% 透明的（除了 IP 地址和可能的 TCP 数据包大小）。想想如果你想更改或检查数据，你直接需要自己处理 HTTP，这在当今非常复杂（尤其是由于传输编码）。

c) 也许不要自己编写代码，而是使用现有的代理（例如 Apache 网络服务器或特定的代理程序）。

# cookies - 网站上的第 3 方社交 Cookie

> ID：13105059
> 
> 赞同：0
> 
> 时间：2012-10-27T23:21:41.360
> 
> 标签：cookies, facebook-like, google-plus, twitter-follow

我正在为一个朋友创建一个网站，主页上有一个 Google +1 按钮、一个 Twitter 关注按钮和一个 Facebook Like 按钮。
当我在谷歌浏览器的 F12 菜单中查看 Cookies 时，左侧的列表中有各种各样的 Google、Twitter 和 Facebook 站点，以及我自己的（当前为 localhost）
当我查看 localhost 的 cookie 时，有 15 个，并且所有他们中的他们将他们的域列为 .twitter.com 或 .google.com
当我删除了 localhost 下列出的所有 cookie 时，我发现自己退出了我的 Google、Twitter 和 Facebook 帐户，即使我没有删除任何 Facebook cookie ！为什么我可以在 localhost 列表下看到他们的 cookie，有没有办法防止这种情况发生？将我的 cookie 与他们的 cookie 区分开来会有点烦人。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:45:44.137

Cookie 是特定于域的，不能被其他域的站点读取。我的猜测是删除超出了本地主机范围。我会尝试在 Chrome 设置中使用 cookie 管理器，而不是通过开发者工具控制台：

1.  打开设置
2.  单击**显示高级设置...**
3.  在**隐私**部分，单击**内容设置**。内容设置窗口打开。
4.  在**Cookie**部分，单击**所有 cookie 和站点数据**。Cookie 和站点数据窗口打开。
5.  过滤*本地主机的显示*
6.  单击 localhost 条目以显示该域的 cookie。
7.  单击单个 cookie 将其删除，或单击右侧的**X删除该域的所有 cookie。**

从这里，您可以检查其他域的其他 cookie 并测试您的脚本以尝试检索这些 cookie。除非您发现了严重的浏览器错误，否则您将无法做到这一点，这不太可能。

# java - 从文件读取时遇到问题

> ID：13105060
> 
> 赞同：0
> 
> 时间：2012-10-27T23:21:43.527
> 
> 标签：java

我有一个更复杂的程序，涉及使用文本文件中写入的内容，但它根本不起作用，没有显示任何内容，一切都依赖于文件。如果我只是使字符串等于我的代码中的某些内容并摆脱从文件中读取的内容，那么它就可以工作。我尝试了一些简单的方法，比如显示读取的行，但运行它时它不显示任何内容。

编辑：它找不到文件的路径......默认文件通常在哪里？该文件与程序在同一目录中，但找不到它，为什么？

```
public static void main(String[] args) {
    String s;
        try {
            FileReader fstream=new FileReader("input.txt");
            BufferedReader in=new BufferedReader(fstream);

        while((s=in.readLine())!=null){
        System.out.print(s);

        }}catch(IOException e){
            System.exit(0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T23:25:38.180

不要忽略异常。如果没有读取任何内容，则可能引发了异常。与其让它冒泡并告诉你出了什么问题，不如抓住它并默默地退出。这就像购买火警并将其音量设置为 0：您永远不会知道发生了火灾。

将您的程序转换为

```
public static void main(String[] args) throws IOException {
    String s;
    FileReader fstream=new FileReader("input.txt");
    BufferedReader in=new BufferedReader(fstream);

    while((s=in.readLine()) != null) {
        System.out.print(s);
    }
} 
```

看看会发生什么。

此外，我删除了循环内对 readLine() 的调用。此时该行已被读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:26:24.527

您正在执行双重阅读

```
while((s=in.readLine())!=null){
    s=in.readLine(); 
```

您在 while 条件内读取该行，然后尝试在其后立即读取另一行，大概是到达文件末尾

尝试删除第二个 in.readLine() 语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T23:27:13.217

每次循环重复时，您都在阅读两行。去除那个

```
s=in.readLine(); 
```

包含在循环中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T23:30:01.580

正如其他人所提到的，您以两倍的检查率错误地读取行。他们的解决方案解决了问题的根源。

但是，如果内存不是问题并且您使用的是[Java 7](http://docs.oracle.com/javase/7/docs/)，您可能会对[Files.readAllLines感兴趣](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllLines%28java.nio.file.Path,%20java.nio.charset.Charset%29)

```
List<String> lines = Files.readAllLines(path, Charset.defaultCharset() ); 
```

从文档：

> 从文件中读取所有行。此方法确保在读取所有字节或引发 I/O 错误或其他运行时异常时关闭文件。使用指定的字符集将文件中的字节解码为字符...请注意，此方法适用于在单个操作中方便读取所有行的简单情况。**它不适用于读取大文件**。

使用此方法的好处是它抽象了细节，为您处理关闭文件，并且通常更易于使用。

# c# - C# rpg 从文件中读取统计信息

> ID：13105063
> 
> 赞同：1
> 
> 时间：2012-10-27T23:22:25.247
> 
> 标签：c#, string, file-io

所以我有一个文本文件，其中有几行格式如下：

> 名称=战士，力量=10，狡猾=4，意志=2，魔法=5，体质=10，健康公式=250，耐力公式=200，魔法公式=100

这个文件没有扩展名，是 utf-8 编码的，文件名是 Classes。

目前它有 4 行，其中每个“名称”之间的统计数据发生变化，这些是基本统计数据，因此除非我手动执行，否则它们永远不会改变。

我使用 2 个文件来引用此信息。实体.cs：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    namespace RpgLibrary.CharacterClasses
    {
    public enum EntityGender { Male, Female, Unknown }
    public abstract class Entity
    {
    #region Vital Field and Property Region
    protected string entityType;
    protected EntityGender gender;
    public string EntityType
    {
        get { return entityType; }
    }
    public EntityGender Gender

         {
        get { return gender; }
        protected set { gender = value; }
    }
    #endregion
    #region Basic Attribute and Property Region
    protected int strength;
    protected int dexterity;
    protected int cunning;
    protected int willpower;
    protected int magic;
    protected int constitution;
    protected int strengthModifier;
    protected int dexterityModifier;
    protected int cunningModifier;
    protected int willpowerModifier;
    protected int magicModifier;
    protected int constitutionModifier;

    public int Strength{

        get { return strength + strengthModifier; }
        protected set { strength = value; }
    }

    public int Dexterity{

        get { return dexterity + dexterityModifier; }
        protected set { dexterity = value; }
    }

    public int Cunning{

        get { return cunning + cunningModifier; }
        protected set { cunning = value; }
    }

    public int Willpower{

        get { return willpower + willpowerModifier; }
        protected set { willpower = value; }
    }

    public int Magic{

        get { return magic + magicModifier; }
        protected set { magic = value; }
    }

    public int Constitution{

        get { return constitution + constitutionModifier; }
        protected set { constitution = value; }
    }
    #endregion

    #region Calculated Attribute Field and Property Region
    protected AttributePair health;
    protected AttributePair stamina;
    protected AttributePair mana;

    public AttributePair Health{
        get { return health; }
    }

    public AttributePair Stamina
    {
        get { return stamina; }
    }

    public AttributePair Mana
    {
        get { return mana; }
    }

    protected int attack;
    protected int damage;
    protected int defense;
    #endregion

    #region Level Field and Property Region
    protected int level;
    protected long experience;

    public int Level
    {
        get { return level; }
        protected set { level = value; }
    }

    public long Experience
    {
        get { return experience; }
        protected set { experience = value; }
    }
    #endregion

    #region Constructor Region
    private Entity()
    {
        Strength = 0;
        Dexterity = 0;
        Cunning = 0;
        Willpower = 0;
        Magic = 0;
        Constitution = 0;
        health = new AttributePair(0);
        stamina = new AttributePair(0);
        mana = new AttributePair(0);
    }
    public Entity(EntityData entityData)
    {
        entityType = entityData.EntityName;
        Strength = entityData.Strength;
        Dexterity = entityData.Dexterity;
        Cunning = entityData.Cunning;
        Willpower = entityData.Willpower;
        Magic = entityData.Magic;
        Constitution = entityData.Constitution;
        health = new AttributePair(0);
        stamina = new AttributePair(0);
        mana = new AttributePair(0);
    }
    #endregion
     }
    } 
```

和 EntityData.cs：

```
 using System;
   using System.Collections.Generic;
   using System.Linq;
   using System.Text;

   public class EntityData
   {
    #region Field Region
    public string ClassName;
    public int Strength;
    public int Dexterity;
    public int Cunning;
    public int Willpower;
    public int Magic;
    public int Constitution;
    public string HealthFormula;
    public string StaminaFormula;
    public string MagicFormula;
    #endregion
    #region Constructor Region
    private EntityData()
     {
    }
      #endregion
       #region Static Method Region
       public static void ToFile(string Classes)
    {
        string toString = EntityName + ", ";
        toString += Strength.ToString() + ", ";
        toString += Dexterity.ToString() + ", ";
                toString += Cunning.ToString() + ", ";
                toString += Willpower.ToString() + ", ";
        toString += Magic.ToString() + ", ";
                toString += Constitution.ToString() + ", ";
                toString += HealthFormula + ", ";
        toString += StaminaFormula + ", ";
                toString += MagicFormula + ", ";

    return toString;
     }
     public static EntityData FromFile(string Classes)
     {
        EntityData entity = new EntityData();
        return entity;
    }
    #endregion
    } 
```

我想提取文件“类”中的格式化数据并将其输入到相互关联的 EntityData.cs 变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T17:40:11.940

使用 json。它比 XML 短得多，因此，一旦你习惯了它，就会更容易阅读。

使用 JSON，您将能够在一个屏幕上查看整个角色，而使用 XML，您可能需要滚动 10 页。

至于什么是json以及如何处理，请看这篇文章：[JSON library for C#](https://stackoverflow.com/questions/1474377/json-library-for-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T00:04:19.753

我绝对建议将数据存储在 XML 文件中。它会给你更大的灵活性，并且更容易使用。

如果你想坚持当前的格式，你可以通过这种方式手动解析一行：

```
// input text
string input = "Name=Fighter, Strength = 10,Cunning = 4, Willpower = 2, Magic = 5, Constitution = 10, Health Formula = 250, Stamina Formula = 200, Magic Formula = 100";

// dictionary with values.. key => value
var dict = input.Split(',').Select(s2 => s2.Replace(" ", "")).ToDictionary(s => s.Substring(0, s.IndexOf('=')), s => s.Substring(s.IndexOf('=') + 1));

// retrieving single values
int willpower = int.Parse(dict["Willpower"]);
... 
```

# javascript - 将手风琴更改为 vbox 仅呈现第一个子项

> ID：13105065
> 
> 赞同：0
> 
> 时间：2012-10-27T23:22:31.617
> 
> 标签：javascript, layout, extjs, extjs4

最初这个面板有`accordion`布局。然后显示两个子面板。但是一旦我将其更改为 vbox，它就会显示第二个面板。但是里面没有树！

看图片。

![在此处输入图像描述](../Images/11d24f2d1dc6dae6bd419a929bc4a5f0.png)

### 相关代码

```
OurApp.online_tree_store = Ext.create('Ext.data.TreeStore', {
    root : {
        expanded : true,
        children : []
    }
});
OurApp.online_tree = Ext.create('Ext.tree.Panel', {
    store : OurApp.online_tree_store,
    title : 'Online',
    region: 'north',
    useArrows : true,
    rootVisible : false,
    listeners : {
        itemdblclick : contactitemdblclick
    }
});

/// Note: Offline tree is exactly the same as online tree.

Ext.create('Ext.panel.Panel', {
    closable : false,
    width : 300,
    maxWidth : 400,
    itemId : 'viewport-contacts',
    constrain : true,
    layout : 'accordion', // <--- layout changed to vbox or border
    region : 'west',
    hidden : true,
    border : true,
    defaults : {
        height : '50%', // <--- used for vbox
    },
    tbar : [{
        xtype : 'button',
        text : 'Sign out',
        iconCls : 'icon-disconnect',
        handler : function() {
        }
    }],
    items : [OurApp.online_tree, OurApp.offline_tree],
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:22:06.830

height: '50%' 应该是 flex: 1。

您还需要指定 align: 'stretch'

```
Ext.require('*');

Ext.onReady(function() {

    var panel = Ext.create('Ext.panel.Panel', {
        renderTo: document.body,
        width: 400,
        height: 400,
        layout: {
            type: 'vbox',
            align: 'stretch'
        },
        items: [{
            title: 'P1',
            flex: 1
        }, {
            title: 'P2',
            flex: 1
        }]
    });

}); 
```

# javascript - 将 xmlhttprequest 与 POST 一起使用会给出“意外的输入结束”

> ID：13105072
> 
> 赞同：2
> 
> 时间：2012-10-27T23:23:28.960
> 
> 标签：javascript

我正在尝试通过 POST 使用 xmlhttprequest，但它给了我错误“Uncaught SyntaxError: Unexpected end of input”任何想法我做错了什么？

```
xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
    if (xhr.readyState === 4 && xhr.status === 200) {
        console.log("saved data!");
    }
}

xhr.open("POST", "http://website.com/login.php", true);
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xhr.send("user=ben&pass=abcxyz"); 
```

# algorithm - 给定二叉树中的两个值，查找最不共同的祖先

> ID：13105077
> 
> 赞同：2
> 
> 时间：2012-10-27T23:25:16.243
> 
> 标签：algorithm, binary-tree, ancestor

我在一次编程面试中得到了这个问题。随意考虑如何回答它。

给你一个二叉树（不是二叉搜索树）的根节点，其中每个节点都包含一个整数值，并且没有值出现两次。您还获得了两个值`val1`and `val2`（可能在树中也可能不在树中。）如果两者都在树中，则返回包含这两个值的两个节点中最小共同祖先的节点。如果不是，则返回 null。

假设每个节点都可以访问左右子节点。您可以附加节点结构，但**不能**将父节点附加到每个节点。您的算法应该在小于 O(N^2) 的时间内运行，其中 N 是树中的节点数。

注意：虽然它类似于著名的最不常见祖先问题，但这一问题的局限性使其并不完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:45:48.390

我不明白你为什么会考虑 O(N ² )，除非我误解了这个问题。以下解决方案是前序遍历，因此每个节点最多访问一次：

```
struct node* visit(struct node* visited, int p, int q, struct node* sentinel) {
  if (!visited) return visited;
  if (visited->data == p || visited->data == q) {
    struct node* t;
    if ((t = visit(visited->left, p, q, visited))) return t;
    if ((t = visit(visited->right, p, q, visited))) return t;
    return sentinel;
  } else {
    struct node* left = visit(visited->left, p, q, visited);
    struct node* right = visit(visited->right, p, q, visited);
    if (left == visited) return right ? right : sentinel;
    if (right == visited) return left ? left : sentinel;
    return left ? left : right;
  }
}

struct node* lca(struct node* root, int val1, int val2) {
  return visit(root, val1, val2, 0);
} 
```

我想一些解释是有序的，但也许因为它只是一个脑筋急转弯，最好把代码留在那里，看看人们是怎么理解的。（而且我也没有彻底测试它，让它看起来更像是一次采访。）

这不是我在采访中使用过的问题，如果有人提出上述代码作为答案，我不确定我会做什么。但后来我一直不确定我会雇用自己。

# javascript - Javascript onclick 功能问题

> ID：13105078
> 
> 赞同：1
> 
> 时间：2012-10-27T23:25:25.823
> 
> 标签：javascript, onclick, click

我在引导程序中使用了一个弹出窗口，我希望它在用户单击屏幕上的其他任何位置时关闭。我的代码是这样的：

```
$('#popover').bind('click', function() {
    $(".popover").live('click', function(){ return false; });
    $(document).one("click", function() { 
        alert('click'); 
    });
}); 
```

问题是单击按钮会触发警报。出于某种原因，javascript 使用该点击来启动函数并触发其中的点击事件。我究竟做错了什么？

编辑：

这段代码不做任何事情：

```
$(".popover").live('clickoutside', function(){
        alert('click'); 
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:31:30.277

看看这些：

> *   [https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)
>     
>     
> *   [https://developer.mozilla.org/en-US/docs/DOM/event.stopImmediatePropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopImmediatePropagation)

如果您`.popover`在 inside `#popover`，则您将触发所有受影响元素的事件。

* * *

**注意：** jQuery`live`处于弃用过程中，请使用以下替代方案：

> *   [http://api.jquery.com/on/](http://api.jquery.com/on/)
>     
>     
> *   [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# javascript - 为什么 HTML5 样板文件将 Modernizer 放在 head 标签中？

> ID：13105085
> 
> 赞同：1
> 
> 时间：2012-10-27T23:26:09.030
> 
> 标签：javascript, html, hyperlink, html5boilerplate

如果您从 github查看当前的[HTML5 Boilerplate](https://github.com/h5bp/html5-boilerplate/blob/v4.0.1/index.html)
， 您会看到它们在 head 标签的底部包含modernizr，
而在 body 标签的底部包含其他 javascript 文件。
为什么要分开？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T23:40:32.823

从 Modernizr 文档中：

> 将脚本标签放在 HTML 的（头）中。为了获得最佳性能，您应该在样式表引用之后让它们跟随。我们建议将 Modernizr 放在头部的原因有两个：HTML5 Shiv（在 IE 中启用 HTML5 元素）必须在 (body) 之前执行，并且如果您使用 Modernizr 添加的任何 CSS 类，您我想防止FOUC。

# html - 在页脚上方制作一个固定栏

> ID：13105086
> 
> 赞同：-1
> 
> 时间：2012-10-27T23:26:23.123
> 
> 标签：html, css

我想在页脚上方做一个固定栏，上面写着：“这个网站处于测试阶段。请将反馈发送到 info@blah.com。”

我是 CSS 新手，正在为此苦苦挣扎。

这是我的页脚 CSS：

```
#footer {
  min-height: 60px;
  padding-left: 20px;
  padding-right: 20px;
  background-color: #000000;
  background-image: -moz-linear-gradient(top, #4d4d4d, #333333);
  background-image: -ms-linear-gradient(top, #4d4d4d, #333333);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#4d4d4d), to(#333333));
  background-image: -webkit-linear-gradient(top, #4d4d4d, #333333);
  background-image: -o-linear-gradient(top, #4d4d4d, #333333);
  background-image: linear-gradient(top, #4d4d4d, #333333);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#4d4d4d', endColorstr='#333333', GradientType=0);
  background-color: #424242;
  background-image: -moz-linear-gradient(top, #4d4d4d, #333333);
  background-image: -ms-linear-gradient(top, #4d4d4d, #333333);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#4d4d4d), to(#333333));
  background-image: -webkit-linear-gradient(top, #4d4d4d, #333333);
  background-image: -o-linear-gradient(top, #4d4d4d, #333333);
  background-image: linear-gradient(top, #4d4d4d, #333333);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#4d4d4d', endColorstr='#333333', GradientType=0);
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  -webkit-box-shadow: 0 1px 3px rgba(0,0,0,.25), inset 0 -1px 0 rgba(0,0,0,.1);
  -moz-box-shadow: 0 1px 3px rgba(0,0,0,.25), inset 0 -1px 0 rgba(0,0,0,.1);
  box-shadow: 0 1px 3px rgba(0,0,0,.25), inset 0 -1px 0 rgba(0,0,0,.1);
  -webkit-box-shadow: 0 1px 3px rgba(0,0,0,.25), inset 0 -1px 0 rgba(0,0,0,.1);
  -moz-box-shadow: 0 1px 3px rgba(0,0,0,.25), inset 0 -1px 0 rgba(0,0,0,.1);
  box-shadow: 0 1px 3px rgba(0,0,0,.25), inset 0 -1px 0 rgba(0,0,0,.1);
  height: 40px;
}
#footer a {
  color: rgb(153, 153, 153);
  text-decoration: none;
}
#footer span {
  font-size: 10pt;
  margin-left: .5em;
  color: rgb(153, 153, 153);
  text-decoration: none;
  text-shadow: 0px 0px 0px
}
#footer-inner {
  padding: 20px 0;
} 
```

基本上我只想要它上面的一个小条，它固定在页脚上，并且不会破坏页脚的格式。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:44:43.813

由于您没有提及您的 HTML 标记，因此我从头开始创建了一些内容。

您可以将位置设置`#footer`为*相对*，然后创建一个元素，该元素以负值*绝对*`top`定位。所以它会一直停留在页脚的顶部，不会影响页脚本身，也不会影响上面的内容：

**HTML**

```
<footer id="footer">
    <aside>This site is beta</aside>
    Footer
</footer>​ 
```

**CSS**

```
#footer {
    position: relative;
}

#footer > aside {
    position: absolute;
    left: 0;
    top: -50px;
    width: 120px;
    height: 40px;
} 
```

这是[关于 jsfiddle 的演示](http://jsfiddle.net/2uRba/)。

# php - 在多个 HTML 页面中包含相同的 DIV

> ID：13105089
> 
> 赞同：2
> 
> 时间：2012-10-27T23:26:53.773
> 
> 标签：php, jquery, html, css, iframe

下面是一个 HTML 页面的图像，我需要一些建议。

大方块是一个 AJAX DIV，当用户更改页面时会重新加载。（工作正常）。

较小的黑色矩形是一个包含在许多页面中的 DIV，它有几个不同的状态。无论用户在哪个页面上，我都想保持当前状态，并且我正在努力弄清楚如何包含它。

我一直在使用 PHP 包含，但它每次都会重新加载代码 - 例如：当前状态丢失。

我正在考虑使用 iframe，但我不确定我是否可以 iframe 到 DIV，然后我遇到了红色方块的附加问题，当进行某些选择时，它会从较小的黑色矩形中弹出。当页面上的红色方块后面有其他信息时，不确定我是否可以将所有这些都包含在 iframe 中 - 例如：iframe 需要与其他信息重叠......

有什么建议吗？如果需要，我可以解释更多/更好。

谢谢

![在此处输入图像描述](../Images/123a860eb47103a0556f0e05519a9b4d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:02:01.167

以下其中一项可能适合您的需求：

*   本地存储：http : [//www.joelennon.ie/2011/02/11/basics-of-html5-local-storage/](http://www.joelennon.ie/2011/02/11/basics-of-html5-local-storage/)
*   PHP 会话：[http ://www.php.net/manual/en/session.examples.basic.php](http://www.php.net/manual/en/session.examples.basic.php)
*   PHP Cookies： http: [//php.net/manual/en/features.cookies.php](http://php.net/manual/en/features.cookies.php)

这些技术使您可以简单地保存数据。假设您已经命名了不同的州。以某种方式保存该字符串，并阅读它以决定在哪种状态下显示该黑框。

# javascript - 在 CSS 中，是否可以定位由索引号标识的类属性？

> ID：13105091
> 
> 赞同：9
> 
> 时间：2012-10-27T23:27:05.597
> 
> 标签：javascript, html, css, dom, css-selectors

我试图通过其索引或迭代来定位一个类元素（在 DOM 中出现不止一次），严格使用 CSS。

我知道实现此目的的几种不同方法：我可以将元素放入数组中并检索所述元素的特定索引（Javascript）。我可以用#ID 标记我尝试定位的元素。我可以通过指定属性 ( `.element[href="link"]`) 来优化目标元素。伪类`:first-child`，`:last-child`仅针对该（父）元素的子元素（Duh！）。

示例：我`.class`在我的 DOM 中出现了 5 次，我想影响该元素**第三**次迭代的 CSS 属性。`.class`

我希望有一个伪类，`.element:index-3.`可能有一些东西可以让你这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T00:03:24.340

如果我理解正确，您希望使用内容“我！”来设置元素的样式。在这个例子中：

```
<body>
  <p>Not me.</p>
  <p class="me">Not me.</p>
  <div><p class="me">Not me.</p></div>
  <p class="me">Me!</p>
  <div><div><p class="me">Not me.</p></div></div>
  <p class="me">Not me.</p>
</body> 
```

~~这应该是可能的~~在某些情况下（见下文），伪类是可能的[`:nth-of-type`](http://www.w3.org/TR/css3-selectors/#nth-of-type-pseudo)：

```
.me:nth-of-type(3) {color:red;} 
```

* * *

正如 ScottS 在评论中指出的那样，这只有在所有类都在同一元素类型上时才有可能（例如`p`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T02:09:34.823

*我`.class`在我的 DOM 中出现了 5 次，我想影响该`.class`元素第三次迭代的 CSS 属性。*

我将其读作“`.class`在整个 DOM 中使用的目标第三个元素”，例如：

```
<h1 class="class">...</h1>                    #1
<div>
  <ul class="class">                          #2
    <li>...</li>
    <li class="class">...</li>                #3, target this one!
    <li>...</li>
  </ul>
  <div class="class">...</div>                #4
</div>
<p class="class">...</div>                    #5 
```

任何`:nth-`伪类表示法都表示一个元素，该元素由匹配特定条件的*兄弟姐妹数量限定（*[在它之前](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)`:nth-child(an+b)` [有`an+b-1`](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)兄弟姐妹等）。

CSS 规范（包括[选择器级别 4 草案](http://dev.w3.org/csswg/selectors4/#structural-pseudos)）不提供通过同级上下文之外的索引来限定元素的方法（即只能遍历单个节点，而不是整个 DOM 树）。这背后有一个性能原因（遍历 DOM 很困难，想象一下异步内容更新，这不是渲染引擎的工作方式）；但类似的东西也`:nth-element-ever(3)`将是一个*非常非常任意的标准，并且通过引入另一个**完全*意味着它的作用的类会更好地定位，最好是在代码生成期间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T00:50:22.977

如果元素没有被放置为相邻的兄弟元素，或者至少在相同的“范围”（容器元素）中，那么您将无法找出“相关”元素的存在、迭代或实际上什么都没有。

你最好的办法是使用一个非常丑陋的解决方案，基于元素是兄弟姐妹的假设，这可能看起来像这样： li.class:first-child + li + li { color: black; } 找到第三次迭代，

或者只是使用一些 JS 来计算实例的出现并将其作为特殊类插入，例如“gimme-css-here”。

# android - Android SDK Manager 不加载包

> ID：13105094
> 
> 赞同：0
> 
> 时间：2012-10-27T23:27:14.450
> 
> 标签：android, eclipse

我的 android sdk 管理器没有做它应该做的事情。它不加载任何平台或任何东西。我的 AVD 管理器中有平台（2.2 和 3.0）。我想通过管理器下载新平台..

[http://sphotos-g.ak.fbcdn.net/hphotos-ak-ash4/c46.0.403.403/p403x403/285633_483768121663593_628178710_n.jpg](http://sphotos-g.ak.fbcdn.net/hphotos-ak-ash4/c46.0.403.403/p403x403/285633_483768121663593_628178710_n.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:43:37.110

尝试更新 SDK 工具，我可以看到该软件包在您的列表中可用。如果这没有帮助，那么您可能会发现这些链接很有帮助：

[Windows - Android SDK 管理器未列出要安装的任何平台或软件包](https://stackoverflow.com/questions/11519383/windows-android-sdk-manager-not-listing-any-platforms-or-packages-to-install)

[Android SDK 和 AVD Manager 未列出 SDK 平台](https://stackoverflow.com/questions/3267060/android-sdk-and-avd-manager-not-listing-sdk-platforms)

[Android SDK 管理器不显示要安装的包](https://stackoverflow.com/questions/11314359/android-sdk-manager-does-not-show-packages-to-be-installed)

# iphone - 当 UITextField 在 TableView 单元内时如何隐藏键盘

> ID：13105098
> 
> 赞同：0
> 
> 时间：2012-10-27T23:27:53.717
> 
> 标签：iphone, uitableview, uitextfield

我得到的是一个 TableView，它使用 Prototype Cells 和一个提供数据源的数组 - 根据数据源，我使用某个 Table View Cell 标识符来构建单元格。（如果我在这里做错了什么，请纠正我 - 我是 iOS 开发的新手，并且正在尽可能地寻找最佳实践:)

无论如何，我在 Storyboard 中创建的 Table View Cell 之一有一个 UITextField。我在 Storyboard GUI 中设置了 Return Key 设置为“Done”并选中了“Auto-enable Return Key”。然后我进入我的控制器并使用以下代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
}
- (void)textFieldDidEndEditing:(UITextField *)textField{
    [textField resignFirstResponder];
    NSLog(@"finished change...");
} 
```

我还有一个链接到我的控制器的“Editing Did End”事件，该事件被编码为输出到 NSLog。

当我点击 Return 或 Done 时，日志会输出放置在 textFieldDidEndEditing 中的文本和我的事件函数。但是，当我选择表格单元格或开始移动滑块时，什么也没有发生 - 这意味着键盘仍在屏幕上。

有没有办法解决这个问题？

此外，虽然我一直在研究这个原型细胞，但对于我需要的东西来说似乎相当费力。基本上我所需要的只是一个允许用户编辑一些设置的基本表，所以会有：

2 个可编辑的文本字段、1 个滑块、2 个开关

我将所有这些都放在了静态 UITableView 中，但它没有出现 - 这是由于对需要 UITableViewController 的此类表的限制。有没有解决的办法？

很抱歉这篇长文 - 我仍然在关注 iOS 开发，但到目前为止我很享受它:)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T23:39:17.590

我通常会随身携带一个 ivar 来跟踪。它让我可以根据各种事件方便地关闭键盘：

```
@interface ViewController () {
   UITextField *_textFieldBeingEdited;
} 
@end

- (void)textFieldDidBeginEditing:(UITextField *)textField {
   _textFieldBeingEdited = textField;
}

- (void)textFieldDidEndEditing:(UITextField *)textField{
   // no need to resignFirstResponder here.
   _textFieldBeingEdited = nil;
}

- (void)tableView:(UITableView *)tableView 
          didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
   if (_textFieldBeingEdited) {
     [_textFieldBeingEdited resignFirstResponder];
   }
   ...
} 
```

# c++ - 如何存储使用折线函数创建的对象？

> ID：13105099
> 
> 赞同：0
> 
> 时间：2012-10-27T23:28:01.230
> 
> 标签：c++, winapi

我正在使用折线函数在 C++ 中绘制三角形。我在将三角形存储在结构中时遇到问题（以便在窗口失效时重新绘制它们）

```
#define MAX_OBJECTS 10000

typedef struct
{
unsigned int topCornerX;
unsigned int topCornerY;
unsigned int RightX;
unsigned int RightY;
unsigned int LeftX;
unsigned int LeftY;

}Triangles;

int mouse_down_x = 0;
int mouse_down_y = 0;

Triangles triangleList[MAX_OBJECTS];
Triangles temp_tri;
int current_tri_count = 0;
int t = 0;

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
int wmId, wmEvent;
PAINTSTRUCT ps;
HDC hdc;
POINT Pt[4];
POINT pT[4]; 
```

我正在使用这个来绘制临时三角形

```
Pt[0].x = temp_tri.topCornerX;  Pt[0].y = temp_tri.topCornerY;
Pt[1].x = temp_tri.LeftX; Pt[1].y = temp_tri.LeftY;
Pt[2].x = temp_tri.RightX; Pt[2].y = temp_tri.RightY;
Pt[3].x = temp_tri.topCornerX; Pt[3].y = temp_tri.topCornerY; 
```

这个是重绘所有以前的三角形，但是它不起作用

```
pT[0].x = triangleList[t].topCornerX;
pT[0].y = triangleList[t].topCornerX;
pT[1].x = triangleList[t].LeftX;
pT[1].y = triangleList[t].LeftY;
pT[2].x = triangleList[t].RightX;
pT[2].y = triangleList[t].RightY;
pT[3].x = triangleList[t].topCornerX;
pT[3].y = triangleList[t].topCornerY;

case WM_PAINT:
    hdc = BeginPaint(hWnd, &ps);

Polyline(hdc, Pt, 4); // using this one to draw the temp triangle as the object is drawn by user

while (t < current_tri_count) // should be redrawing the old ones
    {
        Polyline(hdc,pT,4);
        t++;

    }

case WM_LBUTTONDOWN:

mouse_down_x = LOWORD(lParam);
        mouse_down_y = HIWORD(lParam);

        temp_tri.topCornerX = mouse_down_x;
        temp_tri.topCornerY = mouse_down_y;

        mouse_down = true;

break;

case WM_MOUSEMOVE:

if(mouse_down)
        {
            temp_tri.LeftX = LOWORD(lParam);
            temp_tri.LeftY = HIWORD(lParam);
            temp_tri.RightX = LOWORD(lParam) + 90;
            temp_tri.RightY = HIWORD(lParam) + 90;
            mouse_down = true;

        }
        InvalidateRect(hWnd, NULL, true);

break;

case WM_LBUTTONUP:

                          temp_tri.LeftX = LOWORD(lParam);
        temp_tri.LeftY = HIWORD(lParam);
        temp_tri.RightX = LOWORD(lParam) + 90;
        temp_tri.RightY = HIWORD(lParam) + 90;

        triangleList[current_tri_count] = temp_tri;

        current_tri_count ++;
        mouse_down = false;

break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:32:38.250

在其中一行中，您有：

```
pT[0].x = triangleList[t].topCornerX;
pT[0].y = triangleList[t].topCornerX; 
```

我认为应该是：

```
pT[0].x = triangleList[t].topCornerX;
pT[0].y = triangleList[t].topCornerY; // <- Y 
```

# android - 在 MapView 顶部重叠大于屏幕图像

> ID：13105101
> 
> 赞同：0
> 
> 时间：2012-10-27T23:28:13.477
> 
> 标签：android, imageview

我有一个中间有透明圆圈的大图像。我想将它重叠在 MapView 上，以便您可以看到地图的圆圈。该图像比任何可能的设备屏幕都大，因此它在所有尺寸上看起来基本相同。图像中的圆角很复杂，这就是我需要这样做的原因。

如何定位 ImageView 使其部分位于屏幕外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T15:17:34.617

我怀疑您想要达到的目标与您描述的不完全一样。但是，如果是这种情况，@Daniel Fekete 发布的解决方案是最好的方法。对于该解决方案，我只是补充说，您还可以在定义`ImageView`的同一布局文件中定义`MapView`，而不是以编程方式添加视图。当然`ImageView`应该在 之后定义，`MapView`以便将其绘制在地图上。

如果您需要更灵活的解决方案，`ImageView`可以与地图对齐移动，或者让它覆盖地图，但不覆盖您添加到地图的其他叠加项目，那么您可以使用以下方法：

创建一个覆盖（覆盖）您想要覆盖的地图部分的覆盖。在这个 oevrlay 的 onDraw() 中，只需绘制满足您的蒙版要求（形状、颜色和不透明度）的东西。

如果您想让其他叠加项目可见，则需要在将遮罩映射的叠加添加到 mapView.getOverlays.add() 之后添加这些项目的叠加。

好好享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:51:35.450

使透明圆圈成为[Ninepatch](http://developer.android.com/tools/help/draw9patch.html)，例如：`http://i.imgur.com/8wmrQ.png`

将其保存到`res/drawable-hdpi/mask.9.png`

比你可以用它

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    RelativeLayout rl = new RelativeLayout(this);
    MapView mapView = new MapView(this, "apikey");
    mapView.setClickable(true);
    rl.addView(mapView);

    ImageView imageView = new ImageView(this);
    imageView.setImageResource(R.drawable.mask);
    imageView.setScaleType(ScaleType.FIT_XY);
    rl.addView(imageView, RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);

    setContentView(rl);
} 
```

# excel - 处理 CSV 数据

> ID：13105105
> 
> 赞同：4
> 
> 时间：2012-10-27T23:28:35.693
> 
> 标签：excel, csv

我最近被要求获取一个如下所示的 .csv 文件：

![在此处输入图像描述](../Images/c9db4a05de66c80351edd8fa677161cb.png)

变成这样：

![在此处输入图像描述](../Images/692e1fb4e8a159060332009a22c2354d.png)

请记住，由于每次用户登录/注销时都会创建一个新行，因此会有数百甚至数千行，并且不仅仅是两个用户。我的第一个想法是将 .csv 文件加载到 MySQL 中，然后对其运行查询。但是，我真的不想在将用于此的机器上安装 MySQL。

我可以为 Ecxel/Open Office 中的每个代理手动执行此操作，但由于几乎没有出错的余地，而且有很多行要执行此操作，我想自动化该过程。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:00:09.437

这个单线仅依赖`awk`,`date`和 来回转换为时间戳：

```
awk 'BEGIN{FS=OFS=","}NR>1{au=$1 "," $2;t=$4; \
 "date -u -d \""t"\"  +%s"|getline ts; sum[au]+=ts;}END \
 {for (a in sum){"date -u -d \"@"sum[a]"\" +%T"|getline h; print a,h}}' test.csv 
```

有这样的 test.csv：

```
Agent,Username,Project,Duration
AAA,aaa,NBM,02:09:06
AAA,aaa,NBM,00:15:01
BBB,bbb,NBM,04:14:24
AAA,aaa,NBM,00:00:16
BBB,bbb,NBM,00:45:19
CCC,ccc,NDB,00:00:01 
```

结果是：

```
CCC,ccc,00:00:01
BBB,bbb,04:59:43
AAA,aaa,02:24:23 
```

您可以使用它稍加调整来从额外的列中提取日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:25:01.783

让我给你一个例子，以防你决定使用 SQLite。您没有指定语言，但我将使用 Python，因为它可以作为伪代码读取。这部分创建你的 sqlite 文件：

```
import csv
import sqlite3

con = sqlite3.Connection('my_sqlite_file.sqlite')
con.text_factory = str
cur = con.cursor()
cur.execute('CREATE TABLE "mytable" ("field1" varchar, \
    "field2" varchar, "field3" varchar);') 
```

你使用命令：

```
cur.executemany('INSERT INTO stackoverflow VALUES (?, ?, ?)', list_of_values) 
```

从 csv 文件中读取行后，在数据库中插入行。请注意，我们只在数据库中创建了三个字段，因此我们只从您的`list_of_values`. 这就是我们使用`(?, ?, ?)`.

# mysql - 尝试为 MySQL 查询创建索引

> ID：13105118
> 
> 赞同：1
> 
> 时间：2012-10-27T23:30:42.263
> 
> 标签：mysql

我在 MySQL 和一般数据库方面还没有很多经验，尽管无论如何我都会着手开发大型 Web 应用程序。以下是我的应用程序的搜索查询，允许用户搜索其他用户。现在这个查询的主表`dev_Profile`有大约 14K 行，查询相当慢（运行返回最大集合的查询大约需要 5 秒）。我确信这里可以进行许多优化调整，但是创建索引会是这里最基本的第一步吗？我一直在尝试自己学习索引，以及如何为具有多个连接的查询创建索引，但我只是不太了解它。我希望在我的实际查询的上下文中查看事物可能更具教育意义。

这是基本查询：

```
SELECT 
  dev_Profile.ID AS pid,
  dev_Profile.Name AS username,
  IF(TIMESTAMPDIFF(SECOND, st1.lastActivityTime, UTC_TIMESTAMP()) > 300 OR ISNULL(TIMESTAMPDIFF(SECOND, st1.lastActivityTime, UTC_TIMESTAMP())), 0, 1) AS online, 
  FLOOR(DATEDIFF(CURRENT_DATE, dev_Profile.DOB) / 365) AS age,
  IF(dev_Profile.GenderID=1, 'M', 'F') AS sex, 
  IF(ISNULL(st2.Description), 0, st2.Description) AS relStatus, 
  st3.Name AS country, 
  IF(dev_Profile.RegionID > 0, st4.Name, 0) AS region, 
  IF(dev_Profile.CityID > 0, st5.Name, 0) AS city, 
  IF(ISNULL(st6.filename), 0, IF(st6.isApproved=1 AND st6.isDiscarded=0 AND st6.isModerated=1 AND st6.isRejected=0 AND isSizeAvatar=1, 1, 0)) AS hasPhoto, 
  IF(ISNULL(st6.filename), IF(dev_Profile.GenderID=1, 'http://www.mysite.com/lib/images/avatar-male-small.png', 'http://www.mysite.com/lib/images/avatar-female-small.png'), IF(st6.isApproved=1 AND st6.isDiscarded=0 AND st6.isModerated=1 AND st6.isRejected=0 AND isSizeAvatar=1, CONCAT('http://www.mysite.com/uploads/', st6.filename), IF(dev_Profile.GenderID=1, 'http://www.mysite.com/lib/images/avatar-male-small.png', 'http://www.mysite.com/lib/images/avatar-female-small.png'))) AS photo,
  IF(ISNULL(dev_Profile.StatusMessage), IF(ISNULL(dev_Profile.AboutMe), IF(ISNULL(st7.AboutMyMatch), 0, st7.AboutMyMatch), dev_Profile.AboutMe), dev_Profile.StatusMessage) AS text
FROM 
  dev_Profile 
  LEFT JOIN dev_User AS st1 ON st1.ID = dev_Profile.UserID 
  LEFT JOIN dev_ProfileRelationshipStatus AS st2 ON st2.ID = dev_Profile.ProfileRelationshipStatusID 
  LEFT JOIN Country AS st3 ON st3.ID = dev_Profile.CountryID 
  LEFT JOIN Region AS st4 ON st4.ID = dev_Profile.RegionID 
  LEFT JOIN City AS st5 ON st5.ID = dev_Profile.CityID 
  LEFT JOIN dev_Photos AS st6 ON st6.ID = dev_Profile.PhotoAvatarID 
  LEFT JOIN dev_DesiredMatch AS st7 ON st7.ProfileID = dev_Profile.ID
WHERE 
  dev_Profile.ID != 11222 /* $_SESSION['ProfileID'] */
  AND st1.EmailVerified = 'true'
  AND st1.accountIsActive=1
ORDER BY st1.lastActivityTime DESC LIMIT 900; 
```

这个查询的速度（太慢了，如你所见）：

```
900 rows in set (5.20 sec) 
```

此查询的解释：

```
+----+-------------+-------------+--------+---------------+---------+---------+---------------------------------------------+-------+----------------------------------------------+
| id | select_type | table       | type   | possible_keys | key     | key_len | ref                                         | rows  | Extra                                        |
+----+-------------+-------------+--------+---------------+---------+---------+---------------------------------------------+-------+----------------------------------------------+
|  1 | SIMPLE      | dev_Profile | range  | PRIMARY       | PRIMARY | 4       | NULL                                        | 13503 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | st2         | eq_ref | PRIMARY       | PRIMARY | 1       | syk.dev_Profile.ProfileRelationshipStatusID |     1 |                                              |
|  1 | SIMPLE      | st3         | eq_ref | PRIMARY       | PRIMARY | 4       | syk.dev_Profile.CountryID                   |     1 |                                              |
|  1 | SIMPLE      | st4         | eq_ref | PRIMARY       | PRIMARY | 4       | syk.dev_Profile.RegionID                    |     1 |                                              |
|  1 | SIMPLE      | st5         | eq_ref | PRIMARY       | PRIMARY | 4       | syk.dev_Profile.CityID                      |     1 |                                              |
|  1 | SIMPLE      | st1         | eq_ref | PRIMARY       | PRIMARY | 4       | syk.dev_Profile.UserID                      |     1 | Using where                                  |
|  1 | SIMPLE      | st6         | eq_ref | PRIMARY       | PRIMARY | 4       | syk.dev_Profile.PhotoAvatarID               |     1 |                                              |
|  1 | SIMPLE      | st7         | ALL    | NULL          | NULL    | NULL    | NULL                                        |   442 |                                              |
+----+-------------+-------------+--------+---------------+---------+---------+---------------------------------------------+-------+----------------------------------------------+ 
```

如果用户的搜索包含其他条件，则查询也可能包含更多`WHERE`和子句。`HAVING`附加条款是（使用示例值设置）：

```
AND dev_Profile.GenderID = 1 
AND dev_Profile.CountryID=127
AND dev_Profile.RegionID=36
AND dev_Profile.CityID=601
HAVING (age >= 18 AND age <= 50)
AND online=1 
AND hasPhoto=1 
```

这是使用所有可能的`WHERE`和`HAVING`子句的查询的解释：

```
+----+-------------+-------------+--------+---------------+---------+---------+---------------------------------------------+-------+----------------------------------------------+
| id | select_type | table       | type   | possible_keys | key     | key_len | ref                                         | rows  | Extra                                        |
+----+-------------+-------------+--------+---------------+---------+---------+---------------------------------------------+-------+----------------------------------------------+
|  1 | SIMPLE      | dev_Profile | range  | PRIMARY       | PRIMARY | 4       | NULL                                        | 13503 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | st2         | eq_ref | PRIMARY       | PRIMARY | 1       | syk.dev_Profile.ProfileRelationshipStatusID |     1 |                                              |
|  1 | SIMPLE      | st3         | const  | PRIMARY       | PRIMARY | 4       | const                                       |     1 |                                              |
|  1 | SIMPLE      | st4         | const  | PRIMARY       | PRIMARY | 4       | const                                       |     1 |                                              |
|  1 | SIMPLE      | st5         | const  | PRIMARY       | PRIMARY | 4       | const                                       |     1 |                                              |
|  1 | SIMPLE      | st1         | eq_ref | PRIMARY       | PRIMARY | 4       | syk.dev_Profile.UserID                      |     1 | Using where                                  |
|  1 | SIMPLE      | st6         | eq_ref | PRIMARY       | PRIMARY | 4       | syk.dev_Profile.PhotoAvatarID               |     1 |                                              |
|  1 | SIMPLE      | st7         | ALL    | NULL          | NULL    | NULL    | NULL                                        |   442 |                                              |
+----+-------------+-------------+--------+---------------+---------+---------+---------------------------------------------+-------+----------------------------------------------+ 
```

我什至不确定这是 TMI 还是不够。

索引是在这里采取的正确步骤吗？如果是这样，有人可以让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:13:38.143

正确的步骤是加快您的查询！

对于您的原始查询，我会说您最终对表进行了表扫描，`dev_Profile`因为它没有可索引的条件。对于修改后的查询，它取决于列中允许的不同值的数量 - 如果可能有重复，那么索引可能不会被使用，因为无论如何它必须获取表才能完成查询的其余部分。

我已经正确阅读了您的计划，然后您已经在索引的不可为空的列上加入了所有其他表（st7 除外，由于某种原因，它似乎没有使用索引）。因此，您似乎不应该使用左连接。这将允许`(EmailVerified, accountIsActive, lastActivityTime)`在 table上使用索引`st1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T00:15:26.073

应该使用与频繁查询相关的索引。索引只会稍微降低写入性能，同时极大地加快搜索速度。根据经验，对象自己的 ID 应该作为 PRIMARY 键进行索引，并且最好在查询中始终一起出现的列组上建立索引。我认为您应该索引 GenderID、CountryID、RegionID、CityID、age、online 和 hasPhoto。如果您认为未使用正确的索引，则应至少提供 dev_Profile 的架构。

请注意，国家/地区/城市 ID 可能代表冗余信息。您的设计可能不是最理想的。

注意 2：您在 SELECT 中执行了大量的应用程序逻辑。SQL 不是为这些大量的 IF-in-IF-in-IF 子句而设计的，并且由于 URL 的原因，查询返回的表比如果您只请求相关字段（即文件名、genderID 等）时返回的表大得多上）。有时，查询必须返回这些精确的解释值，通常情况下，您最好（在速度和可读性方面）将这些处理步骤编码到您的应用程序代码中。

# php - 自动捐赠脚本，无法显示价格。

> ID：13105119
> 
> 赞同：2
> 
> 时间：2012-10-27T23:30:44.110
> 
> 标签：php

我正在尝试创建一个自动捐赠脚本，但我遇到了最后一个错误。我想显示用户能够以一定数量的美元获得的点数，但它不会显示 x 点数所花费的美元数量。我将在下面发布两个代码。

```
$donation_types = array(
1 => 100,
5 => 500,
10 => 1000,
15 => 1500,
25 => 2500,
50 => 5000,
100 => 10000
); 
```

// 这是一定数量的积分花费的美元金额，例如：100$ 将获得 10000 积分。

```
<?php
foreach ($donation_types as $usd_amount => $dp_amount) {
?>

<option value="<?php echo $usd_amount; ?>">&#36;<?php echo sprintf('%.2n', $usd_amount); ?> - <?php echo number_format($dp_amount, 0); ?> DP</option> 
```

// 这是我希望显示点数的价格的地方。正如您在下面看到的，它不显示价格，它只花费美元符号。

我不允许发布图片，但这是图片的链接：http: [//puu.sh/1jttY](http://puu.sh/1jttY)

有解决方案吗？

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:42:04.873

替换`sprintf('%.2n', $usd_amount)`为`sprintf('%.2f', $usd_amount)`或其他模板

# java - Android将变量发布到drupal

> ID：13105120
> 
> 赞同：0
> 
> 时间：2012-10-27T23:31:04.100
> 
> 标签：java, android, iphone, cocoa

嗨，我正在为 iOS 和 Android 编写一个应用程序来与 druapl 站点交互。我正在尝试允许用户登录网站，然后将成功登录的数据保存在应用程序的首选项中。下面我能够在 Cocoa 中成功地做我想做的事情，但我无法让它在 Java 中工作。两个代码片段都在下面。任何有关java的帮助将不胜感激。

我只是没有从java得到任何响应，当它应该是一个长的JSON响应时，响应作为一个空字符串返回。

**可可登录（工作）**

```
NSURL *url = [NSURL URLWithString:@"http://examplesite/api/rest/user/login"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
NSData *requestBody = [[NSString stringWithFormat:@"username=%@&password=%@",[userField text],[passField text]] dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPBody:requestBody];
NSURLResponse *response = NULL;
NSError *requestError = NULL;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];
NSString *responseString = [[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] autorelease]; 
```

**Java 登录（不工作）**

```
class loginTask extends AsyncTask<Void, Void, Void> {   
    HttpResponse response;
    public loginTask() {

    }

    @Override
    protected Void doInBackground(Void... arg0) {
        HttpClient client = new DefaultHttpClient();  
        HttpPost post = new HttpPost("http://examplesite/api/rest/user/login");
        try {
            post.setHeader("Accept", "application/json");
            post.setHeader("Content-Type", "application/x-www-form-urlencoded");
            List<NameValuePair> formparams = new ArrayList<NameValuePair>();
            formparams.add(new BasicNameValuePair("username", "admin"));
            formparams.add(new BasicNameValuePair("password", "password"));
            post.setEntity(new UrlEncodedFormEntity (formparams));
            response = client.execute(post);  
        } catch (ClientProtocolException e) {

        } catch (IOException e) {

        }
        return null;
    }
    @Override 
    protected void onPostExecute(Void unused) {
        //TODO finish the activity
        try {
            Toast.makeText(Login.this, EntityUtils.toString(response.getEntity(), "UTF-8"), Toast.LENGTH_SHORT).show();
        } catch (ParseException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:15:08.200

有这样的东西。Drupal iOS sdk 和 dandy for android

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:48:11.677

查看您列出的示例，您没有在 iOS 和 Android 上提交相同的有效负载。

在 iOS 上，您正确地使用 POST 表单数据`username=foo&password=bar`，但在 android 上，您要求使用字符串`JSONObject`表示`{ 'username': 'foo', 'password':'bar' }`。

而不是使用 JSONObject 你应该检查[URLEncodedUtils](http://developer.android.com/reference/org/apache/http/client/utils/URLEncodedUtils.html)，特别是`format`方法。

# java - 在java中循环直到用户按下回车

> ID：13105122
> 
> 赞同：4
> 
> 时间：2012-10-27T23:31:19.080
> 
> 标签：java

我如何在java中循环，直到用户按下输入，然后停止？

就像是

```
while(System.in != ""){
  do x;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-27T23:39:44.353

尝试以下操作：

```
while (System.in.available() == 0) {
   // Do whatever you want
} 
```

编辑：

如果您想循环直到用户按下回车键，您将需要类似以下的内容（未经测试，但应该足够提示）：

```
boolean blankLine = true;
loop:
while (true) {
    int available;
    while ((available = System.in.available()) == 0) {
        // Do something
    }
    do {
         switch (System.in.read()) {
             default:
                 blankLine = false;
                 break;
             case '\n':
                 if (blankLine)
                     break loop;
                 blankLine = true;
                 break;
         }
    } while (--available > 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-17T18:10:59.397

扫描仪扫描仪=新扫描仪（System.in）；

而 (scanner.nextLine().length() != 0){ ..... }

使用 nextLine() 而不是 next()

# c++ - 为什么 Visual Studio 以两种不同的方式强制 StackNode？

> ID：13105124
> 
> 赞同：0
> 
> 时间：2012-10-27T23:31:31.390
> 
> 标签：c++, visual-studio-2010, data-structures, linked-list, stack

所以我最近写了一个基于链表的 Stack ADT 实现。但是，我不太确定为什么堆栈节点的声明方式之间存在一些差异。编译器非常生气，直到我为某些函数以某种方式编写它们时才会编译。我非常好奇为什么会这样。

这是编译器需要两种不同格式的两种不同方法。

这是编译器想要的我的析构函数`StackNode *temp`。

```
template <typename DataType>
StackLinked<DataType>::~StackLinked() {
   StackNode *temp;
   while (top != 0) {
       temp = top;
       top = top->next;
       delete temp;
   }
} 
```

这是编译器想要的赋值运算符重载`StackNode<DataType> *temp`。

```
template <typename DataType>
StackLinked<DataType>& StackLinked<DataType>::operator=(const StackLinked& other) {
    if (this != &other) {
        StackNode<DataType> *newNode, *current, *last;

        if (top != 0) {
           StackNode<DataType> *temp;
           while (top != 0) {
               temp = top;
               top -> top->next;
               delete temp;
           }
        }

        if (other.top == 0) {
            top = 0;
        }
        else {
            current = other.top;
            top = new StackNode<DataType>;
            top->dataItem = current->dataItem;
            top->next = 0;
            last = top;
            current = current->next;

            while (current != 0) {
                newNode = new StackNode<DataType>;
                newNode->dataItem = current->dataItem;
                newNode->next = 0;
                last-> next = newNode;
                last = newNode;
                current = current->next;
            }
        }
    }
    return *this;
} 
```

我不知道为什么会这样，但未知的事情困扰着我。

注意：我的 StackNode 类是 StackLinked 类的内部类。

编辑：类声明：

```
#ifndef STACKARRAY_H
#define STACKARRAY_H

#include <stdexcept>
#include <iostream>

using namespace std;

#include "Stack.h"

template <typename DataType>
class StackLinked : public Stack<DataType> {

public:

StackLinked(int maxNumber = Stack<DataType>::MAX_STACK_SIZE);
StackLinked(const StackLinked& other);
StackLinked& operator=(const StackLinked& other);
~StackLinked();

void push(const DataType& newDataItem) throw (logic_error);
DataType pop() throw (logic_error);

void clear();

bool isEmpty() const;
bool isFull() const;

void showStructure() const;

private:
class StackNode {
  public:
StackNode(const DataType& nodeData, StackNode* nextPtr);
DataType dataItem;
StackNode* next;
};

StackNode* top;
};

#endif 
```

如果需要任何其他细节。就问吧！感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:42:58.993

从您显示的代码来看，`StackNode<DataType>`不正确，因为`StackNode`它不是类模板。

这让我觉得你有一个模板也被命名`StackNode`为编译器正在寻找的。去检查您的任何文件是否包含另一个版本的`StackNode`.

# jquery - CSS 导航列表——下一个链接选择器兄弟组合器

> ID：13105125
> 
> 赞同：5
> 
> 时间：2012-10-27T23:32:14.683
> 
> 标签：jquery, css, hyperlink, next, siblings

我正在尝试使用边框颜色在我的导航按钮上创建一个简单的 3d 效果。我的按钮只是由一个无序列表组成，包括背景颜色、边框颜色和文本填充，当然还有链接，所以链接以典型的方式嵌套，如下所示：

```
<ul>
<li><a class="active"   href="link1.html">link1</a></li>
<li><a class="inactive" href="link2.html">link2</a></li>
<li><a class="inactive" href="link3.html">link3</a></li>
..etc
</ul> 
```

我正在使用 jquery 在单击时更改锚类以更改其外观。

我想做的是使用css（甚至我猜是jquery）专门针对“活动”链接之后的锚点，但我不确定是否可能。

我已经测试了“h3 + p {”类型的选择器的使用，我理解它是如何工作的，但是一旦我尝试定位*链接*，它似乎就会停止运行。

我试过了：

```
a.active + a {background-color:red} 
```

和...

```
a.active:link + a:link {background-color:red} 
```

和其他特异性变体......

```
li a.active:link + a:link {background-color:red}

ul li a.active:link + a:link {background-color:red}

ul li a.active:link + a.inactive:link {background-color:red} 
```

...ETC。

这显然有效：

```
p.active + p {background-color:red} 
```

……那为什么不呢？

```
a.active + a {background-color:red} 
```

所以基本上我想弄清楚为什么我不能让兄弟组合器使用链接，以及是否有解决方案或解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T23:39:06.943

您正在使用`Adjacent sibling combinator`，因为您的锚链接不是兄弟姐妹，您的选择器不会选择元素。

> `E + F`*:紧跟*在 E 元素之前的 F元素

当您使用 jQuery 时，您可以通过以下方式选择元素：

```
$('a.active').parent().next().children('a').addClass('red') 
```

[http://www.w3.org/TR/selectors/#adjacent-sibling-combinators](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T23:44:39.923

> 我想做的是使用css（甚至我猜是jquery）专门针对“活动”链接之后的锚点，但我不确定是否可能。

有可能，正如您已经说过的那样，有使用目标选择器的 css 方法，但是，我会使用 jQuery 解决方案来监视您的锚点状态，为了使下面的方法起作用，有必要将一个 id 附加到您的锚点精确就像您的 href 哈希一样，例如：

```
<a href="#myanchor" id="myanchor">My anchor</a> 
```

然后，您可以通过将函数绑定到引用的事件来简单地从**$(window)**对象监视*hashchange事件，例如：*

 **```
$(window).bind('hashchange', function(e) {

            var page = window.location.hash; // page = #myanchor
            $(page).doMyCssStuff(); //
        }); 
```

这是添加导航样式的好方法，如果用户在它的故事上点击“返回”，上面的脚本只会将你的 css 内容简单地添加到它想要的确切锚点。

我希望它有所帮助。干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T23:46:38.167

在 jQUery 中可以定位下一个链接并轻松添加一个类

假设您的点击处理程序如下所示：

```
$('#linkList a').click(function(){
    $('a.active').toggleClass('active').toggleClass('inactive')
    $('a.redClass').removeClass('redClass')
    $(this).toggleClass('active').toggleClass('inactive').parent().next().find('a').addClass('redClass')
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-28T00:43:05.020

支持未定义的答案。如果您只想使用 css，您可以只在 li 上切换类而不是 a 元素。然后就很简单了： li.active + li a { background-color:red }

从字面上看，它的意思是：将 li 中的 a 元素定位到具有“活动”类的元素旁边。**

# assembly - 处理没有溢出标志的溢出移位的结果

> ID：13105126
> 
> 赞同：0
> 
> 时间：2012-10-27T23:32:20.193
> 
> 标签：assembly, x86, bit-manipulation, bit-shift

[我正在尝试实现一个小子例程，它将返回在RAR 过滤器 VM 语言](http://blog.cmpxchg8b.com/2012/09/fun-with-constrained-programming.html)内部旋转 N 个位置到左侧的单词，它与 x86 有着惊人的相似之处，并且出于所有意图和目的都可以被认为是 x86没有“扩展名”。

我试图复制的代码段（新标准化 SHA-3 标准 Keccak 的“Theta”步骤的一部分）

`(((x) << (y)) | ((x) >> (64 - (y))))`

看起来很简单，但是 RAR VM 使用 32 位宽的寄存器，但我需要实现的小例程可以提供 64 位值。

`shl`将结果“溢出”或进入另一个寄存器的最自然方法是什么，`shr`以便我可以重建 x << y 和 x >> 64 - y？如标题所示，我无权访问溢出标志。

注意：这是来自汇编器的一些代码示例，因此您可以看到我必须使用哪些指令。[https://gist.github.com/581f7e162eebd652ee4b](https://gist.github.com/581f7e162eebd652ee4b)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:46:57.757

伪代码：

```
edx = hi_word
eax = lo_word
ecx = shift_count

if (ecx>32) {
   ecx-=32;
   swap eax,edx
}
simultaneously: edx = edx >> ecx | (eax << (32-ecx))
                eax = eax >> eax | (edx << (32-ecx)) 
```

# jquery-animate - 动画动画到新高度，然后回到旧高度

> ID：13105130
> 
> 赞同：0
> 
> 时间：2012-10-27T23:33:33.443
> 
> 标签：jquery-animate

我有一个在三张幻灯片之间移动的滑块，当它们滑动时，它们的容器会改变高度以适应它们的高度。现在我只有前两个，当你点击第二张幻灯片时，高度会正确改变，然后又回到原来的高度，我不知道为什么。

我有一个 JS Bin 设置了孤立的问题。如果您单击它展开的地图，然后单击 850 Boylston 链接，您将看到该问题。任何帮助将不胜感激，这让我发疯。

[http://jsbin.com/unehul/2/edit](http://jsbin.com/unehul/2/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:47:08.833

您需要更正一个字母 - d_Foxboro（大写 F）：

```
$( "#d_Foxboro" ).click(function(){
  $( "#location_slider" ).animate({
    "margin-left": -840
  }, 450 );
}); 
```

此外，每次单击三个菜单之一时，都会触发该`$("#directions").click(function()`事件。结果是按照在...上执行的函数的指示设置所有幻灯片。`$("#directions").click`您可以使用 .unbind() 来防止这种情况发生：

```
$("#directions").click(function() {
    window.setTimeout(directions_open, 450);
    $('#directions').unbind('click');
}); 
```

# ios - 由于简单模态序列上未捕获的异常“NSUnknownKeyException”而终止应用程序

> ID：13105136
> 
> 赞同：0
> 
> 时间：2012-10-27T23:35:30.710
> 
> 标签：ios

我是 iOS 新手，正在尝试制作自己的简单应用程序。我在主视图控制器中有一个添加按钮，我想加载嵌入在导航控制器中的表视图控制器。我做了一个从添加按钮到导航控制器的控制拖动，但是当我运行应用程序时，添加按钮会因以下调用堆栈而崩溃：

BookMaker [5367:11303] 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键**titleInpur**的键值编码不兼容。” *** 第一次抛出调用堆栈：这里有很多十六进制值.... libc++abi.dylib：终止调用抛出异常

如果我[切换异常断点](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)，我会收到此错误：(lldb)

我通过我的代码进行了搜索，但在任何地方都找不到**titleInpur**。

目前调试：

*   这些关于 SO 的帖子似乎与问题非常相似，但是是关于 xib 而不是故事板：[这是什么意思？“'NSUnknownKeyException'，原因：......这个类不符合键 X 的键值编码”](https://stackoverflow.com/questions/3088059/this-class-is-not-key-value-coding-compliant-for-the-key)和[NSUnknownKeyException setValue:forUndefinedKey:](https://stackoverflow.com/questions/10828608/nsunknownkeyexception-setvalueforundefinedkey)
*   [此处的帮助帖子建议重建添加按钮](http://timroadley.com/2012/02/09/core-data-basics-part-1-storyboards-delegation/)。我试过了，得到了同样的错误。
*   [当我使用 prepareForSegue 将值传递给目标控制器时，有一些问题](https://stackoverflow.com/questions/12034093/when-i-use-prepareforsegue-to-pass-value-to-the-aim-controller-there-are-some-p)表明对 segue 方法的准备进行了更改，但这对我来说没有帮助，因为我没有将任何信息传递给新视图（添加屏幕）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:08:47.137

检查你的故事板。它可能在那里的 segue 或某处的新场景中被引用。

直观的方法是只需单击导航面板中的故事板以打开故事板的图形表示，打开身份检查器（例如， Xcode 4.5 中的`option`++ `command`）`3`并选择 segue 或各种控制器/视图/子视图构成下一个场景，并在执行此操作时检查身份检查器的内容，直到找到对此类的引用。

或者，除了查看故事板的图形表示之外，您还可以在左侧导航面板中右键单击故事板的名称，选择“打开方式”-“源代码”，然后在问题（它将准确地向您显示该类在情节提要中出现的位置...我会认真建议您不要在此处实际编辑情节提要，但只需确定该类的引用位置，然后立即返回“打开方式”-“界面生成器” /Storyboard”，然后在 Interface Builder 中编辑您的故事板）。

# powershell - 使用表格等阅读 word 文档 (*.doc) 内容

> ID：13105142
> 
> 赞同：6
> 
> 时间：2012-10-27T23:36:19.083
> 
> 标签：powershell, ms-word

我有一个word文档（2003）。我正在使用 Powershell 来解析文档的内容。该文档在顶部包含几行文本，十几个具有不同列数的表格，然后是更多文本。

我希望能够像下面这样阅读文档：

1.  阅读文件（制作必要的物品等）
2.  获取每一行文本
3.  如果不是表格的一部分，则作为文本处理并写入输出
4.  别的
5.  如果表的一部分
6.  获取表号（按顺序）并根据列解析输出
7.  万一

下面是我已经开始写的powershell脚本：

```
$objWord = New-Object -Com Word.Application
$objWord.Visible = $false
$objDocument = $objWord.Documents.Open($filename)
$paras = $objDocument.Paragraphs
foreach ($para in $paras) 
{ 
    Write-Output $para.Range.Text
} 
```

我不确定 Paragraphs 是否是我想要的。有什么更适合我的目的吗？我现在得到的只是文档的全部内容。我如何控制我得到的东西。就像我想得到一条线一样，能够确定它是否是表格的一部分，并根据它是什么数字表格采取行动。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T11:13:46.303

[`Tables`](http://msdn.microsoft.com/en-us/library/office/bb212166%28v=office.12%29.aspx)您可以通过集合枚举 Word 文档中的表格。[`Rows`](http://msdn.microsoft.com/en-us/library/office/bb212166%28v=office.12%29.aspx)和属性将[`Columns`](http://msdn.microsoft.com/en-us/library/office/bb215428%28v=office.12%29.aspx)允许您确定给定表中的行数/列数。可以通过[`Cell`](http://msdn.microsoft.com/en-us/library/office/bb211844%28v=office.12%29.aspx)对象访问单个单元格。

将打印文档中每个表的最后一行和最后一列中的单元格值的示例：

```
$wd = New-Object -ComObject Word.Application
$wd.Visible = $true
$doc = $wd.Documents.Open($filename)
$doc.Tables | ForEach-Object {
  $_.Cell($_.Rows.Count, $_.Columns.Count).Range.Text
} 
```

# algorithm - 寻找中位数

> ID：13105145
> 
> 赞同：0
> 
> 时间：2012-10-27T23:36:42.997
> 
> 标签：algorithm, rank, median

> **可能重复：**
> [有效地找到数组中元素的等级？](https://stackoverflow.com/questions/1674307/efficiently-finding-the-ranks-of-elements-in-an-array)

如果我有一个元素数组 A [0 到 15]，并且我知道中位数在 A [8..11] 范围内。如何通过从 A[8..11] 中选择 A 中所有元素的中位数来找到它？它的等级会是多少？我已经阅读了很多关于此的内容，但我找不到这个特定问题的答案。任何帮助表示赞赏。该数组基本上包含二维点，我想将这些点分成矩形区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:40:26.340

您不能仅通过观察这些元素的子集来知道一组元素的中位数。中位数取决于整个集合的每个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:44:17.010

我不认为你可以。中位数是排序时将数据一分为二的数据元素。

如果它已排序，那通常是 data[0..15] 数组的 data[7] 和 data[8] 的平均值。

如果它没有排序，那么如果不检查*所有*元素就无法找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T23:46:46.150

如果要将数组拆分为两组“小”和“大”值，最简单的方法是对数组进行排序。如果您不想对整个数组进行排序，则可以使用修改后的快速排序：对数组进行分区后，只对包含中位数的一半数组进行排序（除非分区结果是中位数，在在这种情况下你可以停止）。

# android - 对于Eclipse下的Android JNI/NDK调试，为什么我的断点被忽略了？

> ID：13105147
> 
> 赞同：7
> 
> 时间：2012-10-27T23:37:24.840
> 
> 标签：android, eclipse, eclipse-plugin, adt, breakpoints

我正在使用带有最新和最好的 ADT (v20) 的 Eclipse 3.6.2，并且我尝试在我知道它运行的方法中设置断点（将消息记录到 LogCat），但由于某种原因，我放置的所有断点都被忽略了。

在我寻找解决方案的过程中，我遇到了[这个线程](https://stackoverflow.com/a/1536082)，但它很旧，而且我的 JDK 更新了很多，所以答案不适用于我的情况。

为什么会发生这种情况，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:09:08.050

*   检查“跳过所有断点”是否未启用（调试图标左侧的小图标）
*   检查您是否从要调试的项目中选择了一个文件
*   检查程序没有在上一步中死掉，或者如果您正在尝试捕获，检查错误不会使您的程序由于错误而“跳转”到“捕获”的断点。if else 也一样
*   检查您是否将程序作为“android 应用程序”运行
*   调试的快捷键是 F11 或单击错误图标

希望这可以帮助！

# iphone - 让网站在 iPhone 上对称对齐

> ID：13105148
> 
> 赞同：2
> 
> 时间：2012-10-27T23:37:27.633
> 
> 标签：iphone, html, css, wordpress, mobile

iPhone 在我正在处理的网站左侧显示了一个额外的空间，而不是在右侧。为什么会这样？该站点是 211 WordPress 主题的大量修改版本。网址是：[http ://www.picturesquestudios.com/dennis](http://www.picturesquestudios.com/dennis)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T23:56:58.090

尝试使用视口，直到以您想要的方式获得它。

这是一个介绍：[http ://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/](http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/)

# c - TCP/IP 轮询客户端在 c 中发送和接收

> ID：13105151
> 
> 赞同：0
> 
> 时间：2012-10-27T23:38:55.257
> 
> 标签：c, unix, networking, tcp, chat

我正在使用 c 中的 tcp/ip 制作聊天服务器和客户端。我制作了线程多个客户端的服务器部分。在客户端，我有一个 while 循环，可以发送一行，然后等待服务器回复。我想让客户端轮询发送和接收函数，以检查另一个客户端是否发送了一些东西。这就是我所拥有的——

```
while (1){
    char buffer[BUFLEN];
    memset(buffer, 0, sizeof buffer);
    gets(buffer);
    //sendall(sd, buffer, BUFLEN);
    send(sd, buffer, BUFLEN, 0);
    printf("sent:%s\n",buffer);
    //recvline(sd, buffer, BUFLEN);
    recv(sd, buffer, BUFLEN, 0);
    printf("recieved:%s\n", buffer);
} 
```

如何同时轮询 send() 和 recv() 并执行最先出现的那个？

想做这样的事情。。

```
if(send(sd, buffer, BUFLEN, 0) == true)
   send something
else if(recv(sd, buffer, BUFLEN, 0) == true)
   receive something 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T23:56:47.020

我相信您正在寻找类似`select`（[MSDN Page](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)，[man page](http://linux.die.net/man/2/select)）的东西。

使用它的基本原理如下：

*   `fd_set`使用要检查的套接字句柄加载结构。加载一个`fd_set`带有要检查新数据接收的套接字，一个带有要发送的套接字，还可以选择一个带有要检查错误的套接字。

*   调用`select`，将它的指针传递给您的`fd_set`结构。

*   返回时`select`，您作为第二个参数 ( `readfds`) 传递的集合仅包含您传递给它的、等待数据的套接字。您可以调用`recv`它们，它会立即返回。作为第三个参数 ( `writefds`) 传递的集合包含准备写入的套接字。您可以调用`send`它们，它会立即返回。

# c# - 覆盖列表 与列表

> ID：13105154
> 
> 赞同：5
> 
> 时间：2012-10-27T23:39:18.657
> 
> 标签：c#, derived-class, base-class

我有这样的基类：

```
public class Scene
{
    public IList<SceneModel> Models {get; set;}
}

public class SceneModel { } 
```

和这样的派生类：

```
public class WorldScene : Scene
{
    public override IList<WorldModel> Models {get; set;}
}

public class WorldModel : SceneModel { } 
```

所以我的问题是，我该如何处理。就目前而言，编译器对此并不满意（老实说，无论如何我看起来有点奇怪）。那么我想做的事情是不可能的吗？如果是这样，为什么？还是有可能，我只是以错误的方式去做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T23:42:57.557

您可以使用泛型

```
public class BaseScene<T>
    where T : SceneModel
{
    public IList<T> Models {get; set;}
}

public class Scene : BaseScene<SceneModel>
{
}

public class WorldScene : BaseScene<WorldModel>
{    
} 
```

每种类型的场景都将通过相应的模型类型进行参数化。因此，您将拥有每个场景的强类型模型列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T23:43:29.727

这基本上是不可能的。

如果你写会发生什么

```
Scene x = new WorldScene();
x.Models.Add(new OtherModel()); 
```

您刚刚将一个添加`OtherModel`到一个`List<WorldModel>`.

相反，您应该使基类通用。

# python - 从 CSV 合并 numpy ndarray

> ID：13105156
> 
> 赞同：2
> 
> 时间：2012-10-27T23:39:27.820
> 
> 标签：python, csv, numpy, genfromtxt

我有以下代码：

```
from numpy import genfromtxt
nysedatafile = os.getcwd() + '/nyse.txt';
nysedata = genfromtxt(nysedatafile, delimiter='\t', names=True, dtype=None);
nasdaqdatafile = os.getcwd() + '/nasdaq.txt';
nasdaqdata = genfromtxt(nasdaqdatafile, delimiter='\t', names=True, dtype=None); 
```

现在我想合并来自 2 个 CSV 的数据，并尝试了各种功能：

例如：

```
import numpy as np;
alldata = np.array(np.concatenate((nysedata, nasdaqdata)));
print('NYSE stocks:' + str(nysedata.shape[0]));
print('NASDAQ stocks:' + str(nasdaqdata.shape[0]));
print('ALL stocks:' + str(alldata.shape[0])); 
```

返回：

```
TypeError: invalid type promotion 
```

我也尝试过`numpy.vstack`并尝试在其上调用一个数组。我希望最后一次打印给出前两个 csv 文件的行总和。

* * *

编辑：这个命令：

```
print('NYSE shape:' + str(nysedata.shape));
print('NASDAQ shape:' + str(nasdaqdata.shape));
print('NYSE dtype:' + str(nysedata.dtype));
print('NASDAQ dtype:' + str(nasdaqdata.dtype)); 
```

返回：

```
NYSE shape:(3257,)
NASDAQ shape:(2719,)
NYSE dtype:[('Symbol', 'S14'), ('Name', 'S62'), ('LastSale', 'S9'), ('MarketCap', '<f8'), ('ADR_TSO', 'S3'), ('IPOyear', 'S4'), ('Sector', 'S21'), ('industry', 'S62'), ('Summary_Quote', 'S38')]
NASDAQ dtype:[('Symbol', 'S14'), ('Name', 'S62'), ('LastSale', 'S7'), ('MarketCap', '<f8'), ('ADR_TSO', 'S3'), ('IPOyear', 'S4'), ('Sector', 'S21'), ('industry', 'S62'), ('Summary_Quote', 'S34')] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:42:18.357

`np.vstack`(or ) 引发错误的原因`np.concatenate`是因为两个数组的 dtypes 不匹配。

请注意最后一个字段：`('Summary_Quote', 'S38')`与`('Summary_Quote', 'S34')`. nysedata 的`Summary_Quote`列长 38 个字节，而`nasdaqdata`' 列只有 34 个字节长。（编辑：该`LastSale`专栏也有类似的问题。）

发生这种情况是因为在设置参数`genfromtxt`时猜测列的 dtype 。`dtype = None`对于字符串列，`genfromtxt`确定包含该列中所有字符串所需的最小字节数。

因此，要堆叠两个数组，必须将较小的数组提升为较大的 dtype：

```
import numpy.lib.recfunctions as recfunctions
recfunctions.stack_arrays([nysedata,nasdaqdata.astype(nysedata.dtype)], usemask = False) 
```

（我之前的回答使用了 np.vstack。这会产生一个形状为 (N,1)`recfunctions.stack_arrays`的二维数组。返回一个形状为 (N,) 的一维数组。由于`nysedata`和`nasdaqdata`是一维的，我认为它更好也返回一个一维数组。）

可能更简单的解决方案是先连接两个 csv 文件，然后调用`genfromtxt`：

```
import numpy as np
import os

cwd = os.getcwd()    
nysedatafile = os.path.join(cwd, 'nyse.txt')
nasdaqdatafile = os.path.join(cwd, 'nasdaq.txt')
alldatafile = os.path.join(cwd, 'all.txt')
with open(nysedatafile) as f1, open(nasdaqdatafile) as f2, open(alldatafile, 'w') as g:
    for line in f1:
        g.write(line)
    next(f2)
    for line in f2:
        g.write(line)

alldata = np.genfromtxt(alldatafile, delimiter='\t', names=True, dtype=None) 
```

# html - 将产品集合与 Shopify 中的静态元素一起输出到表格中

> ID：13105158
> 
> 赞同：0
> 
> 时间：2012-10-27T23:39:48.447
> 
> 标签：html, css, e-commerce, shopify, liquid

我需要将产品集合输出到索引页面上的表格中。做这个的最好方式是什么？我正在查看文档并找到了 tablerow 的东西。问题是，产品需要一次出现两个，即每行有两个图像（两个不同的产品），然后在下一行是名称。我这样做是因为随着图像尺寸的变化，这是保持所有内容正确排列的最简单方法。此外，还有一个静态元素也需要输出到表中。对此有何建议？

这里是商店：

[https://hodkiewicz-zieme-and-hirthe180.myshopify.com/](https://hodkiewicz-zieme-and-hirthe180.myshopify.com/)

以下是相关代码：

```
 <table>
        <tr>
          <td><img src="{{'carb-1.png' | asset_url}}"></td>
          <td><img src="{{'carb-2.png' | asset_url}}"></td>
        </tr>
        <tr>
          <td>1930 Speedster</td>
          <td>1929-1931 Super 8</td>
        </tr>
      <tr>
        <td><img src="{{'carb-3.png' | asset_url}}"></td>
        <td><img src="{{'carb-4.png' | asset_url}}"></td>
      </tr>
      <tr>
        <td>1932 Super 8</td>
        <td>1929-1931 Standard 8</td>
      </tr>
      <tr>
        <td><img src="{{'box.png' | asset_url}}"></td>
        <td><img src="{{'carb-5.png' | asset_url}}"></td>
      </tr>
      <tr>
        <td></td>
        <td>1932 Standard 8</td>
      </tr>
    </table> 
```

目前，我正在静态输出所有相关图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:31:13.037

将每个图像和相关描述包装在一个 div 中，并将它们一起输出到一个表格单元格中。这样你仍然可以使用`tablerow`指令输出所有内容。

此外，您可以巧妙地处理静态内容并在`tablerow`循环中进行渲染。使用[Shopify Wiki 上列出的行和列标识符](http://wiki.shopify.com/Liquid#Tables)的组合来查找您想要静态内容的单元格，并在您点击正确的单元格时呈现该单元格而不是产品。

您的代码可能看起来像这样

```
 {% tablerow item in items cols: 3 %}
    {% if tablerowloop.col_first &&  tablerowloop.last %}
      <!-- Display static content! -->
    {% else %}
      <div class='table-item'>
        {{item.image}}
        <p>{{item.title}}</p>
      </div>
    {% endif %}
  {% endtablerow %} 
```

# css - 为什么显示绝对定位图像会出错？

> ID：13105166
> 
> 赞同：0
> 
> 时间：2012-10-27T23:41:08.250
> 
> 标签：css

这是我的CSS

```
.arrow_l, .arrow_r {
    -moz-transition: opacity 0.5s ease 0s;
    border-radius: 5px 5px 5px 5px;
    box-shadow: 0 0 2px #aeaeae;
    height: 60px;
    margin-top: 80px;
    position: absolute;
    width: 36px;
    opacity:.75;
}
.arrow_l {
    background: url("../images/arrow.png") no-repeat 10px center,red;
    background-size: 116% auto;
}
 .arrow_r {
    background: url("../images/arrow.png") no-repeat -15px center,red;
    background-size: 116% auto;
    margin-left:-36px; 
```

}

![在此处输入图像描述](../Images/8154f8c1d9e5d94112123cf727486237.png)

内容在带有 css 的包装器内：

```
.wrapper {
    display: inline-block;
    padding: 12px;
} 
```

我不明白为什么右箭头在底行，我该如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:51:36.230

您的 JsFiddle 不会复制问题，但是通过查看您的代码和您在此处发布的信息，我建议您尝试一些事情。

1.  首先，绝对定位只有在父 div 的定位设置为相对时才能正常工作，你没有这个，所以尝试将你的父 div（我认为它被称为面板）设置为 position:relative;

2.  您已将箭头声明为绝对定位项目，然后实际上并未定位它们...尝试类似

    ```
    .arrow_l {
        background: url("../images/arrow.png") no-repeat 10px center,red;
        background-size: 116% auto;
        left:0px;
        top:25px;
    }
     .arrow_r {
        background: url("../images/arrow.png") no-repeat -15px center,red;
        background-size: 116% auto;
        margin-left:-36px;
        right:0px;
        top:25px;
    } 
    ```

3.  尝试使用

    ```
    <div class="arrow_l"></div> 
    ```

代替

```
<span class="arrow_l"></span> 
```

我不明白你为什么这样做，有什么特殊原因吗？

希望这可以帮助 ：）

# asp.net - NLog 彩色控制台

> ID：13105168
> 
> 赞同：5
> 
> 时间：2012-10-27T23:41:44.667
> 
> 标签：asp.net, c#-4.0, console, nlog

我正在使用 NLog 记录错误。这是配置代码

```
<target name="console" xsi:type="AsyncWrapper" >
      <target  xsi:type="ColoredConsole"  layout="${longdate:padding=-10}${callsite:className=false:includeSourcePath=false:methodName=false} | ${message}" >
         <highlight-row condition="level >= LogLevel.Info" foregroundColor="Green" backgroundColor="NoChange"/> 
      </target>
    </target> 
```

我在日志事件上设置了一个自定义属性，例如

```
private LogEventInfo GetLogEvent(string loggerName, LogLevel level, string message, ConsoleColor color)
        {
    var logEvent = new LogEventInfo(level, loggerName, message);

                logEvent.Properties["color"] = color;// color= any console color
} 
```

这设置了“颜色”属性。（在这里说“红色”）

我正在尝试在目标中使用这个“颜色”属性，比如

```
 <highlight-row condition="equals('${color}','Red')" foregroundColor="Red" backgroundColor="NoChange"/> 
```

这个剂量有效，我试过了

```
<highlight-row condition="equals('${event-context:item=color}','Red')" foregroundColor="Red" backgroundColor="NoChange"/> 
```

但没有运气。

我错过了什么还是有更好的方法来做到这一点？在这种情况下我们可以使用布局渲染器吗？如果是，我们如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:41:00.737

首先，由于您将值存储在 中`LogEventInfo.Properties`，因此您应该使用第二个配置示例，该示例从 中获取值`event-context`。

我没有使用过`ColoredConsoleTarget`，所以把它当作一个建议，而不是我知道的事实会起作用。

我怀疑 NLog`Condition`对象不知道`ConsoleOutputColor`枚举。因此，当您将`ConsoleOutputColor`枚举值存储在 中`LogEventInfo.Properties`时，`Condition`不知道`'Red'`（在条件中）指的是`ConsoleOutputColor.Red`。我有两个建议：

`ConsoleOutputColor`第一个选项：存储in的字符串值`LogEventInfo.Properties`。使用`ToColor`可能就足够了。像这样的东西：

```
var logEvent = new LogEventInfo(level, loggerName, message);
logEvent.Properties["color"] = color.ToString(); 
```

然后，在您的 中`Condition`，您应该能够与`ConsoleOutputColor`字符串值进行比较（如果您按照我的建议存储颜色名称字符串，那么您的配置中的内容可能是正确的）。

如果这不起作用，您可以尝试...

第二个选项：像现在一样将`ConsoleOutputColor`值存储在 中，但在配置文件中更改条件以将事件上下文中的“颜色”与值的数值进行比较。像这样的东西（我没有尝试过，所以我不确定它是否正确）：`LogEventInfo.Properties``ConsoleOutputColor`

```
<highlight-row condition="equals('${event-context:item=color}','12')" foregroundColor="Red" backgroundColor="NoChange"/> 
```

（在`ConsoleOutputColor`枚举中，`Red`是`12`）。

# ruby - 设置 Rspec

> ID：13105170
> 
> 赞同：1
> 
> 时间：2012-10-27T23:41:51.287
> 
> 标签：ruby

我第一次尝试在我的机器上运行 rspec。我在全局 gemset 中做了 gem install rspec 。但是，当我尝试做

```
 spec intranet_reader_spec.rb 
```

我明白了

```
-bash: spec: command not found 
```

当我尝试做

```
bundle exec rspec spec intranet_reader_spec.rb 
```

我明白了

```
Could not locate Gemfile 
```

（注意，我没有 gemfile。我只是从一本 ruby​​ 书中运行一个测试脚本）

我找到了将规范添加到路径的这些说明，即将以下内容放入 bashrc

```
export PATH=$PATH:/Users/<UserName>/.gem/ruby/1.8/bin 
```

然而，这并没有奏效。我在我的mac上注意到了这一点。如果我导航到 .gem/ruby/1.8 并执行“ls”，它没有“bin”。在 1.8 文件夹中，它有

```
cache       doc     gems        specifications 
```

谁能告诉我我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:01:06.147

如果你没有 a`Gemfile`那么你就不能运行`bundle exec`.

此外，RSpec 2.x 的命令是`rspec`. 您可能正在学习一个过时的教程，因为该命令`spec`的版本是 1.x。

赶紧跑：

```
rspec intranet_reader_spec.rb 
```

# wcf - 对 .NET 的 WCF 配置基础有点困惑

> ID：13105175
> 
> 赞同：1
> 
> 时间：2012-10-27T23:42:38.833
> 
> 标签：wcf

我是 WCF 的新手，所以我打开了 2 个项目：WCF 类库和主机控制台应用程序。现在，两个项目都有 app.config 来存储 WCF 服务配置设置。

现在在我看来，如果我错了，请纠正我，我在使用 WCF 设置配置两个项目时有冗余。

它是如何在现实世界的制作软件中完成的？它是为 WCF 服务使用单独的 *.dll 库，还是使用宿主项目实现（并使用它的单一位置配置）？

谢谢你 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T06:49:44.080

EliorCohen 的回答是正确的，但我想扩展几点。

首先，您构建 WCF**类库**- 库不使用自己的配置文件。他们使用调用应用程序的配置文件。这是我见过的给开发人员带来很多困惑的事情，特别是如果他们创建了一个新的类库并且他们在项目中看到了一个 App.config 文件。

其次，使用 WCF 4，您实际上可以托管服务，而无需在配置文件中指定任何内容。运行时将根据您构建服务主机时提供的 URI 添加默认端点。

您还可以使用设置默认绑定和将覆盖正常默认值的行为 - 例如，如果您的所有服务都将处理大型请求，您可能希望定义具有更大值的默认绑定（通过在配置中省略`name`属性`Binding`）。

WCF 很棒，因为它有很多选择 - 但有时这种祝福也是一种诅咒，尤其是当您第一次开始使用它时。

有关默认端点和内容的更多信息，请参阅[开发人员对 Windows Communication Foundation 4 的介绍](http://msdn.microsoft.com/en-us/library/ee354381.aspx)。

请注意，您仍然需要任何客户端应用程序的配置文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T23:58:44.470

您正在构建的 wcf 项目代表服务的实现。配置需要在服务的主机（您的主机应用程序）上。

# matlab - 通过 COM 端口的多个变量

> ID：13105177
> 
> 赞同：3
> 
> 时间：2012-10-27T23:43:11.637
> 
> 标签：matlab, serial-port, arduino, simulink

我想通过[Simulink](http://en.wikipedia.org/wiki/Simulink)和 Arduino 之间的 COM 端口发送和接收多个变量。这可能吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:56:16.933

我发现了这个：[Simulink 的 Arduino 支持](http://www.mathworks.nl/academia/arduino-software/arduino-simulink.html)

# visual-studio - 有没有办法让 Visual Studio 忽略 编译时标记？

> ID：13105178
> 
> 赞同：0
> 
> 时间：2012-10-27T23:43:17.577
> 
> 标签：visual-studio, visual-studio-2012, xml-documentation

基本上，我试图将所有文档保存在单独的文件中并使用`<include>`标签。这将使我的源代码免于文档混乱。我仍然希望有一些关于类和成员的开发人员注释，所以我使用了`<devdoc>`标签。现在的问题是 Visual Studio 将我的开发人员注释添加到 xml 文档文件中。有没有办法不让它编译到 xml 文档中？

```
/// <devdoc>This is an interesting Foo class</devdoc>
/// <include file="docs.xml" path='Doc/Member[@for="MyNamespace.Foo"]/*' />
public class Foo { ... } 
```

结果是：

```
<member name="T:MyNamespace.Foo">
  <devdoc>This is an interesting Foo class</devdoc>
  <Summary>Some summary for testing.</Summary>
</member> 
```

* * *

我意识到 Sandcastle`<devdoc>`在生成其文档时不会使用该类，但如果我想提供有关我的库的智能感知信息，我需要包含生成的 xml 文件。如果不可能，那不是世界末日，但我希望有办法一开始就排除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:51:49.483

我将创建一个简单的控制台应用程序，该应用程序将从构建后事件中调用。该应用程序将删除所有 <devdoc> 标记。这真的很简单。只需阅读生成的 XML 文件并像这样使用正则表达式：

```
using System.Text.RegularExpressions;

Regex regex = new Regex("<devdoc>(.|\n)*</devdoc>", RegexOptions.Compiled | RegexOptions.Multiline);
s = regex.Replace(s, string.Empty); 
```

您还可以使用 XmlDocument 及其 GetElementsByTagName 方法，然后使用 XmlNode.RemoveChild 删除标签。但我相信正则表达式会更有效。

# c# - 在构造函数中自动调用超类方法

> ID：13105180
> 
> 赞同：3
> 
> 时间：2012-10-27T23:43:27.183
> 
> 标签：c#, .net

C# 中是否有办法保证每个子类构造函数都会自动调用超类的方法？

具体来说，我正在寻找一种仅将代码添加到超类的解决方案，而不是“基础（参数）”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T23:46:29.677

保证它的唯一方法是在基类的构造函数中进行调用。由于所有子类都必须调用基类的构造函数，因此您感兴趣的方法也将被调用：

```
class BaseClass {
    public void MethodOfInterest() {
    }
    // By declaring a constructor explicitly, the default "0 argument"
    // constructor is not automatically created for this type.
    public BaseClass(string p) {
        MethodOfInterest();
    }
}

class DerivedClass : BaseClass {
    // MethodOfInterest will be called as part
    // of calling the DerivedClass constructor
    public DerivedCLass(string p) : base(p) {
    }
} 
```

# graphics - RGB <--> HSL 转换的快速算法

> ID：13105185
> 
> 赞同：2
> 
> 时间：2012-10-27T23:44:14.887
> 
> 标签：graphics, colors, color-space

我正在寻找快速算法（通常仅使用整数）将 RGB 数据转换为 HSL 数据，然后再转换回 RGB 数据。我已经找到了这些转换的算法（维基百科），但它们并不快，因为它们需要浮动操作。

有谁知道只使用整数的有效算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-02T02:25:38.553

快5年了，没有答案？好吧，这里是 50%：HSL -> RGB

```
uint32_t hsl2rgb(uint8_t h, uint8_t s, uint8_t l) {
    uint8_t  r, g, b, lo, c, x, m;
    uint16_t h1, l1, H;
    l1 = l + 1;
    if (l < 128) {
        c = ((l1<<1) * s) >> 8;
    }
    else {
        c = (512 - (l1<<1)) * s >> 8;
    }

    H = h*6; // 0 to 1535 (actually 1530)
    lo = H & 255;          // Low byte  = primary/secondary color mix
    h1 = lo + 1;
    if ((H & 256) == 0) { // even sextant, like red to yellow
        x = h1 * c >> 8;
    }
    else { // odd sextant, like yellow to green
        x = (256 - h1) * c >> 8;
    }
    m = l - (c >> 1);
    switch(H >> 8) {       // High byte = sextant of colorwheel
        case 0 : r = c  ; g = x  ; b = 0  ; break; // R to Y
        case 1 : r = x  ; g = c  ; b = 0  ; break; // Y to G
        case 2 : r = 0  ; g = c  ; b = x  ; break; // G to C
        case 3 : r = 0  ; g = x  ; b = c  ; break; // C to B
        case 4 : r = x  ; g = 0  ; b = c  ; break; // B to M
        default: r = c  ; g = 0  ; b = x  ; break; // M to R
    }

    return r+m<<16 | g+m<<8 | b+m;
} 
```

# android - 结果的开始对话框

> ID：13105189
> 
> 赞同：0
> 
> 时间：2012-10-27T23:44:39.423
> 
> 标签：android

我创建了一个名为 NumericPicker 的类，它是在对话框中创建的。但它可以在任何活动中使用，所以我不想在类中使用任何类型的对象或数据集。问题是我需要在活动中知道对话框何时关闭，以便我可以保存我需要的值（如`startActivityForResult()`）。我想我可以将 Class 扩展为 Activity 并将 Theme 设置为 Dialog，但这不是想法，Class 不应该扩展 Activity。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T02:44:24.493

实现你自己的监听器/回调。例如，创建一个 onCloseListener 接口。您的活动将实现接口，对话框实现一个`setOnCloseListener`方法。创建对话框时，您将活动分配为 onCloseListener，当对话框关闭时，它会调用活动中实现的接口方法。

下面是在一个名为 DrawView 的自定义视图中声明的侦听器接口和实现的示例：

```
public interface OnUndoEventListener {
    public abstract void onUndoEvent();
}

ListenerInfo getListenerInfo() {
    if (mListenerInfo != null) {
        return mListenerInfo;
    }
    mListenerInfo = new ListenerInfo();
    return mListenerInfo;
}

public void setOnUndoEventListener(OnUndoEventListener l) {
    getListenerInfo().mOnUndoEventListener = l;
}

static class ListenerInfo {
    private OnUndoEventListener mOnUndoEventListener;
}

ListenerInfo mListenerInfo; 
```

这是一个活动的实现声明和设置监听器：

```
public class MyActivity extends Activity implements DrawView.OnUndoEventListener {
...
@Override
protected void onCreate(Bundle savedInstanceState) {
        ...
    mDrawView = new DrawView(this, ...);
mDrawView.setOnUndoEventListener(this);

    ...
    };

@Override
public void onUndoEvent() {
    ...
}
...
} 
```

在 DrawView 中调用回调：

```
private void someMethod(){

    if (getListenerInfo().mOnUndoEventListener != null)
        getListenerInfo().mOnUndoEventListener.onUndoEvent();

....

}; 
```

# map - 在方案中映射和过滤

> ID：13105191
> 
> 赞同：0
> 
> 时间：2012-10-27T23:45:24.960
> 
> 标签：map, filter, scheme, mit-scheme

我正在尝试返回一个删除了所有字符串的列表

```
(remove-strings '(("hello" 9) (29 10) ("cruel" "world") (1238 .12) (-53 "end"))))
=> ((9) (29 10) () (1238 .12) (-53)) 
```

这是我到目前为止的代码（定义（删除字符串列表）（过滤字符串？列表））

我也在尝试对列表中的所有负数求平方，所以我得到了

```
(define (neg-sqr list)
  (map square (filter negative? list)) ; filters out negatives in list and squares each number
) 
```

应该返回 2809 因为它取每个负数的平方 (-53^2)

但是，上面的代码不起作用。我认为这是因为我需要使用第一步中的代码来删除字符串，以便我可以单独获取数字，还是因为这些项目嵌套了一层深？任何人都可以帮助我删除字符串程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T03:58:38.207

这是取出负数的代码

```
(define (f2b items)
   (accumulate (lambda (x y)
 (cons (append 
    (map square (filter negative? (filter number? x))
)
(filter positive? (filter number? x))
(filter string? x)
) y)) () items)) 
```

附言。你算出所有正数的总和吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:57:39.393

使用这样的累积函数：

```
(define (accumulate op initial sequence)
  (if (null? sequence)
      initial
      (op (car sequence)
          (accumulate op initial (cdr sequence))))) 
```

正确调用累积是一件简单的事情。

```
(define (remove-strings n)
   (accumulate (lambda (x y) (cons (filter number? x) y)) () n)
  ) 
```

这样做是将过程 lambda 重复应用于每个子列表，然后将它们组合在一起，从而为您留下无字符串的新列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:29:07.823

`filter`将列表作为参数。
但是，您的输入`remove-strings`是列表列表，您希望单独处理它们。
也许您可以想办法将函数应用于列表中的每个项目？

# erlang - 监视器与主管？

> ID：13105196
> 
> 赞同：2
> 
> 时间：2012-10-27T23:46:41.507
> 
> 标签：erlang

主管和班长一样吗？使用监视器好还是使用主管更好？

我不确定何时使用监视器而不是主管。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T23:56:45.787

推荐阅读： http: [//learnyousomeerlang.com/errors-and-processes#monitors](http://learnyousomeerlang.com/errors-and-processes#monitors)

主管是一种非常特殊的关系。拟人化，作为主管，我直接对下属的福祉负责。如果他/她失败了，我需要做一些事情来解决这个问题。

链接供主管和其他直接相关的流程使用，它们都是同一系统的一部分。

监视器，在我公认的未受过教育的眼中，类似于链接，但主要用于对进程是否正在运行感兴趣但不直接相关的外部进程。

以 DNS 为例，在我浪费时间尝试从它获取响应之前了解 DNS 服务器是否正在运行会很有帮助，但如果 DNS 服务器出现故障，我的工作不是重新启动它。我只需要切换到不同的 DNS 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:38:41.497

**主管**是一种OTP 行为。您将在进程的层次结构中使用它，在层次结构之上是主管，其职责是应用您为每个孩子定义的重启策略。

孩子将成为另一位主管或工人。

工人是完成这项工作的模块。在 OTP 架构中，它们通常是 gen_server、gen_event、gen_fsm... 它们可能会正常终止（在这种情况下什么都不做）或崩溃。然后主管将应用重启策略：

*   **one_for_one** : 重启进程
*   **one_for_all**：终止所有子节点并重新启动它们
*   **rest_for_one**：终止启动列表中的以下子项并以正确的顺序重新启动它们

为此，监督者使用由 link 或 spawn_link 函数创建的双向连接。这两个过程是联系在一起的；这意味着如果其中任何一个崩溃，另一个也会崩溃，除非它设置`process_flag(trap_exit, true)`并且在这种情况下它将收到消息`{'EXIT',FromPid,Reason}`

这是具有 3 个主管的这种层次结构的示例（在我的情况下，Task_Sup 使用 simple_one_for_one 策略，并且使用来自 Mngr_Server 的 Create(Task) 创建子级，相同的 Mngr_server 监视每个子级）：

![在此处输入图像描述](../Images/862195c70b86394a1f6da6e53ee5a6a1.png)

**监视器**是通过调用创建的 2 个进程之间的单向连接

`Ref = erlang:monitor(process, Pid2)`在进程 Pid1 中。那么如果 Pid2 终止，Pid1 将收到一条消息

```
{'DOWN', Ref, process, Pid2, Reason} 
```

Pid1 必须检查传入消息以获取 Pid2 终止的通知。

# java - 从 @UiThreadTest 调用 waitForMonitorWithTimeout()

> ID：13105202
> 
> 赞同：1
> 
> 时间：2012-10-27T23:47:37.083
> 
> 标签：java, android, unit-testing, junit, instrumentation

为了说明我在为我的 Android 应用程序编写 JUnit 测试时遇到的最新问题，我编写了一个包含两个活动的简单示例，`StartActivityForResult`并且`ChildActivity`. 前者包含一个`TextView`（用于显示目的），`Button`而后者只包含一个`Button`. 中的`onClickListener`for 按钮`StartActivityForResult`只是启动 的一个实例`ChildActivity`。

```
private View.OnClickListener onStart = new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        Log.d(TAG, "Start button clicked");
        Intent intent = new Intent(StartActivityForResult.this, ChildActivity.class);

        StartActivityForResult.this.startActivityForResult(intent, R.id.child_request);
    }
}; 
```

现在我想用 JUnit 测试这个方法。所以我写了以下测试：

```
package codeguru.startactivityforresult;

import android.app.Activity;
import android.app.Instrumentation;
import android.content.Intent;
import android.test.ActivityInstrumentationTestCase2;
import android.test.UiThreadTest;
import android.util.Log;
import android.widget.Button;
import android.widget.TextView;
import junit.framework.Assert;

public class StartActivityForResultTest extends ActivityInstrumentationTestCase2<StartActivityForResult> {

    public StartActivityForResultTest() {
        super(StartActivityForResult.class);
    }

    @Override
    public void setUp() throws Exception {
        super.setUp();

        Log.d(TAG, "setUp()");

        this.setActivityInitialTouchMode(false);

        this.activity = this.getActivity();
        this.resultText = (TextView) this.activity.findViewById(R.id.result_text);
        this.startButton = (Button) this.activity.findViewById(R.id.start_button);

        Intent data = new Intent();
        data.putExtra(this.activity.getString(R.string.result), RESULT);
        Instrumentation.ActivityResult result = new Instrumentation.ActivityResult(Activity.RESULT_OK, data);

        this.childMonitor = new Instrumentation.ActivityMonitor(ChildActivity.class.getName(), result, true);
        this.getInstrumentation().addMonitor(this.childMonitor);
    }

    @Override
    public void tearDown() throws Exception {
        this.activity.finish();

        super.tearDown();
    }

    @UiThreadTest
    public void testStartButtonOnClick() {
        Assert.assertTrue(this.startButton.performClick());

        Activity childActivity = this.getInstrumentation().waitForMonitorWithTimeout(this.childMonitor, TIME_OUT);
        Assert.assertNotNull(childActivity); // <------ Line 51

        Button resultButton = (Button) childActivity.findViewById(R.id.result_button);
        Assert.assertTrue(resultButton.performClick());

        Assert.assertEquals(Integer.toString(RESULT), this.resultText.getText().toString());
    }
    private Activity activity = null;
    private TextView resultText = null;
    private Button startButton = null;
    private Instrumentation.ActivityMonitor childMonitor = null;
    private static final int TIME_OUT = 5 * 1000; // 5 seconds
    private static final int RESULT = 69;
    private static final String TAG = StartActivityForResultTest.class.getName();
} 
```

运行此测试会给出以下输出：

```
codeguru@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ adb logcat -c
codeguru@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ adb shell am instrument -w -e class codeguru.startactivityforresult.StartActivityForResultTest codeguru.startactivityforresult.tests/android.test.InstrumentationTestRunner

codeguru.startactivityforresult.StartActivityForResultTest:
Failure in testStartButtonOnClick:
junit.framework.AssertionFailedError
    at codeguru.startactivityforresult.StartActivityForResultTest.testStartButtonOnClick(StartActivityForResultTest.java:51)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)
    at android.test.InstrumentationTestCase.access$000(InstrumentationTestCase.java:36)
    at android.test.InstrumentationTestCase$2.run(InstrumentationTestCase.java:189)
    at android.app.Instrumentation$SyncRunnable.run(Instrumentation.java:1602)
    at android.os.Handler.handleCallback(Handler.java:615)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method)

Test results for InstrumentationTestRunner=.F
Time: 3.248

FAILURES!!!
Tests run: 1,  Failures: 1,  Errors: 0

codeguru@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ adb logcat -d codeguru.startactivityforresult.StartActivityForResultTest:D codeguru.startactivityforresult.StartActivityForResult:D codeguru.startactivityforresult.ChildActivity:D *:S
D/codeguru.startactivityforresult.StartActivityForResultTest(  954): setUp()
D/codeguru.startactivityforresult.StartActivityForResult(  954): onCreate()
D/codeguru.startactivityforresult.StartActivityForResult(  954): Start button clicked
layne@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ 
```

据我所知，调用`startButton.performClick()`不会启动`ChildActivity`. 是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:39:05.833

如[对我的一个相关问题的回答](https://stackoverflow.com/questions/13041890/testing-that-an-activity-returns-the-expected-result/13113137#13113137)所示，问题是我正在调用`waitForMonitorWithTimeout()`UI 线程。在意识到这一点之后，它当然是完全有意义`waitForMonitorWithTimeout()`的，因为等待 UI 线程完成一些动作（即显示一个 Activity 的 UI）。但是，通过在 UI 线程上调用它，我会延迟该操作的发生。

# asp.net-mvc - 如何防止实体框架创建额外的表

> ID：13105207
> 
> 赞同：2
> 
> 时间：2012-10-27T23:49:12.730
> 
> 标签：asp.net-mvc, entity-framework

当我将实体框架升级到 5.0 时，我遇到了一个问题，以说明：

```
public class MyClass
{
   public Foo foo;

   public ICollection<Student> Students{ get; set; }

}

public class Student
{
   public int Id {get; set;}
   public string s {get; set;}
}

public class Foo
{
  public int data {get; set}
  ...
} 
```

EF 正确创建了一个名为 Student 的表，因为我已经定义了从 MyClass 到 Student 的一对多关系。我使用类 Foo 作为封装并且具有一对一的关系。

EF 4.0 没有为 . 创建单独的表`Foo`，而是使用`Foo_data`MyClass 表中的属性数据。使用 EF 5.0，我得到了另一个表`Foo`。

我怎样才能告诉 EF 不要为其创建表`Foo`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T13:01:46.030

我不是 100% 确定这为什么/如何从 EF4 发生变化，但你想要的是`Foo`一个[Complex Type](http://weblogs.asp.net/manavi/archive/2011/03/28/associations-in-ef-4-1-code-first-part-2-complex-types.aspx)。这应该源于`Foo`没有`Id`财产的事实。
尝试执行它：

```
[ComplexType]
public class Foo
{
  public int data {get; set}
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T16:47:01.037

尝试在 EF5 中迁移时，我也遇到了这个问题。我发现 EntityFramework 已经自动`DbSet`向我的`DbContext`. 它隐藏在班级的底部。

我认为这与在生成视图并提供 DbContext 时选择它作为 ViewModel 有关。不要提供 dbContext。

# php - PHP验证不是我喜欢的

> ID：13105213
> 
> 赞同：-3
> 
> 时间：2012-10-27T23:50:58.550
> 
> 标签：php, forms, validation

我已经对我的 HTML 表单进行了一些 javascript 验证，但我还需要包含一些 PHP 验证，因此当用户忘记在文本输入中输入内容或选择收音机时，我对 HTML 表单中的所有功能都进行了 PHP 验证按钮。

问题是，如果用户单击“准备问题”提交按钮，那么它应该不会显示回声，而是提交表单，我不希望这种情况发生。在成功满足 php 验证之前，我不希望提交表单。我需要在我的代码中进行哪些更改才能使其正常工作：

下面是代码：

```
<form action="QandATable.php" method="post" id="sessionForm">
<p><strong>1: Your Assessment ID: </strong><span id="idFont"><?php echo $id; ?></span></p>
<input type='hidden' name='id' value='<?php echo $id; ?>' />
<p><strong>2: Number of Assessments you Require:</strong> <input type="text" id="sessionNo" name="sessionNum" onkeypress="return isNumberKey(event)" maxlength="5" /></p>
<p><strong>3: Duration:</strong> <input type="text" id="durationpicker" name="durationChosen" readonly="readonly" /></p>
<p><strong>4: Date:</strong> <input type="text" id="datepicker" name="dateChosen" readonly="readonly" /></p>
<p><strong>5: Start Time:</strong> <input type="text" id="timepicker" name="timeChosen" readonly="readonly" /><span class="timepicker_button_trigger"><img src="Images/clock.gif" alt="Choose Time" /></span></p>
<p><strong>6: </strong><input class="questionBtn" type="submit" value="Prepare Questions" name="prequestion" onClick="myClickHandler(); return false;"/></p>      <!-- Prepare Questions here-->

</form>

<?php

if (isset($_POST['prequestion'])) {

if(empty($_POST['sessionNum'])) {
   echo "Please Set the Number of Assessments";
} 
elseif(empty($_POST['durationChosen'])) {
  echo "Please Select your Assessment's Duration";
}
elseif(empty($_POST['dateChosen'])) {
  echo "Please Select a Date";
}
elseif(empty($_POST['timeChosen'])) {
  echo "Please Select a Start Time";
}
else {

?>

         <script type="text/javascript">

function myClickHandler(){ 
     if(validation()){ 
                showConfirm(); 
     } 
}

<?php

}

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:08:14.750

PHP 是一种服务器端脚本语言，因此没有直接的方法可以在表单提交之前对其进行 PHP 验证。

如果出于某种原因必须进行 PHP 验证，您可以做的是异步提交字段值（以不可见的方式）。您可以使用 javascript 使用表单数据在隐藏的 iframe 上调用 GET 并从单独的 php 页面返回错误（例如调用 /hidden/formcheck.php?sessionNum=XX&(...) 并返回 false 或 true ）。

如果你真的想这样做，你最好使用 jQuery 或一些类似的库，它们具有大量现成的远程 URL 调用功能（如 jQuery 的[http://api.jquery.com/load/](http://api.jquery.com/load/) )

# python - 调试缓慢的 Django Admin 视图

> ID：13105222
> 
> 赞同：11
> 
> 时间：2012-10-27T23:53:46.417
> 
> 标签：python, django

我在 Django Admin 中的一些视图加载时间过长。调试 Django Admin 视图以查看正在咀嚼循环的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T00:47:20.770

正如rantanplan 评论的那样，[django 调试工具栏](https://github.com/django-debug-toolbar/django-debug-toolbar)是开始分析的最简单方法（显示在页面加载时执行的所有查询、它们的解释、它们的执行时间等）。您还可以在此处查看有关分析慢速 django 安装的问题： [如何根据执行时间分析 django 应用程序？](https://stackoverflow.com/questions/10799982/how-to-profile-django-application-with-respect-to-execution-time)

[该问题提到了 hotshot 的使用，Django 的 Wiki 在profiling django](https://code.djangoproject.com/wiki/ProfilingDjango)下也引用了它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-14T21:41:02.550

如果他们的表非常非常大（几百万条记录就可以了）并且表引擎是 MySQL 的 InnoDB，我也在 Django Admin 中看到了特定模型。我花了一段时间才想出解决方法，让我的 Django 管理员再次为拥有 100M+ 记录的表而嗡嗡作响。根本问题最终是`COUNT(*)`页面加载时的昂贵查询以及每当我使用`search_fields`ModelAdmin 中的一个查询查询时构造不佳的搜索查询。

我在这里记录了我的所有解决方案，以便他们有一天可以帮助陷入困境的 Django 同胞：http: [//crailabenz.me/2013/06/12/how-i-made-django-admin-scale/](http://craiglabenz.me/2013/06/12/how-i-made-django-admin-scale/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T23:32:15.847

如果您将 Django 与 MySQL 一起使用，那么 MySQL 中存在一个带有 INNER JOINs 优化的错误。如果您尝试在`Admin.list_display`Django 中使用外键，则会生成带有排序和 INNER JOIN 的查询，这在 MySQL 中非常慢。

有两种解决方案：

1.  使用 django-mysql-fix 后端：[https ://pypi.python.org/pypi/django-mysql-fix](https://pypi.python.org/pypi/django-mysql-fix)

2.  `get_query_set`在 AdminChangeList 中覆盖 - 删除和`select_related`设置`prefetch_related`字段 - 更多详细信息在我的其他答案中：[https ://stackoverflow.com/a/23097385/1178806](https://stackoverflow.com/a/23097385/1178806)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-01T16:25:12.417

这是一些关于由具有许多记录的 ForeignKey 表引起的缓慢编辑表单的一些很好的答案 [Django 管理员更改表单加载速度很慢](https://stackoverflow.com/questions/16755312/django-admin-change-form-load-quite-slow)

关于列表视图：1）您可以添加 list_per_page 选项并显示更少的结果：

```
class EventAdmin(admin.ModelAdmin):
    list_per_page = 20 
```

2）或使用select_related（）：

2.1) 对于 django < 1.6：

```
class EventAdmin(admin.ModelAdmin):
    def queryset(self, request):
        qs = super(EventAdmin, self).queryset(request)
        return qs.select_related('foreign_key_field1, foreign_key_field2, etc') 
```

2.2) 对于 django >= 1.6：

```
class EventAdmin(admin.ModelAdmin):
    def get_queryset(self, request):
        qs = super(EventAdmin, self).queryset(request)
        return qs.select_related('foreign_key_field1, foreign_key_field2, etc') 
```

当然，将 foreign_key_field1 和 foreign_key_field2 等替换为适当的字段名称。

# qt - 关闭主窗口并打开一个新窗口 - PyQt

> ID：13105226
> 
> 赞同：7
> 
> 时间：2012-10-27T23:54:27.223
> 
> 标签：qt, qt4, pyqt, pyqt4

在 PyQt 中，有什么方法可以关闭主窗口并打开一个新窗口？

特别是，我试图关闭一个窗口并重新打开同一个窗口。我已经尝试了所有我能想到的方法但没有成功（有些导致分段错误）。我需要这样做，因为新窗口将根据传递的参数具有一些功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-05T11:23:17.457

这个怎么样：

```
....
....

def selectMode( self ):
    self.close()
    self.field_params = params

    self.show() 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-28T01:29:47.857

好吧，不知何故，在发布后不久，我设法使它工作。这是代码：

```
class GameWindow(QtGui.QMainWindow):

def __init__(self, field_params):
    super(GameWindow, self).__init__()
    self.field_params = field_params

    #some code that ends up calling selectMode

    def selectMode(self):
        self.close()
        self.__init__(params)

def main():
    app = QtGui.QApplication(sys.argv)
    game_window = GameWindow()
    sys.exit(app.exec_()) 
```

# php - 将 Excel 数据插入 MySQL

> ID：13105230
> 
> 赞同：0
> 
> 时间：2012-10-27T23:56:09.577
> 
> 标签：php, mysql, excel

我一直在寻找和寻找，我确定我只是在寻找错误的东西，所以我正在寻找正确的方向。

我是 PHP 和 MySQL 的新手，我的第一个项目需要以不同的时间间隔将包含 20k 左右记录的 Excel 表上传到现有的 MySQL 数据库。我了解如何进行简单的上传和映射字段，但我遇到困难的是 excel 数据将转到两个单独的表，而第二个表有第一个表的外键。

我需要确定该记录是否在表一中重复，如果是，则获取主键并将其与 Excel 表中的一些数据一起插入到第二个表中。

我确定我要求的是非常基本的，但我需要知道最被接受的方法是什么，以便我可以研究和构建它。我不确定 CRUD 是否是我正在寻找的，或者我是否应该在 PHPMyAdmin 中运行特殊的 SQL 语句？

我为这个项目使用 PHP、MySQL、Godaddy 共享主机。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:04:07.940

查看 PHPExcel 处理 Excel 数据 - [http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

# symfony - Symfony2请求额外的查询参数丢失

> ID：13105236
> 
> 赞同：0
> 
> 时间：2012-10-27T23:57:01.923
> 
> 标签：symfony, request

我需要使用`site_edit`带有额外查询参数“company”=1 的路线。路线如下：

```
@Route("/_sys/site/edit/{id}", name="site_edit", defaults={"id"=null}) 
```

Symfony2 生成的链接`/_sys/site/edit?comp=1`对我来说看起来不错。虽然 $_GET 是数组（'comp'=>'1'），但它可以执行操作，但 Request#query 是空的。如果我将查询字符串调整为，`/_sys/site/edit/?comp=1`则找不到匹配的路由。如果我为 {id} 插入一些值，`/_sys/site/edit/new?comp=1`那么一切都很好（$id="new" 并且 Request#query 是数组（'comp'=>'1'）但是这种情况是应用程序逻辑不能容忍的，我不能改变.

我需要一条结构非常相似的路线，其中恰好存在一个参数 comp 和 id。所以需要将 url 生成为 [twig]`url('site_edit', {'id':positiveInteger})`或`url('site_edit', {'comp':positiveInteger})`.

这是一个错误吗？恕我直言，`/_sys/site/edit?comp=1`之前的部分？应该使用 {id}=null (ok) 和之后的部分来启动操作？应确保 Request#query-get('comp') 产生 '1'（失败）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:41:03.417

关于什么

```
@Route("/_sys/site/edit/{id}/comp/{comp}", name="site_edit", 
        defaults={"id"=null}) 
```

您可以为 comp 分配一个默认值，如果您愿意，可以将其视为 emtpy。

# c# - EF 从 View 返回同一行两次

> ID：13105237
> 
> 赞同：1
> 
> 时间：2012-10-27T23:57:20.933
> 
> 标签：c#, .net, entity

我正在使用 EF 4 从视图中选择行。这是从视图中进行的简单选择操作。由 VS 2010 生成的 edmx 中的存储模式说它有多个主键，这很好。我提供的条件是检查 ProductId 是否相同。代码类似于以下内容：

```
var returnedResult=ctx.vw_MyProductList.Where(x=>x.ProductName.Equals(suppliedProductId, StringComparision.OrdinalIgnoreCase)).ToList(); 
```

视图中有两条符合条件的记录。它返回两条我所期望的记录。但问题是它两次返回相同的第一条记录。看起来框架知道有两条记录，但是在行中的某处它将第一条记录复制到下一条记录并返回。

我签入了 SQL 探查器，将其复制并在 SQL-Server Mgmt Studio 中执行，它按预期正确返回了行。

这对我没有任何意义，除非我做错了什么。我删除了 .edmx 并重新开始，但没有用。这只是一个针对视图的简单选择语句。

看起来 EF 处理针对 Views 的语句有点不同，是吗？

# knockout.js - knockout.js 点击编辑，不切换回模糊

> ID：13105240
> 
> 赞同：3
> 
> 时间：2012-10-27T23:57:51.777
> 
> 标签：knockout.js

我对 knockoutJS 相当陌生，无法弄清楚如何使用 hasfocus 绑定来允许我“点击编辑”，但需要一个按钮来保存。

我已经设置了我的代码（基于 RP Niemeyer 的两个令人难以置信的小提琴），这样当我单击一个标签时，我会得到一个编辑输入框（如预期的那样）。问题在于使用 hasfocus 绑定。

这是我的“clickToEdit”绑定（实际上与下面提到的第二个小提琴相同，除了添加了接受和取消图标）：

```
ko.bindingHandlers.clickToEdit = {
    init: function(element, valueAccessor) {
        var observable = valueAccessor(),
            link = document.createElement("a"),

            editField = document.createElement("span");
            input = document.createElement("input");
                input.setAttribute("id", "txt_" + element);
                input.setAttribute("placeholder", observable());
            acceptButton = document.createElement("i");
                acceptButton.className = "icon-ok";
                acceptButton.setAttribute("data-bind", "click: $root.acceptElementEdit");
            cancelButton = document.createElement("i");
                cancelButton.className = "icon-repeat";
                cancelButton.setAttribute("data-bind", "click: $root.cancelElementEdit");
            editField.appendChild(input);
            editField.appendChild(acceptButton);
            editField.appendChild(cancelButton);

            element.appendChild(link);
            element.appendChild(editField);

        observable.editing = ko.observable(false);
        ko.applyBindingsToNode(link, {
            text: observable,
            hidden: observable.editing,
            click: function() {
                observable.editing(true);
            }
        });

        //Apply 'editing' to the whole span
        ko.applyBindingsToNode(editField, {
            visible: observable.editing,
        });
        //Apply the value and the hasfocus bindings to the input field
        ko.applyBindingsToNode(editField.children[0], {
            value: observable,
            //hasfocus: true
        });
    }
}; 
```

我希望输入框在可见时立即成为焦点，但我不希望它在模糊时隐藏。我想利用受保护的 observable（再次感谢 RP）在编辑时使用保存/取消。

如果此小提琴有更新：http: [//jsfiddle.net/rniemeyer/X9rRa/](http://jsfiddle.net/rniemeyer/X9rRa/)单击编辑按钮时将聚焦第一个字段，或者此小提琴的更新：http: [//jsfiddle.net/rniemeyer /2jg2F/2/](http://jsfiddle.net/rniemeyer/2jg2F/2/)不聚焦输入框并没有导致它消失，我可能可以从那里拿走它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:54:03.820

一种方法是`focused`在 name 字段中添加一个 sub-observable，绑定`hasfocus`它，并在选择项目时将其设置为 true。

所以，一个项目看起来像：

```
var Item = function(name, quantity) {
    this.name = ko.protectedObservable(name);
    this.name.focused = ko.observable();
    this.quantity = ko.protectedObservable(quantity);
}; 
```

选择您将要做的项目：

```
this.editItem = function(item) {
    self.selectedItem(item);
    item.name.focused(true);
}; 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/ks3Cj/](http://jsfiddle.net/rniemeyer/ks3Cj/)

你甚至可以避免 sub-observable 并`hasfocus: true`在输入上放一个 a ，当使用“编辑”模板时它会变得聚焦，但我可能会像上面的示例一样更明确一点。

# image-processing - 将低分辨率图像或模糊不清的图像整合到一张精确的照片中？算法？线性规划？

> ID：13105243
> 
> 赞同：1
> 
> 时间：2012-10-27T23:58:05.887
> 
> 标签：image-processing, 3d, text-extraction, feature-extraction, hdrimages

假设只有 1MB 的相机会产生一些可读的书面文字照片。现在，HDRI 能够去除阴影，有时比单独制作照片效果更好。我的朋友说，将来可以使模糊甚至低分辨率的图像变得精确。实际上意味着较差的 APS 功能设备可以拍摄非常好的照片，[此处](http://en.wikipedia.org/wiki/Active_pixel_sensor)为 APS 。现在是什么算法可以将来自同一对象的 10 张模糊/差的图片从稍微不同的角度变成一张精确的图片？它是如何完成的，我在哪里可以找到有关此的更多信息？

我经常遇到不同设备的问题，例如 iPad 2、手机摄像头等。我想找到一些处理此类照片的通用方法以及如何做？而这种通常是3D的案例有哪些问题呢？是否存在现成的线性规划简化算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:05:36.193

我想你是在问超分辨率。

[http://en.wikipedia.org/wiki/Superresolution](http://en.wikipedia.org/wiki/Superresolution)

我曾经玩过一个 matlab 程序，它拍了四张照片，然后把它们变成了一张更高分辨率的照片——这是超分辨率的一个例子。

我想可能是这个： http: [//lcav.epfl.ch/software/superresolution](http://lcav.epfl.ch/software/superresolution)

# java - super() 在子类的构造函数中不起作用

> ID：13105246
> 
> 赞同：0
> 
> 时间：2012-10-27T23:58:45.153
> 
> 标签：java, super

超类：

```
public class CwDB{
protected LinkedList<Entry> dict = null;

public CwDB(String filename){
        this.dict = new LinkedList<Entry>();
        try{
            FileReader fr = new FileReader(filename);
            BufferedReader br = new BufferedReader(fr);
            String w = null;
            while((w = br.readLine()) != null ){
                String c = br.readLine();
                this.add(w,c); //adds new Entry to dict
            }
            br.close();
            fr.close();
        }catch(IOException e){
            e.printStackTrace();
        }
}
public void add(String word, String clue){
    this.dict.add(new Entry(word,clue));
}
...
} 
```

子类：

```
public class InteliCwDB extends CwDB {

public InteliCwDB(String filename){
    super(filename);
}
} 
```

情况1：

```
CwDB db = new CwDB("src/cwdb.txt"); 
```

案例二：

```
InteliCwDB idb = new InteliCwDB("src/cwdb.txt"); 
```

问题是案例 1 完美地工作，但案例 2 根本没有。你能告诉我有什么问题吗？（我没有得到任何错误/异常，只是 idb 的列表是空的，当 db 的列表有 ober +1k 元素时......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:30:03.243

你说：

1.  没有异常/堆栈跟踪。
2.  `dict`创建的实例中的列表`InteliCwDB`为空。

如果超类构造函数以某种方式没有运行，那么您将拥有一个带有`dict`that is的实例`null`。

如果其他一些异常被抛出并且没有被捕获，那么你就不需要`InteliCwDB`检查了。

所以从表面上看，这只能意味着构造函数*正在运行*，但它读取的文件是空的。换句话说，您在不同的目录中有两个不同的“src/cwdb.txt”文件。

* * *

其他解释涉及质疑您的证据；例如

*   你描述的症状不准确。
*   您实际运行的代码与您向我们展示的代码大不相同；`dict`例如，在构造函数创建并填充它之后，还有一些其他代码正在跳入并清空。（你还没有宣布`dict`是私人的......）。
    [**更新**- 这是解释：请参阅 OP 的评论。他`add`在子类中被覆盖，这就是错误所在。]
*   您正在运行的代码与您的源代码不匹配；即您没有正确重建/重新部署。

* * *

我的建议是重新检查您的流程和证据。如果这没有帮助，则使用调试器运行应用程序，在构造函数上设置断点，然后单步执行，这样您就可以了解*实际*发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T00:06:46.007

`catch (Exception e)`出于调试目的，您应该将 a 添加到您的 try-catch 中。不属于的异常`IOException`可能会导致您出现问题。所以，试试这样：

```
public CwDB(String filename){
    this.dict = new LinkedList<Entry>();
    try{
        FileReader fr = new FileReader(filename);
        BufferedReader br = new BufferedReader(fr);
        String w = null;
        while((w = br.readLine()) != null ){
            String c = br.readLine();
            this.add(w,c); //adds new Entry to dict
        }
        br.close();
        fr.close();
    }catch(IOException e){
        e.printStackTrace();
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

# java - 使用带有 XWPFDocument 的 Apache POI 将图片添加到 .docx 文件

> ID：13105248
> 
> 赞同：2
> 
> 时间：2012-10-27T23:59:33.327
> 
> 标签：java, apache-poi, xwpf

我一直在尝试使用 Apache POI 将 .jpg 图片添加到 .docx 文件中。XWPFDocument.addPictureData 似乎不起作用。

```
XWPFDocument docx = new XWPFDocument();
FileOutputStream fos = new FileOutputStream(...);
InputStream pic = new FileInputStream(...);
docx.addPictureData(pic,Document.PICTURE_TYPE_JPEG);
docx.write(fos); 
```

这将创建一个新的、看似空白的 .docx 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:06:41.360

我可能迟到了，但这个问题[https://issues.apache.org/bugzilla/show_bug.cgi?id=49765](https://issues.apache.org/bugzilla/show_bug.cgi?id=49765)描述了你的问题。

从 poi-3.7 开始，您还可以使用`XWPFRun.addPicture(InputStream, int, String, int, int)`添加图片，如下所示：

```
docx.createParagraph().createRun().addPicture(pic, Document.PICTURE_TYPE_JPEG, "my pic", Units.toEMU(200), Units.toEMU(200)); 
```

如果我弄清楚该`addPicture`方法实际上有什么问题，我会更新答案。

# windows-8 - Xbox 视频风格的视频滑块

> ID：13105252
> 
> 赞同：0
> 
> 时间：2012-10-28T00:00:44.813
> 
> 标签：windows-8, windows-runtime

有没有一种简单的方法可以在 Windows 8 应用程序中实现 Xbox 视频风格的滑块？例如，在 Windows 8 上打开 Xbox Video 应用程序，然后播放任何视频。滑块在细线上有一个手指大小的圆圈，当您单击/点击它时，圆圈会移动到线条的底部。

我实际上还没有开始编写任何代码，我只是好奇这是一个可公开复制的东西，还是我必须从头开始重新创建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:20:18.040

看起来相当简单，但可能需要一些工作才能让它恰到好处。如果您指定了您计划使用的语言，您可能会得到一些指示。如果您喜欢 XAML，那么您可以使用 RenderTransform 和 RenderTransformOrigin 来旋转圆并平移滑块。

# c++ - ActiveX 和 COM

> ID：13105254
> 
> 赞同：2
> 
> 时间：2012-10-28T00:01:06.573
> 
> 标签：c++, gcc, com, activex

我从 C++ 开始，出现了几个问题：

1.  ActiveX 和 COM 有什么区别？

2.  我可以将它们与 GCC 编译器（如 MinGW）一起使用吗？

我希望你能帮助我。

亲切的问候和感谢您的提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:40:05.927

ActiveX 是使用 COM 构建的。在某种程度上，这是它的进一步特征发展。

您可以使用 MinGW，尽管这不是一项简单的任务，因为您必须编写很多代码（类型信息、虚拟表等）。

# python-3.x - Virtualenv 和 libpython

> ID：13105256
> 
> 赞同：5
> 
> 时间：2012-10-28T00:01:34.983
> 
> 标签：python-3.x

我正在运行 arch，在我之前设置的项目中，我使用 virtualenv 设置了一个小 python 沙箱。此时我盒子上的默认 python 版本是 3.2 它已经升级到 3.3，但是当我进入我的（现在是旧的）virtualenv 并尝试运行 python 时，我得到了错误：

```
python: error while loading shared libraries: libpython3.2mu.so.1.0: cannot open shared object file: No such file or directory 
```

这是我可以解决的问题，以便将来如果/当我升级我的 python 时，我最终不会丢失旧 virtualenv 需要的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-23T15:07:38.590

Virtualenvs 直接依赖于创建它们的 python 运行时，因此当您删除运行时时，virtualenv 也会停止工作。

解决方案是使用[pipenv](https://github.com/pypa/pipenv)而不是包，因为它在顶级文件夹中`virutalenv`名为**Pipfile的文件中包含项目的所有依赖项。**Arch Linux 中有一个 pipenv[包](https://www.archlinux.org/packages/community/any/python-pipenv/)。对于独立的 python 安装，可以使用`pip3 install pipenv`.

每当 Python 被替换（或者在您的情况下升级）时，您必须删除以前`pipenv --rm`在环境所在目录中使用的 virtualenv。但是在升级 Python 之后，您必须手动编辑 Pipfile 以`python_version = "3.7"`从文件中删除（或任何版本）行，因为这会导致`pipenv shell`或`python3`在旧环境被删除后其中的调用失败。

请注意，在此方法中，virtualenv 仍与您运行的 python 版本相关联`pipenv shell`。如果您同时安装另一个 python 版本，为其安装 pipenv 包并尝试运行`pipenv shell`，它将使用创建它的 virtualenv（第一个 python 运行时）的 python 运行时。

我通过在 Cloud9 上构建 Python 3.7 运行时测试了所有这些，并获得了 pipenv。然后我删除了它并使用 pipenv 在同一安装目录中构建了一个 Python 3.5 运行时。然后我也删除了它并类似地构建了 Python 3.8。最后，我安装了 Python 3.7 和 3.8，两者都使用 pipenv。

# android - Android：我在哪里可以上传 XML 文件

> ID：13105260
> 
> 赞同：0
> 
> 时间：2012-10-28T00:01:51.703
> 
> 标签：android, xml, parsing

我正在将 XML 文件从 HTTP 服务器解析到我的 android 应用程序，但我不知道在哪里可以在服务器中上传 XML 文件。有人可以帮我吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:06:03.663

[如果你问，你在哪里可以得到一个服务器，这样你就可以上传 xml 文件并让你的应用程序从那里解析文件，如果你谷歌“免费共享主机”](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&sugexp=les;&gs_nf=3&gs_mss=free%20shared%20h&tok=NnjLQmMel0_CstNbx8_PsA&pq=free%20shared%20server&cp=15&gs_id=1w&xhr=t&q=free%20shared%20hosting&pf=p&sclient=psy-ab&oq=free%20shared%20hos&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=ac9c1762bf41c86b&bpcl=35466521&ion=1&biw=1680&bih=925)，你可以获得免费的共享服务器。

# youtube - 如何在嵌入 Youtube 视频后显示某些内容

> ID：13105262
> 
> 赞同：0
> 
> 时间：2012-10-28T00:02:12.183
> 
> 标签：youtube, webpage

我正在建立一个网站，对此我很陌生。我想要做的是在网站中嵌入一个 youtube 视频，一旦视频结束，它会在网站上显示其他内容，在我的例子中是用户可以输入单词的 editText。

我不在乎 editText 是否出现在视频所在的位置或视频的下方或任何类似的内容..

我发现了一些事情，例如：

[视频播放完成后如何显示灯箱？](https://stackoverflow.com/questions/10256636/how-to-display-lightbox-after-video-play-finishes)

但什么也没发生

也试过这段代码

```
<html>
<head>
<script type="text/javascript" src="public/javascripts/swfobject.js"></script> 
</head>

<body>

<div id="ytapiplayer">
    You will need Flash 8 or better to view this content.
</div>

<script type="text/javascript">
    var params = { allowScriptAccess: "always" };
    var atts = { id: "ytplayer" };
    swfobject.embedSWF("http://www.youtube.com/v/OQSNhk5ICTI&enablejsapi=1&playerapiid=ytplayer", "ytapiplayer", "425", "365", "8", null, null, params, atts);

    function onYouTubePlayerReady(playerId) {
        alert('Player loaded');
        ytplayer = document.getElementById("ytplayer");
    }

    function play() { 
        alert(typeof ytplayer);
        if (ytplayer) { 
            alert(ytplayer.playVideo); 
            ytplayer.playVideo(); 
        } 
    }
</script>

 <a href="javascript:void(0);" onclick="play();">Play</a>

 </body>
 </html> 
```

但我没有看到视频出现。如果我点击播放，我会收到一条消息说“未定义”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:29:47.740

您链接中的方法应该有效。[YouTube Player API Reference](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)做了类似的事情，注册一个函数`onStateChange`。当视频结束时，该函数应该被传递`0`。

您可能会尝试在视频上放置一个元素，但您必须告诉 flash 坚持它的 z 级别才能做到这一点。您可以添加`wmode: "opaque"`到`playerVars`变量中。这应该允许您在顶部放置一个元素。

编辑 - 试试这个：

```
<!DOCTYPE html>
<html>
  <body>
    <div id="ytapiplayer"></div>
    <script>
      var tag = document.createElement('script');
      tag.src = "//www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('ytapiplayer', {
          height: '390',
          width: '640',
          videoId: 'OQSNhk5ICTI',
          events: {
            'onStateChange': onPlayerStateChange
          }
        });
      }

      function onPlayerStateChange(event) {
        if (event.data == 0) {
          alert("Finished!");
        }
      }

    </script>
    <p>
      <a href="javascript:void(0);" onclick="player.playVideo(); return false;">Play</a>
    </p>
  </body>
</html> 
```

# ruby-on-rails - 如何创建一个验证来检查多个布尔值中的至少一个是否为真？

> ID：13105264
> 
> 赞同：0
> 
> 时间：2012-10-28T00:03:00.463
> 
> 标签：ruby-on-rails, ruby, validation, model

我有一个管理任务的 Rails 3.2 应用程序。在这里，任务被分配给用户。任务模型有多个布尔用户变量。我将如何添加验证以说明至少一个用户设置为 true？

原来的：

```
class Task < ActiveRecord::Base
  attr_accessible :title, :user1, :user2, :user3, :user4:
  validates :title, :presence => true
  validates :is_assigned

  def is_assigned
    if #AT_LEAST_ONE_USER_IS_TRUE
      errors.add("The task must be assigned to at least one user.")
    end
  end

end 
```

编辑：

```
class Task < ActiveRecord::Base
  attr_accessible :title, :user1, :user2, user3, :user4

  validates :title, :presence => true
  validate :is_assigned

  def is_assigned
    unless @user1 || @user2 || @user3 || @user4
      errors.add(:user1, "The task must be assigned to at least one user.")
    end
  end

end 
```

我想我越来越近了，但这不起作用。错误似乎总是出现。

而且看起来 errors.add 需要另一个变量。我如何给它所有用户而不仅仅是 user1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:28:34.163

要检查至少一个用户是否为真：

```
if @user1 || @user2 || @user3 || @user4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:44:14.870

这最终成为我的最终解决方案：

```
class Task < ActiveRecord::Base
  attr_accessible :title, :user1, :user2, user3, :user4

  validates :title, :presence => true
  validate :is_assigned

  def is_assigned
    unless user1 || user2 || user3 || user4
      errors[:base] << "The task must be assigned to at least one user."
    end
  end

end 
```

# android - 此方法中的异常 (View.getWindowVisibleDisplayFrame())？

> ID：13105269
> 
> 赞同：3
> 
> 时间：2012-10-28T00:04:10.947
> 
> 标签：android

我在 View.getWindowVisibleDisplayFrame() 方法中遇到异常，我该怎么办？以下是 logcat 响应。

```
progressBar = (ProgressBar) findViewById(R.id.webview_progress);
        webview = (WebView) findViewById(R.id.book_ticket);
        webview.loadUrl("https://www.irctc.co.in/mobile");

        webview.setWebChromeClient(new WebChromeClient(){
            public void onProgressChanged(WebView view, int progress) 
            {
            if(progress < 100 && progressBar.getVisibility() == ProgressBar.GONE){
                progressBar.setVisibility(ProgressBar.VISIBLE);
            }
            progressBar.setProgress(progress);
            if(progress == 100) {
                progressBar.setVisibility(ProgressBar.GONE);
            }
         }
        }); 
```

日志猫

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:200)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1019)
Caused by: java.lang.NullPointerException
at android.view.View.getWindowVisibleDisplayFrame(View.java:4082)
at com.pad.android.util.AdRequest.makeLBRequest(AdRequest.java:113)
at com.pad.android.iappad.AdTask.doInBackground(AdTask.java:70)
at com.pad.android.iappad.AdTask.doInBackground(AdTask.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:185)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
... 4 more 
```

# ruby-on-rails - 在 Rails 中反向 DNS 查找请求 IP

> ID：13105278
> 
> 赞同：2
> 
> 时间：2012-10-28T00:06:26.093
> 
> 标签：ruby-on-rails, authentication, hostname, reverse-dns

我有一个 Rails 3 站点，我在其中推出了自己的用户身份验证。

我现在正在集成第三方服务（Fotomoto），该服务在某些页面上被 javascript 调用，需要从他们的服务中获取以从该页面中提取内容。如何有效地将来自某个域 *.fotomoto.com 的请求列入白名单。

我想简单地向我的 before_filter 添加一些代码，该代码足够聪明，可以查看请求者并确定它是否来自该域。Fotomoto 告诉您如何允许他们在 Apache http 级别访问，但我只想授予他们访问某些控制器操作的权限。

```
def my_before_filter
  unauthorized_access unless signed_in? || request.remote_ip == ??? #check against *.fotomoto.com
end 
```

理想情况下，我会咨询我信任的 DNS 服务器。如果这很重要，我将与 Heroku 一起托管。

# c++ - “'void'之前的预期不合格ID”和“类中的字符串没有命名类型”错误

> ID：13105286
> 
> 赞同：3
> 
> 时间：2012-10-28T00:08:40.913
> 
> 标签：c++, string, class

我不确定如何在这里实施解决方案。

编译时的错误是：-

```
error: expected unqualified-id before 'void'

error: 'string' in class 'UserDirectory' does not name a type

error: 'string' in class 'UserDirectory' does not name a type 
```

===========

```
**UserDirectory.cpp**

#include "UserDirectory.h"
#include <iostream>
#include <string>
using namespace std;

UserDirectory::UserDirectory(){
cout << "UserDirectory Constructor created\n\n";
}
UserDirectory::void setName(string x){
    name = x;
}
UserDirectory::string getName(){
    return name_;
}
UserDirectory::string name; 
```

===========

```
**UserDirectory.h**

#ifndef USERDIRECTORY_H
#define USERDIRECTORY_H
#include <iostream>
#include <string>

class UserDirectory
{
    public:
    UserDirectory();
    void setName( std::string x );
    std::string getName();
    private:
    std::string name_;
};

#endif // USERDIRECTORY_H 
```

========

```
**main.cpp**

#include <iostream>
#include <string>
#include "UserDirectory.h"
using namespace std;

int main(){

    UserDirectory user1;
string inputName;

cout << "Enter your name: ";
cin >> inputName;
user1.setName( inputName );
cout << "\nYou entered " << user1.getName();

    return 0;
} // end main 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T00:12:02.807

你放`UserDirectory::`错地方了。范围解析运算符 ( `::`) 用于解析名称的范围。`void`并且`string`不需要解析，因为它们在外部范围内可见；只有类内的名称需要范围解析，因此它适用于这些名称：

```
void UserDirectory::setName(string x){
    ...
}

string UserDirectory::getName(){
    ...
} 
```

当您说 时`UserDirectory::void`，您是在告诉编译器`void`您的类中有一个类型`UserDirectory`，但显然没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T00:11:56.027

不需要`name`单独定义，需要切换命名空间和类型，像这样：

```
void UserDirectory::setName(string x){
    name = x;
}
string UserDirectory::getName(){
    return name_;
}

// This would be necessary if "name" were static;
// Since it is not, remove this line:
string UserDirectory::name; 
```

# javascript - 函数内部的javascript变量指针

> ID：13105289
> 
> 赞同：1
> 
> 时间：2012-10-28T00:09:48.667
> 
> 标签：javascript, function, variables, variable-assignment

所以这里有一个奇怪的：

```
var a = true;
function f(v){ v = !v; }        //can this function actually change a?
f(a);   //a is still true.. 
```

该函数显然只更改内部*`v`*变量的值。

我在一个应用程序上遇到了这个问题，该应用程序应该`DOM`在运行时动态更改 Elements 的属性值。所以理想情况下应该有一个函数将属性作为参数并重新分配它，对吗？

为了清楚起见 - 我实际上是在尝试在运行时为 DOM 元素的属性分配新值：我有一个反射器应用程序，它遍历对象的成员，我希望它能够更改它遇到的属性的值，所以 f函数将属于 BooleanSwitch 构造函数，该构造函数为反射对象中的每个布尔类型属性构建一个 booleanSwitch 对象。booleanSwitch 可以是屏幕上的一个简单按钮。我希望能够通过单击按钮来更改手头对象的实际属性的值.. 谁能想到一种方法来做到这一点？

任何想法都可以理解..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T00:13:21.360

*原始值是按值*传递的。您确实将*布尔值*传递给该函数，因此它不能更改在`a`外部声明的变量的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:16:58.797

对象（数组、函数）作为引用传递。复制所有其他类型（int、string 等）。

在您的示例中，“v”是“a”的副本，因此“a”不会改变。

您需要从 switch 函数返回一个值，并将其分配给 a。例如：

```
function switch(v)
{
//do something
return v;
}

a = switch(a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T00:22:52.090

该函数必须返回一个值。

```
function switchValue(v){ 
  return !v;
}        

var a = true;
switchValue(a); 
```

这是因为 JavaScript 引用特性。如果你传入变量而不返回它，变​​量只会在本地改变。如果您想更改它，您必须专门返回它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T13:01:35.643

所以只是想出了一个很好的方法来做到这一点：

布尔值，因为其他原始值是按值传递的，但对象是通过引用传递的。传递给函数 f 的布尔值如果属于对象，则可以通过引用传递。所以：

```
var a = true;
function f(v, z){
    v[z] = !v[z];
{
f(window, "a"); 
```

这看起来有点奇怪并且仍然是硬编码的，但是可以在遍历对象时动态地使用属性。

在我的实际应用程序中，它看起来像这样：

```
function BooleanSwitch(obj, property){
    var btn = document.createElement("button");
    btn.onclick = function(){
        obj[property] = !obj[property];
    }
    return btn;
}

function reflect(obj){
    for(member in obj){
        switch(typeof(obj[member])){
            case "boolean":
                var booleanSwitch = BooleanSwitch(obj, member);
                document.body.appendChild(booleanSwitch);  //or whatever..
                break;
            case "string": //..other stuff..
        }
    }
}

reflect(document); 
```

这将为文档对象的每个可枚举布尔属性创建一个布尔开关。当您单击此按钮时，它会更改文档的实际属性。

# android - 从类扩展服务中获取共享偏好

> ID：13105292
> 
> 赞同：0
> 
> 时间：2012-10-28T00:10:08.180
> 
> 标签：android, service, sharedpreferences

我目前正在开发一个 android 项目，该项目具有配置后台服务的用户界面。

我已成功打开并修改了应用程序首选项文件中的值，但随后我尝试在服务类中打开共享首选项文件，但出现空指针异常。

我正在使用以下代码打开文件

```
SharedPreferences settings = this.getSharedPreferences("prefs", 0); 
```

然后我使用以下方法访问共享首选项，但是当我调试时，我认为它并没有走到这一步，我认为它在上面的行中失败了。

```
if (isPowerConnected() && !wakeLock.isHeld() && settings.getBoolean("appEnabled", true)) 
```

下面是抛出的异常。

```
10-28 01:02:37.453: E/EnableWakeLock(18665): java.lang.NullPointerException
10-28 01:02:37.453: W/System.err(18665): java.lang.NullPointerException
10-28 01:02:37.453: W/System.err(18665):    at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:153) 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:31:40.303

由于您尝试从 Service 读取 SharedPreferences ，因此您应该通过

```
PreferenceManager.getDefaultSharedPreferences() 
```

代替

```
this.getSharedPreferences() 
```

getDefaultSharedPreferences() takes a Context - your Service as a parameter. Please refer to the documentation [http://developer.android.com/reference/android/preference/PreferenceManager.html#getDefaultSharedPreferences%28android.content.Context](http://developer.android.com/reference/android/preference/PreferenceManager.html#getDefaultSharedPreferences%28android.content.Context)

# asp.net - 在构建过程中电池耗尽后无法加载组件

> ID：13105293
> 
> 赞同：0
> 
> 时间：2012-10-28T00:10:25.167
> 
> 标签：asp.net, iis, build

我在笔记本电脑上开发了我的 asp.net 应用程序，但是在构建应用程序时它的电池电量不足，因此笔记本电脑关闭了。我现在有一个例外，它说：

```
Could not load file or assembly 'Infragistics2.WebUI.UltraWebGrid.v7.3' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG)) 
```

我正在开发一个 Web 应用程序，并尝试加载登录页面。

我不知道我该如何克服这一点。有谁知道解决方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:12:32.690

如果笔记本电脑在构建过程中死机，这可能是临时文件损坏的问题。

尝试**删除 ASP.NET 临时文件**，然后执行 Clean + Rebuild。（ASP.NET 临时文件位于**c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files**（或 Framework32 和/或 v2...）和**%temp%\Temporary ASP。网络文件**

*（注意，只删除临时文件夹的内容，不要删除该文件夹，因为如果 IIS 尝试重新创建该文件夹，并且没有足够的权限，您可能会遇到麻烦）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:56:33.807

尝试使用基础设施版本实用程序来升级您的网站/解决方案

# android - Android 模拟主页键启动意图

> ID：13105294
> 
> 赞同：0
> 
> 时间：2012-10-28T00:10:32.753
> 
> 标签：android, android-intent, android-launcher, android-homebutton

在某些模拟器中，如果用户在启动器中按下 home 键，它会执行不同的任务，而不是从另一个应用程序切换到它：

例如，如果用户按下主页，它会启动主页。但是如果用户在启动器中再次按下 home 键，它会打开应用程序抽屉。

我想知道如何做到这一点？我试图通过将意图操作设置为`ACTION_MAIN`和类别设置为`CATEGORY_HOME`无济于事来模拟家庭启动意图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T13:13:21.847

简短的回答是，当 an`Activity`已经在内存中时，新的调用`startActivity()`将导致`Activity.onNewIntent()`被调用，而不是通常的`onCreate()`方法。

*   1 点击转到`onCreate()`
*   2 次点击转到`onNewIntent()`

因此，您可以通过覆盖该`onNewIntent()`方法来实现此行为。

* * *

对于长答案，请在此链接上查看问题的完整描述：

*   [Android 启动器在启动器中按主页以转到默认屏幕](https://stackoverflow.com/a/13203826/383414)

我不能说比这更好。

# ruby-on-rails - 使用 SQL 查询（mysql2 类型）获取数据时在 Ruby 中使用分页

> ID：13105304
> 
> 赞同：1
> 
> 时间：2012-10-28T00:12:24.110
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, will-paginate, kaminari

我的控制器中有一个查询，如下所示：

```
@temp = connection.execute("select test_id from mastertest limit 500;") 
```

现在，我在视图中的表格中显示此处获取的结果。但我想将结果限制为每页 10 行。我知道我可以使用 will_paginate 和 kaminari

[https://github.com/amatsuda/kaminari](https://github.com/amatsuda/kaminari)

[https://github.com/mislav/will_paginate](https://github.com/mislav/will_paginate)

但是谁能给我确切的语法或示例代码以在我的 SQL 查询的情况下应用分页以及如何在视图中显示结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T07:37:46.277

如果要使用 sql 查询进行分页，则需要使用带有**限制**子句的 mysql **offset关键字。**所以你会得到准确的分页结果。我希望下面的代码对您有所帮助。

 **```
current_page = current_page || 1
per_page = 10
records_fetch_point = (current_page - 1) * per_page

query = "select test_id from mastertest limit #{per_page} 
         offset #{records_fetch_point};"

@temp = connection.execute(query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:10:36.400

你不能只使用`mastertest`模型吗？而不是`connection.execute`
（模型在 app/models 中）

```
#using kaminari
relation = Mastertest.order(:id).limit(500).page(1).per(10)

relation.each do |row|
  puts row.test_id
end 
```**

# flash - 鼠标事件不存在

> ID：13105306
> 
> 赞同：1
> 
> 时间：2012-10-28T00:13:01.647
> 
> 标签：flash, click, mouseevent, addeventlistener

我似乎无法让我的 MouseEvent 工作。我得到 1120：访问未定义的属性 MouseEvent 错误。我确定这很简单，但我似乎无法弄清楚。

```
package {
import flash.display.MovieClip;
import flash.events.Event;

import gameLib.Layer;
import gameLib.Audio;
import gameLib.GameSprite;

public class Game extends MovieClip {

    public function Game() {
        OM.game = this;

        Audio.init();
        Layer.init(stage);

        OM.buyButton = new BuyButton(stage);
        Layer.world.addChild(OM.buyButton);
        OM.buyButton.addEventListener(MouseEvent.CLICK, OM.buyButton.onClick); 
```

我还有其他要关注的代码。我所遵循的代码不是以 OOP 样式编写的，而是以过程方式编写的，所以我假设它与此有关。谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:35:46.690

您需要导入 MouseEvent：

```
import flash.events.MouseEvent; 
```

应该需要[导入，但我也注意到一些脆弱性，尤其是在 Flash Professional 中。](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000183.html)

> import 语句仅适用于调用它的当前脚本（框架或对象）。如果脚本中未使用导入的类，则该类不会包含在生成的 SWF 文件的字节码中，并且该类不可用于包含 import 语句的 FLA 文件可能加载的任何 SWF 文件。

通常我会快速扫描代码以查找行上的警告符号或带下划线的语法高亮；然后，使用内容辅助`ctrl`+`space`来生成导入。

如果您使用的是 Flash Builder，组织导入语句命令很方便：

窗户：`ctrl`+ `shift`+`O`

麦克：`command`+ `shift`+`O`

# java - 从布局/活动的顶部开始

> ID：13105307
> 
> 赞同：2
> 
> 时间：2012-10-28T00:13:09.710
> 
> 标签：java, android

我正在开发 android 应用程序，我有一个屏幕，用户可以在其中注册并放置有关他自己的信息。这是一个长屏幕，用户需要向下滚动才能完成它。当我用模拟器测试它时，课程总是转到最后一个`EditText`盒子，即`android:id="@+id/tbJoinBio`.

我希望课程从顶部盒子开始`android:id="@+id/tbJoinUsername`

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@color/light_green" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_weight="0.29" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="950dp" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="303dp"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_alignParentTop="true"
                    android:layout_marginTop="25dp"
                    android:text="@string/join_welcome" />

                <TextView
                    android:id="@+id/lblLoginUsername"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/textView1"
                    android:layout_below="@+id/textView1"
                    android:layout_marginTop="18dp"
                    android:text="@string/login_label_username"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinUsername"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/lblLoginUsername"
                    android:layout_below="@+id/lblLoginUsername"
                    android:ems="10"
                    android:text="user"
                    android:inputType="text" />

                <TextView
                    android:id="@+id/lblLoginPassword"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/tbJoinUsername"
                    android:layout_below="@+id/tbJoinUsername"
                    android:layout_marginTop="10dp"
                    android:text="@string/login_label_password"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinPassword"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/lblLoginPassword"
                    android:layout_below="@+id/lblLoginPassword"
                    android:text="password"
                    android:ems="10"
                    android:inputType="textPassword" />

                <TextView
                    android:id="@+id/TextView01"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/tbJoinPassword"
                    android:layout_marginTop="16dp"
                    android:text="@string/join_password_confirm"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinPassword2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/TextView01"
                    android:ems="10"
                    android:inputType="textPassword"
                    android:text="password" />

                <TextView
                    android:id="@+id/TextView02"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/tbJoinPassword2"
                    android:layout_marginTop="18dp"
                    android:text="@string/join_email"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinEmail"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/TextView02"
                    android:ems="10"
                    android:text="user@user.com"
                    android:inputType="text" />

                <Button
                    android:id="@+id/btnRegister"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentLeft="true"
                    android:text="@string/join_button_register" />

                <TextView
                    android:id="@+id/lblFirstName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/tbJoinEmail"
                    android:layout_marginTop="14dp"
                    android:text="First Name"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinFirstName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/lblFirstName"
                    android:ems="10"
                    android:text="User"
                    android:inputType="text" >

                    <requestFocus />
                </EditText>

                <TextView
                    android:id="@+id/lblMiddleName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignTop="@+id/lblFirstName"
                    android:layout_marginLeft="150dp"
                    android:layout_toRightOf="@+id/lblFirstName"
                    android:text="MI"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinMiddleName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="M"
                    android:layout_alignLeft="@+id/lblMiddleName"
                    android:gravity="center"
                    android:layout_below="@+id/lblMiddleName"
                    android:ems="2"
                    android:inputType="text" >

                    <requestFocus />
                </EditText>                

                <TextView
                    android:id="@+id/lblLastName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/tbJoinFirstName"
                    android:layout_marginTop="14dp"
                    android:text="Last Name"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinLastName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Name"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/lblLastName"
                    android:ems="10"
                    android:inputType="text" >

                    <requestFocus />
                </EditText>

                <TextView
                    android:id="@+id/lbldob"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/tbJoinLastName"
                    android:layout_marginTop="14dp"
                    android:text="DOB (MMDDYYYY)"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoindob"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="10221955"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/lbldob"
                    android:ems="10"
                    android:inputType="text" >

                    <requestFocus />

                </EditText>      

                <TextView
                    android:id="@+id/lblStreetAddr"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/tbJoindob"
                    android:layout_marginTop="14dp"
                    android:text="Street Address"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinStreetAddr"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="United States"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/lblStreetAddr"
                    android:ems="10"
                    android:inputType="text" >

                    <requestFocus />
                </EditText> 

                <TextView
                    android:id="@+id/lblPhoneNum"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/tbJoinStreetAddr"
                    android:layout_marginTop="14dp"
                    android:text="Phone Number"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinPhoneNum"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="2155555555"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/lblPhoneNum"
                    android:ems="10"
                    android:inputType="text" >

                    <requestFocus />

                </EditText>      

                <TextView
                    android:id="@+id/lblBio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/tbJoinPhoneNum"
                    android:layout_marginTop="14dp"
                    android:text="About you"
                    android:textAppearance="?android:attr/textAppearanceMedium" />

                <EditText
                    android:id="@+id/tbJoinBio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="I'm awesome"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/lblBio"
                    android:ems="10"
                    android:inputType="text" >

                    <requestFocus />

                </EditText>                
            </RelativeLayout>

        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T00:14:06.257

删除标签

```
<requestFocus /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T00:16:00.377

将`<requestFocus/>`标签移动到`android:id="@+id/tbJoinUsername`元素。

# lua - 何时在电晕中的精灵上触发反弹事件阶段

> ID：13105309
> 
> 赞同：0
> 
> 时间：2012-10-28T00:13:36.587
> 
> 标签：lua, box2d, coronasdk

究竟是什么触发了电晕 lua 脚本中的“反弹”事件（event.phase ==“反弹”）。我添加了一个带有物理特性的精灵，它从地面反弹（在屏幕上），但是这个事件阶段没有被触发，即使其他事件阶段被触发（“开始”、“结束”等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T13:45:58.927

该`"bounce"`事件在精灵动画在播放过程中由向前变为向后改变方向时触发，它与物理碰撞阶段无关，可以是`"began"`和`"ended"`。

# c - 位域的类型是什么？

> ID：13105313
> 
> 赞同：19
> 
> 时间：2012-10-28T00:14:06.130
> 
> 标签：c, language-lawyer, bit-fields, c11

我在 C 标准中找不到任何指定的地方。例如，在

```
struct { signed int x:1; } foo; 
```

是`foo.x`type 的左值`int`，还是别的什么？它是类型的左值似乎不自然，`int`因为您不能在其中存储任何类型`int`的值，只能存储 0 或 -1，但我找不到任何可以为其分配不同类型的语言。当然，在大多数表达式中使用，它`int`无论如何都会被提升为，但实际类型在 C11 中会产生差异`_Generic`，而且我在标准中找不到任何关于位域如何交互的语言`_Generic`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T07:59:03.887

正如 Jonathan 已经引用的那样，p5 清楚地说明了位域的类型。

您还应该记住的是，在 6.3.1.1 中有一个位域算术转换的特殊规则，基本上说明如果 an可以表示所有值，那么在大多数表达式中，`int`这样的位域*将转换*为 an 。`int`

a 中的类型`_Generic`应该是声明的类型（以符号故障为模），因为似乎一致认为在那里不适用算术转换。所以

```
_Generic((X), int: toto, unsigned: tutu)
_Generic(+(X), int: toto, unsigned: tutu) 
```

如果`X`是一个无符号位域，其宽度的所有值都适合`int`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-20T06:26:58.903

C11 规范当然没有明确说明这一点，并且可能存在缺陷。

我相信这`foo.x`是一个类型不是 的左值`int`，但我的理由很弱：

6.2.7 第 1 段说：

> 如果它们的类型相同，则两种类型具有*兼容的类型。*

6.3 第 2 段说：

> 将操作数值转换为兼容类型不会导致值或表示形式发生变化。

如果`foo.x`是 type 的左值`int`，那么它将与其他`int`s 兼容，因此`foo.x = 5`应该导致`foo.x`具有值`5`（根据 6.3p2）。这显然不可能发生，表明与`foo.x`不兼容`int`，表明这`foo.x`不是类型的左值`int`。

`foo.x`与`int`. _ 也许没有发生转换（在 6.3.1 意义上），并且`foo.x`通过标准中未讨论的某种机制获得其价值。或者我可能误解了“算术操作数”的含义，并且 6.3.1 不适用于左值。

还有 6.3.1.1 第 1 段第 2 条，它说：

> *   有符号整数类型的秩应大于任何精度较低的有符号整数类型的秩。

`foo.x`比普通的精度低`int`（当用作左值时，而不是当它“转换为存储在指定对象中的值”时，如 6.3.2.1p2 中所述），因此它必须具有不同的整数转换等级。这也表明它不是一个`int`.

但我不确定我的解释是否有效或是否符合委员会的意图。

我建议提交一份关于此的缺陷报告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T00:34:45.817

鉴于您包含了`signed`限定符，那么可以存储在 1 位位字段中的唯一值确实是 -1 和 0。如果您省略了限定符，则将由实现定义“普通”`int`位字段是否为签名或未签名。如果您指定`unsigned int`了 ，那么值当然是 0 和 +1。

该标准的相关部分是：

> ### §6.7.2.1 结构和联合说明符
> 
> ¶4 指定位域宽度的表达式应为具有非负值的整数常量表达式，该值不超过在省略冒号和表达式时将指定的类型的对象的宽度。^(122))如果值为零，则声明不应有声明符。
> 
> ¶5 位字段的类型应为 、 、 或其他一些实现定义的类型的合格或非`_Bool`合格`signed int`版本`unsigned int`。是否允许原子类型是实现定义的。
> 
> ¶10 位字段被解释为具有由指定位数组成的有符号或无符号整数类型。^(125))如果值 0 或 1 存储到类型为 的非零宽度位域中`_Bool`，则该位域的值应与存储的值进行比较；`_Bool` 位域具有 a 的语义`_Bool`。
> 
> ^(122))虽然对象中的位数`_Bool`至少为`CHAR_BIT`，但 a 的宽度（符号位和值位的数量）`_Bool`可能只有 1 位。
> 
> ^(125))如上面 6.7.2 中所述，如果使用的实际类型说明符是`int`或定义为的 typedef-name `int`，则位域是有符号还是无符号是实现定义的。

脚注 125 指出：

> ### §6.7.2 类型说明符
> 
> ¶5每个逗号分隔的多重集都指定相同的类型，除了位域，它是实现定义的，说明符`int`指定与 相同的类型 `signed int`或相同的类型`unsigned int`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-21T23:50:43.997

C11 标准在 6.7.2.1p5 中规定：

> 位域的类型应为 _Bool、signed int、unsigned int 或其他一些实现定义的类型的合格或非合格版本。

这是一个约束，这意味着，如果程序声明的位字段的类型不属于上述类别之一，则必须打印诊断信息。

然而，它在 6.7.2.1p10 中继续说：

> 位域被解释为具有由指定位数组成的有符号或无符号整数类型。

我相信他们的意思是，虽然你必须用类似的东西声明位字段`signed int x:n`，但左值表达式的类型`foo.x`是其他一些有符号整数类型，称之为 T。T 是由 n 位组成的有符号整数类型，必须符合Sec. 中给出的所有有符号整数类型的约束。6.2.6。但 T 不一定与名为 的标准有符号整数类型兼容`signed int`。（事实上​​，T 可能与该标准类型兼容的唯一情况是，如果 n 恰好等于有符号 int 中的位数。）

不幸的是，标准没有提供任何命名类型 T 的方法，所以我看不出它如何用于 a `_Generic`，至少不能以可移植的方式使用。C 语言的特定实现可能会提供一种机制来命名这种类型，但标准并不强制它们这样做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-13T14:38:03.740

> ...实际类型在 C11 中有所不同`_Generic`

1 编译器如何处理位字段类型的结果如下所示。

8 位和 32 位字段与通常的嫌疑人匹配。

1 位位域的类型是什么？正如其他人所引用的那样，它的“名称”没有明确指定，但它不是任何预期的标准类型。

这没有引用规范，但确实展示了受人尊敬的编译器如何解释 C 规范。

* * *

GNU C11 (GCC) 版本 5.3.0 (i686-pc-cygwin)
由 GNU C 版本 5.3.0、GMP 版本 6.1.0、MPFR 版本 3.1.4、MPC 版本 1.0.3 编译

```
#define info_typename(X) _Generic((X), \
  _Bool: "_Bool", \
  unsigned char: "unsigned char", \
  signed char: "signed char", \
  char: "char", \
  int: "int", \
  unsigned : "unsigned", \
  default: "default" \
  )

#define TYPE_NAME(t) { printf("%s\n", info_typename(t)); }
#include <stdio.h>

int main() {
  struct {
    signed int x1 :1;
    signed int x8 :8;
    signed int x32 :32;
    _Bool b;
    signed char sc;
    char c;
    unsigned char uc;
    int i;
    unsigned u;
  } foo;
  TYPE_NAME(foo.b);
  TYPE_NAME(foo.sc);
  TYPE_NAME(foo.c);
  TYPE_NAME(foo.uc);
  TYPE_NAME(foo.i);
  TYPE_NAME(foo.u);
  TYPE_NAME(foo.x1);
  TYPE_NAME(foo.x8);
  TYPE_NAME(foo.x32);
} 
```

输出

```
_Bool
signed char
char
unsigned char
int
unsigned
default           (int:1)
signed char       (int:8)
int               (int:32) 
```

* * *

请注意`-Wconversion`下面的代码，我收到此警告。所以这至少是一个编译器称之为它的小位字段类型：`unsigned char:3`.

> 警告：从 'unsigned int' 转换为 'unsigned char:3' 可能会改变其值 [-Wconversion]

```
 struct {
    unsigned int x3 :3;
  } foo;
  unsigned u = 1;
  foo.x3 = u; // warning 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-28T10:19:23.347

位域的类型是：

*类型的位域`T`*

其中`T`是`_Bool`、`int`、`signed int`或`unsigned int`某些实现定义的类型。

在您的示例中，`foo.x`是 type: bit-field of type `signed int`。

这是不同的，`signed int`因为这两种类型不共享相同的约束和要求。

例如：

```
/* foo.x is of type bit-field of type signed int */
struct { signed int x:1; } foo; 

/* y is of type signed int */
signed int y;                     

/* valid, taking the size of an expression of type signed int */
sizeof y;

/* not valid, taking the size of an expression of type bit-field
 * of signed int */
sizeof foo.x;  

/* valid, taking the address of a lvalue of type signed int */
&y;            

/* invalid, taking the address of a lvalue of type bit-field
 * of signed int */
&foo.x; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-28T00:37:00.167

我怀疑这将取决于：

1.  编译器
2.  优化设置
3.  位域中的最大位数

# wcf - WCF 服务上的对象返回类型

> ID：13105314
> 
> 赞同：1
> 
> 时间：2012-10-28T00:14:28.943
> 
> 标签：wcf, object, return

我在我的应用程序中使用 WCF 服务。我的计划是设计服务合同如下：

```
[ServiceContract]
public interface IService
{

    [OperationContract]
    object ServiceCall(string typeName, string methodName,  object[] methodParameters);
} 
```

我将通过客户端的给定参数调用 ServiceCall 方法。

然后在服务器端我将创建方法信息并调用指定的方法并将响应返回给客户端。通过这种方式，单一方法将解决我所有的远程调用。由于 WCF 中的已知类型问题，我无法创建此类服务。返回类型和方法参数对象 [] methodParameters 不能是对象类型

我怎么解决这个问题？或者我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:20:32.270

为什么定义明确的数据和服务合同更可取的一些原因是：

*   它使您的消费者清楚地了解您的服务的期望。没有它，您会增加您的文档要求
*   使您的服务更容易被发现和使用
*   允许 WCF 对消息进行类型检查
*   允许详细控制对象的（反）序列化方式

但是，如果你想用一个操作来统治它们，你可以尝试这样的事情：

```
[ServiceContract]
public interface IService
{

    [OperationContract]
    MyResponse ServiceCall(IMyRequest request);
} 
```

您的 IMyRequest 将类似于：

```
public interface IMyRequest{
    string TypeName {get; set}
    string MethodName {get; set;}
} 
```

然后，您将使用每次调用所需的参数对象对其进行扩展，并使用 KnownTypes 对其进行装饰。你无法真正解决这个问题。由于 WCF 不允许您仅指定“对象”（并且不应该因为双方都需要知道他们在说什么），您至少需要明确定义您的请求对象。可以使用单个 OperationContract 方法，但正如我上面提到的，我认为您最好使用显式操作。

# image - Titanium - 将图像从互联网保存到 Android 上的 SD 卡

> ID：13105323
> 
> 赞同：1
> 
> 时间：2012-10-28T00:17:57.330
> 
> 标签：image, save, titanium, appcelerator, sd-card

我对 Titanium Appcelerator 和 Android 有疑问。我想将互联网上的图像保存到我的 SD 卡。我怎样才能做到这一点 ？

```
var externalSrc = "http://example.com/image.jpg";

saveButton.addEventListener('click',function(e) {
//?!?
}); 
```

任何帮助将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:41:05.137

我没有在 Android 上尝试过代码，但在 iOS 上效果很好。

```
var c = Titanium.Network.createHTTPClient();
var f = Titanium.Filesystem.getFile(directory, filename); // Here is the path to save the file.
var url = '/url/to/image.jpeg';
c.onload = function() {
    // File saved
};

c.ondatastream = function(e) {
    // Progress value in e.progress;
};

c.onerror = function(e) {
    // error
};

c.open('GET', url);  // open the client
c.setFile(f);
c.send();    // send the data 
```

# actionscript-3 - 如何使用 AS3 停止特定声音？

> ID：13105324
> 
> 赞同：1
> 
> 时间：2012-10-28T00:17:59.193
> 
> 标签：actionscript-3, flash, audio

一般来说，我对 Actionscript 很陌生，并且有一个小问题。

我有两个声音在一个框架上播放。一个是背景音乐，另一个是我只想在某些帧上播放的噪音。我不希望背景音乐停止，不管其他噪音停止。

两种声音都在它们自己的影片剪辑中。

视觉效果：一帧上有定格动画，我希望同时播放两种声音。在那之后的帧上，我只想继续播放背景音乐。

那么有没有办法让它只在那个帧上停止一个特定的声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:35:59.650

这取决于您如何设置声音播放。如果您有一个附有声音的帧，但如果您离开此帧，它将一直播放到最后**。**但是，如果您将其设置为**流模式**，它将与帧同步并通过移动帧指针部分播放。

如果你从脚本开始声音，你应该保存方法`SoundChannel`返回的对象`Sound.play`。只有在这种情况下，您才能手动停止特定声音，因为没有全局声音控制。

# python - 显示文件中包含关键字的所有行。

> ID：13105337
> 
> 赞同：0
> 
> 时间：2012-10-28T00:22:30.657
> 
> 标签：python

我正在尝试创建一个读取文本文件并要求用户输入单词的程序，然后该程序应打印包含该行的所有行..

这是我目前的代码：

```
f = open ("G:/test.txt", "r");     
line = f.readlines()        
find_word = raw_input("Enter word here:")    
if find_word in f:    
    print find_word    
f.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T00:25:40.880

这应该工作：

处理文件时使用`with`语句，因为它负责关闭文件。

```
with open("G:/test.txt") as f:
   final_word=raw_input("Enter word here:")
   for line in f:                #iterate over each line of f
       if final_word in line:    #if final_word in line , then print it
           print line.strip() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:29:35.260

您的行列表包含这样的词：

```
['dom\n', 'hello\n', 'world'] 
```

注意换行符？你需要剥离它们。

```
line = open("test.txt").read().splitlines()
find_word = raw_input("Enter word here:")    
if find_word in line:    
    print find_word 
```

# javascript - 从子对象访问父对象

> ID：13105347
> 
> 赞同：1
> 
> 时间：2012-10-28T00:25:30.687
> 
> 标签：javascript

我试图弄清楚下面的代码是如何工作的。有人能解释一下“创建一个指向父原型对象的超级属性”是什么意思吗？当它说“this.constructor.uber”指向父母的原型时，究竟是什么意思？我一直在挠头有一段时间了。如果有人能解释函数 Shape() 中发生了什么，我将非常感激。

```
function Shape() {}
// augment prototype
Shape.prototype.name = 'shape';
Shape.prototype.toString = function () {
    var result = [];
    if (this.constructor.uber) {
        result[result.length] = this.constructor.uber.toString();
    }
    result[result.length] = this.name;
    return result.join(', ');
};

function TwoDShape() {}
// take care of inheritance
var F = function () {};
F.prototype = Shape.prototype;
TwoDShape.prototype = new F();
TwoDShape.prototype.constructor = TwoDShape;
TwoDShape.uber = Shape.prototype;
// augment prototype
TwoDShape.prototype.name = '2D shape';

function Triangle(side, height) {
    this.side = side;
    this.height = height;
}
// take care of inheritance
var F = function () {};
F.prototype = TwoDShape.prototype;
Triangle.prototype = new F();
Triangle.prototype.constructor = Triangle;
Triangle.uber = TwoDShape.prototype;
// augment prototype
Triangle.prototype.name = 'Triangle';
Triangle.prototype.getArea = function () {
    return this.side * this.height / 2;
}

var my = new Triangle(5, 10);
my.toString() 
```

输出：`"shape,2Dshape,Triangle"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:13:19.323

在 Javascript 继承中，不支持访问`super`方法，所以我在 uber 中看到的是可以访问其父方法。
将其命名为父级，如下所示：
`TwoDShape.parent = Shape.prototype`

这样您就可以直接访问父属性：`TwoDShape.parent.name`应该返回`'shape'`。

这里`toString()`实际做的是：

```
var result = []; //declare an array
if (this.constructor.parent) { //if there is a parent prototype
    result[0] = this.constructor.parent.toString(); //set the 0 position of result with the return value of parent's toString() method.
}
result[result.length] = this.name; //set the position (0 or 1, if we had a parent it will be 1, otherwise 0) with the current name.
return result.join(', '); //return the names joined with a comma 
```

请注意，我将其更改为`uber`更具`parent`可读性。结果的第一个分配将始终为 0，因此没有必要调用`result.length`.

每个对象的调用会返回什么？
`Shape.toString();`: : (`'shape'`没有父对象)
`TwoDShape.toString();`:(对 的调用，以及它自己的名字，加入了)。: （为了调用，并为了它自己的名字，加入了）。`'shape, 2D shape'``'shape'``Shape.toString();``'2D shape'`
`Triangle.toString();``'shape, 2D shape, Triangle'``'shape, 2D shape'``TwoDShape.toString();``'Triangle'`

# javascript - ajax jquery.validate 与条纹支付 - 结合 js

> ID：13105352
> 
> 赞同：0
> 
> 时间：2012-10-28T00:26:06.383
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用[Stripe 支付系统](https://gist.github.com/1750368)接受带有 jQ​​uery 验证器的信用卡，用于所有带有`ajax`.
这适用于条纹和 ajax，但验证不起作用。
这是`process.php` [https://gist.github.com/1750375](https://gist.github.com/1750375)

```
$(document).ready(function() {
    var payBtn = $('#paymentBtn').click(function(){
            Stripe.createToken({
                    number: $('.card_number').val(),
                    cvc: $('.card_cvc').val(),
                    exp_month: $('.card_expiry_month').val(), 
                    exp_year: $('.card_expiry_year').val()
            }, 
            function(status, response) {
                if (response.error) {
                    payBtn.removeAttr("disabled");
                    $(".payment_errors").html(response.error.message);
                    addInputNames();
                } else {
                    var token = response['id'];
                    //$("#stripeToken").val(token); 
                    var amount = $("#formAmount").val();
                    $.post( 'process.php', {amount:amount, stripeToken:token},function(data){
                        $('#recDiv').html(data);
                    });
                }
            });

            return false;
    });

    // THIS SECTION BELOW DOES NOT GET CALLED
    jQuery.validator.addMethod("cardNumber", Stripe.validateCardNumber, "*");
    jQuery.validator.addMethod("cardCVC", Stripe.validateCVC, "*");
    jQuery.validator.addMethod("cardExpiry", function() {
            return Stripe.validateExpiry($(".card_expiry_month").val(), 
                                                                     $(".card_expiry_year").val())
    }, "*");

    $("#payment_form").validate({
            submitHandler: submit,// this does nothing
            rules: {
                    "card_cvc" : {
                            cardCVC: true,
                            required: true
                    },
                    "card_number" : {
                            cardNumber: true,
                            required: true
                    },
                    "card_expiry_year" : "cardExpiry"
            }
    });
}); 
```

**这适用于验证**，但随后条带不起作用，因为现在我已将`.post`函数（缺少第一个示例中的所有先前变量）放入 this`submitHandler`中。

```
$("#payment_form").validate({
        submitHandler: function(form) {
        $.ajax({
            type: 'POST',
            url: 'process.php',
            data: $(this).serialize(),
            success: function(returnedData) {
                $('#recDiv').append(returnedData);//nothing happens because stripe doesnt work
            } 
        });         
        return false;
    },
        rules: {
                "card_cvc" : {
                        cardCVC: true,
                        required: true
                },
                "card_number" : {
                        cardNumber: true,
                        required: true
                },
                "card_expiry_year" : "cardExpiry"
        }
}); 
```

**问题：** 如何从上面的第一个示例中进行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:32:13.707

我看到你也加入了这个[https://gist.github.com/9ce1a97c0453581044bb](https://gist.github.com/9ce1a97c0453581044bb) - 如果你使用的是 Mobile / Phonegap，你能展示一些关于如何连接到后端服务器的示例代码吗？

# c++ - 使用 XMVECTOR 时的内存访问异常

> ID：13105353
> 
> 赞同：0
> 
> 时间：2012-10-28T00:26:19.433
> 
> 标签：c++, windows, memory-management

我在 DirectX11 中打乒乓球，但遇到了一些奇怪的错误。

我在我的`Pong`类中声明了一个指针：

```
XMVECTOR *ballDirection; 
```

出于某种原因，每当我尝试访问它时：

```
Unhandled exception at 0x002127d8 in DirectX11Pong.exe:
  0xC0000005: Access violation reading location 0x00000000. 
```

我很确定当您尝试访问`nullptr`指针时会发生这种情况，但是，在对指针进行任何“访问”之前，我已经对其进行了初始化：

```
ballDirection = new XMVECTOR(); 
```

例如，我现在收到此错误的代码行如下：

```
*ballDirection = XMVectorSetX(*ballDirection, 1); 
```

我认为相关的唯一其他信息是我之前尝试将保存桨信息的单个指针转换为指针数组（用于多个玩家）：

（前）

```
Sprite *paddle; 
```

（后）

```
Sprite *paddle[2]; 
```

我这样做的那一刻，我得到了这个错误访问`ballDirection`，即使它在我创建这个数组之前工作得很好，而且我`ballDirection`在创建数组和修改适当的代码时没有更改任何代码。

在我注意到收到此错误后，我将代码改回，但仍然发生。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T00:41:28.957

微软确实[说过](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418725%28v=vs.85%29.aspx)动态分配`XMVECTOR`：

> 然而，堆中的分配更为复杂。因此，当您使用 XMVECTOR 或 XMMATRIX 作为要从堆分配的类或结构的成员时，您需要小心。在 Windows x64 上，所有堆分配都是 16 字节对齐的，但对于 Windows x86，它们只有 8 字节对齐。

所以你不应该只是`new XMVECTOR`在那里并期望一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:35:46.793

1.  经常检查你的分配！至少宏观一些像这样的东西：

    ```
    #if defined(DEBUG) || defined(_DEBUG)
    #ifndef XBOOL
        #define XBOOL(x)                                                                \
        {                                                                               \
            if(!(x))                                                                    \
            {                                                                           \
                MessageBox(0, L"Error running: "L#x, L"Error", MB_OK | MB_ICONSTOP);    \
                return false;                                                           \
            }                                                                           \
        }
    #endif
    #else
        #ifndef XBOOL
            #define XBOOL(x) (x);
        #endif
    #endif 
    ```

用法：

```
XBOOL(ballDirection = new XMVECTOR()) 
```

2.使用调试器！设置一些断点，在每一行检查从分配位置到错误位置的指针值。

# asp.net-mvc - ASP.NET MVC 将模型映射到 BLL

> ID：13105354
> 
> 赞同：1
> 
> 时间：2012-10-28T00:26:32.063
> 
> 标签：asp.net-mvc, n-tier-architecture

我的 MVC4 站点有一个项目，一个用于 BLL，一个用于 DLL。

在我的 MVC4 站点中，我是否应该简单地在控制器内部新建 BLL 对象并将它们映射到模型对象？我希望 BLL 类和 Model 类保持分开，但我不确定是否应该将它们映射过来，或者是否有另一种更好的方法。

但是，我希望将 Model 类与其 BLL 类相关联的任何方式都非常简单。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:53:41.577

您可以在控制器或辅助方法中手动进行映射，这对 MVC 来说很好，但我建议使用[AutoMapper之类的组件进行映射](http://automapper.org/)

同样，自动映射器是可选的，你可以自己做。

# xslt - XSLT SUM() 未按预期工作

> ID：13105356
> 
> 赞同：1
> 
> 时间：2012-10-28T00:26:39.563
> 
> 标签：xslt, xpath, sum

我一直在尝试获取不同节点中元素的总和（总）值，但是在一个又一个例子搞砸了一周之后，我离解决方案还差了一步。

我得到的只是字符串中列出的不同值，而不是总和。

用于获取值的选择是：

```
<xsl:for-each select="//workgroups/workgroup/agentstatus/status">
  <xsl:if test="key='Available, No ACD'">
    <xsl:value-of select="sum(value)"/>
  </xsl:if>
</xsl:for-each> 
```

这返回`111`而不是期望值`3`

我在这里做错了什么？

这是 xml version="1.0" encoding='utf-8'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:33:17.267

试试这个：

```
<xsl:value-of select="sum(//workgroups/workgroup/agentstatus/status[./key/text()='Available, No ACD']/value)" /> 
```

循环由 XSLT 的工作方式处理，因此您不需要为每个或 if 语句指定一个 - 这一切都由 xpath 语句隐含。如果这不起作用，请您发布您正在运行它的 XML 的副本，然后我将根据需要更新 xpath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T00:34:58.473

您的代码选择*所有*状态元素，然后对于每个具有所需键值的元素，它输出 sum(value)。因此，摘要针对每个`status`命中单独运行`xsl:if`。

你应该使用：

```
<xsl:value-of 
     select="sum(//workgroups/workgroup/agentstatus
                   /status[key/text()='Available, No ACD']/value)"/> 
```

# windows - UTF-16 perl 输入输出

> ID：13105361
> 
> 赞同：4
> 
> 时间：2012-10-28T00:27:19.283
> 
> 标签：windows, perl, io, cygwin, utf-16

我正在编写一个脚本，它将一个 UTF-16 编码的文本文件作为输入并输出一个 UTF-16 编码的文本文件。

```
use open "encoding(UTF-16)";

open INPUT, "< input.txt"
   or die "cannot open > input.txt: $!\n";
open(OUTPUT,"> output.txt");

while(<INPUT>) {
   print OUTPUT "$_\n"
} 
```

假设我的程序将 input.txt 中的所有内容写入 output.txt。

这在我的 cygwin 环境中工作得非常好，它使用“这是为 cygwin-thread-multi-64int 构建的 perl 5，版本 14，subversion 2 (v5.14.2)”

但是在我的 Windows 环境中，它使用的是“这是为 MSWin32-x64-multi-thread 构建的 perl 5，版本 12，subversion 3 (v5.12.3)”，

output.txt 中的每一行除了第一行外都带有疯狂的符号。

例如：

```
<FIRST LINE OF TEXT>
਀　　　　㈀  ㄀Ⰰ ㈀Ⰰ 嘀愀 ㌀ 䌀栀椀愀 䐀⸀⸀⸀  儀甀愀渀最 䠀ഊ&lt;SECOND LINE OF TEXT>
... 
```

谁能提供一些关于为什么它适用于 cygwin 而不是 windows 的见解？

编辑：按照建议打印编码层后。

在 Windows 环境中：

```
unix
crlf
encoding(UTF-16)
utf8
unix
crlf
encoding(UTF-16)
utf8 
```

在 Cygwin 环境中：

```
unix
perlio
encoding(UTF-16)
utf8
unix
perlio
encoding(UTF-16)
utf8 
```

唯一的区别是 perlio 和 crlf 层。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T07:00:41.537

[我本来打算等待并给出一个彻底的答案，但如果我给你一个快速的答案可能比什么都不做要好。]

问题是层`crlf`的`encoding`顺序错误。不是你的错。

例如，假设您`print "a\nb\nc\n";`使用 UTF-16le（因为它更简单，而且可能是您真正想要的）。你最终会得到

```
61 00 0D 0A 00 62 00 0D 0A 00 63 00 0D 0A 00 
```

代替

```
61 00 0D 00 0A 00 62 00 0D 00 0A 00 63 00 0D 00 0A 00 
```

我认为您无法使用`open`编译指示或使用获得正确的结果`binmode`，但可以使用`open`.

```
open(my $fh, '<:raw:encoding(UTF-16):crlf', $qfn) 
```

您需要附加`:utf8`一些旧版本 IIRC。

它适用于 cygwin，因为该`crlf`层仅在 Windows 上添加。你会得到

```
61 00 0A 00 62 00 0A 00 63 00 0A 00 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T00:54:02.183

您的编码中有错字。应该`use open ":encoding(UTF-16)"` 注意冒号。我不知道为什么它可以在 Cygwin 而不是 Windows 上工作，但也可能是 5.12 与 5.14 的事情。Perl 似乎弥补了它，但它可能是导致您的问题的原因。

如果不这样做，请检查编码是否应用于您的文件句柄。

```
print map { "$_\n" } PerlIO::get_layers(*INPUT);
print map { "$_\n" } PerlIO::get_layers(*OUTPUT); 
```

使用词法文件句柄（即。`open my $fh, "<", $file`）。Glob 文件句柄是*全局*的，因此程序中的其他东西可能会干扰它们。

如果一切顺利，如果词法文件句柄得到`encoding(UTF-16)`应用，请告诉我们，我们可以尝试其他方法。

更新： [这可能会提供您的答案](http://www.haboogo.com/matching_patterns/2009/01/utf-16-processing-issue-in-perl.html)：“ *[BOM](http://en.wikipedia.org/wiki/Byte_order_mark) ed UTF 文件不适合流模型，它们必须作为二进制文件来代替。* ”看起来您必须以二进制形式读取文件并将编码作为字符串进行。这可能是 5.14 中修复的错误。

更新 2：是的，我可以确认这是[5.14 中修复的错误](https://github.com/mirrors/perl/commit/6d51015587940c2032a6533d886163f69ca028f9)。

# grails - 如何使用 OpenID 登录对 YoutubeService 进行身份验证？

> ID：13105362
> 
> 赞同：0
> 
> 时间：2012-10-28T00:27:35.523
> 
> 标签：grails, spring-security, openid

我正在使用 Grails，我想从 YouTube 操作我的播放列表。我找不到使用 OpenID 用户连接到 Youtube API 的方法。有没有办法通过使用 OpenID 登录来操纵我的 YouTube 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:19:25.263

Grails **[Spring Security OpenId](http://grails.org/plugin/spring-security-openid)**插件，它依赖于优秀的**[Spring Security Core](http://grails.org/plugin/spring-security-core)**插件，应该可以提供您正在寻找的东西。

# c# - 如何在不跳过的情况下精确跟踪鼠标坐标

> ID：13105366
> 
> 赞同：1
> 
> 时间：2012-10-28T00:28:33.260
> 
> 标签：c#, windows, registry, mouse

我需要一种比这段代码更精确地跟踪鼠标坐标的方法。如果您运行此代码并快速移动鼠标或快速改变方向，坐标可能如下所示：50 和 40。似乎当鼠标快速移动时，它不会跟踪指针覆盖的所有点，就像这样例如，它跳过了 10 个坐标。如果我慢慢移动它，没有问题。我需要一种方法来跟踪所有指针坐标而不会跳过。我已经在使用全局钩子的 Code Project 上尝试了示例，结果相同。我怎样才能做到这一点？是否可以进行注册表更改以强制窗口跟踪所有坐标。是否可以？我更喜欢用 C# 来做，但也会考虑其他方式。谢谢。

```
private void Form1_MouseMove(object sender, MouseEventArgs e)
{
    if (num != 1)
    {
        listBox1.Items.Add(e.X.ToString());

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T00:34:02.003

您确定鼠标覆盖了从 A 到 B 旅程中的所有坐标吗？

来自操作系统的鼠标输入是经过采样的、离散的数据。这意味着鼠标指针***可以***跳过坐标，正如您所看到的。

如果不够高分辨率，请考虑对数据进行插值。

IIRC，您可以增加鼠标的采样率。不记得怎么了。我相信网络可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T01:00:04.540

鼠标指针不会在每个像素上移动，如果你快速移动鼠标，它会在事件之间移动一大堆像素。硬件根本不会为鼠标移动的每个像素发送信号，它会报告自上次报告以来鼠标移动的距离。

与其尝试跟踪鼠标的位置，不如使用该`Cursor.Clip`属性来限制鼠标的移动：

```
var rect = someControl.RectangleToScreen(new Rectangle(Point.Empty, someControl.ClientSize));
Cursor.Position = new Point(rect.Left + rect.Width / 2, rect.Top + rect.Height / 2);
Cursor.Clip = rect; 
```

使用空矩形释放鼠标：

```
Cursor.Clip = new Rectangle(0, 0, 0, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T00:53:24.400

这些年来，我多次被问到这个问题。您通常不能告诉鼠标事件侦听器告诉您鼠标经过的每个像素。如果您移动鼠标的速度足够快，甚至操作系统也可能会跳过屏幕的大部分区域。唯一可靠的方法是根据给定的鼠标位置历史自己绘制点。简单的方法是在当前点和最后一个点之间画一条线。更复杂的解决方案将涉及存储最后几个坐标并使用正弦/正切数学来绘制平滑曲线。

# iphone - Xcode 5 中的搜索栏在我输入内容时崩溃

> ID：13105367
> 
> 赞同：1
> 
> 时间：2012-10-28T00:28:39.903
> 
> 标签：iphone, xcode, ios6, uisearchbar

Xcode 4.5.1 中的搜索栏在我输入内容时崩溃，而当我使用 Xcode 4.4 时它工作得很好，请帮忙

我使用了这个代码，它是另一个问题的答案，当我使用 Xcode 4/4 时它工作得很好，直到我将它更新到 4.5.1

```
- (void) searchBarSearchButtonClicked:(UISearchBar *)theSearchBar{

//Perform the JSON query.

[self searchCoordinatesForAddress:[theSearchBar text]];

//Hide the keyboard.
[theSearchBar resignFirstResponder];}

-(void) searchCoordinatesForAddress:(NSString *)inAddress{

NSMutableString *urlString = [NSMutableString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=json",inAddress];

//Replace Spaces with a '+' character.
[urlString setString:[urlString stringByReplacingOccurrencesOfString:@" " withString:@"+"]];

NSURL *url = [NSURL URLWithString:urlString];

//Setup and start an async download.
//Note that we should test for reachability!.
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{

NSString *jsonString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

NSError *error;
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *results = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];

NSArray *placemark  = [results objectForKey:@"Placemark"];
NSArray *coordinates = [[placemark objectAtIndex:0] valueForKeyPath:@"Point.coordinates"];

double longitude = [[coordinates objectAtIndex:0] doubleValue];
double latitude = [[coordinates objectAtIndex:1] doubleValue];

[self zoomMapAndCenterAtLatitude:latitude andLongitude:longitude];} 
```

# java - RegEx -- 解析 ${ } 之间的字符串，但不解析 '${ } 之间的字符串

> ID：13105369
> 
> 赞同：0
> 
> 时间：2012-10-28T00:29:00.483
> 
> 标签：java, regex

我想要一个正则表达式，它将从以下字符串中提取`_A_`、`12345`、`Non_Literal_Left`和：`Non_Literal_Right`

```
... ${_A_}, ${12345}, '${Literal}' $yada yada'$[]' '${Non_Literal_Left} ${Non_Literal_Right}' 
```

我能得到的最接近的是文字的单引号限制：

```
 Matcher matcher = Pattern.compile("\\$\\{(\\w+)\\}").matcher(s);
        while (matcher.find()) {
            result.add(matcher.group(1));
        } 
```

这导致我想要的一切加上`Literal`，我不想匹配。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T00:32:04.097

您可以简单地使用否定的lookbehind：

```
"(?<!')\\$\\{(\\w+)\\}" 
```

现在只有在`$`前面没有时才会匹配`'`。

正如马特·鲍尔在评论中提到的，在结尾添加另一个负面展望也可能是有意义的：

```
"(?<!')\\$\\{(\\w+)\\}(?!')" 
```

但是，这仅在您使用无效/不匹配的`'`as in时才有意义`${Literal}'`（在这种情况下，我的第一个正则表达式仍然匹配`Literal`，后者不会）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:59:47.097

那是一种快乐。

有些东西告诉我，RegEx 表达式会更干净一些。

```
/**
 * Utility class for parsing record field parameters in properties.
 *
 * @author Ryan
 *
 */
public static class PropertyParser {

    /**
     * Stores the results of parsing a property.
     *
     * @author Ryan
     *
     */
    public static class ParsedParameters {

        private final Set<String> literals;
        private final Set<String> parameters;

        private ParsedParameters() {
            this.parameters = new HashSet<String>();
            this.literals = new HashSet<String>();
        }

        /**
         * Adds a literal property value to this object.
         *
         * @param string The literal property value to add to this object.
         */
        private void addLiteral(String string) {
            this.literals.add(string);
        }

        /**
         * Adds a parameter name to this object.
         *
         * @param string The parameter name to add to this object.
         */
        private void addParameter(String string) {
            this.parameters.add(string);
        }

        /**
         * Returns the set of literals stored in this object.
         * 
         * @return The set of literals stored in this object.
         */
        public Set<String> getLiterals() {
            return this.literals;
        }

        /**
         * Returns the set of parameters stored in this object.
         *
         * @return The set of parameters stored in this object.
         */
        public Set<String> getParameters() {
            return this.parameters;
        }
    }

    private static final String BAD_FIELD_CHAR =
            "Illegal character detected for field parameter: %c";

    /**
     * Extracts placeholder field name parameters from the input string.
     * <p>
     * Single quotes can be used to avoid the parser interpreting the ${...}
     * as a field parameter.
     * <p>
     * For example, the parser would not detect any field parameters in the following string:
     * <p>
     * &nbsp;&nbsp;&nbsp;#!/bin/bash<br>
     * &nbsp;&nbsp;&nbsp;# Echos the first argument<br>
     * &nbsp;&nbsp;&nbsp;echo '${1}'<br>
     * <p>
     * The {@link #PropertySubstitutor()} is responsible for removing the single quotes
     * surrounding the parameter when substituting the actual property value(s).
     * <p>
     * <b>Nested Parameters</b>
     * <p>
     * This parser itself will only parse the inner-most parameter or literal.
     * <p>
     * For example, ${Some${Value}} would actually be treated as a legal string, with
     * 'Value' as the only field parameter extracted.  During runtime substitution,
     * this would result in ${Somebody} if the record value for the field "Value" was "body".
     * <p>
     * Theoretically, this parser could then be ran again to extract this generated parameter.
     *
     * @param string The property to parse for field parameters.
     * @return An object containing the parsed parameters and literal values.
     * @throws IllegalArgumentException If the property contains parameter syntax
     *         (i.e. ${text}) but contains illegal characters for the field.
     *         <p>
     *         Allowed characters for field names are alpha-numeric and underscores.
     */
    public static ParsedParameters parseParametersAndLiterals(String string)
            throws IllegalArgumentException {
        if ((string == null) || string.isEmpty()) {
            return new ParsedParameters();
        }
        ParsedParameters result = new ParsedParameters();
        StringBuffer param = null;
        Character badChar = null;
        char c;
        char p = '^';
        boolean close = false;
        boolean lQuote = false;
        boolean open = false;
        int l = string.length();
        for (int i = 0; i < l; ++i) {
            c = string.charAt(i);
            if (!lQuote && (p == '\'') && (c == '$')) {
                lQuote = true;
            } else if ((p == '$') && (c == '{')) {
                param = new StringBuffer();
                open = true;
                badChar = null;
            } else if (open
                    && (((c == '}') && (!lQuote || ((1 + i) == l))) || (lQuote && (p == '}')))) {
                open = false;
                close = true;
            } else if (open) {
                boolean validCharacter = Character.isLetterOrDigit(c) || (c == '_');
                if (validCharacter || (lQuote && (c != '}'))) {
                    param.append(c);
                }
                if (!validCharacter && (c != '}')) {
                    badChar = c;
                }
            }
            if (close) {
                if ((badChar != null) && !(lQuote && (p == '}') && (c == '\''))) {
                    throw new IllegalArgumentException(String.format(BAD_FIELD_CHAR, badChar));
                } else if (c != '\'') {
                    if (param.length() > 0) {
                        result.addParameter(param.toString());
                    }
                } else {
                    result.addLiteral(param.toString());
                }
                lQuote = false;
                close = false;
                badChar = null;
            }
            p = c;
        }
        return result;
    }
} 
```

当然还有测试。

```
public class TestPropertyParser {

    private Set<String> literals;
    private Set<String> params;

    private void assertLiteralsContains(String string) {
        assertTrue(this.literals.contains(string));
    }

    private void assertParamsContains(String string) {
        assertTrue(this.params.contains(string));
    }

    private void assertResultSizes(Integer paramSize, Integer literalSize) {
        if (paramSize != null) {
            assertNotNull(this.params);
            assertEquals((int) paramSize, this.params.size());
        } else {
            assertNull(this.params);
        }
        if (literalSize != null) {
            assertNotNull(this.literals);
            assertEquals((int) literalSize, this.literals.size());
        } else {
            assertNull(this.literals);
        }
    }

    private void parseAndSet(String stringToParse) {
        ParsedParameters result = PropertyParser.parseParametersAndLiterals(stringToParse);
        this.literals = result.getLiterals();
        this.params = result.getParameters();
    }

    @Before
    public void setup() {
        this.params = new HashSet<String>();
        this.literals = new HashSet<String>();
    }

    @Test(expected = IllegalArgumentException.class)
    public void testParserInvalidParameterQuoteLeft() {
        parseAndSet("'${Invalid Parameter}");
    }

    @Test(expected = IllegalArgumentException.class)
    public void testParserInvalidParameterQuoteRight() {
        parseAndSet("${Invalid Parameter}'");
    }

    @Test(expected = IllegalArgumentException.class)
    public void testParserInvalidParameterSpaces() {
        parseAndSet(" ${Invalid Parameter}");
    }

    @Test
    public void testParserValidStrings() {
        // Initialization condition.
        assertResultSizes(0, 0);

        // Null string.
        parseAndSet(null);
        assertResultSizes(0, 0);

        // Empty string.
        parseAndSet(new String());
        assertResultSizes(0, 0);

        // Single parameter.
        parseAndSet("... ${_A_}, $yada yada'$[]' '${");
        assertResultSizes(1, 0);
        assertParamsContains("_A_");

        // Many parameters and one literal.
        parseAndSet("... ${_A_}, ${12345}, '${Literal}''${Non_Literal_Left} ${Non_Literal_Right}' ");
        assertResultSizes(4, 1);
        assertParamsContains("_A_");
        assertParamsContains("12345");
        assertParamsContains("Non_Literal_Left");
        assertParamsContains("Non_Literal_Right");
        assertLiteralsContains("Literal");

        // Nested literal and odd bracket placements.
        parseAndSet("''${Totally}''$}{$'${Single}");
        assertResultSizes(1, 1);
        assertParamsContains("Single");
        assertLiteralsContains("Totally");

        // Subset of ASCII characters.
        parseAndSet("`1234567890-=qwertyuiop[]\\asdfghjkl;'zxcvbnm,./!@#$%^&*()_+QWERTYUIOP{}|ASDFGHJKL:\"ZXCVBNM<>?");
        assertResultSizes(0, 0);

        // Illegal characters in literal.
        parseAndSet("'${This literal is completely valid}'");
        assertResultSizes(0, 1);
        assertLiteralsContains("This literal is completely valid");

        // Test incomplete literal, no closure.
        parseAndSet("'${This literal is never closed");
        assertResultSizes(0, 0);

        // Test incomplete parameter from left.
        parseAndSet("${Never_Closed");
        assertResultSizes(0, 0);

        // And again... with a parameter at the end.
        parseAndSet("${Never_Closed${But_This_Is}");
        assertResultSizes(1, 0);
        assertParamsContains("But_This_Is");

        // Empty parameter.
        parseAndSet("${}");
        assertResultSizes(0, 0);

        // Restarting a new parameter within an already open parameter.
        parseAndSet("${Perfectly valid${a}");
        assertResultSizes(1, 0);
        assertParamsContains("a");

        // Variation of the above with quotes.
        parseAndSet("'${Perfectly valid'${a}");
        assertResultSizes(1, 0);
        assertParamsContains("a");

        // Variation of the above with quotes.
        parseAndSet("${Perfectly valid'${a}");
        assertResultSizes(1, 0);
        assertParamsContains("a");

        // Variation of the above with quotes.
        parseAndSet("${Perfectly valid${a}'");
        assertResultSizes(1, 0);
        assertParamsContains("a");

        // Variation of the above with quotes.
        parseAndSet("${Perfectly valid'${a}'");
        assertResultSizes(0, 1);
        assertLiteralsContains("a");

        // Variation of the above with spaces.
        parseAndSet(" ${ Perfectly valid${a} ");
        assertResultSizes(1, 0);
        assertParamsContains("a");

        // TODO Determine what the desired behavior is for nested literals and parameters.

        // Test nested parameter in literal.
        parseAndSet("'${Nested ${Parameter}}'");
        assertResultSizes(1, 0);
        assertParamsContains("Parameter");

        // Nested parameter.
        parseAndSet("${Nested_${Parameter}}'");
        assertResultSizes(1, 0);
        assertParamsContains("Parameter");

        // Literal nested in a parameter.
        parseAndSet(" ${Nested'${Literal}'}");
        assertResultSizes(0, 1);
        assertLiteralsContains("Literal");
    }
} 
```

# android - android使软键盘始终可见

> ID：13105370
> 
> 赞同：0
> 
> 时间：2012-10-28T00:29:06.690
> 
> 标签：android, android-softkeyboard

我的活动有一个 EditText 字段，我希望软键盘在活动中始终可见。我设置

```
android:windowSoftInputMode="stateVisible" 
```

在清单中，但它会在活动开始时导致软键盘的动画外观。我需要 SoftKeybard 在活动开始的同时以全尺寸出现，没有动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T09:49:25.930

我不认为这是可能的。

您可以使键盘在创建活动或片段时自动显示，但当用户按下后退按钮时键盘将被关闭。

# php - PHP 错误：“无法通过引用传递参数 2”

> ID：13105373
> 
> 赞同：71
> 
> 时间：2012-10-28T00:29:40.523
> 
> 标签：php, mysqli

我只需要关于这个我不太明白的 PHP 错误的帮助：

> 致命错误：无法通过第 13 行 /web/stud/openup/inactivatesession.php 中的引用传递参数 2

```
<?php

error_reporting(E_ALL);

include('connect.php');

$createDate = mktime(0,0,0,09,05,date("Y"));
$selectedDate =  date('d-m-Y', ($createDate));

$sql = "UPDATE Session SET Active = ? WHERE DATE_FORMAT(SessionDate,'%Y-%m-%d' ) <= ?";                                         
$update = $mysqli->prepare($sql);
$update->bind_param("is", 0, $selectedDate);  //LINE 13
$update->execute();

?> 
```

这个错误是什么意思？如何修复此错误？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-28T00:32:22.510

该错误意味着第二个参数应该是**对变量的引用**。

由于您不是在处理**变量**而是**值 0 的整数**，因此它会产生所述错误。

为了避免这种情况：

```
$a = 0;
$update->bind_param("is", $a, $selectedDate);  //LINE 13 
```

如果您想了解正在发生的事情，而不是仅仅修复您的`Fatal error`，请阅读以下内容：http: [//php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T00:40:04.113

首先，`DATE_FORMAT`当您想比较日期时不应该使用，因为`DATE_FORMAT`将其更改为字符串*而不是日期*，

```
UPDATE Session 
SET Active = ? 
WHERE SessionDate <= ? 
```

其次，首先将值存储在变量上并将其传递给参数

```
$createDate = mktime(0,0,0,09,05,date("Y"));
$selectedDate =  date('d-m-Y', ($createDate));
$active = 0;
$sql = "UPDATE Session SET Active = ? WHERE SessionDate <= ?";                                         
$update = $mysqli->prepare($sql);
$update->bind_param("is", $active, $selectedDate);  
$update->execute(); 
```

# c++ - 如何将 '+' 转换为 +、'*' 转换为 * 等

> ID：13105382
> 
> 赞同：4
> 
> 时间：2012-10-28T00:30:47.460
> 
> 标签：c++, parsing, postfix-notation

我正在编写一个函数，它以字符串的形式读取后缀表达式并相应地计算它。

有没有一种简单的方法可以将算术运算符的字符转换为 C++ 中的算术运算符本身？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T00:46:08.920

正如@chris 的评论所说，您可以创建一个字符映射到函子：

```
std::map<char, std::function<double(double,double)> operators{
  { '+', std::plus<double>{} },
  { '-', std::minus<double>{} },
  { '*', std::multiplies<double>{} },
  { '/', std::divides<double>{} }
};

double apply(double lhs, double rhs, char op)
{
  return operators[op](lhs, rhs);
} 
```

`std::bad_function_call`如果您使用不代表已知运算符的字符调用函数，则会抛出此错误。

它还会在地图中为此类未知字符创建不需要的条目，以避免您使它变得更加复杂：

```
double apply(double lhs, double rhs, char op)
{
  auto iter = operators.find(op);
  if (iter == operators.end())
    throw std::bad_function_call();
  return (*iter)(lhs, rhs);
} 
```

（注意这使用 C++11 的特性，但可以很容易地转换为 C++03，使用`boost::function`or `std::tr1::function`）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-28T00:35:44.437

假设这是针对经典的 RPN 编程练习，最简单的解决方案是使用`switch`语句：

```
char op = ...    
int lhs = ...
int rhs = ...
int res = 0;
switch(op) {
    case '+':
        res = lhs + rhs;
    break;
    case '-':
        res = lhs - rhs;
    break;
    case '*':
        res = lhs * rhs;
    break;
    case '/':
        res = lhs / rhs;
    break;
    case '%':
        res = lhs % rhs;
    break;
} 
```

# java - 未找到 Google Drive SDK 活动异常

> ID：13105383
> 
> 赞同：6
> 
> 时间：2012-10-28T00:30:48.693
> 
> 标签：java, android, google-drive-api

我正在尝试实现 Stephen Wylie 的 Google Drive 示例（[此处](https://plus.google.com/u/0/114042449736049687152/posts/CD3L8zcJg5Z)）。这是我的代码：

```
package com.googledrive.googledriveapp;
// For Google Drive / Play Services
// Version 1.1 - Added new comments & removed dead code
// Stephen Wylie - 10/20/2012
import java.io.IOException;
import java.util.ArrayList;

import android.accounts.Account;
import android.accounts.AccountManager;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

import com.google.android.gms.auth.GoogleAuthException;
import com.google.android.gms.auth.GoogleAuthUtil;
import com.google.android.gms.auth.UserRecoverableAuthException;
import com.google.android.gms.common.AccountPicker;
import com.google.api.client.auth.oauth2.BearerToken;
import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.extensions.android2.AndroidHttp;
import com.google.api.client.googleapis.extensions.android2.auth.GoogleAccountManager;
import com.google.api.client.http.HttpRequestFactory;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.json.JsonHttpRequest;
import com.google.api.client.http.json.JsonHttpRequestInitializer;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.Drive.Apps.List;
import com.google.api.services.drive.Drive.Files;
import com.google.api.services.drive.DriveRequest;
import com.google.api.services.drive.DriveScopes;
import com.google.api.services.drive.model.File;
import com.google.api.services.drive.model.FileList;

public class MainActivity extends Activity {
    private static final int CHOOSE_ACCOUNT=0;
    private static String accountName;
    private static int REQUEST_TOKEN=0;
    private Button btn_drive;
    private Context ctx = this;
    private Activity a = this;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        // set up the GUI layout
        setContentView(R.layout.activity_main);
        // set the variables to access the GUI controls
        btn_drive = (Button) findViewById(R.id.btn_drive);
            btn_drive.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                chooseAccount();
            }
            });
    }

    public void chooseAccount() {
        Intent intent = AccountPicker.newChooseAccountIntent(null, null, new String[]{"com.google"}, false, null, null, null, null);
        startActivityForResult(intent, CHOOSE_ACCOUNT);
    }

    // Fetch the access token asynchronously.
    void getAndUseAuthTokenInAsyncTask(Account account) {
        AsyncTask<Account, String, String> task = new AsyncTask<Account, String, String>() {
            ProgressDialog progressDlg;
            AsyncTask<Account, String, String> me = this;

            @Override
            protected void onPreExecute() {
                progressDlg = new ProgressDialog(ctx, ProgressDialog.STYLE_SPINNER);
                progressDlg.setMax(100);
                progressDlg.setTitle("Validating...");
                progressDlg.setMessage("Verifying the login data you entered...\n\nThis action will time out after 10 seconds.");
                progressDlg.setCancelable(false);
                progressDlg.setIndeterminate(false);
                progressDlg.setOnCancelListener(new android.content.DialogInterface.OnCancelListener() {
                    public void onCancel(DialogInterface d) {
                        progressDlg.dismiss();
                        me.cancel(true);
                    }
                });
                progressDlg.show();
            }

            @Override
            protected String doInBackground(Account... params) {
                return getAccessToken(params[0]);
            }

            @Override
            protected void onPostExecute(String s) {
                if (s == null) {
                    // Wait for the extra intent
                } else {
                    accountName = s;
                    getDriveFiles();
                }
                progressDlg.dismiss();
            }
        };
        task.execute(account);
    }

    /**
     * Fetches the token from a particular Google account chosen by the user.  DO NOT RUN THIS DIRECTLY.  It must be run asynchronously inside an AsyncTask.
     * @param activity
     * @param account
     * @return
     */
    private String getAccessToken(Account account) {
        try {
            return GoogleAuthUtil.getToken(ctx, account.name, "oauth2:" + DriveScopes.DRIVE_READONLY);  // IMPORTANT: DriveScopes must be changed depending on what level of access you want
        } catch (UserRecoverableAuthException e) {
            // Start the Approval Screen intent, if not run from an Activity, add the Intent.FLAG_ACTIVITY_NEW_TASK flag.
            a.startActivityForResult(e.getIntent(), REQUEST_TOKEN);
            e.printStackTrace();
            return null;
        } catch (GoogleAuthException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    private Drive getDriveService() {
        HttpTransport ht = AndroidHttp.newCompatibleTransport();             // Makes a transport compatible with both Android 2.2- and 2.3+
        JacksonFactory jf = new JacksonFactory();                            // You need a JSON parser to help you out with the API response
        Credential credential = new Credential(BearerToken.authorizationHeaderAccessMethod()).setAccessToken(accountName);
        HttpRequestFactory rf = ht.createRequestFactory(credential);
        Drive.Builder b = new Drive.Builder(ht, jf, null);
        b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {

            @Override
            public void initialize(JsonHttpRequest request) throws IOException {
                DriveRequest driveRequest = (DriveRequest) request;
                driveRequest.setPrettyPrint(true);
                driveRequest.setOauthToken(accountName);
            }
        });
        return b.build();
    }

    /**
     * Obtains a list of all files on the signed-in user's Google Drive account.
     */
    private void getDriveFiles() {
        Drive service = getDriveService();
        Log.d("SiteTrack", "FUNCTION getDriveFiles()");
        Files.List request;
        try {
            request = service.files().list(); // .setQ("mimeType=\"text/plain\"");
        } catch (IOException e) {
            e.printStackTrace();
            return;
        }
        do {
            FileList files;
            try {
                Log.d("SiteTrack", request.toString());
                files = request.execute();
            } catch (IOException e) {
                e.printStackTrace();
                Log.d("SiteTrack", "Exception");
                return;
            }
            ArrayList<File> fileList = (ArrayList<File>) files.getItems();
            Log.d("SiteTrack", "Files found: " + files.getItems().size());
            for (File f : fileList) {
                String fileId = f.getId();
                String title = f.getTitle();
                Log.d("SiteTrack", "File " + fileId + ": " + title);
            }
            request.setPageToken(files.getNextPageToken());
        } while (request.getPageToken() != null && request.getPageToken().length() >= 0);
    }

    protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
        if (requestCode == CHOOSE_ACCOUNT && resultCode == RESULT_OK) {
            accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            GoogleAccountManager gam = new GoogleAccountManager(this);
            getAndUseAuthTokenInAsyncTask(gam.getAccountByName(accountName));
            Log.d("SiteTrack", "CHOOSE_ACCOUNT");
        } else if (requestCode == REQUEST_TOKEN && resultCode == RESULT_OK) {
            accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            Log.d("SiteTrack", "REQUEST_TOKEN");
        }
    }   
} 
```

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.googledrive.googledriveapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="android.app.ActivityGroup" />
        </activity>
    </application>
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.INTERNET" />
</manifest> 
```

这是我的activity_main.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btn_drive"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Connect to Google Drive" />
</LinearLayout> 
```

这是我收到的 LogCat 错误。它在按下按钮时发生：

```
10-28 00:25:28.637: E/AndroidRuntime(842): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.google.android.gms.common.account.CHOOSE_ACCOUNT (has extras) }
10-28 00:25:28.637: E/AndroidRuntime(842):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
10-28 00:25:28.637: E/AndroidRuntime(842):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
10-28 00:25:28.637: E/AndroidRuntime(842):  at android.app.Activity.startActivityForResult(Activity.java:3190)
10-28 00:25:28.637: E/AndroidRuntime(842):  at com.googledrive.googledriveapp.MainActivity.chooseAccount(MainActivity.java:67)
10-28 00:25:28.637: E/AndroidRuntime(842):  at com.googledrive.googledriveapp.MainActivity$1.onClick(MainActivity.java:60)
10-28 00:25:28.637: E/AndroidRuntime(842):  at android.view.View.performClick(View.java:3511)
10-28 00:25:28.637: E/AndroidRuntime(842):  at android.view.View$PerformClick.run(View.java:14105)
10-28 00:25:28.637: E/AndroidRuntime(842):  at android.os.Handler.handleCallback(Handler.java:605)
10-28 00:25:28.637: E/AndroidRuntime(842):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-28 00:25:28.637: E/AndroidRuntime(842):  at android.os.Looper.loop(Looper.java:137)
10-28 00:25:28.637: E/AndroidRuntime(842):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-28 00:25:28.637: E/AndroidRuntime(842):  at java.lang.reflect.Method.invokeNative(Native Method)
10-28 00:25:28.637: E/AndroidRuntime(842):  at java.lang.reflect.Method.invoke(Method.java:511)
10-28 00:25:28.637: E/AndroidRuntime(842):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-28 00:25:28.637: E/AndroidRuntime(842):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-28 00:25:28.637: E/AndroidRuntime(842):  at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T19:22:04.073

我们一直在做一些试验，我们目前的理论是新的 Google OAuth 库取决于拥有最新版本的 Google Play。

我们发现，如果您的设备仍有 Android Marketplace 或旧版 Google Play，我们将无法使用 OAuth。

因此，您可以尝试打开 Android Marketplace 或 Google Play 应用程序来启动升级。

打开 Android Marketplace，接受升级到 Google Play。
关闭 Marketplace，然后打开 Google Play 应用程序。接受 Google Play 服务条款。等待几秒钟，牺牲一只鸡，然后您应该可以运行 Google OAuth。

编辑：看起来 Google 提供了一些指导，说明如果您的用户缺少正确的 Google Play 版本，您的应用应该做什么。请参阅：[https ://developer.android.com/google/play-services/setup.html#ensure](https://developer.android.com/google/play-services/setup.html#ensure)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T11:25:35.227

Google Drive API 似乎（根据 Google 人）只能在真实设备上运行，在模拟器中它会因此错误而崩溃。

所以我的建议，在真机上试试。

# cookies - 在负载平衡环境中形成身份验证

> ID：13105386
> 
> 赞同：1
> 
> 时间：2012-10-28T00:31:39.870
> 
> 标签：cookies, encryption, asp.net-mvc-4, forms-authentication, load-balancing

我目前正在 mvc4 应用程序中集成表单身份验证。一旦用户通过身份验证，就会将加密的 cookie 写入他们的 PC。

我的应用程序将安装在负载平衡的环境中，用户可以访问任何平衡的 Web 服务器。

问题我有关于 cookie 加密的问题，如果 cookie 在服务器 A 上加密，并且用户发出的下一个请求是服务器 B 并且需要解密 cookie 才能继续，会有什么问题吗？关于在一台服务器上加密和在另一台服务器上解密的任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:42:27.823

您需要确保所有服务器的机器密钥都相同。按照[此链接](http://technet.microsoft.com/en-us/library/f0cf270c-4cfa-4bc3-b279-22c9de7f9373.aspx)访问 IIS7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:38:49.600

完全没有问题。如果您有类似 server1.mysite.com 的结构，请确保 cookie 用于整个域 (mysite.com.) 以防止出现问题。在那之后，当然，记住每个服务器都可以使用密钥，你应该没有问题。

# ruby-on-rails - 在资产管道中需要树

> ID：13105387
> 
> 赞同：6
> 
> 时间：2012-10-28T00:31:47.437
> 
> 标签：ruby-on-rails, ruby, pipeline, assets

我的资产管道中有一个名为字体的文件夹。它无需任何添加即可工作`application.rb`。

在目录中，我有不同的字体类型，例如文件夹中的 .eof、.ttf 等，就像这样

```
Assets
    Typefaces
        Eof
           ...files
        Ttf
           ...files 
```

除非字体在资产/字体中，否则它们不会成为资产管道的一部分。资产管道不会进入子目录。

我如何让资产管道超越资产/字体进入资产/字体/eof、资产/字体/ttf等？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-28T11:43:03.150

在您的`app/assets/javascripts/application.js`文件中，尝试输入：

`//= require_tree ../Typefaces`

查看更多： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

让我知道这是否有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T10:32:35.147

在 application.css

```
/*
*= require_self
*= require_tree ./folder_name/

*/ 
```

详细参考： [http ://railscasts.com/episodes/279-understanding-the-asset-pipeline?view=asciicast](http://railscasts.com/episodes/279-understanding-the-asset-pipeline?view=asciicast)

# objective-c - 安装app时无法去设置contentInset，uicollectionview

> ID：13105393
> 
> 赞同：2
> 
> 时间：2012-10-28T00:33:21.217
> 
> 标签：objective-c, ios, uicollectionview

我正在设置`contentInsetUse`添加到内容周围的滚动区域，如下所示

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.collectionView.contentInset    =   UIEdgeInsetsMake(30.0f, 0.0f, 70.0f, 0.0f);

    UINib *cellNib = [UINib nibWithNibName:@"NibCell" bundle:nil];
    [self.collectionView registerNib:cellNib forCellWithReuseIdentifier:@"reusedCell"];

    // Set layout for UIViewCollection
    CollectionViewLayout *flowLayout        =   [[CollectionViewLayout alloc] init];
    [self.collectionView setCollectionViewLayout:flowLayout];

} 
```

首次将应用程序安装在模拟器或设备上时，contentInset 无法正常工作

![在此处输入图像描述](../Images/0938a8710b3ed40c7ea482bba83821db.png)

您可以看到顶部根本没有设置，而是底部。但是，当我通过双击主页按钮或再次从 xcode 中运行来终止应用程序时。`contentInset`已设置。 ![在此处输入图像描述](../Images/fa021f9c3543256e43a75ff627b577f2.png)

现在太令人沮丧了……我在这里缺少什么。有经历的请帮忙。谢谢

# java - 包内文件的路径

> ID：13105395
> 
> 赞同：0
> 
> 时间：2012-10-28T00:33:47.703
> 
> 标签：java, path, package, text-files, bufferedreader

有没有办法读取包内的文本文件。假设我想访问一个名为“myTextFile.txt”的文件，该文件位于一个名为“a”的包中。

我想从同一个包中的一个名为“MyClass”的类中访问它。“myTextFile.txt”的路径是什么？我可以像这样使用bufferedreader吗：`BufferedReader in = new BufferedReader(new FileReader(PATH));`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:43:44.337

您始终可以通过[ClassLoader.getResourceAsStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)（或 getResource()）获取资源。它们也可以通过[Class.getResourceAsStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)（而不是 ClassLoader）访问。您可以使用相对名称或绝对名称（以 / 开头）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T00:39:16.163

听起来您需要使用其中一种`Class.getResource()`或`ClassLoader.getResource()`方法：

```
URL url = MyClass.class.getResource("myTextFile.txt"); 
URL url = MyClass.class.getClassLoader().getResource("myTextFile.txt"); 
```

或者

```
InputStream in = MyClass.class.getResourceAsStream("myTextFile.txt"); 
InputStream in = MyClass.class.getClassLoader().getResourceAsStream("myTextFile.txt"); 
```

请参阅[此问题](https://stackoverflow.com/questions/6608795/what-is-the-difference-between-class-getresource-and-classloader-getresource)进行比较，以及绝对路径与相对路径的解释。

然后你可以做

```
new BufferedReader(new InputStreamReader(in)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T00:39:40.620

InputStream is = new BufferedInputStream(getClass().getClassLoader().getResourceAsStream("/a/myTextFile.txt"));

应该做的伎俩。请注意 arg 的结构，包的根由“/”表示，您的包（即目录）也是如此

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T00:40:07.887

你的项目编译到哪里？任何路径都将相对于程序的位置，或者如果您指定，则为完整路径，而不是类。一旦你得到那条路，你就可以把它放在哪里`PATH`。

但是，您有什么理由将该文件放入一个包中？它不应该放在某种资源目录中吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T00:41:57.933

Class 上的 GetResource 效果很好。Spring 中的 ResourceLocator 也是一个非常灵活的选项。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-09-10T20:05:33.277

只需输入绝对文件路径。即你的煤机路径。应该管用。

# c# - 有没有办法使用多边形作为容器？

> ID：13105402
> 
> 赞同：1
> 
> 时间：2012-10-28T00:35:34.810
> 
> 标签：c#, wpf, grid, containers, polygon

有没有办法在 WPF 中使用 Polygon 作为容器（如 grid 或 panel ）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:35:16.613

您可能会覆盖边框的“OnRender”方法，以不同的形状呈现它，并使用其子属性。此链接可能会有所帮助： [如何在 wpf 中绘制带有方角的边框？](https://stackoverflow.com/questions/3678426/how-can-i-draw-a-border-with-squared-corners-in-wpf)

# php - 使用时区偏移生成周开始和结束日期

> ID：13105404
> 
> 赞同：0
> 
> 时间：2012-10-28T00:35:44.747
> 
> 标签：php, date, strtotime, timezone-offset

> **可能重复：**
> [在 PHP 中将时间和日期从一个时区转换为另一个时区](https://stackoverflow.com/questions/3905193/convert-time-and-date-from-one-time-zone-to-another-in-php)

我有两个变量显示星期的开始和结束日期，如下所示：

```
$week = strtotime('-' . date('w') . ' days');
$start = date('Y-m-d', $week);
$end = date('Y-m-d', strtotime('+6 days', $week)); 
```

如何将这些日期偏移到不同的时区（例如 PST？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T11:22:50.493

这会将您的服务器时区的平局转换为给定的时区。

```
$datetime = new DateTime;
$newTZ  = new DateTimeZone('Your/TimezoneHere');
$datetime->setTimezone($newTZ); 
```

# https - Opera - 未从本地主机加载链接脚本

> ID：13105406
> 
> 赞同：3
> 
> 时间：2012-10-28T00:36:28.140
> 
> 标签：https, url-rewriting, localhost, opera

当我用 Opera 重写 https 页面的 HTML 源代码时出现错误：

**`http://localhost:4444/index.js`链接**脚本未加载**.**

 **当我使用`http://mypage/index.js`一切顺利。

将任何链接直接作为地址工作都是一样的。

`localhost`最神秘的是，它在几个小时前工作，并且在计算机重新启动后，opera 开始拒绝连接。

我已经尝试重新安装 Opera 并设置`localhost`为受信任。没有激活防火墙。

我只是不明白:(

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T09:37:02.003

opera:config#Network|AllowCrossNetworkNavigation 可能会有所帮助，但这几乎可以肯定是跨网络通信的障碍。这是一项安全功能。**

# html - 活动或当前时突出显示父子导航菜单

> ID：13105411
> 
> 赞同：0
> 
> 时间：2012-10-28T00:37:54.043
> 
> 标签：html, css, highlight

有人会告诉我如何在活动或当前时突出显示父子导航菜单。选择子页面时是否可以突出显示父菜单项。当您将鼠标悬停到父页面不断突出显示时，我想要实现的目标类似于[http://www.brotfabrik-berlin.de/ 。](http://www.brotfabrik-berlin.de/)谢谢你。

```
#menu {
font-weight:700;
list-style:none;
width:990px;
margin:0px auto 0px auto;
height:29px;
padding:0px 0px 0px 0px;

/* Rounded Corners */

-moz-border-radius: 0px;
-webkit-border-radius: 0px;
border-radius: 0px;

/* Background color and gradients */

background: #014464;
background: -moz-linear-gradient(top, #, #);
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#), to(#));

/* Borders */

border: 1px solid #002232;

-moz-box-shadow:inset 0px 0px 1px #edf9ff;
-webkit-box-shadow:inset 0px 0px 1px #edf9ff;
box-shadow:inset 0px 0px 1px #edf9ff;

#menu li {
float:left;
display:block;
text-align:center;
position:relative;
padding: 4px 5px 4px 5px;
margin-right:0px;
margin-top:0px;
border:none;
z-index: 1;

#menu li:hover {
border: 1px solid #777777;
padding: 2px 4px 4px 4px;

/* Background color and gradients */

background: #F4F4F4;
background: -moz-linear-gradient(top, #F4F4F4, #EEEEEE);
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#F4F4F4), to(#EEEEEE));

/* Rounded corners */

-moz-border-radius: 0px 0px 0px 0px;
-webkit-border-radius: 0px 0px 0px 0px;
border-radius: 0px 0px 0px 0px;

#menu li a {
font-family:Arial Narrow;
font-size:15px; 
color: #EEEEEE;
display:block;
outline:0;
text-decoration:none;
text-shadow: 0px 0px 0px #000;

#menu li:hover a {
color:#161616;
text-shadow: 0px 0px 0px #ffffff; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T02:49:49.453

我通常会通过向导航链接添加一个`current`类来实现这一点。`<li>`因此，如果您正在查看`home.html`导航代码，则如下所示：

```
<ul id="menu">
    <li class="current"><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Another page</a></li>
</ul> 
```

然后我将使用链接的悬停样式设置当前类的样式，或者您可以定义不同的样式，例如：

```
#menu li.current a {
    font-weight: bold;
} 
```

如果`<li>`包含子菜单（另一个`<ul>`），我会像这样定位 CSS：

```
#menu > li > a {
    /* this would target the parent link */
} 
```

为了定位子菜单链接，我会这样做：

```
#menu ul ul a {
    /* this would target submenu links */
} 
```

# android - 如何访问 Google Googles API 或 Google Search by Image API

> ID：13105414
> 
> 赞同：5
> 
> 时间：2012-10-28T00:38:12.520
> 
> 标签：android, google-api, google-image-search

如果有人建议我访问 Google Googles API 或 Google Search by Image API 的方法，那就太好了。

目前，与其他 Google API 不同，Google 似乎不鼓励第三方开发人员使用此 API。

Google 网站中的图片搜索有一个带摄像头的按钮，允许用户上传图片并按图片内容开始搜索，如果无法直接访问 Google Googles API，也许，一个好主意可能是通过以下方式解析 Google 搜索图像页面代码并实现通过 Google 站点访问此服务的系统。

在应用程序中访问此功能的方法将为开发人员提供无限的可能性来制作新的很棒的应用程序。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:24:23.173

这两个功能都使用不可公开访问的内部 API。它们不打算供您编写的软件使用。

如果你修补一下，你也许可以对它们进行逆向工程，但我建议不要这样做。您编写的任何依赖于它们的代码都可能随时中断而不会发出警告。

# .htaccess - mod重写htaccess显示链接

> ID：13105416
> 
> 赞同：0
> 
> 时间：2012-10-28T00:38:32.927
> 
> 标签：.htaccess, mod-rewrite

我遇到了 mod rewrite 在浏览器中正确显示链接的问题

我总是这样在我的页面上放链接

```
 http://domain.com/contact-us.html 
```

然后在我的 .htaccess 文件中使用它

```
 Options FollowSymLinks
 RewriteEngine On
 RewriteRule ^([^.]+)\.html$ http://domain.com/index.php?h=$1 [L] 
```

我请求 index.php 页面上的 h 变量来获取和使用 slug “contact-us”

```
 $h = htmlspecialchars($_REQUEST['h'], ENT_QUOTES, 'UTF-8', false);
 $h = preg_replace('/[^-a-z0-9_]/i','',$h); 
```

这一直运行良好，仍然会在浏览器中显示 domain.com/contact-us.html

我在 1 和 1 上加载了一个站点，而不是看到 domain.com/contact-us.html 我在浏览器中看到 domain.com?h=contact-us。一切正常，只是没有正确显示链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:47:42.690

明白了，但对于那些将来可能会有所帮助的人。首先在每次测试时清除缓存

```
 Options FollowSymLinks
 RewriteEngine On
 RewriteRule ^([^.]+)\.html$ /index.php?h=$1 [L] 
```

不要包含域。在我的情况下，网站在 public_html 文件夹中上升了一级，所以我认为我必须包含域。

添加

```
RewriteBase / 
```

效果很好，最终代码

```
 Options FollowSymLinks
 RewriteEngine On
 RewriteBase /
 Options FollowSymLinks
 RewriteEngine On
 RewriteRule ^([^.]+)\.html$ /index.php?h=$1 [L] 
```

# php - 从给定的一组数字和机会中生成一个随机数

> ID：13105417
> 
> 赞同：2
> 
> 时间：2012-10-28T00:38:42.910
> 
> 标签：php, algorithm, random, probability

我有一个数字列表，例如

```
 $list = array(1,5,19,23,59,51,24) 
```

在实际代码中，这是从数据库生成的，因此该数组最多可容纳 500 个彼此不同的数字。

数据库中的这些数字中的每一个都有记录的发生概率。所以我有以前执行的数据来生成从 1 到 500 的随机数，并记录了每个数字生成 1000 次的概率。

现在有了每个数字的数字和概率列表，我想编写一个函数，该函数将根据它们的概率从这 500 个数字中生成一个随机数。

例如：

```
 number 1 has a chance of: 0.00123 //0.123%
    number 6 has a chance of: 0.0421 //4.21%
    number 11 has a chance of: 0.0133 //1.33% 
```

所以变量 $finallist 看起来像这样：

```
 $finallist[1] = 0.00123;
   $finallist[6] = 0.0421;
   $finallist[11] = 0.0133; 
```

现在，如果我运行我的函数并传入 $finallist 作为参数，我想检索一个介于 1 和 6 之间的随机数，但数字 6 出现的可能性高于 1，而 11 出现的可能性高于 1。

我编写了一些函数来处理根据机会返回随机数，但它只需要 1 个值作为参数。

```
private function randomWithProbability($chance, $num, $range = false)
{
    /* first generate a number 0 and 1 and see if that number is in the range of chance */
    $rand = $this->getRandomFloatValue(0, 1);

    if ($rand <= $chance) 
    {
        /* the number should be returned */
        return $num;
    }
    else 
    {
        /* otherwise return a random number */
        if ($range !== false)
        {
            /* make sure that this number is not same as the number for which we specified the chance */
            $rand = mt_rand(1, $range);
            while ($rand == $num)
            {
                $rand = mt_rand(1, $range);
            }

            return $rand;
        }
    }
} 
```

如果有人知道执行此操作的解决方案/算法，或者 PHP 中是否有任何内置内容，那将是一个很大的帮助。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T01:50:10.473

您正在寻找的基本算法：

*   将所有概率相加并确定最大值
*   选择一个 0 到 1 之间的随机数并将其乘以最大值
*   找到与该值对应的条目

示例代码：

```
<?php

// create some weighted sample data (id => weight)
$samples = array(
  'a' => 0.001,
  'b' => 0.004,
  'c' => 0.006,
  'd' => 0.05,
  'e' => 0.01,
  'f' => 0.015,
  'g' => 0.1
);

class Accumulator {
   function __construct($samples) {
      // accumulate all samples into a cumulative amount (a running total)
      $this->acc = array();
      $this->ids = array();
      $this->max = 0;
      foreach($samples as $k=>$v) {
         $this->max += $v;
         array_push($this->acc, $this->max);
         array_push($this->ids, $k);
      }
   }

   function pick() {
      // selects a random number between 0 and 1, increasing the multiple here increases the granularity
      // and randomness; it should probably at least match the precision of the sample data (in this case 3 decimal digits)
      $random = mt_rand(0,1000)/1000 * $this->max;
      for($i=0; $i < count($this->acc); $i++) {
         // looks through the values until we find our random number, this is our seletion
         if( $this->acc[$i] >= $random ) {
            return $this->ids[$i];
         }
      }
      throw new Exception('this is mathematically impossible?');
   }

   private $max; // the highest accumulated number
   private $acc; // the accumulated totals for random selection
   private $ids; // a list of the associated ids
}

$acc = new Accumulator($samples);

// create a results object to test our random generator
$results = array_fill_keys(array_keys($samples), 0);

// now select some data and test the results
print "picking 10000 random numbers...\n";
for($i=0; $i < 10000; $i++) {
   $results[ $acc->pick() ]++;
}

// now show what we found out
foreach($results as $k=>$v) {
   print "$k picked $v times\n";
} 
```

结果：

```
> php.exe rand.php
picking 10000 random numbers...
a picked 52 times
b picked 198 times
c picked 378 times
d picked 2655 times
e picked 543 times
f picked 761 times
g picked 5413 times 
```

使用此示例运行相同的代码：

```
// samples with even weight
$samples = array(
   'a' => 0.1,
   'b' => 0.1,
   'c' => 0.1,
   'd' => 0.1
); 
```

产生这些结果：

```
> php.exe rand.php
picking 10000 random numbers...
a picked 2520 times
b picked 2585 times
c picked 2511 times
d picked 2384 times 
```

# python - 将颜色设置为 wx.listbox 项

> ID：13105419
> 
> 赞同：0
> 
> 时间：2012-10-28T00:38:51.017
> 
> 标签：python, linux, windows, wxpython, wxwidgets

wxpython 提供了以下 api 来改变 wx.listbox 项目的颜色：

```
wx.ListBox.SetItemBackgroundColour(self, item, c) 
```

和

```
wx.ListBox.SetItemForegroundColour(self, item, c) 
```

由于某种原因，此功能在我的 linux 和 windows 中无法执行此操作。有谁知道为什么？

请注意，`wx.ListBox.SetOwnBackgroundColor`效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:33:04.673

我的猜测是这是本机小部件的限制。我已经看到了一些您无法设置背景或前景色的小部件，因为该小部件在该平台上不支持它，但它在其他平台上支持它。你可以在 wxPython 邮件列表上询问以确保。他们那里有一些主要的 wx 开发人员。

同时，您可能会查看 VListBox 或切换到 ListCtrl。

# php - fgets 没有看到新行

> ID：13105424
> 
> 赞同：1
> 
> 时间：2012-10-28T00:39:56.467
> 
> 标签：php

我的简单 php 代码

```
<?

error_reporting(E_ALL);

set_time_limit(0);
ini_set('show_errors', 1);
$file = "ftpfile.txt";
$handle = fopen($file, "r");
if(!filesize($file)>0) {
        echo "File is empty!";
    }
    else {
    while (($ftpservers = fgets($handle, 4096)) !== false) {

        echo $ftpservers. "\n\r";

    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);

        }
?> 
```

我的文本文件

```
ftp.server:username:password    
ftp.server:username:password    
ftp.server:username:password    
ect.. 
```

运行此代码返回此

```
ftp.server:username:passwordftp.server:username:passwordftp.server:username:password
ect.. 
```

为什么要`fgets`以三个黑桃返回文本文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:46:11.567

[`fgets()`](http://php.net/manual/function.fgets.php)文档页面上有关于行尾问题的注释：

> 如果在读取 Macintosh 计算机上或由 Macintosh 计算机创建的文件时 PHP 不能正确识别行结尾，则启用 `auto_detect_line_endings`运行时配置选项可能有助于解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T07:36:16.297

只是一个猜测，但您确定源文件在 ftp.server:username:password 和下一个条目之间不包含空格吗？

# c - linux中c中的共享信号量

> ID：13105428
> 
> 赞同：3
> 
> 时间：2012-10-28T00:40:35.440
> 
> 标签：c, process, semaphore, shared

这是字符函数的一部分，它将 256 到 1024 字节范围内的数据发送到缓冲区

```
 semaphore_p(semMutexAll);//critical section
    int charByte =rand() % 768 + 256;
    for(i=0 ; i<charByte ; i++)
         semaphore_p(semBuff);//contor buffer overflow
    semaphore_v(semMutexAll); 
```

这是函数 cpu 的一部分，它在 10 毫秒内从缓冲区读取 2 个字节

```
while(1)
{
      semaphore_v(semBuff);
      semaphore_v(semBuff);
      usleep(10000);
} 
```

这是信号量

```
 semBuff = semget((key_t)1234,1,0666|IPC_CREAT); //Gets shared memory Id --> 1234 key
    semChar = semget((key_t)1235,1,0666|IPC_CREAT);
    semImage  = semget((key_t)1236,1,0666|IPC_CREAT);       
    semAudio  = semget((key_t)1237,1,0666|IPC_CREAT);
    semVideo  = semget((key_t)1238,1,0666|IPC_CREAT);
    semMutexCpu  = semget((key_t)1239,1,0666|IPC_CREAT);
    semMutexAll  = semget((key_t)1230,1,0666|IPC_CREAT);

    set_semvalue(semBuff,BUFFSIZE);
    set_semvalue(semChar,MAXCHR);
    set_semvalue(semImage,MAXIMAGE);
    set_semvalue(semAudio,MAXAUDIO);
    set_semvalue(semVideo,MAXVIDEO);
    set_semvalue(semMutexCpu,1);
    set_semvalue(semMutexAll,1); 
```

这里是共享内存

```
 key_t ShmKEY;
    key_t ShmQ;

    int ShmContID;
    int ShmQID;
    int status;

    queue *buffArea;
    buffArea = (queue*)malloc(sizeof(queue));
    initQueue(buffArea);
    control * params;
    params = (control*)malloc(sizeof(control));

    ShmKEY = ftok("./", 'A');
    ShmQ = ftok("./", 'B');

    if((ShmContID = shmget(ShmKEY,sizeof(params),IPC_CREAT | 0666)) == -1)
    { 
        //Gets shared memory Id --> IPC_PRIVATE key
        perror("shmget");
        exit(1);    
    }

    if((ShmQID = shmget(ShmQ,sizeof(buffArea),IPC_CREAT | 0666)) == -1)
    {
        //Gets shared memory Id --> IPC_PRIVATE key
        perror("shmget");
        exit(1);    
    } 
```

这是信号量标头

```
 #ifndef SHAREDSMPH_H_
    #define SHAREDSMPH_H_

    #include <unistd.h>
    #include <stdlib.h>
    #include <stdio.h>
    #include <sys/ipc.h>
    #include <sys/types.h>
    #include <sys/sem.h>
    #include <sys/wait.h>
    #include <string.h>
    #include <errno.h>

    union semun 
    {
        int val;
        struct semid_ds *buf;
        unsigned short *array;
    };

    static int semBuff;
    static int semChar;
    static int semImage;
    static int semAudio;
    static int semVideo;
    static int semMutexCpu;
    static int semMutexAll;

    static int set_semvalue(int sem_id,int val)
    {
        union semun sem_union;
        sem_union.val=val;
        if(semctl(sem_id,0,SETVAL,sem_union) == -1)
        {
            fprintf(stderr, "Failed to semvalue\n");        
            return(0);
        }
        return (1);
    }

    static void del_semvalue(int sem_id)
    {
        union semun sem_union;
        if(semctl(sem_id,0,IPC_RMID,sem_union) == -1)
            fprintf(stderr, "Failed to delete semaphore\n");
    }

    static int get_semvalue(int sem_id)
    {
        union semun sem_union;

        int value = semctl(sem_id,0,GETVAL,sem_union);  
        //printf("semvalue:%d\n",value);
        return value;
    }

    static int semaphore_p(int sem_id)
    {
        struct sembuf sem_b;
        sem_b.sem_num=0;
        sem_b.sem_op=-1; /* P */
        sem_b.sem_flg=SEM_UNDO;

        if(semop(sem_id,&sem_b,1) == -1)
        {
            printf("semaphore_p failed\n");
            return (0); 
        }
        return (1);
    }

    static int semaphore_v(int sem_id)
    {
        struct sembuf sem_b;
        sem_b.sem_num=0;
        sem_b.sem_op=1; /* V */
        sem_b.sem_flg=SEM_UNDO;
        if(semop(sem_id,&sem_b,1) == -1)
        {
            printf("semaphore_v failed\n");
            return (0); 
        }
        return (1);
    }
    #endif 
```

这段代码有问题吗？特别是信号量，问题是信号量值总是在不同的进程中初始化。当我在进程中调用 semaphore_v 和 semaphore_p 函数时，它们工作准确，但例如 semBuff 信号量总是初始化为 1024。

# android - Android 从字符串设置图像

> ID：13105430
> 
> 赞同：0
> 
> 时间：2012-10-28T00:41:33.973
> 
> 标签：android, string, image, android-imageview

我有这段代码，我想从字符串中设置图像：

```
String imagename = "mypicture";
ImageView lblPic = new ImageView(this);
int resID = getResources().getIdentifier(imagename, "drawable", getPackageName());
lblPic.setImageResource(resID); 
```

这是我的 xml 文件。

```
<ImageView  android:layout_width="wrap_content"
 android:layout_height="wrap_content" 
 android:id="@+id/image1" android:src="@drawable/no_image" /> 
```

哪里可能有问题？我想我设置了 xml 文件错误...？我尝试了很多代码，但每次 Java 代码不改变图片时，它都保持在 xml 文件中的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:44:44.833

正确的 ：

```
 <ImageView  
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" 
          android:id="@+id/image1" 
          android:src="@drawable/no_image" /> 
```

将此行放在 Activity 的 onCreate 方法中：

```
ImageView lblPic = (ImageView) findViewById(R.id.image1);
int resID = getResources().getIdentifier(imagename, "drawable", getPackageName());
lblPic.setImageResource(resID); 
```

# python - 尽管显式返回了新的类实例，Python3 方法调用仍返回 None

> ID：13105432
> 
> 赞同：1
> 
> 时间：2012-10-28T00:41:43.757
> 
> 标签：python, python-3.x, garbage-collection

这是我的第一篇文章，所以请放轻松。当然，这不太容易；）

反正我是用 Python 3.2.3 写一个文字冒险游戏。有一个类 Labyrinth 包含 Location 对象的集合，这些对象又包含 Actor 的 GameItem 的子类。

在一个回合中，Labyrinth 轮询每个位置，轮询其内容，以获取由 Labyrinth.doTurn() 执行的解析器命令对象。命令执行通常会导致执行对象的操作回调返回 Message 的子类。

无论如何，下面的代码是来自 Labyrinth 的相关片段。它在“结果”变量中检索消息：

```
 for command in self._pollLocations():
        if command.getVerb() == 'quit':
            if self._confirmQuit() is True:
                return 2  # status 2 == quit w/o win or loss    
            else:
                print( "Whew! I sure am glad for that!" )
        else:
            print( "^BEFORE" )
            print( "command: %s\tperformer: %s" % ( command.getVerb(), command.performer.getName() ) )
            result = command.performer.execute( command )
            print( "vAFTER"  )
            print( "Got result: %s" % str(result) )

        if result is None:
            print( "Got NONE: returning it" )
            return None

        if isinstance( result, Exception ):
            raise( result )

        if isinstance( result, Message ):
            print( "Found Message instance:" )
            result.write()
            return None 
```

但是，无论我在被调用方法的 return 语句中返回什么，上面的`result =`调用总是得到 None。这是我正在调用的 Actor.take() 方法：

```
 def take( self, arg ):
    """
    Take an item in an accessible area.
    """
    item = self.location.getItemByName( arg )
    if isinstance( item, MatchNotFound ):
        print( "Actor.take(): Returning: %s" % str( ThatsNotHereMsg() ) )
        return ThatsNotHereMsg()

    elif isinstance( item, MissingDirectObject ):
        print( "Missing DO" )
        return TellMeWhatToTakeMsg()
    elif isinstance( item, AlgorithmCouldNotDecide):
        print( "Algorthm coul dnot decide." )
        return IndecisionMsg()
    elif isinstance( item, YouShouldNotBeSeeingThisError ):
        print( "Returning GenericGameMsg" )
        return GenericGameMsg( "You should not be seeing this error. "   \
               "The programmer has made a serious mistake "              \
               "and should be beaten for it. Besides, he's "             \
               "a lazy bum who never delivers software on time."         \
        )
    else:
        print( "take: made it past if..elif chain" )

    if item is None:
        print( "item is None: returning TellMeWhatToMakeMsg()" )
        return TellMeWhatToTakeMsg()

    if item.isTakeable( by=self ) is True:
        print( "item.isTakeable: performing take" )
        self.addItem( item )
        self.location.delItem( item )
        return YouTookItMsg()
    print( "take: got to the end. Returning YouJustCantHaveItMsg" )
    return YouJustCantHaveItMsg() 
```

最后，这是我运行游戏时的输出。所有这些打印语句都用于调试。你会看到我试图获取一个不存在的项目来导致 MatchNotFound，它应该返回 ThatsNotHere 的一个新实例，但没有。

```
You are in the cavern zone of a natural cave in the East Texas countryside.
You know this cave is unexplored. The deep, dark tunnel lies to the north.
"There's really no turning back now!", you tell yourself.
There is: a shady  character (i.e. you) here.

t1 CavernZone ~> take gold coin 
^BEFORE
command: take   performer: player
Actor.take(): Returning: You don't see that here.
vAFTER
Got result: None
Got NONE: returning it

t2 CavernZone ~> 
```

所以......我的问题是，这里发生了什么？我的新实例是否因为函数在返回值分配给调用者之前返回而被 GC 处理？或者是其他东西。我真的不知道，任何帮助将不胜感激。

谢谢，彼得

编辑：

正如 Roland 下面所说，发布（并检查！） performer.execute() 代码。原来我忘了在那个函数中返回结果！谢谢你的额头，原来我需要很多！;)

```
def execute( self, cmd ):
    if cmd.callback is not None:
        result = eval( cmd.callback )( cmd.getArgs() ) 
    else:
        pass 
```

它应该是：

```
def execute( self, cmd ):
    if cmd.callback is not None:
        result = eval( cmd.callback )( cmd.getArgs() ) 
    else:
        result = None
    return result 
```

所以，再次感谢您的帮助！

以下是按计划运行的程序的输出：

```
t14 CavePassageOne ~> take something
Yes, but what?

t15 CavePassageOne ~> take computer
You don't see that here. 
```

# tfs - 是否可以将谷歌测试集成到 TFS 中？

> ID：13105434
> 
> 赞同：2
> 
> 时间：2012-10-28T00:41:55.903
> 
> 标签：tfs, googletest

我公司一直在使用 TFS 来维护源代码、任务和需求等。此外，我们使用 gtest 制作了所有测试用例（我们公司大量使用 C++）。现在我们要确保我们的所有需求都被测试用例覆盖。

那么，是否可以将 gtest 集成到 TFS 中？通过这样说，我们希望能够知道有多少案例与需求相关联（反之亦然），无论何时任何案例失败，我们都应该能够知道哪个需求受到损害。

任何建议将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:48:55.823

升级到 VS2012/TFS2012，有一个新的扩展功能，允许集成 3rd 方测试框架。似乎有人为 gtest 制作了一个。

[http://coolthingoftheday.blogspot.co.nz/2012/10/gtest-c-unit-testing-test-adapter-for.html](http://coolthingoftheday.blogspot.co.nz/2012/10/gtest-c-unit-testing-test-adapter-for.html)

# jquery - jQuery 选择样式自动宽度

> ID：13105437
> 
> 赞同：0
> 
> 时间：2012-10-28T00:42:02.930
> 
> 标签：jquery, select, width, option

我正在使用这个选择样式脚本：[http ://www.bulgaria-web-developers.com/projects/javascript/selectbox/](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)

有没有办法让新的选择器 div 宽度适应文本长度？目前它必须是css中定义的宽度。

下拉列表也一样吗？

我试过调整css，但我认为它可能只适用于jquery，但我不知道如何编辑文件以使其工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:59:29.983

这是一个适合您的实现。 [http://jsfiddle.net/mq3g4/4/](http://jsfiddle.net/mq3g4/4/)

```
$("#country_id").selectbox({
    onOpen: function (inst) {
        //there is no onCreated handler, so I have to use this.
        //but if you want you can just fire this somewhere else
        go();
        //console.log("open", inst);
    },
    onClose: function (inst) {
        //console.log("close", inst);
    },
    onChange: function (val, inst) {
        console.log(val);
    },
    effect: "slide"
});

function go(){
    var widestLI = 0;
    //iterate through each LI and get the widest one
    $(".sbOptions > li").each(function(){
        var tmpWidth = $(this).textWidth();
        if (tmpWidth > widestLI) widestLI = tmpWidth;
        console.log(widestLI);
    });
    //now set both these elements to the widest width, plus 20px because of the padding
    $(".sbOptions, .sbHolder").width(widestLI+20);
}

//from http://stackoverflow.com/questions/1582534/calculating-text-width-with-jquery    
//this here gets the width of the html element.                                      
$.fn.textWidth = function(){
    var html_calc = $('<span>' + $(this).html() + '</span>');
    html_calc.css('font-size',$(this).css('font-size')).hide();
    html_calc.prependTo('body');
    var width = html_calc.width();
    html_calc.remove();
    return width;
}​ 
```

# java - playColor = Color.red 在 Java 中不能正常工作。

> ID：13105438
> 
> 赞同：0
> 
> 时间：2012-10-28T00:42:06.050
> 
> 标签：java

我想要发生的是当鼠标悬停在绿色矩形上时，我希望绿色矩形变为红色，但即使输出显示 playColor 为红色，它也不会变为红色。怎么来的？代码如下：

```
package game;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;

public class StartScreen implements MouseMotionListener {
    int mouseX, mouseY;
    Color playColor = Color.GREEN;

    public void drawStartScreen(Graphics g) {
        g.setColor(playColor);
        g.fillRect(200, 200, 100, 100);
        System.out.println(playColor);
    }

    @Override
    public void mouseDragged(MouseEvent me) { }

    @Override
    public void mouseMoved(MouseEvent me) {        
        mouseY = me.getYOnScreen();
        mouseX = me.getXOnScreen();
        isMouseover();
    }

    private void isMouseover() {

        System.out.println("x: " + mouseX + "y: " + mouseY);
        if (mouseX > 200 && mouseX < 300 && mouseY > 200 && mouseY < 300) {
            System.out.println(playColor);
            playColor = Color.RED;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:03:37.617

您只是将变量设置为红色，但这不会将矩形的颜色更改为红色。为了实现*这一点*`setColor`，您必须在矩形上再次调用该方法：

```
playColor = Color.RED;
drawStartScreen(g); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T00:44:42.410

您将变量设置为红色，而不是矩形。您需要`setColor`在矩形上再次调用。

# php - 如何防止多个嵌套 sql 查询之间的重复输出？

> ID：13105446
> 
> 赞同：0
> 
> 时间：2012-10-28T00:44:24.250
> 
> 标签：php, javascript, mysql

我有一个查询，其中列出了数据库中的 10 个不同项目。

在这个查询中，我有一个嵌套查询，对于上面列出的每个项目 1-10，它在另一个表中找到相关的子类别。

所以最终会发生 11 个查询。1 个遍历主要类别，另外 10 个对每个类别进行查询和输出。

问题是，它们共同输出重复的值。

由于它完成了 10 多个查询，我不能使用`DISTINCT`，因为即使输出在其自己的查询中是不同的，它在整个组中也不是不同的。

那么我怎样才能确保我这样的多查询列表是唯一的呢？js 或 php 是否具有可以执行此操作的内置函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:47:50.027

您的代码并不是真正可扩展的。您已经收到大量查询，想象一下如果您有 100 个项目...

相反，请考虑在原始查询中创建一个子查询，因为这将允许您只运行一个查询，并且 MySQL 引擎可以更轻松地完成所有关键工作（因为它知道您实际要求的是什么）。

尽可能使用`JOIN`s，并密切关注索引。如果没有看到一些代码，我真的无法提供更多帮助，但这应该会有所帮助，因为它`DISTINCT`会突然再次可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:35:16.940

实际上，我找到了一种无需修改代码即可解决它的方法。我只是使用非重置增量 $array[$i] 将所有查询的整个输出放入同一个数组中，然后使用 php 的 array_unique。:)。PHP 是一种非常通用的语言。我谦虚（菜鸟）的意见。

# grails - 我无法在 Grails 中安装 spring-security-core 插件

> ID：13105458
> 
> 赞同：2
> 
> 时间：2012-10-28T00:46:16.113
> 
> 标签：grails, spring-security

我有 Windows 7 和 Grails-2.0.4。尝试安装插件 spring-security-core。我到处都试过了：`cmd`、Idea、SPS。没有任何效果。到处都是同样的错误：

```
!Error resolving  plugin [name: spring-security-core, group: org.grails.plugins, version: latest.integration(1.2.7.3 in SPS)]. Plugin not found.
!Error Plugin not found  for name [spring-security-core] and version[not specified(1.2.7.3 in SPS)] 
```

我试图把这个插件的 zip 文件放在不同的目录中。不工作。通过连接一切正常。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:20:16.190

安装它的首选方法是在 BuildConfig.groovy 中添加一个依赖项。列出了每个插件的语法，在这种情况下来自[http://grails.org/plugin/spring-security-core](http://grails.org/plugin/spring-security-core)： BuildConfig.groovy`compile`的 ":spring-security-core:1.2.7.3" `(look for the 'Dependency' section at the top). So the`plugins` 部分应该是这样的：

```
plugins {
   runtime ":hibernate:$grailsVersion"
   build ":tomcat:$grailsVersion"
   ...
   compile ":spring-security-core:1.2.7.3"
} 
```

或者，您可以使用`install-plugin`脚本安装它：

```
$ grails install-plugin spring-security-core 
```

但依赖方法是更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:09:35.033

检查`repositories`您的 BuildConfig 依赖项部分，如果不存在，请添加以下内容：

```
grailsRepo "http://grails.org/plugins" 
```

grails 插件存储库在今年早些时候移动，旧存储库不包含自 2012 年 4 月以来发布的任何插件版本。我不记得确切的 Grails 版本将默认使用新存储库，更改发生在 2.0.3/ 左右4.

# javascript - 为 Facebook 发送表单预填充收件人

> ID：13105460
> 
> 赞同：-1
> 
> 时间：2012-10-28T00:46:27.093
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

使用 javascript SDK 我首先让用户验证应用程序，然后获取朋友列表并预填充 to 字段。

这是我到目前为止所拥有的。给出一个模糊的错误

[http://www.fbrell.com/saved/fcd3326a3fb5ca0c28e19053df70ab01](http://www.fbrell.com/saved/fcd3326a3fb5ca0c28e19053df70ab01)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:24:14.223

如果您的代码正确缩进，您会很快发现语法错误。

你`function loop(list){`的没有正确关闭。

`if(list.length != 0){`用`};`delete关闭并在它之后`;`添加`}`

[http://www.fbrell.com/saved/da459800ab32f9ede5d4783bcbe0609d](http://www.fbrell.com/saved/da459800ab32f9ede5d4783bcbe0609d)

享受 ：-）

# java - 从 JText 字段中获取输入

> ID：13105461
> 
> 赞同：2
> 
> 时间：2012-10-28T00:46:46.980
> 
> 标签：java

我试图让“enlargeListener 实现 ActionListener”类从 shapeName JTextField 获取输入并将其应用到 f​​or 循环中。规范是，如果从 shapeName JTextfield 获取的 shapeName.getText() 返回的内容与循环中指定的内容匹配（又名 == "rectangle" 或 == "circle"），它将实现放大或缩小方法。

问题是我知道它返回 JTextField 中的内容......但即使它符合循环的条件......循环仍然失败，我不知道为什么。

例如..如果我在第一个文本框中键入“矩形”...它将作为字符串“矩形”返回到“放大侦听器实现”类下的 for 循环。然而，当它针对 == "rectangle" 进行测试时，它仍然失败。我已经梳理了很多很多文件以试图弄清楚......但我仍然无法。任何帮助，将不胜感激 ：）

```
import java.awt.event.ActionEvent;  
import java.awt.event.ActionListener;  
import javax.swing.JButton;  
import javax.swing.JFrame;  
import javax.swing.JPanel;  
import javax.swing.JTextField;  

public class TestShape extends JFrame  
{  
    Circle c;  
    Rectangle r;  
    JTextField shapeName;  
    JTextField areaText;  
    String input;  
    String area;  

    public TestShape()
    {

        JPanel jp = new JPanel();

        c = new Circle(65);
        r = new Rectangle(60,80);
        add(r);
        add(c);
        r.setBounds(10, 0, 300,300);
        c.setBounds(250, 0, 300, 300);

        getContentPane().add(jp);
        jp.setLayout(null);

        shapeName = new JTextField("  ");
        shapeName.setBounds(150, 200, 335, 22);
        jp.add(shapeName);
        add(jp);

        areaText = new JTextField();
        areaText.setBounds(150, 222, 335, 22);
        jp.add(areaText);
        add(jp);

        JButton enlarge = new JButton("Enlarge");
        enlarge.setBounds(150, 300, 80, 28);
        jp.add(enlarge);
        add(jp);
        enlarge.addActionListener(new enlargeListener());

        JButton shrink = new JButton("Shrink");
        shrink.setBounds(235, 300, 80, 28);
        jp.add(shrink);
        add(jp);    
        shrink.addActionListener(new shrinkListener()); 
    }

    public static void main(String[] args)
    {
        TestShape test = new TestShape();
        test.setVisible(true);
        test.setSize(500,500);
        test.setLocation(500,100);
        test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    class enlargeListener implements ActionListener
    {

        @Override
        public void actionPerformed(ActionEvent arg0)
        {
            input = shapeName.getText().toString();

            if(input == "rectangle")
            {
            r.enlarge();
            //areaText.setText(r.getArea());
            }
            else if (input == "circle")
            {
                c.enlarge();
            }
            else
            {
                System.out.print("cannot do");
            }

        }

    }
    class shrinkListener implements ActionListener
    {

        @Override
        public void actionPerformed(ActionEvent e) 
        {
            if(shapeName.getText() == "rectangle")
            {
            r.shrink();
            }
            else
            {
            c.shrink();
            }

        }

    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T00:50:48.143

一个问题是这种比较（以及其他类似的比较）：

```
input == "rectangle" 
```

这将比较两个 String 引用，并且只有当引用指向完全相同的 String 对象时才会评估为 true。为了比较字符串的内容是否相同，请使用以下`equals()`方法：

```
"rectangle".equals(input) 
```

您将需要修复所有`if`语句以解决此问题。

# javascript - 在 javascript 中传递引用

> ID：13105465
> 
> 赞同：3
> 
> 时间：2012-10-28T00:47:43.640
> 
> 标签：javascript, object, inheritance

这是我的第一个 SO 帖子。我永远感激这个社区拥有和分享的信息。谢谢。

我来自 Flash，我什至不确定要问的正确问题是什么。我所能做的就是列出我的代码示例，然后解释我想要做什么。我没有完全理解我在这里试图说明的术语，所以我觉得最好省略它们。

下面的代码不完整，因为它只包含我认为与我的问题相关的部分。请参阅我的代码中的注释以查看我的问题。

编辑：此处的完整源文件：[链接已删除] console.log 输出有问题的问题。

```
 <script type="text/javascript"> 
    var a_chests = [];
    var chestID = 0;

    //I'm creating a plugin to be able to make multiple instances
    (function ($) {
        $.fn.chestPlugin = function (option) {
            //This function creates a master sprite object which many of my sprites will use
            //I've simplified the features to get to the heart of my question
            var DHTMLSprite = function (params) {
                var ident = params.ident,
                var that = {
                    getID: function(){
                        return ident;
                    }
                };
                return that;
            };

            //ChestSprite inherits DHTMLSprites properties and then adds a few of its own
            var chestSprite = function(params) {
                var ident = params.ident,
                that = DHTMLSprite(params);
                that.reveal=function(){
                    console.log(ident);
                };

                return that;
            };

            //Here I create multiple instances of the chests
            var treasure = function ( $drawTarget,chests) {
                for (i=0;i<chests;i++){
                    var cs = chestSprite({
                        ident: "chest"+chestID
                    })
                    console.log(cs.reveal()) 
                    //This logs "chest0", "chest1", "chest2" as the for loop executes
                    //This behavior is correct and/or expected!

                    a_chests[chestID]={id:i,ob:cs};
                    //I add a reference to the new chestSprite for later

                    chestID++;
                    //increment the chestID;
                }
                console.log(a_chests[1].ob.reveal());
                //This always logs "chest2" (the last chest that is created), even though
                //the logs in the for loop were correct. It seems it is referencing the
                //DHTML object (since the DHTMLSprite function returns that;) and since 
                //there is no reference to which chest I need, it passes the last one.

                //Is there any way I can pass a reference to DHTMLSprite in order to retain
                //the reference to the three individual chests that are created?

                //Is there another solution altogether? Thanks!!!
            };

            //The rest of the code.
            return this.each(function () {
                var $drawTarget = $(this);
                treasure($drawTarget,3);
            });
        };
        })(jQuery);

        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:32:55.983

您忘记将“that”声明为局部变量，因此每次迭代都会覆盖它。

```
 var chestSprite = function(params) {
      var that;
      var animInterval;
      ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:15:18.823

当你写：

```
a_chests[chestID]={id:i,ob:cs}; 
```

您正在分配 cs 对象本身，而不是该对象的实例。如果稍后您修改 cs，这也会修改您存储在 ob 属性中的内容。

我想你需要的是一个**闭包**：

```
for (i=0;i<chests;i++){
(function(){
    var cs = chestSprite({ident: "chest"+chestID});
    a_chests[chestID]={id:i,ob:cs};
})();
} 
```

这样，每个循环都会创建一个不同的 cs 对象。

# windows - 7z 压缩目录相对

> ID：13105475
> 
> 赞同：0
> 
> 时间：2012-10-28T00:50:26.930
> 
> 标签：windows, path, 7zip

我正在尝试使用 7z 压缩目录，所以我这样做了

```
C:/7z a -tzip mydirectory/testing.zip mydirectory/testing -o* -r 
```

输出的zip文件对整个目录结构路径的内容有问题

```
mydirectory/testing/.... 
```

但我希望压缩测试中的文件，并且上面没有任何路径反映在其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:03:29.547

将目录更改为`mydirectory/testing`first 并用于`*`获取所有文件。

```
cd mydirectory\testing
C:\7z.exe a -tzip ../testing.zip * -r 
```

# java - 以 gzip 格式包装压缩数据

> ID：13105481
> 
> 赞同：1
> 
> 时间：2012-10-28T00:51:37.530
> 
> 标签：java, multithreading, gzip, concatenation, deflate

我想我错过了一些非常简单的东西。我有一个字节数组，其中包含使用 Deflater 写入其中的压缩数据：

```
deflate(outData, 0, BLOCK_SIZE, SYNC_FLUSH) 
```

我不只是使用 GZIPOutputStream 的原因是因为有 4 个线程（变量），每个线程都有一个数据块，每个线程在将压缩数据存储到全局字节数组之前压缩它自己的块。如果我使用 GZIPOutputStream 它会弄乱格式，因为每个小块都有一个标题和尾部，并且是它自己的 gzip 数据（我只想压缩它）。

所以最后，我得到了这个 byteArray，outData，它保存了我所有的压缩数据，但我不确定如何包装它。GZIPOutputStream 从带有未压缩数据的缓冲区写入，但该数组已全部设置。它已经被压缩了，我只是想弄清楚如何把它变成一个表格。

编辑：好的，我的措辞不好。我将它写入输出，而不是文件，以便在需要时可以重定向它。一个非常简单的例子是

```
cat file.txt | java Jzip | gzip -d | cmp file.txt 
```

应该返回 0。现在的问题是，如果我按原样编写这个字节数组以输出，它只是“原始”压缩数据。我认为 gzip 需要所有这些额外的信息。

如果有替代方法，那很好。像这样的全部原因是因为我需要使用多个线程。否则我只会调用 GZIPOutputStream。

双重编辑：由于评论提供了很多很好的见解，另一种方法是我只有一堆未压缩的数据块，这些数据块最初是一个长流。如果 gzip 可以读取连接的流，如果我把这些块（并保持它们按顺序排列）并将每个块分配给一个在其自己的块上调用 GZIPOutputStream 的线程，然后获取结果并将它们连接起来。本质上，每个块现在都有标题、压缩信息和预告片。如果我将它们连接起来，gzip 会认识到这一点吗？

例子：

```
cat file.txt
Hello world! How are you? I'm ready to set fire to this assignment.

java Testcase < file.txt > file.txt.gz 
```

所以我从输入中接受它。在程序内部，流被分成“Hello world！” “你好吗？” “我准备点燃这个任务”（它们不是字符串，它只是一个字节数组！这只是说明）

所以我有这三个字节块，都是未压缩的。我将这些块中的每一个都分配给一个线程，该线程使用

```
public static class DGZIPOutputStream extends GZIPOutputStream
{
    public DGZIPOutputStream(OutputStream out, boolean flush) throws IOException
    {
        super(out, flush);
    }
    public void setDictionary(byte[] b)
    {
        def.setDictionary(b);
    }
    public void updateCRC(byte[] input)
    {
        crc.update(input);
    }                       
} 
```

如您所见，这里唯一的事情是我已将刷新设置为 SYNC_FLUSH，因此我可以正确对齐并能够设置字典。如果每个线程都使用 DGZIPOutputStream （我已经测试过，它适用于一个长时间的连续输入），并且我将这三个块连接起来（现在每个块都用标题和拖尾压缩），那么 gzip -d file.txt.gz 会工作吗?

如果这太奇怪了，请完全忽略字典。这并不重要。我只是在使用它的时候添加了它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T06:11:06.423

如果`nowrap`在使用`Deflater`(sic) 构造函数时设置为 true，则结果为原始 deflate。否则它是 zlib，你将不得不剥离 zlib 标头和预告片。对于其余的答案，我假设`nowrap`是真的。

要将完整的、终止的 deflate 流包装为 gzip 流，您需要预先添加 10 个字节：

```
"\x1f\x8b\x08\0\0\0\0\0\0\xff" 
```

（抱歉——C 格式，您需要转换为 Java 八进制）。您还需要以小端顺序附加四字节 CRC，然后是四字节总未压缩长度模 2^32，也以小端顺序。鉴于标准 Java API 中可用的内容，您需要串行计算 CRC。它不能并行完成。 [zlib](http://zlib.net/)确实具有组合并行计算的单独 CRC 的功能，但在 Java 中未公开。

请注意，我说的是一个完整的、终止的放气流。制作一个具有并行放气任务的任务需要一些小心。您需要制作`n-1`未终止的放气流和一个最终终止的放气流并将它们连接起来。最后一个是正常制作的。另一个`n-1`需要使用同步刷新来终止，以便在字节边界上结束每个并且不将其标记为流的结尾。为此，您可以使用[`deflate`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/Deflater.html#deflate%28byte%5B%5D,%20int,%20int,%20int%29)flush 参数`SYNC_FLUSH`。不要`finish()`在那些上使用。

为了更好地压缩，您可以[`setDictionary`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/Deflater.html#setDictionary%28byte%5B%5D,%20int,%20int%29)在每个块上使用前一个块的最后 32K。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:02:30.520

如果您希望将其写入`outdata`文件，您可以写成：

```
GZIPOutputStream outStream= new GZIPOutputStream(new FileOutputStream("fileName"));
outStream.write(outData, 0, outData.length);
outStream.close(); 
```

或者干脆用`java.io.FileOutputStream`写：

```
FileOutputStream outStream= new FileOutputStream("fileName");
outStream.write(outData, 0, outData.length);
outStream.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T01:02:46.693

您只想按原样将字节数组写入文件？

您可以使用 Apache Commons：

```
FileOutputStream fos = new FileOutputStream("yourFilename");
fos.write(outData);
fos.close(): 
```

或普通的旧 Java：

```
BufferedOutputStream bs = null;

try {
    FileOutputStream fs = new FileOutputStream(new File("yourFilename"));
    bs = new BufferedOutputStream(fs);
    bs.write(outData);
    bs.close();

} catch (Exception e) {
    //please handle this
}

if (bs != null) try { 
    bs.close(); 
} catch (Exception e) {
    //please handle this
} 
```

# python - 如何播放 .wav（或任何其他类型的文件）文件？像实际的音频输出

> ID：13105483
> 
> 赞同：-1
> 
> 时间：2012-10-28T00:51:43.483
> 
> 标签：python, macos, audio, wav, osx-mountain-lion

如何播放同一目录中的 .wav 文件？任何帮助，将不胜感激！但请确保它适用于 Mac OS X Mountain Lion。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:08:44.980

你可以使用[`Pygame`](http://www.pygame.org/wiki/MacLionCompile)：

```
pygame.init()
pygame.mixer.Sound('sound.wav').play() 
```

在这里阅读更多：http: [//www.pygame.org/docs/ref/mixer.html](http://www.pygame.org/docs/ref/mixer.html)

# java - 在 java 中读取 .bmp 文件时抛出 llOExcption

> ID：13105485
> 
> 赞同：0
> 
> 时间：2012-10-28T00:52:25.440
> 
> 标签：java, exception

我正在尝试读取一个名为 .bmp 的文件`circle1`，该文件是一个已导入包含以下方法的类的包。

到目前为止，我有以下代码，但是当我运行以下代码时，我得到：

> javax.imageio.llOException：无法读取输入文件！

```
public void setUp() throws IOException
{
    // minimumOverlapScore < synapsesPerSegment(not yet a field)

    BufferedImage image = ImageIO.read(new File("circle1.bmp"));
    byte[][] greenInputData = new byte[30][40];

    for (int x = 0; x < inputData.length; x++)
    {
        for (int y = 0; y < inputData[x].length; y++)
        {
            int color = image.getRGB(x, y);
            //alpha[x][y] = (byte)(color>>24);
            //red[x][y] = (byte)(color>>16);
            greenInputData[x][y] = (byte)(color>>8);
            //blue[x][y] = (byte)(color);
        }
    }
    this.inputData = greenInputData;

    System.out.println(this.inputData);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:57:26.210

在直接 SDK 中使用[`Class.getResourceAsStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)是您需要的，而不是`File`.

如果在 Spring 中使用`ResourceLocator.getResource("classpath:circle1.bmp")`；

# c++ - 在 C++ 中清除 cin

> ID：13105486
> 
> 赞同：4
> 
> 时间：2012-10-28T00:52:43.900
> 
> 标签：c++, cin

> **可能重复：**
> [为什么这个 cin 读数卡住了？](https://stackoverflow.com/questions/478258/why-is-this-cin-reading-jammed)

我重载了 istream 运算符 ( `istream &operator>>...`)，它采用以下格式：

```
(<x-coordinate>,<y-coordinate>) 
```

我想多次（10）次测试这个，所以写了：

```
for (int i = 0; i < 10; i++)  {
    cin >> a;
    if (!cin.fail()) { cout << a << endl; }
    else { cout << "Invalid input!" << endl; cin.clear(); }
} 
```

编辑：

我现在有以下代码：

```
for (int i = 0; i < 10; i++)  {
    cin >> a;
    if (!cin.fail()) { cout << a << endl; }
    else {
        cout << "Invalid input!" << endl; cin.clear();
        while (!cin.eof()) { cin.ignore(); } cin.ignore();
    }
} 
```

克苏鲁建议忽略。但是，问题是 cin 仍然输出“无效输入！” 运行完上面的代码后：

```
(3,3) <-- input
(3,3) <-- output
Invalid output! <-- second output 
```

有没有办法可以清除 cin 中的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T00:54:14.067

`cin.clear()`不会清空缓冲区，它会重置流上的错误标志。然后你必须调用**[cin.ignore](http://www.cplusplus.com/reference/iostream/istream/ignore/)**

```
istream&  ignore ( streamsize n = 1, int delim = EOF ); 
```

> 从输入序列中提取字符并丢弃它们。
> 
> 当 n 个字符被提取并丢弃或找到字符分隔符时，提取结束，以先到者为准。在后一种情况下，delim 字符本身也被提取。

* * *

```
cin.clear();
cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); 
```

**[数值限制](http://en.cppreference.com/w/cpp/types/numeric_limits/max)**

# java - Java TCP 多线程问题

> ID：13105488
> 
> 赞同：1
> 
> 时间：2012-10-28T00:53:00.280
> 
> 标签：java, multithreading, networking, tcp

我的程序运行良好，许多用户可以连接服务器并向服务器发送命令。但是，当用户使用命令向服务器发送垃圾邮件时，服务器会阻止所有其他客户端，并且服务器不会收到来自发送垃圾邮件的客户端以外的客户端的消息。为什么是这样？

TCPAccept 连接

* * *

```
 package game.server;

import java.io.IOException;
import java.net.Socket;

public class TCPAcceptConnections implements Runnable
{
    public static Socket clientSocket = null;;
    int clientID = -1;

    public void run()
    {
        while(Main.TCP)
        {
            try
            {
                clientSocket = TCPServer.serverSocket.accept();
                System.out.println("Client Connected.");
                clientID++;

                new TCPClientManager(clientSocket, clientID).run();
            } 
            catch (IOException e)
            {
                System.out.println("Couldn't create client socket.");
                System.exit(-1);
            }
        }
    }
} 
```

TCPClientManager：

* * *

```
 package game.server;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

public class TCPClientManager implements Runnable
{
    Socket client;

    int clientID;

    static PrintWriter out;
    static BufferedReader in;
    String inputLine, outputLine;

    boolean destroy = false;

    public TCPClientManager(Socket cs, int id)
    {
        try
        {
            client = cs;
            clientID = id;
            out = new PrintWriter(client.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(client.getInputStream()));
        } catch(IOException e)
        {
            e.printStackTrace();
        }
    }

    public void run()
    {
        System.out.println("Created TCPManager for client.");
        String command;

        while(!destroy)
        {
            try
            {
                if((command = in.readLine()) != null) //If received something
                {
                    System.out.println("Commad received: " + command);
                        System.out.println(" " + Commands.proccessCommand(command));
                    System.out.println("Command proccessed");
                }
                else
                {
                    client.close();
                    destroy = true;
                }
            } catch (IOException e)
            {
                try
                {
                    client.close();
                } catch (IOException e1)
                {
                    e1.printStackTrace();
                    destroy = true;
                }
                System.out.println("Client lost connection.");
                destroy = true;
            }
        }
        System.out.println("TCPManager for client destroyed.");
    }
} 
```

命令：

* * *

```
package game.server;

public class Commands
{
    public static String proccessCommand(String command)
    {
        if(command.equalsIgnoreCase("cp"))
        {
            System.out.println("Creating player...");
                System.out.println("    Retrieved client");
            return "Player Created";
        }
        else
        {
            return "Unkown command: " + command;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:06:02.293

如果你得到一个未知的命令，你应该记录它并关闭连接。

但是你有一个更严重的问题。当它读取 null 时，您不会停止客户端处理程序。因此，一旦客户端断开连接，读取将永远徒劳无功。如果 readLine() 返回 null 您必须关闭套接字并退出循环。如果您收到任何 IOException，您还必须关闭套接字。

# c++ - 使用 SDL 的访问冲突

> ID：13105493
> 
> 赞同：1
> 
> 时间：2012-10-28T00:53:34.497
> 
> 标签：c++, sdl

我有一个小脚本，旨在获取用户的屏幕分辨率并将其分配给一个变量，但我收到一个`Access Violation`错误，不知道如何修复它（我对这种语言很陌生）所以希望有人能告诉我我应该怎么写。

这是我的设置：

```
//get player's screen info
const SDL_VideoInfo* myScreen = SDL_GetVideoInfo();

//SDL screen
SDL_Surface *screen;
int reso_x = myScreen->current_w; //resolution width (ERROR here)
int reso_y = myScreen->current_h; //resolution height
Uint8  video_bpp = 32;
Uint32 videoflags = SDL_SWSURFACE | SDL_DOUBLEBUF | SDL_ANYFORMAT;// | SDL_FULLSCREEN;

/* Initialize the SDL library */
if ( SDL_Init(videoflags) < 0 ) {
     fprintf(stderr, "Couldn't initialize SDL: %s\n",
     SDL_GetError());
     exit(1);
     }

//setup Screen
screen = SDL_SetVideoMode(reso_x, reso_y, video_bpp, videoflags|SDL_FULLSCREEN); 
```

有人知道我错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:12:36.903

您不应在 SDL_init 之前进行任何 SDL 调用。我的猜测是 GetVideoInfo 正在返回 null，因为此时您不在有效状态。您传递给 init 的标志也是错误的，它应该是 SDL_INIT_VIDEO 而不是您想要的视频类型。您的视频标志应该转到 SetVideoMode 函数。

# ruby-on-rails - 带有 Rspec 的 Stub ApplicationController 类方法

> ID：13105495
> 
> 赞同：0
> 
> 时间：2012-10-28T00:54:00.020
> 
> 标签：ruby-on-rails, rspec, tdd

我将如何`set_headers`在 Rspec 中存根下面的类方法？

**application_controller.rb**

```
class ApplicationController < ActionController::Base

  def self.set_headers(name) 
     after_filter do
       object = instance_variable_get("@#{name}")
       headers['fancy'] = object.fancy_header
     end
  end

end 
```

**常规控制器.rb**

```
class RegularController < ApplicationController
  set_headers :regular

  def index
    # do regular stuff
  end
end 
```

我在下面尝试了以下方法，但它不起作用。

**regular_controller_spec.rb**

```
describe RegularController do
  before(:each) do
    ApplicationController.any_instance.stub(:set_headers).and_return({this: 'params'})
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:43:52.597

刚刚快速测试了一下，发现这应该可以工作：

```
controller.class.stub(:set_headers).and_return({this: 'params'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T02:01:50.733

这里有多个问题：

*   `set_headers``RegularController`在定义时调用。这在规范运行之前很久就发生了，因此对`set_headers`方法进行存根不会有任何影响。
*   在您的类定义中， is`RegularController`的接收者（因为在类定义中是类对象本身）。您尝试的存根在 的任何实例上存根，但它不是 的实例方法。`set_headers``RegularController``self``set_headers``ApplicationController``ApplicationController`

我真的不能推荐如何实现你想要做的事情，因为不清楚你想要做什么。

# java - Android Https OAuth 401 未经授权的错误

> ID：13105497
> 
> 赞同：0
> 
> 时间：2012-10-28T00:54:03.510
> 
> 标签：java, android, https, oauth-2.0

```
private void login() {
            androidID = Secure.getString(MainActivity.this.getContentResolver(), Secure.ANDROID_ID);
            String uP = androidID.concat(":ClientTrustedSecret");
            byte[] authByteAry = null;
            try {
                    authByteAry = uP.getBytes("UTF-8");
            } catch (UnsupportedEncodingException e1) {
                    e1.printStackTrace();
            }
            String base64 = Base64.encodeToString(authByteAry, Base64.DEFAULT).trim();
            client.addHeader("Authorization", "Basic ".concat(base64));
            // Following format is required to post to OAuth
            JSONObject jsonObject = new JSONObject();
            try {
                    jsonObject.put("grant_type", "password");
                    jsonObject.put("username", "abc");
                    jsonObject.put("password", "abc");
            } catch (JSONException e1) {
                    e1.printStackTrace();
            }
            String contentType = "application/json; charset=UTF-8";
            StringEntity data = null;
            try {
                    // Send the json to the server
                    data = new StringEntity(jsonObject.toString());
                    client.post(MainActivity.this, baseURL.concat("/tokens"), data, contentType, new AsyncHttpResponseHandler() {
                            @Override
                            public void onSuccess(String response) {
                                    try {
                                            JSONObject jsonObject = new JSONObject(response);
                                            oauthAccessTokenString = jsonObject.get("access_token").toString();
                                    } catch (JSONException e) {
                                            e.printStackTrace();
                                    }
                            }
                            @Override
                            public void onFailure(Throwable t, String err) {
                                    System.out.println("login failed");
                            }
                    });
            } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
            }
    } 
```

以上是我的登录方式。当我拨打另一个网络服务电话时，我得到了未经授权的信息。解锁方法需要以下标头。

[http://i.imgur.com/EaWDO.png](http://i.imgur.com/EaWDO.png)

```
private void unlock()
    {
            AsyncHttpClient asyncHttpClient = new AsyncHttpClient();
            asyncHttpClient.addHeader("Locale", "en_US");
            asyncHttpClient.addHeader("X-Originator-Type", "app");
            asyncHttpClient.addHeader("Content-Type", "application/json");
//              asyncHttpClient.addHeader("Connection", "Keep-Alive");
//              asyncHttpClient.addHeader("X-Device-Id", androidID);
//              asyncHttpClient.addHeader("X-via", deviceId);
//              asyncHttpClient.addHeader("ClientID", "abc@abc.com");
            asyncHttpClient.addHeader("Authorization", "Bearer ".concat(oauthAccessTokenString));
            asyncHttpClient.get("host/users?loginName=abc@abc.com", new AsyncHttpResponseHandler() {
                @Override
                public void onSuccess(String response) {
                    System.out.println(response);
                }
                @Override
                    public void onFailure(Throwable t, String err) {
                            System.out.println("Unlock server call failed");
                            Log.d("printing error: ", err);
                    }
            });
    } 
```

上面的代码抛出 401 未经授权的异常。我拥有的文档中没有引用来回调 url。我提供了 oauth 访问令牌就好了，但是为什么我仍然得到 401？秘密与第二次通话有什么关系吗？有人告诉我，我需要以这种方式设置标题。我还被告知“对于 https，客户端需要能够处理证书的验证。有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:45:05.603

这是一个错误的 Web 服务地址 :( 不需要处理证书的验证。与回调 url 无关。秘密与此无关。但是我的文档写得很糟糕，在一个地方他们只提到了标题，然后在另一个地方他们说需要正文很好。所以只要确保你正确地浏览了这些文件。

# opencv - 来自非中心位置的球坐标

> ID：13105502
> 
> 赞同：1
> 
> 时间：2012-10-28T00:54:44.053
> 
> 标签：opencv, geometry, projective-geometry

假设一个以 (cx,cy,cz) != (0,0,0) 为中心的针孔相机，是否有一种更有效的方法来计算它在以原点为中心的球坐标系中的投影，而不是执行射线-球面相交每个像素？

如果相机以原点为中心，那么简单的解决方案将是：

```
theta = arccos(y/r)
phi = arctan2(x,z) 
```

# asp.net - ASP.net 使用会话变量将 GridView SelectedDataKey 移动到另一个页面

> ID：13105503
> 
> 赞同：0
> 
> 时间：2012-10-28T00:55:10.353
> 
> 标签：asp.net

请帮忙！

我正在拔掉我剩下的一点头发，找不到答案。

我正在尝试将网格视图中的选定行移动到另一个页面，并使用 SelectedDataKey 或选定行的主键值来指示应在另一页的网格视图中显示哪些数据。这是我无法弄清楚的学校项目的最后一点。

我在第一页上所做的是使用按钮单击事件来设置一个看起来像这样的会话变量。会话[“选择”] = GridView1.SelectedDataKey; 然后该按钮会将用户发送到下一页。Response.Redirect("CustomerAccounts.aspx");

在下一页上，我想使用在第一页上选择的主键，通过在下一个 gridview 中使用 where 语句，仅在第二页上显示具有对应值的数据。所以我正在设置 [CustomerID]=? 会话（“会话[“选择”]）

我是否在第二个网格视图中正确设置了位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:03:13.367

我喜欢用查询字符串设置这样的东西。不久前，我在 youtube 上做了一个视频教程 [http://www.youtube.com/watch?v=HRjZ_0JpO2M&list=UUgtKyNvllU9E6c2Mi8OtzCQ&index=5&feature=plcp](http://www.youtube.com/watch?v=HRjZ_0JpO2M&list=UUgtKyNvllU9E6c2Mi8OtzCQ&index=5&feature=plcp)

我还制作了一个教程，展示了如何使用 jquery [http://www.youtube.com/watch?v=nJp14o_1wZQ&list=UUgtKyNvllU9E6c2Mi8OtzCQ&index=4&feature=plcp加载嵌套在主网格视图中的详细网格视图](http://www.youtube.com/watch?v=nJp14o_1wZQ&list=UUgtKyNvllU9E6c2Mi8OtzCQ&index=4&feature=plcp)

# python - 访问 python 子列表以导入 pandas DataFrame

> ID：13105505
> 
> 赞同：4
> 
> 时间：2012-10-28T00:55:26.393
> 
> 标签：python, pandas

我正在尝试将梦幻篮球数据从[yql](http://yuilibrary.com/yui/docs/yql/)导入 pandas 数据框，但我遇到了嵌套内容的问题。

来自 yql (results.rows) 的数据看起来像这样（当我使用 type(results.rows) 时，我得到列表）。

```
{u'display_position': u'PF',
u'editorial_player_key': u'nba.p.4175',
u'editorial_team_abbr': u'Uta',
u'editorial_team_full_name': u'Utah Jazz',
u'editorial_team_key': u'nba.t.26',
u'eligible_positions': {u'position': u'PF'},
u'headshot': {u'size': u'small',
  u'url': u'http://l.yimg.com/iu/api/res/1.2/KjAPlP83IIrP9iReWfjyjw--/YXBwaWQ9eXZpZGVvO2NoPTIxNTtjcj0xO2N3PTE2NDtkeD0xO2R5PTE7Zmk9dWxjcm9wO2g9NjA7cT0xMDA7dz00Ng--/http://l.yimg.com/a/i/us/sp/v/nba/players_l/20101116/4175.jpg'},
  u'image_url': u'http://l.yimg.com/iu/api/res/1.2/KjAPlP83IIrP9iReWfjyjw--/YXBwaWQ9eXZpZGVvO2NoPTIxNTtjcj0xO2N3PTE2NDtkeD0xO2R5PTE7Zmk9dWxjcm9wO2g9NjA7cT0xMDA7dz00Ng--/http://l.yimg.com/a/i/us/sp/v/nba/players_l/20101116/4175.jpg',
u'is_undroppable': u'0',
u'name': {u'ascii_first': u'Paul',
  u'ascii_last': u'Millsap',
  u'first': u'Paul',
  u'full': u'Paul Millsap',
  u'last': u'Millsap'},
u'player_id': u'4175',
u'player_key': u'304.p.4175',
u'position_type': u'P',
u'uniform_number': u'24'} 
```

当我表演

```
DataFrame(results.rows) 
```

它可以很好地导入数据，但是 headshot 和 name 中的数据都作为带有嵌套列表的列导入。

我可以从 iPython 访问子列表，但是当我尝试将其导入数据框时出现错误：

```
results[0]['name']

{u'ascii_first': u'Pau',
 u'ascii_last': u'Gasol',
 u'first': u'Pau',
 u'full': u'Pau Gasol',
 u'last': u'Gasol'}

 DataFrame([results[0]['name'])

 ValueError: If use all scalar values, must pass index 
```

我想要的行为是将嵌套列表导入为它们自己的列，而不是作为包含嵌套列表的列。我怎样才能做到这一点？

我想要的最终结果是具有以下布局的 DataFrame：

```
+---------------------------------------------------------------------------------------+
|display_position | (...) | ascii_first | ascii_last | first | full | last | player_id  |
+---------------------------------------------------------------------------------------+
|    Data         |       |             |            |       |      |      |            |
+---------------------------------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:49:48.773

您需要“展平” `results.rows`. 在您的情况下，`results[n]`（`n`表示单个“记录”的从零开始的索引在哪里）是一个包含嵌套字典（用于键`name`和`headshot`）的字典。

[已在此问题](https://stackoverflow.com/questions/6027558/flatten-nested-python-dictionaries-compressing-keys)及其相关问题中详细讨论了字典的扁平化。

一种可能的方法：

```
import collections

def flatten(d, parent_key=''):
    items = []
    for k, v in d.items():
        new_key = parent_key + '_' + k if parent_key else k
        if isinstance(v, collections.MutableMapping):
            items.extend(flatten(v, new_key).items())
        else:
            items.append((new_key, v))
    return dict(items)

flattened_records = [flatten(record) for record in results.rows]
df = DataFrame(flattened_records) 
```

请注意，使用这种方法，嵌套列的键将通过将“父”键与嵌套字典中的键连接来派生，例如“name_first”、“name_last”。您可以自定义`flatten`方法来更改它。

这里可以使用不止一种方法。关键的见解是您需要将`results.rows`.

# git - EGit 是否要求安装 JGit？

> ID：13105507
> 
> 赞同：2
> 
> 时间：2012-10-28T00:56:48.810
> 
> 标签：git, eclipse-plugin, egit

从命令行使用 Git 一段时间后，我准备好使用 GUI 插件（用于 Eclipse）可以提供的便利。

但是，我更喜欢类似于 MS Visual Studio 的 Git 插件，`Git Source Control Provider`它只是已经安装的[msysgit](http://www.makeuseof.com/tag/5-windows-git-clients-git-job/)的包装器。我真的不希望两个不同的 Git 实现访问同一个存储库。

EGit 听起来很完美——如果它可以在我的 PC中使用已经安装的[msysgit 。](http://www.makeuseof.com/tag/5-windows-git-clients-git-job/)

但可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T04:57:53.817

不，它不能。Egit 作为工具部分需要 JGit 作为存储库访问部分。

但是并行使用 msysgit 和 Egit 确实没有问题，这是大多数 Egit 用户一开始（包括我自己）所做的，当时 EGit/JGit 仍然缺乏很多功能。并且 JGit 也经过了彻底的测试，由于实现了 JGit，在本*机*git 实现中发现了相当多的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:42:17.273

jgit是egit所依赖的库，所以必须先安装jgit，egit才能运行。

# ios - 在 UIPopoverController 中显示 UIViewController

> ID：13105508
> 
> 赞同：2
> 
> 时间：2012-10-28T00:57:24.960
> 
> 标签：ios, xcode, interface-builder, ios6, uipopovercontroller

我正在尝试呈现 a `UIViewController`inside a `UIPopoverController`。我在 Interface Builder 中设计了一个视图控制器，给了它一个自定义类（比如说`MyAppTestViewController`），我试图以这种方式创建一个弹出框：

```
MyAppTestViewController *fxViewController = [MyAppTestViewController new];

self.fxPopover = [[UIPopoverController alloc] initWithContentViewController:fxViewController];
self.fxPopover.popoverContentSize = CGSizeMake(1024, 120);

[self.fxPopover presentPopoverFromBarButtonItem:_fxButton permittedArrowDirections:UIPopoverArrowDirectionDown animated:NO]; 
```

当我按下按钮时，会在正确的位置以正确的大小显示一个弹出框，但它是空的。我已经验证了`MyAppTestViewController`'s`viewDidAppear`方法正在被调用（by `NSLog`），但是 Popover 的内部是空的：

![ipad截图](../Images/af3bdc7f851efb6bd6d725a71be4ded1.png)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:47:26.760

我看到您在评论中提到您正在使用故事板。那么为什么不对你的`MyAppTestViewController`. 您可以将 segue 直接连接到工具栏上的“效果”按钮。（或者，或者，`performSegueWithIdentifier:`从您的呈现视图控制器调用。）您可以通过将 UILabel 直接扔到`MyAppTestViewController`情节提要上并查看它是否正确显示来进行快速测试。

![在此处输入图像描述](../Images/e0966dfeeae6623dc5a88e2d623ac250.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T01:04:50.047

我认为问题出在这里：

```
MyAppTestViewController *fxViewController = [MyAppTestViewController new]; 
```

通常您会使用`[[MyViewControllerClass alloc] initWithNibName:nil bundle:nil]`（假设您有一个名称匹配的 xib 文件）。我不相信我见过用`new`. Objective-C 中的一切都是 alloc-init。

Apple Docs：[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

引用：

> 要使用 nib 初始化视图控制器对象，请使用 initWithNibName:bundle: 方法指定视图控制器使用的 nib 文件。然后，当视图控制器需要加载其视图时，它会使用存储在 nib 文件中的信息自动创建和配置视图。

* * *

编辑：

很吸引人，不错。看起来你对 new 关键字的使用是正确的，[这里是对 this 的一点解释](https://stackoverflow.com/a/719882/700471)。

很好，这不是问题。您是否尝试过打破`viewDidAppear`方法并使用调试器打印出视图属性，检查其框架，检查其超级视图等，尝试更好地理解问题？您可能已经知道如何执行此操作，但命令将是`po self.view`等等。

无论如何，我也发现[了这个](https://stackoverflow.com/a/10238581/700471)，尽管它只涉及弹出框演示的机制，而不涉及内容视图分配，您似乎对此有所了解。

# database-design - 电影收藏/图书馆的数据库设计有些复杂，需要指导

> ID：13105511
> 
> 赞同：0
> 
> 时间：2012-10-28T00:58:09.493
> 
> 标签：database-design

我的数据库有点生疏，但也许你可以帮忙。我想创建一个表，其中包含在 DVD 和蓝光上购买的电影。如您所知，有些 DVD 盒子包含几部电影，盒子中的每部电影都可以是特别版，例如导演剪辑版等。您的收藏/库中可以同时拥有单部电影和盒子。

如何构建这个？我不记得正确的符号，但这里是：

```
movies(_id, title, year)
boxes(_id, title, format)
movies_in_box(_*movie_id, _*box_id, edition)
collections(_*user_id, _*id [references either movies or boxes], _type [enum for movie or box], edition, format)

_ = primary key, * = foreign key 
```

这有什么意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:15:07.240

您的层次结构以集合开始，该集合代表属于用户的所有项目。一个项目可以是一部独立的电影，也可以是一套盒装，它本身包含几部电影。我认为“格式”字段应该属于电影而不是盒子（您可能在同一个盒子里有一张 dvd 和一张蓝光）。

关于“版本”字段似乎有轻微的冗余，但我认为这并不重要。如果你可以解决你有一个外键 - _*id - 在引用电影或盒子的集合表中的事实，那么结构是可以的，但我认为最好将*每*部电影表示为盒装，即使盒子里只有一部电影。那么你的结构将是

```
USERS
user_id (PK)
username

MOVIES
movie_id (PK)
movie_name
year
format

BOXES
box_id (PK)
box_name
edition (I assume that this includes the year) 

BOXCONTENTS
box_id (PK, FK)
movie_id (PK, FK)

COLLECTIONS
user_id (PK, FK)
box_id (PK, FK) 
```

# php - 拒绝对文件夹的公共访问，但仍可从其他 php 文件访问

> ID：13105512
> 
> 赞同：-2
> 
> 时间：2012-10-28T00:58:44.180
> 
> 标签：php, .htaccess

我想知道您拒绝公共访问文件夹的最佳方法是什么，但服务器上的其他文件可以访问它？

例如，我支付的模板和脚本

```
 public/template/header.html
 public/template/paidscript.js 
```

我不希望任何人访问模板文件夹中的文件，但是

```
 public/folder/index.php 
```

index.php 里面可以有这段代码

```
<?php include (../tempalte/header.html);
include (../tempalte/paidscript.js);  ?> 
```

服务器上的任何其他文件都可以访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:04:41.387

如果您想对某些文件保密，将这些文件放入可公开访问的 webroot确实是个*坏主意。*将这些文件放在服务器上的私有目录中，就可以了。

您可以从任何您喜欢的 PHP 脚本访问私有目录中的文件。只需指定文件的正确路径就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:05:43.290

理想情况下，文档根目录下一级 - 故事结束！

# android - 将自定义图钉放在图像上并获取其坐标

> ID：13105513
> 
> 赞同：3
> 
> 时间：2012-10-28T00:59:31.947
> 
> 标签：android, android-imageview

我有一个加载图像的 ImageView，

我希望当用户单击图像的一个点时，另一个小图像（用作图钉）在该点重叠并返回该点的坐标。

但我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:09:13.253

尝试这个，

它将帮助您根据坐标放置图像。所以可以重叠

[链接 1](https://stackoverflow.com/questions/3020612/place-image-at-coordinates-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:14:34.180

要将图像放置在某个坐标处，您必须在画布上绘制图像。要获取触摸事件的坐标，请使用以下代码：

```
@Override
    public void onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_MOVE) {
            mTouchX = event.getX();
            mTouchY = event.getY();//stores touch event
        } else {
            mTouchX = -1;
            mTouchY = -1;
        }
        super.onTouchEvent(event);
    } 
```

这是在画布上绘制图像的代码[带有触摸事件的 Canvas 中](https://stackoverflow.com/questions/5743328/android-image-in-canvas-with-touch-events)的图像 希望对您有所帮助。

# c++ - n维向量

> ID：13105514
> 
> 赞同：13
> 
> 时间：2012-10-28T00:59:55.297
> 
> 标签：c++, templates

假设我想声明一个向量的一个向量的一个向量的向量...（最多 n 维）。

像这样：

```
using namespace std;
// for n=2
vector<vector<int> > v2;
// for n=3
vector<vector<vector<int> > > v3;
// for n=4
vector<vector<vector<vector<int> > > > v3; 
```

有没有办法使用模板元编程对任意 n 执行此操作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-28T01:03:01.527

是的，而且非常简单。

很像归纳证明，我们建立了一个递归案例和一个（部分特化的）基本案例来结束递归。

```
template<size_t dimcount, typename T>
struct multidimensional_vector
{
    typedef std::vector< typename multidimensional_vector<dimcount-1, T>::type > type;
};

template<typename T>
struct multidimensional_vector<0,T>
{
    typedef T type;
};

multidimensional_vector<1, int>::type v;
multidimensional_vector<2, int>::type v2;
multidimensional_vector<3, int>::type v3;
multidimensional_vector<4, int>::type v4; 
```

# javascript - 正则表达式获取单词

> ID：13105517
> 
> 赞同：-6
> 
> 时间：2012-10-28T01:00:23.753
> 
> 标签：javascript, regex, tags

大家好，我需要解析我的 textarea 以获取所有以a作为前缀的单词**（后跟空格） 。**`$`

例如，我有以下文本：

```
my name is $Ahmad and I wish $peace to all the $world 
```

现在我需要提取`$Ahmad`and `$peace`，但不是`$world`（因为它后面没有空格）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:03:37.733

```
var matches = str.match(/\B\$[^ ]+(?= )/g); 
```

这是小提琴：http: [//jsfiddle.net/fpjZX/](http://jsfiddle.net/fpjZX/)

PS假设你的意思是JavaScript ...

# c# - 如何在 LINQ 查询中调用本地函数？

> ID：13105518
> 
> 赞同：7
> 
> 时间：2012-10-28T01:01:00.437
> 
> 标签：c#, asp.net, linq, function

我试过了：

```
 var doctorPractise = from d in db.DoctorsPrivateClinics
                                     where  GetDistance(db, d)<1.0
                                     select d; 
```

但这不起作用，GetDistance 是一个本地函数，我没有得到例外，但它似乎不起作用，有什么想法吗？谢谢

GetDistance 是：

```
 private double GetDistance(DBClassesDataContext db, DoctorsPrivateClinic docPra)
    {
        double distance=-1;
        double longitude;
        double latitude;

        var city = from c in db.Cities
                   where c.Code == Convert.ToInt32(Request.QueryString["Area"])
                   select c;

        foreach (var cit in city)//it will be just one row that will be found but I don't know how to express it without foreach
        {
            Calculations.GetLongitudeLatitudeGoogle getLongLat = new Calculations.GetLongitudeLatitudeGoogle();
            getLongLat.GetLongitudeLatitude("", cit.Name, "", out longitude, out latitude);
            distance = CalcualateDistance(Convert.ToDouble(docPra.PrivateClinic.Latitude), Convert.ToDouble(docPra.PrivateClinic.Longtitude), latitude, longitude);
        }
        return distance;
    } 
```

我想要实现的是计算地图上特定点（cit.Name）与私人诊所位置之间的距离。地图上特定点的经度和纬度是从 Googlemaps 中检索的。在我的查询中，我指定此距离必须小于 1 公里

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-28T01:11:29.220

问题是您的查询正在被 LINQ 提供程序 (EF/Linq2Sql?) 转换为 SQL。它不能翻译任意 .net 方法。解决这个问题的唯一方法是在本地枚举整个集合，省去索引等数据库的优点，并且可能会成为来自数据库的网络 IO 瓶颈。

如果这不是问题：

```
var doctorPractise = from d in db.DoctorsPrivateClinics.AsEnumerable()
                                 where  GetDistance(db, d)<1.0
                                 select d; 
```

否则，请考虑用可以翻译成 SQL 的术语重新表述您的查询。看到您的`GetDistance`方法将有助于我们在这里为您提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:59:58.023

正如上面建议的那样，添加 db.DoctorsPrivateClinics.AsEnumerable() 解决了我的问题。经过一点改进后，我的功能是解决方案：

```
 double longitude=0;
                double latitude=0;

                var city = from c in db.Cities
                           where c.Code == Convert.ToInt32(Request.QueryString["Area"])
                           select c;
                city = city.Take(1);//take the first value, that sould be the only value in this case
                if (city.Count() == 0)
                {
                    //hanlde error
                }
                else
                {
                    City cit  = city.First();
                    Calculations.GetLongitudeLatitudeGoogle getLongLat = new Calculations.GetLongitudeLatitudeGoogle();
                    getLongLat.GetLongitudeLatitude("", cit.Name, "", out longitude, out latitude);
                }

                var doctorPractise = from d in db.DoctorsPrivateClinics.AsEnumerable()//or .ToList()
                                     where CalcualateDistance(Convert.ToDouble(d.PrivateClinic.Latitude), Convert.ToDouble(d.PrivateClinic.Longtitude), latitude, longitude)<5.0f

                                     select d; 
```

其中函数 CalcualateDistance 是：

```
 {
        /*
            The Haversine formula according to Dr. Math.
            http://mathforum.org/library/drmath/view/51879.html

            dlon = lon2 - lon1
            dlat = lat2 - lat1
            a = (sin(dlat/2))^2 + cos(lat1) * cos(lat2) * (sin(dlon/2))^2
            c = 2 * atan2(sqrt(a), sqrt(1-a)) 
            d = R * c

            Where
                * dlon is the change in longitude
                * dlat is the change in latitude
                * c is the great circle distance in Radians.
                * R is the radius of a spherical Earth.
                * The locations of the two points in 
                    spherical coordinates (longitude and 
                    latitude) are lon1,lat1 and lon2, lat2.
        */
        double dDistance = Double.MinValue;
        double dLat1InRad = Lat1 * (Math.PI / 180.0);
        double dLong1InRad = Long1 * (Math.PI / 180.0);
        double dLat2InRad = Lat2 * (Math.PI / 180.0);
        double dLong2InRad = Long2 * (Math.PI / 180.0);

        double dLongitude = dLong2InRad - dLong1InRad;
        double dLatitude = dLat2InRad - dLat1InRad;

        // Intermediate result a.
        double a = Math.Pow(Math.Sin(dLatitude / 2.0), 2.0) +
                   Math.Cos(dLat1InRad) * Math.Cos(dLat2InRad) *
                   Math.Pow(Math.Sin(dLongitude / 2.0), 2.0);

        // Intermediate result c (great circle distance in Radians).
        double c = 2.0 * Math.Asin(Math.Sqrt(a));

        // Distance.
        // const Double kEarthRadiusMiles = 3956.0;
        const Double kEarthRadiusKms = 6376.5;
        dDistance = kEarthRadiusKms * c;

        return dDistance;
    } 
```

尽管这对我有用，但它不是使用 LINQ 的有效方法。所以我搜索了一个更好的解决方案，即在 T-SQL 中重新编写我的函数，因此改进的解决方案是：

```
 double longitude=0;
                double latitude=0;

                var city = from c in db.Cities
                           where c.Code == Convert.ToInt32(Request.QueryString["Area"])
                           select c;
                city = city.Take(1);//take the first value, that should be the only value in this case
                if (city.Count() == 0)
                {
                    //hanlde error
                }
                else
                {
                    City cit  = city.First();
                    Calculations.GetLongitudeLatitudeGoogle getLongLat = new Calculations.GetLongitudeLatitudeGoogle();
                    getLongLat.GetLongitudeLatitude("", cit.Name, "", out longitude, out latitude);
                }

                var doctorPractise = from d in db.DoctorsPrivateClinics
                                     where db.CalculateDistance(Convert.ToDouble(d.PrivateClinic.Latitude), Convert.ToDouble(d.PrivateClinic.Longtitude), latitude, longitude) < 5.0f                            
                                     select d; 
```

用 T-SQL 写的函数在哪里：

```
ALTER FUNCTION PublicSiteDBUser.CalculateDistance
(

@latitudeArea float(53),
@longitudeArea float(53),
@latitudePractise float(53),
@longitudePractise float(53)
)

RETURNS float(53)
AS
BEGIN

DECLARE @dDistance as float(53)=0
DECLARE @dLat1InRad as float(53)=0
DECLARE @dLong1InRad as float(53)=0
DECLARE @dLat2InRad as float(53)=0
DECLARE @dLong2InRad as float(53)=0

DECLARE @dLongitude as float(53)=0
DECLARE @dLatitude as float(53)=0

DECLARE @a as float(53)=0
DECLARE @c as float(53)=0

DECLARE @kEarthRadiusKms as float(53)=6376.5  

SET @dLat1InRad = @latitudeArea * PI() / 180.0
SET @dLong1InRad= @longitudeArea * PI()/180.0
SET @dLat2InRad= @latitudePractise * PI()/180.0
SET @dLong2InRad= @longitudePractise * PI()/180.0

SET @dLongitude = @dLong2InRad - @dLong1InRad
SET @dLatitude = @dLat2InRad - @dLat1InRad

SET @a = POWER(SIN(@dLatitude/2.0), 2.0)+COS(@dLat1InRad)*COS(@dLat2InRad) * POWER (SIN(@dLongitude/2.0),2.0)
SET @c = 2.0*ASIN(SQRT(@a))      
SET @dDistance = @kEarthRadiusKms * @c 

RETURN @dDistance
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T01:13:21.867

如果你使用 ef，有办法编写 sql 并将 linq 映射到它，但在最简单的情况下，你可以检索所有数据，然后执行你的自定义函数：

```
var doctorPractise = from d in db.DoctorsPrivateClinics.ToList()
                                     where  GetDistance(db, d)<1.0
                                     select d; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-25T10:47:04.210

使用 Sql 函数

```
var query = from it in db.items
                    let facilityLatitude = it.Latitude ?? 0
                    let facilityLongitude = it.Longitude ?? 0
                    let theta = ((lon - facilityLongitude) * Math.PI / 180.0)
                    let requestLat = (lat * Math.PI / 180.0)
                    let facilityLat = (facilityLatitude * Math.PI / 180.0)
                    let dist = (SqlFunctions.Sin(requestLat) * SqlFunctions.Sin(facilityLat)) + (SqlFunctions.Cos(requestLat) * SqlFunctions.Cos(facilityLat) * SqlFunctions.Cos(theta))
                    let cosDist = SqlFunctions.Acos(dist)
                    let degDist = (cosDist / Math.PI * 180.0)
                    let absoluteDist = degDist * 60 * 1.1515
                    let distInKM = absoluteDist * 1.609344
                    where distInKM < distance
                    select new ()
                    {
                        Address = it.Address,
                    }; 
```

# java - Java 中的 Lisp 表达式求值器（仅使用一个堆栈）

> ID：13105519
> 
> 赞同：1
> 
> 时间：2012-10-28T01:01:09.687
> 
> 标签：java, lisp, stack

我正在尝试使用 Java 实现一个简单的 Lisp 表达式求值器。实际上有大量关于该主题的信息，但似乎他们都使用两个单独的堆栈来得出结果。我想知道是否可以仅使用一个堆栈来实现这样的程序，以及一些伪代码可能看起来像什么。

谢谢。

有关我正在谈论的内容的更多信息，请参阅

*   [http://www.chegg.com/homework-help/questions-and-answers/outline-given-import-javautil-public-class-simplelispexpressionevaluator-current-input-lis-q2332957](http://www.chegg.com/homework-help/questions-and-answers/outline-given-import-javautil-public-class-simplelispexpressionevaluator-current-input-lis-q2332957)
*   [http://stdioe.blogspot.ca/2012/01/lets-implement-simple-lisp-interpreter.html](http://stdioe.blogspot.ca/2012/01/lets-implement-simple-lisp-interpreter.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:11:36.433

您链接到的两个解释器都做了一个非常重要的假设：+、-、* 等都是二元函数，也就是说，它们总是采用两个参数。在真正的 Lisp 中，你可以说`(+ 1 2 3 4 5)`对一堆数字求和。但是，如果您愿意接受每个运算符的数量已知的简化假设，那么您绝对可以只用一个堆栈来做到这一点。关键：将堆栈倒置。

您链接到的解释器具有如下堆栈：

底部 -> `( + ( - 2 1 ) 4 )`<- 顶部（我们从这里推送和弹出）

但是，您也可以从右侧向后读取表达式，并像这样构建堆栈：

顶部 -> `( + ( - 2 1 ) 4 )`<- 底部

然后你基本上得到RPN，反向波兰符号。RPN 在筹码方面表现得非常好。

算法是这样的：

*   如果您看到括号，请忽略它
*   如果你看到一个操作数，把它压入堆栈
*   如果您看到一个运算符，请调用它。运算符根据需要弹出任意数量的值，然后将其结果压入堆栈

举个例子，`( + ( - 2 1 ) 4 )`。以下是该算法的运行方式：

**堆栈：** *空* **阅读：** `)` **行动：**括号被忽略。**剩下：** `( + ( - 2 1 ) 4`

**堆栈：** *空* **阅读：** `4` **操作：**操作数被压入堆栈。**剩下：** `( + ( - 2 1 )`

**堆栈：** 4**阅读：** `)` **行动：**括号被忽略。**剩下：** `( + ( - 2 1`

**堆栈：** 4**阅读：** `1` **动作：**操作数被压入堆栈。**剩下：** `( + ( - 2`

**堆栈：** 1 4**读取：** `2` **操作：**操作数被压入堆栈。**剩下：** `( + ( -`

**堆栈：** 2 1 4**读取：** `-`**操作：**调用运算符。它将从堆栈中弹出 2 和 1，然后压入`2-1=1`它。 **剩下：** `( + (`

**堆栈：** 1 4**读数：** `(` **操作：**忽略括号。**剩下：** `( +`

**堆栈：** 1 4**读取：** `+` **操作：**调用运算符。它将从堆栈中弹出 1 和 4，然后压入`1+4=5`它。 **剩下：** `(`

**堆栈：** 5**阅读：** `(` **行动：**括号被忽略。**左：** *无*

完毕！结果是 5，正如预期的那样。

PS关于忽略括号。只要您输入的表达式格式正确，这将完美地工作，但它可以采用格式不正确的表达式并赋予它们无意义的值。eg`(+ - + 1 2 3 4)`被解释为`(+ (- (+ 1 2) 3) 4)`. 如果您想防止这种行为，只需将右括号压入堆栈即可。当需要调用运算符时，弹出参数，加上一个额外的标记。*确保该令牌是近括号，否则抛出错误*。得到结果后，将其压入堆栈。*确保您读入的下一个令牌是一个开放括号，然后将其丢弃*。

如果像在真正的 Lisps 中一样，函数的参数本身可以是函数，那么 PPS 这一切都会变得更加复杂。那么您就没有 RPN 所依赖的运算符/操作数之间的方便区分，您需要更加注意括号作为分组元素。我不确定你是否可以做一个成熟的 Lisp 表达式求值器，具有可变参数和函数作为操作数，只有一个堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:08:37.603

希望它可以帮助你 [没有堆栈的 lisp 风格计算器](http://blog.csdn.net/ls5231/article/details/8499277)

# c++ - C++：具有用户定义类型的构造函数

> ID：13105523
> 
> 赞同：1
> 
> 时间：2012-10-28T01:01:35.240
> 
> 标签：c++, oop, class, methods, constructor

我正在尝试理解 C++ 中的类并开发一些我在 Python 中看到的类似类。这是代码：

```
#include <iostream>
#include <cmath>
using namespace std;

/*============================================================================*/
/* Define types
/*============================================================================*/
class none_type;
class bool_type;
class int_type;
struct identifier;

/*============================================================================*/
/* Define none type
/*============================================================================*/
class none_type {
  public:
    none_type()                  { /* constructor */ };
    ~none_type()                 { /* destructor */ };
}; /* none_type */

/*============================================================================*/
/* Define bool type
/*============================================================================*/
class bool_type {
  private:
    bool base;
  public:
    bool_type()                  { base = false; };
    ~bool_type()                 { /* destructor */ };
    bool_type(bool init)         { base = bool(init); };
    bool_type(int init)          { base = bool(init); };
    bool_type(long init)         { base = bool(init); };
    bool_type(float init)        { base = bool(init); };
    bool_type(double init)       { base = bool(init); };
    bool_type(bool_type init)    { base = bool(init.base); };
    bool_type(int_type init)     { base = bool(init.base); };
    int get()                    { cout << base << endl; };
}; /* bool_type */

/*============================================================================*/
/* Define int type
/*============================================================================*/
class int_type {
  private:
    long base;
  public:
    int_type()                   { base = 0; };
    ~int_type()                  { /* destructor */ };
    int_type(bool init)          { base = long(init); };
    int_type(int init)           { base = long(init); };
    int_type(long init)          { base = long(init); };
    int_type(float init)         { base = long(init); };
    int_type(double init)        { base = long(init); };
    int_type(bool_type init)     { base = long(init.base); };
    int_type(int_type init)      { base = long(init.base); };
    int get()                    { cout << base << endl; };
}; /* int_type */ 
```

当我尝试编译它时，`g++`告诉我所有使用我自己类型的构造函数都是无效的。你能解释一下出了什么问题吗？我已经定义了类原型，我还应该做什么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T01:08:05.127

这个构造函数：

```
bool_type(int_type init)     { base = bool(init.base); }; 
```

无效，因为此时 int_type 不完整。

您必须将此构造函数实现移出类定义，直到 int_type 完成：

```
class bool_type {
  bool_type(int_type init);
};
class int_type {};
inline bool_type::bool_type(int_type init)     { base = bool(init.base); }; 
```

* * *

另一个问题是你的构造函数伪装成复制构造函数：

```
bool_type(bool_type init)    { base = bool(init.base); }; 
```

在这里你有无限递归 - 因为`init`参数是一个副本 - 所以必须调用这个构造函数来制作这个副本，但是这个构造函数的下一次调用有它自己的`init`参数，必须复制等等到无穷大或堆栈限制.. .

拷贝构造函数的正确定义如下：

```
bool_type(const bool_type& init)    { base = bool(init.base); }; 
```

必须使用 const 引用，但是在这种情况下你可以依赖编译器——它会为你生成复制构造函数——所以完全删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T11:39:04.770

G++ 已经告诉你，出了什么问题：

> 错误：无效的构造函数；你可能的意思是'bool_type（const bool_type＆）'

而不是`bool_type (bool_type)`你必须使用`bool_type (const bool_type&)`. 这样做的原因是，如果您按值传递对象，编译器会使用复制构造函数将其放入堆栈。因此，为了将 传递`bool_type`给复制构造函数`bool_type(bool_type)`，它必须使用复制构造函数本身。这是不可能的。

也一样`int_type(int_type)`。

> 在构造函数“bool_type::bool_type(int_type)”中：错误：“init”的类型不完整

在这一点上，G++ 不知道它的`int_type`样子。因为它不知道`int_type`有一个`base`成员，所以它不能使用它。只需声明构造函数：

```
bool_type(int_type init); 
```

并在声明之后定义它`int_tpye`：

```
....
class int_type {
....
};

...
inline bool_type(int_type init) { base = bool(init.base); } 
```

当您有较大的对象时，建议使用通过引用传递它们，因为通过值传递意味着复制堆栈上的对象。这比仅仅传递对这个大对象的引用要昂贵得多（对于大对象）。对于小物体，这无关紧要。

最后一个错误：

> 在构造函数“int_type::int_type(bool_type)”中：错误：“bool bool_type::base”是私有的

您已将成员声明`base`为。这意味着，只允许访问该成员。为了得到你必须使用访问方法：`bool_type``private:``bool_type``base``get()`

```
int_type(bool_type init)     { base = long(init.get()); } 
```

类似地，您必须定义：

```
inline bool_type(int_type init) { base = bool(init.get()); } 
```

最后，查看[c++-faq](/questions/tagged/c%2b%2b-faq "显示标记为“c++-faq”的问题")或[c++](https://stackoverflow.com/tags/c%2b%2b/info)并按照书单进行操作。[C++ FAQ](http://www.parashift.com/c++-faq-lite/)也相当不错。

**编辑：**我错过了，你的`get()`方法根本不是访问者。它们应定义为：

```
class bool_type {
public:
    bool get() const { return base; }
...
}; 
```

相同的`int_type::get()`

```
int get() const { return base; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T01:08:56.783

除了“学习 C++”之外，很难给出具体的建议，但以下是如何在“普通”C++ 中设计你的类：

```
class int_type;

class none_type { };

class bool_type
{
    bool base;
public:
    bool_type() : base() { }
    explicit bool_type(bool init) : base(init) { }
    explicit bool_type(int_type const &);

    void print() const { std::cout << base << std::endl; }
    bool get() const { return base; }
};

class int_type
{
    int base;
public:
    int_type() : base() { }
    explicit int_type(int init) : base(init) { }
    explicit int_type(bool_type const & init) : base(init.get() ? 1 : 0) { }

    void print() const { std::cout << base << std::endl; }
    int get() const { return base; }
};

inline bool_type::bool_type(int_type const & init) : base(init.get()) { } 
```

# ios - iOS - 应用程序可以在设备上运行，但不能在模拟器上运行（不再）

> ID：13105524
> 
> 赞同：1
> 
> 时间：2012-10-28T01:01:35.703
> 
> 标签：ios, xcode

我已经知道有这样的话题，但对我来说没有任何帮助......

这里的信息：

该应用程序一直在模拟器和设备上运行。我最近将项目重命名为另一个名称。仍然工作得很好。今天我意识到它没有更改文件夹名称，然后它无法再运行，因为它在某个位置保存了以前的位置。然后我再次为该文件夹指定了旧名称，它可以再次在设备上构建和运行它。但奇怪的是，它不再在模拟器上运行。

有趣的是，它说配置文件即将到期，甚至与该项目无关，所以我删除了它们。没有错误，什么都没有。它只是在模拟器上构建并直接完成。

该应用程序是为 iOS6 构建的，不支持早期版本。所以不可能是armv6 armv7架构问题...

我还尝试了以下内容：我压缩每个更大的版本更改并将其保存在外部 HD 上（以防万一），并将其上传到 bitbucket。我将我的项目重置为那些旧的工作版本，它既没有在模拟器上运行。

提前感谢您提供更多提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T11:25:01.030

我想问题应该出在您的模拟器中，但不一定在您的应用程序中。请尝试：

1.  重置模拟器并重试
2.  如果还是不行，请移除模拟器上的应用，然后通过 Xcode 调试重新安装

# c - C中的bmp分段错误

> ID：13105529
> 
> 赞同：0
> 
> 时间：2012-10-28T01:03:23.290
> 
> 标签：c, segmentation-fault, bmp, mandelbrot

我在方形框架中制作分形（Mandelbrot 和 BuddaBrot）的 bmp 图像，如果我将宽度设为 1000 像素，没问题，但如果我将其宽度增加到 2000，我会在程序的第一行出现分段错误。发生了什么。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <math.h>
#include <time.h> 
```

...

```
#define HEIGHT 2000
#define WIDTH  2000

typedef struct _pixel{
unsigned char blue;
    unsigned char green;
unsigned char red;
}pixel;

typedef pixel screen[WIDTH][HEIGHT];

typedef struct _frame{
    pair width;
    pair height;
}frame;

void printPixel(screen view);

void editPixel(screen view, int row, int col, pixel p);
void blankScreen(screen view);

int main(int argc, const char * argv[])
{ 

    FILE *out; 
    out = fopen("Out.bmp", "w");

    int localHeight = HEIGHT - HEIGHT%4;
    int localWidth = WIDTH - WIDTH%4;
    frame myFrame = getFrame(localWidth,localHeight);

    assert((myFrame.height.small+myFrame.height.big*256)==HEIGHT - HEIGHT%4);
    assert((myFrame.width.small+myFrame.width.big*256)== WIDTH - WIDTH%4);

    unsigned char bmp[] = {
        0x42,0x4D,0x5A,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x3C,0x00,0x00,0x00,0x28,0x00,
        0x00,0x00,myFrame.width.small,myFrame.width.big,0x00,0x00,
        myFrame.height.small,myFrame.height.big,  
        0x00,0x00,0x01,0x00,0x18,0x00,0x00,0x00,
        0x00,0x00,0x24,0x00,0x00,0x00,0x13,0x0B,
        0x00,0x00,0x13,0x0B,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x99,
        0x00,0x00,0x00,0x00,};
        //Write the header
    fwrite(bmp, 1, sizeof(bmp), out);

    screen view;
    blankScreen(view); //clears the image to a blank

    printPixel(view); // this gets the image

    fwrite(view, 1, sizeof(screen), out); //writes the image
    fclose(out); //closes the file

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:08:28.693

您遇到了堆栈溢出，因为您未能`pixel`在堆栈（行`screen view;`）上分配 2000 * 2000 s，因为堆栈太小了。动态分配内存（使用`malloc`）。

```
pixel * view;
view = malloc(sizeof(pixel) * HEIGHT * WIDTH);
if (view == NULL) return 1; //failed to allocate

// change those two functions to handle a "pixel *" instead of pixel[HEIGHT][WIDTH]
blankScreen(view);
printPixel(view); 
```

# java - 如何处理打开程序的文件

> ID：13105533
> 
> 赞同：0
> 
> 时间：2012-10-28T01:04:07.003
> 
> 标签：java, file

当我的 Java 文件处理程序由*Open With...*命令打开或设置为文件的默认程序时，我如何处理打开它的文件。

它是作为命令行参数传递的吗？以什么格式？

那么程序呢，包装在 .exe 包装器中，或者用 AOT 编译器编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:09:04.737

创建 Java 文件处理程序的可执行文件。如果您想知道如何创建可执行文件，请阅读此[**创建可执行文件？**](http://dasha.ics.hawaii.edu/~johnson/613f99/modules/04/jar-files.html)

在命令行中，您可能会说：`executable FileName.ext`

`FileName.ext`将在您的`main`程序的`args[0]`属性中可用。IE

```
 public static void main(String[] args){
           String fileName = args[0];
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T01:42:05.213

启动应用程序。使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)并声明对启动文件 (JNLP) 中的文件类型感兴趣。

的路径`File`将作为 a`String`作为第二个参数传递给`main`. 第一个参数将是`-edit/open`（我忘记了）或`-print`。

> 那么程序呢，包装在 .exe 包装器中，或者用 AOT 编译器编译？

在一个单独的问题上问这个怎么样？如果使用 JWS 部署，我们将使用 Jar(s)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T01:10:14.767

您应该在 main() 中接收文件路径作为参数。

请参阅[使用命令行参数将文件传递给程序](https://stackoverflow.com/questions/1055318/using-command-line-argument-for-passing-files-to-a-program)（可能重复？）

# ios - 使用 Autolayout 时自动调整 UILabel 的大小

> ID：13105544
> 
> 赞同：7
> 
> 时间：2012-10-28T01:07:00.187
> 
> 标签：ios, uikit

我正在使用自动布局（NSLayoutConsraint）创建一个 xib。有没有办法使用 sizeToFit 或类似的东西来使 UILabel 适合它的内容？

我尝试设置“大于或等于 x”的约束，并尝试将高度设置为低于此。但是，它会不断覆盖 height 属性。当你有 NSLayoutConstraints 时，sitToFit 似乎不起作用。

我怎样才能让标签的大小合适？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T02:52:21.047

为您的宽度和高度约束创建一个 IBOutlet，并使用它`sizeToFit`来更改它们的`constant`属性，然后调用`needsUpdateConstraints`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:52:48.330

对 UILabel 的高度使用“大于约束”并`sizeToFit`在内部调用`viewDidLayoutSubviews`对我来说是诀窍

我不需要打电话`needsUpdateConstraints`。

您还需要将行数设置为 0 以允许无限数量的行或 > 1 如果您想要限制。

还`preferredMaxLayoutWidth`需要设置属性，界面生成器会自动将其设置为视图宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:25:47.883

您应该尝试降低您的高度限制优先级。

# java - java telnet 套接字客户端

> ID：13105547
> 
> 赞同：0
> 
> 时间：2012-10-28T01:08:20.280
> 
> 标签：java

大家好，我用java编写了一个简单的telnet套接字客户端，我正在尝试在windows 7 Pro中连接到localhost上的telnet服务。代码执行良好，但无法打印输出流和输入流，而是代码抛出以下异常：尝试连接到端口 1024 上的主机 localhost 无法获取连接到的 I/O：localhost

有什么我想念的吗？？？代码如下提前谢谢。

```
import java.io.*;
import java.net.*;
import java.util.*;
public class telnetClients {
public static void main(String[] args) throws IOException {

    String telnetServer = new String ("localhost");
    int port = 1024;
    if (args.length > 0)
       telnetServer = args[0];
    System.out.println ("Attemping to connect to host " +
            telnetServer + " on port "
                + port);

    Socket ClientSocket = null;
    PrintWriter out = null;
    BufferedReader in = null;

    try {
        ClientSocket = new Socket(telnetServer, port);
            ClientSocket.setSoTimeout(20000);
          //    PrintStream com = new PrintStream(ClientSocket.getOutputStream());
          //    System.out.println(com);
           //    BufferedReader inCom = new BufferedReader(new InputStreamReader                (ClientSocket.getInputStream()));

        out = new PrintWriter(ClientSocket.getOutputStream(), true);
        System.out.println(out);
        in = new BufferedReader(new InputStreamReader(
                                    ClientSocket.getInputStream()));
        String command = in.readLine();
        if(in != null);
        System.out.println(in);

    } catch (UnknownHostException e) {
        System.err.println("Don't know about host: " + telnetServer);
        System.exit(1);
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for "
                           + "the connection to: " + telnetServer);
        System.exit(1);
    }

BufferedReader stdIn = new BufferedReader(
         new InputStreamReader(System.in));
              String userInput;

    System.out.println ("Type Message (\"bye\" to quit)");
while ((userInput = stdIn.readLine()) != null) 
       {
    out.println(userInput);

        // end loop
        if (userInput.equals("bye"))
            break;

    System.out.println("echo: " + in.readLine());
   }

out.close();
in.close();
stdIn.close();
ClientSocket.close();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-22T08:44:13.403

对我有用的样品

```
public static void main(String[] args) {
    String url = "hostname";
    int port = 8080;
    try (Socket pingSocket = new Socket(url, port)) {
      try (PrintWriter out = new PrintWriter(pingSocket.getOutputStream(), true); BufferedReader in = new BufferedReader(new InputStreamReader(pingSocket.getInputStream()));) {
        out.println("ping");
        System.out.println("Telnet Success: " + in.readLine());
      }
    } catch (IOException e) {
      System.out.println("Telnet Fail: " + e.getMessage());
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-28T01:16:56.477

我认为您的问题可能是没有启用 Telnet 服务。在 Windows 7 中，您可以在 Windows 功能下的程序和功能（控制面板）中进行检查。

之后，您必须配置端口，因为 TCP 连接的默认端口是 23。您可以使用`tlntadmn [\\server] config port=PortNumber`

# c# - 在“代码块”IDE 中混合编程语言？

> ID：13105555
> 
> 赞同：1
> 
> 时间：2012-10-28T01:09:37.937
> 
> 标签：c#, c++, windows, codeblocks

有没有办法可以混合，例如，[代码块 IDE](http://www.codeblocks.org/)中的 C# 代码和 C++ 代码？

如果我不够清楚，这基本上是关于将代码文件从另一种语言添加到 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:12:18.020

不在 Code::Blocks 中，不。如果您正在寻找免费的 ide，您应该尝试 monodevelop 或 sharpdevelop。

# css - 如何在仅使用 CSS 并支持视网膜显示的响应式网格中居中图像？

> ID：13105556
> 
> 赞同：1
> 
> 时间：2012-10-28T01:09:50.590
> 
> 标签：css, image, joomla, responsive-design, retina-display

我有一个页面，我需要在响应式网站中显示照片库，也支持视网膜显示。网格必须由以这种方式按比例填充给定容器的块组成：

*   `If the screen width is >= 1200px`网格必须由 4 列组成（每个块的宽度为 25%）
*   `If the screen width is < 1200px and >= 768px`网格必须由 3 列组成（每个块的宽度为 33%）
*   `If the screen width is <= 767px`网格必须由 2 列组成（每个块的宽度为 50%）

所有的网格块必须是 2:3 的比例大小，并且测量一个 1980 像素宽视口的网格块我可以告诉你大约 500 像素（这不是限制，它只是一个有用的测量数据，我认为我需要解释以下）。
当然，这可以通过`@media`查询轻松实现，并使用`padding-top: 66.66666666666667%`2:3 的比例；我试图为您提供尽可能多的数据来解释我必须遵守的限制。

因此，棘手的部分来了：
网格的缩略图具有各种大小和纵横比，我需要将它们垂直和水平居中在各自的网格块中，同时适合/覆盖整个网格块区域。
由于网格是响应式的，因此我需要拇指与它们的块成比例地缩放以用于狭窄的视口。
更复杂的是，我需要支持 Retina 显示器，因此拇指必须是两倍大小并缩小一半，并且也适合它们的网格块。

如何做到这一点？（最好只通过 CSS）

* * *

*附加数据：*
我正在使用 joomla！2.5 作为这个项目的 CMS，我需要给我的客户一个非常简单的方法来添加图像。我找到的最好和最简单的解决方案是 Simple Image Gallery：我对这个插件的唯一需要是`<ul>`页面中的自动拇指生成过程 + 自动生成的网格，并且非常简单地覆盖 HTML+css 输出结构以满足我的需要。

至于视网膜显示器，最好提供正确的@2x 语法，但我并不在意；至于性能问题，我认为为所有显示提供单个缩小图像当然更容易处理，但也是处理 img 权重的一种非常有效和高效的方法！
[请参阅this for reference](http://blog.netvlies.nl/design-interactie/retina-revolution)，基本上你使用尺寸加倍的图像和 20 左右的 jpg 压缩，使用 CSS 将图像缩小一半，你仍然有一个漂亮的图像，适用于正常和视网膜显示。与原始尺寸图像相比，重量也减少了 25%！
我自己对此进行了测试，我可以说它工作得很好，在极少数情况下，我的重量比正常尺寸的图像重，而且重量可以忽略不计（与易用性和好处相比）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:43:39.143

使用多种技术组合来执行此操作：

*   [适合和收缩技术](http://www.cssplay.co.uk/menu/fast-gallery.html)
*   [将图像居中放置在框中](http://www.brunildo.org/test/img_center.html)
*   [内联块拇指](http://www.brunildo.org/test/ImgThumbIBL2b.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:18:58.030

很长的问题，但如果它只是关于不同尺寸图像的居中，你可以这样做：

您需要浮动的 Div，它们将具有相同的高度和宽度（但是您可以针对不同的查询进行调整）。

之后，您在每个 div 中都有另一个 div 用于垂直和水平中心：

```
 <div class="outer">
    <div class="table">
    <div class="image"></div>
     </div>
    </div> 
```

基本上，您浮动外部 div，将 display table-cell 应用于 .table div，然后应用垂直居中对齐，用于垂直居中。

重要的

带有 display:table 单元格的浮动 div 将忽略垂直对齐！因此额外的div！

[http://jsbin.com/ajunol/2/edit](http://jsbin.com/ajunol/2/edit)

```
.outer {
  height:100px;
    width:100px;
  border:solid;
  float:left;
  margin:10px;
}
.table {
  height:100px;
  width:100px;
  border:solid;
    display:table-cell;
  vertical-align:middle;
}
.image {
  height:50px;
  width:50px;
  background-color:red;
  margin:0 auto;
  max-width:100%;
} 
```

高度、宽度和背景颜色，obv 你可以忽略，但你应该有 100% 的最大宽度，这样图像就不会超过包含框。

在我的示例中，图像表示为 div，但显然您将有图像标签而不是 div。为此，请将 div 替换为带有图像的类图像。

# html - 如何在vim中分离合并的html标签？

> ID：13105557
> 
> 赞同：1
> 
> 时间：2012-10-28T01:10:04.627
> 
> 标签：html, vim, sparkup

我怎么得到这个：

```
<body>
    <div>[cursor here]</div>
</body> 
```

对此：

```
<body>
    <div>
        [cursor here]
    </div>
</body> 
```

在一个命令中？我安装了 sparkup 插件，但没有遇到任何执行此操作的操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:21:37.670

关于什么：

```
inoremap <c-k> <cr><esc>O 
```

并且ofc更改`<c-k>`为您喜欢的任何内容..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:46:54.383

```
 :%s/\(>\_\s\+<div>\)\([^<]*\)\(.*\)/\1\r\t\t\2\r\t\3/g

    : .................. command line
    % .................. whole file
    / .................. start search pattern
    \( ................. start group -- see \) closing at the end
    > .................. one close tag
    \_ ................. multiline search
    \s ................. one space
    \+ ................. or more
    <div> .............. one div
    \) ................. closing group one
    \( ................. open the second group
    [^<]* .............. denied list in wich no has open tag <  (everything less <)
    \) ................. closing the second group
    \( ................. opening the third group (everything else) in the next line
    .* ................. the rest of line, including the close </div>
    / .................. start of substitution pattern
    \1 ................. back reference to the group one (place them here)
    \r ................. carriage return (or simply <enter>)
    \t\t ............... 2 tabs
    \2 ................. place second group here
    \r ................. another <enter>
    \t ................. one more tab
    \3 ................. palce third group here
    / .................. end of substituition
    g .................. global command 
```

# python - 新手在 Python 中坚持简单的“while”重复

> ID：13105558
> 
> 赞同：3
> 
> 时间：2012-10-28T01:10:08.563
> 
> 标签：python, python-3.x, while-loop

该程序的重​​点是询问用户的姓名（首字母自动大写）。

然后它会询问年龄和性别。如果年龄超过 130 或为负数，则会抛出错误

该程序应该打印出所有信息，但我无法弄清楚while循环条件。谁能帮我弄清楚while循环条件？

-edit- 虽然Pastebin 的链接已被删除，但我认为那里有重要信息。所以，我还是会给你链接： http: [//pastebin.com/UBbXDGSt](http://pastebin.com/UBbXDGSt)

```
name = input("What's your name? ").capitalize()
age = int(input("How old are you "))
gender = input("From what gender are you? ").capitalize()

while #I guess I should write something behind the "while" function. But what?
    if age >= 130:
        print("It's impossible that you're that old. Please try again!")
    elif age <= 0:
        print('''It should be logical that ages are written in positive numbers! Well, try again! =)''')

age = int(input("How old are you? "))   

print("Your name is ",name, ". You are ", age, "years old." "\nYou are ", gender, ".") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:21:28.980

如果有有效输入，您可以设置一个关闭/打开的标志。这将解决你的`while`循环问题

```
 name = input("What's your name? ").capitalize()
 gender = input("From what gender are you? ").capitalize()
 ok = False #flag
 while not ok:
    age = int(input("How old are you "))
    if age >= 130:
       print("It's impossible that you're that old. Please try again!")
    elif age <= 0:
       print('''It should be logical that ages are written in positive numbers! Well, try again! =)''')
    else:
       ok = True
 print("Your name is ",name, ". You are ", age, "years old." "\nYou are ", gender, ".") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T04:14:58.963

通常在这里你使用`while True`.

```
while True:
    age = int(input("How old are you? "))

    if age >= 130:
        print("It's impossible that you're that old. Please try again!")
    elif age <= 0:
        print('''It should be logical that ages are written in positive numbers! Well, try again! =)''')
    else:
        break 
```

这将重复这个问题，直到它得到一个可以接受的答案，在这种情况下，它`break`会跳出循环。

为了完整起见，您还应该检查他们是否输入了任何内容，以及他们是否输入了一个数字。在这里，我还将使用`continue`，它将从头开始重新启动循环，忽略其余代码。这是一个很好的例子：

```
while True:
    age = input("How old are you? ")
    if not age:
        print("Please enter your age.")
        continue
    try:
        age = int(age)
    except ValueError:
        print("Please use numbers.")
        continue

    if age >= 130:
        print("It's impossible that you're that old. Please try again!")
    elif age <= 0:
        print('''It should be logical that ages are written in positive numbers! Well, try again! =)''')
    else:
        break 
```

# regex - 正则表达式匹配用户输入的字符串，因为它是键入

> ID：13105561
> 
> 赞同：0
> 
> 时间：2012-10-28T01:10:38.763
> 
> 标签：regex, autocomplete

有没有不同的方式来构建这样的正则表达式......

`/^52\s*quarts(\s*\,*\s*|\s+)motor oil(\s*\,*\s*|\s+)las vegas(\s*\,*\s*|\s+)nv/i`

...这样它为**“52 quarts motor oil las vega”**返回的匹配项将是**[“52 quarts motor oil las vega”]**？

我正在尝试将缓存添加到 jQuery 自动完成的使用中，并且我想动态地将用户输入与准备好的正则表达式列表进行匹配。由于我需要提前准备匹配表达式，它们不能因为它们比完整的用户输入字符串长而无法匹配！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:13:02.023

我已经简化了你的正则表达式：

```
/^52[\s,]*quarts[\s,]*motor oil[\s,]*las vegas[\s,]*nv/i 
```

如果你想允许任何顺序的单词，你可以使用前瞻：

```
/^(?=.*52)(?=.*quarts)(?=.*motor oil)(?=.*las vegas)(?=.*nv)/i 
```

这种前瞻性的想法非常接近基于文本的搜索引擎的工作方式

### 编辑：

部分匹配变得有点难看。以下是您如何匹配单词的任何*部分*- 换句话说，“开始于”匹配：

```
l(a(s( (v(e(g(a(s)?)?)?)?)?)?)?)? 
```

要至少要求“las ve”，请执行以下操作：

```
las ve(g(a(s)?)?)? 
```

这很恶心。但它就在那里。
您可以使用所有条款来做到这一点。

# jquery - 如何在特定点停止固定/浮动 div

> ID：13105562
> 
> 赞同：3
> 
> 时间：2012-10-28T01:10:47.497
> 
> 标签：jquery, position, fixed

我意识到这个网站上有很多与我相似的问题，但由于他们的原始代码与我的非常不同，尽管我尝试了上百万种不同的方法，但我仍然无法使用他们的解决方案。

我想让这个绿色盒子停在某个点。它的行为就像我希望它减去覆盖底部的 hbar 和单词 stop/post。我希望它在我选择的点上停得比这高得多。

请在此处查看我的演示：http: [//jsfiddle.net/Kachish/RqELN/1/](http://jsfiddle.net/Kachish/RqELN/1/)

下面是Javascript和CSS：

**Javascript：**

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>

    $(document).scroll(function() {
        var useFixedSidebar = $(document).scrollTop() > 150;
        $('.important').toggleClass('fixedSidebar', useFixedSidebar);
    });

</script> 
```

**CSS：**

```
.fixedSidebar {
    position: fixed;
    top: 10px;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:32:35.257

根据你的工作[小提琴。](http://jsfiddle.net/y6xPC/)

查询：

```
$(document).scroll(function() {
    var scrollVal = $(document).scrollTop();
    $('.important').css('top',scrollVal+'px');
    if (scrollVal < 150) { 
        $('.important').css('top','100px');
    }
    if (scrollVal > 1347) {
        $('.important').css('top','1111px');    
    }
});​ 
```

CSS：

```
.important { 
    position: absolute;
} 
```

​</p>

# string - .BAT - 启动带有参数的 .exe，其中 .exe 位置和参数是字符串

> ID：13105565
> 
> 赞同：1
> 
> 时间：2012-10-28T01:10:59.493
> 
> 标签：string, batch-file, location

尝试使用下面的代码在 .bat 文件中运行以下命令

```
c:\program files (x86)\Team Mediaportal\Mediaportal\TV Thumbnailer\ffmpeg.exe -ss 720 -itsoffset -5 -i "c:\tv recordings\sample recording.mpg" -vframes 1 -y "C:\tv recordings\sample recording.jpg" 
```

* * *

```
Set "FFMpeg_Location=c:\Program Files (x86)\Team Mediaportal\Mediaportal\TV Thumbnailer"

rem or Set "FFMpeg_Location=c:\Program Files (x86)\Team Mediaportal\Mediaportal\TV Thumbnailer\ffmpeg.exe" , whichever is easier :D

Set "Video_Path=c:\tv recordings\"

Set "Video_File=sample recording"

%FFMpeg_Location%\FFMpeg.exe -ss 720 -itsoffset -5 -i "%Video_Path%%Video_File%.mpg" -vframes 1 -y "%Video_Path%%Video_File%.jpg" 
```

* * *

PS。我希望 .bat 在 ffmpeg 完成运行后继续，因为我正在使用 ffmpeg 在 for 循环中处理大量文件。另外，我不希望通过执行 cd c:\pro...\tv thumbnailer\ 来更改 .bat 文件的工作目录，因为这会破坏我的脚本。

* * *

**编辑：我通过使用调用语句解决了我的问题：D**

```
call "%FFMpeg_Location%\FFMpeg.exe" -ss 720 -itsoffset -5 -i "%Video_Path%%Video_File%.mpg -vframes 1 -y "%Video_Path%%Video_File%.jpg" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:56:26.220

调用 "%FFMpeg_Location%\FFMpeg.exe" -ss 720 -itsoffset -5 -i "%Video_Path%%Video_File%.mpg -vframes 1 -y "%Video_Path%%Video_File%.jpg"

# c# - 使用列表中的子方法 对象

> ID：13105566
> 
> 赞同：0
> 
> 时间：2012-10-28T01:11:19.737
> 
> 标签：c#, c#-4.0

目前我有很多相似的方法：从一个`Parent`s 列表中，我将一个对象转换为它的正确类型，然后`Draw`ing 它。这很好用，但是非常笨拙，因为除了演员表之外，每种方法都完全相同。

它看起来像这样

```
public class Parent
{ 
    public virtual void Draw()
    {
        //deliberately nothing
    }
}

public class Child1 : Parent
{ 
    public override void Draw()
    {
        //draw this object, but slightly different method than Parent
    }
}

public class Child2 : Parent
{ 
    public override void Draw()
    {
        //draw this, but slightly different method than Child1 and Parent
    }
}

/////////////////////////

List<Parent> parent_list = new List<Parent>();
parent_list.Add(new Child1());
parent_list.Add(new Child2());

/////////////////////////

foreach (Parent parent in parent_list)
{
    parent.Draw(); //Would like to use child1 and child2's draw
}

/////////////////////////

///instead I'm doing a manual cast for each child class
foreach (Parent parent in parent_list)
{
    Child1 child = (Child1)parent;
    child.Draw();
}

foreach (Parent parent in parent_list)
{
    Child2 child = (Child2)parent;
    child.Draw();
} 
```

我遇到的问题是它试图`Parent.Draw()`在我想调用它时调用`Child.Draw()`我很肯定有更好的方法来设计代码，但我无法弄清楚。

**`Draw`当唯一的共同点是它们的父级时，我如何优雅地调用列表中的所有元素？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:14:07.393

我想您的子类是从 Parent 继承的（否则将无法将子对象添加到父集合并`Draw`覆盖方法）。另外我不明白你为什么要调用`this.Draw`内部`Draw`方法？它会导致递归调用。你应该在那里有方法实现

```
public class Parent 
{ 
    public virtual void Draw()
    {
       // parent implementation of Draw
    }
}

public class Child1 : Parent
{ 
    public override void Draw()
    {
        // child1 implementation of Draw
    }
}

public class Child2 : Parent
{ 
    public override void Draw()
    {
        // use base.Draw() to call parent implementation
        // child2 implementation of Draw
    }
} 
```

然后当你这样做

```
foreach (Parent parent in parent_list)
{
    parent.Draw(); 
} 
```

由于多态性，将在此处调用覆盖的（子）方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:17:15.460

Lazrberezosky 的回答对于一般情况是正确的，所以我将他标记为正确。

但是对于我个人的问题，我正在使用的许多 Parent 类之一被标记为，`virtual`而不是`override`因此它错误地从`Parent`类上方查看到它的父类，这很可能是`Object`给我一个错误。

```
 Object.Draw    
 Parent.Draw - Virtual    
  Child.Draw - Override //incorrectly was virtual in my code    
G_Child.Draw - Override 
```

当我`Parent.Draw`在列表中调用时，它`Parent.Draw`看到它`Child.Draw`是`virtual`这样的，我想，它又回到`Object.Draw`并抛出了一个编译器错误。

*为清楚起见，请随意编辑。*

# javascript - 如何使用 node.js 和 bash 脚本运行 javascript 文件？

> ID：13105569
> 
> 赞同：9
> 
> 时间：2012-10-28T01:11:51.007
> 
> 标签：javascript, node.js

我是 javascript 编程的新手。我的任务是编写一个将运行一些 input.json 的 .js 文件。我应该这样运行它：

```
./name.js input.json 
```

如何在此过程中合并 node.js 以及如何让终端接受该脚本？

谢谢！

编辑：我解决了我的问题！由于规则，我还不能回答我自己的问题，无论如何......

```
#!/usr/bin/env node
var fs = require('fs');

args = []
process.argv.forEach(function (val, index, array) 
{
    args.push(val); 
});

var file = fs.readFileSync(args[2], "UTF-8", function (err, data) 
{
if (err) throw err;
}); 
```

这基本上就是我所做的。我花了一些时间搜索和组合从不同帖子中找到的东西，然后让它发挥作用——也许这不是最好的方法，但它确实有效。这会将我的 .json 文件存储到文件变量中，然后我将其作为函数参数传入其他地方。感谢大家。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-28T03:13:03.967

```
 #!/usr/bin/env node
   var commandLineArguments = process.argv.slice(2);
   ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T02:59:09.680

也许太明显了，但最简单的方法是：

```
node ./name.js input.json 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-22T19:26:39.787

也许有点晚了。但是你的帖子启发了我。我不知道您可以将 js 用于应用程序。我总是用shell脚本来做。she-bang 指向 nodejs 的解决方案很棒。

> 感谢您的建议！我最终做了类似的事情。当我做 console.log(commandLineArguments); 它给了我 ['input.json']，这不是我想要的。

现在我可以回答你的评论了。它给你`[ 'input.json' ]`的权利？`[]`告诉你它是一个数组并且是`'input.json'`唯一的项目。所以你必须选择该数组的第一个元素。

```
console.log(commandLineArguments[0]); 
```

我希望我能帮助你，即使为时已晚。

谢谢 :D

# basic4android - 在默认图库中打开图像

> ID：13105570
> 
> 赞同：1
> 
> 时间：2012-10-28T01:12:18.450
> 
> 标签：basic4android

这是我用来打开带有默认图库的相机拍摄的图像的代码：

```
Dim i As Intent
i.Initialize(i.ACTION_VIEW, "mnt/sdcard/DCIM/Camera/IMG_20121027_205219.jpg")
Log("mnt/sdcard/DCIM/Camera/IMG_20121027_205219.jpg")
i.SetType("image/*")
StartActivity(i)
Log("error:"&I) 
```

当我单击按钮时，图库打开，然后强制关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:51:31.453

```
Dim i As Intent 
i.Initialize(i.ACTION_VIEW, "file:///sdcard/DCIM/Camera/IMG_20121027_205219.jpg")
Log("mnt/sdcard/DCIM/Camera/IMG_20121027_205219.jpg")
i.SetType("image/*")
StartActivity(i)
Log("error:"&I) 
```

# ruby - 检查资产主机上是否存在图像，如果不存在则替换为默认图像

> ID：13105573
> 
> 赞同：1
> 
> 时间：2012-10-28T01:12:44.627
> 
> 标签：ruby, ruby-on-rails-3.2, asset-pipeline

所以我遇到了ruby这个问题，下面的代码解释了发生了什么

```
def image_full(img,options)
    if Jjdowns::Application.assets.find_asset("#{img}").nil?
      image_full = image_tag("#{img}",options)
    else
      image_full = image_tag("app/no-image-large.png", options)
    end
  end 
```

我要做的是检查我的资产服务器上是否存在图像，如果存在则显示原始图像。如果在资产服务器上找不到图像，那么我想显示默认图像。

此代码块用于显示图像，但有关显示默认图像的部分不起作用。

到目前为止，我的研究没有发现任何解决这个问题的方法。

只是为了澄清资产服务器是内部“CDN”服务器，默认图像位于资产服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:19:48.610

问题的解决方案最终如下

```
def some_image(img,options)
    default_img = "dir_to_image/no-image-filler.png"
    if ("#{img}") != ''
      default_img = "#{img}"
    end
    some_image = image_tag(default_img, options)   
end 
```

这里的关键是我们有一个在单独的服务器上运行的外部资产主机，这是最初的问题。

# javascript - 使用下划线与主干扩展（）

> ID：13105574
> 
> 赞同：19
> 
> 时间：2012-10-28T01:13:00.913
> 
> 标签：javascript, jquery, model-view-controller, backbone.js, underscore.js

我知道骨干在某种程度上取决于下划线和 jquery。下面两行有区别吗？

```
app.notifications = _.extend({}, Backbone.Events); 
```

**和**

```
app.notifications  = Backbone.Events.extend({}); 
```

如果它们**不**一样，有什么不同？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-28T01:52:41.767

Backbone.Events.extend 不存在，所以我将参考 Backbone.Model。

`_.extend(target, mixin1, mixin2)`将属性复制到目标对象中

Backbone.Model.extend 将要`subclass`Backbone.Model 基本上创建一个构造函数（函数），其原型具有您提供的属性。这将允许您创建新类的实例

```
var Person = Backbone.Model.extend({name: 'yourName'});
var me = new Person();
alert(me.name); 
```

虽然`_.extend`会失败

```
var Person = _.extend({name: 'yourName'}, Backbone.Model);
var me = new Person();  //error b/c Person is a regular object
alert(me.name); 
```

简而言之 Backbone.Model.extend 创建了一个新的构造函数（函数），而 _.extend 修改了一个现有的对象；

```
var modified = {};
alert(modified === _.extend(modified, Backbone.Model)); //true
alert(modified === Backbone.Model.extend(modified)); //false 
```

# python - 为什么我在使用 Lambda 函数时会出错？

> ID：13105577
> 
> 赞同：2
> 
> 时间：2012-10-28T01:13:23.063
> 
> 标签：python, lambda

我在搞乱 lambda 函数，我明白我可以用简单的方式用它做什么，但是当我尝试更高级的东西时，我遇到了错误，我不明白为什么。

如果您能告诉我哪里出错了，这就是我正在尝试的方法。

```
import math

C = lambda n,k: math.factorial(n)/(math.factorial(k))(math.factorial(n-k))

print C(10,5) 
```

我应该注意到我在尝试在键盘上运行代码时遇到了错误。我无权访问 Idle。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T01:16:28.263

试试这个：

```
from math import factorial
from __future__ import division

C = lambda n, k : factorial(n) / factorial(k) * factorial(n-k)

print C(10,5)
> 3628800.0 
```

您缺少 a `*`，并且除法可能应该考虑小数，因此旧的除法运算符`/`不会这样做。这就是为什么我要导入`/`执行小数除法的新运算符。

**更新：**

好吧，毕竟这似乎是 Codepad 的错——它[支持](http://codepad.org/UcZOCsC4)Python 2.5.1，并且`factorial`是在 Python 2.6 中添加的。只需实现您自己的阶乘函数并完成它，或者更好地开始使用真正的 Python 解释器。

```
def factorial(n):
    fac = 1
    for i in xrange(1, n+1):
        fac *= i
    return fac 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T01:16:09.167

我认为您在`*`第二个 2 阶乘子句之间缺少 a 。你得到一个错误是因为你试图运行`(math.factorial(k))(math.factorial(n-k))`，它变成了类似的东西`10(math.factorial(n-k)`，这是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T06:16:48.733

大概您希望计算的值是“n-choose-k”，即一次取 k 的 n 个事物的组合数。公式是`n!/(k! * (n-k)!)`。当缺失`*`值添加到您的计算中时，它会产生`n!/k! * (n-k)!`，它等于`(n!/k!)*(n-k)!`。（注意，`k!`均分`n!`。）例如，当 n=10 和 k=5 时，C(10,5) 应为 3628800/(120*120) = 252，但您的计算结果为 3628800/120*120 = 3628800，这是不正确的 14400 倍。

您当然可以修复括号：

```
>>> C = lambda n,k: math.factorial(n)/(math.factorial(k)*math.factorial(n-k))
>>> C(10,5)
252 
```

但请注意，如果 math.factorial(j) 需要 j-1 次乘法来计算，则 C(n,k) 需要 n-1+k-1+nk-1+1 = 2*n-2 次乘法和一次除法。这大约是所需乘法运算次数的四倍。下面显示的代码使用 j 乘和 j 除，其中 j 是 k 和 nk 中的较小者，因此 j 最多为 n/2。在某些机器上，除法比乘法慢得多，但在大多数机器上，j 次乘法和 j 次除法的运行速度要比 2*n-2 次乘法和一次除法快得多。

更重要的是，C(n,k) 远小于 n!。每当 n 超过 20 时，通过`n!/(k!*(n-k)!)`公式计算需要超过 64 位的精度。例如，C(21,1) 返回值 21L。相比之下，在需要超过 64 位来计算 D(62,31)=465428353255261088L 之前，下面的代码最多计算 D(61,30)=232714176627630544。（我将函数命名为“D”而不是“C”以避免名称冲突。）

对于大型快速机器上的小型计算，额外的乘法和额外的精度要求并不重要。然而，对于小型机器上的大型计算，它们变得很重要。

简而言之，D() 中的乘法和除法的顺序保持了看起来最小的最大中间值。最大值出现在 for 循环的最后一遍。另请注意，在 for 循环中，i 始终是 c*j 的精确除数，并且不会发生截断。这是计算“n-choose-k”的相当标准的算法。

```
def D(n, k):
    c, j, k = 1, n, min(k,n-k)
    for i in range(1,k+1):
        c, j = c*j/i, j-1
    return c 
```

口译员的结果：

```
>>> D(10,5)
252
>>> D(61,30)
232714176627630544
>>> D(62,31)
465428353255261088L 
```

# php - Ajax/PHP 下拉菜单中的 MySQL 排序顺序问题

> ID：13105578
> 
> 赞同：0
> 
> 时间：2012-10-28T01:13:41.847
> 
> 标签：php, mysql, ajax

希望有人可以帮助我解决 MySQL/PHP 排序问题。

我正在做的事情的简要概述如下：

我有三个（链接的）选择框。第一个框的输出是“固定的”（它包含我商店中的所有顶级类别）。随后的两个框根据前一个框中的选择填充...标准，简单的东西，我听到你说！

这一切都很好，最后一个框中的选择（字符串）被附加到“搜索结果”页面 - 正是我需要的。我的问题出现在尝试组织第二个和第三个框的排序顺序时。

这是我的代码示例：

```
 public function ShowType()
    {
        $sql = "SELECT categories.*, categories_description.categories_name FROM categories, categories_description WHERE categories.categories_id = categories_description.categories_id AND categories.parent_id = $_POST[category] ORDER BY categories_name";
        $res = mysql_query($sql,$this->conn);
        $type = '<option value="0">Select...</option>';
        while($row = mysql_fetch_array($res))
        {
        $type .= '<option value="' . $row['categories_name'] . '">' . $row['categories_id'] . '</option>';
        }
        return $type;
    } 
```

Ajax 替换了（灰色，不可点击）

```
<option value="0">Select...</option> 
```

部分到

```
<option value="' . $row['categories_name'] . '">' . $row['categories_id'] . '</option> 
```

一旦做出选择（在前一个框中）。

我的问题是激活框后显示的数组不是按字母顺序排列的。我想对选择框中的输出进行排序，`categories_name`但无论我在 MySQL 查询中尝试什么，它都不会有！

我的“动态”标签的输出是否因为 Ajax 更新的方式而未排序？我是否需要用 PHP 重新排序数组，如果是这样，有人可以将我指向初学者的水平（我不想称自己为中级！）关于如何去做的教程？

我希望我不会像上次那样引发更多争论！:-)

干杯，

安迪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:58:13.180

在您的 SQL 查询中，您有：

`ORDER BY categories_name`

但是，在您填充下拉列表的代码中，您有：

`<option value="' . $row['categories_name'] . '">' . $row['categories_id'] . '</option>`

您正在显示`categories_id`但按 排序`categories_name`，因此用户不会看到结果下拉列表以进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:33:56.403

试试这些查询：“SELECT categories.*, categories_description.categories_name FROM categories, categories_description WHERE categories.categories_id = categories_description.categories_id AND categories.parent_id = '$_POST[category]' ORDER BY categories_name”

或者

“SELECT categories.*, categories_description.categories_name FROM categories, categories_description WHERE categories.categories_id = categories_description.categories_id AND categories.parent_id = '".$_POST[category]."' ORDER BY categories_name"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:33:47.370

使用它：ORDER BY categories_id

# sql - PostgreSQL 一次查询中的两个 CTE

> ID：13105583
> 
> 赞同：-2
> 
> 时间：2012-10-28T01:14:31.293
> 
> 标签：sql, postgresql

我们可以在 Postgresql 中的一个查询中有两个 CTE 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T01:35:00.463

如果您的意思是在一个查询中而不是在一个表中，那么可以。例如：

```
WITH cte1 AS (
    ...
), cte2 AS (
    ...
)
SELECT *
FROM cte1, cte2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T01:36:35.893

是的，我们可以。我们可以有嵌套的 CTE，例如：

```
WITH F AS
(WITH D AS (.....)

SELECT ....

FROM (...)
; 
```

# javascript - 网页内的Javascript验证显示字符串而不是警报

> ID：13105585
> 
> 赞同：0
> 
> 时间：2012-10-28T01:14:40.170
> 
> 标签：javascript, forms, validation, alert

嗨，我目前有一个提交表单，检查了以下验证规则：

```
<script language="JavaScript">
var frmvalidator  = new Validator("contactform");
frmvalidator.addValidation("message","req","Please enter a valid message."); 
</script>

    function Validator(frmname)
{
  this.formobj=document.forms[frmname];
    if(!this.formobj)
    {
      alert("Error: couldnot get Form object "+frmname);
        return;
    }
    if(this.formobj.onsubmit)
    {
     this.formobj.old_onsubmit = this.formobj.onsubmit;
     this.formobj.onsubmit=null;
    }
    else
    {
     this.formobj.old_onsubmit = null;
    }
    this.formobj._sfm_form_name=frmname;
    this.formobj.onsubmit=form_submit_handler;
    this.addValidation = add_validation;
    this.setAddnlValidationFunction=set_addnl_vfunction;
    this.clearAllValidations = clear_all_validations;
    this.disable_validations = false;//new
    document.error_disp_handler = new sfm_ErrorDisplayHandler();
    this.EnableOnPageErrorDisplay=validator_enable_OPED;
    this.EnableOnPageErrorDisplaySingleBox=validator_enable_OPED_SB;
    this.show_errors_together=true;
    this.EnableMsgsTogether=sfm_enable_show_msgs_together;
    document.set_focus_onerror=true;
    this.EnableFocusOnError=sfm_validator_enable_focus;

} 
```

但是，我希望在网页上显示错误消息而不是警报，有人可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:01:31.367

您正在使用的教程将表单验证器引用为[http://www.javascript-coder.com/html-form/javascript-form-validation.phtml](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)如果您阅读了该内容，特别是在第二页的顶部，您将看到：

> 在消息框中一起显示所有表单验证错误
> 
> 如果要一起显示所有错误消息，则只需调用 EnableMsgsTogether() 函数，如下所示。
> 
> frmvalidator.EnableMsgsTogether();

其后的文本提供了处理错误消息的更多选项。

你也许可以试试。

# button - Google 电子表格：将 B 添加到 A 然后清除 B 的按钮

> ID：13105587
> 
> 赞同：1
> 
> 时间：2012-10-28T01:15:08.283
> 
> 标签：button, google-apps-script, google-sheets

[有用的答案，但不完全是我想要的](https://stackoverflow.com/questions/9268570/i-need-a-button-to-clear-cells-in-a-google-spreadsheet)

上面的答案给出了我正在寻找的部分脚本。我想添加另一个（或两个）步骤，但不知道如何。

```
Here's what I'm trying to accomplish: 
```

我有一列数字，想添加另一个数字。我无法弄清楚的部分是如何在将数字添加到第一列后清除单元格。

```
Like this:

A <---B
1 <---2 
2 <---5 
3 <---24 
```

单击一个按钮，我希望将 B 中的数字添加到 A，然后清除 B。A 列将变为 3、7、27，B 列中的单元格将变为空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:16:53.480

```
function addRange() {
  //replace 'Sheet1' with your actual sheet name
  var sheet = SpreadsheetApp.getActive().getSheetByName('Sheet1');
  var tRange = sheet.getRange('A1:A3');
  var tValues = tRange.getValues();
  var sRange = sheet.getRange('B1:B3');
  var sValues = sRange.getValues();
  for (var i = 0; i < tValues.length; i++) {
    tValues[i][0] += sValues[i][0];
  }
  tRange.setValues(tValues);
  sRange.clearContent();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:09:22.597

您还可以在电子表格菜单中添加一个按钮，以使用此代码执行上述 AdmaL 的代码示例

```
function onOpen() {
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var menubutton = [ {name: "Add Range", functionName: "addRange"}]; //"addRange" is the name of the function submitted by AdamL Above //This would also need to be included as a function in your script as the function to call when you click the "Custom" menu button
    ss.addMenu("Custom", menubutton);
} 
```

# mysql - 如何使用 MySql 从 StoredProcedure 返回结果集？

> ID：13105591
> 
> 赞同：4
> 
> 时间：2012-10-28T01:15:50.307
> 
> 标签：mysql, sql, stored-procedures, output

我正在使用 MySql 编写一个存储过程，它使用 select 语句返回多行。

我的代码如下

```
drop procedure if exists GetAccounts; 
DELIMITER // 
CREATE PROCEDURE GetAccounts() 
BEGIN 
DECLARE rowcount int;
SET @resultset = (SELECT * from requests where STATUS = "FAILURE" ;
END // 
DELIMITER 
```

有关如何在存储过程中返回结果集的任何示例？

谢谢 Gendaful

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T01:30:01.263

```
DROP PROCEDURE IF EXISTS GetAccounts; 
DELIMITER // 
CREATE PROCEDURE GetAccounts() 
BEGIN 
DECLARE rowcount int;
    SELECT * from requests where STATUS = "FAILURE" ;
END // 
DELIMITER ; 
```

# android - HttpURLConnection：setFixedLengthStreamingMode() 想要的大小是多少？

> ID：13105592
> 
> 赞同：7
> 
> 时间：2012-10-28T01:15:56.160
> 
> 标签：android, http, image-uploading

我正在尝试上传从相机返回的 jpeg 图像缓冲区。我知道长度，但是如果我只将那个长度传递给 setFixedLengthStreamingMode() 例程，我会在 logcat 中收到错误，告诉我它需要不同的大小。我不知道这是否是一个 android 错误（我在此设备上运行 2.3.3），或者除了 POST 数据或什么之外，我应该添加标题的大小。我可以使用 setChunkedStreamingMode(0) 并且效果很好，但我认为避免复制数据的开销会很好。我似乎总是少了 155 个字节，除非我任意添加 155 个字节，然后它告诉我我少了 2 个字节:-)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-28T01:25:44.500

`URLConnection`默认情况下，缓冲区会将写入客户端内存中的*所有内容都*`getOutputStream()`缓存起来，直到它关闭。这是强制性的，因为`Content-Length`需要设置 HTTP 响应标头。但是只有在写入所有字节后才能知道内容长度。当响应主体相对较大时，这可能会占用内存。

**如果您事先知道要写入的确切**字节数（注意：字节，而不是字符），那么您可以使用该字节数`setFixedLengthStreamingMode()`来设置它，以便可以更快地设置标头，从而可以更频繁地刷新. 在您的特定情况下，您显然使用了错误的值。**`Content-Length``URLConnection`**

 **基本上将`setChunkedStreamingMode()`传输编码更改为`chunked`. 这基本上是一行以十六进制代码表示的字节长度，然后是一行写入的字节，然后是一个空行（另请参见[wikipedia](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)）。最后一行的字节长度为 0，因此服务器知道它何时是正文的结尾，因此它不必等待任何传入数据。这允许更频繁地刷新响应主体。您不应仅将其设置为 0，而应使用合理的值，例如 1000 左右。这样，每 1000 个写入字节将作为一个新块发送。

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests/2793153#2793153)**

# php - 它将数据库中“活动”字段的所有值设置为 0

> ID：13105595
> 
> 赞同：2
> 
> 时间：2012-10-28T01:16:16.530
> 
> 标签：php, mysql, sql

```
$createDate = mktime(0,0,0,10,28,date("Y"));
$selectedDate =  date('d-m-Y', ($createDate));
$active = 0;
$sql = "UPDATE Session SET Active = ? WHERE SessionDate <= ?";                                         
$update = $mysqli->prepare($sql);
$update->bind_param("is", $active, $selectedDate);  
$update->execute(); 
```

我认为我没有正确设置上述代码，因为我正在运行一项 CRON 作业，我曾声明每年 10 月 28 日（今天），它将“活动”字段设置为 0。

问题是它将我数据库中所有行的活动字段设置为“0”，即使它是在今年 10 月 28 日之后。

以下是假设发生的事情：

*   现在是 2012 年，所以当它变成 10 月 28 日（现在是现在）时，任何“SessionDate”在此日期之前的考试都应该有一个“活动”值“0”，其他考试仍然有一个“活动” “1”的值。

*   CRON 将在明年 10 月 28 日之前完成它的工作，这次显然是 2013 年。同样的规则适用于任何“SessionDate”在此日期之前的考试，“Active”值为“ 0”，其他考试仍然具有“1”的“活动”值。

*   然后，CRON 将在下一年的 10 月 28 日之前完成它的工作，这次显然是 2014 年。同样的规则适用于任何“SessionDate”在此日期之前的考试，“Active”值为“0”，其他考试仍然具有“1”的“活动”值。

等等....

那么，当 CRON 执行此操作时，为什么我的所有数据库行的“活动”字段都设置为 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:49:22.003

这不起作用的原因是日期结构与数据库中的日期结构不匹配。

在我的 php 脚本中，我得到了它：

```
$selectedDate =  date('d-m-Y', ($createDate)); 
```

它应该是这样的：

```
$selectedDate =  date('Y-m-d', ($createDate)); 
```

# ruby-on-rails - Rails：如何通过 has_one 关联来实现？

> ID：13105598
> 
> 赞同：0
> 
> 时间：2012-10-28T01:16:41.693
> 
> 标签：ruby-on-rails, ruby, associations, model-associations, has-one

我的模型有两列，一列是命名`foo_id`的，另一列是`bar_id`.

我想知道是否可以将这两个简单的方法变成 has_one 关联：

```
class SomeModel < ActiveRecord::Base
  def foobar_foo
    Foobar.find( self.foo_id )
  end

  def foobar_bar
    Foobar.find( self.bar_id )
  end
end 
```

也许我已经盯着文档太久了，但我似乎无法找到一种方法来告诉 Rails`self.foo_id`用作其他模型的外键。

我知道在大多数情况下，这应该是 a`has_many :through`或者可能是 a `belongs_to`，但是为了争论，我有兴趣了解这是否可以通过 a`has_one`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:08:01.847

终于有机会重新审视这个问题，顺便说一句，在尝试的最初几分钟内偶然发现了一个解决方案。

```
 has_one :bar, primary_key: :bar_id, foreign_key: :id, class_name: 'Foobar'
  has_one :foo, primary_key: :foo_id, foreign_key: :id, class_name: 'Foobar' 
```

按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T04:29:30.660

这有帮助吗？

```
has_one :foo, class_name: "Foobar", foreign_key: :foo_id
has_one :bar, class_name: "Foobar", foreign_key: :bar_id 
```

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one)

# c - 两个 C 代码片段之间的区别

> ID：13105601
> 
> 赞同：0
> 
> 时间：2012-10-28T01:17:12.087
> 
> 标签：c

我无法解释为什么这两个 C 代码段的行为方式不同。我正在尝试将两个结构 eh 和 ah 序列化为单个字节缓冲区（uint8_t）。第一个代码块有效，第二个无效。我无法弄清楚区别。如果有人可以向我解释，将不胜感激。

**区块 1：**

```
uint8_t arp_reply_buf[sizeof(eh) + sizeof(ah)];
uint8_t *eh_ptr = (uint8_t*)&eh;
for (int i = 0; i < sizeof(eh); i++)
{
    arp_reply_buf[i] = eh_ptr[i];
}
uint8_t *ah_ptr = (uint8_t*)&ah;
int index = 0;
for (int i = sizeof(eh); i < (sizeof(eh) + sizeof(ah)); i++)
{
    arp_reply_buf[i] = ah_ptr[index++];
} 
```

**区块 2：**

```
uint8_t arp_reply_buf[sizeof(eh) + sizeof(ah)];
arp_reply_buf[0] = *(uint8_t *)&eh;
arp_reply_buf[sizeof(eh)] = *(uint8_t *)&ah; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T01:20:35.653

在第二个示例中，您仅在两个索引中设置值：

1.  `arp_reply_buf[0]`：

    ```
    arp_reply_buf[0] = *(uint8_t *)&eh; 
    ```

2.  `arp_reply_buf[sizeof(eh)]`：

    ```
    arp_reply_buf[sizeof(eh)] = *(uint8_t *)&ah; 
    ```

# xcode - xcode 4.5.1 未加载 .gdbinit

> ID：13105602
> 
> 赞同：0
> 
> 时间：2012-10-28T01:17:15.360
> 
> 标签：xcode, gdb

我有一个 .gdbinit 文件。我已经使用它多年了。它在我的主目录中。我仍然需要在 gdb 下进行 Xcode 调试，而不是 lldb。但是 Xcode 4.5.1 在运行应用程序时不会加载该文件。

我可以使用 'source ~/.gdbinit' 手动加载它。但这很痛苦！有什么方法可以将其配置为在启动时加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:16:32.257

`source ~/.gdbinit`在项目中添加“运行”方案的预操作部分怎么样（Cmd + < 访问方案编辑器）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:09:41.153

我在某处读到过，并且体验到 Xcode 4.5 和 4.5.1 中有很多错误，这可能就是其中之一。我对此无能为力，只能说：

1.）从应用程序的finder中删除xcode.app

2.) 从苹果网站下载 Xcode 4.4.1：[https ://developer.apple.com/downloads/index.action?name=Xcode%204.4.1](https://developer.apple.com/downloads/index.action?name=Xcode%204.4.1)

3.）将其放入应用程序文件夹中。

4.) 运行 Xcode 4.4.1 并运行您的应用程序！

由于这两个版本的 xcode 有问题，我不得不这样做两次。

# android - 在sqlite数据库android中插入日期时间

> ID：13105609
> 
> 赞同：5
> 
> 时间：2012-10-28T01:19:37.750
> 
> 标签：android, sqlite

如何使用不使用原始查询的内容值在我的 sqlite 数据库中插入日期时间数据？

datetime('now') 插入自身（文本）而不是时间，我可以在当前时间中添加额外的时间吗？

就像，当我按下按钮“1HOUR”时，它会在sqlite数据库中插入当前时间+ 1小时..谢谢，有点困惑..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T01:36:32.420

将日期/时间转换为毫秒，你会得到一个`long`. `long`然后你只需在数据库中插入值。

如果日期/时间值以毫秒为单位，您可以将它们相加。

--已编辑--

```
 Date myDate = new Date();
    long timeMilliseconds = myDate.getTime();
    //add 1 hour
    timeMilliseconds = timeMilliseconds + 3600 * 1000; //3600 seconds * 1000 milliseconds
    //To convert back to Date
    Date myDateNew = new Date(timeMilliseconds); 
```

在 SQLite 中，java`long`值存储为`int`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T01:44:48.977

您不能使用 Java 包装器“ContentValues”来使用日期时间函数。您可以通过以下方式实现：

1）可以使用SQLiteDatabase.execSQL（原始SQL查询）

```
 dbObj.execSQL("INSERT INTO "+DATABASE_TABLE+" VALUES (null, datetime()) "); 
```

2）您可以使用 SimpleDateFormat

```
// setting the format to sql date time
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
Date date = new Date();
ContentValues initialValues = new ContentValues(); 
initialValues.put("date_time", dateFormat.format(date));
long recordId = mDb.insert(DB_TABLE_NAME, null, initialValues); 
```

3）您将日期值以（长型）毫秒存储在数据库中，并且为了显示您可以对其进行格式化，

```
 import java.text.DateFormat;
 import java.text.SimpleDateFormat;
 import java.util.Calendar;

System.out.println(getDate(82233213123L, "dd/MM/yyyy hh:mm:ss.SSS"));

// Return date in specified format.
// milliSeconds Date in milliseconds
// dateFormat Date format 
// return date as string in specified format

public static String formatDate(long milliSeconds, String dateFormat)
{

    DateFormat formatter = new SimpleDateFormat(dateFormat);

// Create a calendar object that will convert the date and time value in milliseconds to date. 
   Calendar calendar = Calendar.getInstance();
 calendar.setTimeInMillis(milliSeconds);
 return formatter.format(calendar.getTime());
   }
 } 
```

1 秒 = 1000 毫秒，所以如果你想增加 1 小时，那么使用这个公式

```
 currentTImeMilli + (60 * 60 * 1000) 
```

# sql - SQL 语法帮助，数据仓库维度的 MERGE GROUP BY

> ID：13105610
> 
> 赞同：3
> 
> 时间：2012-10-28T01:19:40.077
> 
> 标签：sql, tsql, syntax, data-warehouse

我有一个 TSQL 代码，我想用它来从源表中更新/插入我的维度（SCD 类型 1），下面是代码：

```
MERGE [dim].[CompanyTest] AS Target
USING [dbo].[DWUSD_LIVE] AS Source
    ON Target.Comp = Source.Comp
 WHEN MATCHED
    AND (ISNULL(Target.[Comp Name],'') <> ISNULL(Source.[Comp Name],'')
    OR ISNULL(Target.[Comp Description],'') <> ISNULL(Source.[Comp Description],'')
   )
THEN UPDATE SET
    [Comp Name] = Source.[Comp Name]
   ,[Comp Description] = Source.[Comp Description]
   ,LastUpdated = GetDate()
WHEN NOT MATCHED THEN
      INSERT (
        Comp
        ,[Comp Name]
        ,[Comp Description]
        ,LastUpdated
      ) VALUES (
         Source.Comp
        ,Source.[Comp Name]
        ,Source.[Comp Description]
        ,GetDate()
); 
```

我的源表有：

```
[COMP] [COMP NAME] [COMP DESCRIPTION]
1,100,MyCompany,Service Provider
1,100,MyCompany,Service Provider
1,100,MyCompany,Service Provider
2,200,MyCompany,Service Provider
2,200,MyCompany,Service Provider
2,200,MyCompany,Service Provider
2,200,MyCompany,Service Provider 
```

当我运行一次上面的 TSQL 时，我在我的维度中得到了这个：

```
[COMP] [COMP NAME] [COMP DESCRIPTION]
1,100,MyCompany,Service Provider
1,100,MyCompany,Service Provider
1,100,MyCompany,Service Provider
2,200,MyCompany,Service Provider
2,200,MyCompany,Service Provider
2,200,MyCompany,Service Provider
2,200,MyCompany,Service Provider 
```

第一个问题是，当我尝试重新运行它时，我得到：

**消息 8672，级别 16，状态 1，第 1 行 MERGE 语句多次尝试更新或删除同一行。当目标行匹配多个源行时会发生这种情况。MERGE 语句不能多次 UPDATE/DELETE 目标表的同一行。优化 ON 子句以确保目标行最多匹配一个源行，或使用 GROUP BY 子句对源行进行分组。**

我知道我需要在语句中插入一个“GROUP BY”，我该怎么做才能只从源表中获取不同的行。

那么我的 Dimension 应该只有：

```
[COMP] [COMP NAME] [COMP DESCRIPTION]
1,100,MyCompany,Service Provider
2,200,MyCompany,Service Provider 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:48:23.143

这很简单。在 USING 语句派生表中使用

```
MERGE [dim].[CompanyTest] AS Target
USING (
       SELECT DISTINCT *
       FROM [dbo].[DWUSD_LIVE]
       ) AS Source
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T23:34:28.177

它现在可以工作了，我的最终代码如下所示：

```
MERGE [dim].[CompanyTest] AS Target
USING (
SELECT DISTINCT 
[COMP NAME],
[COMP DESCRIPTION],
[COMP]
FROM [dbo].[DWUSD_LIVE]
) AS Source
    ON Target.Comp = Source.Comp
 WHEN MATCHED
    AND (ISNULL(Target.[Comp Name],'') <> ISNULL(Source.[Comp Name],'')
    OR ISNULL(Target.[Comp Description],'') <> ISNULL(Source.[Comp Description],'')
   )
THEN UPDATE SET
    [Comp Name] = Source.[Comp Name]
   ,[Comp Description] = Source.[Comp Description]
   ,LastUpdated = GetDate()
WHEN NOT MATCHED THEN
      INSERT (
        Comp
        ,[Comp Name]
        ,[Comp Description]
        ,LastUpdated
      ) VALUES (
         Source.Comp
        ,Source.[Comp Name]
        ,Source.[Comp Description]
        ,GetDate()
); 
```

我是如此接近！谢谢 ：）

# c++ - 如何使用 c++ 和 opengl 在 mac 中创建窗口？

> ID：13105616
> 
> 赞同：0
> 
> 时间：2012-10-28T01:20:48.243
> 
> 标签：c++, objective-c, macos, opengl

我是mac开发的新手。我目前已经开始使用windows（使用direct3d）开发一个3d程序，我希望使用opengl扩展到mac。我目前有关于如何初始化窗口并使用 opengl 和 windows 在其中绘制的代码。我正在寻找用 mac 界面替换此应用程序的 windows 部分的最无缝的方法。

```
bool SystemClass::InitializeWindows(OpenGLClass* OpenGL, int& screenWidth, int&screenHeight){
WNDCLASSEX wc;
DEVMODE dmScreenSettings;
int posX, posY;

ApplicationHandle = this;
m_hinstance = GetModuleHandle(NULL);

m_applicationName = L"Engine";

wc.style         = CS_HREDRAW;
wc.lpfnWndProc   = WndProc;
wc.hInstance     = m_hinstance;
wc.hIcon         = LoadIcon(NULL, IDI_WINLOGO);
wc.hIconSm       = wc.hIcon;
wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
wc.lpszMenuName  = NULL;
wc.lpszClassName = m_applicationName;
wc.cbSize        = sizeof(WNDCLASSEX);

    //etc 
    //set full screen mode
    //set window to front
    //hide mouse 
```

当我研究这个时，我看到很多人使用objective-c 或coco，我是否必须使用objective-c 或coco 才能得到我想要的结果？如果是这样，我还能在 coco 库中使用 c++ 或 Objective-c++ 吗？

最后，与 mac 中的 messagebox() 最简单的等价物是什么？我使用了 NSGetCriticalAlertPanel() 但我似乎无法让它工作（主要是因为我找不到我必须包含的相应库）。

PS：我正在使用 xcode 编译器，如果有更好的或者您更喜欢的，请提出建议（我不是 xcode 的忠实粉丝）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:18:19.423

您可以从[这个 SDL - openGL 教程](http://www.meandmark.com/sdlopenglpart1.html)开始，它是最新的。您还需要安装您可能拥有的[XCode 。](https://developer.apple.com/technologies/tools/)教程中有关于如何将 inlcude SDL 安装到项目中的详细说明。在一切都初始化并准备好使用之后，您可以[在这里找到很多通用的 sdl 教程](http://www.sdltutorials.com/)，您可以专注[于 openGL 上的这个 sdltutorial](http://www.sdltutorials.com/sdl-opengl-tutorial-basics)。

也许[这个 SDL 常见问题解答](http://wiki.libsdl.org/moin.cgi/FAQMacOSX)也会有所帮助。

# javascript - PlacesService 搜索结果长度

> ID：13105618
> 
> 赞同：1
> 
> 时间：2012-10-28T01:21:05.750
> 
> 标签：javascript, google-maps, google-places-api

我正在调用**google.maps.places.PlacesService**的 search() 方法。我发送的请求对象如下所示：

> var request = { 位置：map.getCenter()，半径：_radius，类型：[document.getElementById("type").value] };

其中位置、半径和类型已正确初始化，例如，位置是**'New York, NY'**的地理编码位置，半径是**5000m**，类型是**牙医**。

与我访问 maps.google.com 并在那里进行类似查询时获得的数字或结果相比，我获得的数字或结果太小（~20）。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:10:15.177

根据[文档](https://developers.google.com/maps/documentation/javascript/places)：

> *“默认情况下，每个地方搜索每个查询最多返回 20 个建立结果；但是，每个搜索可以返回多达 60 个结果，分为三个页面。其他页面可通过 PlaceSearchPagination 对象获得。”*

有关更多信息，请阅读文档的[访问附加结果](https://developers.google.com/maps/documentation/javascript/places#PlaceSearchPaging)部分。

# c# - 为什么清除按钮似乎禁用了我的列表框标签输出？

> ID：13105625
> 
> 赞同：-1
> 
> 时间：2012-10-28T01:22:06.937
> 
> 标签：c#, winforms, visual-studio-2010, listbox

当我使用列表框运行程序时，在选择项目并按 Enter 后一切正常，但是当我按清除按钮并再次选择项目并按 Enter 时，没有任何反应。我已经为清除按钮尝试了以下操作，它们清除了我的标签文本和选定的列表框，但是当我在选择项目后再次尝试按 Enter 按钮时，我无法再产生另一个输出。

```
 public partial class frmLabSix : Form
{
    public string strCakes;
    public int cakeCost;

    public frmLabSix()
    {
        InitializeComponent();
    }

    private void lstCakes_SelectedIndexChanged(object sender, EventArgs e)
    {   
        for (int index = 0; index < lstCakes.SelectedItems.Count; index++)
        {
            strCakes += Environment.NewLine + lstCakes.SelectedItems[index].ToString();

            if (lstCakes.SelectedIndices[index] == 0) cakeCost += 18;
            if (lstCakes.SelectedIndices[index] == 1) cakeCost += 25;
            if (lstCakes.SelectedIndices[index] == 2) cakeCost += 40;
            if (lstCakes.SelectedIndices[index] == 3) cakeCost += 30;
        }

    }

    private void lblOrdered_Click(object sender, EventArgs e)
    {

    }

    private void btnEnter_Click(object sender, EventArgs e)
    {
        double tax = 1.13;
        lblOrdered.Text = "You have ordered: " + strCakes + '\n' + "Total Cost: " + (tax * cakeCost).ToString("C");
        lblOrdered.Visible = true;
    }

    private void btnClear_Click(object sender, EventArgs e)
    {
        lstCakes.SelectedItems.Clear();
        lblOrdered.Visible = false;
    }

    private void btnExit_Click(object sender, EventArgs e)
    {
        this.Close();
    }
} 
```

有人能告诉我这是为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:58:19.763

这行代码隐藏了您的标签。

```
lblOrdered.Visible = false; 
```

您在清除按钮单击时使标签不可见。之后你会重置它的可见性吗？我不知道，你的代码的其他部分会发生什么，但它可能应该是这样的：

```
// if the label is not visible, the next line won't make it visible implicitly
lblOrdered.Text = ... 
//you should set label's visibility explicitly
if (!lblOrdered.Visible)
    lblOrdered.Visible = true; 
```

设置标签的文本不会使其可见。如果你用自己的代码隐藏它，你也应该让标签显式可见。

# python - Python：递归传值，4 个皇后

> ID：13105626
> 
> 赞同：3
> 
> 时间：2012-10-28T01:22:11.523
> 
> 标签：python

我正在尝试在 Python 中实现回溯算法来解决 4 个皇后问题。我创建了一个具有以下内容的 Queens 类：

```
def __init__(self, board_size=4):
    self.board  = [[0 for i in xrange(0,board_size)] for i in xrange(0,board_size)]; 
```

但是当我实现递归回溯时，由于通过引用传递，董事会在所有访问过的地方都充满了 1。

```
def backtrack(self, board, next_column):
            (algorithm here) ...
            board[i][column] = 1 ... #to indicate a placed queen
            self.backtrack(board, next_column + 1);
            (rest of algorithm) 
```

我知道我能做到

```
new_board = copy.deepcopy(board); 
```

浅拷贝不适用于高维数组。有没有更好的方法来做到这一点，因为我听说 deepcopy 存在一些问题？建议除了二维列表之外的不同数据结构的答案也是可以接受的。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:29:01.440

实际上，deepcopy 没有问题，只是它有时会很慢。在这种情况下，无论如何这可能都不是问题。但是有几种选择。

如果你想坚持使用列表，你可以简单地制作一个深拷贝：

```
In [63]: n = 8

In [64]: board  = [[0 for i in range(n)] for i in range(n)]

In [65]: timeit board2 = [r[:] for r in board]
100000 loops, best of 3: 3.24 us per loop

In [66]: timeit board2 = copy.deepcopy(board)
10000 loops, best of 3: 92.8 us per loop 
```

请注意，deepcopy 很慢。

[旁注：实际上，这是我最喜欢的（非numpy）用于制作二维数组的习语：

```
In [69]: board = [x[:] for x in [[0]*n]*n] 
```

但是很多人不喜欢它，因为它太接近错误的东西，即使它自己工作，从这个意义上说不是很健壮。]

但也许更好的方法是使用字典：

```
In [79]: board = {(i,j): 0 for i in range(n) for j in range(n)}

In [80]: timeit board2 = board.copy()
100000 loops, best of 3: 3.46 us per loop 
```

# javascript - 如何跳过div？

> ID：13105627
> 
> 赞同：1
> 
> 时间：2012-10-28T01:22:23.700
> 
> 标签：javascript, jquery, jquery-mobile

我正在做一个移动 html5 / jquery 测验，我将服务器中的所有问题预加载到一个 html 文件中，然后有按钮在问题之间来回移动。效果很好，但现在我需要跳过某些问题，如果此人通过无线电是/否输入问题 20、然后是 21 和 22 回答“否”，则不需要显示。
我怎样才能做到这一点？这是我一直在使用的代码片段：

JSFIDDLE：

[http://jsfiddle.net/gN9Xg/](http://jsfiddle.net/gN9Xg/)

如果此人在问题 1 上回答“否”，则想跳过问题 2

```
 function doSubmit(obj)
    {
        $(obj).parents(".question").first().next().show();
        $(obj).parents(".question").first().hide();
    }

<div class="question" id="question11" >

<input type="text" name="question11.1" qid="question11" />

<input type=submit id="button"    value="Submit" onclick='doSubmit(this)' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:02:20.230

要在对 HTML 进行最小更改的情况下实现这样的事情，您可以设置一个类，例如“skipper”为将导致这种跳过的元素，然后元素值将是一个数字，确定要跳过多少个问题。

例如，要让答案“否”导致跳过，请使用这样的 HTML：

```
<select name="question1.1" class="skipper">
    <option  name="question1.1" ano="1" qid="question1" value="0" checked/>Yes
    <option  name="question1.1" ano="1" qid="question1" value="1"  />No
</select> 
```

由于您实际上并没有在其他地方使用此值，因此应该没问题。

现在要使用它，请使用这样的代码：

```
function doSubmit(obj)
 {
    var oQuestion = $(obj).parents(".question").first();
    var skipCount = parseInt(oQuestion.find(".skipper").val(), 10);
    if (isNaN(skipCount) || skipCount < 0)
        skipCount = 0;
    var oNext = oQuestion.next();
    for (var i = 0; i < skipCount; i++)
        oNext = oNext.next();
    oNext.data("prev_index", oQuestion.index());
    oNext.show();
    oQuestion.hide();
}

function backToPrev(obj)
{
    var oQuestion = $(obj).parents(".question").first();
    var index = parseInt(oQuestion.data("prev_index"), 10);
    if (isNaN(index) || index < 0)
        oQuestion.prev().show();
    else
        $(".question").eq(index).show();
    oQuestion.hide();
} 
```

如您所见，代码查找“skipper”值并分配问题的索引以返回。

[更新了小提琴](http://jsfiddle.net/gN9Xg/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:42:07.697

每个答案都需要一些指示，说明选择它时要做什么。在应该跳过的答案上放置一个`data-next`属性，并将属性值设置为下一个必填问题的 id。

Now, when an answer is selected check its `data-next`attribute, if present set the next question to the selected id otherwise proceed as you now do.

备份也需要进行一些更改。您需要往回跳，直到找到 style.display 不是“none”的问题。

基本思想是使用显示样式设置来指示要回答的问题和`data-next`答案的属性以选择要回答的问题。

希望这能让你继续。

# java - 餐饮哲学家实施

> ID：13105628
> 
> 赞同：3
> 
> 时间：2012-10-28T01:23:11.787
> 
> 标签：java

我只是想知道这是否可以解决java中的哲学家就餐问题？

```
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class MainClass {

public static void main(String[] args) {
    Lock forks[] = new ReentrantLock[5];

    for(int i = 0; i<5; i++){
        forks[i] = new ReentrantLock(); 
    }

    Thread p1 = new Thread(new Philosopher(forks[4], forks[0], "first"));
    Thread p2 = new Thread(new Philosopher(forks[0], forks[1], "second"));
    Thread p3 = new Thread(new Philosopher(forks[1], forks[2], "third"));
    Thread p4 = new Thread(new Philosopher(forks[2], forks[3], "fourth"));
    Thread p5 = new Thread(new Philosopher(forks[3], forks[4], "fifth"));

    p1.start();
    p2.start();
    p3.start();
    p4.start();
    p5.start(); 
  }
} 
```

和我的哲学家班：

```
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class Philosopher implements Runnable {

Lock leftFork = new ReentrantLock();
Lock rightFork = new ReentrantLock();
String name; 

public Philosopher(Lock leftFork, Lock rightFork, String name) {
    this.leftFork = leftFork;
    this.rightFork = rightFork;
    this.name = name; 
}

@Override
public void run() {

    while(true){
    think(name);
    eat(leftFork, rightFork, name); 
    }
}

private void eat(Lock leftFork, Lock rightFork, String name){
    leftFork.lock();
    rightFork.lock(); 

    System.out.println(name + " eating...");

    try {
        Thread.sleep(3000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    finally{
        leftFork.unlock();
        rightFork.unlock(); 
        System.out.println(name + " done eating...");
    }
}

private void think(String name){
    System.out.println(name + " thinking...");

    try {
        Thread.sleep(100);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
}

} 
```

感觉应该有更多..代码。但是我已经运行了该程序，它完成了问题要求我解决的问题。任何时候只有两个哲学家在吃东西，否则他们在思考。

我有这个权利吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:38:55.487

不，这段代码不能避免死锁。

所有 5 位哲学家都有可能获得他们的左叉；然后他们都将永远等待他们的右分叉。

为了证明这一点，插入一个 brief `sleep()`，甚至只是一个`println()`between `leftFork.lock()`and `rightFork.lock()`，这应该使它大部分时间都失败。当前代码在我的系统上偶尔会失败，即使没有用额外的延迟引起它。

# javascript - 使用 Javascript 创建一个显示 img 的表

> ID：13105631
> 
> 赞同：0
> 
> 时间：2012-10-28T01:24:13.227
> 
> 标签：javascript, html, html-table

我必须创建一个包含两列和 10 行的表的页面。左边栏必须显示国家名称，另一栏必须显示国家国旗。我必须为此页面使用 Javascript，但我不知道如何将它放在一起。这是我所拥有的（可能是非常错误的）：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type="text/css">
    </style>
    <title>New Items</title>
<script type="text/javascript">
    var img1 = document.createElement("img");
        img.src = "argentina.jpg";
    var img2 = document.createElement("img");
        img.src = "http://www.google.com/intl/en_com/images/logo_plain.png";
    var img3 = document.createElement("img");
        img.src = "http://www.google.com/intl/en_com/images/logo_plain.png";
    var img4 = document.createElement("img");
        img.src = "http://www.google.com/intl/en_com/images/logo_plain.png";
    var img5 = document.createElement("img");
        img.src = "http://www.google.com/intl/en_com/images/logo_plain.png";
    var img6 = document.createElement("img");
        img.src = "argentina.jpg";
    var img7 = document.createElement("img");
        img.src = "http://www.google.com/intl/en_com/images/logo_plain.png";
    var img8 = document.createElement("img");
        img.src = "http://www.google.com/intl/en_com/images/logo_plain.png";
    var img9 = document.createElement("img");
        img.src = "http://www.google.com/intl/en_com/images/logo_plain.png";
    var img10 = document.createElement("img");
        img.src = "http://www.google.com/intl/en_com/images/logo_plain.png";
</script>
</head>
<body>
<h1>Flags</h1>
<form action="#" name="Flags" method="get">
<table style="border: 0; width: 100%;">
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img1">
    Argentina</option>
    </select>
    </td>
    <td>
    <textarea name="news" cols="30" rows="10"
    style="background-color: Transparent"></textarea>
    </td>
</tr>
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img2">
    Australia</option>
    </td>
    <td>
    <textarea name="news" cols="30" rows="10"
    style="background-color: Transparent"></textarea>
    </td>
</tr>
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img3">
    Bolivia</option>
    </td>
    <td>
    <textarea name="news" cols="30" rows="10"
    style="background-color: Transparent"></textarea>
    </td>
</tr>
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img4">
    Cuba</option>
    </td>
    <td>
    <textarea name="news" cols="30" rows="10"
    style="background-color: Transparent"></textarea>
    </td>
</tr>
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img5">
    Finland</option>
    </td>
    <td>
    <textarea name="news" cols="30" rows="10"
    style="background-color: Transparent"></textarea>
    </td>
</tr>
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img6">
    France</option>
    </td>
    <td>
    <textarea name="news" cols="30" rows="10"
    style="background-color: Transparent"></textarea>
    </td>
</tr>
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img7">
    Italy</option>
    </td>
    <td>
    <textarea name="flags" cols="30 rows="10"  
    style="background-color: Transparent"></textarea>
    </td>
</tr>
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img8">
    Peru</option>
    </td>
    <td>
    <textarea name="flags" cols="30" rows="10"
    style="background-color: Transparent"></textarea>
    </td>
</tr>
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img9">
    Syria</option>
    </td>
    <td>
    <textarea name="flags" cols="30" rows="10"
    style="background-color: Transparent"></textarea>
    </td>
</tr>
<tr>
    <td>
    <select name="flags" multiple="multiple"
        style="height: 98px">
        <option onclick="document.productImage.src=img10">
    Tunisia</option>
    </td>
    <td>
    <textarea name="flags" cols="30" rows="10"
    style="background-color: Transparent"></textarea>
    </td>
</tr>

</tr>
</table>
</form>

</body>
</html> 
```

请帮助我花了很多时间研究它，我的教科书没有给出任何关于 img 的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T02:48:06.260

可以对您的代码进行许多改进。没有特别的顺序，我看到

**1)**所有文本区域都应用了相同的内联样式。在这种情况下，您可以删除所有额外的膨胀，将所有这 10 个语句交换为样式标签中包含的单个 1。所以，

```
<textarea name="flags" cols="30" rows="10"
 style="background-color: Transparent"></textarea> 
```

变成

```
<textarea name="flags" cols="30" rows="10"></textarea> 
```

此外，将规则添加到样式部分：

```
textarea
{
  background-color: transparent;
} 
```

**2.**您可以使用 Image 对象。您拨打多个电话`document.createElement('image')`- 这可以替换为`new Image;`

**3.**一切都是硬编码的——你似乎根本没有使用循环。您可以将您的国家列表及其标志存储在一个数组中。然后，您可以处理这个数组，根据需要吐出表格行。因此，您可以使用为每一行创建 DOM 的函数，采用 2 个变量 - 图像路径和国家/地区名称。

以下是一些方法变化的工作示例：http: [//jsfiddle.net/AfBwJ/](http://jsfiddle.net/AfBwJ/)

# html - 如何使内容可滚动，但页眉和页脚都不能滚动？

> ID：13105634
> 
> 赞同：0
> 
> 时间：2012-10-28T01:24:30.107
> 
> 标签：html, css

这个问题将是[页眉和页脚固定，内容可滚动](https://stackoverflow.com/questions/4204517/header-and-footer-fixed-content-scrollable)和[固定页眉，页脚与可滚动内容](https://stackoverflow.com/questions/4069734/cross-browser-fixed-header-footer-and-scrollable-content)的重复，如果不是一个细节，这对我来说非常重要 - 我不想为内容指定固定的高度和宽度.

[http://jsfiddle.net/mark69_fnd/PWRDa/](http://jsfiddle.net/mark69_fnd/PWRDa/)包含一个带有虚拟数据的真实表单，展示了问题 - 调整窗口大小使滚动条出现，但在页面上，而不是在表单上。在当前布局中，菜单栏和状态栏被滚动到视图之外，我希望它们保持固定，而表单数据被滚动。

请不要提供绝对宽度和/或高度的解决方案。我更喜欢用 javascript 计算它们，而不是将它们烘焙到 CSS 中，除非它是 100%。当然，纯 HTML/CSS 解决方案更可取。

这是CSS：

```
html, body, .yui3-app-views {
    height: 100%;
    width: 100%;
}

.container {
    position: relative; /* needed for footer positioning*/
    margin: 0 auto;
    height: auto;
    min-height: 100%;
    background-color: #eee;
}

.content {
    background-color: #ddd;
    padding: 0em 0em 2em; /* bottom padding for footer */
    overflow: auto;
}

#footer {
    position: absolute;
    width: 100%;
    bottom: 0; /* stick to bottom */
    background-color: #ccc;
}

#status {
    border: solid 1px #000000;
}

#status .error {
    color: red;
    font-weight: bold;
}

/* ------------------------------------------------------------------------------------*/
.char {
    display: inline-block;
    vertical-align: top;
}

.line {
    white-space: nowrap;
}

/* --------------------------------- fieldset and legend ------------------------------*/
.fieldset {
    border: 2px groove threedface;
    margin-top: 1em;
}

.fakeFieldset {
    padding: 2px;
}

.fieldset > div.legend:first-child {
    display: inline-block;
    text-align: left;
    margin-left: 10px;
    background: #ddd;
    position: relative;
    top: -0.7em;
}

.merge-bottom {
    margin-bottom: -2px;
}

/* ------------------------------------ Forms ------------------------------*/

form div {
    white-space: nowrap;
}

form select, form input {
    margin: 2px;
    border: 1px groove;
}

form label:not(.same-line) {
    width: 8em;
    text-align: right;
    display: inline-block
}

#cust-balance {
    text-align: center;
}

.ccExpDate {
    width: 2em;
}

#cust-salutation {
    width: 4em;
}

.postalCode {
    width: 7em;
}

#cust-ccAddress {
    width: 20em;
}
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:10:14.347

// 使用来自询问者的输入进行更新。

[这](http://jsfiddle.net/PWRDa/23/)很好用。我的宽度设置为 100%，但如果你愿意，当然你可以在 JS 中做到这一点。

您需要提供页眉和页脚`position:fixed`

我还在`.content`div 中添加了一些填充，以便为顶部标题腾出空间。

如下所示：

```
html, body, .yui3-app-views {
    height: 100%;
    width: 100%;
}

.content {
    background-color: #ddd;
    padding: 2em 0em; /* padding for footer and header */
}

.menubar {
     position: fixed;
     top: 0px;
     width: 100%;
     z-index:1;
}

#footer {
    position: fixed;
    width: 100%;
    bottom: 0; /* stick to bottom */
    background-color: #ccc;
} 
```

# c - 在C中循环遍历一个没有输出的数组

> ID：13105635
> 
> 赞同：0
> 
> 时间：2012-10-28T01:24:37.537
> 
> 标签：c, arrays, loops

这是我的代码：

```
int main()
{
int tiles[9];
int counter=0;
int i=1;
while (counter<8)
{
    tiles[counter]=i;
    counter=counter+1;
    i=i+1;
    }
int running_total=0;
int current_number;
printf(tiles);

return 0;
} 
```

但是我没有输出，我的问题是什么？我是 C 的新手，所以我感谢任何评论/批评。

编辑：我确实得到了输出，但它是一张笑脸......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T01:26:01.903

1.  如果要打印数字，则需要格式字符串。
2.  如果要打印数组，则需要循环遍历它。

    ```
    int i;
    for ( i = 0; i < sizeof(tiles)/ sizeof(tiles[0]); ++i)
        printf("%d ", tiles[i]); // << added a space for Dietrich Epp :) 
    ```

# php - php登录页面问题

> ID：13105636
> 
> 赞同：-1
> 
> 时间：2012-10-28T01:24:39.807
> 
> 标签：php, mysql

我正在创建一个 php 登录页面。当传递 $_SESSION 变量“success”时，我无法让页面重定向（在这种情况下为 index.php）。我可以让成功消息起作用，所以我认为我的表单和查询都很好。我在这里想念什么？

这是表单（login.php）：

```
<? $page = "login-page";//body tag class

$title = "Log in to your Bloggr Account";//title tag text

session_start();

require_once('includes/header.php');

print_r($_SESSION); ?>

<p class="errors" id="errors">

<? if(!empty($_SESSION['errors'])){ ?>

     <script type="text/javascript"> $(function() {

           setTimeout(function(){

          $("#errors").fadeIn(500);}, 500)});

     <script>

<? foreach($_SESSION['errors'] as $error){
        echo $error;}
        session_unset($_SESSION['errors']);
    } ?>
</p> <? if(!empty($_SESSION['success'])){

    header("Location: index.php");
    echo $success;
    session_unset($_SESSION['success']); } ?>
<form action="login-post2.php" method="post" class="admin-form login">
<label for="userName">User Name <label>
<input type="text" name="userName" class="user-name" value="" />
<label for="password">Password</label>
<input type="password" name="password" class="password" />
<input type="submit" class="submit" name="register-submit" value="Log In!" />
</form> 
```

这是发布文件（login-post2.php）

```
<? if($_SERVER["REQUEST_METHOD"] == "POST"){
    session_start();
    require_once('../_db_connect.php');
    $errors = array();
    $success = "You're logged in!";
    if(empty($_POST['userName'])){
    $errors[] = "Please enter a user name.";
    }else[
    $userName = $_POST["userName"];
}

if(empty($errors)){
    $query = "SELECT userName, password FROM users WHERE userName = '$userName' and password = SHA1('$password')";
    $result = mysqli_query($dbconnect, $query);
    if(!result){
        $errors[] = "Please try again!";
} else{
    $success;
}
}

$_SESSION['errors'] = $errors;
$_SESSION['success'] = $success;

exit();
} ?> 
```

抱歉，如果某些格式有点不对劲。

* 为将来遇到此问题的任何人***编辑[已解决] ，这就是我所做的。***这是我问题的最大部分：

```
if(empty($errors)){
        $query = "SELECT userName, password FROM users WHERE userName = '$userName' and password = SHA1('$password')";
        $result = mysqli_query($dbconnect, $query);     
        if(mysqli_num_rows($result) == 1){//if username and password match;
            $row = mysqli_fetch_array($result);
            $_SESSION['loggedIn'] = $loggedIn;      
            header("Location: index.php");
            exit();
        }                   
    } else{
        $_SESSION['errors'] = $errors;
        header("Location: login.php");
        exit();
    } 
```

我没有很好地为 $errors 格式化 if/else 语句。我当时知道但无法弄清楚的部分问题是我需要一种方法来发送两次标头。如果我有 $errors 和另一种方式，如果我没有。我以前的方式是尝试在没有条件的情况下发送两次。我的解决方案是将我的语句的最后一点包装为 else，如果有错误，我可以将用户发送回登录页面，如果他们成功登录，则可以将其发送到索引页面。就是这样。希望这对将来的其他人有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:33:25.927

您需要`header()` [在发送任何其他内容之前](http://php.net/manual/en/function.header.php)调用（通过一些 PHP 之类的东西`echo`，或者`var_dump()`只是 PHP 标记之间的 HTML）。

您正在发送：

```
<p class="errors" id="errors">
<script type="text/javascript"> $(function() {
    setTimeout(function(){
    $("#errors").fadeIn(500);}, 500)});
<script>

echo $error;}

</p> 
```

在您发送标头之前。重构您的代码以将调用移至`header()`这些之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:27:21.437

`header("Location: login.php);`

缺少报价可能是个问题。

# c# - 具有多线程 C# 的异步 I/O

> ID：13105640
> 
> 赞同：0
> 
> 时间：2012-10-28T01:26:42.983
> 
> 标签：c#, multithreading, asynchronous

> **可能重复：**
> [如何限制并发异步 I/O 操作的数量？](https://stackoverflow.com/questions/10806951/how-to-limit-the-amount-of-concurrent-async-i-o-operations)

假设我有一个字符串数组

```
string[] domains = { "domain1.com", "domain2.com" ,..., "domain100.com"}; 
```

我想编写一个使用 5 个线程向这些域发送请求并将响应标头按启动顺序保存到同一日志文件的应用程序。例如：

```
Thread 1
domain1.com
Response header

Thread 2
domain2.com
Response header

Thread 3
domain3.com
Response header

Thread 4
domain4.com
Response header

Thread 5
domain5.com
Response header

Thread 1
domain6.com
Response header

Thread 2
domain7.com
Response header 
```

我是多线程编程的新手，所以希望你能帮助我。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T09:39:53.227

您不需要关心在后台创建了多少线程，线程池会为您优化线程创建，您的代码可能如下所示：

```
string[] domains = { "domain1.com", "domain2.com",...., "domain100.com" };

var client = new HttpClient();
var tasks = domains.Select(domain => client.GetAsync(domain)
                               .ContinueWith(task =>
                               {
                                   HttpResponseMessage response = task.Result;
                                   var headers = response.Headers;
                                   //Write to log file
                               }));

await Task.WhenAll(tasks); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:23:46.047

我会使用 RX 扩展。

Paul Betts 对 RX 扩展有一个很好的概述，他在今年早些时候的 NDC 会议上解决了你的问题。

视频可在[NDC 网站上找到](http://ndcoslo.oktaset.com/t-4928)

# uiimageview - 无法在 UIImageView 中更新/设置图像

> ID：13105645
> 
> 赞同：1
> 
> 时间：2012-10-28T01:27:52.273
> 
> 标签：uiimageview, ios6, uiimagepickercontroller

我正在尝试调用 UIImagePickerController 并使用它获取的信息来更新 UIImageView。我无法从信息中获取 UIImage 到 UIImageView。

```
- (void)imagePickerController:(UIImagePickerController *)picker
        didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage* originalImage = nil;
    originalImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    [myImage setImage:originalImage]; //also tried myImage.image = originalImage

    NSLog(@"originalImage: %@\n", originalImage);
    NSLog(@"userImage.image: %@\n", myImage.image);

    [self dismissViewControllerAnimated:YES completion:nil];

} 
```

当我运行此代码时， UIImageView 保持空白。我得到一个控制台输出：

```
originalImage: <UIImage: 0x80e0f90>
userImage.image: (null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:32:34.983

`myImage`为空，因此对其的任何调用都无效，应事先为其分配一些东西（`myImage = ...`或`self.myImage = ...`）

# javascript - 通过 $.ajax 方法将 JSON 循环到模板中

> ID：13105646
> 
> 赞同：0
> 
> 时间：2012-10-28T01:28:10.713
> 
> 标签：javascript, jquery, arrays, json, each

我在循环出我返回的 JSON 数据时遇到问题，看起来像这样

```
{
 "max": "12",
 "page": null,
 "total": 12,
 "items": [
    {
    "14bfa6bb14875e45bba028a21ed38046": {
        "id": "69",
        "title": "Protein Packed Meatloaf",
        "image": "nopic.jpg",
        "link": "protein-packed-meatloaf.html",
        "description": "This meatloaf is packed with protein to help your muscles grow.",
        "category": "Dinner",
        "comment_count": "0 Comments",
        "ingredient_count": 7,
        "ate_this": 0,
        "rating": "5",
        "nutritional": {
            "calories": "205.00",
            "protein": "20.55",
            "carbohydrate": "7.70",
            "fat": "9.64"
        }
    }
    }
  ]
} 
```

我的代码如下：

```
$("select,input[type=checkbox]").change(function(){ inits(); });
$("input[type=text],textarea").keystop(function(){ inits(); });

b = "form#recipeSearch";
c = $(b).attr('action') + '?r';
f = "#searchResults";

function inits(){

    console.log('Search Init');

    $.ajax({
        url: c,
        cache: false,
        dataType: 'json',
        data: $(b).serialize(),
        beforeSend: function(l) {},
        success: function(response) {

            console.log('Link: ' + c + $(b).serialize());
            //response = JSON.stringify(response);

            if (response) {
                $(f).empty();
                $.each(response, function(i,data){

                    var template = '   <div id="item-' + items.id + '" class="list-item"> '
                             + '       <a href="' + items.link + '" rel="popover" title="' + items.title + '" data-content="' + items.description + '"><img src="' + items.image + '" alt="' + items.title + '"></a>'
                             + '       <div id="title-description">'
                             + '           <h4><a href="' + items.link + '">' + items.title+ '</a></h4>'
                             + '           ' + items.rating + ' &nbsp;'
                             + '           <span class="webSymbol">,</span> Posted in <a href="' + items.category + '">' + items.category + '</a> &nbsp;'
                             + '           <span class="webSymbol">&#178;</span> ' + items.ingredient_count + ' &nbsp;'
                             + '           <span class="webSymbol">U</span> ' + items.ate_this + ' &nbsp;'
                             + '           <span class="webSymbol">c</span> ' + items.comment_count + ''
                             + '           <p id="description">' + items.description + '</p>'
                             + '       </div>'
                             + '   </div>';

                    $(f).html(template);

                });
            }
        },
        error: function(e, jqxhr, settings, exception) {
            console.log('Link: ' + c + $(b).serialize());
            console.log('Error: ' + e.toString() + ' - ' + jqxhr);
        }
    });
} 
```

现在我对如何循环出每个项目感到困惑，我总是得到未定义或错误。任何方向表示赞赏。

**我相信来自 Chrome 的堆栈跟踪是**：

```
Uncaught ReferenceError: items is not defined 
(anonymous function) min.js:521
e.extend.each jquery.min.js:2
$.ajax.success min.js:519
o jquery.min.js:2
p.fireWith jquery.min.js:2
w jquery.min.js:4
d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:37:54.110

看起来你想做这样的事情：

```
if(response.items) { // Are there items in the response?
  $.each(response.items, function(idx,item) { // For each item in the array.
    // Now you can reference things like this.
    item.id;
    item.link;
  }
}
else {
  // Log stuff. It's a good habit to start doing.
  console.log("There are no items in the response.");
} 
```

# php - 如果在 .htaccess 中如何使用

> ID：13105649
> 
> 赞同：1
> 
> 时间：2012-10-28T01:29:17.577
> 
> 标签：php, apache

我使用 .htaccess 作为友好 URL，但我遇到了问题。我的子域 store.domain.com 重定向到“/”，但默认文件是“store.php”，domain.com 重定向到“/”，默认文件是“index.php”

例如，我需要使用 if

```
<If host == 'store.domain.com'>
 store rewrite rules
<If host == 'domain.com'>
 other rewrite rules different of store
</if> 
```

我在 .htaccess 中的表现如何？？

我的 Htaccess：

```
 IndexIgnore *

Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteRule ^([a-zA-Z0-9_-]+)$ store.php?page=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ store.php?page=$1

RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?page=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?page=$1

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php?page=$1&action=$2
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?page=$1&action=$2

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ store.php?page=$1&action=$2
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ store.php?page=$1&action=$2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:44:51.613

下次在 Stack Overflow 上发布问题之前，请尝试多研究一下您的问题。对您的问题进行简单的网络搜索即可找到`RewriteCond`陈述。然后您可以参考[Apache mod_rewrite 文档](http://httpd.apache.org/docs/current/rewrite/)。

该文档将引导您获得结果，例如：

```
RewriteCond %{HTTP_HOST} ^store.example.com$
RewriteRule ^([a-zA-Z0-9_-]+)/?$ store.php?page=$1 
```

# java - 计时器将 Graphics2D 的对象移动到 JFrame 中的图像上？（日出程序示例）

> ID：13105652
> 
> 赞同：1
> 
> 时间：2012-10-28T01:30:44.423
> 
> 标签：java, swing, timer, graphics2d

我正在尝试编写一个程序来使用 Timer 和 JFrame 和 JComponent 来设计日出动画。Graphics2D 的对象是要在 JFrame 上移动的太阳。我的问题是我不确定在哪里放置 Timer 并移动 Graphicc2D！到目前为止，这是我在 JFrame 中放置图像然后将太阳放置在该图像上所做的工作。请告诉我在哪里可以设法移动太阳。我应该在哪里定义 Timer 类？在 JFrame 或 JComponent 或主类中？

```
public class Main(){

     public static void main(String[] args){

          myFrame frame = new myFrame();
     }
}

class myFrame extends JFrame
{
    public  myFrame()
    {
        Draw component = new Draw();
        add(component);
    }
}

class Draw extends JComponent
{
    public Draw()
    {
          //Read the image here
          //set the newImage
    }

    public void paintComponent(Graphics g)
    {
            Graphics2D g2 = (Graphics2D) g; 
            g2.drawImage(newImage, 0, 0, null);
            g2.fill(new Ellipse2D.Double(x,y,20,20));
            //For the sunrise I need to change x,y during the Timer class!!
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T01:42:17.547

这应该这样做：

```
int x, y;
Timer timer = new Timer(50, new ActionListener(){

    public void actionPerformed(ActionEvent evt){
        // update x and y 

        repaint();
    }
}); 
```

不要忘记启动计时器，（最好在构造函数中这样做）。

# delphi - 使用备忘录delphi保存文件>文件夹

> ID：13105660
> 
> 赞同：4
> 
> 时间：2012-10-28T01:32:54.157
> 
> 标签：delphi

我是法语，很抱歉我的语言太少了...

那么，我的项目在这里[备忘录并创建文件和文件夹？](https://stackoverflow.com/questions/13003927/memo-and-create-file-and-folder)

我的代码有问题：

```
var
  path: String;
  F: TextFile;
  i, e: Integer;
begin
  for i := 0 to Memo1.Lines.Count - 1 do
  begin
    if Length(Memo1.Lines[i]) > 0 then
    begin
      if Memo1.Lines[i][1] = '\' then // first character for file
        if Pos('.', Memo1.Lines[i]) > 0 then // confirm file
        begin
          path := extractfilepath(Edit1.Text) + Memo1.Lines[i];
          // showmessage(path);
          if not FileExists(path) then
          begin
            AssignFile(F, path);
            Rewrite(F);
            CloseFile(F);
          end;
        end;
      e := Length(Memo1.Lines[i]);
      case Memo1.Lines[i][e] of // last character for folder
        '\':
          begin
            path := extractfilepath(Edit1.Text) + Memo1.Lines[i];
            if not DirectoryExists(path) then
              ForceDirectories(path); // create folder
          end;
      end;
    end;
  end;
end; 
```

我在 Tmemo 中的结构是：

![tmemo的结构](../Images/d5efa7928d60a53177e2cd828bf81621.png)

我的坏结果：

![结果不好](../Images/d6b7411f895cb4e750572b50efed0cb8.png)

我测试第一个和最后一个字符以了解它是什么文件或文件夹，我的问题是文件保存在 currentPath 中，而不是 folder1：

目录：

```
 folder1->file1.txt 
  folder2 ->file2.txt and file2-3.txt
   etc.. 
```

你能帮我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:50:28.823

你必须先测试。
`is the token a directory`然后`isFolder:=true`。

"memo2" 只是为了更容易地创建 file.txt。（更方便）

**德尔福5**

```
implementation

{$R *.DFM}

uses FileCtrl;

procedure TForm1.FormActivate(Sender: TObject);
begin
Memo1.Text:='test.txt'#13#10'folder1\'#13#10'\file1.txt'#13#10'folder2\'#13#10'\file2.txt'#13#10'\file2-3.txt'#13#10;
Memo2.Text:='';
Edit1.Text:='F:\testdir';
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  path,aktpath,actToken: String;
  backSl : Char;
  i: Integer;
  isFolder:Boolean;
begin
backSl := #92; // This only for better reading the code in SO
isFolder:=false;
aktpath:='';actToken:='';
  for i := 0 to Memo1.Lines.Count - 1 do
  begin
    if Length(Memo1.Lines[i]) > 0 then
    begin
      actToken:=Memo1.Lines[i];
      // Folder -----------------------------------------
      if copy(actToken,length(actToken),1)= backSl then begin
      if copy(Edit1.Text,length(Edit1.Text),1)= backSl then
                  path := Edit1.Text + actToken else
                  path := Edit1.Text + backSl + actToken;
         if not DirectoryExists(path) then
              ForceDirectories(path); // create folder
      isFolder:=true;
      aktpath:=path;
      continue;
      end;
      // File   -----------------------------------------
      if copy(actToken,1,1) = backSl then // first character for file
        if Pos('.', actToken) > 0 then // confirm file
        begin
          if isFolder then path:=aktpath + actToken else
                           path:=Edit1.Text + actToken;
          path:=StringReplace(path,'\\',backSl,[rfReplaceAll]);
          if not FileExists(path) then Memo2.Lines.SaveToFile(path);
          continue;
        end;
    end;
  end;
end;

end. 
```

更新：\file1.txt:Hello to the world

```
var
[...]
actTokenTxt: String;
count: Integer;

begin
isFolder:=false;
[...]

// File   -----------------------------------------
      if copy(actToken,1,1) = backSl then // first character for file
        if Pos('.', actToken) > 0 then // confirm file
        begin
          count:=Pos(':', actToken);
          if count > 0 then begin
              actTokenTxt:=copy(actToken,1,count);
              Memo2.Text:=StringReplace(actToken,actTokenTxt,'',[]);
              actToken:=copy(actToken,1,count-1);;
          end;
          if isFolder then path:=aktpath + actToken else
                           path:=Edit1.Text + actToken;
          path:=StringReplace(path,'\\',backSl,[rfReplaceAll]);
          if not FileExists(path) then Memo2.Lines.SaveToFile(path);
          continue;
        end; 
```

**记得删除file1.txt，如果存在**
不要忘记设置`Memo2.Text:=''`，`:`否则，相同文本的所有文件！
试试看`if count > 0 then begin [...] else Memo2.Text:=''`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T03:51:12.787

```
var
  folder_path, path: String;
  F: TextFile;
  i, e, num: Integer;

begin
  for i := 0 to Memo1.Lines.Count - 1 do
  begin
    if Length(Memo1.Lines[i]) > 0 then
    begin
      e := Length(Memo1.Lines[i]);
      if Memo1.Lines[i][e] = '\' then // last character for folder
      begin
        num := StrToInt(Memo1.Lines[i][7]);
        folder_path := Copy(Memo1.Lines[i], 1, Length(Memo1.Lines[i])-1);
        path := extractfilepath(Edit1.Text) + Memo1.Lines[i];
        //showmessage(path);
        if not DirectoryExists(folder_path) then
          ForceDirectories(folder_path); // create folder
      end

      else if Memo1.Lines[i][1] = '\' then // first character for file
        if Pos('.', Memo1.Lines[i]) > 0 then // confirm file
        begin
          if (num = StrToInt(Memo1.Lines[i][6])) then
            path := extractfilepath(Edit1.Text) + folder_path + Memo1.Lines[i]
          else path := extractfilepath(Edit1.Text) + Memo1.Lines[i];
          //showmessage(path);
          if not FileExists(path) then
          begin
            AssignFile(F, path);
            Rewrite(F);
            CloseFile(F);
          end;
        end;
    end;
  end;
end; 
```

这假定`folder#`将始终是带有# = 数字的文件夹字符串。与文件类似。

# image - Android中的谷歌图像搜索问题

> ID：13105664
> 
> 赞同：3
> 
> 时间：2012-10-28T01:34:40.273
> 
> 标签：image, search, android-intent

我喜欢在我的安卓手机 (htc evo) 上执行谷歌图片搜索。我的源代码：

意图 browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://images.google.com/searchbyimage?image_url=http://www.google.com/images/srpr/logo3w.png")); 开始活动（浏览器意图）；

搜索在我的桌面上运行良好，但一直显示[http://www.google.com/wenhp?](http://www.google.com/wenhp?.......and) .......没有别的。请注意，如果执行谷歌文本搜索，它会起作用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T11:11:40.303

这里有一些不错的示例代码，您可以从中获得帮助。

Android 图片搜索[https://github.com/tonytamsf/Android-Image-Search](https://github.com/tonytamsf/Android-Image-Search)

网格图像搜索应用程序 Android [https://github.com/adi2188/gridImageSearchApp](https://github.com/adi2188/gridImageSearchApp)

我希望这能解决你的问题。

# sql - 在将月份转换为文本时对月份进行排序

> ID：13105667
> 
> 赞同：1
> 
> 时间：2012-10-28T01:35:15.490
> 
> 标签：sql, postgresql, sorting

我必须进行咨询，该咨询必须给我以下信息：

```
Month    | Quantity
-------------------
January  | XX
February | XX
...      | .. 
```

所以，我想：

```
select to_char(to_timestamp(to_char(date_part('month', orderdate), '999'), 'MM'), 'Mon'), count(*)  as quantity from orders group by 1 ORDER BY 1 
```

问题是：月份按“文本”排序我的意思是：

```
Apr
Aug
Dec
... 
```

如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T03:30:59.717

我建议[**`date_trunc()`**](https://www.postgresql.org/docs/current/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC)改为。`date`它将/截断`timestamp`为给定的单位。

有两个原因：

1.  您需要特定年份（如 2012 年）八月份的订单数量，*而不是*表中所有年份八月份的总和。`date_trunc('month', orderdate)`正是这样做的，并防止您意外混合多年。您获得多年的多行。

2.  你可以同时`ORDER BY` *和* `GROUP BY`这一个表达式，查询快一点。

```
SELECT to_char(date_trunc('month', orderdate), 'Mon') AS "Month" -- repeat expr.
      ,count(*) AS "Quantity"
FROM   orders
GROUP  BY date_trunc('month', orderdate)   -- 1 item covers it
ORDER  BY date_trunc('month', orderdate); 
```

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=d77de6fc5a402b646fab52c14c6342a0)*
[旧[sqlfiddle](http://www.sqlfiddle.com/#!17/04a8e/1)]

对于完整的月份名称，就像您的第一个示例所暗示的那样：

```
to_char(date_col, 'Month') 
```

对于非英语的本地化名称：

```
to_char(date_col, 'TMMonth') 
```

[手册中的详细信息。](https://www.postgresql.org/docs/current/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T02:24:56.590

首先，你`to_char`需要的复杂得多，就是这样：

```
to_char(orderdate, 'Mon') 
```

应该足够了。

您按您选择的第一个值进行分组和排序，这就是您的`1`意思。所以当然结果是按月份名称排序的，这就是你所要求的。相反，您希望按日期的月份部分而不是其字符串表示形式进行分组和排序。像这样的东西：

```
select to_char(orderdate, 'Mon') as "Month",
       count(*) as "Quantity"
from orders
group by extract(month from orderdate), to_char(orderdate, 'Mon')
order by extract(month from orderdate) 
```

您需要 GROUP BY 中的两个值才能使其同时与您的 SELECT 和 ORDER BY 一起使用。

# java - Oracle 对我的代码有权利吗？

> ID：13105670
> 
> 赞同：4
> 
> 时间：2012-10-28T01:36:09.680
> 
> 标签：java, oracle, licensing

我即将为一个学术研究项目编写一些软件。我希望用 Java 编写它，但与我合作的小组对许可提出了一些担忧。我最初虽然这些是愚蠢的问题，但我很难找到明确的答案：

如果我用 Java 编写软件，我可以自由发布该软件及其源代码吗？我如何获得许可有限制吗？Oracle 对它有任何权利吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T01:57:15.810

> 如果我用 Java 编写软件，我可以自由发布该软件及其源代码吗？

绝对地。

> 我如何获得许可有限制吗？

没有任何。（或者至少，不是基于它是用 Java 编写的。）

> Oracle 对它有任何权利吗？

不。

Oracle 拥有的唯一（可能）相关权利是与您分发 Java 平台的修改版本……或不当使用 Java 商标有关。

> ...但我正在与之合作的小组对许可提出了一些担忧。

可以肯定地说，提出这些担忧的人一无所知。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T01:42:15.703

没有 Oracle 对您的代码没有权利。它将是您的软件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T01:42:24.867

我不是律师；我建议你买一个来确定。

话虽如此，我认为这种担忧被夸大了。每个编写 Java 应用程序的人都没有义务将源代码交给 Oracle 或其他任何人。

这是没有意义的——如果是这样的话，Java 怎么会被如此广泛地采用呢？

# machine-learning - 先验分布在分类中重要吗？

> ID：13105673
> 
> 赞同：2
> 
> 时间：2012-10-28T01:36:33.057
> 
> 标签：machine-learning, classification

目前我遇到了两个类的分类问题。我想要做的是，给定一堆候选人，找出谁更有可能成为第 1 类。问题是第 1 类非常罕见（大约 1%），我想这使我的预测非常不准确。为了训练数据集，我可以对半类 1 和半类 0 进行采样吗？这样会改变先验分布，但不知道先验分布是否会影响分类结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:50:23.423

事实上，一个非常不平衡的数据集可能会导致分类问题。因为通过默认为多数类 0，您可以获得非常低的错误率。

有一些解决方法可能对您的特定问题有效，也可能无效，例如对两个类赋予相同的权重（因此对稀有类的实例加权更强），对稀有类进行过采样（即多次学习每个实例），产生轻微的稀有物品的变化以恢复平衡等。SMOTE等。

你真的应该拿一些**分类或机器学习的书**，并检查“不平衡分类”或“不平衡分类”的索引。如果这本书好的话，它*会*讨论这个问题。（我只是假设您不知道他们使用的术语。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:05:22.443

除非您的分类算法根据训练数据计算（并使用）先验，否则对您的两个类进行均匀抽样不会改变假设的先验。您说您的问题是“给定一堆候选人，找出谁更有可能成为第 1 类”。我读到这意味着你想确定哪个观察最有可能属于第 1 类。为此，你想选择最大化 $p(c_1|x_i)$ 的观察 $x_i$。使用贝叶斯定理，这变为：

$$ p(c_1|x_i)=\frac{p(x_i|c_1)p(c_1)}{p(x_i)} $$

您可以忽略上面等式中的 $p(c_1)$，因为它是一个常数。但是，计算分母仍将涉及使用先验概率。由于您的问题实际上更多是目标检测问题而不是分类问题，因此检测低概率目标的另一种方法是采用两个类的似然比：

$$ \Lambda=\frac{p(x_i|c_1)}{p(x_i|c_0)} $$

要选择最有可能属于第 1 类的候选人，请选择价值最高的 $\Lambda$。如果您的两个类由多元高斯分布描述，您可以将 $\Lambda$ 替换为其自然对数，从而得到更简单的二次检测器。如果您进一步假设目标和背景具有相同的协方差矩阵，则会产生线性判别式 (http://en.wikipedia.org/wiki/Linear_discriminant_analysis)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:23:45.183

您可能需要考虑贝叶斯效用理论来重新加权不同类型错误的成本，以摆脱先验支配决策的问题。

令 A 为 99% 的先验概率类别，B 为 1% 的类别。

如果我们只是说所有错误都会产生相同的成本（负效用），那么最优决策方法可能总是声明为“A”。许多分类算法（隐含地）假设这一点。

相反，如果我们声明当实例实际上是“A”时声明“B”的成本远大于相反错误的成本，那么决策逻辑在某种意义上变得对更细微的差异更敏感在特征中。

这种情况经常出现在故障检测中——被监控系统中的故障很少见，但你要确定如果我们看到任何指向错误情况的数据，需要采取措施（即使它是只是查看数据）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T09:59:27.553

如果你被迫从一个组中选择一个，那么类的先验分布就无关紧要了，因为它对于该组的所有成员都是恒定的。如果您必须依次查看每个并就它们是一类还是二类做出独立决定，则先验可能会改变决定，具体取决于您选择进行分类的方法。我建议您尽可能多地获取稀有类的示例，但请注意，在盲目训练时将 50-50 拆分提供给分类器可能会使其隐式拟合假设这是测试时分布的模型。

# doctrine - 在 Doctrine2.x 中自动反转关系

> ID：13105675
> 
> 赞同：0
> 
> 时间：2012-10-28T01:36:51.327
> 
> 标签：doctrine, doctrine-orm

在 Doctrine 1.2 中，您曾经能够通过仅在拥有方定义集合来自动在关系的另一方定义集合。对方不需要知道与之相关的类。

是否可以在 Doctrine 2.x 中执行此操作而无需在拥有方创建变量和映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:59:28.763

虽然它可能是允许的，但我不会那样做。举个例子：

1）类别有很多产品。因此，您获取最畅销产品的页面并显示其类别名称；您必须在产品方面具有这种关系。

2）假设只有在没有产品的情况下才能删除类别。所以你会有一个方法：

```
public function isDeletable()
{
  return count($this->getProducts())==0 ;
} 
```

我确信可以做出更好的例子，我只是让它变得又快又脏。我的建议是总是把两边都放在一边，因为你永远不知道它什么时候会派上用场，而且它也会使你的实体保持一致。

# android - 如何使用 OpenGL ES 2 从相机获取灰色预览

> ID：13105678
> 
> 赞同：1
> 
> 时间：2012-10-28T01:37:37.517
> 
> 标签：android, opengl-es

我是 OpenGL ES 2 的新手。我想我需要在相机的 previewCallback 中添加一些逻辑，但我不知道该怎么做。我需要的是黑白预览。如果你能提供一个例子，那就太好了。我阅读了android doc，但仍然不知道，请帮忙。[http://developer.android.com/guide/topics/graphics/opengl.html](http://developer.android.com/guide/topics/graphics/opengl.html)

```
camera.setPreviewCallback(new PreviewCallback() {
    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
//do something here
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:13:00.723

数据格式一般为yuv420sp，前1/2长度的数据为Y数据，可以作为你的灰度数据。

# python - getkey / getchar 没有终端窗口

> ID：13105681
> 
> 赞同：0
> 
> 时间：2012-10-28T01:38:25.687
> 
> 标签：python, linux

我想要一个从键盘读取键的 getkey / getchar 函数。警告，该程序不在终端窗口中运行，而是通过 linux 的快捷方式执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:20:41.250

您可以使用 Tkinter 弹出一个窗口，并对 KeyPress 事件做出反应：

```
import Tkinter as tk
class App(object):
    def __init__(self, master, **kwargs):
        self.master = master
        master.geometry('200x200+0+0')
        master.bind('<KeyPress>', self.react_to_keypress)
    def react_to_keypress(self, event):
        print(event.char)  # change this; since there will be no terminal
        self.master.quit()

root = tk.Tk()
app = App(root)

root.mainloop() 
```

# python - 递归或迭代函数 (Python)

> ID：13105683
> 
> 赞同：1
> 
> 时间：2012-10-28T01:38:51.667
> 
> 标签：python, function, recursion, iteration

我无法确定以下函数是迭代的还是递归的，

我认为它是递归的，因为它会重复自己，但由于它有一个 while 循环，我有疑问，

```
def function(n):
    while((n!=1) and (n!=0)):
        return function(n-1) + function(n-2)
    return n 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T01:41:58.867

它自称是递归的。递归（就是一个词）并不意味着不允许“标准”迭代。

顺便说一句。在您的情况下，没有进一步的迭代。while 循环本质上与简单的 if 语句相同，因为您在第一个循环中立即返回。所以你可以这样写：

```
def function(n):
    if (n != 1) and (n != 0):
        return function(n - 1) + function(n - 2)
    return n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T01:51:52.067

一个函数可以有一个循环并且是递归的。如果函数调用自身，则称为递归函数，但请注意，函数不一定需要调用自身才能被视为递归，请看以下示例：

```
def even(n):
    return True if n == 0 else odd(n - 1)

def odd(n):
    return False if n == 0 else even(n - 1)

even(10)
> True
odd(10)
> False 
```

上述函数是“相互递归的”。

# image - PyroCMS 2.0 - 启用模块会使所有图像消失

> ID：13105688
> 
> 赞同：0
> 
> 时间：2012-10-28T01:40:08.213
> 
> 标签：image, module, pyrocms

当我启用我的自定义模块时，所有图像（标签内）都会消失。它只发生在我的一些定制模块上。

我之前遇到过类似的问题（不确定是否完全相同），模块非常小且简单。最终，我开始在刷新页面时将该模块中每个文件的编码从 ANSI 更改为记事本 ++ 中的 UTF-8。在某些时候，图像开始出现。

这个模块现在有 400 个文件，我不想改变每一个文件来最终看到图像。

路径是正确的。

有没有人遇到过类似的问题？

PyroCMS 版本是 2.0 RC，它是多站点版本。

# c# - 更改 Windows 8 锁屏背景？

> ID：13105690
> 
> 赞同：2
> 
> 时间：2012-10-28T01:41:00.120
> 
> 标签：c#, windows-8

我想通过 c# 代码更改 Windows 8 锁屏背景图像。

我非常熟悉如何在 Windows 7 中执行此操作，而且 Windows 8 不支持此方法。

我尝试使用 Process Monitor，同时通过 SystemSettings.exe 一遍又一遍地更改它，但对我来说没有什么特别突出的。

这似乎是唯一的讨论：http: [//social.technet.microsoft.com/Forums/en-US/W8ITProPreRel/thread/a8db890c-204f-404a-bf74-3aa4c895b183](http://social.technet.microsoft.com/Forums/en-US/W8ITProPreRel/thread/a8db890c-204f-404a-bf74-3aa4c895b183)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T01:44:08.173

看一下 -[锁屏个性化示例](http://code.msdn.microsoft.com/windowsapps/Personalization-App-sample-9ebfe147)（如何使用`LockScreen API`设置当前用户的锁屏图像）。也许对你有用。

# maven - 如何使用maven纠正Tomcat7中的部署错误？

> ID：13105692
> 
> 赞同：0
> 
> 时间：2012-10-28T01:41:40.657
> 
> 标签：maven, tomcat7, maven-cargo

我在开发中使用了 Tomcat 7 和 JDK 7。当我`clean package cargo:redeploy`在 Juno Eclipse 中执行这个 maven 目标时，它会显示这个错误。希望能从你那里看到一些线索。

```
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] Failure executing javac, but could not parse the error:
javac: -endorseddirs requires an argument
Usage: javac <options> <source files>
use -help for a list of possible options

[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.717s
[INFO] Finished at: Sun Oct 28 09:25:37 MYT 2012
[INFO] Final Memory: 12M/149M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project Web2: Compilation failure
[ERROR] Failure executing javac, but could not parse the error:
[ERROR] javac: -endorseddirs requires an argument
[ERROR] Usage: javac <options> <source files>
[ERROR] use -help for a list of possible options
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

这是我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.huahsin68.web2</groupId>
  <artifactId>Web2</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>Web2 Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring</artifactId>
        <version>2.5.6</version>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.0.9</version>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.0.9</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>el-impl</artifactId>
        <version>2.2</version>
    </dependency>
  </dependencies>
  <build>
    <finalName>Web2</finalName>
    <plugins>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.codehaus.cargo</groupId>
            <artifactId>cargo-maven2-plugin</artifactId>
            <configuration>
                <container>
                    <containerId>tomcat7x</containerId>
                    <type>remote</type>
                </container>
                <configuration>
                    <type>runtime</type>
                    <properties>
                        <cargo.remote.username>${tomcat.username}</cargo.remote.username>
                        <cargo.remote.password>${tomcat.password}</cargo.remote.password>
                    </properties>
                </configuration>
            </configuration>
        </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:07:21.973

您正在将此配置用于 maven 编译器插件：

```
<compilerArguments>
  <endorseddirs>${endorsed.dir}</endorseddirs>
</compilerArguments> 
```

但似乎您没有在`${endorsed.dir}`任何地方设置变量。`-endorseddirs`所以Maven在java命令行中添加了一个空参数。

因此，您应该`compilerArguments`从插件配置中删除条目或正确设置变量。

# asp.net - IIS 应用程序路径更改导致意外行为

> ID：13105695
> 
> 赞同：0
> 
> 时间：2012-10-28T01:42:02.490
> 
> 标签：asp.net, iis

我有一个应用程序 (app1) 表现出奇怪的行为，[在此处](https://stackoverflow.com/questions/13105293/infragistics-exception)进行了描述。我在 IIS 中创建了另一个与 app1 具有相同路径的应用程序 (app2)。它“工作”，因为它没有抛出基础错误，但是由于“无效参数”而无法加载某些资源，而且它无法加载 jQuery。

我做了一个测试，因为我很好奇。我将另一个现有应用程序的路径 (app3) 修改为路径 app1。它就像 app2 一样“工作”，但存在无法识别资源和无法识别 jQuery 的问题。

这种行为的原因是什么？如何修复我的应用程序？有没有解决这个问题的方法，还是我应该把头发拔掉？

预先感谢您的任何帮助，

最好的祝福，

拉霍斯阿尔帕德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:57:52.547

带有 ASP.NET 的 IIS 使用临时文件夹为未编译的代码/aspx 文件/任何东西编译 dll。严格来说，IIS 不会在这里做任何事情。它（可能）是 asp.net 工作进程调用所有必要的编译器等的工作，但不要引用我的话。

当您访问新应用程序时，除非它是完全预编译的，否则可能需要根据需要编译一堆代码。很少，这个过程会搞砸。

如果您的网站使用 NuGET 来获取更新的 dll，就像至少一个或多个开源 CMS 所做的那样，我发现，这可能也必须处理，尽管据我所知，这些只是被下载到应用程序的`bin`文件夹. 有时，如果您移动文件，该过程也会中断。

因此，可能会发生各种可能会中断的事情，而您获得的异常可能是最通用的异常之一。如果没有堆栈跟踪，它不太可能有帮助。

通过这个问题（[无法加载文件或程序集 App_Licenses](https://stackoverflow.com/questions/3831287/could-not-load-file-or-assembly-app-licenses)），解决这两个问题的方法可能只是删除临时文件，尽管投票最多的解决方案（截至 2012 年 10 月 27 日）有点极端：您应该只需要删除您关注的应用程序的临时文件，而不是每个应用程序的每个临时文件。清理和重建您的应用程序也可能有效，只需重新启动与网站关联的 AppPool。

# .net - 使用 cc.net 和 MS Build 安装 windows 服务

> ID：13105696
> 
> 赞同：1
> 
> 时间：2012-10-28T01:42:04.167
> 
> 标签：.net, msbuild, windows-services, cruisecontrol.net

我正在使用 cc.net 和 MS build 来构建我的客户端和 Win 服务项目。
这就是服务的构建方式，其中：
**是否可以将其自动安装为 Windows 服务？**

```
 <msbuild>
        <executable>C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
        <workingDirectory>C:\CCBuild\Git\Dev\Services\ServiceSetup</workingDirectory>
        <projectFile>ServiceSetup.wixproj</projectFile>
        <buildArgs>/p:Configuration=Release /p:Platform=x86 /v:diag</buildArgs>
        <targets>Clean;Build</targets>
        <timeout>480</timeout>
        <logger>C:\Program Files\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
      </msbuild> 
```

和客户端：
**是否只有安装并成功启动上述服务才能运行集成测试？**

```
 <msbuild>
        <executable>C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
        <workingDirectory>C:\CCBuild\Git\Dev\LocalClient\ClientSetup</workingDirectory>
        <projectFile>ClientSetup.wixproj</projectFile>
        <buildArgs>/p:Configuration=Release /p:Platform=x86 /v:diag</buildArgs>
        <targets>Clean;Build</targets>
        <timeout>480</timeout>
        <logger>C:\Program Files\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
      </msbuild>
      <exec>
        <executable>C:\Program Files\Gallio\bin\Gallio.Echo.exe</executable>
        <buildArgs>/rnf:report2\test-report /rt:Xml-Inline /v:Quiet C:\CCBuild\Git\Dev\LocalClient\Client.IntegrationTests\bin\x86\Debug\Client.IntegrationTests.dll</buildArgs>
        <description>Client Tests</description>
      </exec> 
```

请用示例代码解释，因为 cc.net 和 MsBuild 对我来说是新的。
谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T09:08:23.117

1：
我建议手动安装服务。然后让巡航控制停止然后启动服务。否则，您需要在尝试之前确定该服务是否已安装。

您可以添加一个可执行任务，您可以调用`net stop servicename`它来停止服务。然后 msbuild 之后的另一个任务再次启动它（使用`net start servicename`）。

`net.exe`是一个股票 Windows 控制台应用程序，所以它位于`c:\windows\system32`

2：
如果上述任务失败（即停止/构建/启动失败），则不会执行以下测试任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:00:28.210

对于 Windows 服务的安装，您可以使用命令行和[Installutil](http://msdn.microsoft.com/en-us/library/50614e95%28v=vs.100%29.aspx)，或者 - 如果您喜欢它更方便一点 - 您可以编写一个 MSBuild 脚本并使用[MSBuild.ExtensionPack 中的 WindowsService 任务](http://www.msbuildextensionpack.com/help/4.0.5.0/html/258a18b7-2cf7-330b-e6fe-8bc45db381b9.htm)。

如果您将 CCNET 服务器配置为按顺序执行任务，则只有在前面的任务成功时才会执行 Gallio 任务。

```
<tasks>
  <!-- 1st... -->
  <msbuild>
    <!-- build server -->
  </msbuild>
  <!-- either... -->
  <exec>
    <!-- execute Installutil -->
    <executable>cmd.exe</executable>
    <buildArgs>/C C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe YourAssembly</buildArgs>
  </exec>
  <!-- or... -->
  <msbuild>
    <!-- execute WindowsService MSBuild script -->
  </msbuild>
  <!-- then... -->
  <msbuild>
    <!-- build client -->
  </msbuild>
  <!-- finally... -->
  <exec>
    <!-- execute Gallio -->
  </exec>
</tasks> 
```

这就是它应该如何与一个简单的 Windows 服务一起工作。我对您的服务设置 WiX 项目的输出有点不确定。如果它产生了一些花哨的 ServiceSetup.msi，包括[ServiceInstall](http://wix.sourceforge.net/manual-wix3/wix_xsd_serviceinstall.htm)，那么您应该自己最清楚要传递哪些参数。

# javascript - 启用/禁用字段的单选按钮

> ID：13105700
> 
> 赞同：0
> 
> 时间：2012-10-28T01:42:19.153
> 
> 标签：javascript, jquery, jquery-selectors

我有一个带有几组单选按钮的表单。选择一个单选按钮将启用该`text`字段并禁用其余字段。我无法启用该字段。我已经尝试了几乎所有功能（next、nextAll、nextUnit、find、findAll、closest ...），但可能没有正确使用它们。

这是一个只有一组按钮的测试：http: [//jsfiddle.net/QTseK/](http://jsfiddle.net/QTseK/)

同样在页面加载时，一些单选按钮已经被选中，我必须运行什么才能禁用其余的（未选中的字段）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:48:30.163

由于您的元素具有类属性，您可以使用类选择器选择它们，启用/禁用表单元素，您可以使用该`prop`方法。

```
$("body").on("click", "input[type='radio']", function() {
    $('.fieldSelector').prop('disabled', true);
    $(this).closest('tr').find('.fieldSelector').prop('disabled', false)
}); 
```

[http://jsfiddle.net/AfRdj/](http://jsfiddle.net/AfRdj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:51:05.857

[jsFiddle](http://jsfiddle.net/TheJoeFletch/QTseK/1/)

```
$("body").on("click", "input[type=radio]", function() {
   $(this).closest("table").find("input[type=text]").prop("disabled", true);
    $(this).closest("tr").find("input[type=text]").prop("disabled", false);

});​ 
```

您可以根据您的 HTML 添加/修改选择器。

此外，我不确定是否会将事件侦听器放在主体上。如果元素在整个页面生命周期中都在 DOM 中，我认为我更喜欢这样的东西。（最初是页面上的问题元素吗？）

```
$("input[type=radio]").on("click", function() {//you can change input[type=radio] to any other selector that you have already used
   $(this).closest("table").find("input[type=text]").prop("disabled", true);
    $(this).closest("tr").find("input[type=text]").prop("disabled", false);

});​ 
```

# ios - 可以在没有 Apple Developer 帐户的情况下通过 XCode 构建 iOS 应用程序吗？

> ID：13105704
> 
> 赞同：1
> 
> 时间：2012-10-28T01:43:16.717
> 
> 标签：ios, xcode

我想构建一些 iOS 应用程序（在 XCode 上），但不会在 Apple App Store 上提交它们。我将把它们提交到像 Cydia 这样的其他移动商店。我可以在没有 Apple 开发者帐户的情况下在 Xcode 中构建应用程序（无需配置、无需认证……）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:45:37.887

是的，当然可以。您只需要开发者帐户即可部署到 App Store 并在未越狱的设备上运行。

# php - 使用 PHP $_get 将 iFrame 内的内容居中

> ID：13105706
> 
> 赞同：1
> 
> 时间：2012-10-28T01:43:34.800
> 
> 标签：php, iframe, get, center

*有谁知道如何将 iFrame 内的内容居中？我在想用 Javascript 和 innerHTML 做点什么，但我想不通。任何帮助表示赞赏:) 即使将 iFrame 的宽度设置为与内容的宽度相匹配（可能像 jpg url 或其他东西）也会很棒，因为这样我就可以在页面的正确宽度时将 iFrame 居中它正在显示的页面。*

* * *

编辑：我想出了如何让这部分工作（使用我在谷歌上找到的代码），但问题是当我尝试在 PHP 中（使用 _get）它停止工作时......例如制作一个名为 test 的 php 文件.php

这是php文档的代码：

```
<?php
print '<title>blah blah blah</title><body bgcolor="#505050"><br />
<script type="text/javascript">document.domain="' . htmlspecialchars($_GET["image"]) .  '";</script> <SCRIPT LANGUAGE=\'javascript\'> 
function resize_iframe(){ 
document.getElementById(\'textoforo\').height=100; 
document.getElementById(\'textoforo\').height=window.frames["textoforo"].document.body.scrollHeight; 
document.getElementById(\'textoforo\').width=100; 
document.getElementById(\'textoforo\').width=window.frames["textoforo"].document.body.scrollWidth; 
}
</SCRIPT><div style="z-index:99; position:absolute; top:0; left:0; width:100%; height:100%; background-color:#505050;"><table style="vertical-align:middle; text-align:center; height:90%; width:100%; background-color:#FFF"><center><td style="vertical-align:middle; height:100%;"><center><iframe id=\'textoforo\' 
name=\'textoforo\' 
border=1 
src=\'' . htmlspecialchars($_GET["image"]) . '\' 
width=768 
height=800 
MARGINWIDTH=0 
MARGINHEIGHT=0 
onload=\'resize_iframe();\' 
> 
</iframe></center></td></center></table></center></div></body>';
?> 
```

并转到网址：

“//test.php?image=http://www.all2need.com/wp-content/uploads/2012/04/African-Daisy-Flower.jpg”

当您加载页面时它不起作用，但是如果您复制源代码并将其粘贴到 html 文档中，它确实有效！！！！！！！？？？所以我认为javascript试图在PHP输入图像URL（使用_Get）之前检索高度和宽度变量，因此它返回零值？不知道……有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:17:41.310

你正在寻找一种`DOM-Ready`方法。您可以自己编写一个，但如果您没有大量的 javascript 经验，您可能需要考虑使用 Javascript 框架来为您处理。

这些应该可以帮助您确定何时开始调整大小/重新定位脚本。

*   [http://api.jquery.com/ready/](http://api.jquery.com/ready/)
*   [http://mootools.net/docs/core/Utilities/DOMReady](http://mootools.net/docs/core/Utilities/DOMReady)

    **jQuery**示例：

    ```
     $(document).ready(function() {
       /* Your logic here */
     }); 
    ```

    这相当于调用：

    ```
     $(function() {
       /* Your logic here */
     }); 
    ```

    **MooTools**示例：

    ```
    window.addEvent('domready', function() {
      /* Your logic here */
    }); 
    ```

就个人而言：jQuery 社会有点大，支持更好，所以你可能想要使用更常用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:28:54.773

将图像直接加载到 an 中的问题`iframe`是它在 HTML 中没有样式或任何`DOM`可以操作的适当位置。它只会按原样显示图像。因此，解决方案是将 iframe 调整为内容大小（每个浏览器不同），然后将 iframe 居中。

我看不出，PHP 适合所有这些。

也许这是一个不错的选择： http: [//fancybox.net/](http://fancybox.net/)（查看底部的示例）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T11:37:46.880

您应该弄清楚目标网址是否是图像。如果是图片使用这种方式设置 iframe 的尺寸：

```
list ($width, $height) = getimagesize(htmlspecialchars($_GET["image"])); 
```

然后就可以直接给iframe设置宽高了。

如果它不是图像使用这种方式：

```
 <?php
print '<title>blah blah blah</title><body bgcolor="#505050">
<script type="text/javascript">
function getDocHeight() {
    var D = document.getElementById("textoforo").document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}
function getDocWidth() {
    var D = document.getElementById("textoforo").document;
    return Math.max(
        Math.max(D.body.scrollWidth, D.documentElement.scrollWidth),
        Math.max(D.body.offsetWidth, D.documentElement.offsetWidth),
        Math.max(D.body.clientWidth, D.documentElement.clientWidth)
    );
}
function resize_iframe()
{ 
    /*
    Use getDocHeight and getDocWidth to set the dimensions
    */
}
</SCRIPT>
<style type="text/css">
html,body
{
    margin:0px;
    padding:0px;
    width:100%;
    height:100%;
}
</style>
<div style="z-index:99; position:absolute; top:0; left:0; width:100%; height:100%; background-color:#FF00FF;">
<iframe id="textoforo" 
name="textoforo" 
border="1" 
src="' . htmlspecialchars($_GET["image"]) . '"
MARGINWIDTH="0" 
MARGINHEIGHT="0" 
onload="resize_iframe();"> 
</iframe>
</div>
</body>';
?> 
```

尽管如此，我仍然无法理解您的问题及其用途。

编辑： Onload 事件对我来说是正确的（FF，IE）。您使用哪个浏览器？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T15:04:29.107

iframe 的内容只是一个单独的 html 文档。您可以使用 php 文件，但无需将所有内容放在 php 标记之间并打印（使用“echo”）所有 html 代码。使其成为带有`<head>, <html> and <body>`标签的适当页面。如果要设置 iframe 内容的样式，则可以加载外部 css 文件。

iframe 本身是它所在的主 html 页面的一部分。您在 iframe 中执行的 Javascript 只会影响该 iframe 内的元素。要解决这个问题，您可以将 javascript 放在主页中，并在 iframe 中使用

```
parent.yourfunction(); 
```

如果您只想在页面上放置图像，为什么要使用 iframe？使用`<div>`带有内部图像的 a 并为其设置样式。

# java - 如何在java中禁用证书验证

> ID：13105707
> 
> 赞同：3
> 
> 时间：2012-10-28T01:43:42.850
> 
> 标签：java, ssl, network-programming, certificate, ssl-certificate

我只需要禁用 Java 证书验证以进行测试。所以我理解风险。我使用了以下教程：[http ://www.rgagnon.com/javadetails/java-fix-certificate-problem-in-HTTPS.html](http://www.rgagnon.com/javadetails/java-fix-certificate-problem-in-HTTPS.html)

所以代码是：

```
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.URL;
import java.net.URLConnection;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;
import java.security.cert.X509Certificate;

public class Cert {
  public static void main(String[] args) throws Exception {
    /*
     *  fix for
     *    Exception in thread "main" javax.net.ssl.SSLHandshakeException:
     *       sun.security.validator.ValidatorException:
     *           PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:
     *               unable to find valid certification path to requested target
     */
    TrustManager[] trustAllCerts = new TrustManager[] {
       new X509TrustManager() {
          public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return null;
          }

          public void checkClientTrusted(X509Certificate[] certs, String authType) {  }

          public void checkServerTrusted(X509Certificate[] certs, String authType) {  }

       }
    };

    SSLContext sc = SSLContext.getInstance("SSL");
    sc.init(null, trustAllCerts, new java.security.SecureRandom());
    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

    // Create all-trusting host name verifier
    HostnameVerifier allHostsValid = new HostnameVerifier() {
        public boolean verify(String hostname, SSLSession session) {
          return true;
        }
    };
    // Install the all-trusting host verifier
    HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);
    /*
     * end of the fix
     */

    URL url = new URL("https://www.nakov.com:2083/");
    URLConnection con = url.openConnection();
    Reader reader = new InputStreamReader(con.getInputStream());
    while (true) {
      int ch = reader.read();
      if (ch==-1) {
        break;
      }
      System.out.print((char)ch);
    }
      }
    } 
```

我仍然收到以下错误。任何身体都可以帮忙吗？

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code: 401 for URL: https://www.nakov.com:2083/
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1615)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
    at MainProject.Cert.main(Cert.java:56) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T02:04:26.530

“修复”和异常似乎无关：修复禁用客户端验证服务器证书，而异常表明服务器认为客户端无权访问该 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T02:29:09.770

这不会解决问题。401 是通过 HTTPS 和 SSL 传输的，因此证书运行良好。

无论如何，我强烈建议您不要这样做。您不希望在测试和生产中执行不同的代码。测试代码很有可能会泄漏到生产环境中并危及安全性。测试不安全的代码是没有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T01:57:09.147

不要费心在您的代码中禁用它，您只需将证书添加到您的测试机器信任库，并 100% 确保您不会在禁用检查的情况下发布构建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T10:41:18.767

正如其他人所提到的，错误 401 意味着您确实建立了 SSL 连接，发送了您的请求并被返回了这个 401 错误。所以你的 SSL 代码很好。

当您在浏览器中打开此页面时，您是否收到用户名/密码提示？也许自动登录？如果是这种情况，我会说您的代码缺少此基本身份验证或类似内容。

# c - 查找 UDP 数据包的源 IP/进程

> ID：13105713
> 
> 赞同：3
> 
> 时间：2012-10-28T01:44:12.707
> 
> 标签：c, sockets, udp

我`recvfrom()`在我的 C 程序中使用从多个客户端接收 UDP 数据包，这些客户端可以使用自定义用户名登录。一旦他们登录，我希望他们的用户名与唯一的客户端进程配对，以便服务器通过数据包的来源自动知道用户是谁。如何从我收到的数据包中获取此信息`recvfrom()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:59:05.657

```
#include <iostream>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <cstring>

int main()
{
  int sock = socket(AF_INET, SOCK_DGRAM, 0);

  struct sockaddr_in addr;
  memset(&addr, 0, sizeof(addr));
  addr.sin_family = AF_INET;
  addr.sin_port = htons(1234);
  addr.sin_addr.s_addr = INADDR_ANY;

  bind(sock, reinterpret_cast<struct sockaddr*>(&addr), sizeof(addr));

  char message[256];
  struct sockaddr_in from;
  socklen_t fromLen = sizeof(from);
  recvfrom(sock, message, sizeof(message), 0, reinterpret_cast<struct sockaddr*>(&from), &fromLen);

  char ip[16];
  inet_ntop(AF_INET, &from.sin_addr, ip, sizeof(ip));

  std::cout << ip << ":" << ntohs(from.sin_port) << " - " << message << std::endl; 
```

# android - ActionBarSherlock 选项菜单和错误/警告：java.lang.ClassNotFoundException: res/drawable-mdpi/ic_go_search_api_holo_light.png

> ID：13105714
> 
> 赞同：4
> 
> 时间：2012-10-28T01:44:14.113
> 
> 标签：android, android-intent, android-widget, actionbarsherlock

我在我的项目中使用 ActionBarSherlock，它运行良好。但有时，我会遇到有关选项菜单的问题。当用户按下一个菜单项时，应用程序会启动另一个活动，但有时它会延迟一点，我可以多次按下菜单项，它会启动许多其他活动。

1.  我不知道是`ActionBarSherlock`问题还是 Android 操作系统在启动另一个活动时有时间延迟。

2.  当方向改变时，我会在 logcat 中看到这些日志。[我在谷歌上搜索过，但我在这里](https://groups.google.com/forum/#!msg/actionbarsherlock/YRk2O3Rckyw/UOIME4EQx5MJ)只能看到一个帖子，没有解决方案。如果您使用的是 ActionBarSherlock，您会看到这些日志吗？或者你知道为什么会这样吗？

> 10-28 08:21:36.054: W/MenuInflater(7718): java.lang.ClassNotFoundException: res/drawable-mdpi/ic_go_search_api_holo_light.png 在加载器 dalvik.system.PathClassLoader[/data/app/com.actionbarsherlock.sample。 styled-2.apk] 10-28 08:21:36.054: W/MenuInflater(7718): 在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251) 10-28 08:21:36.054: W/MenuInflater( 7718): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:540) 10-28 08:21:36.054: W/MenuInflater(7718): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:500) 10 -28 08:21:36.054: W/MenuInflater(7718): 在 com.actionbarsherlock.view.MenuInflater$MenuState.newInstance(MenuInflater.java:463) 10-28 08:21:36.054: W/MenuInflater(7718):在 com.actionbarsherlock.view.MenuInflater$MenuState.readItem(MenuInflater.java:366) 10-28 08:21：36.054: W/MenuInflater(7718): 在 com.actionbarsherlock.view.MenuInflater.parseMenu(MenuInflater.java:147) 10-28 08:21:36.054: W/MenuInflater(7718): 在 com.actionbarsherlock.view.MenuInflater .inflate(MenuInflater.java:97) 10-28 08:21:36.054: W/MenuInflater(7718): 在 com.actionbarsherlock.sample.styled.MainActivity.onCreateOptionsMenu(MainActivity.java:90) 10-28 08:21 :36.054: W/MenuInflater(7718): at android.support.v4.app._ActionBarSherlockTrojanHorse.onCreatePanelMenu(_ActionBarSherlockTrojanHorse.java:45) 10-28 08:21:36.054: W/MenuInflater(7718): at com.actionbarsherlock。 ActionBarSherlock.callbackCreateOptionsMenu(ActionBarSherlock.java:556) 10-28 08:21:36.054: W/MenuInflater(7718): at com.actionbarsherlock.internal.ActionBarSherlockCompat.preparePanel(ActionBarSherlockCompat.java:483) 10-28 08:21:36.054: W/MenuInflater(7718): 在 com.actionbarsherlock.internal.ActionBarSherlockCompat.dispatchInvalidateOptionsMenu(ActionBarSherlockCompat.java:273) 10-28 08:21:36.054: W/MenuInflater(7718) : 在 com.actionbarsherlock.internal.ActionBarSherlockCompat$1.run(ActionBarSherlockCompat.java:988) 10-28 08:21:36.054: W/MenuInflater(7718): 在 android.os.Handler.handleCallback(Handler.java:587) 10-28 08:21:36.054: W/MenuInflater(7718): 在 android.os.Handler.dispatchMessage(Handler.java:92) 10-28 08:21:36.054: W/MenuInflater(7718): 在 android. os.Looper.loop(Looper.java:132) 10-28 08:21:36.054: W/MenuInflater(7718): 在 android.app.ActivityThread.main(ActivityThread.java:4137) 10-28 08:21: 36.054：W/MenuInflater(7718)：在 java.lang.reflect.Method。invokeNative（本机方法）10-28 08:21:36.054：W/MenuInflater（7718）：在 java.lang.reflect.Method.invoke（Method.java:491）10-28 08:21:36.054：W/MenuInflater (7718): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 10-28 08:21:36.054: W/MenuInflater(7718): 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:618) 10-28 08:21:36.054: W/MenuInflater(7718): at dalvik.system.NativeStart.main(Native Method) 10-28 08:21:36.054: W/dalvikvm （7718）：dvmFindClassByName 拒绝“res/drawable-mdpi/ic_go_search_api_holo_light.png”10-28 08:21:36.054：W/MenuInflater（7718）：无法实例化类：res/drawable-mdpi/ic_go_search_api_holo_light.png 10-28 08 ：21：36.054：W / MenuInflater（7718）：java.lang.ClassNotFoundException：res/drawable-mdpi/ic_go_search_api_holo_light.png 在加载器 dalvik.system.PathClassLoader[/data/app/com.actionbarsherlock.sample.styled-2.apk] 10-28 08:21:36.054: W/MenuInflater(7718):在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251) 10-28 08:21:36.054: W/MenuInflater(7718): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:540) 10-28 08 :21:36.054: W/MenuInflater(7718): at java.lang.ClassLoader.loadClass(ClassLoader.java:500) 10-28 08:21:36.054: W/MenuInflater(7718): at com.actionbarsherlock.view。 MenuInflater$MenuState.newInstance(MenuInflater.java:463) 10-28 08:21:36.054: W/MenuInflater(7718): at com.actionbarsherlock.view.MenuInflater$MenuState.readItem(MenuInflater.java:366) 10-28 08:21:36.054：W/MenuInflater(7718)：在 com.actionbarsherlock.view.MenuInflater。parseMenu(MenuInflater.java:147) 10-28 08:21:36.054: W/MenuInflater(7718): 在 com.actionbarsherlock.view.MenuInflater.inflate(MenuInflater.java:97) 10-28 08:21:36.054: W/MenuInflater(7718): 在 com.actionbarsherlock.sample.styled.MainActivity.onCreateOptionsMenu(MainActivity.java:90) 10-28 08:21:36.054: W/MenuInflater(7718): 在 android.support.v4.app ._ActionBarSherlockTrojanHorse.onCreatePanelMenu(_ActionBarSherlockTrojanHorse.java:45) 10-28 08:21:36.054: W/MenuInflater(7718): at com.actionbarsherlock.ActionBarSherlock.callbackCreateOptionsMenu(ActionBarSherlock.java:556) 10-28 08:21: : W/MenuInflater(7718): 在 com.actionbarsherlock.internal.ActionBarSherlockCompat.preparePanel(ActionBarSherlockCompat.java:483) 10-28 08:21:36.054: W/MenuInflater(7718): 在 com.actionbarsherlock。internal.ActionBarSherlockCompat.dispatchInvalidateOptionsMenu(ActionBarSherlockCompat.java:273) 10-28 08:21:36.054: W/MenuInflater(7718): at com.actionbarsherlock.internal.ActionBarSherlockCompat$1.run(ActionBarSherlockCompat.java:988) 10-28 08 :21:36.054: W/MenuInflater(7718): 在 android.os.Handler.handleCallback(Handler.java:587) 10-28 08:21:36.054: W/MenuInflater(7718): 在 android.os.Handler。 dispatchMessage(Handler.java:92) 10-28 08:21:36.054: W/MenuInflater(7718): 在 android.os.Looper.loop(Looper.java:132) 10-28 08:21:36.054: W/ MenuInflater(7718): 在 android.app.ActivityThread.main(ActivityThread.java:4137) 10-28 08:21:36.054: W/MenuInflater(7718): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-28 08:21:36.054: W/MenuInflater(7718): 在 java.lang.reflect.Method。调用（Method.java:491）10-28 08:21:36.054：W/MenuInflater（7718）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:860）10-28 08： 21:36.054: W/MenuInflater(7718): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 10-28 08:21:36.054: W/MenuInflater(7718): 在 dalvik.system .NativeStart.main（本机方法）

请帮助我，对不起，因为我的英语不是很好。

# c - 检查和编译跨多个目录的更改依赖项？

> ID：13105715
> 
> 赞同：1
> 
> 时间：2012-10-28T01:44:31.053
> 
> 标签：c, makefile, gnu-make

我正在制作一个编译位于多个目录中的程序的makefile。所有源文件都在 /src 中，头文件在 /inc 中，目标文件将在 /obj 中创建，而可执行文件将在 /bin 中创建。makefile 共有三个，一个整体，一个在 /obj 目录，一个在 /bin 目录。obj makefile 创建目标文件，bin makefile 链接文件创建可执行文件。我不应该对值进行硬编码，因为这个 makefile 需要尽可能通用，这包括硬编码文件和目录名称。

下面的代码是创建目标文件的生成文件。它会创建目标文件，但不会正确检查依赖关系，因此当我更新一个文件时，它将重新创建所有目标文件。我一直在阅读 GNU Makefile 手册，但仍然不明白出了什么问题。

```
CC:= gcc
CCFLAGS:= -MMD -g -Wall
INCLUDE:= -I "../inc"
LDFLAGS:= -lcurses -lgdbm -lncurses -lgdbm_compat
SRC:= ../src

SOURCES:= $(wildcard $(SRC)/*.c)
OBJS:=$(patsubst $(SRC)/%.c,%.o,$(SOURCES))

all: $(OBJS)

$(OBJS): $(SOURCES)
    $(CC) $(CCFLAGS) $(INCLUDE) -c $^

VPATH= ../$(PROG)
$(SOURCES): 
    $(CC) $(CC_FLAGS) $(INCLUDE) -c $<

.PHONY: clean

clean:
    rm -f *.[od]  *.o

-include *.d 
```

如果需要，我可以发布另外两个 makefile。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:58:20.007

在您的`$(OBJS)`规则中，*每个*目标文件都依赖于*所有*源文件，因此当您修改一个源文件时，Make 会重建所有对象。尝试这个：

```
$(OBJS): %.o : $(SRC)/%.c
    $(CC) $(CCFLAGS) $(INCLUDE) -c $< 
```

# c# - 通过并行运行 foreach 循环以构建结果列表

> ID：13105726
> 
> 赞同：2
> 
> 时间：2012-10-28T01:47:17.263
> 
> 标签：c#, multithreading, parallel-processing

我从 tblCustomer 循环数据并检查地址是否有效。如果没有，那么我将其添加到我的退货清单中。问题是，有 37000 行需要验证。验证是通过外部库完成的。大约需要1小时。我想做这个线程，所以我可以做得更快。有人可以帮我重写吗？此外，我在某处阅读以将其包装在并行类 for 或 foreach 中。我想知道的几件事-

1.  它将创建多少个线程？我们怎么能控制它？

2.  我们能说每个线程将处理多少条记录吗？

3.  我认为最重要的问题是：这个 dll 有静态类，可以验证地址。当我将其拆分为线程时，它会给我带来任何性能提升……还是需要同样的时间？

* * *

```
 List<tblCustomer> customers = new List<tblCustomer>();
            int i = 0;
            foreach (var customer in DataContext.tblCustomers)
            {
                string addressToValidate = string.Format("{0}, {1}; {2} {3}", GetSafeString(customer.MailingCity), GetSafeString(customer.MailingState), GetSafeString(customer.MailingAddress), GetSafeString(customer.MailingAddress2));
                isTripValid = PCM.PCMSAddStop(tripId, addressToValidate.Trim()) == 1;
                if (!isTripValid)
                { 
                    customers.Add(customer);
                }
                i++;
                if (i == 1000)
                {
                    PCM.PCMSClearStops(tripId);
                    i = 0;
                }
            }
            PCM.PCMSCloseServer(serverID);
            PCM.PCMSDeleteTrip(tripId);

            return customers; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:00:10.787

1.  [您可以使用ParallelOptions](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.aspx)类的 MaxDegreeOfParallelism 属性来控制线程数。

    ParallelOptions.MaxDegreeOfParallelism = 5; //限制并发线程数为5

2.  您可以通过使用将Partitioner<> 对象作为参数的[ForEach()重载来控制分区。](http://msdn.microsoft.com/en-us/library/dd991604.aspx)

    [这是一篇很棒的文章，其中包含有关分区的示例](http://www.drdobbs.com/windows/custom-parallel-partitioning-with-net-4/224600406?pgno=2)

3.  它可能仍然会提高你的表现，但在你尝试之前很难知道有多少。

注意：如果您要开始使用多个线程，请确保您的所有共享对象/列表都是线程安全的。例如，您需要锁定客户列表或使用 ConcurrentCollections 命名空间中的集合。PCM 方法是线程安全的吗？

# python - 匹配模式与中间的文本

> ID：13105729
> 
> 赞同：3
> 
> 时间：2012-10-28T01:47:41.377
> 
> 标签：python, regex, substitution

在定量诗歌中（就像希腊和拉丁诗歌中使用的那样），线条被分成称为 spondees 和 dactyls 的部分。dactyl 是一个长元音（如 ā），后跟两个短元音，而 spondee 是两个长元音。

我的目标是在 Python 中自动将行拆分为 spondees 和 dactyls。

给定一条线

```
ārma virūmqe canō 
```

我正在尝试获取输出

```
arma vi / rūmque ca / nō 
```

我一直在想，使用正则表达式来查找模式（长、短、短）或（长、长）是个好主意，但我似乎不知道如何处理这样一个事实这些元音很少是连续的，而且它们之间的辅音数量每次都会变化。

有没有办法使用正则表达式来查找具有任意数量的其他不相关字符的特定字符？如果没有，是否有另一种相对优雅的方式来实现相同的目标？

**编辑：**

如果您需要更多示例， [@Junuxx](https://stackoverflow.com/users/1404505/junuxx)指出了一个很棒的网站。[这是](http://www.skidmore.edu/classics/courses/1998fall/cl202/resource/meter/figi.JPG)埃涅阿斯纪前 7 行扫描图片的链接，我从中得到了上面的示例。每当一个片段中只有两个元音时，它就是一个 spondee。如果有三个，那就是dactyl。忽略粗线，因为它们只是表示一行中的第三个部分。

**编辑二：**

看起来我在我的例子中打错了。我写了“virumqe”，而实际上，该行是“virumque”。在拉丁语中，(ae,au,ei,eu,oe) 是双元音，被视为一个元音。那么，我想我必须修改我的问题以询问是否也可以处理这些问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T02:03:59.990

下面的代码适用于您的示例，但是，正则表达式相当长，因为没有简洁的方法来匹配辅音。

dactyl 正则表达式的细分：

```
 [^āēīōūaeiou]*  # 0 or more consonants
 [āēīōū]         # a long vowel
 [^āēīōūaeiou]*  # 0 or more consonants
 [aeiou]         # a short vowel
 [^āēīōūaeiou]*  # 0 or more consonants
 [aeiou]         # a short vowel 
 [^āēīōūaeiou]*? # 0 or more consonants, but as few as possible 
```

代码：

```
# -*- coding: utf-8 -*-

import re
s = u"ārma virūmqe canō"
# Long vowels: āēīōū

m = re.findall(u'([^āēīōūaeiou]*[āēīōū][^āēīōūaeiou]*' # Dactyls
               u'[aeiou][^āēīōūaeiou]*[aeiou][^āēīōūaeiou]*?'
               u'|'
               u'[^āēīōūaeiou]*[āēīōū][^āēīōūaeiou]*?'  # Spondees
               u'[āēīōū]?[^āēīōūaeiou]*'
               u'|'
               u'[\w\s]*)', s)                         # Catch all leftovers

try:
    print ' / '.join(m)
except:
    print 'no match' 
```

输出：

```
ārma vi / rūmqe ca / nō 
```

# php - PHP 用户可编辑表单

> ID：13105730
> 
> 赞同：0
> 
> 时间：2012-10-28T01:48:19.430
> 
> 标签：php, mysql, database, forms, user-input

我正在尝试进入数据库并获取信息。然后将其放入表单中，以便用户可以在那里编辑信息，然后保存。

这是我认为我会如何做的代码。我不知道我做错了什么。我将如何为下拉菜单执行此操作？

```
<?php
include("login_check.php");
include("dbconnect.php");
mysql_select_db("maxgee_close2");
$username = mysql_real_escape_string($_COOKIE['maxgee_me_user']);
$result = mysql_query("select user_id from users where username = '$username'");
$row = mysql_fetch_array($result);    
mysql_free_result($result);
$eventinfo =mysql_query("SELECT `event_id`, `user_id`, `event_name`, `event_category`, `event_description`, `event_admission`, `event_amount`, `event_start_date`, `event_end_date`, `event_location`, `event_family` FROM `events_main` WHERE `user_id`='{$row['user_id']}'") ;
?>
<form action="sendeventdata.php" method="post">
 Event Name:<input type="text" name="event_name" value="<?php echo '{$row['event_name']}';?>" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:57:09.207

您正在`echo`不正确地使用变量。看起来您正在复制模板引擎。

代替：

```
<?php echo '{$row['event_name']}';?> 
```

利用

```
<?php echo $eventinfo['event_name'];?> 
```

您遇到了三个问题：不应该那样使用花括号（这是一个模板），并且您嵌套了单引号，这使所有内容都失效了。`event_name`最后，您从错误的数组中请求。

# php - 在 PHP 中简化这一点

> ID：13105739
> 
> 赞同：0
> 
> 时间：2012-10-28T01:50:31.130
> 
> 标签：php, fuelphp

我怎样才能用更少的代码来简化它？

```
<?php
$items['link1'] = 'Link 1';
$items['link2'] = 'LInk 2';
$items['link3'] = 'Link 3';
?>

<?php foreach ($items as $url => $text): ?>
<?php $class = false; if (isset($active) and $active == $url) $class = array('class' => 'current'); ?>
<?php echo '<li>' . Html::anchor($url, $text, $class) . '</li>' ?>
<?php endforeach; ?> 
```

而且，由于某种原因，“当前”类在特定 URL 上时未显示。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T02:08:13.830

这是更少的代码：

```
<?php

$items=array(
  'link1' => 'Link 1',
  'link2' => 'LInk 2',
  'link3' => 'Link 3',
);

foreach ($items as $url => $text) {
  $class = false;
  if (isset($active) && $active == $url)
    $class = array('class' => 'current');
  echo '<li>' . Html::anchor($url, $text, $class) . '</li>';
}

?> 
```

但是由于我不知道它应该做什么，所以除了为您漂亮地打印它之外，我真的无能为力。更多细节，请。

# c# - 当我在组合框中选择一种语言时，如何更改所有表单的文本？

> ID：13105744
> 
> 赞同：3
> 
> 时间：2012-10-28T01:51:59.630
> 
> 标签：c#, .net, winforms, localization

就像 facebook 改变它的语言时一样，它改变了一切......需要帮助来重建我的代码。我有 3 个表格，我用来选择语言的组合框是第一个表格。当我在第一种形式的组合框中选择语言时，我希望我的其他两种形式也能改变它的语言。

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (comboBox1.SelectedItem.ToString() == "English")
    {
        ChangeLanguage("en");
    }
    else if (comboBox1.SelectedItem.ToString() == "Spanish")
    {
        ChangeLanguage("es-ES");
    }
    else if (comboBox1.SelectedItem.ToString() == "French")
    {
        ChangeLanguage("fr-FR");
    }
}

private void ChangeLanguage(string lang)
{
    foreach (Control c in this.Controls)
    {
        ComponentResourceManager crm = new ComponentResourceManager(typeof(Form1));
        crm.ApplyResources(c, c.Name, new CultureInfo(lang));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:57:17.637

您可以使用一个基类，它包含一个“LanguageChanged”静态事件和一个触发它的函数。如果您的所有表单都是该基类的派生类，则可以在其中处理事件。就像是：

```
public partial class Form1 : BaseLanguageForm
{

    public Form1()
    {
        InitializeComponent();

    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.SelectedItem.ToString() == "English")
        {
            this.TriggerLanguageChange("en");
        }
        else if (comboBox1.SelectedItem.ToString() == "Spanish")
        {
            this.TriggerLanguageChange("es-ES");
        }
        else if (comboBox1.SelectedItem.ToString() == "French")
        {
            this.TriggerLanguageChange("fr-FR");
        }
    }

}

/// <summary>
/// The event that should be passed whenever language needs to be changed
/// </summary>
public class LanguageArgs:EventArgs
{
    string _languageSymbol;
    /// <summary>
    /// Gets the language symble.
    /// </summary>
    public string LanguageSymbol
    {
        get { return _languageSymbol; }
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="LanguageArgs"/> class.
    /// </summary>
    /// <param name="symbol">The symbol.</param>
    public LanguageArgs(string symbol)
    {
        this._languageSymbol = symbol;
    }
}

/// <summary>
/// A base class that your class should derivative from
/// </summary>
public class BaseLanguageForm:Form
{
    /// <summary>
    /// Triggers the language change event.
    /// </summary>
    /// <param name="languageSymbol">The language symbol.</param>
    protected void TriggerLanguageChange(string languageSymbol)
    {
        if (Form1.onLanguageChanged != null)
        {
            LanguageArgs args = new LanguageArgs(languageSymbol);
            Form1.onLanguageChanged(this, args);
        }
    }

    /// <summary>
    /// This should be triggered whenever the combo box value chages
    /// It is protected, just incase you want to do any thing else specific to form instacne type
    /// </summary>
    protected static event EventHandler<LanguageArgs> onLanguageChanged;

    /// <summary>
    /// This will be called from your form's constuctor 
    /// (you don't need to do anything, the base class constuctor is called automatically)
    /// </summary>
    public BaseLanguageForm()
    {
        //registering to the event
        BaseLanguageForm.onLanguageChanged += new EventHandler<LanguageArgs>(BaseLanguageForm_onLanguageChanged);
    }

    /// <summary>
    /// The function that was regidtered to the event
    /// </summary>
    /// <param name="sender">The sender.</param>
    /// <param name="e">The e.</param>
    void BaseLanguageForm_onLanguageChanged(object sender, LanguageArgs e)
    {
        string lang = e.LanguageSymbol;
        foreach (Control c in this.Controls)
        {
            ComponentResourceManager crm = new ComponentResourceManager(typeof(Form1));
            crm.ApplyResources(c, c.Name, new CultureInfo(lang));
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:38:51.830

根据我从您的问题中了解到的情况，我认为如果您也尝试`ChangeLanguage(string lang)`从其他表格中拨打电话，这是可能的。

您需要`Timer`添加到每个`Form`您想使用 void 的变量和两个变量。第一个是`bool`用于检测是否`ChangeLanguage`需要在其他两种形式中调用的 a，第二个是`string`用于指示语言的 a。这两个变量必须是`public`和`static`才能通过其他形式来控制。

## **例子**

* * *

**^(Form1.cs)**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Globalization;

namespace NameSpaceGoesHere
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        public static bool _ChangeLanguage = false; //This will indicate if the void needs to be called
        public static string _Language = ""; //This will indicate our new language
        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            ChangeLanguage("fr-FR");

        }

        private void ChangeLanguage(string lang)
        {
            foreach (Control c in this.Controls)
            {
                ComponentResourceManager crm = new ComponentResourceManager(typeof(Form1));
                crm.ApplyResources(c, c.Name, new CultureInfo(lang));
                _Language = lang; //Sets the language to lang
                _ChangeLanguage = true; //Indicates that the void needs to be called through the TWO other forms as well
            }
        }

    }
} 
```

**^(Form2.cs)**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Globalization;

namespace NameSpaceGoesHere
{
    public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
        }
        public static bool _ChangeLanguage = false; //Required for the third form
        private void Form2_Load(object sender, EventArgs e)
        {
            Timer Timer1 = new Timer(); //Initialize a new Timer object
            Timer1.Tick +=new EventHandler(Timer1_Tick); //Link its Tick event with Timer1_Tick
            Timer1.Start(); //Start the timer
        }
        private void ChangeLanguage(string lang)
        {
            foreach (Control c in this.Controls)
            {
                ComponentResourceManager crm = new ComponentResourceManager(typeof(Form1));
                crm.ApplyResources(c, c.Name, new CultureInfo(lang));
                _ChangeLanguage = true;
            }
        }
        private void Timer1_Tick(object sender, EventArgs e)
        {
            if (Form1._ChangeLanguage)  //Indicates if ChangeLanguage() requires to be called
            {
                Form1._ChangeLanguage = false; //Indicates that we'll call the method
                ChangeLanguage(Form1._Language); //Call the method
            }
        }
    }
} 
```

**^(Form3.cs)**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Globalization;

namespace NameSpaceGoesHere
{
    public partial class Form3 : Form
    {
        public Form3()
        {
            InitializeComponent();
        }
        private void Form3_Load(object sender, EventArgs e)
        {
            Timer Timer1 = new Timer(); //Initialize a new Timer object
            Timer1.Tick += new EventHandler(Timer1_Tick); //Link its Tick event to Timer1_Tick
            Timer1.Start(); //Start the timer
        }
        private void ChangeLanguage(string lang)
        {
            foreach (Control c in this.Controls)
            {
                ComponentResourceManager crm = new ComponentResourceManager(typeof(Form1));
                crm.ApplyResources(c, c.Name, new CultureInfo(lang));
            }
        }
        private void Timer1_Tick(object sender, EventArgs e)
        {
            if (Form2._ChangeLanguage) //Indicates if ChangeLanguage() requires to be called
            {
                Form2._ChangeLanguage = false; //Indicates that we'll call the method
                ChangeLanguage(Form1._Language); //Call the method
            }
        }
    }
} 
```

谢谢，
我希望你觉得这有帮助:)

# asp.net-mvc - linq 嵌套分组依据

> ID：13105745
> 
> 赞同：1
> 
> 时间：2012-10-28T01:52:34.733
> 
> 标签：asp.net-mvc, linq

我有一个表 Assessment，其中包含 {rated,rater,assessment_id} 另一个表是 Category_Scores，其中包含 {score,assessment_id}。我正在尝试按评分分组，按评分分组。目前我有这个 LINQ 查询

```
 var query = (from a in db.Assessments
                     join u in db.Users on a.rated equals u.user_id
                     join u2 in db.Users on a.rater equals u2.user_id
                     join tm in db.Team_Members on u.user_id equals tm.user_id
                     join t in db.Teams on tm.team_id equals t.team_id
                     join c in db.Category_Scores on a.assessment_id equals c.assessment_id
                     join cat in db.Categories on c.category_id equals cat.category_id

                     group new KyubiViewModel
                     {
                         rated = u.firstName + " " + u.lastName,
                         rater = u2.firstName + " " + u2.lastName,
                         score = c.score,
                         category_name = cat.name,
                         categoryid = c.category_id,

                     }
                     by new { rated = u.firstName + " " + u.lastName,rater = u2.firstName + " " + u2.lastName }).ToList(); 
```

这导致

```
 { rated = John Will, rater = Jess James}
   10 [Math]
   10 [Science]

  { rated = John Will, rater = Mike Rand}
   7 [Math]
   7 [Science] 
```

我希望它看起来像

```
 { rated = John Will }
     rater:        Math      Science
     Jess James     10         10
     Mike Rand      7          7

 { rated = Jess James }
     rater:        Math      Science
     John Will      9          9
     Mike Rand      7          7 
```

这是我的看法

```
 <table>
@foreach (var group in Model)
{
 <tr>
 <td>@group.Key </td>
 </tr>
    foreach (var m in group)
    {

      <tr>
      <td>@m.score - [@m.category_name]</td>
 </tr>

     }
}

</table> 
```

任何帮助，将不胜感激。

在 ChaseMedallion 的帮助下，我能够在我看来做到这一点

```
 { rated = John Will }
         rater:        
         Jess James     10[Math]    
         Jess James     10[Science]    
         Mike Rand      7[Math]          
         Mike Rand      7[Science] 
```

如果可能的话，我希望这样

```
 { rated = John Will }
     rater:        Math      Science
     Jess James     10         10
     Mike Rand      7          7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:02:52.110

如果您设置关联属性而不是使用连接，则 LINQ 更容易编写。我认为你想要的是这样的：

```
var results = (
    from a in db.Assessments
    from cs in a.CategoryScores
    select new RatingModel {
        ratedName = a.RatedUser.firstName + " " + a.RatedUser.lastName,
        raterName = a.RaterUser.firstName + " " + b.RaterUser.lastName,
        categoryName = cs.Category.name,
        cs.score,
        cs.category_id,
    })
    // bring into memory. It may work fine without this, but sometimes LINQ will perform multiple queries if you try to read in a queryable of groupings
    .AsEnumerable()
    .GroupBy(t => t.ratedName)
    .ToList(); 
```

在视图中显示：

```
<table>
    @foreach (var group in Model)
    {
        var allCategories = group.Select(g => g.categoryName).Distinct().OrderBy(s => s).ToList();
        <tr>
            <td>rater: </td>
            @foreach (var name in allCategories) { <td>@name</td> }
        </tr>
        <tr>
            <td>@group.Key </td>
        </tr>
            foreach (var groupByRater in group.GroupBy(g => g.raterName))
            {
                <tr>
                <td>@groupByRater.Key </td>
                @foreach (var name in allCategories)
                {
                    var rating = groupByRater.FirstOrDefault(r => r.categoryName == name);
                        <td>@(rating == null ? string.Empty : rating.score)</td>
                }
            </tr>
            }
    }
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T03:37:38.577

尝试调用`GroupBy()`每个分组：

```
var query = (from a in db.Assessments
             join u in db.Users on a.rated equals u.user_id
             join u2 in db.Users on a.rater equals u2.user_id
             join tm in db.Team_Members on u.user_id equals tm.user_id
             join t in db.Teams on tm.team_id equals t.team_id
             join c in db.Category_Scores on a.assessment_id equals c.assessment_id
             join cat in db.Categories on c.category_id equals cat.category_id

             group new KyubiViewModel
             {
                 rater = u2.firstName + " " + u2.lastName,
                 score = c.score,
                 category_name = cat.name,
                 categoryid = c.category_id
             }
             by new { rated = u.firstName + " " + u.lastName }
             into rated
             select new { Rated = rated.Key, Raters = rated.GroupBy(x => x.rater) }
             ).ToList(); 
```

# java - java循环添加100的增量

> ID：13105748
> 
> 赞同：0
> 
> 时间：2012-10-28T01:53:12.767
> 
> 标签：java, loops, for-loop, while-loop, int

这可能是一个愚蠢的问题，但我似乎无法弄清楚。

如果我正在使用循环并在 1 处启动一个 int，例如 c，我希望它以 100 为增量显示数字 1-2000。例如。

```
1
100
200
300
400
500
etc. 
```

我会为 c=c+ 写什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T01:55:17.457

你有一个问题 - 你不能从 1 开始，然后去 100、200，......没有特殊情况。

```
for (int c = 100; c < 2001; c += 100) {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T01:54:28.010

`c++`和 是一样的`c = c + 1`。那里的增量`1`。所以，很简单：

```
c = c + 100 
```

请注意，更改`1`为`100`不是*的*增量`100`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T01:55:32.267

c+=100 也可以。与写 c = c + 100 相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T02:09:49.287

如果 c 的初始值为 0，我建议只使用 c=c+100，直到 c==2000。由于您希望第一个增量不同，因此我会尝试执行以下伪代码：

```
 c=1
    while (c!=2000)
    {
    // check remainder from integer division by 100
    int remainder = c%100;

    c = c + (100-remainder);

    // your cool piece of code
    } 
```

抱歉缩进不好，这里是凌晨 3 点；）。

这样该代码就可以获取您当前的索引，例如。c=1，计算整数除以 100 余数 (99) 的余数，并将其与 c 的下一个值相加 (1+99 = 100)。下一次迭代将起作用，因为余数将为 0，因此它将再增加 100！

快乐编码

# android - android画廊布局

> ID：13105749
> 
> 赞同：0
> 
> 时间：2012-10-28T01:54:10.877
> 
> 标签：android

我应该使用什么类型的布局？

我需要什么布局元素？

```
__________________________________________________
|list_item  |                                    | 
|list_item  |                                    |             
|list_item  |                                    |
|list_item  | details with images on item click  |
|list_item  |                                    |
|list_item  |                                    |
|list_item  |                                    | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:00:30.900

你可以有一个`LinearLayout`-horizo​​ntal 给父母，`LinearLayout`-vertical 给左孩子，以及你需要的任何东西给右孩子。只记得设置

```
android: weight_sum 
```

所以你的左孩子有屏幕的比例。

# c# - 如何在 C# 中使用 System.Data.Services.Client？

> ID：13105752
> 
> 赞同：2
> 
> 时间：2012-10-28T01:54:48.400
> 
> 标签：c#, bing, bing-api

我试图`Bing Search API`在我的 C# 程序中使用。当我尝试

`using System.Data.Services.Client;`在我的程序中，它给了我以下错误：

`The type or namespace name 'Services' does not exist in the namespace 'System.Data' (are you missing an assembly reference?)`

我在 Windows 7 64 位版本中使用 Microsoft Visual Studio 2010。& 我是编程新手，不知道如何设置程序集引用。我能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T02:10:29.333

添加参考

![添加参考](../Images/5f0221bf0fff36d4cef72bd5388f43c8.png)

System.Data.Services.Client

![在此处输入图像描述](../Images/bb5160baa6a8366937320c2560c5e24f.png)

# php - 提取特定捆绑产品订单

> ID：13105756
> 
> 赞同：2
> 
> 时间：2012-10-28T01:55:19.990
> 
> 标签：php, mysql, sql

如何从下表中提取特定捆绑产品订单。例如，如果我想提取产品`Wireless Mouse`已用作捆绑产品的所有订单。

**预期结果1：**

```
    orders_id product_name 数量    
       1000无线鼠标1
       1000 笔记本电脑 1
       1001无线鼠标3
       1001 个人电脑 3
       1003无线鼠标4
       1003 平板电脑 4

```

**第二个问题：**

如果我只想提取与“无线鼠标”一起使用的产品订单作为捆绑包，我该怎么做？

**预期结果 2：**

```
    orders_id product_name 数量    
       1000 笔记本电脑 1
       1001 个人电脑 3     
       1003 平板电脑 4

```

**如果可能的话，请帮助我解决以下问题：**

如果我只想提取与“无线鼠标”一起使用的“笔记本电脑”订单作为捆绑包，我该怎么做？

**预期结果 3：**

```
    orders_id product_name 数量    
       1000 笔记本电脑 1  

```

**示例数据：**

**表一：订单**

```
    id customer_id order_price purchase_date
    1000 1 203 12/6/2011
    1001 2 304 2011 年 12 月 6 日
    1002 1 1000 2011 年 12 月 6 日
    1003 1 233 2011 年 12 月 6 日
    1004 1 44 2011 年 12 月 7 日
    1005 3 50 12/7/2011
    1006 4 67 2011 年 12 月 7 日
    1007 5 99 2011 年 12 月 7 日
    1008 6 299 2011 年 12 月 7 日
    1009 7 199 2011 年 12 月 7 日

```

**表二：客户**

```
    身份证电子邮件名称
    1 aa@dealboard.com.au 詹姆斯
    2 bb@dealboard.com.au 瑞安
    3 cc@live.com.au 思力
    4 dd@acgglobal.com 妈妈
    5 ee.heinrich@det.nsw.edu.au 凯恩
    6 ff@optusnet.com.au 奎托斯
    7 ssy@hotmail.com 金

```

**表 3：产品**

```
    身份证名称
    1 台笔记本电脑
    2 台电脑
    3 无线鼠标
    4 平板电脑
    5 苹果手机
    6 无线键盘
    7 打印机
    8 银河 S3
    9 扫描仪
    10 PS3

```

**表 4：product_orders**

```
    id orders_id product_id 数量
        1 1000 1 1
        2 1000 3 1
        3 1001 2 3
        4 1001 3 3
        5 1003 4 4
        6 1003 3 4
        7 1004 5 1
        8 1005 6 1
        9 1007 7 2
        10 1008 8 1

```

对不起各位，我今天问的太多了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:09:29.327

对于**问题 1**

如下所示，查询是嵌套的。

**子查询 2**获取其上的所有 orders_id `Wireless Mouse`。
**子查询 1**计算每个存在的记录`Orders_ID`数`Wireless Mouse`。
**主查询**从`products_orders`和连接子查询`products`

```
主要查询
  -- 子查询 1
     --- 子查询 2

```

询问。

```
SELECT   aaa.orders_id, bbb.name, aaa.qty
FROM     products_orders aaa
         INNER JOIN products bbb
             ON bbb.id = aaa.product_id
         INNER JOIN
          (
            SELECT  aa.ORDERS_ID
            FROM    products_orders aa
                    INNER JOIN
                    (
                      SELECT  orders_id
                      FROM    products_orders a
                              INNER JOIN products b
                                ON b.id = a.product_id
                      WHERE   name = 'Wireless Mouse'
                    ) bb ON aa.orders_id = bb.orders_id
            GROUP BY aa.ORDERS_ID
            HAVING COUNT(*) > 1
          ) ccc ON aaa.orders_id = ccc.orders_id
ORDER BY aaa.orders_ID 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/f4464/11)

对于**第 2 题**

From `Question No 1`，您只需在`WHERE`子句上添加附加条件即可过滤所有记录，而无需`Wireless Mouse`

```
...
WHERE   bbb.name <> 'Wireless Mouse' 
```

询问，

```
SELECT   aaa.orders_id, bbb.name, aaa.qty
FROM     products_orders aaa
         INNER JOIN products bbb
             ON bbb.id = aaa.product_id
         INNER JOIN
          (
            SELECT  aa.ORDERS_ID
            FROM    products_orders aa
                    INNER JOIN
                    (
                      SELECT  orders_id
                      FROM    products_orders a
                              INNER JOIN products b
                                ON b.id = a.product_id
                      WHERE   name = 'Wireless Mouse'
                    ) bb ON aa.orders_id = bb.orders_id
            GROUP BY aa.ORDERS_ID
            HAVING COUNT(*) > 1
          ) ccc ON aaa.orders_id = ccc.orders_id
WHERE   bbb.name <> 'Wireless Mouse' 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/f4464/9)

对于**第 3 题**

就像*问题 2*一样，添加额外的条件

```
...
WHERE   bbb.name <> 'Wireless Mouse' AND
        bbb.name = 'Laptop' 
```

询问，

```
SELECT   aaa.orders_id, bbb.name, aaa.qty
FROM     products_orders aaa
         INNER JOIN products bbb
             ON bbb.id = aaa.product_id
         INNER JOIN
          (
            SELECT  aa.ORDERS_ID
            FROM    products_orders aa
                    INNER JOIN
                    (
                      SELECT  orders_id
                      FROM    products_orders a
                              INNER JOIN products b
                                ON b.id = a.product_id
                      WHERE   name = 'Wireless Mouse'
                    ) bb ON aa.orders_id = bb.orders_id
            GROUP BY aa.ORDERS_ID
            HAVING COUNT(*) > 1
          ) ccc ON aaa.orders_id = ccc.orders_id
WHERE   bbb.name <> 'Wireless Mouse' AND
        bbb.name = 'Laptop' 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/f4464/10)

# ruby-on-rails - 链接到缓存摘要资产的非摘要 .js

> ID：13105757
> 
> 赞同：0
> 
> 时间：2012-10-28T01:55:29.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, asset-pipeline, sprockets

我目前正在使用asset_sync 将我的资产从Rails 移动到S3。

我们将我们的 JS 库作为`bootstrap.js`引导其他样式表/js 的工具，这些样式表/js 应该通过摘要进行缓存控制。由于我希望能够快速更改我们的库的功能，`bootstrap.js`它是短暂的，因此必须非常小，而缓存消化的 css/js 应该根据 Rails 资产管道原则永远存在。

现在的问题是，当我进行预编译时，`bootstrap.js`摘要正确加载缓存摘要的其他 css/js，但非摘要`bootstrap.js`仅指向非摘要等效项，尽管我明确设置`:digest`为 true

```
<%= asset_path 'badgelib.js', :digest => true %> 
```

有没有其他方法可以强制资产链接到摘要版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:45:41.777

我讨厌猴子补丁 Sprockets 为我做这件事：

```
class Sprockets::Helpers::RailsHelper::AssetPaths
def digest_for(logical_path, digest_assets = digest_assets)
  if digest_assets && asset_digests && (digest = asset_digests[logical_path])
    return digest
  end

  if compile_assets
    if digest_assets && asset = asset_environment[logical_path]
      return asset.digest_path
    end
    return logical_path
  else
    raise AssetNotPrecompiledError.new("#{logical_path} isn't precompiled")
  end
end
def rewrite_asset_path(source, dir, options = {})
  if source[0] == ?/
    source
  else
    source = digest_for(source, true) unless options[:digest] == false
    source = File.join(dir, source)
    source = "/#{source}" unless source =~ /^\//
    source
  end
end 
```

结束结束

# iphone - 我无法在 UITabBar 中重新排列 UITabBarItem(s)

> ID：13105760
> 
> 赞同：3
> 
> 时间：2012-10-28T01:56:35.670
> 
> 标签：iphone, objective-c, ios, ios6

一旦我向 UITabBar 添加第三个栏项目，我就无法重新排列情节提要中的项目（当我只有两个栏项目时有效）。我不确定我错过了什么。我不想以编程方式进行，并且觉得 Xcode 应该允许我做我现在可以做的事情。有什么建议么？你认为是什么问题？

我正在运行 xcode 4.5 并为 iOS6 开发。

谢谢

ps这个问题太傻了，快把我逼疯了，请帮忙！我几乎感到尴尬。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:36:00.323

我知道这样做的唯一方法是断开所有关系并以正确的顺序再次连接。这似乎很愚蠢，但它确实有效。我不知道是否有其他程序可以做到这一点。

问候法比奥

# java - 如何在java中将数字转换为符号？例如，而不是 2 到 **，或 3 到 *** 等。

> ID：13105765
> 
> 赞同：-1
> 
> 时间：2012-10-28T01:57:40.020
> 
> 标签：java, arrays

> **可能重复：**
> [在java中重复字符串的简单方法](https://stackoverflow.com/questions/1235179/simple-way-to-repeat-a-string-in-java)

如何将数字转换为符号？我的作业的最后一部分是这样的：直方图应该根据该值滚动的次数显示 2-12 的条形图。像这样： ![像这样：](../Images/555bbbc161dd46ab20761493045f5a1a.png)目前我的输出是这样的：![在此处输入图像描述](../Images/00ecae68beb105e77f5433e1d1b9a0e1.png)

```
 public static void main(String[] args) {
    // TODO code application logic here
    System.out.print("Please enter how many times you want to roll two dice?");
    Scanner sc = new Scanner(System.in);
    int n = sc.nextInt();
    int [] rolls = new int[n];

    Random r1 = new Random();
    Random r2 = new Random();

    int dice1;
    int dice2;

    int two = 0;
    int three = 0;
    int four = 0;
    int five = 0;
     int six = 0;
    int seven = 0;
    int eight = 0;
    int nine = 0;
     int ten = 0;
    int eleven = 0;
    int twelve = 0;

    for (int roll=0; roll < rolls.length; roll++)
    {
         dice2 = r2.nextInt(6)+1;
         dice1 = r1.nextInt(6)+1;
         System.out.println(roll + " The first dice rolled a " + dice1 + " the second dice rolled a " + dice2);

         int sum;
         sum = dice1 + dice2;

         if (sum == 2)
             two++;
         if (sum == 3)
             three++;
         if (sum == 4)
             four++;
         if (sum == 5)
             five++;
         if (sum == 6)
             six++;
         if (sum == 7)
             seven++;
         if (sum == 8)
             eight++;
         if (sum == 9)
             nine++;
         if (sum == 10)
             ten++;
         if (sum == 11)
             eleven++;
         if (sum == 12)
             twelve++;

    }
    System.out.println("Histogram of rolls:" );  
    System.out.println("2 occurred " + two + " times");
    System.out.println("3 occurred " + three + " times");
    System.out.println("4 occurred " + four + " times");
    System.out.println("5 occurred " + five + " times");
    System.out.println("6 occurred " + six + " times");
    System.out.println("7 occurred " + seven + " times");
    System.out.println("8 occurred " + eight + " times");
    System.out.println("9 occurred " + nine + " times");
    System.out.println("10 occurred " + ten + " times");
    System.out.println("11 occurred " + eleven + " times");
    System.out.println("12 occurred " + twelve + " times");

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T02:00:59.143

创建一个名为的附加函数`toStars`

```
public String toStars(int number) {
    StringBuilder temp = new StringBuilder();
    for(int i=0;i<number;i++) {
        temp.append("*");
    }
    return temp.toString();
} 
```

然后，更改您的打印语句，如下所示：

```
System.out.println("2 : " + toStars(two)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:01:33.800

```
int n = 10;

for(int i = 0; i < n; i++)
{
   System.out.print("*");
} 
```

该代码将打印 '*' 10 次。

# php - 如何在这里使用 xpath 和 php 获取节点值？

> ID：13105766
> 
> 赞同：0
> 
> 时间：2012-10-28T01:57:42.220
> 
> 标签：php, xml, xpath

下面的代码应该打印：PHP XPath Example，但它没有。我不确定为什么。

***文章.xml：***

```
<?xml version="1.0" encoding="UTF-8"?>
<articles>
    <article id="1">
        <tags>
            <tag>php</tag>
            <tag>xpath</tag>
        </tags>
        <title>PHP XPath Example</title>
    </article>
    <article id="2">
        <tags>
            <tag>dom</tag>
            <tag>dodocument</tag>
        </tags>
        <title>DomDocument Tutorial</title>
    </article>
</articles> 
```

***测试.php：***

```
<?php
require 'krumo/class.krumo.php';
//phpinfo();
$file = "/home/veronzhg/public_html/venturelateral.com/pi_candidate_project/articles.xml";

$xml = simplexml_load_file($file);
krumo($xml);
$arts = $xml->xpath("/articles/article/title");

krumo($arts);
foreach ($arts as $art)
{
    echo $art->textContent ." printed <br />";
    //nodeValue
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:10:26.580

它应该工作：

```
$stringxml = <<<EOD
<?xml version="1.0" encoding="UTF-8"?>
<articles>
    <article id="1">
        <tags>
            <tag>php</tag>
            <tag>xpath</tag>
        </tags>
        <title>PHP XPath Example</title>
    </article>
    <article id="2">
        <tags>
            <tag>dom</tag>
            <tag>dodocument</tag>
        </tags>
        <title>DomDocument Tutorial</title>
    </article>
</articles>

EOD;

$xml = new SimpleXMLElement($stringxml);

foreach ($xml->xpath('/articles/article/title') as $title)
{
    echo "$title\n";
} 
```

# javascript - 如何将我的 javascript 代码拆分为单独的文件？

> ID：13105776
> 
> 赞同：27
> 
> 时间：2012-10-28T02:01:18.943
> 
> 标签：javascript, class, dependencies, hierarchy

我正在阅读 Mozilla 的 Javascript[指南](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model)当他们将 JS 与 Java 进行对比时，这让我想到，Java 代码很容易与他自己文件中的每个类分开。在进一步搜索之后，我了解到在具有命名空间和模块模式的 JS 中也可以实现相同的功能 - 我弄乱了它但很困惑（尤其是在将 File1.js 中声明的构造函数调用到 File2.js 时）

所以这是层次结构： ![班级组织](../Images/470df84c82ebbaceb2d8e7c24ec15f32.png)

但我就是不知道如何让它正常工作

我如何简单地从

```
//employe.js
function Employee () {
  this.name = "";
  this.dept = "general";
}

function Manager () {
  this.reports = [];
}
Manager.prototype = new Employee;

function WorkerBee () {
  this.projects = [];
}
WorkerBee.prototype = new Employee;

function SalesPerson () {
  this.dept = "sales";
  this.quota = 100;
}
SalesPerson.prototype = new WorkerBee; 
```

对此：

```
 // employe.js
function Employee () {
  this.name = "";
  this.dept = "general";
}

 // Manager.js   
function Manager () {
  this.reports = [];
}
Manager.prototype = new Employee;

 // WorkerBee.js     
function WorkerBee () {
  this.projects = [];
}
WorkerBee.prototype = new Employee;

 // SalesPerson.js      
function SalesPerson () {
 this.dept = "sales";
 this.quota = 100; 
 }
SalesPerson.prototype = new WorkerBee; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-28T02:05:15.777

您应该有一个*全局*命名空间对象，每个模块都必须访问和写入该对象。像这样修改你的文件：

```
// employe.js

window.myNameSpace = window.myNameSpace || { };

myNameSpace.Employee = function() {
    this.name = "";
    this.dept = "general";
}; 
```

Manager.js*可能*看起来像

```
// Manager.js

window.myNameSpace = window.myNameSpace || { };

myNameSpace.Manager = function() {
    this.reports = [];
}
myNameSpace.Manager.prototype = new myNameSpace.Employee; 
```

这当然是一个非常简化的例子。因为加载文件和依赖项的顺序不是儿童游戏。有一些不错的库和模式可用，我建议您查看*requireJS*和*AMD*或*CommonJS*模块模式。[http://requirejs.org/](http://requirejs.org/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-28T02:10:21.180

你不需要做任何不同的事情。只需包含脚本文件，它们就可以像单个文件一样工作。

Javascript没有文件范围。解析代码后，代码的来源无关紧要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-17T00:14:04.720

对于网站或游戏等中小型项目，本机命名空间和构造函数工作得很好。当加载顺序太复杂而无法在没有某种自动加载的情况下处理时，它们是一个糟糕的选择。

索引.html：

```
<script src="Employee.js"></script>
<script src="Manager.js"></script> 
```

经理.js：

```
var Manager = function() {
    var employee1 = new window.Employee(this);
    var employee2 = new window.Employee(this);
}; 
```

员工.js：

```
var Employee = function(boss) {
    // work stuff here
    this.wage = 5;
}; 
```

请注意，员工构造函数中的属性对经理是可见的。这个`new`词标志着一个构造函数。这也可以在没有构造函数的情况下通过返回具有属性的对象而不是如上所示的函数来实现。

# python - Matplotlib 和 GTKAgg 和 OS X

> ID：13105777
> 
> 赞同：1
> 
> 时间：2012-10-28T02:01:31.530
> 
> 标签：python, matplotlib, macports

我通过 Macports 在 Mountain Lion 上安装了 python 2.7 和 matplotlib 1.1.1，当我运行以下命令时：

```
 import matplotlib
   matplotlib.use('GTKAgg') 
   import matplotlib.pyplot as plt 
```

在最后一行我收到下面的错误消息。在互联网上环顾四周后，我看到的唯一“解决方案”是使用“Agg”作为后端而不是“GTKAgg”，但是当我这样做时它会运行（并且没有任何错误地终止）但没有任何情节。上面的行在我的 Windows XP 上运行良好。有人有什么建议吗？

**错误信息：**

> 第 2 行，在 import matplotlib.pyplot as plt
> File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/matplotlib/pyplot.py"，第 95 行，在new_figure_manager，draw_if_interactive，_show = pylab_setup()
> 文件“/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/matplotlib/backends/init.py”，第 25 行，在 pylab_setup globals(),locals(),[backend_name])
> 文件“/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/matplotlib/backends/backend_gtkagg.py "，第 10 行，从 matplotlib.backends.backend_gtk 导入 gtk，FigureManagerGTK，FigureCanvasGTK，\
> 文件“/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/matplotlib/backends/backend_gtk.py”，第 52 行，在 cursors.MOVE 中：gdk.Cursor( gdk.FLEUR), RuntimeError: 无法创建 GdkCursor 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:16:49.987

您需要将`select`python27 作为您的主要和默认 python。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T02:24:37.243

感谢大家的帮助，但问题已通过 Macports 更新/升级安装的更新版本自行解决。我不确定这是否是因为 Matplotlib 或 Python 或两者的更新，但我所有的东西现在都运行良好。

# apache-flex - Adobe Flex：如何制作 MXML 基类

> ID：13105778
> 
> 赞同：0
> 
> 时间：2012-10-28T02:01:31.047
> 
> 标签：apache-flex, flex4, flash-builder, flex4.5

我的 MXML 文件中有一些通用代码，我想将其移至基类的 MXML 等价物，然后从中获得各种 MXML 组件子类。在 MXML 中执行此操作的语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T02:19:33.097

MXML 被视为一种 ActionScript 生成语言；当前版本的 Flex 编译器会将 MXML 转换为 ActionScript。

因此，就所有意图和目的而言，MXML 类与 ActionScript 类没有什么不同。出于继承目的，MXML 类可以扩展 ActionScript 类——每次创建新的应用程序文件时都需要这样做。一个 MXML 类也可以扩展另一个 MXML 类；该方法与扩展 ActionScript 类没有什么不同。

首先，以您喜欢的任何方式创建您的基类。这是一个扩展组的示例类结构：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="300">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            // shared ActionScript Code here
        ]]>
    </fx:Script>
<!-- shared MXML code here -->
</s:Group> 
```

假设您将该文件命名为 BaseClass.mxml 并将其放在目录 com.flextras 中。扩展前一个类的新类将如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<flextras:BaseClass xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:flextras="com.flextras.*" width="400" height="300">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
</flextras:BaseClass> 
```

在 Flash Builder 中，只需在 Flash 项目中执行“新建 --> MXML 组件”即可非常简单。

# javascript - 用于动态左侧导航的 jQuery/javascript

> ID：13105782
> 
> 赞同：0
> 
> 时间：2012-10-28T02:02:35.533
> 
> 标签：javascript, jquery, jquery-ui, date

我正在尝试编写一个脚本，该脚本将生成 jQuery UI 将接受以制作手风琴的标记，如下所示。

```
<div id="accordion">
    <h3>2012</h3>
    <div>
        <ul>
        <li><a href="somepage.html?year=2012&month=10">October</a></li>
        <li><a href="somepage.html?year=2012&month=9">September</a></li>
        <li><a href="somepage.html?year=2012&month=8">August</a></li>
        <li><a href="somepage.html?year=2012&month=7">July</a></li>
        <li><a href="somepage.html?year=2012&month=6">June</a></li>
        <li><a href="somepage.html?year=2012&month=5">May</a></li>
        <li><a href="somepage.html?year=2012&month=4">April</a></li>
        <li><a href="somepage.html?year=2012&month=3">March</a></li>
        <li><a href="somepage.html?year=2012&month=2">February</a></li>
        <li><a href="somepage.html?year=2012&month=1">January</a></li>
    </ul>
    </div>
    <h3>2011</h3>
    <div>
        <ul>
        <li><a href="somepage.html?year=2011&month=12>December</a></li>
        <li><a href="somepage.html?year=2011&month=11>November</a></li> 
        <li><a href="somepage.html?year=2011&month=10">October</a></li>
        <li><a href="somepage.html?year=2011&month=9">September</a></li>
        <li><a href="somepage.html?year=2011&month=8">August</a></li>
        <li><a href="somepage.html?year=2011&month=7">July</a></li>
        <li><a href="somepage.html?year=2011&month=6">June</a></li>
        <li><a href="somepage.html?year=2011&month=5">May</a></li>
        <li><a href="somepage.html?year=2011&month=4">April</a></li>
        <li><a href="somepage.html?year=2011&month=3">March</a></li>
        <li><a href="somepage.html?year=2011&month=2">February</a></li>
        <li><a href="somepage.html?year=2011&month=1">January</a></li>
    </ul>
    </div>
</div> 
```

它应该输出年份以及当前和过去的几个月，一直到 2007 年。为了创建这种类型的标记，我需要做什么？伪代码：

```
var d = new Date();
var yr = Number(d.getFullYear());
for (var i = 2006, i < yr, i++)
{
  //create a H3, div, and a ul
  var mo = d.getMonth();
  //some other for loop on the month to create the li items
  //how to handle date display names?
} 
```

jQuery/Javascript 中的日期一直是我的致命弱点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:32:34.877

这是你想要的吗？？尝试**演示**：如果是，请[回答演示](http://jsfiddle.net/yosafatade/yW4SL/2/)，因此您必须了解更多信息以改进您的逻辑:) 尝试学习 jquery 如何`append()`适应临时变量以及 html 的模式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T12:07:10.153

这就是我想出的。[jsFiddle](http://jsfiddle.net/TheJoeFletch/jjQkX/1/)

```
var div = $("<div>").attr("id", "accordion");
month = [];
month[0] = "January";
month[1] = "February";
month[2] = "March";
month[3] = "April";
month[4] = "May";
month[5] = "June";
month[6] = "July";
month[7] = "August";
month[8] = "September";
month[9] = "October";
month[10] = "November";
month[11] = "December";
var d = new Date();
var yr = Number(d.getFullYear());
for (i = yr; i > 2006; i--) {
    var m = $("<ul>");
    for (j = 1; j <= 12; j++) {
        m.append(
        $("<a>").attr("href", "somepage.html?year=" + i + "&month=" + j).text(month[j - 1]));
    }
    div.append(
    $("<h3>").text(i), m);
}
$(elementToAppendTo).append(div);​ 
```

# css - 具有相同类的 div 的两列布局......之间有一个空格

> ID：13105784
> 
> 赞同：0
> 
> 时间：2012-10-28T02:03:36.167
> 
> 标签：css, html, css-float, multiple-columns

有两个`<div>`元素，每个元素都有相同的类。将它们制作成两列布局很容易：http: [//jsfiddle.net/Baumr/nbzHA/3/](http://jsfiddle.net/Baumr/nbzHA/3/)

**所以这里有一个问题：**

如何在它们之间添加空格？

制作两个单独的类并以任何一种方式浮动它们会很容易。或者添加一个类并使用边距：http: [//jsfiddle.net/Baumr/sZehH/1/](http://jsfiddle.net/Baumr/sZehH/1/)

但是如果他们在同一个班级/没有班级怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:07:16.113

您可以使用伪类，例如`:nth-child(n)`或`:first-child`

`section div:nth-child(1) { margin-right: 10%; }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:37:07.867

在第一个 div 上添加 a`class`是最好的浏览器兼容性解决方案，然后为此类添加您的样式。

我注意到你的小提琴有一些事情，这使得根据你对尼尔斯的评论来解决问题变得很复杂。您的小提琴中有一个`section`标签，它将在支持 html5 的浏览器中呈现。但是你想要兼容 IE7 和 IE6 吗？

IE7有多种方法，以下是其中一种：

```
.section div+div {
    margin-left: 10%;
} 
```

此解决方案使用[相邻的兄弟选择器](http://www.w3.org/TR/CSS21/selector.html#adjacent-selectors)，它在第二个 div 上添加了左边距。而且，`section`我使用 <>div 代替标签，`class=section`因为浏览器不支持`section`.

对于`IE6`，在两个 <>div 之一上添加一个类是我知道的唯一解决方案。

# google-earth - 确定 google earth 中使用的图片来源

> ID：13105785
> 
> 赞同：2
> 
> 时间：2012-10-28T02:03:44.650
> 
> 标签：google-earth, google-earth-plugin

以编程方式，有没有办法确定当前在视口中可见的谷歌地球地图中使用的图像的来源？我所说的来源是指他们从哪里获得图像。我知道并非所有使用的图片都来自谷歌。有些来自美国海军、CNES 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:40:22.307

它在屏幕上告诉你......

看看中间的底部。它通常会说类似 Image 'copyright symbol' 2012 Company Name 有时会给出多个学分

编辑：刚刚注意到第一个词-“以编程方式”-不，我不知道该怎么做。

也许您可以截屏并使用某种 OCR 软件来读取单词？由于多种原因，这可能是不可能的，特别是因为很多时候它使用来自多个不同来源的图像，具体取决于您的缩放级别。

# join - SQLite3 JOIN 4 个表形成一个查询

> ID：13105786
> 
> 赞同：-2
> 
> 时间：2012-10-28T02:03:51.013
> 
> 标签：join, sqlite

我不太精通一些高级 SQL，但需要使用 JOINS 创建一个 SELECT 查询，该查询将数据链接到 4 个表。（使用 * 作为所有表的字段选择器）

```
Table 1 (Project Tasks) (Fields: parent_project_id, ...)
Table 2 (Parent Project Details) (Fields: id [KEY], dept_id, ...)
Table 3 (Department) (Fields: id [KEY], manager_id, ...)
Table 4 (Resources) (Fields: employee_id [KEY], email, ...) 

parent_project_id(Table 1) maps to id(Table 2)
dept_id(Table 2) maps to id(Table 3)
manager_id(Table 3) maps to employee_id(Table 4) 
```

我希望能够返回项目任务详细信息列表，其中包括父项目详细信息、部门详细信息和经理的每行详细信息。

有人可以帮助我执行此操作所需的 SQL 语句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:02:07.023

*每个*SQL 教程都解释了如何进行连接。

```
SELECT *
FROM table1
JOIN table2 ON table1.parent_project_id = table2.id
JOIN table3 ON table2.dept_id = table3.id
JOIN table4 ON table3.manager_id = table4.employee_id 
```

# asp.net - ASP.NET：我无法让文件路径在我的母版页上工作

> ID：13105798
> 
> 赞同：1
> 
> 时间：2012-10-28T02:06:44.830
> 
> 标签：asp.net, vb.net, master-pages

我有一个带有导航菜单的母版页。我在我的文件`default.aspx`和`pro/page.aspx`. 图片和链接引用不匹配，具体取决于我所在的页面。我尝试了类似`~/page.aspx?function=a`&&的东西`~/Images/menu/a.gif`。然而这些都行不通。在某些情况下，我可以让路径工作，但它们永远不会在其他页面上工作。谁能指出我解决这个问题的方向？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:20:37.913

> **您可以在服务器控件**中的任何与路径相关的属性中使用 ~ 运算符。~ 运算符**仅在服务器控件和服务器代码中**被识别。您不能将 ~ 运算符用于客户端元素。

例如：

```
<asp:image runat="server" id="Image1"
  ImageUrl="~/Images/SampleImage.jpg" /> 
```

[MSDN：ASP.NET Web 项目路径](http://msdn.microsoft.com/en-us/library/ms178116%28v=vs.100%29.aspx)

> 通过添加属性**runat="server"**，可以将页面上的任何 HTML 元素转换为 HTML**服务器控件**。

 **[MSDN：ASP.NET Web 服务器控件概述](http://msdn.microsoft.com/en-us/library/zsyt68f1%28v=vs.100%29.aspx)**

# ruby - 生成给定数字的所有数字排列？

> ID：13105799
> 
> 赞同：0
> 
> 时间：2012-10-28T02:06:50.550
> 
> 标签：ruby, permutation

我正在使用 Ruby，需要以某种方式生成给定数字中数字的所有排列并将它们存储在数组中。因此，例如我有 number `n = 9431`，我需要生成所有可能的方式，您可以订购这四个数字并将它们存储在一个数组中（原始可以在数组中）。

因此，如果我输入`9431`，我需要返回一个数组，例如：

```
[9413, 9431, 9143, 9134, 9314, 9341, 4913, 4931, 4193, 4139, 4319, 4391, 1493, 1439, 1943, 1934, 1394, 1349, 3419, 3491, 3149, 3194, 3914, 3941] 
```

实际上使用字符串很好。

*澄清：*哦，输出必须是数组中的整数，而不是它们的单个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:24:41.237

这是“作弊”，因为它使用了您不想做的中间字符串，但它确实有效：

```
9431.to_s.chars.to_a.permutation.map(&:join).map(&:to_i).uniq
=> [9431, 9413, 9341, 9314, 9143, 9134, 4931, 4913, 4391, 4319, 4193, 
    4139, 3941, 3914, 3491, 3419, 3194, 3149, 1943, 1934, 1493, 1439, 
    1394, 1349] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:17:38.310

您可以迭代，使用除法和/或模数除以 10 以获取单个数字作为列表。

您可以使用列表排列来获得不同的排列，例如：

```
irb(main):015:0> elts = [9,4,3,1].permutation.to_a
=> [[9, 4, 3, 1], [9, 4, 1, 3], [9, 3, 4, 1], [9, 3, 1, 4], [9, 1, 4, 3], [9, 1, 3, 4], [4, 9, 3, 1], [4, 9, 1, 3], [4, 3, 9, 1], [4, 3, 1, 9], [4, 1, 9, 3], [4, 1, 3, 9], [3, 9, 4, 1], [3, 9, 1, 4], [3, 4, 9, 1], [3, 4, 1, 9], [3, 1, 9, 4], [3, 1, 4, 9], [1, 9, 4, 3], [1, 9, 3, 4], [1, 4, 9, 3], [1, 4, 3, 9], [1, 3, 9, 4], [1, 3, 4, 9]]
irb(main):016:0> elts.each{ |x| puts x.join }
9431
9413
9341
9314
9143
9134
4931
4913
4391
4319
4193
4139
3941
3914
3491
3419
3194
3149
1943
1934
1493
1439
1394
1349 
```

# php - 致命错误：没有 try/catch 块的未捕获异常

> ID：13105803
> 
> 赞同：4
> 
> 时间：2012-10-28T02:07:45.340
> 
> 标签：php, exception, uncaught-exception

当表单字段为空以及插入查询不成功时，我试图抛出异常。我之前见过有人在不使用 try/catch 块且不包含 Exceptions 类的情况下抛出异常。有谁知道我会怎么做？

这是我没有填写所有字段时遇到的错误：

致命错误：未捕获的异常“异常”，带有消息“错误：以下字段为空-标题，电话号码，电子邮件，”在 /vagrant/web/Assignment4/Person.php 第 94 行异常：错误：以下字段为空- 标题、电话号码、电子邮件，在 /vagrant/web/Assignment4/Person.php 第 94 行调用堆栈：0.0014 638168 1\. {main}() /vagrant/web/Assignment4/Form.php:0 0.0172 698568 2。 Person->insert() /vagrant/web/Assignment4/Form.php:179

```
public function insert()
{

  //Storing required $_POST array fields in variable for isset function    
   $errorArray = array();   

   $expectedValues = array(
       "firstName"   => "First Name",
       "lastName"    => "Last Name",
       "title"       => "Title",
       "office"      => "Office",
       "phoneNumber" => "Phone Number",
       "email"       => "Email",
       );

   //Checking to see if all fields are filled in 

    foreach ($expectedValues as $field => $humanName) { 
       if (empty($_POST[$field])) { 
        $errorArray[] = $humanName . ", ";
       }
    }   

    if (count($errorArray) > 0) {
           throw new Exception("Error: The following fields are empty- " .implode(' ', $errorArray));
         }

    else{

       //If they are, insert them into the Perosn table    

               $insert = $this-> doQuery("INSERT INTO Person 
                                         VALUES(
                                        '$_POST[firstName]',
                                        '$_POST[lastName]',
                                        '$_POST[title]',
                                        '$_POST[office]',
                                        '$_POST[phoneNumber]',
                                        '$_POST[email]')");

         //If insert query is successful, return true 
            if ($insert === true){
                echo "<h2>" . "Congragulations! You now work for Assignment 4 Incorporated" . "</h2>";
                return true;
            }

         //If not, throw an exception    

          /*  else{
                throw new Exception
                ("<p>" . "Error: Query was unsuccessful:" . " " . $this->error . "</p>");
               }

               try{
                   $insert == true;
               }
               catch (Exception $x){
                   echo $x->getMessage;
               }      
   */
        }

   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T02:21:47.300

如果不“尝试”某些东西，你就不能抛出 catch 错误；

```
$errorArray = array();   

$expectedValues = array(
    "firstName"   => "First Name",
    "lastName"    => "Last Name",
    "title"       => "Title",
    "office"      => "Office",
    "phoneNumber" => "Phone Number",
    "email"       => "Email",
);

try{
    foreach ($expectedValues as $field => $humanName) { 
        if (empty($_POST[$field])) { 
            $errorArray[] = $humanName . ", ";
        }
    }   

    if (count($errorArray) > 0) {
        throw new Exception("Error: The following fields are empty- " .implode(' ', $errorArray));
    }else{
        $insert = $this-> doQuery("INSERT INTO Person 
            VALUES(
            '$_POST[firstName]',
            '$_POST[lastName]',
            '$_POST[title]',
            '$_POST[office]',
            '$_POST[phoneNumber]',
            '$_POST[email]')"
        );

        if ($insert === true){
            echo "<h2>" . "Congragulations! You now work for Assignment 4 Incorporated" . "</h2>";
            return true;
        }
    }
}catch(Exception $e){
    echo $e->getMessage();  
} 
```

在您的代码中，您在尝试之前抛出了一个错误，导致致命错误“没有 try/catch 块的未捕获异常”。代码捕获了一个错误，但它并没有真正尝试捕获任何东西。

# delphi - delphi 调用 AMD ADL c++ dll

> ID：13105804
> 
> 赞同：1
> 
> 时间：2012-10-28T02:07:45.917
> 
> 标签：delphi, delphi-xe2

尝试与 AMD ADL 库 (DLL) 交互以检索显卡上的信息。有一些功能可以工作，但有问题。

请看这篇有同样问题但没有答案的帖子：[ATI ADL - AdapterInfo_Get](https://stackoverflow.com/questions/11110191/ati-adl-adapterinfo-get)

该函数使用 delphi 数组返回，但内容错误。
该函数使用指向缓冲区的指针返回，但数据相同[错误]。
*[参见下面的代码示例]*

该函数在文档中定义如下：

```
int ADL_Adapter_AdapterInfo_Get(LPAdapterInfo   lpInfo,   int  iInputSize)          

Retrieves all OS-known adapter information. 

This function retrieves the adapter information of all OS-known adapters in the
system. OS-known adapters can include adapters that are physically present in the  
system (logical adapters) as well as ones that are no longer present in the system   
but are still recognized by the OS.

Supported Platforms:
Linux and Windows(XP, Vista and Windows 7); 32bit and 64bit 

Parameters:
[in]    iInputSize  The size of the lpInfo buffer. 
[out]   lpInfo  The pointer to the buffer containing the retrieved adapter information. 

Returns:
If the function succeeds, the return value is ADL_OK. Otherwise the return value is an ADL error code. Result Codes

Remarks:
This API take a fixed-size output array. For dynamic-size output, use ADL_Adapter_AdapterInfoX2_Get function. 
```

adl_structures.pas 文件定义 AdapterInfo 如下：

```
 AdapterInfo = record
    iSize : integer;
    iAdapterIndex : integer;
    strUDID : array [0..ADL_MAX_PATH] of char;
    iBusNumber : integer;
    iDeviceNumber : integer;
    iFunctionNumber : integer;
    iVendorID : integer;
    strAdapterName : array [0..ADL_MAX_PATH] of char;
    strDisplayName : array [0..ADL_MAX_PATH] of char;
    iPresent : integer;

   {$IFDEF MSWINDOWS}
    iExist : Integer;
    strDriverPath : array [0..ADL_MAX_PATH-1] of Char;
    strDriverPathExt : array[0..ADL_MAX_PATH-1] of Char;
    strPNPString : array[0..ADL_MAX_PATH-1] of char;
    iOSDisplayIndex : integer;  
   {$ENDIF} { (_WIN32) || (_WIN64) }

  end;
  LPAdapterInfo = ^AdapterInfo; 
```

我以这种方式为每个函数声明了一个类型：

```
type
  TADL_MAIN_CONTROL_CREATE = function(param1 : ADL_MAIN_MALLOC_CALLBACK; param2 : integer) : integer; cdecl;
  TADL_MAIN_CONTROL_DESTROY = function : integer; cdecl;
  TADL_OVERDRIVE5_TEMPERATURE_GET = function (iAdapterIndex, iThermalControllerIndex : integer; var lpTemperature : ADLTemperature) : integer; cdecl;
  TADL_OVERDRIVE5_FANSPEED_GET = function (iAdapterIndex, iThermalControllerIndex: integer; var lpFanSpeedValue: ADLFanSpeedValue): integer; cdecl;
  TADL_ADAPTER_NUMBEROFADAPTERS_GET = function (var lpNumAdapters: integer): integer; cdecl;
  TADL_ADAPTER_ACTIVE_GET = function(iAdapterIndex: integer; var lpStatus: Integer): Integer; cdecl;
  TADL_ADAPTER_ADAPTERINFO_GET = function(AInfo : Pointer; iInputSize: Integer): integer; cdecl;{stdcall;} 
```

以这种方式创建变量：

```
var
  ADL_Overdrive5_Temperature_Get : TADL_OVERDRIVE5_TEMPERATURE_GET;
  ADL_Adapter_NumberOfAdapters_Get : TADL_ADAPTER_NUMBEROFADAPTERS_GET;
  ADL_Adapter_Active_Get : TADL_ADAPTER_ACTIVE_GET;
  ADL_Adapter_AdapterInfo_Get : TADL_ADAPTER_ADAPTERINFO_GET;
  ADL_Overdrive5_FanSpeed_Get : TADL_OVERDRIVE5_FANSPEED_GET;

  temperature : ADLTemperature;
  fanspeed : ADLFanSpeedValue;
  numGFX, numActiveGFX : Integer;
  GFXActive : Integer;
  x, size : integer;

  ADL_Info : AdapterInfo;
  ADL_PInfo : LPAdapterInfo;

  ADL_AInfo : Array of AdapterInfo;

  ADL_Result : Integer;
  ActiveAdapters : Array of Integer;
  Addr : Pointer;
  strPresent : String; 
```

以这种方式链接到外部函数：

```
ADL_Adapter_NumberOfAdapters_Get := GetProcAddress(hDLL, 'ADL_Adapter_NumberOfAdapters_Get');
    ADL_Overdrive5_Temperature_Get := GetProcAddress(hDLL, 'ADL_Overdrive5_Temperature_Get');
    ADL_Adapter_Active_Get := GetProcAddress(hDLL, 'ADL_Adapter_Active_Get');
    ADL_Adapter_AdapterInfo_Get := GetProcAddress(hDLL, 'ADL_Adapter_AdapterInfo_Get');
    ADL_Overdrive5_Fanspeed_Get := GetProcAddress(hDLL, 'ADL_Overdrive5_FanSpeed_Get'); 
```

然后我尝试将数据放入一个数组并放入一个内存缓冲区。两者都返回完全相同的数据，但它无效。请注意，其他功能正在运行或返回有效错误，例如“驱动程序不支持”。

大批：

```
if Assigned(ADL_Adapter_AdapterInfo_Get) then
    begin
      //*** Array (delphi way)
      Setlength(ADL_AInfo, numGFX);
      Addr := ADL_AInfo;
      size := sizeof(AdapterInfo)*numGFX;

      try
        ADL_Result := ADL_Adapter_AdapterInfo_Get(Addr, size);
        If ADL_Result = ADL_OK then
        begin
          for x := 0 to numGFX-1 do
            begin
              //using a delphi array
              Memo1.Lines.Add('Vender ID for Adapter Index '+IntToStr(ADL_AInfo[x].iAdapterIndex)+' is '+IntToStr(ADL_AInfo[x].iVendorID));
              Memo1.Lines.Add('Device Number for Adapter Index '+IntToStr(ADL_AInfo[x].iAdapterIndex)+' is '+IntToStr(ADL_AInfo[x].iDeviceNumber));
              Memo1.Lines.Add('Adatper Name for Adapter Index '+IntToStr(ADL_AInfo[x].iAdapterIndex)+' is '+ADL_AInfo[x].strAdapterName);
              Memo1.Lines.Add('Display Name for Adapter Index '+IntToStr(ADL_AInfo[x].iAdapterIndex)+' is '+ADL_aInfo[x].strDisplayName);
              if ADL_AInfo[x].iPresent = 0 then strPresent := 'not present' else strPresent := 'present';
              Memo1.Lines.Add('Adapter Index '+IntToStr(ADL_AInfo[x].iAdapterIndex)+' is '+strPresent);
            end;
        end
        else
          Memo1.Lines.Add('Error : '+IntToStr(ADL_Result));
      finally
      end;
    end; 
```

内存缓冲区：

```
if Assigned(ADL_Adapter_AdapterInfo_Get) then
begin
  //*** Pointer (c lookalike)
  size := sizeof(AdapterInfo)*numGFX;
  //GetMem(ADL_PInfo, size);
  ADL_PInfo := AllocMem(sizeof(AdapterInfo) * numGFX);

  try
    ADL_Result := ADL_Adapter_AdapterInfo_Get(ADL_PInfo, size);
    If ADL_Result = ADL_OK then
    begin
      for x := 0 to numGFX-1 do
        begin
          //using getmem with a pointer to a record
          Memo1.Lines.Add('Vender ID for Adapter Index '+IntToStr(ADL_PInfo.iAdapterIndex)+' is '+IntToStr(ADL_PInfo.iVendorID));
          Memo1.Lines.Add('Device Number for Adapter Index '+IntToStr(ADL_PInfo.iAdapterIndex)+' is '+IntToStr(ADL_PInfo.iDeviceNumber));
          Memo1.Lines.Add('Adatper Name for Adapter Index '+IntToStr(ADL_PInfo.iAdapterIndex)+' is '+ADL_PInfo.strAdapterName);
          Memo1.Lines.Add('Display Name for Adapter Index '+IntToStr(ADL_PInfo.iAdapterIndex)+' is '+ADL_PInfo.strDisplayName);
          if ADL_PInfo.iPresent = 0 then strPresent := 'not present' else strPresent := 'present';
          Memo1.Lines.Add('Adapter Index '+IntToStr(ADL_PInfo.iAdapterIndex)+' is '+strPresent);

          inc(ADL_Pinfo);
        end;
    end
    else
      Memo1.Lines.Add('Error : '+IntToStr(ADL_Result));

  finally

   // ZeroMemory(ADL_PInfo, size);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:58:31.167

解决方法很简单。

1.  下载 PRAXIS 库
2.  在文件“adl_structures.pas”中查找 Char 的所有实例并将它们更改为 AnsiChar
3.  在同一个文件中，查找“[0..MAX_PATH]”的所有实例并将它们更改为“[0..MAX_PATH-1]”

上面用于获取 DLL 中函数的指针并提取数据的代码是有效的并且工作正常

# datagridview - DataGridView 不显示 DataTable 内容

> ID：13105806
> 
> 赞同：1
> 
> 时间：2012-10-28T02:08:20.363
> 
> 标签：datagridview, datatable

我有两个文本框；

1.  公司名称
2.  顾客姓名

但是当我搜索`FIrmBAsed`信息时，我会在`DataGridView1`From`DataTAble1`但是当我立即取消`FirmName`内容时，我会去搜索`CUstome Name`我从哪里获得行`DATABLE1`但无法显示在`DataGridView1`......而不是看到......我可以知道原因......

代码：

```
private void txtCustomerName_TextChanged(object sender, EventArgs e)
{
    if (txtCustomerName.Text == "")
    {
        dgvSearchData.Visible = false;
    }
    else
    {
        dgvSearchData.Visible = true;
        dgvSearchData.Location = new Point(txtCustomerName.Location.X, (txtCustomerName.Location.Y + txtCustomerName.Height));

        query = "Select CustomerName,FirmName, Address, City from CustomerMaster WHERE CustomerName LIKE '" + txtCustomerName.Text + "%' ";
        dtCustomer.Clear();
        dtCustomer = objDBConnection.fSelect(query);
        **dgvSearchData.DataSource = dtCustomer;**

        if (dgvSearchData.Rows.Count > 0) dgvSearchData.Rows[0].Selected = false;
        if (dgvSearchData.Rows.Count == 1) dgvSearchData.Rows[0].Selected = true;

        if (dgvSearchData.Rows.Count > 0)
            dgvSearchData.Height = (dgvSearchData.Rows.Count) * 23;

        if (dgvSearchData.Height >= new frmRetailBill().Size.Height)
            dgvSearchData.Height = new frmRetailBill().Size.Height - 20;

        for (int i = 1; i < dgvSearchData.Columns.Count; i++)
            dgvSearchData.Columns[i].Visible = false;
    }
}
 public void fillCusotmerData()
    {
        for (int i = 1; i < dgvSearchData.Columns.Count; i++)
            dgvSearchData.Columns[i].Visible = true;

        txtCustomerName.Text = dgvSearchData.SelectedRows[0].Cells["CustomerName"].Value.ToString();
        txtFirmName.Text = dgvSearchData.SelectedRows[0].Cells["FirmName"].Value.ToString();
        txtAddress.Text = dgvSearchData.SelectedRows[0].Cells["Address"].Value.ToString() + " " + dgvSearchData.SelectedRows[0].Cells["City"].Value.ToString();
        dgvSearchData.Visible = false;
        txtPartNumber.Focus();
    } 
```

# discrete-mathematics - 一秒内能解出的最大n是多少

> ID：13105807
> 
> 赞同：0
> 
> 时间：2012-10-28T02:08:32.613
> 
> 标签：discrete-mathematics

这是罗森离散数学书中建议的练习。我不是在寻找答案，我已经有了答案。我正在找人来帮助解释获得答案所需的步骤/手段/程序（你有什么）。

问题是 ：

使用需要 f (n) 位操作的算法，其中每个位操作在 10^-9 秒内执行，使用这些函数 f (n)，可以在一秒钟内解决问题的最大 n 是多少？C部分：

C。n*log(n) 我知道答案是：

f(n)<= 10^9

n*log(n)<=10^9

n<= 3.96x10^7 所以 n 必须是 3.96x10^7

解决方案手册已经给出了这个答案，但并没有告诉我如何得到答案。我必须做什么才能得到

n<= 3.96x10^7 来自：

n*log(n) <= 10^9

非常感谢任何帮助我理解这一点的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:24:06.503

我会试试看，但也许我错了。所以，从

n*log(n) <= 10^9

你得到：n^n < 10^(10^9) （我希望我没有错）。在这里，我认为您需要尝试找到一个提升到自己的数字小于 10^(10^9)。通过尝试，他们找到了 3.96x10^9

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T21:28:27.443

它被称为“数值数学”。大多数现实世界的问题不能通过重新排列公式中的术语来解决，但必须近似。在这种情况下：你想解决

```
n ln (n) = 10^9 or n = 10^9 / ln (n). 
```

做一个非常粗略的猜测 n = 10^9。

将 n 代入第二个公式：n = 10^9 / ln (n)，得到 n = 4.8255 x 10^7。

再次替换 n：n = 4.8255 x 10^7 / ln (4.8255 x 10^7) 得到 n = 5.6253 x 10^7。

再次替换 n：n = 5.6253 x 10^7 / ln (5.6253 x 10^7) 得到 n = 5.6022 x 10^7。

再次替换 n：n = 5.6022 x 10^7 / ln (5.6022 x 10^7) 得到 n = 5.6050 x 10^7。

再次替换 n：n = 5.6050 x 10^7 / ln (5.6050 x 10^7) 得到 n = 5.6048 x 10^7。

再次替换 n：n = 5.6048 x 10^7 / ln (5.6048 x 10^7) 得到 n = 5.6048 x 10^7。

看不到 3.96 x 10^7 的来源。

# ios - 如何在标签栏应用程序中关闭相机（ImagePickerController）并在重新选择标签时重新加载它？

> ID：13105808
> 
> 赞同：2
> 
> 时间：2012-10-28T02:08:36.007
> 
> 标签：ios, camera, uitabbarcontroller, overlay, uiimagepickercontroller

我正在构建一个应用程序，该应用程序`ImagePickerController`在第一次选择选项卡时显示相机 ( )。由于它是由其视图控制器以模态方式呈现的，因此它占据了整个屏幕，并且我放置了一个关闭按钮，该按钮关闭控制器并返回对选项卡（其中 6 个）的访问权限。下次选择相机选项卡时，相机不会启动，而只是给我一个空窗口，即视图控制器。我已经创建了我的应用程序，`Storyboard`并使用了自定义相机叠加层——而不是标准`UIImagePickerController`叠加层。

我关闭相机： `[self.picker dismissModalViewControllerAnimated:NO];`

有人可以指导我如何始终在此视图控制器中显示相机吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:12:38.673

由于它是第一次工作而不是后续工作，我猜你是`viewDidLoad`在标签视图控制器的方法中显示相机视图控制器。将该代码移动到`viewWillAppear`，它应该在您每次转到选项卡时显示。

`UITabBarDelegate` `tabBar:didSelectItem:`或者，您可以在方法中显示相机。

# c# - 如何在 Windows 8 中获得 PinchZoom 结束事件？

> ID：13105809
> 
> 赞同：0
> 
> 时间：2012-10-28T02:09:08.443
> 
> 标签：c#, windows-8, zooming, scrollviewer, pinchzoom

我将 XAML 与 C# 一起使用。我在 ScrollViewer 中有一个可缩放的图像。如果用户捏缩放图像，我希望在完成光学缩放后获得更大分辨率的图像，并将其替换为分辨率较低的缩放图像。我不想为每个捕获的事件获取更大的图像。仅当用户完成缩放时。希望这很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T20:12:57.913

我想到了。连接到滚动查看器的 ViewChanged 事件，然后在触发事件时，检查 ScrollViewerIsViewChangedEventArgs 中的 e.IsIntermediate。

例如：

```
private void ScrollViewer_ViewChanged(object sender, ScrollViewerViewChangedEventArgs e)
{
  if(!e.IsIntermediate)
  {
    //Load new image depending on the zoom factor
  }
} 
```

当用户完成捏缩放时，它不是中间的。

# c - C 修剪程序不工作

> ID：13105814
> 
> 赞同：0
> 
> 时间：2012-10-28T02:10:06.317
> 
> 标签：c, trim

我是新程序员。你能帮我解释一下为什么这个 C 测试程序不起作用吗？它应该是一个修剪功能：

```
#include <stdio.h>

#define MAX 1000

void main(){
    char line[MAX];
    int lgh;
    line[0] = '\0';
    while ((lgh = getLine(line, MAX)) != 0){
        printf("%s", line);
        line[0] = '\0';
    }
}

int getLine(char s[], int length){
    char s2[length];
    int i, ii, qttWord = 0, qttWord2 = 0;
    int c; // c = getchir() d = EOF
    int flag = 2;

    s2[0] = '\0';
    /*Reads the input and puts it into s[], then, verifies if the input is just \n,
    * if so, returns 0(i), if not, puts '\n' at the end of the string ind '\0' to close
    */
    for (i = 0; i < length-1 && (c = getchar()) != EOF && c != '\n'; ++i){
         s[i] = c;
         ++qttWord;
    }
    if (i == 0){
        if (c == '\n')
            return 0;
    } else if (c == '\n'){
        s[i] = c;
        ++qttWord;
        ++i;
        s[i] = '\0';
    }
    fflush(stdin);
    /*Verifies if the string is just ' ' or '\t'
    * if so, returns 0
    */
    for (i = 0; i <= qttWord && flag != 1; ++i){
        if (s[i] == ' ' || s[i] == '\t'){
            flag = 0;
        } else{
            flag = 1;
        }
    }
    if (flag == 0)
        return 0;
    /*
    *The trim function
    */
    for (i = 0; i < qttWord; ++i){
        if (i < qttWord-1){
            if (s[i] == ' ' && s[i+1] != ' '){
                s2[i] = s[i];
                ++qttWord2;
                printf("1%d\n", s2[i]);//test thing
            }
        }
        if (s[i] != ' '){
            s2[i] = s[i];
            ++qttWord2;
            printf("0%d\n", s2[i]);//test thing
        }
    }
    s[0] = '\0';
    s2[qttWord2+1] = '\0';
    printf("Q:%d\n", qttWord2);//test thing
    printf("A:%s\n", s2);//test thing
    for (i = 0; i < qttWord2+1; ++i){
        s[i] = s2[i];
    }
    return 1;
} 
```

正如你所看到的，我创建了一堆 printf 测试来看看它为什么不起作用，但它没有帮助。我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:16:16.673

使用更标准的库函数，特别`fgets()`是读取行、`isspace()`识别空格字符和`memmove()`复制数据，会生成以下代码：

```
#include <stdio.h>
#include <ctype.h>
#include <string.h>

#define MAX 1000

static int getLine(char s[], int length);

int main(void)
{
    char line[MAX];
    int lgh;
    /* Stop on EOF or a blank line */
    while ((lgh = getLine(line, MAX)) > 0)
        printf("%d <<%s>>\n", lgh, line);
    return(0);
}

/*
** Get a line of input with leading and trailing white space
** stripped off.  The newline is not included.  If there is no
** newline in the space available, the length 0 is returned.
** If EOF is encountered, EOF is returned.
*/
static int getLine(char s[], int length)
{
    char s2[length];

    s[0] = '\0';
    if (fgets(s2, sizeof(s2), stdin) == 0)
        return EOF;

    size_t len = strlen(s2);
    if (s2[len-1] != '\n')
        return 0;   /* No newline - line too long */

    /* Find first non-white space */
    size_t off = 0;
    while (isspace(s2[off]))
        off++;
    if (off > len)
        return 0;

    /* Chop trailing space */
    while (len-- > 0 && isspace(s2[len]))
        s2[len] = '\0';

    /* Non-blank string is in s2[off]..s2[len], plus trailing '\0' */
    memmove(s, &s2[off], len-off+2);
    return(len - off + 1);  /* Length excluding trailing null */
} 
```

请注意，诊断输出`main()`包括报告的长度以及一个仔细分隔的输出字符串，后跟一个换行符。显然，`isspace()`如果您愿意，您可以替换为严格检查空白和制表符的代码。您可以编写自己的类似`fgets()`.

您的原始代码在第一行输入后得到 EOF 时不喜欢它（我认为我没有在空输入上尝试过）。始终确保优雅地处理退化的情况。

# php - 带分数的 PHP&MySQL 配对算法

> ID：13105815
> 
> 赞同：2
> 
> 时间：2012-10-28T02:10:08.200
> 
> 标签：php, mysql, algorithm, match, matching

我在想如何用 PHP 和 MySQL 进行配对，但我找不到。

例如，我们有一个 mysql 用户表，用户设置了一些配置文件，我们用百分比计算配置文件。

我们简单的mysql表：

```
CREATE TABLE IF NOT EXISTS `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL DEFAULT '',
  `password` varchar(255) NOT NULL DEFAULT '',
  `email` varchar(255) NOT NULL DEFAULT '',
  `gender` enum('M','F') NOT NULL DEFAULT 'M',
  `answer1` enum('Y','N') NOT NULL DEFAULT 'Y',
  `answer2` enum('Y','N') NOT NULL DEFAULT 'Y',
  `answer3` enum('Y','N') NOT NULL DEFAULT 'Y',
  `answer4` enum('Y','N') NOT NULL DEFAULT 'Y',
  `answer5` enum('Y','N') NOT NULL DEFAULT 'Y',
  `answer6` enum('Y','N') NOT NULL DEFAULT 'Y',
  `answer7` enum('Y','N') NOT NULL DEFAULT 'Y',
  `answer8` enum('Y','N') NOT NULL DEFAULT 'Y',
  `answer9` enum('Y','N') NOT NULL DEFAULT 'Y',
  `answer10` enum('Y','N') NOT NULL DEFAULT 'Y',
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `email` (`email`),
  KEY `gender` (`gender`)
) ENGINE=MyISAM DEFAULT CHARSET=latin5 AUTO_INCREMENT=1 ; 
```

我们的行：

```
INSERT INTO `users` (`id`, `username`, `password`, `email`, `gender`, `answer1`, `answer2`, `answer3`, `answer4`, `answer5`, `answer6`, `answer7`, `answer8`, `answer9`, `answer10`) VALUES
(1, 'maleuser1', '123456', 'male1@male1.com', 'M', 'Y', 'N', 'Y', 'Y', 'N', 'N', 'N', 'Y', 'N', 'Y'),
(2, 'maleuser2', '123456', 'male2@male2.com', 'M', 'Y', 'Y', 'N', 'N', 'N', 'Y', 'Y', 'Y', 'N', 'Y'),
(3, 'femaleuser1', '123456', 'female1@female1.com', 'F', 'Y', 'Y', 'N', 'Y', 'Y', 'N', 'N', 'Y', 'N', 'Y'),
(4, 'femaleuser2', '123456', 'female2@female2.com', 'F', 'Y', 'Y', 'Y', 'N', 'Y', 'N', 'Y', 'N', 'N', 'Y'); 
```

您可以看到我们有 2 名男性和 2 名女性用户（通常会有数千名），我想搜索最匹配的女性配置文件以获取具有百分比的男性配置文件。

例如我们将查询：

```
select username, blabla as percentage 
from users where gender = 'F' 
and ("here best matchmaking codes") 
and we show users; femaleuser1 and you matching %85. 
```

我们只会显示大于 %70 的匹配。

所以我正在谈论这个，但我无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:05:37.353

基本上，您无法将苹果与橙子进行比较。您可以寻找分配并最大化工人和工作。在您的问题描述中，它将最大化女性和男性对。寻找匈牙利算法或 edmonds v 开花算法。

# java - 无法使 if 语句起作用

> ID：13105820
> 
> 赞同：1
> 
> 时间：2012-10-28T02:10:40.910
> 
> 标签：java

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

```
import java.util.Scanner;

 public class stringComparer {
    public static void main(String[] args) {
        Scanner scan = new Scanner (System.in);
        System.out.println ("Enter 1 word here - ");
        String word1 = scan.next();

    System.out.println ("Enter another word here - ");
    String word2 = scan.next();

    if (word1 == word2) {
        System.out.println("They are the same");
    }
}
} 
```

大约 10 分钟前我让它工作了，改变了一些东西，现在由于某种原因它不显示“它们是一样的”？它真的很简单，但我看不出我哪里出错了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:12:38.993

*运算符按引用*比较`==`对象。

 *要确定两个不同`String`的实例是否具有相同的值，请调用`.equals()`.

因此，更换

```
if (word1 == word2) 
```

和

```
if (word1.equals(word2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T02:14:37.620

请试试这个它会工作，`String is not primitive`所以当你检查`==`它会检查参考。

```
import java.util.Scanner;
/**
 * This program compares two strings
 * @author Andrew Gault
 * @version 28.10.2012
 */
 public class stringComparer
{
    public static void main(String[] args)
    {
        Scanner scan = new Scanner (System.in);
        System.out.println ("Enter 1 word here - ");
        String word1 = scan.next();

    System.out.println ("Enter another word here - ");
    String word2 = scan.next();

    if (word1.equals(word2))
    {
        System.out.println("They are the same");
    }

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T02:15:06.887

利用

```
if (word1.equals(word2))
{
 System.out.println("They are the same");   
} 
```

看看为什么[在这里](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)*

# objective-c - 通讯录联系人是否有“uniqueID”类型的属性？

> ID：13105824
> 
> 赞同：4
> 
> 时间：2012-10-28T02:11:39.007
> 
> 标签：objective-c, ios, addressbook, uniqueidentifier, abaddressbook

我正在制作一个涉及用户联系人的游戏，但需要一种唯一标识每个联系人的方法。这是因为用户可以轻松更改给定联系人的姓名、电话号码或其他属性。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T02:15:06.040

您可以使用`ABRecordGetRecordID()`来获取记录的唯一 ID。它返回一个`ABRecordID`类型定义为`int32_t`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-27T18:57:56.120

ABRecordGetRecordID() 是您可以使用的 API。但是，苹果文档确实说明了有关此 API 返回的 ABRecordID 的一些值得注意的点。

> 地址簿数据库中的每条记录都有一个唯一的记录标识符。此标识符始终引用相同的记录，除非该记录被删除或数据被重置。记录标识符可以在线程之间安全地传递。不能保证它们在不同设备上保持不变。

根据苹果指南建议的方法是

> 保持对特定记录的长期引用的推荐方法是存储名字和姓氏，或名字和姓氏的哈希值，以及标识符。当您按 ID 查找记录时，将记录的名称与您存储的名称进行比较。如果它们不匹配，则使用存储的名称查找记录，并存储记录的新 ID。

在我的应用程序中，我还在检查联系人的创建日期，因为 ABRecordID 的名称可能已被用户更改。设备重置后联系人的创建日期**不会改变。**

[虽然我在这里粘贴了大部分内容，但始终建议阅读文档](https://developer.apple.com/library/ios/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/DirectInteraction.html)

# javascript - 如何在 oracle apex 4.2 中包含两个 jquery 移动版本

> ID：13105825
> 
> 赞同：1
> 
> 时间：2012-10-28T02:12:29.347
> 
> 标签：javascript, jquery-mobile, oracle-apex

我在尝试将 jquery mobile 1.2 包含在 apex 4.2 中时遇到了一些问题。目前 apex 4.2 与 jquery mobile 1.1.1 捆绑在一起，我需要使用支持对话框并以简单方式弹出的最新版本。但是当我尝试包含这个最新版本时。我的页面变得如此混乱，就像被 jquery 1.1.1 和 1.2 版本渲染两次一样。每个对象出现两次。我试过使用这个脚本：

```
<script>
var jqm120 = jQuery.noConflict();
</script> 
```

但没有运气。请给我一个提示。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:30:36.323

在**APEX 4.2**`#APEX_CSS#`中，`#APEX_JAVASCRIPT#`您的页面模板中有新的替换字符串。如果您想使用自己的库，可以**删除它们。**删除这些替换字符串将阻止将以下代码添加到页眉中（假设应用程序属性中的*Content Delivery Network*设置为*"None"*）：

```
/your_image_prefix/css/apex.min.css?v=4.2.0.00.27
/your_image_prefix/libraries/jquery-ui/1.8.22/themes/base/jquery-ui.min.css

/your_image_prefix/libraries/apex/minified/desktop_all.min.js?v=4.2.0.00.27
/your_image_prefix/libraries/apex/minified/legacy.min.js?v=4.2.0.00.27

<script type="text/javascript">
var apex_img_dir = "/your_image_prefix/", htmldb_Img_Dir = apex_img_dir;
</script> 
```

![警告](../Images/b15945b7a1f707257cea7cc230e03f66.png) **警告**：您可能必须手动包含一些已删除的文件，因为某些 APEX 默认功能将同时被删除：/

例如 ：

*   `apex.min.css?v=4.2.0.00.27`需要开发者栏正确显示。
*   `desktop_all.min.js?v=4.2.0.00.27`不仅包括 JQuery 和 JQuery UI，还包括所有顶点 JQuery 核心功能......
*   `legacy.min.js?v=4.2.0.00.27`正在定义一些主要的 apex Javascript 函数（例如`doSubmit()`，等等...）。

**不幸**的是，APEX 不提供替换字符串来仅删除 JQuery 库...

所以一个解决方案是检索默认的 APEX 文件，然后只删除其中的 JQuery 库代码，并用较新的库代码替换它......

这是我找到的唯一解决方案，即使`JQuery.noConflict`您提到的更简单的解决方案当然是使用（老实说我没有尝试过），但它会加载库两次，使您的页面加载速度变慢？

**编辑**：

抱歉，在您的情况下，当您使用**JQuery mobile**时，它​​应该类似于：

```
/your_image_prefix/libraries/jquery-mobile/1.1.1/jquery.mobile-1.1.1.min.css
/your_image_prefix/themes/theme_50/css/4_2.css

/your_image_prefix/libraries/apex/minified/mobile_all.min.js?v=4.2.0.00.27
/your_image_prefix/libraries/jquery-mobile/1.1.1/jquery.mobile-1.1.1.min.js
/your_image_prefix/libraries/apex/minified/legacy.min.js?v=4.2.0.00.27

<script type="text/javascript">
var apex_img_dir = "/your_image_prefix/", htmldb_Img_Dir = apex_img_dir;
</script> 
```

将从模板中删除（您可以自己检查）。

但这些言论仍然适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T02:35:25.240

你可以这样做：

```
<script type='text/javascript' src='js/jquery_1.7.1.js'></script>   
<script type='text/javascript'>  
 // In case you wonder why we pass the "true" parameter,
 // here is the explanation:
 //   - When you use jQuery.noConflict(), it deletes
 //     the "$" global variable.
 //   - When you use jQuery.noConflict(true), it also
 //     deletes the "jQuery" global variable.
 var $jq = jQuery.noConflict(true);  
</script>  
<script type='text/javascript' src='js/jquery_1.2.1.js'></script> 
```

这样，当您想要使用新版本的 jquery 而不是`$`使用`$jq`.

```
$jq('.selector').on('click', function(){  
    //do something  
}); 
```

# ruby - 存储桶中的 amazon s3 和carrierwave 随机图像名称与数据库中的不匹配

> ID：13105827
> 
> 赞同：5
> 
> 时间：2012-10-28T02:12:57.950
> 
> 标签：ruby, amazon-s3, carrierwave

我正在使用载波、rails 和 amazon s3。每次我保存图像时，图像都会显示在 s3 中，我可以在管理控制台中看到它，名称如下：

`https://s3.amazonaws.com/bucket-name/ uploads/images/10/888fdcfdd6f0eeea_1351389576.png`

但在模型中，名称是这样的：

`https://bucket-name.s3.amazonaws.com/ uploads/images/10/b3ca26c2baa3b857_1351389576.png`

首先，为什么随机名称不同？我在上传器中生成它，如下所示：

```
def filename
  if original_filename
    "#{SecureRandom::hex(8)}_#{Time.now.to_i}#{File.extname(original_filename).downcase}"
  end
end 
```

我知道它不会在每次调用时生成随机字符串，因为模型中的错误 url 是一致的并已保存。在保存图像名称并将其发送到 amazon s3 后，必须在此过程中的某个位置生成一个新图像以保存在模型中。奇怪的。

另外，我可以在不使用正则表达式的情况下让 url 与 s3/bucket 而不是 bucket.s3 匹配吗？载波中有选项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:12:20.503

CarrierWave 默认不存储 URL。相反，它会在您每次需要时生成它。

因此，每次`filename`调用它都会返回一个不同的值，因为`Time.now.to_i`.

请改用`created_at`column，或添加一个新列来存储随机 id 或完整文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T01:58:49.370

如果它仍然是原始文件名，我通过保存文件名来解决它。在上传器中，输入：

```
def filename
  if original_filename && original_filename == @filename
    @filename = "#{any_string}#{File.extname(original_filename).downcase}"
  else
    @filename
  end
end 
```

sumbdomain 与路径的问题实际上并不是问题。它适用于子域。即`https://s3.amazonaws.com/bucket-name/`，`https://bucket-name.s3.amazonaws.com/`两者都工作正常。

# c++ - 如何在c++（linux）中通过socket显示html文件内容？

> ID：13105830
> 
> 赞同：1
> 
> 时间：2012-10-28T02:13:43.330
> 
> 标签：c++, sockets

我正在用 C++ 实现服务器。每当来自客户端的请求到来时，我都会解析该请求并检查该请求是否针对 GET/HEAD。如果请求是 GET 我必须显示文件的内容。我的问题是，如果是文本文件内容正确地出现在浏览器上，但如果是 html 文件请求，则浏览器显示 html 文件源代码。我需要一些提示或方向，如何显示 html 文件的内容？

代码片段：

```
if(c.r_type == "GET")
{
  ifstream file;
  char *readblock;
  size_t size;
  file.open(c.r_filename.c_str());
  if (send(c.r_acceptid,c.r_ctype.c_str(), strlen(c.r_ctype.c_str()), 0) == -1)
    perror("send");
  if (file.is_open())
  {
    file.seekg (0, ios::end);
    size = file.tellg();
    readblock = new char [size];
    file.seekg (0, ios::beg);
    file.read(readblock, size);
  }
      else
        cout<<"Never went Inside"<<endl;
  if (send(c.r_acceptid, readblock, size, 0) == -1)
       perror("send");
  file.close();
  delete [] readblock;
  close(c.r_acceptid);
} 
```

# java - Java- 使用 Deflater 或 GZIPOutputStream 连接压缩数据

> ID：13105831
> 
> 赞同：0
> 
> 时间：2012-10-28T02:14:02.330
> 
> 标签：java, compression, gzip, deflate, gzipoutputstream

我们有一堆线程来获取数据块，压缩这些数据，然后最终将它们连接成一个大字节数组。如果有人可以扩展这个想法或推荐另一种方法，那就太棒了。我目前有两种方法正在尝试，但都没有按照他们应该的方式工作：

* * *

**第一个**：我让每个线程的`run()`函数获取输入数据并`GZIPOutputStream`用于压缩它并将其写入缓冲区。

**这种方法的问题**在于，因为每个线程都有一个数据块，当我调用时，它是一个较长的完整数据的一部分`GZIPOutputStream`，它会将那个小块视为要压缩的完整数据。这意味着它会粘在标题和预告片上（我也使用自定义字典，所以我不知道标题现在有多少位，也不知道如何找出）。

我认为你可以手动切断标题和预告片，你只会留下压缩数据（并留下第一个块的标题和最后一个块的预告片）。我不确定这种方法的另一件事是我是否可以做到这一点。如果我将标题留在第一个数据块上，它是否仍能正确解压缩。该标头是否仅包含数据的第一个块而不包含其他连接块的信息？

* * *

**第二种**方法是使用`Deflater`类。在这种情况下，我可以简单地设置输入，设置字典，然后调用`deflate()`.

**问题**是，这不是 gzip 格式。那只是“原始”压缩数据。我不知道如何制作它以便 gzip 可以识别最终输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T02:57:41.700

您需要一个写入由其他线程调用的单个 GZIPOutputStream 的方法，它们之间有适当的协调，这样数据就不会混淆。或者让线程写入临时文件，并在第二阶段将其全部组装和压缩。

# c# - 文本框中的 C# 和退格检测以重新加载列表框

> ID：13105837
> 
> 赞同：0
> 
> 时间：2012-10-28T02:15:00.323
> 
> 标签：c#, winforms

作为我班级作业的一部分，我有一个连接到数据库的列表框，它显示学生的名字和姓氏。我还创建了一个搜索功能，用户在其中输入他们在文本框中寻找的名字和/或姓氏，当他们按下“搜索”按钮时，它会显示过滤后的结果出现在列表框中。

问题的最后一部分要求我检测用户何时清除文本框，以再次在列表框中显示原始数据。我有一个名为 databaseload() 的方法中的数据，所以这真的取决于我如何让我的程序检测到列表框再次为空。

我在网上找到了一些东西，当我尝试它们时，它不起作用。

```
private void searchTextBox_KeyPress(object sender, KeyPressEventArgs e){
  if (e.KeyChar == 8)
  {
    databaseload();
  }
} 
```

我也试过*KeyDown*

我也不希望它在检测到第一个退格键时重新加载。我希望它在 searchTextBox 中没有任何内容时重新加载列表框。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:16:14.843

您应该处理`KeyUp`在将密钥输入文本后触发的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T02:22:23.453

有一个`TextChanged`事件似乎比手动检测退格键更合适。该`delete`键也可以删除所有文本，或者有人可能只是突出显示所有文本并将`cut`其添加到剪贴板。

`TextChanged`使用事件的示例：

```
private void textBox_TextChanged(object sender, EventArgs e)
{
    if (string.IsNullOrEmpty(((TextBox)sender).Text))
    {
            // reload database
    }
} 
```

# matlab - 使用矩阵中给定图形的强度变换

> ID：13105840
> 
> 赞同：-1
> 
> 时间：2012-10-28T02:15:11.750
> 
> 标签：matlab

使用 Matlab，我必须使用这个给定的图形来转换图像的强度：

![形象的](../Images/708f9829fe7722b362b3e065bafb3fae.png)

其中 s=T(r)

我完全不知道这种转变。这是一个家庭作业，有人可以帮助我至少识别这个功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:17:37.420

这只是一条直线的方程，y=ax+b... 在 matlab 表示法中：

```
 r=linspace(0,30,1000); %this can be whatever r units are... r=0:0.1:100 etc.
 T=2*(r-10).*(r>=10 & r<=20);
 plot(r,T) 
```

将产生你刚刚绘制的情节......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:49:21.597

解在 [10, 20] 的区间上为 s = 2r - 20，否则为 0。

然后，使用现有图像，可以修改强度。

# ruby-on-rails - Rails 2 个表，1 个模型

> ID：13105841
> 
> 赞同：3
> 
> 时间：2012-10-28T02:15:22.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我对 ruby​​/rails 比较陌生，我有以下问题：

我正在开发一个调度应用程序，并且有一个名为 Classes 的模型和另一个名为 ClassEntries 的模型。它们之间的关系是每个用户每学期可以有多个班级条目，每个班级都与一个班级有关。Classes 表中的每条记录都属于特定的大学。一个用户可以在 ClassEntries 表中有多个条目用于 1 个学期（通常为 5 个）。他们的日程表由所有具有相同学期 ID 的 ClassEntries 组成。

我不确定我是否应该有第三个模型，称为 Schedule，它将 ClassEntries 和 Classes 模型中的信息汇集到手头的用户中。我最初用 PHP 编写了这个功能，我只是使用 MySQL JOIN 来收集必要的信息。在 Rails 中，似乎应该有更好的方法来实现这一点。

在 Rails 中解决这个问题的最佳方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:52:20.047

因此，您正在寻找的几乎是 Rails 中的关联。

您将拥有以下内容：

```
def User < ActiveRecord::Base
  has_many :course_entries
  has_many :courses, :through => :class_entries
end

def CourseEntry < ActiveRecord::Base
  belongs_to :user
  belongs_to :course
end

def Course < ActiveRecord::Base
  has_many :course_entries
  has_many :users, :through => :class_entries
end 
```

建立这些关联后，Rails 将允许您执行诸如 `some_user.courses`or之类的操作，`some_course.users`并且它将通过 CourseEntry 为您进行连接。

让我知道这是否有帮助。如果您需要我更深入地了解，请告诉我。

# java - 在 Adob e Flash Builder 和 Eclipse 上调试 Flex 和 Java

> ID：13105842
> 
> 赞同：0
> 
> 时间：2012-10-28T02:15:49.797
> 
> 标签：java, eclipse, apache-flex, debugging, flash-builder

我是 flex 开发世界的新手。我有一个环境，其中 Flex 是客户端，Java 在服务器上。我为每个使用的 IDE 是 Adob​​e FlashBuilder 4.5 和 Eclipse。

问题是我同时被困在两种语言的调试中。我开始在 Flex 中进行调试，同时在 Eclipse 中设置了几个断点。但是，当程序转移到服务器端时，它并没有在我的 Eclipse IDE 中完全进入调试模式。

也许我错过了将两者联系起来，但从我所读到的是这是自动的。期待你的回答:)

# jquery - Ajax/jQuery show/hide .element on hover()：引用悬停的包装器？

> ID：13105843
> 
> 赞同：1
> 
> 时间：2012-10-28T02:16:00.867
> 
> 标签：jquery, ajax, hover, jquery-animate, jquery-hover

这是我在 jQuery/ajax 中的第一次尝试，我遇到了麻烦。

这是我的HTML代码...

```
<div id="level_1_description" class="level_description wrapper">
    <h2><a href="#">Food</a></h2>
    <strong>..to have a good taste</strong>
    <p class="description"><span class="text">You want to eat healthy food.</span></p>
</div> 
```

...以及动画悬停动作的脚本：显示/隐藏*.level_description*容器中的*.description*元素。

 *```
<script>
$('.level_description').hover(function(){
    $('.description').animate({height:$('.text').height()},100);
  },
  function () {
    $('.description').animate({height:1},100);
  }
);

</script> 
```

工作正常，但我不知道如何与第二个包装器（#level_2_description）分开，女巫具有相同的元素（.level_description，.description）

我想用这样的东西？：

```
...
$(this.'.description').animate({
  height:$(this.'.text').height()
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:24:18.923

您想根据当前悬停的元素与类 leve_description 查找元素。您可以使用 jquery[`find()`](http://api.jquery.com/find/)在父元素中查找元素。

```
$('.level_description').hover(function(){
    var $levelDescription = $(this);

    $levelDescription.find('.description').animate({height:$levelDescription.find('.text').height()}, 100);
}, function () {
    $(this).find('.description').animate({height:1}, 100);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:02:01.860

我会在选择器中使用上下文，并使用三元来切换这样一个简单的动画：

```
$('.level_description').on('mouseenter mouseleave', function(e) {
    $('.description', this).animate({
        height: e.type=='mouseenter' ? $('.text', this).height() : 1
    },100);
}); 
```

[**小提琴**](http://jsfiddle.net/Bp9DA/)*

# html - 使用 htaccess 重写特定 URL

> ID：13105845
> 
> 赞同：1
> 
> 时间：2012-10-28T02:16:06.043
> 
> 标签：html, .htaccess, mod-rewrite

好的，所以我对 htaccess 非常陌生。基本上，我想要我的网站

[http://mydomain.com/game.html](http://mydomain.com/game.html) 去 [http://mydomain.com/index.php?page=game](http://mydomain.com/index.php?page=game)

我没有当前的 .htaccess，因为我尝试过的几乎所有方法都失败了。有人对此有工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T02:19:34.567

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)\.html$ /index.php?page=$1 [L,QSA] 
```

`/anything.html`这在内部重写了对to的请求`/index.php?page=anything`。您必须确保所有链接看起来像`http://mydomain.com/anything.html`，因为它不会对浏览器的 URL 地址栏中显示的内容做任何事情。

# java - 尝试在java中四舍五入到小数点后两位

> ID：13105847
> 
> 赞同：2
> 
> 时间：2012-10-28T02:17:34.563
> 
> 标签：java, eclipse, decimal

System.printf("%.2f", currentBalance) 工作正常，但问题是句子后面出现了四舍五入的数字。把代码放到你的eclipse程序中运行，你会发现肯定有问题。如果有人可以提供帮助，将不胜感激。

```
public class BankCompound {

public static void main (String[] args) {
    compound (0.5, 1500, 1);
}

public static double compound (double interestRate, double currentBalance, int year) {

    for (; year <= 9 ; year ++) {

    System.out.println ("At year " + year +  ", your total amount of money is ");
    System.out.printf("%.2f", currentBalance);
    currentBalance = currentBalance + (currentBalance * interestRate);  
    }
    System.out.println ("Your final balance after 10 years is " + currentBalance);
    return currentBalance;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:24:08.810

请试试这个

```
import java.text.DecimalFormat;

public class Visitor {

    public static void main (String[] args) {
        compound (0.5, 1500, 1);
    }

    public static double compound (double interestRate, double currentBalance, int year) {

        for (; year <= 9 ; year ++) {

        System.out.println ("At year " + year +  ", your total amount of money is "+Double.parseDouble(new DecimalFormat("#.##").format(currentBalance)));

        currentBalance = currentBalance + (currentBalance * interestRate);  
        }
        System.out.println ("Your final balance after 10 years is " + currentBalance);
        return currentBalance;
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:19:39.917

[`System.out.println()`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println%28java.lang.String%29)，顾名思义

> 表现得好像它调用了`print(String)`then `println()`。

`System.out.print()`打印当前余额后使用并放置换行符。

```
System.out.print("At year " + year +  ", your total amount of money is ");
System.out.printf("%.2f", currentBalance);
System.out.println();

// or
System.out.print("At year " + year +  ", your total amount of money is ");
System.out.printf("%.2f\n", currentBalance); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T02:27:07.237

System.out.printf("在第 %d 年，您的总金额为 %.2f\n", year, currentBalance);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T02:38:05.377

错误调用是第一个 System.out.println()，因为它在打印给定内容后附加了一个新行。

有两种解决方案-

方法-1：

```
System.out.print("At year " + year +  ", your total amount of money is ");
System.out.printf("%.2f\n", currentBalance); 
```

方法-2：[将 String.format() 与 println() 一起使用]

```
System.out.println ("At year " + year + ", your total amount of money is "
                                      + String.format("%.2f", currentBalance)); 
```

两者都会产生相同的结果。即使是第二个也更具可读性。

输出：

在第 1 年，您的总金额为 1500.00

在第 2 年，您的总金额为 2250.00

在第 3 年，您的总金额为 3375.00

在第 4 年，您的总金额为 5062.50

在第 5 年，您的总金额为 7593.75

在第 6 年，您的总金额为 11390.63

在第 7 年，您的总金额为 17085.94

在第 8 年，您的总金额为 25628.91

在第 9 年，您的总金额为 38443.36

您 10 年后的最终余额为 57665.0390625

String.format 返回一个格式化的字符串。System.out.printf 还会在 system.out(console) 上打印格式化字符串。

根据您的需要使用它们。

# django - 在 Heroku 中创建一个新目录

> ID：13105852
> 
> 赞同：5
> 
> 时间：2012-10-28T02:19:02.550
> 
> 标签：django, heroku

我对 Heroku 很陌生，我刚刚将我的 Django 应用程序推送到 Heroku 中。有谁知道如何在“/app”下创建一个“日志”目录？/app 是我的应用程序的顶级目录吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-15T09:53:12.860

日志目录在您的`.gitignore`文件中吗？如果`/log`是一个未版本控制的目录，那么[K Z 的答案](https://stackoverflow.com/questions/13105852/creating-a-new-directory-in-heroku/13106564#13106564)应该有助于 Heroku；除非 Heroku 和你的 repo 中的日志目录发生了其他事情。

### 关于提交一个空目录

您不能将空目录提交给 git，但您可以在目录中添加一个`.gitignore`文件，该目录会忽略除自身之外的所有文件。这将尽可能接近对空目录进行版本控制，因为我确定您不想对日志文件进行版本控制。

确保日志目录不在您的主`.gitignore`文件中。然后在您的日志目录中创建一个`.gitignore`包含以下内容的新目录：

```
# Ignore everything in this directory
*
# Except this file
!.gitignore 
```

您可以在此处查看[Jamie Flournoy 的](https://stackoverflow.com/users/115218/jamie-flournoy)答案[如何将空目录添加到 Git 存储库？](https://stackoverflow.com/questions/115983/how-can-i-add-an-empty-directory-to-a-git-repository)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:16:27.427

要创建一个新目录，您只需在本地目录中创建一个（即，`cd app; mkdir log`然后提交并推送到 Heroku.

是否`/app`是顶级目录取决于您的目录结构，通常是Heroku上设置为顶级目录的应用程序名称。但是，如果您位于用于 Heroku 应用程序的 git 存储库中，则可以通过以下方式找到根目录：

```
git rev-parse --show-toplevel 
```

这是一个 git 命令，它告诉你这个 git 目录的顶级目录。

# python - 删除两个以上的连续字符

> ID：13105857
> 
> 赞同：3
> 
> 时间：2012-10-28T02:19:40.353
> 
> 标签：python

我想删除任何`char`连续重复两次以上的内容。

```
import re
re.sub(r'([a-z])\1+', r'\1', 'ffffffbbbbbbbqqq') 
```

`fbq`当我需要的时候，它让我回来了`ffbbqq`。目标是在进行拼写检查之前对字符串进行预处理。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T02:21:44.543

```
In [204]: import re

In [205]: re.sub(r'([a-z])\1+', r'\1\1', 'ffffffbbbbbbbqqq')
Out[205]: 'ffbbqq' 
```

# git - 为什么 git blame 视图中的一行的 SHA 会有一个前导插入符号 (^)？

> ID：13105858
> 
> 赞同：21
> 
> 时间：2012-10-28T02:19:46.953
> 
> 标签：git

我不确定这种行为是否奇怪，但这就是正在发生的事情：似乎如果我`git blame`在一个文件上运行，该文件中来自初始提交的任何行都有一个带有前导插入符号 ( `^`) 的 SHA，就像这样

```
^bb65026 (Brian Danielak 2012-10-27 19:11:54 -0700 1) 你好，世界！
bbcd4a96 (Brian Danielak 2012-10-27 19:11:54 -0700 2) 你好！

```

## 重现步骤

从终端提示：

```
mkdir newProject
cd newProject
git init
echo 'hello, world!' >> testFile.txt
git add testFile.txt
git commit -m "Initial Commit"
git blame testFile.txt 
```

然后验证您的责备输出是否有一个前导插入符号，就像我的一样（尽管您的 SHA 可能不匹配）

```
^bb65026 (Brian Danielak 2012-10-27 19:11:54 -0700 1) hello, world! 
```

作为测试，您可以尝试在文件中添加第二行并重新提交，以查看只有第一行的哈希包含前导插入符号

```
echo 'hello again!' >> testFile.txt
git add testFile.txt
git commit -m "Initial Commit"
git blame testFile.txt 
```

我的责备输出现在看起来像这样：

```
^bb65026 (Brian Danielak 2012-10-27 19:11:54 -0700 1) 你好，世界！
bbcd4a96 (Brian Danielak 2012-10-27 19:11:54 -0700 2) 你好！

```

谁能解释为什么会发生这种情况，以及我是否应该预料到它？只有当一行来自回购中的第一次提交时才会发生这种情况吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-28T02:48:02.057

[git blame](http://www.kernel.org/pub/software/scm/git/docs/git-blame.html)的文档实际上确实提到了插入符号被用于“边界提交”，看起来他们正在定义类似“这个责备范围内最旧的提交”之类的东西——在你的情况下，它是项目的初始提交，但是有一些不同的选择，你可能只归咎于 3 周前的提交。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-30T08:20:43.107

我在一个非常古老的存储库中突然遇到了这个问题，并被它弄糊涂了。

问题最终是我不知何故在某个时候得到了一个浅克隆。一个简单的`git fetch --unshallow`补救措施。

# git - 位桶访问不起作用

> ID：13105861
> 
> 赞同：3
> 
> 时间：2012-10-28T02:20:46.373
> 
> 标签：git, bitbucket

不知道发生了什么，但一直以来我都可以使用 bitbucket 从 git 中拉、推、克隆等。但是在我在线更改密码后，它会要求我输入帐户密码，然后说：

```
fatal: Authentication failed 
```

这有什么原因吗？我的密码绝对正确。我什至无法完全克隆到新文件夹！

顺便说一句，我正在使用`git version 1.8.0`. 我最近升级了它，不知道这是否与它有关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T21:57:09.753

我有同样的问题。

使用 -v 运行 push 根本没有帮助。由于我也是最近才升级到 git 1.8.0 我尝试降级并得到了同样的错误，所以它要么是其他一些包，要么是它们末端的东西。

我最终做的事情（也是我很久以前应该做的事情）是设置 ssh 而不是使用 https。如果您也是这种情况，请转到[将 SSH 协议与 Bitbucket](https://confluence.atlassian.com/display/BITBUCKET/Using+the+SSH+protocol+with+Bitbucket)一起使用并按照说明进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T05:02:26.333

原来这是bitbucket的一个错误。我想现在已经修好了。他们没有正确支持 1.8.0

# php - MySQL查询未插入数据

> ID：13105864
> 
> 赞同：0
> 
> 时间：2012-10-28T02:21:25.777
> 
> 标签：php, mysql

我在这里有点麻烦，只是我试图将从用户那里获得的一些数据输入到表中，但由于某种原因它不会让我插入数据，但是我完全有对表的另一部分进行相同的查询，这似乎工作得很好。

例如，当我执行此查询时，它不起作用：

```
$updateibtask2 = "UPDATE ibtask_task2_75beep SET 

    Trial1_tone_actual=  '$taskerror[0]', Trial2_tone_actual= '$taskerror[1]',  Trial3_tone_actual= '$taskerror[3]',

    Trial4_tone_actual=  '$taskerror[4]', Trial5_tone_actual= '$taskerror[5]',  Trial6_tone_actual= '$taskerror[6]', 

    Trial7_tone_actual=  '$taskerror[7]', ... WHERE user_id = '$memberid'"; 
```

但是，当我尝试这个查询时，它工作得很好：

```
$updateibtask2_estimate = "UPDATE ibtask_task2_75beep SET 

    Trial1_tone_estimate=  '$taskerror[0]', Trial2_tone_estimate= '$taskerror[1]',  Trial3_tone_estimate= '$taskerror[3]',

    Trial4_tone_estimate=  '$taskerror[4]', Trial5_tone_estimate= '$taskerror[5]',  Trial6_tone_estimate= '$taskerror[6]', 

    Trial7_tone_estimate=  '$taskerror[7]', ... WHERE user_id = '$memberid'"; 
```

我只是想知道我哪里出错了？

此外，如果它有助于我用来运行这些查询的 PHP 代码是：

```
 $task2 = array();
 $task2 = $_SESSION['task2'];

 $task2estimate = array();
 $task2estimate = $_SESSION['estimatedpress2'];

 $task2actual = array();
 $task2actual = $_SESSION['actualpress2'];

 addacutalerror_75($memberid, $task2actual);
 addestimatederror_75($memberid, $task2estimate); 
```

还要检查是否存在数据，因为`$task2actual`我做了回声 ..[0]、..[1].. 等，并且数组中存在数据。

**更新**

对于那些正在寻找解决方案并遇到同样问题的人，这就是我所做的：

```
function addacutalerror_75($memberid, $task2actual) {

$insertmember = "INSERT INTO ibtask_task2_75beep (user_id, Trial1_tone_actual,
    Trial2_tone_actual, Trial3_tone_actual, Trial13_tone_actual,
    Trial14_tone_actual, ..., Trial40_notone_actual) VALUES ('$memberid', '$task2actual[0]', '$task2actual[1]', '$task2actual[3]', '$task2actual[18]', '$task2actual[21]', '$task2actual[22]', '..., '$task2actual[24]', '$task2actual[29]', '$task2actual[33]','$task2actual[38]' )";

mysql_query($insertmember) or die(mysql_error());

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T02:26:49.600

顺便说一句，`UPDATE`与`INSERT`.

**UPDATE** - 修改表上的现有记录。
**INSERT** - 在表上添加新记录。

您的查询很好，但您正在进行更新。但是你想插入记录而不是更新记录对吗？插入记录时的查询如下所示，

```
$updateibtask2 = "INSERT INTO ibtask_task2_75beep 
                     (Trial1_tone_actual, Trial2_tone_actual, 
                      Trial3_tone_actual,...) 
                  VALUES ('$taskerror[0]', '$taskerror[1]',...)"; 
```

并且您的查询容易受到`SQL Injection`. 请花时间阅读下面的文章以防止`SQL injection`，

*   [**在 PHP 中防止 SQL 注入的最佳方法是什么？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# java - Heroku：使用 NewRelic 和 heroku deploy:war 方法

> ID：13105865
> 
> 赞同：1
> 
> 时间：2012-10-28T02:21:43.657
> 
> 标签：java, heroku

**Heroku**允许选择使用直接部署**Java** .war 文件`heroku deploy:war`（在这种情况下，Procfile 由 heroku 自动管理）。

如何在这样的设置中使用**NewRelic ？**Heroku DevCenter on NewRelic 上的当前文档要求将 NewRelic jar 放在 Java 应用程序的根文件夹中。

`heroku deploy:war`当使用直接部署应用程序而不是通过 git时如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-01T16:55:57.367

跟进 New Relic 支持的这个问题，并为这个旧问题添加澄清声明。不幸的是，据我所知，无法在嵌入式战争文件中使用 New Relic .jar 文件而不引发战争。

在 Heroku 上，使用 deploy:war 只是将你的战争包装在 jetty runner 中。另一种方法是通过部署源代码而不是二进制文件来部署使用 jetty runner 的应用程序。说明在[这里：](https://devcenter.heroku.com/articles/deploy-a-java-web-application-that-launches-with-jetty-runner)

如果您使用上述方法，您应该能够将 New Relic 添加到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:38:22.917

我收到了 Heroku 支持团队的回复：

> WAR deploy 没有专门处理这种情况。但是，它应该可以工作。您可以在 WAR 中包含 New Relic JAR，并在 JAVA_OPTS 配置中添加 javaagent 标志。

# ruby - 测试文件/文件夹导航和操作

> ID：13105872
> 
> 赞同：0
> 
> 时间：2012-10-28T02:23:00.207
> 
> 标签：ruby, rspec

我正在开发一个模块，该模块提供导航目录和操作文件的方法。基本上它将是`Dir`和`File`类的组合，具有特定于我正在处理的项目需求的选项。

现在我已经开始为其中一些方法编写测试，事情变得一团糟。

### 例子

我拥有的方法之一是一个`tree`函数，它返回文件和文件夹的哈希值，您可以在其中传递`tree(only: 'folders', limit: 3)`. 为了测试它只下降 3 个级别，我必须有 4 个以上的子文件夹，其中包含虚拟文件。

### 问题

现在我正在测试项目外部的文件夹，因为子文件夹已经存在，但我想摆脱这种情况，特别是考虑到一旦我开始测试等效于`rm -rf`的方法（以及缺乏可移植性）。

我开始认为我需要创建一个“实验室老鼠”类型的文件夹，我在上面进行所有“实验”，但我不知道如何创建它。

*   我是否创建一个创建文件的函数？
*   我是否从其他位置提取文件和文件夹？
*   我是否对文件结构使用某种“lorem ipsum”生成器？
*   我是否手动制作所有这些文件和文件夹（呃）？
*   我是否只是模拟和存根所有内容而不实际创建/删除文件和文件夹？（我没有看到这种情况发生）

所以...

通常有人会如何测试过多的文件和文件夹操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:48:49.580

我认为您不想使用模拟/存根。您的操作系统的文件系统应该经过良好测试并且速度很快，因此模拟/存根的好处是微乎其微的。创建模拟/存根系统会增加复杂性而没有太多好处。

这是我的答案：

**我是否创建一个创建文件的函数？**
是的。您可以为这些函数创建测试以确保它们是正确的。不要调用`Dir`and `File`，而是编写使代码简单易读的辅助函数。也许您可以在源/测试代码之间共享帮助函数...

**我是否从其他位置提取文件和文件夹？**
不知道这是为了什么...

**我是否对文件结构使用某种“lorem ipsum”生成器？**
是的，如果您的意思是创建生成文件结构的函数。

**我是否手动制作所有这些文件和文件夹（呃）？**
不。

**我是否只是模拟和存根所有内容而不实际创建/删除文件和文件夹？（我没有看到这种情况发生）**
不。创建文件/目录的一个好处是您可以手动检查正在发生的事情而不是 100% 依赖于测试。这实际上是一个好方法，因为没有它可能会出现一个错误，即源代码和测试代码都没有按照您的预期执行，但您不会知道，因为一切***似乎***都在工作。

# java - java StreamTokenizer wordChars() 和 nextToken()

> ID：13105873
> 
> 赞同：2
> 
> 时间：2012-10-28T02:23:12.243
> 
> 标签：java

这可能是一个愚蠢的问题，但我很难识别 StreamTokenizer 如何分隔输入流。它是由空格和下一行分隔的吗？我也对 wordChars() 的使用感到困惑。例如：

```
public static int getSet(String workingDirectory, String filename, List<String> set) {
    int cardinality = 0;
    File file = new File(workingDirectory,filename);
    try {
        BufferedReader in = new BufferedReader(new FileReader(file));
        StreamTokenizer text = new StreamTokenizer(in);
        text.wordChars('_','_');
        text.nextToken();
        while (text.ttype != StreamTokenizer.TT_EOF) {
            set.add(text.sval);
            cardinality++;
//              System.out.println(cardinality + " " + text.sval);
            text.nextToken();
        }
        in.close();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    return cardinality; 
} 
```

如果文本文件包含这样的字符串：A_B_C D_E_F。

text.wordChars('_','_') 是否意味着只有下划线才会被视为有效单词？

在这种情况下，代币会是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:02:09.313

`how StreamTokenizer delimit input streams. Is it delimited by space and nextline?`

简短的回答是**肯定的**

解析过程由一个表和许多可以设置为各种状态的标志控制。流标记器可以识别标识符、数字、带引号的字符串和各种注释样式。此外，一个实例有四个标志。其中一个**标志**指示行终止符是作为标记返回还是**被视为仅分隔标记的空格。**

`Does text.wordChars('_','_') mean only underscore will be considered as valid words?`

简短的回答是**肯定的**

`WordChars`需要两个输入。first( `low`) 是字符集的下端， second( `high`) 是字符集的上端。如果`low`传递的值小于`0`then 它将被设置为`0`. 既然你通过`_ = 95`了，低端将被接受为`_=95`。如果通过的 high 小于`255`然后它被接受为字符集范围的高端。由于您的成绩很高`_=95`，因此也可以接受。现在，当它试图从 中确定字符范围时`low-to-high`，它只找到一个字符，即它`_`自己。在这种情况下，`_`将是唯一被识别为单词字符的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T02:34:59.390

请检查这个

```
Pattern splitRegex = Pattern.compile("_");
String[] tokens = splitRegex.split(stringtobesplitedbydelimeter); 
```

或者你也可以使用

```
 String[] tokens = stringtobesplitedbydelimeter.split('_') 
```

# python - 任意数量的分配（列表（数字））转换为单个列表

> ID：13105874
> 
> 赞同：1
> 
> 时间：2012-10-28T02:23:59.233
> 
> 标签：python, matrix

我正在尝试将一个矩阵组合成一个列表。我试图围绕我通过搜索不断找到的树遍历 / 0(n*expression) 的东西。我真的不认为这个问题像我想象的那么难！？

```
# example of what output should be 
# ('147','258','369')

m = [1,2,3]
n = [4,5,6]
o = [7,8,9]

def myFun(*args):
    return [zip(args[x][i]) for x in args for i in args[x]]

print(myFun(m,n,o)) 
```

为了将来参考，在这个庄园中使用地图处理矩阵会是一种更聪明的方法吗？我读过地图可以将函数应用于每个元素，因此我对使用这种方法并获得额外的输出持怀疑态度（例如[（'471'，'582'，'693'，等等）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:34:40.593

这归结为转置矩阵。这可以通过

```
zip(*args) 
```

一旦我们有了这个，我们可以连接每一行以形成一个新的整数，并将这些值放在一个新的列表中：

```
def myFun(*args):
    return [int(''.join(map(str, l))) for l in zip(*args)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T02:36:01.640

这是你想要做的吗？

```
m = [1,2,3]
n = [4,5,6]
o = [7,8,9]

a = zip(m, n, o)  # [(1, 4, 7), (2, 5, 8), (3, 6, 9)]

b = [''.join(map(str, x)) for x in a] # ['147', '258', '369'] 
```

# python - 在 python 中计算快速日志基数 2 上限

> ID：13105875
> 
> 赞同：15
> 
> 时间：2012-10-28T02:24:07.673
> 
> 标签：python, math, binary, logarithm

对于给定`x < 10^15`，快速准确地确定最大整数`p`，使得`2^p <= x`

以下是我尝试过的一些事情：

首先，我尝试了这个，但对于大量数字并不准确：

```
>>> from math import log
>>> x = 2**3
>>> x
8
>>> p = int(log(x, 2))
>>> 2**p == x
True
>>> x = 2**50
>>> p = int(log(x, 2))
>>> 2**p == x #not accurate for large numbers?
False 
```

我可以尝试类似：

```
p = 1
i = 1
while True:
    if i * 2 > n:
        break
    i *= 2
    p += 1
    not_p = n - p 
```

如果 p 为 50，则最多需要 50 次操作

我可以预先计算 2 的所有幂，直到 2^50，然后使用二分搜索找到 p。这将需要 log(50) 操作，但看起来有点过分和丑陋？

我为基于 C 的解决方案找到了这个线程：[Compute fast log base 2 ceiling](https://stackoverflow.com/questions/3272424/compute-fast-log-base-2-ceiling)

但是它看起来有点难看，我不确定如何将它转换为 python。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-28T02:54:48.523

在 Python >= 2.7 中，可以使用`.bit_length()`整数的方法：

```
def brute(x):
    # determine max p such that 2^p <= x
    p = 0
    while 2**p <= x:
        p += 1
    return p-1

def easy(x):
    return x.bit_length() - 1 
```

这使

```
>>> brute(0), brute(2**3-1), brute(2**3)
(-1, 2, 3)
>>> easy(0), easy(2**3-1), easy(2**3)
(-1, 2, 3)
>>> brute(2**50-1), brute(2**50), brute(2**50+1)
(49, 50, 50)
>>> easy(2**50-1), easy(2**50), easy(2**50+1)
(49, 50, 50)
>>> 
>>> all(brute(n) == easy(n) for n in range(10**6))
True
>>> nums = (max(2**x+d, 0) for x in range(200) for d in range(-50, 50))
>>> all(brute(n) == easy(n) for n in nums)
True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-01T16:10:57.363

您在评论中指定您的 x 是一个整数，但是对于来到这里的任何人他们的 x 已经是一个**float**，那么**[math.frexp()](https://docs.python.org/2/library/math.html#math.frexp)**在提取 log base 2 时会非常快：

```
log2_slow = int(floor(log(x, 2)))
log2_fast = frexp(x)[1]-1 
```

frexp() 调用的[C 函数](http://people.freebsd.org/~jake/frexp.c)只是抓取和调整指数。还有一些'splainin：

*   下标`[1]`是因为 frexp() 返回一个元组（有效数，指数）。
*   减法`-1`说明有效数字在 [0.5,1.0) 范围内。例如 2 ^(50)存储为 0.5x2 ^(51)。
*   floor() 是因为您指定`2^p <= x`了 , 所以`p == floor(log(x,2))`.

（来自[另一个答案](https://stackoverflow.com/a/28033134/673991)。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T02:35:03.680

您可以尝试`log2`numpy 中的函数，该函数似乎适用于高达 2^62 的幂：

```
>>> 2**np.log2(2**50) == 2**50
True
>>> 2**np.log2(2**62) == 2**62
True 
```

除此之外（至少对我而言）它由于numpy内部数字类型的限制而失败，但这将处理您所说的范围内的数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-28T02:35:01.547

适用于我，OSX 10.7 上的 Python 2.6.5 (CPython)：

```
>>> x = 2**50
>>> x
1125899906842624L
>>> p = int(log(x,2))
>>> p
50
>>> 2**p == x
True 
```

它至少对高达 1e9 的指数仍然有效，到那时它开始需要相当长的时间来进行数学运算。你在测试中实际得到了`x`什么`p`？你在什么操作系统上运行什么版本的 Python？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-28T02:37:59.297

关于“对大数不准确”，您的挑战是浮点表示确实不如您需要的那么精确（`49.999999999993 != 50.0`）。一个很好的参考资料是“ [What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) ”。

好消息是 C 例程的转换非常简单：

```
def getpos(value):
    if (value == 0):
        return -1
    pos = 0
    if (value & (value - 1)):
        pos = 1
    if (value & 0xFFFFFFFF00000000):
        pos += 32
        value = value >> 32
    if (value & 0x00000000FFFF0000):
        pos += 16
        value = value >> 16
    if (value & 0x000000000000FF00):
        pos += 8
        value = value >> 8
    if (value & 0x00000000000000F0):
        pos += 4
        value = value >> 4
    if (value & 0x000000000000000C):
        pos += 2
        value = value >> 2
    if (value & 0x0000000000000002):
        pos += 1
        value = value >> 1
    return pos 
```

另一种选择是您可以四舍五入到最接近的整数，而不是截断：

```
 log(x,2)
=> 49.999999999999993
   round(log(x,2),1)
=> 50.0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-15T07:19:09.453

当心！接受的答案返回`floor(log(n, 2))`，`ceil(log(n, 2))`不像问题的标题所暗示的那样！

如果您来这里是为了实现 clog2，请执行以下操作：

```
def clog2(x):
    """Ceiling of log2"""
    if x <= 0:
        raise ValueError("domain error")
    return (x-1).bit_length() 
```

为了完整性：

```
def flog2(x):
    """Floor of log2"""
    if x <= 0:
        raise ValueError("domain error")
    return x.bit_length() - 1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-31T23:42:57.573

我需要计算 2 的上限幂（以计算使用模运算符在给定范围内生成随机数需要多少字节的熵）。

从一个粗略的实验中，我认为下面的计算给出了最小整数 p 使得 val < 2^p

它可能是你能得到的最快的，并且只使用按位整数运算。

```
def log2_approx(val):
    from math import floor
    val = floor(val)
    approx = 0
    while val != 0:
        val &= ~ (1<<approx)
        approx += 1
    return approx 
```

对于给定的 n，您将计算出稍微不同的值

```
log2_approx(n) - 1 
```

...也许。但无论如何，按位算术可以为您提供如何快速执行此操作的线索。

# javascript - 需要图像或代码中断的 Javascript

> ID：13105877
> 
> 赞同：1
> 
> 时间：2012-10-28T02:24:13.720
> 
> 标签：javascript

我正在修改我为一个简单的小型 javascript 老虎机找到的代码。该机器（带有源代码和图像）可以在这里找到：http: [//www.coderprofile.com/networks/source-codes/239/slot-machine](http://www.coderprofile.com/networks/source-codes/239/slot-machine)

第 80 行读取...

`<img src="blueline.gif"><br>`

如果我删除那条线，一切都会中断。如果我复制那条线，卷轴中的第一张图片会被发送到第二张“img src=blueline”

ETA：我可以删除源（所以它只是说 img）或给图像一个隐藏的样式，代码继续工作。

为什么这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:15:23.860

我将第 14 行从

`document.images[img].src=val+".jpg";`

至

`document["img"+img].src=val+".jpg";`

以便它与第 41-43 行给出的信息相匹配

# php - CakePHP：将计算字段从另一个模型连接到模型

> ID：13105878
> 
> 赞同：-1
> 
> 时间：2012-10-28T02:24:16.520
> 
> 标签：php, mysql, cakephp

我一直在试图弄清楚如何在 CakePHP 中将一些计算字段添加到模型中。我可以通过以下查询获得所需的结果：

```
SELECT project_id, 
    COUNT(*) AS clicks_total,
    SUM(CASE WHEN clicks.redirect_url = projects.url THEN 1 ELSE 0 END) AS clicks_redirected,
    SUM(CASE WHEN clicks.redirect_url = projects.url THEN 0 ELSE 1 END) AS clicks_not_redirected
FROM clicks
LEFT JOIN projects ON clicks.project_id = projects.id
GROUP BY project_id 
```

如果我尝试将其作为自定义查询执行，Cake 会以需要大量数组操作才能使用的方式转换结果。我尝试使用以下代码以 Cake 的方式执行此操作，但由于某种原因，计算字段最终出现在一个单独的数组中，这会导致视图中出现奇怪的行为：

```
$this->paginate = array(
'Project' => array(
    'fields' => array(
        'id', 'name', 'url', 'url_mac', 'url_mobile',
        'COUNT(*) AS clicks_total',
        'SUM(CASE WHEN Click.redirect_url = Project.url THEN 1 ELSE 0 END) AS clicks_redirected',
        'SUM(CASE WHEN Click.redirect_url = Project.url THEN 0 ELSE 1 END) AS clicks_not_redirected'

        ),
    'joins' => array(
        array(
            'table' => 'clicks',  
            'alias' => 'Click',  
            'type' => 'LEFT',
            'conditions' => array('Click.project_id = Project.id')  
        )
    ),
    'group' => 'project_id'
));

$this->set('projects', $this->paginate()); 
```

产生以下结果：

```
array(
    (int) 0 => array(
        'Project' => array(
            'id' => '508705c8-126c-48f9-bd9a-6d79d13bb9ea',
            'name' => 'Test Project',
            'url' => 'http://www.test.com',
            'url_mac' => 'http://www.mac.com',
            'url_mobile' => 'http://www.mobile.com'
        ),
        (int) 0 => array(
            'clicks_total' => '80',
            'clicks_redirected' => '35',
            'clicks_not_redirected' => '45'
        )
    ),
    (int) 1 => array(
        'Project' => array(
            'id' => '508b1073-2aa8-4895-b8d9-152ed13bb9ea',
            'name' => 'Another Project',
            'url' => 'http://another.com',
            'url_mac' => 'http://anothermac.com',
            'url_mobile' => 'http://anothermobile.com'
        ),
        (int) 0 => array(
            'clicks_total' => '134',
            'clicks_redirected' => '70',
            'clicks_not_redirected' => '64'
        )
    )
) 
```

有没有人有任何想法让计算出的点击次数显示在 Project 数组下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:56:01.213

您可以将虚拟字段添加到模型中：

看看：[http ://book.cakephp.org/1.3/view/1608/Virtual-fields](http://book.cakephp.org/1.3/view/1608/Virtual-fields)

> 在项目模型中：
> 
> public $virtualFields = array('clicks_total' => 'COUNT(*)');

# java - 如何在 Java 中加载海量数据文件？有什么比哈希表更好的结构吗？

> ID：13105882
> 
> 赞同：2
> 
> 时间：2012-10-28T02:24:50.877
> 
> 标签：java, file, data-structures, hashtable

我正在尝试在内存中的哈希表中加载一个包含 1400 万行的大文件。每行包含三个数字 (n,m,v)，其中：

*   n：是用户的id（一个对象）
*   m：是一个项目（一个对象）的id
*   v: 是用户 n 给项目 m 的费率。

每个用户`n`都有一个`hashtable<item, rate>`存储用户评价的项目，每个项目都有一个`hashtable<user, rate>`存储用户评价这个项目的用户。

在我的机器上，我无法将此结构加载到内存中，因此每次都会出现堆内存错误。

我试图用 hashBasedTable 替换哈希表，它允许为每个值提供两个键，但没有解决方案。此外 hashBasedTable 使我的程序慢得多。

有什么解决方案可以加载这么多数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:52:18.947

1400 万行，每行三个数字听起来不像是一个庞大的数据阵列。它大约是 14M * (3 + 1) * 8 ~ 450M 或内存。

只需确保将 -Xmx 设置设置为足够大的值（例如 -Xmx1024m - 这将允许 JVM 分配高达 1G 的 RAM）。

PS我会建议`HashMap`而不是`HashTable`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T03:10:24.350

我建议您分别使用`ArrayList<User>`and来代表每个评分项目的用户和每个用户的评分项目`ArrayList<Item>`。这将节省大量空间。

诚然，现在会有一些操作，`O(N)`但只有在`N`变大时才会出现问题。（如果是这样，请考虑使用混合`ArrayList`关系来处理小型关系和`HashMap`大型关系。）

建议#2 - 使用普通数组......并保持它们排序，以便您可以使用二进制搜索实现查找。这是更密集的代码（即更复杂），但它会给你比使用集合类型更好的内存使用。

建议#3 - 使用数据库。它将更好地扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T02:28:13.263

我不认为这取决于您使用的数据结构。您根本无法将这么多数据加载到 RAM 中，您必须逐行处理文件并执行您拥有的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T02:59:13.157

我对您的访问模式有点不清楚，但听起来您可能想要使用一个大表而不是每个用户和每个项目一个。特别是如果您的数据非常稀疏（每个用户只有几个项目，反之亦然），由于哈希表的初始容量，您将浪费大量空间（您可以尝试降低初始容量和/或提高负载因子如果您想保留当前的组织）。

构建一个配对对象（用户 ID，项目 ID）用作单个大哈希表的键。如果您需要枚举（即列出用户的所有项目，反之亦然），请保留`ArrayList`该数据的 s 并使用`trimToSize`，这比哈希表更紧凑。

# ruby - 在 Ruby on Rails 中采用“不断发展的面向对象软件”技术

> ID：13105884
> 
> 赞同：11
> 
> 时间：2012-10-28T02:25:18.777
> 
> 标签：ruby, interface, rspec, mocking

我读了 Steve Freeman 和 Nat Pryce[的《Growing Object-Oriented Software, Guided by Tests](http://www.pearsonhighered.com/educator/product/Growing-ObjectOriented-Software-Guided-by-Tests/9780321503626.page)》，印象非常深刻。我想在我使用 RSpec 的 Rails 项目中采用本书的思想，尽管它的示例是用 Java 编写的。

本书的一个基本原则是我们应该模拟*接口*而不是*具体的类*。他们说我们可以通过提取接口并命名它们来改进应用程序*设计。*

但是，Ruby 没有任何与 Java 的`interface`. 我如何将他们的技术用于 Rails 项目？

**更新**

例如，在第 126 页中，作者介绍了`Auction`接口以实现该`bid`方法。首先，他们模拟`Auction.class`使测试通过，然后他们在类中实现了一个`Auction`类作为匿名内部`Main`类。最后，他们`XMPPAuction`从`Main`（第 131-132 页）中提取了一个新的具体类。

在我看来，这种渐进式方法是本书的症结所在。

如何在Ruby开发中采用或模仿这样的一系列代码转换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T04:07:31.817

查看这个以前的[Stack Overflow 答案](https://stackoverflow.com/a/4439733/429758)，以获得对 ruby​​ 接口的一个很好的解释。

此外，[Practical Object-Oriented Design in Ruby是一本与《](http://www.poodr.info/book/) [Growing Object Oriented Software](http://www.pearsonhighered.com/educator/product/Growing-ObjectOriented-Software-Guided-by-Tests/9780321503626.page) 》类似的书，但带有 ruby​​ 示例。值得一试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T03:59:35.043

由于在 Ruby 中，所有事物都是鸭子类型的，并且接口只是公开公开的一组字段和方法，您可以执行以下一项或多项操作：

**测试**

设计您的测试以测试接口并适当地命名和评论*您的测试*- 然后您可以通过相同的测试套件传递您的“接口”的所有“具体实现”。只要您的测试套件涵盖了您的应用程序的边缘案例，您的应用程序中任何采用这些具体类的实例的任何东西都将能够处理任何*其他*具体类的实例。

**使用基类**

定义一个基类，所有具体类都将从该基类继承，所有方法都会引发`NotImplemented`错误。这为您提供了一个可以可视化的层次结构 - 但是，它确实需要额外的类，并且可能会鼓励`is a`在您的生产代码中进行大量测试，而不是依赖于`has a`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T01:22:16.067

没错，Ruby 没有正式的接口。相反，接口隐含在对象处理的消息中（请参阅[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)）。

如果您仍在寻找在 Ruby 中“强制执行”接口的更正式的方法，请考虑编写一套自动化单元测试，如果对象正确符合接口，则为绿色，否则为红色。

有关示例，请参阅[ActiveModel::Lint::Tests](http://api.rubyonrails.org/classes/ActiveModel/Lint/Tests.html)和[rspec 的共享示例](https://www.relishapp.com/rspec/rspec-core/v/2-11/docs/example-groups/shared-examples)。

# c# - 实体框架构建退出并出现警告，并且在克隆 CodePlex 存储库后不会运行测试

> ID：13105885
> 
> 赞同：2
> 
> 时间：2012-10-28T02:25:33.347
> 
> 标签：c#, visual-studio, entity-framework, msbuild

[在遵循这些说明](http://entityframework.codeplex.com/documentation)后，我正在尝试构建 EF 。一切似乎都已成功完成，但是当我运行 build.cmd 时，我收到两个警告：

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5)：警告 MSB3245：无法解析此引用。找不到程序集“Microsoft.VisualStudio.QualityTools.UnitTestFramework, Version=10.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL”。检查以确保程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。[C:\Users\Chasemedallion\Documents\entityframework\test\EntityFramework\VBTests\VBTests.vbproj]

和

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1988,5)：警告 MSB3283：找不到类型库“EnvDTE”的包装程序集。验证 (1) COM 组件已正确注册，并且 (2) 您的目标平台与 COM 组件的位数相同。例如，如果 COM 组件是 32 位的，那么您的目标平台就不能是 64 位的。[C:\Users\Michael\Documents\Interests\CS\entityframework\src\EntityFramework.PowerShell\EntityFramework.PowerShell.csproj]

在第二个警告之后，该命令退出并且不运行任何测试，即使使用 /t:Test 运行也是如此。谁能给我指点这些错误是什么或如何解决它们？奇怪的是，当我使用 Ctrl+Shift+B 从 VS2012 Express（桌面）构建时，我没有看到任何警告。

此外，我已确认 Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 位于 C:\Program Files\Microsoft Visual Studio 11.0\Common7\IDE\PublicAssemblies 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:49:28.890

该脚本需要从 Developer/VS 命令提示符运行，因为它设置环境变量和路径的方式可以查找文件和解析依赖项。

# c# - 将值传递给全局变量以供 WinForms (C#) 和 SQL 连接参考

> ID：13105887
> 
> 赞同：1
> 
> 时间：2012-10-28T02:25:50.757
> 
> 标签：c#, sql-server, winforms, radio-button, global-variables

我需要两个全局变量，以便在不同阶段由多个 Winform 访问。

首先是关于一个不同的用户，登录到应用程序后，其他winforms需要根据登录的用户从sql server表中获取数据。

```
SqlCommand cmd = new SqlCommand("SELECT * FROM regClient WHERE client_ID = **[GLOBAL VARIABLE]**", con); 
```

* * *

其次是用户可以作为**Client**或**Student**登录。需要基于此调用不同的语句。此值由登录窗口上的单选按钮设置。

因此，如果选中 radClient 将全局设置为“客户端”，如果选中 radStudent 将全局设置为“学生”，则其他 winform 可以根据全局调用选择语句或启用/可见。

* * *

**我相信我可以在Programs.cs**中存储变量，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:32:34.720

创建一个用户类：

```
public class User
{
    public enum eStatus
    {
         Client,
         Student
    }

    public static eStatus Status { get; set; }

    public static string Name { get; set; }  
} 
```

你没有说一个变量是什么，所以我猜它是某种标识符，比如他们的名字。

您可以通过以下方式设置用户的状态：

```
User.Status = User.eStatus.Client; 
```

和名称：

```
User.Name = "Charlie"; 
```

您可以从任何地方访问和设置值。

**评论回复：**

if 看起来像：

```
if (Program.User.Status == Program.User.eStatus.Client)
{
   // commands
}
else // if (Program.User.Status == Program.User.eStatus.Student)
{
   // commands
} 
```

如果只能有两个值，则不需要第二个`User.Status`。

# r - 在 R 中，如何轻松地将许多向量组合成一个数据框？

> ID：13105888
> 
> 赞同：1
> 
> 时间：2012-10-28T02:26:22.147
> 
> 标签：r, vector, for-loop, dataframe

所以，我知道我可以使用 data.frame 命令将多个向量组合成一个数据帧，如下所示：

```
my.data <- data.frame(name1, age1, name20, age20, name38, age38) 
```

（我知道，变量名没有多大意义，为什么我要在三个不同的列中使用 name1、name20 和 name38？请忽略：我的实际变量名不同——这仅用于说明目的）。

问题是，我有大约 40 个这样的向量，而且我还必须在代码的其他部分中组合许多向量。所以我不每次都复制粘贴一大块代码会很方便。所以我想围绕这个写一个for循环：

```
for (i in c("name", "age", "hgt"))
{
    for (k in c(1,20,38))
    {
    my.data$i,as.character(k) <- data.frame(get(paste(i,as.character(k),sep="")))
    }
} 
```

但这不起作用。这是因为我应该在其中一些代码周围写“paste()”，还是这只是解决这个问题的不好方法？遍历 i 和 k 并获得“newdata”数据帧作为最终结果的正确方法是什么，所有向量都作为附加的列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:47:06.630

您是否正在尝试实现以下目标？

```
name1 <- letters[1:10]
age1 <- 1:10
name20 <- letters[11:20]
age20 <- 11:20
name38 <- LETTERS[1:10]
age38 <- 21:30

paste.pattern <- paste(rep(c("name", "age"), times = 3), 
                       rep(c(1, 20, 38), each = 2), sep = "")

newdata <- data.frame(sapply(paste.pattern, get)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:56:13.993

如果您所有的单个向量都具有相似的词干（例如：）`hgt`和数字（例如`1`）排列，那么您可以执行以下操作：

```
# test data
name1 <- letters[1:10]
age1 <- 1:10
name20 <- letters[11:20]
age20 <- 11:20
name38 <- LETTERS[1:10]
age38 <- 21:30

# group them up in a dataframe looking for "age" OR (|) "name" as the stem
data.frame(sapply(ls(pattern="^age[0-9]+$|^name[0-9]+$"),get))

# result:
   age1 age20 age38 name1 name20 name38
1     1    11    21     a      k      A
2     2    12    22     b      l      B
3     3    13    23     c      m      C
4     4    14    24     d      n      D
5     5    15    25     e      o      E
6     6    16    26     f      p      F
7     7    17    27     g      q      G
8     8    18    28     h      r      H
9     9    19    29     i      s      I
10   10    20    30     j      t      J 
```

这会将包含的向量限制为词干/数字命名模式，以确保您不会对数据框进行任何意外添加。

# php - 通过 PHP exec 运行 SUDO？

> ID：13105889
> 
> 赞同：0
> 
> 时间：2012-10-28T02:26:48.257
> 
> 标签：php, python, ubuntu

> **可能重复：**
> [如何从需要 SUDO 的 php 调用 shell 脚本？](https://stackoverflow.com/questions/3166123/how-to-call-shell-script-from-php-that-requires-sudo)

我有一个需要 SU 权限才能运行的 Python 文件（在 Ubuntu 服务器上）。
无法弄清楚该怎么做。

像这样从 PHP 运行它：

```
$command = "python /path/to/my/file.py params";
$temp = exec($command, $output);
var_dump($output); 
```

不工作。（Xvfb 无法为非 root 用户启动）

试过：

```
$command = "echo 'root_pwd' | sudo -S python /program.py params"
... 
```

没用。

试过：编辑/etc/sudoers：

```
Cmnd_Alias BUNDLE = /path/to/myprog.py
nobody  ALL=(ALL) NOPASSWD:BUNDLE 
```

接着：

```
$command = "sudo -u nobody python myprog.py params";
... 
```

没用。
当我说“不起作用”时 - 我的意思是 var_dump($output) 返回空数组，服务器上没有成功的结果（myprog.py 应该在服务器上生成一个文件）或者页面只是加载几分钟直到它超时。

基本 .py 文件（不需要特殊权限）工作。

请帮忙。

PS：.Py 文件正在制作 URL 的截图，因此使用 webkitgtk、Xvfb 和其他一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T13:38:24.383

你的命令是wong：

```
$command = "sudo -u nobody python myprog.py params"; 
```

在这里，您直接调用 python 解释器，但在您的`sudores`文件中，您只允许`/path/to/myprog.py`.

如果你想这样做，然后在你的 python 程序中添加一个 shebang 并使其可执行，然后将你的命令更改为

```
$command = "sudo -u nobody /path/to/myprog.py params"; 
```

但要使其正常工作，您在 sudoers 文件中指定的用户必须是执行命令的用户，这可能不是`nobody`Web 服务器进程（`www-data`？）：

```
Cmnd_Alias BUNDLE = /path/to/myprog.py
www-data  ALL=(ALL) NOPASSWD:BUNDLE 
```

* * *

你试过的另一种方式

```
$command = "echo 'root_pwd' | sudo -S python /program.py" 
```

可能因为两个原因而失败：

*   当前用户（可能是网络服务器进程）不允许 sudo
*   `sudo`不采用root密码，而是当前用户密码

而且你真的不想传递这样的密码......

# java - Android 应用程序开发 - Uri.parse - 不想打开浏览器

> ID：13105891
> 
> 赞同：1
> 
> 时间：2012-10-28T02:26:49.660
> 
> 标签：java, android

我有一个安卓程序。我想向网站发送请求，之后我需要服务器运行命令而不使用浏览器。

这可能吗？例如，在某些时候，我的代码是这样的：

```
Intent intent1 = new Intent(Intent.ACTION_VIEW,Uri.parse("http://xxxxxxx); 
```

这当然会打开浏览器。如何避免这种情况？

# c++ - 参考/价值混淆有问题吗？

> ID：13105893
> 
> 赞同：1
> 
> 时间：2012-10-28T02:26:56.873
> 
> 标签：c++, iterator

我正在调整一个函数，它反转由迭代器开始和结束表示的容器的值。

为什么会这样：

```
template<class Bi> void reverse(Bi begin, Bi end){
    while (begin!= end) {
        --end;
        if (begin != end)
            swap(*begin++, *end);
    }
} 
```

但不是这个？

```
template<class Bi> void reverse(Bi begin, Bi end){
    while (begin != end) {
        --end;
        if (begin != end){
            Bi temp = begin;
            Bi temp2 = end;
            *begin = *temp2;
            *end = *temp;
            begin++;
        }
    }
} 
```

这编译得很好，但我一定误解了一些关于分配相互相等的迭代器的事情，因为当我去反转一个向量时，比如说，值 1 到 5，我最终在第一个中得到 5 到 1，但是第二个产生值 5、4、3、4、5。我不明白这种行为，这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T02:34:52.383

您正在混合迭代器和值的概念。在第二种方法中，您复制迭代器，但不复制值：`begin`并`temp`引用相同的元素，`end`and 也是如此`temp2`。当您`*begin = *temp2;`将第一个元素设置为 5 时，当您稍后`*end=*temp`将第一个元素（已经设置为 5）复制到最后一个位置时，将第一个和最后一个位置都保留为`5`.

您需要做的是复制*值*，而不是迭代器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T02:35:26.657

问题在这里：

```
Bi temp = begin;
Bi temp2 = end; 
```

第一行指定迭代器位置`begin`是指`temp`。所以现在`temp`指的是容器中与`begin`.

然后修改存储在该位置的*值：*

```
*begin = *temp2; 
```

当然，`temp`还是指那个位置，所以`*temp`现在也代表修改后的值。

因此，这：

```
*end = *temp; 
```

分配了错误的值`*end`（事实上，它根本没有分配任何新值）。

# c# - 查找特定文本并过滤其余文本

> ID：13105896
> 
> 赞同：0
> 
> 时间：2012-10-28T02:27:20.273
> 
> 标签：c#, regex, http

假设我有这个字符串（巨大的），我想过滤掉除了我正在寻找的东西之外的所有东西。这是我想要的一个例子：

```
<strong>You</strong></font> <font size="3" color="#05ABF8">
<strong>Shook</strong></font> Me All <font size="3" color="#05ABF8">
<strong>Night</strong></font> <font size="3" color="#05ABF8">
<strong>Long</strong></font> mp3</a></div> 
```

如您所见，所有这些之间都有文字。我想得到“You Shook Me All Night Long”，然后把剩下的拿出来。我将如何完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T03:11:32.293

您可以使用以下正则表达式：`>([\s|\w]+)<`

```
var input = @"
<strong>You</strong></font> <font size='3' color='#05ABF8'>
<strong>Shook</strong></font> Me All <font size='3' color='#05ABF8'>
<strong>Night</strong></font> <font size='3' color='#05ABF8'>
<strong>Long</strong></font> mp3</a></div>";

var regex = new Regex(@">(?<match>[\s|\w]+)<");

var matches = regex.Matches(input).Cast<Match>()
   // Get only the values from the group 'match'
   // So, we ignore '<' and '>' characters
   .Select(p => p.Groups["match"].Value); 
```

![火柴](../Images/2ba89014363fd6cdd4382411095794fc.png)

```
// Concatenate the captures to one string
var result = string.Join(string.Empty, matches)
    // Remove unnecessary carriage return characters if needed
    .Replace("\r\n", string.Empty); 
```

![结果](../Images/346796f6723e8a41d9192db8ceb1136f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:40:52.633

`</a></div>`假设您在发布的 xml/html 末尾有有效的开始标签。

```
string value = XElement.Parse(string.Format("<root>{0}</root>", yourstring)).Value; 
```

或剥离 Html 的方法：

```
public static string StripHTML(this string HTMLText)
{
    var reg = new Regex("<[^>]+>", RegexOptions.IgnoreCase);
    return reg.Replace(HTMLText, "").Replace("&nbsp;", " ");
} 
```

# c - C中的字符串数组搜索

> ID：13105903
> 
> 赞同：0
> 
> 时间：2012-10-28T02:31:09.480
> 
> 标签：c, arrays, string

我试图弄清楚如何搜索输入到字符串数组中的名称列表。如果输入的名称是原始数组的一部分，则搜索函数应返回字符串在数组中的位置；如果未找到该字符串，则应返回 -1。如果返回-1，那么我希望能够打印出“未找到”，这似乎不太难弄清楚，但是如果找到名称，我希望能够打印出找到名称的位置。

这是我的代码，显然我是新手，所以我可能已经屠杀了应该如何完成。我的其余代码似乎工作正常，但正是这个功能让我不知所措。

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

#define MAX_NAMELENGTH 10
#define MAX_NAMES 5
void initialize(char names[MAX_NAMES][MAX_NAMELENGTH]);
int search(char names[MAX_NAMES][MAX_NAMELENGTH],int i,Number_entrys);
int main()
{
    char names[MAX_NAMES][MAX_NAMELENGTH];
    int i;
    initialize(names);
    search(names,i,Number_entrys);
    search_result= search(names,i,Number_entrys);
    if (search_result==-1){
        printf("Found no names.\n");
    }
    if(search_result==0){
       printf("Name found");
    }    getch();
    return 0;
}

void initialize(char names[MAX_NAMES][MAX_NAMELENGTH])
{
    int i, Number_entrys;

    printf("How many names would you like to enter to the list?\n");
    scanf("%d",&Number_entrys);

    if(Number_entrys>MAX_NAMES){
               printf("Please choose a smaller entry\n");
    }else{
        for (i=0; i<Number_entrys;i++){
            scanf("%s",names[i]);
        }
    }
    for(i=0;i<Number_entrys;i++){

        printf("%s\n",names[i]); 
    }
}

int search(char names[MAX_NAMES][MAX_NAMELENGTH],int i)
{
    int j, idx;
    char name[MAX_NAMELENGTH];
    printf("Now enter a name in which you would like to search the list for:");
    scanf("%s", name);

    for(x = 0; x < Number_entrys; x++) {
        if ( strcmp( new_name, names[x] ) == 0 ){
            /* match, x is the index */
            return x;
        }else{
            return -1;   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T02:42:33.423

你的意思是这样的：

```
int search(char names[MAX_NAMES][MAX_NAMELENGTH], int i)
{
     int j, idx;
     char name[MAX_NAMELENGTH];
     printf("Now enter a name in which you would like to search the list for:");
     scanf("%s", name);

     idx = -1;
     for(j = 0; j < i; j++){
         if(strstr(names[i], name) != NULL){
             idx = j;break;
         }
     }
     return idx;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T02:54:00.863

这里有几个问题。

搜索的目的是要求用户输入要搜索的单个名称。那么为什么是

```
 char new_name[MAX_NAMES][MAX_NAMELENGTH]; 
```

你只需要一个数组

```
 char new_name[MAX_NAMELENGTH]; 
```

然后你有一个循环，你只需要循环一次，所以你不需要循环

```
 scanf("%s",new_name); 
```

就足够了。这感觉就像您复制了用于填充名称数组的代码，但还没有真正理解其本质。

另一个问题是您无法控制用户可以输入多长时间的名称。如果用户输入一个很长的名字会发生什么？你会过度填充数组，你的程序可能会崩溃和烧毁。阅读[本文](http://crasseux.com/books/ctutorial/String-overflows-with-scanf.html)以了解如何控制它。

要真正迂腐，您还应该检查 scanf 的返回码，您希望读取一项，因此返回值应为 1，否则将是错误。

然后您尝试使用 strstr() 来查看 char 数组的数组。strstr[文档](http://pubs.opengroup.org/onlinepubs/009695399/functions/strstr.html)说它的目的是在字符串中搜索子字符串，而不是搜索字符串数组。

因此，只需手动搜索数组

```
/* what is i? the number of items used in the array? */
for(x = 0; x < i; x++) {
    if ( strcmp( new_name, names[x] ) == 0 ){
        /* match, x is the index */
        return x;
    }
}
/* here with no match */
return -1; 
```

在你的主要

int 搜索结果；

```
search_result = search( /* etc */ );

if ( search_result == -1 ) {
     /* print "not found" here */
} else {
     /* print something else */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T04:29:46.087

(8) ...
也许我们会扭转
局面 因为现在还不算太晚
它永远不会太晚！！(8)
:) ！

* * *

对不起这首歌^_^...哦，好吧，我在这个问题上玩了几分钟，我希望这段代码对你有更多帮助，关于：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

/* return array of indexs */

int*
search(const char *list, size_t slen, const char **arr_names, size_t arrlen)
{
    int *arr_idx;
    int j,i,idx;

    i=idx=0;

    arr_idx = malloc(sizeof(int)*arrlen+1);

    if(!arr_idx)
        exit(EXIT_FAILURE);

    for(i=0; i<slen; i++) {
        for(j=0; j<arrlen ; j++) {
            if(!strncmp(&list[i], &arr_names[j][0], strlen(arr_names[j]))) {
                arr_idx[idx] = j;
                idx++;
            }
        }
    }

    arr_idx[idx] = -1; /* -1 terminated array */
    if(!idx) {
        free(arr_idx);
        return NULL; /* found no names */
    }

   return arr_idx;
}
/* I'm a sick [something], nul terminated strings :P */
const char *string   = "My favorite artists: ATB, Nujabes and Bonobo also Aphex Twins is nice, along with Trapt and Breaking Benjamin.\0";
const char *names[] = {"ATB\0", "Scifer\0", "Aphex\0", "Bonobo\0", "Nujabes\0", "Tipper\0"};
#define N_NAMES 6

int
main(void)
{
    int i;
    int *array;

    array = search(string, strlen(&string[0]), names, N_NAMES);

    if(!array) {
        puts("Found no names.\n");
        return EXIT_SUCCESS;
    }

    printf("Names found: ");
    for(i=0; array[i]!=-1; i++)
        printf("%s,", names[array[i]]);

    printf("\b \n");
    free(array);  /* important */
    /* system("pause"); */   /* NOTE: decomment this if you're on windows */
   return EXIT_SUCCESS;
} 
```

**进行了一些测试：**

`~$ ./program`

**输出**
`Names found: ATB,Nujabes,Bonobo,Aphex`

# java - 是否可以在 Java 中将 BigInteger 与 Double 相乘？

> ID：13105905
> 
> 赞同：4
> 
> 时间：2012-10-28T02:31:47.620
> 
> 标签：java, biginteger

我有一个非常大的数字 ( *number1* ) 存储为 a`BigInteger`和 a `double`(number2)。我计划将*number1*和*number2*相乘，并将结果存储为双精度数。

使用该`multiply()`方法并没有帮助我实现这一目标。前进的方向是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-28T02:52:47.447

为了尽可能长时间地保持任意精度，请在 中进行乘法运算`BigDecimal`，然后将结果转换为`double`，如下所示：

```
BigDecimal tmp = new BigDecimal(myBigInteger);
tmp = tmp.multiply(new BigDecimal(myDouble));
double res = tmp.doubleValue(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-28T02:34:13.513

最简单的解决方案可能是`big.doubleValue() * myDouble`.

不幸的是，这不会特别快，因为`BigInteger.doubleValue()`实施速度非常慢。（将来可能会更快......也许如果 Oracle 应用我的[补丁](https://bugs.openjdk.java.net/show_bug.cgi?id=100222)。）

或者，您可以使用[Guava](https://code.google.com/p/guava-libraries/)`double`将 a直接舍入为 a 。`BigInteger` [`DoubleMath.roundToBigInteger(double, RoundingMode)`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/math/DoubleMath.html#roundToBigInteger%28double,%20java.math.RoundingMode%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T02:34:41.463

调用`.doubleValue()`BigInteger，并将它们作为双精度数相乘。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T02:34:55.847

为什么`BigInteger#multiply()`没有帮助？实际上只有两个合理的答案：

```
BigInteger a = /* whatever */;
double b = /* whatever */

// either
double result = a.multiply(new BigInteger(b)).doubleValue();
// or
double result = a.doubleValue() * b; 
```

# spring - jaxws-spring maven 依赖是为了什么目的

> ID：13105906
> 
> 赞同：1
> 
> 时间：2012-10-28T02:31:49.940
> 
> 标签：spring, maven

我的项目中有以下 maven 依赖项。

```
<dependency>
   <groupId>org.jvnet.jax-ws-commons.spring</groupId>
   <artifactId>jaxws-spring</artifactId>
   <version>1.8</version>
</dependency> 
```

问题：

*   这是[Spring Webservices](http://www.springsource.org/spring-web-services)项目吗？
*   如果不是这个依赖是为了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:49:54.740

这是一个结合了 JAX-WS 和 Spring的[项目。](http://jax-ws-commons.java.net/spring/)基本上，它为您提供了您可能在应用程序上下文中使用的 wss 命名空间，以将 JAX-WS 提供程序公开为 Web 服务。这不是强制性的，但它可以很方便，因为它允许您轻松地在您的 servlet 中进行依赖注入，尽管还有其他方法可以实现这一点。不幸的是，我上次使用它时，我注意到它依赖于一些非常古老的 spring 库（pre 3.x），并且似乎在一段时间内没有更新。

# .net - 多线程环境中的对象生命周期

> ID：13105908
> 
> 赞同：2
> 
> 时间：2012-10-28T02:32:05.603
> 
> 标签：.net, multithreading, timer, lifetime

在[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.110%29.aspx)之后，我创建了一个控制台应用程序来练习：

```
public class Program
{
    //private static System.Timers.Timer aTimer;

    public static void Main()
    {
        short_running_method();

        Console.WriteLine("Press the Enter key to exit the program.");
        Console.ReadLine();

    }

    static void short_running_method()
    {
        // Normally, the timer is declared at the class level, 
        // so that it stays in scope as long as it is needed. 
        // If the timer is declared in a long-running method,   
        // KeepAlive must be used to prevent the JIT compiler  
        // from allowing aggressive garbage collection to occur  
        // before the method ends. You can experiment with this 
        // by commenting out the class-level declaration and  
        // uncommenting the declaration below; then uncomment 
        // the GC.KeepAlive(aTimer) at the end of the method. 
        System.Timers.Timer aTimer; 

        // Create a timer with a ten second interval.
        aTimer = new System.Timers.Timer(10000);

        // Hook up the Elapsed event for the timer.
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

        // Set the Interval to 2 seconds (2000 milliseconds).
        aTimer.Interval = 2000;
        aTimer.Enabled = true;

        // If the timer is declared in a long-running method, use 
        // KeepAlive to prevent garbage collection from occurring 
        // before the method ends. 
        //GC.KeepAlive(aTimer);
    }

    // Specify what you want to happen when the Elapsed event is  
    // raised. 
    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime);
    }
} 
```

我理解（如果我错了，请纠正我）只要程序正在运行并且事件会无限触发，在类级别声明的计时器对象就是活动的。通过注释掉类级别声明的计时器对象并取消注释 short_running_method 中的声明，我认为如果不使用 GC.KeepAlive(aTimer) 并且事件应该停止触发，那么 atimer 对象应该在一定时间后被垃圾收集。然而，在我的实验中，事件似乎永远不会停止，即使在 30 分钟后它仍然会被提升。有人可以澄清为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:54:19.700

问题在于从事件源到事件侦听器的**强引用：**

```
aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent); 
```

因此，您可能正在这里寻找**弱事件模式**： [MSDN 上的弱事件模式](http://msdn.microsoft.com/en-us/library/aa970850.aspx)

此外，要**停止计时器**，您可以使用：

```
aTimer.Stop(); 
```

> 您还可以通过将**Enabled**设置为 false 来停止计时。
> 
> 引发 Elapsed 事件的信号总是排队等待在 ThreadPool 线程上执行，因此事件处理方法可能在一个线程上运行，同时对 Stop 方法的调用在另一个线程上运行。**这可能会导致在调用 Stop 方法后引发 Elapsed 事件。**下一节中的代码示例显示了一种解决这种竞争条件的方法。
> 
> [MSDN：Timer.Stop 方法](http://msdn.microsoft.com/en-us/library/system.timers.timer.stop.aspx)

# python - 使用 Shapely 绘制椭圆

> ID：13105915
> 
> 赞同：17
> 
> 时间：2012-10-28T02:32:56.903
> 
> 标签：python, shapely

我正在将[Shapely](https://github.com/Toblerity/Shapely)集成到我的代码中，并且我必须处理几种不同类型的几何对象。线、多边形和线串满足了我的大部分需求，但我需要使用椭圆。有没有办法通过边界框或半轴在 Shapely 中创建椭圆，而不必将椭圆离散成线？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-30T06:01:19.577

没有任何方法可以在不离散化的情况下在 Shapely 中表示多边形。

在基础级别，Shapely 处理点数。从 LineString 到 Polygon 的所有内容都只是一个点列表。一个很好的例子是当你把 a`Point`缓冲出来时会发生什么：

```
>>> import shapely
>>> from shapely.geometry.point import Point
>>> p = Point(0, 0)
>>> circle = p.buffer(1.0)
>>> list(circle.exterior.coords)
[(1.0, 0.0), (0.99518472667219693, -0.098017140329560506), (0.98078528040323054, -0.19509032201612808), (0.95694033573220894, -0.29028467725446211), (0.92387953251128696, -0.38268343236508939), (0.88192126434835527, -0.4713967368259972), (0.83146961230254557, -0.55557023301960173), (0.77301045336273744, -0.63439328416364493), (0.70710678118654813, -0.70710678118654691), (0.63439328416364626, -0.77301045336273633), (0.55557023301960307, -0.83146961230254468), (0.47139673682599859, -0.88192126434835449), (0.38268343236509084, -0.92387953251128629), (0.29028467725446361, -0.95694033573220849), (0.19509032201612964, -0.98078528040323021), (0.098017140329562089, -0.99518472667219671), (1.615542552166338e-15, -1.0), (-0.098017140329558883, -0.99518472667219704), (-0.19509032201612647, -0.98078528040323076), (-0.2902846772544605, -0.95694033573220938), (-0.38268343236508784, -0.92387953251128752), (-0.4713967368259957, -0.88192126434835605), (-0.55557023301960051, -0.83146961230254635), (-0.63439328416364393, -0.77301045336273821), (-0.70710678118654624, -0.70710678118654879), (-0.77301045336273588, -0.63439328416364682), (-0.83146961230254435, -0.55557023301960362), (-0.88192126434835427, -0.47139673682599903), (-0.92387953251128618, -0.38268343236509111), (-0.95694033573220849, -0.29028467725446366), (-0.98078528040323021, -0.19509032201612947), (-0.99518472667219682, -0.098017140329561714), (-1.0, -1.010639055082363e-15), (-0.99518472667219693, 0.098017140329559702), (-0.98078528040323065, 0.1950903220161275), (-0.95694033573220905, 0.29028467725446172), (-0.92387953251128696, 0.38268343236508923), (-0.88192126434835527, 0.47139673682599725), (-0.83146961230254546, 0.55557023301960196), (-0.7730104533627371, 0.63439328416364527), (-0.70710678118654768, 0.70710678118654746), (-0.63439328416364593, 0.77301045336273666), (-0.55557023301960295, 0.83146961230254479), (-0.4713967368259987, 0.88192126434835449), (-0.38268343236509117, 0.92387953251128618), (-0.29028467725446411, 0.95694033573220838), (-0.19509032201613041, 0.98078528040322999), (-0.098017140329563102, 0.9951847266721966), (-2.8482262121737323e-15, 1.0), (0.098017140329557426, 0.99518472667219715), (0.19509032201612481, 0.9807852804032311), (0.29028467725445867, 0.95694033573220993), (0.3826834323650859, 0.9238795325112884), (0.47139673682599365, 0.88192126434835716), (0.55557023301959818, 0.8314696123025479), (0.63439328416364149, 0.77301045336274021), (0.70710678118654358, 0.70710678118655146), (0.77301045336273322, 0.63439328416365004), (0.83146961230254179, 0.5555702330196074), (0.88192126434835194, 0.47139673682600342), (0.92387953251128407, 0.38268343236509617), (0.95694033573220671, 0.29028467725446927), (0.98078528040322899, 0.19509032201613569), (0.99518472667219615, 0.098017140329568472), (1.0, 8.2385270480656025e-15), (1.0, 0.0)] 
```

如您所见，圆由 65 个点组成，这些点彼此间隔开`0.0966`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-12-22T08:01:03.027

对于那些感兴趣的人，这里是一个创建轴长为 15 和 20 的椭圆的示例。

```
import shapely.affinity
from shapely.geometry import Point

circle = Point(0, 0).buffer(1)  # type(circle)=polygon
ellipse = shapely.affinity.scale(circle, 15, 20)  # type(ellipse)=polygon 
```

# ios - 为什么在“numberOfSectionInTableView:”中使用 NSInteger 而不是 NSUInteger？

> ID：13105917
> 
> 赞同：9
> 
> 时间：2012-10-28T02:34:15.127
> 
> 标签：ios, crash, uitableview, nsuinteger

UITableView 数据源方法`numberOfSectionsInTableView:`的返回类型为`NSInteger`. 然而，一个 UITableView 不能有负数的行；它有 0 行或更多行，那么为什么返回类型是 NSInteger？这不允许与返回的负整数有关的崩溃吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T02:47:36.403

您不能`(if var < 0) return;`使用无符号整数进行检查。这是选择一个的标准原因。真正使用无符号整数的唯一原因是如果您需要更大的数字空间，并且您可以保证输入永远不会尝试小于零。

# iframe - 通过 iframe 进行的信用卡付款表格是否有缺点？

> ID：13105932
> 
> 赞同：6
> 
> 时间：2012-10-28T02:36:52.597
> 
> 标签：iframe, ssl, payment-gateway, credit-card

我在许多小型企业电子商务网站中看到的一个共同特征是，当我单击“结帐”按钮时，我被带离网站并被重定向到第三方支付网关（如 paypal、authorize.net 等）的 url。 . 在此第 3 方网站上付款后，我被重定向回小型企业电子商务网站。

我想为我的一些客户简化这个过程。我计划制作一个付款表格，其他人可以通过 iframe 将其嵌入到他们的网站中。付款表格将位于 SSL 后面。当我的支付表单收到信息时，我会将其传递给像 paypal 这样的商家网关，并使用成功/失败响应重新加载 iframe。

这种 iframe 方法有什么重大问题吗？我之所以问，是因为我不记得像 paypal 这样的支付网关为其支付页面提供 iframe 嵌入代码，尽管提供它似乎是一件微不足道的事情。如果他们可以向网站所有者提供结帐 url 以嵌入到他们的页面中，他们应该同样能够轻松地提供 iframe 嵌入代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T15:25:30.370

HTTPS 连接安全性的一个基本方面是验证远程方的身份。与某人秘密交换数据是一回事，但您需要知道与谁。

从技术角度来看，服务器的身份是使用其证书来验证的：

*   它需要被信任，即客户端可以验证它是由它信任的权威机构颁发的（RFC 3280/5280）。
*   它需要发给客户端想要与之交谈的实体，即需要验证主机名（RFC 2818，第 3.1 节）。

然而，技术方面只是解决方案的一部分。用户需要能够看到浏览器正在尝试连接的站点。这是一个用户界面问题，只有用户可以检查浏览器正在尝试做什么，因为它的 UI 正在显示什么（期望大多数用户使用开发人员工具是不现实的）。

使用 iframe 会隐藏用户为该 iframe 实际连接的站点的名称（地址栏中仅显示主页的地址）。这可以防止用户进行此验证。

此外，如果 HTTPS iframe 位于 HTTP 页面中，情况会更糟，在这种情况下，用户甚至根本无法检查是否使用了 HTTPS。

嵌入式 iframe 有一些不好的例子，特别是[3-D Secure](http://en.wikipedia.org/wiki/3-D_Secure#Verifiability_of_site_identity)，因为 (a) 它建议使用 iframe 和 (b) 即使不使用 iframe，该名称通常与用户的银行无关，商户网站或信用卡公司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T13:53:12.673

一个潜在的问题（作为用户，我实际上遇到了）是托管页面可能不会使用 SSL，并且在有关成为精明的 Internet 购物者的文章中告诉人们要寻找的小“提示”。由于用户谨慎，可能会在最后一刻失去销售。

跨域脚本也存在潜在问题。这是一个巨大的话题，即使您*希望*它成为可能，也可能非常具有挑战性，但这并非不可能，因此存在滥用的可能性。

# mysql - Wordpress插件劫持数据库，如何清理？

> ID：13105936
> 
> 赞同：0
> 
> 时间：2012-10-28T02:37:29.597
> 
> 标签：mysql, phpmyadmin, wordpress

我的数据库已被 WP 插件存储库中的多合一事件日历插件劫持。该插件已被删除，但在`wp_options`表格中留下了很多垃圾。虽然我可以删除一些选项，但插件在选项 id 中注入了一些重要的东西，我认为它们具有核心相关性：`user_roles`（`option_id`99）和`cron`（`option_id`106）。

下面是 cron `option_id`。有人可以看看，看看如何清理这些烂摊子吗？`ai1ec`（多合一事件日历），是插件。我在这里真的很茫然。

```
(106,'cron','a:12:{i:1351390114;a:1:{s:12:\"ai1ec_u_cron\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:6:\"hourly\";s:4:\"args\";a:0:{}s:8:\"interval\";i:3600;}}}i:1351390525;a:1:{s:25:\"ai1ec_facebook_cron_pages\";a:1:{s:32:\"5b7cb91948f8bf686b1a2b49d260e23e\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:1:{i:0;s:4:\"page\";}s:8:\"interval\";i:43200;}}}i:1351392325;a:1:{s:26:\"ai1ec_facebook_cron_groups\";a:1:{s:32:\"440efcc24b7250fee903fb2f69981914\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:1:{i:0;s:5:\"group\";}s:8:\"interval\";i:43200;}}}i:1351392373;a:3:{s:16:\"wp_version_check\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:43200;}}s:17:\"wp_update_plugins\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:43200;}}s:16:\"wp_update_themes\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:43200;}}}i:1351394125;a:1:{s:25:\"ai1ec_facebook_cron_users\";a:1:{s:32:\"fa7faa01ef3155dd51574f1d1e8eddd9\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:1:{i:0;s:4:\"user\";}s:8:\"interval\";i:43200;}}}i:1351424436;a:1:{s:12:\"ai1ec_n_cron\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:5:\"daily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:86400;}}}i:1351425083;a:1:{s:10:\"ai1ec_cron\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:5:\"daily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:86400;}}}i:1351431925;a:1:{s:26:\"ai1ec_facebook_cron_events\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:43200;}}}i:1351435602;a:1:{s:19:\"wp_scheduled_delete\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:5:\"daily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:86400;}}}i:1351450159;a:1:{s:30:\"wp_scheduled_auto_draft_delete\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:5:\"daily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:86400;}}}i:1351465714;a:1:{s:12:\"ai1ec_n_cron\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:5:\"daily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:86400;}}}s:7:\"version\";i:2;}','yes') 
```

`user_roles`id看起来更糟。`ai1ec`，再一次，到处都是。管理区域中还有一个“事件贡献者”默认用户角色，无法删除。

```
(99,'xxxxxxxuser_roles','a:6:{s:13:\"administrator\";a:2:{s:4:\"name\";s:13:\"Administrator\";s:12:\"capabilities\";a:79:{s:13:\"switch_themes\";b:1;s:11:\"edit_themes\";b:1;s:16:\"activate_plugins\";b:1;s:12:\"edit_plugins\";b:1;s:10:\"edit_users\";b:1;s:10:\"edit_files\";b:1;s:14:\"manage_options\";b:1;s:17:\"moderate_comments\";b:1;s:17:\"manage_categories\";b:1;s:12:\"manage_links\";b:1;s:12:\"upload_files\";b:1;s:6:\"import\";b:1;s:15:\"unfiltered_html\";b:1;s:10:\"edit_posts\";b:1;s:17:\"edit_others_posts\";b:1;s:20:\"edit_published_posts\";b:1;s:13:\"publish_posts\";b:1;s:10:\"edit_pages\";b:1;s:4:\"read\";b:1;s:8:\"level_10\";b:1;s:7:\"level_9\";b:1;s:7:\"level_8\";b:1;s:7:\"level_7\";b:1;s:7:\"level_6\";b:1;s:7:\"level_5\";b:1;s:7:\"level_4\";b:1;s:7:\"level_3\";b:1;s:7:\"level_2\";b:1;s:7:\"level_1\";b:1;s:7:\"level_0\";b:1;s:17:\"edit_others_pages\";b:1;s:20:\"edit_published_pages\";b:1;s:13:\"publish_pages\";b:1;s:12:\"delete_pages\";b:1;s:19:\"delete_others_pages\";b:1;s:22:\"delete_published_pages\";b:1;s:12:\"delete_posts\";b:1;s:19:\"delete_others_posts\";b:1;s:22:\"delete_published_posts\";b:1;s:20:\"delete_private_posts\";b:1;s:18:\"edit_private_posts\";b:1;s:18:\"read_private_posts\";b:1;s:20:\"delete_private_pages\";b:1;s:18:\"edit_private_pages\";b:1;s:18:\"read_private_pages\";b:1;s:12:\"delete_users\";b:1;s:12:\"create_users\";b:1;s:17:\"unfiltered_upload\";b:1;s:14:\"edit_dashboard\";b:1;s:14:\"update_plugins\";b:1;s:14:\"delete_plugins\";b:1;s:15:\"install_plugins\";b:1;s:13:\"update_themes\";b:1;s:14:\"install_themes\";b:1;s:11:\"update_core\";b:1;s:10:\"list_users\";b:1;s:12:\"remove_users\";b:1;s:9:\"add_users\";b:1;s:13:\"promote_users\";b:1;s:18:\"edit_theme_options\";b:1;s:13:\"delete_themes\";b:1;s:6:\"export\";b:1;s:16:\"read_ai1ec_event\";b:1;s:16:\"edit_ai1ec_event\";b:1;s:17:\"edit_ai1ec_events\";b:1;s:24:\"edit_others_ai1ec_events\";b:1;s:25:\"edit_private_ai1ec_events\";b:1;s:27:\"edit_published_ai1ec_events\";b:1;s:18:\"delete_ai1ec_event\";b:1;s:19:\"delete_ai1ec_events\";b:1;s:26:\"delete_others_ai1ec_events\";b:1;s:29:\"delete_published_ai1ec_events\";b:1;s:27:\"delete_private_ai1ec_events\";b:1;s:20:\"publish_ai1ec_events\";b:1;s:25:\"read_private_ai1ec_events\";b:1;s:24:\"manage_events_categories\";b:1;s:18:\"manage_ai1ec_feeds\";b:1;s:19:\"switch_ai1ec_themes\";b:1;s:20:\"manage_ai1ec_options\";b:1;}}s:6:\"editor\";a:2:{s:4:\"name\";s:6:\"Editor\";s:12:\"capabilities\";a:49:{s:17:\"moderate_comments\";b:1;s:17:\"manage_categories\";b:1;s:12:\"manage_links\";b:1;s:12:\"upload_files\";b:1;s:15:\"unfiltered_html\";b:1;s:10:\"edit_posts\";b:1;s:17:\"edit_others_posts\";b:1;s:20:\"edit_published_posts\";b:1;s:13:\"publish_posts\";b:1;s:10:\"edit_pages\";b:1;s:4:\"read\";b:1;s:7:\"level_7\";b:1;s:7:\"level_6\";b:1;s:7:\"level_5\";b:1;s:7:\"level_4\";b:1;s:7:\"level_3\";b:1;s:7:\"level_2\";b:1;s:7:\"level_1\";b:1;s:7:\"level_0\";b:1;s:17:\"edit_others_pages\";b:1;s:20:\"edit_published_pages\";b:1;s:13:\"publish_pages\";b:1;s:12:\"delete_pages\";b:1;s:19:\"delete_others_pages\";b:1;s:22:\"delete_published_pages\";b:1;s:12:\"delete_posts\";b:1;s:19:\"delete_others_posts\";b:1;s:22:\"delete_published_posts\";b:1;s:20:\"delete_private_posts\";b:1;s:18:\"edit_private_posts\";b:1;s:18:\"read_private_posts\";b:1;s:20:\"delete_private_pages\";b:1;s:18:\"edit_private_pages\";b:1;s:18:\"read_private_pages\";b:1;s:16:\"read_ai1ec_event\";b:1;s:16:\"edit_ai1ec_event\";b:1;s:17:\"edit_ai1ec_events\";b:1;s:24:\"edit_others_ai1ec_events\";b:1;s:25:\"edit_private_ai1ec_events\";b:1;s:27:\"edit_published_ai1ec_events\";b:1;s:18:\"delete_ai1ec_event\";b:1;s:19:\"delete_ai1ec_events\";b:1;s:26:\"delete_others_ai1ec_events\";b:1;s:29:\"delete_published_ai1ec_events\";b:1;s:27:\"delete_private_ai1ec_events\";b:1;s:20:\"publish_ai1ec_events\";b:1;s:25:\"read_private_ai1ec_events\";b:1;s:24:\"manage_events_categories\";b:1;s:18:\"manage_ai1ec_feeds\";b:1;}}s:6:\"author\";a:2:{s:4:\"name\";s:6:\"Author\";s:12:\"capabilities\";a:25:{s:12:\"upload_files\";b:1;s:10:\"edit_posts\";b:1;s:20:\"edit_published_posts\";b:1;s:13:\"publish_posts\";b:1;s:4:\"read\";b:1;s:7:\"level_2\";b:1;s:7:\"level_1\";b:1;s:7:\"level_0\";b:1;s:12:\"delete_posts\";b:1;s:22:\"delete_published_posts\";b:1;s:16:\"read_ai1ec_event\";b:1;s:16:\"edit_ai1ec_event\";b:1;s:17:\"edit_ai1ec_events\";b:1;s:24:\"edit_others_ai1ec_events\";b:1;s:25:\"edit_private_ai1ec_events\";b:1;s:27:\"edit_published_ai1ec_events\";b:1;s:18:\"delete_ai1ec_event\";b:1;s:19:\"delete_ai1ec_events\";b:1;s:26:\"delete_others_ai1ec_events\";b:1;s:29:\"delete_published_ai1ec_events\";b:1;s:27:\"delete_private_ai1ec_events\";b:1;s:20:\"publish_ai1ec_events\";b:1;s:25:\"read_private_ai1ec_events\";b:1;s:24:\"manage_events_categories\";b:1;s:18:\"manage_ai1ec_feeds\";b:1;}}s:11:\"contributor\";a:2:{s:4:\"name\";s:11:\"Contributor\";s:12:\"capabilities\";a:5:{s:10:\"edit_posts\";b:1;s:4:\"read\";b:1;s:7:\"level_1\";b:1;s:7:\"level_0\";b:1;s:12:\"delete_posts\";b:1;}}s:10:\"subscriber\";a:2:{s:4:\"name\";s:10:\"Subscriber\";s:12:\"capabilities\";a:2:{s:4:\"read\";b:1;s:7:\"level_0\";b:1;}}s:21:\"ai1ec_event_assistant\";a:2:{s:4:\"name\";s:17:\"Event Contributor\";s:12:\"capabilities\";a:4:{s:4:\"read\";b:1;s:7:\"level_0\";b:1;s:17:\"edit_ai1ec_events\";b:1;s:18:\"delete_ai1ec_event\";b:1;}}}','yes'), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:07:47.423

查看插件的源代码，您可以找到在安装过程中为其提供的选项名称，摆脱它们的最快方法是打开您的主题 functions.php 文件

粘贴：

```
delete_option('ai1ec_settings'); 
```

我看到的其他选项

```
//from file:all-in-one-event-calendar\app\model\class-ai1ec-settings.php
update_option( 'ai1ec_settings', $this );
update_option( 'start_of_week', $this->week_start_day );
update_option( 'ai1ec_cron_version', get_option( 'ai1ec_cron_version' ) + 1 );
update_option( 'timezone_string', $this->timezone ); 
```

如果你愿意，你也可以删除这些。当您通过外观-> 编辑器或 ftp 更新您的 functions.php 文件时，当您访问该站点时，函数文件将运行，如果找到选项，wordpress 将删除它们。:)

然后只需删除函数文件中的调用..

# file-format - 如何打开和编辑 .CNDF 卫星频道文件

> ID：13105941
> 
> 赞同：1
> 
> 时间：2012-10-28T02:39:10.733
> 
> 标签：file-format

在谷歌上几个小时后，我找不到任何关于存储在 Sat box 上的卫星频道列表的 .CNDF 文件格式的好的参考信息。

我知道文件格式有 .NDF（未压缩）和 .CNDF（压缩）版本。

我基本上想在我的 C# 应用程序中打开和解压缩 .CNDF 文件，玩弄它，然后再次压缩并保存它。

任何指向文件格式数据表或任何体面示例的指针，尤其是使用的压缩方法。谢谢

# ios - 将保存在 plist 中的所有图像加载到 tableview 中

> ID：13105947
> 
> 赞同：0
> 
> 时间：2012-10-28T02:41:10.153
> 
> 标签：ios

在我的项目中，我将图像保存到手机上的文档文件夹中，然后将它们加载到单独的 tableview 中。我取得了一些成功，拍摄的最后一张图像被加载到表中，但被加载到每一行而不是最后一个。这是我用来在 tableview 中加载图像的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"List";
ListCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
//Load PLIST
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [path objectAtIndex:0];
NSString *plistPath = [NSString stringWithFormat:@"%@/images.plist", documentsDirectory];
//Load PLIST into mutable array
NSMutableArray *imageArray = [NSMutableArray arrayWithContentsOfFile:plistPath];

for (NSDictionary *dict in imageArray) {
//Do whatever you want here, to load an image for example
   NSString *imageFilePath = [NSHomeDirectory() stringByAppendingPathComponent:[dict objectForKey:@"Original Image"]];
   UIImage *image = [UIImage imageWithContentsOfFile:imageFilePath];
   [cell.imageofItem setImage:image];
}   
} 
```

这是正在发生的事情的一个例子：假设我拍了两张照片，一张叫做“10282012_13113138_image.jpg”，另一张叫做“10282012_13113468_image.jpg”。然后我去加载单元格中的图像，最后一张照片加载到两个单元格中。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:13:32.953

代替

```
for (NSDictionary *dict in imageArray) {
   NSString *imageFilePath = [NSHomeDirectory() stringByAppendingPathComponent:[dict objectForKey:@"Original Image"]];
   UIImage *image = [UIImage imageWithContentsOfFile:imageFilePath];
   [cell.imageofItem setImage:image]; 
```

}

尝试

```
 NSDictionary *dict = [imageArray objectAtIndex:indexPath.row];
   NSString *imageFilePath = [NSHomeDirectory() stringByAppendingPathComponent:[dict objectForKey:@"Original Image"]];
   UIImage *image = [UIImage imageWithContentsOfFile:imageFilePath];
   [cell.imageofItem setImage:image]; 
```

问题在于，对于每个 indexPath.row，您都在迭代直到数组中的最后一个元素，不断覆盖单元格图像，直到到达最后一个图像。然后对于下一个 indexPath.row，您执行相同的操作，并将其设置为数组中的最后一个图像，依此类推......

# visual-studio-2012 - Visual Studio 2012 Web Publish 不断用相同版本覆盖现有文件

> ID：13105951
> 
> 赞同：5
> 
> 时间：2012-10-28T02:42:04.147
> 
> 标签：visual-studio-2012

刚刚安装了 VS2012 并通过一键发布功能运行了一个奇怪的行为。

我正在通过 FTP 发布，一切正常，只是 VS 似乎坚持一遍又一遍地覆盖一些文件，即使没有任何改变。

在 VS2010 中，一遍又一遍地单击“发布”按钮只会运行这些步骤并在几秒钟内完成，在 VS2012 中，它需要大约两分钟，因为它会不断复制 5mb dll 和其他一些东西。

PS“发布前删除所有现有文件”已关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:32:59.677

这是绝对的痛苦。我已经诉诸于在 VS2010 中与 VS2012 一起保持解决方案打开并使用 VS2010 发布，这很烦人，但它更快......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T04:22:56.467

不幸的是，在 VS 2012 中没有只更改文件的选项。不知道为什么他们把它拿出来，除了可能有太多人抱怨当他们的 FTP 服务器出现问题时 VS 没有正确同步。FTP 服务器因不返回正确的文件信息而臭名昭著。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T13:41:29.050

这对于大量文件来说实在是太慢了。我最好的经验是以这种方式删除不包含程序集（脚本、css 等）的未使用文件夹`<ExcludeFoldersFromDeployment>Content;Scripts;Views</ExcludeFoldersFromDeployment>` 。当您更改它们时直接发布这些文件。否则从 profile 发布程序集。 [https://msdn.microsoft.com/en-us/library/ee942158.aspx#can_i_exclude_specific_files_or_folders_from_deployment](https://msdn.microsoft.com/en-us/library/ee942158.aspx#can_i_exclude_specific_files_or_folders_from_deployment)

# python - 用于 Neo4j 的 Python 绑定中的密码查询，在 WHERE 子句中使用算术运算

> ID：13105952
> 
> 赞同：1
> 
> 时间：2012-10-28T02:42:24.123
> 
> 标签：python, where-clause, neo4j, cypher, arithmetic-expressions

在 python binding v 1.6 中对我的 neo4j 数据库运行以下 Cypher 查询时遇到问题：

```
START  n0 = node:my_nodes(label='1'), n1 = node:my_nodes(label='1'), 
       n2 = node:my_nodes(label='2'), n3 = node:my_nodes(label='2'), 
       n4 = node:my_nodes(label='2')
MATCH (n0)-[r0]-(n1),(n0)-[r1]-(n4),(n1)-[r2]-(n2),(n2)-[r3]-(n3)
WHERE (r1.year - r0.year = 1) AND (r2.year - r1.year = 0) AND 
      (r3.year - r2.year = 0)
RETURN count(distinct n0), count(distinct n1),
       count(distinct n2), count(distinct n3),
       count(distinct n4) 
```

我的数据库有带有索引属性的节点`label`以及与整数属性的关系`year`。执行此查询时，出现错误

```
in decorator return fn(*args, **kwargs)
org.neo4j.cypher.CypherExceptionPyRaisable: Unclosed parenthesis
"WHERE (r1.label - r0.label = 1) AND 
(r2.label - r1.label = 0) AND (r3.label - r2.label = 0)"
                                                               ^ 
```

我已经在这个查询中玩过括号但没有成功。谁能帮我解决这个错误？

编辑：我认为问题出在使用 neo4j 嵌入式版本 1.6，但我将它升级到版本 1.9.dev0（从 gi​​thub 编译），但我仍然得到同样的错误。

Edit2：感谢 ulkas 的评论，我发现了交互式密码控制台并在[那里](http://console.neo4j.org/?id=9n3usw)创建了一个示例图和密码查询（但没有索引部分）。查询有问题：

```
 Error: java.lang.RuntimeException: org.neo4j.helpers.ThisShouldNotHappenError: 
 Developer: Andres claims that: Unexpected traversal state encountered. 
```

Edit3：在玩过控制台之后，我发现它不允许根据[文档](http://docs.neo4j.org/chunked/milestone/query-match.html)提供的无向关系和菱形图案匹配。这就是我在控制台[http://console.neo4j.org/?id=oqspkc](http://console.neo4j.org/?id=oqspkc)中工作的内容。此查询在 Python 中失败，并显示相同的错误消息 ( `Unclosed parenthesis`)。我还能在 neo4j 中匹配菱形图案吗？python绑定有什么问题？

# ruby - 我在 ruby 中安装 Mechanize 时的一些问题

> ID：13105954
> 
> 赞同：1
> 
> 时间：2012-10-28T02:42:58.703
> 
> 标签：ruby, mechanize

我在 ubuntu 12.04 上使用 ruby​​ 1.8.7 和 ruby​​gem 1.8.15

首先，我输入`sudo gem install mechanize --no-ri --no-rdoc`

它似乎运作良好。

```
Building native extensions.  This could take a while...
Fetching: ntlm-http-0.1.1.gem (100%)
WARNING: ntlm-http-0.1.1 has an invalid nil value for @cert_chain
Fetching: webrobots-0.0.13.gem (100%)
Fetching: unf_ext-0.0.5.gem (100%)
Building native extensions.  This could take a while...
Fetching: unf-0.0.5.gem (100%)
Fetching: domain_name-0.5.4.gem (100%)
Fetching: mechanize-2.5.1.gem (100%)
Successfully installed nokogiri-1.5.5
Successfully installed ntlm-http-0.1.1
Successfully installed webrobots-0.0.13
Successfully installed unf_ext-0.0.5
Successfully installed unf-0.0.5
Successfully installed domain_name-0.5.4
Successfully installed mechanize-2.5.1
7 gems installed 
```

然后我写了我的第一个程序

```
require 'rubygems'
require 'mechanize'

agent = Mechanize.new 
```

它只是行不通

```
./mechanize.rb uninitialized constant Mechanize (NameError)
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in        gem_original_require'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from mechanize.rb:2 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T02:54:14.750

将您的文件重命名为“mechanize-test.rb”或其他名称以避免与库混淆。看起来1.8的`require`行为很奇怪。

# java - PgJDBC：跟随教程时“找不到合适的驱动程序”，为什么？

> ID：13105955
> 
> 赞同：0
> 
> 时间：2012-10-28T02:43:03.777
> 
> 标签：java, sql, postgresql, jdbc

我正在编写一个查询 PostgreSQL 数据库的 Java 程序。我正在关注[这个例子](http://www.mkyong.com/jdbc/how-do-connect-to-postgresql-with-jdbc-driver-java/)，但在这里遇到了麻烦：

```
 connection = DriverManager.getConnection(
                "jdbc:postgresql://127.0.0.1:5432/testdb", "mkyong",
                "123456"); 
```

根据[DriverManager 的 JavaDoc，](http://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html#getConnection%28java.lang.String,%20java.lang.String,%20java.lang.String%29)第一个字符串是“表单的数据库 url `jdbc:subprotocol:subname`。当我连接到服务器时，我输入`psql -h dataserv.abc.company.com -d app -U emp24`并提供密码`qwe123`（例如缘故）。第一个参数应该`getConnection`是什么？

我试过了

```
connection = DriverManager.getConnection(
                    "jdbc:postgresql://dataserv.abc.company.com",  "emp24",
                    "qwe123"); 
```

并得到运行时错误：`no suitable driver found`.

我已经下载了 JDBC4 Postgresql 驱动程序，版本 9.2-1000。

* * *

在我修复我的程序以加载驱动程序后，`Class.forName("org.postgresql.Driver");`它可以识别 JDBC URL，但它仍然无法连接。我现在有一个新错误。

当我运行程序时出现错误，这是带有堆栈跟踪的输出：

```
-------- PostgreSQL JDBC Connection Testing ------------
PostgreSQL JDBC Driver Registered!
Connection Failed! Check output consoleorg.postgresql.util.PSQLException: Connection refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:207)
    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:65)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:140)
    at org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:29)
    at org.postgresql.jdbc3g.AbstractJdbc3gConnection.<init>(AbstractJdbc3gConnection.java:21)
    at org.postgresql.jdbc4.AbstractJdbc4Connection.<init>(AbstractJdbc4Connection.java:31)
    at org.postgresql.jdbc4.Jdbc4Connection.<init>(Jdbc4Connection.java:23)
    at org.postgresql.Driver.makeConnection(Driver.java:393)
    at org.postgresql.Driver.connect(Driver.java:267)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at DatabaseConnect.main(DatabaseConnect.java:32)
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at org.postgresql.core.PGStream.<init>(PGStream.java:60)
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:101)
    ... 11 more 
```

我将 URL 格式化为`getConnection`：

`"jdbc:postgresql://dataserv.abc.company.com:5432/app"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T04:26:30.173

很可能您没有向 DriverManager 注册 JDBC 驱动程序，因此 JDBC 不知道如何处理`jdbc:postgresql:`. 在尝试`Class.forName("org.postgresql.Driver");`使用之前先尝试`DriverManager.getConnection`。这在您链接到的示例代码中显示（它是第一行），在[DriverManager 文档](http://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html)的序言中进行了解释，并且还在下面链接的 PgJDBC 文档中进行了详细解释。

或者，也许你打错`jdbc:postgresql:`了，所以 DriverManager 正在寻找一个名为`postgrsql`or的驱动程序`Postgresql`，它不会被注册。

最后，您可能正在吞下一个类加载异常，因此驱动程序加载失败并且您看不到它，就像这样（非常糟糕）代码：

```
// Very bad code, never do this
try {
    Class.forName("org.postgresql.Driver");
} catch (ClasNotFoundException ex) {} 
```

**千万不要做上述事情**。将异常包装在未经检查的运行时异常中，或者只是添加`throws ClasNotFoundException`到您的方法定义中。

* * *

根据[PgJDBC 文档](http://jdbc.postgresql.org/documentation/91/index.html)和[常见问题解答](https://stackoverflow.com/faq)，要使用驱动程序，您必须：

*   [下载 JDBC 驱动程序](http://jdbc.postgresql.org/download.html)；
*   [确保 JDBC 驱动程序在您的`CLASSPATH`](http://jdbc.postgresql.org/documentation/91/classpath.html);
*   通过传递 JVM 参数或使用将驱动程序`Class.forName("org.postgresql.Driver");`注册到 DriverManager来[加载/注册驱动程序；](http://jdbc.postgresql.org/documentation/91/load.html)
*   [连接到数据库](http://jdbc.postgresql.org/documentation/91/connect.html)

这些都是手册的链接。

有关 的更多信息`CLASSPATH`，请参阅[维基百科](http://en.wikipedia.org/wiki/Classpath_(Java))

[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/sql/DriverManager.html)和JDBC[教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)`DriverManager`中讨论了 JDBC 。

* * *

至于 PostgreSQL 的 JDBC URL 格式，[文档中也有](http://jdbc.postgresql.org/documentation/91/connect.html)。

> 使用 JDBC，数据库由 URL（统一资源定位器）表示。对于 PostgreSQL™，这采用以下形式之一：
> 
> `jdbc:postgresql:database`
> `jdbc:postgresql://host/database`
> `jdbc:postgresql://host:port/database`

文档继续解释每个参数的含义和可选的连接参数。

从这里您可以看到，在回答您对 John Woo 的回答的评论时，如果您的服务器正在侦听默认的 PostgreSQL 端口，则您*不必*指定端口，如果您不必指定端口时与 连接`psql`。

这使您的`getConnection`论点正确，问题是您没有先注册驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:23:33.393

确保您的[pg_hba.conf](http://www.postgresql.org/docs/9.0/static/auth-pg-hba-conf.html)文件有一个本地连接条目，如下所示：

```
local      mydatabasename  myusername  password 
```

# ruby - ruby：为开发基于 Web 的聊天提供并发性的库、框架、服务器

> ID：13105956
> 
> 赞同：1
> 
> 时间：2012-10-28T02:43:12.873
> 
> 标签：ruby, web-applications, concurrency, chat, nonblocking

我应该使用什么 ruby​​ 并发库/框架来开发基于 Web 的聊天？

我已经阅读了 Eventmachine 和 Celluloid*库*，以及 Sinatra::Synchrony、Cramp、Goliath 和 Gserver *concurrency-ready-servers*。如果我做对了，所有这些库或服务器使用两种主要的不同方法实现并发：反应器模式（大部分都是），或使用多线程（即 gserver，...）。

现在，如果这一切都是正确的，我希望它是正确的，有人可以：

*   如果不是，请纠正我...
*   指出我错过的其他积极开发的库或框架？

我问这个的原因是我试图在服务器端使用 ruby​​ 构建一个基于 Web 的聊天，以用于学习目的。它将使用 websockets 或服务器端事件，使用 Jquery 或其他东西与客户端交互。

此外，我还阅读了有关将 ruby​​ 与 Xmpp 服务器或发布/订阅消息系统（如 Faye）一起使用的信息。如果我把其中一个放在盘子里，如果我说如果这一切都缩小到只需要担心以非阻塞方式向这些服务器发出请求，而不是必须设置一个完整的“非阻塞”红宝石聊天服务器？

我知道这有点令人费解，但我希望它仍然有意义.. 但如果我在某件事上完全走错了方向，有人可以给我至少一个笼统的、模糊的想法，我需要更好地理解什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:01:05.777

有趣的是你应该问。Ruby Weekly 的 Peter Cooper 提到（第 116 期 - 2012 年 10 月 25 日）一个标题为“Ruby 开发人员需要停止使用 EventMachine。这是错误的方向”的演讲，这引发了一些关于 HN 的有趣辩论[，](http://www.slideshare.net/KyleDrake/hybrid-concurrency-patterns)[因为](http://news.ycombinator.com/item?id=4695828)许多框架都是建立在它之上的（歌利亚、抽筋等）

失望的人群要么涌向赛璐珞（Sidekiq 作为其最著名的客户端）、Node.js 平台，要么涌向其他从一开始就提供可靠并发原语的语言。是的，Go、Erlang、Clojure...

就个人而言，我不久前使用 Cramp、Redis Pub/Sub 和 Websockets 实现了一个基于 Web 的实时聊天，大致改编自以下[演示代码](https://github.com/lifo/cramp-pub-sub-chat-demo)。它像宣传的那样工作，但它获得的流量无法与其他地方的一些大容量系统的要求相比。

# string - 使用堆栈内存打印字符串

> ID：13105958
> 
> 赞同：1
> 
> 时间：2012-10-28T02:44:01.260
> 
> 标签：string, memory, printing

有没有办法使用 MIPS(MARS) 中的堆栈指针打印字符串而不在 .data 段中声明它

# php - 将文本链接替换为带有 preg_replace 的链接

> ID：13105960
> 
> 赞同：4
> 
> 时间：2012-10-28T02:44:17.203
> 
> 标签：php, regex

我似乎在用发布的网站链接替换文本链接时遇到问题，它没有链接。

编码：

```
$status_text = preg_replace('#(\A|[^=\]\'"a-zA-Z0-9])(http[s]?://(.+?)/[^()<>\s]+)#i', '\\1<a href="\\2">\\3</a>', $status_text);
echo $status_text; 
```

`$status_text`从名为 的 MySQL 字段中提取`contents`，并包含其他文本，但我只想链接链接。*此外*，我还希望它不显示完整的 URL，只显示主域。

更新：我们在同一页面上有另外两个 preg_replaces，在它们前面寻找带有 + 和 # 的链接到站点区域的东西，它们目前可以工作并且不需要与上述内容冲突：

```
$status_text = preg_replace("/#([a-z_0-9]+)/i", "<a href=\"http://url.com/hashlink/$1\">$0</a>", $status_text);

$status_text = preg_replace("/\+([a-z_0-9]+)/i", "<a href=\"http://url.com/pluslink/$1\">$0</a>", $status_text); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T03:23:46.420

在这里，试试这个：

```
$status_text = preg_replace('|([\w\d]*)\s?(https?://([\d\w\.-]+\.[\w\.]{2,6})[^\s\]\[\<\>]*/?)|i', '$1 <a href="$2">$3</a>', $status_text);
echo $status_text; 
```

或者让它更容易阅读：

```
$m = '|([\w\d]*)\s?(https?://([\d\w\.-]+\.[\w\.]{2,6})[^\s\]\[\<\>]*/?)|i';
$r = '$1 <a href="$2">$3</a>';

$status_text = preg_replace($m,$r,$status_text);
echo $status_text; 
```

**编辑**——由于OP中的新信息而更新——

您的主题标签正则表达式不考虑 URL 中的哈希值，所以让我们解决这个问题......此外，您应该在匹配主题标签或加号标签之前匹配 URL，否则您会弄乱为哈希创建的链接-标签和加号标签

```
$status_text = preg_replace('|(https?://([\d\w\.-]+\.[\w\.]{2,6})[^\s\]\[\<\>]*/?)|i', '<a href="$1">$2</a>', $status_text);
$status_text = preg_replace('|\B#([\d\w_]+)|i', '<a href="http://url.com/pluslink/$1">$0</a>', $status_text);
$status_text = preg_replace('|\B\+([\d\w_]+)|i', '<a href="http://url.com/pluslink/$1">$0</a>', $status_text); 
```

或者让它更容易阅读......

```
$match_href = '|(https?://([\d\w\.-]+\.[\w\.]{2,6})[^\s\]\[\<\>]*/?)|i';
$match_hash = '|\B#([\d\w_]+)|i';
$match_plus = '|\B\+([\d\w_]+)|i';
$replace_url = '<a href="$1">$2</a>';
$replace_tag = '<a href="http://url.com/pluslink/$1">$0</a>';

$status_text = preg_replace($match_href, $replace_url, $status_text);
$status_text = preg_replace($match_hash, $replace_tag, $status_text);
$status_text = preg_replace($match_plus, $replace_tag, $status_text); 
```

**再次编辑**——添加一个可能有用的 URL——

您可以在这里测试正则表达式：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

**另一个编辑**

根据评论/问题，如果您想考虑缺少 http 协议的 url，请使用以下命令：

```
$status_text = preg_replace('|((https?://)?([\d\w\.-]+\.[\w\.]{2,6})[^\s\]\[\<\>]*/?)|i', '<a href="$1">$3</a>', $status_text);
$status_text = preg_replace('|\B#([\d\w_]+)|i', '<a href="http://url.com/pluslink/$1">$0</a>', $status_text);
$status_text = preg_replace('|\B\+([\d\w_]+)|i', '<a href="http://url.com/pluslink/$1">$0</a>', $status_text); 
```

或者让它更容易阅读......

```
$match_href = '|((https?://)?([\d\w\.-]+\.[\w\.]{2,6})[^\s\]\[\<\>]*/?)|i';
$match_hash = '|\B#([\d\w_]+)|i';
$match_plus = '|\B\+([\d\w_]+)|i';
$replace_url = '<a href="$1">$3</a>';
$replace_tag = '<a href="http://url.com/pluslink/$1">$0</a>';

$status_text = preg_replace($match_href, $replace_url, $status_text);
$status_text = preg_replace($match_hash, $replace_tag, $status_text);
$status_text = preg_replace($match_plus, $replace_tag, $status_text); 
```

**示例用法**

输入：（来自 DB 的文本 -> $status_text）

```
<!-- language-all: lang-none -->
Hi, this is an example. This is a url http://stackoverflow.com/ 
and this is a hash reference that we want to link to an internal 
post #AwesomePost123 and this one is a plus reference we want to 
link to an internal post +AwesomePost123 and finally an example 
of a url without the http protocol www.stackoverflow.com 
```

输出：（运行正则表达式后）

```
<!-- language-all: lang-none -->
Hi, this is an example. This is a url <a href="http://stackoverflow.com/">stackoverflow.com</a> 
and this is a hash reference that we want to link to an internal 
post <a href="http://url.com/pluslink/AwesomePost123">#AwesomePost123</a> and this one is a plus reference we want to 
link to an internal post <a href="http://url.com/pluslink/AwesomePost123">+AwesomePost123</a> and finally an example 
of a url without the http protocol <a href="www.stackoverflow.com">www.stackoverflow.com</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:41:44.223

你可以试试这个：

```
function makeClickableLinks($s) {
  return preg_replace('@(https?://([-\w\.]+[-\w])+(:\d+)?(/([\w/_\.#-]*(\?\S+)?[^\.\s])?)?)@', '<a href="$1" target="_blank">$1</a>', $s);
} 
```

要测试它，试试这个：

```
echo makeClickableLinks('Hello world, you go to www.google.com to check! also http://www.google.com/ works too!'); 
```

在这里演示：http: [//codepad.viper-7.com/hkOdCM](http://codepad.viper-7.com/hkOdCM)

# python - 可以修改自己的输入的 Python 函数

> ID：13105968
> 
> 赞同：4
> 
> 时间：2012-10-28T02:46:48.937
> 
> 标签：python

我想创建一个 Python 函数，它可以检查自己的输入，而不是其输入的输出。例如，函数 raw_str 以字符串形式准确返回其输入：

```
>>> raw_str(2+2)
'2+2' 
```

而不是：

```
>>> str(2+2)
'4' 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T02:49:22.083

这是不可能的，因为在将参数传递给函数*之前*对参数进行了评估- 因此无法区分函数体内的`2 + 2`和（例如）。`3 + 1`如果没有更多的上下文，就很难提出可能的解决方案。

# cvs - 关于在 tcl 中执行 *.file

> ID：13105980
> 
> 赞同：1
> 
> 时间：2011-10-25T14:26:40.837
> 
> 标签：cvs, tcl

对于这个脚本：

```
puts [exec cvs up *.tcl] 
```

我想 cvs updtae 这个文件夹下的所有 .tcl 文件。

但我总是收到“cvs update: nothing known about *.tcl”错误信息。

我该如何解决这个问题？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-10-25T14:57:09.530

TCL`exec`不通配符。尝试`puts [exec cvs up [glob *.tcl]]`

编辑：那不太行；见评论。以下方法确实有效：

```
# These two don't work with spaces in the names:
exec echo [glob *.tcl] | xargs cvs up
exec bash -c "cvs up [glob *.tcl]"
# Use this instead:
exec bash -c "cvs up *.c" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-10-25T15:37:25.947

您不希望 TCL 进行 globbing - 您希望它发生在 shell 中。尝试这个

```
set exec_call "cvs up *.tcl"
set caught [catch {eval exec -keepnewline $exec_call } result]
if { $caught } {
  #handle the error stored in $result
} else {
  #handle success
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-10-25T20:10:36.413

如果您有 Tcl 8.5，请使用列表扩展语法：`exec cvs up {*}[glob *.tcl]`

如果你有一个较旧的 Tcl:`eval [linsert [glob *.tcl] 0 exec cvs up]`
或`eval [concat exec cvs up [glob *.tcl]]`
前者更安全。

# c++ - 有没有其他类单例方法

> ID：13105985
> 
> 赞同：0
> 
> 时间：2012-10-28T02:49:27.933
> 
> 标签：c++, class, singleton

除了这个之外，还有其他类单例方法吗？

```
class Foo
{
private:
Foo(){};
~Foo(){};
public:
 static Foo& GetInstance( void )
    {
      static Foo obj;
      return obj;
    }
}; 
```

这个很好，适用于所有情况，除了类构造函数只会在第一次`GetInstance()`访问时被调用，这会导致一些问题`WinMain`，例如，当构造函数上有文件读取并且类成员值设置为它，就像一个 .ini/.lua 配置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T02:56:37.627

就个人而言，我不喜欢这种方式来实例化 Singleton 类。我喜欢使用一个`init`函数来显式地创建类，并使用一个`Done`函数来释放。模板化也让一切变得更整洁。至于加载文件，这应该是子类的方法。

```
// Singleton.h
template<class T>
class Singleton
{
  public:
    static void Init() { m_pInst = new T(); }
    static void Done() { delete m_pInst; }
    static T& GetInstance() { assert(m_pInst); return *m_pInst; }
  protected:
    Singleton() {}
  private:
    Singleton(const Singleton&) {}
  private:
    static T* m_pInst;
}

// Foo.h
class Foo : public Singleton<Foo>
{
  public:
    void LoadConfig(const char* path) {} // Load config.
}

// Foo.cpp
Foo* Singleton<Foo>::m_pInst = NULL; 
```

# jquery - 使用下拉字段使用 jQuery.AJAX 进行年龄验证？

> ID：13105989
> 
> 赞同：0
> 
> 时间：2012-10-28T02:50:16.967
> 
> 标签：jquery, ajax, onchange

我正在设置一个注册页面并寻找一个干净的解决方案，以***通过 onChange 事件使用 AJAX 方法并在提交表单之前***执行 jQuery 年龄检查。我有一个简单的表格（缩短）：

```
<form action="" id="birthday_form" name="birthday">
    <select name="field_4_1">
    <option value="0">[ DAY ]</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    </select>
    <select name="field_4_2">
    <option value="0">[ MONTH ]</option>
    <option value="1">January</option>
    <option value="2">February</option>
    <option value="3">March</option>
    </select>
    <select name="field_4_3">
    <option value="0">[ YEAR ]</option>
    <option value="1982">1982</option>
    <option value="1981">1981</option>
    <option value="1980">1980</option>
    </select>

<div id="result_of_age"></div>

<input type="submit" name="submit_birthday" value="Send" />

</form> 
```

我知道如何在提交表单时使用 jQuery.ajax() + "serialize" 将结果放入准备好的 DIV 中，但我正在寻找一种解决方案，以便在设置所有 3 个选择字段后立即显示结果。我确信这是可能的，但哪种方式是解决这个问题的最佳解决方案？

有任何想法吗？

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:06:30.417

您可以向选择添加 data-* 属性以跟踪它们的就绪状态。进行选择时，设置为 true 并检查其他选择的状态。当设置第三个并且所有三个都为真时，请拨打电话。基本上，它就像锁中的不倒翁。

```
$(this).attr('data-ready', 'true'); // in onChange handler

function IsFormReady() {
  If ($('selOneId').attr('data-ready')==='true' && //same with other 2 selects){
    YourAjaxCall();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:14:12.703

```
$('select', '#birthday_form').on('change', function() {
    var day  = $('[name="field_4_1"]').val(),
        month  = $('[name="field_4_2"]').val(),
        year = $('[name="field_4_3"]').val(),
        age = 18,
        birthdate = new Date(),
        currdate = new Date();

    if (day!='0'&&month!='0'&&year!='0') {
        birthdate.setFullYear(year, month-1, day);
        currdate.setFullYear(currdate.getFullYear() - age);

        if ((currdate - birthdate) < 0){
            $('#result_of_age').text('You are not old enough to join');
            this.form.onsubmit = function() { return false; }
        }else{
            $('#result_of_age').text('You are old enough to join');
            this.form.onsubmit = function() { return true; }                
        }
    }
}); 
```

[**小提琴**](http://jsfiddle.net/8W76k/3/) ​</p>

# php - 我可以使用什么脚本来嵌入用户最新的 youtube 视频？

> ID：13105993
> 
> 赞同：-2
> 
> 时间：2012-10-28T02:51:06.193
> 
> 标签：php, javascript, video, youtube

我有一个联系表格，当用户点击提交时，应该有多种选项来保持用户对网站的兴趣。其中一个选项需要是显示最新视频的嵌入式 YouTube 视频。我已经尝试过查看其他 API，但我对 JavaScript 不太了解，而且这有点超出我的想象。

我有一个PHP脚本，视频所在的位置在成功页面上。我的成功页面的以下 PHP 是这样的：

```
 // Email has sent successfully, echo a success page.

     echo "<fieldset>";
     echo "<div id='success_page'>";
     echo "<h1>Email Sent Successfully.</h1>";
     echo "<br /><br /><p>Thank you <strong>$name</strong>, your message has been sent to Gary.</p>";
     echo "<img src='assets/twitch.png' /><img src='assets/steam.png' /><img src='assets/youtube.png' /><img src='assets/twitter.png' /><img src='assets/paypal.png' /><img src='assets/liz.png' />";
     echo "</div>";
     echo "</fieldset>";

     } else {

     echo 'ERROR!';

     } 
```

视频应该在这些图像的正下方。那么我该怎么做呢？

如果您需要更多代码片段，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T05:33:58.677

最好的办法是使用[YouTube API](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds)。使用此 API，您可以构建要向用户展示的视频类型作为提要查询。

例如，检索有关滑板狗的最新视频。

```
http://gdata.youtube.com/feeds/api/videos?q=skateboarding+dog&max-results=1&v=2 
```

在您的 PHP 中，您可以解析此提要以提取视频 ID。您可以自定义查询的响应，以 JSON、RSS 或其他一些选项返回数据。选择你最舒服的。

从 YouTube 嵌入视频的标准 HTML 代码是：

```
<iframe width="420" height="315" frameborder="0" allowfullscreen
 src="http://www.youtube.com/embed/<?= $video_id ?>"></iframe> 
```

在`$video_id`上面的片段中，是从提要中解析的视频的 ID。

还有[其他选项](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters)可让您按作者等限制内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T13:16:42.113

您现在可以嵌入用户上传的视频播放列表：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed?listType=user_uploads&list=username" frameborder="0" allowfullscreen></iframe> 
```

（更改用户名）

# xslt-2.0 - 当总体中的项目与“for-each-group”中的“group-by”不匹配时，是否可以将其分配给具有空 current-group-key() 的组？

> ID：13105994
> 
> 赞同：4
> 
> 时间：2012-10-28T02:51:11.053
> 
> 标签：xslt-2.0

所以我有这样的输入：

```
<Root>
 <Item id="1" group="foo" />
 <Item id="2" group="bar" />
 <Item id="3" />
</Root> 
```

还有一个模板指令，如：

```
<xsl:for-each-group select="Root" group-by="@group" /> 
```

看来我只能得到`foo`和的组`bar`。（为什么？我预计我可能会得到第三组`current-group-key() = ''`）。

我真的很想要第三组。我有什么选择？

谢谢，大卫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T14:32:01.423

马丁给出了很好的解释。

如果您想要什么是允许的，那么根本没有`group`属性的元素将与具有属性的元素在同一个组中`group=''`——这并不精确。

**最简单的解决方案是在`group-by`属性中指明属性是否`group`存在并不重要**。

最简单的方法是：

```
<xsl:for-each-group select="Root/*" group-by="string(@group)"> 
```

**这是一个完整的转换**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:for-each-group select="Root/*" group-by="string(@group)">
   "<xsl:sequence select="string(@group)"/>"
  </xsl:for-each-group>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Root>
    <Item id="1" group="foo" />
    <Item id="2" group="bar" />
    <Item id="3" />
</Root> 
```

**产生了想要的结果**：

```
 "foo"

   "bar"

   "" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T10:24:44.330

XSLT 2.0 规范[http://www.w3.org/TR/xslt20/#xsl-for-each-group](http://www.w3.org/TR/xslt20/#xsl-for-each-group)说以下关于`group-by`：

> 如果存在 group-by 属性，则按总体顺序检查总体中的项目。对于每个项目 J，对 group-by 属性中的表达式求值以产生零个或多个分组键值的序列。对于这些分组键中的每一个，如果已经创建了一个组来保存具有该分组键值的项目，则将 J 添加到该组中；否则为具有该分组键值的项目创建一个新组，并且 J 成为其第一个成员。
> 
> 因此，可以将总体中的一个项目分配给零个、一个或多个组。

因此，在您的情况下，当针对第三个元素评估`group-by`表达式时，它会评估为空序列，因此没有找到分组键导致该项目被添加到任何组中。这样，第三个不属于任何组。`@group``Item``Item`

# android - Android 手机作为无线摄像头 (OpenCV)

> ID：13105995
> 
> 赞同：1
> 
> 时间：2012-10-28T02:51:16.783
> 
> 标签：android, opencv, camera, wireless

我正在使用 Logitech 有线网络摄像头在 OpenCV 中工作，计算机将在机器人上，它会四处移动，并且摄像头将保持静止，因此我需要 65 英尺的电缆延长线，但我会遇到信号问题，所以我的项目需要一个无线摄像头，我正在考虑使用带有 android 的三星手机作为无线摄像头。

那么，是否可以将安卓手机用作无线摄像头来使用 OpenCV 进行编程？

如果可能的话，我应该在linux中安装什么程序，我应该用android下载什么应用程序？