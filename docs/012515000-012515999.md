# StackOverflow 问答 12515000-12515999

# android - 带有 MediaRecorder 的 Android 4.0 错误

> ID：12515000
> 
> 赞同：1
> 
> 时间：2012-09-20T14:37:28.267
> 
> 标签：android, mediarecorder, android-mediarecorder

我有一个应用程序，当我的手机有拨出或来电时，它会从麦克风录音...

```
 mRecorder = new MediaRecorder();
                 mRecorder.reset();
               //  mRecorder.setAudioSource(MediaRecorder.AudioSource.VOICE_CALL);
                 mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                 mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                 mRecorder.setOutputFile(mFileName);
                 mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

                 try {
                    mRecorder.prepare();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                 mRecorder.start(); 
```

它适用于Android 2.xxx，现在我尝试在带有android 4.0的HTC上使用它并且很惊讶....一切似乎都很好....但是...制作的录音只是空的...在它的开头，有一秒钟的声音，然后是沉默）））在LOG中我看到了类似......

```
09-19 14:10:36.462: INvAudioALSADevice(143): getMicMute state=F
09-19 14:10:36.462: INvAudioALSADevice(143): setMicMute state=F 
```

我在以下位置找到了有关 android 接口的信息： [http](http://www.kandroid.org/online-pdk/guide/classandroid_1_1AudioHardwareInterface.html#_details) : //www.kandroid.org/online-pdk/guide/classandroid_1_1AudioHardwareInterface.html#_details 我怎样才能赢得这个 BUG ？？？？

# javascript - ExpressionEngine 将 Javascript 放在页面上

> ID：12515002
> 
> 赞同：3
> 
> 时间：2012-09-20T14:37:39.600
> 
> 标签：javascript, templates, expressionengine

我是 EE 的超级初学者，并且在没有经过培训的情况下就开始管理我公司基于 EE 构建的网站。我不是程序员，我是设计师，所以我花了一段时间来解决这个问题。所以我可能需要一些愚蠢的语言:)

我想创建一个包含一些 Javascript 的页面。我需要创建一个新模板，以便我可以在上面放一些 javascript 吗？我如何与 EE 沟通我希望我创建的页面与该模板一起使用？

我复制了页面/索引模板并将其重命名为临床医生地图（与我在发布者中创建的页面名称相同）。EE 不喜欢这样，页面随后中断。我想做的就是插入一个javascript项目，这对于一页来说似乎太低效了。帮助？？

（使用 EE 1.6.8）这是我来自临床医生地图模板的代码。

```
{assign_variable:my_weblog="page"}
{assign_variable:my_template_group="page"}

{embed="embeds/html_head" url_title="{segment_2}"}

{embed="embeds/html_styles"}

{embed="embeds/html_scripts"}

<?php include_once("analyticstracking.php") ?>

</head>
{exp:weblog:entries weblog="{my_weblog}" disable="categories|member_data|pagination|trackbacks" limit="1" sort="asc" }
<body class="{url_title}">
{/exp:weblog:entries}

<div id="wrapper">

    {embed="embeds/html_headerPlusLeftNav"}

 <div id="content">
        <div id="contentMain">

{exp:weblog:entries weblog="{my_weblog}" disable="categories|member_data|pagination|trackbacks" limit="1" sort="asc"}
<h2>{title}</h2>
{page_body}
{/exp:weblog:entries}

<!--contactforminfo -->

{exp:weblog:entries weblog="{my_weblog}" disable="categories|member_data|pagination|trackbacks"}
{related_entries id="playa_contentcalloutitems"}
<div class="callout">
<h3>{title}</h3>
{callout_summary}
</div>
{/related_entries}
{/exp:weblog:entries}

{exp:weblog:entries weblog="{my_weblog}" disable="categories|member_data|pagination|trackbacks"}
{related_entries id="playa_contentfeatureditems"}
<div class="featuredContent">
<h3>{title}</h3>
{exp:word_limit total="50"}
{contentfeatured_summary}
{/exp:word_limit}{if contentfeatured_body!=""}<p><a href='{url_title_path='content-featured/'}' class='more'>Read More</a></p>{/if}
</div>
{/related_entries}
{/exp:weblog:entries}

</div>

{exp:weblog:entries weblog="{my_weblog}" disable="categories|member_data|pagination|trackbacks"}    
<div id="contentSub">{related_entries id="playa_contentsubitems"}<div class="item   {contentsub_bgcolor}">

 {if contentsub_contenttype=="Text or Picture with Text"}
 <h3>{title}</h3>
{exp:word_limit total="50"}
{contentsub_summary}
{/exp:word_limit}{if contentsub_body!=""}<p><a href='{url_title_path='content-sub/'}' class='more'>Read More</a></p>{/if}

{if:else}

<h3 class="imgHeader">{title}</h3>
{exp:html_strip convert="y" convert_back="none" keep="a,img"}
{contentsub_summary}
{/exp:html_strip}

{/if}

</div>{/related_entries}
{/exp:weblog:entries}

{embed="embeds/html_mailingListSignup"}

        </div>

</div>

{embed="embeds/html_footer"}

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:17:32.040

乍一看，我可以看到一些可能让你感到困惑的事情......

您从“页面”模板组中名为“索引”的模板开始。

看起来您开始的“页面”模板旨在显示来自“页面”博客的单个条目。

所以请求 url 可能看起来像这样：

[http://example.com/page/some_url_title](http://example.com/page/some_url_title)

其中“some_url_title”是“页面”博客中的条目之一的“url_title”值。

现在您已经复制了索引模板并将这个新模板称为“临床地图”。

因此，您将通过此模板在以下位置调用条目：

[http://example.com/page/clinician-map/some_url_title](http://example.com/page/clinician-map/some_url_title)

现在，请注意第一个 url 有 2 个段，而第二个有 3 个段？

这通常没什么大不了的，但是设计索引模板的人做了一些事情，使它有问题。他正在获取 segment_2 的值并将其通过嵌入传递。

因此，在第一个示例（索引）中，我们传递了动态值“some_url_tile”，而在第二个示例（clinician-map）中，我们传递了“clinician-map”。如果嵌入的模板 'html_head' 期望得到一个有效的 url_title 而是得到字符串 'clinician-map' 你很可能会得到意想不到的结果。

此外，我认为我们对您尝试做的事情了解得不够多，无法确定创建新模板是否是正确的方法。可能您实际需要的是一个新的博客条目，或者可能只是您现有模板中的一个动态值。

如果事实证明一个新模板是最好的方法，您可以通过简单地将segment_2 替换为segment_3 来解决我所描述的问题，但我绝不肯定这就是您想要的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T23:07:01.853

> 我想创建一个包含一些 Javascript 的页面。我需要创建一个新模板，以便我可以在上面放一些 javascript 吗？

为了给出可靠的建议，需要更多细节，但在几乎所有情况下，我建议将 JavaScript 组合在一起，或者放在 <head></head> 中，或者最好在结束 </body> 标记之前（如果可以的话）用它。

查看您的模板代码，似乎所有 JavaScript 都存储在 embeds/html_scripts 页面中。我会将您需要的 JavaScript 添加到该模板中。如果您只希望 JavaScript 仅出现在某些页面上，我会使用条件（我将在答案末尾概述）。

> 我如何与 EE 沟通我希望我创建的页面与该模板一起使用？

ExpressionEngine URL（默认）按如下方式组装：

[http://website.com/group/template/url_title](http://website.com/group/template/url_title)

因此，如果您有一个 url_title 为“contact-us”的页面，并且您希望该页面使用站点/页面中的模板，您可以告诉您的页面使用该模板，如下所示：

[http://website.com/site/pages/contact-us](http://website.com/site/pages/contact-us)

对于博客文章等来说，那个 url 显然很好，但它不是那么漂亮；因此，ExpressionEngine 还使您能够构建基于“页面”的导航，从而创建基于导航树的 url 结构，例如：

[http://website.com/contact-us](http://website.com/contact-us)

有一些第三方模块可以轻松构建页面导航，例如：devot-ee.com/add-ons/structure

使用 Structure，您可以为每个通道指定默认模板，并且还可以覆盖每个页面的模板。

> 我复制了页面/索引模板并将其重命名为临床医生地图（与我在发布者中创建的页面名称相同）。EE 不喜欢这样，页面随后中断。我想做的就是插入一个javascript项目，这对于一页来说似乎太低效了。帮助？？
> 
> （使用 EE 1.6.8）这是我来自临床医生地图模板的代码。

对于您提供的模板代码，我会做很多不同的事情；但是，作为快速修复，我将添加一行 JavaScript，

1) 打开 embeds/html_scripts 模板，添加如下逻辑：

```
{if segment_2 == "my_page_url_title"}
   <!-- javascript here -->
{/if} 
```

注意：以下是确定细分的方式：

```
http://website.com/segment_1/segment_2/segment_3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:43:48.067

好的。我最终只是创建了一个新的网络博客和新的模板组，最后它看起来好像在工作。我的 javascript 不是，但我可以弄清楚。

非常感谢您耐心地帮助我！

# php - phpass：为什么 HashPassword 会失败？

> ID：12515004
> 
> 赞同：4
> 
> 时间：2012-09-20T14:37:47.603
> 
> 标签：php, phpass

我正在阅读[phpass 手册](http://www.openwall.com/articles/PHP-Users-Passwords)。在某些时候，它会像这样检查散列的结果：

```
$hash = $hasher->HashPassword($pass);
if (strlen($hash) < 20)
    fail('Failed to hash new password'); 
```

我知道这是 phpass 哈希的最小长度，但我不明白它为什么会失败。甚至可能吗？我的意思是，如果发生这种情况，我应该责怪谁/什么？如何防止这种情况？我还在网页上发表了关于此的评论。

*作为参考，您可以`PasswordHash::HashPassword()`在此问题中找到代码：[* 如何成为安全的哈希密码？](https://stackoverflow.com/questions/2596375/how-can-be-a-safe-hashed-password)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:52:34.227

我注意到一些底层库，例如 'crypt' 在出现问题时不会优雅地失败，而只是返回一个较短的字符串。

也许这是这个问题的一个症状，只是一个额外的预防措施。

# c++ - 接收 UDP 广播

> ID：12515005
> 
> 赞同：10
> 
> 时间：2012-09-20T14:37:50.333
> 
> 标签：c++, udp

我必须接收 UDP 广播（在 Ubuntu 中，如果这有什么不同的话）。使用 Wireshark，我可以看到从服务器机器发送的数据包，并且我可以看到它正在被我的客户端机器接收，但我的程序完全没有注意到。这就是我所拥有的：

```
sockaddr_in si_me, si_other;
int s;
assert((s=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP))!=-1);
int port=6000;
int broadcast=1;

setsockopt(s, SOL_SOCKET, SO_BROADCAST,
            &broadcast, sizeof broadcast);

memset(&si_me, 0, sizeof(si_me));
si_me.sin_family = AF_INET;
si_me.sin_port = htons(port);
si_me.sin_addr.s_addr = INADDR_ANY;

assert(::bind(s, (sockaddr *)&si_me, sizeof(sockaddr))!=-1);

while(1)
{
    char buf[10000];
    unsigned slen=sizeof(sockaddr);
    recvfrom(s, buf, sizeof(buf)-1, 0, (sockaddr *)&si_other, &slen);

    printf("recv: %s\n", buf);
} 
```

它是在调试模式下编译的，编译过程中不会删除断言，我的程序只是阻塞在`recvfrom`.

我必须跳过其他任何箍来接收无目标的 UDP 广播吗？

编辑：更多信息，我将两台计算机连接在专用交换机上，没有外部干扰。我的客户端计算机上还有第二个网卡，它连接到公司网络，它也可以工作。

我可以 ping 外部（互联网工作）和我的服务器机器（而且我可以在 Wireshark 中看到实际的数据包），但你永远不知道是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:55:30.853

事实证明，我的代码非常好，就像我想的那样。网络设置本身存在问题。

对于后代，我在它们自己的集线器上设置了两台静态 IP 计算机，而不是使用服务器机器上的内置 DHCP 服务器为另一台计算机分配 IP 地址。我的问题非常本地化，但你永远不知道..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T10:28:41.380

发送和接收广播

1.  确保网络掩码正确。在广播数据包的 Windows 掩码中无关紧要，但在 linux 中则不然。

2.  将套接字绑定到 INADDR_ANY

3.  setsockopt 到广播

4.  使用 sendaddr.sin_addr.s_addr = inet_addr("your_interface_broadcast_address") 调用 sendto。或 - 使用其广播 IP 地址为每个接口多次调用 sendo。

5.  调用 recvfrom。在调用 recvfrom 之前的任何时间，设置长度参数。

# eclipse - Eclipse：仅使用键盘显示错误消息

> ID：12515007
> 
> 赞同：6
> 
> 时间：2012-09-20T14:37:55.083
> 
> 标签：eclipse, keyboard-shortcuts, syntax-error

我爱我的键盘。在 Eclipse 中编码（c++）时，有时我会犯一些语法错误。例如

```
std::String 
```

它应该是 std::string。我一直在编写一些 java 程序：p。我正在寻找的是一种显示错误信息的方法

```
Type 'std::String' could not be resolved 
```

使用一些键盘快捷键。而不是单击页面左侧出现的错误图标。我知道 CNTRL + '+' 和 '.' . 那么我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-03T19:55:13.710

在源代码编辑器中，`F2`当（键盘的）光标位于带下划线的文本时按下会打开一个包含警告/错误描述的覆盖窗口。适用于 JDT/java，所以我认为它对于 CDT/c++ 是一样的。

此外，（在 JDT/java 中）按`F2`方法/类没有问题会在覆盖窗口中显示 javadoc。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:10:51.400

我不知道键盘快捷键，但这是另一种解决方案：

打开“问题”视图（窗口 -> 显示视图 -> 问题）并将其放置在您喜欢的任何位置。您可以通过单击右上角的小三角形来配置那里显示的问题。您必须在此处选择“显示 -> 选择错误/警告”。这样，只有当前编辑文件中的错误才会可见。

现在您可以查看所有语法错误，而无需任何键盘交互。

截屏：

![截屏](../Images/a8e5c15c0bc73ca0711738d45ba6eba2.png)

# paypal - 贝宝沙盒账户不记入卖家账户

> ID：12515009
> 
> 赞同：0
> 
> 时间：2012-09-20T14:38:04.757
> 
> 标签：paypal, paypal-sandbox

我为 Express Checkout 运行了沙箱。当我使用沙盒中的卖方帐户进行测试付款时，一切正常，付款成功，并且买方帐户从中扣除了购买金额。但是卖家账户从来没有收到任何钱。

我在某处读到要激活卖家帐户，您必须接受帐单协议，但我不知道这对 ExpressCheckout 是否有效，而且我也找不到它。

我检查了用户名、密码和签名，它们都是正确的。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T08:46:33.257

正如我在上面的评论中指出的那样，问题在于货币类型未设置为美元。我的沙盒帐户以美元设置，因此无法接收任何其他内容，并且由于“多币种”的原因，付款被设置为待处理。

# ruby-on-rails-3 - 将桌子向下包裹，然后围绕导轨

> ID：12515010
> 
> 赞同：1
> 
> 时间：2012-09-20T14:38:08.413
> 
> 标签：ruby-on-rails-3

我有一个名称列表，我想将其格式化为如下表格：

```
Item.all.map(&:name)

<tr>
  <td>Apple</td>
  <td>Dragon</td>
</tr>
<tr>
  <td>Banana</td>
  <td>Elephant</td>
</tr>
<tr>
  <td>Cherries</td>
  <td>Flamingo</td>
</tr> 
```

这样结果对用户来说是这样的：

```
Apple    | Dragon
Banana   | Elephant
Cherries | Flamingo 
```

等等

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:50:56.213

我不会`<table>`为此使用 a 。将`<div>`s 放在一起会更容易。像这样的东西：

控制器：

```
@list = %w(Apple Banana Cherries Dragon Elephant Flamingo) 
```

CSS：

```
.float_left { float: left; }
.clear { clear: both; } 
```

看法：

```
<div class="float_left">
<% @list.each_with_index do |item, index| %>
  <%= item %><br>
  <% if (index + 1) % 3 == 0 %>
    </div><div class="float_left">
  <% end %>
<% end %>
</div>
<div class="clear"></div> 
```

这应该给出[这个结果](http://jsfiddle.net/V842E/)。

# javascript - 可以用 HTML5 和 Javascript 录制声音吗？

> ID：12515011
> 
> 赞同：2
> 
> 时间：2012-09-20T14:38:09.920
> 
> 标签：javascript, html, audio

我想知道是否可以使用 HTML5 录制和播放声音。这样它就可以在所有主要平台上工作，比如手机和个人电脑。

我发现了这篇旧帖子[Is it possible to record sound with HTML5?](https://stackoverflow.com/questions/3996377/is-it-possible-to-record-sound-with-html5) 但也许现在它是可能的。

# javascript - HTML5：强制离线缓存重建的Javascript？

> ID：12515012
> 
> 赞同：2
> 
> 时间：2012-09-20T14:38:10.397
> 
> 标签：javascript, html, offline-caching, html5-appcache

遵循 html5rocks 的教程，我希望这`window.applicationCache.update()`将有助于强制重新构建离线缓存。（http://www.html5rocks.com/en/tutorials/appcache/beginner/#toc-updating-cache）

目的是让用户点击“更新缓存”按钮。这是因为即使文件（css、img 等）都被修改了，计算机/平板电脑甚至不会检查它们是否有更新。用户留下的是旧内容。

这怎么能在 JS 中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:54:30.410

如果您要问“客户端应该如何知道文件已被修改”，那么答案很简单 - 缓存清单应该包含一些唯一标识符，这些标识符在更新这些文件时会更新。我使用 PHP 生成清单，并使用所有缓存文件中单调递增的修订号和 MAX(filemtime) 的组合 - 当清单文件与客户端拥有的文件不同时，它将检查所有清单列出的文件是否有更新.

`update()`触发更新检查并下载更新（如果有），但它实际上并没有用新的缓存数据替换旧的缓存数据。

`swapCache()`将用新下载的缓存版本替换旧缓存版本。

但是，此时您的旧 JS 已经创建了您的页面所依赖的所有管道......

我的 html5 应用程序`update()`定期调用，当缓存更新被下载时，它只是向用户显示一个按钮，说“安装更新！”，它只是重新加载页面 - 这样当用户选择时应用新下载的缓存文件，在不破坏他的工作流程的情况下。

# javascript - setInterval 改变函数的参数

> ID：12515018
> 
> 赞同：1
> 
> 时间：2012-09-20T14:38:24.070
> 
> 标签：javascript, setinterval

我想定期调用一个函数（假设它的名字是“alter（id）”），每次调用都会改变参数。该参数应随着每次调用而增加，并在某个时候返回 0。在时间线上，它看起来像这样：

```
Time: function to call
0ms: alter(0)
300ms: alter(1)
600ms: alter(2)
900ms: alter(3)
1200ms: alter(0)
1500ms: alter(1)
and so on ad infinitum. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:40:47.343

```
 let counter = 0; // closure
    const INTERVAL = 300;// 300ms
    const alter = (arg) => { /* alter function body */ }
    const tick = () => {
      counter = alter(counter);
      counter = a < 3 ? a + 1: 0;
    }   
    tick(); // 0ms
    setInterval(tick, INTERVAL); // call each 300 ms 
```

[setInterval 文档](https://developer.mozilla.org/en-US/docs/Web/API/setInterval)

[关闭](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures)

# ruby-on-rails - 如何将默认的 Twitter Bootstrap 轮播更改为始终使用 javascript 暂停？

> ID：12515020
> 
> 赞同：0
> 
> 时间：2012-09-20T14:38:34.740
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在构建一个 Rails 应用程序，并将文件从 Bootstrap Github 下载复制到我的资产管道，一切正常。

我现在正在寻找关闭轮播默认滑动操作，因为我正在嵌入音频，并希望访问者手动切换。

我在 bootstrap.js 中找到了默认值：

```
$.fn.carousel.defaults = {
interval: 5000
, pause: 'hover'
} 
```

这里的入口是什么让它总是暂停？

pause、mouseenter 和 mouseleave 都失败了（我真的认为 mouseleave 会起作用——单击、移开暂停，但没有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:31:01.407

`interval: false`作为选项传递：

```
$('.carousel').carousel({
    interval: false
}) 
```

> 间隔：自动循环项目之间的延迟时间。**如果为 false，carousel 将不会自动循环。**（来自 [文档](http://twitter.github.com/bootstrap/javascript.html#carousel)）

# postgresql - postgreSQL 中的验证

> ID：12515021
> 
> 赞同：8
> 
> 时间：2012-09-20T14:38:36.103
> 
> 标签：postgresql

我做了一个应用程序来收集用户的数据。这些数据将在不同的地方收集，并从这些地方发送到中央服务器。我需要为 PostgreSQL 中的中央服务器设计一个验证计划。必须根据各种验证检查数据，如果验证失败，则必须抛出一条消息。

它是数据库到数据库传输验证。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T22:02:01.423

是的，您走在正确的轨道上，您将使用触发器和/或检查约束来执行此操作。

此外，PostgresQL 有一个非常灵活的类型系统。确保选择最合适的限制性类型。您甚至可以自己定义自定义类型。

*   [`UNIQUE`约束](http://www.postgresql.org/docs/current/static/ddl-constraints.html#AEN2470)
*   [`CHECK`约束](http://www.postgresql.org/docs/current/static/ddl-constraints.html#AEN2410)
*   [`FOREIGN KEY`约束](http://www.postgresql.org/docs/current/static/ddl-constraints.html#DDL-CONSTRAINTS-FK)-[教程](http://www.postgresql.org/docs/current/static/tutorial-fk.html)
*   [触发器](http://www.postgresql.org/docs/current/static/triggers.html)，它可以调用以任何受支持的过程语言编写的辅助函数。触发器可以`RAISE EXCEPTION`中止事务。
*   [域类型](http://www.postgresql.org/docs/current/static/extend-type-system.html#AEN51665)
*   [`EXCLUSION`9.2 及更高版本中的约束](http://www.postgresql.org/docs/current/static/ddl-constraints.html#DDL-CONSTRAINTS-EXCLUSION)
*   多`PRIMARY KEY`列
*   部分`UNIQUE`索引

请注意，`varchar(length)`通常最好不要使用`text`和`check`约束，而不是使用。

# powershell - 以管理员身份运行 - 注册表设置？

> ID：12515023
> 
> 赞同：3
> 
> 时间：2012-09-20T14:38:46.463
> 
> 标签：powershell, registry

PowerShell（和其他程序）提供“以管理员身份运行”的能力。是否有一个注册表，我们可以在其中更改设置以使其成为默认设置？因此无需右键单击并“以管理员身份运行”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T16:19:50.090

我不知道注册表设置，但您可以执行以下操作：

1.  右键单击`PowerShell`
2.  选择`Shortcut`选项卡
3.  点击`Advanced`按钮
4.  选择`Run as Administrator`

这将告诉快捷方式始终以管理员身份运行。大多数快捷方式都可以这样做。这样做的一大好处是能够创建两个快捷方式，一个在管理员模式下，另一个在非管理员模式下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:56:02.403

最初提出这个问题的读者使用 PowerShell 研究了这个解决方案。如您所见，它在 \Directory\shell 下添加了一个名为“runas”的文件夹。

```
new-Item Registry::HKEY_CLASSES_ROOT\Directory\shell\runas -Force

new-ItemProperty Registry::HKEY_CLASSES_ROOT\Directory\shell\runas -Name "(default)" -Value "Open Command Prompt as Admin" -Type string -Force

new-ItemProperty Registry::HKEY_CLASSES_ROOT\Directory\shell\runas -Name "Icon"  -Value "C:\\Windows\\System32\\imageres.dll,-78" -Type string -Force

new-Item Registry::HKEY_CLASSES_ROOT\Directory\shell\runas\command -Force

new-ItemProperty Registry::HKEY_CLASSES_ROOT\Directory\shell\runas\command -Name "(default)" -Value 'cmd.exe /k pushd %L' -type string -Force 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-09-20T23:25:55.057

禁用 UAC（*控制面板 → 用户帐户 → 更改用户帐户控制设置*）。

**编辑：**显然有些人未能完全理解 OP 请求的含义。

UAC 的唯一目的是允许用户成为管理员组的成员，而无需一直以管理员权限运行。登录时，他们会收到两个安全令牌，一个（非活动）具有管理员权限，另一个（活动）具有普通用户权限。这样，用户需要有**意识地决定**激活程序的管理员令牌并让它以管理员权限运行。

现在，如果您启用 shell（即设计用于运行任意命令的程序）始终以管理员权限运行，您**将删除此保护**。从那时起，在用户上下文中运行的**任何东西都可以****使用管理员权限运行任意代码**。有了这样的配置，对安全性的任何进一步思考都只是自欺欺人，所以你也可以停止打扰。

# jquery - jQuery 中的 if 语句。数组循环

> ID：12515026
> 
> 赞同：0
> 
> 时间：2012-09-20T14:38:54.100
> 
> 标签：jquery, arrays, match

我有这个数组

```
var bmpArrayNames=["strip_cropping", "crop_rotation", "cover_crops", "filter_strips", "grassed_waterway", "conservation_tillage", "binary_wetlands"]; 
```

和这个数组

```
var bmpArray=["1", "1", "0", "0", "0", "0", "0"]; 
```

我需要遍历这个 bmpArray 来查看值是否 =1。如果是这样，我想用 bmpArrayNames 的同一索引处的值替换该值。然后我会删除所有最终以 bmpArray=["strip_cropping,"crop_rotation"] 结尾的“0”

我从这个开始但没有被卡住

```
$.each(bmpArray, function(index, value) { 
if (value=="1")
//so if i find a match how do I replace with the same indexed value in the other array. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:41:29.887

尝试：

```
$.each(bmpArray, function(index, value) {
    if (value == "1") {
        bmpArray[index] = bmpArrayNames[index];
    }
});

$.grep(bmpArray, function(item, index) {
    return bmpArray[index] != "0";
}); 
```

输入：

```
var bmpArrayNames = ["strip_cropping", 
                     "crop_rotation", 
                     "cover_crops",
                     "filter_strips", 
                     "grassed_waterway", 
                     "conservation_tillage", 
                     "binary_wetlands"];

var bmpArray = ["1", "1", "0", "0", "0", "0", "0"]; 
```

输出：

```
bmpArray : ["strip_cropping", "crop_rotation"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:42:26.100

这将更新 bmpArray：

```
$.each(bmpArray, function(index, value) { 
    if (value==="1"){
        bmpArray[index] = bmpArrayNames[index];
    }
}); 
```

请注意，鼓励使用三等号运算符，以防止意外的类型强制。

要删除零，您可以使用该`grep`函数，如下所示：

```
bmpArray = $.grep(bmpArray, function(item){
    return item !== "0";
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T14:51:19.957

如果它是你想要的：

```
["strip_cropping", "crop_rotation"] 
```

作为最终结果，您可以使用 jQuery .grep 方法：

```
var bmpArrayNames = ["strip_cropping", "crop_rotation", "cover_crops", "filter_strips", "grassed_waterway", "conservation_tillage", "binary_wetlands"];
var bmpArray = ["1", "1", "0", "0", "0", "0", "0"];

bmpArrayNames = jQuery.grep( bmpArrayNames, function(item, index) {
    return bmpArray[index] == "1";
}); 
```

`bmpArrayNames`现在将是`["strip_cropping", "crop_rotation"]`

# jquery - jQuery - 如何制作像 Windows Phone 应用程序一样的滑动网站

> ID：12515027
> 
> 赞同：0
> 
> 时间：2012-09-20T14:39:00.550
> 
> 标签：jquery, windows-phone-7

在 Windows Phone 7 或更高版本的某些应用程序中，当我们在屏幕上滑动手指时，它会将我们带到该应用程序的不同部分，同时移动背景和内容，但背景移动得快，内容移动得更快。我希望在我的网站上使用相同的功能，而不是在屏幕上滑动手指，我有链接，当我们单击它时，它会将我们滑动到页面的不同部分，背景背景移动得更快，文本移动得更快。

谁能告诉我如何使用 jQuery、HTML 和 CSS 做到这一点？

**“感谢任何帮助世界”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:42:31.793

这个插件过去曾帮助过我：http: [//markdalgleish.com/projects/stellar.js/demos/](http://markdalgleish.com/projects/stellar.js/demos/)

# java - Java POI，调色板是否适用于 SS 模型？

> ID：12515028
> 
> 赞同：1
> 
> 时间：2012-09-20T14:39:01.923
> 
> 标签：java, apache-poi

我正在转换到 ss 模型。

在我做这样的事情之前：

```
HSSFPalette palette = wb.getCustomPalette();
            //replacing the standard red with freebsd.org red
    palette.setColorAtIndex(HSSFColor.RED.index,
            (byte) 255,  //RGB red (0-255)
            (byte) 160,    //RGB green
            (byte) 160     //RGB blue
    ); 
```

我在 SS 模型中没有看到对 Palette 的任何引用......有什么建议吗？

# java - 通过 Java 小程序加密表单上的文本字段；浏览器正在缓存加密文本；如何缓存明文？

> ID：12515031
> 
> 赞同：1
> 
> 时间：2012-09-20T14:39:05.073
> 
> 标签：java, jsp, caching, encryption, applet

我有一个 Java Applet，它在提交表单之前加密在表单文本字段中输入的文本。它运行良好，但浏览器——尤其是谷歌浏览器——正在缓存文本字段，在它被加密之后。我希望浏览器在其文本被加密之前缓存该字段。

提交表单后，Google Chrome 会询问我是否要保存密码。不幸的是，它保存了加密字段，而不是明文字段。

在 Java Applet 加密之前，如何确保浏览器缓存表单文本字段？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:53:46.027

您是否尝试过在 期间加密`"onSubmit"`？在这种情况下，表单数据直到浏览器已经在执行 POST 的最后一刻才会更改。

您也可以尝试填写另一个表格并提交。在这种情况下，您的原始表单可以保持原样，没有任何机会发送纯文本（例如，当 JavaScript 被禁用时）。

# jquery - jQuery ui 对话框不会第二次工作

> ID：12515034
> 
> 赞同：1
> 
> 时间：2012-09-20T14:39:11.363
> 
> 标签：jquery

嗨，我有一个按钮，onClick 我弹出一个 jQuery ui 对话框，其中包含一些表单元素。我第一次单击一切正常，但第二次单击该框出现但我的表单元素消失了，它只是一个空对话框。任何想法出了什么问题？我使用的代码是：

```
var $dialog = $('<div id="saveDialog"></div>')
    .html('Please choose the folder you wish to save the file in:')
    .dialog(
    {
        autoOpen: false,
        modal: true,
        buttons: {Ok: function()
            {
                $( this ).dialog( "close" );
            }},
        show: "blind",
        hide: "explode",
        resizable: true,
        minWidth: 500,
        maxWidth: 800,
        height: 400,
        open: function()
        {
            var phpArray = <?php echo json_encode($directories); ?>;
            $.each(phpArray, function (i, elem) 
            {
                   $('#saveDialog').append('<br> <img src="/app/webroot/css/jqueryFileTree/images/directory.png"/><a id="'+elem+'">'+elem+'</a>');

            });
         }

$dialog.dialog('open');
    return false; 
```

提前致谢！

# android - ImageView 不可见

> ID：12515036
> 
> 赞同：0
> 
> 时间：2012-09-20T14:39:17.027
> 
> 标签：android, android-imageview, rotateanimation

我有两个`ImageView`项目`FrameLayout`：*imageView1*和*imageView2*。*imageView1*可见，并且*imageView2*在活动开始时位于屏幕外。然后我`FrameLayout`使用一些用户事件旋转，`RotateAnimation`因此*imageView2*应该变得可见并且*imageView1*应该离开屏幕。但*imageView2*仍然不可见。有谁知道是什么原因？

代码太大太复杂，无法在此处显示。但是，正如我已经弄清楚使用*setImageMatrix*函数和特殊行为来翻译和旋转图像的主要问题`FrameLayout`or `ImageView`，如果图像超出其范围，则会裁剪图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:02:10.270

如果我正确理解了你的情况，那么你就错了。FrameLayout 将其子项放在堆栈中，而不是并排放置。所以它们不会被渲染到屏幕外，imageView2 就在 imageView1 的后面。为了展示它，你应该把它放在前面。

我建议您查看 ViewSwitcher/ViewAnimator 布局。我认为它们会满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:09:24.367

我已经解决了我的问题。我刚刚将高度`LayoutParams`从`FrameLayout`“fill_parent”更改为精确高度，这允许将所有`ImageView`'s 保留在`FrameLayout`.

# android - 任务无法解析为类型

> ID：12515037
> 
> 赞同：0
> 
> 时间：2012-09-20T14:39:23.437
> 
> 标签：android

我正在尝试制作任务管理器应用程序，但出现一个错误

```
`Task t = new Task(taskName)` 
```

尽管 Eclipse 说“任务”无法解析为一种类型，并且在我的 Eclipse 中没有任何导入显示，但在教程中有显示。我能做些什么？请帮忙。

我的源代码是

```
package com.vikram.task.manager;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class AddTaskActivity extends Activity {

    private Button addButton;
    private EditText editText;
    private Button cancel;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_tasks);
        setUpView();
    }
    protected void cancel() {
        finish();   
    }

    protected void addTask() {
        String taskName = editText.getText().toString();
        Task t = new Task(taskName);
        getTaskManagerApplication().addTask(t);
    }

    private ViewTasksActivity getTaskManagerApplication() {
        ViewTasksActivity tma = (ViewTasksActivity)getApplication();
            return tma;
    }

    private void setUpView() {
        addButton = (Button)findViewById(R.id.button2);
        editText = (EditText)findViewById(R.id.editText1);
        cancel = (Button)findViewById(R.id.button1);
        addButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                addTask();
        }
        });
        cancel.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                cancel();
                }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:40:56.300

尝试使用这个：`Thread t = new Thread(taskName);`而不是：`Task t = new Task(taskName);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T05:44:12.507

我看到了真正的视频，实际上你没有按顺序看到视频。在视频中，他们正在创建 Task 的 pojo 类，然后他们在其他活动中使用这个 Task 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T18:49:26.360

当我们没有类并且我们使用与对象类型相同的类时，就会出现此错误。

1.如果您的任务类丢失，只需突出显示错误，它会要求您创建一个类，只需选择并创建一个类，它将带您自动生成任务类的代码。

2.根据您正在遵循 O'rielly 网站上的教程的代码所以缺少的`Task`类代码在这里。

```
 import java.io.Serializable;

 public class Task implements Serializable {

/**
 * Generated by Eclipse
 */
private static final long serialVersionUID = 5527258407135652423L;

private String name;
private boolean complete;

public Task(String taskName) {
    name = taskName;
}

public void setName(String name) {
    this.name = name;
}

public String getName() {
    return name;
}

public void setComplete(boolean complete) {
    this.complete = complete;
}

public boolean isComplete() {
    return complete;
}

public String toString() {
    return name;
}

public void toggleComplete() {
    complete = !complete;
}

} 
```

3.  保持包名称不变，并将此代码复制到包下面。

4.  现在再次执行错误位置任务并单击错误，它现在会要求您导入刚刚创建的包。

你完成了。

# java - JPA OneToMany 双向

> ID：12515039
> 
> 赞同：2
> 
> 时间：2012-09-20T14:39:25.187
> 
> 标签：java, hibernate, jpa

我知道有很多关于它的问题，但我找不到适合我的问题的答案。

我使用 Jboss 作为 7，Spring 和 Hibernate (4) 作为 JPA 2.0 提供者，所以我有简单的@OneToMany 双向关系：

我有这样的超级类人：

```
@MappedSuperclass
@Inheritance(strategy=InheritanceType.JOINED)
public abstract class Person {

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
private Long id;

@NotNull
@Size(min = 1, max = 25)
@Pattern(regexp = "[A-Za-z ]*", message = "must contain only letters and spaces")
private String name;  

public Person(String name) {
    super();
    this.name = name;
} 
```

和班级成员：

```
@Entity
@Table(uniqueConstraints = @UniqueConstraint(columnNames = "email"))
public class Member extends Person implements Serializable
{
   /** Default value included to remove warning. Remove or modify at will. **/
   private static final long serialVersionUID = 1L;

   @NotNull
   @NotEmpty
   @Email
   private String email;

   @NotNull
   @Size(min = 10, max = 12)
   @Digits(fraction = 0, integer = 12)
   @Column(name = "phone_number")
   private String phoneNumber;

   @OneToMany(cascade=CascadeType.ALL , mappedBy="member" , fetch=FetchType.EAGER)
   private List<Order> orders; 
```

还有班级订单：

```
@Entity
public class Order {

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
private Integer id;

private float price; 

@ManyToOne(optional=false)
private Member member;

private String name; 
```

所以我认为这是一个很好的配置，但是我在内存中的 HSQL 中测试了这个应用程序并且我得到了错误：

```
Hibernate: alter table Order drop constraint FK48E972E548C740B
2012-09-20 16:25:37 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: HHH000389: Unsuccessful: alter table Order drop constraint FK48E972E548C740B
2012-09-20 16:25:37 org.hibernate.tool.hbm2ddl.SchemaExport perform
ERROR: Blad skladniowy w wyrazeniu SQL "ALTER TABLE ORDER[*] DROP CONSTRAINT FK48E972E548C740B "; oczekiwano "identifier"
Syntax error in SQL statement "ALTER TABLE ORDER[*] DROP CONSTRAINT FK48E972E548C740B "; expected "identifier"; SQL statement:
alter table Order drop constraint FK48E972E548C740B [42001-165] 
```

并且 ：

```
Syntax error in SQL statement "CREATE TABLE ORDER[*] (ID INTEGER GENERATED BY DEFAULT AS IDENTITY, NAME VARCHAR(255), PRICE FLOAT NOT NULL, MEMBER_ID BIGINT NOT NULL, PRIMARY KEY (ID)) "; expected "identifier"; SQL statement: 
```

我的 JUnit 测试失败了，我不知道这个配置有什么问题......

这是我的简单junit：

```
 @Test
public void testInsertWithOrder(){
    Order order = new Order(20.0f, "first stuff");
    Order order2 = new Order(40.0f, "secondary stuff");
    List<Order> orders = new ArrayList<Order>();
    orders.add(order2);
    orders.add(order);

    Member member = new Member("Member name", "member23@gmail.com", "2125552141", orders);

    memberDao.register(member);

    List<Member> members = memberDao.findAllOrderedByName();

    Assert.assertNotNull(members);
    Assert.assertEquals(1, members.size());     

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T14:58:54.233

将表名从“订单”更改为不同的名称，例如 PersonOrder

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:00:18.090

在您`member`的`Order`课堂上，缺少`@JoinColumn`注释。尝试如下。

```
@ManyToOne(optional=false)
@JoinColumn(name = "memberId", referencedColumnName = "id")
private Member member; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T17:06:03.693

@CycDemo

我只是弄清楚了，在我的构造函数中，我现在得到了：

```
 @OneToMany(cascade=CascadeType.ALL , mappedBy="member" , fetch=FetchType.EAGER)
    private List<UOrder> orders = new ArrayList<UOrder>();

       public Member(String name, String email, String phoneNumber ,List<UOrder> orders) {
       super(name);
       this.orders = orders;
       this.email = email;
       for(UOrder o : orders){
           o.setMember(this);          
       }
       this.orders = orders;

   } 
```

蚂蚁这就是我需要的:)))

# javascript - 正则表达式在 javascript 中产生不同的结果

> ID：12515040
> 
> 赞同：0
> 
> 时间：2012-09-20T14:39:25.510
> 
> 标签：javascript, regex

与在线正则表达式测试器相比，为什么这个正则表达式在 javascript 中返回完全不同的结果，可在[http://www.gskinner.com/RegExr/找到](http://www.gskinner.com/RegExr/)

```
var patt = new RegExp(/\D([0-9]*)/g);
"/144444455".match(patt); 
```

控制台中的返回是：

```
["/144444455"] 
```

虽然它确实在正则表达式测试器中返回了正确的组。

我要做的就是提取一段文本中的第一个数量。无论该文本是否以“/”开头或有一堆其他无用的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:45:09.073

正则表达式完全按照您的要求执行：

*   `\D`匹配一个非数字（在这种情况下`/`）
*   `[0-9]*`匹配一串数字 ( `144444455`)

您将需要访问第一个捕获组的内容：

```
var match = patt.exec(subject);
if (match != null) {
    result = match[1];
} 
```

或者干脆`\D`完全放弃 - 我不确定你为什么认为你首先需要它......

`/g`然后，如果您只想匹配第一个数字，而不是文本中的所有数字，则可能应该删除修饰符。所以，

```
result = subject.match(/\d+/); 
```

应该也能正常工作。

# excel - 如何用正数和负数计算增长？

> ID：12515043
> 
> 赞同：8
> 
> 时间：2012-09-20T14:39:32.687
> 
> 标签：excel

我正在尝试用正数和负数计算 excel 中的百分比增长。

```
This Year's value: 2434
Last Year's value: -2 
```

**我使用的公式是：**

```
(This_Year - Last_Year) / Last_Year

=(2434 - -2) / -2 
```

问题是我得到了否定的结果。可以计算一个近似的增长数吗？如果可以，如何计算？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-23T05:45:16.637

**您可以尝试将数字空间向上移动，使它们都变为正数。**

要计算任何两个正数或负数之间的增益，您将不得不将一只脚放在幅度增长的世界中，另一只脚放在数量增长的世界中。您可以根据您希望结果收益的显示方式向一侧或另一侧倾斜，并且每个选择都会产生后果。

**战略**

1.  创建一个移位方程，生成相对于新旧数字的正数。

2.  将自定义移位添加到旧数字和新数字以获取 new_shifted 和 old_shifted。

3.  进行 (new_shifted - old_shifted) / old_shifted) 计算以获得增益。

**例如：**

```
old -> new
-50 -> 30               //Calculate a shift like (2*(50 + 30)) = 160

shifted_old -> shifted_new
110         ->  190

= (new-old)/old
= (190-110)/110 = 72.73% 
```

**如何选择移位功能**

如果您的移位函数将数字向上移动得太远，例如向每个数字添加 10000，您总是会得到微小的增长/下降。但是，如果这种转变足以让这两个数字都进入正值区域，那么边缘情况的增长/下降就会出现剧烈波动。您需要拨入换档功能，以便对您的特定应用程序有意义。这个问题没有完全正确的解决方案，你必须先吃苦后甜。

将此添加到您的 Excel 中，以查看数字和收益如何变化：

```
 shift function
old new  abs_old  abs_new  2*abs(old)+abs(new)   shiftedold  shiftednew    gain
-50  30  50          30          160                110         190        72.73%
-50  40  50          40          180                130         220        69.23%
10   20  10          20          60                 70          80         14.29%
10   30  10          30          80                 90          110        22.22%
1    10  1           10          22                 23          32         39.13%
1    20  1           20          42                 43          62         44.19%
-10  10  10          10          40                 30          50         66.67%
-10  20  10          20          60                 50          80         60.00%
1    100  1          100         202                203         302        48.77%
1    1000 1          1000        2002               2003        3002       49.88% 
```

增益百分比受数字大小的影响。上面的数字是一个不好的例子，是原始移位函数的结果。

你必须问自己，哪个小动物的收获最大：

```
Evaluate the growth of critters A, B, C, and D:
A used to consume 0.01 units of energy and now consumes 10 units.
B used to consume 500 units and now consumes 700 units.
C used to consume -50 units (Producing units!) and now consumes 30 units.
D used to consume -0.01 units (Producing) and now consumes -30 units (producing). 
```

在某些方面，可以说每个小动物都是以自己的方式最大的种植者。有人说B是最好的种植者，其他人会说D是更大的收获。你必须自己决定哪个更好。

问题变成了，我们能否将这种我们标记为增长的直观感觉映射为一个连续函数，告诉我们人类倾向于认为什么是“惊人的增长”与“平庸的增长”。

**成长是一件神秘的事情**

然后你必须考虑到小动物 B 可能比小动物 D 经历了更艰难的时期。小动物 D 在未来可能比其他小动物有更多的前景。它有一个优势！您如何衡量增长的`opportunity`、`difficulty`和？为了能够预测未来，您需要对什么构成“大本垒打”和“生产力的蹩脚进步”有一个直观的感觉。`velocity``acceleration`

函数的一阶和二阶导数将为您提供“增长速度”和“增长加速度”。了解微积分中的那些，它们非常重要。

哪个增长更多？是一个分分钟加速生长的小动物，还是一个正在减速生长的小动物？高低速度和高/低变化率呢？耗尽增长机会的概念又如何呢？成本效益分析和利用机会的能力/能力。对抗系统（你的成功来自另一个人的失败）和零和游戏呢？

有指数增长，线性增长。和不可持续的增长。成本效益分析和拟合数据曲线。这个世界比我们想象的要奇怪得多。由于黑天鹅效应，绘制一条完美的数据线并不能告诉您接下来是哪个数据点。我建议所有人都听听这个关于增长的讲座，科罗拉多大学博尔德分校就增长进行了精彩的演讲，它是什么，不是什么，以及人类如何完全误解它。 [http://www.youtube.com/watch?v=u5iFESMAU58](http://www.youtube.com/watch?v=u5iFESMAU58)

将一条线拟合到热水的温度，一旦你认为你已经拟合了一条曲线，就会出现一只黑天鹅，水就会沸腾。这种效应发生在我们整个宇宙中，你的原始功能（新旧）/旧不会帮助你。

**下面是 Java 代码，它在一个适合我需要的简洁包中完成了上述大部分概念：**

小动物生长——（小动物可以是“无线电波”、“甲虫”、“油温”、“股票期权”等任何东西）。

```
public double evaluate_critter_growth_return_a_gain_percentage(
        double old_value, double new_value) throws Exception{

    double abs_old = Math.abs(old_value);
    double abs_new = Math.abs(new_value);

    //This is your shift function, fool around with it and see how
    //It changes.  Have a full battery of unit tests though before you fiddle.
    double biggest_absolute_value = (Math.max(abs_old, abs_new)+1)*2;

    if (new_value <= 0 || old_value <= 0){
        new_value = new_value + (biggest_absolute_value+1);
        old_value = old_value + (biggest_absolute_value+1);
    }

    if (old_value == 0 || new_value == 0){
        old_value+=1;
        new_value+=1;
    }

    if (old_value <= 0)
        throw new Exception("This should never happen.");

    if (new_value <= 0)
        throw new Exception("This should never happen.");

    return (new_value - old_value) / old_value;

} 
```

**结果**

它的行为有点像人类对小动物生长有一种本能的感觉。当我们的银行账户从 -9000 到 -3000 时，我们说这比账户从 1000 到 2000 时的增长要好。

```
1->2     (1.0)  should be bigger than   1->1 (0.0)
1->2     (1.0)  should be smaller than  1->4 (3.0)
0->1     (0.2)  should be smaller than  1->3 (2.0)
-5-> -3  (0.25) should be smaller than -5->-1 (0.5)
-5->1    (0.75) should be smaller than -5->5 (1.25)
100->200 (1.0)  should be the same as  10->20 (1.0)
-10->1   (0.84) should be smaller than -20->1 (0.91)
-10->10  (1.53) should be smaller than -20->20 (1.73)
-200->200 should not be in outer space (say more than 500%):(1.97)
handle edge case 1-> -4: (-0.41)
1-> -4:  (-0.42) should be bigger than 1-> -9:(-0.45) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-20T12:28:05.497

最简单的解决方案如下：

```
=(NEW/OLD-1)*SIGN(OLD) 
```

如果值为负数，如果值为正数，该`SIGN()`函数将得出结果。因此，如果前一个值为负数，则乘以该值将有条件地反转结果。`-1``1`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-14T19:51:32.987

Percentage growth is not a meaningful measure when the base is less than 0 and the current figure is greater than 0:

Yr 1 Yr 2 % Change (abs val base)
-1 10 %1100
-10 10 %200

The above calc reveals the weakness in this measure- if the base year is negative and current is positive, result is N/A

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-10T05:32:05.860

确实，从严格的数学角度来看，这种计算没有意义，但是如果我们检查财务数据，它仍然是一个有用的指标。公式可能如下：

`if(lastyear>0,(thisyear/lastyear-1),((thisyear+abs(lastyear)/abs(lastyear))`

让我们用简单的数字凭经验验证公式：

`thisyear=50 lastyear=25 growth=100%`说得通

`thisyear=25 lastyear=50 growth=-50%`说得通

`thisyear=-25 lastyear=25 growth=-200%`说得通

`thisyear=50 lastyear=-25 growth=300%`说得通

`thisyear=-50 lastyear=-25 growth=-100%`说得通

`thisyear=-25 lastyear=-50 growth=50%`说得通

同样，它在数学上可能不正确，但是如果您需要有意义的数字（可能将它们插入图表或其他公式中），它是 N/A 的一个很好的替代方案，特别是当使用 N/A 可能会破坏所有后续计算时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-02T08:51:48.263

让我画出情景。
从：-303 到 183，百分比变化是多少？

-303, -100% 0 183, 60.396% 303, 100%

|_________________ ||||||||||||||||||||||||________|

(183 - -303) / |-303| * 100 = 160.396%
总百分比变化约为 160%

注意：无论该值多么负，都被视为-100%。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-20T14:42:53.193

你应该得到一个否定的结果——你除以一个负数。如果去年是负数，那么你就有负增长。您可以通过除以来避免这种异常情况`Abs(Last Year)`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-04T00:30:21.673

解决此问题的最佳方法是使用公式计算斜率：

(y1-y2/x1-x2)

* 定义 x1 为一阶矩，所以值为 "C4=1" 定义 x2 为一阶矩，所以值为 "C5=2"

为了获得正确的百分比增长，我们可以遵循以下顺序：

=(((B4-B5)/(C4-C5))/ABS(B4))*100

完美的作品！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-26T16:55:08.890

这些问题正在回答“我应该怎么做？”的问题。不考虑“我应该吗？”这个问题 从统计学上讲，采用正值和负值的变量值的变化意义不大。“转变”的建议可能对某些变量有效（例如，可以转变为开尔文标度的温度或解决问题的东西），但对于其他变量则非常糟糕，因为负性对方向有精确的影响。例如净收入或损失。在这种情况下，亏损经营（负收入）具有精确的含义，在这种情况下，从 -50 移动到 30 与从 110 移动到 190 完全不同，正如前一篇文章所暗示的那样。这些百分比变化最有可能报告为“NA”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-13T10:07:01.797

如果您想要一个与正常增长相当的增长值作为两个正数的结果，那么将两者都转变为正数确实没有意义。如果我想看到 2 个正数的增长，我不希望发生变化。

然而，反转 2 个负数的增长是有意义的。-1 到 -2 在数学上是 100% 的增长，但这感觉是积极的，事实上，结果是下降。

所以，我有以下功能，允许反转 2 个负数的增长：

```
setGrowth(Quantity q1, Quantity q2, boolean fromPositiveBase) {
if (q1.getValue().equals(q2.getValue()))
    setValue(0.0F);
else if (q1.getValue() <= 0 ^ q2.getValue() <= 0) // growth makes no sense
    setNaN();
else if (q1.getValue() < 0 && q2.getValue() < 0) // both negative, option to invert
    setValue((q2.getValue() - q1.getValue()) / ((fromPositiveBase? -1: 1) * q1.getValue()));
else // both positive
    setValue((q2.getValue() - q1.getValue()) / q1.getValue());
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-30T16:04:45.127

最简单的方法是我会使用的方法。

```
=(ThisYear - LastYear)/(ABS(LastYear)) 
```

但是，它仅在某些情况下有效。对于某些值，结果将被反转。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-01T11:30:28.647

只需将分隔符更改为绝对数字即可。即

```
 A          B           C         D
1    25,000      50,000      75,000     200%

2   (25,000)     50,000      25,000     200% 
```

中的公式`D2`是：`=(C2-A2)/ABS(A2)`与所有正数行比较结果相同（当绝对基数相同时）。没有`ABS`公式中的结果将是 -200%。

佛朗哥

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-16T01:16:15.810

本文详细[解释](https://www.linkedin.com/posts/ghalimi_relative-growth-activity-6755853400505749504-EanF)了 (b - a)/ABS(a) 公式为何有意义。一开始它是违反直觉的，但是一旦你使用了底层的算术，它就开始变得有意义了。当你最终习惯它时，它会改变你看待百分比的方式。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-12T04:16:27.307

目标是获得增长率。思路如下：首先计算绝对增加值。然后绝对增加值加到今年和去年的值中。然后根据新值计算增长率。例如：

```
LastYear | ThisYear | AbsoluteIncrease | LastYear01 | ThisYear01 | Rate
  -10    | 20       |  30 = (10+20)    | 20=(-10+30)| 50=(20+30) | 2.5=50/20    
  -20    | 20       |  40 = (20+20)    | 20=(-20+40)| 60=(20+40) | 3=60/2 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-11-03T14:15:21.440

使用此代码：

```
=IFERROR((This Year/Last Year)-1,IF(AND(D2=0,E2=0),0,1)) 
```

当存在负值或 0 值时，此代码的第一部分**iferror**消除了**N/A问题。**它通过查看 e2 和 d2 中的值来做到这一点，并确保它们不都是 0。如果它们都是 0，那么它将放置 0%。如果只有一个单元格是 0，那么它将放置 100% 或 -100%，具体取决于 0 值落在哪里。此代码的第二部分 (e2/d2)-1 与 (this year - lastyear)/Last year 相同的代码

[请点击这里查看示例图片](http://i.stack.imgur.com/6k9zX.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-03-30T14:20:29.300

使用这个公式：

=100% +（第 2 年/第 1 年）

逻辑是您在第 1 年收回 100% 的负数（因此最初是 100%）加上任何超额将是与第 1 年的比率。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-08-10T14:21:26.690

短一：

```
=IF(D2>C2, ABS((D2-C2)/C2), -1*ABS((D2-C2)/C2)) 
```

或令人困惑的一个（我的第一次尝试）：

```
=IF(D2>C2, IF(C2>0, (D2-C2)/C2, (D2-C2)/ABS(C2)), IF(OR(D2>0,C2>0), (D2-C2)/C2, IF(AND(D2<0, C2<0), (D2-C2)/ABS(C2), 0))) 
```

D2是今年，C2是去年。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-08-24T07:41:55.703

公式应该是这个：

```
=(thisYear+IF(LastYear<0,ABS(LastYear),0))/ABS(LastYear)-100% 
```

如果 < 0，则将 IF 值添加到您的 Thisyear 值以生成实际差异。

如果 > 0，则 LastYear 值为 0

似乎在不同的情况下工作检查

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-11-06T21:27:16.747

我今天正在摸索答案，并认为这会奏效......

=IF(C5=0, B5/1, IF(C5<0, (B5+ABS(C5)/1), IF(C5>0, (B5/C5)-1)))

C5 = 去年，B5 = 今年

我们在单元格中有 3 个 IF 语句。

如果去年为 0，则今年除以 1

如果 Last Year 小于 0，则 This Year + Last Year 的绝对值除以 1

如果去年大于 0，则今年除以去年减去 1

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2013-05-02T16:04:00.117

```
=(This Year - Last Year) / (ABS(Last Year)) 
```

这只有在今年和去年总是正数的情况下才能可靠地工作。

例如 last_year=-50 this_year = -1。事实上，这些数字已经有了很大的改善，你得到了 -100% 的增长。

# javascript - jqGrid addRowData - 如何为每一行添加自定义名称/ID？

> ID：12515048
> 
> 赞同：3
> 
> 时间：2012-09-20T14:39:50.677
> 
> 标签：javascript, jquery, html, html-table, jqgrid

我刚开始使用 jqGrid，如果这是一个明显的问题，我很抱歉（尽管我在他们的网站上的任何地方都找不到答案）。

我目前正在使用以下方法将行数据添加到我的网格中：

```
for (var i = 0; i <= mydata.length; i++) {
    jQuery("#grid2").jqGrid('addRowData', i + 1, attributes[i]);
} 
```

生成的 HTML 是这样的：

```
<tr class="ui-widget-content jqgrow ui-row-ltr" tabindex="-1" id="1" role="row"> ... </tr> 
```

id 当前基于行号，但我想根据 mydata 数组中的变量将 id 更改为自定义定义。

例如，如果我的 mydata 数组是这样的：

```
var mydata = [ { id="1", name="someName", type="typeOne" } ] 
```

我希望我的 HTML 输出看起来像这样：

```
<tr class="..." id="typeOne"> </tr> 
```

或者

```
<tr class="..." id="rowid" name="typeOne"> </tr> 
```

如何确保 addRowData 方法向我的行添加自定义 id 而不是常规的 rowid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:29:24.280

您可能正在寻找选项中的`key`属性`colModel`：

key ：如果没有来自服务器的 id，则可以将其设置为唯一行 id 的 id。只有一列可以具有此属性。如果有多个键，则网格会找到第一个键，而忽略第二个键。

来自[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)

# visual-studio-2012 - 在 Visual Studio Express 2012 for web 中添加外键

> ID：12515049
> 
> 赞同：1
> 
> 时间：2012-09-20T14:40:01.153
> 
> 标签：visual-studio-2012, foreign-keys

在 Visual Web Developer Express 2012 中，曾经有一个易于使用的图表编辑器，可以在其中添加外键约束，但除非我正在查看它，否则 2012 速成版似乎缺少这一点。

如何在 Visual Studio 2012 for web 的速成版中的两个表之间添加外键约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T08:37:25.307

只需在设计表格时添加关系即可。单击该列，它将允许您添加一个。它也是可变的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:08:23.860

你说的对！！！Visual Studio Express 2012 版中似乎没有数据库设计器。我也在寻找解决方案，我发现了这个：

[http://msdn.microsoft.com/en-us/library/hh272695(v=VS.103).aspx](http://msdn.microsoft.com/en-us/library/hh272695(v=VS.103).aspx)

请务必查看 -“使用表设计器创建新的外键引用”部分。

# php - 通过ajax访问php函数数据

> ID：12515056
> 
> 赞同：0
> 
> 时间：2012-09-20T14:40:33.000
> 
> 标签：php, ajax

我在一个类中有这个 php 函数，它返回 json 数据

```
function getPhotoDetails( $photoId ) {
   $url = $this::APP_URL . 'media/' . $photoId . $this::APP_ID;
   return $this->connectToApi($url);
} 
```

这个ajax请求

```
function getPhotoDetails( photoId ) {
    $.ajax({
        type: "GET",
        cache: false,
        url: 'index.php',
        success: function (data) {
               console.log(data);
        }
    });
} 
```

问题是我如何调用 php 函数来获取 json 数据。

**解决方案：** 非常感谢你们所有人，感谢 Poonam

**正确的代码**

PHP：我在 php 文件中创建了一个新的对象实例

```
$photoDetail = new MyClass;
if(isset($_REQUEST['image_id'])){
  $id = $_REQUEST['image_id'];
  echo (($photoDetail->getPhotoDetails($id)));
} 
```

JavaScript

```
function getPhotoDetails( photoId ) {

    $.ajax({
        type: "GET",
        cache: false,
        url: './instagram.php?image_id=' + photoId,
        success: function (data) {
            var data = $.parseJSON(data);
            console.log(data);
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:47:03.830

尝试设置一些参数来识别需要发送的详细信息，例如假设功能所需的 photoid 参数

```
function getPhotoDetails( photoId ) {
    $.ajax({
        type: "GET",
        cache: false,
        url: 'index.php?sendPhoto=1&photoid=23',
        success: function (data) {
               console.log(data);
        }

    });
} 
```

然后`index.php`检查（您可以根据需要检查照片）

```
if(isset($_REQUEST['sendPhoto'])){
      $id = $_REQUEST['photoid'];
      return getPhotoDetails($id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:47:46.920

设置一个开关盒。将函数名称作为 GET 或 POST 变量传递，以便调用 php 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:42:47.220

您需要一个调用 PHP 函数的文件。您不能只从 Ajax 调用 PHP 函数。正如 Tim G 所指出的，它需要使用正确的标头，将代码格式化为 JSON，并回显返回值（如果函数尚未执行这些操作）。

# java - compareTo 涉及非可比领域：如何保持传递性？

> ID：12515057
> 
> 赞同：2
> 
> 时间：2012-09-20T14:40:35.680
> 
> 标签：java, compareto

考虑一个具有可比较（与 equals 一致）和不可比较字段（我不知道它是否覆盖的类`Object#equals`）的类。

应比较类的实例，其中结果顺序应与 equals 一致，即`0`如果两个字段相等（根据`Object#equals`）并且与可比较字段的顺序一致，则返回。我曾经`System.identityHashCode`涵盖了这些要求未涵盖的大多数情况（具有相同可比性但不同其他值的实例的顺序是任意的），但不确定这是否是最佳方法。

```
public class MyClass implements Comparable<MyClass> {
    private Integer intField;
    private Object nonCompField;

    public int compareTo(MyClass other) {
        int intFieldComp = this.intField.compareTo(other.intField);
        if (intFieldComp != 0)
            return intFieldComp;
        if (this.nonCompField.equals(other.nonCompField))
            return 0;
        // ...and now? My current approach:
        if (Systems.identityHashCode(this.nonCompField) < Systems.identityHashCode(other.nonCompField))
            return -1;
        else
            return 1;
     }
} 
```

我在这里看到两个问题：

*   如果`Systems.identityHashCode`两个对象相同，则每个对象都大于另一个对象。（这会发生吗？）
*   `intField`据我所知，具有相同值和不同值的实例的顺序`nonCompField`在程序运行之间不必保持一致`Systems.identityHashCode`。

那是对的吗？还有更多问题吗？最重要的是，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:54:37.693

第一个问题虽然不太可能发生，但可能会发生（我认为您将需要大量内存，而且运气非常糟糕）。但它通过 Guava 的[Ordering.arbitrary()](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Ordering.html#arbitrary%28%29)解决了，它在幕后使用身份哈希码，但在两个不同对象具有相同身份哈希码的情况下维护比较结果的缓存。

关于您的第二个问题，不，运行之间不会保留身份哈希码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:54:48.337

> `Systems.identityHashCode`[...] 两个对象相同 [...] （这会发生吗？）

是的，它可以。引用[Java API 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)：

> 在合理可行的情况下，`hashCode`类定义的方法`Object`确实为不同的对象返回不同的整数。
> `identityHashCode(Object x)`为给定对象返回与默认方法返回的相同的哈希码`hashCode()`，无论给定对象的类是否覆盖`hashCode()`。

因此，您可能会遇到哈希冲突，并且随着内存不断增长但哈希码保持固定在 32 位，它们将变得越来越有可能。

> `intField`据我所知，具有相同值和不同值的实例的顺序`nonCompField`在程序运行之间不必保持一致`Systems.identityHashCode`。

对。它甚至可能在同一个程序的单次调用中有所不同：`(1,foo) < (1,bar) < (1,baz)`即使`foo.equals(baz)`.

> 最重要的是，有没有办法解决这个问题？

您可以维护一个映射，该映射将不可比较类型的每个不同值映射到一个序列号，您遇到的每个不同值都会增加该序列号。

但是，内存管理会很棘手：您不能使用 a [`WeakHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/WeakHashMap.html)，因为代码可能会使您的关键对象无法访问，但仍然持有对另一个具有相同值的对象的引用。*因此，要么你维护一个对给定值的所有*对象的弱引用列表，要么你只是使用强引用并接受这样一个事实，即遇到的任何不可比较的值都不会被垃圾回收。

请注意，除非您以相同的顺序可重现地创建值，否则此方案仍不会产生可重现的序列号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:25:27.883

*如果*nonCompField 的类已经实现了一个相当好的 toString()，你也许可以使用

```
return String.valueOf(this.nonCompField).compareTo(String.valueOf(other.nonCompField)); 
```

不幸的是，默认的 Object.toString() 使用哈希码，这有其他人指出的潜在问题。

# ipad - iOS6 Safari 方向改变错误？

> ID：12515058
> 
> 赞同：14
> 
> 时间：2012-09-20T14:40:39.313
> 
> 标签：ipad, mobile-safari, ios6

我在 Safari 和 iOS6 中有一种罕见的行为。从横向更改为纵向时，视口会调整大小，但似乎没有正确水平定位。它向左偏移了 128 像素。

我可以使用 iOS6 中的 iPad3 重现此行为，访问 www.google.com

如果您像这样更改 html 的显示属性：

document.querySelector("html").style.display = "none" document.querySelector("html").style.display = "block"

视口返回原点并正确显示。这就是为什么我认为这是一个错误。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T18:46:31.773

今天早上我注意到了一个类似的问题。

每当方向从横向更改为纵向时，整个主体元素都会向左移动几乎一半，此时它应该是 100% 宽度。这是 iOS 6 中的移动 Safari，在 iPhone 4s 上运行。

我把它钉在了我拥有的全宽搜索栏上。在这个栏的父元素上，我放置了一个属性`overflow: hidden;`

这最终解决了我的问题。我花了很长时间检查其他网站，这可能无法解决您的问题。例如，我的修复似乎并没有适用于 BestBuy.com，它也遇到了同样的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T17:24:05.470

此错误也适用于 iPhone 上的 IOS6。

**在orientationchange**处理程序中删除和读取占位符将解决问题。这个解决方案是 jQuery 特定的：

```
$(window).on("orientationchange", fixIOS6PlaceholderBug);

function fixIOS6PlaceholderBug () {
    var $this,
        originalPlaceholder = "";

    $(document).find("input[placeholder]").each(function() {
        $this = $(this);
        originalPlaceholder = $this.attr("placeholder");
        $this.removeAttr("placeholder").attr("placeholder", originalPlaceholder);
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T09:04:31.807

由于这个原因，我找到了解决方案： [http ://www.tonylea.com/2010/safari-overflow-hidden-problem/](http://www.tonylea.com/2010/safari-overflow-hidden-problem/)

我有溢出：隐藏在我的 HTML 标记中，因为我有一些左右隐藏的旋转 DIV，但 iOS6 中的 Safari 似乎不接受这一点。设置位置：相对于 HTML 标签为我解决了这个问题！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T15:42:54.340

我有同样的错误，但在我的情况下，原因是`input type=text`with `width: 100%`; 并且当我将输入包装器更改为`overflow:hidden`错误时已修复；

使用`overflow:hidden`for body 的解决方案不利于 iOS 上的惯性滚动

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-01T14:59:58.853

我不得不在 body 标签中添加溢出：隐藏。

# python - 如何在验证和保存表单之前从 ImageField 打开图像？

> ID：12515060
> 
> 赞同：2
> 
> 时间：2012-09-20T14:40:40.687
> 
> 标签：python, django, django-forms, django-views, python-imaging-library

我想根据 a 的值来获取 a`CharField`的值`ImageField`。我的表单和视图定义为：

```
#Form
class GpsImForm(forms.Form):
    image = forms.ImageField(required=True)
    gps_data = forms.CharField(required=True)

#View
def gpsim_gen_view(request):
    if request.method == 'POST':
        form = GpsImForm(request.POST, request.FILES)
        if 'image' in request.FILES:
            im = request.FILES['image']
            i = Image.open(im)
            ... # functions to extract exif data from i
            request.POST.update({ 'gps_data': ...}) # set gps_data based on exif data from i
        if form.is_valid():
            obj = form.save()
            return ... #returns the gpsim
    else:
        form = GpsImForm()
    return direct_to_template(request, 'gpsim_generate.html', {'form': form,}) 
```

已`gps_data`更新，但是，一旦我使用`Image.open()`，我就会收到以下错误消息：

> 上传有效图片。您上传的文件不是图像或损坏的图像。

如果我评论有关的行`i`并将其修改`gps_data`为任何内容，则表单（带有图像）将被保存而没有任何错误......

```
# i = Image.open(im)
# ...
# functions to extract exif data from i
request.POST.update({ 'gps_data': 'some text'}) # set gps_data to 'test' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:21:28.383

首先，确保您的表单具有 enctype 标签

```
<form enctype="multipart/form-data" ... > 
```

尝试将 img（所有块）写入磁盘：

```
import Image
from random import choice
from django.conf import settings

random_file_name = getattr(settings, 'FILE_UPLOAD_TEMP_DIR', '/tmp')
random_file_name +=  '/' + ''.join([choice('abcdefg') for i in range(12)]) + '.jpg'

destination = open(random_file_name, 'wb+')
for chunk in request.FILES['image'].chunks():
    destination.write(chunk)
destination.close() 
```

然后，您可以从磁盘打开它：

```
image = Image.open(random_file_name)
if image.mode != "RGB":
    image = image.convert("RGB")

... 
```

此 URL 可以帮助您：

[https://docs.djangoproject.com/en/dev/topics/http/file-uploads/](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:51:57.003

我终于找到了一个更干净的解决方案：我从我的模型中删除了“required=True”，并定义了一个 clean() 方法，它在我的表单模型中完成了这项工作：

```
#Form
class GpsImForm(forms.Form):
    image = forms.ImageField(required=True)
    gps_data = forms.CharField()

    def clean(self):
        super(forms.Form, self)).clean()
        if not self.cleaned_data['gps_data']:  # the user can provide the gps_data manually
            if self.cleaned_data['image']:     # if he provided no gps_data but an image
                i = Image.open(self.cleaned_data['image'])
                ... # functions to extract exif data from i
            else:
                msg = _("You have to provide an image or a gps_data.")
                self._errors['gps_data'] = self.error_class([msg]) 
        return self.cleaned_data

#View
def gpsim_gen_view(request):
    if request.method == 'POST':
        form = GpsImForm(request.POST, request.FILES)
        if form.is_valid():
            obj = form.save()
            return ... #returns the gpsim
    else:
        form = GpsImForm()
    return direct_to_template(request, 'gpsim_generate.html', {'form': form,}) 
```

# asp.net - IE8 中的打印和打印预览缺失数据

> ID：12515064
> 
> 赞同：1
> 
> 时间：2012-09-20T14:40:58.813
> 
> 标签：asp.net, html, printing, internet-explorer-8

在特定屏幕中，我需要让用户打印出一些数据。由于显示的数据比较复杂，所以使用了一个标签：

```
lblTree.Text = stringHTML; 
```

使用动态构造的 HTML 字符串显示树。最后的字符串是 52 000 个字符长。我不认为这很重要，但我想我会解释一下背景。在 aspx 中，它看起来像这样：

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="3" align="left" class="PrintTBLHeader"><br />report as of 20/09/2012 : <br /><br /></td>
    </tr>
    <tr>
        <td colspan="3"><br /><asp:Label runat="server" ID="lblTree"></asp:Label><br /><br /></td>
    </tr>
    <tr>
        <td colspan="3" align="left" class="PrintTBLHeader"><br />2nd title:<br /><br /></td>
    </tr>
    <tr>
        <td colspan="3"><br /><asp:Label runat="server" ID="lblMPMtree"></asp:Label></td>
    </tr>
</table> 
```

问题是这样的：当我打开打印预览时，它应该显示 6 页（就像在 Firefox 和 chrome 中一样——它们工作正常），但是 IE8 的打印预览只显示了 3 页。

lblTree 在第一页的末尾被剪切然后在第二页上，而不是显示 lblTree 的其余部分，它以“第二个标题”开头（上面示例中的 tr #3）

我发现了一些与此类相关的文章，其中解决方案正在添加`media="print"`到`<link>`.

```
<link rel="stylesheet" type="text/css" href="..." media="print" /> 
```

那没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:33:04.917

总结一下：

*   [使用验证器](http://validator.w3.org)检查代码是否对 DOCTYPE 无效
*   如果无效，IE 将以 quirksmode 呈现，这绝不是一件好事。

# sql-server-2008 - SSRS 返回的结果与存储过程不同

> ID：12515071
> 
> 赞同：3
> 
> 时间：2012-09-20T14:41:13.920
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我有一个可以从 Management Studio 调用的存储过程，它始终返回 56 行。但是，当我从 ssrs 2008 内部执行查询时，我得到了 61 行。存储过程使用游标并在其中包含一些打印语句。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:45:29.677

当我有一个存储过程返回警告消息时，我遇到了类似的问题。它导致问题仅在我的 SSRS 数据集/报告中返回不一致的结果。我将 ansi-warnings 设置为关闭，我的问题就消失了。您可能想注释掉您的打印语句并尝试一下。

谢谢，史蒂夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:47:42.613

我会做两件事。

1.  检查 SSRS 报告是否没有使用缓存数据 - 它经常使用。
2.  如果这没有帮助......在您的 SP 中写入数据库中的表，参数进入和输出数据。那应该为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-11T22:55:19.483

在 SSRS 中，我试图将 null 作为参数的值传递给存储过程。似乎无论我尝试了什么，SSRS 都使用了“null”，它不适用于 @Parameter 在存储过程中为 null。

我创建了一个名为@Rs_null 的报告参数，默认值为（null）。然后我可以使用它。

（创建报告变量并不好，因为我无法传递存储过程参数。）

另请参阅[如何在 SSRS 中使用带空参数的存储过程？](https://stackoverflow.com/questions/9568755/how-to-use-stored-proc-with-null-parameters-in-ssrs)

# asp.net-mvc - 添加“不同于”零验证属性的最佳方法

> ID：12515072
> 
> 赞同：1
> 
> 时间：2012-09-20T14:41:14.223
> 
> 标签：asp.net-mvc, validation, attributes

在 ASP.NET MVC 3/4 中添加“不同于零”验证属性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:14:17.280

我假设您想要添加带有错误消息“不同于零”的自定义验证属性*（*不确定此处的英语用法是否正确）。假设您有一个具有需要验证的属性的模型：

```
public class YourModel
{
    [Required]
    [CheckZero] //custom attribute
    public int PropertyName { get; set; }   
    ...
} 
```

创建一个`CheckZeroAttribute`派生自`ValidationAttribute`并覆盖`IsValid`基类提供的方法之一的类。覆盖`IsValid`带有参数的版本`ValidationContext`提供了在方法内部使用的更多信息`IsValid`（`ValidationContext`参数将使您能够访问模型类型、模型对象实例和您正在验证的属性的友好显示名称，以及其他信息）。

```
public class CheckZeroAttribute : ValidationAttribute
{
    protected override ValidationResult IsValid (object value, ValidationContext validationContext)
    {
         //the error message
         string sErrorMessage = "Different from zero";
         //implement appropriate validation logic here
         ...
         if (...) { return new ValidationResult(sErrorMessage); }
         return ValidationResult.Success;
    }
} 
```

# c++ - 对于这两组相同循环的连续组，是否有更有效的解决方案？

> ID：12515073
> 
> 赞同：0
> 
> 时间：2012-09-20T14:41:16.200
> 
> 标签：c++, performance

我经常发现自己在编写这些代码，特别是当我必须在二维数组中做某事时。

循环是相同的，只是里面的操作不同，最重要的是，最后一组中的操作取决于第一组。

我主要关心的是：对于较大的 n,m 值是否有更有效的代码？

```
for ( int y = 0 ; y < m ; ++y ) {
  for ( int x = 0 ; x < n ; ++x ) {
    if ( v[x][y] == z ) a = true;
  }
}

for ( int y = 0 ; y < m ; ++y ) {
  for ( int x = 0 ; x < n ; ++x ) {
    if ( a == true ) do_something( v[x][y] );
  }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:48:10.500

在您描述的一般情况下，答案可能是“否”-您暗示第二次查看的操作依赖于完成的第一个循环，因此您必须这样做。

但是，在您列出的特定情况下，有两个简单的优化：

1.  在第一个循环中快速失败：一旦`a`设置`true`，就不需要再循环了。
2.  移动第二个循环的`if ( a == true )` *外部*，使其只评估一次，如果它为假，则跳过整个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:47:31.017

```
for ( int y = 0 ; y < m && !a; ++y ) {
  for ( int x = 0 ; x < n && !a; ++x ) {
    if ( v[x][y] == z ) a = true;
  }
}

if ( a == true ) {
  for ( int y = 0 ; y < m ; ++y ) {
    for ( int x = 0 ; x < n ; ++x ) {
      do_something( v[x][y] );
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:32:38.730

您可以继续并首先调用剩余的值，而不是终止第一个循环`do_something`（假设顺序无关紧要）。这将节省迭代和缓存。然后迭代回到你发现`a`是真的点并去那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:53:38.773

根据[代码完成](https://rads.stackoverflow.com/amzn/click/com/0735619670)：这取决于您的编程语言。在编程语言 A 中可能会给您带来性能提升的东西实际上可能会损害另一种语言的性能。

Code Complete 中描述了一些技术，例如[循环展开](http://en.wikipedia.org/wiki/Loop_unwinding)，这*可能*会提高性能（对于第一个循环或者如果您可以内联 do_something）。

一旦某个条件为真，也许您也可以转义/退出循环？例如一旦 a=true，退出第一个循环。（正如 Findus 已经指出的那样，如果设置了 a，则只执行第二个循环）

# ruby-on-rails - 我的 Rails 应用程序不喜欢我的属性

> ID：12515074
> 
> 赞同：2
> 
> 时间：2012-09-20T14:41:20.993
> 
> 标签：ruby-on-rails, ruby

我是 Rails 和 Ruby 的新手，实际上它是我的第一个 Web 语言。这不是我的第一个项目，但它是迄今为止最大的项目，我在某个页面（“主页”页面）上遇到了问题。

错误是：

```
NoMethodError in Home#index undefined method `avatar' for nil:NilClass 
```

提取的源代码（在第 1 行附近）：

```
1: <%= image_tag current_user.avatar.url(:thumb) %>
2: <ul>
3:   <li><b>Name:</b><%= current_user.name %></li>
4:   <li><b>Username:</b><%= current_user.username %></li> 
```

所以它不喜欢我的属性:(在这种情况下我该怎么办？我应该先看哪里？这是控制器问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:42:55.160

问题是`current_user`正在返回`nil`。

看看错误

```
NoMethodError in Home#index undefined method `avatar' for nil:NilClass 
```

Ruby 表示您正在尝试`avatar`在`nil`对象上执行实例方法。查看您的代码后，您应该能够知道您正在调用`avatar`的返回值，`current_user`因此您可以推断返回的`current_user`是返回值`nil`而不是用户。

**根据评论：**

要解决此问题，您需要首先确定是否存在`current_user`. 然后，只有这样，您才尝试显示用户`avatar`或用户的其他属性（`name`，`username`...）

有些人不喜欢逻辑中的观点，我倾向于遵循这种做法。

为避免这种情况，您可以： 创建一个包含逻辑的视图助手。这个助手可能会也可能不会显示/返回有关用户的数据。

类似的东西`if current_user ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:49:41.987

您正在尝试获取“current_user”的头像。系统正在抱怨，因为它不知道 current_user 是谁或什么。

您的 current_user 对象为零。导致问题的代码（可能来自您的应用程序或会话助手）您正在设置 current_user... 最有可能您会找到问题的根源。

# android - 在外部存储设备中写入文件不起作用

> ID：12515076
> 
> 赞同：0
> 
> 时间：2012-09-20T14:41:28.350
> 
> 标签：android, cordova

我尝试使用 phonegap ui 将文件写入我的 android 手机。我已授予写入权限，并尝试使用 getExternalStorageDirectory() 并提供绝对路径。但是还是写不出来。s1 是我在外部存储中写入的文件的名称

```
 Environment.getExternalStorageState();
//File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath(),"/Android/");
                File file = new File("/mnt/sdcard"+ File.separator + "Android" + File.separator);

                if (!file.exists()) {
                    if (!file.mkdirs()) {
                        Log.e("TravellerLog :: ", "Problem creating Folder");

                    }
                }
                Environment.getExternalStorageState();
                File outputFile = new File(file, s1);
                FileOutputStream fileoutputstream = new FileOutputStream(outputFile);
                byte abyte0[] = new byte[1024];
                for (int i = 0; (i = inputstream.read(abyte0)) > 0;)
                    fileoutputstream.write(abyte0, 0, i);

                fileoutputstream.close();
                inputstream.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:21:05.353

我写了一个将文件写入外部存储的快速工作演示。

如果这仍然不起作用，则可能是 phonegap 特定问题。

希望这可以帮助：

```
 InputStream is = null;
    OutputStream os = null;
    byte[] buffer = new byte[2048];
    int bytes_read = 0;
    File inputFile = new File("/init.rc");
    File outputFile = new File(Environment.getExternalStorageDirectory() + "/testfile");
    try
    {
        is = new FileInputStream(inputFile);
        os = new FileOutputStream(outputFile);

        while ((bytes_read = is.read(buffer)) != -1)
        {
            os.write(buffer, 0, bytes_read);
        }

    }
    catch (Exception ignore) {}
    finally
    {
        try
        {
            is.close();
        }
        catch (Exception ignore) {}

        try
        {
            os.close();
        }
        catch (Exception ignore) {}
    }

    if (outputFile.exists())
    {
        Toast.makeText(this, "Success!", Toast.LENGTH_LONG).show();
    }
    else
    {
        Toast.makeText(this, "Failure!", Toast.LENGTH_LONG).show();
    } 
```

# workflow-foundation-4 - 一次为大量记录创建工作流服务实例

> ID：12515078
> 
> 赞同：3
> 
> 时间：2012-09-20T14:41:30.580
> 
> 标签：workflow-foundation-4, appfabric, batch-processing

我正在处理一个必须导入具有 1000 条记录的文件的业务问题。每条记录都必须在工作流中注册为单独的记录，该记录必须经过自己的工作流。

WF4 [Corporate Purchase Process](http://msdn.microsoft.com/en-us/library/dd807514%28v=vs.100%29.aspx)示例有一个很好的解决方案，因为在第一步中它为所有必需的记录 ID 创建书签。因此，可以使用每个单独的记录/ID 的其余操作来恢复工作流。

1.  我想知道如何使用工作流服务来实现相同的东西，因为我可以获得 AppFabric 对我的工作流的好处。
2.  是否有任何其他解决方案来处理批量记录/ID？否则，工作流服务必须被调用 1000 次才能注册工作流实例中的每条记录，这不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:04:36.960

> 我想知道如何使用工作流服务来实现相同的东西，因为我可以获得 AppFabric 对我的工作流的好处。

这很简单。您将拥有一个读取文件并使用存在的循环活动循环结果的工作流。然后，在循环内，您将通过使用活动调用端点来启动每个记录所需的工作流**（“服务”）**`Send`。

现在，对于作为服务的工作流，您将`Receive`在工作流顶部有一个活动，该活动也`CanCreateInstance`设置了`true`. 之后的一切都`Receive`与任何其他工作流程没有什么不同。您可以考虑在此`Send`之后立即进行活动，`Receive`以让调用者知道该服务已启动。但这不是要求 -`Receive`将是必需的，因为它强制 WF 构建工作流以使用`WorkflowServiceHost`.

> 是否有任何其他解决方案来处理批量记录/ID？否则，工作流服务必须被调用 1000 次才能注册工作流实例中的每条记录，这不是一个好的解决方案。

您是否表示 Web 服务器接收 1000 个请求不是一个好的解决方案？考虑一个 IIS 服务器可以处理大约 25-50 个请求的事实，每个**时间**点，**每个核心**。**现在考虑这样一个事实，即您正在加载工作流的循环在那个时刻**的平均值不会超过5，但**可能**更像是 1 或 2。

 **我认为 Web 服务器不会成为您的问题。我已经通过一个循环在服务器上启动了 10,000 个工作流，就像您要构建的那样，它并没有出汗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:07:32.557

本着做最简单的事情的精神，您可以将子工作流作为一个活动引入主工作流，并为每个子工作流使用并行来为文件中的每个输入执行分支。不需要额外的调用，并且工具支持这一点，因为所有工作流都是活动。将主进程托管在服务中，这样您就可以避免与其他 IIS 用户（他们可能是真实的人）发生争用，这可能是一个好主意。

我同意调用 IIS 或 WCF 服务 1000 次不是问题，除非你想在几秒钟内完成！

重要的是要记住，工作流的好处之一是它的开销相当低（与其他工作流产品相比），因此您应该更关心工作流的作用，而不仅仅是启动大量实例的想法。像您的示例这样的批处理的想法非常普遍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T00:10:37.890

一种方法是使用 WCF 的 MSMQ 绑定来启动您的工作流。请求可以通过 HTTP 正常进入，WCF 会将它们路由到 MSMQ 并处理负载。您可以通过 MSMQ 绑定 + IIS 设置限制使用多少工作流实例。

下载描述使用 WCF 和 MSMQ 设置工作流应用程序的 Word 文档：http: [//www.microsoft.com/en-us/download/details.aspx?id= 21245](http://www.microsoft.com/en-us/download/details.aspx?id=21245)**

# php - 从查询创建多维数组

> ID：12515081
> 
> 赞同：0
> 
> 时间：2012-09-20T14:41:40.530
> 
> 标签：php

我很难根据从 mysql 数据库中获取的查询构建多维数组。目的是为 json 编码准备结果。这里有问题。

我的目标是：

```
Array ( 
    [68] => Array ( 
        [0] => Array ( 
            [id] => 64 
            [description] => yada, yada, yada... ) 
        [1] => Array ( 
            [id] => 65 
            [description] => yada, yada, yada...) 
        [2] => Array ( 
            [id] => 66 
            [description] => yada, yada, yada... ) ) 
    [69] => Array ( 
        [0] => Array ( 
            [id] => 64 
            [description] => yada, yada, yada... ) 
        [1] => Array ( 
            [id] => 65 
            [description] => yada, yada, yada...) 
        [2] => Array ( 
            [id] => 66 
            [description] => yada, yada, yada... ) ) 
...etc
) 
```

从：

```
//this is a list of unknown length
$array_ids = (68, 69, 70, etc... );   // or:

Array ( 
    [0] => 68 
    [1] => 69
    [2] => 70 
    [3] => 71 
    etc..  
)

//this is a known length 
$array_contents = ( array ( array ( [id], [description]) );  // or:

Array ( 
    [0] => Array ( 
        [id] => 64 
        [description] =>yada, yada, yada... ) 
    [1] => Array ( 
        [id] => 65 
        [description] => yada, yada, yada... ) 
    [2] => Array ( 
        [id] => 66 
        [description] => yada, yada, yada... ) ) 
```

我的尝试：

```
foreach($array_ids as $row){
    $result = array($row=>array());
    foreach($array_contents as $key => $value){
        $result [$row][$key] = $value;
    }
} 
```

结果：

```
Array ( 
    [68] => Array ( 
        [0] => Array ( 
            [id] => 64 
            [description] => yada, yada, yada... ) 
        [1] => Array ( 
            [id] => 65 
            [description] => yada, yada, yada...) 
        [2] => Array ( 
            [id] => 66 
            [description] => yada, yada, yada... ) ) 
```

)

......这就是它停止的地方。它不会继续到 69、70 等的下一行 id...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:57:02.243

好的，重新阅读问题后，请尝试以下操作：

```
$outputArray = array();

foreach( $array_ids as $id ){
  $outputArray[$id] = $array_contents;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:57:14.973

尝试以更短的方式更改您的代码

```
$result = array();
foreach($array_ids as $row){
    foreach($array_contents as $key => $value){
        $result [$row][$key] = $value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:54:15.467

这条线似乎是问题所在：

```
$result = array($row=>array()); 
```

每次通过`$array_ids`它都会完全清除`$result`并用来自 的单个项目重新填充它`$array_contents`，而不是将其附加到末尾。

用它替换它应该可以工作：

```
$result[$row] = array(); 
```

**这是一个完整的工作版本：**

```
$array_ids = array(68,69,70);

$array_contents = array(
    array( 
        'id' => 64, 
        'description' => 'yada, yada, yada...'
    ),
  array( 
        'id' => 65,
        'description' => 'yada, yada, yada2...'
    ),
    array( 
    'id' => 66,
    'description' => 'yada, yada, yada3...'
    ),
);

foreach($array_ids as $row){
    $result[$row] = array();
    foreach($array_contents as $key => $value){
        $result [$row][$key] = $value;
    }
}

var_dump($result);
?> 
```

**这是输出：**

```
array(3) {
  [68]=>
  array(3) {
    [0]=>
    array(2) {
      ["id"]=>
      int(64)
      ["description"]=>
      string(19) "yada, yada, yada..."
    }
    [1]=>
    array(2) {
      ["id"]=>
      int(65)
      ["description"]=>
      string(20) "yada, yada, yada2..."
    }
    [2]=>
    array(2) {
      ["id"]=>
      int(66)
      ["description"]=>
      string(20) "yada, yada, yada3..."
    }
  }
  [69]=>
  array(3) {
    [0]=>
    array(2) {
      ["id"]=>
      int(64)
      ["description"]=>
      string(19) "yada, yada, yada..."
    }
    [1]=>
    array(2) {
      ["id"]=>
      int(65)
      ["description"]=>
      string(20) "yada, yada, yada2..."
    }
    [2]=>
    array(2) {
      ["id"]=>
      int(66)
      ["description"]=>
      string(20) "yada, yada, yada3..."
    }
  }
  [70]=>
  array(3) {
    [0]=>
    array(2) {
      ["id"]=>
      int(64)
      ["description"]=>
      string(19) "yada, yada, yada..."
    }
    [1]=>
    array(2) {
      ["id"]=>
      int(65)
      ["description"]=>
      string(20) "yada, yada, yada2..."
    }
    [2]=>
    array(2) {
      ["id"]=>
      int(66)
      ["description"]=>
      string(20) "yada, yada, yada3..."
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:56:06.073

我尝试使用以下数组结构和逻辑它的工作原理，我的逻辑有点不同

```
$array = array(68,69,70);
$nextArray = array(
    array(
        'id'=>64,
        'desc'=>'test'
    ),
    array(
        'id'=>65,
        'desc'=>'test'
    ),
    array(
        'id'=>66,
        'desc'=>'test'
    ),
    array(
        'id'=>67,
        'desc'=>'test'
    ),
);
$tempArray = array();
foreach($array as $value){
    foreach($nextArray as $key => $value1){
        $tempArray[$value][$key] = $value1;
    }
}
var_dump($tempArray); 
```

输出 ：

```
array
  68 => 
    array
      0 => 
        array
          'id' => int 64
          'desc' => string 'test' (length=4)
      1 => 
        array
          'id' => int 65
          'desc' => string 'test' (length=4)
      2 => 
        array
          'id' => int 66
          'desc' => string 'test' (length=4)
      3 => 
        array
          'id' => int 67
          'desc' => string 'test' (length=4)
  69 => 
    array
      0 => 
        array
          'id' => int 64
          'desc' => string 'test' (length=4)
      1 => 
        array
          'id' => int 65
          'desc' => string 'test' (length=4)
      2 => 
        array
          'id' => int 66
          'desc' => string 'test' (length=4)
      3 => 
        array
          'id' => int 67
          'desc' => string 'test' (length=4)
  70 => 
    array
      0 => 
        array
          'id' => int 64
          'desc' => string 'test' (length=4)
      1 => 
        array
          'id' => int 65
          'desc' => string 'test' (length=4)
      2 => 
        array
          'id' => int 66
          'desc' => string 'test' (length=4)
      3 => 
        array
          'id' => int 67
          'desc' => string 'test' (length=4) 
```

# python - 使用 PyInstaller 编译得到 pyodbc 后如何修复启动错误？

> ID：12515083
> 
> 赞同：5
> 
> 时间：2012-09-20T14:41:45.377
> 
> 标签：python, ms-access, pyodbc, pyinstaller

我用 python (`pyodbc`和`tkinter`) 编写了一个程序。我曾经`pyodbc`连接到 Microsoft Access 数据库。

有连接代码：

```
import pyodbc

# Microsoft Access Database File
DBfile = 'GDP.mdb'
conn = pyodbc.connect('DRIVER={Microsoft Access Driver (*.mdb)};DBQ='+DBfile) 
```

当我在命令提示符 ( ) 中编译之前启动它时，`python myprogram.py`它工作得很好。编译`pyinstaller`一切顺利时，没有报错。

但是当尝试启动可执行文件时，它会显示主窗口 2 秒钟，然后消失。

当我使用该`-d`标志`pyinstaller`打开调试模式时，它在启动可执行文件时显示以下错误：

```
Traceback (most recent call last):
File "<string>", line 62, in <module>
  pyodbc.Error: (
     'HY000', "[HY000] [Microsoft][Driver ODBC Microsoft Access]
     Can't find File'(Unknown)'. 
     (-1811) (SQLDriverConnect); [HY000] [Microsoft][Driver ODBC Microsoft Access]
     Can't find File'(Unknown)'.
     (-1811)")
RC: -1 from main 
```

**编辑**
第一个错误消失了，得到一个新的：

```
Traceback (most recent call last):
    File "", line 78, in 
File "path\to\my\program\ build\pyi.win32\GDP\outPYZ1.pyz/Tkinter", line 1564, in wm_iconbitmap
_tkinter.TclError: bitmap "icon.ico' not defined
RC: -1 from main 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:55:38.007

您需要使用绝对文件名，而不是本地文件：

```
import os

try:
    currdir = os.path.dirname(os.path.abspath(__file__))
except NameError:  # We are the main py2exe script, not a module
    import sys
    currdir = os.path.dirname(os.path.abspath(sys.argv[0]))
DBfile = os.path.join(currdir, 'GDP.mdb') 
```

# java - 使用 Apache CXF webclient 时导致此 ClassLoader StackOverflowError 的原因是什么？

> ID：12515089
> 
> 赞同：2
> 
> 时间：2012-09-20T14:42:13.490
> 
> 标签：java, jaxb, cxf

仅在我的生产系统上绑定使用 Apache CXF Webclient 时遇到 StackOverflowError。

我在 64 位 Windows 2008 上使用 32 位 jdk1.6.0_26。

我认为这可能与 Jaxb 有关，但我检查了类路径上没有任何版本的 jaxb-impl（应该使用 JDK 版本）。

关于这可能是什么的任何建议？或者我该如何诊断？

```
java.lang.StackOverflowError
        at java.util.Vector.addElement(Vector.java:572)
        at java.lang.ClassLoader.addClass(ClassLoader.java:166)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at org.apache.cxf.bus.spring.SpringBusFactory.createBus(SpringBusFactory.java:102)
        at org.apache.cxf.bus.spring.SpringBusFactory.createBus(SpringBusFactory.java:91)
        at org.apache.cxf.bus.spring.SpringBusFactory.createBus(SpringBusFactory.java:69)
        at org.apache.cxf.bus.spring.SpringBusFactory.createBus(SpringBusFactory.java:58)
        at org.apache.cxf.BusFactory.getDefaultBus(BusFactory.java:99)
        at org.apache.cxf.BusFactory.createThreadBus(BusFactory.java:165)
        at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:155)
        at org.apache.cxf.BusFactory.getThreadDefaultBus(BusFactory.java:140)
        at org.apache.cxf.endpoint.AbstractEndpointFactory.getBus(AbstractEndpointFactory.java:83)
        at org.apache.cxf.jaxrs.AbstractJAXRSFactoryBean.getBus(AbstractJAXRSFactoryBean.java:89)
        at org.apache.cxf.jaxrs.AbstractJAXRSFactoryBean.createEndpointInfo(AbstractJAXRSFactoryBean.java:133)
        at org.apache.cxf.jaxrs.AbstractJAXRSFactoryBean.createEndpoint(AbstractJAXRSFactoryBean.java:216)
        at org.apache.cxf.jaxrs.client.JAXRSClientFactoryBean.createWebClient(JAXRSClientFactoryBean.java:195)
        at org.apache.cxf.jaxrs.client.WebClient.create(WebClient.java:90) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:25:59.503

事实证明，我的生产环境中的线程已经配置了非常小的堆栈大小，因此确实没有足够的空间来进行递归类加载。哦。

# eclipse - 将正文添加到 IMethod

> ID：12515091
> 
> 赞同：1
> 
> 时间：2012-09-20T14:42:16.797
> 
> 标签：eclipse, plugins, abstract-syntax-tree

我正在编写一个 Eclipse 插件来进行一些简单的代码生成。我能够获取一个代表我需要修改的方法的 IMethod，但我不确定如何在其主体中实际编写附加代码。我知道这可以用 AST 节点来完成，那么有没有办法在 IMethod 和 MethodDeclaration 之间转换或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:37:24.413

IMethod 是 JDT 的 Java 模型的一个类，而 MethodDeclaration 是 JDT AST 的一个节点类。Java 模型与 AST 没有任何联系。但是您可以使用该模型来创建 AST，通常使用 ICompilationUnit（表示 Java 源文件），尽管也可以从字符串创建 AST。

我建议看看[这篇文章](http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html)

* * *

编辑：

可能“没有*直接*联系”是更好的措辞。在[JDT 常见问题解答](http://wiki.eclipse.org/JDT/FAQ#From_an_IJavaElement_to_its_declaring_ASTNode)中如下：

> **如何从 IBinding、IJavaElement、ASTNode 之一转到另一个？**
> 
> [...]
> 
> **从 IJavaElement 到 IBinding**
> 
> 如果您只需要绑定键而不需要绑定对象本身，请在 IJavaElement 的子类型中查找“getKey()”方法。此方法返回绑定键，这在许多情况下都很有用，例如，请参阅下一点。请注意，并非 IJavaElement 的所有子类型都有对应的绑定，例如 IType 和 IMethod 有一个，但 IPackageFragment 和 IImportContainer 没有。
> 
> 如果你真的需要绑定对象，你可以使用'org.eclipse.jdt.core.dom.ASTParser.createBindings(IJavaElement[], IProgressMonitor)'。请注意，与仅获取绑定密钥相比，此操作稍微昂贵，因为必须创建绑定。
> 
> **从 IJavaElement 到其声明的 ASTNode**
> 
> org.eclipse.jdt.core.dom.CompilationUnit.findDeclaringNode(String) - 字符串参数是绑定键，见上一点。

# javascript - 根据查询字符串从 Javascript 设置下拉选项

> ID：12515092
> 
> 赞同：0
> 
> 时间：2012-09-20T14:42:16.557
> 
> 标签：javascript, jquery, query-string

我有一个局部视图，其中有一个下拉列表，我在我的页面中包含该局部视图两次。这是下拉菜单。

```
<form name="sortbyformtop">
            <select onchange="sort('@querystring', this.options[this.selectedIndex].value);" name="sortbyselecttop">
                <option value=""></option>
                <option value="accommodationtype">Accommodation type</option>
                <option value="mostreviewed">Most reviewed</option>
                <option value="lowestprice">Lowest price</option>
            </select>
        </form> 
```

现在，当页面加载时，如果查询字符串包含一个键，`sortby`那么我想取的值`sortby`（这将是`accommodationtype`, `mostreviewed`，`lowestprice`即选项的值）。我想做的是将页面上的两个下拉菜单都设置为与`sortby`查询字符串值匹配的选项。我已经尝试了很多东西，但没有任何效果。

你能帮我吗？

**编辑**

我试过了，但没有用

```
$(document).ready(function () {
                $("#sortbyselecttop option").filter(function () {
                    alert($(this).text());
                    return $(this).text() == "lowestprice";
                }).first().prop("selected", true);
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:26:37.090

您不能访问具有这样名称的控件，`$("#name")`这是一个仅选择具有 ID 的 DOM 的选择器。但您仍然可以设置下拉菜单的值，例如

```
$("select [name='sortbyselectop']").val(value); 
```

假设 value 是您的查询字符串值所在的变量

```
function Querystring(qs)
{
this.params = {};
this.get = Querystring_get;
this.args = {};
qs = qs ? qs.replace(/^#/g, '') : location.search.substring(1, location.search.length);

if (qs.length == 0)
    return;
qs = qs.replace(/\+/g, ' ');
this.args = qs.split('&');
for (var i = 0; i < this.args.length; i++)
{
    var pair = this.args[i].split('=');
    var name = unescape(pair[0]);

    var value = (pair.length == 2)
     ? unescape(pair[1])
     : name;

    this.params[name] = value;
}
this.joined = function()
{
    var join = new Array();
    for (var a in this.params)
    {
        join.push(a + '=' + this.params[a]);
    };
    return join.join('&');
};

}
function Querystring_get(key, defaultValue)
{
var value = this.params[key];
return (value != null) ? value : defaultValue;
}; 
```

尝试这些功能并获得价值

```
var qs = new Querystring().get("sortby", ''); 
```

现在 qs 将拥有您的查询字符串值，您可以设置下拉列表的值，例如

```
$("select [name='sortbyselectop']").val(qs); 
```

希望这会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:55:21.143

不确定我是否读得很好，但你只是想让下拉菜单选择查询字符串的值吗？

如果是这样，试试这个：

```
$('select[name="sortbyselecttop"]').val('accommodationtype'); 
```

如果选择有一个类名会更好，这样您就可以使用一个 jQuery 命令设置两个下拉菜单。

[这是一个小提琴](http://jsfiddle.net/QEv4C/)

# c# - 解析固定列宽的可变长度字符串C#

> ID：12515093
> 
> 赞同：5
> 
> 时间：2012-09-20T14:42:21.327
> 
> 标签：c#, parsing, fixed-width

我正在尝试解析格式化为列的文本报告。每列似乎都以固定长度右对齐。对于每一行，有时并非所有列都被使用。在这种情况下，似乎使用空格来证明行中的每一列。示例输入：

```
031   91    1221,154
043   66     312,222    1      3,047                       3,047    1.5%    .9%
040  118     529,626    1      1,842                       1,842     .8%    .3%
037   45     427,710
019   80     512,153    1     14,685                      14,685    1.2%   2.8%
009   68     520,301                      1    16,085     16,085    1.4%   3.0%
030   13     106,689                      1     1,581      1,581    7.6%   1.4%
008   54     377,593    1      7,098                       7,098    1.8%   1.8%
018   24     171,264
022   25       8,884    1        433                         433    4.0%   4.8%
035    9      42,043
041   13     112,355 
```

列宽如下（包括空格在内的字符数）：3,5,12,6,10,7,10,11,8,7。

什么是解析这个的好方法？我曾尝试使用正则表达式来执行此操作，但它显然在读入的第一行失败，因为我使用的表达式希望整行都有数据：

字符串模式 = @"^(?.{3})(?.{5})(?.{12})(?thirtyeightyninenumber>.{6})(?{10})(?.{7}(? .{10})(?.{11})(?.{8})(?.{7})";

根据该列是否有数据，寻找一种将其读入适当变量的好方法。我觉得我需要投入大量`if`支票，但我希望有一个我没有想到的更好的方法。

谢谢你的帮助。

顺便说一句 - 我正在使用 StreamReader 和 ReadLine 读取行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T14:48:09.097

有一个[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/zezabash.aspx)专门用于读取像这样的固定宽度/分隔的文本文件。

它在`Microsoft.VisualBasic.FileIO`命名空间中，但您仍然可以从 C# 调用它。

`Microsoft.VisualBasic`添加对, a的引用`using Microsoft.VisualBasic.FileIO;`，然后代码如下所示：

```
TextFieldParser parser = new TextFieldParser(stream);
parser.TextFieldType = FieldType.FixedWidth;
parser.SetFieldWidths(3, 5, 12, 6, 10, 7, 10, 11, 8, 7);
while (!parser.EndOfData)
{
    //Processing row
    string[] fields = parser.ReadFields();

    // Treat each field appropriately e.g. int.TryParse,
    // remove the "%" then float.TryParse etc.
}
parser.Close(); 
```

编辑：也就是说，在 Reflector 中，我认为如果您的缩短线没有完整宽度的空间，这将失败。我不确定如何建议您解决此问题；您可以预处理您的流以在每行中插入任何缺少的空格吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T14:43:50.567

不要为此使用正则表达式。您知道列数和这些列的宽度，因此只需使用[`String.Substring`](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)and [`String.Trim`](http://msdn.microsoft.com/en-us/library/system.string.trim.aspx)：

```
string field1 = line.Substring(0, 5).Trim();
string field2 = line.Substring(5, 3).Trim();
string field3 = line.Substring(12, 8).Trim();
/* etc, etc */ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-27T16:21:43.593

只需对照 myDataString + new string(' ', 1000); 检查您的正则表达式（或其他任何内容）；

# cordova - 如何在 PhoneGap 中处理自定义 URL 方案以进行冷启动？

> ID：12515096
> 
> 赞同：5
> 
> 时间：2012-09-20T14:42:25.737
> 
> 标签：cordova

我将 handleOpenURL() 用于自定义 URL 方案，以从电子邮件中的链接启动我的应用程序。完美运行，我可以根据链接中的 URL 参数在我的应用程序中做一些事情。

问题是当我的应用程序冷启动（不在后台运行）时，handleOpenURL() 似乎没有被调用。是否有另一个处理程序可用于冷启动与已经运行的实例？

或者

是否有一个我可以读取的全局变量来告诉我调用 URL 是什么？我读过关于invokeString，但似乎从未设置过？

我正在使用 PhoneGap 2.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:43:28.163

如果你仔细阅读 application:handleOpenURL 方法上面的注释，你可能会明白：

```
// this happens while we are running ( in the background, or from within our own app )
// only valid if Calinda-Info.plist specifies a protocol to handle
- (BOOL) application:(UIApplication*)application handleOpenURL:(NSURL*)url 
```

如果应用程序未运行，则不会调用此方法。我的解决方案是通过以下更改调整项目：

主视图控制器.h

```
@interface MainViewController : CDVViewController
@property (nonatomic, retain) NSString *URLToHandle;
@end 
```

主视图控制器.m

```
- (void) webViewDidFinishLoad:(UIWebView*) theWebView 
{
     if (self.URLToHandle)
     {         
         NSString* jsString = [NSString stringWithFormat:@"window.setTimeout(function() {handleOpenURL(\"%@\"); },1);", self.URLToHandle];
         [theWebView stringByEvaluatingJavaScriptFromString:jsString];
     }
     [...]
}

- (void)dealloc
{
    self.URLToHandle = nil;
    [super dealloc];
}

@synthesize URLToHandle; 
```

AppDelegate.m

```
- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{   
    [...]
    self.viewController = [[[MainViewController alloc] init] autorelease];
    self.viewController.useSplashScreen = YES;
    self.viewController.wwwFolderName = @"www";
    self.viewController.startPage = @"index.html";
    self.viewController.view.frame = viewBounds;

    // Patch for handleOpenURL
    ((MainViewController *)self.viewController).URLToHandle = URLToHandle;

    [...]
} 
```

希望有帮助。

西里尔

附加说明：测试时请确保停止 xcode。当 xcode 运行时，应用程序会抛出异常。如果我停止 xcode，这个解决方案可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-01T19:10:42.820

顺便说一句，如果有人遇到这种情况，唯一缺少的是`URLToHandle`在`AppDelegate`(.h 和 .m) 中定义的方式与在 .h 中定义的方式相同`MainViewController`。

而且您还必须`AppDelegate.m`从以下位置撤消分配：

```
((MainViewController *)self.viewController).URLToHandle = URLToHandle; 
```

至：

```
NSString* jsString = [NSString stringWithFormat:@"window.setTimeout(function() {handleOpenURL(\"%@\"); },1);", url];
((MainViewController *)self.viewController).URLToHandle = jsString; 
```

您基本上必须将 url 从转移`AppDelegate`到`MainViewController`.

`setTimeout`很关键，否则它不起作用。

# windows-phone-7 - 在 Windows Phone 浏览器中拦截 url

> ID：12515100
> 
> 赞同：0
> 
> 时间：2012-09-20T14:42:36.370
> 
> 标签：windows-phone-7, browser

在我的应用程序中，我有*两个页面*：**Main Page**和**Display Page**。每个页面都有一个*浏览器控件*。

在主页上，浏览器控件的源*设置*为*网站**的主页*。如果用户触摸缩略图，我希望它显示在显示页面上。

 **如何获取已单击/触摸**的链接地址****并将其发送到显示页面上的浏览器**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:56:09.460

`WebBrowser`控件具有导航和导航事件。

在导航处理程序中，您可以将单击的链接作为 e.Uri 获取。得到它并取消导航。然后将该链接发送到显示页面。

```
void web_Navigating(object sender, NavigatingEventArgs e)
    {
        e.Cancel = true;
        NavigationService.Navigate(new Uri("/DisplayPage.xaml?TargetUri="+e.Uri.ToString(), UriKind.Relative));
    } 
```

注意：顺便说一句，发送 e.Uri 不是一种可取的方式。我建议您在项目中创建一个静态属性，并使用它来共享页面之间的链接。**

# javascript - DropDownList 未从存储过程中填充

> ID：12515101
> 
> 赞同：0
> 
> 时间：2012-09-20T14:42:37.677
> 
> 标签：javascript, asp.net, stored-procedures

我有一个快速的问题。我有一个 dropDownList，我试图从存储过程中填充 id。但是，它似乎不起作用。这是我的下拉列表：

```
 <div id="newExpenseTypeDialog" style="display:none;">
        <label>Select new CaseFile:</label>
        <asp:DropDownList runat="server" ID="ddlCaseFiles" DataSourceID="dsMyCaseFiles" DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="524px" />
</div> 
```

这是我的数据源：

```
<asp:SqlDataSource ID="dsMyCaseFiles" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" ProviderName="System.Data.SqlClient" SelectCommand="p_CaseFiles_ListActiveCaseFilesAssignedTo" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:SessionParameter Name="InvestigatorID" SessionField="InvestigatorID" />
        <asp:SessionParameter Name="AssignedTo" SessionField="InvestigatorID" />
    </SelectParameters>
</asp:SqlDataSource> 
```

我的存储过程需要两个参数。InvestigatorID 和 AssignedTo。然后它将找到返回所有匹配的 FileID。

现在这是我的 .aspx.cs 侧代码：（Page_load）

```
if (Request.QueryString["ExpenseID"] != null)
    {
        if (!IsPostBack)
        {
            ddlCaseFiles.DataSourceID = "dsCaseFiles";
            ddlCaseFiles.DataTextField = "Display";
            ddlCaseFiles.DataValueField = "FileID";
        }
    } 
```

和我的 Pre_Render：

```
protected void ddl_PreRender(object sender, EventArgs e)
{
    DropDownList ddl = (DropDownList)sender;
    try
    {
        if (ddl.Items[0].Value != "-1")
            ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }
    catch
    {
        ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }
} 
```

该列表有 pre_render 工作，什么没有，只是我的存储过程中没有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:46:11.273

我想你只是忘记调用 DataBind 方法

```
ddlCaseFiles.DataBind(); 
```

在`if(!ispostback)`这三行之后的块中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:14:58.283

你还没有绑定你的下拉列表

```
if (Request.QueryString["ExpenseID"] != null)
{
    if (!IsPostBack)
    {
        ddlCaseFiles.DataSourceID = "dsCaseFiles";
        ddlCaseFiles.DataTextField = "Display";
        ddlCaseFiles.DataValueField = "FileID";
        ddlCaseFiles.DataBind();  //You need to Bind it here
    }
} 
```

希望对你有帮助

# android - 如何将 startActivityForResult 与股票计算器应用程序一起使用来处理算术项

> ID：12515102
> 
> 赞同：0
> 
> 时间：2012-09-20T14:42:41.373
> 
> 标签：android

股票 android 计算器应用程序将处理诸如“(1-0.66)*100”之类的术语以产生结果 34。

我想使用这种术语处理能力将计算结果返回到我的应用程序。

有没有人有这种方法的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:02:33.903

看起来您不能指望从现有的 Android 计算器应用程序中获取数据。

查看此 StackOverflow 问题中提供的答案以获取更多信息。

[从 Android 原生计算器获取结果](https://stackoverflow.com/questions/10578192/get-back-result-from-android-native-calculator)

# php - mysql优化分页查询

> ID：12515106
> 
> 赞同：1
> 
> 时间：2012-09-20T14:42:48.377
> 
> 标签：php, mysql, limit, paging

请问有人可以帮我扩展这个查询吗？我找不到解决方案。

`SELECT *,p.cat_id, cat_name FROM ( SELECT cat_id FROM categories ORDER BY cat_id LIMIT 700000, 10 ) o JOIN categories p ON p.cat_id = o.cat_id ORDER BY p.cat_id`

它在有 800 000 条记录的表上非常快，但我需要的是使用 order by 子句和 where claue 对数据进行排序 - 用于分页。如果我使用它的顺序很慢或结果排序不正确>

```
SELECT *, p.cat_id, cat_name FROM(
    SELECT  cat_id
    FROM    categories
    LIMIT 700000, 10
    ) o JOIN    categories p
ON      p.cat_id = o.cat_id
ORDER BY p.cat_name

page 1
LIMIT 700000,5:
 id      name
 12525525   car
 15155151   carpet
 1521512i   zone

page 2
LIMIT 700005,5
 id        name
12525525   carefull
15155151   excellent
52151222   drive 
```

我需要结果：

```
page 1 car 
carpet
drive 
excellent ... etc.

f.e. , this is very slow ofcourse >
SELECT *, p.cat_id, cat_name 
FROM    (
        SELECT  cat_id
        FROM    categories
        **ORDER BY cat_name**
        LIMIT 700000, 10
        ) o
JOIN    categories p
ON      p.cat_id = o.cat_id
ORDER BY p.cat_name 
```

主键 cat_id，自动增量我在表中的字段上有索引

非常感谢您的帮助或一些想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:49:22.230

您不需要`JOIN`同一张表，并且您必须在内部查询中使用外部查询中的子句`ORDER BY`正确排序：`WHWRE`

```
 SET @rownum = 0;
 SELECT t.*, t.rank as TableRank
 FROM
 (
    SELECT *,  (@rownum := @rownum + 1) as rank
    FROM categories c 
    ORDER BY c.cat_name
 ) t 
 WHERE rank BETWEEN ((@PageNum - 1) * @PageSize + 1)
 AND (@PageNum * @PageSize) 
```

# oracle - 从 jdbc 调用 Oracle 过程失败

> ID：12515113
> 
> 赞同：0
> 
> 时间：2012-09-20T14:42:57.460
> 
> 标签：oracle, stored-procedures

我们在一个名为 x_pkg.proc_name 的 oracle 包中声明了一个过程。当通过 java.sql.Statement.execute("BEGIN x_pkg.proc_name; END;"); 从 jdbc 调用时 调用失败并出现错误

```
java.sql.SQLException: ORA-06550: line 1, column 7:
PLS-00201: identifier 'x_pkg.proc_name' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

上述错误表明该过程未在给定包中声明。如果我将过程重命名为 x_pkg.proc_name_something，jdbc 调用会出人意料地成功。这似乎很奇怪。我尝试删除过程声明及其主体并重新添加它，但我得到了同样的错误。

有关进一步解决此问题的任何建议？

注意 - 过程调用总是通过 pl-sql 代码成功。它只是在通过 jdbc 执行时失败。

**更新：** 如果我在它前面加上“BEGIN schema_name.x_pkg.proc_name; END;”之类的模式名称，它的过程调用就会成功

知道什么时候应该为模式名称加上前缀，什么时候不需要？

**更新：** 实际的包名称是“COMMONS_UTILS”，过程名称是“SET_SESSION_NLS_PARAMS”。调用“BEGIN COMMONS_UTILS.SET_SESSION_NLS_PARAMS; END;” 通过 JDBC 进行时失败。如果我将过程名称重命名为“SET_SESSION_NLS_PARAMSX”，它会起作用。

**更新：** 如果我在执行它之前编译它，则该过程调用有效。

"开始立即执行'ALTER PACKAGE COMMONS_UTILS COMPILE'；COMMONS_UTILS.SET_SESSION_NLS_PARAMS；结束；"

# ruby-on-rails-3 - 如何解决 ActiveAdmin 上的日期过滤问题？

> ID：12515114
> 
> 赞同：0
> 
> 时间：2012-09-20T14:43:06.353
> 
> 标签：ruby-on-rails-3, activeadmin

我在 ActiveAdmin 上有一个报告资源和一个日期过滤器。问题是我可以将第二个日期字段设置在第一个日期字段之前，如果我进行这样的搜索，没有结果出现。我该如何解决？我的数据库中有一个日期列。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:25:11.037

我不确定这是一个问题。尽管像这样使用日期过滤没有用，因为它总是返回零结果，但这并不意味着搜索无效。

我认为这是 ActiveAdmin 的设计者决定使其以一种有效但与您期望不同的方式工作的一个案例。

# ajax - h:inputText 不是在 h:selectOneMenu 更改时进行 ajax 渲染

> ID：12515115
> 
> 赞同：0
> 
> 时间：2012-09-20T14:43:09.057
> 
> 标签：ajax, jsf, jsf-2

我有这段代码用于选择在 jsf 表中显示多少行：

```
<!-- Set rows per page -->
<h:outputLabel for="rowsPerPage" value="Rows per page" />
<h:inputText id="rowsPerPage" value="#{AccountsController.rowsPerPage}" size="3" maxlength="3" />
<h:commandButton styleClass="bimage" value="Set" action="#{AccountsController.pageFirst}" >
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton>&nbsp;
<h:message for="rowsPerPage" errorStyle="color: red;" /> 
```

我想以这种方式编辑代码：我想用`h:selectOneManu`和选项替换代码以插入具有 AJAX 支持的自定义值：

```
<h:selectOneMenu id="setrows" value="#{AccountsController.rowsPerPage}" converter="javax.faces.Integer" maxlength="3">                                    
    <f:selectItem itemValue="10" itemLabel="10" />
    <f:selectItem itemValue="50" itemLabel="50" />
    <f:selectItem itemValue="100" itemLabel="100" />
    <f:selectItem itemValue="500" itemLabel="500" />                                    
    <f:selectItem itemValue="332" itemLabel="Custom" />
    <f:ajax render="customrowperpage" />
</h:selectOneMenu>&nbsp;
<h:inputText id="customrowperpage" value="#{AccountsController.rowsPerPage}" rendered="#{AccountsController.rowsPerPage == '332'}" required="true" /> 
```

但由于某种原因，代码不起作用。你能帮我找出问题所在吗？`h:selectOneMenu`当我从列表 AJAX 调用中选择数字以更新表单时，我还想更新 AJAX 功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T00:42:29.060

有2个问题。

首先，由于 JavaScript 在客户端运行，您无法对未呈现到客户端的 JSF 组件进行 ajax 更新。那么在 HTML DOM 树中就没有 JavaScript 可以选择、操作和替换的东西了。*您应该改为 ajax 更新始终*呈现给客户端的 JSF 组件。

```
<h:panelGroup id="customrowperpage">
    <h:inputText value="#{AccountsController.rowsPerPage}" required="true" 
        rendered="#{AccountsController.rowsPerPage == '332'}" />
</h:panelGroup> 
```

另请参阅[为什么当我想进行 ajax 更新时，我需要将带有 render="#{some}" 的组件嵌套在另一个组件中？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)

其次， a`Integer` **从不** [等于](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)a `String`。您正在`rendered`针对`Integer rowsPerPage`. `String '332'`删除那些单引号，使其成为一个完全有价值的数字。

```
<h:panelGroup id="customrowperpage">
    <h:inputText value="#{AccountsController.rowsPerPage}" required="true" 
        rendered="#{AccountsController.rowsPerPage == 332}" />
</h:panelGroup> 
```

# java - Felix 如何检查捆绑包？

> ID：12515120
> 
> 赞同：1
> 
> 时间：2012-09-20T14:43:33.810
> 
> 标签：java, osgi, bundle, apache-felix

我有一些应用程序，使用了 Felix OSGi 框架。

更新后如何检查捆绑包？

即我有很多捆绑包并且所有捆绑包都已加载。我可以更新捆绑目录中的一些捆绑包。如何检查，哪些捆绑文件已更改以及哪些捆绑 - 未更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:45:39.803

You can register a [`BundleListener`](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleListener.html). It will be called whenever bundles change.

Normally this is not necessary though as there are other means to notify your other bundles of the changes. Typically you would offer a service in a bundle and use this service in another bundle. This other bundle can then use a `ServiceTracker` or a blueprint service reference and this way react on the service life-cycle.

# php - 从 html 源代码中删除 div

> ID：12515121
> 
> 赞同：4
> 
> 时间：2012-09-20T14:43:37.000
> 
> 标签：php, html, formatting, code-formatting

我有很多 div 的 html 代码，并且想从这段代码中删除一些 div，这很难使用 `substr()`或类似的 php 字符串函数，也许是更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:44:45.873

strip_tags() 可能会有所帮助：

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T14:45:29.840

我建议您检查一个[PHP HTML 解析器](http://simplehtmldom.sourceforge.net/)以可靠地执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T14:48:04.500

你可以用javascript来做到这一点。只需给 div 唯一的 id，然后你就可以像这样编写一些简单的 javascript。

```
 document.getElementById('divid').remove(); 
```

**注意：确保在运行 remove() 之前元素已加载。**- 你可以用[jquery](http://jquery.com/)做到这一点。

```
$(document).ready(function(){
     document.getElementById('divid').remove();
}); 
```

提醒一下，如果您决定在文档加载后的某个时间添加元素，**然后**删除它们，您可以使用以下代码检查元素是否存在。（再次使用 jquery 库），也可以将 css 选择器与对象一起使用，就像您使用 jquery 一样。

```
if ($("#divid").length > 0){
    $('#divid').remove();
} 
```

如果说，该代码会变得很方便-您逐渐将元素添加到文档中，就像实时评论系统一样，您可以使用[setInterval()](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)来继续检查元素是否存在，如果存在，则将其删除。

* * *

如果您需要使用 php 执行此操作，那么 Brian Agnew 使用[PHP HTML 解析器](http://simplehtmldom.sourceforge.net/)的回答应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T14:47:11.677

您能否进一步详细说明您的用例？我会在 JS 中做到这一点 - 给你想要删除一个类的 div `.remove`，然后在 jQuery 中执行以下操作：

```
$(document).ready(function(){
     $('.remove').remove()
}); 
```

或者，在 php 中解析 HTML 并将其删除将有办法做到这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-20T14:48:48.863

[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)使用解析 HTML的绝佳机会。

```
$html = new DOMDocument();
$html->loadHTML($html_string); 
```

然后，您可以使用任何可用方法从文档中查找和删除元素，例如`getElementsByTagName`. 然后将它们从`$html`文档中删除并重新导出 ( `$html->saveHTML()`)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T14:51:35.637

```
>try this.. ;)

> str_replace("<div>","") and 
> str_replace("</div>","") 
```

# java - 使用 javamail 将字符串作为附件发送

> ID：12515123
> 
> 赞同：1
> 
> 时间：2012-09-20T14:43:55.790
> 
> 标签：java, jakarta-mail, email-attachments

我一直在努力寻找解决方案，但我做不到。这是整个事情。我写了以下代码

```
 MimeMessage message = new MimeMessage(session);
 message.setFrom(new InternetAddress(from));
 message.setRecipient(Message.RecipientType.TO, new InternetAddress(to));
 message.setSubject(subject);
 message.setSentDate(new Date());

 MimeBodyPart messagePart = new MimeBodyPart();
 messagePart.setContent(messageContent, "text/html");
 Multipart multipart = new MimeMultipart("mixed");
 multipart.addBodyPart(messagePart);

 MimeBodyPart attachmentPart = new MimeBodyPart();
 DataSource source = new ByteArrayDataSource(attachment.getBytes(), "text/plain");
 attachmentPart.setDataHandler(new DataHandler(source));
 attachmentPart.setFileName(attachmentFileName);
 multipart.addBodyPart(attachmentPart);
 message.setContent(multipart);

 try {
Transport.send(message);                
 } catch (Exception e) {
e.printStackTrace();
   } 
```

代码几乎是不言自明的。messagePart 是邮件， attachmentPart 是附件。但是这里的 messagePart 不是纯文本。它是 HTML。所以问题是如果我运行此代码邮件发送成功，但附件没有附加到邮件中。所以我的问题归结为这一点。是否可以同时发送 html 内容并将某些内容附加到邮件中。我被困在这里。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:05:54.823

你想添加

```
attachmentPart.setDisposition(Part.ATTACHMENT); 
```

`Part.ATTACHMENT`表示该零件应显示为附件。

`Part.INLINE`表示您希望将附件显示为邮件的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:25:49.593

我看不出您的代码有任何明显错误。

您如何确定邮件没有附件？

您可以通过添加“message.writeTo(System.out);”来准确查看 JavaMail 将发送的内容。就在您调用 Transport.send 之前。

您使用的是什么版本的 JavaMail？你用的是什么邮件服务器？一些邮件服务器（我在看你，Exchange）会将邮件重新格式化为他们认为应该的格式，即使它与您的预期不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T02:48:40.007

如果您**在 Google App Engine 上运行**并添加了一个虚拟文本部分，它会很好用。我不知道为什么虚拟文本部分使它起作用，但我遇到了完全相同的问题，并且添加一个虚拟文本部分也对我有用。

# android - NFC手机支付说明

> ID：12515124
> 
> 赞同：1
> 
> 时间：2012-09-20T14:43:59.653
> 
> 标签：android, payment-gateway, payment, nfc, payment-processing

我知道 NFC 是什么，并且已经对 NFC 移动支付进行了相当多的研究（即将手机靠近阅读器以像谷歌钱包一样进行支付）。我现在的问题是读者和信用卡公司或发行买家使用的借记卡的银行之间会发生什么。另一个正在努力解决的问题是读卡器与卡公司或银行之间交换数据的媒介。

我的问题是::

1) 当用户将手机带到读卡器前进行支付时，读卡器和银行或信用卡系统之间会发生什么。W 读卡器是否联系信用卡/银行系统进行验证？

2) 读卡器通过什么媒介联系信用卡公司或银行进行认证，并检查是否有足够的余额进行购买？读者是否通过互联网发送这些信息？

3）如果是火车票，读者如何知道票是有效的？它是否还与后端系统联系？如果是这样，在哪种媒体上？通过互联网还是什么？

我整天在谷歌上搜索这些答案，但我得到的所有文章都太模糊了。他们没有谈论支付阅读器与银行或信用卡公司之间发生的事情。

如果有人可以给我详细的描述或指向我回答这些问题的教程或其他问答，我会很高兴。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:53:26.947

*   在付款期间有四个“方”。银行、收单机构、商家和支付机构（如 Visa 或 MasterCard）。在付款过程中，商家通过 POS 接受您的付款。（销售点，带有接受您付款的读卡器的硬件）通信通过收单机构，然后通过支付组织（Visa...）的基础设施到达您的银行。该组织的角色是路由此信息并转移资金。每一步都涉及大量的密码学。

*   信用卡可以（但不必）要求银行进行身份验证和/或授权。有些卡可以在芯片内保持余额（它是安全的，没有物理方式以错误的方式访问或修改数据，离线授权更快），有些卡会向银行询问余额。可以根据许多变量（例如支付的金额）来决定是否向银行索取余额。身份验证也是如此。有时需要 PIN 码，有时不需要，它可以通过卡（离线 PIN 控制）和银行（在线 PIN 控制）进行验证。根据银行和支付组织之间的协议，有时，当银行无法访问（他们一方失败）时，组织可以以其名义授权一些交易。

*   最后一个问题没有单一的答案，即使与我为前两个提供的答案一样通用。它完全取决于实现。我敢打赌，您至少可以自己想出三个解决方案。

您感兴趣的问题之前被戳过：[https ://stackoverflow.com/a/12320799/1624636](https://stackoverflow.com/a/12320799/1624636)

一些谷歌搜索让我找到了这个：[http](http://www.firstdata.com/downloads/thought-leadership/payments101wp.pdf) ://www.firstdata.com/downloads/thought-leadership/payments101wp.pdf你可能会觉得它有帮助

您可能想熟悉 EMV 标准。退房：[http](http://www.emvco.com/best_practices.aspx?id=217) : //www.emvco.com/best_practices.aspx?id=217 让我警告你 - 这是一个相当大的阅读！

# objective-c - 正确的 if 语句不起作用，相同的语句在其他类中起作用

> ID：12515129
> 
> 赞同：-2
> 
> 时间：2012-09-20T14:44:30.737
> 
> 标签：objective-c, xcode, if-statement

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.title = category.categoryName;

    if (self.title == @"Haugesund Motiver" && !motivesLoaded) {
        MotivesDataModel *motiv = [[MotivesDataModel alloc] init];
        motiv.motiveName = @"ksaldkaldsk";
        [category.motives addObject:motiv];
        motivesLoaded = YES;
    }    
} 
```

为什么这不起作用？

我必须查看控制器，每个控制器都有一个 TableView。

1.st 视图控制器显示类别对象，其中包含一个名称和另一个名为 motives 的数组。

2.nd 视图控制器应该显示 categories.motives 数组。

类别对象与 segue 一起传递，并且工作正常。

在这里，如果之前未填充 nsmutablearray，我将尝试填充它。

但是 if 语句不起作用。每次加载视图时，它都会将对象添加到 motives 数组中，即使 motivesLoaded 布尔值更改为 YES

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:46:39.737

你不应该检查字符串的相等性`==`，这只是检查它们是否是同一个对象

你应该使用

```
[self.title isEqualToString:@"Haugesund Motiver"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:49:32.987

```
self.title == @"Haugesund Motiver" 
```

检查指针的相等性，因此如果 self.title 具有相同的名称，但有另一个 String @"Haugesund Motiver" 实例，则检查将失败，因此您应该使用 [NSString isEqualToString:] 方法

# javascript - 没有javascript的json数据的html表

> ID：12515130
> 
> 赞同：0
> 
> 时间：2012-09-20T14:44:33.770
> 
> 标签：javascript, django-templates, tornado

我想用 json 数据创建一个 html 表，而不使用我在 stackoverflow 上的其他问题中看到的 js 脚本。

我有这个结构：

```
function visualize(json_response) {
  var err = json_response['error'];
  if (err) {
    $("#chart_div").html("<div class='alert'>" + err + "</div>");
    return;
  }
  var data = json_response['data'];
  if (data.length == 0) {

    {% elif net.ntype == "ztc" and sens.type == 2 %}
    $("#chart_div").html("<div class='info'>No data received from this contact sensor!</div>");

  }

  $("#chart_div").html('<img src="{{ static_url('img/loading.gif') }}">');

  {% if net.ntype == "ztc" and sens.type == 2 %}

  {% for d in data %} 
     $("#chart_div").append("<td>{% d %}<td>"); 
```

}

这是我的js部分。相反，html 部分是一个简单的 div 块：

```
<div id="chart_div" style="width: 100%; height: 400px"></div> 
```

换句话说，我想将我的数据放入一个表中。但是我写的这个解决方案不起作用。我不知道我能做...有什么想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:27:05.673

`{% %}`用于模板指令，它必须是[Tornado 模板语法参考](http://www.tornadoweb.org/documentation/template.html#syntax-reference)中给出的指令之一。 `{{ }}`用于转义输出。

在行中：

```
 $("#chart_div").append("<td>{% d %}<td>"); 
```

`{% d %}`应该是`{{ d }}`（转义）或`{% raw d %}`（未转义）。您还需要结束 for 循环。

编辑：我刚刚又看了一遍，看起来您正在尝试访问 Tornado 模板代码中的 JavaScript 变量（正如 Chris Francis 指出的那样）。模板代码（在花括号中）在服务器端执行；它无法访问或了解 JavaScript。

在这种情况下，您可以只使用 JQuery 来遍历响应：

```
jQuery.each(data, function(index, value) {
   $("#chart_div").append("<td>" + value + "<td>"); 
}); 
```

# kinect - Kinect 在运行良好几秒钟后突然挂断。我该如何解决？

> ID：12515132
> 
> 赞同：1
> 
> 时间：2012-09-20T14:44:35.010
> 
> 标签：kinect, openni, openkinect

我尝试在我的 Mac 上使用“Kinect for Windows”。环境设置似乎进展顺利，但似乎有些问题。当我开始一些样本时，例如

```
OpenNI-Bin-Dev-MacOSX-v1.5.4.0/Samples/Bin/x64-Release/Sample-NiSimpleViewer 
```

或者其他，示例应用程序启动并且在开始时似乎运行良好，但在几秒钟（10 到 20 秒）后，应用程序屏幕中看到的移动停止并且不再工作。似乎应用程序无法从几秒钟过去的某个点从 Kinect 获取数据。

我不知道库或它们的依赖项，或者 Kinect 的硬件本身是否出了问题（至于硬件，无形损坏之类的），我真的很想知道如何检测它。

有人可以告诉我如何解决这个问题吗？

我的环境如下图所示：

*   Mac OS X v10.7.4（MacBook Air，核心 i5 1.6Ghz，4GB 内存）
*   Xcode 4.4.1
*   适用于 Windows 的 Kinect
*   OpenNI-Bin-Dev-MacOSX-v1.5.4.0
*   Sensor-Bin-MacOSX-v5.1.2.1
*   我在这里按照关于 libusb 的说明进行操作：http: [//openkinect.org/wiki/Getting_Started#Homebrew](http://openkinect.org/wiki/Getting_Started#Homebrew)

当我尝试使用 libfreenect（我知道它与 OpenNI+SensorKinect 是分开的）时，它的示例应用程序说“找到的设备数量：0”，这对我来说毫无意义，因为我肯定将我的 Kinect 连接到 MBA ......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:13:09.437

除非您启动到 Windows，否则忘记 Kinect for Windows。

关于 libfreenect 和 OpenNI，在大多数情况下您会使用其中一种，因此请考虑您需要哪些功能。

如果它是基本的 RGB+深度图像（可能还有电机和加速度计）访问 libfreenect 是您的选择。

如果您需要 RGB+深度图像和骨骼跟踪以及（手）手势（但没有电机、加速度计访问），请使用 OpenNI。请注意，如果您使用不稳定（开发）版本，您应该使用[Avin 的 SensorKinect 驱动程序](https://github.com/avin2/sensorkinect)。

干净安装 OpenNI 最简单的方法。

此外，如果有帮助，您可以使用像 Processing 或 OpenFrameworks 这样的创意编码框架。

*   对于处理，我推荐[SimpleOpenNI](http://code.google.com/p/simple-openni/)
*   对于 OpenFrameworks，您可以使用与 libfreenect 或 ofxOpenNI 相关联的 ofxKinect。下载[FutureTheatre Kinect Workshop wiki](http://futuretheater.net/wiki/Kinect_Workshop#Kinect_.2B_OpenFrameworks_Workshop)上打包的 OpenFrameworks，因为它包括插件和一些非常好的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:09:58.617

当您将 Kinect 设备连接到机器时，您是否为其提供了外部电源？该设备将显示为仅通过 USB 电源连接到计算机，但由于需要外部电源，因此无法传输数据。

还有你用的是什么 Kinect 传感器？如果它是新的 Kinect 设备（专为 Windows 设计），它们可能具有不同的设备签名，这可能会导致 OpenNI 驱动程序播放。我不是 100% 的，但我只用 XBox 360 传感器尝试过 OpenNI。

# macos - OSX Mountain Lion 本地主机问题

> ID：12515133
> 
> 赞同：3
> 
> 时间：2012-09-20T14:44:38.817
> 
> 标签：macos, apache, unix, localhost

今天，我学习了一些关于如何在 Mountain Lion 上运行一切的教程。

我已经安装了网络共享并启用了它，我还启用了php（mac自带的，我不知道更新它）。

所以我没有安装 MySQL 和 phpMyAdmin 就停在那里，因为 localhost 对我来说不能正常工作。

如果我输入

`http://localhost/`- 我明白了！

如果我输入

`http://localhost/~dvLden/`- 我得到我的网站作品

但是，如果我像这样打开一个项目：

```
http://localhost/~dvLden/test 
```

我得到一些奇怪的东西...

有时我会收到错误（取决于项目） Forbidden You don't have permission to access /~dvLden/test on this server。

有时网站可以工作，但很多东西都被破坏了（路径不正确），即使路径完全正确。

关于为什么会发生这种情况的任何线索？如果您需要更多信息，请告诉我！

编辑＃1：一些更新......

```
[Thu Sep 20 16:34:58 2012] [crit] [client ::1] (13)Permission denied: /Users/dvLden/Sites/test/slider/images/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable, referer: http://localhost/~dvLden/test/index.html

[Thu Sep 20 16:46:45 2012] [crit] [client ::1] (13)Permission denied: /Users/dvLden/Sites/test2/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:26:48.653

固定的。

问题是我之前无法访问的大多数项目都是在 Windows 上制作的。传输的所有文件夹都没有站点 chmod 644，我不知道为什么。

所以我只是为每个我无法打开的站点和每个“无效”的路径创建了新文件夹。

现在完美运行。

PS可能有一种方法可以对“站点”的所有子文件夹进行chmod，但我是mac的新手，所以我不知道。干杯和好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:52:13.073

chmod -R o=rwX,go=rX ~/站点

这正是我的诀窍 - 但我也需要更改我的主目录。之后

chmod -R o=rwX,go=rX /用户/

一切都像一个魅力......

# python - python 2.7.3 的 pygame

> ID：12515134
> 
> 赞同：3
> 
> 时间：2012-09-20T14:44:40.093
> 
> 标签：python, python-2.7, pygame

我已经在 Windows 7 上安装了 python 2.7.3，现在我想要 pygame。我什至安装了 pygame 1.92 a0 但它似乎没有工作。有人可以帮助解决这个问题吗？我也尝试过使用 pygame 1.9.1，但是当我在 gui 上输入“import pygame”时，我收到一条错误消息：

```
 Traceback (most recent call last):
    File "<pyshell#3>", line 1, in <module>
       import pygame
   ImportError: No module named pygame 
```

安装时是否需要设置任何路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:49:33.893

您将需要下载 pygame-1.9.2a0.win32-py2.7.msi 版本。[您可以在这个网站上](http://www.pygame.org/download.shtml)搜索它，或者点击[这里](http://pygame.org/ftp/pygame-1.9.2a0.win32-py2.7.msi)直接从这个页面下载。如果您下载正确，它应该可以正常运行。一定要先卸载旧版本的pygame。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-21T20:48:10.080

只需按照说明进行操作。希望它可以帮助你。

来源：[https ://inventwithpython.com/pygame/chapter1.html](https://inventwithpython.com/pygame/chapter1.html)

> 安装 Pygame
> 
> Pygame 不附带 Python。与 Python 一样，Pygame 也是免费提供的。您必须下载并安装 Pygame，这与下载和安装 Python 解释器一样简单。在 Web 浏览器中，转到 URL [https://www.pygame.org/download.shtml](https://www.pygame.org/download.shtml)。这些说明假设您拥有 Windows 操作系统，但 Pygame 对每个操作系统的工作方式都相同。您需要为您的操作系统和您安装的 Python 版本下载 Pygame 安装程序。
> 
> 您不想下载 Pygame 的“源代码”，而是为您的操作系统下载 Pygame“二进制文件”。对于 Windows，请下载 pygame-1.9.1.win32-py3.2.msi 文件。（这是 Windows 上 Python 3.2 的 Pygame。如果您安装了不同版本的 Python（例如 2.7 或 2.6），请下载适用于您的 Python 版本的 .msi 文件。）编写本书时 Pygame 的当前版本是1.9.1。如果您在网站上看到更新的版本，请下载并安装更新的 Pygame。
> 
> 对于 MacOS，请下载您拥有的 Python 版本的 .zip 或 .dmg 文件并运行它。
> 
> 对于 Linux，打开终端并运行：`sudo apt-get install python-pygame`.
> 
> 在 Windows 上，双击下载的文件以安装 Pygame。
> 
> 要检查 Pygame 是否正确安装，请在交互式 shell 中键入以下内容：
> 
> `>>> import pygame`
> 
> 如果按 Enter 键后没有出现任何内容，则说明 Pygame 已成功安装。如果出现错误`ImportError: No module named pygame`，请尝试再次安装 Pygame（并确保您输入`import pygame`正确。

# jquery - 如何知道加载事件中的 iframe 内容是 html 还是 json

> ID：12515135
> 
> 赞同：8
> 
> 时间：2012-09-20T14:44:41.140
> 
> 标签：jquery, json

我有一个绑定到 iframe 的加载事件的事件处理函数，我想知道在 iframe 中检索到的内容是 HTML 还是 JSON。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T19:56:38.733

经过一番研究，我发现知道 iframe 中加载了哪种内容的最可行方法是通过文档 DOM 元素的[contentType](http://help.dottoro.com/ljmwfwpo.php) / [mimeType](http://help.dottoro.com/ljkfceta.php)属性。我们可以通过不同的方式获得这个属性：

在负载处理函数内部（方式 1）：

```
var iframedocument = $(this).contents().get(0);
var contentType = iframedocument.contentType || iframedocument.mimeType; 
```

在负载处理函数内部（方式 2）：

```
var iframedocument  = this.contentDocument;
var contentType = iframedocument.contentType || iframedocument.mimeType; 
```

在负载处理函数内部或外部（方式 3）：

```
var iframe = document.getElementById('iframe_id');
var iframedocument  = iframe.contentDocument;
var contentType = iframedocument.contentType || iframedocument.mimeType; 
```

如果`contentType == 'application/json'`那么加载的文档是[JSON](https://stackoverflow.com/questions/477816/the-right-json-content-type)。如果`contentType == 'text/html'`那么文档是 HTML。

**附加说明：**这个想法来自 Geoff Wartz 对这个问题的回答：[如何使用 jquery 监听返回的 json 对象](https://stackoverflow.com/questions/4429576/how-to-listen-for-returned-json-object-with-jquery)该解决方案基于对另一个问题的建议答案：[如何从 iframe 获取内容类型？](https://stackoverflow.com/questions/12516146/how-to-get-content-type-from-an-iframe/12516304#12516304). 最后，我们必须使用`contentType`Mozilla Firefox 兼容性和`mimeType`IE。

# haskell - Haskell中带有父级的语法树

> ID：12515139
> 
> 赞同：1
> 
> 时间：2012-09-20T14:44:51.850
> 
> 标签：haskell, abstract-syntax-tree

我想在 Haskell 中实现一个 AST。我需要一个父引用，所以似乎不可能使用功能数据结构。我在[一篇文章](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.20.5286)中看到了以下内容。我们定义一个节点为：

```
type Tree = Node -> Node 
```

Node 允许我们通过 Key a 类型的键获取属性。关于这种模式有什么可读的吗？你能给我一些进一步的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:47:45.597

如果您想要一个具有循环自引用的纯数据结构，那么正如 delnan 在评论[中所说，通常的术语是“打结”](http://www.haskell.org/haskellwiki/Tying_the_Knot)。搜索该术语应该可以为您提供更多信息。

请注意，通过打结构建的数据结构很难（或不可能）以通常的方式“更新” - 使用非循环结构，您可以在基于它构建新结构时保留原始的片段，但会改变循环的任何部分都需要您重建整个循环。当然，这取决于你在做什么，这可能是也可能不是问题。

# python - 带有 slug 的 Django Tastypie 覆盖 URL

> ID：12515146
> 
> 赞同：0
> 
> 时间：2012-09-20T14:45:17.523
> 
> 标签：python, django, tastypie

我有一个类似的coce：

```
def override_urls(self):
    return [
        url(r"^(?P<resource_name>%s)/(?P<slug>[\w\d_.-]+)/$" % self._meta.resource_name, self.wrap_view('dispatch_detail'), name="api_dispatch_detail"),
    ] 
```

这会产生如下 URL：

```
/api/v1/nodes/<slug>/ 
```

`self.get_resource_uri(bundle)`除了返回之外，一切都很好`/api/v1/nodes/<id>/`，我无法有效地将当前 URL 与资源 URI 进行比较。

我究竟做错了什么？

## 解决方案：工作代码

我在这里实现了建议的解决方案： [https ://github.com/ninuxorg/nodeshot/blob/refactoring/nodeshot/core/base/resources.py](https://github.com/ninuxorg/nodeshot/blob/refactoring/nodeshot/core/base/resources.py)

欢迎任何额外的改进反馈。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T16:51:15.217

您可以覆盖`get_resource_uri`您的资源以返回正确的 uri。毕竟，正确的那个是带有蛞蝓的那个，因为那是你的资源捕获的（第一个）。

**更新**

这样做的正确方法实际上是跳过`override_urls`并将其放在资源的 Meta 上：

```
detail_uri_name = 'slug' 
```

**TLDR 背景**

我挖得更深了，看起来有一个更好的地方来实现这个。`get_resource_uri`（间接）调用的默认实现`self.detail_uri_kwargs`then `reverse`。

`detail_uri_kwargs`in的默认实现`ModelResource`只是查找`self._meta.detail_uri_name`（其名称不直观），然后从模型中获取该键。 `detail_uri_name`默认为`pk`.

如果您只是在此处提供不同的名称，则可以跳过 override_urls 和 get_resource_uri！

像这样的东西（基于OP评论中链接的代码）：

```
from tastypie.resources import ModelResource
from tastypie.bundle import Bundle

class BaseSlugResource(ModelResource):
    """ Base Model Resource using slug urls """

    class Meta:
        abstract = True
        detail_uri_name = 'slug' 
```

我不确定资源是否`Meta`是继承的（我猜他们不是），所以这可能不能作为基类工作。幸运的是，所需的一行可能可以很好地粘贴到需要它的每个资源中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:26:20.767

即使@dokkaebi 的答案被标记（并且部分）正确，我也想用一个工作示例来清理它。唯一缺少的部分是您仍然必须预先添加将被解析为列表等的[url 。](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#using-non-pk-data-for-your-urls)

```
from tastypie.resources import ModelResource
from myapp.models import SomeModel

class BaseSlugResource(ModelResource):
    """ Base Model Resource using slug urls """

    class Meta:
        queryset = SomeModel.objects.all()
        detail_uri_name = 'slug'

    def prepend_urls(self):
        return [
            url(r'^(?P<resource_name>%s)/(?P<slug>[\w\.-]+)/$' % self._meta.resource_name, self.wrap_view('dispatch_detail'), name='api_dispatch_detail'),
        ] 
```

这将显示正确的 resource_uri 列表以及资源获取。但是，您很可能会丢失 {schema} 资源（即 /api/posts/schema/），因为它也被视为 slug。

# php - Vim 和 php：我怎么知道我在哪个函数中？

> ID：12515153
> 
> 赞同：-2
> 
> 时间：2012-09-20T14:45:32.187
> 
> 标签：php, vim, vim-plugin

是否有任何插件或其他东西可以知道我目前在哪个功能中？

例如：假设我有一个名为 my_long_function($arg1, $arg2) 400 行代码的函数；我在它的中间（所以我实际上看不到名字）：可以显示名字吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:50:17.400

看看这个插件：

```
http://www.vim.org/scripts/script.php?script_id=3197 
```

如果您的函数有 400 行长，这似乎可以提供帮助。您可能想要重构一些代码，以免有这么长的函数。

# message - 如何在 CL 中捕获 AS400 系统错误消息并将其用作我自己的程序消息？

> ID：12515154
> 
> 赞同：2
> 
> 时间：2012-09-20T14:45:31.943
> 
> 标签：message, ibm-midrange

我正在编写一个 CL 程序，该程序会遇到很多错误，因为它将在存在各种问题的环境中执行，例如丢失对象（是的，这是故意的）。实际上，我不想监视这些可能的消息并绕过错误，而是希望重定向这些消息，以便它们可以用于程序消息并显示给用户。所以我想要的是在程序执行后，程序将所有错误消息显示在屏幕底部，而不是让它们弹出并中断执行。有可能这样做吗？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:21:49.373

这是我的标准 CL 错误处理过程。一般来说，我会使用 MONMSG inline 来处理我预计可能会出现的错误。通常，对于我预期的错误，我通常不会告诉最终用户它们。如果您需要这样做，请将 RCVMSG/SNDPGMMSG 对放入一个子例程中并调用该内联函数以将错误渗透到调用者。这个想法是接收诊断消息并将它们重新发送给调用者，然后对异常消息执行相同的操作。

```
 PGM

    DCL &MSGID  *CHAR 7    
    DCL &MSGDTA *CHAR 256 

    /* Trap all errors, and let the error routine handle */
    MONMSG (CPF0000 MCH0000) EXEC(GOTO ERROR)      

    /* processing happens here */
    /* if an unexpected error occurs, we drop to the error routine */

/* We expect this error, but tell the caller about it anyway */
dltf mylib/myfile
monmsg cpf2105 exec(do)
callsubr percolate
endoo

    /* end of processing */
    RETURN                                                    

            /* This is the error handling routine.  Basically it */       
            /* simply re-sends the messages back up to the       */       
            /* caller, so it dies "gracefully" instead of        */       
            /* giving a hard halt.                               */       
                           /* Re-send diagnostic messages */              
    ERROR:      RCVMSG     MSGTYPE(*DIAG) MSGDTA(&MSGDTA) MSGID(&MSGID)   
                IF         (&MSGID *EQ '       ') GOTO ERROR_ESC          
                SNDPGMMSG  MSGID(&MSGID) MSGF(QCPFMSG) MSGDTA(&MSGDTA) +  
                             MSGTYPE(*DIAG)                               
                MONMSG     (CPF0000 MCH0000)                              
                GOTO       ERROR                                          

                           /* Re-send escape message and RETURN */        
    ERROR_ESC:  RCVMSG     MSGTYPE(*EXCP) MSGDTA(&MSGDTA) MSGID(&MSGID)   
                SNDPGMMSG  MSGID(&MSGID) MSGF(QCPFMSG) MSGDTA(&MSGDTA) +  
                             MSGTYPE(*ESCAPE)                             
                MONMSG     (CPF0000 MCH0000)                              
                RETURN                                                    

                ENDPGM 
```

编辑：添加子文件消息队列来回答。

也许是子文件消息队列？DDS：

```
 A          R BMENUS                    SFL
 A*
 A                                      TEXT('Message subfile')
 A                                      SFLMSGRCD(20)
 A            WMSGK                     SFLMSGKEY
 A            WPGMQ                     SFLPGMQ
 A          R BMENUC                    SFLCTL(BMENUS)
 A*
 A                                      TEXT('Message subfile control recor-
 A                                      d')
 A                                      OVERLAY
 A                                      LOCK
 A                                      SFLDSP
 A                                      SFLINZ
 A                                      SFLSIZ(0006)
 A                                      SFLPAG(0003)
 A            WPGMQ                     SFLPGMQ 
```

中电：

```
 DCLF       FILE(BMENUFM)
         ...
         CHGVAR     &WPGMQ 'BMENU'
         ...
         SNDF       RCDFMT(BMENUC)
         SNDRCVF    RCDFMT(BMENUR) 
```

# javascript - 如何在此函数中获取声明为变量的函数名称？

> ID：12515155
> 
> 赞同：1
> 
> 时间：2012-09-20T14:45:34.417
> 
> 标签：javascript, reflection

例子：

```
var someObject = function () {
        return this;
    },
    someMethod = function (param) {
        'use strict';
       return /*method name*/;
    }; 
```

我可以获取方法的名称（在严格模式下）吗？

PS我希望用它来方便地记录javascript代码。

# authentication - Spring 单点登录 (SSO) 情况下的 CAS 工作流程

> ID：12515166
> 
> 赞同：1
> 
> 时间：2012-09-20T14:46:11.133
> 
> 标签：authentication, spring-mvc, single-sign-on, cas

我想知道 CAS 是如何工作的（需要工作流程）。想象：

1.  用户在 App1 上使用 CAS 进行身份验证（例如，example.com/app1）。
2.  用户转到另一个应用程序 (example.com/app2)。

每个应用程序都必须在页面顶部显示用户名。他们怎么知道的？如果只有一个应用程序，工作流程非常清晰：

1.  App1：当用户在没有认证的情况下浏览页面时，只显示“登录”链接作为用户名。
2.  App1：有一刻用户按下登录。
3.  App1：将用户重定向到 CAS
4.  CAS：请求用户的登录/通过
5.  CAS：用户输入登录名/密码
6.  CAS：将用户重定向回 App1
7.  App1：从 CAS 获取令牌和用户名（或 ID），并赋予该用户一些权限。完毕。

但是现在：App2（App3 等）如何知道用户已经通过身份验证？他们是否都必须将用户从每个页面重定向到 CAS 只是为了知道用户是否已经通过身份验证并请求他的名字？

在 Spring 的情况下，这将是一个巨大的重定向，而我有一些独立的应用程序，例如：

```
example.com/App1
example.com/App2
...
example.com/AppN 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T18:41:36.997

我还没有 10 声望，所以你需要检查工作流图像

[http://idms.rutgers.edu/cas/how_does_it_work.shtml](http://idms.rutgers.edu/cas/how_does_it_work.shtml)

当新用户最初登录到应用程序时，他们不会与应用程序建立会话。应用程序（通过 CAS 客户端）不会显示要求输入用户名和密码的登录表单，而是将浏览器重定向到 CAS 登录页面。

CAS 然后对用户进行身份验证。如果验证失败，CAS 登录页面将再次显示并显示错误消息。因此，在身份验证成功之前，不会将用户返回给应用程序。如果用户此时不确定如何继续，CAS 登录页面上有帮助台链接。一旦用户成功验证，CAS 会将浏览器重定向回您的应用程序。CAS 知道通过附加到 CAS 登录 url 的 {service} 参数重定向到哪里。

当 CAS 将经过身份验证的用户重定向回您的应用程序时，它会将 {ticket} 参数附加到您的 url。

返回给您的应用程序的票证是不透明的，这意味着它不包含对 CAS 服务器以外的任何人有用的信息。您的应用程序唯一能做的就是将此票证发送回 CAS 进行验证。

然后 CAS 将响应此票证不代表此服务的有效用户，或确认此票证证明身份验证。在后一种情况下，CAS 还将提供用户名，以便您知道用户的身份。

应用程序必须提供自己的会话管理。一旦用户通过身份验证，您的应用程序应该在会话中跟踪这一事实，这样您就不必使用 CAS 服务器重新对他们进行身份验证。通常，这与您直接从应用程序对用户进行身份验证相同。

每个应用程序都应提供自己的注销工具，这将使会话无效并要求用户重新验证进入应用程序。请注意，如果他们通过 myRutgers 门户使用 SSO，则无需重新输入用户名和密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:17:27.163

使用 CAS 意味着 CAS-Server 跟踪全局认证的用户（使用存储 Ticket Granting Ticket Id - TGT 的 cookie）。每个应用程序都必须维护自己的机制来跟踪主体会话和相应的信息。

因此，如果用户想要访问安全的应用程序 APP1（并且未经过身份验证），他将被重定向到 CAS-Server。如果不发送有效的 TGT，则会显示登录表单，否则（或在成功向 CAS-Server 进行身份验证后）生成服务票证 (ST)，必须将其提交给 APP1。在这里，此服务票证针对 CAS-Server 进行验证（使用服务器到服务器通信） - 如果有效，则返回 userId（可能还有其他信息）。现在由应用程序 APP1 根据 userId 创建一个主体并提供授权信息（例如，CAS-Server 针对 LDAP 进行身份验证，而 APP1 将用户数据存储在数据库中）。对 APP1 的所有后续请求不应再涉及 CAS-Server。

如果用户向 APP2 发出请求，则上述进程将再次重新启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:32:14.067

同步，

您是否尝试将您的问题发布到 cas-users [cas-user@lists.jasig.org] 邮件列表？

在过去的 6 个月里，我一直在使用 CAS，据我了解，App2（App3 等）如果没有重定向到 CAS，就无法了解用户属性。

您可以通过将用户属性与您的网络会话一起存储和/或通过在显示登录名的页面中嵌入 iframe-header 来避免将 App2 的所有页面置于 CAS 过滤器后面。

作为 CAS 贡献者的 Marvin 在 GitHub 上维护了一个出色的 CAS 客户端测试 web 应用程序，您可以在其中看到他是如何读取用户属性的。 [https://github.com/serac/java-cas-client-test](https://github.com/serac/java-cas-client-test)

# iphone - UITapGestureRecognizer.numberOfTapsRequired = 2 不工作

> ID：12515167
> 
> 赞同：0
> 
> 时间：2012-09-20T14:46:13.853
> 
> 标签：iphone, ios, uigesturerecognizer, uitapgesturerecognizer

我在单击和双击中为 UIImageView 添加了 UITapGestureRecognizer。单击方法 A 将调用，双击方法 B 将调用。

它仅第一次完美运行。

**第一次**

如果我单击 UIImageView，方法 A 会按预期调用。

如果我双击 UIImageView，方法 B 会按预期调用。

**第二次**

如果我单击 UIImageView，方法 A 会按预期调用。

如果我在 UIImageView 上双击，则不再调用方法 B 仅调用方法 A。我不知道我在哪里制造问题。

```
 UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideHandle:)];
[gestureRecognizer setDelegate:self];
[userResizableView addGestureRecognizer:gestureRecognizer];
[gestureRecognizer release];

UITapGestureRecognizer *gestureRecognizer1 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
gestureRecognizer1.numberOfTapsRequired = 2;

[gestureRecognizer1 setDelegate:self];
[userResizableView addGestureRecognizer:gestureRecognizer1];
[gestureRecognizer1 release];

[gestureRecognizer requireGestureRecognizerToFail:gestureRecognizer1]; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T14:58:46.393

我已经测试了你的代码，它运行良好！

您在释放gestureRecognizer1 后添加requireGestureRecognizerToFail。这不应该是一个问题，因为我在关注评论并编辑了这个答案后进行了测试，但试一试。也给变量和方法一些有意义的名字。

```
 UITapGestureRecognizer *doubleTapGestureRecognizer = [[UITapGestureRecognizer alloc]
                            initWithTarget:self action:@selector(handleDoubleTap:)];
    doubleTapGestureRecognizer.numberOfTapsRequired = 2;
    [userResizableView addGestureRecognizer:doubleTapGestureRecognizer];

    UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc]
                            initWithTarget:self action:@selector(handleSingleTap:)];
    singleTapGestureRecognizer.numberOfTapsRequired = 1;
    [singleTapGestureRecognizer requireGestureRecognizerToFail: doubleTapGestureRecognizer];
    [userResizableView addGestureRecognizer:singleTapGestureRecognizer];

    [doubleTapGestureRecognizer release];
    [singleTapGestureRecognizer release]; 
```

# iphone - 在进入应用程序之前扫描传入的流量/数据包

> ID：12515168
> 
> 赞同：-1
> 
> 时间：2012-09-20T14:46:23.510
> 
> 标签：iphone, ios, filter, packet-sniffers, profanity

我正在尝试开发一个应用程序（亵渎过滤器），它允许我在进入 Facebook、Twitter、短信等应用程序之前扫描进入 iPhone 的传入流量/数据包。这可能吗？如果可以，有人可以为我提供一个起点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:26:51.790

不幸的是，在非越狱手机上是不可能的。

为此，您需要访问网络堆栈（以便您能够通过或丢弃数据包）。这通常在操作系统的内核空间中完成（pf、osx 防火墙、littlesnich 是示例）。在原生 iOS 设备上无法进入内核空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:20:45.053

极不可能有任何代码可以通过 Apple 的审查，让您对其他应用程序发起中间人攻击，至少我希望没有。这种方法几乎将整个沙盒保护从水中吹了出来。

# c# - 创建其他语言的 C# SOAP API Consumable

> ID：12515170
> 
> 赞同：1
> 
> 时间：2012-09-20T14:46:38.800
> 
> 标签：c#, api, soap, service, wsdl

我一直在尝试在此处、MSDN 和 Google 上找到有关如何实现我自己的 SOAP API 的教程。我有一个用 C# 编写的应用程序，我希望它可以被 PHP 使用，以便来自 Web 的调用可以与应用程序交互。如何生成 WSDL 文件并将其绑定到我的应用程序，以便可以通过 SOAP 调用与之通信？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:49:41.580

我认为为此您只需要在 .net 中创建 WCF 服务，这将允许您使用任何语言的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-18T07:28:59.787

创建一个 ASP.Net Web 服务 .wsdl 文件以与各种应用程序进行通信。在 Windows IIS 服务器上托管 Web 服务并相应地配置端口，然后您可以使用地址和 Web 方法名称访问您正在使用的应用程序的端点。

# javascript - 设置输入内容失败

> ID：12515172
> 
> 赞同：0
> 
> 时间：2012-09-20T14:46:39.883
> 
> 标签：javascript, html, dom, input, innerhtml

我有一个 html 文本输入，我试图通过 if 语句更改其内容 - if 语句中的其他操作正在发生，这告诉我 if 语句正在达到此操作，但内容没有按指示更改 - 是否有我的代码中的错误？

HTML：

```
<input id="quest17" class="tb8" type="text" name="quest[17]" value="" size="40"> 
```

JavaScript：

```
document.getElementById('quest17').innerHTML = "new content"; 
```

问题是因为我也有课吗？如果是这样的话……老实说，我在这里不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:48:39.223

如果元素是输入，`innerHTML`是错误的方式，尝试设置`value`属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:48:45.170

```
document.getElementById('quest17').value = "new content"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:48:57.370

尝试`.value`代替 .innerHTML

```
document.getElementById('quest17').value = "new content"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:49:22.907

设置值而不是 innerHtml：

```
document.getElementById('quest17').value = "new content";​ 
```

示例 - [http://jsfiddle.net/infernalbadger/8JqkQ/](http://jsfiddle.net/infernalbadger/8JqkQ/)

# crystal-reports - 是否在任何地方指定了 Crystal Reports .RPT 文件格式？

> ID：12515181
> 
> 赞同：8
> 
> 时间：2012-09-20T14:47:15.197
> 
> 标签：crystal-reports

是否有任何关于 Crystal .RPT 文件格式结构的文档？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-04T14:26:13.333

使用免费的 SDK：

[http://scn.sap.com/docs/DOC-27465](http://scn.sap.com/docs/DOC-27465)

SDK 让您可以阅读应用程序中的所有报告定义详细信息。

# php - 单击时发出服务器请求以更改 php 变量

> ID：12515182
> 
> 赞同：0
> 
> 时间：2012-09-20T14:47:15.413
> 
> 标签：php, javascript, jquery, html

我以为我在前面的问题中解决了这个问题，但它仍然不起作用。如果管理员单击按钮，我想更改 php 变量（由 var b1 和 var b2 调用的 $start 和 $end）。在此之后，每个访问者都应该可以使用新代码，因此它应该发出服务器请求。这是我更新的代码：

```
<?php
  if(date('w') == 4){ // day 2 = Tuesday

$start = strtotime('9:30');
$end = strtotime('12:30');
$timenow = date('U'); 
if ($timenow >= $start && $timenow <= $end) { 
 echo'<div id="iar_eu">';
echo quick_chat(200, 'default', 1, 'left', 0, 0, 1, 1, 1);
 echo'</div>';
 } } 
 ?>

</div>

<?php if ( is_user_logged_in() ) { ?>
<input type="submit" value="Start Chat" id="start_chat" style="position: absolute; top: 30px; left: 10px;" />
<?php
 } ?> 

  <script type="text/javascript">

if(jQuery('#start_chat').data('clicked')) {
   // change var b1 and b2
  $.ajax({
    type: "POST",
    url: "/web/htdocs/www.fattorefamiglia.com/home/wp-content/themes/child_care_creative/chat.php",
    dataType: 'json',
    data: { b1: "1:00", b2: "23:00" }
}).done(function(data) {
    b1 = data.b1;
    b2 = data.b2;
});}

else {
   $.ajax({
    type: "POST",
    url: "/web/htdocs/www.fattorefamiglia.com/home/wp-content/themes/child_care_creative/chat.php",
    dataType: 'json',
    data: { b1: "9:00", b2: "18:00" }
}).done(function(data) {
    b1 = data.b1;
    b2 = data.b2;
});}

jQuery('#start_chat').click(function(){
  $(this).data('clicked', true);

  var b1 = '<?php echo $start; ?>';
  var b2 = '<?php echo $end; ?>';

});

</script> 
```

聊天.php：

```
<?php
// variables
if (!empty($_POST)) {
    $data['b1'] = $_POST['b1'];
    $data['b2'] = $_POST['b2'];
}

// to not lose them
$_SESSION['chat'] = $data;

// to keep it compatible with your old code
$start = $data['b1'];
$end = $data['b2'];

// send the JSON formatted output
echo json_encode($data);

?> 
```

当我单击按钮时没有任何反应。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:15:14.413

使用 jQuery 的方式存在问题。所有 jQuery 引用都应该在仅在页面准备好后调用的函数中进行，或者在确保页面准备就绪的包装器中进行。

例如，这段代码需要被包装：

```
jQuery('#start_chat').click(function(){
  $(this).data('clicked', true);
  var b1 = '<?php echo $start; ?>';
  var b2 = '<?php echo $end; ?>';
}); 
```

像这样：

```
jQuery(function(){
  jQuery('#start_chat').click(function(){
    $(this).data('clicked', true);
    var b1 = '<?php echo $start; ?>'
    var b2 = '<?php echo $end; ?>';
  });
}); 
```

在这里设置`.data()`不会对你有任何好处。由于该方法的工作方式，您将一些信息设置为实际 var 而不是元素。

但是，您决定发出 AJAX 请求的方式还有另一个问题，只需在其中放置一个 if 语句就不会实现。你需要一个监听器来让一个动作真正发生。但是，与其深入探讨，为什么不简化并这样做呢？

```
<script type="text/javascript">
var b1 = '<?= $start ?>', b2 = '<?= $end ?>';

$(function(){
  $('#start_chat').click(function(){
        $.post('/web/htdocs/www.fattorefamiglia.com/home/wp-content/themes/child_care_creative/chat.php', { b1: '1:00', b2: '23:00' }, 
            function(data) {
                b1 = data.b1;
                b2 = data.b2;
            }, 'json');
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:00:05.480

这条线

```
if(jQuery('#start_chat').data('clicked')) { 
```

永远不会为真，因为在单击`.data('clicked')`之前未设置，`#start_chat`这始终会在检查完成后发生。

你需要重新考虑你想要完成的过程。

# objective-c - NSXMLParser 无法正确获取元素的内容

> ID：12515183
> 
> 赞同：1
> 
> 时间：2012-09-20T14:47:20.503
> 
> 标签：objective-c, xml, nsxmlparser

我有以下 XMLParser，但是当我尝试运行它时，它无法正常工作。

```
- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementname isEqualToString:@"results"])
    {
        currentJob = [SearchResult alloc];
    }

}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if ([elementname isEqualToString:@"jobTitle"])
    {
        currentJob.jobTitle = currentNodeContent;
    }

    if ([elementname isEqualToString:@"location"])
    {
        currentJob.shortAddress = currentNodeContent;
    }

    if ([elementname isEqualToString:@"companyName"])
    {
        currentJob.employer = currentNodeContent;
    }

    if ([elementname isEqualToString:@"results"])
    {
        [self.jobs addObject:currentJob];
        currentJob = nil;
        currentNodeContent = nil;
    }
} 
```

这是我的 foundCharakter 方法：

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

输出不是从头开始，而是从字符串的中间开始......我只是不明白，为什么有些结果看起来不错，而有些结果却没有。

我究竟做错了什么 ？如何正确解析 xml？

任何帮助将不胜感激。

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:39:42.787

我使用了以下代码并且现在可以使用：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

     if(!elementContentString) 
     elementContentString = [[NSMutableString alloc] initWithString:string]; 
     else 
    [elementContentString appendString:string];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:04:08.673

我认为您的代码没有任何问题，它在我的最后工作正常。我正在使用 twitter api 获取 xml，它给了我正确的输出。

# c# - 这是 .NET 4.5 的 WhenAll 的正确 .NET 4 实现吗？

> ID：12515184
> 
> 赞同：4
> 
> 时间：2012-09-20T14:47:21.983
> 
> 标签：c#, multithreading, task-parallel-library

我正在使用 SignalR。Hub 上的函数通常返回一个任务。我现在有一个功能，可以将连接添加到一组组。我想返回一个代表所有这些任务的任务。

我为此找到了一个完美的函数：Task.WhenAll。然而，这是 .NET 4.5 中的一个新功能，我仍然停留在 .NET 4 上。

因此，我决定编写自己的版本，直到我们可以迁移到 .NET 4.5。因为在多线程（例如线程池的东西）方面经常有一些警告，我不确定我的实现是否正确：

```
public static Task WhenAll(IEnumerable<Task> tasks)
{
    return Task.Factory.StartNew(() => Task.WaitAll(tasks.ToArray()));
} 
```

在功能上，我认为它可以工作，但是我没有为新任务获得额外的阻塞线程吗？还是这是不可避免的？

编辑：这是我将如何与 SignalR 一起使用它：

```
public static Task Add(this IGroupManager groupManager, string connectionId,
                                                   IEnumerable<string> groups)
{
   return WhenAll(groups.Select(group => groupManager.Add(connectionId, group)));
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T14:54:20.010

您的解决方案可以正常工作，但您是对的，它会一直阻塞一个线程。

我认为在 .Net 4.0 上有效实施的最简单方法`WhenAll()`是使用[`ContinueWhenAll()`](http://msdn.microsoft.com/en-us/library/dd321473%28v=vs.100%29). `Task`它在集合中的所有 s 都完成时执行一个动作，并返回一个`Task`表示该动作的值。既然我们只想要那个`Task`，我们不需要这个动作，传递一个空的 lambda 就可以了：

```
public static Task WhenAll(IEnumerable<Task> tasks)
{
    return Task.Factory.ContinueWhenAll(tasks.ToArray(), _ => {});
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T15:23:35.633

当您以.Net 4.0为目标时，如果您可以使用VS2012，那么更简单/更好的选择（恕我直言）是使用NuGet安装[异步目标包](http://nuget.org/packages/Microsoft.CompilerServices.AsyncTargetingPack/1.0.0)，然后您可以使用WhenAll（[在](http://msdn.microsoft.com/en-us/vstudio/hh377676.aspx)这种情况下为TaskEx.WhenAll，因为它无法修改 4.0 框架中的任务）。

作为一个重要的额外奖励，您还可以[在 .Net 4.0 代码中使用 async/await](https://stackoverflow.com/questions/9110472/using-async-await-on-net-4) :)

# windows-phone-7 - 通过在 windows phone 7 中提供位置地址获取经度和纬度

> ID：12515185
> 
> 赞同：0
> 
> 时间：2012-09-20T14:47:27.777
> 
> 标签：windows-phone-7

我想通过在 windows phone 应用程序开发中提供位置地址来获取地理位置。??//

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:49:14.763

使用[Bing 地图地理编码服务](http://msdn.microsoft.com/en-us/library/cc966793.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:10:31.110

1.  首先取一个文本块保存并查看坐标。
2.  现在将其命名为 txtBlock1 。

现在您可以在 Map Hold 事件中添加以下代码。

握住鼠标的点。它将向您显示经度和纬度的坐标。

您可以在任何地方将它们用作字符串或位置

mapMain.Hold += (s, e) =>

```
 {
                    Point p = e.GetPosition(this.mapMain);

                    GeoCoordinate geo = new GeoCoordinate();

                    geo = mapMain.ViewportPointToLocation(p);

                    txtBlock1.text = geo.ToString();

                }; 
```

希望能帮助到你... ：-）

# c# - 将 ASP.Net 网站项目从一台计算机转移到另一台计算机

> ID：12515188
> 
> 赞同：-2
> 
> 时间：2012-09-20T14:47:37.630
> 
> 标签：c#, asp.net, sql-server-2012

我一直在我的电脑上做一个项目，我想把它转移到我的笔记本电脑上。该项目是 C# 中的 ASP.Net 网站项目。我正在使用 SQL Server 2012 在我的数据库中保存我的数据库和 Asp.net 用户管理表。

最简单的方法是什么，因为我已经备份了我的数据库并将 ASP.net 网站文件夹复制到我的笔记本电脑上并更改了数据源，但是我遇到了一些错误，尤其是在它的 asp.net 配置页面上由于转移，还删除了我的角色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:57:31.900

如果我理解你的正确，你需要将 ASP.NET 成员数据库部署到新的项目位置。您需要使用一组工具和命令。

您将需要构建一个如下所示的命令行：

```
C:\Program Files\IIS\Microsoft Web Deploy\msdeploy.exe" -verb:sync 
 -source:dbfullsql=" [your connection string] " 
 -dest:dbfullsql="c:\temp\InsertIntoAspNetDB.sql 
```

同样，确切的**路径和命令将取决于您的本地配置。**

您可以从 MSDN 获得更多详细信息 - [How to: Deploy a Database With a Web Application Project](http://msdn.microsoft.com/en-us/library/dd465343%28v=vs.100%29.aspx)

# css - 需要在浏览器中水平滚动并在底部截断空白空间

> ID：12515194
> 
> 赞同：0
> 
> 时间：2012-09-20T14:47:58.543
> 
> 标签：css, browser, html-table, horizontal-scrolling, dropdownbox

我在表格中有这个下拉列表。下拉列表是 1 项的长列表（90 个字符）。其他的要短得多。

这是一个生成的页面，因此将有比列出的记录更多的记录。我能够删除页面底部的空白，但是我丢失了浏览器上的水平滚动。我想在浏览器中滚动以查看表格的右侧。

1.  如何删除表格下方的空白并保持浏览器上的水平滚动？
2.  如何在浏览器而不是表格上获得水平滚动？

* * *

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml2/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<html Lang="en">
<head>

<title>test_Scroll</title>

 <style type="text/css">
#wrappergo { background:#ffffff;}
.main_clearr{
  clear:both;
}
table.myview{
  width:96%;
  margin: 0px auto;
  border-collapse: collapse; 
  border-width:1px 1px 1px 1px;
  overflow:visible;
  overflow:auto;

    border-color: #000;
    border-style: solid;
}
table.myview td{
  margin:3px 2px 2px 4px;
}

 td.tblnormal_1_4em
{
    FONT-WEIGHT: normal;
    FONT-SIZE: 1.4em;
    COLOR: #000000;
    font-family:'Rockwell',arial, verdana, sans-serif;
    BACKGROUND-COLOR: #ffffff;
}
tr>th, tr>td {
   text-align: center;
   vertical-align:top;
   font-family: Rockwell, Verdana, Arial, Helvetica, sans-serif;
   color: #000000;
   FONT-SIZE: 1.0em;
} 
th+th, td+td {
  text-align: left;
  padding-left: 150px;

} 
th+th+th, td+td+td {
  padding-left: 0px;
  text-align: right;
} 

.cssdropdown{
    height:auto;
    FONT-SIZE: 1em;
    COLOR: #000000;
    font-family:'Rockwell',arial, verdana, sans-serif;
    BACKGROUND-COLOR: #ffffff;
}
.contentmain {
padding:10px 20px 0px 20px;
}
#outerdiv {float:left; width:99%; background:#ffffff;
padding-bottom:32767px; margin-bottom:-32767px;
}

 </style>

<!--[if lte IE 7]>
<style type="text/css">
body {word-wrap:break-word;}
#outerdiv {float:left; width:75.8%; background:#ffffff;}

/* for IE6 */
* html #wrappersn {display:inline-block;}
</style>
<![endif]-->
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#800000" vlink="#800000" alink="#800000" >

<div class="main_clearr"></div>
<div id="wrappergo"> 
<div id="outerdiv">
<div class="contentmain">
<form method="Post" name="form3"    >
<table class="myview"  border="1"   >
<thead>
<tr>
    <th width="10%">
    Country</th>
    <th width="15%" >
    State</th>
    <th width="20%" >
    City</th>
    <th width="50%" >
    School&nbsp;&nbsp;</th></tr>
</thead>
<tbody>
<tr><td colspan="4">The testing data</td></tr>
<tr><td class="tblnormal_1_4em">USA</td><td class="tblnormal_1_4em">Pennsylvania_PN&nbsp;</td><td class="tblnormal_1_4em">Pittsburg</td>
<td class="tblnormal_1_4em">&nbsp;
<select name="ohighschool" class="cssdropdown">
<option value="0"  SELECTED     >Select Lunch</option>
<option value="2"> Healthy Lunch Deluxe Supreme (This will be the longest line in this dropdown 90 characters)</option>
<option value="3"> Healthy Lunch Express</option>
</select>
</td></tr>
</tbody>
</table>
</form>

</div> <!-- end contentmain-->

</div> <!-- end outerdiv-->
</div><!-- #wrappersn -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:54:25.040

如果内容比浏览器窗口宽，您会看到一个滚动条。这是自动发生的。

你的桌子下面没有“空白”——那只是未被占用的浏览器窗口的剩余部分。

# c# - 弃用 Dynamics CRM 中的选项列表项

> ID：12515199
> 
> 赞同：2
> 
> 时间：2012-09-20T14:48:09.257
> 
> 标签：c#, javascript, dynamics-crm-2011, deprecated

使用 CRM 系统，能够“弃用”选项列表项很有用。通常，用户无法为新记录选择已弃用的选项列表项目，但会正确显示仍引用它们的旧记录。这通常比删除选项列表项更方便，因为不需要更新历史记录。

一个例子：想象一个动物的选择列表，用来记录人们最喜欢的动物。一段时间后，我们想从列表中删除“Chinchilla”（出于某种原因），因此我们弃用了它。从那时起，“Chinchilla”不再是新记录选择列表中的选项。但是当查看那些最喜欢的动物是龙猫的人的旧记录时，它仍然显示正确。

在 Dynamics CRM 2011 中执行此操作的好方法是什么？

我发现了[Shoaib Faruq 的一篇很好的博客文章，](http://shoaibfaruq.wordpress.com/2011/12/21/to-make-an-attribute-obsoletedelete-in-dropdown-list-picklist-in-crm/)描述了如何在 Dynamics CRM 4 中执行此操作，但它涉及 OnLoad 事件中的自定义 javascript，我想知道是否有更简洁的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:22:42.923

我相信 JavaScript 将是这里的最佳选择。我真的想不出更好的方法来实现这一点。

# extjs - ExtJS TreeGrid 自动列宽

> ID：12515201
> 
> 赞同：1
> 
> 时间：2012-09-20T14:48:10.990
> 
> 标签：extjs, extjs3

如何使列在 ExtJS TreeGrid 中使用自动宽度？

我正在使用 ExtJS 3.3.1；TreeGrid 是从 TreePanel 扩展的用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T19:39:11.897

在 ExtJS 4.2.1 中，可以通过在列标题上使用“flex”属性来实现结果。

感谢@Reimius 提供线索。

# python - 通过两个单独的域访问 Django Web 应用程序

> ID：12515204
> 
> 赞同：2
> 
> 时间：2012-09-20T14:48:16.467
> 
> 标签：python, django, apache, cross-domain

如何最好地将 Django Web 应用程序托管在同一台服务器上，但用于两个不同的域？

我有一个使用 Apache+mod_wsgi 部署的 Django Web 应用程序，我想通过两个单独的域（例如 wwww.mydomain.com 和 www.otherdomain.com）访问它。两个域共享相同的数据库和用户帐户，但具有特定于域的功能（主要是美学，显示不同的模板、图形、一些额外的工具等）。

每个域也有自己的 SSL 证书。用户也有可能在域之间被反弹（例如，他们从 mydomain.com 开始，然后他们“启用”将他们带到 otherdomain.com 的功能）。

起初我认为我所要做的就是将域附加到我的 Apache conf 文件中的 ServerAlias 指令中。例如`ServerAlias *mydomain.com *otherdomain.com`。但是，我遇到了一些问题。

1.  如果我没看错[的](http://www.digicert.com/ssl-support/apache-multiple-ssl-certificates-using-sni.htm)话，一个 Apache 部分只能支持**一个**域的证书（不包括子域的通配符证书），所以为了在两个域上支持 HTTPS，我需要复制我的，交换不同的证书信息对于第二个域。

2.  为了正确跟踪 cookie，我需要设置`SESSION_COOKIE_DOMAIN`和`CSRF_COOKIE_DOMAIN`到正在使用的域。但是，每个 settings.py 只能执行一次，因此[此处](https://stackoverflow.com/questions/3380020/changing-django-settings-variable-dynamically-based-on-request-for-multiple-site)概述，我需要创建重复的 settings.py 文件（例如 settings_mydomain.py 和 settings_otherdomain.py）以及重复的 django.wsgi 文件，每个文件都使用适当的设置模块。

3.  在默认设置下，如果用户从一个域跳到另一个域，他们将丢失所有 cookie，导致他们在登录后被注销。我不确定如何最好地解决这个问题。由于用户被 Django 视图重定向，起初我想我可以复制 cookie，将旧域换成新域。另一个想法是将 cookie 复制到数据库表中，使用一次性查找哈希进行索引（例如，与 Django 进行注册确认的方式相同），并将此哈希包含在重定向中，然后应用程序将使用该哈希来查找 cookie 和将它们设置在客户端中。这些中的任何一个都可以吗？

这三个问题有没有更好的解决方案？还有其他我忽略的问题或问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:14:12.907

一个快速修复将是使用多个[Apache 虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/)块，例如

```
<VirtualHost ´your server IP here´:´server port´>
  ServerName mydomain.com
  WSGIDaemonProcess mydomain display-name=mydomain
  WSGIProcessGroup mydomain
  WSGIScriptAlias / /path/to/your/django/project/wsgi.py
  Alias /static /path/to/your/django/project/static/
</VirtualHost>

<VirtualHost ´your server IP here´:´server port´>
  ServerName otherdomain.com
  WSGIDaemonProcess otherdomain display-name=otherdomain
  WSGIProcessGroup otherdomain
  WSGIScriptAlias / /path/to/same/django/project/as/above/wsgi.py
  Alias /static /path/to/your/django/project/static/
</VirtualHost> 
```

然后使用[HttpRequest.META](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.META) SERVER_NAME 中的值作为模板文件夹中的文件夹分隔符，并在请求模板时使用，例如

```
def my_server_sensitive_view(request):
  return render_to_response('%(SERVER_NAME)s/index.html' % request.META, 
    {"foo": "bar"}) 
```

如果您需要在两个站点之间分离内容但仍需要在它们之间交叉发布，那么使用[django.contrib.sites](https://docs.djangoproject.com/en/dev/ref/contrib/sites/)您将能够设置多个域。

# android - 为什么我的 android 中的 webview 不能正确显示我的 html 文件？

> ID：12515215
> 
> 赞同：1
> 
> 时间：2012-09-20T14:48:50.427
> 
> 标签：android, html, webview

我有一个显示方程式的 html 文件。html 文件使用这个库 ( [http://mathscribe.com/author/jqmath.html](http://mathscribe.com/author/jqmath.html) )。在网络浏览器中一切正常。问题是当我将该 html 文件加载到我的应用程序的 webview 中时。正文中的实际 html 命令不会像在 Web 浏览器中那样转换为等式。这里有什么问题？

我将 html 文件和 jquery 库放在我的应用程序的 assets 文件夹中。加载html文件的命令是：

```
mWebView.loadUrl("file:///android_asset/quadratic.html"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:51:57.880

您是否在 webview 上启用了 javascript？

```
mWebView.getSettings().setJavaScriptEnabled(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:53:29.803

尝试`Javascript`在`WebView`

`someWebView.getSettings().setJavaScriptEnabled(true);`

让我们知道它是否有效:)

# jquery - Jquery插件中的千位和小数分隔符

> ID：12515224
> 
> 赞同：0
> 
> 时间：2012-09-20T14:49:19.023
> 
> 标签：jquery, jquery-plugins, plugins

我需要有关如何使其与“。”一起使用此[jQuery 插件的帮助。](http://jsfiddle.net/z2qps/1/)作为千位分隔符和“，”作为小数分隔符。我的 Jquery 知识不足以做到这一点，我试图查看其他示例以了解如何实现，但我没有找到它们的一部分[，](http://jsbin.com/ehuzes/5/edit)这与我的情况不完全一样，因为它基于点击但至少有数千个和小数分隔符。

如果您可以编辑此[Jquery 插件](http://jsfiddle.net/z2qps/1/)或给我发送一些示例以了解如何操作，我将很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:25:17.120

我们可以为您编写代码，但这不是本网站的用途。如果您需要我们这样做，请雇用我们 :-)

现在我将为您指明正确的方向，以便您自己实现这一目标。

对于一些基本的 JavaScript 和 jQuery 学习，试试[codecademy.com](http://www.codecademy.com)。它会教你一些基础知识，你将能够学到一些东西。在我看来，这是一个非常棒的网站，您可以自己选择主题，从基本的 HTML 到高级 JavaScript。

要制作这个附加组件，您需要一些关于 Javascript 中的数学知识，Mozilla 确实有一个非常好的站点，可以[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math)获取有关此信息的信息。您将需要一些使用[jQuery.animate()](http://api.jquery.com/animate/)的基本技能。一些[RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)和 javascript [.replace()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)。

[这里](https://github.com/alonzzzo/cashRegister/blob/master/jquery.cashRegister.js)有一个插件几乎可以满足您的需求。试试看它做了什么，但尝试自己编写代码，你会学到很多东西。

分隔符部分也已经在您链接的另一个插件中。但是这个是使用 mooTools 而不是 jQuery 编写的。您将需要了解这两个功能。

```
addSeparators: function(number)
  {
    var parts = number.toString().split(this.options.decimalSeparator);

    var dollars = parts[0];
    if (parts[1]) { var cents = parts[1]; }

    var rgx = /(\d+)(\d{3})/;

    while (rgx.test(dollars)) {
        dollars = dollars.replace(rgx, '$1' + this.options.thousandsSeparator + '$2');
    }

    var output = dollars;

    if (this.options.precision > 0) {
      if (cents) {
        output += this.options.decimalSeparator + cents;
      } else {
        output += '0' * this.options.precision;
      }
    }

    return output;
  },

  stripSeparators: function(string) {
    var result = string.replace(this.options.decimalSeparator, '.');
    var pattern = new RegExp(this.options.thousandsSeparator, 'g');
    var matches = result.match(pattern)

    if (matches) {
      matches.each(function() {
        result = string.replace(pattern, '');
      });
    }

    return result;
  } 
```

我希望这对你有帮助，祝你好运！

# mysql - SUM() 所有结果（无 group by 子句）

> ID：12515233
> 
> 赞同：10
> 
> 时间：2012-09-20T14:49:43.343
> 
> 标签：mysql, sql, group-by

我有一个奇怪的错误。我有如下所示的 SQL 代码：

```
SELECT 
    adverse_reaction_type_id,
    SUM(CASE adverse_reaction_type_id WHEN 1 THEN `number` ELSE 0 END ) line, 
    SUM(CASE adverse_reaction_type_id WHEN 2 THEN `number` ELSE 0 END ) drug 
FROM
    core_reports_adverse_reactions, 
    ...
WHERE 
    ... 
```

这适用于我的 MAMP 安装，但不适用于我的远程服务器。我假设某处有一个配置选项阻止它工作。

这是我得到的错误：

> 如果没有 GROUP BY 子句，则混合没有 GROUP 列的 GROUP 列 (MIN(),MAX(),COUNT(),...) 是非法的

我知道错误告诉我什么，但问题是我**不想**按任何东西分组。我想获得 where 位（为简洁起见在上面删除）匹配的所有结果，然后返回列`SUM()`的`number`（作为`line`或`drug`基于`CASE`子句）。

所以本质上，无论子句**匹配**什么，`WHERE`我想要返回的都是**1**行：

```
line | drug
-----------
10   | 32 
```

有没有办法解决这个问题？或者我可以的任何方式`GROUP BY nothing`或什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T14:58:02.783

您可以`GROUP`在运行`SELECT`.

例如`GROUP BY NULL`：

```
mysql> select SUM(CASE WHEN product_id = 0 THEN -1 ELSE product_id END) AS sumprod, SUM(quantity) AS sumquant FROM orders GROUP BY NULL;
+---------+----------+
| sumprod | sumquant |
+---------+----------+
|       4 |        8 |
+---------+----------+
1 row in set (0.00 sec)

mysql> select version();
+-------------+
| version()   |
+-------------+
| 5.5.25a-log |
+-------------+
1 row in set (0.00 sec) 
```

*但通常这个错误*意味着**至少有一列**未分组。

 *可能是 MySQL 的生产版本被您在聚合函数中使用 CASE 吓了一跳。*

# iphone - iOS 6 - 我怎样才能获得“释放刷新”动画的东西？像在邮件中？

> ID：12515236
> 
> 赞同：4
> 
> 时间：2012-09-20T14:49:49.890
> 
> 标签：iphone, ipad, uiview, ios6, uirefreshcontrol

在邮件应用程序中，我们现在可以`drag the view down`和`release to refresh`，如下图所示。

这是我可以从 SDK 获得的标准东西吗？

谢谢

![在此处输入图像描述](../Images/fd3b2fb026e986e2fa59debfd203975e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:52:42.813

使用新的 iOS6[`UIRefreshControl`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIRefreshControl_class/Reference/Reference.html)类来做到这一点。

```
yourUITableViewController.refreshControl = [[[UIRefreshControl alloc] init] autorelease];
[yourUITableViewController.refreshControl addTarget:yourTableView action:@selector(reloadData) forControlEvent:UIControlEventValueChanged]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T07:03:06.690

如果您需要自定义刷新控制，

[ODRefreshControl](https://github.com/Sephiroth87/ODRefreshControl)

谢谢，

纳文山

# android - Android连接外部sql数据库

> ID：12515239
> 
> 赞同：1
> 
> 时间：2012-09-20T14:49:55.233
> 
> 标签：android, sql, database, connect

我想连接到我本地网络机器中的 SQL 数据库服务器。我想从我的 Android 应用程序连接和访问 SQL 服务器

如何连接到 sql server 2008 数据库？例如，在：

```
ip: 192.168.1.22
user: test
pass: test
DBname: MaisRitmo
instance=SQLEXPRESS 
```

任何人都可以帮忙，或者给我一个示例代码吗？

谢谢

# objective-c - 重置/修复 Xcode 4.5 代码完成

> ID：12515241
> 
> 赞同：4
> 
> 时间：2012-09-20T14:50:00.100
> 
> 标签：objective-c, xcode, code-completion

Xcode 4.5 中的新“功能”之一应该是大大改进了代码完成。它应该学习你经常输入的内容，并更频繁地提供这些作为代码完成的选项。

但是，对我来说，这根本行不通。

众所周知的糟糕的代码完成词之一是 NSString。

当我输入它时，我得到...

```
NS - NSAddedPersistentStoresKey
NSS - NSSaveChangesRequest
NSSt - NSStoreModelVersionHashesKey
NSStr - NSStream
NSStri - NSStrikethroughStyleAttributeName
NSStrin - NSString 
```

我从未使用过任何其他建议，其中大多数我实际上并不确定它们是什么。我一天使用 NSString 很多次，为什么不先建议呢？事实上，除了 NSSet 之外，我认为我从未使用过另一个以 NSS 开头的类。

此外，当我在寻找 NSLog() 时，当我输入 NSL 时，我会得到建议，我现在得到......

```
NS - NSAddedPersistentStoresKey
NSL - NSLayoutAttribute
NSLo - NSLoadedClasses
NSLog - NSLog(<#id, ...#>) 
```

再说一次，从来没有听说过其他人。

有什么办法可以解决这个问题，以便我获得 Apple 说我应该获得的功能？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:11:00.550

好的，我从 ~/Library/Developer/Xcode/ 中删除了 UserInfo 文件夹，它似乎已经修复了。

# javascript - 使用 javascript 访问 CSS 类中的位置/字体颜色/字体大小

> ID：12515242
> 
> 赞同：0
> 
> 时间：2012-09-20T14:50:00.537
> 
> 标签：javascript, css, google-closure

> **可能重复：**
> [如何在运行时更改/删除 CSS 类定义？](https://stackoverflow.com/questions/730048/how-to-change-remove-css-classes-definitions-at-runtime)

假设我在一个名为的文件中有一个 CSS 类`storage.css`

`.my-classname { position: absolute; top: 0px; left: 0px; background-color: #FFF; }`

如何使用 javascript 动态检索和更改此类的值？

在`domController.js`

说：

```
var myCssClass = getCssClass(my-classname);
var position = myCssClass.(my-classname.position);
var top = myCssClass.(my-classname.top);

function setCssPosition(newPosition){
   myCssClass.position = newPosition;
}

function setCssTop(newTop){
   myCssClass.top = newTop;
} 
```

这行得通吗？

# excel - 如何更改 excel 2010 中的默认 vba 引用

> ID：12515244
> 
> 赞同：3
> 
> 时间：2012-09-20T14:50:01.147
> 
> 标签：excel, excel-2010, vba

我想在personal.xlsb 中添加一个vba 函数，但是这个函数里面有一个ADODB.Connection 对象。

我可以通过（在 VBA 编辑器中）选择工具 -> 引用然后选中“Microsoft ActiveX 数据对象 6.0 库”框来解决这个问题

我的问题是，如何使“Microsoft ActiveX Data Objects 6.0 Library”成为我的默认引用之一，以便在我启动 excel 时始终可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:24:49.350

虽然 Siddharth 的解决方案非常方便，但我想我会从我推出的工具中提供这些功能，在该工具中，我们不断收到与用户没有在其 Excel 版本中的 VBE 中检查正确引用有关的调用，因为很多可能的原因。

只是把它作为一种选择和一些东西来看待它。其中有一些非常特定于项目的功能，但您可以很容易地对其进行修改以适应您的需求。

```
Function ValidateReferences() As Boolean
'makes sure that user has the proper references installed for downloading data through API

Dim arrDescription() As String, arrGUID() As String
Dim arrMajor() As Long, arrMinor() As Long
Dim strMessage As String

ValidateReferences = True

'removes any broken references
For i = ThisWorkbook.VBProject.References.Count To 1 Step -1
    If ThisWorkbook.VBProject.References.Item(i).IsBroken Then ThisWorkbook.VBProject.References.Remove ThisWorkbook.VBProject.References.Item(i)
Next

'will attempt to add the reference for the user
arrGUID() = Split("{2A75196C-D9EB-4129-B803-931327F72D5C},{E6C9285A-7A87-407A-85E7-D77A70C100F5},{45A929B3-E493-4173-B6E5-0CD42041C6DC},{F24B7FA2-8FB9-48B7-825F-7C9F4A82F917},{7A80DAB5-1F61-4F9A-A596-561212ACD705},{18142BD6-1DE1-412B-991C-31C7449389E6},{C3ED6DC2-BED0-4599-A170-B1E1E32C627A}", ",", , vbTextCompare) ' {2A75196C-D9EB-4129-B803-931327F72D5C}
arrDescription() = Split("Microsoft ActiveX Data Objects 2.8 Library,myDummyRef COM 3.8.0,myDummyRef COM 3.8.0,myDummyRef COM 3.8.0,myDummyRef 3.6.0 Library,myDummyRef,myDummyRef Library", ",", , vbTextCompare) 'Microsoft ActiveX Data Objects 2.8 Library
ReDim arrMajor(6)
    arrMajor(0) = 0 '0
    arrMajor(1) = 3 '3
    arrMajor(2) = 3 '3
    arrMajor(3) = 3 '3
    arrMajor(4) = 3 '3
    arrMajor(5) = 1 '1
    arrMajor(6) = 1 '1 -> ADODB = 2
ReDim arrMinor(6)
    arrMinor(0) = 0
    arrMinor(1) = 8
    arrMinor(2) = 8
    arrMinor(3) = 8
    arrMinor(4) = 6
    arrMinor(5) = 0
    arrMinor(6) = 0 '-> ADODB = 8

For i = LBound(arrGUID()) To UBound(arrGUID())
    On Error GoTo ErrCheck
    If i = 0 Then 'adodb not working on AddFromFile. I could use add from file on all references, perhaps? -> refactor later
        ThisWorkbook.VBProject.References.AddFromFile ("C:\Program Files\Common Files\System\ado\msado15.dll")
    Else
        ThisWorkbook.VBProject.References.AddFromGuid arrGUID(i), arrMajor(i), arrMinor(i)
    End If
Next

If ValidateReferences = False Then MsgBox "The following references could not be added to the VB Project: " & Right(strMessage, Len(strMessage) - 2) & "." & vbNewLine & vbNewLine & "Please refer to 4\. Appropriate DLL Files on the 'Connectivity_Help' tab for more information."

Exit Function

ErrCheck:
    Select Case Err.Number
        Case Is = 32813 'reference already in use, nothing to report
        Case Else
            ValidateReferences = False
            strMessage = strMessage & ", " & arrDescription(i)
    End Select
    Resume Next

End Function 
```

此功能将打印您的参考信息以帮助您找到它的 dll，但必须检查参考才能打印它。

```
Sub print_ref_path()

Dim i As Integer

For i = ThisWorkbook.VBProject.References.Count To 1 Step -1
    Dim strName As String, strPath As String, strGUID as String
    strName = ThisWorkbook.VBProject.References.Item(i).name
    Debug.Print strName
    strPath = ThisWorkbook.VBProject.References.Item(i).FullPath
    Debug.Print strPath
    strGUID = ThisWorkbook.VBProject.References.Item(i).GUID 'think this is right, might need to change
Next

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T21:51:57.393

这是另一种方法。可以添加为按钮或打开命令。不太干净，但可以用最少的代码完成工作：

```
Sub AddReference()

On Error GoTo ErrHandler:

'VBA
References.AddFromGuid "{000204EF-0000-0000-C000-000000000046}", 0, 0
'Access
References.AddFromGuid "{4AFFC9A0-5F99-101B-AF4E-00AA003F0F07}", 0, 0
'stdole
References.AddFromGuid "{00020430-0000-0000-C000-000000000046}", 0, 0
'DAO
References.AddFromGuid "{4AC9E1DA-5BAD-4AC7-86E3-24F4CDCECA28}", 0, 0
'Excel
References.AddFromGuid "{00020813-0000-0000-C000-000000000046}", 0, 0
'Scripting
References.AddFromGuid "{420B2830-E718-11CF-893D-00A0C9054228}", 0, 0
'IWshRuntimeLibrary
References.AddFromGuid "{F935DC20-1CF0-11D0-ADB9-00C04FD58A0B}", 0, 0
'Office
References.AddFromGuid "{2DF8D04C-5BFA-101B-BDE5-00AA0044DE52}", 0, 0

ErrHandler:
Select Case Err.Number
Case 32813
Resume Next
Case Is <> 0
 MsgBox "Run-time error '" & Err & "' : " & vbNewLine & vbNewLine & Error(Err)
Case Else
End Select

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-27T10:52:42.227

您安装的最后一个版本成为默认版本。

如果您希望 2010 成为默认版本，则必须卸载这两个版本，然后重新安装 2013 1st 和 2010 最后。我hhp☻♥

# r - jpeg中包点阵的直方图

> ID：12515251
> 
> 赞同：0
> 
> 时间：2012-09-20T14:50:55.200
> 
> 标签：r, jpeg, histogram, lattice

> **可能重复：**
> [从 R 函数中生成多个图形](https://stackoverflow.com/questions/2547306/generate-multiple-graphics-from-within-an-r-function)

我正在尝试将数据中所有变量的所有图与包点阵中的直方图一起存储。当我直接运行时，它可以工作，但如果我使用函数，请不要创建数字。我的功能是：

```
plotHistByGroups<-function(data, res)
{
   jpeg("plots/histBy%03d.jpg", quality=100)
   finalres<-as.factor(res)
   names<-colnames(data)
   library(lattice)
   for( i in 1: length(data))
   {
     title<-paste(names[i], "~")
     title<-paste(title, length(levels(finalres)))
     title<-paste(title, "clusters")
     histogram(~data[,i] | finalres, data, xlab=names[i], main=title)    
   }
   dev.off()
} 
```

当我调用该函数时，我只得到一个空图。但是，如果我直接运行，我会获得所有数字：

```
jpeg("plots/histBy%03d.jpg", quality=100)
histogram(~data[,1] | finalres, data, xlab=names[1], main=title)    
histogram(~data[,2] | finalres, data, xlab=names[2], main=title)    
histogram(~data[,3] | finalres, data, xlab=names[3], main=title)    
...
dev.off() 
```

比亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:52:13.013

您需要将其包装在 a 中`print(histogram(...))`，是的，这是[R FAQ 中的问题 7.22](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-do-lattice_002ftrellis-graphics-not-work_003f)：

> 7.22 为什么格子/格子图形不起作用？
> 
> 最可能的原因是您忘记告诉 R 显示图表。xyplot() 等格函数创建图形对象，但不显示它（ggplot2 图形和 S-PLUS 中的格状图形也是如此）。图形对象的 print() 方法产生实际显示。当您在命令行交互地使用这些函数时，结果会自动打印出来，但是在 source() 或您自己的函数中，您将需要一个显式的 print() 语句。

# html - 为什么我的 context.getImageData() 调用是非法的？

> ID：12515255
> 
> 赞同：0
> 
> 时间：2012-09-20T14:51:14.453
> 
> 标签：html, canvas, getimagedata

我一直在玩一个非常简单的基于 HTML5/Canvas 的绘图应用程序，仅用于浏览器。我将其设置为概念验证，以使用不同的程序化绘图效果等。但是，当我尝试从画布 2d 上下文中获取 ImageData 时，遇到了一个问题，即 SecurityError。

现在，我了解跨浏览器内容以及在具有本地内容的网络服务器上运行的所有安全问题等等。这不是我的问题。我没有使用任何图像。更奇怪的是，我可以在代码中的某些地方获取 ImageData，但不能在其他地方获取。具体来说，不是在我想要的函数内。

这是我的代码的一个分支：http: [//jsfiddle.net/grimertop90/77Z42/](http://jsfiddle.net/grimertop90/77Z42/) 随意玩耍，并尝试在画布上绘图。

（注意：我一直在 Chrome 中开发，它运行良好，但我只是尝试在 Firefox 中运行它，它似乎有问题。出于我的目的，请在 Chrome 中查看。）

如果您查看 JavaScript，您应该看到标记为“Case 1”、“Case 2”和“Case 3”的三个点。这是我的代码中我试图抓取画布的 ImageData 的三个点。案例 1 和 3 有效；案例2，重要的，没有。情况 1 是在初始化期间。案例 3 是在用户单击按钮时。情况 2，即损坏的情况，在画布上绘制了一定数量的点时触发。

我不知道这个问题可能是什么，特别是因为它在 3 个地方中的 2 个工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:15:15.283

您的代码工作正常，您唯一的问题是`arcSketch`调用中缺少参数。目前您有：

> if (points.length >= 100) { arcSketch(); }

只需将其更改为

> if (points.length >= 100) { arcSketch(x,y); }

您试图调用`ctx.getImageData(Nan, Nan, 200, 200)`哪个抛出错误。你可以看到它在[这里工作](http://jsfiddle.net/jbalsas/77Z42/8/)

# android - 区域设置更改后图像未加载

> ID：12515256
> 
> 赞同：3
> 
> 时间：2012-09-20T14:51:14.793
> 
> 标签：android, localization

`android:minSdkVersion="8"`我正在使用和创建一个应用程序（默认语言不是 EN）`android:targetSdkVersion="15"`。

我有我的`image.png`内心`drawable-mdpi`。

由于我现在支持英语，因此我创建了一个`values-en-rUS`文件夹，其中包含一个`strings.xml`包含字符串翻译的文件。

现在，如果我运行我的应用程序并将设备语言更改为英语（美国），则会显示翻译后的字符串，并且应用程序按预期工作。

因为我想要一个不同的图像，所以应用程序用英文显示，我`drawable-en-rUS-mdpi`用`image.png`里面创建了文件夹。现在，我以“英文模式”运行应用程序，它应该加载图像，`drawable-en-rUS-mdpi`但事实并非如此。

如果我使用文件资源管理器并可视化应用程序，我可以看到`drawable-en-US-mdpi`创建了一个文件夹并且图像在里面。

我做错什么了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:21:22.307

从我的阅读来看，您的问题似乎与我的相同（在区域设置更改时使用本地化资源刷新图像）。

我的代码（简化）是这样的：

```
ImageView flag = (ImageView) findViewById(R.id.flagImage);
flag.setImageResource(R.id.flagImage); 
```

在阅读并尝试了 invalidate() 和 refreshDrawableState() 以及其他一些恶作剧之后，我发现另一个线程[ImageView 没有刷新/反映](https://stackoverflow.com/questions/4458565/imageview-not-refreshing-reflecting-changes)我的问题的解决方案（[此处](https://stackoverflow.com/a/9212097/669399)和[此处](https://stackoverflow.com/questions/4458565/imageview-not-refreshing-reflecting-changes#comment18535702_9212097)）。

似乎，如果您不更改正在绘制的图像的 resID 或 URI，即使其他可能起作用的因素发生了变化（例如*语言环境*），ImageView 本身也不会更新。我的问题的解决方案是添加一条为 ImageView 设置**null**可绘制对象的行：

```
ImageView flag = (ImageView) findViewById(R.id.flagImage);
flag.setImageDrawable(null);   //This will force the image to properly refresh
flag.setImageResource(R.drawable.flag); 
```

# java - Java / PayPal 集成指向错误的端点

> ID：12515260
> 
> 赞同：3
> 
> 时间：2012-09-20T14:51:28.547
> 
> 标签：java, api, maven, paypal, integration

我的 Paypal 集成在 2012 年 9 月 13 日停止使用我的 Java 应用程序。[我做了一些研究，并在stackoverflow](https://stackoverflow.com/questions/12412547/paypal-sandbox-api-ssl-handshake-error-suddenly-started-using-paypal-php-sdk)中发现了一个类似的问题， 因为我遇到了相同的错误“handshake_failure”。调试时，我看到端点被定义为“api.sandbox ...”，而文档说“api-3t.sandbox ...”

现在我不确定这一切是如何改变的或发生了什么。我相信正在使用凭据验证的 API 签名方法（我没有证书）。致电 PayPal 技术支持只会让我陷入困境，我正在寻找解决方案。

我正在使用与 paypal_base.4.3.56 和 paypal_stubs.4.3.56 集成的 Maven 运行 Java。我需要升级我的库吗？我需要改变我的代码吗？我可以使用相同的库并更改端点值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:10:22.750

正确的 PayPal 沙盒端点 URL 是[http://api-3t.sandbox.paypal.com/2.0/](http://api-3t.sandbox.paypal.com/2.0/)。

遇到类似问题的用户将其报告为错误；[您可以在报告](https://github.com/paypalx/SDKs/issues/22)中找到更多信息。

# iis-7.5 - IIS 7.5 - 如何将非本地共享的读/写访问权限授予应用程序池

> ID：12515266
> 
> 赞同：0
> 
> 时间：2012-09-20T14:51:37.867
> 
> 标签：iis-7.5, pool

我通过搜索找到的所有内容都只讨论本地驱动器的读/写（通常是 C），而我遇到的问题是让应用程序池对非本地驱动器具有相同的读/写访问权限，特别是在文件服务器上共享。

我们已将应用程序池设置为在已明确验证对文件共享具有完全控制权的域帐户下运行匿名用户，但使用应用程序池的 Web 应用程序无法访问此非本地共享。但是，如果我们将文件夹从文件服务器复制到本地驱动器，它可以访问共享文件夹的本地副本。

这是一个第三方应用程序，我们已经遵循了供应商的所有指示，到目前为止，这还没有解决。他们的支持正在关注这一点，但我不相信他们对出了什么问题有任何想法。当 Web 应用程序在另一台服务器上的 IIS6 下运行时，相同的 Web 应用程序可以与相同的文件服务器共享正常工作，因此它与 IIS7.5 相关。我认为它必须是 IIS7.5 特有的东西，而不是 IIS6，这是关键。

想法？

仅供参考 - 应用程序池已设置为经典模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:58:49.147

我认为您必须查看您拥有的许可。在 iss7.5 中，您有一个使用帐户运行的应用程序池，它可以是 ApplicationpoolIdnetity，也可以是真实的。如果您想访问共享应用程序池身份必须有权这样做，或者您可以模拟用户然后使用用户必须复制到共享文件夹的权限，我更喜欢使用模拟，只有当有必要我做模仿，做我最做的任何事情。

# ruby-on-rails - 在 where 查询中查找 nil has_one 关联

> ID：12515268
> 
> 赞同：41
> 
> 时间：2012-09-20T14:51:45.480
> 
> 标签：ruby-on-rails, ruby, activerecord

这可能是一个简单的问题，但我似乎正在拔头发来在这里找到一个优雅的解决方案。我有两个 ActiveRecord 模型类，它们之间有一个 has_one 和 belongs_to 关联：

```
class Item < ActiveRecord::Base
  has_one :purchase
end

class Purchase < ActiveRecord::Base
  belongs_to :item
end 
```

我正在寻找一种优雅的方式来查找所有没有与之关联的购买对象的 Item 对象，最好不要`is_purchased`在 Item 上使用布尔值或类似属性。

现在我有：

```
purchases = Purchase.all
Item.where('id not in (?)', purchases.map(&:item_id)) 
```

哪个有效，但对我来说似乎效率低下，因为它正在执行两个查询（并且购买可能是一个巨大的记录集）。

运行 Rails 3.1.0

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-20T15:12:19.577

这是很常见的任务，SQL OUTER JOIN 通常可以正常工作。看看[这里](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)，例如。

在你的情况下尝试使用类似的东西

```
not_purchased_items = Item.joins("LEFT OUTER JOIN purchases ON purchases.item_id = items.id").where("purchases.id IS null") 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-11-06T19:15:52.080

找到了另外两种 railsey 方法：

```
Item.includes(:purchase).references(:purchase).where("purchases.id IS NULL")

Item.includes(:purchase).where(purchases: { id: nil }) 
```

从技术上讲，第一个示例在没有 'references' 子句的情况下可以工作，但 Rails 4 在没有它的情况下会发出弃用警告。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-01-30T08:56:39.033

@dimuch 解决方案的更简洁版本是使用[`left_outer_joins`](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-left_outer_joins)Rails 5 中引入的方法：

```
Item.left_outer_joins(:purchase).where(purchases: {id: nil}) 
```

请注意，在`left_outer_joins`调用`:purchase`中是单数（它是`has_one`声明创建的方法的名称），而在`where`子句`:purchases`中是复数（这里是`id`字段所属的表的名称。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-30T09:14:37.960

Rails 6.1 has added a query method called `missing` in the `ActiveRecord::QueryMethods::WhereChain` class.

It returns a new relation with a left outer join and where clause between the parent and child models to identify missing relations.

Example:

```
Item.where.missing(:purchase) 
```

# objective-c - drawRect优化

> ID：12515269
> 
> 赞同：0
> 
> 时间：2012-09-20T14:51:49.410
> 
> 标签：objective-c, ios, core-animation, core-graphics, drawrect

我正在开发一个允许用户选择图像（相机或画廊），然后用手指在该图像上绘图的应用程序。他们绘制的区域成为蒙版的透明部分。然后在第一幅图像下方绘制第二幅图像。

我一直在努力提高性能，尤其是在 iPad 3 上，我似乎碰壁了。我是 iOS 和 Objective-C 的新手。

***所以我的问题是：我可以做些什么来提高我的应用程序的绘图性能？***

我使用[本教程](http://blog.effectiveui.com/?p=8105)作为我的代码的起点。

首先我绘制一个缓存上下文：

```
- (void) drawToCache {
    CGRect dirtyPoint1;
    CGRect dirtyPoint2;
    UIColor *color;

    if (point1.x > -1){
        hasDrawn = YES;

        maskContext = CGLayerGetContext(maskLayer);
        blackBackgroundContext = CGLayerGetContext(blackBackgroundLayer);

        if (!doUndo){
            color = [UIColor whiteColor];
            CGContextSetBlendMode(maskContext, kCGBlendModeColor);
        }
        else{
            color = [UIColor clearColor];
            CGContextSetBlendMode(maskContext, kCGBlendModeClear);
        }

        CGContextSetShouldAntialias(maskContext, YES);

        CGContextSetRGBFillColor(blackBackgroundContext, 0.0, 0.0, 0.0, 1.0);
        CGContextFillRect(blackBackgroundContext, self.bounds);

        CGContextSetStrokeColorWithColor(maskContext, [color CGColor]);
        CGContextSetLineCap(maskContext, kCGLineCapRound);
        CGContextSetLineWidth(maskContext, brushSize);

        double x0 = (point0.x > -1) ? point0.x : point1.x; //after 4 touches we should have a back anchor point, if not, use the current anchor point
        double y0 = (point0.y > -1) ? point0.y : point1.y; //after 4 touches we should have a back anchor point, if not, use the current anchor point
        double x1 = point1.x;
        double y1 = point1.y;
        double x2 = point2.x;
        double y2 = point2.y;
        double x3 = point3.x;
        double y3 = point3.y;

        double xc1 = (x0 + x1) / 2.0;
        double yc1 = (y0 + y1) / 2.0;
        double xc2 = (x1 + x2) / 2.0;
        double yc2 = (y1 + y2) / 2.0;
        double xc3 = (x2 + x3) / 2.0;
        double yc3 = (y2 + y3) / 2.0;

        double len1 = sqrt((x1-x0) * (x1-x0) + (y1-y0) * (y1-y0));
        double len2 = sqrt((x2-x1) * (x2-x1) + (y2-y1) * (y2-y1));
        double len3 = sqrt((x3-x2) * (x3-x2) + (y3-y2) * (y3-y2));

        double k1 = len1 / (len1 + len2);
        double k2 = len2 / (len2 + len3);

        double xm1 = xc1 + (xc2 - xc1) * k1;
        double ym1 = yc1 + (yc2 - yc1) * k1;
        double xm2 = xc2 + (xc3 - xc2) * k2;
        double ym2 = yc2 + (yc3 - yc2) * k2;

        double smooth_value = 0.5;
        float ctrl1_x = xm1 + (xc2 - xm1) * smooth_value + x1 - xm1;
        float ctrl1_y = ym1 + (yc2 - ym1) * smooth_value + y1 - ym1;
        float ctrl2_x = xm2 + (xc2 - xm2) * smooth_value + x2 - xm2;
        float ctrl2_y = ym2 + (yc2 - ym2) * smooth_value + y2 - ym2;

        CGContextMoveToPoint(maskContext, point1.x, point1.y);
        CGContextAddCurveToPoint(maskContext, ctrl1_x, ctrl1_y, ctrl2_x, ctrl2_y, point2.x, point2.y);
        CGContextStrokePath(maskContext);

        dirtyPoint1 = CGRectMake(point1.x-(brushSize/2), point1.y-(brushSize/2), brushSize, brushSize);
        dirtyPoint2 = CGRectMake(point2.x-(brushSize/2), point2.y-(brushSize/2), brushSize, brushSize);
        [self setNeedsDisplayInRect:CGRectUnion(dirtyPoint1, dirtyPoint2)];
    }
} 
```

还有我的drawRect：

```
- (void)drawRect:(CGRect)rect {
    CGRect imageRect = CGRectMake(0, 0, 1024, 668);
    CGSize size =  CGSizeMake(1024, 668);

    //Draw the user touches to the context, this creates a black and white image to convert into a mask
    UIGraphicsBeginImageContext(size);
    CGContextSetShouldAntialias(UIGraphicsGetCurrentContext(), YES);
    CGContextDrawLayerInRect(UIGraphicsGetCurrentContext(), imageRect, blackBackgroundLayer);
    CGContextDrawLayerInRect(UIGraphicsGetCurrentContext(), imageRect, maskLayer);
    CGImageRef maskRef = CGBitmapContextCreateImage(UIGraphicsGetCurrentContext());
    UIGraphicsEndImageContext();

    //Make the mask
    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef), CGImageGetHeight(maskRef), CGImageGetBitsPerComponent(maskRef), CGImageGetBitsPerPixel(maskRef), CGImageGetBytesPerRow(maskRef), CGImageGetDataProvider(maskRef), NULL, false);
    //Mask the user image
    CGImageRef masked = CGImageCreateWithMask([self.original CGImage], mask);

    UIGraphicsBeginImageContext(size);
    CGContextDrawLayerInRect(UIGraphicsGetCurrentContext(), imageRect, backgroundTextureLayer);
    CGImageRef background = CGBitmapContextCreateImage(UIGraphicsGetCurrentContext());
    UIGraphicsEndImageContext();

    //Flip the context so everything is right side up
    CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0, 668);
    CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0);

    //Draw the background on the context
    CGContextDrawImage(UIGraphicsGetCurrentContext(), imageRect, background);

    //Draws the mask on the context
    CGContextDrawImage(UIGraphicsGetCurrentContext(), imageRect, masked);

    //Release everything to prevent memory leaks
    CGImageRelease(background);
    CGImageRelease(maskRef);
    CGImageRelease(mask);
    CGImageRelease(masked);
} 
```

我昨天花了研究这些问题：

[如何提高 CGContextFillRect 和 CGContextDrawImage 性能](https://stackoverflow.com/questions/6625654/how-can-i-improve-cgcontextfillrect-and-cgcontextdrawimage-performance)

[iPhone 4 上的 CGContextDrawImage 非常慢](https://stackoverflow.com/questions/3915490/cgcontextdrawimage-very-slow-on-iphone-4)

[使用 CoreGraphics CGContextDrawImage 在 CATiledLayer 中绘图](https://stackoverflow.com/questions/4067512/drawing-in-catiledlayer-with-coregraphics-cgcontextdrawimage)

[iPhone：如何将图层添加到 UIView 的根图层以显示具有内容属性的图像？](https://stackoverflow.com/questions/1956216/iphone-how-do-i-add-layers-to-uiviews-root-layer-to-display-an-image-with-the)

[iPhone CGContextDrawImage 和 UIImageJPEGRepresentation 大大降低了应用程序的速度](https://stackoverflow.com/questions/12461395/iphone-cgcontextdrawimage-and-uiimagejpegrepresentation-drastically-slowing-down)

任何帮助表示赞赏！

谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:32:45.587

我可以给你一些提示，但你需要尝试看看问题出在哪里（使用仪器）：

*   不要假设您需要绘制整个视图 - 当您需要弄脏某些区域时，请使用 setNeedsDisplayInRect。然后在drawRect中只更新脏区。

*   以上意味着你的 maskRef 更小更容易构建

*   而不是“[self.original CGImage]”，而是使用 CGImageCreateWithImageInRect() 创建一个较小的子区域图像，它允许您选择图像的一个子部分，然后将该较小的图像与蒙版一起使用。

# javascript - 从具有绝对位置的父级继承 div 高度

> ID：12515272
> 
> 赞同：1
> 
> 时间：2012-09-20T14:52:02.830
> 
> 标签：javascript, css, html

我想用纯 CSS 实现这种布局：

![布局](../Images/02984b21379d291e539eda65e22fbfee.png)

背景中的渐变是浏览器窗口宽度的 100%。内部文本位于 1000 像素的 div 内，位于浏览器窗口的中心。现在我希望文本定义渐变的高度。这就是问题所在：渐变是绝对定位的 ( `left: 0px; width: 100%`)，但文本位于另一个 div 内。

我已经尝试了一些东西，`display:table;`但是`display:table-cell;`一旦我将渐变 div 放到它上面，`position:absolute`它就不会继承文本 div 的高度。

任何人都可以解决如何在没有javascript的纯CSS中实现这一点？

**编辑：**

对不起，我忘了提到**渐变不是问题**（我使用 css3）。而且我也忘了添加代码：http: [//jsfiddle.net/kxu8N/1/](http://jsfiddle.net/kxu8N/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:56:35.663

绝对定位的元素不是布局流程的一部分，因此它们不能从父元素继承尺寸信息。

您应该在包裹文本的元素上使用 CSS 背景图像（或 CSS3 渐变）来为您提供渐变，而不是使用单独的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:01:21.800

您可以使用 css3 background-size 属性来缩放渐变的高度。在以渐变为背景的 div 上将高度设置为自动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:01:45.033

这是一个不知道您的 HTML 结构的答案：http: [//jsfiddle.net/8xagQ/1/](http://jsfiddle.net/8xagQ/1/)

```
.gradient{
    background: -webkit-linear-gradient(left, rgba(0,119,255,0) 0%,rgba(0,119,255,1) 25%,rgba(0,119,255,1) 50%,rgba(0,119,255,1) 75%,rgba(0,119,255,0) 100%);

    margin:10px 0;
    text-align:center;
    color:#fff;
    padding:10px 0;
}​ 
```

请注意，我只包含了 webkit 的渐变说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T15:17:40.027

```
<html>
 <head>
<style type="text/css">
p,span{
    margin-left:20px;
}

#logo{
    font-weight: bold;
    height:100px;
}
#slogan{
    width:100%;
    height:150px;
    background: -webkit-linear-gradient(left, rgba(0,119,255,0) 0%,rgba(0,200,230,15) 25%,rgba(0,200,230,15) 50%,rgba(0,200,230,15) 75%,rgba(0,119,255,0) 100%);}
</style>
</head>
<body>
    <div id="logo">
        <p>Logo</p>
    </div>
    <div id="slogan">
        <span>some text that defines hieght of this</span>

    </div>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T15:24:58.567

在我的情况下，我将你的蓝色移动到你的渐变中。这样，一旦你添加更多的行，它会自动创建一行文本

```
<div id="container">

    <div id="outer">
      <div id="blue-background">
         <div class="span3" id="blue">
          Here is my content<br>
             and this content should define the height of the underlying #blue-background <br />
             and if we are adding more and more and more
          </div>     
        </div>

    </div>

</div> 
```

然后将文本插入其中，我更改了 CSS 中的一些设置

```
#blue {
  z-index: 1;
    position:relative;
    margin:auto;
    text-align:center;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T09:59:45.283

因为我没有找到任何解决方案，所以我破解了它。因为我的内容是通过 javascript 动态添加的，所以我添加了两次内容。第一次在覆盖的 div 内可见（在蓝色背景上），第二次在蓝色背景内可见。`visibility: hidden`我将所有 div 隐藏在蓝色背景中。

而且因为两个 div 的内容相同，所以它们的高度相同。不漂亮，但它有效。

# vim - 如何启动 vim 在 2 个选项卡中打开 4 个文件，每个选项卡有 2 个窗口

> ID：12515274
> 
> 赞同：3
> 
> 时间：2012-09-20T14:52:11.910
> 
> 标签：vim, command-line, tabs

我知道如何在一个选项卡或一个窗口中打开所有文件，但是否可以在选项卡/窗口的组合中打开它们？

我正在使用 gvim 7.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:31:50.403

我认为你有标签页的概念。来自`:h tabpage`：

> 一个标签页包含一个或多个窗口。

我不确定这是否是您想要的，但是您可以通过`-c`在命令行上自由使用来创建两个选项卡，每个选项卡都有两个窗口：

```
gvim -p2 first.txt third.txt -c "sp second.txt" -c "tabn" -c "sp fourth.txt" 
```

这将焦点放在第 4 个文件上。如果您想做一些不同的事情，您可以重新排列参数（或添加更多）。另请注意，gvim 会令人困惑地告诉您它只打开两个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-13T12:07:28.787

您可以将`:[count]tab {cmd}`( [tab-page-commands](http://vimdoc.sourceforge.net/htmldoc/tabpage.html#tab-page-commands) ) 与`:[n]sbnext [N]`( [buffer-list](http://vimdoc.sourceforge.net/htmldoc/windows.html#buffer-list) ) 结合使用，如下所示：

`vim file1 file2 file3 file4 +sbn +"tab sbn" +sbn`

只需`+"tab sbn" +sbn`为更多文件添加更多内容。如果要垂直拆分，请替换`+sbn`为`+"vert sbn"`.

# php - 注册类中的 PDO 错误

> ID：12515277
> 
> 赞同：-2
> 
> 时间：2012-09-20T14:52:35.727
> 
> 标签：php, oop, pdo

我正在处理自己的 SignUp 类，但 PDO 调用似乎有问题浏览器将其返回给我：

> 致命错误：在非对象上调用成员函数 query()

我将我的数据库配置包含在一个文件中，然后在主页上。如下：

```
 <?
   $dsn = 'mysql:dbname=magazin-online;host=localhost;';
   $username = 'root';
   $password = '';

   try{
       $pdo = new PDO($dsn, $username, $password);
   }catch(PDOException $e){
       echo 'Connection failed!: '.$e->getMessage();
   } 
```

SignUp 类中导致错误的行是这样的：

```
 $pdo->query("insert into ... () ... values ()); 
```

现在，我没有在我的 SignUp 类中建立任何数据库连接，因为我已经包含了对它负责的文件。

我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T14:58:01.213

您正在捕获新 PDO 生成的异常，然后继续执行。

通过这种方式，您必须检查该类是否存在，因此更改：

```
if( $pdo) 
  $pdo->query("insert into ... () ... values ()); 
```

但是.. 更好的方法是在出现此类严重错误后不继续执行。所以最好像这样改变连接：

```
 $dsn = 'mysql:dbname=magazin-online;host=localhost;';
   $username = 'root';
   $password = '';

   try{
       $pdo = new PDO($dsn, $username, $password);
   }catch(PDOException $e){
       echo 'Connection failed!: '.$e->getMessage();
       die;
   } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T14:58:26.273

如果我理解正确， $pdo 是一个全局变量。如果在函数内部调用 $pdo->query，则必须将 $pdo 连接作为参数传递或将其声明为全局

```
global $pdo; 
```

在成员函数的开头。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T14:59:46.320

尝试使用`exec`而不是`query`：

```
$pdo->exec("insert into ... () ... values ()); 
```

# c - 需要变量平均的可重入函数

> ID：12515278
> 
> 赞同：2
> 
> 时间：2012-09-20T14:52:40.350
> 
> 标签：c, reentrancy

这是一个非常基本的问题，我只是想不出一个好的解决方案。我有一些代码是超级循环类型的架构（无操作系统）。函数中有一些需要求平均值的变量：即需要连续三次输入相同的结果才能调用条件“真”。我的老板现在正在推动所有这些函数可重入，这意味着我的静态局部变量的旧方法不好。他也不想要额外的全局变量。那么有没有另一种好方法来保持多个上下文的条件平均，以允许函数完全可重入？

当前代码示例：

```
 void foo (void)
    {
        static unsigned int ConditionCount = 0;

        if("SomeCondition" == TRUE)
            {ConditionCount++;}

        if(ConditionCount >= 3)
            {DoSomething();}
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:03:06.823

要使其可重入，请传递一个指针并让调用者维护每个`ConditionCount`.

```
 void foo (int *ConditionCount)
    {
        if("SomeCondition" == TRUE)
            {(*ConditionCount)++;}

        if(*ConditionCount >= 3)
            {DoSomething();}
    } 
```

# nsis - 使用 NSIS 脚本将属性值移动到文本框中

> ID：12515281
> 
> 赞同：0
> 
> 时间：2012-09-20T14:52:42.797
> 
> 标签：nsis

我为我的 java 项目创建了 nsi 文件。我创建了一个文本框并作为默认值。我的问题是运行 exe 文件，它显示带有默认值的文本框。如果用户想要修改文本框中应该写入的值在属性文件中。我尝试了以下行代码

```
 InstallOptions::dialog "$PLUGINSDIR\sample.ini"
    ReadINIStr $0 "$PLUGINSDIR\sample.ini" "Field 1" State
    ${ConfigWrite} "$INSTDIR\resource\conf.properties" "AGENT.HOST" "=$0" $R0 
```

但是修改后的值会在属性文件中受到影响。我不知道为什么没有反映？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:57:29.500

```
!include LogicLib.nsh
!include TextFunc.nsh

Function pageConfig
InitPluginsDir

# For this example I generate the page directly with the precompiler, you probably want to use a real .ini file.
!tempfile SRCINI
!appendfile "${SRCINI}" "[Settings]$\nNumFields=1$\n"
!appendfile "${SRCINI}" "[Field 1]$\n"
!appendfile "${SRCINI}" "Type=Text$\n"
!appendfile "${SRCINI}" "Left=10$\nRight=100$\nTop=10$\nBottom=24"
File "/oname=$PluginsDir\cfgpage.ini" "${SRCINI}"
!delfile "${SRCINI}"

ClearErrors
${ConfigRead} "$INSTDIR\resource\conf.properties" "AGENT.HOST=" $0
${If} ${Errors}
    StrCpy $0 "DefaultHost.com"
${EndIf}
WriteIniStr "$PluginsDir\cfgpage.ini" "Field 1" "State" $0

InstallOptions::dialog "$PluginsDir\cfgpage.ini"
Pop $0
FunctionEnd

Function pageLeaveConfig
ReadINIStr $0 "$PluginsDir\cfgpage.ini" "Field 1" State
${If} $0 == ""
    MessageBox mb_iconstop "Please provide a host..."
    Abort
${EndIf}
${ConfigWrite} "$INSTDIR\resource\conf.properties" "AGENT.HOST=" "$0" $1
FunctionEnd

Page custom pageConfig pageLeaveConfig 
```

# objective-c - 在 UISplitViewController 中隐藏 MasterView

> ID：12515285
> 
> 赞同：1
> 
> 时间：2012-09-20T14:53:16.043
> 
> 标签：objective-c, ios, cocoa-touch, ipad, uisplitviewcontroller

**更新**

我最终解决了 MGSplitViewController 的问题，所以我现在正在使用这个项目的分支：http://github.com/ArtSabintsev/MGSplitViewController[在](http://github.com/ArtSabintsev/MGSplitViewController)编写此编辑时，分支还没有被拉入 Matt Gemmell 的主人分支。

**请注意**

1.  我的 iPad 应用程序仅适用于横向，并且兼容 iOS5 和 iOS6
2.  我有一个部分可行的解决方案，但我需要更进一步。
3.  对于我的应用程序中的大多数屏幕，我需要同时呈现主视图和详细视图（正常行为）。
4.  在某一时刻，我只需要 detailVC 出现。

**我现在怎么样了？**

我正在使用以下 UISpliterViewControllerDelegate 方法

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation
{
    return self.hideRootViewController;
} 
```

其中 hideRootViewController 是一个布尔值，最初设置为 NO。

**部分解决方案**

如果我将布尔值更改为 YES（在我的应用程序中的任何屏幕/VC 中）并旋转屏幕，masterVC 就会消失，而 detailVC 会占据整个屏幕。

**剩下的问题**

如何在无需物理旋转设备的情况下强制进行此更改，或者如何强制更改设备方向通知以重绘 UISplitViewController？

以下尝试**失败**：

1.  CGAffineTansformation（恒等式和小角度变换）
2.  发布 UIDeviceOrientationDidChangeNotification
3.  在 splitVC.view 上调用 setNeedsLayout
4.  在 splitVC 上展示并立即关闭 modalVC

注意：我没有使用 MGSplitViewController，也不想在这个项目中使用该类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:04:23.003

要手动强制旋转，您可以使用：

```
[[UIApplication sharedApplication] setStatusBarOrientation:]
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T15:16:56.337

你为什么不使用[mgsplitviewcontroller](http://mattgemmell.com/2010/07/31/mgsplitviewcontroller-for-ipad/)。我在我的项目中使用了它，它工作得很好而且很容易实现。您可以轻松隐藏/切换主视图。

# c# - 用于捕获这部分的正则表达式

> ID：12515287
> 
> 赞同：1
> 
> 时间：2012-09-20T14:53:23.917
> 
> 标签：c#, regex

我只想用一个正则表达式从这个文本中获取名称：

```
 Name: 
 Paul Rao  

 Company: 
 Fix UR Gadget 
```

我应该只得到**Paul Rao**

我试过`(?<=Name:)[\s\S]*\n`但它不起作用，有什么想法吗？

零件名称：（换行符，空格...）实际名称（空格...换行符）将是相同的，但公司不会总是下面的文本。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:03:31.483

这个怎么样：`^Name:[^\S\n]$\n(.*)\n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:23:36.657

```
 var match = Regex.Match(text, @"Name:[\s]*(.+)(?:$|\r)");
        var name = match.Groups[1].Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:06:38.240

很好的尝试一下你的后视。你只是忘了那里有一条新线。

```
(?<=Name:\n)([^\n]*+) 
```

现在第二组应该匹配它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T15:06:42.240

```
string text = @"
Name: 
Paul Rao  

Company: 
Fix UR Gadget 
";
Regex re = new Regex(@"Name:\s*\n(.+?)\s*\n");
Match m = re.Match(text);
if (m.Success)
{
    string name = m.Groups[1].Value;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T14:59:46.680

```
(?<=Name:[\s\S\n]*)[a-zA-Z\s\-]* 
```

* * *

`(?<=Name:[\s\S]*)`确保匹配前有单词“Name”、分号和任意数量的空白字符。（你甚至可能想用 切换`*`，`+`因为你可以保证空格，但这会起作用）

`[a-zA-Z\s\-]*`匹配任意数量的字母、空格或连字符（因为连字符是名称的有效字符）。听说过 La-a (Luh-dash-uh) 的故事吗？甚至可能还有其他有效字符，我不知道。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T15:00:10.370

有任何想法吗？不，因为它是关于正则表达式的问题；是的，因为如果没有正则表达式的危害人类罪，解析实际上会很有趣。

例如，看看这个网站上的教程（不确定这是否是你最好的选择；我自己没有在 .NET 上完成解析，但表面上看起来很棒）

[http://www.quanttec.com/fparsec/](http://www.quanttec.com/fparsec/)

如果你愿意花一个小时左右的小时间投入，我保证你不会回头。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T15:12:46.253

如果您使用组捕获，则可以避免使用lookbehind：

```
var result = Regex.Match(text, @"Name:[\r\n ]+([^\r\n]*)[\r\n ]+") 
```

你的结果是`result.Groups[1].Value.TrimEnd()`

# sql - 如何将表别名传递给 SQL 中的子查询？

> ID：12515291
> 
> 赞同：4
> 
> 时间：2012-09-20T14:53:29.160
> 
> 标签：sql, select, oracle10g, scope, correlated-subquery

我已经挣扎`SQL`了一段时间了。我必须构建一个查询以从表中返回第二高的 id。听起来很简单，尤其是当您找到[该链接](http://www.orafaq.com/faq/how_does_one_select_the_top_n_rows_from_a_table)时。

但我有一个更复杂的查询：

```
SELECT 
  p.column1,
  p.column2,
  p.column3,
  p.column4,
  (
    SELECT 
      p.column1 
    FROM 
      p_table p
    WHERE 
      p.column2 = (
        SELECT
          id
        FROM (
          SELECT 
            id,
            RANK() OVER (ORDER BY id DESC) rank_id
          FROM 
            other_table 
          WHERE 
            field = p.column3
        )
        WHERE
          rank_id = 2
      )
    ) AS sth
FROM ... 
```

Oracle 说[ORA-00904: Unknown identifier](http://ora-00904.ora-code.com/) at `p.column3`. 我理解它为什么这么说 - 它不能识别`p`为表名别名。

是否可以将其传递给嵌套查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:23:17.393

您不能将查询中的列传递给嵌套查询的嵌套查询。

我认为这可以做同样的工作：

```
    选择
      p.column1,
      p.column2,
      p.column3,
      p.column4,
      (
        选择
          p.column1
        从
          p_table p
        在哪里
          (p.column2, 2) = (SELECT id,
                                   RANK() OVER (ORDER BY id DESC) rank_id
                              从
                                    其他表
                             在哪里
                                    字段 = p.column3
                             )

        ) 作为某事
    从

```

# ios6-maps - 将您的企业添加到 Apple 地图

> ID：12515295
> 
> 赞同：3
> 
> 时间：2012-09-20T14:53:41.093
> 
> 标签：ios6-maps, apple-maps

关于如何将业务添加到 Apple 地图的任何想法？它们非常不完整，我的客户的业务都没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:34:48.740

我只是为朋友的餐厅做的。希望它会很快出现在 Apple 地图应用程序上。

您应该首先将业务添加到 yelp.com 和 places.tomtom.com

这里有关于该主题的非常好的文章：

[http://tophatrank.com/blog/search-engine-optimization/apple-maps/](http://tophatrank.com/blog/search-engine-optimization/apple-maps/)

# ipad - 限制设备访问内部网站

> ID：12515302
> 
> 赞同：0
> 
> 时间：2012-09-20T14:54:18.550
> 
> 标签：ipad, configuration, profile, osx-server

我需要一个 Mac OS X 服务器（托管内部网站）的解决方案，它将限制设备对网站的访问。它需要是一个仅允许某些设备（包括 iPad）访问该网站的解决方案。我在想它可以通过配置文件来完成，但不知道如何在服务器端进行设置。

# .htaccess - htaccess 目录到文件问题

> ID：12515307
> 
> 赞同：0
> 
> 时间：2012-09-20T14:54:29.610
> 
> 标签：.htaccess

我已经为此绞尽脑汁了几个小时。

我希望使用**www.mrsmith.com/cars/**

但是实际页面位于**www.mrsmith.com/pagebuilder/carinformation.php的不同目录中**

如何进行 apache 重写（htaccess），以便目录 www.mrsmith.com/cars/ 转发到 www.mrsmith.com/pagebuilder/carsinformation.php

更重要的是保持 www.mrsmith.com/cars 的 uri

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:26:21.137

在**文档根目录**的 htaccess 文件中添加以下规则：

```
RewriteEngine On
RewriteBase /
RewriteRule ^ /pagebuilder/carinformation.php [L] 
```

# sql-server - 是否有适用于 SQL Server 的通用 oData 提供程序？

> ID：12515312
> 
> 赞同：6
> 
> 时间：2012-09-20T14:54:42.903
> 
> 标签：sql-server, iis, odata

我为我们的 CRM 顾问创建了一个小工具，允许他们展示来自 CRM 中的 oData 源的数据。目前，它将连接到任何数据源，但对于客户站点，我们需要为每个数据源每次使用 WCF 开发一个 oData 服务。

有谁知道是否有一个像样的通用工具可以从 SQL Server 检索数据，将其（通过 IIS）呈现为 oData，并且可以由非开发人员在没有 Visual Studio 的情况下进行配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:45:57.633

我们（WCF 数据服务团队）多次听到这个问题；以下是我的一些想法，不分先后。

1.  我们没有听到很多询问。这里有相当数量的工作要做，没有足够的要求就很难证明是合理的。也就是说，没有什么能阻止社区为实现这一目标而努力（提示，提示 :)）。
2.  您需要回答许多问题。例如，提供者会有什么样的默认限制？您真的想允许对可能是生产数据库服务器的东西进行任意扩展吗？权限呢？读/写呢？
3.  可变模式会发生什么？这是一个完全动态的提供者吗？扫描数据库模式有多少开销，需要多久扫描一次数据库模式？
4.  客户将如何利用动态 OData 服务？大多数客户端使用某种形式的代码生成来简化与服务的交互。

这些想法根本不是为了劝阻，但希望它们能让您在尝试自己创建通用提供程序时思考一些事情。如果你这样做，我很想听听。

# java - 从 C++ 客户端在 Windows 2003 Server 上使用 waffle 的 Java SSO

> ID：12515317
> 
> 赞同：1
> 
> 时间：2012-09-20T14:54:52.010
> 
> 标签：java, c++, active-directory, single-sign-on, waffle

我们有一个遗留的客户端-服务器应用程序，客户端用 C++ 编写，服务器用 Java 编写（都在 Windows 上运行），使用 CORBA 进行通信。请注意，服务器上的 Java 应用程序不使用 TomCat 或其他应用程序服务器。

为了启用客户端的 Active Directory 身份验证，我使用服务器上的[Waffle](http://dblock.github.com/waffle/)库和客户端上的 Windows API 来执行协商[SSPI 交换循环](http://msdn.microsoft.com/en-us/library/aa375403%28VS.85%29.aspx)，如本文所述：[在客户端-服务器应用程序中使用 Active Directory 验证用户](https://stackoverflow.com/questions/1337923/authenticating-users-using-active-directory-in-client-server-application/1337959)

SSPI Exchange 循环的 MSDN 示例在客户端和服务器之间有多个发送-接收调用（可能也考虑了 NTLM 身份验证），但我已经能够通过向服务器发送一次身份验证令牌来成功验证客户端。

如果我们的服务器在 Windows Server 2003 及更高版本上运行，而我们的客户端在 Windows XP 及更高版本上运行，我是否可以假设将使用 Kerberos 并且不需要多次发送-接收调用？

如果我要在 Tomcat 上使用 Java+waffle 进行身份验证，我注意到身份验证令牌只发送一次。

# javascript - 使用单选按钮处理表单 i ajax 的问题

> ID：12515318
> 
> 赞同：0
> 
> 时间：2012-09-20T14:54:57.587
> 
> 标签：javascript

我有这个脚本，它可以使用 ajax 和 php 插入一些数据。

现在，一切正常，除了单选按钮（选择选项也可以正常工作），并且它采用单选按钮的第一个值..

为什么会这样？这是代码：

```
<div id="formfields" ><label>Tipologia Pdv: </label>
<input type="radio" name="tipologia_pdv" id="tipologia_pdv" value="Iper" style="width:40px;" /><span > Iper</span>
<input type="radio" name="tipologia_pdv" id="tipologia_pdv"
value="Super" style="width:40px;" /><span > Super</span><br /><br /></div>
<div id="formfields" ><label>Richiesta Ccnl: </label>
<input type="radio" name="richiesta_ccnl" id="richiesta_ccnl" value="Si" style="width:40px;"/><span> Si</span>
<input type="radio" name="richiesta_ccnl" id="richiesta_ccnl"
value="No" style="width:40px;"/><span> No</span><br /><br /></div> 
```

的JavaScript：

```
// Fetch data from input fields.
var js_tipologia_pdv = $("#tipologia_pdv").val();
var js_richiesta_ccnl = $("#richiesta_ccnl").val();

//let's put all data together
var myData = 'postTipologia_pdv='+ js_tipologia_pdv + '&postRichiesta_ccnl='+ js_richiesta_ccnl + '&postDistretto_pdv=' + js_distretto_pdv + '&postCoopva_pdv=' + js_coopva_pdv + '&postNome_pdv=' + js_nome_pdv; 
```

在 php 中，它们是这样的：

```
$postTipologia_pdv      = filter_var($_POST["postTipologia_pdv"], FILTER_SANITIZE_STRING); 
$postRichiesta_ccnl     = filter_var($_POST["postRichiesta_ccnl"], FILTER_SANITIZE_STRING); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:15:11.180

将我的评论变成答案：

1）您的`id`属性必须是唯一的。

2）使用类似的方法获取所选单选按钮的值：`$('input:radio[name=tipologia_pdv]:checked').val();`

# javascript - 使用 requestAnimation Frame 在滚动事件上更改 css

> ID：12515323
> 
> 赞同：7
> 
> 时间：2012-09-20T14:55:26.980
> 
> 标签：javascript, jquery, css, html, requestanimationframe

我想更改视口内元素的背景颜色（使用`overflow: scroll`）

所以这是我的第一次尝试：http: [//jsfiddle.net/2YeZG/](http://jsfiddle.net/2YeZG/)

如您所见，在绘制新颜色之前，先前的颜色会短暂闪烁。其他人也[有](https://stackoverflow.com/questions/8966971/javascript-event-before-scroll-redraw)类似的[问题](https://stackoverflow.com/questions/11346327/force-javascript-to-run-before-browser-redraw-jsfiddle-examle)。

按照[HTML5 Rocks 的说明](http://www.html5rocks.com/en/tutorials/speed/animations/#an-example)，我尝试引入`requestAnimationFrame`来解决这个问题，但无济于事：

[http://jsfiddle.net/RETbF/](http://jsfiddle.net/RETbF/)

我在这里做错了什么？

* * *

这是一个显示相同问题的更简单示例：http: [//jsfiddle.net/HJ9ng/](http://jsfiddle.net/HJ9ng/)

* * *

在此处提交了 Chromium 的错误：[http ://code.google.com/p/chromium/issues/detail?id=151880](http://code.google.com/p/chromium/issues/detail?id=151880)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:33:40.320

如果它只是背景颜色，那么为什么不将父背景颜色更改为红色，一旦滚动就将其更改为粉红色？

我将您的 CSS 更改为

```
#dad
{
    overflow-y: scroll;
    overflow-x: hidden;
    width: 100px;
    height: 600px;
    background-color:red;
}​ 
```

我删除了你们中的一些 Jquery 并将其更改为

```
dad.bind('scroll', function() {
    dad.css('background-color', 'pink');
}); 
```

我删除了这条线

```
iChild.css('backgroundColor', 'red'); 
```

但是红色很重要，它肯定不会起作用 [http://jsfiddle.net/2YeZG/5/](http://jsfiddle.net/2YeZG/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:26:07.520

我喜欢曼努埃尔的解决方案。但即使我不明白你到底想要做什么，我还是想指出一些事情。在您的小提琴代码中，我看到您将 Paul Irish 的 Shim 包含在 requestAnimationFrame 中。但你从不使用它。（它基本上是一个可靠的 setTimeOut，仅此而已）它来自基于帧的动画。）

因此，既然您只想更改一些 CSS 属性，我不明白您为什么需要它。即使你想要过渡，你也应该依赖 CSS 过渡。

除此之外，您的代码可能看起来像

```
dad.bind('scroll', function() {
  dad.css('background-color', 'pink');
  eachElemNameHere.css('background-color','randomColor');
}); 
```

另外，如果可以提供帮助，最好不要使用类似的东西。您应该只添加和删除类名并在 CSS 中添加所有这些属性。使其工作得更快。

此外，我还是不太明白，但您可以使用 jQuery 函数从顶部找出每个元素的位置，以便更好地控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:26:05.827

您的问题似乎是您只更改了**已滚动到视图**中的元素的背景颜色。您的代码期望浏览器在浏览器重绘其视图之前等待您的代码处理滚动事件。这很可能不是 HTML 规范给出的保证。这就是它闪烁的原因。

相反，您应该做的是更改**将要滚动到视图中**的元素。这与计算机游戏编程中所称的*离屏渲染*或*双缓冲有关。*您在屏幕外构建场景并将完成的场景复制到可见帧缓冲区。

我修改了您的第一个 JSFiddle 以包含滚动区域高度的乘数：http: [//jsfiddle.net/2YeZG/13/](http://jsfiddle.net/2YeZG/13/)。

```
dad.bind('scroll', function() {
    // new: query multiplier from input field (for demonstration only) and print message
    var multiplier = +($("#multiplier")[0].value);
    $("#message")[0].innerHTML=(multiplier*100)-100 + "% of screen rendering";

    // your original code
    var newScrollY = newScrollY = dad.scrollTop();
    var isForward = newScrollY > oldScrollY;
    var minVal = bSearch(bots, newScrollY, true);

    // new: expand covered height by the given multiplier
    //      multiplier = 1 is similar to your code
    //      multiplier = 2 would be complete off screen rendering
    var newScrollYHt = newScrollY + multiplier * dadHeight;

    // your original code (continued)
    var maxVal;
    for (maxVal = minVal; maxVal < botsLen; maxVal++) {
        var nxtTopSide = tops[maxVal];
        if (nxtTopSide >= newScrollYHt) {
            break;
        }
    }
    maxVal = Math.min(maxVal, botsLen);
    $(dadKids.slice(minVal, maxVal)).css('background', 'pink');
}); 
```

您的代码的乘数为 1，这意味着您更新了当前可见的元素（滚动区域高度的 100%）。如果将乘数设置为 2，您将获得所有元素的完整屏幕外更新。浏览器将足够多的元素更新为新的背景颜色，因此即使 100% 滚动也会显示更新的元素。由于浏览器很少一步滚动 100% 的区域（取决于操作系统和滚动方法！），将乘数降低到例如 1.5（意味着屏幕渲染减少 50%）可能就足够了。在我的机器（Google Chrome、带触摸板的 Mac OS X）上，如果乘数为 1.7 或更高，我无法产生任何闪烁。

顺便说一句：如果你做的事情比仅仅改变背景颜色更复杂，你不应该一次又一次地这样做。相反，您应该检查元素是否已经更新并仅在之后执行更改。

# scala - 为什么不允许在方法内部重载方法（例如重载闭包）？

> ID：12515328
> 
> 赞同：16
> 
> 时间：2012-09-20T14:55:38.377
> 
> 标签：scala, compiler-construction

一个最小化的例子如下：

```
object Main extends App { 
  def f = {
    def giveMeBigDecimal(x: String) = BigDecimal(x)
    def giveMeBigDecimal(x: Double) = BigDecimal(x)
    (giveMeBigDecimal("1.0"), giveMeBigDecimal(1.0))
  }
} 
```

Scala 2.9.2 编译器一直告诉我，`method giveMeBigDecimal is defined twice`
我知道如何[解决这个问题](https://stackoverflow.com/questions/7550302/why-method-overloading-does-not-work-inside-another-method)，但很好奇为什么存在这样的限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T06:29:09.033

这是 Scala 的实现细节，（不幸的是）进入了规范。Scala 将局部方法实现为具有闭包类型的变量，并且不允许在同一个方法中有两个同名的变量。

# javascript - Javascript/Regexp：从 url 获取 facebook 专辑的 id？

> ID：12515330
> 
> 赞同：0
> 
> 时间：2012-09-20T14:55:45.650
> 
> 标签：javascript, regex

```
function sa_get_facebook_album_id(url){
    var m = url.match(/\?set=a\.[0-9]*\./);

    return m;
} 
```

此函数应该在传递其 URL 后返回专辑的 ID。

但我只想得到数字（[0-9]）而不是别的。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:57:25.090

使用**捕获组**来存储`id`：

```
function sa_get_facebook_album_id(url){
    var m = url.match(/\?set=a\.([0-9]*)\./);
    return m[1];
} 
```

捕获组在括号中，即 ，`([0-9]*)`您可以稍后使用 . 来引用它`m[1]`。请注意，它`m[0]`包含整个匹配的字符串、`m[1]`第*一个*捕获的组，等等。

**[演示](http://jsfiddle.net/RQCm4/)**。

# html - RSS 代码看起来不错，但在浏览器中无法查看

> ID：12515331
> 
> 赞同：0
> 
> 时间：2012-09-20T14:55:59.917
> 
> 标签：html, xml, xml-parsing

我正在制作目录的 xml，但遇到了问题。一切似乎都很好，但是当我上传它时，我的浏览器窗口中什么都看不到。我点击了页面源，它​​显示了我所有的代码，但由于某种原因没有正确解析它。有人可以检查我的问题是什么吗？将其用作 RSS 提要

[http://www.316apps.com/NewallaSermons/Directory.xml](http://www.316apps.com/NewallaSermons/Directory.xml)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:01:21.027

从您的 xml 判断，我冒昧地猜测您正在尝试将 RSS 提要放在一起。我冒昧地验证了您的 RSS 提要，但出现了错误。使用下面的源查看验证错误。

来源：[饲料验证服务](http://validator.w3.org/appc/check.cgi?url=http://www.316apps.com/NewallaSermons/Directory.xml)

补充阅读：[RSS 2.0 规范](http://www.rssboard.org/rss-specification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:04:35.773

尽管 XML 本身是可扩展的，但特定的应用程序（如 RSS）却不是（或者它们需要对扩展进行特殊处理，如正确的命名空间）。如果您想使用自己的命名空间，请尝试使用 Atom，但如果您只是想让它在浏览器中显示某些内容，那么只坚持使用 RSS 规范元素就可以了。

# java - XML 解析：如何将 XML 文件中的下一个元素放入字符串？(Java/安卓)

> ID：12515337
> 
> 赞同：1
> 
> 时间：2012-09-20T14:56:14.353
> 
> 标签：java, android, string, xml-parsing, jdom

我想解析我自己的 XML 文件，所以我从 Internet 下载了一个简单的 Parser。

```
public class ParsingXML extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.main);
    setContentView(R.layout.relativelayout);
    TextView journal = (TextView) findViewById(R.id.journal);
    TextView publisher = (TextView) findViewById(R.id.publisher);
    TextView edition1 = (TextView) findViewById(R.id.edition1);
    TextView title1 = (TextView) findViewById(R.id.title1);
    TextView author1 = (TextView) findViewById(R.id.author1);

    TextView edition2 = (TextView) findViewById(R.id.edition2);
    TextView title2 = (TextView) findViewById(R.id.title2);
    TextView author2 = (TextView) findViewById(R.id.author2);

    try {
        XmlResourceParser xpp = getResources().getXml(R.xml.catalog);

        xpp.next();
        int eventType = xpp.getEventType();
        int iter = 0;
        String elemtext = null;

        while (eventType != XmlPullParser.END_DOCUMENT) {

            if (eventType == XmlPullParser.START_TAG) {

                String elemName = xpp.getName();
                if (elemName.equals("catalog")) {
                    String journalAttr = xpp.getAttributeValue(null,
                            "journal");
                    String publisherAttr = xpp.getAttributeValue(null,
                            "publisher");
                    journal.setText(journalAttr);
                    publisher.setText(publisherAttr);
                }
                if (elemName.equals("article")) {
                    iter = iter + 1;
                }

                if (elemName.equals("edition")) {
                    elemtext = "edition";
                }
                if (elemName.equals("title")) {
                    elemtext = "title";
                }
                if (elemName.equals("author")) {
                    elemtext = "author";
                }
            }

            else if (eventType == XmlPullParser.TEXT) {
                if (iter == 1) {
                    if (elemtext.equals("edition")) {
                        edition1.setText(xpp.getText());
                    } else if (elemtext.equals("title")) {
                        title1.setText(xpp.getText());
                    } else if (elemtext.equals("author")) {
                        author1.setText(xpp.getText());
                    }
                }

                else if (iter == 2) {
                    if (elemtext.equals("edition")) {
                        edition2.setText(xpp.getText());
                    } else if (elemtext.equals("title")) {
                        title2.setText(xpp.getText());
                    } else if (elemtext.equals("author")) {
                        author2.setText(xpp.getText());
                    }

                }
            }
            eventType = xpp.next();
        }

    } catch (XmlPullParserException e) {
    } catch (IOException e) {
    }

}
}

<?xml version = '1.0' encoding = 'UTF-8'?>
<catalog journal="sample journal" publisher="sample journal">
<article>
    <edition>EDITION 1</edition>
    <title>TITLE 1</title>
    <author>AUTHOR 1</author>
</article>
<article>
    <edition>EDITION 2</edition>
    <title>TITLE 2</title>
    <author>AUTHOR 2</author>
</article><article>
    <edition>EDITION 3</edition>
    <title>TITLE 3</title>
    <author>AUTHOR 3</author>
</article><article>
    <edition>EDITION 4</edition>
    <title>TITLE 4</title>
    <author>AUTHOR 4</author>
</article><article>
    <edition>EDITION 5</edition>
    <title>TITLE 5</title>
    <author>AUTHOR 5</author>
</article>
</catalog> 
```

问题：每个元素都有 2 个 TextView，但我的 XML 文件包含更多元素。如何让解析器将下一个元素写入字符串，以便 TextView 显示下一个元素？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:21:22.133

如果您的 xml 文件中有 1000 个元素怎么办？你会创建一个有这么多视图的布局吗？

您应该创建一个表示文章元素的布局文件，并在读取 xml 时，从 xml 数据初始化布局并将其膨胀到您的活动视图。

这是 LayoutInflater：http: [//developer.android.com/reference/android/view/LayoutInflater.html](http://developer.android.com/reference/android/view/LayoutInflater.html)

示例：[如何使用布局扩展一个视图](https://stackoverflow.com/questions/2335813/how-to-inflate-one-view-with-an-layout)

# javascript - 动态更改 SVG-Path 的各个部分

> ID：12515338
> 
> 赞同：0
> 
> 时间：2012-09-20T14:56:18.160
> 
> 标签：javascript, html, svg, raphael

我正在将 RaphaelJS 用于 SVG 图形，并且我有这样的路径：

```
var path = canvas.path("M50,100 l0,100 c100,-100, 200,100, 300,0"); 
```

但稍后我可能想更改图表的某些部分。例如：

```
var path = canvas.path("M50,100 l0,100 c100,100, 200,-100, 300,0"); 
```

请注意 moveTo 和 lineTo 命令是相同的，只是curveTo 的两个参数发生了变化。我可以`path`直接更改部分，还是必须绘制一条新路径并删除旧路径？

（[小提琴](http://jsfiddle.net/SktmU/4/)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:03:08.943

演示：http: [//jsfiddle.net/dBqya/](http://jsfiddle.net/dBqya/)

```
function togglePath(path){
    path.attr('path', 'M50,100 l0,100 c100,100, 200,-100, 300,0');
}

var canvas = Raphael('canvas', 500, 500);

var path = canvas.path('M50,100 l0,100 c100,-100, 200,100, 300,0');
path.attr({ stroke: 'red', 'stroke-width': 3 });

document.getElementById('toggle').addEventListener('click', function () { 
  togglePath(path);
});
​ 
```

# javascript - 将 JavaScript 与 JQuery 一起包含的问题

> ID：12515339
> 
> 赞同：0
> 
> 时间：2012-09-20T14:56:19.433
> 
> 标签：javascript, jquery

我有这个代码

> ```
> <head>
> <script type="text/javascript"
>   src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"> </script>
> <script type="text/javascript" src="future_value.js"> </script> 
> 
>  <script>
>   $(document).ready(function()
>   {
>       $("button").click(function()
>       {
>           $("#popup").toggle();
>       });
>   });
> </script> 
> ```

我有一些 jQuery 代码和一些 JavaScript 代码，但我无法运行它。似乎我包含文件的方式不正确，因为当我删除 JavaScript 标记时，jQuery 工作正常，而当我删除 JQuery 标记时，JavaScript 工作正常。

我可能错过了一些东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:10:12.057

看起来future_value 正在使用jQuery 的一些函数进行操作。试试看这个文件是否覆盖了一些 jQuery 的方法。例如，如果它对`$`.
您也可以尝试替换`$`为`jQuery`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:10:14.440

你的文件有冲突。编写的人在他们的代码`future_value.js`中使用了`$`作为函数。jQuery 也是如此，因此它们相互冲突。你有几个选择：

*   `$`如果future_value.js足够短，请进行搜索并将 的所有实例替换为`fv`.

*   使用 jQuery noConflict [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)并在使用后`jQuery()`代替`$()`所有 jQuery 操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:28:18.413

如果 $-variable 真的有什么问题，试试这个：

```
(function($)
{
  $(document).ready(function()
  {
      $("button").click(function()
      {
          $("#popup").toggle();
      });
  });
})(jQuery); 
```

# ios - 具有不同图像大小的 iOS 网格状视图

> ID：12515343
> 
> 赞同：1
> 
> 时间：2012-09-20T14:56:47.580
> 
> 标签：ios, uitableview, view, grid

我一直在寻找堆栈溢出的时间，但还没有看到这样的问题，所以这里是：

我需要一个类似网格的视图，如下所示，它将用不同大小的单元格填充每一行。在所有网格视图中，我看到所有单元格都是相同的，并且很难自定义以获得如下所示的内容：

[http://s7.postimage.org/7al1fs8jv/image.png](http://s7.postimage.org/7al1fs8jv/image.png)

我已经没有想法了，只是想知道是否有人有更简单或更好的方法来解决这个问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:22:18.557

Manu 实现这一目标的方法

1.石英二维绘图

2.自定义视图并使用它通过计算矩形以编程方式添加到占位符视图中

# java - java标签自动字体大小

> ID：12515345
> 
> 赞同：0
> 
> 时间：2012-09-20T14:56:57.710
> 
> 标签：java, label, font-size

我有一个 SWT 标签，它显示从文件加载的不同单行文本。有没有办法自动调整字体大小，以便在出现长文本时字体大小变小并且标签仍然显示全文？当 Label 没有这个属性时，是否可以使用 font 和 fontsize 来计算 String 的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:59:53.773

这是我的理解。您的标签宽度是固定的（假设为 200）。您读取的字符串需要 300 像素才能适合当前字体。您可以使用以下方法计算绘制所需的尺寸`GC.textExtent(String)`

试试这个工作示例

```
 private static boolean setText(Label label, String txt, Font font)
  {

    int height = font.getFontData()[0].getHeight();
    GC gc = new GC(label);
    gc.setFont(font);
    Point size = gc.textExtent(txt);
    Rectangle bounds = label.getBounds();
    int diff = bounds.width-size.x;
    if(diff >= 0 || height <=2)
    {
      label.setFont(font);
      label.setText(txt);
      return true;
    }
    else
    {

      String name = font.getFontData()[0].getName();
      int style = font.getFontData()[0].getStyle();
      FontData data = new FontData(name, Math.max(1,height-1), style);
      Font newFont = new Font(Display.getCurrent(), data);
      if(!setText(label, txt, newFont))
      {
        newFont.dispose();
      }
    }
    gc.dispose();
    return false;
  }

  public static void main(String[] args) {

    Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setSize(600, 300);

    Label label = new Label(shell, SWT.NONE);
    label.setBounds(20, 20, 100, 50);
    setText(label, "hello stackoverflow!!!!!!", Display.getDefault().getSystemFont());
    shell.open();

    while (!shell.isDisposed()) {
      if (!display.readAndDispatch())
        display.sleep();
    }
    display.dispose();

  } 
```

# objective-c - IOS在旋转时重新组织图形

> ID：12515349
> 
> 赞同：0
> 
> 时间：2012-09-20T14:57:20.160
> 
> 标签：objective-c, ios, xcode, ipad, orientation

我正在制作一个带有 19 个按钮的 iPad 应用程序，这些按钮都是图形。它们在eatchother旁边和下方对齐，就像在网格中一样。在纵向模式下，它们显示得很好（因为我就是这样设置它们的），但我不知道横向模式需要选择什么设置。

例如，当设备变为横向时，我有 4 列而不是 3 列的空间。如何使应用程序在旋转时自动调整按钮的布局？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:24:27.367

在 iOS5.1 或更早版本中，您需要在代码中执行此操作。在 iOS6 中，您可以使用 UICollectionView - 不确定没有玩过它。

# c# - Fluent nHibernate - 尝试缓存选择语句

> ID：12515357
> 
> 赞同：1
> 
> 时间：2012-09-20T14:57:42.100
> 
> 标签：c#, fluent-nhibernate

我正在尝试缓存一个选择语句，但没有成功。

我有这个实体

```
public class Merchant : Entity<Merchant>
{
    public virtual int Id { get; set; }

    public virtual string Name { get; set; }
    public virtual string Email { get; set; }
    public virtual string OrdersEmail { get; set; }
    public virtual string Host { get; set; }

} 
```

映射是这样的

```
public class MerchantMap : ClassMap<Merchant>
{
    public MerchantMap()
    {
        Id(m => m.Id);

        Map(m => m.Name);
        Map(m => m.OrdersEmail);
        Map(m => m.Email);
        Map(m => m.Host);

        Cache.ReadWrite();
        ReadOnly();

    }
} 
```

. 会话工厂是使用此类生成的：

```
 public ISessionFactory TenantConfiguration()
    {
        var connectionString = System.Configuration
                                     .ConfigurationManager
                                     .ConnectionStrings["Tenant"]
                                     .ConnectionString;

        var config = Fluently.Configure()
            .Database(MsSqlConfiguration.MsSql2008
                                        .ConnectionString(connectionString)
            )
            .Mappings(cfg => cfg.FluentMappings
                                .AddFromAssemblyOf<Entities.Merchant>()
            )
            .Cache(c =>
                   c.UseQueryCache()
                    .UseSecondLevelCache()
                    .ProviderClass<NHibernate.Cache.HashtableCacheProvider>()
                    .RegionPrefix("Tenant")
            )
            .ExposeConfiguration(c => c.SetProperty(
                                          NHibernate.Cfg
                                                    .Environment
                                                    .SessionFactoryName, 
                                          "Tenant")
            )
            .BuildConfiguration();

        var factory = config.BuildSessionFactory();
        return factory;
    }

    public ISession CreateMerchantSession()
    {
        lock (factorySyncRoot)
        {
            return TenantConfiguration().OpenSession();
        }

    } 
```

我要缓存的唯一查询是以下查询：

```
var merchants = new TenantSessionSource().CreateMerchantSession()
                                         .QueryOver<Merchant>()
                                         .Cacheable().Future().ToList(); 
```

我几乎尝试了所有方法，并且将所有相关问题都涂红了，但没有成功。从 nhibernate 探查器中，我看到每次它打开一个新会话并重复执行此查询。

有任何想法吗？谢谢

# algorithm - 从上下文无关文法生成字符串

> ID：12515369
> 
> 赞同：4
> 
> 时间：2012-09-20T14:58:16.640
> 
> 标签：algorithm, context-free-grammar

问题是实现一种算法，该算法从给定的上下文无关语法**G**生成长度在**l**和**r**之间的所有字符串。

 **我想出了简单的方法：在语法图上运行 BFS，记住状态。但它在一些递归规则上失败了：

```
(1)   S -> 0 | SSS | λ 
```

我不能简单地限制最大字符串长度，因为规则可以包含 λ（空字符串），所以非终结符可以减少最终字符串长度。（例如，使用 运行 (1) `l = 1`， `r = 2`在我的实现中将仅输出 0）

我也尝试限制应用规则的最大数量，但这显然也是错误的。

我如何限制或更改我的算法，使其永远不会陷入无限循环并正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:19:59.357

您可以将语法转换为[Greibach 范式](http://en.wikipedia.org/wiki/Greibach_normal_form)，然后创建中的每一步¹都会 增加生成的单词的大小，并且您将能够限制单词的长度，如问题中最初解释的那样。

* * *

(1) 如果空词在语法中，可能除了第一个**

# batch-file - Shell 输出重定向到多个管道

> ID：12515371
> 
> 赞同：0
> 
> 时间：2012-09-20T14:58:20.580
> 
> 标签：batch-file, cmd, findstr

在 cmd.exe 中，某个命令会产生以下形式的输出：

```
Asd foo content 1
Qwe bar content 1
Asd foo content 2
Qwe bar content 2
... 
```

我想将其格式化为生成：

```
foo content 1, bar content 1
foo content 2, bar content 2 
```

我怎么做？

我的猜测是“&”（并行命令）、“|”的组合 可以使用（管道）、“findstr”和另一个命令来剪切一行的相关部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:47:38.233

您应该能够将命令的结果通过管道传输到 Windows 的 sed 中，但这需要下载非本机实用程序。GnuWin[项目](http://gnuwin32.sourceforge.net/)有一个免费版本的 sed。

这是一个不需要任何下载的本机批处理解决方案。

```
@echo off
setlocal disableDelayedExpansion
for /f "delims=" %%A in ('yourCommand') do (
  set "ln=%%A"
  setlocal enableDelayedExpansion
  set "ln2=!ln:*foo =foo !"
  if "!ln2!" neq "!ln!" (
    <nul set /p "=!ln2!"
  ) else (
    echo , !ln:*bar =bar !
  )
  endlocal
) 
```

以上将丢弃以 a 开头的行`;`，并且还将丢弃空行。如果需要，这两个限制都可以通过额外的代码来解决。

循环内延迟扩展的切换是为了保留`!`可能出现在输出中的任何字符。`!`如果扩展 FOR 变量时输出包含并启用延迟扩展，则结果将被破坏。

# c++ - 抽象类的 shared_ptr 向量到副本向量

> ID：12515374
> 
> 赞同：2
> 
> 时间：2012-09-20T14:58:31.043
> 
> 标签：c++, inheritance, c++11

我有一个带有共享指针的向量：

```
std::vector<std::shared_ptr<DescriptorsNs::Descriptor> > mDescriptorList; 
```

现在我想要一个 getter 函数，它返回一个带有这些对象副本的向量：

```
void CatUpdater::getDescriptorList(std::vector<Descriptor*>& descriptorList) const
{
    descriptorList.clear();
    for (auto it = mDescriptorList.begin(); it != mDescriptorList.end(); it++)
    {
        descriptorList.push_back(*it);
    }
} 
```

现在的问题是 Descriptor 是一个抽象类，当我尝试将它们添加到向量时，它正确地指出：

```
/usr/include/c++/4.7/ext/new_allocator.h|110|error: cannot allocate an object of abstract type ‘DescriptorsNs::Descriptor’| 
```

我可以通过尝试`std::dynamic_pointer_cast`所有类型的派生类来解决这个问题，但应该有一种更简单的方法来实现这一点。

谁能告诉我将原始对象复制到返回向量的更好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:33:24.443

你不能让 Descriptor 对象，因为它是抽象的。

但是您可以制作指向这些对象的指针的深层副本。

为此，您的类描述符缺少`clone`虚拟方法！

将它添加到您的类并在您的派生中正确实现。

```
class Descriptor {
 ...
  virtual Descriptor* clone() const = 0;
};

class SomeDescriptor : public Descriptor {
 ...
  virtual Descriptor* clone() const { return new SomeDescriptor (*this); }
}; 
```

并在将一个向量深拷贝到另一个向量时使用 clone()：

```
void CatUpdater::getDescriptorList(std::vector<std::shared_ptr<DescriptorsNs::Descriptor> >& descriptorList) const
{
    descriptorList.clear();
    descriptorList.reserve(mDescriptorList.size());
    for (auto it = mDescriptorList.begin(); it != mDescriptorList.end(); it++)
    {
        descriptorList.push_back((*it)->clone());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:06:14.797

我猜当你使用`shared_ptr`s 存储你的对象时，它们要么是大对象，不应该被复制，要么它们代表不应该被复制的东西的单个实例。

在这种情况下，您最好只填充一个 const 指针向量，这将阻止调用者修改指向的对象。

```
typedef std::shared_ptr<const Descriptor> ConstSharedPtr;

void CatUpdater::getDescriptorList(
                    std::vector<ConstSharedPtr>& descriptorList
                    ) const
{
    descriptorList.clear();

    for (auto it = mDescriptorList.begin(); it != mDescriptorList.end(); it++)
    {
        descriptorList.push_back(it);
    }
} 
```

# php - Twitter API：在不发送用户名/密码的情况下获取访问令牌

> ID：12515375
> 
> 赞同：0
> 
> 时间：2012-09-20T14:58:34.893
> 
> 标签：php, oauth, twitter, twitter-oauth

我在**不发送用户名和密码的情况下获取 twitter 用户访问令牌和秘密令牌时遇到问题**。一旦用户之前已经对我的应用程序进行了身份验证，我想通过发送 twitter_id 来获取访问令牌。

**所以场景是：**

用户登录我的网站（使用自定义登录），他已经授予我的应用程序读取/写入他的推文的权限。现在我需要加载这个用户访问令牌和秘密访问令牌。

```
Database:
CustomUID : 1 , Twitter_ID: 123456\. 
```

因此，由于我知道 CustomUID 1 已登录，因此我需要来自 Twitter_ID:123456 的访问令牌/密钥。

**问题**是我找不到一个 API 函数可以让我在不**重定向到 Twitter 回调**函数（Twitter 登录页面）的情况下获取访问令牌，用户必须在其中输入他/她的用户名和密码，再次因为请求令牌通过 URL 获取。

我怎么解决这个问题？我习惯了 Facebook API，其中已经授权我的应用程序的用户允许我在发送**getAccessToken($ID)**时接收他们的访问令牌。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:29:20.990

在用户第一次进行身份验证后，您可能必须在您的数据库中保存 OAuth 令牌和访问令牌。然后在下次需要代表该用户执行查询时检索令牌。

# svn - 如何在颠覆中将维护分支中的错误修复合并回主干

> ID：12515376
> 
> 赞同：3
> 
> 时间：2012-09-20T14:58:35.993
> 
> 标签：svn, merge

在 svn 书（[http://svnbook.red-bean.com/en/1.7/svn.branchmerge.commonpatterns.html](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.commonpatterns.html)）中，在 Common Branching Patterns 部分中，它说：

> 主干被复制到“发布”分支。当团队认为软件已经准备好发布（比如 1.0 版本）时，/trunk 可能会被复制到 /branches/1.0。
> 
> 团队继续并行工作。一个团队开始对发布分支进行严格的测试，而另一个团队继续在 /trunk 上进行新工作（例如，对于 2.0 版）。如果在任一位置发现错误， **则会根据需要来回移植修复程序**。然而，在某些时候，甚至该过程也会停止。该分支在发布之前被“冻结”以进行最终测试。

（强调我的）。我假设维护分支与发布分支相同..？（我们需要在开发他们的下一个版本时让一个客户保持在以前的版本）。

我很确定我不应该使用`--reintegrate`，但我不太确定如何以不会弄乱未来合并的方式进行合并。我是否需要手动跟踪修订范围？..或者颠覆会为我做这件事（我使用的是1.7.6版）。

**[编辑：更多细节]**

```
trunk> svn mkdir c
trunk> touch a.txt b.txt c\d.txt
trunk> svn add a.txt b.txt c\d.txt
trunk> svn ci -m "initial trunk"
...
Committed revision 9580.

trunk> svn copy .../trunk .../branches/branch1 -m "create maint branch"
Comitted revision 9581.

trunk> svn rm c\d.txt
trunk> svn ci -m "Fix bug-1."
Deleting       c\d.txt

Committed revision 9582.

branch1> svn merge .../trunk
--- Merging r9581 through r9582 into '.':
D    c\d.txt
--- Recording mergeinfo for merge of r9581 through r9582 into '.':
 U   .

branch1> svn ci -m "Merged fix for bug-1 from trunk."
Deleting       c\d.txt
Committed revision 9583.

branch1> svn propget svn:mergeinfo .
/svntests/trunk:9581-9582

trunk> svn up
Updating '.':
At revision 9583. 
```

**【原问题】**

```
trunk> svn merge .../branches/branch1
--- Merging r9581 through r9583 into '.':
   C c\d.txt
--- Recording mergeinfo for merge of r9581 through r9583 into '.':
 U   .
Summary of conflicts:
  Tree conflicts: 1 
```

**[来自@JB Nizet 的修复]**

```
trunk> svn merge -c 9583 --record-only .../branch1
--- Recording mergeinfo for merge of r9583 into '.':
 U   .

trunk> svn propget svn:mergeinfo .
/svntests/branches/branch1:9583 
```

那么来自维护分支的未来合并将起作用（正确更新主干上的合并信息）而不会产生冲突：

```
trunk> svn merge .../branch1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T08:55:57.120

发布分支用于准备发布的最后步骤。发布完成后，维护分支用于修复错误。它们都是分支，这纯粹是语义上的差异，但仍然是不同的。

要合并您的错误修复，您只需确保您的工作副本指向主干（目标分支），然后从维护分支（或维护分支的修订范围，如果您不希望所有内容合并）合并：

```
svn merge url_of_the_maintenance_branch 
```

下一次合并会记住这些修订已经合并到主干，并会自动跳过它们。

# ios - 使用 RestKit 在 Twitter 的状态/更新资源上进行 POST

> ID：12515385
> 
> 赞同：0
> 
> 时间：2012-09-20T14:59:01.410
> 
> 标签：ios, twitter, restkit, twitter-oauth

我正在尝试使用 RestKit 发布推文，但反复收到 401 回复（“消息”：“无法验证您”，“代码”：32）。

```
RKObjectManager *twitterObjectManager = [RKObjectManager managerWithBaseURLString:@"https://api.twitter.com"];

twitterObjectManager.client.authenticationType = RKRequestAuthenticationTypeOAuth1;

twitterObjectManager.client.OAuth1ConsumerKey = @"abc";
twitterObjectManager.client.OAuth1ConsumerSecret = @"xyz";
twitterObjectManager.client.OAuth1AccessToken = @"lmn";
twitterObjectManager.client.OAuth1AccessTokenSecret = @"qrs";

NSMutableDictionary *parameters = [NSMutableDictionary dictionaryWithObject:@"Make it work" forKey:@"status"];

[twitterObjectManager.client post:@"/1.1/statuses/update.json" params:parameters delegate:self]; 
```

使用来自 statuses/user_timeline 的 GET 读取状态时，相同的 oAuth 键起作用。

还有什么需要做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:16:43.200

推特是正常的，尝试使用 API `version 1`，`NOT 1.1`

# c# - 使用带有表达式方法的 linqkit 谓词时出错

> ID：12515392
> 
> 赞同：1
> 
> 时间：2012-09-20T14:59:26.657
> 
> 标签：c#, linq, dynamics-crm-2011, linqkit

**一点背景知识：**
我正在使用不支持某些操作的 Linq 提供程序（[MsCrm2011 Linq 提供程序](http://msdn.microsoft.com/en-us/library/ff681573.aspx)，但并不重要）。
具体来说，它不支持`Contains()`在表达式内部。
含义-这样的事情不起作用：`var users = DataContext.Users.Where(user => userIds.Contains(user.Id))`.

[我找到的解决方案](http://www.crmcodex.com/2011/12/tip-getting-around-a-contains-issue-in-linq-for-mscrm2011/)是使用[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)的谓词，所以`userIds.Contains(...)`我将拥有`user.Id == userIds[0] || user.Id == userIds[1] ... || user.Id == userIds[100]`.

为此，我定义了以下函数，它接受任意集合和任意表达式，并对它们应用“或”：

```
private IQueryable<TCrmEntity> FilterByCollection<TCrmEntity, T>(IQueryable<TCrmEntity> entities, IEnumerable<T> collection, Expression<Func<TCrmEntity, T, bool>> filterFunction)
    {
      var predicate = PredicateBuilder.False<TCrmEntity>();
      predicate = collection.Aggregate(predicate, (current, collectionElement) => current.Or(entity => filterFunction.Invoke(entity,collectionElement)));

      var query = entities.AsExpandable()
        .Where(predicate);

      return query;
    } 
```

这样，我可以使用任何一种集合和任何一种表达方式。
例如，查看此测试运行（使用内存中的用户集合）：`var res = FilterByCollection(users.AsQueryable(), rolesList, (account, role) => account.Role == role)`查找具有给定角色之一的所有用户。

但是，当我运行上面的示例时，我遇到了以下异常 - `variable 'entity' of type 'User' referenced from scope '', but it is not defined`。

有任何想法吗？

PS 不确定这有多相关，但是当我实际使用 Crm 数据上下文而不是内存中集合时，我没有收到此错误。：/

# java - 如果条件不能正常工作

> ID：12515399
> 
> 赞同：0
> 
> 时间：2012-09-20T14:59:52.333
> 
> 标签：java, if-statement

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我写了这段代码：

```
 public String[] removeDuplicates(String[] input){

    int i;
    int j;
    int dups = 0;
    int array_length = input.length;
    for(i=0; i < array_length; i++){
        //check whether it occurs more than once
        for(j=0; j < array_length; j++){
            if (input[i] == input[j] && i != j){
                dups++; //set duplicates boolean true
                input[j] = null;  //remove second occurence
            } //if cond
        } // for j
    } // for i
    System.out.println("Category contained " + dups + " duplicates.");
    return input;
} 
```

它应该检查一个字符串数组是否包含一个或多个重复项。但是，即使我这样定义数组：

```
String[] temp = new String[2];
temp[0] = "a";
temp[1] = "a"; 
```

if 条件未被“触发”。我误解了 && 的工作原理吗？在我看来，程序应该首先检查两个字符串是否相同（它们是...），然后检查两个索引是否相同。如果不是，它应该执行操作。但是，这些程序似乎不这么认为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:04:40.520

Java 中最常见的错误之一是在引用对象时假定 a`String`是对象。当您使用时，`==`您是在比较参考文献，而不是它们的内容。这就是为什么`.equals()`需要比较它们的内容。

顺便说一句，您可以删除重复项

```
public static String[] removeDuplicates(String[] input){
    return new HashSet<String>(Arrays.asList(input)).toArray(new String[0]);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T15:01:21.353

Java 中的`==`运算符检查两个对象是否相同，而不是它们是否*相等*。两个字符串可能具有相同的内容，并且比较是否相等。您需要`equals`改用：

```
if (i != j && input[i].equals(input[j])){
} 
```

如果元素`null`之间允许值`input`，则需要在`null`条件中添加检查以避免异常：

```
if (i != j && input[i] != null && input[i].equals(input[j])){
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T15:01:30.600

**永远不要**用来`==`检查两个对象是否具有相同的值。采用`equals()`

`==`将检查它们的内存位置（如果两个对象实际上只有一个），`equals()`这种方法会告诉您两者是否代表相同的信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T15:01:43.937

在使用字符串（以及任何非原始类型）时，请记住 == 通过引用而不是值进行比较。改为使用`equals()`。

```
if (input[i].equals(input[j]) && i != j){
    dups++; //set duplicates boolean true
    input[j] = null;  //remove second occurence
} //if cond 
```

作为一个经验法则，当你想检查两个对象是否完全是同一个对象时，使用 == （你可以把它想象成两个指针都引用相同的地址）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T15:02:18.383

您应该`String.equals`用于检查字符串内容。`==`操作员只检查对象引用：

```
if (input[i] != null && input[i].equals(input[j]) && i != j) { 
```

# java - 使用 Apache Camel 进行端点注入

> ID：12515402
> 
> 赞同：2
> 
> 时间：2012-09-20T14:59:53.783
> 
> 标签：java, dependency-injection, apache-camel

我将**Apache Camel**用于项目，我想使用**生产注释**在文件中发送对象。首先，可能吗？有没有更好的办法 ？

其次，我尝试了这段代码：

```
public class MyProducer {

  private static final String MEDIA = "file:";

  private static final String PATH = "c:/directory";

  @Produce(uri = MEDIA + PATH)
  protected ProducerTemplate producer;

  public void publish(MyObject o) {
    producer.sendBody(o);
  }
} 
```

当我调用发布方法时，生产者不是注入（null）。有人有想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:37:05.483

这取决于您如何创建 MyProducer 类。您必须在 spring 上下文中将其定义为 spring bean 才能使注释起作用。

# java - 我正在启动但无法访问方法的java接口请阅读并清除它

> ID：12515403
> 
> 赞同：0
> 
> 时间：2012-09-20T14:59:53.443
> 
> 标签：java

众所周知，servlet 的`get`方法使用`HttpServletRequest(interface)`变量request 的引用，并且这个request 变量能够访问它所实现类的方法。

但是现在当我有一个`Sanjeev`包含`show()`方法的接口时，我在一个类中实现它`xxx`。现在在另一个类中，我正在创建这样的接口引用

```
sanjeev sa =new xxx();
sa.show(); 
```

它的工作，但如果我这样做

```
sanjeev sa;
sa.show(); 
```

`HttpServletRequest(interface)`在请求工作的情况下它不起作用。为什么？请告诉我，我很困惑...

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:02:51.130

如果你这样做：

```
sanjeev sa;
sa.show(); 
```

你会得到一个错误，因为`sa` *没有引用任何东西*。您需要先初始化一个类的实例，然后才能调用实例方法，而您并*没有这样做*。不存在的东西无法执行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:24:18.363

在 java 中，如果某个变量/对象（这里是 sa）没有被初始化，则不会为其分配内存。当你在这里调用 sa.show() 时，sa 没有任何意义，因为它没有被初始化...... java 的基本“A 变量/object 应该在使用前初始化

# ios - 将图像写入 ALAssetsLibrary 会导致不同的文件哈希

> ID：12515406
> 
> 赞同：1
> 
> 时间：2012-09-20T15:00:03.260
> 
> 标签：ios, file-io, hash, alassetslibrary

我有一个从服务器下载图像并将它们插入 iPhone 的 ALAssetsLibrary 的应用程序，以便用户可以在他们保存的相册中看到这些图像。我正在尝试通过比较文件哈希来进行确认，以确保图像已成功下载。我有文件哈希，因为文件存在于服务器上。完成将图像写入 ALAssetsLibrary 后，我会在客户端上生成文件哈希。我观察到文件哈希不同，但文件似乎相同。我很好奇客户是否正在以某种我可能不知道的方式更改这些图像（纵横比、比例、元数据等）。任何指导、意见或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:13:09.267

图像数据本身在导入资产库期间不会更改。但是，我观察到 JPEG 文件在导入到 Assets-Library 后会变大约 10KB。Assets-Library 似乎将 JFIF-Metadata-Dictionary 添加到文件中，如果还没有的话。

# javascript - 如何同步更多的gif图片？

> ID：12515410
> 
> 赞同：1
> 
> 时间：2012-09-20T15:00:10.740
> 
> 标签：javascript, html

有什么办法，如何同步gif动画？问题是如果它们有相同的时间，但在不同的时间加载，它会看起来很奇怪。我不知道，例如通过一些javascript“刷新”或重新加载或其他东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:03:04.347

GIF 动画不可编写脚本。**您可以做的最好的事情是通过 JavaScript 加载它们，然后在它们加载后将**它们都插入到 DOM中。

像这样的东西：

```
var img = new Image();
var imgCount = 0;
img.onload = loadCount;
img.src="....."

var img2 = new Image();
img2.onload = loadCount;
img2.src="....."

function loadCount() {
    imgCount++;
    if(imgCount==2) {
       //insert IMG tags into DOM
    }  
} 
```

# c++ - 这是在做什么：“输入 >> 4 & 0x0F”？

> ID：12515412
> 
> 赞同：5
> 
> 时间：2012-09-20T15:00:16.543
> 
> 标签：c++, bitwise-operators

我根本不明白这段代码在做什么，有人可以解释一下吗？

```
long input;  //just here to show the type, assume it has a value stored
unsigned int output( input >> 4 & 0x0F ); 
```

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T15:01:08.503

将输入的 4 位向右位移，然后用低 4 位屏蔽。

以这个 16 位数字为例：（点仅用于视觉分离）

```
1001.1111.1101.1001 >> 4 = 0000.1001.1111.1101

0000.1001.1111.1101 & 0x0F = 1101 (or 0000.0000.0000.1101 to be more explicit) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-18T09:27:55.807

& 是按位与运算符。有时会使用“& 0x0F”来用 0 填充前 4 位，或者**忽略**值中的第一个（最左边）4 位。

0x0f = 00001111。因此，0x0f 与任何其他位模式的按位 & 操作将仅保留最右边的 4 位，清除左边的 4 位。

如果输入的值为 01010001，在执行 &0x0F 之后，我们将得到 00000001 - 这是我们在清除左 4 位后得到的模式。

再举一个例子，这是我在项目中使用的代码：

字节verflag = (Byte)(bIsAck & 0x0f) | ((版本 << 4) & 0xf0)。在这里，我将两个值组合成一个 Byte 值以节省空间，因为它在数据包头结构中使用。bIsAck 是 BOOL，version 是 Byte，其值非常小。因此，这两个值都可以包含在单个 Byte 变量中。

结果变量中的第一个半字节将包含版本的值，第二个半字节将包含 bIsAck 的值。我可以在接收时通过执行 4 位 >> 将值检索到单独的变量中，同时获取版本的值。

希望这与您的要求接近。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T15:07:53.203

那就是将“输入”的内容按位右移 4 位，然后将结果与 0x0F (1101) 进行按位与。

它的作用取决于“输入”的内容和类型。它是一个整数吗？沿着？一个字符串（这意味着在指向第一个字节的指针上进行移位和按位与）。

Google for "c++ bitwise operations" 了解更多关于幕后发生的事情的细节。此外，请查看[C++ 运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)，因为 C/C++ 的优先级与许多其他语言中的不同。

# sql - 关于 MDX 中的 Max 函数

> ID：12515417
> 
> 赞同：1
> 
> 时间：2012-09-20T15:00:29.393
> 
> 标签：sql, ssas, max, mdx

我有一个具有结构的事实表：（objectid，fromLoc，toLoc，duration）。

我需要以下 SQL 的等效 MDX：

```
select fromLoc, toLoc, max(duration) from fact group by fromLoc, toLoc; 
```

我尝试使用以下 MDX，但显示错误的结果。它显示 sum(duration) 而不是显示每个分组的最大值：

```
WITH
  MEMBER [Measures].[MaxValue] AS
  max([Measures].[Duration]) 
 select FromLoc.members on axis(1),
toLoc.members  on axis(0)
from [cube1]
where [Measures].[MaxValue] 
```

请通过提供正确的 MDX 来帮助我，它可以回答上述 SQL 等查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:14:02.427

您必须像这样使用[max](http://msdn.microsoft.com/en-us/library/ms145601.aspx)函数：

```
max(the set of your objectids, [Measures].[Duration]) 
```

# iis - WSO2 通过 ESB 将 Windows NTLM 身份验证传递给 .NET REST 数据服务

> ID：12515418
> 
> 赞同：0
> 
> 时间：2012-09-20T15:00:32.577
> 
> 标签：iis, wcf-data-services, windows-authentication, wso2, esb

我有一个使用基本身份验证驻留在 Windows 服务器上的 .NET 数据服务。我在 ESB 中设置了一个自定义代理服务，它指向我的数据服务端点。当我通过 Internet Explorer 访问数据服务时，它会按预期要求我提供凭据，并且一切正常。但是，当我将 IIS 更改为对数据服务使用 Windows 集成身份验证时，我没有得到响应。如何让 ESB 处理我的数据服务与浏览器或任何其他调用数据服务的应用程序之间的身份验证握手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:45:54.663

“Windows 集成身份验证”是指 kerberos 吗？如果是这样[http://blog.facilelogin.com/2010/12/kerberos-authentication-with-wso2-esb.html](http://blog.facilelogin.com/2010/12/kerberos-authentication-with-wso2-esb.html)可能会帮助你。

问候，/女娲

# three.js - 从 Blender 导出骨骼动画时出错

> ID：12515419
> 
> 赞同：2
> 
> 时间：2012-09-20T15:00:41.053
> 
> 标签：three.js

我对搅拌机 2.63 的导出骨骼动画有疑问。模型和动画在 3d max 中完成，并在搅拌机 collada 中导出。

屏幕截图设置导出器：clip2net.com/s/2jP4m

截图搅拌机，姿势位置：clip2net.com/s/2jP89

现场演示版，带导出姿势位置：213.219.244.158/boneanim/index2.html

屏幕截图搅拌器，休息位置：clip2net.com/s/2jPax

错误，休息位置：clip2net.com/s/2jPc9

现场演示版，带出口休息位置：213.219.244.158/boneanim/index.html

文件：

搅拌机文件：213.219.244.158/boneanim/blender.blend

科拉达文件：213.219.244.158/boneanim/run.DAE

Json文件，姿势位置：213.219.244.158/boneanim/untitled2.js

Json文件，休息位置：213.219.244.158/boneanim/untitled.js

*PS原谅stackoverflow不允许我插入链接。*

# java - Javamail，Transport.send() 非常慢

> ID：12515420
> 
> 赞同：6
> 
> 时间：2012-09-20T15:00:44.390
> 
> 标签：java, jakarta-mail, bulk, mass-emails

我已经编写了一种批量发送电子邮件的方法，但它非常慢（每 10 秒大约 3 封邮件）。我想发送数千封邮件。有没有办法更快地做到这一点？

我现在使用 gmail 但仅用于测试，最后我想使用自己的 SMTP 服务器发送。

这是代码：

```
public boolean sendMessages()
{
    try 
    {
        Session session = Session.getInstance(this._properties, new javax.mail.Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                 return new PasswordAuthentication("user", "password");
            }
        });
        MimeMessage message = new MimeMessage(session);
        message.setFrom(new InternetAddress(this.getFrom()));

        message.setSubject(this.getSubject());
        message.setText(this.getBody());                
        for (int i = 0, c = this._addresses.size(); i < c; i++)
        {
            message.setRecipient(Message.RecipientType.TO,  new InternetAddress(this._addresses.get(i)));                    
            Transport.send(message);
        }
        return true;
     } 
     catch(AuthenticationFailedException e) {
         e.printStackTrace();
           return false;
     }
     catch(MessagingException e) {
         e.printStackTrace();
           return false;
     }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T18:27:45.113

好的，谢谢你的建议。

我的解决方案是：

```
Transport transport = session.getTransport("smtp");
transport.connect(this._properties.getProperty("mail.smtp.host"), 
Integer.parseInt(this._properties.getProperty("mail.smtp.port")),
    this._properties.getProperty("mail.smtp.user"),
    this._properties.getProperty("mail.smtp.password"));

Address[] addr = new Address[this._addresses.size()];
for (int i = 0, c = this._addresses.size(); i < c; i++)
{
    addr[i] = new InternetAddress(this._addresses.get(i));
}

transport.sendMessage(message, addr); 
```

# wordpress - Wordpress 显示自定义帖子类型

> ID：12515421
> 
> 赞同：3
> 
> 时间：2012-09-20T15:00:44.600
> 
> 标签：wordpress, wordpress-theming, custom-post-type

我是 WordPress 的新手。我为视频创建了自定义帖子类型，但我不知道如何在页面中显示帖子类型。例如，我希望当用户添加视频时，他在发布视频时不必选择视频模板，并且当他们打开已发布的视频时，页面会打开视频播放器而不是打开页面。我想要一个带有视频播放器的自定义页面，我所要做的就是为视频播放器提供视频的 url。已经有了视频播放器的代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T15:29:23.280

要为您的所有自定义帖子类型帖子或页面创建默认**[模板文件](http://codex.wordpress.org/Post_Type_Templates)**，您可以命名您的模板文件`single-{your-cpt-name-here}.php`，或者`archive-{your-cpt-name-here}.php`在查看这些帖子或页面时它将始终默认为此。

因此，例如，**`single-video.php`**您可以输入：

```
<?php query_posts( 'post_type=my_post_type' ); ?> 
```

或者改为进行自定义查询以塑造您想要的输出：

```
<?php
$args = array(
    'post_type' => 'my_post_type',
    'post_status' => 'publish',
    'posts_per_page' => -1
);
$posts = new WP_Query( $args );
if ( $posts -> have_posts() ) {
    while ( $posts -> have_posts() ) {

        the_content();
        // Or your video player code here

    }
}
wp_reset_query();
?> 
```

在您的自定义循环（如上面的示例）中，Wordpress 中有许多可用的**[模板标签](http://codex.wordpress.org/Template_Tags)**（如`the_content`）可供选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-01T19:40:36.037

**在 Functions.php 中编写代码**

```
 function create_post_type() {
    register_post_type( 'Movies',
    array(
        'labels' => array(
            'name' => __( 'Movies' ),
            'singular_name' => __( 'Movie' )
        ),
        'public' => true,
        'has_archive' => true,
        'rewrite' => array('slug' => 'Movies'),
    )
); 
```

**现在在你想显示的地方写下这段代码**

```
 <?php
    $args = array( 'post_type' => 'Movies', 'posts_per_page' => 10 );
    $loop = new WP_Query( $args );
    while ( $loop->have_posts() ) : $loop->the_post();
    the_title();
    echo '<div class="entry-content">';
    the_content();
    echo '</div>';
    endwhile; 
```

?>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-27T19:44:27.137

创建 CPT 后，执行此操作以显示 CPT 的单个帖子：

*   复制`single.php`模板中的文件并将其重命名为 `single-{post_type}.php`（例如`single-movie.php`）
*   记得从 WordPress 中刷新永久链接！

您可以从[这篇文章中获得更多详细信息](http://blog.netgloo.com/2014/08/27/showing-single-posts-of-a-custom-post-type-in-wordpress/)

*   现在，如果您想显示 CPT 列表，您可以使用带有 args的[get_posts() ：](http://codex.wordpress.org/Template_Tags/get_posts)

    `$args = array( ... 'post_type' => 'movie' )`

查看[此帖子](https://coderpills.wordpress.com/2014/08/27/showing-a-list-of-custom-post-type-using-get_posts-loop-in-wordpress/)以获取更多详细信息。

# sql-server - 主机文件中的 SQL 服务器名称

> ID：12515423
> 
> 赞同：2
> 
> 时间：2012-09-20T15:00:51.827
> 
> 标签：sql-server, sql-server-express

我正在开发一个 ASP.NET 应用程序，我们正在使用 TFS 进行源代码控制。在开发过程中，每次我们需要更改connectionString中的“数据源”指向我们的本地服务器。我正在运行 SQLEXPRESS，所以我在 web.config 文件中编写了 .\SQLEXPRESS，它工作正常。现在我们不应该再修改 web.config 文件，需要在 hosts 文件中添加一条记录，以将 web.config 文件中的“数据源”指向我本地机器的 SQL 服务器。比如说，我们在 web.config 中有“DEVDATABASE”作为“数据源”，hosts 文件行应该如何工作？像下面这样的东西？

.\SQLEXPRESS 开发数据库

然而，这不起作用。有人可以帮我理解它应该如何工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:03:20.917

您不能使用主机文件（或 DNS）指向命名实例。这意味着只重定向到特定的机器，而不是特定的机器+端口号。您可以尝试[在客户端网络实用程序中创建别名](http://www.mssqltips.com/sqlservertip/1620/how-to-setup-and-use-a-sql-server-alias/?utm_source=AaronBertrand)- 您还需要确保 TCP/IP 已启用并且 SQL Browser 服务正在运行。

# iphone - 适用于 iPhone/iPad 应用程序的所有可能方法

> ID：12515425
> 
> 赞同：1
> 
> 时间：2012-09-20T15:00:54.027
> 
> 标签：iphone, ios, ipad, ios-universal-app

我需要为 iPad 和 iPhone 用户开发一些应用程序。

我知道有3种方法：

1.  `Two distinct Apps`，一个用于 iPhone，一个用于 iPad。（未在苹果商店链接）
2.  `One Universal app`（出现`+`在Apple Store登录，应用商店根据设备选择所需的应用）（我从xcode中选择制作应用`Universal`）。
3.  `One application with two targets`, 一个用于 iPhone，一个用于 iPad。（在 xcode 中使用 iPad 的重复目标）（在苹果商店中链接）。

我需要了解上面 2 和 3 之间的区别。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:13:48.010

不同之处在于，在 2 中，您从一个可在 iPad 和 iPhone 上运行的 Xcode 项目创建一个二进制文件。它有一个通用的目标，这意味着它可以在 iPad 和 iPhone 上运行，需要您适当地调整用户界面。

在 3 中，我相信您是在暗示您创建一个 Xcode 项目并在项目内创建两个构建目标。我以前做过这个，它允许您轻松地在应用程序之间共享文件。只需添加对要在两个目标中共享的文件的引用。至于 3 在 AppStore 中的外观，它看起来与 1 相同，是两个独立的应用程序。

# asp.net - 将 JSON 数据发布到 .NET 对象。

> ID：12515426
> 
> 赞同：0
> 
> 时间：2012-09-20T15:00:57.507
> 
> 标签：asp.net, json

我正在学习 JSON。我要做的就是发回一些数据并将其转换为.NET 对象。

我一直在尝试不同的教程，我想我有点理解它。下面是我的代码。我不明白的是，请求对象中保存 Json 数据的内容是什么，我如何反序列化它？

我的 Javascript

```
 $(function () {
        // Do your stuff here

        alert("wööööö");

    urlToHandler = 'JSonTestHandler.ashx';
    jsonData = '{ "FavoriteFood":"Pasta with butter and cheese", "FavoriteSport": "Submission Wrestling", "FavoriteGame": "Starcraft 2", "FavoriteMusic": "Hip Hop" }';
    $.ajax({
        url: urlToHandler,
        data: jsonData,
        dataType: 'json',
        type: 'POST',
        contentType: 'application/json',
        success: function (data) {
            setAutocompleteData(data.responseDateTime);
        },
        error: function (data, status, jqXHR) {
            alert('There was an error.');
        }
    }); // end $.ajax

}); 
```

我的 JSON 处理程序

```
[WebService(Namespace = "http://localhost:53243")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class JSonTestHandler : IHttpHandler, System.Web.SessionState.IReadOnlySessionState
{

    public void ProcessRequest(HttpContext context)
    {
        var json = new JavaScriptSerializer();

        var memoryStream = new MemoryStream();
        var serializer = new DataContractJsonSerializer(typeof(PersonalPreferences));

        memoryStream.Position = 0;

        var personalPreferenceFromJson = (PersonalPreferences)serializer.ReadObject(memoryStream);

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

保存 Json 数据的我的对象

```
 [DataContract]
public class PersonalPreferences
{
    [DataMember]
    public string FavoriteFood { get; set; }

    [DataMember]
    public string FavoriteSport { get; set; }

    [DataMember]
    public string FavoriteGame { get; set; }

    [DataMember]
    public string FavoriteMusic { get; set; }

    public PersonalPreferences()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:47:49.180

实际上，我认为我唯一需要的是找出在 Request 对象中我可以找到我应该解析为 objekt 的实际字符串！我什么都找不到。

我找到了，从我使用的 Request 对象中获取它

```
string jsonData = new StreamReader(context.Request.InputStream, System.Text.Encoding.UTF8).ReadToEnd(); 
```

# arrays - 查找数组的忍者索引

> ID：12515429
> 
> 赞同：8
> 
> 时间：2012-09-20T15:01:10.980
> 
> 标签：arrays, algorithm, language-agnostic

这是我遇到的一个有趣的谜题，根据这个谜题，给定一个数组，我们需要在其中找到忍者索引。

Ninja 索引由以下规则定义：

一个索引 K，使得所有具有较小索引的元素的值都小于或等于 A[K]，而所有具有较大索引的元素的值都大于或等于 A[K]。

例如，考虑：

`A[0]=4, A[1]=2, A[2]=2, A[3]=3, A[4]=1, A[5]=4, A[6]=7, A[7]=8, A[8]=6, A[9]=9.`

在这种情况下，`5`是 ninja index ，因为 A[r]<=A[5] for r = [0,k] 和 A[5]<=A[r] r = [k,n]。

我们应该遵循什么算法在 O(n) 中找到它。我已经有一个蛮力 O(n^2) 解决方案。

编辑：可以有超过 1 个 ninja index ，但我们最好找到第一个。如果没有 NI ，那么我们将返回 -1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T15:06:28.103

预先计算数组所有后缀的最小值和所有前缀的最大值。有了这个数据，每个元素都可以在 O(1) 中检查 Ninja。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:34:14.067

一个需要 O(3n) 操作的 python 解决方案

```
def n_index1(a):
    max_i = []
    maxx = a[0]
    for j in range(len(a)):
        i=a[j]

        if maxx<=i and j!=0:
            maxx=i
            max_i.append(1)

        else:
            max_i.append(-1)

    return max_i

def n_index2(a):
    max_i = []
    maxx = -a[len(a)-1]
    for j in range(len(a)-1,-1,-1):
        i=-a[j] # mind the minus

        if maxx<=i and j!=len(a)-1:         
            maxx=i
            max_i.append(1)

        else:
            max_i.append(-1)

    return max_i

def parse_both(a,b):
    for i in range(len(a)):
        if a[i]==1 and b[len(b)-1-i]==1:
            return i

    return -1

def ninja_index(v):
    a = n_index1(v)
    b = n_index2(v)

    return parse_both(a,b) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T17:42:12.113

另一个 Python 解决方案，遵循相同的通用方法。可能会短一些。

```
def ninja(lst):
    maxs = lst[::]
    mins = lst[::]
    for i in range(1, len(lst)):
        maxs[   i] = max(maxs[   i], maxs[ i-1])
        mins[-1-i] = min(mins[-1-i], mins[-i  ])
    return [i for i in range(len(lst)) if maxs[i] <= lst[i] <= mins[i]] 
```

我想它可以对列表复制操作进行一些优化，但这样更简洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T20:32:24.260

这个直截了当的 Java 代码计算最左边的索引，该索引具有“所有向右的元素都不少”的属性：

```
private static int fwd(int[] a) {
    int i = -1;
    for (int j = 0; j < a.length - 1; j++) {
        if (a[j + 1] >= a[j] && i == -1) {
            i = j + 1;
        } else if (i != -1 && a[j + 1] < a[i]) {
            i = -1;
        }
    }
    return i;
} 
```

几乎相同的代码计算具有属性“向左的所有元素都不大于”的最左边的索引：

```
private static int bwd(int[] a) {
    int i = -1;
    for (int j = 0; j < a.length - 1; j++) {
        if (a[j + 1] >= a[j] && i == -1) {
            i = j + 1;
        } else if (i != -1 && a[j + 1] < a[i]) {
            i = -1;
        }
    }
    return i;
} 
```

如果结果相同，则找到最左边的 Ninja 索引。

# mapkit - iOS6 地图包跨度

> ID：12515439
> 
> 赞同：3
> 
> 时间：2012-09-20T15:01:41.780
> 
> 标签：mapkit, zooming, html, ios6, ios6-maps

iOS6 提供的新地图不允许跨度低于大约 0.001。有没有其他人看到这个问题？

```
CLLocationCoordinate2D coord = {.latitude= 37.980600, .longitude= -87.593932};
MKCoordinateSpan span = {.latitudeDelta= 0.0, .longitudeDelta =  0.0}; //smaller the number = greater zoom
MKCoordinateRegion region = {coord, span};
[mapView setRegion:region animated:YES]; 
```

即使使用 0.0 作为缩放范围，我也可以在模拟器中打开地图并通过手势进一步缩放。另外值得注意的是，与我自己的应用程序相比，我可以使用手势进一步放大实际的“地图”应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:42:30.523

是的，它完全按照您的描述工作，我将一些示例代码发送给 Apple，看看他们是否有什么要说的。还没有答案。这一定是故意的，pe

# javascript - 使用 jquery datepicker 选择日期的周数

> ID：12515448
> 
> 赞同：5
> 
> 时间：2012-09-20T15:02:19.890
> 
> 标签：javascript, jquery, datepicker, jquery-ui-datepicker

我有以下代码用于选择一个日期，然后我想将其转换为周数。

```
 $(".calendar").datepicker({
        showWeek: true,
        onSelect: function(dateText, inst) {
            dateFormat: "'Week Number '" + $.datepicker.iso8601Week(new Date(dateText)),
            alert($.datepicker.iso8601Week(new Date(dateText)))
        }
    }); 
```

警报显示正确的周数，但日期根本没有重新格式化。

我不能将 dateFormat 函数移到 onSelect 之外，因为这不会导致任何事情发生。

我想要实现的是在文本字段中显示“第 13 周”之类的内容

有任何想法吗？

[http://jsfiddle.net/ENG66/](http://jsfiddle.net/ENG66/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T15:26:35.760

我已经更新了小提琴以使其工作：http: [//jsfiddle.net/ENG66/11/](http://jsfiddle.net/ENG66/11/)

在 onselect 事件中，需要使用 .val() 覆盖文本框值的设置

```
$(".calendar").datepicker({
        showWeek: true,
        onSelect: function(dateText, inst) {
            $(this).val("'Week Number '" + $.datepicker.iso8601Week(new Date(dateText)));
        }
    });​ 
```

**编辑**

正如 Igor Shastin 在下面的评论中指出的那样，我们已经有了文本框`inst.input`

```
inst.input.val($.datepicker.iso8601Week(new Date(dateText))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:22:56.813

试试这个**[jsFiddle 示例](http://jsfiddle.net/j08691/ENG66/7/)**。

```
$(".calendar").datepicker({
    showWeek: true,
    onSelect: function(dateText, inst) {
        dateFormat: "'Week Number '" + $.datepicker.iso8601Week(new Date(dateText)),
        $(this).val('Week:' + $.datepicker.iso8601Week(new Date(dateText)));
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T15:22:25.760

上面的答案假设日期格式可以由 Javascript 本地处理。对于较短的欧洲日期（dd/mm/yyyy，而不是美国的 mm/dd/yyyy），您可以通过 datepicker 本身获取日期值，它将自动处理转换。

```
$("#week_field").val( $.datepicker.iso8601Week( $("#date_field").datepicker( "getDate" ) )); 
```

您可以像这样为 datepicker 设置不同的日期格式

```
$.datepicker.setDefaults( {dateFormat : "dd/mm/yy"} ); 
```

# c++ - TWAIN 示例，C++

> ID：12515451
> 
> 赞同：3
> 
> 时间：2012-09-20T15:02:32.080
> 
> 标签：c++, twain, image-scanner

在 C++ 中，我想使用 TWAIN 库设置以下扫描仪参数：分辨率、窗口位置和直方图设置（阴影、高光、伽马、最大/最小强度）。网络上有什么好的例子可以作为起点吗？

顺便说一句，有什么理由使用基于 TWAIN 而不是直接 TWAIN 的商业库 - 有什么优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:45:25.640

[您可以从twain.org](http://twain.org)下载 twain 规范并从那里开始。[这篇文章](http://www.codeproject.com/Articles/7720/A-Copy-Utility-using-TWAIN)也可能有帮助。

对于您的 BTW 问题，这是一个权衡。:) 学习 TWAIN 规范需要时间，从几天到几周不等，购买商业图书馆也需要钱。此外，商业图书馆通常带有一些超越 TWAIN 的功能以及技术支持。所以，这有点取决于预算和项目进度。

# css - 如果 IE 只适用于样式表？

> ID：12515452
> 
> 赞同：0
> 
> 时间：2012-09-20T15:02:32.967
> 
> 标签：css, internet-explorer

所以我不得不通过 [if IE] 注释对 IE 使用条件样式。我一直在尝试将其放入我的代码中，但我发现了一些我无法解释的不一致之处。

如果我这样使用它

```
<!--[if IE]>
<style type="text/css">
    #SomeName {
        width: 100em;
    }
</style>
<![endif]--> 
```

它只是行不通。

但是，如果我将样式放在 css 表中并添加一个链接，它就可以工作。

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href=".../sheetName.css"/>
<![endif]--> 
```

有没有办法让我将样式放在 [if IE] 标签中，而不是通过标签链接它？它只是看起来不对。

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:11:02.443

你的代码没有错。

确保`#SomeName`在 html 中是这样的（*因为 css 规则区分大小写*），并确保在普通 css 包含之后包含您的代码（*以避免规则被普通 css 中的内容覆盖*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:41:25.830

如果您使用正确的 CSS 选择器，第一个代码片段应该可以正常工作。确保您使用的正是您需要调整的选择器。但是，选择器正在您的普通样式表中使用，只需将其复制并粘贴到条件标记中，然后更改您需要更改的宽度或其他内容。

# c# - 使用 Linq 将 xml 转换为 CLR 类型

> ID：12515459
> 
> 赞同：0
> 
> 时间：2012-09-20T15:02:42.063
> 
> 标签：c#, xml, linq

我有以下xml结构

```
<quiz xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="quiz.xsd">
    <mchoice>
        <question>What is the capital city of Australia?</question>
        <answer>Sydney</answer>
        <answer correct="yes">Canberra</answer>
        <answer>Melbourne</answer>
        <answer>Gold Coast</answer>
    </mchoice>
</quiz> 
```

我想使用以下代码将其转换为 CLR 类型

```
public class Question
{
    public int ID { get; set; }
    public string QuestionText { get; set; }
    public List<Answer> Answers { get; set; }
}

public class Answer
{
    public string Answer1 { get; set; }
    public string Answer2 { get; set; }
    public string Answer3 { get; set; }
    public string Answer4 { get; set; }

}

public List<Question> GetAll()
        {
            var doc = XDocument.Load(Filepath);
            var results = (from x in doc.Descendants("mchoice")
                           select new Question()
                                      {
                                          ID = Convert.ToInt16(x.Element("ID")),
                                          QuestionText = x.Element("question").Value.ToString(),
                                          Answers = new List<Answer>()
                                          {
                                             //How I would fill Answer collection

                                          }

                                      }).ToList();
            return results;
        } 
```

现在我对当前的设计有两个问题。

1.  我将如何填写答案集合
2.  我将如何处理当前设计中的正确答案属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:13:43.393

看起来您的模型不匹配。类中有四个单独的“答案”属性`Answer`。但是，您的`Question`类包含一个`Answer`对象列表。并且 XML 包含对应于单个问题的四个答案。似乎更准确的问题模型看起来像：

```
public class Question
{
    public int ID { get; set; }
    public string QuestionText { get; set; }
    public List<string> Answers { get; set; }
    public int CorrectAnswerIndex { get; set; } 
} 
```

在这种情况下，`Answer`可以完全忽略该类，

或者，您可以保持`Question`课程不变并将`Answer`课程更改为看起来更像

```
public class  Answer
{
    public string AnswerText { get; set; }
    public bool IsCorrect { get; set; }
} 
```

如果您使用这两种方法中的任何一种，就会更容易了解如何进行 XML 映射。但是，正如您提出的问题，**没有正确的答案，因为设计存在根本缺陷**。

对于第一个示例，您可以按照@LB 的建议进行 XML-Object 映射。但是，您需要将该`CorrectAnswerIndex`属性设置为等于列表中正确答案字符串的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:18:48.583

有第一个想法

```
 public class Question
    {
        public int ID { get; set; }
        public string QuestionText { get; set; }
        public Answer Answer { get; set; }
    }

    public class Answer
    {
        public string Answer1 { get; set; }
        public string Answer2 { get; set; }
        public string Answer3 { get; set; }
        public string Answer4 { get; set; }

    }
var results = (from x in doc.Descendants("mchoice")
               let answers = x.Elements("answer")
               select new Question()
                 {
                      ID = Convert.ToInt16(x.Element("ID")),
                      QuestionText = x.Element("question").Value,
                      Answer = new Answer
                        {
                            Answer1 = answers.First().Value,
                            Answer2 = answers.Skip(1).First().Value,
                            Answer3 = answers.Skip(2).First().Value,
                            Answer4 = answers.Last().Value
                         }

                  }).ToList(); 
```

使用更简单的模型

```
public class Question
    {
        public int ID { get; set; }
        public string QuestionText { get; set; }
        public List<string> AnswerTextList { get; set; }
    }

var results = (from x in doc.Descendants("mchoice")

                           select new Question()
                           {
                               ID = Convert.ToInt16(x.Element("ID")),
                               QuestionText = x.Element("question").Value,
                               AnswerTextList = (x.Elements("answer").Select(m => m.Value.ToString()).ToList())
                           }).ToList(); 
```

有一个好的模型

```
public class Question
    {
        public int ID { get; set; }
        public string QuestionText { get; set; }
        public List<Answer> AnswerList { get; set; }
    }

    public class Answer
    {
        public string Text { get; set; }
        public bool IsCorrect { get; set; }
    }

var results = (from x in doc.Descendants("mchoice")
        select new Question()
        {
            ID = Convert.ToInt16(x.Element("ID")),
            QuestionText = x.Element("question").Value,
            AnswerList = (x.Elements("answer").Select(m => new Answer
            {
                Text = m.Value,
                IsCorrect = m.Attribute("correct") != null && m.Attribute("correct").Value == "yes"
            }).ToList())
        }).ToList(); 
```

# regex - 正则表达式仅使用 egrep 捕获整个单词

> ID：12515462
> 
> 赞同：5
> 
> 时间：2012-09-20T15:02:54.703
> 
> 标签：regex, linux, shell, unix, grep

我正在使用 egrep 查看我们 perforce NAS 中的脚本。

我试图找到我们在哪里使用 RCP 和 RSH....我遇到的问题是 1）我在 REGEX 上很烂；2) 我正在收集我不感兴趣的垃圾。例如，如果一个文件有单词 strcpy..它会在 RCP..或所有权..点击 RSH 上获得。

显然我对这些不感兴趣，但我不想根据所有权或 strcpy 一词排除行......因为它们可能会结合使用......而且它不是一个完整的列表。

这是我的正则表达式

```
 'ftp|rcp|rsh' 
```

如何修改这些以访问 FTP，而不是 SFTP...rcp 但没有 strcpy，rsh 但不是所有权......等等？

所以我想要匹配的东西。

```
ftp
`ftp`
/ftp/
"PUNCT"FTP"PUNCT" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T15:06:32.620

也许你需要这样的东西：

`\b`< - 这是单词的边界

`\bpattern\b`<- 此模式将仅匹配`pattern`，但不匹配`otherbigpatternthatyounotneed`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T15:09:33.020

有几个元字符：

*   `\b`词界
*   `\<`词开始
*   `\>`词尾

因此，一种可能的正则表达式是：`\<(ftp|rcp|rsh)\>`

# eclipse - Tomcat 7.0.28 未启动

> ID：12515465
> 
> 赞同：2
> 
> 时间：2012-09-20T15:03:05.197
> 
> 标签：eclipse, tomcat

我正在尝试将 ZK 项目添加到 Eclipse 中的 Tomcat 7。但它失败了。这是堆栈跟踪：

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component      
[StandardEngine[Catalina].StandardHost[localhost].StandardContext[/ERAZK]]
 at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
 at java.util.concurrent.FutureTask.get(FutureTask.java:83)
 at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1142)
 at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
 at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
 at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1595)
 at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1585)
 at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
 at java.util.concurrent.FutureTask.run(FutureTask.java:138)
 at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
 at java.lang.Thread.run(Thread.java:619)
 Caused by: org.apache.catalina.LifecycleException: Failed to start component  
   [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/ERAZK]]
 at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
 Caused by: java.lang.NoClassDefFoundError: org/jfree/data/DefaultPieDataset
  at java.lang.Class.getDeclaredMethods0(Native Method)
  at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
  at java.lang.Class.getDeclaredMethods(Class.java:1791)
  at org.apache.catalina.util.Introspection.getDeclaredMethods(Introspection.java:108)
  at org.apache.catalina.startup.WebAnnotationSet.loadMethodsAnnotation(WebAnnotationSet.java:279)
  at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:141)
  at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:67)
  at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:382)
  at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
  at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:346)
  at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
  at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5172)
  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
   ... 7 more
Caused by: java.lang.ClassNotFoundException: org.jfree.data.DefaultPieDataset
  at  org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
  at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
  at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
    ... 21 more 
```

我检查了我的类路径并且 jfreechart.jar 在我的 WEB-INF 文件夹中。我在这里看到了与 HttpServlet 错误类似的错误，但这对我的问题没有帮助。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:21:23.463

```
I have checked my classpath and jfreechart.jar is in my WEB-INF folder. 
```

在 WEB-INF/lib 中而不是在 WEB-INF 目录中添加 JFreeChart 库

# ios - 更改 CFDataRef 的字节时，iOS 6 上的 EXC_BAD_ACCESS 但不是 5

> ID：12515469
> 
> 赞同：4
> 
> 时间：2012-09-20T15:03:13.750
> 
> 标签：ios, ios6, exc-bad-access, core-foundation, cfdata

我有一个应用程序将各种过滤器应用于图像。它在 iOS 5 上运行良好，但在 6 上崩溃。下面是它崩溃的示例：

```
CGImageRef inImage = self.CGImage;
CFDataRef m_DataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage)); 
UInt8 * m_PixelBuf = (UInt8 *) CFDataGetBytePtr(m_DataRef); 

int length = CFDataGetLength(m_DataRef);

for (int i=0; i<length; i+=4)
{
    if(filter == filterCurve){

    int r = i;
    int g = i+1;
    int b = i+2;

    int red = m_PixelBuf[r];
    int green = m_PixelBuf[g];
    int blue = m_PixelBuf[b];

    m_PixelBuf[r] = SAFECOLOR(red); //    <==== EXC_BAD_ACCESS (code = 2)
    m_PixelBuf[g] = SAFECOLOR(green);
    m_PixelBuf[b] = SAFECOLOR(blue);
   }
} 
```

当我尝试将值分配回`m_PixelBuf`. 有人知道为什么会这样吗？iOS 6 中的什么会导致这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T05:17:12.960

这解决了问题：[http ://www.iphonedevsdk.com/forum/iphone-sdk-development/108072-exc_bad_access-in-ios-6-but-not-in-ios-5.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/108072-exc_bad_access-in-ios-6-but-not-in-ios-5.html)

在 iOS 6 中，如果要直接操作数据的字节，则需要使用`CFDataCreateMutableCopy()`(而不是`CGDataProviderCopyData()`)，然后使用 (而`CFDataGetMutableBytePtr()`不是)。`CFDataGetBytePtr()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:25:09.117

This is the url where you find new class which works with ios 6:https://github.com/kypselia/ios-image-filters/blob/6ef9a937a931f32dd0b7b5e5bbdca6cce2f690dc/Classes/ImageFilter.m

# php - 在字符串中查找一个没有空格的单词 PHP

> ID：12515471
> 
> 赞同：1
> 
> 时间：2012-09-20T15:03:21.950
> 
> 标签：php, xml, string, parsing, find

我用 PHP 解析一个 XML 文件。我的问题是我有一个包含多行的动态字符串，每行没有空格字符，我想在该字符串上找到一个单词。字符串的长度是动态的，所以它每次都会改变。

由于字符串长度是动态的，我不能使用类似的东西，`$c = substr($string, 0, -1)`或者我不能使用类似的东西，`$i=stripos($story," word");`因为字符串中没有空格。

示例字符串是 4 行，我想在之前的第二行检测单词 ARC.docx `</a>`：

```
<![CDATA[
In <a href='/home/Apps/ARCMeeting'>ARCMeeting</a>, You edited the file <a href='https://dropbox.com/get/Apps/ARCMeeting/ARC.docx?w=d3' title='&#47;Apps&#47;ARCMeeting&#47;ARC.docx'>ARC.docx</a>.
<br/>
]]> 
```

我的目标是将之前第二行的 ARC.docx 添加`</a>`到消息正文中

```
$message='X File has been edited!'; 
```

所以我可以打印

```
$message='ARC.docx File has been edited!'; 
```

如何检测`.......>exampleword</a>.`上述字符串之间的单词？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:35:19.500

您可以尝试[preg_match](http://php.net/manual/en/function.preg-match.php)功能。

在你的情况下，它看起来像：

```
$subject = "In <a href='/home/Apps/ARCMeeting'>ARCMeeting</a>, You edited the file <a href='https://dropbox.com/get/Apps/ARCMeeting/ARC.docx?w=d3' title='&#47;Apps&#47;ARCMeeting&#47;ARC.docx'>ARC.docx</a>"

preg_match("/title=(.*)>(.*)<\/a>/U", $subject, $matches);

echo $matches[2]; // $matches[2] will contain `ARC.docx` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:40:23.667

使用[DOM 解析器](http://php.net/manual/en/book.dom.php)，例如 PHP 内置的解析器。

```
$doc = new DOMDocument();

$html_string = <<<EOD
 <![CDATA[
 In <a href='/home/Apps/ARCMeeting'>ARCMeeting</a>, You edited the file <a href='https://dropbox.com/get/Apps/ARCMeeting/ARC.docx?w=d3' title='&#47;Apps&#47;ARCMeeting&#47;ARC.docx'>ARC.docx</a>.
 <br/>
 ]]>
EOD;

@$doc->loadHTML($html_string);

$urls = $doc->getElementsByTagName('a');

foreach ($urls as $url) {
 echo $url->nodeValue;
} 
```

> ARC.docx

# android - Galaxy S3 上的 FLAG_ACTIVITY_CLEAR_TOP 会导致暂时显示 android 主屏幕。

> ID：12515474
> 
> 赞同：0
> 
> 时间：2012-09-20T15:03:29.637
> 
> 标签：android, android-intent

当后退按钮被覆盖或我只是将其设置为单击其他按钮时，都会发生这种情况。

发生的情况是，当按下该键时，所有活动都被清除，并且在显示 other.class 之前，android 的主屏幕会显示一秒钟左右。

这不会发生在我测试过的任何其他设备上。

有输入吗？

```
@Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {

            if (keyCode == KeyEvent.KEYCODE_BACK) {
                Intent switchScreen = new Intent(this, other.class);
                switchScreen.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(switchScreen);        }
            return super.onKeyDown(keyCode, event);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:20:02.687

那是正确的行为。但是，问题可以解决。

**解决方案**

onCreate() 的另一个-`Activity`

```
Intent lIntent = new Intent(this, other.class);
lIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(lIntent); 
```

在你的`Manifest.xml`

```
<activity android:name=".other"
          android:launchMode="singleTop">
...
</activity> 
```

# r - 使用 r 中的定位器删除插入到绘图中的文本框

> ID：12515477
> 
> 赞同：2
> 
> 时间：2012-09-20T15:03:53.623
> 
> 标签：r, plot

如何删除使用定位器插入的最后一项（如文本框）？IE

```
plot(1:3)
text(locator(1),labels="oops wrong spot...remove me",cex=1,font=1) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T15:34:18.067

你可以很容易地实现一些可以让你这样做的东西：

```
locator <- function(...) {
    assign('.last.plot', recordPlot(), envir=.GlobalEnv)
    graphics::locator(...)
}

undo <- function()
   if (exists('.last.plot')) replayPlot(.last.plot)

plot(1:3)
text(locator(1),labels="oops wrong spot...remove me",cex=1,font=1)
undo() 
```

# javascript - 注入控制器和模拟 AngularJS 服务

> ID：12515480
> 
> 赞同：1
> 
> 时间：2012-09-20T15:04:09.633
> 
> 标签：javascript, unit-testing, testing, angularjs

我终于设法完成了一个非常简单的端到端测试，即

在**场景.js 中：**

```
describe('My app', function () {
    beforeEach(function () {
        browser().navigateTo('/');
    });

    describe('On Load', function () {
        it('Textbox should be blank', function () {
            expect(input('textbox').val()).toBe('');
        });
    });
}); 
```

我的**runner.html**看起来像这样：

```
<head>
    <title>End2end Test Runner</title>
    <script src="/js/libs/angular-scenario.js" ng-autotest></script>
    <script src="/js/libs/angular-mocks.js"></script>
    <script src="/js/test/e2e/scenarios.js"></script>
</head> 
```

这会启动我的网站、导航并检查输入是否为空白。高手。

**但是**我现在想添加这个测试，它扩展了我到目前为止的内容：

```
describe('Click on Add', function () {
    it('will add new item if valid', function () {
        input('newItemName').enter('Test Item');
        element('#add').click();
        expect(input('newItemName').val()).toBe('');
        expect(repeater('#items li').count()).toEqual(1);
    });
}); 
```

但在我运行这个测试之前，我想模拟我的应用程序所依赖的存储服务。

这是我的**控制器定义**：

```
myapp.controller('MyController', ['$scope', '$routeParams', '$filter', 'storage',
    function ($scope, $routeParams, $filter, storage) { 
        . . . . 
    }
]); 
```

这给我带来了问题（我认为），因为我想做这样的事情：

```
describe('Controller Unit Tests', function(){
    var ctrl;

    beforeEach(function(){
        ctrl = new MyController();
    });

    it('should ....', function() {
        expect(true).toBe(true);
    });
}); 
```

但不能因为我声明我的控制器的方式。我以这种方式声明我的控制器的原因是为了缩小目的......

有没有人对如何解决这个问题有建议？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:45:55.887

尝试

```
function MyController($scope, $routeParams, $filter, storage) {}
MyCtrl1.$inject = ['$scope', '$routeParams', '$filter', 'storage']; 
```

# database-design - 同一数据库中的共享表和每租户表

> ID：12515481
> 
> 赞同：0
> 
> 时间：2012-09-20T15:04:08.987
> 
> 标签：database-design, multi-tenant

**短版**：

可以在同一个数据库中拥有一些共享表和其他每租户表吗？

**更长的版本：**

我们（我和一些非 stackoverflow-ers）正在设计一些多租户 SAAS。

我们目前使用的是共享数据库和共享模式架构，每个表都有一个tenant_id 列来区分租户的数据。对于小型数据集，例如我们的“用户”表（如果我们有 1000 个租户，每个租户有 10 个用户，= 10,000 行），这工作得很好。

但是，有些表会变得非常大。例如，“文件”表。每个租户可能有一百万个文件，其元数据需要存储在数据库中。每个拥有 1,000,000 个文件的租户创建一个 10 亿行表。我担心这操作起来会很慢，我想按租户切碎文件表。

**问题：**

1.  有一些共享表和其他每租户表是否可以接受/可取，例如`files_<tenant_id>`？

    我想对可扩展性、备份、可维护性等问题进行批评。

2.  处理如此大的数据还有哪些其他选择。
3.  这仍然被认为是共享模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:51:48.930

哪个数据库？您是指数据库，就像 MySQL 表示数据库或模式一样？

真的，一个租户会有 100 万个文件吗？使用tenant-per-db将它们拆分会更容易

我们有tenant_id 风格的系统，如果我要再做一次，我会为每个模式选择一个租户。

# python - Python 嵌套的 IF 语句

> ID：12515482
> 
> 赞同：1
> 
> 时间：2012-09-20T15:04:10.657
> 
> 标签：python, python-2.7

我正在尝试创建一个脚本来检查文件夹中是否存在超过 7 天的文件并将其删除，但前提是存在距“现在”不到 1 天的文件。

因此，如果创建了不到 1 天的新文件，则删除所有超过 7 天的文件。

这是我的脚本 -

```
import os, time
path = r"C:\Temp" #working path#
now = time.time()
for f in os.listdir(path):
 f = os.path.join(path, f)
 if os.stat(os.path.join(path, f).st_mtime < now -1 * 86400 and\ #checking new file#
 if os.stat(os.path.join(path,f)).st_mtime < now - 7 * 86400: #checking old files#
  if os.path.isfile(f):
   os.remove(os.path.join(path, f) 
```

我在检查旧文件的行中遇到语法错误。我没有正确缩进，这是一种无效的编码方式吗？一个程序每天都会创建一个新文件。此脚本检查该文件是否已创建，如果是，则检查超过 7 天的文件并将其删除。我不明白语法错误，逻辑是正确的，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:20:59.207

```
import os, time
path = r"C:\Temp" #working path#
now = time.time()
old_files = [] # list of files older than 7 days
new_files = [] # list of files newer than 1 day
for f in os.listdir(path):
    fn = os.path.join(path, f)
    mtime = os.stat(fn).st_mtime
    if mtime > now - 1 * 86400:
        # this is a new file
        new_files.append(fn)
    elif mtime < now - 7 * 86400:
        # this is an old file
        old_files.append(fn)
    # else file between 1 and 7 days old, ignore
if new_files:
    # if there are any new files, then delete all old files
    for fn in old_files:
        os.remove(fn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:29:52.700

你的代码有一些问题，

*   您在以下行中缺少右括号：

    如果 os.stat(os.path.join(path, f).st_mtime < 现在 -1 * 86400

实际上应该是：

```
if os.stat(os.path.join(path, f)).st_mtime < now -1 * 86400 
```

1.  没有必要**，如果**

    if os.stat(os.path.join(path, f).st_mtime < now -1 * 86400 and\ #checking new file# if os.stat(os.path.join(path,f)).st_mtime < now - 7 * 86400：

它应该是：

```
if os.stat(os.path.join(path, f)).st_mtime < now -1 * 86400 and\ #checking new file#
os.stat(os.path.join(path,f)).st_mtime < now - 7 * 86400: 
```

1.  尝试在您的陈述中使用括号，即

    如果 os.stat(os.path.join(path, f)).st_mtime < (现在 -1 * 86400) 和 os.stat(os.path.join(path,f)).st_mtime < (现在 - 7 * 86400):

# javascript - 一个页面可以有多个 document.ready 函数吗？

> ID：12515483
> 
> 赞同：1
> 
> 时间：2012-09-20T15:04:11.253
> 
> 标签：javascript

我想知道/担心这个问题已经有一段时间了，所以我想我会问一个肯定知道的人。一个页面可以有多个 document.ready 函数吗？他们俩会被处决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:05:19.137

`document.ready`不是标准的 DOM 处理程序，但您可能指的是您调用[的 jQuery 实用程序](http://api.jquery.com/ready/)`$(document).ready(...`

它将函数添加到队列中，以便您可以使用不同的回调多次调用此函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:05:07.677

是的，他们都会**被**处决。您可以将[多个](http://docs.jquery.com/Tutorials%3aMultiple_%24%28document%29.ready%28%29) [`.ready()`](http://api.jquery.com/ready/)事件处理程序分配给一个`document`. 当 DOM 就绪时，jQuery 将触发任何绑定的就绪事件。从来源：

```
// Handle when the DOM is ready
ready: function( wait ) {
    ...
    // Trigger any bound ready events
    if ( jQuery.fn.trigger ) {
      jQuery( document ).trigger("ready").off("ready");
    }
} 
```

**[演示](http://jsfiddle.net/RQCm4/1/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T21:07:19.043

是的，您可以在一个页面上拥有多个`document.ready`功能。它们根据它们在代码中的出现顺序一个接一个地运行。

```
 $(document).ready(function() {
     alert("hello 1");
 });
 $(document).ready(function() {
     alert("hello 2");
 }) 
```

;

# javascript - 为旋转横幅添加下一个和上一个按钮

> ID：12515484
> 
> 赞同：1
> 
> 时间：2012-09-20T15:04:11.920
> 
> 标签：javascript, jquery, jquery-plugins

我对 JS 和 Jquery 不了解，所以我真的希望这里有人可以帮助我。我希望我的横幅在页面加载或刷新时更改图像，我找到了以下代码：

* * *

```
<script type="text/javascript">
window.onload = function () {
var random = document.getElementById('random');
var pictures = new Array('images/icn_slide-1.jpg','images/icn_slide-2.jpg','images/icn_slide-1.jpg','images/icn_slide-2.jpg');
var numPics = pictures.length;
if (document.images) {
    var chosenPic = Math.floor((Math.random() * numPics));
    random.style.background = 'url(' + pictures[chosenPic] + ')';
}
} 
```

上面的脚本工作得很好（背景图像每次刷新都会改变），但现在我想添加一个上一个和下一个按钮（实际上我已经做了），这样当观众点击下一个/上一个时，它会显示另一个图像。有没有一种简单的方法可以做到这一点？如何使我的下一个和上一个按钮起作用？任何帮助将不胜感激。谢谢！

* * *

这是我的 html 中唯一的内容：

```
<div id="random" style="width: 1399px; height:515px; margin:auto;">
<div id="slide_control" class="clearfix">
<span id="prev"><img alt="" title="" src="images/icn_nav-arrow2.png" /></span>
<span id="next"><img alt="" title="" src="images/icn_nav-arrow.png" /></span>
</div>
</div> 
```

到目前为止，它是 #random div 在刷新时更改背景图像，我希望它就是这样。我添加了包含“prev”和“next”按钮的“slide_control”，我希望他们做的是在单击它们时更改#random 的背景图像。

大多数 JS/JQquery 滑块和插件都带有按钮和控制器，但它们会自动播放图像，如果我禁用自动播放，它们不会在刷新时更改横幅/背景。

我只希望图像/背景在刷新时随机更改或在单击上一个/下一个按钮时更改，但我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:46:29.793

这是您要求的基本示例：

* * *

```
<script type="text/javascript">
function rotateImage(idx) {
    var random = document.getElementById('random');

    if (document.images) {
        random.style.background = 'url(' + pictures[idx] + ')';
        selectedImage = idx;
    }
}

function getNext() {
      var nextImage = selectedImage + 1;
      if (selectedImage >= numPics) {
          nextImage = 0;
      }
      rotateImage(nextImage);
}

function getPrev() {
      var prevImage = selectedImage - 1;
      if (selectedImage < 0) {
          selectedImage = numPics -1;
      }
      rotateImage(prevImage);
}

var pictures = new Array('images/icn_slide-1.jpg','images/icn_slide-2.jpg','images/icn_slide-1.jpg','images/icn_slide-2.jpg');
var numPics = pictures.length;
var selectedImage = null;

window.onload = function () {
     var chosenPic = Math.floor((Math.random() * numPics));
     rotateImage(chosenPic);
     document.getElementById('next').onclick = getNext;
     document.getElementById('prev').onclick = getPrev;
}
</script> 
```

* * *

# sql - SQL 数据库房间速率方法

> ID：12515485
> 
> 赞同：0
> 
> 时间：2012-09-20T15:04:13.220
> 
> 标签：sql, system, rate

我前段时间开发了一个酒店管理系统。不同之处在于，该系统被几家在单个数据库中出租房屋的酒店和业主使用。我不能只为房间类型/住宿添加价格，因为它们可能与一周或另一周不同。

我用来克服移动房屋的固定住宿时间（周末、几周、周中）和预订酒店房间的可能性（不到达天数、最短住宿时间等）的方法是将价格存储在价格表中。如下：

```
tablename: Availability
int id
int roomTypeId
decimal rate
dateTime day
bit canArrive
int minimumStay
... 
```

我想知道，现在数据库随着越来越多的酒店和移动房屋而增长，如果这种方法做得正确，或者是否有更好的方法而不是为每种房间类型和每个日期存储价格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:02:43.137

当然！
需要注意的是，虽然费率每天*都在变化，但通常**不会*（否则，任何显示费率的广告都会很快过时——它们可能是**几个月**前设计的）。

一个简单、幼稚（第一次迭代）的设计如下：

```
Hotel
=========
id -- autoincrement
name -- varchar(50)
contactInformation -- (address, phone, etc)

RoomType
==========
id -- autoincrement
description -- varchar(50)

HotelRoomTypeRate
==================
id -- autoincrement
hotelId -- fk reference to hotel.id
roomTypeId -- fk reference to roomType.id
rate -- decimal
effectiveOn -- date (this is 'business'/calendar day)

HotelRoom
===========
id -- autoincrement
hotelId -- fk reference to hotel.id
roomTypeId -- fk reference to roomType.id
status -- fk reference to status table, for things like 'under construction'

HotelCheckIn
==============
id -- autoincrement
hotelId -- fk reference to hotel.id
customerId -- fk reference to customer.id
hotelRoomId -- fk reference to hotelRoom.id
checkedInOn -- date (again, 'business'/calendar day)

HotelCheckOut
===============
id -- autoincrement
hotelCheckInId -- fk reference to hotelCheckIn.id
checkedOutOn -- date (again, 'business'/calendar day) 
```

您当然需要调整它以满足您的需求。

# php - 提交 AJAX 表单后创建自定义确认框

> ID：12515486
> 
> 赞同：0
> 
> 时间：2012-09-20T15:04:18.020
> 
> 标签：php, javascript, jquery, css, ajax

我正在使用 AJAX JQuery 验证插件提交表单。代码看起来像这样：

```
$(document).ready(function(){
$("#myform").validate({
    debug: false,
    rules: {
        fname: {required: true}, 
        sname: {required: true}, 
        gender: {required: true}, 
    },
    messages: {
        fname: {required: " *"},
        sname: {required: " *"},
        gender: {required: " *"},
    },
    submitHandler: function(form) {
        $('input[type=submit]').attr('disabled', 'disabled');
        $('#results').html('Loading...');
        $.post('process_participant.php', $("#myform").serialize(), function(data) {
            $('#results').html(data);
        });
    }
});
}); 
```

现在问题是，在我将此信息发送到我的 PHP 页面以进行处理 (process_participant.php) 之后，我想用一个确认框进行响应，询问用户是否要添加另一个参与者。PHP 代码如下所示：

```
if (everything processes okay){

echo '<script type="text/javascript">';
echo 'input_box=confirm("Saved successfully. Would you like to add another participant?");
            if (input_box==true) {
                window.location = "new_participant.php"
            }   
            else {
                window.location = "home.php"
            }';
echo '</script>';  
} 
```

这一切都很好，但默认的确认框是不可接受的。我需要能够对其进行样式设置并将其从 OK 和 CANCEL 更改为 YES 和 NO。我决定使用这个插件： http: [//kailashnadh.name/code/jqdialog/](http://kailashnadh.name/code/jqdialog/)并在 PHP 端使用以下代码：

```
echo '<script type="text/javascript">';

echo "  function confirmBox() {
                $.jqDialog.confirm(\"Are you sure want to click either of these buttons?\",
                function() { window.location = \"new_participant.php\"; },
                function() { window.location = \"home.php\"; }  
                );
            });";

echo "confirmBox();"; 
```

但是我似乎无法让它工作。也许我应该避免使用插件？整个 AJAX 事情让事情变得混乱。有人知道在这种情况下实现自定义确认框的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:10:32.297

从一开始就使用 display:none 创建框
，当来自 post 请求的函数返回
时进行检查（基于变量数据）
，如果一切正常，使用 jquery 的 show() 更改可见性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:13:43.523

试试[这个](http://bootboxjs.com/)

它易于实现，只需为警报和符合框定义您自己的 html

# javascript - 突出显示当前链接

> ID：12515492
> 
> 赞同：-2
> 
> 时间：2012-09-20T15:04:45.873
> 
> 标签：javascript, html

嗨，我必须只使用 html 和 javascript。我创建了一个页面，其中包含一个顶部导航链接，这些链接的 url 类似于：

domain.com, domain.com/b1, domain.com/b2

如何突出显示当前链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:28:35.417

使用 jQuery

```
$('a[href="' + window.location.pathname + '"]').addClass('highlight'); 
```

如果它不是好的位置对象，则用位置对象的一个​​属性（或属性组合）替换路径名。

该片段将'highlight'类添加到具有指定href的链接，然后您可以编写一些css来突出您的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:09:12.027

如果我理解问题，您可以尝试链接标签的 html-attribute 样式：

```
<a style="color: red">link</a> 
```

或编辑该链接的 CSS 文件。

您可以使用服务器端设置类并将此类定义为 CSS。

如果仅编码 JS，请参阅 JS 对象 window.location。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:24:52.377

您需要使用一个简单的 JS 脚本来检查`href`链接并将其与`window.location.href`（当前 URL）进行比较。

这是一个使用 JQuery 的简单示例：

```
var currentUrl = window.location.href;

$('a').each(function(index) {
    var url = $(this).attr("href");
    if (url === currentUrl) {
        $(this).addClass("current");
    } else {
        $(this).removeClass("current");
    }
}); 
```

在这里，`current`如果它是当前链接，它将向链接添加一个类。我[在 JSFiddle 上](http://jsfiddle.net/EEARK/15/)有一个演示。

# xml - 去 xml 解组

> ID：12515493
> 
> 赞同：2
> 
> 时间：2012-09-20T15:04:48.370
> 
> 标签：xml, go, unmarshalling

有没有一种方法可以仅使用一个结构（带有`encode/xml`）来提取 HTML 文件中的图像源？现在我有这样的东西

```
type XML struct {
    A Image `xml:"div>img"`
}

type Image struct {
    I string `xml:"src,attr"`
} 
```

并且只声明这样的东西会很棒：

```
type Image struct {
    I string `xml:"div>img,src,attr"`
} 
```

这是 HTML：

```
<div><div><img src="hello.png"/></div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:16:22.033

似乎一个好方法是使用`exp/html`包，像这样：

```
package main

import (
    "exp/html"
    "strings"
)

func main() {
    a, _ := html.Parse(strings.NewReader(testString))
    println(a.FirstChild.FirstChild.NextSibling.FirstChild.FirstChild.FirstChild.Attr[0].Val)
}

var testString = `<div><div><img src="hello.png"/></div></div>` 
```

所有这些都是必需的，因为`FirstChild`构造了一个“正确”的 html5 树，所以这段代码实际上是在解析这个：`NextSibling``exp/html`

```
<html>
    <head></head>
    <body>
        <div>
            <div>
                <img src="hello.png"/>
            </div>
        </div>
    </body>
</html> 
```

# javascript - HTML5、文件 API 和 jQuery 发布图片

> ID：12515494
> 
> 赞同：1
> 
> 时间：2012-09-20T15:04:50.563
> 
> 标签：javascript, jquery, ajax, html

我有一个在对话框中显示的表单，它有一个“提交”按钮，单击该按钮时使用 jQuery 使用 AJAX 将表单发布到服务器。这是一个MVC动作方法。上传的文件始终为空。在使用 Google 时，我读到您通常无法使用 AJAX 发布文件，除非您使用某种插件。

我不想使用插件，我读到这可以通过支持 HTML5 File API 的浏览器来完成，所以我想让它与它一起工作。

我现在不关心拖放或其他任何事情，我只想使用 jQuery 将文件与表单的其余部分一起发布。

到目前为止，我有：

这是表单的部分视图：

```
@model ImageReceiptLineModel

@using (Html.BeginForm(MVC.EditImageReceiptLine(), FormMethod.Post, new { enctype = "multipart/form-data" }))
{
  @Html.HiddenFor(model => model.ReceiptLineSetID)
  @Html.HiddenFor(model => model.LineNumber)
  <input id="uploadFile" name="uploadFile" type="file" value="Choose New Image" />
  @Html.LabelFor(model => model.ImageDescription)
  @Html.TextBoxFor(model => model.ImageDescription)
} 
```

这是用于发送表单的 jQuery

```
if ($Form.valid()) {
        // get the url and the form data to send the request
        var Url = $Form.attr('action');
        var FormData = $Form.serialize();

        // now do the ajax call
        $.ajax({
            url: Url,
            data: FormData,
            type: 'POST',
            cache: 'false',
            success: function (data, textStatus, jqXHR) {
                // do something here
            },
            error: function (jqXHR, textStatus, errorThrown) {
                // do something here
            }
        });
    } 
```

这是 MVC 操作方法：

```
/// <summary>
/// Edit receipt line action
/// </summary>
/// <returns>Action result</returns>
[HttpPost]
public virtual ActionResult EditImageReceiptLine(HttpPostedFileBase uploadFile, ImageReceiptLineModel model)
{

} 
```

我需要添加什么才能将文件添加到表单中？“FormData”是我发布到服务器的序列化表单数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:01:06.633

这是[`guide`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Uploading_a_user-selected_file)关于可用于上传文件的文件 API。但不要忘记这不适用于 IE9。如果您需要支持此类浏览器，您可以使用隐藏的 iframe 来模拟使用 AJAX 上传文件。这就是[jquery.form](http://www.malsup.com/jquery/form/)等插件存在的原因。为了使它成为一行代码，这样您就不必担心浏览器支持和其他东西：

```
if ($Form.valid()) {
    // get the url and the form data to send the request
    $Form.ajaxSubmit({
        success: function (data, textStatus, jqXHR) {
            // do something here
        },
        error: function (jqXHR, textStatus, errorThrown) {
            // do something here
        }
    });
} 
```

* * *

更新：

根据评论部分的要求，这里是您可以使用 File API 的方法。

假设您有以下表格：

```
@using (Html.BeginForm(MVC.EditImageReceiptLine(), null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.HiddenFor(model => model.ReceiptLineSetID)
    @Html.HiddenFor(model => model.LineNumber)
    <input id="uploadFile" name="uploadFile" type="file" value="Choose New Image" />
    @Html.LabelFor(model => model.ImageDescription)
    @Html.TextBoxFor(model => model.ImageDescription)    
} 
```

以及一些将触发表单提交的链接：

```
<a href="#" id="upload">Upload the file using HTML5 File API</a> 
```

现在在一个 js 文件中，您可以拥有以下内容：

```
$('#upload').click(function () {
    if (!window.FileReader) {
        // the browser doesn't support the File API - there's no need
        // to continue;
        alert('To use this functionality please use a modern browser');
        return;
    }

    var $form = $('form');
    var uri = $form.action;
    var xhr = new XMLHttpRequest();
    var fd = new FormData();

    $form.find(':input').each(function () {
        if ($(this).is('input[type="file"]')) {
            var files = $(this)[0].files;
            if (files.length > 0) {
                fd.append(this.name, files[0]);
            }
        } else {
            fd.append(this.name, $(this).val());
        }
    });

    xhr.open('POST', uri, true);
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
            // handle response.
            alert(xhr.responseText); 
        }
    };

    xhr.send(fd);
}); 
```

# iphone - 如何在 iphone 中处理自动引用计数中的内存警告？

> ID：12515495
> 
> 赞同：0
> 
> 时间：2012-09-20T15:04:53.220
> 
> 标签：iphone, uitableview, uiwebview

我在我的应用程序中使用 arc。在我的应用程序中，我在 UIWebView 中播放了 YouTube 视频，视频 url 来自数据库，我将该 url 放在 UITableViewCell 中，我得到内存接收警告。我的数据库记录是 60。任何人都帮帮我。先感谢您

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
    NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d",indexPath.row];
    VideoCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell==nil)
    {
        cell =[[VideoCell alloc] initWithStyle:UITableViewCellStyleSubtitle     reuseIdentifier:CellIdentifier];
        cell.selectionStyle=UITableViewCellSelectionStyleNone;

        [cell.lblVid_Name setText:[[arr_Video     objectAtIndex:indexPath.row]valueForKey:@"Video_Name"]];
    [cell.lblVid_Desc setText:[[arr_Video objectAtIndex:indexPath.row]valueForKey:@"Video_Desc"]];

        NSString *url=[NSString stringWithFormat:@"%@",[[[arr_Video objectAtIndex:indexPath.row]valueForKey:@"Video_Link"]lastPathComponent]];

        NSString *youTubeVideoHTML =@"<html><head> <meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = \"%f\"/></head> <body style=\"margin-top:0px;margin-left:0px\"> <iframe width= \"%f\" height=\"%f\" src = \"http://www.youtube.com/embed/%@?showinfo=0\"frameborder=\"0\" hd=\"1\" allowfullscreen/>></iframe></div></body></html>";
        NSString *html = [NSString stringWithFormat:youTubeVideoHTML,cell.webView_Video.frame.size.width,cell.webView_Video.frame.size.width, cell.webView_Video.frame.size.height,url];

        [cell.webView_Video loadHTMLString:html baseURL:nil];
        url=nil;
        youTubeVideoHTML=nil;
        html=nil;

}
return cell; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:36:26.303

所以创建了 60 个单元，每个单元都将加载一个视频 - 这不会占用大量内存吗？您不想显示可能的视频，然后仅在用户点击单元格时加载它们吗？然后一旦单元格在屏幕外发布视频？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T15:40:11.343

您正在使用很多单元格而不是重复使用单元格：

```
NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d",indexPath.row];
VideoCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

这意味着您正在为每一行创建一个单元格！

您应该重复使用屏幕外的单元格，而不是再次创建一个新单元格

仅对所有单元格使用 CellIdentifier，然后管理该调用的数据（更改单元格的内部值）但重用旧单元格。

如果您在任何时候都只能在屏幕上看到 10 个单元格，那么您应该只分配/创建 10 个单元格对象，即使您的数组包含 60 个或更多对象，但您创建了 60 个单元格/对象！

# c++ - 包括我自己的 cmake 共享库

> ID：12515505
> 
> 赞同：0
> 
> 时间：2012-09-20T15:05:43.983
> 
> 标签：c++, cmake

我的 CMakeLists.txt 中有以下代码用于查找我的共享库`libsieve.so`

```
set(CPPLIB_DIR "${CMAKE_SOURCE_DIR}/../core/build")
find_library(CPPLIB_SIEVE_LIBRARY NAMES libsieve PATHS CPPLIB_DIR) 
```

但它失败了，找不到我的图书馆。我有以下目录结构：

*   核
    *   建造：`libsieve.so`
*   项目：`CMakeLists.txt`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:39:36.977

我不知道为什么 cmake 找不到所需的库，但我可以通过帮助 cmake-gui 建议一种方法来实现它：如果“configure”的第一次运行找不到库，你可以将它指向手动需要库（设置完整的绝对路径）。大多数时候，这种解决方案对我有用。

此外，如果库是使用一个工具链（例如，英特尔 C++）构建的，而您的项目是使用另一个工具链（例如，clang）构建的，则找不到库可能是由于项目和库之间的二进制不兼容。

更新。最初的问题是引用 CPPLIB_DIR。它应该是：

```
find_library(CPPLIB_SIEVE_LIBRARY NAMES sieve PATHS ${CPPLIB_DIR}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:32:22.433

Cmake`find_library`期望您提供库名或库文件名。

您通过在库名称中添加“lib”前缀来混合两者。所以你应该尝试用`libsieve`or`sieve`替换`libsieve.so`。

# javascript - 我可以显式引用一个被同名本地变量隐藏的 JavaScript 全局变量吗？

> ID：12515513
> 
> 赞同：16
> 
> 时间：2012-09-20T15:06:15.867
> 
> 标签：javascript

我已经看到了大量关于 JavaScript 中全局和函数范围之间差异的帖子，这里链接太多了。我还看到了[关于 Python](https://stackoverflow.com/questions/10235973/modifying-global-variable-with-same-name-as-local-variable)的确切问题。所以我想知道的是，当“更接近”的范围也有一个同名的变量时，如何访问全局变量？

```
var a = "global";
function b(){
  var a = "local";
  var magic = ...; // somehow put "global" in magic
  console.log(magic); // should print "global"
} 
```

*仅在浏览器*中，我发现您可以使用它`window.a`来指定全局。有什么可以在服务器端工作的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T15:13:20.123

如果它真的是一个全局的（即不仅仅是在外部范围内），你可以这样做：

```
var magic = (function(name){return this[name]}).call(null, "a"); 
```

[来自 ECMAScript 的文档（10.4.3）](http://ecma-international.org/ecma-262/5.1/)：

> **输入功能码**
> 
> 当控制进入函数对象 F 中包含的函数代码的执行上下文、调用者提供 thisArg 和调用者提供 argumentsList 时，将执行以下步骤：
> 
> 如果函数代码是严格代码，则将 ThisBinding 设置为 thisArg。否则，如果 thisArg 为 null 或未定义，则将 ThisBinding 设置为全局对象。

请注意，您不能在 jsFiddle 中对此进行测试，因为全局范围不是您定义 a.

**示范**：

```
var a = "global";

function b(){
  var a = "local";
  var magic = (function(name){return this[name]}).call(null, "a");
  document.body.textContent = 'a: '+JSON.stringify(magic); // print "global"
}

b();
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T15:12:45.677

没有标准可以做到这一点。出于我自己的目的，我总是将变量放在名称类似于项目名称的容器中：

变量项目 = {}; // 将“project”的所有“globals”放入这个容器中

这样，我可以在一个地方收集所有变量，如果我需要传递“全局变量”，我最多只能传递一个引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T22:26:44.803

使用您的代码作为答案的基础，您可以使用以下内容来实际提取“ `a`”的全局版本，而不是本地版本：

```
var a = "global";
function b(){
  var a = "local";
  var magic = this.a; // somehow put "global" in magic
  console.log(magic); // should print "global"
}
b(); 
```

这仅在您以上述形式调用 b() 函数时才有效。一个不起作用的例子如下：

```
var a = "global";
function b(){
  var a = "local";
  var magic = this.a; // somehow put "global" in magic
  console.log(magic); // should print "global"
}
b.call({a : "other context"}); 
```

在上述情况下，`"other context"`将打印到控制台。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T15:17:24.463

您可以通过全局对象访问全局。在这种情况下，window 和当前上下文中的本地名称。

这是一个[小提琴示例](http://jsfiddle.net/yrJew/2/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T15:14:59.683

好吧，我没有直接的答案，但解决方法是使用完善的容器，例如窗口

```
window['a'] = "global"; 
```

这不是一个非常干净的解决方案，但它可以完成工作

# vim - Vim: 地图- 相等的？

> ID：12515516
> 
> 赞同：1
> 
> 时间：2012-09-20T15:06:20.943
> 
> 标签：vim

Vim 的`wrap`选项是窗口本地的，而不是缓冲区，如果我想要一个缓冲区特定的映射，我可以通过`map-<buffer>`.

因此，将两者放在一起，如果我想要一个特定于包装模式的映射，我该如何实现`map-<window>`功能？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:43:41.063

由于一个窗口可以在不同的时间显示不同的缓冲区，因此具有窗口本地映射是没有意义的。

我认为您真正要求的是如何根据窗口本地设置（例如`'wrap'`. 您可以通过特殊变量访问本地`'wrap'`设置`&l:wrap`，如下例所示：

```
:nnoremap <expr> j &l:wrap ? 'gj' : 'j' 
```

# qt - 完成构建 Qt 项目

> ID：12515521
> 
> 赞同：2
> 
> 时间：2012-09-20T15:06:31.863
> 
> 标签：qt

我已经完成了我的程序，我想知道如何关闭该项目，或者每次我想在不同的计算机上使用它时，我都必须安装 Qt creator？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:18:50.010

如果您要在另一台计算机上运行您的程序并且没有 Qt 创建器！您必须部署您的项目。这意味着你应该编译它并准备它的必需品。
也许[这里有一个](https://stackoverflow.com/questions/622418/how-to-deploy-a-qt-application)可以帮助你的问题！

# javascript - 开始和结束之间每个日期的javascript .addclass

> ID：12515526
> 
> 赞同：2
> 
> 时间：2012-09-20T15:06:38.430
> 
> 标签：javascript, jquery

我正在使用这个[网站上](http://www.vissit.com/projects/eventCalendar/)的 JQuery eventcalendar 插件。

我的活动有一个开始和结束日期，我有以下代码，它在日历上添加了一个绿色方块（一个用于开始日期，一个用于结束日期）。

我正在努力解决的问题是如何为开始日期和结束日期之间的每个日期添加一个绿色方块。

```
eg start date - > 12-08-2012 
end date -> 15-08-12 
```

将突出 12 日 13 日 14 日和 15 日

![在此处输入图像描述](../Images/12c5c6fdb591246070fa31b1b0304f8e.png)

```
var eventDate = new Date(parseInt(event.startdate)),
eventYear = eventDate.getFullYear(),
eventMonth = eventDate.getMonth(),
eventDay = eventDate.getDate();

var eventDate1 = new Date(parseInt(event.enddate)),
eventYear1 = eventDate1.getFullYear(),
eventMonth1 = eventDate1.getMonth(),
eventDay1 = eventDate1.getDate();

// add mark in the dayList to the days with events
                    if (eventYear == flags.wrap.attr('data-current-year') && eventMonth == flags.wrap.attr('data-current-month')) {
                        flags.wrap.find('.currentMonth .eventsCalendar-daysList #dayList_' + eventDay).addClass('dayWithEvents');

                    }

if (eventYear1 == flags.wrap.attr('data-current-year') && eventMonth1 == flags.wrap.attr('data-current-month')) {
                        flags.wrap.find('.currentMonth .eventsCalendar-daysList #dayList_' + eventDay1).addClass('dayWithEvents');
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T08:03:04.950

我刚刚做了同样的增强（实际上仍然微调），我使用[datejs](https://code.google.com/p/datejs/)进行日期匹配。我在处理日历插件时已将其移植到 github 存储库，但此增强功能尚未推送到它。如果您仍然对答案感兴趣，我可以快点完成并提供链接 - 但是它是这样的：

```
var daysElement = $element.find('.currentMonth .eventsCalendar-daysList');
var dateToBeChecked = new Date(parseInt(event.startDate));
var endDate = new Date(parseInt(event.endDate));
while (dateToBeChecked.compareTo(endDate) <=0) {
    daysElement.find('#dayList_' + dateToBeChecked.getDate())
               .addClass('dayWithEvents');
    dateToBeChecked.addDays(1);
} 
```

（请注意，“微调”涉及处理存在于 2 个不同日历月中的事件等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T12:17:48.130

每当将鼠标悬停在包含结束日期的日期上时，我为同一个脚本做了类似的事情：

```
 // add mark in the dayList to the days with events
            if (eventYear == flags.wrap.attr('data-current-year') && eventMonth == flags.wrap.attr('data-current-month')) {
                flags.wrap.find('.currentMonth .eventsCalendar-daysList #dayList_' + parseInt(eventDay)).addClass('list-group-item-success');

            if (event.date_end) {
                 $('#dayList_' + parseInt(eventDay)).hover(
            function () {
                $('#dayList_' + parseInt(eventDay)).nextUntil('#dayList_' + parseInt(eventDayEnd)).andSelf().add('#dayList_' + parseInt(eventDayEnd)).addClass('list-group-item-danger');

                       },
            function () {
                $('#dayList_' + parseInt(eventDay)).nextUntil('#dayList_' + parseInt(eventDayEnd)).andSelf().add('#dayList_' + parseInt(eventDayEnd)).removeClass('list-group-item-danger');
                       }
            );

            } 
```

在上述工作之前，需要进行一些修改。在生成每个数据的部分：

```
$.each(data, function(key, event) { 
```

我添加了一些额外的代码：（第一个 IF）

```
 if (event.date_end) {
                    var eventDateTimeEnd = event.date_end.split(" "),
                        eventDateEnd = eventDateTimeEnd[0].split("-"),
                        eventTimeEnd = eventDateTimeEnd[1].split(":"),
                        eventYearEnd = eventDateEnd[0],
                        eventMonthEnd = parseInt(eventDateEnd[1]) - 1,
                        eventDayEnd = parseInt(eventDateEnd[2]),
                        //eventMonthToShow = eventMonth,
                        eventMonthToShowEnd = parseInt(eventMonthEnd) + 1,
                        eventHourEnd = eventTimeEnd[0],
                        eventMinuteEnd = eventTimeEnd[1],
                        eventSecondsEnd = eventTimeEnd[2],
                        eventDateEnd = new Date(eventYearEnd, eventMonthEnd, eventDayEnd, eventHourEnd, eventMinuteEnd, eventSecondsEnd);                           
                } 
```

第二中频

```
 if (event.date_end) {
                    var eventDateEnd = new Date(parseInt(event.date_end)),
                        eventYearEnd = eventDateEnd.getFullYear(),
                        eventMonthEnd = eventDateEnd.getMonth(),
                        eventDayEnd = eventDateEnd.getDate(),
                        eventMonthToShowEnd = eventMonthEnd + 1,
                        eventHourEnd = eventDateEnd.getHours(),
                        eventMinuteEnd = eventDateEnd.getMinutes();
                        } 
```

正如你所看到的，我采用了相同的代码，只是为每个 var 赋予了一个新的命名，只是在每个 var 中添加了 End。

当然，在推送事件数据时，您需要确定数据是否包含结束日期。您使用的格式将与您的不同，我将此脚本与 Bootstrap 3.10 一起使用

```
if (event.date_end) {
                                    events.push('<li id="' + key + '" class="list-group-item '+event.type+'"><time datetime="'+eventDate+'"><em>' + eventStringDate + '</em><small>'+eventHour+":"+eventMinute+'</small></time>----TILL-----<time datetime="'+eventDateEnd+'"><em>' + eventStringDateEnd + '</em><small>'+eventHourEnd+":"+eventMinuteEnd+'</small></time>'+eventTitle+'<p class="eventDesc ' + eventDescClass + '">' + event.description + '</p></li>');
                                    }else{
                                    events.push('<li id="' + key + '" class="list-group-item '+event.type+'"><time datetime="'+eventDate+'"><em>' + eventStringDate + '</em><small>'+eventHour+":"+eventMinute+'</small></time>'+eventTitle+'<p class="eventDesc ' + eventDescClass + '">' + event.description + '</p></li>');
                                    } 
```

在生成的 Json 中，我添加了一个新字段：

```
{ 
                        "date": "1394233485248", 
                        "type": "demo", 
                        "title": "Project B demo", 
                        "description": "Lorem ipsum dolor.", 
                        "url": "http://www.event2.com/",
                        "date_end": "1402891200000" 
                        }, 
```

如果有人想帮助从 mysql/pdo 数据库中检索数据....给我留言。

# php - 我将如何使用 php-intl 将国家代码转换为本地化国家名称

> ID：12515530
> 
> 赞同：2
> 
> 时间：2012-09-20T15:06:51.170
> 
> 标签：php, translation, icu, intl

您好，我需要根据 PHP 中的国家代码和语言环境检索完整的国家名称。由于 php-intl 现在应该能够做到这一点，我想使用它。

```
nl_NL
nl -> Nederland
uk -> Verenigd Koninkrijk

en_UK
nl -> The Netherlands
uk -> United Kindom 
```

我*想*我需要以某种方式使用 php-intl 资源包，但找不到任何有用的示例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T20:58:23.133

确切地。intl 方法可以帮助您。

您需要使用[Locale::getDisplayRegion](http://php.net/manual/en/locale.getdisplayregion.php)

面向对象风格：

```
static string Locale::getDisplayRegion ( string $locale [, string $in_locale ] ) 
```

程序风格：

```
string locale_get_display_region ( string $locale [, string $in_locale ] ) 
```

返回输入区域设置区域的适当本地化显示名称。如果为 NULL，则使用默认语言环境。

所以，在你的情况下：

```
php > echo Locale::getDisplayRegion('nl_NL', 'nl_NL');
Nederland
php > echo Locale::getDisplayRegion('en_GB', 'nl_NL');
Verenigd Koninkrijk
php > echo Locale::getDisplayRegion('nl_NL', 'en_GB');
Netherlands
php > echo Locale::getDisplayRegion('en_GB', 'en_GB');
United Kingdom 
```

请记住，“GB”用于英国而不是“UK”

# php - iCalendar .ics 在 iOS 上接受/拒绝

> ID：12515534
> 
> 赞同：2
> 
> 时间：2012-09-20T15:07:05.990
> 
> 标签：php, ios, calendar, icalendar

我创建了一个发送 iCalendar 活动邀请的 php 脚本（基于[RFC 5545](https://www.rfc-editor.org/rfc/rfc5545)）。一切正常，但在 iPhone (iOS 4.2.1) 和 iPad (iOS 5.1) 上，我没有接受/拒绝事件的选项（显示为 mime-attachment.ics），只能将其添加到我的日历。在其他邮件客户端（outlook、thunderbird、gmail）中，这可以按预期工作。

iOS 的邮件客户端是否支持发送此类回复？如果是，有谁知道我应该指定什么来完成这项工作？

这是 ics 文件的示例内容：

```
BEGIN:VCALENDAR
PRODID:-//Some organization//some application//EN
VERSION:2.0
METHOD:REQUEST
BEGIN:VEVENT
UID:20120920T150350Z-70@http://localhost/www/
CREATED:20120920T150350Z
DTSTAMP:20120921T080800Z
DTSTART:20120921T080800Z
DTEND:20120922T060800Z
DESCRIPTION:Please attend this sample meeting
SUMMARY:Invitation to attend training
LOCATION:Earth
ATTENDEE;RSVP=TRUE:mailto:periklis@example.com
ORGANIZER;CN=periklis@example.com:mailto:periklis@example.com
LAST-MODIFIED:20120921T080800Z
PRIORITY:5
SEQUENCE:0
STATUS:CONFIRMED
TRANSP:TRANSPARENT
END:VEVENT
END:VCALENDAR 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:36:47.247

在仔细阅读了 RFC 之后，这是我使用和工作的内容：

```
BEGIN:VCALENDAR
PRODID:-//Some organization//some application//EN
VERSION:2.0
METHOD:REQUEST
BEGIN:VEVENT
UID:20120925T072912Z-140@http://localhost/www/
CREATED:20120925T072912Z
DTSTAMP:20120922T090500Z
DTSTART:20120922T090500Z
DTEND:20120923T090500Z
DESCRIPTION:Please attend this sample meeting
SUMMARY:Invitation to attend training
LOCATION:Earth
ATTENDEE;RSVP=TRUE:mailto:periklis@example.com
ORGANIZER;CN=periklis@example.com:mailto:periklis@example.com
LAST-MODIFIED:20120922T090500Z
PRIORITY:5
SEQUENCE:0
STATUS:CONFIRMED
TRANSP:TRANSPARENT
END:VEVENT
END:VCALENDAR 
```

还值得一提的是，以上行必须用 \r\n 分隔。所以我将每一行分配给一个数组成员，然后内爆数组：

```
$message[]='BEGIN:VCALENDAR';
$message[]='PRODID:-//Some organization//some application//EN';
[...]
$message[]='END:VCALENDAR';

$message = implode("\r\n", $message); 
```

# javascript - 即时从 YouTube 获取视频数据

> ID：12515535
> 
> 赞同：0
> 
> 时间：2012-09-20T15:07:15.110
> 
> 标签：javascript, ajax, json, youtube, youtube-api

在我的表单中，用户粘贴（或键入）来自 YouTube 的视频的 URL。发生这种情况时，我需要能够从 YouTube 获取相关数据并预先填充某些字段，例如标题、描述和宽度/高度。

我遇到的问题是我能找到的唯一示例是您已经拥有所需视频的 ID：

```
<script type="text/javascript" src =
 "http://gdata.youtube.com/feeds/api/videos/<VideoID>?v=2&amp;alt=json-in-script&amp;callback=FeedCallback"
</script>

<script type="text/javascript">
 function FeedCallback( data )
  {
   //get title from YouTube Data API via JSON
   document.getElementById('Title').innerHTML = data.entry[ "title" ].$t;
  }
</script> 
```

但这只有在我已经知道`<VideoID>`何时加载视图时才有效，而我不知道？有什么方法可以解析视图中的 ID，然后使用它来返回我需要的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:13:41.120

在解析输入的 URL 后`(id)`，我使用了以下函数：

```
function fetch_data(id) {
    var url = 'https://gdata.youtube.com/feeds/api/videos/' + id + '?v=2&alt=json-in-script&callback=?';

    $.getJSON(url, function (data) {
        $('input#DataProvider_Title').val(data.entry.title.$t);
        $('textarea#DataProvider_Description').val(data.entry.media$group.media$description.$t);
    });
} 
```

# php - 结合 PHP 和 jQuery 获取和检查 URL

> ID：12515536
> 
> 赞同：0
> 
> 时间：2012-09-20T15:07:16.620
> 
> 标签：php, jquery

我试图弄清楚如何组合 jQuery 代码，我从一个字段中获取一个 URL 值，一个 PHP 代码将访问该 URL 以检查该站点是否存在......在这种情况下我必须使用 jQuery。也许我也可以用它来验证 URL？

```
$("#go").click(function() {
    var $url = $("#url").val();
    <?php
    $x = @fopen($url,"r");
    if ($x) {
    ?>
        $("#ws").attr("src",url);
        $("#start").remove();
    <?php
        fclose($x);
    } else {
    ?>
        alert("bad URL");
    <?php
    }
    ?>      
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:10:45.297

您正在混合客户端和服务器端语言。在将页面提供给客户端之前，PHP 在服务器上运行。JavaScript（因此是 jQuery）通常在客户端上运行。因此，像您的示例中那样混合语言是没有意义的。您必须将它们分开，在客户端上使用 JavaScript，向服务器发出请求。然后，您可以在服务器上使用 PHP。

**一步一步你需要做什么：**

1.  在客户端使用 jQuery 来获取地址。
2.  使用 jQuery 向服务器发出 AJAX 请求，发送 URL 以与请求一起作为数据进行验证。
3.  在服务器端，您可以通过 PHP、使用 cURL 或其他方法检查 URL 是否有效。例如，然后您将结果作为 JSON 返回。
4.  在客户端，阅读响应并采取相应措施。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T15:18:24.517

学习 PHP 和 javascript 的基础知识。

# atk4 - ATK4 应该兼容的最低浏览器版本是什么？

> ID：12515537
> 
> 赞同：1
> 
> 时间：2012-09-20T15:07:18.400
> 
> 标签：atk4, php

ATK4 用户界面应该兼容的最低浏览器版本是什么？

我对支持的 Internet Explorer 版本特别感兴趣。我看到在 Chrome 和 FireFox 中一切看起来都很好，但在 IE8 中我有很多视觉缺陷。我不确定它在 IE9 中是否相同。我不是在谈论圆形边框或类似的东西，而是关于所有页面（几乎）默认布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:56:48.170

所以，基本上你应该考虑以下几点：

1) 默认主题使用一些 css2/3 技巧来启用更好的用户界面。然而，对于 ie 8.0 的 ui 具有向后兼容性，不确定较低版本。显然，您越远离现代浏览器，外观和感觉就会有所下降

2) atk4 使用 jquery 进行 js 事件处理，因此您应该咨询 jquery & jquery ui 以了解究竟支持什么。

敏捷工具包本身可以在没有 javascript 的情况下使用，并且可以使用您可以自己创建的简单设计主题。

总结一下 - 敏捷工具包并不意味着对所使用的浏览器有任何限制，而是由您决定哪些功能对您来说是必需的，哪些浏览器和版本适合您 - 结合起来可以回答您的问题。

ps atk4 甚至可以用作纯 CLI（命令行界面），根本没有 html/js，但仍会提供所有 mvc、业务逻辑等。

# javascript - 使用 (this) 从不相关的标签调用 javascript 函数

> ID：12515538
> 
> 赞同：0
> 
> 时间：2012-09-20T15:07:21.100
> 
> 标签：javascript, function, hover, onmouseover

我已经构建了以下幻灯片来检索...的内容

```
<li title=""> and <a title=""> 
```

...并将其显示在

```
<h2> & <h3> 
```

....在下方，同时将鼠标悬停在每张幻灯片图片上。当 onmouseover 未激活时，标题标签将被清除并返回其默认状态。

HTML：

```
<ul class="slideshow">
    <li id="picture-1" title="Picture Title" onmouseover="pictureTitle(this)" onmouseout="clearPicture()">
        <a title="Picture Description" onmouseover="pictureDescription(this)" href="#">   
            <img src="images/picture-1.png">
        </a>
    </li>
    <li id="picture-2" title="Picture 2 Title" onmouseover="pictureTitle(this)" onmouseout="clearPicture()">
        <a title="Picture 2 Description" onmouseover="pictureDescription(this)" href="#">   
            <img src="images/picture-2.png">
        </a>
    </li>
    <li id="picture-3" title="Picture 3 Title" onmouseover="pictureTitle(this)" onmouseout="clearPicture()">
        <a title="Picture 3 Description" onmouseover="pictureDescription(this)" href="#">   
            <img src="images/picture-3.png">
        </a>
    </li>
</ul>

<h2 id="picture-notitle">Default Picture Title</h2>
<h2 id="picture-title"></h2>
<h3 id="picture-nodescription">Default Picture Description</h3>
<h3 id="picture-description"></h3> 
```

Javascript：

```
function pictureTitle(li) {
    var name = document.getElementById("picture-title");
    name.innerText = li.title;
    name.style.display = "block";
    document.getElementById("picture-notitle").style.display = "none";
}

function pictureDescription(a) {
    var description = document.getElementById("picture-description");
    description.innerText = a.title
    description.style.display = "block";
    document.getElementById("picture-nodescription").style.display = "none";
}

function clearPicture() {
    document.getElementById("picture-notitle").style.display = "block";
    document.getElementById("picture-title").style.display = "none";
    document.getElementById("picture-nodescription").style.display = "block";
    document.getElementById("picture-description").style.display = "none";
} 
```

CSS：

```
#picture-title, #picture-description {
    display: none;
} 
```

幻灯片按预期工作；悬停图片显示其“标题”和“描述”。不过，我在构建它时遇到了麻烦。我希望能够在将鼠标悬停在一组文本上时调用 pictureTitle() 和 pictureDescription() 函数，而不是实际图像本身。

```
<h1>
    <span>Picture 1</span>
    <span>Picture 2</span>
    <span>Picture 3</span>
</h1> 
```

我已经尝试在 span 标签上使用 onmouseover 调用这些函数，但无法让任何工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:51:33.477

好的，我们开始...

jQuery 的一大优点是您可以轻松地选择元素，并在运行时连接事件处理程序，从而为您留下更简洁的代码。另一个好处是您还可以在 HTML 中存储数据元素，因此您最终会得到更干净、更精简的 HTML：

```
<ul class="slideshow">
   <li>
        <a data-title="Picture Title" data-description="Picture Description" href="#">   
            <img src="images/picture-1.png">
        </a>
    </li>
... 
```

您需要在页面准备好之后连接事件处理程序。当 DOM 准备好时，这段代码调用了一个名为“init”的函数。

```
$(document).ready(function() {
    init()
});

    function init() {
        $(".slideshow a").on("mouseover",function(event) {     
            $("#picture-title").show().html($(this).data('title'));           
            $("#picture-description").show().html($(this).data('description'));
            $("#picture-notitle").hide()
            $("#picture-nodescription").hide()
        });
        $('.slideshow a').on("mouseout", function(event){
            $("#picture-notitle, #picture-nodescription").show()
            $("#picture-title, #picture-description").hide()
        });
    } 
```

解释：

`$(".className")`为您提供与类名匹配的所有元素的数组。

`$("#elementID")`为您提供与 ID 匹配的元素

`$(this)`为您提供当前元素，在您的情况下是触发指定事件（mouseover/mouseout）的 on。这很方便，因为您不需要处理或传递元素 ID。

jQuery 允许您堆叠命令：

```
$("#picture-title").show().html($(this).data('title')); 
```

这会选择元素，显示它，然后根据元素自己的“data-title”值设置 HTML。一行代码中的三个步骤。

剩下的就是简单地使用 data-elements 和 show() 和 hide()，这很明显。

# google-maps - Google Directions API 使用 UTC 还是当地时间？

> ID：12515539
> 
> 赞同：3
> 
> 时间：2012-09-20T15:07:22.347
> 
> 标签：google-maps

我正在使用[Google Directions API](https://developers.google.com/maps/documentation/directions)开发一个交通导航应用程序。

`departure_time`API 要求我为公交查询提交出发时间 ( )。

此参数是否需要将本地时间转换为UTC时间？

我无法通过 API 的响应对其进行验证，因为其中没有返回准确的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T19:34:24.707

## 那个文件有误

显然，编写[该文档页面](https://developers.google.com/maps/documentation/directions/#ExampleRequests)的 Google 团队犯了一个错误，后来修复了它。

您举报的号码`1343605500`不再出现在该页面上。今天那页上的数字是`1343641500`。我怀疑您之前确实在该页面上看到了该号码。谷歌搜索（具有讽刺意味的是）`site:https://developers.google.com 1343605500`确实将该页面列为热门。显然，命中是基于旧错误页面的缓存副本。即使是谷歌也无法逃脱谷歌的影响。

## 在 UTC/GMT 工作

> 此参数是否需要将本地时间转换为UTC时间？

是的。

该 API 适用于 GMT/UTC（无时区偏移），这仅在您考虑时才有意义。几乎总是，处理日期时间的最佳实践是在[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)中执行您的业务逻辑、序列化、数据库记录等，然后转换为本地时间仅用于呈现给用户。

仅查看示例 URL 本身就表明它是 UTC 格式的。对本地时区的唯一可能引用是“布鲁克林”这个词，它肯定不是一个明确的时区唯一标识符。

> [http://maps.googleapis.com/maps/api/directions/json?origin=Brooklyn&destination=Queens&sensor=false&departure_time=1343641500&mode=transit](http://maps.googleapis.com/maps/api/directions/json?origin=Brooklyn&destination=Queens&sensor=false&departure_time=1343641500&mode=transit)

当然，文档说 API 使用 UTC/GMT：

> 自 UTC 时间 1970 年 1 月 1 日午夜以来的所需出发时间（以秒为单位）

## 写得不好

混乱源于该[文档页面](https://developers.google.com/maps/documentation/directions/#ExampleRequests)中的糟糕文字。他们需要在“9:45 am”后面加上一个重要的“UTC”或“GMT”。同时提及纽约和 9:45 意味着当地时间，而该示例实际上是布鲁克林当地时间早上 5:45。

> 以下请求搜索从纽约布鲁克林到纽约皇后区的公交路线。请求公交路线时，请务必指定出发时间或到达时间。
> 
> 请注意，在此示例中，出发时间指定为 2012 年 7 月 30 日上午 09:45。在提交请求之前将参数更新为将来的某个时间点。

## 旧数字与新数字

旧号码：1343605500（由 davidg和谷歌搜索在[答案中报告）](https://stackoverflow.com/a/18626199/642706)

新号码：1343641500（2013-12发现）

如果他们在纽约实际上是指 9:45 的数字：1343655900。

## 示例代码

我不做 JavaScript。因此，我使用在 Java 7 中运行的复杂的[Joda-Time](http://joda-time.sourceforge.net/userguide.html) 2.3 日期时间处理库来展示一些 Java 代码。我同时使用旧（错误）和新（正确）数字来显示 UTC 和新的日期时间约克时区。此外，我计算了从 epoch 到纽约 2012 年 7 月 30 日上午 9:45 的秒数，以产生第三个秒数。

Google API 使用秒，而 Joda-Time 使用毫秒，所以我乘以或除以一千。

```
// © 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.
// import org.joda.time.*;

DateTimeZone timeZone_NewYork = DateTimeZone.forID( "America/New_York" );

// On this page:
// https://developers.google.com/maps/documentation/directions/#ExampleRequests
// …look for the following two paragraphs…
// --
// The below request searches for Transit Directions from Brooklyn, New York to Queens, New York. When requesting transit directions, be sure to specify either a departure_time or arrival_time.
// Note that in this example the departure time is specified as July 30, 2012 at 09:45 am. Update the parameter to a point in the future before submitting the request.
// --
// Below that text, find this URL:
// http://maps.googleapis.com/maps/api/directions/json?origin=Brooklyn&destination=Queens&sensor=false&departure_time=1343641500&mode=transit
// Extract that departure time of 1,343,641,500 seconds since the Unix Epoch of beginning of 1970 UTC.
// Apparently in the past that page erroneously used the number 1343605500 where today it uses 1343641500.

// Use the correct number found on that page today, 2013-12-25: 1343641500.
DateTime dateTimeInUtcWithNewNumber = new DateTime ( ( 1343641500L * 1000L ), DateTimeZone.UTC );
DateTime dateTimeInNewYorkWithNewNumber = dateTimeInUtcWithNewNumber.toDateTime( timeZone_NewYork );
System.out.println( "dateTimeInUtcWithNewNumber: " + dateTimeInUtcWithNewNumber );
System.out.println( "dateTimeInNewYorkWithNewNumber: " + dateTimeInNewYorkWithNewNumber );

// Use the old erroneous number previously found on that page: 1343605500.
DateTime dateTimeInUtcWithOldNumber = new DateTime ( ( 1343605500L * 1000L ), DateTimeZone.UTC );
DateTime dateTimeInNewYorkWithOldNumber = dateTimeInUtcWithOldNumber.toDateTime( timeZone_NewYork );
System.out.println( "dateTimeInUtcWithOldNumber: " + dateTimeInUtcWithOldNumber );
System.out.println( "dateTimeInNewYorkWithOldNumber: " + dateTimeInNewYorkWithOldNumber );

// Calculating the number that should have been used if the Google team had actually meant 9:45 AM local time in New York: 1343655900.
DateTime dateTimeInNewYork_2012_07_30_09_45 = new DateTime ( 2012, 7, 30, 9, 45, 0, timeZone_NewYork );
System.out.println( "dateTimeInNewYork_2012_07_30_09_45: " + dateTimeInNewYork_2012_07_30_09_45 );
System.out.println( "dateTimeInNewYork_2012_07_30_09_45 in seconds since Unix epoch: " + ( dateTimeInNewYork_2012_07_30_09_45.getMillis() / 1000L ) ); 
```

运行时……</p>

```
dateTimeInUtcWithNewNumber: 2012-07-30T09:45:00.000Z
dateTimeInNewYorkWithNewNumber: 2012-07-30T05:45:00.000-04:00
dateTimeInUtcWithOldNumber: 2012-07-29T23:45:00.000Z
dateTimeInNewYorkWithOldNumber: 2012-07-29T19:45:00.000-04:00
dateTimeInNewYork_2012_07_30_09_45: 2012-07-30T09:45:00.000-04:00
dateTimeInNewYork_2012_07_30_09_45 in seconds since Unix epoch: 1343655900 
```

# recursion - Lisp 中的返回值

> ID：12515540
> 
> 赞同：-1
> 
> 时间：2012-09-20T15:07:26.457
> 
> 标签：recursion, lisp, return

所以我昨天开始学习 Lisp 并开始做一些问题。

我很难做的事情是在列表中插入/删除原子，同时保持列表相同 ex: `(delete 'b '(g a (b) l))`will give me `(g a () l)`.

我遇到的问题也是这个问题。我想检查列表中的任何地方是否存在原子。

我追踪了它，它说它`T`在某个时候返回，但随后被 a 覆盖`nil`。

你们能帮忙吗:)？

我正在使用`(appear-anywhere 'a '((b c) g ((a))))`

在第 4 个函数调用时它返回`T`但随后变为`nil`.

```
(defun appear-anywhere (a l)
  (cond
   ((null l) nil)
   ((atom (car l))
    (cond
     ((equal (car l) a) T)
     (T (appear-anywhere a (cdr l)))))
   (T (appear-anywhere a (car l))(appear-anywhere a (cdr l))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:29:16.340

让我们看一个明显的问题：

```
(defun appear-anywhere (a l)
  (cond
   ((null l) nil)
   ((atom (car l))
    (cond
     ((equal (car l) a) T)
     (T (appear-anywhere a (cdr l)))))
   (T (appear-anywhere a (car l))(appear-anywhere a (cdr l))))) 
```

想想上面的最后一行。

让我们稍微改变一下它的格式。

```
(defun appear-anywhere (a l)
  (cond
   ((null l) nil)
   ((atom (car l))
    (cond
     ((equal (car l) a) T)
     (T (appear-anywhere a (cdr l)))))
   (T
    (appear-anywhere a (car l))
    (appear-anywhere a (cdr l))))) 
```

The last three lines: So as a default (that's why the `T` is there) the last two forms will be computed. First the first one and then the second one. The value of the first form is never used or returned.

That's probably not what you want.

Currently your code just returns something when the value of `a` appears anywhere in the rest of the list. The first form is never really used.

Hint: What is the right logical connector?

# c# - 获取列 c# 的首字母

> ID：12515544
> 
> 赞同：1
> 
> 时间：2012-09-20T15:07:50.327
> 
> 标签：c#, string, removing-whitespace

我正在修改一个 .txt 文件，该文件在一列中包含多个名称的列表，它们的列出方式如下：

```
Lastname Middlename Name:
Lastname Middlename Name:
Lastname Middlename Name:
Lastname Middlename Name:
Lastname Middlename Name: 
```

我只想保留每个名字的首字母并将它们添加到另一个列表中，例如：

姓 中间名 姓名：=> LAMN

我必须用空格分隔吗？或使用几个删除？或使用正则表达式？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:15:16.163

```
var result = File.ReadAllLines("text.txt")
             .Select(line => new string (line.Split(' ')
                            .Select(s => s.First())
                            .ToArray())
               ).ToList(); 
```

* * *

**编辑：**

从姓氏中获取两个字母：

```
var result = File.ReadAllLines("text.txt").Select(line =>
            {
                var words = line.Split(' ');
                var la = words.First().Take(2);
                var mn = words.Skip(1).Select(s => s.First());

                return new string(la.Concat(mn).ToArray()).ToUpper();
            }
           ).ToList(); 
```

结果为：LAMN

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:25:19.690

```
public List<Person> ParseFile(string filePath)
{
    List<Person> lp = new List<Person>();
    using (StreamReader sr = new StreamReader(filePath))
    {
        while (!sr.EndOfStream)
        {
            lp.Add(new Person(sr.ReadLine()));
        }
    }
    return lp;
} 
```

和

```
class Person
{
    public Person(string fullName)
    {
        this.fullName = fullName;
    }

    private string fullName;
    public string FullName
    {
        get { return fullName; }
        set { fullName = value; }
    }
    private string initials;

    public string Initials
    {
        get { return String.Join("",new string[]{
            String.Join("",fullName.Split(new char[] { ' ' }).Take(1).Select(i => i.Substring(0, 2))),
            String.Join("",fullName.Split(new char[] { ' ' }).Skip(1).Select(i => i.Substring(0, 1)))
        });
        set { initials = value; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:35:02.760

首先，我将创建一个 Person 类：

```
public class Person
{
    string _initials = "";
    public String FirstName { get; set; }
    public String LastName { get; private set; }
    public String MiddleName { get; private set; }
    public String Initials { get { return _initials; } }
    public String FullName { get { return FirstName + MiddleName + LastName; } }

    public Person(String name)
    {
        string[] names = name.Split(' ');
        if (names.Length != 3)
        {
            throw new ArgumentException("Incorrect format for a person.");
        }
        FirstName = names[2];
        MiddleName= names[1];
        LastName  = names[0];
        _initials = 
             String.Concat(LastName[0],LastName[1],MiddleName[0],FirstName[0]);
    }
} 
```

然后用文件填充 Person 类：

```
List<Person> personsList = new List<Person>();
using (StreamReader reader = new StreamReader(filePath))
{
    while (!reader.EndOfStream)
    {
        Person p = new Person(reader.ReadLine());
        personsList.Add(p);
    }
} 
```

然后您可以访问 Person 的名字、姓氏和中间名以及他们的首字母：

```
foreach(Person p in personsList)
{
    Console.WriteLine(p.Initials);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T16:10:37.937

可能它不是您问题的完整解决方案，但我认为这是在不使用 LINQ 的情况下获取首字母缩写的更好方法。

[正则表达式从名称中提取首字母](https://stackoverflow.com/questions/10820273/regex-to-extract-initials-from-name#answer-10821419)

# python - 如何判断服务器是否被锁定？

> ID：12515549
> 
> 赞同：1
> 
> 时间：2012-09-20T15:08:25.310
> 
> 标签：python, mongodb, pymongo

当服务器正在执行像前端索引这样的长时间运行操作时，如何以编程方式判断它是否被锁定？我当前的代码是这样的：

```
def server_locked(timeout=5):
    con = pymongo.Connection(network_timeout=5)
    try:
        con.database_names()
        return False
    except pymongo.errors.AutoReconnect:
        return True 
```

但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:53:05.903

在数据库上，用于`current_op()`查看正在进行的操作。并`command('serverStatus')`获得每个锁的报告。

这是进行大量插入时的示例：

```
connection = Connection()
db = connection.test_database
db.current_op()

{
  u'inprog': [
    {
      u'numYields': 0,
      u'lockStats': {
        u'timeAcquiringMicros': {
          u'r': 0L,
          u'w': 3L
        },
        u'timeLockedMicros': {

        }
      },
      u'waitingForLock': False,
      u'desc': u'conn1',
      u'connectionId': 1,
      u'locks': {
        u'^test': u'W',
        u'^': u'w'
      },
      u'client': u'127.0.0.1:64743',
      u'threadId': u'0x104681000',
      u'active': True,
      u'query': {

      },
      u'opid': 11199,
      u'ns': u'test.test',
      u'secs_running': 0,
      u'op': u'insert'
    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:11:07.127

Pymongo Connection 对象有一个名为`is_locked`.

[文档](http://api.mongodb.com/python/current/api/pymongo/mongo_client.html#pymongo.mongo_client.MongoClient.is_locked)

# python - 如何使用 sforce 或 suds python 库找到 salesforce 包前缀？

> ID：12515550
> 
> 赞同：0
> 
> 时间：2012-09-20T15:08:25.410
> 
> 标签：python, salesforce

我需要更新一些`salesforce`对象的自定义字段。为此，我正在尝试使用该`upsert`方法。我对选择模块有点困惑；`SforceEnterpriseClient`或`SforcePartnerClient`的`sforce`。我想我需要第一个的`package prefix`名字`upsert`。`sforce`我需要使用or来做这些事情`suds`。关于`sforce`和`suds`技巧的一点解释会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:44:26.083

你试过[beatbox](http://code.google.com/p/salesforce-beatbox/)库吗？它比 salesforce-python-toolkit 更简单

这是如何更新自定义字段[的完整示例：](http://code.google.com/p/salesforce-beatbox/source/browse/trunk/examples/demo.py)

```
import sys
import beatbox
import xmltramp
import datetime

sf = beatbox._tPartnerNS
svc = beatbox.Client()
class BeatBoxDemo:
        def login(self, username, password):
                self.password = password
                loginResult = svc.login(username, password)
                print "sid = " + str(loginResult[sf.sessionId])
                print "welcome " + str(loginResult[sf.userInfo][sf.userFullName])
        def upsert(self):
                print "\nupsert"
                t = { 'type': 'Task', 
                          'ChandlerId__c': '12345', 
                          'subject': 'BeatBoxTest updated', 
                          'ActivityDate' : datetime.date(2006,2,20) }

                ur = svc.upsert('ChandlerId__c', t)
                print str(ur[sf.success]) + " -> " + str(ur[sf.id])

                t = {   'type': 'Event', 
                        'ChandlerId__c': '67890', 
                        'durationinminutes': 45, 
                        'subject': 'BeatBoxTest', 
                        'ActivityDateTime' : datetime.datetime(2006,2,20,13,30,30),
                        'IsPrivate': False }
                ur = svc.upsert('ChandlerId__c', t)
                if str(ur[sf.success]) == 'true':
                        print "id " + str(ur[sf.id])
                else:
                        print "error " + str(ur[sf.errors][sf.statusCode]) + ":" +        str(ur[sf.errors][sf.message])

if __name__ == "__main__":

        if len(sys.argv) != 3:
                print "usage is demo.py <username> <password>"
        else:
                demo = BeatBoxDemo()
                demo.login(sys.argv[1], sys.argv[2])       
                demo.upsert() 
```

# forms - symfony2：如何验证未映射到实体的属性（'property_path' => false）

> ID：12515552
> 
> 赞同：1
> 
> 时间：2012-09-20T15:08:28.230
> 
> 标签：forms, symfony, validation

我有一个注册表单，其中包含输入字段，几乎每个字段都映射到 User 类的属性。但是有些字段没有映射。验证是通过 User 类中的注释完成的。

我的问题是：如何验证那些未映射的字段？

# cocoa - 从基于视图的表格视图中的已编辑单元格接收新值

> ID：12515554
> 
> 赞同：0
> 
> 时间：2012-09-20T15:08:30.063
> 
> 标签：cocoa, osx-lion

我有一个基于视图的表视图，其中包含一些标准`NSTableCellView`数据行，这些数据行是从我的数据源中填充的。用户可以编辑单元格的文本字段。请解释一下，当用户更改单元格中的文本时，如何接收新值，以便我可以更新我的数据源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:20:06.507

我认为最好的方法是拥有一个带有 xib 文件的控制器对象，该文件包含您的表视图（控制器可能是 NSViewController 的子类）。使这个控制器成为您的表视图的代表，并在此类中放置一个连接到您的文本字段的 IBAction。您还应该有一个到表视图的出口。然后，在文本字段的操作方法中，您可以从 [tableView rowForView:sender] 获取包含文本字段的行。获得该行后，您可以更新数组中的正确对象。

# jquery - FreeTextBox 编辑器在 jquery post 方法后停止工作

> ID：12515559
> 
> 赞同：0
> 
> 时间：2012-09-20T15:08:51.280
> 
> 标签：jquery, asp.net

提前致谢。

我在 asp.net Web 应用程序中使用 FreeTextBox 编辑器。这个编辑器工作正常。

我使用 jquery Post 方法用从数据库中获取的值填充编辑器和其他表单字段。成功发布后，我将 Html 替换为更新的内容。所有字段都已填充，但编辑器未填充 Post hit 中设置的值，甚至在 Post hit 后停止工作。

请提供任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:33:06.253

哪个浏览器？我有一个类似的问题，但只在谷歌浏览器中。当它停止工作时，您还检查过任何 javascript 错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T12:22:50.950

我遇到了同样的问题，并按照您在以下链接中找到的说明解决了问题：[Rajitha Naraveni - 更新面板中的免费文本框](http://rajithanaraveni.wordpress.com/free-textbox-in-update-panel/)

# iphone - 我正在使用 iOS InAppPurchaseManager

> ID：12515563
> 
> 赞同：0
> 
> 时间：2012-09-20T15:09:10.090
> 
> 标签：iphone, cordova, phonegap-plugins

使用 phonegap 1.5.0rc1 和 XCode 4.3。我暂时无法升级我的mac。

当我使用插件时，我没有任何答案，没有警报，也没有消息。

我尝试这样做：

```
function onDeviceReady() {

                processdiv = document.getElementById('processdiv');
                processdiv.innerHTML = "Loading...";

                window.plugins.inAppPurchaseManager.onPurchased = function(transactionIdentifier, productId, transactionReceipt) {
                    console.log('purchased: ' + productId);
                    /* Give coins, enable subscriptions etc */
                }

                processdiv.innerHTML += "<br />onPurchased OK";

                window.plugins.inAppPurchaseManager.onRestored = function(transactionIdentifier, productId, transactionReceipt) {
                    console.log('restored: ' + productId);
                    /* See the developer guide for details of what to do with this */
                }

                processdiv.innerHTML += "<br />onRestored OK";

                window.plugins.inAppPurchaseManager.onFailed = function(errno, errtext) {
                    console.log('failed: ' + errtext);                  
                }

                processdiv.innerHTML += "<br />onFailed OK";

            }

            function requestProdData(prodStr) {

                window.plugins.inAppPurchaseManager.requestProductData(prodStr, function(productId, title, description, price) {
                            console.log("productId: " + productId + " title: " + title + " description: " + description + " price: " + price);
                            showAlert("productId: " + productId + " title: " + title + " description: " + description + " price: " + price);
                            window.plugins.inAppPurchaseManager.makePurchase(productId, 1);
                        }, function(id) {
                            console.log("Invalid product id: " + id);
                            showAlert("par la ?? " + id);
                        }
                    );

                processdiv.innerHTML = "ProductID: " + prodStr + "<br />";  

            } 
```

帮助我尝试在不同的代码位置添加警报以了解问题所在。我在一个测试应用中有很多产品。

我搜索示例以使用此插件。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:01:29.400

不要忘记在插件 Cordova.plist 中添加插件 inAppPurchaseManager :(

# python - PyQt4 未从 .ui 加载图标

> ID：12515571
> 
> 赞同：1
> 
> 时间：2012-09-20T15:09:44.950
> 
> 标签：python, qt, icons, pyqt4

我在 PyQt4 中的图标有问题：

我用 Qt Designer 创建了一个 UI，添加了一些带有系统主题图标的按钮，然后在 Python 程序中加载了 .ui 文件，但图标不可见（按钮显示它们的文本）。

如果我使用 QIcon.fromTheme 它可以工作，但它不会加载 .ui 文件中定义的图标。

如何让它加载这些图标，而无需从代码中手动加载它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:04:44.530

**更新**

看起来`uic`包中存在一个错误，该错误会阻止在使用时加载主题图标`uic.loadUi`。

有问题的代码在*`PyQt4/uic/icon_cache.py`*（大约第 60 行）：

```
# Handle a themed icon.
theme = iconset.attrib.get('theme')
if theme is not None:
    return self._object_factory.createQObject("QIcon.fromTheme",
            'icon', (as_string(theme), ), is_attribute=False) 
```

问题是`as_string`函数的使用，它试图传递，例如`'_fromUtf8("face-smile")'`，`QIcon.fromTheme`而不是简单的图标名称。

如果你想解决这个问题，我建议在[PyQt4 邮件列表中](http://www.riverbankcomputing.com/mailman/listinfo/pyqt)报告它。

请注意，等效功能在 PySide 中有效：

```
from PySide.QtUiTools import QUiLoader

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        QUiLoader().load('/tmp/test.ui', self) 
```

* * *

下面是如何使用`pyuic4`在 Qt Designer 中创建的 ui 的简单分解。

首先，创建你的用户界面。下面是一个`ui`创建带有主题图标的按钮的最小文件：

*`/tmp/test.ui`*

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>Form</class>
 <widget class="QWidget" name="Form">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>400</width>
    <height>300</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>Form</string>
  </property>
  <widget class="QPushButton" name="pushButton">
   <property name="geometry">
    <rect>
     <x>110</x>
     <y>100</y>
     <width>92</width>
     <height>25</height>
    </rect>
   </property>
   <property name="text">
    <string>PushButton</string>
   </property>
   <property name="icon">
    <iconset theme="face-smile"/>
   </property>
  </widget>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

接下来，使用`pyuic4`从`ui`文件中编译 python 模块：

```
pyuic4 -o /tmp/test_ui.py /tmp/test.ui 
```

*`/tmp/test_ui.py`*

```
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file '/tmp/test.ui'
#
# Created: Fri Sep 21 16:45:39 2012
#      by: PyQt4 UI code generator 4.9.4
#
# WARNING! All changes made in this file will be lost!

from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName(_fromUtf8("Form"))
        Form.resize(400, 300)
        self.pushButton = QtGui.QPushButton(Form)
        self.pushButton.setGeometry(QtCore.QRect(110, 100, 92, 25))
        icon = QtGui.QIcon.fromTheme(_fromUtf8("face-smile"))
        self.pushButton.setIcon(icon)
        self.pushButton.setObjectName(_fromUtf8("pushButton"))

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        Form.setWindowTitle(QtGui.QApplication.translate("Form", "Form", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton.setText(QtGui.QApplication.translate("Form", "PushButton", None, QtGui.QApplication.UnicodeUTF8)) 
```

现在将编译好的 ui 类导入你的应用程序：

*`/tmp/test.py`*

```
from PyQt4 import QtGui, QtCore
from test_ui import Ui_Form

class Window(QtGui.QWidget, Ui_Form):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.setupUi(self)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

最后，运行应用程序：

```
python2.7 /tmp/test.py 
```

# php - 处理动作后在php中增加变量？

> ID：12515572
> 
> 赞同：-4
> 
> 时间：2012-09-20T15:09:54.910
> 
> 标签：php

**我的计划目标：**

1.  在我的 index.php 文件中，显示了一张图片。
2.  我希望，当我用户单击该图像时，应该显示一个新图像。
3.  当他点击新图像时，应该会出现另一个新图像。

**到现在为止我做了什么？**

```
<?php
$mycolor = array("red.jpg", "green.jpg", "blue.jpg");
$i = 0;
$cc = $mycolor[$i++];
?>

<form method="post" action="index2.php">
<input type="image" src="<?php echo $cc; ?>">
</form> 
```

我知道错误是什么。每当重新加载页面时，变量 $i 都会被初始化为零。我如何解决这个问题。单击图像后如何保留增量值？

另外，我没有 Javascript 知识。所以，如果可能的话，用 php 来解释我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:20:07.833

你有不同的可能性来记住 $ieg：

`$_GET`： http: [//php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

饼干： http: [//php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

会话： http: [//php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

也没有必要使用表格来解决这个问题。只需用超链接包装图像并通过增加参数（index.php?i=1、index.php?i=2、index.php?i=3 等）来修改 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:30:39.270

```
<?php
$mycolor = array("red.jpg", "green.jpg", "blue.jpg");

if (isset($_POST['i'])) { // Check if the form has been posted
  $i = (int)$_POST['i'] + 1;   // if so add 1 to it - also (see (int)) protect against code injection
} else {
  $i = 0;  // Otherwise set it to 0
}
$cc = $mycolor[$i]; // Self explanatory
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input type="image" src="<?php echo $cc; ?>">
<input type="hidden" name="i" value="<?php echo $i; ?>">  <!-- Here is where you set i for the post -->
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:14:04.597

您可以使用会话、cookie 或 POST 变量来跟踪索引，但有些方法需要记住最后一个索引，以便您可以 +1。这是一个使用另一个（隐藏）后变量的示例：

```
<?php

    // list of possible colors
    $mycolor = array('red.jpg', 'green.jpg', 'blue.jpg');

    // if a previous index was supplied then use it and +1, otherwise
    // start at 0.
    $i = isset($_POST['i']) ? (int)$_POST['i'] + 1 : 0;

    // reference the $mycolor using the index
    // I used `% count($mycolor)` to avoid going beyond the array's
    // capacity.
    $cc = $mycolor[$i % count($mycolor)];
?>

<form method="POST" action="<?=$_SERVER['PHP_SELF'];?>">

  <!-- Pass the current index back to the server on submit -->
  <input type="hidden" name="id" value="<?=$i;?>" />

  <!-- display current image -->
  <input type="button" src="<?=$cc;?>" />
</form> 
```

# c# - 是否有一种使用查询语法在 LINQ 查询中执行 ToList 的简洁方法？

> ID：12515575
> 
> 赞同：12
> 
> 时间：2012-09-20T15:10:07.447
> 
> 标签：c#, linq, linq-to-sql, syntax, readability

考虑下面的代码：

```
StockcheckJobs = 
     (from job in (from stockcheckItem in MDC.StockcheckItems
                   where distinctJobs.Contains(stockcheckItem.JobId)
                   group stockcheckItem by new { stockcheckItem.JobId, stockcheckItem.JobData.EngineerId } into jobs
                   select jobs).ToList()
      let date = MJM.GetOrCreateJobData(job.Key.JobId).CompletedJob.Value
      orderby date descending 
      select new StockcheckJobsModel.StockcheckJob()
      {
          JobId = job.Key.JobId,
          Date = date,
          Engineer = (EngineerModel)job.Key.EngineerId,
          MatchingLines = job.Count(sti => sti.Quantity == sti.ExpectedQuantity),
          DifferingLines = job.Count(sti => sti.Quantity != sti.ExpectedQuantity)
      }).ToList() 
```

`ToList()`中间有个a ，因为`GetOrCreateJobData`方法不能翻译成sql。

结果，我不得不将查询的第一部分括在括号中才能做到这一点，然后我使用了外部查询来完成。

我知道我可以将其拆分为两个变量，但我不想这样做（这也在对象初始化程序中）。

**`ToList`当我必须在 linq 查询中间执行（或以其他方式访问 linq-to-objects）时，是否可以使用其他语法来提高可读性，最好消除对外部和内部查询的需要？**

* * *

在一个理想的世界中，我想要这样的东西（尽可能接近）：

```
StockcheckJobs =
     from stockcheckItem in MDC.StockcheckItems
     where distinctJobs.Contains(stockcheckItem.JobId)
     group stockcheckItem by new { stockcheckItem.JobId, stockcheckItem.JobData.EngineerId } into jobs
     MAGIC_DO_BELOW_AS_LINQ-TO-OBJECTS_KEYWORD_OR_SYNTAX
     let date = MJM.GetOrCreateJobData(jobs.Key.JobId).CompletedJob.Value
     orderby date descending 
     select new StockcheckJobsModel.StockcheckJob()
     {
         JobId = jobs.Key.JobId,
         Date = date,
         Engineer = new ThreeSixtyScheduling.Models.EngineerModel() { Number = jobs.Key.EngineerId },
         MatchingLines = jobs.Count(sti => sti.Quantity == sti.ExpectedQuantity),
         DifferingLines = jobs.Count(sti => sti.Quantity != sti.ExpectedQuantity)
     }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:21:45.317

您可以解决`GetOrCreateJobData`无法转换为 SQL 的问题。

通过为指定的方法调用表达式实现自定义查询转换器，您可以控制 LINQ-to-SQL 如何解释该方法。有一篇很好的文章解释了这个过程并链接到相关资源：http: [//www.codeproject.com/Articles/32968/QueryMap-Custom-translation-of-LINQ-expressions](http://www.codeproject.com/Articles/32968/QueryMap-Custom-translation-of-LINQ-expressions)

或者，您可以将该方法重构为`GetOrCreateJobData`使用表达式构建相同逻辑的扩展方法，以便 LINQ-to-SQL 可以自然地解释它。根据方法的复杂性，这可能比我的第一个建议或多或少可行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T15:33:39.733

我发现使用方法语法会使事情更清楚，但这只是个人喜好。它确实使查询的上半部分更好，但使用 a `let`，虽然在方法语法中是可能的，但工作量更大。

```
var result = stockcheckItem in MDC.StockcheckItems
    .Where(item => distinctJobs.Contains(item.JobId))
    .GroupBy(item => new { item.JobId, item.JobData.EngineerId })
    .AsEnumerable() //switch from Linq-to-sql to Linq-to-objects
    .Select(job => new StockcheckJobsModel.StockcheckJob()
    {
        JobId = job.Key.JobId,
        Date = MJM.GetOrCreateJobData(job.Key.JobId).CompletedJob.Value,
        Engineer = (EngineerModel)job.Key.EngineerId,
        MatchingLines = job.Count(sti => sti.Quantity == sti.ExpectedQuantity),
        DifferingLines = job.Count(sti => sti.Quantity != sti.ExpectedQuantity)
    })
    .Orderby(item => item.Date)
    .ToList() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T15:46:06.120

对于这个问题，我要提出两点：

1.  我真的不认为在这里引入一个额外的变量有任何可读性问题。事实上，我认为它使它*更具*可读性，因为它将“本地执行”代码与在数据库上执行的代码分开。
2.  要简单地切换到 LINQ-To-Objects，`AsEnumerable`最好使用`ToList`.

也就是说，这就是您如何在整个查询表达式上没有中间 AsEnumerable() / ToList() 的情况下一直停留在查询区域：通过欺骗 C# 编译器使用您的自定义扩展方法而不是 BCL。这是可能的，因为 C# 使用“基于模式”的方法（而不是与 BCL 耦合）将查询表达式转换为方法调用和 lambda。

像这样声明邪恶的类：

```
public static class To
{
    public sealed class ToList { }

    public static readonly ToList List;

    // C# should target this method when you use "select To.List"
    // inside a query expression.
    public static List<T> Select<T>
        (this IEnumerable<T> source, Func<T, ToList> projector)
    {
        return source.ToList();
    }
}

public static class As
{
    public sealed class AsEnumerable { }

    public static readonly AsEnumerable Enumerable;

    // C# should target this method when you use "select As.Enumerable"
    // inside a query expression.
    public static IEnumerable<T> Select<T>
        (this IEnumerable<T> source, Func<T, AsEnumerable> projector)
    {
        return source;
    }
} 
```

然后您可以编写如下查询：

```
List<int> list = from num in new[] { 41 }.AsQueryable()
                 select num + 1 into result
                 select To.List;

IEnumerable<int> seq = from num in new[] { 41 }.AsQueryable()
                       select num + 1 into result
                       select As.Enumerable into seqItem
                       select seqItem + 1; // Subsequent processing 
```

在您的情况下，您的查询将变为：

```
StockcheckJobs =
     from stockcheckItem in MDC.StockcheckItems
     where distinctJobs.Contains(stockcheckItem.JobId)
     group stockcheckItem by new { stockcheckItem.JobId, stockcheckItem.JobData.EngineerId } into jobs
     select As.Enumerable into localJobs // MAGIC!
     let date = MJM.GetOrCreateJobData(localJobs.Key.JobId).CompletedJob.Value
     orderby date descending 
     select new StockcheckJobsModel.StockcheckJob()
     {
         JobId = localJobs.Key.JobId,
         Date = date,
         Engineer = new ThreeSixtyScheduling.Models.EngineerModel() { Number = localJobs.Key.EngineerId },
         MatchingLines = localJobs.Count(sti => sti.Quantity == sti.ExpectedQuantity),
         DifferingLines = localJobs.Count(sti => sti.Quantity != sti.ExpectedQuantity)
     }; 
```

不过，我真的不认为这是一种改进。相反，这是对语言功能的严重滥用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T15:26:01.317

一种选择是将所有与 SQL 兼容的工作预先转换为匿名类型，

```
var jobs = 
     (from job in (from stockcheckItem in MDC.StockcheckItems
        where distinctJobs.Contains(stockcheckItem.JobId)
        group stockcheckItem by new 
             { stockcheckItem.JobId, stockcheckItem.JobData.EngineerId } 
         into jobs
        select new 
             {
                JobId = job.Key.JobId,
                Engineer = (EngineerModel)job.Key.EngineerId,
                MatchingLines = 
                    job.Count(sti => sti.Quantity == sti.ExpectedQuantity),
                DifferingLines = 
                    job.Count(sti => sti.Quantity != sti.ExpectedQuantity)
             }
      ).AsEnumerable()

StockcheckJobs = jobs.Select(j => new StockcheckJobsModel.StockcheckJob
    {
         JobId = j.JobId,
         Date = MJM.GetOrCreateJobData(j.JobId).CompletedJob.Value,
         Engineer = j.EngineerId,
         MatchingLines = j.MatchingLines,
         DifferingLines = j.DifferingLines
    }).OrderBy(j => j.Date).ToList(); 
```

显然没有经过测试，但你明白了。

# git - Git：仅忽略文件夹的内容

> ID：12515576
> 
> 赞同：5
> 
> 时间：2012-09-20T15:10:09.030
> 
> 标签：git, github, gitignore

我使用以下 .gitignore 文件（全局）：

```
.idea
.svn
/media/covers/*
/media/tmp/*
/media/cache/*
/bin
/include
/lib
/local
*.log
*.pot
*.pyc
local_settings.py 
```

所以在`media/covers`,中`media/tmp`，`media/cache`我想忽略所有文件和文件夹，而不是这个目录本身。这个 .gitignore 文件忽略`media/covers`, `media/tmp`, `media/cache`dirs，我该如何修复它？

蒂亚！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T15:14:16.123

将 .gitignore 文件添加到您要保留的目录中。在那个目录里放

```
* 
```

现在，当您执行 git status 时，您会看到内容未显示为正在跟踪，只有 .gitignore 文件。并且由于 .gitignore 文件在目录中，这意味着该目录将被跟踪，但不会跟踪其他内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T15:15:09.513

Git 不会将空目录添加到其索引中。我猜这些目录被排除是因为它们是空的，而不是因为匹配忽略规则。

人们解决这个问题的一种方法是`.gitkeep`在他们希望 git 保留的目录中创建一个名为的空文件。因此，您可以将该文件添加到`media/covers`,`media/tmp`等。然后添加`!*.gitkeep/`到您的`.gitignore`文件中。

# mysql - 子查询上的 NHibernate INNER JOIN

> ID：12515579
> 
> 赞同：3
> 
> 时间：2012-09-20T15:10:17.627
> 
> 标签：mysql, sql, nhibernate

我想做一个子查询，然后内部连接结果以产生查询。我想这样做，因为我已经测试了一个内部连接查询，与直接 IN 子查询相比，它在 MySql 上的性能似乎要高得多。

下面是我试图重现的 sql 类型的一个非常基本的示例。

## *表*

**物品**

*   项目 ID
*   姓名

**项目关系**

*   项目 ID
*   关系 ID

## *我想创建的示例 Sql*

给我名称为“bob”的项目的关系计数：

```
select ir.itemId, count(ir.relationId)
  from ItemRelations ir
    inner join (select itemId from Items where name = 'bob') sq
    on ir.itemId = sq.itemId
  group by ir.itemId 
```

## *基本的 Nhibernate QueryOver*

```
var bobItems = QueryOver.Of<Item>(() => itemAlias)
  .Where(() => itemAlias.Name == "bob")
  .Select(Projections.Id());

var bobRelationCount = session.QueryOver<ItemRelation>(() => itemRelationAlias)
   .Inner.Join(/* Somehow join the detached criteria here on the itemId */)
   .SelectList(
      list =>
        list.SelectGroup(() => itemRelationAlias.ItemId)
          .WithAlias(() => itemRelationCountAlias.ItemId)
        .SelectCount(() => itemRelationAlias.ItemRelationId)
          .WithAlias(() => itemRelationCountAlias.Count))
   .TransformUsing(Transformers.AliasToBean<ItemRelationCount>())
   .List<ItemRelationCount>(); 
```

我知道可以将其重构为单个查询，但是以上只是作为简单示例。我无法更改分离的 QueryOver，因为它已交给我的代码并用于系统的其他部分。

有谁知道是否可以根据分离的标准进行内部连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:43:28.733

MySql 5.6.5 解决了与查询结构相关的性能问题。

见这里：[http ://bugs.mysql.com/bug.php?id=42259](http://bugs.mysql.com/bug.php?id=42259)

我不再需要更改我的 NHibernate 查询的输出格式。:)

# java - 如何从 java 生成带有描述的 jsonschema，最好使用 javadoc 类型

> ID：12515580
> 
> 赞同：2
> 
> 时间：2012-09-20T15:10:19.130
> 
> 标签：java, json, generator, jsonschema

我使用jackson类从java生成jsonschema：

```
ObjectMapper mapper = new ObjectMapper();
JsonSchema jsonSchema = mapper.generateJsonSchema(Sample.class);
ObjectNode node = jsonSchema.getSchemaNode();
ObjectWriter or = mapper.defaultPrettyPrintingWriter();
or.writeValue(System.out, node); 
```

这很好用，但我想知道如何添加描述，例如从 javadoc 类型。

# c# - 在 aspx 文件中带有 Bind/Eval 的操作数“+”

> ID：12515582
> 
> 赞同：0
> 
> 时间：2012-09-20T15:10:24.347
> 
> 标签：c#, asp.net, web-applications

我有这个 aspx 代码：

```
<asp:TemplateField HeaderText="Name"  SortExpression="Firmierung">
   <ItemTemplate>
      <asp:HyperLink ID="HyperLink" runat="server" NavigateUrl='<%#Eval("Id", "DetailInfo.aspx?Id={0}") %>' Text='<%#Bind("Name") %>' />
   </ItemTemplate>
</asp:TemplateField> 
```

我想添加一个 if 条件，以便可以将操作数 + 与 Text 一起使用，如下所示：

```
<asp:TemplateField HeaderText="Name"  SortExpression="Firmierung">
    <ItemTemplate>
        <% if(Condition is true) { %>
           <asp:HyperLink ID="HyperLink" runat="server" NavigateUrl='<%#Eval("Id", "DetailInfo.aspx?Id={0}") %>' Text='<%#Bind("Name") + ("Active") %>' />
        <% } else { %>
           <asp:HyperLink ID="HyperLink2" runat="server" NavigateUrl='<%#Eval("Id", "DetailInfo.aspx?Id={0}") %>' Text='<%#Bind("Name") %>' />
        <% } %> 
    </ItemTemplate>
</asp:TemplateField> 
```

在这种情况下，我不知道如何使用操作数 + 。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:16:46.193

你不能用`Bind`. 虽然`Eval`你可以用它添加一些 C# 代码，但`Bind`它是不可能的。`Eval`实际上是一个方法调用，但`Bind`只是框架转换为某些绑定代码的声明，其格式必须是`Bind("FieldName")`（您可以添加格式）。

`Hyperlink` `Text`客户端不可编辑该属性，因此`Eval`应该足够了，您可以将其写在一行中。

```
<asp:HyperLink ID="HyperLink" runat="server" 
      NavigateUrl='<%#Eval("Id", "DetailInfo.aspx?Id={0}") %>' 
      Text='<%# Eval("Name") + (Condition ? + Eval("Active") : "") %>' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:33:28.747

试试这个

```
Text='<%# String.Format({0}{1},Eval("Name"),Eval("Active")) %>' 
```

或者

```
Text='<%# String.Format({0}{1},Bind("Name"),Bind("Active")) %>' 
```

如需更多帮助，请访问链接：

[带有 NavigateUrl 和 Eval() 的超链接。错误在哪里？](https://stackoverflow.com/questions/1779481/hyperlink-with-navigateurl-with-eval-where-is-the-mistake)

# perl - 基于列连接将大文件拆分为多个小文件

> ID：12515584
> 
> 赞同：0
> 
> 时间：2012-09-20T15:10:34.720
> 
> 标签：perl, shell

我有一个输入文件如下。我需要根据 2,3&5 列将它们分成多个文件。该文件有更多列，但我使用 cut 命令仅获取所需的列。

```
12,Accounts,India,free,Internal
13,Finance,China,used,Internal
16,Finance,China,free,Internal
12,HR,India,free,External
19,HR,China,used,Internal
33,Finance,Japan,free,Internal
39,Accounts,US,used,External
14,Accounts,Japan,used,External
11,Finance,India,used,External
11,HR,US,used,External
10,HR,India,used,External 
```

输出文件：

```
Accounts_India_Internal --
12,Accounts,India,free,Internal

Finance_China_Internal --
13,Finance,China,used,Internal
16,Finance,China,free,Internal

HR_India_External --
12,HR,India,free,External
10,HR,India,used,External

HR_China_Internal --
19,HR,China,used,Internal 
```

等等..

请让我知道如何实现这一目标。

截至目前，我正在考虑根据这些列（2、3、5）对文件进行排序，然后在每条记录上运行一个循环并开始创建文件。如果文件不存在，则创建并添加记录。否则打开旧文件并添加记录。

是否可以使用 shell 脚本（bash）来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:20:50.293

> *是否可以使用 shell 脚本（bash）来做到这一点？*

如果您只是想根据字段 2、3 和 5 拆分文件，您可以使用以下方法快速完成`awk`：

```
awk -F, '{print >> $2"_"$3"_"$5}' infile.txt 
```

这会将每一行附加到名称由字段 2、3 和 5 组成的文件中。

例子：

```
[me@home]$ awk -F, '{print >> $2"_"$3"_"$5}' infile.txt 
[me@home]$ cat Accounts_India_Internal
12,Accounts,India,free,Internal
[me@home]$ cat Finance_China_Internal
13,Finance,China,used,Internal
16,Finance,China,free,Internal 
```

如果您确实想要对输出进行排序，您可以首先通过`sort`.

```
sort -k2,3 -k5,5 -t, infile.txt  | awk -F, '{print >> $2"_"$3"_"$5}' 
```

这在将字段 2、3 和 5 上的行传递给`awk`命令之前对其进行排序。

请注意，我们将附加到文件中，因此如果您重复该命令而不删除输出文件，您最终会在输出文件中得到重复的数据。要解决这个问题，以及包括您在[聊天](https://chat.stackoverflow.com/rooms/16930/discussion-between-shawn-chin-and-anuj)中提到的附加要求（使用第一行作为所有新文件的标题） ，请参阅[此解决方案](https://gist.github.com/8b230d01ec09a3d1a898)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:27:13.297

我建议你保留一个文件句柄的散列，由它们相应的文件名键入

这个程序演示。输入文件应作为命令行上的参数

```
use strict;
use warnings;

my %fh;

while (<>) {
  chomp;
  my $filename = join '_', (split /,/)[1,2,4];
  if (not $fh{$filename}) {
    open $fh{$filename}, '>', $filename or die "Unable to open '$filename' for output: $!";
    print "$filename created\n";
  }
  print { $fh{$filename} } $_, "\n";
} 
```

**输出**

```
Accounts_India_Internal created
Finance_China_Internal created
HR_India_External created
HR_China_Internal created
Finance_Japan_Internal created
Accounts_US_External created
Accounts_Japan_External created
Finance_India_External created
HR_US_External created 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:26:41.277

注意：要使用代码，只需更改`<DATA>`并`<>`使用文件名作为参数。该`Data::Dumper`印刷品仅用于演示目的，也可以删除。

```
use strict;
use warnings;
use Data::Dumper;

my %h;
while (<DATA>) {
    chomp;
    my @data = split /,/;
    my $file = join "_", @data[1,2,4];
    push @{$h{$file}}, $_;
}
print Dumper \%h;

__DATA__
12,Accounts,India,free,Internal
13,Finance,China,used,Internal
16,Finance,China,free,Internal
12,HR,India,free,External
19,HR,China,used,Internal
33,Finance,Japan,free,Internal
39,Accounts,US,used,External
14,Accounts,Japan,used,External
11,Finance,India,used,External
11,HR,US,used,External
10,HR,India,used,External 
```

要打印文件，您可以使用如下子例程：

```
for my $key (keys %h) {
    print_file($key, $h{$key};
}
sub print_file {
    my ($file, $data) = @_;
    open my $fh, ">", $file or die $!;
    print $fh "$_\n" for @$data;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T15:30:31.047

将输入文本保存为 foo，然后：

```
cat foo | perl -nle '$k = join "_", (split ",", $_)[1,2,4]; $t{$k} = [@{$t{$k}}, $_]; END{for (keys %t){print join "\n", "$_ --", @{$t{$_}}, undef }}' | csplit -sz - '/^$/' {*} 
```

# java - JDBC 连接持久性问题

> ID：12515587
> 
> 赞同：2
> 
> 时间：2012-09-20T15:10:41.457
> 
> 标签：java, database, swing, jdbc

我了解 jdbc 涉及这些步骤

*   导入包，
*   注册 JDBC 驱动，
*   打开连接，
*   执行查询，
*   从结果集中提取数据，
*   清理环境。

我有 2 个 Java 文件，一个用于 GUI（Swing），另一个是普通 Java 文件。我在 GUI 中有许多输入字段，并将它们发送到后端文件以使用 JDBC 进行处理。我的 Java 文件中有很多这样的方法。问题出在每种方法中，我必须对每种方法中的整个步骤（如上所述）进行处理。因此，它变得缓慢。我想优化它，只做一次上面提到的前 3 步和最后一步。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:34:13.090

听起来你需要一个`Connection Pool`. Stack Overflow 上有很多与连接池相关的问题 - 甚至还有一个标签！

[https://stackoverflow.com/questions/tagged/connection-pooling](https://stackoverflow.com/questions/tagged/connection-pooling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:40:57.063

概括地说，这里有几种方法，按照（大致）复杂度递增的顺序：

*   坚持你正在做的事情，在你学习的过程中抽象出有用的实用程序。这很费力，但它允许最大程度的定制。

*   采用轻量级的 JDBC 辅助库；[这里](https://stackoverflow.com/q/7137929/230513)引用了几个。

*   深入学习[Java Persistence API](http://docs.oracle.com/javaee/5/tutorial/doc/bnbpz.html)。

在探索第二个或第三个的同时做第一个是完全可能的。

# javascript - 使用来自不同页面的功能更改页面上的某些内容

> ID：12515588
> 
> 赞同：0
> 
> 时间：2012-09-20T15:10:42.253
> 
> 标签：javascript, jquery, onclick

我正在尝试建立一个网站，用于在不同的框架上投影图像。虽然，我能够在不同的框架中更改内容（图像/文本），但我需要了解我是否可以在不同的网页中更改相同的内容。

设想

Page_1 在上传到 mysql 数据库时具有不同图像的提要。例如图像1、图像2、图像3。

Page_2 有一个大图像 (main_image)

问题 我需要编写一个函数，当我单击 Page_1 上的 image1 时，将 Page_2 上的 main_image 更改为 image1。我使用父母功能跨框架做到了这一点。

```
Page 1                Page 2

--------------      ------------
|             |     | image1   |
| main_image  |     | image2   |
|             |     | image3   |
---------------     ------------ 
```

当用户点击 Page_2 上的 image1 时，输出应该是 -

```
Page 1                Page 2
--------------      ------------
|             |     | image1   |
| image1      |     | image2   |
|             |     | image3   |
---------------     ------------ 
```

另外，如果 Page_1 和 Page_2 显示在不同的计算机上，是否有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:20:31.733

如果您使用 javascript 从第一个窗口打开第二个窗口，则可以使用返回的对象在打开的窗口中调用 javascript 函数。

伪代码示例，在 window1.html javascript 中：

```
var w = window.open("/window2.html");
w.showDifferentPic(); 
```

在 window2.html 中的 JavaScript：

```
function showDifferentPic() {
    // show picture;
} 
```

显然，这只适用于单个客户。

可以跨客户进行，但这完全是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:22:17.607

在不同的计算机上是不可能的，但是`window.open()`当你点击图片 1 时，你可以打开下一页。

# http - 如果 url 包含保留字符，则 URL 重定向错误

> ID：12515591
> 
> 赞同：0
> 
> 时间：2012-09-20T15:10:52.300
> 
> 标签：http, url, redirect, httpclient, mediawiki

我正在尝试访问特定的 url

```
DefaultHttpClient httpclient = new DefaultHttpClient();
httpclient.getCredentialsProvider().setCredentials(new AuthScope("abc.com", 443),
                new UsernamePasswordCredentials("user", "Passwd"));

HTTPHelper http = new HTTPHelper(httpclient);

http.get("http://abc.com/**aaa**/w/api.php?param=timestamp%7Cuser&format=xml"); 
```

其中 %7C= |

这在内部将我重定向到以下网址

```
http://abc.com/**bbb**/w/api.php?param=timestamp%257Cuser&format=xml 
```

正因为如此，我无法获得正确的输出......

```
| ==>%7C

%==> %25

%7C == %257C 
```

我想要查询，`timestamp|user` 但是由于循环重定向，它变成了`timestamp%7Cuser` 有什么办法可以避免这种情况吗？

我也写了自己的自定义重定向策略

```
httpclient.setRedirectStrategy(new DefaultRedirectStrategy() {
            public boolean isRedirected(HttpRequest request, HttpResponse response, HttpContext context) {
                boolean isRedirect = false;
                try {
                    isRedirect = super.isRedirected(request, response, context);
                    LOG.info(response.getStatusLine().getStatusCode());
                    LOG.info(request.getRequestLine().getUri().replaceAll("%25", "%"));
                } catch (ProtocolException e) {
                    e.printStackTrace();
                }
                if (!isRedirect) {
                    int responseCode = response.getStatusLine().getStatusCode();
                    if (responseCode == 301 || responseCode == 302) {
                        return true;
                    }
                }
                return isRedirect;
            }
        }); 
```

但我不确定如何从重定向的 url 用 %7C 替换 %25C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:05:14.590

看起来网站的 URL 重写规则只是被破坏了。如果它不是您的站点，您可能需要联系其维护人员并告知他们该问题。

同时，您是否有某些原因不能简单地直接使用目标 URL（即`http://abc.com/**bbb**/w/api.php?...`），避免重定向？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:41:51.973

只是`http.get("http://abc.com/**aaa**/w/api.php?param=timestamp|user&format=xml");` 工作吗？

“在内部将我重定向到以下网址”是什么意思？就像您的网址被再次编码一样。您可以在 HTTPHelper 中发布代码吗？我下面的测试代码工作正常。

客户代码：

```
HttpClient client = new DefaultHttpClient();
HttpGet get = new HttpGet("http://localhost:8080/test/myservlet?param=timestamp%7Cuser&format=xml");
client.execute(get); 
```

小服务程序代码：

```
protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        String param = request.getParameter("param"); //get timestamp|user
        String format = request.getParameter("format");

    } 
```

# wpf - 任务完成后绑定 DataTemplate

> ID：12515592
> 
> 赞同：0
> 
> 时间：2012-09-20T15:10:55.620
> 
> 标签：wpf, c#-4.0

我正在寻找一种方法来绑定我的 MainWindow 访问的资源文件中的数据模板，但只有在视图模型中运行的任务完成之后。

这个想法是在视图显示时加载大量数据，并显示一个小的进度区域......当进度完成......然后数据应该被绑定......是允许这样做的依赖属性吗？

```
<DataTemplate x:Key="TabsTemplate">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <UserControls:TabButton Command="{Binding Path=Tab}" Content="{Binding Path=DisplayName}" Template="{Utilities:BindableResource {Binding Path=TemplateResource}}" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:21:53.130

弄清楚了...

Tabs.GetBindingExpression(ContentControl.ContentProperty).UpdateTarget();

进度完成后完美运行。

# html - html 内边框

> ID：12515598
> 
> 赞同：0
> 
> 时间：2012-09-20T15:11:10.227
> 
> 标签：html

我有以下内容：

```
 <a href="http://www.youtube.com/"  title="Tonight">
    <img src="images/video.jpg" alt="Tonight Icon" />Hotel </a> 
```

这显示了可单击的图像以及下方的文本 - Hotel，它也是可单击的。

如何在 jpg 和文本（Hotel）周围设置边框，以便它们都在边框内。

我试过：

```
 <div border="1px">
    <a href="http://www.youtube.com/"  title="Tonight">
    <img src="images/video.jpg" alt="Tonight Icon" border="1" />Hotel </a></div> 
```

但这并没有在 jpeg 和文本周围设置边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:13:22.643

您可以使用 CSS 在元素级别（内联）设置样式：

```
<div style="border: 1px solid #000000;">
<a href="http://www.youtube.com/"  title="Tonight">
<img src="images/video.jpg" alt="Tonight Icon" />Hotel </a></div> 
```

这使用了边框属性的简写符号，您可以在[此处](http://www.w3schools.com/css/css_border.asp)阅读。

**更新**

[W3 详述](http://www.w3.org/TR/CSS2/visuren.html)的视觉格式化模型有一个*自然的流程*（已*过时，但原则仍然存在*），它指出内联元素应包含在块元素内，因此格式化（在这种情况下为边框）应该发生在块中等级。此示例中的链接/图像/文本应位于元素中，因此样式应在级别进行。您当然可以在 a中包含，但随后样式将出现在块元素中。*`<p>``<div>``<img>``<p>`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:12:30.653

为您的链接添加样式。

```
<a href="http://www.youtube.com/"  title="Tonight" style="border:1px solid #000000; display:inline-block;">
    <img src="images/video.jpg" alt="Tonight Icon" border="1" />
    Hotel 
</a> 
```

编辑：添加 display:inline-block 以实现跨浏览器兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:14:38.160

这是使用 CSS 执行此操作的正确方法：

在您的样式表中，创建一个类：

```
<style>
    .withBorder {
        board:1px solid #000000;
    }
</style> 
```

在包装 DIV 中使用该类：

```
<div class="withBorder">
    <a href="http://www.youtube.com/"  title="Tonight">
    <img src="images/video.jpg" alt="Tonight Icon" border="1" />Hotel </a>
</div> 
```

将 HTML 与样式分开是一种很好的做法。使用内联样式标签会起作用，但如果您有另一个框并为其设置样式，然后决定要更改外观，您可以编辑 CSS 类，而不必单独编辑每个 HTML 内联样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T15:15:36.203

```
<div style="border:2px">
    <a href="http://www.youtube.com/"  title="Tonight">
    <img src="images/video.jpg" alt="Tonight Icon" border="1" />Hotel </a>
</div> 
```*

# java - 最新 OpenGL 中的旋转

> ID：12515599
> 
> 赞同：3
> 
> 时间：2012-09-20T15:11:26.810
> 
> 标签：java, opengl

鉴于不推荐使用最新 OpenGL 中的旋转，我如何旋转三角形？弃用前：

```
 gl.glRotated(i, 0, 0, 1);

    gl.glBegin(GL2.GL_TRIANGLES);       
    gl.glVertex3f(0.0f, 1.0f, 0.0f );   
    gl.glVertex3f(-1.0f, -1.0f, 0.0f ); 
    gl.glVertex3f(1.0f, -1.0f, 0.0f );  
    gl.glEnd(); 
```

我试过这样做，但它只是一个翻译：

```
 double rotCos = Math.cos(i);
    double rotSine = Math.sin(i);

    gl.glBegin(GL2.GL_TRIANGLES);       
    gl.glVertex3d(0.0f + rotSine, 1.0f + rotCos, 0.0f );    
    gl.glVertex3d(-1.0f + rotSine, -1.0f + rotCos, 0.0f );  
    gl.glVertex3d(1.0f + rotSine, -1.0f + rotCos, 0.0f );   
    gl.glEnd(); 
```

如何实现 glRotated 背后的数学运算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:30:07.757

您所做的并不是弃用这些功能背后的想法；这个弃用还包括函数*glBegin*、*glVertex*和*glEnd*，所以如果你使用它们，你就错过了重点

你应该实现一个顶点着色器，在其中你执行顶点变换的通常步骤，即先将顶点与模型视图相乘，然后是投影矩阵；您还可以将模型视图和投影收缩到一个矩阵中，但这会使照明变得有些棘手。

矩阵通过所谓的*uniforms*传递给 OpenGL 。要创建矩阵，请使用一些向量数学库，如 GLM 或 Eigen（带有 Eigen 随附的非官方 OpenGL 模块）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:07:05.583

> 如何实现 glRotated 背后的数学运算？

矩阵`glRotate()`结构就[在文档中](http://www.opengl.org/sdk/docs/man/xhtml/glRotate.xml#description)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T22:04:26.623

使用折旧的函数仍然可以，但如果你想使用“现代”OpenGL（OpenGL 3 和更高版本），你将不得不做一些不同的事情。

一方面，您不再使用`glBegin`/`glEnd`而是使用顶点缓冲区对象绘制所有内容。其次，固定功能管道已被移除，因此需要顶点和片段着色器来绘制任何内容。还有许多其他更改（包括添加顶点数组对象和几何着色器）。

在 OpenGL 3 中进行旋转的方法是在制服中传递模型视图和投影矩阵，并使用它们来计算顶点着色器中的顶点位置。

归根结底，如果你想学习“现代” OpenGL，你最好只在网上寻找关于 OpenGL 3.0（或更高版本）的教程。

# php - 显示一行数据，点击下一步，隐藏原行并显示下一行……以此类推

> ID：12515600
> 
> 赞同：0
> 
> 时间：2012-09-20T15:11:27.077
> 
> 标签：php, jquery, html, wordpress

我正在使用[http://www.advancedcustomfields.com](http://www.advancedcustomfields.com)插件在 Wordpress 中创建自定义字段。我专门使用中继器字段功能。

在一个页面上，我有一个具有无限行数的转发器。回显所有数据的常用方法如下：

```
<?php $counter = 1; if(get_field('step_by_step_training')): ?>
<?php while(the_repeater_field('step_by_step_training')): ?>
    <p class="training-<?php echo $counter; ?>"><?php the_sub_field('introduction'); ?></p>
<?php $counter++; endwhile; ?> 
<?php endif; ?> 
```

是否可以使用下一个按钮一次显示一行数据，按下该按钮将显示下一行数据？我只希望一次显示一行数据，因此如果最初显示第 1 行，则单击下一个时，它会隐藏第 1 行并显示第 2 行。**基本上创建了一个逐步过程。**

最终我想包含一个表单，以便用户可以提交数据。

* * *

更新：

```
<form class="form" method="POST" action="<?php the_permalink(); ?>">
<?php $counter = 1; if(get_field('step_by_step_training')): ?>
<?php while(the_repeater_field('step_by_step_training')): ?>    
    <div class="form-row">
        <p class="training"><?php echo the_sub_field('introduction'); ?></p>
        <button class="next">Next Form Element</button>
    </div>
<?php $counter++; endwhile; ?> 
<?php endif; ?>     
</form>

<script type="text/javascript">
jQuery(function($) {
$(document).ready(function() {    

    // hide all form-rows, but not the first one
    $('.form-row').not(':first').hide();

    $('button.next').click(function(e) {
        // prevent the next buttons from submitting the form
        e.preventDefault();
        // hide this form-row, and show the next one
        $(this).parent('div.form-row').hide().next('div.form-row').show();
    });    

});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:20:25.190

您可以使用 jQuery 执行类似这样的简单操作（我认为这就是您想要的？）：

```
$(document).ready(function() {  
  // prepend a 'previous' button to all form-rows except the first
  $('<button>').addClass('previous').text('Previous').prependTo($('.form-row').not(':first'));

  // hide all form-rows, but not the first one
  $('.form-row').not(':first').hide();

  // add the submit button to the last form-row
  $('<input>').prop('type', 'submit').val('Submit Form').appendTo($('.form-row:last'));

  // handle the previous button, we need to use 'on' here as the
  // previous buttons don't exist in the dom at page load
  $('.form-row').on('click', 'button.previous', function(e) {
    e.preventDefault();
    $(this).parent('div.form-row').hide().prev('div.form-row').show();
  });

$('button.next').click(function(e) {
    // prevent the next buttons from submitting the form
    e.preventDefault();
    // hide this form-row, and show the next one
    $(this).parent('div.form-row').hide().next('div.form-row').show();
}); 
```

});

一些示例标记：

```
<form action="index.php" method="post">

    <div class="form-row">
        <label for="forename">Forename</label>
        <input type="text" name="forename" />
        <button class="next">Next Form Element</button>
    </div>

    <div class="form-row">
        <label for="forename">Surname</label>
        <input type="text" name="surname" />
        <div style="clear: both;"></div>
        <label for="another">Another</label>
        <input type="text" name="another" />
        <button class="next">Next Form Element</button>
    </div>

    <div class="form-row">
        <label for="last">Last Form Element</label>
        <input type="text" name="last" />
    </div>

</form> 
```

您可以根据`form-row`需要向每个表单元素添加任意数量的表单元素，[这是一个可以玩的小提琴](http://jsfiddle.net/deifwud/aDtFY/4/)

**编辑**

这里要注意的是`previous`按钮是动态注入到 DOM 中的，表单`submit`按钮也是如此（注意我是如何从`form-row`标记中的最后一个删除它的）

[这是一个更新的小提琴](http://jsfiddle.net/deifwud/aDtFY/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:15:56.333

您可以从[jQuery 手风琴菜单](http://www.stemkoski.com/stupid-simple-jquery-accordion-menu/)开始。一些 CSS 将允许您最小化被取消选择的行占用的空间。如果您想根据某些可识别的特征（例如 ID 号）实际丢弃和检索某些行，则需要使用 AJAX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:21:51.127

您可以使用 JQuery 之类的东西编写自己的自定义方法。

为每一行分配一个类，并跟踪选择了哪一个，当查看另一行时，只需.hide( [)](http://api.jquery.com/hide/)正在显示的行和[.show()](http://api.jquery.com/show/)您希望显示的行。

如果你想让你的 HTML 更干净，你可以使用 JQuery [.data()](http://api.jquery.com/jQuery.data/)功能来为每个元素分配标识符并以这种方式引用它们。

这大部分都取决于您对 wordpress 的约束、它的外观和您的实际 HTML 布局

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T15:22:14.970

全部写入屏幕后，除了第一行之外，您不能隐藏所有内容吗？然后每次单击按钮时，让它隐藏所有内容并显示下一行。尝试使用 jquery 的 next() 函数。 [jQuery - 下一个（）](http://api.jquery.com/next/)

啊，看起来 deifwud 用更好的解释打败了我。

# matlab - 使用 Matlab 将文本信息写入现有 CSV 文件

> ID：12515602
> 
> 赞同：0
> 
> 时间：2012-09-20T15:11:33.223
> 
> 标签：matlab, csv

我正在使用以下方法将一组数字附加到现有的 excel 文件中：

```
dlmwrite(mydatafile,newdataarray,'-append'); 
```

我需要在新行的开头添加一列作为文本标识符（员工姓名），但我无法让 Matlab 将名称写入单个单元格。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:39:30.820

您的问题并不完全清楚，例如它没有完全定义如何将一列添加到一行。

如果以下内容不起作用，我建议您提供一个小规模示例，说明您拥有的数据和要附加的内容。

假设您只需要完成这项工作并且不是在寻找一个漂亮的解决方案，您可以尝试：

先读入matlab

然后执行你喜欢的操作

然后将其写入新文件

这将使您几乎可以做任何事情，但是否方便取决于您的特定需求。

# c# - 为什么消息框从不显示？

> ID：12515604
> 
> 赞同：1
> 
> 时间：2012-09-20T15:11:47.003
> 
> 标签：c#

给定

```
 static void Main()
    {
        Form f = new Form();
        f.Show();
        Action a = () => MessageBox.Show("hi");            
        Task.Factory.FromAsync(f.BeginInvoke(a), (ar) => a.EndInvoke(ar));
        Console.Read();
    } 
```

*   我从来没有看到消息框显示“嗨”。
*   其次，从 Async 使用 Task.Factory 时还需要调用**EndInvoke(ar)吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:13:23.180

当你从一个线程调用 MessageBox 时，除了 UI 线程之外，它永远不会出现。

处理此问题的正确方法是从您在另一个线程上调用的方法中引发一个事件，并让 UI 线程订阅它。在事件处理程序中，您可以编写代码来显示 MessageBox。

# php - 在绑定事件中嵌入 Ajax 请求 (XHR)

> ID：12515609
> 
> 赞同：0
> 
> 时间：2012-09-20T15:12:14.083
> 
> 标签：php, ajax, json, xmlhttprequest, bind

我试图在附近的某个地方找到答案，但我做不到，

所以我有一个 .bind() 事件，我想要什么时候触发从带有 JSON 的 php 文件中获取查询，就像 AJAX 一样。

我尝试了以下不起作用的方法：

```
$(document).ready(function() {  
$("#adivhere").bind("valuesChanged", function(){ 

                            // Some variables here 
var max2 = 10
var min2 = 5

                            //The classic AJAX Request
function afunc(max2,min2){
var xmlhttp;  
if (window.XMLHttpRequest)
{   // code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();  
}else  {    // code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

                           //The classic AJAX onreadystatechange function
xmlhttp.onreadystatechange=function()
{ if (xmlhttp.readyState==4 && xmlhttp.status==200){    

                         //The code triggered
var fets = jQuery.parseJSON( xmlhttp.responseText );
var t = fets.date.split(/[-]/); 
var d = new Date(t[0], t[1], t[2]);
alert(d);   

}}  

                        //The XHR request with the .php file and the
                        // two values that sends
xmlhttp.open("GET","getdates.php?max2="+max2+"&min2="+min2,true);
xmlhttp.send();
};
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:21:49.227

您的脚本中有几个“错误”：

*   "afunc" 永远不会被调用，那么为什么要执行它呢？
*   括号没有正确关闭；最后有两个缺失：）}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:22:39.520

看起来你正在使用 jQuery，所以这应该可以工作：

```
$(function(){
    $('#adivhere').bind('valuesChanged',function(){ 
        var max2 = 10;
        var min2 = 5;

        $.getJSON('getdates.php?callback=?', {max2: max2, min2: min2}, function(json){
            alert(json);

            var t = json.date.split(/[-]/);

            if (t && t.length) {
                var d = new Date(t[0], t[1], t[2]);
                alert(d);
            }
        });
    });
}); 
```

jQuery 中已经有一个很棒的 $.getJSON 方法，它将为您完成所有繁重的工作，包括以 JSON 形式返回您的结果。

您需要让您的`getdates.php`脚本回显`callback`并将结果包装在括号中，以便它作为实际的 jQuery 返回。

# oracle - SQLAlchemy MetaData.reflect 在 Oracle db 中找不到表

> ID：12515610
> 
> 赞同：2
> 
> 时间：2012-09-20T15:12:15.113
> 
> 标签：oracle, reflection, sqlalchemy, metadata

我正在尝试将现有的 Oracle 模式逆向工程为一些声明性 SQLAlchemy 模型。我的问题是，当我使用时[`MetaData.reflect`](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html?highlight=metadata.reflect#sqlalchemy.schema.MetaData.reflect)，它在我的架构中找不到表，只是一个全局临时表。但是，我仍然可以查询其他表。

我正在使用 SQLAlchemy 0.7.8、CentOS 6.2 x86_64、python 2.6、cx_Oracle 5.1.2 和 Oracle 11.2.0.2 Express Edition。这是我正在谈论的内容的快速示例：

```
>>> import sqlalchemy
>>> engine = sqlalchemy.create_engine('oracle+cx_oracle://user:pass@localhost/xe')
>>> md = sqlalchemy.MetaData(bind=engine)
>>> md.reflect()
>>> md.tables
immutabledict({u'my_gtt': Table(u'my_gtt', MetaData(bind=Engine(oracle+cx_oracle://user:pass@localhost/xe)), Column(u'id', NUMBER(precision=15, scale=0, asdecimal=False), table=<my_gtt>), Column(u'parent_id', NUMBER(precision=15, scale=0, asdecimal=False), table=<my_gtt>), Column(u'query_id', NUMBER(precision=15, scale=0, asdecimal=False), table=<my_gtt>), schema=None)})
>>> len(engine.execute('select * from my_regular_table').fetchall())
4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:41:36.630

感谢@zzzeek 的一些快速帮助，我发现（通过使用`echo='debug'`to 参数`create_engine`）我的问题是由旧用户拥有的表引起的，即使当前用户可以从默认模式访问它们而无需任何明确的同义词。

# c# - Outlook 中的“已发送项目”事件

> ID：12515612
> 
> 赞同：7
> 
> 时间：2012-09-20T15:12:21.850
> 
> 标签：c#, outlook, vsto, ms-office, outlook-addin

当从 Outlook 发送项目时，我正在使用`ApplicationEvents_11_ItemSendEventHandler`（请参阅[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.applicationevents_11_itemsendeventhandler.aspx ）进行一些处理。](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.applicationevents_11_itemsendeventhandler.aspx)

但是，由于此事件在“发送”而不是“发送”时触发，因此我无法获取某些信息，例如发件人、发送时间等。

项目实际发送*后*是否会触发替代事件？我读过这篇博文；[http://easyvsto.wordpress.com/2010/07/27/how-to-save-mail-content-when-a-mail-is-sent-from-outlook/](http://easyvsto.wordpress.com/2010/07/27/how-to-save-mail-content-when-a-mail-is-sent-from-outlook/)但我对出现的项目持谨慎态度在已发送项目文件夹中，考虑到用户可以禁用此功能。

**编辑：**我应该补充一点，我实际上已经尝试过“查看已发送项目文件夹”的方法，并且注意到该`ItemAdd`事件似乎只在我发送的第一封电子邮件中触发，然后在我重新启动 Outlook 之前不会再次触发。我的代码如下；

```
var sentMail = Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderSentMail);
sentMail.Items.ItemAdd += new Outlook.ItemsEvents_ItemAddEventHandler(Items_ItemAdd); 
```

而我的方法...

```
void Items_ItemAdd(object item)
{
    MessageBox.Show(((Outlook.MailItem)item).Subject);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T17:15:55.310

如果您使用模式对话框 ( *WPF/Winforms`MessageBox`* )，您只会获得第一个事件触发器。您必须实现**非阻塞事件处理程序**（*可能是项排队策略*）。

不要使用阻止 UI 调用模式对话框 - Outlook 会注意到 UI 被阻止并忽略触发后续中断。

请参阅[此表格帖子以供参考](http://www.pcreview.co.uk/forums/itemadd-event-not-firing-every-time-t1839659.html)。

* * *

如果您担心控制已发送项目存储的用户偏好，只需使用以下代码段覆盖它们...

```
MailItem.DeleteAfterSubmit = false; // force storage to sent items folder (ignore user options)
Outlook.Folder sentFolder = ThisAddIn.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderSentMail);
if (sentFolder != null)
    MailItem.SaveSentMessageFolder = sentFolder; // override the default sent items location
MailItem.Save(); 
```

# c# - 如何在 xaml 中左对齐数字列

> ID：12515614
> 
> 赞同：0
> 
> 时间：2012-09-20T15:12:40.340
> 
> 标签：c#, xaml

我在 ac# Xaml 应用程序中有一些列显示为右对齐，我们需要它们左对齐。我认为它应该能够在 Xaml 中完成，但不确定如何。

```
<dxg:GridColumn FieldName="Value"
                Header="End Value" />
<dxg:GridColumn FieldName="Change" />
<dxg:GridColumn EditSettings="{dxe:TextSettings DisplayFormat=N2}"
                FieldName="Percent" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:17:31.900

显示必须固定在单元格样式中，因此您可以像这样添加：

```
<dxg:GridColumn x:Name="colText" FieldName="Text" CellStyle="{StaticResource styleAligned}"/> 
```

然后像这样在资源中定义样式：

```
<dxg:GridControl.Resources>
    <Style x:Key="styleAligned" TargetType="dxg:CellContentPresenter">
        <Setter Property="HorizontalContentAlignment" Value="XXX"/>
    </Style>
</dxg:GridControl.Resources> 
```

在那里您可以将 XXX 更改为 Right、Left、Center、Justify....

# c++ - 表达式包含未扩展的参数包

> ID：12515616
> 
> 赞同：14
> 
> 时间：2012-09-20T15:12:42.837
> 
> 标签：c++, templates, c++11, variadic-templates

不知何故，我不明白可变参数模板参数包是如何扩展的。下面的代码有什么问题？

```
#include <iostream>

template <typename T>
struct print_one
{
    static void run(const T& t)
    {
        std::cout << t << ' ';
    }
};

template<typename... Args>
void print_all(Args&&... args)
{
    // the next line doesn't compile:
    print_one<Args>::run(std::forward<Args>(args))...;
}

int main()
{
    print_all(1.23, "foo");
} 
```

铿锵说，`Expression contains unexpanded parameter packs 'Args' and 'args'`。为什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T15:14:00.180

`...`必须放在函数调用括号内：

```
print_one<Args>::run(std::forward<Args>(args)...); 
```

显然，这不适用于仅采用单个参数的函数，因此您需要找到一种方法将调用扩展为函数调用或其他允许的构造：

```
// constructing a dummy array via uniform initialization
// the extra 0 at the start is to make it work when the pack is empty
int dummy[]{0, (print_one<Args>::run(std::forward<Args>(args)), 0)...};

// or, if your compiler doesn't support uniform initialization
int dummy[] = {0, (print_one<Args>::run(std::forward<Args>(args)), 0)...};

// or, calling a dummy function
template<typename... Args> void dummy(Args...) {}
dummy((print_one<Args>::run(std::forward<Args>(args)), 0)...);

// or, constructing a temporary dummy object
struct dummy { dummy(std::initializer_list<int>) {} };
dummy{(print_one<Args>::run(std::forward<Args>(args)), 0)...};

// or, constructing a temporary initializer list
std::initializer_list<int>{(print_one<Args>::run(std::forward<Args>(args)), 0)...}; 
```

请注意使用逗号运算符将`void`返回`print_one`值转换为适合放置在参数列表或初始化表达式中的值。

初始化列表形式优于函数调用形式，因为它们（应该是）有序的 LTR，而函数调用参数不是。

14.5.3 [temp.variadic] 涵盖了可能发生参数包扩展的形式：

> 4 - [...] 包扩展可能发生在以下情况下：
> 
> *   [...]

您的原始代码是非法的，因为尽管从文本上看，它可能会生成一个由多个逗号运算符表达式组成的语句，但这不是 14.5.3:4 所允许的上下文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T15:31:32.510

该标准规定了允许扩展包的位置：

`§14.5.3 [temp.variadic] p4`

> [...] 包扩展可能发生在以下情况下：
> 
> *   在函数参数包中（8.3.5）；模式是没有省略号的*参数声明。*
> *   在作为包扩展 (14.1) 的模板参数包中：
>     *   如果模板参数包是*参数声明*；模式是没有省略号的*参数声明；*
>     *   如果模板参数包是带有*模板参数列表的**类型参数*；模式是没有省略号的相应*类型参数。*
>     
> ***   在*初始化列表*（8.5）中；该模式是一个*初始化子句*。*   在*基本说明符列表中*（第 10 条）；模式是一个*基本说明符*。*   在*mem-initializer-list* (12.6.2) 中；该模式是一个*mem-initializer*。*   在*模板参数列表*（14.3）中；模式是一个*模板参数*。*   在*动态异常规范*（15.4）中；模式是*type-id*。*   在*属性列表中*（7.6.1）；模式是一个*属性*。*   在*对齐说明符*（7.6.2）中；模式是没有省略号的*对齐说明符。**   在*捕获列表中*（5.1.2）；该模式是一个*捕获*。*   在`sizeof...`表达式（5.3.3）中；模式是一个标识符。**

 **所以基本上，作为顶级声明，扩展是不允许的。这背后的原因是什么？不知道。他们很可能只选择了分隔逗号 ( `,`) 是语法一部分的上下文；`operator,`如果涉及用户定义的类型并遇到麻烦，您可能会在其他任何地方选择重载。**

# javascript - Facebook Like 按钮不显示在使用延迟的弹出框上（在 firefox 和 IE 上）

> ID：12515620
> 
> 赞同：1
> 
> 时间：2012-09-20T15:13:02.040
> 
> 标签：javascript, facebook, popup, facebook-like, delay

我有一个弹出插件的问题。

弹出窗口有 5 秒的延迟。（5秒后出现弹出窗口）

每当设置延迟时，Firefox 和 Internet Explorer 上都不会出现类似 facebook 的按钮。它只出现在谷歌浏览器中。

[您可以在http://palimashop.com](http://palimashop.com)上看到正在运行的弹出窗口

这是 javascript [http://palimashop.com/wp-content/plugins/social-traffic-pop/stp.js?ver=1.0](http://palimashop.com/wp-content/plugins/social-traffic-pop/stp.js?ver=1.0)

不使用延迟时，类似 fb 的按钮工作正常。

启用延迟后，如何让 facebook like 按钮显示在 firefox 上？

我将不胜感激。谢谢

# permissions - RPM如何确定已安装包的权限？

> ID：12515627
> 
> 赞同：0
> 
> 时间：2012-09-20T15:13:36.840
> 
> 标签：permissions, rpm

如果您在 %defattr 中明确声明 -,root,root 则已安装的打包将属于 root - root，并且将具有“默认”权限（由于 -。用三位数的八进制替换它会为已安装的文件提供那些权限而不是“默认权限”）。

我想知道 RPM 如何确定使用“-”时要授予的权限？我认为它与umask有关，但我目前正在测试以确认。如果它与 umask 有关，那么 umask 究竟是什么时候应用的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:31:34.010

umask 从文件的默认值 0666 中删除权限。如果您的 umask 为 0022，那么您最终将获得对 0644 的新文件/文件夹的有效默认权限。您可以使用 umask 命令查看您的帐户具有的默认 umask，而无需任何参数。它通常在登录时由 /etc/bashrc 文件和 /etc/profile 文件设置。

# asp.net - 如果下拉到登录用户更改值？

> ID：12515630
> 
> 赞同：0
> 
> 时间：2012-09-20T15:13:38.057
> 
> 标签：asp.net, user-controls, asp.net-membership

我在用户控件的下拉列表中有测试列表。我正在尝试将所选技术更改为登录用户，但它给了我“对象引用未设置为对象实例”。

```
protected void Page_Load(object sender, EventArgs e)
{
    string username = Membership.GetUser().UserName;
    ddl_techsList.SelectedItem.Text = username;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:18:09.283

在您的情况下，您可能没有带有给定文本的下拉项目，即用户名。所以首先检查你是否有那个元素，然后如果你找到它，那么它应该被选中。

```
ddl_techsList.ClearSelection();
ListItem li = ddl_techsList.Items.FindByText( defaultText));

if(li != null)
    li.Selected = true; 
```

**更新**

如果下拉列表在其他用户控件中。

```
DropDownList ddl_techsList = (DropDownList)YourUserControlInstanceID.FindControl("ddl_techsList");
ddl_techsList.ClearSelection();
ListItem li = ddl_techsList.Items.FindByText( defaultText));

if(li != null)
    li.Selected = true; 
```

# android - 如何在 ICS+ 中使用 Roboto 压缩（或细）字体？

> ID：12515635
> 
> 赞同：4
> 
> 时间：2012-09-20T15:13:56.847
> 
> 标签：android, fonts

我找不到设置 Roboto condensed (thin) 而不是默认设置的方法。可能吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T15:19:51.250

1.  下载完整的[Roboto](http://developer.android.com/design/style/typography.html)系列

2.  复制`Roboto-Condensed.ttf`到项目的`assets`文件夹中

3.  在代码中，获取对您的`Typeface`参考`Typeface robotoCond = Typeface.createFromAsset(context.getAssets(), "Roboto-Condensed.ttf")`

4.  在任何小部件中使用它，例如`textView.setTypeface(robotoCond);`

5.  ？？？

6.  利润！

# c# - 匹配所有字符的正则表达式返回的匹配太少

> ID：12515641
> 
> 赞同：0
> 
> 时间：2012-09-20T15:14:13.267
> 
> 标签：c#, regex

我正在尝试解析 html 页面，并使用以下正则表达式：

```
var regex = new Regex(@"<tag1 id=.id1.>.*<tag2>", RegexOptions.Singleline); 
```

“tag1 id =.id.1”在文档中只出现一次。“tag2”在“tag 1”出现后出现了近 50 次。但是当我尝试用我的正则表达式匹配页面代码时，它只返回 1 个匹配项。此外，当我将 RegexOptions 更改为“None”或“Multiline”时，不会返回任何匹配项。我对此感到非常困惑，并希望得到任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:21:33.060

用 RegEx 解析 Html 是一个非常糟糕的主意，而且它不可靠，因为世界上仍然存在很多“损坏的 html”。要解析 HTML，我建议使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。它是一个出色的 HTML 解析库，我从来没有遇到过我输入的任何 HTML 的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:29:52.577

撇开关于不使用正则表达式解析 HTML 的明显劝告不谈，我可以向您解释为什么您会看到您所看到的。

如果`tag1`您的文本中仅出现一次，则正则表达式只能匹配一次，因此永远不会有多个匹配项。正则表达式匹配“消耗”它们匹配的文本，因此下一次匹配尝试从最后一次成功匹配的末尾开始。

这导致了下一个问题：`.*`是贪心的，所以它匹配 (with `RegexOptions.Singleline`) 直到字符串的末尾，然后回溯到`<tag2>`它找到的最后一个，以便成功匹配。这是您只能获得一场比赛的另一个原因。

至于你的第二个问题：如果你不使用，为什么火柴会消失`RegexOptions.Singleline`？简单：如果没有该选项，点将无法匹配换行符，并且第`.`一个 和之间似乎至少有一个换行符。`tag1``tag2`

# core-data - 了解查询来自哪个持久存储

> ID：12515646
> 
> 赞同：0
> 
> 时间：2012-09-20T15:14:23.057
> 
> 标签：core-data, nsmanagedobjectcontext, nspersistentstore

我尝试做的事情可能无法用 Core Data 完成，所以如果是这样，请告诉我。

我有一个 ManagedObjectContext 并且我通过 addPersistentStoreWithType 添加它们来引入 sqlite 数据库。. .

所以我将添加一些数据库 - 假设在 1 到 5 之间，然后我对数据库中的数据执行提取。太好了，我不必说我正在搜索哪些来源 - 结果刚刚回来，它们被合并在一起。

但是，如果我*想*知道每个结果来自哪个 Store 怎么办？这甚至可能吗？我是不是想得太“老派”了，比如我想知道找到了哪些“文件”？

帮助/建议将不胜感激。

这是一些代码：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"PMBEntity"
    inManagedObjectContext:context];
[fetchRequest setEntity:entity];
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                    initWithKey:@"Name" ascending:YES];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
[fetchRequest setReturnsDistinctResults:YES];
[sortDescriptor release];

NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error]; 
```

看，上面我有一个 PMBEntity，它是我通过 XCode 创建的核心数据 NSManagedObjectModel。如您所知，（众多）字段之一是“名称”。在这里，我正在搜索所有唯一名称并按名称排序。

返回给我的是这些 PMBEntity 对象的 NSArray。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T00:02:43.433

您想要`persistentStore`托管对象的属性的`objectID`属性。这将为您提供一个指向保存托管对象的持久存储的 URL。

但是，这只是在对象至少保存一次到持久存储之后。在此之前，它有一个不指向商店的临时 UUID。我不确定新的进口商店如何影响它。读入时可能会获得永久 ID，但我尚未对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:19:30.283

好吧，当您获取时，您将获得 NSManagedObject 实例作为结果。NSManagedObject 实例具有对其 NSManagedObjectContext 的引用。那个 NSManagedObjectContext 引用了它的 persistentStoreCoordinator。NSPersistentStoreCoordinator 实例具有对持久存储和 NSManagedObjectModel 的引用。

# struts2 - struts2 当动作返回输入时 freemarker 中包含的动作不调用执行

> ID：12515647
> 
> 赞同：1
> 
> 时间：2012-09-20T15:14:26.723
> 
> 标签：struts2

我们有许多 Freemarker 页面，其中包含操作调用，例如：

我们遇到的问题是，如果呈现页面的操作出于任何原因返回 INPUT，则包含的操作的 execute() 方法不会被调用。相反，只有 validate 方法被调用。这意味着不执行操作的逻辑。我会认为包含的动作调用应该独立于“父”动作的结果。

要解决此问题，我们必须将输入结果映射添加到标头操作映射，使其与成功映射完全相同，并且还要在 validate 方法中显式调用 execute。这是不干净的，似乎是错误的。

这是一个 struts2 错误还是我遗漏了什么？

谢谢马特

# sql - 仅在 SQL 中根据条件删除表中的重复项

> ID：12515651
> 
> 赞同：3
> 
> 时间：2012-09-20T15:14:35.990
> 
> 标签：sql, duplicates, sql-delete

假设我有一个包含列的表：

```
CustomerNumber
Lastname
Firstname
PurchaseDate 
```

...以及其他列如果未在此处显示，则不会更改问题中的任何内容。

在此表中，我可以为具有不同购买日期的同一客户提供许多行（我知道，设计不佳......我只是试图解决报告问题，而不是真正试图解决问题的根源）。

如何在 SQL 中为每个客户保留一条记录的最新日期，然后删除其余记录？A`group by`似乎不适用于我的情况

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T15:30:45.960

```
;with a as
(
select row_number() over (partition by CustomerNumber, Lastname, Firstname order by PurchaseDate desc) rn
from <table>
)
delete from a where rn > 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T15:33:08.643

这对我有用（在 DB2 上）：

```
 DELETE FROM my_table 
 WHERE (CustomerNumber, Lastname, Firstname, PurchaseDate) 
 NOT IN ( 
       SELECT CustomerNumber, Lastname, Firstname, MAX(PurchaseDate) 
       FROM my_table 
       GROUP BY CustomerNumber, Lastname, FirstName 
 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:18:55.767

```
SELECT CustomerNumber, Lastname, Firstname, MAX(PurchaseDate) LatestPurchaseDate
FROM Table
GROUP BY CustomerNumber, Lastname, Firstname 
```

MAX 将选择最高（最新）日期，并为 GROUP BY 列的每个唯一组合显示该日期。

编辑：我误解了您想删除除最新购买日期之外的所有记录。

```
WITH Keep AS
(
    SELECT CustomerNumber, Lastname, Firstname, MAX(PurchaseDate) LatestPurchaseDate
    FROM Table
    GROUP BY CustomerNumber, Lastname, Firstname
)
DELETE FROM Table
WHERE NOT EXISTS
(
    SELECT *
    FROM Keep
    WHERE Table.CustomerNumber = Keep.CustomerNumber
    AND Table.Lastname = Keep.Lastname
    AND Table.Firstname = Keep.Firstname
    AND Table.PurchaseDate = Keep.LastPurchaseDate
) 
```

# haskell - 在类型类定义中添加额外的函数/组合器有什么优点和缺点？

> ID：12515655
> 
> 赞同：13
> 
> 时间：2012-09-20T15:14:52.567
> 
> 标签：haskell, typeclass

[查看 Monad](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Base.html#Monad)的来源：

```
class  Monad m  where
    (>>=)       :: forall a b. m a -> (a -> m b) -> m b
    (>>)        :: forall a b. m a -> m b -> m b

    return      :: a -> m a
    fail        :: String -> m a

    {-# INLINE (>>) #-}
    m >> k      = m >>= \_ -> k   -- <-- !! right here !!
    fail s      = error s 
```

您可以看到它`>>`有一个默认实现。我的问题是，它被认为是好的还是坏的做法，为什么在类型类中包含一个函数/组合器*，*而不是在类型类之外单独提供它？

* * *

也就是说，为什么不：

```
class  Monad m  where
    (>>=)       :: forall a b. m a -> (a -> m b) -> m b

    return      :: a -> m a
    fail        :: String -> m a

    fail s      = error s 
```

和其他地方：

```
(>>)        :: forall a b. m a -> m b -> m b
{-# INLINE (>>) #-}
m >> k      = m >>= \_ -> k 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T15:23:16.773

据我所知，包含“额外”功能有两个主要原因：

*   **效率**：有时存在效率低下的泛型实现，并且该类的作者期望特定于实例的实现要好得多。在这种情况下，在类中包含具有默认实现的函数意味着实例可以根据需要使用优化版本，但不是必须的。有关这方面的一个有趣示例，请查看`Foldable`. 这也是如此`Monad`。

*   **实现的选择**：通常有几个可以使用的类函数子集；包括所有潜在功能并相互使用默认实现意味着实例可以选择一些功能来实现并自动获取其余功能。这也适用于`Foldable`，但`Eq`只是一个更简单的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T07:44:06.430

在类型类中包含方法的另一个论点是它们何时应该满足某些定律，或者它们何时使这些定律的陈述更清晰。我认为法律应该在道德上与类型类相关联（“我必须提供什么才能声明此类的实例？”）例如，您可能更喜欢用 和 来陈述单子定律`return`，`join`而`fmap`不是比`return`和`>>=`; 这鼓励您将所有四个运算符都放在类型类中（并创建`Monad`一个`Functor`！的子类），并给出`>>=`in 的默认定义，`join`反之亦然。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T15:20:41.400

这样，`>>`可以为 monad 实现 custom ，它可以比 via 更有效或更自然地完成`m >>= \_ -> k`，但仍然存在默认实现。

# javascript - 动态分层 Javascript 对象循环

> ID：12515656
> 
> 赞同：1
> 
> 时间：2012-09-20T15:14:56.693
> 
> 标签：javascript, loops, hierarchical-data, javascript-objects, dynamicobject

```
 var treeData = {"name" : "A",  "children" : [
                         {"name" : "B", "children": [
                                 {"name" : "C", "children" :[]}
                          ]}
                   ]}; 
```

之前的数组应该是空的。应根据通过的动态值定义所需的节点数来填充 AFTER 数组。

我想动态构建层次结构，每个节点都创建为层次结构中的层/级别，具有自己的节点数组。这应该形成一个树形结构。这是上面代码中描述的层次结构。应该有一个根节点，以及一个未定义数量的节点和级别来构成层次结构大小。除了根节点之外，什么都不应该被修复。我不需要阅读或搜索层次结构，我需要构建它。数组应该从 {"name" : "A", "children" : []} 开始，并且每个新节点都将被创建为级别 {"name" : "A", "children" : [HERE-{"name" : “A”，“儿童”：[]}]}。在子数组中，越来越深。基本上，数组在调用之前应该没有值，除了根节点。在函数调用之后，数组应该包含一个数字的所需节点，根据数据库查询的结果，每次调用可能会有所不同。每个子数组将包含一个或多个节点值。至少应该有 2 个节点级别，包括根。它最初应该是一个空白画布，即没有预定义的数组值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:33:09.467

这是动态创建节点的函数示例：

```
function createNode(name) {
   return({name: name, children: []});
}

function addChild(node, child) {
    node.children.push(child);
    return node;
}

var treeData = createNode("");
var subChild = createNode("");
addChild(subChild, createNode("A31"));
addChild(treeData, subChild); 
```

但我建议改用原型。

通过任何级别的“路径”查找任何节点：

```
function findNodeByPath(root, path) {
   var curr; 
   while(root && ((curr = path.splice(0,1)[0]) !== undefined)) {
        if (root.children) root = root.children[curr];
        else root = undefined;
   }
   return root;
}

function findNodeByName(root, namePath, create) {
   var curr; 
   while(root && ((curr = namePath.splice(0,1)[0]) !== undefined)) {
        if (root.children) {
            var found = undefined;
            for (var i = 0; !found && i < root.children.length; i++)
                if (root.children[i].name == curr) found = root.children[i];
            if (create && !found) {
                found = createNode(curr);
                addChild(root, found);
            }
            root = found;
        }
        else root = undefined;
   }
   return root;
}

var A31 = findNodeByPath(treeData, [0, 0]); // Will return the node with name A31
addChild(A31, createNode("A31 child 1"));
addChild(A31, createNode("A31 child 2"));

// second child will be accessible by:
var secondChildOfA31 = findNodeByPath(treeData, [0, 0, 1]);

// also to find node by the name:
var secondChildOfA31 = findNodeByName(treeData, ["", "A31", "A31 child 2"]);

// will create all intermenient nodes with respective names:
var veryDeepChild =  findNodeByName(treeData, ["foo", "bar", "baz", "quux", "moo"], true);

function createOuterNode(name, childNode) {
    return {name: name, children: childNode? [childNode] : []}
}

// Example to create nodes in the question:
var CNode = createOuterNode("C");
var BNode = createOuterNode("B", CNode);
var ANode = createOuterNode("A", BNode);

// Example using LOOP:
var list = ["A", "B", "C"];
var outer = undefined;
for (var i = list.length - 1; i >= 0; i--) outer = createOuterNode(list[i], outer);

// outer will contain A node with child B with child C
console.log(outer); 
```

# visual-studio-2010 - 供应商参考未从 VB 库项目复制到 C# 应用程序

> ID：12515664
> 
> 赞同：0
> 
> 时间：2012-09-20T15:15:10.057
> 
> 标签：visual-studio-2010

我有一个用 VB.NET 编写的业务逻辑库。它引用了一些来自供应商的 DLL，这些 DLL 设置为 Copy Local = true。当我构建这个 VB.NET 项目时，我可以浏览到它的 bin 目录并确认所有内容都已正确复制。

现在我有一个引用 VB.NET 库项目的 C# ASP.NET MVC 应用程序。我可以构建 C# 应用程序，但是当我浏览到它的 bin 目录时，只有 VB.NET DLL 在那里，并且 VB.NET DLL 需要的所有供应商引用都不在那里。

那是，

```
Dependency chain is:
C# MVC -> VB.NET library -> Vendor library

MyLibrary\bin folder contains:
MyLibrary.dll, MyVendor.dll

MyMVC\bin folder contains:
MyMVC.dll, MyLibrary.dll (MyVendor.dll is missing!) 
```

为什么这不是复制，我该如何制作？

诸如设置构建后操作之类的解决方法将不起作用，因为这将进入 Microsoft Azure，并且构建后复制的文件不会捆绑到 .cspkg 部署文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:16:30.470

引用不可传递。
您还需要将供应商库的引用添加到 C# 项目中。

# lua - 在 Lua 中引用包含表的函数

> ID：12515667
> 
> 赞同：1
> 
> 时间：2012-09-20T15:15:14.307
> 
> 标签：lua, closures

我有一个帮助函数，它返回一个像这样的表：

```
function of_type(expected_type)
    return {
        expected = expected_type,
        matches = function(value) return type(value) == expected_type end,
        describe = "type " .. expected_type
    }
end 
```

现在这对其他匹配器来说很好，但是在这里我想在调用函数`type(value)`时将其存储到同一个表中的一个字段。`matches`像这样的东西：

```
function of_type(expected_type)
    return {
        expected = expected_type,
        mismatch = nil, -- set it to nil on initialization
        matches = function(value) 
            mismatch = type(value)  -- how to do this?
            return type(value) == expected_type
        end,
        describe = "type " .. expected_type
    }
end 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:25:29.447

是的，但是您需要将其拆分为步骤：

```
function of_type(expected_type)
    local tbl = {
        expected = expected_type,
        mismatch = nil, -- set it to nil on initialization
        describe = "type " .. expected_type
    }
    tbl.matches = function(value) 
        tbl.mismatch = type(value)
        return type(value) == tbl.expected
    end
    return tbl
end

-- testing it
local foo = of_type("string")
print(foo.matches(1), foo.matches("1")) 
```

这应该`false true`像您期望的那样输出。

本质上，`tbl.matches`将存储对`tbl`（称为“upvalue”）的引用，并将能够修改该表中的所有字段（包括对其自身的引用）。

**执行此操作的另一种方法**如下（注意 tbl.matches 函数中的更改）。`tbl:method`您可以使用语义并`tbl`作为隐式参数传递，而不是将其捕获为上值`self`：

```
 function of_type(expected_type)
        local tbl = {
            expected = expected_type,
            mismatch = nil, -- set it to nil on initialization
            describe = "type " .. expected_type
        }
        function tbl:matches(value) 
                self.mismatch = type(value)  -- how to do this?
                return type(value) == self.expected
            end
        return tbl
    end

local foo = of_type("string")
print(foo:matches(1), foo:matches("1")) 
```

这将打印相同的结果。请注意，您使用`foo:matches`符号来`foo`作为第一个参数传递（`self`方法中的引用）。这与使用`foo.matches(foo, 1)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:26:56.590

你没有。好吧，不是不存储表的副本，或者将表作为参数传递给函数。在处理完表构造函数的所有语句之前，该表还不存在。而且由于您从未将其存储在任何地方（在此函数中），因此您的函数无法命名它以找到它。

所以你应该给它一个名字，即使只是片刻：

```
function of_type(expected_type)
  local temp = nil
  temp = {
        expected = expected_type,
        mismatch = nil, -- set it to nil on initialization
        matches = function(value) 
            temp.mismatch = type(value)  -- Like this
            return type(value) == expected_type
        end,
        describe = "type " .. expected_type
    }
  return temp
end 
```

这是可行的，因为 Lua 将存储`temp`为上值。因此，您正在创建的函数将在 中看到变化`temp`，例如当您将其设置为表值时。而且由于它是一个局部变量，所以在这个函数之外它是不可见的。

# php - 将没有表单的 POST 数据发送到另一台服务器

> ID：12515672
> 
> 赞同：0
> 
> 时间：2012-09-20T15:15:21.060
> 
> 标签：php, post, data-transfer

我的服务器不支持 json_encode 或 json_decode，我想使用 将 2D 数组发送到不同的服务器`serialize()`，然后对其进行处理并将其打印为 json 编码数组。恐怕 GET 的限制不允许更长的数组。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:20:38.840

如果您无法升级 PHP 以获取内置 JSON 函数，请使用 JSON 编码的 PHP 实现，例如[this](http://code.google.com/p/simplejson-php/source/browse/trunk/simplejson.php)（通过快速搜索找到；可能有更好的实现）。

或者如果您的 GET 参数很长，则使用 POST（通过 libcurl，正如其他人所指出的）。

# facebook - 是否仍然可以注册我的 FB 应用程序以使用标记为已弃用的 Facebook REST API？

> ID：12515674
> 
> 赞同：0
> 
> 时间：2012-09-20T15:15:30.963
> 
> 标签：facebook, rest

是否可以注册我的 FB 应用程序以使用 Facebook REST API？

或者是否可以在没有重定向的情况下在 facebook 移动应用程序中进行身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:48:39.803

您无需使用特定 API 注册应用程序 - 继续使用它，说明都在那里。但是，Facebook*建议*您不要使用 REST API，因为它不再受支持或更新。使用 Graph API 和/或 FQL - 这些正在积极开发中，并且它们是大多数开发社区使用的。

关于移动应用程序问题，您能否提供更多细节？例如，您正在使用的操作系统和 SDK？

# sql-server - 改进 Linq 语句以消除对 foreach 循环的需要

> ID：12515682
> 
> 赞同：1
> 
> 时间：2012-09-20T15:15:51.263
> 
> 标签：sql-server, entity-framework, c#-4.0, linq-to-sql

我有一个包含以下字段的 MS SQL 表。我正在使用实体框架：

```
EntryId
EntryType
Operation
UpdatedTime_UTC 
```

EntryId 和 EntryType 字段可以包含重复值。当一个对象被创建时，一条记录被添加并且它的“操作”字段将被设置为“添加”。如果对象被修改，则写入另一条记录，其 EntryId 和 EntryType 值与第一条记录相同，但“操作”字段将设置为“已修改”。当对象被删除时（您已经猜到了），另一条记录将写入与之前记录相同的 EntryId 和 EntryType 值，但“操作”字段将设置为“已删除”。

一些示例数据如下所示：

```
ID1, Type1, “added”,    2012-08-20 09:15:50
ID2, Type1, “added”,    2012-08-21 09:15:50
ID1, Type1, “modified”, 2012-08-22 09:15:50
ID1, Type1, “modified”, 2012-08-23 09:15:50
ID2, Type1, “deleted”,  2012-08-24 09:15:50 
```

这显示了有关两个对象（ID1 和 ID2）的信息。两者都已添加到表中，但 ID1 已修改且 ID2 已删除。作为协调过程的一部分，我需要检查一个对象是否已被删除，在我的表中必须有一条记录，其匹配的 EntryId 的操作设置为“已删除”。如果没有我的代码将添加一个。

现在到我的问题。当我的系统认为给定的“EntryType”没有对象时，我会调用一个函数。我需要确认我的表中该“EntryType”的所有记录都有一条“操作”设置为“已删除”的记录。在上面显示的数据中，“ID1”没有“已删除”条目。如果对象仍然存在，这很好，但如果对象已经消失，则不好。我正在使用下面的 Linq 来获取一个分组列表，我在其中传递了我感兴趣的“entityType”。

```
 var item = _ctx.JournalSet
            .Where(x => x.EntryType == entityType)
            .OrderBy(x => x.UpdatedTime_UTC)
            .GroupBy(x => x.EntryId); 
```

然后，我使用此代码查看每个组，看看它有一个“已删除”条目。如果没有，我会在我的表中添加一条新记录。

```
 foreach (var item in result)
        {
            if (item.Last().Operation != "deleted")
            {
                // no 'deleted' entry found. time to add a new entry.
            }
        } 
```

我想做的是修改我的 Linq 语句，以便它只在需要添加已删除条目时返回 EntryId 和 EntryType 详细信息。

**附加信息**：已删除记录的日期时间总是晚于“添加”或“修改”记录，因此当按“UpdatedTime_UTC”排序时，如果给定 entryId 存在最后一个条目，则该条目应为“已删除”

是否可以在不需要 foreach 的情况下创建一个 Linq 语句来执行上述操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:22:44.677

你有没有尝试过这样的事情？

```
 var item = _ctx.JournalSet
         .Where(x => x.EntryType == entityType)
         .OrderBy(x => x.UpdatedTime_UTC)
         .GroupBy(x => x.EntryId)
         .Where(y => y.Last().Operation != "deleted"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:24:11.140

我会找到您缺少已删除条目的记录，然后根据需要添加它们：

```
 var itemsToAdd = _ctx.JournalSet
        .Where(x => x.EntryType == entityType)
        .OrderBy(x => x.UpdatedTime_UTC)
        .GroupBy(x => x.EntryId)
        .Where(grp => grp.Last().Operation != "deleted"); 
```

然后，您可以使用 a`foreach`添加项目，甚至可以通过第二个 LINQ`Select`语句（映射到新类型）来执行此操作，具体取决于您添加的集合。第二个语句可能类似于：

```
 collection.AddRange(itemsToAdd.Select(grp => new YourType(grp.Key.EntryId, "deleted"))); 
```

（这是假设构造函数采用 ID +“已删除”，根据需要进行编辑...）

# ajax - 已在 ASP.NET MVC3 控制器中剪切已发布的 html 标记

> ID：12515685
> 
> 赞同：0
> 
> 时间：2012-09-20T15:15:56.163
> 
> 标签：ajax, asp.net-mvc, post, concatenation

我正在从管理员的 html 编辑器向服务器控制器发布一些标记，如下所示：

```
 var dataString = 'id=' + id +
                         '&name=' + name +
                         '&nameEngl=' + nameEngl +
                         '&description=' + description +
                         '&descriptionEngl=' + descriptionEngl +
                         '&imageName=' + imageName +
                         '&previewImageName=' + previewImageName +
                         '&types=' + types +
                         '&bottomAreaHtml=' + bottomAreaHtml +
                         '&bottomAreaHtmlEngl=' + bottomAreaHtmlEngl +
                         '&slug=' + slug +
                         '&__RequestVerificationToken=' + encodeURIComponent($("input[name=__RequestVerificationToken]").val());

        $.ajax({
            type: "POST",
            url: $("#EditProjectActionUrl").val(),
            data: dataString,
            success: function (result) {
                RefreshProjectsList();
                form.find("#divStatus-p").hide();
                form.closest('.modal-popup').dialog('close');
            }
        }); 
```

如您所见`dataString`，这是一个带有标记的大字符串，但是，我看到通过浏览器请求遥测正在正确发布到服务器。

在服务器上，我通过控制器的操作接收发布的数据：

```
 [Authorize]
    [ValidateAntiForgeryToken]
    [ValidateInput(false)] 
    [HttpPost]
    public ActionResult EditProject(string id, string name, string nameEngl, string description, string descriptionEngl, string customCSS, string imageName, string previewImageName, string types, string bottomAreaHtml, string bottomAreaHtmlEngl, string slug)
    { 
```

在方法调用点，默认绑定器填充所有参数。`bottomAreaHtml`参数包含剪辑（非完整）标记字符串的问题。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:38:09.507

我会在这里建议一种不同的方法。与其对您的`EditProject`操作有这么多参数，不如创建一个具有与这些参数匹配的属性的对象。例子：

```
public class ProjectSettings
{
    public string id { get; set; }
    public string name { get; set; } 
    public string nameEngl{ get; set; } 
    public string description{ get; set; } 
    public string descriptionEngl{ get; set; } 
    public string customCSS{ get; set; } 
    public string imageName{ get; set; } 
    public string previewImageName{ get; set; } 
    public string types{ get; set; } 
    public string bottomAreaHtml{ get; set; } 
    public string bottomAreaHtmlEngl{ get; set; } 
    public string slug{ get; set; } 
} 
```

然后，您可以将对象本身传递给动作，模型绑定器将为您完成繁重的工作。

```
[Authorize]
[ValidateAntiForgeryToken]
[ValidateInput(false)] 
[HttpPost]
public ActionResult EditProject(ProjectSettings projectSettings)
{
    //...
} 
```

而且你的 JavaScript 也可以使用对象！

```
 var settings = {
        'id': id,
        'name': name,
        'nameEngl': nameEngl,
        'description': description,
        'descriptionEngl': descriptionEngl,
        'imageName': imageName,
        'previewImageName': previewImageName,
        'types': types,
        'bottomAreaHtml': bottomAreaHtml,
        'bottomAreaHtmlEngl': bottomAreaHtmlEngl,
        'slug': slug
    };

    $.ajax({
        type: "POST",
        url: $("#EditProjectActionUrl").val(),
        data: { projectSettings: settings, '__RequestVerificationToken': encodeURIComponent($("input[name=__RequestVerificationToken]").val()) },
        contentType: 'application/json, charset=utf-8',
        success: function (result) {
            RefreshProjectsList();
            form.find("#divStatus-p").hide();
            form.closest('.modal-popup').dialog('close');
        }
    }); 
```

坦率地说，我不太确定防伪令牌需要如何进入那里，但我想你明白了。这样您就不会与 JavaScript 和字符串连接作斗争。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:44:39.547

如果我只是使用 javascript 对象作为数据参数而不是将数据编码为查询字符串形式，则数据不会被连接并且通常会传递到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T21:37:24.370

您应该确保 bottomAreaHtml 不包含“&”字符。如果是这样，并且您没有逃避它，它将“混淆”模型绑定器 - 因为它是查询字符串值的分隔符

# asp.net - jQuery Ajax 成功响应返回 HTML 而不是我的预期值

> ID：12515686
> 
> 赞同：0
> 
> 时间：2012-09-20T15:15:56.567
> 
> 标签：asp.net, jquery

我正在调用页面方法，它返回此页面中的所有 HTML，而不是 1 或 0 的值。我不知道这是为什么。有人能指出我正确的方向吗？

JavaScript：

```
$.ajax({
    async: false,
    type: "POST",
    contentType: "application/json; charset=utf-8",
    data: '{}',
    url: "main.aspx/IsInfoComplete",
    success: function(data, textStatus, jqXHR) {
        console.log(textStatus);
        console.log(data.d);
            // act on return value:
            if(data==0) {
              // todo - 
            } else if (data==1) {
              // todo - 
            }
        }
    },
    error: function(jqXHR, textStatus, errorThrown) {
        console.log(textStatus);
    }
}); 
```

服务器：

```
[System.Web.Services.WebMethod()]

public int IsInfoComplete()
{
    int returnValue = 0;

using (SqlConnection conn = new SqlConnection(connString))
{
    SqlCommand cmd = conn.CreateCommand();
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "GetIsUserInfoComplete";
    cmd.Parameters.AddWithValue("@UserName", userName);
    conn.Open();
    try
    {
        returnValue = (int)cmd.ExecuteScalar();
    }
    catch (Exception) { /* todo - */ }
}
return returnValue;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:48:54.627

您可能会尝试的一件事是`success`像这样编写函数，

```
success: function (result) {
                if (result!="False") {
                    //it worked
                }
                else {
                   //it failed                 
                }
            }, 
```

并更改您的服务器端方法以返回`bool`. 这可能会让你得到想要的结果。我必须在我写的东西中做到这一点，它工作得很好。有点傻，你必须检查“错误”，但它有效。

**注意：**查找“False”一词时，大小写很重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:01:53.390

看起来这搞砸了..这里的**数据**是一个对象，您正试图将数据与 0 或 1 进行比较

```
success: function(data, textStatus, jqXHR) {
              console.log(data); // Check the format of data in object
            if(data != null){
               console.log(data.d); // Generally your actual dat is in here
              // act on return value:
              if(data.d ==0) {
               // todo - 
              } else if (data.d ==1) {
                // todo - 
            }
        }
    }, 
```

如果是这样的话，你的 WebService 首先返回一个 json 对象。你需要用这个来装饰你的 Web 服务。

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
[System.Web.Services.WebMethod()]

public int IsInfoComplete()
{ 
```

并`dataType :'json'`在您的 ajax 请求中设置

# c# - WPF用户控件继承3

> ID：12515687
> 
> 赞同：0
> 
> 时间：2012-09-20T15:15:58.723
> 
> 标签：c#, wpf, inheritance, user-controls

我有一个非 MVVM 应用程序。在 MainWindow 中，我有一个带有多个选项卡的 TabControl，每个选项卡都包含一个 UserControl。因为这些 UserControl 具有相似的功能，所以我从继承自 UserControl 的基类派生它们。每个用户控件都有一个名为 EdiContents 的文本框。他们每个人都有一个按钮：

```
<Button Name="Copy" Content="Copy to Clipboard" Margin="10" Click="Copy_Click" /> 
```

我想在基本 UserControl 类中实现 Copy_Click：

```
private void Copy_Click(object sender, RoutedEventArgs e)
{
    System.Windows.Forms.Clipboard.SetText(EdiContents.Text);
} 
```

**但是基类不知道在每个 UserControl 的 XAML 中声明的 EdiContents TextBox。**你能建议如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:29:31.123

你可以做这样的事情。

```
public partial class DerivedUserControl : BaseUserControl
{
    public DerivedUserControl()
    {
        InitializeComponent();
        BaseInitComponent();
    }
} 
```

**请注意**，您是`BaseInitComponent`在`InitializeComponent`

XAML 用于派生控件

```
<app:BaseUserControl x:Class="WpfApplication5.DerivedUserControl"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:app="clr-namespace:WpfApplication5"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     >
    <Grid>
        <Button Name="CopyButton"/>
    </Grid>
</app:BaseUserControl> 
```

在您的 BaseUserControl::BaseInitComponent 中，您只需按名称查找按钮并连接事件。

```
public class BaseUserControl : UserControl
{
    public void BaseInitComponent()
    {
        var button = this.FindName("CopyButton") as Button;
        button.Click += new System.Windows.RoutedEventHandler(Copy_Click);
    }

    void Copy_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        //do stuff here
    }
} 
```

# silverlight - 保存到数据库与保存到文件中？

> ID：12515693
> 
> 赞同：0
> 
> 时间：2012-09-20T15:16:33.697
> 
> 标签：silverlight, save

我有一个 Silverlight 应用程序，它可以更新文档并保存它，但哪种方法更好？

1.  将文件保存到数据库中，例如将 blob 字段保存到表中

    或者

2.  根据文件夹结构保存文件，其中包含有关文件保存到磁盘的位置的表格

    或者

3.  还有什么？

隔离存储呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:24:28.087

如果您不经常更改文件的位置，则保存到磁盘会更好。将所有内容作为 blob 存储到数据库中会迅速增加数据库的大小，从而降低系统的性能。此外，如果您同时从数据库中选择大量 blob 对象，则会消耗大量内存并降低性能。

# silverlight - 动态 XAML 加载性能 LoadModule

> ID：12515695
> 
> 赞同：0
> 
> 时间：2012-09-20T15:16:40.230
> 
> 标签：silverlight, xaml, dynamic-loading

我们有一个 Silverlight Web 应用程序，它有一个可配置/可定制的视图。

想想 iGoogle。

用户可以添加多个表格面板（实际上是telerik 控件）并将它们配置为在所需的上下文中显示他们想要的信息。

性能不够好。

使用 dotTrace 性能分析，我们有 72 次调用 LoadComponent 方法：

```
 System.Windows.Application.LoadComponent(this, new System.Uri("/Company.Web.Portal.Views;component/Panels/TabularPanelContentView.xaml" +
                    "", System.UriKind.Relative)); 
```

这 72 次调用的总执行时间为 11,465 毫秒，36.85% 的用户在 UI 中体验到的暂停可用。30% 的时间似乎在 LoadComponent 方法调用中，另外 6.64% 在该调用树中的 Telerik 方法中。

因此，加载 Xaml 和从该 xaml 创建对象似乎是成本瓶颈。

有没有办法改善这一点？当然每次都从一个 url 加载到 Xaml，解析 xaml 是昂贵的。没有这个，是否有最佳实践方法可以从同一个 xaml 定义创建多个对象？

# image-processing - 使用图像过滤器提取二维曲线

> ID：12515699
> 
> 赞同：0
> 
> 时间：2012-09-06T02:53:29.513
> 
> 标签：image-processing, filter, computer-vision, algorithm

我想开发一个使用 Jpeg 加载库的程序，仅用于图像过滤器，例如递归高斯、加法、乘法、连接、二进制幅度和特征分析 2D，以获得类似的二维曲线提取输出。我将使用 Visual Studio 2008 C++ .net Windows 窗体应用程序。我不能使用任何其他库，只能使用“仅 Jpeg 加载库”。

关于哪个是最好的jpeg加载库和提取二维曲线的好算法有什么建议吗？谢谢^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:35:01.497

.NET Framework 本身包含 JPEG 格式支持 - 即 GDI+ 和 WPF 类。

然而，我最喜欢的第 3 方库是[FreeImage——](http://freeimage.sourceforge.net/)它包含 .NET Wrapper 和基于 OpenJPEG 的 JPEG 解码器。

# c++ - Dependency walker 中的 C++ Dll 显示 IESHIMS.dll 和 MSVCR110.dll

> ID：12515705
> 
> 赞同：5
> 
> 时间：2012-09-20T15:17:05.267
> 
> 标签：c++, dllimport, dependency-walker

我有一个我在'Win32'平台的Windows7（64位操作系统）中构建的dll。不幸的是，当我在 C# 代码中导入这个 dll 时，我遇到：

"

> 试图加载格式不正确的程序 HRESULT: 0x8007000B

“被观察到

当我对这个 DLL 使用 DependencyWalker 时，它显示找不到 IESHIMS.dll 和 MSVCR110.dll 依赖项。

这些 dll 来自哪里以及为什么我创建的 dll 依赖于这两个？请帮助我如何解决这个问题？

注意：我在 C# 代码中使用了 x86 平台。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:40:07.767

`IEShims.dll`可用于 `Windows Vista`或`Windows 7`可用于处理保护模式`Internet Explorer 9`或更新的模式。[这里有进一步的解释](https://stackoverflow.com/questions/2465111/dependency-walker-reports-ieshims-dll-and-wer-dll-missing)。

您应该能够从另一`Windows 7`台装有 `Internet Explorer 9`或更新版本的机器上获取副本。作为快速修复，从[http://www.dll-files.com/dllindex/dll-files.shtml?ieshims](http://www.dll-files.com/dllindex/dll-files.shtml?ieshims)`Windows 7`获取版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:11:09.157

您可能没有安装 C++ 运行时。[下载](http://www.microsoft.com/en-us/download/details.aspx?id=5555)并安装它。您必须稍微使用运行时的版本。有相当多的版本可用。这将解决您的 MSVCR110.dll 问题。我不确定为什么 dll 显示对 IE dll 的依赖关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:19:51.757

确保在 C# 项目的属性中选择 x86 作为目标体系结构。

# cakephp - cakePHP 模型关联（更深入地检索数据）

> ID：12515706
> 
> 赞同：1
> 
> 时间：2012-09-20T15:17:06.897
> 
> 标签：cakephp, associations, models

我试图在任何地方找到这个，但我不能。这是我的问题：

可以说我有这样关联的模型：

1.  **学生**（拥有许多会员资格）
2.  **会员资格**（属于学生和教师课程）
3.  **TeacherCourse**（属于Teacher和Course）
4.  **教师**（有许多教师课程）
5.  **课程**（有许多教师课程）

当我使用`membershipsController`将所有成员资格发送到视图时，我只得到例如`$membership['Membership']['id']`或`$membership['TeacherCourse']['id']`但不是`$membership['TeacherCourse']['Teacher']['id']`......

这意味着我会获得有关会员资格和教师课程的信息，因为它们是直接关联的。我的问题是如何直接获取有关教师或课程的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:29:26.783

您可以增加模型的递归级别以获得更深的关联（设置`$this->Membership->recursive`为 2 或 3），但通常最好使用该[`Containable`行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)，以便您可以选择要检索的关联。例如，这将返回关联的 TeacherCourse 和 Teacher 模型的成员资格：

```
$membership = $this->Membership->find('all', array(
    'contain'=>array(
        'TeacherCourse'=>array(
            'Teacher'=>array()
        ),
    )); 
```

[另请参阅http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)中包含的行为的完整文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-18T13:44:32.053

当我意识到您需要先将以下内容添加到模型中时，我在这个问题上挠了几分钟：

`public $actsAs = array('Containable');`

如果没有上述内容，仅在控制器中添加包含数组可能不会返回您在视图中查找的变量。

# cocos2d-iphone - 如何在 cocos2d 中预设精灵位置

> ID：12515707
> 
> 赞同：-1
> 
> 时间：2012-09-20T15:17:06.813
> 
> 标签：cocos2d-iphone, location, sprite

我目前正在构建一个纸牌游戏。像往常一样，前几个步骤是构建一组卡片，将它们洗牌，然后将它们发给每个玩家（有 4 张）。我希望这些牌以“粉丝”的形式出现在每个玩家面前，就像你手里有 15 张牌一样，你将如何平均分配它们。我对 COCOS2d 很陌生，我在弄清楚这个组件时遇到了一些麻烦。

我的问题确实是这个——我如何编码我的 cocos2d 项目，以便发牌到每个玩家面前的预定位置？我希望卡片在每个玩家面前呈现扇形。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:27:02.057

对于每张卡片，创建一个 CCNode 对象并将卡片精灵添加为节点的子节点。将节点放置在卡片底部应对齐和旋转的位置。

接下来，将精灵定位为从其 CCNode 父级垂直偏移。换句话说，例如，将其位置设置为 (0, 100)。它应该超过卡片高度的一半，也许是三分之二。然后旋转 CCNode 父节点，这将旋转卡片以及 CCNode 的位置作为旋转中心。

按顺序对所有卡片重复此操作，您可以根据添加节点+精灵的顺序从左到右或从右到左将它们布置为扇形。

# c# - 可以在没有自动回发的情况下更新详细信息视图中下拉列表中的值吗？

> ID：12515708
> 
> 赞同：0
> 
> 时间：2012-09-20T15:17:09.783
> 
> 标签：c#, drop-down-menu, autopostback

我有一个处于“插入模式”的详细信息视图，因此用户只会看到空格来输入值。我有两个下拉列表，我想让第二个 ddl 通过第一个 ddl 中选择的内容更改其值。我尝试将 ddl1 设置为标签，以便在标签更改时 ddl2 会更改。我现在遇到的问题是我需要自动回发来更新标签的值，但是在 ddl1 上选择“自动回发”会使我的代码引发数据绑定错误。

我想知道是否有任何方法可以使用自动回发并仍然将第一个 ddl 中选择的值更新到标签。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:57:50.660

尝试使用*AjaxControlToolkit*。它具有级联ddlists的功能。使用 updatepanel 作为两个 ddls 的容器，这样您就可以省略自动回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:10:24.100

您的查询并不完全清楚。但是如果你想在 dd1 的 change 事件上改变 dd2 的值，你可以使用下面的代码：

$("#<%= statusDDL.ClientID %>").val("#<%= dd1.ClientID %>option:selected").text() );

目前尚不清楚您是否需要 value 或 text 属性。此外，我不是 100% 认为这种语法会起作用。但显然可以使用这个概念在网上搜索您的要求来完成

# c# - 将数据绑定到busyindicator内的数据模板的问题

> ID：12515710
> 
> 赞同：3
> 
> 时间：2012-09-20T15:17:23.197
> 
> 标签：c#, wpf, binding, busyindicator

我在wpf中有一些代码，因为我使用了busyindicator并且我设置了datatemplete现在我的问题是我在我的应用程序中使用了mvvm模式，我想在上面使用busyindicator，但我不知道如何在busyindicaor数据模板中绑定文本块。我的代码看起来像

```
<extended:BusyIndicator Name="_busyIndicator">
    <extended:BusyIndicator.BusyContentTemplate>
        <DataTemplate>
            <StackPanel Margin="4">
                <TextBlock Text="Downloading Email" FontWeight="Bold" HorizontalAlignment="Center" Name="Dhaval"/>
                <StackPanel Margin="4">
                    <TextBlock Text="Downloading message 4/10..."/>
                    <ProgressBar Value="40" Height="15" x:Name="Progress_Dhaval"/>
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </extended:BusyIndicator.BusyContentTemplate> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T17:13:45.007

您可以将绑定与相对源一起使用。

在您的 ViewModel 中添加此属性：

```
 private string _busyText;
        public string BusyText
        {
            get { return _busyText; }
            set { _busyText = value; RaisePropertyChanged(() => BusyText); }
        } 
```

并更改此行：

```
<TextBlock Text="Downloading message 4/10..."/> 
```

在这个：

```
<TextBlock Text="{Binding Path=DataContext.BusyText, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" /> 
```

# javascript - 切换/取消切换时将更多选项更改为更少选项，反之亦然

> ID：12515712
> 
> 赞同：0
> 
> 时间：2012-09-20T15:17:26.893
> 
> 标签：javascript, jquery

我想知道如何将 [[More options]] 更改为 [[Less options]] 以及如果我单击它。

```
<div class="toggle-this" style="display: none">
<h3 style="border:1px solid;">Job Search</h3></div>
<div class="toggle-this" style="display: none"><div class="form_input"></div></div>

<div class="toggle-trigger" style="text-align:center; cursor: pointer;">[[More options]]</div>

<script language="javascript">
$(".toggle-trigger").click(function() {
$('.toggle-this').toggle();
return false;
});  
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:20:35.917

```
$(document).ready(function(){
   $(".toggle-trigger").click(function(e) {
      var $elem = $('.toggle-this');
      $elem.toggle();
      $(this).text($elem.is(':hidden') ? '[[More options]]' : '[[Less options]]')
      e.preventDefault();
   });
}) 
```

[http://jsfiddle.net/ffEMq/](http://jsfiddle.net/ffEMq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:38:34.947

更优雅：

```
$(".toggle-trigger").click(function()
{
    var map = {"none": "[[More options]]", "block": "[[Less options]]"};
    var element = $('.toggle-this').toggle();

    $(this).text(map[element.css("display")]);

    return false;
});​ 
```

看看这个[jsFiddle](http://jsfiddle.net/ffEMq/1/)。

# c++ - 指向具有不同模板参数的类模板的指针

> ID：12515714
> 
> 赞同：5
> 
> 时间：2012-09-20T15:17:35.073
> 
> 标签：c++, templates, pointers

我在面试时遇到了这个问题，但仍然不知道如何解决：

假设我们有一个 C++ 代码：

```
int main(int argc, char* argv[])
{
    L<A>* pA = 0;
    L<B>* pB = 0;
    pA = pB;
} 
```

我们应该添加什么才能真正编译？

换句话说，我们应该如何定义`L`,`A`和`B`类？请不要使用预处理器的指令。

我只知道如何解决它：

```
template<class T> struct L {};
struct A {};
typedef A B; 
```

甚至更简单的前向声明：

```
struct A;
typedef A B;
template<class> struct L; 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T15:31:05.553

没有预处理器指令：

```
/* <-- added line

int _tmain(int argc, _TCHAR* argv[])
{
    L<A>* pA;
    L<B>* pB;
    pA = pB;

    return 0;
}

*/ //<-- added line

int main()
{
} 
```

对我来说很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T15:33:18.457

简单的出路：专门化`L<>`以便`L<B>`继承自`L<A>`：

```
template<>
struct L<B> : public L<A> {}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-20T15:24:38.847

`L<A>*`应该可以从 分配，这`L<B>*`意味着它`L<B>`应该是 的子类`L<B>`。

这不是那么微不足道。也许`A`并且`B`应该实现一些特征概念，`L`模板可以使用：

```
template<typename E> struct L : public L< typename E::base >
{
};

struct BASE {};
template<> struct L<BASE> {};

struct A : public BASE {
  typedef BASE base;
};

struct B : public A {
  typedef A  base;
}; 
```

编辑——在[http://codepad.org/CT3FvmwQ上编译版本](http://codepad.org/CT3FvmwQ)

# android - 交互式 Flash 替代方案 - HTML5 或本机应用程序？

> ID：12515716
> 
> 赞同：0
> 
> 时间：2012-09-20T15:17:41.057
> 
> 标签：android, ios, html, mobile, native

我被要求推荐一些交互式 Flash 横截面的替代方案，但我不确定最佳答案。

我在 HTML5 应用程序和本机应用程序之间来回折腾。我可以看到 HTML5 的最大好处是只需要创建 1 个版本，它可以在 iOS 和 Android 上运行。本机应用程序的最大好处是性能和与旧设备的兼容性，但是必须创建两个应用程序。

我倾向于使用原生应用程序，因为我读过的所有内容都表明它们只会在更少的怪癖下更好地工作，但 HTML5 路线很有趣并且可能更便宜。想法？HTML5 准备好迎接这样的事情了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:21:05.490

我建议你使用 OpenGL。它很快（本机代码）并且关于动画和效果，您可以做自己喜欢的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:36:58.940

HTML5 可以胜任这项任务。但这一切都取决于您要支持的内容。

我的意思是，如果您尝试支持 iPhone 2，那么您将不得不采用原生方式。没有办法解决这个问题。

根据您尝试执行的操作，您可能无法支持至少更新的 3GS。但这并不是说没有本地应用程序不做同样的事情。Android 也是如此。在该系列的范围内，所有 iPhone 都是一样的。

对 Android 的制造方式或它们包含的内容没有任何限制。因此，不能保证任何应用程序都可以在所有 Android 设备上运行。

最后：归结为你想做什么，你想怎么做，以及你的开发人员对每个平台的熟悉程度（在 HTML5 的情况下，这意味着所有的网络应用程序 API，以及了解 JS 中的延迟/异步编程，以及如何以高性能方式使用 DOM，以及媒体查询和触摸事件）。

PS：如果需要访问内部文件存储，或者需要访问内部硬件（相机），或者需要访问外部硬件（蓝牙键盘/无线耳机），请使用原生应用。API 已经存在，但还不能保证支持。

# mysql - 带有千位分隔符的mysql DOUBLE

> ID：12515725
> 
> 赞同：0
> 
> 时间：2012-09-20T15:18:28.287
> 
> 标签：mysql, string, double

插入新记录时有什么方法可以将字符串转换为`DOUBLE`格式，我想在插入数据库时​​将其删除或忽略它是否存在于值中。

```
INSERT INTO  table1  (measure) VALUES val1 
```

`val1`可以包含`20000`or `20,000`。我可以用mysql做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:13:42.960

正如 njk 所提到的，您可以使用 REPLACE 函数，但如果它存在于值中，则忽略它，请使用 INSERT IGNORE。

```
INSERT IGNORE INTO table1 (measure) VALUES (REPLACE(val1, ',', '')) 
```

如果仅当列定义了唯一索引或主键时才找到值，则 IGNORE 关键字将不会插入新记录。

[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:20:24.740

您必须首先使用删除分隔符`REPLACE`。

```
INSERT INTO table1 (measure) VALUES (REPLACE(val1, ',', '')) 
```

# c# - Web 参考中断 SSIS 包

> ID：12515726
> 
> 赞同：5
> 
> 时间：2012-09-20T15:18:34.753
> 
> 标签：c#, sql, web-services, ssis, sql-server-2012

我正在使用 SQL Server 2012 和 Visual Studio 2010 Shell 开发 SSIS 包。

我需要在我拥有的脚本任务中使用 Web 方法，并且我能够在 Windows 7 上运行此脚本而没有任何问题。此 Web 服务需要我已在我的个人计算机商店中安装的证书。

但是，当我将此项目移至 Windows Server 2008 R2 时，包显然无缘无故地中断了。我在错误列表中没有编译错误，如果构建脚本任务它将成功，但是当我完成编辑脚本时，将出现一个消息框，其中包含以下错误消息：

“包中包含的脚本有编译错误。要保存更改吗？”

如果我从脚本任务中删除 Web 引用，则不会出现此消息。

因此，该软件包将无法运行。我在事件查看器上检查了错误详细信息，但它只显示“包失败”并且没有显示有关此问题的更多详细信息。这可能与证书问题有关吗？是否有错误日志或方法可以了解有关导致包失败的原因的更多详细信息？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:38:57.070

您需要担心的不仅仅是 Web 服务本身所需的证书的安全问题。

SSRS Web 服务器将不允许加载标记为“不安全”的程序集——这几乎是任何进行 I/O 的程序。我曾经在 SSRS 报告中添加了对 .Net Forms 程序集的引用，以便使用其富文本功能。它在 Visual Studio 中运行良好，但一旦部署到 SSRS Web 服务器，它就永远无法运行。我确信它可以发挥作用，但由于其他优先事项，我实际上放弃了这份工作，因为我尝试的一切都没有奏效。

在线搜索添加自定义程序集会产生一些有用的信息，以使自定义程序集正常工作。以下是一些关键步骤：

*   使用强名称对程序集进行签名，这是必需的，因为它已部署到 GAC。
*   在程序集中使用程序集级属性`[assembly:AllowPartiallyTrustedCallers]`，以便 SSRS 可以使用它。

[这里](http://www.sqlservercentral.com/blogs/dknight/2012/01/26/ssrs-custom-code-with-external-assemblies/)和[这里](http://salvoz.com/blog/2011/01/10/custom-assemblies-in-sql-server-reporting-services-2008-r2/)有几个可能的资源。

# xml - 如何根据属性的存在有条件地将参数传递给 NAnt exec 任务？

> ID：12515734
> 
> 赞同：8
> 
> 时间：2012-09-20T15:19:20.807
> 
> 标签：xml, nant

我想从我的 NAnt 脚本中调用某个 EXE，并在属性存在的情况下将属性作为参数传递，否则不传递任何内容。

下面的代码似乎只适合这种情况，但它不起作用：

```
<exec program="notepad.exe">
  <arg line="${file}" if="${property::exists('file')}" />
</exec> 
```

它抛出`Property 'file' has not been set`错误。看起来它评估忽略条件的属性。我希望它忽略整个`<arg>`元素，以防它的条件是`false`.

如果我在此块上方定义属性，它显然可以正常工作（即使该属性为空）。如果它是一个单一的案例，它可能值得一个解决方法，但我必须以相同的方式传递许多属性。此外，`<if>`不是`<exec>`...下的有效元素

如何做到这一点？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T13:00:53.537

我[在 NAnt mailing list 找到了一个旧线程](http://www.mail-archive.com/nant-users@lists.sourceforge.net/msg05132.html)，它实际上为解决方法提供了最佳建议（对我而言）。`<property>`它基于任务按预期工作的事实。解决方法引入了一个额外的属性来设置，具体取决于是否定义了原始属性。

像这样：

```
<target name="example">
  <property name="arg.value" value="${arg}" if="${property::exists('arg')}" />
  <property name="arg.value" value="" unless="${property::exists('arg')}" />
  <exec program="program.exe">
    <arg value="${arg.value}" />
  </exec>
</target> 
```

在我的情况下，总是使用默认值设置属性更容易，甚至不引入额外的属性 - 只需将原始属性传递给`<arg/>`：

```
<target name="example">
  <property name="arg.value" value="default value" overwrite="false" />
  <exec program="program.exe">
    <arg value="${arg.value}" />
  </exec>
</target> 
```

它可以（并且将）在其他包含文件中被覆盖。

我还发现[另一个线程问了同样的问题](http://www.mail-archive.com/nant-users@lists.sourceforge.net/msg04017.html)，一位参与 NAnt 开发的人建议表明人们是否对修复这个问题的补丁感兴趣`<arg>`。据我所知，没有人表现出兴趣:)，因此行为没有改变。

我设法花一点时间调查修复可能是什么，似乎它只是添加`ExpandProperties=false`到`TaskAttribute`例如任务的`line`属性`<arg>`。对于`<property value="...">`按预期工作的属性也是如此。不过，我没有尝试过-如果这些天我有更多时间，我会在这里发布更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:23:48.830

对于这种情况，您可以只使用文件集作为参数传递。默认情况下，文件集不包含与磁盘上的实际文件不匹配的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T06:35:52.597

我也遇到过这个问题（老实说不止一次）。-`if`属性在某些情况下不会像您期望的那样起作用。这是我丑陋的解决方法：

```
<choose>
  <when test="${property::exists('file')}">
    <exec program="notepad.exe">
      <arg line="${file}" />
    </exec>
  </when>
  <otherwise>
    <exec program="notepad.exe" />
  </otherwise>
</choose> 
```

# android - Android：使用来自 SQLite 的数据创建列表视图

> ID：12515736
> 
> 赞同：-1
> 
> 时间：2012-09-20T15:19:23.310
> 
> 标签：android, android-layout

我想要这样的界面

![在此处输入图像描述](../Images/c660f449a31d7efa58c04cfad72af980.png)

所以我创建了 2 个文件 XML Place 和 Place1

代码地点.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/filter_text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" >
</EditText>

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

代码 Place1.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:padding="5dp" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/icon_place"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="7dp"
        android:src="@drawable/icon_landscapes" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="10" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="8"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/label_place"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:text="@+id/label_place" />

            <TextView
                android:id="@+id/label_address"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@+id/label_address" />
        </LinearLayout>

        <TextView
            android:id="@+id/label_Phone"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_marginTop="5dp"
            android:layout_weight="2"
            android:gravity="center"
            android:text="@+id/label_Phone" />
    </LinearLayout>
</LinearLayout>

</LinearLayout> 
```

这是活动类中的代码：

```
public class Place extends Activity {

private String DB_NAME = "Danang Travel.sqlite";

String[] from;
int[] to;

ListView lvPlace;
ArrayAdapter<String> adapterPlace;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.place);

    EditText filterEditText = (EditText) findViewById(R.id.filter_text);

    lvPlace = (ListView) findViewById(R.id.listView1);
    lvPlace.setTextFilterEnabled(true);

    // **********************************************************************
    SQLiteDatabase DB = null;
    Intent t = getIntent();
    Bundle extra = t.getExtras();
    String temp = extra.getString("k");
    try {
        DB = this.openOrCreateDatabase(DB_NAME, MODE_PRIVATE, null);

        Cursor c = DB.rawQuery(
                "SELECT Name,Address,Phone FROM ServiceDetail Where SerID = '"
                        + temp + "' ORDER BY Name", null);

        from = new String[]{"Name","Address","Phone"};
        to = new int[]{R.id.label_place,R.id.label_address,R.id.label_phone};

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,R.layout.place1, c, from, to);

        lvPlace.setAdapter(adapter); 
```

它不起作用！我真的不明白为什么？请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:31:34.013

我发现这个带有 ListActivity 类的工作示例代码，对初学者非常有用。只需正确研究它并在您的代码中实现，

它只是从 db 中读取数据并使用 ArrayList 类来存储值，并使用 ArrayAdapter 在 ListActivity 中设置值。

```
public class CRUDonDB extends ListActivity {

    private final String SAMPLE_DB_NAME = "myFriendsDb";
    private final String SAMPLE_TABLE_NAME = "friends";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ArrayList<String> results = new ArrayList<String>();
        SQLiteDatabase sampleDB = null;

        try {
            sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

            sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                    SAMPLE_TABLE_NAME +
                    " (LastName VARCHAR, FirstName VARCHAR," +
                    " Country VARCHAR, Age INT(3));");

            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Makam','Sai Geetha','India',25);");
            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Chittur','Raman','India',25);");
            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Solutions','Collabera','India',20);");

            Cursor c = sampleDB.rawQuery("SELECT FirstName, Age FROM " +
                    SAMPLE_TABLE_NAME +
                    " where Age > 10 LIMIT 5", null);

            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        String firstName = c.getString(c.getColumnIndex("FirstName"));
                        int age = c.getInt(c.getColumnIndex("Age"));
                        results.add("" + firstName + ",Age: " + age);
                    }while (c.moveToNext());
                } 
            }

            this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,results));

        } catch (SQLiteException se ) {
            Log.e(getClass().getSimpleName(), "Could not create or Open the database");
        } finally {
            if (sampleDB != null) 
                sampleDB.execSQL("DELETE FROM " + SAMPLE_TABLE_NAME);
                sampleDB.close();
        }
    }
} 
```

# php - cURL 多同时请求（域检查）

> ID：12515740
> 
> 赞同：1
> 
> 时间：2012-09-20T15:19:36.023
> 
> 标签：php, curl

我正在尝试列出 20,000 多个域名并检查它们是否“活着”。我真正需要的只是一个简单的 http 代码检查，但我不知道如何使用 curl_multi。在我使用的单独脚本上，我有以下函数，它同时检查一批 1000 个域并返回 json 响应代码。也许这可以修改为只获取http响应代码而不是页面内容？

（对不起，我无法将其粘贴为一个很好的代码块，而无需逐行添加 4 个空格...（也尝试跳过一行并添加 8 个空格）

$dotNetRequests = 域数组...

```
//loop through arrays
foreach(array_chunk($dotNetRequests, 1000) as $Netrequests) {
    $results = checkDomains($Netrequests);
    $NetcurlRequest = array_merge($NetcurlRequest, $results);
}

function checkDomains($data) {

// array of curl handles
$curly = array();
// data to be returned
$result = array();

// multi handle
$mh = curl_multi_init();

// loop through $data and create curl handles
// then add them to the multi-handle
foreach ($data as $id => $d) {

$curly[$id] = curl_init();

$url = (is_array($d) && !empty($d['url'])) ? $d['url'] : $d;
curl_setopt($curly[$id], CURLOPT_URL,            $url);
curl_setopt($curly[$id], CURLOPT_HEADER,         0);
curl_setopt($curly[$id], CURLOPT_RETURNTRANSFER, 1);

// post?
if (is_array($d)) {
  if (!empty($d['post'])) {
    curl_setopt($curly[$id], CURLOPT_POST,       1);
    curl_setopt($curly[$id], CURLOPT_POSTFIELDS, $d['post']);
  }
}

curl_multi_add_handle($mh, $curly[$id]);
  }

  // execute the handles
  $running = null;
  do {
    curl_multi_exec($mh, $running);
  } while($running > 0);

  // get content and remove handles
  foreach($curly as $id => $c) {
     // $result[$id] = curl_multi_getcontent($c);
// if($result[$id]) {
if (curl_multi_getcontent($c)){
    //echo "yes";
    $netName = $data[$id];
    $dName = str_replace(".net", ".com", $netName);
    $query = "Update table1 SET dotnet = '1' WHERE Domain = '$dName'";
    mysql_query($query);
}
curl_multi_remove_handle($mh, $c); 
}

// all done
 curl_multi_close($mh);

return $result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:22:19.637

在任何其他语言中，您都会对这种操作进行线程化...

[https://github.com/krakjoe/pthreads](https://github.com/krakjoe/pthreads)

你也可以在 PHP 中使用 :)

我会建议几个工人而不是 20,000 个单独的线程......并不是说 20,000 个线程超出了可能性的范围 - 它不是......但这不会很好地利用资源，我会像你一样做现在有 20 名工人每人获得 1000 个域的结果......我假设你不需要我给出获取响应代码的例子，我相信 curl 会给你，但它可能是矫枉过正使用 curl 是因为你不需要它的线程功能：我会 fsockopen 端口 80，fprintf GET HTTP/1.0/\n\n，fgets 第一行并关闭连接......如果你要做这一切那时我也会使用 Connection: close 以便接收机器不会保持不必要的连接......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:50:39.810

此脚本非常适合使用 PHP 处理大量同时 cURL 请求。使用它，我可以在几分钟内解析 50k 个域！

[https://github.com/petewarden/ParallelCurl/](https://github.com/petewarden/ParallelCurl/)

# html - HTTP 标头构造

> ID：12515742
> 
> 赞同：2
> 
> 时间：2012-09-20T15:19:42.780
> 
> 标签：html, http

给定2个链接：

```
<a href="/somepage.html">link1</a>
<a href="somepage.html">link1</a> 
```

在此域的页面上：

> **www.site.com/index.html。**

两个标头请求看起来都一样吗？或者我可以期待对 site.com 域的**“/somepage.html”和“somepage.html”**请求吗？

编辑：这是我在 Chrome 控制台的原始标题中看到的内容：

```
GET /resources/css/jquery-ui.css HTTP/1.1
Host: site.com
Connection: keep-alive
Cache-Control: no-cache
Pragma: no-cache
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Accept: text/css,*/*;q=0.1
Referer: http://site.com/ 
```

所以为了澄清这个问题是重写引擎只解析了第一行的请求吗？如果是这样，我可以使用`^/resource`例如来定位它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:20:46.380

两者看起来都一样。 `/somepage.html`

浏览器创建`/somepage.html`，知道它是相对于当前文档的`/`。浏览器总是向服务器请求完整路径。这是必需的，因为服务器不知道浏览器当前在哪个页面上。HTTP 本质上是无状态的。

# c# - DataGridViewComboBoxColumn 不采用 ValueMember

> ID：12515745
> 
> 赞同：0
> 
> 时间：2012-09-20T15:19:53.200
> 
> 标签：c#, winforms, entity-framework, entity-framework-4, datagridview

我有一个多对多与一些主从数据网格设置混合。

*   4 数据网格视图
*   6 个实体（2 个映射表）
*   5 数据关系

为了给您一个直观的图像，有 1 个大的 Employe DGV (DataGridView) 和 3 个较小的根据 Employe DGV 选择的行进行更新。

3 个较小的网格之一是没有映射表的非常简单的关系。

然而，另外 2 个显示一个映射表行，它使用它映射到的实体的格式化信息。那些 2 DGV 只有 1 列，一个带有格式化字符串（覆盖`.ToString()`）的 ComboBox，它（应该）具有映射指向的基础对象（EF 将在接收整个对象时相应地处理设置 ID）。但是，当我尝试添加新行时，它会说它无法将 String 转换为*Put Object Name Here*。这让我想到，如果您没有设置 ValueMember，组合框会尝试使用 .ToString() 获取字符串表示形式。`Self`所以我试图通过向简单地返回自己的实体添加一个属性来绕过这种行为。没有成功，它仍在尝试在某处转换字符串。

确切的错误（法语）是：

`System.FormatException: Cast non valide de 'System.String' en 'InvInformatique.logiciels'.`

翻译到“从 System.String 到 InvInformatique.logiciels 的无效转换。

**代码**

```
InventaireInformatiqueEntities iidb = new InventaireInformatiqueEntities();

bsEmployes.DataSource = iidb.employes;
bsMateriels.DataSource = iidb.materiels;
bsLogiciels.DataSource = iidb.logiciels;
bsLogicielEmployeMaps.DataSource = iidb.logiciel_employe_maps; // Needed to provoke the load query
bsAcces.DataSource = iidb.acces;
bsAccesEmployeMaps.DataSource = iidb.acces_employe_maps; // Needed to provoke the load query

dgvEmployes.AutoGenerateColumns = false;
dgvEmployes.Columns.AddRange(
    new DataGridViewTextBoxColumn { Name = "Nom", DataPropertyName = "nom" },
    new DataGridViewTextBoxColumn { Name = "Département", DataPropertyName = "departement" }
);
dgvEmployeMateriels.AutoGenerateColumns = false;
dgvEmployeMateriels.Columns.AddRange(
    new DataGridViewTextBoxColumn { HeaderText = "Nom", DataPropertyName = "nom" },
    new DataGridViewTextBoxColumn { HeaderText = "Satisfaction", Name = "satisfaction", DataPropertyName = "satisfaction" }
);
dgvEmployeAcces.AutoGenerateColumns = false;
dgvEmployeAcces.Columns.AddRange(
    new DataGridViewComboBoxColumn { HeaderText = "Accès", DataPropertyName = "acces", DataSource = bsAcces }
);
dgvEmployeLogiciel.AutoGenerateColumns = false;
dgvEmployeLogiciel.Columns.AddRange(
    new DataGridViewComboBoxColumn { HeaderText = "Logiciels", DataPropertyName = "logiciels", DataSource = bsLogiciels }
);

dgvEmployes.DataSource = bsEmployes;
dgvEmployeMateriels.DataBindings.Add(new Binding("DataSource", bsEmployes, "materiels"));
dgvEmployeLogiciel.DataBindings.Add(new Binding("DataSource", bsEmployes, "logiciel_employe_maps"));
dgvEmployeAcces.DataBindings.Add(new Binding("DataSource", bsEmployes, "acces_employe_maps")); 
```

**数据库**

```
Employes
->id
->nom
->departement

Acces
->id
->nom
->description

Logiciel
->id
->nom

Materiel
->id
->employe_id
->nom
->description

Acces_Employe_Maps
->id
->acces_id
->employe_id

Logiciel_Employe_Maps
->id
->logiciel_id
->employe_id 
```

**数据库关系**

```
Employes <-> Logiciel_Employe_Maps <-> Logiciels
Employes <-> Acces_Employe_Maps <-> Acces
Employes -> Materiel 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:28:05.807

好吧，DataGridViews 不喜欢使用 ToString() 来获取 DisplayMember。当我将 DisplayMember 保留为空或使用我的 Self 属性时，它会破坏 ValueMember。

设置`DisplayMember = "nom", ValueMember="Self"`完美。

**编辑**

这也有效：

添加到 EF 部分类：

```
public string FormatedName { get { return this.ToString(); } } 
```

列定义的变化：

```
DisplayMember = "FormatedName", ValueMember = "Self" 
```

# html - 如何使用 Selenium IDE 为自动完成 ul 单击指定的 li？

> ID：12515747
> 
> 赞同：3
> 
> 时间：2012-09-20T15:19:59.480
> 
> 标签：html, html-lists, automated-tests, selenium-ide, qa

我正在使用 Selenium IDE 进行一些测试，并尝试使用它从自动完成中选择指定的选项。我的问题是，自动完成功能是内置的`<ul>`，两种`<li>`可能是相同的。如何点击指定的`li`？如何对 Selenium 说“单击第一个`li`”或“单击`li`带有文本“apples”的文本？我尝试了一些我发现的方法，但所有方法都适用于其他类型的 Selenium，在 Selenium IDE 中没有一个有用。

提前感谢，对不起我的英语不好！

这是代码：

```
<ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" role="listbox" aria-activedescendant="ui-active-menuitem" style="z-index: 1003; top: 360.683px; left: 549.5px; display: block; width: 401px;">
  <li class="ac_item ui-menu-item" role="menuitem">
    <a class="clearfix ui-corner-all" tabindex="-1">
      <span class="c1">
        <b>Apple</b>
        <br>
        <span class="small secondary">Apples</span>
        </span>
      </span>
    </a>
  </li>
  <li class="ac_item ui-menu-item" role="menuitem">
    <a class="clearfix ui-corner-all" tabindex="-1">
      <span class="c1">
        <b>Orange</b>
        <br>
        <span class="small secondary">Oranges</span>
        </span>
    </span>
    </a>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:03:18.417

Selenium API 为您提供了多种方法来完成此操作。由于您没有传统的下拉菜单，因此无法使用该`select`命令。以下是两个单击自动完成中的第二个元素的解决方案。

我创建了这个[JSFiddle](http://jsfiddle.net/ansonhoyt/GYJW9)来测试解决方案。单击的元素将变为红色。

**选项 1：**使用 CSS 定位器。

```
| Command               | Target                                               |
| open                  | http://jsfiddle.net/ansonhoyt/GYJW9/embedded/result/ |
| waitForElementPresent | css=ul.ui-autocomplete                               |
| click                 | css=ul.ui-autocomplete li.ui-menu-item:nth-child(2)  | 
```

注意：运行速度很快，大多数人对 CSS 感到满意，但此示例要求目标浏览器支持 CSS3 nth-child 选择器。

**选项 2：**使用 XPath 定位器。

```
| Command               | Target                                               |
| open                  | http://jsfiddle.net/ansonhoyt/GYJW9/embedded/result/ |
| waitForElementPresent | css=ul.ui-autocomplete                               |
| click                 | //ul[contains(@class,'ui-autocomplete')]/li[2]       | 
```

注意：XPath 对大多数人来说不太熟悉，并且与 CSS 定位器相比可能非常慢，尤其是在 IE 中。

有关更多想法，请查看 Selenium IDE 有关[定位元素](http://seleniumhq.org/docs/02_selenium_ide.html#locating-elements)和可用[Selenese 命令](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)的文档。

# javascript - 在 Google Maps API v3 中修改多边形后的事件

> ID：12515748
> 
> 赞同：31
> 
> 时间：2012-09-20T15:20:00.683
> 
> 标签：javascript, events, google-maps

我制作了一个使用绘图管理器（并实现可选形状）的映射应用程序。该程序的工作原理如下：在单击按钮后完成多边形的绘制时，将在多边形上映射一条路径。

在此过程之后编辑多边形时，我希望再次调用映射函数。但是我无法让这部分工作：

我尝试使用以下代码，但我总是收到错误，因为添加此侦听器时尚未选择任何形状。我能做些什么？

```
google.maps.event.addListener(selectedShape, 'set_at', function() {
    console.log("test");
});

google.maps.event.addListener(selectedShape, 'insert_at', function() {
    console.log("test");
}); 
```

重要的代码片段：

```
function showDrawingManager(){
    var managerOptions = {
        drawingControl: true,
        drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: [google.maps.drawing.OverlayType.MARKER, google.maps.drawing.OverlayType.POLYLINE, google.maps.drawing.OverlayType.POLYGON]
        },
        markerOptions: {
            editable: true,
            icon: '/largeTDGreenIcons/blank.png'
        },
        polygonOptions: {
            fillColor: "#1E90FF",
            strokeColor: "#1E90FF",
        },
        polylineOptions: {
            strokeColor: "#FF273A"
        }
    }

    var drawingManager = new google.maps.drawing.DrawingManager(managerOptions);
    drawingManager.setMap(map);
    return drawingManager;
}

function clearSelection() {
    if (selectedShape) {
        console.log("clearSelection");

        selectedShape.setEditable(false);
        selectedShape = null;
        numberOfShapes--;
    }
}

function setSelection(shape) {

   console.log("setSelection");

   clearSelection();
   selectedShape = shape;
   shape.setEditable(true);
   numberOfShapes++;
   //getInformation(shape);
}

function initialize(){

    //....

    var drawingManager = showDrawingManager();
    google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
        if (e.type != google.maps.drawing.OverlayType.MARKER) {
            // Switch back to non-drawing mode after drawing a shape.
            drawingManager.setDrawingMode(null);

            // Add an event listener that selects the newly-drawn shape when the user
            // mouses down on it.
            var newShape = e.overlay;
            newShape.type = e.type;
            google.maps.event.addListener(newShape, 'click', function() {
                setSelection(newShape);
            });
            setSelection(newShape);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-20T16:37:05.477

我通过调用 .getPath() 并将侦听器放入侦听器中解决了这个问题，每次单击形状时都会调用该侦听器。我认为 Google API 文档对如何使用 set_at 不是很清楚，因此它对其他人也可能有用。

```
// Add an event listener that selects the newly-drawn shape when the user
// mouses down on it.
var newShape = e.overlay;
newShape.type = e.type;
google.maps.event.addListener(newShape, 'click', function() {
    google.maps.event.addListener(newShape.getPath(), 'set_at', function() {
        console.log("test");
    });

    google.maps.event.addListener(newShape.getPath(), 'insert_at', function() {
        console.log("test");
    });
    setSelection(newShape);
}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-12-19T12:46:38.990

```
 google.maps.event.addListener(yourPolygon.getPath(), 'insert_at', function(index, obj) {
           //polygon object: yourPolygon
    });
    google.maps.event.addListener(yourPolygon.getPath(), 'set_at', function(index, obj) {
           //polygon object: yourPolygon
    }); 
```

上面的代码对我有用。`set_at`当我们从突出显示的点（边缘）修改多边形区域时触发 where 并且当`insert_at`我们拖动突出显示边缘之间的点时触发。

我在`polygoncomplete`事件中和从数据库加载多边形后使用了它们。这对他们来说很好。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-17T22:07:38.663

为了避免 set_at 和拖动提到的问题，我添加了以下内容，它在拖动绘图时禁用 set_at 的事件广播。我创建了一个扩展多边形类的类，并添加了这个方法：

```
 ExtDrawingPolygon.prototype.enableCoordinatesChangedEvent = function(){
  var me = this,
      superClass = me.superClass,
      isBeingDragged = false,
      triggerCoordinatesChanged = function(){
         //broadcast normalized event
         google.maps.event.trigger(superClass, 'coordinates_changed');
      };

  // If the overlay is being dragged, set_at gets called repeatedly,
  // so either we can debounce that or ignore while dragging,
  // ignoring is more efficient.
  google.maps.event.addListener(superClass, 'dragstart', function(){
    isBeingDragged = true;
  });

  // If the overlay is dragged
  google.maps.event.addListener(superClass, 'dragend', function(){
    triggerCoordinatesChanged();
    isBeingDragged = false;
  });

  // Or vertices are added to any of the possible paths, or deleted
  var paths = superClass.getPaths();
  paths.forEach(function(path, i){
    google.maps.event.addListener(path, "insert_at", function(){
      triggerCoordinatesChanged();
    });
    google.maps.event.addListener(path, "set_at", function(){
      if(!isBeingDragged){
        triggerCoordinatesChanged();
      }
    });
    google.maps.event.addListener(path, "remove_at", function(){
      triggerCoordinatesChanged();
    });
  });
}; 
```

它向多边形本身添加了一个“coordinates_changed”事件，因此其他代码可以只监听一个好的、单一的、简化的事件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-03T09:49:04.513

从[chrismarx 的回答](https://stackoverflow.com/questions/12515748/event-after-modifying-polygon-in-google-maps-api-v3/33767960#33767960)开始，下面是在 TypeScript 中使用新事件的示例。我对删除超类和更改对“我”的引用做了一些小改动，因为未定义的引用存在问题。

在您的文件或全局配置文件等的顶部，使用：

```
declare global {
    module google.maps {
        interface Polygon {
            enableCoordinatesChangedEvent();
        }
    }
} 
```

然后定义扩展：

```
google.maps.Polygon.prototype.enableCoordinatesChangedEvent = function () {

    var me = this,
        isBeingDragged = false,
        triggerCoordinatesChanged = function () {
            // Broadcast normalized event
            google.maps.event.trigger(me, 'coordinates_changed');
        };

    // If  the overlay is being dragged, set_at gets called repeatedly,
    // so either we can debounce that or igore while dragging,
    // ignoring is more efficient
    google.maps.event.addListener(me, 'dragstart', function () {
        isBeingDragged = true;
    });

    // If the overlay is dragged
    google.maps.event.addListener(me, 'dragend', function () {
        triggerCoordinatesChanged();
        isBeingDragged = false;
    });

    // Or vertices are added to any of the possible paths, or deleted
    var paths = me.getPaths();
    paths.forEach(function (path, i) {
        google.maps.event.addListener(path, "insert_at", function () {
            triggerCoordinatesChanged();
        });
        google.maps.event.addListener(path, "set_at", function () {
            if (!isBeingDragged) {
                triggerCoordinatesChanged();
            }
        });
        google.maps.event.addListener(path, "remove_at", function () {
            triggerCoordinatesChanged();
        });
    });
}; 
```

最后调用扩展并添加监听器：

```
 google.maps.event.addListener(drawingManager, 'overlaycomplete', function (event) {
        event.overlay.enableCoordinatesChangedEvent();

        google.maps.event.addListener(event.overlay, 'coordinates_changed', function (index, obj) {
            // Polygon object: yourPolygon
            console.log('coordinates_changed');
        });
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-03T03:11:53.337

从 Thomas 的[回答](https://stackoverflow.com/a/12517037/4468423)开始，这里有一个实现，可以对使用 创建的叠加层`DrawingManager`以及`Feature`从 GeoJSON 添加的叠加层进行编辑。

对我来说主要的困难`google.maps`是使用`DrawingManager`由. 最终，我忽略了内置对象，转而将所有内容存储为重新创建的叠加层，设置编辑事件侦听器，然后在绘制它们时单独调用它们。最初绘制的叠加层和加载的特征将被丢弃。`google.maps.Data` `Feature``addFromGeoJson()``Data``setMap()`

该过程如下所示：

1.  初始化地图。
2.  添加`addfeature`事件侦听器以检测何时添加功能。这将在`addGeoJson()`for each期间被触发`Feature`，获取其对应的覆盖类型和几何形状并将它们传递给实用程序函数`addFeature()`以创建覆盖。
3.  加载任何 GeoJSON。这将为加载的每个对象触发上面的事件侦听器。
4.  初始化`DrawingManager`.
5.  `{overlay}complete`为每种覆盖类型（`polygon`、`polyline`和`marker`）添加事件侦听器。触发时，这些事件首先确定叠加层是否有效（例如多边形具有 >= 3 个顶点），然后调用`addFeature()`，传入叠加层类型和几何图形。

调用时，`addFeature()`重新创建覆盖并设置所有适用的事件侦听器。最后，叠加层存储在数组中并显示在地图上。

```
// GeoJSON containing previously stored data (optional) 
var imported = {
  type: "FeatureCollection",
  features: [{
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        -73.985603, 40.748429
      ],
    },
    properties: {
      activity: "Entry",
    }
  }, ]
};

// this will fill with map data as you import it from geojson or draw
var features = {
  polygons: [],
  lines: [],
  markers: []
};

// set default drawing styles
var styles = {
  polygon: {
    fillColor: '#00ff80',
    fillOpacity: 0.3,
    strokeColor: '#008840',
    strokeWeight: 1,
    clickable: true,
    editable: true,
    zIndex: 1
  },
  polyline: {
    strokeColor: '#ffff00',
    strokeWeight: 3,
    clickable: true,
    editable: true,
    zIndex: 2
  },
  marker: {
    clickable: true,
    draggable: true,
    zIndex: 3
  }
}

var map;

function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    center: {
      lat: 40.748429,
      lng: -73.985603
    },
    zoom: 18,
    noClear: true,
    mapTypeId: 'satellite',
    navigationControl: true,
    mapTypeControl: false,
    streetViewControl: false,
    tilt: 0
  });

  // add this listener BEFORE loading from GeoJSON
  map.data.addListener('addfeature', featureAdded);

  // load map features from geojson
  map.data.addGeoJson(imported);

  // initialize drawing tools
  var drawingManager = new google.maps.drawing.DrawingManager({
    // uncomment below line to set default drawing mode
    // drawingMode: 'marker',  
    drawingControl: true,
    drawingControlOptions: {
      position: google.maps.ControlPosition.TOP_CENTER,
      drawingModes: ['polygon', 'polyline', 'marker']
    },
    polygonOptions: styles.polygon,
    polylineOptions: styles.polyline,
    markerOptions: styles.marker
  });
  drawingManager.setMap(map);

  // for each drawing mode, set a listener for end of drawing
  drawingManager.addListener('polygoncomplete', function(polygon) {
    // delete drawing if doesn't have enough points
    if (polygon.getPath().getLength() < 3) {
      alert('Polygons must have 3 or more points.');
      polygon.getPath().clear();
    }
    // otherwise create new feature and delete drawing
    else {
      addFeature('Polygon', polygon.getPath());
      polygon.setMap(null);
    }
  });
  drawingManager.addListener('polylinecomplete', function(line) {
    // delete drawing if doesn't have enough points
    if (line.getPath().getLength() < 2) {
      alert('Lines must have 2 or more points.');
      line.getPath().clear();
    }
    // otherwise create new feature and delete drawing
    else {
      addFeature('Polyline', line.getPath());
      line.setMap(null);
    }
  });
  drawingManager.addListener('markercomplete', function(marker) {
    // point geometries have only one point by definition, 
    // so create new feature and delete drawing
    addFeature('Point', marker.getPosition());
    marker.setMap(null);
    updateGeoJSON();
  });
}

// this function gets called when GeoJSON gets loaded
function featureAdded(e) {
  switch (e.feature.getGeometry().getType()) {
    case 'Polygon':
      addFeature('Polygon', e.feature.getGeometry().getAt(0).getArray());
      break;
    case 'LineString':
      addFeature('Polyline', e.feature.getGeometry().getArray());
      break;
    case 'Point':
      addFeature('Point', e.feature.getGeometry().get());
  }
  map.data.remove(e.feature);
}

function addFeature(type, path) {
  switch (type) {
    case 'Polygon':
      var polygon = new google.maps.Polygon(styles.polygon);
      polygon.setPath(path);

      // listeners for detecting geometry changes
      polygon.getPath().addListener('insert_at', someFunction)
      polygon.getPath().addListener('set_at', someFunction);
      polygon.getPath().addListener('remove_at', someFunction);
      polygon.getPath().addListener('dragend', someFunction);

      // delete vertex using right click
      polygon.addListener('rightclick', function(e) {
        if (e.vertex == undefined) return;
        if (polygon.getPath().getLength() == 3) {
          polygon.setMap(null);
          features.polygons = features.polygons.filter(isValid);
        } else {
          polygon.getPath().removeAt(e.vertex);
          outputAsGeoJSON();
        }
      });

      // add it to our list of features
      features.polygons.push(polygon);

      // and display it on the map
      polygon.setMap(map);
      break;

    case 'Polyline':
      var line = new google.maps.Polyline(styles.polyline);
      line.setPath(path);

      line.getPath().addListener('insert_at', someOtherFunction);
      line.getPath().addListener('set_at', someOtherFunction);
      line.getPath().addListener('remove_at', someOtherFunction);
      line.getPath().addListener('dragend', someOtherFunction);

      // allow right-click vertex deletion
      line.addListener('rightclick', function(e) {
        if (e.vertex == undefined) return;
        if (line.getPath().getLength() == 2) {
          line.setMap(null);
          features.lines = features.lines.filter(isValid);
        } else {
          line.getPath().removeAt(e.vertex);
          outputAsGeoJSON();
        }
      });

      // add it to our list of features
      features.lines.push(line);

      // and display it on the map
      line.setMap(map);
      break;

    case 'Point':
      var marker = new google.maps.Marker(styles.marker);
      marker.setPosition(path);

      // make a splashy entrance
      marker.setAnimation(google.maps.Animation.DROP);

      // detect modifications
      marker.addListener('drag', function(e) {
        // unnecessary bouncing just to throw you off
        marker.setAnimation(google.maps.Animation.BOUNCE);
      });
      marker.addListener('dragend', function(e) {
        // make the bouncing stop
        marker.setAnimation(null);
      })

      // allow right-click deletion
      marker.addListener('rightclick', function(e) {
        marker.setMap(null);
        features.markers = features.markers.filter(isValid);
        outputAsGeoJSON();
      });

      // add it to our list of features
      features.markers.push(marker);

      // and display it on the map
      marker.setMap(map);
      break;
  }

  outputAsGeoJSON();
}

function someFunction() {
  // do stuff
}

function someOtherFunction() {
  // do other stuff
}

// utility function for reuse any time someone right clicks
function isValid(f) {
  return f.getMap() != null;
}

function outputAsGeoJSON() {
  // we're only using the Data type here because it can export as GeoJSON
  var data = new google.maps.Data;

  // add all the polygons in our list of features
  features.polygons.forEach(function(polygon, i) {
    data.add({
      geometry: new google.maps.Data.Polygon([polygon.getPath().getArray()]),
      properties: {
        description: 'I am a polygon'
      }
    });
  });

  // and add all the lines 
  features.lines.forEach(function(line, i) {
    data.add({
      geometry: new google.maps.Data.LineString(line.getPath().getArray()),
      properties: {
        description: 'I am a line'
      }
    });
  });

  // and finally any markers
  features.markers.forEach(function(marker, i) {
    data.add({
      geometry: new google.maps.Data.Point(marker.getPosition()),
      properties: {
        description: 'I am a marker'
      }
    });
  });

  // GeoJSONify it
  data.toGeoJson(function(json) {
    document.getElementById('geojson').value = JSON.stringify(json);
  });
} 
```

[https://jsfiddle.net/pqdu05s9/1/](https://jsfiddle.net/pqdu05s9/1/)

# emacs - emacs 21 中的 emacs linum 模式

> ID：12515753
> 
> 赞同：0
> 
> 时间：2012-09-20T15:20:12.157
> 
> 标签：emacs

对于我的工作，我必须使用 CentOS 5 作为开发机器。CentOS 5 只带有 emacs 21，我不想从源代码编译或使用未经批准用于此操作系统的 RPM，所以我坚持使用 emacs 21。

问题是，`(global-linum-mode 1)`不起作用。

我已经安装`linum.el`和`whitespace.el`. 空白工作正常，如果我这样做 `M-x linum-mode` 了。为什么emacs不能自动`linum-mode`从`.emacs`文件中打开？没有办法吗？我遇到的每一页都说，'是的，通过`(global-linum-mode t)`在你的文件中输入' `.emacs`，但这在 emacs 21 中不起作用。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:46:05.343

替换`define-globalized-minor-mode`为`easy-mmode-define-global-mode`linum.el 并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:42:07.443

查看[http://www.emacswiki.org/emacs/LineNumbers](http://www.emacswiki.org/emacs/LineNumbers)。有许多行号实现可以追溯到以前`linum.el`成为标准 emacs 发行版的一部分。

特别是，`line-num.el`从上面的页面声称与 emacs 21 兼容。

# ios - iOS：如何根据您的手指手势创建滑动视图/文本气泡？

> ID：12515754
> 
> 赞同：-1
> 
> 时间：2012-09-20T15:20:18.380
> 
> 标签：ios, text, touch, sliding

我需要为应用程序创建一个新视图，在该视图中，用户会看到一个带有状态栏、文本气泡和几个按钮的屏幕。他们将被允许将文本气泡滑出屏幕，一个新的气泡将滑入以取代它的位置。我只希望用户一次能够移动一个气泡。我在哪里可以找到这样的编码指南？

1）我没有做过任何基于触摸的事情，但我听说过使用 UI 手势识别器。2）我需要知道如何在文本气泡中滑动（它将具有动态生成的文本），但不是滑出整个视图。主窗口上会有按钮和状态栏，所以当用户在文本气泡中滑动时，它们必须保留

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:33:40.183

您可以使用 UISwipeGestureRecognizer 来检测用户何时在屏幕上轻弹手指：

```
UISwipeGestureRecognizer *rec = [[UISwipeGestureRecognizer initWithTarget:self action:@selector(swipeDetected:)];
[someView addGestureRecognizer:rec];
[rec release]; 
```

然后你可以使用 UIView 动画在任何视图中滑动：

```
[UIView animateWithDuration:0.5 animations:^{
    CGPoint ctr = textBubble.center;
    ctr.x += 100;
    textBubble.center = ctr;
}]; 
```

有关详细信息，请参阅[UIGestureRecognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIGestureRecognizer)和[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)类参考。您也可能会发现[此链接](http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes)很有用。

# c - 高效的列表压缩

> ID：12515755
> 
> 赞同：1
> 
> 时间：2012-09-20T15:20:19.543
> 
> 标签：c, list, performance, defragmentation

假设您有一个无符号整数列表。假设某些元素等于 0，并且您想将它们推回。目前我使用此代码（列表是指向大小为 n 的无符号整数列表的指针

```
for (i = 0; i < n; ++i) 
{    
    if (list[i])
        continue;
    int j;
    for (j = i + 1; j < n && !list[j]; ++j);
    int z;
    for (z = j + 1; z < n && list[z]; ++z);
    if (j == n)
        break;
    memmove(&(list[i]), &(list[j]), sizeof(unsigned int) * (z - j)));
    int s = z - j + i;
    for(j = s; j < z; ++j) 
        list[j] = 0;
    i = s - 1;
} 
```

你能想出一种更有效的方法来执行这项任务吗？

该片段纯属理论，在生产代码中，列表的每个元素都是一个 64 字节的结构

编辑：我会发布我的解决方案。非常感谢乔纳森·莱弗勒。

```
void RemoveDeadParticles(int * list, int * n)
{
    int i, j = *n - 1;
    for (; j >= 0 && list[j] == 0; --j);
    for (i = 0; i <= j; ++i)
    {   
        if (list[i])
            continue;
        memcpy(&(list[i]), &(list[j]), sizeof(int));
        list[j] = 0;
        for (; j >= 0 && list[j] == 0; --j);
        if (i == j)
            break;
    }   

    *n = i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:46:49.450

下面的代码实现了我在评论中概述的线性算法：

> 如果你小心的话，有一个直线 O(N) 算法；你的是 O(N ² )。鉴于该顺序无关紧要，每次您在数组中遇到一个零时，您都将它与最后一个可能不是零的元素交换。这是通过数组的一次。需要注意边界条件。

需要小心；测试代码中的酸测试`list3[]`引起了悲伤，直到我得到了正确的边界条件。请注意，大小为 0 或 1 的列表的顺序已经正确。

```
#include <stdio.h>
#define DIM(x)  (sizeof(x)/sizeof(*(x)))

extern void shunt_zeroes(int *list, size_t n);

void shunt_zeroes(int *list, size_t n)
{
    if (n > 1)
    {
        size_t tail = n;
        for (size_t i = 0; i < tail - 1; i++)
        {
            if (list[i] == 0)
            {
                while (--tail > i + 1 && list[tail] == 0)
                    ;
                if (tail > i)
                {
                    int t = list[i];
                    list[i] = list[tail];
                    list[tail] = t;
                }
            }
        }
    }
}

static void dump_list(const char *tag, int *list, size_t n)
{
    printf("%-8s", tag);
    for (size_t i = 0; i < n; i++)
    {
        printf("%d ", list[i]);
    }
    putchar('\n');
    fflush(0);
}

static void test_list(int *list, size_t n)
{
    dump_list("Before:", list, n);
    shunt_zeroes(list, n);
    dump_list("After:", list, n);
}

int main(void)
{
    int list1[] = { 1, 0, 2, 0, 3, 0, 4, 0, 5 };
    int list2[] = { 1, 2, 2, 0, 3, 0, 4, 0, 0 };
    int list3[] = { 0, 0, 0, 0, 0, 0, 0, 0, 0 };
    int list4[] = { 0, 1 };
    int list5[] = { 0, 0 };
    int list6[] = { 0 };
    test_list(list1, DIM(list1));
    test_list(list2, DIM(list2));
    test_list(list3, DIM(list3));
    test_list(list4, DIM(list4));
    test_list(list5, DIM(list5));
    test_list(list6, DIM(list6));
} 
```

示例运行：

```
$ shuntzeroes
Before: 1 0 2 0 3 0 4 0 5 
After:  1 5 2 4 3 0 0 0 0 
Before: 1 2 2 0 3 0 4 0 0 
After:  1 2 2 4 3 0 0 0 0 
Before: 0 0 0 0 0 0 0 0 0 
After:  0 0 0 0 0 0 0 0 0 
Before: 0 1 
After:  1 0 
Before: 0 0 
After:  0 0 
Before: 0 
After:  0 
$ 
```

* * *

## 代码的复杂性

我已经断言问题和UmNyobe的[答案中的原始代码是 O(N](https://stackoverflow.com/questions/12515755/efficient-list-compacting/12515969#12515969) ² )，但这是 O(N)。但是，在所有三种情况下，循环中都有一个循环。^(当其他答案为 O(N 2) )时，为什么这个答案是线性的？

好问题！

不同之处在于我的代码中的内部循环向后扫描数组，找到一个非零值来与刚刚找到的零交换。这样做，它减少了外部循环要做的工作。因此，`i`索引向前扫描一次，`tail`索引向后扫描一次，直到两者在中间相遇。相比之下，在原始代码中，内部循环从当前索引开始，每次都向前工作到结束，这导致了二次行为。

* * *

## 展示复杂性

UmNyobe 和 Argeman 都断言[UmNyobe的答案中的](https://stackoverflow.com/users/1122645/umnyobe)[代码](https://stackoverflow.com/questions/12515755/efficient-list-compacting/12515969#12515969)是线性的，O(N)，而不是二次的，O(N ² )，正如我在对答案的评论中断言的那样。鉴于两种相反的观点，我编写了一个程序来检查我的断言。

这是一个充分证明了这一点的测试结果。所描述的代码`"timer.h"`是我的平台中立定时接口；可根据要求提供其代码（请参阅我的[个人资料](https://stackoverflow.com/users/15168/jonathan-leffler)）。该测试是在配备 2.3 GHz Intel Core i7、Mac OS X 10.7.5、GCC 4.7.1 的 MacBook Pro 上进行的。

我对 UmNyobe 的代码所做的唯一更改是将数组索引从 更改为`int`，`size_t`以便外部函数接口与我的相同，并保持内部一致性。

测试代码包括一个热身练习，以显示这些函数产生相同的答案；UmNyobe 的答案保留了数组中的顺序，而我的则没有。我已经从计时数据中省略了这些信息。

```
$ make on2
gcc -O3 -g -I/Users/jleffler/inc -std=c99 -Wall -Wextra -L/Users/jleffler/lib/64 on2.c -ljl -o on2
$ 
```

### 定时

第 1 组：在没有 UmNyobe 修正算法的旧版本测试工具上。

```
shunt_zeroes:        100    0.000001
shunt_zeroes:       1000    0.000005
shunt_zeroes:      10000    0.000020
shunt_zeroes:     100000    0.000181
shunt_zeroes:    1000000    0.001468
pushbackzeros:       100    0.000001
pushbackzeros:      1000    0.000086
pushbackzeros:     10000    0.007003
pushbackzeros:    100000    0.624870
pushbackzeros:   1000000   46.928721
shunt_zeroes:        100    0.000000
shunt_zeroes:       1000    0.000002
shunt_zeroes:      10000    0.000011
shunt_zeroes:     100000    0.000113
shunt_zeroes:    1000000    0.000923
pushbackzeros:       100    0.000001
pushbackzeros:      1000    0.000097
pushbackzeros:     10000    0.007077
pushbackzeros:    100000    0.628327
pushbackzeros:   1000000   41.512151 
```

机器上最多只有非常轻的背景负载；例如，我暂停了通常在后台运行的 Boinc 计算。详细的时间安排并没有我想的那么稳定，但结论很清楚。

*   我的算法是 O(N)
*   UmNyobe 的（原始）算法为 O(N ² )

第 2 组：使用 UmNyobe 的修正算法

还包括 Patrik 的前后算法，以及 Wildplasser 的算法（参见下面的源代码）；测试程序从 重命名`on2`为`timezeromoves`。

```
$ ./timezeromoves -c -m 100000 -n 1
shunt_zeroes: (Jonathan)
shunt_zeroes:        100    0.000001
shunt_zeroes:       1000    0.000003
shunt_zeroes:      10000    0.000018
shunt_zeroes:     100000    0.000155
RemoveDead: (Patrik)
RemoveDead:          100    0.000001
RemoveDead:         1000    0.000004
RemoveDead:        10000    0.000018
RemoveDead:       100000    0.000159
pushbackzeros2: (UmNyobe)
pushbackzeros2:      100    0.000001
pushbackzeros2:     1000    0.000005
pushbackzeros2:    10000    0.000031
pushbackzeros2:   100000    0.000449
list_compact: (Wildplasser)
list_compact:        100    0.000004
list_compact:       1000    0.000005
list_compact:      10000    0.000036
list_compact:     100000    0.000385
shufflezeroes: (Patrik)
shufflezeroes:       100    0.000003
shufflezeroes:      1000    0.000069
shufflezeroes:     10000    0.006685
shufflezeroes:    100000    0.504551
pushbackzeros: (UmNyobe)
pushbackzeros:       100    0.000003
pushbackzeros:      1000    0.000126
pushbackzeros:     10000    0.011719
pushbackzeros:    100000    0.480458
$ 
```

这表明 UmNyobe 的修正算法是 O(N)，其他解决方案也是如此。原始代码显示为 O(N ² )，UmNyobe 的原始算法也是如此。

### 资源

这是修改后的测试程序（重命名为`testzeromoves.c`）。算法实现位于顶部。测试工具在评论“测试工具”之后。该命令可以进行检查或计时或两者（默认）；它默认进行两次迭代；默认情况下，它的大小可达一百万个条目。您可以使用`-c`标志省略检查，使用`-t`标志省略计时，使用`-n`标志指定迭代次数，使用`-m`标志指定最大大小。过百万要谨慎；您可能会遇到 VLA（可变长度数组）炸毁堆栈的问题。修改代码以使用它会很`malloc()`容易`free()`；不过，这似乎没有必要。

```
#include <string.h>

#define MAX(x, y)   (((x) > (y)) ? (x) : (y))

extern void shunt_zeroes(int *list, size_t n);
extern void pushbackzeros(int *list, size_t n);
extern void pushbackzeros2(int *list, size_t n);
extern void shufflezeroes(int *list, size_t n);
extern void RemoveDead(int *list, size_t n);
extern void list_compact(int *arr, size_t cnt);

void list_compact(int *arr, size_t cnt)
{
    size_t dst,src,pos;

    /* Skip leading filled area; find start of blanks */
    for (pos=0; pos < cnt; pos++) {
        if ( !arr[pos] ) break;
    }
    if (pos == cnt) return;

    for(dst= pos; ++pos < cnt; ) { 
        /* Skip blanks; find start of filled area */
        if ( !arr[pos] ) continue;

        /* Find end of filled area */
        for(src = pos; ++pos < cnt; ) {
            if ( !arr[pos] ) break;
        }   
        if (pos > src) {
            memmove(arr+dst, arr+src, (pos-src) * sizeof arr[0] );
            dst += pos-src;
        }   
    }
}

/* Cannot change j to size_t safely; algorithm relies on it going negative */
void RemoveDead(int *list, size_t n)
{
    int i, j = n - 1;
    for (; j >= 0 && list[j] == 0; --j)
        ;
    for (i = 0; i <= j; ++i)
    {   
        if (list[i])
            continue;
        memcpy(&(list[i]), &(list[j]), sizeof(int));
        list[j] = 0;
        for (; j >= 0 && list[j] == 0; --j);
        if (i == j)
            break;
    }   
}

void shufflezeroes(int *list, size_t n)
{
    for (size_t i = 0; i < n; ++i) 
    {    
        if (list[i])
            continue;
        size_t j;
        for (j = i + 1; j < n && !list[j]; ++j)
            ;
        size_t z;
        for (z = j + 1; z < n && list[z]; ++z)
            ;
        if (j == n)
            break;
        memmove(&(list[i]), &(list[j]), sizeof(int) * (z - j));
        size_t s = z - j + i;
        for(j = s; j < z; ++j) 
            list[j] = 0;
        i = s - 1;
    } 
}

static int nextZero(int* list, size_t start, size_t n){
   size_t i = start;
   while(i < n && list[i])
        i++;
   return i;
}

static int nextNonZero(int* list, size_t start, size_t n){
   size_t i = start;
   while(i < n && !list[i])
        i++;
   return i;
}

void pushbackzeros(int* list, size_t n){
    size_t i = 0;
    size_t j = 0;
    while(i < n && j < n){
         i = nextZero(list,i, n);
         j = nextNonZero(list,i, n);
         if(i >= n || j >=n)
             return;
         list[i] = list[j];
         list[j] = 0;
    }
}

/* Amended algorithm */
void pushbackzeros2(int* list, size_t n){
    size_t i = 0;
    size_t j = 0;
    while(i < n && j < n){
         i = nextZero(list, i, n);
         j = nextNonZero(list, MAX(i,j), n);
         if(i >= n || j >=n)
             return;
         list[i] = list[j];
         list[j] = 0;
    }
}

void shunt_zeroes(int *list, size_t n)
{
    if (n > 1)
    {
        size_t tail = n;
        for (size_t i = 0; i < tail - 1; i++)
        {
            if (list[i] == 0)
            {
                while (--tail > i + 1 && list[tail] == 0)
                    ;
                if (tail > i)
                {
                    int t = list[i];
                    list[i] = list[tail];
                    list[tail] = t;
                }
            }
        }
    }
}

/* Test Harness */

#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include "timer.h"

#define DIM(x)      (sizeof(x)/sizeof(*(x)))

typedef void (*Shunter)(int *list, size_t n);

typedef struct FUT      /* FUT = Function Under Test */
{
    Shunter function;
    const char *name;
    const char *author;
} FUT;

static int tflag = 1;   /* timing */
static int cflag = 1;   /* checking */
static size_t maxsize = 1000000;

static void dump_list(const char *tag, int *list, size_t n)
{
    printf("%-8s", tag);
    for (size_t i = 0; i < n; i++)
    {
        printf("%d ", list[i]);
    }
    putchar('\n');
    fflush(0);
}

static void test_list(int *list, size_t n, Shunter s)
{
    dump_list("Before:", list, n);
    (*s)(list, n);
    dump_list("After:", list, n);
}

static void list_of_tests(const FUT *f)
{
    int list1[] = { 1, 0, 2, 0, 3, 0, 4, 0, 5 };
    int list2[] = { 1, 2, 2, 0, 3, 0, 4, 0, 0 };
    int list3[] = { 0, 0, 0, 0, 0, 0, 0, 0, 0 };
    int list4[] = { 0, 1 };
    int list5[] = { 0, 0 };
    int list6[] = { 0 };

    test_list(list1, DIM(list1), f->function);
    test_list(list2, DIM(list2), f->function);
    test_list(list3, DIM(list3), f->function);
    test_list(list4, DIM(list4), f->function);
    test_list(list5, DIM(list5), f->function);
    test_list(list6, DIM(list6), f->function);
}

static void test_timer(int *list, size_t n, const FUT *f)
{
    Clock t;
    clk_init(&t);
    clk_start(&t);
    f->function(list, n);
    clk_stop(&t);
    char buffer[32];
    printf("%-15s  %7zu  %10s\n", f->name, n, clk_elapsed_us(&t, buffer, sizeof(buffer)));
    fflush(0);
}

static void gen_test(size_t n, const FUT *f)
{
    int list[n];
    for (size_t i = 0; i < n/2; i += 2)
    {
        list[2*i+0] = i;
        list[2*i+1] = 0;
    }   
    test_timer(list, n, f);
}

static void timed_run(const FUT *f)
{
    printf("%s (%s)\n", f->name, f->author);
    if (cflag)
        list_of_tests(f);
    if (tflag)
    {
        for (size_t n = 100; n <= maxsize; n *= 10)
            gen_test(n, f);
    }
}

static const char optstr[] = "cm:n:t";
static const char usestr[] = "[-ct][-m maxsize][-n iterations]";

int main(int argc, char **argv)
{
    FUT functions[] =
    {
        { shunt_zeroes,   "shunt_zeroes:",   "Jonathan"    },   /* O(N) */
        { RemoveDead,     "RemoveDead:",     "Patrik"      },   /* O(N) */
        { pushbackzeros2, "pushbackzeros2:", "UmNyobe"     },   /* O(N) */
        { list_compact,   "list_compact:",   "Wildplasser" },   /* O(N) */
        { shufflezeroes,  "shufflezeroes:",  "Patrik"      },   /* O(N^2) */
        { pushbackzeros,  "pushbackzeros:",  "UmNyobe"     },   /* O(N^2) */
    };
    enum { NUM_FUNCTIONS = sizeof(functions)/sizeof(functions[0]) };
    int opt;
    int itercount = 2;

    while ((opt = getopt(argc, argv, optstr)) != -1)
    {
        switch (opt)
        {
        case 'c':
            cflag = 0;
            break;
        case 't':
            tflag = 0;
            break;
        case 'n':
            itercount = atoi(optarg);
            break;
        case 'm':
            maxsize = strtoull(optarg, 0, 0);
            break;
        default:
            fprintf(stderr, "Usage: %s %s\n", argv[0], usestr);
            return(EXIT_FAILURE);
        }
    }

    for (int i = 0; i < itercount; i++)
    {
        for (int j = 0; j < NUM_FUNCTIONS; j++)
            timed_run(&functions[j]);
        if (tflag == 0)
            break;
        cflag = 0;  /* Don't check on subsequent iterations */
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:31:12.480

我认为下面的代码更好。它保留了非零元素的顺序

```
int nextZero(int* list, int start, int n){
   int i = start;
   while(i < n && list[i])
        i++;
   return i;
}

int nextNonZero(int* list, int start, int n){
   int i = start;
   while(i < n && !list[i])
        i++;
   return i;
}

void pushbackzeros(int* list, int n){
    int i = 0;
    int j = 0;
    while(i < n && j < n){
         i = nextZero(list,i, n);
         j = nextNonZero(list,i, n);
         if(i >= n || j >=n)
             return;
         list[i] = list[j];
         list[j] = 0;
    }
} 
```

想法：

*   您找到第一个零位 ( `i`)
*   你找到下一个非零位置( `j`)
*   如果订购不正确，您交换
*   您从当前位置重新开始（或找到一个新的非零元素进行交换）

复杂度：`O(n)`. 在最坏的情况下，每个索引最多访问 4 次（一次 by `i`，一次 by `j`in 函数），然后在交换期间访问。

编辑：以前的代码被***破坏了***。这个仍然是`O(n)`模块化的。

**编辑：**

上面代码的复杂度是 O(n^2)，因为索引 j 可以“返回”以查找非零项目，即检查它已经拥有的项目。它发生***在下一个零******在下***一个非零之前。修复比较简单，

```
 j = nextNonZero(list,MAX(i,j), n); 
```

而不是

```
 j = nextNonZero(list,i, n); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T22:20:05.823

这是我的尝试。**返回值**是数组中存在的成员数（**必须**忽略它之后的任何内容！！）：

```
#include <stdio.h>
#include <string.h>

size_t list_compact(int *arr, size_t cnt);

size_t list_compact(int *arr, size_t cnt)
{
    size_t dst,src,pos;

    /* Skip leading filled area; find start of blanks */
    for (pos=0; pos < cnt; pos++) {
        if ( !arr[pos] ) break;
        }
    if (pos == cnt) return pos;

    for(dst= pos; ++pos < cnt; ) { 
        /* Skip blanks; find start of filled area */
        if ( !arr[pos] ) continue;

        /* Find end of filled area */
        for(src = pos; ++pos < cnt; ) {
            if ( !arr[pos] ) break;
            }   
        if (pos > src) {
            memcpy(arr+dst, arr+src, (pos-src) * sizeof arr[0] );
            dst += pos-src;
            }   
        }
#if MAINTAIN_ORIGINAL_API || JONATHAN_LEFFLFER
     if (cnt > src) memset( arr + src, 0, (cnt-src) * sizeof arr[0] );
#endif
    return dst;
} 
```

更新：这是 Jonathan Leffler shuffle 方法的紧凑版本（不保持原始顺序）：

```
size_t list_compact(int *arr, size_t cnt)
{
    int *beg,*end;
    if (!cnt) return 0;

    for (beg = arr, end=arr+cnt-1; beg <= end; ) {
        if ( *beg ) { beg++; continue; }
        if ( !*end ) { end--; continue; }
        *beg++ = *end--;
        }

#if WANT_ZERO_THE_TAIL
        if (beg < arr+cnt) memset(beg, 0, (arr+cnt-beg) *sizeof *arr);
        return cnt;
#else
    return beg - arr;
#endif
} 
```

更新：（感谢 Jonathan Leffler）memmove() 确实应该是 memcpy()，因为缓冲区不可能重叠。

GCC 4.6.1 需要 -minline-all-stringops 来内联 memcpy()。memmove() 从不内联，所以看起来。

内联是性能上的胜利，因为函数调用开销相对于实际移动量非常大（仅`sizeof(int)`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:17:14.833

一个非常简单的 O(n) 算法是遍历列表，每次遇到零条目时删除它，记录您在此过程中删除的条目数 M，当您完成遍历列表时添加该数字列表末尾的 M 个零条目。

这需要对连续元素进行 N 次检查，其中 N 是列表的长度，M 次删除，M 次插入到列表的末尾。最坏的情况是，如果整个列表被零个条目填充，您将执行 N 次读取、N 次删除和 N 次插入。

# c++ - 将 IBM C++ 编译器从 xlc_R 10.0 升级到 11.1 后出现的问题

> ID：12515758
> 
> 赞同：1
> 
> 时间：2012-09-20T15:20:28.583
> 
> 标签：c++, aix, corba, idl, xlc

一切都编译得很好，但在运行时，它崩溃了，没有任何核心转储、异常或没有关于正在发生的事情的日志线索。插入调试行后发现就在这一段代码周围

```
 if( MISC_TABLE_ID != tableID )
       {
            OrbSchemaStructure orbSchemaStruct;
            orbSchemaStruct.tableName = tableView;
            orbSchemaStruct.columnName = colName;
            orbSchemaStruct.dataType   = tsFact->convertDBDataTypeToEVDataType( toString( col.type() ) );
            orbSchemaStruct.primaryKeyComponent = pkComponent;
            schemaStructureDeque.push_back( orbSchemaStruct );  //crashes after this line
        } 
```

它发生在该块的最后一行，即 push_back 发生的地方。

并且`schemaStructureDeque`恰好是一个类型的对象，`DEQUE< OrbSchemaStructure >& schemaStructureDeque`其中 DEQUE 是 std::deque 的定义。

OrbSchemaStructure 是在 idl 中定义的结构，如下所示：

```
 struct OrbSchemaStructure
{
   string        tableName;
   string        columnName;
   unsigned long dataType;
   boolean       primaryKeyComponent;
}; 
```

处理双端队列的方式有什么变化吗？我错过了什么吗？

在将这个问题写成过于本地化之前，请让我知道我是否缺少任何信息，或者我没有找对地方。

我正在使用omniORB 4.0.4 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:57:50.807

在使用新的 AIX 11.1 C++ 编译器在 AIX 上编译 omniORB 并将其与二进制文件链接时，它已停止崩溃。

# javascript - 滚动时ipad上的javascript不会触发

> ID：12515759
> 
> 赞同：0
> 
> 时间：2012-09-20T15:20:31.000
> 
> 标签：javascript, ipad, mobile-safari

它看起来像javascript：

```
$(function() {
    setInterval( "slideSwitch()", 5000);
}) 
```

在 iPad/safari 上滚动时永远不会触发。有什么解决方法吗？

（在安卓股票浏览器上可以）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:43:58.957

这并不像看起来那么容易。当我需要这样的功能时，我开始使用[iScroll](http://cubiq.org/iscroll-4)库，并对源代码进行了一些小改动。

我已经将它与“ios-perfect-scrollbar”示例中提供的 CSS 和 onScrollMove 事件一起使用。但是即使在“动量滚动”上也能触发这个事件，你需要添加

`if (that.options.onScrollMove) that.options.onScrollMove.call(that, e);`

在“动画”功能结束时。

# php - 给定布尔值（尝试显示有关数据库表的统计信息）

> ID：12515767
> 
> 赞同：0
> 
> 时间：2012-09-20T15:20:42.490
> 
> 标签：php, mysql

我正在尝试显示我的数据库表的统计信息。我有一个名为主题的列，它包含不同的值，然后是一个名为优先级的列，其中包含值在 1-10 之间的字段。

现在，我想做的是按以下格式显示该表的统计信息。

优先级“1”的xx 将主题“xxxxxx”作为主题。优先级“1”的xx 将主题“yyyyyy”作为主题。优先级“1”的xx 将主题“zzzzzz”作为主题。优先级“2”的xx 将主题“xxxxxx”作为主题。优先级“2”的xx 将主题“yyyyyy”作为主题。优先级“2”的xx 将主题“zzzzzz”作为主题。

等等。

我有以下代码，但是当我尝试使用它时，它返回“警告：mysql_fetch_array() 期望参数 1 是资源，给定布尔值”错误。

```
<?php
    $hostname = "localhost";
    $username = "root";
    $password = "";
    $database = "dbname";

    $connection = mysql_connect($hostname, $username, $password) OR die('Could not connect to MySQL: ' . mysql_error());
    mysql_select_db($database);

$sql = "
       SELECT priority, COUNT(priority) as nbr_of_priorities, topic, 
       FROM table_Name
       GROUP BY priority, topic
    ";

$result = mysql_query($sql);
while($row = mysql_fetch_array($result))
{
         echo $row['nbr_of_priorities'].'of the priority'.$row['priority'];
         echo 'has'.$row['topic'].'as topic';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:24:46.040

您是否对数据库运行过查询？

我在您的 SQL 中看到一个错误的逗号，在“主题”之后...您的查询可能失败，然后 $results 将是错误的（您没有测试），然后您的 while 将因该错误而失败...

# layout - Liferay：可实例化的 portlet 公司范围的首选项

> ID：12515770
> 
> 赞同：1
> 
> 时间：2012-09-20T15:20:48.600
> 
> 标签：layout, liferay, portlet, preferences

有没有办法获得具有不同首选项的可实例化 portlet 的 2 个实例，在每个实例的所有布局中共享？

我的意思是 portlet A Instance 1 放置在所有社区中，并且它共享放置它的所有布局的首选项

Portlet A Instance 2 放置在这些社区的一个子集中，它共享放置它的所有布局的首选项

或者可能是 portlet 与其在另一个布局中的图像之间的关系与同一页面中 2 个实例之间的关系完全相同（根本没有连接）？

那么在每页实例和每布局实例之间的说明有点令人困惑。

它是完全复制 portlet 并为每个实例设置公司范围的首选项的最后一个选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:00:40.937

添加为答案：

对于如此复杂的需求，最好“作弊”并在 portlet.xml 和 liferay-portlet.xml 中声明同一个 portlet 的两个实例，这样您就可以独立控制首选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:39:51.603

查看[http://docs.liferay.com/portal/6.0/definitions/liferay-portlet-app_6_0_0.dtd.html#preferences-unique-per-layout](http://docs.liferay.com/portal/6.0/definitions/liferay-portlet-app_6_0_0.dtd.html#preferences-unique-per-layout)因为它很好地讨论了它们`preferences-unique-per-layout`以及`preferences-owned-by-group`它们如何相互作用

# python - 创建符合标准的文件

> ID：12515772
> 
> 赞同：-2
> 
> 时间：2012-09-20T15:20:50.803
> 
> 标签：python, sed, awk, grep

我有一个逗号分隔的文件。线条看起来像这样...

```
1,2,3,4,5
6,7,8
9,10
11,12,13,14,15 
```

我需要在所有行中恰好有 5 列。所以新文件将是...

```
1,2,3,4,5
6,7,8,,
9,10,,,
11,12,13,14,15 
```

换句话说，如果一行中的逗号少于 4 个。在末尾添加所需的数字。有人告诉我有一个 python 模块可以做同样的事情。我在哪里可以找到这样的模块？awk 是否更适合此类任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:24:52.227

您正在寻找的模块是[`csv`module](http://docs.python.org/library/csv.html)。您仍然需要确保您的列表满足您的最小长度要求：

```
with open('output.csv', 'wb') as output:
    input = csv.reader(open('faultyfile.csv', 'rb'))
    output = csv.writer(output, dialect=input.dialect)
    for line in input:
        if len(line) < 5:
            line.extend([''] * (5 - len(line)))
        output.writerow(line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:59:18.183

如果您不介意使用 awk，那么很容易：

```
$ cat data.txt 
1,2,3,4,5
6,7,8
9,10
11,12,13,14,15

$ awk -F, 'BEGIN {OFS=","} {print $1,$2,$3,$4,$5}' data.txt 
1,2,3,4,5
6,7,8,,
9,10,,,
11,12,13,14,15 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:25:49.297

```
def correct_file(fname):
    with open(fname) as f:
         data = [ line[:-1]+(4-line.count(','))*',' + '\n' for line in f ]
    with open(fname,'w'):
         f.writelines(data) 
```

如评论中所述，当您确实不需要时，这会将整个文件读入*内存*。要一次性完成所有操作：

```
import shutil
def correct_file(fname):
    with open(fname,'r') as fin, open('temp','w') as fout:
        for line in fin:
           new = line[:-1]+(4-line.count(','))*',' + '\n'
           fout.write(new)
    shutil.move('temp',fname) 
```

这将使任何名为的文件`temp`在当前目录中消失。当然，您总是可以使用该`tempfile`模块来解决这个问题......

* * *

对于稍微冗长但防弹（？）的版本：

```
import shutil
import tempfile
import atexit
import os

def try_delete(fname):
    try:
       os.unlink(fname)
    except OSError:
       if os.path.exists(fname):
          print "Couldn't delete existing file",fname

def correct_file(fname):
    with open(fname,'r') as fin, tempfile.NamedTemporaryFile('w',delete=False) as fout:
        atexit.register(lambda f=fout.name: try_delete(f)) #Need a closure here ...
        for line in fin:
           new = line[:-1]+(4-line.count(','))*',' + '\n'
           fout.write(new)
    shutil.move(fout.name,fname) #This should get rid of the temporary file ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T15:26:19.863

```
with open('somefile.txt') as f:
      rows = []
      for line in f:
          rows.append(line.split(","))

max_cols = len(max(rows,key=len))
for row in rows:
    row.extend(['']*(max_cols-len(row))

print "\n".join(str(r) for r in rows) 
```

如果您确定它总是长 n 项（在本例中为 5 项），并且在打开文件之前您总是会知道……这样做会更节省内存（类似这样）

```
 with open("f1","r"):
      with open("f2","w"):
          for line in f1:
              f2.write(line+(","*(4-line.count(",")))+"\n") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T17:28:11.773

这可能对您有用（GNU sed）：

```
 sed ':a;s/,/&/4;t;s/$/,/;ta' file 
```

# c# - 在 C# 中为 Dapper 创建动态类型

> ID：12515773
> 
> 赞同：1
> 
> 时间：2012-09-20T15:20:54.517
> 
> 标签：c#, dapper

我有一个应用程序，我在其中保存未知的结构化数据。所以，让我们假设在数据库中有一个名为的表`Foo`，它看起来像这样：

```
CREATE TABLE [dbo].[Foo]
(
    [Id] INT NOT NULL PRIMARY KEY IDENTITY, 
    [DataId] INT NOT NULL, 
    [Bar] VARCHAR(50) NOT NULL, 
    CONSTRAINT [FK_Foo_Data] FOREIGN KEY ([DataId]) REFERENCES [Data]([Id])
) 
```

并且`Foo`与一个名为的表相关，该表`Data`将存储记录数据的提供者以及记录的日期和时间，假设该表如下所示：

```
CREATE TABLE [dbo].[Data]
(
    [Id] INT NOT NULL PRIMARY KEY IDENTITY, 
    [ProviderId] INT NOT NULL, 
    [RecordDateTime] DATETIME NOT NULL, 
    CONSTRAINT [FK_Data_Provider] FOREIGN KEY ([ProviderId]) REFERENCES [Provider]([Id])
) 
```

好的，现在让我们假设提供者（我不知道它提供的数据）有一个名为的类`Foo`，如下所示：

```
[Serializable]
public class Foo : ISerializable
{
    private string bar;

    public string Bar
    {
        get { return bar; }
        set { bar = value; }
    }

    public Foo()
    {
        Bar = "Hello World!";
    }

    public Foo(SerializationInfo info, StreamingContext context)
    {
        this.bar = info.GetString("Bar");
    } 

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue("Bar", bar);
    }
} 
```

因此，当提供商向我发送一个实例时，`Foo`我将对其进行询问并确定应将其插入数据库中的哪个表，并假设代码块如下所示：

```
this.connection.Open();

try
{
    var parameters = new
        {
            ProviderId = registeredProvidersIdBySession[providerKey.ToString()],
            RecordDateTime = DateTime.Now,
        };

    var id = connection.Query<int>("INSERT INTO Data (ProviderId, RecordDateTime) VALUES (@ProviderId, @RecordDateTime); SELECT CAST(SCOPE_IDENTITY() as INT)", parameters).Single();

    var t = data.GetType();
    var fields = t.GetProperties(BindingFlags.Public | BindingFlags.Instance);

    var tableName = string.Format("[{0}]", t.Name);
    var fieldList = string.Join(", ", fields.Select(p => string.Format("[{0}]", p.Name)).ToArray());

    var valueList = fields.Select(p => string.Format("@{0}", p.Name)).ToList();
    valueList.Insert(0, "@DataId");

    var values = new Dictionary<string, object>();
    values.Add("@DataId", id);
    foreach (var propertyInfo in fields)
    {
        values.Add(string.Format("@{0}", propertyInfo.Name), propertyInfo.GetValue(data, null));
    }

    return connection.Execute(string.Format(
        "INSERT INTO {0} ({1}) VALUES ({2})",
            tableName,
            fieldList,
            string.Join(", ", valueList.ToArray())), values);
}
finally
{
    this.connection.Close();
} 
```

现在如您所见，我正在`tableName`从`Type`传递给我的对象中获取。在我们的示例中是`Foo`. 此外，我正在收集要通过反射插入的字段列表。但是，相处中的障碍是`Dapper`需要将对象发送给它以获取参数值。现在，如果我不需要提供`DataId`类型的属性，我可以传入给我的对象，但我需要该`DataId`属性，以便我可以正确关联日志。

## 我在问什么？

1.  我将不得不创建一个动态类型还是可以`Dapper`做其他事情来提供帮助？
2.  如果我必须创建一个动态类型，有没有比使用`TypeBuilder`? 我以前做过，可以再做一次，但是男人很痛苦。
3.  如果我将不得不使用`TypeBuilder`我会对您的示例感兴趣，因为您可能知道比我更有效的方法。因此，如果您有一些想法，请举一个例子。

## 免责声明

在上面的代码示例中，您会看到我尝试传入 a`Dictionary<string, object>`但`Dapper`不接受。我几乎知道它不会，因为我已经看过源代码，但我只是希望我错过了一些东西。

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:35:51.577

Dapper 中有一个 BuiltIn 类型来传递参数，哪些属性仅在运行时是已知的：检查 class `DynamicParameters`。它的用法如下：

```
var p = new DynamicParameters();
p.Add("@a", 11);
p.Add("@b", dbType: DbType.Int32, direction: ParameterDirection.Output);
p.Add("@c", dbType: DbType.Int32, direction: ParameterDirection.ReturnValue); 
```

然后作为参数对象传递给`Execute`方法。它通常与 SP 一起使用（因此您也可以使用它来读取输出值），但没有理由阻止它与常规 SELECT/INSERT/UPDATE 查询一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:46:01.107

我知道你问过关于 dapper 但...

Sauce DB 实际上很好地处理了这种类型的场景。有几种方法可以做到这一点。下面是一些说明它的示例代码。注意：您可以覆盖如何找到表名，并且如果您愿意，可以使用一些方法来检索解析的表名。

免责声明：我写了 SauceDB

```
public class Foo
{
    public int ID { get; set; }
    publi string Name { get; set; }
}

public class Bar
{
    public int ID { get; set; }
    publi string Name { get; set; }
}

public class  MainClass
{
    IDataStore _dstore;
    public void Main()
    {
        _dstore = new SqlServerDataStore("my_connection_string")//create data store

        InsertObject(new Foo());
        InsertObject(new Bar());
    }

    public void InsertObject(object o)
    {
        //this will assume the table it belongs to is the type name + an s
            //you can override the table name behavior as well
        _dstore.InsertObject(o);
    }
} 
```

[http://sauce.codeplex.com/](http://sauce.codeplex.com/)

# selenium - Selenium RC 自定义 base-url

> ID：12515779
> 
> 赞同：0
> 
> 时间：2012-09-20T15:21:07.553
> 
> 标签：selenium, batch-file, selenium-rc, selenium-ide

我创建了一个 .bat 文件来打开多个 Selenium 测试（使用 Selenium RC），使用 url 参数（计算机名）。

问题是命令参数 base-url 被测试套件`open`命令的 url 覆盖。

我知道 base-url 文件的参数可以是一个虚拟 url，因为它被测试套件覆盖，但是我怎样才能设法使用该 base-url 参数？

下面的`app_path`变量是我要使用的基本 URL：

```
SET app_path="http://myApplication.com?Rank=%param%&Computer=%computername%"
START java.exe -jar %seleniumserver_path% -htmlSuite "*firefox" %app_path% %suite_path% %result_path% -port %unique_port% 
```

从我这里的红色[http://www.yoyobrain.com/flashcards/show/64136](http://www.yoyobrain.com/flashcards/show/64136)来看：

> baseURL GET 参数的用途，它接受什么以及什么是默认值
> 
> （回答）
> 
> 如果“打开”命令使用相对 URL，我们将使用此基本 URL 使其成为绝对 URL。
> 
> 此 URL 必须是绝对 URL，即它应该以“http://”或“https://”开头，并且应该指向一个目录，即 URL 路径应该以“/”结尾。（如果 URL 不以 / 结尾，我们将自动删除路径的最后一部分，例如“http://foo/bar”将被视为“http://foo/”。）
> 
> 接受绝对 URL，默认为 test 参数中指定的测试套件的绝对 URL

所以现在我的问题是：我怎样才能将参数从 Selenium RC 传递给我的 TestSuite？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:50:04.770

我设法找到了答案，如果有人遇到同样的问题，我会分享：

在您的第一个测试用例中，您可以设法获取使用的 selenium base-url。为此，请存储该`selenium.browserbot.baseUrl`值，然后将该值用于您的`open`命令：

```
<tr>
  <td>storeEval</td>
  <td>selenium.browserbot.baseUrl</td>
  <td>MyBaseUrl</td>
</tr>
<tr>
  <td>open</td>
  <td>${MyBaseUrl}</td>
  <td></td>
</tr> 
```

# c# - 使用 VS2012 打开项目后 EnterpriseLibrary 5.0.414.0 出错

> ID：12515780
> 
> 赞同：1
> 
> 时间：2012-09-20T15:21:08.973
> 
> 标签：c#, visual-studio-2012, enterprise-library

我有一个用 VS2010 编写的网站，它使用对使用 EnterpriseLibrary 5.0.414.0 的服务的 Web 引用。

当我使用 VS2010 时一切正常，但是一旦我用 VS2012 RTM 打开它，我开始收到以下错误（当我在 VS2010 中打开项目时也遇到同样的错误）

```
Reference.svcmap: Could not load file or assembly 'Microsoft.Practices.EnterpriseLibrary.Common, Version=5.0.414.0, 
Culture=neutral, PublicKeyToken=null' or one of its dependencies. 
The located assembly's manifest definition does not match the assembly reference. 
(Exception from HRESULT: 0x80131040) 
```

请指教。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-08-29T06:58:54.077

如果您缺少上述程序集所需的其他企业库块（并且也复制本地 true），则可能会发生这种情况，它们是：

```
Microsoft.Practices.EnterpriseLibrary.Common.dll
Microsoft.Practices.ServiceLocation.dll
Microsoft.Practices.Unity.Configuration.dll
Microsoft.Practices.Unity.dll
Microsoft.Practices.Unity.Interception.Configuration.dll
Microsoft.Practices.Unity.Interception.dll 
```

# javascript - 如何将 DropDownLists 添加到从存储过程填充的弹出窗口中

> ID：12515785
> 
> 赞同：0
> 
> 时间：2012-09-20T15:21:21.603
> 
> 标签：javascript, asp.net

我正在尝试将 2 个下拉列表添加到弹出窗口中。但我遇到了麻烦。

我有一个名为“showMessage”的函数，它创建一个弹出窗口。

所以：showMessage（“你好”）；将创建一个带有“hello”字样的弹出窗口。现在我的问题是如何添加 2 个下拉列表。我尝试使用 2 个下拉列表创建一个 div，然后执行 showMessage(document.getElemenyBiId(ddl)); 但我知道这是不对的。

这是我的“showMessage”功能：

```
function showMessage(msg, title, onOk) {
if (title === undefined)
    title = "";

if (onOk === undefined)
    onOk = function () {
        $(this).dialog('close');
    }

$('<div>').dialog({
    title: title,
    height: 'auto',
    width: '250',
    open: function () {
        $(this).html(msg);
    },
    buttons: {
        Ok: onOk
    },
    close: function () {
        $(this).remove();
    }
}); 
```

}

这是我的下拉列表 div：

```
<div id="newExpenseTypeDialog" style="display:none;">
        <label>Select new CaseFile:</label>
        <asp:DropDownList runat="server" ID="ddlCaseFiles" DataSourceID="dsMyCaseFiles" DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="524px" />
</div> 
```

javascript函数我必须在我试图让一个弹出窗口加载2个下拉列表然后让用户从两者中选择一个id然后让它将2个值传递给函数来做我想要它做的事情。

```
function moveCasefile(isMovePossible) {
        //var newCaseFileID;
        //var oldCaseFileID;
         //this area I am trying to get the popup to happen and get the input from the user via dropdownLists.
        if (newCaseFileID || oldCaseFileID) {
            //alert(ans);

            var selectedExpensesList = getSelectedExpenseIDs();
            if (selectedExpensesList.length > 0) {
                $.ajax({
                    type: "POST",
                    //url: "/Tasks/ViewTasks.aspx/deleteTasksAndLinkedItems",
                    url: '<%=ResolveUrl("~/Expenses/ViewExpenses.aspx/moveNewCaseFile")%>',
                    data: "{'MoveCaseFile' : '" + isMovePossible + "','ExpId': ['" + selectedExpensesList.join('\',\'') + "'],'newCaseFileID': '" +
                    newCaseFileID + "', 'oldCaseFileID': '" + oldCaseFileID + "'}",
                    //dataaaaaa` 
```

我的 div 与 DropDownLists：

```
<div id="newExpenseTypeDialog" style="display:none;">
        <label>Select new CaseFile:</label>
        <asp:DropDownList runat="server" ID="ddlCaseFiles" DataSourceID="dsMyCaseFiles" DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="524px" />
        <asp:DropDownList runat="server" ID="ddlCaseFiles2" DataSourceID="dsMyCaseFiles" DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="524px" />
</div> 
```

我的 DropdownLists 数据源：

```
<asp:SqlDataSource ID="dsMyCaseFiles" runat="server" ConnectionString="<%$ ConnectionStrings:OSCIDConnectionString %>" ProviderName="System.Data.SqlClient" SelectCommand="p_CaseFiles_ListActiveCaseFilesAssignedTo" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:SessionParameter Name="InvestigatorID" SessionField="InvestigatorID" />
        <asp:SessionParameter Name="AssignedTo" SessionField="InvestigatorID" />
    </SelectParameters>
</asp:SqlDataSource> 
```

还有我的“pre_render”代码隐藏：

```
 protected void ddl_PreRender(object sender, EventArgs e)
{
    DropDownList ddl = (DropDownList)sender;
    try
    {
        if (ddl.Items[0].Value != "-1")
            ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }
    catch
    {
        ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:27:18.677

您可以像这样在 Select Index Change 上调用该函数：-

```
<asp:DropDownList ID="ddl" runat="server"  AutoPostBack="true" onchange="javascript:showMessage();" OnSelectedIndexChanged="ddl_SelectedIndexChanged"></asp:DropDownList> 
```

在 DropDown Databound 事件中，您可以写为：

```
 protected void ddl_DataBound(object sender, EventArgs e)
{
    ddl.Items.Insert(0, new ListItem("Select new CaseFile:", "-1"));
} 
```

要获得价值：-

```
var e = document.getElementById("ddl");
var strUser = e.options[e.selectedIndex].value; 
```

如果您选择下拉文本：-

```
var e = document.getElementById("ddl");
var strUser = e.options[e.selectedIndex].text; 
```

# c# - 提升的应用程序需要获取非提升的映射驱动器列表

> ID：12515797
> 
> 赞同：5
> 
> 时间：2012-09-20T15:21:52.677
> 
> 标签：c#, uac, elevated-privileges

我知道以提升的方式运行的 .NET 应用程序看不到用户的映射驱动器。我也知道有一个注册表黑客可以解决这个问题（这涉及重新启动）。

我想为这个问题创建一个不同的解决方案。我们的应用程序必须运行提升，它严重依赖于用户创建的映射驱动器。我想检测用户拥有的映射驱动器，并从提升的应用程序中映射一个类似的驱动器。

所以问题是：如何从提升的应用程序中检测“普通”用户的映射驱动器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:25:49.863

如果映射的驱动器被永久映射（启用“登录时重新连接”复选框），那么您可以在用户的​​注册表配置单元中找到它：

```
HKEY_CURRENT_USER\Network\<drive letter> 
```

该键的值`RemotePath`包含 UNC 路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:01:05.057

我现在有几个解决这个问题的办法。读取注册表没问题，但您不会找到由您的域配置文件或其他临时映射驱动器创建的驱动器。

我测试过的一种可行的解决方案是使用[此](http://www.codeproject.com/Articles/23090/Creating-a-process-with-Medium-Integration-Level-f?msg=4374608#xx4374608xx)代码创建一个未提升的进程。我编写了一个简单的 GetMappedDrives.exe 应用程序，它将映射的驱动器写入文件。然后，提升的应用程序可以读取文件以获取未提升的映射驱动器。

另一种解决方案可能是在提升的应用程序周围使用未提升的包装器。未提升的包装器将首先调用 GetMappedDrives.exe，然后运行提升的应用程序。问题是在重新启动应用程序之前，您不会知道映射驱动器的更改。

如果您碰巧有一个未提升的进程作为您的应用程序套件的一部分运行，则第三种解决方案可能适用。只需从未提升的应用程序中弹出一条网络消息，告诉它调用 GetMappedDrives.exe。

GetMappedDrives c# 代码...

```
 static void Main(string[] args)
    {
        //if (args.GetLength(0) != 1)
        //{
        //    Debug.Assert(false);
        //    Console.WriteLine("You must supply the target file path");
        //    Environment.Exit(1);
        //}
        //String strTargetPath = args[0];
        String strTargetPath = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) + @"\MyCompany\MappedDrives.csv";

        FileStream fs = new FileStream(strTargetPath, FileMode.Create, FileAccess.Write);
        StreamWriter writer = new StreamWriter(fs);

        DriveInfo[] allDrives = DriveInfo.GetDrives();
        foreach (DriveInfo dInfo in allDrives)
        {
            if (dInfo.DriveType == DriveType.Network || dInfo.DriveType == DriveType.Removable)
            {
                String s = String.Format("{0},{1},{2},{3},{4}\n", dInfo.Name, dInfo.VolumeLabel, dInfo.DriveType, dInfo.TotalSize, dInfo.AvailableFreeSpace);
                writer.Write(s);
            }
        }
        writer.Close();
    } 
```

TestGetMappedDrives c++ 代码。在提升的命令提示符下运行它...

```
#include "stdafx.h"
#include "windows.h"

//#ifndef SECURITY_MANDATORY_HIGH_RID
//  #define SECURITY_MANDATORY_UNTRUSTED_RID            (0x00000000L)
//  #define SECURITY_MANDATORY_LOW_RID                  (0x00001000L)
//  #define SECURITY_MANDATORY_MEDIUM_RID               (0x00002000L)
//  #define SECURITY_MANDATORY_HIGH_RID                 (0x00003000L)
//  #define SECURITY_MANDATORY_SYSTEM_RID               (0x00004000L)
//  #define SECURITY_MANDATORY_PROTECTED_PROCESS_RID    (0x00005000L)
//#endif

//#ifndef TokenIntegrityLevel
//  #define TokenIntegrityLevel ((TOKEN_INFORMATION_CLASS)25)
//#endif

//#ifndef TOKEN_MANDATORY_LABEL
//  typedef struct  
//  {
//      SID_AND_ATTRIBUTES Label;
//  } TOKEN_MANDATORY_LABEL;
//#endif

typedef BOOL (WINAPI *defCreateProcessWithTokenW)
(HANDLE,DWORD,LPCWSTR,LPWSTR,DWORD,LPVOID,LPCWSTR,LPSTARTUPINFOW,LPPROCESS_INFORMATION);

// Writes Integration Level of the process with the given ID into pu32_ProcessIL
// returns Win32 API error or 0 if succeeded
DWORD GetProcessIL(DWORD u32_PID, DWORD* pu32_ProcessIL)
{
*pu32_ProcessIL = 0;

HANDLE h_Process   = 0;
HANDLE h_Token     = 0;
DWORD  u32_Size    = 0;
BYTE*  pu8_Count   = 0;
DWORD* pu32_ProcIL = 0;
TOKEN_MANDATORY_LABEL* pk_Label = 0;

h_Process = OpenProcess(PROCESS_QUERY_INFORMATION, FALSE, u32_PID);
if (!h_Process)
    goto _CleanUp;

if (!OpenProcessToken(h_Process, TOKEN_QUERY, &h_Token))
    goto _CleanUp;

if (!GetTokenInformation(h_Token, TokenIntegrityLevel, NULL, 0, &u32_Size) &&
     GetLastError() != ERROR_INSUFFICIENT_BUFFER)
    goto _CleanUp;

pk_Label = (TOKEN_MANDATORY_LABEL*) HeapAlloc(GetProcessHeap(), 0, u32_Size);
if (!pk_Label)
    goto _CleanUp;

if (!GetTokenInformation(h_Token, TokenIntegrityLevel, pk_Label, u32_Size, &u32_Size))
    goto _CleanUp;

pu8_Count = GetSidSubAuthorityCount(pk_Label->Label.Sid);
if (!pu8_Count)
    goto _CleanUp;

pu32_ProcIL = GetSidSubAuthority(pk_Label->Label.Sid, *pu8_Count-1);
if (!pu32_ProcIL)
    goto _CleanUp;

*pu32_ProcessIL = *pu32_ProcIL;
SetLastError(ERROR_SUCCESS);

_CleanUp:
DWORD u32_Error = GetLastError();
if (pk_Label)  HeapFree(GetProcessHeap(), 0, pk_Label);
if (h_Token)   CloseHandle(h_Token);
if (h_Process) CloseHandle(h_Process);
return u32_Error;
}

// Creates a new process u16_Path with the integration level of the Explorer process (MEDIUM IL)
// If you need this function in a service you must replace FindWindow() with another API to find Explorer process
// The parent process of the new process will be svchost.exe if this EXE was run "As Administrator"
// returns Win32 API error or 0 if succeeded
DWORD CreateProcessMediumIL(WCHAR* u16_Path, WCHAR* u16_CmdLine)
{
HANDLE h_Process = 0;
HANDLE h_Token   = 0;
HANDLE h_Token2  = 0;
PROCESS_INFORMATION k_ProcInfo    = {0};
STARTUPINFOW        k_StartupInfo = {0};

BOOL b_UseToken = FALSE;

// Detect Windows Vista, 2008, Windows 7 and higher
if (GetProcAddress(GetModuleHandleA("Kernel32"), "GetProductInfo"))
{
    DWORD u32_CurIL;
    DWORD u32_Err = GetProcessIL(GetCurrentProcessId(), &u32_CurIL);
    if (u32_Err)
        return u32_Err;

    if (u32_CurIL > SECURITY_MANDATORY_MEDIUM_RID)
        b_UseToken = TRUE;
}

// Create the process normally (before Windows Vista or if current process runs with a medium IL)
if (!b_UseToken)
{
    if (!CreateProcessW(u16_Path, u16_CmdLine, 0, 0, FALSE, 0, 0, 0, &k_StartupInfo, &k_ProcInfo))
        return GetLastError();

    CloseHandle(k_ProcInfo.hThread);
    CloseHandle(k_ProcInfo.hProcess); 
    return ERROR_SUCCESS;
}

defCreateProcessWithTokenW f_CreateProcessWithTokenW = 
    (defCreateProcessWithTokenW) GetProcAddress(GetModuleHandleA("Advapi32"), "CreateProcessWithTokenW");

if (!f_CreateProcessWithTokenW) // This will never happen on Vista!
    return ERROR_INVALID_FUNCTION; 

HWND h_Progman = ::GetShellWindow();

DWORD u32_ExplorerPID = 0;      
GetWindowThreadProcessId(h_Progman, &u32_ExplorerPID);

// ATTENTION:
// If UAC is turned OFF all processes run with SECURITY_MANDATORY_HIGH_RID, also Explorer!
// But this does not matter because to start the new process without UAC no elevation is required.
h_Process = OpenProcess(PROCESS_QUERY_INFORMATION, FALSE, u32_ExplorerPID);
if (!h_Process)
    goto _CleanUp;

if (!OpenProcessToken(h_Process, TOKEN_DUPLICATE, &h_Token))
    goto _CleanUp;

if (!DuplicateTokenEx(h_Token, TOKEN_ALL_ACCESS, 0, SecurityImpersonation, TokenPrimary, &h_Token2))
    goto _CleanUp;

if (!f_CreateProcessWithTokenW(h_Token2, 0, u16_Path, u16_CmdLine, 0, 0, 0, &k_StartupInfo, &k_ProcInfo))
    goto _CleanUp;

SetLastError(ERROR_SUCCESS);

_CleanUp:
DWORD u32_Error = GetLastError();
if (h_Token)   CloseHandle(h_Token);
if (h_Token2)  CloseHandle(h_Token2);
if (h_Process) CloseHandle(h_Process);
CloseHandle(k_ProcInfo.hThread);
CloseHandle(k_ProcInfo.hProcess); 
return u32_Error;
}

int _tmain(int argc, _TCHAR* argv[])
{
DWORD u32_Err = CreateProcessMediumIL(L"C:\\src\\bin\\release\\GetMappedDrives.exe", NULL);

printf("CreateProcessMediumIL() exited with error %d\r\n", u32_Err);
Sleep(2000);
return 0;
} 
```

# google-apps-script - 服务错误：SitesApp：XML 文档结构必须在同一实体内开始和结束

> ID：12515799
> 
> 赞同：0
> 
> 时间：2012-09-20T15:22:08.730
> 
> 标签：google-apps-script, google-sites

当我尝试从 Google 站点中删除某些页面时，出现此错误：

*服务错误：SitesApp：XML 文档结构必须在同一个实体内开始和结束。（第 3 行）*

脚本：

```
function deletePages() {
var announcementpage = SitesApp.getPageByUrl('url'); 
var announcements = announcementpage.getAllDescendants(); 

for (var i=0; i<announcements.length; i++){
announcements[i].deletePage();
}
announcementpage.deletePage();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:30:07.507

您应该在问题跟踪器中报告此错误，因为这似乎不是 Apps 脚本的错误。 [问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/entry)

# php - jQuery 新选项需要排序

> ID：12515805
> 
> 赞同：1
> 
> 时间：2012-09-20T15:22:20.773
> 
> 标签：php, jquery

我有两个下拉菜单，因为更改第一个下拉菜单会触发一个 jquery change()，它会从第一个下拉菜单中发布带有公司 ID 的帖子。然后运行一个 sql 查询来获取为该公司工作的人员列表，并用选项填充选择框。这工作正常，我已将 sql 查询设置为 ORDER BY admin_name。但是当 jquery 开始将选项插入下拉列表时，它似乎是按选项值排序（admin_id）。我可以做些什么来保持按 admin_name（选项的文本）排序的选项。下面是负责添加选项的 jQuery 代码：

```
$.post("listSignedBy.php", { company_id: company_id },
                function(data) {
                        alert(data); <-- this shows that the data is sorted correctly by the admin name.
                        var select = $('#signed_by');
                        if(select.prop) {
                                  var options = select.prop('options');
                        }
                        else {
                                  var options = select.attr('options');
                        }
                        $('option', select).remove();

                        var obj = jQuery.parseJSON(data);
                                    options[options.length] = new Option('-- Select Signed By --', '');
                        $.each(obj, function(val, text) {
                                    options[options.length] = new Option(text, val);
                        });
                        select.val(selectedOption);

                }); 
```

感谢您的任何帮助，如果您需要任何进一步的信息来帮助排除故障/修复，请告诉我。

根据要求，示例 JSON 数据：

```
{"19082":"Aaron Smith","19081":"Becky Doe"} 
```

所以在这种情况下，我想要的是：

```
<option value='19082'>Aaron Smith</option>
<option value='19081'>Becky Doe</option> 
```

但是不是按文本排序，而是按值排序，所以我得到：

```
<option value='19081'>Becky Doe</option>
<option value='19082'>Aaron Smith</option> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:05:30.230

对象未排序。它实际上是按照迭代的顺序插入的。

但是，如果返回响应的顺序不是所需的顺序，那么最好的方法是先插入选项并对选项进行排序。见下文，

**演示：http:** [//jsfiddle.net/gGd82/3/](http://jsfiddle.net/gGd82/3/)

```
// convert OPTIONs NodeList to an Array
// - keep in mind that we're using the original OPTION objects
var ary = (function(nl) {
    var a = [];
    for (var i = 0, len = nl.length; i < len; i++) {
      a.push(nl.item(i));
    }
    return a;
})(options);
// sort OPTIONs Array
ary.sort(function(a, b) {
    return a.text < b.text ? -1 : a.text > b.text ? 1 : 0;    
});
// remove all OPTIONs from SELECT (don't worry, the original
// OPTION objects are still referenced in "ary") ;-)
options.length = 0;

// (re)add re-ordered OPTIONs to SELECT
select.html(ary);

select.prepend($('<option />').text('-- Select Signed By --').val('')); 
```

**参考：** [使用 Javascript 对下拉列表进行排序](https://stackoverflow.com/questions/667010/sorting-dropdown-list-using-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:10:28.637

通过创建以下函数，然后在输入所有选项的 .each() 之后引用该函数，我能够使其工作：

```
function Sort(a, b) {    
                return (a.innerHTML > b.innerHTML) ? 1 : -1;
};

$.post("listSignedBy.php", { company_id: company_id },
                function(data) {
                        var select = $('#signed_by');
                        if(select.prop) {
                                  var options = select.prop('options');
                        }
                        else {
                                  var options = select.attr('options');
                        }
                        $('option', select).remove();

                        var obj = jQuery.parseJSON(data);
                                    options[options.length] = new Option('-- Select Signed By --', '');
                        $.each(obj, function(val, text) {
                                    options[options.length] = new Option(text, val);
                        });
                        $('#signed_by option').sort(Sort).appendTo('#signed_by');
                        select.val(selectedOption);

                }); 
```

# highcharts - 你如何让 Highcharts 放大图像内容而不是添加更多细节？

> ID：12515806
> 
> 赞同：1
> 
> 时间：2012-09-20T15:22:21.853
> 
> 标签：highcharts, itext

我正在尝试生成包含由 HighCharts 生成的数据表和图表的 PDF 文档服务器端。我正在使用[highchart-serverside-export](https://github.com/one2team/highcharts-serverside-export)和[iText](http://itextpdf.com/)。

我已经能够生成文档，但图表图像在打印时呈颗粒状。据我了解，iText 在插入图像时默认使用 72dpi。获得更高保真度图像的正确方法是从更大的图像开始，然后使用其中一种缩放功能（例如[`scalePercent()`](http://api.itextpdf.com/itext/com/itextpdf/text/Image.html#scalePercent%28float%29).

通过将更大的高度和宽度参数传递给 Highcharts，我可以轻松生成更大的图表图像。问题是当您增加图表的尺寸时，内容不会按比例放大（例如标签的字体大小）。事实上，您在某些地方可以获得更多细节（例如，更多轴刻度）。这是一个问题的原因是，当您通过 iText 应用缩小时，这些项目变得非常小并且难以阅读。

我查看了[Highcharts API](http://api.highcharts.com/highcharts)，但看不到让 Highcharts 扩大内容而不是添加更多细节的方法。我怎样才能让它工作？

如果我使用的方法完全错误，那么更广泛的问题是如何获得打印分辨率服务器端 Highcharts 图表？我必须使用 iText，但我愿意尝试另一种技术来进行图表渲染。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-04T11:54:00.550

尝试这个

```
exporting: {
    sourceWidth: 1000,
    sourceHeight: 400,
}, 
```

> [链接到 JsFiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/exporting/sourcewidth/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T21:53:49.600

您可以使用该[`exporting.width`](http://api.highcharts.com/highstock#exporting.width)属性指定导出图像的宽度。

这不会增加 div 的大小或添加/删除细节或任何类似的东西，它只会根据指定的宽度缩放生成的 svg，保持纵横比。因此也可以缩放包括文本等在内的所有内容。

```
exporting: {      
    width:2000    // or scale down to 100
} 
```

[放大导出的图像/ pdf | Highcharts & Highstock @ jsFiddle](http://jsfiddle.net/jugal/X32Kw/)

# android - 从视图生成图像

> ID：12515808
> 
> 赞同：1
> 
> 时间：2012-09-20T15:22:24.887
> 
> 标签：android, image, google-maps

我正在使用 Google Maps API 生成包含多个兴趣点的地图。我希望用户能够将其导出为图像 - 基本上是“我去过的地方”图像，他们可以发布或吹嘘或其他任何东西。

我知道我可以[将我的屏幕视图转换为位图](https://stackoverflow.com/questions/7200535/how-to-convert-views-to-bitmap)，但我正在寻找更大的东西，甚至可能是海报大小的东西。有没有办法制作一个可以导出为任意大小图像的视图？

# java - 创建可扩展的 Java 库 (JAR)

> ID：12515809
> 
> 赞同：3
> 
> 时间：2012-09-20T15:22:27.543
> 
> 标签：java, osgi

我希望创建一个可以在其他项目中使用的 Java“库”(JAR)，但我希望我的库是可扩展的。我在追求一些 OSGi 风格的东西，我的库有其他 JAR 可以连接的“扩展点”。我的想法是我的库将具有一组核心方法，这些方法将由它所使用的项目调用，但这些方法的确切实现可能会因项目/上下文而异。

我已经研究过 OSGi（例如 Equinox），但我不确定它是否可以按照我想要的方式使用。它似乎面向独立应用程序，而不是创建库。

实现这一目标的最佳方法是什么？可以以这种方式使用 OSGi，如果不能，是否有框架可以做到这一点？

我希望一切都清楚——我对自己想要什么有一个清晰的想法，但很难说清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:36:09.387

OSGi 很棒，但我认为这不是您所需要的。通过使用 OSGi（-Services），您也可以强制库的用户使用 OSGi 环境。

我认为正如@Peter 所说，您可以通过在特定项目/上下文中简单地扩展库的类来做到这一点。

但如果您想使用 OSGi，有一种简单的方法可以实现这一点。它被称为捆绑片段。通过这种方式，您可以创建一个包并扩展所谓的“主机包”，即您的库，而无需更改原始库。一个流行的用例是您的包中有特定于平台的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:20:16.433

您所命名的 Java 库在 OSGi 上下文中被命名为“Bundle”。

OSGi Bundle 是一个 JAR 文件，在其 MANIFEST.MF 文件中有一些特殊的元信息。现在，每个 OSGi Bundle 都有 Exported-Packages 或 Imported-Packages。

通过 Export-Packages Manifest 标头，您可以显示您正在导出的所有包。您的其他项目可以简单地将它想要使用的包从它们添加到其 Import-Packages.. 这是一个示例：-

捆绑清单：-

```
Export-Packages: com.demo.exported; 
```

捆绑 B 清单：-

```
Import-Packages: com.demo.exported;version=(1.0.0, 2.0.0] 
```

这样，您的包 B（一个不同的项目）可以调用从包 A 导入的包中的类中的方法。现在，您在导入包中看到的版本只是为了显示所有包版本可以接受..您可以拥有两个具有某些接口的两个不同实现的捆绑包，并以两个不同的版本提供此包..两者都将可用..

到现在为止，我在谈论静态数据类型..

您还可以通过声明式服务动态公开您的服务。在这种情况下，您必须定义一个 XML 文件（组件定义），在其中显示您的 Bundle 将公开的所有服务。在另一个包中，您可以再次定义另一个 XML，以显示它需要的所有服务。这些被称为提供的服务和引用的服务。

我认为这将使您对可以做什么有所了解。如果我在解释您的问题的某个地方有误，请指定相同的内容..

*注意：- 当然，OSGi 用于创建独立的捆绑包，可以在其他项目中重复使用。它们为您的项目带来模块化..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:55:24.460

正如其他人所提到的，您不需要 OSGi 或任何框架。您可以使用[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)或[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)等模式来执行此操作。还有其他几种动态修改/扩展功能的模式，但这些似乎最符合您的描述。它们不需要任何框架。

您从像 OSGi 这样的框架中获得的好处是它将为您管理布线。通常，您必须编写一些代码将您的库和扩展粘合在一起 - 使用像 OSGi 这样的框架，这不会以最小的开销自动完成（对于 OSGi，开销是 JAR 清单中的一些条目） .

# makefile - 如何使我的 makefile 更通用？

> ID：12515813
> 
> 赞同：1
> 
> 时间：2012-09-20T15:22:36.033
> 
> 标签：makefile

我有一个makefile，当我需要添加作为项目一部分的另一个文件时，我还需要大量编辑以使其全部工作。我只想编写一次我的makefile并完成它！所以，这是脚本：

```
CC=g++
CFLAGS=-c -Wall

#All paths start in the main directory which has this makefile, object/ and code/.
OBJPATH=object#All compiled .o files need to be placed here.
CODEPATH=code#All .cpp and .hpp header files reside here.

#The names of all the object files that need to be made.
OBJ=$(OBJPATH)/World.o $(OBJPATH)/Block.o $(OBJPATH)/Creep.o $(OBJPATH)/Food.o $(OBJPATH)/Brick.o

all : World.a

$(OBJPATH)/World.o : $(CODEPATH)/World.hpp $(CODEPATH)/World.cpp
    $(CC) $(CFLAGS) $(CODEPATH)/World.cpp
    mv World.o $(OBJPATH)/

$(OBJPATH)/Block.o : $(CODEPATH)/Block.hpp $(CODEPATH)/Block.cpp
    $(CC) $(CFLAGS) $(CODEPATH)/Block.cpp
    mv Block.o $(OBJPATH)/

$(OBJPATH)/Creep.o : $(CODEPATH)/Creep.hpp $(CODEPATH)/Creep.cpp
    $(CC) $(CFLAGS) $(CODEPATH)/Creep.cpp
    mv Creep.o $(OBJPATH)/

$(OBJPATH)/Food.o : $(CODEPATH)/Food.hpp $(CODEPATH)/Food.cpp
    $(CC) $(CFLAGS) $(CODEPATH)/Food.cpp
    mv Food.o $(OBJPATH)/

$(OBJPATH)/Brick.o : $(CODEPATH)/Brick.hpp $(CODEPATH)/Brick.cpp
    $(CC) $(CFLAGS) $(CODEPATH)/Brick.cpp
    mv Brick.o $(OBJPATH)/

#This archive is the final result of the compilation:
World.a : $(OBJ)
    ar rvs World.a $(OBJ)
    cp $(CODEPATH)/World.hpp . #I need both the World.a file and the World.hpp file from code/ for this library to function.

#Delete all object files and the archive:
clean : 
    rm $(OBJPATH)/*.o World.a World.hpp *~ $(CODEPATH)/*~

#Delete all backup files made by Gedit:
pretty :
    rm *~ $(CODEPATH)/*~ 
```

这基本上是编译`.o`文件夹中的所有文件`object/`，然后将它们放入一个名为`World.a`. 然后它只是复制过来`World.hpp`，因为那是库的头文件。我相信很多这样的代码可以被最小化，因此它更具可读性和通用性（不需要我每次创建新类时都对其进行编辑）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:47:26.670

查看一个目标文件的规则：

```
$(OBJPATH)/World.o : $(CODEPATH)/World.hpp $(CODEPATH)/World.cpp
    $(CC) $(CFLAGS) $(CODEPATH)/World.cpp
    mv World.o $(OBJPATH)/ 
```

让我们在我们想要的地方构建对象，而不是使用`mv`：

```
$(OBJPATH)/World.o : $(CODEPATH)/World.hpp $(CODEPATH)/World.cpp
    $(CC) $(CFLAGS) $(CODEPATH)/World.cpp -o $(OBJPATH)/World.o 
```

然后使用自动变量：

```
$(OBJPATH)/World.o : $(CODEPATH)/World.hpp $(CODEPATH)/World.cpp
    $(CC) $(CFLAGS) $(CODEPATH)/World.cpp -o $@ 
```

然后颠倒先决条件的顺序，这样我们就可以使用另一个自动变量：

```
$(OBJPATH)/World.o : $(CODEPATH)/World.cpp $(CODEPATH)/World.hpp
    $(CC) $(CFLAGS) $< -o $@ 
```

现在该命令没有`World`按名称提及，因此我们可以对所有对象使用相同的规则。为了使这个答案简短，我首先将其设为静态模式规则：

```
$(OBJPATH)/World.o : $(OBJPATH)/%.o : $(CODEPATH)/%.cpp $(CODEPATH)/%.hpp
    $(CC) $(CFLAGS) $< -o $@ 
```

然后将它们全部结合起来：

```
OBJ=$(OBJPATH)/World.o $(OBJPATH)/Block.o $(OBJPATH)/Creep.o $(OBJPATH)/Food.o $(OBJPATH)/Brick.o

$(OBJ) : $(OBJPATH)/%.o : $(CODEPATH)/%.cpp $(CODEPATH)/%.hpp
    $(CC) $(CFLAGS) $< -o $@ 
```

现在，当您想要添加一个新文件时，您所要做的就是将它添加到该`OBJ=...`行。您还可以进行一些改进，但这对于一天来说已经足够了。

# php - PHP更改html源代码中的链接地址

> ID：12515815
> 
> 赞同：0
> 
> 时间：2012-09-20T15:22:40.833
> 
> 标签：php, html, replace

在源代码中，我有这样的地址`/images/image.jpg` `js/file.js`，如何添加到该地址的服务器地址将 很难，因为每个文件夹名称都不同`http://server.com/folder/file.jpg`。`str_replace()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:23:29.130

这是使用 preg 的解决方案：

```
$content = '
  <script type="text/javascript" src="/js/script.js"></script>
  blah blah <a href="/images/image1.jpg">image1</a>
  blah blah <a href="/images/image2.jpg">image2</a>
  blah blah <a href="/folder/link1.htm">link1
';

$search = array('#"(/)images/#mi', '#"(/)folder/#mi', '#\"(/)js/#mi');
$replace = "http://site.com$1";

$content = preg_replace($search, $replace, $content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:26:03.703

为您的服务器地址声明一个全局变量，将所有文件夹名称存储到一个数组中，并使用循环遍历它，然后连接字符串。示例：在[此处查看实际操作](http://codepad.org/GbXLMW1l)

```
 $server_addr = "http://server.com";   
  //considering $replace and $folder_names have 1:1 correspondence of search and replace values 
 $orig = array("/images/image.jpg", "js/file.js"); //and so on...
 $replace = array("images", "js"); //and so on...
 $folder_names = array('folder'); //and so on...

 for( $i=0; $i<=count($replace); $i++) {
  foreach ($orig as $o)
   $new_path[] = $server_addr . str_replace($replace[$i], $folder_names[$i], $o);
} 
```

# text - 使用@font-face时，SVG文本边界框因浏览器而异？

> ID：12515819
> 
> 赞同：4
> 
> 时间：2012-09-20T15:22:54.177
> 
> 标签：text, svg, cross-browser, font-face, bounding-box

我试图通过使用 getBBox() 方法获取边界框来根据文本的宽度和高度放置 SVG 文本元素。

如果文本使用网络安全字体，这在不同的浏览器中运行良好，但如果文本使用@font-face 和自定义网络字体设置样式，则在 Firefox (Mac) 和 Safari ( IOS）。它在 Safari (Mac) 和 Chrome (Mac) 中都能完美运行。

如果灰色框与文本的宽度相同，则它可以在该浏览器中使用。

有人知道如何在所有浏览器中获得正确的文本边界框宽度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:54:37.350

浏览器在完成加载/应用之前正在计算边界框`@font-face`，假设您不需要 IE，您可以将 BBox 计算函数包装在一个`document.fonts.ready`承诺中......

```
document.fonts.ready.then(() => const bbox = textEl.getBBox()); 
```

这是一个展示问题和修复的工作示例：

```
const xmlns = "http://www.w3.org/2000/svg";
const correct = document.getElementById("correct");
const incorrect = document.getElementById("incorrect");

visualizeBBox(incorrect);
document.fonts.ready.then(()=> visualizeBBox(correct));

function visualizeBBox(el){
  const bbox = el.getBBox();
  const rect = document.createElementNS(xmlns, "rect");
  for (prop in bbox) rect.setAttribute(prop, bbox[prop]);
  document.querySelector("svg").appendChild(rect);
}
```

```
svg text {
  font-family: 'Diplomata SC', serif;
}

svg rect {
   stroke: red;
   fill: none;
}
```

```
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Diplomata+SC&display=swap" rel="stylesheet">

<svg xmlns="https://www.w3.org/2000/svg" width="600" height="400">
  <text x="0" y="40" font-size="24" id="correct">Correct dimensions</text>
  <text y="100" font-size="24" id="incorrect">Incorrect dimensions</text>
<svg>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:27:08.353

今天我遇到了类似的问题。Duopixel 是正确的，getBBox() 可能会返回可能出乎意料的矩量度，因为尚未加载外部字体，而是使用了一些标准字体。

WebKit 中的问题（在 Chrome 24.0.1312.52 和 26.0.1389.0 canary 中测试）是浏览器延迟外部字体加载，直到它首次在页面上的任何位置有效使用。因此，即使您等待 onreadystatechange 变为“完成”，您也不能保证在调用 getBBox() 时准备好字体指标 - 您可能仍然是第一个渲染带有外部字体样式的文本，将其插入文档并立即调用的人getBBox() 就可以了（我的情况）。

我的解决方法不是直接调用 mySVGInitCode() 而是这样做：

```
$("body").append(
  $("<div/>")
    .attr("class", "force-external-font-loading")
    .attr("style", "font-family: \"xkcd\";visibility:hidden;position:absolute")
    .text("x")
  );
setTimeout(function(){ mySVGInitCode() }, 100); // 100ms is just arbitrary waiting time which should be sufficient for fetching the external font on a fast network, anyone has a better solution? 
```

如您所见，我动态插入绝对定位的样式文本以强制加载外部字体（可见性：隐藏在这里很重要，而不是显示：无）。然后我等待一段时间，然后执行我的 SVG 代码，该代码可能会渲染一些东西，然后立即询问指标。

# java - Objectify - 由祖先过滤的仅键查询的效率如何？

> ID：12515820
> 
> 赞同：1
> 
> 时间：2012-09-20T15:22:55.610
> 
> 标签：java, google-app-engine, objectify, google-cloud-datastore

我正在尝试有效地获取给定父实体的所有子实体。现在唯一的方法是在 objectify 中使用查询，因为它绕过了缓存，所以效率不高。Objectify-4 添加了混合查询，您可以在 Objectify 3.x 中通过发出仅键查询然后对这些键执行批量获取来模仿。

我的问题是使用祖先过滤的仅键查询的效率如何？就像是：

```
ofy.query(Car.class).ancestor(someKey).fetchKeys(); 
```

我不想在这里获取所有“汽车”的所有钥匙，我只想要属于特定父母的“汽车”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:04:07.523

您的查询将获取`Car`作为给定父实体的子实体的所有实体。

[计费文档](https://developers.google.com/appengine/docs/billing)指出，仅键查询花费 1 次读取 + 1 个小操作每个检索到的实体。

# javascript - h4标签后的jquery load()

> ID：12515822
> 
> 赞同：1
> 
> 时间：2012-09-20T15:22:57.250
> 
> 标签：javascript, jquery

如何在特定标签之后的某个时间加载 jqery 的负载？就我而言，我将在 h4 标签之后加载一个表单。那就是它需要去的地方。我的问题是：H4 标签会消失。有没有办法让表单在 H4 标签下加载？

jQuery：

```
$("#loadForm").click(function() {
    $("#entry").load("load.forms.php?option=" + $("#loadForm").val());
}); 
```

标记：

```
<div id="post">
    <div id="entry">
        <h4>My Heading</h4>
        //The Form goes here
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:27:50.050

您可以在标题下添加一个额外的元素，然后在其中加载数据吗？

```
$("#loadForm").click(function() {
    $("#entry div.form").load("load.forms.php?option=" + $("#loadForm").val());
});

<div id="post">
    <div id="entry">
        <h4>My Heading</h4>
        <div class="form"></div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:29:55.403

为什么不使用 InsertAfter

[http://api.jquery.com/insertAfter/](http://api.jquery.com/insertAfter/)

然后你可以选择出h3标签并在它之后插入

# java - java.io.EOFException：由于输入 Spring MVC Jackson 处理器结束，没有要映射到对象的内容

> ID：12515825
> 
> 赞同：2
> 
> 时间：2012-09-20T15:23:13.927
> 
> 标签：java, json, jsp, spring-mvc

我正在使用 Spring MVC 和 JSP 将 JSON 发送到 Spring MVC 控制器。实际上，我的 JSON 适用于一种方法，但不适用于另一种方法，我不明白为什么。代码如下：

JSP - index.jsp

```
<%@page language="java" contentType="text/html"%>
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>  
<script type="text/javascript">
$(function() {  
$('#myForm').submit(function() { 
    var form = $( this ), 
        url = form.attr('action'), 
        userId = form.find('input[name="userId"]').val(),
        dat = JSON.stringify({ "userId" : userId }); 

    $.ajax({ 
        url : url, 
        type : "POST", 
        traditional : true, 
        contentType : "application/json", 
        dataType : "json", 
        data : dat, 
        success : function (response) { 
            alert('success ' + response); 
        }, 
        error : function (response) { 
            alert('error ' + response); 
        }, 
    }); 

    return false; 
   }); 
 }); 
</script>

<script type="text/javascript">
$(function() {  
$('#emailForm').submit(function() { 
    var form = $( this ), 
        url = form.attr('action'), 
        from = form.find('input[name="from"]').val(),
        to = form.find('input[name="to"]').val(),
        body = form.find('input[name="body"]').val(),
        subject = form.find('input[name="subject"]').val(),
        fileName = form.find('input[name="fileName"]').val(),
        location = form.find('input[name="location"]').val(),
        dat = JSON.stringify({ "from" : from,"to" : to,"body" : body,"subject" : subject,"fileName" : fileName,"location" : location }); 

    $.ajax({ 
        url : url, 
        type : "GET", 
        traditional : true, 
        contentType : "application/json", 
        dataType : "json", 
        data : dat, 
        success : function (response) { 
            alert('success ' + response); 
        }, 
        error : function (response) { 
            alert('error ' + response); 
        }, 
    }); 

    return false; 
   }); 
}); 
</script> 
</head>
<body>
<h2>Application</h2>
<form id="myForm" action="/application/history/save" method="POST">
    <input type="text" name="userId" value="JUnit">
    <input type="submit" value="Submit">
</form>
<form id="emailForm" action="/application/emailService/sendEmail" method="GET">
    <input type="text" name="from" value="name@localhost.com">
    <input type="text" name="to" value="user@localhost.com">
    <input type="text" name="body" value="JUnit E-mail">
    <input type="text" name="subject" value="Email">
    <input type="text" name="fileName" value="attachment">
    <input type="text" name="location" value="location">
    <input type="submit" value="Send Email">
</form>
</body>
</html> 
```

第一种形式可以正常工作并在 Spring MVC 中反序列化。该代码的示例是：

```
@Controller
@RequestMapping("/history/*")
public class HistoryController {

@RequestMapping(value = "save", method = RequestMethod.POST, headers = {"content-type=application/json"})
public @ResponseBody UserResponse save(@RequestBody User user) throws Exception {
    UserResponse userResponse = new UserResponse();
    return userResponse;
} 
```

对于第二种形式，我得到了例外：

```
@Controller
@RequestMapping("/emailService/*")
public class EmailController {

@RequestMapping(value = "sendEmail", method = RequestMethod.GET, headers = {"content-type=application/json"})
public void sendEmail(@RequestBody Email email) {
    System.out.println("Email Body:" + " " + email.getBody());
    System.out.println("Email To: " + " " + email.getTo());
}
} 
```

下面是堆栈跟踪：

```
 java.io.EOFException: No content to map to Object due to end of input
org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2022)
org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:1974)
org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1331)
org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:135)
org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:154)
org.springframework.web.bind.annotation.support.HandlerMethodInvoker.readWithMessageConverters(HandlerMethodInvoker.java:633)
org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveRequestBody(HandlerMethodInvoker.java:597)
org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:346)
org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171)
org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

我也尝试过使用 POST，但仍然是同样的问题。我需要使用 JSP 将 JSON 数据发送到 Spring MVC 控制器。

我不确定问题出在哪里。

豆类.xml

```
<context:component-scan base-package="com.web"/>

    <mvc:annotation-driven/>

    <context:annotation-config/> 
```

有任何想法吗？

编辑

```
public class Email implements Serializable {

private String from;
private String to;
private String body;
private String subject;
private String fileName;
private String location;

public Email() {

}

// Getters and setters
} 
```

发送的 JSON 格式为 form2，即 #emailForm。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T17:14:11.560

我遇到了同样的问题，但我使用 curl 来验证服务器端功能。

我的 curl 命令中的初始数据部分是

`-d "{'id':'123456', 'name':'QWERT'}"`

在我将命令更改为

`-d '{"id":"123456", "name":"QWERT"}'`

然后它起作用了。

希望这能给一些提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T21:31:33.263

您应该检查是否设置了“内容长度”标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-04T15:40:11.763

当我尝试使用带有路径参数的 POST 方法时遇到了这个问题，但是我忘了放`'@PathParam("id") Integer id'`，我只是有`'Integer id '`in 参数。

# salesforce - 我们可以将列表视图从沙盒移动到销售人员的生产环境吗？

> ID：12515826
> 
> 赞同：0
> 
> 时间：2012-09-20T15:23:15.173
> 
> 标签：salesforce, apex-code

我是 Salesforce 开发的新手，在将对象和相关事物转移到生产环境时遇到了一个问题。我们可以将列表视图从沙盒移动到生产环境吗？因为我在 Eclipse IDE 中看不到任何选项来选择或在变更集中。可能是我忽略了一些东西。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:57:04.023

这个答案会帮助你[https://stackoverflow.com/a/578763/356042](https://stackoverflow.com/a/578763/356042)

您可以使用[force.com 迁移工具来完成](http://wiki.developerforce.com/page/Migration_Tool)

# ruby - Ruby：我可以在一个语句中多次使用“或”（||）吗？

> ID：12515828
> 
> 赞同：2
> 
> 时间：2012-09-20T15:23:17.323
> 
> 标签：ruby

嗨，我正在尝试使用 Ruby 制作二十一点游戏，并尝试使图片卡的值全部 = 10。可以使用我在下面使用的代码来完成此操作吗？（这一切都发生在我的`Card`课堂上）

```
def value
  if @number == ("jack" || "queen" || "king")
    10
  else
    @number.to_i
  end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T15:27:27.073

你可以，但不是你使用它的方式。您要么需要在每个部分中使用整个布尔表达式：

```
if @number == "jack" || @number == "queen" || @number == "king" 
```

或者您可以通过检查数组的内容来使其更简单：

```
if ["jack", "queen", "king"].include?(@number) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T15:29:12.767

括号将应在其他事物之前评估的事物分组。所以，上面说，评估：

```
 ("jack" || "queen" || "king") 
```

并返回结果。让我们在 irb 中尝试一下：

```
irb(main):004:0> ("jack" || "queen" || "king")
=> "jack" 
```

由于“jack”是真实的，因此无需查看列表的其余部分并返回“jack”。

只要@number 等于“jack”，这将正常工作，但对于其他值则不然。您希望将 @number 与每个值进行比较，直到获得匹配项或用完列表。请参阅@PinneyM 的回答

```
(@number == "jack") || (@number == "queen") ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T15:30:59.763

这是一个有效的 ruby​​ 代码片段，但它并没有像你认为的那样做：它首先评估

```
 ("jack" || "queen" || "king") 
```

它评估为“jack”，因为这是第一个非 false/nil 值。然后它与此进行比较`@card`，因此您的代码等效于

```
def value
  if @number == 'jack'
    10
  else
    @number.to_i
  end
end 
```

你可以依次比较每一个`(@number == 'jack') || (@number == 'queen') ||...`，你可以使用`%w(jack queen king).include?(@number)`或者你可以使用 case 语句：

```
def value
  case @number
  when 'jack', 'queen', 'king'
    10
  else
    @number.to_i
  end
end 
```

# math - 识别相似日志文件的相似性度量

> ID：12515834
> 
> 赞同：1
> 
> 时间：2012-09-20T15:23:42.677
> 
> 标签：math, data-mining, similarity, cosine-similarity

我想实现一个可以准确识别相似日志文件的相似函数。到目前为止，我无法为我的问题找到合适的相似度指标。

我有几台电脑（大约 300 台电脑）生成的日志文件，其中每个文件都包含每天访问的 IP 地址。我想通过每天比较访问的 IP 地址来比较相似度。也就是说，我想比较 PC1 的 day1 和 PC2 的 day1 等等......

例如（假设每个日志文件仅包含 4 天的数据，如果在特定日期没有访问任何内容，则该行留空）：

```
PC1:
day1: 155.69.23.11, 155.34.45.5
day2: 165.34.5.67
day3:             //blank - nothing visited
day4: 155.35.45.55

PC2: 
day1: 155.34.45.5, 155.34.45.6
day2: 165.34.5.67
day3: 155.35.45.55
day4:              //blank - nothing visited 
```

我在 PC1 和 PC2 之间的相似度得分是：

```
Total similarity = similarity(day1) + similarity(day2) + similarity(day3) 
```

对于这个问题，我可以使用 Jaccard 相似度指数（将每天视为一组 IP 地址）。但我不确定这是否是一个合适的指标`or`，在​​为这个问题应用 Jaccard 索引时是否存在任何技术缺陷（或需要满足的条件）。

在查找类似文档时，我看到有人将 Jaccard 索引应用于整个文档，但这不是我想要的。在我的例子中，我想对每一天应用 Jaccard 索引并将它们相加以找到最终的相似度值。这种方法在技术上合理吗？

谢谢你。

`Update:`

`Objective of this study`- 我们有大约 1000 个 IP 地址，我们想要监控每台 PC 由同一个人使用的浏览（浏览这 1000 个 IP 地址）模式。这项研究为期 5 个工作日，我们会记录访问的 IP 地址。如果这些 IP 地址中的任何一个在星期一被访问，它的权重最高，而如果它在星期五被访问，它的权重最低。周二、周三和周四的权重相应地进行了标准化。这就是为什么我对日常相似性更感兴趣的原因。而我的最终目标是找到具有相似浏览模式的人（考虑所有 5 天）。这项研究有点奇怪，但我是为一个项目做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:31:42.883

好吧，在数学上（因此从编程的角度来看），您可以*这样做*。

但是，**结果可能是也可能不是您感兴趣的**。

但我们对此无能为力，因为我们不知道您的目标（您想发现什么 - 访问 Facebook 和 Google 的人？这可能会主导您的结果......）我们也无法洞察您的数据。

使用原始 IP 地址也忽略了某些地址本质上是等效的这一事实。（例如 173.194.70.113 和 173.194.70.139 和 173.194.70.102 都是 google.com，即使在同一个数据中心）。同时，一个地址可以服务数百万个完全不同的网页（例如[http://www.websitelooker.com/ip/81.169.145.160——](http://www.websitelooker.com/ip/81.169.145.160)德国大型主机的一个IP）

所以也许你首先需要找出你真正想要实现的目标。然后进行**特征提取**以捕获您需要的内容，然后定义适当的相似度函数。

# ruby-on-rails - 使用 fb_graph 重定向到 facebook 画布

> ID：12515842
> 
> 赞同：1
> 
> 时间：2012-09-20T15:24:20.747
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, fb-graph

我有一个用 rails gem fb_graph 构建的应用程序，一切都很好，直到我将它与 facebook 画布集成的那一刻，在第一次尝试时，当应用程序请求权限并且用户授予它时，它重定向到画布之外，我的意思是，实际url 它位于应用程序的位置，但是当您已经赋予它在画布内加载的权限时。

为什么会这样？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:34:43.607

您应该提供用于登录和身份验证的代码，但我猜您`redirect_uri`在身份验证对话框中设置了应用程序的直接 URL。如果您希望它重定向到您的画布，请更改`redirect_uri`为：`https://apps.facebook.com/YOUR_APP_NAMESPACE`。[你可以在这里](https://developers.facebook.com/docs/reference/dialogs/oauth/)找到更多信息。

**编辑：**大声笑，我在相关问题部分找到了这个问题，并没有检查日期^^

# asp-classic - HTML：vbScript 中的 For 循环

> ID：12515855
> 
> 赞同：0
> 
> 时间：2012-09-20T15:24:58.780
> 
> 标签：asp-classic, vbscript

我正在尝试连续添加三个标签和三个控件。

## 代码

```
<html>
 <body>
    <table class="shadedTable4" width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse:collapse;">
<tr border="1">
<td>
<input type =checkbox name="ChildCheck" id="ChildCheck" value="1"/>&nbsp;&nbsp;<b>Apply  to all fields</b>&nbsp;&nbsp;</td>
<td><input class="FullTextArea" id="applyfieldscontrol" name="applyfieldscontrol" style="overflow-x:hidden;height:44px;" value="" rows="5" cols="10" >                    
</input>
</td>
</tr>
            <tr>
                <% 
                dim CountFlg
                CountFlg = 0
                for i=0 to XmlNodes.length-1
                    if CountFlg <= 2 then %>
                        <td class="style3" >
                            <span class="style4">
                                <b><%=XmlNodes.item(i).getAttribute("Name")%></b>
                            </span>&nbsp;
                        </td>
                        <TD>
                            <input class="FullTextArea" name="<% i % >" id="<% i %>" style="height:35px;overflow:auto;padding-left:80px;" rows="5"cols="10"> </input>
                        </TD>
                        <% CountFlg=CountFlg+1
                    end if
                next%>
            </tr>       
     </table>
    </body>
 </html> 
```

这里 XmlNodes 将有超过 3 个 xml 节点。

所以我要做的是，连续显示三个，在三个之后，下一行将再有三个标签+控件（TextArea）等等。

是否有更好的逻辑来实现这一点？

请给我一些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:49:34.710

在您的代码中，您的语句“如果 CountFlg <= 2 then”导致第三个节点之后的任何内容不显示。以下代码将在每个第三个节点之后创建一个新表行。它通过简单地查看“i”是否是 3 的倍数来工作。

```
<html>
    <body>
        <table>
            <tr>
                <% For i = 0 To XmlNodes.Length - 1 
                    if (i / 3) = Int(i / 3) Then %> 
            </tr>
            <tr>
                    <% End If %>
                <td class="style3" >
                    <span class="style4">
                        <b><%= XmlNodes.item(i).getAttribute("Name") %></b>
                    </span>&nbsp;
                </td>
                <td>
                    <input class="FullTextArea" style="height:35px;overflow:auto;padding-left:80px;" rows="5"cols="10" />
                </td>
                <% Next %>
            </tr>
        </table>
    </body>
</html> 
```

注意。您的示例中还缺少 TABLE 标记，正如其他人所提到的，您在 BODY 标记之前关闭了 HTML。

# java - java - 如何检查泛型类型是否在java中实现了特定类型的泛型接口？

> ID：12515861
> 
> 赞同：34
> 
> 时间：2012-09-20T15:25:19.143
> 
> 标签：java, generics, collections

> **可能重复：**
> [运行时局部变量的泛型类型](https://stackoverflow.com/questions/11798951/generic-type-of-local-variable-at-runtime)

我是 Java 泛型的新手，来自 .NET 世界，我习惯于编写这样的方法：

```
public void genericMethod<T>(T genericObject)
{
    if (genericObject is IList<String>)
    {
        //Do something...
    }            
} 
```

该方法接受泛型类型的对象，并检查该对象是否实现了泛型接口的*特定*`IList<>`版本，在本例中为`IList<String>`。

现在，在 Java 中，我可以做到这一点：

```
public <T> void genericMethod(T genericObject)
{
    if (genericObject instanceof Set<?>)
    {
       //Do something...
    }
} 
```

**但**

Java*不让*我做`if (genericObject instanceof Set<String>)`

据我所知，由于类型擦除，通常在 Java 中，这将由类对象处理，我们将执行以下操作：

```
public <T> void genericMethod(T genericObject)
{
    Class<OurTestingType> testClass = OurTestingType.class;
    if (genericObject.getClass() == testClass)
    {
       //Do something...
    }
} 
```

但由于我要检查的类型是通用接口，所以你不能这样做：

`Class<Set<String>> testClass = Set<String>.class`

那么，如何在 Java 中检查泛型对象是否实现了特定类型的`Set<String>`?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-20T15:31:28.333

Java 实现了擦除，因此无法在运行时判断它是否`genericObject`是一个实例`Set<String>`。保证这一点的唯一方法是在泛型上使用边界，或者检查集合中的所有元素。

## 编译时通用边界

使用边界检查，将在编译时检查：

```
public <T extends SomeInterface> void genericMethod(Set<? extends T> tSet) {
    // Do something with tSet here
} 
```

## 爪哇 8

我们可以使用 Java 8 中的流在一行中本地完成此操作：

```
public <T> void genericMethod(T t) {
    if (t instanceof Set<?>) {
        Set<?> set = (Set<?>) t;
        if (set.stream().allMatch(String.class:isInstance)) {
            Set<String> strs = (Set<String>) set;
            // Do something with strs here
        }
    }
} 
```

## Java 7 及更早版本

对于 Java 7 及更早版本，我们需要使用迭代和类型检查：

```
public <T> void genericMethod(T t) {
    Set<String> strs = new HashSet<String>();
    Set<?> tAsSet;
    if (t instanceof Set<?>) {
        tAsSet = (Set<?>) t;
        for (Object obj : tAsSet) {
            if (obj instanceof String) {
                strs.add((String) obj);
            }
        }
        // Do something with strs here
    } else {
        // Throw an exception or log a warning or something.
    }
} 
```

## 番石榴

根据下面的 Mark Peters 的评论，如果您可以将 Guava 添加到您的项目中，Guava 也有为您执行此操作的方法：

```
public <T> void genericMethod(T t) {
    if (t instanceof Set<?>) {
        Set<?> set = (Set<?>) t;
        if (Iterables.all(set, Predicates.instanceOf(String.class))) {
            Set<String> strs = (Set<String>) set;
            // Do something with strs here
        }
    }
} 
```

声明，`Iterables.all(set, Predicates.instanceOf(String.class))`本质上与`set instanceof Set<String>`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-20T16:39:52.087

遗憾的是，您在 Java 中没有该选项。在 Java 中， a和 a之间没有**运行时**差异。是**编译器**确保您永远不会使用. 即使编译器的强制执行并不严格，所以你可以“合法地”用未经检查的强制转换来做这种可憎的事情......`List<String>``List<Integer>`**`add()``Integer``List<String>`**

 **总而言之，对于（几乎）任何关于运行时类型识别的问题，您必须`List<String>`了解它的实际情况：只是一个原始的`List`. 这称为*类型擦除*。

也就是说，没有什么能阻止您检查 a 的内容以`List`了解它们的类型：

```
public boolean isListOf(List<?> list, Class<?> c) {
    for (Object o : list) {
        if (!c.isInstance(o)) return false;
    }

    return true;
} 
```

要使用此方法：

```
 // ...
    if (genericObject instanceof List<?>) {
        if (isListOf((List<?>) genericObject, String.class)) {
            @SuppressWarnings("unchecked")
            List<String> strings = (List<String>) genericObject;
        }
    } 
```

An interesting observation: if the `list` is empty, the method returns true for all given types. Actually there is no runtime difference between an empty `List<String>` and an empty `List<Integer>` *whatsoever*.**

# c++ - atomic_compare_exchange vs mutex

> ID：12515866
> 
> 赞同：7
> 
> 时间：2012-09-20T15:25:31.557
> 
> 标签：c++, multithreading, mutex, atomic, lock-free

用这样的块替换互斥锁有什么意义

```
void stack_push(stack* s, node* n)
{
    node* head;
    do
    {
        head = s->head;
        n->next = head;
    }
    while ( ! atomic_compare_exchange(s->head, head, n));
} 
```

无法理解用这种原子交换替换互斥锁可以获得什么好处？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T15:42:00.463

有很多优点；

1.  它*要*快得多（在 Windows 上，比如 10 倍或 100 倍 - 在 Linux 上没那么多，比如快 10%）
2.  它的扩展性要*好得多*（尽管仍然不够——只有大约 100 个逻辑核心）
3.  它*更酷*，你看起来更聪明更有能力
4.  在不需要等待或休眠的地方，此代码可用于禁止等待或休眠的地方，例如中断处理程序、Windows 的某些部分 (DISPATCH_LEVEL) 和 Linux 内核等

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T15:37:52.730

它通常比互斥锁快。话虽如此，您不能简单地用 CAS 替换所有互斥锁。单个 CAS 将在多个线程之间安全地交换一个引用。

如果您有一个复合函数，其中一个写入依赖于另一个读取（例如），您将需要一个互斥锁来确保原子性。

# jquery - 是否可以使用 jquery 制作如下所述的页脚

> ID：12515870
> 
> 赞同：0
> 
> 时间：2012-09-20T15:25:57.600
> 
> 标签：jquery, jquery-ui, slideshow, footer

对不起标题，但我找不到任何解决方案。在[这个网站](http://bireysel.bilgeadam.com/bireysel/#)的页脚有一个漂亮的参考公司（谷歌、思科、微软等）的动画。我想使用这样的幻灯片，但我根本不知道 flash.. 首先，那个工具叫什么，jquery 是否可以（或者是否有任何现成的工具）.. 谢谢

**编辑：**我需要它们自动制作动画，不需要任何用户交互

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:28:29.173

那里有很多选择，看看这个类似 iTunes 的轮播。

[http://www.bkosborne.com/jquery-feature-carousel](http://www.bkosborne.com/jquery-feature-carousel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:37:08.083

您可以在 Flash 中构建它，就像您提供的示例一样，但要吸引更多用户，您应该改用 javascript。

为了给它提供每张幻灯片向左或向右倾斜的 3D 效果，您可以尝试在 CSS3 中使用[3d 变换。](http://desandro.github.com/3dtransforms/docs/perspective.html)

编辑：如果你有 8 美元，这里[有一个插件](http://codecanyon.net/item/icarousel/2527180?ref=themespotters&ref=themespotters&clickthrough_id=83645585&redirect_back=true)可以为你做这一切。

# mysql - 如何仅在 mysql 中获取最小组行？

> ID：12515874
> 
> 赞同：0
> 
> 时间：2012-09-20T15:26:06.350
> 
> 标签：mysql, sql, group-by

示例 1：

表test1的一部分：

```
name|mygroup| scale
----------------
ben | 1   | 1
tom | 1   | 2
jim | 2   | 1
tim | 2   | 2
.. 
```

输出应该是：

```
name|mygroup| scale
----------------
ben | 1   | 1
jim | 2   | 1 
```

我尝试：

```
select name,mygroup,min(scale) from test1 group by mygroup; 
```

但它没有给出正确的输出。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:29:27.363

```
SELECT t.name, t.mygroup, t.scale
    FROM test1 t
        INNER JOIN (SELECT mygroup, MIN(scale) AS MinScale
                        FROM test1
                        GROUP BY mygroup) q
            ON t.mygroup = q.mygroup
                AND t.scale = q.MinScale 
```

# internet-explorer - XSLT 或查看器应用程序以查看“Internet Explorer 网络检查器”xml 导出

> ID：12515875
> 
> 赞同：5
> 
> 时间：2012-09-20T15:26:10.877
> 
> 标签：internet-explorer, internet-explorer-9, ie-developer-tools

使用 IE9 开发人员工具栏的网络选项卡，我捕获了一些围绕我的站点的导航，然后将这些日志导出到 XML 文件（默认为 NetworkData.xml）。

在该 XML 中，它的创建者标记设置为“Internet Explorer Network Inspector”。

是否有可以帮助显示该 XML 的 XSLT 或可以提供帮助的某些查看器应用程序？

**更新：** 根据未来的研究，NetworkData.xml 文件是 HAR 文件的 xml 表示。有不少在线 HAR 查看器。仍然找不到 XML-HAR 的查看器，也没有转换器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T11:42:25.300

如此处所示[我可以使用哪些工具来分析 Internet Explorer 的网络捕获日志？](https://stackoverflow.com/questions/8349945/what-tools-can-i-use-to-analyze-internet-explorers-network-capture-logs)提琴手似乎做到了。安装 Fiddler 后，我发现不再需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T17:02:41.053

这是一个 XLST，不完整，但你会明白的。

编辑 NetworkData.xml 并添加

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="NDTable.xsl" ?> 
```

一开始

将以下 XML 保存在 NDTable.xsl

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>
    <xsl:template match="/">
        <html>
            <xsl:apply-templates/>
        </html>

    </xsl:template>

    <xsl:template match="log">
        <head>
            <Title>
                <xsl:value-of select="creator/name"/>
            </Title>
        </head>
        <body>
            <h1>
                <xsl:value-of select="creator/name" />
            </h1>
            <P>Started at <xsl:value-of select="pages/page/startedDateTime" />
            </P>
            <table border="1">
                <tr>
                    <th>Request</th>
                    <th>Response</th>
                </tr>
                <xsl:apply-templates select="entries" />
            </table>
        </body>

    </xsl:template>

    <xsl:template match="entry">
        <tr> 
            <td>
                <xsl:apply-templates select="request" />
            </td>
            <td valig="top">
                <xsl:apply-templates select="response" />
            </td>

        </tr>

    </xsl:template>

    <xsl:template match="request">
        <table>
            <tr>
                <td valign="top">
                    <xsl:value-of select="method" />
                </td>
                <td>
                    <xsl:value-of select="url" />
                    <table>
                        <tr>
                            <th>Headers</th>
                        </tr>
                        <tr>
                            <td> </td>
                            <td>
                                <xsl:apply-templates select="headers/header[not(name='Cookie')]" />
                            </td>
                        </tr>
                    </table>
                    <table>
                        <tr>
                            <th>Cookies</th>
                        </tr>

                        <xsl:apply-templates select="cookies" />
                    </table>
                </td>
            </tr>
        </table>
    </xsl:template> 
    <xsl:template match="response">
        <table>
            <td>
                <xsl:value-of select="status" /> <span>.</span><xsl:value-of select="statusText" />
                <br/>
                    <table>
                        <tr>
                            <th>Headers</th>
                        </tr>
                        <tr>
                            <td> </td>
                            <td>
                                <xsl:apply-templates select="headers/header" />
                            </td>
                        </tr>
                    </table>
<div style='background-color: #C0C0C0'> <xsl:value-of select="content/text" /> </div>                   
            </td>
        </table>
    </xsl:template> 
    <xsl:template match="header">
        <xsl:value-of select="name" /> : <xsl:value-of select="value" />
        <br/>
    </xsl:template> 
    <xsl:template match="cookie">
        <tr>
            <td> </td>
            <td valign="top">
                <xsl:value-of select="name" />
            </td>
            <td>
                <xsl:value-of select="value" />
            </td>
        </tr>
    </xsl:template> 
</xsl:stylesheet> 
```

# javascript - JavaScript 中的 HTML 错误

> ID：12515880
> 
> 赞同：0
> 
> 时间：2012-09-20T15:26:23.953
> 
> 标签：javascript, html

我正在尝试将 html 放入 javascript 代码中：

```
 document.write("<a class=\"twitter-timeline\"href=\"https://twitter.com/test\"          data-widget-    id=\"248798161076883457\">Tweets by @test</a>
             <script>!function(d,s,id){
              var js,fjs=d.getElementsByTagName(s)[0];
             if(!d.getElementById(id))
              {js=d.createElement(s);
          js.id=id;js.src=\"//platform.twitter.com/widgets.js\";
              fjs.parentNode.insertBefore(js,fjs);
        }
       }(document,\"script\",\"twitter-wjs\");
       </script>
        "); 
```

}

错误信息是：Unexpected token ILLEGAL 怎么了？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:30:01.657

javascript 中的字符串在没有正确格式的情况下不得超过多行：

```
 document.write("<a class=\"twitter-timeline\"href=\"https://twitter.com  /test\"          data-widget-    id=\"248798161076883457\">Tweets by @test</a>\
         <script>!function(d,s,id){\
          var js,fjs=d.getElementsByTagName(s)[0];\
         if(!d.getElementById(id))\
          {js=d.createElement(s);\
      js.id=id;js.src=\"//platform.twitter.com/widgets.js\";\
          fjs.parentNode.insertBefore(js,fjs);\
    }\
   }(document,\"script\",\"twitter-wjs\");\
   </script>\
    "); 
```

一般来说：

```
string = "Multiple\
Lines\
supported." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:30:57.320

```
document.write("<a class='twitter-timeline' href='https://twitter.com/test'  data-widget- id='248798161076883457'>Tweets by @test</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');</script>"); ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

您可以在脚本中使用单引号而不是双引号！它使阅读更容易，而且效果很好

# c++ - 推导非类型模板参数 Unsigned Int / size_t

> ID：12515881
> 
> 赞同：4
> 
> 时间：2012-09-20T15:26:28.457
> 
> 标签：c++, templates

我试图推断一个非类型模板参数。

```
#include <iostream>

template <unsigned int S>
void getsize(unsigned int s) { std::cout << s << std::endl; }

int main()
{
  getsize(4U); 
// Id like to do this without explicitly stating getsize<4U>(4);
// or even getsize<4U>(); 
// Is this possible?
} 
```

但我收到错误：

```
deduce_szie_t.cpp: In function 'int main()':
deduce_szie_t.cpp:9:15: error: no matching function for call to 'getsize(unsigned int)'
deduce_szie_t.cpp:9:15: note: candidate is:
deduce_szie_t.cpp:4:6: note: template<unsigned int <anonymous> > void getsize(unsigned int)
deduce_szie_t.cpp:4:6: note:   template argument deduction/substitution failed:
deduce_szie_t.cpp:9:15: note:   couldn't deduce template parameter '<anonymous>' 
```

是否可以推断出无符号整数，而不必显式声明模板参数？

我想让它干净如：getsize(4U) 我想避免写：getsize<4U>()

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:49:20.847

可以从函数参数中推断出非类型模板参数，但不是以您想要的方式。它只能从函数参数的类型推断，而不是从值推断。

例如：

```
template <unsigned int S>
void getsize(int (*s)[S]) {
    std::cout << "pointer value: " << (void*)s << std::endl;
    std::cout << "deduced size: " << S << std::endl;
}

getsize(static_cast<int (*)[4]>(0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:34:40.313

以下代码`4`最少提及该数字：

```
template <unsigned int N>
void getsize()
{
    std::cout << N << std::endl;
}

int main()
{
    getsize<4>();
} 
```

你不可能提到这个数字少于一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:34:44.027

这样做有问题（我*认为*这就是你想要的？？）

```
#include <iostream>

template<typename Ty>
void getsize(Ty t) { std::cout << t << std::endl; };

int main(int argc, char *argv[])
{
    getsize(4U);
    return 0;
} 
```

# python - 使用流处理程序记录消息在控制台中显示为红色

> ID：12515890
> 
> 赞同：5
> 
> 时间：2012-09-20T15:26:54.297
> 
> 标签：python

我已经使用以下代码设置了一个记录器

```
def setup_logging():
    import logging
    import logging.handlers
    import os
    #from time import gmtime, strftime
    #import logging.handlers

    logger = logging.getLogger('apt')
    logger.setLevel(logging.DEBUG)

    # create file handler
    fh = logging.handlers.RotatingFileHandler(os.path.join('..','logs','apt.log'), maxBytes=1000000, backupCount=5)
    fh.setLevel(logging.DEBUG)

    # create console handler
    ch = logging.StreamHandler()
    ch.setLevel(logging.DEBUG)

    # create formatter and add it to the handlers
    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
    ch.setFormatter(formatter)
    fh.setFormatter(formatter)

    # add the handlers to logger
    logger.addHandler(ch)
    logger.addHandler(fh) 
```

将日志消息打印到文件和控制台（这就是我所追求的）。唯一的问题是控制台消息是红色的。这让人分心，因为红色使一切看起来都像是错误（当它只是信息时）。如何更改它以使控制台消息具有不同的颜色？

理想情况下，黑色表示调试和信息，红色表示警告及以上。

我正在使用 Eclipse 和 PyDev。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T15:33:19.110

默认情况下，PyDev 控制台以红色突出显示到标准错误的消息。Python 的 logging.DEBUG 会将消息发送到 stderr。如果您希望更改此行为，请参阅这篇文章：[Logging、StreamHandler 和标准流](https://stackoverflow.com/questions/1383254/logging-streamhandler-and-standard-streams)

To change the colors in PyDev, see here: [http://pydev.org/manual_adv_interactive_console.html](http://pydev.org/manual_adv_interactive_console.html)

# vba - 提示用户从获取外部数据中选择文本文件

> ID：12515896
> 
> 赞同：0
> 
> 时间：2012-09-20T15:27:18.383
> 
> 标签：vba, excel

我有一个宏，它使用获取外部数据选项来导入文本文件。有没有一种方法可以提示用户在此代码中选择一个文件，或者我应该采取不同的方法？我喜欢这种方法，因为我可以在导入期间排除一些列，但我对其他选项持开放态度。

```
With Sheets(1).QueryTables.Add(Connection:= _
        "TEXT;C:\Program Files\SubDirectory\ThisIsMyFile.txt" _
        , Destination:=Range("$A$1"))
        .Name = "ThisIsMyFile"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 437
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = True
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = Array(9, 9, 9, 2, 9, 2, 9, 9, 9, 2, 9, 9, 9, 2, 2, 9, 2, 9, 2, 9, 2, _
        9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 9, 9, 2, 9, 2, 9, 2, 9, 2 _
        , 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 9, 9, 9, 9, 2, 9, 9, 9, 2, 9, 2, 9, 9, 9, _
        2, 9, 9, 2, 2, 2)
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With 
```

提前致谢！

谢谢您的帮助。我让这段代码工作：

```
 Dim FileFilter As String
  Dim Filename As String
  Dim SrcWkb As Workbook
  MsgBox "Select file"
  FileFilter = "Text Files (*.txt), *.txt"
  Filename = Application.GetOpenFilename(FileFilter, 1)

    If Filename = "False" Then Exit Sub
With Sheets(1).QueryTables.Add(Connection:= _
        "TEXT;" & Filename, Destination:=Range("$A$1"))
        .Name = Filename
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 437
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = True
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = Array(9, 9, 9, 2, 9, 2, 9, 9, 9, 2, 9, 9, 9, 2, 2, 9, 2, 9, 2, 9, 2, _
        9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 9, 9, 2, 9, 2, 9, 2, 9, 2 _
        , 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 9, 9, 9, 9, 2, 9, 9, 9, 2, 9, 2, 9, 9, 9, _
        2, 9, 9, 2, 2, 2)
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:38:11.373

像这样的东西应该工作：

```
Sub FileName()

fileToOpen = Application.GetOpenFilename("Text Files (*.txt), *.txt")

If fileToOpen <> False Then QueryTable fileToOpen

End Sub

Sub QueryTable(file As String)

With Sheets(1).QueryTables.Add(Connection:= _
        "TEXT;" & file, Destination:=Range("$A$1"))
        .Name = "ThisIsMyFile"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 437
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = True
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = Array(9, 9, 9, 2, 9, 2, 9, 9, 9, 2, 9, 9, 9, 2, 2, 9, 2, 9, 2, 9, 2, _
        9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 9, 9, 2, 9, 2, 9, 2, 9, 2 _
        , 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 2, 9, 9, 9, 9, 9, 2, 9, 9, 9, 2, 9, 2, 9, 9, 9, _
        2, 9, 9, 2, 2, 2)
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

# vba - Excel：检查值并从单元格中复制颜色

> ID：12515900
> 
> 赞同：0
> 
> 时间：2012-09-20T15:27:35.103
> 
> 标签：vba, excel, copy-paste

我觉得以前有人问过这个问题，但我只是不太了解解决方案。我想知道如何检查某些单元格的值并将匹配的颜色复制到另一个单元格。我有一个看起来像这样的工作表：

```
 A        B           C       D               E               F
 1 Type     Location    Cell    PairType        PairLocation    PairCell
 2 EX3      1           A1      EX2             1               F3
 3 EX4      1           B2      EX3             1               G3
 4 EX2      1           F3      EX3             1               A1 
```

A、B 和 C 中的某些值具有不同的颜色以将它们标记为特殊（背景颜色，而不是字体颜色）。我需要从 D 列中获取值，在 A 中找到匹配项，然后如果/当我找到匹配项时，将背景颜色从 A、B 和 C 复制到 D、E 和 F 的背景。如果我找到 D到 A 匹配（如第 2 行 D 列到第 4 行 A 列）然后 E/F 值也将匹配 B/C 值（如上所示），所以我不必担心覆盖任何值。我对 Excel-ese 不是很流利，所以当我读到这样的解决方案时：

```
Function BGCol(MRow As Integer, MCol As Integer)  As Integer
   BGCol = Cells(MRow, MCol).Interior.ColorIndex  
End Function 
```

我不太确定自己在做什么。任何人都可以提供解决方案和解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:13:51.060

```
Sub ReColour()

Dim rStart As Range, lRow1 As Long, lRow2 As Long, lRows As Long, sFind As String

Set rStart = Sheet1.Range("A1")
lRows = rStart.Offset(65000, 0).End(xlUp).Row - rStart.Row

For lRow1 = 1 To lRows
    sFind = rStart.Offset(lRow1, 3).Value
    For lRow2 = 1 To lRows
        If rStart.Offset(lRow2, 0).Value = sFind Then
            rStart.Offset(lRow1, 3).Interior.ColorIndex = rStart.Offset(lRow2, 0).Interior.ColorIndex
            rStart.Offset(lRow1, 4).Interior.ColorIndex = rStart.Offset(lRow2, 1).Interior.ColorIndex
            rStart.Offset(lRow1, 5).Interior.ColorIndex = rStart.Offset(lRow2, 2).Interior.ColorIndex
            Exit For
        End If
    Next
Next
End Sub 
```

抱歉，现在没时间解释，但我想这样就可以了。你真的应该使用比魔法列号 3、4、5 等更好的东西，但这是一个快速的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:17:12.840

这应该有效。它可以提高效率，但它肯定会让你开始。

将它放在标准模块中并运行代码（F5 或 F8 单步执行）。如果您需要更多指导，请告诉我。

```
Sub CheckColors()

Dim rng As Range

For Each cel In Range("D2:D" & Range("D" & Rows.Count).End(xlUp).Row)

    Set rng = Columns(1).Find(cel, lookat:=xlWhole)

    If Not rng Is Nothing Then

        cel.Interior.ColorIndex = rng.Interior.ColorIndex
        cel.Offset(, 1).InteriorColorIndex = rng.Offset(, 1).Interior.ColorIndex
        cel.Offset(, 2).InteriorColorIndex = rng.Offset(, 2).Interior.ColorIndex

    End If

Next

End Sub 
```

# php - 在 PHP 中提取 HTML 表单 TextArea

> ID：12515901
> 
> 赞同：0
> 
> 时间：2012-09-20T15:27:49.363
> 
> 标签：php, html, forms

需要帮助来理解为什么 HTML5 表单中的 textarea（下面的“消息”）字段没有从 PHP 代码（用于创建电子邮件）中获取。

HTML 代码（法语）：

```
 <form method="post" action="contact.php">
                <fieldset>

                        <p class="tight" style="font-size: 10pt; text-align: center;" >Message pour des demandes de renseignements d&apos;ordre <br /> g&eacute;n&eacute;ral seulement. Veuillez utiliser demande formulaire situ&eacute; <br /> sur la page Service pour commencer.</p>

                        <label><span>Nom</span>
                        <input class="inputcontact" name="name" type="text" /></label>
                        <label><span>Courrier <br />&Eacute;lectronique</span>
                        <input class="inputcontact" name="email" type="text" /></label>
                        <label><span>T&eacute;l&eacute;phone</span>
                        <input class="inputcontact" name="telephone" type="text" /></label><br />
                        <label class="labelleft" for="message"> MESSAGE
                        <textarea name="message" rows="8" cols="45"> </textarea></label>

                </fieldset>
                <input class="submit" type="submit" value="ENVOYER" />
</form> 
```

PHP 代码（contact.php）：

```
 <?php
/* Set e-mail recipient */
$myemail  = "xxxxxx@gmail.com";

/* Check all form inputs using check_input function */
$yourname = check_input($_POST['name']);
$email    = check_input($_POST['email']);
$telephone  = check_input($_POST['telephone']);
$messaage  = check_input($_POST["message"]);

/* If e-mail is not valid show error message */
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email))
{
    show_error("E-mail address not valid");
}

/* Let's prepare the message for the e-mail */
$subject ="Comment received from website";
$content = "Hello!

The contact form from the website has been submitted by:

Name: $yourname
E-mail: $email
Telephone: $telephone
Message:$message

";

/* Send the message using mail() function */
mail($myemail, $subject, $content);

/* Redirect visitor to the thank you page */
header('Location: thanks.html');
exit();

/* Functions we used */
function check_input($data, $problem='')
{
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    if ($problem && strlen($data) == 0)
    {
        show_error($problem);
    }
    return $data;
}

function show_error($myError)
{
?>
    <html>
    <body>

    <b>Please correct the following error:</b><br />
    <?php echo $myError; ?>

    </body>
    </html>
<?php
exit();
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:34:19.080

```
$messaage  = check_input($_POST["message"]);

Message:$message. 
```

没问题还是拼写错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:38:03.893

您在第 9 行的变量名中有错字`$message`（您写了`$messaage`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:46:40.047

我建议您使用`filter_var($email, FILTER_VALIDATE_EMAIL);`而不是您的正则表达式。我认为这会更具体

# java - 在 java 中将 4 个浮点颜色转换为一个浮点数，然后在 openGL ES 2.0 着色器中再次返回

> ID：12515909
> 
> 赞同：2
> 
> 时间：2012-09-20T15:28:13.530
> 
> 标签：java, opengl-es-2.0, bit-manipulation, shader

我试图为进入着色器的每个顶点发送一种颜色，但只有一个浮点值。我认为您不能将 4 个字节作为每个顶点的属性发送，这很奇怪，但感觉不可能我将尝试将 RGBA 打包在一个浮点变量中，所以这是我的代码：

Jave 代码（将值打包在一个浮点数中）：

```
private float fourfColor2One(float r, float g, float b, float a)
{
    long temp = (byte) (r * 255);
    float res = temp << 24;

    temp = (byte) (g * 255);
    res += temp << 16;

    temp = (byte) (b * 255);
    res += temp << 8;

    temp = (byte) (a * 255);
    res += temp;

    return res;
} 
```

着色器代码（打包）：顶点着色器：

```
attribute vec4 vPosition;
attribute float fColor;
uniform vec2 vCamPos;
uniform float fZoom;
uniform mat4 m_projectionMat;
varying float v_Color;
void main() {
  vec4 position = vec4(vPosition.x - vCamPos.x - 16., vPosition.y - vCamPos.y - ((32\. / "+ GraphicsRenderer.mScnR +") / 2.), -1., 1.);
  position = position * m_projectionMat;
  gl_Position = vec4(position.xy * fZoom, -1, 1);
  v_Color = fColor;
} 
```

片段着色器：

```
precision mediump float;
varying float v_Color;
void main() {
   uint temp = uint(v_Color);
   float r = temp & 0xf000;
   float g = temp & 0x0f00;
   float b = temp & 0x00f0;
   float a = temp & 0x000f;
    gl_FragColor = vec4(r, g, b, a);
} 
```

所以我有三个问题：

1.  这个概念甚至可能吗？

2.  转换不正确，对吧？我假设当我从浮点数转换为浮点数时，转换不会保留位的顺序，而是保留它在该数据类型中表示的值，对吗？

3.  现在，当我运行时，着色器返回 -1：glGetAttribLocation(mShaderHandle, "fColor"); 但是这一行之前可以使用： glGetAttribLocation(mShaderHandle, "vPosition");

那么，有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:38:47.140

我会转换

```
private static int fourfColor2One(float r, float g, float b, float a) {
    return (Math.round(r * 255) << 24) + 
           (Math.round(g * 255) << 16) +
           (Math.round(b * 255) << 8) +
           Math.round(a * 255);
} 
```

这假设您的“着色器”中的比例为 0.0 到 1.0，您假设比例为 0.0 到 255.0

* * *

一些“伪代码”来扭转这一点

```
float r = (temp & 0xf000)/255.0;
float g = (temp & 0x0f00)/255.0;
float b = (temp & 0x00f0)/255.0;
float a = (temp & 0x000f)/255.0; 
```

# html - 表格内的css水平滚动

> ID：12515913
> 
> 赞同：0
> 
> 时间：2012-09-20T15:28:27.083
> 
> 标签：html, css

我想构建一个具有水平滚动的时间线。

我有一个包装器 DIV，里面有几个月。每个月都是一个 DIV 内联块。这有效：

```
<div class="wrap">
    <div class="month">Jan 2013</div>
    <div class="month">Feb 2013</div>
    ...
</div> 
```

这几乎可以工作，但是因为我的客户站点使用表格进行布局，滚动条不起作用。这失败了：

```
<table><tr><td>

<div class="wrap">
    <div class="month">Jan 2013</div>
    <div class="month">Feb 2013</div>
    ...
</div>

</td></tr></table> 
```

这是一个 jsfiddle 来说明我的意思：http: [//jsfiddle.net/fhL9u/2/](http://jsfiddle.net/fhL9u/2/)

注意：顶部时间线示例在您调整浏览器大小时起作用。它是页面（或包含元素）的 100% 宽度。

如何使第二个时间线正确溢出？它**必须**占据屏幕的剩余宽度（没有*：100px* hacks），并且如果可能，仅在月份溢出时显示滚动条。

这是一个内部应用程序，因此如果需要，我可以告诉人们使用 Firefox 或 Chrome。这意味着我可以使用高级 CSS3 东西或特定于浏览器（ -webkit 或 -moz ）的东西。我更喜欢它与 IE8 兼容（只是出于我自己的好奇心）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:41:11.527

如果您可以修复该`width`文本（以像素或百分比为单位），请使用此解决方案：

```
table {
    table-layout: fixed;
    width: 100%;
}

td:first-child {
    width: 100px;    /* or width: 15%; */
} 
```

请注意，您可以为文本使用不同的选择器（例如 a `class`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:49:02.327

可能的解决方案......

主要问题可能是“站点导航”单元格是滚动区域的一部分。

```
table { display: block; } 
```

然后将`.wrap`类分配给表并删除包含月份的 div。

[在这里提琴](http://jsfiddle.net/fhL9u/4/)

仅在 Chrome 中测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:45:05.477

你可以在 div.wrap 上放一个宽度，比如 400px- 可以工作，而且只是一行代码:-)

# java - Eclipse 任务与 Java 任务

> ID：12515915
> 
> 赞同：0
> 
> 时间：2012-09-20T15:28:31.343
> 
> 标签：java, eclipse

我在 Eclipse IDE 中有一个奇怪的行为。对于我的一些项目，`// TODO <comment>`被认为是*任务*，而对于其他项目，它们是*Java 任务*

知道这是如何配置的，因为我已经检查了我的项目的配置并且它们看起来相同（基本的 java 项目）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:48:13.210

您已在首选项中为普通编辑器启用任务标签（默认情况下未激活）。那些使用与 Java 任务扫描器相同的键。

打开*Window->Preferences*并在左上角的过滤框中输入“todo”。这将向您展示至少两个不同的位置来配置任务标签（Java 和结构化编辑器）。您现在可以禁用结构化编辑器、重命名或删除键，如果您希望所有键都出现在问题视图中的同一标签下。

# cocos2d-iphone - 是否可以启用 Cocos2d 应用在 HDMI-AirServer-Apple TV 上镜像显示？

> ID：12515918
> 
> 赞同：0
> 
> 时间：2012-09-20T15:28:39.253
> 
> 标签：cocos2d-iphone, ipod, hdmi, apple-tv

AirServer、AppleTV 仅支持某些 iPhone 型号和 iPad。但是，第 4 代 iPod touch 受支持，但仅适用于某些应用程序（例如 YouTube）。

我曾问过一个非常[相似的问题](https://stackoverflow.com/questions/12351714/is-it-possible-to-capture-video-of-an-ipod-without-jailbreaking-is-it-possible)，该问题已被关闭，并被投票重新开放。有了这个问题，我想专注于问题的编程方面。

**是否可以在我的iPod touch 4** Cocos2D 应用程序中添加一些代码来**启用应用程序镜像**？

我找到了一些参考资料，并且 UIScreen 具有[mirrored 属性](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScreen_Class/Reference/UIScreen.html)，但我有点困惑，因为**Apple 商店助理说 iPod 4 代有一个不同的芯片，不允许 mirrowing**。我认为这不是真的，因为实际上可以镜像 Youtube，并且通过越狱 iPod 4 也应该是可能的。

我正在寻找一个**教程指南来为我的 Cocos2D iPod 4 应用程序启用它**。从 iPhone 4S 开始，这应该可以在不添加任何代码的情况下实现，但我要解决的问题是针对 iPod 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:46:04.560

Airplay 镜像是 iOS 5 的一项功能，可在用户选择时使用。此功能在 iPod Touch 4 上不可用。

要连接到 Apple TV [，请参阅本指南](http://support.apple.com/kb/HT5209)，其中还列出了最低要求（iPhone 4S、iPad 2）。

# php - 需要将 PHP 数组传递给 Javascript 函数

> ID：12515921
> 
> 赞同：0
> 
> 时间：2012-09-20T15:28:50.033
> 
> 标签：php, javascript, json

基于此处的其他几个线程，我认为我正在寻找的是 json_encode()，尽管我并不真正了解我的 JavaScript 函数如何使用输出。我想要做的是允许用户根据需要添加额外的选择列表，并从我用来创建初始选择列表的 PHP 函数中填充这些选择选项。这是我目前的JavaScript：

```
<script type="text/javascript">
var assigneeCounter = <?php print checkdata("assignee_count", $formvalues, "1"); ?>;

function addInput(fieldlabel, inputclasses, inputCounter, fieldtype = 'input', selectoptions = false){
  window[inputCounter]++;
  var cleanlabel = fieldlabel.replace(/[^a-zA-Z 0-9]+/g,'');
  var cleanlabel = cleanlabel.replace(/\s+/g, '_').toLowerCase();
  var newdiv = document.createElement('div');
  newdiv.id = cleanlabel + window[inputCounter];
  if (fieldtype == 'input') {
    newdiv.innerHTML = '<div class="form-item"><label for="' + cleanlabel + '_' + window[inputCounter] + '">' + fieldlabel + ' #' + window[inputCounter] + '</label><input type="text" name="' + cleanlabel + '_' + window[inputCounter] + '" id="' + cleanlabel + '_' + window[inputCounter] + '" value="" class="' + inputclasses + '"><span class="space"><a href="javascript:removeInput(\'' + cleanlabel + '\',\'' + inputCounter + '\',\'' + window[inputCounter] + '\');">Remove</a></span>';
  }
  else if (fieldtype == 'select') {
    alert(selectoptions);
    newdiv.innerHTML = '<div class="form-item"><label for="' + cleanlabel + '_' + window[inputCounter] + '">' + fieldlabel + ' #' + window[inputCounter] + '</label><select name="' + cleanlabel + '_' + window[inputCounter] + '" id="' + cleanlabel + '_' + window[inputCounter] + '" class="' + inputclasses + '">
      <span class="space"><a href="javascript:removeInput(\'' + cleanlabel + '\',\'' + inputCounter + '\',\'' + window[inputCounter] + '\');">Remove</a></span>';
  }
  document.getElementById(cleanlabel + "_additions").appendChild(newdiv);
  document.getElementById(cleanlabel + "_count").value = window[inputCounter];
}
function removeInput(fieldlabel, inputCounter, fieldID){
  var element = document.getElementById(fieldlabel + fieldID);
  document.getElementById(fieldlabel + "_additions").removeChild(element);
  window[inputCounter]--;
  document.getElementById(fieldlabel + "_count").value = window[inputCounter];
}
</script> 
```

我在 HTML 中调用函数，如下所示：

```
<div id="assignee_additions"></div>
<p><a href="javascript:addInput('Assignee','required-text', 'assigneeCounter', 'select', '<?php print json_encode($assignto); ?>');">Add Another Assignee</a></p> 
```

当我将“fieldtype”的值设置为输入时，它工作得很好，并按预期创建了另一个输入字段。删除功能也可以完成它的工作。但我真正需要的是一个选择字段，而不是一个输入字段，这就是我缺乏 JavaScript 知识的原因。

此外，如果有人认为 jQuery 在这里是一个更好的选择，我当然也对此持开放态度，但我不知道这比传统的 JavaScript 更好。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:53:15.793

您可以`JSON`在不同的`php`文件中创建您的。然后，从您的`javascript`函数中，您可以使用`AJAX`调用来检索生成的`JSON`.

我相信您想要标签的`json_encode`值和键，对吗？`<option>`因此，在成功`AJAX`调用后，解码您的`JSON`并为每个值构建一个新选项。

jQuery 中的粗略代码如下所示：

```
$.ajax({
    url: 'giveMeJSON.php',
    dataType: 'json',
    success: function(data){
        $.each(data.options, function(index){
            $('<option>').val($(this).value).text($(this).text).appendTo($('#select_id'));
        }
    }
}) 
```

阅读[`$.ajax`](http://api.jquery.com/jQuery.ajax/)和[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

# ios - 用户对 facebook 进行身份验证后未调用应用程序打开 Url 方法

> ID：12515922
> 
> 赞同：4
> 
> 时间：2012-09-20T15:29:02.450
> 
> 标签：ios, facebook, openurl

我已将我的 ios 应用程序中的 facebook 升级到 3.0，并使用[https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)提供的代码让用户通过 facebook 登录，但是问题是在用户允许 facebook 访问之后，该`- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation`方法没有被调用。但有趣的是，当我创建一个新应用程序并在该应用程序中集成相同的代码时，那里会调用相同的方法。我使用的是 xcode 4.4。任何建议为什么我现有的代码会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:23:33.780

这可能是因为您的旧应用程序设置为不在后台运行，如您的应用程序 plist 中设置的那样？我一直有同样的问题。似乎，如果应用程序在后台运行，它将返回并调用 openURL。但是如果应用程序没有在后台运行，它将返回并调用 application:didFinishLaunchingWithOptions，而不是调用 openURL。可以从启动选项中获取 url：

```
NSURL *url = [launchOptions objectForKey: UIApplicationLaunchOptionsURLKey]; 
```

但我还没有弄清楚如何调用它，以便在从 Facebook 身份验证返回时与 application:openURL 具有相同的效果。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:22:20.117

将 xcode 更新为 4.5 GM 以便正常工作，可能是 xcode 以前版本的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:25:36.203

确保你已经设置了 fburl，并且 appid 很好。如果设备/模拟器有多个使用相同 facebook appId 的应用程序，则可能会发生。

# java - 如何在 subversion repo 中包含 Ivy 依赖项

> ID：12515936
> 
> 赞同：1
> 
> 时间：2012-09-20T15:29:29.233
> 
> 标签：java, eclipse, apache, ivy, ivyde

因此，由于我无法通过包含来自外部源的所有内容来找到解决依赖问题的方法，因此我转向 Eclipse / IvyDE 进行 ant / Ivy 集成。

话虽如此，我通常会包含这样的库：

```
<dependency org="org.jsoup" name="jsoup" rev="1.6.3"/> 
```

但是，如果我想在我们自己的 Intranet 中查看某些内容怎么办？

例如，如果保存 jar 的文件夹是这样的：

```
https://prdsvn01.company.intra.net/repo/libName/ 
```

我想将 lib.jar 包含到我的文件夹中。

在这个 eclipse 的实现中，我相对无法找到 ivysettings.xml，我也不相信如果可以的话，我能把它弄好。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:20:14.320

以下常春藤设置文件：

```
<ivysettings>
    <settings defaultResolver="central"/>

    <resolvers>
        <ibiblio name="central" m2compatible="true"/>

        <url name="my-repo">
            <artifact pattern="http://myserver/myrepo/[organisation]/[artifact]/[revision]/[artifact].[ext]"/>
        </url>
    </resolvers>

    <modules>
        <module organisation="org.mycompany" resolver="my-repo"/>
    </modules>
</ivysettings> 
```

默认配置为从 Maven Central 检索工件，并从 HTTP 服务器检索本地工件。

# 更新

## 常春藤.xml

ivy 文件中没有什么特别之处。只需声明依赖项以及将它们关联到哪个配置：

```
<configurations>
    <conf name="compile" description="Required to compile application"/>
</configurations>

<dependencies>
    <!-- compile dependencies -->
    <dependency org="org.slf4j" name="slf4j-api" rev="1.6.4" conf="compile->default"/>
    <dependency org="org.mycompany" name="my-module" rev="1.0" conf="compile->default"/>

</dependencies> 
```

笔记：

*   使用配置是常春藤最佳实践。

## 构建.xml

```
<target name="resolve" dependencies="Resolve build dependencies">
    <ivy:resolve/>

    <ivy:report todir='build/reports' graph='false' xml='false'/>

    <ivy:cachepath pathid="compile.path" conf="compile"/>
    ..  
</target> 
```

笔记：

*   ivycachepath 任务将 ivy 配置转换为填充的 ANT 类路径。很有用。
*   ivy 报告任务告诉你类路径上的 jars

## 常春藤解析构建输出

所有的魔法都在设置文件中。运行构建会产生以下结果：

```
[ivy:resolve]   found org.slf4j#slf4j-api;1.6.4 in central
[ivy:resolve]   found org.mycompany#my-module;1.0 in my-repo
..
[ivy:resolve] downloading http://repo1.maven.org/maven2/org/slf4j/slf4j-api/1.6.4/slf4j-api-1.6.4.jar ...
..
[ivy:resolve] downloading http://myserver/myrepo/org.mycompany/my-module/1.0/my-module.jar ... 
```

笔记：

*   **my-repo**解析器用于具有“org.mycompany” groupId 的模块。
*   其他一切都来自默认解析器 Maven Central。

# java - 在Android中将自定义标题添加到列表片段

> ID：12515948
> 
> 赞同：2
> 
> 时间：2012-09-20T15:30:07.023
> 
> 标签：java, android, header, adapter, android-listfragment

我正在尝试添加一个不可点击的自定义标题，但将有一个复选框，该复选框将“选中所有”复选框。

这是我的列表片段

```
public class AssesmentListFragment extends ListFragment {

private static String BUNDLE_KEY_APPLICATION = "LIST_ITEM";
FastAssesmentListAdapter adapter;
View listHeader;

public AssesmentListFragment() {}

public AssesmentListFragment(Data[] data) {

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     

    Data[] assestments = {new Data("Assesment ID","Name", "Date"), new Data("123456", "Assestment 2", "9/12/12"),
            new Data("345672", "Assesment 3", "9/13/12"), new Data("566893", "Assesment 4", "9/14/12")};

            //This is the part that makes the app crash
    View header = getActivity().getLayoutInflater().inflate(R.layout.list_adapter_assesments, null);
    ListView listView = getListView();
    listView.addHeaderView(header);

    adapter = new FastAssesmentListAdapter(getActivity(), assestments);
    setListAdapter(adapter);

    updateList(assestments);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}
private void updateList(Data[] assestments) {
    // NOTE: addAll is not being used to support pre-honeycomb devices

    synchronized(adapter) {
        adapter.clear();
        adapter.addAll(assestments);
        adapter.notifyDataSetChanged();
    }
}

@Override
public void onListItemClick(ListView parentView, View selectedItemView, int position, long id) {
    String model = (String) parentView.getItemAtPosition(position);
    ((FacilityActivity) getActivity()).onItemSelected(model);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    //outState.putInt("curChoice", mCurCheckPosition);
  } 
 } 
```

这是我试图用于标题的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:orientation="vertical">

<LinearLayout 
    android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingLeft="25dp"
android:paddingRight="10dp"
android:orientation="horizontal"> 

<TextView android:id="@+id/adapter_header_textview_column1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="4"
    android:textColor="@color/defaultTextColor"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="28sp"
    android:text="Assesment ID" />

<TextView android:id="@+id/adapter_header_textview_column2"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="4"
    android:textColor="@color/defaultTextColor"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="28sp"
    android:text="Name" />

<TextView android:id="@+id/adapter_header_textview_column3"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:textColor="@color/defaultTextColor"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="28sp" 
    android:text="Date"/>

<CheckBox
    android:id="@+id/header_check_box"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:color="@color/defaultTextColor"
    android:layout_weight=".5"
    android:gravity="center" />
</LinearLayout>
<View
    android:layout_width="fill_parent"
    android:layout_height="5dp"
    android:background="@color/BPGreenColor" /> 
<ListView
 android:id="@android:id/list"
 android:layout_width="match_parent"
 android:layout_height="wrap_content" >
</ListView> 
</LinearLayout> 
```

然后这是我正在使用的数组适配器：

```
public class FastAssesmentListAdapter extends ArrayAdapter<Data> {

    private static int LAYOUT_ID = R.layout.list_adapter_with_checkbox_three_column;
private final Data[] assesments;
private final Context context;
LinearLayout listHeader;

static class ViewHolder {
    protected TextView column1;
    protected TextView column2;
    protected TextView column3;
    protected CheckBox checkbox;
}

public FastAssesmentListAdapter(Context context, Data[] assesments) {
    super(context, LAYOUT_ID, assesments);
    this.context = context;
    this.assesments = assesments;
}

//ListFragment and array adapter will automatically call this over and over to auto populate the list
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final Data item = getItem(position);

    // Formulate row view (create if it does not exist yet)
    View view = convertView;
    if(view == null) {
        LayoutInflater inflater = ((Activity) getContext()).getLayoutInflater();
        view = inflater.inflate(LAYOUT_ID, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.column1 = (TextView) view.findViewById(R.id.adapter_textview_column1);
        viewHolder.column2 = (TextView) view.findViewById(R.id.adapter_textview_column2);
        viewHolder.column3 = (TextView) view.findViewById(R.id.adapter_textview_column3);
        viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check_box);
        view.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(getContext(), "Clicked",
                        Toast.LENGTH_SHORT).show();
                Intent intent = new Intent(getContext(), FacilityActivity.class);
                getContext().startActivity(intent);
            }
        });
            if(viewHolder.checkbox != null) {
                viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                      if(isChecked) {
                          item.setSelected(isChecked);
                          Toast.makeText(getContext(), "Checked",
                                  Toast.LENGTH_SHORT).show();
                      }

                    }
                  });
            }
        view.setTag(viewHolder);
        viewHolder.checkbox.setTag(position);
    }
    ViewHolder viewHolder = (ViewHolder) view.getTag();
    viewHolder.checkbox.setTag(position);
    viewHolder.column1.setText(item.getColumn1());
    viewHolder.column2.setText(item.getColumn2());
    viewHolder.column3.setText(item.getColumn3());
    viewHolder.checkbox.setChecked(item.isSelected());
return view;
}
 } 
```

附带说明一下，片段中的 onlistitemclicked 不起作用，我必须在适配器中设置一个侦听器，然后它才能工作。有什么想法吗？但主要是我需要弄清楚如何在列表视图中使用自定义标题和自定义行。这是行的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingLeft="25dp"
android:paddingRight="10dp"
android:orientation="horizontal"> 

<TextView android:id="@+id/adapter_textview_column1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="4"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="25sp" />

<TextView android:id="@+id/adapter_textview_column2"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="4"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="25sp" />

<TextView android:id="@+id/adapter_textview_column3"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="25sp" />

<CheckBox
    android:id="@+id/check_box"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight=".5"
    android:gravity="center" />
</LinearLayout> 
```

# c# - 迭代值

> ID：12515955
> 
> 赞同：1
> 
> 时间：2012-09-20T15:30:38.753
> 
> 标签：c#, linq

我是 linq 的新手。我正在使用 linq[从数据库中填充一些类](https://stackoverflow.com/q/12496809/442580)。

除了一件小事外，我的所有对象都使用我的 linq 正确填充。您可以在下面看到，对于“SAR”“飞行方向”（第 15,16 行），我应该有一个**Ascending**值和一个**Descending**值。但是**我得到的是 "Ascending" 的两个值对象**。

**为什么它不循环遍历我的值？LINQ 缺少什么？**

# 这是我的数据库结果：

![在此处输入图像描述](../Images/cc68ecfa1a8a4600e152435cccb78888.png)

# 这是我的 LINQ：

```
using (NpgsqlDataReader reader = command.ExecuteReader())
{

    if (reader.HasRows)
    {

        var groups = reader.Cast<System.Data.Common.DbDataRecord>()
            .GroupBy(dr => new { ID = (int)dr["id"], AttID = (int)dr["AttId"] })
            .GroupBy(g => g.Key.ID);

        typeDataList = (
            from typeGroup in groups
            let typeRow = typeGroup.First().First()
            select new TypeData()
            {
                ID = (int) typeRow["id"],
                Type = (string) typeRow["type"],
                Attributes = 
                (
                    from attGroup in typeGroup
                    let attRow = attGroup.First()
                    select new TypeDataAttribute()
                    {
                        ID = (int)attRow["AttId"],
                        Label = (string)attRow["label"],
                        PossibleValues =
                        (
                            from row in attGroup
                            where !DBNull.Value.Equals(attRow["AttValueId"])
                            select new TypeDataAttributeValue() { ID = (int)attRow["AttValueId"], Value = (string)attRow["value"] }
                        ).ToArray()
                    }
                ).ToArray()
            }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:55:51.997

你`Value`从那里拿走`attRow`，你应该从那里拿走它`row`。

# c# - 使用数据源时无法更改 datagridview 单元格颜色

> ID：12515960
> 
> 赞同：8
> 
> 时间：2012-09-20T15:30:45.463
> 
> 标签：c#, .net, datagridview

我有一个有趣的问题。我正在尝试使用数据表作为数据网格视图的数据源。我想为表格的某些单元格着色以指示各种事物，但由于某种原因，颜色不会显示。所以下面的代码显示了一个未着色的单元格。

```
dataGridView1.DataSource = table;

dataGridView1.Rows[0].Cells[0].Style.BackColor = Color.Yellow; 
```

我只能在初始表单加载后显示颜色（例如在 OnClick 事件上设置单元格颜色）。但是，如果我像下面的代码那样为视图显式创建行和列，则着色会起作用。

```
foreach (DataColumn col in table.Columns)
    dataGridView1.Columns.Add(col.ColumnName, col.ColumnName);

for (int i = 0; i < table.Rows.Count; i++)
{
    var row = table.Rows[i];
    object[] values = new object[table.Columns.Count];
    for (int x = 0; x < table.Columns.Count; x++)
        values[x] = row[x].ToString();

    dataGridView1.Rows.Add(values);
}

dataGridView1.Rows[0].Cells[0].Style.BackColor = Color.Yellow; 
```

我不想以这种方式拥有代码。有谁知道这里发生了什么阻止我给细胞着色？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-20T21:39:51.683

如果您尝试在表单的构造函数中设置单元格颜色，您将在数据绑定完成之前点击，因此对单元格的更改不会粘住（不要问我为什么，只是其中一个带有`DataGridView`.

最直接的解决方法是稍后设置颜色 - 通常在`DataBindingComplete`事件处理程序中：

```
void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    dataGridView1.Rows[0].Cells[0].Style.BackColor = Color.Yellow;
} 
```

这适用于网格的静态着色 - 如果您希望颜色根据网格内的更改而更改，则使用`CellFormatting`事件来更改单元格。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T16:57:11.970

这是我最近实现的东西，我不知道它是否有帮助？？

```
private void dgvOutstandingReports_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
            {
                int colIndex = e.ColumnIndex;
                int rowIndex = e.RowIndex;

                if (rowIndex >= 0 && colIndex >= 0)
                {
                    DataGridViewRow theRow = dgvOutstandingReports.Rows[rowIndex];

                    if (theRow.Cells[colIndex].Value.ToString() == "Daily Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.LightYellow;
                    }
                    else if (theRow.Cells[colIndex].Value.ToString() == "Monthly Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.LightGray;
                    }
                    else if (theRow.Cells[colIndex].Value.ToString() == "SMP Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.Snow;
                    }
                    else if (theRow.Cells[colIndex].Value.ToString() == "Weekly Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.Pink;
                    }
                    else if (theRow.Cells[colIndex].Value.ToString() == "Hourly Report")
                    {
                        theRow.DefaultCellStyle.BackColor = Color.LightSteelBlue;
                    }
                }
            } 
```

# foreach - 表格行上的 Foreach

> ID：12515961
> 
> 赞同：0
> 
> 时间：2012-09-20T15:30:53.653
> 
> 标签：foreach, codeigniter-2

我使用 mPDF 生成 PDF 并将报告发送给客户。

我正在使用这个 foreach 来填充我的表格行

```
 $report_nr = $this->input->post('report_nr');
        $date = $this->input->post('date');
        $owner = $this->input->post('owner');
        $ar1 = $this->input->post('column01');
        $ar2 = $this->input->post('column02');
        $ar3 = $this->input->post('column03');
        $ar4 = $this->input->post('column04');
        $ar5 = $this->input->post('column05');
        $ar6 = $this->input->post('column06');
        $ar7 = $this->input->post('column07');
        $ar8 = $this->input->post('column08');
        $ar9 = $this->input->post('column09');
        $ar10 = $this->input->post('column10');

        include('../mpdf.php');
        $mpdf = new mPDF('',    // mode - default ''
            'A4',    // format - A4, for example, default ''
            0,     // font size - default 0
            '',    // default font family
            15,    // margin_left
            15,    // margin right
            16,     // margin top
            16,    // margin bottom
            9,     // margin header
            9,     // margin footer
            'P');  // L - landscape, P - portrait
        //$this->customer_report();
        $n=0; //start counting at 0, like array counters do.
        foreach ($ar2 as $thing) { //for each value of $ar2
        $bigar[$n][2] = $thing; //set $bigarray at $n at 1 to that part
        $n++; //add one to $n, continue
        }
        $n=0; //repeat for array 3
        foreach ($ar3 as $thing) {
        $bigar[$n][3] = $thing; //now use the 2 value of the array
        $n++;
        }
        $n=0; //repeat for array 4
        foreach ($ar5 as $thing) {
        $bigar[$n][5] = $thing; //now use the 2 value of the array
        $n++;
        }
        $n=0; //start counting at 0, like array counters do.
        foreach ($ar6 as $thing) { //for each value of $ar2
        $bigar[$n][6] = $thing; //set $bigarray at $n at 1 to that part
        $n++; //add one to $n, continue
        }
        $n=0; //repeat for array 3
        foreach ($ar8 as $thing) {
        $bigar[$n][8] = $thing; //now use the 2 value of the array
        $n++;
        }
        $n=0; //repeat for array 4
        foreach ($ar9 as $thing) {
        $bigar[$n][9] = $thing; //now use the 2 value of the array
        $n++;
        }
        $n=0; //repeat for array 1
        foreach ($ar1 as $thing) {
        $bigar[$n][1] = $thing; //now use the 2 value of the array
        $n++;
        }
        $this->mpdf->WriteHTML("<table border='1'>");
        $this->mpdf->WriteHTML('<thead><tr><th class="span1">Relatório Nº :</th><th>&nbsp;'.$report_nr.'&nbsp;</th><th>Data :</th><th>&nbsp;'.$date.'&nbsp;</th><th>Cliente :</th><th colspan="5">&nbsp;'.$owner.'&nbsp;</th></tr></thead>');
        $this->mpdf->WriteHTML("<tbody>");
        $this->mpdf->WriteHTML("<tr>");
        foreach ($bigar as $part) { //go through each chunk of the array
          if($i%10 == 0 && $i != 0) { 
            $this->mpdf->WriteHTML("</tr>");
            $this->mpdf->WriteHTML("<tr>");
          }
        $this->mpdf->WriteHTML("<td>");
        $this->mpdf->WriteHTML("<table><tbody><tr><td>&nbsp;".($part[2]+$part[3])."&nbsp;</td><td>&nbsp;".($part[5]+$part[6])."&nbsp;</td><td>&nbsp;".($part[8]+$part[9]).'&nbsp;</td></tr><tr><td colspan="3">&nbsp;'.$part[1]."&nbsp;</td></tr></tbody></table>");
        $this->mpdf->WriteHTML("</td>"); //now, like above, that part has [1], and [2]
        $i++;
        }
        $this->mpdf->WriteHTML("</tr>");
        $this->mpdf->WriteHTML("</tbody></table>"); 
```

正如你在最后一行看到的......当我达到 10 个单元格时，它会创建另一行。现在我需要最后一行来达到 10 个单元格，即使数组上没有内容，否则它不会创建完整的行，这最终使我的表格变得一团糟......

这是pdf的打印屏幕：

![打印屏幕](../Images/02d4eb03a5628e826e08ac08c5cbb4d9.png)

希望我说清楚了。

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:45:21.473

找到了一种方法，我想与你分享。

```
 }
    $this->mpdf->WriteHTML('<table border="1">');
    $this->mpdf->WriteHTML('<thead><tr><th>Relatório Nº :</th><th>&nbsp;'.$report_nr.'&nbsp;</th><th>Data :</th><th>&nbsp;'.$date.'&nbsp;</th><th>Cliente :</th><th colspan="5">&nbsp;'.$owner.'&nbsp;</th></tr></thead>');
    $this->mpdf->WriteHTML("<tbody>");
    $this->mpdf->WriteHTML("<tr>");
    foreach ($bigar as $part) { //go through each chunk of the array
      if($i%10 == 0 && $i != 0) { 
        $this->mpdf->WriteHTML('</tr>');
        $this->mpdf->WriteHTML('<tr>');
      }

    $this->mpdf->WriteHTML("<td>");
    $this->mpdf->WriteHTML("<table border='1'><tbody><tr><td>&nbsp;".($part[2]+$part[3])."&nbsp;</td><td>&nbsp;".($part[5]+$part[6])."&nbsp;</td><td>&nbsp;".($part[8]+$part[9]).'&nbsp;</td></tr><tr><td colspan="3">&nbsp;'.$part[1]."&nbsp;</td></tr></tbody></table>");
    $this->mpdf->WriteHTML("</td>"); //now, like above, that part has [1], and [2]

    $i++;

    }
    $this->mpdf->WriteHTML('<td colspan="'.(10-($i%10)).'"></td></tr>');
    $this->mpdf->WriteHTML("</tbody></table>");
    //$bigar_removed = ereg_replace("0", "", $bigar);
    //$this->mpdf->WriteHTML("".$bigar_removed."");
        $this->mpdf->WriteHTML("<pagebreak>");

        $this->mpdf->Output();
        exit;
    } 
```

诀窍是找到一种方法来知道最后在行中创建了哪个单元格编号。

```
 $this->mpdf->WriteHTML('<td colspan="'.(10-($i%10)).'"></td></tr>'); 
```

这样，我只是从 10 中减去了这个数字，这让我有了与coldspan一起使用的数字，使行完整。

希望它可以帮助你们中的一些人！

谢谢你们

# php - wordpress 适合大型数据库查询吗？

> ID：12515963
> 
> 赞同：0
> 
> 时间：2012-09-20T15:30:56.603
> 
> 标签：php, wordpress

想知道是否有人对我可能会接手的项目有任何建议。

这在 mo 时有点模糊，但我认为基本上是一个科学应用程序，就像你提供的产品一样，然后根据蛋白质数据库检查它是否有反应。

从我得到的信息来看——这实际上可以是任何场景，而且听起来很简单——开发者在网站上填写了一个表格，然后以某种方式检查其他类似属性的数据库，看看它是否合适，它然后最后也会添加到该数据库中（因此数据库可能会随着每个用户进行检查而增长）。

我想知道的部分是这可能是巨大的（例如 10,000 + 无限） - 所以从构建自定义 php 应用程序来处理所有这些中会获得什么，因为 wordpress 不适合后端 - 我应该满足时间密集型查询？

感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:09:19.123

**不。**

请参阅票[http://core.trac.wordpress.org/ticket/9864](http://core.trac.wordpress.org/ticket/9864)（大量页面的性能问题）。我在 3 年多前提交了这张票，但仍然没有解决方案。从那时起，有问题的代码变得更加复杂，并开始使用更重版本的内部查询库。

这些严重的问题与页面有关，但帖子在查询中同样繁重。如果你有元数据，它会进一步加重服务器的负担。最重要的是，大多数领先的 WP 缓存插件都排除了网络机器人，所以每隔几周，当 google、baidu 和 yandex 开始为 10k 页面敲打你的机器时，它就会让你的机器停机。

这只是意味着您不能将其本地用于大型内容集，但您仍然可以使用大部分 WordPress，并对 WP 数据库/构造之外的部分进行额外的代码自定义。

**编辑**：澄清一下-我所说的是，仅使用 WP 的本机数据库结构（由[codex 中的此架构](http://codex.wordpress.org/Database_Description)定义）和 query_posts() / WP_Query() 来执行查询是我所指的效率低下。原生 WP 存储/查询系统不能非常有效地处理大量页面/帖子。但是，绕过一些本机功能可能会正常工作。

# itextsharp - 在 pdf 文件中查找最后一行的 x,y 位置 - itextsharp

> ID：12515968
> 
> 赞同：0
> 
> 时间：2012-09-20T15:31:07.880
> 
> 标签：itextsharp

我想将图像添加到 pdf 文件中。图像的位置应刚好在 pdf 文件的最后一行上方。

如何获取 pdf 中最后一行的 x,y 位置或最后一个文本块末尾的 x,y 位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:14:20.620

查找命名的对象`TextMarginFinder`并像在此 Java 示例中那样使用它：[ShowTextMargins](http://developers.itextpdf.com/examples/itext-action-second-edition/chapter-15#579-showtextmargins.java)

```
public void addMarginRectangle(String src, String dest)
    throws IOException, DocumentException {
    PdfReader reader = new PdfReader(src);
    PdfReaderContentParser parser = new PdfReaderContentParser(reader);
    PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(RESULT));
    TextMarginFinder finder;
    for (int i = 1; i <= reader.getNumberOfPages(); i++) {
        finder = parser.processContent(i, new TextMarginFinder());
        PdfContentByte cb = stamper.getOverContent(i);
        cb.rectangle(finder.getLlx(), finder.getLly(),
            finder.getWidth(), finder.getHeight());
        cb.stroke();
    }
    stamper.close();
    reader.close();
} 
```

# .net - WCF netTcpBinding 获取用户名

> ID：12515970
> 
> 赞同：1
> 
> 时间：2012-09-20T15:31:23.013
> 
> 标签：.net, wcf

我有一个使用 netTcpBinding 的自托管 WCF 服务。是否有一个类可以用来访问调用该服务的客户端的域用户名。我尝试查看`OperationContext`但无法弄清楚。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:38:46.127

试试这个：

```
ServiceSecurityContext serviceSecurityContext = ServiceSecurityContext.Current;
if (serviceSecurityContext != null)
{
  string accountText = serviceSecurityContext.WindowsIdentity.Name;
} 
```

WindowsIdentity 属性包含大量有关用户的信息。

# d - foreach 是在编译时执行的吗？

> ID：12515981
> 
> 赞同：0
> 
> 时间：2012-09-20T15:31:52.450
> 
> 标签：d

我编写了这段代码来获取指针传递的函数的类型：

```
import std.stdio;
import std.traits;

void main()
{
  get_param_types(&f1,"f1");
  get_param_types(&f2,"f2");
  get_param_types(&f3,"f3");
}

void get_param_types(f_t)(f_t f, string f_id){
  writeln("get_param_types ");
  alias ParameterTypeTuple!(f) ptt;
  writeln(f_id, " has ", ptt.length, " parameters");
  static if (ptt.length){
    write("( ");
    foreach (pt; ptt){
      write(typeid(pt), " ");
    }
    writeln(")");
  }
}

void f1() { }
void f2(int x) { }
void f3(int x, double y, string z) { } 
```

我的疑问是：**1：`get_param_types`在编译时完全评估？**

如果没有：**2：我怎样才能做到这一点？**

当我在做的时候...... **3：有没有办法避免传递字符串（例如）并在编译时`"f1"`从内部推断它们？`get_param_types`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:52:24.273

foreach 将在编译时*扩展*，但代码执行（如运行时只有像 write 这样的函数）可以推迟到运行时

这类似于循环展开，但这里不是使用计数器而是每次迭代都有唯一的类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:31:55.930

1.  `get_param_types()`在您的示例中是在运行时评估的，因为您在运行时在`main()`. 请注意，它不能在编译时按原样进行评估，因为您正在调用 write() 和 writeln() 来写入`stdout`，这在编译时不可用。
2.  你想在编译时实现什么？`write`在您的示例中，所有对and的调用`writeln`只能在运行时发生。`foreach`and是在编译时评估的`static if`...基本上任何对该函数的调用都会在运行时调用`write`and的组合`writeln`- 没有循环或条件 - 这是你想要的吗？
3.  您可能想查看[模板别名参数](http://dlang.org/template.html#aliasparameters)。它们看起来有点像这样：

```
void getParamTypes(alias fn)() if (isCallable!fn)
{
    writefln("Getting parameter types for fn: %s", (&fn).stringof[2..$]);
    foreach (param; ParameterTypeTuple!fn) {
        writeln(param.stringof);
    }
} 
```

# core-data - 创建新 NSManagedObject 时的自动操作

> ID：12515983
> 
> 赞同：0
> 
> 时间：2012-09-20T15:32:18.583
> 
> 标签：core-data, nsmanagedobject

我有两个实体 - A 和 B。A 包括一组 B。每次创建 B 时，我都想确保将其添加到 A 的特殊实例中。

查看 NSManagedObjectClass 参考，很明显我不应该覆盖 init 方法。那么“捕捉”B的创作的最佳地点在哪里？我能看到的唯一方法是使用 validateForInsert，但我担心这并不是它的真正含义，因此可能会在未来引起头痛。有更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:41:03.723

从[NSManagedObject](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)文档：

> awakeFromInsert 当接收器第一次插入托管对象上下文时由 Core Data 框架自动调用。

在您的实体类上子类化此方法。

# hadoop - 我在哪里可以找到 Hadoop 上的 SVM 实现？

> ID：12515985
> 
> 赞同：1
> 
> 时间：2012-09-20T15:32:31.480
> 
> 标签：hadoop, svm

我在[http://code.google.com/p/cascadesvm/](http://code.google.com/p/cascadesvm/)中找到了一个实现。但是，没有关于此的规范。有人试过吗？或者我在哪里可以找到 Hadoop 上 SVM 的替代实现？非常感谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:30:48.577

看起来有人在 Mahout 项目中这样做了，不确定它是否已合并到主干中，但这看起来是一个不错的起点：

[https://issues.apache.org/jira/browse/MAHOUT-232](https://issues.apache.org/jira/browse/MAHOUT-232)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T01:07:29.210

您可以查看[https://code.google.com/p/cascadesvm/](https://code.google.com/p/cascadesvm/) 训练部分，并发布了 Matlab 版本的演示。 [https://code.google.com/p/cascadesvm/wiki/CascadeSVMMatlabVersion](https://code.google.com/p/cascadesvm/wiki/CascadeSVMMatlabVersion)

# javascript - 无法将 undefined 转换为对象

> ID：12515988
> 
> 赞同：0
> 
> 时间：2012-09-20T15:32:44.040
> 
> 标签：javascript, thunderbird-addon

我收到错误“无法在线将未定义转换为对象`return hasOwnProperty(prop);`，我根本无法弄清楚问题出在哪里。如有必要，我可以发布更多代码。

```
getCardProperty : function (card, prop, def) {
    if (typeof def === "undefined") {
        def = null;
    }

    // json synckolab object
    if (card.synckolab) {
        if (card.hasOwnProperty(prop)) // TODO better check for undefined?
        {
            return hasOwnProperty(prop);
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:33:59.780

`hasOwnProperty(prop)`不存在 - 您需要使用对象名称对其进行限定。只需将其更改为`card.hasOwnProperty(prop)`.

您可以进一步简化它：

```
if (card.synckolab) {
    return card.hasOwnProperty(prop) || null;
} 
```

这将返回`true`或`null`。或者您可以进一步简化：

```
if (card.synckolab) {
    return card.hasOwnProperty(prop);
} 
```

这将返回`true`或`false`。

# sql - 如何在 Visual Studio 用户权限有限的环境中调试存储过程？

> ID：12515990
> 
> 赞同：0
> 
> 时间：2012-09-20T15:32:45.027
> 
> 标签：sql, sql-server, visual-studio-2010, debugging

我已阅读 Visual Studio 2010 文档，该文档说可以附加调试器并逐步执行存储过程，就像在 Visual Studio 2010 中逐步执行 .net 或 JavaScript 代码一样。

但是，当我尝试这样做时，我看到了错误消息：`User 'dbo' could not execute stored procedure 'master.dbo.sp_enable_sql_debug' on SQL Server XXXXXXXXXX`.

我就这个问题与我的 DBA 进行了交谈。他说，如果不让开发人员成为管理员用户，就无法允许调试，这在我工作的环境中是行不通的。

想到的第一个解决方法是在开发人员的工作站上安装 SQL Server Express，但这也是不允许的；它被当权者绝对禁止。

我意识到这似乎是一种武断的情况，它是一种方式。

我想问一下是否有某种方法可以启用 SQL 调试，而无需让开发人员成为管理员用户，也无需在开发工作站上运行任何数据库服务器。

顺便说一句，我不是 DBA。我的 DBA 说他对 Visual Studio 了解不多，所以如果有一些我们忽略的明显解决方案，我不会感到惊讶。我们的 SQL 服务器是 MS SQL。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T15:57:11.683

您真的需要显式`debug`存储过程吗？在过去，我们会做类似`PRINT`和`RAISERROR`“调试”之类的事情。我知道这听起来很难，但这些方法今天仍然有效。

# html - HTML 字段集的边框与图例重叠

> ID：12515992
> 
> 赞同：1
> 
> 时间：2012-09-20T13:56:29.367
> 
> 标签：html, css

所以我有一个 HTML 字段集和图例，并且`background-color`在 IE7 的边界外溢出的字段集中存在问题。我能够通过使用负边距来解决问题，如下所示：

```
fieldset {
    background-color:#E6E2D7;
    padding-top:5px;
    position:relative;
}

fieldset legend {
    position: absolute;
    top: -0.6em;
    left: 0.5em;
} 
```

现在字段集的边界在 IE8+/Firefox/Chrome 中跨越了图例，但在 IE7 中看起来很好。

这是一个已知问题，如果是，是否有解决方法？

以下是问题截图的链接：

[![截屏](../Images/b2e3d8983947830361be216bc82c757e.png)](https://i.stack.imgur.com/gXaxk.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:42:26.040

您可以通过在其定义之前添加 * + html 来拥有 IE7 特定的 css 类

例子：

```
/* IE7 specific css*/
* + html fieldset legend {
    position: absolute;
    top: -0.6em;
    left: 0.5em;
}

/* all other browsers*/
fieldset legend {
    position: absolute;
} 
```

# php - Magento 中的分类和显示选项 - 标签、类别等

> ID：12515993
> 
> 赞同：0
> 
> 时间：2012-09-20T15:32:49.360
> 
> 标签：php, magento, tags, block

在 Magento 商店中，我希望能够通过某种分类机制对产品进行分类（例如：标签、类别、相关产品或其他东西？）

然后我可以构建一个显示所有分类标题的块。然后，用户可以单击并获取该分类中所有产品的页面。

例子：

```
Honda
Toyota
Chevrolet
Hyundai
Chrysler 
```

我们已经使用了类别，因此使用这种分类机制会生成一个包含许多不需要的条目的列表。我正在考虑使用标签系统，但我没有在网上找到任何讨论以这种方式使用标签的参考资料。也许性能不好？

这是第一次尝试

```
// Here is a first attempt - I get all products with Category=4 
// which is a "taggable" category. Then I list all related tags
require_once('app/Mage.php'); //Path to Magento
umask(0);
Mage::app();

// Category 4 is called "Category with tags"
$_categoryId = "4";

$_productCollection = Mage::getModel('catalog/category')->load($_categoryId)
    ->getProductCollection()
    ->addAttributeToSelect('*')
    ->addAttributeToFilter('status', 1)
    ->addAttributeToFilter('visibility', 4)
    ->setOrder('price', 'ASC');    

    foreach ($_productCollection as $_product):
        $model=Mage::getModel('tag/tag');
        $tags= $model->getResourceCollection()
            ->addPopularity()
            ->addStatusFilter($model->getApprovedStatus())
            ->addProductFilter($_product->getId())
            ->setFlag('relation', true)
            ->addStoreFilter(Mage::app()->getStore()->getId())
            ->setActiveFilter()
            ->load();

        if(isset($tags) && !empty($tags)):
            foreach($tags as $tag):            
                echo $tag->getName(). '<br/>';
            endforeach;
        endif;
    endforeach; 
```

任何人都有列出标签的任何代码示例，或者有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:57:41.390

您是否尝试过分层导航？它创建基于产品属性的分类机制。在启用分层导航的情况下输入类别时，您会看到设置为显示在那里的产品属性列表，以及它们的可能值。

要启用分层导航，请转到目录 -> 类别 -> 管理类别。在那里，选择一些类别，转到显示设置选项卡并将 Is Anchor 设置为 Yes。

要允许或阻止产品属性显示在分层导航列表中，请转到目录 -> 属性 -> 管理属性。在那里，选择您想要的属性并将“在分层导航中使用”选项设置为所需的值。

它可能不是您想要的，但值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:27:14.353

快速浏览一下数据库让我确信，也许绕过 Magento 的精彩生产力功能可能在这里......

```
$sql = "SELECT * FROM tag WHERE status = '1'";
$connection = Mage::getSingleton('core/resource')->getConnection('core_read');
foreach ($connection->fetchAll($sql) as $arr_row) {
    print $arr_row['name'];
} 
```

# javascript - Javascript中的加权随机数生成

> ID：12515994
> 
> 赞同：4
> 
> 时间：2012-09-20T15:32:53.683
> 
> 标签：javascript, random

我有一个看起来像这样的数组：

```
[
    {
        plays: 0,
        otherData: someValues
    }, {
        plays: 4,
        otherData: someValues
    }, {
        plays: 1,
        otherData: someValues
    }, {
        plays: 2,
        otherData: someValues
    } {
        plays: 9,
        otherData: someValues
    }, {
        plays: 7,
        otherData: someValues
    }, {
        plays: 5,
        otherData: someValues
    }, {
        plays: 0,
        otherData: someValues
    }, {
        plays: 8,
        otherData: someValues
    }
] 
```

它是有关播放列表中歌曲的一系列信息，其中`plays`是歌曲的播放次数。我试图想出一个加权随机数生成器，它将选择一个元素的索引，加权使得播放较少的歌曲更有可能被选中。这是我现在拥有的代码：

```
function pickRandom(){
    var oldIndex = index;
    if(songs.length <= 1)
        return index = 0;
    var unheard = [];
    for(i in songs){
        if(!songs[i].plays)
            unheard.push(i);
    }if(unheard.length > 0)
        return index = unheard[Math.round(Math.random() * (unheard.length - 1))];
    var tries = 0;
    while(index == oldIndex && tries < 100){
        index = Math.round(Math.random() * (songs.length - 1));
        tries++;
    }return index;
} 
```

这个解决方案有很多我不满意的地方。首先，它的权重并没有太大，因为它实际上只是选择一首未播放的歌曲，或者如果数组中的所有内容都至少播放过一次，则可以选择任何旧的随机歌曲。其次，它创建了一个新数组，并且由于播放列表有时会包含数百首歌曲，因此如果可能的话，我想避免这种情况。

我能想出的最接近的解决方案是根据每个元素的值将每个元素多次复制到一个新数组中`plays`，然后从中挑选一个元素，但这会加剧创建新数组的问题，因为第二个数组可以轻松达到数千个元素。我会非常感谢任何帮助或建议；即使是伪代码也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:55:54.183

我会用循环做你想做的事情。合计列表中任何歌曲的最大播放次数，然后通过计算反向加权的数字并从反向总数中选择来反转概率。像这样的东西：

```
function pickRandom(myArray) {
    var maxPlays = 0, reverseTotPlays = 0, ipl, picked, revAcc = 0;

    // Empty array or bad input param
    if (!myArray || !myArray.length) {
        return -1;
    }

    // Calculate the max plays for any song in the list
    for (ipl = 0;  ipl < myArray.length;  ++ipl) {
        if (myArray[ipl].plays > maxPlays) {
            maxPlays = myArray[ipl].plays;
        }
    }
    maxPlays += 1;   // Avoid excluding max songs

    // Calculate the reverse weighted total plays
    for (ipl = 0;  ipl < myArray.length;  ++ipl) {
        reverseTotPlays += maxPlays - myArray[ipl].plays;
    }

    // Choose a random number over the reverse weighted spectrum
    picked = ~~(Math.random() * reverseTotPlays);

    // Find which array member the random number belongs to
    for (ipl = 0;  ipl < myArray.length;  ++ipl) {
        revAcc += maxPlays - myArray[ipl].plays;
        if (revAcc > picked) {
            return ipl;
        }
    }
    return myArray.length - 1;
}

var pp = [{ plays: 3 }, { plays: 1 }, { plays: 2 }];
console.log(pickRandom(pp)); 
```

[在这里](http://jsfiddle.net/dh3FG/2/)工作 JSFiddle

**编辑**：如果您不希望播放列表中播放次数最多的歌曲的概率为零，请在第一个循环后向 maxPlays 添加 +1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:03:42.627

进行两步选择可能是最简单的，首先选择一首随机歌曲，然后查看该歌曲是否通过旨在优先选择较少播放歌曲的第二次测试。如果第二次测试失败，则丢弃它并重新开始整个过程​​。

一个例子（如果我犯了一个错误，请原谅我，我已经很久没有做任何javascript了）：

```
function pickRandom(){
    var candidate;
    while (true){
        candidate = songs[Math.round(Math.random() * (songs.length - 1))];
        //largest_played is the largest number of plays of any one song
        // I've magiced it out of nowhere here, find it in a manner that
        // suits your program.
        if ( candidate.plays/largest_played < math.random() ){
            return candidate;
        }
    }
} 
```

显然，缺少很多光泽和错误检查，但这应该足以让您入门。

# html - RSpec have_tag() 结合 without_tag() / with_tag()

> ID：12515996
> 
> 赞同：1
> 
> 时间：2012-09-20T15:32:57.363
> 
> 标签：html, rspec

我希望以下内容能够通过，但事实并非如此：

```
 specify do
    '<p class="qwe rty" id="qwerty"><strong><em><span>Para</span></em></strong>graph</p>'.should have_tag('p > strong > em') do
      without_tag('em')
    end
  end 
```

结果：

```
 Failure/Error: without_tag('em')
   expected following:
   <em><span>Para</span></em> 
```

我希望块检查的 HTML 是`<span>Para</span>`，但实际上它是`<em><span>Para</span></em>`. 为什么？这样，我似乎不可能确保 a`tag`不包含任何其他`tag`相同类型：

```
 specify do
    '<div><div>bla</div></div>'.should have_tag('div') do
      without_tag('div')
    end
  end 
```

这将失败，我看不出有任何方法可以让它按我想要的方式工作。我想我在这里误解了一些基本的东西......

非常感谢您的帮助。

**更新**

在浏览了一些其他项目的规范之后，这似乎是不可能的。例如，Formtastic 有很多这样的：

```
it 'should generate a label containing the input' do
  output_buffer.should_not have_tag('label.label')
  output_buffer.should have_tag('form li label', :count => 1)
  output_buffer.should have_tag('form li label[@for="post_allow_comments"]')
  output_buffer.should have_tag('form li label', /Allow comments/)
  output_buffer.should have_tag('form li label input[@type="checkbox"]', :count => 1)
  output_buffer.should have_tag('form li input[@type="hidden"]', :count => 1)
  output_buffer.should_not have_tag('form li label input[@type="hidden"]', :count => 1) # invalid HTML5
end 
```

这肯定行得通，但对我来说，这是很多重复的地狱！在我看来，这样的事情会更可取：

```
it 'should generate a label containing the input' do
  output_buffer.should_not have_tag('label.label')
  output_buffer.should have_tag('form', :count => 1) do |form|
    form.should have_tag('li') do |li|
      li.should have_tag('label') do |label|
        label.should have_content(/Allow comments/)
        label.should have_tag('input[@type="checkbox"]', :count => 1)
        label.should_not have_tag('input[@type="hidden"]', :count => 1) # invalid HTML5
      end
      li.should have_tag('input[@type="hidden"]', :count => 1)
    end
  end
end 
```

我想错了吗？经验是否表明，第一种方式更务实？至少，我的性能会更好，我猜......？对此有何看法？

# php - jQuery.autocomplete 不显示从 jQuery.ajax 返回的值

> ID：12515997
> 
> 赞同：1
> 
> 时间：2012-09-20T15:32:59.237
> 
> 标签：php, jquery-ui, jquery

我有以下代码。

ajax 查询有效，从服务器返回的数据是有效的 json。
通过这样的请求，我成功地使自动完成下拉菜单与远程数据源一起工作：http: [//jqueryui.com/demos/autocomplete/#remote](http://jqueryui.com/demos/autocomplete/#remote)。

我的问题是从 jquery.ajax 返回的数据没有显示在自动完成中。任何人都可以帮忙吗？谢谢。

```
jQuery( "#input_2_5" ).autocomplete({
    source: function(request, response){
        jQuery.ajax({
            url: "url/wp-admin/admin-ajax.php",
            type:'POST',
            dataType: 'json',
            data:{
                action: 'word_autocomplete'
            },

            success: function(data) {
                return data;
            }

        });

    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:56:28.310

jQuery( "#input_2_5" ).autocomplete({
source: function(request, response){

```
 jQuery.ajax({
        url: "url/wp-admin/admin-ajax.php",
        type:'POST',
        dataType: 'json',
        data:{
            action: 'word_autocomplete'
        },
        success: function (data) {
                if (data.d != null) {
                    response($.map(data.d, function (item) {
                        return {
                            value: item.name
                        }
                    }));
                }

            }
    });
} 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:36:39.890

这个公式对我有用：我的是一个 jsonp 请求，但应该这样做：

```
jQuery( "#input_2_5" ).autocomplete({
    source: function( request, response ) {
                    $.ajax({
                        url: "url/wp-admin/admin-ajax.php",
                        type: 'POST',
                        data: 'searchterm=' + request.term,
                        success: function( data ) {
                            response( $.map( data, function ( item ) {
                        return item;
                    }));

                        }
    }); 
```

显然，您的服务器端应该在查询字符串中寻找“ *searchterm ”...*