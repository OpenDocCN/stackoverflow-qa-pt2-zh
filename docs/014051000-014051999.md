# StackOverflow 问答 14051000-14051999

# visual-studio - 在 TFS 2012 中关闭继承后如何重新打开继承

> ID：14051000
> 
> 赞同：1
> 
> 时间：2012-12-27T07:24:24.463
> 
> 标签：visual-studio, tfs

在 TFS 2012 中，当我关闭 tfs Web 访问中文件夹的继承选项时

[http://tfsdemo.com:8080/tfs/Platform/Test1/_versionControl#path=%24%2FTest1%2FT1&_a=contents](http://tfsdemo.com:8080/tfs/Platform/Test1/_versionControl#path=%24%2FTest1%2FT1&_a=contents)

我无法重新打开继承，也无法访问安全页面，该页面说：

TF14098：访问被拒绝：用户 mike 需要 $/Test1/T1/ 的 AdminProjectRights 权限

关闭继承后如何重新打开继承？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:44:24.440

我不是 100% 确切地知道发生了什么，但是如果你说你已经从 T1 中删除了继承的权限，那么可能发生的情况是权限可能是在 Test1 级别设置的，而 T1 级别正在继承他们给你访问权限，所以一旦你从 Test1 中删除继承的权限，你就不能再访问 T1，因为它只是默认的用户/权限。

我猜您不是项目管理员（如果是这样，您将拥有权利）？我会检查您的项目管理员或项目集合管理员组，并让某人重新设置权限。

# crystal-reports - Crystal Report 7 合并模块

> ID：14051006
> 
> 赞同：0
> 
> 时间：2012-12-27T07:24:42.793
> 
> 标签：crystal-reports

有人知道 Crystal Reports 7 合并模块下载页面吗？

我正在重新编写遗留程序的安装程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:49:33.410

Crikey，我非常怀疑你会在这个阶段找到 CR7 的模块。它必须至少有10到12岁。如果您有一台安装了旧应用程序的机器，那么最好的办法是使用依赖遍历器来确定需要哪些组件来为其提供运行时支持。CR7 并不像一些较新的版本那样难以安装运行时，而且您只需要获取少量文件的副本。一个好的起点是检查 System32 目录中以“CR”开头的文件的属性（例如 CRPE32.dll 和 CRRUN32.exe）并从那里继续工作。

# c# - 用于多个 imei 验证的正则表达式

> ID：14051007
> 
> 赞同：5
> 
> 时间：2012-12-27T07:24:48.207
> 
> 标签：c#, regex

我正在为 imei 制作一个正则表达式，但我希望它可以选择使用多个 imei，例如 123456789123456 这将被接受，如果 commo ie 将在末尾，那么它也应该允许逗号，但只能在第 15 位之后而不是在第 15 位之前数字，我希望它应该验证这一点

123456789123456

如果添加了逗号，它应该只在第 15 位数字之后，如果添加了逗号，它应该像这样验证

123456789123456,123456789123456,123456789123456

所有第 15 位数字之间的逗号将被接受，而不是在第 15 位数字之前我做了这个 ^[0-9]{15,15}|[,]$ 但它不工作，因为它允许逗号，在第 15 位之前数字，我不想要，我该如何修改我的正则表达式？或者我想改变整个正则表达式？我正在使用这样的代码

```
 Regex regex = new Regex("^[0-9]{15,15}|[,]$");
        if (regex.IsMatch(textBox2.Text))
        {
            return false;
        }
        else
        {
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T07:29:32.350

15 位，而不是像（逗号和 15 位）这样的模式 n 次：

```
^[0-9]{15}(,[0-9]{15})*$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:28:56.160

你可能想要这样的东西：

```
^\d{15}(,\d{15})*$ 
```

它将接受 1 个 15 位数字序列，或多个 15 位数字序列，以逗号分隔。请注意，不允许使用空格和额外的逗号。

如果要允许空格，则应在验证之前删除所有空格。

# php - Codeigniter 动态页面标题不起作用

> ID：14051008
> 
> 赞同：1
> 
> 时间：2012-12-27T07:24:53.087
> 
> 标签：php, codeigniter, codeigniter-2

我环顾四周，发现了一些提到这一点的线程，但由于某种原因，当我将页面标题添加到 Public_Controller 时，它扩展了 MY_Controller 它不起作用。如果我不向扩展 Public_Controller 的其他控制器添加页面标题，那么它们的页面标题应该是“测试标题”。然而，事实并非如此。这是我所拥有的

Public_Controller.php：

```
class Public_Controller extends MY_Controller
{
function __construct()
{
    parent::__construct();
    $this->data['pageTitle'] = 'Test Title'; // pages without a title should display this
    ....
}

} 
```

Home.php（我的默认控制器...扩展 Public_Controller）：

```
class Home extends Public_Controller {

public function __construct() {
    parent:: __construct();
}

function index()
{ 
   $this->data['pageTitle'] = 'Your page title';

   $data['main_content'] = 'home';

   // My header which contains the <title> is in the template
   $this->load->view('includes/template', $data);
}

} 
```

如果我应该这样做，则上述方法有效，但如果页面没有此设置，我希望页面显示标题：

```
$data['pageTitle'] = 'Your page title'; 
```

标题区：

```
<title><?php echo $pageTitle; ?> </title> 
```

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T07:26:59.900

像这样做-

```
$data['pageTitle'] = 'Your page title'; 
```

反而

```
$this->data['pageTitle'] = 'Your page title'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T07:46:14.573

你希望你可以这样做：

```
<title><?php echo (isset($pageTitle)) ? $pageTitle : 'Default title text'; ?> </title> 
```

这样，如果未设置标题，它将输出默认值。

# vb.net - VB.Net 从后台线程更新 UI

> ID：14051009
> 
> 赞同：0
> 
> 时间：2012-12-27T07:25:14.090
> 
> 标签：vb.net, multithreading

我正在使用 VB.Net 开发类似项目的调度程序，应用程序从带有 Application.Run() 的“Sub Main”开始，所有程序代码都是一个类中的处理程序，它是在这里创建和启动的，

```
Public Sub Main()
  m_App = New myApp
  m_App.Start()
  Application.Run()
End Sub 
```

在 myApp 内部，有一个计时器来控制任务的执行，它会为每个任务启动一个线程，当任务完成时，如果检测到错误，我们会尝试显示警报窗口。为了显示警报窗口（frmAlert），我们测试了执行线程和主线程之间的两种不同通信方式：

1) 通过在任务对象中添加 pulic 事件，然后在主线程中的函数中添加处理程序

2）使用委托通知主线程

但是，无法显示警报窗口，也没有报告错误。用IDE调试后发现alert窗口已经显示成功，但是任务线程完成后会关闭。

这是一个简化的任务类（使用两种通信方法进行测试），

```
Public Class myProcess

    Public Event NotifyEvent()

    Public Delegate Sub NotifyDelegate()
    Private m_NotifyDelegate As NotifyDelegate

    Public Sub SetNotify(ByVal NotifyDelegate As NotifyDelegate)
        m_NotifyDelegate = NotifyDelegate
    End Sub

    Public Sub Execute()
        System.Threading.Thread.Sleep(2000)
        RaiseEvent NotifyEvent()
        If m_NotifyDelegate IsNot Nothing Then m_NotifyDelegate()
    End Sub

End Class 
```

以及主要的应用类

```
Imports System.Threading

Public Class myApp
    Private WithEvents _Timer As New Windows.Forms.Timer

    Private m_Process As New myProcess

    Public Sub Start()
        AddHandler m_Process.NotifyEvent, AddressOf Me.NotifyEvent
        m_Process.SetNotify(AddressOf NotifyDelegate)
        ProcessTasks()
    End Sub

    Private Sub Timer_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles _Timer.Tick
        ProcessTasks()
    End Sub

    Public Sub ProcessTasks()
        _Timer.Enabled = False
        '
        Dim m_Thread = New Thread(AddressOf m_Process.Execute)
        m_Thread.Start()
        '
        _Timer.Interval = 30000
        _Timer.Enabled = True
    End Sub

    Public Sub NotifyEvent()
        frmAlert.Show()
    End Sub

    Public Sub NotifyDelegate()
        frmAlert.Show()
    End Sub

End Class 
```

发现使用 NotifyEvent 或 NotifyDelegate 显示 frmAlert，但在 Execute 完成后立即关闭。

我可以知道我们如何从执行线程中弹出一个警报窗口，该窗口可以一直留在屏幕上，直到用户关闭它？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:59:54.303

如果您希望主线程在子线程引发和事件时执行任何操作，则需要确保主线程不会终止。

```
Public Sub Start()
    AddHandler m_Process.NotifyEvent, AddressOf Me.NotifyEvent
    m_Process.SetNotify(AddressOf NotifyDelegate)
    ProcessTasks()

    Do While True  'You might want to add a boolean condition here to instruct the main program to terminate when you want it to.
        System.Threading.Thread.Sleep(200)
    Loop
End Sub 
```

这将阻止主线程（程序）结束，因此可用于处理子线程引发的任何事件。注意：您的课程缺少终止条件。

# listview - 我们如何在右侧的 RichList 中放置图片？（黑莓）

> ID：14051012
> 
> 赞同：0
> 
> 时间：2012-12-27T07:26:04.103
> 
> 标签：listview, blackberry

我们只能在`RichList`列表的左侧放置一个位图图像，它是可选的。但是，我真的想将图像放在列表的右侧（例如，“arrow.png”看起来像一个列表）。

我搜索了很多，但让我知道如何将图像`RichList`放在右侧。

# java - 将现有的 Wicket 应用程序用于 Android 应用程序

> ID：14051014
> 
> 赞同：1
> 
> 时间：2012-12-27T07:26:15.433
> 
> 标签：java, android, spring, wicket, wicket-1.5

我想做一个杂货店的Android应用程序。我在服务器上部署了一个现有的 Wicket 应用程序，我想在我的 Android 应用程序中使用它来处理请求。将 wicket 应用程序用于 android 部分是否兼容。

有2种方式：

1.  使用现有的 Wicket 应用程序处理来自 Android 应用程序的请求。有人可以建议我这是可能的还是正确的方法？如果是的话，我该如何实现这一点，并且非常欢迎一些教程。

2.  我想到的第二件事是将 Spring 与 Wicket 集成，并将我的所有服务类迁移到 Spring，然后将这些 Spring 服务类用于 Android 应用程序。这种方法成本低且耗时。但是如果第一个方法不是那么好，我可能会考虑选择这个。因此，也欢迎任何关于这部分的教程。

任何帮助或建议表示赞赏。提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:18:29.740

我肯定会建议选择某种选项 2。如果您将服务迁移到 Spring、EJB 或其他任何东西，这并不重要，但服务（或业务逻辑或您想要调用的任何东西）和视图的分离（或演示文稿或布局或......）在这种情况下会非常方便。

我坚信“过早的优化是万恶之源”这句话，这意味着您应该真正跳过您根本不需要的任何附加层或间接层。但是，如果确实有一个用例证明分离为不同的层（或抽象级别或......）是合理的，您应该尽快解决它。以后你会从中受益良多。

只需将 Wicket 应用程序和 Android 应用程序视为您的杂货店的两种不同表示形式。如果您清楚地将业务逻辑与演示文稿分开并使其可以通过 HTTP（无论是 RESTful、SOAP 还是您喜欢的任何方式）访问，您可以轻松想象构建一个 iOS、Windows Phone 的杂货店演示文稿不接触核心本身。

# android - 如何在 Android 中获取当前的 SIM 卡号？

> ID：14051023
> 
> 赞同：44
> 
> 时间：2012-12-27T07:27:34.500
> 
> 标签：android, phone-number, telephonymanager, sim-card

我想知道Android中的用户手机号码。我使用了这个代码，但我没有得到数字。

```
TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE); 
        String n = tm.getLine1Number(); 
```

允许：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

安卓手机必须存号码吗 `settings --> about phone --> status --> myphone number`

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-27T07:31:52.807

我认为 sim 序列号和 sim 号是唯一的。你可以试试这个来获取 sim 序列号和获取 sim 号，不要忘记在清单文件中添加权限。

```
TelephonyManager telemamanger = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String getSimSerialNumber = telemamanger.getSimSerialNumber();
String getSimNumber = telemamanger.getLine1Number(); 
```

并将以下权限添加到您的`Androidmanifest.xml`文件中。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

让我知道是否有任何问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-17T11:28:46.000

获取电话号码、IMEI 和 SIM 卡 ID

```
TelephonyManager tm = (TelephonyManager) 
            getSystemService(Context.TELEPHONY_SERVICE); 
```

对于 SIM 卡，使用 getSimSerialNumber()

```
 //---get the SIM card ID---
    String simID = tm.getSimSerialNumber();
    if (simID != null)
        Toast.makeText(this, "SIM card ID: " + simID, 
        Toast.LENGTH_LONG).show(); 
```

您手机的电话号码，使用 getLine1Number() （某些设备不返回电话号码）

```
 //---get the phone number---
    String telNumber = tm.getLine1Number();
    if (telNumber != null)        
        Toast.makeText(this, "Phone number: " + telNumber, 
        Toast.LENGTH_LONG).show(); 
```

手机的IMEI号码，使用getDeviceId()

```
 //---get the IMEI number---
    String IMEI = tm.getDeviceId();
    if (IMEI != null)        
        Toast.makeText(this, "IMEI number: " + IMEI, 
        Toast.LENGTH_LONG).show(); 
```

需要权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-08T04:06:36.827

**更新：此答案不再可用，因为 Whatsapp 已停止将电话号码公开为帐户名称，请忽略此答案。**

==================================================== ================================

已经快 6 个月了，我相信我应该使用您可能想要考虑的替代解决方案来更新它。

截至今天，您可以使用 AccountManager 依赖另一个大型应用程序 Whatsapp。数以百万计的设备都安装了此应用程序，如果您无法通过 TelephonyManager 获取电话号码，您可以试一试。

允许：

```
<uses-permission android:name="android.permission.GET_ACCOUNTS" /> 
```

代码：

```
AccountManager am = AccountManager.get(this);
Account[] accounts = am.getAccounts();

ArrayList<String> googleAccounts = new ArrayList<String>();
for (Account ac : accounts) {
    String acname = ac.name;
    String actype = ac.type;
    // Take your time to look at all available accounts
    System.out.println("Accounts : " + acname + ", " + actype);
} 
```

检查 actype 的 whatsapp 帐户

```
if(actype.equals("com.whatsapp")){
    String phoneNumber = ac.name;
} 
```

当然，如果用户没有安装 Whatsapp，您可能无法获得它，但无论如何都值得一试。请记住，您应该始终要求用户确认。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T07:58:06.177

你一切都好，但问题在于`getLine1Number()`功能。

> **getLine1Number() -**此方法返回线路 1 的电话号码字符串，即 GSM 电话的 MSISDN。如果不可用，则返回 null。

此方法仅适用于少数手机，但不适用于所有手机。

因此，如果您需要根据 sim 执行操作（而不是调用），那么您应该使用`getSimSerialNumber()`. 它始终是**唯一的**、**有效**的并且始终**存在**。

* * *

## 回答 #5

> 赞同：-18
> 
> 时间：2012-12-27T07:29:53.437

您可以使用 TelephonyManager 执行此操作：

```
TelephonyManager t = (TelephonyManager)getSystemService(TELEPHONY_SERVICE); 
String number = t.getLine1Number(); 
```

你用过吗

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# css - 右侧 div 的内联块似乎没有生效

> ID：14051030
> 
> 赞同：0
> 
> 时间：2012-12-27T07:28:02.850
> 
> 标签：css

当谈到 CSS 时，我是一个新手。我正在处理一个 HTML 内容，我希望它看起来像单行中的 3 列。我有以下嵌入样式的 HTML：

```
<style type="text/css">
    #main {
        width: 100%;
        height: 250px;
    }

    #left-side {
        width: 20%;
        float: left;
        height: 100%;
    }

    #in-the-middle {
        width: 60%;
        text-align: center;
        display: inline-block;
        height: 100%;
    }

    #right-side {
        width: 20%;
        display: inline-block;
        height: 100%;
    }

</style>

<div id="main">

    <div id="left-side" align="left">
        Hello left
    </div>
    <div id="in-the-middle" align="center">
        Hello center
    </div>
    <div id="right-side">
        Hello right
    </div>
</div> 
```

看起来很简单，但不幸的是“Hello right”文本显示在页面的左侧。我已将#right-side 的显示设置为 inline-block，希望它显示在“Hello center”div 旁边，但它似乎没有生效。谁能看到我在这里缺少的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:33:51.450

使用您的右侧 div 宽度稍小然后它显示在同一列中

```
#right-side {
    width: 19%;
    display: inline-block;
    height: 100%;
} 
```

[看演示](http://jsfiddle.net/Dineshkani/8MLRL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:34:20.390

`float:left`与_`display: inline-block`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T07:37:25.737

由于元素是内联渲染的，HTML 代码中的空格会影响渲染。由于您的 s 之间有空格`div`，因此浏览器将在它们之间渲染几个像素的空格。

如果您想使用`inline-block`without ，解决方案是删除每个结束标记和开始标记`float`之间的空格，如他的：`</div>``<div>`

```
<div id="left-side">
    Hello left
</div><div id="in-the-middle">
    Hello center
</div><div id="right-side">
    Hello right
</div> 
```

在此处查看实况：http: [//jsfiddle.net/LbNGq/](http://jsfiddle.net/LbNGq/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T07:38:10.713

试试这个 CSS 脚本

```
<style type="text/css">
#main {
    width: 100%;
    height: 250px;
     display: inline-block;
}

#left-side {
    width: 20%;
    float: left;
    height: 100%;
}

#in-the-middle {
    width: 60%;
    text-align: center;
    display: inline-block;
    height: 100%;
    float:left;
}

#right-side {
    width: 20%;
    display: inline-block;
    height: 100%;
    float:left;
} 
```

# linux - 用awk在固定单词之后提取单词

> ID：14051032
> 
> 赞同：1
> 
> 时间：2012-12-27T07:28:31.567
> 
> 标签：linux, awk

我有一个`file.txt`包含很长行的文件：

```
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962797807950|mar0101|0|00000106829DAE7F3FAB187550B920530C00|0|0|4000018001000002||962797807950|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|1|||||||||||||0|0|||472|0|12|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|252|tid{111211344662580792}pfid{10}gob{1}rid{globitel} afid{}uid1{962797807950}aid1{1}ar1{100}uid2{globitel}aid2{-1}pid{1234}pur{!GDRC RESERVE AMOUNT 10000}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{100}ctr{StaffLine}ftksn{JMT}ftksr{0001}ftktp{PayCall Ticket}|| 
```

我只想打印这个文件中“ctr”之后的单词，即“StaffLine”，我不知道这个单词有多少个字符。

我试过了：

```
awk '{comp[substr("ctr",0)]{print}}' 
```

但它没有用。我怎样才能掌握这个词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:34:56.570

这是一种使用方法`awk`：

```
awk -F "[{}]" '{ for(i=1;i<=NF;i++) if ($i == "ctr") print $(i+1) }' file 
```

或者，如果您的版本`grep`支持类似 Perl 的正则表达式：

```
grep -oP "(?<=ctr{)[^}]+" file 
```

结果：

```
StaffLine 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:43:46.137

使用 sed：

```
sed 's/.*}ctr{\([^}]*\).*/\1/' input 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T07:45:38.133

处理它的一种方法是`sed`：

```
sed -e 's/.*}ctr{//; s/}.*//' file.txt 
```

这将删除直到并包括`{`单词之后的所有内容`ctr`（避免任何`ctr`带有后缀的单词出现问题，例如假设`pxctr{Bogus}`条目）；然后它从第一个剩余的`}`开始删除任何内容，只留下`StaffLine`样本数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:03:31.363

```
perl -lne '$_=m/.*ctr{([^}]*)}.*/;print $1' your_file 
```

测试如下：

```
> cat temp
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962797807950|mar0101|0|00000106829DAE7F3FAB187550B920530C00|0|0|4000018001000002||962797807950|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|1|||||||||||||0|0|||472|0|12|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|252|tid{111211344662580792}pfid{10}gob{1}rid{globitel} afid{}uid1{962797807950}aid1{1}ar1{100}uid2{globitel}aid2{-1}pid{1234}pur{!GDRC RESERVE AMOUNT 10000}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{100}ctr{StaffLine}ftksn{JMT}ftksr{0001}ftktp{PayCall Ticket}||
> perl -lne '$_=m/.*ctr{([^}]*)}.*/;print $1' temp
StaffLine
> 
```

# facebook - 新标签的基本原理

> ID：14051034
> 
> 赞同：0
> 
> 时间：2012-12-27T07:28:50.237
> 
> 标签：facebook, woothemes

woobox 和 ShortStacks 如何在我们的单个页面上管理多个选项卡？我的意思是，通过使用一个 Facebook 应用程序，我们只能拥有一个页面标签。而 ShortStack 能够在同一页面上安装多个选项卡。那么，谁能解释我，他们是怎么做的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T07:33:12.537

> 通过使用**一个**facebook 应用程序，我们可以只有**一个**页面标签

正确的。并且使用**多个**facebook 应用程序，您可以在同一页面下拥有**多个选项卡。**

看，不要混淆，您可以为所有应用程序提供相同的页面 url。

# java - 可以给zkoss tabbox添加标签吗？

> ID：14051037
> 
> 赞同：1
> 
> 时间：2012-12-27T07:28:56.367
> 
> 标签：java, zk

我有带有几个垂直选项卡的选项卡框。我需要在一些选项卡之间添加标签（或者只使用此标签制作禁用的选项卡）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:16:37.970

感谢康斯坦丁诉萨利霍夫。这是解决方案
`<tab label="Hello there!" disabled="true" />`

# java - 读取十六进制，并翻译成表格，以及使用搜索

> ID：14051046
> 
> 赞同：0
> 
> 时间：2012-12-27T07:29:31.147
> 
> 标签：java, string, file, search, hex

*本题的要点：*

**如何使用 Swing JTable 显示信息？**

**我怎样才能像程序 HxD 一样阅读 HEX？（从文件中，即）***

**如何在文件中搜索特定字符串？**

我已经完成了文件加载等。我尝试使用扫描仪读取我的 TEST.dat 文件，但似乎无法打印出消息。该文件是十六进制的，因为它包含来自 XBOX 游戏的浮点值，很容易修改，我必须解压缩它才能更好地阅读它。现在我想拿那个解压缩的文件，并在其中搜索一个字符串。但它不会让我“搜索”字符串，所以我不能真正开始。

所以我的大问题是，如何将加载的文件放到可以“读取”并搜索它的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:43:41.160

1.  每当您对 Java 中的特定类有疑问时，最好查阅[Javadocs](http://docs.oracle.com/javase/6/docs/api/)。文档`JTable`可以在[这里](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)找到，教程可以在[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)找到。
2.  你能澄清“读取十六进制”吗？如果它只是一个用十六进制编写的文本文件，您可以像普通文件一样传递到您的程序中。
3.  [通常使用正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)在文件中搜索特定的字符串和模式。如果您想以更简单的方式执行此操作，您可以遍历`Scanner`文件中的每个字符串，直到找到匹配项。

# solr - 如何使用 solr 空间搜索搜索两个坐标之间的记录

> ID：14051048
> 
> 赞同：1
> 
> 时间：2012-12-27T07:29:39.387
> 
> 标签：solr

我有一个开始 lat long 和一个结束 lat long，我必须使用 solr spatialSearch 搜索这些点之间的其他记录。如果有人可以帮助我，请提前感谢。

最佳纪录...

艾莎·扎法尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:39:06.453

You can use [Solr's Bounding-box](http://wiki.apache.org/solr/SpatialSearch#bbox_-_Bounding-box_filter) filter to find the records between the box but it works with single point (lat,lon) and a distance.

If you have two points then you can find the record between this box by using range query. Query could be something like :

> ..&fq=latField:[lat1 TO lat2] AND lonField:[lon1 TO lon2]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:51:55.287

这是 solr 查询：只需将 pt 更改为搜索坐标，将距离 d 更改为圆的半径。fq={!geofilt sfield=坐标}&pt=10.737845823323038,106.65631819042972&d=2.8'

使用此 schema.xml 配置从 solr 索引的每个文档：

< field name="coordinates" type="geohash" indexed="true" stored="true" multiValued="true" />

并且文档对象应该包含这样的字段： $fields['coordinates'] = implode(',', $post->getCoordinates()->getLatLng());

# ios - UITableView 滚动时覆盖视图滚动

> ID：14051051
> 
> 赞同：3
> 
> 时间：2012-12-27T07:29:49.560
> 
> 标签：ios, uitableview, uiscrollview

我`UIView`在`UITableview`. 当我滚动时`UITableview`，我希望覆盖 `UIView`以与滚动相同的速度移动`UITableview`，就像 facebook 应用程序的顶部菜单一样。

![在此处输入图像描述](../Images/9c36b381815c4106a948d814d56965e0.png)

有什么建议么？我尝试在 uitableview 的滚动委托中更改覆盖 uiview 的框架。类似于：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    self.lastOffsetY = scrollView.contentOffset.y;
}
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGFloat offset = self.lastOffsetOfY - scrollView.contentOffset.y;
    CGRect frame = self.overlayview.frame;
    frame.origin.y += offset;
    self.overlayview.frame = frame;
    self.lastOffsetOfY = scrollView.contentOffset.y;
} 
```

只需使用 contentoffset 值的更改。但覆盖 uiview 的移动与 uitableview 滚动不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:10:54.093

如果您只想让 UIView 始终保持在屏幕顶部，独立于 tableview，您只需将 UIView 添加到控制器的视图中，而不是将其添加到 tableview 中。

在您的 XIB 中，如果您使用的是一个，您应该有类似的东西

```
VIEW
    UITableView
    UIView 
```

而不是你可能拥有的：

```
VIEW
    UITableView
        UIView 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T18:12:36.063

如果您尝试完成类似于 Facebook 应用程序的覆盖，将覆盖添加到包含 UITableView/ScollView 的超级视图会更有效。这样，您就不需要编写一堆代码，每次用户滚动时都需要执行这些代码。

```
//in your View Controller:
UITableView *table = [[[UITableview alloc] init] autorelease];
CGRect frame = CGRectMake (tableOriginX, tableOriginY, width, height);
UIView *overlay = [[[UIView alloc] initWithDesieredFrame: frame] autorelease]; 
```

这样视图永远不会移动，而是给人一种始终存在于 TableView 顶部的错觉。如果像 facebook 一样，您希望关闭视图，您可以使用 TableView 的内部手势识别器来检测将关闭或召唤覆盖的轻弹（如 facebook）。

```
//Something like:
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset
{
if (velocity.y > 0)
{
    [self hideButtonPannelData];
}
if (velocity.y  < -0.8)
{
    [self revealButtonPannelData];
} 
```

# objective-c - 将 navigationController 的 rootViewController 设置为委托

> ID：14051053
> 
> 赞同：2
> 
> 时间：2012-12-27T07:29:57.530
> 
> 标签：objective-c, ios, delegates, uinavigationcontroller

我的问题可能是一种技术，而不是对如何设置控制器和代表的误解。也就是说，也许我应该采取不同的方式......

无论如何，我有一个带有 mainViewController 的情节提要设置。在其中有一个`UIButton`，当单击时，它会跳转到一个弹出窗口。弹出框的内容视图控制器是`UINavigationController`一个`rootViewController`例如`MyViewController`.

我正在尝试制作`mainViewController`a `delegate`of`MyViewController`并且正在 prepareForSegue 中这样做：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:(@"popSleepSegue")] || [segue.identifier isEqualToString:(@"popAlarmSegue")])
    {
        UIStoryboardPopoverSegue *popSegue = (UIStoryboardPopoverSegue *)segue;
        popSegue.popoverController.delegate = self;
        popSegue.popoverController.passthroughViews = [NSArray arrayWithObject:self.view];
        if ([segue.identifier isEqualToString:@"popAlarmSegue"])
        {
            if ([[segue destinationViewController] isKindOfClass:[UINavigationController class]])
            {
                UINavigationController *uNC = (UINavigationController *)[segue destinationViewController];
                MyViewController *aVC = (MyViewController *)uNC.topViewController;
                aVC.popController = popSegue.popoverController;
                aVC.delegate = self;
            }
        }
    }
} 
```

`[self.delegate class]`就像在`null`加载`NSLog`时一样`MyViewController`。而且，自然地，`delegate`回调不会在`mainViewController`.

本质上，我试图模仿 iPad 上 Apple 日历应用程序的行为。

我正在尝试使用委托按照成语向上游传递数据。诀窍是我试图`delegate`通过 a设置`UINavigationController`弹出框的内容视图。听起来太复杂了。也许还有另一个成语？

同时，我要试一试 NSNotificationCenter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:15:53.170

您必须潜在的“如果”陈述不正确：

```
if ([segue.identifier isEqualToString:@"popAlarmSegue"])
        {
            if ([[segue destinationViewController] isKindOfClass:[UINavigationController class]])
            { 
```

从代码的外观来看，您应该在 PopOver 的内容控制器中钻取控制器，而不是从 segue 中获取目标 viewController。似乎第二个“如果”不正确。

您需要添加：

```
 if ([[popSegue.popoverController contentViewController] isKindOfClass:[UINavigationController class]])
            {
                UINavigationController *uNC = (UINavigationController *)popSegue.popoverController;
                MyViewController *aVC = (MyViewController *)uNC.topViewController;
                aVC.popController = popSegue.popoverController;
                aVC.delegate = self;
            } 
```

# ruby-on-rails - Rails 3.2.8 Actionmailer - 堆栈级别太深加上未初始化的常量 Mail::Ruby19

> ID：14051056
> 
> 赞同：2
> 
> 时间：2012-12-27T07:30:16.697
> 
> 标签：ruby-on-rails, actionmailer

我正在关注 StackOverflow 帖子中引用的简单联系表单的教程。教程在这里： http: [//matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)

一切都是复制/粘贴并更改我的域和邮件设置的一些值。遇到两个非常奇怪的错误：当我第一次提交联系表时，我得到一个：

> 堆栈级别太深
> 
> Rails.root：/用户/我/应用程序
> 
> 应用程序跟踪 | 框架跟踪 | 全跟踪
> 
> 加载以下文件时发生此错误：
> 
> 邮件
> 
> 邮件/解析器/rfc2822_obsolete

如果我在不重新启动 rails 应用程序的情况下重新提交，我会得到：

> 未初始化的常量 Mail::Ruby19
> 
> Rails.root：/用户/我/应用程序
> 
> 应用程序跟踪 | 框架跟踪 | 全跟踪
> 
> app/mailers/notifications_mailer.rb:1:in `'
> 
> app/controllers/contact_controller.rb:11:in `create'
> 
> 加载以下文件时发生此错误：
> 
> 邮件

我觉得可能相关的部分是：

```
class NotificationsMailer < ActionMailer::Base
  default :from => "feedback@mydomain.com"
  default :to => "me@gmail.com"

  def new_message(message)
    @message = message
    mail(:subject => "mydomain Feedback")
  end
end

class Message
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :name, :email, :subject, :body

  validates :name, :email, :subject, :body, :presence => true
  validates :email, :format => { :with => %r{.+@.+\..+} }, :allow_blank => true

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end
end

class ContactController < ApplicationController
  def new
    @message = Message.new
  end

  def create
    @message = Message.new(params[:message])        
    if @message.valid?
        NotificationsMailer.deliver_new_message params[:message]
      # NotificationsMailer.new_message(@message).deliver
      redirect_to(root_path, :notice => "Message was successfully sent.")
    else
      flash.now.alert = "Please fill all fields."
      render :new
    end
  end
end 
```

其余模板非常简单且渲染良好。

另外，如果我错过了一些明显的冲突，请附加 gemfile：

```
source 'https://rubygems.org'
gem 'rails', '3.2.8'
gem 'sqlite3'
gem 'redis', '2.1.1'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
gem 'jade'
gem "haml", ">= 3.1.7"
gem "haml-rails", ">= 0.3.5", :group => :development
gem "hpricot", ">= 0.8.6", :group => :development
gem "ruby_parser", ">= 2.3.1", :group => :development
gem "rspec-rails", ">= 2.11.4", :group => [:development, :test]
gem "email_spec", ">= 1.2.1", :group => :test
gem "cucumber-rails", ">= 1.3.0", :group => :test, :require => false
gem "database_cleaner", ">= 0.9.1", :group => :test
gem "launchy", ">= 2.1.2", :group => :test
gem "capybara", ">= 1.1.2", :group => :test
gem "factory_girl_rails", ">= 4.1.0", :group => [:development, :test]
gem "bootstrap-sass", ">= 2.1.0.1"
gem "devise", ">= 2.1.2"
gem "cancan", ">= 1.6.8"
gem "rolify", ">= 3.2.0"
gem "simple_form", ">= 2.0.4"
gem "quiet_assets", ">= 1.0.1", :group => :development
gem "hub", ">= 1.10.2", :require => nil, :group => [:development]
gem 'paperclip'
gem 'aws-sdk'
gem 'aws-s3'
gem "high_voltage" 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:43:03.450

我认为 ContactController.rb 中的以下代码是罪魁祸首：

```
NotificationsMailer.deliver_new_message params[:message] 
```

您实际上没有方法名称 deliver_new_message

尝试删除它，并取消注释它下面的行：

```
NotificationsMailer.new_message(@message).deliver 
```

希望这可以帮助

# mysql - Mysql日期功能不工作少于

> ID：14051057
> 
> 赞同：28
> 
> 时间：2012-12-27T07:30:17.733
> 
> 标签：mysql, sql, date, select

我需要获取所有等于和小于 2012-12-28 的记录，我对此使用了波纹管查询，booking_time 是 DATETIME 字段，并且有小于 2012-12-28 的记录，但它返回零行。有人知道吗？

```
SELECT * FROM ctx_bookings WHERE DATE(booking_time)<=2012-12-28 ORDER BY id ASC 
```

表格归档

```
+---------------------+
| booking_time        |
+---------------------+
| 2012-12-20 03:10:09 |
| 2012-12-25 02:10:04 |
+---------------------+ 
```

请问有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-27T07:31:12.030

用单引号将值括起来，肯定会起作用

```
SELECT * 
FROM ctx_bookings 
WHERE DATE(booking_time) <= '2012-12-28' 
ORDER BY id ASC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/04989/3)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-27T07:55:18.313

如[日期和时间文字](http://dev.mysql.com/doc/en/date-and-time-literals.html)下所述：

> MySQL 可以识别[`DATE`](http://dev.mysql.com/doc/en/datetime.html)以下格式的值：
> 
> *   作为一个`'YYYY-MM-DD'`或`'YY-MM-DD'`格式的字符串。允许使用“宽松”语法：任何标点字符都可以用作日期部分之间的分隔符。例如，`'2012-12-31'`、`'2012/12/31'`、`'2012^12^31'`和`'2012@12@31'`是等价的。
>     
>     
> *   作为在任何一种格式中都没有分隔符的`'YYYYMMDD'`字符串`'YYMMDD'`，前提是该字符串作为日期有意义。例如，`'20070523'`and`'070523'`被解释为`'2007-05-23'`, 但是`'071332'`是非法的（它有无意义的月份和日期部分）并且变成`'0000-00-00'`.
>     
>     
> *   作为任一`YYYYMMDD`格式`YYMMDD`的数字，前提是该数字作为日期有意义。例如`19830905`和`830905`被解释为`'1983-09-05'`。

正如[@Barmar 评论](https://stackoverflow.com/questions/14051057/mysql-date-function-not-working-for-less-than#comment19415972_14051057)的那样，您的文字表达式`2012-12-28`被评估为算术`(2012 - 12) - 28`，等于 1,972。

根据[@JW. 的回答](https://stackoverflow.com/a/14051067)，您可以引用该表达式以获得有效的日期文字（上面的第一种形式）。或者：

*   在仍然引用文字的同时，您可以使用任何其他标点符号（甚至没有字符）作为日期部分之间的分隔符：

    ```
    WHERE DATE(booking_time) <= '2012_12_28'
    WHERE DATE(booking_time) <= '20121228' 
    ```

*   您可以删除分隔符并保留您的文字不加引号：

    ```
    WHERE DATE(booking_time) <= 20121228 
    ```

另请注意，使用这样的过滤条件，它在`DATE()`列上使用函数（在本例中为函数），需要进行全表扫描才能评估该函数——因此它不会从任何索引中受益。一个更明智的选择是在满足您的条件的列值范围（即*times* ）上更明确地过滤：

```
WHERE booking_time < '2012-12-28' + INTERVAL 1 DAY 
```

This is equivalent because any time that falls strictly prior to the following day will necessarily have occurred on or before the day of interest. It is sargable because the column is compared to a constant expression (the result of the `+` operation being deterministic), and therefore an index over `booking_time` can be traversed to immediately find all matching records.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T07:32:19.833

```
 SELECT * FROM ctx_bookings WHERE DATE(booking_time)<='2012-12-28' ORDER BY id ASC 
```

试试这个伙伴

# perl - <> 中写的“STDIN”会影响 perl 程序的行为吗？

> ID：14051060
> 
> 赞同：5
> 
> 时间：2012-12-27T07:30:38.473
> 
> 标签：perl

我有两个 perl 脚本，它们都等待用户输入如下内容，

他们两个是一样的吗？用 <> 编写的“STDIN”是否只是为了代码的用户可读性？如果不是，请告诉我不同​​之处。

```
a) $in = <STDIN>;

b) $in = <>; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T07:32:34.820

表格`<FILEHANDLE>`只会从 读取`FILEHANDLE`。

如果为空，表格`<>`将从中读取；或从名称仍在其中包含传递给程序的命令行参数的所有文件中。`STDIN``@ARGV``@ARGV`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T07:42:04.810

`<>`是 的简写`<ARGV>`。And[`ARGV`](http://search.cpan.org/perldoc?perlvar#ARGV)是一个特殊的文件句柄，它可以打开并遍历`@ARGV`（命令行参数）中指定的所有文件名，也可以使用别名`STDIN`（当`@ARGV`为空时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T07:54:11.497

有关`<>`您的更多信息，请[参阅 perlop，有关 I/O 运算符的部分](http://p3rl.org/perlop#I/O-Operators)

# android - 如何在 MapView 的 ItemizedOverlay 中更改叠加的 GeoPoint？

> ID：14051061
> 
> 赞同：0
> 
> 时间：2012-12-27T07:30:48.457
> 
> 标签：android, android-mapview, itemizedoverlay

我用 ItemizedOverlays 创建了一个 MapView。我需要在 mapView 上移动一些叠加层。如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:33:28.207

从集合中删除要更改的叠加层，并将新的 GeoPoints 叠加层添加到 MapView

# c - 在 BLAS (cuBLAS/CUDA) 中将标量添加到向量

> ID：14051064
> 
> 赞同：6
> 
> 时间：2012-12-27T07:31:00.923
> 
> 标签：c, cuda, add, blas, cublas

我不知道我是否只是忽略了一些明显的东西，但是尽管在谷歌上搜索了一下，但我看不到使用 BLAS 操作简单地将标量添加到向量（或矩阵）的方法。我正在尝试在 cuBLAS/CUDA 中执行此操作，因此我将采取任何方式在该框架内完成此操作。BLAS 具有`<t>scal`标量乘法 ( `cublas<t>scal`) 但加法的模拟量在哪里？！即类似于 GSL的东西`gsl_vector_add_constant`。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T07:56:17.237

可能完成您所要求的唯一方法是应用`axpy`相同大小的单位向量，该向量由您要添加的常数缩放。

所以操作就变成了`X <- X + alpha * I`，相当于把里面`alpha`的每一项都加进去了`X`。

* * *

编辑：

从评论中，您似乎预见到为 SAXPY 调用创建单位向量时会遇到一些困难。一种方法是使用 memset 调用在设备上设置单位向量的值，如下所示：

```
#include "cuda.h"
#include "cuda_runtime_api.h"
#include "cublas_v2.h"
#include <iostream>

int main(void)
{

    const int N = 10;
    const size_t sz = sizeof(float) * size_t(N);
    float *A, *I;

    float Ah[N] = { 0., 1., 2., 3., 4., 5., 6., 7., 8., 9\. };

    cudaMalloc((void **)&A, sz);
    cudaMemcpy(A, &Ah[0], sz, cudaMemcpyHostToDevice);

    // this creates a bit pattern for a single precision unity value
    // and uses 32-bit memset from the driver API to set the values in the
    // vector.
    const float one = 1.0f;
    const int* one_bits = reinterpret_cast<const int*>(&one);
    cudaMalloc((void **)&I, sz);
    cuMemsetD32(CUdeviceptr(I), *one_bits, N);

    cublasHandle_t h;
    cublasCreate(&h);

    const float alpha = 5.0f;
    cublasSaxpy(h, N, &alpha, I, 1, A, 1);

    cudaMemcpy(&Ah[0], A, sz, cudaMemcpyDeviceToHost);

    for(int i=0; i<N; i++) {
        std::cout << i << " " << Ah[i] << std::endl;
    }

    cublasDestroy(h);
    cudaDeviceReset();

    return 0;
} 
```

请注意，我直接使用 CUDA 运行时 API 为 CUBLAS 向量分配和复制了内存，而不是使用 CUBLAS 辅助函数（无论如何，它们只是运行时 API 调用的非常薄的包装器）。“棘手”部分是制作位模式并使用驱动程序 API memset 函数来设置数组的每个 32 位字。

您同样可以使用来自推力库的几行模板代码来完成整个事情，或者只是编写自己的内核，这可能就像

```
template<typename T>
__global__
void vector_add_constant( T * vector, const T scalar, int N)
{
    int tidx = threadIdx.x + blockIdx.x*blockDim.x;
    int stride = blockDim.x * gridDim.x;

    for(; tidx < N; tidx += stride) {
        vector[tidx] += scalar;
    }
} 
```

[免责声明：此内核是在浏览器中编写的，未经测试。使用风险自负]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T16:33:54.507

四个选项，从最好到最差排列：

*   在不同的库中找到您需要的功能
*   自己实现需要的功能
*   分配并初始化一个常量向量，将其与`*axpy`.
*   尽管 BLAS 正式不支持步幅为零，但某些实现将步幅为 0 的向量视为您想要的“标量”。也许 cuBLAS 可以。然而，依赖这个是一个*非常糟糕的主意*（糟糕到我强烈考虑不提它），因为这种行为不受 BLAS 的支持；您的代码将不可移植，甚至可能会被库的未来版本破坏，除非 nvidia 提供比 BLAS 更强大的 API 保证。

# iphone - Xcode-保存照片库中的图像以供进一步使用

> ID：14051065
> 
> 赞同：0
> 
> 时间：2012-12-27T07:31:01.307
> 
> 标签：iphone, objective-c, xcode, uiimagepickercontroller

我正在尝试使用 XCode 4.5 制作一个简单的应用程序，它允许用户通过访问他的照片库来选择任何特定的图像，然后在 Tesseract 库的帮助下提交该图像以供识别。

问题是我不知道如何进一步保存选中的用户图片，也就是说，我可以为用户提供一个进入图片库的选项，让他选择一张图片，但我不知道如何保存选择的图片，以便进一步处理。

我希望我说清楚了，感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T07:36:00.580

试试这个，保存图像：

```
NSString *imgName=[@"imgname.png"];
[[NSUserDefaults standardUserDefaults]setValue:imgName forKey:@"imageName"];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:imgName];
UIImage *image = imageView.image; // imageView is my image from camera
NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:savedImagePath atomically:NO]; 
```

检索图像：

```
NSString *imgName= [[NSUserDefaults standardUserDefaults]valueForKey:@"imageName"];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *filePath=[NSString stringWithFormat:@"%@/%@",documentsDir,imageName];
[imageview setImage:[UIImage imageWithContentsOfFile:filePath]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:40:20.213

我仍然不清楚你到底想要什么。您始终可以[将图像保存](https://stackoverflow.com/questions/178915/how-to-save-picture-to-iphone-photo-library)在照片库中或从照片库中[检索图像。](http://www.icodeblog.com/2009/07/28/getting-images-from-the-iphone-photo-library-or-camera-using-uiimagepickercontroller/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:57:24.330

您需要做的是在以下委托中选择后保存图像数据`- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {`您可以通过`UIImagePickerControllerOriginalImage`信息字典中的键获取图像，并可能将其分配给图像视图或按@Kalpesh 所述保存。查看[苹果的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)以获取更多信息。还可以查看这个很好的[教程](http://www.icodeblog.com/2009/07/28/getting-images-from-the-iphone-photo-library-or-camera-using-uiimagepickercontroller/)，该教程展示了如何从相册或相机中挑选照片。

# android - android中的java.lang.OutOfMemoryError，同时从android中的画廊获取图像

> ID：14051068
> 
> 赞同：8
> 
> 时间：2012-12-27T07:31:14.683
> 
> 标签：android, android-intent, bitmap, out-of-memory, image-capture

我正在使用代码从画廊中挑选一张图片

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery);

        Intent i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

        startActivityForResult(i, SELECT_PICTURE);
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == SELECT_PICTURE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            picturePath = cursor.getString(columnIndex);
            cursor.close();

            Log.v("picturePath", "picturePath: " + picturePath);
            Bitmap bitmap = BitmapFactory.decodeFile(picturePath);

            Intent intentUpload = new Intent(GalleryActivity.this, UploadActivity.class);
            // intentUpload.putExtra("BitmapImage", bitmap);
            MyApplicationGlobal.bitmap = bitmap;
            startActivity(intentUpload);
            finish();
        }
    }

public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    } 
```

但我收到错误

```
 FATAL EXCEPTION: main
 java.lang.OutOfMemoryError
at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:299)
at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:324)
at com.markphoto_activities.GalleryActivity.onActivityResult(GalleryActivity.java:59)
at android.app.Activity.dispatchActivityResult(Activity.java:4541)
at android.app.ActivityThread.deliverResults(ActivityThread.java:2740)
at android.app.ActivityThread.handleSendResult(ActivityThread.java:2787)
at android.app.ActivityThread.access$2000(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1032)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4025)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method) 
```

日志猫是

```
: E/dalvikvm-heap(2487): Out of memory on a 17915920-byte allocation.
"main" prio=5 tid=1 RUNNABLE
| group="main" sCount=0 dsCount=0 obj=0x400d5638 self=0x126c8
| sysTid=2487 nice=0 sched=0/0 cgrp=default handle=-1342909336
| schedstat=( 2650512000 283442000 1204 ) utm=226 stm=39 core=1
at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:299)
at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:324)
at com.markphoto_activities.GalleryActivity.onActivityResult(GalleryActivity.java:59)
at android.app.Activity.dispatchActivityResult(Activity.java:4541)
at android.app.ActivityThread.deliverResults(ActivityThread.java:2740)
at android.app.ActivityThread.handleSendResult(ActivityThread.java:2787)
at android.app.ActivityThread.access$2000(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1032)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4025)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method)
: D/skia(2487): libjpeg error 105 <  Ss=%d, Se=%d, Ah=%d, Al=%d> from allocPixelRef [3456   2592]
  : D/skia(2487): --- decoder->decode returned false
  : D/AndroidRuntime(2487): Shutting down VM 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-27T07:39:26.573

试试这个 ：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode,
            Intent imageReturnedIntent) {
        super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

        switch (requestCode) {
        case SELECT_PHOTO:
            if (resultCode == RESULT_OK) {
                Uri selectedImage = imageReturnedIntent.getData();
                try {
                    picImageView.setImageBitmap(decodeUri(selectedImage));
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }
            }
        }
    } 
```

然后声明以下函数：

```
private Bitmap decodeUri(Uri selectedImage) throws FileNotFoundException {
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(
                getContentResolver().openInputStream(selectedImage), null, o);

        final int REQUIRED_SIZE = 100;

        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE) {
                break;
            }
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(
                getContentResolver().openInputStream(selectedImage), null, o2);
    } 
```

谢谢。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-27T07:33:41.217

您尝试加载的图像太大。它导致堆大小迅速增长并填满，从而导致应用程序崩溃。尝试缩小图像然后加载它。

您可以使用以下代码片段：

```
public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T07:37:28.850

将以下函数添加到您的 java 文件中，并`onActivityResult()`在获取图像路径或图像 uri 后调用此函数，它将解决您的问题。

```
private Bitmap decodeUri(Uri selectedImage) throws FileNotFoundException {
    // Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(
            getContentResolver().openInputStream(selectedImage), null, o);

    // The new size we want to scale to
    final int REQUIRED_SIZE = 100;

    // Find the correct scale value. It should be the power of 2.
    int width_tmp = o.outWidth, height_tmp = o.outHeight;
    int scale = 1;
    while (true) {
        if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE) {
            break;
        }
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 2;
    }

    // Decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize = scale;
    return BitmapFactory.decodeStream(
            getContentResolver().openInputStream(selectedImage), null, o2);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T07:38:29.150

试试这个方法...

```
@Override
 protected void onActivityResult(int requestCode, int resultcode, Intent intent)
 {
     int orientation =0;
     super.onActivityResult(requestCode, resultcode, intent);

     if (requestCode == 1)
     {
         if (intent != null && resultcode == RESULT_OK)
         {             

               Uri selectedImage = intent.getData();

               String[] filePathColumn = {MediaStore.Images.Media.DATA};
               Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
               cursor.moveToFirst();
               int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
               String filePath = cursor.getString(columnIndex);
               Log.v("log","filePath is : "+filePath);

               cursor.close();
               try 
               {
                    ExifInterface exif = new ExifInterface(filePath);
                     orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
                    //Toast.makeText(getApplicationContext(), ""+orientation, 1).show();
                    Log.v("log", "ort is "+orientation);

               } 
               catch (IOException e)
               {
                   e.printStackTrace();
               }

               if(bmp != null && !bmp.isRecycled())
               {
                   bmp = null;               
               }

               File f = new File(filePath);

               bmp = decodeFile(f,300,420);
       }
     }
   } 
```

这是解码功能...

```
public static Bitmap decodeFile(File f,int WIDTH,int HIGHT){
     try {
         //Decode image size
         BitmapFactory.Options o = new BitmapFactory.Options();
         o.inJustDecodeBounds = true;
         BitmapFactory.decodeStream(new FileInputStream(f),null,o);

         //The new size we want to scale to
         final int REQUIRED_WIDTH=WIDTH;
         final int REQUIRED_HIGHT=HIGHT;
         //Find the correct scale value. It should be the power of 2.
         int scale=1;
         while(o.outWidth/scale/2>=REQUIRED_WIDTH && o.outHeight/scale/2>=REQUIRED_HIGHT)
             scale*=2;

         //Decode with inSampleSize
         BitmapFactory.Options o2 = new BitmapFactory.Options();
         o2.inSampleSize=scale;
         return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
     } catch (FileNotFoundException e) {}
     return null;
 } 
```

# android - 跨子网查找和通信

> ID：14051078
> 
> 赞同：0
> 
> 时间：2012-12-27T07:31:52.440
> 
> 标签：android, c++, linux, sockets, tcp

在同一个局域网中，如何找到对方并跨子网通信？

eg.clientA(10.66.128.75) 和 clientB(10.66.127.70) 都加入相同的多播地址(224.0.1.1)。他们如何找到彼此并跨子网通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:02:04.377

一种选择是UPnP。您可能想看看[Cling](http://4thline.org/projects/cling/ "紧贴") - 与 Android 兼容的 Java UPnP 堆栈

# java - 动态创建 JOOQ 查询

> ID：14051080
> 
> 赞同：12
> 
> 时间：2012-12-27T07:31:52.700
> 
> 标签：java, sql, jooq

我需要根据参数集动态创建一个 JOOQ SELECT 查询。我不知道如何动态附加它。请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-27T10:26:29.053

jOOQ 有两种类型的 API 来构造查询。

*   允许在 Java 代码中创建内联 SQL 语句的 DSL API，例如

    ```
    create.select(T.A, T.B).from(T).where(T.X.eq(3).and(T.Y.eq(5))); 
    ```

*   允许增量 SQL 构建的“模型”API。您可以随时通过[`getQuery()`](http://www.jooq.org/javadoc/latest/org/jooq/SelectFinalStep.html#getQuery--)DSL 查询对象上的方法访问“模型”API

此处的手册中给出了您想要执行的操作的示例：

[https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/dsl-and-non-dsl/](https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/dsl-and-non-dsl/)

例如，可选地添加一个连接：

```
DSLContext create = DSL.using(configuration);
SelectQuery query = create.selectQuery();
query.addFrom(AUTHOR);

// Join books only under certain circumstances
if (join)
    query.addJoin(BOOK, BOOK.AUTHOR_ID.equal(AUTHOR.ID));

Result<?> result = query.fetch(); 
```

或者，可选择添加条件/谓词：

```
query.addConditions(BOOK.TITLE.like("%Java%"));
query.addConditions(BOOK.LANGUAGE_CD.eq("en")); 
```

**更新：**鉴于您的评论，这就是您正在寻找的：

```
// Retrieve search strings from your user input (just an example)
String titleSearchString = userInput.get("TITLE");
String languageSearchString = userInput.get("LANGUAGE");
boolean lookingForTitles = titleSearchString != null;
boolean lookingForLanguages = languageSearchString != null;

// Add only those conditions that the user actually provided:
if (lookingForTitles)
    query.addConditions(BOOK.TITLE.like("%" + titleSearchString + "%"));
else if (lookingForLanguages)
    query.addConditions(BOOK.LANGUAGE_CD.eq(languageSearchString)); 
```

请注意，您还可以使用以下[`Field.compare(Comparator, Object)`](https://www.jooq.org/javadoc/latest/org/jooq/Field.html#compare-org.jooq.Comparator-T-)方法：

```
// Initialise your dynamic arguments
Field<String> field = BOOK.TITLE;
Comparator comparator = Comparator.LIKE;
String value = "%" + titleSearchString + "%";

// Pass them to the field.compare() method
query.addConditions(field.compare(comparator, value)); 
```

有关更多信息，请考虑[org.jooq.SelectQuery](http://www.jooq.org/javadoc/latest/org/jooq/SelectQuery.html) Javadoc

# javascript - Populating form on keydown ENTER and preventing form from submitting

> ID：14051083
> 
> 赞同：1
> 
> 时间：2012-12-27T07:32:09.273
> 
> 标签：javascript, jquery, forms, jquery-events, onsubmit

JS

```
$('.add_to_list').live('keydown',function (e){
    if(e.keyCode == '13'){
        var holder=$(this).attr('hold'),
            val=$(this).val();
            if(holder == 'mf' ||holder == 'mp'){
                    var v='#'+holder;   
                    h='<li class="entery deletable"><input type="hidden" name="'+holder+'[]" value="'+val+'">'+val+'</li>';
                    $(v).append(h);
                    $(this).val('');
            }
        e.prevent_default();    
        return false;
    }
    $('#save_clinic').submit(function(){return false;});
    }); 
```

HTML

```
<form accept-charset="utf-8" method="post" id="save_clinic" action="#">
<p>
<b>Findings</b>
<ol id='mf'></ol>
<input type="text" hold="mf" class="add_to_list" value="" name="">
<!--the input hv no name cause i dont want it to be submitted, this is for adding only-->
</p>
<p>
<b>Medical Procedures:</b>
<ol id=mp></ol>
<input type="text" hold="mp" class="add_to_list" value="" name="">
<!--the input hv no name cause i dont want it to be submitted, this is for adding only-->
</p>
<input type=submit>
</form> 
```

Problem:
I want to prevent submit on keypress `ENTER` and only allow submit on submit button click, but my current js prevent submit for both and if I remove

```
$('#save_clinic').submit(function(){return false;}); 
```

from js then the form auto submit when user is trying to populate the form.

Can some one please tell me what is the problem here? [example](http://jsfiddle.net/cheeken/Wuun)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:59:04.273

The function is called [preventDefault](https://developer.mozilla.org/en/docs/DOM/event.preventDefault) (no underscore, capital 'D'), not `prevent_default`. Give that a try and remove this line:

```
$('#save_clinic').submit(function(){return false;}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:52:39.937

I think this should be outside:

```
$('.add_to_list').live('keydown',function (e){
   if(e.keyCode == '13'){
    var holder=$(this).attr('hold'),
        val=$(this).val();
        if(holder == 'mf' ||holder == 'mp'){
                var v='#'+holder;   
                h='<li class="entery deletable"><input type="hidden" name="'+holder+'[]" value="'+val+'">'+val+'</li>';
                $(v).append(h);
                $(this).val('');
        }
   }
   e.prevent_default(); // take this out from the if   
   $('#save_clinic').submit(function(){return false;});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:15:56.553

```
$('.add_to_list').live('keydown',function (e){
        if(e.keyCode == '13'){
            var holder=$(this).attr('hold'),
                val=$(this).val();
                if(holder == 'mf' ||holder == 'mp' ||holder == 'orders'){
                        var v='#'+holder;   
                        h='<li class="entery deletable"><input type="hidden" name="'+holder+'[]" value="'+val+'">'+val+'</li>';
                        $(v).append(h);
                        $(this).val('');
                }
            //return false;
            e.preventDefault(); 
```

AND [http://www.bloggingdeveloper.com/post/Disable-Form-Submit-on-Enter-Key-Press.aspx](http://www.bloggingdeveloper.com/post/Disable-Form-Submit-on-Enter-Key-Press.aspx)

both works fine now.. thanks all

# layout - 图像数组

> ID：14051087
> 
> 赞同：0
> 
> 时间：2012-12-27T07:32:29.483
> 
> 标签：layout, blackberry, user-interface, java-me

我正在开发一个黑莓项目，为此我需要创建网格布局。我正在研究“黑莓 java sdk”。

我正在使用此代码

```
 public class GridScreen extends UiApplication {
// main method
public static void main(String[] args) {

GridScreen theApp = new GridScreen();
UiApplication.getUiApplication().pushScreen(new GFMScreen());
theApp.enterEventDispatcher();

}

}

// VFM
class GFMScreen extends MainScreen {

public GFMScreen() {

// this doesnt do anything for VCENTER!!
//super(Field.USE_ALL_HEIGHT);

// create a grid field manager, with 2 cols and 0 style param for super class
// style of Manager.FIELD_VCENTER | Field.USE_ALL_HEIGHT doesnt do a thing!
int columns = 2;
final GridFieldManager gfm = new GridFieldManager(columns, 0);

// add some items to the screen
 int size = 6;
 BitmapField[] fRay = new BitmapField[size];
 for (int i = 0; i < size; i++) {
  // create an bitmap field that's centered H + V (inside grid space)
  fRay[i] = new BitmapField(loadBitmap("images/" + (i + 1) + ".png"),
                          Field.FIELD_HCENTER | Field.FIELD_VCENTER | Field.FOCUSABLE);
   gfm.add(fRay[i]);
  }

  // set padding on top/bottom
 {
   // add gfm to screen - this does not center the gfm on the screen... is top aligned        no matter what!
   add(gfm);

     int gfmHeight = 48 * (size / columns);
  int borderHeight = (Display.getHeight() - gfmHeight) / 2;
   gfm.setBorder(BorderFactory.createSimpleBorder(
     new XYEdges(borderHeight, 0, borderHeight, 0),
     Border.STYLE_TRANSPARENT));

   System.out.println("border=" + borderHeight);
   System.out.println("display=" + Display.getHeight());
   System.out.println("gfm=" + gfmHeight);

  }

}

 /** @param res eg "images/icon.png" */
 public static Bitmap loadBitmap(String res) {
  EncodedImage img = EncodedImage.getEncodedImageResource(res);
  return img.getBitmap();
 }

}// end class 
```

这段代码有什么问题？是否有在 BlackBerry 中创建网格布局的最佳方法。在上面的代码错误是“Display.getHeight() 没有定义”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:44:04.200

希望这段代码有帮助：

```
Bitmap[] images = new Bitmap[6];
for ((int i = 0; i < 6; i++) {
   string filename = "images/" + String.valueOf(i + 1) + ".png"; 
   images[i] = Bitmap.getBitmapResource(filename);  
   }               
} 
```

# magento - 如何为 magento 可下载产品创建发票？

> ID：14051089
> 
> 赞同：1
> 
> 时间：2012-12-27T07:32:35.913
> 
> 标签：magento

我在为我的可下载产品生成发票时遇到问题。

我试图创建发票。但它显示这样的错误消息**Cannot create an invoice without products**。

任何人都可以帮助解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:31:38.987

这意味着如果您查看以下文件中出现此错误的代码，您尚未选择需要开票的产品

```
app/code/core/Mage/Adminhtml/controllers/Sales/Order/InvoiceController.php:88:                Mage::throwException($this->__('Cannot create an invoice without products.')); 
```

您会看到没有找到任何项目时会出现此错误

```
 $savedQtys = $this->_getItemQtys();
            $invoice = Mage::getModel('sales/service_order', $order)->prepareInvoice($savedQtys);
            if (!$invoice->getTotalQty()) {
                Mage::throwException($this->__('Cannot create an invoice without products.'));
            } 
```

并且您还可以看到这些项目是从您的帖子中查看的

```
 /**
     * Get requested items qty's from request
     */
    protected function _getItemQtys()
    {
        $data = $this->getRequest()->getParam('invoice');
        if (isset($data['items'])) {
            $qtys = $data['items'];
        } else {
            $qtys = array();
        }
        return $qtys;
    } 
```

这意味着您尚未选择或发布任何需要发布到此方法的内容。

# android - Android：ListView 的边距/填充，而没有将边距应用于标题？

> ID：14051090
> 
> 赞同：4
> 
> 时间：2012-12-27T07:32:43.290
> 
> 标签：android, android-layout, android-listview

是否可以在不将边距应用于标题的情况下为 ListView 设置边距/填充？我希望我的 ListView 类似于 Google Now 布局。除了这个小问题，我已经完成了所有工作。

**问题：**是否可以不将 ListView 的布局参数应用于其标题？

EDIT1：更多信息

紫色视图是 listView 的标题。我尝试在列表项布局中添加边距。这也不起作用。我需要的只是一种将边距应用于列表视图的方法，以便它不会将边距应用于列表视图中的标题。

EDIT2：我的布局 header.xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:orientation="vertical" >

    <View
        android:layout_width="match_parent"
        android:layout_height="@dimen/top_height"
        android:background="@color/top_item" />

    <View
        android:id="@+id/placeholder"
        android:layout_width="match_parent"
        android:layout_height="@dimen/sticky_height"
        android:layout_gravity="bottom" />

</FrameLayout> 
```

root_list.xml

```
<LinearLayout>
<com.test.CustomListView
    android:id="@android:id/list"
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    android:layout_height="wrap_content" /></LinearLayout> 
```

list_item.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/card_background"
android:orientation="vertical" >

<TextView
    android:id="@+id/textview_note"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textview_note_date"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/></LinearLayout> 
```

由于这篇文章的长度，我在这里删除了无用的布局属性。 ![这是它的样子](../Images/b2db77ffcdbf418a5a2d7d4d0400f55f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T12:32:32.933

经过大量挖掘后，我发现将listView布局参数与其标题分离是不可能的，并且标题是listView的一部分。因此，为了获得所需的边距效果，环顾四周后，我发现在列表视图项中为布局的根添加边距不起作用。因此，我在现有的根 LinearLayout（嵌套的 LinearLayout）中添加了另一个虚拟 LinearLayout，并在嵌套布局中添加了子项。现在将边距设置为内部布局会产生所需的效果。

代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginRight="16dp"
        android:layout_marginLeft="16dp"
        android:background="@drawable/list_selector"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textview_note"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/textview_note_date"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:53:36.673

在您的标题部分中，添加以下标签：

```
android:layout_alignParentLeft="true" 
```

这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-23T05:48:22.787

```
// Temp is the root view that was found in the xml
final View temp = createViewFromTag(root, name, attrs, false);

ViewGroup.LayoutParams params = null;

if (root != null) {
    if (DEBUG) {
        System.out.println("Creating params from root: " +
                root);
    }
    // Create layout params that match root, if supplied
    params = root.generateLayoutParams(attrs);
    if (!attachToRoot) {
        // Set the layout params for temp if we are not
        // attaching. (If we are, we use addView, below)
        temp.setLayoutParams(params);
    }

// We are supposed to attach all the views we found (int temp)
// to root. Do that now.
if (root != null && attachToRoot) {
    root.addView(temp, params);
}

// Decide whether to return the root that was passed in or the
// top view found in xml.
if (root == null || !attachToRoot) {
    result = temp;
}

...
return result; 
```

这是代码`LayoutInflater`，如您所见，如果添加一个`root`，它不为空，`layoutParams`从根生成。

然后如果第三个参数是**假**`temp.setLayoutParams(params)`的，那么只有`params`root生成的make！和温度是作为回报....

如果`attachToRoot`为**真**，root会执行root.addView(temp, params)，然后root作为return..

如果你只是这样做`LayoutInflater.from(this).inflate(R.layout.popup_choose_type, null);`，并且如果你设置了一些属性`paddingBottom`，你会感到惊讶的是它不起作用！！因为丢失了**LayoutParams**！

至于如何解决，可以看 [这里](https://stackoverflow.com/questions/5026926/making-sense-of-layoutinflater)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-27T07:40:27.800

您可以通过在 listview 的布局文件中提供边距来做到这一点，然后您将得到它的输出。

# gcc - 在我的操作系统的内存位置运行代码

> ID：14051092
> 
> 赞同：1
> 
> 时间：2012-12-27T07:32:47.003
> 
> 标签：gcc, assembly, x86, nasm, osdev

我正在用 C 语言开发一个操作系统（当然还有一些程序集），现在我想让它加载/运行外部（放置在 RAM 磁盘中）程序。我使用“-f bin”将测试程序组装为带有 nasm 的原始机器代码。我在该主题上发现的所有其他内容都是在运行 Windows 或 Linux 时加载代码。我使用以下代码将程序加载到内存中：

```
#define BIN_ADDR 0xFF000
int run_bin(char *file) //Too many hacks at the moment
{
    u32int size = 0;
    char *bin = open_file(file, &size);
    printf("Loaded [%d] bytes of [%s] into [%X]\n", size, file, bin);
    char *reloc = (char *)BIN_ADDR; //no malloc because of the org statement in the prog
    memset(reloc, 0, size);
    memcpy(reloc, bin, size);
    jmp_to_bin();
} 
```

以及跳转到它的代码：

```
[global jmp_to_bin]
jmp_to_bin:
    jmp [bin_loc] ;also tried a plain jump

bin_loc dd 0xFF000 
```

当我运行它时，这导致了 GPF。如果需要，我可以给你 GPF 的寄存器和/或屏幕截图。

我的操作系统的代码位于[https://github.com/farlepet/retro-os](https://github.com/farlepet/retro-os)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:05:35.743

您使用身份映射和平面内存空间，因此地址 0xff000 将在 BIOS ROM 范围内。难怪你不能在那里复制东西。最好更改该地址；）

![截图](../Images/9aa794195862b10fb6d87b804c560f26.png)

# java - JAVA XML PARSING TO SPLIT XML based on object 和 class 标签元素

> ID：14051093
> 
> 赞同：0
> 
> 时间：2012-12-27T07:32:57.473
> 
> 标签：java, xml

这是我正在解析的 JAVA XML..

```
<objects>          
    <object>...<class>A /<class>...</object>
    <object>...<class>B</class>....</object>
    <object>...<class>A /<class>...</object>
</objects> 
```

现在我使用下面的代码将 XML 拆分为基于对象标记的 3 个 XML。

```
 DocumentBuilder builder = dbf.newDocumentBuilder();
    Document doc = builder.parse("xml");
    doc.getDocumentElement().normalize();

    TransformerFactory tranFactory = TransformerFactory.newInstance(); 
    Transformer aTransformer = tranFactory.newTransformer(); 

    NodeList list =(NodeList) doc.getElementsByTagName("object");
    System.out.println("XML SPLITED");

       for (int i=0; i<list.getLength(); i++){
           Node element = list.item(i).cloneNode(true);
       if(element.hasChildNodes()){
        Source src = new DOMSource(element); 
        FileOutputStream fs=new FileOutputStream("XML" + i + ".xml");
        Result dest = new StreamResult(fs);
        aTransformer.transform(src, dest);
        fs.close();
       } 
```

我的要求是只获取带有类标签 A 的文件。所以我的输出将只有 2 个 XML。请发布您的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:43:44.613

使用您的示例，您可以这样做：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Result;
import javax.xml.transform.Source;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

public class XmlSplitting {
  private static final Logger logger = Logger.getLogger(XmlSplitting.class.getName());
  private static final String FILE_PATH = "./";

  private DocumentBuilder builder;
  private Transformer transformer;

  public XmlSplitting() throws ParserConfigurationException, TransformerConfigurationException {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    this.builder = factory.newDocumentBuilder();

    TransformerFactory transfromerFactory = TransformerFactory.newInstance();
    this.transformer = transfromerFactory.newTransformer();
  }

  public static void main(String[] args) {
    try {
      XmlSplitting s = new XmlSplitting();
      s.run();
    } catch (ParserConfigurationException | SAXException | IOException | TransformerException x) {
      logger.log(Level.SEVERE, "Error", x);
    }
  }

  private void run() throws ParserConfigurationException, SAXException, IOException, TransformerException {
    File file = new File(FILE_PATH + "xml.xml");
    if (file.exists()) {
      Document document = this.builder.parse(file);
      document.normalize();

      NodeList list = document.getElementsByTagName("object");
      for (int i = 0; i < list.getLength(); i++) {
        Node node = list.item(i);
        if (Node.ELEMENT_NODE == node.getNodeType()) {
          Element object = (Element)node;
          NodeList classes = object.getElementsByTagName("class");
          if (1 == classes.getLength()) {
            Node clazz = classes.item(0);
            if (Node.ELEMENT_NODE == clazz.getNodeType()) {
              this.copyNodeToNewFile(clazz.getTextContent(), node, i);
            }
          } else {
            logger.log(Level.SEVERE, "Number of class nodes in node object is different than expected. Number of class nodes found: {0}.", classes.getLength());
          }
        }
      }
    } else {
      logger.log(Level.SEVERE, "You provided wrong path for xml file.");
    }
  }

  private void copyNodeToNewFile(String content, Node node, int i) throws IOException, TransformerException {
    boolean copy = this.nodeShouldBeCopied(content);
    logger.log(Level.INFO, "Node with content {0} will {1}be moved to separete file.", new Object[]{content, true == copy ? "" : "not "});
    if (copy) {
      String fileName = String.format("%sxml%d.xml", FILE_PATH, i);
      try (FileOutputStream fos = new FileOutputStream(fileName)) {
        Source source = new DOMSource(node);
        Result destination = new StreamResult(fos);
        this.transformer.transform(source, destination);
      }
    }
  }

   // here you can change condition to copy given node to file
  private boolean nodeShouldBeCopied(String content) {
    return content.contains("A");
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T11:51:53.420

使用巴西框架解析 XML 怎么样？它会让你的代码更具异国情调，你可以告诉你的朋友：http: [//jcoltrane.sourceforge.net/userguide/extending_parsing_process.html](http://jcoltrane.sourceforge.net/userguide/extending_parsing_process.html)

# java - java动画android持续时间

> ID：14051095
> 
> 赞同：2
> 
> 时间：2012-12-27T07:32:59.493
> 
> 标签：java, android, xml, animation, duration

这个动画不是动画它只是立即消失不管我在这里设置什么持续时间是java代码和xml

Java 代码：

```
Animation shrink =AnimationUtils.loadAnimation(Page.this, R.anim.shrink);
    deleteMe.startAnimation(shrink); 
```

XML 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true" 
    android:shareInterpolator="true"
    android:interpolator="@android:anim/linear_interpolator"
    android:duration="10000">
    <scale
        android:duration="10000"
        android:fillAfter="true"
        android:fromXScale="1.0"
        android:toXScale="0" >
    </scale>
    <alpha
        android:duration="10000"
        android:fromAlpha="1.0"
        android:toAlpha="0">
    </alpha>
</set> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T08:06:34.770

使用所需的值指定set 标记的**android:interpolator**属性。该插值器只是以稳定的速率将对象从起点移动到终点（或旋转）。

例如::

```
android:interpolator="@android:anim/linear_interpolator" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:14:22.803

在我的一个应用程序中，我编写了这段代码来从左到右移动一个块并且它运行良好

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" android:shareInterpolator="false" >
<rotate android:interpolator="@android:anim/accelerate_interpolator" 
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:duration="1500"
    android:startOffset="1500"/>

<translate android:interpolator="@android:anim/accelerate_decelerate_interpolator" 
    android:fromYDelta="0"
    android:toYDelta="-100%p"
    android:duration="3000"/>

<translate android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:toXDelta="100%"
    android:duration="1500"
    android:startOffset="1500" />

</set> 
```

# ios - ios SKStoreProductViewController loadProductWithParameters:completionBlock 错误流程

> ID：14051105
> 
> 赞同：6
> 
> 时间：2012-12-27T07:33:58.340
> 
> 标签：ios, callback

我使用 SKStoreProductViewController，当将正确的 id 传递给方法**loadProductWithParameters:completionBlock:**时，一切顺利，但是当向该方法传递错误的 id 时，它不会用错误消息回调 completionBlock。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T15:51:42.360

我们也看到了这一点。通过反复试验，我们推断在调用 loadProductWithParameters:completionBlock:*后呈现 store kit 视图控制器使完成块运行。*

# javascript - 从谷歌地图中的纬度和经度获取位置地址

> ID：14051106
> 
> 赞同：7
> 
> 时间：2012-12-27T07:33:58.283
> 
> 标签：javascript, jquery, google-maps

我想在点击谷歌地图并获取纬度和经度后从他们那里获取位置并将其（地址）放入归档中`input#searchTextField`。我该怎么办？

我试过了，但不适合我：

**演示：http:** [//jsfiddle.net/DXkZJ/](http://jsfiddle.net/DXkZJ/)

```
<input id="searchTextField" type="text" size="50" style="text-align:    left;width:357px;direction: ltr;">
<div id="map_canvas" style="height: 350px;width: 500px;margin: 0.6em;"></div>

 $(function () {
     var lat = 44.88623409320778,
         lng = -87.86480712897173,
         latlng = new google.maps.LatLng(lat, lng),
         image = 'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png';

     //zoomControl: true,
     //zoomControlOptions: google.maps.ZoomControlStyle.LARGE,

     var mapOptions = {
         center: new google.maps.LatLng(lat, lng),
         zoom: 13,
         mapTypeId: google.maps.MapTypeId.ROADMAP,
         panControl: true,
         panControlOptions: {
             position: google.maps.ControlPosition.TOP_RIGHT
         },
         zoomControl: true,
         zoomControlOptions: {
             style: google.maps.ZoomControlStyle.LARGE,
             position: google.maps.ControlPosition.TOP_left
         }
     },
     map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions),
         marker = new google.maps.Marker({
             position: latlng,
             map: map,
             icon: image
         });

     var input = document.getElementById('searchTextField');
     var autocomplete = new google.maps.places.Autocomplete(input, {
         types: ["geocode"]
     });

     autocomplete.bindTo('bounds', map);
     var infowindow = new google.maps.InfoWindow();

     google.maps.event.addListener(autocomplete, 'place_changed', function (event) {
         infowindow.close();
         var place = autocomplete.getPlace();
         if (place.geometry.viewport) {
             map.fitBounds(place.geometry.viewport);
         } else {
             map.setCenter(place.geometry.location);
             map.setZoom(17);
         }

         moveMarker(place.name, place.geometry.location);
         alert(place.name);
         $('.MapLat').val(place.geometry.location.lat());
         $('.MapLon').val(place.geometry.location.lng());
     });
     google.maps.event.addListener(map, 'click', function (event) {
         $('.MapLat').val(event.latLng.lat());
         $('.MapLon').val(event.latLng.lng());
         alert(event.latLng.place.name)
     });
     $("#searchTextField").focusin(function () {
         $(document).keypress(function (e) {
             if (e.which == 13) {
                 return false;
                 infowindow.close();
                 var firstResult = $(".pac-container .pac-item:first").text();
                 var geocoder = new google.maps.Geocoder();
                 geocoder.geocode({
                     "address": firstResult
                 }, function (results, status) {
                     if (status == google.maps.GeocoderStatus.OK) {
                         var lat = results[0].geometry.location.lat(),
                             lng = results[0].geometry.location.lng(),
                             placeName = results[0].address_components[0].long_name,
                             latlng = new google.maps.LatLng(lat, lng);

                         moveMarker(placeName, latlng);
                         $("input").val(firstResult);
                         alert(firstResult)
                     }
                 });
             }
         });
     });

     function moveMarker(placeName, latlng) {
         marker.setIcon(image);
         marker.setPosition(latlng);
         infowindow.setContent(placeName);
         //infowindow.open(map, marker);
     }
 });​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T07:47:40.073

好的，所以首先您需要反向地理编码，而不是常规地理编码，因为您要从纬度/经度进入地址，而不是相反（参见[参考资料](https://developers.google.com/maps/documentation/javascript/geocoding?hl=en#ReverseGeocoding)）。其次，您的主要听众永远不会做任何事情，因为它几乎立即声明`return false`；在这种情况下，您可能想要`event.stopPropogation()`. 此外，谷歌地图将在 DOM 树中比 更深地拦截您的鼠标点击`document`，因此无论如何该事件都不会被高度监听。

所以我所做的是将您的地理编码更改为反向地理编码，并将文档侦听器中的代码移动到谷歌侦听器中。如果您想保留在焦点上添加的侦听器的行为，您可以简单地在地图对象上创建一个新的侦听器。这是一个[演示这些更改的工作 jsfiddle](http://jsfiddle.net/DXkZJ/1/)，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:46:19.620

看看 gmap 开发者 api。对于主题[反向地理编码（地址查找）](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)。你会得到你的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T07:59:36.750

只需在 moveMarker() 函数之后添加此代码

```
$("#map_canvas").click(function() {          
    $("#searchTextField").val($(".MapLat").val() +", "+$(".MapLon").val());
}); 
```

希望，这就是你所需要的:)

# facebook - 发送按钮未显示在我的网页中

> ID：14051108
> 
> 赞同：0
> 
> 时间：2012-12-27T07:34:18.980
> 
> 标签：facebook, send

我也尝试了 HTML5 和 XFBML 版本，但发送按钮没有出现在我的网页上。我将[https://developers.facebook.com/docs/reference/plugins/send/](https://developers.facebook.com/docs/reference/plugins/send/)中的代码用于[http://www.rakthadanam.com](http://www.rakthadanam.com)。在developers.facebook.com 上显示正确，但在我的网站上没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T08:07:44.857

好吧，那是因为您从社交插件中删除了它。就像按钮旁边没有空间，你将不得不把它变大。

另外，源代码中有“send=false”，所以当然根本没有发送按钮。

# sql-server - 如何在sql中的case语句中将变量作为null传递

> ID：14051110
> 
> 赞同：0
> 
> 时间：2012-12-27T07:34:21.093
> 
> 标签：sql-server, sql-server-2008, sql-server-express

如何在此查询中传递“@abo 为空”和“@rh 为空”......这给出了错误......我正在这样做

```
select Distinct m.donorId,m.customid, FirstName + ' ' + Isnull(MiddleName,' ') + ' ' + isNull(LastName,'') as donorName  from m_donor as m inner join phlebotomyDetail as phy on m.DonorID=phy.DonorID left outer join  AVIRaw as avi ON  @prefix + RIGHT('000000' + CAST(m.DonorID AS VARCHAR(6)), 6) = avi.sampleid
            Where (m.donorId = @donorid OR @donorid is null) and
            (m.DOB =  @todate OR @todate Is Null) and
            (m.FirstName Like + '%' + @fullname + '%' OR m.MiddleName Like + '%' + @fullname + '%' OR m.LastName Like  +'%' + @fullname + '%' OR @fullname Is Null) and
            (m.cellPhone Like +'%' + @phone + '%' OR m.HomePhone Like + '%' + @phone + '%' OR m.WorkPhone Like + '%' + @phone + '%' OR m.OtherPhone Like + '%' + @phone + '%' OR  @phone Is Null) and
            (m.CustomID Like '%' + @custid OR @custid Is Null) AND
            (phy.BagNumber=@bagno OR @bagno is NULL) AND
            (phy.SegmentNo=@segno OR @segno is NULL ) AND
        (avi.result= CASE WHEN avi.AnalysisName = 'ABO' THEN @abo or @abo is null ELSE CASE WHEN avi.AnalysisName = 'RH' THEN left(@rh,3) or @abo is null END END) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:35:08.530

我会尝试类似的东西：

```
avi.result= 
CASE WHEN avi.AnalysisName = 'ABO' 
THEN @abo 
ELSE 
    CASE WHEN avi.AnalysisName = 'RH' 
    THEN left(@rh,3) 
    END 
END 
```

案例结果的类型必须与 avi.result 的类型兼容。

恕我直言，您应该将 ELSE 放在第二个/内部案例中，或使用以下语法：

```
avi.result= 
CASE avi.AnalysisName 
    WHEN 'ABO' THEN @abo  
    WHEN 'RH' THEN left(@rh,3)  
    ELSE 'DEF' 
END 
```

# ios - 如何在 Facebook 上上传帖子？

> ID：14051111
> 
> 赞同：1
> 
> 时间：2012-12-27T07:34:22.823
> 
> 标签：ios, facebook-comments

我想在 Facebook 上发布一些带有链接的文本。我能够做到这一点，但问题是，当我第一次启动应用程序时，它会要求登录，但之后当我再次使用在 Facebook 上发帖时，它既不会请求许可，也没有任何选择注销我的帐户并使用另一个用户再次登录。

当我设置

```
[self authorizeWithFBAppAuth:YES safariAuth:YES]; 
```

然后它重定向到 safari 并要求允许在 Facebook 上发帖，但在允许后我无法发帖，但当我使用时

```
[self authorizeWithFBAppAuth:NO safariAuth:NO]; 
```

然后它不需要任何许可或在 facebook 上发布。所以我希望每次用户点击发布按钮时，它都会询问是否允许，或者必须有一个选项来注销或与另一个用户登录。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:42:08.863

对于注销功能，在屏幕上添加一个按钮，并在其方法中添加以下代码：

```
 SHK logoutOfAll];
       [SHKFacebook logout];
       [SHK logoutOfService:@"SHKFacebook"]; 
```

这条线没问题：`[self authorizeWithFBAppAuth:YES safariAuth:YES];`

不要试图改变这一点。

# regex - 正则表达式找到正好有两个“a”的单词

> ID：14051114
> 
> 赞同：0
> 
> 时间：2012-12-27T07:34:34.370
> 
> 标签：regex, python-2.7

我想要一个正则表达式，它可以找到恰好两个`a`（不是 3、4、5、。）需要模式的单词？不必排成一行。 `["taat","weagda","aa"]`可以，但不是这个`["a","eta","aaa","aata","ssdfaasdfa"]`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T07:38:24.723

这将起作用：

```
^[^a]*a[^a]*a[^a]*$ 
```

更通用的版本，您可以将 2 替换为任意数字：

```
^(?:[^a]*a){2}[^a]*$ 
```

上面的 2 个正则表达式利用`a`了单个字符这一事实，因此我们可以确保所有其他字符都不是`a`. 第二个使用重复符号。

更通用的版本“不超过 n 个非重叠子字符串”（启用 DOTALL 模式）：

```
^(?!(?:.*sstr){3})(?:.*sstr){2}.*$ 
```

where`sstr`是一个正则表达式转义的子字符串，并且负前瞻中的重复次数必须比我们要匹配的次数多 1。

这个有点棘手，我使用负前瞻来确保字符串不包含 substring 的 n + 1 个非重叠实例`sstr`，然后尝试准确找到 n 个非重叠实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:38:03.100

您也可以将[`Counter`](http://docs.python.org/2.7/library/collections.html#counter-objects)对象用于此任务。

```
In [1]: from collections import Counter

In [2]: words = ["taat","weagda","aa", "a","eta","aaa","aata","ssdfaasdfa"]

In [3]: [word for word in words if Counter(word)['a'] == 2]
Out[3]: ['taat', 'weagda', 'aa'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T07:43:19.190

在这种情况下，我认为，您可以使用字符串来查找，只需使用 for 循环。

```
mylist = ["taat","weagda","aa","eta","aaa","aata","ssdfaasdfa"];
resultList = [];
for x in mylist:
    count = 0;
    for c in x:
        if c == 'a':
            count = count +1;
    if count == 2:
        resultList.append(x);

print(resultList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T07:45:40.803

用两个正则表达式来做，而不是试图把它全部塞进一个。

检查您的单词`a[^a]*a`是否匹配`a.*a.*a`

# google-maps-api-3 - 强制 Google 地方信息自动填充结果包含国家和城市

> ID：14051122
> 
> 赞同：1
> 
> 时间：2012-12-27T07:35:11.183
> 
> 标签：google-maps-api-3

我正在尝试从“输入您的位置”文本框中解析一个城市和国家。Google Places Autocomplete 擅长检索位置，但并非每个结果都包含国家和城市（例如，输入“俄罗斯”将显示“俄罗斯”作为顶部结果，其中没有列出城市）。无论保存用户类型的位置是什么，但城市和国家/地区部分需要单独存储。

有没有办法强制每个自动完成结果同时包含一个城市和一个国家，但不限于这两个？（例如，输入“俄罗斯”将显示“莫斯科，俄罗斯”或“115 X 街，莫斯科，俄罗斯”等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-29T18:44:25.797

我的解决方案

```
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Place Autocomplete</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

  <script src="https://code.jquery.com/jquery-1.11.2.js" type="text/javascript"></script>

  <script src="https://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places&amp;language=en" type="text/javascript"></script>

  <script type="text/javascript">

      var autocomplete; 
      var place;

      function initialize() 
      {
        var options       = {types: ['(cities)']};
        var input         = document.getElementById('searchTextField');

        autocomplete  = new google.maps.places.Autocomplete(input, options);

        google.maps.event.addListener(autocomplete, 'place_changed', function() {
          fillInPlace();
        });
      }

      function fillInPlace() {
        place = autocomplete.getPlace();
        var $address = $(place['adr_address']);
        $('#resultTextField').val($address.text());
      }

      $(document).on('ready', function(){
          $("#searchTextField").on('focusout', function(e){
              setTimeout(function() {
                    $("#searchTextField").val('');
              }, 1000);
          });
      })

      google.maps.event.addDomListener(window, 'load', initialize);

  </script>
</head>

<body>
  <form class='form'>
    <div class="form-group">
      <div class="col-xs-12">
        <label for="searchTextField">City</label>
      </div>
      <div class="col-xs-12">
        <input id="searchTextField" type="text" placeholder="Search" autocomplete="on" class='form-control pull-left' style='width:40%; margin-right:3px;'>
        <input id="resultTextField" type="text" placeholder="" autocomplete="on" class='form-control pull-left' disabled='disabled' style='width:55%'>
      </div>
    </div>
  </form>
</body>
</html>
```

# java - 在我们基于 java spring 的应用程序中加密/解密敏感（主要是密码）数据

> ID：14051128
> 
> 赞同：-3
> 
> 时间：2012-12-27T07:36:01.870
> 
> 标签：java, spring, encryption, public-key-encryption, encryption-symmetric

我们正在开发一个使用 java spring 框架来自动管理多个设备的应用程序。在我们应用程序的初始配置中，用户选择需要管理的设备并输入他们的凭据。目前，我们将这些凭证以纯文本格式保存到数据库中。现在我需要编写一个实用程序类来加密这些敏感数据，同时将其保存到数据库中，并在检索它们时解密。基本上，我们不希望每个人都通过简单地查看 db 表来查看这些凭据。最好的方法是什么？示例代码片段非常有用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:38:34.807

我相信[PasswordEncoder](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/core-services.html)可以帮助你。

# iphone - “应用程序窗口应具有根视图控制器”条件外观

> ID：14051129
> 
> 赞同：1
> 
> 时间：2012-12-27T07:36:11.000
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiwindow

我正在使用 Xcode 4.5 和 iOS6 为 iPhone 编写应用程序。我还创建了一个新`UIWindow`的能够管理状态栏区域（在那里显示消息等）我正在使用情节提要，我的`appDelegate`方法如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    return YES;
} 
```

当我将它放在名为的方法中时，该消息*不会出现*在控制台中`viewDidAppear`：

```
- (void)viewDidAppear:(BOOL)animated     {

    if (!window) {
        window = [[SGStatusBar alloc] initWithFrame:CGRectZero];
        window.frame = [[UIApplication sharedApplication] statusBarFrame];
        window.alpha = 0.5f;

        [self.view.window makeKeyAndVisible]; // has to be main window of app
        window.hidden = NO;
    }  
} 
```

同样的方法，放在`viewDidLoad`控制台中会给出警告：

```
2012-12-27 11:34:20.838 NewApp[433:c07] Application windows are expected to have a root view controller at the end of application launch 
```

这是因为我创建了一个新的`UIWindow`吗？为什么这两种方法之间的差异如此之大？

而且，最重要的是，如何*在*将代码放入`viewDidLoad`方法中时消除此警告？

**编辑：**

[我在这里](https://stackoverflow.com/a/7525069/1313939)遇到了同样的问题，但这不是我想要解决的方式（实际上是我现在正在解决的*方式*）

我尝试通过执行以下操作将当前的 ViewController 设置为窗口的根视图控制器：

```
ViewController *vcB = [[UIViewController alloc] init];
window.rootViewController = vcB; 
```

但我不断收到警告说：

```
Incompatible pointer types initializing 'ViewController *__strong' with an expression of type 'UIViewController *' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:07:52.610

设置`window.rootViewController`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:12:30.033

将以下代码添加到您的 delegate.h 和 delegate.m 文件中。

AppDelegate.h

```
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) YourViewController *viewController; 
```

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[YourViewcontroller alloc] initWithNibName:@"YourViewcontroller" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

希望它有效。

# audio - 如何从 PureTool/CVS 视频转换音频流？

> ID：14051136
> 
> 赞同：-1
> 
> 时间：2012-12-27T07:37:16.120
> 
> 标签：audio, ffmpeg, quicktime

如果有更好的地方可以发布此内容，我深表歉意。我最近遇到了几个我在 2005 年使用的 CVS 一次性摄像机。我仍然有我制作的 USB 电缆，现在我已经切换到 Mac，我可以使用[Puretool](http://www.koiproductions.com/PureTool/)从摄像机中提取旧视频。我遇到的问题是我只能在使用 VLC 媒体播放器观看视频时听到音频。我在 PureTools 网站上看到，一个常见的问题是使用的音频编解码器与 Quicktime 不兼容，需要转换音频流。他们的网站上有一个名为 FixSound 的程序的链接，该程序旨在解决此问题，但该链接已失效，我无法找到有关此的任何进一步信息。如果有人能指出我正确的方向，我将不胜感激。我正在处理的所有视频都来自我儿子出生的第一年，我真的希望能够以更统一的格式存档它们。我认为使用 Adob​​e Audition 或 Adob​​e CS6 Master Collection 中的其他程序可以做到这一点，但我 我只处理过 Photoshop、Illustrator、Dreamweaver、Flash 和 Fireworks。我还没有音频或视频方面的经验。

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:57:38.357

我找到了解决方法，但如果有人有更好的建议，请发布。

我在我的 Ubuntu 机器上使用 SoundConverter / GStreamer 将音频从旧视频转换为 mp3，然后使用 Encore 将其与 iMac 上的原始视频结合起来，并将其构建为 .f4v（为了实现，我可以从 Encore 构建 DVD） . 我想从那里我可以使用 Media Encoder 来提供 Quicktime、3gp 等......版本。

# svn - 如何使用 TortoiseSVN 和 PushOk 将 svn 客户端从 1.6.16 升级到 1.7.2

> ID：14051139
> 
> 赞同：1
> 
> 时间：2012-12-27T07:37:27.187
> 
> 标签：svn, tortoisesvn

对于那些不知道 PushOk 的人......它是 Sybase PowerBuilder IDE 的插件（奇怪的东西......）。

有一个新的 PushOk 版本发布。与 Subversion 1.7.2 相关联。

我们喜欢使用 TortoiseSVN 升级客户端。

我们必须如何做到这一点？我们可以在旧版本上安装新的 TortoiseSVN 还是必须以某种方式迁移工作副本？

非常感谢您阅读和回答这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:52:42.013

见[http://tortoisesvn.net/tsvn_1.7_releasenotes.html](http://tortoisesvn.net/tsvn_1.7_releasenotes.html)：

> Subversion 1.7 对工作副本格式进行了重大更改。在以前的版本中，Subversion 会在执行写入操作时自动将工作副本更新为新格式。然而，Subversion 1.7 将使这成为一个手动步骤。
> 
> 在您可以使用 TortoiseSVN 1.7 的现有工作副本之前，您必须先升级格式。如果您右键单击一个旧的工作副本，TortoiseSVN 只会在上下文菜单中向您显示一个命令：升级工作副本。
> 
> 为了安全起见，您应该使用 1.7 之前的 svn 客户端对所有工作副本运行清理，因为如果工作副本处于不一致状态，则升级过程可能会失败。最好在安装新版本的 TortoiseSVN 之前运行清理。
> 
> 即使在清理之后，升级过程也并不总是像应有的那样顺利运行，而且可能会很慢。我们建议您在升级之前提交对工作副本的所有更改（使用 1.7 之前的客户端）。如果升级因任何原因失败，只需重新结帐即可。

# c++ - 如何将 __m128 反转为整数

> ID：14051140
> 
> 赞同：5
> 
> 时间：2012-12-27T07:37:28.643
> 
> 标签：c++, sse

```
float a[4] = {1,2,3,4}, b[4] = {4,3,2,1};
uint32_t c[4];

int main() {

    __m128 pa = _mm_loadu_ps(a);

    __m128 pb = _mm_loadu_ps(b);
    __m128 pc = _mm_cmpgt_ps(pa, pb);
    _mm_storeu_ps((float*)c, pc);
    for (int i = 0;i  < 4; ++i) printf("%u\n", c[i]);
    return 0;
} 
```

什么是正确的指令`_mm_storeu_ps((float*)c, pc)`？在这里，c 是一个整数数组……我觉得这种方式不好，更好吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T08:10:20.217

在 SSE2中有两条指令将`__m128`( `float`vector) 转换为`__m128i`( vector)：（带舍入）和（带截断）。`int32_t`[`_mm_cvtps_epi32`](http://msdn.microsoft.com/en-us/library/xdc42k5e%28v=vs.100%29.aspx)[`_mm_cvttps_epi32`](http://msdn.microsoft.com/en-US/library/1h005y6x%28v=vs.100%29.aspx)

```
__m128i vi = _mm_cvttps_epi32(pc);
_mm_storeu_si128((__m128i *)c, vi); 
```

如果你不能使用 SSE2，你应该在存储到数组后将`float`数组转换为数组。`int``pc``float`

```
float d[4];
_mm_storeu_ps(d, pc);
c[0] = (int)d[0]; c[1] = (int)d[1]; c[2] = (int)d[2]; c[3] = (int)d[3]; 
```

# c# - C# 多线程 - 为什么 2 个线程调用同一个函数？

> ID：14051144
> 
> 赞同：1
> 
> 时间：2012-12-27T07:37:47.630
> 
> 标签：c#, .net, multithreading, visual-studio-2010

我有一个带有 2 个线程的 C# 代码。它调用 print 方法，但它总是有相同的时间.. 为什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace MultiThreading
{
    class Program
    {
        static void Main(string[] args)
        {
            Thread thread = new Thread(new ThreadStart(new Program().print));
            Thread thread2 = new Thread(new ThreadStart(new Program().print));
            thread.Name = "Thread1";
            thread2.Name = "thread2";  
            thread.Start();
            thread2.Start();

        }

        public void print()
        {
            Random r = new Random();
            int time = r.Next(3000);
            System.Console.WriteLine(Thread.CurrentThread.Name + ", " + (double)time/1000 + " secs!");
            Thread.Sleep(time);           
        }
    }
} 
```

好的，所以我有 2 个线程，每个线程都有“打印”委托。

print 生成一个数字`time`什么什么`time`秒。

`thread`并且`thread2`总是生成相同的时间，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:41:46.400

您的困惑不是因为线程，而是因为随机数生成器。

MSDN 说：

> 随机数生成从种子值开始。如果重复使用相同的种子，则会生成相同的数字序列。产生不同序列的一种方法是使种子值与时间相关，从而为每个新的 Random 实例产生不同的序列。

尝试用这个替换你的新随机线，看看有什么不同。

```
Random r = new Random(Thread.CurrentThread.ManagedThreadId); 
```

我刚刚添加了一个新的随机种子，以便每个线程都获得不同的值。

**编辑：**代替 ManagedThreadId，您可以使用您选择的任何其他值作为种子值。您需要确保从 Random 对象中获取不同的随机数序列是不同的。至于为什么 ManagedThreadId 不是一个很好的选择，请看下面的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:39:50.860

您可以在线程启动方法之间使用[System.Threading.Thread.Sleep](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)方法以间隔启动它们。

```
thread.Start();
System.Threading.Thread.Sleep(100);
thread2.Start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T07:50:50.053

i guess, the problem is the call of the Random() method! Try using different seeds with every Thread otherwise you always get the same random number!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:00:38.733

`Randomize()`在线程启动之前调用。这会为您的随机函数生成新的种子！

# ios - 如何从 iOS 中的编码更改应用程序图标？

> ID：14051145
> 
> 赞同：4
> 
> 时间：2012-12-27T07:37:53.433
> 
> 标签：ios, objective-c, iphone, icons

我想每天从编码中更改我的应用程序图标，就像苹果日历应用程序将每日日期显示为应用程序图标一样。我想要同样的可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T07:46:24.720

不幸的是，第三方应用程序无法做到这一点。

日历应用程序的功能仅限于 Apple 提供的具有更高权限的应用程序。它可能需要访问私有且未公开记录的 API。如果您使用过它们，您的应用程序将无法通过 Apple 的验证。

# jquery - 如何将手风琴与连接的可排序列表结合起来

> ID：14051158
> 
> 赞同：0
> 
> 时间：2012-12-27T07:38:50.183
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-accordion

我正在尝试将 jquery-ui 可排序列表放入手风琴部分并连接这些列表。这个想法是创建一个紧凑而直观的界面，用于对几个不同类别的项目进行排序。项目通常在一个部分内分类，但有时它们可​​能会被带到另一个手风琴部分。

我快到*了*：http: [//jsfiddle.net/arasbm/H5MRw/7/](http://jsfiddle.net/arasbm/H5MRw/7/)

以下是 HTML 代码示例：

```
<div id="accordion">
   <h3 class="accordion-header"><a href="#">good</a></h3>
   <div class="accordion-section">
       <ul class="sortable-list">
           <li>dog</li>
           <li>butter</li>
       </ul>
   </div>
   ...
</div> 
```

和javascript：

```
// Setup the accordion
$("#accordion").accordion();
var $accordion = $("#accordion").accordion();

//Setup the sortable list
$("ul.sortable-list").sortable({
    connectWith: "ul.sortable-list", // connect all sortable lists together so items can be dragged from one list to aother
    stop: function(event, ui) {
        console.log("an item was moved");
    }
}).disableSelection();

$("h3.accordion-header").droppable({
    over: function(event, ui) {
        //it would be ideal to have some sort of tollorance or delay so user does not accidentally expand another section or accordion
        $(this).css('color', 'red');
        $accordion.accordion('activate', $(this));
    },
    out: function(event, ui) {
        $(this).css('color', 'green');
    }
}); 
```

尚未工作的部分是在将项目从一个列表拖到另一个列表时向用户显示正确的视觉反馈。当用户在另一个手风琴部分的标题顶部拖动一个项目时，该部分被激活，但是，由于某种原因，在拖动过程中使用的元素不知何故消失了。该项目实际上仍然存在，如果您继续将其放入列表中，您可以看到占位符出现，您可以将项目放入新位置。

如何修复此实现，以便用户即使在转到手风琴的另一部分时也可以看到他们正在拖动的项目。我将不胜感激解决此问题的任何帮助，但请使用我提供[的 jsFiddle](http://jsfiddle.net/arasbm/H5MRw/7/)来演示您的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:47:15.430

实际上问题是被拖动的元素属于`div accordion-section`. 当您将鼠标悬停在另一个部分时，当前 div 将与拖动的元素一起隐藏。

所以要解决这个问题，可以创建一个`ul temporary`来存储被拖拽的元素。这`ul`将在拖动事件结束时被删除。

**Javascript：**

```
// Setup the accordion
//$("#accordion").accordion();
var $accordion = $("#accordion").accordion();

//Setup the sortable list
$("ul.sortable-list").sortable({
    connectWith: "ul.sortable-list", // connect all sortable lists together so items can be dragged from one list to aother
    stop: function(event, ui) {
        console.log("an item was moved");
        $accordion.find("#tmp").remove();
    },
    start: function(event, ui){
        $accordion.append("<ul id='tmp'></ul>");
        $accordion.find("#tmp").append(ui.item);
    }
}).disableSelection();

$("h3.accordion-header").droppable({
    over: function(event, ui) {
        //it would be ideal to have some sort of tollorance or delay so user does not accidentally expand another section or accordion
        $(this).css('color', 'red');
        $accordion.accordion('activate', $(this));
    },
    out: function(event, ui) {
        $(this).css('color', 'green');
    }
}); 
```

[这里](http://jsfiddle.net/charlesjourdan/gLVRB/1/)有一个小提琴的例子。我希望这段代码对您有所帮助，但您可能会坚持移动拖动的元素，我不知道为什么。

# sql - 直接和通过 VBA excel 运行相同的存储 Access SQL 查询时获得不同的结果

> ID：14051163
> 
> 赞同：0
> 
> 时间：2012-12-27T07:39:11.173
> 
> 标签：sql, excel, vba, ms-access, ms-access-2007

嘿，下面的存储访问查询在通过 VBA excel 运行时给出带有“ *NA* ”的 POEventCode，并且在直接从 access 运行时给出正确的结果。为什么这是异常？

```
SELECT D.[Event Code] & D.[Week Code] AS POEventCode, *  
INTO A
FROM (SELECT IIf([Advertisement type]='Tabloide','TAB',
    IIf([Advertisement type]='Flyer','FLY','NA')) AS [Event Code], 
    IIf(([Start Date]>[SD] And [Start Date]<[ED]), 
        [Month] & Right([WM_WK],2),'NA')  
        AS [Week Code], *  
    FROM [Feature A-Traits] AS C, [Event Code] AS B) 
AS D
WHERE (D.[Week Code]) Not Like '*NA*'  
    And (D.[Event Code]) Not Like '*NA*'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:34:53.900

如果您使用 ADO 通过 VBA Excel 运行查询，那么您的通配符需要是 % 而不是 *，所以：-`Not Like '%NA%'`

# android - 向页面添加未知数量的 imageviev（它们每个在 X 和 Y 上都有绝对位置）

> ID：14051164
> 
> 赞同：0
> 
> 时间：2012-12-27T07:39:14.983
> 
> 标签：android, imageview, layout-inflater

viewPager 的页面上有一个任务需要放置绝对位置的图像数量。数量和位置是从另一个应用程序获得的，因此未知。如何实施？有什么想法吗？

# objective-c - 如何在 OS X 中获取复选框的值

> ID：14051166
> 
> 赞同：2
> 
> 时间：2012-12-27T07:39:48.817
> 
> 标签：objective-c, macos, cocoa

我是 OS X 应用程序开发的新手。我在应用程序中有许多复选框。我需要将值存储为 1 和 0，具体取决于是否选中了复选框。如何获取 NSInteger 变量的值，例如“NSInteger sampleValue”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T08:45:43.030

创建 IBAction 并连接到复选框

```
-(IBAction)checkBoxState : (id)sender;
{
    NSLog(@"state %d", [sender state]);
} 
```

如果您有多个复选框，请将所有复选框连接到相同的 IBAction 方法。更改复选框的标记值
![在此处输入图像描述](../Images/4950fd53645acb7f839f3cc1d0c0d8f3.png)

```
-(IBAction)checkBoxState : (id)sender;
{
    if (0==[sender tag]) {
        NSLog(@"1st checkbox state %d", [sender state]);
    }
    else    if (1==[sender tag]) {
        NSLog(@"2nd checkbox state %d", [sender state]);
    }
    else    if (2==[sender tag]) {
        NSLog(@"3rd checkbox state %d", [sender state]);
    }

} 
```

看看[示例项目](https://www.idrivesync.com/share/view?k=360yZntCKep83m6ew0AI5aNVFnXn5JXg)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T08:00:30.570

如果你想获得`NSInteger`价值使用`[checkbox state]`。可以这样做：

```
NSInteger integValue = [checkBoxOutlet state];

NSLog(@"%li", integValue); //Show value on screen 
```

*checkBoxOutlet*是您在头文件中的复选框出口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T08:46:56.257

您可以找到：（check1 是 checkBox 的属性名称）

```
NSLog(@"%ld",[_check1 state]);//will give -1, 0 or 1, as mixed, off or on. 
```

此外，如果您想更具未来感（即，如果将来 1 或 0 或 -1 的值发生变化，请使用这些 enums ）

```
if ([_check1 state]==NSOnState) {
    NSLog(@"ON-Checked");
}
else if([_check1 state]==NSOffState){
    NSLog(@"OFF-UnChecked");
}
else if([_check1 state]==NSMixedState){
    NSLog(@"OFF-MixedChecked");
} 
```

# ios - 为什么必须在 iOS 上异步执行 sqllite 语句才能得到结果？

> ID：14051169
> 
> 赞同：1
> 
> 时间：2012-12-27T07:40:12.867
> 
> 标签：ios, sql, sqlite, core-data, asynchronous

我正在使用[remail](http://code.google.com/p/remail-iphone/)项目代码，并且我试图搜索 sqllite 数据库以将主题与发送者和接收者字段匹配以建立电子邮件线程（我知道.. jwz[建议](http://www.jwz.org/doc/threading.html)不要使用 dbases 进行电子邮件线程处理，但这是一个不同的故事）。

我注意到，每当我同步执行此操作时.. 我的 sqlite3_step() 语句不返回任何内容（例如，如果我在具有相同代码的 SqlliteManager 上运行完全相同的 sql 查询.. 我得到了我正在寻找的结果）..

然后我注意到，remail 的所有数据库都是异步工作的（参见[这里](https://github.com/abbood/remailPOP3/blob/master/remail-iphone/Classes/SearchRunner.m)的代码示例）。所以我尝试使用他们的异步方式运行相同的查询，果然我从 sqlite3_step() 得到了我想要的结果。

**问题：** iOS上的sqllite交互必须是异步的有什么原因吗？（请注意，我**没有**使用 Core Data .. remail 的人直接[入侵并使用](https://github.com/abbood/remailPOP3/tree/master/remail-iphone/sqlite3)了 sqllite。

# machine-learning - EM算法的计算复杂度是多少？

> ID：14051171
> 
> 赞同：2
> 
> 时间：2012-12-27T07:40:37.503
> 
> 标签：machine-learning, time-complexity, cluster-analysis, data-mining, space-complexity

一般来说，更具体地说是伯努利混合模型（又名潜在类分析）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T12:51:32.983

EM is pretty much the same as Lloyds variant of k-means. So each iteration takes `O(n*k)` distance computations. They are more complex distance computations, but in the end they are some variant of Mahalanobis distance.

However, k-means has a quite nice termination behavior. There are only k^n possible cluster assignments. Now if in each step, you choose one that is better, it will have to terminate the latest after trying out all k^n. But in reality, it usually terminates after at most a few dozen steps.

For EM, this is not as easy. Objects are not assigned to a single cluster, but as in fuzzy-c-means are assigned relatively to all clusters. And that's when you lose this termination guarantee.

So without any stopping threshold, EM would infinitely optimize the cluster assignments, up to an infinite precision (assuming you would implement it with infinite precision).

As such, the theoretical runtime of EM is: **infinite**.

Any threshold (and if it's just hardware floating point precision) will make it finish earlier. But it will be hard to get a theoretical limit here different than `O(n*k*i)` where `i` is the number of iterations (which could be infinite, but which you can also set to `0` if you don't want to do a single iteration).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:49:55.223

由于 EM 算法本质上是迭代的，因此您必须确定终止标准。如果您确定步数的上限，运行时分析显然很容易。对于其他终止标准（如收敛到恒定差异），必须具体分析情况。

长话短说，“EM”的描述不包括终止标准，所以这个问题不能这样回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T07:19:36.963

这就是我的想法：如果我们假设`EM algorithm`uses `linear algebra`，它确实如此，那么它的复杂度应该是**O(mn^3)**，其中 m 是迭代次数，n 是参数的数量。

迭代次数将受起始值质量的影响。好的起始值意味着小的 m。

不太好的起始值意味着更大的 m 甚至由于收敛到局部解决方案而失败。可以存在局部解，因为 EM 用于 的似然函数`nonlinear`。

良好的起始值意味着您从围绕全局最优解的轨迹的凸吸引区域开始。

# php - 是否可以在没有课程的情况下路由uri？

> ID：14051173
> 
> 赞同：0
> 
> 时间：2012-12-27T07:40:50.890
> 
> 标签：php, .htaccess, mod-rewrite, pretty-urls

基本上就是标题所说的。我正在做一个不涉及类的项目，我想实现 htaccess 和 mod rewrite 来创建漂亮的 url。以下是我希望能够路由的一些示例。我的文件和目录结构也在下面列出。

```
/root
     - index.php (bootstrap)
     /template
     /sources
          /forums
               -threads.source.php
               -discussions.source.php
               -post.source.php
               -index.source.php
          //
          - members.source.php (functions for register, login, etc)
          - index.source.php

http://localhost/myapp/members/register -> sources/members.source.php register function
http://localhost/myapp/ -> sources/index.source.php
http://localhost/myapp/forums/threads/Some-Cool-Thread/0001 -> sources/forums/threads.source.php view function
http://localhost/myapp/forums/ ->sources/forums/index.source.php 
```

我希望这对你有意义。顺便说一句：我使用 .source.php 作为文件名，因为我还将拥有将使用的模板文件，例如 members.template.php

编辑：我已经制作了我的 .htaccess 文件，并且还在我的索引文件中获得了 URI 字符串。我有一点可以验证 uri 段字符。这是我的 .htaccess 文件：

 ````
Options +FollowSymLinks  
    RewriteEngine On  
    RewriteCond %{SCRIPT_FILENAME} !-d  
    RewriteCond %{SCRIPT_FILENAME} !-f  
    RewriteRule ^(.*?) index.php 
````  `这是我的索引文件：

 `````
<?php

session_start();

require_once('config.php');

global $config;

date_default_timezone_set($config['server']['default_timezone']);

define('DOC_ROOT', dirname(__FILE__));

if(!mysql_connect($config['db']['server'], $config['db']['user'], $config['db']['pass'])){

    die('System Failure:  Could not connect to the requested database server.  It may be down or it may be too busy!  Please check back later.');

} else if(!mysql_select_db($config['db']['name'])){

    die('System Failure:  Could not connect to the requested database server.  It may be down or it may be too busy!  Please check back later.');

} else {

    $uri_segments = $_SERVER['REQUEST_URI'];

    $uri_segments = str_replace('/Base%20Command/', '', $uri_segments);
    $uri_segments = explode('/', $uri_segments);

    foreach($uri_segments as $segment){

        if(!preg_match('^[a-z0-9_-]^', $segment)){

            die('Could not accept provied URI string... the string contains invalid characters.');

        }

    }

    if(file_exists(DOC_ROOT.'/sources/global.source.php')){

        require_once(DOC_ROOT.'/sources/global.source.php');

    }

    if(file_exists(DOC_ROOT.'/template/global.template.php')){

        require_once(DOC_ROOT.'/template/global.template.php');

        if(function_exists('html_header')){

            $output = html_header();

            if(file_exists(DOC_ROOT.'/template/'.$source.'.template.php')){

                require_once(DOC_ROOT.'/template/'.$source.'.template.php');

                if(function_exists($action)){

                    $output .= $action();

                } else {

                    $output .= Error404();

                }

            } else {

                $output .= Error404();

            }

            if(function_exists('html_footer')){

                $output .= html_footer();

            }

        } else {

            $output = 'System Failure:  Certain template files did not load correctly.';

        }

        echo $output;

    }

}

?> 
````  `基本上我需要做的是找到一种方法来有效地为源变量和动作变量提供值。```

# c# - 鼠标离开时重置用户控件的动画

> ID：14051176
> 
> 赞同：0
> 
> 时间：2012-12-27T07:41:02.267
> 
> 标签：c#, wpf, xaml, c#-4.0, wpf-controls

当鼠标移到矩形上时，我想在矩形上显示带有一些动画的用户控件，重置动画并在鼠标离开时折叠用户控件。

我的问题是我应该如何“重置”动画，因为我当前的方法只是在鼠标离开时折叠用户控件。下面是我的演示代码。

编辑：

控件库.xaml

```
<UserControl.Style>
    <Style>
      <Style.Triggers>
       <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                <BeginStoryboard Name="opacityStoryBoard">
                    <Storyboard  >
                        <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="00:00:10" From="0" To="2" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>

            <EventTrigger RoutedEvent="FrameworkElement.MouseLeave">
                <SeekStoryboard BeginStoryboardName="opacityStoryBoard" Offset="00:00:00">  </SeekStoryboard>
            </EventTrigger>

            <Trigger Property="FrameworkElement.Visibility" Value="Collapsed">
                <Setter Property="FrameworkElement.Opacity" Value="0"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Style>

<StackPanel Orientation="Vertical">
    <Label Content="Welcome" HorizontalAlignment="Stretch" VerticalAlignment="Top"
    HorizontalContentAlignment="Center" VerticalContentAlignment="Center" 
    Foreground="White"  Background="Transparent" FontSize="25" Height="300" Margin="10,0" />

    <!--<Image Height="300" x:Name="qr" Margin="10,0"  />-->

 </StackPanel> 
```

* * *

主窗口.xaml

```
<myToolTip:UserControl1 Visibility="Collapsed" 
        x:Name="customToolTip" />

    <Rectangle Fill="Transparent" HorizontalAlignment="Left" Height="322" Stroke="Black" 
       VerticalAlignment="Top" Width="518" MouseMove="Rectangle_MouseMove_1"   MouseLeave="Rectangle_MouseLeave_1">
    </Rectangle> 
```

* * *

主窗口.cs

```
 private void Rectangle_MouseMove_1(object sender, MouseEventArgs e)
    {

        customToolTip.Visibility = System.Windows.Visibility.Visible;

    }

    private void Rectangle_MouseLeave_1(object sender, MouseEventArgs e)
    {
        customToolTip.Visibility = System.Windows.Visibility.Collapsed;
    } 
```

请指导我..谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:35:25.330

当鼠标离开矩形时，使用`SeekStoryBoard`该类重置动画时间。

例如：

```
<Style.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
            <BeginStoryboard Name="opacityStoryBoard">
                    <Storyboard  >
                        <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="00:00:10" From="0" To="2" />
                    </Storyboard>
            </BeginStoryboard>
    </EventTrigger>
    <Trigger Property="FrameworkElement.Visibility" Value="Collapsed">
            <Setter Property="FrameworkElement.Opacity" Value="0"/>
            <Trigger.EnterActions>
                    <SeekStoryboard BeginStoryboardName="opacityStoryBoard" Offset="00:00:00"></SeekStoryboard>
            </Trigger.EnterActions>
    </Trigger>
</Style.Triggers> 
```

# excel - 使用后期绑定到 Excel，如何从活动单元格移动到下一行的第一个单元格？

> ID：14051188
> 
> 赞同：1
> 
> 时间：2012-12-27T07:42:03.480
> 
> 标签：excel, com, vba

我正在使用后期绑定（在 C# 中，使用反射等）通过 COM 访问 Excel。换句话说，我首先使用获取 Excel.Application 对象

```
Type excelType = Type.GetTypeFromProgId("Excel.Application");
object excelApplication = Activator.CreateInstance(excelType); 
```

（实际上，它比这更通用，但这给出了这个想法）。

正如许多人在 StackOverflow 中所指出的，了解如何使用 Office 的 COM 接口的一种好方法是在 Excel 中记录一个宏，然后查看 VBA 代码以查看要调用哪些类成员。

当我这样做时，我看到如果您有对活动单元格的引用（从 Excel.Application 对象的 ActiveCell 属性获得），则 VBA 引用 ActiveCell.Offset(x,y) 以引用相对于该 ActiveCell 的单元格（x 和 y 是行和列索引）。但是，如果我尝试访问具有后期绑定的 Cell 的 Offset 方法，则 InvokeMember 方法将失败，并出现“未找到成员”的异常。

如果我使用 Visual Studio 对象浏览器检查 Microsoft.Office.Interop.Excel 命名空间和 ApplicationClass 类（我假设它可以很好地查看上述 C# 代码通过 ProgId 获取的 COM 接口），它显示该ApplicationClass 具有Microsoft.Office.Interop.Excel.Range 类型的ActiveCell 属性。并且检查该类表明它确实没有名为“Offset”的成员，因此当我尝试调用它时“找不到成员”。

这似乎意味着 VBA 宏使用的 Excel 对象模型与通过 COM 公开的对象模型不同！是这样吗，还是我错过了什么？如果是这样，我如何通过 COM 中的后期绑定获得相同的 VBA 对象模型？

或者，是否有某种方法，使用 Offset 以外的方法，能够将 ActiveCell 移动到下一行的开头，这真的是我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:08:42.787

你可以试试这个：

```
dim i as integer

i = ActiveCell.Row + 1

Excel.ActiveSheet.Cells(i,1).value = "Whatever your value is." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:45:14.320

像往常一样，当您知道如何操作时，答案很容易。

我的代码比我的问题中的示例稍远一点，看起来有点像这样：

```
object activeCell;
object result;
// in here code to get the correct value into activeCell
if(activeCell.GetType().GetProperty("Offset") == null){
  result = activeCell.GetType().InvokeMember("Offset", BindingFlags.InvokeMethod, null, activeCell, new object[] {1, 0});
} 
```

正是 InvokeMember 引发了异常，并显示消息“未找到成员”。

当我将参数更改为 InvokeMember 时，如下所示：

```
result = activeCell.GetType().InvokeMember("Offset", BindingFlags.InvokeMethod | BindingFlags.GetProperty, null, activeCell, new object[] {1, 0}); 
```

然后它起作用了。

它为什么起作用仍然是一个谜，如果他们回答它，我相信他们会赢得一些声誉。

# mysql - How to set up intermediary table in MySQL for ManyToMany relations in squeryl for Play 2 framework?

> ID：14051190
> 
> 赞同：1
> 
> 时间：2012-12-27T07:42:16.247
> 
> 标签：mysql, scala, many-to-many, playframework-2.0, squeryl

I'm still learning all the ins and outs of web development, scala, play 2.0, and squeryl and I'm trying to set up a ManyToMany relation between two of my tables.

I've looked over the information found [here](http://squeryl.org/relations.html) but I'm having trouble with the intermediary table. I've looked all over and I can't find a good example of how it should be structured.

I'm using MySQL for my database and I've tried using foreign keys and primary keys in the intermediary table, but neither have worked, or maybe I'm just doing it wrong. So, could someone give me a clear example of how the intermediate table should look?

For a little more information, the basic structure of the two tables I want to relate are as follows.

```
tableOne (
  name varchar(255)
);

tableTwo (
  name varchar(255),
  idCode varchar(255)
); 
```

They will be related by the name in tableOne and the idCode in tableTwo which is just an abbreviated form of tableTwo's name column.

So using MySQL, squeryl, and the format shown in the link, can anyone help me get this going?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:20:27.773

To relate the two tables, you will need to establish a ManyToMany relationship in your schema. Assuming you have defined your tables with the names tableOne and tableTwo in your schema, something like this probably what you want:

First create a class that joins the two tables:

```
class TableOneToTwo(
  name:String = "",
  idCode:String = "") extends KeyedEntity[CompositeKey2[String, String]] {
  def id = compositeKey(name, idCode)
} 
```

Then map the relation in your Schema

```
val tableOneToTwo = manyToManyRelation(tableOne, tableTwo).via[TableOneToTwo]((t1, t2, jt) => (t1.name === jt.name, t2.idCode === jt.idCode)) 
```

Then you would just need to create the corresponding table in your DB - which should have two fields - `name`, `id_code` (named according to your naming convention).

If you need a reference, this should point you in the right direction: [http://squeryl.org/relations.html](http://squeryl.org/relations.html)

# perl - 如何用 Perl 解析 HTML？

> ID：14051191
> 
> 赞同：1
> 
> 时间：2012-12-27T07:42:21.160
> 
> 标签：perl, html-parsing

我也是编程和学习 Perl 的新手。

这是我的问题：如何使用 Perl 模块在 Perl 中解析以下数据？

```
<h4>This is the line</h4>
abc : 130.65 TB<br>
dif : 74.52 TB<br>
asw : 56.13 TB<br>
qwe : 57<br> 
```

这是来自网页的示例数据，我想要一个类似的输出

```
abc = 130.65 TB
dif = 74.52 TB
asw = 56.13 TB
qwe = 57 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T07:48:51.133

Use an HTML parsing module like [HTML::Parser](http://search.cpan.org/perldoc?HTML%3a%3aParser) or [HTML::TreeBuilder](http://search.cpan.org/perldoc?HTML%3a%3aTreeBuilder).

If you are just trying to extract the text and strip all the tags, then it should be as simple as:

```
 use HTML::TreeBuilder;
    my $tree = HTML::TreeBuilder->new();
    $tree->parse( $YOUR_HTML_TEXT );
    $tree->eof();
    my $just_the_text = $tree->as_text();
    $tree->delete; 
```

You can also check [http://htmlparsing.com/perl.html](http://htmlparsing.com/perl.html) for more on parsing HTML with Perl.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:10:40.827

您还可以使用 HTML::Tokeparser。但是，如果您更喜欢使用 DOM 模型，请尝试 Mojo::DOM

# mysql - 删除冗余记录

> ID：14051192
> 
> 赞同：2
> 
> 时间：2012-12-27T07:42:23.840
> 
> 标签：mysql

我有一张桌子：

```
+------------+------------------------------------------------------+------+-----+---------+-------+
| Field      | Type                                                 | Null | Key | Default | Extra |
+------------+------------------------------------------------------+------+-----+---------+-------+
| person_id1 | int(10)                                              | NO   | MUL | 0       |       |
| person_id2 | int(10)                                              | NO   | MUL | 0       |       |
| priority   | smallint(5)                                          | NO   |     | 0       |       |
| link_type  | enum('member_of_band','legal_name','performs_as','') | NO   |     |         |       |
+------------+------------------------------------------------------+------+-----+---------+-------+ 
```

此表没有主键，但 person_id1 和 person_id2 上有索引。

问题是 - 我们有不一致的数据，例如，这个查询：

```
SELECT
    COUNT(*) as c, person_id1, person_id2
FROM person_person
WHERE link_type = "member_of_band"
GROUP BY person_id1, person_id2
HAVING c > 1
LIMIT 10; 
```

回报：

```
+---+------------+------------+
| c | person_id1 | person_id2 |
+---+------------+------------+
| 2 |   50674235 |   51048792 |
| 3 |   50674245 |   50715733 |
| 2 |   50674283 |   50712621 |
| 2 |   50674322 |   50714244 |
| 2 |   50674378 |   51048804 |
| 2 |   50674438 |   51048812 |
| 4 |   50674442 |   50715733 |
| 2 |   50674449 |   50716913 |
| 2 |   50674455 |   51048803 |
| 3 |   50674469 |   50715733 |
+---+------------+------------+ 
```

有没有办法删除所有多余的记录并留下那些没问题的？

我想出的只是：

```
DELETE person_person FROM person_person
WHERE (person_id1, person_id2) IN (

    SELECT
        person_id1, person_id2
    FROM person_person
    WHERE link_type = "member_of_band"
    GROUP BY person_id1, person_id2
    HAVING COUNT(*) > 1
    LIMIT 100

) AND link_type = "member_of_band"; 
```

但这会删除所有带有双打的记录，我只需要删除双打。

```
mysql> select * from person_person where person_id1 = 50674245 and person_id2 = 50715733;
+------------+------------+----------+----------------+
| person_id1 | person_id2 | priority | link_type      |
+------------+------------+----------+----------------+
|   50674245 |   50715733 |        0 | member_of_band |
|   50674245 |   50715733 |        0 | member_of_band |
|   50674245 |   50715733 |        0 | member_of_band |
+------------+------------+----------+----------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T07:48:25.817

```
ALTER IGNORE TABLE person_person ADD UNIQUE INDEX (person_id1, person_id2, link_type); 
```

# c# - 使用 C# 属性处理异常

> ID：14051194
> 
> 赞同：6
> 
> 时间：2012-12-27T07:42:37.163
> 
> 标签：c#, attributes

我在想是否可以使用 Attribute 进行异常处理，而不是在每个方法中都写“try...catch”。

例如，现在，我的每个方法都是这样的：

```
public void DoSomething()
{
    try
    {
        // do something
    }
    catch (Exception ex)
    {
        // exception handling rules, always the same.
        throw;
    }
} 
```

我想：

```
[HandleException]
public void DoSomething()
{
    // do something
} 
```

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T07:45:32.187

这可以通过 AOP（面向方面​​的编程）来完成。这样做的框架之一是 PostSharp。查看示例[http://www.sharpcrafters.com/solutions/exception](http://www.sharpcrafters.com/solutions/exception)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:50:34.760

Also, you can write your own MSBuild Task. [Here you can](http://kindofmagic.codeplex.com/) find an opensource project. During compile time it injects `INotifyPropertyChanged` supporting code in property setters using `Mono.Cecil` lib.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T18:05:07.317

你可以用 Fody 做到这一点

[https://github.com/Fody/Fody](https://github.com/Fody/Fody)

如果你想检查它，有一个类似的插件可以处理异步代码的异常。

[https://github.com/Fody/AsyncErrorHandler](https://github.com/Fody/AsyncErrorHandler)

这是一个教程。

[https://michielsioen.be/2017-10-21-il-weaving/](https://michielsioen.be/2017-10-21-il-weaving/)

[https://michielsioen.be/2017-12-28-il-weaving-pt2/](https://michielsioen.be/2017-12-28-il-weaving-pt2/)

# asp.net - 没有 isapi 的 iis 6 url 重写

> ID：14051206
> 
> 赞同：0
> 
> 时间：2012-12-27T07:43:57.447
> 
> 标签：asp.net, iis, iis-6

我需要在不使用 isapi 重写的情况下配置从“....sitename.com/login.html/”到“....sitename.com/login.html”的快速 IIS 重定向。

我尝试在 Application_BeginRequest 中添加重定向。

```
 void Application_BeginRequest(object sender, EventArgs e)
{
    //To Redirect Bad-Url (login.html/) which i subscribed to uConnect.intel.com
    if (string.Compare(this.Request.Url.AbsolutePath, "login.html/", StringComparison.OrdinalIgnoreCase) != 0)
    {
        this.Response.Redirect("../login.html", true);
    }
} 
```

但它没有被击中，并且显示了自定义 404 错误页面。

如果我可以通过一些 iis 属性更改来实现这一点，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:51:47.240

最好的解决方案是使用 Microsoft URL Rewrite，可以从

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

安装后

URL Rewrite 选项将出现在 IIS 7.5 的 IIS 部分下

您可以添加规则以删除尾部斜杠

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:06:07.640

您需要配置 iis6 以让 .net 处理 .html 扩展名。通常 iis 只提供 html 页面而不在服务器端处理它们，因此您的 .net 重定向代码永远不会被调用。

有关配置的说明，请参见此答案：[IIS 6 execution html as aspx](https://stackoverflow.com/questions/4856365/iis-6-executing-html-as-aspx)

# smarty - Smarty 框架或模板引擎

> ID：14051208
> 
> 赞同：2
> 
> 时间：2012-12-27T07:44:06.897
> 
> 标签：smarty, php

我与许多使用 PHP 的人交谈过。当我对他们说我在 smarty 框架中工作时，他们告诉我它是一个模板系统。但我知道 smarty 使用 MVC 模式来创建和维护网站。

PHP Smarty 是模板引擎还是框架还是两者兼而有之？

请解释相同

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T07:47:20.383

**什么是智能？**

Smarty 是 PHP 的模板引擎，有助于将表示 (HTML/CSS) 与应用程序逻辑分离。这意味着 PHP 代码是应用程序逻辑，并且与表示分离。

**Smarty 不是什么**

Smarty 不是应用程序开发框架。Smarty 不是 MVC。Smarty 不是 Zend Framework、CodeIgniter、CakePHP 或任何其他 PHP 应用程序开发框架的替代品。

[http://www.smarty.net/about_smarty](http://www.smarty.net/about_smarty)

[http://smarty.incutio.com/?page=SmartyFrequentlyAskedQuestions#basics-1](http://smarty.incutio.com/?page=SmartyFrequentlyAskedQuestions#basics-1)

# javascript - 通过 javascript 进行 Snap View 检查

> ID：14051209
> 
> 赞同：2
> 
> 时间：2012-12-27T07:44:09.157
> 
> 标签：javascript, windows-8

如何使用 JavaScript 检查 snapview 是否正常工作。

```
var SNAPPED_VIEW = 320;

window.addEventListener("resize", onViewStateChanged);

function onViewStateChanged(eventArgs) {
    var viewStates = Windows.UI.ViewManagement.ApplicationViewState, msg;
    var newViewState = Windows.UI.ViewManagement.ApplicationView.value;
    if (newViewState === viewStates.snapped) {
        var msg = new Windows.UI.Popups.MessageDialog("snap view mode");
    } else if (newViewState === viewStates.filled) {
        showMenu('filled');
    } else if (newViewState === viewStates.fullScreenLandscape) {
        showMenu('landscape');
    } else if (newViewState === viewStates.fullScreenPortrait) {
        //Currently not supported
    }
} 
```

我正在尝试使用此代码，但在使用断点时显示未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T18:55:15.680

我最近想出了一个解决方案。它不是特定于 Windows 8 应用程序的，因此不需要`Windows.UI`.

[http://menacingcloud.com/?c=targetSnapMode](http://menacingcloud.com/?c=targetSnapMode)

与`@viewport`声明结合使用时，它可以形成有效的组合。

```
@-ms-viewport { width: device-width; } @viewport { width: device-width; } 
```

上述`@viewport`声明在[http://menacingcloud.com/?c=cssViewportOrMetaTag进行了讨论](http://menacingcloud.com/?c=cssViewportOrMetaTag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T15:59:31.187

正如吉姆所说，你的代码工作得很好，但你没有显示你的对话框。我刚刚添加了一个文本框并为不同的视图分配了值，它工作得非常好：

```
var SNAPPED_VIEW = 320;

window.addEventListener("resize", onViewStateChanged);

function onViewStateChanged(eventArgs) {
   var viewStates = Windows.UI.ViewManagement.ApplicationViewState, msg;
   var newViewState = Windows.UI.ViewManagement.ApplicationView.value;
   if (newViewState === viewStates.snapped) {
    document.getElementById("screenMode").innerText = "s";
   } else if (newViewState === viewStates.filled) {
    document.getElementById("screenMode").innerText = "f";
   } else if (newViewState === viewStates.fullScreenLandscape) {
    document.getElementById("screenMode").innerText = "l"
   } else if (newViewState === viewStates.fullScreenPortrait) {
    //Currently not supported
   }
} 
```

HTML：

```
<input type="text" id="screenMode"/> 
```

# selenium - 使用 selenium webdriver 从网站保存图像

> ID：14051210
> 
> 赞同：1
> 
> 时间：2012-12-27T07:44:13.853
> 
> 标签：selenium, selenium-webdriver

我正在测试可以帮助使用光学字符识别从图像中提取文本的 Web 应用程序。

解释的步骤是

1.  使用 [将文本转换为图像] 实用程序在图像中输入要转换的文本。

2.  现在我们开发了 OCR 应用程序来从图像中提取此文本。

我想保存此图像并将其传递给基于 Web 的 OCR 应用程序。

所以我想知道如何将此文本图像保存到驱动器

示例： [http ://www.textimg.net/](http://www.textimg.net/)

![在此处输入图像描述](../Images/fdf44ebb2acb3a92b390968c5576d726.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:27:40.203

我认为使用 selenium webdriver 没有简单的方法，但是，我认为您可以使用 webdriver 获取图像的链接，然后使用您使用的任何语言来下载文件，例如，如果您使用的是 ruby您可以使用以下代码，它将创建一个名为 image.png 的新文件并从 url 复制图像：

```
require 'open-uri'
open('image.png', 'wb') do |file|
  file << open('http://www.textimg.net/textimages/2012/this-text-image-tool-is-so-cool-_502153c0c5fa7.png').read
end 
```

# jsp - 如何从 JSF 调用 JSP 页面

> ID：14051211
> 
> 赞同：0
> 
> 时间：2012-12-27T07:44:16.990
> 
> 标签：jsp, jsf, navigation

如何从 JSF 页面调用 jsp 页面

下面的代码我正在尝试但无法重定向到 jsp 页面。

请指导。

```
<f:view>
    <a4j:keepAlive beanName="homeBB"></a4j:keepAlive>
<div id="successDiv"></div>
<div id="formDiv">
    <form action="/project/Pages/SecondPage.jsp" method="post" enctype="multipart/form-data"
        name="form1" id="form1">
<table>
.
.
</table>

<a4j:commandLink reRender="subMenuPanel" ajaxSingle="true"
        rendered="#{homeBB.hideNomineeTabFlag}" value="Nominee "
        styleClass="navfont">
    <f:setPropertyActionListener target="#{homeBB.subMenuviewId}"
         value="/Pages/SecondPage.jsp" />
</a4j:commandLink> 
```

即使我尝试关注

```
<input type="button" name="Submit" value="Submit" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:39:06.953

你可以像这样使用：

```
<h:form>
    <h:commandButton value="submit" type="submit" action="#{bean.secondPage}" />
</h:form> 
```

在 bean 类中，您必须返回 secondPage.jsp。

```
public class Bean{
...
public String secondPage()
{
 return "/Pages/SecondPage.jsp"; // this works directly in JSF 2.x
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:42:33.967

使用与在 JSP 页面中所做的完全一样的普通提交按钮。

```
<input type="submit" value="Nominee" /> 
```

或者如果你真的需要它是一个链接，通过JS提交表单。

```
<a href="javascript:void(0)" onclick="document.getElementById('form1').submit()">Nominee</a> 
```

* * *

**与具体问题**无关**`<t:inputFileUpload>`，如果唯一的原因是您实际上想通过 JSF 上传文件，但不喜欢`<rich:fileUpload>`. 这样，您最终会得到更简洁的代码，而不是一些丑陋的 JSP 样板。**

# lync - 跟踪 Microsoft Lync 视频通话

> ID：14051212
> 
> 赞同：2
> 
> 时间：2012-12-27T07:44:35.977
> 
> 标签：lync

我正在尝试跟踪 Microsoft Lync 2010 视频通话的使用情况。它将涉及数据收集，例如涉及的用户、视频通话的日期、时间和持续时间。是否有可能创建一个从客户端一直跟踪它的 WPF 应用程序？

我很清楚 Outlook 文件夹中的对话历史记录，但我不是 IT 部门的一员，我不敢修改我不熟悉的服务器中的数据库。我只是想从我自己的电脑上收集这条信息。这样做的目的只是了解最近使用了多少次视频通话，谁是参与传入和传出视频通话的用户，以及使用时间。一些提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T12:02:23.517

您当然可以使用[Lync Client SDK](http://blogs.msdn.com/b/lync_by_lync/archive/2010/10/05/introducing-the-microsoft-lync-client-platform-sdk.aspx)执行此操作。

看看这篇博文：http: [//thoughtstuff.co.uk/2012/06/answering-the-call-accepting-incoming-calls-in-lync-client-sdk/](http://thoughtstuff.co.uk/2012/06/answering-the-call-accepting-incoming-calls-in-lync-client-sdk/)

该帖子实际上是关于如何接听来电，但它解释了如何跟踪对话开始，这是您需要做的。

您还需要跟踪对话结束或终止。这两个都是 Conversation 对象上的事件。会话具有唯一的会话 ID，因此您可以将每个新会话存储在 Enumerable 中，并且可以使用秒表或时间戳来捕获长度。（我不认为 Conversation 对象具有会话长度的属性）

您说您只想跟踪视频通话。再次，检查该博客文章。可能只想在呼叫升级为视频时开始捕获信息，但这取决于您。

我将在我的待办事项列表上模拟一个类似这样的工作示例，但我真的不能保证任何事情。如果我能解决它，那么我会在这里发布更新。更新：此处的博客文章：http: [//thoughtstuff.co.uk/2013/01/tracking-lync-conversations-in-code/](http://thoughtstuff.co.uk/2013/01/tracking-lync-conversations-in-code/)

新年快乐

# android - Android 手机上的 NFC 阅读器可以读取哪些 RFID 标准？

> ID：14051213
> 
> 赞同：3
> 
> 时间：2012-12-27T07:44:49.937
> 
> 标签：android, nfc, rfid

我想使用 Android 手机中的 NFC 芯片制作一个 RFID 阅读器，比如 Galaxy S3。经过一番谷歌搜索，我发现 Android 支持一些 NFC 标签技术，其中一些也是 RFID 标准。

Android 支持以下 NFC 标签技术：

TagTechnology - 所有标签技术类必须实现的接口。

NfcA - 提供对 NFC-A (ISO 14443-3A) 属性和 I/O 操作的访问。

NfcB - 提供对 NFC-B (ISO 14443-3B) 属性和 I/O 操作的访问。

NfcF - 提供对 NFC-F (JIS 6319-4) 属性和 I/O 操作的访问。

NfcV - 提供对 NFC-V (ISO 15693) 属性和 I/O 操作的访问。

IsoDep - 提供对 ISO-DEP (ISO 14443-4) 属性和 I/O 操作的访问。

Ndef - 提供对已格式化为 NDEF 的 NFC 标签的 NDEF 数据和操作的访问。

NdefFormatable - 为可能是 NDEF 可格式化的标签提供格式化操作。

**我想知道的是上面哪些是RFID阅读器应该支持的RFID标准？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:42:58.127

HF (13.56 MHz) 标签理论上应该可以工作，UHF 不能工作。不确定 API 的兼容性如何，但您至少应该能够使用`Tag.getId()`. 获取流行的标签阅读器应用程序之一并尝试您的标签。如果应用程序可以读取它们，您应该也可以这样做。你想使用什么标签？

# c# - 如何使用 ASP.net 打印标签中的数据？

> ID：14051221
> 
> 赞同：1
> 
> 时间：2012-12-27T07:45:43.063
> 
> 标签：c#, javascript, asp.net, printing

在我的 asp.net 网站中，我需要打印标签内的信息。标签内的信息将来自数据库。标签将包含客户姓名、地址、电话号码等数据。我需要将其打印在一张纸上。

在我的网页上，我有一个按钮和一个 HTML 表格。HTML 表由客户信息组成。一切对我来说都很好。我可以得到打印。但我想格式化打印页面上的数据。前任。居中对齐，带有一些字体和字体大小。我不能这样做。

以下是我的打印预览页面![在此处输入图像描述](../Images/d1eb954df7ceb11c39e9d14503afaeb4.png)

这是我的打印页面 ![在此处输入图像描述](../Images/25adbb72a33091704913f0ab2465dd3a.png)

很好。但我想让打印页面更时尚一点，带有任何徽标。需要增加文本的大小，表格应该居中。如果我能在打印页面中获得表格的边框，那就太好了。基本上我想在打印页面上做一些样式。

我尝试实现 printstyles css，但我无法得到任何结果。

我在“打印”按钮的按钮单击事件期间使用的代码是

```
protected void btnPrint_Click(object sender, EventArgs e)
{

    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    StringBuilder sb = new StringBuilder();
    sb.Append("<script type = 'text/javascript'>");
    sb.Append("window.onload = new function(){");
    sb.Append("var divToPrint=document.getElementById('print');");
    sb.Append("var printWin = window.open('', '', 'left=0");
    sb.Append(",top=0,width=800,height=600,status=0');");
    //sb.Append("printWin.document.write(<link rel='stylesheet' type='text/css' href='PrintStyle.css' media='print'/>\n);");
    sb.Append("printWin.document.write(divToPrint.outerHTML);");
    sb.Append("printWin.document.close();");
    sb.Append("printWin.focus();");
    sb.Append("printWin.print();}");
    sb.Append("</script>");
    ClientScript.RegisterStartupScript(this.GetType(), "GridPrint", sb.ToString());

} 
```

如果有人可以帮助我做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:54:34.683

试试这个，但把你的标签放在 div 里面，然后给 div 像 'mydiv' 的 id，就像我在下面使用的那样。

```
<html>
<head>
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.1.min.js" > </script> 
<script type="text/javascript">

function PrintElem(elem)
{
    Popup($(elem).html());
}

function Popup(data) 
{
    var mywindow = window.open('', 'my div', 'height=400,width=600');
    mywindow.document.write('<html><head><title>my div</title>');
    /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
    mywindow.document.write('</head><body >');
    mywindow.document.write(data);
    mywindow.document.write('</body></html>');

    mywindow.print();
    mywindow.close();

    return true;
}

</script>
</head> 
```

```
<div id="mydiv">
This will be printed. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque a quam at nibh adipiscing interdum. Nulla vitae accumsan ante. 
</div>  
 <input type="button" value="Print Div" onclick="PrintElem('#mydiv')" />
 </body>
 </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:53:34.913

此代码仅打印`div`内容。您应该将 css 链接或样式标记添加到 divToPrint 变量中。

像

```
 printWin.document.write('<link rel="stylesheet" type="text/css" href="/style.css">'+ document.getElementById('print')); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T08:03:33.917

您需要以这样的形式创建 HTML 表格结构，其中您的标签放在中心，在顶行放置 oyur 徽标，如下所示

```
<table width="100%" cellspacing="2" cellpadding="0" style="border: 1px solid black;
    height: 100%;">
    <tr>
        <td colspan="3" align="center">
            Your Logo Comes Here
        </td>
    </tr>
    <tr>
        <td>
        </td>
        <td align="center">
            Put Your Lable Here
        </td>
        <td>
        </td>
    </tr>
    <tr>
        <td colspan="3" align="center">
            This is Footer
        </td>
    </tr>
</table> 
```

# linux - 在用户空间实现 Linux 字符驱动程序

> ID：14051224
> 
> 赞同：6
> 
> 时间：2012-12-27T07:46:13.293
> 
> 标签：linux, input, kernel, drivers

我正在尝试为嵌入式 Linux 系统构建自定义操纵杆/游戏手柄设备。我正在寻找允许我从用户空间代码在 /dev/input 中创建节点的库或系统 API。

我想要这个，因为：

*   定制硬件可以使用现有的 SPI 或 I2C 驱动程序与系统通信（这是我的硬件设计，所以我可以做任何最有技术意义的事情）

*   内核模块不能使用其他驱动程序，只能从其他模块导出符号

我知道制作内核模块的唯一方法是使用内核代码并将其编译为内核模块。我不是想用用户空间代码来实现内核模块。

我正在寻找一个允许我创建文件的 API，当读取或写入该文件时，函数会被调用。这是字符驱动程序的一般概念。我不需要内核提供或强加的特权或限制。

必须有某种方法来模拟不涉及编写全新内核模块的文件 I/O。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T03:44:17.343

您可以使用用户空间输入子系统来做您想做的事情，请参阅：

[http://thiemonge.org/getting-started-with-uinput](https://web.archive.org/web/20131201045747/http://thiemonge.org/getting-started-with-uinput)

并举个例子：

[https://xboxdrv.gitlab.io/](https://xboxdrv.gitlab.io/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-22T17:52:00.687

老问题，但我想我会添加一个花絮，这样看这个的人就不会得到错误的想法。大约在过去的 3-4 年里，有一个小框架，它被添加来扩展 FUSE 文件系统边缘，它提供了一个沙盒解决方案来精确地完成提问者的要求。

它被称为 CUSE，它允许字符驱动程序由属于 FUSE 组的人在内核中打开了 FUSE 和 CUSE 的系统上实例化。所需要的只是一个适当的应用程序（您的发行版上的 OSS 适配守护进程只是一个这样的应用程序，FWIW ...）

那时的“你不能”之类的答案根本没有帮助，没有真正考虑过这个问题，而且……呵呵……总体上是*错误*的……即使在那时。

CUSE 并没有像 FUSE 那样被广泛采用，因此以漂亮的易于使用的绑定形式在那里做事的帮助较少，但它仍然存在。把我带到这个话题的是我在寻找一个“更好”的答案，如果有关于这个主题的答案的话。答案是“是的，如果你能做 Python……”（pycuse）——如果你不能在那里做 Python，你只能靠自己了。嗯...我从来没有接受过这种事情...所以我要向 pycuse 学习并制作 C++/Go/etc。当我接触到它们时绑定，并且在我需要的时候需要一个新的用于我正在使用的语言的语言。

至于其余的……呵呵……下次你的鸭子多一排。你肯定没有上这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T02:30:14.210

尝试创建自己的 char 设备，然后编写一个与驱动程序通信的用户空间应用程序（我建议在这种情况下使用 netlink，因为它可能在其他驱动程序不导出符号时用作后门，但它们确实打开了用户空间的功能，在这种情况下，具有 netlink 帮助的用户空间可以用作网关）。

在您的自定义字符设备中，您可以让用户告诉您要创建的设备的路径是什么。即 char 设备创建具有固定名称的初始 char 设备，然后用户应用程序可以使用 netlink（或 ioctl）告诉该 char 设备创建另一个具有自定义名称的 char 设备。

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T12:31:02.857

您正在准确描述`viewos`虚拟机

[http://wiki.virtualsquare.org/wiki/index.php/Main_Page](http://wiki.virtualsquare.org/wiki/index.php/Main_Page)

[http://wiki.virtualsquare.org/wiki/index.php/UMview#Modules](http://wiki.virtualsquare.org/wiki/index.php/UMview#Modules)

这个虚拟机可以劫持每个指向你的内核的系统调用到你的用户空间模块（它被认为使 linux 不那么单一）

`$umview xterm`你用命令启动一个 umview 实例

所以在新生成的 xterm 中运行的每个程序都会被跟踪

现在你可以简单地做（在​​ umview 实例中）

```
$um_add_service umdev
$mount -t umdevJoystick none <your file, for example /dev/virtualJoystick> 
```

所以你可以编写一个模块来拦截每个读/写/...到你的`/dev/virtualJoystick`文件并做你想做的事

（模块语法很简单）

```
static int joystick_read(char type, dev_t device, struct dev_info *di){
    /*my operation...probably a XTestEvent() or something like that*/
}
static int joystick_write(char type, dev_t device, struct dev_info *di){
    /*my operation...probably a XTestEvent() or something like that*/
}
/*...*/
struct umdev_operations umdev_ops={
    /*hijacking table*/
    .read=joystick_read,
    .write=joystick_write,
}; 
```

（`umdev_testmodules`umview 源代码中的目录作为一个小教程非常有用！;)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-11T04:28:23.120

有一些限制，您可以考虑可以使用 LD_PRELOAD 和库覆盖对设备的常见调用的应用程序。

[看这里了解更多详情](https://unix.stackexchange.com/questions/85556/is-it-possible-to-have-two-seperate-one-way-simplex-serial-ports-to-make-singl/86317#86317)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-12-29T09:51:16.280

### 你不能。

“字符设备”是指内核中面向字符的接口。

您可以按照 LIUB 的建议创建一个类似熔断器的接口，将类似内核的 API 编组回用户空间，如果您绝对需要*在*`/dev/input`.

然而，如果您实际上并不需要 HID 设备并且因为它仅用于您的硬件，***并且***您“不需要内核访问”，因为您实际上可以从用户空间与低级硬件进行通信，您可能会考虑其他一些选项：

*   您可以使用[XSendEvent](http://tronche.com/gui/x/xlib/event-handling/XSendEvent.html)或[XTEST](http://www.x.org/docs/Xext/xtest.pdf)协议来合成本地事件。
*   您可以构建一个允许客户端连接的网络服务器（或使用[多播 unix 域套接字来有效分发数据的网络服务器）。](http://permalink.gmane.org/gmane.linux.kernel.api/2425)
*   如果这真的只是`read()`您希望客户做的事情，您可以使用[fifo](http://linux.die.net/man/3/mkfifo)。当您的程序`write()`的数据包被均匀地分成一个`PIPE_BUF`（512 字节）时，您可以[保证](http://pubs.opengroup.org/onlinepubs/007904975/functions/write.html)它们不会意外地交错到另一个数据包中。

# php - 使用 Codeigniter 从视图获取数据到控制器

> ID：14051231
> 
> 赞同：2
> 
> 时间：2012-12-27T07:47:18.643
> 
> 标签：php, codeigniter

如何使用 get 或 post 方法将用户输入的数据从视图传递到 codeigniter Php 中的控制器？我目前是 codeigniter 的新手..谢谢！

AddProduct.php（我的观点）

```
<body>
    <form method="POST" action="SaveProductController"></br></br></br>
        <table border='1' align='center'>
            <tr>
                <td>ID: </td><td><input type="text" name="id" 
                                        value="<?php echo $GetProductId->id + 1; ?>" readonly="readonly"></td>
            </tr>
            <tr>
                <td>Description: </td><td><input type="text" name="description"></td>
            </tr>
            <tr>
                <td></td><td><input type="submit" name="addProduct" value="Add Product"><td>
            </tr>
        </table>
    </form>
</body> 
```

SaveProductController .php（我的控制器）

```
class SaveProductController extends CI_Controller{

function index($description){
    $this->load->model('ProductDao');
    $data['id'] = $this->id;
    $data['description'] = $this->description;
    print_r($data);
    //$this->ProductDao->saveProduct();
} 
```

}

ProductDao.php

```
 function saveProduct() {
    $data = array(
    'id' => $this->input->xss_clean($this->input->post('id')),
    'description' => $this->input->xss_clean($this->input->post('description')),
    'price' => $this->input->xss_clean($this->input->post('price')),
    'size' => $this->input->xss_clean($this->input->post('size')),
    'aisle' => $this->input->xss_clean($this->input->post('aisle')),
    );

    $query = $this->db->insert('mytable', $data);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T07:52:46.970

```
<body>
    <form method="POST" action="<?php echo $this->base_url();?>/controllername/methodname"></br></br></br>
        <table border='1' align='center'>
            <tr>
                <td>ID: </td><td><input type="text" name="id" 
                                        value="<?php echo $GetProductId->id + 1; ?>" readonly="readonly"></td>
            </tr>
            <tr>
                <td>Description: </td><td><input type="text" name="description"></td>
            </tr>
            <tr>
                <td></td><td><input type="submit" name="addProduct" value="Add Product"><td>
            </tr>
        </table>
    </form>
</body> 
```

观察动作变化

并在您的控制器指定的方法中获取如下所示的值

```
$id=$this->input->post('id')
$idescription=$this->input->post('description') 
```

然后将这些发送到模型并做任何你想做的事

加载 url 帮助程序库以使其`$this->baseurl()`使用其他明智的硬代码工作`localhost/path...`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T13:24:44.570

我创建了名为：Test_controller 的控制器和名为：manage_test_controller 的视图，使用下面的代码，您可以从视图文件获取数据到控制器。

测试控制器.php

```
 class Test_controller extends CI_Controller {

        var $controller = "user";
        var $formValues = array();
    function manage_user() {               

                $this->formValues['formAction'] = SITEURL . '/' . 
                $this->controller . '/manage_' . $this->controller;

                if (isset($_POST['displayName']))
                    $this->formValues['displayName'] = $_POST['displayName']; 
                else
                    $this->formValues['displayName'] = "";
                if (isset($_POST['userEmail']))
                    $this->formValues['userEmail'] = $_POST['userEmail']; else
                    $this->formValues['userEmail'] = "";                   

            $this->load->view('header');
            $this->load->view($this->controller . '/manage_' . 
            $this->controller, $this->formValues);
            $this->load->view('footer');
        }
    } 
```

Manage_test_controller.php

```
<?php echo form_open_multipart($formAction); ?>
<table>
    <tr>
            <td><?php echo form_label('Display Name'); ?><em>*</em></td>
            <td><?php echo form_input('displayName',$displayName); ?></td>
        </tr>
    <tr>
            <td><?php echo form_label('Email'); ?><em>*</em></td>
            <td><?php echo form_input('userEmail',$userEmail); ?></td>
        </tr>
</table>
<?php echo form_close(); ?> 
```

希望这段代码对您有所帮助.... :)

# php - YouTube API 问题 too_many_recent_calls

> ID：14051234
> 
> 赞同：0
> 
> 时间：2012-12-27T07:47:31.073
> 
> 标签：php, zend-framework, youtube, youtube-api, socialengine

使用 youtube api 时出现错误。

这是我得到的错误，

```
exception 'Zend_Gdata_App_HttpException' with message 'Expected response code 200, got 403 ' in /usr/share/nginx/www/application/libraries/Zend/Gdata/App.php:700 Stack trace: #0 /usr/share/nginx/www/application/libraries/Zend/Gdata.php(221): Zend_Gdata_App->performHttpRequest('GET', 'http://gdata.yo...', Array, NULL, NULL, NULL) 
#1 /usr/share/nginx/www/application/libraries/Zend/Gdata/App.php(861): Zend_Gdata->performHttpRequest('GET', 'http://gdata.yo...', Array) 
#2 /usr/share/nginx/www/application/libraries/Zend/Gdata/App.php(754): Zend_Gdata_App->get('http://gdata.yo...', NULL) 
#3 /usr/share/nginx/www/application/libraries/Zend/Gdata/App.php(220): Zend_Gdata_App->importUrl('http://gdata.yo...', 'Zend_Gdata_YouT...', NULL) 
#4 /usr/share/nginx/www/application/libraries/Zend/Gdata.php(187): Zend_Gdata_App->getEntry('http://gdata.yo...', 'Zend_Gdata_YouT...') 
#5 /usr/share/nginx/www/application/libraries/Zend/Gdata/YouTube.php(293): Zend_Gdata->getEntry('http://gdata.yo...', 'Zend_Gdata_YouT...') 
#6 /usr/share/nginx/www/application/modules/Videofeed/controllers/ProfileController.php(37): Zend_Gdata_YouTube->getVideoEntry('14NiccpyGt8') 
#7 /usr/share/nginx/www/application/libraries/Zend/Controller/Action.php(513): Videofeed_ProfileController->indexAction() 
#8 /usr/share/nginx/www/application/libraries/Zend/Controller/Dispatcher/Standard.php(289): Zend_Controller_Action->dispatch('indexAction') 
#9 /usr/share/nginx/www/application/libraries/Zend/Controller/Front.php(946): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http)) 
#10 /usr/share/nginx/www/application/modules/Core/Bootstrap.php(75): Zend_Controller_Front->dispatch() 
#11 /usr/share/nginx/www/application/libraries/Engine/Application.php(160): Core_Bootstrap->run() 
#12 /usr/share/nginx/www/application/index.php(194): Engine_Application->run() 
#13 /usr/share/nginx/www/index.php(24): include('/usr/share/ngin...') 
#14 {main} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:34:29.797

您遇到了配额限制。这篇博文有更多信息：[http ://apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html](http://apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html)

# c#-4.0 - 想要创建只能接受大于先前输入的值的文本框

> ID：14051237
> 
> 赞同：1
> 
> 时间：2012-12-27T07:47:42.943
> 
> 标签：c#-4.0, asp.net-4.0

我想在 TextBox 上验证它只接受大于以前的数字或 dateTime 值。请帮助我做到这一点。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:10:04.230

如果您创建您正在检查的类型的类级别变量，那么当您正确验证时，您将其设置为当前验证的值，它将阻止您输入较低的值。像这样的东西。

```
public partial class Form1 : Form
{
    int threshold = 0;
    public Form1()
    {
        InitializeComponent();

    }

    private void textBox1_Validating(object sender, CancelEventArgs e)
    {
        TextBox tb = (TextBox)sender;
        int value;
        if (int.TryParse(tb.Text, out value))
        {
            if (value <= threshold)
            {
                errorProvider1.SetError(tb, "Value Must be Greater than " + threshold);
            }
            else
            {
                errorProvider1.Clear();
                threshold = value;
            }

        }
        else
        {
            errorProvider1.SetError(tb, "Value Must be an integer");
        }

    }  
} 
```

# java - How to detect left and right direction of a Bluetooth RC car (with Arduino) in Android Java and Arduino?

> ID：14051239
> 
> 赞同：1
> 
> 时间：2012-12-27T07:47:45.410
> 
> 标签：java, android, eclipse, arduino

I have seen code using an accelometer sensor, and there are no left or right buttons on the UI of the Android but the [RC](http://en.wikipedia.org/wiki/Radio-controlled_model) car can still turn left or right by tilting the Android to the desired direction. Is it possible to do so using buttons?

I've searched online and found this example;

```
public void leftClick(View v) {
    mInstructionList.add(new Instruction(InstructionCommand.LEFT));
    mListAdapter.notifyDataSetChanged();
}

public void rightClick(View v) {
    mInstructionList.add(new Instruction(InstructionCommand.RIGHT));
    mListAdapter.notifyDataSetChanged();
}

public void forwardClick(View v) {
    mInstructionList.add(new Instruction(InstructionCommand.FORWARD));
    mListAdapter.notifyDataSetChanged();
}

public void reverseClick(View v) {
    mInstructionList.add(new Instruction(InstructionCommand.REVERSE));
    mListAdapter.notifyDataSetChanged();
}

public void stopClick(View v) {
    mInstructionList.add(new Instruction(InstructionCommand.STOP));
    mListAdapter.notifyDataSetChanged();
} 
```

Is this correct? And how can the Arduino recognise the button click from Android?

# java - 如何在android中读取xml文件？

> ID：14051240
> 
> 赞同：1
> 
> 时间：2012-12-27T07:47:46.937
> 
> 标签：java, android, xml

我在 /mnt/sdcard 中有以下 xml 文件。我想`item type=provider`从以下文件中获取版本。该文件很大（500 行），还有其他类型。这是简化的文件。在我对此节点感兴趣的文件中：

```
<Item Type="Provider" Version="19.0.0.0"Checksum="EShHVeNtW1xTfEvLvATwqA==" FileSize="2746200" /> 
```

我想从这个节点获取版本，即 19.0.0.0。

这是我的xml文件：

```
<Manifest guid="FD29E1EF-A5C4-4D19-ACC8-8C98C7E91B02" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" PackageType="Full" Scope="APPROVED">
   <Items>
        <Item id="fcxm-8ikj-olk-ffgcxh3" Checksum="EShHVeNtW1xTfEvLvATwqA==" value="f425921f-b6ef-4e58-8a14-fcbd0d7e50e9" />
        <Item Type="question" Version="19.0.0.0"Checksum="EShHVeNtW1xTfEvLvATwqA==" FileSize="2746200" />
        <Item Type="Provider" Version="19.0.0.0"Checksum="EShHVeNtW1xTfEvLvATwqA==" FileSize="2746200" />
    </Items>
</Manifest> 
```

我正在使用 Java 代码来开发我的 android 应用程序。我在互联网上搜索，我得到了[这个](https://stackoverflow.com/questions/4138754/getting-an-attribute-value-in-xml-element)迭代到所有项目类型的节点。我不想迭代。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:11:54.477

在 android 中，我们有三种正常的方式来解析 xml，`XmlPullParser`，`SaxXmlPullParser`，`DocumentBuilder(DOM parser)`和 android`XmlPullParser`用于 android 资源解析器。

# wcf - wcf 服务返回“方法不允许”错误

> ID：14051246
> 
> 赞同：2
> 
> 时间：2012-12-27T07:48:32.207
> 
> 标签：wcf, rest

我正在尝试将对象参数作为 json 格式传递给 wcf restful 服务。

像这样的服务合同代码；

```
[WebInvoke(
    Method = "POST",
    BodyStyle = WebMessageBodyStyle.Wrapped,
    ResponseFormat = WebMessageFormat.Json,
    RequestFormat = WebMessageFormat.Json,
    UriTemplate="PR")]
[OperationContract]
TWorkRequestPostResult PostRequest(TWorkRequestPostArgs args); 
```

我的 web.config 文件是这样的；

```
<system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule"/>
    </modules>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true" />
  </system.webServer> 
```

当我尝试使用“http://localhost/serviceurl/PR”url 调用服务时，服务返回“方法不允许”错误消息。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-27T08:31:03.723

你是从浏览器调用服务吗？如果是这样，浏览器使用 HTTP GET 请求服务，而服务方法映射到 HTTP POST `Method = "POST"`，从而导致错误`"Method not allowed"`。

要修复，要么更改`Method = "GET"`它是否对 REST 有意义，要么尝试从支持 POST 的工具（例如[Fiddler](http://www.fiddler2.com/fiddler2/)或[WcfTestClient ）调用服务方法](http://msdn.microsoft.com/en-us/library/bb552364.aspx)

# mongodb - mongo db中的会话表

> ID：14051250
> 
> 赞同：1
> 
> 时间：2012-12-27T07:48:52.973
> 
> 标签：mongodb, session

我正在研究 mongo db 中可扩展会话表（自定义身份验证）的架构设计。我知道 Mongo DB 的可扩展性是从设计继承而来的，也有要求。我的用户案例很简单，

1.  当用户登录时，会生成一个随机令牌并授予用户，然后使用令牌作为主键将记录插入会话表，这是可分片的。如果存在旧令牌记录将被删除。
2.  使用令牌的用户访问服务

我的问题是，如果系统继续删除过期的会话密钥，会话集合的大小（考虑到我需要在令牌字段上分区的分片情况）可能会增长到非常大并且包括很多过期会话的“间隙”，如何优雅地处理这个问题（或任何更好的设计）？

提前致谢。

编辑：我的问题是关于存储级别。如果经常删除和插入记录，mongodb如何管理磁盘空间？它应该是一种（自动）收缩机制。希望不会阻止对集合的读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:10:29.253

我不得不建议你使用**TTL**。[您可以在http://docs.mongodb.org/manual/tutorial/expire-data/](http://docs.mongodb.org/manual/tutorial/expire-data/)阅读更多关于它的信息，它非常适合您的工作。这仅从 2.2 版开始可用

**mongo如何存储数据：** [http ://www.mongodb.org/display/DOCS/Excessive+Disk+Space](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space)

**清理已删除记录的方法：**

**命令行：** `mongod --repair`

请参阅：[http ://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--repair](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--repair)

**蒙哥壳：** `db.repairDatabase()`

请参阅：[http ://docs.mongodb.org/manual/reference/method/db.repairDatabase/](http://docs.mongodb.org/manual/reference/method/db.repairDatabase/)

所以你可以有一个自动清理脚本来执行修复，记住这会阻塞 mongo 一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:17:55.693

我同意@Steven Farley，在创建索引时，您可以设置 ttl，在 python 中通过 pymongo 驱动程序我们可以这样做

[http://api.mongodb.org/python/1.3/api/pymongo/collection.html#pymongo.collection.Collection.create_index](http://api.mongodb.org/python/1.3/api/pymongo/collection.html#pymongo.collection.Collection.create_index)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:09:15.060

有几种方法可以实现会话：

1.  [如本用例](http://www.mongodb.org/display/DOCS/Use+Case+-+Session+Objects)所示，封顶集合。
2.  通过将 expireAfterSeconds 添加到[ensureIndex使](http://docs.mongodb.org/manual/reference/method/db.collection.ensureIndex/#db.collection.ensureIndex)[带有 TTL 的数据过期](http://docs.mongodb.org/manual/tutorial/expire-data/)。
3.  清理会话程序端使用 TTL 并[删除](http://docs.mongodb.org/manual/reference/method/db.collection.remove/#db.collection.remove).

面对同样的问题，我使用了解决方案 3，因为它提供了灵活性。

[您可以在此答案](https://stackoverflow.com/questions/4555938/auto-compact-the-deleted-space-in-mongodb/4560096#4560096)中找到删除和磁盘优化的一个很好的概述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:09:56.510

TTL是好的，但修复不是。`--repair`不是为了在数据库上定期运行而设计的，实际上可能每 3 个月运行一次。它做了很多内部工作，如果经常运行，会严重损害您的服务器性能。

现在关于在这样的环境中重用磁盘空间；当您删除记录时，它将释放该“块”。如果另一个文档适合该“块”，它将重新使用该空间，否则它将实际创建一个新范围，这意味着一个新的“块”也就是更多空间。

所以如果你想在这里节省磁盘空间，你需要确保文档不超过彼此，幸运的是你有一个相对静态的模式可能：

```
{
    _id: {},
    token: {},
    user_id: {},
    device: {},
    user_agent: ""
} 
```

这应该意味着文档有望重用它们的空间。

如果他们不这样做，现在你会遇到一个棘手的部分。MongoDB 不会自动归还每个集合的可用空间（但会针对每个数据库执行，因为这与删除文件相同），因此您必须`--repair`在数据库或`compact()`集合上运行才能真正取回空间。

话虽这么说，我相信您的文档将是相对大小的，所以我不确定您是否会在这里看到问题，但您也可以尝试：[http ://www.mongodb.org/display/DOCS/Padding+Factor #PaddingFactor-usePowerOf2Sizes](http://www.mongodb.org/display/DOCS/Padding+Factor#PaddingFactor-usePowerOf2Sizes)对于经常有插入和删除的集合，它应该有助于这方面的性能。

# c# - Conversion from Int array to string array

> ID：14051257
> 
> 赞同：32
> 
> 时间：2012-12-27T07:50:03.807
> 
> 标签：c#, .net, arrays, linq, linq-to-objects

When I am converting array of integers to array of string, I am doing it in a lengthier way using a for loop, like mentioned in sample code below. Is there a shorthand for this?

The existing question and answers in SO are about `int[]` to `string` (not `string[]`). So they weren't helpful.

While I found this [Converting an int array to a String array](https://stackoverflow.com/questions/3619850/converting-an-int-array-to-a-string-array) answer but the platform is Java not C#. Same method can't be implemented!

```
 int[] intarray =  { 198, 200, 354, 14, 540 };
        Array.Sort(intarray);
        string[] stringarray = { string.Empty, string.Empty, string.Empty, string.Empty, string.Empty};

        for (int i = 0; i < intarray.Length; i++)
        {
            stringarray[i] = intarray[i].ToString();
        } 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-12-27T07:52:25.907

```
int[] intarray = { 1, 2, 3, 4, 5 };
string[] result = intarray.Select(x=>x.ToString()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-10-30T08:58:39.833

试试 Array.ConvertAll

```
int[] myInts = { 1, 2, 3, 4, 5 };

string[] result = Array.ConvertAll(myInts, x=>x.ToString()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-27T07:55:12.710

干得好：

林克版本：

```
String.Join(",", new List<int>(array).ConvertAll(i => i.ToString()).ToArray()); 
```

简单一：

```
string[] stringArray = intArray.Select(i => i.ToString()).ToArray(); 
```

# microdata - Microdata and multiple opening in a day

> ID：14051258
> 
> 赞同：2
> 
> 时间：2012-12-27T07:50:10.880
> 
> 标签：microdata, schema.org

Suppose that a place does not offer the all-day-opening. Hence, we have two opening in one day. How one should define the Microdata with [schema.org/OpeningHoursSpecification](http://schema.org/OpeningHoursSpecification)? I suppose that one should create two separated instances of *schema.org/OpeningHoursSpecification* as follows:

```
Opening hours: 
  <div itemprop="openingHoursSpecification" itemscope 
       itemtype="http://schema.org/OpeningHoursSpecification">Mo,
     <link itemprop="dayOfWeek" 
           href="http://purl.org/goodrelations/v1#Monday" />
     <meta itemprop="opens" content="08:00:00">8:00 a.m. -
     <meta itemprop="closes" content="12:00:00">12:00 a.m.
  </div>
  <div itemprop="openingHoursSpecification" itemscope 
       itemtype="http://schema.org/OpeningHoursSpecification">Mo,
     <link itemprop="dayOfWeek" 
           href="http://purl.org/goodrelations/v1#Monday" />
     <meta itemprop="opens" content="16:00:00">4:00 a.m. -
     <meta itemprop="closes" content="20:00:00">8:00 p.m.
  </div> 
```

Am I right?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:58:16.150

是的，你完全正确！

如果您想了解该模式，您还可以使用（有点过时的）GoodRelations Annotator 工具，位于

```
http://www.ebusiness-unibw.org/tools/goodrelations-annotator/en/ 
```

它将为基于表单的输入生成相应的 RDFa 标记。

请注意，在 schema.org 中，元素的命名可能与原始命名空间中的命名略有不同，如下所述：

```
http://wiki.goodrelations-vocabulary.org/Cookbook/Schema.org#Naming_Differences 
```

最好的祝愿

马丁赫普

# mysql - MySQL can distinguish NULL and ""(null character string)

> ID：14051261
> 
> 赞同：-1
> 
> 时间：2012-12-27T07:50:31.553
> 
> 标签：mysql, validation

I set default value in a field NOT NULL. The sql is as follows.

```
insert into table_name () values () 
```

I expected this sql should be rejected by MySQL as a field restricts NULL. But, the field had a value ""(null character string).

Then, I tried another sql.

```
insert into table_name (name) values (NULL) 
```

As this sql was rejected, no value was inserted.

MySQL seems to distinguish NULL and "". Do I have to avoid first sql such as "values ()"?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:18:10.940

一个好的做法是始终使列不为空，并在创建表时设置默认值。

在插入时，如果您不提供值，则将为该列分配默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:56:07.927

> 我是否必须在设置为 NOT NULL 的字段中设置默认值？

**是**，如果您正在执行`INSERT`where in 您将不会为 NOT NULL 列设置任何值

和

**NO**不再需要，如果您在 上为 NOT NULL 的列提供值`INSERT`。

你可以参考这个

[http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)

# iphone - Custom progress slider control on MPMoviePlayer

> ID：14051264
> 
> 赞同：5
> 
> 时间：2012-12-27T07:50:49.017
> 
> 标签：iphone, ios, slider, progress, mpmovieplayer

Is there a way to customise the look or at least position of the movie progress slider on MPMovidePlayer?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T08:20:17.820

使用隐藏现有控件`MPMovieControlStyle`，将其设置为`MPMovieControlStyleNone`。

现在`add`你`custom control`的`MPMoviePlayer's`观点。

将示例[uislider-to-control-avaudioplayer](https://stackoverflow.com/questions/2654849/uislider-to-control-avaudioplayer)`MPMoviePlayer`与has相同`currentPlaybackTime`

请参阅[mpmovieplayercontroller-buffering-state](https://stackoverflow.com/questions/9550813/mpmovieplayercontroller-buffering-state)链接。

请参阅[mpmovieplayercontroller-when-will-i-know-that-the-downloading-of-the-file-reach](https://stackoverflow.com/questions/10346327/mpmovieplayercontroller-when-will-i-know-that-the-downloading-of-the-file-reach)链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:22:48.640

> 为此，您必须制作自己的自定义滑块。例如，您可以隐藏 MPMoviePlayerController 进度条并制作自己的自定义进度条您可以通过此代码隐藏 MPMoviePlayerController 进度条

```
moviePlayerController.controlStyle  = MPMovieControlStyleNone; 
```

> 然后您可以创建自定义进度条`UISlider *progressbar;`

```
[progressbar setMinimumTrackImage:[UIImage imageNamed:@"min.png"] forState:UIControlStateNormal];//you can set the background for which you have progressed the video
[progressbar setMaximumTrackImage:[UIImage imageNamed:@"max.png"] forState:UIControlStateNormal];//you can set the background for which you have left the video
[progressbar setThumbImage:[UIImage imageNamed:@"thumb.png"] forState:UIControlStateNormal];//you can set the thumb image for you progress bar. 
```

> 这将是滑块，您可以在线程中更新滑块的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-26T06:29:52.510

这是进度滑块的代码，例如 MPMoviePlayerController

> “使用 NSTimer 平滑移动滑块作为 MPMoviePlayerController 进度条”

// 您可以根据需要更改 scheduleTimerWithTimeInterval

```
[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateSlider) userInfo:nil repeats:YES]; 
```

> “将 currentPlaybackTime 设置为 Slider 值”

```
- (void)updateSlider {
      slider1.value = self.moviePlayerController.currentPlaybackTime;
    } 
```

# css - What's the mystery of the Bootstrap dropdown menu triangle?

> ID：14051269
> 
> 赞同：15
> 
> 时间：2012-12-27T07:51:16.687
> 
> 标签：css, drop-down-menu, twitter-bootstrap

I'm trying to understand the difference between Twitter Bootstrap dropdown menus when they are included within a navbar and when they are not.

When they are included into a navbar, a little up triangle/arrow is showed upon the expanded menu. This triangle is not showed when no navbar is used :

[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

I just spent two hours exploring the css/html, I still don't understand WHY...

Any idea ?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-27T08:24:34.177

在 nav 元素内部时，有两种样式应用于下拉菜单。它们如下：

```
.navbar .nav > li > .dropdown-menu::before {
   position: absolute;
   top: -7px;
   left: 9px;
   display: inline-block;
   border-right: 7px solid transparent;
   border-bottom: 7px solid #CCC;
   border-left: 7px solid transparent;
   border-bottom-color: rgba(0, 0, 0, 0.2);
   content: '';
 }
 .navbar .nav > li > .dropdown-menu::after {
    position: absolute;
    top: -6px;
    left: 10px;
    display: inline-block;
    border-right: 6px solid transparent;
    border-bottom: 6px solid white;
    border-left: 6px solid transparent;
    content: '';
  } 
```

他们在彼此的顶部创建了两个三角形，一个是浅灰色，另一个是深灰色。如果您使用 chrome 开发人员工具，您可以检查这些元素并关闭不同的样式以了解它们在做什么。没有导航栏就不会应用这些样式

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-08T15:29:25.100

只需将其添加到 CSS 中，您就可以使用下拉菜单箭头，而无需将下拉菜单放在导航栏中

```
.dropdown-menu:before {
   position: absolute;
   top: -7px;
   left: 9px;
   display: inline-block;
   border-right: 7px solid transparent;
   border-bottom: 7px solid #CCC;
   border-left: 7px solid transparent;
   border-bottom-color: rgba(0, 0, 0, 0.2);
   content: '';
 }

.dropdown-menu:after {
    position: absolute;
    top: -6px;
    left: 10px;
    display: inline-block;
    border-right: 6px solid transparent;
    border-bottom: 6px solid white;
    border-left: 6px solid transparent;
    content: '';
  }

.dropdown-menu:before, .dropdown-menu.pull-right:before {
right: 12px;
left: auto;
}

.dropdown-menu::after, .dropdown-menu.pull-right:after {
right: 13px;
left: auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:00:55.653

三角形可以通过以下语法生成：

```
 <b class="caret dropdown-toggle"></b> 
```

# grails - grails run-app error Plugin [functional-test-1.2.7] not installed

> ID：14051270
> 
> 赞同：0
> 
> 时间：2012-12-27T07:51:18.053
> 
> 标签：grails, run-app

I am using Grails 1.2.1 and Groovy-Grails Tool Suite 3.1.0\. Before that I was used 2.5.2.RELEASE of STS. But after upgrading to Groovy-Grails Tool Suite 3.1.0, when I am trying to run the app I am getting the following error:

```
Welcome to Grails 1.2.1 - http://grails.org/
Licensed under Apache Standard License 2.0
Grails home is set to: C:\Program Files\Grails\grails-1.2.1\

Base Directory: D:\softwares\My_workspace\BluBilling
Resolving dependencies...
Dependencies resolved in 847ms.
Running script C:\Program Files\Grails\grails-1.2.1\scripts\RunApp.groovy
Environment set to development
Plugin [functional-test-1.2.7] not installed, resolving..
Reading remote plugin list ...Plugin 'functional-test' was not found in repository. If it is not stored in a configured repository you will need to install it manually. Type 'grails list-plugins' to find out what plugins are available. 
```

And when I am open Plugin manager I am getting the empty list but in console window getting one plugin and also getting following error:

```
Welcome to Grails 1.2.1 - http://grails.org/
Licensed under Apache Standard License 2.0
Grails home is set to: C:\Program Files\Grails\grails-1.2.1\

Base Directory: D:\softwares\My_workspace\BluBilling
Resolving dependencies...
Dependencies resolved in 847ms.
Running script C:\Program Files\Grails\grails-1.2.1\scripts\ListPlugins_.groovy
Environment set to development
Reading remote plugin list ...

Plug-ins available in the core repository are listed below:
-------------------------------------------------------------

dummy               <0.1 (?)>          --  Plugin summary/headline
hibernate           <1.3.8>          --  Hibernate for Grails
tomcat              <1.3.8>          --  Apache Tomcat plugin for Grails
webflow             <1.3.8.BUILD-SNAPSHOT> --  Spring Web Flow Plugin
Reading remote plugin list ...

Plug-ins available in the default repository are listed below:
-------------------------------------------------------------

No plugins found in repository: https://svn.codehaus.org/grails-plugins

Plug-ins you currently have installed are listed below:
-------------------------------------------------------------

google-chart        0.5.0            --  This plugin adds Google Chart API features to Grails applications.

To find more info about plugin type 'grails plugin-info [NAME]'

To install type 'grails install-plugin [NAME] [VERSION]'

For further info visit http://grails.org/Plugins

Error executing script ListPlugins: grails.util.BuildSettings.getPluginClassesDir()Ljava/io/File;
java.lang.NoSuchMethodError: grails.util.BuildSettings.getPluginClassesDir()Ljava/io/File;
    at org.grails.ide.eclipse.runtime.GrailsBuildSettingsDependencyExtractor.getPluginClassesDir(GrailsBuildSettingsDependencyExtractor.java:63)
    at org.grails.ide.eclipse.runtime.GrailsBuildSettingsDependencyExtractor.getDependencyData(GrailsBuildSettingsDependencyExtractor.java:217)
    at org.grails.ide.eclipse.runtime.GrailsBuildSettingsDependencyExtractor.writeDependencyFile(GrailsBuildSettingsDependencyExtractor.java:201)
    at org.grails.ide.eclipse.runtime.DependencyExtractingBuildListener.receiveGrailsBuildEvent(DependencyExtractingBuildListener.java:79)
    at gant.Gant$_dispatch_closure4.doCall(Gant.groovy:324)
    at gant.Gant$_dispatch_closure6.doCall(Gant.groovy:334)
    at gant.Gant$_dispatch_closure6.doCall(Gant.groovy)
    at gant.Gant.withBuildListeners(Gant.groovy:344)
    at gant.Gant.this$2$withBuildListeners(Gant.groovy)
    at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
    at gant.Gant.dispatch(Gant.groovy:334)
    at gant.Gant.this$2$dispatch(Gant.groovy)
    at gant.Gant.invokeMethod(Gant.groovy)
    at gant.Gant.processTargets(Gant.groovy:495)
    at gant.Gant.processTargets(Gant.groovy:480)
Error executing script ListPlugins: grails.util.BuildSettings.getPluginClassesDir()Ljava/io/File; 
```

I tried to install functional-test plugin using the command:

```
grails install-plugin functional-test 
```

But I am getting the following error:

```
Welcome to Grails 1.2.1 - http://grails.org/
Licensed under Apache Standard License 2.0
Grails home is set to: C:\Program Files\Grails\grails-1.2.1\

Base Directory: D:\softwares\My_workspace\BluBilling
Resolving dependencies...
Dependencies resolved in 822ms.
Running script C:\Program Files\Grails\grails-1.2.1\scripts\InstallPlugin.groovy
Environment set to development
Reading remote plugin list ...Plugin 'functional-test' was not found in repository. If it is not stored in a configured repository you will need to install it manually. Type 'grails list-plugins' to find out what plugins are available. 
```

Anyone help me please...

Thanks in advance.

Nimmy.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:23:14.573

在您的控制台中，您可以看到：

> 欲了解更多信息，请访问[http://grails.org/Plugins](http://grails.org/Plugins)

所以，你应该去这个页面并尝试找到插件**功能测试**。在这个插件[功能测试](http://grails.org/plugin/functional-test)的页面上你可以看到

> 依赖：
> 
> 编译“：功能测试：2.0.RC1”
> 
> 自定义存储库：
> 
> **mavenRepo "http://repository.codehaus.org/"**
> 
> **mavenRepo "http://repository.jboss.org/maven2/"**

因此，尝试将此存储库添加到 BuildConfig.groovy。现在是当前版本的 grails - 2.2 :)

如果不起作用，请尝试使用最新版本的插件：**functional-test:2.0.RC1**

# multithreading - How to implement frequent start/stop of a thread (QThread)

> ID：14051276
> 
> 赞同：5
> 
> 时间：2012-12-27T07:52:03.057
> 
> 标签：multithreading, qt, qthread

I need to start and stop a thread very frequently using push button..I am using Qt. Recently I learned to create a QObject of the worker and move it to the object of the QThread as the correct way of implementing threads in Qt. Following is my implementation...

**Worker.h**

```
class worker : public QObject
{
    Q_OBJECT
public:
    explicit worker(QObject *parent = 0);
    void StopWork();
    void StartWork();
    bool IsWorkRunning();

signal:
    void SignalToObj_mainThreadGUI();

public slots:
    void do_Work();

private:
    void Sleep();

    volatile bool running,stopped;
    QMutex mutex;
    QWaitCondition waitcondition;
}; 
```

**Worker.cpp**

```
 worker::worker(QObject *parent) :
    QObject(parent),stopped(false),running(false)
{
}

void worker::do_Work()
{
    running = true;
    while(!stopped)
    {
        emit SignalToObj_mainThreadGUI();
        Sleep();
    }
}

void worker::Sleep()
{
    mutex.lock();
    waitcondition.wait(&mutex,10);
    mutex.unlock();
}

void worker::StopWork()
{
    mutex.lock();
    stopped = true;
    running = false;
    mutex.unlock();
}

void worker::StartWork()
{
    mutex.lock();
    stopped = false;
    running = true;
    mutex.unlock();
}

bool worker::IsWorkRunning()
{
    return running;
} 
```

**MainWindow.h**

```
namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

public slots:

private slots:
    void on_pushButton_push_to_start_clicked();

    void on_pushButton_push_to_stop_clicked();

private:

    Ui::MainWindow *ui;
    worker *myWorker;
    QThread *WorkerThread;
}; 
```

**MainWindow.cpp**

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    myWorker = new worker;
    WorkerThread = new QThread;
    myWorker.moveToThread(WorkerThread);

    QObject::connect(WorkerThread,SIGNAL(started()),myWorker,SLOT(do_Work()));
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_push_to_start_clicked()
{
    if(!myWorker.IsWorkRunning())
       {
         myWorker->StartWork();
         WorkerThread->start();
       }
}

void MainWindow::on_pushButton_push_to_stop_clicked()
{
  if(myWorker.IsWorkRunning())
     {
       myWorker->StopWork();
       WorkerThread->quit();
     }
} 
```

Initially the application works fine but after some operations of the push button to turn the working of the thread on and off the following error comes up...

**QObject::killTimers(): timers cannot be stopped from another thread**

I am quite puzzled at this error...do I need to implement the start/stop functions as signals and slots rather than member functions of the class?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T16:56:19.407

不要开始和停止`WorkerThread`。让它继续运行。此外，将您的`StartWork()`和`StopWork()`方法移至公共插槽部分。你真的根本不需要互斥锁。

**工人.h**

```
class worker : public QObject
{
  Q_OBJECT
public:
  explicit worker(QObject *parent = 0);

signal:
  void SignalToObj_mainThreadGUI();
  void running();
  void stopped();

public slots:
  void StopWork();
  void StartWork();

private slots:
  void do_Work();

private:
  volatile bool running,stopped;
}; 
```

**工人.cpp**

```
worker::worker(QObject *parent) :
  QObject(parent), stopped(false), running(false)
{}

void worker::do_Work()
{
  emit SignalToObj_mainThreadGUI();

  if ( !running || stopped ) return;

  // do important work here

  // allow the thread's event loop to process other events before doing more "work"
  // for instance, your start/stop signals from the MainWindow
  QMetaObject::invokeMethod( this, "do_Work", Qt::QueuedConnection );
}

void worker::StopWork()
{
  stopped = true;
  running = false;
  emit stopped();
}

void worker::StartWork()
{
  stopped = false;
  running = true;
  emit running();
  do_Work();
} 
```

**主窗口.h**

```
namespace Ui {
  class MainWindow;
}

class MainWindow : public QMainWindow
{
  Q_OBJECT
public:
  explicit MainWindow(QWidget *parent = 0);
  ~MainWindow();

signals:
  void startWork();
  void stopWork();

private slots:
  void on_pushButton_push_to_start_clicked();
  void on_pushButton_push_to_stop_clicked();

private:
  Ui::MainWindow *ui;
  worker *myWorker;
  QThread *WorkerThread; 
```

};

**主窗口.cpp**

```
MainWindow::MainWindow(QWidget *parent) :
  QMainWindow(parent),
  ui(new Ui::MainWindow)
{
  ui->setupUi(this);

  myWorker = new worker;
  WorkerThread = new QThread;
  myWorker.moveToThread(WorkerThread);

  connect( this, SIGNAL(startWork()), myWorker, SLOT(StartWork()) );
  connect( this, SIGNAL(stopWork()), myWorker, SLOT(StopWork()) );
}

void MainWindow::on_pushButton_push_to_start_clicked()
{
  emit startWork();
}

void MainWindow::on_pushButton_push_to_stop_clicked()
{
  emit stopWork();
} 
```

# c++ - Why isn't push/pop matrix equivalence necessary in OpenGL ES 2.0?

> ID：14051277
> 
> 赞同：1
> 
> 时间：2012-12-27T07:52:04.903
> 
> 标签：c++, opengl-es, opengl-es-2.0

Consider this OpenGL ES 1.1 code, called every frame:

```
glPushMatrix();
glRotatef(m_currentAngle, 0, 0, 1);

//... enable, point, draw vertices

glPopMatrix(); 
```

All well and good. Now if I remove the push/pop, I get continuous rotation animation, which makes sense.

However, in ES 2.0, here is the equivalent effect:

```
 //no glRotate so doing this:
float radians = m_currentAngle * 3.14159f / 180.0f;
float s = std::sin(radians);
float c = std::cos(radians);
float zRotation[16] = {
    c, s, 0, 0,
    -s, c, 0, 0,
    0, 0, 1, 0,
    0, 0, 0, 1
};
GLint modelviewUniform = glGetUniformLocation(m_simpleProgram, "Modelview");
glUniformMatrix4fv(modelviewUniform, 1, 0, &zRotation[0]);

//... then enable, point and draw vertices 
```

This also creates the proper image, but despite nothing equivalent to a "push/pop" technique, it does *not* continuously rotate. Why does the 2.0 not continuous rotate, while the 1.1 does?

Or phrased another way, why does 1.1 require the push/pop to prevent continuous animation, while 2.0 does not?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T08:03:30.123

旧式管道是为场景图使用而设计的。当您引入一个新变换时，它会与当前变换连接，因此为了能够制作场景图，您可以在访问子节点时将当前变换推送到提供的堆栈中，应用本地变换，做一些渲染，然后再次弹出变换以返回父变换。

GL 的渲染/照明管道还必须能够理解所使用的矩阵，这就是为什么它被分成“投影”和“模型视图”的原因。

新风格的管道不会做任何事情。您在该管道中所做的是指定要渲染的确切矩阵。当您指定不同的矩阵时，它只是替换已经存在的任何内容。

您的示例等效于执行以下操作：

```
glLoadIdentity()
glRotate() 
```

所以没有连续的旋转。

如果您想要连接、推送、弹出等，则由您自己实现。您需要存储前一个矩阵值，并将其相乘。或者，更新旋转值。

造成这种情况的原因有很多，其中最重要的是可编程管道对如何转换顶点的定义不太严格，因此它将必要矩阵的构建留给了程序员。也许您甚至没有矩阵，而是在着色器中构造变换。

# javascript - 使用 Knockout.js、冲突的 jQuery.tmpl 和 Knockout-Sortable 控制 Flash 插件

> ID：14051283
> 
> 赞同：2
> 
> 时间：2012-12-27T07:52:33.943
> 
> 标签：javascript, jquery, knockout.js, jquery-templates, knockout-sortable

我正在尝试使用 Knockout.js 的本机模板功能来渲染 HTML 以嵌入 Flash 对象。jQuery.tmpl 完美地完成了这项工作，但是由于与 Knockout-sortable 插件的冲突，我无法使用它。

下面是一个使用原生模板的 Flash 插件示例：[http://jsfiddle.net/7y3ub/35/](http://jsfiddle.net/7y3ub/35/)
在 Chrome 中，播放器永远不会出现。在 Firefox 中，如果您在选中复选框时更改频道，播放器将显示。然而，重新选中该框会使玩家再次消失。

'if' 绑定是必要的，因为在页面期间可能有许多 Flash 插件加载和卸载实例。

据我所知，当对象/嵌入标签进入可见 DOM 时，HTML 需要全部到位。这就是为什么 jQuery.tmpl 在我的情况下会很棒。我自己尝试过形成 HTML 字符串，但我不知道如何应用和维护新标记包含的绑定。

归根结底，我要么需要一种在仍然支持绑定的同时立即呈现 HTML 的方法，要么找到一种使 jQuery.tmpl 和 Knockout-sortable 相互兼容的方法。

* * *

下面是一个不兼容的例子：http: [//jsfiddle.net/7y3ub/41/](http://jsfiddle.net/7y3ub/41/)
如果你简单地取消引用 jQuery.tmpl，这个例子中的代码将完美地工作。[http://jsfiddle.net/7y3ub/42/](http://jsfiddle.net/7y3ub/42/)

控制台中的错误消息似乎暗示上下文没有被正确调整，或者暗示的 foreach 没有执行。在此调整中，消息变得更加不寻常，其中`SubItem`对象被简单的字符串替换：http: [//jsfiddle.net/7y3ub/43/](http://jsfiddle.net/7y3ub/43/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:40:25.870

我不确定 jQuery Tmpl 不兼容。我将不得不进一步调查。不过，如果您不需要为此目的使用 jQuery Tmpl，那就太好了。

看起来某些浏览器（尤其是 Chrome）在动态设置元素`src`时存在问题。`embed`这是一个问题：[http](http://code.google.com/p/chromium/issues/detail?id=69648) ://code.google.com/p/chromium/issues/detail?id=69648 。这是一个类似的问题：[Dynamically change embedded video src in IE/Chrome (works in Firefox)](https://stackoverflow.com/questions/2985205/dynamically-change-embedded-video-src-in-ie-chrome-works-in-firefox)

所以，为了让这个工作，我们必须避免`attr`在元素上使用绑定，因为它会导致这个问题。

使这项工作无需回退到不同的模板引擎的一种简单方法是使用元素`html`上的绑定。`object`就像：

```
<p data-bind="if: StreamEnabled">
  <object width="320" height="240" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data-bind="html: Template">
  </object>
</p>​ 
```

使用 JavaScript，例如：

```
var ViewModel = function() {
    this.StreamEnabled = ko.observable(false);
    this.Channel = ko.observable("saltwatercams");
    this.Template = ko.computed(function() {
        return "<param name=\"movie\" value=\"" + this.Channel() + "\"></param><embed width=\"320\" height=\"240\" type=\"application/x-shockwave-flash\" src=\"http://cdn.livestream.com/grid/LSPlayer.swf?channel=" + this.Channel() + "\"></embed>";
    }, this);
}; 
```

不幸的是，我们需要在视图模型中构建“模板”，但这似乎是解决此问题的合理解决方法。

示例：http: [//jsfiddle.net/rniemeyer/CWPwj/](http://jsfiddle.net/rniemeyer/CWPwj/)

作为替代方案，您可以考虑使用自定义绑定。也许是克隆节点、应用 attr 绑定并将其与原始节点交换的节点。这将避免将模板嵌入到视图模型中。除了这种情况，我看不到此绑定的其他用途，但这里有一个示例实现：http: [//jsfiddle.net/rniemeyer/rGP7z/](http://jsfiddle.net/rniemeyer/rGP7z/)

# time - 获取独立于客户端 pc 本地时间的时间和日期

> ID：14051290
> 
> 赞同：1
> 
> 时间：2012-12-27T07:53:01.320
> 
> 标签：time, timezone

如何**获取客户区的确切时间和日期**，**而不依赖于客户电脑的本地时间和日期**。即使那台电脑的时间和/或日期设置为错误的时间，我也想在我的网页上显示该时区的确切时间和日期。
我可以使用客户端电脑的服务器时间和时区计算它吗？如何计算？或任何其他方式来做到这一点？
我想要任何带有 php、mysql、js 或 jQuery 的解决方案...
非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:55:11.493

如果您使用任何服务器端语言（如 php）执行此操作，它将显示独立于客户端计算机的服务器时间。只有客户端脚本会显示客户端电脑时间

像 php**时间（）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:54:51.163

您需要做的是猜测客户时区。你只能[做一个猜测](https://stackoverflow.com/questions/743505/how-to-get-time-zone-through-ip-address-in-php)。您可以在某些服务中向客户端发送 IP 地址，让它猜测地理位置，并从中找出时区。但它们并不可靠。最好的办法是你问客户他在哪个时区。

然后，您可以使用[jstimezonedetect](https://bitbucket.org/pellepim/jstimezonedetect) JS 库进行猜测并让用户确认。一旦您知道客户端时区，您需要将服务器时间转换为客户端时间。如何做到这一点[在这里](https://stackoverflow.com/questions/13725596/using-timezone-data-to-workout-local-user-time/13740769#13740769)得到解答。

# php - PHP shell_exec() 不适用于 wc 等某些命令

> ID：14051296
> 
> 赞同：1
> 
> 时间：2012-12-27T07:54:00.063
> 
> 标签：php, shell, ubuntu

我有安装了 PHP 5.3、Apache2 的 ubuntu 12.04。我需要使用 php 和 pdf 计算 doc 文件中的单词。虽然我可以将 shell_exec 用于将文本转换为 pdf，但不能用于 wc。这是代码

```
 <?php
    $content = shell_exec('pdftotext test.pdf -');
    echo str_word_count($content);// this is working

    $word_count = exec('wc -w test.doc'); //this is not working
    echo $word_count;
    ?> 
```

但是代码在命令行中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T09:35:23.007

实际上我的 ubuntu Release 12.04 有问题。我用 ubuntu 11.10 和 LAMP 试过了。一切都像一个魅力。我将重新安装这个 ubuntu 的 dist 并再次检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:42:34.900

```
<?php

   echo exec('wc -w test.doc;echo $?'); 

?> 
```

试试这个，看看你能得到什么。如果结果为0，则有效，否则会给出一些错误信息。

# python - 使用金字塔上传多个文件

> ID：14051298
> 
> 赞同：6
> 
> 时间：2012-12-27T07:54:10.297
> 
> 标签：python, file-upload, pyramid

尝试使用 python 一次上传多个文件。upload.html 源代码如下：

```
 <form name="frmRegister" method="post" accept-charset="utf-8" enctype="multipart/form-data" class="form-horizontal">
             <div class="control-group">
                 <div class="controls">
                    <input type="file" name="files" multiple='multiple'>
                 </div>
             </div>
             <div class="control-group">
                 <div class="controls">
                    <input class="btn btn-primary" type="submit" name="btnSubmit" value="Add Product" />
                 </div>
             </div>
        </form> 
```

在我的 admin.py 中：

```
 @view_config(context="mycart:resources.Product", name="add", renderer='admin/mall/product/add.jinja2', permission = 'admin')
    @view_config(context="mycart:resources.Product", name="add", request_method="POST",  renderer='admin/mall/product/add.jinja2', permission = 'admin')
    def product_add(context, request):
        if 'btnSubmit' in request.POST:
            print ("files >>> ", request.POST['files']) 
```

在我的终端中，它只显示 FieldStorage('files', u'DSC01973.JPG') 而我选择了 'DSC01975.JPG', 'DSC01976.JPG'。

为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T08:15:18.937

我已经找到了解决方法，相信还有很多其他方法，如果有，请随时大声疾呼：

```
 fileslist = request.POST.getall('files')
    print ("My files listing: ", fileslist)
    for f in fileslist:
        print ( "individual files: ", f ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-26T11:59:53.623

我可以使用以下功能解决问题：

```
from cgi import FieldStorage
def get_all_file_data_list(request):
    return [x for x in request.POST.values() if isinstance(x, FieldStorage)] 
```

# codeigniter - CodeIgniter 链接在本地服务器中不起作用

> ID：14051303
> 
> 赞同：0
> 
> 时间：2012-12-27T07:54:57.953
> 
> 标签：codeigniter, amember

我有一个使用 CodeIgniter 框架运行的 PHP 项目的副本。它托管在某个服务器中，当我尝试访问特定 URL 时

`www.xxxdomain.com/member/member/index`

上面的 URL 正在加载一个带有 CSS 的页面

它我以下面的方式调用相同的链接仍然页面正在加载但它无法加载 CSS

`www.xxxdomain.com/member/index.php/member/index`

现在，当我下载此代码并尝试在我自己的本地服务器中运行时，当我尝试`http://localhost/project1/member/member/index`调用它时，我在调用它的同时收到 404 错误，因为`http://localhost/project1/member/index.php/member/index`正在加载所需的页面但加载时没有 CSS。

为什么页面在我的服务器中使用相同的 URL 加载，而不是在我的 localhost 中运行？我更改了 base_url 设置，我非常确定我用 localhost url 而不是服务器 url 替换了所有实例，但问题仍然存在。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:46:44.627

在本地服务器的根 CI 文件夹中创建一个文件 .htaccess ...

并粘贴此重写代码..

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

如果您想了解更多关于[htaccess](http://en.wikipedia.org/wiki/Htaccess)的信息。

确保你把你的配置 index_page 留空....`$config['index_page'] = "";`

# android - 向服务器发送 HTTPS Post 请求

> ID：14051304
> 
> 赞同：6
> 
> 时间：2012-12-27T07:55:07.130
> 
> 标签：android

这是我的 HTTP JSON

```
 {  
 "User": {    
    "Name": "Compulsary","Password": "Compulsary"  }
} 
```

我必须使用 HTTPS POST 请求将其发布到服务器。当我尝试发送请求时，我得到 SSL 服务器证书异常。我该如何解决这个问题？

我试过什么？

我试过使用`HTTPPost`with `HTTPClient`。SSL 异常。我也尝试使用`URLConnection`并忽略了 SSL 证书的检查。我收到 401 和 405 响应代码。

问题陈述：

将上述 POST 请求发送到服务器（请求是安全的，接受 https）。如何在android中实现这一点？

我试过这个，我的代码，我收到 405 错误？

```
// always verify the host - dont check for certificate
final static HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() {
    public boolean verify(String hostname, SSLSession session) {
        return true;
    }
};

/**
 * Trust every server - dont check for any certificate
 */
private static void trustAllHosts() {
    // Create a trust manager that does not validate certificate chains
    TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return new java.security.cert.X509Certificate[] {};
        }

        public void checkClientTrusted(X509Certificate[] chain,
                String authType) throws CertificateException {
        }

        public void checkServerTrusted(X509Certificate[] chain,
                String authType) throws CertificateException {
        }
    } };

    // Install the all-trusting trust manager
    try {
        SSLContext sc = SSLContext.getInstance("TLS");
        sc.init(null, trustAllCerts, new java.security.SecureRandom());
        HttpsURLConnection
                .setDefaultSSLSocketFactory(sc.getSocketFactory());
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private void makeRequest() {
    URL url = null;
    HttpsURLConnection urlConnection = null;
    try {
        url = new URL("https://wbapi.cloudapp.net:443/api/User/LocalLogin");
    } catch (MalformedURLException e2) {
        // TODO Auto-generated catch block
        e2.printStackTrace();
    }
    StringBuilder sb = new StringBuilder();

    try {
        trustAllHosts();
        urlConnection = (HttpsURLConnection) url.openConnection();
        urlConnection.setHostnameVerifier(DO_NOT_VERIFY);
        urlConnection.setDoOutput(true);
        urlConnection
                .setRequestProperty("Content-Type", "application/json");
        urlConnection.setFixedLengthStreamingMode(urlConnection
                .getContentLength());
    } catch (IOException e2) {
        // TODO Auto-generated catch block
        e2.printStackTrace();
    }

    try {
        urlConnection.connect();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    JSONObject jsonParam = new JSONObject();
    try {
        jsonParam.put("Name", "dog");
        jsonParam.put("Password", "123");
        Log.v("Length", "" + urlConnection.getContentLength());
        int HttpResult = urlConnection.getResponseCode();
        Toast.makeText(LoginActivity.this, "Response" + HttpResult,
                Toast.LENGTH_LONG).show();
        if (HttpResult == HttpsURLConnection.HTTP_OK) {
            System.out.println("ok");
            Log.v("Hi", "" + "Trex");
            BufferedReader br = new BufferedReader(new InputStreamReader(
                    urlConnection.getInputStream(), "utf-8"));
            String line = null;
            while ((line = br.readLine()) != null) {
                sb.append(line + "\n");
            }
            br.close();

            System.out.println("" + sb.toString());
            Toast.makeText(LoginActivity.this, "" + sb.toString(),
                    Toast.LENGTH_LONG).show();

        } else {
            System.out.println("Here" + urlConnection.getResponseMessage());
        }
    } catch (MalformedURLException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

Logcat 条目

```
12-27 13:41:27.228: V/Length(3034): 72
12-27 13:41:27.248: I/System.out(3034): HereMethod Not Allowed 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T09:57:34.580

**第 1 步：**创建一个类`MySSLSocketFactory`并包含以下代码：

```
public class MySSLSocketFactory extends SSLSocketFactory {
    SSLContext sslContext = SSLContext.getInstance("TLS");

    public MySSLSocketFactory(KeyStore truststore)
                    throws NoSuchAlgorithmException, KeyManagementException,
                    KeyStoreException, UnrecoverableKeyException {
            super(truststore);

            TrustManager tm = new X509TrustManager() {
                    public void checkClientTrusted(X509Certificate[] chain,
                                    String authType) throws CertificateException {
                    }

                    public void checkServerTrusted(X509Certificate[] chain,
                                    String authType) throws CertificateException {
                    }

                    public X509Certificate[] getAcceptedIssuers() {
                            return null;
                    }
            };

            sslContext.init(null, new TrustManager[] { tm }, null);
    }

    @Override
    public Socket createSocket(Socket socket, String host, int port,
                    boolean autoClose) throws IOException, UnknownHostException {
            return sslContext.getSocketFactory().createSocket(socket, host, port,
                            autoClose);
    }

    @Override
    public Socket createSocket() throws IOException {
            return sslContext.getSocketFactory().createSocket();
    }

} 
```

**第 2 步：**创建一个类`WebClientDevWrapper`并包含以下代码：

```
public class WebClientDevWrapper {

    public static HttpClient getNewHttpClient() {
         try {
             KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
             trustStore.load(null, null);

             SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
             sf.setHostnameVerifier(
                    SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

             HttpParams params = new BasicHttpParams();
             HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
             HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

             SchemeRegistry registry = new SchemeRegistry();
             registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
             registry.register(new Scheme("https", sf, 443));

             ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);

             return new DefaultHttpClient(ccm, params);
         } catch (Exception e) {
             return new DefaultHttpClient();
         }
     }

} 
```

**第 3 步：**在您的 Activity 或其他地方创建一个方法，该方法将用于进行网络调用。

```
/**
     * Request JSON based web service to get response
     * 
     * @param url
     *            - base URL
     * @param request
     *            - JSON request
     * @return response
     * @throws ClientProtocolException
     * @throws IOException
     * @throws IllegalStateException
     * @throws JSONException
     */
    public HttpResponse request(String url, JSONObject request)
            throws ClientProtocolException, IOException, IllegalStateException,
            JSONException {

        DefaultHttpClient client = (DefaultHttpClient) WebClientDevWrapper.getNewHttpClient();

            HttpPost post = new HttpPost(url);
            post.setEntity(new StringEntity(request.toString(), "utf-8"));
            HttpResponse response = client.execute(post);
            return response;
        }
    } 
```

**第 4 步：**调用方法并获得响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:40:36.307

我正在使用以下代码组合 https/http/wift/3G ，希望对您有所帮助

```
public class CustomHttpClient {
private static DefaultHttpClient customHttpClient;

/** A private Constructor prevents instantiation */
private CustomHttpClient() {
}

public static synchronized DefaultHttpClient getHttpClient() {
    if (customHttpClient == null) {
        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params,
                HTTP.DEFAULT_CONTENT_CHARSET);
        HttpProtocolParams.setUseExpectContinue(params, true);
        HttpProtocolParams.setUserAgent(params, "Mozilla/5.0 (Linux; U; Android 2.2.1; en-us; Nexus One Build/FRG83) AppleWebKit/533.1(KHTML, like Gecko) Version/4.0 Mobile Safari/533.1");
        ConnManagerParams.setTimeout(params, 1000);
        HttpConnectionParams.setConnectionTimeout(params, 5000);
        HttpConnectionParams.setSoTimeout(params, 10000);
        SchemeRegistry schReg = new SchemeRegistry();
        schReg.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        schReg.register(new Scheme("https", SSLSocketFactory.getSocketFactory(), 443));
        ClientConnectionManager conMgr = new ThreadSafeClientConnManager(params,schReg);
        customHttpClient = new DefaultHttpClient(conMgr, params);
    }
    return customHttpClient;
}

public Object clone() throws CloneNotSupportedException {
    throw new CloneNotSupportedException();
} 
```

}

和样本

```
public static String Call(String URL, List<NameValuePair> postParameters)
{
    BufferedReader in = null;
    DefaultHttpClient httpClient;
    StringBuffer sb = new StringBuffer();   
    try{
        httpClient = CustomHttpClient.getHttpClient();

        HttpProtocolParams.setUseExpectContinue(httpClient.getParams(), false); //making 3G network works*
        HttpPost request = new HttpPost(URL);
        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
        request.setEntity(formEntity);
        HttpResponse response = httpClient.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
        sb.append(line + NL);
        }
        in.close();

    }catch(Exception ex)
    {
        ex.printStackTrace();

    }
    return sb.toString();
} 
```

# sublimetext2 - 让 SublimeLinter 工作的问题

> ID：14051309
> 
> 赞同：6
> 
> 时间：2012-12-27T07:55:13.153
> 
> 标签：sublimetext2

我需要帮助让[SublimeLinter](https://github.com/SublimeLinter/)工作。

我已经使用包安装程序安装了 SublimeLinter。但是我看不到 lint 在我的 js 文件中工作。另外，当我做`command`++ (linux `shift`)时`P`，我只看到 linter 'Sublime Linter : Extract Annotations' 的以下命令。

我没有看到用于运行 linter 的其他命令。

任何想法有什么问题？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:11:40.057

您必须从 repos 安装 nodejs。

如果未安装 nodejs，则`/usr/local/bin/node`必须设置指向此位置的符号链接：

*   触摸 /usr/local/bin/node
*   ln -s /usr/bin/nodejs /usr/local/bin/node

以上在 debian/crunchbang 上对我有用

或者，您可以更改 linter 的 sublime 用户设置（ps 尚未测试此选项）

```
"sublimelinter_executable_map":
{
    "javascript": "/usr/bin/nodejs"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:30:59.560

一些技巧：

1.  确保您的文件使用 Javascript 语法。
2.  linter 自动运行（检查包设置）。
3.  打开控制台查看任何错误。
4.  检查[文档](https://github.com/SublimeLinter/SublimeLinter#javascript-based-linters)以配置 Javascript linter

# emacs - Emacs 字体锁定突出怪异

> ID：14051312
> 
> 赞同：0
> 
> 时间：2012-12-27T07:55:42.793
> 
> 标签：emacs, elisp, font-lock

我有更改默认颜色主题的代码。我更喜欢这种方式，因为我添加了更多的类然后 default `font-lock`。

```
(defmacro /construct-face (name comment &rest args)
    "Define face and specify attributes."
    (list 'progn
          (list 'defface name nil comment)
          (nconc (list 'set-face-attribute (list 'quote name) nil) args)))

(/construct-face ⋅function-name "Face to highlight functions."
                  :foreground "SlateBlue")
(setq font-lock-function-name-face '⋅function-name)
(/construct-face ⋅comment "Face to display comments"
                  :foreground "gray20"
                  :bold t)
(setq font-lock-comment-face '⋅comment) 
```

奇怪的是评论颜色变成了灰色，但函数的名称没有变成紫色。有什么区别，我应该尝试检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:08:30.370

因为它不是“gray20”而是`"grey20"`，我昨天也犯了这个错误，但是用grey10。

# encryption - 随机字节的密钥推导函数？

> ID：14051313
> 
> 赞同：1
> 
> 时间：2012-12-27T07:55:49.873
> 
> 标签：encryption, password-encryption, pbkdf2

我知道KDF（Key derivation function）用于拉伸用户密码，基本上不适合用作密码算法中的密钥。

但是如果我创建一个随机密钥（随机 32 字节），我还需要在其上使用 KDF 以确保正确加密吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:25:06.290

KDF 通常用于从诸如密码短语之类的东西中派生加密密钥，正如您正确地说的那样，它不适合直接使用。但它们也用于从主密钥派生其他密钥，这取决于您的整体方案，这可能很有用。

假设您使用了一个密钥协商协议，双方最终得到了一个随机共享的秘密。您可以使用 KDF 派生一个用于加密的密钥和一个用于消息完整性的密钥（例如，一个 HMAC 密钥）。

来自[NIST SP800-108](http://csrc.nist.gov/publications/nistpubs/800-108/sp800-108.pdf)：

> 当各方共享一个秘密对称密钥时（例如，在成功执行[1](http://csrc.nist.gov/publications/nistpubs/800-108/sp800-108.pdf)和 [2] 中指定的密钥建立方案时），通常需要额外的密钥（例如，如 [3] 中所述） . 不同的加密目的可能需要单独的密钥——例如，加密算法可能需要一个密钥，而另一个密钥用于完整性保护算法，例如消息验证码。在其他时候，多个实体所需的不同密钥可能由受信任方从单个主密钥生成。密钥派生函数用于派生此类密钥。

简短的回答是，不，假设您的密钥生成是正确的，您*不需要*使用 KDF。

# java - android中的日期错误存储在sqlite中

> ID：14051319
> 
> 赞同：2
> 
> 时间：2012-12-27T07:57:17.503
> 
> 标签：java, android

我正在尝试使用以下方法将日期插入 sqlite：

```
SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
String data = format.format(new Date(19900101));
System.err.println("Time is.."+format.format(19900101)); 
```

但我在日志中得到 19700101。即使我将日期更改为 20000101 或任何其他内容，我也会得到相同的结果。

有人建议我为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T07:59:46.317

代码错误

```
 SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
      Date data = format.parse("19900101");
      System.out.println("Time is.."+data ); 
```

当您使用 new Date(123) 时，我认为它需要以毫秒为单位的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:01:05.640

将您的代码更改为将当前字符串格式化为 date ：

```
SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");

Date convertedDate = (Date) format.parse("19900101");

SimpleDateFormat formats = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    String fmconvertedDate =formats.format(convertedDate);

System.err.println("Time is.."+fmconvertedDate); 
```

输出是：

```
Time is..1990-01-01 00:00:00 
```

# java - G1GC 带初始标记的长时间停顿

> ID：14051323
> 
> 赞同：3
> 
> 时间：2012-12-27T07:57:36.833
> 
> 标签：java, garbage-collection, heap-memory, g1gc

带j7u5、G1GC

`"-Xms3200m -Xmx3200m -XX:+UseG1GC -XX:ParallelGCThreads=14 -XX:ConcGCThreads=4 -XX:MaxGCPauseMillis=40 -XX:NewRatio=2 -XX:SurvivorRatio=10 -XX:+PrintGC -XX:+PrintGCDateStamps"`

对于给定的性能测试，我的应用程序在运行 5 小时后会出现长时间的停顿，这是可以预见的。除了这个大的（也是唯一的），还有小的初始标记阶段。

有什么建议可以弄清楚这个长暂停发生了什么，以及如何调整它以避免***影响延迟目标的长暂停（百分位数 98%、99.999%）？***

```
2012-12-22T09:48:57.966+0000: [GC pause (young) 2436M->1460M(3200M), 0.0627090 secs]
2012-12-22T09:49:07.295+0000: [GC pause (young) 2458M->1481M(3200M), 0.0871760 secs]
2012-12-22T09:49:18.905+0000: [GC pause (young) 2479M->1503M(3200M), 0.0930280 secs]
2012-12-22T09:49:32.366+0000: [GC pause (young) 2501M->1524M(3200M), 0.0827900 secs]
2012-12-22T09:49:44.576+0000: [GC pause (young) (initial-mark) 2522M->1546M(3200M), 3.4979530 secs]
2012-12-22T09:49:48.074+0000: [GC concurrent-root-region-scan-start]
2012-12-22T09:49:48.079+0000: [GC concurrent-root-region-scan-end, 0.0056590]
2012-12-22T09:49:48.080+0000: [GC concurrent-mark-start]
2012-12-22T09:49:48.173+0000: [GC concurrent-mark-end, 0.0932560 sec]
2012-12-22T09:49:48.180+0000: [GC remark, 0.0470160 secs]
2012-12-22T09:49:48.232+0000: [GC cleanup 1585M->944M(3200M), 0.0180490 secs]
2012-12-22T09:49:48.251+0000: [GC concurrent-cleanup-start]
2012-12-22T09:49:48.255+0000: [GC concurrent-cleanup-end, 0.0047270] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:37:02.627

用于记录，`-XX:+PrintGCTimeStamps -XX:+PrintGCApplicationStoppedTime -XX:+PrintGCApplicationConcurrentTime`用于更好地了解问题和瓶颈

建议使用`-XX:+UnlockExperimentalVMOptions -XX:+AggressiveOpts -XX:+DoEscapeAnalysis -XX:+UseCompressedOops`G1GC 选项*（如果本机/服务器和 JDK 版本支持这些选项）*

也请`-XX:GCPauseIntervalMillis=VALUE`结合使用`-XX:MaxGCPauseMillis=VALUE` *（它会控制你的暂停，更好地通过做一些研发来获得两个参数的最佳拟合值的组合）* ***顺便说一句，我们成功地使用值组合为 -XX:MaxGCPauseMillis=400 -XX:GCPauseIntervalMillis =8000***

param的默认值为`-XX:NewRatio`40，因此最好设置为 40 或大于 40，例如`-XX:NewRatio=50`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T06:06:47.110

G1 GC 是一种自适应垃圾收集器，其默认设置使其无需修改即可高效工作。有关详细信息，请参阅以下问题。

[G1 上的 Java 7 (JDK 7) 垃圾收集和文档](https://stackoverflow.com/questions/8111310/java-7-jdk-7-garbage-collection-and-documentation/34254605?s=7|0.0000#34254605)

**如果您遵循 oracle 推荐的上述建议：**

1.  删除以下参数

    ```
    -XX:SurvivorRatio=10 
    ```

2.  `MaxGCPauseMillis=40`相比起来太激进了`default value of 200 ms`。有一个合理的暂停时间目标。

3.  更改 -`XX:ParallelGCThreads=14 -XX:ConcGCThreads=4`根据您服务器中 CPU 内核数量的建议。

# python - 如何禁用 pypy 断言语句？

> ID：14051324
> 
> 赞同：5
> 
> 时间：2012-12-27T07:57:38.660
> 
> 标签：python, pypy

```
$ ./pypy -O
Python 2.7.2（a3e1b12d1d01，2012 年 12 月 4 日，13:33:26）
[PyPy 1.9.1-dev0 与 GCC 4.6.3] 在 linux2 上
输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
而现在完全不同的东西：``amd64 和 ppc 只是
企业版可用''
>>>> 断言 1==2
回溯（最近一次通话最后）：
  文件“”，第 1 行，在
断言错误
>>>>
```

但是当我执行

```
$蟒蛇-O
Python 2.7.3（默认，2012 年 8 月 1 日，05:14:39）
[GCC 4.6.3] 在 linux2 上
输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
>>> 断言 1==2
>>>
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T08:37:00.860

PyPy 会默默地忽略 -O。其背后的原因是我们认为改变语义的 -O 被严重破坏，但是，我想这是非法的。随意发布错误（这也是此类报告所属的地方，在 bugs.pypy.org 上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-03T05:24:36.580

对于将来来到这里的任何人，2021 年 10 月 3 日 pypy3 确实接受 -O 标志并关闭断言语句

# java - 将动画 GIF 添加到摇摆标签

> ID：14051325
> 
> 赞同：3
> 
> 时间：2012-12-27T07:57:48.720
> 
> 标签：java, swing, animation, jframe, jlabel

```
public void run(){
        Icon reel = common.ResourcesToAccess.reel;
        JLabel label = new JLabel(reel);
        JFrame frame = new JFrame();
        frame.setUndecorated(true);
        frame.getContentPane().add(label);
        frame.setSize(reel.getIconWidth(),reel.getIconHeight());
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        try{
            sleep(2*1000);
        }catch(InterruptedException e){

        }
        frame.dispose();
    } 
```

我尝试输入`reel.setImageObserver(label);`，但 Eclipse 将该语句标记为错误。为什么？
我还能做些什么来显示动画？

* * *

更新：新代码：

```
@Override
    public void run(){
        JFrame f = new JFrame();
        ImageIcon reel = (ImageIcon) common.ResourcesToAccess.reel;
        JLabel label = new JLabel(reel);
        reel.setImageObserver(label);
        f.getContentPane().add(label);
        f.setUndecorated(true);
        f.setSize(300, 300);
        f.setVisible(true);
    } 
```

**虽然我可以在这里设置 ImageObserver，但 GIF 仍然没有动画**

## 杂项：

我正在使用的 GIF 可以在这里找到：http:
[//bestanimations.com/Electronics/Video/Video.html](http://bestanimations.com/Electronics/Video/Video.html)
它是右侧电视上方的那个。旋转的卷轴。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T08:04:36.007

通过在 EDT 中休眠 2 秒，您可以阻止它完成其工作（例如重新绘制 GUI 并显示您的动画 gif）。删除对 的调用`Thread.sleep()`。

如果您希望框架在 2 秒后自行关闭，请使用 a`javax.swing.Timer`安排在 2 秒后关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T09:07:14.797

`What else can I do to display animation ?`

好吧，在这里我做了一个简短的 EG 来展示如何将图像添加到`JLabel`。我已经使用过`JApplet`，您可以根据需要对其进行修改。

![在此处输入图像描述](../Images/46f0439160dcdbe8d167526e0288603f.png)

**代码：**

```
import javax.swing.ImageIcon;
import javax.swing.JApplet;
import javax.swing.JLabel;

public class JLabelWithIconExample extends JApplet
 {

    public void init(){

            ImageIcon icon = new ImageIcon("e:/guitar.gif");/*your path*/

        JLabel copyLabel = new JLabel(icon);
                    add(copyLabel);

                       }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:15:01.053

可能是您在执行某些后台任务时尝试显示动画 GIF 吗？查看 SwingWorker 以了解有关后台任务的更多信息，而不是在 EDT（事件调度线程）上执行长时间运行的任务。

# z3 - 如何消除Z3中的位向量算术

> ID：14051327
> 
> 赞同：3
> 
> 时间：2012-12-27T07:58:02.347
> 
> 标签：z3, bitvector

我正在尝试使用 z3 来消除表达式

```
not ((not x) add y) 
```

这等于

```
x sub y 
```

通过此[代码](http://rise4fun.com/Z3/NG8L "关联")：

```
(declare-const x (_ BitVec 32))
(declare-const y (_ BitVec 32))
(assert (= (bvnot (bvadd (bvnot x) y)) (bvsub x y)))
(check-sat)
(simplify (bvnot (bvadd (bvnot x) y))) 
```

我想得到如下结果：

```
sat
(bvsub x y) 
```

然而，结果是：

```
sat
(bvnot (bvadd (bvnot x) y)) 
```

有人会帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:35:42.307

我们可以证明这`(bvnot (bvadd (bvnot x) y))`等效于`(bvsub x y)`使用以下脚本。

```
(declare-const x (_ BitVec 32))
(declare-const y (_ BitVec 32))
(assert (not (= (bvnot (bvadd (bvnot x) y)) (bvsub x y))))
(check-sat) 
```

在这个脚本中，我们使用 Z3 来表明这`(not (= (bvnot (bvadd (bvnot x) y)) (bvsub x y)))`是不可满足的。也就是说，不可能找到`x`和`y`的值与 的值`(bvnot (bvadd (bvnot x) y))`不同的值`(bvsub x y)`。

在 Z3 中，该`simplify`命令仅应用重写规则，它忽略了断言的表达式集。该`simplify`命令比使用检查可满足性要快得多`check-sat`。此外，给定两个等价表达式`F`和`G`，不能保证 的结果`(simplify F)`等于`(simplify G)`。例如，在 Z3 v4.3.1 中，simplify 命令为`(= (bvnot (bvadd (bvnot x) y)`和产生不同的结果`(bvsub x y)`，尽管它们是等价的表达式。另一方面，它对`(= (bvneg (bvadd (bvneg x) y)`和产生相同的结果`(bvsub x y)`。

```
(simplify (bvnot (bvadd (bvnot x) y)))
(simplify (bvneg (bvadd (bvneg x) y)))
(simplify (bvsub x y)) 
```

[这](http://rise4fun.com/Z3/U7TN)是上述示例的完整脚本。

[顺便说一句，如果我们使用Z3 Python 接口](http://rise4fun.com/Z3Py/xGWn)，这些示例的可读性会更高。

```
x, y = BitVecs('x y', 32)
prove(~(~x + y) == x - y)
print simplify(x - y)
print simplify(~(~x + y))
print simplify(-(-x + y)) 
```

最后，Z3有更复杂的简化程序。它们可作为*Tactics*使用。[Python](http://rise4fun.com/Z3Py/tutorial/strategies)和[SMT 2.0](http://rise4fun.com/Z3/tutorial/strategies)格式的教程提供了更多信息。

另一种可能性是修改 Z3 更简单/重写器。正如您所指出的，`not x`相当于`-x -1`. 我们可以很容易地添加这个重写规则：`not x --> -x - 1`到 Z3 重写器。例如，[在这个提交](http://z3.codeplex.com/SourceControl/changeset/8515044f8bec)中，我添加了一个名为“bvnot2arith”的新选项来启用这个规则。实际实现非常小（5 行代码）。

# javascript - Javascript：附加在列表的开头

> ID：14051335
> 
> 赞同：1
> 
> 时间：2012-12-27T07:59:11.087
> 
> 标签：javascript, jquery, html

下面我的客户端代码从服务器获取一些数据，然后将数据呈现到屏幕上。

“**追加”的**作用是将最新数据放在列表末尾，而我希望将最新数据显示在列表顶部。我正在寻找类似**append before 或 append at the start 之**类的东西。

任何帮助，将不胜感激。

```
<script>
    for(var i = 0 ; i < data.length; i++){
        $('#uls').append('<li><p>' + data[i].summary + '</p></li>');
    }
</script>

<body>
    <div id="main">
        <ul id="uls"></ul>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:01:08.763

我想你正在寻找[prepend](http://api.jquery.com/prepend/)！

您的代码将变为：

```
<script>
    for(var i = 0 ; i < data.length; i++){
        $('#uls').prepend('<li><p>' + data[i].summary + '</p></li>');
    }
</script>

<body>
    <div id="main">
        <ul id="uls"></ul>
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:01:26.890

您可以使用将指定内容作为第一个子项插入的方法“prepend”，如下所示：

```
<script>
    for(var i = 0 ; i < data.length; i++){
        $('#uls').prepend('<li><p>' + data[i].summary + '</p></li>');
    }
</script>

<body>
    <div id="main">
        <ul id="uls"></ul>
    </div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:02:22.313

为此使用innerHTML

```
document.getElementById('uls').innerHTML="<li><p>"+data[i].summary+"</p></li>"+document.getElementById('uls').innerHTML 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T08:17:01.137

您可以通过两种方式执行此操作，`.prepend()`或者`.prependTo()`：

1.  [http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)
2.  [http://api.jquery.com/prependTo/](http://api.jquery.com/prependTo/)

拿这些

```
$('#uls').prepend('<li><p>' + data[i].summary + '</p></li>');
$('<li><p>' + data[i].summary + '</p></li>').prependTo('#uls'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T08:18:51.783

您实际上并不需要 jQuery：

```
var ul = document.getElementById('uls'); // Get the ul

var li = document.createElement('li'); // Create a <li>
var p = document.createElement('p'); // Create a <p>

li.appendChild(p); // Add the <p> to the <li>
p.appendChild(document.createTextNode(data[i].summary)); // Add the text to the <p>

ul.insertBefore(li, ul.childNodes[0]); // Add the <li> to the first position of the <ul>. 
```

**[工作样本](http://fiddle.jshell.net/E4Gjm/1/)**

我知道它比 jQuery 选项的代码更多，但它也更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T08:47:38.193

如果你真的需要使用 jQuery，我建议你这样做：

```
<script>
var i,
    dataMaxIndex,
    ulsContent = "";
dataMaxIndex = data.length - 1;
if (dataMaxIndex >= 0) {
    for (i = dataMaxIndex; i >= 0; i = i - 1) {
        ulsContent = ulsContent + '<li><p>' + data[i].summary + '</p></li>';
    }
    $(document.getElementById('uls')).prepend(ulsContent);
}
</script> 
```

一些代码改进： - 最好使用 document.getELementById 选择器并将其包装为 jQuery - 一次性插入所有 HTML 内容（不是每次迭代）；

示例：http: [//jsfiddle.net/8RLcx/](http://jsfiddle.net/8RLcx/)

# ios - 如何在 Phonegap iOS 中更改键盘

> ID：14051336
> 
> 赞同：2
> 
> 时间：2012-12-27T07:59:16.000
> 
> 标签：ios, cordova, soft-keyboard

我制作了一个 phonegap 应用程序，其中包含文本字段。

![在此处输入图像描述](../Images/c965a5f39e09b28bb08c4a2b09f224cc.png)

问题：- 我想从键盘上删除完成按钮，或者我想要一个完成按钮的事件监听器。以太对我有用。

我的问题类似于[此链接](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/ykSAuyAaw64)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:13:56.120

您无法删除完成按钮，因为 Phonegap 使用 a`UIWebView`来呈现 UI，您将被`UIWebView`.

# java - 有什么办法可以让浏览器远离每秒请求相同的图像？

> ID：14051338
> 
> 赞同：0
> 
> 时间：2012-12-27T07:59:38.520
> 
> 标签：java, jsp, google-chrome, firefox, jakarta-ee

我的jsp页面每秒刷新一次。页面上有两张图片。一个重 13 KB，另一个重 4 KB。Firefox 不会一次又一次地加载图像，但 chrome 会一次又一次地加载这两个图像。而且看起来很糟糕！有什么办法可以阻止浏览器一次又一次地请求相同的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:31:01.850

您应该设置适当的`Expire`标题和`Last-Modified`标题。来自[Chrome 的制造商](https://developers.google.com/speed/docs/best-practices/caching)：

> 建议
> 
> *   为所有静态资源积极设置缓存标头。对于所有可缓存资源，我们建议使用以下设置： 将 Expires 设置为至少一个月，最好设置为未来一年。（我们更喜欢 Expires 而不是 Cache-Control: max-age，因为它得到了更广泛的支持。）不要将其设置为未来一年以上，因为这违反了 RFC 指南。如果您确切知道资源何时会更改，则可以设置较短的到期时间。但是，如果您认为它“可能很快会改变”但不知道何时，您应该设置一个较长的过期时间并使用 URL 指纹识别（如下所述）。积极设置缓存不会“污染”浏览器缓存：据我们所知，所有浏览器都根据最近最少使用算法清除缓存；
>     
>     
> *   将 Last-Modified 日期设置为上次更改资源的时间。如果 Last-Modified 日期在过去足够远，浏览器很可能不会重新获取它。

如果您在 HTTPS 下提供服务，则需要在服务器上拥有正确签名的证书，否则 Chrome 将不会缓存任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:29:42.123

基于[这一面](http://coderanch.com/t/443223/HTML-CSS-JavaScript)：

> 不要在这上面花费太多时间。我非常有信心这是浏览器在刷新时如何处理 iframe 的行为。我通过 FireFox 打开了代码，然后我更改了文件中的 URL，保存，然后刷新了页面。它继续重新加载原始 URL（在刷新之前），然后触发 onLoad 函数使用新 URL 加载 iframe。

所以整个事情都是特定于浏览器的。如果你想要动态刷新，你应该学习 AJAX

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:26:05.433

专业的解决方案是从另一台服务器获取媒体文件（即 facebook 使用 fbcdn 而不是 www），您始终可以完全控制专用环境中的所有缓存机制。

另一个好的解决方案是使用**etag**功能（[http://en.wikipedia.org/wiki/HTTP_ETag](http://en.wikipedia.org/wiki/HTTP_ETag)），这必须遵守 mtrbean 建议的 https 认证。

最后修改日期也是一个很好的解决方案，将其与“Pragma: no-cache”结合使用。

# locale - Facebook 评论框区域设置

> ID：14051339
> 
> 赞同：0
> 
> 时间：2012-12-27T07:59:44.557
> 
> 标签：locale, facebook-comments

我可以更改 Facebook 评论框区域设置吗？我的测试网站上有以下代码看起来它正在工作，但我不确定它是否允许。

我已经在下面的脚本中更改`en_US`为`he_IL`。

请指教。

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/he_IL/all.js#xfbml=1"; // Here!
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:04:50.017

您所做的（将所需的语言环境插入到脚本路径中）正是 Facebook 在将社交插件与 XFBML 一起使用时所建议的国际化的第一步。

根据他们的[国际化文档](https://developers.facebook.com/docs/internationalization/)：

> 如果您使用 XFBML，则需要在适合您网站的语言环境中加载 JavaScript SDK。例如，如果您的网站是西班牙语，请参考以下脚本：
> 
> ```
> //connect.facebook.net/es_LA/all.js 
> ```

所以看起来是的，这是允许的，你在正确的轨道上。

# css - 使用 CSS 的 SVG 渐变

> ID：14051351
> 
> 赞同：132
> 
> 时间：2012-12-27T08:01:12.430
> 
> 标签：css, svg, gradient, linear-gradients

我正在尝试将渐变应用于 SVG`rect`元素。

目前，我正在使用该`fill`属性。在我的 CSS 文件中：

```
rect {
    cursor: pointer;
    shape-rendering: crispEdges;
    fill: #a71a2e;
} 
```

`rect`在浏览器中查看时，该元素具有正确的填充颜色。

但是，我想知道是否可以对这个元素应用线性渐变？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-12-27T08:21:45.420

只需在 CSS 中使用您将在`fill`属性中使用的任何内容。当然，这需要您在 SVG 中的某处定义线性渐变。

这是一个完整的例子：

```
rect {
    cursor: pointer;
    shape-rendering: crispEdges;
    fill: url(#MyGradient);
}
```

```
<svg width="100" height="50" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <style type="text/css">
        rect{fill:url(#MyGradient)}
      </style>
      <defs>
        <linearGradient id="MyGradient">
          <stop offset="5%" stop-color="#F60" />
          <stop offset="95%" stop-color="#FF6" />
        </linearGradient>
      </defs>

      <rect width="100" height="50"/>
    </svg>
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2019-03-20T19:52:40.087

# 2019答​​案

使用全新的 CSS 属性，您可以更灵活地使用变量`custom properties`

```
.shape {
  width:500px;
  height:200px;
}

.shape .gradient-bg {
  fill: url(#header-shape-gradient) #fff;
}

#header-shape-gradient {
  --color-stop: #f12c06;
  --color-bot: #faed34;
}
```

```
<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" class="shape">
  <defs>
    <linearGradient id="header-shape-gradient" x2="0.35" y2="1">
        <stop offset="0%" stop-color="var(--color-stop)" />
        <stop offset="30%" stop-color="var(--color-stop)" />
        <stop offset="100%" stop-color="var(--color-bot)" />
      </linearGradient>
  </defs>
  <g>
    <polygon class="gradient-bg" points="0,0 100,0 0,66" />
  </g>
</svg>
```

只需在渐变中为每个设置一个命名变量`stop`，然后在 css 中根据需要进行自定义。您甚至可以使用 javascript 动态更改它们的值，例如：

```
document.querySelector('#header-shape-gradient').style.setProperty('--color-stop', "#f5f7f9"); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-12-11T13:53:02.317

基于 Finesse 所写的内容，这是一种针对 svg 并更改其渐变的更简单方法。

这是你需要做的：

1.  为渐变元素中定义的每个色标分配类。
2.  定位 css 并使用普通类更改每个停靠点的停靠点颜色。
3.  赢！

使用类代替的一些好处`:nth-child`是，如果您重新排序停靠点，它不会受到影响。此外，它使每个班级的意图变得清晰 - 您会想知道您是否需要在第一个孩子或第二个孩子上使用蓝色。

我已经在所有 Chrome、Firefox 和 IE11 上对其进行了测试：

```
.main-stop {
  stop-color: red;
}
.alt-stop {
  stop-color: green;
}
```

```
<svg class="green" width="100" height="50" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <linearGradient id="gradient">
    <stop class="main-stop" offset="0%" />
    <stop class="alt-stop" offset="100%" />
  </linearGradient>
  <rect width="100" height="50" fill="url(#gradient)" />
</svg>
```

在此处查看可编辑的示例： [https ://jsbin.com/gabuvisuhe/edit?html,css,output](https://jsbin.com/gabuvisuhe/edit?html,css,output)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-12-10T04:02:37.427

这是一个解决方案，您可以在其中添加渐变并仅使用 CSS 更改其颜色：

```
// JS is not required for the solution. It's used only for the interactive demo.
const svg = document.querySelector('svg');
document.querySelector('#greenButton').addEventListener('click', () => svg.setAttribute('class', 'green'));
document.querySelector('#redButton').addEventListener('click', () => svg.setAttribute('class', 'red'));
```

```
svg.green stop:nth-child(1) {
  stop-color: #60c50b;
}
svg.green stop:nth-child(2) {
  stop-color: #139a26;
}

svg.red stop:nth-child(1) {
  stop-color: #c84f31;
}
svg.red stop:nth-child(2) {
  stop-color: #dA3448;
}
```

```
<svg class="green" width="100" height="50" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <linearGradient id="gradient">
    <stop offset="0%" />
    <stop offset="100%" />
  </linearGradient>
  <rect width="100" height="50" fill="url(#gradient)" />
</svg>

<br/>
<button id="greenButton">Green</button>
<button id="redButton">Red</button>
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-01-08T09:24:28.067

谢谢大家，所有的准确答复。

在 shadow dom 中使用 svg，我在 svg 中添加了我需要的 3 个线性渐变，在 . 我将 css 填充规则放在 web 组件上，继承 od 填充完成了这项工作。

```
 <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
      <path
        d="m258 0c-45 0-83 38-83 83 0 45 37 83 83 83 45 0 83-39 83-84 0-45-38-82-83-82zm-85 204c-13 0-24 10-24 23v48c0 13 11 23 24 23h23v119h-23c-13 0-24 11-24 24l-0 47c0 13 11 24 24 24h168c13 0 24-11 24-24l0-47c0-13-11-24-24-24h-21v-190c0-13-11-23-24-23h-123z"></path>
    </svg>

    <svg height="0" width="0">
      <defs>
        <linearGradient id="lgrad-p" gradientTransform="rotate(75)"><stop offset="45%" stop-color="#4169e1"></stop><stop offset="99%" stop-color="#c44764"></stop></linearGradient>
        <linearGradient id="lgrad-s" gradientTransform="rotate(75)"><stop offset="45%" stop-color="#ef3c3a"></stop><stop offset="99%" stop-color="#6d5eb7"></stop></linearGradient>
        <linearGradient id="lgrad-g" gradientTransform="rotate(75)"><stop offset="45%" stop-color="#585f74"></stop><stop offset="99%" stop-color="#b6bbc8"></stop></linearGradient>
      </defs>
    </svg>

    <div></div>

    <style>
      :first-child {
        height:150px;
        width:150px;
        fill:url(#lgrad-p) blue;
      }
      div{
        position:relative;
        width:150px;
        height:150px;
        fill:url(#lgrad-s) red;
      }
    </style>
    <script>
      const shadow = document.querySelector('div').attachShadow({mode: 'open'});
      shadow.innerHTML="<svg viewbox=\"0 0 512 512\">\
        <path d=\"m258 0c-45 0-83 38-83 83 0 45 37 83 83 83 45 0 83-39 83-84 0-45-38-82-83-82zm-85 204c-13 0-24 10-24 23v48c0 13 11 23 24 23h23v119h-23c-13 0-24 11-24 24l-0 47c0 13 11 24 24 24h168c13 0 24-11 24-24l0-47c0-13-11-24-24-24h-21v-190c0-13-11-23-24-23h-123z\"></path>\
      </svg>\
      <svg height=\"0\">\
      <defs>\
        <linearGradient id=\"lgrad-s\" gradientTransform=\"rotate(75)\"><stop offset=\"45%\" stop-color=\"#ef3c3a\"></stop><stop offset=\"99%\" stop-color=\"#6d5eb7\"></stop></linearGradient>\
        <linearGradient id=\"lgrad-g\" gradientTransform=\"rotate(75)\"><stop offset=\"45%\" stop-color=\"#585f74\"></stop><stop offset=\"99%\" stop-color=\"#b6bbc8\"></stop></linearGradient>\
      </defs>\
    </svg>\
    ";
    </script>
```

第一个是普通的 SVG，第二个是在 shadow dom 内。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-03-13T21:22:59.917

以下是如何在目标元素上设置*线性渐变：*

```
<style type="text/css">
    path{fill:url('#MyGradient')}
</style>
<defs>
    <linearGradient id="MyGradient">
        <stop offset="0%" stop-color="#e4e4e3" ></stop>
        <stop offset="80%" stop-color="#fff" ></stop>
    </linearGradient>
</defs> 
```

# java - Java尝试创建一个类以将ArrayList打印到文件

> ID：14051352
> 
> 赞同：0
> 
> 时间：2012-12-27T08:01:19.197
> 
> 标签：java, class, serialization, file-io, printwriter

所以我有一个`ArrayList`我想打印到文件的对象。我有一个`PrintToFile`班级，而在另一个班级我有一个`ArrayList<Expenses> expList`

这是我的 PrintToFile 类

```
import java.util.*;
import java.io.*;

public class PrintToFile{
    public void PrintToFile()throws Exception{
      File f = new File ("Output.txt");
      FileWriter fw = new FileWriter(f, true);
     PrintWriter pw = new PrintWriter(fw);
   }

    public void printExp(ArrayList<Expense> expList){
        for(int i = 0; i < expList.size(); i++){
         pw.println("---------------------------------------");//line 13
         pw.println(expList.get(i));
      }
        pw.close();
    }
} 
```

这是我尝试在我的主课中调用该课程

```
 PrintToFile printer = new PrintToFile();
    printer.print(expList); 
```

我得到的第一个编译器错误是在我的 PrintToFile 类中，它说`PrintToFile.java:13: error: cannot find symbol`，这是第一次调用`pw`

我试图弄清楚如何构建和构造类，以便并非所有内容都停留在我的主类的主要方法中。所以基本上我正在尝试创建一个我可以随时调用来打印 ArrayList 的类。

所以我的问题是，我如何构造这个`PrintToFile`类，以便我的`printExp`方法可以看到`PrintWriter` `pw`我创建的。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:06:30.703

由于`pw`是 method 中的局部变量`PrintToFile`，因此其他方法`printExp`无法访问它。

> 局部变量 与对象在字段中存储其状态的方式类似，方法通常会将其临时状态存储在局部变量中。声明局部变量的语法类似于声明字段（例如，int count = 0;）。没有特殊关键字将变量指定为局部变量；该决定完全来自声明变量的位置——**位于方法的左大括号和右大括号之间**。因此，**局部变量仅对声明它们的方法可见；课堂上的其他人无法访问它们。**

请阅读[Java 变量教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:03:46.707

声明你`PrintWriter`的类变量，然后在你的构造函数中初始化它。这就是您的方法找不到您的变量的原因`pw`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T08:06:03.323

您`pw`在方法范围内定义`public void PrintToFile`。它在`public void printExp`方法中是不可见的。将`PrintWriter pw = new PrintWriter(fw);`定义移动到类级别，使其成为成员，然后它将对所有类方法可见。

下面应该做魔术：

```
 public class PrintToFile{
     private File f = new File ("Output.txt");
     private FileWriter fw = new FileWriter(f, true);
     private PrintWriter pw = new PrintWriter(fw);

    public void PrintToFile(String outFileAbsolutePath)throws Exception{
        this.f = new File (outFileAbsolutePath);
        this.fw = new FileWriter(this.f, true);
        this.pw = new PrintWriter(this.fw);
    }

    public void printExp(ArrayList<Expense> expList){
       for(int i = 0; i < expList.size(); i++){
         pw.println("---------------------------------------");//line 13
         pw.println(expList.get(i));
       }
       pw.close();
   }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T08:07:12.590

无法访问 pw 变量，因为它是在函数内部声明的，并且在类内部本地不可用。您必须执行以下操作

```
 import java.util.*;
    import java.io.*;

    public class PrintToFile{
         public PrintWriter pw; //<--declare it here

        public void PrintToFile()throws Exception{
          File f = new File ("Output.txt");
          FileWriter fw = new FileWriter(f, true);
          pw = new PrintWriter(fw);
       }

        public void printExp(ArrayList<Expense> expList){
            for(int i = 0; i < expList.size(); i++){
             pw.println("---------------------------------------");//line 13
             pw.println(expList.get(i));
            }
            pw.close();
        }
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T08:10:38.567

pw 必须是类级别的变量，目前作用域在方法内部，不能在方法外部访问。

```
import java.util.*;
import java.io.*;
    PrintWriter pw = null; // You need to declare it here
public class PrintToFile{
    public void PrintToFile()throws Exception{
      File f = new File ("Output.txt");
      FileWriter fw = new FileWriter(f, true);
      pw = new PrintWriter(fw);
   }

    public void printExp(ArrayList<Expense> expList){
        for(int i = 0; i < expList.size(); i++){
              if(pw != null){ // need to check for null, as  it might be null
                  pw.println("---------------------------------------");//line 13
                  pw.println(expList.get(i));
              }

      }
        pw.close();
    }
} 
```

声明为方法参数的变量可以从方法体内访问。可以从类中的任何位置访问类级变量。

如果一个方法声明了一个与类级变量同名的局部变量，则前者将“遮蔽”后者。要从方法体内访问类级变量，请使用 this 关键字。

有关变量范围的更多详细信息，您可以看到[这个](http://www.java-made-easy.com/variable-scope.html)

# linux - shell中的空间有什么用？

> ID：14051354
> 
> 赞同：0
> 
> 时间：2012-12-27T08:01:47.673
> 
> 标签：linux, shell

我有一个shell程序如下：

```
#!/bin/sh
a=1
b=2
c=`expr $a+$b`      
echo $c 
```

输出是`1+2`。

但如果我改变

```
c=`expr $a+$b\` 
```

至

```
c=`expr $a + $b` 
```

输出将是 3。

我想知道这里的空间有什么用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:11:51.303

`expr`是一个 shell 命令，需要两种类型的参数：操作数（“数字”）和运算符（+、-、* 等）。在您的情况下，您希望将三个参数传递给`expr`，它们是 $a、+ 和 $b。美元符号值由您的 shell 扩展为它们的实际值 1 和 2，而不是由`expr`. 所以，当你这样做时`expr $a + $b`，实际的 shell 命令是`expr 1 + 2`，它给你 3。

当您不输入空格时，执行的是`expr 1+2`. 该`expr`程序不知道如何处理`1+2`它的唯一参数，因此只是原封不动地回响它。

# shell - 使用 shell 将一行/行从列转置到行

> ID：14051362
> 
> 赞同：3
> 
> 时间：2012-12-27T08:02:58.780
> 
> 标签：shell, unix

我想使用 unix 命令`txt`将文件中的一列数据转换为文件的一行。`csv`

例子：

```
ApplChk1,
ApplChk2,
v_baseLoanAmountTI,
v_plannedClosingDateField,
downPaymentTI, 
```

这是一个存在于 txt 文件中的列

我想在 csv 文件中输出如下

```
ApplChk1,ApplChk2,v_baseLoanAmountTI,v_plannedClosingDateField,downPaymentTI, 
```

请让我知道该怎么做。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:12:18.080

如果这是您想要转换为行的单列，那么有很多可能性：

```
tr -d '\n' < filename ; echo # option 1 OR
xargs echo -n < filename ; echo # option 2 (This option however, will shrink spaces & eat  quotes) OR
while read x; do echo -n "$x" ; done < filename; echo # option 3 
```

请让我们知道，对于多行情况，输入的外观如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T21:06:28.757

一个有趣的*纯*bash 解决方案（bash ≥ 4.1）：

```
mapfile -t < file.txt; printf '%s' "${MAPFILE[@]}" $'\n' 
```

完毕！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T08:16:32.823

```
for i in `< file.txt` ; do echo -n $i; done; echo "" 
```

给出输出

```
ApplChk1,ApplChk2,v_baseLoanAmountTI,v_plannedClosingDateField,downPaymentTI, 
```

要将输出发送到文件：

```
{ for i in `< file.txt` ; do echo -n $i ; done; echo; } > out.csv 
```

当我运行它时，会发生以下情况：

```
[jenny@jennys:tmp]$ more file.txt 
ApplChk1,
ApplChk2,
v_baseLoanAmountTI,
v_plannedClosingDateField,
downPaymentTI,
[jenny@jenny:tmp]$ { for i in `< file.txt` ; do echo -n $i ; done; echo; } > out.csv
[jenny@jenny:tmp]$ more out.csv 
ApplChk1,ApplChk2,v_baseLoanAmountTI,v_plannedClosingDateField,downPaymentTI, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T08:46:24.133

```
perl -pe 's/\n//g' your_file 
```

以上将输出到标准输出。如果你想就地做：

```
perl -pi -e 's/\n//g' your_file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-19T01:29:52.223

您可以使用 Linux 命令[**sed**](https://linux.die.net/man/1/sed)`\n`用逗号`,`或空格替换换行符：

```
sed -z 's/\n/,/g' test.txt > test.csv 
```

`-i`如果要就地更改文件，也可以添加该选项：

```
sed -i -z 's/\n/,/g' test.txt 
```

# facebook - 编辑现有的应用详细信息页面图标或图像？

> ID：14051364
> 
> 赞同：1
> 
> 时间：2012-12-27T08:03:07.680
> 
> 标签：facebook

如何更改应用详细信息图像或图标？一旦您已经将图像上传到应用详情页面（未提交状态），就没有删除或上传按钮。没有办法删除或更改它，所以你被它困住了吗？帮助？！在 safari 和 chrome 中尝试过......没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:06:35.587

将鼠标悬停在图像上，您将看到编辑链接

![在此处输入图像描述](../Images/5f01ef203232bb6e0e67eab5c1d57164.png)

# wpf - 在 DataGrid (MVVM) 中显示数据

> ID：14051369
> 
> 赞同：2
> 
> 时间：2012-12-27T08:03:34.913
> 
> 标签：wpf, datagrid

请考虑以下数据模型

由于我是新来的，所以我无法发布图像，所以我会尝试另一种方法...

**作业实体** -jobId -jobNo -jobStatus（来自状态实体的外键） -jobDate

**状态实体** -statusId -statusCaption

**关系** 作业实体 * ------------ 0..1 状态实体

我有一个 WCF 服务，它公开了我的 JobsViewModel 访问的模型

```
namespace PM.DataService
{
    [ServiceContract]
    public class PMService
    {
        [OperationContract]
        public ObservableCollection<Job> GetAllJobs()
        {
            using (var context = new logisticDBEntities())
            {
                var result = context.Jobs.ToList();
                result.ForEach(e => context.Detach(e));
                return new ObservableCollection<Job>(result);
            }
        }

        [OperationContract]
        public ObservableCollection<Status> GetStatuses()
        {
            using (var context = new logisticDBEntities())
            {
                var result = context.Statuses.ToList();
                result.ForEach(e => context.Detach(e));
                return new ObservableCollection<Status>(result);
            }
        }        
    }
}

namespace PM.UI.ViewModel
{
    public class JobsViewModel:INotifyPropertyChanged
    {
    private PMServiceClient serviceClient = new PMServiceClient();

    public JobsViewModel()
    {
        this.RefreshStatuses();
        this.RefreshAllJobs();
    }

    private void RefreshAllJobs()
    {
        this.serviceClient.GetAllJobsCompleted += (s, e) =>
        {
            this.allJobs = e.Result;
        };
        this.serviceClient.GetAllJobsAsync();
    }

    private void RefreshStatuses()
    {
        this.serviceClient.GetStatusesCompleted += (s, e) =>
        {
            this.Statuses = e.Result;
        };
        this.serviceClient.GetStatusesAsync();
    }

    private ObservableCollection<Job> allJobs;
    public ObservableCollection<Job> AllJobs
    {
        get{
            return this.allJobs;
        }
        set
        {
            this.allJobs = value;
            OnPropertyChanged("AllJobs");
        }
    }

    private ObservableCollection<Status> statuses;
    public ObservableCollection<Status> Statuses
    {
        get
        {
            return this.statuses;
        }

            set
            {
                this.statuses = value;
                this.OnPropertyChanged("Statuses");
            }
        }

        private void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
            {
                this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

我在 MainWindow 的 xaml 中包含了 JobsViewModel

```
<Window x:Class="PM.FullClient.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:PM.UI"
    xmlns:vms="clr-namespace:PM.UI.ViewModel"
    Title="MainWindow" Height="475" Width="575">
 <Window.DataContext>
    <vms:JobsViewModel/>
 </Window.DataContext>
.... 
```

现在我可以通过绑定显示所有状态轻松地在我的 MainWindow 上填充 DataGrid

```
<DataGrid ItemsSource="{Binding Path=Statuses}" Margin="7,8,9,8" AutoGenerateColumns="True"> 
```

它有效，但我无法显示输出因为我无法在此处发布图像

但是当我尝试对乔布斯做同样的事情时……什么都没有发生。**数据网格为空**

```
<DataGrid AutoGenerateColumns="True" ItemsSource="{Binding Path=AllJobs}" Margin="6">
</DataGrid> 
```

我已经通过许多方法搜索了大量的fourms和网站，最后我在这里。

可能是因为 Jobs 和 Statuses 之间的 Status > Job 关系吗？如果是这样，我该如何解决这个问题，如果不是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:41:59.900

问题是在 RefreshAllJobs() 回调中，您设置了**allJobs**字段（小写“a”），而不是**AllJobs**属性（大写“A”），然后永远不会从该*属性*调用 OnPropertyChanged()二传手。

# android - 谷歌播放商店。应用程序在香港不可见？

> ID：14051371
> 
> 赞同：-3
> 
> 时间：2012-12-27T08:03:48.323
> 
> 标签：android, google-play

我有这个奇怪的问题。我在 google play store 上发布了一个应用程序，将其设置为在所有国家/地区都可见。但不知何故，该应用程序在香港游戏商店中不可见，至少这是我注意到的一个国家。

我已经仔细检查了该应用程序是否设置为在所有国家/地区可见，当然包括香港。

这有什么特别的原因吗？有什么我想念的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:06:51.917

联系 play.google.com 的支持团队

[http://support.google.com/googleplay/bin/request.py?&p=play_contact&rd=1](http://support.google.com/googleplay/bin/request.py?&p=play_contact&rd=1)

# c++ - 如何在同一资源中分隔字符串和整数变量

> ID：14051373
> 
> 赞同：0
> 
> 时间：2012-12-27T08:03:52.293
> 
> 标签：c++

我很难将变量 String 和 Integer 分开以传入“if()”语句。我有两个变量`"buffString"`，`"buffInteger"`当我将 buffString 放入“if()”语句时，我想在 buffString 变量中取字符串“Data Stop”，然后设置为 RichEdit 以显示“Data Stop”，但问题是当填充与其错误`buffInteger`相同的过程中。`buffString`并且编译器说`"Data Stop"`不是有效的整数值

```
void __fastcall TfrmServer::ComPort1RxChar(TObject *Sender, int Count)
{
 String buff;
 ComPort1->ReadStr(buff,255);
 BUF_RX->Data_suhu = buff; // source
 int bufferInteger;
 String bufferString;

 try{
     if(!buff.IsEmpty())
     {
       bufferInteger = StrToInt(BUF_RX->Data_suhu);
       bufferString = BUF_RX->Data_suhu;
       if(bufferString == "Data Stop")
       {
         ad_log_Serial("AT89S52 -> "+BUF_RX->Data_suhu,clRed);
       }
       else
           {
         ad_log_Serial("AT89S52 -> "+IntToStr(bufferInteger),clRed);
         txtTemp->Text = IntToStr(bufferInteger).c_str();
       }
       LedRx->States->Items[0]->Value = true;
     }
     else
     {
        LedRx->States->Items[0]->Value = false;
     }
 }__finally
 {
     delete(BUF_RX);
 }
} 
```

我应该怎么做这个代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:09:46.510

将您的`bufferInteger`作业移至`else`子句：

```
else
{
    bufferInteger = StrToInt(BUF_RX->Data_suhu);
    ad_log_Serial("AT89S52 -> "+IntToStr(bufferInteger),clRed);
    txtTemp->Text = IntToStr(bufferInteger).c_str();
} 
```

由于它没有在外部使用，因此将它放在那里毫无意义。并假设任何不`"Data Stop"`应该代表整数的字符串，代码不会以这种方式失败。

# objective-c - Obj-C：消失的变量

> ID：14051380
> 
> 赞同：1
> 
> 时间：2012-12-27T08:04:34.993
> 
> 标签：objective-c, variables, memory-management, uibutton, nsdictionary

我是 Objective-C 的新手，可以使用一些帮助来解决让我难过的问题。我称之为消失变量的问题。我将尝试在下面描述它。

我正在尝试创建自己的标签栏控制器和视图，因为我已经得出结论`UITabBarController`并且`UITabBar`不允许我做我需要做的事情（我需要彻底改变标签栏的外观）。

我已经对`UIViewController`和进行了子类化，分别`UIView`创建了我的类`SYTabBarController`和`SYTabBar`。

在`SYTabBar`中，我编写了一种以编程方式将`UIButton`s 添加到视图中的方法：

```
- (UIButton*) addButtonWithFrame:(CGRect)frame action:(SEL)action target:(id)target imageToken:(NSString*)imageToken
{
    UIButton *b = [[UIButton alloc]initWithFrame:frame];
    [b addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];

    UIImage
    *unselectedImage = [UIImage imageNamed:APPEND_STRING(@"TBI+Unselected+", @"imageToken")],
    *selectedImage   = [UIImage imageNamed:APPEND_STRING(@"TBI+Selected+", @"imageToken")],
    *selectedBgImage = [UIImage imageNamed:@"TBI+SelectedBG"];

    [b setImage:unselectedImage forState:UIControlStateNormal];
    [b setImage:selectedImage forState:UIControlStateHighlighted];
    [b setImage:selectedImage forState:UIControlStateSelected];
    [b setBackgroundImage:selectedBgImage forState:UIControlStateHighlighted];
    [b setBackgroundImage:selectedBgImage forState:UIControlStateSelected];
    [b setShowsTouchWhenHighlighted:NO];
    [b setAdjustsImageWhenHighlighted:NO];
    [b setAdjustsImageWhenDisabled:NO];
    [self addSubview:b];

    return b;
} 
```

我调用这个方法`SYTabBarController`来创建五个按钮：

```
 UIButton *button1 = [self.tabBar addButtonWithFrame:CGRectMake(0, 0, 64, 45)
                                                 action:@selector(changeView:)
                                                 target:self
                                             imageToken:@"Popular"];

    UIButton *button2 = [self.tabBar addButtonWithFrame:CGRectMake(64, 0, 64, 45)
                                                 action:@selector(changeView:)
                                                 target:self
                                             imageToken:@"Feed"];

    UIButton *button3 = [self.tabBar addButtonWithFrame:CGRectMake(64*2, 0, 64, 45)
                                                 action:@selector(changeView:)
                                                 target:self
                                             imageToken:@"Capture"];

    UIButton *button4 = [self.tabBar addButtonWithFrame:CGRectMake(64*3, 0, 64, 45)
                                                 action:@selector(changeView:)
                                                 target:self
                                             imageToken:@"Likes"];

    UIButton *button5 = [self.tabBar addButtonWithFrame:CGRectMake(64*4, 0, 64, 45)
                                                 action:@selector(changeView:)
                                                 target:self
                                             imageToken:@"Profile"]; 
```

然后，仍然在 中`SYTabBarController`，我尝试获取这五个按钮并将它们作为键添加到存储为属性的字典中（参见下面的代码）。字典包含`UIViewController`键控到按钮的实例。这个想法是，当五个按钮之一被按下时，它将调用选择器`changeView:`，这反过来将从`UIViewController`字典中检索相应的实例并显示其视图。

```
 self.viewControllersKeyedToButtons = [NSDictionary dictionaryWithObjectsAndKeys:

                                          rootViewController,
                                          button1,

                                          [[SYViewController_Feed alloc] init],
                                          button2,

                                          [[SYViewController_Capture alloc] init],
                                          button3,

                                          [[SYViewController_Likes alloc] init],
                                          button4,

                                          [[SYViewController_Profile alloc] init],
                                          button5,

                                          nil]; 
```

当我初始化字典时，我的代码就崩溃了。我收到此错误消息：

> 2012-12-27 02:54:28.498 Smuvy[17931:c07]-[UIButton copyWithZone:]：无法识别的选择器发送到实例 0x717fc10 2012-12-27 02:54:28.500 Smuvy[17931:c07] *** 终止应用程序未捕获的异常'NSInvalidArgumentException'，原因是： ' - [UIButton的copyWithZone：]：无法识别的选择发送到实例0x717fc10' ***第一掷调用堆栈：（0x174c012 0x1223e7e 0x17d74bd 0x173bbbc 0x173b94e 0x17ce714 0x1712b55 0x172d5a8 0x65d6 0x2c6e 0x1687b7 0x168da7 0x169fab 0x17b315 0x17c24b 0x16dcf8 0x3676df9 0x3676ad0 0x16c1bf5 0x16c1962 0x16f2bb6 0x16f1f44 0x16f1e1b 0x1697da 0x16b65c 0x2aad 0x29d5) libc++abi.dylib：终止调用抛出异常 (lldb)

现在这里是奥秘。当我在调试器中跟踪变量`button5`时，我注意到就在我尝试实例化字典之前，它消失了！难怪我收到一条错误消息。

由于我是 Objective-C（和 C）的新手，所以我对内存管理知之甚少，我想我的变量做错了什么。我已经运行了 Instruments，有趣的是，我看到所有`UIButton`实例都活得很好。因此，按钮似乎在那里，只是指针不知何故消失了。

您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:22:42.270

当您创建一个 NSDictionary 时，它会通过调用[来复制您提供的键](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Collections/Articles/Dictionaries.html#//apple_ref/doc/uid/20000134-SW8)`-copy`，这会调用`-copyWithZone:`. 这些方法是[`NSCopying`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSCopying)协议的一部分。

不幸的是， UIButton 不符合该协议。它是不可复制的。正如您所发现的，当 NSDictionary 尝试向其发送`-copy`消息时，会引发异常。

备择方案：

*   改用一个[`NSMapTable`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSMapTable_class/Reference/NSMapTable.html)。

*   [`+[NSValue valueWithNonretainedObject:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html#//apple_ref/occ/clm/NSValue/valueWithNonretainedObject%3a)使用或将键包装在 NSValue 中[`+[NSValue valueWithPointer:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html#//apple_ref/occ/clm/NSValue/valueWithPointer%3a)。（如果您使用 ARC，NSValue 将无法确保您的对象被保留，因此您需要以其他方式对该对象进行强引用。）

*   使用其他方法来确定视图控制器和 UIButton 可以共享的键。（例如，让它们都引用同一个字符串。）

*   根本不要使用地图。也许将您的视图控制器保存在一个数组中，并使用`tag` UIButton 上的 将相应视图控制器的索引存储在数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:23:27.733

这里有两个错误。

首先，在 NSDictionary 的文档中，它的键必须符合`<NSCopying>`协议，即它们应该响应`copyWithZone:`，因为键在插入字典时被复制。（这仅适用于键，对应的对象不必是可复制的。）发生异常是因为`UIButton`（它只是 and 的子类`UIControl`）`UIView`没有实现此方法（如果您阅读错误消息，就会清楚）。

因此，您不能将按钮用作字典中的键 - 如果您需要按钮和视图控制器之间的关联（顺便说一下，我怀疑这里存在设计问题，此解决方案似乎相当骇人听闻），请为按钮使用单独的键和视图控制器，并使用例如简单的线性搜索来查找相应按钮的视图控制器。

或者，如果您不害怕使用 CoreFoundation，您可以使用`CFDictionary`（与 桥接的免费电话`NSDictionary`）并提供不复制密钥的适当自定义密钥回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:22:29.807

错误消息表明消息被发送到无法处理该消息的对象。在你的情况下`copyWithZone:`被发送到一个`UIButton`. `copyWithZone:`是`NSCopying`协议中声明的方法，但 UIButton 不采用该协议。

发送此特定消息是因为您正在向 NSDictionary 添加一个条目，其中 UIButton 作为键。如[NSDictionary 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)中所述，复制一个键（使用**copyWithZone:**；键必须符合 NSCopying 协议），并将副本添加到新字典中。

# android-ndk - 使用 SOX 混合具有偏移（在特定点）的音频文件

> ID：14051384
> 
> 赞同：1
> 
> 时间：2012-12-27T08:04:54.900
> 
> 标签：android-ndk, ffmpeg, pipe, sox, windows-console

我有两个音频文件，一个长 10 秒，另一个长 17 秒，我想将文件混合在一起，以便 17 秒文件从头开始播放，而 10 秒文件将在 7 秒后开始播放 17 秒文件. 我怎样才能做到这一点？

我点击了这个[链接](https://stackoverflow.com/questions/12084578/mixing-sounds-in-ffmpeg)，我还尝试了 Sox FAQ 中提到的其他命令，问题编号 7，但是我无法通过提供偏移量来混合两个文件，我也在命令行中尝试了该命令并且错误是相同的。

我看到的错误是

> 选项 ' ' 无法识别

我使用的命令是

```
sox -m drums.wav "|sox beats.wav -p pad 1.5" out.wav 
```

编辑：在我看来，管道运算符“|” 坏了，我该如何解决这个问题？

[我的问题和这个论坛](http://permalink.gmane.org/gmane.comp.audio.sox/3869)里提到的完全一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:04:53.407

我觉得有问题`"`。尝试

```
sox -m drums.wav '|sox beats.wav -p pad 1.5' out.wav 
```

# javascript - 表格行数约为 1000+ 的最佳 JavaScript 可编辑网格/表格

> ID：14051389
> 
> 赞同：18
> 
> 时间：2012-12-27T08:06:06.477
> 
> 标签：javascript, jquery, jquery-ui, jsp

我搜索了一些在最佳 JavaScript 或 jQuery 网格上提出的问题，但我找不到我需要的东西，所以发布了这个……如果之前有人问过，请粘贴链接。谢谢！

我的要求：

1.  我正在搜索一个 JavaScript（最好是 jquery）可编辑表，用户可以在其中使用选项卡（如在 excel 中）连续从一个单元格移动到另一个单元格。我查看的大多数网格 - 用户必须单击每个单元格。
2.  用户将更新多个列和行，并且应在 db 中更新数据。
3.  这更像是一个建议而不是一个要求——加载 1000 行是一种好习惯吗？网格是否能够处理它？

我的后台代码将在 jsp/HTML 和 java/servlets 中

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T08:43:55.737

您绝对应该看看[SlickGrid](https://github.com/mleibman/SlickGrid/wiki)，它很灵活，可以满足您的所有要求。
最好的部分是它非常易于使用。

查看这些[示例](https://github.com/mleibman/SlickGrid/wiki/Examples)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T08:37:03.070

[http://trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)

jqgrid 是一个很好用的插件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T08:33:28.797

我强烈推荐[SlickGrid](https://github.com/mleibman/SlickGrid)。

它是基于 JQuery 构建的 JavaScript 网格/表格/电子表格 UI 组件。它支持编辑，我们可以使用它轻松加载超过 1000 行的数据。

查看[电子表格](http://mleibman.github.com/SlickGrid/examples/example-spreadsheet.html)示例以获取想法。

# database - 从数据库中检索数字并将其作为搜索参数传递

> ID：14051398
> 
> 赞同：0
> 
> 时间：2012-12-27T08:06:53.263
> 
> 标签：database

当有人在我的房地产网站中搜索特定城市时，我需要从 .csv 数据库中检索匹配的 cityID，并将检索到的 cityID 作为搜索参数之一传递给我的供应商网站，例如 http;//www.vendor。 com？**城市ID=9999**

cityID 和 cityName 的列表位于名为 myproperty.csv 的文件中

以下是我现在拥有的当前 html 代码。

```
<form action="vendor.com" method="get" target="_blank">
<label>Please enter city name:-</label>
<input type="text" id="cityName" name="cityName">

<!-- Please help me to add some codes here -->

<input type="submit" value="Submit">
</form> 
```

有人可以帮助我实现上述目标的代码吗？我已经搜索了高低的答案，仍然没有任何效果。请帮忙。提前感谢您的所有帮助

哈菲兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:41:08.120

我假设您在启用 PHP 的 Web 服务器上运行您的网站，不是吗？在这种情况下，这是一个适合您的解决方案，它使用 PHP 逐行读取 csv 文件并创建一个 html 下拉列表供用户按名称选择城市。

此外，如果您的服务器上没有运行 PHP，则可以使用 JavaScript 执行相同的操作，如果您需要它而不是 PHP，请告诉我。

这可能是最简单的解决方案，如果您想使用文本输入而不是下拉列表中的城市列表，您可以通过实现 javascript 自动完成功能来获得进一步的解决方案。

```
<form action="vendor.com" method="get" target="_blank">
Please select city: 

<?php
// Set filename to read from
$csvFile = 'dummy.csv';

// Open file handle
$fp = fopen($csvFile, "r");

// In case the file don't exist, exit
if (!is_resource($fp)){
    die("Cannot open $csvFile");
}
?>
<select name="city">
    <?php //Let's read the csvfile line by line: ?>
    <?php while($line = fgetcsv($fp)): ?>
        <?php // Assuming that the csvfile's structure is the following: city_id,city_name, we create the dropdown options: ?>
        <option value="<?php echo $line[0];?>"><?php echo $line[1]?></option>
    <?php endwhile; ?>
</select>

<input type="submit" value="Submit">
</form> 
```

现在这是 JavaScript 解决方案（代码使用 JQUERY 框架，因此您必须将其包含在您的 html 标记中：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

您还需要一个隐藏的表单输入来包含匹配的城市 ID，因此这里是您的表单的扩展 html 标记：

```
<form action="vendor.com" method="get" target="_blank" id="myForm">
    Please enter city name:-
    <input type="hidden" id="cityId" name="cityId">
    <input type="text" id="cityName" name="cityName">

    <input type="submit" value="Submit">
</form> 
```

和你的 JavaScript 来完成这项工作：

```
<script>
        $(function(){
            //Ajax call to get csv file contents
            $.ajax({
            type: "GET",
            url: "dummy.csv",
            dataType: "text",
            success: function(data) {process_csv(data);}
        });

        //Event handler for form submission
        $('#myForm').submit(function(){
            //Let's get the value of the text input (city name)
            var city_name = $('#cityName').val().toLowerCase();

            //If the city name exists in our map, let's set the matched city id to the hidden input field called cityId
            if (city_ids[city_name] > 0)
            {
                $('#cityId').val(city_ids[city_name]);
                return true;
            }
            //Otherwise we can't find the city id in our database, so we can't post the form either...
            alert('No such city name in database!');
            return false;
        });

    });

    //global variable to contain map of city names and id's
    var city_ids = {};

    //Function to parse csv file and set city map
    function process_csv(text) {
        var lines = text.split(/\r\n|\n/);

        for (var i=0; i<lines.length; i++) {
            var data = lines[i].split(',');
            city_ids[data[1].toLowerCase()] = data[0];
        }
    }
</script> 
```

# user-interface - 如何将 Qt Designer 中的表单保存为独立应用程序？

> ID：14051403
> 
> 赞同：2
> 
> 时间：2012-12-27T08:07:00.840
> 
> 标签：user-interface, python-2.7, pyqt, pyqt4, qt-designer

我在 Qt Designer 中创建了一个表单模型，现在我想将表单保存为（exe？）文件，以便它可以在计算机上运行。

我会使用“Python to Exe”吗（如果是，如何）？我对编程还不是很了解。

Qt Designer 以 .ui 扩展名保存文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:33:03.347

*要使用PyInstaller*创建独立应用程序，请执行以下步骤：

1.  将此代码保存为您的**MyWidget.ui**文件：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <ui version="4.0">
     <class>MainWindow</class>
     <widget class="QMainWindow" name="MainWindow">
      <property name="geometry">
       <rect>
        <x>0</x>
        <y>0</y>
        <width>147</width>
        <height>125</height>
       </rect>
      </property>
      <property name="windowTitle">
       <string>MainWindow</string>
      </property>
      <widget class="QWidget" name="centralwidget">
       <layout class="QVBoxLayout" name="verticalLayout">
        <item>
         <widget class="QLineEdit" name="lineEdit"/>
        </item>
        <item>
         <widget class="QPushButton" name="pushButton">
          <property name="text">
           <string>Click Me</string>
          </property>
         </widget>
        </item>
       </layout>
      </widget>
      <widget class="QMenuBar" name="menubar">
       <property name="geometry">
        <rect>
         <x>0</x>
         <y>0</y>
         <width>147</width>
         <height>25</height>
        </rect>
       </property>
       <widget class="QMenu" name="menuMenu">
        <property name="title">
         <string>Menu</string>
        </property>
       </widget>
       <addaction name="menuMenu"/>
      </widget>
      <widget class="QStatusBar" name="statusbar"/>
     </widget>
     <resources/>
     <connections/>
    </ui> 
    ```

2.  使用 pyuic4 将您的 MyWidget.ui 文件编译为 Ui_MyWidget.py，并使用*OS* shell**命令**行**中**的以下命令：

     *```
    pyuic4 "/path/to/MyWidget.ui" -o "Ui_MyWidget.py" 
    ```

    此命令将在您的当前目录中创建一个**Ui_MyWidget.py文件，其中包含以下内容：**

    ```
    # -*- coding: utf-8 -*-

    # Form implementation generated from reading ui file 'MyWidget.ui'
    #
    # Created: Fri Dec 28 03:45:13 2012
    #      by: PyQt4 UI code generator 4.7.3
    #
    # WARNING! All changes made in this file will be lost!

    from PyQt4 import QtCore, QtGui

    class Ui_MainWindow(object):
        def setupUi(self, MainWindow):
            MainWindow.setObjectName("MainWindow")
            MainWindow.resize(147, 125)
            self.centralwidget = QtGui.QWidget(MainWindow)
            self.centralwidget.setObjectName("centralwidget")
            self.verticalLayout = QtGui.QVBoxLayout(self.centralwidget)
            self.verticalLayout.setObjectName("verticalLayout")
            self.lineEdit = QtGui.QLineEdit(self.centralwidget)
            self.lineEdit.setObjectName("lineEdit")
            self.verticalLayout.addWidget(self.lineEdit)
            self.pushButton = QtGui.QPushButton(self.centralwidget)
            self.pushButton.setObjectName("pushButton")
            self.verticalLayout.addWidget(self.pushButton)
            MainWindow.setCentralWidget(self.centralwidget)
            self.menubar = QtGui.QMenuBar(MainWindow)
            self.menubar.setGeometry(QtCore.QRect(0, 0, 147, 25))
            self.menubar.setObjectName("menubar")
            self.menuMenu = QtGui.QMenu(self.menubar)
            self.menuMenu.setObjectName("menuMenu")
            MainWindow.setMenuBar(self.menubar)
            self.statusbar = QtGui.QStatusBar(MainWindow)
            self.statusbar.setObjectName("statusbar")
            MainWindow.setStatusBar(self.statusbar)
            self.menubar.addAction(self.menuMenu.menuAction())

            self.retranslateUi(MainWindow)
            QtCore.QMetaObject.connectSlotsByName(MainWindow)

        def retranslateUi(self, MainWindow):
            MainWindow.setWindowTitle(QtGui.QApplication.translate("MainWindow", "MainWindow", None, QtGui.QApplication.UnicodeUTF8))
            self.pushButton.setText(QtGui.QApplication.translate("MainWindow", "Click Me", None, QtGui.QApplication.UnicodeUTF8))
            self.menuMenu.setTitle(QtGui.QApplication.translate("MainWindow", "Menu", None, QtGui.QApplication.UnicodeUTF8)) 
    ```* 
**   将此代码保存为您的**MyWidget.py**文件：

    ```
    #!/usr/bin/env python
    #-*- coding:utf-8 -*-

    from PyQt4 import QtCore, QtGui
    from Ui_MyWidget import Ui_MainWindow

    class MyWidget(QtGui.QMainWindow, Ui_MainWindow):
        def __init__(self, parent=None):
           super(MyWidget, self).__init__(parent)

           self.setupUi(self)

        @QtCore.pyqtSlot()
        def on_pushButton_clicked(self):
            self.lineEdit.setText("A Qt standalone app!")

    if __name__ == '__main__':
        import sys

        app = QtGui.QApplication(sys.argv)
        window = MyWidget()
        window.resize(300, 30)
        window.show()
        sys.exit(app.exec_()) 
    ```

    *   检查您是否可以无错误地运行**MyWidget.py**（**MyWidget.py**和**Ui_MyWidget.py**需要在同一个文件夹中），并在完成配置*PyInstaller*（检查 README 文件）后从 OS shell 命令行 cd 到**pyinstaller**目录并运行此命令：

    ```
    python pyinstaller.py --onefile '/path/to/MyWidget.py' 
    ```

    *   在 pyinstaller 文件夹中查找名为 MyWidget 的**文件**夹**，**在**dist**文件夹中是您的独立 Qt 应用程序。*

# .htaccess - htaccess 重定向 301：mysite.com/sub/ 到 mysite.com/sub/home

> ID：14051404
> 
> 赞同：0
> 
> 时间：2012-12-27T08:07:06.570
> 
> 标签：.htaccess, joomla

我的主页`url`是这样的`http://mysite.com/sub/`

我只是想让它重定向到这样的新`url`东西`http://mysite.com/sub/home?lang=en`

这是我的`code`

`Redirect 301 /sub/ /sub/home?lang=en`

问题/错误：

新的`url`变成了这样`http://mysite.com/sub/home?lang=enhome`

之后有不必要的`home`连接`en`

我怎样才能删除这个？还是我的代码有问题？

不知道可能已经有类似的问题了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:31:58.327

This is because the `Redirect` directive "connects" 2 path nodes, and you've got one inside the other (`/sub/home` is *inside* `/sub`). For example, if the directive looks like this:

Redirect 301 /a /b

This means when someone requests `http://mysite.com/a/foo/bar` they get redirected to `http://mysite.com/b/foo/bar`. What happens when you get redirected to `/sub/home` is that you get redirected *again* because `/sub/home` matches the pattern `/sub`, and the `home` gets appended, thus `/sub/home?lang=enhome`.

You can try using `RedirectMatch` instead, which doesn't "connect" path nodes:

```
RedirectMatch 301 ^/sub/?$ /sub/home?lang=en 
```

Or mod_rewrite:

```
RewriteEngine On
RewriteRule ^/?sub/?$ /sub/home?lang=en [L,R=301,QSA] 
```

# perl - 如何让 DBIx::Class::Schema::Loader 忽略非结果类？

> ID：14051408
> 
> 赞同：4
> 
> 时间：2012-12-27T08:07:38.960
> 
> 标签：perl, dbix-class

我正在从动态模式下使用[DBIx::Class::Schema::Loader](http://search.cpan.org/~rkitover/DBIx-Class-Schema-Loader-0.07033/lib/DBIx/Class/Schema/Loader.pm)切换到静态模式。

但是有一个问题，我的结果类与非结果类混合在一起。 [这是细节](https://github.com/acme/parse-backpan-packages/tree/feature/schema_at_build/lib/BackPAN/Index)。

```
lib/BackPAN/Index.pm            # main API
lib/BackPAN/Index/Dist.pm       # result class
lib/BackPAN/Index/File.pm       # result class
lib/BackPAN/Index/Release.pm    # result class
lib/BackPAN/Index/Schema.pm     # subclass of DBIC::Schema::Loader
lib/BackPAN/Index/Role/...      # various roles 
```

当我切换到静态模式生成时，它会被角色绊倒。

> DBIx::Class::Schema::load_namespaces(): 尝试 load_namespaces() 类 BackPAN::Index::Role::HasCache 失败 - 你确定这是一个真正的结果类吗？

我被这个班级布局困住了。`BackPAN::Index::Dist`，`File`并且`Release`都是公开记录的。许多方法都希望将它们作为查询的结果返回。

我需要一种在静态模式下使用[DBIx::Class::Schema::Loader](http://search.cpan.org/~rkitover/DBIx-Class-Schema-Loader-0.07033/lib/DBIx/Class/Schema/Loader.pm)`BackPAN::Index::Dist` while 的方法，`File`并将`Release`其用作结果类。

我一直在尝试让[DBIx::Class::Schema::Loader](http://search.cpan.org/~rkitover/DBIx-Class-Schema-Loader-0.07033/lib/DBIx/Class/Schema/Loader.pm)拼出生成的结果类，而不是依靠`load_namespaces`搜索子目录。

理想情况下，我希望生成的结果类位于它们自己的子目录中`Dist`，`File`并`Release`作为子类以便于定制。但是，针对模式的查询必须返回自定义的子类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:53:07.163

通常，您有一个 Result 和一个 ResultSet 命名空间，相应的类驻留在其中：

```
BackPAN::Index::Schema::Result::Dist
BackPAN::Index::Schema::ResultSet::Dist 
```

DBIx [::Class::Schema#load_namespaces](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aSchema#load_namespaces)文档显示了将它们设置为非默认值的示例。

您还可以使用[DBIx::Class::Schema#load_classes](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aSchema#load_classes)并指定每个类：

```
BackPAN::Index::Schema->load_classes({
    BackPAN::Index => [qw( Dist File Release )],
}); 
```

通常，将 Result 和 ResultSet 类移动到不同的命名空间中没有问题，因为它们总是通过加载它们的 Schema 实例来访问。我建议在使用 load_classes 之前尝试移动它们，看看它是否真的会破坏某些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:12:09.343

我意识到 Schema::Loader 的重要部分是制作结果类。架构很简单，我可以手工制作。不幸的是，没有办法告诉 Schema::Loader 不要生成模式。我通过告诉它[做一个虚拟并删除文件](https://github.com/acme/parse-backpan-packages/blob/feature/schema_at_build/inc/MyBuilder.pm)来绕过它。

```
DBIx::Class::Schema::Loader::make_schema_at(
    'BackPAN::Index::SchemaThrowaway',
    {
        result_namespace => '+BackPAN::Index',
        use_namespaces   => 1,
        dump_directory   => 'lib',
    },
);

# Throw the generated schema away.
unlink "lib/BackPAN/Index/SchemaThrowaway.pm"; 
```

然后我手动编写[模式类](https://github.com/acme/parse-backpan-packages/blob/feature/schema_at_build/lib/BackPAN/Index/Schema.pm)。

```
package BackPAN::Index::Schema;

use strict;
use warnings;

use base 'DBIx::Class::Schema';

__PACKAGE__->load_classes({
    "BackPAN::Index" => [qw(Dist File Release)],
}); 
```

它是一个黑客，但它有效。仍在寻找更好的解决方案。

# youtube-api - 查询限制

> ID：14051409
> 
> 赞同：0
> 
> 时间：2012-12-27T08:07:40.847
> 
> 标签：youtube-api

我们正在使用以下 API 来获取 youtube 文章： http: [//gdata.youtube.com/feeds/api/videos](http://gdata.youtube.com/feeds/api/videos)

目前我们不确定查询大小是否有任何字符限制（例如，我们不能发送超过 500 或 1000 个字符的查询。）

[https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#qsp](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#qsp) 在上述 API 中，代表查询的参数 q 并未提及我们可以发送以获取文章的查询的任何特定大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:10:08.560

我认为这与 Youtube API 没有任何关系。

GET HTTP 请求的 Querystring 参数有 1024 个字符的限制。

**更新：**这似乎对 HTML 3 是正确的，但在 HTML 4 中作为限制被省略。可能取决于服务器。

# ruby-on-rails - 为登录设计错误消息

> ID：14051414
> 
> 赞同：1
> 
> 时间：2012-12-27T08:08:10.920
> 
> 标签：ruby-on-rails, devise

众所周知，当登录过程失败时，Devise 使用 Flash 发出警报。没有 resource.errors 数组，只是闪烁。所以我的问题是它是如何做到的？我的意思是如何将这个功能用于我的目的？是否有用于将资源错误从 resource.errors 移动到闪存的 Devise 帮助器或控制器方法？或者唯一的方法是编写我自己的实现？

我试图自己弄清楚，但我失败了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:51:44.993

Devise 使用 I18N 作为它的 flash 消息，它允许您完全自定义它们，甚至添加您自己的消息。看看`config/locales/devise.en.yml`你的项目目录里面。在那里，您将看到 Devise 的 Flash 消息所需的所有英文翻译。

如果您查看`SessionsController`Devise 中的内容，您将看到以下行：

```
set_flash_message(:notice, :signed_in) if is_navigational_format? 
```

这将调用它们`set_flash_message`并传入 flash 类型和所需的翻译。

至于想要将其用于您的目的，这实际上取决于您想要做什么。将其翻译成新语言就像在语言环境下添加 YAML 文件一样简单，例如`config/locales/devise.es.yml`西班牙语，然后翻译现有文本。

除此之外的任何事情，例如添加新的 flash 消息，都需要覆盖默认的 Devise 控制器，这些示例可以在他们的[wiki](https://github.com/plataformatec/devise/wiki/_pages)中找到，或者通过简单的[Google 搜索](http://bit.ly/W71pzL)

# facebook - 致命错误：未捕获的 CurlException：7：无法连接到抛出的主机

> ID：14051416
> 
> 赞同：0
> 
> 时间：2012-12-27T08:08:20.577
> 
> 标签：facebook, facebook-graph-api, curl, facebook-javascript-sdk

昨天还好，但今天突然，我的网络应用程序在访问 Facebook PHP API 时报告错误。起初，错误是连接超时。因此，我在 base_facebook.php 中添加了时间，将变量 CURLOPT_CONNECTTIMEOUT => 10 更改为 CURLOPT_CONNECTTIMEOUT => 60

现在，我的网络应用程序报告另一个错误：致命错误：未捕获的 CurlException：7：无法连接到第 972 行的 xxx\src\base_facebook.php 中抛出的主机

啊，我在 Windows（XAMPP 1.7.7）的本地主机上运行我的应用程序。为了测试它，我还运行了来自 github 中最新 facebook API 的示例代码。我也重新启动了我的 Apache 服务器，它仍然给出了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:12:26.030

这可能是您这边的服务器配置问题。

检查主机是否阻塞了80和443端口。

# android - Android：progressdailog 无法正常工作

> ID：14051418
> 
> 赞同：1
> 
> 时间：2012-12-27T08:08:25.370
> 
> 标签：android, progressdialog

在我的应用程序中，当我点击一个图标时，我在 fb dailog 上实现了一个发布，但是加载 fbdailog 需要时间，我正在使用 progressDailog，代码如下

```
ImageView faceBookIntegration = (ImageView) activity
                .findViewById(R.id.facebookintegration);
        faceBookIntegration.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Constants.isLayoutTouched = true;
                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN: {

                    CityAttractions.this.runOnUiThread(new Runnable() {
                        public void run() {
                            Dialog dialog = ProgressDialog.show(CityAttractions.this, "","Please wait...", true);
                            dialog.show();
                        }
                    });

                    Intent menuSettingsIntent = new Intent(CityAttractions.this, ShareOnFacebook.class);
                    menuSettingsIntent.putExtra("facebookMessage", "Msg");
                    startActivity(new Intent(menuSettingsIntent).addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT));

                    break;
                }
                case MotionEvent.ACTION_MOVE:
                    break;
                case MotionEvent.ACTION_UP:
                    break;
                }
                return false;
            }
        });
    } 
```

当我点击图标时遇到两个问题我得到了progressdailog（这里微调器没有旋转），然后得到fbdailog这很好，在我取消fbdailog后我仍然看到进度dailog，如何在fb dailog之后关闭progressdailog已完成任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:14:26.730

嘿，你犯了一个大错误。ProgressDialog.show() 将创建 ProgressDialog 实例并已经显示对话框。您正在将相同的对话框分配给另一个 Dialog 并再次显示它。所以它显示双倍时间。

将您的代码更改为

```
Dialog dialog = ProgressDialog.show(CityAttractions.this, "","Please wait...", true); 
```

现在对话框将具有它正在显示的 ProgressDialog 的引用，并且您可以在任务完成后关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:58:32.933

使用 startActivityForResult 而不是 startActivity 试试这个代码

```
Intent menuSettingsIntent = new Intent(CityAttractions.this, ShareOnFacebook.class);
                menuSettingsIntent.putExtra("facebookMessage", "Msg");
                startActivityForResult(new Intent(menuSettingsIntent).addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT), REQUEST_CODE); 
```

并覆盖 onActivityResult

并在此处关闭对话框。这可以帮助你吗

# android - 在 android 标签主机中搜索用户

> ID：14051419
> 
> 赞同：4
> 
> 时间：2012-12-27T08:08:37.387
> 
> 标签：android, web-services, jakarta-ee, android-tabhost

我编写了`TabHost`从 Web 服务获取值的代码，并将这些值添加到`TableRow`. 但是当我搜索用户时，我将值从微调器和文本框发送到 Web 服务，并根据我的请求获取值。

问题是我无法`TableRow`通过创建 new fresh来添加`TableRows`。谁能帮我找到我的代码中的任何错误。

```
public class Deleteuser extends Activity{
    Webservicepath path= new Webservicepath();
    TextView userId,Userrole;
    CheckBox selectcheck;
    Spinner utype;

    ArrayList<DeleteuserDetails> userdetail= new ArrayList<DeleteuserDetails>();
    DeleteuserDetails deleteuserDetail=new DeleteuserDetails();
    alertbox alert=new alertbox();
    EditText edtTxtUserId;  
    Button userId_show,btn_user_delete,spinner_user_search;
    TableLayout userdetailTable;
    TextView[] deleteuserList;
    TextView uName,CreatedBy,CreatedDate;
    String checkedValue,selecteduserType,userid;
    LinearLayout linearLayout;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.delete_user);
        utype=(Spinner)findViewById(R.id.spin_delete_userType);

        userId_show=(Button)findViewById(R.id.btn_user_delete);
        userdetailTable=(TableLayout)findViewById(R.id.delete_userDetails_Table);
        edtTxtUserId=(EditText)findViewById(R.id.txt_user_delete);
        spinner_user_search=(Button)findViewById(R.id.btn_spinner_user_search_select);
        path.setNamespace();
        path.setMethod_name("userList");
        path.setSoap_action();
        path.setUrl();
        new deteUserIdLoad().execute();
        utype.setId(10);
        edtTxtUserId.setId(20);

        userId_show.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                new searchuser().execute();

            }
        });
        spinner_user_search.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                new utypesearch().execute();
            }
        });

    }
    public class deteUserIdLoad extends AsyncTask<Void, Void, ArrayList<DeleteuserDetails>>{
        Webservice service=new Webservice(path.getNamespace(), path.getMethod_name(), path.getUrl(), path.getSoap_action());

        /* (non-Javadoc)
         * @see android.os.AsyncTask#doInBackground(Params[])
         */
        @Override
        protected ArrayList<DeleteuserDetails> doInBackground(Void... arg0) {
            // TODO Auto-generated method stub
            try{

                SoapObject request = service.getRequest();
                SoapSerializationEnvelope envelope = service.getEnvelope(request);
                SoapObject response = service.getResponse(envelope);
                Log.i("Service Master", response.toString());
                int count = response.getPropertyCount();

                for (int i = 0; i < count; i++) {

                    SoapObject result = (SoapObject) response.getProperty(i);
                    DeleteuserDetails deleteuserDetails=new DeleteuserDetails();
                    if(result.getPropertyAsString(4)!=null){
                    deleteuserDetails.setUserId(result.getPropertyAsString(4));
                    }
                    else{

                    }
                    if(result.getPropertyAsString(2)!=null){
                    deleteuserDetails.setUserName(result.getPropertyAsString(2));
                    }
                    else{

                    }
                    if(result.getPropertyAsString(3)!=null){
                        deleteuserDetails.setUserRole(result.getPropertyAsString(3));   
                    }
                    if(result.getPropertyAsString(1)!=null){
                        deleteuserDetails.setCreatedDate(result.getPropertyAsString(1));    
                    }
                    else{

                    }
                    try {
                        deleteuserDetails.setCreatedBy(result.getPropertyAsString(0).toString());
                    }
                    catch(NullPointerException npe) {
                        deleteuserDetails.setCreatedBy("null");
                    }
                    userdetail.add(deleteuserDetails);
                }
            }
            catch(Exception e){
                e.printStackTrace();
            }

            return userdetail;
        }
        protected void onPostExecute(final ArrayList<DeleteuserDetails>deleteuserDetails) {

            deleteuserList = new TextView[deleteuserDetails.size()];

            for(int i=0;i<deleteuserDetails.size();i++){

                    TableRow deleteUserRow=new TableRow(Deleteuser.this);
                    deleteUserRow.setId(i);
                    deleteUserRow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
                    selectcheck = new CheckBox(Deleteuser.this);
                    selectcheck.setId(i);
                    selectcheck.setTag(i);

                    deleteUserRow.addView(selectcheck);

                    deleteuserList[i]=new TextView(Deleteuser.this);
                    deleteuserList[i].setId(i);
                    deleteuserList[i].setTag(i);
                    deleteuserList[i].setText(deleteuserDetails.get(i).getUserId());
                    deleteUserRow.addView(deleteuserList[i]);

                    uName=new TextView(Deleteuser.this);
                    uName.setId(i);
                    uName.setText(deleteuserDetails.get(i).getUserName());
                    deleteUserRow.addView(uName);

                    Userrole=new TextView(Deleteuser.this);
                    Userrole.setId(i);
                    Userrole.setPadding(20, 0, 0, 0);
                    Userrole.setText(deleteuserDetails.get(i).getUserRole());
                    deleteUserRow.addView(Userrole);

                    CreatedDate=new TextView(Deleteuser.this);
                    CreatedDate.setId(i);
                    CreatedDate.setPadding(20, 0, 0, 0);
                    CreatedDate.setText(deleteuserDetails.get(i).getCreatedDate());
                    deleteUserRow.addView(CreatedDate);

                    CreatedBy=new TextView(Deleteuser.this);
                    CreatedBy.setId(i);
                    CreatedBy.setPadding(20, 0, 0, 0);
                    CreatedBy.setText(deleteuserDetails.get(i).getCreatedBy());
                    deleteUserRow.addView(CreatedBy);
                    userdetailTable.addView(deleteUserRow,
                            new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
                                    LayoutParams.WRAP_CONTENT));

                    selectcheck.setOnClickListener(listener);
                    Log.i("Exception",""+i);
                }
            TableRow addcomponentrow=new TableRow(Deleteuser.this);
            addcomponentrow.setId(200);
            addcomponentrow.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

            Button Deletecomponentbtn=new Button(Deleteuser.this);
            Deletecomponentbtn.setText("Delete");
            Deletecomponentbtn.setId(200);
            Deletecomponentbtn.setPadding(10, 0, 20, 2);
            Deletecomponentbtn.setBackgroundColor(color.red);
            addcomponentrow.addView(Deletecomponentbtn);

            userdetailTable.addView(addcomponentrow,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            Deletecomponentbtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    // TODO Auto-generated method stub
                    new DeleteUserid().execute(checkedValue);
                }
            });

        }
        final OnClickListener listener=new OnClickListener() {

            @Override
            public void onClick(View v) {

                // TODO Auto-generated method stub
                int index = (Integer) v.getTag();
                checkedValue=(String) deleteuserList[index].getText();

            }
        };

    }
    public class DeleteUserid extends AsyncTask<String, Void, String>{

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            path.setNamespace();
            path.setUrl();
            path.setMethod_name("deleteuser");
            path.setSoap_action();
            selecteduserType=String.valueOf(utype.getSelectedItem());
            userid=edtTxtUserId.getText().toString();
            Log.i("selected user",selecteduserType);
            Log.i("userid",userid);
            Webservice service=new Webservice(path.getNamespace(), path.getMethod_name(), path.getUrl(), path.getSoap_action());
             SoapObject deleteUser=service.getRequest();
             PropertyInfo delete_userid=new PropertyInfo();
             delete_userid.setName("UID");
             delete_userid.setValue(checkedValue);
             deleteUser.addProperty(delete_userid);
             SoapSerializationEnvelope delete_userid_envelope=service.getEnvelope(deleteUser);
             SoapPrimitive response=service.getsoapprimitive(delete_userid_envelope);
             Log.d("UserId Deletee","res"+response);
            return response.toString();
        }
        protected void onPostExecute(String res){
            if(res.equals("true"))
            {
                Toast.makeText(Deleteuser.this,checkedValue+ "User Deleted Successfully", 20).show();
                userdetailTable.removeAllViews();
                new deteUserIdLoad().execute();

            }
            else
            {
                alert.generateAlert(Deleteuser.this,"Deletion Failed","Operation Failed",null);
            }
        }

    }
    public class searchuser extends AsyncTask<Void, Void,ArrayList<DeleteuserDetails>>{
        @Override
        protected ArrayList<DeleteuserDetails> doInBackground(Void... arg0) {
            // TODO Auto-generated method stub

            path.setNamespace();
            path.setMethod_name("searchuser");
            path.setSoap_action();
            path.setUrl();
            selecteduserType=String.valueOf(utype.getSelectedItem());
            userid=edtTxtUserId.getText().toString();
            if(!String.valueOf(utype.getSelectedItem()).equals("select")){

            Webservice service=new Webservice(path.getNamespace(), path.getMethod_name(), path.getUrl(), path.getSoap_action());
            try{
            SoapObject searchUser=service.getRequest();
             PropertyInfo search_userid=new PropertyInfo();
             search_userid.setName("userID");
             search_userid.setValue(userid);
             searchUser.addProperty(search_userid);
            /* PropertyInfo search_utype=new PropertyInfo(); 
             search_utype.setName("utype");
             search_utype.setValue(selecteduserType);
             searchUser.addProperty(search_utype);*/
             SoapSerializationEnvelope envelope = service.getEnvelope(searchUser);
                SoapObject response = service.getResponse(envelope);
                int count = response.getPropertyCount();
                if(userdetail.size()>0){
                    userdetail.clear();
                }
                for (int i = 0; i < count; i++) {

                    SoapObject result = (SoapObject) response.getProperty(i);
                    DeleteuserDetails deleteuserDetails=new DeleteuserDetails();

                    if(result.getPropertyAsString(4)!=null){
                    deleteuserDetails.setUserId(result.getPropertyAsString(4));
                    }
                    else{

                    }
                    if(result.getPropertyAsString(2)!=null){
                    deleteuserDetails.setUserName(result.getPropertyAsString(2));
                    }
                    else{

                    }
                    if(result.getPropertyAsString(3)!=null){
                        deleteuserDetails.setUserRole(result.getPropertyAsString(3));   
                    }
                    if(result.getPropertyAsString(1)!=null){
                        deleteuserDetails.setCreatedDate(result.getPropertyAsString(1));    
                    }
                    else{

                    }
                    try {
                        deleteuserDetails.setCreatedBy(result.getPropertyAsString(0).toString());
                    }
                    catch(NullPointerException npe) {
                        deleteuserDetails.setCreatedBy("null");
                    }
                    userdetail.add(deleteuserDetails);
                }

        }
            catch(Exception e){
                e.printStackTrace();
            }
            }
            else{
                alert.generateAlert(Deleteuser.this,"Please Enter a valid Mobile Number", "Mobile Number Required",R.drawable.noicon);

            }
            return userdetail;

        }

        protected void onPostExecute(ArrayList<DeleteuserDetails> deleteuserDetails) {
            deleteuserList = new TextView[deleteuserDetails.size()];

            for(int i=0;i<deleteuserDetails.size();i++){

                    TableRow deleteUserRow=new TableRow(Deleteuser.this);
                    deleteUserRow.setId(i);
                    deleteUserRow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
                    selectcheck = new CheckBox(Deleteuser.this);
                    selectcheck.setId(i);
                    selectcheck.setTag(i);

                    deleteUserRow.addView(selectcheck);

                    deleteuserList[i]=new TextView(Deleteuser.this);
                //  deleteuserList[i].setId(i);
                    deleteuserList[i].setTag(i);
                    deleteuserList[i].setText(deleteuserDetails.get(i).getUserId());
                    deleteUserRow.addView(deleteuserList[i]);

                    uName=new TextView(Deleteuser.this);
                    uName.setId(i);
                    uName.setText(deleteuserDetails.get(i).getUserName());
                    deleteUserRow.addView(uName);

                    Userrole=new TextView(Deleteuser.this);
                    Userrole.setId(i);
                    Userrole.setPadding(20, 0, 0, 0);
                    Userrole.setText(deleteuserDetails.get(i).getUserRole());
                    deleteUserRow.addView(Userrole);

                    CreatedDate=new TextView(Deleteuser.this);
                    CreatedDate.setId(i);
                    CreatedDate.setPadding(20, 0, 0, 0);
                    CreatedDate.setText(deleteuserDetails.get(i).getCreatedDate());
                    deleteUserRow.addView(CreatedDate);

                    CreatedBy=new TextView(Deleteuser.this);
                    CreatedBy.setId(i);
                    CreatedBy.setPadding(20, 0, 0, 0);
                    CreatedBy.setText(deleteuserDetails.get(i).getCreatedBy());
                    deleteUserRow.addView(CreatedBy);
                    userdetailTable.addView(deleteUserRow,
                            new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
                                    LayoutParams.WRAP_CONTENT));

                    selectcheck.setOnClickListener(listener);
                    Log.i("Exception",""+i);
                }
            TableRow addcomponentrow=new TableRow(Deleteuser.this);
            addcomponentrow.setId(200);
            addcomponentrow.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

            Button Deletecomponentbtn=new Button(Deleteuser.this);
            Deletecomponentbtn.setText("Delete");
            Deletecomponentbtn.setId(200);
            Deletecomponentbtn.setPadding(10, 0, 20, 2);
            Deletecomponentbtn.setBackgroundColor(color.red);
            addcomponentrow.addView(Deletecomponentbtn);

            userdetailTable.addView(addcomponentrow,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            Deletecomponentbtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    // TODO Auto-generated method stub
                    new DeleteUserid().execute(checkedValue);
                }
            });

        }
        final OnClickListener listener=new OnClickListener() {

            @Override
            public void onClick(View v) {

                // TODO Auto-generated method stub
                int index = (Integer) v.getTag();
                checkedValue=(String) deleteuserList[index].getText();

            }
        };

    }
    public class utypesearch extends AsyncTask<Void, Void, ArrayList<DeleteuserDetails> >{

        @Override
        protected ArrayList<DeleteuserDetails> doInBackground(Void... arg0) {
            // TODO Auto-generated method stub
            path.setNamespace();
            path.setMethod_name("searchuser");
            path.setSoap_action();
            path.setUrl();
            Webservice service=new Webservice(path.getNamespace(), path.getMethod_name(), path.getUrl(), path.getSoap_action());
            selecteduserType=String.valueOf(utype.getSelectedItem());
            try{
            SoapObject searchusertype=service.getRequest();
            PropertyInfo search_userid=new PropertyInfo();
             search_userid.setName("utype");
             search_userid.setValue(selecteduserType);
             searchusertype.addProperty(search_userid);
             SoapSerializationEnvelope envelope = service.getEnvelope(searchusertype);
                SoapObject response = service.getResponse(envelope);
                int count = response.getPropertyCount();
                if(userdetail.size()>0){
                    userdetail.clear();
                }
                for (int i = 0; i < count; i++) {

                    SoapObject result = (SoapObject) response.getProperty(i);
                    DeleteuserDetails deleteuserDetails=new DeleteuserDetails();

                    if(result.getPropertyAsString(4)!=null){
                    deleteuserDetails.setUserId(result.getPropertyAsString(4));
                    }
                    else{

                    }
                    if(result.getPropertyAsString(2)!=null){
                    deleteuserDetails.setUserName(result.getPropertyAsString(2));
                    }
                    else{

                    }
                    if(result.getPropertyAsString(3)!=null){
                        deleteuserDetails.setUserRole(result.getPropertyAsString(3));   
                    }
                    if(result.getPropertyAsString(1)!=null){
                        deleteuserDetails.setCreatedDate(result.getPropertyAsString(1));    
                    }
                    else{

                    }
                    try {
                        deleteuserDetails.setCreatedBy(result.getPropertyAsString(0).toString());
                    }
                    catch(NullPointerException npe) {
                        deleteuserDetails.setCreatedBy("null");
                    }
                    userdetail.add(deleteuserDetails);
                }
            }
            catch(Exception e){
                e.printStackTrace();
            }
            return userdetail;
        }
        protected void onPostExecute(ArrayList<DeleteuserDetails> deleteuserDetails) {
            deleteuserList = new TextView[deleteuserDetails.size()];

            for(int i=0;i<deleteuserDetails.size();i++){

                    TableRow deleteUserRow=new TableRow(Deleteuser.this);
                    deleteUserRow.setId(i);
                    deleteUserRow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
                    selectcheck = new CheckBox(Deleteuser.this);
                    selectcheck.setId(i);
                    selectcheck.setTag(i);

                    deleteUserRow.addView(selectcheck);

                    deleteuserList[i]=new TextView(Deleteuser.this);
                //  deleteuserList[i].setId(i);
                    deleteuserList[i].setTag(i);
                    deleteuserList[i].setText(deleteuserDetails.get(i).getUserId());
                    deleteUserRow.addView(deleteuserList[i]);

                    uName=new TextView(Deleteuser.this);
                    uName.setId(i);
                    uName.setText(deleteuserDetails.get(i).getUserName());
                    deleteUserRow.addView(uName);

                    Userrole=new TextView(Deleteuser.this);
                    Userrole.setId(i);
                    Userrole.setPadding(20, 0, 0, 0);
                    Userrole.setText(deleteuserDetails.get(i).getUserRole());
                    deleteUserRow.addView(Userrole);

                    CreatedDate=new TextView(Deleteuser.this);
                    CreatedDate.setId(i);
                    CreatedDate.setPadding(20, 0, 0, 0);
                    CreatedDate.setText(deleteuserDetails.get(i).getCreatedDate());
                    deleteUserRow.addView(CreatedDate);

                    CreatedBy=new TextView(Deleteuser.this);
                    CreatedBy.setId(i);
                    CreatedBy.setPadding(20, 0, 0, 0);
                    CreatedBy.setText(deleteuserDetails.get(i).getCreatedBy());
                    deleteUserRow.addView(CreatedBy);
                    userdetailTable.addView(deleteUserRow,
                            new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
                                    LayoutParams.WRAP_CONTENT));

                    selectcheck.setOnClickListener(listener);
                    Log.i("Exception",""+i);
                }
            TableRow addcomponentrow=new TableRow(Deleteuser.this);
            addcomponentrow.setId(200);
            addcomponentrow.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

            Button Deletecomponentbtn=new Button(Deleteuser.this);
            Deletecomponentbtn.setText("Delete");
            Deletecomponentbtn.setId(200);
            Deletecomponentbtn.setPadding(10, 0, 20, 2);
            Deletecomponentbtn.setBackgroundColor(color.red);
            addcomponentrow.addView(Deletecomponentbtn);

            userdetailTable.addView(addcomponentrow,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            Deletecomponentbtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    // TODO Auto-generated method stub
                    new DeleteUserid().execute(checkedValue);
                }
            });

        }
        final OnClickListener listener=new OnClickListener() {

            @Override
            public void onClick(View v) {

                // TODO Auto-generated method stub
                int index = (Integer) v.getTag();
                checkedValue=(String) deleteuserList[index].getText();

            }
        };
    }

    } 
```

LOGCAT

```
12-27 14:29:36.160: W/WindowManager(59): Key dispatching timed out sending to com.mvss.pack/com.mvss.pack.UserCreation
12-27 14:29:36.160: W/WindowManager(59): Previous dispatch state: null
12-27 14:29:36.160: W/WindowManager(59): Current dispatch state: {{null to Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false} @ 1356598776162 lw=Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false} lb=android.os.BinderProxy@4606cc18 fin=false gfw=true ed=true tts=0 wf=false fp=false mcf=Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false}}}
12-27 14:29:36.160: W/WindowManager(59): Continuing to wait for key to be dispatched
12-27 14:29:41.169: W/WindowManager(59): Key dispatching timed out sending to com.mvss.pack/com.mvss.pack.UserCreation
12-27 14:29:41.169: W/WindowManager(59): Previous dispatch state: null
12-27 14:29:41.169: W/WindowManager(59): Current dispatch state: {{null to Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false} @ 1356598781172 lw=Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false} lb=android.os.BinderProxy@4606cc18 fin=false gfw=true ed=true tts=0 wf=false fp=false mcf=Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false}}}
12-27 14:29:41.169: W/WindowManager(59): Continuing to wait for key to be dispatched
12-27 14:29:46.179: W/WindowManager(59): Key dispatching timed out sending to com.mvss.pack/com.mvss.pack.UserCreation
12-27 14:29:46.179: W/WindowManager(59): Previous dispatch state: null
12-27 14:29:46.179: W/WindowManager(59): Current dispatch state: {{null to Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false} @ 1356598786183 lw=Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false} lb=android.os.BinderProxy@4606cc18 fin=false gfw=true ed=true tts=0 wf=false fp=false mcf=Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false}}}
12-27 14:29:46.179: W/WindowManager(59): Continuing to wait for key to be dispatched
12-27 14:29:51.190: W/WindowManager(59): Key dispatching timed out sending to com.mvss.pack/com.mvss.pack.UserCreation
12-27 14:29:51.190: W/WindowManager(59): Previous dispatch state: null
12-27 14:29:51.190: W/WindowManager(59): Current dispatch state: {{null to Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false} @ 1356598791192 lw=Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false} lb=android.os.BinderProxy@4606cc18 fin=false gfw=true ed=true tts=0 wf=false fp=false mcf=Window{4604d328 com.mvss.pack/com.mvss.pack.UserCreation paused=false}}}
12-27 14:29:51.190: W/WindowManager(59): Continuing to wait for key to be dispatched
12-27 14:30:23.919: W/InputManagerService(59): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@45fca1b0 
```

问题是它不会引发任何异常或强制关闭。

# css - 如何让这个 css 在 Chrome 中正确显示？

> ID：14051421
> 
> 赞同：0
> 
> 时间：2012-12-27T08:09:08.977
> 
> 标签：css, google-chrome, css-float

我有以下简单的代码：

```
<div style="float:right">
   <h2>Header <div style="float:right;background-color:red">my text</div></h2>
   More text
</div> 
```

看到这个[小提琴](http://jsfiddle.net/CeZ9G/)

这显示了我在 Firefox 和 IE 中想要的方式——“我的文本”显示在同一行的“标题”右侧。但是，在 Chrome 中，“我的文本”被下推到“更多文本”旁边的一行。

我知道我可以通过在“标题”文本之前移动“我的文本”div 来实现这一点：

```
<h2><div style="float:right;background-color:red">my text</div>Header</h2> 
```

但由于其他原因，我需要保持 html 的原样，并希望尽可能使用 css 来完成此操作。有没有办法让它在 Chrome 中显示我想要的方式（只需更改 css）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:14:28.600

你可以这样使用

```
<div style="float:right">
<h2>Header <div style="display:inline-block;background-color:red">My text</div></h2>
More text
</div> 
```

这正是你想要的[看这个小提琴](http://jsfiddle.net/Dineshkani/YDf3Q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:20:12.753

我认为以下代码对您有帮助...

```
 <div style="float:right;width:170px">
     <h2>Header <div style="float:right;background-color:red">my text</div></h2>
     More text
    </div> 
```

下面的代码也很有帮助.....

```
 <div style="float:right">
  <h2>Header <div style="display:inline;background-color:red">My text</div></h2>
  More text
 </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:20:14.143

您可以消除`float:right`并替换为`display:inline;`

下图

![在此处输入图像描述](../Images/d84cdd19f67116951f7deaa34e103ed0.png)

# python - 如何在 Python 中使用 ElementTree 删除 xml 中的节点？

> ID：14051422
> 
> 赞同：6
> 
> 时间：2012-12-27T08:09:11.837
> 
> 标签：python, xml, elementtree

我已阅读[此处的示例，此处](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.iter)`remove`的[示例](http://effbot.org/zone/element.htm)不适用于我。

我的 xml 文件内容如下：

```
<A>
  <B>some text</B>
  <B>other text</B>
  <B>more text</B>
</A> 
```

我想要做的是`<B></B>`从 xml 中删除第二个。我不知道它包含什么文字。但是我有 的索引`<B></B>`，比如 index = 1，这意味着我想删除第二个元素（或节点）。

我有这样的代码：

```
F = open('example.xml')
self.tree = parse(F)
self.root = self.tree.getroot()
F.close() 
```

所以在这种情况下，我要删除的是`self.root[1]`.

如何使用 ElementTree 来实现？

编辑：使我的问题更加清晰和具体。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T08:22:32.300

```
In [1]: import xml.etree.ElementTree as ET

In [2]: xmlstr=\
   ...: """
   ...: <A>
   ...:   <B>some text</B>
   ...:   <B>other text</B>
   ...:   <B>more text</B>
   ...: </A>
   ...: """

In [3]: tree=ET.fromstring(xmlstr)

In [4]: tree.remove(tree.findall('.//B')[1]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T08:44:03.597

你们不是直截了当。我将我的知识与这里的答案结合起来，得出了这个结论：

```
for i, child in enumerate(self.root):
    if path == i:
        self.root.remove(child)
        break 
```

`path`我要删除的项目的索引在哪里。

# android - 何时使用 android 搜索对话框

> ID：14051424
> 
> 赞同：1
> 
> 时间：2012-12-27T08:09:22.313
> 
> 标签：android, search

我正在寻找`Search Display Controller`android 的等价物，发现[http://developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)

它似乎试图为搜索提供很多功能，但我不确定我是否需要它。

在初始加载时，我想显示一个项目列表。
当用户输入查询并点击搜索时，我将显示从服务器返回的新结果列表。
当用户取消搜索时，他将再次看到最初的项目列表。

iOS 的搜索显示控制器有助于实现场景。android有类似的类吗？

# java - Java - 获取传递给方法的参数？

> ID：14051429
> 
> 赞同：5
> 
> 时间：2012-12-27T08:09:59.060
> 
> 标签：java, reflection, aop

是否可以使用反射 api 将参数传递给 Java 中的方法？

是否可以使用像 AspectJ 这样的 AOP 库来实现这一点？

我在安卓上运行。

```
public abstract class Base {

   public void printArguments() {

      //Here I need to get access to arg1, arg2, arg3
   }

} 
```

.

```
public class MyClass extends Base {

   public void (String arg1, Integer arg2, String arg3) {

      super.printArguments();      
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T09:03:50.133

> 是否可以使用像 AspectJ 这样的 AOP 库来实现这一点？

当然可以。这是 AspectJ 中典型的初学者练习，如下所示：

```
public class SampleClass {
    public SampleClass() { super(); }
    public SampleClass(String s) { this(); }
    public SampleClass(int i) { this(); }
    public void method01(String s, Number n, Throwable t) {}
    public void method02(int i, String s, double d) {}
    public void method03(String s) {}
    public void method04() {}
    public void method05(String s, Number n, double d) {}

    public static void main(String[] args) {
        new SampleClass().method01("foo", new Integer(11), new RuntimeException("error"));
        new SampleClass("test").method02(11, "bar", Math.PI);
        new SampleClass(123).method03("zot");
        new SampleClass("another test").method04();
        new SampleClass(456).method05("baz", new Integer(11), Math.E);
    }
} 
```

现在您只需要编写一个切面来拦截所有方法执行（以及可选的构造函数执行，如下所示）：

```
public aspect MethodArgsAspect {
    pointcut allMethods()      : execution(* *(..));
    pointcut allConstructors() : execution(*.new(..));

    before() : !within(MethodArgsAspect) && (allMethods() || allConstructors()) {
        System.out.println(thisJoinPointStaticPart.getSignature());
        for (Object arg : thisJoinPoint.getArgs())
            System.out.println("    " + arg);
    }
} 
```

运行时`SampleClass.main`，这方面将打印：

```
void SampleClass.main(String[])
    [Ljava.lang.String;@7fdcde
SampleClass()
void SampleClass.method01(String, Number, Throwable)
    foo
    11
    java.lang.RuntimeException: error
SampleClass()
SampleClass(String)
    test
void SampleClass.method02(int, String, double)
    11
    bar
    3.141592653589793
SampleClass()
SampleClass(int)
    123
void SampleClass.method03(String)
    zot
SampleClass()
SampleClass(String)
    another test
void SampleClass.method04()
SampleClass()
SampleClass(int)
    456
void SampleClass.method05(String, Number, double)
    baz
    11
    2.718281828459045 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:26:26.407

你可以使用**java变量参数**来实现这个逻辑

因为我不确定它是否可以通过反思来完成

我会做这个选择

www.java.net/pub/a/today/2004/04/19/varargs.html

你的方法在哪里

```
 public void printArguments(Obeject... argArr) {

  //Here I need to get access to arg1, arg2, arg3
  //TODO iterate over object array (ie: argArr) and print it.
  } 
```

在你的子类中

```
public void someMethodName(String arg1, Integer arg2, String arg3) {

  super.printArguments(arg1,arg2);   
  super.printArguments(arg1,arg2,arg3);      //the print argument can be called with any number of argument
} 
```

# jquery - 服务器响应状态为 405（不允许使用方法）

> ID：14051432
> 
> 赞同：7
> 
> 时间：2012-12-27T08:10:14.613
> 
> 标签：jquery, asp.net, web-services

我是 Web 服务的新手，当我尝试在 Chrome 控制台中运行我的页面（**本地）时出现以下错误**

**错误**

> 加载资源失败：服务器响应状态为 405（不允许方法）`http://localhost:12015/myWebService.asmx?op=GetCategories`

* * *

以下是相关代码：

*jQuery*

```
 $.ajax({
     url: "http://localhost:12015/myWebService.asmx?op=GetCategories",
     type: "POST",
     ------------
     ------------
    success: function (data) {                    
         var categories = data.d;
         $.each(categories, function (index, category) {
             category.CategoryId).text(category.CategoryName);
         });
    },
    error: function (e) {  //always executing 'error' only
         alert("hello");
    } 
```

*网络服务网址*

> `http://localhost:12015/myWebService.asmx`

* * *

```
 [WebMethod]
 [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
 public List<Categories>  GetCategories()
 {
      //code
 } 
```

*页面网址*

> `http://localhost:11761/Default.aspx`

编辑：当我刚刚包含时错误消失了`dataType: 'jsonp'`但现在还有另一个错误。

> 未捕获的 SyntaxError：意外的令牌 <
> `:12015/myWebService.asmx?op=GetCategories&callback=jQuery183010907560377381742_1356599550427&{}&_=1356599550438:3`

当我单击链接（在错误中提到）时，它正在显示页面。那么可能是什么问题？我不知道错误的含义（以及要显示的代码部分）。请帮忙。

**有关的**

[**Link1**](https://stackoverflow.com/q/14053484/1577396)（解释）
[**Link2**](https://stackoverflow.com/a/14122895/1577396)（已解决）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T08:25:37.740

试试这个

```
 [WebMethod]
 [ScriptMethod(UseHttpPost = true)]
 public List<Categories>  GetCategories()
 {
      //code
 } 
```

或编辑`web.config`

```
<system.web>
    ...
    <webServices>
        <protocols>
              <add name="HttpSoap"/> 
              <add name="HttpPost"/> --> 
              <add name="HttpGet"/>
              <add name="Documentation"/>
              <add name="HttpPostLocalhost"/>
        </protocols>
    </webServices>
    ...
</system.web> 
```

参考[http://codeclimber.net.nz/archive/2006/12/22/How-to-enable-an-ASP.NET-WebService-to-listen-to-HTTP.aspx](http://codeclimber.net.nz/archive/2006/12/22/How-to-enable-an-ASP.NET-WebService-to-listen-to-HTTP.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T09:03:59.823

将你的内容类型设为“application/json; charset=utf-8”，如下

```
$(document).ready(function() {
$.ajax({
type: "POST",
url: "RSSReader.asmx/GetRSSReader",
data: "{}",
contentType: "application/json; charset=utf-8",
dataType: "json",
success: function(msg) {
  // Hide the fake progress indicator graphic.
  $('#RSSContent').removeClass('loading');

  // Insert the returned HTML into the <div>.
  $('#RSSContent').html(msg.d);
 }
});
}); 
```

也参考[链接](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T09:48:57.523

我在 jquery ajax 调用上方添加了我朋友的建议的简单行

```
 jQuery.support.cors = true; 
```

现在它工作正常:)

仅在**IE**浏览器中

我很高兴知道它是否可以使用不同的方式解决，因为不[推荐](https://stackoverflow.com/q/7852225/1577396)。

无论如何，经过多次努力，我再次问了这个问题，我得到了不同的错误，在这篇文章中得到了[**解决**](https://stackoverflow.com/q/14053484/1577396)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-29T14:25:56.660

就我而言，它失败了，因为servet中没有POST方法，但我有GET方法。

所以我只是改变了类型：“GET”，所以它现在可以工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-22T14:02:36.927

在服务器端添加允许访问所有来源

# html - 如何在jmeter中编写多个正则表达式一个gsp中的标签，并确定测试人员将采用哪个标签值在我的代码中有两个选择标签，所以请告诉我如何根据每个选择标签中不同的名称为每个标签编写两个正则表达式。所以请尽早给我答复。 <select id="academicYear" name="academicYear"><option value="2010">2010</option> <option value="2011">2011 ID：14051437 赞同：1 时间：2012-12-27T08:10:29.733 标签：html, regex, xpath, jmeter 回答 #1 赞同：1 时间：2013-01-21T18:00:07.853 尝试为此目的使用XPath Extractor 。 将 2 个 XPath Extractor 实例（每个 1 个）附加到返回上述响应的请求采样器。 ... HTTP 请求 XPath 提取器 1 XPath 提取器 2 ... 为每个提取器提供 XPath 查询以根据其名称提取选项的值，例如 第一次： //select[@id='academicYear']/option[text()='2013']/@value 第 2 次： //select[@id='institution']/option[text()='CJT ENGINEERING AND TECHNOLOGY']/@value 您的 XPath 查询应该返回您想要提取的值。 提取的值将存储在 XPath 提取器的“参考名称”字段中指向的 jmeter 变量中（例如${academicYear}和institution）。因此，您可以在使用此变量的进一步请求中使用提取的变量。 由于您使用 XPath Extractor 来解析 HTML（不是 XML！..）响应，因此请确保选中Use Tidy（容错解析器）选项（在XPath Extractor 的控制面板中）。</option></select>

# android - SQlite 数据库：无法找到上下文

> ID：14051443
> 
> 赞同：4
> 
> 时间：2012-12-27T08:10:55.983
> 
> 标签：android, database, sqlite, android-context

显然，在我得到一个`NullPointerException`. 我认为上下文有问题。此外，当我试图从两个活动中打开和关闭数据库时，它会抛出`CannotOpenORCloseDatabase`错误。请帮助。

```
DBHelper dbHelper = new DBHelper(this.getApplicationContext()); 
```

知道为什么吗？或者，如果有人可以提出解决方法，那就太好了。

```
public static final String EXT_CATEGORY = "category";

public static final String EXT_URL = "url";

private String tableName = DBHelper.tableName;

private SQLiteDatabase MyDb;

private int category;
Cursor c = null;

public static final String EXT_POS = "position";
private String url;
private int position;
WebView mWebView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    Log.v(LOG_TAG, "onCreate() called");
    super.onCreate(savedInstanceState);

    openAndQueryDatabase();

}

private void openAndQueryDatabase() {

    position = 1;
    category = 0;
    Log.v(LOG_TAG, "onCreate() called 3");
    try {

        DBHelper dbHelper = DBHelper.getInstance(getBaseContext());
        MyDb = dbHelper.getWritableDatabase();

        c = MyDb.rawQuery("SELECT * FROM " + tableName
                + " where Category =" + category + "AND Position ="
                + position, null);
        Log.v(LOG_TAG, "onCreate() called 4");
        // url = c.getString(c.getColumnIndex("Image"));
        url = "www.google.com";
        Log.v(url, " URL in Recipe ");
    } catch (SQLiteException se) {
        Log.e(getClass().getSimpleName(),
                "Could not create or Open the database");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:53:16.557

您应该将 DBHelper 声明为静态实例（单例），以确保在任何给定时间仅存在一个 DBHelper。

```
 public class DBHelper extends SQLiteOpenHelper { 

    private static DBHelper mInstance = null;

    public static DBHelper getInstance(Context activityContext) {

    // Get the application context from the activityContext to prevent leak
    if (mInstance == null) {
      mInstance = new DBHelper (activityContext.getApplicationContext());
    }
    return mInstance;
  }

  /**
   * Private, use the static method "DBHelper.getInstance(Context)" instead.
   */
  private DBHelper (Context applicationContext) {
    super(applicationContext, DATABASE_NAME, null, DATABASE_VERSION);
  }
} 
```

要打开 SQLiteDatabase，请使用：

```
SQLiteDatabase mDataBase = DBHelper.getInstance(context).getWritableDatabase(); 
```

并关闭它

```
mDataBase.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:34:41.937

为此使用构造函数...在调用数据库类时传递上下文作为参数。如下所示。

```
 public class MyDB {

   private Context context;
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public MyDB(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }
} 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-27T19:00:17.060

尝试这个

```
db = new DbHelper(this.getContext()); 
```

它应该工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T08:21:54.737

您正在使用，`DBHelper dbHelper = new DBHelper(this.getApplicationContext());`

相反，您应该使用，

```
DBHelper dbHelper = new DBHelper(getApplicationContext()); 
```

**编辑-**

尝试使用

```
MyDb = getApplicationContext().getWritableDatabase(); 
```

代替

```
DBHelper dbHelper = new DBHelper(this.getApplicationContext());

MyDb = dbHelper.getWritableDatabase(); 
```

还尝试按照[此答案](https://stackoverflow.com/q/14050185/1626878)`finally()`的建议删除块。

# java - 用于操作 *.properties 文件的 java 库

> ID：14051445
> 
> 赞同：7
> 
> 时间：2012-12-27T08:11:04.063
> 
> 标签：java

我打算编写一个实用程序来注释/取消注释/编辑 *.properties 文件中的属性。[我知道我可以使用Properties](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)类读取/修改/写入那些，但我正在寻找一个库，它可以让我访问诸如注释行之类的内容，在回写时保留格式和行顺序等。

这样的图书馆存在吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T08:18:05.667

我所知道的最接近的是[Apache Commons Configuration](https://commons.apache.org/configuration/)。看看[PropertiesConfiguration](https://commons.apache.org/configuration/apidocs/index.html)。

**编辑**从您的属性 创建一个[PropertiesConfigurationLayout](https://commons.apache.org/proper/commons-configuration/apidocs/org/apache/commons/configuration2/PropertiesConfigurationLayout.html)对象，然后您将能够保留有关空格和注释的信息。它还将帮助您跟踪属性更改

# php - 即使在同一个文件夹中，php include 也不起作用

> ID：14051449
> 
> 赞同：5
> 
> 时间：2012-12-27T08:11:23.727
> 
> 标签：php, include

reg.php 在`members`文件夹 中

```
<?php include "members/reg.php";?>  // doesn't work
<?php include ("members/reg.php");?>  // doesn't work 
```

`reg.php`然后我在与当前文件相同的文件夹中 替换

```
<?php include "reg.php";?>  //doesn't work. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T08:18:17.673

尝试这个

```
ini_set( 'error_reporting', E_ALL );
ini_set( 'display_errors', true );

include './members/reg.php'; 
```

可能包含工作但导致了一个沉默的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:15:21.263

和：

```
define('ROOT', dirname(__FILE__).DIRECTORY_SEPARATOR); 
```

您可以定义项目的根目录（这是您放入的文件），然后调用：

```
include ROOT."members/reg.php"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-29T16:51:21.393

确保您的主网页文件具有扩展名 .php 而不是 .htm。如果它没有 .php 扩展名，那么 include 将根本不起作用。您不会收到错误或警告。它只是行不通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-03T23:08:50.730

我有一个类似的错误。当我删除包含的文件中的“？>”时，它起作用了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-21T22:54:49.933

你也可以试试：

```
<?php include("../members/reg.php") ?> 
```

2 点告诉包含转到上一个文件夹，然后从那里进入“成员”文件夹。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-06T09:54:59.480

也许你必须改变 / 因为在 windows 和 linux 中是不同的。您可以改用 DIRECTORY_SEPARATOR。

```
include_once "Model".DIRECTORY_SEPARATOR."MyFile.php"; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-08-21T11:12:05.857

一开始，在设置`reg.php`到当前文件夹之前，您应该尝试以下操作：

```
<?php include('../members/reg.php') ?> 
```

如果你这样做

```
<?php include('members/reg.php') ?> 
```

您的程序会认为当前文件夹中有一个名为 的文件夹`members`，但实际上没有。两个点告诉您向后移动文件夹。

# jquery-mobile - 如何为动态创建的列表视图的每个实例更改列表视图的初始化选项

> ID：14051450
> 
> 赞同：1
> 
> 时间：2012-12-27T08:11:26.067
> 
> 标签：jquery-mobile

假设我有一个 listview 字符串

```
 var html = "";
html += "<ol id=list2>"+
.... + 
"</ol>" 
```

根据用户输入，我必须改变我从上面的字符串创建的列表视图的主题和一些其他属性。

我尝试了以下但列表视图没有刷新。

```
$("#home div:jqmData(role=content)").append (html);
$("#list2").listview(); 
```

*   $("#list2").attr('data-theme', 'e'); $("#list2").listview('刷新');
*   $("#list2").jqmData("theme", "e") $("#list2").listview('refresh');

但是主题没有更新。同样，我必须更新列表视图的其他一些属性，例如`inset`, `splitIcon`。请让我知道如何以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:59:25.117

要以编程方式更改主题，仅更改`data-theme`属性是不够的，您还必须删除旧主题添加的类并手动添加新的类。在这里，您有几个链接可以指出这一点：

[在 Jquery Mobile 的文本框中以编程方式设置数据主题](https://stackoverflow.com/questions/8923255/set-data-theme-programatically-on-textbox-in-jquery-mobile)

[http://forum.jquery.com/topic/how-to-refresh-the-theme-of-a-button](http://forum.jquery.com/topic/how-to-refresh-the-theme-of-a-button)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:00:40.943

不幸的是，这不能通过列表视图刷新来完成，您需要这样做才能实现主题更改：

```
var newTheme = 'b';

$.mobile.activePage.find('.ui-btn, .ui-li, .ui-listview').removeClass('ui-btn-up-a ui-btn-up-b ui-btn-up-c ui-btn-up-d ui-btn-up-e ui-btn-hover-a ui-btn-hover-b ui-btn-hover-c ui-btn-hover-d ui-btn-hover-e').addClass('ui-btn-up-' + newTheme ).attr('data-theme', newTheme );
$.mobile.activePage.find('.ui-header, .ui-footer').removeClass('ui-bar-a ui-bar-b ui-bar-c ui-bar-d ui-bar-e').addClass('ui-bar-' + newTheme ).attr('data-theme', newTheme );
$.mobile.activePage.removeClass('ui-body-a ui-body-b ui-body-c ui-body-d ui-body-e').addClass('ui-body-' + newTheme ).attr('data-theme', newTheme ); 
```

这是我的工作示例：http: [//jsfiddle.net/Gajotres/8uac7/](http://jsfiddle.net/Gajotres/8uac7/)。您应该评论上面的代码以查看差异。

# xml - 如何在flex中的TextArea中显示XML格式数据

> ID：14051451
> 
> 赞同：0
> 
> 时间：2012-12-27T08:11:35.567
> 
> 标签：xml, apache-flex

我有一个返回 XML 树结构的函数，我希望在 flex 的 TextArea 中显示整个树。这是代码：

```
 <mx:Button id="button1" label="Submit" width="100" click="mainTxt.text=myemp.input_data(args);" /> 
```

input_data() 返回 XML 树。如何将其发送到 mainTxt TextArea ？我也尝试过使用 mainTxt.html。

-BHU

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:20:30.650

```
<fx:Script>
    <![CDATA[
    protected function onButton1ClickHandler(event:MouseEVent):void
    {
        trace(myemp.input_data(args));
        var xmlStr:XML = myemp.input_data(args);
        mainTxt.text = xmlStr.toString();
    }    
]]>
</fx:Script>

<mx:Button id="button1"
           label="Submit"
           width="100"
           click="onButton1ClickHandler(event)" /> 
```

首先检查这个**trace()**如果这将打印正确的 XML-tree 那么你就有答案了。

愿这会有所帮助...

# python - Python，发送主题中带有特殊字符的电子邮件

> ID：14051452
> 
> 赞同：3
> 
> 时间：2012-12-27T08:11:41.600
> 
> 标签：python, email, encoding

我正在从 Python (Django) 发送电子邮件。电子邮件主机是“smtp.gmail.com”。当我使用 localhost 时，我可以在电子邮件主题中使用特殊字符。但是，现在我正在从服务器（webfaction）尝试我收到一个错误“UnicodeDecodeError：'ascii'编解码器无法解码字节......”在电子邮件模板中我使用十六进制代码，但它们不适用于主题（它们没有被翻译）。该怎么办？

```
# coding=UTF-8
...

subject = "æøå"
c = {}
t_html = loader.get_template(template_html)
t_text = loader.get_template(template_txt) 
e = EmailMultiAlternatives(subject, t_text.render(Context(c)), from_email, [to_email])
e.attach_alternative(t_html.render(Context(c)), "text/html")
e.send() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T08:14:44.320

如果您使用的是 Python 2，我建议您在字符串前面加上`u`：

```
subject = u"æøå" 
```

（我知道`coding`“魔术评论”应该自动处理，但根据经验我可以说它并不总是有效）

**更新：**为了将来参考，确保生产环境支持开发中使用的相同编码也很重要。它应该没问题`UTF-8`（它在所有地方都受支持），但是如果您要在 Windows ( `Cp1252`) 下编辑源文件，然后部署到 UNIX 服务器中，Python 解释器可能无法读取它们，无论`coding`.

# c# - __RequestVerificationToken 有什么用？

> ID：14051456
> 
> 赞同：26
> 
> 时间：2012-12-27T08:12:12.627
> 
> 标签：c#, asp.net-mvc-4

我们有一个 .NET C# MVC 应用程序，其中包含一些可以正常工作的表单。现在我们还有一个 ASP Classic vbscript 页面需要与这些表单进行交互，但是使用常规帖子我们得到一个错误，说 __RequestVerificationToken 没有设置。

因此，我们请求页面，然后将隐藏输入中的令牌和 cookie 存储在一个变量中，并通过 POST 请求将其发送很长。它有效。

但是看到绕过它这么简单，它到底有什么用呢？它几乎没有提供任何保护。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-27T08:18:36.527

这是一个防伪令牌（防止 CSRF 攻击）。它保证海报是获得表格的人。

它可以防止任何人伪造链接并由高级用户激活。

# iphone - 关闭或离开视图控制器时如何将数据插入sqlite3数据库？

> ID：14051457
> 
> 赞同：1
> 
> 时间：2012-12-27T08:12:12.787
> 
> 标签：iphone, objective-c, ios, ios6

我已经在 sqlite3 中创建了一个表。现在，当我关闭或离开包含“UILabel”的“视图控制器”时，我想将最后一个数据显示保存在“UILabel”上。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:15:52.373

当您关闭或离开时，会调用两个函数`viewController`

```
- (void)viewWillDisappear:(BOOL)animated; // Called when the view is dismissed, covered or otherwise hidden. Default does nothing
- (void)viewDidDisappear:(BOOL)animated;  // Called after the view was dismissed, covered or otherwise hidden. Default does nothing 
```

希望这可以帮助你..

# apache - .htaccess 重写到子文件夹

> ID：14051466
> 
> 赞同：6
> 
> 时间：2012-12-27T08:12:37.033
> 
> 标签：apache, .htaccess, apache2, rewrite

**目标：**

在共享 Apache 2.2 机器上的虚拟服务器中，我尝试配置`.htaccess`为无缝表示文件夹子文件夹中的`public_html`文件，就好像它们在根目录中一样。

也就是说，`http://www.example.com/home`当*用户*访问`http://www.example.com/subfolder/home`.

我的`.htaccess`文件如下所示：

```
RewriteEngine on
RewriteRule !^subfolder/ subfolder%{REQUEST_URI} 
```

**问题：**

这可行，*但*它会重写客户端浏览器中的 URL。

也就是说，用户`http://www.example.com/subfolder/home/`在他们的地址栏中看到，但我只需要他们看到`http://www.example.com/home`

我的理解是，我所做的`.htaccess`应该导致最终用户不可见的“内部”重写，但似乎我正在接受“外部”重写。

我究竟做错了什么？

* * *

**[编辑] 附加细节：**

当用户访问`www.example.com`时，它*会*按预期工作，因为用户会看到从 提供的主页内容`public_html/subfolder/default.html`，并且浏览器地址栏会显示`www.example.com`。

但是，当用户单击该主页上的“联系”链接（编码`href="/contact"`）时，它会到达那里，但会显示`www.example.com/subfolder/contact/`在浏览器地址栏中，就好像它已经完成了重定向而不是内部重写。

如果我然后删除`/subfolder`地址栏中的文本并强制重新加载页面，它可以工作 - 它加载正确的内容，地址栏仍然存在`www.example.com/contact/`

*实施说明：*如果有帮助，`public_html/subfolder/contact`是一个包含文件的文件*夹*`default.html`。

**另一个观察：**

如果我打开一个新选项卡并输入`www.example.com/contact/` *（注意尾部斜杠）*，它会按预期工作。

但是，如果我打开一个新选项卡并键入`www.example.com/contact` *(没有尾部斜杠)*，它会重定向到`www.example.com/subfolder/contact/`，这是我不想要的。

我觉得这应该告诉我出了什么问题，但答案仍然不知道。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T21:10:01.633

发生这种情况的原因是因为`mod_dir`。它有一个名为的指令`DirectorySlash`，当它认为对目录发出请求并且尾部斜杠丢失到带有尾部斜杠的相同 URI 时，它会重定向浏览器。问题是 mod_dir 和 mod_rewrite 在 URL/文件映射管道中的不同位置应用。所以 mod_rewrite 会在某一时刻破坏 URI，然后当 mod_dir 执行它的操作时，重写的 URI 会被重定向，因此浏览器地址栏中的 URL 会更改为包含“隐藏”的内部重写。

你可以在这里做几件事。

1.  您可以在 mod_rewrite 中自己强制使用尾部斜杠，因此在URI 到达 mod_dir*之前，浏览器会被重定向以包含尾部斜杠。*这意味着您的所有 URL`/home`都`/contact`将包含一个尾部斜杠，如果缺少一个，您的重写代码将重定向并添加一个。像这样，*在*您当前的规则之上，以便首先应用它：

    ```
    RewriteCond %{REQUEST_URI} !^/subfolder
    RewriteCond %{DOCUMENT_ROOT}/subfolder%{REQUEST_URI} !-f
    RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
    ```

2.  关闭`DirectorySlash`以便 mod_dir 停止执行此重定向。您可以简单地包含`DirectorySlash Off`在您的 htaccess 文件的顶部。但是，这里的缺点是缺少尾部斜杠时[可能存在信息泄露安全问题。](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)

* * *

编辑：

为了使用没有尾部斜杠的索引文件，您需要映射到它。尝试将您的规则更改为：

```
 RewriteEngine On
    RewriteCond %{REQUEST_URI} !^/subfolder
    RewriteCond %{DOCUMENT_ROOT}/subfolder%{REQUEST_URI} -d
    RewriteRule ^(.*?)/?$ /subfolder/$1/ [L]

    RewriteCond %{REQUEST_URI} !^/subfolder
    RewriteRule ^(.*)$ /subfolder/$1 [L] 
```

# sql - 如何将表中的每一行与下面的行进行比较

> ID：14051467
> 
> 赞同：1
> 
> 时间：2012-12-27T08:12:51.370
> 
> 标签：sql, sql-server, tsql

我如何将一行中的值与下面的值进行比较 .. 这适用于所有记录

```
EX.
Name      Age
Ahmed     20
Marko     22
jouhn     18
mira      30
joi       19 
```

所以我想要结果：

```
Ahmed < Marko
Marko > jouhn
Jouhn < Mira
Mira  > joi 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T08:21:50.990

## [SQLFiddle 演示](http://sqlfiddle.com/#!3/459c0/10)

```
with t1 as
(
  select t.*, 
   row_number() over (order by id) rn
  from t
 )

select t1.Name as Name1, 
       case when t1.Age>t2.Age 
          then '>'
            when t1.Age<t2.Age 
          then '<'
            else '='
       end as SIGN,
       t2.Name as Name2 
  from t1
  join t1 as t2 on t1.rn+1 = t2.id ; 
```

# javascript - XSLT：提供不同的数据视图

> ID：14051468
> 
> 赞同：2
> 
> 时间：2012-12-27T08:12:52.447
> 
> 标签：javascript, html, css, xml, xslt

这是一个“最佳设计方法”问题，而不是编码问题。我正在寻找在 XSLT 中过滤数据的最佳方法。我有一个由 XML、XSLT 和 CSS 生成的博客。每篇博文都属于一个类别 - 第 1 周、第 2 周或第 3 周。

![在此处输入图像描述](../Images/76e82b5b2212e89d376c85dcc7877ddf.png)

目前，我在旁边显示所有类别。当我单击第 1 周时，我只想显示第 1 周的帖子。在没有每周的 XML 文件的情况下，有没有办法做到这一点？

作为副业......这是 XSLT 可以做什么的演示。像 php 这样的东西会更适合这项工作，但这需要使用 XSLT/HTML/JavaScript/CSS 来完成。

如果问题不清楚，请提出，我会尽力改写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:50:23.213

可能有很多方法。

最快的应该是：给每个帖子一个与星期相关的类名（例如`post week1`，`post week2`等）

当您单击侧面的链接时，还为所有帖子的公共锚点提供一个与单击的周相关的类，例如`posts week1`

你现在只需要一点 css：

```
.posts .post{
  display:none;
}
.posts.week1 .post.week1,
.posts.week2 .post.week2,
.posts.week3 .post.week3{
  display:block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:22:14.667

如果您想演示 xslt 可以做什么，也许像**//WEEKS[.="WEEK1"]**这样的简单 xpath 查询就足够了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:39:23.733

这是 XLink 派上用场的地方，不幸的是浏览器支持仍然很可怜。

我会尝试用 JS 和 XPath 预处理 XML，所以它只包含你想要的那一周。然后只将那个 XML 发送到 中`XSLTProcessor()`，所以它只会输出那些。不过，您可能必须在 XSL 之外组装整个 HTML 文档 - 不确定。

您还可以[将 XML 参数作为参数发送到处理器](https://stackoverflow.com/questions/3251149/how-to-pass-parameters-to-xslt)中，并在您的转换中使用它们。

但最后，如果您只想显示其中的一小部分，那么通过网络发送整个 XML 仍然是低效的。因此，仅生成实际需要的 XML 的服务器端解决方案会更好。

最后但同样重要的是，也许看看[Saxon-CE](http://www.saxonica.com/ce/index.xml)。

# android - 如何在android中使用SAX解析器解析具有相同标签的XML？

> ID：14051469
> 
> 赞同：1
> 
> 时间：2012-12-27T08:12:59.070
> 
> 标签：android, saxparser

我正在解析在不同元素下具有相同标签的 XML 我想解析这个 XML 并保存到相应的 Hash-Map 中，然后保存到数据库中。我在解析具有我想要解析的常见 XML 字段的元素时遇到问题是

```
 <NewDataSet>
     <Login>
    <LoginId>14</LoginId>
    <CompanyId>2</CompanyId>
    <UserId>14</UserId>
    <LoginName>deo5</LoginName>
    <UserPassword>Y2NzYTIwMTI=</UserPassword>
    <CreatedBy>14</CreatedBy>
    <CreatedDate>2012-04-19T17:54:57.013+05:30</CreatedDate>
    <LastLogin>2012-04-19T17:54:57.013+05:30</LastLogin>
    <Status>1</Status>
    <Approved_Status>true</Approved_Status>
  </Login>
  <Login>
    <LoginId>15</LoginId>
    <CompanyId>2</CompanyId>
    <UserId>15</UserId>
    <LoginName>Philip</LoginName>
    <UserPassword>cGhpbGlwMTIz</UserPassword>
    <CreatedBy>15</CreatedBy>
    <CreatedDate>2012-05-08T09:02:40.53+05:30</CreatedDate>
    <LastLogin>2012-05-08T09:02:40.53+05:30</LastLogin>
    <Status>1</Status>
    <Approved_Status>true</Approved_Status>
  </Login>
  <Login>
    <LoginId>16</LoginId>
    <CompanyId>2</CompanyId>
    <UserId>16</UserId>
    <LoginName>sagar</LoginName>
    <UserPassword>c2FnYXIyMDEy</UserPassword>
    <CreatedBy>16</CreatedBy>
    <CreatedDate>2012-11-27T17:57:11.433+05:30</CreatedDate>
    <LastLogin>2012-11-27T17:57:11.433+05:30</LastLogin>
    <Status>1</Status>
    <Approved_Status>true</Approved_Status>
  </Login>
  <ProgramFamerTable>
    <ProgramFarmer_ID>1</ProgramFarmer_ID>
    <Program_ID>7</Program_ID>
    <Farmer_Code>INGUJUMAKO-2012-001</Farmer_Code>
    <Company_ID>2</Company_ID>
    <Organization_ID>1</Organization_ID>
    <Language_ID>1</Language_ID>
    <Active_Status>true</Active_Status>
    <Created_By>1</Created_By>
    <Created_Date>2012-04-24T10:30:53.823+05:30</Created_Date>
    <Delete_Status>false</Delete_Status>
    <Approved_Status>true</Approved_Status>
  </ProgramFamerTable>
  <ProgramFamerTable>
    <ProgramFarmer_ID>2</ProgramFarmer_ID>
    <Program_ID>7</Program_ID>
    <Farmer_Code>INGUJUMAKO-2012-002</Farmer_Code>
    <Company_ID>2</Company_ID>
    <Organization_ID>1</Organization_ID>
    <Language_ID>1</Language_ID>
    <Active_Status>true</Active_Status>
    <Created_By>1</Created_By>
    <Created_Date>2012-04-24T10:30:53.833+05:30</Created_Date>
    <Delete_Status>false</Delete_Status>
    <Approved_Status>true</Approved_Status>
  </ProgramFamerTable>
  <ProgramFamerTable>
    <ProgramFarmer_ID>3</ProgramFarmer_ID>
    <Program_ID>7</Program_ID>
    <Farmer_Code>INGUJUMAKO-2012-003</Farmer_Code>
    <Company_ID>2</Company_ID>
    <Organization_ID>1</Organization_ID>
    <Language_ID>1</Language_ID>
    <Active_Status>true</Active_Status>
    <Created_By>1</Created_By>
    <Created_Date>2012-04-24T10:30:53.837+05:30</Created_Date>
    <Delete_Status>false</Delete_Status>
    <Approved_Status>true</Approved_Status>
  </ProgramFamerTable>
    </NewDataSet> 
```

我的 XML 处理程序如下...

```
 public class NewMyXMLHandler extends DefaultHandler
{
    String TAG = "Inside Login Element";

    //XML Fields of login file

    boolean in_Loginmain;

    boolean in_Login;
    boolean in_LoginId;
    boolean in_CompanyId;
    boolean in_UserId;
    boolean in_LoginName;
    boolean in_UserPassword;
    boolean in_CreatedBy;
    boolean in_CreatedDate;
    boolean in_UpdatedBy;
    boolean in_LastLogin;
    boolean in_Status;

    //For Database Insertion

    private static String TABLE_NAME = "AD_Login";
    private static String TABLE_NAME1 = "AD_ProgramFarmer";
    private SQLiteDatabase myDataBase;

    boolean in_ProgramFamerTable;
    boolean in_ProgramFarmer_ID;
    boolean in_Program_ID;
    boolean in_Farmer_Code;
    boolean in_Company_ID;
    boolean in_Organization_ID;
    boolean in_Language_ID;
    boolean in_Active_Status;
    boolean in_Created_By;
    boolean in_Created_Date;
    boolean in_Delete_Status;
    boolean in_Approved_Status;

    HashMap<String,String> map;
    //public static ArrayList<HashMap<String,String>> list;

    //For Farmer Registration

    HashMap<String,String> farmerMap;
    //public static ArrayList<HashMap<String,String>> faremerlist;

    public NewMyXMLHandler(Context applicationContext) {
        // TODO Auto-generated constructor stub
        try{
        //myDataBase.beginTransaction();
        DatabaseHelper dh = new DatabaseHelper(applicationContext);

        dh.createDataBase();
        dh.openDataBase();

        myDataBase= dh.getWritableDatabase();

        }catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException
    {
        // TODO Auto-generated method stub
        super.characters(ch, start, length);
        String data = new String(ch, start, length);

            if (in_LoginId)
            {
                map.put("LoginId", data);
                Log.i("", "contactid = " + data);
            }
            if (in_CompanyId)
            {
                map.put("CompanyId", data);
                Log.i("", "contact_firstname = " + data);
            }
            if (in_UserId)
            {
                map.put("UserId", data);
                Log.i("", "contact_lastname = " + data);
            }
            if (in_LoginName)
            {
                map.put("LoginName", data);
                Log.i("", "contact_email = " + data);
            }
            if (in_UserPassword)
            {
                map.put("UserPassword", data);
                Log.i("", "contact_thumbnail = " + data);
            }
            if (in_CreatedBy)
            {
                map.put("CreatedBy", data);
                Log.i("", "contact_thumbnail = " + data);
            }
            if (in_CreatedDate)
            {
                map.put("CreatedDate", data);
                Log.i("", "contact_thumbnail = " + data);
            }
            if (in_UpdatedBy)
            {
                map.put("UpdatedBy", data);
                Log.i("", "contact_thumbnail = " + data);
            }
            if (in_LastLogin)
            {
                map.put("LastLogin", data);
                Log.i("", "contact_thumbnail = " + data);
            }
            if (in_Status)
            {
                map.put("Status", data);
                Log.i("", "contact_thumbnail = " + data);
            }
            if (in_Approved_Status)
            {
                map.put("Approved_Status", data);
                Log.i("", "Approved_Status = " + data);
            }
            //Program Farmer Started Here......
            if (in_ProgramFarmer_ID)
            {
                farmerMap.put("ProgramFarmer_ID", data);
                Log.i("", "ProgramFarmer_ID = " + data);
            }
            if (in_Program_ID)
            {
                farmerMap.put("Program_ID", data);
                Log.i("", "Program_ID = " + data);
            }
            if (in_Farmer_Code)
            {
                farmerMap.put("Farmer_Code", data);
                Log.i("", "Farmer_Code = " + data);
            }
            if (in_Company_ID)
            {
                farmerMap.put("Company_ID", data);
                Log.i("", "Company_ID = " + data);
            }
            if (in_Organization_ID)
            {
                farmerMap.put("Organization_ID", data);
                Log.i("", "Organization_ID = " + data);
            }
            if (in_Language_ID)
            {
                farmerMap.put("Language_ID", data);
                Log.i("", "Language_ID = " + data);
            }
            if (in_Active_Status)
            {
                farmerMap.put("Active_Status", data);
                Log.i("", "Active_Status = " + data);
            }
            if (in_Created_By)
            {
                farmerMap.put("Created_By", data);
                Log.i("", "Created_By = " + data);
            }
            if (in_Created_Date)
            {
                farmerMap.put("Created_Date", data);
                Log.i("", "Created_Date = " + data);
            }
            if (in_Delete_Status)
            {
                farmerMap.put("Delete_Status", data);
                Log.i("", "Delete_Status = " + data);
            }
            /*if (in_Approved_Status)
            {
                farmerMap.put("Approved_Status", data);
                Log.i("", "Approved_Status = " + data);
            }*/

    }

    @Override
    public void endDocument() throws SAXException
    {
        // TODO Auto-generated method stub
        super.endDocument();
        Log.i("", "endDocument");
        myDataBase.close();
        //myDataBase.endTransaction();
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException
    {
        // TODO Auto-generated method stub
        super.endElement(uri, localName, qName);
        Log.i("", "endElement");
        if (localName.equals("Loginmain"))
        {
            in_Loginmain = false;

        } else if (localName.equals("Login"))
        {
            in_Login = false;
            //list.add(map); 

            Log.v(TAG, "Value of Login Element=="+map);

            //insertLoginData();

        } else if (localName.equals("LoginId"))
        {
            in_LoginId = false;
            //list.add(map);

        } else if (localName.equals("CompanyId"))
        {
            in_CompanyId = false;

        } else if (localName.equals("UserId"))
        {
            in_UserId = false;

        } else if (localName.equals("LoginName"))
        {
            in_LoginName = false;

        } else if (localName.equals("UserPassword"))
        {
            in_UserPassword = false;

        } else if (localName.equals("CreatedBy"))
        {
            in_CreatedBy = false;

        }else if (localName.equals("CreatedDate"))
        {
            in_CreatedDate = false;

        }else if (localName.equals("UpdatedBy"))
        {
            in_UpdatedBy = false;

        }
        else if (localName.equals("LastLogin"))
        {
            in_LastLogin = false;

        }else if (localName.equals("Status"))
        {
            in_Status = false;

        }else if (localName.equals("Approved_Status"))
        {
            in_Approved_Status = false;

        }//Farmer Program.........
         else if (localName.equals("ProgramFamerTable"))
        {
            in_ProgramFamerTable = false;
            Log.v(TAG, "Values of ProgramFarmerMap==="+farmerMap);
            //insertProgramFarmerData();

        } else if (localName.equals("ProgramFarmer_ID"))
        {
            in_ProgramFarmer_ID = false;

            //list.add(map);

        } else if (localName.equals("Program_ID"))
        {
            in_Program_ID = false;

        } else if (localName.equals("Farmer_Code"))
        {
            in_Farmer_Code = false;

        } else if (localName.equals("Company_ID"))
        {
            in_Company_ID = false;

        } else if (localName.equals("Organization_ID"))
        {
            in_Organization_ID = false;

        } else if (localName.equals("Language_ID"))
        {
            in_Language_ID = false;

        }else if (localName.equals("Active_Status"))
        {
            in_Active_Status = false;

        }else if (localName.equals("Created_By"))
        {
            in_Created_By = false;

        }
        else if (localName.equals("Created_Date"))
        {
            in_Created_Date = false;

        }else if (localName.equals("Delete_Status"))
        {
            in_Delete_Status = false;

        }else if (localName.equals("Approved_Status"))
        {
            in_Approved_Status = false;

        }

    }

    private void insertProgramFarmerData() {
        // TODO Auto-generated method stub

        try{

            ContentValues cvprogramfarmer = new ContentValues();

            if (farmerMap.get("ProgramFarmer_ID") != null)
            {
                cvprogramfarmer.put("ProgramFarmer_ID",farmerMap.get("ProgramFarmer_ID").toString());
            }
            if (farmerMap.get("Program_ID") != null)
            {
                cvprogramfarmer.put("Program_ID", farmerMap.get("Program_ID").toString());
            }
            if (farmerMap.get("Farmer_Code") != null)
            {
                cvprogramfarmer.put("Farmer_Code", farmerMap.get("Farmer_Code").toString());
            }
            if (farmerMap.get("Company_ID") != null)
            {
                cvprogramfarmer.put("Company_ID", farmerMap.get("Company_ID").toString());
            }
            if (farmerMap.get("Organization_ID") != null)
            {
                cvprogramfarmer.put("Organization_ID", farmerMap.get("Organization_ID").toString());
            }if (farmerMap.get("Language_ID") != null)
            {
                cvprogramfarmer.put("Language_ID", farmerMap.get("Language_ID").toString());
            }
            if (farmerMap.get("Active_Status") != null)
            {
                cvprogramfarmer.put("Active_Status", farmerMap.get("Active_Status").toString());
            }
            if (farmerMap.get("Created_By") != null)
            {
                cvprogramfarmer.put("Created_By", farmerMap.get("Created_By").toString());
            }
            if (farmerMap.get("Delete_Status") != null)
            {
                cvprogramfarmer.put("Delete_Status", farmerMap.get("Delete_Status").toString());
            }
            if (farmerMap.get("Created_Date") != null)
            {
                cvprogramfarmer.put("Created_Date", farmerMap.get("Created_Date").toString());
            }
            if (farmerMap.get("Approved_Status") != null)
            {
                cvprogramfarmer.put("Approved_Status", farmerMap.get("Approved_Status").toString());
            }

            Log.v(TAG, "Content Values=="+cvprogramfarmer);

            //myDataBase.execSQL("SELECT * FROM AD_Login");

            Log.v(TAG, "Values are inserting");

            myDataBase.insert(TABLE_NAME1, null,cvprogramfarmer);

            Log.v(TAG, "Values are inserted");

            //cvlogin=null;

            Log.v(TAG, "Values after NULL "+cvprogramfarmer);

} catch (Exception e) {
    // TODO: handle exception
    e.printStackTrace();

}

    }

    private void insertLoginData() {
        // TODO Auto-generated method stub
        try{

            ContentValues cvlogin = new ContentValues();

                if (map.get("LoginId") != null)
                {
                    cvlogin.put("LoginId", map.get("LoginId").toString());
                }
                if (map.get("CompanyId") != null)
                {
                    cvlogin.put("CompanyId", map.get("CompanyId").toString());
                }
                if (map.get("UserId") != null)
                {
                    cvlogin.put("UserId", map.get("UserId").toString());
                }
                if (map.get("LoginName") != null)
                {
                    cvlogin.put("LoginName", map.get("LoginName").toString());
                }
                if (map.get("UserPassword") != null)
                {
                    cvlogin.put("UserPassword", map.get("UserPassword").toString());
                }
                /*if (map.get("CreatedBy") != null)
                {
                    cvlogin.put("CreatedBy", map.get("CreatedBy").toString());
                }
                if (map.get("CreatedDate") != null)
                {
                    cvlogin.put("CreatedDate", map.get("CreatedDate").toString());
                }
                if (map.get("UpdatedBy") != null)
                {
                    cvlogin.put("UpdatedBy", map.get("UpdatedBy").toString());
                }*/
                if (map.get("LastLogin") != null)
                {
                    cvlogin.put("LastLogin", map.get("LastLogin").toString());
                }
                if (map.get("Status") != null)
                {
                    cvlogin.put("Status", map.get("Status").toString());
                }

                Log.v(TAG, "Values"+cvlogin);

                //myDataBase.execSQL("SELECT * FROM AD_Login");

                Log.v(TAG, "Values are inserting");

                myDataBase.insert(TABLE_NAME, null,cvlogin);

                Log.v(TAG, "Values are inserted");

                //cvlogin=null;

                Log.v(TAG, "Values after NULL "+cvlogin);

    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }

    }
    @Override
    public void startDocument() throws SAXException
    {
        // TODO Auto-generated method stub
        super.startDocument();
        Log.i("", "startDocument");
        //list = new ArrayList<HashMap<String,String>>();

        //faremerlist = new ArrayList<HashMap<String,String>>();
    }
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException
    {

        // TODO Auto-generated method stub
        super.startElement(uri, localName, qName, attributes);
        Log.i("", "startElement");

        if (localName.equals("Loginmain"))
        {
            in_Loginmain = true;
        } else if (localName.equals("Login"))
        {
            in_Login = true;
            map = new HashMap<String, String>();

        } else if (localName.equals("LoginId"))
        {
            in_LoginId = true;
            //list.add(map);

        } else if (localName.equals("CompanyId"))
        {
            in_CompanyId = true;

        } else if (localName.equals("UserId"))
        {
            in_UserId = true;

        } else if (localName.equals("LoginName"))
        {
            in_LoginName = true;

        } else if (localName.equals("UserPassword"))
        {
            in_UserPassword = true;

        } else if (localName.equals("CreatedBy"))
        {
            in_CreatedBy = true;

        }else if (localName.equals("CreatedDate"))
        {
            in_CreatedDate = true;

        }else if (localName.equals("UpdatedBy"))
        {
            in_UpdatedBy = true;

        }
        else if (localName.equals("LastLogin"))
        {
            in_LastLogin = true;

        }else if (localName.equals("Status"))
        {
            in_Status = true;

        }
        else if (localName.equals("Approved_Status"))
        {
            in_Approved_Status = true;

        }//Farmer Program............
        else if (localName.equals("ProgramFamerTable"))
        {
            in_ProgramFamerTable = true;
            farmerMap = new HashMap<String, String>();

        } else if (localName.equals("ProgramFarmer_ID"))
        {
            in_ProgramFarmer_ID = true;
            //list.add(map);

        } else if (localName.equals("Program_ID"))
        {
            in_Program_ID = true;

        } else if (localName.equals("Farmer_Code"))
        {
            in_Farmer_Code = true;

        } else if (localName.equals("Company_ID"))
        {
            in_Company_ID = true;

        } else if (localName.equals("Organization_ID"))
        {
            in_Organization_ID = true;

        } else if (localName.equals("Language_ID"))
        {
            in_Language_ID = true;

        }else if (localName.equals("Active_Status"))
        {
            in_Active_Status = true;

        }else if (localName.equals("Created_By"))
        {
            in_Created_By = true;

        }
        else if (localName.equals("Created_Date"))
        {
            in_Created_Date = true;

        }else if (localName.equals("Delete_Status"))
        {
            in_Delete_Status = true;

        }else if (localName.equals("Approved_Status"))
        {
            in_Approved_Status = true;

        }

    }
} 
```

# hibernate - 如何检查一个集合的所有元素是否存在于 HQL 的另一个集合中

> ID：14051477
> 
> 赞同：2
> 
> 时间：2012-12-27T08:14:06.307
> 
> 标签：hibernate, collections, mapping, hql

我有一个具有技能实体映射集合的课程实体。现在我想通过 HQL 检查 course.skills 集合的所有元素是否存在于另一个集合中，我将在查询中将其作为参数传递。

我可以使用 IN 语句检查一个元素是否已经在另一个集合中，但我似乎无法弄清楚如何检查是否所有元素都存在。

希望有人可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:28:53.710

我很想为这个问题找到一个更优雅的解决方案，但我用这样的查询来解决它：

```
select course from Course course
where not exists (
    select skill.id from Skill skill
    where skill.id in :setOfSkillIdsToHave
    and skill.id not in (
        select courseSkill.id
        from Course course2
        inner join course2.skills courseSkill
        where course2.id = course.id)) 
```

或者，

```
select course from Course course
where :numberOfSkillsToHave = (
    select count(skill.id)
    from Course course2
    inner join course2.skills courseSkill
    where courseSkill.id in :setOfSkillIdsToHave
    and course2.id = course.id) 
```

# jquery - $(sel).html 和 dom.innerHTML 之间的区别

> ID：14051479
> 
> 赞同：3
> 
> 时间：2012-12-27T08:14:24.187
> 
> 标签：jquery, html, dom

使用 jQuery ，我可以`$(sel).html(html)`用来生成一个 html 区域。

如果没有 jquery ，我也可以做同样的事情，但`dom.innerHTML = html;`
我也发现`$(sel).html()`它比 慢`dom.innerHTML`，但为什么呢？

`$(sel).html`和 和有什么区别`dom.innerHTML`？
使用`dom.innerHTML`替换安全`$(sel).html`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T08:19:31.333

设置 HTML`.html()`提供了一些适当的内务处理，以防止在使用其他 jQuery 功能时发生内存泄漏，然后再设置`.innerHTML`.

例如，如果您`.data()`在一个元素上使用并且您指定`.innerHTML`了您在其上使用的对象的父级`.data()`，那么`.html()`将清理`.data()`与要替换的元素关联的元素。如果您使用`.innerHTML`，这些`.data()`元素将被孤立，并且在您离开页面之前永远不会被清理（短期内存泄漏）。与已删除对象上的事件处理程序相关联的一些 jQuery 数据也是如此。

在 jQuery 中编程最安全的方法是在删除使用 jQuery 的元素时使用`.remove()`and （或其他类似的 jQuery 函数）而不是原生 DOM 函数。`.html()`

`.html()`可能会更慢，因为它做得更多（如果使用其他 jQuery 功能，其中一些是有利的）。

实际上，如果`.innerHTML`直接在使用其他 jQuery 功能的元素的父元素上使用可能发生的内存泄漏通常不是问题。它们可能有意义的地方是，如果您有与元素关联的大型数据结构（例如 in `.data()`），或者您创建和销毁大量元素，或者您打算让您的页面运行很长时间（例如单页应用程序）。因此，如果您想安全起见，请坚持使用 jQuery 方法来处理任何可以删除或替换元素的内容。

这是一个简单的内存泄漏示例：

```
<div id="container"><span id="whatever">foo</span></div> 
```

```
$("#whatever").data("somedata", "really long string");
document.getElementById("container").innerHTML = "<span>new text</span>"; 
```

这会导致第一行代码中的信息集泄漏，`.data()`因为 jQuery 从来没有机会清理与现在已从 DOM 中删除的 #whatever 对象关联的数据，但 jQuery 从未看到您将其删除。

然而，这不会以这种方式泄漏：

```
<div id="container"><span id="whatever">foo</span></div> 
```

```
$("#whatever").data("somedata", "really long string");
$("#container").html("<span>new text</span>"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T08:18:31.360

jQuery`.innerHTML`在后台使用，所以如果你已经有一个 DOM 元素，并且你不需要提供[额外的功能](http://api.jquery.com/html/#html2)，`.html()`那么你可以安全地`.innerHTML`直接使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T08:19:01.700

正如 Jquery Docs 所说`.html()`

> 此方法**使用浏览器的 innerHTML 属性**。某些浏览器可能不会返回与原始文档中的 HTML 源完全相同的 HTML。例如，如果属性值仅包含字母数字字符，Internet Explorer 有时会省略属性值的引号。

我认为它只是变得更慢，因为 .html() 是更大的 Jquery 库的一部分，它可以让你做更多的事情。但是在这两种方法之间使用 . 没关系`innerHTML()`_`Jquery.html()`

[http://api.jquery.com/html/](http://api.jquery.com/html/)

# nhibernate - 使用 Windsor WCF 设施时使用 NHibernate 关闭延迟加载和会话

> ID：14051482
> 
> 赞同：0
> 
> 时间：2012-12-27T08:14:36.037
> 
> 标签：nhibernate, wcffacility

我遇到了这种情况。我看到这里的许多开发人员都面临着类似的情况，但我仍然想指出一些细节。

我有一个典型的情况，我有一组子对象。我正在向 user.contacts 属性添加更多联系人。在我对该属性的映射lazy=true 中。我从不离开调用存储库的方法的范围。

我正在使用温莎 WCF 设施。我的理解是，根据我的配置，会话将在请求的生命周期或 WcfSession 的生命周期内存活。

如果您需要更多信息，可以问我任何问题。

这是我的 wcf 服务中的 global.asax。

```
container = new WindsorContainer();

            container.AddFacility<AutoTxFacility>();
            container.Register(Component.For<INHibernateInstaller>().ImplementedBy<NHibernateInstaller>());
            container.AddFacility<NHibernateFacility>();
            container.AddFacility<WcfFacility>();

            container.Register(
                Component.For<IRegistrationService>().ImplementedBy<RegistrationService>().LifestylePerWcfSession(),
                Component.For<IAuthService>().ImplementedBy<AuthService>().LifestylePerWcfSession(),
                Component.For<IUserRepository>().ImplementedBy<UserRepository>().LifestylePerWcfSession(),
                Component.For<IActionWebService>().ImplementedBy<ActionWebService>().Named("ActionWebService").LifestylePerWcfSession(),
                Component.For<ISession>().LifeStyle.Singleton.UsingFactoryMethod(x => container.Resolve<ISessionManager>().OpenSession())); 
```

这是我的存储库...

```
public class UserRepository: IUserRepository
    {
        Func<ISession> session;

        public UserRepository(Func<ISession> _session)
        {
            session = _session;
        }

        [Transaction]
        public void Store(User user)
        {
            using (var tx = session())
            {
                tx.SaveOrUpdate(user);
            }
        }

        [Transaction]
        public User GetById(int id)
        {
            using (var tx=session())
            {
                return tx.Get<User>(id);
            }
        }
    } 
```

这是我对存储库的调用

```
public void AddContactsToUser(int userID, IList<User> contacts)
        {
            var user = userRepository.GetById(userID);

            if (user == null)
                throw new Exception("User does not exist");

            user.AddReferralToUser(contacts.ToArray());

            userRepository.Store(user);
        } 
```

这是我得到关于会话被关闭的错误的地方。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:44:31.377

您在 ISession 上设置了生活方式 Singleton。这似乎与您的错误不一致，但这不应该是 ...LifeStyle.PerWcfSession()... 还是 PerWcfOperation()？

会话功能是做什么的？（附带说明一下，一个常见的约定是将 _xxx 作为实例成员，将 xxx 作为函数参数。）

如果您在整个过程中确实拥有相同的会话，则对 Store/SaveOrUpdate 的调用是无用的，因为该对象已经被会话跟踪。

您在存储库方法上有事务。这不是问题，但要使事务有用，整个 AddContactsToUser()（或更多）应该在同一个事务中执行。

# html - 某些元素的宽度超出资源管理器窗口

> ID：14051488
> 
> 赞同：1
> 
> 时间：2012-12-27T08:15:00.247
> 
> 标签：html, css, responsive-design

我一直很难找出这个问题的解决方案。

首先，看看这个[页面](http://sharehomme.com/)

这是建立在响应式设计中的，因此当您缩小窗口时，一切都适合窗口。除了，右边的标签似乎*超过*了窗口的大小。此外，如果您比较顶部导航栏的填充，则左侧和右侧的填充量在应该保持不变时是不同的。

我正在同时使用 firefox 和 chrome 来调试这个问题。控制顶栏的 CSS 是

```
.fixed_pos {
    position: fixed;
    width: 85%;
} 
```

*并在application.css*中填充身体

 *```
body {  
    padding-right: 100px;
    padding-left: 100px;
    min-height: 100%;
} 
```

宽度设置为 85%，因为当我将其设置为 100% 时，导航栏也超过了窗口大小（即使在我去掉了所有的主体填充之后）。我希望导航栏和标签能很好地适应窗口而不是超过窗口宽度，但我似乎无法让它工作。

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:19:26.697

您在 body 上定义了 padding (100px)，然后在固定位置上定义了 100% 的宽度。所以你的 div 的大小是窗口的 100%，从位置 (100,0) 开始。这就是为什么它超过了窗口。

如果你想定义 100% 的剩余宽度，你必须声明你的 position 属性以保持在流中，例如：

```
.fixed_pos {
    position: static; // or nothing, or relative
    width: 85%;
} 
```*

# c# - 使用c#一键检查复选框列表中的所有复选框

> ID：14051494
> 
> 赞同：32
> 
> 时间：2012-12-27T08:15:38.570
> 
> 标签：c#, winforms, button, checkbox, checklistbox

我想要一个按钮，一旦单击，它将选中我的复选框中的所有复选框。我已经搜索了可能的答案，但我总是看到 asp.net 和 javascript 的示例。我在 c# 中使用 Windows 窗体。感谢您的任何回复。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-12-27T08:29:11.220

```
for (int i = 0; i < checkedListBox1.Items.Count; i++)
{
    checkedListBox1.SetItemChecked(i, true);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-17T10:26:13.893

在 C# 后面的代码中调用一个方法并编写这段代码，然后您就可以选中/取消选中它们。这将选中或取消选中复选框列表中存在的所有复选框。希望它可能会有所帮助。

```
foreach (ListItem item in CheckBoxList.Items)
{
    item.Selected = true;    
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-08T16:47:43.583

多次遇到这个问题后，我决定用扩展方法一劳永逸地为自己解决。

```
public static class Extensions
{
    public static void CheckAll(this CheckedListBox checkedListBox, bool check)
    {
        for (int i = 0; i < checkedListBox.Items.Count; i++)
            checkedListBox.SetItemChecked(i, check);
    }
} 
```

```
MyCheckedListBox.CheckAll(true); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-03T21:50:32.747

试试这个...

```
 protected void chk_CheckedChanged(object sender, EventArgs e)
    {
        CheckBox[] boxes = new CheckBox[7];
        boxes[0] = this.CheckBoxID;
        boxes[1] = this.CheckBoxID;
        boxes[2] = this.CheckBoxID;
        boxes[3] = this.CheckBoxID;
        boxes[4] = this.CheckBoxID;
        boxes[5] = this.CheckBoxID;
        boxes[6] = this.CheckBoxID; //you can add checkboxes as you want

        CheckBox chkBox = (CheckBox)sender;
        string chkID = chkBox.ID;
        bool allChecked = true;

        if (chkBox.Checked == false)
            allChecked = false;

        foreach (CheckBox chkBoxes in boxes)
        {
            if (chkBox.Checked == true)
            {
                if (chkBoxes.Checked == false)
                    allChecked = false;
            }
        }
        this.CheckBoxIDALL.Checked = allChecked; //Here place the main CheckBox
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T08:33:57.893

试试这个：

```
 foreach(Control c in this.Controls) {
    if (c.GetType() == typeof(CheckBox)) {
       ((CheckBox)c).Checked = true;
    }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-20T14:22:28.423

我所做的是将它放在 tableLayoutPanel 中，我修复了第三列中的所有复选框并添加了事件：

```
private void cbCheckAllCHECKBOXs_CheckedChanged(objects sender, EventArgs e)
{
    if (cbCheeckAllCHECKBOXs.Checked)
    {
        for (int i = 0; i < tlpCHECKBOXsControlPanel.RowCount; i++)
        {
            ((System.Windows.Forms.CheckBox)(tlpCHECKBOXsControlPanel.GetControlFromPosition(3, i))).Checked = true;
        }
    }
} 
```

# c# - asp .net 每天扫描一次文件夹

> ID：14051498
> 
> 赞同：1
> 
> 时间：2012-12-27T08:15:53.697
> 
> 标签：c#, asp.net

我在 asp .net 中有 Web 应用程序。我想每天扫描一次文件夹，以查找是否导入了新文件并进行一些处理。你建议我把这段代码放在哪里？我必须提供服务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T08:25:19.700

你拥有服务器吗？然后您可以制作一个 C# 控制台应用程序，只需将 exe 添加到您的计划任务列表中即可。

如果您不拥有服务器并且无法安排任务，那么只需制作一个 aspx 文件来完成这项工作......您每天调用一次您的 aspx 文件 URL。

使用一些在线调度系统，比如这个[http://http.sh/](http://http.sh/)，这样他们就会每天调用一次你的 aspx 批处理页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T08:21:03.690

您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类

此类侦听文件系统更改通知，并在目录或目录中的文件更改时引发事件。

```
using System;
using System.IO;
using System.Security.Permissions;

public class Watcher
{
    public static void Main()
    {
    Run();
    }

    [PermissionSet(SecurityAction.Demand, Name="FullTrust")]
    public static void Run()
    {
        string[] args = System.Environment.GetCommandLineArgs();

        // If a directory is not specified, exit program. 
        if(args.Length != 2)
        {
            // Display the proper way to call the program.
            Console.WriteLine("Usage: Watcher.exe (directory)");
            return;
        }

        // Create a new FileSystemWatcher and set its properties.
        FileSystemWatcher watcher = new FileSystemWatcher();
        watcher.Path = args[1];
        /* Watch for changes in LastAccess and LastWrite times, and
           the renaming of files or directories. */
        watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
           | NotifyFilters.FileName | NotifyFilters.DirectoryName;
        // Only watch text files.
        watcher.Filter = "*.txt";

        // Add event handlers.
        watcher.Changed += new FileSystemEventHandler(OnChanged);
        watcher.Created += new FileSystemEventHandler(OnChanged);
        watcher.Deleted += new FileSystemEventHandler(OnChanged);
        watcher.Renamed += new RenamedEventHandler(OnRenamed);

        // Begin watching.
        watcher.EnableRaisingEvents = true;

        // Wait for the user to quit the program.
        Console.WriteLine("Press \'q\' to quit the sample.");
        while(Console.Read()!='q');
    }

    // Define the event handlers. 
    private static void OnChanged(object source, FileSystemEventArgs e)
    {
        // Specify what is done when a file is changed, created, or deleted.
       Console.WriteLine("File: " +  e.FullPath + " " + e.ChangeType);
    }

    private static void OnRenamed(object source, RenamedEventArgs e)
    {
        // Specify what is done when a file is renamed.
        Console.WriteLine("File: {0} renamed to {1}", e.OldFullPath, e.FullPath);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:20:55.580

如果您需要从服务外部调用此代码将有意义，否则您可以在您的应用程序中使用它。对我来说这听起来像是计算机之间的同步问题，如果是这种情况，您可以找到很多解决方案，其中一些还不错，看看[这里](http://ehacker.com/372175/free-ways-to-synchronize-folders-between-computers)。

另一个想法是对您要检查的文件使用版本控制 (svn)，这将使您能够从命令行发现更改的文件，不确定这是否有帮助，但值得一提。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T08:34:13.210

我经常偶然发现这个问题。如果你问我，我会说一个“可怜的人”的解决方案是在应用程序启动时创建一些计时器并通过计时器事件进行工作。我只是不喜欢 Global 有这种状态的想法。

但是，如果您在旁边创建一个服务或控制台应用程序，您可能会在该服务中产生依赖关系，甚至可能是关键的业务逻辑。而且，如果您发现需要访问 Web 应用程序中的单例或其他数据，那么您将陷入困境。

所以我要做的是创建一个通用处理程序（.ashx），它像往常一样调用我的服务。它是网络项目的一部分。然后调用这个处理程序的调度完全不同的任务。创建一个只需在我的处理程序上执行一个简单的 http get 的 Windows 服务是微不足道的，而且不太可能改变。

# database-design - 关于不必要外键的数据库设计问题

> ID：14051504
> 
> 赞同：0
> 
> 时间：2012-12-27T08:16:43.607
> 
> 标签：database-design

假设我有三个表 - `Applicants`、`Groups`和`Seasons`。每个`Applicant`都有一个`group`，每个`group`都有一个`season`。

在另一边，每个`season`都有多个`groups`，每个`group`都有多个`applicants`。

从性能的角度来看，或者从任何其他角度来看，是否有任何问题可以直接链接`Applicant`到两者`Group`，`Season`即使您可以`season`通过`group`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:18:37.663

您可能会在读取模式下赢得一点不明显的时间，因为少了一次连接，而且您肯定会赢得更新异常，这将使您在更新数据库时的生活（编码）变得非常复杂，并且几乎肯定会大大降低性能当一个组“改变季节”时非常明显。

（如果组从不“改变季节”，那么您可能不应该在数据库中完全拥有季节。）

# android - 如何将数据发送到 Android 上创建的活动

> ID：14051507
> 
> 赞同：4
> 
> 时间：2012-12-27T08:17:16.397
> 
> 标签：android

我需要将活动 A 中的 EditText 的数据发送到活动 B。我尝试过：

```
Intent intent1=new Intent(A.this,B.class);
intent1.putExtra("fromA", "text");
startActivity(intent1); 
```

但它不起作用，因为活动 B`android:launchMode="singleTask"`之前已经创建并且已经创建。

不然怎么发数据？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T08:18:56.283

`onNewIntent()`您在该方法中覆盖`Activity B`并接收该`intent`方法。

就像下面的代码：

```
@Override
protected void onNewIntent(Intent i)
{
  String s = i.getStringExtra("fromA");
} 
```

在上面的代码中，您将获得`s`from 的值`Activity A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:26:49.127

你可以通过 iPhone 的方式做到这一点。创建一个类，您可以在开始新活动之前设置数据并从新活动访问相同的数据。

这将按如下方式工作

1.  有两个活动*FirstActivity*和*SecondActivity*
2.  要发送的数据是名字和姓氏

所以会有一类你将有数据变量

```
 public class DataTransporter{
      public static String firstName;
      public static String lastName;
 } 
```

在第一个活动中，您的代码将是

```
 DataTransporter.firstName = "abc";
 DataTransporter.lastName = "xyz"; 
 Intent intent = new Intent(FirstActivity.this,SecondActivity.class)
 startActivity(intent) 
```

在第二个活动中，您可以获取此数据

```
 @Override
 protected void onCreate(Bundle savedInstanceState){
   super.onCreate(savedInstanceState);
   String first = DataTransporter.firstName;
   String last = DataTransporter.lastName;
 } 
```

获取后，您可以从传输器类（如果需要）中删除数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:13:18.140

我更喜欢使用 SharedPreferences 来保存我的数据并在我的整个课程中使用它，而且它们将被保存到设备中，即使在应用程序被终止后也可以使用它们……这是一个示例！

```
//Some String that I should remember, I am just using the package name for now
String app = this.getPackageName();/*This is going to be used more like a file to save my stuff to*/
//Setting our sharedpreferences
SharedPreferences sha = sha = getApplicationContext().getSharedPreferences(app, SherlockActivity.MODE_PRIVATE);

String myString = "This is the String that you want to save so you can use among your classes"

//Now we call in an editor for that SharedPreferences so we can write and delete stuff from it .

Editor edit = sha.edit();

//Now we insert our String.
edit.putString("Something_you_can_remember" , myString);//You will need the "Something_you_can_remember" a few lines ahead , so remember it !
edit.apply(); //Or we can use edit.commit() , but I prefer apply()

//Now our String is saved ! So lets read it !

String whatever = sha.getString("Something_you_can_remember" , "The String incase myString didn't even exist , saves you from a NullPointerException");

//Here we go ! Now we have our String saved and can be readable among the classes ! 
```

此外，如果您想删除该字符串或您“放入”其中的任何内容，您可以致电

```
edit.remove("Something_you_can_remember"); //or edit.clear() to remove all the values stored ! 
```

希望这可以帮助 ！

# iphone - 应用程序处于后台状态时的 AVPlayer 处理缓冲区

> ID：14051515
> 
> 赞同：3
> 
> 时间：2012-12-27T08:18:25.723
> 
> 标签：iphone, background, buffer, avplayer

我今天早些时候在 Apple Developer 论坛上问过这个问题，但没有任何回应。但无论如何，我想在这里再问一次。

我正在制作一个音频直播应用程序。我面临的问题是，由于后台模式下缓冲区为空，音频流在暂停时无法恢复播放。

我正在使用 Reachability 来检查网络可达性，并使用 AVPlayer 来检查音频流。在调试模式下，当应用程序通过一些断点时，执行会冻结。当网络状态发生变化时，Reachability 没有任何响应。

有没有办法解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:04:35.357

检查[mattgallagher/AudioStreamer](https://github.com/mattgallagher/AudioStreamer)链接是否最`library`适合`audio streaming`

请参阅音频流媒体链接[的后台处理。](https://stackoverflow.com/a/10402652/1106035)

# tridion - 无法在新 UI 实现中编辑组件链接字段标题？

> ID：14051516
> 
> 赞同：6
> 
> 时间：2012-12-27T08:18:27.190
> 
> 标签：tridion, tridion-2011, siteedit, tridion-ui

这是代码片段..

```
<a class="link-display"  target="_self"  onclick="doLink('TaggingMetaData:banner;bannerTitle:PRO_Simple Promo;bannerId:64-90667;;url:/newSiteEditSP1/newpagetest.html;urlTarget:_self;urlType:internal;linkTitle:Simple Promo with component link;popupparams:;siteEdit:2;Segments1:;Segments2:;Segments3:;Segments4:');return(false);" onkeypress="doLink('TaggingMetaData:banner;bannerTitle:PRO_Simple Promo;bannerId:64-90667;;url:/newSiteEditSP1/newpagetest.html;urlTarget:_self;urlType:internal;linkTitle:Simple Promo with component link;popupparams:;siteEdit:2;Segments1:;Segments2:;Segments3:;Segments4:');return(false);" href="/newSiteEditSP1/newpagetest.html?WT.ac=PRO_Simple+Promo_64-90667_T90672-NE-newsiteeditsp1&oc_id=PRO_Simple+Promo_64-90667_T90672-NE-newsiteeditsp1" >
  <span>
    <!-- Start SiteEdit Component Field: {"XPath" : "tcm:Content/custom:Content/custom:Links[2]/custom:Title"} -->
    Simple Promo with component link
  </span>
</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T09:08:31.507

这不会像

```
<!-- Start SiteEdit Component Field: {"XPath" : "tcm:Content/custom:Content/custom:Links[2]/custom:Title"} --> 
```

您必须为组件链接组件创建 siteedit 组件表示标签，然后使用 like

```
 <span>
     <!-- Start SiteEdit Component Presentation: {"ID" : "cp_uniqueid", "ComponentID" : "component link component id", "ComponentTemplateID" : "templateid", "Version" : 3, "IsQueryBased" : true  } -->
      <span>
   <!-- Start SiteEdit Component Field: {"XPath" : "tcm:Content/custom:Content/custom:Title[1]"} -->
        Simple Promo with component link
      </span>
     </span> 
```

希望能帮助到你..

谢谢

# git - Intellij IDEA 如何使用 git 插件将项目上传到远程分支？

> ID：14051525
> 
> 赞同：29
> 
> 时间：2012-12-27T08:19:19.990
> 
> 标签：git, intellij-idea

我有 Intellij IDEA 12.0.1 我正在使用内置的 Git 插件。我能够创建本地存储库。现在我想将我的源代码上传到远程存储库。我可以用 Intellij IDEA 插件做到这一点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-27T19:52:36.740

您无法使用 IntelliJ IDEA 插件将本地 Git 存储库上传到远程。为此，您需要使用[Git Bash](http://git-scm.com/downloads)或 Git 客户端，例如[Source Tree](http://www.sourcetreeapp.com/)。

## 使用 IntelliJ IDEA 插件创建本地 Git 存储库

1.  在 IntelliJ IDEA 菜单中`VCS -> Import into Version Control -> Create Git Repository`
2.  在弹出窗口中选择您的项目，然后单击确定。
3.  将所有必要的文件提交到您的本地分支`master`

## 使用 Git Bash 将本地存储库上传到远程

1.  打开**Git Bash**并导航到您的项目文件夹，例如 cd`'D:\projects\TestProject'`
2.  在**Git Bash 中** `git remote add origin http//IP/path/to/repository`
3.  在**Git Bash 中** `git push origin master`
4.  在**IntelliJ IDEA**中右键单击项目选择`Synchronize 'TestProject'`
5.  在**IntelliJ IDEA**中右键单击项目选择`Git -> Repository -> Branches -> origin/master -> Checkout as new local branch`

## 使用 Source Tree 将本地存储库上传到远程

1.  在**源代码树** `File -> Open`中并导航到您的项目文件夹，例如 cd`'D:\projects\TestProject'`
2.  在**Source Tree** `Repository -> Add Remote`中，您应该看到**Repository Settings**窗口 ![在此处输入图像描述](../Images/348b7df2667da5be790de75c0af6be5b.png)
3.  单击**添加**按钮，并填写**远程详细信息** ![在此处输入图像描述](../Images/d78b2de341386605cdce666d66130c52.png)
4.  最后单击**Ok**按钮 现在您应该能够使用 IntelliJ IDEA 插件进行拉/推。
5.  在**IntelliJ IDEA**中右键单击项目选择`Synchronize 'TestProject'`
6.  在**IntelliJ IDEA**中右键单击项目选择`Git -> Repository -> Branches -> origin/master -> Checkout as new local branch`

* * *

现在您应该能够使用**IntelliJ IDEA**插件进行**拉/推。**

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-19T11:15:46.547

在 Intellij IDEA 中是可能的。
您应该通过以下命令在 git bash 中为本地存储库添加远程存储库。

```
git remote add origin YOUR_REMOTE_REPOSITORY_ADDRESS.
for example
git remote add origin https://gitlab.com/my_account/my_repository.git 
```

在 Intellij IDEA 中，当您想要提交对存储库使用的任何更改时`ctrl + k`，它会显示一个如下图所示的窗口。在此窗口中，您可以选择`commit and push`它会将更改提交并推送到本地和远程存储库。
![在此处输入图像描述](../Images/ecc4d49ba475ca7c663b82b2d0c7bc71.png) 此外，如果您只想推送到远程存储库，请使用`ctrl + shift + k`推送更改。
我希望这个答案对你有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-27T17:45:08.777

我有同样的问题，我相信IDEA 12仍然是这种情况，除非我弄错了：

使用命令行的替代方法是 SourceTree（适用于 Mac 和 Win）来管理遥控器或完全管理 Git/Hg 存储库。它是来自 Atlassian 的免费 G​​UI 客户端（无从属关系披露）。

你可以[在这里](http://www.sourcetreeapp.com/ "源树")下载。**

# assembly - ESP 在 /proc/pid/maps 和二进制文件中不同

> ID：14051529
> 
> 赞同：0
> 
> 时间：2012-12-27T08:19:38.623
> 
> 标签：assembly, crash, gdb, core

我正在调试崩溃，我看到以下行为 -

当我将 GDb 附加到进程并执行信息寄存器时，我看到 esp 的以下值 -

特别是0xfd2475d0 0xfd2475d0

在对崩溃的代码进行反汇编后，我看到以下内容 -

81c886a: c7 04 24 2c f9 8a 0c 移动 $0xc8af92c,(%esp)

如果我在 /proc//maps 中查看地图文件，我会看到堆栈地址范围为 -

fff39000-fff59000 rwxp 7ffffffde000 00:00 0 [堆栈]

显然，GDB 中 ESP 0xfd2475d0 的值与映射文件中的堆栈地址不同步。

这可能是崩溃的原因。我认为这应该是因为我正在获得 SIGSEGV。另外，我该如何解决这个问题？

请协助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:13:33.267

是的，这显然是分段错误的原因。实际上不扔它是非常不明智的，因为英特尔架构支持分配单独的代码、数据和堆栈段——并且所有内存访问（使用基址寄存器 == ebp 或 esp）都会隐式地通过堆栈段。

因为编译器将使用不同的基址寄存器（和不同的隐式段寄存器）来读取任何其他任意指针，这缩小了堆栈寄存器损坏的搜索范围。

更罕见的可能性是*堆栈粉碎*，即。在当前函数范围内访问除局部变量之外的其他堆栈元素——在这种特殊情况下会破坏调用者的堆栈/帧指针。

```
void foo(int *p) {
   int a[2];
   a[4] = p;
} 
```

更有可能的选择是过度分配。

```
 void foo() {    
     double too_big[6000000];    // this would be located at 0xfd...... 
     int a;                      // this would be located at 0xfff3f000 ... 
 } 
```

# ios - CoreData 并通知后台工作人员有关主线程的更改

> ID：14051540
> 
> 赞同：0
> 
> 时间：2012-12-27T08:20:24.437
> 
> 标签：ios, core-data, restkit

我以为我的情况很简单，但是经过一整天的搜索，我不确定我是否有答案！

我正在使用 CoreData（通过实际使用 RestKit 和`[RKObjectManager sharedManager].objectStore`）。我保存数据以仅存储在主线程上。虽然我有很多从数据库读取数据的后台线程。`NSManagedObjectContext`如果主线程（带有 main ）将数据保存到数据库，我找不到任何通知这些后台线程的好方法。

我看到的唯一方法是保留所有后台线程的列表，并在主线程上处理时`NSManagedObjectContexts`发送它们。`mergeChangesFromContextDidSaveNotification``NSManagedObjectContextDidSaveNotification`

这是处理这种情况的正常方式吗？我有一种感觉，这不是由于在多线程环境中管理这种缓存可能出现的潜在问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:45:31.173

没有细节很难理解发生了什么，但是是的，`NSManagedObjectContextDidSaveNotification`在后台线程中使用。

但是要小心，如果你创建了很多线程来监听变化，电池可能会很快下降。

根据我的经验，Core Data 中的线程应该按如下方式使用：创建一个或多个线程，在共享持久存储协调器中执行某些请求。当线程完成停止（删除）它们。这种机制允许您将数据加载到存储协调器的缓存中，从而加快主线程中执行的未来请求。

希望有帮助。

PS 我不知道 RestKit 如何与 Core Data 一起工作。

# java - 仅当检查整个数组时才使用 Else 语句

> ID：14051541
> 
> 赞同：2
> 
> 时间：2012-12-27T08:20:40.290
> 
> 标签：java, loops, if-statement

我希望我的程序只打印一次“else 语句”，只有在 for 循环已经搜索了我的“orderProduct”数组长度之后。

我目前拥有的：

```
do
{
    System.out.print("Enter Order: "); 
    userOrder = in.next();

    for(int i=0; i<orderProduct.length; i++)
    {
        if(userOrder.equals(orderProduct[i].code))
        {
            System.out.print("Enter Amount: ");
            userQuantity = in.nextInt();
            break;
        }
        else
        {
            System.out.println("Sorry, invalid order.");
        }
    }
}
while(!userOrder.equals("0")); 
```

此代码在检查数组的第一个元素后始终执行“else 语句”。只有当 for 循环遍历整个数组时，有没有办法打印它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T08:22:39.937

您可以在 if 循环中设置一个**标志**，并检查它是否在整个 for 循环之后**仍未设置。**

```
Boolean valid = false;
for(int i=0; i<orderProduct.length; i++)
{
    if(userOrder.equals(orderProduct[i].code))
    {
        System.out.print("Enter Amount: ");
        userQuantity = in.nextInt();
        valid = true;
        break;
    }

}
if(!valid){
        System.out.println("Sorry, invalid order.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:55:21.847

除了使用标志之外，您还可以使用标签。

```
FOUND: {
  for(OrderProduct op: orderProduct) {
    if(userOrder.equals(op.code)) {
        System.out.print("Enter Amount: ");
        userQuantity = in.nextInt();
        break FOUND;
    }
  }
  System.out.println("Sorry, invalid order.");
} 
```

或者您可以将循环移动到方法中并使用 return 而不是 break。

然而，看起来你真正想要的是一张地图。

```
// use a map instead of a collection or an array.
Map<String, OrderProduct> map = new LinkedHashMap<>();
for(OrderProduct op: orderProduct) map.put(op.code, op);

OrderProduct op = null;
while(op == null) {
  System.out.print("Enter Order: "); 
  String userOrder = in.next();
  OrderProduct op = map.get(userOrder);
  if (op == null) {
    System.out.println("Sorry, invalid order.");
  } else {
    System.out.print("Enter Amount: ");
    userQuantity = in.nextInt();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:23:44.627

在内部使用`break` [分支语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)`else`，而不是在`if`. 或者将循环更改为`while`您当前在`else`块中具有的停止条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T08:23:59.077

尝试这个：

```
boolean invalidOrder = false;
do
{
    System.out.print("Enter Order: "); 
    userOrder = in.next();

    for(int i=0; i<orderProduct.length; i++)
    {
        if(userOrder.equals(orderProduct[i].code))
        {
            System.out.print("Enter Amount: ");
            userQuantity = in.nextInt();
        }
        else
        {
            invalidOrder = true;
        }
    }
}
while(!userOrder.equals("0"));

if(invalidOrder)
    System.out.println("Sorry, invalid order."); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T08:24:48.543

尝试设置打印整个内容的条件

```
do
{
System.out.print("Enter Order: "); 
userOrder = in.next();

boolean found = false;

for(int i=0; i<orderProduct.length; i++)
{
    if(userOrder.equals(orderProduct[i].code))
    {
        System.out.print("Enter Amount: ");
        userQuantity = in.nextInt();
        found = true;
        break;
    }
}
if(!found)
    System.out.println("Sorry, invalid order.");
}
while(!userOrder.equals("0")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-27T15:56:09.400

你可以尝试这样的事情，我知道问题不是关于地图的，但你也可以对数组做同样的事情。

```
public class TestClass {

    public static void main(String[] args) {
        Map<String, String> cookieMap = new HashMap<String, String>();
        Set<Map.Entry<String, String>> cookieSet = null;

        cookieMap.put("A", "1");
        cookieMap.put("B", "2");
        cookieMap.put("C", "3");
        cookieMap.put("D", "4");
        cookieMap.put("E", "5");

        cookieSet = cookieMap.entrySet();
        Boolean valid = false;
          for (Map.Entry<String, String> cookieKeyValue : cookieSet) {
              if(cookieKeyValue.getKey().contains("H")){
                  System.out.println(cookieKeyValue.getValue());
                  System.out.println("True");
                  valid = true;
                  break;
              }
          } if (!valid) {
              System.out.println("False");
          }
     }
} 
```

# php - Zend Framework 2 - 模块中多个实体的 TemplatePathStack

> ID：14051542
> 
> 赞同：0
> 
> 时间：2012-12-27T08:20:54.470
> 
> 标签：php, zend-framework2, directory-structure, zend-view

不久前，我关注`tutorial`并包含了[此处](http://framework.zend.com/manual/2.0/en/user-guide/modules.html#configuration)`TemplatePathStack`描述的内容。

本教程建议视图目录的结构类似于`view/album/album`所有 phtml 文件所在的结构。

我想知道专辑/专辑的原因是什么...如果我的模块被命名`MasterData`并且它包含添加/编辑/删除... for `Entity1`and怎么办`Entity2`？

框架如何知道要使用哪个 add.phtml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:33:34.087

我想知道您是否没有将实体与控制器混淆。确保您遵循以下总结的模块目录结构约定（仅包括与您的问题相关的内容）：

```
/module
|--/MasterData
|----/src
|--------/Controller
|-----------/Entity1Controller
|-----------/Entity2Controller
|--------/Model
|-----------/Entity1
|-----------/Entity2
|----/view
|------/master-data
|--------/entity1
|-----------/action1.phtml
|-----------/action2.phtml
|--------/entity2
|-----------/action1.phtml
|-----------/action2.phtml
... 
```

对于模板路径栈，在之前的结构下，配置很简单：

```
'view_manager' => array(
      'template_path_stack' => array(
           __DIR__ . '/../view',
       ),
), 
```

请记住，在视图文件夹下的默认约定：

*   entity1 映射到您的 Entity1Controller （如果您的控制器是驼峰式，例如：`MyFooController`，相应的文件夹名称将是`my-foo`）
*   action1.phtml 映射到`action1Action`您的`Entity1Controller`类的方法（如果您的操作名称是驼峰式，则与上述相同）。

# multithreading - 当控件被销毁时我应该何时停止线程（TCustomControl 后代）

> ID：14051544
> 
> 赞同：2
> 
> 时间：2012-12-27T08:20:57.683
> 
> 标签：multithreading, delphi

我的 TCustomControl 后代使用线程，这涉及使用 InvalidateRect 无效。我遇到过，当我在线程工作时关闭程序时，我不会停止 Destroy 中的线程，因为即使在我进入我的组件的 Destroy 的第一行之前（我通常在这里发出信号并等待线程停止工作），来自线程的代码使程序可能在句柄请求上显示异常“Control ... has no parent window”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:13:53.733

所有的窗口交互——比如调用`InvalidateRect`——都应该在主线程中完成，所以将它从支持同步到主线程或摆脱额外的线程。

其次，当一个控件被销毁时，你不能再使用它的窗口句柄，因为它可能已经消失了。在这种情况下，VCL 将尝试重新创建句柄，尽管控件正在被破坏，从而导致各种错误。如果您显然或必须有可能在控件销毁期间调用的绘图指令，请在该代码周围进行检查：

```
if not (csDestroying in ComponentState) then 
```

这段代码当然也必须在主线程中！（不是因为窗口句柄已经被销毁，而是因为 VCL 不是线程安全的）。这是暗示的，因为下面的代码 - 绘画 - （现在）也在主线程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:28:19.760

这是从线程访问属性时的标准错误`TWinControl.Handle`- 在线程的上下文中重新创建底层窗口。

严格来说，`TWinControl.Handle`从线程访问是不安全的，尽管问题通常出现在某些极端情况下，例如关闭应用程序。

`TWinControl`类还提供受保护`WindowHandle`的属性。您可以在不强制创建窗口句柄的情况下读取该值。如果您从`TWinControl`（或`TCustomControl`）派生的组件提供对它的访问，则可以从线程访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:29:40.010

接受的答案仍然有意义，但我只是提供了一个可用于多线程和 VCL (TVCLMutex) 的对象，所以它部分回答了我自己的问题。诀窍是我在主线程中创建了另一个窗口，因此它共享相同的消息队列。从那时起，等待自己的消息使 VCL 神奇地安全，至少在大多数情况下是这样（因为所有代码都直接和间接来自同一个队列）。因此，如果您的线程想要访问/更改 VCL 中的某些内容，请创建 TVCLMutex 的单个实例并将不安全的访问代码包装在其 Access/Release 中，您可以确定主线程在 Windows 核心中的某个位置等待继续处理消息而无处可去别的。

```
unit VclMutex;

interface uses Windows, Messages, SysUtils;

const
  WM_WaitInMainThread = WM_USER + 1;

type
  TVCLMutex = class
  private
    fVCLWaitEvent: THandle;
    fAccessAvailEvent: THandle;
    fWnd: HWnd;
    fThreadId: Cardinal;
    fLevel: integer;
  protected
    procedure   WndProc(var Msg: TMessage);
  public
    constructor Create;
    destructor  Destroy;override;
    procedure   Access;
    procedure   Release;
  end;

implementation uses Forms;

{ TVCLMutex }

constructor TVCLMutex.Create;
begin
  inherited Create;

  if GetCurrentThreadId <> MainThreadId then
    raise Exception.Create('The object should be created in the main thread');

  fWnd:=AllocateHWnd(WndProc);
  fVCLWaitEvent:=CreateEvent(Nil, false, false, Nil);
  fAccessAvailEvent:=CreateEvent(Nil, false, true, Nil); 
end;

destructor TVCLMutex.Destroy;
begin
  CloseHandle(fVCLWaitEvent);   
  CloseHandle(fAccessAvailEvent);

  DeallocateHWnd(fWnd);
  inherited;
end;

procedure TVCLMutex.WndProc(var Msg: TMessage);
begin
  case Msg.Msg of
    WM_WaitInMainThread:
      begin
           { ReplyMessage make return from SendMessage call called from other thread }
        ReplyMessage(0);

           { Waiting to release VCL (main thread) queure. Signal will come from the
             Release method of working thread  }
        WaitForSingleObject(fVCLWaitEvent, INFINITE);
      end
    else
      Msg.Result := DefWindowProc(FWnd, Msg.Msg, Msg.wParam, Msg.lParam);
  end;
end;

procedure TVCLMutex.Access;
var
  AThreadId: Cardinal;
begin
  AThreadId:=GetCurrentThreadId();

  if GetCurrentThreadId = fThreadId then
  begin
      { If owning thread then allow while keeping nested level }
    Inc(fLevel);
  end
  else
  begin
       { Waiting for section to be available (from other threads) }
    WaitForSingleObject(fAccessAvailEvent, INFINITE);

       { Owning thread }
    fThreadId:=AThreadId;

       { Ask main thread queue to wait }
    if fThreadId <> MainThreadId then
      SendMessage(fWnd, WM_WaitInMainThread, 0, 0);

    fLevel:=1;
  end
end;

procedure TVCLMutex.Release;
begin
  Dec(fLevel);

  if fLevel = 0 then { All nested releases passed  }
  begin
        { Signaling for queue to release (if different thread) }
    if fThreadId <> MainThreadId then
      SetEvent(fVCLWaitEvent);

    fThreadId:=0;
       { Signaling that the mutex section is available }
    SetEvent(fAccessAvailEvent);
  end;
end;

end. 
```

# ruby - 使用参数与 ruby 要求

> ID：14051547
> 
> 赞同：6
> 
> 时间：2012-12-27T08:21:43.723
> 
> 标签：ruby, parameters, arguments, require

是否可以要求带有参数/参数的文件？

例如

resource.rb 有

```
mode = ARGV.first

if mode == "prod"
  #use prod db
else
  #use test db
end 
```

并且 main.rb 需要它带有类似的参数

```
require_relative './resource.rb prod' 
```

如果这是不可能的或不好的做法，请告诉我。我想我可以使用版本控制在 test 和 prod 之间切换，但它似乎有点迟钝。

（prod 和 test 仅用于区分。这是一个非常轻量级的项目，如果有任何区别，则不是商业性的 :)）

感谢在 Windows XP 上使用 Ruby 1.9.3。

我很惊讶已经没有答案了。只有关于使用 gems 和使用带参数的 ruby​​ 的东西，但不能同时使用两者。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T08:32:16.077

你不能通过要求来做到这一点，但你可以设置一个环境变量：

在`main.rb`：

```
ENV["mode"] = ARGV.first
require_relative './resource' 
```

在`./resource.rb`：

```
mode = ENV.fetch("mode")

if mode == "prod"
  #use prod db
else
  #use test db
end 
```

使用环境变量进行配置的好处是您可以跨多个文件拥有相同的逻辑。这就是 Heroku 做事的方式。

请参阅[Heroku 的 12 factor 应用程序](http://www.12factor.net/config)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T08:27:37.957

不，您不能使用`require`.

我建议做这样的事情：

```
def use_mode(mode)
  # your if statements
end 
```

进而

```
require 'file'
use_mode :development 
```

并将其包装在一个类/模块中以获得更简洁的代码:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T16:57:58.453

不，您不能使用 require 传递参数。但是您在需要某些东西之前定义了一个参数。

示例资源.rb：

```
RESOURCE_MODE = :prod unless defined? RESOURCE_MODE
case RESOURCE_MODE
  when :prod
    #your productive settings
  when :test
    #your test settings
  else
    raise ArgumentError
end 
```

当您调用它时，`require 'resource'`您正在高效运行。

当您在测试模式下调用它时，您可以使用：

```
RESOURCE_MODE = :test
require 'resource' 
```

* * *

另一种可能性：您定义 a`resource_prod.rb`和 a `resource_test.rb`。然后您可以选择您需要的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T08:40:13.600

require_relative 只接受文件相对于所需文件路径的相对路径名，您可以执行以下操作：

```
# in main.rb
require_relative 'resource'

# in cli
ruby main.rb prod 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T08:29:04.877

首先它是行不通的。通过命令 lie 调用应用程序与 require 内部不同，因此没有传递给它的参数。简而言之，需要读取和评估文件。为了支持您想要的功能，您应该使用配置和类。

```
# resource.rb
class DB
  def initialize(db_config ={})
    #connect to db
  end
end

# main.rb
connection = DB.new(mode == "prod" ? prod_db_config : development_db_config) 
```

# git - 重置 git 子树中的差异计数

> ID：14051555
> 
> 赞同：13
> 
> 时间：2012-12-27T08:22:18.247
> 
> 标签：git, subtree

使用`git-subtree`，运行 a 时计算的差异数量`git subtree split`会随着时间的推移而增加，达到可以使拆分需要很长时间的值。

解决这个问题的一种方法是`git rm`路径，提交它然后`git subtree add`返回。

有没有更简单/更干净的方法来重置子树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:30:34.947

在进行拆分时，`--rejoin`可以使用该选项，该选项似乎完全存在以重用已经发生的拆分。

> --重新加入::
> 
> 此选项仅对 split 命令有效。
> 
> 拆分后，将新创建的合成历史合并回您的主项目。这样，未来的拆分只能搜索自最近一次 --rejoin 以来添加的历史记录部分。

来自[https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt](https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt)

# java - h2数据库测试maven

> ID：14051566
> 
> 赞同：6
> 
> 时间：2012-12-27T08:23:27.017
> 
> 标签：java, database, testing, maven-2, h2

## 使用 H2 数据库 1.3.169 测试 java 应用程序

我正在以两种不同的方式测试我的应用程序。

1.  内存数据库是在与应用程序不同的进程中创建的。我启动 H2 控制台并从脚本创建数据库。所有测试通过。
2.  内存数据库是在应用程序启动时与应用程序在同一进程中创建的。所有测试都在 Intellij IDEA 11.3 中通过。使用 Maven 2 测试一些测试失败（为一个实体创建、更新、删除，预期的数据集与结果不匹配）。似乎数据库没有更新。它不会每次都发生，有时构建会成功。所有测试都经过验证，所有测试都适用于 Oracle 和 DB2。

问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:16:42.907

当您默认配置与内存中 H2 DB 的连接时，会发生这种情况，例如：`dbc:h2:mem:test`

在这种情况下，DB 存在，直到他至少有一个活动连接。当最后一个连接关闭时，数据库也关闭了。取决于您使用/重用连接（可能是池）和运行测试延迟，您可以获得赛车条件并获得意想不到的结果。

它可以通过连接参数来修复`DB_CLOSE_DELAY=-1`，这意味着只有在 VM 死亡时才关闭数据库。

这是帮助链接[http://www.h2database.com/html/features.html#closure_a_database](http://www.h2database.com/html/features.html#closing_a_database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T12:09:54.107

我知道现在回答你的问题为时已晚。可能这可能会有所帮助。

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
  <property name="driverClassName" value="org.h2.Driver" />
  <property name="url" value="jdbc:h2:mem:testdb;INIT=create schema if not exists test\;runscript from 'classpath:scripts/sample.sql';**DB_CLOSE_DELAY=-1**"/> 
```

除了它尝试添加以下属性

```
<prop key="hibernate.hbm2ddl.auto">create</prop>      
<prop key="hibernate.connection.release_mode">auto</prop> 
```

这将在每次服务器启动时创建模式，并在完成后删除。

# css - 这些 CSS 定义是什么意思？

> ID：14051577
> 
> 赞同：0
> 
> 时间：2012-12-27T08:24:21.417
> 
> 标签：css

我正在阅读的一个网站有一些看起来像这样的 CSS 定义：

```
#intro, #code { ... }
#intro { ... }
#code { ... } 
```

我以前从未见过这种情况。两个问题：

1.  在第一种情况下，它是否同时定义`#intro`并`#code`具有相同的初始定义？
2.  后续的定义是对原始定义`#intro`的补充吗？`#code`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:26:05.693

直接问题的简单答案：

1.  是的
2.  是的

;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:52:14.293

浏览器从上到下读取每一页代码。这意味着，*后一个语句覆盖了前一个语句。*

在您给出的示例中，这意味着首先`#intro`获得`#code`相同的 CSS，然后他们在各自的语句中收到一些额外的 CSS。这些单独的语句可以具有相同的属性（例如，`width`），但最后一个语句将始终是要使用的语句。

```
#intro, #code {width: 200px;}
#intro {width: 100px;} /* This value overwrites the previous */ 
```

**一个例外**是当一个语句比另一个语句更具体时。例如：

```
body #wrapper #intro, body #wrapper #intro #code {width: 200px;}
#intro {width: 100px;} /* This value is NOT as specific as or more specific than the previous, so it does NOT overwrite the previous value. */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T08:26:50.157

是的。介绍和代码都获得相同的 css

```
#intro { ... }
#code { ... } 
```

他们每个人都有不同的CSS

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T08:31:21.743

```
#intro, #code { ... } /* selects and styles both */
#intro { ... } /* selects only #intro and styles it */
#code { ... } /* selects only #code and styles it */
#intro #code { ... } /* this means that #code is child of #intro. Selects #code and styles it! */ 
```

对于你的两个问题，答案是

## 是的

# java - 如何从 Spring 获取最终查询？

> ID：14051580
> 
> 赞同：3
> 
> 时间：2012-12-27T08:24:31.740
> 
> 标签：java, spring, spring-jdbc

我有以下代码 -

```
getNamedParameterJdbcTemplate().queryForList("SELECT id FROM emp WHERE age=:age", 
new MapSqlParameterSource("age", 19)) 
```

如何在参数替换后将最终查询发送到 Mysql？有没有像 -

```
getNamedParameterJdbcTemplate(query, paramSource).gimmeTheFinalQuery() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T09:21:41.573

非常冗长但可行的解决方案是 -

```
ParsedSql parsedSql = NamedParameterUtils.parseSqlStatement("SELECT id FROM emp WHERE age=:age");
SqlParameterSource source = new MapSqlParameterSource("age", 19);
String finalQuery = new PreparedStatementCreatorFactory(NamedParameterUtils.substituteNamedParameters(parsedSql,
                source), NamedParameterUtils.buildSqlTypeArray(parsedSql, source))
                .newPreparedStatementCreator(NamedParameterUtils.buildValueArray(parsedSql, source, null))
                .createPreparedStatement(getConnection()).toString();

finalQuery = finalQuery.substring(finalQuery.indexOf(":") + 1, finalQuery.length());
System.out.println(finalQuery); 
```

输出 -

> 从年龄 = 19 的雇员中选择 id

这可以包装成一个实用程序类 -

```
public class SpringQueryParser {
    Connection con; 
    public SpringQueryParser(Connection con) {
        this.con = con;
    }
    public String getFinalQuery(String query, SqlParameterSource source) throws SQLException {
        ParsedSql parsedSql = NamedParameterUtils.parseSqlStatement(query);
        String finalQuery = new PreparedStatementCreatorFactory(NamedParameterUtils.substituteNamedParameters(parsedSql,
                source), NamedParameterUtils.buildSqlTypeArray(parsedSql, source))
                .newPreparedStatementCreator(NamedParameterUtils.buildValueArray(parsedSql, source, null))
                .createPreparedStatement(con).toString();
         return finalQuery.substring(finalQuery.indexOf(":") + 1, finalQuery.length()).trim();
    }
} 
```

然后像这样方便地调用 -

```
new SpringQueryParser(getConnection()).getFinalQuery("SELECT id FROM emp WHERE age=:age",
                new MapSqlParameterSource("age", 19)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:28:24.257

我认为 Spring 中没有类似的 API，原因是最低级别可能甚至在 Spring 级别都不可用。但是，您可能想看看这个其他问题的答案[Simplest way to collect all SQL sent out](https://stackoverflow.com/questions/13643220/simplest-way-to-collect-all-sql-sent-out)。[P6Spy](http://sourceforge.net/projects/p6spy/)将通过挂钩到`dataSource`bean 来很好地完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:40:12.850

如果这只是为了调试，您还可以要求 MySQL 将所有查询记录到日志文件中。

```
> SET GLOBAL general_log_file = '/var/log/mysql_general.log';
> SET GLOBAL general_log = 1; 
```

[http://dev.mysql.com/doc/refman/5.5/en/query-log.html](http://dev.mysql.com/doc/refman/5.5/en/query-log.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:26:47.747

如果您使用 Hibernate 来显示 SQL 语句，请使用以下 Hibernate 属性：

```
<prop key="hibernate.show_sql">true</prop> 
```

如果您也使用 log4j，那么您可以通过在 log4j 属性文件中设置以下内容来设置它以显示与语句绑定的参数值：`log4j.logger.org.hibernate.type=trace`

# java - Android 在位图上以编程方式绘制形状

> ID：14051582
> 
> 赞同：1
> 
> 时间：2012-12-27T08:24:43.130
> 
> 标签：java, android, bitmap, android-canvas, curve

我想画一个像这样的形状：

![在此处输入图像描述](../Images/34f195a31e2cc992a07b4be6cffdc661.png)

我可以使用这个形状在画布上绘制，但我必须在运行时用黑色和什么颜色创建这个位图。有没有办法做到这一点，比如使用路径或其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:14:20.660

> 有没有办法做到这一点，比如使用路径或其他东西？

是的，您可以使用以下命令创建它`Path`：

```
// the Paint for the path
Paint p = new Paint();
p.setAntiAlias(true);
p.setColor(Color.BLACK);
p.setStyle(Style.FILL);
// the path
Path pth = new Path();      
pth.moveTo(50, 200); // example values, modify with your own, or to improve the path
pth.lineTo(70, 140);
pth.quadTo(150, 115, 230, 140);
pth.lineTo(250, 200);
pth.quadTo(150, 165, 50, 200);
pth.close(); 
```

确保您用于路径的值在`Bitmap`' 的范围内，以便您可以看到路径。

# c++ - 以编程方式确定特定 Visual Studio 版本的 CLR 版本的可靠方法

> ID：14051584
> 
> 赞同：7
> 
> 时间：2012-12-27T08:24:49.277
> 
> 标签：c++, .net, visual-studio, clr

从历史上看，我一直依赖***HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\\CLR***版本下的注册表项名称***CLR***版本来确定 CLR、.NET Framework 版本构建和 Visual Studio 版本之间的映射。正如您从下面的屏幕截图中看到的那样，CLR 版本可靠地存在于之前的版本中，我相信即使对于下面提到的版本之前的版本也是如此 *![在此处输入图像描述](../Images/e9bf63533e53a419636b7038d20a8521.png)*

 *但是，当我检查 Visual Studio 11.0 - 2012 的相同注册表项时，缺少此信息。 ![在此处输入图像描述](../Images/c5cbdc72cd63985601a93ef2e4eb044b.png)

所以，我的问题是，确定特定 Visual Studio 版本的 CLR 版本的可靠方法是什么？

PS：

*   我想通过本机 C++ 程序以编程方式确定 CLR 版本，这意味着***Environment::Version***不可用。
*   此方法应该可靠地跨 VS 版本工作
*   我不能依赖任何现有程序集并使用 ICLRMetaHost::GetVersionFromFile 和已弃用的 GetFileVersion*

# java - @ViewAccessScoped 第一次没有获得选定的行

> ID：14051586
> 
> 赞同：1
> 
> 时间：2012-12-27T08:25:06.377
> 
> 标签：java, jsf-2, cdi, myfaces

我正在使用 JSF 2.0，并且我有一个使用延迟加载填充的数据表。`@ViewAccessScoped`当我使用 CDI/Spring 时，页面的范围是（MyFaces CODI）。

当在 jsf 页面中加载数据表并且第一次选择一行时（单选按钮），我无法获得选定的行，对于后续选择，我能够在 ManagedBean 的 onRowSelect 方法中获得选定的行。如果我使用会话范围，那么当我第一次选择行时，我能够获得选定的行。

```
JSF Code

<p:dataTable id="dataTable" var="req" lazy="true" value="#{emp.lazyModel}"
      rowKey="#{req.empNo}"
         paginator="true" rows="10"
         selection="#{emp.selectedRequest}">                  
      <p:ajax event="rowSelectRadio" listener="#{emp.onRowSelect}" /> 
       <p:column selectionMode="single" style="width:18px" /> 
```

*托管豆*

```
@Named("emp")
@ViewAccessScoped
public class EmployeeManagedBean implements Serializable {

private Employee selectedRequest = new Employee();

@PostConstruct
   public void init() {
      initTable();
   }

   private void initTable() {
      lazyModel = new LazyEmployeeDataModel(requestList, requestService);
   }

   public LazyDataModel<Employee> getLazyModel() {
      return lazyModel;

   } 
```

和*onRowSelect*方法

```
public void onRowSelect(SelectEvent event) {
      try {
         setSelectedRequest((Employee) event.getObject());
         System.out.println("row "
               + getSelectedRequest()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:49:06.567

我已经解决了这个问题，问题是cookies。

首次加载 list.jsf 时，未设置 cookie。因此，当用户选择一行时，cookie 会被设置，因此对于后续选择，用户可以获得选定的行值。

为了解决这个问题，我创建了一个 index.jsp 页面并重定向到 list.jsf，因此在用户使用单选按钮选择一行之前设置了 cookie。

谢谢

# visual-studio - Visual Studio 展开/折叠键盘快捷键

> ID：14051589
> 
> 赞同：221
> 
> 时间：2012-12-27T08:25:20.700
> 
> 标签：visual-studio, visual-studio-2012, keyboard-shortcuts

在 Visual Studio 中，如果我打开了一个代码文件，我可以按`CTRL`+`M`或`CTRL`++`M`来`O`折叠所有代码块、区域、命名空间等。

我如何做相反的事情并扩展一切？

我已经用谷歌搜索了这个，但似乎找不到有效的快捷方式！

* * *

## 回答 #1

> 赞同：371
> 
> 时间：2012-12-27T08:29:45.323

**折叠到定义**

`CTRL`+ `M`,`O`

**展开所有大纲**

`CTRL`+ `M`,`X`

**展开或折叠所有内容**

`CTRL`+ `M`,`L`

*这也适用于其他语言，如 TypeScript 和 JavaScript*

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2014-09-29T08:56:03.957

如您所见，有几种方法可以实现这一目标。

我个人使用：

展开全部：`CTRL`+ `M`+`L`

全部折叠：`CTRL`+ `M`+`O`

奖金：

在光标位置展开/折叠：`CTRL`+ `M`+`M`

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-11-04T12:38:34.033

视觉工作室 2015：

```
Tools > Options > Settings > Environment > Keyboard 
```

**默认值：**

Edit.CollapsetoDefinitions：`CTRL + M`+`O`

Edit.CollapseCurrentRegion: `CTRL + M`+`CTRL + S`

Edit.ExpandAllOutlining: `CTRL + M`+`CTRL + X`

Edit.ExpandCurrentRegion: `CTRL + M`+`CTRL + E`

**我喜欢设置和使用 IntelliJ 的快捷方式：**

Edit.CollapsetoDefinitions：`CTRL + SHIFT + NUM-`

Edit.CollapseCurrentRegion：`CTRL + NUM-`

Edit.ExpandAllOutlining：`CTRL + SHIFT + NUM+`

Edit.ExpandCurrentRegion：`CTRL + NUM+`

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-12-27T08:30:14.250

您可以使用`Ctrl`+`M`和`Ctrl`+`P`

它被称为 Edit.StopOutlining

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-09-10T04:56:06.003

对于折叠，您可以尝试`CTRL`++并使用`M`++展开。这适用于 VS2008。`O``CTRL``M``P`

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-10-30T12:21:50.930

转到工具->选项->文本编辑器->c#->高级并取消选中第一个复选框当文件打开时进入大纲模式。

这将永远解决这个问题

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-01-26T15:29:00.013

我一直希望 Visual Studio 包含一个仅折叠/展开区域的选项。我有以下宏可以做到这一点。

```
Imports EnvDTE
Imports System.Diagnostics
' Macros for improving keyboard support for "#region ... #endregion"
Public Module CollapseExpandRegions
' Expands all regions in the current document
  Sub ExpandAllRegions()

    Dim objSelection As TextSelection ' Our selection object

    DTE.SuppressUI = True ' Disable UI while we do this
    objSelection = DTE.ActiveDocument.Selection() ' Hook up to the ActiveDocument's selection
    objSelection.StartOfDocument() ' Shoot to the start of the document

    ' Loop through the document finding all instances of #region. This action has the side benefit
    ' of actually zooming us to the text in question when it is found and ALSO expanding it since it
    ' is an outline.
    Do While objSelection.FindText("#region", vsFindOptions.vsFindOptionsMatchInHiddenText)
        ' This next command would be what we would normally do *IF* the find operation didn't do it for us.
        'DTE.ExecuteCommand("Edit.ToggleOutliningExpansion")
    Loop
    objSelection.StartOfDocument() ' Shoot us back to the start of the document
    DTE.SuppressUI = False ' Reenable the UI

    objSelection = Nothing ' Release our object

  End Sub

  ' Collapses all regions in the current document
  Sub CollapseAllRegions()
    Dim objSelection As TextSelection ' Our selection object

    ExpandAllRegions() ' Force the expansion of all regions

    DTE.SuppressUI = True ' Disable UI while we do this
    objSelection = DTE.ActiveDocument.Selection() ' Hook up to the ActiveDocument's selection
    objSelection.EndOfDocument() ' Shoot to the end of the document

    ' Find the first occurence of #region from the end of the document to the start of the document. Note:
    ' Note: Once a #region is "collapsed" .FindText only sees it's "textual descriptor" unless
    ' vsFindOptions.vsFindOptionsMatchInHiddenText is specified. So when a #region "My Class" is collapsed,
    ' .FindText would subsequently see the text 'My Class' instead of '#region "My Class"' for the subsequent
    ' passes and skip any regions already collapsed.
    Do While (objSelection.FindText("#region", vsFindOptions.vsFindOptionsBackwards))
        DTE.ExecuteCommand("Edit.ToggleOutliningExpansion") ' Collapse this #region
        'objSelection.EndOfDocument() ' Shoot back to the end of the document for
        ' another pass.
    Loop
    objSelection.StartOfDocument() ' All done, head back to the start of the doc
    DTE.SuppressUI = False ' Reenable the UI

    objSelection = Nothing ' Release our object

  End Sub
End Module 
```

编辑：现在有一个名为 Edit.ToggleOutliningExpansion (Ctrl+M, Ctrl+M) 的快捷方式可以做到这一点。

# objective-c - 单击按钮后暂停线程

> ID：14051591
> 
> 赞同：0
> 
> 时间：2012-12-27T08:25:32.180
> 
> 标签：objective-c, ios, ios6

我有以下代码 - 它创建一个 UIActivityIndi​​catorView 并在单击按钮时执行登录功能。我需要在调用函数之前显示一段时间的活动指示器，所以我做了 sleep(10)，但问题是按钮卡在按下状态（背景颜色从白色变为蓝色并冻结）并且活动指示器视图不显示。当我删除 sleep(10) 时，它工作正常。在创建指示器并且按钮恢复正常状态后，如何暂停线程？

```
-(IBAction)performLogin{
    UIActivityIndicatorView *view = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [view setFrame:CGRectMake(180, 13, 10, 10)];
    [view startAnimating];
    [btnLogin addSubview:view];
    [sleep(10)];    
    if ([self validatePassword] == YES)
    {
        [self performSegueWithIdentifier:@"goToMain" sender:self];
    }
    else
    {
        [ErrorHandler showMessage:@"Wrong password" :@"Authentication"];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:33:43.943

将您的验证移动到单独的方法，并在延迟后调用它：

```
-(IBAction)performLogin{
    UIActivityIndicatorView *view = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [view setFrame:CGRectMake(180, 13, 10, 10)];
    [view startAnimating];
    [btnLogin addSubview:view];
    [self performSelector:@selector(performPasswordValidation) withObject:nil afterDelay:10];
}

- (void)performPasswordValidation
{
    if ([self validatePassword] == YES)
    {
        [self performSegueWithIdentifier:@"goToMain" sender:self];
    }
    else
    {
        [ErrorHandler showMessage:@"Wrong password" :@"Authentication"];
    }
} 
```

# c# - 全局变量返回意外值

> ID：14051594
> 
> 赞同：-4
> 
> 时间：2012-12-27T08:25:51.123
> 
> 标签：c#, wpf, variables, global

Well I was trying to assign global variable to read values from Check boxes and radio buttons but the values don't update when the selections are changed ! 我哪里做错了？这是代码：

```
private void chkInMut_Checked(object sender, RoutedEventArgs e)
    {
        GlobalVar.Mutate = 1;
    }

    private void chkShwCal_Checked(object sender, RoutedEventArgs e)
    {
        GlobalVar.ShowCal = 1;
    }

    private void chkOutSol_Checked(object sender, RoutedEventArgs e)
    {
        GlobalVar.OutCal = 1;
    }
}

public static class GlobalVar
{
    static int _MaxMin, _MutVal, _CalShow, _CalOut;

    /// <summary>
    /// Access routine for global variable.
    /// </summary>

    public static int Extrema
    {
        get
        {
            return _MaxMin;
        }
        set
        {
            _MaxMin = value;
        }
    }

    public static int Mutate
    {
        get
        {
            return _MutVal;
        }
        set
        {
            _MutVal = value;
        }

    }

    public static int ShowCal
    {
        get
        {
            return _CalShow;
        }
        set
        {
            _CalShow = value;
        }
    }

    public static int OutCal
    {
        get
        {
            return _CalOut;
        }
        set
        {
            _CalOut = value;
        }
    }
} 
```

当我尝试使用此测试语句打印数字时，返回的值是意外的：

```
 maxMin = GlobalVar.Extrema;
        calShow = GlobalVar.ShowCal;
        calOut = GlobalVar.OutCal;
        IsMutble = GlobalVar.Mutate;
        txtOutput.Text += Convert.ToString("\nMaxima Minima"+maxMin+"\n"+"Show Cal : "+calShow+"\n"+"Output Cal :"+calOut+"\n"+"Mutate : "+IsMutble+"\n---------\n"); 
```

当我选中/取消选中这些框时，这些值不会按应有的方式更新。我哪里出错了？

**编辑：**通过添加未选中的参数来解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:45:34.117

可能您应该像这样编写事件处理程序

```
private void chkInMut_Checked(object sender, RoutedEventArgs e)
{
    GlobalVar.Mutate = (chkInMut.IsChecked ? 1 : 0);
} 
```

等等 .....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:34:42.653

我认为问题出在您的公共静态属性上。例如试试这个：

```
public static int Extrema
{
    get
    {
        return GlobalVar._MaxMin;
    }
    set
    {
        GlobalVar._MaxMin = value;
    }
} 
```

并对所有其他属性执行相同操作。

**编辑：** 你为什么要使用这种结构？您可以将静态类设置为：

```
public static class GlobalVar
{
   public static int Extrema;
   public static int Mutate;
     public static int ShowCal;
} 
```

# android - 如何从 Android 中的 EditText 获取值？

> ID：14051598
> 
> 赞同：5
> 
> 时间：2012-12-27T08:26:16.783
> 
> 标签：android

我有一个`EditText`我`android`希望用户输入我将存储数据库的文本。但是，在这里我无法从`EditText`.

**这是我的代码，**

```
EditText etUserInfoNewValue = (EditText)findViewById(R.id.etUserInfoNewVal);    
String newValue = etUserInfoNewValue.getText().toString().trim(); 
```

我怎样才能从中获得价值`EditText`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T08:32:12.477

Put

```
String newValue = etUserInfoNewValue.getText().toString().trim(); 
```

Inside the button's `onClicklistener()`.

You have put this code in onCreate() just after declaring it, it won't have any value at all. So you will get null value.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T08:35:31.673

对我来说很好，检查你的情况..

```
Button   buttonTest;  
EditText editText;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    buttonTest = (Button)findViewById(R.id.button);
    editText   = (EditText)findViewById(R.id.edittext); //check this point carefully on your program

    buttonTest.setOnClickListener(
        new View.OnClickListener()
        {
            public void onClick(View view)
            {
                Log.v("EditText..", editText.getText().toString().trim());
            }
        });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T09:06:26.310

可能你需要TextView.OnEditorActionListener。蓝牙[聊天 http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

```
//BluetoothChat.java:

// Initialize the compose field with a listener for the return key
EditText mOutEditText = (EditText) findViewById(R.id.edit_text_out);
mOutEditText.setOnEditorActionListener(mWriteListener);

// The action listener for the EditText widget, to listen for the return key
private TextView.OnEditorActionListener mWriteListener =
new TextView.OnEditorActionListener() {
public boolean onEditorAction(TextView view, int actionId, KeyEvent event) {
    // If the action is a key-up event on the return key, send the message
    if (actionId == EditorInfo.IME_NULL && event.getAction() == KeyEvent.ACTION_UP) {
        String message = view.getText().toString();
        sendMessage(message);
    }
    if(D) Log.i(TAG, "END onEditorAction");
    return true;
} 
```

};

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T08:32:21.677

When you will store the EditText String to Database. By seeing at your code it looks that you are immediately storing the Text in String newValue and then storing it in the Database. Change the code of String declaration to onClick() of your button or anything else.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T08:34:52.850

从editText获取价值，

```
String getValueEditText = "null";
if (etUserInfoNewValue.getText().toString().trim().length() > 0) {
    getValueEditText = etUserInfoNewValue.getText().toString().trim();
} 
```

# jquery - 可排序（按字母顺序）

> ID：14051603
> 
> 赞同：1
> 
> 时间：2012-12-27T08:27:02.263
> 
> 标签：jquery, kendo-ui, jquery-ui-sortable

我有一个清单，我正在对其进行排序

```
sortable: {
    mode: "single",
    allowUnsort: false,
    field: "LastName"
}, 
```

问题是，当我单击排序按钮时，字段按字母顺序排序，但首先显示的是大写字母，然后是小写字母（我说的是第一个字母）。

例子：

*   行政人员
*   医生
*   程序员
*   科学家
*   医生
*   药剂师
*   兽医

我想做的是：

*   行政人员
*   医生
*   医生
*   药剂师
*   程序员
*   科学家
*   兽医

这是我的代码

```
 var selectedUser = "";
    var selectedUserID = "";
    var selectedRole = "";
    var Rolesgrid = "";
    var Usersgrid = "";
    var gridRolesToBeAdded = "";
    var myIndex = 0;
    var str = "LastName";
    str.toLowerCase();

    $(document).ready(function () {
        window.location.hash = '#FormTitleHeading';
        $("#UsersMenu")[0].childNodes[0].style.visibility = "visible";
        $("#UsersMenu")[0].childNodes[1].style.visibility = "visible";
        $("#RolesMenu")[0].childNodes[0].style.visibility = "visible";
        $("#RolesMenu")[0].childNodes[1].style.visibility = "visible";
        $("#UsersMenu")[0].childNodes[0].title = "Add New User";
        $("#UsersMenu")[0].childNodes[1].title = "Delete Selected User";
        $("#RolesMenu")[0].childNodes[0].title = "Add Roles to User";
        $("#RolesMenu")[0].childNodes[1].title = "Delete Selected Role";
        Usersgrid = $("#grdUsers").kendoGrid({
            dataSource: {
                type: "application/jsonp",
                transport: {
                    read:
                            {
                                url: "http://" + servername + "/uBillingServices/Security/Security.svc/getUsers",
                                dataType: "json",
                                data: {
                                    LanguageID: 'en'
                                }
                            }
                },
                sort: { field: "LastName"},
                schema: {
                    model: {
                        fields: {
                            UserID: { type: "string" },
                            UserName: { type: "string" },
                            FirstName: { type: "string" },
                            LastName: { type: "string" },
                            AvatarURL: { type: "string" }
                        }
                    }
                }
            },
            dataBound: function (e) {
                row = e.sender.tbody.find(">tr:not(.k-grouping-row)").eq(myIndex);
                if (row.length == 0) {
                    e.sender.select(e.sender.tbody.find(">tr:first"));
                }
                else {
                    e.sender.select(row);
                }
            },
            change: function (arg) {
                var UserIDrow = this.select(),
                  selectedUserx = this.dataItem(UserIDrow).UserName;
                selectedUserID = this.dataItem(UserIDrow).UserID;
                selectedUser = selectedUserx;
                myIndex = this.select().index();
                $('#UserDetailsView').load('<%= Url.Action("EditUser","Administration") %>');

                //                      $.get( '<%= Url.Action("EditUser","Administration") %>', function(data) {
                //                      $('#UserDetailsView').empty();
                //                        $('#UserDetailsView').append(data);
                //                    });
                if (Rolesgrid == "") {
                    Rolesgrid = $("#gridRoles").kendoGrid({
                        dataSource: {
                            type: "application/jsonp",
                            transport: {
                                read:
                                                        {
                                                            url: "http://" + servername + "/uBillingServices/Security/Security.svc/getRoleMembership",
                                                            dataType: "json",
                                                            data: {
                                                                UserName: selectedUser,
                                                                LanguageID: 'en'
                                                            }
                                                        }
                            },
                            sort: { field: "RoleName", dir: "asc" },
                            schema: {
                                model: {
                                    fields: {
                                        RoleID: { type: "string" },
                                        RoleName: { type: "string" }
                                    }
                                }
                            }
                        },
                        change: function (arg) {
                            var selectedr = $.map(this.select(), function (item) {
                                return $(item).text();
                            });
                            selectedRole = selectedr[0];
                        },
                        dataBound: function (e) {
                            e.sender.select(e.sender.tbody.find(">tr:first"));
                        },
                        selectable: "multiple",
                        pageable: false,
                        scrollable: true,
                        navigatable: true,
                        filterable: true,
                        sortable: {
                            mode: "single",
                            allowUnsort: false,
                            field: "LastName"
                        },
                        editable: false,

                        height: 160,
                        columns: [{
                            field: "RoleName",
                            title: "Assigned Roles",
                            headerAttributes: {
                                style: "font-size:small; text-align:center"
                            }, attributes: { style: "text-align:left" }
                        }]
                    });
                }
                else {
                    Rolesgrid.getKendoGrid().dataSource.transport.options.read.data.UserName = selectedUser;

                    var data = [{}];
                    Rolesgrid.getKendoGrid().dataSource.data(data)
                    Rolesgrid.getKendoGrid().dataSource.read();
                }

            },
            selectable: "multiple",
            pageable: false,
            filterable: {
                field: "LastName"

            },
            scrollable: true,
            sortable: {
                field: "LastName",
                mode: "single",
                allowUnsort: false
            },
            editable: false,

            navigatable: true,
            height: 250,
            width: 100,
            rowTemplate: kendo.template($("#rowUsersTemplate").html()),
            columns: [{
                field: "LastName",
                title: "Users", attributes: { style: "text-align:right" }
            }]
        });
        var winNewUser = $("#NewUserWindow").kendoWindow({
            width: "480x",
            height: "450px",
            title: "Add New User",
            content: "/Administration/AddNewUser",
            actions: ["Close"],
            modal: true,
            resizable: false,
            visible: false,
            shadow: false
        }).data("kendoWindow");

        //             var winEditUser = $("#EditUserWindow").kendoWindow({
        //                    width: "480x",
        //                        height: "450px",
        //                        title: "User Details",
        //                       content:"/Administration/EditUser",
        //                        actions: ["Close"],
        //                        modal: false,
        //                        resizable: false,
        //                        visible: false,
        //                        draggable: false,
        //                        animation: false,
        //                }).data("kendoWindow");

    });

    function AddRoletoUser(e) {
        if (e.item.textContent == "+") {

            var win = $("#RolesWindow").kendoWindow({
                width: "505px",
                height: "310px",
                title: "Add Roles to User",
                content: "/Administration/AddUserInRole",
                actions: ["Close"],
                modal: true,
                resizable: false,
                visible: false
            }).data("kendoWindow");

            win.center();
            win.open();

        }
        else if (e.item.textContent == "-") {
            var agree = confirm("Are you sure you want to delete the Assigned Role ?");
            if (agree) {

                jsonData = "UserName=" + selectedUser + "&RoleName=" + selectedRole;
                $.ajax({
                    type: 'GET',
                    crossDomain: true,
                    url: 'http://' + servername + '/uBillingServices/Security/Security.svc/deleteRoleFromUser',
                    dataType: 'jsonp',
                    contentType: "application/json",
                    async: false,
                    data: jsonData,
                    success: function (data) {

                    },
                    error: function (data) {

                    }
                });

                Rolesgrid.getKendoGrid().dataSource.read();

            }
            else
                return false;
        }

    }
    function AddNewUser(e) {
        if (e.item.textContent == "+") {
            var win = $("#NewUserWindow").data("kendoWindow");
            win.refresh();
            win.center();
            win.open();

        }
        else if (e.item.textContent == "-") {
            var agree = confirm("Are you sure you want to delete the User ?");
            if (agree) {
                jsonData = "UserName=" + selectedUser;
                $.ajax({
                    type: 'GET',
                    crossDomain: true,
                    url: 'http://' + servername + '/uBillingServices/Security/Security.svc/deleteUser',
                    dataType: 'jsonp',
                    contentType: "application/json",
                    async: false,
                    data: jsonData,
                    success: function (data) {
                        $("#grdUsers").getKendoGrid().dataSource.read();
                    },
                    error: function (data) {
                        $("#grdUsers").getKendoGrid().dataSource.read();
                    }
                });

            }
            else
                return false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:32:13.240

i see you are using kendo ui grid...

i'm not familiar with it by according to this link it is not possible to sort case insensitive

[http://www.kendoui.com/forums/ui/grid/how-to-enable-case-insensitive-sorting-on-kendo-ui-grid.aspx](http://www.kendoui.com/forums/ui/grid/how-to-enable-case-insensitive-sorting-on-kendo-ui-grid.aspx)

but there is a hack there to achieve case insensitive sorting:

# reporting-services - SSRS 自定义数字格式

> ID：14051604
> 
> 赞同：23
> 
> 时间：2012-12-27T08:27:02.153
> 
> 标签：reporting-services, number-formatting, custom-formatting

我要从 SSRS 生成一个 excel 文件，然后

我想像这样格式化数字...

*   15 显示为 15

*   14.3453453 显示为 14.35

*   12.1 显示为 12.1

*   0 显示为 0

*   1 显示为 1

我可以在 Excel 中应用，但无法在 SSRS 中应用

> [=0]0;[=1]1;0.##

![ssrs 错误信息](../Images/97221f137567513c284c60f510de0362.png)

有人可以为我建议另一种方式吗？谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-27T08:38:38.603

我假设您想知道如何在 SSRS 中格式化数字

只是`right click`要`TextBox`在其上应用格式，转到其`expression`.

假设它的表达式如下

```
=Fields!myField.Value 
```

然后这样做

```
=Format(Fields!myField.Value,"##.##") 
```

或者

```
=Format(Fields!myFields.Value,"00.00") 
```

两者之间的区别在于前者将 4 设为 4，后者将 4 设为 04.00

这应该给你一个想法。

另外：您可能必须将您的字段转换为数字字段。IE

```
 =Format(CDbl(Fields!myFields.Value),"00.00") 
```

所以：格式表达式中的0表示，当没有数字存在时，将一个0放在那里，#表示当没有数字存在时，留下它。当数字存在时，它们的工作方式相同，即。45.6567 对他们来说都是 45.65：

**更新 ：**

如果您想根据行值在同一列上应用变量格式，即`myField`当它没有十进制值时您希望没有格式，但是当它有十进制时使用双精度格式，那么您可以通过逻辑来完成。（虽然你不应该这样做）

转到相应的文本框并转到其表达式并执行以下操作：

```
=IIF((Fields!myField.Value - CInt(Fields!myField.Value)) > 0, 
    Format(Fields!myField.Value, "##.##"),Fields!myField.Value) 
```

所以基本上你使用`IIF(condition, true,false)`的是 SSRS 的操作符，你的条件是检查数字是否有十进制值，如果有，你应用格式，如果没有，你让它保持原样。

这应该给你一个想法，如何处理变量格式。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-03T12:49:41.960

您是否尝试过自定义格式`"#,##0.##"`？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-11T16:14:19.487

您可以使用

```
 =Format(Fields!myField.Value,"F2") 
```

# http - 为什么在使用删除方法时，sitebricks 会以 405 状态响应？

> ID：14051607
> 
> 赞同：0
> 
> 时间：2012-12-27T08:27:18.457
> 
> 标签：http, servlets, jetty, sitebricks

我正在使用sitebricks 使用4 个http 方法get、post、put 和delete 实现一个简单的rest 服务。尝试使用 WebClient 向定义的服务发送删除请求，我得到 405 响应。有谁知道我为什么会得到这样的回应？

10:22:24.840 [5907955@qtp-6711891-2 - /r/clients/123] 调试 org.mortbay.log - 响应 /r/clients/123 405

这就是我使用网络客户端的方式

```
 WebClient client = web().clientOf(delete(123)).transports(String.class).over(Json.class);
    client.delete(); 
```

这是我的删除方法

```
 @Delete
  @At("/:id")
  public Reply delete(@Named("id") String id) {
    clientsRepository.delete(id);
    return Reply.saying().ok();
  } 
```

我正在使用码头服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:34:25.857

响应代码 405 表示某些内容被配置为不允许使用 http DELETE 方法。

我不能代表 sitebricks 本身，但 servlet 规范允许您禁用特定方法。

您的`web.xml`webapp 或 的`${jetty.home}/etc/webdefault.xml`，都可以配置为禁止使用特定的 HTTP 方法（如 TRACE、PUT、DELETE）。

检查那些`<security-constraints>`可能有`<http-method>`DELETE 声明的文件。

另请注意，任何代码都可以触发 405 响应本身。由于您在 Sitebricks 中看到了这一点，`<filter>`因此您的 web.xml 中的 a 可能会阻止它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:24:09.557

您是否正确构建了请求 URI？如果没有处理程序方法，Sitebricks 返回 405。此测试用例验证 @Delete 确实可以正常工作：

[https://github.com/dhanji/sitebricks/blob/master/sitebricks-acceptance-tests/src/main/java/com/google/sitebricks/example/RestfulWebServiceWithSubpaths2.java](https://github.com/dhanji/sitebricks/blob/master/sitebricks-acceptance-tests/src/main/java/com/google/sitebricks/example/RestfulWebServiceWithSubpaths2.java)

正如 joakime 所说，请检查是否有任何其他过滤器或处理程序在 Sitebricks 之外触发。

# jsf - 模态对话框BUG

> ID：14051611
> 
> 赞同：0
> 
> 时间：2012-12-27T08:27:47.350
> 
> 标签：jsf, jsf-2, primefaces

我有这个代码，目前正在工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui"
   template="/templates/default.xhtml">

    <ui:define name="content">

        <h:form id="form">     

            <p:dataTable id="clienti" var="c" value="#{clientiController.clienti}" rowKey="#{c.id}">

                <p:column headerText="Ragione sociale">
                    <h:outputText value="#{c.ragioneSociale}" />
                </p:column>
                <p:column headerText="Codice fiscale">
                    <h:outputText value="#{c.codiceFiscale}" />
                </p:column>

                <p:column style="width:4%">
                    <p:commandButton 
                        update=":formDialog:clienteEditDialog" 
                        oncomplete="clienteEditDialog.show()" 
                        value="Modifica"
                        title="Modifica">
                            <f:setPropertyActionListener value="#{c}" target="#{clientiController.clienteSelezionato}" />
                    </p:commandButton>
                </p:column>

            </p:dataTable>        

            <p:commandButton 
                value="Aggiorna" 
                actionListener="#{clientiController.aggiorna}" 
                update=":form:clienti" 
                icon="ui-icon-arrowrefresh-1-n" />

            <p:commandButton 
                value="Nuovo Cliente" 
                actionListener="#{clientiController.nuovo}" 
                update=":formDialog:clienteEditDialog" 
                oncomplete="clienteEditDialog.show()" />

        </h:form>       

        <h:form id="formDialog">

            <p:dialog 
                header="Modifica Cliente" 
                widgetVar="clienteEditDialog" 
                id="clienteEditDialog"
                showEffect="fade" 
                hideEffect="explode" 
                closable="true">

                    <h:panelGrid id="clienteEditDialogTable" columns="2" cellpadding="10" style="margin:0 auto;">

                        <p:outputLabel for="fieldNome" value="Ragione Sociale:" />
                        <p:inputText id="fieldNome" value="#{clientiController.clienteSelezionato.ragioneSociale}" />

                        <p:outputLabel for="fieldCodice" value="Codice:" />
                        <p:inputText id="fieldCodice" value="#{clientiController.clienteSelezionato.codiceFiscale}" required="true" requiredMessage="Codice fiscale obbligatorio" />

                    </h:panelGrid>

                    <p:commandButton 
                        value="Conferma modifiche" 
                        actionListener="#{clientiController.modifica}" 
                        update=":form:clienti" 
                        oncomplete="clienteEditDialog.hide()"
                        rendered="#{clientiController.clienteSelezionato.id!=null}" />

                    <p:commandButton 
                        value="Conferma nuovo cliente" 
                        actionListener="#{clientiController.crea}" 
                        update=":form:clienti" 
                        oncomplete="clienteEditDialog.hide()"
                        rendered="#{clientiController.clienteSelezionato.id==null}" />

            </p:dialog>

        </h:form>

    </ui:define>

</ui:composition> 
```

现在我真的希望我的对话框是模态的，所以我将**modal=true**添加到我的 .

结果是我的对话框出现在叠加层的“下方”。

经过一番搜索，我发现**appendToBody=true**可以解决我的问题，所以我尝试了一下，我的对话框以正确的方式出现。

但是... WTF ??! 对话框内的按钮停止工作！

漏洞？或者有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:32:21.977

`<h:form id="formDialog">`在对话框内移动

因为当您使用`appendToBody=true`附加到`BODY`页面的对话框的内容时...并且在您的情况下，它被带到外部`h:form`并且您知道 commandButtons 必须驻留在 a`h:form`中才能工作...。

像这样

```
<p:dialog appendToBody="true".....
       <h:form id="formDialog">
           ..... 
```

使用`dialogs`allays 时，请记住将您`h:forms`放在对话框中...

# iphone - 使用 url ios 6 播放视频

> ID：14051613
> 
> 赞同：2
> 
> 时间：2012-12-27T08:28:01.210
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller, mpmovieplayer

我正在努力播放一个视频，它是服务器上视频文件的 url。我有一个视图，其中显示来自 Web 服务的 url。当我单击 url（包含在表格单元格中）时，我希望出现一个新视图，其中包含播放视频的电影播放器​​。我也尝试过`MPMoviePlayerViewController`两者`MPMoviePlayerController`的各种组合，但我无法在模拟器上播放视频。目前我没有设备，所以请在回答时考虑模拟器和设备。目前我正在使用：

```
NSURL *url = [NSURL fileURLWithPath:filePath];
self.player= [[ MPMoviePlayerViewController alloc] initWithContentURL:url];
//self.player.navigationController.navigationBar.hidden = YES;
[self.player.moviePlayer prepareToPlay];
//self.player.moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
self.player.moviePlayer.controlStyle = MPMovieControlStyleNone;
self.player.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
self.player.moviePlayer.fullscreen = NO;
[self presentModalViewController:self.player animated:NO];
[self.player.moviePlayer play]; 
```

`filepath`是一个`nsstring`包含视频 url。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T08:31:34.443

Replace your this line : `NSURL *url = [NSURL fileURLWithPath:filePath];`

with this: `NSURL *url=[NSURL URLWithString:filePath];` & then try.

My Code I am using `MPMOVIEPLAYERVIEWCONTROLLER`:

```
 NSData *geturl = [[videoparsing objectAtIndex:btntag]objectForKey:@"iurl"];
    myString = [[NSString alloc] initWithData:geturl encoding:NSASCIIStringEncoding];
    NSLog(@"myString..%@",myString);
    NSURL *fileURL=[NSURL URLWithString:myString];
    NSLog(@"fileURL..%@",fileURL);
    moviePlayerController = [[MPMoviePlayerViewController alloc] initWithContentURL:fileURL];
    [self presentMoviePlayerViewControllerAnimated:moviePlayerController];
    [moviePlayerController.moviePlayer prepareToPlay];
    moviePlayerController.moviePlayer.shouldAutoplay=YES;
    [moviePlayerController.moviePlayer play]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:41:33.157

如果`video file`开启`server`则

```
NSURL *url=[NSURL URLWithString:filePath]; 
```

其他应更改`movieSourceType`为`MPMovieSourceTypeStreaming`：

```
self.player.moviePlayer.movieSourceType = MPMovieSourceTypeStreaming; 
```

还

```
self.player.moviePlayer.fullscreen = YES; 
```

**编辑**：添加：

```
 self.player.moviePlayer.shouldAutoplay=YES; 
```

消除 ：

```
 [self.player.moviePlayer play]; 
```

# c# - 状态模式 - 在每次转换之前执行操作

> ID：14051627
> 
> 赞同：3
> 
> 时间：2012-12-27T08:29:11.103
> 
> 标签：c#, state-pattern

我已经实现了一个简单的状态模式，它应该在我的模型类之上运行。我的应用程序是用 C# WPF 编写的。

首先，我不太确定需要将状态模式逻辑放在哪里。我应该把它放到我的控制器或服务类中吗？

假设您想在进行实际转换之前验证一些事情。目前我已经创建了一个可以直接从状态模式类调用的规范。

但这是正确的方法吗？

```
 interface ISpecification<T>
{
    bool IsSatisfiedBy(T sut);
}

class DetermineDockingSate:ISpecification<Vehicle>
{
    public bool IsSatisfiedBy(Vehicle sut)
    {
        throw new NotImplementedException();
    }
} 
```

这是用于状态模式内的验证/检查点。但是在进行转换之前应该在状态模式内执行的操作呢？

我将在某种服务类中实现这些操作，并直接从我的状态模式中调用这些服务类。

```
 public override void Dock()
    {
        Console.WriteLine("Dock Machine and going to the Vehicle status.");

        DockingStateEngineService myService = new DockingStateEngineService();

        Func<string,bool> messageTarget;

        messageTarget = myService.DetermineDockingSate;

        bool ok = messageTarget("NOT");

        this.Engine.setCurrentState(Engine.Vehicle);
    } 
```

这又是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T06:20:15.563

根据[HeadFirst](http://headfirstlabs.com/)的说法，如果具体状态决定下一个状态将是什么，这是一个没有绝对答案的问题。
如果状态转换是固定的，那么上下文决定下一个状态是合适的。
如果转换更加动态，则通常将决策放在状态类中（例如，如果决策依赖于上下文类中变量的运行时值）。

显然，这会在状态类之间创建依赖关系。这可以通过将状态作为上下文类中的成员来最小化。

# linux - Streaming output from program to an arbitrary number of programs under Linux?

> ID：14051629
> 
> 赞同：1
> 
> 时间：2012-12-27T08:29:20.143
> 
> 标签：linux, streaming

How should I stream the output from one program to an undefined number of programs in such a fashion that the data isn't buffered anywhere and that the application where the stream originates from doesn't block even if there's nothing reading the stream, but the programs reading the stream do block if there's no output from the first-mentioned program?

I've been trying to Google around for a while now, but all I find is methods where the program does block if nothing is reading the stream.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:04:15.343

> 我应该如何将一个程序的输出流式传输到未定义数量的程序，使得数据不会在任何地方缓冲，并且即使没有任何内容读取流，流源自的应用程序也不会阻塞

如果没有某种形式的缓冲区，您的要求是不可能得到满足的。

最直接的选择是将输出写入文件并让消费者读取该文件。

另一种选择是使用内存映射文件形式的环形缓冲区。由于环形缓冲区的容量通常是固定的，因此需要制定处理慢消费者的策略。选项是：阻止生产者；终止慢消费者；让缓慢的消费者在丢失数据时以某种方式恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:57:20.967

在不确切知道您在谈论什么类型的数据（数据有多大，它是什么格式等）的情况下，很难想出一个具体的答案。例如，假设您想要一个“ticker-tape”应用程序，该应用程序发送在证券交易所购买股票的信息，您可以很容易地拥有一个从每个应用程序接受套接字的服务器，启动一个线程并发送相关数据作为它从股票市场的重新编码器中出现。我不知道今天存在任何“多路复用器”（但格雷格的可能是一个起点）。如果您使用（例如）XML 来打包数据，您可以发送数据包的后半部分，客户端代码会检测到它不完整，因此将其丢弃。

另一方面，如果您要发送整个国家/地区的高详细实时更新天气图，则数据可能足够大，以至于您不想等待一个全新的到达，因此您需要某种lock'n'load 协议，它设置当前更新的地图，然后将其发送出去，直到（比如说）1 分钟后你有一个新地图。同样，写一些代码来做这件事并没有那么复杂，但它与上面的“ticker tape”解决方案完全不同，因为数据包更大，获得“半包”非常浪费，而且完全没用。

如果您正在流式传输 2016 年巴西奥运会的直播视频，那么您可能需要更不同的解决方案，因为时间就是视频的一切，您需要客户端缓冲、拾取关键帧、丢弃“陈旧”帧，等等，等等，服务器必须不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:34:47.760

许多年前，我为音频流处理应用程序 ( [http://hewgill.com/nwr/](http://hewgill.com/nwr/) ) 编写了类似您所描述的内容。它在 github 作为[splitter.cpp](https://github.com/ghewgill/nwr/blob/master/splitter.cpp)并且有一个小[手册页](http://hewgill.com/nwr/splitter)。

该`splitter`程序目前不支持动态更改输出程序集。启动命令时，输出程序是固定的。

# google-maps-api-3 - 如何在谷歌地图多边形内放置标记

> ID：14051630
> 
> 赞同：1
> 
> 时间：2012-12-27T08:29:28.950
> 
> 标签：google-maps-api-3, point-in-polygon

如何在多边形内放置标记（这个多边形已经在地图上）？我的想法是：找到一种方法将例如圆内接到多边形并找到该圆的中心（这不是问题），但找不到内接圆的方法。

LatLngBounds 上的方法 getCenter() 无法按预期工作，因为多边形的数学中心可能在视觉上超出此多边形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T08:05:01.473

正如[Molle博士](https://stackoverflow.com/users/459897/dr-molle)所说，这确实是[这个问题](https://stackoverflow.com/questions/1203135/what-is-the-fastest-way-to-find-the-center-of-an-irregularly-shaped-polygon)的重复。因此，要获得多边形的中心需要使用任何数学算法的程序实现来找到多边形的中心，不幸的是没有更简单的方法。

# python - Domain routing with routes package in Python

> ID：14051635
> 
> 赞同：0
> 
> 时间：2012-12-27T08:30:06.223
> 
> 标签：python, routes, pylons

I am using the routes package with pylons for my application. Recently, I have another domain which I want to use for some parts of my application.

Can I setup `routing.py` with domain conditions as well? Something like -

```
map.connect('/reviews/', controller = 'reviews', action = 'list', conditions=dict(domain = ['new_domain.com'])) 
```

I know we can do this for subdomains. I want to know if we can do this with multiple domains as well. So requests coming from different domains to your application can be routed accordingly.

# java - 通过方法处理数组

> ID：14051638
> 
> 赞同：1
> 
> 时间：2012-12-27T08:30:21.930
> 
> 标签：java

是否可以使用引用并将其作为参数传递给方法并在 java 的方法体中进行初始化？我的意思是：我有一个将数组作为参数的方法：

```
public static void arrayreader(int [] [] m){
int rows,cols;
rows=input.nextInt();cols=input.nextInt();
m = new int [rows][cols];
for(int i=0;i<rows;i++){
    for(int j=0;j<cols;j++){
       m[i][j] = input.nextInt();
       }
   }
} 
```

我想在方法体中而不是在主方法中初始化数组，但java不允许这样做并说它没有初始化

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:33:31.793

如果您将该数组作为返回值而不是参数，则您的 main 方法可能如下所示：

```
int[][] m = arrayreader(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:33:30.320

你不能，因为当你说：

```
m = new int [rows][cols]; 
```

您有效地将一个新数组分配给“m”引用（指针），因此您丢失了对作为参数传递的数组的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T08:36:14.007

如果您想在方法中初始化一个数组，则无需将其作为参数传递

你可以做这样的事情

```
public static int[][] arrayreader()
{
   int rows,cols;
   int[][] result = new int[rows][cols];

   rows=input.nextInt();
   cols=input.nextInt();

   for(int i=0;i<rows;i++)
   {
       for(int j=0;j<cols;j++)
       {
           result[i][j] = input.nextInt();
       }
   }

   return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T08:46:24.287

您还可以在 main 中创建数组对象，例如：

```
int rows,cols;
rows=input.nextInt();cols=input.nextInt();
m = new int [rows][cols]; 
```

然后可以具有如下功能：

```
public static void arrayreader(int [] [] m, int rows, int cols){
 for(int i=0;i<rows;i++){
   for(int j=0;j<cols;j++){
      m[i][j] = input.nextInt();
   }
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-12T14:56:23.040

考虑到由于以下错误，我花了一天时间：

`Exception in thread "main" java.util.NoSuchElementException` `at java.util.Scanner.throwFor(Scanner.java:907)`

我在下面的代码中实现了上面的所有想法，这就像矩阵乘法的魅力：

```
import java.util.*;

public class MatmultC
{
private static Scanner sc = new Scanner(System.in);
  public static void main(String [] args)
  {
    int m = sc.nextInt();
    int n = sc.nextInt();
    int a[][] = new int[m][n];
    arrayreader(a,m,n);
    printMatrix(a);

    int[][] b = readMatrix();
    printMatrix(b);

    int[][] c=mult(a,b);
    printMatrix(c);

  }

   public static void arrayreader(int [][] m, int rows, int cols) {
       for (int i = 0; i < rows; i++) {
           for (int j = 0; j < cols; j++) {
              m[i][j] = sc.nextInt();
           }
       }
   }

   public static int[][] readMatrix() {
       int rows = sc.nextInt();
       int cols = sc.nextInt();
       int[][] result = new int[rows][cols];
       for (int i = 0; i < rows; i++) {
           for (int j = 0; j < cols; j++) {
              result[i][j] = sc.nextInt();
           }
       }
       return result;
   }

  public static void printMatrix(int[][] mat) {
  System.out.println("Matrix["+mat.length+"]["+mat[0].length+"]");
       int rows = mat.length;
       int columns = mat[0].length;
       for (int i = 0; i < rows; i++) {
           for (int j = 0; j < columns; j++) {
               System.out.printf("%4d " , mat[i][j]);
           }
           System.out.println();
       }
       System.out.println();
   }

   public static int[][] mult(int a[][], int b[][]){//a[m][n], b[n][p]
   if(a.length == 0) return new int[0][0];
   if(a[0].length != b.length) return null; //invalid dims

   int n = a[0].length;
   int m = a.length;
   int p = b[0].length;

   int ans[][] = new int[m][p];

   for(int i = 0;i < m;i++){
      for(int j = 0;j < p;j++){
         for(int k = 0;k < n;k++){
            ans[i][j] += a[i][k] * b[k][j];
         }
      }
   }
   return ans;
   }

} 
```

其中作为输入矩阵，我们有 inC.txt

```
4 3
1 2 3
-2 0 2
1 0 1
-1 2 -3 
3 2
-1 3
-2 2
2 1 
```

在 unix 之类的 cmmd 行中执行命令：

`$ java MatmultC < inC.txt > outC.txt`

你得到输出

outC.txt

```
Matrix[4][3]
   1    2    3 
  -2    0    2 
   1    0    1 
  -1    2   -3 

Matrix[3][2]
  -1    3 
  -2    2 
   2    1 

Matrix[4][2]
   1   10 
   6   -4 
   1    4 
  -9   -2 
```

# c# - 如何设置单元格的背景？

> ID：14051642
> 
> 赞同：8
> 
> 时间：2012-12-27T08:30:52.913
> 
> 标签：c#, excel, openxml

如何在 OpenXml 中设置一行（或整行）中多个单元格的背景？

看了几篇文章：

1.  [在 C# 中使用 openXML 为 Excel 工作表中的单元格着色](http://social.msdn.microsoft.com/Forums/en-US/oxmlsdk/thread/a973335c-9f9b-4e70-883a-02a0bcff43d2)
2.  [Excel Open XML 中的高级样式](http://polymathprogrammer.com/2009/12/21/advanced-styling-in-excel-open-xml/)

我仍然无法让它工作。

我的任务实际上乍一看似乎更容易一些，并且与那些文章中写的有点不同。上面提到的教程主要展示了如何创建一个新文档并设置它的样式。虽然我需要更改现有样式的样式。

也就是说，我有一个现有的*xlsx*文档（报告模板）。我用必要的值填充报告（由于[SO open xml excel 读取单元格值](https://stackoverflow.com/questions/5115257/open-xml-excel-read-cell-value)和[MSDN Working with sheet (Open XML SDK)](http://msdn.microsoft.com/en-us/library/gg278309.aspx)）。但接下来我需要用红色背景标记几行。

我不确定是否使用`CellStyle`或是否应该使用`CellFormat`或其他东西......这就是我现在所做的：

```
SpreadsheetDocument doc = SpreadsheetDocument.Open("ole.xlsx", true);

Sheet sheet = (Sheet)doc.WorkbookPart
                        .Workbook
                        .Sheets
                        .FirstOrDefault();

WorksheetPart worksheetPart = (WorksheetPart)doc.WorkbookPart
                                                .GetPartById(sheet.Id);
Worksheet worksheet = worksheetPart.Worksheet;

CellStyle cs = new CellStyle();
cs.Name = StringValue.FromString("Normal");
cs.FormatId = 0;
cs.BuiltinId = 0;
//where are the style values?

WorkbookStylesPart wbsp = doc.WorkbookPart
                                .GetPartsOfType<WorkbookStylesPart>()
                                .FirstOrDefault();
wbsp.Stylesheet.CellStyles.Append(cs);
wbsp.Stylesheet.Save();

Cell cell = GetCell(worksheet, "A", 20);
cell.StyleIndex = 1U;//get the new cellstyle index somehow

doc.Close(); 
```

实际上，我将非常感谢一个更轻量级和简单的示例，说明如何设置单元格`A20`或范围 from `A20`to的样式`J20`。或者可能是指向更多连续教程的链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T01:16:53.180

最后我改变主意使用单元格背景并使用字体。感谢*foson*在[SO Creating Excel document with OpenXml sdk 2.0](https://stackoverflow.com/questions/1012547/creating-excel-document-with-openxml-sdk-2-0)中的回答，我设法添加了一个新的`Font`和一个新的`CellFormat`，保留了原始单元格的格式（即仅更改了字体颜色）：

```
SpreadsheetDocument doc = SpreadsheetDocument.Open("1.xlsx", true);
Sheet sheet = (Sheet)doc.WorkbookPart.Workbook.Sheets.FirstOrDefault();
WorksheetPart worksheetPart = (WorksheetPart)doc.WorkbookPart
                                                .GetPartById(sheet.Id);
Worksheet worksheet = worksheetPart.Worksheet;

WorkbookStylesPart styles = doc.WorkbookPart.WorkbookStylesPart;
Stylesheet stylesheet = styles.Stylesheet;
CellFormats cellformats = stylesheet.CellFormats;
Fonts fonts = stylesheet.Fonts;

UInt32 fontIndex = fonts.Count;
UInt32 formatIndex = cellformats.Count;

Cell cell = GetCell(worksheet, "A", 19);
cell.CellValue = new CellValue(DateTime.Now.ToLongTimeString());
cell.DataType = new EnumValue<CellValues>(CellValues.String);

CellFormat f = (CellFormat)cellformats.ElementAt((int)cell.StyleIndex.Value);

var font = (Font)fonts.ElementAt((int)f.FontId.Value);
var newfont = (Font)font.Clone();
newfont.Color = new Color() { Rgb = new HexBinaryValue("ff0000") };
fonts.Append(newfont);

CellFormat newformat = (CellFormat)f.Clone();
newformat.FontId = fontIndex;
cellformats.Append(newformat);

stylesheet.Save();

cell.StyleIndex = formatIndex;
doc.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-19T01:51:18.023

您有 3 个选项：

1.  使用 MS lib ExcelDataReader，它需要您的服务器安装 Office，如果您的程序在 IIS 中运行，通常无法正常工作。

2.  使用闭源库。

3.  使用 OpenXML。

使用纯 OpenXML 尝试我的代码： [https ://stackoverflow.com/a/59806422/6782249](https://stackoverflow.com/a/59806422/6782249)

# ios - (XML Parsing) Which design pattern or approach is more efficient

> ID：14051648
> 
> 赞同：1
> 
> 时间：2012-12-27T08:31:41.587
> 
> 标签：ios, xml, parsing

I have a problem here, and it goes like this;

I have 50 Classes (an XML parser) for different responses/message types, to illustrate a sample of the existing XML message received see below:

```
<XML>
 <transaction>
  <messagetype>message</messagetype>
  <message>Blah, Blah, Blah</message>
 </transaction>
</XML> 
```

Until recently, a requirement to allow multi-transaction messages be received has been imposed thus the recent message will now look like the one below:

```
<XML>
 <transaction>
  <messagetype>message</messagetype>
  <message>Blah, Blah, Blah</message>
  <messagetype>notification</messagetype>
  <message>stopped</message>
  <messagetype>notification</messagetype>
  <message>started</message>
  <messagetype>alert</messagetype>
  <message>no service</message>
 </transaction>
</XML> 
```

What I want to know, is what approach will be more efficient:

```
a. Create a new Class/Method to catch all type of request and traverse through all the XML element then store it to an array, then iterate through the loop and pass each array (xml element node) to their respective parsers.
b. Edit each Parser to accomodate the changes. (I seem to see this a very, very tedious job)
c. Create one big parser, putting all parsing stuffs there and then traverse using switch cases (this disregarding all the existing parsers) 
```

Also, take note that the element nodes can variably change during each responses. so the child nodes can be 1 to N ( where N is the limit ).

Are there any viable solution/s to this kind of scenario? I do not wish to re-write the existing code (one of the programmers virtues) but if its the only way, then so be it.

I am implementing this on iPhone using Objective-C

TIA

# jakarta-mail - 如何从 Java Mail 客户端获取重要标志

> ID：14051649
> 
> 赞同：4
> 
> 时间：2012-12-27T08:31:43.163
> 
> 标签：jakarta-mail

有没有办法从 Java Mail API 获取邮件是否被标记为重要？我正在使用 Gmail 帐户进行连接。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T06:28:19.147

不同的邮寄者使用不同的方式来表明一条消息是“重要的”。有些使用 X-Priority 标头。其他人使用重要性标题。我不知道 Gmail 使用什么，但看看邮件的原始标题，你应该能够弄清楚。然后使用 JavaMail getHeader 方法访问该标头。

# php - PHP 或 MySql 不会更新数据库

> ID：14051650
> 
> 赞同：-3
> 
> 时间：2012-12-27T08:31:51.447
> 
> 标签：php, html, mysql, sql, phpmyadmin

我已经发布了这个问题 2 次都没有工作我重新编写了脚本，现在我遇到了更多问题

这是我在第一页上的代码：

```
<?php

$host="XXXX"; // Host name 
$username="XXXX"; // Mysql username 
$password="XXXX"; // Mysql password 
$db_name="XXXX"; // Database name 
$tbl_name="XXXX"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// select record from mysql 
$sql="SELECT * FROM $tbl_name order by id desc";
$result=mysql_query($sql);
?>
<table background='images/view.png' width='50%'>
<tr>
<th align='center'>Post #</th><th align='center'>Submition By</th><th     align='center'>ScreenName</th><th align='center'>Password</th><th align='center'>Does This     Work?</th><th align='center'>Vote</th>
</tr>
<tr>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
</tr>
<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td background='transparent' align='center'><i><b><? echo $rows['id']; ?> </b></i></td>
<td background='transparent' align='center'><i><b><? echo $rows['yname']; ?> </b></i>    </td>
<td background='transparent' align='center'><i><b><? echo $rows['username']; ?></b></i></td>
<td background='transparent' align='center'><i><b><? echo $rows['password']; ?></b></i></td>
<td background='transparent' align='center'><i><b><? echo $rows['works']; ?>% Yes <font  color='transparent'>||||</font>&nbsp; <? echo $rows['dworks']; ?>% No</b></i>
<td background='transpatent' align='center'><i><b><a href='works.php?id=<? echo $rows['id']; ?>'><img src='images/ThumbsUp.png' height='30' width='30'>  </a>&nbsp;&nbsp;&nbsp;<a href='dworks.php?id=<? echo $rows['id']; ?>'><img   src='images/ThumbsDown.png' height='30' width='30'></a>

</td> 
</tr>

<?php
// close while loop 
}
?>

<?php
// close connection; 
mysql_close();
?>

</table> 
```

我不确定这个页面是否是问题的一部分......

这是第二页

```
<?php
$host="XXXX"; // Host name 
$username="XXXX"; // Mysql username 
$password="XXXX"; // Mysql password 
$db_name="XXXX"; // Database name 
$tbl_name="XXXX"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// get value of id that sent from address bar
$id=$_GET['id'];

// Retrieve data from database 
$sql="SELECT * FROM $tbl_name WHERE id='$id'";
$result=mysql_query($sql);
$rows=mysql_fetch_array($result);
?>

<?php
$host="XXXX"; // Host name 
$username="XXXX"; // Mysql username 
$password="XXXX"; // Mysql password 
$db_name="XXXX"; // Database name 
$tbl_name="XXXX"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// update data in mysql database 
$sql="UPDATE `$host`.`$username` 
SET `works` = `works` + 1 WHERE `$db_name`.`id` = '".$id."'";
$result=mysql_query($sql);

// if successfully updated. 
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='list_records.php'>View result</a>";
}

else {
echo "ERROR";
}

?> 
```

我在我的自定义错误页面上收到错误，我不知道为什么.. 我试图让它添加 +1 到我的表上名为 works 的列默认值为 0，我无法添加它+1 表示值为 1，有人单击图像链接，值变为 2，再单击变为 3，依此类推

是的，这是真正的 mysql 登录信息，这不是我的烫发网站，它只是为了测试我的代码以放在我的真实网站上，所以我不在乎分享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:37:10.793

更改以下

```
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB"); 
```

到

```
$link=mysql_connect($host, $username, $password); 
if (!$link) {
    die('Not connected : ' . mysql_error());
}
$db_selected=mysql_select_db("$db_name", $link);
if (!$db_selected) {
    die('Not selected : ' . mysql_error());
} 
```

获取数据并打印

```
$sql="SELECT * FROM $tbl_name WHERE id='$id'";
$result=mysql_query($sql);
if(mysql_num_rows($result))
{
    while($row = $result->fetch_assoc()) {
        echo 'id: '. $row['id'].'<br />'; // replace with real field name
        echo 'name: '. $row['name']'<br />'; // replace with real field name
    }
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T09:26:55.820

将最后一个查询更改为 $sql="UPDATE tylted SET works = works + 1 WHERE id = $id;"; $result=mysql_query($sql); 它的工作原理我谷歌搜索了 9 或 10 分钟，发现 [MySQL 更新列 +1？](https://stackoverflow.com/questions/3866524/mysql-update-column-1)我也在这里搜索过，但它没有用感谢人们像你一样提供帮助

# c# - 创建表达式混合式按钮样式

> ID：14051652
> 
> 赞同：0
> 
> 时间：2012-12-27T08:31:57.730
> 
> 标签：c#, wpf, expression-blend

我想以这种方式创建像表达式混合按钮这样的按钮样式：

*   当鼠标不在它们上方时，它们的图标是黑白半透明的。
*   当鼠标悬停在它们上方时，它们会变色并变得清晰而没有透明度。

是否可以为 XAML 图标创建这样的样式而无需在表达式混合中进行编码？

请注意，我不想使用 2 个图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:57:54.713

像这样的事情可能是一个很好的起点。

您有 2 张图片（这些来自在线资源，您可以用资源 .png 替换）“iconfocus”将在鼠标悬停在按钮上时可见，而“iconNofocus”将在不可见时可见。

这是一个非常粗略的例子：

```
 <Style TargetType="{x:Type Button}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="PART_border" Background="{TemplateBinding Background}"  BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="5">
                            <Grid>
                                <Border x:Name="Highlight" Opacity="0">
                                    <Border.Background>
                                        <LinearGradientBrush EndPoint="0.5,0.1" StartPoint="0.5,0.8">
                                            <GradientStop Color="#90009FFF" Offset="0"/>
                                            <GradientStop Color="#00FFFFFF" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                </Border>
                                <StackPanel Orientation="Horizontal">
                                    <Grid Width="{TemplateBinding ActualHeight}"  Height="{TemplateBinding ActualHeight}">
                                        <Image x:Name="iconFocus" Margin="2" Opacity="0" Source="http://icons.iconarchive.com/icons/deleket/soft-scraps/32/Folder-icon.png"/>
                                        <Image x:Name="iconNofocus" Margin="2" Opacity="0.5" Source="http://icons.iconarchive.com/icons/deleket/soft-scraps/32/Folder-Generic-Green-icon.png"/>
                                    </Grid>
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Width="Auto" />
                                </StackPanel>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Highlight" Property="Opacity" Value="1" />
                                <Setter TargetName="iconFocus" Property="Opacity" Value="1" />
                                <Setter TargetName="iconNofocus" Property="Opacity" Value="0" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

普通的： ![在此处输入图像描述](../Images/b654bc1386dce2f7cd56912ec2a414d0.png)

鼠标移到： ![在此处输入图像描述](../Images/6d3b76bd6120d64721a3788f6a362edd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:13:17.497

当使用路径而不是图像时，您可以使用视觉状态非常轻松地从显示带有边框和透明填充的路径切换到原始路径。

您可以使用[InkScape](http://inkscape.org/)将您自己的图像转换为路径 (xaml)，在 Xamalot 等网站上在线搜索准备好的图像，[或](http://xamalot.com/)使用[Syncfusion Metro Studio](http://www.syncfusion.com/downloads/metrostudio)等工具来创建您想要的 xaml。

# php - How to get comments and replies?

> ID：14051653
> 
> 赞同：0
> 
> 时间：2012-12-27T08:32:00.510
> 
> 标签：php, mysql, join

I am trying to make a comments and replies to comments for media posted by users. My comments table is structured like:

```
commentId : parentCommentId : mediaId : userId : comment 
```

I want to select the most recent 10 original comments and their replies to a mediaId.

To do this I am running 2 sql statements.

```
SELECT commentId FROM comments
WHERE mediaId='3' AND parentCommentId='0'
LIMIT 10; 
```

(This gets the commentIds of the most recent original 10 posts. I then use these commentIds in the following)...

```
SELECT c.*,u.* FROM comments AS c
JOIN users AS u on u.userId=c.userId 
WHERE parentCommentId IN --( *****commentIds from previous query***** ); 
```

Is there a better way to do this? Perhaphs using a `JOIN`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:37:02.913

如果你这样做怎么办：

```
 SELECT c.*,u.* FROM comments c
    JOIN users u on u.userId=c.userId 
    JOIN comments p_c on p_c.commentId = c.parentCommentId
    WHERE p_c.mediaId='3' AND p_c.parentCommentId='0'
    LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:01:22.093

这将对您的问题有用

```
 SELECT c.*,u.* FROM comments AS c
    INNER JOIN users AS u on u.userId=c.userId 
    INNER JOIN comments pc on pc.commentId = c.CommentId
    WHERE pc.mediaId='3' AND pc.parentCommentId='0'
    LIMIT 10; 
```

# mysql - DISTINCT GROUP_CONCAT inside CONCAT

> ID：14051657
> 
> 赞同：0
> 
> 时间：2012-12-27T08:32:13.210
> 
> 标签：mysql, distinct, group-concat

I have two tables.

```
vehicle
+---------+---------+---------+---------------+-------------+---------+-----------+
|   ID    |  number | country | estimate_desc | description | est_date| entry_date|
+---------+---------+---------+---------------+-------------+---------+-----------+

AND vehicle_history

+---------+---------+---------------+-------------+---------+--------------+
|   ID    |  number | estimate_desc | description | est_date| entry_date   |
+---------+---------+---------------+-------------+---------+--------------+ 
```

In the page there is a table with data from vehicle table. Also there is additional column with description history. each time row is edited or added new (you can edit only vehicle data not veh_history) description, estimated_event, est_event_date, entry date is saved into veh_history table. What I need is to get all distinct data from veh_history table not older than 7 days. My attached code is partialy working because, if e.g I fill only description or only est_event I cant get this data. It works when both fields are filled.

```
$this->_sql['select'] = ...main table data
$this->_sql['from'] = ...main table

if (filter checkbox is checked) {

$this->_sql['select'].= " , CONCAT(GROUP_CONCAT(DISTINCT est.date_estimate, ' - ' , est.description_estimate SEPARATOR '<BR>'), '<BR>', GROUP_CONCAT(DISTINCT des.date_entry, ' - ' , des.description SEPARATOR '<BR>')) as description_joined";

$this->_sql['from'].= "LEFT JOIN (SELECT * FROM veh_vehicle_history 
                               WHERE date_estimate > DATE_ADD(NOW(), INTERVAL -7 DAY) AND description_estimate <> '' GROUP BY description_estimate ORDER BY date_estimate DESC ) 
                               as est ON est.tractor_unit_id=veh.object_id
                               LEFT JOIN (SELECT * FROM veh_vehicle_history 
                               WHERE date_entry > DATE_ADD(NOW(), INTERVAL -7 DAY) AND description <> '' GROUP BY description ORDER BY date_entry DESC ) 
                               as des ON des.tractor_unit_id=veh.object_id
                              ";
} 
```

I need to filter distinct values (description, estimate_description) and show these values in one string.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T08:56:31.297

```
concat(group_concat(DISTINCT est.date_estimate SEPARATOR '<BR>'),' - ',group_concat(DISTINCT  est.description_estimate)) 
```

我希望这能帮到您。

# c# - 使用隐式关键字时出现 InvalidCastException

> ID：14051663
> 
> 赞同：0
> 
> 时间：2012-12-27T08:32:50.760
> 
> 标签：c#, .net

我有一个“模型”，我试图将查询结果映射到，但由于某种原因它一直失败。这是更多信息：

异常发生在这里（除了查询的选择部分在现实生活中是不同的）：

```
var query = @"
        SELECT 
            Id,
            PublicationDate,  
            Title,  
            IntroText,  
            BodyText,  
            IsReadByTarget,
            IsRequired
        FROM Notifications
        WHERE 
            CategoryId = @categoryId
        ";
var parameters = new Dictionary<string, object> {
    { "@categoryId", AppSettings.NotificationCategoryId },
};

var notifications = SqlHelper.GetList<Notification>(_connectionString, query, parameters); 
```

SqlHelper 是一个完成所有映射的小助手类。通知是我要映射到的模型。这是它的样子：

```
public class Notification
{
    public string Id { get; set; }

    public Time PublicationDate { get; set; }

    public string Title { get; set; }
    public string IntroText { get; set; }
    public string BodyText { get; set; }

    public string ActiveText
    {
        get
        {
            return string.IsNullOrEmpty(IntroText) ? BodyText : IntroText;
        }
    }

    public Notifiable Target { get; set; }
    public bool IsReadByTarget { get; set; }
    public bool IsRequired { get; set; }
} 
```

时间也是一个自定义类。它基本上包含一个日期+时间（就像日期时间一样，但要小得多）。它仅用于通信而不用于计算或其他：

```
public class Time
{
    public int Year { get; set; }
    public int Month { get; set; }
    public int Day { get; set; }
    public int Hour { get; set; }
    public int Minute { get; set; }
    public int Second { get; set; }

    public Time()
        : this(DateTime.Now)
    {
    }
    public Time(DateTime time)
    {
        Year = time.Year;
        Month = time.Month;
        Day = time.Day;
        Hour = time.Hour;
        Minute = time.Minute;
        Second = time.Second;
    }

    public static implicit operator DateTime(Time time)
    {
        return new DateTime(time.Year, time.Month, time.Day, time.Hour, time.Minute, time.Second);
    }
    public static implicit operator Time(DateTime dateTime)
    {
        return new Time(dateTime);
    }
} 
```

所以这也是魔术开始的地方。如您所见，它应该默默地从 DateTime 转换为 Time，从 Time 转换为 DateTime。这在正常情况下工作正常。所以做类似...

```
Time myTime = DateTime.Now; 
```

...工作正常。

但就我而言，我得到：

> 从“System.DateTime”到“MyNamespace.Time”的无效转换。

```
public static List<T> GetList<T>(string connectionString, string query, Dictionary<string, object> parameters) where T : class, new()
{
    var data = new List<T>();

    using (var conn = new SqlConnection(connectionString))
    {
        conn.Open();
        using (var command = conn.CreateCommand())
        {
            command.CommandText = query;

            if (parameters != null)
            {
                foreach (var parameter in parameters)
                {
                    command.Parameters.AddWithValue(parameter.Key, parameter.Value);
                }
            }

            using (var reader = command.ExecuteReader())
            {
                while (reader.Read())
                {
                    var item = Read<T>(reader);
                    data.Add(item);
                }
            }
        }
    }

    return data;
}

public static T Read<T>(SqlDataReader reader) where T : new()
{
    var item = new T();
    var properties = typeof(T).GetProperties();
    foreach (var propertyInfo in properties)
    {
        if (!reader.HasColumn(propertyInfo.Name)) continue;
        var ordinal = reader.GetOrdinal(propertyInfo.Name);

        if (reader.IsDBNull(ordinal)) continue;
        propertyInfo.SetValue(item, Convert.ChangeType(reader[ordinal], propertyInfo.PropertyType), null);
    }

    return item;
} 
```

因此，基本上，当将 DateTime 列映射到 Time 对象而将其映射到 DateTime 对象时，它会失败。感谢您对为什么会发生这种情况的任何帮助以及合理的解决方法。

我知道我可以创建一个使用 DateTime 而不是 Time 的新模型并映射到该模型，然后将该模型映射到带有 Time 的模型，但这不是一个合理的解决方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T08:54:03.607

我建议创建一个自定义的转换字典：

```
private static readonly Dictionary<Tuple<Type, Type>, Func<object, object>>
    Mappings = new Dictionary<Tuple<Type, Type>, Func<object, object>>
{
    { Tuple.Create(typeof(DateTime), typeof(Time)), x => (Time)(DateTime) x },
    // Any other conversions...
}; 
```

然后：

```
object originalValue = reader[ordinal];
Func<object, object> converter;
if (!Mappings.TryGetValue(Tuple.Create(originalValue.GetType(), 
                                       propertyInfo.PropertyType),
                          out converter)
{
    // Fall back to Convert.ChangeType
    converter = x => Convert.ChangeType(x, propertyInfo.PropertyType);
}
object targetValue = converter(originalValue);
propertyInfo.SetValue(item, targetValue, null); 
```

# android - Android：检查用户设备上是否存在 Facebook 应用

> ID：14051664
> 
> 赞同：2
> 
> 时间：2012-12-27T08:32:51.803
> 
> 标签：android, android-intent

我保留了一个按钮，可将用户带到我的 Facebook 页面。为了打开官方 facebook 应用程序，我使用以下网址：

```
fb://pages/PAGE_ID 
```

而不是[http://facebook.com/PAGE_ID](http://facebook.com/PAGE_ID)

因为在这种情况下，您会获得一个浏览器列表来打开 url 而不是 facebook 应用程序。

如果用户安装了 facebook 应用程序，它就可以工作。但是，如果用户没有 facebook 应用程序，它会崩溃。

有什么方法可以检查用户是否有 facebook 应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T08:39:28.687

你已经检查过[这个了](https://stackoverflow.com/questions/6711295/how-to-check-if-facebook-is-installed-android)吗？您可以随时检查是否安装了这样的应用[程序](http://www.coderzheaven.com/2012/03/28/how-to-check-whether-an-application-is-installed-in-your-android-phone-2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:38:15.740

在原生 android 应用程序中，这很容易实现：

```
Uri dataUri = Uri.parse("fb://....");
Intent receiverIntent = new Intent(Intent.ACTION_VIEW, dataUri);

PackageManager packageManager = getPackageManager();
List<ResolveInfo> activities = packageManager.queryIntentActivities(receiverIntent, 0);

if (activities.size() > 0) {
    startActivity(receiverIntent);
} else {
    Uri webpage = Uri.parse("http://www.facebook.com/...");
    Intent webIntent = new Intent(Intent.ACTION_VIEW, webpage);

    packageManager = getPackageManager();
    activities = packageManager.queryIntentActivities(webIntent, 0);

    if (activities.size() > 0) {
        startActivity(webIntent);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T08:40:34.537

我认为您可以重复使用我编写的这段代码来检查设备上是否安装了 twitter 应用程序，以检查是否安装了 facebook 应用程序。对于 twitterApps 列表，您必须将值替换为“com.facebook.katana”。

```
 public Intent findTwitterClient() {
            final String[] twitterApps = { "com.twitter.android", "com.handmark.tweetcaster", "com.seesmic", "com.thedeck.android", "com.levelup.touiteur", "com.thedeck.android.app" };

            Intent tweetIntent = new Intent(Intent.ACTION_SEND);
            tweetIntent.putExtra(Intent.EXTRA_TEXT, "#hashtagTest");
            tweetIntent.setType("text/plain");
            final PackageManager packageManager = getPackageManager();
            List<ResolveInfo> list = packageManager.queryIntentActivities(tweetIntent, PackageManager.MATCH_DEFAULT_ONLY);

            for (int i = 0; i < twitterApps.length; i++) {
                    for (ResolveInfo resolveInfo : list) {
                            String p = resolveInfo.activityInfo.packageName;
                            if (p != null && p.startsWith(twitterApps[i])) {
                                    tweetIntent.setPackage(p);
                                    return tweetIntent;
                            }
                    }
            }
            return null;
    } 
```

# sql-server-2008 - 如何在进入表之前验证数据类型

> ID：14051672
> 
> 赞同：1
> 
> 时间：2012-12-27T08:33:40.133
> 
> 标签：sql-server-2008, sqldatatypes

我在一个表中有四列

```
Id Int
Name varchar(2)
Address varchar (4)
Active bit 
```

和具有相同列但具有 varchar 数据类型的源表。

```
Id varchar(100)
Name varchar(100)
Address varchar (100)
Active varchar(100) 
```

我必须将数据从源表传输到目标表，但是在传输时我需要检查我拥有的行是否具有正确的目标数据类型。如果不是，我需要将该完整行传输到某个错误表。前任。：

```
ID Name Address Active
1  A     A       1
C  B     B       0
3  AAA   C       1 
4  D     D       0
5  K     K       102 
```

如果上面表示源表并且只有第 1 行和第 4 行有资格转移到目标表，其他行将被移动到错误表（如果可能，可能带有有效的描述）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:57:39.553

像这样的东西

```
insert into destination
select * from source 
where (isnumeric(ID)=1 
        and 
        (ID not like '%[^0-9]%')
        and 
        RIGHT('00000000000'+ID,10) <= '2147483647'
      ) 
      and
      len(name)<=2
      and
      len(Address)<=4
      and
      active in ('0','1') 
```

因此，要插入 ERRORS 表，请在 WHERE 中使用 NOT

```
insert into ERRORS
select * from source 
where 
   NOT
     (
      (isnumeric(ID)=1 
        and 
        (ID not like '%[^0-9]%')
        and 
        RIGHT('00000000000'+ID,10) <= '2147483647'
      ) 
      and
      len(name)<=2
      and
      len(Address)<=4
      and
      active in ('0','1')
    ) 
```

## [SQLFiddle 演示](http://sqlfiddle.com/#!3/ceaa8/1)

# javascript - 将数组（JSON 格式）绑定到 KendoUI Listview

> ID：14051677
> 
> 赞同：0
> 
> 时间：2012-12-27T08:33:57.637
> 
> 标签：javascript, kendo-ui

当 JSON 格式为 { "data" :[ { }, { }, { } ] } 时，我可以使用 KendoUI 解析和提取数据

但是当 JSON 格式为 [ { }, { }, { } ] 时，我无法做同样的事情

我正在尝试使用以下代码：

```
var dataSourceSeam = new kendo.data.DataSource({
            transport: {
                read: {
                    url: "data/address.json",
                    dataType: 'json'
                }
            }

            ,schema:{
                data : "data",
                size:"count"

            }

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:52:44.940

`data : "data"`假设您说期望 JSON 数组位于名为`data`.

尝试：

```
var dataSourceSeam = new kendo.data.DataSource({
    transport: {
        read: {
            url: "data/address.json",
            dataType: 'json'
        }
    }
}; 
```

反而。

# c++ - 使用 mingw 和 g++ 编译器

> ID：14051680
> 
> 赞同：2
> 
> 时间：2012-12-27T08:34:13.363
> 
> 标签：c++, windows

我正在尝试在提示符下运行我的 c++ 文件，但没有显示任何内容，例如

```
    C:\C++\mingw> *g++ hello.cpp -o hello.exe*

```

它似乎没有错误，但没有显示任何内容，在这种情况下是对终端的简单问候。

我的代码很简单

```
#include <iostream>
using namespace std;
int main()
{
    cout << "Hello \n" << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T08:58:06.550

当然，最简单的答案“Just run `hello.exe`”是正确的。下面是一些额外的逻辑：

如果您习惯于*解释型*语言，例如 Python 或 Lua，您可能已经注意到您通过向可执行文件提供源文件来执行它们，如下所示：

```
python my_source.py 
```

但是，这是有效的，因为每次运行`python`命令时，它都会读取给定的源文件，然后解释它并根据文件内容执行适当的机器指令 - 它*解释*文件。

另一方面，C++ 是一种*编译*语言。的执行`g++`，它是一个*编译器*，为您的平台生成所述机器代码，并停在那里。下次你不需要编译器来运行你的程序；每条指令都被编码为`.exe`文件中的机器代码。这就是为什么`.exe`如果您的朋友没有编译器，您可以与他共享您的文件，但是如果没有安装 python 环境，他将无法执行 python 脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:37:02.820

```
g++ hello.cpp -o hello.exe // This command only produce the exe file 
```

执行文件不会自动运行。你应该自己运行它。

```
hello.exe 
```

# geolocation - 首次启动后 Geolocator.GetGeopositionAsync() 的奇怪行为

> ID：14051681
> 
> 赞同：3
> 
> 时间：2012-12-27T08:34:21.893
> 
> 标签：geolocation, windows-phone-8

我正在编写需要获取设备位置的 Windows Phone 8 应用程序（不跟踪更改，只获取位置）。我在起始页的 OnNavigatedTo() 方法中添加了下一个代码，但是在启动应用程序后，即使在 10 秒超时后进度指示器也不会隐藏。但是，如果我导航到另一个页面然后返回，一切正常。这发生在模拟器上，我没有真正的设备。我究竟做错了什么？

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
{
    if(_geoPosition == null)
    {
        try
        {
            var geolocator = new Geolocator();
            geolocator.DesiredAccuracyInMeters = 50;

            _progressIndicator = new ProgressIndicator
            {
                IsIndeterminate = true,
                Text = "Getting current location, please wait...",
                IsVisible = true
            };
            SystemTray.SetIsVisible(this, true);
            SystemTray.SetProgressIndicator(this, _progressIndicator);

            _geoPosition = await geolocator.GetGeopositionAsync(TimeSpan.FromSeconds(5), TimeSpan.FromSeconds(10));

            _progressIndicator.IsVisible = false;
            SystemTray.SetIsVisible(this, false);
        }
        catch (UnauthorizedAccessException)
        {
            MessageBox.Show("Location is disabled in phone settings");
        }
    }
} 
```

谢谢！

**UPD**：刚刚尝试将此代码添加到空项目中，它工作正常。试图注释掉 OnNavigatedTo 的某些部分，我没有包含在代码段中，并在此页面的数据源初始化某处发现了原因。我很抱歉误报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:23:51.620

您的代码对我来说很好，尝试经典的重启 VS 和项目！

该代码应该可以工作，并使用模拟器和设备（诺基亚 820）对其进行了测试。

祝你好运

# iphone - 表格视图中的搜索栏

> ID：14051688
> 
> 赞同：0
> 
> 时间：2012-12-27T08:34:51.087
> 
> 标签：iphone, objective-c, ios, uitableview, uisearchbar

我正在尝试为表格设置搜索栏，所以任何人都可以告诉我，当表格向上/向上滚动时是否可以使用 uisearchabr，而对于其他情况，搜索栏不会出现在屏幕上。可能吗？如果是，那么如何？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:46:42.547

您可以实现 scrollViewDelegate`scrollViewDidScroll`并检查`contentOffset`显示/隐藏搜索栏。由于 table view 是 的子类`UIScrollView`，因此您可以依赖此委托方法来决定何时显示/隐藏它。

基本上当`contentOffset`代表向上滚动的位置时，您可以显示此搜索栏，当`contentOffset`值开始更改时，您可以隐藏搜索栏。使用搜索栏的隐藏属性来显示/隐藏它。你也可以使用`removeFromSuperView`/`addSubview`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:38:54.440

您可以使用以下代码或概念。概念在滚动视图委托功能中，您将检查内容偏移量并在表格视图标题中显示设置的搜索栏对象。

代码 ：

```
//MARK: -UIScrollViewDelegate
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate{
    if (scrollView.contentOffset.y <= - 65.0f) {
        [self.tableView setTableHeaderView:self.searchBar];
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T08:48:12.750

制作委托`UIScrollViewDelegate`并实现其委托方法，在此当您开始滚动表格然后取消隐藏您的 searchBar 并更改 tableView 的框架。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [mySearchBar setHidden:NO];
    [quotesTableView setFrame:CGRectMake(0, 44, 320, 416)];
} 
```

# jquery - 从列表中检索日期并在 FullCalendar 中显示

> ID：14051697
> 
> 赞同：0
> 
> 时间：2012-12-27T08:35:42.907
> 
> 标签：jquery, fullcalendar

我有一个包含开始日期和结束日期的列表。我正在使用 JQuery AJAX 检索它。现在如何在 FullCalendar 中将该日期显示为事件。

从列表中检索数据的代码

```
 var soapEnv =
        "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> \
            <soapenv:Body> \
                 <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
                    <listName>BatchSchedule</listName> \
                    <viewFields> \
                        <ViewFields> \
                           <FieldRef Name='BatchId' /> \
                           <FieldRef Name='StartDt' /> \
                           <FieldRef Name='Enddt' /> \
                           <FieldRef Name='location' /> \
                        </ViewFields> \
                    </viewFields> \
                     <rowLimit>8500</rowLimit>\
                </GetListItems> \
            </soapenv:Body> \
        </soapenv:Envelope>";

    $.ajax({
        url: "https://www.mysite.com/sites/Batch/_vti_bin/lists.asmx",
        type: "POST",
        dataType: "xml",
        data: soapEnv,
        complete: processResult,
        contentType: "text/xml; charset=\"utf-8\""
    }); // end ajax function

  function processResult(xData, status) 
  {
     $(xData.responseXML).find("z\\:row").each(function() {});
  } 
```

我昨天写的完整代码但没有得到想要的结果

```
 function getbatchdetails(loc){ //loc - passing location as parameter
var soapEnv =
            "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> \
                <soapenv:Body> \
                     <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
                        <listName>batch</listName> \
                        <viewFields> \
                            <ViewFields> \
                               <FieldRef Name='BatchId' /> \
                               <FieldRef Name='StartDt' /> \
                               <FieldRef Name='Enddt' /> \
                               <FieldRef Name='location' /> \
                               <FieldRef Name='ID' /> \
                            </ViewFields> \
                        </viewFields> \
                         <rowLimit>500</rowLimit>\
                    </GetListItems> \
                </soapenv:Body> \
            </soapenv:Envelope>";

        $.ajax({
            url: "https://www.mysite.com/sites/Batch/_vti_bin/lists.asmx",
            type: "POST",
            dataType: "xml",
            data: soapEnv,
            complete: processResult,
            contentType: "text/xml; charset=\"utf-8\""
        }); // end ajax function
        function processResult(xData, status) 
        {
            $(xData.responseXML).find("z\\:row").each(function() { 
            var returnedloc = new String($(this).attr("ows_location"));
            if(loc==returnedloc){
                newEvent[0]=new String($(this).attr("ows_Title"));
                newEvent[1]=$(this).attr("ows_StartDt");
                newEvent[2]=$(this).attr("ows_Enddt");
                eventsArray.push(newEvent);
              }
            });//responseXML
        var nextEvent = [];
        for (var k=0;k<eventsArray.length;k++){
            nextEvent.push ({
                title: eventsArray[k][0],
                start: eventsArray[k][1],
                end: eventsArray[k][2],
                allDay: false
            });
        }
        $('#calendar').fullCalendar({
            /*defaultView: 'year',
            year: 2012,
            header: {
                left: 'prev,next today',
                center: 'title',
                //right: 'year,month,agendaWeek,agendaDay'
                right: 'year,month'
            },*/
            editable: true,
            events: nextEvent,
            colour: 'blue'
        });       }//processResult
}//end of getBatch Details 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:02:29.163

你可以试试这个：

```
$("#calendar").fullCalendar('renderEvent',
{
    title: "some title",
    start: eventStart,
    end: eventEnd,
    allDay: allDay
},
true // make the event "stick" 
```

);

请记住，您需要在代码中拥有`eventStart`和`eventEnd`作为 JS 变量（您可以随意调用这些变量）。

# c# - 在 WinRT 中通过串口使用收据打印机

> ID：14051700
> 
> 赞同：0
> 
> 时间：2012-12-27T08:36:11.720
> 
> 标签：c#, serial-port, windows-runtime

我想打印到收据打印机。这将被插入到 RS323 端口。主要通过 USB 适配器。

原因是，我尝试实现一个小型收银应用程序。因此，如果我可以通过收据打印机设备进行打印，那就太好了。

所以我的问题是，是否可以在 Windows 商店应用程序（WinRT）中与此设备通信？还是一般来说不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:02:43.420

WinRT 不支持串行和并行端口，如下所示：[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/hh464945%28v=VS.85%29.aspx)

表中有一行描述了 Win32 API 中存在的串行和并行端口支持没有 WinRT 替代方案。

最好的祝福

# mysql - Mysql 删除类似帖子：无法在 FROM 子句中指定目标表 'wp_posts' 进行更新

> ID：14051702
> 
> 赞同：1
> 
> 时间：2012-12-27T08:36:13.280
> 
> 标签：mysql, sql, join, subquery

导入错误后，我的帖子中有许多重复的内容。

然后，我尝试使用该查询删除此帖子：

```
DELETE 
FROM wp_posts USING wp_posts
LEFT JOIN wp_postmeta pm ON wp_posts.ID = pm.post_id 
AND pm.meta_key="_wpbdp[fields][6]"
LEFT JOIN wp_wpbdp_listing_fees wlf ON wp_posts.ID = wlf.listing_id 
WHERE wp_posts.post_type="wpbdp_listing"
AND wp_posts.post_status="publish"
AND EXISTS (
    SELECT NULL
    FROM wp_posts p2
    LEFT JOIN wp_postmeta pm2 ON p2.ID = pm2.post_id 
    AND pm2.meta_key="_wpbdp[fields][6]"
    LEFT JOIN wp_wpbdp_listing_fees wlf2 ON p2.ID = wlf2.listing_id 
    WHERE p2.post_type="wpbdp_listing" 
    AND pm2.meta_value=pm.meta_value
    AND p2.post_status="publish"
    AND wlf2.category_id=wlf.category_id
) 
```

不幸的是，我不能做一个`SELECT`调用我想删除的同一个表的语句。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:43:25.743

我尝试了一些新的东西，它通过了。按照@Nick 的想法，我做了那个查询：

```
DELETE p
FROM wp_posts p, wp_posts p2
WHERE p.post_title = p2.post_title
AND p.post_type="wpbdp_listing" 
AND p2.post_type="wpbdp_listing" 
AND p2.post_status="publish"
AND p.post_status="publish"
AND EXISTS(
    SELECT NULL
    FROM wp_wpbdp_listing_fees wlf 
    WHERE p.ID = wlf.listing_id
    AND EXISTS (
        SELECT NULL
        FROM wp_wpbdp_listing_fees wlf2 
        WHERE wlf2.category_id = wlf.category_id
        AND p.ID = wlf2.listing_id
    )
)
AND EXISTS(
    SELECT NULL
    FROM wp_postmeta pm 
    WHERE p.ID = pm.post_id
    AND pm.meta_key="_wpbdp[fields][6]"
    AND EXISTS (
        SELECT NULL
        FROM wp_postmeta pm2 
        WHERE pm2.meta_key="_wpbdp[fields][6]"
        AND p.ID = pm2.post_id
        AND pm2.meta_value=pm.meta_value
    )
)
AND p.ID < p2.ID 
```

它非常丑陋且未优化，但它有效！

顺便说一句，谢谢你的回答！

# c# - c#中的HttpWebRequest

> ID：14051705
> 
> 赞同：1
> 
> 时间：2012-12-27T08:36:36.550
> 
> 标签：c#, httpwebrequest

我正在使用以下代码发出 Get 请求：

```
 TheRequest = (HttpWebRequest)WebRequest.Create(aURL);
            TheRequest.Method            = "GET";
            TheRequest.CookieContainer   = TheCookies;
    TheRequest.UserAgent         = GetUserAgent();
    TheRequest.KeepAlive         = false;
    TheRequest.Timeout       = 20000;
            TheRequest.ReadWriteTimeout  = 20000;
    TheRequest.AllowAutoRedirect = true;
    TheRequest.Headers.Add("Accept-Language", "en-us");
            TheResponse = (HttpWebResponse)TheRequest.GetResponse();
            TheResponseString = new StreamReader(TheResponse.GetResponseStream(), Encoding.ASCII).ReadToEnd(); 
```

在此之后，我按如下方式获取 cookie：

```
string theCookieHeader = TheResponse.Headers[HttpResponseHeader.SetCookie]; 
```

然后我将字符串处理为正确的 cookie 格式，并将其放入 cookie 容器中，以便在下一个 POST 请求中提供。从响应字符串 (TheResponseString) 我创建正确的 Post 数据和来自 cookiecontainer 的 cookie。

我的 POST 请求代码如下：

```
 TheRequest = (HttpWebRequest)WebRequest.Create(aURL);
                  TheRequest.Method            = "POST";
                  TheRequest.CookieContainer   = TheCookies;
          TheRequest.UserAgent       = GetUserAgent();
          TheRequest.KeepAlive       = false;          
                  TheRequest.Timeout             = 20000;
                  TheRequest.ReadWriteTimeout  = 20000;
          TheRequest.AllowAutoRedirect = true;
          TheRequest.ContentType       = "application/x-www-form-urlencoded";
          TheRequest.Headers.Add("Accept-Language", "en-us"); 
                  byte[] bytes = Encoding.ASCII.GetBytes(aPostDataString);
          TheRequest.ContentLength = bytes.Length;
          Stream oStreamOut = TheRequest.GetRequestStream();
          oStreamOut.Write(bytes,0,bytes.Length);
          oStreamOut.Close();

                  TheResponse = (HttpWebResponse)TheRequest.GetResponse();

                  TheResponseString = new StreamReader(TheResponse.GetResponseStream(),                            Encoding.ASCII).ReadToEnd(); 
```

现在的问题是我有两个网站，它们是合作伙伴网站，它们的一切都一样（看起来，但如果你有任何疑问，请告诉我），但是对于一个网站它工作正常，而对于另一个网站它给出了响应字符串网站错误页面。

请帮我看什么来诊断问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:27:17.530

我有类似的问题。尝试从请求中保存 cookie，在您得到响应甚至更好之后，将此代码放入`finally`块中。为 TheRequest.Host 运行一次，为第二个站点的主机运行第二次。还要看看你是否需要 http 或 https

```
foreach (Cookie c in TheRequest.CookieContainer.GetCookies(new Uri("http://" + TheRequest.Host)))
{
   TheCookies.SetCookies(new Uri("http://" + TheRequest.Host), c.Name + "=" + c.Value);
} 
```

# vim - 为什么 vim 中的某些命令需要冒号，而有些则不需要？

> ID：14051712
> 
> 赞同：41
> 
> 时间：2012-12-27T08:37:07.720
> 
> 标签：vim

vim 中的一些命令是通过首先输入冒号 (:) 给出的，例如 . :wq 用于保存文件并退出 . 虽然某些命令不需要冒号，例如替换命令 (R)。我想知道这两种方法有什么区别？对于哪些需要冒号，哪些不需要，是否有任何具体规则？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-27T08:59:47.303

您必须查看Vim 的前身[vi 的历史](http://en.wikipedia.org/wiki/Vi)以获得解释。很久以前，当文本编辑必须使用键盘和附加的打印机（称为*终端*）来完成时，除了纸张之外没有鼠标，没有显示器，因此几乎没有交互性。编辑包括通过名为*ex*的编辑器进行的简短的助记命令。您发出了针对一行或多行的命令（例如`:substitute/foo/bar`），而编辑器服从了。如果你不确定命令的效果，你可以写`:print`几行。

时间过去了，视频终端出现了，*vi 编辑器*加入了 ex 命令（因为它们很有用，程序员也习惯了），但引入了更多的交互命令，如 delete( `x`)、insert( `i`) 等。ex 命令在命令行模式下仍然可用，命令行模式以 开头`:`，以 . 结尾`Enter`。

Vi 和 Vim 在这方面很特别，因为它们有这些不同的*模式*，其中相同的键意味着不同的东西，具体取决于一个模式。要精通 Vim，您必须了解不同的模式，以及如何最好地使用他们来实现您的编辑目标。

`:help vim-modes`让您有一个起点进入优秀而全面的帮助设施。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-27T09:08:35.633

“不需要”冒号的命令称为“正常（模式）命令”。

“需要”冒号的命令称为“Ex 命令”。

Vim 作为一个*模态*编辑器，有许多与你所处的模式相关的命令。最明显的效果是在不同的上下文中按下相同的键可能会产生不同的结果。

在*插入*模式下，键盘上的大多数键都用于将字符实际输入到文档中。

您必须切换到*正常*模式才能拉出、放置、删除、移动光标……*正常*模式是您进行激光聚焦编辑的地方，Vim 以使用诸如此类的命令而闻名`dcggsi/.*`。

您可以通过在*普通*/*visual* 模式下点击进入*命令行模式。*它通常用于两件事：`:`

 **   执行管理任务（写入磁盘、切换缓冲区、打开文件……）
*   使用很酷的编辑命令，例如`:m10`or`:t1`或`:g/foo/d`...</li>

您可以在此模式下使用的许多命令是 Vim 过去的（非常强大的）残余，被称为 Ex 命令。

简而言之，*普通*模式命令和 Ex 命令都不是以冒号开头的。冒号只是用来改变模式。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-27T08:42:11.853

你处于不同的模式`vim`。有 6 种基本模式`vim`。他们是

1.  [正常模式](http://vimdoc.sourceforge.net/htmldoc/intro.html#Normal)
2.  [视觉模式](http://vimdoc.sourceforge.net/htmldoc/visual.html#Visual)
3.  [选择模式](http://vimdoc.sourceforge.net/htmldoc/visual.html#Select)
4.  [插入模式](http://vimdoc.sourceforge.net/htmldoc/insert.html#Insert)
5.  [命令行模式](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#Command-line)
6.  [防爆模式](http://vimdoc.sourceforge.net/htmldoc/intro.html#Ex)

在`Normal`不需要键入`:`的模式下，可以通过按 Esc 进入此模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-16T10:17:09.520

最重要的区别（恕我直言）是冒号命令被视为单词，而不是单个字母，并且在您按 Enter 之前不会对其进行解释。

普通模式下的命令被视为单独的字母，每个字母都有定义的含义，一旦 vim 知道如何处理它们，它们就会被执行。

例如，在正常模式下键入“de”，将删除直到单词末尾的所有内容。但是“de”并不是真正的*命令*；这是两个命令。“e”将您移动到单词的末尾，“d”表示“删除某些内容；等待下一次按键告诉您要删除多少。” 当您键入“d”时，它会等待您完成指令。只要您按下“e”，命令就会执行（无需等待查看是否要输入更多内容）。

这意味着在正常模式下，您不能有像“定义”或“交付”或“描述”这样的指令。只要输入'de'，vim 就会执行'de' 指令。当您到达定义中的“f”时，您将开始一条新指令。

但在命令行（冒号）模式下，命令被视为单词。可能有一个名为“define”的命令和另一个名为“describe”的命令。（没有，但可能有）。

'w' could have been created as a normal mode command, if all it did was save the current file under the current filename. But ':w' does more than that. You can also do ":w new_filename", and you get a 'save as' function. That wouldn't work in normal mode. In normal mode "w new_filename" would save the file ('w'), do nothing (space), try to find the next search term ('n'), move to the next end-of-word position ('e')... and so on.*

# markdown - Markdown `native` 文本对齐

> ID：14051715
> 
> 赞同：231
> 
> 时间：2012-12-27T08:37:26.517
> 
> 标签：markdown

是否`markdown`支持不使用+的*本机*文本对齐？`html``css`

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2013-11-12T20:06:54.580

[*本机*降价](http://daringfireball.net/projects/markdown/) **不**`html`支持没有+文本对齐`css`。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2016-01-18T16:19:00.903

为了使 md 文件中的文本居中，您可以使用 center 标签，如 html 标签：

```
<center>Centered text</center> 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2017-04-18T13:39:46.620

我知道这不是降价，但`<p align="center">`对我有用，所以如果有人弄清楚降价语法，我会很乐意使用它。在那之前，我将使用 HTML 标记。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2018-10-26T10:08:45.583

div 元素有自己的对齐属性[align](https://www.w3schools.com/tags/att_div_align.asp)。

```
<div align="center">
  my text here.
</div> 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-07-13T22:09:53.123

这很 hacky，但如果您使用[GFM](https://help.github.com/articles/github-flavored-markdown/#tables)或其他一些支持使用管道构建表的 MD 语法，您可以使用列对齐功能：

```
|| <!-- empty table header -->
|:--:| <!-- table header/body separator with center formatting -->
| I'm centered! | <!-- cell gets column's alignment --> 
```

这在标记中有效。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-11-29T10:02:10.767

在 Github 中你需要写：

```
<p align="justify">
  Lorem ipsum
</p> 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-03-07T20:50:07.163

对于[Markdown Extra](https://michelf.ca/projects/php-markdown/extra/#spe-attr)，您可以使用自定义属性：

```
# Example text {style=text-align:center} 
```

这适用于标题和块引用，但不适用于段落、内联元素和代码块。

更短的版本（但在 HTML 5 中不支持）：

```
# Example text {align=center} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-06-16T04:49:30.230

使用表语法的合格“是”。例如，您可以将纯文本居中对齐，如下所示：

```
| |
| :-: |
| Excerpts from Romeo and Juliet (arr. V. Borisovsky) | 
```

这产生：

|  |
| --- |
| 《罗密欧与朱丽叶》节选（V.鲍里索夫斯基编曲） |

请注意，您仍然可以在 HTML 块中使用 Markdown。例如：

```
<div style="font-style: italic; text-align: center;" markdown="1">

## Excerpts from Romeo and Juliet (arr. V. Borisovsky)
### Sergei Prokofiev
#### Timothy Ridout, viola ∙ Frank Dupree, piano

</div> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-10-15T06:51:24.810

对于[带有 attr_list 扩展名](https://python-markdown.github.io/extensions/attr_list/)的 python markdown，语法有点不同：

```
{: #someid .someclass somekey='some value' } 
```

例子：

```
[Click here](http://exmaple.com){: .btn .btn-primary }

Lead information paragraph
{: .lead } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-04-22T21:06:53.127

我试图使图像居中，但此处答案中建议的技术均无效。`<img>`带有内联 CSS的常规 HTML对我有用……

```
<img style="display: block; margin: auto;" alt="photo" src="{{ site.baseurl }}/images/image.jpg"> 
```

这是托管在 GitHub 上的 Jekyll 博客

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-07-08T17:50:05.070

我发现在 jupyter 笔记本单元格上使用乳胶语法非常有用，例如：

```
![good-boy](https://i.imgur.com/xtoLyW2.jpg  "Good boy on boat")

$$\text{This is some centered text}$$ 
```

* * *

## 回答 #12

> 赞同：-14
> 
> 时间：2013-05-14T03:50:12.643

要居中对齐，请将要居中对齐的文本用箭头 ( `->` `<-`) 包围，如下所示：

```
-> This is center aligned <- 
```

# selenium - webdriver为什么表格可以获取其大小但无法获取其文本

> ID：14051717
> 
> 赞同：1
> 
> 时间：2012-12-27T08:37:43.407
> 
> 标签：selenium, webdriver, selenium-webdriver

页面来源：

```
<TABLE class=mini-listbox-items style="WIDTH: 100%" cellSpacing=0 cellPadding=0>
<TBODY>
<TR class="mini-listbox-item mini-listbox-item-selected" id=mini-45$0 index="0">
<TD class=mini-listbox-checkbox><INPUT id=mini-45$ck$0 type=checkbox CHECKED></TD>
<TD class="">xx</TD></TR>
<TR class=mini-listbox-item id=mini-45$1 index="1">
<TD class=mini-listbox-checkbox><INPUT id=mini-45$ck$1 type=checkbox></TD>
<TD class="">yy</TD></TR></TBODY></TABLE></DIV><INPUT type=hidden value=Y></DIV>
<DIV class=mini-errorIcon></DIV></DIV></DIV>
<DIV class=mini-shadow style="DISPLAY: none; Z-INDEX: 1002; LEFT: 393px; WIDTH: 78px; TOP: 326px; HEIGHT: 46px"></DIV></BODY> 
```

我的代码：

```
driver.findElements(By.xpath(("//td[@class='mini-listbox-checkbox']/following-sibling::td[position()=1]"))).size();
driver.findElements(By.xpath(("//td[@class='mini-listbox-checkbox']/following-sibling::td[position()=1]"))).get(0).getText(); 
```

第一行，它打印 2，然后第二行，它不打印，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:39:27.483

Your logic is working fine.

```
 int n=driver.findElements(By.xpath(("//td[@class='mini-listbox-checkbox']/following-sibling::td[position()=1]"))).size();
  String s=driver.findElements(By.xpath(("//td[@class='mini-listbox-checkbox']/following-sibling::td[position()=1]"))).get(0).getText();
  System.out.println(n+"======>>"+s); 
```

The above code is giving correct output only.

**2======>>xx**

# jquery - 内容更改时自动调整 FancyBox 弹出的高度？

> ID：14051720
> 
> 赞同：0
> 
> 时间：2012-12-27T08:38:14.707
> 
> 标签：jquery, html, fancybox

当用户单击选项时，fancybox 会弹出所有选项。当用户单击任何列出的选项时，与该选项相关的内容会出现在同一个弹出窗口中，但fancybox 不会弹出（自动调整高度和宽度）围绕新的 div 内容。请帮助

```
<div class="modelbox" id="#options">Options</div>   //when user clicks here a fance box appeares with few options,say three.

   <div style="display:none" id="options">
    <p onclick="$("#option1div").show()" >option 1</p>        //when user clicks anyone one of these option.then the belov div opens on the fancy form. **problem is that.div opens but with the scrollbars and hight of the fancebox pop up form neve adjusted acorting to the new div content. help plz**
    <p onclick="$("#option2div").show()">option 2</p>
   <p onclick="$("#option3div").show()">option 3</p>
   <div>

    <div style="display:none" id="option1div"> large data here</div>
    <div style="display:none" id="option2div"> large data here</div>
    <div style="display:none" id="option3div"> large data here</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:42:42.613

简单来说，最好将 fancybox 绑定到`<a>`如下链接：

```
<a class="modelbox" href="#options">Options</a> 
```

...通过这种方式，我们可以在不过`href`度使用 javascript 的情况下传递内联内容。另请注意，这`id="#options"`是不正确的.... `hash`in`#options`用于指代`id="options"`（例如在内部`href`），但不是`ID`' 名称的一部分。

其次，如果您希望 fancybox 调整`height`and `width`，那么您至少需要`width`为您的隐藏内容设置一些（通常`height`会自动计算），例如：

```
<div style="display:none; width: 320px" id="option1div"> large data here</div>
<div style="display:none; width: 320px" id="option2div"> large data here</div>
<div style="display:none; width: 320px" id="option3div"> large data here</div> 
```

然后您的 fancybox 自定义脚本应该（至少）将选项`fitToView`设置为`false`，否则当内容比`height`视口长时，fancybox 将始终显示滚动条，例如：

```
$(".modelbox").fancybox({
    fitToView: false
}); 
```

最后，为了将 fancybox 的大小调整为新的可见内容，您需要`$.fancybox.update()`在`onclick`属性中使用 API 方法，例如：

```
 <div style="display:none" id="options">
    <p onclick='$("#option1div").show(); $.fancybox.update();'>option 1</p>
    <p onclick='$("#option2div").show(); $.fancybox.update();'>option 2</p>
    <p onclick='$("#option3div").show(); $.fancybox.update();'>option 3</p>
   <div> 
```

查看**[工作演示](http://jsfiddle.net/d6TqE/)**

**注意**：此解决方案适用于 fancybox v2.1.3+

# php - 使用google api获取两个位置之间的距离

> ID：14051722
> 
> 赞同：4
> 
> 时间：2012-12-27T08:38:25.490
> 
> 标签：php, google-maps, google-maps-api-3

我有以下代码：

```
$output = file_get_contents("http://maps.google.com/maps/nav?q=from:39.519894,-5.105667%20to:51.129079,1.306925");

$distance = json_decode($output); 
```

我从 Google API 获得 JSON 响应，但是当我用于`json_decode()`解码 JSON 时，我得到一个`NULL`值意味着该函数无法解码它。

这背后的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:45:15.067

这应该对你有用，你可以将地址或纬度/经度传递给 $from & $to

```
$from = "Więckowskiego 72, Łódź";
$to = "Gazowa 1, Łódź";

$from = urlencode($from);
$to = urlencode($to);

$data = file_get_contents("http://maps.googleapis.com/maps/api/distancematrix/json?origins=$from&destinations=$to&language=en-EN&sensor=false");
$data = json_decode($data);

$time = 0;
$distance = 0;

foreach($data->rows[0]->elements as $road) {
    $time += $road->duration->value;
    $distance += $road->distance->value;
}

echo "To: ".$data->destination_addresses[0];
echo "<br/>";
echo "From: ".$data->origin_addresses[0];
echo "<br/>";
echo "Time: ".$time." seconds";
echo "<br/>";
echo "Distance: ".$distance." meters"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:46:21.267

返回值包含格式错误的 UTF-8 字符，可能是因为编码不正确。所有你需要的是`utf8_encode`

```
$json = file_get_contents('http://maps.google.com/maps/nav?q=from:39.519894,-5.105667%20to:51.129079,1.306925');
$data = json_decode(utf8_encode($json),true);
var_dump($data); 
```

[观看现场演示](http://codepad.viper-7.com/EOuovR)

# java - 如果指定了 xmlns，如何使用 JXPathContext 获取值？

> ID：14051723
> 
> 赞同：0
> 
> 时间：2012-12-27T08:38:32.367
> 
> 标签：java, xml

```
final SAXBuilder builder = new SAXBuilder();
final Document xml = builder.build( file );
final Element root = (Element) xml.getRootElement();
Element child = root.getChild("Header", Namespace.getNamespace("http://www.editeur.org/icedis/claims"));
final XPathContext ctx = XPathContext.create(root); 
```

这是我的代码。XPathContext 只是 JXPathContext 的包装器。如您所见，使用带有命名空间的构造的“子”变量，如果我将其删除，它将不起作用。

但是现在我正在尝试使用这样的 XPath 从 XML 中获取价值

```
ctx.getValue("/Header/SentDateTime") 
```

而且，当然它总是返回 null。似乎解决方案很简单，但我在互联网上找不到。如果我从 XML 文件中删除 xmlns，一切都会正常工作，但这不是一个选项。那么我应该如何使用这个xml呢？

此外，XML 文件的简短版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<ICEDISClaimMessage version="0.1" xmlns="http://www.editeur.org/icedis/claims">
    <Header>
        <Sender>
            <SenderIdentifier>
                <SenderIDType>06</SenderIDType>
                <IDValue>1234567890128</IDValue>
            </SenderIdentifier>
            <SenderName>Apogee Agency</SenderName>
        </Sender>
        <Addressee>
            <AddresseeIdentifier>
                <AddresseeIDType>06</AddresseeIDType>
                <IDValue>2345678901237</IDValue>
            </AddresseeIdentifier>
        </Addressee>
        <MessageNumber>111</MessageNumber>
        <SentDateTime>20101001</SentDateTime>
        <MessageNote>Sample file 1: a claim made by an agent to a publisher for a journal issue not yet delivered</MessageNote>
    </Header>
</<ICEDISClaimMessage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:40:47.193

您需要将 XPath 表达式与命名空间上下文一起使用。它必须看起来像这样：

```
final XPathContext ctx = XPathContext.create(root);
ctx.addNamespaceMapping("ns", "http://www.editeur.org/icedis/claims");
... = ctx.getValue("/ns:Header/ns:SentDateTime"); 
```

注意：我不知道 JXPath 是否支持名称空间，如果支持，它是如何设置的。

而且，顺便说一句，看起来您正在使用 JDOM (SAXBuilder)。在这种情况下，我建议使用内置在 XPath 函数中的 JDOM，而不是构建包装器。

# php - PHP数组合并？

> ID：14051727
> 
> 赞同：0
> 
> 时间：2012-12-27T08:38:52.477
> 
> 标签：php

我有

```
Array_A ( [0] => Array ( [DATE] => 2012-11-28 , [totalCount] => )
          [1] => Array ( [DATE] => 2012-11-29 , [totalCount] => )
          [2] => Array ( [DATE] => 2012-11-30 , [totalCount] => ) )

Array_B ( [10] => Array ( [DATE] => 2012-11-28 , [totalCount] => 30 )
          [11] => Array ( [DATE] => 2012-11-30 , [totalCount] => 40 )
          [12] => Array ( [DATE] => 2012-12-05 , [totalCount] => 50 ) ) 
```

如果我需要用 Array_B 中的值替换 Array_A 并且输出应该是

```
Array_A ( [0] => Array ( [DATE] => 2012-11-28 , [totalCount] => 30 )
          [1] => Array ( [DATE] => 2012-11-29 , [totalCount] =>    )
          [2] => Array ( [DATE] => 2012-11-30 , [totalCount] => 40 ) ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T08:47:41.093

我刚刚注意到你只希望使用密钥的部分`array_a`，这个循环会做。

```
foreach($array_a as $key => $value){
    if (array_key_exists($key, $array_b){
        $result[$key] = $array_b[$key]; 
    } else {
        $result[$key] = null;
    }
} 
```

或者，如果您想要在不存在`array_a`key in 的情况下使用的 value，只需将-clause 中的语句替换为: 。`array_b``else``$result[$key] = $value;`

*   [http://php.net/manual/en/function.array-key-exists.php](http://php.net/manual/en/function.array-key-exists.php)
*   [http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)
*   [http://php.net/manual/en/control-structures.if.php](http://php.net/manual/en/control-structures.if.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:42:56.507

尝试

```
$result = array_merge_recursive($Array_A, $Array_B);
print_r($result); 
```

# c# - .NET 3.5 (C#) 应用程序无法在 Windows XP Professional 上运行

> ID：14051729
> 
> 赞同：4
> 
> 时间：2012-12-27T08:39:18.750
> 
> 标签：c#, .net, windows-xp

我有一个 .NET 3.5 (C#) 应用程序，但有趣的是它不能在 Windows XP 上运行。我检查了 .NET Framework 2.0 SP2、3.0 SP2、3.5 SP1 是否已安装。当我运行应用程序时，不会弹出任何错误消息。它只是不运行。我可以尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:50:54.733

您可以安装[WinDbg](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)（它的优点是非常轻便，不太具有侵入性，不像完整的 Visual Studio 安装），并从其控制台运行您的 .EXE。WinDbg 将在第一个异常时中断。然后，您将能够使用诸如[SOS](http://msdn.microsoft.com/en-us/library/bb190764.aspx)（托管 .NET 程序的 WinDbg 扩展）之类的东西进一步挖掘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:54:46.627

这可能是因为您已经在 64 位机器上构建了此应用程序，请尝试在 32 位机器上编译它并重新运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:54:28.693

如果您的应用程序需要完整的“.Net Framework 3.5”，请确保它不是安装的“.Net Framework 3.5 Client Profile”。

*这已经骗了我不止一次了……*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:56:37.390

检查您的应用程序旁边是否有“appname.exe.config”文件，或者在某些情况下，它有助于将应用程序移动到不同的驱动器/文件夹中。

包含某些语言特定符号的文件夹路径也可能在某些系统上导致一些兼容性问题或运行时错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T11:33:43.540

您是否使用 EXE 文件复制了所有必要的 DLL 文件？当然，那些已经包含在 .NET 框架中的除外。如果是这样，您应该检查事件日志以查看是否可以找到任何提示。您还可以在测试期间使用 PDB 文件，因为这将为异常和事件日志提供更多信息。

# asp.net-mvc-3 - MVC4：ViewModel（带有单选按钮列表）在 HttpPost 之后为空

> ID：14051730
> 
> 赞同：0
> 
> 时间：2012-12-27T08:39:19.573
> 
> 标签：asp.net-mvc-3, model, http-post

我很难从我的 MVC4 应用程序中发布到控制器的小型多项选择问卷中获取值：

该模型如下所示：

```
public class Evaluation
{
    public int Id { get; set; }    
    public IEnumerable<MultipleChoiceQuestion> Question { get; set; }    
    public Remark Rem { get; set; }
}

public class MultipleChoiceQuestion
{
    public int Id { get; set; }    
    public string Question { get; set; }    
    public MultipleChoiceAnswer Answer { get; set; }
}

public enum MultipleChoiceAnswer
{
    DISAGREE,
    NEUTRAL,
    AGREE,
    NA,
} 
```

这是视图（省略了一些标记）：

```
@model Models.Evaluation

@using (Html.BeginForm("EvaluationB", "Evaluation", FormMethod.Post))
{
        @foreach (var item in Model.Question)
            {
                @Html.DisplayFor(model => item.Question)
                @Html.EditorFor(model => item.Question, "Enum_RadioButtonList", new { Id = item.Id })
            }
            @Html.Label("Remark")
            @Html.TextAreaFor(model => model.Rem)

                <input type="submit" value="Next" />
} 
```

“Enum_RadioButtonList”是从这里抓取的一个视图：[https](https://gist.github.com/973482) ://gist.github.com/973482 。这似乎是在单选按钮列表中显示枚举值的最佳方式（它们在 MVC 4 中应该是一种更简单的方式）

控制器看起来像这样：

```
 public ActionResult EvaluationA()
    {
        Models.Evaluation evm = new Models.Evaluation();
        evm.Question = db.MultipleChoiceQuestions.ToList(); //feeding the View some predefined questions
        return View(evm);
    }

    public ActionResult EvaluationB(Models.Evaluation ev)
    {
        if (ModelState.IsValid)
        {
            // TODO: save model
            return View("EvaluationB", evm);
        }

        return View("EvaluationA", ev);
    } 
```

问题在视图中加载得很好，但由于某种原因，发布到控制器的模型在 HttpPost 之后仍然为空，我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:52:18.567

我没有看到表单有如下 Id 的映射：

```
@Html.HiddenFor(model => model.Id) 
```

每个问题的内部集合也应该有 Id，以便它与表单一起发布。因此，在您的表单中的 foreach 循环中，您可以拥有的每个问题：

```
@Html.HiddenFor(model => item.Question.Id) 
```

该模型还有一个类型为 MultipleChoiceQuestion 的集合。对于模型绑定到集合，集合元素的名称应该具有带有有序数字的名称属性，如这篇文章[http://haacked.com/archive/2008/10/23/model-binding-to-a-list 中所述。 aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:43:58.227

我做了一些更多的研究偶然发现了这篇文章：

[http://dotnetslackers.com/articles/aspnet/Understanding-ASP-NET-MVC-Model-Binding.aspx](http://dotnetslackers.com/articles/aspnet/Understanding-ASP-NET-MVC-Model-Binding.aspx)

问题在于 html 字段的命名。我已经像这样添加了我的视图，现在我可以正确读出控制器中的值：

```
 @for (int i = 0; i < 6; i++)
    {
    <tr>
        <td>
            @Html.DisplayFor(m => m.Question[i].Question)
        </td>
        <td class="mult_question">
            @Html.EditorFor(m => m.Question[i].Answer, "Enum_RadioButtonList" )
        </td>
    </tr>
    }

<tr>
    <td>
        @Html.Label("Remark")
        @Html.TextAreaFor(m => m.Remark) 
```

# android - 使用 xmpp 在 Android 中传输文件

> ID：14051733
> 
> 赞同：2
> 
> 时间：2012-12-27T08:39:28.580
> 
> 标签：android, xmpp

我正在使用 xmpp 进行文件传输。这是我的文件传输代码。

```
 ServiceDiscoveryManager sdm = ServiceDiscoveryManager.getInstanceFor(connection);
if (sdm == null)
    sdm = new ServiceDiscoveryManager(connection);
FileTransferManager manager = new FileTransferManager(connection);
OutgoingFileTransfer transfer = manager.createOutgoingFileTransfer("user@myHost/Smack");         
File file = new File(filenameWithPath);

try {
    transfer.sendFile(file, "You won't believe this!");
    } catch (XMPPException e) {
        e.printStackTrace();
    }

while (!transfer.isDone()) {
    Log.i("progres", "" + transfer.getProgress());
}
if (transfer.getStatus().equals(Status.refused)|| transfer.getStatus().equals(Status.error) || transfer.getStatus().equals(Status.cancelled))
{       
    System.out.println("refused cancelled error " + transfer.getError());
} else
{
    System.out.println("Success");
} 
```

问题是当对方接受文件时它会崩溃。

日志文件：

```
FATAL EXCEPTION: File Transfer jsi_1117022495316866568
java.lang.ClassCastException: org.jivesoftware.smack.util.PacketParserUtils$2
at org.jivesoftware.smackx.filetransfer.FileTransferNegotiator.negotiateOutgoingTransfer(FileTransferNegotiator.java:401)
at org.jivesoftware.smackx.filetransfer.OutgoingFileTransfer.negotiateStream(OutgoingFileTransfer.java:359)
at org.jivesoftware.smackx.filetransfer.OutgoingFileTransfer.access$100(OutgoingFileTransfer.java:35)
at org.jivesoftware.smackx.filetransfer.OutgoingFileTransfer$2.run(OutgoingFileTransfer.java:214)
at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:14:29.267

我曾使用它向另一个用户发送图像：

单击按钮时：

```
 btn_transfer.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent takePic = new Intent(Intent.ACTION_PICK,
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(takePic, LOAD_IMAGE_GALLERY);
        }
    }); 
```

活动结果：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == LOAD_IMAGE_GALLERY && resultCode == RESULT_OK
            && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        picturePath = cursor.getString(columnIndex);
        cursor.close();

        try {
            exifMedia = new ExifInterface(picturePath);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String exifOrint = exifMedia.getAttribute(ExifInterface.TAG_ORIENTATION);

        int exifOrientation = Integer.parseInt(exifOrint);

        System.out.println("Orientation Tag is:"+exifOrientation);

        System.out.println("Path Of the Image " + picturePath);

        BitmapFactory.Options mOptions=new BitmapFactory.Options();
        mOptions.inSampleSize=2;
        Bitmap imgBitmap = BitmapFactory.decodeFile(picturePath,mOptions);
        Runtime.getRuntime().gc();

        imgBitmap = MyProfileActivity.getResizedBitmapImage(imgBitmap, 60, 60, exifOrientation);
        MessageImageBitmap msgImgBitmap = new MessageImageBitmap();
        msgImgBitmap.setImgBitmap(imgBitmap);
        msgImgBitmap.setImgPath(picturePath);

        MessagePacket packetMsg = new MessagePacket();
        packetMsg.setMsgBitmap(msgImgBitmap);
        packetMsg.setIsSendPacket(true);
        packetMsg.setMessageType(MessagePacket.MESSAGE_TYPE_IMAGE);
        packetMsg.setIMAGE_PATH(picturePath);

        messageWithImage.add(packetMsg);

        customAdapter1.notifyDataSetChanged();
        mList.setSelection(mList.getCount());

        String to = frienduserID;
        dbhHelper.insertMessage(CCMStaticVariable.loginUserId
                + "@ec.abc.com", refineFromjId(to), "",
                "true", picturePath, 1);

        sendFile(picturePath, frienduserID);

    }
} 
```

这对我有用。我给你我的原始代码，但你可以相应地改变它。让我知道这是否对您有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:19:46.463

此代码传输文件..

```
FileTransferManager manager = new FileTransferManager(connection);
OutgoingFileTransfer transfer = manager.createOutgoingFileTransfer("usre2@myHost/Smack");
File file = new File(filenameWithPath);
try {
   transfer.sendFile(file, "test_file");
} catch (XMPPException e) {
   e.printStackTrace();
}
while(!transfer.isDone()) {
   if(transfer.getStatus().equals(Status.error)) {
      System.out.println("ERROR!!! " + transfer.getError());
   } else if (transfer.getStatus().equals(Status.cancelled)
                    || transfer.getStatus().equals(Status.refused)) {
      System.out.println("Cancelled!!! " + transfer.getError());
   }
   try {
      Thread.sleep(1000L);
   } catch (InterruptedException e) {
      e.printStackTrace();
   }
}
if(transfer.getStatus().equals(Status.refused) || transfer.getStatus().equals(Status.error)
 || transfer.getStatus().equals(Status.cancelled)){
   System.out.println("refused cancelled error " + transfer.getError());
} else {
   System.out.println("Success");
} 
```

另请参阅..
[http://harryjoy.com/2012/08/18/file-transfer-in-android-with-asmack-and-openfire/](http://harryjoy.com/2012/08/18/file-transfer-in-android-with-asmack-and-openfire/)
[通过 xmpp 在 android 中传输文件？](https://stackoverflow.com/questions/6339648/filetransfer-in-android-through-xmpp)
[Android 文件传输无法通过 XMPP 和 OpenFire 工作](https://stackoverflow.com/questions/10397079/android-file-transfer-not-working-via-xmpp-and-openfire)

# tomcat - 监控 JDBC 连接

> ID：14051734
> 
> 赞同：10
> 
> 时间：2012-12-27T08:39:55.283
> 
> 标签：tomcat, jdbc, jmx

我正在尝试使用 JMX 监视 tomcat 中的 JDBC 连接。

但它只提供有关数据源资源的信息，我想要在 Database.properties 文件中定义的连接状态。

有什么办法可以得到他们的状态吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-11T07:03:12.113

通过这个 Servlet 3.0 示例，您可以监视 org.apache.tomcat.jdbc.pool.jmx.ConnectionPool 中的所有信息，包括空闲和活动连接。

```
import java.io.IOException;
import java.io.PrintWriter;
import java.lang.management.ManagementFactory;
import java.util.Set;
import javax.management.MBeanAttributeInfo;
import javax.management.MBeanInfo;
import javax.management.MBeanServer;
import javax.management.ObjectName;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
@WebServlet("/poolmonitor")
public class HelloServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        PrintWriter writer = resp.getWriter();
        writer.println("<!DOCTYPE html>");
        writer.println("<html>");
        writer.println("<body>");
        writer.println("<p><h1>Tomcat Pool</h1></p><p>");
        try {
            MBeanServer server = ManagementFactory.getPlatformMBeanServer();
            Set<ObjectName> objectNames = server.queryNames(null, null);
            for (ObjectName name : objectNames) {
                MBeanInfo info = server.getMBeanInfo(name);
                if (info.getClassName().equals(
                        "org.apache.tomcat.jdbc.pool.jmx.ConnectionPool")) {
                    for (MBeanAttributeInfo mf : info.getAttributes()) {
                        Object attributeValue = server.getAttribute(name,
                                mf.getName());
                        if (attributeValue != null) {
                            writer.println("" + mf.getName() + " : "
                                    + attributeValue.toString() + "<br/>");

                        }
                    }
                    break;
                }
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        writer.println("</p></body>");
        writer.println("</html>");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T22:45:24.417

您要求的不仅仅是 JNDI 数据源信息（例如繁忙和空闲线程）。

我强烈推荐这个资源用于基于 JMX 的监控：

[https://cwiki.apache.org/confluence/display/TOMCAT/Monitoring](https://cwiki.apache.org/confluence/display/TOMCAT/Monitoring)

# android - 什么是 TChart，它对 monodroid 是免费的吗？

> ID：14051735
> 
> 赞同：0
> 
> 时间：2012-12-27T08:39:59.653
> 
> 标签：android, xamarin.android, teechart

我正在研究 monodroid，想在我的应用程序中添加图表。我进行了一些搜索，发现： [LinearLayout 内的 TChart 生成“宽度和高度必须 > 0”](https://stackoverflow.com/questions/12192428/tchart-inside-linearlayout-generates-width-and-height-must-be-0) ，并且：http: [//www.steema.com/teechart/mobile](http://www.steema.com/teechart/mobile) 这个 TChart 是什么，是否免费？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:02:45.083

您确定在您链接到自己的网站上找不到此信息吗？

引用您自己的链接：

> Google Android 平台的 TeeChart for Android Java 图表库是用原生 Android Java 编写的，支持大多数 teechart 系列类型，包括饼图、折线图、点、面积、条形图、仪表和地图以及 2D、3D 格式。

关于图书馆是否免费，请看[下载页面](http://www.steema.com/download/mobile)：有注册版和评估版。后者可免费下载并包含完整版的所有功能，[但只能运行 50 天](http://www.steema.com/evaluation)。我确信在可下载的评估版本中也会有许可说明，进一步详细说明任何可能的限制。

# jquery - 我想使用 jquery 使用字符串中的第二个单词对表列进行排序

> ID：14051737
> 
> 赞同：0
> 
> 时间：2012-12-27T08:40:01.730
> 
> 标签：jquery, jquery-ui

我有一个三列的表。

```
 select   contactname  phone

 radio       A B         1234
 radio       B A         1212 
```

我想使用 jquery 使用第二个字母（在第一行是 B，第二行是 A）对第二列进行排序..任何解决方案....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:45:12.883

```
SELECT * FROM table ORDER BY SUBSTRING(field, 2) DESC; 
```

或者

```
SELECT * FROM table ORDER BY SUBSTRING(field, 2) ASC; 
```

# jquery - 如何更改选择选项顺序？

> ID：14051739
> 
> 赞同：3
> 
> 时间：2012-12-27T08:40:06.610
> 
> 标签：jquery

```
<select onchange=""class="product-custom-option" name="options[41]">
  <option value=""> -- selsect --</option>
  <option price="0" value="162">L</option>  
  <option price="0" value="163">M  </option> 
  <option price="0" value="164">S </option>  
 <option price="0" value="165">XL </option>

  </select> 
```

现在我想把订单改成这样：`S M L XL`。

```
$('.product-custom-option:option(3)').insertAfter('.product-custom-option:option(0)');
$('.product-custom-option:option(1)').insertBefore('.product-custom-option:option(4)'); 
```

对不起，我是jquery的新手，上面没有明白吗？

我想得到这样的新订单：

```
 <option value=""> -- selsect --</option>
<option price="0" value="164">S </option> 

  <option price="0" value="163">M  </option> 
     <option price="0" value="162">L</option> 
 <option price="0" value="165">XL </option> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T08:49:24.597

```
var options = $('.product-custom-option option' );

$( options[ 3 ] ).insertAfter( $( options[ 0 ] ) );
$( options[ 2 ] ).insertAfter( $( options[ 3 ] ) ); 
```

[http://jsfiddle.net/ceduG/](http://jsfiddle.net/ceduG/)

但如果可能的话，在服务器端对其进行排序可能更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:07:51.953

或者您可以只替换 select 元素的 html ：

```
$('.product-custom-option').html('<option value=""> -- selsect --</option><option price="0" value="164">S </option><option price="0" value="163">M  </option><option price="0" value="162">L</option><option price="0" value="165">XL </option>');​ 
```

[http://jsfiddle.net/746G9/](http://jsfiddle.net/746G9/)

# ruby-on-rails - 获取所有数据库更改

> ID：14051741
> 
> 赞同：0
> 
> 时间：2012-12-27T08:40:12.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我正在使用 mongodb 作为数据库在 rails 3.2 中开发应用程序。我正在使用 mongoid 宝石。

我想在运行时跟踪数据库的所有更改，但我不知道该怎么做。
这有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:13:45.727

您可以使用多种方法来跟踪对数据的更改，具体取决于您是只对监视当前活动感兴趣还是需要创建某种事务历史记录。

按照从最小到最大努力的粗略顺序：

### 1)[启用 MongoDB 查询探查器](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/)

**如果您在“ 2** ”级别启用查询分析器，它将收集针对特定数据库的所有操作（读取和写入）的分析数据。您还可以在[配置选项](http://docs.mongodb.org/manual/reference/configuration-options/)`mongod`中启用此功能）以在启动时更改所有数据库的分析默认值。配置文件数据保存在每个数据库的上限集合中，并且仅包含最近的查询快照。查询分析状态也可以在运行时更改，因此您可以根据需要轻松启用或禁用。

### 2)[将 Mongoid 回调添加到您的应用程序](http://mongoid.org/en/mongoid/docs/callbacks.html)

添加适当的逻辑 Mongoid 回调，例如`after_insert`, `after_save`，`after_upsert`具体取决于您要捕获的信息。

### 3）[在MongoDB oplog上创建一个tailable cursor](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)

如果您将 MongoDB 作为副本集的一部分（或使用`--replSet`选项）运行，它会创建一个名为[`oplog`(operations log)](http://docs.mongodb.org/manual/core/replication/#replica-set-oplog-sizing)的上限集合。您可以使用可尾光标跟踪提交到`oplog`. 数据库所有更改的`oplog`详细信息，是 MongoDB 用于复制的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:27:38.290

我不熟悉`Mongodb`nor `mongoid`，但这是我对使用 MySQL 的人的想法（我希望它能给你一些线索）：

首先，您拍摄数据库的快照（使用类似的工具`mysqldump`）。

然后在特定的时间间隔内，您检查（审核）那些`updated_at`值大于（晚于）拍摄快照时间或上次审核时间的记录。

现在，您有两个版本的数据，您可以检查它们的变化。

正如我所说，这只是一个想法，还需要进一步完善。我希望它能给你一个线索。

# coded-ui-tests - 如何在编码的 UI 自定义代码中识别按钮单击

> ID：14051744
> 
> 赞同：1
> 
> 时间：2012-12-27T08:40:20.933
> 
> 标签：coded-ui-tests

在 Recorded 方法和断言方法的 UIMAP.CS 文件中，我无法识别按钮单击。

有什么办法可以控制按钮点击事件？

我能够将按钮保持在 UITESTCONTROL 变量中，但我能够看到的选项是“存在”、“启用”、“名称”等......

当我将十字线拖到单击的按钮上时，我也尝试使用断言检查它，生成断言仅用于检查文本和名称的存在、正确性，而不是其上发生的事件。

请在这方面提供帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:39:18.387

请确保您要对其使用单击操作的控件/对象是按钮，而不是任何不支持单击操作的 Web 元素或控件。

验证后，您可以执行以下操作：

录制新会话并在录制时单击该按钮，停止录制。

打开 UIMap.cs 并导航到该按钮控件。Intellitrace 将向您显示该控件的所有可用选项。

谢谢尼基尔

# ios - 使用 Facebook IOS SDK 3.1 和 Graph API 发布带有标题的图片

> ID：14051745
> 
> 赞同：2
> 
> 时间：2012-12-27T08:40:22.960
> 
> 标签：ios, facebook, facebook-graph-api, facebook-ios-sdk

我是 facebook SDK 的新手。上次我使用 facebook IOS SDK 3.0 并通过图形 API 发布图像。它正在工作，但现在没有。我升级到 3.1，但它总是返回 HTTP ERROR 200。有人可以帮助我吗？

这是代码

```
- (void) facebookPostPhoto:(UIImage *)photo withMessage:(NSString *)msg withOkAction:(SEL)okAction andNGAction:(SEL)ngAction withTarget:(id)target {
ok = okAction;
ng = ngAction;
curView = target;
NSMutableDictionary *params;
params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
          UIImageJPEGRepresentation(photo, 90), @"source",
          msg, @"message",             
          nil];

if ([FBSession.activeSession.permissions indexOfObject:FacebookPermission_3] == NSNotFound) {
    NSLog(@"permission not found");
    // No permissions found in session, ask for it
    [FBSession.activeSession reauthorizeWithPublishPermissions:[NSArray arrayWithObjects:FacebookPermission_1, FacebookPermission_3, nil] defaultAudience:FBSessionDefaultAudienceFriends completionHandler:^(FBSession *session, NSError *error)
     {
         // If permissions granted, publish the story
         if (!error) [self initPostFacebookWithParams:params];
     }];
} else {
    [self initPostFacebookWithParams:params];
} } 

- (void)initPostFacebookWithParams:(NSMutableDictionary *)params {

[FBRequestConnection startWithGraphPath:@"me/photos" parameters:params HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSLog(@"ERROR : %@", error.localizedDescription);
    if (!error) {
        NSLog(@"Facebook Post Success..");
        if (ok && curView) {
            [curView performSelector:ok];
        }

    } else {
        NSLog(@"Facebook Post Failed..");
        if (ng && curView) {
            [curView performSelector:ng withObject:error];
        }

    }

}]; } 
```

感谢您的快速响应和帮助！谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:14:43.313

I think it's either facebook upload's server is down or there is a new policy about image size. When I down sized the image to 320x320 it returns no error, sometimes error too by the way.

So for those who see this question, try to resize your image to smaller size.

# android - 如何使用 Android 在后台调用 URL？

> ID：14051747
> 
> 赞同：2
> 
> 时间：2012-12-27T08:40:35.707
> 
> 标签：android

我希望通过调用服务器上 Web 服务的 URL 链接将用户数据插入数据库：例如：这是链接：

```
http://mydomain.com/AndroidWebService.asmx/nInsertInfo?id=12&lat=23.2222&log=12322 
```

所以我想在隐藏模式下调用这个 url。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T08:46:23.420

使用 android android AsyncTask 发布数据。当应用程序打开时，它在android后台工作。AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

> *   [喜欢](http://www.vogella.com/articles/AndroidPerformance/article.html)
>     
>     
> *   [异步任务](https://stackoverflow.com/a/9671602/1659470)
>     
>     
> *   [异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)
>     
>     
> *   [异步任务](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

谢谢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T11:24:13.910

感谢大家提供宝贵的解决方案。

我通过创建 WebView 做到了

```
WebView myWebView = (WebView) findViewById(R.id.view1);
myWebView.loadUrl(urll); 
```

然后我可以根据需要管理我的 WebView：隐藏它、对齐为错误或结果返回。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T09:03:05.930

也许这个例子会帮助你：

```
public class URLConnectionTask <Result> extends AsyncTask<URL, Void, InputStream> {

        @Override
        protected InputStream doInBackground(URL... params) {
            InputStream is;
            HttpUriRequest request;
            URI uri;
            HttpResponse response;

            if (params.length == 0)
                return null;

            is = null;CredentialsProvider credProvider = new BasicCredentialsProvider();

        if (userName != null && userName.length() > 0 && password != null && password.length() > 0)
            credProvider.setCredentials(new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT),
                new UsernamePasswordCredentials(userName, password));

        //
        DefaultHttpClient http = new DefaultHttpClient();
        http.setCredentialsProvider(credProvider);
        //

        uri = URI.create(params[0].toString());

        if (isPost)
            request = new HttpPost(uri);
        else
            request = new HttpGet(uri);

        try {           
            response = http.execute(request);
            is = response.getEntity().getContent();

            //Log.d(TAG, "doInBackground() response: "+EntityUtils.toString(response.getEntity()));
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

       if (processingHandler != null && is != null)
           processingResult = processingHandler.processResponse(is);// processingHandler is an instance which implements ProcessingHandler interface (ex. VizMarket). processResponse() is implemented on this class.

       return is;
    }

    @Override
        protected void onPostExecute (InputStream result) {
            input = result;

            if (result == null)
                return;
                    //instruction for inserting data on db .... 

            try {
                result.close();
            } catch (IOException e) {
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T08:45:45.493

您应该在 AsyncTask 中调用 URL。例如：[从 AsyncTask 类返回数据](https://stackoverflow.com/questions/7618614/return-data-from-asynctask-class)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T08:51:31.000

你可以搜索 :ClickableSpan 并将你的插入代码放入 OnClick 正文中~ 就像：

```
String yourTextStr;
    SpannableString sp = new SpannableString(yourTextStr);
    int start;//the start of your url in the text; 
    int end ;//the end of your url in the text; 
    sp.setSpan(new ClickableSpan() {
        @Override
        public void onClick(View widget) {
            //Your Insert Code
        }
    }, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T08:51:09.300

你必须使用线程从服务器获取数据并插入到 DB 或在 android 中你可以使用 AsyncTask。

# mysql - 尝试更新 joomla 插件中的表时出现 Mysql 语法错误

> ID：14051748
> 
> 赞同：1
> 
> 时间：2012-12-27T08:40:37.173
> 
> 标签：mysql, sql

我为 joomla 插件编写了这个查询

```
$query = "UPDATE #__content SET fulltext='$_POST[statenames]' WHERE id=$articleId"; 
```

但它给出了错误 -

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'fulltext = '1' WHERE id = 41' 附近使用正确的语法 SQL=UPDATE jst_content SET fulltext = '1' WHERE id = 41

错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:12:14.777

`FULLTEXT`是 MySQL 保留关键字。您必须用反引号包裹该列。

```
$query = "UPDATE #__content SET `fulltext` = '$_POST[statenames]' WHERE id=$articleId"; 
```

*   [MySQL 保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

作为旁注，`SQL Injection`如果变量的值来自客户端，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# python - Pypi 中缺少 Urllb2 包

> ID：14051749
> 
> 赞同：1
> 
> 时间：2012-12-27T08:40:39.513
> 
> 标签：python, web-crawler, urllib2

我想从 PyPI 安装 urllib2 包，但它不可用。

好像已经更新到 urllib3 了，但是有没有办法下载 urllib2 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:42:13.833

```
import urllib2 
```

那是你要的吗？

如果您在[http://docs.python.org/](http://docs.python.org/)下找到任何库，您可以随时导入而不安装它。

更新1：

如果需要源代码...

官方Cpython代码：[http ://hg.python.org/cpython/file/3b5fdb5bc597/Lib/urllib](http://hg.python.org/cpython/file/3b5fdb5bc597/Lib/urllib)

> 注意 urllib2 模块在 Python 3 中被拆分为多个名为 urllib.request 和 urllib.error 的模块。将源代码转换为 Python 3 时，2to3 工具会自动调整导入。

或者试试这个？ [http://code.reddit.com/docs/urllib2-pysrc.html](http://code.reddit.com/docs/urllib2-pysrc.html)

我不能保证第二个替代链接的完整性。

# jsf-2 - JSF2 中接受输入的自定义组件在按钮单击时修改它并重新呈现组件

> ID：14051753
> 
> 赞同：0
> 
> 时间：2012-12-27T08:41:11.957
> 
> 标签：jsf-2

我对 JSF 很陌生（只有 1 周大）并正在开发第一个组件。组件类似于表格，它将集合作为输入并以表格格式呈现内容。除此之外，还会在每行的末尾呈现一个“删除”链接。

我创建了“复合”组件 (.xhtml) 和 ComponentType（带有 @FacesComponent 的 java 类）。

我得到了完整的表格渲染，并且每一行都显示了“删除”链接。现在尝试添加在我的类中使用@FacesComponent 定义的操作。

```
<a4j:commandLink action="#{cc.removeRow(rowKey)}" value="Remove"/> 
```

在我的组件（java 类）中，我定义了这个方法 removeRow(Integer rowKey)。但是在单击此“删除”链接时，不会触发该操作。我在组件中也定义了“h：form”。

非常感谢任何帮助或指示。

编辑：刚刚看了这个问题[How to implement a dynamic list with a JSF 2.0 Composite Component?](https://stackoverflow.com/questions/6358066/how-to-implement-a-dynamic-list-with-a-jsf-2-0-composite-component) 它几乎符合我的要求。我不确定的一件事是当它被渲染时表单操作是什么，如果我单击组件中的按钮，它将如何调用它自己的组件 bean 中的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:50:14.047

好的，这是我正在做的错误。

我正在使用 Guava "Table" Collection 渲染一个自定义表格。表的初始化发生在被调用一次的“encodeBegin”中。所以当我点击提交时，它试图重新渲染表格，它认为一切都是空的，因此抛出 NPE。

我现在将表的初始化提取到一个单独的方法和一个辅助方法以检索现有表（如果它不为空或从属性重新初始化）。

现在可以了。

# android - Twitter在android中使用媒体上传状态

> ID：14051759
> 
> 赞同：1
> 
> 时间：2012-12-27T08:41:37.823
> 
> 标签：android, twitter, media, multipartform-data

我正在尝试将媒体上传到 android 中的 twitter。我正在将此[更新与 Media](https://dev.twitter.com/docs/api/1.1/post/statuses/update_with_media) Api 一起使用。我正在使用以下代码

```
multiPartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    try
    {
        multiPartEntity.addPart("status", new StringBody("Metallica rules man! |m|"));
        multiPartEntity.addPart("media[]", new InputStreamBody(getResources().openRawResource(R.drawable.metallica), "metallica.jpg"));
        post = new HttpPost("https://api.twitter.com/1.1/statuses/update_with_media.json");
        post.setEntity(multiPartEntity);
        post.addHeader("Content-Type", "multipart/form-data");
        post.getParams().setBooleanParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE, false);
        consumer.sign(post);
        response = client.execute(post);
        entity = response.getEntity();
    } catch (Exception e1)
    {
        e1.printStackTrace();
    } 
```

但我从 Twitter收到[错误代码 131 - 内部错误。](https://dev.twitter.com/blog/making-api-responses-match-request-content-type)我也尝试以字节数组的形式发送图像，但徒劳无功。我得到了同样的错误。谁能帮我解决这个问题？

# eclipse - 运行 Web 应用程序时出错？

> ID：14051760
> 
> 赞同：0
> 
> 时间：2012-12-27T08:41:40.427
> 
> 标签：eclipse, jsp, servlets, cassandra

我正在创建一个动态网络项目。我制作了一个主页 JSP 文件并在此 JSP 页面上保留了一个按钮。当我单击此页面时，它会调用我正在访问 Cassandra 数据库的 HelloServlet。我已将所有必需的 Jars 文件添加到项目中。但是当我点击 JSP 页面上的按钮时，会出现一些异常，这里给出

```
HTTP Status 500 - Error instantiating servlet class cassandra.HelloServlet

type:- Exception report
message:- Error instantiating servlet class cassandra.HelloServlet
description:- The server encountered an internal error that prevented it from fulfilling this request.

exception:-javax.servlet.ServletException: Error instantiating servlet class cassandra.HelloServlet
............
root cause:- java.lang.NoClassDefFoundError: org/apache/thrift/transport/TTransport
........................
root cause:- java.lang.ClassNotFoundException: org.apache.thrift.transport.TTransport
.........   ............ 
```

此外，当我使用相同的代码和相同的 Jars 创建一个简单的 Java 项目时，我能够执行我的工作。

寻求帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:16:16.667

*您已在项目构建路径*中添加了 jar 文件。此路径用于编译您的应用程序，但它与*运行时 classpath*不同。`WEB-INF/lib`在运行时，容器会在部署的 webapp的目录中查找库。

在 Eclipse 下，运行时必须在 WEB-INF/lib 下存在的库必须简单地放在`WebContent/WEB-INF/lib`您的 Web 项目的文件夹中。Eclipse 会自动将这些添加到构建路径中，如果已部署应用程序，则将它们添加到 WEB-INF/lib 目录中，以便它们在运行时也可用。

因此，从构建路径中删除所有 cassandra jar，并将它们放入`WebContent/WEB-INF/lib`. 完成后，它们将出现在项目的*Web App Libraries*节点下。

# android - TabGroupActivity + 防止重新加载活动 onBackPressed

> ID：14051762
> 
> 赞同：2
> 
> 时间：2012-12-27T08:41:55.483
> 
> 标签：android, android-tabhost, android-tabs, android-tabactivity

这是我的 TabGroupActivity 的代码。在这里，在任何特定选项卡上 Tab B-> 然后它将启动其子活动 Class C -> 然后单击任何按钮它将再次调用子活动 Class D

现在，每当我按下返回按钮时，从 D 类开始，它会再次重新加载子活动类 C。从 C 类开始，当我按下返回按钮时，它将再次重新加载子活动。

请帮我解决这个问题。我不想重新加载以前的活动。

```
 public class TabGroupActivity extends ActivityGroup {

private ArrayList<String> mIdList;
@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);

}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    if (mIdList == null) mIdList = new ArrayList<String>();
}

/**
 * This is called when a child activity of this one calls its finish method. 
 * This implementation calls {@link LocalActivityManager#destroyActivity} on the child activity
 * and starts the previous activity.
 * If the last child activity just called finish(),this activity (the parent),
 * calls finish to finish the entire group.
 */
      @Override
       public void finishFromChild(Activity child) {
  LocalActivityManager manager = getLocalActivityManager();
  Log.i("Stack,finishFromChild", ""+mIdList);
  int index = mIdList.size()-1;

  if (index < 1) {
      finish();
      return;
  }

  manager.destroyActivity(mIdList.get(index), true);
  mIdList.remove(index); index--;
  String lastId = mIdList.get(index);
  Intent lastIntent = manager.getActivity(lastId).getIntent();
  lastIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
  Window newWindow = manager.startActivity(lastId, lastIntent);

  setContentView(newWindow.getDecorView());
   }

      /**
     * Starts an Activity as a child Activity to this.
      * @param Id Unique identifier of the activity to be started.
       * @param intent The Intent describing the activity to be started.
     * @throws android.content.ActivityNotFoundException.
       */
     public void startChildActivity(String Id, Intent intent) {     
  Window window = getLocalActivityManager().startActivity(Id,intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP));
  if (window != null) {
      mIdList.add(Id);
      setContentView(window.getDecorView()); 
  }    
   }

    /**
     * The primary purpose is to prevent systems before          android.os.Build.VERSION_CODES.ECLAIR
     * from calling their default KeyEvent.KEYCODE_BACK during onKeyDown.
    */

     /**
      * If a Child Activity handles KeyEvent.KEYCODE_BACK.
      * Simply override and add this method.
        */
     @Override
     public void  onBackPressed  () {
        int length = mIdList.size();
        if ( length > 1) {
        Log.i("Stack,onback", ""+mIdList);

        Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
        Log.i("Activity in current",""+current);
         current.finish();

     }  
     else
     {
        if(length==1)
        {
          Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
          Log.i("Activity in current",""+current);
          current.finish();
      }
  }
  } 
```

# python - 如何在linux命令行上检查pdf打印是否完成

> ID：14051766
> 
> 赞同：4
> 
> 时间：2012-12-27T08:42:01.773
> 
> 标签：python, linux, command-line

我有一堆文件需要通过 PDF 打印机打印，打印后我需要执行其他任务，但只有当它最终完成时。

所以要从我的 python 脚本中执行此操作，我调用命令“lpr path/to/file.doc -P PDF”

但是这个命令立即返回 0 并且我无法跟踪打印过程何时完成，是否成功等等......

打印完成后有一个发送电子邮件的选项，但是在我开始打印后等待电子邮件对我来说看起来很麻烦。

你有一些想法如何完成这项工作吗？

**编辑 1** 有很多方法可以检查打印机当前是否正在打印某些内容。因此，在我开始打印某些内容后，我`lpq`每 0.5 秒运行一次命令以查看它是否仍在打印。但这在我看来并不是最好的方法。我希望能够在实际打印过程完成时得到警报或其他东西。成功与否之类的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:02:51.260

如果您有[CUPS](http://www.cups.org/)，您可以使用 System V-compatible`lp`而不是`lpr`. 这会在 上打印`stdout`作业 id，例如

```
request id is PDF-5 (1 file(s)) 
```

（这是用于虚拟打印机`cups-pdf`）。然后，您可以`grep`在以下输出中获取此 id `lpstat`：

```
lpstat | grep '^PDF-5 ' 
```

如果这没有产生输出，那么你的工作就完成了。`lpstat -l`产生更多的状态信息，但其输出也将难以解析。

显然，有更干净的 Python 解决方案，然后运行这个实际的 shell 代码。不幸的是，如果不翻阅工作列表，我找不到检查单个工作状态的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:06:44.600

`lpstat`您可以使用命令 ( `man lpstat`)检查打印机的状态。要等待进程完成，请获取进程的 PID 并将其`wait`命令作为参数传递

# php - preg_match 字符串，无论格式是否正确

> ID：14051769
> 
> 赞同：0
> 
> 时间：2012-12-27T08:42:12.883
> 
> 标签：php, regex, preg-match

我在 preg_match 中使用了这种字符串格式：

```
[Day][MonthAbbr] [Date] [Hour]:[Minutes][AM/PM]

example:
ThuDec 27 2:00am 
```

拥有这个 $pattern 和某种代码：

```
$pattern = "/([A-Z]{2}\w+)([A-Z]{2}\w+)\s+(\w+)\s+(\d+):(\d+)(..)/ims";
$match = array();
if (preg_match($pattern, rtrim($date), $match)) {
    echo '<pre>';
        print_r($match);
    echo '</pre>';
} else {
    echo 'Could not parse date.';
} 
```

我能够从字符串中提取月份、日期、时间等......

但我想知道为什么我想出了“无法解析日期”这个问题。即使传递的值仍然相同..

我比较了值和有错误的值：

```
ThuDec 27 2:00am
ThuDec 27  4:30am (gives the error) 
```

这是下面的屏幕截图以进行比较：

![如您所见，它返回空数组！](../Images/4ab42614a557271f69355bbc55907721.png)

我在 preg_match 中使用的模式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:43:01.737

```
<?php
$a = "ThuDec 27  4:30am";
$pattern = "/([a-z]{3})([a-z]{3})\s+(\d+)\s+(\d+):(\d+)([a-z]{2})/i";
$match = array();
if (preg_match($pattern, $a, $match)) {
    echo '<pre>';
        print_r($match);
    echo '</pre>';
} else {
    echo 'Could not parse date.';
}
?> 
```

这段代码对我来说效果很好。

# matlab - 如何检查单元格数组中的元素是否唯一或重复

> ID：14051779
> 
> 赞同：2
> 
> 时间：2012-12-27T08:43:15.507
> 
> 标签：matlab, cell-array

我有一个 <465x1> 单元阵列。为了检查每个元素，我想检查它是唯一的还是重复的元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T09:01:41.957

用于[`unique`](http://www.mathworks.com/help/matlab/ref/unique.html)此目的，它也可以在元胞数组上工作：

```
[U, ic, iu] = unique(C); 
```

`C`你的单元格数组在哪里。`U`是一个新的元胞数组，具有相同的值`C`但没有重复。然后，您可以使用以下方法计算每个值的出现次数[`histc`](http://www.mathworks.com/help/matlab/ref/histc.html)：

```
[U, ic, iu] = unique(C);
count = histc(iu, 1:numel(ic)) 
```

### 例子

为了这个例子，让我们首先生成一个随机的字符串元胞数组：

```
strings = {'foo'; 'bar'; 'baz'; 'bang'};
C = strings(ceil(numel(strings) * rand(6, 1))) 
```

这应该生成如下内容：

```
C = 
    'bang'
    'baz'
    'foo'
    'bang'
    'bar'
    'foo' 
```

现在我们计算每个值的出现次数`C`：

```
C = strings(ceil(numel(strings) * rand(6, 1)));
[U, ic, iu] = unique(C);
count = histc(iu, 1:numel(ic)) 
```

这应该导致：

```
U =
   'foo'
   'bar'
   'baz'
   'bang'

count =
    2
    1
    1
    2 
```

这意味着`'foo'`and`'bang'`被重复两次，而其余的只重复一次，这是正确的。
如果您只对真正独特的价值观感兴趣，您可以这样做：

```
U(count == 1) 
```

在我们的示例中应该返回：

```
'bar'
'baz' 
```

请注意，中的每个元素都`count`表示中的对应值`U`（不是`strings`，它们可能有不同的顺序）。

# iphone - 确定购买我的应用的时间段

> ID：14051780
> 
> 赞同：1
> 
> 时间：2012-12-27T08:43:31.240
> 
> 标签：iphone, ios, app-store-connect

有没有办法（在代码中）可以根据购买时间为应用提供不同的功能？

我有些人以不同的价格购买了我的应用程序，有些人在促销期间免费获得了它。很高兴在我的应用程序中为那些付费的人提供一个额外的功能。

这无论如何可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:31:29.810

如果没有事先准备好，您将永远不会知道过去，但没有什么可以阻止您将用户首次打开您的应用程序的时间戳放入例如用户设置中。就像是

```
[[NSUserDefaults standardUserDefaults] 
    setObject:[NSDate date] 
       forKey:@"install_date"]; 
```

然后您可以使用它来决定如何“对待”（我猜）用户。一个问题是，如果用户删除了应用程序然后重新安装它，他们的早期采用者奖金或任何东西都将丢失。您唯一的其他选择是将设备 ID 发送到某处的专用服务器，例如带有简单 MySQL 数据库的 PHP 脚本，其中设备 ID 与日期一起存储。然后你可以做类似的事情

```
NSDate *purchaseDate = [[NSUserDefaults standardUserDefaults] 
    objectForKey:@"purchase_date"];
if (nil == purchaseDate) {
    // we need to get the date for this user from the server, or
    // we need to register the user as it's the first time
} else {
    // we know when this user installed the app, and they did so 
    // (approximately) at the purchaseDate time.
} 
```

撇开日期格式问题不谈，上面的内容应该很简单，但如前所述，确实需要一个服务器（这可能会很慢，因为上面的内容只发生在第一次安装和重新安装时）。

编辑：您可以使用`[[UIDevice currentDevice] uniqueIdentifier]`（从 iOS 5 开始不推荐使用）或`[[UIDevice currentDevice] identifierForVendor]`（从 iOS 6 开始新......大声笑）来获取设备 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:50:05.563

你必须通过代码来管理它，Apple 没有为此提供任何代码。但是，如果您需要对应用程序进行任何类型的分析。[比如，用户使用了应用程序的哪个部分，哪个部分导致应用程序崩溃，您可以尝试使用Flurry Analytics](http://www.flurry.com/flurry-analytics.html)的某种功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:32:26.430

购买应用程序时，无法从您的应用程序中检测到。您可以添加对安装时间的检测，但这可能会在以后的任何时间发生，甚至多次发生。

# sparql - 使用 dotnetrdf 遍历本体

> ID：14051781
> 
> 赞同：0
> 
> 时间：2012-12-27T08:43:46.270
> 
> 标签：sparql, ontology, owl, dotnetrdf

我使用 protege 创建了一个本体。现在我想编写一个代码来使用dotNetRDF遍历本体。通过遍历显示所有类，子类等。

我正在使用以下代码，但它给出了异常**

> 范围内的 NamespaceMapper 不知道给定前缀“owl”的命名空间 URI

```
OntologyGraph g = new OntologyGraph();
        FileLoader.Load(g, "humanontordf.owl");

        OntologyClass classOfClasses = g.CreateOntologyClass(g.CreateUriNode("owl:Class"));

        //This iterates over the things that are a class
        foreach (OntologyResource r in classOfClasses.Instances)
        {
            //Do what you want with the class
            Console.WriteLine(r.ToString());
        } 
```

此代码基于[此处](https://web.archive.org/web/20130902055057/http://answers.semanticweb.com/questions/19984/dotnetrdf-list-all-ontology-classes)给出的答案（[http://answers.semanticweb.com/questions/19984/dotnetrdf-list-all-ontology-classes](http://answers.semanticweb.com/questions/19984/dotnetrdf-list-all-ontology-classes)）

谁能让我知道我在上面的代码中缺少什么？dotNetRDF 教程有什么好的 URL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:55:20.023

错误消息是指代码的以下部分：

```
g.CreateUriNode("owl:Class") 
```

这使用前缀名称作为完整 URI 的快捷方式，这需要`owl`在图形中定义前缀。

如果你得到这个，那么你的 RDF 文件不包含这个，你可以这样定义：

```
g.NamespaceMap.AddNamespace("prefix", new Uri("http://some/namespace/")); 
```

我想`OntologyGraph`应该真的自动定义 OWL 命名空间，我将在下一个版本中添加它。

# javascript - 将更改推送到网页而不刷新

> ID：14051795
> 
> 赞同：16
> 
> 时间：2012-12-27T08:45:33.767
> 
> 标签：javascript, jquery, ajax, webpage

我知道我们可以通过定期轮询更改来做到这一点。这可以通过 AJAX 来实现（例如使用`jQuery.load()`with `setInterval()`）。

但我想知道还有其他方法可以做到这一点吗？其他成本更低或更有效的方法？一个很棒的聊天客户端遵循什么逻辑？一旦你开始打字，另一端就会知道你正在打字。

我们在 stackoverflow 上遵循什么机制来更新赞成计数或显示已进行编辑等，而不刷新页面？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-28T14:22:44.033

当谈到保持客户端和服务器（接近）实时同步时，有 3 件事会立即浮现在脑海中：

*   **长轮询**：您已经提到了这个，您在客户端上设置了一个计时器，它每 10 秒左右触发一个新的 AJAX 请求。这可能是三者中最“低技术”的，也是效率最低的；但它也是最兼容的（这意味着它可以在所有浏览器中运行，甚至像 IE6/7 这样的浏览器）

*   **WebSockets**：sdespont 已经在评论中提到了这个。虽然 WebSockets 比长轮询更有效（因为它只是无限期地保持两种客户端-服务器通信打开），但如果您要做的只是从服务器获取定期更新，它可能是一个非常严厉的解决方案。Firefox 和 Chrome 的所有版本都支持它，[IE 在 IE10 中添加了支持](http://caniuse.com/#search=websocket)

*   **服务器发送的事件**：这个似乎不太受欢迎（或者只是不那么知名）。它允许服务器向客户端发送更改（与客户端向服务器请求更改相反，就像长轮询的情况一样）。这也只是一种单向通信（服务器 --> 客户端），并且在请求完成后连接会关闭（与 2 向通信保持打开状态的 WebSockets 相反）。再次强调，并不是所有的浏览器都支持，[而且根本没有 IE 支持](http://caniuse.com/#search=server-sent)

[这](http://html5doctor.com/methods-of-communication/)也是一篇很好的文章，它解释了更现代的客户端-服务器通信方式之间的区别。如果您想了解有关服务器发送事件的更多信息，[这是一篇很好的文章](http://html5doctor.com/server-sent-events/)

# android - 方向更改后，带有 MapView 的片段在 Touch 上崩溃

> ID：14051800
> 
> 赞同：3
> 
> 时间：2012-12-27T08:46:18.083
> 
> 标签：android, android-mapview, fragment

我的问题与下面链接中的问题相同，但我无法找出解决方案。并且无法弄清楚如何询问作者他的解决方案是什么。 [当我更改活动并返回地图时，带有地图的片段崩溃](https://stackoverflow.com/questions/13045794/fragment-with-map-crashes-when-i-change-activity-and-come-back-to-the-map)

我的应用程序在方向改变之前运行良好，在此之前 Touch 运行良好。在方向更改时，它会按照应有的方式重绘 MapView，但是一旦用户在地图上执行任何 onTouch 操作，它就会使应用程序崩溃：

android.view.WindowManager$BadTokenException error 无法添加窗口 --token android.view.ViewRootImpl$blahblahblah 无效。

我正在将 ActionBarSherlock 与 googlemaps 插件一起使用，正如其他问题所使用的同一教程中所建议的那样。我只是不明白在活动在方向更改后重新启动后，我应该如何为 onTouch 事件创建一个新的侦听器。我曾尝试为 onTouch 事件创建一个新的 OnTouchListener，但由于我不确定，也找不到任何示例，所以我无法猜测如何再次在 MapView 上获得有效的 Touch 界面。

我敢肯定这是我想念的简单的东西。

我的代码：

```
public MainActivity extends SherlockFragmentActivity {
    private MapView mapView;
    private MapFragment mMapFragment;

    public void onCreate(Bundle savedInstanceState){
        View view = getLayoutInflater().inflate(R.layout.mapLayout, null);
        mapView = (MapView)view.findViewById(R.id.map);
        mapView.setBuiltInZoomControls(true);
        setContentView(R.layout.activity_main);
    }

    public void onResume(){
        setupFragments();
    }

    private void setupFragments(){
        final FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

        mMapFragment = (MapFragment) getSupportFragmentManager().findFragmentByTag(MapFragment.TAG);
        if (mMapFragment == null){
            mMapFragment = new MapFragment(mapView);
            ft.add(R.id.fragment_container, mMapFragment, MapFragment.TAG);
        }
        ft.show(mMapFragment);
        ft.commit();
    }
}

public class MapFragment extends SherlockFragment{
    public static final String TAG = "MapFragment";
    private MapView mapView;
    private MapOverlay itemizedOverlay;

    public MapFragment(MapView mapView){
        this.mapView=mapView;
    }

    public void onResume(){
        super.onResume();
        List<Overlay> mapOverlays = mapView.getOverlays();

        itemizedOverlay(defaultActiveRoad, mapView.getContext());
        mapOverlays.add(itemizedOverlay);
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup vg, Bundle savedInstanceBundle){
        super.onCreateView(inflater,vg,savedInstanceBundle);
        return mapView;
    }

    public void onViewCreated(View view, Bundle savedInstanceState){
        super.onViewCreated(view, savedInstanceState);
    }

    public void onDestroyView(){
        super.onDestroyView();
        ((ViewGroup)mapView.getParent()).removeView(mapView);
    }

    public void setMapView (MapView mapView){
        this.mapView = mapView;
    }

    public MapView getMapView(){
        return mapView;
    }
} 
```

错误日志包含

```
android.view.WindowManager$BadTokenException: Unable to add window -- token android.view.ViewRootImpl$W@40fab3b0 is not valid; is your activity running?
at android.view.ViewRootImpl.setView(ViewRootImpl.java:585)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:326)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
at android.view.Window$LocalWindowManager.addView(Window.java:547)
at android.widget.ZoomButtonsController.setVisible(ZoomButtonsController.java:371)
at com.google.android.maps.MapView.displayZoomControls(MapView.java:1055)
at com.google.android.maps.MapView$1.onDown(MapView.java:341)
at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:517)
at com.google.android.maps.MapView.onTouchEvent(MapView.java:685) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:05:15.510

在碰壁几天后，我决定将地图系统升级到[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)。这解决了我在使用缩放控件时遇到的问题。

遵循以下说明后：[将 ActionBarSherlock 与新的 SupportMapFragment 一起使用](https://stackoverflow.com/questions/13721929/using-actionbarsherlock-with-the-new-supportmapfragment)

我按照上面的说明创建了一个 SherlockMapFragment，但在我的应用程序包中。我的 MapFragment 现在扩展了刚刚创建的新 SherlockMapFragment。

```
public class MapFragment extends SherlockMapFragment {

public static final String TAG = "MapFragment";
private GoogleMap mapView;
private Application global;
public MapFragment(){
}

public void onCreate(Bundle savedInstanceBundle){
    super.onCreate(savedInstanceBundle);
    setRetainInstance(true);
}

public void onResume(){
    super.onResume();

    global = (Application)getSherlockActivity().getApplication();

}

public View onCreateView(LayoutInflater inflater, ViewGroup vg, Bundle savedInstanceBundle){
    View view=super.onCreateView(inflater, vg, savedInstanceBundle);
    mapView = getMap();
    return view;
}
} 
```

# objective-c - 如何从 UIColor 或 rgb 获取十六进制字符串

> ID：14051807
> 
> 赞同：23
> 
> 时间：2012-12-27T08:46:38.283
> 
> 标签：objective-c

现在我可以像这样将十六进制字符串转换为 rgb 颜色：

```
// Input is without the # ie : white = FFFFFF
+ (UIColor *)colorWithHexString:(NSString *)hexString
{
    unsigned int hex;
    [[NSScanner scannerWithString:hexString] scanHexInt:&hex];
    int r = (hex >> 16) & 0xFF;
    int g = (hex >> 8) & 0xFF;
    int b = (hex) & 0xFF;

    return [UIColor colorWithRed:r / 255.0f
                        green:g / 255.0f
                        blue:b / 255.0f
                        alpha:1.0f];
} 
```

bu 如何将 rgb 转换为十六进制字符串？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-27T08:51:41.653

使用此方法：

```
- (NSString *)hexStringForColor:(UIColor *)color {
      const CGFloat *components = CGColorGetComponents(color.CGColor);
      CGFloat r = components[0];
      CGFloat g = components[1];
      CGFloat b = components[2];
      NSString *hexString=[NSString stringWithFormat:@"%02X%02X%02X", (int)(r * 255), (int)(g * 255), (int)(b * 255)];
      return hexString;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-10-13T10:39:22.540

使用 UIColor 的这个扩展来从中获取 hexString。

```
 extension UIColor {
        func toHexString() -> String {
            var r:CGFloat = 0
            var g:CGFloat = 0
            var b:CGFloat = 0
            var a:CGFloat = 0

            getRed(&r, green: &g, blue: &b, alpha: &a)

            let rgb:Int = (Int)(r*255)<<16 | (Int)(g*255)<<8 | (Int)(b*255)<<0

            return String(format:"#%06x", rgb)
        }
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-24T00:56:47.897

Anoop 答案不正确，因为如果您尝试使用`[UIColor blackColor]`它会返回绿色的十六进制字符串。
原因是系统足够切割以节省内存，它将设置

**黑色**
分量[0] = 0 (r=0,g=0,b=0) 和
分量[1] = 1 (a=1)。

**对于白色**
分量[0] = 1 (r=1,g=1,b=1) 和
分量[1] = 1 (a=1)。

* * *

**使用以下类别将 UIColor 转换为十六进制**
`UIColor+Utility.h`

```
@interface UIColor (Utility)

/**
 Return representaiton in hex
 */
-(NSString*)representInHex;
@end 
```

`UIColor+Utility.m`

```
@implementation UIColor (Utility)
-(NSString*)representInHex
{
    const CGFloat *components = CGColorGetComponents(self.CGColor);
    size_t count = CGColorGetNumberOfComponents(self.CGColor);

    if(count == 2){
        return [NSString stringWithFormat:@"#%02lX%02lX%02lX",
                lroundf(components[0] * 255.0),
                lroundf(components[0] * 255.0),
                lroundf(components[0] * 255.0)];
    }else{
        return [NSString stringWithFormat:@"#%02lX%02lX%02lX",
                lroundf(components[0] * 255.0),
                lroundf(components[1] * 255.0),
                lroundf(components[2] * 255.0)];
    }
}
@end 
```

* * *

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-07T04:03:03.747

这是我在 Swift 中使用的代码，请注意，当您向其发送使用 rgba 值创建的 UIColor 时，这似乎工作正常，但在发送预定义颜色时返回一些奇怪的结果，例如**`UIColor.darkGrayColor()`**

```
func hexFromUIColor(color: UIColor) -> String 
{
let hexString = String(format: "%02X%02X%02X", 
Int(CGColorGetComponents(color.CGColor)[0] * 255.0),
Int(CGColorGetComponents(color.CGColor)[1] *255.0),
Int(CGColorGetComponents(color.CGColor)[2] * 255.0))
return hexString
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-28T02:25:35.917

Objective-c UIColor 类别。这种方法可以避免类似的情况`#FFFF00000000`

```
- (id)hexString {
    CGFloat r, g, b, a;
    [self getRed:&r green:&g blue:&b alpha:&a];
    int rgb = (int)(r * 255.0f)<<16 | (int)(g * 255.0f)<<8 | (int)(b * 255.0f)<<0;
    if (a < 1) {
        rgb = (int)(a * 255.0f)<<24 | (int)(r * 255.0f)<<16 | (int)(g * 255.0f)<<8 | (int)(b * 255.0f)<<0;
    }

    return [NSString stringWithFormat:@"#%06x", rgb];
} 
```

# smtp - 使用 Oauth2 Gmail 连接到 SMTP

> ID：14051810
> 
> 赞同：0
> 
> 时间：2012-12-27T08:46:54.340
> 
> 标签：smtp, gmail, google-oauth

我正在尝试使用 Oauth2 for Gmail 连接 SMTP，但遇到以下问题。

**Oauth 令牌和电子邮件名称**是正确的，并且可以连接 IMAP。

我正在遵循[google 的示例](http://code.google.com/p/google-mail-oauth2-tools/source/browse/trunk/java/com/google/code/samples/oauth2/OAuth2Authenticator.java?r=3)。

```
DEBUG SMTP: Authenticate with SASL
DEBUG SMTP: SASL mechanisms allowed: XOAUTH2
DEBUG SMTP: SASL AUTH command trace suppressed
DEBUG SMTP SASL: Mechanisms: XOAUTH2
DEBUG SMTP SASL: No SASL support
DEBUG SMTP: SASL authentication failed
DEBUG SMTP: Attempt to authenticate
DEBUG SMTP: check mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM 
DEBUG SMTP: AUTH LOGIN command trace suppressed
DEBUG SMTP: AUTH LOGIN failed

javax.mail.AuthenticationFailedException: 535-5.7.1 Username and Password not accepted. Learn more at
535 5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 ol4sm17455809pbb.58 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T02:40:36.383

我只是忘记调用 OAuth2Authenticator 类的 initialize() 方法。

```
 public static void initialize() {
    Security.addProvider(new OAuth2Provider());
  } 
```

# javascript - if(a) 准确地检查 javascript 是什么

> ID：14051815
> 
> 赞同：0
> 
> 时间：2012-12-27T08:47:38.467
> 
> 标签：javascript, conditional-statements

1.  if(a) 准确地检查 javascript 是什么？它可以检查未定义吗？它可以检查null吗？它可以检查一个空字符串吗？
2.  我们什么时候需要使用 typeof a == 'undefined' 或者它可以被 if(a) 覆盖？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T08:53:30.550

`if`在布尔上下文中计算`a`并使用结果来确定要执行的代码分支。`undefined`，`null`并且空字符串都`false`在布尔上下文中计算。

`typeof a === "undefined"`检查名称是否已定义很有用`a`（例如，当前范围内是否存在具有该名称的变量）。如果没有这个结构，`a`如果没有定义，直接访问会抛出异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T08:54:17.523

取自[ECMAscript 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)，if 语句的工作方式如下：

> ### 12.5 if 语句
> 
> 产生式 IfStatement : if ( Expression ) 语句的评估如下：
> 
> > 1.  令**exprRef**为计算表达式的结果。
> > 2.  如果**ToBoolean(GetValue(exprRef))**为 false，则返回（正常、空、空）。
> > 3.  返回 Statement 的评估结果。

意味着，在这种情况下，它会尝试这样的`toBoolean`转换：

> ### 表 11 - ToBoolean 转换
> 
> Undefined: **false**
> Null: **false**
> Boolean: 结果等于输入参数（无转换）。Number：如果参数为**+0**、**-0**或**NaN**
> ，则 结果为**false**；否则结果为**真**。String：如果参数为空字符串（长度为零），则 结果为**假；**否则结果为**真**。 对象：**真**

 ******* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T08:50:47.973

它检查不是假的值，即,`false`和/或空字符串。当您对某个值是否未定义感到好奇时很有用，因为无法区分虚假值。`0``undefined``null``typeof a == 'undefined'``if (a)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T08:53:38.833

条件语句只会检查“真”或“假”。在未定义的情况下，不满足条件并且控制不会进入循环。

typeof 返回操作数的类型。有关详细信息，您可能希望查看[此链接](http://www.javascriptkit.com/javatutors/determinevar2.shtml)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T08:55:31.070

以下值在 javascript 条件下被视为 false：false、null、undefined、''、0、NaN

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T09:03:32.343

h2co3 的答案实际上几乎是正确的，你*不能*在没有 typeof 的 if 中检查未定义的变量，因为这会导致脚本错误。

如果你这样做：

```
<script>
if (a) alert('hello');
</script> 
```

你会得到一个脚本错误并且 if 不会被评估（在没有显示警报的意义上结果是相同的，但那是因为线程执行由于脚本错误而结束。）

如果你想确保 a 被定义，你需要使用 typeof 测试。******

# .htaccess - 通过 htaccess 问题的 301 重定向规则

> ID：14051819
> 
> 赞同：0
> 
> 时间：2012-12-27T08:48:08.303
> 
> 标签：.htaccess, redirect

我想`301`从

`domain.com/?test-article.php`

到

`domain.com/full-article/test-article.php`

这是我正在尝试使用的代码，但它不起作用。

```
redirect 301 /?test-article.php http://domain.com/full-article/test-article.php 
```

或者

```
rewriteRule /?test-article.php http://domain.com/full-article/test-article.php [R=301,L] 
```

如果我不使用“？” 然后它从

`/test-article.php`

到

```
http://domain.com/full-article/test-article.php 
```

所以与“？”有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:56:23.977

您无法使用 a`Redirect`或的模式匹配查询字符串`RewriteRule`。您需要使用`%{QUERY_STRING}`变量和 mod_rewrite：

```
RewriteCond %{QUERY_STRING} ^test-article$
RewriteRule ^/?$ http://domain.com/full-article/test-article.php [R=301,L] 
```

# javascript - 通过单击获取行中的 HTML 表格单元格值

> ID：14051821
> 
> 赞同：9
> 
> 时间：2012-12-27T08:48:14.183
> 
> 标签：javascript, html, html-table

如何在 HTML 表格中获取 TD 的值？

IE

```
| ID | cell 1 | cell 2 |
| 1  | aaaa   | a2a2a2 |
| 2  | bbbb   | b2b2b2 |
| 3  | cccc   | c2c2c2 | 
```

所以现在如果我单击单元格值：“bbbb”，我想获取所选行的所有值：

```
$id='2'; $cell_1='bbbb'; $cell_2='b2b2b2'; 
```

**注意：**我想使用 JavaScript 而不是 jQuery。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T08:50:05.363

您可以将 event.target.innerText 用于 javascript，将 $(event.target).text() 用于 jQuery，jQuery 是首选解决方案，因为它可以处理[跨浏览器的兼容性](http://www.sitepoint.com/whats-so-good-about-jquery/)。

**仅使用 javascript**

**[现场演示](http://jsfiddle.net/rajaadil/dREqs/1/)**

*html*

```
<table id="tableID" onclick="myFun(event)" border="1">
  <tr>
     <td>row 1, cell 1</td>
     <td>row 1, cell 2</td>
  </tr>
  <tr>
     <td>row 2, cell 1</td>
     <td>row 2, cell 2</td>
  </tr>
</table>​ 
```

*Javascript*

```
function myFun(e){ 
    alert(e.target.innerText); //current cell
    alert(e.target.parentNode.innerText); //Current row.
}​ 
```

**使用 jQuery**

**[现场演示](http://jsfiddle.net/rajaadil/dREqs/2/)**

*html*

```
<table id="tableID" border="1">
   <tr>
       <td>row 1, cell 1</td>
       <td>row 1, cell 2</td>
   </tr>
   <tr>
       <td>row 2, cell 1</td>
       <td>row 2, cell 2</td>
    </tr>
</table>​ 
```

*Javascript*

```
$('#tableID').click(function(e){
    alert($(e.target).text()); // using jQuery
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:54:08.567

```
var table = document.getElementById('tableID'),
    cells = table.getElementsByTagName('td');

for (var i=0,len=cells.length; i<len; i++){
    cells[i].onclick = function(){
        console.log(this.innerHTML);
        /* if you know it's going to be numeric:
        console.log(parseInt(this.innerHTML),10);
        */
    }
} 
```

[从这里](https://stackoverflow.com/questions/10057226/how-to-get-html-table-td-cell-value-by-javascript)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T09:41:01.417

希望这可以帮助你。它包含跨浏览器脚本。

```
 <html>
    <head>
    <script type="text/javascript">
    function myFun(e){
    if(!e.target)
        alert(e.srcElement.innerHTML);
    else
        alert(e.target.innerHTML);
    }
    </script>
    </head>
    <body>
    <table id="tableID" onclick="myFun(event)" border="1">
    <tr>
    <td>row 1, cell 1</td>
    <td>row 1, cell 2</td>
    </tr>
    <tr>
    <td>row 2, cell 1</td>
    <td>row 2, cell 2</td>
    </tr>
    </table>
    </body>
    </html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T08:54:22.223

使用jquery会很容易..

```
$("#tableId").find("td").click(function(event){
   var listOfCell=$(this).siblings();
   for(i=0;i<listOfCell.length;i++){
   alert($(listOfCell[i]).text());
}
}); 
```

# silverlight - Silverlight 应用程序代码中未处理的错误：4004 System.ArgumentException：

> ID：14051823
> 
> 赞同：2
> 
> 时间：2012-12-27T08:48:37.740
> 
> 标签：silverlight, xaml, user-controls, esri

我正在silverlight 上开发一个esri 地图项目。当我将自定义用户控件添加为元素层时，从浏览器中获取该错误：

```
Line: 56
Error: Unhandled Error in Silverlight Application 
Code: 4004    
Category: ManagedRuntimeError       
Message: System.ArgumentException: 
Parameter name: height
   at System.Windows.Rect..ctor(Double x, Double y, Double width, Double height)
   at ESRI.ArcGIS.Client.LayerCanvas.ArrangeOverride(Size finalSize)
   at System.Windows.FrameworkElement.ArrangeOverride(IntPtr nativeTarget, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight) 
```

这很奇怪，因为我没有写任何代码或其他东西。我的地图服务有效。我认为问题发生在解析 xaml 文件时。所以;

mainpage.xaml 是：

```
<UserControl x:Class="tbl.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:esri1="http://schemas.esri.com/arcgis/client/2009"
    xmlns:lcl="clr-namespace:tbl"
    d:DesignHeight="600" d:DesignWidth="800">

    <Grid x:Name="LayoutRoot" Background="White">

        <esri1:Map x:Name="esrimap">
            <esri1:ArcGISTiledMapServiceLayer Url="http://.../ArcGIS/rest/services/.../MapServer">
            </esri1:ArcGISTiledMapServiceLayer>

            <esri1:ElementLayer>
                <lcl:SilverlightControl1 esri1:ElementLayer.Envelope="495942.700915659,4509916.68364022,495942.700915659,4509916.683614022"></lcl:SilverlightControl1>
            </esri1:ElementLayer>

        </esri1:Map>
    </Grid>

</UserControl> 
```

和 silverlightcontrol.xaml：

```
<UserControl x:Class="tbl.SilverlightControl1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">

    </Grid>
</UserControl> 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:15:53.590

这是 ESRI 控件`ArrangeOverride`方法中的一个错误。它试图创建`System.Windows.Rect`一个负高度。

仅当宽度和/或高度为负时，[4 参数构造函数`System.Windows.Rect`](http://msdn.microsoft.com/en-us/library/ms587929(v=vs.95).aspx)才会抛出 ArgumentException。我快速玩了一下这个结构，可以确认这一点。我还可以确认，如果高度为 ，则此构造函数*不会*引发异常`NaN`，这让我感到惊讶。

# xpath - 在 selenium IDE 中组合 XPath 选择器

> ID：14051824
> 
> 赞同：1
> 
> 时间：2012-12-27T08:48:41.637
> 
> 标签：xpath, selenium, selenium-ide

我正在寻找一种将 2 个 XPath 选择器组合成 1 个以在 Selenium IDE 中使用的方法，这样我就可以检查具有某个 ID 的元素是否具有某个类。

这 2 个选择器确实可以工作，但还不足以缩小到对 assertElementPresent 进行操作的程度。

```
xpath= .//*[contains (@class,'ui-tabs-hide')]
xpath= .//*[@id='${newTableID}'] 
```

我没有成功尝试遵循 XPath

```
xpath= .//*[contains (@class,'ui-tabs-hide')]/*[@id='${newTableID}'] 
```

有人可以帮我解决这个问题吗？

谢谢，

J。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:07:11.647

好吧... x-mass 仍然让我的头有点模糊...

```
xpath=.//*[@id='${newTableID}' and contains (@class,'ui-tabs-hide')] 
```

是要走的路

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:50:05.063

**使用**：

```
xpath=.//*[@id='${newTableID}' 
        and contains(concat(' ', @class, ' '), ' ui-tabs-hide ')] 
```

**请注意如何`contains()`指定**。这保证了不会选择具有所需类名作为前缀或后缀的类名的元素。

# google-groups - Google Groups：检索用户的组列表

> ID：14051828
> 
> 赞同：1
> 
> 时间：2012-12-27T08:49:13.850
> 
> 标签：google-groups, google-provisioning-api, google-groups-api

是否有一个 API 可以获取用户所属的所有 Google 组的列表（当然，在他/她的许可下），反之亦然（给定一个 Google 组，让所有用户成为该组的一部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:15:55.697

Google Apps Provisioning API 可让您[检索 Google Apps 用户的当前成员资格，](https://developers.google.com/google-apps/provisioning/#retrieving_all_groups_for_a_member)并[列出 Google Apps Google Group 的所有成员](https://developers.google.com/google-apps/provisioning/#retrieving_all_members_of_a_group)。但是，对于消费者 (@gmail.com) Google 帐户和常规 (@googlegroups.com) Google 群组，无法执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:18:03.610

它也不必是 Google Apps Provisioning。他们还具有 gdata 服务和检索组功能。例如，如果您有一个用户 example@domain.com，那么您可以使用 RetrieveGroups(String memberId, bool directOnly)，其中 memberId 是电子邮件地址，directOnly 必须设置为 True。这工作时尚。

# html - 悬停时更改div的位置

> ID：14051829
> 
> 赞同：0
> 
> 时间：2012-12-27T08:49:19.647
> 
> 标签：html, css

考虑遵循 HTML。我有`.image`并`.details`包裹在`.wrap`. 在外部`.wrap`，我有另一个 div `.extra`，我最初想隐藏它，但仅将鼠标悬停在**图像 div**上，我想将它向下滑动，以便它占据**整个区域**。`.wrap`

我正在尝试以下代码，但不起作用：

**HTML：**

```
<div class="box">
    <div class="wrap">
        <div class="image"><img src="http://farm9.staticflickr.com/8075/8310628243_d48e64dc66_m.jpg" /></div>
        <div class="details">xxx</div>
    </div>

    <div class="extra">hidden, show on hover over .image</div>
</div> 
```

**CSS：**

```
.box{
    border: 1px solid red;
    width: 240px;       
}

.image{
    border: 1px solid green;
    position: relative;     
}

.extra{
    position: absolute;
    top: -100%;
    left: 0;
    background: green;
}

.box .image:hover .extra{
    top: 0;
} 
```

**演示：http:** [//jsfiddle.net/pv9jd/](http://jsfiddle.net/pv9jd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:03:56.747

Sorry to butcher your code but this may be able to help you:

```
<div class="box">
  <div class="image"></div>
</div> 
```

This is the CSS:

```
.box div{
  color: #fff;
  width: 200px;
  height: 100px;
  position: relative;
  box-sizing: border-box;
  transition: border .7s ease;
}
.image{
  background: #fff url(http://farm9.staticflickr.com/8075/8310628243_d48e64dc66_m.jpg) bottom;
  border-top: solid 100px #ccc;
}

.image:hover{
  -webkit-transition: all .5s ease;
-moz-transition: all .5s ease;
-o-transition: all .5s ease;
transition: all .5s ease;
  border: solid 0px;
} 
```

You can read more [here](http://elneco.biz/css-sibling-selector-navigation/) for the sliding.

You can also play around here: [http://codepen.io/joe/pen/oqxJu](http://codepen.io/joe/pen/oqxJu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:17:30.053

我相信你正在寻找类似这个[图像悬停使用 jQuery](http://jsfiddle.net/UrKCs/7/)

```
$('.image').hover(function(){
  $('.extra').css({'top' : '0'});
    },function(){
      $('.extra').css({'top' : '-100%'}
  );
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:01:40.293

`.extra`不是 的孩子`.image`。

我通过替换为来更新`.image`小提琴`.wrap:hover`。

[http://jsfiddle.net/UrKCs/2/](http://jsfiddle.net/UrKCs/2/)

我不确定你是否想要那个，因为现在`.extra`悬停整个`.wrap`div 时会出现。

我再次更新它以仅将鼠标悬停在图像上

[http://jsfiddle.net/UrKCs/5/](http://jsfiddle.net/UrKCs/5/)

# java - 如何启用图像缓存？

> ID：14051832
> 
> 赞同：0
> 
> 时间：2012-12-27T08:49:29.963
> 
> 标签：java, html, jsp, caching, image-caching

如何为我的 jsp 页面启用图像缓存？jsp 页面每隔 1 秒刷新一次。所以我想缓存图像，以免惹恼用户！有 2 张图像，重量为 4 KB，另外 13 KB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:11:15.557

html 页面中的图像就像对服务器的单独请求。缓存行为由图像下载决定。

从现在开始，您有两个不错的选择：

*   设计一个 javax.servlet.Filter 来注入这些缓存控制。
*   将带有 ajp-link 的 apache-http-server 安装到 tomcat 以在 webapp 内的 .htaccess-file 中配置缓存。

我个人更喜欢 apache 方式，因为

*   缓存可能是真正的有线和
*   我喜欢错误配置而不是错误程序：D

问候

# tfs - Blend for Visual Studio 2012 每次混合获得焦点时连接到 Team Foundation Server 2012 服务器

> ID：14051833
> 
> 赞同：3
> 
> 时间：2012-12-27T08:49:43.240
> 
> 标签：tfs, blend, blend-2012

我正在使用 Visual Studio 2012 并同时为 Visual Studio 2012 混合。我遇到的问题是，每次我切换到混合时，它都会尝试连接到团队基础服务器，导致大约 10 秒的延迟。由于我在混合和视觉工作室之间快速切换，这真的很烦人。我确实阻止了防火墙中的混合，但混合尝试连接直到超时。

有没有办法禁用混合连接到团队基础服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T11:06:59.280

我建议你去`Offline TFS`

请按照以下步骤操作：

1.使用Microsoft Visual Studio Team System Team Explorer，打开解决方案文件，然后在出现的脱机对话框中，单击确定。有关详细信息，请参阅 MSDN 上的如何：当服务器不可用时脱机工作。

2.在 Expression Blend 中打开解决方案并进行更改。保存文件时，Expression Blend 会显示“保存只读文件”对话框。单击覆盖以从文件中删除写保护。

3.当 Team Foundation 服务器再次可用时，使用如何：当服务器不可用时脱机工作中的过程重新联机。如果在您签出文件时其他团队成员对文件进行了更改，您可能需要解决冲突。

关于您的案例的文章：http: [//msdn.microsoft.com/en-us/library/ee341367 (v=expression.40).aspx](http://msdn.microsoft.com/en-us/library/ee341367(v=expression.40).aspx)

# emacs - 如何在 isearch 中绑定文本插入

> ID：14051835
> 
> 赞同：4
> 
> 时间：2012-12-27T08:49:47.910
> 
> 标签：emacs, elisp

我想`M-u`在 isearch 中插入下划线（isearch-regexp 和反向变体）。

两者都不

```
(define-key isearch-mode-map (kbd "M-u") 'insert-underscore) 
```

也不

```
(add-hook 'isearch-mode-hook
      (lambda ()
       (local-set-key (kbd "M-u") 'insert-underscore)
      )) 
```

`insert-underscore`是我的简单插入“_”的函数。它可以在主框架和迷你缓冲区中工作，但我无法在 isearch 中工作......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:15:14.420

Isearch 不使用常规命令。 `(kbd "_")`与所有其他可打印字符一起绑定到`isearch-mode-map`. 这并不明显，但是当您按下一个键时，很多事情都会发生在“isearch-mode”中。显示以新结果刷新，包装是可能的，等等，等等，

您必须操纵原始键盘事件才能使其正常工作。

```
(defun underscore ()
  (interactive)
  (isearch-unread-key-sequence (list ?_)))

(define-key isearch-mode-map (kbd "M-u") 'underscore) 
```

请注意，此代码不可靠；例如，数字前缀不起作用。

*编辑*：在我脑海中渗透了一段时间后，我突然想到这是[翻译键映射的确切用例](http://www.gnu.org/software/emacs/manual/html_node/elisp/Translation-Keymaps.html)

```
(define-key key-translation-map (kbd "M-u") (kbd "_")) 
```

Emacs 不是很强大吗？

# wordpress - 在 WordPress 3.5 之后，我们还应该使用 media_upload_tabs 过滤器在媒体管理器中添加标签吗？

> ID：14051836
> 
> 赞同：6
> 
> 时间：2012-12-27T08:49:49.203
> 
> 标签：wordpress, wordpress-3.5

`media_upload_tabs`从WordPress 3.5 开始，旧的媒体管理器过滤器（

我还没有找到任何建议添加标签的新方法的信息，我想知道 WordPress 是否会坚持使用旧的添加标签的方式，或者将来切换到新的方式。

有没有人了解将标签添加到媒体管理器的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T00:23:06.763

不幸的是，很难预测是否有人会在 WordPress 中进行更改，作为一个开源项目，您自己可以做出决定，贡献代码并在某种程度上获得您想要的结果。

然而，从根本上说，“如果它没有坏，就不要修复它”这句古老的格言在这里适用。

很难从您的问题中确切知道您要做什么，但是社区有很多批评，因为媒体管理器现在非常依赖 jQuery 和 JavaScript，因此您可能无法以旧方式实现功能.

# css - 如何在不推出内容的情况下在页面周围获得边距

> ID：14051841
> 
> 赞同：0
> 
> 时间：2012-12-27T08:50:24.837
> 
> 标签：css

我想要一个有点流畅的网站，其中最小宽度为 1000 像素，最大宽度为 1200 像素。有人可以告诉我如何做到这一点或指向我的教程吗？

我遇到的问题是，如果我在正文上留出 10px 的边距，页面上的任何内容都会被推离页面右侧 10px。我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:05:32.917

如果您想应用您的边距，只有当您的宽度超过特定值时，您才能使用媒体查询：

```
@media screen and (min-width: 1200px) {
    margin:10px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:16:15.577

将`border-box`属性添加到您的元素中。这样可以确保无论您在元素上放置什么边框、边距或填充，它总是会产生您指定的宽度

```
#element{
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
-ms-box-sizing: border-box;
box-sizing: border-box;
min-width:1000px;
max-width:1200px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:16:28.333

这是一个很好的网站，可以帮助您查看用于创建流畅和固定布局网站的 CSS-

[http://csslayoutgenerator.com/](http://csslayoutgenerator.com/)

关于您的 10 像素保证金问题，这是我制作的测试小提琴[（单击此处）](http://jsfiddle.net/DJdQd/)。其中有什么问题？

css-

```
body
{
    margin:10px;
    min-width:400px; 
    max-width:450px;
}
#test
{
background-color:yellow;
} 
```

# iphone - LinkedIn 入门工具包未将内容共享到墙上 如果添加内容字典？

> ID：14051845
> 
> 赞同：1
> 
> 时间：2012-12-27T08:50:55.117
> 
> 标签：iphone, xcode, ios5, linkedin

我已经编写了将内容发布到linkedIn 墙上的代码，如果我从更新字典中删除内容字典，它工作正常。请参阅以下包含发布数据的代码：

```
- (IBAction)postUpdate
    {
     NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/shares"];
     OAMutableURLRequest *request =
     [[OAMutableURLRequest alloc] initWithURL:url
                                     consumer:oAuthLoginView.consumer
                                        token:oAuthLoginView.accessToken
                                     callback:nil
                            signatureProvider:nil];

     NSDictionary *content=[[NSDictionary alloc] initWithObjectsAndKeys:@"http://www.celebs101.com/wallpapers/Bruce_Lee/421101/Bruce_Lee_Wallpaper.jpg",@"submitted-image-url",@"http://www.youtube.com/watch?v=GoZ2Be2zLq8",@"submitted-url",@"Post Image and Video testing",@"title",@"Posted Description",@"description",nil];

     NSDictionary *update = [[NSDictionary alloc] initWithObjectsAndKeys:
                             [[NSDictionary alloc]
                              initWithObjectsAndKeys:
                              @"anyone",@"code",nil], @"visibility",
                             @"Test posting to linkedIn", @"comment",content,@"content",nil];

     [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
     NSString *updateString = [update JSONString];

     [request setHTTPBodyWithString:updateString];
     [request setHTTPMethod:@"POST"];

     OADataFetcher *fetcher = [[OADataFetcher alloc] init];
     [fetcher fetchDataWithRequest:request
                          delegate:self
                 didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)
                   didFailSelector:@selector(postUpdateApiCallResult:didFail:)];
    } 
```

发布数据来自 didfinishSelector 是：

发布后的数据是：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <error>
      <status>401</status>
      <timestamp>1356601471318</timestamp>
      <request-id>MFW58DCKE9</request-id>
      <error-code>0</error-code>
      <message>[unauthorized]. OAU:0onill9cburx|3c05c306-aad8-4d07-a2a1-2430aa21b54a|*01|*01:1356601465:Ji7pimMqrXp3RHCNJLv8iKZsklk=</message>
    </error> 
```

我不知道为什么会这样？请帮忙..在此先感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:00:41.017

我已经解决了

在LinkedIn上发布的工作代码如下：

```
- (IBAction)postUpdate
{
 NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/shares"];
 OAMutableURLRequest *request =
 [[OAMutableURLRequest alloc] initWithURL:url
                                 consumer:oAuthLoginView.consumer
                                    token:oAuthLoginView.accessToken
                                 callback:nil
                        signatureProvider:nil];

 NSMutableDictionary *contentDic=[[NSMutableDictionary alloc] init];

 [contentDic setValue:@"http://www.celebs101.com/wallpapers/Bruce_Lee/421101/Bruce_Lee_Wallpaper.jpg" forKey:@"submitted-image-url"];
 [contentDic setValue:@"http://www.linkedin.com" forKey:@"submitted-url"];
 [contentDic setValue:[NSString stringWithFormat:@"A title for your share"] forKey:@"title"];

 NSDictionary *update = [[NSDictionary alloc] initWithObjectsAndKeys:
                         [[NSDictionary alloc]
                          initWithObjectsAndKeys:
                          @"anyone",@"code",nil], @"visibility",
                         @"Test posting to linkedIn",@"comment",contentDic,@"content",nil];

 [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

 NSString *updateString = [update JSONString];

 NSLog(@"json string is %@",updateString);

 [request setHTTPBodyWithString:updateString];
 [request setHTTPMethod:@"POST"];

 OADataFetcher *fetcher = [[OADataFetcher alloc] init];

 [fetcher fetchDataWithRequest:request
                      delegate:self
             didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)
               didFailSelector:@selector(postUpdateApiCallResult:didFail:)];
}

- (void)postUpdateApiCallResult:(OAServiceTicket *)ticket didFinish:(NSData *)data
{
 NSString *myString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
 NSLog(@"data after posting is %@",myString);
}

- (void)postUpdateApiCallResult:(OAServiceTicket *)ticket didFail:(NSData *)error
{
 NSLog(@"%@",[error description]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:39:50.667

如果您收到此类错误：

![在此处输入图像描述](../Images/abd8823238b7604b43cb81530fd344d3.png)

所以这可能是因为“submitted-url”键中的post url。因此，一种简单的方法是首先使用此链接（ [http://tinyurl.com/api-create.php?url=post_url](http://tinyurl.com/api-create.php?url=post_url)）使“submitted-url”的 post_url 变短。然后将这个简短的 post_url 用于“submitted-url”值。这可以解决您的问题。

有时，“submitted-url”键的长 url 会导致这种问题。

# android - 没有创建 R.java 文件

> ID：14051847
> 
> 赞同：3
> 
> 时间：2012-12-27T08:51:03.463
> 
> 标签：android, r.java-file

我的 android 应用程序中有 R.java 文件。但我不知道，它是如何删除一些。要再次创建它，我清理我的项目并通过单击构建项目来重建我的项目。我不知道是什么问题。它不会再次被创建。通常，每当我构建项目时，它都会自动创建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T15:41:36.957

如果您在更新 ADT 后遇到此问题，则应安装该 Android Build Tools 。在我的情况下，安装构建工具并重新启动 eclipse 解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:52:32.320

试试这个：

1.  `R.java`删除对类的任何导入
2.  将光标移动到对任何按钮/布局/字符串/whatever-coming-from-R 的引用，删除最后一个字符，然后点击`ctrl+space`. Eclipse 将尝试对您进行代码提示，自动导入正确的`R.java`.
3.  清洁和重建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:00:54.967

您的问题的一些快速解决方案可能是，

*   使用`Ctrl`++`Shift`命令`O`“组织导入”并生成任何缺少的导入语句。有时这会生成不正确的导入语句，这会隐藏`R.java`构建时自动生成的类。
*   `R`是一个生成的类。如果您使用的是[Android 开发工具 (ADT)](http://developer.android.com/guide/developing/eclipse-adt.html)，它会在项目构建时生成。您可能已关闭“自动构建”。打开它并构建您的项目。
*   您的 xml 视图中的错误可能会导致无法生成 R.java。浏览您的视图文件并确保所有 xml 都是正确的！
*   删除，如果有的话`import android.R;`
*   重新启动您的 IDE。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T09:03:00.833

您可以通过执行以下命令使用 aapt 工具创建 R.java 文件。

```
ANDROID_HOME/platform-tools/aapt
                    package
                    -v
                    -f
                    -m
                    -S DEV_HOME/res
                    -J DEV_HOME/src
                    -M DEV_HOME/AndroidManifest.xml
                    -I ANDROID_HOME/platforms/android-7/android.jar 
```

生成资源java代码和打包资源

```
aapt  package -f -M ${manifest.file} -F ${packaged.resource.file} -I ${path.to.android-jar.library} -S ${android-resource-directory} [-m -J ${folder.to.output.the.R.java}] 
```

您可以在此链接上找到有关选项的更多详细信息

[http://www.herongyang.com/Android/Project-aapt-Android-Asset-Packaging-Tool.html](http://www.herongyang.com/Android/Project-aapt-Android-Asset-Packaging-Tool.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T09:12:59.887

是的，也许您的布局或可绘制目录中有一些错误。请参阅 [问题标签] 以获取更多详细信息

# vba - 使用 VBA 将一些文件从输入文件夹重命名为输出文件夹

> ID：14051852
> 
> 赞同：0
> 
> 时间：2012-12-27T08:51:15.647
> 
> 标签：vba, ms-word

我正在使用两个文件夹，一个是所有文件都存在的输入文件夹，另一个是要保存重命名文件的输出文件夹。

请参阅下面的代码。我正在使用 Str() 函数来转换数值，但它不起作用。为什么我不知道。我也没有得到所需的输出。

我面临问题，即 Str(m) not WORKING 并显示类型不匹配错误

请帮忙.....

```
Sub ChangeFilename()

IFILEPATH = InputBox("Copy INPUT folder PATH")
OFILEPATH = InputBox("Copy OUTPUT folder PATH")
Dim strfile As String
Dim filenum As String

strfile = Dir(IFILEPATH)
startFile = InputBox("Start File NAME")
endFile = InputBox("End File NAME")
Dim r as Long
r = InputBox("Input INCREAMENT valu")
Do While strfile <> ""
 If (strfile = startFile) Then

  Do While strfile <= endFile
    x = Left(strfile, Len(strfile) - 4)
    x = Right(x, Len(x) - 2)
    y = Val(x)
    If y > 0 Or y < 9 Then
      Dim m As Long
      m = y + r
      Dim k As String
     'MsgBox Str(m)
      k = Str(m)        //This is the area where I am facing problem i.e Str(m) not WORKING and shows type mismatching Error
      x = "00" & k
      Name IFILEPATH & strfile As OFILEPATH & "eq" & x & ".eps"
    ElseIf y >= 9 Or y < 99 Then
      m = y + r
      x = "0" & k
      Name IFILEPATH & strfile As OFILEPATH & "eq" & x & ".eps"
    Else
      'x = Str(Val(x + r))
      Name IFILEPATH & strfile As OFILEPATH & "eq" & x & ".eps"

    End If
  Loop
 End If
  strfile = Dir
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T23:59:26.020

我不确定我是否完全按照您要执行的操作，但看起来您并未将 设置`r`为整数，因此它仅将值用作字符串。如果您想让它增加，那么我假设您希望它是一个数值，而不仅仅是文本。

我相信您需要将此维度添加到顶部：

```
Dim r As Long 
```

另外，我很确定你会想要在其中一个循环中放置这样的东西

```
r = r + 1 
```

这将使它`r`在每个循环期间增加 的值。如果您希望增量与用户输入的值相同，则需要更详细一些，因为它需要保持原始值或`r`. 您可以`r2 = r`在开头使用（在用户输入之后），以便您可以将`r2`其用作增量（这将是原始`r`值）。然后你可以使用：

```
r = r + r2 
```

不要忘记`r2`在开头标注尺寸：

```
Dim r2 As Long 
```

# php - 谷歌登录集成

> ID：14051853
> 
> 赞同：2
> 
> 时间：2012-12-27T08:51:18.737
> 
> 标签：php

我正在开发一个应用程序，目前希望允许其他用户使用他们现有的 Google 帐户登录。我已经根据这篇文章应用了代码：

[http://www.9lessons.info/2011/07/login-with-google-account.html](http://www.9lessons.info/2011/07/login-with-google-account.html)

我已经完成了所需的操作，创建了一个表等，并且还更改了 URL_CALLBACK。但是，我收到了这个错误。

> 错误：invalid_request。解析 OpenID 身份验证请求时出错。

我曾尝试用谷歌搜索与此错误相关的一些信息，但找不到任何解决方案。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T09:43:11.970

我自己使用nodejs的护照库就遇到了这个错误。

对我来说，这是因为我的返回 url 不包括我的领域。

坏的：

```
{
  returnURL: 'http://dev-url:5000/auth/google/return',
  realm: 'http://dev-url/'
} 
```

好的：

```
{
  returnURL: 'http://dev-url:5000/auth/google/return',
  realm: 'http://dev-url:5000/'
} 
```

可能不是 php 库的问题。但是在不知道设置是什么的情况下，很难提供任何帮助。

# c# - 访问静态随机实例对性能有何影响

> ID：14051854
> 
> 赞同：0
> 
> 时间：2012-12-27T08:51:21.353
> 
> 标签：c#, oop, class, random, static

> **可能重复：**
> [随机数生成器仅生成一个随机数](https://stackoverflow.com/questions/767999/random-number-generator-only-generating-one-random-number)
> [类 System.Random .. 为什么不是静态的？](https://stackoverflow.com/questions/4933823/class-system-random-why-not-static)

我有一个名为的公共静态类`RandomGenerator`，它只有一个值 a`public static random = new Random();`

这就是它的样子

```
 public static class RandomGenerator
    {
        public static Random random = new Random(); 
    } 
```

我必须这样做，因为当我的代码访问随机数时，它会生成太多重复的副本（我相信它与内存中 Random 的位置有关）

上面的代码效果很好！我的代码每次调用时都会生成一个真正的随机值。我的问题是为什么随机不是 C# 语言的内置静态函数？是因为以这种方式访问​​某些东西会导致性能下降吗？我编写代码的方式是否存在明显的性能问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T08:58:19.783

MSDN 写了以下关于 Random 构造函数的内容：

> 默认种子值来自系统时钟并且具有有限的分辨率。因此，通过调用默认构造函数连续创建的不同 Random 对象将具有相同的默认种子值，因此将产生相同的随机数集。这个问题可以通过使用单个 Random 对象来生成所有随机数来避免。您还可以通过修改系统时钟返回的种子值，然后将这个新的种子值显式提供给 Random(Int32) 构造函数来解决此问题。

[http://msdn.microsoft.com/en-us/library/h343ddh9.aspx](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:56:15.590

您描述的问题与随机存在或非静态无关。我想您正在创建 Random 实例，然后从该实例中获取随机值。这样，每个 Random 都是使用默认种子创建的，默认种子是当前时间，具有秒精度。由于 Random 实例是使用相同的种子创建的，因此在几秒钟内您获得了相同的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T08:59:05.527

它本身不是静态的，因为 .Net 中的“随机”数字并不是真正随机的——它们是“伪随机”，这意味着它们对于统计来说足够随机，但对于密码学来说不够随机。也就是说，它们均匀分布在一个范围内，但给定种子参数，您可以预测下一个“随机”值将是什么。这就是为什么您必须实例化 Random 类（就像您在上面所做的那样）以获得随机数 - 您需要创建一个新实例，为其播种（如果您不手动播种，它会使用当前时间戳） )，然后得到“下一个”随机值。如果您使用相同的值播种 Random 类，它将产生相同系列的“随机”数字 - 使用系统时间作为种子非常有效，因为它总是在变化，

拥有像这样的静态“随机”类是获得随机值的一种方法，而无需在每次需要时都实例化一个新对象，但你在这里所做的只是实例化一个新副本。一种更有效地做到这一点的方法可能是这样的：

类 RandomNumber { 静态只读 Random r = new Random();

```
 public static Int32 GetNext(int maxValue)
    {
        return r.Next(maxValue);
    }

    public static Int32 GetNext()
    {
        return r.Next();
    }
} 
```

这样，您只需实例化一次，并且您将继续重用该实例 - 每次您想要一个新的随机数时，只需调用静态类的 GetNext 方法（指定上限与否），然后您会得到一个新号码。

# javascript - “{}”和“new Object()”之间的区别

> ID：14051856
> 
> 赞同：10
> 
> 时间：2012-12-27T08:51:22.853
> 
> 标签：javascript

> **可能重复：**
> [创建对象 - 新对象或对象文字表示法？](https://stackoverflow.com/questions/4597926/creating-objects-new-object-or-object-literal-notation)

以下之间究竟有什么区别：

```
var myData = new Object();
myData["name"] = "ATOzTOA";
myData["site"] = "atoztoa"; 
```

和

```
var myData = {};
myData["name"] = "ATOzTOA";
myData["site"] = "atoztoa"; 
```

**更新**

我得到的是这个...

```
var myData = {
    "name" : "ATOzTOA",
    "site" : "atoztoa",
}; 
```

是一个捷径

```
var myData = new Object({
    "name" : "ATOzTOA",
    "site" : "atoztoa",
}); 
```

我对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T08:52:43.543

没有区别（技术上）。`{}`只是一个*快捷*方式`new Object()`。

但是，如果您分配一个*对象字面量*，您可以直接形成一个具有多个属性的新对象。

```
var myData = {
    name:   'ATOzTOA',
    size:   'atoztoa'
}; 
```

..这可能感觉更方便。此外，它减少了对对象的访问，最终速度更快。但这与微优化有关。更重要的是它的打字少了很多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T08:53:01.267

没有什么。`{}`只是一个**简短**的手`new Object()`

与您的全名相同的逻辑是**“马克扎克伯格”**，人们称您为**“嗨马克”**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:53:29.303

在我看来没有区别，两者都在初始化对象。没有别的，这是一条捷径。

# jquery - 如何手动重新初始化 jscrollpane？

> ID：14051857
> 
> 赞同：0
> 
> 时间：2012-12-27T08:51:23.400
> 
> 标签：jquery, jscrollpane

我正在尝试在加载 disqus 注释后手动重新初始化 index.php 和 single.php 文件中的 jscrollpane，而不是在 header.php 中初始化时将 autoreinitialise 设置为 true。我正在尝试这样做：

```
<script type="text/javascript">
$(document).ready(function() {
var api = $('.scroll-pane').jScrollPane(settings).data('jsp');
api.reinitialise();
});
</script> 
```

我无法弄清楚我做错了什么。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T14:25:07.243

我认为问题是当文档准备好时你的 diquss 高度还没有准备好，尝试使用超时来重新初始化，或者如果 disquss 有 loadingComplete 回调，使用它在完成加载后使用你写的相同行重新初始化你的问题应该有效。

# java - Spring Advice 不适用于递归 bean

> ID：14051859
> 
> 赞同：0
> 
> 时间：2012-12-27T08:51:36.303
> 
> 标签：java, spring, aop, spring-aop

我用以下组件依赖树制作了一个简单的应用程序：

```
Service1 injects Service2(via constructor)
Service2 injects SomeContext(via setter)
SomContext injects Service1(via setter)
Advisor is for Service1 
```

因此，当 spring 尝试构建 Service1 或 Service2 时，它会自动尝试应用建议，但在 spring 中有一个检查 - isCurrentlyInCreation（在 BeanFactoryAdvisorRetrievalHelper.java 中），因此它尝试应用建议的 bean 仍然是它的创建并跳过建议应用.

我知道 bean 的递归是一种糟糕的设计方式，但现在很难解耦和重构。

我在someContext的factorybean的帮助下解决了这个问题，并在需要时通过applicationcontext（applicationcontextaware）加载Service1，但也许有人知道更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:10:15.443

如果您应用编译时编织而不是加载时编织，则可以解决此问题。这里有两篇文章可以帮助您入门：

*   [Spring、Aspects、@Configurable 和使用 maven 的编译时间编织](http://www.chrissearle.org/blog/technical/spring_aspects_configurable_and_compile_time_weaving_using_maven)
*   [Spring @Transactional：验证事务支持/本地方法调用](http://blog.timmlinder.com/2011/01/spring-transactional-checking-for-transaction-support-and-local-method-calls/)

# java - 道。JDBC。在哪里放置 Connection 对象？

> ID：14051865
> 
> 赞同：1
> 
> 时间：2012-12-27T08:51:57.483
> 
> 标签：java, design-patterns, jdbc, dao

**在 DAO 设计模式中必须将 Connection 对象放在哪里？**

我是否需要`DaoManager`使用 2 种方法创建单独的类（例如）：`open()`和`close()`？在业务逻辑中确实喜欢：

```
DaoManager.open();
PersonDao personDao = DaoFactory.getPersonDao();
Person person = personDao.getById(personId);
.... //more DAO operations
DaoManager.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T09:05:23.650

连接应该是`PersonDao.getById()`方法（以及其他 DAO 方法）的局部变量。它应该从 DataSource 获取连接，使用它，然后在 finally 块中关闭它。

如果您详细介绍一下您的环境（Spring、EJB 容器？），我可以给出更多解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:04:52.583

在大型应用程序中，您通常会将连接保存在连接池中，以便可以将它们重用于多种用途。这样做是因为打开一个新的数据库连接可能有点贵。

DAO 获取对池的引用，并在需要时取出连接。手术结束后，它会将其送回游泳池。

有几种可用的连接池的开源实现，您可能希望重用其中之一。

# linux - 如何使用 shell 脚本将文本附加到文件中的特定行？

> ID：14051883
> 
> 赞同：3
> 
> 时间：2012-12-27T08:53:39.487
> 
> 标签：linux, shell, sed

我有一个文本文件（file.txt），其内容如下：

```
foo1 3464 
foo2 3696 
foo3 4562 
```

它包含进程和相应的PID。

使用 shell 脚本，我想根据 PID 在此文件中的该行中附加一个字符串（运行/未运行）。

例如，在上面的文件中，对于包含 PID 3696 的行，我想在末尾附加一个字符串“running”，这样文件就变成了：

```
foo1 3464 
foo2 3696 running
foo3 4562 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T09:05:43.533

```
$ sed '/3696/ s/$/running/' file.txt 
foo1 3464 
foo2 3696 running
foo3 4562 
```

或者

```
$ sed 's/3696/& running/' file.txt 
foo1 3464 
foo2 3696 running 
foo3 4562 
```

添加`-i`选项以将更改保存回`file.txt`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:17:31.910

使用循环遍历文件中的行并运行`ps`以检查进程是否正在运行：

```
while IFS= read -r line
do
    pid="$(awk '{print $NF}' <<< $line)"
    unset status
    if ps --no-headers -p "$pid" > /dev/null
    then
        status="running"
    fi
    echo "$line $status"
done < file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T09:10:09.343

```
awk '$2==3696{$3="running";}1' your_file

>cat temp
foo1 3464 
foo2 3696 
foo3 4562 
> awk '$2==3696{$3="running";}1' temp
foo1 3464 
foo2 3696 running
foo3 4562 
> 
```

# php - 将 PHP 转换为 Perl 校验和

> ID：14051885
> 
> 赞同：0
> 
> 时间：2012-12-27T08:53:43.053
> 
> 标签：php, perl, checksum

尝试将 PHP 转换为 Perl 时遇到问题。这些代码：

```
<form action="" method="post">
Hex: <input type="text" name="crc"> e.g : 08 13 4B 04 03 00 01 00 11
<br>
<br>
<input type="submit" name="submit" value="submit"></form>

 <?php 
```

函数 PHP

```
function crc($data) {
   $content = explode(' ',$data) ;
   $len = count($content) ;
   $n = 0 ;

   $crc = 0xFFFF;   
   while ($len > 0)
   {
      $crc ^= hexdec($content[$n]) ;
      for ($i=0; $i<8; $i++) {
         if ($crc & 1) $crc = ($crc >> 1) ^ 0x8408;
         else $crc >>= 1;
      }
      $n++ ;
      $len-- ;
   }

   return(~$crc);
} 
```

如果不是空的

```
if (!empty($_POST["submit"])) 
{
    echo "Input = ".$_POST["crc"].'<br>';
    $crc = crc($_POST["crc"]) ; 
```

结果

```
echo "<br>Result: <br>";
    echo "Dec = ".$crc.'<br>' ;
    echo 'Dec - hex = '.dechex($crc).'<br>' ;
    echo 'Checksum = '.str_replace('ffff','',dechex($crc)).'<br>' ; 

}
?> 
```

这是关于校验和的。它在 PHP 上运行良好，但在 perl 中却不行。请给我解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:36:28.487

正如我在评论中已经提到的，在我看来，您尝试计算[CRC checksums](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)。你的代码看起来不对，我不明白你为什么不使用 PHP 的[crc32](http://php.net/crc32)函数。

因为您没有提供我们可以使用的方法，所以我用 Perl 编写了一个小型[Mojolicious](http://mojolicio.us/) Web 应用程序。请注意，我使用了经过充分测试的[Digest::CRC](http://p3rl.org/Digest::CRC)模块，而不是半途而废的轮子改造 DIY 实现。

```
#!/usr/bin/env perl
use Mojolicious::Lite;
use Digest::CRC;

# CRC helper
helper crc => sub {
    my ($self, $data) = @_;
    my $ctx = Digest::CRC->new(type => 'crc32', poly => 0x8408);
    $ctx->add($data);
    return $ctx->digest;
};

# just display the form
get '/' => 'form';

# calculate the CRC
post '/crc' => sub {
    my $self  = shift;

    # build data from hex string
   (my $input = $self->param('input_hex')) =~ s/\s+//g; # ignore whitespace
    my $bytes = pack 'H*', $input;

    # populate data for our template
    $self->stash(
        input   => $self->param('input_hex'),
        hex     => $input,
        bytes   => $bytes,
        crc     => $self->crc($bytes),
    );
};

# done
app->start;

__DATA__

@@ form.html.ep
% layout 'default';
% title 'form';
<form action="<%= url_for 'crc' %>" method="post">
    <p>
        <label for="input_hex">Hex</label>:
        <input type="text" name="input_hex" id="input_hex">
        <small>(e.g : 08 13 4B 04 03 00 01 00 11)</small>
    </p>
    <p><input type="submit" value="calculate CRC sum!"></p>
</form>

@@ crc.html.ep
% layout 'default';
% title 'CRC';
<table>
    <tr><th>Input</th>              <td><%== $input %></td></tr>
    <tr><th>Input (cleaned up)</th> <td><%== $hex %></td></tr>
    <tr><th>Extracted data</th>     <td><%== $bytes %></td></tr>
    <tr><th>CRC32</th>              <td><%== $crc %></td></tr>
</table>

@@ layouts/default.html.ep
<!DOCTYPE html>
<html><head><title>Solving berna maxim's problems: <%= title %></title>
<style type="text/css">th{text-align:right}</style></head><body>
%= content
</body></html> 
```

![](../Images/3cf4cc0217f7234a971035d8e7a0a804.png)

从您的代码中，我看到您想使用特殊的 CRC 生成多项式 ( `0x8408`)。如果您只想检查一些校验和而不需要特殊的生成多项式，则可以删除`crc`帮助程序并改用导出的 CRC 函数：

```
use Digest::CRC 'crc32';

...

    $self->stash(..., crc => crc32($bytes)); 
```

希望有帮助。

# android - Android：为 webView 设置可读的字体大小

> ID：14051886
> 
> 赞同：1
> 
> 时间：2012-12-27T08:53:47.933
> 
> 标签：android, android-webview

我正在使用 webView 来显示 HTML 内容。文本大小对于平板电脑是可读的。但是在小型智能手机上，文本显示为点。用户必须捏缩放才能阅读它。有什么方法可以设置在平板电脑和智能手机上都可以读取的固定大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:52:15.223

```
WebSettings ws= webView.getSettings(); 
```

*   设置文本大小：

    `ws.setTextSize(ws.TextSize.NORMAL);`

用于指定文本大小的枚举。 `SMALLEST`是 50%， `SMALLER`是 75%， `NORMAL`是 100%， `LARGER`是 150%， `LARGEST`是 200%，

*   或者使用这个

    `ws.setDefaultFontSize(12);`

# python - 用于相互比较 200k 字符串的数据结构

> ID：14051895
> 
> 赞同：3
> 
> 时间：2012-12-27T08:54:23.673
> 
> 标签：python, data-structures, string-matching

我有 200,000 个字符串。我需要在该集合中找到相似的字符串。我希望集合中类似字符串的数量非常少。请帮助提供有效的数据结构。

如果我正在寻找完全匹配的字符串，我可以使用简单的哈希。但是，在我的情况下，“相似性”是自定义定义的：如果两个字符串中 80% 的字符相同，则两个字符串被视为相似，顺序无关紧要。

我不想调用查找“相似性”~(200k*100k) 次的函数。欢迎任何建议，例如预处理字符串的技术，高效的数据结构。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:54:30.780

我了解到只有当两个字符串之间的字符串长度差 <=3 时，距离比才可能 >=0.85。这意味着，我们可以对长度差 <=3 的字符串进行分组。

这大大减少了每组中的字符串数量。因此，在我的数据集中，总体比较的数量减少到略低于 50%（200k*100k）。此外，将数据集分成多个小集有助于进行并行处理，从而进一步减少整体运行时间。

减少百分比可能随样本数据集而变化，即最坏的情况发生在所有字符串的长度差 <=3 时。

[感谢 Inbar Rose 激发了这个想法]

就我而言，直方图如下所示：

![直方图](../Images/b33740bfd39e5e663e26f94f44cb45f7.png)

# django - Django：序列化查询集并包含一对多关系子项

> ID：14051900
> 
> 赞同：3
> 
> 时间：2012-12-27T08:54:42.250
> 
> 标签：django, serialization, django-queryset

我想序列化与另一个模型具有一对多关系的对象的查询集。我想在我的 json 输出中包含相关对象。

例子：

```
class Book(models.Model):
    title = models.CharField()
    author = models.ForeignKey('Author')

class Author(models.Model):
    name = models.CharField()

view.py:

serializers.serialize('json', Author.objects.all()) #does not include the book objects 
```

我很确定有一个简单的解决方案，但到目前为止我无法弄清楚如何去做。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T09:40:05.680

您不能从默认的 django 序列化程序中执行此操作，因为 Author 模型没有 books 字段。您可以通过创建自己的序列化程序或手动构建数据并将其传递给 simplejson.dumps() 来实现它

## 更新

例如：

```
class Author(models.Model):
    ...
    def get_json(self):
        return {
            'id': self.id, 
            'name': self.name,
            'books': [{'id': b.id, 'title': b.title} for b in self.book_set.all()] }

from django.utils import simplejson
simplejson.dumps([a.get_json() for a in Author.objects.all()]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:07:34.353

要将 JSON 数据导出到文件吗？如果是这样，您还可以使用管理命令[`dumpdata`](https://docs.djangoproject.com/en/1.4/ref/django-admin/#dumpdata-appname-appname-appname-model)：

```
python manage.py dumpdata your_app.Book your_app.Author > my_models.json 
```

这会将两个模型的数据保存到文件`my_models.json`中。

相反，如果您想序列化您的数据以用于 AJAX 请求等，您可以将模型数据包装在字典中。在你的视图中做这样的事情：

```
# The querysets must be wrapped in list()
# otherwise they can't be serialized as JSON objects
response = {  
    'authors': list(Author.objects.all()),
    'books': list(Book.objects.all())
}

return HttpResponse(simplejson.dumps(response), mimetype='application/json') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-02T17:19:01.983

去年，我需要类似的东西，与 Flask 一起工作。我用[了这个线程](https://stackoverflow.com/questions/7102754/jsonify-a-sqlalchemy-result-set-in-flask)。它会给你这样的东西：

```
class Book(models.Model):
    title = models.CharField()
    author = models.ForeignKey('Author')

    @property
    def serialize(self):
        return {
            'title'    : self.title,
            'author'   : self.author.serialize
        }

class Author(models.Model):
    name = models.CharField()

    @property
    def serialize(self):
        return {
            'name'    : self.name
        }

    @property
    def serialize_books(self):
        return [ book.serialize for book in self.book_set.all() ] 
```

编辑：这个答案与@sneawo 的答案几乎相同。唯一的区别是您可以链接序列化方法。

# linux - 如何在shell中剪切字符串的第一列（可变长度）

> ID：14051902
> 
> 赞同：25
> 
> 时间：2012-12-27T08:54:56.670
> 
> 标签：linux, shell

如何在 shell 中剪切字符串的第一列（可变长度）？

字符串前：

23006 帮助.txt

我需要 23006 作为输出

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-27T08:59:04.083

很多种方法：

```
cut -d' ' -f1 <filename # If field separator is space
cut -f1 <filename  # If field separator is tab
cut -d' ' -f1 <filename | cut -f1  # If field separator is space OR tab
awk '{print $1}' filename
while read x _ ; do echo $x ; done < filename 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T09:00:25.247

```
cut -d " " -f1 test.txt 
```

其中 test.txt 包含您的输入行

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-10-31T08:19:47.483

这个对我有用

```
cut -d' ' -f2- 
```

# javascript - 鼠标滚轮滚动事件

> ID：14051908
> 
> 赞同：1
> 
> 时间：2012-12-27T08:55:42.703
> 
> 标签：javascript, jquery, mouseevent, mousewheel

我想要的是：当鼠标指向 div 时，页面的滚动条不会滚动。这是不可能的吗？当我这样做时，页面的滚动条总是滚动。这是一段javascript代码：

```
if(document.addEventListener){
    document.addEventListener('DOMMouseScroll',scrollFunc,false);
}
window.onmousewheel=document.onmousewheel=scrollFunc;//IE/Opera/Chrome/Safari 
```

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:23:50.523

干得好：

```
var noscroll = document.getElementById('noscroll');

var locked, lockedX, lockedY;
noscroll.addEventListener('mouseover', function (){
    locked = true;
    lockedX = window.scrollX;
    lockedY = window.scrollY;
}, false);
noscroll.addEventListener('mouseout', function (){
    locked = false;
}, false);

window.addEventListener('scroll', function (e){
    if(locked === true){
        window.scrollTo(lockedX, lockedY);
        e.preventDefault();
    }
}, false); 
```

将变量更改为`noscroll`您不想允许滚动的任何元素。

[演示](http://pastehtml.com/view/cn1zjbcgm.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:59:24.050

您基本上可以通过为您的 div指定`width`,`height`和属性来通过 css 实现它：`overflow`

```
<div style="width:100px; height:100px; overflow: auto;" >
    text text text text text text text text text
    text text text text text text text text text
    text text text text text text text text text
    text text text text text text text text text
    text text text text text text text text text
    text text text text text text text text text
    text text text text text text text text text
    text text text text text text text text text
</div> 
```

# css - CSS :last-child:not(:only-child) 没有按预期工作

> ID：14051910
> 
> 赞同：10
> 
> 时间：2012-12-27T08:55:47.577
> 
> 标签：css, css-selectors

目前，我有这个选择器：

```
.form .mid td p:last-child:not(:only-child) {
    margin-bottom: 0; 
} 
```

它没有按预期工作。`P`仅当内部有多个边距时，我才想删除边距`TD`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T14:03:16.467

如果您`td`包含的不仅仅是`p`元素（我不知道，因为您没有显示您的标记），您可能想要使用`:last-of-type`and`:only-of-type`来代替：

```
.form .mid td p:last-of-type:not(:only-of-type) {
    margin-bottom: 0; 
} 
```

# python - 如何使局部变量（函数内部）成为全局变量

> ID：14051916
> 
> 赞同：47
> 
> 时间：2012-12-27T08:56:00.487
> 
> 标签：python, function, global-variables, local

> **可能重复：**
> [在创建它们的函数之外的函数中使用全局变量](https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them)

我正在使用函数，这样我的程序就不会一团糟，但我不知道如何将局部变量变成全局变量。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-27T09:15:06.737

以下是实现相同目的的两种方法：

**使用参数和返回（推荐）**

```
def other_function(parameter):
    return parameter + 5

def main_function():
    x = 10
    print(x)    
    x = other_function(x)
    print(x) 
```

运行时`main_function`，您将获得以下输出

```
>>> 10
>>> 15 
```

**使用全局变量（永远不要这样做）**

```
x = 0   # The initial value of x, with global scope

def other_function():
    global x
    x = x + 5

def main_function():
    print(x)    # Just printing - no need to declare global yet
    global x   # So we can change the global x
    x = 10
    print(x)
    other_function()
    print(x) 
```

现在你会得到：

```
>>> 0    # Initial global value
>>> 10   # Now we've set it to 10 in `main_function()`
>>> 15   # Now we've added 5 in `other_function()` 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-27T08:58:15.853

只需在任何函数之外声明您的变量：

```
globalValue = 1

def f(x):
    print(globalValue + x) 
```

如果您需要从函数内*分配*给全局，请使用以下`global`语句：

```
def f(x):
    global globalValue
    print(globalValue + x)
    globalValue += 1 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-27T10:21:55.960

如果您需要访问函数的内部状态，最好使用类。您可以通过将类实例设为可调用来使类实例表现得像函数，这是通过定义来完成的`__call__`：

```
class StatefulFunction( object ):
    def __init__( self ):
        self.public_value = 'foo'

    def __call__( self ):
        return self.public_value

>> f = StatefulFunction()
>> f()
`foo`
>> f.public_value = 'bar'
>> f()
`bar` 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-27T08:58:27.093

使用全局变量也会让你的程序变得一团糟——我建议你尽量避免它们。也就是说，“global”是python中的一个关键字，因此您可以将特定变量指定为全局变量，如下所示：

```
def foo():
    global bar
    bar = 32 
```

我应该提一下，使用“全局”关键字的情况极为罕见，因此我认真建议重新考虑您的设计。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-27T10:30:32.300

您可以使用模块范围。假设您有一个名为的模块`utils`：

```
f_value = 'foo'

def f():
    return f_value 
```

`f_value`是一个模块属性，可以被导入它的任何其他模块修改。由于模块是单例的，因此从一个模块进行的任何更改`utils`都可以被导入它的所有其他模块访问：

```
>> import utils
>> utils.f()
'foo'
>> utils.f_value = 'bar'
>> utils.f()
'bar' 
```

请注意，您可以按名称导入函数：

```
>> import utils
>> from utils import f
>> utils.f_value = 'bar'
>> f()
'bar' 
```

但不是属性：

```
>> from utils import f, f_value
>> f_value = 'bar'
>> f()
'foo' 
```

这是因为您将 module 属性引用的对象标记为`f_value`在本地范围内，然后将其重新绑定到 string `bar`，而函数`f`仍然引用 module 属性。

# php - 神秘的改变 Javascript 变量

> ID：14051917
> 
> 赞同：0
> 
> 时间：2012-12-27T08:56:01.507
> 
> 标签：php, javascript, variables, global

我有以下一大块 JS，我`var i`用一些 PHP 定义。

```
<script type="text/javascript">
    var i = <?php echo $photo_count; ?>;
    function updatePreview(){
        var x = document.getElementById('preimage').value;
        var y = document.getElementById('precapt').value;
        var preview = "";
        var special = document.getElementById('special').value;

        i++;
        preview += "<div id='smallbox"+i+"' class='smallbox'><table><tr><td rowspan='2'><img id='picture"+i+"' src='"+x+"' /><br /><input type='button' onclick='removeimg("+i+");' value='delete' /></td><td>URL: <input onchange='updateimg("+i+");' type='text' id='image"+i+"' value='"+x+"'/></td></tr><tr><td>Caption: <input type='text' id='capt"+i+"' value='"+y+"'/></td></tr></table></div><hr />";
        //window.alert(preview);

        //document.getElementById('special').value += "#"+x+"|"+y;
        document.getElementById('preview').innerHTML += preview;
        document.getElementById('preimage').value = "";
        document.getElementById('precapt').value = "";
        //window.alert(document.getElementById('special').value);
    }

    function showSubmit(){
        window.alert("i = "+i);
        document.getElementById('hideImg').style.display = "none";
        document.getElementById('hideTags').style.display = "block";
        while(i>1){
            var img = document.getElementById("image"+i).value;
            var capt = document.getElementById("capt"+i).value;
            if(img.length>3){
                document.getElementById('special').value += "#"+img+"|"+capt;
                window.alert(document.getElementById('special').value);
                window.alert("i = "+i);
                document.getElementById('preview2').innerHTML += "<img class='postpreviewimg' src='"+img+"' />";
            }
            i--;
        }
        document.getElementById('preview').style.display = "none";
    }
</script> 
```

在页面的源代码中，我可以看到 PHP 的定义是`i`正确的，但是在`showSubmit()`我`alert(i)`显示`i`的值的第一行中`1`，除非`updatePreview()`首先调用。

换句话说..如果页面源看起来像这样：`var i = 36;`然后我调用它在应该`showSubmit()`发出警报时发出警报的函数`i = 1``i = 36`

每次`updatePreview()`调用`i`都会从 1 开始递增，而不是从 36 开始。

我定义`i`不正确吗？这不是设置全局变量的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:01:20.327

您正在定义`i`为全局变量。因此，页面上使用类似内容的每个脚本`i=10`都会更改此值。

由于`i`是常用的变量计数器名称，因此很可能有一个脚本可以更改它。如果您使用`var MyPhotoCount = <?php echo $photo_count; ?>;`名称，它更有可能起作用。

即使在此脚本之前或之后包含此其他脚本，它也可能导致问题。另一个脚本可能正在使用`on ready function`在您调用之前触发的或任何其他延迟`ShowSubmit();`

全局变量应该始终是唯一的。而且您还刚刚找到了使用它们从来都不是一个好主意的原因。你不能相信他们的价值。

更新：

您在页面上包含 nicEdit.js 并且该脚本包含以下代码（完整源代码中的第 185 行）：

```
domLoaded : function() {
    if (arguments.callee.done) return;
    arguments.callee.done = true;
    for (i = 0;i < bkLib.domLoad.length;i++) bkLib.domLoad[i]();
}, 
```

您的 i 变量在那里更改。

# node.js - 如何使用 Nodejs 将父/子文档索引到 Elasticsearch？

> ID：14051921
> 
> 赞同：1
> 
> 时间：2012-12-27T08:56:19.363
> 
> 标签：node.js, elasticsearch

我可以使用这个 curl 命令轻松索引：

```
curl -XPUT 'http://localhost:9200/prototype_2012.12.27/chow-clfg/Cg-IKkxdTstKAAAAlw-?parent=chow-demo' -d '{
  "chow-clfg": {
    "@type": "chow-clfg",
    "clfg": "Cg6h4VCcMexXAAAAsQc",
    "@timestamp": "2012-12-27T08:24:00.000Z",
    "count": 1
  }
}' 
```

结果：

```
{
  "ok": true,
  "_index": "prototype_2012.12.27",
  "_type": "chow-clfg",
  "_id": "Cg-IKkxdTstKAAAAlw-",
  "_version": 1
} 
```

这几乎立即返回给我一个结果。

但是，当我使用 nodejs 的 http.request 方法尝试它时：

```
var http = require('http');
var index = "prototype_2012.12.27";
var server = "chow-clfg";

var options = {
 host: 'localhost',
 port: '9200',
 path: index+'/'+server+'/Cg-IKkxdTstKAAAAlw-?parent=chow-demo',
 method: 'PUT'
};

var req = http.request(options, function(res){
    console.log('STATUS: ' + res.statusCode);
    console.log('HEADERS: ' + JSON.stringify(res.headers));
    res.setEncoding('utf8');

    res.on('data', function (chunk) {
     console.log(chunk);
    });
});

req.on('error', function(e) {
 console.log('problem with request: ' + e.message);
});

req.write('{"chow-clfg":{"@type":"chow-clfg","clfg":"Cg6h4VCcMexXAAAAsQc","@timestamp":"2012-12-27T08:24:00.000Z","count":1}}');
req.end; 
```

这只是中途暂停该过程，并且不会给我关于它是否成功的反馈。另外，当我在索引中搜索文档时，我找不到它。

因此，我犯了编码错误吗？或者有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-22T13:42:30.260

为什么不使用`elasticsearch`模块及其`index`带`parent`参数的方法？

# ruby-on-rails - `require': 没有要加载的文件 -- v8/init (LoadError)

> ID：14051922
> 
> 赞同：1
> 
> 时间：2012-12-27T08:56:31.737
> 
> 标签：ruby-on-rails

我正在使用 ruby​​ on rails。我在启动服务器（即 rails 服务器）时发现了上述错误。如果有人知道，请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T21:21:02.733

请安装

```
gem 'therubyracer'

bundle install 
```

重启服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-07T17:23:37.403

gem install libv8 -v '3.16.14.19' -- --with-system-v8

# java - StAX XML 两个必需标签之间的所有内容

> ID：14051923
> 
> 赞同：8
> 
> 时间：2012-12-27T08:56:52.087
> 
> 标签：java, xml, xml-parsing, stax, xmlstreamreader

开始使用 XMLStreamReader 学习 StAX，我遇到了一些问题。如何将标签之间的所有内容作为文本获取？我的意思是，我知道所需标签的名称，当我找到它时，我必须转到关闭标签，并且我在它们之间找到的所有内容都必须附加到某个字符串。例如，我们有类似的东西

```
<rootTag>
...    
    <someTag>
        Some text content and other tags here…
    </someTag >
    <tagINeed>
        <someinternalTag1>
            <someinternalTag11>
                Some text content..
            </someinternalTag11>
            ...
        </someinternalTag1>
        <someinternalTag2>
            Something here
        </someinternalTag2>
    </tagINeed>
...
    <somethingAnother>
...
    </somethingAnother >
...
</rootTag> 
```

所以，我需要得到我的字符串

```
 <someinternalTag1>
            <someinternalTag11>
                Some text content..
            </someinternalTag11>
            ...
        </someinternalTag1>
        <someinternalTag2>
            Something here
        </someinternalTag2> 
```

我怎么才能得到它？也许，我必须在源xml中找到所需块的开始和结束偏移量，并在解析后给出子字符串？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T09:25:49.697

尝试

```
 StringWriter sw = new StringWriter();
    XMLOutputFactory of = XMLOutputFactory.newInstance(); 
    XMLEventWriter xw = null;
    XMLInputFactory f = XMLInputFactory.newInstance();
    XMLEventReader xr = f.createXMLEventReader(new FileInputStream("test.xml"));
    while (xr.hasNext()) {
        XMLEvent e = xr.nextEvent();
        if (e.isStartElement()
                && ((StartElement) e).getName().getLocalPart().equals("tagINeed")) {
            xw = of.createXMLEventWriter(sw);
        } else if (e.isEndElement()
                && ((EndElement) e).getName().getLocalPart().equals("tagINeed")) {
            break;
        } else if (xw != null) {
            xw.add(e);
        }
    }
    xw.close();
    System.out.println(sw); 
```

印刷

```
 <someinternalTag1>
        <someinternalTag11>
            Some text content..
        </someinternalTag11>
    </someinternalTag1>
    <someinternalTag2>
        Something here
    </someinternalTag2> 
```

**更新：**

如果你也需要 XML 字符串，我们可以这样写：

```
 if (e.isStartElement() &&
                ((StartElement) e).getName().getLocalPart().equals("tagINeed")){
            xw = of.createXMLEventWriter(sw);
            xw.add(e);
        } else if (e.isEndElement() &&
                ((EndElement) e).getName().getLocalPart().equals("tagINeed")){
            xw.add(e);
            break;
        } else if (xw != null) {
            xw.add(e);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-06T20:11:15.497

E. Dorofeev 的解决方案很好，但是如果有同名的内部标签则失败。我添加了一个计数器。

```
String fichier="test_stax_2.txt";

String tag="tagINeed";
int count=0;

StringWriter sw = new StringWriter();
XMLOutputFactory of = XMLOutputFactory.newInstance(); 
XMLEventWriter xw = null;
XMLInputFactory f = XMLInputFactory.newInstance();
XMLEventReader xr = f.createXMLEventReader(new FileInputStream(fichier));

while (xr.hasNext())
    {
    XMLEvent e = xr.nextEvent();
    if (e.isStartElement()
            && ((StartElement) e).getName().getLocalPart().equals(tag))
        {
        if (count==0)
            xw = of.createXMLEventWriter(sw);
        else
            xw.add(e);
        count++;
        } 

    else if (e.isEndElement()
            && ((EndElement) e).getName().getLocalPart().equals(tag))
        {
        count --;
        if (count==0)
            break;
        else
            xw.add(e);
        } 
        else if (xw != null) 
        {
        xw.add(e);
        }
}
if (xw!=null)
   xw.close();

System.out.println(sw); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:07:52.007

在 XML 中，一切都是一个节点，STAX 使您能够逐个遍历这些节点。我认为可以通过将 XML 转换为字符串然后使用 Transformer 搜索所需的字符串来获得您想要的结果。

```
Transformer t=TransformerFactory.newInstance().newTransformer();
StringWriter sw=new StringWriter();         
StreamResult result=new StreamResult(sw);//holds the result of a transformation
DOMSource d=new DOMSource(XMLdoc);//your XML document
t.transform(d, result);
String xmlstring=sw.toString(); 
```

您可以使用 xmlstring 来获得所需的结果。

# android - 在android中使用XML文件进行SAX解析

> ID：14051925
> 
> 赞同：0
> 
> 时间：2012-12-27T08:57:09.397
> 
> 标签：android, android-layout, android-intent

```
<root>
        <subelement>
             <item></item>
              <valid></valid>
        </subelement>
        <subelement>
              <item></item>
             <valid></valid>
        </subelement>
        <valid></valid>
  </root> 
```

在上面的响应中，我需要解析并将子元素值获取到 arraylist 并获取根元素“有效”标记值字符串 ....我如何解析它。我已经做了示例，但是这种格式有点让我困惑.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:02:01.907

您可以使用 defaulthandler 来完成这项工作并为它编写相同的代码

```
boolean subelement,item,valid;rootvalid;
@Override
    public void startElement(String namespaceURI, String localName, String qName, Attributes atts) throws SAXException {

if(localName.equal("subelement"))
subelement=true;
if(localName.equal("item"))
item=true;
if(subelement && localName.equal("valid"))
valid=true;
else if(localName.equal("valid"))
rootvalid=true;
}
 public void endElement(String namespaceURI, String localName, String qName) throws SAXException 
    {
if(localName.equal("subelement"))
subelement=false;
if(localName.equal("item"))
item=false;
if(subelement && localName.equal("valid"))
valid=false;
else if(localName.equal("valid"))
rootvalid=false;
}
public void characters(char ch[], int start, int length)
    {
if(item)
//add item to arraylist
if(valid)
//add valid to arraylist
if(validroot)
//save valid of root} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:03:25.727

阅读[本](http://developer.android.com/reference/javax/xml/parsers/SAXParser.html)文档并遵循本[教程](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)。它肯定会有所帮助。

# javascript - 如何在表格中添加列

> ID：14051930
> 
> 赞同：0
> 
> 时间：2012-12-27T08:57:38.833
> 
> 标签：javascript, knockout.js

这是示例代码 knockout.js：

```
<h2>Your seat reservations</h2>

<table>
    <thead><tr>
        <th>Passenger name</th><th>Meal</th><th>Surcharge</th><th></th>
    </tr></thead>
    <tbody data-bind="foreach: seats">
    <tr>
        <td data-bind="text: name"></td>
        <td data-bind="text: meal().mealName"></td>
        <td data-bind="text: meal().price"></td>
    </tr>    
</tbody>
    <tbody><button data-bind="click: addSeat">Reserve another seat</button></tbody>
</table> 
```

js：

```
// Class to represent a row in the seat reservations grid
function SeatReservation(name, initialMeal) {
    var self = this;
    self.name = name;
    self.meal = ko.observable(initialMeal);
}

// Overall viewmodel for this screen, along with initial state
function ReservationsViewModel() {
    var self = this;

    // Non-editable catalog data - would come from the server
    self.availableMeals = [
        { mealName: "Standard (sandwich)", price: 0 },
        { mealName: "Premium (lobster)", price: 34.95 },
        { mealName: "Ultimate (whole zebra)", price: 290 }
    ];    

    // Editable data
    self.seats = ko.observableArray([
        new SeatReservation("Steve", self.availableMeals[0]),
        new SeatReservation("Bert", self.availableMeals[1])
    ]);

    self.addSeat = function() {
        self.seats.push(new SeatReservation("12321", self.availableMeals[0]));
    }
}

ko.applyBindings(new ReservationsViewModel()); 
```

此代码适用于添加列。但我需要列，有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:12:39.857

在 ReservationViewModel 中添加以下行并将您的标题替换为下面的 html 部分

```
self.Columns = ko.observableArray([{ ColumnName: "Header1" }, { ColumnName: "Header2"}]);

 <tr data-bind="foreach: Columns">
            <th data-bind="text: ColumnName>
                Passenger name
            </th>
        </tr> 
```

希望对你有帮助

# javascript - javascript event.target 在 Mozilla 中不起作用

> ID：14051936
> 
> 赞同：4
> 
> 时间：2012-12-27T08:58:14.120
> 
> 标签：javascript, jquery, asp.net

```
<script type ='javascript'>
    function fun(userID) {
        var btn = event.target; // error 'event' undefine in mozilla 
        alert(btn.id);
    }
</script> 
```

* * *

```
<asp:linkButton id ="target" style =" cursor:pointer" onclick ="fun('1')" >click here </asp:LinkButton> 
```

我是 JavaScript 新手，我已经编写了上面的代码，这段代码在 Google chrome 中运行良好，但在 Mozilla Firefox 中无法运行。谁能建议如何找到控制触发事件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T09:03:00.073

将事件传递给函数：

```
<asp:linkButton id ="target" style =" cursor:pointer" onclick ="fun(event, '1')" >click here </asp:LinkButton>

function fun(event, userID)
{
    event= event|| window.event;
    var btn = event.target; 
    alert(btn.id);
} 
```

或者

确保您的事件不是未定义的

```
function fun(userID)
{
    var e = event || window.event;
    var btn = e.target; 
    alert(btn.id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:04:58.710

如果您使用关键字传递按钮，`this` 则不需要事件

```
...onclick="fun(this,1)"

function fun(but, userID) { 
  var butID=but.id

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:06:06.400

`event`在 firefox 中未定义，因为 firefox 没有此属性，而是您可以将事件作为参数提供给事件处理函数。

但是您的代码可以在 Chrome 和 IE 中运行

此外，我还会有脚本类型`<script type ='text/javascript'>`，而不仅仅是`<script type ='javascript'>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:15:28.977

要访问`event`单击处理程序中的 ，请将其附加到 jQuery 而不是 HTML 中。

HTML：

```
<a id ="target" style ="cursor:pointer" data-value="1">click here</a> 
```

Javascript：

```
$(function() {
    $("#target").on('click', function(event) {
        event.preventDefault();
        var btn = this;
        var value = $(this).data('value');
        alert(btn.id + ', ' + value);
    });
}); 
```

许多人（包括我自己）认为这是附加事件处理程序的“正确”方式。有几个优点，访问事件对象只是其中之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-02T21:33:29.330

使用 arguments[0].target 而不是 event.target。大多数浏览器都支持 event 全局变量，但 firefox 不支持。arguments[0] 包含所有相同的属性和函数，但所有浏览器都支持。

附带说明：参数数组中的索引可以由您自己的代码更改。在我当前的项目中，arguments[0] 出于某种原因包含我所有的控制器功能，而全局事件方法和属性包含在 arguments[1] 中。不完全确定这是为什么，但您可能需要对参数数组进行一些调试，以查看它包含哪些值并进行相应调整。然而，arguments[0] 通常应该起作用。

# java - 如何通过java读取pg_xlog目录下的WAL文件

> ID：14051939
> 
> 赞同：7
> 
> 时间：2012-12-27T08:58:15.613
> 
> 标签：java, postgresql, postgresql-9.1

我正在尝试读取 postgresql 的 WAL 文件，任何人都可以告诉我如何做到这一点 n WAL 二进制文件中使用了哪种类型的二进制编码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-11-23T07:17:46.730

用于读取WAL`pg_xlogdump`文件（此 contrib 程序添加到 PG 9.3 版本 - [PG 9.3 发布的文档](https://www.postgresql.org/docs/9.3/static/release-9-3.html)）

> 此实用程序只能由安装服务器的用户运行，因为它需要对数据目录的只读访问权限。

```
pg_xlogdump --help
pg_xlogdump decodes and displays PostgreSQL transaction logs for debugging.

Usage:
  pg_xlogdump [OPTION]... [STARTSEG [ENDSEG]]

Options:
  -b, --bkp-details      output detailed information about backup blocks
  -e, --end=RECPTR       stop reading at log position RECPTR
  -f, --follow           keep retrying after reaching end of WAL
  -n, --limit=N          number of records to display
  -p, --path=PATH        directory in which to find log segment files
                         (default: ./pg_xlog)
  -r, --rmgr=RMGR        only show records generated by resource manager RMGR
                         use --rmgr=list to list valid resource manager names
  -s, --start=RECPTR     start reading at log position RECPTR
  -t, --timeline=TLI     timeline from which to read log records
                         (default: 1 or the value used in STARTSEG)
  -V, --version          output version information, then exit
  -x, --xid=XID          only show records with TransactionId XID
  -z, --stats[=record]   show statistics instead of records
                         (optionally, show per-record statistics)
  -?, --help             show this help, then exit 
```

例如：`pg_xlogdump 000000010000005A00000096`

[PostgreSQL 文档](https://www.postgresql.org/docs/9.6/static/pgxlogdump.html)或[此博客](http://blog.endpoint.com/2016/07/wal-based-estimates-for-when-record-was.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T09:34:08.983

你真的不能那样做。从 WAL 存档中读取字节很容易，但听起来你想*理解*它们。你会为此挣扎。

WAL 档案是一个二进制日志，显示数据库中哪些块发生了变化。它们不是 SQL 级别或行级别的更改日志，因此您不能只检查它们以获取更改行的列表。

您可能希望改为调查基于触发器的复制或审计触发器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-17T12:42:18.903

正如其他答案所暗示的那样，格式复杂且低级。

但是，如果您有时间学习和理解存储的数据，并且知道如何从源代码构建二进制文件，则有一个已发布的阅读器`8.3`版本`9.2`：[xlogdump](https://github.com/snaga/xlogdump)

构建它的常用方法是作为一个*contrib*（Postgres 附加组件）：

*   首先获取您希望查看 WAL 数据的 Postgres 版本的源代码。
    *   `./configure`还有`make`这个，但不需要安装
*   然后将 xlogdump 文件夹复制到*contrib*文件夹（该文件夹中的 git clone 工作正常）
*   运行`make`xlogdump - 它应该找到父 postgres 结构并构建二进制文件

您可以将二进制文件复制到您的路径，或在原位使用它。请注意，在您了解您所看到的内容之前，仍然需要大量 Postgres 的内部知识。如果您有可用的数据库，*则*可以尝试从日志中反转 SQL 语句。

要在 Java 中执行此操作，您可以包装可执行文件、将 C 库链接为混合库，或者找出如何从源代码进行所需的解析。这些选项中的任何一个都可能涉及大量详细的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:00:49.407

WAL 文件与实际数据库文件本身的格式相同，并且取决于您使用的 PostgreSQL 的确切版本。您可能需要检查特定版本的源代码以确定确切的格式。

# sql - 存储多种数据类型

> ID：14051944
> 
> 赞同：2
> 
> 时间：2012-12-27T08:58:29.270
> 
> 标签：sql, database, postgresql, database-design

我想为用户存储用户元数据设置。但元数据值是多种数据类型，可以是整数、字符串、日期或布尔值。

所以我提出了自己的解决方案

```
user(user_id(PK), ...)

meta(
   meta_id (PK)
 , user_id (FK)
 , data_type
 , meta_name
 , ...)

meta_user(
   user_id(FK)
 , meta_id(FK)
 , number_value
 , decimal_value
 , string_value
 , date_value
 , time_value
 , boolean_value) 
```

但我不确定这是存储多种数据类型的正确方法。我希望这里有人可以帮助我分享他们的解决方案。

更新：
用户可能有很多元数据，用户必须先注册他们的元数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:24:20.297

我对此的贡献是：

1.  当您应该为元数据实现名称时，请添加一个`metadefinition`表：

    ```
    meta_definition (metadefinition_ID(PK), name (varchar), datatype) 
    ```

2.  然后修改你的`meta_user`表

    ```
    meta_user (meta_ID (PK), user_ID(FK), metadefinition_ID(FK)) 
    ```

3.  您有 3 个选择（A、B、C）甚至更多...

变体 A：保持您将所有可能数据类型的值存储在一行中的设计，从而生成一个稀疏表。

这是最容易实现的，但就“干净设计”（我的观点）而言是最丑陋的。

变体 B：每种数据类型使用不同的值表：`meta_user`您可以使用 6 个表`meta_number`, `meta_decimal`, . 而不是一个稀疏表`meta_string`。每个表都具有以下形式：

```
meta_XXXX (metadata_ID(PK), meta_ID(FK), value) 
```

恕我直言，这是最干净的设计（但使用起来有点复杂）。

变体 C：reduce`meta_user`以保存三列（我将其重命名为`meta_values`，因为它保存值而不是用户）。

```
meta_values (metavalue_ID(PK), meta_ID(FK), value (varchar)) 
```

将所有值格式化为 string/varchar 并将它们填充到`value`列中。如果您要在 SQL 中使用这些值，那么这不是一个很好的设计，也是一个坏主意，因为您必须进行昂贵且复杂的转换才能使用“真实”值。

这是恕我直言最紧凑的设计。

要列出特定用户的所有元数据，您可以使用

```
select u.name, 
       md.name as 'AttributeName',
       md.DataType
  from user u 
       join meta_user mu on u.user_ID = mu.userID
       join meta_definition md on md.metadefinition_ID = mu. metadefinition_ID 
```

为给定用户选择值将是 Variant A: select u.name, md.name as 'AttributeName', mv.* -- show all different data types from user u join meta_user mu on u.user_ID = mu.userID join md.metadefinition_ID = mu. 上的 meta_definition md。metadefinition_ID join meta_value mv on mv.meta_ID = mu.metaID

缺点：当有新的数据类型可用时，您必须添加一列，重新编译查询并更改您的软件。

```
select u.name, 
       md.name as 'AttributeName',
       mnum.value as NumericValue,
       mdec.value as DecimalValue
...
  from user u 
       join meta_user mu on u.user_ID = mu.userID
       join meta_definition md on md.metadefinition_ID = mu. metadefinition_ID
       left join meta_numeric mnum on mnum.meta_ID = mu.metaID
       left join meta_decimal mdec on mdec.meta_ID = mu.metaID
... 
```

缺点：如果要存储许多用户和属性，速度会很慢。引入新数据类型时需要新表。

变体 C：

```
select u.name, 
       md.name as 'AttributeName',
       md.DataType -- client needs this to convert to original datatype
       mv.value    -- appears formatted as string
  from user u 
       join meta_user mu on u.user_ID = mu.userID
       join meta_definition md on md.metadefinition_ID = mu. metadefinition_ID
       join meta_value mv on mv.meta_ID = mu.metaID 
```

优点：在引入新数据类型的情况下不必更改查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:55:31.963

PostgreSQL 中的每种数据类型都可以转换为`text`，因此这是数据或变量类型的自然共同点。

我建议你看看附加模块[**hstore**](http://www.postgresql.org/docs/current/interactive/hstore.html)。我引用手册：

> 该模块实现了 hstore 数据类型，用于在单个 PostgreSQL 值中存储键/值对集。这在各种场景中都很有用，例如具有许多很少检查的属性的行或半结构化数据。键和值只是文本字符串。

这是一个快速、成熟、通用的解决方案，并且易于扩展以获得更多属性。

此外，您可以有一个表，您可以在其中为每个属性注册元数据（如数据类型等）。*您可以使用此元数据来检查属性是否可以在触发器*中转换为其附加类型（并通过存储在元表中的其他测试）`INSERT OR UPDATE`以保持完整性。

请注意，RDBMS 的许多标准功能不容易用于这种存储机制。基本上，您会遇到使用**EAV**模型（“实体属性值”）时遇到的大多数问题。[您可以在 dba.SE 上的相关问题](https://dba.stackexchange.com/questions/20759/is-there-a-name-for-this-database-structure)下找到非常好的建议

# c# - 如何在asp图表控件中将错误消息显示到图表中

> ID：14051948
> 
> 赞同：1
> 
> 时间：2012-12-27T08:58:52.167
> 
> 标签：c#, asp.net, aspchart

我有一个图表，当 rows.count == 0 时，我必须将消息显示为“无数据存在”，否则条形图通常。

我可以知道如何显示该消息。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T06:40:07.480

试试这个 ：

```
protected void ChartExample_DataBound(object sender, EventArgs e)
{
    // If there is no data in the series, show a text annotation
    if(ChartExample.Series[0].Points.Count == 0)
    {
        System.Web.UI.DataVisualization.Charting.TextAnnotation annotation = 
            new System.Web.UI.DataVisualization.Charting.TextAnnotation();
        annotation.Text = "No data for this period";
        annotation.X = 5;
        annotation.Y = 5;
        annotation.Font = new System.Drawing.Font("Arial", 12);
        annotation.ForeColor = System.Drawing.Color.Red;
        ChartExample.Annotations.Add(annotation);
    }
} 
```

谢谢

# android - 社交网站的登录是通过自己的应用程序进行的

> ID：14051955
> 
> 赞同：0
> 
> 时间：2012-12-27T08:59:35.043
> 
> 标签：android

我有一个活动，其中打开一个对话框，显示社交网络图标列表。单击该图标，它将在同一个应用程序而不是浏览器中打开该站点，但是当我们在输入用户名和密码后点击登录时出现问题，它显示以下异常：

```
12-27 14:16:14.062: E/AndroidRuntime(4052): FATAL EXCEPTION: main
12-27 14:16:14.062: E/AndroidRuntime(4052): android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@41c59680 is not valid; is your activity running?
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.view.ViewRootImpl.setView(ViewRootImpl.java:513)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:301)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.view.Window$LocalWindowManager.addView(Window.java:537)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.app.Dialog.show(Dialog.java:278)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.webkit.WebView.onSavePassword(WebView.java:1402)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:442)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.os.Looper.loop(Looper.java:137)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at java.lang.reflect.Method.invokeNative(Native Method)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at java.lang.reflect.Method.invoke(Method.java:511)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-27 14:16:14.062: E/AndroidRuntime(4052):     at dalvik.system.NativeStart.main(Native Method)
12-27 14:16:14.605: I/dalvikvm(4052): threadid=3: reacting to signal 3
12-27 14:16:14.613: I/dalvikvm(4052): Wrote stack traces to '/data/anr/traces.txt'
12-27 14:16:16.273: I/Process(4052): Sending signal. PID: 4052 SIG: 9 
```

这是我的代码：

```
public class ShareActivity extends Activity implements OnItemClickListener {
    //public static ShareActivity context;
    WebView wv;
    boolean land_scape=false;
    ProgressDialog pdlg;
    String links[]= new String[]{"Facebook","Twitter","Google Plus","Pintrest"};
    ListView lv1;
    Dialog dialog ;
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        int currentOrientation = getResources().getConfiguration().orientation;
        if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
           setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
           land_scape=true;

        }
        else {
           setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
           land_scape=false;
        }
      setContentView(R.layout.share_layout);    
      //context=this;

      wv=(WebView)findViewById(R.id.webView1);
      wv.getSettings().setJavaScriptEnabled(true);
      dialog = new Dialog(ShareActivity.this.getParent());
      dialog.setTitle("Please select");

      dialog.setCanceledOnTouchOutside(false);
      dialog.setContentView(R.layout.share_list);
      lv1=(ListView)dialog.findViewById(R.id.listShare);
      lv1.setAdapter(new CustomShareAdapter(this,links));
      lv1.setOnItemClickListener(this);
      dialog.show();

    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

        switch(arg2)
        {
        case 0:  
            wv.loadUrl("http://www.facebook.com");
            break;
        case 1: 
            wv.loadUrl("https://mobile.twitter.com/login");
            break;

        case 2: 
            wv.loadUrl("http://www.plus.google.com");       
            break;
        case 3: 
            wv.loadUrl("http://www.pinterest.com");         
            break;
        }
        wv.setWebViewClient(new WebViewClient());
        dialog.dismiss();
    }

    @Override
     public void onResume()
     {

            //Determine screen size
            if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE) {     
                //Toast.makeText(this, "Large screen set to landscape",Toast.LENGTH_LONG).show();
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
                land_scape=true;

            }
            else if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_NORMAL) {     
                //Toast.makeText(this, "Normal sized screen set to portrait" , Toast.LENGTH_LONG).show();
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
                land_scape=false;

            } 
            else if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_SMALL) {     
               // Toast.makeText(this, "Small sized screen set to portrait " , Toast.LENGTH_LONG).show();
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
                land_scape=false;
            }
            else {
                //Toast.makeText(this, "Screen size is neither large, normal or small" , Toast.LENGTH_LONG).show();
                land_scape=false;
            }
            super.onResume();
     }
    @Override
    public void onBackPressed() {
        Intent backIntent = new Intent(this, MainActivity.class);
        startActivity(backIntent);
        super.onBackPressed();
    }

} 
```

第二个问题：它还显示我没有设置的空屏幕。我在这方面进行了很多搜索。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:36:34.847

使用以下代码创建对话框：

```
dialog = new Dialog(this); 
```

我认为 getParent() 返回的东西对你不可用，因为你需要的只是你当前的活动。

# rest - 使用backbone.js 开发，如何检测多个用户（浏览器）何时尝试更新？

> ID：14051958
> 
> 赞同：2
> 
> 时间：2012-12-27T08:59:39.517
> 
> 标签：rest, backbone.js

我对backbone.js（以及带有javascript的MVC）非常陌生，并且在阅读有关backbone.js的一些资源以在我的项目中采用它时，我现在有一个问题：如何检测多个用户（浏览器）何时尝试更新? （并阻止它？）

我的项目是一个为想要创建和分发自己的调查的用户编辑调查/民意调查的工具。到目前为止，我的 Web 应用程序维护了一个由浏览器触发的编辑命令列表，将其发送到服务器，然后服务器进行批量更新。

我所做的是，每个调查都维护一个版本号，浏览器必须使用该版本号请求更新，如果请求的版本号与服务器中的版本号不匹配，则请求失败，用户必须重新加载他的页面（你知道，实现并发编辑对每个人来说都不容易）。当然，当浏览器更新成功时，它会从服务器获取新的版本号作为ajax响应，并且只有当它过去的更新请求完成时，一个浏览器才能向服务器请求更新。

现在，我对 RESTful API 和 MV* 模式很感兴趣，但很难解决这个问题。什么是最好的/常见的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:16:08.883

有一个常见的技巧，而不是使用版本，在您的数据库中使用 TIMESTAMPS，然后尝试 UPDATE WHERE timestamp = model.timestamp。如果它返回零结果计数 - 使用适当的 HTTP 409（冲突）响应并要求用户在 save() 错误回调中更新页面。您甚至可以使用本地存储来合并更改，并并排比较非等效项。

# java - 尝试将变量放入 Java 中的对象时出现 NullPointExeption

> ID：14051960
> 
> 赞同：0
> 
> 时间：2012-12-27T09:00:02.397
> 
> 标签：java, nullpointerexception

我创建了包含特征几何和属性的对象：

```
public class Feature {
Feature(String wkt) {
this.wkt = wkt;
}

private HashMap<Column, String> columnMap;
private String wkt;

public String getWKT() {
return wkt;
}
public void addAttribute(Column column, String value) {
columnMap.put(column, value);
}
public String getAttribute(String column) {
return columnMap.get(column) ;
}
public Map<Column, String> getAttributes(){
    return columnMap;

}
} 
```

Wkt 是一个几何图形。ColumnMap 是对象，包含一个属性为 HashMap：

```
public class Column {

private String columnName;

Column(String columnName) {
  this.columnName = columnName;
}

public String getName() {
  return columnName;
}
} 
```

现在我说：

```
columnList = new ArrayList<Column>(columns);

......

Feature feature= new Feature(WKT);
for(int p=0;p<columnList.size();p++){
for(int k=0;k<=ViewObject.getMIDInfo(totalObjects).length;k++){
   if(p==k){
       System.out.println("Column  "+columnList.get(p).getName()+"  Value  "+ ViewObject.getMIDInfo(totalObjects)[k].toString());
      //feature.addAttribute(columnList.get(p), ViewObject.getMIDInfo(totalObjects)[k].toString());
   }
}
} 
```

并获得输出：

```
Column  id  Value  22
Column  kadnumm  Value  "66-41-0707001-19" 
```

所以我怎么理解`columnList`和`ViewObject.getMIDInfo(totalObjects)`不空。在此之后我改变：

```
//feature.addAttribute(columnList.get(p), ViewObject.getMIDInfo(totalObjects)[k].toString()); 
```

至：

```
feature.addAttribute(columnList.get(p), ViewObject.getMIDInfo(totalObjects)[k].toString()); 
```

并获得例外：

```
Column  id  Value  22
java.lang.NullPointerException
at objects.Feature.addAttribute(Feature.java:18)
at objects.MIFParser.findRegion(MIFParser.java:181)
at objects.MIFParser.instanceNextObject(MIFParser.java:66)
at Read.main(Read.java:40) 
```

我如何理解 NullPointerException 意味着我尝试使用空对象？怎么了？
Ps 对不起，我的英语可能很糟糕，尤其是标题。

**更新**

好吧，我添加了这个：`this.columnMap = new HashMap<Column, String>();`在 FEature 类构造函数中。

但现在我尝试做：

```
System.out.println(feature.getAttribute("id")+" "+feature.getAttribute("kadnumm")); 
```

和输出：

```
null null 
```

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:02:27.513

您没有初始化您的 columnMap：

```
private HashMap<Column, String> columnMap = new HashMap<Column, String>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:03:59.427

创建 Feature 的新实例时，不会初始化 columnMap 对象。所以当你打电话时它是空`columnMap.put(column, value);`的`addAttribute`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T09:04:04.090

代替

```
private HashMap<Column, String> columnMap; 
```

做

```
 private HashMap<Column, String> columnMap = new HashMap<Column, String>(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T09:01:50.377

`addAttribute`试图穿上一些东西`columnMap`，但你没有`columnMap`在任何地方创造。您需要添加到您的`Feature`构造函数：

```
Feature(String wkt) {
    this.wkt = wkt;
    this.columnMap = new HashMap<Column, String>(); // <=== The new bit
} 
```

...或在您的声明中添加初始化：

```
private HashMap<Column, String> columnMap = new HashMap<Column, String>();
//                        The new bit--- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

仅仅声明成员是不够的，成员只是引用一个对象，然后开始`null`。您需要为其创建对象以引用该对象并将其分配给它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T09:04:37.307

您必须初始化地图：

```
private HashMap<Column, String> columnMap = new HashMap<Column, String>(); 
```

# android - 将 EditText 密码掩码字符更改为星号 (*)

> ID：14051962
> 
> 赞同：48
> 
> 时间：2012-12-27T09:00:04.113
> 
> 标签：android, android-edittext

有什么方法可以将密码文本从 dot(.) 更改为 asterisk(*) 。

密码正在编辑文本中输入。

```
<EditText
        android:id="@+id/passWord1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:inputType="number"
        android:password="true"/> 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-27T09:36:24.293

在您的xml文件中插入edittext，

```
<EditText
    android:id="@+id/passWordEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:inputType="textPassword"/> 
```

然后你的类文件继续从edittext获取findViewById并为此实现，

```
EditText edittext = (EditText)findViewById(R.id.passWordEditText);
edittext.setTransformationMethod(new AsteriskPasswordTransformationMethod()); 
```

并且这个类为此实现，

```
public class AsteriskPasswordTransformationMethod extends PasswordTransformationMethod {
    @Override
    public CharSequence getTransformation(CharSequence source, View view) {
        return new PasswordCharSequence(source);
    }

    private class PasswordCharSequence implements CharSequence {
        private CharSequence mSource;
        public PasswordCharSequence(CharSequence source) {
            mSource = source; // Store char sequence
        }
        public char charAt(int index) {
            return '*'; // This is the important part
        }
        public int length() {
            return mSource.length(); // Return default
        }
        public CharSequence subSequence(int start, int end) {
            return mSource.subSequence(start, end); // Return default
        }
    }
}; 
```

**如果您的代码是 Kotlin，那么您必须制作单独的 java 文件，然后您必须将 java 与 kotlin 代码一起使用。**

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-27T09:04:21.460

```
<EditText
        android:id="@+id/passWord1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:inputType="textPassword"//here is the change. check it once in your xml
        android:password="true"/> 
```

在 Eclipse 中，当您将光标移动到时单击`Ctrl`+会有提示。然后你可以看到选项列表。在那里你可以选择`Space``android:inputType``textPassword`

如果你想`*`代替`.`然后检查这个[`Android: Asterisk Password Field`](https://stackoverflow.com/questions/14051962/change-edittext-password-mask-character-to-asterisk)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-17T05:55:00.743

在 Ram kiran 发布的链接的帮助下得到答案

```
text.setTransformationMethod(new AsteriskPasswordTransformationMethod());

public class AsteriskPasswordTransformationMethod extends PasswordTransformationMethod {
@Override
public CharSequence getTransformation(CharSequence source, View view) {
    return new PasswordCharSequence(source);
}

private class PasswordCharSequence implements CharSequence {
    private CharSequence mSource;
    public PasswordCharSequence(CharSequence source) {
        mSource = source; // Store char sequence
    }
    public char charAt(int index) {
        return '*'; // This is the important part
    }
    public int length() {
        return mSource.length(); // Return default
    }
    public CharSequence subSequence(int start, int end) {
        return mSource.subSequence(start, end); // Return default
    }
}
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-28T06:22:03.617

```
EditText.setTransformationMethod(new PasswordTransformationMethod()); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-09-29T14:48:49.547

**以 Kotlin 的方式：**

类星号密码转换方法：密码转换方法（）{

```
override fun getTransformation(source: CharSequence?, view: View?): CharSequence {
    return super.getTransformation(source, view)
}

 abstract inner class PasswordCharSequence(val source: CharSequence) : CharSequence {
     override val length: Int
         get() = source.length

     override fun get(index: Int): Char =
         '*'

    override fun subSequence(start: Int, end: Int): CharSequence {
        return source.subSequence(start, end) // Return default
    }
} 
```

}`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-03-19T10:42:22.110

科特林

```
class AsteriskPasswordTransformationMethod : PasswordTransformationMethod() {

    override fun getTransformation(source: CharSequence, view: View): CharSequence {
        return PasswordCharSequence(source)
    }

    inner class PasswordCharSequence (private val source: CharSequence) : CharSequence {

        override val length: Int
            get() = source.length

        override fun get(index: Int): Char = '*'

        override fun subSequence(startIndex: Int, endIndex: Int): CharSequence {
            return source.subSequence(startIndex, endIndex)
        }

    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T09:03:17.850

对于 android:inputType，有一种密码类型。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-27T09:28:20.023

试试这个

```
android:inputType="textPassword" 
```

# python - TypeError：由名称“id”和位置（2）给出的参数——wxPython

> ID：14051967
> 
> 赞同：6
> 
> 时间：2012-12-27T09:00:46.277
> 
> 标签：python, python-2.7, wxpython

我正在尝试使用[Notebook](http://wiki.wxpython.org/Notebooks)类在 wxPython 中创建选项卡。使用上面链接的教程，我想出了以下代码：

```
#!/usr/bin/env python

import wx

class DeployTab(wx.Panel):
    def __init__(self, parent, *args, **kwargs):
        super(DeployTab, self).__init__(self, *args, parent=parent, id=wx.ID_ANY, **kwargs)

        self.sizer = wx.Panel(self)
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        deploy = wx.Button(
            self.main_panel, 
            label="test 1",
            size=(250, 100))
        self.sizer.Add(deploy, flag=wx.EXPAND|wx.ALL, border=5)

        self.SetSizer(self.sizer)

class ConfigTab(wx.Panel):
    # For now, copy.
    def __init__(self, parent, *args, **kwargs):
        super(ConfigTab, self).__init__(self, *args, parent=parent, id=wx.ID_ANY, **kwargs)

        self.sizer = wx.Panel(self)
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        deploy = wx.Button(
            self.main_panel, 
            label="test2",
            size=(250, 100))
        self.sizer.Add(deploy, flag=wx.EXPAND|wx.ALL, border=5)

        self.SetSizer(self.sizer)

class NotebookTabs(wx.Notebook):
    def __init__(self, parent):
        super(NotebookTabs, self).__init__(self, parent, id=wx.ID_ANY, style=wx.BK_DEFAULT)

        self.deploy_tab = DeployTab(self)
        self.deploy_tab.SetBackgroundColor("Gray")
        self.AddPage(self.main_tab, "Go!")

        self.options_tab = ConfigTab(self)
        self.AddPage(self.options_tab, "Options")

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(MainWindow, self).__init__(*args, **kwargs)

        self.SetSize((300, 250))
        self.SetTitle('Testing')
        self.Centre()
        self.Show(True)

        self.setup_sizers()

    def setup_sizers(self):
        self.panel = wx.Panel(self)
        self.notebook = NotebookTabs(self.panel)
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.notebook, 1, wx.ALL|wx.EXPAND, 5)
        self.panel.SetSizer(self.sizer)
        self.Layout()

    def on_quit(self, event):
        self.Close()

def main():
    app = wx.App()
    MainWindow(None)
    app.MainLoop()

if __name__ == '__main__':
    main() 
```

它给出了以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "test.pyw", line 72, in main
    MainWindow(None)
  File "test.pyw", line 55, in __init__
    self.setup_sizers()
  File "test.pyw", line 61, in setup_sizers
    self.notebook = NotebookTabs(self.panel)
  File "test.pyw", line 36, in __init__
    super(NotebookTabs, self).__init__(self, parent, id=wx.ID_ANY, style=wx.BK_DEFAULT)
  File "C:\Python27\lib\site-packages\wx-2.8-msw-unicode\wx\_controls.py", line 3147, in __init__
    _controls_.Notebook_swiginit(self,_controls_.new_Notebook(*args, **kwargs))
TypeError: Argument given by name ('id') and position (2) 
```

然后我更改`NotebookTabs`为以下内容（简化超类初始化）：

```
class NotebookTabs(wx.Notebook):
    def __init__(self, parent):
        super(NotebookTabs, self).__init__(self, parent)

        self.deploy_tab = DeployTab(self)
        self.deploy_tab.SetBackgroundColor("Gray")
        self.AddPage(self.main_tab, "Go!")

        self.options_tab = ConfigTab(self)
        self.AddPage(self.options_tab, "Options") 
```

...并收到以下错误消息：

```
File "<stdin>", line 1, in <module>
  File "test.pyw", line 72, in main
    MainWindow(None)
  File "test.pyw", line 55, in __init__
    self.setup_sizers()
  File "test.pyw", line 61, in setup_sizers
    self.notebook = NotebookTabs(self.panel)
  File "test.pyw", line 36, in __init__
    super(NotebookTabs, self).__init__(self, parent)
  File "C:\Python27\lib\site-packages\wx-2.8-msw-unicode\wx\_controls.py", line 3147, in __init__
    _controls_.Notebook_swiginit(self,_controls_.new_Notebook(*args, **kwargs))
TypeError: in method 'new_Notebook', expected argument 1 of type 'wxWindows *' 
```

我觉得我遗漏了一些明显的东西，但我似乎无法确定出了什么问题。有人可以帮我找出问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:10:15.147

您不应该传递`self`给`super(NotebookTabs, self).__init__`，请`super`注意：

```
super(NotebookTabs, self).__init__(parent)

super(DeployTab, self).__init__(*args, parent=parent, id=wx.ID_ANY, **kwargs)

super(ConfigTab, self).__init__(*args, parent=parent, id=wx.ID_ANY, **kwargs) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T09:06:56.443

当您在位置参数和关键字参数中传递相同的参数时，会出现此问题：

```
def foo(x=10, y=20):
    ...

args = [5]
kwargs = { "x":15 }
foo(*args, **kwargs) # x is passed twice 
```

我不熟悉 wxPython，所以我无法准确确定发生这种情况的位置，但我建议检查你的代码在哪里使用`*args`和/或`**kwargs`，因为问题肯定存在。

**更新：**正如@Pavel Anossov 指出的那样，问题在于重复使用`self`：

```
super(NotebookTabs, self).__init__(self, parent, id=wx.ID_ANY, style=wx.BK_DEFAULT) 
```

以这种方式调用，`self`将是第一个参数 ( `parent`)`parent`并将是第二个 ( `id`)。而且您还`id`作为关键字参数传递，因此出现错误。

# android - 有没有办法在 Windows 上编译 ffmpeg 库？

> ID：14051974
> 
> 赞同：1
> 
> 时间：2012-12-27T09:01:26.503
> 
> 标签：android, ffmpeg

嗨，我已经工作了数周来在 Windows 平台上编译 ffmpeg 库。但到目前为止我发现没有办法。有没有办法在 Windows 7 上编译 ffmpeg 库。

我在 Windows 上使用 Cygwin。每当我尝试执行 ndk-build 时，都会收到此消息。

```
Android NDK: ERROR:jni/yuv2rgb/Android.mk:ffmpeg-prebuilt: LOCAL_SRC_FILES points to a missing file
Android NDK: Check that jni/ffmpeg-build/armeabi/libffmpeg.so exists  or that its path is correct
/cygdrive/D/AndroidNDK/android-ndk-r8c/build/core/prebuilt-library.mk:43: *** Android NDK: Aborting    .  Stop. 
```

& 在寻找此错误的解决方案时，我发现我必须先编译库。使用 ./build_android.sh 进行编译。我收到此错误消息。

```
./build_android.sh
./build_android.sh: line 72: ./configure: No such file or directory 
```

请指导我该怎么做。

# google-apps-script - 共享脚本的 Google Drive 错误

> ID：14051975
> 
> 赞同：2
> 
> 时间：2012-12-27T09:01:31.553
> 
> 标签：google-apps-script, google-drive-api

我与 Public共享了一个[Google 脚本。](http://www.labnol.org/internet/google-contacts-updated/27306/)但是，用户不断收到一条[错误消息](https://twitter.com/labnol/status/284184898443546624/photo/1)，指出有太多人正在访问该文件。

我该如何解决？

![谷歌云端硬盘错误](../Images/52ce0a279f3fee43f195a901ba5da51e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:49:55.343

不幸的是，脚本编辑器的当前架构使得只有有限数量的用户可以同时访问给定的脚本。我们正在针对此限制进行一些长期修复，您可以关注[Issue 2167](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2167)的进展。同时，我们建议您使用另一种方法与大量人员共享您的脚本源。

# sockets - 套接字创建删除过程是否非常昂贵？

> ID：14051984
> 
> 赞同：8
> 
> 时间：2012-12-27T09:02:30.290
> 
> 标签：sockets, client-server

我正在开发客户端/服务器应用程序。我为此准备了很多文章，发现了一个很常见的说法，即*`"Creation/deletion of socket is very expensive process in terms of using system resources"`*. 但是没有地方解释它是如何消耗这么多资源的。
任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T09:14:33.753

创建套接字很便宜。连接它实际上会创建连接，这或多或少与创建底层连接（特别是 TCP 连接）一样昂贵。TCP 连接建立需要三次 TCP 握手步骤。保持连接活动主要消耗内存和连接。网络连接是受操作系统限制的资源（例如端口上的套接字数量）。

如果您使用线程模型，则需要额外的线程创建资源。

* * *

我可以在 Stackoverflow 上找到一个对您的回答“[网络编程：是否维护套接字？ ”有用的内容。](https://stackoverflow.com/questions/519850/network-programming-to-maintain-sockets-or-not)还有一篇有用的文章[Boost socket performance on Linux](http://www.ibm.com/developerworks/library/l-hisock/index.html)

我觉得对你有帮助。

# c# - 无法获取域用户

> ID：14051986
> 
> 赞同：0
> 
> 时间：2012-12-27T09:02:38.407
> 
> 标签：c#, asp.net, iis, single-sign-on

我有以下代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string infors = "";
        System.Security.Principal.WindowsIdentity usr = System.Security.Principal.WindowsIdentity.GetCurrent();
        infors += "Authentication Type: " + usr.AuthenticationType + "<br>";
        infors += "Name: " + usr.Name + "<br>";
        infors += "IsAnonymous: " + usr.IsAnonymous + "<br>";
        infors += "IsAuthenticated: " + usr.IsAuthenticated + "<br>";
        infors += "IsGuest: " + usr.IsGuest + "<br>";
        infors += "IsSystem: " + usr.IsSystem + "<br>";
        infors += "Token: " + usr.Token.ToString() + "<br>";

        Label1.Text = infors;
    } 
```

`Name`但是，它一直在给我错误的信息

```
身份验证类型：NTLM
名称：SECTOR_A\管理员
匿名：错误
IsAuthenticated: 真
IsGuest：错误
是系统：假
代币：564

```

我的 IIS 设置为：

```
匿名身份验证 - 已禁用
ASP.NET 模拟 - 已启用
基本身份验证 - 已启用
Windows 身份验证 - 已启用

```

我什至通过设置来更改 IE 设置，`Prompt for user name and password`如下所示

![在此处输入图像描述](../Images/478830b520442a3170c81ef397495a58.png)

**====== 但是 ======**

虽然我在打开 Web 应用程序时在弹出的登录消息中输入了域用户名和密码，但它没有给我正确的`Name`部分，应该是`SECTOR_HQ\Jack`.

所以我想问一下我的代码和配置中是否缺少任何东西。

**====== 添加了 Web.config ======**

```
<configuration>

    <system.web>
        <compilation debug="true" targetFramework="4.0" />

    </system.web>

</configuration> 
```

**====== 应用程序池信息 ======**

```
.NET 框架版本：v4.0
托管管道模式：经典
身份：ApplicationPoolIdentity

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:25:53.927

尝试在您的配置中添加身份验证部分：

```
 <system.web>
    ...
    <authentication mode="Windows"/>
    <identity impersonate="true"/>
    ...
 </system.web> 
```

在这里您可以找到更多详细信息：

[http://msdn.microsoft.com/en-us/library/ff647405.aspx](http://msdn.microsoft.com/en-us/library/ff647405.aspx)

# jquery - 如何改变滚动元素的位置？

> ID：14051987
> 
> 赞同：0
> 
> 时间：2012-12-27T09:02:40.243
> 
> 标签：jquery, css, scroll, window

我想在滚动`top` **的同时更改属性的值。**我不想使用`position: fixed`. 我用`position: absolute`.

我想`1px`在`box`每次向下滚动时添加。

每次向上滚动时，我都想`1px`删除。`box`

怎么做 ？

```
<div id="box" style="position: absolute">
   // content
</div>

$(document).bind('scroll', function(){ 
    $("#box").css("top", ..... ); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:11:09.877

你可以这样做，

```
$(window).on('scroll', function(){
  change_box_css();
});

function change_box_css(){
 //FF
 $('#box').bind('DOMMouseScroll', function(e){
 if(e.detail > 0) {
     //scroll down -> set css top
 }else {
     //scroll up   -> set css top
 }

 });

  //IE, Opera, Safari
 $('#box').bind('mousewheel', function(e){
 if(e.wheelDelta < 0) {
     //scroll down -> set css top

 }else {
     //scroll up -> set css top

 }

 });

 } 
```

现在你应该根据你的意愿设置你的 CSS 顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:08:43.960

你可以使用：

```
$(document).ready(function(){

    $("#box").on('scroll', function(){

          $(this).css('top',$(document).scrollTop());
    });
}); 
```

虽然我同意你应该使用`position: fixed`，除非你试图让一个 div 在用户滚动页面时“关注”用户，比如侧边栏或其他东西。

# iphone - UITextView 不滚动

> ID：14051992
> 
> 赞同：12
> 
> 时间：2012-12-27T09:02:58.090
> 
> 标签：iphone, objective-c, ios, uitextview

我想在`UITextView`. 我可以将段落的内容放在文本视图中，但我无法滚动`UITextView`（某些内容不可见，因为它没有滚动）。

我想做的是：

```
CGRect frame = CGRectMake(0, 0, 320, 480);
//allocate view
self.view = [[UIView alloc]initWithFrame:frame];textview = [[UITextView alloc]initWithFrame:CGRectMake(30, 200, 275, 400)];
[textview setFont:[UIFont fontWithName:@"Arial" size:12]];
[textview setScrollEnabled:YES];
[textview setUserInteractionEnabled:NO];
[textview setBackgroundColor:[UIColor clearColor]];
//[textview setText:@"Hi,I'm working fine with this space"];
[self.view addSubview:textview]; 
```

在这种情况下，启用滚动。谁能告诉我为什么它不滚动？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-27T09:16:47.460

设置`[textview setUserInteractionEnabled:TRUE];`并且我认为您不想弹出键盘然后您可以通过实现 uitextview 委托方法来隐藏键盘`-(void)textViewDidBeginEditing:(UITextView *)textView{[textView resignFirstResponder];`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-27T09:04:13.723

设置`YES`为`setUserInteractionEnabled`属性`UITextView`

设置这条线

```
[textview setUserInteractionEnabled:YES]; 
```

代替

```
[textview setUserInteractionEnabled:NO]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-23T05:38:22.533

我有一个 ViewController，它只有一个包含大约 5 页文本的文本视图。

这是我在 Swift 4.0 中所做的：

1.  非常重要：确保您在文本视图上设置了自动布局。在我的 ViewController 中，我将文本视图的约束设置为 8,8,8,8，并检查了对边距的约束。如果未设置自动布局，则整个内容不会滚动。
2.  这是我使用的代码：

**斯威夫特 4.0**

```
textForPrivacyPolicy.showsVerticalScrollIndicator = true
textForPrivacyPolicy.isEditable = false
textForPrivacyPolicy.isScrollEnabled = true
textForPrivacyPolicy.scrollRangeToVisible(NSMakeRange(0, 0))
textForPrivacyPolicy.setContentOffset(CGPoint(x: 0, y: 0), animated: false) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T09:04:59.167

设置`UserInteractionEnabled`为`YES`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-27T09:05:10.130

添加这一行：`[textview setUserInteractionEnabled:YES];`代替：

```
[textview setUserInteractionEnabled:NO]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-27T09:07:06.917

粘贴此代码

```
CGRect frame = CGRectMake(0, 0, 320, 480);
//allocate view
self.view = [[UIView alloc]initWithFrame:frame];textview = [[UITextView alloc]initWithFrame:CGRectMake(30, 200, 275, 400)];
[textview setFont:[UIFont fontWithName:@"Arial" size:12]];
[textview setScrollEnabled:YES];
[textview setUserInteractionEnabled:YES];
[textview setBackgroundColor:[UIColor clearColor]];
//[textview setText:@"Hi,I'm working fine with this space"];
[self.view addSubview:textview]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-30T10:10:26.633

我遇到了同样的问题，我将 setscrollable 和 userinteractionenabled 设置为 TRUE。原来是约束的问题。为了解决这个问题，点击你的故事板中的视图控制器（右上角的电池图标），然后转到“编辑器”->“解决自动布局问题”->“添加缺少的约束”。为我解决了这个问题！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-06T11:54:25.583

bapi rout ，有一个用于用户与 textView 交互的属性。您已将其设置为否。如果您想在 TextView 上执行滚动，您必须启用此属性。

`[textview setUserInteractionEnabled:YES];`

这将对您有所帮助。

# ruby - 检查字符串是否为 XML 格式

> ID：14051997
> 
> 赞同：7
> 
> 时间：2012-12-27T09:03:12.193
> 
> 标签：ruby, xml, string

我想知道 Ruby 中是否有一个函数`is_xml?(string)`可以识别给定的字符串是否为 XML 格式。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-27T09:53:17.550

Nokogiri`parse`使用一个简单的正则表达式测试来`<html>`尝试确定要解析的数据是 HTML 还是 XML：

```
string =~ /^s*<[^Hh>]*html/ # Probably html 
```

类似的东西，寻找 XML 声明将是一个起点：

```
string = '<?xml version="1.0"?><foo><bar></bar></foo>'
string.strip[/\A<\?xml/]
=> "<?xml" 
```

`nil`如果返回的字符串以外的任何内容都包含 XML 声明。对此进行测试很重要，因为空字符串会欺骗后续步骤。

```
Nokogiri::XML('').errors.empty?
=> true 
```

Nokogiri 也有这个`errors`方法，它会在尝试解析格式错误的文档后返回一系列错误。测试任何尺寸都会有所帮助：

```
Nokogiri::XML('<foo>').errors
=> [#<Nokogiri::XML::SyntaxError: Premature end of data in tag foo line 1>]
Nokogiri::XML('<foo>').errors.empty?
=> false

Nokogiri::XML(string).errors.empty?
=> true 
```

如果文档在语法上有效，则为 true。

* * *

我刚刚测试了 Nokogiri，看看它是否可以区分常规字符串和真正的 XML：

```
[2] (pry) main: 0> doc = Nokogiri::XML('foo').errors
[
    [0] #<Nokogiri::XML::SyntaxError: Start tag expected, '<' not found>
] 
```

因此，您可以遍历文件并将它们轻松分类为 XML 和非 XML：

```
require 'nokogiri'

[
  '',
  'foo',
  '<xml></xml>'
].group_by{ |s| (s.strip > '') && Nokogiri::XML(s).errors.empty? }
=> {false=>["", "foo"], true=>["<xml></xml>"]} 
```

将结果分配`group_by`给一个变量，您将获得一个哈希值，您可以检查非 XML ( `false`) 或 XML ( `true`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:11:46.593

Ruby 的 String 类或 Active Support 的 String 扩展中没有这样的功能，但您可以使用 Nokogiri 来[检测 XML 中的错误](http://nokogiri.org/tutorials/ensuring_well_formed_markup.html)：

```
begin
  bad_doc = Nokogiri::XML(badly_formed) { |config| config.strict }
rescue Nokogiri::XML::SyntaxError => e
  puts "caught exception: #{e}"
end 
```