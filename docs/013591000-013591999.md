# StackOverflow 问答 13591000-13591999

# php - PHP SOAP-ERROR：编码：对象没有

> ID：13591004
> 
> 赞同：1
> 
> 时间：2012-11-27T18:48:58.103
> 
> 标签：php, soap, wsdl, nusoap

我对一个 php soap 错误感到非常沮丧，这让我已经忙了一个星期。我真的希望你能帮助我，我会很高兴的！

我已经从 nusoap 切换到 php soap，但现在我收到一条奇怪的错误消息：

> SOAP-ERROR: Encoding: object has not 'name' property in ...</p>

我的 wsdl 中有大约 50 个参数，实际上我不想将每个参数都发送为空值。是否有可能在soapClient上设置一个选项来自动填充空参数？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:05:35.787

将 minOccurs="0" 添加到元素

# r - 使用 recast() 从长到宽重塑复杂数据集

> ID：13591010
> 
> 赞同：6
> 
> 时间：2012-11-27T18:49:06.220
> 
> 标签：r, dataset, reshape2

我正在使用 lme4 附带的数据集，并且正在尝试学习如何应用 reshape2 将其从长转换为宽 [帖子末尾的完整代码]。

```
library(lme4)
data("VerbAgg")  # load the dataset 
```

数据集有 9 个变量；“Anger”、“Gender”和“id”不随“item”而变化，而“resp”、“btype”、“situ”、“mode”和“r2”则不同。

我已经成功地使用 reshape() 将数据集从长格式转换为宽格式：

```
wide <- reshape(VerbAgg, timevar=c("item"), 
             idvar=c("id", 'Gender', 'Anger'), dir="wide") 
```

这产生了对 123 个变量的 316 个观测值，并且似乎已正确转换。但是，我没有成功使用 reshape/reshape2 来重现宽数据框。

```
wide2 <- recast(VerbAgg, id + Gender + Anger ~ item + variable)
Using Gender, item, resp, id, btype, situ, mode, r2 as id variables
Error: Casting formula contains variables not found in molten data: Anger 
```

我可能不是 100% 清楚 recast 如何定义 id 变量，但我很困惑为什么它没有看到“愤怒”。相似地，

```
wide3 <- recast(VerbAgg, id + Gender + Anger ~ item + variable, 
               id.var = c("id", "Gender", "Anger"))
Error: Casting formula contains variables not found in molten data: item 
```

谁能看到我做错了什么？我很想更好地了解熔化/铸造！

**完整代码：**

```
## load the lme4 package 
library(lme4) 
data("VerbAgg")
head(VerbAgg)
names(VerbAgg) 

# Using base reshape()
wide <- reshape(VerbAgg, timevar=c("item"), 
                 idvar=c("id", 'Gender', 'Anger'), dir="wide")

# Using recast
library(reshape2)
wide2 <- recast(VerbAgg, id + Gender + Anger ~ item + variable)
wide3 <- recast(VerbAgg, id + Gender + Anger ~ item + variable, 
                id.var = c("id", "Gender", "Anger"))

# Using melt/cast
m <- melt(VerbAgg, id=c("id", "Gender", "Anger"))
wide <- o cast(m,id+Gender+Anger~...)
Aggregation requires fun.aggregate: length used as default
# Yields a list object with a length of 8? 

m <- melt(VerbAgg, id=c("id", "Gender", "Anger"), measure.vars = c(4,6,7,8,9))
wide <- dcast(m, id ~ variable)
# Yields a data frame object with 6 variables. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:56:16.233

我认为以下代码可以满足您的要求。

```
library(lme4) 
data("VerbAgg")

# Using base reshape()
wide <- reshape(VerbAgg, timevar=c("item"), 
                 idvar=c("id", 'Gender', 'Anger'), dir="wide")
dim(wide) # 316 123

# Using melt/cast
require(reshape2)
m1 <- melt(VerbAgg, id=c("id", "Gender", "Anger","item"), measure=c('resp','btype','situ','mode','r2'))
wide4 <- dcast(m1,id+Gender+Anger~item+variable)
dim(wide4) # 316 123

R> wide[1:5,1:6]
  Anger Gender id resp.S1WantCurse btype.S1WantCurse situ.S1WantCurse
1    20      M  1               no             curse            other
2    11      M  2               no             curse            other
3    17      F  3          perhaps             curse            other
4    21      F  4          perhaps             curse            other
5    17      F  5          perhaps             curse            other

R> wide4[1:5,1:6]
  id Gender Anger S1WantCurse_resp S1WantCurse_btype S1WantCurse_situ
1  1      M    20               no             curse            other
2  2      M    11               no             curse            other
3  3      F    17          perhaps             curse            other
4  4      F    21          perhaps             curse            other
5  5      F    17          perhaps             curse            other 
```

# android - 在 Fragment 中实现 onKeyPreIme(int keyCode, KeyEvent event)

> ID：13591012
> 
> 赞同：20
> 
> 时间：2012-11-27T18:49:25.250
> 
> 标签：android, fragment, android-softkeyboard

我不知道如何`onKeyPreIme(int keyCode, KeyEvent event)`在`Fragment`.

```
@Override
public boolean onKeyPreIme(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && 
        event.getAction() == KeyEvent.ACTION_UP) {
            // do your stuff
            return false;
    }
    return super.dispatchKeyEvent(event);
} 
```

我尝试了很多，但没有任何效果。另外，我在 Google 或 Stack Overflow 上找不到任何东西。我想在按下后退键并且软键盘启动时执行一个操作。`onKeyListener`在 my s 上设置 an`EditText`不起作用，因为`KeyEvent.KEYCODE_BACK`软键盘启动时不会调用。我感谢任何帮助和源代码。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-15T00:47:24.457

这是我的解决方案，对我来说效果很好，但每个人的需求都不一样。

首先，我将 EditText 子类化并连接了一个侦听器（Google 应该将其设为默认值）

```
public class ListenerEditText extends EditText {

    private KeyImeChange keyImeChangeListener;

    public ListenerEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setKeyImeChangeListener(KeyImeChange listener){
        keyImeChangeListener = listener;
    }

    public interface KeyImeChange {
        public void onKeyIme(int keyCode, KeyEvent event);
    }

    @Override
    public boolean onKeyPreIme (int keyCode, KeyEvent event){
        if(keyImeChangeListener != null){
            keyImeChangeListener.onKeyIme(keyCode, event);
        }        
        return false;
    }
} 
```

然后你可以像这样从任何地方附加一个监听器：

```
myListenerEditText.setKeyImeChangeListener(new KeyImeChange() {

    @Override
    public void onKeyIme(int keyCode, KeyEvent event) {
        // All keypresses with the keyboard open will come through here!
        // You could also bubble up the true/false if you wanted 
        // to disable propagation.
    }
}); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-19T15:27:31.640

我能够通过对与键盘输入相关的 EditText 视图进行子类化来实现 onKeyPreIme。目标是制作用户必须输入密码或离开应用程序的自定义锁屏。当用户点击“键盘向下”按钮时，键盘不会消失。

确保为子类 EditText 创建一个单独的 .java 文件。此外，请务必使用下面代码中的构造函数（必须通过 AttrubuteSet）。

我意识到我的 onKeyPreIme 实现可能与您的不匹配，但它确实演示了如何在 InputMethodManager 执行此操作之前拦截键盘事件。

我希望这有帮助。

屏幕截图 UserLockActivity ![在此处输入图像描述](../Images/352b5575169574cdc1c71b863809f029.png)

EditText 子类

```
public class LockEditText extends EditText {
    /* Must use this constructor in order for the layout files to instantiate the class properly */
    public LockEditText(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    @Override
    public boolean onKeyPreIme (int keyCode, KeyEvent event)
    {
        // Return true if I handle the event:
            // In my case i want the keyboard to not be dismissible so i simply return true
            // Other people might want to handle the event differently
        System.out.println("onKeyPreIme " +event);
        return true;
    }

} 
```

UserLockActivity.java

```
public class UserLockActivity extends Activity 
{
    private LockEditText editText1;
    private LockEditText editText2;
    private LockEditText editText3;
    private LockEditText editText4;
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_user_lock);
        editText1 = (LockEditText) findViewById(R.id.lock_text_1);
        editText2 = (LockEditText) findViewById(R.id.lock_text_2);
        editText3 = (LockEditText) findViewById(R.id.lock_text_3);
        editText4 = (LockEditText) findViewById(R.id.lock_text_4);
        setupTextChangedListener(editText1);
        setupTextChangedListener(editText2);
        setupTextChangedListener(editText3);
        setupTextChangedListener(editText4);
        // A method to bring out the keyboard when the view appears
        setFocusOnEditText(editText1);
    }

    public void setFocusOnEditText(LockEditText editText)
    {
        editText.clearFocus();
        editText.requestFocus();
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,0);
    }
    public void setupTextChangedListener(LockEditText editText)
    {
        editText.addTextChangedListener(new TextWatcher() 
        {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) 
            {

            }

            @Override
            public void afterTextChanged(Editable arg0) 
            {
                // TODO Auto-generated method stub
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1,int arg2, int arg3) 
            {
                // TODO Auto-generated method stub
            }
        });
    }
} 
```

activity_user_lock.xml 布局文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".UserLockActivity" >

    <TextView
        android:id="@+id/main_lock_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_alignParentTop="true"
        android:paddingTop="60dp"
        android:paddingBottom="20dp"
        android:text="@string/enter_passcode"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <LinearLayout
        android:id="@+id/lock_input_layout"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_below="@+id/main_lock_text"
        android:orientation="horizontal" >

        <com.yourpackage.yourappname.LockEditText
            android:id="@+id/lock_text_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="numberPassword"
            android:textSize="30sp"
            android:gravity="center_horizontal"
            android:textStyle="bold" >
        </com.yourpackage.yourappname.LockEditText>
        <com.yourpackage.yourappname.LockEditText
            android:id="@+id/lock_text_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="numberPassword"
            android:textSize="30sp"
            android:gravity="center_horizontal"
            android:textStyle="bold" >
        </com.yourpackage.yourappname.LockEditText>
        <com.yourpackage.yourappname.LockEditText
            android:id="@+id/lock_text_3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="numberPassword"
            android:textSize="30sp" 
            android:gravity="center_horizontal"
            android:textStyle="bold">
        </com.yourpackage.yourappname.LockEditText>
        <com.yourpackage.yourappname.LockEditText
            android:id="@+id/lock_text_4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="numberPassword"
            android:textSize="30sp"
            android:gravity="center_horizontal"
            android:textStyle="bold" >
        </com.yourpackage.yourappname.LockEditText>
    </LinearLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/lock_input_layout"
        android:layout_centerHorizontal="true"
        android:text="text" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T19:52:03.830

我无法弄清楚如何实现 onKeyPreIME，但我能够在键盘消失后使用以下代码执行操作：

你需要改变比较 heightDiff > 200。这个比较对我有用，因为我有一个滚动视图。

```
fragmentView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        @Override
        public void onGlobalLayout() {
            if(getView() != null){
                int heightDiff = getView().getRootView().getHeight() - getView().getHeight();
                if (heightDiff < 200) { 
                    rlupdate.setVisibility(RelativeLayout.VISIBLE);
                }
                else {
                    rlupdate.setVisibility(RelativeLayout.GONE);
                }   
            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-04T20:05:49.760

这是 Deminetix 提供的更完整的答案代码。

我已经使用 Deminetix 的答案来过滤 android 上的手持条形码阅读器并得到结果。

为了使其仅在带有按钮的屏幕上可用，我添加了一个带有 android:textColor="#FF000000" android:background="#00FFFFFF" android:enabled="false" 的 EditText 禁用 EditText 仍然会获取键盘事件。

可选地，我可以使用以下命令隐藏软件键盘，但在禁用 EditText 后，它不是必需的。

```
//InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
//imm.showSoftInput(textPatientId, InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

MainActivity.java：

```
package com.doodkin.keyboardtest;

import com.doodkin.keyboardtest.ListenerEditText.KeyImeChange;

import android.os.Bundle;
import android.app.Activity;
import android.text.Editable;
import android.text.TextWatcher;
import android.text.method.KeyListener;
import android.util.Log;
import android.view.InputDevice;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnKeyListener;
import android.widget.EditText;

public class MainActivity extends Activity {
    private static final String TAG = "keyboard test";
    //private EditText editText1;

    ListenerEditText editText1=null;
    public String barcodebuffer="";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editText1 = (ListenerEditText) findViewById(R.id.editText1);

        editText1.setKeyImeChangeListener(new KeyImeChange() {

            @Override
            public boolean onKeyIme(int keyCode, KeyEvent event) {
                String deviceName=event.getDevice().getName();
                int keyboardType=event.getDevice().getKeyboardType();
                int indexof=deviceName.indexOf("USB");
                if(indexof!=-1 && keyboardType==InputDevice.KEYBOARD_TYPE_NON_ALPHABETIC)
                {
                    if(event.getKeyCode()==KeyEvent.KEYCODE_ENTER)
                     {
                         if(barcodebuffer!="")
                         {
                             Log.d(TAG, "filterBarcodeKeys Chars Flush: " + barcodebuffer );
                             barcodebuffer="";
                         }
                     }
                     else
                     {

                         barcodebuffer+=Character.toString((char)event.getUnicodeChar());
                         //Log.d(TAG, "filterBarcodeKeys Char: " + Character.toString((char)event.getUnicodeChar()) );
                     }
                     return true;
                }
                return false;
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <com.doodkin.keyboardtest.ListenerEditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:ems="10" >

        <requestFocus />
    </com.doodkin.keyboardtest.ListenerEditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText1"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="69dp"
        android:text="Button" />

</RelativeLayout> 
```

ListenerEditText.java：

```
package com.doodkin.keyboardtest;

import android.content.Context;
import android.util.AttributeSet;
import android.view.KeyEvent;
import android.widget.EditText;

/*
 * example: 

 myListenerEditText.setKeyImeChangeListener(new KeyImeChange() {

    @Override
    public boolean onKeyIme(int keyCode, KeyEvent event) {
        // All keypresses with the keyboard open will come through here!
        // You could also bubble up the true/false if you wanted 
        // to disable propagation.
    }
});

 */

public class ListenerEditText extends EditText {

    private KeyImeChange keyImeChangeListener;

    public ListenerEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setKeyImeChangeListener(KeyImeChange listener){
        keyImeChangeListener = listener;
    }

    public interface KeyImeChange {
        public boolean onKeyIme(int keyCode, KeyEvent event);
    }

    @Override
    public boolean onKeyPreIme (int keyCode, KeyEvent event){
        if(keyImeChangeListener != null){
            return keyImeChangeListener.onKeyIme(keyCode, event);
        }        
        return false;
    }
} 
```

# c++ - Eclipse CDT 解析器对 C++11 的支持？

> ID：13591020
> 
> 赞同：2
> 
> 时间：2012-11-27T18:49:44.180
> 
> 标签：c++, c++11, syntax-highlighting, eclipse-cdt

我在 Linux 上使用 Eclipse 3.7.2 和 CDT 8.0.2。如何配置 CDT 以识别 c++11 语法，特别是**`override`**？目前，解析器在指示的行上标记了一个虚假错误。由于我在编译器命令行中包含 -std=c++11 ，因此构建完成没有错误。

```
class foo
{
public:
    foo(){}
    virtual ~foo(){}
    virtual void func(){}
};

class bar : public foo
{
public:
    bar(){}
    virtual ~bar(){}
    virtual void func() override {} // <--- parser incorrectly flags syntax error
};

int main()
{
    bar my_bar;
    return 0;
} 
```

我尝试了[Eclipse wiki](http://wiki.eclipse.org/CDT/User/FAQ#CDT_does_not_recognize_C.2B.2B11_features)和[这里](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)的指示，但没有成功。同样，我只需要编辑器的解析器来识别c++11，实际构建就可以了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-08T09:38:53.113

要修复 C++11 语法高亮，请访问：

**项目属性 --> C/C++ 常规 --> 路径和符号 --> 符号 --> GNU C++**

并覆盖符号（即添加新符号）：

```
__cplusplus 
```

有价值

```
201103L 
```

确保在项目设置中启用了索引器（**C/C++ 通用 --> 索引器**）

然后重新索引（**项目 --> C/C++ 索引 --> 重建**）

如果问题仍然存在，请再次重新索引。它现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T10:02:32.470

当我安装 eclipse 的开发版本时，这个问题自己解决了：

Eclipse Luna 4.4 CDT 8.4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:29:55.960

`override`您只能在项目“Properties/Preprocessor Includes/CDT User Settings”中手动为解析器定义没有内容的宏。

# visual-studio-2010 - 当类位于外部文件中时，如何在 MVS10 中突出显示 Asp 类的成员？

> ID：13591021
> 
> 赞同：1
> 
> 时间：2012-11-27T18:49:46.103
> 
> 标签：visual-studio-2010, class, asp-classic, vbscript, ide

当类位于外部文件中并使用添加到脚本中时，如何获得 microsoft visual studio 2010 突出显示 VBScript（经典 ASP）类的成员`#include`？

那可能吗？

这是一个代码示例：

```
<%@language="VBScript" %>
<% 
    ' Scripted by AB

    Option Explicit 

    Response.Charset = "UTF-8"
    Session.CodePage = 65001

    Class MyClass1

        Function Test()
            Test = "MyClass1 function test"
        End Function    

    End Class

    Dim obj : Set obj = New MyClass1

    obj. ' <--- Show Test 

%>
<!-- #include virtual='/app_code/core/inc_class_test2.asp' -->
<%   

    Dim obj2 : Set obj2 = New MyClass2 ' from inc_class_test2.asp 

    obj2\. ' <--- Show nothing

%> 
```

在我的项目中有很多“胖乎乎”的类，我开始忘记有什么方法。有没有人遇到过这个问题并且知道一个优雅的解决方案？

# assembly - 确定数字的符号

> ID：13591023
> 
> 赞同：3
> 
> 时间：2012-11-27T18:49:51.220
> 
> 标签：assembly, mips

我只是尝试使用 MIPS 程序集在给定数字是正数或负数的情况下分支到不同的代码段，这是应该这样做的短段：

```
lbu $4, digit
and $5, $4, 0x80
srl $5, $5, 31
bgt $5, 0, positive
b negative 
```

数字成功地在 $4 中，我将它与后面的所有零的 1 逐位与，以获得第一位是 1 还是 0，然后我右移 31 位，使其位于最后一个位置，然后我检查它是否大于 0，如果是，则分支为正，否则，分支为负。

我确定我在某处搞砸了逻辑，我也不确定我是否可以像那样使用 0（在 bgt 中），或者我是否应该使用 $0

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:00:50.667

我认为您正在将字节移出图片。使用您的方法，您应该将其移动 7 位，而不是 31 位。但是......

根据[http://www.ece.umd.edu/~manoj/759M/MIPSALM.html](http://www.ece.umd.edu/~manoj/759M/MIPSALM.html)`lbu`，您可以使用，而不是使用。这将复制您正在加载的字节的第 7 位的值，并将其放入目标寄存器的第 8-31 位。然后就可以用来做分支了。`lb``bgez`

```
lb $4, digit
bgez $4, positive
b negative 
```

但是在我的生活中从未编写过一个字节的 MIPS 汇编程序，您或许应该对这个答案持保留态度。祝你好运！

# vb.net - 如何构建 vb.net 应用程序，以便在发布时轻松连接数据库？

> ID：13591025
> 
> 赞同：1
> 
> 时间：2012-11-27T18:49:54.253
> 
> 标签：vb.net, visual-studio-2010, ms-access-2007, connection-string, publish

我在 VS2010 中制作了使用 2007 Access 数据库的 VB.NET 应用程序，名为`MenuDB.mdb`. 在开发过程中，一切都很好。

现在我正在发布它，我得到了奇怪的错误，因为由于某种原因应用程序没有连接到数据库。

我安装应用程序并运行它，但一旦打开它就会出现此错误：

```
System.Data.OleDb.OleDbException (0x80004005): Could not find file 
'C:\Users\Administrator\AppData\Local\Apps\2.0\Data\OV86PXJA.K3R\8575R5AY.95Z\menu..tion_0d4fa454d69e8e6b_0001.0000_8340d263807cbb71\Data\MenuDB.accdb'. 
```

我知道问题与我将应用程序与数据库相关联的方式有关，但我不知道哪种方式是正确的。在解决方案资源管理器中，我将构建类型更改`MenuDB.accdb`为“内容”（之前它是嵌入式资源）。但这两种方式都不起作用。在我的 App.config 中，我有以下连接字符串：

```
connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\MenuDB.accdb" 
```

我希望当我部署应用程序时，数据库应该放在应用程序文件夹中，无论它安装在哪里。我怎样才能做到这一点？

## 编辑

我不介意以这样一种方式部署它，即我需要自己将数据库粘贴到目标机器上的某个位置——只要它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:36:32.953

如果您有多个用户使用相同或相似的数据库，并且无权访问 SQL 服务器（MySQL、MSSQL 或其他），则将数据库放在所有用户都将拥有的中心位置（最好是网络位置）访问和更改连接字符串以适应网络上的数据库位置。

请注意，在进行简单的数据检索/提交时，Access 最多可以处理 10 个用户，但如果您在其他人通过数据对象访问时打开它，那么您可能会将它们锁定。

# android - onTouch 在按下后退按钮时再次触发

> ID：13591027
> 
> 赞同：2
> 
> 时间：2012-11-27T18:50:26.170
> 
> 标签：android, android-activity

我在 onCreate 方法中有这段代码：

```
 ImageView iv01 = (ImageView)findViewById(R.id.hexagon01);        
    iv01.setOnTouchListener(new OnTouchListener(){
        public boolean onTouch(View view, MotionEvent event) {
            Intent intent = new Intent(view.getContext(), ChoiceActivity.class);
            startActivity(intent);
            return true;
        }
    }); 
```

当我触摸图像时，新活动会正确加载。我可以按返回按钮返回。但是当我再次按下后退按钮以关闭应用程序时，它会再次启动 onTouch 事件，再次加载活动。我怎样才能避免它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:27:49.877

OnTouchListener 被触发有几个原因（您需要检查 MotionEvent 参数才能找到确切的原因）。看来您应该只使用 OnClickListener 并以更简单的方式实现相同的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:39:28.807

> 当我触摸图像时，新活动会正确加载。我可以按返回按钮返回。但是当我再次按下后退按钮以关闭应用程序时，它会再次启动 onTouch 事件，再次加载活动。

老实说，后退按钮不会启动您的 Activity 的新副本。`ACTION_DOWN`您的 OnTouchListener 会为每个、`ACTION_MOVE`和MotionEvent 启动一个新的 Activity 副本`ACTION_UP`。但是当您尝试关闭活动活动时，您只会注意到众多活动......

只需确保仅在*一个*MotionEvent 上启动新 Activity：

```
public boolean onTouch(View view, MotionEvent event) {
    if(event.getAction() == MotionEvent.ACTION_UP) {
        Intent intent = new Intent(view.getContext(), ChoiceActivity.class);
        startActivity(intent);
        return true;
    }
    return false;
} 
```

或者您可以在此处使用[OnClickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html)。

# c# - Datagridview 只显示列名

> ID：13591030
> 
> 赞同：0
> 
> 时间：2012-11-27T18:50:37.060
> 
> 标签：c#, datagridview

我有一个包含多个表的 SQL 数据库，我想将其中一个绑定到 DataGridView。我使用此代码： http: [//msdn.microsoft.com/en-us/library/fbk67b6z.aspx#Y210](http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx#Y210) 但我的 datagridview 只显示列名，不绘制任何行。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:57:19.100

如果您可以看到正确的列名但看不到数据，则可能存在以下两个问题之一（或两者都有）：

1.  您的查询不返回任何内容（如果在执行查询时有一些数据，请检查您的数据库管理器）
2.  您在数据库中的表是空的，因此没有什么可以返回。

编辑：您是否尝试过切换这两个语句？

```
Form1_Load(object sender, System.EventArgs e) 
{ 
       GetData("select * from Customers"); 
       dataGridView1.DataSource = bindingSource1; 
} 
```

# java - 使用 Tomcat 的 ManagerServlet 重新加载 servlet 资源

> ID：13591032
> 
> 赞同：3
> 
> 时间：2012-11-27T18:50:45.880
> 
> 标签：java, jsp, tomcat, servlets

我正在开发一个环境管理控制台，用户可以在其中查看部署并更改作为 servlet 资源访问的属性文件，然后重新加载类和资源。似乎 Tomcat`ManagerServlet`将是执行此操作的完美工具，但我希望能够从我的 post 方法在单独的 servlet 中访问它，该 servlet 将更改保存到属性文件，然后在理想情况下重新加载资源。如何`ManagerServlet`从我的 servlet 访问 's reload 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:44:25.170

好吧，您可以例如通过 http 协议访问它：`http://localhost:8080/manager/text/reload?path=/examples`. 这是文档的链接：http: [//tomcat.apache.org/tomcat-7.0-doc/manager-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html)

但是，tomcat 提供了十几个 MBean 来管理您的 tomcat 服务器。我建议您使用它们来管理/重新加载 servlet。您可以`jconsole`在计算机上启动并将其插入正在运行的 tomcat。您将能够浏览 Tomcat 服务器上的可用 MBean 并对其进行测试。

顺便说一句，请注意，如果您的应用程序或依赖项中有任何内存泄漏，您将无法无限期地重新加载上下文。

HIH

# android - 将代理设置为 Android 模拟器

> ID：13591038
> 
> 赞同：0
> 
> 时间：2012-11-27T18:51:07.860
> 
> 标签：android

我在我的模拟器上上网时遇到问题，它的目标是 Google API8。我按照我读过的所有说明，在 MobileNetworks-->APN--->....等中设置代理，但没有不行。如果我删除代理，浏览器会在本地导航，如果我配置了代理，它甚至不会在本地导航。我在针对 API16 的模拟器上测试了相同的配置并且**确实有效**！！！（本地和互联网上），所以请我如何解决这个问题。任何帮助将不胜感激。PD：我也使用 -dns-server xxxx 进行了测试，结果也一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:15:03.903

模拟器使用安装它的主机的互联网连接。

如果主机不需要任何特殊配置来访问互联网（代理等），那么您的模拟器也不需要它。

只有当您的计算机需要代理配置（或其他）时，您才需要在模拟器中复制它。

问候。

# c - 将 Unix 排序命令转换为快速排序

> ID：13591041
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:51:10.520
> 
> 标签：c, unix, sorting, cmd, quicksort

我`sort -n +1 -2 -o /tmp/ord_id`在使用系统调用的 C 文件中有一个命令，这非常糟糕。我将如何创建一个快速排序函数来完成与 unix 命令相同的任务？以下是该命令的调用方式：

```
static const char sortcmd[] = "sort -n +1 -2 -o /tmp/ord_id "; //dec during function
//later in the function
bu_vls_strcpy(&cmd, sortcmd); //ONLY NEED TO FIX THIS COMMAND
bu_vls_strcat(&cmd, argv[1]);
bu_vls_printf(&gedp->ged_result_str, "%V\n", &cmd);
(void)system( bu_vls_addr(&cmd) ); 
```

bu_vls 函数是在程序中预定义的，因此可以将它们视为通常的字符串函数。我评论了调用出现的代码行，感谢任何提示或代码（这不是家庭作业，独立项目！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:56:31.037

有几个步骤：

1.  读入文件（假设是`argv[1]`）
2.  （可选）解析它以`+1 -2`使用与排序相同的规则来查找选择的字段。
3.  编写一个排序谓词来实现对数字（来自`-n`）参数的数字排序。这可以在整行上运行（如果您跳过了第 2 步）或在您创建来表示已解析行的结构上运行。
4.  称呼`qsort`
5.  按排序顺序写出数据。

# django - 如何使用 Django 将本地数据库与远程数据库同步？

> ID：13591044
> 
> 赞同：1
> 
> 时间：2012-11-27T18:51:11.190
> 
> 标签：django, database-design, mysql-python, django-database

我只想在本地和远程数据库中实现并发。对本地数据库所做的更改应自动反映到远程数据库。简而言之，向我解释如何同时更新多个数据库服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:28:21.583

如果你不想在数据库级别解决这个问题，你可能想看看 Django 对[多个数据库](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)的内置支持。

# eclipse - Eclipse - 它是否有像 XCode 这样的下拉方法？

> ID：13591046
> 
> 赞同：3
> 
> 时间：2012-11-27T18:51:13.070
> 
> 标签：eclipse, eclipse-plugin, flash-builder

Eclipse 有没有像 XCode 这样的下拉方法？或者有没有插件可以添加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:57:03.117

Eclipse通过+显示了类的方法和属性的*快速大纲。*`command``o`

![快速大纲](../Images/ec420896fdf64df8009e3e4e72733e40.png)

# matlab - Matlab：5 x 5 网格点的索引

> ID：13591048
> 
> 赞同：1
> 
> 时间：2012-11-27T18:51:37.643
> 
> 标签：matlab, indexing

对于以下内容：

```
 x = [0.5 1.5 2.5 3.5 4.5];

    for k = 1:1:5
      plot(x(k),x','b^','linewidth', 2)
      hold on
    end 
```

如同：

```
[x,y] = meshgrid(0.5:1:4.5); 
```

我如何索引每个点（蓝色三角形）坐标？

![在此处输入图像描述](../Images/502d8d451d52b3bc766f76e86c5e9257.png)

结果应该是这样的：

```
point1  = [x(1),x(1)]; % [0.5,0.5]
point2  = [x(1),x(2)]; % [0.5,1.5]
point3  = [x(1),x(3)]; % [0.5,2.5]
point4  = [x(1),x(4)]; % [0.5,3.5]
point5  = [x(1),x(5)]; % [0.5,4.5]
point6  = [x(2),x(1)]; % [1.5,0.5]
...
point25  = [x(5),x(5)];% [4.5,4.5] 
```

我必须做错事，否则 matlab 程序今天不让我索引这些。

```
[~,idx] = length(point(:));
idxpoint = ind2sub(size(point),idx); 
```

请写一个工作示例。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:17:20.910

你几乎拥有它。您可以`meshgrid`为此使用：

```
x = linspace(0.5, 4.5, 5);
y = linspace(0.5, 4.5, 5);
[Y, X] = meshgrid(x, y);

points = [X(:) Y(:)]; 
```

此方法的优点是您可以`linspace`对 x 和 y 坐标使用不同的坐标。

现在每一行`points`商店 x 和 y 坐标一个点：

```
points(1,:)
ans =

0.5000
0.5000

points(25,:)
ans =

4.5000
4.5000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:16:34.987

下面的呢？

```
[x y] = meshgrid(.5:1:4.5);
points = [reshape(x,1,[])',reshape(y,1,[])']

points =

0.5000    0.5000
0.5000    1.5000
0.5000    2.5000
0.5000    3.5000
0.5000    4.5000
1.5000    0.5000
1.5000    1.5000
1.5000    2.5000
1.5000    3.5000
1.5000    4.5000
2.5000    0.5000
2.5000    1.5000
2.5000    2.5000
2.5000    3.5000
2.5000    4.5000
3.5000    0.5000
3.5000    1.5000
3.5000    2.5000
3.5000    3.5000
3.5000    4.5000
4.5000    0.5000
4.5000    1.5000
4.5000    2.5000
4.5000    3.5000
4.5000    4.5000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:12:52.857

您可以将所有点堆叠成一个 N×2 矩阵，每一行代表一个点”

```
close all
x = [0.5 1.5 2.5 3.5 4.5];
n = length(x);
X = [];

for k = 1:1:5
    plot(x(k),x','b^','linewidth', 2)
    X = [X; repmat(x(k),n,1) x'];
    hold on
end

% replot on new figure
figure, hold on
plot(X(:,1),X(:,2),'b^','linewidth',2)

% Each row of X is one of your points, i.e.
% Point number 5:
X(5,:) 
```

# jquery - jQuery Animation : 改变动画参数 mid-animation

> ID：13591052
> 
> 赞同：8
> 
> 时间：2012-11-27T18:51:46.130
> 
> 标签：jquery, animation

假设你有一个很长的动画，你正在改变`width`：

```
var myTargetWidth = 500;
$(el).animate( { "width" : myTargetWidth }, 5000 ); 
```

动画是异步的，因此您的代码将继续。. . 几秒钟后，您决定将目标更改`width`为`300`. . . 此时动画仍在运行。. .

如何在运行动画中将 targetWidth 更改为不同的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:23:27.313

一种选择是使用jQuery函数 ( [API](http://api.jquery.com/animate/)`step` )中提到的函数在动画运行时检查条件。`animate`

示例 JSFiddle：http: [//jsfiddle.net/GweLA/13/](http://jsfiddle.net/GweLA/13/)

**JS**

```
var myTargetWidth = 500;

$(document).ready(function(){
    $('.sample').animate( { "width" : myTargetWidth },{
        duration : 5000,      
        step: function(now, fx) {
            if($(this).width() > 200){
              myTargetWidth = 300;
              $(this).stop().animate({ "width" : myTargetWidth },1000);
            }
        }
    });
}); 
```

**CSS**

```
.sample{
    width:20px;
    height:100px;
    background-color:#cccccc;    
} 
```

**HTML**

```
<div class="sample">
   width is supposed to be animated till 500 but it stops at 300
</div> 
```

* * *

**解决方案2：**

经过一番研究，我发现我们可以修改传递给 step 函数的参数的`start`和`end`属性来控制动画。`fx`这种平滑动画，但不是一种非常整洁的方式。

示例 JSFiddle：http: [//jsfiddle.net/GweLA/57/](http://jsfiddle.net/GweLA/57/)

**JS**

```
var myTargetWidth = 500;
var isExecuted = false;
$(document).ready(function(){
    $('.sample').animate( { "width" : myTargetWidth },{
        duration : 5000,
        queue : false,
        step: function(now, fx) {
                 //So that fx.start and fx.end is set only once                
                if($(this).width() > 200 && $(this).width() < 203){
                    if(!isExecuted){
                        fx.start = now-65;
                        fx.end = 300;
                    }
                    isExecuted = true;
                }
              }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:01:27.487

您可以使用**[.stop()](http://api.jquery.com/stop/)**的组合- 停止动画。

**[:animated](http://api.jquery.com/animated-selector/)**选择器 - 检查当前元素是否正在动画..

试试这个

**HTML**

```
​&lt;div class="a">

​&lt;/div>

​&lt;button id="check">Check Animation </button>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**Javascript**

```
var myTargetWidth = 300;
var $el = $('.a')
$el.animate({
    "width": myTargetWidth
}, 5000);

$('#check').on('click', function() {
    var newHeight = 300;
    if ($('.a:animated')) {
        $el.stop().animate({
            "height": newHeight
        }, 5000);
    }
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/Mv4VF/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:07:50.597

查看 jquery github 中的 effects.js，你会在赋值后更改变量时遇到问题

来源：[https ://github.com/jquery/jquery/blob/master/src/effects.js](https://github.com/jquery/jquery/blob/master/src/effects.js)

注意：注意 .animate 中的分配和对象创建到动画（工作马）

```
animate: function( prop, speed, easing, callback ) {
    var empty = jQuery.isEmptyObject( prop ),
    optall = jQuery.speed( speed, easing, callback ),
    doAnimation = function() {
        // Operate on a copy of prop so per-property easing won't be lost
        var anim = Animation( this, jQuery.extend( {}, prop ), optall );

        // Empty animations resolve immediately
        if ( empty ) {
           anim.stop( true );
        }
    };

return empty || optall.queue === false ?
this.each( doAnimation ) :
this.queue( optall.queue, doAnimation );
} 
```

//在effects.js中动画

```
function Animation( elem, properties, options ) {
    var result,
        index = 0,
        length = animationPrefilters.length,
        deferred = jQuery.Deferred().always( function() {
            // don't match elem in the :animated selector
            delete tick.elem;
        }),
        tick = function() {
            var currentTime = fxNow || createFxNow(),
                remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
                // archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)
                temp = remaining / animation.duration || 0,
                percent = 1 - temp,
                index = 0,
                length = animation.tweens.length;

            for ( ; index < length ; index++ ) {
                animation.tweens[ index ].run( percent );
            }

            deferred.notifyWith( elem, [ animation, percent, remaining ]);

            if ( percent < 1 && length ) {
                return remaining;
            } else {
                deferred.resolveWith( elem, [ animation ] );
                return false;
            }
        },
        animation = deferred.promise({
            elem: elem,
            props: jQuery.extend( {}, properties ),
            opts: jQuery.extend( true, { specialEasing: {} }, options ),
            originalProperties: properties,
            originalOptions: options,
            startTime: fxNow || createFxNow(),
            duration: options.duration,
            tweens: [],
            createTween: function( prop, end ) {
                var tween = jQuery.Tween( elem, animation.opts, prop, end,
                        animation.opts.specialEasing[ prop ] || animation.opts.easing );
                animation.tweens.push( tween );
                return tween;
            },
            stop: function( gotoEnd ) {
                var index = 0,
                    // if we are going to the end, we want to run all the tweens
                    // otherwise we skip this part
                    length = gotoEnd ? animation.tweens.length : 0;

                for ( ; index < length ; index++ ) {
                    animation.tweens[ index ].run( 1 );
                }

                // resolve when we played the last frame
                // otherwise, reject
                if ( gotoEnd ) {
                    deferred.resolveWith( elem, [ animation, gotoEnd ] );
                } else {
                    deferred.rejectWith( elem, [ animation, gotoEnd ] );
                }
                return this;
            }
        }),
        props = animation.props;

    propFilter( props, animation.opts.specialEasing );

    for ( ; index < length ; index++ ) {
        result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
        if ( result ) {
            return result;
        }
    }

    createTweens( animation, props );

    if ( jQuery.isFunction( animation.opts.start ) ) {
        animation.opts.start.call( elem, animation );
    }

    jQuery.fx.timer(
        jQuery.extend( tick, {
            anim: animation,
            queue: animation.opts.queue,
            elem: elem
        })
    );

    // attach callbacks from options
    return animation.progress( animation.opts.progress )
        .done( animation.opts.done, animation.opts.complete )
        .fail( animation.opts.fail )
        .always( animation.opts.always );
} 
```

结果，我认为您将不得不 .stop 并使用更改的变量重新排列动画，因为您几乎没有希望访问闭包中的任何变量（请有人纠正我）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T19:16:24.233

我在这里添加了一个示例：

[http://jsfiddle.net/Q3ZcQ/](http://jsfiddle.net/Q3ZcQ/)

尝试单击动画中的“单击此处”元素...

我使用`clearQueue()`and`stop()`函数。

CSS #block { 宽度：100px; 高度：100px；背景：红色；}​</p>

HTML

```
<p>
  <a id="clickme">Click here</a>
</p> 
```

查询

```
$('#clickme').not('.again').on('mouseup',function() {
  $(this).addClass('again');
  $('#block').animate({
    width: '400'
  }, 5000, function() {
    // Animation complete.
  });
});

$('.again').live('mousedown', function() {
    $(this).removeClass('again');
 $('#block').clearQueue().animate({
    width: '200',
  }, 500, function() {
     $('#block').stop(true, false);
  });
});​
<div id="block" />​ 
```

# extjs - 在 applicationg 设置中将斜杠作为参数传递给 url

> ID：13591055
> 
> 赞同：2
> 
> 时间：2012-11-27T18:51:59.670
> 
> 标签：extjs, reporting-services, ssrs-2008, ssrs-2012

我有一个 extjs 应用程序，它使用斜杠向应用程序设置发送参数...例如“Tiger/Cheetah”，以打印报告...我的 ssrs 报告也采用该参数...但是当通过网络浏览器传递的参数不带斜杠“Tiger/Cheetah”......它采用“Tiger”但报告中没有记录......

我试图像这样用 %2f 替换 /

```
Tiger%2fCheetah 
```

它不工作......

还有其他方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T19:02:42.987

这很容易

```
encodeURIComponent('Tiger/Cheetah') 
```

另一方必须反之

```
decodeURIComponent('Tiger%2fCheetah') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T17:54:06.917

您是否尝试过用另一个斜线转义斜线？尝试通过

```
Tiger//Cheetah 
```

如果您使用的是 BIDS (VB)，则可以调用 REPLACE() 为您执行此操作。我在传递包含斜杠或反斜杠的参数时使用它。

```
REPLACE(VariableName,"/","/") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T13:10:49.850

尝试替换（字段！SomeName.Value，“\”，“\”）。当我的记录集具有要传递给 javascript URL 的黑色斜线值时，它起作用了

彼得·J

# php - PHP 要求文件逻辑如何工作？

> ID：13591057
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:52:03.743
> 
> 标签：php, include-path

文件树；

*   引导.php
*   面板/index.php
*   面板/inc/start.php
*   面板/inc/functions.php

过程：

*   索引.php；需要'inc/start.php'
*   开始.php；需要“../boot.php”和“functions.php”
*   （require_once 'x.php' 使用）

调用 index.php 时一切正常。为什么我不必使用 ../../boot.php 而不是 ../boot.php？如果相对文件夹是 /panel，那么 require 'functions.php' 应该会失败。如果是 /panel/inc，require '../boot.php' 应该会失败。但一切都有效。如何？

注意：我知道我应该使用绝对文件夹来包含文件。我只是想了解这个例子是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:55:55.403

至于 PHP 手册：

[http://php.net/manual/en/function.require-once.php](http://php.net/manual/en/function.require-once.php)

[http://www.php.net/manual/en/function.include.php](http://www.php.net/manual/en/function.include.php)

> 如果定义了路径——无论是绝对路径（在 Windows 上以驱动器号或 \ 开头，在 Unix/Linux 系统上以 / 开头）还是相对于当前目录（以 . 或 .. 开头）

当 PHP 包含 / 需要一个文件时，它会查找相对于当前文件位置的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:56:54.070

您的 index.php 文件在处理时将包含 inc/start.php。所以你的 index.php 看起来像

```
<?php 
 //inc/start.php file content here
 //require '../boot.php'; 
```

所以 boot.php 将像它一样被包含在内，包括 index.php 本身

# c++ - 在 Dev Alpha Simulator 中的 webview Blackberry 10 Cascades Beta 3 SDK 中获取不正确的权限屏幕

> ID：13591062
> 
> 赞同：0
> 
> 时间：2012-11-27T18:52:38.040
> 
> 标签：c++, qt, permissions, webview, blackberry-cascades

我正在尝试使动态生成的 html 5 图形显示在 Blackberry 10 Cascades 的 web 视图中。我已经确认了我生成的 html5，绘制了正确的图表。我的问题是，当我尝试在 Blackberry 10 Cascades Beta 3 SDK（使用 Blackberry 10 Dev Alpha Simulator）中实现这一点时，应该显示图表的 webview 看起来像这样：

![错误：无法打开此文件。 检查您是否拥有正确的权限，然后重试。](../Images/7ea342ac18d7770f838e60afb24729e8.png)

以下是导致此错误的代码：

```
//html_ already contains the html-5 code to make the graph at this point in the code

//This is the file path to a local file that is actually accessable in the emulator
//and not just from Windows
//
QFile *chartFile = new QFile("app/native/assets/data/chart.html");

if (chartFile->open(QIODevice::WriteOnly)) {
    chartFile->write(html_.toUtf8());
    chartFile->flush();
    chartFile->close();
}

if (chartFile) delete chartFile;

if (graphView_) {
    graphView_->setHtml("");
    graphView_->setUrl(QUrl::fromLocalFile("app/native/assets/data/chart.html"));
} 
```

我检查了该文件的权限，将它们全部设置为允许（知道 Unix 样式权限的人的权限为 777）。

我将 access_internet 添加到 bar-descriptor.xml 中，尽管我的应用程序已经能够访问远程站点，只是想看看这是否能解决它，但它没有。

我一直在寻找解决这个问题的方法，但我没有。

如果有人可以帮助我解决这个问题，将不胜感激。

## -------------------------------------------------- -----

* * *

更新：

我更改了代码以直接设置html，现在我有了：

```
if (graphView_) {
    graphView_->setHtml(html_, QUrl("app/native/assets/data/chart.html"));
} 
```

但什么都没有显示。相对于我的基本网址，我似乎有错误的相对路径。

我的基本网址是：QUrl("app/native/assets/data/chart.html")

我的相对路径都以：./Highcharts/js/...

我的相对路径位于：app/native/assets/data/Highcharts/js

在我看来，这应该可以工作，但是当我这样做时，我只是一个空白屏幕，好像它找不到我的相对路径。所以我也不知道这里发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:58:30.817

我找到了一个可行的解决方案。我使用的是第一种方法，而不是更新的方法，而是

```
graphView_->setUrl(QUrl("app/native/assets/data/chart.html")); 
```

我在用着：

```
graphView_->setUrl(QUrl("local:///assets/data/chart.html")); 
```

而且我将其余代码保持不变，并且可以正常工作。

# android - 使用posttext通过网站系统地检查数字列表

> ID：13591064
> 
> 赞同：1
> 
> 时间：2012-11-27T18:52:50.083
> 
> 标签：android, app-inventor

在我的应用程序中启用了一项功能，该功能以编程方式从内置应用程序发明者的 android 应用程序中检查多达 12 个序列号。最近网站代码发生了变化，导致功能失效。

我正在尝试分析在网站上单击“发送”按钮时发生的操作。

我正在使用wireshark。设法“看到”按下按钮时会发生什么。

_VIEWSTATE 变量似乎已更改。

有谁知道这是否会破坏应用程序？

我正在查询的网站[http://vppneuapps.volvo.com/ww/PIE/PIE.aspx?lang=en-GB](http://vppneuapps.volvo.com/ww/PIE/PIE.aspx?lang=en-GB)

我建立的应用程序[http://goo.gl/xZCPO](http://goo.gl/xZCPO)（免费下载）

非常感谢任何建议/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:24:20.800

我自己回答的问题。

应用程序发明者的 Zip 文件[在此处](https://groups.google.com/forum/?fromgroups=#!topic/programming-with-app-inventor/p3GUtPJFvN0)

# c - chdir() - 没有这样的文件或目录

> ID：13591065
> 
> 赞同：6
> 
> 时间：2012-11-27T18:52:53.713
> 
> 标签：c, chdir

```
int main(int argc, char **argv)
{
  char input[150];
  char change[2] = "cd";
  char *directory;

  while(1) {
      prompt();
      fgets(input, 150, stdin);

      if(strncmp(change, input, 2) == 0) {
          directory = strtok(input, " ");
          directory = strtok(NULL, " ");

          printf(directory);
          chdir(directory);
          perror(directory);

      }

      if(feof(stdin) != 0 || input == NULL) {
          printf("Auf Bald!\n");
          exit(3);
      }
  }
} 
```

当我启动它并输入“cd test”时，我得到“没有这样的文件或目录”。但是有目录“test”。

在 Arch Linux 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:05:56.620

从[手册页](http://linux.die.net/man/3/fgets)：

> fgets() 从流中最多读入一个小于 size 的字符，并将它们存储到 s 指向的缓冲区中。在 EOF 或换行符后停止读取。**如果读取了换行符，则将其存储到缓冲区中。**

`'\n'`问题是您的字符串末尾有一个换行符`fgets()`，您需要将其删除：

```
fgets(input, 150, stdin);
input[strlen(input)-1] = '\0'; 
```

还：

```
char change[2] = "cd"; 
```

那应该是，它是 2（对于“cd”）+ 1 用于自动为您放置`change[3]`的 NULL 终止符。`'\0'`

然后它应该工作。

**编辑**：

另一种选择是更改`strtok()`调用，以便：

```
directory = strtok(NULL, " \n"); 
```

如果用户通过回车键或 EOF（Linux 上的 ctrl + d）字符输入字符串，这将起作用......我不确定第二个用户执行的可能性有多大......但它不能不疼！

# javascript - 为什么新标准是 `application/javascript` 而不是 `text/javascript`？

> ID：13591069
> 
> 赞同：7
> 
> 时间：2012-11-27T18:53:06.067
> 
> 标签：javascript, mime-types

> **可能重复：**
> [Javascript MIME 类型](https://stackoverflow.com/questions/4101394/javascript-mime-type)

我注意到 MIME 类型`text/javascript`已被弃用，取而代之的是`application/javascript`. [维基百科似乎证实了这一点](http://en.wikipedia.org/wiki/JavaScript)。然而，Javascript 以源代码形式分发，即文本。这个词`application`对我来说听起来像是一个编译过的二进制文件。事实上，现代 Javascript 解释器确实对源文本执行 JIT 编译，从而生成应用程序，从而暗示源文本本身不是应用程序。那么为什么首选使用`application/javascript`MIME 类型呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:58:09.123

根据[RFC 2045](https://www.rfc-editor.org/rfc/rfc2045)：

> 一般来说，顶级媒体类型用于声明数据的一般类型，而子类型指定该类型数据的特定格式。因此，“image/xyz”媒体类型足以告诉用户代理数据是图像，即使用户代理不知道具体的图像格式“xyz”。例如，此类信息可用于决定是否向用户显示来自无法识别的子类型的原始数据——这样的操作对于无法识别的文本子类型可能是合理的，但不适用于无法识别的图像或音频子类型。出于这个原因，**文本、图像、音频和视频的注册子类型不应包含真正属于不同类型的嵌入信息。此类复合格式应使用“multipart”或“application”表示**

*编辑*

因此，尽管 JavaScript 确实是文本，但它也是“包含嵌入信息的文本的注册子类型，实际上属于不同类型”，因此需要该`application`RFC 定义的顶级媒体类型。

有许多`application/...`MIME 类型不是“应用程序”（可执行二进制文件或代码），例如：（`application/zip`对于 Zip 档案）。因此，从这个意义上说，`application`顶级媒体类型的命名颇具误导性。

# android - Android 应用在模拟器上显示，但在手机上不显示

> ID：13591072
> 
> 赞同：1
> 
> 时间：2012-11-27T18:53:25.380
> 
> 标签：android, opengl-es, renderer, orthographic

我正在运行一个显示许多位图和单个翻译动画的应用程序。在模拟器上，这一直有效，除了宽度和高度（来自设备）被切换的罕见例外。然而，在朋友的 Galaxy SIII 上，没有显示任何纹理，也没有显示四边形。在尝试查看动画是否运行后，它没有运行，但 glClear 函数为背景绘制了正确的颜色。因此程序仍在渲染中。我正在使用带有以下渲染器的正交视图。

```
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import android.content.Context;
import android.opengl.GLSurfaceView.Renderer;

public class GLrenderer implements Renderer {

private Context context;
long startTime; 
public GLrenderer(Context context) {
    this.context = context;

}
public void onSurfaceCreated(GL10 gl, EGLConfig config) {       
    //Load the texture for the cube once during Surface creation

    MenuGameLoop.button.now.position_x=0;
    MenuGameLoop.button.past.position_x=0;
    MenuGameLoop.button.loadGLTexture(gl, this.context);
    MenuGameLoop.overlay.loadGLTexture(gl, this.context);
    for(int i=0;i<Splash.cubes.size();i++){
    Block ice=Splash.cubes.get(i);
    ice.loadGLTexture(gl, this.context, ice.width, ice.height,ice.overall,ice.subWidth, ice.subHeight);
    }
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glEnable(GL10.GL_TEXTURE_2D);            
    gl.glShadeModel(GL10.GL_SMOOTH);            
    gl.glClearColor(0.0f, 0.666f, 0.831f, 1f); 
    gl.glClearDepthf(1.0f);                     
    gl.glEnable(GL10.GL_DEPTH_TEST);        
    gl.glDepthFunc(GL10.GL_LEQUAL);             

    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST); 
}

public void onDrawFrame(GL10 gl) {
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);    
    gl.glLoadIdentity();
    MenuGameLoop.overlay.draw(gl);      
    gl.glPushMatrix();
    gl.glTranslatef( (float)MenuGameLoop.button.mid.position_x,(float)MenuGameLoop.button.mid.position_y+(Splash.sizeY/2), 0);  
    MenuGameLoop.button.draw(gl);

    gl.glPopMatrix();
    for(int i=0;i<Splash.cubes.size();i++){
        gl.glPushMatrix();
        Block ice=Splash.cubes.get(i);
        gl.glTranslatef (ice.posX,ice.posY, 0); 
        ice.draw(gl);
        gl.glPopMatrix();
        }

}

public void onSurfaceChanged(GL10 gl, int width, int height) {

    if(height == 0) {                   
        height = 1;                         
    }

    gl.glViewport(0, 0, width, height);     
    gl.glMatrixMode(GL10.GL_PROJECTION);    
    gl.glLoadIdentity();                    

    gl.glOrthof(0f, (float)width, (float)height, 0f, 0.1f, 100.0f);

    gl.glMatrixMode(GL10.GL_MODELVIEW);     
    gl.glLoadIdentity();                    
    }
} 
```

如果不能从上面推断出问题，是否有任何具体的事情我应该避免/添加到其他代码部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:37:55.467

请确保您使用的是二次幂纹理。

Also, you might pick incompatible OpenGL ES config which works on emulator but not on device.

# android - Android NDK 调试：armeabi-v7a 不工作

> ID：13591076
> 
> 赞同：9
> 
> 时间：2012-11-27T18:53:52.110
> 
> 标签：android, eclipse, debugging, android-ndk, cygwin

Eclipse / Cygwin

NDK 8c

构建共享库

切换到 armeabi-v7a 后，我无法再启动 gdbserver。我在网上搜索了几个小时，但找不到专门处理 armeabi-v7a 调试问题的主题。

由于使用了依赖于它的第三方库，我别无选择切换到 armeabi-v7a。没有它，我会收到以下错误：

```
D:\TEMP\ccnnGAqD.s:10427: Error: selected processor does not support Thumb mode `ldrex r6,[r3]'
D:\TEMP\ccnnGAqD.s:10429: Error: selected processor does not support Thumb mode `strex r4,r5,[r3]' 
```

在使用“armeabi”之前一切正常，使用以下设置：[http ://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/)

我所做的唯一更改是将其添加到 Application.mk：

```
APP_ABI := armeabi-v7a 
```

在共享库 Android.mk 的最底部，我添加了以下内容：

```
$(info TARGET_ARCH     = $(TARGET_ARCH))
$(info TARGET_ARCH_ABI = $(TARGET_ARCH_ABI))
$(info TARGET_ABI      = $(TARGET_ABI)) 
```

输出以下内容：

```
TARGET_ARCH     = arm
TARGET_ARCH_ABI = armeabi-v7a
TARGET_ABI      = android-14-armeabi-v7a 
```

我已经使用卸载了该应用程序

```
adb uninstall com.example.game 
```

AndroidManifest.xml 确实具有 android:debuggable="true" 属性。

在 Eclipse 中完成了“全部清除”，并手动删除了 ./libs 和 ./obj 文件夹。然后，ndk-build 输出到正确的文件夹（obj/local/armeabi-v7a 和 libs/armeabi-v7a），并且 obj/local/armeabi 和 libs/armeabi**不存在。**

但是，当我运行 ndk-gdb 时会发生以下情况：

```
user@MACHINENAME /cygdrive/e/projects/game
$ ndk-gdb-eclipse --force --verbose
Android NDK installation path: /cygdrive/e/projects/sdks/android-ndk
Using default adb command: /cygdrive/e/projects/sdks/android-sdk/platform-tools/adb
ADB version found: Android Debug Bridge version 1.0.31
Using ADB flags:
Using auto-detected project path: .
Found package name: com.example.game
ABIs targetted by application: armeabi
Device API Level: 15
Device CPU ABIs: armeabi-v7a armeabi
Compatible device ABI: armeabi
Using gdb setup init: ./libs/armeabi/gdb.setup
Using toolchain prefix: /cygdrive/e/projects/sdks/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-
Using app out directory: ./obj/local/armeabi
Found debuggable flag: true
ERROR: Could not find gdbserver binary under ./libs/armeabi
   This usually means you modified your AndroidManifest.xml to set
   the android:debuggable flag to 'true' but did not rebuild the
   native binaries. Please call 'ndk-build' to do so,
   *then* re-install to the device! 
```

请注意“应用程序所针对的 ABI”使用了错误的“armeabi”。这是 ndk-gdb 的相关部分：

```
get_build_var ()
{
    if [ -z "$GNUMAKE" ] ; then
        GNUMAKE=make
    fi
    $GNUMAKE --no-print-dir -f $ANDROID_NDK_ROOT/build/core/build-local.mk -C $PROJECT DUMP_$1 | tail -1
}

APP_ABIS=`get_build_var APP_ABI`
if [ "$APP_ABIS" != "${APP_ABIS%%all*}" ] ; then
# replace first "all" with all available ABIs
  ALL_ABIS=`get_build_var NDK_ALL_ABIS`
  APP_ABIS_FRONT="${APP_ABIS%%all*}"
  APP_ABIS_BACK="${APP_ABIS#*all}"
  APP_ABIS="${APP_ABIS_FRONT}${ALL_ABIS}${APP_ABIS_BACK}"
fi
log "ABIs targetted by application: $APP_ABIS" 
```

我在 Application.mk 中明确将 APP_ABI 设置为 armeabi-v7a，那么这是 NDK 中的错误吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T07:14:44.147

I had the same issue. I configured eclipse following [this article](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/). Then I change from `armeabi` to `armeabi-v7a`. Then I couldn't debug.

I fixed this issue:
1) You must fix the folders in "Debug configurations"

*   Main tab change `...obj/local/armeabi/app_process to ...obj/local/armeabi-v7a/app_process`
*   Debugger tab change `...obj/local/armeabi/gdb2.setup to obj/local/armeabi-v7a/gdb2.setup`
*   Debugger tab change `.../toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gdb to toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gdb`

2) May be this is workaround but it works. In "Debug configurations" `->Debugger->Shared Libraries add <project path>/obj/local/armeabi-v7a` and check "Load shared library symbols automatically"

# html - Chrome 不使用 CSS 渲染整个页面（在 FF/IE 中工作）

> ID：13591078
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:54:12.083
> 
> 标签：html, css, google-chrome

我有一个非常简单的网页，但`CSS`导致 Chrome 出现问题。基本上，如果内容超出即时屏幕上呈现的内容，Chrome 将无法向下滚动到它。内容和滚动在`FF`和中运行良好`IE`。我能够让 Chrome 显示内容（除了消除 CSS）的唯一方法是更改`html{height: 100%;}`​​为更高的值`(200%)`。显然这不是一个理想的解决方案。

HTML 和 CSS： [http ://cssdesk.com/Z3k52](http://cssdesk.com/Z3k52)

浏览器：

```
Chrome 23.0.1271.91 // FF 16.0.2 // IE 9.0.8112.16421 
```

我确定我只是错过了一些简单的东西，但我不知道是什么。

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Home Page</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <link href="layout.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="container">
        <div id="box_margin">
            <div id="title">Some Title, Info, Etc.</div>

            <div id="link_nav">
                <div class="links"><a href="index.html">Home</a></div>
                <div class="links"><a href="links.html">Links</a></div>
                    <div class="links"><a href="about.html">About</a></div>
                <div class="links"><a href="contact.html">Contact</a></div>
            </div>

            <div id="contentbox">
                <div class="box_header">Home Screen</div>
                <div class="pagecontent">
                    <p>Text at the top</p>
                    <p>Next line</p>
                    <p>Next line</p>
                    </br>....
                    </br>....
                    </br></br></br></br>text continues below....</br></br></br></br></br></br></br></br>and can be scrolled to in FF/IE</br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br>o</br>o</br>o</br>o</br>o</br>\ /</br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br>....keep going....</br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br><p>But not Chrome</p>
                </div>
                        <div id="footer">Here is the footer</div>
            </div>
        </div>
    </div>
</body>
</html> 
```

CSS：

```
html
{
  height: 100%;
}

body
{
  height: 100%;
  margin: 0;
  padding: 0;
  line-height: 150%;
  text-align: center;
  font-size: 62.5%;
}

*
{
  font-size: 1em;
  font-family: Arial, Verdana, sans-serif;
  color: #000000;
  text-align: left;
}

#container
{
  margin: 0 auto 0 auto;
  display: table;
  height: 100%;
  position: relative;
  overflow: hidden;
  width: 600px;
}

.links
{
  width:75px;
  margin-right:10px;
  float: left;
  margin-top:24px;
  text-align:center;
  font-family:Georgia, "Times New Roman", Times, serif;
  position:relative; bottom:0px;
  color: #e1a630;
}

.links a{
  font-family:Arial, Helvetica, sans-serif;
  font-size:1.2em;
  font-weight:bold;
}

#link_nav
{
  margin-right:10px;
  height:40px;
  width:600px;
}

#title
{
  width:230px;
  height:40px;
  margin-right:20px;
  margin-top:15px;
  font-family:Arial, Helvetica, sans-serif;
  font-size:2em;
  font-weight:bold;
  text-align:center;
  float:left;
}

.box_header
{
  font-family:Verdana, Arial, Helvetica, sans-serif;
  color:#002664;
  font-size:1.9em;
  margin-top:15px;
  margin-left:15px;
  margin-right:15px;
  margin-bottom:15px;
  width:573px;
}

.pagecontent
{
  font-family: Arial, Helvetica, sans-serif;
  color:#000000;
  font-size:1.2em;
  margin-left:20px;
  margin-right:20px;
  width:560px;
}

#contentbox
{
    position: absolute;
    vertical-align: middle;
    background-color:#5284CC;
    width:600px;
    clear:both;
}

#footer
{
  width:600px;
  height:20px;
  background-color:#5284CC;
  background-repeat:no-repeat;
  text-align:center;
  color:#BDCDEC;
}

#footer a
{
  font-size:.8em;
  color:#BDCDEC;
}

#box_margin
{
  margin-top:25px;
}

html, body {
  text-align: center;
}

p {text-align: left;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:07:44.110

我在这里编辑了你的代码检查：[demo](http://jsfiddle.net/TyMXv/1/)

```
html{
      height: 100%; /* must be remove  */
}

body{
      height: 100%; /* must be remove  */
} 
```

你的错误是设置高度和设置`overflow : hidden`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:04:47.710

不要更改 #container 元素的显示属性和位置。

下面的代码在 chrome 和 firefox 上运行良好。没有在 IE 上测试，因为我在 mac 上，但我很确定它可以工作。

```
#container
{
  margin: 0 auto;
  overflow: hidden;
  width: 600px;
} 
```

[http://cssdesk.com/tyCdB](http://cssdesk.com/tyCdB)

# ruby-on-rails - ActiveRecord to_json 在 :methods 中包含关联

> ID：13591079
> 
> 赞同：0
> 
> 时间：2012-11-27T18:54:21.547
> 
> 标签：ruby-on-rails, ruby, activerecord

我通过以下方式将用户对象转换为 json：

```
user.to_json :methods => :new_cookies 
```

new_cookies 方法是：

```
cookies.all :include => :fortune, :conditions => {:opened => false} 
```

这将 cookie 嵌入到用户 json 对象中，但我希望幸运也嵌入到 cookie 对象中。我进去`:include => :fortune`了，但那不起作用。

这可能吗？

楷模：

```
class User < ActiveRecord::Base
    has_many :cookies
    has_many :fortunes, :through => :cookies

    def new_cookies
        cookies.all :include => :fortune, :conditions => {:opened => false}
    end
end

class Cookie < ActiveRecord::Base
    belongs_to :user
    belongs_to :fortune
end

class Fortune < ActiveRecord::Base
    serialize :rstatuses
    serialize :genders 

    has_many :cookies
    has_many :users, :through => :cookies
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:48:53.413

我不确定该`:includes => :fortune`选项是否按您期望的那样工作（或者可能根本没有）——在[当前 Rails 指南本节](http://guides.rubyonrails.org/active_record_querying.html#retrieving-multiple-objects-in-batches)的末尾附近，它提到了除`.all`.

我假设它的工作方式类似于新的 Active Relation 查询接口，例如`Cookies.include(:fortunes).where(:opened => false)`——在这种情况下，Rails “急切地加载”相关记录，这意味着财富是作为 cookie 查询的一部分获取的。这是一种性能增强，但不会改变 Rails 的行为。

正如我在评论中指出的那样，我认为`as_json`会做你想做的事——它定义了在使用`to_json`. 您指定除了（或排除）数据支持的对象本身的方法之外应该调用的方法，例如，您的`new_cookies`方法。

在这个例子中，我添加了`as_json`to `User`（获取 Cookie）和 to `Cookie`，希望每个 cookie 将它的命运嵌套在它的 JSON 中。请参阅下面的替代方案。

```
class User < ActiveRecord::Base
  has_many :cookies
  has_many :fortunes, :through => :cookies

  def as_json(option = {})
    super(:methods => :new_cookies)
  end

  def new_cookies
    cookies.all :conditions => {:opened => false}
  end
end

class Cookie < ActiveRecord::Base
  belongs_to :user
  belongs_to :fortune

  def as_json(options = {})
    super(:methods => :cookie_fortune)  # or perhaps just :fortune 
  end

  def cookie_fortune
    self.fortune
  end
end 
```

在我正在编写 API 并且不需要反映 JSON 中对象之间的嵌套关系的情况下，在控制器中，我使用了类似的东西

```
respond_to do |format|
  format.html 
  format.json { render json: { :foo => @foo, :bar => @bar }}
end 
```

在 JSON 中生成并行节点（对象）。

# c# - 如何使图像平滑移动？

> ID：13591087
> 
> 赞同：0
> 
> 时间：2012-11-27T18:54:49.043
> 
> 标签：c#, forms, picturebox, doublebuffered

我有一个 PictureBox 图像，它随着面板上的鼠标移动而移动。

它按照我的意愿移动，但它一直在闪烁（如刷新），我了解到这是表单的问题。

我在表单的构造函数中尝试了以下代码行，但没有成功：

```
SetStyle( ControlStyles.ResizeRedraw, true );

SetStyle( ControlStyles.UserPaint, true );

SetStyle( ControlStyles.AllPaintingInWmPaint, true );   

SetStyle( ControlStyles.OptimizedDoubleBuffer, true ); 
```

如果有助于查看所有图片，这是鼠标移动的事件处理程序。chipHolder 是一个面板，image 是分别从文件中导入的图像。

```
private void grid_MouseMove(object sender, MouseEventArgs e)
{ 
      columnPosition = e.X;

      if (columnPosition != -1)
      {
          if (!(columnPosition < 35 || columnPosition > 610))
          {
                chipHolder.Controls.Clear();  
                PictureBox picBox = new PictureBox();
                chipHolder.Controls.Add(picBox);
                picBox.Image = image;
                picBox.Width = image.Width;
                picBox.Height = image.Height;
                picBox.Location = new Point(columnPosition - 33, 0);
                picBox.Show();
          }
      }
      chipHolder.Update();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:57:16.697

不要重新创建`PictureBox`，只需移动它。

刚试过这个，图像移动没有任何闪烁：

```
private void button1_Click(object sender, EventArgs e)
{
    for (int iter = 0; iter < 500; iter++)
    {
        pictureBox1.Location = new Point(pictureBox1.Left + 1, pictureBox1.Top + 1);
        Application.DoEvents();
        System.Threading.Thread.Sleep(30);
    }
} 
```

对于鼠标移动：

```
private void Form1_MouseMove(object sender, MouseEventArgs e)
{
    pictureBox1.Location = new Point(e.X, e.Y);
}

private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
{
    pictureBox1.Location = new Point(e.X + pictureBox1.Left, e.Y + pictureBox1.Top);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:22:07.363

伊戈尔说的：

```
private void grid_MouseMove(object sender, MouseEventArgs e)
{ 
      columnPosition = e.X;

      if (columnPosition != -1)
      {
          if (!(columnPosition < 35 || columnPosition > 610))
          {
                PictureBox picBox = chipHolder.Controls[0] // whatever your picbox id is;
                picBox.Location = new Point(columnPosition - 33, 0);
          }
      }
} 
```

# javascript - 使用 razor 模拟 javascript history.back

> ID：13591089
> 
> 赞同：0
> 
> 时间：2012-11-27T18:55:07.783
> 
> 标签：javascript, razor, url-action

我有这样的javascript代码：

```
<a href="javascript:window.history.back()"... 
```

当我在浏览器中测试我的网站（使用 HTML5、MVC4）时，它运行良好。但是当我使用嵌入式浏览器在 Android/iPhone 应用程序中运行它时，我的反向链接不起作用。

有没有办法模拟`history.back`使用剃须刀，比如`Url.Action`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:28:33.793

您可以在会话中保存上一页 url。像这样的东西：

```
public ActionResult SomeCoolController(SomeCoolClass parameters) {
    //some logic

    var previousPageUrl = Session["PreviousPageUrl"];
    if(previousPageUrl == null)
        Session["PreviousPageUrl"] = Request.Url;

    var isTimeToChangePreviousUrl = Session["IsTimeToChangePreviousUrl"];
    if(isTimeToChangePreviousUrl != null) {
        if(isTimeToChangePreviousUrl) {
            Session["IsTimeToChangePreviousUrl"] = false;
            Session["PreviousPageUrl"] = Request.Url;
        } else {
            Session["IsTimeToChangePreviousUrl"] = true;
        }
    } else {
        Session["IsTimeToChangePreviousUrl"] = false;
    }

    //some return
} 
```

另外，不要总是复制/粘贴此代码，您可以编写自己的 SuperDupaActionResult ，它将继承自 ActionResult 并包含上面的代码（例如作为方法）。

# haskell - 如何允许统一具有不同类型的类型变量？

> ID：13591096
> 
> 赞同：4
> 
> 时间：2012-11-27T18:55:39.737
> 
> 标签：haskell, types, repa

我有一个具有以下类型签名的函数

```
{-# LANGUAGE FlexibleContexts #-}
dataLat :: Load r DIM1 Double
        => (Array r DIM1 Double -> Array U DIM1 Double, Array U DIM1 Double) 
```

`Array`,来自`U`Repa[图书馆](http://hackage.haskell.org/package/repa)。创建稍后作为元组传递给其他函数的数据。在某一时刻，类型变量与类型统一（这再次来自 Repa），但稍后也应该与类型统一（这是我的类型）。问题是已经统一了，所以不能统一。我以错误告终。我认为这应该通过某种形式的更高级别的类型来解决，但我无法弄清楚应该如何写。谁能帮我一把？`DIM1``dataLat``r``D``r``L``D``L``Couldn't match expected type`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T23:48:43.423

```
Try {-# LANGUAGE NoMonomorphismRestriction #-} 
```

[http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/monomorphism.html](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/monomorphism.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T20:58:51.297

你可以给`dataLat`一个类型说它返回一个多态函数，使用`Rank2Types`.

```
newtype Unboxer =
  Unboxer {applyUnboxer :: forall repr. Load repr DIM1 Double => Array repr DIM1 Double -> Array U DIM1 Double}

dataLat :: (Unboxer, Array U DIM1 Double) 
```

的主体`dataLat`必须将多态函数放入`Unboxer`. 字段访问器 ,`applyUnboxer`返回一个可用于不同类型的多态函数。

我不清楚您是否真的需要 2 级类型。由于`dataLat`不带参数，您可以将拆箱器定义为具有普通 rank-1 多态性的全局函数。

准确地说，将一个类型变量与多种类型统一起来是没有意义的。`r`与`U`and统一`D`就等于说`r == U`and `U == D`，这是错误的。上面的代码允许将一个函数*实例化为*多种类型。将实例化视为在分配类型之前制作代码的副本，因此您拥有函数 where 的一个实例`r₁ == U`和一个单独的实例 where `r₂ == D`。

# python - argparse 解析其他选项后调用函数

> ID：13591097
> 
> 赞同：5
> 
> 时间：2012-11-27T18:55:50.280
> 
> 标签：python, python-2.7, argparse

目前，我正在使用 argparse 解析参数并将标志存储为布尔选项。然后我检查哪个标志设置为 true 并执行该函数。Argparse 解析一个输入文件，该文件被打开并作为参数传递给被调用的函数。

所以：

```
parser.add_argument('input_data', action='store', help='some help')
parser.add_argument('outputname', action='store',default=None, help='some help')
parser.add_argument('--flag','-f', action='store_true', dest='flag', default=False, help='help!') 
```

在调用标志函数之前，我必须打开 input_data 以从中读取一些信息。这目前实现为：

```
if args.flag == True:
    array_out = flag(array_read_from_input)
    if args.outputname == None:
        name = 'Flag.tif' 
```

可以将[argparse 子类](https://stackoverflow.com/questions/3454934/using-the-argparse-output-to-call-functions)化以使 action 关键字调用函数。

是否可以解析 input_data 选项，执行一些处理，然后调用标志函数，而无需为每个参数嵌套 if 循环，例如，通过子类化 argparse 的 action 参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:55:53.793

> 是否可以解析 input_data 选项，执行一些处理，然后调用标志函数，而无需为每个参数嵌套 if 循环，例如，通过子类化 argparse 的 action 参数？

根据你的问题；

```
class FooAction(argparse.Action):
    def __call__(self, parser, namespace, values, option_string=None):
        << some processing of values >>
        array_out = flag(values)
        setattr(namespace, self.dest, array_out)

parser = argparse.ArgumentParser()
parser.add_argument('input_data', action=FooAction, help='some help') 
```

# javascript - 在 jquery 中获取 php 服务器时间的最佳方法

> ID：13591102
> 
> 赞同：0
> 
> 时间：2012-11-27T18:56:16.890
> 
> 标签：javascript, jquery

我正在使用这个日历构建一个网络应用程序。
[基于jquery的完整日历](http://arshaw.com/fullcalendar/) 这个日历基于jquery，jquery是客户端代码，所以它在客户端时间工作。我希望这个日历使用我的php服务器时间来完成它的整个工作。那么这将是最好的方法。

1.  每次加载此日历后，我是否应该获取服务器时间并使用该时间对其进行计数。
2.  或者我应该每 57 秒与服务器同步一次并获取服务器时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:03:52.950

你应该看看[这个问题](https://stackoverflow.com/q/5522191/677526)- 它应该有很多关于你关于同步时间的问题的有用信息。

也就是说，请考虑您的应用程序如何扩展和从那里工作。每分钟一个请求很容易增加一个不容易处理的负载。

如果您只是想让人们在未来的时间/日期安排事件，您真的需要实时同步时间事件吗？如果这是用于日历，您真的只需要确保客户的时间在小时和分钟级别上与您的时间相匹配，并且日期相同。之后，您可以依赖客户的时间，除非您按秒进行安排。（话说回来，我不知道这个日历是干什么用的……）

此外，如果您要保存他们的事件服务器端，我不确定以您正在考虑的方式同步时间对您有什么好处。如果您希望在有人进行更改时立即将更新推送到所有日历，您可能会寻找其他方法来做到这一点。

祝你好运 - 我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:52:13.210

让您的用户选择一个时区并使用您从服务器获得的 UTC 时间计算他们的时间。据我所知，大多数网站都使用这个系统。

# c# - ASP.NET MVC 3 在 JS 中获取编辑器 ID 和名称

> ID：13591103
> 
> 赞同：4
> 
> 时间：2012-11-27T18:56:16.673
> 
> 标签：c#, asp.net-mvc-3, razor

我想知道是否有可能获取生成元素的 HTML 属性“ID”，链接 ASP.NET Web Forms Field.ClientID。

所以我想要完成的是在 JavaScript 中获取 id 。目前我正在使用表单验证器，所以我有

剃刀模板

```
@Html.TextEditorFor(m => m.aspnet_Membership.Email); 
```

然后 JS 进行验证

```
$('#MyForm').validate({
   rules : {
      //and this is the part where I need email ID
      //I can do this by manually typing aspnet_Membership_Email
      //but I'm asking is there a way to get it like 
      @Html.GetElementID(m => m.aspnet_Membership.Email): {
        required: true,
        email: true
     }
   }
}); 
```

有很多字段，所以我需要这个以避免用户输入错误，如 apsnet .....

**记住 JS 在模板中。**不在外部 js 文件中。（我不是初学者:)）

> 请不要只关注 Validator，我已将其添加为示例。如果我为表单中的每个字段添加将来的前缀以便在页面上具有唯一的 ID，那么如果字段 ID 是固定的，我会遇到修复我的 js 的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:15:57.670

助手[IdFor](http://msdn.microsoft.com/en-us/library/hh833709%28v=vs.108%29.aspx)可以帮助您完成此任务：

```
@html.IdFor(m => m.aspnet_Membership.Email) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:27:09.447

我会编写自己的扩展方法：

```
public static class Helper
{
    public static MvcHtmlString GetElementID<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
    {
        return MvcHtmlString.Create(GetPropertyName(expression));
    }

    private static string GetPropertyName(Expression lambdaExpression)
    {
        IList<string> list = new List<string>();
        var e = lambdaExpression;

        while (true)
        {
            switch (e.NodeType)
            {
                case ExpressionType.Lambda:
                    e = ((LambdaExpression)e).Body;
                    break;
                case ExpressionType.MemberAccess:
                    var propertyInfo = ((MemberExpression)e).Member as PropertyInfo;
                    var prop = propertyInfo != null
                                      ? propertyInfo.Name
                                      : null;
                    list.Add(prop);

                    var memberExpression = (MemberExpression)e;
                    if (memberExpression.Expression.NodeType != ExpressionType.Parameter)
                    {
                        var parameter = GetParameterExpression(memberExpression.Expression);
                        if (parameter != null)
                        {
                            e = Expression.Lambda(memberExpression.Expression, parameter);
                            break;
                        }
                    }
                    return string.Join("_", list.Reverse());
                default:
                    return null;
            }
        }
    }

    private static ParameterExpression GetParameterExpression(Expression expression)
    {
        while (expression.NodeType == ExpressionType.MemberAccess)
        {
            expression = ((MemberExpression)expression).Expression;
        }
        return expression.NodeType == ExpressionType.Parameter ? (ParameterExpression)expression : null;
    }
} 
```

以及导致**aspnet_Membership_Email**的用法：

```
@Html.GetElementID(m => m.aspnet_Membership.Email); 
```

这为您提供了基于 lambda 表达式的串联属性链。基本上它类似于`@Html.IdFor`MVC4 中的实现（但是我不检查它们的实现）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:15:26.373

我认为您对 ID 生成逻辑进行了封装，尽管它相对简单。您的 Html 帮助器想法似乎是一种有效的方法（而不是说，在模型中公开一堆 ID 值和字段值）。

但是，我很好奇您为什么不使用不显眼的验证功能并让它为您生成验证器？

如果您将 [Required] 属性添加到您的 Email 属性并在页面中包含不显眼的验证器 javascript，那么您现在正在喝 pina coladas。

在您的模型中：

```
[Required]
[Display(Name = "First Name")]
[RegularExpression("([\r-~])*", ErrorMessageResourceType = typeof (AccountMessages),
    ErrorMessageResourceName = "FormFieldInvalid")]
[StringLength(50)]
public string FirstName { get; set; } 
```

在您的标记中：

```
@Html.LabelFor(model => model.User.FirstName)
@Html.TextBoxFor(model => model.User.FirstName)  
@Html.ValidationMessageFor(model => model.User.FirstName, null, new { @class = "errorMessageField" }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T19:27:50.347

框架用来构建名称的类（不是每个 ID）是一个静态类`ExpressionHelper`，它在 MVC3 中是可公开访问的。它有一个名为的函数`GetExpressionText`，它接受一个 lambda。话虽如此，您必须制作自己的 IdFor 包装器才能从中获取所需的语法。

这是 MVC4 中存在的类：

```
public static class NameExtensions
{
    public static MvcHtmlString Id(this HtmlHelper html, string name)
    {
        return MvcHtmlString.Create(html.AttributeEncode(html.ViewData.TemplateInfo.GetFullHtmlFieldId(name)));
    }

    [SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
    [SuppressMessage("Microsoft.Design", "CA1011:ConsiderPassingBaseTypesAsParameters", Justification = "Users cannot use anonymous methods with the LambdaExpression type")]
    public static MvcHtmlString IdFor<TModel, TProperty>(this HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression)
    {
        return Id(html, ExpressionHelper.GetExpressionText(expression));
    }

    public static MvcHtmlString IdForModel(this HtmlHelper html)
    {
        return Id(html, String.Empty);
    }

    [SuppressMessage("Microsoft.Naming", "CA1719:ParameterNamesShouldNotMatchMemberNames", MessageId = "1#", Justification = "This is a shipped API.")]
    public static MvcHtmlString Name(this HtmlHelper html, string name)
    {
        return MvcHtmlString.Create(html.AttributeEncode(html.ViewData.TemplateInfo.GetFullHtmlFieldName(name)));
    }

    [SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
    [SuppressMessage("Microsoft.Design", "CA1011:ConsiderPassingBaseTypesAsParameters", Justification = "Users cannot use anonymous methods with the LambdaExpression type")]
    public static MvcHtmlString NameFor<TModel, TProperty>(this HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression)
    {
        return Name(html, ExpressionHelper.GetExpressionText(expression));
    }

    public static MvcHtmlString NameForModel(this HtmlHelper html)
    {
        return Name(html, String.Empty);
    }
} 
```

# c# - StringBuilder 与 PadLeft/Right OutOfMemoryException 一起使用

> ID：13591110
> 
> 赞同：2
> 
> 时间：2012-11-27T18:56:33.490
> 
> 标签：c#, stringbuilder, string-concatenation

所有，`Append`当我为固定文本文件生成单行时，我正在执行以下操作

```
formattedLine.Append(this.reversePadding ?
                     strData.PadLeft(this.maximumLength) :
                     strData.PadRight(this.maximumLength)); 
```

此特定异常发生在`PadLeft()`where [从 SQL Server 收集`this.maximumLength = 1,073,741,823`的字段长度] 上。在异常时，为什么会发生这种情况。我应该有一个最大允许长度？`NVARCHAR(MAX)``formattedLine = "101102AA-1"``2,147,483,647`

*我想知道[https://stackoverflow.com/a/1769472/626442](https://stackoverflow.com/a/1769472/626442)是否是这里的答案 - 但是，我正在通过`Dispose()`对任何一次性对象的适当调用来管理任何内存，并`using`在可能的情况下阻止。*

笔记。此固定文本导出是在后台线程上完成的。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:57:47.040

> 这个特殊的异常发生在 PadLeft() 上，其中 this.maximumLength = 1,073,741,823

对。因此，您正在尝试创建一个包含十亿多个字符的字符串。

那是行不通的，我*非常*怀疑这是你真正想做的事情。

请注意，`char`.NET 中的每个都是两个字节， .NET 中的字符串*也是*以空值结尾的......并且在数据之外还有一些其他字段（长度，一个）。这意味着您至少需要 2147483652 字节 + 对象开销，这会使您超过每个对象 2GB 的限制。

如果您在 64 位版本的 Windows 上运行，在 .NET 4.5 中，有一个特殊的 app.config 设置[`<gcAllowVeryLargeObjects>`](http://msdn.microsoft.com/en-us/library/hh285054%28v=VS.110%29.aspx)允许大于 2GB 的数组。但是，我认为这不会改变您的特定用例：

> 在应用程序配置文件中使用此元素可启用大小超过 2 GB 的数组，但不会更改对象大小或数组大小的其他限制：
> 
> *   数组中的最大元素数是 UInt32MaxValue。
>     
>     
> *   对于字节数组和单字节结构的数组，任何单个维度的最大索引为 2,147,483,591 (0x7FFFFFC7)，其他类型的最大索引为 2,146,435,071 (0X7FEFFFFF)。
>     
>     
> *   字符串和其他非数组对象的最大大小不变。

无论如何，您想在创建这样的字符串后做什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:57:44.943

为了为此操作分配内存，操作系统必须找到足够大的*连续内存来执行操作。*

内存碎片可能导致这是不可能的，尤其是在使用 32 位 .NET 实现时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:14:23.143

我认为可能有更好的方法来完成您要完成的工作。据推测，这`StringBuilder`将被写入一个文件（这就是您的描述听起来的样子），显然，您还可能处理大型（巨大）数据库记录。

您可能会考虑一种流式方法，它不需要分配如此巨大的内存块。为此，您可以调查以下内容：

该类`SqlDataReader`公开了一个`GetChars()`方法，该方法允许您读取单个大记录的一块。然后，而不是使用 a `StringBuilder`，也许使用 a `StreamWriter`（或其他`TextWriter`派生类）将每个块写入输出。这将只需要一次在应用程序的内存空间中拥有一个充满记录的缓冲区。祝你好运！

# excel - 使用 Excel VBA 删除除最近 5 个以外的日志文件

> ID：13591115
> 
> 赞同：0
> 
> 时间：2012-11-27T18:57:11.697
> 
> 标签：excel, vba

我的 Excel VBA 工作表在目录中创建日志。目前，由于我没有删除它们，因此日志不断增加。

但是，现在我只想保留最近的 5 个。我的日志是使用如下文件名创建的：

`<worksheet_name>_YYYYMMDD_HH_MM_SS.log`

我目前做这项工作的方法是将这些日志放入一个数组中，对数组进行排序，并只保留前 5 个。

我的问题是：有没有人有更好的方法来只保留最近的 5 个日志文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:10:55.557

这听起来像是一个可行的解决方案。使用 FileSystemObject 库收集所有日志文件，然后循环遍历它们。

一种选择：您可以尝试根据创建日期或修改日期进行删除，即如果文件是在 x 天前创建的，则将其删除。

另外，我不知道这些文件有多重要，但您可能只想将它们移动到名为 Archive 的文件夹中，而不是直接删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:59:02.693

我们不久前使用的一个系统是保留例如 5 个带有“间隙”的日志文件。因此，您将创建前 5 个日志文件：

文件：1,2,3,4,5

然后，在第 6 天，你的差距是 6，所以创建 6 并删除 1

文件：,2,3,4,5,6

差距现在是 1。所以第二天，创建 1，删除 2

文件：1, ,3,4,5,6

差距现在是 2。所以第二天，创建 2，删除 3

文件：1,2, ,4,5,6

等等等等，即“寻找差距”*，用新文件填充它，然后删除它后面的那个。

只是一个想法。

_*（是的，这是一个关于伦敦地铁的坏笑话）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T14:45:04.533

尽管这是一个老问题，但由于我需要这个确切的解决方案，我想我会在这里添加它。此代码假定文件名以可通过字符串比较排序的内容结尾，因此可能是 SomeName_YYYY-MM-DD 格式的文件。也可以包含 24 小时时间戳。此过程不会重命名任何文件，因此任何增量数字方案都需要由其他代码仔细管理（即您要在文件名中添加 _1、_2 等）。

请注意，此解决方案利用了比数组更好地服务于此目的的集合。

```
Public Sub CleanBackups(filePathAndBaseName As String, fileExtension As String, maxCopiesToKeep As Integer)
'
'   Calling Example
'       CleanBackups "C:\Temp\MyLog", ".txt", 5
'
'       The above example would keep only the 5 versions of the file pattern "C:\Temp\MyLog*.txt"
'         that are "LARGEST" in terms of a string comparison.
'       So if MyLog_1.txt thru MyLog_9.txt exist, it will delete MyLog_1.txt - MyLog_4.txt
'         and leave MyLog_5.txt - MyLog_9.txt
'       Highly recommend using pattern MyLog_{YYYY-MM-DD_HhNn}.txt

    Dim pathOnly As String
    Dim foundFileName As String
    Dim oldestFileIndex As Integer
    Dim iLoop As Integer

    Dim fileNameCollection As New Collection

    pathOnly = Left(filePathAndBaseName, InStrRev(filePathAndBaseName, "\"))
    foundFileName = Dir(filePathAndBaseName & "*" & fileExtension, vbNormal)

    Do While foundFileName <> ""
        fileNameCollection.Add foundFileName
        foundFileName = Dir
    Loop

    Do While fileNameCollection.Count > maxCopiesToKeep
    ' Find oldest file, using only the name which assumes it ends with YYYY-MM-DD and optionally a 24-hour time stamp
        oldestFileIndex = 1

        For iLoop = 2 To fileNameCollection.Count
            If StrComp(fileNameCollection.Item(iLoop), fileNameCollection.Item(oldestFileIndex), vbTextCompare) < 0 Then
                oldestFileIndex = iLoop
            End If
        Next iLoop

        Kill pathOnly & "\" & fileNameCollection.Item(oldestFileIndex)
        fileNameCollection.Remove oldestFileIndex
    Loop

End Sub 
```

# php - 如何添加菜单项特定参数并在 joomla 2.5 菜单上阅读它们？

> ID：13591116
> 
> 赞同：2
> 
> 时间：2012-11-27T18:57:12.147
> 
> 标签：php, joomla, joomla-component

我在 joomla(2.5) 上进行了一些编程，并创建了一个组件，效果很好，现在我发现了一个问题......我需要该组件接收一个参数（来自 joomla 的菜单）并指示一个值，然后用那个值我会计算一些东西（比如模块的参数）。

所以，经过搜索，我找到了这个文档

[http://docs.joomla.org/Component_parameters](http://docs.joomla.org/Component_parameters)

这很好（如果可以的话），但我有一个问题..我无法添加任何参数，我复制并粘贴了 XML 的代码，我应该在其中设置我的参数字段......但不起作用，我试过了使用我用于模块的字段，它确实出现了，但我无法阅读它们......

知道怎么做吗？

这是我的xml。

```
<metadata>
  <state>
    <params>
    <param name="mytextvalue" type="text" default="Some text" label="Enter some text" description="" size="10" />
    </params>
  </state>
</metadata> 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:11:30.107

参数已从 1.6 及以上的 joomla 版本中删除。因此您必须改用 fieldset 和 field。 [关于不同的领域](http://docs.joomla.org/Standard_form_field_types)

希望这对您有所帮助- [创建新菜单项时如何为 joomla 组件创建新选项](https://stackoverflow.com/questions/13416547/creat-new-options-to-joomla-component-when-creating-new-menu-item/13416802#13416802)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T21:39:55.717

创建一个名为的文件`config.xml`并将其添加到：

```
<?xml version="1.0" encoding="utf-8"?>
<config>
    <fieldset name="settings" label="Configuration Settings" description="Description Goes Here">
        <field name="mytextvalue" type="text" default="Some text" label="Enter some text" description="" size="10" />       
    </fieldset>
</config> 
```

要查看参数，请在**view.html.php**文件中添加`JToolBarHelper::preferences('com_yourcomponentname');`显示函数。这将在后端组件的工具栏上添加一个名为“选项”的按钮。点击查看参数。

# php - 运行 PHP cronjob 超过 15 分钟

> ID：13591117
> 
> 赞同：2
> 
> 时间：2012-11-27T18:57:13.930
> 
> 标签：php, .htaccess, amazon-web-services, crontab

我参与了亚马逊产品广告 API，他们在条件条款中说，我必须至少每小时更新一次数据。好的，您认为没问题，轻松批量更新 mysql db 中的 800 个对象。但还有一点：我只能每秒进行 1 次 Amazon 查询，所以我想使每个查询超时，这将使 php 执行持续大约 15 分钟。所以这对我来说是个问题，因为我的提供商为 php 脚本配置了 20 秒的最大执行时间，我无法更改它。

所以我想到了将php脚本http重定向到自身。到现在为止再次没有问题。但现在的问题是：我想要 htaccess-password-protect 脚本，我的 cronjobs 提供者可以处理 htaccess pw 保护。如果没有任何保护，这将是不安全的，因为如果脚本被滥用，可能会有一些繁重的数据库流量。

问题：是否可以使用 php 登录到 htaccess 登录对话框，因为没有人类可以进行登录过程？或者你有其他解决这个问题的想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:20:56.317

解决您最初的问题：[执行时间](http://php.net/manual/en/function.set-time-limit.php)

有两个地方可以设置。

1.  **配置**- 您显然无法访问或更改

2.  **运行时**- 我不知道有任何可能禁止更改运行时的最大执行时间

在您的脚本中将此添加到顶部。`set_time_limit`将您的执行时间设置为无限，所有其他整数值以秒为单位

```
<?php
set_time_limit(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T19:51:14.643

解决您的第二个问题：以编程方式提供 http auth 凭据

这只是为感兴趣的读者准备的，我认为（希望你）在这种情况下不需要这个

我将发送原始 HTTP，以便可以将其用于能够打开 tcp 套接字连接的各种客户端和语言

我的来源：[基本访问身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication#Protocol)

```
<?php
$username = 'myuser';
$password = 'mypass';

// computing authorization digest
$httpAuthDigest = base64_encode( "{$username}:{$password}" );

// connecting to the remote server
$fp = fsockopen( 'www.zappos.com', 80, $errno, $errstr, 60 );
if (!$fp) {
    die( "{$errstr} ({$errno})\n" );
}

// send headers
fputs( $fp, "HEAD /womens-clothing HTTP/1.1\r\n" );
fputs( $fp, "Host: www.zappos.com\r\n" );
fputs( $fp, "Authorization: Basic {$httpAuthDigest}\r\n" );
fputs( $fp, "Connection: close\r\n" );
fputs( $fp, "\r\n" );

// receive result ( optional )
while (!feof($fp)) {
    echo fgets($fp, 128);
}
fclose($fp); 
```

这返回了我所知道的最令人兴奋的响应标头 :)

```
HTTP/1.1 200 OK
Server: nginx/1.1.17
Content-Type: text/html; charset=utf-8
X-ZFC-Metadata: KjYIExIJCgNuaWQSAjQ1EhYKBmxheW91dBIMdGhyZWVfY29sdW1uEg8KA3pjMRIIQ2xvdGhpbmc=
X-Powered-By: Ponies!
X-Varnish-TTL: 60m
X-Varnish: 248743314 248742997
X-Cache-Hits: 4
X-Varnish-Host: varnish04.zappos.net
X-Varnish-ID: drupal
X-Core-Value: 5\. Pursue Growth and Learning
X-Recruiting: If you're reading this, maybe you should be working at Zappos instead.  Check out jobs.zappos.com
X-UUID: 9dc901f6-38ca-11e2-be29-00145e157f03
Cache-Control: max-age=3085
Date: Tue, 27 Nov 2012 19:50:38 GMT
Connection: close 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T18:56:09.860

OP表示，尽管将配置覆盖为无限制，但在特定时间后他仍然超时`max_execution_time`，这是根据`phpinfo()`

认为`worker script`通过浏览器调用 a 是不好的做法。这可能会导致无法控制的状态并导致其他问题，就像您现在遇到的问题一样 - 除了当其他人将 URL 掌握在他手中时可能导致的问题之外。

另外 - 在浏览器中手动执行每小时导入非常不舒服，不是吗？

您的问题是，不是 php 因超时而停止执行，而是网络服务器。你说你不传递任何 GET 或 POST 参数。只需在命令行上的 php-cli 上运行它

```
php yourscript.php 
```

所有输出都将记录到控制台。如果您愿意，可以将其写入这样的日志文件

```
php yourscript.php > log.txt 
```

这仍然不会自动执行任何操作。在任何 unix 上，您都可以轻松地设置一个 cronjob 在所需的时间和间隔为您完成这项工作

例如

```
crontab -e 
```

编辑您配置的 cronjobs

```
* */2 * * * /usr/bin/php /yourpath/yourscript.php > ~/yourlog.txt 2>/dev/null 
```

这将每两个小时运行一次并将您的脚本输出记录到`~/yourlog.txt`，将错误重定向到`/dev/null`

检查此以了解计划表的工作原理 [http://www.adminschoice.com/crontab-quick-reference](http://www.adminschoice.com/crontab-quick-reference)

我还建议将您的脚本移出您的网络服务器`document root`，以便不再从网络上访问它。

# php - 获取 html 输入元素的值作为 php 字符串

> ID：13591126
> 
> 赞同：2
> 
> 时间：2012-11-27T18:57:40.840
> 
> 标签：php, regex, html-parsing

我有一个 html 文件作为 php 中的字符串加载，我需要获取 HTML 字符串中输入元素的值。有人可以帮我构建一个函数，该函数采用输入元素的名称并返回其值吗？

这是我想做的功能的一个例子：

```
function getVal($name){

    $htmlStr = "<form action = \"action.php\"><input type=\"hidden\" name=\"command\" value=\"123456\">
                <input type=\"hidden\" name=\"quantity\" value=\"1\">
                <input type=\"hidden\" name=\"user_mode\" value=\"1\">
                <input type=\"hidden\" name=\"stock\" value=\"-1255303070\">
                <input type=\"hidden\" name=\"id\" value="429762082">
                <input type=\"hidden\" name=\"pidm\" value=\"2\"></form>";

            // I'd like to get the value of $name here probably using preg_match     

            return $value; //returns 123456

        } 
```

$val = getVal("命令"); //val 应该是 123456。

任何伊达斯？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T19:03:08.477

这是一个使用 DOM 的示例：

```
$html = "<form action = \"action.php\">
  <input type=\"hidden\" name=\"command\" value=\"123456\">
  <input type=\"hidden\" name=\"quantity\" value=\"1\">
  <input type=\"hidden\" name=\"user_mode\" value=\"1\">
  <input type=\"hidden\" name=\"stock\" value=\"-1255303070\">
  <input type=\"hidden\" name=\"id\" value=\"429762082\">
  <input type=\"hidden\" name=\"pidm\" value=\"2\">
</form>";

$document = new DOMDocument();
$document->loadHTML($html);

$inputs = $document->getElementsByTagName("input");

foreach ($inputs as $input) {
  if ($input->getAttribute("name") == "id") {
    $value = $input->getAttribute("value");
  }
}

echo $value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:05:50.740

在 a 中加载 HTML [`DOMDocument`](http://php.net/domdocument)，然后一个简单的 XPath 查询就可以解决问题：

```
$xpath = new DOMXPath($domDocument);
$items = $xpath->query('//*[@name="command"]/@value');
if ($items->length)
    $value = $items->item(0)->value; 
```

# com - 创建无 reg 的托管 COM 对象时，如何让 CLR 查看与主应用程序的可执行文件不同的目录？

> ID：13591131
> 
> 赞同：5
> 
> 时间：2012-11-27T18:57:51.713
> 
> 标签：com, clr, .net-assembly, activation-context-api

这是一个复杂的问题，涉及与 COM、CLR 和无注册 COM 相关的一些神秘领域。

首先，我的主要应用程序是用 python 编写的。因此，它的代码库（开发中）位于 C:\mainapp\main.py。

当然，在windows上，执行程序的是C:\Python27\python.exe。

我现在想使用 python 中的无注册 COM（使用 win32com）与我控制的用 C# 编写的 COM 对象对话（使用 IDispatch），该对象位于 C:\mainapp\ManagedCOMObject.dll

* * *

注意：如果您不会说 python / pythoncom，请注意对 Dispatch() 的调用最终归结为 CoCreateInstance()。

* * *

# 尝试 1

```
#main.py:

import win32com.client
CLSID_ManagedComObject_MyClass = "{zzzzz....}" #This is correct
myclass = win32com.client.Dispatch(CLSID_ManagedComObject_MyClass) 
```

## 结果

失败，因为对象不在注册表中（如预期的那样），而且我没有提到任何关于清单文件的内容，python.exe 的清单显然不知道我的对象。

* * *

# 尝试 2

```
#main.py:

ac = ActivationContext("C:\mainapp\myapp.manifest", asm_dir="C:\mainapp")
with ac.activate():
    #The above two lines fill in a ACTCTX structure, call CreateActCtx, and call ActivateActCtx 
    import win32com.client
    CLSID_ManagedComObject_MyClass = "{zzzzz....}" #This is correct
    myclass = win32com.client.Dispatch(CLSID_ManagedComObject_MyClass) 
```

-

```
#myapp.manifest:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <assemblyIdentity type="win32" 
                name="My.Main.App" 
                version="1.0.0.0" 
                processorArchitecture="x86" 
    />
    <dependency>
        <dependentAssembly>
            <assemblyIdentity
                        name="ManagedComObject" 
                        version="1.0.0.0" 
                        processorArchitecture="msil" 
            />
        </dependentAssembly>
    </dependency>
</assembly> 
```

请注意，ManagedCOMObject 有一个嵌入式清单，它使用 clrClass 标记声明 COM 对象。

## 结果

ActicateActCtx 调用成功并正确解析了 myapp.manifest 和 ManagedComObject.dll 的清单 - 我使用 sxstrace.exe 验证了这一点。

在探测 C:\Python27\ManagedComObject.dll 后，对 CoCreateInstance 的调用失败并出现 FileNotFound。融合日志声称 PrivatePath 未设置（推测是因为 python.exe.config 不存在），并且根本没有在 C:\mainapp 中查找 C# 对象。

# 问题

1.  为什么会失败？我相信这是因为 CLR COM 加载程序存根无法导入我的 C# 程序集。如果在这一步之前失败，CLR 甚至不会加载，所以它正在探测和创建融合日志这一事实让我相信这是因为 CLR 找不到 ManagedCOMObject.dll。

2.  请注意，CLR 已加载 - 我相信这意味着 COM 已成功查看当前激活上下文以找到注册。我不确切知道 clrClass 在清单中做了什么，但大概它成功加载了 CLR。

3.  我现在假设问题是 CLR 在加载程序集时没有注意 ActCtx。如果我正在编写托管代码，我可以挂接到 AppDomain.CurrentDomain.AssemblyResolve 事件并自己找到 DLL。由于我正在编写非托管代码，并且仅隐式托管 CLR，我可以以某种方式更改我的应用程序 PrivatePath 和/或如何探测程序集吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:21:32.003

> 我现在假设问题是 CLR 在加载程序集时没有注意 ActCtx

对，那是正确的。CLR 有自己的策略来定位不受 Windows 激活上下文影响的程序集。默认情况下，它只在 GAC 中查找，然后在 EXE 的私有 bin 路径中查找。您可以使用 Fuslogvw.exe 实用程序看到这一点。

你在这里没有很多很好的选择。在 GAC 中安装程序集是显而易见的解决方案，并且通常适用于 [ComVisible] 程序集，因为它有助于解决 COM DLL Hell 问题。您唯一可以做的是将其复制到 C:\Python27 目录或在同一目录中写入 python.exe.config 文件，将探测路径更改为 C:\Python27 的子目录。两者都不能很好地扩展。自己托管 CLR 或编写 AppDomain.AssemblyResolve 事件处理程序是不可能的。

如果您想避免 Regasm.exe /codebase，使用 GAC 是合适的解决方案

# jquery - jsdom和jquery修改dom元素的css样式

> ID：13591136
> 
> 赞同：1
> 
> 时间：2012-11-27T18:58:30.917
> 
> 标签：jquery, node.js, jsdom

我一直在我的 node.js 服务器上使用 jdom 和 jquery，并通过以下代码观察到以下奇怪行为：

```
var divs = window.$('div').each(function() {
              //console.log(" -", $(this));
              $(this).css('background-color','green');
              $(this).addClass('sel');
              this.style.backgroundColor = "green";
            }); 
```

我尝试使用我能想到的所有方式在 html 页面上的 div 中添加一些样式（背景颜色为绿色）。以上所有尝试（我也一一尝试，看看是否有任何一个独立工作）产生了相同的结果，相当于：`<div id="somedivid" style="">`

我想知道这是否是一个错误，因为它不会向其中写入任何样式（引号内始终为空），但如果您检查原始文档，则在这些 div 之前没有样式属性时添加样式属性。将我在页面顶部手动创建的类 sel 添加到自定义 css 样式块中确实可以工作，但是，就像您认为的那样。问题是我真的希望能够在使用 jsdom 时动态更改单个对象的样式。如果这是一个错误或者我忽略了什么，任何人都有任何想法？

顺便说一句，这段代码在运行标准 jquery 的普通浏览器中也能正常工作，就像预期的那样，所以它似乎很可能是 jsdom 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:13:49.407

你错过了一种方法......也许这个方法有效：

```
this.setAttribute('style', 'background-color: green;'); 
```

或者：

```
this.setAttribute('class', 'sel'); 
```

如果之前已经定义了“sel”类，则为后者。

如果它有效，则可能意味着“jsdom”没有序列化当前计算的样式，而只是解析的样式（在 HTML 标记中）。我相信这是预期的行为。

# asp.net - 使用来自另一个页面的参数过滤 EntityDataSource

> ID：13591144
> 
> 赞同：1
> 
> 时间：2012-11-27T18:59:18.573
> 
> 标签：asp.net, ado.net-entity-data-model, entitydatasource

我有两个页面，一个包含所有产品列表的母版页和一个单独的详细信息页面，显然包含有关所述产品的所有详细信息。

在母版页中，我有一个网格视图，通过单击任何特定行的链接标签，应显示其他页面（详细信息页面），其中包含基于 id 的信息。

*DataNavigateUrlFields：ID DataNavigateUrlFormatString：EmployeeFinanceDetailsPage.aspx?id={0}*

这是我添加到链接标签的内容，试图将 id 发布到详细信息页面。顺便说一句，我使用的是纯实体数据源。我的实体数据模型已配置并正常工作。

在我的详细信息页面中，我有一个配置了数据源的表单视图，如下所示。

```
<asp:EntityDataSource ID="EntityDataSource1" runat="server" ConnectionString="name=sspEntities" DefaultContainerName="sspEntities"
EnableDelete="True" EnableFlattening="False" EnableInsert="True"
EnableUpdate="True" EntitySetName="Employee_Financial"
EntityTypeFilter="" Select="" Where="" AutoGenerateWhereClause="True">
WhereParameters> <asp:FormParameter DbType="Int32" DefaultValue="0"
FormField="ID" Name="ID" /> </WhereParameters>
</asp:EntityDataSource> 
```

由于某种原因，此页面一直显示为空白，我不知道我做错了什么。我什至尝试删除 AutoGenerateWhereClause 但我仍然得到相同的结果。我究竟做错了什么？提前感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:37:48.250

您使用的是[`FormParameter`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formparameter.aspx)，但在查询字符串中传递了 ID。换一个试试[`QueryStringParameter`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.querystringparameter.aspx)。

```
<WhereParameters>
   <asp:QueryStringParameter 
      DbType="Int32" 
      DefaultValue="0"
      QueryStringField="ID" 
      Name="ID" 
   /> 
</WhereParameters> 
```

# java - 将公式转换为 Java

> ID：13591145
> 
> 赞同：2
> 
> 时间：2012-11-27T18:59:29.000
> 
> 标签：java, math

我想采用这个公式：

![公式](../Images/12d10ec44a0080656315710baf1e31b5.png)

并将其转换为java代码。我不认为下面的代码是正确的，因为我认为我得到了错误的结果。

```
return (int)(2 * a * b + Math.pow(a, 2) * (1 - 2 * b)); 
```

这是我正在使用的原始图像：http: [//images2.fanpop.com/images/photos/4800000/Beach-beaches-4843817-1280-800.jpg](http://images2.fanpop.com/images/photos/4800000/Beach-beaches-4843817-1280-800.jpg)

a = 图片链接的反转
b = 图片链接

以下是我期望的输出结果（PhotoShop）：

![预期结果](../Images/97940eb821a4560318c568ea12f180bb.png)

这就是我的输出实际的样子（我的应用程序）：

![实际结果](../Images/da4b734d5be3b602959a6774245342cb.png)

```
Invert inv = new Invert();
inv.setStage(stage);
inv.setParent(this);
BufferedImage img = inv.filter();
int[] invPixels = new int[stage.width * stage.height];
img.getRGB(0, 0, stage.width, stage.height, invPixels, 0, stage.width);
for(int i = 0; i < ImageSync.originalPixels.length; i++){
    int fg = invPixels[i];
    int bg = ImageSync.originalPixels[i];
    int color = Blends.softLight(fg, bg);
    invPixels[i] = color;
}
img = new BufferedImage(stage.width, stage.height, BufferedImage.TYPE_INT_ARGB);
img.setRGB(0, 0, stage.width, stage.height, invPixels, 0, stage.width);
Preview.setImage(img);
stage.preview = Preview.getImage();
this.repaint(); 
```

柔光：

```
public static int softLight(int background, int foreground){
    return (2 * background * foreground) + ((background * background) * (1 - 2 * foreground));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:01:47.407

尝试简单的计算：

```
return (2 * a * b ) + (a * a * (1 - 2 * b)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:05:44.247

代码是正确的。但是您将结果类型转换为 int 可以改变结果。id 建议使用双精度或浮点数。

重要的是：确保 a & b 也是浮点数或双精度数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:13:56.560

```
int result = (2*a*b)+((a*a)*(1-(2*b))); 
```

正如@shippy 所说，确保`a`and `b`are `int`.

# breeze - Breeze 0.73.3 在保存后无法正确发布 hasChanges

> ID：13591148
> 
> 赞同：4
> 
> 时间：2012-11-27T18:59:47.030
> 
> 标签：breeze

使用微风 0.73.3。基于 John Papa 的 Breeze 版本的 Code Camper 为我的应用程序建模 - [http://www.johnpapa.net/recent-presentation-on-spa-basics/](http://www.johnpapa.net/recent-presentation-on-spa-basics/)。manager.hasChanges 似乎有问题。Manager.rejectChanges() 将 hasChanges 发布为 false。Manager.saveChanges() 不会发布对 hasChanges 的任何更改。当然，它应该在成功保存后发布为 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:53:08.940

接得好！这现在已在 v 0.73.6 中修复，可通过 nuget 或微风网站获得。

# c# - System.Net.Mail 不会在生产中发送

> ID：13591149
> 
> 赞同：7
> 
> 时间：2012-11-27T18:59:47.937
> 
> 标签：c#, asp.net-mvc, sql-server-2008

我正在尝试在我的网站中实施“忘记密码”方法。它在调试中完美运行。使用相同的代码和数据库，但发布到我们的 Web 服务器时，它在尝试发送消息时失败。

我得到的错误是：

```
There was an error sending you an email.
The specified string is not in the form required for an e-mail address. 
```

该电子邮件是有效的，所以我不知道它为什么会失败。

因为它是一个实时环境，所以我无法单步执行代码来准确查看失败的位置和原因。我实现了数据库日志记录，所以我可以看到它在失败之前能走多远，并且它成功执行了到目前为止的所有代码：

```
 var smtp = new SmtpClient
 {
     Host = host,
     Port = port,
     EnableSsl = ssl,
     DeliveryMethod = SmtpDeliveryMethod.Network,
     UseDefaultCredentials = false,
     Credentials = new NetworkCredential(fromAddress.Address, fromPw)
 };
 using (var message = new MailMessage()
 {
     Subject = subject,
     Body = body,
     IsBodyHtml = ishtml,
     From = fromAddress
 })

 {
     foreach (MailAddress t in toCol)
     { message.To.Add(t); }
     foreach (MailAddress c in ccCol)
     { message.CC.Add(c); }
     foreach (MailAddress b in bccCol)
     { message.Bcc.Add(b); }
     smtp.Send(message);
 } 
```

它永远不会进入下一个数据库日志记录，所以它必须在这里失败。在我的测试中，我只有一个用于 the 的电子邮件地址，`to`而没有用于`bcc`and的电子邮件地址`cc`。在调试中单步执行时，它会正确加载单个电子邮件地址，并且不会加载任何 for`cc`和`bcc`. 我不知道它认为什么是无效的电子邮件地址。

**编辑：**

我们使用 Google Apps 作为我们的邮件服务器，因此我的工作站和服务器都必须连接。我正在使用以下内容：

*   主机：smtp.gmail.com
*   港口：587
*   EnableSsl：真
*   凭据：在调试中工作的有效用户名和密码

**编辑2：** 纳入您的一些建议。
之前使用数据库中的`fromAddress`值设置，如下所示：

```
DataTable ts = DAL.Notification.GetNotificationSettings();
var fromEmail = ts.Rows[0]["fromadr"].ToString().Trim();
var fromName = ts.Rows[0]["fromname"].ToString().Trim();
var host = ts.Rows[0]["server"].ToString().Trim();
var port = Convert.ToInt32(ts.Rows[0]["smtpport"]);
var ssl = Convert.ToBoolean(ts.Rows[0]["is_ssl"]);
var ishtml = Convert.ToBoolean(ts.Rows[0]["is_html"]);
var bodyTemplate = ts.Rows[0]["bodyTemplate"].ToString();
body = bodyTemplate.Replace("{CONTENT}", body).Replace("{emailFooter}","");// Needs to use the Global emailFooter resource string

var fromAddress = new MailAddress(fromEmail, fromName); 
```

我什至尝试过像这样对发件人地址进行硬编码：

```
message.From = new MailAddress("websystem@mydomain.com"); 
```

我仍然收到错误消息，并且在定义消息时仍然失败。

关于如何查找和解决问题的任何其他建议？

**回答**

我没有像这样在 web.config 中定义默认地址：

```
 <system.net>
     <mailSettings>
       <smtp from="email@yourdomain.com">
         <network host="smtp.yourdomain.com"/>
       </smtp>
     </mailSettings>   </system.net> 
```

所以`var message = new MailMessage()`在我定义正确的`from`地址之前它失败了。

我需要在 web.config 中实现`var message = new MailMessage(From,To)`或提供默认`from`地址（这就是我所做的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:26:17.253

此错误可能是由两件事引起的：

1.  您使用的电子邮件地址之一（for或）无效`message.To`，即它不遵循.`message.CC``message.Bcc``someuser@somedomain.xxx`

2.  *Web.Config*中配置的*From*地址无效：

     *```
    <system.net>
      <mailSettings>
        <smtp from="invalid@@email">
          <network host="smtp.gmail.com"/>
        </smtp>
      </mailSettings>
    </system.net> 
    ```* 

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:09:46.987

我的建议是使用 try/catch 语句来进一步缩小问题范围。我也会暂时丢失`using`MailMessage 的声明，以便于排除故障。

例子：

```
var smtp;
try
{
    smtp = new SmtpClient
    {
        Host = host,
        Port = port,
        EnableSsl = ssl,
        DeliveryMethod = SmtpDeliveryMethod.Network,
        UseDefaultCredentials = false,
        Credentials = new NetworkCredential(fromAddress.Address, fromPw)
    };
}
catch (Exception exc)
{
    MessageBox.Show("Error creating SMTP client: " + exc.Message);
}

var message = new MailMessage();
try
{
    message.Subject = subject;
    message.Body = body;
    message.IsBodyHtml = ishtml;
    message.From = fromAddress;
}
catch (Exception exc)
{
    MessageBox.Show("Error creating MailMessage: " + exc.Message);
}

try
{
    foreach (MailAddress t in toCol)
        message.To.Add(t);
}
catch (Exception exc)
{
    MessageBox.Show("Error adding TO addresses: " + exc.Message);
}

try
{
    foreach (MailAddress c in ccCol)
        message.CC.Add(c);
}
catch (Exception exc)
{
    MessageBox.Show("Error adding CC addresses: " + exc.Message);
}

try
{
    foreach (MailAddress b in bccCol)
        message.Bcc.Add(b);
}
catch (Exception exc)
{
    MessageBox.Show("Error adding BCC addresses: " + exc.Message);
}

try
{
    smtp.Send(message);
}
catch (Exception exc)
{
    MessageBox.Show("Error sending message: " + exc.Message);
} 
```

或者，您可以将各种 MessageBox.Show() 语句替换为写入日志文件的内容。通过打破这一点，您应该能够更准确地查明问题。*

# java - 是否可以检查是否调用了函数？

> ID：13591158
> 
> 赞同：0
> 
> 时间：2012-11-27T19:00:08.707
> 
> 标签：java, file, outputstream

我有一个`ArrayList`对象，我需要使用两个属性（使用比较器）对其进行排序。我需要将排序后的输出保存到具有不同名称的文本文件中，具体取决于用于排序的属性。例如，如果列表按排序，`attribute1`则文件为`attribute1.txt`，如果`attribute2`文件为`attribute2.txt`.

我希望它如何工作（伪代码）：

```
if(sortedByAtr1){
    FileWriter fwstream = new FileWriter(sortedByAtribute1.getName()+".txt");   
}
else(sortedByAtr2){
    FileWriter fwstream = new FileWriter(sortedByAtribute2.getName()+".txt");
} 
```

这可能吗？我很感激任何建议。谢谢。

伺服

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:44:00.573

这是解决此要求的面向对象的方法。

对 List 及其排序属性使用包装器：

```
public class ListSorter<V> {

    private final List<V> values;
    private String sortingAttribute;

    public ListSorter(List<V> values) {
        this.values = values;
    }

    public void sort(AttributeComparator<V> comparator) {
        Collections.sort(values, comparator);
        sortingAttribute = comparator.getSortingAttribute();
    }

    public String getSortingAttribute() {
        return sortingAttribute;
    }
} 
```

扩展 Comparator 接口，以便您可以获取属性名称：

```
public interface AttributeComparator<T> extends Comparator<T> {
    public String getSortingAttribute();
} 
```

像这样创建自定义 AttributeComparators：

```
public class FooBarComparator implements AttributeComparator<Foo> {

    public int compare(Foo foo1, Foo foo2) {
        // skipped nullchecks for brevity
        return foo1.getBar().compare(foo2.getBar());
    }

    public String getSortingAttribute() {
        return "bar";
    } 
```

}

采用：

```
List<Foo> yourList = new ArrayList<Foo>();
ListSorter<Foo> example = new ListSorter<Foo>(yourList);
AttributeComparator comparator1 = new FooBarComparator();
example.sort(comparator1);
FileWriter fwstream = new FileWriter(example.getSortingAttribute() +".txt"); 
```

# javascript - Twitter Bootstrap Datepicker 不会更新输入值

> ID：13591159
> 
> 赞同：10
> 
> 时间：2012-11-27T19:00:13.400
> 
> 标签：javascript, twitter-bootstrap

我有这段代码，但现在我被卡住了：

```
<input type="text" id="datepicker" value="/">

<script type="text/javascript">
    $('#datepicker').datepicker()
        .on('changeDate', function(ev){
            // Some code..
        });
</script> 
```

我希望每次选择新日期时都更新输入字段的值。我希望该值是选定的日期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T20:32:57.937

```
$(document).ready(function(){

    var dp = $("#datepicker");

    dp.datepicker({
        format : 'mm-dd-yyyy',
    });

     dp.on('changeDate', function(ev){
       dp.val(ev.target.value);
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T14:37:28.270

我不得不做一些疯狂的事情让我的工作。也许关于版本的东西？我不知道。

```
 var dt = $(".datepick");

        dt.datepicker({
            format: 'dd/mm/yyyy'
        });

        dt.on('changeDate', function (ev) {
            var mDate = new moment(ev.date);

            $("input", dt).attr('value',mDate.format('DD/MM/YYYY'));
        }); 
```

是的，我正在使用时刻 js，这是因为我正在页面上进行一些日期计算。

但它奏效了。

我需要输入有值，所以我可以使用 jquery 选择器来过滤带有`:not([value=''])`选择器的空字段。

希望对身体有帮助^_^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-14T15:11:58.603

html:

```
<div class="input-group input-daterange">
    <input type="text" class="form-control" value="2019-03-05">
    <div class="input-group-addon">to</div>
    <input type="text" class="form-control" value="2019-03-14">
</div> 
```

JS：

```
$(".input-daterange input").each(function(){
        $(this).datepicker('setValue');
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-27T19:15:29.293

```
<script type="text/javascript">
$(function() {
    $( "#datepicker" ).datepicker().on('changeDate', function(ev){
        // Some code..
    });;
}); 
```

当页面准备好时，日期选择器应该附加到#datepicker元素

```
$(function() {
  //code
} 
```

或者

```
$(document).ready($function{
 //some code
}); 
```

或确保

```
$("#datepicker").datepicker().on('changeDate', function(ev){}); 
```

在单击#datepicker 元素之前在函数中执行

# sql - 当列标题来自数据库时如何使用数据透视

> ID：13591161
> 
> 赞同：0
> 
> 时间：2012-11-27T19:00:15.320
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, pivot

我从 sql 表中获取以下格式的数据：

```
DisplayName     PropertySystemName     PropertyDefaultName     PropertyValue
S1                  P1                    Property 1              Value 1
S1                  P2                    Property 2              Value 2
S1                  P3                    Property 3              Value 3
S1                  P4                    Property 4              Value 4
S1                  P5                    Property 5              Value 5
S1                  P6                    Property 6              Value 6
S1                  P7                    Property 7              Value 7
S1                  P8                    Property 8              Value 8
S1                  P9                    Property 9              Value 9
S1                  P10                   Property 10             Value 10 
```

这是所需的输出：

```
DisplayName   Property 1   Property 2 Property 3
S1               Value 1     Value 2    Value 3 
```

这是我的查询，但它不会产生所需的输出。

```
Select me.DisplayName,
     Min(Case PropertySystemName When 'P1' Then PropertyValue End) PropertyDefaultName,
     Min(Case PropertySystemName When 'P2' Then PropertyValue End) PropertyDefaultName,
     Min(Case PropertySystemName When 'P3' Then PropertyValue End) PropertyDefaultName
FROM vManagedEntity me 
```

这是上述查询的输出：

```
DisplayName   PropertyDefaultName   PropertyDefaultName PropertyDefaultName
S1               Value 1                   Value 2           Value 3 
```

我如何修改查询以生成所需的输出，而无需对列标题进行硬编码，因为它已经存在于表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:06:31.760

除非使用动态 sql，否则不能将列中的值`PropertyDefaultName`用作列标题。使用动态 SQL 将允许您直接从表中提取列值和标题名称：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colNames AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(PropertySystemName) 
                    from vManagedEntity
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colNames = STUFF((SELECT ',' + QUOTENAME(PropertySystemName) 
                          + ' as '+ replace(PropertyDefaultName, ' ', '')
                    from vManagedEntity
                    group by PropertySystemName, PropertyDefaultName
                    order by cast(replace(PropertySystemName, 'P', '') as int)
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT DisplayName, ' + @colNames + ' from 
             (
                select DisplayName, PropertySystemName,
                   PropertyValue
                from vManagedEntity
            ) x
            pivot 
            (
                min(PropertyValue)
                for PropertySystemName in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/735d9/14)

结果是：

```
| DISPLAYNAME | PROPERTY1 | PROPERTY2 | PROPERTY3 | PROPERTY4 | PROPERTY5 | PROPERTY6 | PROPERTY7 | PROPERTY8 | PROPERTY9 | PROPERTY10 |
----------------------------------------------------------------------------------------------------------------------------------------
|          S1 |   Value 1 |   Value 2 |   Value 3 |   Value 4 |   Value 5 |   Value 6 |   Value 7 |   Value 8 |   Value 9 |   Value 10 | 
```

# java - Java - java.lang.ArrayIndexOutOfBoundsException

> ID：13591162
> 
> 赞同：0
> 
> 时间：2012-11-27T19:00:28.653
> 
> 标签：java, arrays

我正在尝试运行我的代码，它说明了异常：

```
java.lang.ArrayIndexOutOfBoundsException 
```

我用谷歌搜索了它，据我了解，当我尝试访问一个负数或大于我的数组长度的索引时会发生这种情况。但我似乎找不到问题，这是我的代码： http: [//pastebin.com/sXsBbYfh](http://pastebin.com/sXsBbYfh)

感谢任何帮助者。

编辑：错误信息：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 5
at Calculator.addOne(Calculator.java:127)
at Calculator.add(Calculator.java:88)
at Program.main(Program.java:8) 
```

关于代码的相关部分，我不知道，这就是我来找你的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:08:41.180

问题似乎与第 86 行有关

```
 arrResult = this.addOne(arrResult.length); 
```

数组索引是基于 0 的，所以 0 - length-1 并且您正在传入长度，然后使用它在第 127 行访问您的数组

```
 switch(arrResult[arrayIndex]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:12:35.437

这部分代码：

```
public int[] addOne(int arrayIndex)

 124.
        {

 125.
                switch(arrResult[arrayIndex])

 126.
                {

 127.
                        case 0:

 128.
                                arrResult[arrayIndex] = 1; 
```

是错误的来源。

注意。

在java中，数组索引范围从0到length-1

在上面的代码中，当`addon()`调用方法时，您将数组长度作为参数传递，而在上面的代码中，您试图访问`array[length]`不存在的，因此出现异常。因此，您可能希望保留它`length-1`

在以下代码行 #86

```
 arrResult = this.addOne(arrResult.length); 
```

您的代码中有很多逻辑错误。这只是引发您提到的异常的那个

# view - Drupal 7：在单个视图中组合多种内容类型

> ID：13591163
> 
> 赞同：0
> 
> 时间：2012-11-27T19:00:36.687
> 
> 标签：view, drupal-7

我有一个名为 Author 的内容类型，它通过节点参考模块在另外两个名为 Novel 和 Book 的内容类型中引用。所以我们可以将作者实体添加到 Book 和 Novel 内容类型。Novel 和 Book 都包含另一个名为 Release Date 的字段。现在我想显示一个块，当用户访问相应的作者页面时，它将根据发布日期按时间顺序显示书名和小说名。

前任。假设 A 是 BookA（Release Yr-2006）、NovelB（Release Yr-2004）、BookC（Release Year-2009）的作者。当用户来到作者 A 页面时，他将看到一个块，该块将按时间顺序显示书籍/专辑，如下所示：- NovelB--BookA--BookC

请建议如何在 Drupal 7 中实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:47:42.000

您要显示以下字段`title`（我假设书名是节点标题）

对于排序，您可以在视图中使用排序选项，这很不言自明。选择发布日期字段的名称。

对于作者和书籍之间的连接，您必须使用上下文过滤器（高级）。添加`author-reference-field`来自您的书/小说（您用来指代作者的字段）。然后选择使用默认值（第二个选项）并选择`content id from url`. 现在，您的块将找到引用具有当前 page-id 的页面的所有节点。由于我们选择显示标题字段，您应该会看到一个列表。

**请注意，实时预览在此处不起作用，因此您必须转到实际页面才能查看结果。**

**更新**：当您为两种内容类型重新使用相同的字段时，此方法有效。如果您使用了多个字段，则必须使用 OR 运算符来使上下文过滤器起作用。感谢[d34dman 提供](https://stackoverflow.com/users/1445354/d34dman)了以下[页面](http://mario.net.au/content/drupal-views-contextual-filter-or-operator)来做到这一点。尽管对于新的实现，我建议对所有内容类型的所有引用使用相同的字段（例如 reference_to_author）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:51:23.630

是的..我可以通过添加自定义代码来解决这个问题。我使用了 hook_views_query_alter 方法，然后根据要求添加了连接关系和 where 子句。请参阅以下文章以获得更清晰的信息.. [http://www.midwesternmac.com/blogs/jeff-geerling/filtersearch-multiple-fields](http://www.midwesternmac.com/blogs/jeff-geerling/filtersearch-multiple-fields)

感谢您发布回复并保持我的希望。

# image - 使用 Matlab 将形状检测为圆形

> ID：13591166
> 
> 赞同：5
> 
> 时间：2012-11-27T19:00:51.733
> 
> 标签：image, matlab, image-processing, geometry, shapes

我正在用 Matlab 编写一个程序来检测一个圆圈。

我已经设法检测出正方形、矩形和三角形等形状，基本上是通过搜索角，并根据它们之间的距离确定它是什么形状。图像是黑白的，黑色是背景，白色是形状，所以为了找到角落，我只需要搜索图像中的每个像素，直到找到一个白色像素。

但是我只是不知道如何识别圆圈。

这是一个圆形输入的示例：

![http://i.imgur.com/yfbqx.png](../Images/9eb66f92ef07d2b395ad88ece3eb37d4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:43:49.260

如果没有更多信息，很难说最好的方法是什么：例如，是否可能存在多个圆，它是否始终在图像中居中，以及算法需要对失真有多大的弹性。此外，您是否需要确定形状的位置和尺寸，或者只是“是”/“否”输出。

然而，假设只有一个圆圈，一个非常简单的方法如下：

1.  从上到下扫描图像，直到找到 (x1,y1) 处的第一个白色像素
2.  从下到上扫描图像，直到找到 (x2,y2) 处的最后一个白色像素
3.  导出可疑圆的直径为 y2 - y1
4.  将可疑圆的中心导出为 ((x1+x2)/2, y1+(y2-y1)/2)
5.  现在您可以对图像中的每个像素进行评分，以确定它是否与这个假设的圆圈匹配。例如，如果一个像素在可疑圆圈内，如果它是白色的，则为 0，如果它是黑色，则为 1，反之，如果它在可疑圆圈之外。
6.  对像素分数求和。如果结果为零，则图像包含一个完美的圆。分数越高表明失真程度越高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:36:22.893

我想你可能会读到这两个主题：

## 理论：

*   [二进制图像](http://www.cs.washington.edu/education/courses/cse576/book/ch3.pdf)

*   [霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)

## MATLAB：

*   [通过标准霍夫变换进行圆检测](http://www.mathworks.com/matlabcentral/fileexchange/4985-circle-detection-via-standard-hough-transform)
*   [霍夫本机在matlab中](http://www.mathworks.com/help/images/ref/hough.html)
*   [二进制图像](http://www.mathworks.com/matlabcentral/fileexchange/4985-circle-detection-via-standard-hough-transform)

# javascript - 更改图像映射中不同多边形的标题属性

> ID：13591167
> 
> 赞同：4
> 
> 时间：2012-11-27T19:01:01.373
> 
> 标签：javascript, html, css, tooltip, imagemap

我有这张我已经映射的图像。它有许多多边形形状的区域，并且在悬停时该区域会被着色（并且着色是指另一张图片）。我还制作了一个自定义工具提示，以便在悬停时显示一个文本框，其中包含超过一行的信息。

问题是我无法理解如何将这两者混合在一起。这是到目前为止的代码：

```
<div style="text-align:center; width:450px; margin-left:auto; "> <img id="Image-           Maps_4201211181157353" src="...Original.png" usemap="#Image-Maps_4201211181157353" border="0" width="450" height="321" alt="" title=""  /> <map id="_Image-Maps_4201211181157353" name="Image-Maps_4201211181157353">

<!--Area1--> <area shape="poly"coords="370,191,363,195,355,194,343,193,339,185,330,173,327,164,325,154,338,149,351,149,364,149,365,165,364,181," href=" " alt=""  id="1" onMouseOver="if(document.images) document.getElementById('Image-Maps_4201211181157353').src= '...Area1.png';" onMouseOut="if(document.images) document.getElementById('Image-Maps_4201211181157353').src= '...Original.png';" /> </map> 
```

其中 Original.png 是原始图片，Area1.png 是鼠标悬停时改变颜色的区域。

这是工具提示类：

```
<a class="tooltip" href="#"> Tooltip
  <span class="custom warning">
       <em>Title</em>Example text
  </span> </a> 
```

所以我想要在地图 div 中插入定制的工具提示，作为地图每个多边形区域的标题属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:13:45.017

您需要做的是遍历每个区域的坐标并找到顶部/左侧或中心，然后使用 JavaScript 相应地设置工具提示的位置`position:absolute`。矩形很容易，但多边形需要更多的工作。

确实没有简单的方法可以做到这一点。

请参阅：[获取地图区域的位置（html）？](https://stackoverflow.com/questions/4529957/get-position-of-map-areahtml)

# python - Django 无法从 app/models.py 导入

> ID：13591170
> 
> 赞同：0
> 
> 时间：2012-11-27T19:01:11.950
> 
> 标签：python, django, django-models

在我的 Django 应用程序（让我们称之为`app`）中，我有许多文件：`views.py`，`models.py`我创建了自己的`utils.py`.

不幸的是，虽然我可以简单地通过说将我的模型包含在我的`views.py`文件中

`from models import *`

在我的`utils.py`文件中，如果我尝试同样的事情，然后使用模型，我会得到一个异常`Global name: MyModel is not defined`。`models.py`确实包括`utils.py`，我知道这可能是一个循环依赖，但在我添加最近的更改之前它运行良好。这是原因吗，如果是的话，是重构我的 utils 文件的唯一解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:10:18.423

好吧，您已经知道这是因为相互依赖。解决方法是将 util 文件分成两部分，这样您就可以通过分隔需要调用模型的部分来避免循环导入。

此外，正如 Mipadi 建议的那样，您可以简单地在方法范围内进行导入，而不是使用全局导入语句

此外，这实际上取决于您如何尝试使用这些模型。例如，您可以通过“app_name.class_name”访问模型，但实际上取决于您要使用的上下文。

# iphone - 如何使用 Xcode 将文本分享到 Tumblr

> ID：13591172
> 
> 赞同：0
> 
> 时间：2012-11-27T19:01:14.573
> 
> 标签：iphone, objective-c, ios, tumblr

我正在开发一个 iOS 应用程序，它具有 Facebook、Twitter 和 Tumblr 共享等共享功能。除了 Tumblr 之外，我已经完成了所有的分享。我在这方面做了很多工作。我做了很多谷歌搜索，但在 Tumblr 分享上一无所获。这是我目前用于在 Tumblr 上共享文本的代码：

```
- (void)shareOvertumblr:(id)sender
{
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                initWithURL:
                                [NSURL URLWithString:@"http://www.tumblr.com/api/write"]];
[request setHTTPMethod:@"POST"];
//tell the server to expect 8-bit encoded content as we're sending UTF-8 data,
//and UTF-8 is an 8-bit encoding
[request addValue:@"8bit" forHTTPHeaderField:@"Content-Transfer-Encoding"];
//set the content-type header to multipart MIME
[request addValue: [NSString stringWithFormat:@"multipart/form-data; boundary=%@",[NSString MIMEBoundary]] forHTTPHeaderField: @"Content-Type"];

//create a dictionary for all the fields you want to send in the POST request
NSDictionary* postData = [NSDictionary dictionaryWithObjectsAndKeys:
                          @"myEmailAddress", @"email",
                          @"password", @"password",
                          @"regular", @"type",
                          @"myTitle", @"title",
                          @"Hiiii How ruuu", @"body",
                          nil];
//here inPlace of these EmailAddress and Password using my correct emailAdress and Password
//set the body of the POST request to the multipart MIME encoded dictionary
[request setHTTPBody: [[NSString multipartMIMEStringWithDictionary: postData] dataUsingEncoding: NSUTF8StringEncoding]];
[NSURLConnection connectionWithRequest:request delegate:self];
}

  /*Here is The Category */
  @interface NSString (MIMEAdditions)
+ (NSString*)MIMEBoundary;
+ (NSString*)multipartMIMEStringWithDictionary:(NSDictionary*)dict;
@end

@implementation NSString (MIMEAdditions)
//this returns a unique boundary which is used in constructing the multipart MIME body of the POST request
+ (NSString*)MIMEBoundary
{
static NSString* MIMEBoundary = nil;
if(!MIMEBoundary)
    MIMEBoundary = [[NSString alloc] initWithFormat:@"----_=_YourAppNameNoSpaces_%@_=_----",[[NSProcessInfo processInfo] globallyUniqueString]];
return MIMEBoundary;
}
 //this create a correctly structured multipart MIME body for the POST request from a dictionary
+ (NSString*)multipartMIMEStringWithDictionary:(NSDictionary*)dict
{
NSMutableString* result = [NSMutableString string];
for (NSString* key in dict)
{
    [result appendFormat:@"--%@\nContent-Disposition: form-data; name=\"%@\"\n\n%@\n", [NSString MIMEBoundary],key,[dict objectForKey:key]];
}
[result appendFormat:@"\n--%@--\n",[NSString MIMEBoundary]];
return result;
}
@end

 /*Connection Delegate Methods*/
 - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
 {
 [self.view setUserInteractionEnabled:YES];

 }
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
webData = [[NSMutableData alloc] initWithLength:0];
// webData is The NSMutable data
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

NSString* responseString = [[NSString alloc] initWithData: webData
                                                 encoding: NSUTF8StringEncoding];

NSLog(@"Response String %@",responseString);
// here i got Authentication failed as Response .....

}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
[webData appendData:data];

 } 
```

每当我运行此代码时，都会出现一些`Authentication failed`错误。我在各种线程上看到了同样的问题。[这是我尝试过的链接，](https://stackoverflow.com/questions/2326071/sending-a-post-request-from-cocoa-to-tumblr) 但不幸的是，到目前为止还没有运气。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:29:43.083

而不是您自己的代码，您可以使用**`ShareKit`**

只需 3 行代码，它将为您的应用程序添加完整的共享功能。

**`ShareKit`** 是一个开源框架，可以放入任何 iPhone 或 iPad 应用程序以立即添加完整的共享功能。

**`Tumblr`**只需几行代码，您就可以使用 ShareKit 添加共享 URL、图像和文本。

**分享文字**

**`+ (SHKItem *)text:(NSString *)text;`**

```
NSString *someText = @"This is a blurb of text I highlighted from a document.";
SHKItem *item = [SHKItem text:someText]; 
```

您可以[在此处查看更多详细信息](http://getsharekit.com/tutorial/tumblr)

# objective-c - UITableView 滚动后 UIButton 不可点击

> ID：13591176
> 
> 赞同：1
> 
> 时间：2012-11-27T19:01:29.713
> 
> 标签：objective-c, ios, uitableview, uibutton

我有一个 UITableView 填充了一些单元格。我使用以下代码段创建了一个 UIButton，它位于一个节标题旁边。

```
UIButton *addButton = [UIButton buttonWithType:UIButtonTypeCustom];
[addButton addTarget:self action:@selector(addButtonPressed) forControlEvents:UIControlEventTouchUpInside];
[addButton setBackgroundImage:[UIImage imageNamed:@"add.png"] forState:UIControlStateNormal];
addButton.backgroundColor = [UIColor clearColor];
addButton.frame = CGRectMake(270, 150, 29, 29); 
```

按钮已放置并正常工作。但是，在视图滚动后（甚至稍微像 1 个像素），按钮会工作一次，然后停止响应。当它无法响应单击时的操作时，不会触发该操作，并且该按钮不会给出“按下”的阴影。应用程序的其余部分正常运行，不会崩溃。

这看起来很奇怪，因为在我滚动按钮之后，它会在它停止工作之前再次单击。该按钮用于将行插入表中，因此按下后会有额外的行，这可能是打破界限还是什么？

按钮按下功能：

```
- (void)addButtonPressed {
    self.addClientTable.editing = YES;

    // First figure out how many sections there are
    NSInteger lastSectionIndex = [self numberOfSectionsInTableView:self.addClientTable] - 1;

    // Then grab the number of rows in the last section
    NSInteger lastRowIndex = [self.addClientTable numberOfRowsInSection:lastSectionIndex];

    [self.addClientTable insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:lastRowIndex inSection:lastSectionIndex]] withRowAnimation:UITableViewRowAnimationRight];

    self.addClientTable.editing = NO;
} 
```

`addClientTable`UITableView在哪里。

什么可能导致 UIButton 停止响应点击，在我的场景中这是由什么引起的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:12:36.680

我几乎可以肯定您的问题是您的按钮不在它的超级视图中，并且您没有在包含该按钮的视图或其中一个超级视图中使用剪辑子视图选项。

将所有视图属性剪辑子视图设置为 true 并查看它是否出现在您的按钮中。（我们希望按钮消失）

如果您提供更多代码，我可以尝试帮助您解决此问题。

-

再次阅读您的问题，另一个可能的问题是您的按钮前面有一个视图。您可以测试它更改视图的背景，或类似的东西。

# c# - 如果有默认命名空间，则元素必须指定命名空间

> ID：13591178
> 
> 赞同：0
> 
> 时间：2012-11-27T19:01:37.063
> 
> 标签：c#, web-services

我正在使用 C# 使用 Java Web 服务，但是当我尝试使用特定的一种方法时，我得到了以下异常。我可以使用此 WS 的其他方法。

这是例外

> 如果 XXXX 范围内有默认命名空间，则元素必须指定命名空间

我用谷歌搜索了一些东西，但我找不到这个错误的解决方案。我不知道是否需要更改我的 APP.config 文件。我在膜 SOAP 客户端中测试了这种方法，并且该方法运行良好。

有人知道这个错误的根本原因吗？

# angularjs - 如何使用AngularJS过滤子值的ng-repeat

> ID：13591182
> 
> 赞同：2
> 
> 时间：2012-11-27T19:01:54.753
> 
> 标签：angularjs

我使用 ng-repeat 制作了一个基于数组的重复行的简单表。我添加了一个与[此示例](http://docs.angularjs.org/api/ng.filter%3afilter)类似的过滤器。

当我尝试过滤嵌套对象时，我的问题就出现了。它始终是单个对象，基本上它是我当前对象的父对象，但它是完整对象，而不仅仅是 FK 值。

如果我使用 filterText.educationCenter.name 它会过滤表中的所有行并且即使我清除过滤器也不会返回它们。我必须完全重新加载。

如果我只过滤 filterText.educationCenter 它将起作用，但它会搜索整个对象的所有字段。

我想保持 JSON 原样，并根据educationCenter 对象的名称过滤表结果。

我的 HTML

```
Search: <input ng-model="filterText.$"/>
<input ng-model="filterText.city"/>
<input ng-model="filterText.educationCenter.name"/>

<tr ng-repeat="course in courses | filter:filterText | startFrom:currentPage*pageSize | limitTo:pageSize">
                    <td width="145">{{course.city}}</td>
                    <td width="145">{{course.educationCenter.name}}</td>
... 
```

我的 JSON 用于数组中的单个对象

```
{"id":"108"
,"city":"My City"
,"educationCenter":{"id":"3"
                   ,"description":"This is the ed center description"
                   ,"name":"test ed center 1"}
,"noOfDays":"1"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:40:13.730

正如@fastreload 所建议的那样，我认为您必须制作自己的过滤器。

这是递归过滤器的示例。（虽然它不支持`$`符号，我确信它缺少一些边缘情况支持。）

```
app.filter('recursiveFilter', function() {
  var compare = function(input_, cond_) {
    if (!cond_) return true;
    if (typeof input_ == "string" && typeof cond_ == "string") {
      return (new RegExp(cond_)).test(input_);
    } else if (typeof input_ == "object" && typeof cond_ == "object") {
      for (var s in cond_) {
        if (!compare(input_[s], cond_[s])) return false;
      }
      return true;
    }
    return false;
  };

  return function(inputs, cond) {
    return $.grep(inputs, function(input) {
      return compare(input, cond);
    });
  };
}); 
```

# c# - 设置目录和子项的权限

> ID：13591185
> 
> 赞同：2
> 
> 时间：2012-11-27T19:02:09.673
> 
> 标签：c#, .net, permissions, file-permissions, user-permissions

我的程序将一些目录、子目录和文件从服务器复制到本地计算机。我需要，每个本地用户都可以修改它（编辑/删除/删除/重命名）。但现在它只能做所有者。如何为复制的目录及其子项设置必要的权限？我尝试这样的代码：

```
String account = Path.Combine(Environment.MachineName, "Users");
FileSystemRights rights = FileSystemRights.FullControl;
AccessControlType controlType = AccessControlType.Allow;
DirectorySecurity security = local_commonDir.GetAccessControl(AccessControlSections.Access);
FileSystemAccessRule rule = new FileSystemAccessRule(account, rights, controlType);
security.AddAccessRule(rule);
local_commonDir.SetAccessControl(security); 
```

但我得到了例外：

> 某些属性或指向属性的链接无法转换。

如果我添加不存在的访问控制，则不存在错误。我认为收到错误是因为“用户”已经存在。我如何更改现有权利？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:22:54.967

我找到了解决方案：

```
WindowsIdentity id = WindowsIdentity.GetCurrent();
var sid = new SecurityIdentifier(WellKnownSidType.AccountDomainUsersSid, id.User.AccountDomainSid);
var security = dir.GetAccessControl();
var rule = new FileSystemAccessRule(sid,
    FileSystemRights.FullControl,
    InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit,
    PropagationFlags.None,
    AccessControlType.Allow);
security.AddAccessRule(rule);
dir.SetAccessControl(security); 
```

# java - Spring MVC Web Application——正确使用Model

> ID：13591186
> 
> 赞同：0
> 
> 时间：2012-11-27T19:02:18.823
> 
> 标签：java, jsp, spring-mvc

我正在使用 Spring Framework 在 Java 中开发 Web 应用程序。在一页上，我让用户选择年份。这是代码：

```
@Controller
public class MyController {

    @RequestMapping(value = "/pick_year", method = RequestMethod.GET)
    public String pickYear(Model model) {
        model.addAttribute("yearModel", new YearModel);
        return "pick_year";
    }

    @RequestMapping(value = "/open_close_month_list", method = RequestMethod.POST)
    public String processYear(Model model, @ModelAttribute("yearModel") YearModel yearModel) {
        int year = yearModel.getYear();
        // Processing
    }
}

public class YearModel { 
    private int year;

    public int getYear() {
        return year;
    }

    public void setYear(int year) {
        this.year = year;
    }
} 
```

此实现有效，但我想使用更简单的方法从用户那里获得年份。我认为制作特殊模型只是为了获得一个整数不是很好的方法。

所以，我的问题是：是否有可能以某种方式简化这段代码？

感谢您的任何帮助。米兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:51:47.900

通常您使用模型将数据从控制器传递到视图，并用于从控制器中`@RequestParam`提交的表单中获取数据。意思是，您的 POST 方法如下所示：

```
public String processYear(@RequestParam("year") int year) {
    // Processing
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:53:44.437

事实上，你只需要存储整数，你不需要创建一个全新的特殊类来保存它

```
@Controller
public class MyController {
    @RequestMapping(value = "/pick_year", method = RequestMethod.GET)
    public String pickYear(ModelMap model) {
        model.addAttribute("year", 2012);
        return "pick_year";
    }

    @RequestMapping(value = "/open_close_month_list", method = RequestMethod.POST)
    public String processYear(@ModelAttribute("year") int year) {
        // Processing
    }
} 
```

您可以（如果可能的话）改写您的视图，以便您可以使用`@RequestParam`将整数直接传递给您的方法`pickYear`，将其呈现到视图中，以便可以以`processYear`相同的方式将此参数传递给第二个方法。

```
@Controller
public class MyController {
    // In the pick_year view hold the model.year in any hidden form so that
    // it can get passed to the process year method
    @RequestMapping(value = "/pick_year", method = RequestMethod.GET)
    public ModelAndView pickYear(@RequestParam("year") int year) {
        ModelAndView model = new ModelAndView("pick_year");
        model.addAttribute("year", 2012);
        return model;
    }

    @RequestMapping(value = "/open_close_month_list", method = RequestMethod.POST)
    public String processYear(@RequestParam("year") int year) {
        // Processing
    }
} 
```

# android - Jellybean 上的 getExternalStorage() 和 MTP 行为

> ID：13591189
> 
> 赞同：1
> 
> 时间：2012-11-27T19:02:34.003
> 
> 标签：android, android-4.2-jelly-bean

有时，当我运行应用程序的开发版本时，我想导出数据库，以便将其复制到桌面，在那里查看数据库并确保它被正确编辑。

通常我会调用 Environment.getExternalStorageDirectory() 并在那里复制数据库。然而，Galaxy Nexus 上的 Jellybean 让我陷入了困境——我无法通过 MTP 看到该文件！（Mac OS X 文件传输）。如果我使用 Wifi File Explorer 浏览设备上的文件，那么我会看到数据库文件。

在做了一些研究之后，我猜这是由于 Jellybean 的模拟用户特定外部存储。这就是为什么它告诉我它正在写入 /storage/emulated/0/ 而不是 /sdcard 例如。

有没有办法告诉Android“将此文件写入世界可读的位置（包括MTP），而不是仅使其可用于在同一用户下运行的应用程序”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:51:07.097

我有同样的问题。我看不到我用“Android 文件传输”在“下载”文件夹中写入的 txt 文件。我找到的唯一解决方案是在您编写文件的同一文件夹中写入一个额外的 .txt 文件，然后在“Astro 文件管理器”等应用程序中打开该文件夹并删除额外文件。现在打开“Android 文件传输”，将其关闭，然后再次打开。您想要的文件现在应该出现。

我使用 /storage/emulated/0/Download/ 作为路径，但它应该可以在任何其他文件夹中使用。

我知道这不是完美的解决方案，但现在这就是我所拥有的。希望这对你也有用！

# mercurial - 合并变更集之前的 mercurial 克隆分支

> ID：13591192
> 
> 赞同：1
> 
> 时间：2012-11-27T19:02:45.140
> 
> 标签：mercurial

有没有办法克隆 mercurial repo 的一部分（即 clone -r xxx），但保留指定修订之前的所有变更集，即不仅仅是祖先？

例如，给定一个如下所示的 repo：

```
 -- 2 (branch default) -- 5 --  8 (merge) -- 9 (merge) -- 
      /                               /            /
0 -- 1  -- 3 (branch foo) ------ 6 --             /
      \                                          /
       -- 4 (branch bar) ------ 7 ------------- 
```

我只想在合并之前克隆提交，即生成的 repo 看起来像这样：

```
 -- 2 (branch default) -- 5
      /
0 -- 1  -- 3 (branch foo) ------ 6
      \
       -- 4 (branch bar) ------ 7 
```

但运行

```
hg clone -r 7 repo repo2 
```

只会给我提交 1、4 和 7（分支栏）。似乎获得我所追求的唯一方法是这样的：

```
hg clone -r 5 repo repo2
cd repo2
hg pull -r 6
hg pull -r 7 
```

这是正确的，还是有人知道更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T22:30:58.977

您**必须阅读** `hg help clone`并记住选项，这些选项可以在一个克隆中多次使用（即 -r 和 -b ）。

你想要，用简单的话“克隆所有默认*为 5* **和** *FOO 分支* **和** *BAR 分支*”

将其翻译成克隆 `hg clone -r 5 -b foo -b bar <SRC REPO> <DST-REPO>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T21:58:03.507

`hg help clone`说

```
-r --rev REV [+]       include the specified changeset 
```

这与 不同`hg help log`，例如，它说

```
-r --rev REV [+]         show the specified revision or range 
```

您能做的最好的事情就是`-r`多次使用：

```
hg clone -r 5 -r 6 -r 7 repo repo2 
```

您可以使用`log`修订集来确定需要包括哪些其他修订。

# bash - 重击重复直到

> ID：13591193
> 
> 赞同：0
> 
> 时间：2012-11-27T19:02:49.290
> 
> 标签：bash, shell, unix

我想知道语法是否正确。抱歉，我现在无法测试它，但这对我很重要。它是一个 FTP 脚本。文件名是`a.txt`，我想创建一个脚本来上传文件，直到它成功。它会起作用还是不起作用？任何人都可以帮助我建立正确的请

```
LOGFILE=/home/transfer_logs/$a.log
DIR=/home/send
Search=`ls /home/send`
firstline=`egrep "Connected" $LOGFILE`
secondline=`egrep "File successfully transferred" $LOGFILE`

if [ -z "$Search" ]; then
cd $DIR
ftp -p -v -i 192.163.3.3 < ../../example.script > ../../$LOGFILE 2>&1
fi

if
egrep "Not connected" $LOGFILE; then
repeat
ftp -p -v -i 192.163.3.3 < ../../example.script > ../../$LOGFILE 2>&1
until
[[ -n $firstline && $secondline ]]; 
done
fi 
```

example.script 包含：

```
 binary
 mput a.txt
 quit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:14:14.047

> 它会起作用还是不起作用？

不，这行不通。根据[§3.2.4.1 "Looping Constructs" of the *Bash Reference Manual*](http://www.gnu.org/software/bash/manual/bashref.html#Looping-Constructs)，这些是存在的循环类型：

```
until test-commands; do consequent-commands; done

while test-commands; do consequent-commands; done

for name [ [in [words …] ] ; ] do commands; done

for (( expr1 ; expr2 ; expr3 )) ; do commands ; done 
```

您会注意到它们都不是以 . 开头的`repeat`。

此外，这两行：

```
firstline=`egrep "Connected" $LOGFILE`
secondline=`egrep "File successfully transferred" $LOGFILE` 
```

`egrep` *立即*运行，并相应地设置它们的变量。这个命令：

```
[[ -n $firstline && $secondline ]] 
```

将始终给出相同的返回值，因为循环中的任何内容都不会修改`$firstline`and `$secondline`。您实际上需要`egrep`在循环中放置一个命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:16:11.253

不`ftp`返回合理的结果？最简单的写法是：

```
while ! ftp ...; do sleep 1; done 
```

如果您坚持搜索日志文件，请执行以下操作：

```
while :; do
    ftp ... > $LOGFILE
    grep -qF "File successfully transferred" $LOGFILE && break
done 
```

或者

```
while ! test -e $LOGFILE || grep -qF "Not connected" $LOGFILE; do
    ftp ... > $LOGFILE
done 
```

# c# - 如何向用户显示文件系统树，以便能够单击并选择路径？

> ID：13591196
> 
> 赞同：-1
> 
> 时间：2012-11-27T19:02:55.157
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, filetree

伙计们，在尝试实现一个类来枚举文件系统树的方式后，我放弃了尝试使其工作。

我有一个带有文件路径的文本框。我希望用户能够单击并从显示文件系统树的面板中单击并选择路径。

你们能帮我解决这个问题吗？

只是为了让您了解我在做什么，这是代码：

```
try
{
    DriveInfo[] allDrives = DriveInfo.GetDrives();

    Response.Write("<ul class=\"jqueryFileTree\" style=\"display: none;\">\n");

    foreach (DriveInfo drive in allDrives)
    {
        if (drive.IsReady == true)
        {
            try
            {
                Response.Write("\t<li class=\"drive collapsed\"><a href=\"#\" rel=\"" + drive.ToString() + "\">" + drive.ToString() + "</a>\n");

                System.IO.DirectoryInfo di = new System.IO.DirectoryInfo(drive.ToString());
                DirectoryInfo[] directories = di.GetDirectories("*.*", SearchOption.AllDirectories);

                Response.Write("<ul>");

                foreach (System.IO.DirectoryInfo di_child in directories)
                {
                    Response.Write("\t<li class=\"directory collapsed\"><a href=\"#\" rel=\"" + drive + di_child.Name + "/\">" + di_child.Name + "</a>\n");
                    Response.Write("<ul>");

                    foreach (System.IO.FileInfo fi in di.GetFiles())
                    {
                        string ext = "";
                        if (fi.Extension.Length > 1)
                        {
                            ext = fi.Extension.Substring(1).ToLower();
                        }

                        Response.Write("\t<li class=\"file ext_" + ext + "\"><a href=\"#\" rel=\"" + drive + fi.Name + "\">" + fi.Name + "</a></li>\n");
                    }
                    Response.Write("</ul></li>");
                }
                Response.Write("</ul></li>");
            }
            catch (UnauthorizedAccessException e)
            {
                Response.Write(e.Message);
                continue;
            }
            catch (System.IO.DirectoryNotFoundException e)
            {
                Response.Write(e.Message);
                continue;
            }
            catch (Exception e)
            {
                Response.Write(e.Message);
                continue;
            }
        }
    }

    Response.Write("</ul>");
}
catch (Exception)
{
    throw;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:08:06.537

[jqueryFileTree](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/)的文档解释说，您需要有一个函数，该函数采用名为 POST 的参数`dir`，并且您的页面应返回表单的无序列表 ( `ul`)：

```
<ul class="jqueryFileTree" style="display: none;">
    <li class="directory collapsed"><a href="#" rel="/this/folder/">Folder Name</a></li>
    (additional folders here)
    <li class="file ext_txt"><a href="#" rel="/this/folder/filename.txt">filename.txt</a></li>
    (additional files here)
</ul> 
```

如果您按照这些说明进行操作，您基本上需要 2 个页面：一个完全专用于生成上述输出，另一个页面用于托管`jQueryFileTree`插件所需的 jQuery 库。

因此，例如，您需要一个`Default.aspx`带有类似于此的标记：

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
     <script src="http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/jquery.js" type="text/javascript"></script>
    <script src="http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/jquery.easing.js" type="text/javascript"></script>
    <script src="http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/jqueryFileTree.js" type="text/javascript"></script>
    <link href="http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/jqueryFileTree.css" rel="stylesheet" type="text/css" media="screen" />
    <script type="text/javascript">
        $(document).ready(function () {
            $.post('FileTree.aspx',{dir:'c:\\'}, function (data) {
                $('#filetree').html(data);
                $('.jqueryFileTree').fileTree({ root:'/' ,script: 'FileTree.aspx' }, function (file) {
                    alert(file);
                });
            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div id="filetree">

    </div>
    </form>
</body>
</html> 
```

在哪里`document.ready`，您向名为的页面发送`post`请求，该页面`FileTree.aspx`实际上将具有代码以生成所需的`ul>li`正确样式的目录和文件。

该`FileTree.aspx`页面应该是完全空的，但后面的代码应该是这样的：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.Params["dir"] != null)
        {
            System.IO.DirectoryInfo di = new System.IO.DirectoryInfo(Path.Combine("c:\\", Request.Params["dir"]));
            if (di.Exists)
            {
                DirectoryInfo[] directories = di.GetDirectories("*.*", SearchOption.TopDirectoryOnly);
                Response.Write("<ul class=\"jqueryFileTree\" >\n");
                //Itera sobre os subdiretórios de cada driver
                foreach (System.IO.DirectoryInfo di_child in directories)
                {
                    Response.Write("\t<li class=\"directory collapsed\"><a href=\"#\" rel=\"" + di_child.Name + "/\">" + di_child.Name + "</a>\n");
                }
                foreach (System.IO.FileInfo fi in di.GetFiles())
                {
                    string ext = "";
                    if (fi.Extension.Length > 1)
                    {
                        ext = fi.Extension.Substring(1).ToLower();
                    }

                    Response.Write("\t<li class=\"file ext_" + ext + "\"><a href=\"#\" rel=\"" + fi.Name + "\">" + fi.Name + "</a></li>\n");
                }// Arquivos 
                Response.Write("</ul></li>");
            }
        }
    } 
```

所以最终发生的事情是，在加载页面时，您向作为参数传递的根文件夹（在我的示例中）`Default.aspx`发送一个 ajax 请求，并在进一步单击呈现的任何文件夹时，将继续发送 ajax 发布请求到选择目录名称。`FileTree.aspx``c:\\``jQueryFileTree``FileTree.aspx`

在我的特定实现中，产生的输出如下：

![在此处输入图像描述](../Images/62cdebc2a892c6ede7a964726f2d36ac.png)

现在，请记住，上述代码只有在您的 Web 应用程序在具有足够权限来读取文件系统的用户下运行时才有效，默认情况下并非如此。您需要为此配置 IIS。

另外，请注意，上面的代码是从您的原始版本中大量修改的。我这样做是因为您试图加载**整个**文件系统，这是一个非常长的、非常冗长的操作。您通常希望加载顶级目录，并且仅在单击每个目录时才尝试加载其内容。不要尝试一次加载所有内容，否则没有人愿意使用您的应用程序。

无论如何，我希望这能为你指明正确的方向......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:39:29.830

为什么不使用现有的解决方案之一： [http](http://www.ajaxline.com/best-javascript-tree-widgets) ://www.ajaxline.com/best-javascript-tree-widgets ？

# jquery-ui - CakePHP 控制器构建表单并将其作为 HTML 发送到 Jquery UI 对话框

> ID：13591198
> 
> 赞同：0
> 
> 时间：2012-11-27T19:03:06.367
> 
> 标签：jquery-ui, cakephp, jquery, cakephp-2.0

我正在为一个小项目使用 cakePHP 和 Jquery UI。

我在项目的 index.ctp 上有一个“添加项目”链接。

我想在论坛中显示一个 jQuery UI 对话框，以便在单击“添加项目”链接时添加一个项目。

这样我就可以使用 cakePHP 很棒的**FormHelper**，我希望控制器的 add() 方法返回**FormHelper**创建的 html，`if($this->request->is('ajax'))`但这给了我内部服务器错误（当我在 Chrome 中检查元素时）。

我知道这不是非常 MVC，但我的理由是，如果用户启用了 Js，我希望我的应用程序能够工作，因此如果他们没有 jQuery，“添加项目”链接会显示 add.ctp 视图，但如果他们确实`preventDefault()`在我的 jQuery 脚本中。

然后，jQuery 单击处理程序设置对话框的属性（jQueryUI 对话框），然后向表单的 add() 发出 ajax 请求。

我复制并粘贴了我在 add.ctp 上使用的**FormHelper**代码，但不是回显，而是将每一行添加到 $htmlString。然后我打电话`echo $htmlString; exit();`，但在这里我得到**500 Internal Server Error**。

如果我注释掉 add() 函数中的所有**FormHelper**行，一切正常（$htmlString 只是“”），所以这里出了点问题。

正如我所说，我知道这不是 MVC-y，但我想不出另一种方法来做到这一点。我可能会返回 add.ctp 而不是复制和粘贴的代码吗？这将使 MVC 模型保持正确，如果 $this->layout = 'ajax' 那么我只会得到确切的 add.ctp 文件代码，对吗？

提前感谢您的时间和帮助。

**编辑 - 添加了 jQuery ajax 请求和 cakephp 控制器 add() 函数**

jQuery ajax 请求：

```
$('.add_project').click(function(event) {
        //Kill default
        event.preventDefault();

        $.ajax({
            url : $(this).attr('href'),
            type : 'post',
            data : 'ajax=1',
            dataType: 'html',
            success: function(response) {
                alert(response);

                //Check jquery loaded
                if(jQuery.ui) {
                    //Fill dialog with form
                    $("#dialog").html(response).show();

                    //Show dialog
                    $("#dialog").dialog("open");
                }
            }
        });
    }); 
```

CakePHP 控制器代码：

```
public function add()
{
    //If this has been requested with ajax then give the form that we create on add.ctp
    if($this->request->is('ajax'))
    {
        App::import('Helper', 'Form');

        $this->loadModel('Project');
        $html = '';

        $html += $this->Form->create('Project');
         $html += $this->Form->input('name');
         $html += $this->Form->input('colour', array(
             'options' => array('blue' => 'Blue', 'green' => 'Green', 'red' => 'Red', 'orange' => 'Orange', 'yellow' => 'Yellow')
         ));
        $html += $this->Form->end('Create Project');
        echo html;
        exit();
    } 
```

我很肯定这与ajax请求无关，它在cakephp中更多的是一个问题，它不喜欢在控制器中使用FormHelper。我知道这是不好的 MVC 实践，但我想不出另一种动态地执行此操作的方法（因为 cakephp 基于模型构建 html 标记）。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:14:48.193

您收到的 500 Internal Server 错误是因为您在 Controller 中使用了 Helper。

然而！您可以通过您的 ajax 请求传回视图。在控制器中创建方法。使用表单助手创建视图

**ajaxForm.ctp**

```
$this->Form->create('Project');
$this->Form->input('name');
$this->Form->input('colour', array(
       'options' => array('blue' => 'Blue', 'green' => 'Green', 'red' => 'Red', 'orange' => 'Orange', 'yellow' => 'Yellow')
));
$this->Form->end('Create Project'); 
```

**控制器**

```
public function ajaxForm(){

if($this->request->is('ajax')){
    $this->layout = 'ajax';   // to avoid returning your full layout
    $this->render('ajaxForm');

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T22:04:34.217

将您的 html 和前端代码与 php 后端代码分开，如果您没有将任何数据传递给视图，您的 add 函数可以为空，如果非 ajax 请求没有调用 add 函数，则不需要检查 ajax . 在您看来，它将专用于您的 ajax 请求。

```
//controller file
App::import('Helper', 'Form');
public function add()
{

} 

//App/Views/Projects/add.ctp file
        echo $this->Form->create('Project');
        echo $this->Form->input('name');
        echo $this->Form->input('colour', array(
             'options' => array('blue' => 'Blue', 'green' => 'Green', 'red' => 'Red', 'orange' => 'Orange', 'yellow' => 'Yellow')
         ));
        echo $this->Form->end('Create Project'); 
```

# python - 检查python中是否存在json响应行

> ID：13591210
> 
> 赞同：2
> 
> 时间：2012-11-27T19:03:44.107
> 
> 标签：python, json, parsing

这是我的json回复

> {u'kind': u'bigquery#queryResponse', u'rows': [{u'f': [{u'v': u'1'}, {u'v': u'1607'}, {u'v': u'coriolanus'}]}, {u'f': [{u'v': u'1'}, {u'v': u'1596'}, {u'v' : u'kingjohn'}]}, {u'f': [{u'v': u'1'}, {u'v': u'1599'}, {u'v': u'kinghenryv' }]}, {u'f': [{u'v': u'1'}, {u'v': u'1600'}, {u'v': u'merrywivesofwindsor'}]}, { u'f': [{u'v': u'1'}, {u'v': u'1602'}, {u'v': u'troilusandcressida'}]}, {u'f': [{u'v': u'1'}, {u'v': u'1592'}, {u'v': u'comedyoferrors'}]}, {u'f': [{u'v ': u'2'},{u'v': u'1590'}, {u'v': u'3kinghenryvi'}]}, {u'f': [{u'v': u'2'}, {u'v' : u'1612'}, {u'v': u'kinghenryviii'}]}, {u'f': [{u'v': u'2'}, {u'v': u'1598' }, {u'v': u'2kinghenryiv'}]}], u'jobReference': {u'projectId': u'1039435439624', u'jobId': u'job_ffb30cfb23674f88aa5cb497e358ec05'}, u'jobComplete': True , u'totalRows': u'9', u'schema': {u'fields': [{u'type': u'INTEGER', u'name': u'sum_for_the', u'mode': u 'NULLABLE'}, {u'type': u'INTEGER', u'name': u'corpus_date', u'mode': u'NULLABLE'}, {u'type': u'STRING', u'姓名'：u'f0_', u'mode': u'NULLABLE'}]}}

我使用下面的python代码循环遍历它

```
resp = []
for row in listReply['rows']:
  for key,dict_list in row.iteritems():
    count = dict_list[0]
    year = dict_list[1]
    corpus = dict_list[2]
    resp.append({'count': count['v'],'year':year['v'],'corpus':corpus['v']}) 
```

如何检查这是否`listReply['rows']`存在，例如下面的 json 响应

> {u'totalRows': u'0', u'kind': u'bigquery#queryResponse', u'jobComplete': True, u'jobReference': {u'projectId': u'1039435439624', u'jobId' : u'job_8efc645852c34515bcff4ab3969772fd'}, u'schema': {u'fields': [{u'type': u'INTEGER', u'name': u'sum_for_the', u'mode': u'NULLABLE'} , {u'type': u'INTEGER', u'name': u'corpus_date', u'mode': u'NULLABLE'}, {u'type': u'STRING', u'name': u 'f0_', u'mode': u'NULLABLE'}]}}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:08:36.883

```
for row in listReply.get('rows', []): 
```

如果 listReply 有一个键“rows”，这将遍历相应的值。如果键不存在，则返回默认值，在这种情况下它应该是一个空列表，因此`for`不会抱怨，因为它是可迭代的。

另一种方法是在进入 for 循环之前测试密钥。

```
if 'rows' in listReply:
    for row in listReply['rows']:
        ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T19:05:09.733

您可以使用

```
if key in aDict:
  # Operations 
```

测试 python 字典中是否存在条目。如果它是一个空列表，您也可以这样做：

```
if key in aDict and aDict[key]:
  # Operations 
```

因为评估是从左到右的，如果 key 缺失，第二次检查将不会执行，但如果它存在且为空，第二次检查将跳过操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:18:51.493

要检查某个键是否存在于`dict`使用`in`关键字中。

```
>>> d = {}
>>> 1 in d
16: False
>>> d[1] = 1
>>> 1 in d
17: True
>>> d
18: {1: 1} 
```

所以用你的例子

```
>>> d = {u'totalRows': u'0', u'kind': u'bigquery#queryResponse', u'jobComplete': True, u'jobReference': {u'projectId': u'1039435439624', u'jobId': u'job_8efc645852c34515bcff4ab3969772fd'}, u'schema': {u'fields': [{u'type': u'INTEGER', u'name': u'sum_for_the', u'mode': u'NULLABLE'}, {u'type': u'INTEGER', u'name': u'corpus_date', u'mode': u'NULLABLE'}, {u'type': u'STRING', u'name': u'f0_', u'mode': u'NULLABLE'}]}}
>>> 'rows' in d
19: False 
```

# nsstring - 如何将图像和密钥存储到 NSMutableDictionary

> ID：13591212
> 
> 赞同：0
> 
> 时间：2012-11-27T19:03:52.047
> 
> 标签：nsstring, uiimage, nsmutabledictionary

写入我的 NSMutableDictionary“字典”时收到错误消息。

**从我的项目列表类中实现（如下）时：**

```
- (void)setImage:(UIImage *)i forKey:(NSString *)s
{
[dictionary setObject:i forKey:s];
// Create full path for image
NSString *imagePath = [self imagePathForKey:s];

// Turn image into JPEG data,
NSData *d = UIImageJPEGRepresentation(i, 0.5);

// Write it to full path
[d writeToFile:imagePath atomically:YES];
} 
```

**从 DetailViewController:imagePickerController:**

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
NSString *oldKey = [_detailItem imageKey];

//did the item already have an image
if (oldKey) {
    //delete old image
    [[RoomList sharedStore] deleteImageForKey:oldKey];
}

//get picked image from info dictionary
UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

//create CFUUID object; it knows how to create uique identifier strings
CFUUIDRef newUniqueID = CFUUIDCreate(kCFAllocatorDefault);

//create string from unique identifier
CFStringRef newUniqueIDString = CFUUIDCreateString(kCFAllocatorDefault, newUniqueID);

//use unique ID to set our item's imageKey
NSString *key = (__bridge NSString *)newUniqueIDString;
[_detailItem setImageKey:key];
NSLog(@"image key: %@", key);

[_detailItem setImage:image forKey:key];

//tell objects ointed to by newUniqueIDString and newUniqueID to lose an owner to avoid
//memory leak
CFRelease(newUniqueIDString);
CFRelease(newUniqueID);

//remove image picker (dismiss method)
[self dismissViewControllerAnimated:YES completion:nil];
[self configureView];
} 
```

**我遇到了以下错误，它与 [_detailItem setImage:image forKey:key]; imagePickerController 中的操作：** -[NSManagedObject setImage:forKey:]：无法识别的选择器发送到实例 0x8195770

我的猜测是 UIImage *image、NSString *key 或两者都无法传递给 objectForKey 方法“setImage:forKey”。有什么办法可以解决这个问题，或者绕过它？

谢谢！

# c# - 在函数c#中放置break

> ID：13591213
> 
> 赞同：0
> 
> 时间：2012-11-27T19:03:55.137
> 
> 标签：c#, switch-statement

我有一个 switch 语句：

```
swtich(x)
{
    case 1:
           ...
           break;
    case 2:
           ...
           break;
} 
```

我想把`...`代码放在一个函数中，但我也想把 break... 所以我想要这样的东西

```
void func()
{
     ...;
     break;
}

swtich(x)
{
    case 1:
           func();
    case 2:
           func();
} 
```

Break 给出错误（我知道为什么）但我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:05:19.227

你不能。你能做的最好的事情是：

```
swtich(x)
{
    case 1:
           func();
           break;
    case 2:
           func();
           break;
} 
```

有关break 用途的讨论，请参见[此处：](http://msdn.microsoft.com/en-US/library/adbctzc4%28v=VS.80%29.aspx)

> break 语句终止它出现的最近的封闭循环或 switch 语句。控制权被传递给终止语句之后的语句（如果有）。

如果你把它放在一个函数中，它怎么知道它应该应用于哪个循环或 switch 语句？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:07:33.343

你不能把它`break`放在另一种方法中。

虽然如果你想做同样`case 1`的`case 2`事情，这是合法的：

```
switch (x)
{
    case 1:
    case 2:
        func();
        break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T19:08:11.270

正如其他人所说，这是不可能的。这样看，如果执行到该行时您不在 switch 语句中，预期的行为会是什么`break;`？

将`break;`语句放在函数调用之后。如果您希望函数在给定条件下停止执行，请使用该`return;`语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T19:05:45.980

不要在函数中放置中断。干净利落。

```
switch(x)
{
    case 1:
           func();
           break;
    case 2:
           func();
           break;
} 
```

# android - 修复 android proguard

> ID：13591215
> 
> 赞同：0
> 
> 时间：2012-11-27T19:04:04.150
> 
> 标签：android, proguard

这是控制台输出：

```
 [2012-11-27 21:37:04 - com.generalquiz.SplashActivity] Proguard returned with error code 1\. See console
            [2012-11-27 21:37:04 - com.generalquiz.SplashActivity] 
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Proguard returned with error code 1\. See console
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find superclass or interface com.paypal.android.MEP.PayPalResultDelegate
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.datatransfer.DataProxy: can't find superclass or interface java.awt.datatransfer.Transferable
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.datatransfer.NativeClipboard: can't find superclass or interface java.awt.datatransfer.Clipboard
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController$1: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController$1: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.Sasl
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmCallback
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmChoiceCallback
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: javax.activation.CommandInfo: can't find referenced class java.beans.Beans
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: javax.activation.CommandInfo: can't find referenced class java.beans.Beans
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.ContextStorage: can't find referenced class java.awt.Toolkit
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.ContextStorage: can't find referenced class java.awt.GraphicsEnvironment
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.ContextStorage: can't find referenced class java.awt.Toolkit
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity]  at proguard.Initializer.execute(Initializer.java:321)
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity]  at proguard.ProGuard.initialize(ProGuard.java:211)
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity]  at proguard.ProGuard.execute(ProGuard.java:86)
            [2012-11-27 21:40:45 - com.generalquiz.SplashActivity]  at proguard.ProGuard.main(ProGuard.java:492)
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Proguard returned with error code 1\. See console
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find superclass or interface com.paypal.android.MEP.PayPalResultDelegate
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.datatransfer.DataProxy: can't find superclass or interface java.awt.datatransfer.Transferable
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.datatransfer.NativeClipboard: can't find superclass or interface java.awt.datatransfer.Clipboard
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.fortumo.FortumoPaymentProvider$1: can't find referenced class com.fortumo.android.Fortumo
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.fortumo.FortumoPaymentProvider$1: can't find referenced class com.fortumo.android.Fortumo
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.fortumo.FortumoPaymentProviderController: can't find referenced class com.fortumo.android.FortumoActivity
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalResultDelegate
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController: can't find referenced class com.paypal.android.MEP.PayPalPayment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController$1: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController$1: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController$1: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.scoreloop.client.android.core.paymentprovider.paypalx.PayPalXPaymentProviderController$1: can't find referenced class com.paypal.android.MEP.PayPal
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.Sasl
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.Sasl
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.SaslClient
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.SaslClient
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.SaslClient
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.SaslClient
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.SaslClient
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.SaslException
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.SaslClient
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.SaslClient
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator: can't find referenced class javax.security.sasl.SaslException
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.auth.callback.NameCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.auth.callback.NameCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmChoiceCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmChoiceCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmChoiceCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmChoiceCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.auth.callback.NameCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: com.sun.mail.imap.protocol.IMAPSaslAuthenticator$1: can't find referenced class javax.security.sasl.RealmChoiceCallback
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: javax.activation.CommandInfo: can't find referenced class java.beans.Beans
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: javax.activation.CommandInfo: can't find referenced class java.beans.Beans
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.ContextStorage: can't find referenced class java.awt.Toolkit
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.ContextStorage: can't find referenced class java.awt.GraphicsEnvironment
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.ContextStorage: can't find referenced class java.awt.Toolkit
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.datatransfer.TextFlavor: can't find referenced class java.awt.datatransfer.SystemFlavorMap
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: org.apache.harmony.awt.datatransfer.TextFlavor: can't find referenced class java.awt.datatransfer.DataFlavor
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity]       You should check if you need to specify additional program jars.
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] Warning: there were 268 unresolved references to classes or interfaces.
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity]          You may need to specify additional library jars (using '-libraryjars').
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity] java.io.IOException: Please correct the above warnings first.
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity]  at proguard.Initializer.execute(Initializer.java:321)
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity]  at proguard.ProGuard.initialize(ProGuard.java:211)
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity]  at proguard.ProGuard.execute(ProGuard.java:86)
            [2012-11-27 21:44:45 - com.generalquiz.SplashActivity]  at proguard.ProGuard.main(ProGuard.java:492) 
```

还有我的 proguard.cfg ：

```
 -optimizationpasses 5
            -dontusemixedcaseclassnames
            -dontskipnonpubliclibraryclasses
            -dontpreverify
            -verbose
            -optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

            -keep public class * extends android.app.Activity
            -keep public class * extends android.app.Application
            -keep public class * extends android.app.Service
            -keep public class * extends android.content.BroadcastReceiver
            -keep public class * extends android.content.ContentProvider
            -keep public class * extends android.app.backup.BackupAgentHelper
            -keep public class * extends android.preference.Preference
            -keep public class com.android.vending.licensing.ILicensingService

            -keepclasseswithmembernames class * {
                native <methods>;
            }

            -keepclasseswithmembers class * {
                public <init>(android.content.Context, android.util.AttributeSet);
            }

            -keepclasseswithmembers class * {
                public <init>(android.content.Context, android.util.AttributeSet, int);
            }

            -keepclassmembers class * extends android.app.Activity {
               public void *(android.view.View);
            }

            -keepclassmembers enum * {
                public static **[] values();
                public static ** valueOf(java.lang.String);
            }

            -keep class * implements android.os.Parcelable {
              public static final android.os.Parcelable$Creator *;
            }

            -keep class com.scoreloop.client.android.core.** { *; }
            -keep class com.facebook.android.** { *; } 
```

我搜索了proguard，但我不清楚如何解决这个问题。我应该在 proguard.cfg 中写什么，如果我忽略任何类意味着它不会混淆代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:24:24.713

您可以在配置中添加：

```
-dontwarn com.sun.mail.imap.protocol.**
-dontwarn com.scoreloop.client.android.core.paymentprovider.paypalx.**
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:23:52.730

要完全禁用混淆，请添加

```
-dontobfuscate 
```

如果您更喜欢混淆，我认为您需要使用 -keep 标记它在运行时找不到的类

这是我过去使用过的一个很好的资源：http: [//proguard.sourceforge.net/index.html#/manual/optimizations.html](http://proguard.sourceforge.net/index.html#/manual/optimizations.html)

# c# - 我的代码会被击中吗？并发字典 TryGetValue(..)

> ID：13591218
> 
> 赞同：0
> 
> 时间：2012-11-27T19:04:08.943
> 
> 标签：c#, .net, concurrency, concurrentdictionary, trygetvalue

如果我有一个并发字典，并且我尝试 TryGetValue，并且我测试它是否失败，我会做一些事情，但如果它没有失败，并且从 TryGetValue 函数检索到的值等于我尝试 TryGetValue 之前的值，我做点别的。

我的问题是，（假设我的 ConcurrentDicationary 中的任何内容都不会设置为默认值（DateTime）），我的第二个 if 语句会真正执行吗？还是鉴于目前的情况是不可能的？

```
var m_unitsWaitingForReadResponse = new ConcurrentDictionary<string, DateTime>();
DateTime outVal = default(DateTime);
if (!m_unitsWaitingForReadResponse.TryGetValue("teststring", out outVal))
{
    //Do Stuff
}
if (outVal == default(DateTime))
{
    //Do Stuff 2
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:08:59.130

如果提供的键的值不在 ConcurrentDictionary 中，则第二个 if 块将始终执行。

阅读此 URL 的值的参数部分

[ConcurrentDictionary.TryGetValue 方法](http://msdn.microsoft.com/en-us/library/dd267270.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T21:12:02.840

MSDN 文档指出，如果字典中不存在密钥，`TryGetValue`则将返回。`default(TValue)`所以是的，它应该执行。

`TryGetValue`您可以通过简单地在 first 上使用`else`子句来测试返回值`if`，如下所示：

```
m_unitsWaitingForReadResponse= new ConcurrentDictionary<string, DateTime>();

DateTime outVal = default(DateTime);

if (!(m_unitsWaitingForReadResponse.TryGetValue("teststring", out outVal)))
{
    //Do Stuff
}
else
{
    //Do Stuff 2
} 
```

我假设您的`ConcurrentDictionary`对象将使用此处未显示的代码在某些时候包含数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:07:46.903

`TryGetValue`将始终返回 false，因为您没有将任何内容放入字典中。返回 false 后，~~第一个 if 块将不会运行，但第二个 if 块将运行，~~两个 if 块都会运行，因为`outVal`将具有 的值`default(DateTime)`。

但是，如果字典中有一些数据，则它可能`default(DateTime)`是与您传递给的键关联的值`TryGetValue`。在这种情况下，第一个 if 块不会运行，但第二个 if 块会运行。

编辑：

上面第一段的原始版本是不正确的。`!`请注意if 语句中的否定 ( )：

```
if (!m_unitsWaitingForReadResponse.TryGetValue("teststring", out outVal)) 
```

该表达式的计算结果为`true`TryGetValue 返回时`false`。因此，您有以下可能性，但根据您的假设，可能性 3 不适用于您的情况：

1.  字典中不存在密钥
2.  与字典中的键关联的值不等于`default(DateTime)`
3.  与字典中的键关联的值等于`default(DateTime)`

在第一种情况下，TryGetValue 返回 false；`Do Stuff`执行；`outVal`等于`default(DateTime)`; 并`Do Stuff 2`执行。

在第二种情况下，TryGetValue 返回 true；`Do Stuff`不执行；`outVal`不等于`default(DateTime)`; 并且`Do Stuff 2`不执行。

在第三种（不可能的）情况下，TryGetValue 返回 true；`Do Stuff`不执行；`outVal`等于`default(DateTime)`; 并`Do Stuff 2`执行。

# lambda-calculus - 如何转换为 lambda 语法？

> ID：13591222
> 
> 赞同：2
> 
> 时间：2012-11-27T19:04:20.723
> 
> 标签：lambda-calculus

我试图理解的部分问题涉及以下内容：

```
twice (twice) f x , where twice == lambda f x . f (f x) 
```

我试图了解如何进行替换，以及它的含义。

我的理解是 (lambda xy . x + y) 2 3 == 2 + 3 == 5。我不明白两次（两次）是什么意思，或者 f ( fx )。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:00:53.147

有两种看待这个的方式。

### β-还原的机械应用

您可以通过扩展 FX 形式的任何子项来机械地解决这个问题`twice`- 使用这个项，您最终将消除所有出现的两次，尽管您需要注意您真正理解 lambda 演算的语法树以避免错误。

`twice`接受两个参数，因此您的表达式`twice (twice) f x`是`twice (twice) f`应用于`x`. （redex 是一个子项，您可以独立于该项的其余部分进行归约）。

展开`twice`redex 中的定义：`twice (twice) f x -> twice (twice f)`.

将其替换为原始术语 get ，这是我们可以扩展为 get`twice (twice f) x`的另一个 redex （注意此步骤中的括号）。`twice``twice f (twice f x)`

我们有两个`twice`可以在这里展开的 redexes，展开括号内的那个稍微简单一些，giving `twice f (f (f x))`，它可以再次展开为 give `f (f (f (f x)))`。

### 两次通过抽象的语义

您可以通过调用一个高阶组合器，即用于函数组合的“○”中缀组合器，以更直观的方式查看正在发生的事情：

```
f ○ g = lambda x. f (g x) 
```

很容易验证`twice f x`and`(f ○ f) x`都展开为相同的范式，即，`f (f x),`通过外延性，我们有

```
twice f = f ○ f 
```

使用它，我们可以非常直接地扩展，首先消除`twice`有利于组合组合器：

```
twice (twice) f x
= (twice ○ twice)  f x
= (twice (twice f)) x         /* expand out '○' */
= (twice (f ○ f)) x
= ((f ○ f) ○ (f ○ f)) x 
```

然后展开'○'：

```
= (f ○ f) ((f ○ f) x)
= (f ○ f) (f (f x))
= (f (f (f (f x)))) 
```

那是更多的扩展步骤，因为我们首先扩展为包含“○”运算符的术语，然后将这些运算符扩展出来，但是这些步骤更简单，更直观，您不太可能误解自己在做什么。'○' 是 Haskell 中广泛使用的标准运算符，非常值得习惯。

# javascript - 如何在正则表达式中使用全局标志

> ID：13591225
> 
> 赞同：0
> 
> 时间：2012-11-27T19:04:40.163
> 
> 标签：javascript, regex

我正在阅读有关 RegExp 的信息。我现在有一个小问题

```
var text = "cat, bat, fat";
var pattern = /.at/gi;
var matches = pattern.exec(text); 
```

通过第一次执行此操作，当我第二次执行时，我得到的只有一个匹配是 cat。我已经指定了全局标志，但直到它一次只给出一个。我是否错误地指定它或者这就是正则表达式的工作方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:09:14.680

尝试这个：

```
var text = "cat, bat, fat";
var pattern = /.at/g;
var matches = text.match(pattern); 
```

# jquery - 无需提交的表单验证

> ID：13591229
> 
> 赞同：0
> 
> 时间：2012-11-27T19:04:56.680
> 
> 标签：jquery

我正在使用 .NET MVC 3，使用 DataAnnotations 进行客户端字段验证。提交表单时一切正常，但是，表单很长，我们使用“下一步”按钮在发布之前显示和隐藏部分的 div。

我想验证表单，然后在不提交表单的情况下更改 div。我尝试了以下不同的变体，但表单总是被提交。

```
$('#btnNext').click(function (e) {
    if ($('form').valid()) {
        $('#div1').hide();
        $('#div2').show();
        return false;   
    }
    //return false;
}); 
```

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:08:06.350

使用 preventDefault 停止提交的表单：

```
$('#btnNext').click(function (e) {
    e.preventDefault();
    if ($('form').valid()) {
        $('#div1').hide();
        $('#div2').show();
        return false;   
    }
    //return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:09:03.817

添加一行`e.preventDefault();`以保持事件正常运行。

```
$('#btnNext').click(function (e) {
    e.preventDefault();
    if ($('form').valid()) {
        $('#div1').hide();
        $('#div2').show();
        return false;   
    }
    //return false;
}); 
```

# c# - 在具有最大电子邮件客户端兼容性的 Windows 上创建和显示电子邮件

> ID：13591230
> 
> 赞同：0
> 
> 时间：2012-11-27T19:05:00.433
> 
> 标签：c#, windows, vb.net, mapi

我需要创建一个可以从命令行调用的可执行文件，它将创建一封电子邮件，将文件附加到电子邮件并将电子邮件显示给用户，以便他们可以完成电子邮件并将其发送. 这应该在用户已配置为其默认设置的电子邮件客户端中完成。

这需要为尽可能多的电子邮件客户端工作。我知道使用最多的是 Outlook 2007-2010、Outlook Express、Windows Live Mail 和 Thunderbird。我将以 .NET 2.0 为目标，这样如果用户使用 Vista，它就不需要安装更新的 .NET。

Simple MAPI 能够执行上述操作，但 Outlook 2007+ 不支持它。列表中的所有其他邮件客户端都支持 Simple MAPI。我的印象是 Outlook 是唯一使用扩展 MAPI 的客户端，而且扩展 MAPI 使用起来很棘手，因此最好只使用 Outlook COM API 而不是扩展 MAPI。

首先，如果 Outlook 可用，程序将查找 Outlook 并使用 Outlook COM API 执行上述操作。我将在 VB 中实现这个组件并使用后期绑定，这样我就不会针对特定版本的 Outlook 进行编译。然后，如果未找到 Outlook，它将回退到 Simple MAPI 并尝试使用它。

由于代码中的所有这些决策，我将让这个程序记录它的活动，以便我们可以在它不工作时调试用户机器上发生的事情。

这种方法会奏效吗？你知道更好的方法吗？我的目标是最大限度地提高兼容性。

编辑

看起来 Outlook 2007+ 确实支持 Simple MAPI，但如果您运行的是 64 位版本，则 32 位可执行文件无法调用它。出于这个原因，我会坚持上述计划。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:59:45.317

Outlook 2007 supports Simple MAPI just fine.

# android - SharedPreferences - 在另一个活动中加载并清除它

> ID：13591233
> 
> 赞同：0
> 
> 时间：2012-11-27T19:05:11.687
> 
> 标签：android, android-activity, sharedpreferences

谁能看到我做错了什么:(？

我正在尝试使用按钮创建一个活动，该按钮将在其他活动的 sharedpreferences 中执行清除保存的数据。

这是清除数据活动

```
public class Clear_data extends Activity {

public Button bt1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cdata);

    LoadPreferences();

    bt1 = (Button)findViewById(R.id.cData);

    bt1.setOnClickListener(remove_data);
}

private void LoadPreferences(){
    SharedPreferences sharedPreferences = getSharedPreferences(Test.SharedP, MODE_PRIVATE);
    String strSaved1 = sharedPreferences.getString("SP1", "");

   }

View.OnClickListener remove_data = new View.OnClickListener() {

public void onClick(View v) {

    SharedPreferences sharedPreferences = getSharedPreferences(Test.SharedP, MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.clear();
    editor.commit();
    finish();
    finish();
}   
}; 
```

}

这是我试图从中清除数据的主要活动

```
public class Test extends Activity {
public TextView tv3, tv5;
public EditText et1, et2;
public Button b1, b2, b3, b4 ;
public ImageView img1, img2;
public static String SharedP = "MyPrefsFile"; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);

LoadPreferences();
}

private void SavePreferences(String key, String value){
    SharedPreferences sharedPreferences = getSharedPreferences(Test.SharedP, MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();
   }

private void LoadPreferences(){
    SharedPreferences sharedPreferences = getSharedPreferences(Test.SharedP, MODE_PRIVATE);
    String strSaved1 = sharedPreferences.getString("SP1", "");
    tv5.setText(strSaved1);
   }
View.OnClickListener convert_handlermtok = new View.OnClickListener() {

    public void onClick(View v) {
        if (et1.getText().toString().equals("")) {
            Toast.makeText(Test.this, "put sommat in then you idiot!" , Toast.LENGTH_SHORT).show();
        } else { 
        // Conversion is here
        // Defining the value and method to display the result
        int Amount = (int) Float.parseFloat(et1.getText().toString());
        int exchanged = (int) (Amount * 1.609344) ; 
        String result = String.valueOf(exchanged);
        Toast.makeText(Test.this, "Converted Speed " + (et1.getText().toString()) + 
        " Mph = " + result + " Kph", 
        Toast.LENGTH_LONG).show();  

        SavePreferences("SP1", et1.getText().toString() + 
                " Mph = " + result + " Kph");
        LoadPreferences();
    }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:16:48.857

您不必调用其他活动来清除您的共享首选项。从当前活动开始就足够了。

顺便提一句。您可以使您的 sharedPreference 成为该类的属性，而不是每次需要时都打开它。

# c++ - 当它是结构的属性时，如何通过引用传递多维数组？

> ID：13591237
> 
> 赞同：0
> 
> 时间：2012-11-27T19:05:21.190
> 
> 标签：c++, arrays, pointers, struct, cuda

我有以下内容：

```
struct LR { double eps_dielect; 
        double sgm_conductivity; 
        double eno_ns_surfref;
        double frq_mhz; 
        double conf; 
        double rel;
        double erp;
        int radio_climate;  
        int pol;
        float antenna_pattern[361][1001];
          } LR; 
```

我需要将 LR.antenna_pattern 传递给一个函数，在 CUDA 设备中分配内存然后复制它。float** 类型应该代表 LR.antenna_pattern[361][1001] 就好了，但我不知道如何实例化 float** 变量，以便它是指向 LR.antenna_pattern 的指针

我尝试 float** antennaPattern = (void**)&LR.antenna_pattern 但它不起作用。如何创建指向 LR.antenna_pattern 的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:39:00.383

一种方法是展平您的 2D 数组并以 1D 方式处理它，并使用指针算法来处理行和列维度。首先在您的结构定义中，将天线模式元素替换为：

```
struct LR { 
.
.
float *antenna_pattern;
} LR; 
```

然后你需要做一个主机端 malloc 来分配空间：

```
#define COL 1001
#define ROW 361
#define DSIZE (ROW*COL)

LR.antenna_pattern = (float *)malloc(DSIZE*sizeof(float)); 
```

还有一个设备端 cuda malloc：

```
float *d_antenna_pattern;
cudaMalloc((void **) &d_antenna_pattern, DSIZE*sizeof(float)); 
```

到设备的副本如下所示：

```
cudaMemcpy(d_antenna_pattern, LR.antenna_pattern, DSIZE*sizeof(float), cudaMemcpyHostToDevice); 
```

当您想引用这些数组时，您必须执行指针运算，例如：

```
float my_val_xy = ap[(x*COL)+y];  // to access element at [x][y] on the device

float my_val_xy = LR.antenna_pattern[(x*COL)+y]; // on the host 
```

如果你想在整个过程中保持二维数组下标，你可以使用适当的 typedef 来做到这一点。例如，请参阅我[对此问题](https://stackoverflow.com/questions/12924155/sending-3d-array-to-cuda-kernel/12925014#12925014)的回答中的第一个代码示例。为了把它画出来，你需要从 typedef 开始：

```
#define COL 1001
#define ROW 361
#define DSIZE (ROW*COL)

typedef float aParray[COL]; 
```

并修改您的结构定义：

```
struct LR { 
.
.
aParray *antenna_pattern;
} LR; 
```

主机端 malloc 看起来像：

```
LR.antenna_pattern = (aParray *)malloc(DSIZE*sizeof(float)); 
```

设备端 cuda malloc 看起来像：

```
aParray *d_antenna_pattern;
cudaMalloc((void **) &d_antenna_pattern, DSIZE*sizeof(float)); 
```

到设备的副本如下所示：

```
cudaMemcpy(d_antenna_pattern, LR.antenna_pattern, DSIZE*sizeof(float), cudaMemcpyHostToDevice); 
```

设备内核定义将需要一个函数参数，例如：

```
__global__ void myKernel(float ap[][COL]) { 
```

然后在内核内部，您可以访问 x,y 处的元素，如下所示：

```
float my_val_xy = ap[x][y]; 
```

现在回答一个后续问题，询问如果 LR 无法更改该怎么办，这里有一个完整的示例代码，它结合了其中一些想法而不修改 LR 结构：

```
#include<stdio.h>

// for cuda error checking
#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            return 1; \
        } \
    } while (0)

struct LR {
  int foo;
  float antenna_pattern[361][1001];
  } LR;

__global__ void mykernel(float ap[][1001]){

  int tid = threadIdx.x + (blockDim.x*blockIdx.x);
  float myval = 0.0;

  if (tid == 0){
    for (int i=0; i<361; i++)
      for (int j=0; j<1001; j++)
         ap[i][j] = myval++;
  }
}

int main(){

  typedef float aParray[1001];

  aParray *d_antenna_pattern;
  cudaMalloc((void **) &d_antenna_pattern, (361*1001)*sizeof(float));
  cudaCheckErrors("cudaMalloc fail");
  float *my_ap_ptr;
  my_ap_ptr = &(LR.antenna_pattern[0][0]);

  for (int i=0; i< 361; i++)
    for (int j=0; j<1001; j++)
      LR.antenna_pattern[i][j] = 0.0;
  cudaMemcpy(d_antenna_pattern, my_ap_ptr, (361*1001)*sizeof(float), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudaMemcpy fail");
  mykernel<<<1,1>>>(d_antenna_pattern);
  cudaCheckErrors("Kernel fail");

  cudaMemcpy(my_ap_ptr, d_antenna_pattern, (361*1001)*sizeof(float), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudaMemcpy 2 fail");
  float myval = 0.0;
  for (int i=0; i<361; i++)
    for (int j=0; j<1001; j++)
      if (LR.antenna_pattern[i][j] != myval++) {printf("mismatch at offset x: %d y: %d actual: %f expected: %f\n", i, j, LR.antenna_pattern[i][j], --myval); return 1;}
  printf("Results match!\n");
  return 0;
} 
```

如果您更喜欢使用扁平化方法，请将`d_antenna_pattern`定义替换为：

```
float *d_antenna_pattern; 
```

并将核函数参数对应更改为：

```
__global__ void mykernel(float *ap){ 
```

然后使用内核中的指针算术方法访问：

```
ap[(i*1001)+j] = myval++; 
```

# sql-server-2008 - 使用动态 SQL + 变量会加快我的查询速度吗？

> ID：13591249
> 
> 赞同：0
> 
> 时间：2012-11-27T19:06:32.040
> 
> 标签：sql-server-2008, tsql, variables

我最近意识到，当我在过滤器中引用变量而不是 SQL Server 2008 中的实际值时，查询会慢得多。例如：

```
SELECT table_A.fruit
, SUM(table_B.units)
FROM table_A LEFT JOIN table_B
ON table_A.fruit = table_B.fruit_name
WHERE time_of_sale BETWEEN '2012-11-01' AND '2012-11-25' 
```

比

```
DECLARE @date1 DATE = '2012-11-01'
, @date2 DATE = '2012-11-25'

SELECT table_A.fruit
, SUM(table_B.units)
FROM table_A LEFT JOIN table_B
ON table_A.fruit = table_B.fruit_name
WHERE time_of_sale BETWEEN @date1 AND @date2 
```

将我的查询更改为此会使查询与我发布的第一个查询一样快：

```
DECLARE @date1 DATE = '2012-11-01'
, @date2 DATE = '2012-11-25'

DECLARE @exec VARCHAR(8000)

SELECT @exec =
'
SELECT table_A.fruit
, SUM(table_B.units)
FROM table_A LEFT JOIN table_B
ON table_A.fruit = table_B.fruit_name
WHERE time_of_sale BETWEEN ''' + @date1 + ''' AND ''' + @date2 + '''
'
EXEC(@exec) 
```

# tsql - 过度分区不适用于加权 AVG Calc

> ID：13591250
> 
> 赞同：0
> 
> 时间：2012-11-27T19:06:35.337
> 
> 标签：tsql, average, weighted

我不知道我是怎么想念这个的，但我确定它是从深夜开始的！任何帮助表示感谢，假设我们正在使用 NorthWind 计算加权 AVG

```
USE NORTHWIND
Select  OD.UnitPrice,OD.Quantity,
sum(OD.UnitPrice*OD.Quantity)/sum(OD.Quantity) OVER (PARTITION BY
OD.UnitPrice, OD.Quantity) as[ W-AVERAGE] 
 From [Order Details] OD 
```

关于为什么 SQL 一直说 Column 'Order Details.UnitPrice' 在选择列表中无效，我缺少什么，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。？我认为使用 Partition By 解决了必须有一个 group by？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T20:12:48.203

已解决：您必须在每个聚合中使用分区，错误消息有点误导，但请记住，每当您使用分区时，它必须在任何聚合函数的每个实例中使用！

```
 Select OD.UnitPrice,OD.Quantity,
           sum(OD.UnitPrice*OD.Quantity) Over (PARTITION BY OD.UnitPrice,  
           OD.Quantity)/sum(OD.Quantity) OVER (Partition By OD.Quantity) as[W-AVERAGE] 
           From [Order Details] OD 
```

# ios - 在ios后台模式下打开tcp连接

> ID：13591252
> 
> 赞同：0
> 
> 时间：2012-11-27T19:06:43.773
> 
> 标签：ios, tcp, voip

我为 ios 开发自定义软电话。我使用 TCP 连接作为信令。几乎一切正常。

问题：当软件电话处于后台模式时，有时服务器或路由器端的连接会关闭。软电话重新建立它 - 但这个新连接似乎不稳定；它会在 20-25 秒内再次关闭。目前尚不清楚它为何关闭。iOS 可以关闭此类连接吗？

可以在 ios 后台模式下毫无问题地创建 TCP 连接吗？有人可以分享经验吗？

谢谢！

PS 我根据需要为 voip 应用程序添加了一对套接字流，并且 .plist 文件包括 voip 和音频模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:53:54.203

发现。我尝试创建 tcp 套接字，使其可被 iOS 跟踪并连接到主机。

但正确的顺序必须是：1）创建套接字 2）在其上调用 connect 3）等待套接字将被连接（对于非阻塞套接字）。我在 select() 调用中检查了套接字是否可写。4) 使 iOS 可跟踪套接字 - 为该套接字创建 CFReadStream/CFWriteStream 对，设置必要的属性并打开读取流。

在这个序列中它起作用。

# php - ajaxSubmit 错误捕获

> ID：13591253
> 
> 赞同：1
> 
> 时间：2012-11-27T19:06:46.913
> 
> 标签：php, ajax

我无法让 ajaxSubmit 捕获错误：

```
$(document).ready(function(){

        $("#supportForm").validate({
              rules: {
                 //validation
              },

              messages: {              
                 //messages
              },

              submitHandler: function(form) {
                    $(form).ajaxSubmit({
                        url:"ajax/supportform",
                        type:"GET",
                        dataType: 'json',
                        error: function() { alert('error'); },
                        success: function() {alert('success'); },

                    });
              }

        });  
    }) 
```

我必须在我的 php 脚本中返回什么才能让它触发错误事件？

我尝试返回一个带有 error=>0 、 exit(json_encode('error'=>'0'); 等的数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T20:36:40.800

请参阅 Mike de Klerk 的链接，它提供了有关如何捕获错误的线索：

似乎成功和错误回调与传递布尔错误/成功消息无关，但前提是成功调用了 url。我希望我不会得到错误结果，因为我使用的 CMS 总是返回某种内容 - 即使它是 404 或 403 页面。

无论如何，我必须从我的 php 脚本中返回一个 json 字符串：

```
<?php

$response = json_encode(array("error" => "false","message" => "this is the error message"));

return $response; 
```

然后在我的成功回调中解析它：

```
submitHandler: function(form) {
        $(form).ajaxSubmit({
            url:"ajax/supportform",
            type:"POST",
            dataType: 'json',

            error: function(data ) { alert(data); },

            success: function(response) {

            var obj = jQuery.parseJSON(response);

            if(obj.error == "true"){
                alert('error is true');
            }else{
                alert('error is false')
            }

            },

        });
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:08:34.187

编辑：要显示来自 PHP 的一些特定错误描述，您应该阅读这个问题：[jQuery Ajax error handling, show custom exception messages](https://stackoverflow.com/questions/377644/jquery-ajax-error-handling-show-custom-exception-messages)

让你的服务器产生一些错误，使用 PHP 你可以这样做

```
<?php
header("HTTP/1.0 404 Not Found");
?> 
```

查看头函数的文档：http: [//nl.php.net/manual/en/function.header.php](http://nl.php.net/manual/en/function.header.php)

您在这里所做的是为您的网络浏览器提供不属于典型 HTML 源的数据，通过这些数据，网络浏览器知道出了问题。

您实际上可以将所需的所有元数据添加到网页请求的标头中，但是当网络浏览器不知道这意味着什么时，它就会被忽略。请参阅此处的定义或状态代码：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:11:03.583

将 url 更改为不存在的内容以强制出错

```
 function(form) {
                $(form).ajaxSubmit({
                    url:"ajax/supportform001",
                    type:"GET",
                    dataType: 'json',
                    error: function() { alert('error'); },
                    success: function() {alert('success');} // <-was an extra comma
                });
          } 
```

# html - 具有固定元素和多个滚动条的特定 CSS 布局

> ID：13591258
> 
> 赞同：2
> 
> 时间：2012-11-27T19:07:09.087
> 
> 标签：html, css, positioning

在过去的几天里，我对网站想要的特定布局有一些问题。我添加了一张图片来解释布局以及我在下面尝试的一些 CSS 代码。我尝试使用浮动布局、绝对定位和各种组合来修复布局，但我似乎无法做到正确。我希望你们中的任何人都可以帮助我解决这个问题。

这是布局图像：

![带有描述布局应该如何的图像](../Images/c013a0e0ecb5a42c18bbcc8549cdd062.png)

这是CSS代码：

```
html, body {
    overflow:hidden;
}

* {
    margin:0;
    padding:0;
}

.header {
    background-color:#CCC;
    position:fixed;
    left:0;
    top:0;
    width:100%;
    height:40px;
}

.wrapper {
    position:absolute;
    width:100%;
    top:40px;
    bottom:40px;
}

.left {
    float:left;
    overflow-y:scroll;
    width:30%;
    min-width:300px;
    height:100%;
}

.right {
    float:left;
    overflow-y:scroll;
    right:0;
    width:70%;
    height:100%;
}

.footer {
    background-color:#000;
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    min-width:500px;
    height:40px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:26:37.233

这是你想要的吗？[演示](http://jsfiddle.net/GyN9P/1/)

消除

```
.wrapper
{
    position:absolute;
    width:100%;
    top:40px;
    bottom:40px;
}

.left
{
    float:left;
    overflow-y:scroll;
    width:30%;
    min-width:300px;
    height:100%;
}

.right
{
    float:left;
    overflow-y:scroll;
    right:0;
    width:70%;
    height:100%;
} 
```

用。。。来代替

```
div.left, 
div.right {
    display:inline;
    float: left;
    position: relative;
    height: 100%;
    overflow-y: scroll;
}

.left {
    width: 30%;
}

.right {
    width: 70%;
} 
```

**更新** [演示](http://jsfiddle.net/GyN9P/2/)

```
*
{
    margin:0;
    padding:0;
}

div.wrapper {
    width: 100%;
    min-width: 600px; /* If the window gets bellow 600px .left will stay 30% of 600 and .right will stay 70% of 600*/
}

div.left, 
div.right {
    display:inline;
    float: left;
    position: relative;
    height: 100%;
    overflow-y:scroll; 
}

.left {
    width: 30%;
    background: red;
}

.right {
    width: 70%;
    background:green;
}

.header
{
    background-color:#CCC;
    position:fixed;
    left:0;
    top:0;
    width:100%;
    height:40px;
}

.wrapper
{
    position:absolute;
    width:100%;
    top:40px;
    bottom:40px;
}

.footer
{
    background-color:#000;
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    min-width:500px;
    height:40px;
}​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T08:38:44.407

我们最终使用了 flex-box 布局，以便能够使用例如 300px 并让其余部分保持流畅。

# scala - 我可以将多个 servlet 添加到 WebAppContext 吗？

> ID：13591259
> 
> 赞同：1
> 
> 时间：2012-11-27T19:07:10.880
> 
> 标签：scala, servlets, jetty, scalatra

我有以下 Scala 代码来使用 Scalatra 设置 Jetty 服务器。

```
val server = new Server(8080)
val context = new WebAppContext()
context.setResourceBase("visualization")
context.addServlet(new ServletHolder(new CallTreeServlet(dataProvider)), "/*")
context.addServlet(new ServletHolder(new DataLoadingServlet(dataProvider)), "/*")
server.setHandler(context) 
```

我的问题是它似乎只有在我注册一个 servlet 时才有效。

如果我注册了多个，就像我在发布的代码中所做的那样，它只会加载其中一个。

是否可以加载多个 servlet？我猜是这样，但我不知道怎么做。

如果我尝试从第一个 servlet 加载页面，则会收到此错误消息，该消息仅引用属于第二个 servlet 的页面：

```
Requesting "GET /callTrees" on servlet "" but only have:
GET /components
POST /load
POST /searchCallTrees
POST /selectPlugIn 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:25:17.267

要解决此问题，您应该验证 servlet 生命周期。一种方便的方法是仔细阅读 servlet 容器的日志，以查看它在启动 Web 应用程序时报告的内容。它应该告诉您每个 Web 应用程序（servlet 上下文）和每个 servlet。. .

但是，我想我明白你的问题是什么。您的 servlet 路径映射有点时髦。在我看来，您正在映射两个 servlet 以接收所有请求。从实际的角度来看，这是行不通的，并且在 servlet 规则方面可能行不通。从 servlet 规范：

```
SRV.11.2
Specification of Mappings
In the Web application deployment descriptor, the following syntax is used to define
mappings:
• A string beginning with a ‘/’ character and ending with a ‘/*’ suffix is used
for path mapping.
• A string beginning with a ‘*.’ prefix is used as an extension mapping.
• A string containing only the ’/’ character indicates the "default" servlet of
the application. In this case the servlet path is the request URI minus the con-
text path and the path info is null.
• All other strings are used for exact matches only. 
```

我建议你让它们都独一无二。现在看起来，它们都位于“/*”，有点像“默认 servlet”，但不是 . . .

为什么不尝试“/first/ *”和“/second/* ”作为健全性检查。然后从那里开始获取您喜欢的配置。

# java - 循环查找数组java的总和

> ID：13591263
> 
> 赞同：-5
> 
> 时间：2012-11-27T19:07:32.787
> 
> 标签：java, arrays, class, loops, sum

我正在制作将类数组中的值相加的程序。我不断收到有关二元运算符的错误。我的代码是：

```
public static int sum(Array[] x){
   int sum = 0;
   for (int i = 0; i < x.length; i++){
       sum += x[i];
   }
   return sum;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:09:20.410

看来您正在使用`Array[]`，并且没有`operator+`类型`Array`（这是 的类型`x[i]`）

您可能想要`int[]`作为`x`.

```
public static int sum(int[] x){
//                     ^^
//               note the fixed type of the array
   int sum = 0;
   for (int i = 0; i < x.length; i++){
       sum += x[i];
   }
   return sum;
} 
```

* * *

**奖励**：为了简单性和可读性 - 您可能需要考虑使用[for-each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

```
public static int sum(int[] x){
       int sum = 0;
       for (int e : x){
           sum += e;
       }
       return sum;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:09:57.763

你的参数是一个数组类型的数组。你期望看到一个 int "+" 一个 Array 对象是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:10:20.580

您需要使用 int[] 而不是 Array[] 这是一个泛型类型。

# sql-server-2008 - ASP 无法连接到 SQL Server 数据库

> ID：13591273
> 
> 赞同：1
> 
> 时间：2012-11-27T19:08:00.250
> 
> 标签：sql-server-2008, asp-classic

我试图让一个经典的 ASP 应用程序连接到本地 SQL Server 2008 数据库。该应用程序和数据库是由其他人构建的。我只是想让它们在我的机器（Windows 7）上安装和运行。

当 ASP 应用程序尝试连接到数据库时，我收到以下错误：

```
Could not connect to database:
Error Number: -2147467259
Error Message: [ConnectionOpen (Connect()).] does not exist or access denied. 
```

我在 Windows 事件查看器中看不到任何消息。我正在查看：事件查看器-> Windows 日志-> 应用程序。

这是使用简单还原的全新数据库安装。SQL Server 安装使用默认实例。SQL Server 和 Windows 身份验证都允许。我保留了现有的连接字符串（在 ASP 代码中）并尝试将其添加到我的 SQL Server 安装中。这是连接字符串：

```
strConn = "PROVIDER=SQLOLEDB;SERVER=localhost;UID=TheUser;PWD=ThePassword;DATABASE=TheDatabase;" 
```

为了将该用户添加到 SQL Server，我转到 SSMS 中的安全/登录并添加了用户和密码。我选择了有问题的数据库作为默认数据库。我认为这可能会奏效，但事实并非如此。然后，我进入 TheDatabase，然后进入 Security。我在那里添加了一个新用户，引用了我已经在服务器安全中添加的新用户。在 Owned Schemas 下，我单击了 db_owner 并在 Role Members 下检查了 db_accessadmin 和 db_owner。这些都没有给 ASP 应用程序访问数据库的权限。sid 值与`sys.database_principals`相关`sys.server_principals`登录名匹配。我可以使用此登录名登录 SSMS。

应用程序需要像这样对数据库执行选择：

```
oConn.Execute('select * from someTable') 
```

我不是 DBA，我在这里有点抓住稻草。我如何连接这个东西？

谢谢，杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:02:28.347

我突然想到 SQL Server 或 IIS 中的网站可能以具有错误权限的用户身份运行。根据我阅读的内容，SQL Server 作为本地系统运行是可以的，所以我不理会它。

在 IIS 中，我的网站使用“应用程序用户（通过身份验证）”。这是在基本设置->连接为（“编辑站点”对话框）中设置的。当我单击“测试设置...”时，授权旁边显示“无法验证对路径（`c:\mywebsitepath`）的访问”。我增加了对该目录的访问权限，但这没有帮助。在“连接为”对话框中，我将“路径凭据”更改为使用“特定用户”而不是“应用程序用户（传递身份验证）”。我将其设置为使用我登录机器的用户。之后，当我单击“测试设置...”按钮时，“授权”旁边会显示“路径可访问（`c:\mywebsitepath`）”。之后，ASP 网站就可以正常连接到 SQL Server。

由于连接字符串使用的是特定的 SQL Server 用户名和密码，我不确定为什么这会解决问题，但似乎确实如此。

# xcode - 使用 Xcode Organizer 提交到 Mac App Store

> ID：13591279
> 
> 赞同：1
> 
> 时间：2012-11-27T19:08:19.037
> 
> 标签：xcode, mac-app-store

我是从组织者那里提交的，我得到了“选择应用程序和代码签名身份”。在那之后，我得到了持续数小时的旋转圈，直到我取消并重新开始。我已经提交过一次相同的应用程序，但第一次被审阅者拒绝，因为在第一次提交后添加了 itunesconnect 中的新要求。所以我在itunesconnect中进行了更改，更改了版本，并重新构建了应用程序。没有其他变化。

我以前遇到过这种情况，但我一直在尝试，最终我会进入加载屏幕。app id 和代码签名身份都是有效的，而且我在验证过程中没有收到任何错误，所以我不确定从哪里寻找问题。

我正在使用 Xcode 4.4.1。

# powershell - 在模块/Powershell 中调用函数

> ID：13591281
> 
> 赞同：3
> 
> 时间：2012-11-27T19:08:23.187
> 
> 标签：powershell

我必须在这里遗漏一些基本的东西，但我是powershell的新手......

我编写了一个函数并将其保存在一个名为“UserSelectionList.psm1”的文件中，该函数的存根如下：

```
function Global:UserSelectionList([String[]] $UserOptions)
{
...
} 
```

然后我尝试用这个脚本调用它：

```
Import-module "l:\support downstream\solarc\cngl\powershell scripts\userselectionlist.psm1"
$Options = "a","b","c"
cls
$result = UserSelectionList $Options
echo $result 
```

产生的错误是：

```
The term 'UserSelectionList' is not recognized as the name of a cmdlet, function,
script file, or operable program. Check the spelling of the name, or if a path was
included, verify that the path is correct and try again.
At line:5 char:28
+ $result = UserSelectionList <<<<  $Options
    + CategoryInfo          : ObjectNotFound: (UserSelectionList:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException 
```

我计划在一个模块中拥有多个功能，但这就是我所在的地方。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-10-18T09:30:13.100

我遇到了同样的问题。重现步骤：

*   编写带有`Import-Module`语句的 PowerShell 脚本
*   在 PowerShell 提示符处执行脚本
*   向导入的模块添加函数
*   修改脚本调用新增功能
*   Execute the script again, in the same PowerShell session

The error went away after I added the `-Force` argument to `Import-Module`. The `-Force` argument can be removed once the function in the imported module is able to be called.

Note that [latkin](https://stackoverflow.com/users/1366219/latkin) has alluded to this solution in his [comment](https://stackoverflow.com/questions/13591281/calling-a-function-within-module-powershell#comment18631768_13591854) to the question. I'm hoping this will make it more visible.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-07T17:37:46.847

`Get-Command`仅当您没有从模块中正确导出方法时才需要。

在你的模块的最后放这个：

```
Export-ModuleMember -Function UserSelectionList 
```

请注意，它也接受通配符，例如，如果您有 5 个不同的 Get-Some-Value 函数遵循命名约定，您可以这样做

```
Export-ModuleMember -Function Get-* 
```

* * *

旁注`-Force`：所做的只是检查模块是否已加载，如果已加载，则在继续导入之前将其删除。这和说的一样：

```
Remove-Module userselectionlist.psm1
Import-Module userselectionlist.psm1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T19:46:33.107

[编辑] 我没有使用 -Force 选项进行导入模块。下面的答案不正确，但也许 Get-Command 强制刷新？无论哪种方式，为了体验的完整性，我都会离开它！

感谢 latkin 将我推向另一条我发现这一点的路径：

[如何从模块中检索命令](https://stackoverflow.com/questions/6354317/how-do-i-retrieve-the-available-commands-from-a-module)

您不仅必须导入模块，还必须“获取”它（？）

```
Import-Module -Name <ModuleName> 
Get-Command -Module <ModuleName> 
```

在我发出 Get-Command 后，一切都开始工作了！

感谢 latkin 的快速回复！

# c++ - 将指针与 v8 FunctionTemplate 一起使用会产生错误

> ID：13591282
> 
> 赞同：0
> 
> 时间：2012-11-27T19:08:27.823
> 
> 标签：c++, node.js, v8, function-template

我的模型如下

```
using namespace v8;
using namespace node;
class A {
    private:
    //something
    public:
    //something
}
class X {
private: 
    A* a;
public:
    X() {
        a = new A();
    }
    Handle<Value> myfunc(const Arguments& args) {
        //I want to access the instance's "a"
        //like instance->a;
    }
};
Handle<Value> Init(Handle<Object> target) {
    NODE_SET_METHOD(target,'myfunc',Z);
}
Handle<Value> Z(const Arguments& args) {
    X* b = new X();
    Local<FunctionTemplate> tpl = FunctionTemplate::New(b->myfunc);
    //some more code
} 
```

给我以下错误

```
error: no matching function for call to ‘v8::FunctionTemplate::New(<unresolved overloaded function type>)’ 
```

我想要达到的目标：

```
var mymodel=require('build/Release/func.node');
//1\. Get a new object
a = mymodel.create();
b = mymodel.create();     

//2\. This object has some properties that are generated in C++.
// result of (new X() in C++); 
a.message // "Hello" 
//3\. This object has some methods that can use the data stored in C++ instances
a.setMessage("hi") //sets message hi in C++ instance
a.getMessage() // "hi" // retrieves from the C++ Object. 
b.getMessage() // "bazinga" //retrieved from the C++ object 
```

简而言之：

试图将 JavaScript 对象与 C++ 类对象相关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:42:57.657

您不能将`FunctionTemplate::New`指针传递给成员函数。您需要静态函数或非成员函数。

# image - 使用双三次插值

> ID：13591283
> 
> 赞同：0
> 
> 时间：2012-11-27T19:08:27.573
> 
> 标签：image, image-processing

我在维基百科上读到过，理论听起来不错，但我不知道是否适用于实践。
我有一个像这样的小例子：
原始图像矩阵

```
1 2
3 4 
```

如果我想将图像大小加倍，那么新矩阵是

```
x x x x
x x x x
x x x x
x x x x 
```

现在，有趣的部分是如何将原始矩阵中的旧值转移到新矩阵中，我打算这样做

```
1 x 2 x
x x x x
3 x 4 x
x x x x 
```

然后对其应用双三次插值（此时忘记使用 16 个相邻像素，我没有足够的空间在这里演示如此大的矩阵）。

现在我的问题是：
1\. 我做数据传输（从旧矩阵到新矩阵）对吗？如果不是，它应该是什么样子？
2.新矩阵中x变量的值应该是多少？对我来说，这似乎是正确的，因为至少我们有一些值来进行计算，而不是 x 符号。

```
1 1 2 2 
1 1 2 2
3 3 4 4 
3 3 4 4 
```

3\. 新矩阵中的所有像素都会被插值吗？因为边界处的像素没有足够的相邻像素来执行计算。
非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:48:59.013

插值意味着估计实际不存在的点的值。您需要从坐标系开始，所以我们只使用两个递增的整数来表示 X 位置和 Y 位置。

```
0, 0    1, 0
0, 1    1, 1 
```

您的输出需要 4x4 像素，这些像素的间隔应为 0.5，而不是输入的 1.0 间隔：

```
-0.25,-0.25   0.25,-0.25   0.75,-0.25   1.25,-0.25
-0.25, 0.25   0.25, 0.25   0.75, 0.25   1.25, 0.25
-0.25, 0.75   0.25, 0.75   0.75, 0.75   1.25, 0.75
-0.25, 1.25   0.25, 1.25   0.75, 1.25   1.25, 1.25 
```

输入中不存在输出中的坐标，因此它们都需要进行插值。

选择 -0.25 的第一个坐标的偏移量，以便第一个和最后一个坐标与输入边缘的距离相等，并通过输出和输入间隔之间的差异除以 2 来计算。例如，如果你想要10 倍缩放间隔为 0.1，初始偏移量为 (0.1-1)/2，点为 (-0.45, -0.35, -0.25, -0.15, ... 1.35, 1.45)。

双三次算法将需要原始图像之外的点的数据。最简单的解决方案是为像素使用[预乘 alpha](http://en.wikipedia.org/wiki/Premultiplied_alpha)表示，然后您可以使用 (0,0,0,0) 作为图像边界之外的任何值。

# sql - 将 .sql 文件导入 IBM DB2 Express-C

> ID：13591288
> 
> 赞同：0
> 
> 时间：2012-11-27T19:08:38.900
> 
> 标签：sql, db2

您好，我是 IBM DB2 Express-C 的新手

我有一个将数据库导出到 .sql 文件（存储在 SQLite3 中的原始数据库 - 使用 SQLite SQLite 管理器将数据库导出到 .sql 文件）

任何人都可以告诉一种将这个 .sql 文件导入 DB2 的方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:12:11.597

如果要在 DB2 的文件中执行一组语句，请在命令行 (db2clp) 中发出：

```
db2 -tvf <filename> 
```

例如，对于您的文件

```
db2 -tvf myfile.sql 
```

但是，该文件的内容与 DB2 不兼容，您必须对其进行修改，才能在 DB2 中正确运行。

基本创建表和 DML（插入、删除、更新）是跨许多数据库的 SQL 92 标准。但是如果你创建了缓冲池、表空间和其他类型的对象，你就必须修改文件很多。

# setter - Eclipse JDT AST：如何找到调用方法返回实例变量的值？

> ID：13591289
> 
> 赞同：2
> 
> 时间：2012-11-27T19:08:38.983
> 
> 标签：setter, getter, abstract-syntax-tree, eclipse-jdt

我正在使用 Eclipse JDT AST 来解析给定的 java 源代码。在解析代码时，当它遇到方法调用时，我想知道该特定方法是否返回或设置实例变量的值（基本上是为了找出被调用者方法是否是同一类调用者的 getter/setter方法）。

例如：

```
public void test(){
  //when parsing the following line I want to check whether "getName"    
  //returns a value of an instance variable.
  String x = getName();

  //when parsing the following line I want to check whether "setName"          
  //sets the value of an instance variable.
  setName("some-name");
} 
```

我使用了 AST 插件，还找到了一个可能的路径，可以帮助我从 API 中引用它，但不能。请让我知道这是否可能，如果可能，哪种方法可以帮助我获得所需的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:47:44.040

不要认为有一个 api 可以告诉您方法是 getter 还是 setter。

您将不得不编写代码来执行此操作。对于 getter，您可能只需检查方法中的最后一条语句是否是返回实例变量的 return 语句。

# list - Prolog，标识项目在当前位置的列表

> ID：13591291
> 
> 赞同：0
> 
> 时间：2012-11-27T19:08:44.793
> 
> 标签：list, prolog, win-prolog

我无法弄清楚如何在序言中写出胸部“C”在位置“L”这是我目前拥有的代码，但我认为我让它太复杂并且方向错误

```
 location(C, L).

    location(C, [[C,L]|_]).
    location(C, [_|T]) :-
            location(C, T, L). 
```

任何人都可以帮助或指出正确的方向来解决这个问题。

要检查它，我使用以下代码：

```
 location(b, [(a,10), (b,6), (c,8), (d,14)]). 
```

我现在已经改变了它并且有：

```
 location(C, L, P). 
    location(C, L, P) :- memberchk((C,P), L). 
```

和

```
 location(b, [(a,10), (b,6), (c,8), (d,14)], P). 
```

但它似乎不起作用，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:18:38.873

尝试

```
location(S, L, P) :- memberchk((S,P), L). 
```

那么你会得到

```
?- location(b, [(a,10), (b,6), (c,8), (d,14)], P).
P = 6. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:20:43.867

这是另一个，虽然 CapelliC 解决方案很好。

```
location(C, [(C,P)|_], P):-!.
location(C, [_|T], P) :- location(C, T, P). 
```

# java - 图像损坏

> ID：13591293
> 
> 赞同：0
> 
> 时间：2012-11-27T19:08:52.330
> 
> 标签：java, httpresponse, httpserver

我正在创建 httpServer 并且已经完成了文件服务器部分的编写。
但是我在下载图像时遇到了问题。

```
 FileInputStream fis = new FileInputStream(file_path);

        output = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];

        int n = 0;
        while (-1 != (n = fis.read(buffer))) {
            output.write(buffer, 0, n);
        }
        data = output.toByteArray();
         body = new String(data);

 return body 
```

我将响应主体返回到我的原始方法。

```
 // body is return value from above code, header is also  another String return value from 
    // makeHeader method
    String response = header + body;   
     byte[] Response = null;
   try{
      Response = response.getBytes("US-ASCII");
     }catch (UnsupportedEncodingException e) {}

      return Response 
```

我的服务器在处理文本文件、.html、.css 时工作正常，但不处理图像。
你能指出我做错了什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:11:55.370

如果你混合文本和二进制，你肯定会破坏数据。例如，US-ASCII 只有 7 位，任何设置了最高位的字节都将被破坏。

您应该尝试在不使用字符串或文本的情况下发送图像以避免损坏。

# android - Android 与 php 交互

> ID：13591294
> 
> 赞同：1
> 
> 时间：2012-11-27T19:08:55.767
> 
> 标签：android

我有个问题！我有一个与数据库连接的php页面连接，该方法在Froyo上运行良好，但不适用于较新版本的Android。问题是什么？

```
 public static String interact(String request){
            String result="test";
        String site = "http://xxxx.net:nnn/xxx";
        URL url = new URL(site);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();

        connection.setRequestMethod("POST");
        connection.setDoOutput(true);
        connection.connect();

        OutputStreamWriter wr = new OutputStreamWriter(connection.getOutputStream());
        wr.write(request);
        wr.flush();
        wr.close();

        Scanner in = new Scanner(connection.getInputStream());
        while(in.hasNextLine())
        result+=in.nextLine();
        connection.disconnect();
        return result;

    }
    catch (UnknownHostException e) {
        return e.getMessage();
    } catch (IOException ex) {
        return ex.getMessage();
    }
    catch (Exception ex){
        return ex.getMessage();
    }

} 
```

我需要发送数据并获得响应，但它只会在比 2.2 更新的 Android 上给我 null。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:12:27.897

您正在`Network Request`主线程上运行。

Android >=3.0 不允许这样做。你需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来调用`Network Request`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T08:53:49.757

是的，低于 3.0 的版本不允许这样做。但是，您可以通过一些设置绕过来覆盖规则，但至少不要这样做，因为它可能会给您带来应用程序崩溃。

我建议提高你的 min-SDK 级别。

# java - 从Java中的XML获取子节点的值

> ID：13591298
> 
> 赞同：1
> 
> 时间：2012-11-27T19:09:06.270
> 
> 标签：java, xml, dom

我的 xml 文件看起来像这样

```
 <InNetworkCostSharing>
                <FamilyAnnualDeductibleAmount>
                    <Amount>6000</Amount>
                </FamilyAnnualDeductibleAmount>
                <IndividualAnnualDeductibleAmount>
                    <NotApplicable>Not Applicable</NotApplicable>
                </IndividualAnnualDeductibleAmount>
                <PCPCopayAmount>
                    <CoveredAmount>0</CoveredAmount>
                </PCPCopayAmount>
                <CoinsuranceRate>
                    <CoveredPercent>0</CoveredPercent>
                </CoinsuranceRate>
                <FamilyAnnualOOPLimitAmount>
                    <Amount>6000</Amount>
                </FamilyAnnualOOPLimitAmount>
                <IndividualAnnualOOPLimitAmount>
                    <NotApplicable>Not Applicable</NotApplicable>
                </IndividualAnnualOOPLimitAmount>
 </InNetworkCostSharing> 
```

我正在尝试从中获取 Amount 值`<FamilyAnnualDeductibleAmount>`，也从`<FamilyAnnualOOPLimitAmount>`. 我如何在java中获得这些值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:15:06.823

您可以使用两个 XPath 查询`/InNetworkCostSharing/FamilyAnnualDeductibleAmount`，`InNetworkCostSharing/FamilyAnnualOOPLimitAmount`或者只获取节点`InNetworkCostSharing`并检索其两个直接子节点的值。

使用 XPath 的解决方案：

```
// load the XML as String into a DOM Document object
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
ByteArrayInputStream bis = new ByteArrayInputStream("YOUR XML".getBytes());
Document doc = docBuilder.parse(bis);

// XPath to retrieve the content of the <FamilyAnnualDeductibleAmount> tag
XPath xpath = XPathFactory.newInstance().newXPath();
XPathExpression expr = xpath.compile("/InNetworkCostSharing/FamilyAnnualDeductibleAmount/text()");
String familyAnnualDeductibleAmount = (String)expr.evaluate(doc, XPathConstants.STRING); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:16:48.257

尝试这样的事情（使用 getElementsByTagName 获取父节点，然后将值传递给子节点）：

```
 File xmlFile = new File("NetworkCost.xml");
   DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
   DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
   Document doc = dBuilder.parse(xmlFile );
   doc.getDocumentElement().normalize();

   NodeList nList = doc.getElementsByTagName("FamilyAnnualDeductibleAmount");
   String familyDedAmount = nList.item(0).getChildNodes().item(0).getTextContent();

   nList = doc.getElementsByTagName("FamilyAnnualOOPLimitAmount");
   String familyAnnualAmount = 
                            nList.item(0).getChildNodes().item(0).getTextContent(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:23:22.613

基于 StAX 的解决方案：

```
 XMLInputFactory f = XMLInputFactory.newInstance();
    XMLStreamReader rdr = f.createXMLStreamReader(new FileReader("test.xml"));
    while (rdr.hasNext()) {
        if (rdr.next() == XMLStreamConstants.START_ELEMENT) {
            if (rdr.getLocalName().equals("FamilyAnnualDeductibleAmount")) {
                rdr.nextTag();
                int familyAnnualDeductibleAmount = Integer.parseInt(rdr.getElementText());
                System.out.println("familyAnnualDeductibleAmount = " + familyAnnualDeductibleAmount);
            } else if (rdr.getLocalName().equals("FamilyAnnualOOPLimitAmount")) {
                rdr.nextTag();
                int familyAnnualOOPLimitAmount = Integer.parseInt(rdr.getElementText());
                System.out.println("FamilyAnnualOOPLimitAmount = " + familyAnnualOOPLimitAmount);
            }
        }
    }
    rdr.close(); 
```

请注意，StAX 对于像您这样的情况特别有用，它会跳过所有不必要的元素，只读取您需要的元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:27:31.300

我想我从stackoverflow找到了这个问题的解决方案

[使用 Java DOM 获取 XML 节点文本值](https://stackoverflow.com/questions/773012/getting-xml-node-text-value-with-java-dom)

# android - 安卓编译错误

> ID：13591299
> 
> 赞同：1
> 
> 时间：2012-11-27T19:09:07.227
> 
> 标签：android, c++

我需要您的帮助来编译 AOSP ICS (Android 4.0.4)。我在编译 .cpp 文件和 .h 文件时遇到了错误。那是错误日志：

```
In file included from hardware/qcom/display/libgralloc/framebuffer.cpp:53:
hardware/qcom/display/libqcomui/qcom_ui.h: In member function 'void QCBaseLayer::setS3DComposeFormat(int32_t)':
hardware/qcom/display/libqcomui/qcom_ui.h:174: error: 'HWC_HINT_DRAW_S3D_SIDE_BY_SIDE' was not declared in this scope
hardware/qcom/display/libqcomui/qcom_ui.h:176: error: 'HWC_HINT_DRAW_S3D_TOP_BOTTOM' was not declared in this scope
hardware/qcom/display/libgralloc/framebuffer.cpp: In function 'int mapFrameBufferLocked(private_module_t*)':
hardware/qcom/display/libgralloc/framebuffer.cpp:870: warning: comparison of unsigned expression < 0 is always false
hardware/qcom/display/libgralloc/framebuffer.cpp:871: warning: comparison between signed and unsigned integer expressions
hardware/qcom/display/libgralloc/framebuffer.cpp: In function 'int fb_device_open(const hw_module_t*, const char*, hw_device_t**)':
hardware/qcom/display/libgralloc/framebuffer.cpp:994: error: 'struct framebuffer_device_t' has no member named 'lockBuffer'
hardware/qcom/display/libgralloc/framebuffer.cpp:995: error: 'struct framebuffer_device_t' has no member named 'perform'
hardware/qcom/display/libgralloc/framebuffer.cpp:1011: error: 'struct framebuffer_device_t' has no member named 'numFramebuffers'
make: *** [out/target/product/gio/obj/SHARED_LIBRARIES/gralloc.msm7x27_intermediates/framebuffer.o] Error 1 
```

所以？这些是文件代码： - **framebuffer.cpp**：[AOSP ICS 4.0.4 - /hardware/display/libgralloc/framebuffer.cpp](http://pastebin.com/jVKchNSE) - **qcom_ui.h**：[AOSP ICS 4.0.4 - /hardware/qcom/display/libqcomui/qcom_ui.h](http://pastebin.com/SVhHrQWY)

# grails - Grails 安装插件 rest-client-builder 1.0.2 时出错，模块描述符错误

> ID：13591301
> 
> 赞同：5
> 
> 时间：2012-11-27T19:09:08.490
> 
> 标签：grails, plugins, dependencies

使用 Grails 2.0.4，我正在尝试`rest-client-builder:1.0.2`使用此安装...

```
grails install-plugin rest-client-builder 
```

...但 Grails 返回以下错误；我已经尝试过清理、刷新依赖项等，不断收到同样的错误......

```
:: #rest-client-builder;1.0.2: java.text.ParseException: inconsistent module descriptor file found in 'http://plugins.grails.org/grails-rest-client-builder/tags/RELEASE_1_0_2/rest-client-builder-1.0.2.pom': bad organisation: expected='' found='org.grails.plugins'; 
```

还尝试将插件链接为来自的依赖项`BuildConfig.groovy`，但我收到类似的错误...

```
compile (":rest-client-builder:1.0.2"){ export = false}

grailsCentral: bad organisation found in http://plugins.grails.org/grails-rest-client-builder/tags/RELEASE_1_0_2/rest-client-builder-1.0.2.pom: expected='' found='org.grails.plugins' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T01:54:55.357

看起来您将其放在该`dependencies`部分中，但它应该在该`plugins`部分中：

```
plugins {
   compile(':rest-client-builder:1.0.2') {
      export = false
   }
} 
```

您应该删除脚本添加的仍在其中的插件，`application.properties`并且`install-plugin`只将它们放在`BuildConfig.groovy`.

# left-join - DQl 加入和在哪里

> ID：13591302
> 
> 赞同：1
> 
> 时间：2012-11-27T19:09:10.557
> 
> 标签：left-join, dql

我试图得到这样的查询：

```
SELECT * FROM `users` u JOIN clientdetails d WHERE u.id = d.id AND d.staff_id =? 
```

所以我写了DQL：

```
SELECT u FROM PswAdminBundle:User u JOIN PswAdminBundle:ClientDetails d WHERE d.staffRep=?0 
```

但结果查询是

```
SELECT * FROM users u0_ INNER JOIN ClientDetails c1_ ON (c1_.staff_id = ?) 
```

可能是因为这两个表之间有2个关系？

在用户表中，我保留了代表客户的应用程序（客户和员工）记录的所有用户与使用两个表中的 id 的表 clientdetails 具有一对一的关系。在 clientdetails 中，我有一列 Staff_id，它返回到用户表，指向代表员工用户的记录。

我正在尝试获取与员工相关的所有客户。

# dictionary - F# 和元组输出

> ID：13591304
> 
> 赞同：4
> 
> 时间：2012-11-27T19:09:18.360
> 
> 标签：dictionary, f#, tuples

在[http://diditwith.net](http://diditwith.net/2008/01/29/WhyILoveFResultTuples.aspx)上，我看到，在 F# 中，将参数传递给原本需要它们的函数并不是绝对必要的。该语言会自动将结果和输出参数填充到一个元组中。（！）

这是语言的一般机制的某种副作用（请原谅双关语），还是 F# 规范中专门阐明并故意编程到语言中的功能？

这是一个很棒的功能，如果它被明确放入 F# 中，那么我想知道这门语言中还有哪些其他类似的金块，因为我已经仔细研究了几十个网页并阅读了三本书（作者 D . Syme、T. Petricek 和 C. Smith），我完全没有看到提到过这个特殊的技巧。

**编辑：正如 Petricek 先生在下文中所回应的那样，他确实在他的书***Real-World Functional Programming*中至少有两处提到了该功能。我的错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:48:00.550

这不是 F# 语言中其他一些更通用的机制的副作用。

它是专门为此目的而添加的。.NET 库通常通过在方法签名的末尾添加`out`（或）参数来返回多个值。`ref`在 F# 中，返回多个值是通过返回元组完成的，因此将 .NET 样式转换为典型的 F# 模式是有意义的。

我不认为 F# 有很多类似的技巧，尤其是在互操作性方面，但您可以[在此处](https://stackoverflow.com/questions/35940/elegant-snippets-of-f)和[此处](https://stackoverflow.com/questions/833180/handy-f-snippets)浏览一些方便的片段。

（*我很快查了一下，Real-World Functional Programming 在第 88 页和第 111 页简要提到了这个技巧*。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T19:46:37.103

这是使与 .NET 方法的互操作更愉快的特定功能 - 所有尾随参数都可以被视为返回值的一部分（但请注意，这只会影响尾随参数，因此具有 C# 签名的方法`void f(out int i, int j)`可以不能这样称呼）。

可以说，无论如何，out 参数只是解决 .NET 1.0 中缺少元组的一种方法。`Nullable<_>`如果它们针对框架的更高版本（通过使用类型或元组作为返回类型），那么使用它们的许多方法似乎可能会以不同的方式编写。

# java - 从 ViewPager 中的 PagerTabStrip 中删除 TabIndicator

> ID：13591306
> 
> 赞同：5
> 
> 时间：2012-11-27T19:09:20.433
> 
> 标签：java, android, android-viewpager, viewpagerindicator

我有一个使用 PagerTabStrip 来指示当前页面的 viewpager。但是，我不希望出现默认指示器。（页面标题下划线）

我尝试了几种不同的方法来删除它，但它们似乎都不起作用。

> PagerTabStrip pts = (PagerTabStrip) findViewById(R.id.pager_title_strip); pts.setTabIndicatorColor(getResources().getColor(android.R.color.transparent));

还

> PagerTabStrip pts = (PagerTabStrip) findViewById(R.id.pager_title_strip); pts.setTabIndicatorColor(Color.parseColor("#80000000"));

和

> PagerTabStrip pts = (PagerTabStrip) findViewById(R.id.pager_title_strip); pts.setTabIndicatorColor(Color.TRANSPARENT);

这些似乎都不起作用。相反，它给了我一个黑色指示器。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:09:48.170

通过查看 PagerTabStrip 的来源。我找到了以下方法：

```
/**
 * Set whether this tab strip should draw a full-width underline in the
 * current tab indicator color.
 *
 * @param drawFull true to draw a full-width underline, false otherwise
 */
public void setDrawFullUnderline(boolean drawFull) {
    mDrawFullUnderline = drawFull;
    mDrawFullUnderlineSet = true;
    invalidate();
} 
```

我没有对此进行测试，但我想这应该可以。如果没有，请发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-30T15:26:01.057

[PagerTitleStrip](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)是您所需要的。它具有相同的功能，只是没有下划线颜色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-29T16:26:47.290

如果您不想使用[PagerTitleStrip](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)，您可以将指示器颜色设置为与背景[PagerTabStrip相同的颜色](http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html)

# android - 查询列表项点击

> ID：13591309
> 
> 赞同：-1
> 
> 时间：2012-11-27T19:09:33.717
> 
> 标签：android, sqlite, listview

我已经设法将本地医疗中心列表从我的数据库显示到列表视图，并且还成功地在单击的项目上显示了祝酒词，我现在的目标是在列表中单击的项目上显示信息（地址、联系电话）和将其显示到下一个活动。我想使用 putExtras 吗？以及如何进行原始查询？而且我正在从我的数据库中选择 3 个字段。这是否意味着我还必须进行 3 个查询和 3 个捆绑包？

这是我的代码：

```
public class Health extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.health);
        displayHospitals();
    }

    public void displayHospitals (){
        DbHelper tblHL = new DbHelper(this);
        tblHL.open();
        ArrayList<String> result = tblHL.getHData();
        result = tblHL.getHData();
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, result));
         tblHL.close();
        }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        String hosp = (String)getListAdapter().getItem(position);
        Toast.makeText(this, hosp, Toast.LENGTH_SHORT).show();

    }

} 
```

这是我的 dbhelper 类

```
public class DbHelper {

public static final String Row_id = "_id";
private static final String db_DgTable = "tblDrugs";
public static final String Row_Name = "faName";
private static final String Row_Drugs = "GenericName";
public static final String Row_Desc = "faInfo";
private static final String db_Name = "dbDrDroid";
private static final String db_Table = "tblFirstAid";
private static final String db_HTable = "tblHospitals";
private static final String Row_HosName = "HospitalName";
private static final String Row_HosAdd = "Address";
private static final String Row_HosReg = "Region";
private static final String Row_HosCity = "City";
private static final String Row_HosContact = "Contact";
private static final String Row_dName = "dName";
private static final String Row_dTable = "tblDisease";
private static final int db_Version = 1;
private dbhelp ourhelper;
private static Context ourcontext;
private SQLiteDatabase ourDB;

private static class dbhelp extends SQLiteOpenHelper{

    public dbhelp(Context context) {
        super(context, db_Name, null, db_Version);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        db.execSQL("CREATE TABLE IF NOT EXISTS " + db_Table + " (" + Row_id + " INTEGER PRIMARY KEY AUTOINCREMENT, "
            + Row_Name + " TEXT NOT NULL, "
            + Row_Desc + " TEXT NOT NULL)" );

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS" + db_Table);
        onCreate(db);

    }

}

public DbHelper (Context c){
    ourcontext= c;
}

public DbHelper open(){
    ourhelper = new dbhelp(ourcontext);
    ourDB = ourhelper.getWritableDatabase();
    return this;
}

public void   close(){
    ourhelper.close();
}

public ArrayList<String> getFAData() {
    // TODO Auto-generated method stub
    ArrayList<String> comments = new ArrayList<String>();
    String [] columns = new String[]{Row_Name};
    Cursor c = ourDB.query(db_Table, columns, null, null, null, null, null);
    int iRow = c.getColumnIndex(Row_Name);
    c.moveToFirst();
    while (!c.isAfterLast()) {          
        comments.add(c.getString(iRow));
        c.moveToNext();
    }

    c.close();
    return comments;
}

public ArrayList<String> getHData(){
    ArrayList<String>  res = new  ArrayList<String>();
    String [] columns = new String []{Row_HosName};
    Cursor h = ourDB.query(db_HTable, columns, null, null, null, null, Row_HosName);
    int HRow = h.getColumnIndex(Row_HosName);
    h.moveToFirst();
     while (!h.isAfterLast()) {          
            res.add(h.getString(HRow));
            h.moveToNext();
        }

        h.close();
        return res;

}

public ArrayList<String> getDData(){
    ArrayList<String>  res = new  ArrayList<String>();
    String [] columns = new String []{Row_dName};
    Cursor d = ourDB.query(Row_dTable, columns, null, null, null, null, null);
    int HRow = d.getColumnIndex(Row_dName);
    d.moveToFirst();
     while (!d.isAfterLast()) {          
            res.add(d.getString(HRow));
            d.moveToNext();
        }

        d.close();
        return res;

}

public ArrayList<String> getDgData(){
    ArrayList<String>  res = new  ArrayList<String>();
    String [] columns = new String []{Row_Drugs};
    Cursor d = ourDB.query(db_DgTable, columns, null, null, null, null, Row_Drugs);
    int HRow = d.getColumnIndex(Row_Drugs);
    d.moveToFirst();
     while (!d.isAfterLast()) {          
            res.add(d.getString(HRow));
            d.moveToNext();
        }

        d.close();
        return res;

} 
```

}

在我的 onitemclick 方法中添加 rawquery 时缺少哪些声明？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:30:52.067

您可以从单个查询中返回多个字段，并使用同一个包将您的 3 个字段设置为：

```
i.putExtra("field1", val1);
i.putExtra("field2", val2);
i.putExtra("field3", val3); 
```

# php - 将变量传递给不同的php文件

> ID：13591310
> 
> 赞同：-1
> 
> 时间：2012-11-27T19:09:39.857
> 
> 标签：php, mysql, variables, drupal-7

我目前正在使用 Drupal 7。

我的页面包含在其中运行 mysql 查询的 php 文件。

在各个页面上，我设置了页面独有的变量，因此 mysql 查询将根据页面是什么运行（分配该页面的变量）。

到目前为止，我还没有成功让 my​​sql 识别 Drupal 页面中的变量。

任何帮助将不胜感激。

这是我当前使用的代码。

```
<?php
$fundnamedir ='8';
$ID_CARTERA='8'

require_once 'Queries/TableScript_Title.php';
require_once 'uploaded_files/individual_funds.php';
?> 
```

在 individual_funds.php 中，它开始创建图表的过程，该过程调用另一个 chart.php 文件，其中 mysql 用于在图表中显示数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:14:05.470

包含的文件继承调用它们的范围。

文件1.php

```
<?php
    $var = "I'm a var.";
    include('file2.php');
?> 
```

文件2.php

```
<?php
    echo $var;
?> 
```

请注意，如果您将其放置`include`在函数内部，则需要将变量声明为全局变量以使其可见。我怀疑这可能是您的 mysql 脚本没有接收到您的页面特定变量的原因。

修改file1.php

```
<?php
    $var = "I'm a var.";
    function func() {
        global $var;
        include('file2.php');
    }

    func();
?> 
```

# excel - 比较两列，如果数据相同，则填充另一列

> ID：13591328
> 
> 赞同：3
> 
> 时间：2012-11-27T19:10:57.070
> 
> 标签：excel

我有两个单独的工作表，我想在其中搜索，然后如果两列代表相同的数据，则填充一列。我很难解释这一点，所以请耐心等待。

我有 worksheet1 列“A”，其中包含文本和数字。如果两个工作表中的两个列“A”都匹配，则在同一张工作表中，“B”列具有我想在 worksheet2 中显示的数据。

* * *

示例：
工作表 1

**A栏**

文字文字文字（2012-R-0000）

等等等等等等

文本文本文本（文本 2012-R-0001）

**B栏**

20-204

20-405

40-609

* * *

工作表2

**A栏**

2012-R-0000

2012-R-0001

**E 列**

（空）我希望将 Worksheet1 列 B 中的数据放在此处。

* * *

提前感谢您对我的问题的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:22:04.870

您可以为工作表 1 中的所有数据创建一个命名范围，然后（如 John Bustos 建议的那样）使用 Vlookup 填充第二个工作表上的数据（假设命名范围是“值”：

```
=VLOOKUP(CONCATENATE("*",A1,"*"),values,2,FALSE) 
```

# objective-c - NSUndoManager 处于无效状态

> ID：13591330
> 
> 赞同：0
> 
> 时间：2012-11-27T19:10:58.320
> 
> 标签：objective-c, nsundomanager

通读 Aaron Hillegass的书`Cocoa Programming for Mac OS X`（第三版） 我现在在第 9 章，在第 1 节的末尾`Adding Undo to RaiseMan`。Hillegass 告诉您向您的类添加两个方法`MyDocument`，然后构建应用程序以查看添加的撤消/重做并正常工作。

但是，它不起作用（为什么我会在这里？）。它说：

```
2012-11-27 19:55:16.231 RaiseMan[293:a0f] HIToolbox: ignoring exception 'undo: NSUndoManager 0x100188a30 is in invalid state, undo was called with too many nested undo groups' that raised inside Carbon event dispatch
(
    0   CoreFoundation                      0x00007fff88c26784 __exceptionPreprocess + 180
    1   libobjc.A.dylib                     0x00007fff858ddf03 objc_exception_throw + 45
    2   CoreFoundation                      0x00007fff88c265a7 +[NSException raise:format:arguments:] + 103
    3   CoreFoundation                      0x00007fff88c26534 +[NSException raise:format:] + 148
    4   Foundation                          0x00007fff86fd0e17 -[NSUndoManager undo] + 239
    5   AppKit                              0x00007fff8976eeda -[NSApplication sendAction:to:from:] + 95
    6   AppKit                              0x00007fff8979346a -[NSMenuItem _corePerformAction] + 365
    7   AppKit                              0x00007fff897931d4 -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] + 121
    8   AppKit                              0x00007fff89a18cf4 -[NSMenu _internalPerformActionForItemAtIndex:] + 35
    9   AppKit                              0x00007fff898ca9e9 -[NSCarbonMenuImpl _carbonCommandProcessEvent:handlerCallRef:] + 136
    10  AppKit                              0x00007fff8977599c NSSLMMenuEventHandler + 321
    11  HIToolbox                           0x00007fff83d937f7 _ZL23DispatchEventToHandlersP14EventTargetRecP14OpaqueEventRefP14HandlerCallRec + 1002
    12  HIToolbox                           0x00007fff83d92d46 _ZL30SendEventToEventTargetInternalP14OpaqueEventRefP20OpaqueEventTargetRefP14HandlerCallRec + 395
    13  HIToolbox                           0x00007fff83db0a81 SendEventToEventTarget + 45
    14  HIToolbox                           0x00007fff83ddfc35 _ZL18SendHICommandEventjPK9HICommandjjhPKvP20OpaqueEventTargetRefS5_PP14OpaqueEventRef + 387
    15  HIToolbox                           0x00007fff83e0ca0a SendMenuCommandWithContextAndModifiers + 56
    16  HIToolbox                           0x00007fff83e0c9c2 SendMenuItemSelectedEvent + 101
    17  HIToolbox                           0x00007fff83e0c8d2 _ZL19FinishMenuSelectionP13SelectionDataP10MenuResultS2_ + 150
    18  HIToolbox                           0x00007fff83dedc27 _ZL14MenuSelectCoreP8MenuData5PointdjPP13OpaqueMenuRefPt + 467
    19  HIToolbox                           0x00007fff83ded37c _HandleMenuSelection2 + 453
    20  AppKit                              0x00007fff89646851 _NSHandleCarbonMenuEvent + 236
    21  AppKit                              0x00007fff8961a362 _DPSNextEvent + 1908
    22  AppKit                              0x00007fff89619801 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 155
    23  AppKit                              0x00007fff895df68f -[NSApplication run] + 395
    24  AppKit                              0x00007fff895d83b0 NSApplicationMain + 364
    25  RaiseMan                            0x000000010000160a main + 33
    26  RaiseMan                            0x0000000100001218 start + 52
    27  ???                                 0x0000000000000001 0x0 + 1
) 
```

当我单击撤消或按 cmd+z 时，在控制台中。

我在网上找到了解决方案，但它们都是关于“UndoGroups”或类似的东西。
我知道例外是关于`nested undo groups`，但我不使用它们（AFAIK），我什至不知道它们是什么。

我不知道我应该提供什么其他信息，所以请在评论中询问代码片段等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:17:14.810

对于未来的读者：

Hillegass 告诉您添加 2 种方法：`-insertObject:inEmployeesAtIndex:`和`-removeObjectFromEmployeesAtIndex:`. 在第二种方法中，您必须这样做：

```
NSUndoManager *undo = [self undoManager];
[[undo prepareWithInvocationTarget:self] insertObject:p inEmployeesAtIndex:index]; 
```

但我做到了：

```
NSUndoManager *undo = [self undoManager];
[[undo prepareWithInvocationTarget:self] insertObject:p atIndex:index]; //atIndex: instead of inEmployeesAtIndex: 
```

# php - HTML_Table 包只填充标题行

> ID：13591332
> 
> 赞同：0
> 
> 时间：2012-11-27T19:10:59.653
> 
> 标签：php, pear, html-table

我很困惑。PEAR 包[HTML_Table](http://pear.php.net/package/HTML_Table)看起来很简单，只是填充了我的表格标题行的内容。使用 addRow 添加的所有行都是空的。这是代码 - 任何帮助表示赞赏！

```
require_once("HTML/Table.php");
$q = new HTML_Table();
$q->setAutoGrow(TRUE);
$th  = array("hdr1","hdr2","hdr3");
$tr1 = array("cell1","cell2","cell3");
$q->addRow($th, null, "th");
$q->addRow($tr1, null, "tr");
echo ($q->toHtml()); 
```

结果：

```
<table>
        <tr>
                <th>hdr1</th>
                <th>hdr2</th>
                <th>hdr3</th>
        </tr>
        <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:23:49.347

你打错`tr`了`addRow()`——应该是`td`。

# c++ - 在所有错误情况下，我需要采取哪些操作来获取故障转储？

> ID：13591334
> 
> 赞同：13
> 
> 时间：2012-11-27T19:11:09.730
> 
> 标签：c++, windows, visual-c++, crash-dumps

我们在 Windows 上，我们希望在应用程序意外退出的*所有*场景中获取故障转储（可能使用`MiniDumpWriteDump`） 。

 *到目前为止，我们已经确定并设置了以下内容：

*   `SetUnhandledExceptionFilter`对于未处理的异常（Win32 以及“普通”C++ 异常。）
*   `_set_invalid_parameter_handler`用于 CRT 无效参数处理
*   `_set_abort_behavior`加上一个`SIGABRT`处理程序来解释调用`abort()`

有什么我们错过的吗？（对一些非法调用的代码`ExitProcess`或`TerminateProcess`其中一种`exit`变体进行取模。）

* * *

我会注意到，这里的这个问题与*如何*获得崩溃转储是正交的。例如，如果您想在 的情况下进行故障转储，则`abort`始终必须使用`_set_abort_behaviour`，否则将中止`exit`s。

我还要注意，在 Windows7+ 上，*不*设置`SetUHEF`而只是[在注册表中设置“正确的”WER 转储设置](https://msdn.microsoft.com/en-us/library/windows/desktop/bb787181(v=vs.85).aspx)通常是一种可行的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-01T09:20:50.127

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-14T06:51:06.213

SetUnhandledExceptionFilter 显然不足以捕获所有意外退出。如果应用程序不小心调用了纯虚函数，则会弹出一个对话框。应用程序将挂起，但不会崩溃。由于没有例外，SetUnhandledExceptionFilter 和 WER 都无济于事。这个主题有一些变化。

更糟糕的是，如果您在诸如 WindowProc 之类的内核回调中崩溃。如果这种情况发生在 64 位 Windows 上的 32 位应用程序中，那么异常会被操作系统捕获并继续执行。是的，崩溃是无声无息的。我觉得这很可怕。

[http://randomascii.wordpress.com/2012/07/05/when-even-crashing-doesnt-work/](http://randomascii.wordpress.com/2012/07/05/when-even-crashing-doesnt-work/)应该详细说明处理这些异常情况所需的所有技巧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:35:18.337

高大上的命令，简而言之：

*   您无需使用任何其他`_set*`功能，`SetUnhandledExceptionFilter`就足够了。
*   C 运行时函数如`abort`将禁用全局异常处理程序，您使用`SetUnhandledExceptionFilter`. 如果 CRT 导致崩溃， CRT 将简单地调用相同的函数`NULL`参数，并且您的异常处理程序被禁用（未调用）！*你可以做什么？* **[X]**
*   当调用 excption-handler 时禁用所有其他正在运行的线程。`CreateToolhelp32Snapshot`只需使用, 和其他函数查找所有线程。查找此进程，并暂停所有其他正在运行的线程（当然，当前线程除外）。
*   使用 SEH 或无 SEH，除非 CRT 干扰，否则将调用全局异常处理程序。不用担心（在大多数情况下）。
*   中间不要有任何 CLR，如果中间有任何 CLR/托管调用（是的来自 C/C++），它将不允许异常处理程序调用。
*   您无法处理一个异常 - 堆栈内存溢出！思考！在调试器下运行是唯一的解决方案，见下文。

还有更多，我没有尝试过（没有发现有用） - 矢量异常处理。

另一种方法是将应用程序运行到调试器中，您可以自己制作！在调试器中，您可以捕获所有异常，就像 VS 调试器捕获一样。见我的[文章](http://www.codeproject.com/Articles/132742/Writing-Windows-Debugger-Part-2)。但是，你知道，这不是正确的方法。

编辑：只需阅读有关流程终止的最后内容。你不应该控制它。在任何情况下，您都可以挂钩所需的 API，这将充当您的代码（例如显示消息框）。

**[X]**您需要使用 API 挂钩。我没有方便的链接和详细信息。您将挂钩其他相关 API，但主要是`SetUnhandledExceptionFilter`（在您为您调用它之后）。您的虚拟（挂钩）函数将如下所示：

```
xxx SetUnhandledExceptionFilter_DUMMY(xxx)
{
  // Dont do any thing
  return NULL;
} 
```

我没有方便的 API 挂钩的链接和详细信息。

* * *

为什么不尝试让您的应用程序更安全呢？

*   更正所有警告（是的，甚至是第 4 级）。
*   使用静态分析。VS 本身有（虽然在更高版本中。除了 2012 - 所有变体都有）。其他 SA 工具可用。
*   进行仔细的代码审查。它付出了！
*   从调试器运行和调试您的 RELEASE 构建。使用所有功能。
*   查看并纠正所有可能的内存泄漏。
*   使用防御性方法进行编程。与其检查是否为空，不如使用 ASSERT 或您自己的断言来保护它。将其与断言、日志、函数返回打包在一起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-15T22:52:27.107

为了扩展所有答案，这是我发现最适合 100M+ 安装的答案：

*   [SetErrorMode](https://msdn.microsoft.com/en-us/library/windows/desktop/ms680621(v=vs.85).aspx)以防止出现任何 WER 对话框。
*   [EnableCrashingOnCrashes](https://randomascii.wordpress.com/2012/07/05/when-even-crashing-doesnt-work/)
*   [PreventSetUnhandledExceptionFilter](http://blog.kalmbachnet.de/?postid=75)
*   [SetUnhandledExceptionFilter](https://msdn.microsoft.com/en-us/library/windows/desktop/ms680634(v=vs.85).aspx)用于系统异常。
*   [_set_invalid_parameter_handler](https://msdn.microsoft.com/en-us/library/a9yf33zb.aspx)用于 CRT 无效参数处理
*   [_set_abort_behavior](https://msdn.microsoft.com/fr-fr/library/e631wekh.aspx)加上一个 SIGABRT 处理程序来解释对 abort() 的调用

或许还应该提到[std::set_terminate](http://en.cppreference.com/w/cpp/error/set_terminate)和[std::set_unexpected 。](http://en.cppreference.com/w/cpp/error/set_unexpected)

最重要的部分是让它一切顺利：

*   所有这些处理程序都应该调用一个在互斥体/关键部分下执行的函数，以确保如果其他线程同时发生任何其他崩溃，它们都会停止并等待，而不是造成破坏。
*   SIGABRT 的信号处理程序必须将自身设置为 SIGABRT 处理程序！如果没有这个，如果您从其他线程同时发生崩溃，您处理的线程将立即退出，而不会给您任何时间来处理崩溃。
*   理想情况下，错误的实际处理应该发生在另一个进程中，或者至少在进程开始时启动的另一个线程中发生，否则您将无法处理低内存条件或堆栈溢出错误。

* * *

请参阅下面的 setExceptionHandlers 以供参考。此外，您很可能不想在调试版本或[IsDebuggerPresent](https://msdn.microsoft.com/en-us/library/windows/desktop/ms680345(v=vs.85).aspx)时连接所有处理程序。

```
#include <signal.h>
#include <windows.h>
#include <boost/thread/mutex.hpp>

void EnableCrashingOnCrashes();
void PreventSetUnhandledExceptionFilter();

static void exceptionHandler(EXCEPTION_POINTERS* excpInfo)
{
    // your code to handle the exception. Ideally it should
    // marshal the exception for processing to some other
    // thread and waif for the thread to complete the job
}

static boost::mutex unhandledExceptionMx;
static LONG WINAPI unhandledException(EXCEPTION_POINTERS* excpInfo = NULL)
{
    boost::mutex::scoped_lock lock(unhandledExceptionMx);
    if (!excpInfo == NULL)
    {
        __try // Generate exception to get proper context in dump
        {
            RaiseException(EXCEPTION_BREAKPOINT, 0, 0, NULL);
        }
        __except (exceptionHandler(GetExceptionInformation()), EXCEPTION_EXECUTE_HANDLER)
        {
        }
    }
    else
    {
        exceptionHandler(excpInfo);
    }

    return 0;
}

static void invalidParameter(const wchar_t* expr, const wchar_t* func,
    const wchar_t* file, unsigned int line, uintptr_t reserved)
{
    unhandledException();
}

static void pureVirtualCall()
{
    unhandledException();
}

static void sigAbortHandler(int sig)
{
    // this is required, otherwise if there is another thread
    // simultaneously tries to abort process will be terminated
    signal(SIGABRT, sigAbortHandler);
    unhandledException();
}

static void setExceptionHandlers()
{
    SetErrorMode(SEM_FAILCRITICALERRORS | SEM_NOGPFAULTERRORBOX);
    SetUnhandledExceptionFilter(unhandledException);
    _set_invalid_parameter_handler(invalidParameter);
    _set_purecall_handler(pureVirtualCall);
    signal(SIGABRT, sigAbortHandler);
    _set_abort_behavior(0, 0);
    EnableCrashingOnCrashes();
    PreventSetUnhandledExceptionFilter();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-01T07:36:42.413

我将添加一个在 Windows 7 上运行时可以在某些场景中使用的解决方法：

Windows 错误报告 (WER) 提供了[在应用程序崩溃时写入完整内存转储](https://stackoverflow.com/questions/13601729/should-i-write-my-own-crash-dump-via-watchodg-process-or-rely-on-wer)的选项。

所以，如果你对此感到满意，你“只是”必须确保你真正感兴趣的崩溃场景会触发 WER。...这确实使我们回到了这个问题，但仍然...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-01T07:49:59.653*

# sql - 组合多个 SQL 查询

> ID：13591335
> 
> 赞同：4
> 
> 时间：2012-11-27T19:11:10.550
> 
> 标签：sql, optimization, database-performance

目前，要获取我需要的数据，我需要执行多个 SQL 语句：

```
SELECT pubkey.pubkey_id 
FROM pubkey 
WHERE pubkey.pubkey_hash = (input data [1])

SELECT txin_corr.tx_id 
FROM txin_corr 
WHERE txin_corr.pubkey_id = (pubkey.pubkey_id from previous query [max. 1])

SELECT txin_corr.pubkey_id 
FROM txin_corr 
WHERE txin_corr.tx_id = (txin_corr.tx_id from prev.qry. [n])

SELECT pubkey.pubkey_hash
FROM pubkey 
WHERE pubkey.pubkey_id = (txin_corr.pubkey_id from prev.qry. [n]) 
```

第一个查询没问题，因为我只需要做一次。但我想知道是否有一种方法可以组合（至少）最后三个查询。由于数据库非常大（~ 20 GB），我认为“好的查询”可能会大大加快速度。

我正在做的是：对于给定的`pubkey_id`/ `pubkey_hash`，从中获取所有包含 this在同一行中的`tx_id`s 。然后，从包含检索到的 s 的行中获取所有s 。最后，获取现在检索到的 s 的所有s。`txin_corr``pubkey_id``pubkey_id``txin_corr``tx_id``pubkey_hash``pubkey_id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T23:00:09.843

较早的答案是正确的：关键是将表多次连接在一起。但是，那里有一对多的关系，所以需要左外连接，而不仅仅是内连接。

```
SELECT pk2.pubkey_hash
FROM   pubkey pk
INNER JOIN txin_corr tc ON pk.pubkey_id = tc.pubkey_id
LEFT OUTER JOIN txin_corr tc2 ON tc.tx_id = tc2.tx_id
LEFT OUTER JOIN pubkey pk2 ON tc2.pubkey_id = pk2.pubkey_id
WHERE pk.pubkey_hash = (input data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:20:39.320

这是一种方法。我不会断言这是最有效的方法，但它应该适用于任何数据库。

诀窍是多次加入每个表，使用不同的前缀，因此您每次都可以匹配不同的列集。因此，您加入 txin_corr 以匹配初始 pubkey_id，然后再次加入以获取相关 id 的完整列表。然后加入 'out' 到 pubkey 以获取与这个新的 id 列表匹配的记录。

```
SELECT  pk2.pubkey_hash 
FROM    pubkey pk
INNER JOIN txin_corr tc on pk.pubkey_id = tc.pubkey_id
INNER JOIN txin_corr tc2 on tc.tx_id = tc2.tx_id
INNER JOIN pubkey pk2 on tc2.pubkey_id = pk2.pubkey_id
WHERE pk.pubkey_hash = (input data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:47:32.670

这可能不是最好的方法，但您可以将所有选择链接在一起。如果任何查询返回多于一个结果，您只需将关系从 = 更改为 in，这将处理多于 1 个结果

```
SELECT pubkey.pubkey_hash
FROM pubkey 
WHERE pubkey.pubkey_id = 
        (SELECT txin_corr.pubkey_id 
         FROM txin_corr 
         WHERE txin_corr.tx_id =
                (SELECT txin_corr.tx_id 
                 FROM txin_corr 
                 WHERE txin_corr.pubkey_id = 
                        (SELECT pubkey.pubkey_id 
                         FROM pubkey 
                         WHERE pubkey.pubkey_hash = (input data [1]
                         )
                 )
         ) 
```

# javascript - html2canvas 离屏

> ID：13591339
> 
> 赞同：23
> 
> 时间：2012-11-27T19:11:50.250
> 
> 标签：javascript, html, html2canvas

在使用 html2canvas 时，我有一个`stack`DOM 对象（包含各种东西的相对定位的 div），我希望为其创建单独的缩略图。因此，如果有十个 div，我将创建十个缩略图。

其中一些对象将在屏幕外——这些 div 中的每一个都位于一个名为“mainDiv”的包含 div 中。我遍历 mainDiv 中的 div 并分别在每个 div 上执行 html2canvas。

对于那些在屏幕上的人来说，这很好用。那些不在屏幕上的则不会——它们会返回空白。我创建了一个解决方法，将对象滚动到`mainDiv`.

是否可以指定不可见的 DOM 对象？理想情况下，我希望能够指定一个包含 div 并`html2canvas`忽略父可见性，所以我可以屏幕捕获隐藏的对象，但除此之外，我希望能够屏幕捕获简单地滚动到屏幕外的对象.

有什么想法、想法吗？谢谢！

---- 这是一些示例代码。基本上，如果您在一个 div 中有一堆 div，请遍历它们。我实际上这样做`recursively`是为了一次只处理一个，回调调用递归函数，所以它看起来像这样：

```
 function recurser(anIndex, callback) {
    if (anIndex == -1) {
        callback();
        return;
    }
    $(myDivs[anIndex]).html2canvas({
        onrendered : function(canvas) {
            var img = canvas.toDataURL();
            // store the image in an array, do stuff with it, etc.
            recurser(--anIndex, callback);

        }
    })

} 
```

一旦递归调用完成，它就会执行回调函数，该函数将对图像进行处理。

同样，只要对象在包含#mainDiv 中所有 div 的滚动 div 中可见，所有这些都可以正常工作。但是，一旦滚动了 div 的任何部分，它们就会呈现黑色。事实上，如果两个 div 的一半被滚动（一个的上半部分，下一个的下半部分），它们都呈现完全黑色。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-08-27T21:02:16.620

我知道这是一个老问题，但它似乎有点有趣。根据我的测试，似乎只有视口之外`position: absolute`的`position:fixed`元素导致了这个问题。我想出了解决问题的办法。

我正在做的是克隆元素。将克隆的样式设置为`left = 0`, `top = window.innerHeight`（这样它就不会在窗口内）和`position = 'relative'`. 然后我将克隆附加到主体上，`html2canvas`在克隆上使用，然后从主体中删除克隆。此解决方案适用于 IE、Firefox 和 Chrome。

我在[这里创建了一个 JSBin 示例](http://jsbin.com/kocigo/2/edit?css,js,output)。这是关键的javascript代码：

```
function hiddenClone(element){
  // Create clone of element
  var clone = element.cloneNode(true);

  // Position element relatively within the 
  // body but still out of the viewport
  var style = clone.style;
  style.position = 'relative';
  style.top = window.innerHeight + 'px';
  style.left = 0;

  // Append clone to body and return the clone
  document.body.appendChild(clone);
  return clone;
}

var offScreen = document.querySelector('.off-screen');

// Clone off-screen element
var clone = hiddenClone(offScreen);

// Use clone with htm2canvas and delete clone
html2canvas(clone, {
    onrendered: function(canvas) {
      document.body.appendChild(canvas);
      document.body.removeChild(clone);
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-18T10:34:29.940

将“溢出”设置为对其所有父元素可见。渲染后删除它

CSS

```
.overflowVisible{
    overflow:visible !important;
} 
```

JS

```
$("#container").parents().each(function(ind,elem){
    $(elem).addClass("overflowVisible");
});

html2canvas($("#container"), {
    onrendered: function(canvas) {
        var img =canvas.toDataURL("image/png");
        $('body').append(img);
        $("#container").parents().each(function(ind,elem){
            $(elem).removeClass("overflowVisible");
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-11T08:58:49.467

您可以使用最新版本的 html2canvas。这解决了所有图像像素化问题和渲染对象问题。我使用了 Erik koopmans 的 0.5.0-beta4 版本，[参考了这个](https://github.com/niklasvh/html2canvas/issues/622)并调用了 html2canvas，如下所示：

```
$('html,body').scrollTop(0); // Take your <div> / html at top position before calling html2canvas

     html2canvas( $("#my_div"), {
         useCORS: true,
         dpi: 200,

          onrendered:function(canvas) {

              var str = canvas.toDataURL("image/png");
              var contentType = 'image/png';
              console.log(str);
              b64Data =str;
              $('#uploadedImage').val(b64Data); // set image captured by html2canvas
              imgFrameSave(); // Call a function to save your image at server side.
          }
        }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-14T05:32:34.583

啊现在你试过 Div display: none; 和 div 显示：绝对；（或者你希望你的 div 如何出现 - 也许是 z-index）

```
 arrow1.onclick = (event){
arrow1.style.display = none;
arrow2.style.display = absolute;
}

    arrow2.onclick = (event){
arrow2.style.display = none;
arrow1.style.display = absolute;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-30T20:50:47.310

只需使用：

```
{
    scrollX: -window.scrollX,
    scrollY: -window.scrollY
} 
```

基于：[https ://github.com/niklasvh/html2canvas/issues/1878#issuecomment-511678281](https://github.com/niklasvh/html2canvas/issues/1878#issuecomment-511678281)

# javascript - 使用javascript在1点上绘制自定义数量的直线

> ID：13591343
> 
> 赞同：-2
> 
> 时间：2012-11-27T19:11:56.077
> 
> 标签：javascript, html, canvas, lines

我正在尝试使用 html5 和 canvas/KineticJS 开发一个小型应用程序。我想跟踪从 2d 点开始到无限的许多光线，只需设置自定义角度。例如，如果我设置 90°，应用程序应该渲染四条光线（两条直线，一条垂直和一条水平，在我的 2d 点中相遇）。如果我设置 60°，我应该看到 3 条直线，如星号 *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:17:50.750

您必须绘制的最长线是画布对角线的大小：

```
var r = Math.sqrt(Math.pow(canvas.width, 2) + Math.pow(canvas.height, 2)); 
```

使用`sin`和`cos`计算该半径处的每个端点：

```
var theta = delta * Math.PI / 180.0;
var dx = r * Math.cos(n * theta);
var dy = r * Math.sin(n * theta); 
```

然后，只需从 (x, y) 到 (x + dx, y + dy) 画线。简单的。

# javascript - AngularJS：跟踪同时上传的每个文件的状态

> ID：13591345
> 
> 赞同：45
> 
> 时间：2012-11-27T19:12:00.383
> 
> 标签：javascript, angularjs

按下提交按钮后，一组文件（`$scope.files`，可以小到一个文件，用户想要多少就多少）通过我`FormData`的`XMLHttpRequest`角度函数提交`$scope.uploadFiles`：

```
$scope.uploadFiles = function() {
    for (var i in $scope.files) {
        var form = new FormData();
        var xhr = new XMLHttpRequest;

            // Additional POST variables required by the API script
        form.append('destination', 'workspace://SpacesStore/' + $scope.currentFolderUUID);
        form.append('contenttype', 'idocs:document');
        form.append('filename', $scope.files[i].name);
        form.append('filedata', $scope.files[i]);
        form.append('overwrite', false);

        xhr.upload.onprogress = function(e) {
            // Event listener for when the file is uploading
            $scope.$apply(function() {
                var percentCompleted;
                if (e.lengthComputable) {
                    percentCompleted = Math.round(e.loaded / e.total * 100);
                    if (percentCompleted < 1) {
                                            // .uploadStatus will get rendered for the user via the template
                        $scope.files[i].uploadStatus = 'Uploading...';
                    } else if (percentCompleted == 100) {
                        $scope.files[i].uploadStatus = 'Saving...';
                    } else {
                        $scope.files[i].uploadStatus = percentCompleted + '%';
                    }
                }
            });
        };

        xhr.upload.onload = function(e) {
            // Event listener for when the file completed uploading
            $scope.$apply(function() {
                $scope.files[i].uploadStatus = 'Uploaded!'
                setTimeout(function() {
                    $scope.$apply(function() {
                        $scope.files[i].uploadStatus = '';
                    });
                }, 4000);
            });
        };

        xhr.open('POST', '/path/to/upload/script');
        xhr.send(form);
    }

} 
```

问题是`var i`每个文件的初始 for 循环中的增量，并且到事件侦听器触发时，`i`已经增量超过`files[i]`所需的预期值，仅影响数组中的最后一个。我使用`.uploadStatus`这种方式以交互方式向用户显示每个单独文件的进度，因此我需要为`$scope.files`. 如何为 Angular 中的单个数组元素分配和跟踪事件？

**更新**

* * *

我重新设计了两个事件监听器，取得了一些成功，但我仍然遇到奇怪的行为：

```
xhr.upload.onprogress = (function(file) {
    // Event listener for while the file is uploading
    return function(e) {
        $scope.$apply(function() {
            var percentCompleted = Math.round(e.loaded / e.total * 100);
            if (percentCompleted < 1) {
                file.uploadStatus = 'Uploading...';
            } else if (percentCompleted == 100) {
                file.uploadStatus = 'Saving...';
            } else {
                file.uploadStatus = percentCompleted + '%';
            }
        });
    }
})($scope.files[i]);

xhr.upload.onload = (function(file, index) {
    // Event listener for when the file completed uploading
    return function(e) {
        $scope.$apply(function() {
            file.uploadStatus = 'Uploaded!'
            setTimeout(function() {
                $scope.$apply(function() {
                    $scope.files.splice(index,1);
                });
            }, 2000);
        });
    }
})($scope.files[i], i); 
```

`.onprogress`似乎顺利进行，但是对 进行了一些小的更改`.onload`，我现在看到 AngularJS 对其模板的双向绑定有很多奇怪的行为。对于数组中的每个元素`$scope.files`，使用上述`.uploadStatus`属性给出一个状态。现在我通过传入自执行函数`setTimeout`的变量拼接数组中的元素。`i`奇怪的是，现在一次上传的上限约为 6 个同时上传，这一定是服务器端的问题，但我注意到随着数组元素的拼接，`ng-repeat`模板中*的*元素，不一定是它应该的元素。我还注意到，在达到 2000 毫秒阈值后，经常有条目没有被拼接。

这让人想起原始问题，即`i`在整个事件侦听器的触发过程中引用变量时不可靠？现在我将它传递给匿名自执行`.onload`函数，并且拼接使用它来确定它应该删除哪个数组元素，但它不一定会删除正确的元素，并且经常在数组中留下其他元素应该删除它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T12:11:44.620

您传递给事件处理程序的`index`是指原始数组中的索引。每次成功调用 后`splice`，数组更改和索引不再指向同一事物。

```
$scope.files = ['a.jpg', 'b.jpg', 'c.jpg'];
// $scope.files[1] = 'b.jpg'

$scope.files.splice(1,1);
// $scope.files = ['a.jpg', 'c.jpg']
// $scope.files[1] = 'c.jpg' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-06T15:49:44.623

AngularJs 1.5.5 通过为上传进度提供回调事件处理程序来改变方法。

参考 -[如何使用 $http 或 $resource 在 angularjs 1.5.5 中使用 eventHandlers 和 uploadEventHandlers 跟踪进度？](https://stackoverflow.com/questions/38227694/how-to-track-progress-using-eventhandlers-and-uploadeventhandlers-in-angularjs-1/38227902#38227902)

```
var uploadData = new FormData();
uploadData.append('file', obj.lfFile);
var fileData = angular.toJson({
    'FileName': obj.lfFile.name,
    'FileSize': obj.lfFile.size
});
uploadData.append('fileData', fileData)

$http({
    method: 'POST',
    url: vm.uploadPath,
    headers: {
        'Content-Type': undefined,
        'UserID': vm.folder.UserID,
        'ComputerID': vm.folder.ComputerID,
        'KeepCopyInCloud': vm.keepCopyInCloud,
        'OverWriteExistingFile': vm.overwriteExistingFile,
        'RootFileID': vm.folder.RootFileID,
        'FileName': obj.lfFile.name,
        'FileSize': obj.lfFile.size
    },
    eventHandlers: {
        progress: function(c) {
            console.log('Progress -> ' + c);
            console.log(c);
        }
    },
    uploadEventHandlers: {
        progress: function(e) {
            console.log('UploadProgress -> ' + e);
            console.log(e);
        }
    },
    data: uploadData,
    transformRequest: angular.identity
}).success(function(data) {
    console.log(data);
}).error(function(data, status) {
    console.log(data);
    console.log(status);
}); 
```

# c# - 依赖属性更新机制

> ID：13591346
> 
> 赞同：1
> 
> 时间：2012-11-27T19:12:13.560
> 
> 标签：c#, wpf, dependency-properties

我有一个自定义控件，其中定义了一个依赖属性，并且我的控件实现了 INotifyPropertyChanged 接口。

依赖属性是自定义对象的集合。

方案 1

DP 属于 List 类型，无论我在列表中进行什么更改，MainUI 中都没有更新，因为我相信 WPF 不理解在列表中添加和删除对象。它了解全新的参考资料，以便实现这一点，每当我想更新我使用的控件列表时

我的属性=新列表（）；

在这种方法中，我的 DP 回调每次都会触发，但 eventArgs.NewValue 始终保持为零（它正确更新了 UI 上的列表）但是因为我需要在基于 e.NewItems.Count 的属性更改回调中编写一些逻辑，在这种情况下没有不行。请告诉我为什么 e.NewItems 不起作用。

方案 2

DP 属于 ObservableCollection 类型，因此作为我绑定 DP 的视图模型中的集合属性。在这种情况下，我的属性更改回调根本不会触发，因为在第一次初始化属性后我再也没有使用“new”关键字。UI 更新但属性更改仍未触发。所以我在属性更改回调中的逻辑不会被执行。

我应该如何使它们中的任何一个或两个都起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:28:00.180

我会使用 ObservableCollection 方法，并订阅它的`CollectionChanged`事件。
这样，每当集合发生更改时，您都会收到通知。

但另一种方法也应该有效。当您将常规列表设置为新实例时，`PropertyChangedCallback`将为依赖属性触发 ，并且通过检查`DependencyPropertyChangedEventArgs`对象可以获得新值。

XAML：

```
<StackPanel>
    <Button Content="Add to observablecollection" Click="click1" />
    <Button Content="Set list to new instance" Click="click2" />
</StackPanel> 
```

代码隐藏：

```
public partial class Window1 : Window
{
    public ObservableCollection<string> Strings { get; set; }

    public List<string> StringsList
    {
        get { return (List<string>)GetValue(StringsListProperty); }
        set { SetValue(StringsListProperty, value); }
    }

    public static readonly DependencyProperty StringsListProperty =
        DependencyProperty.Register("StringsList", typeof(List<string>), typeof(Window), new PropertyMetadata(null, StringsListPropertyChanged));

    public Window1()
    {
        InitializeComponent();

        Strings = new ObservableCollection<string>();
        Strings.CollectionChanged += strings_CollectionChanged;

        StringsList = new List<string> { "Test1", "Test2", "Test3", "Test4" };
    }

    void strings_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        //Fires everytime the observablecollection has an item added/removed etc.
        MessageBox.Show(string.Format("ObservableCollection has changed! Count is now {0}", this.Strings.Count.ToString()));

        if (this.Strings.Count == 10)
            Console.WriteLine("Collection contains 10 strings!!");
    }

    private static void StringsListPropertyChanged(DependencyObject e, DependencyPropertyChangedEventArgs args)
    {
        var newCount = ((List<string>)args.NewValue).Count.ToString();
        MessageBox.Show(string.Format("Dependency property has changed! Count is now {0}", newCount));
    }

    private void click1(object sender, RoutedEventArgs e)
    {
        this.Strings.Add("Test1");
    }

    private void click2(object sender, RoutedEventArgs e)
    {
        this.StringsList = new List<string> { "Newitem1", "Newitem2" };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:26:23.273

ObservableCollection 继承自 INotifyPropertyChanged 和 INotifyCollectionChanged。我认为如果您想知道集合何时更改，您应该使用此接口：

[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/System.Collections.Specialized.INotifyCollectionChanged.aspx)

# facebook - Facebook 应用程序标签页在未登录时只显示白色画布

> ID：13591347
> 
> 赞同：0
> 
> 时间：2012-11-27T19:12:15.790
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我已经设置了一个 Facebook 应用程序并将其添加为我的粉丝页面上的标签。

以用户身份登录并请求应用页面的直接 URL，显示一切正确。

但是，当我没有登录@facebook 并转到直接 URL 时，应用页面上不会显示任何内容。它只是在画布上显示最大高度为 100 像素的白色背景。

我可以自然地从该页面登录，在登录回调后，我再次正常看到应用页面。

我认为这可能与我的代码有关。但后来我测试删除了我的 index.php 文件中的所有内容，只添加了一些静态虚拟文本。仍然没有任何显示。

有任何想法吗？

编辑1：我认为这可能与我将所有为应用画布定义的URL请求重定向到https有关。我在其他地方读到，Facebook 可能出于某种原因也需要访问相同 URL 的 http。但是还没有找到任何支持这一点的东西。

编辑 2：看到我什至无法得到任何东西，有一个带有静态文本的空白 index.php 我不确定这是否可能与它有关。但是打开我的整个脚本的错误，我得到了一些错误 $signed_request - 猜是因为我在无法检索它时调用它。虽然不知道该怎么做，但无论如何都会发布代码以防有人看到任何东西。

```
function parsePageSignedRequest() {
    if (isset($_REQUEST['signed_request'])) {
      $encoded_sig = null;
      $payload = null;
      list($encoded_sig, $payload) = explode('.', $_REQUEST['signed_request'], 2);
      $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
      $data = json_decode(base64_decode(strtr($payload, '-_', '+/'), true));
      return $data;
    }
    return false;
  }

if($signed_request = parsePageSignedRequest()) {
    if($signed_request->page->liked) {
          //echo "This content is for Fans only!";
          $amFan = "true";
    } else {
          //echo "Please click on the Like button to view this tab!";
          $amFan = "false";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:43:26.340

当用户根本没有登录时是否有签名请求？

如果没有，您的代码将返回 false`parsePageSignedrequest()`并完全跳过设置`$amFan`- 在这种情况下，您的其余代码是否有效？

# c# - 使用存储库和工作单元查询 EF 5.0

> ID：13591348
> 
> 赞同：3
> 
> 时间：2012-11-27T19:12:17.793
> 
> 标签：c#, entity-framework, repository

我已经在一个项目上工作了一段时间。最初，我在一些书籍和在线文章中读到了一堆模式，然后花了很多时间来规划程序的架构。我决定结合 EF 5.0 > Repository/Unit of Work > MVVM > WPF。

我最初的测试表明它看起来工作得很好，所以我致力于我决定的模式，并花了一个月的时间来实现它。只是现在我快完成了，我遇到了一些麻烦。

我无法解决的问题之一是我似乎无法构造复杂的查询。无论我尝试什么，我都会遇到一个或另一个错误。

该程序使用 Entity Framework 5.0 连接到我们公司的 MS Sql 2005 服务器上的数据库。从那里开始，对于每个实体，都存在一个存储库类。每个存储库在其构造函数中接收一个上下文，并实现一个标准接口：

```
interface IRepository<T> where T : class
{
    IEnumerable<T> GetAll();
    IEnumerable<T> Query(Expression<Func<T, bool>> filter);
    void Add(T entity);
    void Remove(T entity);
} 
```

基类如下所示：

```
public abstract class Repository<T> : IRepository<T> where T : class
{
    protected IObjectSet<T> _objectSet;

    public Repository(ObjectContext context)
    {
        _objectSet = context.CreateObjectSet<T>();
    }

    public IEnumerable<T> GetAll()
    {
        return _objectSet;
    }

    public List<T> ToList()
    {
        return _objectSet.ToList<T>();
    }

    public IEnumerable<T> Query(Expression<Func<T, bool>> filter)
    {
        return _objectSet.Where(filter);
    }

    public void Add(T entity)
    {
        _objectSet.AddObject(entity);
    }

    public void Remove(T entity)
    {
        _objectSet.DeleteObject(entity);
    }

    public void Update(T entity)
    {
        _objectSet.UpdateModel(entity);
    }

    public abstract void Upsert(T entity);

} 
```

一个具体的存储库如下所示：

```
public class UserAccountRepository : Repository<UserAccount>
{
    public UserAccountRepository(ObjectContext context)
        : base(context)
    {
    }

    public UserAccount GetById(int id)
    {
        return _objectSet.SingleOrDefault(user => user.ID == id);
    }

    public override void Upsert(UserAccount user)
    {
        if (user == null)
            throw new ArgumentNullException();
        if (user.ID == 0 || GetById(user.ID) == null)
            Add(user);
        else
            Update(user);
    }
} 
```

接下来是 UnitOfWork 类。此类保存每个存储库的延迟加载实例，并实例化它自己的 ObjectContext，该对象在 UnitOfWork 的生命周期内保持活动状态。此上下文在其构造函数中传递给存储库。

UnitOfWork 类被实例化，更改是通过可公开访问的存储库进行的，然后通过 UnitOfWork 类的公共方法保存或处理。

UnitOfWork 类：

（我只包括了 UserAccount、ComponentPermissions 和 Component..一个 UserAccount 可以访问多个具有不同权限级别的组件，这些权限在中间表 ComponentPermissions 中维护）

```
public class UnitOfWork : IDisposable
{

    #region Fields

    private readonly ObjectContext _context;

    private ComponentPermissionsRepository _componentPermissions;
    private ComponentRepository _components;
    private UserAccountRepository _userAccounts;

    #endregion //Fields

    #region Constructor

    public UnitOfWork()
    {
        _context = (new DataAccess.Entities() as IObjectContextAdapter).ObjectContext;
    }

    #endregion //Constructor

    #region Public Interface

    public ComponentPermissionsRepository ComponentPermissions
    {
        get
        {
            if (_componentPermissions == null)
            {
                _componentPermissions = new ComponentPermissionsRepository(_context);
            }

            return _componentPermissions;
        }

    }

    public ComponentRepository Components
    {
        get
        {
            if (_components == null)
            {
                _components = new ComponentRepository(_context);
            }

            return _components;
        }

    }

    public UserAccountRepository UserAccounts
    {
        get
        {
            if (_userAccounts == null)
            {
                _userAccounts = new UserAccountRepository(_context);
            }

            return _userAccounts;
        }

    }

    public void Commit()
    {
        _context.SaveChanges();
    }

    public void Dispose()
    {
        _userAccount = null;
        _component = null;
        _componentPermissions = null;
        _context.Dispose();
    }

    #endregion //Public Interface

} 
```

我已经阅读了一堆关于使用 EF 进行查询的文章，但是当应用于上述架构时，我所阅读的任何内容似乎都不起作用......而且我有一种可怕的感觉，我已经在脚下开枪了，但我看不到在哪里。

给定一个 UserAccount，我想获得一个可访问组件的列表和相应的 ComponentPermissions。我怎样才能做这种查询？EF 导航属性似乎只适用于直接邻居......我是否遗漏了一些明显的东西？

**编辑**

有人指出，我应该更具体地处理我的问题。我无法克服的第一个障碍是所有示例似乎都遵循：

```
context.Component.Include( c => c.ComponentPermissions.Select(cps => cps.UserAccount)).ToList(); 
```

看起来不错，但我没有公开我的上下文，即使我这样做了，它也没有像 Component 这样的任何实体类型。但是现在我已经将 GetAll() 更改为 IQueryable，我设法拼凑了以下内容：

```
List<Component> comps = uow.Components.GetAll().Include(c => c.UserPermissions.Select(cps => cps.UserAccount)).ToList();
ComponentPermissions compPer = comps[0].UserPermissions.Select(up => up).Where(up => up.UserAccount.UserName == userAccount).FirstOrDefault(); 
```

这将取回与给定 userAccount 相关的第一个 ComponentPermissions 对象......但这似乎很错误，即使它有点工作（我说有点工作，因为它只有一个 ComponentPermissions 对象，而不是所有他们......但我不知道该怎么做）

那么，看看这个，任何人都可以解释正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:29:05.487

嗯，我觉得自己有点像白痴……

我通过以下方式在 UnitOfWork 中获取 ObjectContext：

```
_context = (new DataAccess.Entities() as IObjectContextAdapter).ObjectContext; 
```

当我应该只使用 DataAccess.Entities() 的实例（EF 为我的数据创建的自定义上下文）时。

我不得不重做我的存储库，但另一个好处是我认为我现在可以摆脱我的具体类而只使用通用存储库。

我遇到了所有这些问题，因为我将 DataAccess.Entities() 转换为一个 ObjectContext，它不包括我的任何特定实体类型......所以我试图从只加载自己的数据的存储库中查询类型。

一行代码……头疼了三天。典型的。

# c# - 以编程方式使用所有歌曲填充列表？

> ID：13591350
> 
> 赞同：0
> 
> 时间：2012-11-27T19:12:19.933
> 
> 标签：c#, iphone, xamarin.ios, media-player, monodevelop

我知道`MPMediaPickerController`，但我的印象是只有用户手动选择歌曲？我想以编程方式填充库中所有歌曲的列表。我在 monotouch 中使用 C#，并希望能够在该 IDE 中执行此操作。从这个列表中，我想访问歌曲元数据（例如艺术家和专辑信息）。

有没有一种简单的方法可以用单点触控来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:19:26.330

您可以查询[iPod 媒体库](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/Introduction/Introduction.html)以获取歌曲列表。我不知道任何 MonoTouch 特定示例，但 Obj-C 示例应该很容易转换。

# php - 什么方法用于区分 PHP 应用程序中的生产/登台/开发环境？

> ID：13591353
> 
> 赞同：2
> 
> 时间：2012-11-27T19:12:28.067
> 
> 标签：php, configuration, release, development-environment, production-environment

显然这是一个常见问题：我们有由 git 或其他 SCM 管理的 PHP Web 应用程序，并且（理想情况下）部署在 3 个以上应该非常相似的不同环境中。唯一的区别应该在于特定的配置，例如外部资源的寻址（例如：数据库主机、内存缓存等）。

以下是我见过或使用过的三种方法：

1.  维护一组主机名 => 环境类型： `$hosts = array ('host1.example.com' => 'production', 'staging.example.com' => 'staging' ...)`
2.  有一个 .gitignore 中的配置文件（或其他 SCM 的等效文件），其中包含要复制和编辑的示例版本
3.  用于在 http.conf 和脚本`http.conf`中设置 env_var: "SetEnv ENVIRONMENT dev" 。`$environment = get_env('ENVIRONMENT');`

还有其他方法吗？我知道每一个都有好处和陷阱——那些是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:25:24.247

在 *nix 上：

*   您可以直接设置环境变量以在`/etc/environment`系统范围内应用它们。
*   您只能在`/etc/apache2/envvars`(Ubuntu) 或`/etc/sysconfig/httpd`(CentOS) 中为 Apache 设置环境变量。

`.htaccess`由于环境配置是特定于环境而不是特定于应用程序的，因此使用或其他应用程序配置文件来设置这些是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:18:08.567

任何主要服务器都可以使用设置环境选项。如果未定义，则默认为生产。

这样您就不必维护服务器列表。并且可以让它远离 git

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:21:05.600

每当发出推送事件时，我们都会使用 Jenkins 从 git 服务器中拉取数据。

在它的配置中，我们有一个对每个服务器都不同的行：

```
mv config_<env>.php config.php 
```

而 config.php 在 git ignore 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T19:27:48.023

我过去几年一直在开发的 Web 应用程序使用 Java API 后端，前端有一个 PHP 层用于模板等。我们使用 Maven 来控制环境的差异。

我不完全确定这一切是如何组合在一起的，因为我没有自己设置。我们所拥有的是一个很大的 settings.xml 文件，它被分成不同的环境。然后根据环境从该文件中提取配置选项。

与[Udan](https://stackoverflow.com/users/1750153/udan)类似，当发布到 dev/staging/live 时，我们也使用 Jenkins 将它们整合在一起。

看来这里有一个专门为 PHP 设计的 Maven：[http](http://www.php-maven.org/)
://www.php-maven.org/ 我从来没有使用过它，所以不能说它有多大用处，尽管也许值得一看。

# domain-driven-design - 事件和命令消息中的元数据

> ID：13591354
> 
> 赞同：2
> 
> 时间：2012-11-27T19:12:31.580
> 
> 标签：domain-driven-design, cqrs

我很想知道你们如何将有关命令/事件消息的元数据合并到 cqrs 解决方案中。例如，我想知道谁、何时、哪个主机等生成了命令。我不想将这些放入消息本身。

假设在一个网络应用程序中，用户创建了一个购物车`CreateShoppingCart { CartID, UserID }`。然后向其中添加项目，`AddItem { CartID, ItemID, Amount, etc }`. 当用户单击“添加到购物车”按钮时，我想准确记录。

1.  我可以将其添加到某些`Dictionary<string, object> Headers { get; set; }`属性中。该属性可以在 BaseMessage 类中。
2.  我可以依赖消息传递框架（类似于 NServiceBus）并将这些数据添加到消息上下文中的消息头中。
3.  为此信息发送单独的命令。类似的东西`LogCommandDetails { CommandID: 'id of AddItem command', DateTime, Some other meta data }`。处理此命令后，我可以更新 ItemAdded 事件的投影并将此数据添加到投影中。

你觉得呢？你有没有什么想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:11:55.667

通常，此信息存储在消息标头中，这是选项 2。这正是消息标头的用途。请注意，从消息传递框架的角度来看的消息与域中的消息之间存在细微差别，域中的消息是消息传递框架中的消息主体。

但是，很难辨别什么是数据，什么是元数据。除其他事项外，我遇到了日期问题。例如，时间戳是否与事件元数据或适当的域数据相关联？如果执行某些业务逻辑需要时间戳怎么办？在您的示例中，您是否需要记录日期以用于报告或审计目的，还是域运行所需的日期？在前一种情况下，使用标题，在后一种情况下，将日期放在消息正文中。

# c# - 数据结构 - 对于多种可能的键类型，如果键为真，则返回值的子集

> ID：13591358
> 
> 赞同：-2
> 
> 时间：2012-11-27T19:12:47.180
> 
> 标签：c#, data-structures

一个简单的例子：

```
Tom, Mary and John say "I want an apple"
Tom and John say "I want a race car"
John and Mary say "I want a pretty dress."

DataStructure[Tom] returns --> "I want an apple";"I want a racecar";
DataStructure[Mary] returns --> "I want an apple";"I want a pretty dress"; 
```

什么是idea数据结构？如果键或值的数量可以改变？我大概可以在哪里输入 DataStructure.Add(Mary, "New String); 或 DataStructure.AddWithNewKey("Timmy", List)？

* * *

有没有比为每个人保留一个列表或字符串数​​组更好的方法？

* * *

在下面的评论中，我很困惑为什么数据在编译时已知或纯粹是动态的会很重要。Jon 指出，如果要动态构建数据，理想的做法是使用字典，将字符串值与人员相关联。否则他的 linq 解决方案非常好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:16:01.527

听起来你想要一个[`ILookup`](http://msdn.microsoft.com/en-us/library/bb534291.aspx)- 从键到多个值的映射。您可以使用[`ToLookup`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)LINQ 中的方法创建它。或者，如果您想以可变的方式构建类似的东西，您可以使用 a `Dictionary<,>`，其中*值*的类型是某种类型的列表，例如`Dictionary<string, IList<string>>`。这比使用查找要复杂一些，并且对于缺少键的行为也没有那么优雅。

请注意，最好的解决方案部分取决于您如何获取数据。从您的示例中并不清楚。

编辑：你不会想要一个`Lookup<bool, StringInfo>`. 你会想要一个`Lookup<Person, string>`where`Person`是`Tom`,`Mary`或`John`类似的枚举。这些被硬编码为属性的事实很尴尬，但并非不可克服。我会添加一个这样的实用方法：

```
static IEnumerable<Person> GetPeople(StringInfo input)
{
    // I don't normally use this formatting, but it's cleaner than the
    // alternatives in this particular case.
    if (input.Mary) yield return Person.Mary;
    if (input.Tom) yield return Person.Tom;
    if (input.John) yield return Person.John;
} 
```

然后你可以使用：

```
var lookup = allStringInfos
       .SelectMany(info => GetPeople(info),
                   (info, person) => new { text = info.stringInfo, person })
       .ToLookup(pair => pair.person,
                 pair => pair.text); 
```

然后：

```
foreach (string value in lookup[Person.John])
{
    ...
} 
```

# math - 从“Z”大小的“Y”系列中均匀选择“X”项目

> ID：13591360
> 
> 赞同：0
> 
> 时间：2012-11-27T19:12:52.350
> 
> 标签：math, loops

我正在创建一个让我们说“产品”的显示界面。对于此示例，假设显示器最多显示 4 个产品。产品可以来自多个来源。来源的数量永远不会大于要显示的产品数量（本示例最多 4 个来源）。每个来源包含 1 个或多个产品。目标是在各个来源中平均分配显示的产品数量。

4 个产品的逻辑将按如下方式处理。

*   如果有**1 个源**，则将从该源中选择 4 个项目。 ***(4x1)***
*   如果有**4 个来源**，则将从每个来源中选择 1 个项目。***(1x1+1x1+1x1+1x1)***
*   如果有**2 个来源**，则从每个来源中选择 2 个项目***(2x1+2x1)***，除非一个来源只有 1 个产品，否则将遵循***(1x1+3x1)***
*   如果有**3 个源**，则从 2 个源中选择 1 个项目，从 1 个源中选择 2 个项目***(2x1+1x1+1x1)***

在我开始循环输出产品之前，我有一个源集合和每个源中的项目数。

我的问题是：

> 循环每个来源并输出适当数量的产品的最简单方法是什么？

请记住，每个来源可能只有 1 个产品，因此可能无法选择 4 个产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:01:19.650

这是用于选择产品的简单 Python 代码。

它通过循环访问源并一次添加一个产品来工作。

这应该导致来源之间的公平分配。

如果您发现代码太慢，可以使代码效率更高。

```
Z=[1,10,10]       # Number of products available for each source
Y=len(Z)          # Number of sources
X=4               # number of products to output
B=[0]*Y           # Number of products to select for each source

a=0               # Next source to try and take a product from
while sum(B)<min(sum(Z),X):
    a=(a+1)%Y     # Change to a different source for the next product
    if B[a]<Z[a]: # Check that this source still has products left
        B[a]+=1   # Note that we have taken a product from source a

print B 
```

在这个例子中，它打印

```
[1, 2, 1] 
```

表示从第一个来源获取 1 个产品，从第二个来源获取 2 个产品，从第三个来源获取 1 个产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T21:06:58.020

这是一个用 C# 编写的程序示例，它输出由 ID 标识的来源、每个来源中可用的产品数量和所选产品（每个来源都附加了来源 ID）作为证明：

```
using System.Linq;
using System.Collections.Generic;
using System;

namespace ConsoleApplication1
{
    class Product
    {
        public int Ordinal { get; set; }
        public Source Source { get; set; }
        public Product(int ordinal)
        {
            Ordinal = ordinal;
        }
    }
    class Source : List<Product>
    {
        public int Id { get { return this.GetHashCode(); } }
        public int AvailableProducts { get { return this.Count; } }
        public Source(int availableProducts)
        {
            for (int i = 0; i < availableProducts; i++)
            {
                var p = new Product(i);
                p.Source = this;
                this.Add(p);
            }
        }
    }

    class Sources : List<Source>
    {
    }

    class Program
    {
        static void Main(string[] args)
        {
            var sources = new Sources();
            var productsToBeSelected = 4;
            var sourceNumber = Math.Min(productsToBeSelected, 4);
            var maxProductsPerSource = 5;

            for (int i = 0; i < sourceNumber; i++)
            {
                var source = new Source((new Random(i + Int32.Parse(DateTime.Now.Ticks.ToString().Substring(DateTime.Now.Ticks.ToString().Length - 6)))).Next(maxProductsPerSource));
                sources.Add(source);
            }

            var candidateProducts=new List<Product>();
            sources.ForEach(i=>i.ForEach(p=>candidateProducts.Add(p)));

            var selectedProducts = candidateProducts.OrderBy(i => i.Ordinal).Take(productsToBeSelected);

            foreach (var item in sources)
            {
                Console.WriteLine("Source ID: {0}, {1} products",item.Id, item.Count);
            }

            foreach (var item in selectedProducts)
            {
                Console.WriteLine("Product ordinal: {0} from source {1}", item.Ordinal , item.Source.Id);
            }
        }
    }
} 
```

# iphone - 代码正确时，UILabel 中的删除键不起作用

> ID：13591366
> 
> 赞同：1
> 
> 时间：2012-11-27T19:13:22.363
> 
> 标签：iphone, objective-c, ios, uilabel

我正在创建一个计算器应用程序，计算器屏幕是一个 UILabel。我在使用删除键时遇到问题。这是我的代码：

。H

```
IBOutlet UILabel *display; 
```

.m

```
- (IBAction)Del 
{
    [display.text substringToIndex:display.text.length -1];
} 
```

它没有错误并且可以在模拟器中完美运行，但实际上并不能正常工作。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:15:37.750

`-substringToIndex:`创建它要发送到的字符串的一部分的副本。

您在这里所拥有的内容创建了这样一个字符串，并且对它没有任何作用。

我怀疑您想将该字符串分配给某些东西，例如`display.text`属性：

```
- (IBAction)Del {
    display.text = [display.text substringToIndex:display.text.length -1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:15:52.187

您忽略了该`substringToIndex:`方法的返回值，并且您没有更新标签的文本。

你想要这样的东西：

```
- (IBAction)Del {
    NSString *oldText = display.text;
    if (oldText.length > 0) {
        NSString *newText = [oldText substringToIndex:oldText - 1];
        display.text = newText;
    }
} 
```

这也可以防止尝试从空标签中删除。

# ajax - 从ajax加载flexslider

> ID：13591371
> 
> 赞同：2
> 
> 时间：2012-11-27T19:13:40.663
> 
> 标签：ajax, jquery, flexslider

我正在尝试从 ajax 加载一个 flexslider。当我直接指向包含滑块的页面时它可以工作，但是从 ajax 滑块不会加载。

这是我的ajax页面：

```
$(document).ready(function(){

//Ajax Event Handler For Categorie Demo
var $menu1 = $('#navDemo02');

function success(){

    $('div.ajaxContent').hide();
  $('div.ajaxContent').show(200);
}

function ajaxCallTimeout(index){
var url = 'categorie/0'+(index+1)+'.php';
 $('div.ajaxContent').load(url, success);
}
function ajaxCategorie(){
    var index = $menu1.find('li a').index(this);
     $('div.ajaxContent').html('<p style="color:#4CC3EC; text-align:center; margin-top:45px;">Loading...<img src="img/loading.gif" /></p>');
    switch(index){
        case 0 :

              $('div.ajaxContent').stop().animate({marginTop: 0}, 1000,'linear', function(){ajaxCallTimeout(index)});
        break;
        case 1 : 

              $('div.ajaxContent').stop().animate({marginTop: 0}, 1000,'linear', function(){ajaxCallTimeout(index)});
        break;
        case 2 : 

              $('div.ajaxContent').stop().animate({marginTop: 0}, 1000,'linear',function(){ajaxCallTimeout(index)});
        break;
        case 3 : 

              $('div.ajaxContent').stop().animate({marginTop: 0}, 1000,'linear', function(){ajaxCallTimeout(index)});
        break;
        case 4 : 

              $('div.ajaxContent').stop().animate({marginTop:0}, 1000,'linear', function(){ajaxCallTimeout(index)});
        break;
        case 5 : 

              $('div.ajaxContent').stop().animate({marginTop: 0}, 1000,'linear', function(){ajaxCallTimeout(index)});
        break;
        case 6 : 

              $('div.ajaxContent').stop().animate({marginTop: 0}, 1000,'linear', function(){ajaxCallTimeout(index)});
        break;

    }
}

$menu1.find('li a').bind('click', ajaxCategorie); 
```

});

这是滑块的脚本

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.min.js">\x3C/script>')</script>

<script defer src="jquery.flexslider.js"></script>

<script type="text/javascript">
 $(function(){
  SyntaxHighlighter.all();
});
$(window).load(function(){
  $('.flexslider').flexslider({
    animation: "slide"
  });
}); 
```

有人可以告诉我我缺少什么或指出我的教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:44:22.630

您是否在将提到的类加载到 DOM 之前在类上调用 flexslider() 函数？

当您单击链接进行 ajax 调用时，该页面上的 javascript 已经运行。现在，当您进行 ajax 调用时，脚本不会重新运行以再次在新类（已通过 ajax 调用）上分配 flexslider。

如果这是真的，您可以尝试将 flexslider 脚本移动到您正在进行 ajax 调用的页面中。

# linux - 命令输出重定向到文件和终端

> ID：13591374
> 
> 赞同：86
> 
> 时间：2012-11-27T19:13:50.580
> 
> 标签：linux, bash, redirect

我也试图将命令输出抛出到文件和控制台。这是因为我想在文件中记录输出。我正在执行以下操作，它附加到文件但不在`ls`终端上打印输出。

```
$ls 2>&1 > /tmp/ls.txt 
```

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-11-27T19:16:22.423

是的，如果您重定向输出，它不会出现在控制台上。使用`tee`.

```
ls 2>&1 | tee /tmp/ls.txt 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-11-05T12:21:21.697

值得一提的是，2>&1 表示标准错误也将被重定向，以及标准输出。所以

```
someCommand | tee someFile 
```

只给你文件中的标准输出，而不是标准错误：标准错误只会出现在控制台中。要在文件中也获得标准错误，您可以使用

```
someCommand 2>&1 | tee someFile 
```

（来源：[在 shell 中，什么是“ 2>&1 ”？](https://stackoverflow.com/questions/818255/in-the-shell-what-is-21)）。最后，上述两个命令都会截断文件并开始清除。如果您使用一系列命令，您可能希望一个接一个地获取所有命令的输出和错误。在这种情况下，您可以对“tee”命令使用 -a 标志：

```
someCommand 2>&1 | tee -a someFile 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-11-05T11:08:09.287

如果有人需要附加输出而不是覆盖，可以使用“tee”命令的“-a”或“--append”选项：

```
ls 2>&1 | tee -a /tmp/ls.txt
ls 2>&1 | tee --append /tmp/ls.txt 
```

# c# - visual studio plugin/automator - 对象字段映射器

> ID：13591375
> 
> 赞同：2
> 
> 时间：2012-11-27T19:13:51.647
> 
> 标签：c#, .net, visual-studio, mapping

我知道自动映射器和将字段从一个对象映射到另一个对象的各种其他方法，但我很好奇这个工具是否存在：在 Visual Studio 中，可以运行一个插件，该插件会吐出“最佳猜测”之间的映射两个类，作为内联代码。即，不必输入：

```
obj1.fname = obj2.fname;
obj1.lname = obj2.lname;
obj1.address = obj2.address;
... 
```

可以运行一个插件，通过简单地查看字段名称并匹配同名的名称来内联吐出这段代码？我想要内联执行此操作的原因是它可以输出大部分逻辑，然后我可以轻松添加任何附加值或处理任何非直接映射工作。

我发现这些天我的大部分编码都是在两个相同或不同类型的对象之间进行这种无聊的映射。

# c# - 在使用键盘导航时保持列表框的 selectedIndex 更新

> ID：13591378
> 
> 赞同：0
> 
> 时间：2012-11-27T19:13:57.820
> 
> 标签：c#

我有这个代码：

```
private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
{
     if (listBox1.SelectedItem != null)
     {
          item = listBox1.SelectedItem.ToString();
     }
} 
```

然后在设计器中 listBox1 所在的 Form 的 Load 事件中，我做了：

```
private void NewForm_Load(object sender, EventArgs e)
{
     this.Size = new Size(416, 506);
     this.Location = new Point(23, 258);
     listBoxIndexs();
     this.listBox1.SelectedIndex = 0;
} 
```

listBoxIndexs() 是：

```
private void listBoxIndexs()
{
     for (int i = 0; i < Form1.test.Count; i++)
     {
          listBox1.Items.Add(Form1.test[i]);
     }
} 
```

在 Load 事件中，我做了：

```
this.listBox1.SelectedIndex = 0; 
```

因此，当我对这个表单进行 Show 时，我会在已选择索引 0 时看到列表框。问题是当我使用我的键向上和向下箭头在项目之间移动时，我只看到项目周围的框架向下移动，selectedIndex 始终保持为 0。

我该如何解决？

我试图在 `this.listBox1.SelectedIndex = 0;`也之后添加，`listBox1.Select();`但它没有帮助。

我正在使用 Visual Studio c# 2010 pro .net 4 客户端配置文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:16:30.143

确保您`ListBox.SelectionMode`的设置为`One`.

如果设置为`MultiSimple`or `MultiExtended`，则仅当用户使用空格键或鼠标按钮选择项目时才会发生选择。这些模式中的箭头键只是移动选择框。

# java - 如何使用 jgit 从所有分支中检索所有历史记录？

> ID：13591383
> 
> 赞同：0
> 
> 时间：2012-11-27T19:14:17.787
> 
> 标签：java, git, jgit

看起来可以使用“git log”命令查看 git 存储库中的所有历史记录。 [Git：如何在没有注释的情况下从所有分支中检索所有提交？](https://stackoverflow.com/questions/12842350/git-how-to-retrieve-all-commits-from-all-branches-without-notes)

如何使用 jgit 达到相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:46:41.293

像这样的例子：

```
...
Git git = new Git(repository);
Iterable<RevCommit> commits = git.log().all().call();
for (RevCommit commit : commits) {
    ...
} 
```

# rest - 重复的资源名称

> ID：13591385
> 
> 赞同：2
> 
> 时间：2012-11-27T19:14:25.997
> 
> 标签：rest, identifier

我正在设计一个 Rest API 的服务目录并提出最佳实践，以便许多开发人员可以做出贡献。这是我的问题

假设我有一个名为 Saturn 的资源。（实际上我知道这可能是一个标识符）在目录中，它可能是与行星或罗马神有关的资源。所以我可以：

```
/gods/saturn  or
/planets/saturn 
```

每个土星资源返回不同的表示。这些是共享相同名称的真正不同的资源。寻找有关如何以务实的休息方式管理资源的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:29:00.407

@约翰柯比

这些：

*   /众神/土星
*   /行星/土星

是两个不同的标识符。实际上，您如何在后端存储数据以及使用哪个 URI 段来识别它们并不重要，但从 REST 的角度来看，URI 作为一个整体（甚至包括查询字符串）是一个资源标识符。

# zend-framework - 尝试遵循 zf1 的教程：关于数据库连接

> ID：13591387
> 
> 赞同：1
> 
> 时间：2012-11-27T19:14:28.807
> 
> 标签：zend-framework

我正在关注[本](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-model.html)教程。

当我运行`php scripts/load.mysql.php`它说：

> SQLSTATE[42000] [1102] 不正确的数据库名称 '/home/tirengarfio/workspace/ZendFW/gaziende/application/../data/db/guestbook-dev.db'

所以我只是试图改变线路

```
resources.db.params.dbname = APPLICATION_PATH "/../data/db/guestbook-dev.db" 
```

到

```
resources.db.params.dbname = "guestbook-dev" and created a new database called guestbook. 
```

但我收到另一个关于“留言簿”不是文件的错误，确切地说：

> PHP警告：file_get_contents（/home/tirengarfio/workspace/ZendFW/gaziende/scripts/data.mysql.sql）：无法打开流：/home/tirengarfio/workspace/ZendFW/gaziende/scripts/load中没有这样的文件或目录第 81 行的 .mysql.php

这是第 81 行错误周围的代码（检查 var_dump() 返回的内容）：

```
// Check to see if we have a database file already
$options = $bootstrap->getOption('resources');
$dbFile  = $options['db']['params']['dbname'];
if (file_exists($dbFile)) {
    unlink($dbFile);
}

// this block executes the actual statements that were loaded from
// the schema file.
try {
    $schemaSql = file_get_contents(dirname(__FILE__) . '/schema.mysql.sql');
    // use the connection directly to load sql in batches
    $dbAdapter->getConnection()->exec($schemaSql);
    var_dump($dbFile);die(); // this returns "guestbook-dev"
    chmod($dbFile, 0666); 
```

那么..我应该如何准确设置数据库连接的名称？

注意：本教程的示例是针对 Sqlite 的，我正在尝试使用 MySQL。那是重点吗？我从来没有使用过 Sqlite。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:45:43.150

这是 Mysql 数据库的基本 application.ini 设置，

```
resources.db.adapter = "pdo_Mysql"
resources.db.params.username = "username"
resources.db.params.password = "password"
resources.db.params.dbname = "database name"
resources.db.params.charset = "utf8"
resources.db.isDefaultTableAdapter = true //optional but very helpful if you only have one db 
```

Mysql 需要更多信息，然后是 SqlLite。

至于为本教程填充数据库，我只是采取了简单的方法并将 SQL 复制到 phpmyadmin 中。

**注意：**
如果您以前从未使用过 SqlLite，这可能是学习新东西的好机会。本教程真的不需要Mysql。:)

# ios - 在应用程序之外购买的 StoreKit 项目（从我的应用程序重定向到 App Store 应用程序）

> ID：13591392
> 
> 赞同：2
> 
> 时间：2012-11-27T19:14:50.050
> 
> 标签：ios, in-app-purchase, storekit

我有一个使用非续订订阅模式的应用程序。使用应用内购买测试帐户时效果很好。但是，在 Apple 的生产服务器上，有时用户会出于某种原因从我的应用程序转移到应用程序商店（有时是因为更新了计费信息，有时是为了回答安全问题）。这是在付款被添加到队列和 Apple 自己的付款流程中之后。一旦用户点击警报视图选项进入应用商店，我的交易观察者就会获得与`SKPaymentTransactionStateFailed`状态。没关系。但是，在用户更新他们的账单信息或确认他们的安全问题后，系统会询问他们（仍在应用之外）是否仍想购买应用内购买。完成后，它们将被带回我的应用程序（它已自行关闭），并且事务观察者没有返回任何内容。仅当检索到产品列表时，队列才会更新为购买的产品。观察者注册通知之前

所以我的问题是：

**如何处理在我的应用之外（在应用商店应用中）进行的购买？**

**如果在应用程序打开之前进行了购买（但未完成），队列会在什么时候更新？**我知道我应该让观察者一直走，但我想避免让用户购买该物品两次，而不知道他们已经购买了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:05:57.913

通过一些试验和错误，我似乎已经解决了我的问题

事实证明，我没有`SKPaymentQueue`足够快地初始化我的事务观察器。它需要在方法中被初始化并添加为事务观察者`application:didFinishLaunchingWithOptions:`，而不是稍后。至于交易何时到来，`paymentQueue:updatedTransactions`下次您的应用程序处于活动状态时，您的交易观察者的方法将通过购买的交易被调用。重要的是要注意，当您被带到 App Store 时，您的应用程序可能会或可能不会出于某种原因关闭一次，如果它最终关闭，则该方法将在下次打开应用程序时被调用。

# c# - 如何按他的标题选择列

> ID：13591397
> 
> 赞同：1
> 
> 时间：2012-11-27T19:15:16.020
> 
> 标签：c#, google-sheets, google-sheets-api

我正在学习如何使用 Google 电子表格 API 从电子表格中获取信息并向他插入信息。

我从谷歌获得了一些基本的例子，但我想做一些更高级的事情。

我在电子表格中有 2 个列表，如下所示：

```
 A                     B    
1| WebsiteList1    |   WebsiteList2
2| www.google.com  |  www.blabla.com
3| www.yahoo.com   |  www.someWebsite.com
4| www.cnn.com     |  www.cantThinkOfAbother.com 
```

我想根据列标题选择列表中的 1 个`(WebsiteList1`或`WebsiteList2`)

我正在尝试更改此代码以执行此操作，但没有运气（不知道该怎么做）：

```
public void GetAllWebSitesListFromWorkSheet(string spreadsheetName,string colmnTitle)
{
        WorksheetEntry entry = getWorkSheetByTitle(spreadsheetName);

        CellQuery myCellQuery = new CellQuery(entry.CellFeedLink);

        CellFeed cellFeed = service.Query(myCellQuery);

        foreach (CellEntry cell in cellFeed.Entries)
        {
            Console.WriteLine(cell.Value);
        }
    } 
```

我需要在`CellQuery`对象中进行什么更改，以获取所有站点`WebsiteList2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:02:30.960

好的，经过一段时间的折腾，我找到了一种只获得 1 列的方法！这是方法。

首先我们需要使用 ListFeed，这样我们才能得到完整的行。ListFeed 是代表电子表格上的行的集合。

```
ListFeed row; 
```

row.elements 是表示行的单元格的集合。

所以这是获得 1 列的方法（基于问题中的电子表格）：

```
public void GetWebsitesWithListFeed()
    {

        WorksheetEntry entry = //get your spreadsheet (expmples for this can be found
                              //in google docs api (link in the end of the answer)

        // Define the URL to request the list feed of the worksheet.
        AtomLink listFeedLink = entry.Links.FindService(GDataSpreadsheetsNameTable.ListRel, null);

        // Fetch the list feed of the worksheet.
        ListQuery listQuery = new ListQuery(listFeedLink.HRef.ToString());

        ListFeed listFeed = service.Query(listQuery);

        // Iterate through each row.
        foreach (ListEntry row in listFeed.Entries)
        {
            //go over each CELL in the row
            foreach (ListEntry.Custom element in row.Elements)
            {   
                //print only the CELLS that there father (xmlName) is "WebsiteList2"
                if (element.XmlName == "WebsiteList2")
                    Console.WriteLine(element.Value);
            }

        }

    } 
```

有关获取**电子表格和连接**内容的信息，请转到**[此处](https://developers.google.com/google-apps/spreadsheets/#retrieving_a_list-based_feed)**。

这只是我找到的一种方式，我想知道是否有人知道一种不同的方式来根据他的标题获得一个 colmn 基础。

（对不起我的英语不好）

# java - 在其他注解中使用注解常量会导致 java 编译器异常 (1.7.0_01)

> ID：13591399
> 
> 赞同：1
> 
> 时间：2012-11-27T19:15:19.567
> 
> 标签：java, compiler-construction, java-7

**环境：**

```
Apache Maven 2.2.1 (rdebian-8)
Java version: 1.7.0_01
OS name: "linux" version: "3.2.0-33-generic" arch: "amd64" Family: "unix" 
```

**文件：**

*1.TestAnnotation.java*

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface TestAnnotation {
    public String[] lists();
} 
```

*2.Test.java*

```
public class Test {
    //pure string instead of Test1.TEST1 has no problem
    @TestAnnotation(lists = {Test1.TEST1})  
    public static final String TEST = "test";

} 
```

*3.Test1.java*

```
public class Test1 {
    //pure string instead of Test.TEST has no problem
    @TestAnnotation(lists = {Test.TEST})
    public static final String TEST1 = "test1";
} 
```

**问题：**

当你通过运行来编译文件时`mvn clean package`，你会得到如下异常：

```
[INFO] Compilation failure
Failure executing javac, but could not parse the error:
An exception has occurred in the compiler (1.7.0_01). Please file a bug at the Java Developer Connection (http://java.sun.com/webapps/bugreport)  after checking the Bug Parade for duplicates. Include your program and the following diagnostic in your report.  Thank you.
java.lang.AssertionError: java.lang.NullPointerException
    at com.sun.tools.javac.code.Symbol$VarSymbol.getConstValue(Symbol.java:1005)
    at com.sun.tools.javac.comp.Attr.checkInit(Attr.java:2627)
    at com.sun.tools.javac.comp.Attr.visitSelect(Attr.java:2285)
    at com.sun.tools.javac.tree.JCTree$JCFieldAccess.accept(JCTree.java:1677)
    at com.sun.tools.javac.comp.Attr.attribTree(Attr.java:431)
    at com.sun.tools.javac.comp.Attr.attribTree(Attr.java:418)
    at com.sun.tools.javac.comp.Attr.attribExpr(Attr.java:449)
    at com.sun.tools.javac.comp.Annotate.enterAttributeValue(Annotate.java:203)
    at com.sun.tools.javac.comp.Annotate.enterAttributeValue(Annotate.java:243)
    at com.sun.tools.javac.comp.Annotate.enterAnnotation(Annotate.java:181)
    at com.sun.tools.javac.comp.MemberEnter.enterAnnotations(MemberEnter.java:778)
    at com.sun.tools.javac.comp.MemberEnter.access$300(MemberEnter.java:56)
    at com.sun.tools.javac.comp.MemberEnter$5.enterAnnotation(MemberEnter.java:746)
    at com.sun.tools.javac.comp.Annotate.flush(Annotate.java:109)
    at com.sun.tools.javac.comp.Annotate.enterDone(Annotate.java:101)
    at com.sun.tools.javac.comp.Enter.complete(Enter.java:510)
    at com.sun.tools.javac.comp.Enter.main(Enter.java:469)
    at com.sun.tools.javac.main.JavaCompiler.enterTrees(JavaCompiler.java:929)
    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:824)
    at com.sun.tools.javac.main.Main.compile(Main.java:417)
    at com.sun.tools.javac.main.Main.compile(Main.java:331)
    at com.sun.tools.javac.main.Main.compile(Main.java:322)
    at com.sun.tools.javac.Main.compile(Main.java:94)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.compileInProcess(JavacCompiler.java:420)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.compile(JavacCompiler.java:141)
    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:493)
    at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:114)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: java.lang.NullPointerException
    at com.sun.tools.javac.code.Lint$AugmentVisitor.augment(Lint.java:290)
    at com.sun.tools.javac.code.Lint.augment(Lint.java:82)
    at com.sun.tools.javac.comp.Attr.attribLazyConstantValue(Attr.java:597)
    at com.sun.tools.javac.code.Symbol$VarSymbol$1.call(Symbol.java:971)
    at com.sun.tools.javac.code.Symbol$VarSymbol.getConstValue(Symbol.java:1003)
    ... 49 more 
```

任何解决方法？这是在更高版本的jdk中修复的吗？

# javascript - Phantomjs 截取 iphone 上呈现的网站截图

> ID：13591417
> 
> 赞同：1
> 
> 时间：2012-11-27T19:16:01.463
> 
> 标签：javascript, phantomjs

我想使用 phantomjs 截取网页的屏幕截图，例如在 iphone 上呈现的网页。

我用这个：

```
page.settings.userAgent = 'Mozilla/5.0 (iPhone; U; CPU iPhone OS 6_0 like Mac OS X; en-us) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A523 Safari/8356.25';
page.viewportSize = { width: 320, height: 480 };

page.open(address, function (status) {
    if (status !== 'success') {
        console.log('Unable to load the address!');
        phantom.exit(2);
    } else {
        window.setTimeout(function () {
            page.clipRect = { top: 0, left: 0, width: 320, height: 480 };
            page.render(output);
            phantom.exit(3);
        }, 200);
    }
}); 
```

但是好像没用...

# c#-4.0 - FileInfo 类中的 CopyTo 和 MoveTo 是原子的吗？

> ID：13591425
> 
> 赞同：0
> 
> 时间：2012-11-27T19:16:29.043
> 
> 标签：c#-4.0, file-io

我正在编写一个文件处理组件，该组件会定期检查目录，如果出现文件，它将将该文件复制到单独的网络位置。

`FileInfo.CopyTo`做我需要的，但如果文件很大并且正在写入中间会`CopyTo`等待（*或抛出异常*）还是会尝试复制部分文件？

是一样的`MoveTo`吗？我搜索了 MSDN 和 stackOverflow，但找不到解决这个问题的主题。

# php - 从过程到面向对象构建 PHP 应用程序

> ID：13591431
> 
> 赞同：-1
> 
> 时间：2012-11-27T19:16:42.377
> 
> 标签：php, oop, frameworks, content-management-system, procedural-programming

我正在开发一个 CMS 应用程序，它是用 php 编程的程序风格编写的。但是现在要添加新功能，作为应用程序处理某些部分变得很困难。它已经到了一个复杂的阶段，**我们需要尊重复杂性**。
所以，现在我们计划使用面向对象的编程风格来构建它，这在控制方面是一种更好的方法。但是，很难确定从哪里开始？
我的意思是，哪些部分将被转换为类，模型部分到底是什么，而且我希望能够管理对应用程序控制的集中控制，因为它是一个 CMS，它将创建域和子域。
我很清楚的一件事是选择、更新、插入、删除功能和连接详细信息需要一个数据库类，但其他模块如**登录/注册、支付流程、使用模板的电子邮件功能、日志记录和调试、异常处理**（消息成功与失败）。将它们转换为类会有所不同吗？
是否有任何**框架或 CMS**，（尝试引用 wordpress/codeignitor，但我只能采用其中的几个功能）我可以参考哪个做这样的事情？我知道这有点描述性，但我是面向对象的 php 编程的新手，我从未构建过任何应用程序。**这是一个学习过程，我希望得到专家的建议/意见，因为我很早就做出了决定**。
感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:20:22.310

选择任何主要的 PHP 框架 ZendFramework、Symfony、Silex、Slim ......并在这些框架上构建您的 CMS。这些框架已经拥有您需要的大部分组件。另外，他们背后有大社区，因此您不必维护该代码。

如果您仍然想编写自己的框架。查看[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)处理请求。无需创建 DB 类，因为 PDO [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)是一个不错的内置抽象层，您可以使用。

# cuda - 跨步访问的银行冲突

> ID：13591435
> 
> 赞同：0
> 
> 时间：2012-11-27T19:16:54.567
> 
> 标签：cuda

我正在阅读 CUDA_C_Programming_Guide，在共享内存主题中，我遇到了一个示例：设备计算能力：1.0，共享内存中有 16 个库

```
extern __shared__ float shared[]; 
float data = shared[BaseIndex + s * tid]; 
```

在他们得出的解释中，“s”必须是奇数，谁能帮我理解`s`偶数时会发生什么，`s`奇数时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:09:48.883

奇数`s`的结论不容易直接看出，但是如果你尝试在bank冲突发生时推导（两个线程tid和tid'访问同一个bank），假设32是bank数：

s*tid == s*tid' (mod 32)

s*tid == s*(tid + n) (mod 32) 其中 tid' = tid + n

s*tid == s*tid + s*n (mod 32)

s*n == 0 (mod 32)

n = (32/d)*k 对于一些 k 和 d = gcd(s, 32)

所以当32小于等于32/d时不会发生bank冲突

并且由于 d = gcd(s, 2^5)，s 必须是奇数。

关于您在评论中的问题，我没有完全理解您不理解的内容，但简单的解释是：如果两个线程尝试访问同一个银行（这意味着访问同一行中的两个单词），则访问将被序列化。

# c++ - 在文本文件中定位和标记单词

> ID：13591440
> 
> 赞同：0
> 
> 时间：2012-11-27T19:17:22.257
> 
> 标签：c++

我需要阅读一个 500 字或更多字的文本文件（来自报纸等的真实世界文章）并像这样定位和标记 `<location> word <location/>`，然后在屏幕上打印整篇文章。我现在正在使用 boost 正则表达式，它工作正常。我想尝试使用列表或数组或其他一些数据结构来获得州和主要城市的列表，然后搜索这些并与文章进行比较。现在我正在使用一个数组，但我愿意使用任何东西。有什么想法或线索吗？

```
#include <boost/regex.hpp>
#include <iostream>
#include <string>
#include <boost/iostreams/filter/regex.hpp>
#include <fstream>

using namespace std;

int main()
{
string cities[389];
string states [60];
string filename, line,city,state;
ifstream file,cityfile, statefile;
int i=0;
int j=0;
cityfile.open("c:\\cities.txt");
while (!cityfile.eof())
{

    getline(cityfile,city);
        cities[i]=city; 
        i++;
    //for (int i=0;i<500;i++)
        //file>>cities[i];
}
cityfile.close();

statefile.open("c:\\states.txt");
while (!statefile.eof())
{
    getline(statefile,state);
        states[j]=state; 
    //for (int i=0;i<500;i++)
    //cout<<states[j];
    j++;
}
statefile.close();
//4cout<<cities[4];

cout<<"Please enter the path and file name "<<endl;
cin>>filename;
file.open(filename);

while (!file.eof())
{
        while(getline(file, line)
        {

        }

        while(getline(file, line))
        {

        //string text = "Hello world";
        boost::regex re("[A-Z/]\.[A-Z\]\.|[A-Z/].*[:space:][A-Z/]|C........a");
        //boost::regex re(
        string fmt = "<locations>$&<locations\>";
        if(boost::regex_search(line, re))
            {
                 string result = boost::regex_replace(line, re, fmt);
                cout << result << endl;
            }
        /*else
            {
                cout << "Found Nothing" << endl;
            }*/

        }
}
file.close();

cin.get(),cin.get();
return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:27:04.837

如果您追求渐近复杂度 - [Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)提供线性时间复杂度 ( `O(n+m)`)（`n`并且`m`是输入字符串的长度）。用于在字符串中搜索字典。

另一种方法是将标记化的单词放在 a 中`map`（其中值是每个字符串流中位置的列表），并在树中的数据中搜索每个字符串。复杂度将是`O(|S| * (nlogn + mlogn) )`（`m`是搜索词`n`的数量，是字符串中的词数，`|S|`是平均词的长度）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:53:05.070

您可以使用任何具有`.find()`方法或支持的容器`std::find()`。我会使用`set`, 因为`set::find()`运行时间少于线性时间。

这是一个执行您所说的程序的程序。请注意，解析效果不佳，但这不是我要演示的。您可以继续使用解析器查找单词，并使用调用`set::find()`来确定它们是否是位置。

```
#include <set>
#include <string>
#include <iostream>
#include <sstream>

const std::set<std::string> locations { "Springfield", "Illinois", "Pennsylvania" };

int main () {
  std::string line;
  while(std::getline(std::cin, line)) {
    std::istringstream iss(line);
    std::string word;
    while(iss >> word) {
      if(locations.find(word) == locations.end())
        std::cout << word << " ";
      else
        std::cout << "<location>" << word << "</location> ";
    }
    std::cout << "\n";
  }
} 
```

# c++ - 运算符重载 c++ (=)

> ID：13591443
> 
> 赞同：2
> 
> 时间：2012-11-27T19:17:26.487
> 
> 标签：c++, operator-overloading

重载 = 运算符后，

```
const Warrior& Warrior::operator = (const Warrior& warriorObj)
{
if (this != &warriorObj)
{
    name = warriorObj.name;
    start = warriorObj.start;
    alignment = warriorObj.alignment;
    strength = warriorObj.strength;
    craft = warriorObj.craft;
    gold = warriorObj.gold;
    life = warriorObj.life;
    fate = warriorObj.fate;
    specialAbility = warriorObj.specialAbility;
    numberOfObjects = warriorObj.numberOfObjects;       
}
    return *this;
} 
```

一旦我在驱动程序中创建了 2 个勇士：

```
 Warrior *w1, *w2;

    w1 = new Warrior();
    w2 = new Warrior();

    w1 = w2; 
```

如果我更改 的参数之一`w1`，它也会将 的参数更改为`w2`相同的东西...

我哪里做错了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T19:18:43.807

由于您正在分配指针，因此不会调用重载运算符。您可以使用

```
*w1 = *w2; 
```

或者，更好的是，根本不使用动态对象：

```
Warrior w1, w2;
w1 = w2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:19:02.330

你`w1 = w2;`是一个**指针赋值**——`operator=`你重载的不是在这里调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:19:27.987

您正在为彼此分配指针，而不是类实例，因此在您的代码中实际上永远不会调用重载运算符。

# asp.net - ASP.NET Web 应用程序错误

> ID：13591444
> 
> 赞同：0
> 
> 时间：2012-11-27T19:17:35.373
> 
> 标签：asp.net, web-applications, web-config

我有一个包含主页面和 2 个子页面的应用程序。主页工作正常，其中一个子页面工作正常。但是另一个子页面给了我一个错误：

> 运行时错误描述：服务器上发生应用程序错误。此应用程序的当前自定义错误设置可防止远程查看应用程序错误的详细信息（出于安全原因）。但是，它可以被本地服务器机器上运行的浏览器查看。详细信息：要在远程计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个标签。然后，此标记应将其“模式”属性设置为“关闭”。

当试图在我的本地运行时，我得到

> 访问处理此请求所需的资源时出错。服务器可能未配置为访问请求的 URL。

一周前这些工作正常，这个问题是突然的。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:22:15.100

您正面临此问题，因为您在访问时遇到错误的子页面可能处于某种安全之下。您描述的错误出现在匿名用户无法访问的页面上。

您必须首先检查 Web.config 以查看是否为该网页定义了一些位置访问权限，并确保它们被正确定义。

您可以通过以前的答案阅读有关此问题的更多信息。

[网站配置](https://stackoverflow.com/questions/6033878/web-site-configuration)

# javascript - 检查字符串是否是javascript中未知子字符串的重复

> ID：13591445
> 
> 赞同：2
> 
> 时间：2012-11-27T19:17:36.160
> 
> 标签：javascript, regex

我尝试使用此处提到的正则表达式在 javascript 中解决相同的问题：[检查字符串是否重复未知子字符串](https://stackoverflow.com/questions/7184123/check-if-string-is-repetition-of-an-unknown-substring)

我在Javascript的[第一个答案](https://stackoverflow.com/a/7184872/1463159)中翻译了正则表达式：`^(.+){2,}$` 但它不像我预期的那样工作：

```
'SingleSingleSingle'.replace(/^(.+){2,}$/m, '$1')  // returns 'e' instead of exptected 'Single' 
```

我在看什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:25:26.720

我目前没有解释为什么它返回`e`，但`.`匹配任何字符，`.{2,}`基本上只是意味着“匹配任何两个或更多字符”。

您想要的是通过使用反向引用来匹配您在捕获组中捕获的任何内容：

```
/^(.+)\1+$/m 
```

* * *

我刚刚注意到，这也是您链接到的答案建议使用的内容：`/(.+)\1+/`. 表达式完全相同，您无需为 JavaScript 更改任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:17:58.177

我认为你得到 'e' 的原因是`{2,}`，在这种情况下，这意味着与前面的正则表达式匹配两次或多次重复`(.+)`。`{2,}`不保证重复项***相互***匹配，只保证它们都符合匹配条件`(.+)`。

从我所看到的（使用[Expresso](http://www.ultrapico.com/Expresso.htm)）看来，第一个匹配项 `(.+)`是“SingleSingleSingl”（由于贪婪匹配），第二个匹配项是“e”。由于捕获组只记住他们的最后一场比赛，这就是为什么 replace() 会返回“e”。如果您使用`(.+?)`（用于非贪婪或不情愿的匹配）每个单独的字符将匹配，但您仍然只会得到最后一个，'e'。

正如 Felix 所提到的，使用反向引用是我所知道的保证重复相互匹配的唯一方法。

# ruby-on-rails - 对如何使用 twitter bootstrapless 文件的困惑

> ID：13591448
> 
> 赞同：0
> 
> 时间：2012-11-27T19:17:56.877
> 
> 标签：ruby-on-rails, twitter-bootstrap

我对这种混乱感到生气。我已经通过终端安装了 twitter bootstrap，然后我安装了 gem 文件。在完成其他小手续后，我的资产管道中有我的 bootstrap.less 文件。现在，当我创建一个新的视图页面并且我想要更改 css 时，我只需将这些内容放在 assest 管道中新创建的 css.scss 文件中。但是在 ive 2-3 个不同视图文件的 css.scss 文件之后，我现在不知道为什么它从不同的文件中获取类的定义。

例如，我有一个名为 as`home.html.erb`的视图文件，因此在名为`home.css.scss`. 现在我给出了一些我只想要这个视图页面而不是其他页面的更改。现在我有另一个视图页面，命名为，`gallery.html.erb`所以这个文件自动从`home.css.scss`. 我不知道为什么会这样？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:37:01.953

这是[Rails 资产管道](http://guides.rubyonrails.org/asset_pipeline.html)。它为您创建的每个控制器创建一个 .scss。它会自动导入您的视图。在生产环境中，它们都合并在一个文件中（在正常情况下）。

请阅读此[文档](http://coderberry.me/blog/2012/04/24/asset-pipeline-for-dummies/)以了解其工作原理。

# ruby - 为舞台环境配置 padrino 记录器？

> ID：13591453
> 
> 赞同：1
> 
> 时间：2012-11-27T19:18:16.953
> 
> 标签：ruby, sinatra, padrino

如何启用除 prod、dev 或 test 之外的其他环境的 padrino 记录器。例如，舞台环境？

我舞台环境中的 padrino 应用程序不写入文件日志。

我试过

```
Padrino::Logger::Config[:stage][:stream] = :to_file
Padrino::Logger::Config[:stage][:log_level]  = :devel 
```

但我收到了错误

```
$ - > RACK_ENV=homolog bundle exec padrino start
Users/carlospereira/ws/nutri/config/boot.rb:15:in `<top (required)>': undefined method `[]=' for nil:NilClass (NoMethodError)
from /Users/carlospereira/.rvm/gems/ruby-1.9.2-p320@nutri/bundler/gems/padrino-framework-94d09af7573a/padrino-core/lib/padrino-core/cli/base.rb:24:in `require'
from /Users/carlospereira/.rvm/gems/ruby-1.9.2-p320@nutri/bundler/gems/padrino-framework-94d09af7573a/padrino-core/lib/padrino-core/cli/base.rb:24:in `start'
from /Users/carlospereira/.rvm/gems/ruby-1.9.2-p320@nutri/gems/thor-0.15.2/lib/thor/task.rb:27:in `run'
from /Users/carlospereira/.rvm/gems/ruby-1.9.2-p320@nutri/gems/thor-0.15.2/lib/thor/invocation.rb:120:in `invoke_task'
from /Users/carlospereira/.rvm/gems/ruby-1.9.2-p320@nutri/gems/thor-0.15.2/lib/thor.rb:275:in `dispatch'
from /Users/carlospereira/.rvm/gems/ruby-1.9.2-p320@nutri/gems/thor-0.15.2/lib/thor/base.rb:408:in `start'
from /Users/carlospereira/.rvm/gems/ruby-1.9.2-p320@nutri/bundler/gems/padrino-framework-94d09af7573a/padrino-core/bin/padrino:9:in `<top (required)>'
from /Users/carlospereira/.rvm/gems/ruby-1.9.2-p320@nutri/bin/padrino:23:in `load'
from /Users/carlospereira/.rvm/gems/ruby-1.9.2-p320@nutri/bin/padrino:23:in `<main>' 
```

在我的 boot.rb 我有：

```
PADRINO_ENV  = ENV["PADRINO_ENV"] ||= ENV["RACK_ENV"] ||= "development"  unless defined?(PADRINO_ENV)
PADRINO_ROOT = File.expand_path('../..', __FILE__) unless defined?(PADRINO_ROOT)

require 'rubygems' unless defined?(Gem)  
require 'bundler/setup'
Bundler.require(:default, PADRINO_ENV)

Padrino::Logger::Config[:homolog][:stream] = :to_file
Padrino::Logger::Config[:homolog][:log_level]  = :devel

Padrino.before_load do
  Encoding.default_internal = nil
end

Padrino.after_load do
  DataMapper.finalize
end

Padrino.load! 
```

我删了评论，但第 15 行是

```
Padrino::Logger::Config[:homolog][:stream] = :to_file 
```

我也试过

```
if PADRINO_ENV == 'homolog'
  log_file_name = "#{PADRINO_ROOT}/log/#{PADRINO_ENV}_#{(ENV['APP_PROCESS_NAME'] || File.basename($0))}.log"
  log_file = File.new(log_file_name, "a+")
  PADRINO_LOGGER = { :homolog    => { :log_level => :debug, :stream => log_file }} 
end 
```

但我仍然收到消息：

```
/Users/carlospereira/ws/nutri/config/boot.rb:19: warning: already initialized constant PADRINO_LOGGER
No logging configuration for :homolog found, falling back to :production 
```

第 19 行是

```
PADRINO_LOGGER = { :homolog    => { :log_level => :debug, :stream => log_file }} 
```

并且没有日志写入日志文件。

有任何想法吗？

太极拳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:50:33.137

这就是我们在暂存环境中启用它的方式。

的相关部分`config/boot.rb`

```
PADRINO_LOGGER = { :staging => { :log_level => :debug, :stream => :to_file }} if PADRINO_ENV == 'staging' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:17:33.763

您可以将其设置为`config/boot.rb`

```
Padrino::Logger::Config[:stage][:stream] = :to_file
Padrino::Logger::Config[:stage][:log_level]  = :devel 
```

参考[API 文档](http://www.padrinorb.com/api/Padrino/Logger.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T09:33:05.903

我的解决方案是使用哈希，否则我会在日志中获得 ascii 颜色：

```
Padrino::Logger::Config[:development] = { :log_level => :debug, :stream => :to_file } 
```

# cocoa - 如何将 Webkit 插件添加到我的沙盒 OS X 应用程序 WebView？

> ID：13591456
> 
> 赞同：1
> 
> 时间：2012-11-27T19:18:42.167
> 
> 标签：cocoa, webview, osx-mountain-lion, browser-plugin, appstore-sandbox

我是 OS X 应用程序开发的新手，所以请耐心等待.....我有一个 OS X 应用程序，它广泛使用 WebView 为用户提供依赖于浏览器插件的视频会议/屏幕共享功能。当我禁用沙盒时，视频插件可以工作，但我们想在 OS X App Store 中分发我们的应用程序，并且需要让它与沙盒 WebView 一起工作。

我的问题是，如何启用沙盒并让我的沙盒 WebView 包含浏览器插件？我可以将插件与应用程序捆绑在一起并使用包含的插件初始化 WebView 吗？Apple 开发人员文档或互联网上的某处是否有此示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:24:19.273

简单的答案：以 32 位运行。

更长的答案：在 10.7 上，您可以在沙箱中加载捆绑的插件（从捆绑的 Content/Plugins 文件夹中），前提是您为 com.apple.WebKit.PluginAgent 添加了一个临时的 mach-lookup 异常，这适用于 32 和 64位二进制文​​件。在 10.8 上，当以 64 位运行时，插件报告为可用，但永远不会加载，并且没有任何内容记录到控制台以指示原因（或任何错误）。大概是插件代理缺少沙盒权限来启动插件进程并且静默失败。当以 32 位运行时，插件在主机应用程序沙箱权利下在进程内运行。

我在 2012 年 7 月提交了 Apple 错误 #11900695 以报告此问题，请求使其正常工作，或将插件报告为不可用并记录一些内容。在这一点上，它仍然是开放的。

希望有帮助！

# c#-4.0 - XtraGrid 中的单元格和更改背景颜色？

> ID：13591457
> 
> 赞同：1
> 
> 时间：2012-11-27T19:18:43.213
> 
> 标签：c#-4.0, devexpress, xtragrid

我有一个三列五行的 DataTable。DataTable 会将其添加到 DevExpress XtraGrid 之一。如果可能，我想更改网格或同一 DataTable 中单元格 (3, 3) 的背景颜色。

问候亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:31:04.327

您需要处理 GridView 上的 CustomDrawCell 事件。

[http://documentation.devexpress.com/#windowsforms/DevExpressXtraGridViewsGridGridView_CustomDrawCelltopic](http://documentation.devexpress.com/#windowsforms/DevExpressXtraGridViewsGridGridView_CustomDrawCelltopic)

# asp.net - OnClick Again 只触发一次 - VB.NET

> ID：13591459
> 
> 赞同：1
> 
> 时间：2012-11-27T19:18:44.977
> 
> 标签：asp.net

我在 .aspx 页面的 Datalist 中有一个 asp:ImageButton。我在位于数据列表之外的页面上也有一个 img 控件。datalist 仅用于生成缩略图。单击一个时，相应的图像应出现在较大的 img 控件中。该事件触发一次，但如果我尝试点击另一个缩略图，它不会再次触发该事件。但是，如果我等待 60-90 秒，我可以单击另一个缩略图，事件将再次触发。我不知道什么会导致这样的事情，它已经让我发疯了 2 天。我想这一定很简单，但我一直在互联网上搜索答案，似乎找不到答案。如果有人可以提供帮助，将不胜感激！

.aspx页面中的按钮代码如下：

```
<img height="15" src="images/1x1.gif"><asp:image id="ProductImage" runat="server" height="209" width="309"/>&nbsp;

 <asp:DataList id="MoreColors" runat="server" RepeatColumns="1" >
         <ItemTemplate>
              <table style: border="0" width="75">
              <tr>
              <td style: width="75" valign="middle" align="right">
              <asp:ImageButton  ID="imgBtn" runat="server" ImageUrl='<%# "ProductImages/Thumbs/" + Eval("DetailImage")%>' height="50" Width="50" OnCommand="imgBtn_Click"  CommandArgument='<%# Container.ItemIndex %>'/> </a>
              </tr>
              </table>
           </ItemTemplate>
      </asp:DataList> 
```

Onclick 事件中的 Code-behind 如下：

```
 Protected Sub imgBtn_Click(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.CommandEventArgs)

        Dim ib As ImageButton = DirectCast(sender, ImageButton)
        ProductImage.ImageUrl = ib.ImageUrl
        MoreColors.SelectedIndex = Convert.ToInt32(ib.CommandArgument)
        ProductImage.Focus()

    End Sub 
```

Page_Load 代码如下：

```
 Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim ProductID As Integer = CInt(Request.Params("ProductID"))
        If Not Page.IsPostBack Then

            Dim ImageCatalogue As ASPNET.LOVEDAT.ProductsDB = New ASPNET.LOVEDAT.ProductsDB()

            MoreColors.DataSource = ImageCatalogue.GetThumbnails(ProductID)
            MoreColors.DataBind()

            Dim Colorlist As ASPNET.LOVEDAT.ProductsDB = New ASPNET.LOVEDAT.ProductsDB
            AvailableColors.DataSource = Colorlist.GetAvailableColors(ProductID)
            AvailableColors.DataValueField = "ColorID"
            AvailableColors.DataTextField = "ColorName"
            AvailableColors.DataBind()

            ' Obtain Product Details
            Dim products As ASPNET.LOVEDAT.ProductsDB = New ASPNET.LOVEDAT.ProductsDB()
            Dim myProductDetails As ASPNET.LOVEDAT.ProductDetailsList = products.GetProductDetail(ProductID)

            ' Update Controls with Product Details
            desc.Text = myProductDetails.Description
            UnitCost.Text = String.Format("{0:c}", myProductDetails.UnitCost)
            ProductName.Text = myProductDetails.ProductName
            SKU.Text = myProductDetails.SKU.ToString()
            ProductImage.ImageUrl = "ProductImages/" & myProductDetails.ProductImage
            addToCart.NavigateUrl = "AddToCart.aspx?ProductID=" & ProductID
            ReviewList.ProductID = ProductID
            AlsoBoughtList.ProductID = ProductID

        End If
    End Sub 
```

# twitter-bootstrap - 带下标和上标的引导 wysithml5

> ID：13591464
> 
> 赞同：1
> 
> 时间：2012-11-27T19:19:02.330
> 
> 标签：twitter-bootstrap, wysihtml5

对于我的 Bootstrap 网站，我想使用[wysihtml 5 editor](https://github.com/jhollingworth/bootstrap-wysihtml5 "wysihtml5 编辑器")。但是那个默认不支持超/下标。

我为编辑器添加的这一行：

```
<a class='btn' data-wysihtml5-command='superscript'>superscript</a> 
```

以下代码是 bootstrap 的 wysihtml5 编辑器源代码的一部分：

`dom.delegate(container, "[data-wysihtml5-command]", "click", function(event) { var link = this, command = link.getAttribute("data-wysihtml5-command"), commandValue = link.getAttribute("data-wysihtml5-command-value"); that.execCommand(command, commandValue); event.preventDefault(); });`

默认情况下它确实适用于所有内容，但不适用于上标和下标。

谷歌给了我结果，我必须使用将 commandValue 设置为 false 的 execCommand，但这也不起作用。

有人确实知道如何让它工作，它将/添加到代码中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T17:09:45.503

将以下代码添加到源[https://github.com/xing/wysihtml5/blob/master/dist/wysihtml5-0.3.0.js](https://github.com/xing/wysihtml5/blob/master/dist/wysihtml5-0.3.0.js)

用 sup 和 sub 修改 wysihtm5

在源代码的第 6876 行之后

```
(function (wysihtml5) {
    var undef;

    wysihtml5.commands.sub = {
        exec: function (composer, command) {
            return wysihtml5.commands.formatInline.exec(composer, command, "sub");
        },

        state: function (composer, command, color) {
            // element.ownerDocument.queryCommandState("bold") results:
            // firefox: only <b>
            // chrome:  <b>, <strong>, <h1>, <h2>, ...
            // ie:      <b>, <strong>
            // opera:   <b>, <strong>
            return wysihtml5.commands.formatInline.state(composer, command, "sub");
        },

        value: function () {
            return undef;
        }
    };
})(wysihtml5);
(function (wysihtml5) {
    var undef;

    wysihtml5.commands.sup = {
        exec: function (composer, command) {
            return wysihtml5.commands.formatInline.exec(composer, command, "sup");
        },

        state: function (composer, command, color) {
            // element.ownerDocument.queryCommandState("bold") results:
            // firefox: only <b>
            // chrome:  <b>, <strong>, <h1>, <h2>, ...
            // ie:      <b>, <strong>
            // opera:   <b>, <strong>
            return wysihtml5.commands.formatInline.state(composer, command, "sup");
        },

        value: function () {
            return undef;
        }
    };
})(wysihtml5); 
```

并在源代码的第 7291 行之后

```
 "sub":    "sub",
    "sup":    "sup" 
```

并在源代码的第 8441 行之后

```
 "83": "sub", // S
    "80": "sup" // P 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:59:31.960

尝试 SUP 而不是 SUPERSCRIPT

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-17T09:27:23.143

我想扩展上面的例子，你应该`bootstrap-wysihtml5.js`在 parserRules 中添加以下内容：

```
tags: {
                "sub":{},
                "sup":{}.. 
```

# android - Windows7 64位ANT安装失败

> ID：13591469
> 
> 赞同：0
> 
> 时间：2012-11-27T19:19:30.047
> 
> 标签：android, eclipse, cordova, ant

我在为 ant 设置 %PATH% 时遇到问题。我想我做得对，但它仍然不能从 cmd.exe 工作

这是`echo %ANT_HOME%`显示的内容

```
C:\Users\Fero>echo %ANT_HOME%
c:\ant 
```

和`echo %PATH%`

```
C:\Users\Fero>echo %PATH%
.
.
LLIB\SAMPLES\REPL;C:\Program Files (x86)\Nmap;"C:\Users\Fero\AppData\Local\Andro
id\android-sdk\platform-tools;C:\Development\android-sdk-windows\tools;%JAVA_HOM
E%\bin;c:\ant\bin;C:\Ruby193\bin; 
```

这是实际的要求`ant`

```
C:\Users\Fero>ant
'ant' is not recognized as an internal or external command,
operable program or batch file. 
```

但是，如果我手动执行此操作：

```
C:\Users\Fero>c:\ant\bin\ant -version
Unable to locate tools.jar. Expected to find it in C:\Program Files\Java\jre7\li
b\tools.jar
Apache Ant(TM) version 1.8.4 compiled on May 22 2012 
```

似乎还有其他问题，我的`jre`目录有各种 .jar 文件，但没有一个叫做`tools.jar`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:49:46.147

`Tools.jar`: 在里面`JDK`，不是`JRE`。请安装 jdk 并设置`JAVA_HOME`到安装目录。

另外，检查你的`PATH`环境变量。两条带点的线看起来很奇怪。并且路径中有不匹配的引号。

并且输出`dir %ANT_HOME%`可以解决很多问题。

# java - JPA 选择创建许多对 db 的请求，性能

> ID：13591471
> 
> 赞同：2
> 
> 时间：2012-11-27T19:19:34.247
> 
> 标签：java, jpa-2.0, eclipselink

我是 JPA 的新手，我为我的 Web 服务编写了简单的 JPA 选择。我之前使用的是经典的 SQL 语句。太好了，我知道如何获得稳定的速度，但我现在在 5 个不同的项目中使用 3 个不同的数据库。所以我认为学习 JPA 是使用一种技术而不是必须了解 3 种 SQL 语言的好方法。所以我创建了一些表、实体并尝试使用 JPA。但是第一时间出了点问题——速度。

（我正在使用 MSSQL 2008）

我比较了简单的原生 SQL 选择和 JPA 选择：

```
em.createNativeQuery("SELECT c.* FROM Table c", MyTable.class); 
```

和

```
em.createQuery("SELECT c FROM Table c", MyTable.class) 
```

`createNativeQuery`快了 5 倍，但为什么呢？

所以我启动了包含在 MSSQL 包中的 SQL 分析器并调试了 JPA 正在做什么。我有一张包含 100 条记录的表，我所看到的让我感到惊讶：

*   `createNativeQuery`创建 1 个对 db 的请求，结果是查询中的 100 条记录
*   `createQuery`创建 100 个请求，每个请求返回 1 条记录。像这样的东西：

    ```
    1 SELECT Col1, Col2 FROM TABLE WHERE (ID = ?)<br>
    2 SELECT Col1, Col2 FROM TABLE WHERE (ID = ?)<br>
    .
    .
    .
    100 SELECT Col1, Col2 FROM TABLE WHERE (ID = ?) 
    ```

我将 JPA 2 与 Eclipse Link 一起使用。这是 JPA 工作方式的正常行为吗？或者我在设置中做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:26:08.000

这样做是为了优化不需要一次使用所有结果对象的场景。EclipseLink 首先加载对象骨架，当您遍历对象时，它会在场景后面填充它们。

如果您想一次加载所有对象，那么我认为`QueryHint`以下内容应该会有所帮助：

```
 Query query = em.createQuery("SELECT c FROM Table c", MyTable.class)
  query.setHint(QueryHints.BATCH_SIZE, 100); //set any appropriate batch size 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:26:45.697

您不应该使用`createNativeQuery`您提供的简单示例。

尝试这样的事情（`Query`改用）：

```
 Query agedUsers = em.createQuery( "SELECT u " + "FROM Users u "
            + "WHERE u.age = :age" );
    agedUsers.setParameter( "age", age);
    List<User> users = agedUsers.getResultList(); 
```

表名是实体的名称，您必须使用别名而不是`*`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:23:48.237

抱歉，当让 jpa 使用逐行加载和使用 QueryHints.BATCH_SIZE 时，我有点乱。您能解释一下何时创建骨架以及何时填充数据吗？
当我将数据返回到列表时：

列出用户 =agedUsers.getResultList();

我已将列表映射到primefaces dataTable，当呈现dataTable 或查询返回列表时填充数据？

什么时候让 jpa 逐行加载数据有用，什么时候使用 QueryHints.BATCH_SIZE 加载数据更好？

# html - 从正在运行的 Web 浏览器获取 HTML/DOM

> ID：13591473
> 
> 赞同：0
> 
> 时间：2012-11-27T19:19:43.823
> 
> 标签：html, linux, windows, dom, browser

如果这个问题太笼统，我深表歉意，如果是，请随时编辑。我正在设计一个 AI 系统，用于监视/观察人类与桌面环境的交互并从中学习。我可能会使用图像捕捉和计算机视觉，但这会增加屏幕上交互元素的复杂性。我想知道是否有一种方法可以直接从浏览器获取用户与之交互的实际 DOM 或 HTML 元素（鼠标单击、焦点、kb 输入等）。在 Windows 中，我可以将 DLL 挂接到浏览器中，但在 Linux 中，我不知道如何做类似的事情。这背后的想法是，当用户单击“按钮”登录时，而不是使用 CV 捕获图像像素，我实际上得到了用户与之交互的元素的数据结构。我怎么能做这样的事情？该引擎将是使用 C/C++ 开发的服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:26:51.423

Firefox的[Selenium 插件](http://seleniumhq.org/projects/ide/)，通常用于测试，具有记录/播放机制，可能能够记录您正在查找的事件类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:35:02.317

如果您的软件可以提示用户安装浏览器扩展，那么您可以轻松地为每个浏览器编写不同的扩展。这些写起来比较简单。

您可以找到一些可以嵌入到扩展程序中的开源代码，例如 Selenium 代码库，或者简单地使用 JavaScript 库（jQuery？）来捕获所有浏览器事件并发送看起来像用户交互的事件（单击、滚动等）与 DOM 详细信息和任何其他数据一起发送到您的系统。也许让您的引擎公开一个 REST 服务以进行集成。

但是，请注意性能 - 根据您发送的数量，您可能需要实现工作队列和批处理事件，或者您可能会减慢他们的浏览器速度。

OTOH，如果您需要不理会他们的浏览器，那么我不相信您将能够以编程方式确定支持屏幕上像素的 HTML/DOM 结构。至少，不是我知道的任何工具，而且逻辑支持这一点：由于每个浏览器都使用自己的代码库实现 DOM 操作和显示，内存中数据的格式是任何人的猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T20:08:27.217

如果你正在监控桌面环境，我对 Linux 环境有以下建议。

1.  尝试捕获 XWindow 事件。由于 KDE、GNOME 等窗口管理器是在它之上构建的，因此可能会为您提供更多信息。
2.  关于浏览器，正如其他人所说，最好使用插件。它也是一个跨平台的解决方案。

[这里](http://www.rahul.net/kenton/events.html#ASimple)给出了 X 事件观察器的起点。希望这对您有所帮助。

# ios - 加载 nib 文件

> ID：13591475
> 
> 赞同：0
> 
> 时间：2012-11-27T19:19:51.183
> 
> 标签：ios, xcode, uiviewcontroller, nsbundle

我正在尝试加载这样的 nib 文件：

```
[[NSBundle mainBundle] loadNibNamed:@"PhotoViewController" owner:self options:nil]; 
```

但这会使应用程序崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:23:28.940

```
[[NSBundle mainBundle] loadNibNamed:@"viewNib" owner:self options:nil]; 
```

您通常从您在 NIB 中设置为文件所有者的视图控制器执行此操作。这样，您可以在视图控制器中为视图声明一个出口，该出口将在您加载 NIB 文件时自动连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:52:55.547

如果您以编程方式创建视图控制器，则可以使用 initWithNibName:bundle: 视图控制器方法

IE

```
[[myViewcontroller alloc] initWithNibName:@"myNib" bundle:nil]; 
```

如果您通过情节提要转换到视图控制器，并希望情节提要从特定的 nib 文件加载该视图控制器，您可以执行以下操作：

1.  在情节提要中，删除视图控制器的视图
2.  为 nib 文件赋予与故事板视图控制器的类相同的名称

这里也回答了同样的问题： [Using XCode storyboard to instantiate view controller that uses XIB for its design](https://stackoverflow.com/questions/9155719/using-xcode-storyboard-to-instantiate-view-controller-that-uses-xib-for-its-desi)

# django - 有没有办法查询查询集中日期时间字段的时间组件？

> ID：13591476
> 
> 赞同：0
> 
> 时间：2012-11-27T19:19:51.560
> 
> 标签：django

MySQL 中有 TIME() 函数，Django 查询集过滤器中有年/月/日/工作日。但是为什么没有时间（或小时/分钟/秒）？是否有一种解决方法，我可以按时间查询，而无需使用自定义 sql 或迭代实际对象（太多，太慢）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:58:59.737

尝试这个：

```
Model.objects.extra(where=["TIME(datetimefield) = '12:12:12'"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:29:51.257

`DateTimeField`模型字段本身并不支持这一点。您需要使用自定义 SQL 或将超时分解为自己的`TimeField`.

有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/q/5273265)。

# wordpress - 让访问者在他们的 Facebook 上分享博客文章

> ID：13591479
> 
> 赞同：0
> 
> 时间：2012-11-27T19:19:59.523
> 
> 标签：wordpress

有很多不同的 facebook 插件可以找到。我已经尝试了很多，但没有找到一个可以满足我需要的。我希望在我网站上的所有帖子上放置一个 facebook“分享”按钮。当访问者按下按钮时，我希望在他们的 Facebook 页面上发布包含特色图片的帖子，并假设文本的前 100 个字符。这可能吗？有谁知道这样做的插件？

我尝试过的所有插件都只添加了指向博客文章的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:23:27.670

最好的插件可以在这里找到：[http](http://wordpress.org/extend/plugins/facebook-share-new/)
://wordpress.org/extend/plugins/facebook-share-new/ 它可以让人们分享帖子并向您显示您的帖子被分享了多少次。

# java - 如何在 java eclipse 中将输入键捕获为错误？

> ID：13591482
> 
> 赞同：0
> 
> 时间：2012-11-27T19:20:11.780
> 
> 标签：java

这就是我想要做的：

用户在程序中输入数字，程序会用它来处理。

但是如果用户只输入“enter”键（或“return”键），eclipse 会说

> 线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：0

我需要eclipse说的是“无效输入”并再次要求输入。

这就是我获取输入的方式：

我在一个函数中使用一个缓冲读取器，并且每当我需要读取用户的输入时我都会调用该函数。如果您想参考它，这是我的此功能的代码。此外，该程序是一个覆盖优化程序，以防您也想知道这一点。非常感谢你的帮助！

```
public static String Reader() {
  BufferedReader nerd = new BufferedReader(new InputStreamReader(System.in));
  String rvalue = "0";
  try {
    rvalue = nerd.readLine();
    if(elements_typed == 0) {
      Integer.parseInt(rvalue);
    }
    if(sets_typed == 0) {
      Integer.parseInt(rvalue);
    }
    return rvalue; 
  } catch (IOException e) {
    System.out.print("ERROR: Input must be an integer in [1, infinity]!");
    display_menu();
  } catch (NumberFormatException e) {
    System.out.print("ERROR: Input must be an integer in [1, infinity]!\n\n");  
    if(elements_typed == 0) {
      System.out.print("Enter number of elements (n):\n");
      rvalue = Reader();
    }
    if(sets_typed == 0) {
      System.out.print("Enter number of sets (n):\n");
      rvalue = Reader();
    }
  }
  return rvalue;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:22:44.633

如果没有看到更多您的代码，我不确定，但我会这样做：

```
while (rvalue.trim().isEmpty())
{
  System.out.println("invalid input");
  rvalue = nerd.readLine();
} 
```

`rvalue = nerd.readLine();`声明后

# parameters - doPost(e) 不返回参数，但 doGet(e) 呢？

> ID：13591488
> 
> 赞同：3
> 
> 时间：2012-11-27T19:20:38.820
> 
> 标签：parameters, google-apps-script

互联网上没有提到这个特定问题或解决方案，所以这里是：

`doGet()`我的应用程序包含以下`doPost()`功能：

```
function doGet (e){return ContentService.createTextOutput("User says: "+JSON.stringify(e))}
function doPost(e){return ContentService.createTextOutput("User says: "+JSON.stringify(e))} 
```

`GET http://*published URL*/+params`返回：

```
User says:     
{
  "queryString":"testparamA=abc&testparamB=bcd&testparamC=cde",
  "parameter":
    {
      "testparamA":"abc",
      "testparamB":"bcd",
      "testparamC":"cde"
    },
  "contextPath":"",
  "parameters":
    {
      "testparamA":["abc"],
      "testparamB":["bcd"],
      "testparamC":["cde"]
    },
  "contentLength":-1
} 
```

鉴于，`POST http://*published URL*/+params`返回：

```
User says:
{
  "queryString":null,
  "parameter":{},
  "contextPath":"",
  "parameters":{},
  "contentLength":0
} 
```

我的目标是访问`POST`参数。`POST`但是在使用该方法传输时，似乎有些东西阻止了脚本获取它们。`GET`似乎工作得很好。

我错过了什么，解决方案是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T04:21:20.307

使用您发布的完全相同的代码，POST 和 GET 对我来说非常好。我的猜测是您没有正确测试 POST。

这是我发布的网址。后面的代码是您的示例的副本/粘贴 -

[https://script.google.com/macros/s/AKfycbzWZv9WUp7rUtOxZhhwuXPpuNXuvPGpiHyrcYrPeNLiusOWzazo/exec](https://script.google.com/macros/s/AKfycbzWZv9WUp7rUtOxZhhwuXPpuNXuvPGpiHyrcYrPeNLiusOWzazo/exec)

从[http://hurl.it](http://hurl.it)（浏览器中的简单 REST 测试器）对其进行测试，并且没有任何问题。

请求（确保检查跟随重定向） -

![请求截图](../Images/f2b457afe49bcdfff606ce4952d9edc2.png)

响应（针对 GET 和 POST 的一次 ContentService URL 重定向后的响应）

![回复截图](../Images/4505d45c27dae51ddea78ac964d5ff38.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T02:16:14.643

我认为这在某种程度上是意料之中的。当一个人这样做时`HTTP GET`，参数会在 url 上传递。当它是一个`POST`他们继续有效载荷，而不是网址。

尝试像这样调用帖子（应用程序脚本代码）：

```
UrlFetchApp.fetch(scriptUrl, {method:'post', payload:'param1=value1&param2=value2'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T18:03:22.870

但是，我遇到了同样的问题。`doGet(e)`返回一个参数集合，但`doPost(e)`不返回。查看`e`脚本日志中的值：

DoGet 记录以下内容：

```
{queryString=param1=value1&param2=value2&param3=value3, 
parameter={param1=value1, param2=value2, param3=value3}, 
contextPath=, 
parameters={param1=[value1], param2=[value2], param3=[value3]},contentLength=-1} 
```

DoPost 记录以下内容：

```
{queryString=lib=Ma1kfpb2uwfs976NQh3S0GV_Vnss8VuKo&appId=u33198874110&formId=xxxxxxxxxxxx&token=AJuLMu2XVXMgpvS-7l6mWLVDmxjYMA6ZEQ:1393694820550&gm1xs=&service=AKfycbzfP8gYQknL9dNG6SVf0LmPYy3xiEAtyFQ8AvJDwfs, 
parameter={gm1xs=, lib=Ma1kfpb2uwfs976NQh3S0GV_Vnss8VuKo, appId=u33198874110, param1=value1, formId=u33198874111, token=AJuLMu2XVXMgpvS-7l6mWLVDmxjYMA6ZEQ:1393694820550, param2=value2, param3=value3, service=AKfycbzfP8gYQknL9dNG6SVf0LmPYy3xiEAtyFQ8AvJDwfs},
contextPath=, contentLength=341} 
```

因此，在`doGet`其中循环通过是微不足道的`e.parameters`，但在`doPost`您必须循环通过`e.parameter`，并处理您不关心的表单中的其他参数。

# twitter-bootstrap - 来自文本文件的 Twitter Bootstrap 字体

> ID：13591489
> 
> 赞同：0
> 
> 时间：2012-11-27T19:20:40.803
> 
> 标签：twitter-bootstrap

我正在尝试在 twitter bootstrap 中使用 typehead。

[http://twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)

如果假设我想显示特定文本文件中的元素。我怎样才能做到这一点？我知道基本的字头，但是如何从文本文件中检索字头的值？

例如像：

```
<input type="text" class="span3" style="margin: 0 auto;" data-provide="typeahead" data-items="4"
       data-source='["Apples","Bananas","Cherries","Dates","Eggplants","Figs","Grapes",
       "Honeydew","Kiwi","Mango","Peaches","Plums","Raspberries","Strawberries","Watermelon","Zucchini"]'> 
```

这是我的搜索框代码，我只想集成它。

```
 <br>
  <br><br><br><br><br> <br> <br> <br>
    <div class= "well">
  <center>
<div class="content-inner">
  <h1 class="pump-up">Find your Desired Course and Learn!<br> <strong>Boom, it's that easy.</strong></h1>
  <div class="full-search-bar">
    <ul class="item-stream unstyled search-input-stream">
      <li class="stream-item stream-header search-input-item">
        <form class="form-inline search-form" action="webcrawler.php" method = "post">
          <input class="xlarge" name="coursename1" type="text" placeholder="Java,Python,Ruby..You name it & We got it!" />
          <button class="btn btn-large btn-inverse" type="submit"><i class="icon-search icon-white"></i></button>
        </form>
    </li>
    </ul>
    </div>
  </div>
</center>
</div> 
```

谢谢！

# c# - 当我可以使用属性时，为什么要使用字段？

> ID：13591495
> 
> 赞同：1
> 
> 时间：2012-11-27T19:21:09.023
> 
> 标签：c#, properties, get, set, field

> **可能重复：**
> [C# .NET 3.5+ 中属性和字段之间的区别](https://stackoverflow.com/questions/653536/difference-between-property-and-field-in-c-sharp-net-3-5)
> [为什么我应该使用自动实现的属性而不是字段？](https://stackoverflow.com/questions/3198443/why-should-i-use-an-automatically-implemented-property-instead-of-a-field)

下面的两个示例完全相同，在类内部和外部具有相同的访问写入... 那么为什么每个人似乎都使用示例 1 而不是示例 2？我确定我只是错过了一些东西，但这已经困扰了我一段时间，我一直无法找到明确的答案。

```
class SampleClass
{
    /// Example 1
    /// Shown by online examples. 
    /// Why use a Field AND a Property where you could just use Example 2?
    private int age;
    public int Age { get { return age; } }
    private void setAge()
    {
        age = 1;
    }

    /// Example 2
    /// Tidier code and better understanding of how Age2 can be accessed. 
    /// Personally I prefer this method, though am I right to use it over Example 1?
    public int Age2 { get; private set; }
    private void setAge2()
    {
        Age2 = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:26:43.653

如果要在属性设置器或获取器上提供任何实际功能，则必须使用支持字段。例如，如果您想对您的 setter 进行验证，则需要使用支持字段。

```
public class MyClass
{
    private string myString = "blah";

    public string MyNotNullString
    {
        get
        {
            return this.myString;
        }
        set
        {
            if (value == null)
            {
                throw new ArgumentNullException("Cannot set MyNotNullString to null");
            }
            this.myString = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:40:02.030

如果可能的话，我每次都会使用 Example2 作为整洁因素......除非有我需要一个字段的情况，如@Platinum Azure 的答案。

对于 Example1，我能想到的唯一其他好处是您可以在 getter 或 setter 方法中设置断点，作为找出谁在更改值的快速方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:52:31.833

如果我使用的是 VS2008 或更高版本并且不需要在 VS2005 中编译它，通常我使用速记或：

```
public string SomeProperty { get; set; } 
```

但有时您需要一个支持字段，尤其是在您实现 INotifyPropertyChanged 时。

```
private string _someProperty;
public string SomeProperty
{
    get { return _someProperty; }
    set
    {
        _someProperty = value;
        OnPropertyChanged("SomeProperty");
    }
} 
```

但即使我确实有一个支持字段，我仍然通过属性设置值，以保持一致性。

# android - 更改/重命名整个 webview eclipse 项目文件和代码

> ID：13591498
> 
> 赞同：0
> 
> 时间：2012-11-27T19:21:33.063
> 
> 标签：android, eclipse, web, webview

请为我提出这个可能很愚蠢的问题道歉，但我只在 Eclipse 上工作了 2 天，我不想把这件事搞砸。

我`Webview_sample`从以下位置下载了一个项目源代码：
站点：[https](https://dev.tscolari.me/2011/09/19/android-webapp-in-3-minutes/)
://dev.tscolari.me/2011/09/19/android-webapp-in-3-minutes/ 源代码：[https ://github.com/tscolari/android -webview-sample-app/下载](https://github.com/tscolari/android-webview-sample-app/downloads)

我整天都在做这个，最后让它像我想要的那样工作，但是现在有一个新问题我无法弄清楚，因为我有各种各样的错误，因为我想将整个 Eclipse 项目文件和代码更改为我未来的应用程序名称，因为该项目已经不一样并且将来会进行更多修改（已经尝试过重构，查找和替换，但我总是会出错，我无法理解）。

如果我开始在某些屏幕中将项目创建为“新”而不是“现有”，我可以向您展示我想要的内容： ![在此处输入图像描述](../Images/bb2e813fc0dceaa2fc6442ee13e91995.png)

![在此处输入图像描述](../Images/592c59d9023dbd88ea4336a09d4ee378.png)

![在此处输入图像描述](../Images/857a6df7e3751bfa483a20bbf231d29f.png)

**得到这个：**

![在此处输入图像描述](../Images/4595a29eb86921752ac15bf042c15448.png)

**目前我有这个：**

![在此处输入图像描述](../Images/aa6342bfc62ef9e756a664b93b2229fc.png)

所以我拥有的编码文件是这样的：

**AndroidMobileAppSampleActivity.java：**

```
package tscolari.mobile_sample;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class AndroidMobileAppSampleActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);

    WebView mainWebView = (WebView) findViewById(R.id.mainWebView);

    WebSettings webSettings = mainWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);

    mainWebView.setWebViewClient(new MyCustomWebViewClient());
    mainWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

    mainWebView.loadUrl("http://www.mutesoft.com");
}

private class MyCustomWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
 }
} 
```

**AndroidManifest.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="tscolari.mobile_sample"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="10" />

    <uses-permission android:name="android.permission.INTERNET"/>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".AndroidMobileAppSampleActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

就是这样。。

**基本上“AndroidMobileAppSampleActivity”、“tscolari.mobile_sample”、“”等让我的生活变得悲惨。**

如果有人可以帮助我，那就太好了，因为我的头快要爆炸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:28:15.517

使用 Alt+Shift+R（或文件上下文菜单中的 Refactor->Rename）重命名任何文件，甚至是您的项目。如果您遵循建议，所有参考资料都会更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:50:14.673

就这样做

复制`AndroidMobileAppSampleActivity`到你的新包`your.new.package.name`中。并替换第一行

`package tscolari.mobile_sample;`和`package your.new.package.name;`

然后`main.xml`从布局文件夹复制到新项目的布局文件夹中。

最后但是同样重要的

在`Manifest`文件中添加这些行

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-permission android:name="android.permission.INTERNET"/>

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".AndroidMobileAppSampleActivity"
          android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

# c# - 加快 C# 中的列表搜索和插入

> ID：13591501
> 
> 赞同：0
> 
> 时间：2012-11-27T19:21:48.883
> 
> 标签：c#, performance, list, optimization

我有一个旧版应用程序，该应用程序曾经使用较小的（呃）数据集。

目前我们正在扩展它以在更大的数据集上运行（是的，它总是运行良好）。

所以现在我有了这段代码。 `sValues`是一个包含 2100 万个（是）项目的列表。`sProcessedStatus`是一个匹配列表，指示我们是否要使用它（即不是 -1 或 -2），如果是，我们将它们添加到`groupSourceVals`. 但是我们只添加唯一值，因此`indexOf()`检查。

```
for (int p = 0; p < sValues.Count; p++)
{
  int currentProcessed = sProcessedStatus[p];
  if ((!(currentProcessed == -1)) && (!(currentProcessed == -2)))
  {
    if (groupSourceVals.IndexOf(sValues[p]) == -1)
    {
      groupSourceVals.Add(sValues[p]);
    }
  }
  else
  {
    Console.WriteLine("Dropping non-processed value " + sValues[p]);
  }
} 
```

但是，在 64 位四核机器上，这在几天后仍然严重运行。除了多线程吸盘之外，我还缺少任何关于加速它的理论吗？IndexOf 是否非常缓慢，是否有更好的选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T19:24:58.617

用于`HashSet<T>.Contains`快速 O(1) 存在性检查。要么只使用 a`HashSet`要么同时保持两者`List`并`HashSet`保持它们同步。

# jenkins - Jenkins CI 通常的高可用性/故障转移解决方案是什么？

> ID：13591504
> 
> 赞同：2
> 
> 时间：2012-11-27T19:22:03.580
> 
> 标签：jenkins, hudson

Jenkins 通常的高可用性/故障转移解决方案是什么？现在，在其默认配置中，它是一个单点故障。

我了解 CloudBees 将他们的插件与 Enterprise Jenkins 版本一起发布 - 这是标准吗？还有哪些其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:15:15.887

2013 年 1 月， Diptanu Choudry[在 youtube 上做了一个演示，使用 Jenkins 作为高可用性持续交付设置的主干](http://www.youtube.com/watch?v=E87hhMgquwc)。是的，他提到 CloudBees 具有故障转移解决方案。他还讨论了您需要自己完成的部分。我希望他能张贴笔记，但与此同时，视频/音频长达 90 分钟，并且在 youtube 上。**注意**谈话在 7 分钟后开始。

# objective-c - XCode 在断点处多次停止

> ID：13591506
> 
> 赞同：4
> 
> 时间：2012-11-27T19:22:07.813
> 
> 标签：objective-c, ios, xcode, debugging, lldb

带有 lldb 调试器的 XCode 4.5.2

在各个地方调试时，XCode 喜欢在某些断点处多次停止。有的只有 2 到 3 次，有的 10 次以上。

此外，在单步执行代码时，当前行标记通常会向上跳 2 或 3 行，并且似乎多次执行相同的代码。它实际上并没有执行多次，因为我已经使用 NSLog 语句对此进行了测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T22:22:41.003

确保您处于调试方案或仔细检查优化器标志在构建设置中是否关闭。

# ruby-on-rails - 从 Ruby on Rails 开始并连接

> ID：13591509
> 
> 赞同：0
> 
> 时间：2012-11-27T19:22:18.033
> 
> 标签：ruby-on-rails, connection

基本上，我有一个 ruby​​ 网站，我需要对其进行一些修改。简单的，例如更改页面上的标题标签。该站点位于专用服务器上，但我无法弄清楚如何连接到 ruby​​ 站点并开始编辑文件。

我安装了红宝石，但环顾四周，我完全迷路了。有没有人有一个简单的一步一步来连接和获取文件或知道这个地方？

编辑：我可以使用 filezilla 连接到服务器，但是如果我编辑文件并复制回服务器，它似乎没有生效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:03:22.047

你可能需要覆盖

PROJECTDIR/tmp/restart.txt

您可以通过任何文本编辑器在您的 FTP 服务器上打开 tmp/restart.txt，然后按 Ctrl+S（保存），这样文件将被触摸并重新启动服务器

或者如果您有 ssh 访问权限，请运行

touch tmp/restart.txt 从你的 Rails 应用程序根目录

# jboss7.x - 保护 RESTEasy WS

> ID：13591510
> 
> 赞同：3
> 
> 时间：2012-11-27T19:22:23.260
> 
> 标签：jboss7.x, resteasy

我正在使用 Netbeans 7.2 开发两个项目：

**1：**一个jee6 web项目（提供）：一个RestEasy webservices，它使用JPA（EclipseLink 2.3）从PostgreSQL数据库中获取数据并部署在JBoss 7.1.1.Final上

jboss-web.xml：

```
<jboss-web>
 <!-- URL to access the web module -->
 <context-root>/dbo</context-root>        
</jboss-web> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?> <web-app xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
 version="3.0">
<display-name>Restful Web Application</display-name>

    <display-name>Restful Web Application</display-name>

<!-- Auto scan REST service -->
<context-param>
    <param-name>resteasy.scan</param-name>
    <param-value>true</param-value>
</context-param>

<!-- this need same with resteasy servlet url-pattern -->
<context-param>
    <param-name>resteasy.servlet.mapping.prefix</param-name>
    <param-value>/rest</param-value>
</context-param>

<listener>
    <listener-class>
        org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
    </listener-class>
</listener>

<servlet>
    <servlet-name>resteasy-servlet</servlet-name>
    <servlet-class>
        org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
    </servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>resteasy-servlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

JSONService.java：

```
package com.ostudio.dbo.rest;
import com.ostudio.dbo.model.Member;
import java.util.List;
import javax.enterprise.context.RequestScoped;
import javax.inject.Inject;
import javax.persistence.EntityManager;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;    

@Path("/members")
@RequestScoped
public class JSONService {
   @Inject
   private EntityManager em;

   @GET
   @Produces(javax.ws.rs.core.MediaType.APPLICATION_JSON)
   public List<Member> listAllMembers() {
      @SuppressWarnings("unchecked")
      final List<Member> results = em.createQuery("select m from Member m order by m.name").getResultList();
      return results;
   }
} 
```

**2：**第二个项目是客户端（Consumer）：一个jee6 web项目：一个RestEasy客户端，它的安全基于jaas连接的ldap服务器，部署在JBoss 7.1.1.Final

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>home-module</display-name>
    <!-- Protected Areas -->
    <security-constraint>
         <display-name>Admin Area</display-name>
        <web-resource-collection>
            <web-resource-name>Only_admins</web-resource-name>
            <url-pattern>/pages/protected/admin/*</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <description>For admin role only</description>
            <role-name>administrators</role-name>
        </auth-constraint>
        <user-data-constraint>
            <transport-guarantee>NONE</transport-guarantee>
        </user-data-constraint>
    </security-constraint>

    <!-- Validation By Form -->
    <login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>/pages/public/login.xhtml</form-login-page>
            <form-error-page>/pages/public/loginError.xhtml</form-error-page>
        </form-login-config>
    </login-config>

    <!-- Allowed Roles -->
    <security-role>
        <description>Administrators</description>
        <role-name>administrators</role-name>
    </security-role>
</web-app> 
```

jboss-web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

    <jboss-web>
     <!-- URL to access the web module -->
     <context-root>/</context-root>

     <!-- Realm that will be used -->
     <security-domain>SecurityRealm</security-domain>
    </jboss-web> 
```

jboss-部署结构.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
    <deployment>
      <dependencies> 
         <module name="org.primefaces" meta-inf="export">
            <imports>
               <include path="META-INF" />
            </imports>
         </module>  
         <module name="org.jboss.resteasy.resteasy-jaxrs" meta-inf="export">
            <imports>
               <include path="META-INF" />
            </imports>
         </module>  
      </dependencies>
  </deployment>   
</jboss-deployment-structure> 
```

DBOResteasyClient.java：

```
package com.ostudio.homemodule.dbo;

import com.ostudio.homemodule.model.Member;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Logger;
import javax.annotation.PostConstruct;
import javax.enterprise.context.RequestScoped;
import javax.faces.bean.ManagedBean;
import javax.inject.Named;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import org.apache.http.client.ClientProtocolException;
import org.jboss.resteasy.client.ClientRequest;
import org.jboss.resteasy.client.ClientResponse;
import org.primefaces.json.JSONArray;
import org.primefaces.json.JSONException;
import org.primefaces.json.JSONObject;

/**
 *
 * @author josuna
 */
@ManagedBean(name="dboBean")
@RequestScoped
public class DBOResteasyClient {
    private static final String BASE_URI = "http://localhost:8080/dbo/rest";
    ClientRequest webResource;
    ClientResponse response;
    private List<Member> members;
    private Member member;
    private static final Logger log = Logger.getLogger(DBOResteasyClient.class.toString());

    public DBOResteasyClient() {
        final String Path = "/members";
        webResource = new ClientRequest(BASE_URI+Path);
    }

   // @Named provides access the return value via the EL variable name "members" in the UI (e.g.,
   // Facelets or JSP view)
   @Produces
   @Named
    public List<Member> getMembers(){
        return this.members;
    }

    @PostConstruct
    public void listAllMembers() {
        try{
             ClientRequest resource = webResource;
        response = resource.accept(javax.ws.rs.core.MediaType.APPLICATION_JSON).get(ClientResponse.class); 

        if (response.getStatus() != 200) {
           throw new RuntimeException("Failed : HTTP error code : "
            + response.getStatus());    }   

        }catch(Exception e ){
            e.printStackTrace();
        }

        String jsonData = (String) response.getEntity(String.class); 

        JSONArray jsonArray = null;

        try {
            jsonArray = new JSONArray(jsonData);

            members = new ArrayList<Member>();

       for(int i=0;i<jsonArray.length();i++)
       {    
         JSONObject json_data = jsonArray.getJSONObject(i);
         member = new Member();
         member.setId(json_data.getLong("id"));
         member.setName(json_data.getString("name"));
         member.setEmail(json_data.getString("email"));
         member.setPhoneNumber(json_data.getString("phoneNumber"));         

         members.add(member);
    }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            log.info("ERROR EN listAllMembers: DBOResteasyClient: home-module");
        }       

   //  log.info("listAllMembers: size["+ members.size()+"]");

        log.info("Output from Server .... \n");
        log.info(jsonData);
    }

    public void close(){

    }
} 
```

**我的问题是：** 我需要保护网络服务。我使用 jboss 7.1 领域来保护客户端，我需要保护 web 服务 resteasy 但我不想使用其他领域，因为它再次要求身份验证，是否有一种形式来保护 web 服务并使用客户端身份验证来访问没有它的网络服务再次要求身份验证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T15:52:46.707

我假设您想要验证/授权您的用户。如果你想*保护*连接，你应该使用 TLS 和 HTTPS。如果您的连接已经受 TLS 保护，您可以使用 HTTP 基本身份验证并使用`SecurityInterceptor`：

```
@Provider
@ServerInterceptor
public class RestSecurityInterceptor implements PreProcessInterceptor
{
  // @EJB XXX xx (you can use Beans);

  @Override
  public ServerResponse preProcess(HttpRequest request, ResourceMethod method)
     throws UnauthorizedException
  {
    // if(request.getPreprocessedPath().startsWith("/secure")){}
    // perhaps you will limit it to a special path

    // Then get the HTTP-Authorization header and base64 decode it
    request.getHttpHeaders().getRequestHeader("Authorization");

    // check whatever you want with your EJB
    // if it fails, 
    // throw new UnauthorizedException("Username/Password does not match");
  }
} 
```

您的客户端应该实现抢先式 HTTP 基本身份验证。

# drupal - Drupal 6：创建特定节点类型时如何执行php代码

> ID：13591512
> 
> 赞同：0
> 
> 时间：2012-11-27T19:22:22.933
> 
> 标签：drupal, insert, creation, drupal-node-hook

我google了很久没有成功。当在我的 Drupal 6 网站上创建（或插入）特定类型的新节点时，我尝试执行一些 php 代码。

看来我必须做这样的事情：

```
function hook_nodeapi(&$node, $op, $a3 = NULL, $a4 = NULL) {
  switch ($op) {
    case 'insert':
      if ($node->type == 'MY_NODE_TYPE') {
         // execute some code here
      }
  }
} 
```

但我不明白什么时候调用这个函数，我必须在哪里放置这个代码？我迷路了。如果有人能给我一些提示，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:39:17.630

解决方案是创建一个自定义模块并使用新创建的模块的名称来实现这个钩子（例如 mymodulename_nodeapi）

教程在这里：[http ://drupal.org/node/206753](http://drupal.org/node/206753)

# ruby-on-rails - 使用 ActiveRecord 获取 Schema 的大小

> ID：13591513
> 
> 赞同：1
> 
> 时间：2012-11-27T19:22:25.017
> 
> 标签：ruby-on-rails, postgresql, activerecord, schema, multi-tenant

我尝试从子域的名称中获取架构的大小。公共架构中的子域名称，

在控制器.rb

```
@account = Account.find_by_subdomain(params[:subdomain])
@itemlist = Account.find(:all,:select => 'subdomain')
@schemasize = ActiveRecord::Base.connection.select_rows(%q{select pg_size_pretty(CAST((SELECT SUM(pg_total_relation_size(table_schema || '.' || table_name) ) FROM information_schema.tables WHERE table_schema = '}+@itemlist.to_s+%q{') As bigint) )  As schema_size}).to_s.gsub(/\D/, '').to_i 
```

获取 localhost:3000/namesubdomain

命令提示符下的输出

```
 (21.0ms)  select pg_size_pretty(CAST((SELECT SUM(pg_total_relation_size(table
_schema || '.' || table_name) ) FROM information_schema.tables WHERE table_schem
a = '[#<Account subdomain: "namesubdomain">]') As bigint) ) As schema_size 
```

我想在命令提示符下输出，例如

```
 (151.0ms)  select pg_size_pretty(CAST((SELECT SUM(pg_total_relation_size(tabl
e_schema || '.' || table_name) ) FROM information_schema.tables WHERE table_sche
ma = 'namesubdomain') As bigint) ) As schema_size 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:31:05.023

`@itemlist.to_s`将对象呈现为字符串。由于对象实际上是一个数组，因此呈现为字符串只会输出有关数组的信息而不是内容。您可能想要的是：

```
@itemlist.first.subdomain 
```

或者：

```
@itemlist.map(&:subdomain).join(" ") 
```

# java - 如何在 CXF 中处理相同的服务和端口名称？

> ID：13591514
> 
> 赞同：2
> 
> 时间：2012-11-27T19:22:24.250
> 
> 标签：java, cxf

我正在开发一个 CXF (2.2.7) Web 客户端来连接到在 WSDL 中具有相同服务和端口名称的 Web 服务。客户端使用私钥通过 SSL 连接，并使用相同的私钥对消息进行签名。SSL 连接通过“http:conduit”配置工作。我能够连接。

我的 spring 配置有问题，因为 Service 和 Port 名称相同，我不太清楚如何解决它。配置客户端的正常/众所周知的方法是：

```
<jaxws:client name="{http://bla.com/1.2/}PortA" createdFromAPI="true">...</jaxws:client> 
```

但是，在运行此程序时，我收到以下错误：

```
Caused by: org.springframework.beans.NotWritablePropertyException: Invalid property 'bus' of bean class [org.apache.cxf.service.ServiceImpl]: Bean property 'bus' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter? 
```

如果您在 jaxws 名称属性中使用“服务”名称而不是端口名称（ServiceA 而不是 PortA），则此错误是一个众所周知的错误。但是，在我的情况下，服务名称和端口名称是相同的:(...而且它不是我的 wdsl，所以我无法更改它...发生的情况是创建的 jaxws:client bean 是通过 Spring 通过自动装配配置的, 但是使用 Spring 定义的 Port bean 因为它具有相同的名称，并且这些定义是通过相同的名称查找的。Port bean 是类型为“org.apache.cxf.jaxws.JaxWsProxyFactoryBean”的实例可以将总线设置为属性，但不能在 ServiceImpl 上设置。

无论如何：如何最好地处理这个？我尝试使用 CXF 网站上描述的“老式”配置方式：

```
<jaxws:client id="someId" serviceClass="TheServiceClass" address="https://bla.com/webservice"> 
```

但是，这会导致 SSL 错误，显然 HTTP 管道配置不会自动链接到我的 jaxws 客户端配置:(...而且我真的不知道如何处理。怎么做？

目前我不确定最好的方法是什么？可能对服务/端口进行一些重命名（我不是肥皂专家）。或者使用 Spring 使用的其他 id 来查找 bean 定义，以便它们对于端口和服务是唯一的，即使名称相同？...

请对此有所帮助？

额外说明：我通过在名称属性中使用通配符使“http:conduit”与老式配置一起工作。但是 ws-securityPolicy 不会像通过...的“众所周知”配置那样自动拾取，因此消息未签名:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:45:21.277

实际上，您可以更改服务名称以使其与端口名称不同。这将改变 WSDL 本身，但不会与客户签订合同。我有同样的问题，没有找到其他方法来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-17T11:33:07.643

您可以按如下方式使用它。

```
 <jaxrs-client:client id="clientId" serviceName="clientServiceName"
                     address="${urlService}" >
 </<jaxrs-client:client>

 <http-conf:conduit  name="*clientServiceName*.http-conduit" >
    <http-conf:client ReceiveTimeout="1"/>
 </http-conf:conduit> 
```

# gis - Bing 地图中的线多边形交点

> ID：13591515
> 
> 赞同：0
> 
> 时间：2012-11-27T19:22:27.700
> 
> 标签：gis, geospatial, bing-maps

免责声明：我不是 GIS 专家。

我们正在尝试使用 DotSpatial 库来计算线多边形交点，然后在 WPF Bing Maps 控件中显示该交点。由于某种原因，任何在 EW 方向上不完全笔直的交叉点都会从 Bing 中的原始线向下移动。我假设这是一个投影问题，因为当我们在投影到 WGS1984 的 DotSpatial 控件中显示所有内容时，不会发生移位。

要重新创建，请将以下内容放在地图窗口后面的 xaml 代码中：

```
using Microsoft.Maps.MapControl.WPF;
using System.Windows;
using System.Windows.Media;
using DotSpatial.Data;
using DotSpatial.Topology;
public partial class MainWindow : Window
{
    private LocationCollection _polygonLocs = new LocationCollection();

    public MainWindow ()
    {
        InitializeComponent();

        AddSquarePolygon();

        // angled line 1
        LocationCollection slantedLocs = new LocationCollection();
        slantedLocs.Add(new Microsoft.Maps.MapControl.WPF.Location(40, -97));
        slantedLocs.Add(new Microsoft.Maps.MapControl.WPF.Location(35, -86));
        AddAndIntersectLine( slantedLocs );

        // straight EW line 
        LocationCollection ewLocs = new LocationCollection();
        ewLocs.Add(new Microsoft.Maps.MapControl.WPF.Location(37, -97));
        ewLocs.Add(new Microsoft.Maps.MapControl.WPF.Location(37, -86));
        AddAndIntersectLine(ewLocs);
    }

    private void AddAndIntersectLine(LocationCollection lineLocs)
    {
        MapPolyline line = new MapPolyline() { Locations = lineLocs, Stroke = new SolidColorBrush(Colors.Black) };

        this._bingMap.Children.Add(line);

        LocationCollection inters = Intersect(lineLocs, _polygonLocs);

        MapPolyline interLine = new MapPolyline() { Locations = inters, Stroke = new SolidColorBrush(Colors.Red) };
        this._bingMap.Children.Add(interLine);

    }

    private void AddSquarePolygon()
    {
        _polygonLocs.Add(new Microsoft.Maps.MapControl.WPF.Location(39.0, -92));
        _polygonLocs.Add(new Microsoft.Maps.MapControl.WPF.Location(36.0, -92));
        _polygonLocs.Add(new Microsoft.Maps.MapControl.WPF.Location(36.0, -93));
        _polygonLocs.Add(new Microsoft.Maps.MapControl.WPF.Location(39.0, -93));

        MapPolygon square = new MapPolygon()
        {
            Locations = _polygonLocs,
            Stroke = new SolidColorBrush(Colors.Black)
        };

        this._bingMap.Children.Add(square);
    }

    public static LocationCollection Intersect(LocationCollection line, LocationCollection bounds)
    {
        Feature lineFeature = CreateFeatureFromLocations(line);
        Feature boundsFeature = CreateFeatureFromLocations(bounds);

        IFeature featureIntersection = boundsFeature.Intersection(lineFeature);

        if (featureIntersection != null)
        {
            return (CreateLocationsFromFeature(featureIntersection));
        }

        return new LocationCollection();
    }

    private static LocationCollection CreateLocationsFromFeature(IFeature feature)
    {
        LocationCollection lc = new LocationCollection();
        foreach (var coords in feature.Coordinates)
        {
            lc.Add(new Microsoft.Maps.MapControl.WPF.Location(coords.Y, coords.X));
        }

        return lc;
    }

    private static Feature CreateFeatureFromLocations(LocationCollection locs)
    {

        Coordinate[] coords = new Coordinate[locs.Count];
        long inx = 0;

        foreach (var l in locs)
        {
            Coordinate coord = new Coordinate();
            coord.X = l.Longitude;
            coord.Y = l.Latitude;
            coords[inx] = coord;
            inx++;
        }

        LineString ls = new LineString(coords);
        MultiLineString mls = new MultiLineString(ls);
        return new Feature(mls);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:12:22.987

这是因为您的线是测地线（即：大地水准面上的线）。而当绘制在平面地图上时，它应该变成弧形，不再是直的。

1）您应该添加一个函数，将 MapPolyline 切割成多个线段以绘制接近现实的弧线

```
private static LocationCollection BuildGeodesicPolyline(Microsoft.Maps.MapControl.WPF.Location start, Microsoft.Maps.MapControl.WPF.Location end)
    {
        int segments = 32; // The number of line segments used to approximate the true curved route 
        LocationCollection latLongs = new LocationCollection();

        // Convert all coordinates to Radians
        double lat1 = start.Latitude * (Math.PI / 180);
        double lon1 = start.Longitude * (Math.PI / 180);
        double lat2 = end.Latitude * (Math.PI / 180);
        double lon2 = end.Longitude * (Math.PI / 180);
        // Calculate the total extent of the route
        double d = 2 * Math.Asin(Math.Sqrt(Math.Pow((Math.Sin((lat1 - lat2) / 2)), 2) + Math.Cos(lat1) * Math.Cos(lat2) * Math.Pow((Math.Sin((lon1 - lon2) / 2)), 2)));
        // Calculate the position at fixed intervals along the route
        for (double n = 0; n < segments + 1; n++)
        {
            double f = (1d / segments) * n;
            double A = Math.Sin((1 - f) * d) / Math.Sin(d);
            double B = Math.Sin(f * d) / Math.Sin(d);
            // Calculate 3D Cartesian coordinates of the point
            double x = A * Math.Cos(lat1) * Math.Cos(lon1) + B * Math.Cos(lat2) * Math.Cos(lon2);
            double y = A * Math.Cos(lat1) * Math.Sin(lon1) + B * Math.Cos(lat2) * Math.Sin(lon2);
            double z = A * Math.Sin(lat1) + B * Math.Sin(lat2);
            // Convert these to latitude/longitude
            double lat = Math.Atan2(z, Math.Sqrt(Math.Pow(x, 2) + Math.Pow(y, 2)));
            double lon = Math.Atan2(y, x);
            // Create a VELatLong representing this location (remember to convert back to degrees)
            double newLat = lat / (Math.PI / 180d);
            double newLon = lon / (Math.PI / 180d);
            Microsoft.Maps.MapControl.WPF.Location p = new Microsoft.Maps.MapControl.WPF.Location(newLat, newLon);
            // Add this to the array
            latLongs.Add(p);
        }

        return latLongs;
    } 
```

取自[http://www.beginningspatial.com/plotting_geography_linestrings_google_maps_and_virtual_earth](http://www.beginningspatial.com/plotting_geography_linestrings_google_maps_and_virtual_earth)

如果您在“有角度的线 1”块之后添加这些线，您将看到实际上是弧线的黑色虚线：

```
slantedLocs = BuildGeodesicPolyline(new Microsoft.Maps.MapControl.WPF.Location(35d, -86d),new Microsoft.Maps.MapControl.WPF.Location(40d, -97d)) ;
MapPolyline m = new MapPolyline() { Locations = slantedLocs, Stroke = new SolidColorBrush(Colors.Black), StrokeThickness = 2d, StrokeDashArray = new DoubleCollection(new List<double>() { 5, 5 }) };
_bingMap.Children.Add(m); 
```

2）您应该阅读有关 DotSpatial 的信息，因为红线（相交的结果）使用平面坐标系，因此不符合您的目的。以下是 SQL Server 对此的说明：

```
declare @p geography = geography::STPolyFromText('POLYGON((-92 39 , -93 39 , -93 36 ,-92 36  , -92 39 ))',4326)
declare @l1 geography = geography::STLineFromText('LINESTRING(-97 40, -86 35)',4326)

declare @pG geometry = geometry::STPolyFromText('POLYGON((-92 39 , -93 39 , -93 36 ,-92 36  , -92 39 ))',4326)
declare @l1G geometry = geometry::STLineFromText('LINESTRING(-97 40, -86 35)',4326)
select 
@p.STIntersection(@l1).ToString() as [GEODESIC] -- LINESTRING (-92.0000000179902 37.936656236067556, -93.000000053162651 38.376235391098518)
    , @pG.STIntersection(@l1G).ToString() as [PLANAR] -- LINESTRING (-93 38.18181818181818, -92 37.727272727272727) 
```

平面几何和测地线几何之间的几何运算在这样的尺度上是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T05:32:21.363

您的位置收集/交叉点测试不适合*海拔高度*。

您遇到这种情况是因为有时多边形旁边的点（在球形地图上）不一定在多边形之外。我们正在尝试在 2D 平原上测试 3D 点。

刚用同样的问题把我的头撞在墙上几天！我想出了一个视觉上吸引人的修复，这很简单。

使用函数将**所有**多边形纬度/经度转换`Point`为屏幕上的对象`LocationToViewPortpoint`，以及您正在测试相交的点，并使用 X 和 Y 值而不是纬度/经度。

# jquery - jquery 从 sum 中减去（数学运算）

> ID：13591516
> 
> 赞同：0
> 
> 时间：2012-11-27T19:22:32.557
> 
> 标签：jquery

我有这个 jquery 代码：

```
<script type='text/javascript'>
$(window).load(function(){
 $('input:checkbox').change(function(){
    var tot=200;
    $('input:checkbox:checked').each(function(){
        dat=$(this).val();
        tot-=parseInt(dat);
    });
    if (tot < "20") {
        alert("You dont have any money!");
        for(i = 1; document.getElementById("bifa" + i) !== null; i++) {
            if (document.getElementById("bifa" + i).checked)
            {
            } else {
                document.getElementById("bifa" + i).disabled = true;
            }
        }
    }
    $('#outputDiv').html("You have: " + tot + " RON")
  });
});
</script> 
```

它的作用是从总和中减去一定数量。你可以看到它在这里工作

[http://jsfiddle.net/a2mue/1/](http://jsfiddle.net/a2mue/1/)

我只是在每一行上添加了一个下拉选择，并在选中它旁边的复选框时启用。您可以看到复选框和选择下拉列表后面是一个数字，表示将从总和中减去的金额。我想要，当我从下拉列表中选择某个值`x2`或`x3`复选框的值将乘以 2 或 3，具体取决于选择和要减去的总和。例如，如果我选中 NOV WED 列`28/row 06-07`并选择`x2`，则输出应为“You have `200 - (30x2)=140`”，如果我取消选中输入框以反转操作。

那你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:55:10.060

我改变了你的样本，这里是修改：http: [//jsfiddle.net/abaLA/](http://jsfiddle.net/abaLA/)

```
total = 200;
function calcSum(){
    var sum = 0;
    $('input[type="checkbox"]').each(function(){
        var td = $(this).parent('td');
        if($(this).attr('checked')){           
            sum += td.find('select').val() * 1 * (td.html().split('</select>')[1] * 1);
            td.find('select').attr('disabled',false);
        } else {
            td.find('select').attr('disabled',true);
        }
    });
    return sum;
}

function getTotal(){
    alert(total - calcSum());
}

$('input[type="checkbox"]').click(function(){
    getTotal();
});

$('.florin select').change(function(){
    getTotal();
}); 
```

# java - 此代码可能引发 IllegalMonitorStateException

> ID：13591517
> 
> 赞同：0
> 
> 时间：2012-11-27T19:22:34.797
> 
> 标签：java, multithreading, exception, locking, synchronized-block

```
void waitForSignal(){
    Object ob =new Object();

    synchronized (Thred.currentThread()) {
        try {
            ob.wait();
            ob.notify();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

此方法引发 IllegalMonitorStateException。有人可以解释为什么会这样。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:24:21.940

您应该只调用`wait`您已获得锁定的对象。

在您的代码中，您已经获得了 lock on `Thread.currentThread()`，但是您正在调用它 on `ob`，这将抛出`IllegalMonitorStateException`。

因此，您应该将同步块更改为：-

```
synchronized (ob) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:28:21.173

您要在等待的对象上进行同步：

```
synchronized (ob) {
        try {
            ob.wait();
            ob.notify();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T20:56:17.880

如果即使你用 IllegalMonitorException 解决了你的问题，比如

```
void waitForSignal() {
    Object ob = new Object();
    synchronized (ob) { 
```

你的代码不起作用。在您的代码中，每个线程都会创建一个新锁，在方法之外是不可见的。其他线程没有机会通知等待线程。

# winjs - WinJS.Application.addEventListener 与 WinJS.Application.onActivated

> ID：13591519
> 
> 赞同：3
> 
> 时间：2012-11-27T19:22:41.653
> 
> 标签：winjs

[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/br212679.aspx)显示了为 Win8 WinJS 应用程序设置**onactivated事件的两个选项：**

```
WinJS.Application.addEventListener("activated", listenerName); 
```

或者

```
WinJS.Application.onactivated = listenerName; 
```

这两个选项在幕后的行为是否相同，或者有理由使用一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:16:20.217

这些都是一样的。"onactivated" 是由 WinJS 事件混合助手创建的免费 onFoo 事件。您可以随意使用其中任何一种。

我自己更喜欢 addEventListener 模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T01:52:33.497

这种`onactivated`风格被称为“DOM Level 0”，因为它在技术上不是 DOM 的一部分，而只是在 DOM 制定之前它演变为工作的方式。该`addEventListener`方法称为“DOM Level 2”方法。正如多米尼克所说，两者本质上是等价的，但`onactivated`出于一个原因，我碰巧更喜欢这种风格。我喜欢使用这样的匿名函数......

```
app.onactivated = function(args) {
    ...
}; 
```

但是，如果您使用 DOM Level 2 方法，那么养成使用匿名函数的习惯是个坏主意，因为您没有函数的句柄，因此永远无法删除它。所以如果你这样做...

```
app.addEventListener("activated", function(args) {
    ...
}); 
```

那么您没有该函数的句柄，也无法将其删除。因此，您需要定义一个这样的命名函数......

```
app.addEventListener("activated", myActivatedFunction);
function myActivatedFunction(args) {
    ...
} 
```

这样，如果您需要删除处理程序，您可以这样做......

```
app.removeEventListener("activated", myActivatedFunction); 
```

我的[codeSHOW 项目](http://codeshow.codeplex.com)的事件处理程序演示中有一个这样的示例。

玩得开心。

# linux - 重定向 apache-tomcat 不通过 h ttps 呈现

> ID：13591520
> 
> 赞同：0
> 
> 时间：2012-11-27T19:22:42.830
> 
> 标签：linux, apache, tomcat, redirect, liferay

我正在将内容从 tomcat 重定向到 apache，重定向工作但在某些时候失败，重定向工作但内容显示错误，样式中断，没有图像等。

在跟踪中出现类似这样的“ **WARN [404_jsp:109] /favicon.ico** ”

我想也许 AJP 协议是问题所在，有人遇到过同样的问题吗？

部分配置：

在阿帕奇：

```
LoadModule proxy_module modules/mod_proxy.so 
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so 
LoadModule ssl_module modules/mod_ssl.so
LoadModule socache_shmcb_module modules/mod_socache_shmcb.so 

Include conf/extra/httpd-ssl.conf

SSLCertificateFile /usr/local/apache2/certs/file.crt
SSLCertificateKeyFile /usr/local/apache2/certs/file.key

ProxyPass / ajp://127.0.0.1:8009/
ProxyPassReverse / ajp://127.0.0.1:8009/ 
```

我已经生成了一个密钥库并将其放入 tomcat 中。

Tomcat配置：

```
<Connector URIEncoding="UTF-8" connectionTimeout="20000" port="8050" protocol="HTTP/1.1" redirectPort="8443"/>

<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS"  />

<Connector maxThreads="150" port="8009" scheme="https"  clientAuth="false" protocol="AJP/1.3" redirectPort="8443"  /> 
```

我正在为 Liferay Portal 做这件事，它正在运行一个 linux VM。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:44:58.083

根据您提供的信息，我无法弄清楚问题可能出在哪里，但由于尚未有人回答，您可能想根据Liferay Wiki 中的[这篇文章检查您所做的事情](https://www.liferay.com/community/wiki/-/wiki/Main/HTTPS+Architecture+with+Liferay)

# actionscript-3 - 接收多个 NetStream.Connect.Success 事件，当它被认为不应该发生时触发

> ID：13591522
> 
> 赞同：0
> 
> 时间：2012-11-27T19:22:53.797
> 
> 标签：actionscript-3, p2p, netstream, netconnection, adobe-cirrus

我正在尝试使用 NetStream 在在线 Flash 多人游戏中的玩家之间传递数据。

我使用 NetConnection 类的事件调度，所以我知道我的客户端的当前状态是什么。

例如，当我有一个“NetConnection.Connect.Success”时，我知道我可以开始使用 NetStream 类并将 NetConnection 对象传递给它。

一切都有意义并且工作正常。

但是，我在监听 NetStream.Connect.Success 事件时遇到了问题。似乎这个事件被无缘无故地触发了多次，它是在两个用户相互连接时第一次触发，这很好，我可以看到他们的 farID 并将其传递给另一个对等方，一切正常。

但是，在这些对等方之间的第一次连接之后，3 或 4 多个 NetStream.Connect.Success 被无缘无故地触发。这不仅让我很恼火，因为我不明白为什么会发生这种情况，而且还破坏了我的“基于事件”的架构，以确定接下来要根据什么事件被触发。

我可以毫无问题地发送和接收消息，直到我得到一个 NetStream.Connect.Closed，这通常会在几秒钟后发生。有时我从来没有收到一个关闭的事件，有时当我收到一个时，我仍然可以发送和接收消息，就像另一个连接被关闭而不是我现在使用的连接一样。

就像你看到的那样，它真的很乱，我不知道是我犯了一些错误还是整个事件系统设计得不好。

我不知道我是否做得对的另一件事是，我将发送流和接收流的客户端属性分配给“this”，不确定是否可以，但因为它“有效”..我猜不是这种奇怪行为的责任。

（amfphp 服务的作用是交换 farID）

这是我的代码，它是一个非常简单的聊天应用程序：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" width="700" height="700"
               >
    <s:VGroup width="100%">
        <s:TextArea id="historyTxt" width="100%" verticalAlign="bottom" enabled="false"/>
        <s:TextInput id="inputTxt" enter="sendMessage(event)"/>
    </s:VGroup>

    <s:Button id="joinBtn" x="250" y="300" width="200" height="100" label="JOIN" fontSize="20" click="init()"/>

    <mx:Text id="nearIDTxT" x="10" y="647" text="nearID" alpha="0.7" fontStyle="italic"/>
    <mx:Text id="farIDTxT" x="10" y="669" text="farID" alpha="0.5" fontStyle="italic"/>

    <fx:Script>
        <![CDATA[

            import flash.display.SimpleButton;
            import flash.display.Sprite;
            import flash.events.Event;
            import flash.events.EventDispatcher;
            import flash.events.NetStatusEvent;
            import flash.events.StatusEvent;
            import flash.geom.Point;
            import flash.net.GroupSpecifier;
            import flash.net.NetConnection;
            import flash.net.NetGroup;
            import flash.net.NetStream;
            import flash.net.registerClassAlias;
            import flash.utils.ByteArray;
            import flash.utils.Dictionary;
            import flash.utils.Timer;
            import flash.utils.getTimer;

            private const SERVER:String = "rtmfp://p2p.rtmfp.net/"; 
            private const DEVKEY:String = "cde41fe05bb01817e82e5398-2ab5d983d09f"; 
            private const NAME:String = "Paul";
            private static const BOT:int = 1;
            private static const TOP:int = 0;

            private var _groupSpecifier:GroupSpecifier;

            private var _cirrusNc:NetConnection;
            private var _amfphpNc:NetConnection;

            private var _groupSpec:String;
            private var seq:int = 0;

            private var _user:String;

            private var _status:String;

            private var _sendStream:NetStream;
            private var _receivingStream:NetStream;
            private var _connected:Boolean;

            public var res:Responder;

            public function init():void
            {
                 joinBtn.visible = false;
                 _status = "waiting";
                 _cirrusNc = new NetConnection(); 
                 _cirrusNc.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus); 
                 _cirrusNc.connect( SERVER + DEVKEY );
            }

            public function onResult(response:Object):void {

                //here we ask if there is another player waiting to connect to someone
                if(response == "waiting") {
                    //just wait
                }
                //if not:
                else {
                    connectToPeer(response[1]);
                }
            }

            public function sendMessage(e:Event):void {
                _sendStream.send("handler", e.currentTarget.text);
                e.currentTarget.text = "";
            }

            public function onFault(response:Object):void {
                for (var i:* in response) {
                    trace(response[i]);
                }
            }

            private function onNetStatus(event:NetStatusEvent):void {

                switch(event.info.code){
                    case "NetConnection.Connect.Success":
                        trace(event.info.code);
                        nearIDTxT.text = _cirrusNc.nearID;
                        onCirrusConnect();
                        break;
                    case "NetStream.Play.Start":
                        trace(event.info.code);
                        break;
                    case "NetStream.Connect.Success":
                        trace(event.info.code);
                        if(!_connected){
                            _connected = true;
                            farIDTxT.text = event.info.stream.farID;
                            onPeerConnect(event.info.stream.farID);
                        }
                    default:
                        trace(event.info.code);
                }
            }

            private function onCirrusConnect():void {
                //connecting to amfphp
                _amfphpNc = new NetConnection();
                _amfphpNc.connect("http://localhost/Amfphp/");
                res = new Responder(onResult, onFault);
                _amfphpNc.call("Rendezvous.match", res, NAME, _cirrusNc.nearID);

                //defining the send stream
                _sendStream = new NetStream(_cirrusNc, NetStream.DIRECT_CONNECTIONS);   
                _sendStream.client = this;
                _sendStream.publish("data");
            }

            private function connectToPeer(farID:String):void {

                farIDTxT.text = farID;

                //defining the receiving stream
                _receivingStream = new NetStream(_cirrusNc, farID); 
                _receivingStream.client = this;
                _receivingStream.play("data");
            }

            private function onPeerConnect(farID:String):void {

                farIDTxT.text = farID;

                //defining the receiving stream
                _receivingStream = new NetStream(_cirrusNc, farID); 
                _receivingStream.client = this;
                _receivingStream.play("data");
            }

            public function handler(message:String):void {
                trace(message);
                historyTxt.text = message;
            }

        ]]>
    </fx:Script>
</s:Application> 
```

# php - PHP - 从下拉框中获取选择以在同一页面上的另一个下拉框中使用

> ID：13591523
> 
> 赞同：2
> 
> 时间：2012-11-27T19:23:05.443
> 
> 标签：php, database, drop-down-menu, mysqli

我正在尝试使用另一个下拉框中的选择来填充下拉框。我已经想出了如何使用数据库中的数据填充列表，似乎问题在于在不提交表单的情况下从同一页面的第一个下拉框中获取他们选择的内容。这就是我到目前为止所拥有的。

```
<select name = "trainer_has_update_pokemon">
<p>Trainer</p>
<?php
$query = "SELECT name FROM Trainer";

if ($stmt = $mysqli->prepare($query)) {
$stmt->execute();
$stmt->bind_result($name);
while ($stmt->fetch()) {
    echo"<option>$name</option>";
}

$stmt->close();
}

?>
</select>

<?php
$trainer_name = $_GET['trainer_has_update_pokemon'];
?>

<p>Pokemon</p>
<select name = "type_of_update_pokemon">
<?php
$query = "SELECT DISTINCT p.name FROM Pokemon p WHERE p.owner_id = (SELECT t.trainer_id FROM Trainer t WHERE t.name = '$trainer_name')";
if ($stmt = $mysqli->prepare($query)) {
$stmt->execute();
$stmt->bind_result($pkmn_name);
while ($stmt->fetch()) {
    echo"<option>$pkmn_name</option>";
}
$stmt->close();
}
?> 
```

我真的没有 Javascript 或 AJAX 方面的经验，所以如果没有这些方法可以做到这一点，那将是有帮助的，但如果没有，我愿意在这种情况下学习他们的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:33:36.187

不幸的是，您将需要某种客户端脚本来调用外部 php 页面，以便实时提取数据。一个快速的模型看起来像：

javascript:

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
$(function(){ //document ready
    $('select[name="trainer_has_update_pokemon"]').change(function(){ // when trainer_has_update_pokemon changes
        $.ajax({
            type:"POST", //send a post method
            url:'ajax.php', // path to ajax page
            data:"trainer_name="+$(this).val(), //set trainer_name to value
            success:function(response){ // retrieve response from php
                $('select[name="type_of_update_pokemon"]').html(response); // update select
            }
        });
    });
});
</script> 
```

PHP（我命名为 ajax.php）：

```
<?php
/* ADD YOUR DATABASE CONNECTION */
$trainer_name = $_POST['trainer_name']; // DONT FORGET TO ESCAPE!!
$query = "SELECT DISTINCT p.name FROM Pokemon p WHERE p.owner_id = (SELECT t.trainer_id FROM Trainer t WHERE t.name = '$trainer_name')";
if ($stmt = $mysqli->prepare($query)) {
    $stmt->execute();
    $stmt->bind_result($pkmn_name);
    while ($stmt->fetch()) {
        echo"<option>$pkmn_name</option>";
    }
    $stmt->close();
}?> 
```

# iphone - css 问题 - 下拉菜单在 iphone/ipad 上无法正常工作

> ID：13591531
> 
> 赞同：1
> 
> 时间：2012-11-27T19:23:28.910
> 
> 标签：iphone, css, ipad

我有一个 css 供电的下拉菜单，在 iphone 或 ipad 上无法正常工作。

它可以在我检查过的所有其他浏览器和设备上按我的意愿工作。

我已经把它缩小到我没有包含在href标签中的菜单文本（例如单词'face'），就像它在代码的原始版本中那样。这就是与众不同的地方。将href标签包裹在字面上，下拉菜单在ipad / iphone上可以正常工作

显然我可以只添加 href 并完成，但我真的不想这样做，否则每个有触摸屏的人，通常必须点击菜单文本才能显示下拉菜单，将被带到任何地方链接点。首先破坏了下拉菜单的全部内容！

这是代码：

```
<div id="dropMenuWrapper">
  <div id="dropMenu">
        <ul class="level1">
        <li class="submenu">Face
            <ul class="level2">
                <li class="subCatodd"><a href="">powder</a></li>
                <li class="subCateven"><a href="">cream</a></li>
            </ul>
        </li>
    </ul>
  </div>
</div> 
```

的CSS：

```
body {  behavior: url(includes/csshover.htc);}
div#dropMenu li a:hover, div#dropMenu li.submenu li.submenu:hover {color: #4f4f4f!important;background:#D5E88F;}

#dropMenuWrapper {
width:100%;
height:25px;
margin:0;
font-size:11px;
}

div#dropMenu {
width:750px;
margin:0 auto;
text-align:center;
z-index:1000;
position:relative;
}

div#dropMenu ul {
margin: 0; 
padding: 0;
}

div#dropMenu li {
position: relative; 
list-style: none; 
margin: 0; 
float: left; 
line-height: 1em;
}

div#dropMenu ul.level1 {
width:750px; 
margin:0 auto; 
text-align:center;
background:#4F4F4F;
height:25px;
z-index:1000;
}

div#dropMenu li:hover {}
div#dropMenu li.submenu {}
div#dropMenu li.submenu:hover {}
div#dropMenu li a {display: block;text-decoration: none;} 
div#dropMenu>ul a {width: auto;}
div#dropMenu ul ul {position: absolute; width: 13em;display: none;}
div#dropMenu ul ul li {border-bottom: 1px solid #CCC; width:13em;}
div#dropMenu li.submenu li.submenu {}
div#dropMenu ul.level1 li.submenu:hover ul.level2, 
div#dropMenu ul.level2 li.submenu:hover ul.level3,
div#dropMenu ul.level3 li.submenu:hover ul.level4,
div#dropMenu ul.level4 li.submenu:hover ul.level5 {display:block;z-index:1000;}
div#dropMenu ul.level2 {top: 2.17em; background:#4f4f4f;z-index:1000;}
div#dropMenu ul.level3, div#dropMenu ul.level4, div#dropMenu ul.level5 {top: 0; left: 13em; background:#4f4f4f}
div#dropMenu ul.level2 a {padding: 0.5em 0.25em;color: white; text-transform:none;}  /* this is text color on drop-down submenu */
div#dropMenu ul.level2 a:hover {color:#4f4f4f;} 
```

为了方便一个jsfiddle：http: [//jsfiddle.net/VvT6Y/1/](http://jsfiddle.net/VvT6Y/1/)

谁能指出一种让下拉菜单在 iphone/ipad 上工作而无需将文本设为链接的方法？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:54:38.517

“要在有人点击菜单按钮时出现下拉菜单，您只需添加

```
onClick=”return true” 
```

`<LI>`到触发菜单弹出的任何列表项（例如 ）中的“A”标记。这也适用于级联菜单。”

来自 - [http://blog.travelvictoria.com.au/2012/03/31/make-sure-your-websites-drop-down-menus-work-on-an-ipad/](http://blog.travelvictoria.com.au/2012/03/31/make-sure-your-websites-drop-down-menus-work-on-an-ipad/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:35:33.207

您是否尝试将`:active`和/或`:focus`伪类添加到使用的每个实例`:hover`？

因此，例如，`li.submenu:hover`变为`li.submenu:hover, li.submenu:active`。

当`:active`元素“被用户激活”时，通常使用伪类。最常见的例子是当用户开始点击链接的动作（“mousedown”事件），但还没有完成动作（“mouseup”事件）时，链接上的点。

当`:focus`元素具有焦点（可以接受输入）时使用伪类。这在表单控件中最为明显，但实际上它的使用频率要高得多（是否见过链接周围的小虚线边框，尤其是当您通过表单时？那是`:focus`）。

（[两者的 W3C 信息。](http://www.w3.org/TR/css3-selectors/#the-user-action-pseudo-classes-hover-act)）

我提到了两者，因为我不能 100% 确定在这种情况下会使用哪一个 iOS Safari。我会假设`:focus`，但我从浏览器中看到了更奇怪的东西。

（附带说明，您不需要.ID`div#dropMenu`应该是唯一的，所以就`#dropMenu`足够了。如果您的 ID 在您的页面上不是唯一的，那么您使用的 ID 是错误的。）

**编辑**如果伪类不起作用，那么不幸的是，目前您能够处理它的唯一方法是使用 JavaScript。值得庆幸的是，它很简单：

```
var is_touch_device = 'ontouchstart' in document.documentElement; 
```

检测功能，然后您可以使用它来触发某些行为（添加类等）以模拟效果。如果您碰巧已经在使用 Modernizr，那么您可以使用它的`Modernizr.touch`功能来检测触摸屏。

# c# - 如何在 c# 的内存中获取 Image 类实例的 mime 类型？

> ID：13591532
> 
> 赞同：12
> 
> 时间：2012-11-27T19:23:31.240
> 
> 标签：c#, image, mime-types

在我为工作中的一些基础设施项目编写的库中，我有一种方法可以创建各种比例的图像（用于缩略图等......）。但是，由于各种原因，我存储此数据的系统需要在数据库中声明的 mime 类型。

有没有办法从传入的 c#`Image`类中获取 Mime 类型，或者我是否必须让外部应用程序与图像一起传入 Mimetype？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-27T19:51:45.577

您可以[`ImageFormat`](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageformat.aspx)从 中获取`Image`，并且可以从 中获取 MIME 类型[`ImageCodecInfo`](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imagecodecinfo.aspx)。您需要做的就是将两者联系在一起：

```
ImageFormat format = yourImage.RawFormat;
ImageCodecInfo codec = ImageCodecInfo.GetImageDecoders().First(c => c.FormatID == format.Guid);
string mimeType = codec.MimeType; 
```

# jquery - 使用 HTML5sortable 为 AJAX 序列化数据

> ID：13591533
> 
> 赞同：4
> 
> 时间：2012-11-27T19:23:33.637
> 
> 标签：jquery, sorting

我正在为 jQuery、HTML5 Sortable [http://farhadi.ir/projects/html5sortable/](http://farhadi.ir/projects/html5sortable/)使用一个简洁的排序插件，但还没有找到一种理想的方法来序列化数据以作为 AJAX POST 请求发送（以更新 DB）。

HTML

```
<ul class="sortable">
    <li data-id="1">One</li>
    <li data-id="2">Two</li>
    <li data-id="3">Three</li>
    <li data-id="4">Four</li>
    <li data-id="5">Five</li>
</ul> 
```

jQuery

```
$('ul.sortable').sortable().bind('sortupdate', function() 
{
   var data = ??;  // serialize all data-id's ... this is my problem

   $.post('/sortupdate.php',data,function(){ // PHP script sets new order in DB
       alert('updated');
   });
}); 
```

所以我想要发生的是，当我将 LI 项目拖到新位置时，`sortupdate`事件应该触发函数并发送 data-id 属性值的新顺序。我目前的想法是遍历 LI 并将属性值添加到数组中。有没有更聪明的方法可以做到这一点，或者，最有效的循环方式是什么？（我主要是你认识的后端人员）。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T19:36:15.490

由于该插件没有内置序列化方法，因此您必须手动完成。

```
var dataIDList = $('ul.sortable li').map(function(){ 
    return $(this).data("id");
}).get().join(","); 
```

*（这基本上就是你最后描述的，它循环并创建一个列表。）*

现在您可以将其发布为列表：

```
$.post(url,{ idlist: dataIDList }, completeandler); 
```

您也可以将其发布为数组，只需删除`.join(",");`

# c# - 无法将项目添加到 iesi.collections.generic.iset

> ID：13591543
> 
> 赞同：0
> 
> 时间：2012-11-27T19:24:33.077
> 
> 标签：c#, nhibernate, many-to-many, iesi-collections

尝试将项目添加到 iset，但没有发生。

```
var controlPoint = new ControlPoint {Lon = 53.25253, Lat = 56.23422, Radius = 16};
//controlPoint.ApprovedRoutes = new HashedSet<ApprovedRoute>();
controlPoint.Save();

var route = new ApprovedRoute();
route.ControlPoints = new HashedSet<ControlPoint>();
route.ControlPoints.Add(controlPoint);
route.Name = "sometext";
route.Save();

//controlPoint.ApprovedRoutes.Add(route);
//controlPoint.Save(); 
```

类：

```
public class GeoPoint: Entity<long>
{
    public virtual double Lon { get; set; }
    public virtual double Lat { get; set; }
}

public class ControlPoint: GeoPoint
{
    public virtual double Radius { get; set; }
    public virtual Iesi.Collections.Generic.ISet<ApprovedRoute> ApprovedRoutes { get; set; }
}

public class ApprovedRoute : Entity<long>
{
    public virtual string Name { get; set; }
    public virtual Iesi.Collections.Generic.ISet<ControlPoint> ControlPoints { get; set; }
} 
```

这是映射：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Transport" namespace="Transport.Models">
  <class name="GeoPoint" table="GeoPoint">
    <id name="Id">
      <column name="id" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="Lon" />
    <property name="Lat" />

    <joined-subclass name="ControlPoint" table="ControlPoint">
      <key column="Id"/>
      <property name="Radius"/>

      <set name="ApprovedRoutes" table="M_ApprovedRoute_ControlPoint" inverse="true">
        <key column="PointId"></key>
        <many-to-many column="RouteId" class="ApprovedRoute" />
      </set>

    </joined-subclass>  
  </class>
</hibernate-mapping> 
```

多一个：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Transport" namespace="Transport.Models">
  <class name="ApprovedRoute" table="ApprovedRoute">
    <id name="Id">
      <column name="id" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="Name" />   
    <set name="ControlPoints" table="M_ApprovedRoute_ControlPoint">
      <key column="RouteId"></key>
      <many-to-many column="PointId" class="ControlPoint" />
    </set>    
  </class>
</hibernate-mapping> 
```

我做错了什么？ControlPoint 和 ApprovedRoute 记录出现在表中，但 M_ApprovedRoute_ControlPoint 仍为空。

ps .Save() 调用 Session.SaveOrUpdate(obj)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:38:12.517

太简单。我只是将 SaveOrUpdate 包装在一个事务中，现在它可以工作了！

```
using (ITransaction tx = Session.BeginTransaction())
        {
            try
            {
                Session.SaveOrUpdate(obj);
                Session.Flush();
                tx.Commit();
            }
            catch (HibernateException)
            {
                tx.Rollback();
                throw;
            }
        } 
```

# java - 当 ICS 上没有任何活动时保持活动服务

> ID：13591545
> 
> 赞同：0
> 
> 时间：2012-11-27T19:24:46.573
> 
> 标签：java, android, service, android-4.0-ice-cream-sandwich

我创建了一个带有 socket.io（聊天服务）的服务，该服务在自身和三个活动之间具有双向通信。

该服务在“仪表板”活动中启动并绑定，并且必须在整个应用程序关闭后运行。当我移动到显示已连接用户的“聊天”活动时，我正在取消绑定“仪表板”并将“聊天”绑定到服务。

`onStartCommand()`返回 START_STICKY。

当我绑定时，我在打电话`bindService(i, this, 0)`

这确实适用于 froyo 和姜饼，但我已经在 ICS 上进行了测试，当“仪表板”活动未绑定时服务停止，并且调用了服务中的 onDestroy() 方法。我已经尝试了一切，将 bindService 的标志设置为 Context.BIND_AUTO_CREATE，修改从 onStartCommand 返回的 START_STICKY 值，但我无法在活动之间保持服务活动。

有任何想法吗？

编辑：我发现了问题，在我的手机中，我有开发人员选项，当它不可见时不维护活动，这也扼杀了我的服务。但现在我想知道它是否会在内存较少的设备或激进的任务杀手上崩溃。

# sql - Oracle 日期到字符串的转换

> ID：13591546
> 
> 赞同：11
> 
> 时间：2012-11-27T19:24:47.173
> 
> 标签：sql, oracle

执行此操作时，我有一个字符串列 COL1

```
SELECT TO_CHAR(TO_DATE(COL1,'dd-mon-yy'), 'mm/dd/yyyy')
FROM TABLE1 
```

COL1 中的数据在 dd-mon-yy 中，例如：27-11-89 和 89 是 1989，但选择将其返回为 11/27/2089。

我必须做一个内部 TO_DATE 因为如果我不这样做，我会收到一个无效号码错误（ORA-01722：无效号码）

如何显示 1989 而不是 2089？请帮忙

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-27T19:28:43.857

> *COL1 中的数据在 dd-mon-yy*

不，这不对。列`DATE`没有***任何***格式。它仅在您显示它时由您的 SQL 客户端转换（隐式）为该表示形式。

如果 COL1 确实是`DATE`使用`to_date()`on 的列，则它是无用的，因为`to_date()`将字符串转换为 DATE。

你只需要to_char()，没有别的：

```
SELECT TO_CHAR(col1, 'mm/dd/yyyy') 
FROM TABLE1 
```

在您的情况下发生的情况是调用`to_date()`将 转换`DATE`为字符值（应用默认的 NLS 格式），然后将其转换回 DATE。由于这种双重隐式转换，一些信息会在途中丢失。

* * *

**编辑**

因此，您确实犯了将 DATE 存储在字符列中的大错误。这就是你现在遇到问题的原因。

最好的（老实说：唯一明智的）解决方案是将该列转换为`DATE`. 然后，您可以将值转换为您想要的任何表示形式，而无需担心隐式数据类型转换。

但最有可能的答案是“*我继承了这个模型，我必须处理它*”（它总是，显然没有人负责选择错误的数据类型），那么你需要使用`RR`而不是`YY`：

```
SELECT TO_CHAR(TO_DATE(COL1,'dd-mm-rr'), 'mm/dd/yyyy')
FROM TABLE1 
```

应该做的伎俩。请注意，我也更改`mon`为`mm`您的示例，`27-11-89`其中包含月份的数字，而不是“单词”（如*NOV*）

有关更多详细信息，请参阅手册：[http ://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements004.htm#SQLRF00215](http://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements004.htm#SQLRF00215)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:56:01.130

尝试这个。甲骨文有这个功能来区分千年..

正如您所提到的，如果您的列是 varchar，那么下面的查询将为您生成 1989..

从 table1 中选择 to_date(column_name,'dd/mm/rr');

当格式 rr 用于年份时，以下将由 oracle 完成。

如果 rr->00 到 49 ---> 结果将是 2000 - 2049，如果 rr->50 到 99 ---> 结果将是 1950 - 1999

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:29:25.230

如果您的列是*DATE*类型（如您所说），那么您不需要先将其转换为字符串（实际上您会先将其隐式转换为字符串，然后显式转换为日期，然后再显式转换为字符串):

```
SELECT TO_CHAR(COL1, 'mm/dd/yyyy') FROM TABLE1 
```

您在专栏中看到的日期格式是您使用的工具（TOAD、SQL Developer 等）及其语言设置的产物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-16T18:27:06.453

另一件需要注意的事情是，您正在尝试将日期转换为 mm/dd/yyyy，但如果您有任何计划将此转换后的日期与其他日期进行比较，请确保仅将其转换为 yyyy-mm-dd 格式，因为 to_char 字面意思是将其转换为字符串，并且使用任何其他格式，我们都会得到不希望的结果。有关更多解释，请遵循以下内容： [Comparing Dates in Oracle SQL](https://stackoverflow.com/questions/10178292/comparing-dates-in-oracle-sql)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-12T08:05:07.170

```
SELECT * from 
(SELECT TO_CHAR(COL1, 'yyyy-MM-dd') as col1 FROM TABLE1
) T
WHERE col1 ='2021-11-12' 
```

# java - 通用返回类型 - 为什么我不能这样做？

> ID：13591551
> 
> 赞同：3
> 
> 时间：2012-11-27T19:25:09.950
> 
> 标签：java, generics, inheritance, return-type

考虑下面的片段。我了解关于泛型类型的覆盖是如何工作的，以及为什么`List<String>`允许返回类型（例如）覆盖`List<? extends Object>`. 但是，我并不完全清楚为什么诸如 1 和 2 之类的语句无法编译......继承也不应该在这里适用吗？

```
public class Generics {

    public static void main(String[] args) {

        A instance = new B();
        X instance2 = new Y();

        Map<String, String> map = instance2.getMap(); // 1
        List<String> list = instance.getList();       // 2
    }
}

class A {

    List<? extends Object> getList() {

        return null;
    }
}

class B
        extends A {

    List<String> getList() {

        return new LinkedList<String>();
    }
}

class X {

    Map<String, ? extends Object> getMap() {

        return null;
    }
}

class Y
        extends X {

    @Override
    Map<String, String> getMap() {

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:30:05.060

```
Map<String, String> map = instance2.getMap(); // 1 
```

编译器看到一个`X.getMap()`返回类型为的调用`Map<String, ? extends Object>`。这不能转换为`Map<String, String>`. 运行时`instance2`的类型无关紧要；`Y`这是失败的纯编译时静态类型检查。

```
List<String> list = instance.getList();       // 2 
```

同样的道理也适用。的编译时类型`instance`是`A`，并`A.getList()`返回`List<? extends Object>`与 不兼容的a `List<String>`。

请注意，这不是泛型特有的问题。由于同样的原因，这也将无法编译：

```
class A { Object getObject(); }
class B extends A { String getObject(); }

A a = new B();
String s = a.getObject(); 
```

如果你想让它工作，那么你需要给编译器一些额外的帮助。通过强制转换为子类：

```
String s = ((B) a).getObject(); 
```

或者通过转换返回值：

```
String s = (String) a.getObject(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:28:46.553

多态性不能向后工作。

如果您尝试使用扩展的不同类`X`，但它返回给您一个\

```
Map<String, NonString> 
```

反而？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:36:00.107

您正在调用`getMap`（`X`因为`instance2`是通过 推荐人`X`），它被定义为返回`Map<String, ? extends Object>`因此问题。

如果您将呼叫更改为（类型转换`instance2`为`Y`before call `getMap()`）：

```
 Map<String, String> map = ((Y)instance2).getMap(); // 1 
```

它应该可以工作，因为您`instance2`的仍然是 type `Y`。

# ios - 如何将参数传递给导航控制器内的弹出视图控制器

> ID：13591559
> 
> 赞同：4
> 
> 时间：2012-11-27T19:25:39.257
> 
> 标签：ios, storyboard, uipopovercontroller, navigationcontroller

我在 detailviewcontroller 的导航栏中有一个带有 splitview 和右栏按钮的 iPad 应用程序。

此按钮调用由导航控制器和两个表视图构成的弹出框。如下图所示

![在此处输入图像描述](../Images/21b4a6357dfc1432f2e346ee4a207c2c.png)

由于图片上的故事板很小，我添加了一些解释。白色控制器是 detailViewController（splitviewcontroller 的右侧），它位于导航控制器内部。白色视图右侧的三个视图从左到右依次为：navigationController、firstTableView、secondTableView。

我的问题是我需要将参数传递给第一个表视图才能正确配置它。

当视图控制器共享相同的导航控制器时，我曾经这样做过。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"popoverButtonSegue"]){
        MyPopoverFirstTableViewController *popoverFirstTVC = [[MyPopoverFirstTableViewController alloc] init];

        popoverFirstTVC = segue.destinationViewController;
        popoverFirstTVC.property1 = aProperty1;
        popoverFirstTVC.property2 = aProperty2;
    }
} 
```

我的问题是执行此操作时出错，因为目标控制器不是我的 popoverFirstTableViewController 而是 NavigationController 和导航控制器当然没有“property1”和“property2”。

也许这是一个基本问题，但我被困在这里。

当该表位于导航控制器内时，如何通过分配我定义的一些属性来配置我的表视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:41:35.803

所有的功劳都属于@Michael Kernahan，但只要他不将其作为答案发布，我就会将其写为寻找相同答案的人的后续行动。

就我而言，问题是我正在分配目标控制器，即导航控制器

```
popoverFirstTVC = segue.destinationViewController; 
```

我应该做的是访问该导航控制器的 topViewController 。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"popoverButtonSegue"]){
        MyPopoverFirstTableViewController *popoverFirstTVC = (MyPopoverFirstTableViewController *)((UINavigationController *) segue.destinationViewController).topViewController;

        popoverFirstTVC.property1 = aProperty1;
        popoverFirstTVC.property2 = aProperty2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:28:37.767

我不完全确定我是否遵循，因为故事板对我来说有点小。但是您似乎在您的代码中创建了一个闪闪发光的新 popoverFirstTVC，然后通过分配将其丢弃

```
popoverFirstTVC = segue.destinationViewController; 
```

如果您将该行注释掉，那么最后写

```
segue.destinationViewController.itsPopover = popoverFirstTVC; 
```

然后你可以传递你完全构建和初始化的 popoverFirstTVC 并让第二个 VC 中的代码将其拾取并运行它。当然，你需要

```
@property (strong, readwrite) MyPopoverFirstTableViewController * itsPopover; 
```

在您的第二个 VC 的标题中。

# jquery - jquery如果显示错误消息，保持当前状态

> ID：13591561
> 
> 赞同：1
> 
> 时间：2012-11-27T19:25:58.323
> 
> 标签：jquery, if-statement

我有一个显示用户当前帐户信息和单击编辑按钮的表单。当用户单击按钮时，隐藏的表单会淡入并变得可编辑。我遇到的问题是，当输入错误的密码时，错误消息会将表单发送回原始的不可编辑表单。有没有办法让用户保持在可编辑表单上（而不是切换回来）？

```
$(document).ready(function () {
    $('#show_accountEdit').click(function() {
        $('#edit_account_details').fadeIn('slow', function () {});
        $('div.showhide, #NonEdit_account_details').toggle();
    });
    $('#cancel_accountEdit').click(function() {
        $('#NonEdit_account_details').fadeIn('slow', function () {});
        $('div.showhide,#edit_account_details').toggle();
    });
}); 
```

# spring - 如何在 Spring MVC 中访问 proxy.cgi 文件

> ID：13591563
> 
> 赞同：0
> 
> 时间：2012-11-27T19:25:57.983
> 
> 标签：spring, tomcat, cgi

我正在尝试在基于 spring 框架的 WEB 应用程序中使用 Openlayer。我需要在 tomcat 上使用 cgi 代理。我按照这里的说明[安装-a-cgi-on-tomcat](http://www.berndresch.com/blog/2011/11/01/installing-a-cgi-proxy-on-tomcat/)。它适用于一个简单的 Web 应用程序。但是当我尝试使用 Spring MVC 实现它时，我在访问 cgi 文件时遇到了问题。我收到了警告信息。

```
 WARN org.springframework.web.servlet.PageNotFound:962 - No mapping found for HTTP request with URI [/pcms/app/cgi-bin/proxy.cgi] in DispatcherServlet with name 'Spring MVC Dispatcher Servlet' 
```

我尝试了很多方法，但我没有弄清楚如何访问WEB-INF\cgi目录下的proxy.cgi文件。请帮忙。谢谢。附上web.xml的内容。

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Property &amp; Configuration Management System</display-name>
  <context-param>
    <param-name>webAppRootKey</param-name>
    <param-value>pcms.root</param-value>
  </context-param>
   <context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/log4j.properties</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
  </listener>
  <listener>
    <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
  </listener>
  <listener>
    <listener-class>com.pb.redline.listener.MTAServletContextListener</listener-class>
  </listener>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
            /WEB-INF/spring/web-application-context.xml
        </param-value>
  </context-param>
  <filter>
    <filter-name>openEntityManagerInViewFilter</filter-name>
    <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>openEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
  </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>encoding-filter</filter-name>
    <filter-class>
            org.springframework.web.filter.CharacterEncodingFilter
        </filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>encoding-filter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>
            </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>/app/*</url-pattern>
  </servlet-mapping>

  <!-- proxy.cgi for openlayers -->
    <servlet>
        <servlet-name>cgi</servlet-name>
        <servlet-class>org.apache.catalina.servlets.CGIServlet</servlet-class>
        <init-param>
          <param-name>debug</param-name>
          <param-value>0</param-value>
        </init-param>
        <init-param>
          <param-name>cgiPathPrefix</param-name>
          <param-value>WEB-INF/cgi</param-value>
        </init-param>
         <init-param>
          <param-name>executable</param-name>
          <param-value>C:/Python26/ArcGIS10.0/python.exe</param-value>
        </init-param>
        <init-param>
          <param-name>passShellEnvironment</param-name>
          <param-value>true</param-value>
        </init-param>
         <load-on-startup>5</load-on-startup>
    </servlet>
        <servlet-mapping>
            <servlet-name>default</servlet-name>
            <url-pattern>/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
            <servlet-name>cgi</servlet-name>
            <url-pattern>/cgi-bin/*</url-pattern>
    </servlet-mapping>

</web-app>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:10:24.973

您映射`CGIServlet`到`/cgi-bin/*`和映射`DispatcherServlet`到`/app/*`- 请求`<contextPath>/app/cgi-bin/proxy.cgi`由 Spring 而不是 CGI 处理，这并不奇怪。

试试`/pcms/cgi-bin/proxy.cgi`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T23:11:27.430

答案是：您没有在 Tomcat 上安装或使用 cgi 代理。

cgi 适用于用作前端服务器的 apache 服务器或 IIS。Tomcat 可能坐在它后面。Apache的配置详解在：http: [//tomcat.apache.org/tomcat-6.0-doc/proxy-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/proxy-howto.html)

请注意，OpenLayers 警告说它的 proxy.cgi 只是一个示例，可能没有足够好的检查来阻止它被利用，即它可能运行一些恶意脚本。

如果您仅在 Tomcat 上提供 OpenLayers 客户端页面，并且它包含来自其他 GeoServer 或 Mapserver 的图层，则可以使用代理 servlet 并将其指定为：

OpenLayers.ProxyHost = "服务于该页面的服务器上的 sevlet URL";

[http://wiki.apache.org/tomcat/ServletProxy](http://wiki.apache.org/tomcat/ServletProxy)

[https://svn.openxdata.org/Experimental/openXmapper/trunk/gwt-openlayers-server/src/main/java/org/gwtopenmaps/openlayers/server/GwtOpenLayersProxyServlet.java](https://svn.openxdata.org/Experimental/openXmapper/trunk/gwt-openlayers-server/src/main/java/org/gwtopenmaps/openlayers/server/GwtOpenLayersProxyServlet.java)

# mysql - 基于文本列的过滤

> ID：13591566
> 
> 赞同：0
> 
> 时间：2012-11-27T19:26:13.560
> 
> 标签：mysql, sql, performance, innodb

基于文本列的完全匹配过滤器在概念上是否比基于键抓取一组行并使用编程语言进行过滤要慢？

例如：

```
select columns from table where textcolumn='exactphrase'; 
```

对比

```
select columns from table where key='key';

for (results : resultset) { 
      if (resulsts.getString(textcolumn).equals(exactphrase)) { ... } } 
```

我基本上很好奇 MySQL（Innodb）如何处理过滤文本列以及性能缺陷可能是什么（如果有的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:36:01.957

也许吧，但我对此表示怀疑。

在一组约束中，每个表、数据库和查询都是不同的。在单个服务器上，查询的“快速”程度取决于以下因素（以及许多其他因素）：

*   索引
*   列的基数 - 有多少不同的值与值的数量。
*   列的宽度
*   表中的记录数
*   查询中返回的字节数。
*   是否有其他人在使用数据库/服务器

一般来说，在 SQL 中做所有事情总是更快，但这确实取决于上述所有内容，所以它绝不是肯定的。

唯一确定的方法是自己尝试。如果您遇到问题，您可以随时发布您的查询、解释计划以及表和索引定义，也许有人可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:34:31.970

tldr; **“查找”记录不会有性能差异。**

由于正在使用（索引）PK ，因此*最多*将返回一条记录。服务器足够智能，*不会*对文本列执行表扫描，即使由于 PK 的 1-1 基数而没有对其进行索引。（查询计划者很聪明。）

那么区别是：

1.  服务器可能会向客户端返回“无用”记录；这可能会浪费少量的带宽¹（如果除了测试之外不需要文本，则稍微浪费一点），但更重要的是它会*混淆查询的语义*。

2.  服务器支持不同的*排序*方式；因此，它可能在服务器上*不区分大小写*（例如），并导致与客户端过滤器略有不同的结果。

* * *

¹虽然可以想象非常退化的情况，但这应该被视为没有明确使用/性能情况的“等效时间”。但是，IMOHO 仍然草率地在客户端执行此操作而没有进一步的理由。

# file - 根据星期几运行批处理文件的一部分

> ID：13591573
> 
> 赞同：2
> 
> 时间：2012-11-27T19:26:39.697
> 
> 标签：file, parsing, batch-file, dayofweek

我在 SQL Server 代理作业中运行一个 dos 批处理文件。我在批处理文件中有 34 个步骤。除了第 31 步之外，所有步骤每天都运行。它只在星期二运行。我可以设置另一个 SQL 代理作业，但这似乎有点矫枉过正。如何在批处理文件中查询系统的星期几，以便仅在星期二运行第 31 步？我尝试了下面的代码，但没有运气。

```
For /F "tokens=1 delims= " %%A in ('Date /t') do @( 
Set DayName=%%A 
) 

if('%DayName:~0,3%' equ 'Tue') <run step 31> 
```

当我回显 '%DayName:~0,3%' 它显示 'Tue'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:32:12.900

你可以使用这个：

```
wmic path win32_localtime get dayofweek 
```

返回“2”是星期二。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:57:09.667

感谢您的反馈。我发现了这个问题。它是 if 语句中的括号。一旦我删除它们，它就可以正常工作。我还删除了单引号。

这有效

```
if %DayName:~0,3% equ Tue 
```

这也有效：

```
if '%DATE:~0,3%' equ 'Tue' 
```

这些不起作用

```
if %DATE:~0,3% equ 'Tue'
if (%DATE:~0,3% equ Tue) 
```

# css - 为什么我的调色板不显示？

> ID：13591576
> 
> 赞同：1
> 
> 时间：2012-11-27T19:26:48.287
> 
> 标签：css

试图让自己成为一个调色板，对于我的生活，我无法弄清楚为什么我的背景颜色没有显示？有什么建议么？`color:red;`of`.one`确实有效。

```
<style>
    .pallette{
        width:100px;
        height:100px;
        margin-bottom:2em;
    }

    .one{
        background:#FCFFF5;
    }

    .two{
        background:#FCFFF5;

    }

    .three{
        background:#FCFFF5;

    }

    .four{
        background:#FCFFF5;

    }

    .five{
        background:#FCFFF5;

    }
</style>

<div class="pallette one">#FCFFF5</div>
<div class="pallette two">#D1DBBD</div>
<div class="pallette three">#91AA9D</div>
<div class="pallette four">#3E606F</div>
<div class="pallette five">#193441</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:29:18.023

您已将所有 CSS 声明设置为具有相同的值，而不是 HTML 中显示的值。

# html - HTML rollover sound - only pauses

> ID：13591581
> 
> 赞同：2
> 
> 时间：2012-11-27T19:27:11.330
> 
> 标签：html, audio, rollover

I have a nice rollover with the sound on 3 images. When you roll off they pause. I'm trying to get them to restart when they are rolled over again, not start from where they previously were, which they currently do, i tried changing pause to stop in the onmouseout and that didn't work... any help would be greatly appreciated!!!!

Here is the code i'm currently using

```
<head>
<audio id="sound1" src="audio/banner_vo_title.mp3"></audio>
<audio id="sound2" src="audio/banner_vo_authorname.mp3"></audio>
<audio id="sound3" src="audio/banner_vo_publication.mp3"></audio>
</head>

<div id="buttons">
<a href="link to a site" >
    <img src="images/stitch.png" width="345" height="78"
        onmouseover="document.getElementById('sound1').play()"    
        onmouseout="document.getElementById('sound1').pause()"/></a>
    <img src="images/author.png" width="392" height="78"      
         onmouseover="document.getElementById('sound2').play()"  
         onmouseout="document.getElementById('sound2').pause()"/>
    <img src="images/publication.png" width="346" height="78"
         onmouseover="document.getElementById('sound3').play()"             
         onmouseout="document.getElementById('sound3').pause()"/>
</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:41:51.947

Reset the `currentTime` to 0

[https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement)

```
<a href="link to a site" >
    <img src="images/stitch.png" width="345" height="78"
        onmouseover="var sound=document.getElementById('sound1'); sound.currentTime=0;sound.play()"    
        onmouseout="document.getElementById('sound1').pause()"/></a>
</a> 
```

Suggestion, please don't use inline HTML handlers, it's so much easier to work with JS and HTML separately.

# html - 使用 css 倾斜 div 的顶部而不倾斜文本

> ID：13591584
> 
> 赞同：14
> 
> 时间：2012-11-27T19:27:41.810
> 
> 标签：html, css, responsive-design, transform, css-shapes

我正在尝试使用 CSS 创建一个仅在顶部倾斜并且不会倾斜其中的文本的 div。我希望它是纯 CSS 的原因是因为它是一种响应式设计并且需要响应百分比，因为该 div 的其余部分会随着设备宽度的变化而弯曲。

我想要完成的照片在这里：

![倾斜设计](../Images/1c4e866bbb7b3788ac78ba31fc470a10.png)

到目前为止，我得到的是创建一个倾斜的 div 并将其定位在另一个 div 中，然后使用负边距将其向上拉。我这样做有两个问题。第一个问题是在最小的屏幕收缩（使您的浏览器宽度非常小）上，倾斜的 div 变得比包含的 div 小，使它看起来很奇怪。此外，这个 div 覆盖了我在它之后添加的任何文本。

标记：

```
<aside>
                <div id="skew"></div><!-- #skew -->
                <h3 id="refer">Refer Your Friends</h3>
</aside> 
```

CSS：

```
 #skew {
background:#00328b;
width:103%;
height:66px;
border-radius:8px;
margin-top:-47px;
margin-left:-1.2%;
  -webkit-transform: skewY(-5.5deg); 
 -moz-transform: skewY(-5.5deg); 
  -ms-transform: skewY(-5.5deg); 
   -o-transform: skewY(-5.5deg); 
      transform: skewY(-5.5deg); 
}

.main aside {
color: white;
padding: 20px 10px;
margin-top:120px;
border-radius:8px;
background: rgb(0,51,141); /* Old browsers */
} 
```

我曾尝试在父级上使用偏斜，但这会偏斜其中的所有子元素。如果这是一个固定的布局，我会使用绝对定位来帮助我，但由于它是响应式的和灵活的，我不知道要采取什么其他方法。

我也希望它在 CSS 中，因为我还有其他效果要添加到 div，例如使用 box-shadow 的外发光和背景渐变。

我也不能改变设计。

任何关于如何实现这一点的意见都会很棒！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-27T19:44:33.537

以一种方式倾斜盒子，另一种方式倾斜其内容：

```
<aside class="skew-neg">
    <div class="skew-pos">
        <p>Hello World.</p>
        <p>@jonathansampson.</p>
        <p>This box is skewed.</p>
        <p>In supported browsers.</p>
    </div>
</aside> 
```

```
/* Skew the container one way */
.skew-neg {
    -webkit-transform: skewY(-5deg);
    -moz-transform: skewY(-5deg);
    -ms-transform: skewY(-5deg);
    -o-transform: skewY(-5deg);
    transform: skewY(-5deg);
}

/* And the child another way */
.skew-pos {
    -webkit-transform: skewY(5deg);
    -moz-transform: skewY(5deg);
    -ms-transform: skewY(5deg);
    -o-transform: skewY(5deg);
    transform: skewY(5deg);
} 
```

这导致类似于以下内容：

![在此处输入图像描述](../Images/c8198ee34b0d2241d6528072958256c3.png)

演示：http: [//jsfiddle.net/Q7dKT/191/](http://jsfiddle.net/Q7dKT/191/)

# c# - 多态对象中的通用覆盖方法

> ID：13591590
> 
> 赞同：1
> 
> 时间：2012-11-27T19:28:19.643
> 
> 标签：c#, generics, polymorphism, overriding

我在多态基类中使用泛型覆盖方法的语法有问题。

这是用于报告引擎的基本架构；我在一个基类中有两个虚拟方法和大量从基类派生的对象，它们覆盖了这些方法。

在客户端代码中，调用了一个报表工厂对象，该对象根据传入的字符串以及用作参数的对象数组实例化其中一个对象。方法的字符串名称来自数据库并位于多选列表中，因此用户可以选择任意数量的报告来运行。

现在的需求是创建 PDF 文档，这很容易做到，因为通用方法只有一个已知类型。我想做的是扩展它的用处并返回任何类型的列表。

这是我的虚拟方法的签名。第一个是强类型的，我可以完美地工作，第二个，我有问题。他们来了：

```
 /// <summary>
    /// Virtual method to run report from a Word mail merge template
    /// </summary>
    /// <param name="Template">Word mail merge template name</param>
    /// <returns>PDF Document</returns>
    public virtual PdfDocument RunReportPDFOutFromWordTemplate( string TemplateName )
    {
        try
        {
            return new PdfDocument();
        }
        catch( Exception )
        {
            throw;
        }
    }

    /// <summary>
    /// Virtual method to run report outputting a generic list
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <returns></returns>
    public virtual List<T> RunReportListOut<T>()
    {
        try
        {
            return new List<T>();
        }
        catch( Exception )
        {
            throw;
        }
    } 
```

然后在我的代码中，我通过调用我的 ReportFactory 类来调用该对象。首先是 ReportFactory 类，然后是调用代码：

```
 public static class ReportFactory
{
    /// <summary>
    /// Get an object from the Report Factory
    /// </summary>
    /// <param name="ObjectName">Name of the Object</param>
    /// <param name="ParamList">List of parameters the object constructor is expecting</param>
    /// <returns></returns>
    public static ReportBase GetObject( string ObjectName, object[] ParamList )
    {
        try
        {
            return (ReportBase)Activator.CreateInstance( Type.GetType( Utils.GetCurrentNamespaceName() + "." + ObjectName ), ParamList );
        }
        catch( Exception )
        {
            throw;
        }
    }
} 
```

现在对于调用代码：

```
 ParamList = new object[] { r.Name, r.MethodPointer, this.dpStartDate.SelectedDate, this.dpEndDate.SelectedDate, this.AppData.ActivePatient };
                    rb = ReportFactory.GetObject( r.MethodPointer, ParamList );

                    PdfDocument pdfDoc = rb.RunReportPDFOutFromWordTemplate( ConfigurationManager.AppSettings[ "ReportTemplateLocation" ].ToString() + r.MethodPointer + ConfigurationManager.AppSettings[ "ReportTemplateType" ].ToString() ); 
```

有效方法的代码在这里并不真正相关，我不想通过发布它来浪费任何人的时间。它适用于我需要它做的事情。

问题是我希望能够使用相同的报告工厂返回一个列表。当我覆盖我的方法时，我收到以下错误：`Cannot implicitly convert type 'System.Collections.Generic.List<FMCNA_Model.Cycle>' to 'System.Collections.Generic.List<Cycle>`

这是覆盖的代码和辅助方法：

```
 public override List<Cycle> RunReportListOut<Cycle>()
    {
        try
        {
            List<Cycle> CycleList = this.GetCycleList();
            return CycleList;
        }
        catch( Exception )
        {
            throw;
        }
    }

    private List<Cycle> GetCycleList()
    {
        try
        {
            return Cycle.PatientForDateRange( this.CurrentPatient.PatientIDInternal, this.StartDate, this.EndDate );
        }
        catch( Exception )
        {
            throw;
        }
    } 
```

我很难过如何做到这一点。抱歉这个问题太长了，我认为最好把所有内容都集中在覆盖语法上。

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:35:07.137

正如 SLaks 所说，您在尝试使用名为的*类型参数*`T`声明泛型虚拟方法时遇到了问题- 但随后您尝试使用另一个泛型方法`Cycle`作为类型参数来覆盖它。这真的不是你的意思。泛型方法意味着*调用者*可以指定类型参数 - 而您可能*只想*返回一个`List<Cycle>`.

我强烈怀疑您应该有一个泛型*类型*，并带有一个使用该类型参数的方法声明。例如：

```
public abstract class Report<T>
{
    public abstract List<T> RunReportListOut();
} 
```

然后

```
public class CycleReport : Report<Cycle>
{
    public override List<T> RunReportListOut()
    {
        ...
    }
} 
```

如果您*想*拥有两种类型，则以不同的方式命名它们会更简洁......然后您需要在您的方法中添加一个转换。或者，只需将这两种类型合并为一种，这可能会更干净。

此外，正如我在评论中指出的那样，您应该删除您的 try/catch 块。它们都没有任何好处，而且它们会弄乱你的代码——目前在你的方法的主体中，你总共有 6 行“主体”代码和 35 行毫无意义的 try/catch。一旦你删除了这些，很明显你的`GetCycleList`辅助方法也毫无意义。你可以写：

```
public override List<Cycle> RunReportListOut()
{
    return Cycle.PatientForDateRange(this.CurrentPatient.PatientIDInternal,
                                     this.StartDate, this.EndDate);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:38:01.090

```
public override List<Cycle> RunReportListOut<Cycle>() 
```

这将创建一个常规泛型方法，其类型参数恰好命名为`Cycle`
它与 ; 没有什么不同`public override List<T> RunReportListOut<T>()`。类型参数仍然可以是任何类型。

您尝试做的事情是完全不可能的；您不能用非泛型方法覆盖泛型方法。

# objective-c - NSDate 导致 2GB 的内存分配

> ID：13591592
> 
> 赞同：0
> 
> 时间：2012-11-27T19:28:20.393
> 
> 标签：objective-c

我有一个计时器，它可以更新程序中的标签，并且每当发生用户交互（例如手指向下或滚动）时，计时器都会暂停。我正在使用此代码修复它并且它可以工作，但它似乎正在重新创建内存分配，导致游戏在几分钟内崩溃。

```
-(void) timeChangerInitNormal {
    if (running == YES)
        if ( _timerQueue ) return;
    _timerQueue = dispatch_queue_create("timer queue", 0);

    dispatch_async(_timerQueue, ^{

        timer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(timeChanger) userInfo:nil repeats:YES];

        while ( [timer isValid] ) {
            [[NSRunLoop currentRunLoop] runUntilDate:[[NSDate date] dateByAddingTimeInterval:5.0]];
        }
    });
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView;
{
    [self _lockInteraction];
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate;
{
    [self _unlockInteraction];
}
- (void)scrollViewWillBeginZooming:(UIScrollView *)scrollView withView:(UIView *)view
{
    [self _lockInteraction];    
}
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale;
{
    [self _unlockInteraction];
}

- (void) _lockInteraction
{
    [self _setControls:_staticViews interacted:NO];
    [self _setControls:_autoLayoutViews interacted:NO];
}

- (void) _unlockInteraction
{
    [self _setControls:_staticViews interacted:YES];
    [self _setControls:_autoLayoutViews interacted:YES];
}

- (void) _setControls:(NSArray *)controls interacted:(BOOL)interacted
{
    for ( UIControl *control in controls ) {
        if ( [control isKindOfClass:[UIControl class]]) {
            control.userInteractionEnabled = interacted;
        }
    }
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView
{
    [self _updatePositionForViews:_autoLayoutViews];
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [self _updatePositionForViews:_autoLayoutViews];
}

- (UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView;
{
    return _mapImageView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:43:58.330

tl;博士

您只想使用普通计时器。创建后将其添加到事件跟踪模式：

```
[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSEventTrackingRunLoopMode]; 
```

这将使它在跟踪事件时触发（触摸滑块、滚动视图……）。

如果您仍然想知道：您创建了一个线程，该线程基本上使 CPU 在 while 循环中忙于旋转，创建自动释放的`NSDate`对象。由于没有内部自动释放池，因此没有释放日期对象。

但不要试图修复你的旧代码。还有更多的问题。

# java - 使用 Jackson 解析复杂的 JSON 对象

> ID：13591597
> 
> 赞同：1
> 
> 时间：2012-11-27T19:28:35.913
> 
> 标签：java, android, json, jackson, arrays

我需要用 Jackson 库解析相对复杂的 JSON。你们能否建议我应该使用什么 Java 类结构以及使用什么 Jackson 方法来解析以下 JSON 对象。

它是这样的：

```
{
  "firstField": "Something One",
  "secondField": "Something Two",
  "thirdField": [
    {
      "thirdField_one": "Something Four",
      "thirdField_two": "Something Five"
    },
    {
      "thirdField_one": "Something Six",
      "thirdField_two": "Something Seven"
    }
  ],
  "fifthField": [
    {
      "fifthField_one": "Something… ",
      "fifthField_two": "Something...",
      "fifthField_three": 12345
    },
    {
      "fifthField_one": "Something",
      "fifthField_two": "Something",
      "fifthField_three": 12345
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:51:20.320

我更熟悉 Gson，但我认为这应该可行。

请参阅下面的 StaxMan 注释：

> Jackson 不会自动检测私有字段（可以使用 @JsonAutoDetect 或全局配置）。所以字段应该是私有的，用@JsonProperty 注释，或者有匹配的公共getter。

```
public class MyClass {
    private String firstField, secondField;
    private ThirdField thirdField;
    private FifthField fifthField;

    public static class ThirdField {
        private List<ThirdFieldItem> thirdField;
    }

    public static class ThirdFieldItem {
        private String thirdField_one, thirdField_two;
    }

    public static class FifthField {
        private List<FifthFieldItem> fifthField;
    }

    public static class FifthField {
        private String fifthField_one, fifthField_two;
        private int fifthField_three;
    }
} 
```

# vertica - 最佳 Vertica 数据加载技术？

> ID：13591601
> 
> 赞同：-1
> 
> 时间：2012-11-27T19:28:46.173
> 
> 标签：vertica

大家好！！-我在查看数据如何加载到 Vertica 时遇到一些问题！我需要知道这里是否有任何 Verticas dba！你们是怎么做到的？？

我的意思是我有其他 RDBMS 作为前端，而 Vertica 在后面运行所有艰苦的工作等。由于 vertica 的事务性不能很好地工作！（更新速度很差）。

所以请我需要一些帮助！就像一个复制工具，或者如果它是用脚本或 ETL 完成的（哪个工具更好）！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:26:02.927

我使用 Talend Open Studio (http://www.talend.com/)

[他们合作！](http://www.talend.com/about-us/press/vertica-and-talend-team-deliver-integrated-platform-operational-analytics)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T11:14:41.960

尝试使用带有 Direct Option 的 Vertica COPY 命令。它用于批量加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:23:30.090

对于 oracle，请查看 wisdowforce。对于 MySQL，请查看 Tungsten 复制器。或者您可以使用 UDL/外部表。最后，有很多方法，需要更多细节来确定最适合您的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-15T22:36:14.217

使用 Talend 等 ETL 工具定期将数据从 OLTP 数据库同步到 Vetica。这可以处理多个异构数据源和复杂的转换。

如果您使用 VoltDB（用于 OLTP 的 Vertica 的姐妹），请在 VoltDB 中添加仅导出表并将数据同步到 Vertica。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T02:55:25.843

> 我的意思是我有其他 RDBMS 作为前端，而 Vertica 在后面运行，完成所有艰苦的工作等。

我不明白这意味着其他系统上的数据与 Vertica 上的数据之间的关系。您的整体数据策略是什么？您是否有需要加载块的整体文件？您对 Vertica 更新速度的抱怨表明您可能有很多小更新？

如果您有大文件，最佳实践实际上是使用 vsql 本身加载，文件位于 Vertica 节点之一。无论如何，这是最快的。您可以编写一个加载器，通过 JDBC 从远程机器流式传输大文件。我的公司就是这样做的，而且速度相当快。

如果您有很多要经常发送的小行，那么 Vertica 就不那么好了。我们也这样做，但速度较慢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-24T08:40:14.240

如果您有兴趣使用 Talend（ETL 工具）设置 HP Vertica 数据插入或更新，那么我有一篇您可能感兴趣的博文：[HP Vertica 在 Talend 中的使用](http://www.datalytyx.com/correctly-use-hp-vertica-update-statement-talend-open-studio/)

# sql - 如何将两个相似的分组结果集合并为一个？

> ID：13591603
> 
> 赞同：0
> 
> 时间：2012-11-27T19:28:47.883
> 
> 标签：sql, sql-server-2012

我有几个 SQL Server 2012 查询正在工作，但无法弄清楚如何将它们组合成一个结果集。我希望将 [Total Claims] 和 [Reversed Claims] 视为同一结果集中的相邻列。这可能吗？

```
select [Date], DATENAME(weekday, [Date]) as [Day], [Total Claims]
from (Select [Date], count(*) as [Total claims] from ClaimHistoryView group by [Date] )
as CountByDay
order by [Date] desc

select [Date], DATENAME(weekday, [Date]) as [Day], [Reversed Claims]
from (Select [Date], count(*) as [Reversed Claims] from ClaimHistoryView where status = 2 group by [Date] ) as CountByDay
order by [Date] desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:36:12.360

诀窍是使用“union all”将两个查询与另一列结合起来，该列指示数据来自哪里，然后进行选择性透视。唔。复杂的解释（对不起，德语）

这应该可以解决问题

```
select [Date], 
       DATENAME(weekday, [Date]) as [Day], 
       sum(case when Source = 1 then value else 0 end) as [Total Claims],
       sum(case when Source = 2 then value else 0 end) as [Reversed Claims]
from
(
  select 
        1 as source, 
        [Date], 
        count(*) as value 
  from  ClaimHistoryView 
  group by [Date]
union all
  select 
        2 as source,
        [Date],  
        count(*) as value 
  from  ClaimHistoryView 
  where status = 2 
  group by [Date]
) as CountByDay 
Group by [Date]
order by [Date] desc 
```

# c# - 在哪里捕获 WinForms 上的 EF4 ObjectContext 异常？

> ID：13591604
> 
> 赞同：0
> 
> 时间：2012-11-27T19:28:52.063
> 
> 标签：c#, winforms, entity-framework

我很难弄清楚在哪里捕获实体框架异常。我已经`SaveChanges`涵盖了并发异常，但是，我很难找到一个通用规则来捕获其他异常（例如由于服务器关闭而导致的超时等）。

我正在做一个 Windows 客户端应用程序，因此异常不能只是吐出“错误”网页，它们必须给出继续应用程序的选项（因为您可能在其中打开了其他窗口，这不是简单的应用程序）。

这在直接使用 ADO.net 时很容易弄清楚：您会在连接打开和查询执行时捕获异常，但是我不太确定*何时*打开连接和使用 EF4 执行查询（在这种情况下为数据库优先） ）。

有一些简单的情况（例如，当我通过`IQueryable`调用`ToList`or实际在控制行为（我并不总是控制），它可能会或可能不会实际执行查询（某些控件在稍后调用时执行它）。`ToArray``IQueryable``DataSource``DataBind`

我知道我可以通过反复试验（或只是做`try/catch`大块）来做到这一点，但我正试图找出一种更通用的方法来做到这一点。

我尝试在 上搜索一些类似`onexception`事件`ObjectContext`，但没有在附近找到任何东西，而且我在这件事上找到的所有内容都是关于异常`SaveChanges`和并发异常，正如我所说，我已经介绍过了。

关于去哪里的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:57:08.720

你熟悉的概念`unit of work`吗？`context`这通常定义了 a 何时开始和结束的边界。然后可以将异常处理放置在工作单元中/周围以处理特定异常。

这只是一个想法。

```
public void Execute(Action<DbContext> action)
{
    try
    {
       using(var context = new MyContext())
       {
           action(context);
           context.SaveChanges();
       }
    }
    catch(ConcurrencyException exception)
    {
    }
    catch(ValidationException exception)
    {
    }
    catch(SqlException exception)
    {
    }
} 
```

# php - [cURL/PHP] 使用 Google 帐户登录

> ID：13591605
> 
> 赞同：2
> 
> 时间：2012-11-27T19:28:53.590
> 
> 标签：php, logging, curl, login

我正在编写一个与我的谷歌帐户相关联的脚本。但我一开始就有问题。谷歌阻止了我的日志记录。我收到此错误：

> 您的浏览器的cookie功能被关闭。请打开它。

这里有一个脚本：

```
<?php
$email = "login";
$password = "pass";

//curl get
function curl_get( $curl, $url, $cookiefile) {
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, false);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_USERAGENT,"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1" );
    curl_setopt($curl, CURLOPT_COOKIEJAR, $cookiefile);
    curl_setopt($curl, CURLOPT_COOKIEFILE, $cookiefile);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    $data = curl_exec($curl);
    return $data;
}

//curl post

function curl_post( $curl, $url, $cookiefile, $post) {
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $post);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, false);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_USERAGENT,"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1" );
    curl_setopt($curl, CURLOPT_COOKIEJAR, $cookiefile);
    curl_setopt($curl, CURLOPT_COOKIEFILE, $cookiefile);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    $data = curl_exec($curl);
    return $data;
}

//cookie file
$cookiefile = "cookie.txt";

$curl = curl_init( );

//get url to grab GALX & dsh to login
$data = curl_get( $curl, "https://www.google.com/accounts/ServiceLogin?uilel=3&service=youtube&passive=true&continue=http%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252Findex&hl=en_US&ltmpl=sso", $cookiefile);

preg_match('/name="GALX"\s*value="(.*?)"/', $data, $galx);

preg_match('/name="dsh" id="dsh"\s*value="(.*?)"/', $data, $dsh);

//login
$data = curl_post( $curl, "https://www.google.com/accounts/ServiceLoginAuth", $cookiefile, "ltmpl=sso&continue=http%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252Findex&service=youtube&uilel=3&dsh=$dsh[1]&ltmpl=sso&hl=en_US&ltmpl=sso&timeStmp=&secTok=&GALX=$galx[1]&Email=$email&Passwd=$password&PersistentCookie=yes&rmShown=1&signIn=Sign+in&asts=");

//auth url
$data = curl_get( $curl, "https://www.google.com/accounts/CheckCookie?continue=http%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252Findex&hl=en_US&service=youtube&ltmpl=sso&chtml=LoginDoneHtml", $cookiefile);
echo $data;
?> 
```

Cookie 文件很好，问题可能出在其他地方。

提前感谢您的帮助。米科拉伊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:09:06.533

您应该使用 OAuth 使用您的 Google 帐户登录。

这是一个 PHP OAuth 库：[http](http://code.google.com/p/oauth-php/) ://code.google.com/p/oauth-php/和项目的 wiki How To page with sample code：[http ://code.google.com/p/oauth-php/wiki/消费者指南](http://code.google.com/p/oauth-php/wiki/ConsumerHowTo)

# magento - 用户定义支付 magento

> ID：13591611
> 
> 赞同：3
> 
> 时间：2012-11-27T19:29:24.280
> 
> 标签：magento, user-defined-functions

Magento 是否可以允许用户为产品付款？允许他们在购买需要付款的物品时少付或多付？

该产品是 TOUR，而不是实际产品。虽然我们有预先设定的应付金额，但它们因旅行而异，并且每次旅行不会收取相同的百分比。我们需要让 Magento 接受每次旅行的各种付款和日期。允许参与者在必要时进行用户定义的付款（多于或少于应付金额）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:43:31.377

这不可能开箱即用，您需要构建一个自定义支付模块。让 magento 完成未来的付款将是一项艰巨的任务，因此我个人不会走这条路。

关于旅行，我不太遵循您的示例，但如果我确实遵循它，您可以执行以下操作；

将一个名为 tour date 的新产品属性添加到默认属性集并将其置于 general 下。将此属性设为日期字段。

为每个旅游和日期组合设置一个新产品，具有唯一的价格和 sku（不要忘记从新的旅游日期属性中选择正确的日期值）。将这些设置为不可见，因此它们不会出现在搜索或目录中。

对于每个游览，您可以在提示时使用游览日期作为可配置属性来创建可配置产品。对于每个可配置产品，在关联产品下，您可以选择该旅游的产品（不同日期的旅游）作为选项。

这基本上将允许用户在产品页面上选择旅游日期，并显示正确的旅游价格，您可以从日期到日期、旅游到旅游进行自定义。

[该视频](http://www.google.co.uk/url?sa=t&rct=j&q=magento%20configurable%20products&source=web&cd=3&cad=rja&ved=0CDsQtwIwAg&url=http://www.youtube.com/watch?v=DK6LIBBxepk&ei=l0G1UNnDFYm90QXyz4HwDg&usg=AFQjCNG9Y5U606PQ9lsmEzwCBp5vnCWtMQ)将向您展示如何执行此操作

# jquery - 表单提交后重置选择

> ID：13591614
> 
> 赞同：1
> 
> 时间：2012-11-27T19:29:31.793
> 
> 标签：jquery

我查看了文档，但我试图弄清楚当我使用 jQuery 验证插件中的 resetForm 函数清除我的表单时，我的选择元素没有重置选项的文本。值重置但不是文本。我是否错过了文档中说明应该如何完成的地方？

编辑：我忘了提到我正在为我的选择元素使用 jQuery 的 select2 插件，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:43:14.683

您必须在 select 上触发 change 事件，以便 select2 将其拾取。我不确定重置是否重要。

```
$("select").trigger("change"); 
```

# php - Php Docblocks @version $Id$ 不适用于 NetBeans SVN 插件

> ID：13591615
> 
> 赞同：1
> 
> 时间：2012-11-27T19:29:35.167
> 
> 标签：php, svn, netbeans, docblocks

对于我正在进行的项目，我们使用 SVN。所以我为 Netbeans 安装了 SVN 插件，到目前为止效果很好。

现在在类和其他 php 文件中，我们使用带有 @version 标签的 docblocks。我想知道如何让插件自动填充/替换版本标签中的 $Id$？

我目前正在使用 Win7 和 NetBeans 7.1.2。我在下面的配置文件中添加了以下几行`%APPDATA%\Roaming\Subversion config`：

```
*.php = svn:keywords=Id
*.phtml = svn:keywords=Id
*.js = svn:keywords=Id 
```

我还从以下行中删除了评论：

```
enable-auto-props = yes 
```

重新启动 NetBeans 后，我注意到 (UserPath).netbeans\7.1.2\config\svn\config 中的配置文件已使用先前添加的数据进行了更新。

但是，如果我提交更改的文件，@version 标记不会更新。之后只剩下 $Id$。我做错了什么或者我错过了配置什么？

它应该如下所示：

```
@version $Id: XYZ.php 637 2012-10-08 15:13:38Z flo $ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:38:16.847

显然，或

*   您的配置更改不起作用（创建新文件进行测试）
*   您忘记了 auto-props 一个“小”细节 - 它们应用于**新的，在启用**文件后创建，在 repo 中不存在。对于这些文件，您必须手动添加 svn:keywords。检查与`svn proplist -v <FILENAME>`

# c# - 可以添加到 Azure 队列的 base64 编码字符串的最大长度是多少？

> ID：13591616
> 
> 赞同：3
> 
> 时间：2012-11-27T19:29:36.137
> 
> 标签：c#, encoding, azure, azure-queues

我需要通过 Azure 队列发送压缩的 Base64 数据，该队列有 64K 的限制。
我的代码压缩数据，然后将其编码为 Base64 字符串。
我验证压缩和编码的字符串不超过 64000 字节（参见下面的 encodedLen），但是，当我尝试添加 ~57,000 字节的消息时，我的代码崩溃了。

```
var byteString = Encoding.UTF8.GetBytes(articleDataToSend);  
var compressed = QuickLZ.compress(byteString, 1);  
var encoded = Convert.ToBase64String(compressed);  

var encodedLen = Encoding.UTF8.GetByteCount(encoded);  
if(encodedLen < 64000)
{
    QueueMessage(_nlpInputQueue, encoded);
} 
```

我正在使用 Visual Studio 2012 和 .Net 4.5。
我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:55:33.293

使用 Base64 编码时的最大消息大小为 48k [http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)

使用 Azure 服务总线队列，你可以得到高达 256k

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:28:22.083

我相信您最终会得到一个双重编码的字符串。存储客户端库历来对队列中的所有内容都进行了 base64 编码，因此它对您的 base64 编码字符串进行了 base64 编码。我的猜测是，如果您这样做`QueueMessage(_nlpInputQueue, compressed)`，这将起作用。

# forms - 引导形式中的对齐问题

> ID：13591617
> 
> 赞同：0
> 
> 时间：2012-11-27T19:29:38.227
> 
> 标签：forms, layout, twitter-bootstrap

在我在 Bootstrap 中创建的表单中正确对齐下拉列表时遇到问题：

[https://www.box.net/shared/h6yailsigchqndexdieo](https://www.box.net/shared/h6yailsigchqndexdieo)

由于某种原因它缩进了，我不知道如何纠正它。

表单的上下文是它出现在这样的 iframe 中：

```
<iframe class="span9 borderless" src="{app name}"> 
```

此外，下拉菜单与其旁边的按钮之间存在对齐问题。上下文如下所示：

```
<form action="/{action}" method="GET">

    <select name="{name}">
        <option data-id="1" ... >...</option> 
        ...
    </select>  

    <button type="submit" value="{value}" class="btn btn-primary"><i class="icon-chevron-down icon-white"></i> {name of button} </button>
    <a class="btn btn-inverse" style="color:#FFF" href="{link}"><i class="icon-edit icon-white"></i> {name}</a> 
    <a class="btn btn-success" href="{link}"><i class="icon-plus icon-white"></i> {name}</a>

</form> 
```

任何其他想法为什么这些可能会错位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:02:39.837

`<form action="/{action}" method="GET" class="form-inline">` 将“form-inline”类添加到表单标签将解决此问题。

# jsf-2 - JSF 形式的 IF-ELSE 条件。需要知道正确的方法

> ID：13591618
> 
> 赞同：6
> 
> 时间：2012-11-27T19:29:42.667
> 
> 标签：jsf-2

我的表单上有 if-else 条件，我在其中显示标题和按钮文本以进行添加和更新。

下面的代码是我在 struts2 项目中使用的代码，以及想要在 xhtml 页面的 JSF2 项目中使用的相同代码。

**Struts2 页面**

```
 <s:if test="person==null || person.id==null || person.id==''">
                <s:set var="buttonText" value="getText('person.button.add')"/>
                <s:text name="person.h1.add.text"/>
                <i><s:text name="person.smallfont.add.text"/></i>
            </s:if>
            <s:else>
                <s:set var="buttonText" value="getText('person.button.edit')"/>
                <s:text name="person.h1.edit.text"/>
                <s:text name="person.smallfont.edit.text"/>
            </s:else> 
```

我可以在 xhtml 页面中使用 JSTL 并按原样使用上面的代码，但我看到了不同的方法，比如下面使用 EL。我不确定，但不喜​​欢下面的方法

```
<h:outputLabel value="Add Information" rendered="#{!empty personBean.person.id}" />
<h:outputLabel value="Use the form below to add your information." rendered="#{!empty personBean.person.id}" />

<h:outputLabel value="Update Information" rendered="#{empty personBean.person.id}" />
<h:outputLabel value="Use the form below to edit your information." rendered="#{empty personBean.person.id}" /> 
```

**我的问题：**

*请有人指导我如何在 JSF 项目中的 IF-ELSE 条件下使用上述代码。使用 EL/JSTL 还是其他？*

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T00:03:29.867

确实只是使用该`rendered`属性。如有必要，您可以将其包装在另一个根本不发出任何 HTML 的组件中，例如`<h:panelGroup>`or `<ui:fragment>`，这样您就不需要`rendered`在所有后续组件上重复相同的条件。

```
<h:panelGroup rendered="#{not empty personBean.person.id}">
    Add Information
    <i>Use the form below to add your information.</i>
</h:panelGroup>
<h:panelGroup rendered="#{empty personBean.person.id}">
    Update Information
    <i>Use the form below to edit your information.</i>
</h:panelGroup> 
```

请注意，`<h:outputLabel>`生成的 HTML元素在语义上与您最初拥有`<label>`的含义完全不同。`<s:text>`您可能想`<h:outputText>`改用或完全省略它。JSF2/Facelets 只支持纯文本甚至模板文本中的 EL，而不需要`<h:outputText>`.

### 也可以看看：

*   [有条件地显示 JSF 组件](https://stackoverflow.com/questions/4870462/conditionally-displaying-jsf-components)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-06T19:05:16.190

如果您想避免在“else”块中编写容易出错的条件否定，您可以利用JSF2 的**复合组件特性自行创建 if-then-else 组件：**

**定义：**
创建包含以下内容的文件*webapp/resources/my/if.xhtml*：

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:cc="http://java.sun.com/jsf/composite">
<cc:interface>
    <cc:attribute name="condition" required="true"/>
    <cc:facet name="then"/>
    <cc:facet name="else" />
</cc:interface>

<cc:implementation>
    <ui:fragment rendered="#{cc.attrs.condition}" >
        <cc:renderFacet name="then" />
    </ui:fragment>
    <ui:fragment rendered="#{not cc.attrs.condition}" >
        <cc:renderFacet name="else" />
    </ui:fragment>
</cc:implementation>
</html> 
```

**用法：**
然后您可以在应用程序的任何位置使用该组件。标签名称 - `if`- 绑定到包含组件定义的文件名，标签 xml 命名空间的最后部分 - `my`- 由包含组件定义的目录名称确定：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:my="http://java.sun.com/jsf/composite/my">

<f:view>
    <my:if condition="#{bean.property != null}">
        <f:facet name="then">
            <h:outputText value="#{bean.property}"/>
        </f:facet>
        <f:facet name="else">
            <h:outputText value="[null]"/>
        </f:facet>
    </my:if>
</f:view>
</html> 
```

资源：

*   [Mkyong的教程](http://www.mkyong.com/jsf2/composite-components-in-jsf-2-0/)
*   [开发手册教程](http://www.devmanuals.com/tutorials/java/jsf/jsf2TagLibrary/composite/facet.html)
*   [参考文档](https://javaserverfaces.java.net/nonav/docs/2.2/vdldocs/facelets/cc/tld-summary.html)

# bash - 如何将 Vim 用作 Git 编辑器而不会出现“无法分配颜色”错误

> ID：13591625
> 
> 赞同：4
> 
> 时间：2012-11-27T19:30:13.667
> 
> 标签：bash, vim

（我为这个问题找到了一些建议的解决方案，但没有一个对我有用。）

**问题**

我正在尝试将 Vim 用作 git core.editor——无论我做什么，我都会收到“无法分配颜色”的消息。

我尝试将 git core.editor（使用 --replace-all）设置为 vim、mvim、vim -U NONE -u NONE、mvim -u NONE -U NONE 等。

**笔记**

*   我的 .bashrc 中没有提到 Vim

*   我有一个`/usr/bin/vim`别名为`/usr/bin/vim -> /Applications/MacVim.app/Contents/MacOS/Vim`

*   我没有 vim 或 mvim set 的别名

*   如果我在终端中执行 vim 它会出现同样的问题

*   echo $TERM 响应`xterm-256color`

**环境**

Vim 版本：

```
IM - Vi IMproved 7.3 (2010 Aug 15, compiled Sep  1 2012 18:08:47)
MacOS X (unix) version
Included patches: 1-646 
```

操作系统：`OS X 10.8.2`

重击：`GNU bash, version 4.2.39(2)-release (i386-apple-darwin12.2.1)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:54:26.160

这是`E254`：

```
The color name {name} is unknown. See gui-colors for a list of colors that 
are available on most systems. 
```

您是否希望仅 GUI 的配色方案在终端中工作？你用什么配色方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:15:08.583

我找到了问题的答案：我没有使用 OS X 随附的原始 Vim 或 MacVim 快照安装程序，而是使用 Brew 安装了 Vim，现在一切正常，无需更改。

令人沮丧的是，我之前多次修改的设置实际上是正确的；Vim 错了（这是我唯一一次比 Vim 更聪明）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T02:34:30.590

调用在

```
/Applications/MacVim.app/Contents/MacOS/Vim 
```

MacVim 附带了一个启动 shell 脚本来解决这个问题。如果您像往常一样简单地将 MacVim.app 拖放到 /Applications 中，然后将关联的`mvim`启动脚本复制到本地二进制文件夹中：

```
/usr/local/bin/mvim 
```

然后是一个将 vim 别名为 MacVim 的简单符号链接：

```
ln -s /usr/local/bin/mvim /usr/local/bin/vim 
```

应该解决问题:)

# jquery - jqTransform Select - 如何实现滚动到输入的字母

> ID：13591626
> 
> 赞同：3
> 
> 时间：2012-11-27T19:30:17.307
> 
> 标签：jquery, jqtransform

我有一个使用 jqTransform 的网站。

不幸的是，这个原本不错的代码的主要问题之一是选择下拉框不再响应键盘（即按 S 转到以 S 开头的第一个选项）。

显然有一个解决方法： [http ://www.techapparatus.com/jqtransform-select-problem-with-keyboard-type-solution](http://www.techapparatus.com/jqtransform-select-problem-with-keyboard-type-solution)

但是，这不再可用 - 我尝试联系作者，但没有收到任何回复。

还有其他人有任何工作的例子吗？

# air - 如何将 Windows Air 应用程序（带有强制运行时）打包到单个 .exe 文件中？

> ID：13591627
> 
> 赞同：2
> 
> 时间：2012-11-27T19:30:19.677
> 
> 标签：air

当我编译我的 Adob​​e Air 3.4 应用程序（带有强制运行时）时，它会生成一个包含一堆东西（exe、swf、meta-inf、mimetype 等）的文件夹。是否可以将所有这些文件和文件夹打包成一个 .exe 文件？基本上，我想模仿它在 Mac 上的工作方式，以便用户轻松复制和交换应用程序。

您可能知道，在 Mac 上，已编译的 Adob​​e Air 应用程序会生成单个 .app 文件。该文件实际上是一个文件夹，但从用户的角度来看，它可以工作并且看起来像一个单文件独立应用程序。我想在 Windows 上做同样的事情。

这很容易实现吗？

PS为简单起见，我不想要安装程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T10:25:15.573

这不是 AIR 特有的，但似乎有一些应用程序允许您将 exe 及其资产组合成一个 .exe 在我的谷歌搜索中，我遇到了 [http://www.molebox.com/](http://www.molebox.com/) 和谜虚拟盒子：[http ://www.enigmaprotector.com/en/downloads.html](http://www.enigmaprotector.com/en/downloads.html)

这是一个关于一个人如何使用 Enigma 打包他的 Unity 游戏的教程：[http ://enigmaprotector.com/forum/viewtopic.php?f=20&t=569](http://enigmaprotector.com/forum/viewtopic.php?f=20&t=569)

希望有帮助。

# android - 如何从 Android 中的所有应用程序中隐藏选定的媒体文件？

> ID：13591628
> 
> 赞同：0
> 
> 时间：2012-11-27T19:30:22.737
> 
> 标签：android, gallery, show-hide

我想制作一个应用程序，让用户可以选择文件表单库，然后将这些选定的文件隐藏在 Android 手机上运行的所有其他应用程序中......有什么建议我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:59:56.150

将它们放在一个文件夹中并包含一个名为 .nomedia 的文件。

但是，如果文件夹是共享的，例如在 SDCard 上，那么用户可以使用文件资源管理器浏览到它们。

要停止这种情况，您可以更改文件的权限，但这在设备已植根时不起作用。

# regex - 使用正则表达式定位标签之间的特定文本

> ID：13591631
> 
> 赞同：0
> 
> 时间：2012-11-27T19:30:30.700
> 
> 标签：regex, html-parsing

我试图只选择字符串“Target”区分大小写，而不在 HTML 代码之前或之后抓住任何额外的空间，也没有获取标签或标签属性。
我有这个正则表达式：

```
/(?![^<>]*>) *(Target) *([^ \d])/g 
```

这确实抓住了:Target 的多次出现，但它也抓住了之前和之后的额外空格，它后面的第一个字符或它之后的额外空格。
在`<div id="Target">text Target othertext</div>`它的抓取`Target o`
中，我该如何完善这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:34:12.427

根据您用于处理 RegEx 的内容，可能是因为您使用了多个捕获组。我会将其他捕获组更改为非捕获，方法是在它们前面加上`?:`：

```
/(?:?![^<>]*>) *(Target) *(?:[^ \d])/g 
```

**编辑：**

有了评论中的附加信息，这不应该吗？

```
var str="<div id=\"Target\">text Target othertext</div>";
str = str.replace(/Target/g,"New!"); 
```

**编辑＃2：**

这是一个以您的原始正则表达式开头并使用[此 StackOverflow 帖子](https://stackoverflow.com/questions/2447915/javascript-string-regex-backreferences)中的一些信息的通行证：

```
var str="<div id=\"Target\">text Target othertext</div><Target test=\"nothing\">Target this is Targeted.</Target>";
alert(str.replace(/(?![^<>]*>)( *)Target( *[^ \d])/g,function(str,group1,group2){return group1 + "NEW!" + group2;})); 
```

我自己测试过它，它似乎可以满足您的需求……或者至少可以让您走得更远。

# delphi - 如何使用 TOpenFileName 仅选择文件夹？

> ID：13591633
> 
> 赞同：0
> 
> 时间：2012-11-27T19:30:38.600
> 
> 标签：delphi, windows-7

我需要能够使用本机 Windows 7 打开对话框来选择文件夹，即。不是通过使用`SelectDirectory()`.

我目前有一个使用 调用对话框的过程，`TOpenFileName`效果很好。

是否有一个隐藏标志可用于确保对话框仅允许选择一个文件夹，其中按钮更改为“选择文件夹”？

**注意：**我不想使用 Delphi 的标准 TFileOpenDialog。我宁愿为此坚持自己的职能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:44:28.733

> 是否有一个隐藏标志可用于确保对话框仅允许选择一个文件夹，其中按钮更改为“选择文件夹”？

不，那里没有。您需要使用`TFileOpenDialog`which wraps `IFileDialog`which 是提供此功能的系统组件。

# zooming - 如何识别 D3 画笔中包含的散点图数据点？

> ID：13591637
> 
> 赞同：3
> 
> 时间：2012-11-27T19:30:55.310
> 
> 标签：zooming, d3.js

我对 d3 还很陌生，但是已经能够使用很多示例创建一个 SVG 散点图，我在其中添加了一个画笔，以允许用户突出显示该数据的子集。

```
 var svg = d3.select("body").append("svg")
.attr("width", width + margin.right + margin.left)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
 svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(d3.svg.axis().scale(x).orient("bottom"));

 svg.append("g")
.attr("class", "brush")
.call(d3.svg.brush().x(x).y(y)
.on("brushstart", brushstart)
.on("brush", brushmove)
.on("brushend", brushend));

 function brushstart() {
 svg.classed("selecting", true);
 }

 function brushmove() {
var e = d3.event.target.extent();
circle.classed("selected", function(d) {
return e[0][0] <= d[0] && d[0] <= e[1][0]
    && e[0][1] <= d[1] && d[1] <= e[1][1];
 });
}

function brushend() {
   svg.classed("selecting", !d3.event.target.empty());
} 
```

最终，我想要做的是获取突出显示的区域并将其分解（放大）到屏幕上的另一个 SVG 中，让用户深入了解更多细节。所以我想做的是找出最好的方法来识别应该在另一个图表中显示的brush.extent中存在的那些数据。

我考虑过尝试遍历每个数据点，将其坐标与范围的边界进行比较，但如果我开始处理大型散点图，这似乎会很慢。有没有更好的方法可以更有效地获取数据子集？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T04:07:07.280

我会在这里使用[Crossfilter 库](http://square.github.io/crossfilter/)为我处理过滤。他们已经完成了艰苦的工作以确保事情高效，并且 API 非常简单。

我已经建立了[基础](http://jsfiddle.net/pzBeA/1/)知识，但基本上它相当于这些代码行：

```
var xf = crossfilter(data);
var xDim = xf.dimension(function(d) { return d[0]; });
var yDim = xf.dimension(function(d) { return d[1]; });

brush.on('brush', function() {
    var extent = brush.extent();
    xDim.filterRange([extent[0][0], extent[1][0]]);
    yDim.filterRange([extent[0][1], extent[1][1]]);
    update();
}); 
```

# java - 在 printin 处输入 int

> ID：13591640
> 
> 赞同：3
> 
> 时间：2012-11-27T19:31:14.940
> 
> 标签：java, string, formatting, printf, println

我正在尝试修复我编写的脚本：

```
import java.util.Scanner;
public class Line2
{
    public static void main (String [] args)

    {
        Scanner scan = new Scanner (System.in);
        System.out.println ("Please enter 4 integers");
        int x1 = scan.nextInt();
        int y1 = scan.nextInt();
        int x2 = scan.nextInt ();
        int y2 = scan.nextInt ();
        double distance;

        //Asking the user to insert coordinates of both points and setting double
        // on distance in order to properly calculate the square root

        distance = Math.sqrt((x2-x1)*(x2-x1) + (y2-y1)*(y2-y1));
        System.out.print( "the length of the line between the points" (int x1, int x2) "and" (int y1, int y2) "is" distance);

       //Telling the program to calculate the distance of two points given by user
    }//end of method main

} 
```

我正在尝试制作`x1` `x2` `y1`并`y2`出现在里面，但是它不允许我 - 给出 Y（有点）预期......我该怎么做才能让它出现，不管它`int`是什么？（除了程序运行得很好，我认为..）谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T19:34:42.643

尝试这个：

```
System.out.printf(
    "The length of the line between the points (%d, %d) and (%d, %d) is %f%n",
    x1, x2, y1, y2, distance); 
```

对于这些情况，最简单的解决方案是使用格式化字符串，如上面的代码所示。[请参阅文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)中有关诸如字符串的语法的更多详细信息。

在上面的代码片段中，a 之后的每个字符都`%`表示该位置的相应参数（在字符串之后，按从左到右的顺序）必须进行相应的格式化。尤其是：

*   %d ：这将是一个整数。前四个参数是`int`s`x1, y1, x2, y2`
*   %f ：这将是一个十进制数。第五个参数是被`double`调用的`distance`
*   %n : 这将是一个特定于平台的换行符

该[`printf`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)方法负责用相应的参数值替换每个格式字符，`String`按预期创建和打印 a。这比将字符串部分与`+`运算符连接起来、散布所需的变量要容易得多且不易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:34:50.480

要打印组合的多个值，您可以使用加法运算符将值的字符串表示形式附加在一起。

```
System.out.print("here is a point(" + x1 + ", " + x2 + " )"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:35:23.660

使用“+”连接您的字符串。

```
System.out.print("the length of the line between the points (int"
+ x1 + ", int " + x2 + ") and (int " + y1 + ", int " + y2 + ") is " + distance); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T19:35:55.583

要将整数与字符串组合，您可以这样做：

```
x = 5;
y = 6;
System.out.println("This script exists to print the point ("+x+","+y+")"); 
```

# javascript - jquery 选择没有特定类的父级的输入

> ID：13591642
> 
> 赞同：3
> 
> 时间：2012-11-27T19:31:42.020
> 
> 标签：javascript, jquery

如何选择没有特定类的父级的所有输入？

在这里，我只想获取类中没有父级的输入`not-parent`

```
$(document).ready(function(){
    $('input:text').css('color', '#FF1200'); 
});​ 
```

[http://jsfiddle.net/MFtv3/](http://jsfiddle.net/MFtv3/)

我试过`filter()`没有成功。：/

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T19:36:38.293

如果您的输入都包含在 div 中；

如果你想要顶层到底层父级检查：

```
$("div:not(.not-parent) input").css('color', '#FF1200'); 
```

或者如果您只想要一级父级检查：

```
$("div:not(.not-parent) > input").css('color', '#FF1200'); 
```

编辑：如果它有没有类的相同类型的祖先使用这个：

```
$('input').filter(function(){
    return !$(this).parents('div').hasClass('not-parent');
}).css('color', '#FF1200'); 
```

# printing - 将后记和原始数据打印到行式打印机会产生多余的上边距

> ID：13591644
> 
> 赞同：3
> 
> 时间：2012-11-27T19:31:46.607
> 
> 标签：printing, postscript, cups

我们有一个自定义应用程序，当在 Unix 下打印时，通过 Adob​​e 的 acroread Unix 命令将 PDF 文件管道化以生成 PostScript 文件，然后使用 lp 命令将其发送到打印机。我一直在处理一台行式打印机，一台旧的 Epson LX-300+，我们的一个客户使用它来打印连续支票表格——打印机在表格顶部生成了多余的空白边距并阻止我在预印表格的关键位置打印。

我已经尝试了几乎所有我能拿到的东西。我正在使用自定义 PPD，因此我可以设置这些连续表单所需的自定义页面大小。我什至尝试使用 lp -o raw 将原始文本打印到打印机，但它仍然会在顶部生成空白空间。

这是我添加到 PPD 以设置自定义页面大小的行：

```
*PageSize Checks/Checks: "<</PageSize[596 227]/ImagingBBox null>>setpagedevice"
...
*PageRegion Checks/Checks: "<</PageSize[596 227]/ImagingBBox null>>setpagedevice"
...
*ImageableArea Checks/Checks: "0 0 596 227"
...
*PaperDimension Checks/Checks: "596 227" 
```

我什至尝试从以下位置修改 HWMargins 设置：

```
*HWMargins: 36 36 36 36 
```

至

```
*HWMargins: 0 0 0 0 
```

无济于事。

有什么限制我吗？我可以添加某种形式的 ESC/PCL/PJL 命令来覆盖打印机的硬件限制吗？请记住，这种打印机型号目前正用于打印支票，并且使用原始数据，尽管它是通过 Windows 进行的，而且我无法访问它使用的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:43:06.473

根据[Epson LX-300 Impact Printer的](http://files.support.epson.com/pdf/lx300_/lx300_u1.pdf)[*用户手册*](http://files.support.epson.com/pdf/lx300_/lx300_u1.pdf)，p. A-5，连续进纸表格上的最小上边距为 9.0 毫米（0.35 英寸），而单张纸上的最小上边距为 5.3 毫米（0.2 英寸）。软件给你的多余空白边距是否比这更大？

Epson LX-300 是一款 9 针冲击式打印机，使用 ESC/P 语言进行控制。它没有 PostScript 解释器。您确定*acroread*正在将 PostScript 语言输出发送到打印机吗？打印机可以从计算机接收字符数据或图像数据。听起来支票打印软件以字符数据模式使用打印机。我希望 Adob​​e 的*acroread*软件生成将打印机置于图像模式的输出。因此，*acroread*正在使用与支票打印大不相同的打印机模式。

*我建议您尝试从acroread*打印到打印机，尝试找到一个 PDF 文件，该文件以您寻求的边距打印。尝试在文字处理器或 Adob​​e Illustrator 中创作 PDF 文件。尝试设置 PDF 文件的页面大小和页边距。看看你是否可以让*acroread*在任何情况下使用你想要的边距。如果你不能，那么也许没有简单的方法可以在*acroread*上游使用你的应用程序来获得你想要的利润。

[常见问题解答，](http://www.epson.com/cgi-bin/Store/support/supDetail.jsp?BV_UseBVCookie=yes&infoType=FAQ&oid=14245&prodoid=8237&foid=38597&cat=30930&subcat=30935)*最[*常用的转义码是什么？*](http://www.epson.com/cgi-bin/Store/support/supDetail.jsp?BV_UseBVCookie=yes&infoType=FAQ&oid=14245&prodoid=8237&foid=38597&cat=30930&subcat=30935), 给出了该语言的一些转义码。更多命令在用户手册第 A-10 页开始的部分中。常见问题解答补充说，“如果您需要使用高级转义码进行编程，您可以从 EPSON Accessories 购买 ESC/P 参考手册。”*

 *您没有提到打印机是否在正确位置设置了表单穿孔。可能是，但以防万一，有一个[常见问题解答，*打印机没有从纸张上的正确位置开始。如何更改表单顶部？*](http://www.epson.com/cgi-bin/Store/support/supDetail.jsp?BV_UseBVCookie=yes&infoType=FAQ&oid=14245&prodoid=8237&foid=38603)

[Epson LX-300 Impact Printer 支持页面](http://www.epson.com/cgi-bin/Store/support/supDetail.jsp?oid=14245&prodoid=8237)包含指向各种信息以及产品信息指南的链接。您可能会在那里找到其他有用的信息。祝你好运！*

# ajax - POST 方法多次调用 | 第一个常规“Submi” | 第二个ajax{类型：'POST'，

> ID：13591645
> 
> 赞同：2
> 
> 时间：2012-11-27T19:31:53.717
> 
> 标签：ajax, spring, spring-mvc, model, addattribute

大家好，我需要一些帮助我创建了一个网页，其中包含

div#formsContent – 这具有表单，并且通过 RequestWorkListController.java 控制操作

div#newReqDiv - 这些是从上面提交的结果，有一个 5 行静态的表，一次从数据库中提取

div#pendReqDiv – 同上。

div#cmplReqDiv - 这个 div 很棘手，第一个提交按钮被点击它会获取 10 行，具有可点击的页码和 10 行显示，我使用 $.ajax( 对于第二个帖子，它工作正常只有新的问题10 行的集合不替换旧的 10 行集合。

```
SelLocCdReqCmplDao cmplDao = new SelLocCdReqCmplDao(jdbcTemplate);

int pg = ServletRequestUtils.getIntParameter(request, "pg", 1);

List<SelLocCdReqCmplModel> cmplRows = null;
cmplRows = cmplDao.execute(pg, pageSize);
int count = cmplRows.size()*10;
model.addAttribute("cmplRows", cmplRows);
model.addAttribute("pageNav", 
    pageNav.buildPageNav("#", count, pg, pageSize, pageNavTrail)); 
```

**这里是 requestWorkList.jsp——仅脚本**

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#form").submit(function() {
            $.post($(this).attr("action"), $(this)
                .serialize(), function(html) {
                $("#formsContent").replaceWith(html);
                $('html, body').animate({
                    scrollTop : $("#message").offset().top
                }, 500);
            });
            return false;
        });
        $('.page_nav a').click(function(e) {
            //alert($(this).text());
            //$('#cmplReqDiv').empty();
            $.ajax({
                type: 'POST',
                url: '<%=request.getContextPath()%>/requestWorkList?pg='
                     + $(this).text(),
                success: function(html) {
                    var showVar = '<c:out value="${cmplRows}"/>';
                    alert("The variable show is " + showVar);
                },
            });

            e.preventDefault();
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:59:31.657

玩了一段时间后，我设法刷新了子表中的数据。我只发布更改后的 java 脚本。

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#form").submit(function() {
            $.post($(this).attr("action"), $(this)
                .serialize(), function(html) {
                $("#formsContent").replaceWith(html);
                $('html, body').animate({
                    scrollTop : $("#message").offset().top
                }, 500);
            });
            return false;
        });
        $('.page_nav a').click(function(e) {
            $('#cmplReqDiv').empty();
            $.ajax({
                type: 'POST',
                serialize: $("#form").serialize(),
                url: '<%=request.getContextPath()%>/requestWorkList?pg='
                     + $(this).text(),
                success: function(html) {
                    //var showVar = '<c:out value="${cmplRows}"/>';
                    //alert("The variable show is " + showVar);
                    $("#formsContent").replaceWith(html);
                },
            });

            e.preventDefault();
        });
    });
</script> 
```

# ruby - 来自 Bash 命令的“未初始化的常量捆绑器”

> ID：13591651
> 
> 赞同：0
> 
> 时间：2012-11-27T19:32:19.047
> 
> 标签：ruby, bash

我正在创建一个 bash “.command” 文件，以允许同事更轻松地启动我编写的 Ruby 脚本。这是它的样子：

```
#!/bin/bash

cd "$(dirname "$0")"
ruby my_script.rb 
```

当命令运行时，它会生成以下错误：

```
my_script.rb:1:in `<main>': uninitialized constant Bundler (NameError) 
```

如果我`ruby my_script.rb`直接从终端运行，一切都很好。此外，我已经确认 bash 脚本使用的是正确版本的 Ruby 和 RubyGems。我什至可以`bundle install`从脚本中正确运行。鉴于所有依赖项似乎都可用于 bash 脚本，我无法弄清楚问题所在。

有任何想法吗？

编辑：

以下是前几行`my_script.rb`：

```
Bundler.require
require "json"
require "fileutils"
require "open-uri" 
```

# c++ - Eclipse 无法解析 SFML 2.0 对象成员

> ID：13591652
> 
> 赞同：2
> 
> 时间：2012-11-27T19:32:27.460
> 
> 标签：c++, eclipse, sfml, eclipse-juno

我的问题看起来并不罕见（即使我在这个问题上一无所获），也不是最重要的问题，但我认为值得一问。

我使用适用于 Linux 32 位的 SFML 2.0 候选版本（[在此处下载](http://www.sfml-dev.org/download.php)）。在尝试一个示例时，它可以完美构建并按预期运行。但是，在 Eclipse 中，调用 sf::Window 方法的每一行都会被标记为“方法无法解析”，我会得到红色的虚线。请注意，这不会影响实际的建筑。

这不是最严重的不便，但它确实使我的屏幕变得混乱，并且更难检测到我的代码中的实际错误。

关于我的工作空间的一些额外信息：我的 Eclipse 版本应该是 Juno。对于此代码，我使用标准 Makefile 并再次链接 sfml-graphics、sfml-window 和 sfml-system；那些重要的。对于编译，我使用 g++。

任何有关解决此麻烦的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:24:56.053

我在 Ubuntu 12.04 上使用 Juno，这是我必须采取的步骤，以使 SFML 与 Juno 配合得很好：

右键单击您的项目并导航到`Properties -> C/C++ Build -> Settings -> GCC C++ Compiler -> All Options`. 这个设置看起来像

![编译标志](../Images/f12ff5be2a2462f9c284972e1feb2d3e.png)

`Properties -> C/C++ Build -> Settings -> GCC C++ Linker -> Libraries`看起来像这样：

![图书馆](../Images/11df8033146543ff112cf5c2f0e6dafa.png)

其他设置对我来说是 CDT 默认值。

# java - AppEngine 上的多部分 POST (Java)

> ID：13591653
> 
> 赞同：2
> 
> 时间：2012-11-27T19:32:28.993
> 
> 标签：java, google-app-engine, http, apache-httpclient-4.x

简单的问题（很困惑，我在这里找不到答案）：

我想从我的 AppEngine Java servlet（出站）执行多部分编码的 HTTP POST。AppEngine 似乎不支持 Apache HTTP 库并且本身不提供 API（仅 `setPayload(byte[])`），但我想避免自己实现 Multipart 编码。所以：

1.  有没有办法从 AppEngine Java 发送 Multipart HTTP 正文？

2.  是否有将这样的主体编码为`byte[]`数组的库？（请注意，`MultiPartEntity.getContent()`没有实现。）然后我可以使用 AppEngine 内部 URLFetch API（我更喜欢它，因为异步调用功能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:30:28.387

我编写了一个小助手方法，将 Multipart POST 支持添加到 AppEngine（使用 Apache HTTP 客户端库）。

```
public static void addMultipartBodyToRequest(MultipartEntity entity, HTTPRequest req) throws IOException{

    /*
     * turn Entity to byte[] using ByteArrayOutputStream
     */
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    entity.writeTo(bos);
    byte[] body = bos.toByteArray();

    /*
     * extract multipart boundary (body starts with --boundary\r\n)
     */
    String boundary = new BufferedReader(new StringReader(new String(body))).readLine();
    boundary = boundary.substring(2, boundary.length());

    /*
     * add multipart header and body
     */
    req.addHeader(new HTTPHeader("Content-type", "multipart/form-data; boundary=" + boundary));
    req.setPayload(body);
} 
```

调用代码如下所示：

```
 MultipartEntity e = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
            e.addPart("part1", new StringBody("value1"));
            e.addPart("part2", new StringBody("value2"));

            HTTPRequest req = new HTTPRequest(new URL(myUrl), HTTPMethod.POST);
            ServletHelper.addMultipartBodyToRequest(e, req);

            URLFetchServiceFactory.getURLFetchService().fetchAsync(req); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:28:59.573

您可以使用[`MultipartEntity`](http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/MultipartEntity.html)来自[`httpmime`](http://hc.apache.org/httpcomponents-client-ga/httpmime/).

她的就是[一个例子](https://stackoverflow.com/questions/8025689/gae-j-how-do-i-post-a-multipart-mime-message-from-appengine-to-facebook)。

# vba - VBA Word我想用这个+循环中的不同单词替换一个单词

> ID：13591656
> 
> 赞同：1
> 
> 时间：2012-11-27T19:32:52.857
> 
> 标签：vba, ms-word

这是我的代码，但它不会替换！首先，我将 AnyText 更改为 TEMP，在我循环使用 Array TargetList 的元素替换 TEMP 之后，但不能替换 TEMP。

```
Sub First()
'
' First Macro

    Dim i As Long
    i = 0
    Dim j As Long
    Dim myWord As String
    Dim msg As String
    myWord = "TEMP"
    TargetList = Array("AnyText", "NewWord1", "NewWord2", "NewWord3", "NewWord4") 
    For Each myStoryRange In ActiveDocument.StoryRanges
     With myStoryRange.Find
         .Text = "AnyText"
         .Replacement.Text = myWord
         .Wrap = wdFindContinue
         .Execute Replace:=wdReplaceAll
     End With
    Next myStoryRange

     For Each myStoryRange In ActiveDocument.StoryRanges
     With myStoryRange.Find
            Do While .Execute(FindText:=myWord, Forward:=True) _
                = True
                j = j + 1
            Loop
            msg = msg & "The string " & myWord & _
            " found " & j & " times."
        End With
        msg = msg & vbCrLf & vbCrLf
    MsgBox msg

     Next myStoryRange

       For Each myStoryRange In ActiveDocument.StoryRanges
     With myStoryRange.Find
         Do While j > -1
             .Text = "TEMP"
             .Replacement.Text = TargetList(i)
             msg = msg & "The string " & myWord & _
                " j = " & j & " i = " & i & TargetList(i) & " times."
              msg = msg & vbCrLf & vbCrLf
        MsgBox msg

             j = j - 1
             i = i + 1

             If i = 5 Then
                i = 0
             End If

         Loop
         .Wrap = wdFindContinue
         .Execute Replace:=wdReplaceAll
      End With
   Next myStoryRange
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:34:46.017

此代码将用“TEMP”替换“AnyText”的任何实例，然后用当前的`(count of finds)`mod 5 替换“TEMP”的任何实例：

```
Sub First()
    Dim i As Long
    i = 0
    Dim myWord As String
    myWord = "TEMP"
    TargetList = Array("AnyText", "NewWord1", "NewWord2", "NewWord3", "NewWord4")
    With ActiveDocument.Content.Find
         .Text = "AnyText"
         .Replacement.Text = myWord
         .Wrap = wdFindContinue
         .Execute Replace:=wdReplaceAll
    End With

    With ActiveDocument.Content.Find
        .Text = "TEMP"
        .Replacement.Text = TargetList(i)
        .Wrap = wdFindContinue
        Do While .Execute(Replace:=wdReplaceOne) = True
            i = i + 1
            If i = 5 Then i = 0
            .Replacement.Text = TargetList(i)
        Loop
    End With
End Sub 
```

请注意，这将更改“AnyText”的**所有**实例 - 即使它们是较大单词的一部分（例如“myAnyTextWord”将更改为“myTEMPWord”）。如果您只想搜索整个单词，请添加`.MatchWholeWord = True`到每个`With`块中。

# matlab - 意外覆盖的值，如何取回它

> ID：13591657
> 
> 赞同：1
> 
> 时间：2012-11-27T19:33:00.620
> 
> 标签：matlab

我的计算机刚刚计算了一个需要几个小时的值。我不小心覆盖了这个值。有没有办法撤消这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:38:53.817

非常不可能。从技术上讲，这些数据可能仍然存在于内存中，但几乎可以肯定没有提及它的确切存储位置，因此无法检索。

将来，请考虑在创建值后立即将它们保存到文件中。例如，我的大多数 Matlab 脚本都以

```
save /path/to/experiment/folder/filename.mat important results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T16:58:53.880

右键单击文件本身。有一个选项：“恢复以前的版本”。当我这样做时，matlab 脚本在过去 4 小时内每小时保存一次。我可以像那样恢复它:)

# hadoop - 我应该扁平化 HL7 数据以在 Hadoop/Hive 中使用它吗？还是扩展 Hive？

> ID：13591658
> 
> 赞同：3
> 
> 时间：2012-11-27T19:33:02.367
> 
> 标签：hadoop, hive, hl7

我正在处理大量 2.x 格式的 HL7 消息。该格式是一种以竖线分隔的格式，其中每种格式大致如下所示（虚拟数据）：

```
MSH|^~\&|EPIC|EPICADT|SMS|SMSADT|199912271408|CHARRIS|ADT^A04|1817457|D|2.5|
PID||0493575^^^2^ID 1|454721||DOE^JOHN^^^^|DOE^JOHN^^^^|19480203|M||B|254 MYSTREET AVE^^MYTOWN^OH^44123^USA||(216)123-4567|||M|NON|400003403~1129086|
NK1||ROE^MARIE^^^^|SPO||(216)123-4567||EC|||||||||||||||||||||||||||
PV1||O|168 ~219~C~PMA^^^^^^^^^||||277^ALLEN MYLASTNAME^BONNIE^^^^|||||||||| ||2688684|||||||||||||||||||||||||199912271408||||||002376853 
```

我想使用 Hive 或类似的东西对这些数据进行大型查询/探索。我应该首先使用 HParser 或类似的东西将这些数据扁平化为更多的表格格式吗？或者是否值得花时间扩展 Hive 以便能够通过自定义 SerDer 或 InputFormat 进行查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T00:37:49.793

您应该能够通过[RegExSerde](https://github.com/apache/hive/blob/trunk/contrib/src/java/org/apache/hadoop/hive/contrib/serde2/RegexSerDe.java)相对轻松地使用正则表达式处理 HL7。话虽如此，一旦您了解了 objectinspector 和其他 Hive 管道，编写 serde 并不是非常困难（几个小时）。自定义 serde 也可以自动提供字段名称，但这是一个小好处。单独的解析步骤是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:49:43.197

您可以使用 Hadoop API 编写自定义 InputFormat 和 RecordReader ...请参阅本文开始： [http ://bigdatacircus.com/2012/08/01/wordcount-with-custom-record-reader-of-textinputformat/](http://bigdatacircus.com/2012/08/01/wordcount-with-custom-record-reader-of-textinputformat/)

# c++ - 如何概括精神解析器以任意顺序获取列表？

> ID：13591660
> 
> 赞同：3
> 
> 时间：2012-11-27T19:33:12.393
> 
> 标签：c++, boost, boost-spirit, boost-fusion

我有一个简单的解析器，可以解析整数列表或带引号的字符串。

如果我执行**SIMPLE_CASE**我将输入设为：

```
std::string input1 = "{ INT: 42, 24 STR: \"Smith\", \"John\" }"; 
```

它正确解析为`my_record`，其中包含一个整数列表和一个 std::string 列表。

我想将此代码修改为通用代码，以便它可以以任意顺序获取零个或多个 INT 列表和零个或多个 STR 列表，并`my_record`以正确的顺序填充它们。我想要我的第二个更通用的测试用例：

```
std::string input1 = "{ STR: \"Joe\" INT: 42, 24 STR: \"Smith\", \"John\" }"; 
```

解析为：

```
client::my_record expected1 { { 42, 24 }, {"Joe", "Smith", "John"} }; 
```

如果我运行，下面的代码可以正常工作：

```
/tmp$ g++ -DSIMPLE_CASE -g -std=c++11 sandbox.cpp -o sandbox && ./sandbox 
```

但我不确定在运行此程序时如何让一般情况下工作：

```
/tmp$ g++ -g -std=c++11 sandbox.cpp -o sandbox && ./sandbox 
```

**sandbox.cpp 的代码**

```
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_object.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/fusion/include/io.hpp>

#include <string>
#include <complex>
#include <algorithm>

namespace client
{
    namespace qi    = boost::spirit::qi;
    namespace ascii = boost::spirit::ascii;

    struct my_record
    {
        std::vector<int>          m_ints;
        std::vector<std::string>  m_strs;

        bool operator==( const my_record& other ) const
        {
            return std::equal( m_ints.begin(), m_ints.end(), other.m_ints.begin() )
                && std::equal( m_strs.begin(), m_strs.end(), other.m_strs.begin() );
        }
        bool operator!=( const my_record& other ) const
        {
            return ! operator==( other );
        }
        friend std::ostream& operator<<( std::ostream& os, const my_record& rec );
    };

    std::ostream& operator<<( std::ostream& os, const my_record& rec )
    {
        for( const auto& x : rec.m_ints )
            std::cerr << x << ' ';
        std::cerr << std::endl;

        for( const auto& x : rec.m_strs )
            std::cerr << x << ' ';
        std::cerr << std::endl;

    }
}

BOOST_FUSION_ADAPT_STRUCT(
    client::my_record,
        (std::vector<int>,          m_ints)
        (std::vector<std::string>,  m_strs)
)

namespace client
{
    template <typename Iterator>
    struct employee_parser : qi::grammar<Iterator, my_record(), ascii::space_type>
    {
        employee_parser() : employee_parser::base_type(start)
    {
        using qi::int_;
        using qi::lit;
        using qi::double_;
        using qi::lexeme;
        using ascii::char_;

        quoted_string %= lexeme['"' >> +(char_ - '"') >> '"'];

#ifdef SIMPLE_CASE
        start %=
            '{'
            >>  int_list
            >>  str_list
            >>  '}'
            ;
#else
        // not sure how to approach this
        start %=
            '{'
            >>  *(int_list)  // want zero or more of these, in any order
            >>  *(str_list)  // want zero or more of these, in any order
            >>  '}'
            ;
#endif

        str_list %=
                lit( "STR:" ) >> quoted_string % ','    
                ;

        int_list %=
                lit( "INT:" ) >> int_ % ','
                ;
    }

    qi::rule<Iterator, std::string(), ascii::space_type>               quoted_string;
    qi::rule<Iterator, std::vector<std::string>(), ascii::space_type>  str_list;
    qi::rule<Iterator, std::vector<int>(),         ascii::space_type>  int_list;

    qi::rule<Iterator, my_record(), ascii::space_type>                 start;
    };
}

static int 
TryParse( const std::string& input, const client::my_record& expected )
{
    using boost::spirit::ascii::space;
    client::my_record                        rec;
    auto                                     iter = input.begin(), end = input.end();
    client::employee_parser<decltype(iter)>  g;
    phrase_parse( iter, end, g, space, rec );
    if ( iter!=end )
    {
        std::cerr << "failed to parse completely" << std::endl;
        return -1;
    } else if ( rec!=expected ) {
        std::cerr << "unexpected result in parse" << std::endl;
        std::cerr << rec;
        return -1;
    }
    return 0;
}

int 
main(int argc, char* argv[])
{
#ifdef SIMPLE_CASE
    client::my_record  expected1 { { 42, 24 }, {"Smith", "John"} }, emp;
    std::string        input1 = "{ INT: 42, 24 STR: \"Smith\", \"John\" }";
    return TryParse( input1, expected1 );
#else
    client::my_record  expected1 { { 42, 24 }, {"Joe", "Smith", "John"} }, emp;
    std::string        input1 = "{ STR: \"Joe\" INT: 42, 24 STR: \"Smith\", \"John\" }";
    return TryParse( input1, expected1 );
#endif

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T20:56:05.590

使用[`is_container`](http://www.boost.org/libs/spirit/doc/html/spirit/advanced/customize/is_container.html)and[`push_back_container`](http://www.boost.org/libs/spirit/doc/html/spirit/advanced/customize/store_value/push_back.html)代替语义操作的替代方法：

步骤1：删除您的`BOOST_FUSION_ADAPT_STRUCT`宏。

第二步：改变你的`start`规则。

```
start %=
            '{'
            >>  *(int_list // want zero or more of these, in any order
                | str_list)  // want zero or more of these, in any order
            >>  '}'
            ; 
```

第三步：添加以下专业。

```
namespace boost { namespace spirit { namespace traits
{
    template <>
    struct is_container<client::my_record>: mpl::true_//my_record acts as a container
    {};

    template <>
    struct container_value<client::my_record>
    {
        typedef boost::variant<std::vector<int>,std::vector<std::string>> type;//The elements to add to that container are either vector<int> or vector<string>
    };

    template <>
    struct push_back_container<client::my_record,std::vector<int>>//when you add a vector of ints...
    {
        static bool call(client::my_record& c, std::vector<int> const& val)
        {
            c.m_ints.insert(c.m_ints.end(),val.begin(), val.end());//insert it at the end of your acumulated vector of ints
            return true;
        }
    };

    template <>
    struct push_back_container<client::my_record,std::vector<std::string>>//when you add a vector of strings
    {
        static bool call(client::my_record& c, std::vector<std::string> const& val)//insert it at the end of your acumulated vector of strings
        {
            c.m_strs.insert(c.m_strs.end(),val.begin(),val.end());
            return true;
        }
    };

}}} 
```

这是所要求的完整代码（如果我使用多个 push_backs 创建预期结果，则使用 g++ 4.7.1 和 msvc11 编译）：

更新了示例以添加适应结构的另一个成员向量。

```
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/adapted/struct.hpp>

#include <string>
#include <vector>
#include <iostream>

namespace client
{
    struct my_subrec
    {
        double foo;
        double bar;
        bool operator==( const my_subrec& other ) const
        {
            return foo==other.foo && bar==other.bar;
        }
    };

    std::ostream& operator<<( std::ostream& os, const my_subrec& rec )
    {
        os << rec.foo << "->" << rec.bar;
        return os;
    }   

}

BOOST_FUSION_ADAPT_STRUCT(client::my_subrec,
                (double, foo)
                (double, bar)
                )

namespace client
{
    namespace qi    = boost::spirit::qi;
    namespace ascii = boost::spirit::ascii;

    struct my_record
    {
        std::vector<int>          m_ints;
        std::vector<std::string>  m_strs;
        std::vector<my_subrec>    m_recs;

        bool operator==( const my_record& other ) const 
        {
            return std::equal( m_ints.begin(), m_ints.end(), other.m_ints.begin() )
                && std::equal( m_strs.begin(), m_strs.end(), other.m_strs.begin() )
                && std::equal( m_recs.begin(), m_recs.end(), other.m_recs.begin() );
        }
        bool operator!=( const my_record& other ) const
        {
            return ! operator==( other );
        }
        friend std::ostream& operator<<( std::ostream& os, const my_record& rec );
    };

    std::ostream& operator<<( std::ostream& os, const my_record& rec ) 
    {
        for( const auto& x : rec.m_ints )
            os << x << ' ';
        os << '\n';

        for( const auto& x : rec.m_strs )
            os << x << ' ';
        os << '\n';

        for( const auto& x : rec.m_recs )
            os << x << ' ';
        return os;
    }
}

//BOOST_FUSION_ADAPT_STRUCT(
//    client::my_record,
//        (std::vector<int>,          m_ints)
//        (std::vector<std::string>,  m_strs)
//)

namespace client
{
    template <typename Iterator>
    struct employee_parser : qi::grammar<Iterator, my_record(), ascii::space_type>
    {
        employee_parser() : employee_parser::base_type(start)
    {
        using qi::int_;
        using qi::lit;
        using qi::double_;
        using qi::lexeme;
        using ascii::char_;

        quoted_string %= lexeme['"' >> +(char_ - '"') >> '"'];

#ifdef SIMPLE_CASE
        start %=
            '{'
            >>  int_list
            >>  str_list
            >>  '}'
            ;
#else
        // not sure how to approach this
        start %=
            '{'
            >>  *(int_list // want zero or more of these, in any order
                | str_list  // want zero or more of these, in any order
                | rec_list)
            >>  '}'
            ;
#endif

        str_list %=
                lit( "STR:" ) >> quoted_string % ','    
                ;

        int_list %=
                lit( "INT:" ) >> int_ % ','
                ;
        rec_list =
                lit( "REC:" ) >> rec % ','
                ;
        rec = double_ >> lit('-') >> double_
                ;
    }

    qi::rule<Iterator, std::string(), ascii::space_type>               quoted_string;
    qi::rule<Iterator, std::vector<std::string>(), ascii::space_type>  str_list;
    qi::rule<Iterator, std::vector<int>(),         ascii::space_type>  int_list;
    qi::rule<Iterator, client::my_subrec(), ascii::space_type> rec;
    qi::rule<Iterator, std::vector<client::my_subrec>(),ascii::space_type> rec_list;

    qi::rule<Iterator, my_record(), ascii::space_type>                 start;
    };
}

namespace boost { namespace spirit { namespace traits
{
    template <>
    struct is_container<client::my_record>: mpl::true_//my_record acts as a container
    {};

    template <>
    struct container_value<client::my_record>
    {
        typedef boost::variant<std::vector<int>,std::vector<std::string>,std::vector<client::my_subrec> >type;
        //The elements to add to that container are vector<int>, vector<string> or vector<my_subrec>
    };

    template <>
    struct push_back_container<client::my_record,std::vector<int>>//when you add a vector of ints...
    {
        static bool call(client::my_record& c, std::vector<int> const& val)
        {
            c.m_ints.insert(c.m_ints.end(),val.begin(), val.end());//insert it at the end of your acumulated vector of ints
            return true;
        }
    };

    template <>
    struct push_back_container<client::my_record,std::vector<std::string>>//when you add a vector of strings
    {
        static bool call(client::my_record& c, std::vector<std::string> const& val)//insert it at the end of your acumulated vector of strings
        {
            c.m_strs.insert(c.m_strs.end(),val.begin(),val.end());
            return true;
        }
    };

    template <>
    struct push_back_container<client::my_record,std::vector<client::my_subrec>>//when you add a vector of subrecs
    {
        static bool call(client::my_record& c, std::vector<client::my_subrec> const& val)//insert it at the end of your acumulated vector of subrecs
        {
            c.m_recs.insert(c.m_recs.end(),val.begin(),val.end());
            return true;
        }
    };

}}}

static int 
TryParse( const std::string& input, const client::my_record& expected )
{
    using boost::spirit::ascii::space;
    client::my_record                        rec;
    auto                                     iter = input.begin(), end = input.end();
    client::employee_parser<decltype(iter)>  g;
    phrase_parse( iter, end, g, space, rec );
    if ( iter!=end )
    {
        std::cerr << "failed to parse completely" << std::endl;
        return -1;
    } else if ( rec!=expected ) {
        std::cerr << "unexpected result in parse" << std::endl;
        std::cerr << rec;
        return -1;
    }
    std::cout << rec << std::endl;
    return 0;
}

int 
main(int argc, char* argv[])
{
#ifdef SIMPLE_CASE
    client::my_record  expected1 { {42, 24 }, {"Smith", "John"} }, emp;
    std::string        input1 = "{ INT: 42, 24 STR: \"Smith\", \"John\" }";
    return TryParse( input1, expected1 );
#else
    client::my_record  expected1 { { 42, 24,240 }, {"Joe", "Smith", "John"}, {{1.5,2.5}} }, emp;

    std::string        input1 = "{ STR: \"Joe\" INT: 42, 24 STR: \"Smith\", \"John\" INT: 240 REC: 1.5-2.5 }";
    return TryParse( input1, expected1 );
#endif

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T19:50:49.780

你语法错了，

```
 start %=
        '{'
        >>  *(int_list)  // want zero or more of these, in any order
        >>  *(str_list)  // want zero or more of these, in any order
        >>  '}'
        ; 
```

这意味着接受任意数量的`int`s 后跟任意数量的`string`. 您不能有`int`、`string`、`int`或任何其他组合。

你需要类似的东西

```
 start %=
        '{'
         >> *( int_list  // want zero or more of these, in any order
             | str_list  // want zero or more of these, in any order
             )
        >>  
        '}'
        ; 
```

但显然你需要将它融入你的数据结构中，注意你可能不得不使用语义操作。

### 还：

当我在这里时，我不能让这张幻灯片：

```
 std::ostream& operator<<( std::ostream& os, const my_record& rec )
    {
        for( const auto& x : rec.m_ints )
            std::cerr << x << ' ';
        std::cerr << std::endl;

        for( const auto& x : rec.m_strs )
            std::cerr << x << ' ';
        std::cerr << std::endl;

    } 
```

应该`os`喜欢：

```
 for( const auto& x : rec.m_ints )
            os << x << ' ';
        os << '\n'; 
```

还要尝试避免`endl`在流插入运算符中使用 ing，`\n`如果您需要换行，请使用。

## 解决方案：

最终需要的是使用 phoenix 函数、push_back 和活页夹。

```
template<typename Iterator>
struct my_grammar 
: qi::grammar<Iterator, my_record(), ascii::space_type> {

    my_grammar() 
    : my_grammar::base_type(start) {

        quoted_string %= qi::lexeme['"' >> +(qi::char_ - '"') >> '"'];

        start = qi::lit("{")
                >>
                *( "INT:" >> qi::int_     
                    [ 
                        phx::push_back(
                            phx::at_c<0>(
                                qi::_val
                            ), 
                            qi::_1
                        ) 
                    ] % ","
                 | "STR:" >> quoted_string
                     [ 
                        phx::push_back(
                            phx::bind(
                                &my_record::m_strs,
                                qi::_val
                            ), 
                            qi::_1
                        ) 
                    ] % ","
                 )
                >> 
                "}"
                 ;
    }
    qi::rule<Iterator, std::string(), ascii::space_type> quoted_string;
    qi::rule<Iterator, my_record(),   ascii::space_type>   start;
}; 
```

整个代码清单可以在这里看到：

[http://ideone.com/XW18Z2](http://ideone.com/XW18Z2)

# ios - 如何使用 AVCaptureSession 从 CMSampleBuffer 获取 UIImage

> ID：13591663
> 
> 赞同：3
> 
> 时间：2012-11-27T19:33:14.393
> 
> 标签：ios, image, video, xamarin.ios, camera

我一直在尝试在 MonoTouch 中进行一些实时视频图像处理。我正在使用 AVCaptureSession 从与 AVCaptureVideoPreviewLayer 一起使用的相机中获取帧。

我还在委托类中成功获取了回调方法“DidOutputSampleBuffer”。但是，我尝试从生成的 CMSampleBuffer 创建 UIImage 的每种方式都失败了。

这是我设置捕获会话的代码：

```
captureSession = new AVCaptureSession ();
            captureSession.BeginConfiguration ();
            videoCamera = AVCaptureDevice.DefaultDeviceWithMediaType (AVMediaType.Video);

            if (videoCamera != null)
            {
                captureSession.SessionPreset = AVCaptureSession.Preset1280x720;

                videoInput = AVCaptureDeviceInput.FromDevice (videoCamera);

                if (videoInput != null)
                    captureSession.AddInput (videoInput);

                //DispatchQueue queue = new DispatchQueue ("videoFrameQueue");

                videoCapDelegate = new videoOutputDelegate (this);

                DispatchQueue queue = new DispatchQueue("videoFrameQueue");
                videoOutput = new AVCaptureVideoDataOutput ();

                videoOutput.SetSampleBufferDelegateAndQueue (videoCapDelegate, queue);
                videoOutput.AlwaysDiscardsLateVideoFrames = true;
                videoOutput.VideoSettings.PixelFormat = CVPixelFormatType.CV24RGB;

                captureSession.AddOutput (videoOutput);

                videoOutput.ConnectionFromMediaType(AVMediaType.Video).VideoOrientation = AVCaptureVideoOrientation.Portrait;

                previewLayer = AVCaptureVideoPreviewLayer.FromSession (captureSession);
                previewLayer.Frame = UIScreen.MainScreen.Bounds;
                previewLayer.AffineTransform = CGAffineTransform.MakeRotation (Convert.DegToRad (-90));
                //this.View.Layer.AddSublayer (previewLayer);

                captureSession.CommitConfiguration ();
                captureSession.StartRunning ();
            } 
```

我尝试从样本缓冲区的图像缓冲区投射的 CVPixelBuffer 创建一个 CGBitmapContext，如下所示：

```
public override void DidOutputSampleBuffer (AVCaptureOutput captureOutput, MonoTouch.CoreMedia.CMSampleBuffer sampleBuffer, AVCaptureConnection connection)
    {

        CVPixelBuffer pixelBuffer = sampleBuffer.GetImageBuffer () as CVPixelBuffer;
        CVReturn flag = pixelBuffer.Lock (0);
        if(flag == CVReturn.Success)
        {
            CGBitmapContext context = new CGBitmapContext
                    (
                        pixelBuffer.BaseAddress,
                        pixelBuffer.Width,
                        pixelBuffer.Height,
                        8,
                        pixelBuffer.BytesPerRow, 
                        CGColorSpace.CreateDeviceRGB (), 
                        CGImageAlphaInfo.PremultipliedFirst
                        );

            UIImage image = new UIImage(context.ToImage());

            ProcessImage (image);

            pixelBuffer.Unlock(0);

        }else
            Debug.Print(flag.ToString()

        sampleBuffer.Dispose();
    } 
```

这会导致以下错误

```
<Error>: CGBitmapContextCreate: invalid data bytes/row: should be at least 2880 for 8 integer bits/component, 3 components, kCGImageAlphaPremultipliedFirst. 
```

即使对参数进行了一些调整，我也会在本机 Objective-c 中得到无效的句柄异常或段错误。

我也尝试过简单地使用 CVImageBuffer 创建一个 CIImage 并从中创建一个 UIImage ，如下所示：

```
public override void DidOutputSampleBuffer (AVCaptureOutput captureOutput, MonoTouch.CoreMedia.CMSampleBuffer sampleBuffer, AVCaptureConnection connection)
    {

        CIImage cImage = new CIImage(sampleBuffer.GetImageBuffer ());
        UIImage image = new UIImage(cImage);
        ProcessImage (image);

        sampleBuffer.Dispose();
    } 
```

这会导致初始化 CIImage 时出现异常：

```
NSInvalidArgumentException Reason: -[CIImage initWithCVImageBuffer:]: unrecognized selector sent to instance 0xc821d0 
```

老实说，这感觉像是 MonoTouch 的某种错误，但如果我遗漏了什么或者只是想以一种奇怪的方式做到这一点，请让我知道一些替代解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:43:59.547

此错误消息对此进行了解释：

```
<Error>: CGBitmapContextCreate: invalid data bytes/row: should be at least 2880 for 8 integer bits/component, 3 components, kCGImageAlphaPremultipliedFirst. 
```

宽度为 720 像素，每行 1084 字节，略高于每像素 1.5 字节 - 这不是 RGB24（每像素 3 字节），它是某种平面格式。

您可能想要检查`AVCaptureVideoDataOutput.AvailableVideoCVPixelFormatTypes`可用的像素格式，以查看是否有任何支持的格式更容易使用。

# javascript - 编辑文本框并以 HTML/Javascript 提交

> ID：13591666
> 
> 赞同：-5
> 
> 时间：2012-11-27T19:33:22.523
> 
> 标签：javascript, jquery, html, javascript-events

我的 HTML 文件中有一个文本框。它基本上是一个评论框。我希望它能够正常工作，使其正常处于禁用状态。但是当有人单击“编辑”按钮时，它应该允许他们修改文本框中的值。单击 EDIT 按钮时，我想显示一个新的 SUBMIT 按钮或将 EDIT 按钮更改为 SUBMIT 按钮本身。

有人可以给我一些示例代码。我知道代码会很简单，但是我对 javascript 很不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:36:04.723

```
<textarea id='disText' disabled="disabled"></textarea>
<button id='disAble'>Edit</button> 
```

JS：

```
$('button#disAble').on('click', function(){
    $('textarea#disText').prop('disabled', false);
    $(this).text('submit');
    //submit stuff
}); 
```

演示：http: [//jsfiddle.net/maniator/DKtxn/](http://jsfiddle.net/maniator/DKtxn/)

# c# - 使用图钉和对象将参数从一个页面传递到另一个页面

> ID：13591668
> 
> 赞同：1
> 
> 时间：2012-11-27T19:33:28.780
> 
> 标签：c#, silverlight, windows-phone-7, bing-maps, pushpin

我正在为 Windows Phone 7 构建一个应用程序，我需要在地图中打印图钉，所以我已经完成了。我从数据库响应中读取数据。

问题是......每个图钉都意味着一个地方，但我不知道如何将地方添加到图钉或将业务属性发送到其他页面，我将在一些文本块中将它们写下来。

```
void app_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        Place business = new Place();
        if (e.Error == null)
        {
            XDocument feedXml = XDocument.Parse(e.Result);
            foreach (var properties in feedXml.Descendants("RESULT"))
            {
                Pushpin p = new Pushpin();
                p.Location = new GeoCoordinate((double)properties.Element("LATITUDE"), (double)properties.Element("LONGITUDE"));
                p.Content = properties.Element("NAME").Value;
                p.Tap += new EventHandler<System.Windows.Input.GestureEventArgs>(pushPin_Tap);
                p.DoubleTap += new EventHandler<System.Windows.Input.GestureEventArgs>(pushPin_DoubleTap);

                business.Id = (int)properties.Element("ID");
                business.Category = properties.Element("CATEGORY").Value;
                business.Name = properties.Element("NAME").Value;
                business.Street = properties.Element("STREET").Value;
                business.City = properties.Element("CITY").Value;
                business.Neighborhood = properties.Element("NEIGHBORHOOD").Value;
                business.State = properties.Element("STATE").Value;
                business.ZipCode = properties.Element("ZIPCODE").Value;
                business.Country = properties.Element("COUNTRY").Value;
                business.Hours = properties.Element("HOURS").Value;
                business.Description = properties.Element("DESCRIPTION").Value;
                business.Images = properties.Element("IMAGES").Value;
                business.Latitude = (double)properties.Element("LATITUDE");
                business.Longitude = (double)properties.Element("LONGITUDE");
                business.Payment = "Nope";
                business.Distance = properties.Element("DISTANCE").Value;

                map1.Children.Add(p);

            }
        }
    } 
```

然后我使用该方法将一些参数发送到其他页面，但图钉值，而不是我需要的业务..

```
void pushPin_DoubleTap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        e.Handled = true;

        var businessinfo = ((FrameworkElement) sender).Tag as Place;

        /*if (businessinfo != null)
        {
            string name = businessinfo.Name;
            string category = businessinfo.Category;
            string address = businessinfo.Street;
            string distance = businessinfo.Distance;
            string payment = businessinfo.Payment;
            string hours = businessinfo.Hours;

            NavigationService.Navigate(new Uri(
            "/BusinessInfoPage.xaml?name=" + name + 
            "&category=" + category +
            "&address=" + address + 
            "&distance=" + distance + 
            "&payment=" + payment + 
            "&hours=" + hours, UriKind.Relative));

        }
         */

        NavigationService.Navigate(new Uri("/BusinessInfoPage.xaml?name=Oxxo&category=Convenience&address=Somewhere&distance=.005km&payment=Nothing&hours=8am to 9pm", UriKind.Relative));

    } 
```

有什么帮助或建议吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:05:06.593

您可以使用 PhoneApplicationService.Current.State 在页面之间存储和检索数据。例如在页面 A 中：

```
Place loc = new Place();
//fill the Place properties
PhoneApplicationService.Current.State["place"]=loc;
//Navigate to Page B 
```

在 OnNavigatedTo 内的页面 B 中：

```
Place place = PhoneApplicationService.Current.State["place"]; 
```

您可能希望在其中添加一些异常捕获，并确保状态集合中存在关键“引脚”。

Yo 还可以使用 App.xaml.cs 中的公共属性。

```
public Place place {get;set;} 
```

在页面 A 中：

```
var obj = App.Current as App;
obj.place = aPlace; //assumming aPlace is already created 
```

在页面 B 中，OnNavigatedTo：

```
var obj = App.Current as App;
aPlace = obj.place; //assuming you have aPlace declared before 
```

# c# - 返回每辆车的最高出价

> ID：13591669
> 
> 赞同：0
> 
> 时间：2012-11-27T19:33:34.547
> 
> 标签：c#, linq

我已经尝试了以下数据的各种分组选项，以便仅获得每辆车的最高出价记录，但没有成功。我想我忽略了显而易见的:-)

```
bidId, carID, bidamount, dateplaced, userID  
45 83 650 5/11/2012 4:15:07 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
43 83 625 5/11/2012 4:12:51 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
41 83 600 5/11/2012 3:36:31 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
39 83 575 2/11/2012 4:06:57 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
56 83 575 9/11/2012 10:35:25 a.m. 0b3c2ba5-1538-4557-a6c0-7de701fd83e7   
52 83 550 8/11/2012 1:40:37 p.m. 0b3c2ba5-1538-4557-a6c0-7de701fd83e7   
38 83 550 2/11/2012 3:58:53 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
37 83 525 2/11/2012 3:58:19 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
49 83 525 7/11/2012 1:40:37 p.m. 0b3c2ba5-1538-4557-a6c0-7de701fd83e7   
80 86 750 21/11/2012 3:17:53 p.m. 0b3c2ba5-1538-4557-a6c0-7de701fd83e7   
69 86 725 20/11/2012 2:09:52 p.m. 0b3c2ba5-1538-4557-a6c0-7de701fd83e7   
68 86 700 20/11/2012 2:09:33 p.m. 0b3c2ba5-1538-4557-a6c0-7de701fd83e7   
59 86 675 13/11/2012 2:38:12 p.m. 0b3c2ba5-1538-4557-a6c0-7de701fd83e7   
53 86 650 8/11/2012 10:35:25 a.m. 0b3c2ba5-1538-4557-a6c0-7de701fd83e7   
47 86 625 5/11/2012 5:45:08 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
46 86 600 5/11/2012 5:45:04 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
44 86 575 5/11/2012 4:15:02 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
42 86 550 5/11/2012 3:36:40 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
40 86 525 5/11/2012 3:33:36 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
66 89 675 15/11/2012 4:21:40 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
65 89 650 15/11/2012 4:21:36 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
64 89 625 15/11/2012 4:21:15 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
63 89 600 15/11/2012 4:18:10 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
62 89 575 15/11/2012 4:17:57 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
61 89 550 15/11/2012 4:17:54 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc   
60 89 525 15/11/2012 4:17:51 p.m. a5d383e0-0c2c-44cf-9da1-0ce364b1dbdc 
```

我不知道为什么这里的一些有经验的用户投票决定关闭它，因为@dbaseman 几乎回答了我的问题并理解了我在问什么。请重新打开，以便@dbaseman 可以完成他的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:36:53.063

您可以通过以下方式获取具有汽车 ID 和最高出价的匿名对象：

1.  分组依据`carID`
2.  选择分组键+ max by`bidamount`

* * *

```
var maxBids = collection.GroupBy(item => item.carID)
    .Select(grp => new { 
        carId = grp.Key, 
        maxBid = grp.Max(grpitems => grpitems.bidamount) 
     }); 
```

如果您愿意，可以从那里轻松转换为字典：

```
Dictionary<string, double> maxBidsByCar = 
    maxBids.ToDictionary(item => item.carId, item => item.maxBid); 
```

* * *

**编辑**

由于您需要用户，因此查询必须与上面有所不同——这里我按出价金额和放置日期排序，并取了第一个项目。

```
var maxBids = collection.GroupBy(item => item.carID)

     // select the max bids (here maxBid is the entire row)
    .Select(grp => new { 
        carId = grp.Key, 
        maxBid = grp.OrderByDescending(grpitems => grpitems.bidamount)
                      .ThenBy(grpitems => grpitems.dateplaced).First()
     })

     // flatten the query to just get the max bid amount and user ID
     .Select(item => new {
         carId = item.carId,
         maxBid = maxBid.bidamount,
         userId = maxBid.userID
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:37:04.110

试试这个：

```
var q = from n in table
        group n by n.bidamount, n.carID into g
        select g.OrderByDescending(t=>t.bidamount).First(); 
```

# javascript - 用茉莉花测试主干得到错误无法读取属性

> ID：13591671
> 
> 赞同：1
> 
> 时间：2012-11-27T19:33:36.090
> 
> 标签：javascript, backbone.js, jasmine

我编写 Backbone.Collection 来加载 JSON 文件并在 Backbone.View 中使用

这是我的 Backbone.Collection

```
class Backbone.Config extends Backbone.Collection

  initialize: (filename = 'settings') ->
    @_load(filename)

  # private load setting file
  _load: (filename) ->
    @fetch
      url : "/assets/backbone/config/#{filename}.json"
      error: (e,data) ->
        if data.status == 404
          throw "Exception: Cant find such a file #{filename}.json"
        else if data.status == 200
          throw "Exception: can't load json file. please check your JSON syntax"

  get: ->
    @.toJSON()[0] 
```

我在我的 Backbone.View 中使用它

像这样

```
 error: ->
     @displayMessage @config.get().form.display_message.error, 'red', 3000 
```

这很好，但是当我用茉莉花为它写测试时，

描述“事件”，->

```
 beforeEach ->
    @view.config       = new Backbone.Config()
    @successSpy        = sinon.spy @view, 'success'
    @errorSpy          = sinon.spy @view, 'error'
    @displayMessageSpy = sinon.spy @view, 'displayMessage'
    @confirmUnloadSpy  = sinon.spy @view, 'confirmUnload'
    @formChangedSpy    = sinon.spy @view, 'formChanged'
    @view.delegateEvents()

  it "success will called when 'ajax:success' is fired and form error has occured", ->
    @view.$el.trigger 'ajax:success', ['',{'error','','','error_message'}, '']
    expect(@successSpy).toHaveBeenCalled()

  it "fail ajax request, will call error method", ->
    @view.$el.trigger 'ajax:failure'
    expect(@errorSpy).toHaveBeenCalled()
    expect(@displayMessageSpy).toHaveBeenCalled()

  it 'confirmUnload called when page reloaded', ->
    @view.$el.trigger 'beforeunload'
    expect(@confirmUnloadSpy).toHaveBeenCalled()

  it 'when form changed, formChanged method call', ->
    @view.$el.trigger 'change'
    expect(@formChangedSpy).toHaveBeenCalled() 
```

但我在茉莉花中出错了

```
TypeError: Cannot read property 'form' of undefined 
```

所以，我的问题是

**为什么我在使用 Backbone.Collection 测试 Backbone.View 时出现错误？>**

# java - 使用 chronos-report-maven-plugin (Jmeter - Chronos) 显示每个响应结果

> ID：13591675
> 
> 赞同：2
> 
> 时间：2012-11-27T19:33:55.700
> 
> 标签：java, maven, jmeter

我正在使用 jmeter 和 maven 进行性能测试 (REST)。
在我的 pom 中，我有以下插件：

*   chronos-jmeter-maven-plugin：执行我的 jmx 项目
*   chronos-report-maven-plugin：使用性能指标创建报告站点

有时，有一些测试失败，我无法看到服务的响应是什么。有什么方法可以查看报告中的所有请求和响应？还是失败的回应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:03:45.133

配置部分应允许您启用响应和其他详细信息。尝试真实和真实。您能否在 pom 文件中包含插件的配置部分？

```
 <configuration>
                                <description>This is the description of the generated report</description>
                                <title>Report title</title>
                                <showaverage>false</showaverage>
                                <showpercentile>false</showpercentile>
                                <showinfotable>false</showinfotable>
                                <showtimeinfo>false</showtimeinfo>
                                <showsummary>true</showsummary>
                                <showdetails>false</showdetails>
                                <showresponse>true</showresponse>
                                <showhistogram>true</showhistogram>
                                <showthroughput>false</showthroughput>
                                <showgc>false</showgc>
                            </configuration> 
```

# javascript - 使用 javascript 或 D3.js 创建一个二维数组

> ID：13591676
> 
> 赞同：-1
> 
> 时间：2012-11-27T19:33:56.937
> 
> 标签：javascript, arrays, multidimensional-array, d3.js

我有 3 个单独的数组，我想将它们转换为一个二维数组，这样我就可以将它用于 D3.js

我拥有的数组示例：

```
var data1 = [ 0.10, 0.09, 0.08, 0.07, 0.06, ... ]; // series 1
var data2 = [ 0.10, 0.09, 0.08, 0.07, 0.06, ... ]; // series 2
var data3 = [ 0.10, 0.09, 0.08, 0.07, 0.06, ... ]; // series 3 
```

我想要的是：

```
var data = [
              [ 0.10, 0.09, 0.08, 0.07, 0.06, ... ], // series 1
              [ 0.10, 0.09, 0.08, 0.07, 0.06, ... ], // series 2
              [ 0.10, 0.09, 0.08, 0.07, 0.06, ... ]  // series 3
            ]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T19:35:58.873

这样做有什么问题吗？

```
data = [data1, data2, data3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:38:10.687

你可以这样做：

`var data = [data1, data2, data3]`

然而，这意味着如果你改变`data1`,`data2`或`data3`，你也会改变`data`。

你可以使用类似的东西：

`var data = [data1.slice(0), data2.slice(0), data3.slice(0)]`

如果您想修改`data1`,`data2`或`data3`之后不更改`data`.

# vb.net - 错误：属性访问必须分配给属性或使用其值

> ID：13591678
> 
> 赞同：1
> 
> 时间：2012-11-27T19:34:14.767
> 
> 标签：vb.net, properties

最近我被分配了一个家庭作业任务来创建我喜欢的任何程序，使用多态性、继承等，所以我的应用程序已经很远了，但我遇到了一个错误，上面写着：

> 属性访问必须分配给属性或使用其值。

我个人不知道这意味着什么，并且我附上了我的一些代码，错误正在构建：

```
If rdbRed.Checked And rdbChequredBlack.Checked And rdbVision.Checked And rdbTinted.Checked Then
            MiniCooperS.GetTotalCarPrice(MiniColour, MiniInterior, MiniPackages, MiniWindows)
Elseif... 
```

因此错误显示在此代码中的某处，我已经使用了几个小时，但似乎无法弄清楚..感谢您的帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:38:21.067

如果您的`getTotalCarPrice()`函数返回一个值（我假设它返回一个 int 或 String），则必须将该值分配给一个变量。IE。

```
dim carPrice As Integer
If rdbRed.Checked And rdbChequredBlack.Checked And rdbVision.Checked And rdbTinted.Checked Then
        carPrice = MiniCooperS.GetTotalCarPrice(MiniColour, MiniInterior, MiniPackages, MiniWindows)
Elseif...
Else carPrice = 0 
```

# vim - JSHint 不适用于 Vim

> ID：13591680
> 
> 赞同：1
> 
> 时间：2012-11-27T19:34:24.237
> 
> 标签：vim, jshint, pathogen

使用 Ubuntu 12。

我安装了jshint

```
sudo npm install jshint -g

which jshint 
```

显示 /usr/local/bin/jshint，它也在 PATH 变量中

然后，我下载了[https://github.com/walm/jshint.vim/blob/master/plugin/jshint.vim](https://github.com/walm/jshint.vim/blob/master/plugin/jshint.vim) 并将其放入 ~/.vim/bundle/jshint.vim （我正在使用 Pathogen）

现在，当打开一个 js-File 时，比如

```
vim test.js 
```

未检测到错误。

```
:JSHint 
```

导致“不是编辑器命令：JSHint”

```
:Helptags 
```

结果，好吧，什么都没有..无论如何，我真的不明白该命令的用途..

我是一个 vim 菜鸟，但其他病原体包似乎可以工作，所以我真的不知道这里有什么不工作..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T20:45:51.257

# laravel - 如何在 laravel 中链接两个表？

> ID：13591681
> 
> 赞同：0
> 
> 时间：2012-11-27T19:34:21.613
> 
> 标签：laravel, foreign-keys

我在尝试使用 laravel 将 user_id 链接到另一个表时遇到问题。我正在使用迁移，但似乎找不到我做错了什么。我不断收到错误..

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child 
row: a foreign key constraint fails (`ship`.`units`, CONSTRAINT 
`units_user_id_foreign` FOREIGN KEY(`user_id`) REFERENCES `users` (`id`))

SQL: INSERT INTO `units` (`unit`, `updated_at`, `created_at`) VALUES (?, ?, ?)

Bindings: array (
  0 => 'i987',
  1 => '2012-11-27 19:19:42',
  2 => '2012-11-27 19:19:42',
) 
```

这是我的迁移..

```
Schema::create('users', function($table) {
    $table->increments('id');
    $table->string('email');
    $table->string('unit');
    $table->string('password');
    $table->timestamps();  
});
Schema::create('units', function($table) {
    $table->engine = 'InnoDB';
    $table->increments('id');
    $table->string('unit');
    $table->integer('user_id')->unsigned();
    $table->foreign('user_id')->references('id')->on('users');
    $table->timestamps();  
}); 
```

我的用户模型...一个用户有一个单元

```
return $this->has_one('Unit'); 
```

我的单元模型...属于用户

```
return $this->belongs_to('User'); 
```

出于某种原因，每次我注册一个新用户时，它都会将单元表中的 user_id 默认为 0。当我创建一个新用户时，我希望单元表具有正确的 user_id，以便我可以将该用户和单元关联起来。你能看到我在这里做错了什么吗？

我的用户控制器...

```
User::create(array(
  'email' => Input::get('email'),
  'password' => Hash::make($password)
  ));

  Unit::create(array(
    'unit' => Input::get('unit');
  )); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T21:22:18.813

在您的单位迁移模式中，将外键设置为

```
//Unit Schema Migration
$table->integer('user_id');

//User Controller
$unit = new Unit( array('unit' => Input::get('unit')));
$user = User::create(array(
                      'email' => Input::get('email'),
                      'password'=>Hash::make($password)
                     ));

$unit = $user->unit()->insert($unit); 
```

# ruby-on-rails - Heroku 找不到捆绑程序错误

> ID：13591682
> 
> 赞同：1
> 
> 时间：2012-11-27T19:34:26.107
> 
> 标签：ruby-on-rails, ruby, bundler, ruby-1.8.7

我有一个使用 Ruby 1.8.7-p352 的旧 Rails 2.3.8 应用程序，我一直在尝试迁移到 Heroku 的雪松堆栈。开发中一切正常，部署顺利，但是当我尝试访问该站点时出现应用程序崩溃错误。

```
2012-11-27T19:16:08+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -p 58772 -e production`
2012-11-27T19:16:09+00:00 app[web.1]:   from /app/vendor/ruby-1.8.7/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
2012-11-27T19:16:09+00:00 app[web.1]:   from /app/vendor/ruby-1.8.7/lib/ruby/site_ruby/1.8/rubygems.rb:1231:in `gem'
2012-11-27T19:16:09+00:00 app[web.1]: /app/vendor/ruby-1.8.7/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [] (Gem::LoadError)
2012-11-27T19:16:09+00:00 app[web.1]:   from /app/vendor/bundle/1.8/bin/bundle:22
2012-11-27T19:16:10+00:00 heroku[web.1]: Process exited with status 1
2012-11-27T19:16:10+00:00 heroku[web.1]: State changed from starting to crashed 
```

这是因为不再支持 1.8.7，还是有修复？

编辑：添加我的 gemfile 以响应评论。

```
source :gemcutter

ruby "1.8.7"
gem "rails",   "2.3.8"
gem "bundler", "1.2.2"
gem "thin"
gem "pg" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:58:28.977

查看您的配置变量是否针对 ruby​​ 1.8.7 进行了更新：

[https://devcenter.heroku.com/articles/changeing-ruby-version-breaks-path](https://devcenter.heroku.com/articles/changing-ruby-version-breaks-path)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:14:49.247

[它应该适用于雪松。](https://devcenter.heroku.com/articles/stack)

您是否在 Gemfile 上指定了 ruby​​ 版本？

```
source "https://rubygems.org"
ruby "1.8.7"
# ... 
```

[有关 Heroku 文档的更多信息](https://devcenter.heroku.com/articles/ruby-versions)

# ruby-on-rails - 设计、模态、SSL 和登录视图

> ID：13591689
> 
> 赞同：0
> 
> 时间：2012-11-27T19:34:54.630
> 
> 标签：ruby-on-rails, ssl, devise

典型的“适用于本地开发但不适用于生产”......

此链接在开发中有效，但在生产中无效，因为......谁知道呢？

`<p><%= link_to "Login / Sign Up", new_user_session_path(:secure => true), class: "link", remote: true %></p>`

```
 Started GET "/login" for 38.116.199.130 at 2012-11-27 13:02:03 -0600
Processing by Devise::SessionsController#new as JS
Processing by CoursesController#index as HTML 
```

然而，在生产中什么也没有出现。

在链接中使用之前，`:secure => true`由于以下`Devise::SessionsController.ssl_required :new, :create`.

JS 中是否有一些安全协议说“如果原始链接也不在同一个 http 协议中，我不会在模式中显示链接？” 我只是猜测，但这是一个勾号。大喊“工作！” 也没有做任何事情，令人惊讶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:09:26.600

FWIW 我有 ssl_requirement 作为在 rails 3.2 应用程序中处理我的 SSL 的 gem。我忘记了force_ssl。添加[设计 wiki 上提到的内容](https://github.com/plataformatec/devise/wiki/How-To%3a-Use-SSL-%28HTTPS%29)有助于解决问题。现在视图仍然需要 7 秒才能显示出来……但至少它可以工作。

# c# - 如何在 WinRT 应用程序中保护 Google 的 clientSecret 和 clientID？

> ID：13591690
> 
> 赞同：2
> 
> 时间：2012-11-27T19:34:54.890
> 
> 标签：c#, windows-runtime, oauth-2.0, winrt-xaml

我正在开发一个使用 Google Tasks API 的 WinRT 应用程序。目前，ClientSecret 和 ClientID 字符串嵌入在代码中。但是，我读到应该避免这种情况，因为 Windows 8 应用程序很容易被逆向工程。

那么，有什么更好的方法来保证这些代币的安全呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:05:47.500

来自 Google 文档，在“已安装的应用程序”部分：

> 注册时获取的 client_id 和 client_secret 嵌入到你的应用程序的源代码中。在这种情况下，client_secret 显然不被视为秘密。

在此处阅读更多信息：[https ://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

# googletest - 如何告诉 Cppcheck 跳过头文件

> ID：13591696
> 
> 赞同：4
> 
> 时间：2012-11-27T19:35:17.920
> 
> 标签：googletest, cppcheck

Cppcheck 扫描项目文件夹中的所有文件：

```
c:\projectfolder\main.c
c:\projectfolder\file.c
c:\projectfolder\file.h
c:\projectfolder\file_test.cc 
```

`c:\projectfolder\file_test.cc`包含以下代码

```
#include "c:/gtest/gtest.h"

extern "C"
{
    #include "TMyStruct.h"
}

TEST(Stack, Overflow)
{
    TMyStruct unterTest;
    EXPECT_EQ(1, TMyStruct_Init(&unterTest));
    EXPECT_GE(unterTest.variable, 9000);
} 
```

文件`file_test.cc`包括 gtest.h 文件

```
C:\gtest\gtest.h 
```

不应测试 C:\gtest\ 中的所有文件。

我打电话

```
cppcheck.exe -ic:\gtest\ c:\projectfolder\ --enable=style --template="SomeError" 
```

发现并报告`c:\projectfolder\file_test.cc`来自包含的错误`gtest.h`（详细信息：“太多#ifdef 配置”）。

我如何告诉 Cppcheck 根本不看`C:\gtest\gtest.h`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T17:56:50.690

我是一名 Cppcheck 开发人员。我认为您不能跳过头文件。也许 -i 应该那样工作。

随时为此创建一张票：http: [//sourceforge.net/apps/trac/cppcheck/](http://sourceforge.net/apps/trac/cppcheck/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-12T17:45:34.253

我的项目结构如下所示：

```
├── build
├── lib
│   └── dep
│       └── dep.h
├── src
│   ├── code.c
│   └── code.h
└── tests
    └── code_test.c 
```

为了抑制`lib`包含警告，我这样做了：

```
cppcheck --enable=all --suppress='*:lib/*' -Isrc -Itests ./src ./tests 1>/dev/null 
```

也许这应该适用于Windows：

```
cppcheck.exe --suppress='*:c:\gtest\*' c:\projectfolder\ 
```

我的 Cppcheck 版本是 1.74。

参考：

*[允许忽略头文件的结果](http://trac.cppcheck.net/ticket/2964)*

# android - 如何在 Android 设备中创建类似于 RESTful WS 的东西以供内部使用？

> ID：13591697
> 
> 赞同：0
> 
> 时间：2012-11-27T19:35:21.113
> 
> 标签：android, rest, service, android-contentprovider

我正在开发一个 Android 应用程序，将其数据存储在通常的 SQLite DB 中。我必须将这些数据公开给我的应用程序（活动和服务）的组件以及其他应用程序。

不幸的是，在将这些数据存储到数据库之前以及将它们从数据库中取出之前，我必须以各种可能复杂的方式对这些数据进行操作。我必须编辑字段，从几行或几列聚合数据等等。也就是说：我必须执行您可以看到由许多商业智能程序和许多统计数据执行的典型“数据按摩”。

这意味着单独的 SQLite DB 太少了。我要做的不仅仅是简单的 CRUD。

内容提供商似乎也不是解决方案。典型的 Android CP 实现的接口非常非常类似于标准 CRUD，更重要的是，它始终返回游标（按行和列组织的临时数据表）。对于我的需要，它看起来太像一个非常薄的 SQL 数据库包装。我仍然需要了解我是否可以将我的业务逻辑放入 CP 本身，是否可以扩展外部 CP 接口（“内容：...”）并且天气这可以被认为是一个良好实践。

也许 Android 服务可以给我一种方法来公开我的功能，我可以将 SQLite DB（或包含 SQLite DB 的 CP）嵌入到服务中。我仍然必须了解这是否可以成为解决方案以及如何解决。

我真正需要的很可能是一个 RESTful Web 服务：

1.  存储数据的 SQL 数据库，是我的“事物”的核心
2.  接受动词（GET、PUT、POST 等）和单/复数名称（“People”、“John Doe”等）并返回“对象”（不一定是“Java 对象”）的接口。它们可能只是JSON 或 XML 文件/流）。该界面将是从外部可见的唯一层。
3.  中间，我的“业务逻辑”用来操作数据。

当然，标准 CP 与 RESTful WS 非常相似，很可能是我的问题的解决方案。我只是不明白一个 CP 是否足够灵活。例如，看起来 CP 只能接受类似 GET/PUT 的请求，并且除了游标之外它不能返回任何其他内容。

那么，您将使用什么来向应用程序的各个部分（活动）和其他应用程序公开非仅 CRUD 功能和非仅基本数据？

只是一个 Android 内容提供程序（也许在 CP 本身内编写您的业务逻辑）？

一个环绕 SQL DB（甚至环绕 CP）的 Android 服务？

还有什么？

哪种架构最优雅（“可维护”、“可扩展”、“灵活”、“开放”）？是否存在任何“最佳实践”？

您的考虑/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:23:45.840

好的，看起来在我的案例中使用的“正确”架构是 barn.gumbl 建议的架构：

1.  在最内层，使用 SQLite DB 来存储数据。
2.  使用 Android 内容提供程序包装 SQLite DB。这并不是真正需要的，但它几乎总是一个好主意，因为它使代码更加模块化。您可以从应用程序的任何活动/服务以及允许这样做的任何外部应用程序访问 CP。
3.  使用 Android 服务包装 CP。这是公开/发布与简单 CRUD 不同或更丰富的 API 的唯一方法（如我的情况）。这也是返回与游标对象不同的东西的唯一方法。

使用这种分层架构：

1.  您可以在读取或写入时对数据执行任何类型的操作
2.  您可以公开比 CP 允许的更丰富的 API
3.  你可以返回任何类型的对象

所有这一切同时仍然尊重 Android 架构（如果有权限，CP 和服务都可以被其他应用程序使用）。

就我而言，我需要以一种非常奇怪的方式聚合数据并返回一个表示聚合的对象。这是仅靠 CP 无法以优雅的方式完成的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:50:32.993

我不确定我是否对您的问题有很好的理解，但您似乎对交换 SQLite、CP、Service 有点困惑。通常他们并肩工作。也许它可以帮助你：[Google I/O 2010 - Android REST 客户端应用程序](http://www.youtube.com/watch?v=xHXn3Kg2IQE)。

我的建议/假设：

->Activity,POJOs -> 服务（HadlerThread（分离线程+消息队列））-> CP

# matlab - Matlab在二值图像中查找人物

> ID：13591700
> 
> 赞同：0
> 
> 时间：2012-11-27T19:35:32.643
> 
> 标签：matlab, image-processing, octave

我对 Matlab 很陌生，必须为实验室做一些工作。基本上我必须计算图像中人物的高度。我已经确定的人旁边有一些标记。所以现在我现在将图像转换为二进制图像：![在此处输入图像描述](../Images/5faf756d63e5cdfa9e172812f9a7e0b8.png)

我需要图片中每个人的 x 和 y 位置来将其与我已经找到的标记进行比较。如果我已经在该坐标附近找到了一个人，我尝试遍历图像并检查周围环境，但它不起作用，也不是非常“类似于 matlab”。（由于循环，性能也很差）

**注意：我不允许使用大多数“好或复杂”的功能，如 imfilter...（例如，我还必须将转换写入二进制图像）**

我不知道应该如何解决这个问题（除了我上面描述的方法）。我可以在这里发布我的代码，但我想这无助于回答这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:06:28.083

如果您可以使用内置插件（或自己编写），这就是我一直认为的部分解决方案。

首先，反转图像，使人为白色，背景为黑色。求所有行的总和。

```
data = sum(im); 
```

这将为您提供一些嘈杂的数据，显示每行中的像素数。如果你绘制它，山峰是人，山谷是他们之间的区域。但是会有很多假峰。要解决此问题，请使用卷积，例如：

```
data2 = conv(data,ones(1,50)/50,'same'); 
```

50 的大小似乎工作得很好。它可能因图像而异，但如果它们或多或少都像上面的那样，50 应该可以工作。

现在您应该有一组干净的数据显示人们所在的高峰（特别是人们的最高点）。您可以执行单个 for 循环来查找这些峰值。但是，在您越过山谷之前，不要开始寻找下一个高峰。如果它有帮助，您可以使用导数找到导数通过零的位置（这些是峰值和谷值）。

```
deriv = (data2(2:end)-data(1:end-1)); 
```

但是我发现导数上并不总是有字面上的零点，因此您将不得不寻找符号变化。

您还可以下载公共功能以自动查找峰值。

因此，假设您将峰值存储在一些矢量峰值中。现在您知道了人的 x 位置，因此隔离列并找到第一个非零值（人的头顶和 y 位置），然后从总列大小中减去它以找到高度。所以对于第一个峰值：

```
x = peaks[1];
y = find(im(:,x),1,'first');
height = size(im,1)-y; 
```

我认为这些方面的东西可能对你有用。你仍然需要做一些迭代，但不是很多。

# php - 哪些电子邮件提供商允许在电子邮件地址中使用 +？

> ID：13591702
> 
> 赞同：1
> 
> 时间：2012-11-27T19:35:40.520
> 
> 标签：php, regex, email, validation

> **可能重复：**
> [如何在 PHP 中验证电子邮件地址](https://stackoverflow.com/questions/12026842/how-to-validate-an-email-address-in-php)

我正在使用我的电子邮件地址验证器。

所以我一直在搜索，并注意到一些电子邮件允许在电子邮件中使用“+”，例如：hello+guys@email.com

Hotmail 不允许+，雅虎也不允许。 **你们知道哪些不允许吗？**我也想知道， **也许有一些旧的 hotmail/yahoo/etc 帐户实际上包含 + 字符？**

你怎么看？我不希望我的脚本拒绝带有 + 的电子邮件（如果它们确实存在）...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:39:30.517

[在http://en.wikipedia.org/wiki/Email_address](http://en.wikipedia.org/wiki/Email_address)的语法下有一个有效的电子邮件字符列表，如果不去每个邮件客户端并测试每个字符和电子邮件，就无法知道谁允许什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:55:22.217

原因 yahoo，hotmail 不允许它，因为它也用作用户名，并可能导致意外错误。我不认为那里有很多人在电子邮件中使用 +，这不是限制您的用户群的原因。

# python - 在 lxml 中定义默认命名空间（无前缀）

> ID：13591707
> 
> 赞同：2
> 
> 时间：2012-11-27T19:36:01.387
> 
> 标签：python, xslt, xhtml, namespaces, lxml

当使用 lxml 渲染 XHTML 时，一切都很好，除非您碰巧使用 Firefox，它似乎无法处理以命名空间为前缀的 XHTML 元素和 javascript。虽然 Opera 能够很好地执行 javascript（这适用于 jQuery 和 MathJax），但无论 XHTML 命名空间是否有前缀（`h:`在我的情况下），在 Firefox 中脚本都会中止并出现奇怪的错误*`this.head`（*在MathJax 的例子）。

我知道这个`register_namespace`函数，但它既不接受`None`也不`""`作为命名空间前缀。`_namespace_map`我在模块中听说过`lxml.etree`，但是我的 Python 抱怨这个属性不存在（版本问题？）

有没有其他方法可以删除 XHTML 命名空间的命名空间前缀？请注意`str.replace`，正如对另一个相关问题的回答所建议的那样，这*不是*我可以接受的方法，因为它不了解 XML 语义并且可能很容易搞砸生成的文档。

根据要求，您会发现两个可以使用的示例。一种带有[命名空间前缀](http://sotecware.net/files/persistent/so-lxml-xhtml/js-test-prefixed.xhtml)，[一种没有](http://sotecware.net/files/persistent/so-lxml-xhtml/js-test.xhtml). 第一个将在 Firefox 中显示 0（错误），第二个将显示 1（正确）。Opera 将同时渲染两者正确。这显然是[一个 Firefox 错误](https://bugzilla.mozilla.org/show_bug.cgi?id=492933)，但这只是作为希望使用 lxml 的无前缀 XHTML 的理由——还有其他很好的理由可以减少移动客户端的流量等（`h:`如果您考虑数十或数百个 html 标签，甚至会相当多） .

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-07T01:50:42.193

使用`ElementMaker`并给它一个`nsmap`映射`None`到您的默认命名空间的映射。

```
#!/usr/bin/env python
# dogeml.py

from lxml.builder import ElementMaker
from lxml import etree

E = ElementMaker(
    nsmap={
        None: "http://wow/"    # <--- This is the special sauce
    }
)

doge = E.doge(
    E.such('markup'),
    E.many('very namespaced', syntax="tricks")
)

options = {
    'pretty_print': True,
    'xml_declaration': True,
    'encoding': 'UTF-8',
}

serialized_bytes = etree.tostring(doge, **options)
print(serialized_bytes.decode(options['encoding'])) 
```

正如您在此脚本的输出中看到的那样，定义了默认命名空间，但标签没有前缀。

```
<?xml version='1.0' encoding='UTF-8'?>
<doge xmlns="http://wow/">
   <such>markup</such>
   <many syntax="tricks">very namespaced</many>
</doge> 
```

我已经使用 Python 2.7.6、3.3.5 和 3.4.0 以及 lxml 3.3.1 测试了这段代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:43:24.363

[此 XSL 转换](http://wiki.tei-c.org/index.php/Remove-Namespaces.xsl)从 中删除所有前缀`content`，同时保留根节点中定义的命名空间：

```
import lxml.etree as ET

content = '''\
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<h:html xmlns:h="http://www.w3.org/1999/xhtml" xmlns:ml="http://foo">
  <h:head>
    <h:title>MathJax Test Page</h:title>
    <h:script type="text/javascript"><![CDATA[
      function test() {
        alert(document.getElementsByTagName("p").length);
      };
    ]]></h:script>
  </h:head>
  <h:body onload="test();">
    <h:p>test</h:p>
    <ml:foo></ml:foo>
  </h:body>
</h:html>
'''
dom = ET.fromstring(content)

xslt = '''\
<xsl:stylesheet version="1.0"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="no"/>

<!-- identity transform for everything else -->
<xsl:template match="/|comment()|processing-instruction()|*|@*">
    <xsl:copy>
      <xsl:apply-templates />
    </xsl:copy>
</xsl:template>

<!-- remove NS from XHTML elements -->
<xsl:template match="*[namespace-uri() = 'http://www.w3.org/1999/xhtml']">
    <xsl:element name="{local-name()}">
      <xsl:apply-templates select="@*|node()" />
    </xsl:element>
</xsl:template>

<!-- remove NS from XHTML attributes -->
<xsl:template match="@*[namespace-uri() = 'http://www.w3.org/1999/xhtml']">
    <xsl:attribute name="{local-name()}">
      <xsl:value-of select="." />
    </xsl:attribute>
</xsl:template>
</xsl:stylesheet>
'''

xslt_doc = ET.fromstring(xslt)
transform = ET.XSLT(xslt_doc)
dom = transform(dom)

print(ET.tostring(dom, pretty_print = True, 
                  encoding = 'utf-8')) 
```

产量

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>MathJax Test Page</title>
    <script type="text/javascript">
      function test() {
        alert(document.getElementsByTagName("p").length);
      };
    </script>
  </head>
  <body onload="test();">
    <p>test</p>
    <ml:foo xmlns:ml="http://foo"/>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-16T00:54:38.167

要扩展@neirbowj 的答案，但使用 ET.Element 和 ET.SubElement，并使用混合命名空间呈现文档，其中根恰好是显式命名空间，而子元素 ( `channel`) 是默认命名空间：

```
# I set up but don't use the default namespace:
root = ET.Element('{http://www.w3.org/1999/02/22-rdf-syntax-ns#}RDF', nsmap={None: 'http://purl.org/rss/1.0/'})
# I use the default namespace by including its URL in curly braces:
e = ET.SubElement(root, '{http://purl.org/rss/1.0/}channel')
print(ET.tostring(root, xml_declaration=True, encoding='utf8').decode()) 
```

这将打印出以下内容：

```
<?xml version='1.0' encoding='utf8'?>
<rdf:RDF xmlns="http://purl.org/rss/1.0/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><channel/></rdf:RDF> 
```

它自动使用 rdf 作为 RDF 命名空间。我不确定它是如何计算出来的。如果我想指定它，我可以将它添加到根元素中的 nsmap 中：

```
nsmap = {None: 'http://purl.org/rss/1.0/',
         'doge': 'http://www.w3.org/1999/02/22-rdf-syntax-ns#'}
root = ET.Element('{http://www.w3.org/1999/02/22-rdf-syntax-ns#}RDF', nsmap=nsmap)
e = ET.SubElement(root, '{http://purl.org/rss/1.0/}channel')
print(ET.tostring(root, xml_declaration=True, encoding='utf8').decode()) 
```

...我明白了：

```
<?xml version='1.0' encoding='utf8'?>
<doge:RDF xmlns:doge="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://purl.org/rss/1.0/"><channel/></doge:RDF> 
```

# objective-c - 无法从 TabView 连接到 IBOutlet

> ID：13591716
> 
> 赞同：-1
> 
> 时间：2012-11-27T19:36:34.217
> 
> 标签：objective-c, xcode, macos, cocoa

我有一个带有选项卡视图的 NSWindow，其中一个选项卡是一个 NSTable。我正在尝试从 File's Owner 连接到我的表 ( `IBOutlet NSTabView *addedAccountsTable;`)，但我不能！它不断将我连接到它所在的 TabView。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:44:44.127

将您的出口从 更改`NSTabView`为`NSTableView`; 您很可能能够建立联系。

# java - maven 编译失败 - 找不到符号

> ID：13591717
> 
> 赞同：3
> 
> 时间：2012-11-27T19:36:34.670
> 
> 标签：java, maven, gwt, compiler-errors, vaadin

我正在尝试从 jar 文件（存在于我的 Maven 依赖项中）扩展类，并且我需要访问它的内部类。为了解决这个问题，我在我的项目中将包命名为超类的包。Eclipse 似乎对此没有问题，但 Maven 编译器只是看不到那些内部类。我能用这个做些什么吗？

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
xmlns:xsi="http://www.w3.org/2001/ XMLSchema-instance" 
xsi:schemaLocation="http://
maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.company.app</groupId>
<artifactId>app-gantt</artifactId>
<packaging>jar</packaging>
<version>1.0</version>
<name>AppGantt</name>

<properties>
   <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
   <vaadin.version>6.8.3</vaadin.version>
   <gwt.version>2.3.0</gwt.version>
   <gwt.plugin.version>2.2.0</gwt.plugin.version>
</properties>

<build>
  <plugins>
   <plugin>
     <groupId>org.apache.maven.plugins</groupId>
     <artifactId>maven-compiler-plugin</artifactId>
     <version>3.0</version>
     <configuration>
       <source>1.7</source>
       <target>1.7</target>
     </configuration>
  </plugin>

  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.3.1</version>
    <configuration>
      <archive>
        <index>true</index>
        <manifest>
          <addClasspath>true</addClasspath>
          <!-- Implementation-Title and Implementation-Version come from the POM by default -->
          <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
        </manifest>
        <manifestEntries>
          <!-- Package format version - do not change -->
          <Vaadin-Package-Version>1</Vaadin-Package-Version>

          <!-- Add-on specific fields to update -->

          <!-- Implementation-Title and Implementation-Version come from the POM by default -->
          <!--
            <Implementation-Title>${pom.name}</Implementation-Title>
            <Implementation-Version>${pom.version}</Implementation-Version>
          -->

          <!-- Comma-separated list of widgetsets in the package -->
          <Vaadin-Widgetsets>com.company.app.gantt.gwt.AppGanttWidgetset</Vaadin-Widgetsets>
        </manifestEntries>
      </archive>
    </configuration>
  </plugin>

  <!-- Compiles your custom GWT components with the GWT compiler -->
  <!-- A hosted mode browser for client-side widget debugging can be run with the goal gwt:run after uncommenting the 
    correct line below. A remote debugger can then be connected to port 8998\. Note that e.g. a Jetty server should be running 
    with the server side parts - use the goal jetty:run . -->
  <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <version>${gwt.plugin.version}</version>
    <configuration>
      <!-- if you don't specify any modules, the plugin will find them -->
      <modules>
          <module>com.company.app.gantt.gwt.AppGanttWidgetset</module>
      </modules>
      <webappDirectory>${project.build.directory}/${project.build.finalName}/VAADIN/widgetsets</webappDirectory>
      <!-- On Mac running Snow Leopard, add "-d32" -->
      <!-- This causes error messages (but build works) in phase "package": two processes would use the same debug 
        port -->
      <!--extraJvmArgs>-Xmx512M -Xss1024k -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8998</extraJvmArgs -->
      <extraJvmArgs>-Xmx512M -Xss1024k</extraJvmArgs>
      <runTarget>app-gantt</runTarget>
      <hostedWebapp>${project.build.directory}/${project.build.finalName}</hostedWebapp>
      <noServer>true</noServer>
      <port>8080</port>
      <compileReport>false</compileReport>
    </configuration>
    <executions>
      <execution>
        <goals>
          <goal>resources</goal>
          <goal>compile</goal>
        </goals>
      </execution>
    </executions>
    <dependencies>
      <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-dev</artifactId>
        <version>${gwt.version}</version>
      </dependency>
      <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>${gwt.version}</version>
      </dependency>
    </dependencies>
  </plugin>
  <plugin>
    <groupId>com.vaadin</groupId>
    <artifactId>vaadin-maven-plugin</artifactId>
    <version>1.0.2</version>
    <executions>
      <execution>
        <configuration>
            <modules>
                <module>com.company.app.gantt.gwt.AppGanttWidgetset</module>
            </modules>
        </configuration>
        <goals>
          <goal>update-widgetset</goal>
        </goals>
      </execution>
    </executions>
  </plugin>

  <!-- A simple Jetty test server at http://localhost:8080/app-gantt can be launched with the Maven goal jetty:run 
    and stopped with jetty:stop -->
  <plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <version>6.1.24</version>
    <configuration>
      <stopPort>9966</stopPort>
      <stopKey>app-gantt</stopKey>
      <!-- Redeploy every x seconds if changes are detected, 0 for no automatic redeployment -->
      <scanIntervalSeconds>0</scanIntervalSeconds>
      <!-- make sure Jetty also finds the widgetset -->
      <webAppConfig>
        <contextPath>/app-gantt</contextPath>
        <baseResource implementation="org.mortbay.resource.ResourceCollection">
          <!-- Workaround for Maven/Jetty issue http://jira.codehaus.org/browse/JETTY-680 -->
          <!-- <resources>src/main/webapp,${project.build.directory}/${project.build.finalName}</resources> -->
          <resourcesAsCSV>src/main/webapp,${project.build.directory}/${project.build.finalName}</resourcesAsCSV>
        </baseResource>
      </webAppConfig>
    </configuration>
  </plugin>
</plugins>

      <!-- This is needed for the sources required by the GWT compiler to be included in the produced JARs -->
      <resources>
        <resource>
          <directory>src/main/java</directory>
        </resource>
        <resource>
          <directory>src/main/resources</directory>
        </resource>
      </resources>

      <pluginManagement>
      ...
      </pluginManagement>
    </build>

    <repositories>
    ...
    </repositories>

    <pluginRepositories>
    ...
    </pluginRepositories>

    <dependencies>
      <dependency>
        <groupId>com.vaadin</groupId>
        <artifactId>vaadin</artifactId>
        <version>${vaadin.version}</version>
      </dependency>
      <dependency> 
    <groupId>org.vaadin.addons</groupId> 
    <artifactId>contextmenu</artifactId> 
    <version>3.1.0</version> 
  </dependency> 
  <dependency> 
    <groupId>joda-time</groupId> 
    <artifactId>joda-time</artifactId> 
    <version>2.0</version> 
  </dependency> 
  <dependency> 
    <groupId>ru.bazon</groupId> 
    <artifactId>pstring</artifactId> 
    <version>0.0.1.0</version> 
  </dependency>
  <dependency> 
    <groupId>org.vaadin.addons</groupId> 
    <artifactId>gwt-graphics</artifactId> 
    <version>1.0.0</version> 
  </dependency> 
      <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>${gwt.version}</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
        <scope>provided</scope>
      </dependency>
      <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
        <classifier>sources</classifier>
        <scope>provided</scope>
  </dependency>

    </dependencies>
</project> 
```

错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.0:compile (default-compile) on project app-gantt: Compilation failure: Compilation failure:
[ERROR] /D:/App/workspace/folder ze spacjami/app/app-widget-gantt/app-gantt/src/main/java/com/vaadin/terminal/gwt/client/ui/VGanttTreeTable.java:[103,56] cannot find symbol
[ERROR] symbol:   class VTreeTableScrollBody
[ERROR] location: class com.vaadin.terminal.gwt.client.ui.VGanttTreeTable
[ERROR] /D:/App/workspace/folder ze spacjami/app/app-widget-gantt/app-gantt/src/main/java/com/vaadin/terminal/gwt/client/ui/VGanttTreeTable.java:[100,24] incompatible types
[ERROR] required: com.vaadin.terminal.gwt.client.ui.VScrollTable.VScrollTableBody
[ERROR] found:    com.vaadin.terminal.gwt.client.ui.VGanttTreeTable.VGanttTreeTableScrollBody
[ERROR] /D:/App/workspace/folder ze spacjami/app/app-widget-gantt/app-gantt/src/main/java/com/vaadin/terminal/gwt/client/ui/VGanttTreeTable.java:[111,17] method does not override or implement a method from a supertype
[ERROR] /D:/App/workspace/folder ze spacjami/app/app-widget-gantt/app-gantt/src/main/java/com/vaadin/terminal/gwt/client/ui/VGanttTreeTable.java:[244,47] bad operand types for binary operator '!='
[ERROR] first type:  com.vaadin.terminal.gwt.client.ui.VGanttTreeTable.VGanttTreeTableScrollBody
[ERROR] second type: <nulltype>
    .... 
```

我正在尝试编辑[https://vaadin.com/directory#addon/vaadin-gantt-diagram](https://vaadin.com/directory#addon/vaadin-gantt-diagram)并将其作为 maven 模块添加到另一个项目中。这个插件（VGanttTreeTable）中的一个类以我之前描述的方式从vaadin jar（VTreeTable）扩展类。

# c# - 如何返回不在给定列表中的实体列表

> ID：13591727
> 
> 赞同：1
> 
> 时间：2012-11-27T19:36:58.867
> 
> 标签：c#, nhibernate, nhibernate-criteria

在`NHibernate`中，如何返回不在给定列表中的实体列表？

假设我有一个`Client`实体，并且定义了一个名为`IList<Client> notInClients`. 我知道我希望我的 sql 变成这样：

```
SELECT *
FROM Clients c1
WHERE c1.ClientId NOT IN (
    SELECT *
    FROM Clients c2
    WHERE c2.ClientId IN ('1', '2', '3', '4')
) 
```

我假设我需要为此使用 a `DetachedCriteria`。也许是这样的：

```
var clients = session.CreateCriteria("c1")
    .Add(
        Subqueries.PropertyNotIn("c1.ClientId",
            DetachedCriteria.For<Client>("c2").HOW_DO_I_ADD_MY_LIST))); 
```

我想我只是不确定如何构建我的子查询。我在这方面走的是正确的道路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:41:46.000

弄清楚了：

```
var notGuids = from c in notClients
               select c.ClientId;

var clients = unitOfWork.Session.CreateCriteria(typeof(Client))
    .Add(Expression.Not(Expression.In("ClientId", notGuids.ToArray()))).List<Client>(); 
```

# sql - SQL In 子句多列

> ID：13591732
> 
> 赞同：5
> 
> 时间：2012-11-27T19:37:08.703
> 
> 标签：sql, multiple-columns, in-clause, in-operator

```
SELECT *
FROM Tabl tabb
WHERE (tabb.col1, tabb.col2) IN ( (1,2), (3,4)) 
```

以上在 Oracle 中有效，但我试图在专有 SQL 引擎中运行，该引擎不支持上述在 IN 中具有多列的查询格式。

我试图在数据库中找到 1,2 和 3,4 的组合。

请帮助我实现上述目标的任何替代方案。

我正在寻找从 Java 一次性传递 col1 和 col2 值列表的方法，因此 '=' 可能不是一个选项，因为它可能需要两个 SQL 语句才能实现上述目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:39:19.727

这个怎么样？

```
SELECT
    *
FROM
    Tabl tabb
WHERE
    (tabb.col1 = 1 AND tabb.col2 = 2) OR
    (tabb.col1 = 3 AND tabb.col2 = 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:41:07.100

你可以这样做：

```
SELECT *
FROM Tabl tabb
inner join (
    select 1 a, 2 b 
    union select 3, 4
) x
on tabb.col1 = x.a
and tabb.col2 = x.b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T21:57:29.283

如果是数字列并且假设值被限制在特定范围内，则可以使用某些公式将更多值打包到一个数字中

例如假设 col1 和 col2 的值是从 1 到 1000 公式

```
 N = 10000 * col1 + col2 
```

可以使用，在示例中选择将是

```
 SELECT * FROM Tabl tabb WHERE (10000 * tabb.col1 + tabb.col2) IN ( 10002, 30004) 
```

通常，字符串连接可用于组合多个列值，例如

```
 SELECT * FROM Tabl tabb WHERE (tabb.col1||"&"||tabb.col2) IN ( "1&2", "3&4") 
```

# php - 如何在 symfony 1.4 中破坏对象？

> ID：13591733
> 
> 赞同：0
> 
> 时间：2012-11-27T19:37:18.783
> 
> 标签：php, object, memory, symfony-1.4, doctrine-1.2

> **可能重复：**
> [php/symfony/doctrine 内存泄漏？](https://stackoverflow.com/questions/2097744/php-symfony-doctrine-memory-leak)

我需要知道是否有办法在 symfony 1.4 中销毁对象，因为我有一个`for`插入数据库的 cicle。

```
foreach ($array_data as $payroll_employee)
{
  $discounts = new PayrollDiscounts();
  $discounts->setPayrollId($payroll_id);
  $discounts->save();
  $discounts->free(TRUE);
  unset($discounts);
} 
```

并显示此错误：

> 致命错误：允许的内存大小为 134217728 字节已用尽

所以我需要知道一种传递记忆的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:42:45.497

我发现让 Symfony 释放内存可能很棘手，尽管您可以尝试设置`$discounts = null;`而不是取消设置（请参阅[使用 PHP 释放内存的好处：unset() 或 $var = null](https://stackoverflow.com/questions/584960/whats-better-at-freeing-memory-with-php-unset-or-var-null)）。

对于像这样的简单批量插入，我建议使用 SQL（最好是 PDO）而不是 Doctrine 进行插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:43:24.810

Using`unset()`将专门释放与变量关联的内存，但是我怀疑`$discounts`变量的设置是您遇到内存分配问题的地方，因为它会在每次循环时被覆盖。本身是不是`$array_data`太大了？对象上执行的方法之一是否会`$discounts`导致问题？

尝试在代码中设置一些断点，以更好地找到遇到内存问题的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T22:55:47.523

我在这些链接中找到了解决方案：

[php/symfony/doctrine 内存泄漏？](https://stackoverflow.com/questions/2097744/php-symfony-doctrine-memory-leak/4066680#4066680)

感谢您的所有建议！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T19:43:44.213

你可以在 PHP 中使用`unset()`. 这就是你已经在做的事情。

为了增加可用内存 - 您必须设置 PHP 配置值

`memory_limit`

到更大的数量。

# eclipse - 如何让 JSLint 错误显示在 Eclipse 问题视图中？

> ID：13591734
> 
> 赞同：1
> 
> 时间：2012-11-27T19:37:18.060
> 
> 标签：eclipse, eclipse-plugin, aptana, jslint

我已经在 Eclipse（实际上是 STS 3.0）中安装了 Aptana Studio 3 Plugin (v3.2.2) 以用于 JSLint 集成。当我打开一个特定的 JavaScript 文件时，任何错误/警告都会很好地显示为标记。我还希望 JSLint 在构建时运行并在 Eclipse 的问题视图中显示其输出，就像 Java 构建错误/警告一样。如何启用此功能？

# node.js - 我可以在 Cakefile 中为单独的任务设置单独的选项吗？

> ID：13591735
> 
> 赞同：0
> 
> 时间：2012-11-27T19:37:25.560
> 
> 标签：node.js, coffeescript

我看到的 Cakefiles 的文档似乎是一个例子，这是一个典型的例子：

```
option '-v', '--verbose [TRUE|FALSE]', 'Turn verbosity on/off (off by default)'
task 'spec', 'run specs', (options) ->
  jasmine = require 'jasmine-node'
  # ... 
```

但是当我想要这个时会发生什么：

```
option '-v', '--verbose [TRUE|FALSE]', 'Turn verbosity on/off (off by default)'
task 'spec', 'run specs', (options) ->
  jasmine = require 'jasmine-node'
  # ...

option '-d', '--directory [PATH]', 'specific directory to set up the widget in'
task 'createWidgets', 'create the widgets', (options) ->
  console.log options.verbose 
```

选项特定于文件，而不是任务，这意味着 (a) 选项会渗透到文件中的所有任务中，并且 (b) 在运行时`cake`，用户不清楚哪些选项与哪些任务相关联。

如何将选项与特定任务相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:10:17.073

无法通过提供的任何功能添加特定于任务的选项`cake.coffee`- 如果您查看[源代码](http://coffeescript.org/documentation/docs/cake.html)，您会看到选项是全局处理的。您*可以*自己编写该代码，通过编写读取节点的[`process.argv`](http://nodejs.org/api/process.html#process_process_argv). 然而，`cake.coffee`它确实是一个非常简单的构建工具，除了最简单的构建系统之外，我不会推荐它。你可能想看看类似`rake`或`make`代替的东西。

# gcc - 为什么 GCC 不生成分辨率丢失警告？

> ID：13591737
> 
> 赞同：1
> 
> 时间：2012-11-27T19:37:33.673
> 
> 标签：gcc

考虑以下代码片段：

```
long long someVar64 = 0LL;
int someVar32 = someVar64; 
```

如果不明显，这里有一个潜在的错误，即 64 位值被分配给 32 位值，导致位丢失。在这种情况下，这很好，因为我们不关心 0 的高位，但是如果我更改常量，我很容易创建一个错误。

为什么 GCC (4.4.3) 不为此代码生成警告？我记得以前的旧版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T22:54:04.300

此警告由 -Wconversion 启用。请注意，它不是由 -Wall 或 -Wextra 启用的。

> -W转换
> 
> 警告可能改变值的隐式转换。这包括实数和整数之间的转换，例如`abs (x)`x 为 double 时；有符号和无符号之间的转换，比如 `unsigned ui = -1;`和到更小类型的转换，比如`sqrtf (M_PI).`
> 
> 不要警告像`abs ((int) x)`and这样的显式强制转换`ui = (unsigned) -1`，或者如果值没有被像 in 这样的转换改变`abs (2.0)`。
> 
> [...]

来源： http: [//gcc.gnu.org/onlinedocs/gcc-4.8.1/gcc/Warning-Options.html#Warning-Options](http://gcc.gnu.org/onlinedocs/gcc-4.8.1/gcc/Warning-Options.html#Warning-Options)

# php - PHP Regex 在 WP Caption 中获取文本

> ID：13591749
> 
> 赞同：1
> 
> 时间：2012-11-27T19:38:19.973
> 
> 标签：php, regex, wordpress

我在 WP 中有字幕，我需要从中提取文本。

最初，它们看起来像这样：

```
[caption id="attachment_16689" align="aligncenter" width="754"]<a href="http://www.site.com/" target="_blank"><img class=" wp-image-16689 " title="Title" src="http://site.com/wp-content/uploads/2012/11/image.jpg" alt="" width="754" height="960" /></a> I want to get this text out of here.[/caption] 
```

我可以去掉图像和标签：

```
$c = preg_replace(array("/<img[^>]+\>/i", "/<a[^>]*>(.*)<\/a>/iU"), "", $caption); 
```

留下：

```
[caption id="attachment_16689" align="aligncenter" width="754"] I want to get this text out of here.[/caption] 
```

我希望能够从标题中取出文本，留下“我想把这段文字从这里取出。”。我尝试了许多不同的表达方式，但没有一个可以开始工作。在上面的代码之后，我有：

```
preg_replace('/(\[caption.*])(.*)(\[/caption\])/', '$1$3', $c); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:51:22.587

见下文，您实际上想用第二个主题替换。此外，您还有一些错误转义的反斜杠。

```
$caption = '[caption id="attachment_16689" align="aligncenter" width="754"]<a href="http://www.site.com/" target="_blank"><img class=" wp-image-16689 " title="Title" src="http://site.com/wp-content/uploads/2012/11/image.jpg" alt="" width="754" height="960" /></a> I want to get this text out of here.[/caption]';

$c = preg_replace(array("/<img[^>]+\>/i", "/<a[^>]*>(.*)<\/a>/iU"), "", $caption);
$c = preg_replace('%(\\[caption.*])(.*)(\\[/caption\\])%', '$2', $c); 
```

您还可以通过将标题替换添加到数组中来进一步缩小它。只要确保第二个参数也是一个数组`array('','','$2')`

```
$caption = '[caption id="attachment_16689" align="aligncenter" width="754"]<a href="http://www.site.com/" target="_blank"><img class=" wp-image-16689 " title="Title" src="http://site.com/wp-content/uploads/2012/11/image.jpg" alt="" width="754" height="960" /></a> I want to get this text out of here.[/caption]';

$c = preg_replace(array("/<img[^>]+\>/i", "/<a[^>]*>(.*)<\/a>/iU",'%(\\[caption.*])(.*)(\\[/caption\\])%'), array('','','$2'), $caption); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:43:54.433

```
$string = '[caption id="attachment_16689" align="aligncenter" width="754"] I want to get this text out of here.[/caption]';

preg_match("/\[caption.*\](.*?)\[\/caption\]/",$string,$matches);
$caption_text = $matches[1];
echo $caption_text; 
```

# python - 适当的独角兽发射

> ID：13591755
> 
> 赞同：0
> 
> 时间：2012-11-27T19:38:39.847
> 
> 标签：python, security, gunicorn

我用类似的命令启动 gunicorn`gunicorn -c gunicorn.py main:app`

内容`gunicorn.py`为：

```
bind = "unix:/tmp/mysock.sock"
workers = 3
backlog = 2048
worker_class = "sync"
#worker_class = "gevent"
debug = False
daemon = True
pidfile = "/tmp/mypid.pid"
logfile = "/tmp/mylog.log"
user = 'www-data' # only under sudo 
```

最后一行我无法使用上面的命令。如果我添加 sudo 并启动它`sudo gunicorn -c gunicorn.py main:app`，主进程将从 root 运行，这对安全性不利。如何正确启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:15:13.707

我想，最好的方法是在 www-data 用户下运行 gunicorn，使用 sudo 你可以这样做：

```
sudo -u www-data gunicorn -c gunicorn.py main:app 
```

要运行此命令，您需要是 root，或者知道 www-data 用户密码。

# java - 在Java中添加数组的多维数组

> ID：13591756
> 
> 赞同：2
> 
> 时间：2012-11-27T19:38:49.777
> 
> 标签：java, arrays

我猜这是一个n00b问题，但这里有。作为我的 CS 学位作业的一部分，我们遇到了以下问题，但是，我就是不知道从哪里开始。我想，在先完成所有其他问题后，我的头有点炸了，因为通常我可以很快解决这些问题！

**编写一个初始化两个二维数组的程序**

```
int arrayA[][] = {{1,4,3,5},{3,8,1,2},{4,3,0,2},{0,1,2,7}};
int arrayB[][] = {{6,1,0,8},{3,2,1,9},{5,4,2,9},{6,5,2,0}}; 
```

**程序应该添加数组并将结果放入第三个二维数组。

*例如，如果 A = {{1,2},{3,4}} 且 B = {{5,6},{7,8}}，则 C = A + B = {{1 + 5, 2 + 6 }, {3 + 7, 4 + 8}} = {{6, 8},{10, 12}}*

我们还没有真正详细地触及多维数组，这就是我卡住的地方。请不要给我问题的答案，这不会帮助我学习，但是如果有人可以就解决这个问题的一般方向给出一些指示，那将是一个很大的帮助。到目前为止，我一直在尝试将 4 个数组的初始数组拆分为 4 个一维数组，然后使用 for 循环执行计算，但我认为肯定会有一种更简单的方法，因为这会给我留下 12 个一维数组数组（每个多维数组4个，另外4个一维数组组成数组C，计算结果。16对于简单的加法来说有点过分，不是吗？

请记住，在你嘲笑我的愚蠢之前，过去几天我在完成其他各种任务时睡得很少！轻敲

＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ 编辑

谢谢大家的帮助，我明白了，现在了解如何解决这些问题，对于其他有类似问题的人，我使用了以下代码；

```
public class twoDimensionalArray {

    public static void main(String args[]){

        int arrayA[][] = {{1,4,3,5},{3,8,1,2},{4,3,0,2},{0,1,2,7}};
        int arrayB[][] = {{6,1,0,8},{3,2,1,9},{5,4,2,9},{6,5,2,0}};
        int arrayC[][] = new int[4][4];

        for(int i = 0; i < arrayA.length; i++) {
            for(int j = 0; j< arrayA[0].length; j++) {
                arrayC[i][j] = arrayA[i][j] + arrayB[i][j];

            } // end j for loop
        } // end i for loop 

        for (int i = 0; i < arrayC.length; i++) {
            for (int x = 0; x < arrayC[i].length; x++) {
                 System.out.print(arrayC[i][x] + "  | ");
            }
            System.out.println();
        }
    } // end main
} // end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:41:33.723

你需要弄清楚两件事：

1.  如何分配输出数组。这应该很容易，因为维度将与每个输入数组的维度相同。
2.  如何遍历数组。最简单的方法是使用两个嵌套`for`循环（每个维度一个）。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:41:35.793

Declare and initialize new 2-dimensional array "arrayC" to hold your results. Use nested `for` loops to loop through both arrays and add the results, storing the results in your new 2D array.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:46:55.683

Assuming that the arrays are the same length:

```
for (int x = 0; x < arrayA.length; x++)
  for (int y = 0; y < arrayA[0].length; y++)
    result[x][y] = arrayA[x][y] + arrayB[x][y]; 
```

# matlab - Matlab 导入带有标题和浮点精度数字的 CSV 文件

> ID：13591757
> 
> 赞同：0
> 
> 时间：2012-11-27T19:38:52.337
> 
> 标签：matlab, csv, import, floating-point-precision

我的问题是将 CSV 文件中的数字导入到 matlab 变量中，其精度与原始数字相同。这是我的数据示例（可以有 X 行，文件顶部有一个标题）：

```
g_B_esti_Velx, g_B_Velx, g_B_ACCx, g_B_esti_Vely, g_B_Vely, g_B_ACCy, g_B_esti_Velz, g_B_Velz, g_B_ACCz, ControlPitch, AnglePitch, ControlRoll, AngleRoll, Controlyaw, AngleYaw, Controlthrust, g_throttle, msgbatteryVoltage, msgcurrent, msgcapacity_mAh, time, index, tracking, detected
-0.266192,-1.072520,0.788713,0.163473,0.623330,-0.333946,0.000000,-0.773519,0.451613,7,-0.050615,0,-0.017453,0,-0.331613,128,472,142,97,2227,1340731788.614960,179,1,1
-0.270800,-0.486626,0.876130,0.125808,0.329368,-1.245129,0.000000,-0.459128,0.193548,40,-0.033161,-35,-0.017453,0,0.558505,128,472,142,99,2227,1340731788.715275,180,1,1 
```

我已经使用导入向导和以下代码成功导入了数据。但问题是数字导入只有双精度，这是不够的。

```
fid = fopen('mk-2012-6-26-19-29.csv');
mydata = textscan(fid,'%s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s','Delimiter',',','CollectOutput',1);
fclose(fid);
mydata = [cellfun(@str2double,[mydata{1:end}])]';
whos mydata 
```

和 matlab 导入向导结果：

```
newData1 = importdata('mk-2012-6-26-19-29.csv');
for i = 1:size(newData1.colheaders, 2)  % variable count
    assignin('base', genvarname(newData1.colheaders{i}), newData1.data(:,i)); %limit range on first parameter with :
end 
```

我正在使用 Matlab R2011a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:56:37.193

问题似乎只出在我的 Matlab 显示精度上

以下命令允许我检查：

```
>> format long
>> time_mk(1,1)

ans =

     1.340731788614960e+09 
```

结果与我的问题的第一行时间变量匹配。

# oracle - Oracle，将 wm_concat 字符串插入一个表时缺少逗号

> ID：13591765
> 
> 赞同：0
> 
> 时间：2012-11-27T19:39:29.407
> 
> 标签：oracle, plsql

```
 declare  

   cursor c1 is select ISETID AS ID1 , ISETID1 as ID2 From (select ISetID, ItemsID from FI where ISetID in (Select ISetId from FI group by ISetID having count(ItemsID)=1))  natural join ( select ISetID as IsetID1,ItemsID from FI where ISetID in (Select ISetId from FI group by ISetID  having count(ItemsID)=3));

 v_sf_l  number ;   
 v_sf_b   number;   
 v_confi  number;   
 v_name_l  varchar(200);  
 v_name_b  varchar(200);  

 begin

 for I in c1 loop   
     select distinct sf into v_sf_l from FI where IsetID=I.id1;  
     select distinct sf into v_sf_b from FI where IsetID=I.id2;  
     v_confi:=v_sf_b/v_sf_l;  
     select distinct wm_concat(ItemsName) into v_name_l from FI,items where IsetID=I.id1 and FI.ItemsID =Items.ItemsID;        
     select distinct replace(wm_concat(ItemsName),v_name_l,'')  into v_name_b from FI,items where IsetID=I.id2 and FI.ItemsID =Items.ItemsID;         
     v_name_b:=trim(replace(v_name_b,',',' '));  

     execute immediate('Insert into apr(name1,name2,conf)  values ('||v_name_l||','||v_name_b||','||v_confi||')');

     dbms_output.put_line(v_name_l||','||v_name_b||','||v_confi);

     end loop;
end;
   / 
```

每当我执行此脚本时，当我使用 dbms_output.put_line 时，执行立即插入时会出现逗号丢失错误！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:23:12.320

在我看来，您的立即执行好像缺少字符串周围的一些引号。希望下面的代码说明了如何插入它们。

```
declare  

v_confi  number(6) := 10 ;   
v_name_l  varchar(200) := 'ads';  
v_name_b  varchar(200) := 'edf';  
v_text varchar2(1000);

begin

v_text := 'Insert into apr(name1,name2,conf)  values   ('''||v_name_l||''','''||v_name_b||''','||TO_CHAR(v_confi)||')';

 execute immediate(v_text);

end; 
```

# c# - C# 使用冒泡排序对 2 个类别进行排序

> ID：13591768
> 
> 赞同：-1
> 
> 时间：2012-11-27T19:39:46.793
> 
> 标签：c#

```
using System;
using System.IO;

public class Earthquake
{
    public string Magnitude { get; set; }
    public string Location { get; set; }
    public string Latitude { get; set; }
    public string Longitude { get; set; }
    public string depth { get; set; }
    public string date { get; set; }
    public string EventID { get; set; }
    public string URL { get; set; }
    public Earthquake()
        : this(string.Empty, string.Empty, string.Empty, string.Empty, string.Empty, string.Empty, string.Empty, string.Empty)
    { }
    public Earthquake(string magna, string locate, string lat, string longi, string dept, string dat, string Event, string website)
    {
        Convert.ToDouble(Magnitude = magna);
        Location = locate;
        Convert.ToDouble(Latitude = lat);
        Convert.ToDouble(Longitude= longi);
        Convert.ToDouble(depth = dept);
        date = dat;
        EventID = Event;
        URL = website;
    }

}
public class ManageData
{   
    public void getData()
{
    string[] text = File.ReadAllLines(@"Earthquakes.csv");
    foreach (string line in text)
    {
        string[] myColumns = line.Split(',');
        Earthquake earth = new Earthquake(myColumns[0], myColumns[1], myColumns[2], myColumns[3], myColumns[4], myColumns[5], myColumns[6], myColumns[7]);
        //here i want to put each data in the Earthquake class
    }
}

} 
```

本质上 csv 文件是 8 列，所以我所做的就是逐行读取文件，然后创建一个数组来存储以逗号分隔的字符串中的每条数据。我现在要做的是对数据进行排序，首先按幅度，然后使用冒泡排序按深度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:48:03.513

如果冒泡排序不是要求的一部分，并且您只需要一个排序列表，那么您可以使用 LINQ。

像这样的东西应该工作。

```
public class ManageData
{
    public List<Earthquake> AllEarthquakes { get; private set; }
    public IOrderedEnumerable<Earthquake> getData()
    {
        string[] text = File.ReadAllLines(@"Earthquakes.csv");
        foreach (string line in text)
        {
            string[] myColumns = line.Split(',');
            Earthquake earth = new Earthquake(myColumns[0], myColumns[1], myColumns[2], myColumns[3], myColumns[4], myColumns[5], myColumns[6], myColumns[7]);
            //here i want to put each data in the Earthquake class
            AllEarthquakes.Add(earth);
        }

        return AllEarthquakes.OrderBy(eq => eq.Magnitude).ThenBy(eq => eq.depth);
    }
} 
```

# neo4j - 尝试在简单的 Neo4j 数据库上运行 Cypher 查询

> ID：13591769
> 
> 赞同：1
> 
> 时间：2012-11-27T19:39:47.673
> 
> 标签：neo4j, cypher

我制作了一个简单的结构，但在使用 Cypher 查询它时遇到了一些问题。给定以下结构：[http ://console.neo4j.org/r/p2xieh](http://console.neo4j.org/r/p2xieh)

我怎么知道我所有读过“书作者”书籍的朋友？我怎么知道我所有的朋友都读了“书作者”的书并且排名高于 4？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:51:42.850

我所有读过“书作者”书籍的朋友：

```
start me=node(1) 
match me-[:KNOWS]-friend-[:READ]-book-[:WRITTEN_BY]-author 
where author.name='Book Author' 
return friend.name 
```

和我所有读过“书作者”排名高于4的书的朋友

```
start me=node(1) 
match me-[:KNOWS]-friend-[:READ]-book-[:WRITTEN_BY]-author 
where author.name='Book Author' and book.rank? > 4 
return friend.name 
```

# ruby-on-rails - Rails：嵌套的 STI 可以继承自定义方法吗

> ID：13591772
> 
> 赞同：0
> 
> 时间：2012-11-27T19:40:05.717
> 
> 标签：ruby-on-rails, nested-attributes, single-table-inheritance

我有一个从其父级继承其表和控制器的资源。它的父级也有我想传递给它的自定义路由，但我不确定如何（或者是否可能）。目前的路线如下所示：

```
resources :publications do
  resources :editions, :controller => :publications
  collection do
    get :autocomplete, :claim, :current_users_publications, :lightbox, :lookup
    post :review
  end
  member do
    get :audit, :reassign_prompt
    post :approve, :audit_vote
    put :reassign
  end
end 
```

在当前设置下，版本模型无法访问自定义方法，如“审核”或“自动完成”。是否可以做类似“:routes => :publications”的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:21:31.460

查看**[路由问题](http://edgeguides.rubyonrails.org/routing.html#routing-concerns)**

```
# Define the concern
concern :somethingable do
  collection do
    get :autocomplete, :claim, :current_users_publications, :lightbox, :lookup
    post :review
  end
  member do
    get :audit, :reassign_prompt
    post :approve, :audit_vote
    put :reassign
  end
end

# And now your routing
resources :publications, concerns: :somethingable do
  resources :editions, controller: :publications, concerns: :somethingable
end 
```

我相信你能想出一个比`:somethingable`描述常见行为更好的术语

**更新**

因为以上是针对 rails`master`分支的，所以您可以使用几种替代方法

1.  有一个**[gem](https://github.com/rails/routing_concerns)**可以抽象出这种行为，以便在 Rails 3.2+ 中使用
2.  而不是使用`concern`，只需在您的路由文件中创建一个方法。

    ```
    def somethingable
      collection do
        get :autocomplete, :claim, :current_users_publications, :lightbox, :lookup
        post :review
      end
      member do
        get :audit, :reassign_prompt
        post :approve, :audit_vote
        put :reassign
      end
    end 
    ```

    那么你的路线可能看起来像

    ```
    resources :publications do
      somethingable

      resources :editions, controller: :publications do
        somethingable
      end
    end 
    ```

# c - 解码二进制信号

> ID：13591776
> 
> 赞同：0
> 
> 时间：2012-11-27T19:40:36.563
> 
> 标签：c, binary, protocols, reverse-engineering, gpio

我正在从我的 Raspberry Pi 上的 gpio 引脚读取以下二进制信号（它是气象站的输出）。

第一列是二进制高或二进制低。第二列是它在状态中花费的时间（秒）。

如何将此信号转换为十六进制？！

```
...
0 14.929292
1 0.002127
0 0.006867
1 0.001393
0 0.005303
1 0.001274
0 0.006126
1 0.001361
0 0.007541
1 0.001417
0 0.005062
1 0.001474
0 0.005119
1 0.001565
0 0.004906
1 0.001587
0 0.004916
1 0.002031
0 0.006007
1 0.001479
0 0.003678
1 0.001485
0 0.000994
1 0.004142
0 0.000865
1 0.006277
0 0.003858
1 0.001288
0 0.001028
1 0.001468
0 0.000945
1 0.004138
0 0.003327
1 0.001303
0 0.001174
1 0.001318
0 0.001017
1 0.001510
0 0.001485
1 0.001080
0 0.001907
1 0.002782
0 0.001083
1 0.002012
0 0.000712
1 0.003984
0 0.001785
1 0.001291
0 0.003149
1 0.001185
0 0.001020
1 0.001719
0 0.000993
1 0.003965
0 0.001157
1 0.001346
0 0.001762
1 0.001353
0 0.003219
1 0.001090
0 0.001106
1 0.001475
0 0.001160
1 0.001079
0 0.003874
1 0.001387
0 0.001015
1 0.001168
0 0.001092
1 0.001336
0 0.002504
1 0.001466
0 0.006063
1 0.001391
0 0.001196
1 0.001460
0 0.001082
1 0.001237
0 0.005049
1 0.001654
0 0.004914
1 0.001410
0 0.002722
1 0.001601
0 47.818081
1 0.001452
0 0.007532
1 0.001438
0 0.007975
1 0.001494
0 0.003077
1 0.002131
0 0.003056
1 0.001254
0 0.002685
1 0.001372
0 0.005003
1 0.002051
0 0.006997
1 0.001608
0 0.004868
1 0.001524
0 0.002524
1 0.001397
0 0.003103
1 0.001211
0 0.002434
1 0.001328
0 0.003475
1 0.001469
0 0.003672
1 0.001384
0 0.003847
1 0.001101
0 0.001133
1 0.001352
0 0.003504
1 0.002133
0 0.003257
1 0.001070
0 0.001182
1 0.001511
0 0.003301
1 0.001482
0 0.003779
1 0.001210
0 0.001099
1 0.001396
0 0.001127
1 0.001433
0 0.001697
1 0.001434
0 0.003132
1 0.001175
0 0.001754
1 0.001520
0 0.002905
1 0.001425
0 0.003625
1 0.001155
0 0.001036
1 0.001469
0 0.001041
1 0.001422
0 0.001251
1 0.001275
0 0.003414
1 0.001446
0 0.001734
1 0.001653
0 0.000435
1 0.002349
0 0.000974
1 0.005346
0 0.003247
1 0.001265
0 0.001192
1 0.001213
0 0.001404
1 0.001349
0 0.000963
1 0.003732
0 0.001186
1 0.001220
0 0.002529
1 0.001357
0 0.002573
1 0.001700
0 0.001158
1 0.001058
0 0.002571
1 0.001314
0 0.001164
1 0.001364
0 0.124659
1 0.001485
0 0.007492
1 0.002176
0 0.006881
1 0.002083
0 0.005526
1 0.001351
0 0.005029
1 0.001528
0 0.001726
1 0.001366
0 0.002089
1 0.001258
0 0.002579
1 0.001463
0 0.001262
1 0.001487
0 0.000975
1 0.003736
0 0.002321
1 0.002073
0 0.004412
1 0.001433
0 0.002619
1 0.001390
0 0.002817
1 0.001201
0 0.003475
1 0.001512
0 0.000906
1 0.003958
0 0.003492
1 0.001581
0 0.000985
1 0.004103
0 0.001370
1 0.001046
0 0.001162
1 0.001534
0 0.001080
1 0.001510
0 0.003077
1 0.002124
0 0.003046
1 0.001293
0 0.003908
1 0.001406
0 0.001002
1 0.001109
0 0.001524
1 0.001009
0 0.001347
1 0.001448
0 0.000950
1 0.003651
0 0.001133
1 0.002038
0 0.002838
1 0.001991
0 0.002866
1 0.001291
0 0.003824
1 0.001191
0 0.001163
1 0.001447
0 0.000970
1 0.004059
0 0.000972
1 0.006388
0 0.001252
1 0.001262
0 0.001345
1 0.001329
0 0.004930
1 0.001273
0 0.003556
1 0.001570
0 0.003431
1 0.001550
0 0.001256
1 0.001461
0 0.001098
1 0.001005
0 0.002555
1 0.001503
0 0.005044
1 0.002070
0 0.004427
1 0.001499
... 
```

如您所见，它为零约 48 秒，然后触发 1 和 0 的负载并再次回到零。

我需要弄清楚协议。我说不出那是什么。我唯一掌握的信息是当前温度为 21 摄氏度，风速为零，风向为零。非常感谢任何见解，

![二进制数据图](../Images/f760e3282fd2037fdbaf74f348cc32d6.png)

上面是两个不同传输的一些二进制数据图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:31:13.897

正如@NikolaiNFetissov 所说，绘制您测量的周期。但要绘制几个，一个在另一个之上，从 48 秒休息后的第一个间隔开始。

所以你将拥有：

```
A (21C) _____|----------|_____|-----|_____|-----

B (24C) ______|---------|_____|-----------|__________

Clock   _____|-----|_____|-----|_____|-----|_____|-----

etc 
```

我会在不同的条件下测量几个周期（例如不同的温度但相同的风/方向），绘制它们然后看看你是否可以看到模式的哪些部分发生了变化。如果您知道采样率并将其绘制出来，将会有所帮助。你说这是最快的，但我想你正在计算时钟滴答声或其他东西 - 或者你如何确定秒数？

编辑：

如何绘制？我在想象一张方格纸和一支铅笔 :-) 至于一个程序，我唯一的（简短的）经验是使用 gnuplot。为此，您必须根据间隔创建坐标列表，因此：

```
1 0.006
0 0.002
1 0.005
0 0.001 
```

可能会变成：

```
x,     y
0.0,   1
0.006, 1
0.006, 0
0.008, 0
0.008, 1
0.013, 1
0.013, 0
0.014, 0

etc 
```

我的猜测是，在安装和学习使用 gnuplot 并创建坐标所需的时间里，您可以在纸上绘制数据并找出代码。但对我来说，时钟频率是关键......（抱歉继续说下去；-）

# hadoop - Eclipse Hadoop 插件问题（调用 localhost/127.0.0.1:50070 ）任何人都可以给我解决方案吗？

> ID：13591777
> 
> 赞同：0
> 
> 时间：2012-11-27T19:40:37.587
> 
> 标签：hadoop, eclipse-plugin, hdfs

问题：Eclipse Hadoop 插件问题（本地异常调用 localhost/127.0.0.1:50070 失败：java.io.EOFException）。任何机构都可以给我解决方案吗？

我正在学习 Cloudera 培训教程。其中使用 Eclipse(Helios)3.6 和 Hadoop.0.20.2-cdh3u2 版本。

我已经下载了 hadoop-eclipse-plugin-0.20.3-SNAPSHOT.jar 并将其复制到 /home/training/eclipse/plugins/ 文件夹中。

```
Run --> Eclipse --> gone to File (which is in Menu bar) --> New --> other 
```

从其他选择了 MapReduce 项目。我选择了指定 Hadoop 库位置。并将位置指定为“/usr/lib/hadoop”。在这个位置，我有以下文件。

```
bin                                hadoop-examples-0.20.2-cdh3u2.jar
build.xml                          hadoop-examples.jar
CHANGES.txt                        hadoop-test-0.20.2-cdh3u2.jar
conf                               hadoop-test.jar
contrib                            hadoop-tools-0.20.2-cdh3u2.jar
example-confs                      hadoop-tools.jar
hadoop-0.20.2-cdh3u2-ant.jar       ivy
hadoop-0.20.2-cdh3u2-core.jar      ivy.xml
hadoop-0.20.2-cdh3u2-examples.jar  lib
hadoop-0.20.2-cdh3u2-test.jar      LICENSE.txt
hadoop-0.20.2-cdh3u2-tools.jar     logs
hadoop-ant-0.20.2-cdh3u2.jar       NOTICE.txt
hadoop-ant.jar                     pids
hadoop-core-0.20.2-cdh3u2.jar      README.txt
hadoop-core.jar                    webapps 
```

并将 Mpareduce 项目指定为“myhadoop”并单击完成按钮。我在 DFS Locations 按钮上得到了 Mapreduce 按钮，但没有得到它的雇佣关系。

去检查我的 dfs 和 mapred 端口。

我的 core-site.xml 是

```
<configuration>
  <property>
    <name>fs.default.name</name>
    <value>hdfs://localhost:8020</value>
  </property> 
```

我的 mapred-site.xml

```
<configuration>
  <property>
    <name>mapred.job.tracker</name>
    <value>localhost:8021</value>
  </property> 
```

在 Map ReTo Define Hadoop Location in eclipse 中，我给出了如下。

```
Map/Reduce Master
Host: localhost
port 50021

DFS Master:
Host :localhost
Port:50020 
```

同时我选择使用 M/R 主机。

我已经运行了 cloudera 的示例 wordcount 程序，但它给了我以下问题。请给我解决方案，我从 2 天开始尝试。,....

```
Exception in thread "main" java.io.IOException: Call to localhost/127.0.0.1:50070 failed on local exception: java.io.EOFException
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:1142)
    at org.apache.hadoop.ipc.Client.call(Client.java:1110)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:226)
    at $Proxy0.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:398)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:384)
    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:111)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:213)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:180)
    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1514)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:67)
    at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:1548)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1530)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:228)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:111)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:212)
    at org.apache.hadoop.fs.Path.getFileSystem(Path.java:183)
    at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.addInputPath(FileInputFormat.java:368)
    at WordCount.main(WordCount.java:65)
Caused by: java.io.EOFException
    at java.io.DataInputStream.readInt(DataInputStream.java:375)
    at org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:815)
    at org.apache.hadoop.ipc.Client$Connection.run(Client.java:724) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T03:40:20.370

尝试将配置中的机器名称从 localhost 更改为主机名

# spring - Hibernate 和 Spring：多对多的值未插入到生成的表中

> ID：13591778
> 
> 赞同：0
> 
> 时间：2012-11-27T19:40:41.810
> 
> 标签：spring, hibernate, many-to-many

我对 Spring 有一些经验，但我对 Hibernate 完全陌生，尤其是与 Spring 结合使用：我想在两个表（作者、出版物）之间建立多对多关系。该表已生成，但没有插入任何内容...

Author.java 的一部分：

```
@ManyToMany(cascade = {CascadeType.ALL})
@JoinTable(name = "writes", joinColumns = {@JoinColumn(name = "authorId")}, inverseJoinColumns = {@JoinColumn(name = "publicationId")})
private Set<Publication> publications = new HashSet<Publication>(); 
```

Publication.java 的一部分：

```
@ManyToMany(mappedBy = "publications")
private Set<Author> authors = new HashSet<Author>(); 
```

有什么我忘记了吗？

谢谢！！！！

**编辑**

这是应该将所有内容保存到我的数据库的代码：

```
@RequestMapping(value = PATHELEM + "/insertTest", method = RequestMethod.POST)
public String addAuthor(@ModelAttribute("object") DatabaseObject object,
        BindingResult result) {
    authorService.addAuthor(object.getAuthor());
    publicationService.addPublication(object.getPublication());
    return PATHELEM + "/insertEntryForm";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:54:07.410

你错过了两件重要的事情：

*   将您的实体与会话相关联。如果你只是创建你的对象，hibernate 不知道是否将它们保存到 db。这就是为什么你应该调用`session.save(..)`/ `entityManager.persist(..)`（取决于你是否使用 JPA）。
*   事务 - 休眠中的每个操作都需要一个事务，因此您必须通过实体管理器/会话启动一个

我建议阅读一个教程，它将解释这些基本原则。

# css - 我的网站在打印时会缩放，使黑色文本看起来是灰色的

> ID：13591779
> 
> 赞同：1
> 
> 时间：2012-11-27T19:40:56.870
> 
> 标签：css, printing, media-queries, media-type

我有一个完全流畅的网站，主要是为打印而设计的。它可以很好地延伸到任何窗口或纸张尺寸：

```
body { width: 100%; } 
```

但是，对于打印的页面，我的一些黑色线条和文本变成灰色，并且我的`1px`线条不是以实线打印，而是更多的是模糊的灰色虚线。这似乎是因为浏览器会在打印时缩放页面，例如 IE 的“Shrink To Fit”。

所以我看到了两个选择。

1.  使用适用于打印的 css 单位指定线宽和字体大小，这可能会与浏览器内置机制发生冲突，以在所有内容都以像素为单位指定时使页面打印良好。*[这个问题](https://stackoverflow.com/questions/9978335/specify-hairline-thickness-in-css-for-printing)在其中部分起作用，但没有取得多大成功。*

2.  找到`body`宽度 ( `8.5in`? `7.5in`? `90%`? `800px`?) 使 8.5 英寸宽的纸张的线条为实线且文本为黑色。

哪种方法可能成功？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:49:16.320

您可能会考虑为打印媒体使用单独的样式表，或者只是`@media print { /* rules here */}`在当前样式表的末尾用一个块覆盖有问题的样式。

如果您正在为屏幕和印刷设计一个网站，这将为您提供最灵活的方式来独立控制两种媒体的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:58:24.330

可能是打印机质量问题。使用 5 年的旧打印机打印质量设置为“快速草稿”时，以高分辨率渲染的 1px 看起来有点不同。

尝试两个简单的故障排除选项：

1.  要么提高打印质量并进行全彩色打印，要么尝试使用其他打印机。

2.  如果可能的话，也许你可以试着把线条加粗一点？我知道它可能不适用于您的设计，但有时最简单的答案是最好的。

祝你好运。

# php - PHP RSA 加密

> ID：13591781
> 
> 赞同：0
> 
> 时间：2012-11-27T19:41:03.057
> 
> 标签：php, rsa, public-key-encryption

我有以下公钥：

```
//Beginig of the PBK
30819f300d06092a864886f70d010101050003818d003081890281810095e15f182ec7b6e84786c0ee54e3bb72af0461e6fd859a3625f38dcd3fdec80dfcc51a44756ec7cd6c14b430d55670460c5143efadd1ade7380e890e9957d6e6b38f35412862cc955e04d1928f21c0d2f7bc48c3855276f0e7c1b45a558e3a013b969cbfaebca42b748e64bff787f86ec5f0adcd94428c4ab8ca6d2b710d785b0203010001
//End of the PBK 
```

它是 X509 结构中的 PKCS#1 编码公钥。所以我的问题是我如何在 PHP 中从这种 X509 PKIX 格式中提取公钥以在 RSA 加密中使用它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:23:47.390

使用[phpseclib，一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)：

```
<?php
include('Crypt/RSA.php');

$cert = pack('H*', '30819f300d06092a864886f70d010101050003818d003081890281810095e15f182ec7b6e84786c0ee54e3bb72af0461e6fd859a3625f38dcd3fdec80dfcc51a44756ec7cd6c14b430d55670460c5143efadd1ade7380e890e9957d6e6b38f35412862cc955e04d1928f21c0d2f7bc48c3855276f0e7c1b45a558e3a013b969cbfaebca42b748e64bff787f86ec5f0adcd94428c4ab8ca6d2b710d785b0203010001');

$rsa = new Crypt_RSA();
$rsa->loadKey($cert);
echo $rsa;
?> 
```

返回这个：

```
-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCV4V8YLse26EeGwO5U47tyrwRh5v2FmjYl843N
P97IDfzFGkR1bsfNbBS0MNVWcEYMUUPvrdGt5zgOiQ6ZV9bms481QShizJVeBNGSjyHA0ve8SMOF
Unbw58G0WlWOOgE7lpy/rrykK3SOZL/3h/huxfCtzZRCjEq4ym0rcQ14WwIDAQAB
-----END PUBLIC KEY----- 
```

我认为 phpseclib 在这里真正做的是 base64_encode'ing 打包的 $cert 并为其添加页眉和页脚。你想要什么格式的密钥？你想要base-10格式的指数和模数还是以上就足够了？

# java - 系统剪贴板操作的右键菜单项

> ID：13591784
> 
> 赞同：2
> 
> 时间：2012-11-27T19:41:10.417
> 
> 标签：java, clipboard, menuitem

我发现在 Mac OS X 中运行 Java 程序时，如果您使用键盘命令而无需进行额外编码，则文本字段对象（例如 JField）支持使用系统剪贴板进行剪切、复制和粘贴操作。例如，我可以创建一个 JField，输入一些文本，选择它，然后使用“Command-C”复制它，然后将它粘贴到另一个应用程序中。粘贴从其他应用程序复制的文本也是如此。

我真的很喜欢 Java 自动执行此操作，但我注意到编辑菜单不会随剪切、复制和粘贴菜单项自动出现。有没有办法在选择文本时自动添加这些菜单项以访问系统剪贴板？如果不是，那么实现它们的最佳方法是什么，使其表现得像任何其他应用程序一样。此时，我只对复制和粘贴文本感兴趣。

另外，我知道系统剪贴板是特定于平台的。文本字段对象的这种自动系统剪贴板功能是否出现在其他平台上？

编辑：我实际上想知道如何将其添加到菜单栏，但是对于下一个问题的答案非常好，我决定选择它作为正确答案并重命名问题.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:54:32.857

不幸的是，Swing 不支持弹出上下文菜单。你必须自己动手。幸运的是，这并不难。也许最干净的方法是安装您自己的事件队列，如此[处](http://www.javalobby.org/java/forums/t19867.html)所述。那篇文章建议以下实现：

```
// @author Santhosh Kumar T - santhosh@in.fiorano.com 
public class MyEventQueue extends EventQueue{ 
    protected void dispatchEvent(AWTEvent event){ 
        super.dispatchEvent(event); 

        // interested only in mouseevents 
        if(!(event instanceof MouseEvent)) 
            return; 

        MouseEvent me = (MouseEvent)event; 

        // interested only in popuptriggers 
        if(!me.isPopupTrigger()) 
            return; 

        // me.getComponent(...) retunrs the heavy weight component on which event occured 
        Component comp = SwingUtilities.getDeepestComponentAt(me.getComponent(), me.getX(), me.getY()); 

        // interested only in textcomponents 
        if(!(comp instanceof JTextComponent)) 
            return; 

        // no popup shown by user code 
        if(MenuSelectionManager.defaultManager().getSelectedPath().length>0) 
            return; 

        // create popup menu and show 
        JTextComponent tc = (JTextComponent)comp; 
        JPopupMenu menu = new JPopupMenu(); 
        menu.add(new CutAction(tc)); 
        menu.add(new CopyAction(tc)); 
        menu.add(new PasteAction(tc)); 
        menu.add(new DeleteAction(tc)); 
        menu.addSeparator(); 
        menu.add(new SelectAllAction(tc)); 

        Point pt = SwingUtilities.convertPoint(me.getComponent(), me.getPoint(), tc);
        menu.show(tc, pt.x, pt.y);
    } 
} 
```

然后，您可以将其用于：

```
public static void main(String[] args){ 
    Toolkit.getDefaultToolkit().getSystemEventQueue().push(new MyEventQueue()); 

    .....
} 
```

使用那一行代码，您可以在应用程序中的每个文本组件上获得一个弹出菜单。

动作类并不太复杂。例如，下面是粘贴操作的实现，它显示了与系统剪贴板的交互：

```
// @author Santhosh Kumar T - santhosh@in.fiorano.com 
class PasteAction extends AbstractAction{ 
    JTextComponent comp; 

    public PasteAction(JTextComponent comp){ 
        super("Paste"); 
        this.comp = comp; 
    } 

    public void actionPerformed(ActionEvent e){ 
        comp.paste(); 
    } 

    public boolean isEnabled(){ 
        if (comp.isEditable() && comp.isEnabled()){ 
            Transferable contents = Toolkit.getDefaultToolkit().getSystemClipboard().getContents(this); 
            return contents.isDataFlavorSupported(DataFlavor.stringFlavor); 
        }else 
            return false; 
    } 
} 
```

有关其他操作实现的代码，请参阅文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:54:51.973

您需要为此创建一个自定义弹出菜单，这可以使用[MouseListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)（或[MouseAdapter](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseAdapter.html)）和[JPopupMenu](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPopupMenu.html)来完成。我的方法是创建一个自定义鼠标侦听器，您可以将其添加到任何文本组件中。

```
public class ClipboardMenuHandler extends MouseAdapter {

    private final JTextComponent textComponent;

    public ClipboardMenuHandler(JTextComponent textComponent) {
        this.textComponent = textComponent;
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        if (e.isPopupTrigger()) 
            ClipboardMenu menu = new ClipboardMenu();
            menu.show(textComponent, e.getX(), e.getY());
        }
    }

    private class ClipboardMenu extends JPopupMenu {

        public ClipboardMenu() {
            // add copy/cut/paste actions; refer to Ted's answer for PasteAction
        }
    }
} 
```

然后，您只需将 a`ClipboardMenuHandler`作为侦听器添加到您的文本组件。

```
JTextField field = new JTextField();
ClipboardMenuHandler menuHandler = new ClipboardMenuHandler(field);
field.addMouseListener(menuHandler); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T16:05:07.057

这对我有用：

```
public class MyTextField extends JTextField {
    public static final MyPopupMenu POPUP_MENU = new MyPopupMenu();

    public MyTextField() {
        this.setComponentPopupMenu(POPUP_MENU);
    }
} 
```

现在，我只是`MyTextField`在任何地方使用，否则我会使用`JTextField`.

# node.js - node.js 是否有像 c++ 预处理器宏这样的 __file__ 和 __line__ 之类的东西？

> ID：13591785
> 
> 赞同：13
> 
> 时间：2012-11-27T19:41:10.223
> 
> 标签：node.js

我正在努力增强某些 node.js 应用程序的日志记录。过去曾使用 C++ 的 __file__ 和 __line __ 预处理器宏来帮助我们在记录事件时跟踪问题。我在 node.js 世界中没有发现任何类似的东西。

有没有人有建议或知道如何在 node.js 中获取行号和文件名以进行日志记录？

我正在寻找类似的东西：

```
console.log(__FILE__ + "." + __LINE__ + "\t" + new Date().toISOString() + " Message "); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T20:20:51.543

查看[全局对象](http://nodejs.org/api/globals.html)：

```
__filename 
```

对于 lineNumber，请参阅这篇文章：[javascript node.js getting line number in try catch?](https://stackoverflow.com/questions/5802840/javascript-node-js-getting-line-number-in-try-catch)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T20:15:15.837

请参阅：[访问 V8 JavaScript 中的行号（Chrome 和 Node.js）](https://stackoverflow.com/questions/11386492/accessing-line-number-in-v8-javascript-chrome-node-js)

然后对于文件名：

```
Object.defineProperty(global, '__file', {
  get: function(){
    return __stack[1].getFileName().split('/').slice(-1)[0];
  }
}); 
```

您也可以只使用`process.argv[1]`而不是调用`__stack`getter，但我想保持相似。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-23T04:32:48.510

将先前的答案扩展到此处：[https ://gist.github.com/gavinengel/8572856](https://gist.github.com/gavinengel/8572856)

允许设置全局变量：__line、__file、__ext、__dir

顺便问一下，我如何创建？：__function，__method，__class

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T16:36:24.460

只需使用 C 预处理器，在您的代码中添加一个额外的构建步骤，然后它允许剥离您的日志记录以用于生产代码。

# elasticsearch - 在 Elasticsearch 中测试索引变化

> ID：13591786
> 
> 赞同：1
> 
> 时间：2012-11-27T19:41:10.927
> 
> 标签：elasticsearch

我有一个包含几百万个文档的弹性搜索索引。构建索引的脚本从开始到结束需要几个小时。这使得针对生产数据库数据测试代码更改变得非常不切实际。

在生产中，我有一百万件物品。每一个都在服务器中编入索引。我发现我的代码错误地填充了其中一个字段。在我的本地开发环境中使用的测试数据要少得多，我的代码似乎已经解决了这个问题。然而，过去的经验表明我的用户会做一些疯狂的事情，而且我的测试数据很少涵盖每一个案例。（有复杂的权限和其他相互交互的东西来确定一个字段的简单布尔值，有时那些非常复杂的字段会朝着我在测试数据中没有预料到的方向发展。）

为了尽量减少搞砸我的生产索引，我想针对生产数据库运行我更新的弹性搜索索引代码，以确保它适用于所有用户。具体来说，我只想针对我知道有问题的少数用户数据运行它。我不能简单地将这些数据导出到我的本地开发环境，因为数据非常复杂。问题就在于此。

我想避免每次要测试更改时都必须重新构建单独的索引。（显然，如果我建立一个单独的索引，然后不定期更新它，那么我下次测试时就会有过时的数据。）

想法？想法？建议？不好的笑话？我每次都必须重建索引吗？有什么捷径可以减少我等待索引完成的时间吗？

# mysql - MYSQL 绑定最大值

> ID：13591794
> 
> 赞同：2
> 
> 时间：2012-11-27T19:41:36.797
> 
> 标签：mysql, subquery

嗨，我有一张表格，列出了西班牙语课程的开始和结束时间以及日期和老师。我正在尝试编写一个 MYSQL 查询，列出每个老师上课最多的日期，他们最忙的那一天。如果有几天打成平手，我想同时显示。

这是我到目前为止所拥有的，但它只返回一个日期，即使有平局，我觉得这是因为我最后在老师身上分组

```
SELECT teacher_no, date
FROM (
   SELECT COUNT(date)AS counted,teacher_no,date
   FROM Spanish
   GROUP BY teacher_no,date
) AS t
GROUP BY teacher_no 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:14:52.343

试试这个：

```
SELECT  teacher_no, date, COUNT(date) AS counted
FROM    Spanish s
GROUP BY teacher_no, date
HAVING  COUNT(date) = (SELECT COUNT(date) AS counted
                       FROM Spanish
                       WHERE teacher_no = s.teacher_no
                       GROUP BY teacher_no, date
                       ORDER BY counted DESC
                       LIMIT 1
                      ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:26:24.653

我不确定您为什么要在内部查询中计算日期。我认为计算开始时间更有意义。这为您提供了每个教师在每个日期上的课程数量的表格：

```
SELECT COUNT(start_time) AS classes, teacher_no, date
FROM Spanish
GROUP BY tearcher_no, date) AS t 
```

对于特定的 teacher_no `X`，您可以按课程数量排序以获得最多课程的日期：

```
SELECT date
FROM (        
    SELECT COUNT(start_time) AS classes, date
    FROM Spanish
    GROUP BY date
    WHERE teacher_no = X) AS t
ORDER BY classes DESC
LIMIT 1 
```

最后，您可以获得所有教师的列表，例如

```
SELECT
    a.teacher_no,
    (SELECT date
     FROM
         (SELECT COUNT(b.start_time) AS classes, b.date
          FROM Spanish AS b
          GROUP BY b.date
          WHERE a.teacher_no = b.teacher_no) AS t
     ORDER BY classes DESC
     LIMIT 1) AS date
FROM Spanish AS a
GROUP BY a.teacher_no 
```

# sql - 以这样的方式加入两个表，以便我可以获得所有日期的所有项目

> ID：13591798
> 
> 赞同：0
> 
> 时间：2012-11-27T19:41:57.933
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有两张桌子：购买和物品。对于 Purchase 表中的每个日期，我想查看 Items 表中每个项目所购买的项目数。以下是我希望从查询中得到的结果集。问题是，如果某一天没有购买任何物品，那么 Purchase 表中就没有它的记录。日期必须来自采购表（无连续日期）。

```
+-------------------------+----------+----------+
|      PurchaseDate       | ItemName | Quantity |
+-------------------------+----------+----------+
| 2000-01-01 00:00:00.000 | A        |        1 |
| 2000-01-01 00:00:00.000 | B        |        2 |
| 2000-01-01 00:00:00.000 | C        |        4 |
| 2000-01-04 00:00:00.000 | A        |        6 |
| 2000-01-04 00:00:00.000 | B        |        0 | <- This row doesn't exist in Purchase
| 2000-01-04 00:00:00.000 | C        |        0 | <- This row doesn't exist in Purchase
| 2000-01-07 00:00:00.000 | A        |        0 | <- This row doesn't exist in Purchase
| 2000-01-07 00:00:00.000 | B        |        0 | <- This row doesn't exist in Purchase
| 2000-01-07 00:00:00.000 | C        |        3 |
+-------------------------+----------+----------+ 
```

什么样的查询会给我上面的结果和下面的数据？我正在使用 SQL Server 2008 R2。

```
CREATE TABLE Purchase
(
   PurchaseDate DATETIME,
   ItemName NVARCHAR(200),
   Quantity INT
)

CREATE TABLE Items
(
   Value  NVARCHAR(200)
)

INSERT INTO Items VALUES ('A')
INSERT INTO Items VALUES ('B')
INSERT INTO Items VALUES ('C')
INSERT INTO Purchase VALUES ('2000-01-01', 'A', 1)
INSERT INTO Purchase VALUES ('2000-01-01', 'B', 2)
INSERT INTO Purchase VALUES ('2000-01-01', 'C', 4)
INSERT INTO Purchase VALUES ('2000-01-04', 'A', 6)
INSERT INTO Purchase VALUES ('2000-01-07', 'C', 3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:52:12.563

您可以从 Purchase 表中交叉加入一组不同的日期以获取您的日期列表。如果在特定日期至少购买了一件商品，这只会返回一个日期：

```
SELECT
 dt.PurchaseDate, i.Value as ItemName, SUM(ISNULL(Quantity,0)) as Quantity
FROM Items i
CROSS JOIN ( SELECT DISTINCT PurchaseDate FROM Purchase ) dt
LEFT OUTER JOIN Purchase p
  ON i.Value = p.ItemName
  AND dt.PurchaseDate = p.PurchaseDate
GROUP BY dt.PurchaseDate, i.Value
ORDER BY dt.PurchaseDate, i.Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:53:03.877

除非您有一个包含所有日历日期的表格，或者使用游标方法，否则您将无法填充没有购买任何东西的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:59:23.773

```
select
    p.purchasedate,
    i.value,
    sum(case when p.itemname = i.value then p.quantity else 0 end)
from
    Purchase p
    cross join Items i
group by
    p.purchasedate,
    i.value
order by
    p.purchasedate, 
    i.value 
```

# java - Hibernate 自定义查找器 SQL 查询不返回 OneToMany 关系

> ID：13591799
> 
> 赞同：2
> 
> 时间：2012-11-27T19:42:03.483
> 
> 标签：java, sql, hibernate, annotations

我有一个`User`有`@OneToMany` `List<Address>`属性的类。Hibernate 在用户和地址之间创建了一个连接表。当用户登录时，我使用自定义 SQL 查询查找用户；

`select * from user where username = ? and password = ?`

这显然会返回 user 的所有其他字段，但不返回`List<Address>`. Hibernate 有没有办法在不使用自定义查询的情况下也返回关系数据？

我可以通过上面的自定义查询加载用户，提取其 ID，然后重新加载用户以便 Hibernate 加载所有字段吗？有没有更好的方法？

```
@Entity
public class User {

    @Id
    @GeneratedValue
    @GenericGenerator(name = "incremental", strategy = "increment")
    private Long userID;

    @Column(nullable = false)
    private String username;

    @Column(nullable = false)
    private String email;

    @Column(nullable = false)
    private String password;

    @OneToMany(fetch = FetchType.EAGER)
    @JoinTable(name = "user_address", 
        joinColumns = @JoinColumn(name = "userID"), 
        inverseJoinColumns = @JoinColumn(name = "addressID"))
    private List<Address> addresses;
}

@Entity
public class Address {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @NonVisual
    public Long addressID;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:50:56.633

尝试使用 HQL，如下所示：

```
String queryString = "select u from User u left join u.addresses "+
                     "where u.username = :userName and u.password = :password"; 
```

**编辑：**执行 HQL 的示例代码

```
String queryString = "select u from User u left join u.addresses "+
                     "where u.username = :userName and u.password = :password";
Query query = session.createQuery(queryString );
query.setParameter("userName", userNameValue);
query.setParameter("password", passwordValue);
List<User> users = query.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:26:48.237

默认情况下，您有惰性属性关联，您需要调用`getAddresses()`用户来检索惰性集合。

集合需要更多的工作来初始化——你当然可以通过遍历整个集合来手动完成，但最好调用 Hibernate 实用程序类来为你做这件事。该`Hibernate.initialize`方法将对象作为参数，并初始化任何惰性关联（包括集合）。所以，如果你想完全初始化用户，然后完全初始化地址集合：

```
Object[] userObject; // the object returned by the query.
User u = new User(userObject); // create the user
Hibernate.initialize(u); // initializes user
Hibernate.initialize(u.getAddresses()); // pass the lazy collection into the session to be initialized. 
```

# database - 我在这个数据库设计上是否走在正确的轨道上？

> ID：13591809
> 
> 赞同：1
> 
> 时间：2012-11-27T19:43:02.797
> 
> 标签：database, database-design, relational-database, database-schema

我有一个我已经设置好的设计，我真的可以使用一些帮助来看看我是否走在正确的轨道上。如果这对 Stackoverflow 来说不是一个合适的问题，我深表歉意，并将其删除。我是一个相当新的用户，不能 100% 确定。

我正在构建一个内容管理器，一切都来自数据库。我有一个包含部分的页面，这些部分具有字段，并且在这些字段中输入了数据。这些字段可以是文本框、组合框或列表框。这里的重点是能够创建页面，这些页面会根据部分类型获取带有字段的适当部分，我只是想存储这些值，以便以后可以读取或编辑页面。

第1页

第一节

字段1 [Texbox1] 字段2 [Texbox2]
字段3
[Combobox1]

第二节

field1 [Texbox1]
field2 [Listbox1]
field3 [Combobox1]

这些部分可以在不同的页面上重复使用，并且每个部分的字段始终相同。

我的数据库如下所示：

页面
* PageId
* PageName

Page_Section
* PageId
* SectionId

Section
* SectionId
* SectionTypeId
* SectionName

SectionType
* SectionTypeId
* SectionTypeName

字段
*字段 ID * 部分 ID
*
字段 名称

FieldValue
* FieldValueId
* FieldId
* FieldValueValue
* Current Value （这有点因为组合框可以有多个值，但我想显示选择了哪个值。同样，列表框可​​以选择多个值）
* PageId

因此，根据部分类型创建了一个包含部分的页面。每个部分都有 x 个字段，然后显然每个页面字段可以有不同的值，这就是为什么 FieldValue 有 pageId 但将 pageId 放入 FieldValue 感觉很奇怪，但我看不到其他方法。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:48:57.207

我认为你在正确的一般轨道上。

我担心的一个领域是每一页上部分的排序——我认为你的 Page_Section 表需要一个额外的列`SeqNo SMALLINT NOT NULL`，它以递增顺序获取值（它们不必是连续的），所以当你按 SeqNo 排序时，您的部分将在页面上以正确的顺序显示。

您可能需要一个类似的排序列用于部分中的字段。

您的字段表可能需要一些字段类型信息。

也许您的 FieldValue 表应该重命名为 PageFieldValue；它旨在将值与特定页面上的字段相关联。只要一个给定的字段在一个页面上不能出现多次，重命名的表就会被准确命名；它包含指定页面上字段的值。目前尚不清楚是否可以存在某种默认系统，以便如果页面没有为字段指定特定值，那么默认值就会生效。这可能值得考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:18:06.630

我的大问题是，你想记录什么？记录字段到部分和部分到页面的分配是否重要？或者是因为屏幕大小的限制等原因，记录恰好被分成多个部分和页面的业务数据？

例如，假设在第 1 页我们有客户姓名和地址，在第 2 页我们有帐号和电话号码。如果明天有人要重新设计屏幕以将帐号移动到第 1 页，那么您当前的数据库将需要重大数据更新才能将帐号的所有字段记录从第 2 页移动到第 1 页。如果这对您想要的任何内容都很重要与数据有关，例如如果您想查询“给我一个第 3 页上所有字段的列表”，那么就是这样，您的设计在这里是一个很好的设计。但是，如果字段与页面的关联只是一个巧合的事实，而不是您在查询中关心的事情，那么您就走错了方向。如果是这样的话，

也就是说，这是一个“屏幕布局数据库”，还是“客户信息数据库”或“产品数据库”之类的？如果它是一个屏幕布局数据库，那么您就在正确的轨道上。如果它是一个产品数据库，那么你就走错了路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T20:00:20.047

根据应用的不同，如果某个section有固定的字段并且被频繁访问，您可以对该section进行反规范化以提高查询性能。在某种程度上，你可以创建一个表section_x：

```
section_x
field_1
field_2
...
field_n 
```

您可以在此 wiki 页面上找到有关非规范化的更多信息：[https ://en.wikipedia.org/wiki/Denormalization](https://en.wikipedia.org/wiki/Denormalization)

# eclipse - eclipse、水晶报表、sql server 2008 中的 nvarchar 字段

> ID：13591810
> 
> 赞同：0
> 
> 时间：2012-11-27T19:43:04.220
> 
> 标签：eclipse, sql-server-2008, crystal-reports

我们的水晶报表不是在 eclipse 中开发的，我们正在尝试将它们迁移到 eclipse 中。

当我打开现有报告并单击“验证数据库”时，未识别 sql server 的所有 nvarchar 字段。Eclipse 在它们前面显示一个红色 x。

经过这些论坛后，我还没有找到解决方案。

我正在使用 Eclipse 3.6.2

有没有人遇到过同样的问题？或者知道解决办法。

谢谢你。

# sql - 每隔一列转置或反透视

> ID：13591818
> 
> 赞同：3
> 
> 时间：2012-11-27T19:43:45.007
> 
> 标签：sql, tsql, unpivot

基本上我想要做的是将每隔一列转换为一行，旁边有以下列数据。

源只能有两列，最多有一千和几百万行。我只是在每行的基础上这样做。我尝试过执行“UNION ALL”，但是在处理大表中的数百列时速度非常慢。

可能的解决方案是使用 UNPIVOT，尽管我能找到的每个示例都在做与我想要的不同的事情。

示例：查询前

```
Columns...
Apple | Apple Data | Banana | Banana  Data | Cranberry | Cranberry  Data | .... 

Data Returned... 
IOWA_PL_RLA | 1 | IOWA_PL_MATH | 1 | IOWA_SS_RLA 684 ..... 
```

示例：查询后

```
MeasureID  Score
CRCT_PL_RLA   | 1 
CRCT_PL_MATH  | 1 
CRCT_SS_RLA   |684 
..... 
```

希望我已经对自己进行了足够的解释，以便有人可以提供帮助，因为我在 T-SQL 方面只有中等经验。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T21:48:07.700

如果您使用的是 SQL Server 2008，我认为您应该考虑使用 CROSS APPLY (VALUES) 技术：

[http://www.sqlservercentral.com/articles/CROSS+APPLY+VALUES+UNPIVOT/91234/](http://www.sqlservercentral.com/articles/CROSS+APPLY+VALUES+UNPIVOT/91234/)

基本上，它是这样的：

```
SELECT
  x.NewColumn1,
  x.NewColumn2
FROM YourTable t
CROSS APPLY (
    VALUES
        (t.OldColumn1, t.OldColumn2),
        (t.OldColumn3, t.OldColumn4),
        ...
) x (NewColumn1, NewColumn2); 
```

这是一个可运行的示例：[http ://sqlfiddle.com/#!3/9a9d2/5/0](http://sqlfiddle.com/#!3/9a9d2/5/0)

# css - 自定义引导、编辑或覆盖

> ID：13591834
> 
> 赞同：0
> 
> 时间：2012-11-27T19:44:57.397
> 
> 标签：css, twitter-bootstrap

我想自定义我的 Bootstrap。更改字体（css3 @font-face），更改按钮背景等。

我可以编辑 bootstrap.css 还是应该添加样式表并覆盖默认样式？哪一个是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:49:02.427

我认为这取决于您的项目（也可能是您的个人喜好）。添加额外的 css 意味着需要阅读更多信息，但这也意味着您的所有自定义样式更有条理且易于更改。

我个人会保留原始文件，并为自定义样式创建一个新的 css。例如，想象一下，如果有更新版本的 Bootstrap，您将不得不逐行检查并修复差异。而且我还觉得，如果有人努力编写原始 css，它就会“附加”他/她的名字。修改它（至少不评论您的更改）会使它变成一个科学怪人怪物。

我会说最佳做法（对于这种情况或任何其他类似情况）是保留原始文件并添加您的自定义样式并在新的 css 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:51:23.453

今年早些时候，其他人回答了这个问题的更广泛的部分：

[引导最佳实践](https://stackoverflow.com/questions/10451317/twitter-bootstrap-customization-best-practices)

# android - Android drawable，左侧有背景和渐变

> ID：13591836
> 
> 赞同：5
> 
> 时间：2012-11-27T19:45:28.973
> 
> 标签：android, drawable, gradient, shape

W想要一个`drawable`在左边有背景和渐变的，大约是`10dp`宽的。

我想要实现的图像：

![在此处输入图像描述](../Images/16399c8a504b26f283aaca7259a00bf6.png)

1.  左边的红色渐变
2.  其余的背景

我怎样才能做到这一点？

我试过`layer-list`两种形状，但没有运气。

项目背景：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/background" />
    <item android:drawable="@drawable/gradient" />
</layer-list> 
```

背景可绘制：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <solid android:color="@color/black" />
</shape> 
```

形状可绘制：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
android:shape="rectangle">
    <gradient android:startColor="#FFFF0000" android:endColor="#80FF00FF"
        android:angle="90"/>
       <size android:width="10dp" />
</shape> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T22:23:49.803

在drawable文件夹中创建**sidecolor**（或您想要的任何名称）**XML ，如下所示：**

```
 <?xml version="1.0" encoding="utf-8"?>
  <layer-list xmlns:android="http://schemas.android.com/apk/res/android">  
    <item android:drawable="@drawable/background" android:bottom="5dp"
        android:top="5dp"  android:left="5dp" android:right="5dp"/>  
    <item android:drawable="@drawable/red" android:bottom="5dp"  android:top="5dp"
        android:left="5dp" android:right="280dp" /> 
  </layer-list> 
```

然后创建背景 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
   <shape xmlns:android="http://schemas.android.com/apk/res/android"
               android:shape="rectangle">
        <solid android:color="@android:color/black" />    
   </shape> 
```

然后将红色 XML 作为形状：

```
 <?xml version="1.0" encoding="utf-8"?>
   <shape xmlns:android="http://schemas.android.com/apk/res/android"  
         android:shape="rectangle">       
      <solid android:color="#B22222" /> 
  </shape> 
```

输出图像：

![在此处输入图像描述](../Images/d6a7d0f83d764b8dc3ac002d4fa3a02e.png)

您还可以将红色 XML 创建为渐变：

```
 <?xml version="1.0" encoding="utf-8" ?> 
    <shape xmlns:android="http://schemas.android.com/apk/res/android"  
            android:shape="rectangle">
      <gradient android:startColor="#B22222" android:centerColor="#FFFFFF" 
           android:endColor="#B22222" android:angle="0" /> 
     </shape> 
```

输出图像：

![在此处输入图像描述](../Images/32d691b54d2d037feebd8d4398533c55.png)

**更新：**

您也可以通过这种方式将其对齐到左侧，也可以根据需要控制其大小，

首先创建一个 XML 并将其命名为 side color.xml 并通过以下方式引用它：

```
android:background="@drawable/sidecolor" 
```

sidecolor.xml：

```
 <?xml version="1.0" encoding="utf-8" ?>    
     <layer-list xmlns:android="http://schemas.android.com/apk/res/android">

   <item>
        <shape android:shape="rectangle">
             <solid android:color="#FF0000" />        
       </shape>    
  </item>

  <item android:left="10dp">
       <shape android:shape="rectangle">
            <solid android:color="#000000" />
       </shape>
  </item>
     </layer-list> 
```

输出图像：

![在此处输入图像描述](../Images/3b2988a370073c4de93d910ff5c7b6c4.png)

希望对您有所帮助。

# java - Java - 平均线性图

> ID：13591837
> 
> 赞同：3
> 
> 时间：2012-11-27T19:45:40.403
> 
> 标签：java, range, coordinates, average

我有一段代码检查给定的 3 个坐标是否彼此线性（如果是，则返回 true）。但是有没有办法让代码给出或占用几个像素/图？

```
private boolean collinear(double x1, double y1, double x2, double y2, double x3, double y3) {
    return (y1 - y2) * (x1 - x3) == (y1 - y3) * (x1 - x2);
} 
```

你看，坐标必须完全内联才能注册为线性。我怎样才能让它看起来在某种“范围”内，让它在一个值内检查，然后用新值设置坐标？

- - 添加 - -

我正在尝试查看这 3 个点是否构成一条直线，但我希望它在一个阈值内进行检查（因为有些点可能会偏离一点点）。一旦 Java 发现这些点实际上是线性的（给或取），我希望它用 Java 检查的值替换 x1、x2、x3、y1 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:54:03.037

使用黑森范式，您可以计算从点到线的垂直距离。因此，当距离小于一个门槛时，它们就足够近了。

此类代码称为`distanceFromLine`() Java 内置

```
 Line2D line = new Line2D.Double(x0, y0, x1, y1);

    double distance = line.ptLineDist(px, py);

    if (Math.abs(distance) < threshold) {
              // is Near line
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:04:57.867

您是否正在寻找满足某些特定公式的公差，或者只是一般来说，“接近”？

如果您只是在寻找一般的“关闭”，那么只需检查一些有用范围内的差异而不是相等。例如

```
return Math.abs((x1-x2)*(y1-y3)-(y1-y2)*(x1-x3))<tolerance; 
```

如果您有一些特定的规则，例如“第三个点必须在前两个点形成的线的 2 个像素内”或类似的规则，那么您当然必须研究任何规则并编写明确实现它的代码。

# postgresql - 在 postgresql 中使用时区的策略

> ID：13591838
> 
> 赞同：5
> 
> 时间：2012-11-27T19:45:48.310
> 
> 标签：postgresql, datetime, timezone, timestamp

我需要在我的应用程序中使用多个时区。

基本上，我的系统生成数据，地球上任何地方的客户都可以访问它。

由于我的数据具有关联的时间戳，因此我考虑了以下处理时区的策略。

在 Postgres 中：

*   `::timestamptz`使用我的时间戳类型创建我的表。没有时区的时间戳将不允许混合`::timestamp`，`::timestamptz`在我的情况下看起来像一个定时炸弹。

*   将我的 PG 服务器系统的时区设置为 UTC。

*   设置（如果系统的 TZ 是 UTC `timezone='UTC'`，`postgresql.conf`则可能不需要，但我有点偏执，它没有花费我任何费用）。

*   创建我的表时添加以下检查：

    约束 timestamp_must_be_utc CHECK (date_part('timezone'::text, "my_timestamp_field") = 0::double precision)

*   以 UTC 存储我所有的时间戳

在客户端（python + [pytz](http://pytz.sourceforge.net/)）

*   将客户的时区存储在他的个人资料中，例如`'America/Los Angeles'`

*   在查询数据时将时区信息发送到 postgres，这样我就可以获得类似的东西`SELECT xxxx FROM yyyy WHERE my_ts >= '2012-11-27 19:13:00+01'::timestamptz`并让 Postgres 转换为 UTC。或者，我可以使用[pytz](http://pytz.sourceforge.net/)进行转换，但似乎 Postgres 可以很好地完成这项工作。

*   根据客户的时区转换时间戳，以便我可以正确显示数据 + 时间戳。

总而言之，我计划在任何地方都使用 UTC 来存储和查询数据，并在显示数据时只进行时区转换。

我对 Postgres 及其处理时区的方式没有太多经验。我知道在不同时区处理日期和时间是多么困难（一旦你必须处理航班时刻表，你就会很难学会使用 UTC 是进行日期和时间计算的唯一可靠方法）这就是我问的原因这个问题让比我更有经验的postgres用户可以确认或纠正我的策略。

有趣的链接：

*   [https://stackoverflow.com/a/9576170/1121179](https://stackoverflow.com/a/9576170/1121179)
*   [https://stackoverflow.com/a/10462428/1121179](https://stackoverflow.com/a/10462428/1121179)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T20:28:45.600

根据喜好为自己泡杯茶/咖啡，留出一个小时左右的时间，阅读手册中有关[时间戳](http://www.postgresql.org/docs/current/static/functions-datetime.html)处理的[详细信息。](http://www.postgresql.org/docs/current/static/datatype-datetime.html)玩一下，一切都会变得清晰。

如果您使用“带时区的时间戳”（timestamptz），则处理不同的时区没有问题。它确实应该被命名为“绝对时间戳”，并且在内部*是*UTC。不存储时区部分，它仅用于获取绝对时间。

所以 - 确保您的所有时间戳都包含更新时的相关时区，然后适当地设置您的客户端时区。无论提供的时区如何，它们都将在客户的时区返回给您。

它确实变得繁琐的地方在于处理一天并不总是 24 小时（有时一小时不是 3600 秒）以及 DST 发生在不同日期的事实，具体取决于国家和历史。不过那不是 PostgreSQL，那只是现实世界。

# ubuntu - aam-opencv 在 FindOpenCV.cmake 中运行失败

> ID：13591839
> 
> 赞同：1
> 
> 时间：2012-11-27T19:45:51.250
> 
> 标签：ubuntu, opencv, cmake

我想运行 aam-opencv [http://code.google.com/p/aam-opencv/的代码](http://code.google.com/p/aam-opencv/)

在 FindOpenCV.cmake 中，它写道

```
FIND_LIBRARY(OpenCV_CV_LIBRARY
NAMES cv opencv
PATHS ${OpenCV_ROOT_DIR}
PATH_SUFFIXES ${OpenCV_LIBDIR_SUFFIXES} ) 
```

和

```
IF (OpenCV_${NAME}_INCLUDE_DIR AND OpenCV_${NAME}_LIBRARY)
LIST(APPEND OpenCV_INCLUDE_DIRS ${OpenCV_${NAME}_INCLUDE_DIR} )
LIST(APPEND OpenCV_LIBRARIES ${OpenCV_${NAME}_LIBRARY} )
#DBG_MSG("appending for NAME=${NAME} ${OpenCV_${NAME}_INCLUDE_DIR} and ${OpenCV_${NAME}_LIBRARY}" )
ELSE (OpenCV_${NAME}_INCLUDE_DIR AND OpenCV_${NAME}_LIBRARY)
DBG_MSG("OpenCV component NAME=${NAME} not found! "
"\nOpenCV_${NAME}_INCLUDE_DIR=${OpenCV_${NAME}_INCLUDE_DIR} "
"\nOpenCV_${NAME}_LIBRARY=${OpenCV_${NAME}_LIBRARY} ")
SET(OpenCV_FOUND OFF)
ENDIF (OpenCV_${NAME}_INCLUDE_DIR AND OpenCV_${NAME}_LIBRARY) 
```

但它找不到 OpenCV_CV_LIBRARY，例如 cv、opencv、CXCORE CVAUX HIGHGUI，因为我的 opencv lib 目录中没有 cv.so、opencv.so。有人成功运行它吗？我应该怎么办？

# ios - ios - 不明白如何在动态填充列表时正确使用数组

> ID：13591843
> 
> 赞同：1
> 
> 时间：2012-11-27T19:46:06.763
> 
> 标签：ios, ios5, nsmutablearray

我试图弄清楚如何创建一个填充 UITableView 的字符串列表，并确保每个单元格都有适当的大小以适合每个字符串（某些字符串可能会变得很长）

我想要做的是声明一个 tempArray 以在我填充数组时保存项目列表。

在我的 .h 文件中，我这样声明：

```
@interface BusinessTopicController : UIViewController <UITableViewDataSource, UITableViewDelegate>
 ....

@end

NSMutableArray *newArray; 
```

但是当我尝试这样做时，在 .m 文件中：

```
@implementation BusinessTopicController
@synthesize newArray; 
```

我收到此语法错误：

属性实现必须在@interface 中声明

但是当我将它添加到@interface

```
@property (nonatomic, retain) NSMutableArray *newArray; 
```

然后它在@synthesize newArray 上给了我一个不同的错误；这条线是：

```
Property's synthesized getter follows cocoa naming convention for returning 'owned' objects 
```

我用谷歌搜索了这个问题，解决方案似乎有点矫枉过正，因为在我看来，我只是在某个地方犯了一些愚蠢的错误。

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:47:32.620

生成“*属性的合成 getter 遵循可可命名约定*...”编译器错误，因为您的属性以开头，`new`这意味着合成的 getter 方法以 开头`new`，并且为返回 +1 保留对象的方法保留。因此，请尝试为该属性找到另一个名称。

使用最新版本的 Xcode 和 clang 编译器，您只需要`@property`在接口中声明。您甚至可以跳过`@synthesize`并且会为您合成一个带下划线前缀的 ivar。完全删除该`NSMutableArray *newArray;`行，因为它位于界面之外并且本质上是一个全局变量。

如果您想保持属性私有，您还可以在 .m 文件中的匿名类别/类扩展名中声明它，如下所示：

```
// At the top of BusinessTopicController.m
@interface BusinessTopicController ()

@property (nonatomic, retain) NSMutableArray *theArray;

@end 
```

# visual-studio-2012 - 构建机器单元测试

> ID：13591846
> 
> 赞同：2
> 
> 时间：2012-11-27T19:46:13.763
> 
> 标签：visual-studio-2012, build-automation, microsoft-fakes

通过 TFS 运行自动化构建有什么要求，其中解决方案包含使用[Microsoft Fakes 框架的](http://msdn.microsoft.com/en-us/library/hh549175.aspx)单元测试？

我现在有一台使用 VS 2010 和 .NET 4.0 的构建机器。我知道可以安装 VS 2012 Ultimate。我将如何定位 VS 2012 而不是 2010？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:04:14.980

构建服务器上当前需要 TFS 2012 和 Visual Studio 2012 才能使用 Fakes 构建和运行测试。

# python - CScript Unicode 标志在 Windows 8 的 Python 程序中不起作用

> ID：13591848
> 
> 赞同：0
> 
> 时间：2012-11-27T19:46:13.997
> 
> 标签：python, unicode, wsh

我有一个在 Windows 上使用 Python 2.5 的应用程序。它使用 WScript 来获取一些数据。返回的数据可能有多种语言的内容，所以我需要支持获取Unicode数据。

在 Windows 8 之前，这工作得很好。但是，在 Windows 8 中，请求 Unicode 响应无法将数据返回给 Python 程序。CScript 调用的命令行版本仍然有效。

这是一个显示问题的简化 Python 脚本：

```
import subprocess
cmd = ["cscript","//NoLogo","//U","testscript.js"]
startupinfo = subprocess.STARTUPINFO()
startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW
proc = subprocess.Popen(cmd, shell=False, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE, close_fds=False, startupinfo=startupinfo)
(sout, serr) = proc.communicate()
print repr(sout) 
```

`testscript.js`包含单行的简单 WScript 文件在哪里（另存为 UCS-2 编码文件）：

```
WScript.Echo("Test 日本語"); 
```

在 Windows XP、Windows Vista 或 Windows 7 上运行此程序可正确打印

```
'T\x00e\x00s\x00t\x00 \x00\xe5e,g\x9e\x8a\r\x00\n\x00' 
```

在 Windows 8 上运行它会打印 '' （因为输出是一个空字符串）。如果我从对 CScript 的调用中删除“//U”参数，我会得到“Test ???\r\n”，这对于获取我的 unicode 数据不是很有用。

有谁知道如何`subprocess.Popen`在 Windows 8 上从 Python 获取 Unicode 结果？我使用的是 Python 2.5，因为这是第一次编写此代码时的当前版本。我用 Python 2.7.3 试过这个，它有同样的问题。

# objective-c - 外部笔尖中的表格视图单元格。故事板

> ID：13591850
> 
> 赞同：1
> 
> 时间：2012-11-27T19:46:21.747
> 
> 标签：objective-c, ios

所以我一直在故事板中构建一个表格视图，并使用我的自定义 UITableViewCell 创建了一个外部 Nib 文件。一切都很好。但是，表格视图单元格上有一个按钮，我想通过 segue 将其连接到情节提要中的视图。现在我对这一切还是很陌生，那么如何将自定义单元格上的按钮连接到情节提要中的视图控制器？我完全错了吗？如果是这样，我将如何快速轻松地重组我的项目？如果您能提供一点解释，我将不胜感激，以便我从中学习。

感谢您的帮助，
问候，
迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:12:34.823

可以使用情节提要在情节提要的 UITableViewCell 内设置按钮。我以前做过类似的事情。所以，这是一个解决方案；

*   在 UITableView 单元格中创建原型单元格并向其添加 UIButton。
*   创建从按钮到新视图控制器的 segue，然后选择模式或推送。

现在，在 UITableViewData 数据源 cellForRowAtIndexPath;

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
    if(!cell){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
    }
    UIButton *button = ((UIButton*)[cell.contentView.subviews objectAtIndex:0])
    button.tag = indexPath.row;
    cell.textLabel.text = @"Hello Text"
    ;
    return cell;
} 
```

现在，当您单击按钮时，您的 prepareForSegue: 会被调用。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"identifier"]){
        UIButton *button = (UIButton*)sender;
        NewViewController *viewController = [segue destinationViewController];
       if(button.tag == 1)
          viewController.someobject = ...
       else 
          viewController.somobject = ...
    }
} 
```

这应该有效。

# jquery - jQuery 可移动模态对话框

> ID：13591851
> 
> 赞同：8
> 
> 时间：2012-11-27T19:46:23.313
> 
> 标签：jquery, html, css

我一直在查看所有可用的 jQuery 插件，用于可拖动的模态框。唯一的问题是我发现的每个可拖动的模态框都需要一个标题栏。有谁知道任何允许我创建没有标题栏的可拖动模式框的 jQuery 插件？在这种情况下，您可以通过框的边框拖动它。有什么方法可以让我在一段时间内使用 jQuery UI Draggable 使其成为模态？

![在此处输入图像描述](../Images/ceb9779162623f8486a20f51d49ed2b4.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T20:25:31.313

只是制作自己的模态？有制作叠加层的教程，但基本功能并不是那么难。

小提琴：http: [//jsfiddle.net/calder12/mxWf8/1/](http://jsfiddle.net/calder12/mxWf8/1/)

HTML：

```
<head>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</head>
<​div id="modal"></div>
<a href="#" class="click">click me</a>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
#modal{
border:4px solid #CCC;
width:100px;
height:50px;
display:none;
position:absolute;
left:50%; 
top:50%;
margin:-25px 0 0 -50px;
border-radius:5px;
}   ​ 
```

jQuery：

```
$('.click').click(function(){
$('#modal').show();
$('#modal').draggable();   
});​ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-16T15:44:21.487

这个简单的方法对我有用：

```
// first invoke jquery modal the standard way
$('#myModal').modal();

// now make it draggable
$('#myModal').draggable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T22:36:15.593

jqModal 和 jqDnR 的组合将执行此操作：

*   [http://dev.iceburg.net/jquery/jqModal/](http://dev.iceburg.net/jquery/jqModal/)
*   [http://dev.iceburg.net/jquery/jqDnR/](http://dev.iceburg.net/jquery/jqDnR/)

# java - JSONObject 不转换 toString() 中的对象属性

> ID：13591852
> 
> 赞同：0
> 
> 时间：2012-11-27T19:46:32.907
> 
> 标签：java, json

我正在尝试转换一个对象，并且该对象具有一个 ArrayList 对象，该对象具有属性和一个整数。

但是当我在 JSON 对象上使用 toString() 时，我得到的是指针而不是对象：

```
{"class":"class model.ListResult","listVideo":["model.Video@706a4d1a","model.Video@52ec1f9e","model.Video@c0fe89a","model.Video@686fdca5","model.Video@7ff0a34","model.Video@78f6e005","model.Video@17eda64e","model.Video@73415727","model.Video@46c0fc8e"],"numberOfResult":109} 
```

这是我的课程的代码：

```
public class ListResult implements Serializable {

    private int numberOfResult;
    private ArrayList<Video> listVideo;

    /**
     * Constructor
     * 
     * @param allVideoNumber
     * @param listVideo2
     */
    public ListResult(int numberOfResult, ArrayList<Video> listVideo) {

        this.numberOfResult = numberOfResult;
        this.listVideo = listVideo;

    }

    public int getNumberOfResult() {
        return numberOfResult;
    }
    public void setNumberOfResult(int numberOfResult) {
        this.numberOfResult = numberOfResult;
    }
    public ArrayList<Video> getListVideo() {
        return listVideo;
    }
    public void setListVideo(ArrayList<Video> listVideo) {
        this.listVideo = listVideo;
    }

} 
```

我的方法调用：

```
public String getListJson(boolean escape, int from, int number, String order, String by, ArrayList<Category> listCategory) throws Exception {

    //get list of video
    ArrayList<Video> listVideo = dbVideo.getAll(from, number, order, by, listCategory);

    JSONObject jsObject = new JSONObject(new ListResult(dbVideo.getAllVideoNumber(listCategory), listVideo));

    if(escape) {
        String  r;

        r = jsObject.toString();
        r = r.replace("\\", "\\\\");
        r = r.replace("'", "\\'");

        return r;

    }

    return jsObject.toString();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:52:21.967

It's probably because the `toString()` method calls all the other objects' `toString()` method and those are not overridden. That gives the effect that they will print their name (the class name) and the "address" that they are located at in the JVM. One way to solve this would be to override said method and give it some better implementation. Although i don't know if this is a good idea and perhaps you should have a look at serialization instead if you want to do this a lot. But for this simple case i think a simple override of the `toString()` method should suffice if it doesn't break some other functionality. What i mean is something along these lines:

```
class Video {
    public String toString() {
        return this.title + " " + this.yearOfRelease;
    }
} 
```

Where you perhaps need to edit this to be the proper JSON output.

Although i should add that im not certain about this and just guessing how the toString() method for JSONObject works. It could be something entirely different. But it's worth a shot!

Edit: After looking a little at the JSONObject docs: [http://www.json.org/javadoc/org/json/JSONObject.html](http://www.json.org/javadoc/org/json/JSONObject.html) It would seem that you should use the `put()` method to insert your elements, and then use the `toString()` method. Ie, you would need to loop over all elements in the list and add them one by one. Or the override of `toString()` in your Video class might do the work.

Edit2: Furthermore it would seem that [http://www.json.org/javadoc/org/json/JSONObject.html#put%28java.lang.String,%20java.util.Collection%29](http://www.json.org/javadoc/org/json/JSONObject.html#put%28java.lang.String,%20java.util.Collection%29) is of interest to you, it will take a Collection which your list should be, that could perhaps solve things.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T16:07:34.810

Old post, but anyway here's what solved my problem. You must have **getters** (and **setters**?) for all of your attributes of Video object!

# android - 没有这样的列：_id:，但是有

> ID：13591857
> 
> 赞同：0
> 
> 时间：2012-11-27T19:46:42.640
> 
> 标签：android, sqlite

我在我的 SQLite 数据库中创建了一个视图，它包含两个 _id 列和此语句创建的一些其他信息：

```
CREATE VIEW IF NOT EXISTS journeyProfileContactsView AS SELECT JourneyProfile._id, JourneyProfile.TITLE, ContactsProfiles._id, ContactsProfiles.NAME, ContactsProfiles.NUMBER FROM ProfileToContacts INNER JOIN JourneyProfile ON ContactsProfiles._id=ProfileToContacts.contactID INNER JOIN ContactsProfiles ON JourneyProfile._id=ProfileToContacts.profileID 
```

并且一直在努力解决这个错误一段时间：

```
11-27 19:30:04.686: E/AndroidRuntime(12946): Caused by: android.database.sqlite.SQLiteException: no such column: _id: , while compiling: SELECT * FROM journeyProfileContactsView WHERE _id=1 
```

我确定该列确实存在，我已经在 SQLite Manager 中打开了视图，并且可以确认该列作为 _id 存在（另一列是 _id:1），尽管检查游标表明它实际上可能是 JourneyProfile._id .

我试过了：

```
"JourneyProfile._id=" + id
"_id=" + id 
```

它真的难倒我，我不确定我哪里出错了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:14:26.500

问题在于使用旧视图。当表结构发生变化时，我强制重新创建我的视图，这已经解决了它。

# python - 如何在python中解析JSON日期时间字符串？

> ID：13591858
> 
> 赞同：3
> 
> 时间：2012-11-27T19:46:44.823
> 
> 标签：python, json

我正在从 python 调用一个以 JSON 格式返回数据的远程 API。然后我使用带有 json.loads() 的 json 模块解析数据。我遇到的问题是日期 - 我正在调用的系统返回格式如下的日期：

```
/Date(1354011247940+0000)/ 
```

其中 json.parse 只是解析为字符串。如何将其转换为 python 日期时间对象？

编辑：与[将 JSON 转换为 Python 对象不同：如何处理 DateTime 转换？](https://stackoverflow.com/questions/8362312/convert-json-to-python-object-how-to-handle-datetime-conversion)，我无法控制正在发送的数据，所以我不能在序列化之前简单地更改格式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:52:36.737

您应该从此日期获取带有正则表达式的 unix 时间戳，然后使用 datetime 模块将其转换为可读格式：

```
>m = re.search(r"Date\((\d+)\+", 'Date(1354011247940+0000)')
>print(datetime.datetime.fromtimestamp(int(m.group(1))/1000.0).strftime('%Y-%m-%d %H:%M:%S'))
2012-11-27 12:14:07 
```

UPD：请注意，您在此日期也有毫秒，它们将被此代码截断

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:03:46.987

您是否检查过[将 JSON 转换为 Python 对象：如何处理 DateTime 转换？](https://stackoverflow.com/questions/8362312/convert-json-to-python-object-how-to-handle-datetime-conversion)?

这看起来非常相似 - 并且是moonsly提供的另一种方式，虽然，我认为moonsly提供了比其他类似线程（IMO）中提供的更“pythonic”的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-11T23:47:15.433

我无法将此添加到moonsly 的答案（无代表）的评论中，因此我将其作为单独的答案。只是想添加一些其他人可能会觉得有用的东西。我有同样的问题，但 json 日期出现在我的数据中略有不同（即没有 + 号）：

```
/Date(1416458650000)/ 
```

有 9 或 13 个字符串。9 个字符字符串不需要除以 1000.0。我也没有使用正则表达式来提取时间字符串。

```
MILLISECONDS = '/Date(1416458650000)/'.split('(')[1][:-2]
print datetime.datetime.fromtimestamp(int(MILLISECONDS)/1000.0).strftime('%Y-%m-%d %H:%M:%S')
2014-11-20 15:44:10 
```

我也可以

```
SECONDS = '/Date(1416458650000)/'.split('(')[1][:-5]
print datetime.datetime.fromtimestamp(float(SECONDS)).strftime('%Y-%m-%d %H:%M:%S')
2014-11-20 15:44:10 
```

# javascript - 如何使用正则表达式获取字符串中的匹配数？

> ID：13591863
> 
> 赞同：3
> 
> 时间：2012-11-27T19:47:04.370
> 
> 标签：javascript, regex

我最近开始学习正则表达式。我现在有一个小问题陈述。

我有这样的模式

```
var pattern = /^(?:hawaian(?:beach|pizza|hotel))$/gim;
var text = "hawaian hotel is near hawaian beach. In the hawaian hotel they sell hawaian pizza"; 
```

我想在本文中实际匹配夏威夷酒店、夏威夷海滩和夏威夷披萨。

但是这种模式只在 hawaiianhotel 这样的条件下才回归真实 || 夏威夷海滩|| 夏威夷披萨。

所以我试过这样

```
 var text = "hawaianhotel is near hawaianbeach. In the hawaianhotel they sell hawaianpizza"; 
```

但这也行不通。

只有这个在工作

```
var matches = pattern.exec('hawaian*'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:55:26.593

```
(?:hawaiian[ ](?:beach|pizza|hotel)) 
```

这将匹配夏威夷披萨

请注意 [ ]，例如，如果您想匹配 hawaiian2hotel，您将执行 [0-9] 或 [2]，或者如果您想匹配“hawaiian（任意数量的空间）酒店”，您将执行 []*（零个或多个) 或 [ ]+（一个或多个）

另外，这是一个很棒的工具 [http://iblogbox.com/devtools/regexp/](http://iblogbox.com/devtools/regexp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:53:32.377

您的模式使用字符串锚点的开头和结尾，因此只有当模式与整个字符串匹配时，您才会匹配字符串。删除`^`and`$`你应该没问题。请注意，我还添加了一个空格，以便您可以匹配“hawaian hotel”而不是“hawaianhotel”。

```
var pattern = /(?:hawaian (?:beach|pizza|hotel))/gim; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T00:08:54.243

```
var pattern = /(?:hawaian[ ](?:beach|pizza|hotel))/gim; 
```

# c++ - 将位图转换为 Iplimage 时出错

> ID：13591874
> 
> 赞同：2
> 
> 时间：2012-11-27T19:47:51.453
> 
> 标签：c++, .net

我有一个必须转换为 Open Cv 图像的 .net 位图

在 .net 方面，我正在执行以下操作：

```
 b = new Bitmap(@"C:\Projects\samples\alfarok.jpg");
 b = b.Clone(new Rectangle(0, 0, b.Width, b.Height), PixelFormat.Format24bppRgb);
 Rectangle rect = new Rectangle(0, 0, b.Width, b.Height);
 BitmapData bmpData = b.LockBits(rect, ImageLockMode.ReadWrite, b.PixelFormat);
 IntPtr ptr = bmpData.Scan0;
 int stride = bmpData.Stride;
 int numBytes = b.Width * b.Height * 3;
 byte[] rgbValues = new byte[numBytes];
 for (int r = 0; r < bmpData.Height; ++r)
    Marshal.Copy(new IntPtr((int)ptr + stride * r), rgbValues, bmpData.Width * 3 * r, bmpData.Width * 3);
    wrapper.DetectDocumentPatter(b.GetHbitmap(), rgbValues,b.Width,b.Height, numBytes); 
```

在 umanaged 中，我收到一个 HBITMAP 句柄和字节数组。我正在尝试先构建 DIB 映像，但通常会抛出异常：`std::bad_alloc at memory location 0x004ffb6c`.

```
BITMAP bmp;
HDC hdc = GetDC(NULL);
GetObject(b,sizeof(tagBITMAP),&bmp);
long dwcBihSize = sizeof(BITMAPINFOHEADER);
long dwSize = dwcBihSize +(2>>bmp.bmBitsPixel) * sizeof(RGBQUAD) + ((bmp.bmBitsPixel * width) * height);
LPBITMAPINFO pDIB =(LPBITMAPINFO) new BYTE[dwSize]; // check this ! 
pDIB->bmiHeader.biSize = dwcBihSize;
pDIB->bmiHeader.biWidth = width; 
pDIB->bmiHeader.biHeight = height;
pDIB->bmiHeader.biBitCount = bmp.bmBitsPixel;
pDIB->bmiHeader.biPlanes = 1;
pDIB->bmiHeader.biCompression = BI_RGB;
pDIB->bmiHeader.biXPelsPerMeter = 1000 ;
pDIB->bmiHeader.biYPelsPerMeter = 1000;
pDIB->bmiHeader.biClrUsed = 0;
pDIB->bmiHeader.biClrImportant = 0;
LPRGBQUAD lpColors =(LPRGBQUAD)(pDIB+pDIB->bmiHeader.biSize);
SetDIBColorTable(hdc,0,2>>bmp.bmBitsPixel * sizeof(RGBQUAD),lpColors);
int dibCols = 2>>pDIB->bmiHeader.biBitCount;
void* bitArray = pDIB + pDIB->bmiHeader.biSize+dibCols *sizeof(RGBQUAD);
for(int i=0;i<dibCols;i++)
{
  lpColors[i].rgbRed=0;
  lpColors[i].rgbBlue=0;
  lpColors[i].rgbGreen=0;
  lpColors[i].rgbReserved=0;
} 
SetDIBColorTable(hdc,0,dibCols,lpColors);
int depth =bmp.bmBitsPixel == 1 ? IPL_DEPTH_1U : IPL_DEPTH_8U;
int nChannels = 3;
//IplImage* image= cvCreateImage(cvSize(width,height),depth,3);
GetDIBits(hdc,b,0,height,bitArray,pDIB,DIB_RGB_COLORS);
//image->imageData = (char*)bitArray;
//memcpy(image->imageData,(char*)(bmp.bmBits),bmp.bmHeight*bmp.bmWidth*3);
//cvSaveImage("c:\img.jpg",image); 
```

我做对了，还是有更合适的方法？为什么会`std::bad_alloc at memory location 0x004ffb6c`抛出错误？

# javascript - 将活动状态添加到 标签

> ID：13591879
> 
> 赞同：1
> 
> 时间：2012-11-27T19:48:07.050
> 
> 标签：javascript, jquery

我不确定这是否可能。如果不是，我可以添加一个数据状态或类，对吧？

好的，所以我的第一个问题是......如果选择了新标签，我如何在悬停时添加活动状态`<li>`并将其从先前悬停的标签中删除。我想我需要为此使用兄弟姐妹，但我如何让它去 :active 我没有线索。如果不可能，上面的任何选项似乎都很好......我只是想学习如何。

```
#menubar li {
    background: rgba(20, 20, 20, .3);
    margin: 10px 0;
    padding: 5px 0;
    width: 50%;
    cursor: pointer;
}

#menubar li:active {
    width: 100%;
}

<ul id="menubar">
    <li><a href="head.php">Head</a></li>
    <li><a href="body.php">Body</a></li>
    <li><a href="settings.php">Settings</a></li>
    <li><a href="">None</a></li>
    <li><a href="">None</a></li>
</ul> <!-- menubar CLOSE --> 
```

所以如前所述，我不确定是否可以添加活动状态，`<li>`但我仍然需要询问。

如果不是这样的事情更受欢迎。

```
<li data-state="active"></li> 
```

或者

```
<li class="activeItem"></li> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:51:19.130

你必须使用类：

```
$('li').hover(function() {
    $(this).addClass('active');
}, function() {
    $(this).removeClass('active');
}); 
```

`:active`伪类仅用于链接（如 Juan Mendes 所指出的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:53:36.397

你只要这样做——

```
$('li').hover(
    function(){
        $(this).addClass('activeState');
}, function() {
       $(this).removeClass('activeState');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:59:15.210

mouseover 的替代方法（由 Sidharth Mudgal 建议）是使用焦点事件，如果您点击链接，它将起作用

[http://jsfiddle.net/QXap5/1/](http://jsfiddle.net/QXap5/1/)

```
$('li a').focus(function(){
  $(this).closest('li').addClass('active');
});

$('li a').blur(function(){
  $(this).closest('li').removeClass('active');
}); 
```

# windows - '-mwindows' 的 Visual Studio 2008 C++ 命令行选项（来自 MinGW）

> ID：13591881
> 
> 赞同：1
> 
> 时间：2012-11-27T19:48:19.340
> 
> 标签：windows, visual-studio-2008, mingw

我一直在使用 MinGW 来编译程序，但决定我应该使用 IDE 并获得 Visual Studio 2008 Express Edition。在 MinGW 中，每当我创建 OpenGL 程序或 Windows 程序时，我都会使用命令行选项“-mwindows”，这样当我运行 .exe 时，实际程序就会运行，并且不会显示命令提示符。所以我想知道`-mwindows`Visual Studio 2008 的等价物是什么？

# c++ - C ++在派生类中初始化基类的const int？

> ID：13591886
> 
> 赞同：7
> 
> 时间：2012-11-27T19:49:01.530
> 
> 标签：c++, class, constants, derived-class

我的基类中有一个常量 int 变量，我想在派生类中用不同的值（作为参数）初始化响应变量，这可能吗？

这是我所做的：

```
// Base.h (methods implemented in Base.cpp in the actual code)
class Base {
    public:
        Base(const int index) : m_index(index) {}
        int getIndex() const { return m_index; }
    private:
        const int m_index;
};

// Derived.h
class Derived : public Base {
    public:
        Derived(const int index, const std::string name) : m_name(name) {}
        void setName(const std::string name) { m_name = name; }
        std::string getName() const { return m_name; }
    private:
        std::string m_name;
}; 
```

但显然它在问我`Base::Base()`哪个不存在，如果我定义它，我将不得不为 提供默认值`m_index`，这是我不想做的。我必须`const int m_index`在每个派生类中单独定义吗？

类似的问题，但我不确定静态是否会以任何方式影响这一点： [C++：在派生类中使用不同的值初始化基类常量静态变量？](https://stackoverflow.com/questions/2682063/c-initializing-base-class-constant-static-variable-with-different-value-in-d)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-27T19:50:09.377

只需在的初始化列表中调用适当的`Base`构造函数：`Derived`

```
Derived(const int index, const std::string name) : Base(index), m_name(name) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:51:35.067

您可以像这样调用基本构造函数：

```
class B1 {
  int b;
public:    
  // inline constructor
  B1(int i) : b(i) {}
};

class B2 {
  int b;
protected:
  B2() {}    
  // noninline constructor
  B2(int i);
};

class D : public B1, public B2 {
  int d1, d2;
public:
  D(int i, int j) : B1(i+1), B2(), d1(i)
  {
    d2 = j;
  }
}; 
```

从 c++11 开始，您甚至可以使用同一类的构造函数。该功能称为委托构造函数。

```
Derived(){}
Derived(const int index, const std::string name) : Derived() {} 
```

# python - 使用 ReportLab 创建 Python/PDF - 自制网格打印有图案但在屏幕上看起来不错

> ID：13591887
> 
> 赞同：5
> 
> 时间：2012-11-27T19:49:06.737
> 
> 标签：python, pdf, printing, postscript, reportlab

我正在尝试制作自己的网格（看起来非常像这样： [http](http://tinyurl.com/cdyre6k) ://tinyurl.com/cdyre6k - 以毫米为公制单位的心电图纸）。

我正在使用 ReportLab/Python（开源）来制作这些报告。下面是我的代码片段。

在屏幕上，它看起来很棒！：

![>我在屏幕上看到的<](../Images/78ac70950113fe011617931c08ca15fc.png)

但是，当我将它发送到打印机时（是的，我还修改了打印机设置）它会打印一些线条，而不是其他线条（有时它是有条不紊的并打印图案式格子，有时它是更粗/更细的线条; 请记住，打印机的输出是一致的，具体取决于我设置的笔画宽度）。

![>我在打印机上看到的！<](../Images/351f040fc2537dca8416f0f8a13cb492.png)

我尝试了各种笔画宽度组合，以及各种打印机设置组合……我无法正确打印！我尝试了替代打印机并获得了更好的结果，但我必须将打印机设置设置为超过 1200 dpi（CAD 级打印）。另一台打印机设置为 600dpi。在同一台打印机（600dpi）上，我打印了一份由前同事制作的文档，打印效果很好（请注意，他没有使用 ReportLab，所以我不能使用他的代码/解决方案）。

到底是怎么回事？这是打印机的别名问题吗？如果我将网格转换为位图（或其他格式）会对我有帮助吗？我该如何解决这个问题（我唯一的选择是使用 Python 和 ReportLab）？ReportLab 手册没有帮助，“Google”没有帮助，以前的 StackExchange 问题似乎也没有涵盖这个特定主题。如果我将笔画宽度设置为“1”，我可以让网格打印所有线条，但是次要网格线太粗了。

最终结果是我正在处理的折线图，而且我知道 ReportLab 具有图表功能，但 reportlabs 图表/网格功能并没有给我项目所需的东西，所以我被迫制作我的自己的带有主要/次要行的网格（也许我错过了一些东西并且对替代技术持开放态度，但目前它在 PDF 形式中看起来很好，只是在打印机上没有）。

任何建议表示赞赏！

TIA,

-J

```
 for i in decimal_range(0, _time, 1):
        if (i % 5.0 == 0):
            if (i % 25.0 == 0):
                grid_pattern.add(shapes.Line(_temp_x, 
                                             (_temp_y + _height_of_box), 
                                             _temp_x,
                                             (_temp_y + _height_of_box+4),
                                             strokeWidth=1,
                                             strokeColor=colors.black))
            else:
                pass

            grid_pattern.add(shapes.Line(_temp_x, _temp_y, _temp_x,
                                         (_temp_y + _height_of_box),
                                         strokeWidth=.12,
                                         strokeColor=colors.pink))
        else:
            grid_pattern.add(shapes.Line(_temp_x, _temp_y, _temp_x,
                                         (_temp_y + _height_of_box),
                                         strokeWidth=.12,
                                         strokeColor=colors.pink))
        _temp_x += 1 * mm

    _temp_x = xorigin

    for i in range(0, _mv, 1):
        if (i % 5.0 == 0):
            grid_pattern.add(shapes.Line(_temp_x, _temp_y,
                                         _temp_x + _width_of_box,
                                         _temp_y, strokeWidth=.12,
                                         strokeColor=colors.pink))
        else:
            grid_pattern.add(shapes.Line(_temp_x, _temp_y,
                                         _temp_x + _width_of_box,
                                         _temp_y, strokeWidth=.12,
                                         strokeColor=colors.pink))    
        _temp_y += 1 * mm 
```

**更新1**

我尝试按照几张海报（以及 ReportLab 社区/邮件列表）的建议将笔画宽度设置为“0”，如下所示：

```
grid_pattern.add(shapes.Line(_temp_x, _temp_y, _temp_x,
                            (_temp_y + _height_of_box),
                            strokeWidth=0,
                            strokeColor=colors.pink)) 
```

这确实会生成一条像素宽的线，这在 PC 上看起来很棒，但在 PDF 中仍然打印出时髦的图案。

**更新 2 + 解决方案**

在与 ReportLab 和我的计算机发生了很多发脾气和争论之后，结果证明这不是我的 PC 或 ReportLab。是打印机（我使用的是两台完全不同的打印机佳能和惠普——尽管有型号）——我觉得我有足够的覆盖范围来排除打印机，但这个问题还有更多！继续阅读...

ReportLab 实际上并没有画线，它只是添加了一条后记线，告诉渲染器画线。

我最初调试的一部分包括更改我使用的颜色以查看这是否是一个问题 - 好吧 - 我将颜色从粉红色更改为红色（我知道变化不大，但我再次*假设*我将其更改为排除颜色问题）。

好吧，我最近痛苦地了解到，打印机使用公式将颜色转换为灰度，并且该公式倾向于产生抗锯齿副作用（就像我所看到的那样）。

解决方案：是改变网格的颜色。某些颜色比其他颜色表现更好。因此，为了测试这一点，我编写了一个简单的脚本，您可以[在此处下载](http://www.jrcresearch.net/downloads/printtest.txt)该脚本，该脚本将使用 reportlabs 颜色字典中存储的所有颜色生成 PDF 文档 - 打印导致我出现问题的示例网格并提供 RGB 值。事实证明，所有类型的颜色在多台打印机（都不同）上打印效果不佳 - 不仅仅是红色/粉红色......一些“红色”颜色打印良好，一些打印机处理灰度转换比另一个更好.

所以现在，我们的任务是使用我创建的这个 PDF 文档来找到一种在打印（彩色和灰度）和屏幕上看起来都很好的颜色。

如果您因为害怕我是邪恶的而不想下载脚本 - 至少查看 PDF 并打印您自己的示例，看看您是否可以重现我遇到的问题（我以 600dpi 打印 - 标准 - 没什么特别的...记住，如果我调高 DPI/质量设置，它打印得很好，但标准设置让我很伤心！）。

[脚本](http://www.jrcresearch.net/downloads/printtest.txt)

或者

[PDF格式](http://www.jrcresearch.net/downloads/grid_print.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T22:25:07.200

如果我了解 ReportLab 如何正确处理行，则您要求它创建分别具有 1 和 0.12 个用户空间单位的行。在 PDF 中，一个“用户空间单位”实际上是 1/72 英寸。

这意味着您绘制的线条将分别为 0.014 和 0.0017 英寸宽。这真的不多。根据输出设备的分辨率以及线条在页面上的位置（因此，取决于它是否恰好与屏幕或打印机的像素网格对齐），您可能会得到不同的结果。

您的打印机可能会尝试通过抗锯齿优化输出，这将使最终结果更加不确定。

打印机像素网格的对齐效果可能是您看到一些线条而看不到其他线条的原因。

有几件事可以尝试/玩。

1）以0线宽输出你的线。这是 PDF 中的一种特殊情况，它的意思是“输出正好一个像素宽的行”。请记住，这样一条线应该在您的屏幕上可见（只有 72 或 96 dpi），但可能不在您的打印机上（现在将打印一个 1/1200 英寸的点）。但是，如果您的打印机遵守规则，它应该始终打印那个点。

2）让你的线条更宽——这可能是获得一致结果的唯一方法。如果较小的线条看起来太粗，请考虑打印虚线而不是实线（设置虚线图案）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T05:12:34.867

不完全确定如何将此应用于您正在做的事情，但传统的 Postscript 方法是将设备坐标四舍五入为整数。

```
/roundpoint { % x y -> x' y'
    transform %convert user-space coords to device-space coords
    round
    itransform %convert device-space back to user-space
} def

...
x y roundpoint moveto
x y roundpoint lineto
... 
```

如果您的所有线条相对于设备像素放置一致，那么它们也应该一致地绘制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T18:21:11.373

我认为将笔画宽度设置为 0 是您想要的。这会产生一种特殊类型的线条，通常称为发际线。它基本上告诉打印机尽可能打印最细的线条（喷墨打印机中液滴的宽度或激光打印机中激光的宽度）。我不确定是否所有 PDF 查看器都会按您的预期显示它，但无论如何您都应该尝试打印它。

# objective-c - 如何从命令行编译 XCode 4.5 项目

> ID：13591888
> 
> 赞同：0
> 
> 时间：2012-11-27T19:49:06.647
> 
> 标签：objective-c, gcc, terminal, llvm, xcode4.5

我从 XCode 4.5 创建了简单的*命令行*应用程序，但是我需要从命令行编译它。如果我删除`@autoreleasepool`块和*文字数组初始化*，我可以使用以下命令编译它：

```
gcc main.m -o prog -ObjC -framework Foundation 
```

是否可以**使用**autoreleasepool 和文字编译它？

*main.m*（为清楚起见，我删除了不相关的部分）

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool
    {
        NSArray *array = @[@"foo", @"bar"];
        NSLog(@"%@", array);
    }
    return 0;
} 
```

输出：

```
> gcc main.m -o prog -ObjC -framework Foundation
main.m: In function ‘main’:
main.m:6: error: stray ‘@’ in program
main.m:6: error: ‘autoreleasepool’ undeclared (first use in this function)
main.m:6: error: (Each undeclared identifier is reported only once
main.m:6: error: for each function it appears in.)
main.m:7: error: expected ‘;’ before ‘{’ token
main.m:8: error: stray ‘@’ in program 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:57:58.297

如果您不介意`xcodebuild`为您构建它（而不是自己调用编译器），您可以这样做：

```
xcrun xcodebuild -project path/to/project.xcodeproj -target NameOfTarget -configuration Release 
```

要将构建产品发送到您指定的位置，您可以添加`'CONFIGURATION_BUILD_DIR=path/to/build_output_directory'`到命令行参数。

`xcodebuild`有关调用它的替代方法，请参阅帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:53:24.447

clang 是 Objective-C 的首选编译器。新功能（自动释放范围、ARC、文字等）未添加到 gcc，并且将在未来的 Xcode 版本中删除。

从命令行使用 clang 与 gcc 非常相似，因此应该改为：

```
clang main.m -o prog -ObjC -framework Foundation 
```

您需要安装 Xcode 命令行工具（Xcode menu > Open Developer Tool > More Developer Tools）。

# java - 使用 CardLayout 从另一个类文件更改面板？

> ID：13591892
> 
> 赞同：3
> 
> 时间：2012-11-27T19:49:23.763
> 
> 标签：java, eclipse, class, jframe, jpanel

很遗憾，我在使用 CardLayout 时遇到了麻烦。我想为每个单独的“卡片”使用单独的类，然后使用卡片内的按钮来更改显示的卡片。

我想我知道出了什么问题，尽管不知道为什么，目前我正在从其他类调用 createAndShowGUI() 方法，这样我就可以获取 switch 语句，但这似乎刷新了 switch 之前的所有代码。我不知道为什么这是一个问题，但是 cardLayout.next(contentpane) 在第一次运行时在 switch 语句中工作得非常好，但是当我从另一个类中的 ActionListener 调用它时就死了：

```
import java.awt.CardLayout;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Bond extends JFrame{
    public static String Panel = "PROFILE";
    public static int PaneNo = 1;
    static int i = 0;
    static Profile callProfile = new Profile();
    static Profileset callProfileset = new Profileset();

    public static void main(String args[]){
        createAndShowGUI();
    }

    public static void createAndShowGUI(){
        final JPanel contentPane = new JPanel();
        if(0 == i++){       
            final JFrame frame = new JFrame("FaceTweet+");
            frame.add(contentPane);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setSize(686,242);
            frame.setResizable(false);
            frame.setVisible(true);
        }

        contentPane.setLayout(new CardLayout());
        Profile JPprofile = new Profile();
        Profileset JPprofileset = new Profileset();
        contentPane.add(JPprofile, "JPprofile");
        contentPane.add(JPprofileset, "JPprofileset");
        CardLayout cardLayout = (CardLayout) contentPane.getLayout();

        switch(Panel){
            case "HOMEPAGE": break;
            case "PROFILE":
                cardLayout.first(contentPane);
                PaneNo = 1;
                while(PaneNo != 1){
                    cardLayout.next(contentPane);
                    System.out.println("1");
                    PaneNo++;}
                break;
            case "PROFILESET":
                cardLayout.first(contentPane);
                PaneNo = 1;
                while(PaneNo != 2){
                    cardLayout.next(contentPane);
                    System.out.println("2");
                    PaneNo++;}
                break;
            default:
                cardLayout.show(contentPane, "JPprofile");
                break;
        }
    }

    public static void exit(int status){
        System.exit(status);
    }
} 
```

System.out.println() 只是告诉我代码是否通过 switch 语句，然后通过正确的大小写，并且它每次都会执行，但是它从不执行 cardLayout.next(contentpane) 从任一类 Profile 按下按钮后配置文件集。我希望这是足够的信息，如果您需要更多信息，请说，我会尝试使用所需的内容进行更新！谢谢！

# tdd - Jasmine 测试coffeescript expect(setTimeout).toHaveBeenCalledWith

> ID：13591895
> 
> 赞同：4
> 
> 时间：2012-11-27T19:49:34.247
> 
> 标签：tdd, coffeescript, jasmine

在学习Jasmine的过程中，遇到了这个问题。我想要一个基本功能运行，然后设置超时再次调用自己......简单的东西。

```
class @LoopObj
  constructor: ->
  loop: (interval) ->
    #do some stuff
    setTimeout((=>@loop(interval)), interval) 
```

但我想测试以确保使用正确的参数调用 setTimeout

```
describe "loop", ->
  xit "does nifty things", ->
  it "loops at a given interval", ->
    my_nifty_loop = new LoopObj
    interval = 10
    spyOn(window, "setTimeout")
    my_nifty_loop.loop(interval)
    expect(setTimeout).toHaveBeenCalledWith((-> my_nifty_loop.loop(interval)), interval) 
```

我收到此错误：`Expected spy setTimeout to have been called with [ Function, 10 ] but was called with [ [ Function, 10 ] ]`

这是因为`(-> my_nifty_loop.loop(interval))`功能不等于`(=>@loop(interval))`功能吗？还是它与第二个周围的额外方括号有关`[ [ Function, 10 ] ]`？还有别的吗？

我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:18:36.223

我不太了解 CoffeeScript，但您可以通过替换来调试

```
expect(setTimeout).toHaveBeenCalledWith((-> my_nifty_loop.loop(interval)), interval) 
```

和

```
expect(setTimeout).toHaveBeenCalledWith(jasmine.any(Function), interval) 
```

并重新运行规范。我认为如果多余的方括号消失，那么你的问题是因为你有两个不同的函数引用。如果它们没有消失，那么您的 LoopObj 定义就会有些奇怪，可能是胖箭头运算符（在我的 n00b 眼中看起来没有必要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T23:03:07.850

**使用`bind`辅助函数。**

比较 setTimeout 的参数时遇到问题的原因是它隐藏在 lambda 中。您创建的每个 lambda 表达式都是不同的。在这种情况下，lambda 实际上除了将函数绑定到正确的值之外没有添加任何值`this`。

事实证明，这是 JavaScript 中的一种常见模式，Underscore.js 库有一个名为的函数`bind`正是这样做的。

通过分解此模式并将其与`setTimeout`（与 相同`_.delay`）组合，我们可以比较传递给它的参数，因为它们不会被包装在 lambda 中。

```
window.bindAndDelay = (wait, fn, obj, args...) ->
  setTimeout((-> obj.fn(args...)), wait)

class @LoopObj
  constructor: ->
  loop: (interval) ->
    #do some stuff
    bindAndDelay(interval, @loop, @, interval) 
```

然后在你的测试中：

```
describe "loop", ->
  xit "does nifty things", ->
  it "loops at a given interval", ->
    my_nifty_loop = new LoopObj
    interval = 10
    spyOn(window, "bindAndDelay")
    my_nifty_loop.loop(interval)
    expect(bindAndDelay).toHaveBeenCalledWith(interval, my_nifty_loop.loop, my_nifty_loop, interval) 
```

我选择将延迟量作为第一个参数，`bindAndDelay`以便它与应用了任意数量参数的函数一起使用。

另一种方法是使用`_.bindAll`，但你必须记住在每个对象上都使用它，它不利于带参数的函数。所以我认为上面的更好。

这应该可行，但我仍然认为它很臭。所以如果其他人有更好的答案，请发布！

# sql-server - 将多条记录转换为单条记录 T-SQL

> ID：13591896
> 
> 赞同：0
> 
> 时间：2012-11-27T19:49:35.010
> 
> 标签：sql-server, tsql, parsing, pivot

数据库问题（我们使用的是 T-SQL）

我目前正在研究员工和项目之间的关系。

我们正在尝试重组数据库以像这样工作。

旧数据库包含这样的信息

```
Employee ID  Project ID
1            1
1            2
1            3
2            1
2            2 
```

我们需要像这样为每个员工将其转换为单个记录

```
Project ID  Employee ID 1 Employee ID 2
1           1              2
2           1              2
3           1              null 
```

这是我尝试过的 sql 代码，但我遇到了问题，现在每个员工有三个以上，这只是一个例子。相信我，如果只有三个或两个，我会使用最大值或最小值并完成它。

```
Select [Project ID], min([Employee ID])
From dbo.[Employee Project ID]
where [Employee ID] > select ( Min([Employee ID]) form dbo.[Employee Project ID])
Group by [Project ID] 
```

第一个问题这只给了我第二大的问题，如果没有更大的元素，即如果员工只有一个项目，它仍然会为员工 ID 1 返回 1，为员工 ID 2 返回 1。我已经尝试过案例陈述他们刚刚对我大发雷霆。有没有更简单的方法来做到这一点？

我不能简单地归还所有员工，我必须把每个员工放到自己的领域。如果将单个字段的多个员工返回到项目中，则前端无法读取它。我不是在写我们要引进一家新公司的前端，他们不能改变他们的代码。

我需要的是每个员工在他自己的领域，对于最初的混淆，我很抱歉，我们在这个数据库中有数百名员工，并不是每个项目都参与其中。所以我们需要第一个槽中最低的员工 id，第二个槽中的第二低到 14。它进入一个看起来像这样的有趣表。我无法控制它是如何形成的，我只需要将我们的初始数据放入这个表格中。

```
Project ID     Attribute       Information
1              Employee ID 1   1
1              Employee ID 2   2
2              Employee ID 1   1
2              Employee ID 2   2
3              Employee ID 1   1
3              Employee ID 2   null 
```

基本上我打算将员工 ID 1 插入到表中，并将员工 ID 1 插入到属性的字段中。老实说，如果您知道一种进入底线的方法，那就更好了。我只是想节省你们的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:05:54.650

我完全同意@JoelCoehoorn 将您的表格保留在当前结构中的评论。如果您随后需要在其他版本中为您的应用程序和/或用户显示它，那么您可以使用`PIVOT`与此类似的：

```
select EmployeeId,
  [1] ProjectId1, 
  [2] ProjectId2, 
  [3] ProjectId3
from
(
  select EmployeeID, projectid,
    row_number() over(partition by employeeid order by projectid) rn
  from yourtable
) src
pivot
(
  max(projectid)
  for rn in ([1], [2], [3])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9b1bf/2)

此查询的结果是：

```
| EMPLOYEEID | PROJECTID1 | PROJECTID2 | PROJECTID3 |
-----------------------------------------------------
|          1 |          1 |          2 |          3 |
|          2 |          1 |          2 |     (null) | 
```

这样做，将以标准化的方式离开您的桌子。如果您有 100 个项目，您将不希望将 100 个不同的列添加到您的表中。您可以使用 SQL（如上）或在您的应用程序代码中轻松操作数据以将其转换为您需要的格式。

编辑，根据您的更改，您应该仍然可以`PIVOT`在现有表结构上使用 a ：

```
select projectid,
  [1] EmployeeID1, 
  [2] EmployeeID2
from
(
  select EmployeeID, projectid,
    dense_rank() over(partition by projectid order by employeeid) dr
  from yourtable
) src
pivot
(
  sum(dr)
  for EmployeeId in ([1], [2])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9b1bf/19)

结果：

```
| PROJECTID | EMPLOYEEID1 | EMPLOYEEID2 |
-----------------------------------------
|         1 |           1 |           2 |
|         2 |           1 |           2 |
|         3 |           1 |      (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:12:57.133

你可以这样做：

```
declare @t table (EmployeeID int, ProjectId int)
insert @t
select 1, 1
union select 1, 2
union select 1, 3
union select 2, 1
union select 2, 2

select distinct EmployeeID
, 
(
    select ProjectId
    from @t b
    where a.EmployeeId = b.EmployeeId
    for xml path(''), root('Projects')
) ProjectsXML
from @t a 
```

输出

```
EmployeeID  ProjectsXML
1           <Projects><ProjectId>1</ProjectId><ProjectId>2</ProjectId><ProjectId>3</ProjectId></Projects>
2           <Projects><ProjectId>1</ProjectId><ProjectId>2</ProjectId></Projects> 
```

但是，最好让您的 UI 代码处理此问题，而不是在 SQL 级别使事情复杂化。

# c# - HTML 抓取表到 CSV（使用 HAP？）

> ID：13591897
> 
> 赞同：0
> 
> 时间：2012-11-27T19:49:43.450
> 
> 标签：c#, html-agility-pack

所以我试图将以下数据解析为 CSV。从我的阅读来看，最好的方法是使用 HAP，因为它有一个强大的解析器。

截至目前，WPF WebBrowser 控件内容正在通过以下方式访问：

```
dynamic doc = this.wbControl.Document; 
```

**内容**

```
 <div class="content">
                <fieldset>
                    <ul class="fieldsetr">
                        <li class="row medium">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">Sender:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>me@example.com</em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium alt">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">Recipient:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>me2@example2.com</em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">Message ID:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>2342342345235</em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium alt">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">Message size:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>18.74 KB
                                    </em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">Date and time received:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>11/27/2012 6:17:22 AM</em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium alt">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">Date and time filtered:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>11/27/2012 6:17:22 AM</em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium">
                            <!-- Connector Details -->

                        </li>                            
                        <li class="row medium alt">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">First delivery attempt:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>11/27/2012 6:17:23 AM</em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">Final delivery attempt:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>11/27/2012 6:17:23 AM</em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium alt">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">From IP address:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>1.2.3.4 &lt;unknown&gt;</em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">To IP address:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>4.3.2.1 &lt;mail.example2.com&gt; </em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium alt">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">Filtering results:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <em>Passed Filtering</em>
                                </div>
                            </div>
                        </li>
                        <li class="row medium">
                            <div class="field">
                                <div class="shell">
                                    <em class="disable">Delivery result:</em>
                                </div>
                            </div>
                            <div>
                                <div class="clip">
                                    <span><em>Delivered: 470 2.4.0 &lt;2342342345235&gt; [InternalId=2321233] Queued mail for delivery</em></span>
                                </div>
                            </div>
                        </li>
                    </ul>
                </fieldset>
        </div> 
```

我转换这些数据的最佳方式是什么？这只是一条记录，但会添加更多记录。

**编辑**

最终使用以下代码进行测试：

```
 HtmlAgilityPack.HtmlDocument docHAP = new HtmlAgilityPack.HtmlDocument();
            docHAP.LoadHtml(doc.Body.InnerHtml.ToString());

            foreach(HtmlNode emNode in docHAP.DocumentNode.SelectNodes("//em"))
            {
                MessageBox.Show(emNode.InnerText.ToString());
            } 
```

如果有人有更有效的解决方案，请随时告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:55:11.320

是的，使用[HTML Agilty Pack](http://htmlagilitypack.codeplex.com/) - 它是一个用于 .NET 的开源 HTML 解析器。

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建了一个读/写 DOM 并支持普通的 XPATH 或 XSLT（你实际上不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

您可以使用它来查询 HTML 并提取您想要的任何数据。

只需使用`XPath`您就可以获得任何特定的`element`//`attribute`数据`text`。

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(this.wbControl.Document);

// get all the 'em' tags from HTML
foreach(HtmlNode emNode in doc.DocumentElement.SelectNodes("//em")
{    
    if (emNode.Attributes["class"] != null)
       var value = emNode.Attributes["class"].Value;
}

// get all the `em` tags where 'class' attribute value is 'disable' from HTML
foreach(HtmlNode emNode in doc.DocumentElement
                              .SelectNodes("//em[@class='disabled']")
{    
    // ...
} 
```

# rest - 同时使用 localStorage 和 REST 远程服务器的数据层架构

> ID：13591899
> 
> 赞同：12
> 
> 时间：2012-11-27T19:49:59.013
> 
> 标签：rest, ember.js, ember-data, data-synchronization

任何人都对如何实现同时使用 localStorage 和 REST 远程存储的数据持久层有任何想法或参考：

某个客户端的数据存储在 localStorage 中（使用 ember-data indexedDB 适配器）。本地存储的数据与远程服务器同步（使用 ember-data RESTadapter）。

服务器从客户端收集所有数据。使用[数学集合](http://en.wikipedia.org/wiki/Set_theory)表示法：

```
Server = Client1 ∪ Client2 ∪ ... ∪ ClientN 
```

通常，任何记录对于某个客户可能不是唯一的：

```
ClientX ∩ ClientY ≠ 0,  ∀ X,Y ∈ [1,N] 
```

以下是一些场景：

*   客户创建记录。记录的id不能在客户端设置，因为它可能与存储在服务器上的记录冲突。因此需要将新创建的记录提交到服务器 -> 接收 id -> 在 localStorage 中创建记录。

*   一条记录在服务器上更新，因此 localStorage 和服务器中的数据不同步。只有服务器知道，所以架构需要实现推送架构（？）

您会使用 2 个存储（一个用于 localStorage，一个用于 REST）并在它们之间进行同步，还是使用混合 indexedDB/REST 适配器并在适配器中编写同步代码？

你能看到任何避免实现推送（Web Sockets，...）的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T23:03:02.320

你提出的问题不是几段就能回答的，或者简单的回答。不过，这是我的尝试...

首先，您采用的方法存在许多困难：

1.  客户端必须始终连接到网络才能创建数据并从服务器接收密钥。
2.  如果您确实创建了不同的存储（localstorage 和 REST），则所有需要数据的应用程序代码都必须在两个存储中查找。这显着增加了应用程序每个部分的复杂性。
3.  创建行后，如果要创建子行，必须等待服务器返回主键，才能在子行中将其作为外键引用。对于任何中等复杂的数据结构，这都会成为一个沉重的负担。
4.  当服务器宕机时，所有客户端都无法创建数据。

这是我的方法。它使用[SequelSphereDB](http://www.sequelsphere.com/)，但大多数概念可以在其他客户端数据管理系统中重用。

**第一：使用 UUID 作为主键。**

大多数客户端数据管理系统应该提供一种生成通用唯一 ID 的方式。SequelSphere 只使用一个 SQL 函数：UUID()。将 UUID 作为每一行的主键允许在任何时候在任何客户端上生成主键，而无需联系服务器，并且仍然保证 ID 是唯一的。因此，这也允许应用程序在“离线”模式下工作，在运行时不需要连接到服务器。这也可以防止停机的服务器使所有客户端停机。

**第二：使用一组镜像服务器的表。**

这比其他任何事情都更需要简单性。这也是接下来两个基本原则的要求。

**第三：对于小型数据集的向下同步，最好从服务器完全刷新客户端数据。**

只要有可能，从服务器对客户端上的数据执行完全刷新。这是一个更简单的范例，并导致更少的内部数据完整性问题。主要缺点是传输中的数据大小。

**第四：对于大型数据集的向下同步，执行“事务”更新**

这是我的方法变得更复杂的地方。如果数据集太大，并且只需要同步更改的行，则必须找到一种根据“事务”同步它们的方法。即：按照它们在服务器上执行的顺序插入/更新/删除，以提供一个简单的脚本来在客户端执行相同的操作。

最好在服务器上有一个表格，记录要同步到设备的事务。如果这是不可能的，那么通常可以使用行上的时间戳将订单记录在服务器上，并让客户端请求自特定时间戳以来的所有更改。大负面：您将需要通过“逻辑”删除或通过在自己的表中跟踪它们来跟踪已删除的行。即便如此，将复杂性隔离到服务器比将其分散到所有客户端更可取。

**第五：对于向上同步，使用“事务”更新**

这就是[SequelSphereDB](http://www.sequelsphere.com)真正闪耀的地方：它将跟踪对表执行的所有插入、更新和删除，然后在同步时将它们提供给您。它甚至会在浏览器重新启动时执行此操作，因为它将信息保存在 localstorage/indexeddb 中。它甚至可以适当地处理提交和回滚。客户端应用程序可以像往常一样与数据交互，而无需考虑记录更改，然后使用 SequelSphereDB 的“更改跟踪器”在同步时重播更改。

如果您**不使用**SequelSphere（您应该使用），则在客户端上保留一个单独的表来记录客户端执行的所有插入、更新和删除操作。每当客户端应用程序插入/更新/删除行时，在“事务”表中制作一份副本。在向上同步时间，发送那些。在服务器上，只需以相同的顺序执行相同的步骤即可复制客户端上的数据。

还很重要：始终在从服务器完全刷新客户端表之前执行向上同步。:)

**结论**

我建议在尽可能多的地方追求简单而不是复杂。使用 UUID 作为主键对此非常有帮助。使用某种“更改跟踪器”也非常有用。使用诸如 SequelSphereDB 之类的工具来为您跟踪更改是最有帮助的，但对于这种方法不是必需的。

完整披露：我与 SequelSphere 公司密切相关，但该产品对于实施上述方法确实不是必需的。

# python - 烧瓶中模板和静态资源的自定义位置

> ID：13591903
> 
> 赞同：3
> 
> 时间：2012-11-27T19:50:11.437
> 
> 标签：python, flask

我试图弄清楚如何指定 html 模板和静态文件的位置，例如 Flask 的 javascript 文件。

我目前有一个结构允许像这样加载模块

```
/wsgi
  /templates
         /login.html
         /logout.html
         /menu.html
  /static
  /modules
         /helloworld
                   /module.html
                   /module.json
                   /module.js 
```

我希望能够直接使用模板加载例如 Javascript 文件，而无需将其移动到静态文件夹。

理想情况下，我想做这样的事情

```
moduleHtml  = render_template(moduleHtmlPath) 
```

并在模板内

```
<script type=text/javascript src="{{ url_for('myModule', filename='module.js') }}"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T20:21:04.960

如果您使用 Flask 的蓝图功能，您可以在蓝图中包含静态文件。有点像你所拥有的，只是你需要把它们放在一个“静态”文件夹中。该文档有一个很好的例子：

[http://flask.pocoo.org/docs/blueprints/#static-files](http://flask.pocoo.org/docs/blueprints/#static-files)

```
helloworld = Blueprint('helloworld', __name__, static_folder='static') 
```

然后像这样引用模板中的静态文件：

```
url_for('helloworld.static', filename='module.js') 
```

如果您不熟悉蓝图，则值得一读。他们很漂亮。

否则，Flask 有一个内置的方式来引用全局静态文件，但它们需要位于根“静态”目录中：

[http://flask.pocoo.org/docs/quickstart/#static-files](http://flask.pocoo.org/docs/quickstart/#static-files)

```
url_for('static', filename='module.js') 
```

# jquery - 多下拉选择搜索表单（jQuery、php、mysql）

> ID：13591909
> 
> 赞同：-2
> 
> 时间：2012-11-27T19:50:34.500
> 
> 标签：jquery, mysql, ajax

任何人都可以帮助我，因为我有点卡住了......

我正在研究一个搜索表单（php，MySql），它有多个下拉选择菜单（10），必须从 MySql 即时填充（比如在汽车销售网站上，当你选择制造商时，第二个下拉列表会被填充，等等...）。如何在不刷新的情况下使用 PHP、MySql、jQuery 或 AJAX 执行此操作？

第二件事是，当我选择每个下拉值而不刷新时，如何在此搜索页面的底部显示结果。例如，当用户来到搜索页面时，他会在底部看到所有产品，当他通过下拉选择菜单缩小搜索条件时，结果会变得更加具体。

感谢您的回复，希望您能理解我的问题。BR，博彦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:56:29.597

首先，欢迎来到社区！你真的必须发布你的代码让我们帮助你。没有人会根据场景为您编写所有代码。

你几乎回答了你关于如何做的问题。使用您的下拉值设置数据库，使用对 PHP 函数/文件的 AJAX 请求从数据库中加载值并将它们返回给您的 ajax 调用，然后将值插入到适当的字段中。

以下是一些帮助您入门的链接：

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)
[http://www.tizag.com/ajaxTutorial/ajax-mysql-database.php](http://www.tizag.com/ajaxTutorial/ajax-mysql-database.php)
[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:58:05.923

首先，我建议自动显示“特色项目”或“热门汽车”，或者设置自动显示的集合。- 您不想自动显示每个结果 - 这太多了，并且会变慢，具体取决于您的数据库中的内容

然后让您的第一个选择自动填写，当用户从下拉列表中选择某些内容时，您可以触发事件，如下所示

```
$('.myFirstDropdown').change(function() {
     // put ajax here to load second dropdown 
     var firstValue = $(this).val(); // this is the value to pass through ajax
 }); 
```

您可以为每个下拉菜单执行此操作，然后我会建议一个搜索按钮 - 此按钮将执行 ajax 刷新并显示正确的结果而不是特色。在此`click()`按钮事件中，您将通过 等获得每个选择的`$(.myFirstDropdown').val()`值`$('.mySecondDropdown').val()`。通过ajax发送

# r - 比 for 循环更快地计算行之间的差异？

> ID：13591912
> 
> 赞同：5
> 
> 时间：2012-11-27T19:50:44.040
> 
> 标签：r

我有一个如下所示的数据集：

```
ID   |   DATE    | SCORE
-------------------------
123  |  1/15/10  |  10
123  |  1/1/10   |  15
124  |  3/5/10   |  20
124  |  1/5/10   |  30
... 
```

所以要将上面的代码片段加载为数据框，代码是：

```
id<-c(123,123,124,124)
date<-as.Date(c('2010-01-15','2010-01-01','2010-03-05','2010-01-05'))
score<-c(10,15,20,30)
data<-data.frame(id,date,score) 
```

我正在尝试添加一个列来计算“自上次记录此 ID 以来的天数”。

现在我正在使用一个看起来像这样的 FOR 循环：

```
data$dayssincelast <- rep(NA, nrow(data))
for(i in 2:nrow(data)) {
  if(data$id[i] == data$id[i-1]) 
    data$dayssincelast[i] <- data$date[i] - data$date[i-1]
} 
```

**有没有更快的方法来做到这一点？**（我对 APPLY 进行了一些研究，但除了 FOR 循环之外还没有找到解决方案。）

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T20:01:59.613

如果您的日期在`id`.

```
id<-c(123,123,124,124)
date<-as.Date(c('2010-01-15','2010-01-01','2010-03-05','2010-01-05'))
score<-c(10,15,20,30)
data<-data.frame(id,date,score)

data <- data[order(data$id,data$date),]
data$dayssincelast<-do.call(c,by(data$date,data$id,function(x) c(NA,diff(x))))
# Or, even more concisely
data$dayssincelast<-unlist(by(data$date,data$id,function(x) c(NA,diff(x)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:14:31.060

以下内容对您有何帮助？

```
 indx <- which(data$id == c(data$id[-1], NA))
 data$date[indx] - data$date[indx+1] 
```

* * *

这只是将`id`'s 移动 1 并将它们与 id 进行比较以检查相邻匹配项。
然后对于 dat 减法，只需从后续行的日期中减去匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:01:21.947

如果您需要更复杂的公式，您可以使用聚合：

```
a <- aggregate(date ~ id, data=data, FUN=function(x) c(NA,diff(x)))
data$dayssincelast <- c(t(a[-1]), recursive=TRUE) # Remove 'id' column 
```

与@nograpes 答案中的排序顺序相同。

# python - Python中的编码检测，是否使用chardet库？

> ID：13591926
> 
> 赞同：12
> 
> 时间：2012-11-27T19:51:27.073
> 
> 标签：python, encoding, chardet

我正在编写一个应用程序，它需要大量文本作为输入，可以是任何字符编码，我想将它全部保存在 UTF-8 中。我不会收到或无法信任随数据定义的字符编码（如果有的话）。

我有一段时间使用 Pythons 库 chardet 来检测原始字符编码[http://pypi.python.org/pypi/chardet](http://pypi.python.org/pypi/chardet)，但最近遇到了一些问题，我注意到它不支持斯堪的纳维亚编码（例如iso-8859-1)。除此之外，获得结果需要大量的时间/CPU/内存。2MB 文本文件约 40 秒。

我尝试只使用标准的 Linux 文件

```
file -bi name.txt 
```

到目前为止，我的所有文件都为我提供了 100% 的结果。对于 2MB 的文件，这大约需要 0.1 秒。它还支持斯堪的纳维亚字符编码。

所以，我想使用文件的优势是显而易见的。有什么缺点？我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:54:52.930

由于不完全标准的编码，旧的 MS-DOS 和 Windows 格式的文件可以被检测为 unknown-8bit 而不是 ISO-8859-X。Chardet 将执行有根据的猜测，报告置信度值。

[http://www.faqs.org/faqs/internationalization/iso-8859-1-charset/](http://www.faqs.org/faqs/internationalization/iso-8859-1-charset/)

如果您不处理旧的、异国情调的、不合标准的文本文件，我认为您可以`file -i`毫无问题地使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:33:30.287

我发现“chared”（[http://code.google.com/p/chared/](http://code.google.com/p/chared/)）非常准确。您甚至可以为不受支持的语言训练新的编码检测器。

当 chardet 开始行动时，这可能是一个不错的选择。

# asp.net-mvc - 在头部或身体中注入 javascript

> ID：13591928
> 
> 赞同：0
> 
> 时间：2012-11-27T19:51:30.613
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

在我需要注入 JavaScript 代码的 index.cshtml 文件中，我们开发了一个帮助程序，它是 .net 中的一个库调用，用于加载 dll 中的 JavaScript 代码。出于安全原因，我们这样做。Helper代码调用这个函数ToolBarControl的dll调用下一个方法我附上一段代码。

```
private string RenderBarra() {
    StringBuilder JavaScript = new StringBuilder();
    JavaScript.AppendFormat(@"<script type= ""text/javascript"">{0}", Environment.NewLine);
    JavaScript.AppendFormat(@"var toolbar = new toolBarObject('toolbarObj');{0}", Environment.NewLine);
    ...
    ...
    JavaScript.AppendFormat(@"</script>{0}", Environment.NewLine);
    return JavaScript.ToString();
} 
```

Html.ToolBarControl调用函数注入脚本放置在顶部（在html头部之前）我需要将头部中的这段代码注入到页面的头部、正文或末尾

注意：RenderBarra 方法中的 javascript 代码有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:11:58.380

只需创建一个简单的 html 帮助程序来呈现字符串示例：Html.RenderBarra()

不要忘记将其呈现为原始文本(@Html.Raw(your_helper))

# ios - 尝试在 UITableView 中获取行大小时出现异常

> ID：13591930
> 
> 赞同：0
> 
> 时间：2012-11-27T19:51:34.353
> 
> 标签：ios, ios5, uitableview

我有这段代码，用于将文本放置在 UITableView 单元格中。它给了我一个错误。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIFont *cellFont = [UIFont fontWithName:@"Helvetica" size:17];
    CGSize constraintSize = CGSizeMake(self.itemList.frame.size.width, MAXFLOAT);

    CGSize labelSize = [[items_array objectAtIndex:indexPath.row] sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    return labelSize.height + 30;
} 
```

错误发生在这一行：

```
CGSize labelSize = [[items_array objectAtIndex:indexPath.row] sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap]; 
```

这是错误：

```
uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary sizeWithFont:constrainedToSize:lineBreakMode:]: unrecognized selector sent to instance 0x834b020' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:53:33.540

异常再次告诉您出了什么问题。`[items_array objectAtIndex:indexPath.row]`是一个`NSDictionary`而不是一个`NSString`。修复它，异常就会消失。

# java - Selenium WebDriver 无法定位 Selenium IDE 可以定位的 Element

> ID：13591933
> 
> 赞同：3
> 
> 时间：2012-11-27T19:51:36.057
> 
> 标签：java, selenium, junit, selenium-ide, selenium-webdriver

这是我没想到会遇到的问题。我正在 Ubuntu 11 上的 Eclipse 中使用 JUnit 4 编写 selenium Webdriver 测试。我一直在使用 Selenium IDE 结合 firebug 和 firepath 来确保我在 JUnit 测试中指定的 xpath 是正确的。我遇到的是 selenium IDE 命令的问题，

```
command 'click' at target '//span[contains(text(),'MyTarget')]/PATHTOTARGET' 
```

每次都经过。但是，当我在 webdriver 中使用以下内容时，它总是失败

```
driver.findElement(By.xpath("//span[contains(text(),'MyTarget')]/PATHTOTARGET")).click(); 
```

我已经使用 Selenium IDE 和 Selenium Webdriver 几个月了，所以我写了一些点击命令，从来没有遇到过这个问题。任何人都知道可能导致这种情况的原因是什么？

xpath 在刷新时不会更改，每次都有效。我也尝试过等待页面上的所有内容加载而没有运气。

edit1：这是由我们应用程序的 extJS 上下文菜单的工作方式引起的问题。如果您从上下文菜单中选择了一项，我们的应用程序将执行一些导致上下文菜单脱离 selenium 焦点的工作。在选择新菜单项之前添加刷新然后延长等待效果最好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T21:12:02.890

由于您得到的异常是 a [`StaleElementReferenceException`](http://seleniumhq.org/exceptions/stale_element_reference.html)，因此您似乎仍然太快了。解释：

1.  该元素位于您正在使用的页面上。
2.  您单击某些东西，页面开始重新加载。
3.  但是在它重新加载之前，WebDriver 已经找到了你的错误元素（由于某种原因它没有等待上一个操作完成）。
4.  然后页面最终重新加载，WebDriver 尝试单击先前找到的元素......现在不存在，因为它在前一页上（即使它现在也在那里）。

您需要等待上一个动作完成，最好等待动作的一些结果。屏幕上有什么新东西吗？等待它！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-20T16:18:04.293

该帖子很旧，但我在寻找相同问题的答案时遇到了它。所以我的解决方案可能会对某人有所帮助。事实证明，我在页面中有一个框架，并且所需的元素在该框架内。不仅如此，当页面加载时，它不包含任何元素，只链接到框架源。当我添加行 **driver.switchTo.frame(0);** 一切正常。

# autocomplete - 限制已经看到的令牌的自动完成

> ID：13591943
> 
> 赞同：1
> 
> 时间：2012-11-27T19:52:21.067
> 
> 标签：autocomplete, pydev, outline

让代码说话：

```
$ cat Test3.py
def fun1():
    print "I'm in fun1"

$ cat Test2.py
import Test3 as T
T.fun1() # fine 
T.fun1   # bad 
```

我编辑Test2.py。当我按“T”时。pydev 给了我一些完成提示。它包括一个方法 fun1()。那挺好的。然后，当我第二次这样做时，pydev 给了我两个选择。一个方法，和以前一样，没有括号的叫做 fun1 的“东西”，只是简单的白色圆圈图标的简单名称。我找不到该图标的含义（老实说，也找不到任何其他图标的含义）以及禁用第二个自动完成功能的方法，这在我的情况下是无用的。我在 Linux 和 MS Windows 上使用 Eclipse 3.8/4.2 和 Pydev 1.7.something。

有人知道禁用自动完成的不必要部分的方法吗？

问候，罗伯特

谢谢您的回答。但是，图标不同（白色带黑圈）。我已经下载了 pydev 源代码，它类似于 PARAMETER_OBJ 或类似的东西 - 我不知道该怎么做。请看截图 ![大纲截图](../Images/eb0c7bdb0b846728b1f48d0b0cef773d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:52:39.953

图标表示属性或方法的可见性：

[![在此处输入图像描述](../Images/68b7c242413623e017c7c5eec6503e03.png)](http://publib.boulder.ibm.com/infocenter/rsdvhelp/v6r0m1/index.jsp?topic=%2Fcom.ibm.xtools.viz.java.doc%2Ftopics%2Fcvisibility.html)

# android - 在图库和 ElasticSearch 中加载图像

> ID：13591944
> 
> 赞同：0
> 
> 时间：2012-11-27T19:52:21.973
> 
> 标签：android

我想将两个程序“链接”在一起，它们分别工作，一方面我有一个从网上下载的图像库，另一方面我有一个程序可以在查询后捕获图像的 URL（在字符串中）弹性搜索服务器。

我的目标是在图库中显示我的查询结果（=图像）。我想我错过了一步，但我找不到哪一步。我需要为此使用 AsyncTask 吗？

目录：

```
 W/dalvikvm(9421): Unable to resolve superclass of Lnet/sf/json/JSONException; (740)
 W/dalvikvm(9421): Link of class 'Lnet/sf/json/JSONException;' failed
 W/dalvikvm(9421): VFY: unable to resolve exception class 629 (Lnet/sf/json/JSONException;)
 W/dalvikvm(9421): VFY: unable to find exception handler at addr 0xff
 W/dalvikvm(9421): VFY:  rejected Lcom/example/androidgridweb/AndroidGridLayoutActivity;.ESE (Lcom/example/androidgridweb/ImageAdapter;)V
 W/dalvikvm(9421): VFY:  rejecting opcode 0x0d at 0x00ff
 W/dalvikvm(9421): VFY:  rejected Lcom/example/androidgridweb/AndroidGridLayoutActivity;.ESE (Lcom/example/androidgridweb/ImageAdapter;)V
 W/dalvikvm(9421): Verifier rejected class Lcom/example/androidgridweb/AndroidGridLayoutActivity;
 W/dalvikvm(9421): Class init failed in newInstance call (Lcom/example/androidgridweb/AndroidGridLayoutActivity;)
 D/AndroidRuntime(9421): Shutting down VM
 W/dalvikvm(9421): threadid=1: thread exiting with uncaught exception (group=0x40acb228)
 E/AndroidRuntime(9421): FATAL EXCEPTION: main
 java.lang.VerifyError: com/example/androidgridweb/AndroidGridLayoutActivity
    at java.lang.Class.newInstanceImpl(Native Method)
    at java.lang.Class.newInstance(Class.java:1319)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1039)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2101)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
    at android.app.ActivityThread.access$600(ActivityThread.java:139)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:154)
    at android.app.ActivityThread.main(ActivityThread.java:4945)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

AndroidGridLayoutActivity.java

```
public class AndroidGridLayoutActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_layout);

    GridView gridView = (GridView) findViewById(R.id.grid_view);

    // Instance of ImageAdapter Class
    ImageAdapter imgAdapter =new ImageAdapter(this);
    imgAdapter.addmThumbIds("http://i724.photobucket.com/albums/ww246/bnhenson/squishy.jpg");
    imgAdapter.addmThumbIds("http://xc0.xanga.com/08fe2b7a30c37281496919/m224298958.jpg");
    imgAdapter.addmThumbIds("http://cdn4.teen.com/wp-content/uploads/2012/07/paranorman-zayn-malik-tweets.jpg");

        try {
            eSearchElastic.ESE(imgAdapter);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    gridView.setAdapter(imgAdapter);

} 
} 
```

ImageAdapter.java

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;
Bitmap bmImg;

public static List<String> mThumbIds = new ArrayList<String>();

public void addmThumbIds(String url){
    mThumbIds.add(url);
}

// Constructor
public ImageAdapter(Context c){
    mContext = c;
}

@Override
public int getCount() {
    return mThumbIds.size();
}

@Override
public Object getItem(int position) {
    return mThumbIds.get(position);
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {
    imageView = new ImageView(mContext);
    downloadFile(imageView, mThumbIds.get(position));
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(135, 135));
    imageView.setPadding(0, 0, 1, 0);
    }
    else{
        imageView=(ImageView) convertView;
        downloadFile(imageView, mThumbIds.get(position));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(135, 135));
        imageView.setPadding(0, 0, 1, 0);
    }
    return imageView;
}
void downloadFile(final ImageView imageView, String fileUrl) {

    AsyncTask<Object, Object, String> task = new AsyncTask<Object, Object, String>() {

        @Override
        protected String doInBackground(Object... params) {
            URL myFileUrl = null;
            try {
                myFileUrl = new URL((String) params[0]);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                HttpURLConnection conn = (HttpURLConnection) myFileUrl
                        .openConnection();
                conn.setDoInput(true);
                conn.connect();
                InputStream is = conn.getInputStream();

                bmImg = BitmapFactory.decodeStream(is);

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;
        }
        protected void onPostExecute(String unused) {
            imageView.setImageBitmap(bmImg);
        }
    };
    task.execute(fileUrl);

}
} 
```

ESearchElastic.java

```
public class eSearchElastic{

public static void ESE (final ImageAdapter imgAdapter)throws ClientProtocolException, IOException {

        String server = "servername";
        String index = "images";
        String type = "images_schema_1";
        StringEntity query = null;
        try {
            query = new StringEntity("{\"sort\" : [ {\"confidence_level\" : {\"order\" : \"desc\"} }],\"from\" : 0, \"size\" : 10,\"query\" : {\"text_phrase\" : { \"keyword\" : \"finding nemo\"}},\"filter\" : {\"numeric_range\" : {\"confidence_level\" : { \"from\" : 10, \"to\" : 100, \"include_lower\" : true, \"include_upper\" : true}}}}'");
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        int i=0;
        HttpClient httpclient = new DefaultHttpClient();
        StringBuilder urlStr = new StringBuilder("http://");
         urlStr.append(server)
                .append("/" + index)
                .append("/" + type + "/_search");
         System.out.println(urlStr.toString());
         while (i < 5) {
            HttpPost httpost = new HttpPost(urlStr.toString());
            httpost.setEntity((HttpEntity)query);

         httpost.setHeader("Accept", "application/json");
            httpost.setHeader("Content-type", "application/json");

             HttpResponse response = null;
            try {
                response = httpclient.execute(httpost);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

             String answer = null;
            try {
                answer = org.apache.http.util.EntityUtils.toString(response.getEntity());
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println(answer);
            i++;

            JSONObject answerJson = (JSONObject) JSONSerializer.toJSON(answer);
            String urlImage;
            try {
                urlImage = answerJson.getString("hits");
                JSONObject answerJson1 = (JSONObject) JSONSerializer.toJSON(urlImage);
                String urlImage1 = answerJson1.getString("hits").replace("[", "").replace("]","");
                JSONObject answerJson2 = (JSONObject) JSONSerializer.toJSON(urlImage1);
                String urlImage2 = answerJson2.getString("_source");
                JSONObject answerJson3 = (JSONObject) JSONSerializer.toJSON(urlImage2);
                String urlImage3 = answerJson3.getString("url");
                System.out.println(urlImage3);
                imgAdapter.addmThumbIds(urlImage3);
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

         }
    }
} 
```

* * *

添加/修改：

eSearchElastic.java：

```
 public static void ESE (final ImageAdapter imgAdapter)throws ClientProtocolException, IOException {

AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>(){

    @Override
    protected Void doInBackground(Void... params) {
        String server = "esearch.gumgum.com";
        String index = "images";
        String type = "images_schema_1";
        StringEntity query = null;
        try {
            query = new StringEntity("{\"sort\" : [ {\"confidence_level\" : {\"order\" : \"desc\"} }],\"from\" : 0, \"size\" : 10,\"query\" : {\"text_phrase\" : { \"keyword\" : \"finding nemo\"}},\"filter\" : {\"numeric_range\" : {\"confidence_level\" : { \"from\" : 10, \"to\" : 100, \"include_lower\" : true, \"include_upper\" : true}}}}'");
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        int i=0;
        HttpClient httpclient = new DefaultHttpClient();
        StringBuilder urlStr = new StringBuilder("http://");
         urlStr.append(server)
                .append("/" + index)
                .append("/" + type + "/_search");
         System.out.println(urlStr.toString());
         while (i < 5) {
            HttpPost httpost = new HttpPost(urlStr.toString());
            httpost.setEntity((HttpEntity)query);

         httpost.setHeader("Accept", "application/json");
            httpost.setHeader("Content-type", "application/json");

             HttpResponse response = null;
            try {
                response = httpclient.execute(httpost);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

             String answer = null;
            try {
                answer = org.apache.http.util.EntityUtils.toString(response.getEntity());
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println(answer);
            i++;

            JSONObject answerJson = (JSONObject) JSONSerializer.toJSON(answer);
            String urlImage;
            try {
                urlImage = answerJson.getString("hits");
                JSONObject answerJson1 = (JSONObject) JSONSerializer.toJSON(urlImage);
                String urlImage1 = answerJson1.getString("hits").replace("[", "").replace("]","");
                JSONObject answerJson2 = (JSONObject) JSONSerializer.toJSON(urlImage1);
                String urlImage2 = answerJson2.getString("_source");
                JSONObject answerJson3 = (JSONObject) JSONSerializer.toJSON(urlImage2);
                String urlImage3 = answerJson3.getString("url");
                System.out.println(urlImage3);
                imgAdapter.addmThumbIds(urlImage3);
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

         }
        return null;
    }

};
task.execute();

} 
```

新目录：

```
E/AndroidRuntime(10619): FATAL EXCEPTION: main
E/AndroidRuntime(10619): java.lang.VerifyError: com/example/androidgridweb/eSearchElastic$1
    at com.example.androidgridweb.eSearchElastic.ESE(eSearchElastic.java:28)
    at com.example.androidgridweb.AndroidGridLayoutActivity.onCreate(AndroidGridLayoutActivity.java:44)
    at android.app.Activity.performCreate(Activity.java:4531)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
    at android.app.ActivityThread.access$600(ActivityThread.java:139)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:154)
    at android.app.ActivityThread.main(ActivityThread.java:4945)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:05:37.333

Android >=3.0 不允许`Network Request`主 UI 线程。

您需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来调用网络请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:53:27.043

我发现了错误。问题出在 net.sf.json 库上，我改用 Android SDK JSON 实现。

[Android 运行时验证错误](https://stackoverflow.com/questions/6280551/android-runtime-verify-error)

很抱歉在发布我的问题之前没有找到这个。

我只是用这个替换我的“json部分”：

```
 JSONObject answerJson = new JSONObject(answer);
    String urlImage;
    urlImage = answerJson.getString("hits");
    JSONObject answerJson1 = new JSONObject(urlImage);
    String urlImage1 = answerJson1.getString("hits").replace("[", "").replace("]","");
    JSONObject answerJson2 = new JSONObject(urlImage1);
    String urlImage2 = answerJson2.getString("_source");
    JSONObject answerJson3 = new JSONObject(urlImage2);
    String urlImage3 = answerJson3.getString("url");
    System.out.println(urlImage3);
    imgAdapter.addmThumbIds(urlImage3); 
```

# asp.net - 如何将 Report Viewer tagPrefix 添加到 web.config

> ID：13591948
> 
> 赞同：1
> 
> 时间：2012-11-27T19:52:31.557
> 
> 标签：asp.net, web-config, reportviewer

我尝试将 ReportViewer 添加到 web.config，因此我不必在每个页面上单独添加它，但它不起作用。

我将它添加到程序集中：

```
<assemblies>
    <add assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="Microsoft.ReportViewer.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
</assemblies> 
```

我还添加了控件：

```
<controls>
    <add tagPrefix="RSWEB" namespace="Microsoft.ReportViewer.WebForms" assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
</controls> 
```

在我的网页上，我有：

```
<RSWEB:ReportViewer ID="MyRV" runat="server">
    <ServerReport ReportPath="/my_webpage_path" 
         ReportServerUrl="http://my_server/my_report" />
</RSWEB:ReportViewer> 
```

我得到的错误是：

```
Unknown server tag 'RSWEB:ReportViewer'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:29:51.337

弄清楚了。控制标签应该是这样的：

```
<controls>
    <add tagPrefix="RSWEB" namespace="Microsoft.Reporting.WebForms" assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
</controls> 
```

# python - 在 Pygame 中，标准化不同 fps 值的游戏速度

> ID：13591949
> 
> 赞同：7
> 
> 时间：2012-11-27T19:52:34.260
> 
> 标签：python, pygame

我在玩 Pygame，制作一些简单的游戏只是为了学习它。但是，我很难以我想要的方式实现 fps。

据我了解，fps 通常设置为：

```
import pygame
...
clock = pygame.time.Clock()
while True:
    clock.tick(60) 
```

然后在整个程序中，我确保每个循环/帧的写入时间为 1/60 秒，这样我就可以让对象也以我想要的速度移动。将滴答声增加到 120 fps 会使游戏运行过快，而降低它会使游戏运行过慢。

但是，这不是我熟悉的 fps 为任何其他游戏工作的方式。在大多数游戏中，fps 可以随心所欲地变化（通常取决于系统运行应用程序的好坏），但游戏将始终以相同的速度运行（例如，在屏幕上移动 100 个像素将需要 1 秒那一秒发生了多少帧）。

我能想到让它以我想要的方式工作的唯一方法是每帧获取当前的 fps，并将其纳入每个运动或基于时间的事件的计算中。但这似乎不必要地复杂，我想知道我是否完全错过了为我解决这个问题的 pygame 功能的一部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T20:04:27.113

游戏使用固定的物理时间步长，同时允许视频时间步长 (fps) 变化。这意味着您的`update(delta)`函数会以恒定的 delta 值调用。这保持了稳定性。

这意味着在实践中，`update`平均每次调用 可能最终会被调用多次`draw()`，具体取决于经过的时间。

有关详细信息，请参阅：[Gaffer 的“修复您的时间步长”](http://gafferongames.com/game-physics/fix-your-timestep/)

一个更大的（python）示例在[食谱中：ConstantGametime](http://www.pygame.org/wiki/ConstantGameSpeed?parent=CookBook)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T23:21:57.660

您可以以像素/秒为单位定义对象的速度，然后使用返回的值`tick`来了解每个对象应该移动多少。

例子

```
import pygame
...
player_speed = (20, 0)   # (x,y) pixels/second
...
pygame.time.Clock() = clock
elapsed = 0.
while True:
    seconds = elapsed/1000.0
    update_player(seconds)
    ...
    elapsed = clock.tick(60)

def update_player(seconds):
    player.position = (player.position[0] + int(player_speed[0]*seconds), 
                       player.position[1] + int(player_speed[1]*seconds)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T20:15:46.560

虽然@monkey 的答案是完整的数据转储，但您可能应该`time.Clock`再次查看 pygame 文档。可选的帧率参数`Clock.tick()`设置 FPS 的上限，而不是固定的 FPS；换句话说，如果你的游戏循环花费的时间超过了完成的时间，如果你假设传递该值确保了固定的游戏速度，那么游戏将会滞后。它看起来像`Clock.get_time()`并且`Clock.get_raw_time()`是用来获取最后一个游戏循环的执行时间的东西，然后您可以从中计算游戏元素的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-06T15:37:25.480

如果您想在每个 FPS 上以固定速度移动对象，您可以不使用绝对值来指示速度，而是使用与一秒钟内要完成的移动相关的值来指示速度，然后将其除以每秒的帧数。

例如，如果您希望您的对象以每帧 2 个像素的速度移动，例如 30 FPS，并且您希望此速度在每个 FPS 上都相同，您可以将其表示为一秒内的像素移动，应该是60。在游戏循环中，当你需要更新速度时，你会使用这个速度除以FPS，从而得出每帧更新使用的相对速度。这样，在 30 FPS 时，您将获得每帧 2 个像素的移动，而在 60 FPS 时，您将获得 1 个像素的移动，但在 1 秒后，您将获得相同的像素移动量，即 60。

# static - 在静态链接应用程序中找不到模块“QtQuick”插件“qtquick2plugin”

> ID：13591951
> 
> 赞同：7
> 
> 时间：2012-11-27T19:52:38.010
> 
> 标签：static, qml, qt-quick

我构建了 Qt 库的静态版本并基于 QtQuick2ApplicationViewer 编译了测试应用程序。启动时会产生错误：

```
file:///F:/qt_projects/untitled9-build-5_0_0_static-__________________________/qml/untitled9/main.qml:1:1: module "QtQuick" plugin "qtquick2plugin" not found 
     import QtQuick 2.0 
     ^ 
Remove me: fixing toplevel window flags
Unable to find a renderable master window QtQuick2ApplicationViewer(0x28fe38) when trying to render QtQuick2ApplicationViewer(0x28fe38)  ( QRect(8,30 116x0) ). 
```

我如何将插件“qtquick2plugin”添加到我的应用程序中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:28:03.200

我也有同样的问题。我已将错误报告发送到 Qt 社区：

[https://bugreports.qt-project.org/browse/QTBUG-28357](https://bugreports.qt-project.org/browse/QTBUG-28357)

此链接包含描述和我对您的问题的解决方案。不幸的是，它对我没有帮助，但确实可能对您的情况有所帮助或只是清除情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-07T22:09:48.513

Qt 在配置静态构建时对此发出警告（*或者至少在最近的版本中这样做*）：

> 注意：使用静态链接将禁用动态加载的插件。确保导入所有需要的静态插件，或将需要的模块编译到库中。

`qtquick2plugin`显然是其中之一。这里还有[一些](https://doc.qt.io/qt-5/plugins-howto.html#static-plugins)关于此事的文档。

对于 CMake，从 Qt 5.14 开始，有[qt5_import_qml_plugins](https://doc.qt.io/qt-5/qtqml-cmake-qt5-import-qml-plugins.html)函数（*希望`qt6_import_qml_plugins`在 Qt 6 中也是如此*）：

```
get_target_property(QT_TARGET_TYPE Qt5::Core TYPE)
if(${QT_TARGET_TYPE} STREQUAL "STATIC_LIBRARY")
    find_package(Qt5QmlImportScanner REQUIRED)
    qt5_import_qml_plugins(${CMAKE_PROJECT_NAME})
endif() 
```

对于早于 5.14 的 Qt 版本，可以使用此外部[模块](https://github.com/OlivierLDff/QtStaticCMake)。

# json - JACKSON 支持 Java 泛型？

> ID：13591952
> 
> 赞同：4
> 
> 时间：2012-11-27T19:52:45.817
> 
> 标签：json, jackson, jettison

目前，我正在开发一个基于模式的 restFul 项目。因此，我们使用 JAXB 进行 XSD-->JAVA 转换。我有一堂课如下：

```
 @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
     "systemResponse"
    })
    @XmlRootElement(name = "RestResponse")

public class RestResponse implements Serializable {

     private final static long serialVersionUID = 1L;
     @XmlElementRef(name = "SystemResponse", namespace = "http://www.intuit.com/psd/cdm/v1", type = JAXBElement.class)
   protected JAXBElement<? extends CdmComplexBase> systemResponse;

...
} 
```

以下是它的序列化方式：

```
{"systemResponse":{"name":"{http://www.intuit.com/psd/cdm/v1}Transactions","declaredType":"com.intuit.psd.cdm.v1.Transactions","scope":"javax.xml.bind.JAXBElement$GlobalScope","value":{"requestId":null,"requestName":null,"isEncrypted":null,"totalCount":null,"pageSize":null,"genDuration":null,"genDateTime":null,"transaction":[{"id":null,"externalKey":[],"metaData":null,"accountNumber":"12345678798","transactionNumber":null,"transactionReference":null,"batchID":null,"batchCycleDate":null,"paymentType":null,"paymentMethod":null,"transactionType":null,"cardType":null,"amount":null,"transactionDate":null,"authCode":null,"customerTransactionID":null,"ccnumberFirstSix":null,"ccnumberLastFour":null,"etctype":null,"posentryType":null}]},"nil":false,"globalScope":true,"typeSubstituted":false}} 
```

尝试反序列化时，出现以下异常：

```
Exception in thread "main" com.fasterxml.jackson.databind.JsonMappingException: No suitable constructor found for type [simple type, class javax.xml.bind.JAXBElement<com.intuit.psd.cdm.v1.CdmComplexBase>]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: java.io.StringReader@725d9aa7; line: 1, column: 20] (through reference chain: com.intuit.psd.cdm.v1.RestResponse["systemResponse"])
    at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:164)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObjectUsingNonDefault(BeanDeserializer.java:400)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:289)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:121)
    at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:375)
    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:98)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:308)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:121)
    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:2796)
    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:1942)
    at com.bp.samples.json.HelperJackson.testMarshalUnmarshal(HelperJackson.java:122)
    at com.bp.samples.json.JSONToJavaTest.main(JSONToJavaTest.java:42) 
```

谷歌搜索解决方案，建议您必须向序列化表单添加更多元数据或注册反序列化器。Jettison 正在使用 JAXB 注释来成功序列化和反序列化。另外，我也可以从序列化中删除命名空间“http://www.intuit.com/psd/cdm/v1”。有没有办法对 JACKSON 做同样的事情？

这是我用来配置 JACKSON 的代码：

```
 ObjectMapper mapper = new ObjectMapper();
    AnnotationIntrospector introspectorPrimary = new JacksonAnnotationIntrospector();
    AnnotationIntrospector introspectorSecondary = new JaxbAnnotationIntrospector();
    AnnotationIntrospector pair = new AnnotationIntrospector.Pair(introspectorPrimary, introspectorSecondary);
    mapper.getSerializationConfig().with(pair);
    mapper.getDeserializationConfig().with(pair); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:02:38.477

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/#moxy)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

Jackson 不是符合 JAXB (JSR-222) 的实现，它仅支持其 JSON 绑定实现中的 JAXB 注释子集。对于 JAXB 生成的模型，您可能对原生支持 JSON 绑定的 EclipseLink JAXB (MOXy) 感兴趣。

**JAVA模型**

以下是我从您的问题中推断出的部分 Java 模型。

**休息响应**

```
package forum13591952;

import java.io.Serializable;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = { "systemResponse" })
@XmlRootElement(name = "RestResponse")
public class RestResponse implements Serializable {

    private final static long serialVersionUID = 1L;

    @XmlElementRef(name = "SystemResponse", namespace = "http://www.intuit.com/psd/cdm/v1", type = JAXBElement.class)
    protected JAXBElement<? extends CdmComplexBase> systemResponse;

} 
```

**CdmComplexBase**

以下是您的`CdmComplexBase`课程的简化版本。

```
package forum13591952;

import javax.xml.bind.annotation.XmlSeeAlso;

@XmlSeeAlso({Transactions.class})
public class CdmComplexBase {

} 
```

**交易**

以下是您的`Transactions`课程的简化版本。

```
package forum13591952;

public class Transactions extends CdmComplexBase {

    private long accountNumber;

    public long getAccountNumber() {
        return accountNumber;
    }

    public void setAccountNumber(long accountNumber) {
        this.accountNumber = accountNumber;
    }

} 
```

**对象工厂**

以下是您的`ObjectFactory`课程的简化版本。它指定了`@XmlElementDecl`与您的使用一起使用的注释`@XmlElementRef`。

```
package forum13591952;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;
import javax.xml.namespace.QName;

@XmlRegistry
public class ObjectFactory {

    @XmlElementDecl(name="SystemResponse", namespace="http://www.intuit.com/psd/cdm/v1")
    public JAXBElement<CdmComplexBase> createCdmComplexBase(CdmComplexBase value) {
        return new JAXBElement<CdmComplexBase>(new QName("SystemResponse"), CdmComplexBase.class, value);
    }

    @XmlElementDecl(name="Transactions", namespace="http://www.intuit.com/psd/cdm/v1", substitutionHeadName="SystemResponse", substitutionHeadNamespace="http://www.intuit.com/psd/cdm/v1")
    public JAXBElement<Transactions> createTransactions(Transactions value) {
        return new JAXBElement<Transactions>(new QName("Transactions"), Transactions.class, value);
    }

} 
```

* * *

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

* * *

**演示**

下面的演示代码会将对象编组为 XML 和 JSON

```
package forum13591952;

import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.MarshallerProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(RestResponse.class, ObjectFactory.class);

        ObjectFactory objectFactory = new ObjectFactory();

        RestResponse response = new RestResponse();
        Transactions transactions = new Transactions();
        transactions.setAccountNumber(12345678798L);
        response.systemResponse = objectFactory.createTransactions(transactions);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        // Marshal to XML
        marshaller.marshal(response, System.out);

        // Marshal to JSON
        marshaller.setProperty(MarshallerProperties.MEDIA_TYPE, "application/json");
        marshaller.setProperty(MarshallerProperties.JSON_INCLUDE_ROOT, false);
        marshaller.marshal(response, System.out);
    }

} 
```

* * *

**输出**

下面是运行演示代码的输出。请注意 JSON 表示与 XML 表示非常相似。

```
<?xml version="1.0" encoding="UTF-8"?>
<RestResponse xmlns:ns0="http://www.intuit.com/psd/cdm/v1">
   <ns0:Transactions>
      <accountNumber>12345678798</accountNumber>
   </ns0:Transactions>
</RestResponse>
{
   "Transactions" : {
      "accountNumber" : 12345678798
   }
} 
```

* * *

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

**更新#1**

以下是您的第一组后续问题的答案：

> 1）有没有办法对JSON变量进行camal case：所以AccountNumber->仅用于JSON的accountNumber？

您可以使用 MOXy 的外部映射文档来自定义 JSON 表示。有关完整代码示例，请参阅下面的链接答案。

*   [生成 json 时可以让 MOXy 重命名元素吗？](https://stackoverflow.com/questions/11449219/can-i-get-moxy-to-rename-an-element-when-generating-json/11450077#11450077)

> 2) Jettison 有命名空间映射，Moxy 也有吗？

默认情况下，MOXy 不要求您在 JSON 消息中模拟命名空间限定以匹配您的 XML 结构。在我们的 XML 绑定中，我们基于限定名称进行匹配，而在我们的 JSON 绑定中，我们基于相同元数据的本地名称进行匹配。我们还支持 Jettison 风格的命名空间。下面的链接答案包含如何使用 MOXy 完成此操作的完整示例。

*   [如何在代码中为 JACKSON 提供命名空间映射器？](https://stackoverflow.com/questions/13214306/how-to-provide-jackson-with-the-namespace-mapper-in-the-code/13218238#13218238)

> 3) Moxy 与 Jettison 相比有什么优势，我猜是性能？

Jettison 是一个将 JSON 转换为 StAX 事件/从 StAX 事件转换的库，以便它可以与 XML 绑定库一起使用以生成/使用 JSON（请参阅：[http ://blog.bdoughan.com/2011/04/jaxb-and-json -通过-jettison.html](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html)）。因此，Jettison 在以下项目中存在 MOXy 没有的问题。

*   Jettison 在将大小为 1 的列表表示为 JSON 数组时存在问题。
*   XML 属性需要一个特殊的指示符
*   很难指定是否要将字符串“1”表示为 JSON 中的“1”或 1。
*   XML 命名空间需要特殊的表示（参见：[http](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison-namespace.html) ://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison-namespace.html ）。

* * *

**更新#2**

以下是您第二组后续问题的答案：

> 1) 你如何解决 Jettison 的列表问题？

Jettison 仅根据收到的事件将 StAX 事件转换为 JSON 或从 JSON 转换。这意味着为了识别一个集合，它需要接收 2 个同名的 startElement 事件，因此大小为 1 的列表不表示为 JSON 数组。由于 MOXy 提供原生 JSON 绑定，它知道数据何时来自列表。

> 2) 那么，您是从 JAXB 类直接转到 JSON 吗？

是的，MOXy 将 Java 对象（带有 JAXB 和 MOXy 注释）直接转换为 JSON 或从 JSON 转换。

> 3) 是否有更详细的问题 3 的论文或链接？

我们没有将 MOXy 与 Jettison 进行比较的文件。我们确实检查了人们在使用 Jettison 时遇到的痛点，并确保我们消除了这些痛点。尽管 MOXy 不需要像 Jettison 那样在 JSON 中模拟属性和命名空间等 XML 概念，但我们提供了启用此行为的设置，以使人们更容易从 Jettison 过渡到 MOXy。

*   [如何在代码中为 JACKSON 提供命名空间映射器？](https://stackoverflow.com/questions/13214306/how-to-provide-jackson-with-the-namespace-mapper-in-the-code/13218238#13218238)

> 在这一点上，我想在做 JAXB+JSON 时为 Intuit 推荐 MOXy。

谢谢您的支持。我在 Stack Overflow 上非常活跃，但如果您将问题发布到[**EclipseLink 论坛**](http://www.eclipse.org/forums/eclipse.rt.eclipselink)，您将能够获得整个团队的支持。

*   [http://www.eclipse.org/forums/eclipse.rt.eclipselink](http://www.eclipse.org/forums/eclipse.rt.eclipselink)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:48:51.350

JAXBElement 是一种特定于 XML 的数据类型（基本上类似于 DOM 树），Jackson 不知道如何处理它。Jettison 之所以能够处理这个问题，是因为它建立在 XML API 之上，并且只在输出端（或输入的最低部分）转换为 JSON。

但是你为什么在那里使用 JAXBElement 呢？它是一种后备方案，用于无法真正进行数据绑定的情况；有点像将数据映射到 Java`Map`左右。你能用真正的 POJO 代替吗？那会很好用。

# asp.net - 如何订购本地化文本列表

> ID：13591954
> 
> 赞同：-3
> 
> 时间：2012-11-27T19:52:47.953
> 
> 标签：asp.net

我想知道是否有人可以告诉我或给我一个指南，告诉我如何按名称订购对象列表（键，名称），但名称是 LocalizedText 格式，也许我很愚蠢，但我无法订购此列表.

```
//Objects definied on my class:
    [DataMember]
    public virtual Guid ComplaintPreventableStateId { get; set; }
    [DataMember]
    public virtual LocalizedText Name { get; set; }

  //function that tries to get information:
 IList<ComplaintPreventableState> complaintPreventableList = new List<ComplaintPreventableState>();
        complaintPreventableList = (from c in ComplaintPreventableState.All select c).ToList();
   //Tried this two options:           
 complaintPreventableList.OrderByDescending(h => h.Name);
 complaintPreventableList.OrderBy(h => h.Name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:01:48.820

我假设你有一个`KeyValuePair(Of Integer, String)`用于这个例子的列表，因为你不能有`List()`2 种类型的 a - 如果你也使用 a`List(Of Object)`也会一样。

```
 // Your list object
        Dim list As New List(Of KeyValuePair(Of Integer, String))

        // putting some values in the list
        list.Add(New KeyValuePair(Of Integer, String)(1, "Bob"))
        list.Add(New KeyValuePair(Of Integer, String)(1, "John"))
        list.Add(New KeyValuePair(Of Integer, String)(1, "Harry"))

        // Ordering your list by the Value
        list = list.OrderBy(Function(p) p.Value).ToList() 
```

这会设置按名称排序的列表，即 Bob、Harry、John。

**更新**

因此，以您的代码为例，您需要更改：

```
 complaintPreventableList.OrderBy(h => h.Name); 
```

对此：

```
 complaintPreventableList = complaintPreventableList.OrderBy(h => h.Name).ToList(); 
```

注意最后的电话`.ToList()`。

就像我之前的例子一样；您需要将有序列表分配回自身

# 32feet - 如何使 BluetoothDeviceInfo.Connected 为假？

> ID：13591960
> 
> 赞同：2
> 
> 时间：2012-11-27T19:53:13.010
> 
> 标签：32feet

如何断开蓝牙设备，使其`BluetoothDeviceInfo.Connected`为假？

我尝试使用`SetServiceState(BluetoothService.SerialPort, false)`，但它仍然可以连接。

我不想使用`BluetoothSecurity.RemoveDevice`，因为卸载然后重新安装设备需要很长时间。

可能吗？还是仅在设备端可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T19:52:09.467

我认为这是不可能的。问题是属性`BluetoothDeviceInfo`是在发现时设置的。以后发生的任何更改都不会得到通知。

[http://www.nudoq.org/#!/Packages/32feet.NET/InTheHand.Net.Personal/BluetoothDeviceInfo](http://www.nudoq.org/#!/Packages/32feet.NET/InTheHand.Net.Personal/BluetoothDeviceInfo)

因此，如果您希望更改属性，则必须断开连接，执行另一个发现并使用新数据。

# php - 无法在 PHP 中正确要求

> ID：13591961
> 
> 赞同：1
> 
> 时间：2012-11-27T19:53:16.853
> 
> 标签：php, path, require

我有第一张图片的数据结构。

下面的代码来自 Class.CIBootstrap.php

正如你所看到的，我在第 4 行：

```
require 'Class.CIAjaxHandler.php'; 
```

这很好用。现在，如果它不是 ajax 我想加载正确的控制器......

这不起作用。从结构中可以看出，CIAjaxHandler 与 CIBootstrap 位于同一文件夹中，但我尝试访问的 CILoginController 不是，但为什么我不能通过

`require '../controllers/Class.CILoginController.php'`?

![结构](../Images/1308e40252bc2284424025a0818a96d3.png) ![代码](../Images/97e20b3768b65e0cea4c56387bfa4137.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:12:56.400

定义绝对路径可能是个好主意。因为：

*   文件/文件夹将来可能会更改位置
*   防止像您的问题这样的问题（不同呼叫的父文件不能相同）
*   如果您查看代码，您就知道应该在哪里找到文件

因此，只需包含一个常量文件，您可以在其中生成级联路径，如下所示：

```
define('PATH_ROOT'    ,__DIR__.'/');
define('PATH_CLASSES' , PATH_ROOT.'classes/');
// ... 
```

在你的脚本中

```
require_once PATH_CLASSES.'controller/Class.CIAjaxHandler.php'; 
```

在这种情况下，您绝对确定要包含的内容，并且 WHERE 是您想要包含的文件。

假设你有这个结构：

**/root.php**

```
<?php echo "Hello World"; 
```

**/index.php**

```
 <?php 
 include 'path1/path1.php'; 
```

**/path1/path1.php**

```
<?php 
include '../root.php'; 
```

在这种情况下，如果您调用`/path1/path1.php`脚本有效，因为在父文件夹中包含 root.php 就可以了。但是如果你调用`/index.php`它不起作用，因为包含文件已经相对于父文件夹。

因此，如果您计划在您的软件中调用不同位置的不同文件，使用常量可能是一种解决方案。

另一种解决方案可以设置[包含路径](http://www.php.net/manual/en/ini.core.php#ini.include-path)`__DIR__`或在相对路径的开头始终指定绝对路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T20:03:46.820

如有疑问，请使用相对于当前文件的路径：

```
require_once dirname(__FILE__).'/../controller/Class.CILoginController.php'; 
```

或在 php 5.3+ 中：

```
require_once __DIR__.'/../controller/Class.CILoginController.php'; 
```

当有请求时，您的代码可以工作`$_GET['page'] == 'ajax'`，但是这个请求最有可能在`misc`文件夹中的某个位置发出到哪个文件）？但是当`$_GET['page'] !== 'ajax'`它可能被其他脚本（如`index.php`外部`misc`目录）调用时，因此 php 进程的当前工作目录可能会有所不同。

# javascript - 在动态生成的复选框列表中附加额外的行

> ID：13591967
> 
> 赞同：0
> 
> 时间：2012-11-27T19:53:35.667
> 
> 标签：javascript, jquery, dynamic, checkboxlist

我有一个基于 json 对象使用 jquery 动态生成的复选框列表，我需要在动态生成的复选框顶部添加一个带有复选框“全选”的多行，有关如何执行此操作的任何建议？

复选框列表如下所示：

```
 - select all (need to add)
 - dynamically generated 1
 - dynamically generated 2
 - dynamically generated 3
 - ...etc 
```

代码如下：

```
function createCheckbox(filtered_array, div_name) {
    var container = $('ul#' + div_name);

    $.each(filtered_array, function (iteration, item) { 
        container.append(
            $(document.createElement("li"))
            .append(
                $('<input />').attr({
                    id: item
                    , name: item
                    , value: item
                    , type: 'checkbox'
                    , checked: true
                })
                //onclick get list of values selected 
                .click(function () {
                    selected_array1 = $('#1_list input:checked').map(function () { return this.id; }).get();
                    selected_array2 = $('#2_list input:checked').map(function () { return this.id; }).get();
                    selected_array3 = $('#3_list input:checked').map(function () { return this.id; }).get();
                    selected_array4 = $('#4_list input:checked').map(function () { return this.id; }).get();
                })
            )
            .append(
                $(document.createElement('label')).attr({
                    'for': item
                })
            .text(item)
            )
        )
    });
} 
```

# python - Python 是否优化尾递归？

> ID：13591970
> 
> 赞同：250
> 
> 时间：2012-11-27T19:53:41.327
> 
> 标签：python, recursion, stack, stack-overflow, tail-recursion

我有以下一段代码失败并出现以下错误：

> RuntimeError：超出最大递归深度

我试图重写它以允许尾递归优化（TCO）。我相信如果发生了 TCO，这段代码应该是成功的。

```
def trisum(n, csum):
    if n == 0:
        return csum
    else:
        return trisum(n - 1, csum + n)

print(trisum(1000, 0)) 
```

我应该得出结论 Python 不执行任何类型的 TCO，还是只需要以不同的方式定义它？

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-11-27T19:55:43.597

不，它永远不会，因为[Guido van Rossum](https://en.wikipedia.org/wiki/Guido_van_Rossum)更喜欢能够有适当的回溯：

*[尾递归消除](http://neopythonic.blogspot.com.au/2009/04/tail-recursion-elimination.html)*(2009-04-22)

*[尾声的最后一句话](http://neopythonic.blogspot.com.au/2009/04/final-words-on-tail-calls.html)*（2009-04-27）

您可以使用如下转换手动消除递归：

```
>>> def trisum(n, csum):
...     while True:                     # Change recursion to a while loop
...         if n == 0:
...             return csum
...         n, csum = n - 1, csum + n   # Update parameters instead of tail recursion

>>> trisum(1000,0)
500500 
```

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2013-08-29T09:08:18.580

我发布了一个执行尾调用优化的模块（处理尾递归和连续传递样式）：[https ://github.com/baruchel/tco](https://github.com/baruchel/tco)

# 在 Python 中优化尾递归

人们经常声称尾递归不适合 Pythonic 的编码方式，并且不应该关心如何将其嵌入循环中。我不想与这种观点争论；但有时我喜欢尝试或实现新想法作为尾递归函数而不是循环，原因有很多（专注于想法而不是过程，在我的屏幕上同时有 20 个短函数，而不是只有 3 个“Pythonic”功能，在交互式会话中工作而不是编辑我的代码等）。

在 Python 中优化尾递归实际上很容易。虽然据说这是不可能的或非常棘手的，但我认为可以通过优雅、简短和通用的解决方案来实现；我什至认为这些解决方案中的大多数都没有使用 Python 功能，而不是它们应该使用的功能。干净的 lambda 表达式与非常标准的循环一起工作，为实现尾递归优化提供了快速、高效且完全可用的工具。

为了个人方便，我编写了一个小模块，通过两种不同的方式实现这种优化。我想在这里讨论一下我的两个主要功能。

## 干净的方法：修改 Y 组合器

[Y 组合](https://en.wikipedia.org/wiki/Fixed-point_combinator#Y_combinator)器是众所周知的。它允许以递归方式使用 lambda 函数，但它本身不允许在循环中嵌入递归调用。仅 Lambda 演算无法做到这一点。然而，Y 组合器的微小变化可以保护要实际评估的递归调用。因此，评估可能会被延迟。

这是 Y 组合器的著名表达式：

```
lambda f: (lambda x: x(x))(lambda y: f(lambda *args: y(y)(*args))) 
```

稍作改动，我就可以得到：

```
lambda f: (lambda x: x(x))(lambda y: f(lambda *args: lambda: y(y)(*args))) 
```

函数 f 现在不是调用自身，而是返回一个执行相同调用的函数，但由于它返回它，因此可以稍后从外部进行评估。

我的代码是：

```
def bet(func):
    b = (lambda f: (lambda x: x(x))(lambda y:
          f(lambda *args: lambda: y(y)(*args))))(func)
    def wrapper(*args):
        out = b(*args)
        while callable(out):
            out = out()
        return out
    return wrapper 
```

该功能可以通过以下方式使用；以下是阶乘和斐波那契尾递归版本的两个示例：

```
>>> from recursion import *
>>> fac = bet( lambda f: lambda n, a: a if not n else f(n-1,a*n) )
>>> fac(5,1)
120
>>> fibo = bet( lambda f: lambda n,p,q: p if not n else f(n-1,q,p+q) )
>>> fibo(10,0,1)
55 
```

显然递归深度不再是问题：

```
>>> bet( lambda f: lambda n: 42 if not n else f(n-1) )(50000)
42 
```

这当然是该功能的唯一真正目的。

这种优化只有一件事不能完成：它不能与评估另一个函数的尾递归函数一起使用（这是因为可调用的返回对象都被处理为没有区别的进一步递归调用）。由于我通常不需要这样的功能，所以我对上面的代码非常满意。然而，为了提供一个更通用的模块，我想了更多，以便找到一些解决这个问题的方法（见下一节）。

关于这个过程的速度（但这不是真正的问题），它恰好相当好；尾递归函数的求值甚至比使用更简单表达式的以下代码快得多：

```
def bet1(func):
    def wrapper(*args):
        out = func(lambda *x: lambda: x)(*args)
        while callable(out):
            out = func(lambda *x: lambda: x)(*out())
        return out
    return wrapper 
```

我认为评估一个表达式，即使是复杂的，比评估几个简单的表达式要快得多，第二个版本就是这种情况。我没有在我的模块中保留这个新功能，而且我没有看到可以使用它而不是“官方”的情况。

## 有例外的继续传递风格

这是一个更通用的功能；它能够处理所有尾递归函数，包括那些返回其他函数的函数。通过使用异常从其他返回值中识别递归调用。此解决方案比前一个解决方案慢；可以通过使用一些特殊值作为在主循环中检测到的“标志”来编写更快的代码，但我不喜欢使用特殊值或内部关键字的想法。使用异常有一些有趣的解释：如果 Python 不喜欢尾递归调用，当发生尾递归调用时应该引发异常，Python 的方法是捕获异常以便找到一些干净的解决方案，这实际上就是这里发生的事情......

```
class _RecursiveCall(Exception):
  def __init__(self, *args):
    self.args = args
def _recursiveCallback(*args):
  raise _RecursiveCall(*args)
def bet0(func):
    def wrapper(*args):
        while True:
          try:
            return func(_recursiveCallback)(*args)
          except _RecursiveCall as e:
            args = e.args
    return wrapper 
```

现在所有功能都可以使用了。在以下示例中，`f(n)`对于 n 的任何正值，对恒等函数求值：

```
>>> f = bet0( lambda f: lambda n: (lambda x: x) if not n else f(n-1) )
>>> f(5)(42)
42 
```

当然，可以说异常并不打算用于有意地重定向解释器（作为一种`goto`声明，或者可能更确切地说是一种延续传递风格），我必须承认这一点。`try`但是，再一次，我觉得使用单行作为语句的想法很有趣`return`：我们尝试返回一些东西（正常行为），但由于发生递归调用（异常），我们不能这样做。

**初步答案（2013-08-29）。**

我写了一个非常小的插件来处理尾递归。您可以在我的解释中找到它：[https ://groups.google.com/forum/?hl=fr#!topic/comp.lang.python/dIsnJ2BoBKs](https://groups.google.com/forum/?hl=fr#!topic/comp.lang.python/dIsnJ2BoBKs)

它可以将用尾递归样式编写的 lambda 函数嵌入到另一个函数中，该函数会将其评估为循环。

在我看来，这个小函数中最有趣的特性是，该函数不依赖于一些肮脏的编程技巧，而是仅仅依赖于 lambda 演算：当插入另一个 lambda 函数时，该函数的行为会更改为另一个看起来很像 Y 组合器。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-11-27T19:56:53.020

Guido 的话在[http://neopythonic.blogspot.co.uk/2009/04/tail-recursion-elimination.html](http://neopythonic.blogspot.co.uk/2009/04/tail-recursion-elimination.html)

> 我最近在我的 Python 历史博客上发表了一篇关于 Python 函数特性起源的文章。一个关于不支持尾递归消除 (TRE) 的评论立即引发了几条评论，说 Python 不这样做是多么遗憾，包括其他人试图“证明” TRE 可以添加到 Python 的最近博客条目的链接容易地。因此，让我捍卫我的立场（即我不希望在语言中使用 TRE）。如果您想要一个简短的答案，那简直是无稽之谈。这是长答案：

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-27T19:55:40.307

[CPython](https://en.wikipedia.org/wiki/CPython)不支持也可能永远不会支持基于[Guido van Rossum](https://en.wikipedia.org/wiki/Guido_van_Rossum)关于该主题的陈述的尾调用优化。

我听说过它使调试变得更加困难的论点，因为它修改了堆栈跟踪。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-09T14:38:23.510

除了优化尾递归之外，您还可以通过以下方式手动设置递归深度：

```
import sys
sys.setrecursionlimit(5500000)
print("recursion limit:%d " % (sys.getrecursionlimit())) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-15T00:11:30.557

尝试使用实验性的[macropy](https://github.com/lihaoyi/macropy#tail-call-optimization) TCO 实现来确定大小。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-03-20T03:40:07.160

Python 中没有内置的尾递归优化。但是，我们可以通过抽象语法树（AST）“重建”函数，消除那里的递归并用循环替换它。Guido 是绝对正确的，这种方法有一些局限性，所以我不推荐使用它。

但是，我仍然编写（而不是作为训练示例）我自己的优化器版本，您甚至可以尝试它是如何工作的。

通过 pip 安装这个包：

```
pip install astrologic 
```

现在您可以运行此示例代码：

```
from astrologic import no_recursion

counter = 0

@no_recursion
def recursion():
    global counter
    counter += 1
    if counter != 10000000:
        return recursion()
    return counter

print(recursion()) 
```

这个解决方案不稳定，你永远不应该在生产中使用它。[您可以在 github](https://github.com/pomponchik/astrologic)上阅读有关页面上的一些重要限制（俄语，抱歉）。然而，这个解决方案是相当“真实”的，没有中断代码和其他类似的技巧。

# macos - 创建启动两个进程的bash别名？

> ID：13591973
> 
> 赞同：0
> 
> 时间：2012-11-27T19:53:47.370
> 
> 标签：macos, bash, alias

我想创建一个别名：

1.  更改目录
2.  启动redis
3.  启动节点应用程序

我可以通过创建如下所示的别名来做到这一点：

```
alias startSP='cd mydirectory; redis-server;node myApp.js' 
```

问题是在`node myApp.js`我杀死 redis 之前这些片段不会运行。有什么方法可以让我在不等待第一个完成的情况下启动两个进程？

我应该尝试打开第二个标签来执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:57:13.973

我没有办法对此进行测试，但添加“&”在后台运行 cmd 应该可以工作，即

```
 alias startSP='cd mydirectory ; redis-server & node myApp.js' 
```

您可能需要添加第二个 &，即

```
 alias startSP='cd mydirectory ;redis-server & node myApp.js &' 
```

因为这会将提示返回给您，您可以继续在命令行下工作。

**编辑**

有很多方法可以杀死进程，在这里搜索 SO 如果你幸运的话，你就可以做到

```
 pkill redis-server
   pkill node ...? hm.... 
```

有很多方法可以解决这个问题，所以你最好检查一下你的特殊情况。

*   是否还有其他您不想杀死的 redis-server 副本正在运行？
*   是否有其他节点副本正在运行，然后，您如何区分这些副本。
*   你如何确保你正在杀死节点的“myApp.js”版本。

如果我要一直这样做，我会`startPS`变成一个函数来捕获使用“&”返回的 PID，将这些 pid 保存到环境中，然后有一个单独的函数可以确认这些 PID 存在，并且他们很有可能是正确的程序，然后发出杀戮。

另请注意，这`kill -15`是杀死程序的首选方法，使其有机会关闭文件等。

IHTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:57:06.893

您可以使用代替`;`顺序分隔两个进程的`&`，它在后台启动一个进程，然后在前台运行另一个进程：

```
alias startSP='cd mydirectory ; redis-server & node myApp.js' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:49:45.190

为什么不向您的个人资料添加功能呢？

```
startSP(){
 cd /your/directory
  redis-server && node myApp.js 
```

}

&& 将启动节点 myApp.js 等待 redis-server 启动

# android - 当收到安卓的短信关键字时，即使在静音模式下也会响起警报

> ID：13591974
> 
> 赞同：1
> 
> 时间：2012-11-27T19:53:49.983
> 
> 标签：android, sms, alarm

报警管理器到底是做什么的？它是真正播放声音的那个还是只是某种触发器？我正在尝试制作一个应用程序，当收到带有特定关键字的短信时，即使在静音模式下也会播放警报，然后显示一个警报对话框，该对话框将为用户提供按下按钮以回复消息。我已经在网上学习和寻找工作示例大约一周了，但他们都没有发出警报。另外，这些例子总是不同的和令人困惑的，这让我更加沮丧。我是 android app dev 的新手。请帮助我..提前谢谢。这是我的代码

```
public class EAlarmReceiver extends BroadcastReceiver {

public static String sender;
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras(); 
    Object[] pdusObj = (Object[]) bundle.get("pdus"); 
    SmsMessage[] messages = new SmsMessage[pdusObj.length]; 
    for (int i = 0; i<pdusObj.length; i++) 
    { 
            messages[i] = SmsMessage.createFromPdu ((byte[]) 
            pdusObj[i]); 
            sender = messages[i].getOriginatingAddress();
    } 

    for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("alert")) {
            Calendar cal = Calendar.getInstance();
            cal.add(Calendar.SECOND, 5);
            Intent i = new Intent(context, ReceiverInterface.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(context,
                12345, i, PendingIntent.FLAG_CANCEL_CURRENT);
            AlarmManager am = (AlarmManager)context.getSystemService(Activity.ALARM_SERVICE);
            am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                    pendingIntent);
        }//end if
    }//end for

}// end onreceive
} 
```

如果代码真的很乱，我很抱歉

```
public class ReceiverInterface extends Activity{
final Context context = this;
String my_password = "1234";
AlertDialog.Builder alertDialogBuilder;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.receiverinterface);

   alertDialogBuilder = new AlertDialog.Builder(
            context);
    alertDialogBuilder.setTitle("Emergency signal received");

            alertDialogBuilder
            .setMessage("Click availability status")
            .setCancelable(false)
            .setPositiveButton("available",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    dispatch_available_action();
                    Toast.makeText(getApplicationContext(), "available", Toast.LENGTH_LONG).show();
                }
              })
            .setNegativeButton("not available",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();

}// end oncreate()

public void dispatch_available_action(){
    final EditText password_input = new EditText(this); // create an text input field
    password_input.setHint("Enter Password"); // put a hint in it
    password_input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD); // change it to password type

    alertDialogBuilder = new AlertDialog.Builder(
            context);
    AlertDialog.Builder alertDialog = new Builder(this); // create an alert box
    alertDialog.setTitle("Enter Password"); // set the title
    alertDialog.setView(password_input);  // insert the password text field in the alert box
    alertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() { // define the 'OK' button
        public void onClick(DialogInterface dialog, int which) {
             String entered_password = password_input.getText().toString();
             if (entered_password.equals(my_password)) {
                 alertDialogBuilder.setTitle("Send status");

                 alertDialogBuilder.setCancelable(false);
                 alertDialogBuilder.setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {

                            try {

                            String message = "available";
                            SmsManager smsManager = SmsManager.getDefault();
                            EAlarmReceiver eReceiver = new EAlarmReceiver();
                            String eSender = eReceiver.sender;
                            Toast.makeText(getApplicationContext(), eSender,
                                    Toast.LENGTH_LONG).show();
                            smsManager.sendTextMessage(eSender, null, message, null, null);

                            } catch (Exception e) {
                                Toast.makeText(getApplicationContext(),
                                "SMS failed, please try again later!",
                                Toast.LENGTH_LONG).show();
                                e.printStackTrace();
                            }
                        }
                      });
                    alertDialogBuilder.setNegativeButton("No",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, just close
                            // the dialog box and do nothing
                            dialog.cancel();
                        }
                    });
                    // create alert dialog
                    AlertDialog alertDialog = alertDialogBuilder.create();

                    // show it
                    alertDialog.show();

             } else {
                 Toast.makeText(getApplicationContext(),
                        "Wrong password!",
                        Toast.LENGTH_LONG).show();
             }
        } 
    });
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() { // define the 'Cancel' button
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
        } 
    });
    alertDialog.show(); // show the alert box
}
} 
```

警报对话框工作正常，我只是无法让警报响起，更不用说在静音模式下这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:31:16.620

AlarmManager[所做](http://developer.android.com/reference/android/app/AlarmManager.html)的只是在给定时间执行一个 PendingIntent，并带有可选的重复。它与音频流无关。[当收到 PendingIntent 时，这个 howto](http://www.vogella.com/articles/AndroidMedia/article.html#sound_overview)可能会帮助您播放声音。

# c# - 从空格更改字符串上部

> ID：13591978
> 
> 赞同：-5
> 
> 时间：2012-11-27T19:54:05.150
> 
> 标签：c#

当文本框更改时，如何在文本框中的空格后将第一个字符串从低位更改为高位？

我正在使用 WPF 和 C# 代码。

例如，当我在文本框中输入“新文本框字符串”时，文本框中的字符串必须自动更改为“新文本框字符串”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:19:59.740

您可以处理该[`TextChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)事件。然后您可以使用该`TextInfo` [`ToTitleCase`](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase.aspx)函数将每个单词的第一个字符转换为大写字母。

```
System.Globalization.TextInfo en_text_info = 
   new System.Globalization.CultureInfo("en-US", false).TextInfo;
textBox1.Text = en_text_info.ToTitleCase(textBox1.Text); 
```

这会将类似的东西转换`"hi thEre how R yOu dOINg?"`为`"Hi There How R You Doing?"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:57:55.390

您需要文本框更改事件的事件处理程序（不确定这是 WinForms、WPF 还是其他）。

在该事件处理程序中，您可以遍历字符串中的每个字符位置，将每个字符添加到新的 StringBuilder。如果给定索引处的字符是空格（使用[String.IsNullOrWhiteSpace()](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)），请设置一个标志，您需要将下一个字母字符大写。

如果您点击了一个字母字符，并且设置了前一个标志，则复制该字符的大写等效项（使用[String.ToUpper()](http://msdn.microsoft.com/en-us/library/system.string.toupper%28v=vs.110%29.aspx)）并清除该标志。

将文本框的内容设置为 myStringBuilder.ToString()。

根据所讨论的 UI 框架，它可能会生成一个新的文本更改事件，您需要忽略该事件以避免无限递归。

# sml - SML中数据类型的识别

> ID：13591981
> 
> 赞同：0
> 
> 时间：2012-11-27T19:54:10.983
> 
> 标签：sml, smlnj

这是令人困惑但有效的代码。我只是想要一些帮助来理解为什么 k::ks 被视为'list list list 而不是'list list。我想获取一个列表和列表列表并检查第一个列表是否是必要的。必要的意思是，第一个列表中的所有元素是否都可以在另一个列表中找到。

```
fun do1(a,[],_)=false
|do1(a,k::ks,n)=if a=List.nth(k,n)orelse do1(a,ks,n) then true else false;

val n=0;
fun do2([],k::ks,_)=[]
|do2(_,[],_)=raise unexpected
|do2(l,k::ks,n)=if List.nth(l,n-1)=0 then do2(l,k::ks,n+1)
                        else 
                        if do1(l,k::ks,n) then []
                        else l; 
```

重复问题：我只是想要一些帮助来理解为什么 k::ks 被视为'list list list 而不是'list list。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:31:32.257

在 的定义中`do2`，`l`是一个列表。`do2`然后调用`do1`with`l`作为第一个参数，所以 , 的第一个参数`do1`也是`a`一个列表。现在在第 2 行，您可以这样做`a = List.nth(k,n)`。所以既然`a`是一个列表，那么`List.nth(k,n)`也一定是一个列表。这意味着它`k`必须是一个列表列表。这反过来意味着它`k::ks`必须是列表列表的列表。

PS：通常当试图找出编译器推断出与预期不同的类型时，将类型注释添加到函数定义中会有所帮助。通常，由此产生的类型错误会让您更清楚地了解编译器对所涉及类型的看法与您的不同之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:43:38.073

虽然这种类型的代码并没有真正交换想法，但我已经包含了解决方案。

在函数中，

```
fun do2([],k::ks,_)=[]
|do2(_,[],_)=raise unexpected
|do2(l,k::ks,n)=if List.nth(l,n-1)=0 then do2(l,k::ks,n+1)
                        else 
                        if do1(l,k::ks,n) then []
                        else l; 
```

倒数第二行

```
if do1(l,k::ks,n) then [] 
```

应该

```
if do1(List.nth(l,n-1),k::ks,n) then [] 
```

# git - Git在提交时指定用户和电子邮件？

> ID：13591982
> 
> 赞同：4
> 
> 时间：2012-11-27T19:54:16.543
> 
> 标签：git

我们已经在测试服务器上创建了代码的一个分支，现在多个用户正在通过 SSH 连接到新服务器并使用命令行进行所有提交来工作。但是，当然 Git 不知道是谁进行了更改和提交，因此我们需要在提交期间指定作者。

我认为我们可以通过以下方式实现这一目标：

```
git commit -a -m 'removed temporary images' --author='deed02392 <foo@bar.net>' 
```

但这给出了：

```
[test-branch 77b9357] removed temporary image 
    Author: deed02392 <foo@bar.net>
    Committer: root <root@vs123.(none)>
    Your name and email address were configured automatically based on your username and hostname. Please check that they are accurate. You can suppress this message by setting them explicitly:

    git config --global user.name "Your Name"
    git config --global user.email you@example.com

If the identity used for this commit is wrong, you can fix it with:

    git commit --amend --author='Your Name <you@example.com>'

 1 files changed, 0 insertions(+), 0 deletions(-)  delete mode 100644 derp.PNG 
```

期望每个用户每次都更改配置似乎太过分了。这种行为是因为 Git 的设计目的不是让多个用户使用一个存储库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T09:25:51.953

只要所有用户使用不同的系统帐户，运行

```
 git config --global user.*** 
```

每个用户应该解决一次问题，即使所有用户都在同一个 repo 上工作，因为这些设置是用户特定的并保存在`$HOME/.gitconfig`.

`su`（当然）如果他们在运行 git 之前使用 root 或其他共享帐户，它将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T09:43:29.200

想法1：看看[这个链接，它展示了如何使用环境变量来定义作者姓名等。](https://stackoverflow.com/a/12089786/1298153)

Idea2：例如，Github 有一个通用的“git”用户，每个人都使用它来将更改推送到他们的存储库，并且他们可能通过 ssh 密钥来区分用户。您可以朝那个方向尝试一些东西，但我不确定它是否适用于您的设置，因为您直接在服务器上工作。

这些链接是相关的：[这个链接](https://askubuntu.com/questions/269140/how-to-user-multiple-ssh-keys-with-different-accounts-and-hosts)，[这个](https://stackoverflow.com/a/2419609/1298153)。这是一个解释[gitolite 如何发挥 ssh 魔力的链接](http://gitolite.com/gitolite/glssh.html)

# javascript - onclick 或内联脚本在扩展中不起作用

> ID：13591983
> 
> 赞同：80
> 
> 时间：2012-11-27T19:54:24.137
> 
> 标签：javascript, google-chrome-extension, onclick, firefox-addon-webextensions

这似乎是最简单的事情，但它只是不工作。在普通浏览器中，.html 和 .js 文件可以完美运行，但在 Chrome/Firefox 扩展程序中，该`onClick`功能无法执行应有的功能。

.js 文件：

```
function hellYeah(text) {
  document.getElementById("text-holder").innerHTML = text;
} 
```

.html 文件：

```
<!doctype html>
<html>
  <head>
    <title>
      Getting Started Extension's Popup
    </title>
    <script src="popup.js"></script>
  </head>
  <body>
    <div id="text-holder">
      ha
    </div>
    <br />
    <a onClick=hellYeah("xxx")>
      hyhy
    </a>
  </body>
</html> 
```

所以基本上一旦用户点击“hyhy”，“ha”应该变成“xxx”。再一次 - 它在浏览器中完美运行，但在扩展程序中不起作用。你知道为什么吗？以防万一我也在下面附加 manifest.json。

清单.json：

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "http://api.flickr.com/"
  ]
} 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-11-27T19:58:50.713

Chrome 扩展程序不允许您使用内联 JavaScript（[文档](http://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution)）。
Firefox WebExtensions（[文档](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy#Inline_JavaScript)）也是如此。

你将不得不做类似的事情：

为链接分配一个 ID ( `<a onClick=hellYeah("xxx")>`become `<a id="link">`)，并用于[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)绑定事件。将以下内容放入您的`popup.js`文件中：

```
document.addEventListener('DOMContentLoaded', function() {
    var link = document.getElementById('link');
    // onClick's logic below:
    link.addEventListener('click', function() {
        hellYeah('xxx');
    });
}); 
```

`popup.js`应作为单独的脚本文件加载：

```
<script src="popup.js"></script> 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-09-08T09:46:57.630

## 原因

这不起作用，因为 Chrome通过内容安全策略禁止在扩展程序中使用[任何类型的内联代码。](https://developer.chrome.com/extensions/contentSecurityPolicy#JSExecution)

> 内联 JavaScript 将不会被执行。此限制禁止内联`<script>`块**和**内联事件处理程序（例如`<button onclick="...">`）。

## 如何检测

如果这确实是问题所在，Chrome 会在控制台中产生以下错误：

> 拒绝执行内联脚本，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。启用内联执行需要“unsafe-inline”关键字、哈希（“sha256-...”）或随机数（“nonce-...”）。

要访问弹出窗口的 JavaScript 控制台（通常对调试很有用），请右键单击扩展程序的按钮并从上下文菜单中选择“检查弹出窗口”。

[此处](https://developer.chrome.com/extensions/tut_debugging)提供了有关调试弹出窗口的更多信息。

## 怎么修

需要删除所有内联 JavaScript。[Chrome 文档中](https://developer.chrome.com/extensions/contentSecurityPolicy#JSExecution)有一个指南。

假设原来的样子：

```
<a onclick="handler()">Click this</a> <!-- Bad --> 
```

需要删除`onclick`属性并给元素一个唯一的 id：

```
<a id="click-this">Click this</a> <!-- Fixed --> 
```

`.js`然后从脚本附加监听器（假设必须在文件中`popup.js`）：

```
// Pure JS:
document.addEventListener('DOMContentLoaded', function() {
  document.getElementById("click-this").addEventListener("click", handler);
});

// The handler also must go in a .js file
function handler() {
  /* ... */
} 
```

注意事件中的包装`DOMContentLoaded`。这可确保元素在执行时存在。现在添加脚本标签，例如在`<head>`文档中：

```
<script src="popup.js"></script> 
```

如果您使用 jQuery，则另一种选择：

```
// jQuery
$(document).ready(function() {
  $("#click-this").click(handler);
}); 
```

## 放宽政策

**问：**错误提到了允许内联代码的方法。我不想/不能更改我的代码，如何启用内联脚本？

**答：**尽管错误说明了什么，但您[**无法**启用内联脚本](https://developer.chrome.com/extensions/contentSecurityPolicy#relaxing-inline-script)：

> 没有机制可以放宽对执行内联 JavaScript 的限制。特别是，设置包含的脚本策略`'unsafe-inline'`将不起作用。

**更新：**从 Chrome 46 开始，可以将特定的内联代码块列入白名单：

> 从 Chrome 46 开始，可以通过在策略中指定源代码的 base64 编码哈希来将内联脚本列入白名单。此哈希必须以使用的哈希算法（sha256、sha384 或 sha512）作为前缀。有关示例，请参阅[元素的](https://www.w3.org/TR/2015/CR-CSP2-20150721/#script-src-hash-usage)[哈希用法。`<script>`](https://www.w3.org/TR/2015/CR-CSP2-20150721/#script-src-hash-usage)

但是，我看不出使用它的理由，而且它不会启用像`onclick="code"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-20T18:34:18.053

如前所述，由于安全原因，Chrome 扩展程序不允许使用内联 JavaScript，因此您也可以尝试此解决方法。

HTML 文件

```
<!doctype html>
    <html>
        <head>
            <title>
                Getting Started Extension's Popup
            </title>
            <script src="popup.js"></script>
        </head>
        <body>
            <div id="text-holder">ha</div><br />
            <a class="clickableBtn">
                  hyhy
            </a>
        </body>
    </html>
<!doctype html> 
```

popup.js

```
window.onclick = function(event) {
    var target = event.target ;
    if(target.matches('.clickableBtn')) {
        var clickedEle = document.activeElement.id ;
        var ele = document.getElementById(clickedEle);
        alert(ele.text);
    }
} 
```

或者，如果您包含一个 Jquery 文件，那么

```
window.onclick = function(event) {
    var target = event.target ;
    if(target.matches('.clickableBtn')) {
        alert($(target).text());
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-04T21:39:15.643

我有同样的问题，不想重写代码，所以我写了一个函数来修改代码并创建内联声明的事件：

```
function compile(qSel){
    var matches = [];
    var match = null;
    var c = 0;

    var html = $(qSel).html();
    var pattern = /(<(.*?)on([a-zA-Z]+)\s*=\s*('|")(.*)('|")(.*?))(>)/mg;

    while (match = pattern.exec(html)) {
        var arr = [];
        for (i in match) {
            if (!isNaN(i)) {
                arr.push(match[i]);
            }
        }
        matches.push(arr);
    }
    var items_with_events = [];
    var compiledHtml = html;

    for ( var i in matches ){
        var item_with_event = {
            custom_id : "my_app_identifier_"+i,
            code : matches[i][5],
            on : matches[i][3],
        };
        items_with_events.push(item_with_event);
        compiledHtml = compiledHtml.replace(/(<(.*?)on([a-zA-Z]+)\s*=\s*('|")(.*)('|")(.*?))(>)/m, "<$2 custom_id='"+item_with_event.custom_id+"' $7 $8");
    }

    $(qSel).html(compiledHtml);

    for ( var i in items_with_events ){
        $("[custom_id='"+items_with_events[i].custom_id+"']").bind(items_with_events[i].on, function(){
            eval(items_with_events[i].code);
        });
    }
}

$(document).ready(function(){
    compile('#content');
}) 
```

这应该从所选节点中删除所有内联事件，并使用 jquery 重新创建它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-31T19:46:10.197

我决定发布我在案例中使用的示例。我尝试使用脚本替换 div 中的内容。我的问题是 Chrome 无法识别/没有运行该脚本。

更详细我想做的事情：单击一个链接，然后该链接“读取”外部 html 文件，它将被加载到 div 部分中。

*   我发现通过将脚本放在被调用的带有 ID 的 DIV 之前，脚本不起作用。
*   如果脚本在另一个 DIV 中，它也不起作用
*   脚本必须使用 document.addEventListener('DOMContentLoaded', function() 进行编码，因为它被告知

    ```
     <body>
        <a id=id_page href ="#loving"   onclick="load_services()"> loving   </a>

            <script>
                    // This script MUST BE under the "ID" that is calling
                    // Do not transfer it to a differ DIV than the caller "ID"
                    document.getElementById("id_page").addEventListener("click", function(){
                    document.getElementById("mainbody").innerHTML = '<object data="Services.html" class="loving_css_edit"; ></object>'; });
                </script>
        </body>

      <div id="mainbody" class="main_body">
            "here is loaded the external html file when the loving link will 
             be  clicked. "
      </div> 
    ```

# magento - Magento 自定义块中断站点。为什么？

> ID：13591985
> 
> 赞同：4
> 
> 时间：2012-11-27T19:54:38.497
> 
> 标签：magento, block, magento-1.7

我正在为 magento 1.7 开发一个自定义块。我在我的配置 xml 中有这样声明的块。该模块还定义了一个运行良好的控制器。我需要一个带有一些逻辑的新块，所以我想我会使用我已经创建的模块。我在下面包含了块声明。

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
<modules>
    <Company_Catalog>
        <version>0.1.0</version>
    </Company_Catalog>
</modules>
<global>
    <blocks>
        <catalog>
            <class>Company_Catalog_Block</class>
        </catalog>
    </blocks>
</global>
</config> 
```

我使用以下语法在我的主题中使用了 local.xml 中的块：

```
<block type="catalog/featured" name="featuredproducts" before="-" template="catalog/featured.phtml"/> 
```

该块看起来像我想要的那样，但问题是该站点的大部分其余部分都已损坏，并且 exception.log 充满了 magento，正在我的模块中寻找其他块。例子：

```
2012-11-27T19:34:47+00:00 ERR (3):
exception 'Mage_Core_Exception' with message 'Invalid block type:Company_Catalog_Block_Product_List' in /home/project/site_content/app/Mage.php:594
2012-11-27T19:34:47+00:00 ERR (3):
exception 'Mage_Core_Exception' with message 'Invalid block type: Company_Catalog_Block_Product_List_Toolbar' in /home/project/site_content/app/Mage.php:594 
```

我不想重写任何现有块，只需在我已经声明的模块中添加一个新块。

我显然已经告诉 Magento 在我的模块中寻找比我想要的更多的东西。这是我第一次尝试在 Magento 中使用自定义块，所以我不确定我做错了什么。

我知道在 Mage 命名空间中也使用了“目录”，但我正在自己的命名空间中工作。据我了解，应该没有冲突。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:57:32.883

您正在覆盖*Mage/Catalog/etc/config.xml*中的原始目录块类前缀：

```
<global>
    <blocks>
        <catalog>
            <class>Mage_Catalog_Block 
```

通过这样做，对目录块类型 () 的每个请求都`type="catalog/..."`使用前缀`Company_Catalog_Block`。

# node.js - 打字稿模块导入案例类未定义

> ID：13591988
> 
> 赞同：1
> 
> 时间：2012-11-27T19:54:54.940
> 
> 标签：node.js, typescript

我有两个文件

应用程序.js

```
///<reference path='mongodb.d.ts'/>
///<reference path='MyDatabase.ts'/>
module MyModule {
  import mongodb = module("mongodb");
  new mongodb.Server();
  var db = new MyDatabase(); // this will not work with first import line in Database.js, but work with second
} 
```

MyDatabase.js

```
///<reference path='mongodb.d.ts'/>

import mongodb = module("mongodb"); // adding this line here, will cause that app.js will not see MyDatabase class

module MyModule {
   import mongodb = module("mongodb"); // adding this line this will cause that classes in this module cant use mongodb

   export class MyData {
      _id: mongodb.Id; // second import line will cause this to be compilation error, with first line it works
   }

   export class MyDatabase {
       public test(): void {
          //with second line i can access mongodb here
       }
   }
} 
```

所以问题是，我错过了什么？我应该如何导入 mongodb？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:29:06.903

看起来您可能将外部模块 ( `export`/ `import`) 与“内部”`module`块混淆了？导入声明应该只出现在文件的顶层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:11:14.997

我认为问题在于 TS 引用路径是*包含*，而不是*导入*。只要您不使用导入/导出，TS 编译器就会将所有内容都放在“全局模块”中，并使用参考路径将它们拼接在一起。

一旦您开始在文件中使用导入/导出，该文件将被解释为它自己的模块，不再是全局模块的一部分。查看 TS 语言规范，第 9.1 节，了解详细信息。

所以，我怀疑——一旦你开始使用 import in——你`MyDataBase.ts`也需要将该文件作为外部模块导入（而不仅仅是引用它）。

# sql - 访问更新查询无法更新特定记录

> ID：13591990
> 
> 赞同：0
> 
> 时间：2012-11-27T19:54:56.850
> 
> 标签：sql, ms-access-2007, jet-sql

我有一个表，其中有一列可 ping 的计算机名称，作为更大表的一部分提供给我。计算机名称可以包含点域名和/或 IP 地址。我需要将计算机名和域名分开到它们自己的列中。

例如：

```
ComputerFullName   | ComputerName | Domain
comp1              |              |
1.2.0.1            |              |
comp3.place.com    |              |
1.2.1.45.place.com |              | 
```

我可以使用以下查询来填写域：

```
UPDATE Example 
SET Domain = SWITCH(
   ComputerFullName LIKE '#*.#*.#*.#*.*', MID(ComputerFullName, INSTR(1, REPLACE(ComputerFullName, '.', ' ', 1, 3), '.') + 1)
   , ComputerFullName LIKE '#*.#*.#*.#*', NULL
   , INSTR(1, ComputerFullName, '.') <> 0, MID(ComputerFullName, INSTR(1, ComputerFullName, '.') + 1)
); 
```

我尝试了几个查询来更新 ComputerName 列，最有希望的是：

```
UPDATE Example 
SET ComputerName = SWITCH(
   ComputerFullName LIKE '#*.#*.#*.#*.*', LEFT(ComputerFullName, INSTR(1, ComputerFullName, Domain) - 2)
   , ComputerFullName LIKE '#*.#*.#*.#*', ComputerFullName
   , INSTR(1, ComputerFullName, '.') <> 0, LEFT(ComputerFullName, INSTR(1, ComputerFullName, '.') - 1)
   , TRUE, ComputerFullName
); 
```

此尝试和所有其他尝试均返回错误消息，提示“Microsoft Office Access 无法更新更新查询中的所有记录...由于类型转换失败，Access 未更新 2 个字段...”

结果表如下所示：

```
ComputerFullName   | ComputerName | Domain
comp1              |              |
1.2.0.1            |              |
comp3.place.com    | comp3        | place.com
1.2.1.45.place.com | 1.2.1.45     | place.com 
```

我想要的表是：

```
ComputerFullName   | ComputerName | Domain
comp1              | comp1        |
1.2.0.1            | 1.2.0.1      |
comp3.place.com    | comp3        | place.com
1.2.1.45.place.com | 1.2.1.45     | place.com 
```

有什么建议么？

* * *

在使用以下答案时，我意识到为什么我的上述查询不起作用。即使条件为假，Access 也会评估 SWITCH 语句中的每个可能值。因此，当没有域时，LEFT 函数的长度参数为负数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:04:31.250

I think what @HansUp was referring to was calling a function from within your query to split your names. Try this function:

```
Function SplitName(ByRef CFN As String, PartWanted As Integer) As String
    Dim CFN2 As String
    Dim I As Integer
    CFN2 = Replace(CFN, ".", "")
    If IsNumeric(CFN2) Then 'assume it's an IP address
        CFN = CFN & "|"
    Else
        Select Case Len(CFN) - Len(CFN2) 'we count the dots
            Case Is > 1 'at least 2 dots means computer & domain names
                I = InStrRev(CFN, ".")
                I = InStrRev(CFN, ".", I - 1)
                Mid(CFN, I) = "|"
            Case Is = 1 ' 1 dot means domain name only
                CFN = "|" & CFN
            Case Else '0 dots means computer name only
                CFN = CFN & "|"
        End Select
    End If
    SplitName = Split(CFN, "|")(PartWanted)
End Function 
```

The PartWanted parameter would be either a 0 (to get the computer name) or 1 (to get the domain name). So your query would look like:

```
UPDATE Example 
SET Computername = SplitName([ComputerFullName],0), Domain = SplitName([ComputerFullName],1); 
```

This runs pretty fast. I tested it and it took 13 seconds to call this function 2 million times (this didn't include the actual updating, just the calling).