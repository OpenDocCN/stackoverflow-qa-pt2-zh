# StackOverflow 问答 15459000-15459999

# java - Joda-Time，没有日期的时间

> ID：15459001
> 
> 赞同：17
> 
> 时间：2013-03-17T08:47:34.550
> 
> 标签：java, jodatime

我想要一个只存储时间而不是日期或日期的类。Joda-Time 有这门课吗？还是我必须使用日期时间并仅将时间部分转换为字符串然后使用该部分？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-17T08:51:10.953

[`LocalTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalTime.html)为此目的开设了课程。

在这里阅读更多关于[局部的信息](http://joda-time.sourceforge.net/key_partial.html)。例如：

```
LocalTime time = new LocalTime(12, 20);
String formatted = time.toString("HH:mm"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T08:52:21.597

`LocalTime`- 表示没有日期的时间（无时区）的不可变类

看看[这个](http://joda-time.sourceforge.net/quickstart.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T19:29:35.593

从 JodaTime 2.0 开始，也可以像这样实例化没有日期的时间：

```
LocalTime time = LocalTime.parse( //
      "12h20", //
       DateTimeFormatter.forPattern("HH'h'mm") //
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-21T17:26:16.547

Java 8 现在有自己的[LocalTime](https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html)类。不需要外部库。

# android - 如何在actionBar android中从Fragment显示DialogFragment

> ID：15459002
> 
> 赞同：5
> 
> 时间：2013-03-17T08:47:47.417
> 
> 标签：android, android-fragments, android-dialogfragment, android-nested-fragment

我将 Tabs ActionBar 与 Fragments 一起使用。在一个片段内我有按钮。我想在`DialogFragment`按下按钮时显示一个（在我的片段内）。我怎样才能做到这一点？

这是我的代码

```
 public class MainActivity extends FragmentActivity implements EditNameDialogListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //showEditDialog();
        ActionBar actionbar = getActionBar();
        // Tell the ActionBar we want to use Tabs.
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        // initiating both tabs and set text to it.
        ActionBar.Tab InboxTab = actionbar.newTab().setText("One");
        ActionBar.Tab SentTab = actionbar.newTab().setText("Two");

        Fragment InboxFragment = new Inbox();
        Fragment SentFragment = new SentBox();
        InboxTab.setTabListener(new MyTabsListener(InboxFragment));
        SentTab.setTabListener(new MyTabsListener(SentFragment));
        actionbar.addTab(InboxTab);
        actionbar.addTab(SentTab);
    }

    private void showEditDialog() {
        FragmentManager fm = getSupportFragmentManager();
        EditNameDialog editNameDialog = new EditNameDialog();
        editNameDialog.show(fm, "fragment_edit_name");
    }

    @Override
    public void onFinishEditDialog(String inputText) {
        Toast.makeText(this, "Hi, " + inputText, Toast.LENGTH_SHORT).show();
    }

}
class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }
    public class Inbox extends Fragment implements EditNameDialogListener{

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            // Inflate the layout for this fragment
            Utility util = new Utility(getActivity());
            View view =  inflater.inflate(R.layout.inbox, container, false);
            ArrayList<String[]> searchResults = util.ReadFile();

            final ListView lv1 = (ListView) view.findViewById(R.id.inboxList);
            lv1.setAdapter(new MyCustomBaseAdapter(getActivity(), searchResults));

            lv1.setOnItemClickListener(new OnItemClickListener() {
             @Override
             public void onItemClick(AdapterView<?> a, View v, int position, long id) {
                 Object o = lv1.getItemAtPosition(position);
                 String[] fullObject = (String[])o;
                Toast.makeText(getActivity(), "You have chosen: " + " " + fullObject[0], Toast.LENGTH_LONG).show();
             } 
            });

            return view;
        }

        @Override
        public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
            // TODO Auto-generated method stub
            super.onCreateOptionsMenu(menu, inflater);
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            // TODO Auto-generated method stub

            switch (item.getItemId()) {
            case R.id.menu_settings:

                showEditDialog();
                break;

            default:
                break;
            }
            return super.onOptionsItemSelected(item);
        }

        private void showEditDialog() {
            FragmentManager ft = getSupportFragmentManager();
            EditNameDialog editNameDialog = new EditNameDialog();
            editNameDialog.show(ft, "fragment_edit_name");
        }

        @Override
        public void onFinishEditDialog(String inputText) {
            Toast.makeText(getActivity(), "Hi, " + inputText, Toast.LENGTH_SHORT).show();
        }

    }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            /*
             * Toast.makeText(StartActivity.appContext, "Reselected!",
             * Toast.LENGTH_LONG).show();
             */
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            ft.replace(R.id.fragment_container, fragment);
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            ft.remove(fragment);
        }

    }

public class EditNameDialog extends DialogFragment implements OnEditorActionListener{

     public interface EditNameDialogListener {
            void onFinishEditDialog(String inputText);
        }

        private EditText mEditText;

        public EditNameDialog() {
            // Empty constructor required for DialogFragment
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.fragment_edit_name, container);
            mEditText = (EditText) view.findViewById(R.id.txt_your_name);
            getDialog().setTitle("Hello");

            // Show soft keyboard automatically
            mEditText.requestFocus();
            getDialog().getWindow().setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_VISIBLE);
            mEditText.setOnEditorActionListener(this);

            return view;
        }

        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (EditorInfo.IME_ACTION_DONE == actionId) {
                // Return input text to activity
                EditNameDialogListener activity = (EditNameDialogListener) getActivity();
                activity.onFinishEditDialog(mEditText.getText().toString());
                this.dismiss();
                return true;
            }
            return false;
        }
public class Inbox extends Fragment implements EditNameDialogListener{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        Utility util = new Utility(getActivity());
        View view =  inflater.inflate(R.layout.inbox, container, false);
        ArrayList<String[]> searchResults = util.ReadFile();

        final ListView lv1 = (ListView) view.findViewById(R.id.inboxList);
        lv1.setAdapter(new MyCustomBaseAdapter(getActivity(), searchResults));

        lv1.setOnItemClickListener(new OnItemClickListener() {
         @Override
         public void onItemClick(AdapterView<?> a, View v, int position, long id) {
             Object o = lv1.getItemAtPosition(position);
             String[] fullObject = (String[])o;
            Toast.makeText(getActivity(), "You have chosen: " + " " + fullObject[0], Toast.LENGTH_LONG).show();
         } 
        });

        return view;
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        // TODO Auto-generated method stub
        super.onCreateOptionsMenu(menu, inflater);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub

        switch (item.getItemId()) {
        case R.id.menu_settings:

            showEditDialog();
            break;

        default:
            break;
        }
        return super.onOptionsItemSelected(item);
    }

    private void showEditDialog() {
        FragmentManager ft = getSupportFragmentManager();
        EditNameDialog editNameDialog = new EditNameDialog();
        editNameDialog.show(ft, "fragment_edit_name");
    }

    @Override
    public void onFinishEditDialog(String inputText) {
        Toast.makeText(getActivity(), "Hi, " + inputText, Toast.LENGTH_SHORT).show();
    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-17T08:59:56.173

使用它来显示来自片段的对话片段

```
FragmentManager fm = getActivity().getSupportFragmentManager();
DialogFragment dialog = new MyDialogFragment(); // creating new object
dialog.show(fm, "dialog"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T06:30:25.273

使用 getChildFragmentManager() 而不是 getSupportFragmentManager(); 像这样

```
FragmentManager fm = getActivity().getChildFragmentManager();
DialogFragment dialog = MyDialogFragment();
dialog.show(fm, "dialog"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-03T09:35:45.430

您也可以直接使用`getFragmentManager()`.No`getChildFragmentManager()`或`getSupportFragmentManager()`

```
DialogFragment dialog = new YourDialogFragment();
dialog.show(getFragmentManager(), "yourDialog"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-02T19:14:04.077

```
FragmentManager fm = getActivity().getChildFragmentManager();
DialogFragment dialog = MyDialogFragment();
dialog.show(fm, "dialog"); 
```

想要将参数传递给对话片段就像我们将值从一个活动传递到另一个

```
 FragmentManager fm = getActivity().getChildFragmentManager();
 DialogFragment dialog = MyDialogFragment();

  Bundle args = new Bundle();
  args.putString("Key", "Your String");

  dialog.setArguments(args);
  dialog.show(fm, "dialog"); 
```

# if-statement - Mathematica-If 语句不执行真/假

> ID：15459003
> 
> 赞同：0
> 
> 时间：2013-03-17T08:47:59.967
> 
> 标签：if-statement, for-loop, wolfram-mathematica, brute-force

我设置了一个笔记本来对方程中使用的数组中的数字进行详尽的搜索，如果方程等于定义的变量，则它返回方程中变量的值。唯一的问题是，最后一个 For 循环中的 If 语句从未运行过 true/false/neither 函数。我能够让它做任何事情的唯一方法是使用通用的 Print[blah]，然后它通过所有 For 循环进行绝对打印每次迭代。这是我到目前为止所拥有的-

```
AvTarget := -95
arr := {1, 1.1, 1.2, 1.3, 1.5, 1.6, 1.8, 2, 2.2, 2.4, 2.7, 3, 3.3, 
  3.6, 3.9, 4.3, 4.7, 5.1, 5.6, 6.2, 6.8, 7.5, 8.2, 9.1, 10}
trueArr := {}
falseArr := {}
For[i = 1, i <= Length[arr], i = i + 1,
 For[j = 1, j <= Length[arr], j = j + 1,
  For[k = 1, k <= Length[arr], k = k + 1,
   If[Abs[
      AvTarget - (arr[[i]] + arr[[k]] + (arr[[i]] + arr[[k]])/
         arr[[j]])] < 1000, Append[trueArr, {i, j, k}], 
    Append[falseArr, 1], Append[falseArr, 0]]
   ]
  ]
 ]
Length[trueArr]
Length[falseArr] 
```

我还没有处理过数学中的循环，所以我不确定问题是什么。

**编辑** -好的，所以这段代码现在可以按照我需要的方式工作-

```
AvTarget = -95;
tol = 0.1;
arr := {1, 1.1, 1.2, 1.3, 1.5, 1.6, 1.8, 2, 2.2, 2.4, 2.7, 3, 3.3, 
  3.6, 3.9, 4.3, 4.7, 5.1, 5.6, 6.2, 6.8, 7.5, 8.2, 9.1, 10}
trueArr = {};
falseArr = {};
For[i = 1, i <= Length[arr], i++,
 For[j = 1, j <= Length[arr], j++,
  For[k = 1, k <= Length[arr], k++,
   If[Abs[
      AvTarget - (-(arr[[i]] + arr[[k]] + (arr[[i]]*arr[[k]])/
           arr[[j]]))] <= tol, 
    trueArr = Append[trueArr, {arr[[i]], arr[[j]], arr[[k]]}], 
    Append[falseArr, 1], Append[falseArr, 0]]
   ]
  ]
 ]
Length[trueArr] 
```

From there if Length > 0 I can just add an If to display the results. What would be the best way to have all the results within the tolerance printed in order of closest to AvTarget?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:04:19.730

You should assign the return value of `Append` to the respective variable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:07:09.977

Append[trueArr, {i,j,k}] gives trueArr with {i,j,k} appended and then discards the result. You want trueArr = Append[trueArr, {i, j, k}]. Also, ":=" is the SetDelayed operator. You should be using "=".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T09:32:47.070

Loops are almost always the wrong way to go with Mathematica. I rewrote your original code to

```
avTarget = -95;
arr := {1, 1.1, 1.2, 1.3, 1.5, 1.6, 1.8, 2, 2.2, 2.4, 2.7, 3, 3.3, 
  3.6, 3.9, 4.3, 4.7, 5.1, 5.6, 6.2, 6.8, 7.5, 8.2, 9.1, 10};
triples = Tuples[arr, 3];
trueArr = Select[triples, Abs[avTarget - (#[[1]] + #[[3]] + (#[[1]] + #[[3]])/#[[2]]) < 
    1000] &];
falseArr = Complement[triples,trueArr]; 
```

I've been using Mathematica for about 20 years, I can't recall ever needing loops. Sure, sometimes it's easier to express an algorithm using loops than the functional alternatives that Mathematica provides but you should really kick away the crutches that they provide and walk the Mathematica way.

# ocaml - caml-light 最后一行没有发出警告

> ID：15459011
> 
> 赞同：0
> 
> 时间：2013-03-17T08:49:56.147
> 
> 标签：ocaml, ml, caml-light

我在玩`-`caml-light 中的一元运算符和二元运算符之间的区别。

```
let a b = 
print_int b;
  print_newline();
;;

let c d e  = 
print_int d;
  print_newline();
print_int e;
  print_newline();
;;

a (3 - 4 ) ;
c (9 - 4 )
;; 
```

我希望代码要么抛出错误（因为它对 a 或 c 有多少参数感到困惑）要么打印：

```
-1
5 
```

但是，它编译没有问题（下面的编译器版本）并打印 -1

谁能告诉我最后一次通话会发生什么？

```
Cobrakai$camlc -v
The Caml Light system, version 0.80
  (standard library from /usr/local/lib/caml-light)
The Caml Light runtime system, version 0.80
The Caml Light compiler, version 0.80
The Caml Light linker, version 0.80
Cobrakai$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:48:14.527

在 ML 中，所有函数都只接受一个参数。一个看似多参数的函数实际上是一个接受一个参数的函数，并返回另一个接受剩余参数的函数。

所以`let c d e = ...`实际上是语法糖`let c = function d -> function e -> ...`

的类型`c`是`int -> int -> unit`，并且`->`是右结合的，所以它是`int -> (int -> unit)`。所以你可以清楚地看到这是一个接受`int`和返回函数的函数。

当您将它应用于多个参数`c 1 2`时，函数应用程序是左关联的，因此它实际上是`(c 1) 2`，因此您可以看到`c 1`计算结果为一个函数，然后将其应用于`2`.

所以，当你给一个函数“参数太少”时，结果就是一个函数。这是 ML 中一种有用且常见的技术，称为“**部分应用程序**”，它允许您以便捷的方式“修复”函数的前几个参数。

当您键入的表达式计算为函数时，我不确定 Caml Light 解释器如何处理它。但从你所说的来看，它似乎没有打印任何东西。

# mysql - 错误：“字段列表”中的未知列 cnt - mysql 存储了 preocedure

> ID：15459013
> 
> 赞同：1
> 
> 时间：2013-03-17T08:50:48.370
> 
> 标签：mysql, stored-procedures

我正在尝试对本[教程](http://www.mysqltutorial.org/stored-procedures-loop.aspx)中的存储过程中的 while 循环进行简单测试，但 我遇到了这个错误

```
 Unknown Column cnt  in 'field list' 
```

这是sp，有人可以帮忙吗？

```
DELIMITER $$

CREATE PROCEDURE `WhileLoopProc` ()

BEGIN

    DECLARE cnt INT DEFAULT 1;

    DECLARE str VARCHAR(255) DEFAULT '';

    WHILE cnt  <  10 DO

       SET str = CONCAT(str,cnt,',');

       set cnt = cnt + 1 ;

    END WHILE;
SELECT str;

END $$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:52:59.397

在以下行中，您的变量名后紧跟一个不间断空格字符 (U+00A0)：

```
 WHILE cnt  <  10 DO
             ^--- this is U+00A0 
```

MySQL 不识别诸如空格之类的字符，而是将其识别为变量名的一部分。

# django - Facebook like 按钮呈现缓慢 - 缓存可用？

> ID：15459019
> 
> 赞同：0
> 
> 时间：2013-03-17T08:51:14.407
> 
> 标签：django, facebook-like

我设法使用 django-like-button 应用程序在我的 twitter-bootstrap 导航栏上添加了类似 FB 的按钮。

现在我担心的是，在我的页面已经完全加载之后会呈现类似按钮。我在每个页面上使用相同的按钮（相同的 href）。

我在想是否有一个选项可以缓存按钮并让它只渲染一次。

我愿意听到其他可能更快加载它的选项。我已经在使用 Facebook 的异步 sdk。

10倍

# actionscript-3 - 在 Flash 中从另一个域加载图像

> ID：15459020
> 
> 赞同：0
> 
> 时间：2013-03-17T08:51:34.393
> 
> 标签：actionscript-3, flash, cross-domain, loader

我有一个嵌入到 iframe 中的 flash 应用程序，它托管在我的域 ( `hc.ru`) 上。但是，**swf**文件位于`cs1234.vk.me`并从那里加载。iframe 嵌入在具有`vk.com`域的页面中。在我的 flash 应用程序中，我想从 domain 加载图像`cs4321.vk.me`。当我使用本地文件在本地测试我的 Flash 应用程序时，它工作得很好。这是加载图像的代码：

```
_imgContainer = new Sprite();
var loader:Loader = new Loader();
_imgContainer.addChild(loader);
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaderComplete);
loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onError);
loader.load(new URLRequest(url));
loader.mask = mc_holder;
    private function onError(event:SecurityErrorEvent):void 
{
    trace("security error");
    trace(event.text);
}   
private function onLoaderComplete(event:Event):void
{
    trace("the image was loaded");
    this.addChild(_imgContainer);
} 
```

当我将 swf 文件上传到服务器并在浏览器中打开它时，它根本不会向我显示图像。但是，没有抛出任何类型的错误，并且跟踪输出显示“图像已加载”。所有`cs****.vk.me`包含 swf 文件和图像的服务器都具有以下`crossdomain.xml`文件：

```
<cross-domain-policy>
<site-control permitted-cross-domain-policies="master-only"/>
<allow-http-request-headers-from domain="vk.com" headers="*"/>
<allow-http-request-headers-from domain="*.vk.com" headers="*"/>
<allow-http-request-headers-from domain="userapi.com" headers="*"/>
<allow-http-request-headers-from domain="*.userapi.com" headers="*"/>
<allow-http-request-headers-from domain="vk.me" headers="*"/>
<allow-http-request-headers-from domain="*.vk.me" headers="*"/>
<allow-http-request-headers-from domain="vkontakte.ru" headers="*"/>
<allow-http-request-headers-from domain="*.vkontakte.ru" headers="*"/>
<allow-http-request-headers-from domain="mvkontakte.com" headers="*"/>
<allow-http-request-headers-from domain="*.mvkontakte.com" headers="*"/>    
<allow-access-from domain="vk.com" to-ports="80"/>
<allow-access-from domain="*.vk.com" to-ports="80"/>
<allow-access-from domain="vk.me" to-ports="80"/>
<allow-access-from domain="*.vk.me" to-ports="80"/>
<allow-access-from domain="userapi.com" to-ports="80"/>
<allow-access-from domain="*.userapi.com" to-ports="80"/>
<allow-access-from domain="vkontakte.ru" to-ports="80"/>
<allow-access-from domain="*.vkontakte.ru" to-ports="80"/>
<allow-access-from domain="mvkontakte.com" to-ports="80"/>
<allow-access-from domain="*.mvkontakte.com" to-ports="80"/>
</cross-domain-policy> 
```

我真的不明白这个问题，因为没有任何错误。
提前致谢。

# java - 如何在java类中使用外部javascript函数

> ID：15459023
> 
> 赞同：3
> 
> 时间：2013-03-17T08:51:51.137
> 
> 标签：java, javascript

我有 javascript 文件 (jalali.js)，它有很多功能。我想在我的 java web 应用程序项目中调用其中一个函数（我的意思是 somefile.Class 文件）

我进行了一些研究，发现了这两种方法：

```
 ScriptEngineManager factory = new ScriptEngineManager();
    ScriptEngine engine = factory.getEngineByName("JavaScript");
    engine.eval("print('Hello, World')"); 
```

但我不明白如何调用我的 js 文件（jalali.js）以及我应该如何调用我的函数

我将把函数详细代码放在这里（来自 jalali.js）

```
 JalaliDate.gregorianToJalali = function(g_y, g_m, g_d)
    {
      g_y = parseInt(g_y);
      g_m = parseInt(g_m);
      g_d = parseInt(g_d);
      var gy = g_y-1600;
      var gm = g_m-1;
      var gd = g_d-1;
           ...
           ...

       return [jy, jm, jd];
    } 
```

我想在我的 java 应用程序（MyClass.class）中使用该函数

```
public class TaskListModel extends BaseModel{
    private Date gDate;
    private String jalaliDate;

    public void setGDate(Date gDate) {
        this.gDate= gDate;
        this.jalaliDate =     Here i need call the js function ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:05:50.000

好吧，如果这是 Java 1.6 的 Rhino 引擎，那么您可以`jalali.js`逐行评估代码 -`engine`在文件的运行时保持实例处于活动状态。你也可以像这样执行函数：`engine.eval("myfunction(arg1, arg2);");`

我不确定您要达到的目标

步骤1。读取`jalali.js`文件的一行

第2步。`engine.eval()`线

第三步。检查是否 EOF - 如果是，请转到第 4 步，否则转到第 1 步

第4步。`engine.eval("your_function(arg1, arg2);");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:55:50.980

一个简单的解决方案是您读取整个文件并将其附加您想要进行的函数调用并将修改后的内容传递给 eval 方法。因此传递给 eval 的最终内容将采用以下形式

```
//
script in your .js file
//
return functionInYourJs(arg1, arg2); 
```

可能一旦文件被读取，您就可以缓存它以避免重复的磁盘读取。

# imacros - 如果找到一个单词，则刷新页面 imacros

> ID：15459024
> 
> 赞同：0
> 
> 时间：2013-03-17T08:52:00.230
> 
> 标签：imacros

我希望 imacros 转到特定页面并搜索单词，然后刷新页面并循环搜索，如果找到单词，则转到下一步

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:05:46.350

为此，您可以使用 javascript 脚本。没有人会为您制作这样的脚本，但这里有一个示例。

```
var macro;

macro ="CODE:";
macro +="TAG POS=1 TYPE=DIV ATTR=TXT:sometext";

if(iimPlay(macro)>0)
{
//text is there
//do something 

}
else
{
//text is not there
} 
```

# vim - vim：用一些数学插入行号的宏

> ID：15459027
> 
> 赞同：1
> 
> 时间：2013-03-17T08:52:20.420
> 
> 标签：vim, macros

我有一个包含超过 100 000 个小文件的目录。我想将它们放入单独的文件夹中。

```
find mydir/ -type f | sort > tt.txt
vim tt.txt 
```

现在我想为每一行插入一个带有这个公式的数字：

(行号) + 50000 + ((行号/1000)*1000)

所以原始文件是这样的：

```
abainville_55130_55001.htm
abancourt_59268_59001.htm
abbenans_25340_25003.htm
abergement-de-cuisery_71290_71001.htm 
```

并且应该输出：

```
51001 - abainville_55130_55001.htm
51002 - abancourt_59268_59001.htm
51003 - abbenans_25340_25003.htm
51004 - abergement-de-cuisery_71290_71001.htm 
```

依此类推，直到第 1000 行

```
line  998 => 51000 - bannes_53340_53019.htm
line  999 => 51000 - bannieres_81500_81022.htm
line 1000 => 52000 - bannoncourt_55300_55027.htm
line 1001 => 52000 - banos_40500_40024.htm
line 1002 => 52000 - bans_39380_39037.htm 
```

之后我将应用一个宏将其转换为：

```
mv bannes_53340_53019.htm 51998/bannes_53340_53019.htm
mv bannieres_81500_81022.htm 51999/bannieres_81500_81022.htm
mv bannoncourt_55300_55027.htm 52000/bannoncourt_55300_55027.htm
mv banos_40500_40024.htm 52001/banos_40500_40024.htm
mv bans_39380_39037.htm 52002/bans_39380_39037.htm 
```

（最后一部分很简单，*不是问题*，问题是关于数学的）。

我知道有类似的东西，但我找不到应用数学的解决方案：

```
:s/^/\=(line('.')+51000)/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:30:38.330

你快到了。您可以使用以下命令：

```
:%s/^/\=line('.')+51000 . " - "/ 
```

where`%`将其应用于整个文件并`.`进行字符串连接以获得间隔连字符。

**编辑：**

为了`/`用作表达式的一部分，您可以更改分隔符（请参阅`:help E146`）。例如，以下为 1000 行生成 51000，然后为接下来的 1000 行生成 52000，依此类推：

```
:s!^!\=50000 + (line('.') / 1000) * 1000 . " - "! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:21:52.043

你不必分两步完成这项工作`"mv..."`，如果你想坚持使用 vim，你可以用 vim 生成这些命令行。

试试这一行：

```
%s#.*$#\="mv ".submatch(0)." ".(line(".")+50000+((line(".")/1000)*1000)) . "/" . submatch(0)# 
```

会产生类似的东西：（`if the first line is on line number 1`）

```
mv abainville_55130_55001.htm 50001/abainville_55130_55001.htm
mv abancourt_59268_59001.htm 50002/abancourt_59268_59001.htm
mv abbenans_25340_25003.htm 50003/abbenans_25340_25003.htm
mv abergement-de-cuisery_71290_71001.htm 50004/abergement-de-cuisery_71290_71001.htm 
```

# jquery - 使用jQuery替换双引号？

> ID：15459041
> 
> 赞同：-2
> 
> 时间：2013-03-17T08:54:39.100
> 
> 标签：jquery

我正在研究 jQuery，我需要替换双引号`"`。

这是我尝试过的：

```
var source="flower.jpg","boscket.jpg","cat.jpg"; 
```

我想变成这样

```
var newstring=flower.jpg,boscket.jpg,cat.jpg; 
```

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:04:04.603

你需要这样做：

```
var source='"flower.jpg","boscket.jpg","cat.jpg"';
var newstring = source.replace(/\"/g,'')
alert(newstring); 
```

我假设**source**是一个包含在 '' 中的有效字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:05:58.187

`var source="flower.jpg","boscket.jpg","cat.jpg";`将给出 n 错误

```
SyntaxError: missing variable name 
```

你可以这样做

```
var source='"flower.jpg","boscket.jpg","cat.jpg"';
var newstring = source.replace(/\"/g,'') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:06:06.210

遗憾的是

```
var source="flower.jpg","boscket.jpg","cat.jpg"; 
```

不是有效的 javascript，无法评估。我假设你有以下字符串：

```
var source='"flower.jpg","boscket.jpg","cat.jpg"'; 
```

要将所有双引号替换为空，请使用以下 javascript（不需要 jQuery）：

```
source.replace(/"/g, ''); 
```

有关 string.replace 方法的更多信息，请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-17T04:23:56.837

你好这里替换单双quata的例子

```
jquery replace all single or double quotes

we can pass two parameter to replace single quotes in string

//replace all single quotes
var myStr = myStr.replace(/'/g, '');

//replace all double quotes
var myStr = myStr.replace(/"/g, '');

//or abit of fun, replace single quotes with double quotes
var myStr = myStr.replace(/'/g, '"');

//or vice versa, replace double quotes with single quotes
var myStr = myStr.replace(/"/g, ''');

jquery replace all single or double quotes 
```

我可以从这里获得参考[使用 jQuery 替换双引号](http://myphpinformation.blogspot.in/2016/11/jquery-replace-all-single-or-double.html)

# jquery - jQuery中是否有等效的 eval() ？

> ID：15459044
> 
> 赞同：1
> 
> 时间：2013-03-17T08:55:36.770
> 
> 标签：jquery, eval

我正在尝试在 jQuery 中创建动态变量。我尝试使用`eval()`它似乎工作正常，但我不认为这`eval()`是一个 jQuery 函数。jQuery中是否有等价物`eval()`？在这里查看我的代码：http: [//jsfiddle.net/3CXgy/](http://jsfiddle.net/3CXgy/)

```
var test = function(pos) {
    alert(eval('COUNT_'+pos));
}

var COUNT_LEFT = 20;
var COUNT_RIGHT = 30;
test('LEFT');
test('RIGHT'); 
```

除了使用之外，还有其他方法可以做到这一点`eval()`吗？我不确定`eval()`在上面的示例中是否完全正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T08:59:44.880

很少有任何理由使用 eval

这是您的代码，假设变量是在头部定义的

```
var test = function(pos) {
    alert(window['COUNT_'+pos]);
}

var COUNT_LEFT = 20;
var COUNT_RIGHT = 30;
test('LEFT');
test('RIGHT'); 
```

为了不污染全局命名空间，请使用

```
var COUNT = {"left":20, "right":30 }
var pos = "left";
alert(COUNT[pos]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T09:02:32.170

我个人更喜欢将它存储在一个我们可以随时轻松访问、添加、修改和删除的对象中。

```
var count = {
    'left' : 20,
    'right' : 30
}

var test = function(pos){
    alert(count[pos]);
}

test('left');
test('right'); 
```

如果您觉得需要使用大写字母，请确保使用有凝聚力的模式，因此在函数中将其全部切换为小写字母。

```
var test = function(pos){
    alert(count[pos.toLowerCase()]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T08:59:17.397

要按名称访问全局变量，请使用以下表示法：

```
window['COUNT_'+pos] 
```

通常您希望将变量保存在对象中：

```
var obj = {
     COUNT_LEFT:20,
     COUNT_RIGHT:30
} 
```

然后您可以将“变量”作为`obj['COUNT_'+pos]`.

您写的问题让我们认为您并没有真正了解 jQuery 是什么。jQuery 是一个提供有用函数的库，您可以在 JavaScript 代码中使用这些函数。你不能用 jQuery 编程：你可以使用 JavaScript 函数在 JavaScript 中编程，其中一些函数被 jQuery 库所采用。

# android - 让应用程序/服务“在屏幕关闭后运行”？-安卓-

> ID：15459046
> 
> 赞同：1
> 
> 时间：2013-03-17T08:56:36.390
> 
> 标签：android

我完全是 android 编程菜鸟

我正在开发“Androrat”（这个项目不是我的，我是在网上找到的）

当屏幕关闭时连接丢失如何使进程/服务始终运行？

我用谷歌搜索了一些，发现我必须包含一个 partial_wake_timer 我想要代码以及我必须在哪里输入它？

我完全是菜鸟，请跟我来

[http://dl.dropbox.com/u/102520949/Untitled.jpg](http://dl.dropbox.com/u/102520949/Untitled.jpg)

或者也许一个善良的人可以帮助我完成团队查看器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T09:57:21.967

部分`WakeLock`是你想要的。即使屏幕关闭，它也会使 CPU 保持打开状态。

**获取：**

```
PowerManager mgr = (PowerManager)context.getSystemService(Context.POWER_SERVICE);
WakeLock wakeLock = mgr.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "MyWakeLock");
wakeLock.acquire(); 
```

**释放：**

```
wakeLock.release(); 
```

此答案取自此链接： [如何在屏幕关闭时保持我的 Android 服务运行？](https://stackoverflow.com/questions/6091270/how-can-i-keep-my-android-service-running-when-the-screen-is-turned-off)

下一次，请更深入地搜索。

# java - ShowMessageDialog 后返回上一个 ShowInputDialog

> ID：15459048
> 
> 赞同：0
> 
> 时间：2013-03-17T08:57:03.840
> 
> 标签：java, swing

将有一个显示输入对话框供用户输入数字。当用户键入字符时，它将显示一个消息对话框以指示无效输入。

用户单击 MessageDialog 框上的“确定”按钮后，如何返回上一个 showInputDialog 以便用户重新输入数字？

代码：

```
public static void addStock(Stock s[],int index)
{
    s[index] = new Stock();

    try{
        s[index].setNumber(Double.parseDouble(showInputDialog(null,"Enter number: ")));

    }catch(NumberFormatException e){
        showMessageDialog(null, "Invalid input. Enter digits only.", "Error!",ERROR_MESSAGE);
    }
} 
```

*编辑：这是一个使用对话框作为界面与用户交互的库存系统。例如，在系统中添加、删除、更新库存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:07:14.580

试试这个：

```
boolean isValSet = false;

while(!isValSet)
{ 
    try {
        String val=JOptionPane.showInputDialog(null,"Enter number: ");
        double parseDouble = Double.parseDouble(val);

        //set you parseDouble to your attribute.
        isValSet=true;
    } catch(NumberFormatException e) {
        JOptionPane.showMessageDialog(null, "Invalid input. Enter digits only.", "Error!",JOptionPane.ERROR_MESSAGE);
    }
} 
```

# phantomjs - PhantomJS：在任何其他脚本运行之前注入脚本

> ID：15459049
> 
> 赞同：24
> 
> 时间：2013-03-17T08:57:08.380
> 
> 标签：phantomjs

使用 PhantomJS，我想注入一些 JS，就好像`<script>`在任何其他`<script>`标签之前有一个额外的标签一样。这是因为页面上的脚本使用了一些 PhantomJS 没有的功能，即`Function.prototype.bind`和`window.webkitRequestAnimationFrame`。我有一个 JS 文件，其中包含两者的自定义实现，我希望 PhantomJS 在页面上运行脚本时使用它们。

困难在于，如果我在 page.open 之前执行 page.injectJs，则脚本会被注入到一个空页面中，并且不会转移到正在打开的页面中。

或者，如果我在 page.open 之后执行 page.injectJs，则为时已晚，因为 JavaScript 错误（未定义的函数）已经发生。

我找到了一种似乎可行的方法，但显然是一种 hack：

```
page.onResourceReceived = function() {
    page.injectJs('phantom-hacks.js')
}; 
```

这会多次注入它（显然，每个资源两次），但这没关系，因为我的脚本是幂等的。但是，我想知道执行此操作的正确方法：仅在运行页面上的任何脚本之前注入一次。

谢谢 ：）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-17T22:37:59.873

除了挂钩事件之外，我认为没有“正确”的方式来注入此类脚本。我花了半年时间大量使用 PhantomJs，发现在所有错误开始发生之前但在页面完成加载之后无法注入。

我会尝试通过 onInitialized、onLoadStarted、onLoadFinished。在钩子内部，我会调用 page.evaluate() ，它只会修改 DOM 以在任何你喜欢的地方拥有这个额外的东西。

我认为其中一个（钩子）应该给你你想要的正确时机。

干杯

# socket.io - socket.io 到 ws:// 的连接在页面加载时被中断

> ID：15459051
> 
> 赞同：5
> 
> 时间：2013-03-17T08:58:00.287
> 
> 标签：socket.io

我不知道为什么，但我的网站（在 nodejitsu.com 上托管）上仍然出现此错误。如果我在 localhost 上测试项目一切顺利，但如果我在浏览器中打开它，则会显示此错误..

我正在寻找这个问题，但我没有找到任何有用的东西..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-07T16:39:38.703

这可以解决问题：

```
$(window).on('beforeunload', function(){
    socket.close();
}); 
```

# bash - 在（ba）sh中的单引号字符串中转义单引号的最美观的方法是什么？

> ID：15459055
> 
> 赞同：0
> 
> 时间：2013-03-17T08:58:24.397
> 
> 标签：bash, escaping, sh, quotes

在我的 (ba)sh 脚本中，我有，例如：

```
MYVAR='Alice says: "Hello, Bob." But Bob isn't listening.' 
```

这是一个语法错误，因为 ' in`isn't`结束了单引号字符串。我知道我可以使用

```
MYVAR='Alice says: "Hello, Bob." But Bob isn'"'"'t listening.' 
```

但这太丑陋了……我能做些什么呢？sh不支持

```
MYVAR='Alice says: "Hello, Bob." But Bob isn\'t listening.' 
```

这本来是可以容忍的，切换到双引号字符串对我来说不是一个选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:04:57.953

不，您不能在 Bash（或 korn shell）中的单引号字符串中嵌入单引号。这是您选择的语言的一个特征。单引号*内没有特殊字符*，包括`\`.

这是您的一个解决方案的变体，它很丑陋：

```
 echo 'Alice says: "Hello, Bob." But Bob isn'\''t listening.' 
```

给出：

```
Alice says: "Hello, Bob." But Bob isn't listening. 
```

或者使用其他语言，例如 Perl 或 Python。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:54:17.857

至少在 bash 中支持的非 POSIX 解决方案如下：

```
MYVAR=$'Alice says: "Hello, Bob." But Bob isn\'t listening.' 
```

`$`原因逃逸处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T20:42:14.540

使用 HEREDOC 是解决此问题的好方法：

```
read MYVAR << \EOF
Alice says: "Hello, Bob." But Bob isn't listening.
EOF 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T14:17:45.027

我不确定为什么切换到`$'...'`是一个选项，但切换到双引号不是（大概是为了防止某种参数扩展）。但是您不需要双引号整个字符串：

```
MYVAR='Alice says: "Hello, Bob." But Bob '"isn't"' listening.' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T10:51:39.310

您还可以使用双引号和转义。我想，这比更改语言更简单：

```
MYVAR="Alice says: \"Hello, Bob.\" But Bob isn't listening." 
```

有关在 bash 中[转义符号](http://www.faqs.org/docs/abs/HTML/quoting.html)的更多信息。

# codeigniter - 如何将 mpdf 生成的文件保存到文件夹中？

> ID：15459056
> 
> 赞同：3
> 
> 时间：2013-03-17T08:58:38.130
> 
> 标签：codeigniter, pdf, mpdf

我在将 mPDF 生成的 pdf 保存到特定文件夹时遇到问题。pdf生成一切正常，只有我无法将其保存到本地文件夹。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-10T16:30:56.653

简短的回答是将完整路径放在您计划保存文件的位置。像这样...

```
$mpdf->WriteHTML($html);
$mpdf->Output('/etc/home/JohnWayne/example/pdf/','F'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:42:03.383

您可以为此使用写入文件助手

```
$this->load->helper('file');
write_file('my_pdf_file.pdf',$generated_pdf); 
```

[文件助手](http://ellislab.com/codeigniter/user-guide/helpers/file_helper.html)

为此，请遵循以下简单步骤。遵循 BASEPATH 而不是 APPPATH

```
$path   =   BASEPATH . 'file/invoice';

if(is_dir($path)){
    $this->mpdf->Output(realpath($path).'arif.pdf','F'); 
}else{
    echo 'error';
} 
```

## 编辑：

这是您可能喜欢的替代解决方案转到 application/config/constants.php 并在那里添加常量

```
define('FILE_PATH' , $_SERVER['DOCUMENT_ROOT']."my_project/file/"); 
```

然后像这样使用它。

```
$this->mpdf->Output(FILE_PATH ."invoice/arif.pdf",'F'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:00:09.147

我找到了解决方案。这很简单。至于 mPDF 库，它不解析 base_url()。相反，我们必须使用 $_SERVER['DOCUMENT_ROOT']; 就我而言，我已经这样做了；打开 Application/config 文件夹中的 config.php 并插入以下内容；

```
$config['file_path']=$_SERVER['DOCUMENT_ROOT']."my_project/file/"; 
```

现在调用配置很容易；这是我在控制器中所做的；

```
$this->mpdf->Output($this->config->item('file_path')."invoice/arif.pdf",'F'); 
```

问题已经解决了。如果我的代码有任何技术或逻辑问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T08:30:16.083

在您的根目录中创建一个文件夹

```
$mpdf->WriteHTML($html);
$mpdf->Output(FCPATH.'PDF/Broker.pdf','F');
echo $Ledger_Group_Report = base_url().'PDF/Broker.pdf'; 
```

# ios - 块 + ARC，堆栈和堆

> ID：15459069
> 
> 赞同：0
> 
> 时间：2013-03-17T09:00:16.040
> 
> 标签：ios, automatic-ref-counting, block

我想将一个块与某个标识符相关联，并将其存储在字典中以供以后检索。

我做错了吗？基本上我担心我可能会传入一个通过 setAction:forProduct 在堆栈上声明的块，然后引用将失效。ARC 是否足够聪明，能够捕捉到这一点？

```
typedef void (^ProductPurchased)();

-(void) setAction:(ProductPurchased)action forProduct:(NSString*)identifier;

@property (strong, nonatomic) NSMutableDictionary *actions;

-(void) setAction:(ProductPurchased) action forProduct:(NSString*)identifier
{
    [self.actions setObject:action forKey:identifier];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:40:17.090

[请参阅此](https://stackoverflow.com/questions/6364648/keep-blocks-inside-a-dictionary)问题的答案。您需要在将其添加到字典之前使用 Block_copy() 并在删除它之后使用 Block_release() 。

# jquery - 使用 html2canvas 进行阿拉伯语编码

> ID：15459072
> 
> 赞同：9
> 
> 时间：2013-03-17T09:00:28.747
> 
> 标签：jquery, encoding, html2canvas

我正在使用`html2canvas`div 的图像，内容来自同一页面，同一域，但它显示阿拉伯字母断开连接，似乎 html2canvas 不支持阿拉伯语。

当我在其网页上阅读有关它的可用详细信息时，我没有找到任何有用的信息。

这是我使用的简单代码：

```
$("#import").click(function(){
    // send the contents of the email :)
    html2canvas(document.body, {
        onrendered: function(canvas) {
            document.body.appendChild(canvas);
        },
        letterRendering:true
    });
}); 
```

![html2canvas 如何呈现 div](../Images/17c69b2d74beaabfeef6826575acfa32.png)

任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-22T23:43:24.437

我想尝试一些代码操作，但效果非常好。答案是替换：

```
textList = (!options.letterRendering && /^(left|right|justify|auto)$/.test(textAlign) && noLetterSpacing(getCSS(el, "letterSpacing"))) 
```

和：

```
textList = (!options.letterRendering || /^(left|right|justify|auto)$/.test(textAlign) || noLetterSpacing(getCSS(el, "letterSpacing"))) 
```

注意 (&&) 符号被 (||) 替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-09T11:22:42.637

我最终找到了答案，需要三个步骤：

1.  您需要确保您的 html2convas js 文件支持从右到左的语言，如波斯语、阿拉伯语或希伯来语，是的，您无法相信有两个不同的文件，可能一个较旧，另一个已更新，例如如果您使用[https://files.codepedia.info/files/uploads/iScripts/html2canvas.js](https://files.codepedia.info/files/uploads/iScripts/html2canvas.js)它对于从右到左的语言将无法正常工作，而[https://github.com/niklasvh/html2canvas/releases/download/ 0.4.1/html2canvas.js](https://github.com/niklasvh/html2canvas/releases/download/0.4.1/html2canvas.js)完美运行。

2.  现在您已经选择了 的真实版本`html2canvas.js`，您需要将其`text-align: right;`用于您的元素。（注意：并非所有元素都需要它，您可能只需要为元素的父级设置它）。

3.  您可能需要`<meta http-equiv="content-type" content="text/html; charset=UTF8">`在 html 文件的开头添加。

现在一切都会像魅力一样工作！感谢让我得到最完整答案的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T09:34:35.737

请确保你做了正确的“文本对齐：正确；” 在每个阿拉伯元素中

```
text-align: right; 
```

[http://jsfiddle.net/8ypxW/2022/](http://jsfiddle.net/8ypxW/2022/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T10:41:25.783

您使用的是 UTF-8 编码吗？如果你没有`<meta http-equiv="content-type" content="text/html; charset=UTF8">`在你的脑海中，它肯定不会工作:) 希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-20T15:55:51.070

它是`html2canvas`. 可以通过设置内容 CSS 来解决此问题：

```
text-align: left; //or right or justify 
```

在此处阅读更多信息：[https ://github.com/niklasvh/html2canvas/issues/226#issuecomment-20232693](https://github.com/niklasvh/html2canvas/issues/226#issuecomment-20232693)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-11T09:01:22.113

在 html2canvas.js 中找到这一行并像这样添加中心：

```
(!options.letterRendering && /^(left|right|justify|auto|center)$/.test(textAlign) && noLetterSpacing(getCSS(el, "letterSpacing"))) ? textNode.nodeValue.split(/(\b| )/) : textNode.nodeValue.split(""); 
```

然后在每个有问题的框中设置 text-align:right/left/canter/justify。它对我很有效。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-08-28T16:43:14.090

我有同样的问题，我找到[了这个解决方案](https://bleepcoder.com/html2canvas/15333455/unicode-font-problem)并且对我很有用。

> 我解决了这个问题，使用 css 'word-wrap: normal;'

喜欢 ，`<div style="word-wrap: normal;">حروفك العربية يجب ان تكون هنا</div>`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-11-14T13:45:27.097

使用版本**1.0.0-alpha.12**，建议的解决方案都没有帮助处理希伯来语文本。我需要一个快速的解决方案，所以作为最后的（也是肮脏的）手段，我在第 3289 行更改了 fillText 行为

**从：**

```
var letterRendering = parent.style.letterSpacing !== 0; 
```

**至：**

```
var letterRendering = true; 
```

正如[@Kaiido 所](https://stackoverflow.com/users/3702797/kaiido)建议的那样，此解决方案将影响性能（请参阅评论）。我在这个插件中的使用仅限于一个非常小的容器，所以它是不引人注意的——但你应该考虑到这一点。

# javascript - CSS 和 Javascript 不适用于从 h:outputText 以 escape="false" 呈现的内容

> ID：15459075
> 
> 赞同：0
> 
> 时间：2013-03-17T09:00:44.003
> 
> 标签：javascript, css, jsf, google-cloud-datastore

从 h:outText 呈现的带有 escape="false" 的内容未绑定到适用于该页面的 css 或 javascript。实际上，我正在尝试使用语法荧光笔在帖子中突出显示我的语法。该帖子存储在数据库中，并通过将转义属性设置为 false 将其显示在带有 h:outputText 标记的 JSF 页面中。它按预期呈现页面，并处理所有 html 标记，但不应用适用于该帖子中代码块的 css 或 javascript。下面是我的 jsf 页面，它从数据库中检索 html 并通过 h:outputText 标记显示它。检索到的内容具有需要突出显示的语法。

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        template="/templates/ui.xhtml">

 <ui:define name="head">
    <title>tekBytes-#{tutorialController.tut.title}</title>

<h:outputScript library="primefaces" name="jquery/jquery.js" />
<link href="/rainbow/themes/pastie.css" rel="stylesheet" type="text/css" />
<script src="/rainbow/rainbow.min.js"></script>
<script src="/rainbow/language/generic.js"></script>
<script src="/rainbow/language/java.js"></script>
<script src="/rainbow/language/css.js"></script>
  <script type = "text/javascript">
/*
 * do some jQuery magic on load
 */
$(document).ready(function() {
    function showHiddenParagraphs() {
        $("pre.hidden").fadeIn(500);
    }
    setTimeout(showHiddenParagraphs, 1000);
});

</script>
  </ui:define>
  <ui:define name="content">
  <div style="margin:20px">
  <h1>#{tutorialController.tut.title}</h1>
  <br/>
  <h:outputText value="#{tutorialController.tut.contentStr}" escape="false"/>
  </div>
  </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:20:42.720

> 在 JSF 2.0 中，您的所有 Web 资源文件（如 css、图像或 JavaScript）都应放在 Web 应用程序根目录下的“resources”文件夹中（与“WEB-INF”文件夹级别相同）。

将您的 js / css 放入`resources/js`and`resources/css`文件夹并使用 and 访问`<h:outputStylesheet`它们`<h:outputScript`

像这样

```
<h:outputScript name="js/rainbow.min.js" /> 
```

和

```
<h:outputStylesheet name="css/language/css.js" /> 
```

等等...

* * *

另请阅读：[JSF 2.0 中的资源（库）](http://www.mkyong.com/jsf2/resources-library-in-jsf-2-0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:49:25.000

我解决了。实际问题是存储在数据库中的 html 是通过 p:editor 生成的，它在每一行周围放置了很多 div 标签，所以当它通过 h:outputText 标签呈现时，css 或 javascript 无法解析代码块由于被包围的 div 和其他标签，它们适用于语法突出显示。所以我已经删除了所有这些不必要的标签，然后再将它们存储到数据库中。感谢大家的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:52:09.027

潜在问题可能出在此处，请按顺序验证以下内容。

```
 1) Check your CSS files are getting loaded by the browser 
by monitoring the request in developer tools on Firefox or chrome.

   https://developers.google.com/chrome-developer-tools/docs/overview?hl=fr

    2) check the source of your html to see if that looks 
fine and tags are not encoded etc. 

    3) verify your CSS to see it works and it doesn't have missing semicolon,
 brackets,quotes etc by adding it to a test html page on your machine. 
```

# iphone - Objective-C 在 iPhone 上播放声音

> ID：15459076
> 
> 赞同：-2
> 
> 时间：2013-03-17T09:00:52.350
> 
> 标签：iphone, ios, objective-c, xcode

我需要这段代码的帮助，

当在 iPhone 应用程序上按下按钮时，我尝试播放声音，但出现此错误。这是代码

```
 -(IBAction)playSound:(id)sender{
  //  NSLog(@"play Sound");
    SystemSoundID soundID;
    NSString *buttonName = [sender currentTitle];
    NSString *soundFile = [[NSBundle mainBundle]
                           pathForResource:buttonName ofType:@"wav"];
    AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath:soundFile], &soundID);
    AudioServicesPlaySystemSound(soundID);
    [soundFile release]; 
```

错误消息说

> *释放不可用：在自动引用计数模式下不可用*
> 
> *ARC 禁止显式消息“发布”*
> 
> *将 Objective-C 指针类型“id”转换为 C 指针类型“CFURLRef”（又名“const struct __CFURL *”）需要桥接转换*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:11:15.357

此错误表明您必须使用**ARC**，因此您不需要释放任何对象，因为它会自动计算其引用。

在您的情况下，评论或删除每个

```
[OBJ release]; 
```

具体来说，您需要删除`[soundfile release];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:23:40.003

当您在项目中使用 ARC（自动引用计数）时，您不需要释放任何对象，因为编译器会为您处理。

因此你不需要`[soundFile release];`

查看此[苹果文档](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)以获取有关 ARC 的更多信息

# eclipse - 安装应用程序引擎 sdk 时出错

> ID：15459079
> 
> 赞同：0
> 
> 时间：2013-03-17T09:01:26.240
> 
> 标签：eclipse, google-app-engine, sdk

当我尝试在 Eclipse 中安装 AppEngine SDK 时，出现此错误，下载和安装软件包运行了一段时间，然后出现此错误。

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Unable to read repository at http://dl.google.com/eclipse/appengine/plugins/com.google.appengine.eclipse.sdkbundle_1.7.5.jar.
Read timed out 
```

我在 windows 和 ubuntu 上试过，两次遇到同样的问题。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:09:16.010

在您的 Eclipse 中安装 appengine sdk 时，请尝试[通过 Google 关注此链接。](https://developers.google.com/appengine/docs/java/tools/eclipse)如果您只需要 appengine sdk，请检查它并检查 Google Plugin for Eclipse。

# java - actionPerformed 方法调用 Java

> ID：15459081
> 
> 赞同：-1
> 
> 时间：2013-03-17T09:02:01.160
> 
> 标签：java, interface, nullpointerexception, awt

我构建了一个接口，当我调用 actionPerformed 方法时，它给了我错误。

**我的方法：**

```
public void actionPerformed(ActionEvent evento){
    Button active;
    active = (Button) evento.getSource(); //line 144
    if(active==botonSalir) 
        mainF.dispose();
    ...
} 
```

**主要方法：**

```
public static void main(String [] args){
    InterfaceE objetoM = new InterfaceE();
    objetoM.actionPerformed(); //line 195
} 
```

我得到的错误是：

```
Exception in thread "main" java.lang.NullPointerException
    at InterfaceE.actionPerformed(InterfazceE.java:144)
    at InterfaceE.main(InterfaceE.java:195) 
```

中的参数应该是什么`InterfaceE()`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-17T09:10:13.503

您必须在`Interfaz`未分配 Interfaz 对象时调用方法，或者它必须在`actionPerformed()`方法内为 null。`objectM`不是`null`可以确定的，因为我可以看到代码。但是您还没有粘贴`actionPerformed()`方法的代码。让我们看看方法中的代码，`actionPerformed()`以便我们可以给你确切的答案。

**有问题的编辑后**更新。****

 **你没有得到`compile time`错误，因为你没有调用无参数`acionPerformed`方法吗？`actionPerformed`必须采用实现方法的类`anonymous` 对象。您没有在方法中发送匿名对象作为参数。您的代码在第 1 行吗？195的样子，`ActionEvent``getSource()``ActionEvent``actionPerformed`

```
objetoM.actionPerformed(new ActionEvent(){ //this is your line 195 for anonymous object.
     public ReturnType getSource(){
           // some code
     }
}
); 
```**

# c++ - 使用 c++ 和 directx 创建地形

> ID：15459089
> 
> 赞同：0
> 
> 时间：2013-03-17T09:03:28.680
> 
> 标签：c++, directx

[http://www.riemers.net/eng/Tutorials/DirectX/C++/Series1/tut10.php](http://www.riemers.net/eng/Tutorials/DirectX/C++/Series1/tut10.php)

***在链接中给出的地形创建教程中，我无法理解代码，基本上这段代码中发生了什么***

```
short s_Indices[(WIDTH-1)*(HEIGHT-1)*3];

for (int x=0;x< WIDTH-1;x++){
    for (int y=0; y< HEIGHT-1;y++)    {
        s_Indices[(x+y*(WIDTH-1))*3+2] = x+y*WIDTH;
        s_Indices[(x+y*(WIDTH-1))*3+1] = (x+1)+y*WIDTH;
        s_Indices[(x+y*(WIDTH-1))*3] = (x+1)+(y+1)*WIDTH;
    }
} 
```

* * *

```
short s_Indices[(WIDTH-1)*(HEIGHT-1)*6];

for (int x=0;x< WIDTH-1;x++){
    for (int y=0; y< HEIGHT-1;y++)    {
        s_Indices[(x+y*(WIDTH-1))*6+2] = x+y*WIDTH;
        s_Indices[(x+y*(WIDTH-1))*6+1] = (x+1)+y*WIDTH;
        s_Indices[(x+y*(WIDTH-1))*6] = (x+1)+(y+1)*WIDTH;

        s_Indices[(x+y*(WIDTH-1))*6+3] = (x+1)+(y+1)*WIDTH;
        s_Indices[(x+y*(WIDTH-1))*6+4] = x+y*WIDTH;
        s_Indices[(x+y*(WIDTH-1))*6+5] = x+(y+1)*WIDTH;
    }
} 
```

***什么是 (x+y*** **(WIDTH-1))*3+2] 以及为什么它等于 x+y*WIDTH；这是创建 z 为 0* 的 4*3 地形的代码**

任何人都可以向我简要解释一下这段代码吗，在此先感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:21:58.817

它设置了一个索引数组，枚举用于绘制几何图形的顶点。每组 3 个索引代表一个三角形（正如您在链接到的页面上看到的那样，有一个带有一组三角形的图形说明了这一点）。

所以例如

```
s_Indices[(x+y*(WIDTH-1))*3+2] = x+y*WIDTH; 
```

是这样一个三角形的左下角。

和

```
s_Indices[(x+y*(WIDTH-1))*3] = (x+1)+(y+1)*WIDTH; 
```

是右上角。

```
 x+1,y+1
          /|
         / |
    x,y /__| x+1,y 
```

# python - 如何使用 OpenCV 和 Python 的蒙版（或透明度）在图像中查找模板？

> ID：15459090
> 
> 赞同：29
> 
> 时间：2013-03-17T09:03:50.863
> 
> 标签：python, opencv, image-processing

假设我们正在寻找这个模板：

[![停止](../Images/8b028d886489fac71a8e789ae94230ce.png)](https://i.stack.imgur.com/PuaGa.png)

我们模板的角是透明的，所以背景会有所不同，如下所示：

[![停在月亮上](../Images/529f5c673cdc81bfe3315b1d64135902.png)](https://i.stack.imgur.com/r40iL.png)

[![停在珠穆朗玛峰上](../Images/c476a9361ac03189b063162322995883.png)](https://i.stack.imgur.com/yHtlb.png)

[![停在树叶上](../Images/14fefe539a889d016716cb24ff8fd2d3.png)](https://i.stack.imgur.com/XMnKt.png)

假设我们可以在模板中使用以下掩码：

[![停止](../Images/8b028d886489fac71a8e789ae94230ce.png)](https://i.stack.imgur.com/PuaGa.png) [![停止面具](../Images/3ed1b6bc97f33a2c37df997c33336308.png)](https://i.stack.imgur.com/Ud5Wz.png)

很容易找到它。

**我试过的：**

我已经尝试过`matchTemplate`，但它不支持蒙版（据我所知），并且在模板中使用 alpha 通道（透明度）并不能实现这一点，因为它比较 alpha 通道而不是忽略这些像素。

我还研究了“感兴趣的区域”，我认为这将是解决方案，但使用它您只能指定一个矩形区域。我什至不确定它是否适用于模板。

我确信这可以通过编写我自己的算法来实现，但我希望这可以通过。标准的 OpenCV 以避免重新发明轮子。更不用说，它很可能比我自己的更优化。

那么，我怎么能用 OpenCV + Python 做这样的事情呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-15T03:34:26.347

这可以仅使用`matchTemplate`函数来实现，但需要一些解决方法。

让我们分析默认指标（`CV_TM_SQDIFF_NORMED`）。根据[matchTemplate 文档](http://docs.opencv.org/modules/imgproc/doc/object_detection.html?highlight=matchtemplate#matchtemplate) ，默认指标如下所示

`R(x, y) = sum (I(x+x', y+y') - T(x', y'))^2`

哪里`I`是图像矩阵，`T`是模板，`R`是结果矩阵。求和是在模板坐标上完成`x'`的`y'`，

`W`因此，让我们通过插入与 具有相同维度的 权重矩阵来更改此指标`T`。

`Q(x, y) = sum W(x', y')*(I(x+x', y+y') - T(x', y'))^2`

在这种情况下，通过设置`W(x', y') = 0`实际上可以忽略像素。那么，如何制定这样的指标呢？用简单的数学：

```
Q(x, y) = sum W(x', y')*(I(x+x', y+y') - T(x', y'))^2
        = sum W(x', y')*(I(x+x', y+y')^2 - 2*I(x+x', y+y')*T(x', y') + T(x', y')^2)
        = sum {W(x', y')*I(x+x', y+y')^2} - sum{W(x', y')*2*I(x+x', y+y')*T(x', y')} + sum{W(x', y')*T(x', y')^2)} 
```

因此，我们将`Q`指标划分为树单独的总和。所有这些总和都可以用`matchTemplate`函数计算（使用`CV_TM_CCORR`方法）。即

```
sum {W(x', y')*I(x+x', y+y')^2} = matchTemplate(I^2, W, method=2)
sum{W(x', y')*2*I(x+x', y+y')*T(x', y')} = matchTemplate(I, 2*W*T, method=2)
sum{W(x', y')*T(x', y')^2)} = matchTemplate(T^2, W, method=2) = sum(W*T^2) 
```

最后一个元素是一个常数，因此，对于最小化它没有任何影响。另一方面，看看我们的模板是否完美匹配（如果 Q 接近于零）仍然可能对我有用。尽管如此，对于最后一个元素，我们实际上不需要`matchTemplate`函数，因为它可以直接计算。

最终的伪代码如下所示：

```
result = matchTemplate(I^2, W, method=2) - matchTemplate(I, 2*W*T, method=2) + as.scalar(sum(W*T^2)) 
```

它真的完全按照定义做吗？数学上是的。实际上，存在一些小的舍入误差，因为`matchTemplate`函数适用于 32 位浮点，但我相信这不是一个大问题。

请注意，您可以扩展分析并为`matchTemplate`.

这实际上对我有用。对不起，我没有给出实际的代码。我在 R 中工作，所以我没有 Python 中的代码。但想法很简单。

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T01:41:20.383

有一次我需要这个对我有用的是用白噪声填充“面具”区域。然后在查找匹配项时，它会有效地从相关性中消失。否则，正如我假设你所做的那样，我得到了蒙面区域的错误匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T14:45:54.067

您的问题的一个答案是[卷积](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/filter_2d/filter_2d.html)。使用模板作为内核并过滤图像。

目标 Mat 将在您的模板所在的位置具有密集的明亮区域。您必须对结果进行聚类（例如均值偏移）。

这样，您将获得广义霍夫变换或基于[模板的卷积匹配](http://en.wikipedia.org/wiki/Template_matching#Template-based_matching_and_convolution)的非常简单的实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-29T21:42:24.620

Imagemagick 7.0.3.9 现在具有屏蔽比较功能，以便您可以限制模板匹配区域。见[http://www.imagemagick.org/discourse-server/viewtopic.php?f=4&t=31053](http://www.imagemagick.org/discourse-server/viewtopic.php?f=4&t=31053)

另外，我看到 OpenCV 3.0 现在有屏蔽模板匹配。见[http://docs.opencv.org/3.0.0/df/dfb/group__imgproc__object.html#ga586ebfb0a7fb604b35a23d85391329be](http://docs.opencv.org/3.0.0/df/dfb/group__imgproc__object.html#ga586ebfb0a7fb604b35a23d85391329be)

但是，它仅适用于方法 == CV_TM_SQDIFF 和方法 == CV_TM_CCORR_NORMED。请参阅[python opencv matchTemplate 是否实现了掩码功能？](https://stackoverflow.com/questions/35658323/python-opencv-matchtemplate-is-mask-feature-implemented)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T15:45:24.983

[ImageMagick 具有在其他图像中查找子图像的逻辑，](http://www.multipole.org/discourse-server/viewtopic.php?f=1&t=22057)并且效果很好。

```
compare -verbose -dissimilarity-threshold 0.1 -subimage-search subimage bigimage 
```

我用它来查找和模糊某些产品的水印。不要问。

（有时你必须做你必须做的事情..）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-30T19:54:13.227

**2021 年更新：**我整天都在努力寻找模板透明度的解决方案，我想我终于找到了一种方法。[`matchTemplate()`](https://docs.opencv.org/master/df/dfb/group__imgproc__object.html#ga586ebfb0a7fb604b35a23d85391329be)有一个`mask`参数，显然它的工作方式与 OP 想要的完全一样：在另一个图像中搜索模板时忽略模板中的某些像素。由于我的模板已经包含透明度，我决定将我的模板用作参数`template`和`mask`参数。令人惊讶的是，它奏效了。

我正在将 JavaScript 与 opencv4nodejs 一起使用，因此以下 python 代码片段可能完全不适用，但理论是存在的，我相当肯定它*应该可以*工作。

```
# Import OpenCV
import cv2 as cv

# Read both the image and the template
image = cv.imread("image.png", cv.IMREAD_COLOR)
template = cv.imread("template.png", cv.IMREAD_COLOR)

# Match with template as both template and mask parameter
result = cv.matchTemplate(image, template, cv.TM_CCORR_NORMED, None, template) 
```

[如果您有兴趣，这里有一个带有 opencv4nodejs 的 JavaScript 要点。](https://gist.github.com/Zebiano/172c952e6d7fa563a33dcaaac106a01e)

现在我想起来，这似乎真的很愚蠢，而且好得令人难以置信，但我`0.98+`在大多数测试中都得到了很好的匹配 ( )。希望这可以帮助！

# windows-8 - Windows 8 中的应用栏控件

> ID：15459091
> 
> 赞同：0
> 
> 时间：2013-03-17T09:03:59.250
> 
> 标签：windows-8

我正在做一个 Windows 8 应用程序项目，我想为我的应用程序放置一个应用程序栏，我想在我的应用程序栏中放置放大和缩小等按钮如何为这些按钮编码？

# wpf - 自定义对象作为 DependencyProperty

> ID：15459092
> 
> 赞同：4
> 
> 时间：2013-03-17T09:03:59.700
> 
> 标签：wpf, user-controls, inotifypropertychanged

我有一个自定义类 MyPerson。所有（相关）属性都实现 INotifyPropertyChanged。我创建了一个 UserControl 来显示它，一切正常。绑定到 MyPerson.FirstName（字符串）之类的属性都可以正常工作 - 它们按预期显示和更新（双向绑定）。

现在我想在代码隐藏中做更复杂的事情，所以我想创建一个 PropertyType 为 MyPerson 的 DependencyProperty，但我不确定如何构造 DependencyProperty，尤其是 PropertyChangedCallback 部分。

这可以做到吗？怎么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:07:43.720

阅读本文 -[自定义依赖属性](https://docs.microsoft.com/en-us/windows/uwp/xaml-platform/custom-dependency-properties)

就像是 -

```
public static readonly DependencyProperty MyPersonValueProperty = 
      DependencyProperty.Register( "MyPersonValue", typeof(MyPerson), 
         typeof(MyPersonControl), new FrameworkPropertyMetadata(null, 
             FrameworkPropertyMetadataOptions.AffectsRender,
               new PropertyChangedCallback(OnPersonChanged) ) ); 

public MyPerson ThePerson
{ 
    get { return (MyPerson)GetValue(MyPersonValueProperty); }
    set { SetValue(MyPersonValueProperty, value); }
}

private static void OnPersonChanged(DependencyObject d, 
                                 DependencyPropertyChangedEventArgs e)
{
    // Property change code here
} 
```

# sql - H2 数据库：now() 为纳秒

> ID：15459098
> 
> 赞同：1
> 
> 时间：2013-03-17T09:04:59.573
> 
> 标签：sql, h2

我想在当前时间的列中将存储为纳秒的日期进行比较，以仅获取不到 60 分钟的记录。

任何想法如何做到这一点？

也许它可能以某种方式使用 now() 函数。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T16:20:43.133

您可以尝试使用类似这样的[时间戳添加：-](http://h2database.com/html/functions.html#dateadd)

```
where x > timestampadd(minute, -60, now()); 
```

（这是[LearnedfromMistake](https://stackoverflow.com/users/1501794/learnedfrommistake)答案的副本，不幸的是，他删除了他的答案，因为他认为它只适用于 MySQL 而不是 H2）。

要将时间戳转换为毫秒，您可以使用

```
datediff('ms', '1970-01-01', now()) 
```

请注意，这`System.currentTimeMillis()`将为您提供自 1970 UTC 以来的毫秒数，这很可能不是本地时区，因此您可能会遇到麻烦。

# c# - 未收集垃圾的线程/ThreadPool 线程/C#/.NET

> ID：15459099
> 
> 赞同：2
> 
> 时间：2013-03-17T09:05:39.483
> 
> 标签：c#, .net

在我的 C#/.NET 3.5 程序中，我使用线程池线程 (delegate+BeginInvoke/EndInvoke) 来并行化和加速某些文件加载​​。SystemInternals 工具 ProcessExplorer 显示进程中的线程数量随着时间的推移而增加，而我希望保持不变。看起来有些线程/线程句柄无缘无故地徘徊。

有趣的是，我找不到线程如何增长的模式，并且似乎偶尔发生，每次我开始应用程序时都没有可重复的模式。我花了一些时间分析，这里有一些观察：

1) 代码如下所示：

```
ArrayList IAsyncResult_s = new ArrayList();
   AsyncProcessing thread1 = processRasterLayer;
... ArrayList filesToRender....
 foreach (string FileName in filesToRender)
    {
      string fileName2 = FileName;
      GeoImage partialImage1;
      IAsyncResult asyncResult = thread1.BeginInvoke(
                                fileName2, .....,
                                out partialImage1, ..., null, null);
      IAsyncResult_s.Add(asyncResult);
      asyncResult = null;
    }
.................
//block and render all
foreach (IAsyncResult asyncResult in IAsyncResult_s)
{
  GeoImage partialImage1;
  thread1.EndInvoke(
  out partialImage1,   , asyncResult);
  //render image.. some calls to render partial image here
  partialImage1.Dispose();
  partialImage1 = null;
}
IAsyncResult_s.Clear();
IAsyncResult_s = null;
thread1 = null; 
```

* * *

2) 进程线程数我的跟踪显示，在循环内部执行期间，`ThreadPool.GetAvailableThreads(out workerThreads, out completionPortThreads);`给出的数字如 493、1000。在循环结束时，`ThreadPool.GetAvailableThreads(out workerThreads, out completionPortThreads);`给出数字 500、1000。因此，可用线程数返回相同的进程线程数报告`SystemInternals ProcessExplorer`API `System.Diagnostics.Process.GetCurrentProcess()`.Threads.Count 是循环前的 16 个，循环后的大约 21 个。如果我再次调用这些循环，则进程中的线程数会增加，但不是每次都增加固定的数量，而是每次重复上述代码时都会增加 1-4，因此会增长为 16->21->22->26->31 ...

3）强制垃圾收集没有htelp我试图强制垃圾收集以摆脱那些额外的线程，但这并没有将它们从进程中删除。

4) 分析工具 我使用 RedGates 内存和性能分析器，但没有找到明显的原因。我看到几个额外的线程和它们的对象（ThreadContext 等）挂起，但没有看到在内存中保存这些线程的对象。我很确定这些额外的线程涉及到上面的循环工作，因为我在调用中添加了线程名称，并且它们仍然具有我给它们的名称。

5) Intelitrace Intelitrace 调试也显示了额外的线程挂起。他们仍然有我给他们的名字。但有趣的是，它还表明，现在挂起的同一个线程过去曾被上述循环使用，而且同一个线程正在从我的代码中的计时器执行一些与计时器相关的事件。

6）定位问题因此，当我禁用上述异步处理文件的循环并顺序加载文件时，我没有额外的线程，并且我的应用程序中的线程数是恒定的，大约 16 个。

7）关于 SetMaxThreads ：这是它在我的机器上的外观（XP，.NET 3.5）：

像这样的代码：

ThreadPool.GetAvailableThreads(out AvailableWorkerThreads, out AvailableCompletionPortThreads);
ThreadPool.GetMaxThreads(out MaxWorkerThreads, out MaxCompletionPortThreads);
ThreadPool.GetMinThreads(out MinWorkerThreads, out MinCompletionPortThreads);

给出结果：

MinWorkerThreads:2 MaxWorkerThreads:500 MinCompletionPortThreads:2 MaxCompletionPortThreads:1000 AvailableWorkerThreads:500 AvailableCompletionPortThreads:1000

我的应用可能同时使用 8 个工作线程。我认为 SetMaxThreads 没有问题。

8）在功能上，到目前为止，我对上述解决方案没有任何问题。但不知何故，如果工具报告我的应用程序中的线程数量正在增长，它看起来像是某种“资源泄漏”，我想解决它。看起来有些线程句柄无缘无故地挂着。

9) 这是一篇有趣的文章。一旦调用 EndInvoke，线程资源就会被清除。我在我的代码中这样做。文章时髦：..”。因为 EndInvoke 在生成线程之后进行清理，所以您必须确保为每个 BeginInvoke 调用 EndInvoke。” “如果线程池线程已经退出，EndInvoke 会执行以下操作：清理退出线程的松散端并释放其资源。” 请参阅：[http ://en.csharp-online.net/Asynchronous_Programming%E2%80%94BeginInvoke_EndInvoke](http://en.csharp-online.net/Asynchronous_Programming%E2%80%94BeginInvoke_EndInvoke)

10）另一篇有趣的文章。作者说他有线程句柄泄漏，因为他是从非​​ gui 线程创建控件。这是一篇相当详尽的文章，请参阅： http: [//msmvps.com/blogs/senthil/archive/2008/05/29/the-case-of-the-leaking-thread-handles.aspx](http://msmvps.com/blogs/senthil/archive/2008/05/29/the-case-of-the-leaking-thread-handles.aspx)

11）另一篇有趣的文章。它谈论 ThreadPool.SetMinThreads 属性。似乎不是 ThreadPool.SetMaxThreads 而是 ThreadPool.SetMinThreads 可以对 ThradPool 进行有用的控制。这篇文章让我大开眼界，让我思考了 ThreadPool 是如何工作的以及它可能导致的性能问题。文章是：http_://www.dotnetperls.com/threadpool-setminthreads。另一个类似的是：http_://www.codeproject.com/Articles/3813/NET-s-ThreadPool-Class-Behind-The-Scenes

12）另一篇有趣的文章。它正在谈论 ThreadPool 的节流问题。文章提到 ThreadPool 限制每秒增加 2 个新线程。参见 http_://social。msdn。微软。com/forums/en-US/clr/thread/3325cb32-371b-4f3e-965f-6ca88538dc3e/

13) 所以，在大约 30 次测试中，我只看到分配的线程数量会减少 2 倍。但是，它确实发生了。我曾经看到线程数变成 16->....->31->61->->30->16。所以，它又回到了 16。它不经常发生，也不是等待时间，它就像正在进行的大活动，然后是一段持续的低水平活动。

14) ThreadPool.SetMinThreads 方法文档。它谈到了线程池每秒 2 个新线程的限制。目前尚不清楚设置此属性是否会消除该限制。http_://msdn.microsoft。com/en-ca/图书馆/系统。threading.threadpool.setminthreads(v=vs.90).aspx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:36:37.530

所以答案是：这里没有泄漏。这就是线程池的工作方式。它保留已完成工作的线程，因此您不必在下次需要线程时支付创建线程的代价。如果您有许多并发工作项，则池中的线程数会增加，但它们会在 MaxWorkerThreads 处达到最大值。（它与垃圾收集器无关。）

有关详细信息，请参阅本文：http: [//msdn.microsoft.com/en-us/library/0ka9477y.aspx](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:32:30.780

我会考虑消费者生产者模式。线程池背后的想法是回收线程，而不是创建数百个新线程。在最好的情况下，每个 cpu 都有一个线程，并将工作排队。这肯定会更快，因为您避免了无用的上下文切换并等待创建新线程，据我所知，净线程池等待大约一秒钟直到创建新线程，以便让其他线程有机会被回收。

# ruby-on-rails - 我将如何在 Ruby 中生成一个随机且唯一的字符串？

> ID：15459104
> 
> 赞同：13
> 
> 时间：2013-03-17T09:05:59.887
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我正在开发的 Ruby on Rails 应用程序中，我允许用户上传文件并希望为这些文件提供一个简短的随机字母数字名称。（例如“g7jf8”或“3bp76”）。做这个的最好方式是什么？

我想从原始文件名和时间戳生成哈希/加密字符串。然后查询数据库以仔细检查它不存在。如果是这样，请生成另一个并重复。

我用这种方法看到的问题是，如果重复字符串的概率很高，它可能会增加相当多的数据库负载。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T13:40:05.300

我用这个:)

```
def generate_token(column, length = 64)
  begin
    self[column] = SecureRandom.urlsafe_base64 length
  end while Model.exists?(column => self[column])
end 
```

替换`Model`为您的型号名称

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-17T10:23:38.530

```
SecureRandom.uuid 
```

会给你一个全球唯一的字符串。[http://en.m.wikipedia.org/wiki/Universally_unique_identifier](http://en.m.wikipedia.org/wiki/Universally_unique_identifier)

```
SecureRandom.hex 32 
```

会给出一个随机字符串，但它的算法没有针对唯一性进行优化。当然，假设真正的随机性，与 32 位发生冲突的可能性基本上是理论上的。你可以每秒赚 10 亿美元，持续 100 年，但发生碰撞的几率只有 50%。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-17T09:11:42.767

将 Ruby 的[SecureRandom.hex](http://ruby-doc.org/stdlib-1.9.2/libdoc/securerandom/rdoc/SecureRandom.html#method-c-hex)函数与您想要生成的可选字符数一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-22T06:42:29.847

这将始终产生新的 uniq 40 大小的字母数字字符串，因为它也有时间戳。

```
loop do
  random_token = Digest::SHA1.hexdigest([Time.now, rand(111..999)].join)
  break random_token unless Model.exists?(column_name: random_token)
end 
```

注意：将模型替换为您的模型名称，将列名称替换为模型的任何现有列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T09:16:13.077

您可以通过在每次添加新文件时递增它来分配唯一 id，并使用[`OpenSSL::Cipher`](http://www.ruby-doc.org/stdlib-2.0/libdoc/openssl/rdoc/OpenSSL/Cipher.html)保存在某处的常量密钥将该 id 转换为加密字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T09:22:10.870

如果您最终生成一个十六进制或数字摘要，您可以通过将数字表示为例如 Base 62 来缩短代码：

```
# This is a lightweight base62 encoding for Ruby integers.
B62CHARS = ('0'..'9').to_a + ('a'..'z').to_a + ('A'..'Z').to_a

def base62_string nbr
  b62 = ''
  while nbr > 0
    b62 << B62CHARS[nbr % 62]
    nbr /= 62
  end
  b62.reverse
end 
```

如果限制使用的字符集对您很重要（例如，文件名中没有大写字符），那么只要您能找到一种输入合适随机数的方法，就可以轻松修改此代码。

如果您的文件名应该是半安全的，那么您需要安排比存储中的实际名称更多的可能名称。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-17T10:49:12.247

看起来您实际上需要一个唯一的文件名，对吗？为什么不忘记复杂的解决方案并简单地使用[Time#nsec](http://ruby-doc.org/core-2.0/Time.html#method-i-nsec)？

```
t = Time.now        #=> 2007-11-17 15:18:03 +0900
"%10.9f" % t.to_f   #=> "1195280283.536151409" 
```

# c# - 如何使关闭按钮作为最小化：C# Winforms

> ID：15459105
> 
> 赞同：2
> 
> 时间：2013-03-17T09:06:03.993
> 
> 标签：c#, .net, winforms

如何在我的应用程序中制作（默认）**关闭**按钮（在右上角），将其用作**Minimize**。实际上，我想在单击交叉符号时最小化应用程序，但在使用单击我的菜单选项时退出应用程序**Exit**。

我编写了这段代码来最小化单击关闭按钮时的表单：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (minimize_on_close == "Yes")
        {
            e.Cancel = true;
            this.WindowState = FormWindowState.Minimized;
        }
    } 
```

并编写此代码以退出应用程序，单击退出菜单选项。

```
private void exitToolStripMenuItem1_Click(object sender, EventArgs e)
    {
        Application.Exit();
    } 
```

但是现在，当我单击**退出**菜单选项时，表单也被最小化，而不是退出。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:12:19.597

试试这个

**编辑** 可以使用`Resize`事件来做到这一点，

```
private void Form1_Resize(object sender, EventArgs e) 
  { 
  if (this.WindowState == FormWindowState.Minimized) 
  this.Hide(); 
  } 
```

然后使用`FormClosing`事件取消关闭并最小化表单，如下所示

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e) 
{ 
if (e.CloseReason == CloseReason.UserClosing) 
 { 
  e.Cancel = true; 
  this.WindowState = FormWindowState.Minimized; 
 } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T09:09:37.167

在决定最小化窗口之前检查是否[`FormClosingEventArgs.CloseReason`](http://msdn.microsoft.com/en-AU/library/system.windows.forms.formclosingeventargs.closereason.aspx)等于。`CloseReason.UserClosing`或者，比较`CloseReason.ApplicationExitCall`。

从文档中[`CloseReason`](http://msdn.microsoft.com/en-AU/library/system.windows.forms.closereason.aspx)：

> # 成员
> 
> ...
> 
> ## 用户关闭
> 
> 用户正在通过用户界面 (UI) 关闭表单，例如通过单击表单窗口上的关闭按钮、从窗口的控制菜单中选择关闭或按 ALT+F4。
> 
> ...
> 
> ## 应用程序退出调用
> 
> 调用了 Application 类的 Exit 方法。

# jquery - 如何在 JQUERY UI 对话框中打开 URL

> ID：15459107
> 
> 赞同：7
> 
> 时间：2013-03-17T09:06:14.453
> 
> 标签：jquery, html, jquery-ui, jquery-ui-dialog

很长一段时间以来，我一直在寻找一个简单的解决方案。我希望在 JQuery UI Dialog 窗口中显示一个页面（例如[http://www.google.com ）。](http://www.google.com)计划是稍后动态添加 URL，以便我网站的所有链接都将显示在所述窗口中。

我尝试了以下操作，但是单击链接时对话框窗口为空。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Test</title>

<meta charset="utf-8" />
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
  <script>
$(document).ready(function() {
    $('#openwindow').each(function() {
        var $link = $(this);
        var $dialog = $('<div></div>')
            .load($link.attr('href'))
            .dialog({
                autoOpen: false,
                title: $link.attr('title'),
                width: 500,
                height: 300
            });

        $link.click(function() {
            $dialog.dialog('open');

            return false;
        });
    });
});
  </script>

</head>
<body>
<a id="openwindow" href="http://www.google.com">Click me to test.</a>
</body>
</html> 
```

我找到了一些例子，但没有一个真正起作用。我真的很感激一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-17T09:16:40.200

您不需要`iframe`as 已建议，但您应该在[此处](http://api.jqueryui.com/dialog/)阅读有关对话框的文档。

相反，您需要在`.open`属性上加载内容——

```
$( "#openwindow" ).dialog({
 open: function(event, ui) {
   $('#divInDialog').load('test.html', function() {
     alert('Load was performed.');
   });
  }
}); 
```

此外，您似乎使用`.each`了`id`-- 在`id`页面中应该是唯一的。改为使用`class`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-17T09:37:05.370

你可以试试这个

```
$(function(){
    $('a').on('click', function(e){
        e.preventDefault();
        $('<div/>', {'class':'myDlgClass', 'id':'link-'+($(this).index()+1)})
        .load($(this).attr('href')).appendTo('body').dialog();
    });
}); 
```

`dialog`上面的代码将在点击页面上的任何链接时创建一个新的，`myDlgClass`并为每个对话框添加一个类名和一个唯一的 id `link-1`，`link-2`等等，但请记住，由于相同的来源策略，只会加载页面链接而不是外部链接.

## 更新 ：

要使用外部站点链接，您可以使用`iframe`，这里是[使用 iframe 的示例](http://jsfiddle.net/NSmkC/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T09:34:18.037

[这](https://stackoverflow.com/questions/15409243/how-to-pass-url-for-dynamically-generated-anchor-tags-to-jquery-hover-function/) 可能会有所帮助..我正在做的是我将鼠标悬停在一个链接上，并且 url 在一个对话框中打开..如果动态创建多个相同的标签，您应该使用`class`而不是`id`..ohterwise 它只适用于单个`id`.

```
$('.openwindow').click(function(){
var $this=$(this);
         $.ajax({
                url: $this.attr('href');//You got the link here
                success: function(data) {
                    //show the dialog here..
                    //"data" contains the html returned by the url
                },
                error: function(jqXHR){
                    //Do something here
                }
              });
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T09:10:28.777

您可以使用 iframe：

```
 $("#iframeId").attr("src", $(this).attr("href"));
 $('#dialogId').dialog('open'); 
```

```
<div id="divId" >
    <IFRAME id="iframeId"  SRC="" width="" height = "" >
</div> 
```

# azure - Windows Azure 上的配额

> ID：15459110
> 
> 赞同：0
> 
> 时间：2013-03-17T09:06:39.293
> 
> 标签：azure

我只是有一个小问题要问。我可以设置我使用 Windows Azure 的配额吗？我确实浏览了 azure 文档，但也许它让我失望了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:13:30.020

您无法设置货币支出限额-配额取决于您的订阅类型-请参阅此答案，

[如何设置 Azure Max Spending Limit 或 Cost CAP $ 金额？](https://stackoverflow.com/questions/12787789/how-to-set-azure-max-spending-limit-or-cost-cap-amount)

# c++ - 如何从 C++ 创建 lua C++ 包装器

> ID：15459118
> 
> 赞同：2
> 
> 时间：2013-03-17T09:07:34.827
> 
> 标签：c++, lua

我有一些 lua“对象”是 C++ 对象的包装器，它们持有对 C++ 对象的本地引用并调用它。

现在我想要 C++ 中的一些函数返回那些包装器，所以我需要调用这个 lua 函数，然后在它上面设置 C++ 对象。

我遇到崩溃，我怀疑我没有正确处理 lua 堆栈。例如，如果我在退出创建包装器 + c++ 对象的函数之前询问 lua_top，我得到 5 作为结果，如果我返回 1 个对象，它不应该是 1 吗？

所以这就是我所做的，也许我做错了，也许有更好的方法来做到这一点。

c++，.h：

```
#define gLuaGet(L, var, type) \
    if (lua_istable(L, 1)) {\
        lua_getfield(L, 1, "CObj");\
        lua_replace(L, 1);\
    }\
    type& var = *(type*)lua_touserdata(L, 1);

#define gLuaCreate(L, type) new (lua_newuserdata(L, sizeof(type))) type();

class MyObject {
    public:
       MyObject();

       int somefunc();
};

int MyObjectCreate(lua_State *L);
int MyObjectCallSomefunc(lua_State *L); 
```

c++，.cpp：

```
int MyObject::somefunc() {
    std::cerr << "in c++ function" << std::endl;
    return 123;
}

int MyObjectCreate(lua_State *L) {
    gLuaCreate(L, MyObject);
    return 1;
}

int MyObjectCallSomefunc(lua_State *L) {
    gLuaGet(L, obj, MyObject);
    int r = obj.somefunc();
    lua_checkstack(L, 1);
    lua_pushnumber(L, r);
    return 1;
} 
```

lua 包装器：

```
function MyObject(donotinit)
    self = {}
    self.CObj = nil

    if (donotinit == nil) then
        self.CObj = MyObjectCreate()
    end

    self.setCObject = function(obj)
        self.CObj = obj
    end

    self.somefunc = function()
        return MyObjectCallSomeFunc(self)
    end

    return self
end 
```

现在我希望其他一些包装器返回一个在 c++ 中创建的 MyObject，所以这是从新包装器调用的 c++ 代码（为了更好地阅读，我删除了对 lua_pcall 的健全性检查）：

```
int returnLuaMyObject(lua_State *L) {
    gLuaGet(L, obj, MyOtherObject);
    MyObject *myObject = obj.getMyObject(); // get c++ part
    lua_getglobal(L, "MyObject"); // create lua part
    lua_pushnumber(L, 1); // and tell it not to initialize the self.CObj
    lua_pcall(L, 1, 1, 0);
    lua_getfield(L, -1, "setCObject"); // call the setCObject function
    lua_pushlightuserdata(L, myObject); // give c++ object as param
    lua_pcall(L, 1, 0, 0);
    // at this point lua_gettop(L); returns 5, can this be correct?
    return 1;
} 
```

好吧，如果我现在通过 lua 包装器调用这个函数几次，一切看起来都很好，但是如果我在一个 while 循环中调用它 50 次，它会在随机时间崩溃（但总是在同一 c++ 行）

我在这里做错了吗？此时 lua 堆栈顶部是否可以为 5，它只返回一个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:19:15.380

如果我没看错的话，这就是你的 Lua 堆栈在每次函数/宏调用之后的样子

```
int returnLuaMyObject(lua_State *L) {
    // arg
    gLuaGet(L, obj, MyOtherObject); // arg.CObj
    MyObject *myObject = obj.getMyObject();
    lua_getglobal(L, "MyObject"); // arg.CObj _G.MyObject
    lua_pushnumber(L, 1); // arg.CObj _G.MyObject 1
    lua_pcall(L, 1, 1, 0); // arg.CObj obj
    lua_getfield(L, -1, "setCObject"); // arg.CObj obj obj.setCObject
    lua_pushlightuserdata(L, myObject); // arg.CObj obj obj.setCObject myObject
    lua_pcall(L, 1, 0, 0); // arg.CObj obj

    // at this point lua_gettop(L); returns 2.
    // If you end this function with return 1, only obj is returned 
    // to Lua, everything else is discarded. 

    return 1;
} 
```

（对于它的价值，在编写 Lua 代码时，我虔诚地在与 Lua 堆栈混淆的每一行上都添加了这样的注释，所以我总是知道我在做什么。一旦你记住了 Lua 函数的副作用，它就会发现错误好简单）

假设从 Lua 调用 returnLuaMyObject 应该没问题。如果你在 C++ 中的循环中调用它，你的堆栈将会变得混乱，因为它在堆栈上留下了两个东西，并且你的一些函数被硬编码为在索引 1 上运行。

更好的方法是执行 Cubic 建议的操作并使用一些模板而不是宏。您还应该尽可能避免使用硬编码索引，以便您可以在您感兴趣的对象位于堆栈上的不同位置的情况下重用您的函数。例如，您`gLuaGet`应该将索引作为参数，以便您可以在任何地方使用它。（我也会去掉`obj`参数并删除宏的整个最后一行，这使得`obj`声明变量的位置不清楚。

我为自己编写了一个库（巧合地称为 LuaWrapper，位于[此处](https://bitbucket.org/alexames/luawrapper/src)），它可以让你轻松地做你想做的事。您可以使用 luaW_to 和 luaW_push 从 Lua 推送和获取指针，就像它们是数字或字符串一样。我只是把它扔在那里，因为我比 Luabind 或 toLua++ 的建议更喜欢它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:21:59.227

Lua 中的栈顶是 -1，而不是 1（或`lua_gettop(state)`）。此外，您应该为此使用模板而不是宏。或者更好的是，除非你有理由不这样做，否则你可以使用[luabind](http://www.rasterbar.com/products/luabind.html)或[tolua++](http://www.codenix.com/~tolua/)。我目前正在编写与 luabind 基本相同的东西，但使用 C++11 功能来消除对 boost 的依赖，尽管它还远未完成。

# java - 无法覆盖 SwingWorker 中的 process() 方法

> ID：15459124
> 
> 赞同：6
> 
> 时间：2013-03-17T09:09:08.660
> 
> 标签：java, multithreading, swing, swingworker, event-dispatch-thread

我有一个 SwingWorker 类，如下所示：

```
 class RemotePlayersWorker extends SwingWorker<String[][], Object> {
        PlayerCanvas parent;
        RemoteHandler remote;
        String[][] players;
        int maximumConnections;

        public RemotePlayersWorker(PlayerCanvas parentCanvas, RemoteHandler remoteHandle) {
            this.parent = parentCanvas;
            this.remote = remoteHandle;
        }

        @Override
        protected String[][] doInBackground() throws Exception {
            System.out.println("TEST 1");
            players = remote.getConnectedPlayers();
            publish(players);
            return players;
        }

        @Override
        protected void process(List<String[][]> chunks) {
            for (String[][] chunk : chunks) {
                 // no need for the c variable
                 System.out.println(chunk.toString());
              }
        }

        @Override 
        protected void done() {

        }
    } 
```

但是，在覆盖 process(List chunks) 方法时出现错误。Eclipse 告诉我这个：

```
The method process(List) of type PlayerHandler.RemotePlayersWorker must override or implement a supertype method
```

但是，据我所知，我正确地覆盖了该方法 - 无论我将列表类型设置为什么，我都会收到相同的错误。

还有其他原因我无法覆盖 process() 吗？

我正在使用 Java 版本“1.7.0_10”-Java(TM) SE 运行时环境（构建 1.7.0_10-b18）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T09:15:56.973

SwingWorker 类定义如下：

```
public class SwingWorker<T, V> {
    ...
    protected void process(List<V> chunks) {
        ...
    }
} 
```

所以，因为你的子类被声明为

```
class RemotePlayersWorker extends SwingWorker<String[][], Object> { 
```

process 方法应该以 a`List<Object>`作为参数，而不是`List<String[][]>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T09:15:51.827

您的`process()`方法中的参数不正确，应该是

```
protected void process(List<Object> chunks) {
   /// do your stuff
} 
```

它需要第 2 名。类的通用数据类型`SwingWorker`。请阅读[文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。

## 解释：

```
public class SwingWorker<T, V> {

    // methods

    protected void process(List<V> chunks) {
       // do your stuff
    }
} 
```

在这里，您可以更纯粹地看到您的情况所`process()`采用的方法。**`V`**`Object`

因此，要么将其更改为`List<Object>`或反转您对 SwingWorker 类的签名（但随后您需要更改 doInBackground() 方法的返回类型）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T09:15:42.860

您对过程方法的签名是错误的。

SwingWorker 的签名：`protected void process(List<V> chunks)`

> **V** - 此 SwingWorker 的发布和处理方法用于执行中间结果的类型

所以应该是：

```
protected  void process(List<Object> chunks) 
```

# sql-server - 在存储过程中对逗号分隔值使用内连接

> ID：15459126
> 
> 赞同：1
> 
> 时间：2013-03-17T09:09:24.167
> 
> 标签：sql-server, database, sql-server-2008, stored-procedures, inner-join

我有一个如下表`UserMaster`...（仅显示必需的列）

```
UserID UserName EmailID
---------------------------------
1000   amol     amol@gmail.com
1001   mahesh   mahesh@gmail.com
1002   saurabh  saurabh@gmail.com
1003   nitesh   nitesh@gmail.com 
```

另一个表`MessageHistory`（仅显示必填列）

```
MsgCode From  To
-----------------------------
MSG001  1000  1001,1002,1003
MSG002  1001  1000,1002,1003 
```

我正在存储`UserIds`和`From`列`To`...

我正在尝试创建一个存储过程来显示`Email History`特定消息代码

```
Create Procedure proc_GetMessageHistory
        @MsgCode varchar(50)
        as
        Begin
           Select * From MessageHistory Where MsgCode=@MsgCode 
        End 
```

结果如上`MessageHistory`表所示......但我想显示相应`UserEmailIDs`的而不是`UserID`（例如'amol@gmail.com'而不是1000）......

我怎么能在存储过程中做到这一点？在这种情况下，我如何特别使用逗号分隔值的内连接？请帮助...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:11:58.240

正如每个人已经指出的那样，这绝不应该是任何形式的永久解决方案，因为它永远不会以有效的方式执行。此外，这种非规范化结构可能存在许多问题。那就是说...

**每条消息的电子邮件地址列表，即每行一个收件人：**

```
select m.MsgCode
  , sender = s.EmailID
  , recipient = u.EmailID
from MessageHistory m
  inner join UserMaster s on m.[From] = s.UserID
  inner join UserMaster u on charindex(cast(u.UserID as varchar), m.[To]) > 0 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/610b3/1)。

**消息列表，以逗号分隔的电子邮件地址列表，每行一条消息：**

```
with emails as
(
  select m.MsgCode
    , recipient = u.EmailID
  from MessageHistory m
    inner join UserMaster u on charindex(cast(u.UserID as varchar), m.[To]) > 0
)
select m.MsgCode
  , [From] = u.EmailID
  , [To] = stuff
    (
      (
        select ',' + recipient
        from emails e
        where m.MsgCode = e.MsgCode
        for xml path('')
      )
      , 1
      , 1
      , ''
    )
from MessageHistory m
  inner join UserMaster u on m.[From] = u.UserID 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/610b3/2)。

# javascript - 我的 JavaScript 小部件中的 css 与目标页面 css 冲突

> ID：15459130
> 
> 赞同：0
> 
> 时间：2013-03-17T09:09:51.300
> 
> 标签：javascript, css

我为投票编写了一个非常基本的小部件，用户只需在代码底部添加 JavaScript 代码即可安装它，就像 Google 分析代码一样。

我现在在一些使用广泛 CSS 规则的页面上注意到的一个问题是小部件设计有点混乱。在我的小部件 CSS 中，我指定了唯一名称，所以这应该不是问题。

但是，当目标页面使用以下规则时：

```
body {
    font: 16px/26px Helvetica, Helvetica Neue, Arial;
} 
```

它会影响我的小部件的外观。

有什么想法可以解决这个问题吗？

**编辑**：我已经尝试过 cleanslate - [https://github.com/premasagar/cleanslate](https://github.com/premasagar/cleanslate) 但这也会重置目标页面上的 css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:26:15.653

为您的元素使用 Iframe 或内联 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:06:57.063

用于`!important`小部件的 css。

例子：

```
.widget {
    font: 16px Arial !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:13:03.357

将您的小部件放在 iframe 中，这样它就不会受到目标页面上的任何内容的影响。

# windows - 如何在 Windows 中将单个文本文件中的多行合并为一行？

> ID：15459131
> 
> 赞同：5
> 
> 时间：2013-03-17T09:09:56.597
> 
> 标签：windows, for-loop, batch-file, cmd

我有多个遵循这种格式的标准文本文件，每个文件中的行数不同：

```
Line1
Line2
Line3
Line4 
```

我想将每一行合并为一行，每组字符之间有一个空格，所以文本文件看起来像这样：

```
Line1 Line2 Line3 Line3 
```

...等等。由于每个文本文件包含不同数量的行，这需要使用任何给定数量的行。我的意图*不是*合并文本文件中的行；我希望每个文本文件保持独立。我在网上找到的所有解决方案要么不太适合这个，要么只适用于 UNIX。我正在运行 Windows 7。这可以在 Powershell、VBS、Batch 中完成，一个特定的程序，没关系，它只需要与 Windows 一起工作。

非常感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T09:31:20.173

```
@ECHO OFF
setlocal
(SET var=)
FOR /f "delims=" %%x IN (list.txt) DO (
CALL SET var=%%var%% %%x
)
SET var=%var:~1%
echo var=%var%= 
```

其中 list.txt 是包含您的行的文件，而 var 是您希望将行连接到其中的变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T09:43:43.290

使用批处理：

```
for /f "usebackqdelims=" %%i in ("infile.txt") do @<nul set /p"=%%i ">>"outfile.txt"
>>"outfile.txt" echo. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-17T09:29:30.180

使用 PowerShell 试一试，看看它是否是您想要的：

```
$my_file = "C:\file.txt"
$out_file = "C:\out.txt"
(Get-Content -Path $my_file) -join " " | Set-Content -Path $out_file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T09:47:05.763

安装git-scm、cygwin或者其他包含bash的，然后就可以了

```
cat *.txt | tr "\n" " " 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T11:02:40.743

为了完整起见，这是[vbscript](/questions/tagged/vbscript "显示标记为“vbscript”的问题")中的另一个解决方案：

```
Set fso = CreateObject("Scripting.FileSystemObject")

Set infile  = fso.OpenTextFile("C:\infile.txt")
Set outfile = fso.OpenTextFile("C:\outfile.txt", 2, True)

If Not infile.AtEndOfStream Then outfile.Write infile.ReadLine
Do Until infile.AtEndOfStream
  outfile.Write " " & infile.ReadLine
Loop

infile.Close
outfile.Close 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T09:31:21.290

像这样的东西？

```
(gc C:\test.txt)  -join " " 
```

# c# - 构造函数注入，正确耦合两个对序列进行操作的类

> ID：15459138
> 
> 赞同：1
> 
> 时间：2013-03-17T09:10:54.577
> 
> 标签：c#, dependency-injection

我有两个类生成实现的类型序列`IFoo`。

```
interface IBar {} // the starting type
interface IFoo {} // this can undergo various transformations

class SeqProcessor1 {
  IEnumerable<IFoo> Process(IEnumerable<IBar> input1) {
    //...
  }
} 
```

和

```
class SeqProcessor2 {
  IEnumerable<IFoo> Process(IEnumerable<IFoo> input2) {
    //...
  }
} 
```

`SeqProcessor2`将一个转换`IEnumerable<IFoo>`为另一个`IEnumerable<IFoo>`，所以在代码中你会看到：

```
var seqProc1 = new SeqProcessor1();
var seqOfFoo = seqProc1.Process(seqOfBar);

var seqProc2 = new SeqProcessor2();
var finalSeqOfFoo = seqProc2.Process(seqOfFoo); 
```

**由于应用程序中没有其他使用模式，使用构造函数注入来明确两种类型之间的关系是否是正确的设计选择？**

下面是一个简化测试*头接口*的示例（请参阅[此处](http://blog.ploeh.dk/2010/12/02/Interfacesarenotabstractions/)），摘自`SeqProcessor1`：

```
interface ISeqProcessor1 {
  IEnumerable<IFoo> Process(IEnumerable<IBar> input1);
}

class SeqProcessor2 {

  ISeqProcessor1 proc1;

  SeqProcessor2(ISeqProcessor1 proc1) {
    this.proc1 = proc1;
  }

  IEnumerable<IFoo> Process(IEnumerable<IBar> seqOfBar) {
    var input = this.proc1.Process(seqOfBar);
    //
    return input;
  }
} 
```

查看如何`SeqProcessor2::Process`更改为接受`IEnumerable<IBar>`所需的依赖项。

导致这种用法：

```
var seqProc2 = new SeqProcessor2(new SeqProcessor1());
var finalSeqOfFoo = seqProc2.Process(seqOfBar); 
```

**编辑：**

*   这里的关键是第一个处理器（需要的那个`IBar`）`IBar`将实例转换为`IFoo`实例。

*   即使两者`SeqProcessorX`具有相似的签名`SeqProcessor1`，也不能在没有强制更改的情况下*自然*链接。`SeqProcessor2`

*   可以改为链接具有相同签名`SeqProcessor2`( `IFoo`-> ) 的其他处理器。`IFoo`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:45:34.393

在阅读了您的编辑后，我会说是的，这对于您的用例来说是一个有效/合理的结构。你看我对这个表述有点小心，因为可能没有足够的信息来全面判断这件事。另一方面，可能无法在这里讨论所有可能性，这就是为什么尽管有疑问，我还是将其添加为答案。

尽管如此，我还是添加了这个（肯定的）答案，因为你说这是唯一的使用模式。因此，我们只需要考虑当前的代码 - 结构使您想要实现的意图非常清晰。从阅读中，我可以直接理解你需要一个特定的处理器——代码简短、简单且没有代码重复

长话短说：是的，我认为这是对构造函数注入的有效使用

# c# - 从数据库调用字节时出错

> ID：15459141
> 
> 赞同：1
> 
> 时间：2013-03-17T09:11:24.860
> 
> 标签：c#, .net, sql-server, ado.net

我在 SQL Server 中存储了一个图像。首先，我已将图像转换为字节，并将其保存在 SQL Server 中，并完成了非常多的保存.....当我尝试从我保存的 SQL Server 调用相应图像的字节值以及尝试实现它时在 C# 中，我收到类似的错误

> *用户代码未处理 NullReferenceException*
> 
> *你调用的对象是空的*

这是我的代码：

```
protected void GetImageButton_OnClick(object sender, EventArgs e)  
{  
    SqlConnection connection = new SqlConnection();  
    connection.ConnectionString = @"";  
    connection.Open();  
    SqlCommand command = new SqlCommand();  
    command.Connection = connection;  
    command.CommandType = CommandType.StoredProcedure;  
    command.CommandText = "uspgetimage";  
    command.Parameters.AddWithValue("@imageID", getimagebutton.Text);  
    DataSet dataset = new DataSet();  
    SqlDataAdapter adapter = new SqlDataAdapter();  
    adapter.SelectCommand = command;  
    adapter.Fill(dataset);  
    Byte[] bytes = command.ExecuteScalar() as byte[];  
    string base64String = Convert.ToBase64String(bytes, 0, bytes.Length);  
    Image.ImageUrl = "data:image/jpeg;base64," + base64String;  
} 
```

请看看它并帮助我摆脱这些朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:29:06.767

在*NullReferenceException*之前，我不相信这行*不会*引发任何异常。

```
SqlConnection connection = new SqlConnection();  
connection.ConnectionString = @"";  
connection.Open(); 
```

`SqlConnection.ConnectionString`在初始化属性之前无法打开连接。在您的情况下，您的连接字符串是一个*空字符串*。您希望此连接如何连接到您的 sql 服务器？

我的建议是，阅读一本关于 C# 的书并将其与*[Begining C# 5.0 Databases等数据库一起使用](https://rads.stackoverflow.com/amzn/click/com/1430242604)*

对于*NullReferenceException*，我已经在*[评论](https://stackoverflow.com/questions/15459141/getting-an-error-while-invoking-bytes-from-sql-server-and-implementing-in-c-shar#comment21874403_15459141)*中提到了你应该做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:29:03.147

尝试在 SQL Server 中运行存储过程，看看它是否返回任何值

```
EXEC uspgetimage 'COmma seperated Parameter List' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:40:04.633

您很可能会`NullReferenceException`从您的电话中收到`ExecuteScalar`. 从[文档中](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)：

> # 返回值
> 
> 结果集中第一行的第一列，**如果结果集为空，则为空引用**。

强调我的。

至于它的价值，`SqlConnection`, `SqlCommand`,`DataSet`和`SqlDataAdapter`都是`IDisposable`。你应该呼吁`Dispose`他们，尽管[处置的价值`DataSet`是有争议](https://stackoverflow.com/questions/913228/should-i-dispose-dataset-and-datatable)的。

# ruby-on-rails - 如何从 Rails 4 中的 ActionDispatch::ParamsParser::ParseError 中救援

> ID：15459143
> 
> 赞同：12
> 
> 时间：2013-03-17T09:11:51.010
> 
> 标签：ruby-on-rails, ruby, exception, params, rescue

Rails 4 添加了一个异常**ActionDispatch::ParamsParser::ParseError**异常，但由于它在中间件堆栈中，因此它似乎无法在正常的控制器环境中被拯救。在 json API 应用程序中，我想以标准错误格式响应。

这个[要点](https://gist.github.com/elarkin/4709748)展示了一种插入中间件来拦截和响应的策略。按照这种模式，我有：

**应用程序.rb：**

```
module Traphos
  class Application < Rails::Application
    ....
    config.middleware.insert_before ActionDispatch::ParamsParser, "JSONParseError"
 end
end 
```

**中间件是：**

```
class JSONParseError
  def initialize(app)
    @app = app
  end

  def call(env)
    begin
      @app.call(env)
    rescue ActionDispatch::ParamsParser::ParseError => e
      [422, {}, ['Parse Error']]
    end
  end
end 
```

如果我在没有中间件的情况下运行测试，我会得到（规范）：

```
Failures:

  1) Photo update attributes with non-parseable json
     Failure/Error: patch update_url, {:description => description}, "CONTENT_TYPE" => content_type, "HTTP_ACCEPT" => accepts, "HTTP_AUTHORIZATION" => @auth
     ActionDispatch::ParamsParser::ParseError:
       399: unexpected token at 'description=Test+New+Description]' 
```

这正是我所期望的（我无法救援的 ParseError）。

现在，在上面的中间件中添加的唯一更改是：

```
 2) Photo update attributes with non-parseable json
     Failure/Error: response.status.should eql(422)

       expected: 422
            got: 200 
```

并且日志显示标准控制器操作正在执行并返回正常响应（尽管因为它没有收到任何参数，所以它没有更新任何东西）。

我的问题：

1.  如何从 ParseError 中拯救并返回自定义响应。感觉就像我在正确的轨道上，但并不完全在那里。

2.  我无法弄清楚为什么在引发和救援异常时，控制器操作仍会继续进行。

非常感谢帮助，--Kip

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T12:01:22.090

事实证明，在中间件堆栈的更深处，可以使用异常应用程序配置**ActionDispatch::ShowExceptions 。**

```
module Traphos
  class Application < Rails::Application
    # For the exceptions app
    require "#{config.root}/lib/exceptions/public_exceptions"
    config.exceptions_app = Traphos::PublicExceptions.new(Rails.public_path)
  end
end 
```

很大程度上基于我现在正在使用的 Rails 提供的：

```
module Traphos
  class PublicExceptions
    attr_accessor :public_path

    def initialize(public_path)
      @public_path = public_path
    end

    def call(env)
      exception    = env["action_dispatch.exception"]
      status       = code_from_exception(env["PATH_INFO"][1..-1], exception)
      request      = ActionDispatch::Request.new(env)
      content_type = request.formats.first
      body         = {:status => { :code => status, :exception => exception.class.name, :message => exception.message }}
      render(status, content_type, body)
    end

    private

    def render(status, content_type, body)
      format = content_type && "to_#{content_type.to_sym}"
      if format && body.respond_to?(format)
        render_format(status, content_type, body.public_send(format))
      else
        render_html(status)
      end
    end

    def render_format(status, content_type, body)
      [status, {'Content-Type' => "#{content_type}; charset=#{ActionDispatch::Response.default_charset}",
                'Content-Length' => body.bytesize.to_s}, [body]]
    end

    def render_html(status)
      found = false
      path = "#{public_path}/#{status}.#{I18n.locale}.html" if I18n.locale
      path = "#{public_path}/#{status}.html" unless path && (found = File.exist?(path))

      if found || File.exist?(path)
        render_format(status, 'text/html', File.read(path))
      else
        [404, { "X-Cascade" => "pass" }, []]
      end
    end

    def code_from_exception(status, exception)
      case exception
      when ActionDispatch::ParamsParser::ParseError
        "422"
      else
        status
      end
    end
  end
end 
```

要在测试环境中使用它需要设置配置变量（否则您会在开发和测试中获得标准的异常处理）。所以为了测试我有（编辑为只有关键部分）：

```
describe Photo, :type => :api do
  context 'update' do
    it 'attributes with non-parseable json' do 

      Rails.application.config.consider_all_requests_local = false
      Rails.application.config.action_dispatch.show_exceptions = true

      patch update_url, {:description => description}
      response.status.should eql(422)
      result = JSON.parse(response.body)
      result['status']['exception'].should match(/ParseError/)

      Rails.application.config.consider_all_requests_local = true
      Rails.application.config.action_dispatch.show_exceptions = false
    end
  end
end 
```

它以公共 API 方式按我的需要执行，并且适用于我可能选择自定义的任何其他异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-10T13:52:33.347

这篇文章（同样来自 2013 年）[thoughtbot](https://thoughtbot.com/blog/catching-json-parse-errors-with-custom-middleware)也涵盖了这个主题。仅当您请求 json 时，他们才会将响应放入此中间件服务中

```
if env['HTTP_ACCEPT'] =~ /application\/json/
    error_output = "There was a problem in the JSON you submitted: #{error}"
    return [
      400, { "Content-Type" => "application/json" },
      [ { status: 400, error: error_output }.to_json ]
    ]
else
 raise error
end 
```

# c - 这些位掩码之间的区别

> ID：15459150
> 
> 赞同：0
> 
> 时间：2013-03-17T09:12:58.657
> 
> 标签：c, binary, bitwise-operators

我想知道下面的位掩码有什么区别，以及你可以使用什么场景。

```
int a  = 1;
int b  = 2;
int c  = 4;
int d  = 8;

int letters = a | b | d; 

int aviableLettersMask = //input some letter;  

if (letters & aviableLettersMask)
{

}

if ((letters & ~aviableLettersMask) == 0)
{

} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:22:01.127

区别如下：

第一次检查`aviableLettersMask`礼物中是否有任何字母`letters`

第二个 - 如果没有其他字母而存在于`aviableLettersMask`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:47:00.493

`AviableLettersMask`如果至少包含一个字母或 ，则第一个表达式为真`Letters`：

```
a|b|d & a|c = a  // ok
a|b|d & c = 0    // false
a|b|d & 0 = 0    // false 
```

第二个表达式将等于 0 如果`AviableLettersMask`包含`Letters`：

```
a|b|d & ~(a|b)     = a|b|d & c|d = d  // false
a|b|d & ~(a|b|d)   = a|b|d & c   = 0  // ok
a|b|d & ~(a|b|c|d) = a|b|d & 0   = 0  // ok 
```

# javascript - Javascript在变量中传递elementid

> ID：15459153
> 
> 赞同：0
> 
> 时间：2013-03-17T09:13:23.297
> 
> 标签：javascript

我需要将一个变量传递给一个 javascript 函数，然后该函数将执行计算并将答案返回到表单上的另一个编辑框。我需要通过，因为我有 10 行编辑框并且不想有 10 个单独的 javascript 函数。

```
function calc_totalcost(line)
{   
        $line_qty=line+"_qty";
    $line_totcost=line+"_totcost";
    $line_unitcost=line+"_unitcost";

    $totcost=$line_qty.value*$line_unitcost.value;
    document.getElementById('$line_totcost').value = $totcost;
} 
```

在html上：

```
onchange="calc_totalcost('L1')" 
```

因此，在 L1_edit1 的编辑框 1 上，我需要将 L1 发送到该函数，然后该函数将转换为“L1_qty”，这是一个编辑框（输入）名称，它将使用其内容执行计算。希望这有意义吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:18:58.053

您有一些问题，包括函数中的最后一行不需要 document.getElementById 而所有其他人都需要它。

```
function calc_totalcost(line) {   
    var $line_qty     = document.getElementById(line+"_qty");
    var $line_totcost = document.getElementById(line+"_totcost");
    var $line_unitcost= document.getElementById(line+"_unitcost");

    var $totcost=$line_qty.value*$line_unitcost.value;
    $line_totcost.value = $totcost;
} 
```

# matlab - 使用 Matlab 对人体图像进行剪影

> ID：15459155
> 
> 赞同：0
> 
> 时间：2013-03-17T09:13:39.067
> 
> 标签：matlab, image-processing

我需要使用 Matlab将**图像 A**转换为**图像 B。**我是 Matlab 的新手，没有找到很好的来源。任何人都可以在这件事上帮助我吗？

**图像 A**

![在此处输入图像描述](../Images/4d2021398d891b4d221618aa87e5cbd9.png)

**图像 B**

![在此处输入图像描述](../Images/3fa6897dcc51c9f21dfe4dbec051acb2.png)

图像 B 中的水平线可以忽略不计。我只想得到图 B 中的体型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:33:07.493

一个简单的解决方案是将源图像转换为二进制并减去这样的侵蚀副本：

```
bw = any(I, 3);
n = 5;
s = bw - bwmorph(bw, 'erode', n); 
```

改变 的值`n`将改变最终图像中轮廓的粗细。

# php - 页面内容更改之间的会话变量未设置

> ID：15459159
> 
> 赞同：0
> 
> 时间：2013-03-17T09:14:19.550
> 
> 标签：php

我正在使用 1 index.php 页面并使用导航链接发送值 $_GET 值，这些值用于从 mysql 数据库中检索页面内容，以有效地更改工作正常的页面。在其中一个导航链接上，单击时会设置一个会话变量，我想稍后使用它，但是当我单击另一个未设置会话的导航链接时，先前设置的会话已被取消设置，因此没有任何价值。我检查了每个页面上相同的 session_id 并检查了会话变量是否实际上是通过输出到屏幕来设置的，当单击新页面时它会消失。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:33:38.020

我认为（但如果我错了，有人会纠正）你应该在你的网站上开始会话，以保持会话保持在适当的位置。尝试`session_start();`在所有页面的顶部添加，看看情况是否有所改善。`$_GET`与会话无关，所以我不清楚你为什么提到它......

# protocols - 智能卡 TLP224 协议规范

> ID：15459160
> 
> 赞同：0
> 
> 时间：2013-03-17T09:14:29.770
> 
> 标签：protocols, smartcard

我正在研究智能卡设备驱动程序。

我使用的卡在协议上工作`TLP224`。

我在哪里可以找到该协议的完整规范？

我试图通过互联网查找，但只找到了一些关于特定读卡器的文档。

有没有完整的规范`TLP224`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:10:13.907

我如何阅读[GCI400 规范](http://www.datasheetarchive.com/indexer.php?file=DSARS0019012.pdf&dir=Datasheets-UD7&keywords=TLP224&database=user-highscore#)，这是主机和读卡器之间的通信协议。我从未听说过支持这一点的卡片。由于它是专利的，它可能不公开，但只有在购买许可证、签署保密协议或类似的东西之后。如果您有选择，我建议您切换到支持开放界面的阅读器。

# ios - 如何在xcode中调整iphone标签栏的大小？

> ID：15459161
> 
> 赞同：0
> 
> 时间：2013-03-17T09:14:32.437
> 
> 标签：ios, uitabbar

我正在开发一个在标签栏中有 5 个项目的 iOS 应用程序。但它们分布不均。我希望最右边的那个更大，显然它需要更多的空间。和其他 4 个选项卡项目可以均匀分布。我做了一些研究，但找不到一个好的解决方案。我在哪里可以自定义标签栏？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:33:46.770

您可以使用[UISegmentedControl](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)。它是高度可定制的，并允许修改其中每个项目的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:29:42.330

你不能用标准的 iOS 标签栏来做到这一点。您需要创建一个自定义库或使用已经这样做的众多开源库之一。

# android - 选择活动时应用程序崩溃

> ID：15459162
> 
> 赞同：1
> 
> 时间：2013-03-17T09:14:49.660
> 
> 标签：android

我知道我可以手动设置它，但我应该可以使用数组，但我一直在崩溃，我认为这是一个简单的问题，我只是找不到问题，一旦按下按钮就会发生崩溃：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.eric.theworks"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.eric.theworks.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.ST" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="Numbers"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.NUMBERS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="Settings"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.SETTINGS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="InternalStore"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.INTERNALSTORE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="Reading"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.READING" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="Menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

> `公共类菜单扩展活动实现OnClickListener {

```
String activities[] = { "ST", "SETTINGS", "INTERNALSTORE", "READING" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    int id = v.getId();
    for (int i = 0; i < activities.length; i++) {
        if (id == getResources().getIdentifier("b" + i, "id",
                "com.eric.theworks")) {
            Intent intent = new Intent("com.eric.theworks." + activities[i]);
            startActivity(intent);
        }
    }

} 
```

}`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/b0"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Passing Data" 
    android:onClick="onClick"/>

<Button
    android:id="@+id/b1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Settings"
    android:onClick="onClick" />

<Button
    android:id="@+id/b2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Internal Storage"
    android:onClick="onClick" />

<Button
    android:id="@+id/b3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Reading Data"
    android:onClick="onClick" />

</LinearLayout> 
```

好的日志猫：

```
03-17 05:36:20.542: D/libEGL(20653): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
03-17 05:36:20.550: D/libEGL(20653): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
03-17 05:36:20.558: D/libEGL(20653): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
03-17 05:36:20.652: D/OpenGLRenderer(20653): Enabling debug mode 0
03-17 05:36:23.987: D/AndroidRuntime(20653): Shutting down VM
03-17 05:36:23.987: W/dalvikvm(20653): threadid=1: thread exiting with uncaught exception (group=0x40fb4300)
03-17 05:36:23.995: E/AndroidRuntime(20653): FATAL EXCEPTION: main
03-17 05:36:23.995: E/AndroidRuntime(20653): java.lang.IllegalStateException: Could not execute method of the activity
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.view.View$1.onClick(View.java:3591)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.view.View.performClick(View.java:4084)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.view.View$PerformClick.run(View.java:16966)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.os.Handler.handleCallback(Handler.java:615)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.os.Looper.loop(Looper.java:137)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.app.ActivityThread.main(ActivityThread.java:4745)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at java.lang.reflect.Method.invokeNative(Native Method)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at java.lang.reflect.Method.invoke(Method.java:511)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at dalvik.system.NativeStart.main(Native Method)
03-17 05:36:23.995: E/AndroidRuntime(20653): Caused by: java.lang.reflect.InvocationTargetException
03-17 05:36:23.995: E/AndroidRuntime(20653):    at java.lang.reflect.Method.invokeNative(Native Method)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at java.lang.reflect.Method.invoke(Method.java:511)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.view.View$1.onClick(View.java:3586)
03-17 05:36:23.995: E/AndroidRuntime(20653):    ... 11 more
03-17 05:36:23.995: E/AndroidRuntime(20653): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.eric.theworks.ST }
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.app.Activity.startActivityForResult(Activity.java:3351)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.app.Activity.startActivityForResult(Activity.java:3312)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.app.Activity.startActivity(Activity.java:3522)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at android.app.Activity.startActivity(Activity.java:3490)
03-17 05:36:23.995: E/AndroidRuntime(20653):    at com.eric.theworks.Menu.onClick(Menu.java:28)
03-17 05:36:23.995: E/AndroidRuntime(20653):    ... 14 more
03-17 05:36:25.519: I/Process(20653): Sending signal. PID: 20653 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:22:12.253

我只能在没有看到 logcat 的情况下猜测，但您得到的异常可能是`ActivityNotFoundException`. 在您的清单中，您`Activities`对名称以 开头的操作做出响应`"android.intent.action"`，而在代码中您将启动名称以 开头的操作`"com.eric.theworks."`。我建议您将清单中描述的操作更改为`"com.eric.theworks."`变体，因为对自定义操作使用默认的 Android 命名并不是一件好事。希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:17:03.617

很可能是您活动中的代码，而不是清单或布局。检查您的 logcat 日志，并显示使您的应用程序崩溃的异常，并为您提供错误信息。

# c# - 控制台应用程序比 asp.net 应用程序慢

> ID：15459163
> 
> 赞同：0
> 
> 时间：2013-03-17T09:15:20.707
> 
> 标签：c#, asp.net, performance, task-parallel-library, parallel.foreach

我有一个爬虫机器人，它使用parallel.for 和parallel.foreach 并行下载各种页面。MaxDegreeOfParallelism 设置为 20 左右，因为增加它似乎不会进一步提高性能，我不想让任何 Web 服务器过载。

当我从 ASP.NET 网站（所有地方）开始爬网时，它以可接受的性能运行，这一切都需要几个小时。由于此设置的设计问题，我正在更改此设置，以便可以从控制台启动它。

我需要的所有代码都在一个 dll 中，网站和控制台应用程序都可以访问它。

除了启动消息外，控制台没有输出。

问题是当我从控制台（或从调试器）运行它时，它比从 ASP.NET 网站运行它花费的时间大约长 10 倍（！）。如果 ASP.NET 版本比控制台慢，我会更容易理解。

为什么会这样，或者我该如何调试或找出原因或解决问题？

**编辑：** 通过 Visual Studio 调试器尝试两种变体时也会发生这种情况。从“调试”到“输出”窗口的输出类似于：

线程 '' (0x1d34) 以代码 0 (0x0) 退出。线程 '' (0xf20) 以代码 0 (0x0) 退出。线程 '' (0x3414) 以代码 0 (0x0) 退出。线程 '' (0x35c8) 以代码 0 (0x0) 退出。线程 '' (0xdc) 以代码 0 (0x0) 退出。线程 '' (0x1c98) 以代码 0 (0x0) 退出。线程 '' (0x3308) 以代码 0 (0x0) 退出。线程 '' (0x2b00) 以代码 0 (0x0) 退出。线程 '' (0x2f7c) 以代码 0 (0x0) 退出。线程 '' (0x345c) 以代码 0 (0x0) 退出。线程 '' (0x2a18) 以代码 0 (0x0) 退出。线程 '' (0x138) 以代码 0 (0x0) 退出。线程 '' (0x3650) 以代码 0 (0x0) 退出。线程 '' (0x376c) 以代码 0 (0x0) 退出。

除了在 ASP.NET 情况下，此文本的编写速度大约快 10 倍。

也许还值得一提的是，该 dll 通过 COM 为每个下载的页面调用 7zip 来压缩它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:14:24.557

如果您从同一台服务器下载大量页面，您将遇到[`ServicePointManager.DefaultConnectionLimit`](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx). 默认值通常是 2（[如 HTTP 1.1 RFC 建议的那样](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4)），但对于 ASP.NET 应用程序来说似乎是 10。如果您看到不同的数字，则可能是某些东西更改了默认值。

当您达到此限制时，框架将不再与该特定服务器（或“端点”）建立任何连接，因此您的大多数线程将阻止不做任何事情。

您可以通过更改 的值来解决此问题`DefaultConnectionLimit`，但更好的解决方案可能是更改请求的顺序，这样您就不会同时向同一服务器发出许多请求。

# c# - 新名单 在泛型类实现中

> ID：15459164
> 
> 赞同：0
> 
> 时间：2013-03-17T09:15:21.953
> 
> 标签：c#, generics

尝试创建列表的通用实现。我的课是：

```
public class SpecialList <T>
{ 
    private List <T> mylist;

    public void SpecialList <T>() 
    { 
        mylist = new List <T>()
    }
} 
```

这段代码不能编译 b/c “不能隐式地将类型 ....List 转换为 ... List ...”我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T09:21:30.023

这条线有两个问题：

```
public void SpecialList <T>() 
```

首先，当我怀疑您希望它成为构造函数时，您正在声明一个具有返回类型的*方法。*`void`

其次，它是一个*泛型*方法——它引入了一个`T`与现有类型参数无关的新类型参数。这就是转换不起作用的原因。想象一下它被写成：

```
public void MyGenericMethod<TOther>()
{
    List<T> x = new List<TOther>();
} 
```

...那显然是错误的，是吗？

您只需要这样的构造函数：

```
public SpecialList()
{
    ...
} 
```

（作为旁注，通常类型参数不会像您所做的那样用空格与声明分隔。通常是这样`List<T>`而不是`List <T>`例如。可能值得改变您的习惯以匹配大多数其他人使用的约定.)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T09:18:58.693

你的课应该是

```
public class SpecialList <T>
{ 
    private List <T> mylist;

    public SpecialList() 
    { 
        mylist = new List <T>();
    }
} 
```

当然，如果你的类看起来像一个集合，你可能想要实现一个或多个集合接口，例如

```
public class SpecialList <T> : ICollection<T>
{ 
    private List <T> mylist;

    public SpecialList() 
    { 
        mylist = new List <T>();
    }

    // ICollection<T>.Add
    public void Add(T item)
    {
        // delegate to myList
        myList.Add(item);
    }

    ... /Clear/Contains/CopyTo/ etc
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T09:19:07.560

问题是不能*定义*为的构造`void SpecialList<T>()`：

```
public class SpecialList<T> {
    private List<T> mylist;

    public SpecialList( ) {
        mylist = new List<T>( );
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T09:21:22.563

那是因为您不能使用任何通用参数定义构造函数。您可以做的只是删除通用的特定代码。

```
public class SpecialList <T>
{ 
    private List <T> mylist;

    public SpecialList() 
    { 
        mylist = new List <T>();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T09:22:18.893

您不需要*T*在构造函数中。

*它使编译器认为它是类上使用的T*以外的类型。

这就是为什么它说不能将它从*List*（其中*T*来自类）转换为*List*（其中*T*来自构造函数）。

# sockets - 使用 python 对 Tor 进行身份验证时遇到问题

> ID：15459170
> 
> 赞同：5
> 
> 时间：2013-03-17T09:15:53.433
> 
> 标签：sockets, authentication, proxy, tor

可能在这里做一些非常愚蠢的事情，但是我在通过 Tor 自动进行身份验证时遇到了一些麻烦。

我正在使用带有混淆网桥的 32 位 ubuntu 12.04。

这应该是所有相关代码，但如果有其他东西对调试这个问题有用，请告诉我：

```
import socket
import socks
import httplib

def connectTor():
    socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050, True)
    #9050 is the Tor proxy port
    socket.socket = socks.socksocket

def newIdentity():
    socks.setdefaultproxy() #Disconnect from Tor network

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

s.connect(("127.0.0.1", 46594))

s.send("AUTHENTICATE\r\n")

response = s.recv(128)
#128 bytes of data for now, just to see how Tor responds

print response
if response.startswith("250"): #250 is the code for a positive response from Tor
    s.send("SIGNAL NEWNYM\r\n") #Use a new identity
s.close()

connectTor() #Just to make sure we're still connected to Tor 
```

每当我运行它时，我都会收到以下错误：

```
515 Authentication failed: Password did not match HashedControlPassword value from configuration. Maybe you tried a plain text password 
```

我尝试使用 --hash-password 选项并将其粘贴到 AUTHENTICATE 字符串的位置，但这只会导致脚本挂起。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-16T03:52:43.440

该错误意味着您在 torrc 中设置了 HashedControlPassword 选项。我建议选择`CookieAuthentication 1`使用控制器库而不是从头开始。

您在这里尝试执行的操作（发出 NEWNYM）是一个非常非常常见的请求（[1](https://stackoverflow.com/questions/17013707/how-can-i-change-my-tor-process-endpoint-in-stem)、[2](https://stackoverflow.com/questions/16987518/how-to-request-new-tor-identity-in-terminal)），所以我只是为它添加了一个[常见问题解答条目](https://stem.torproject.org/faq.html#how-do-i-request-a-new-identity-from-tor)。这是一个使用[词干](https://stem.torproject.org/)的例子......

```
from stem import Signal
from stem.control import Controller

with Controller.from_port(port = 9051) as controller:
  controller.authenticate()
  controller.signal(Signal.NEWNYM) 
```

# highcharts - highchart autoupdate(addpoint) 导致图表视图损坏

> ID：15459181
> 
> 赞同：0
> 
> 时间：2013-03-17T09:16:52.217
> 
> 标签：highcharts

我在我的页面内使用多个 highchart 图表，我使用 addpoint 函数来更新图表。问题是一段时间后图表将被压缩到原始图表大小的一半以下。我捕获了我的屏幕，可以在这里找到以明确问题： [http ://www.screenr.com/f3E7](http://www.screenr.com/f3E7)

示例图表生成代码：

```
$(function () {
                          $(document).ready(function() {
                          Highcharts.setOptions({
                          global: {
                          useUTC: false
                          }
                          });
                          //var chart;
                          chart = new Highcharts.Chart({
                          chart: {
                          renderTo: 'ch_trafficio',
                          type: 'spline',
                          marginRight: 10,
                          events: {
                          load: function() {
                          // set up the updating of the chart each second
                          var series = this.series[0];
                          var series1= this.series[1];
                          }
                          }
                          },
                          title: {
                          text: ''
                          },
                          xAxis: {
                          type: 'datetime',
                          tickPixelInterval: 150
                          },
                          yAxis: {
                          title: {
                          text: 'Value'
                          },
                          plotLines: [{
                          value: 0,
                          width: 1,
                          color: '#808080'
                          }]
                          },
                          tooltip: {
                          formatter: function() {
                          return '<b>'+ this.series.name +'</b><br/>'+
                          Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+
                          Highcharts.numberFormat(this.y, 2);
                          }
                          },
                          plotOptions : {
                            area : {
                              lineWidth : 1,
                              marker : {
                                enabled : false,
                                states : {
                                  hover : {
                                    enabled : true,
                                    radius : 5
                                  }
                                }
                              },
                              shadow : false,
                              states : {
                                hover : {
                                  lineWidth : 1
                                }
                              }
                            }
                          },
                          legend: {
                          enabled: true
                          },
                          exporting: {
                          enabled: true
                          },
                          series: [{
                          name: 'InBound',
                          type : "area",
                          color: '#89A54E',
                          data: (function() {
                          // generate an array of random data
                          var data = [],
                          time = (new Date()).getTime(),
                          i;
                          for (i = -119; i <= 0; i++) {
                          data.push({
                          x: time + i * 1000,
                          y: Math.random()
                          });
                          }
                          return data;
                          })()
                          },{
                           name: 'OutBound',
                           type : "area",
                           color: '#AA4643',

                           data: (function() {
                          // generate an array of random data
                          var data = [],
                          time = (new Date()).getTime(),
                          i;
                          for (i = -119; i <= 0; i++) {
                          data.push({
                          x: time + i * 1000,
                          y: Math.random()
                          });
                          }
                          return data;
                          })()
                           }
                          ]
                          }); 
```

图表更新功能：

```
chart.series[0].addPoint([x,data.oid1], false, true);
chart.series[1].addPoint([x,data.oid2], true, true);
chart1.series[0].addPoint([x,data.oid5], true, true);
chart2.series[0].addPoint([x,data.oid3], false, true);
chart2.series[1].addPoint([x,data.oid4], true, true);
chart3.series[0].addPoint([x,data.oid7], true, true); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:51:41.270

您需要为您的点添加一个移动参数以在图表上移动

```
var series = chart.series[0],
shift = series.data.length > 100; // shift if the series is longer than 100 
```

并更改如下添加点

```
chart.series[0].addPoint([x,data.oid1], true, shift); 
```

[这里的](http://www.highcharts.com/studies/live-server.htm)例子

# java - JTextBox 总是有换行符

> ID：15459183
> 
> 赞同：0
> 
> 时间：2013-03-17T09:17:05.643
> 
> 标签：java, swing, events, networking, interface

我正在构建一个聊天程序。用户可以选择按 JButton SEND 或直接按键盘上的 ENTER 来发送消息。这是我的代码。

```
private void chatTextAreaKeyPressed(java.awt.event.KeyEvent evt) {                                        

        if(evt.getKeyCode() == KeyEvent.VK_ENTER) {

            this.sendButtonActionPerformed(null);
            this.chatTextArea.setText(null); // Clear JTextBox
        }
    } 
```

这样做的问题是，在按下 ENTER 后，它将 JTextBox 设置为一个空的新行。这样我接下来输入的任何内容都将始终位于第二行，而不是从空文本框开始。

有人有什么想法吗？非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:23:12.423

您需要使用该事件[`evt.consume()`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/InputEvent.html#consume%28%29)以确保它不被文本字段本身处理。

这表明事件的所有处理都已完成，其他侦听器不应对该事件采取行动。

# sql-server-2000 - 无需安装连接工具即可连接到 SQL Server 2000

> ID：15459184
> 
> 赞同：1
> 
> 时间：2013-03-17T09:17:12.357
> 
> 标签：sql-server-2000, remote-connection

我正在使用2台机器。

1.  Windows server 2003 with SQL Server 2005 (default instance) `MySrvName`"和 SQL Server 2000 (named instance)`MySrvName\SQL2000`
2.  带有 VS 2010 的 Windows 7
3.  局域网（工作正常）

当我连接到 SQL Server 2005 时，它在 win7 和 win 2003 中运行良好，但是当我尝试通过 win7 连接到 SQL Server 2000 时，它说

> *服务器未找到或无法访问*

此实例 ( `SQL2000`) 在 Windows 服务器计算机上运行良好。我尝试禁用所有防火墙（默认为 windows）。

在 2002-3 年，我曾经遇到过同样的问题，我曾经通过安装 MSDE/连接工具来解决这个问题。有没有不安装任何东西的方法来解决？或者任何一个文件来安装这些连接工具？

# javascript - iframe 跨域访问

> ID：15459187
> 
> 赞同：1
> 
> 时间：2013-03-17T09:17:19.033
> 
> 标签：javascript, iframe, same-origin-policy

我有一个 HTML 页面，其中包含一个不属于我的跨域中的 iframe。

我需要在 iframe 中进行一些基本的 javascript 修改（写入值并启动事件 -> 表单处理）。

由于相同的原产地政策，我不允许这样做。但是，我需要这样做，所以我正在寻找一种解决方法。

解决方案很重要，我可以为自己运行一个脚本。如果它可以在一个浏览器中运行就足够了，而且我自己不需要安全性。

在我的研究中，我发现了很多方法来破坏相同的源策略，例如 document.location（仅在 FF 中具有相似的位置）、JSONP/sendMessage（我需要成为两个域的所有者）等等，没有任何效果带有不属于我的页面的 iframe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:24:20.823

如果您不能使其他站点[包含相关的 CORS 标头](http://enable-cors.org/)，则唯一的“解决方法”是获取 iframe 内容服务器端并将其作为来自您自己的域的服务。

没有更简单的解决方法的原因是为什么存在[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)：保护用户。

# c++ - 在标准路径中找不到 libGL.so、libGLU.so 和 libglut.so

> ID：15459191
> 
> 赞同：0
> 
> 时间：2013-03-17T09:17:49.280
> 
> 标签：c++, linux, opengl

我正在尝试使用 c++ 中的代码块编译和运行程序。openGL 的简单示例，其中包括。当我尝试设置代码块链接器设置时，我在 /usr/include 目录中找不到 libGL.so 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:43:37.203

该`/usr/include`目录仅用于头文件。

这些库是从一组标准目录（特定于发行版）中提取的，但这些是常见的：

```
/usr/lib
/usr/lib64
/lib
/lib64
/usr/local/lib
/usr/local/lib64 
```

此外，还可以`ld`使用`-L`命令行选项（IDE 通常在配置链接器设置时执行此操作）将库路径指定给链接器 ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:21:26.633

`/usr/include`仅包含头文件。

相应的库通常存储在`/usr/local/lib`.

# django - 正确计算 FK 的方法

> ID：15459197
> 
> 赞同：0
> 
> 时间：2013-03-17T09:18:53.117
> 
> 标签：django

从我的“组”中获取“联系人”**计数**的正确方法是什么？

我想在“组”和过滤器（）中创建一个新方法，但这意味着再次访问数据库，这似乎很糟糕，对吧？

```
class GroupManager(models.Manager):

    def for_user(self, user):
        return self.get_query_set().filter(user=user,)

class Group(models.Model):
    name = models.CharField(max_length=60)
    modified = models.DateTimeField(null=True, auto_now=True,)

    #FK
    user = models.ForeignKey(User, related_name="user")

    objects = GroupManager()

    def get_absolute_url(self):
        return reverse('contacts.views.group', args=[str(self.id)])

class Contact(models.Model):

    first_name = models.CharField(max_length=60)
    last_name = models.CharField(max_length=60)

    #FK
    group = models.ForeignKey(Group) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:22:21.237

`group_object.contact_set.count()`应该这样做。Django 通过添加`_set`到外键模型名称的末尾来创建关系。

查看相关对象的[文档](https://docs.djangoproject.com/en/1.5/topics/db/queries/#related-objects)以获取更多信息。

# actionscript-3 - AS3：使用 as3 编程在曲线路径中移动对象？

> ID：15459204
> 
> 赞同：0
> 
> 时间：2013-03-17T09:19:16.477
> 
> 标签：actionscript-3, bezier

我需要在屏幕上随机移动曲线路径中的许多对象。对象开始路径和朝向路径也应该随机选择。我在谷歌上搜索过，最后我找到了一个有用的绘制曲线的教程。但我不知道如何使用该曲线路径移动对象。但我确信 as3 中会有一些公式必须使用 sin 和 cos theta。所以请让我知道是否有人可以解决我的问题。而且，如果我有任何示例项目，对我来说也将非常有用。我要绘制曲线的链接如下。 [http://active.tutsplus.com/tutorials/actionscript/the-math-and-actionscript-of-curves-drawing-quadratic-and-cubic-curves/?search_index=4](http://active.tutsplus.com/tutorials/actionscript/the-math-and-actionscript-of-curves-drawing-quadratic-and-cubic-curves/?search_index=4)。

```
Thanks in advance.Immediate Help would be appreciated. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T12:10:46.950

正如您所提到的，快速的'n'dirty 将使用极坐标到笛卡尔坐标（正弦和余弦）：

```
import flash.events.Event;

var a:Number = 0;//angle
var ra:Number = .01;//random angle increment
var rx:Number = 100;//random trajectory width
var ry:Number = 100;//random trajectory height

graphics.lineStyle(1);
addEventListener(Event.ENTER_FRAME,function (event:Event):void{
    a += ra;//increment angle            
    rx += a;//fidle with radii otherwise it's gonna be a circle
    ry += a;//feel free to play with these
    graphics.lineTo(225 + (Math.cos(a) * rx),//offset(225,200)
                    200 + (Math.sin(a) * ry));//and use pol to car conversion

    if(a > Math.PI) reset();//reset at 180 or any angle you like
});

function reset():void{
    trace('reset');//more values to tweak here
    a = Math.random();
    ra = Math.random() * .0001;
    rx = 20 + Math.random() * 200;
    ry = 20 + Math.random() * 200;
} 
```

随机数需要调整以获得大部分更圆的椭圆（而不是更平的椭圆），但原理是相同的。

如果您不介意使用库，不妨试试[TweenLite 的](http://www.greensock.com/tweenlite/) [BezierPlugin](http://www.greensock.com/as/docs/tween/com/greensock/plugins/BezierPlugin.html)或[BezierThroughPlugin](http://www.greensock.com/as/docs/tween/com/greensock/plugins/BezierThroughPlugin.html)。应该很容易随机化起点/终点。

您还可以查看[关于二次、三次和厄米特插值的旧答案的第一部分](https://stackoverflow.com/questions/7205832/as3-function-for-extrapolating-points-on-a-spline-curve-or-hermite-curve-similar/7212012#7212012)

在我的示例中，我正在绘制一条路径，但当然，您可以使用这些计算得到的 x,y 坐标插入 DisplayObject 以在屏幕上移动它。

# r - 连接/合并时间序列（在 R 中）

> ID：15459205
> 
> 赞同：7
> 
> 时间：2013-03-17T09:19:24.870
> 
> 标签：r, merge, concatenation, xts

我必须 xts/zoo 对象。每个都在不同的时间跨度内测量不同的变量。我想创建一个包含所有度量的单个时间序列，其中 NA 用于缺少日期/变量组合。我怎么做？人工示例：

```
library(xts)
x<-cbind(a=1:3,b=3:1)
rownames(x) = as.character(Sys.Date()-1:3)

y<-cbind(a=5:7,c=3:1)
rownames(y) = as.character(Sys.Date()-5:7)

xs=as.xts(x)
ys=as.xts(y)

#now what?

#desired outcome looks like:
            a  b   c
2013-03-10  7 NA   1
2013-03-11  6 NA   2
2013-03-12  5 NA   3
2013-03-14  3  1  NA
2013-03-15  2  2  NA
2013-03-16  1  3  NA

# regular merge looks like that (adding an a.1 variable)
merge(xs,ys)
            a  b a.1  c
2013-03-10 NA NA   7  1
2013-03-11 NA NA   6  2
2013-03-12 NA NA   5  3
2013-03-14  3  1  NA NA
2013-03-15  2  2  NA NA
2013-03-16  1  3  NA NA

# simple concatenation ignores variable names and looks like that
c(xs,ys)
           a b
2013-03-10 7 1
2013-03-11 6 2
2013-03-12 5 3
2013-03-14 3 1
2013-03-15 2 2
2013-03-16 1 3

# so what should I do? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T09:52:06.430

这不是一个通用的解决方案。但适用于这个例子：

```
cbind(rbind(xs[,1],ys[,1]), cbind(xs[,-1],ys[,-1]))
           a  b  c
2013-03-10 7 NA  1
2013-03-11 6 NA  2
2013-03-12 5 NA  3
2013-03-14 3  1 NA
2013-03-15 2  2 NA
2013-03-16 1  3 NA 
```

只是提醒一下`cbind.xts`而已`merge.xts`。S 你可以使用得到相同的结果`merge`

```
merge(rbind(xs[,1],ys[,1]), merge(xs[,-1],ys[,-1]))
           a  b  c
2013-03-10 7 NA  1
2013-03-11 6 NA  2
2013-03-12 5 NA  3
2013-03-14 3  1 NA
2013-03-15 2  2 NA
2013-03-16 1  3 NA 
```

这个解决方案的问题是，如果`ys`并且`xs`有一些不常见的日期，你将在你的最终对象中有重复的索引。`xts`例如，如果我们替换 y ：

```
rownames(y) = as.character(Sys.Date()-3:5) 
```

你得到一个重复的索引`2013-03-14`，所以我不确定它是一个有效的`xts`对象。

```
merge(rbind(xs[,1],ys[,1]), merge(xs[,-1],ys[,-1]))
           a  b  c
2013-03-12 7 NA  1
2013-03-13 6 NA  2
2013-03-14 3  1  3
2013-03-14 5 NA NA
2013-03-15 2  2 NA
2013-03-16 1  3 NA 
```

**编辑**解决方案的概括：

```
inter <- intersect(names(ys), names(xs))
diffx <- setdiff(names(xs),inter)
diffy <- setdiff(names(ys),inter)

merge(rbind(xs[,inter],ys[,inter]), merge(xs[,diffx],ys[,diffy]))

           a  b  c
2013-03-10 7 NA  1
2013-03-11 6 NA  2
2013-03-12 5 NA  3
2013-03-14 3  1 NA
2013-03-15 2  2 NA
2013-03-16 1  3 NA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T10:08:15.847

`What you want => merge(data.frame(x,d),data.frame(y,d),by=c("d","a"),all=T`)

您应该使用 data.frame 而不是名称向量/矩阵，这是一个通用解决方案，您想要的只是一个带有完整外连接的单行（查看 ?merge）

```
x<-cbind(a=1:3,b=3:1)
d= as.character(Sys.Date()-1:3)
DT1 = data.frame(x,d)
#DT1
#   a b          d
#1: 1 3 2013-03-16
#2: 2 2 2013-03-15
#3: 3 1 2013-03-14

y<-cbind(a=5:7,c=3:1)
d = as.character(Sys.Date()-5:7)
DT2 = data.frame(y,d)
#DT2
#   a b          d
#1: 1 3 2013-03-12
#2: 2 2 2013-03-11
#3: 3 1 2013-03-10
merge(DT1,DT2,by=c("d","a"),all=T)
#           d a  b  c
#1 2013-03-10 7 NA  1
#2 2013-03-11 6 NA  2
#3 2013-03-12 5 NA  3
#4 2013-03-14 3  1 NA
#5 2013-03-15 2  2 NA
#6 2013-03-16 1  3 NA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T13:05:08.303

好的。花了一些时间思考这个问题。因为最终我需要将许多这样的数据帧/xts“合并”为一个，而不仅仅是合并其中的两个，我认为一步完成所有这些是有意义的：创建一个包含所有日期/变量组合的大矩阵。然后将所有观察到的数据逐个对象插入这个大矩阵。代码如下所示（很高兴得到评论，并且可以随意使用，当然没有任何形式的保证）：

```
alltogether = function(dlist) {
    all.vars = unique(unlist(lapply(dlist,colnames)))
    all.obs = unique(unlist(lapply(dlist,rownames)))    
    res = array(NA,dim=c(length(all.obs),length(all.vars)),
          dimnames=list(all.obs,all.vars))
    for(d in dlist) {
            res[rownames(d),colnames(d)]=d
    }
    return(res)
}

alltogether.xts = function(xlist) {
    dlist = lapply(xlist,as.matrix)
    res = alltogether(dlist)
    xres = as.xts(res)
    return(xres)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-05T20:56:20.373

*我会说将其转换为数值数组（as.numeric(ts)），将其与 cbind(ts1,ts2) 连接，然后返回时间序列 ts(c(as.numeric(ts1),as.数字（ts2））*

# android - 插入值时Sqlite无法识别的令牌

> ID：15459206
> 
> 赞同：0
> 
> 时间：2013-03-17T09:19:32.297
> 
> 标签：android, sqlite, exception

```
android.database.sqlite.SQLiteException: unrecognized token: "'HRH™": , while compiling: INSERT INTO `w` VALUES (310346,-42,13,3,5399,'mightyhakizimi',2978,'mightyhakizimi',130,'HRH™ 
```

我正在从 sqlite 转储文件向我的数据库插入值，该文件可能包含像此异常中的错误字符，如何在每个插入查询中检查所有可能的错误字符？我的插入代码在那里。

```
Reader reader = new InputStreamReader(new FileInputStream(filePath),"utf-8");
BufferedReader br = new BufferedReader(reader);

db.beginTransaction();

while (br.ready()) {
    String insertStmt = br.readLine();

    db.execSQL(insertStmt);

}
br.close();
db.setTransactionSuccessful();
db.endTransaction(); 
```

# android - 将参数传递给 DialogFragment

> ID：15459209
> 
> 赞同：124
> 
> 时间：2013-03-17T09:20:16.157
> 
> 标签：android, android-dialogfragment

我需要将一些变量传递给`DialogFragment`，以便执行操作。Eclipse 建议我应该使用

```
Fragment#setArguments(Bundle) 
```

但我不知道如何使用这个功能。如何使用它将变量传递给我的对话框？

* * *

## 回答 #1

> 赞同：320
> 
> 时间：2013-03-17T09:26:34.573

使用`newInstance`

```
public static MyDialogFragment newInstance(int num) {
    MyDialogFragment f = new MyDialogFragment();

    // Supply num input as an argument.
    Bundle args = new Bundle();
    args.putInt("num", num);
    f.setArguments(args);

    return f;
} 
```

得到这样的 Args

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mNum = getArguments().getInt("num");
    ...
} 
```

在此处查看完整示例
[http://developer.android.com/reference/android/app/DialogFragment.html](http://developer.android.com/reference/android/app/DialogFragment.html)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-06-19T10:21:21.080

我曾经从我的列表视图发送一些值

**如何发送**

```
mListview.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
            Favorite clickedObj = (Favorite) parent.getItemAtPosition(position);

            Bundle args = new Bundle();
            args.putString("tar_name", clickedObj.getNameTarife());
            args.putString("fav_name", clickedObj.getName());

            FragmentManager fragmentManager = getSupportFragmentManager();
            TarifeDetayPopup userPopUp = new TarifeDetayPopup();
            userPopUp.setArguments(args);
            userPopUp.show(fragmentManager, "sam");

            return false;
        }
    }); 
```

**如何**在 DialogFragment 的 onCreate() 方法中接收

```
 Bundle mArgs = getArguments();
    String nameTrife = mArgs.getString("tar_name");
    String nameFav = mArgs.getString("fav_name");
    String name = ""; 
```

// Kotlin 上传

```
 val fm = supportFragmentManager
        val dialogFragment = AddProgFargmentDialog() // my custom FargmentDialog
        var args: Bundle? = null
        args?.putString("title", model.title);
        dialogFragment.setArguments(args)
        dialogFragment.show(fm, "Sample Fragment") 
```

// 收到

```
 override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        if (getArguments() != null) {
            val mArgs = arguments
            var myDay= mArgs.getString("title")
        }
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-02-09T10:00:06.767

所以有两种方法可以将值从片段/活动传递到对话框片段：-

> 1.  使用 make setter 方法创建对话框片段对象并传递值/参数。
>     
>     
> 2.  通过捆绑传递值/参数。

# 方法一：

```
// Fragment or Activity 
@Override
public void onClick(View v) {
     DialogFragmentWithSetter dialog = new DialogFragmentWithSetter();
     dialog.setValue(header, body);
     dialog.show(getSupportFragmentManager(), "DialogFragmentWithSetter");         
}

//  your dialog fragment
public class MyDialogFragment extends DialogFragment {
    String header; 
    String body;
    public void setValue(String header, String body) {   
          this.header = header;
          this.body = body;
    }
    // use above variable into your dialog fragment
} 
```

> 注意：- 这不是最好的方法

# 方法二：

```
// Fragment or Activity 
@Override
public void onClick(View v) {
     DialogFragmentWithSetter dialog = new DialogFragmentWithSetter();

     Bundle bundle = new Bundle();
     bundle.putString("header", "Header");
     bundle.putString("body", "Body");  
     dialog.setArguments(bundle);
     dialog.show(getSupportFragmentManager(), "DialogFragmentWithSetter");         
}

//  your dialog fragment
public class MyDialogFragment extends DialogFragment {
    String header; 
    String body;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (getArguments() != null) {
             header = getArguments().getString("header","");
             body = getArguments().getString("body","");
        }
    }
    // use above variable into your dialog fragment
} 
```

> 注意：- 这是最好的方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-17T09:45:39.687

正如 JafarKhQ 所指出的，作为使用 Fragments 的一般方式，您不应该在构造函数中传递参数，而是使用`Bundle`.

类中的内置方法`Fragment`是`setArguments(Bundle)`and `getArguments()`。

基本上，您所做的就是将所有物品打包`Parcelable`并发送出去。
反过来，您的 Fragment 会将这些物品放入其中，`onCreate`并对它们施展魔法。

链接中显示的`DialogFragment`方式是在具有一种特定类型数据的多出现片段中执行此操作的一种方式，并且大多数情况下都可以正常工作，但您也可以手动执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-18T15:17:37.023

只是我想向那些使用**kotlin**的人展示如何在 Kotlin 中执行 @JafarKhQ 所说的操作，这可能会帮助他们并节省主题时间：

所以你必须创建一个**伴随对象**来创建新的**newInstance**函数

您可以根据需要设置函数的参数。使用

```
 val args = Bundle() 
```

你可以设置你的参数。

您现在可以使用`args.putSomthing`添加您作为参数在您的 newInstance 函数中提供的参数。 `putString(key:String,str:String)`例如添加字符串等等

现在要获取参数，您可以使用 `arguments.getSomthing(Key:String)`=> like`arguments.getString("1")`

这是一个完整的例子

```
class IntervModifFragment : DialogFragment(), ModContract.View
{
    companion object {
        fun newInstance(  plom:String,type:String,position: Int):IntervModifFragment {
            val fragment =IntervModifFragment()
            val args = Bundle()
            args.putString( "1",plom)
            args.putString("2",type)
            args.putInt("3",position)
            fragment.arguments = args
            return fragment
        }
    }

...
    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        fillSpinerPlom(view,arguments.getString("1"))
         fillSpinerType(view, arguments.getString("2"))
        confirmer_virme.setOnClickListener({on_confirmClick( arguments.getInt("3"))})

        val dateSetListener = object : DatePickerDialog.OnDateSetListener {
            override fun onDateSet(view: DatePicker, year: Int, monthOfYear: Int,
                                   dayOfMonth: Int) {
                val datep= DateT(year,monthOfYear,dayOfMonth)
                updateDateInView(datep.date)
            }
        }

    }
  ...
} 
```

现在如何创建你的对话框，你可以在另一个类中做这样的事情

```
 val dialog = IntervModifFragment.newInstance(ListInter.list[position].plom,ListInter.list[position].type,position) 
```

例如像这样

```
class InterListAdapter(private val context: Context, linkedList: LinkedList<InterItem> ) : RecyclerView.Adapter<InterListAdapter.ViewHolder>()
{
   ... 
    override fun onBindViewHolder(holder: ViewHolder, position: Int) {

        ...
        holder.btn_update!!.setOnClickListener {
           val dialog = IntervModifFragment.newInstance(ListInter.list[position].plom,ListInter.list[position].type,position)
           val ft = (context as AppCompatActivity).supportFragmentManager.beginTransaction()
            dialog.show(ft, ContentValues.TAG)
        }
        ...
    }
..

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-08T17:04:38.470

就我而言，上面的代码都`bundle-operate`不起作用；这是我的决定（我不知道它是否是正确的代码，但它适用于我的情况）：

```
public class DialogMessageType extends DialogFragment {
    private static String bodyText;

    public static DialogMessageType addSomeString(String temp){
        DialogMessageType f = new DialogMessageType();
        bodyText = temp;
        return f;
    };

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final String[] choiseArray = {"sms", "email"};
        String title = "Send text via:";
        final AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(title).setItems(choiseArray, itemClickListener);
        builder.setCancelable(true);
        return builder.create();
    }

    DialogInterface.OnClickListener itemClickListener = new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            switch (which){
                case 0:
                    prepareToSendCoordsViaSMS(bodyText);
                    dialog.dismiss();
                    break;
                case 1:
                    prepareToSendCoordsViaEmail(bodyText);
                    dialog.dismiss();
                    break;
                default:
                    break;
            }
        }
    };
[...]
}

public class SendObjectActivity extends FragmentActivity {
[...]

DialogMessageType dialogMessageType = DialogMessageType.addSomeString(stringToSend);
dialogMessageType.show(getSupportFragmentManager(),"dialogMessageType");

[...]
} 
```

# android - 动态 ListView OnItemClick - 应该在另一个活动中填充值

> ID：15459210
> 
> 赞同：1
> 
> 时间：2013-03-17T09:20:34.983
> 
> 标签：android, android-listview

安卓 2.3.3

我有两个活动，家庭和历史。我在历史上有一个动态列表视图（使用自定义适配器），我在列表视图中有数据。单击项目时，项目中的值应该反映在主页活动中（应该填充文本视图和编辑文本）。

下面是代码...

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

     TextView txtExp = (TextView) arg1.findViewById(R.id.txtView_History_Expression);
     TextView txtRes = (TextView) arg1.findViewById(R.id.txtView_History_Result);

     String ret_Exp = txtExp.getText().toString();
     String ret_Res = txtRes.getText().toString();

     System.out.println("exp = "+ret_Exp+"   res = "+ret_Res);

     ma = new MainActivity();
     TextView ma_prev = (TextView) ma.findViewById(R.id.txtViewPrevious);
     EditText ma_Res = (EditText) ma.findViewById(R.id.edtxtInput);

     ma_prev.setText("");
     ma_prev.setText(ret_Exp);

     ma_Res.setText("");
     ma_Res.setText(ret_Res);

    } 
```

当我使用上面的代码时，我得到一个空指针异常......

```
03-17 14:39:42.199: E/AndroidRuntime(20411): java.lang.NullPointerException
03-17 14:39:42.199: E/AndroidRuntime(20411):    at android.app.Activity.findViewById(Activity.java:1647)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at com.mobilevoiceapps.advancedvoicecalculatorfree.History.onItemClick(History.java:207)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at android.widget.ListView.performItemClick(ListView.java:3744)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1991)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at android.os.Handler.handleCallback(Handler.java:587)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at android.os.Looper.loop(Looper.java:130)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at android.app.ActivityThread.main(ActivityThread.java:3687)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at java.lang.reflect.Method.invokeNative(Native Method)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at java.lang.reflect.Method.invoke(Method.java:507)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
03-17 14:39:42.199: E/AndroidRuntime(20411):    at dalvik.system.NativeStart.main(Native Method) 
```

这是列表视图行的 XML ::::

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingBottom="5dp"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp" >

    <TextView
        android:id="@+id/txtView_History_Count"
        android:layout_width="0dip"
        android:layout_height="50dp"
        android:layout_weight="0.20"
        android:text="Number"
        android:textColor="#FFFFFF"
        android:textSize="22dp"
        android:paddingLeft="5dp"
        android:gravity="center" />

    <LinearLayout
        android:id="@+id/ll2"
        android:layout_width="0dip"
        android:layout_height="50dp"
        android:layout_weight="0.80"
        android:orientation="vertical"
        android:paddingLeft="5dp" >

        <TextView
            android:id="@+id/txtView_History_Result"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Result"
            android:textColor="#316DA2"
            android:textSize="22dp" />

        <TextView
            android:id="@+id/txtView_History_Expression"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Expression"
            android:textColor="#FFFFFF"
            android:textSize="15dp" />
    </LinearLayout>

</LinearLayout> 
```

我不认为我这样做是正确的。有人可以告诉我如何做到这一点...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:28:15.350

```
ma = new MainActivity();
TextView ma_prev = (TextView) ma.findViewById(R.id.txtViewPrevious);
EditText ma_Res = (EditText) ma.findViewById(R.id.edtxtInput); 
```

它不会在 Android 中以这种方式工作。您应该`Intent`为. `MainActivity`_ `Bundle`_ 然后你应该从传入的数据中检索数据并用它填充你的视图。`startActivity()``MainActivity``Bundle``MainActivity's` `onCreate()`

# mysql - 在 MySQL 中存储物理尺寸

> ID：15459213
> 
> 赞同：0
> 
> 时间：2013-03-17T09:20:53.047
> 
> 标签：mysql, database-design

我经常通过 X、Y 和 Z 列将产品的尺寸存储在我的数据库中。

这是最好的方法还是他们更好的方法？我听说 MySQL 中有一个空间数据类型，在这种情况下是否相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:41:10.163

如果您存储对象的物理尺寸，那与空间数据类型试图表示的任何东西相去甚远。空间数据类型用于位置信息（例如地球上的点或平面上的点），并包含几何数据（描述局部空间，如足球场）或经度和纬度（描述全局空间）的 x 和 y 值

# python - 如何在python mechanize中设置cookie

> ID：15459217
> 
> 赞同：6
> 
> 时间：2013-03-17T09:21:14.593
> 
> 标签：python, mechanize-python

向服务器发送请求后

```
 br.open('http://xxxx')
    br.select_form(nr=0)   
    br.form['MESSAGE'] = '1 2 3 4 5'
    br.submit() 
```

我得到了包含 set-cookie 的响应标题

```
Set-Cookie: PON=xxx.xxx.xxx.111; expires=Tue, 17-Mar-2015 00:00:00 GMT; path=/ 
```

因为mechanize好像记不住cookie，所以想给br设置cookie。我该怎么做？

```
 cj = mechanize....?
    br.set_cookiejar(cj) 
```

我不知道。请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-08T02:55:24.680

我认为这应该做你想要的：

```
import Cookie
import cookielib
cookiejar =cookielib.LWPCookieJar()

br = mechanize.Browser()
br.set_cookiejar(cookiejar)
cookie = cookielib.Cookie(version=0, name='PON', value="xxx.xxx.xxx.111", expires=365, port=None, port_specified=False, domain='xxxx', domain_specified=True, domain_initial_dot=False, path='/', path_specified=True, secure=True, discard=False, comment=None, comment_url=None, rest={'HttpOnly': False}, rfc2109=False)
cookiejar.set_cookie(cookie) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-02T14:34:17.233

您还可以使用 mechanize 浏览器类中的 addheaders 方法手动添加预先存在的 cookie。

```
br.addheaders = [('Cookie','cookiename=cookie value')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T10:06:33.923

```
import mechanize
import cookielib

br = mechanize.Browser()
cj = cookielib.CookieJar()
br.set_cookiejar(cj) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-13T18:26:23.483

要使用 python mechanize 设置 cookie，首先获取网站 cookie 并将它们保存到文件“cookies.lwp”：

```
import mechanize, cookielib
cj = cookielib.LWPCookieJar()
br = mechanize.Browser()
br.set_cookiejar(cj)
br.open('https://www.somesite.com')
cj.save(filename="cookies.lwp", ignore_discard=False, ignore_expires=False) 
```

您现在可以将“cookies.lwp”中的任何 cookie 设置为您想要的任何值，然后将它们加载回您的浏览器：

```
cj.load(filename="modified_cookies.lwp", ignore_discard=False, ignore_expires=False)
br.set_cookiejar(cj)
br.open('https://www.yoursitehere.com')
for cookie in cj:
    print cookie 
```

该视频将引导您完成[如何使用 Python Mechanize 修改 Cookie](https://www.youtube.com/watch?v=BM-xCsYoAO0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-28T10:56:02.443

您可以使用该`set_simple_cookie`功能以更好的方式添加 cookie。

考虑到您的 cookie 是 json 格式，

```
{
    "domain": ".example.com",
    "expirationDate": 1651137273.706626,
    "hostOnly": false,
    "httpOnly": true,
    "name": "SecureExampleId",
    "path": "/",
    "sameSite": "strict",
    "secure": true,
    "session": false,
    "storeId": null,
    "value": "v%3D2%26mac%..."

} 
```

```
import http.cookiejar

cookiejar = http.cookiejar.LWPCookieJar()
br.set_cookiejar(cookiejar)

br.set_simple_cookie(cookie['name'], cookie['value'], cookie['domain'], cookie['path'])

response = br.open(url)
print(cookiejar._cookies) 
```

# debugging - 调试从 Chrome 中的 TypeScript 生成的动态加载的 Javascript

> ID：15459218
> 
> 赞同：2
> 
> 时间：2013-03-17T09:21:19.697
> 
> 标签：debugging, google-chrome, dynamic, typescript, getscript

使用 VS 2012、Web Essentials、TypeScript 0.8.3

有一个 TypeScript 文件“test.ts”。它被编译成“test.js”，最后有一个 sourceMappingURL。

```
//@ sourceMappingURL=test.js.map 
```

Javascript 文件使用 $.getScript 动态加载。但是，在 Chrome 开发人员工具中，我无法在任何地方找到源代码，因此无法设置断点。

如果我通过附加 sourceURL 手动编辑生成的 Javascript，情况会有所改善。

```
//@ sourceMappingURL=test.js.map
//@ sourceURL=test.ts 
```

Chrome 的 Sources 树中提供了名称“test.ts”。但是，单击它会打开 Javascript 文件“test.js”。可以设置和使用断点。

实际上，是否编码了正确的名称“test.ts”或任何其他名称都没有关系。

应该怎么做，所以可以用 Chrome 调试一个 TypeScript 文件，它生成的 Javascript 文件是动态加载的？

我也试过金丝雀。它没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-22T02:57:50.623

我写信是为了确认WhyMe 所写的内容。使用 jQuery.append() 附加标签不会将文件名添加到源树，但使用 DOM 元素到 .appendChild 确实会将文件名添加到源树。

```
var fileref = document.createElement('script');
                    fileref.setAttribute("type", "text/javascript");
                    fileref.setAttribute("src", 'Scripts/app/Views/Management/Spock.js');
                    document.getElementsByTagName("head")[0].appendChild(fileref) 
```

Spock.js 将位于 Sources 树中的正确文件夹中。

使用 //# source=Path_to_file 有效，但 A. 路径必须正确，并且 B. 文件名出现在 <No Domain> 下；这真的很难看。

PS - 我没有 50 点声望点，所以我无法在WhyMe 的评论旁边回复评论，但我*可以*添加答案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:59:37.510

在 Chrome Canary (25.0.1364.172 m) 中工作，并使用 require.js 动态加载脚本，我可以在 typescript 文件上设置和使用断点：

![在此处输入图像描述](../Images/62de365168247184ff846225922c816c.png)

请注意，这仅适用于与某些 JS 输出匹配的代码 - 因此（从逻辑上讲）您不能在接口定义内的任何位置设置断点。

我不确定是否可以选择使用 require.js 进行按需脚本加载。如果是这样，它应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T08:46:38.663

$.getScript 可能会使用 xmlhttp 加载文件并稍后将 javascript 添加到 DOM，因此浏览器无法将 javascript 映射到 js 断点

Requirejs 添加了一个带有 src 属性的脚本标签，这样浏览器仍然可以命中断点

# php - 当名字和姓氏像魅力一样工作时，无法验证电子邮件字段

> ID：15459219
> 
> 赞同：0
> 
> 时间：2013-03-17T09:21:21.347
> 
> 标签：php, mysql, sql, email-validation

我是 PHP 的新手，我正在尝试创建一个系统，用户将在其中添加名字、姓氏和电子邮件地址。基本上我想要做的是验证电子邮件是否已经存在于数据库中。

已经工作了几个小时，但它不起作用。但是当我尝试验证名字和姓氏时，它们都有效。

但是对于电子邮件字段...代码无法比较是否存在重复值。数据库中有很多重复的电子邮件 ID，但代码会忽略它并插入值：/。同时，如果我尝试验证重复的名字和姓氏，它可以工作

任何帮助请:(

```
$firstname=$_POST['firstname'];
$lastname=$_POST['lastname'];
$email=$_POST['email'];
$firstname= stripslashes($firstname);
$lastname= stripslashes($lastname);
$email= stripslashes($email);
$host="localhost";
$user="root";
$pass="";
$db="site";
$link=mysql_connect($host,$user,$pass);
mysql_select_db($db,$link);
$test="SELECT * FROM email_list WHERE email = '$email' ";   

$select=mysql_query($test);
if(mysql_num_rows($select)>0)       
{
    echo "Email already exists".$email."<br>";
    echo "Please enter another email";
}
else
{
    $query="INSERT into email_list (first_name, last_name, email) values ('$firstname', '$lastname', '$email')";
    mysql_query($query);
    echo "values entered" .$firstname. "<br>". $lastname. "<br>". $email;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:47:22.543

首先，正如您从下面的评论中看到的那样，您的问题`mysql_*`不再被推荐。如果您喜欢程序方法，请尝试`mysqli_*`使用函数，但这不是重点。

上面的代码似乎没有任何明显的错误，但是将原始输入插入数据库是一件危险的事情-您应该（至少）更改 INSERT 和 SELECT 语句，以便所有文本输入都包含在`mysql_real_escape_string()`函数中。然后 select 语句将如下所示：

```
"SELECT * FROM email_list WHERE email = '".mysql_real_escape_string($email)."' "; 
```

这不会改变你的代码的行为，它只会确保，如果有人在 $email 字段中输入废话，它将被保存为输入（不会崩溃你的代码）或者如果他们试图“破解”（注入）你的 mysql查询他们不会成功。

我在这里猜测（因为我没有太多信息可以使用）您`email`在`email_list`表格中的字段太短 - 并且可能只保存任何输入的电子邮件地址的前 16 个字符 - 这反过来不会帮助您确定是否电子邮件地址存在，因为您正在将输入的**joe@test.com**与**joe@test.c**进行比较 （如果您的`email`字段被定义为`char(10)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:47:28.733

基本调试步骤：

1.  `mysql_query()` *可能*会失败。你不测试它。测试它：

    ```
    $select=mysql_query($test);
    if(!$select){
        die(mysql_error());
    } 
    ```

2.  如果`mysql_num_rows()`永远不会大于零，您应该找出它是什么：

    ```
    var_dump(mysql_num_rows($select)); 
    ```

    此功能不适用于所有可能的配置。

3.  您运行 SELECT 查询？你对结果集不好奇吗？抓取并打印所有行。

此外：

*   SQL 比`SELECT * FROM table`. 如果要数数，可以在SQL中数数：

    ```
    SELECT COUNT(*) AS dupes FROM email_list 
    ```

*   您正在使用一个 MySQL 扩展，它将在下一个主要 PHP 版本发布时被删除。

*   我看到`stripslashes()`外面。魔术[引号](http://php.net/magic_quotes)功能令人讨厌，无用且已弃用。

*   确保您阅读并理解[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:48:10.647

我非常同意指出应该避免使用 mysql_query 和 mysql 的人（也因为他们迟早会弃用它）。你想切换到 MySQLi 或其他任何东西。这就是说，您不是在检查错误。与数据库的连接是否失败？你永远不会知道。会 `$test`失败吗？你也永远不会知道。尝试使用“ `or die()`”进行调试（NB: 或 die(); 强烈建议不要使用它！但是，如果它没有在生产中使用它就足够了）。

```
mysql_select_db($db,$link) or die("cannot open db");
$select=mysql_query($test) or die ("cannot select the email"); 
```

编辑：要检查电子邮件是否在数据库中，您可能需要一个函数来执行此操作。或者，如果您不想将其放入函数中，请尝试以这种方式编辑

```
$test="SELECT * FROM email_list WHERE email = '$email' ";   
$select=mysql_query($test);
if(mysql_num_rows($select)!=0) //different from 0   
{
    echo "Email already exists".$email."<br>";
    echo "Please enter another email";
} 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-16T20:08:43.740

一切看起来都不错，但请检查您在数据库中定义的电子邮件长度，如果它与您发送的电子邮件匹配，请尝试在您的表单上打印被接受的电子邮件。喜欢

```
Print $email ; 
```

我会建议你将“mysql”的所有名称更改为“mysqli”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-16T19:55:20.960

我将“$email”变量括在括号中，它对我有用。

```
$test= "SELECT Password FROM persons WHERE Email=('$email')"; 
```

# javascript - 删除 highcharts.com 积分链接

> ID：15459224
> 
> 赞同：361
> 
> 时间：2013-03-17T09:21:47.120
> 
> 标签：javascript, highcharts

我刚刚购买了[highcharts](http://www.highcharts.com/)，但积分链接仍然出现在我的图表上，这在我的网站上非常显眼，并且扭曲了图表视图。

我以为我会得到一个选项，那么如何删除它？

* * *

## 回答 #1

> 赞同：626
> 
> 时间：2013-03-17T11:19:11.703

您可以自定义积分，更改 URL、文本、位置等。所有信息都记录在这里：[http](http://api.highcharts.com/highcharts/credits) ://api.highcharts.com/highcharts/credits 。要完全禁用它们，请使用：

```
credits: {
    enabled: false
}, 
```

* * *

## 回答 #2

> 赞同：244
> 
> 时间：2013-03-17T09:41:43.850

[这里](http://highslide.com/forum/viewtopic.php?f=9&t=13788)说您应该能够将以下内容添加到图表配置中：

```
 credits: {
    enabled: false
  }, 
```

这将从图表底部删除“Highcharts.com”文本。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2021-01-05T03:59:29.913

添加

```
credits: {
    enabled: false
} 
```

[注意] 它与 `xAxis: {}`和在同一行`yAxis: {}`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-03-28T09:20:16.780

以下两个代码都可以很好地从图表中删除 highchart.com：-

```
credits: false 
```

或者

```
credits:{
 enabled:false,
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-29T03:51:09.600

将此添加到您的 CSS 中。

```
.highcharts-credits {
display: none !important;
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-06-19T18:23:23.060

```
credits : null 
```

也可以禁用学分

# cuda - 如何正确地将全局内存中的写入合并到全局内存中？

> ID：15459230
> 
> 赞同：0
> 
> 时间：2013-03-17T09:22:11.783
> 
> 标签：cuda

请理解我，但我不懂英语。

我的计算环境是

*   CPU：英特尔至强 x5690 3.46Ghz * 2EA
*   操作系统：CentOS 5.8
*   VGA：英伟达 Geforce GTX580（CC 为 2.0）

我已经阅读了 CUDA C 编程指南上有关“合并内存访问”的文档。但我不能在我的情况下应用它们。

我有 32x32 块/网格和 16x16 线程/块。这意味着如下代码。

```
dim3 grid(32, 32);
dim3 block(16,16);

kernel<<<grid, block>>>(...); 
```

那么，我怎样才能使用合并的内存访问呢？

我在下面的内核中使用了代码。

```
int i = blockIdx.x*16 + threadIdx.x;
int j = blockIdx.y*16 + threadIdx.y;

...

global_memory[i*512+j] = ...; 
```

我使用了常量 512，因为线程总数是 512x512 个线程：它是 grid_size x block_size。

但是，我从 Visual Profiler 中看到了“低全局内存存储效率[平均 9.7%，内核占计算的 100%]”。

助手说使用合并的内存访问。但是，我不知道应该使用内存的索引上下文。

有关详细代码的更多信息，[与 CUDA 占用计算器不同的实验结果](https://stackoverflow.com/questions/15360890/the-result-of-an-experiment-different-from-cuda-occupancy-calculator)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:12:18.077

在 CUDA 中合并内存加载和存储是一个非常简单的概念——*同一个 warp 中的*线程需要从内存中适当对齐的连续单词加载或存储。

在 CUDA 中，warp 大小为 32，并且 warp 由同一块内的线程形成，按顺序排列使得 x 维度`threadIdx.{xyz}`变化最快，y 次之快，z 最慢（在功能上这与 column major 相同在数组中排序）。

您发布的代码没有实现合并内存存储，因为同一经线中的线程以 512 个字的间距存储，而不是在所需的 32 个连续字内。

改善合并的一个简单技巧是按列主要顺序处理内存，因此：

```
int i = blockIdx.x*16 + threadIdx.x;
int j = blockIdx.y*16 + threadIdx.y;

...

global_memory[i+512*j] = ...; 
```

根据您在问题中显示的精神，在 2D 块和网格上实现合并的更通用方法如下：

```
 tid_in_block = threadIdx.x + threadIdx.y * blockDim.x;
   bid_in_grid = blockIdx.x + blockIdx.y * gridDim.x;
   threads_per_block = blockDim.x * blockDim.y;

   tid_in_grid = tid_in_block + thread_per_block * bid_in_grid;

   global_memory[tid_in_grid] = ...; 
```

最合适的解决方案将取决于您未描述的代码和数据的其他细节。

# vb.net - 如何将数据网格视图中的值输入标签？

> ID：15459238
> 
> 赞同：1
> 
> 时间：2013-03-17T09:23:02.360
> 
> 标签：vb.net, visual-studio-2010, visual-studio, visual-studio-2012

我正在使用 Visual Basic Express。我想要做的是允许用户从连接到 MS SQL 数据库的数据网格视图中选择一行。当用户选择一行然后点击一个按钮时，所谓的搜索表单就会关闭。现在，我要做的是将数据网格视图中四列中的两列的值复制到不同表单上的标签，以便用户可以确定他在继续之前选择了正确的行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:09:51.417

找到了解决方案！如果有人需要，这里是：

```
 form.Label1.Text = DataGridView1.Rows(e.RowIndex).Cells(1).Value & " " & DataGridView1.Rows(e.RowIndex).Cells(2).Value 
```

此代码将使用索引 1 和 2 除以空格的列中的值替换标签中的文本。

# python - 将数据从 json 文件打印到 csv 文件

> ID：15459242
> 
> 赞同：0
> 
> 时间：2013-03-17T09:23:24.000
> 
> 标签：python, csv, python-3.x

当我将数据从我的 json 文件打印到 csv 文件时，它没有打印在 diff 列中。这是我的代码

```
import json

import urllib
import csv

def main():

  f1 = open('tweet-stream.json','r')
  Outputfile =open('newdata3.csv', 'w')

  count = 0

  for line in f1:
    d = json.loads(line)
    lang =  d["user"]["lang"]
    status_count = d["user"]["statuses_count"]
    print >>Outputfile,"Language: " + lang + "Status_Count" +str(status_count)

if __name__ == "__main__":
   main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:55:44.397

```
f1 = json.load(open(tweet-stream.json', 'r'))
fileWriter = csv.writer(file1 , delimiter=",",quotechar='"', quoting=csv.QUOTE_MINIMAL)
for x in f1:
    temp = [x["user"]["lang"],x["user"]["statuses_count"]]
    fileWriter.writerow(temp)
file1.close() 
```

# linux - 在 Linux 中一般创建菜单项

> ID：15459243
> 
> 赞同：1
> 
> 时间：2013-03-17T09:23:34.420
> 
> 标签：linux, bash, shell, installation, shortcut

作为一个大型大学项目的一部分，我构建了一个基于 Java 的大型应用程序。为了使“安装”更干净，我打算编写一个脚本来将 jar 复制到用户主目录中的隐藏文件中，然后添加一个菜单和/或桌面启动器。

由于我不知道标记将使用什么平台，因此将其设为通用似乎是明智的，因此我将构建一个 shell 脚本和一个批处理文件。shell脚本开始很简单，检查目录不存在，创建它并复制文件。然后是制作某种发射器。我认为每个桌面环境都会做不同的事情。

使用谷歌 10 分钟后，似乎所有建议都是自动工具，但由于我对此一无所知，这似乎有点矫枉过正。

有没有一种简单的方法来实现我所需要的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:32:31.630

这些天来，基本上所有的桌面环境都使用桌面文件。有关这些文件的规范，请参阅[桌面条目规范](http://standards.freedesktop.org/desktop-entry-spec/latest/)。

通常，它们被放入`/usr/share/applications`系统中。然后读取这些文件并用于构建菜单。

如果您有能力写入系统`/usr/share/applications`目录，那显然是最简单的，但如果您有这种能力，您可能会将 JAR 文件放在用户主目录中隐藏目录之外的某个位置。

如果不是，那么应该尊重的路径是`~/.local/share/applications`. 如果您将桌面文件放在那里，它应该向用户显示。（这有点新；例如，我认为 GNOME 2 不支持它。较旧的桌面环境对这些文件有各种特殊的位置。）

然后，问题基本上归结为弄清楚桌面文件中的 Exec 行要写什么。（有关一些示例，请参阅系统上的桌面文件`/usr/share/applications`。）如果幸运的话，您可以只在其中粘贴一个`java`命令就可以逃脱，但详细信息将取决于您的应用程序。

# php - PHP 类 Textile 很慢并导致超时

> ID：15459248
> 
> 赞同：1
> 
> 时间：2013-03-17T09:24:04.277
> 
> 标签：php, optimization, textile

我在这里使用纺织类：http: [//textile.thresholdstate.com/](http://textile.thresholdstate.com/)（网站目前不可用），它在少于 20,000 个字符的情况下效果很好。任何更多都会导致 PHP 超时并出现以下错误：

```
PHP Fatal error:  Maximum execution time of 30 seconds exceeded ... 
```

我在想这可能不是一个真正有效的标记解析器？

1.  任何人都可以建议这个纺织类的替代品吗？
2.  有没有人重构了代码并对类进行了改进？
3.  我可以尝试（或寻找）哪些一般的 PHP 优化（带有循环等）来提高我的代码速度？

**更新**

感谢增加 php 时间限制的建议，我已经提高了一点。

然而 1 分钟的页面加载是可怕的。所以我一直在挖掘，发现以下网站有一个纺织版本列表，从 2003 年到 2012 年 12 月：[http ://txstyle.org/article/36/textile-versions](http://txstyle.org/article/36/textile-versions)

原来我从 2006 年开始使用纺织类！从那以后它已经走了很长一段路，最新版本似乎运行得更快了。具体来说，“doBr”功能似乎有所改进，可以防止我的测试超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:29:20.453

在 php.ini 中将您的 PHP 执行时间设置为 30 秒以上

在大多数共享虚拟主机上，这可以很容易地增加。如果您自己无法通过他们的 cpanel 或管理员完成，请给他们写一封电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:36:00.203

将php执行时间限制设置为无时间限制：

```
set_time_limit(0); 
```

# java - 在Java中将多维数组中的文本替换为另一个多维数组中的另一个文本

> ID：15459254
> 
> 赞同：1
> 
> 时间：2013-03-17T09:25:29.427
> 
> 标签：java, arrays, multidimensional-array

我一直在努力寻找以下情况的解决方案，

我有以下多维数组，

```
String [][] a1 ={{ New1 , d1, e1 },{ New2 , d2, e2 },{ New3 , d2, e1 },}; 

String [][] b1 ={{ d1, Re1 },{ d2, Re2 },}; 

String [][] c1 ={{ e1, 1 },{ e2, 2 },}; 
```

我想将字符串数组 a1 中的内容替换为字符串 b1 和 c1 中的适当标识符，并且应该获得以下输出，

```
String [][] new ={{ New1 , Re1, 1 },{ New2 , Re2, 2 },{ New3 , Re2, 1 },}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:29:32.290

最简单的事情可能是使用 a`Map`而不是`String[][]`for `b1`and `c1`。您可以像这样构建地图：

```
Map<String, String> b1Map = new HashMap<String, String>();
for (String[] entry : b1) {
    b1Map.put(entry[0], entry[1]);
}
// similarly for c1 
```

（或者，您可以直接构建地图，而不是先构建`b1`and`c1`数组。）然后您可以执行以下操作：

```
for (String[] item : a1) {
    item[1] = b1Map.get(item[1]);
    item[2] = c1Map.get(item[2]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:49:22.170

如果您不想使用集合，或者您需要在不使用集合的情况下解决它，您可以执行类似以下代码的操作，通过处理数组来解决您的需求

```
for(int i=0;i<a1.length;i++){
    for(int j=0;j<b1.length;j++){
        if(b1[j][0].equals(a1[i][1])){
            a1[i][1]=b1[j][1];
        }
    }
    for(int j=0;j<c1.length;j++){
        if(c1[j][0].equals(a1[i][2])){
            a1[i][2]=c1[j][1];
        }
    }
} 
```

# java - smali 中没有 java 导入？

> ID：15459256
> 
> 赞同：1
> 
> 时间：2013-03-17T09:26:20.217
> 
> 标签：java, android, smali

我今天在android源代码中做了一些实验。

让我说完整的事情，我从android源编译framework.jar并对其进行反编译并生成smali源并将其放在一边。然后从 CyanogenMod 存储库中，我向 android 源代码添加了一个功能的提交，并一次又一次地编译了 framework.jar 反编译的 smali 源代码，以查看 smali 方面的变化，以便我可以将它们移植到我的 ROM 中。

我要移植的功能需要导入某些类，例如 import dalvik.system.VMRuntime 和额外编码以使用这些导入的类。所以现在我的问题是，我只能看到额外的编码，即在 smali 代码中使用这些类，但看不到那些导入。因此，当我仅移植 smali 代码时，我在 logcat 中得到 java.lang.NoSuchMethodError，这表明它无法找到该方法。原因很清楚，因为没有导入必要的类，那么如何在 smali 代码中做到这一点？我认为在 smali 中没有办法做到这一点，因此新引入的方法不起作用。

有什么可行的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T19:14:50.650

导入在 java 中所做的唯一事情就是使您可以提及一个类而无需指定完整的包名。在 smali 中，没有导入 - 一切都始终使用包含包的完全限定类名。

因此，您的问题绝对与进口无关。听起来您正在尝试使用设备上根本不存在的方法。

您可以从您的设备中反汇编框架 jar 并找到其定义`dalvik.system.VMRuntime`并查看可用的方法。或者添加一些反射调用并将信息记录到 logcat。

值得注意的是，VMRuntime 不是公共 API 的一部分，它可能不会在所有设备或未来版本的 Android 上都存在或一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:44:01.527

（我不知道 smali，所以可能有更好的解决方案）

没有 Java 程序需要任何 import 语句。要使用例如 ArrayList，您需要导入它或完整引用它，如 java.util.ArrayList。

例如，C++ #include 和 Java 导入之间存在显着差异。C++ #include 直接在您的程序中插入代码，通常是您正在使用的类的声明。获取声明的过程在 Java 中分为两个阶段。首先编译器确定完全限定的类名，然后它使用自己的库和类路径来查找该名称的声明。Java 导入仅用于计算完全限定的类名，因此对于仅由其完全限定名引用的任何类都不需要。

也许您可以预处理要添加的代码，例如用 dalvik.system.VMRuntime 等替换 VMRuntime，这样您就可以在不导入的情况下编译它。

下面是一个以不同方式使用 java.util 类的短程序示例，没有任何导入：

```
public class Test {
  public static void main(String[] args) {
    java.util.List<String> list = new java.util.ArrayList<String>();
    list.add("bbb");
    list.add("aaa");
    java.util.Collections.sort(list);
    System.out.println(list);
  }
} 
```

# html - 为什么我看不到 Firefox 的日期选择器？

> ID：15459257
> 
> 赞同：3
> 
> 时间：2013-03-17T09:26:23.127
> 
> 标签：html, google-chrome, firefox, datepicker

以下*HTML*在 chrome 上生成*日期选择器：*

```
<html>
<head> <title> </title> </head>
<body>
    <form>
      <input type="date" />
    </form>
</body> 
```

![在此处输入图像描述](../Images/afa88882a4da1dc3a0800da6f8bf3e2e.png)

但它显示了一个简单的文本字段`firefox 19.0.2`。这是为什么 ？是不是firefox不支持所有的功能`HTML 5`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T09:27:36.913

> 这是为什么 ？是不是 firefox 不支持 HTML 5 的所有功能？

是的，FireFox 不支持所有 HTML 5 功能。例如 FireFox 19 不支持该`date`字段。

以下是有关浏览器支持`date`输入字段的更多详细信息：http: [//caniuse.com/input-datetime](http://caniuse.com/input-datetime)

# git - Resmo git-ftp 与 Mountain Lion 出现 egrep 错误

> ID：15459260
> 
> 赞同：2
> 
> 时间：2013-03-17T09:26:45.870
> 
> 标签：git, ftp, installation, grep, git-ftp

我对 git-ftp "resmo" 脚本有疑问。在 10.8.2 osx 更新之前它运行良好。

首先我以这种方式安装它

```
$ git clone https://github.com/resmo/git-ftp.git
$ cd git-ftp
$ git checkout master
$ sudo make install 
```

在我在 resmo git-page 上看到这个问题很常见之后，他建议从开发分支安装它。所以我卸载了它： $ sudo make uninstall

并以这种方式重新安装后

```
$ git checkout develop
$ sudo make install 
```

但是当我做“git ftp push”时......

```
egrep: repetition-operator operand invalid
No changed files for ftp.mydomain.com. Everything up-to-date. 
```

但这不是真的，因为我已经进行了代码更新并提交了它

我能做些什么？有人解决了吗？

我的版本：

```
$ sw_vers -productVersion 
10.8.2
$ git ftp --version
git-ftp version 0.8.3-snapshot
$ egrep --version
egrep (BSD grep) 2.5.1-FreeBSD 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T16:25:35.120

有关此问题的详细讨论，请参阅[https://github.com/resmo/git-ftp/issues/163](https://github.com/resmo/git-ftp/issues/163)，似乎升级到较新的 git-ftp 或安装此处提到的不同版本的 egrep[和](https://github.com/resmo/git-ftp/issues/163#issuecomment-15831830)此处[将](https://github.com/resmo/git-ftp/issues/163#issuecomment-15955031)解决问题。

# javascript - 有没有办法通过分配一个属性来自动创建一个javascript对象？

> ID：15459262
> 
> 赞同：4
> 
> 时间：2013-03-17T09:27:17.373
> 
> 标签：javascript, perl

我正在做一个需要通过 JSON 将 Perl 对象传递给 javascript 的项目。我在“中间”对象定义方面面临问题。

在 Perl 中，对象由散列表示，程序员不必在“中间”定义任何东西。创建属性后，所有中间对象都会自动创建为哈希引用。例如

```
$graph{chart}{yAxis}{title} = "Temperature Tracking"; 
```

但是，一旦将此对象传递给 Javascript，如果我想在“中间”对象中添加任何新属性，例如：

```
graph.chart.xAxis.title = "Time Sequence"; 
```

我会有一个“未定义的 graph.chart.xAxis”错误。与 Perl 不同，如果我们简单地为它分配一个属性，Javascript 不会自动创建对象。

目前我必须使用以下解决方案：

```
if (!graph.chart.xAxis) {
  graph.chart.xAxis = {};
  graph.chart.xAxis.title = "Time Sequence";
} 
```

不幸的是，在我们的项目中，从 Perl 传递的对象是非常动态的，还有很多 Javascript 可能不知道的其他对象。上述方式使 JS 代码非常冗长且“看起来很丑”。有没有更好的解决方案可以让 Javascript 表现得像 Perl，这意味着我不必手动创建中间对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:42:56.097

我不确定这是否符合您的要求，但创建丢失对象的简单函数可能如下所示：

```
function insertNode(obj, node, value) {
    var segments = node.split('.');
    var key = segments.pop();
    var ref = obj;

    while (segments.length > 0) {
        var segment = segments.shift();
        if (typeof ref[segment] != 'object') {
            ref[segment] = {};
        }
        ref = ref[segment];
    }

    ref[key] = value;
};

var x = {};
insertNode(x, 'foo.bar.baz', 'hello world');
alert(x.foo.bar.baz); // "hello world" 
```

演示：http: [//jsfiddle.net/sNywt/1/](http://jsfiddle.net/sNywt/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T09:48:23.030

您可能对名为[steeltoe的库感兴趣](https://github.com/jclem/steeltoe)

```
steelToe(graph).set('chart.xAxis.title', 'Time Sequence'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T09:49:07.560

不确定，如果它适合您的情况，但您可以检查属性是否存在并在不存在时创建它，例如：

```
function use_or_create(obj, prop) {
   return (obj.hasOwnProperty(prop))  ? true : (obj[prop] = {});
}
var graph.chart = {}; //your object
//function call to check if property exist before trying to use it
use_or_create(graph.chart, 'xAxis'); //check if xAxis exists and creates one if doesnot
graph.char.xAxis.title = "tested"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T09:57:49.010

也许这个`Object`扩展会做：

```
Object.prototype.val = function(prop,val){
  prop = /\./i.test(prop) ? prop.split('.') : prop;
  if (prop.constructor === Array){
      var objnow = this, pr;
      while (pr = prop.shift()){
        if (!objnow[pr]){
            objnow[pr] = {};
        }
        if (!prop.length) {
            objnow[pr] = val;
        }
        objnow = objnow[pr];
      }
      for (var l in objnow){
          this[l] = objnow[l];
      }
  } else {
      this[prop] = val;
  }
}
// usage
var myO = {};
myO.val('a.b.c',3);        //=> myO.a.b.c = 3
myO.val('someprop',3);     //=> myO.someprop = 3
myO.val('a.b.someprop',5); //=> myO.a.b.someprop = 3 
```

# java - 找不到 JDBC Derby 驱动程序

> ID：15459265
> 
> 赞同：13
> 
> 时间：2013-03-17T09:27:50.260
> 
> 标签：java, sql, database, jdbc

我遵循了 JDBC 教程：[http](http://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html) ://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html ，并成功地构建和创建了我自己的 JDBC 数据库，没有大惊小怪。但是现在当尝试从 java 应用程序连接到数据库时，我收到了异常：

> java.sql.SQLException: 找不到适合 jdbc:derby: *db 目录的驱动程序*

然后在尝试使用以下方法手动指定 JDBC 驱动程序时：

```
Class.forName("org.apache.derby.jdbc.EmbeddedDriver"); 
```

我收到以下异常错误：

> java.lang.ClassNotFoundException: org.apache.derby.jdbc.EmbeddedDriver

我很肯定该驱动程序在加载时应该没有问题，因为这是教程中指定的驱动程序，并且使用该驱动程序创建数据库没有问题。我已经尝试在连接语句的末尾添加属性“;create=true”以尝试创建一个全新的数据库，但我仍然收到相同的异常错误。

请在下面查看我的应用程序代码。任何帮助都会很棒:)。

```
package com.ddg;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class SQLConnect
{
    Connection Conn = null;
    String URL;
    String Username;
    String Password;

    public SQLConnect()
    {
        try
        {
            Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
        }
        catch (ClassNotFoundException e)
        {
            System.out.println(e.toString());
        }
        URL = "jdbc:derby:*directory name*";

        System.out.println("Created SQL Connect");
    }

    public void CreateConnection()
    {
        try
        {
            Conn = DriverManager.getConnection(URL);
            System.out.println("Successfully Connected");
        }
        catch (SQLException e)
        {
            System.out.println(e.toString());
        }
    }

    public void CloseConnection()
    {
        try
        {
            this.Conn.close();
            System.out.println("Connection successfully closed");
        }
        catch (SQLException e)
        {
            System.out.println(e.toString());
        }
    }

    public static void main(String args[])
    {
        SQLConnect sql = new SQLConnect();
        sql.CreateConnection();
        sql.CloseConnection();
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T09:41:51.383

> java.sql.SQLException：找不到适合 jdbc:derby:db 目录的驱动程序

因此，您的错误可能是由以下原因引起的：

驱动程序未正确加载或您`URL`的格式错误。所以首先你需要确保你`*.jar`在类路径中。看看这个。

还尝试将您的更改`URL`为：

```
jdbc:derby://<path>/<databasename>;create=true 
```

`create=true`将确保如果不存在 db 将被创建。

## 更新：

还请查看此标题：[SQLException: 找不到适合 jdbc:derby://localhost:1527 的驱动程序](https://stackoverflow.com/questions/3816015/sqlexception-no-suitable-driver-found-for-jdbcderby-localhost1527)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-19T07:59:45.493

如果您遇到此类错误

```
java.lang.ClassNotFoundException: org.apache.derby.jdbc.ClientDriver 
```

并且您正在使用，`netbeans`那么您必须按照以下步骤操作：

1.  右键单击库
2.  选择添加库选项并从库列表中选择**“Java DB Driver”**

![在此处输入图像描述](../Images/abae777138cce03dd2561b55cedba6b0.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-12T10:50:05.443

Java JDK 两者都带有

```
org.apache.derby.jdbc.EmbeddedDriver
org.apache.derby.jdbc.ClientDriver 
```

在 Eclipse 中，将以下 jars 添加到使用的 JRE(JDK) 或显式添加到您的项目中。

```
[JDK]db/lib/derby.jar (EmbeddedDriver)
[JDK]db/lib/derbyclient.jar (ClientDriver) 
```

对于 runtine，您需要使适当的 jar 可用于您的 java 应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T09:48:46.717

您说您已按照教程进行操作。在本教程中，您必须安装 JDBC 驱动程序。

> 安装 JDBC 驱动程序通常包括将驱动程序复制到您的计算机，然后将其位置添加到您的类路径中。

安装驱动程序后运行

```
java.lang.ClassNotFoundException: org.apache.derby.jdbc.EmbeddedDriver 
```

这只有在你弄乱了正确的潜水员时才有可能。

你用过

```
org.apache.derby.jdbc.EmbeddedDriver 
```

加载驱动程序

但应该使用

```
org.apache.derby.jdbc.ClientDriver 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-24T16:13:43.833

[有关详细信息，请参阅https://db.apache.org/derby/papers/DerbyTut/install_software.html#derby_configure](https://db.apache.org/derby/papers/DerbyTut/install_software.html#derby_configure)上的“设置 DERBY_INSTALL”和“配置嵌入式 Derby”部分。

Derby 是 JavaSE 安装的一部分，我设置了环境变量`DERBY_HOME`，而不是`DERBY_INSTALL`在链接中显示。

```
C:\> set DERBY_HOME=c:\Program Files\Java\jdk1.8.0_60\db
C:\> set CLASSPATH=%DERBY_INSTALL%\lib\derby.jar;%DERBY_INSTALL%\lib\derbytools.jar;.
C:\> cd %DERBY_INSTALL%\bin
c:\Program Files\Java\jdk1.8.0_60\db\bin> setEmbeddedCP.bat 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-14T16:08:00.537

我在使用**ClientDriver**时得到了**java.lang.ClassNotFoundException**。我使用了最新的驱动程序二进制文件，这是错误的。

 **当时，最新的驱动程序二进制文件是 10.15.1.3，就在这里：[Apache Site](https://db.apache.org/derby/derby_downloads.html)

我在 Java 8 上，我使用 Hibernate 5.4.2.Final。然而，驱动程序是针对 Java 9 编译的！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-30T21:27:14.357

我已经将任何需要的 jdbc 驱动程序放在例如 jre\lib\ext 目录中。在我的系统上是： X:\Java\jre1.8.0_181\lib\ext 希望有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-04T08:26:52.770

我最近发现，如果您使用`jlink`创建运行时，您可能需要包含额外的 jdk 模块以允许驱动程序实例化。

就我而言，我需要在图像中包含`java.naming`和`java.management`模块。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-05T21:34:43.643

所以我遇到了这个错误，解决这个问题是一项非常令人恼火和忙碌的任务。但最后，我设法找到了一个完美的视频，让我从一开始就安装了 derby，并完美地指导了我如何安装它。但是，视频之后还有一步。

如果您已经设置了 JavaFX 包并且能够正常运行程序，但面临
“java.sql.SQLException：没有为 jdbc:derby://localhost:1527/DBNAME;create=true”问题找到合适的驱动程序，请观看此视频尝试使用数据库运行时。

[链接到教程](https://www.youtube.com/watch?v=OKiBsWbgrMw)

现在设置完成后，您现在将能够启动/停止数据库（通过服务选项卡）并能够与数据库连接。但是在尝试编辑数据库时问题仍然存在。

***要纠正此问题，请按照以下步骤操作 ->***

右击项目 **--->** 属性 **--->** 库 **--->** 点击类路径中的'+' **--->** 添加jar/文件夹 **--->**进入derby里面的lib文件夹并选择derbyclient.jar

**版本**

JAVA - 17.0.1，Netbeans - 12.6

希望它有所帮助，谢谢:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-29T00:06:00.267

这似乎是一个古老的问题，并导致我和该线程中的其他人感到非常沮丧。尽管在 Eclipse IDE 测试工具中成功运行了测试，但如果通过网络连接调用，应用程序将无法加载嵌入式驱动程序。

几乎没有证据，我将建议问题出在 Derby 以及它搜索`classpath`驱动程序的方式和延迟导致并发问题，因为它在其工作区之外搜索时无法及时找到驱动程序。`SharedLibraries`我已经多次重复这个测试，只有在程序的工作区中创建一个项目，然后将这个共享库添加到`libraries` `classpath`屏幕截图中，才能实现一致性。

[![在此处输入图像描述](../Images/badb3ae6111d298ca4642c695e675ba1.png)](https://i.stack.imgur.com/BA0Ed.jpg)

您可以使用`Project->Properties->Java Build Path->Libraries`. 这种方法的唯一缺点是您不知道库的来源及其版本，但是如果这是一个问题，只需将版本号添加到库文件即可克服这一问题。**

# .net - 是否有任何 .NET 测试工具可以更轻松地查找线程问题？

> ID：15459266
> 
> 赞同：2
> 
> 时间：2013-03-17T09:27:50.633
> 
> 标签：.net, multithreading, debugging, testing, concurrency

我想到的是，当我运行（单元或组件或集成或系统）测试时，它会向每个线程注入随机睡眠，以便更容易找到竞争条件。

.NET 是否存在类似的东西？

*更新：*我看过“CHESS”，但我们需要一些支持 Visual Studio 2012 的东西（尽管我们还没有使用 .NET 4.5）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:30:11.453

这是一篇有趣的[文章](http://msdn.microsoft.com/en-us/magazine/cc546569.aspx)，可以为您的查询提供一些帮助。

> CHESS 由 Microsoft Research 创建，CHESS 是模型检查和动态分析的新颖组合（请参阅 go.microsoft.com/fwlink/?LinkId=116523）。它通过系统地探索线程调度和交错来检测并发错误。它能够发现竞争条件、死锁、挂起、活锁和数据损坏问题。为了帮助调试，它还提供了完全可重复的执行。像大多数模型检查一样，系统探索提供了全面的覆盖。作为动态分析工具，CHESS 在专门的调度程序上重复运行定期单元测试。在每次重复时，它都会选择不同的调度顺序。作为模型检查器，它控制能够创建特定线程交错的专用调度程序。为了控制状态空间爆炸，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:32:30.260

Microsoft Research 有一个名为[CHESS](http://research.microsoft.com/en-us/projects/chess/)的项目：

> CHESS 是一种用于在并发程序中查找和重现 Heisenbugs 的工具。CHESS 反复运行并发测试，确保每次运行都采用不同的交错。如果交错导致错误，CHESS 可以重现交错以改进调试。CHESS 可用于托管程序和本机程序。

请注意，通常我认为这些工具被称为“模糊测试工具”（用于“模糊测试”）。

就其价值而言，使用 .NET Framework 并不重要。任何对进程中的线程进行模糊测试的工具都应该这样做。

这使您可以查看并非专门为 CLR 环境量身定制的其他工具。[这篇文章](http://visualstudiomagazine.com/blogs/desmond-file/2009/11/microsoft-cuzz-parallel-testing.aspx)提到[了 Cuzz](http://research.microsoft.com/en-us/projects/cuzz/)，尽管它似乎尚未发布。

您可能也对[这个问题及其答案](https://stackoverflow.com/questions/12159/how-should-i-unit-test-threaded-code)感兴趣。

# jquery - 使用 jquery 应用类样式，但并非所有样式都在应用

> ID：15459268
> 
> 赞同：0
> 
> 时间：2013-03-17T09:28:09.077
> 
> 标签：jquery, html, css

我正在尝试使用 jquery 应用 CSS 类样式的一些初学者操作。我正在设置两个类属性，颜色和字体大小。两者都在 .zebra 类下定义，但仅应用颜色。

jQuery脚本：

```
$(document).ready(function() {
alert('Script is tied in!');
$('#lion').addClass('zebra');
}); 
```

CSS

```
p {
color: #CC34H8;
font-size: 100px;
}

.zebra {
color: #2FB51D;
font-size: 12px;
} 
```

EJS，此时仍然基本上是直接的 HTML 标记

```
<body>
hello hello
<p> hi </p>
<div id="lion">
    <p> hey hey </p>
</div>
</body> 
```

CSS中的颜色属性正在改变，但字体没有改变（仍然显示为原始`<p>`定义样式的100px。为什么只有一个属性受到影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:32:50.947

您正在将类设置为，`#lion`但该`font-size`属性被`p`标签覆盖。

以下 jQuery 行将为您工作：

```
$('#lion p').addClass('zebra'); 
```

[小提琴](http://jsfiddle.net/Yu4ts/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:35:43.703

您的 JS 代码是正确的，除了一件事。

您正在将类`.zebra`应用于`div.lion`标签`p`本身，因此标签内的文本从父级`p`获取，从它的 css 获取。`color``div``font-size`

这就是为什么`color`只改变了。

将您的代码更改为：

```
$('#lion p').addClass('zebra');//notice " p". 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T09:37:49.720

你没有改变`class`标签`<p>`，它仍然有`font-size:100px`.

```
$(document).ready(function() {
    $('#lion p').addClass('zebra');
}); 
```

# mysql - C代码无法在cron中运行选择查询

> ID：15459278
> 
> 赞同：-1
> 
> 时间：2013-03-17T09:29:26.857
> 
> 标签：mysql, c, linux, shell, cron

我们有一个如下的 C 代码。这就是我们编译它的方式 gcc -o get1Receive $(mysql_config --cflags) get1ReceiveSource.c $(mysql_config --libs) -lrt。当我们从终端运行时，我工作得很好。然后我们尝试使用 cron 作业运行它，当我们查看这两行时 printf("\nNumf of fields : %d",num_fields); 和 printf("\nNof of row : %lu",mysql_num_rows(localRes1));. 第一行显示 4 作为值，第二行从不给出任何值，始终为 0。我们采用了相同的选择查询并在 db 上运行并确认有值，但在通过 cron 作业运行时它没有提供。脚本也被赋予了可执行权限。

```
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>
#include <stdio.h>
#include <time.h>
#include <signal.h>
#include <mysql.h>
#include <string.h>

int flag = 0;

int main () {
                  MYSQL *localConn;
                  MYSQL_RES *localRes1;
                  MYSQL_ROW localRow1;
                  char *server = "localhost";
                  char *user = "user1";
                  char *password = "*****"; 
                  char *database = "test1";
                  localConn = mysql_init(NULL);
                  if (!mysql_real_connect(localConn, server,
                         user, password, database, 0, NULL, 0)) {
                      fprintf(stderr, "%s\n", mysql_error(localConn));
                      exit(1);
                  }

            struct timeval tv;
          char queryBuf1[500],queryBuf2[500];
          char buff1[20] = {0};
          char buff2[20] = {0};
          gettimeofday (&tv, NULL);
          //fprintf (stderr, "[%d.%06d] Flag set to 1 on ", tv.tv_sec, tv.tv_usec);
          //tv.tv_sec -= 5;
          strftime(buff1, 20, "%Y-%m-%d %H:%M:00", localtime(&tv.tv_sec));
          strftime(buff2, 20, "%Y-%m-%d %H:%M:59", localtime(&tv.tv_sec));
          printf("\nTime from %s", buff1);
          printf("\nTime to %s", buff2);

          sprintf(queryBuf1,"SELECT ipDest, macDest,portDest, sum(totalBits) FROM dataReceive WHERE timeStampID between '%s' And '%s'  GROUP BY ipDest, macDest, portDest ",buff1,buff2);
                printf("\nQuery receive %s",queryBuf1);

                if(mysql_query(localConn, queryBuf1))
                {
                    printf("Error in first query of select %s\n",mysql_error(localConn));
                    exit(1);
                }

                localRes1 = mysql_store_result(localConn);
                int num_fields = mysql_num_fields(localRes1);

                printf("\nNumf of fields : %d",num_fields);
                printf("\nNof of row : %lu",mysql_num_rows(localRes1));

                while((localRow1 = mysql_fetch_row(localRes1)) !=NULL)
                {
                  int totalBits = atoi(localRow1[3]);

                  printf("totalBits %d\n", totalBits);
                  printf("RECEIVE %s,%s\n", localRow1[0], localRow1[1]);
                  if(totalBits>5000)
                  {
                    sprintf(queryBuf1,"INSERT INTO alertReceive1 (timeStampID,ipDest, macDest, portDest, totalBits)VALUES ('%s','%s','%s','%s',%s)",buff1, localRow1[0],localRow1[1],localRow1[2],localRow1[3]);
                    printf("Query 1 before executing %s\n",queryBuf1);
                    if (mysql_real_query(localConn,queryBuf1,strlen(queryBuf1))) {
                   printf("Error in first insert %s\n",mysql_error(localConn));
                   fprintf(stderr, "%s\n", mysql_error(localConn));
                   exit(1);
                   }
                    //printf("Query 1 after executing %s\n",queryBuf1);*/
                   }    
                } 

          mysql_free_result(localRes1); 
          mysql_close(localConn);

} 
```

我们已经运行了这个命令文件 get1Receive 并导致

```
file get1Receive
get1Receive.c: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.18, not stripped 
```

我们还运行了这个命令 * * * * * set > /tmp/myvars，下面是结果。

```
GROUPS=()
HOME=/root
HOSTNAME=capture
HOSTTYPE=x86_64
IFS='
'
LOGNAME=root
MACHTYPE=x86_64-redhat-linux-gnu
OPTERR=1
OPTIND=1
OSTYPE=linux-gnu
PATH=/usr/bin:/bin
POSIXLY_CORRECT=y
PPID=11086
PS4='+ '
PWD=/root
SHELL=/bin/sh
SHELLOPTS=braceexpand:hashall:interactive-comments:posix
SHLVL=1
TERM=dumb
UID=0
USER=root
_=/bin/sh 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T09:44:50.003

通用提示（另请参阅我的评论）：

*   花时间**阅读文档**，尤其是[Advanced Linux Programming](http://advancedlinuxprogramming.com/)、[手册页](http://man7.org/linux/man-pages/index.html)（您也可以通过在终端上键入`man man`或`man 2 intro`等...）和[MySQL 5.5 参考](http://dev.mysql.com/doc/refman/5.5/en/index.html)。一定要明白什么`GIYF`或`STFW`意味着什么。

*   将 放在格式字符串`\n`的末尾，而不是开头。`printf`

*   此外，`fflush(NULL)`如果合适，特别是在任何 MySQL 查询之前调用，例如在调用之前和循环`mysql_real_query`结束时调用`while`

*   `gcc -Wall -g`在您的终端中使用例如以下命令进行编译

    ```
    gcc -Wall -g $(mysql_config --cflags) get1ReceiveSource.c \
               $(mysql_config --libs) -lrt -o get1Receive 
    ```

*   改进代码直到没有给出警告。（您甚至可能想要拥有`-Wall -Wextra`而不仅仅是`-Wall`）。不要忘记使用版本控制系统，例如`git`.

*   使用`gdb`调试器（您需要[学习](http://sourceware.org/gdb/download/onlinedocs/gdb/index.html)如何使用它）。

    ^(（仅当您确定代码中没有更多错误时才替换`-g`为`-O2 -g`编译命令中的错误）)

*   使用`sizeof`；大多数出现的`20`应该是 a `sizeof`，或者至少使用`#define SMALLSIZE 20`然后才`SMALLSIZE`不是`20`。

*   `snprintf`不使用`sprintf`（并测试它的结果大小，它应该适合！）。[snprintf(3)](http://man7.org/linux/man-pages/man3/snprintf.3.html)需要一个额外的大小参数，例如

    ```
     if (snprintf(querybuf, sizeof querybuf,
                  "SELECT ipDest, macDest, portDest, sum(totalBits)"
                  " FROM dataReceive"
                  " WHERE timeStampID between '%s' And '%s' "
                  " GROUP BY ipDest, macDest, portDest ",
                  buff1, buff2) >= (int) (sizeof querybuf))
         abort(); 
    ```

*   考虑将[syslog(3)](http://man7.org/linux/man-pages/man3/syslog.3.html)与 一起使用`openlog`，并查看您的系统日志。

我不明白如何`queryBuf1`声明。（您发布的代码可能甚至无法编译！）。您可能想要类似`char querybuf[512];`...

`mysql_real_query`最重要的是，在`mysql_fetch_row`循环内调用是**错误**的：您应该在发出下一个 MySQL 查询之前获取所有行。阅读更多关于[MySQL C API](http://dev.mysql.com/doc/refman/5.5/en/c.html)的信息。

`localRes1`你也忘了测试`mysql_store_result(localConn)`;的结果 以某种方式（也许通过`syslog`）显示`mysql_error(localConn)`时间`localRes1`是`NULL`......

# java - 如何在消息框中显示变量的值？

> ID：15459284
> 
> 赞同：0
> 
> 时间：2013-03-17T09:30:17.930
> 
> 标签：java

我想显示“名字的数量”。假设如果我输入两个名字，它应该显示“”你输入了 2 个名字。

导入 javax.swing.JOptionPane；

```
public class MyName {
public static void main (String args [ ])

{
    int option;
    String userName;

    do
    {
        option = JOptionPane.showConfirmDialog(null,"Want to enter another Name?");

    } while (option == JOptionPane.YES_OPTION);

    JOptionPane.showMessageDialog(null, "you have entered" + (number of names) + "names");

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:31:42.003

要计算迭代次数，您可以这样做：

```
int i=0; // create a counter
do {
    option = JOptionPane.showConfirmDialog(null,"Want to enter another useraName?");
    i++; // increment the counter
} while (option == JOptionPane.YES_OPTION);
JOptionPane.showMessageDialog(null, "you have entered " + i + " names"); // use it 
```

但通常，你不会有这个问题，因为你应该存储名称：

```
List<String> names = new ArrayList<>();
do {
     ...
     names.add(enteredName);
while ... 
```

循环之后，名称的数量为`names.size()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:32:12.450

通过使用变量？

```
import javax.swing.JOptionPane;

public class MyName {
public static void main (String args [ ])

{
    int option;
    String userName;

    int number = 0;
    do
    {
        number++;
        option = JOptionPane.showConfirmDialog(null,"Want to enter another useraName?");

    } while (option == JOptionPane.YES_OPTION);

    JOptionPane.showMessageDialog(null, "you have entered" + (number of names) + "number");

}
} 
```

# c++ - 编译错误：重载运算符不匹配

> ID：15459286
> 
> 赞同：1
> 
> 时间：2013-03-17T09:31:02.177
> 
> 标签：c++, gcc, compiler-errors

这是我的代码的一部分，当我编译它时，它说 1: no match for operator = 2: no known conversion for argument 1 from 'Matrix' 到 'Matrix&' 但是如果我删除 operator + 部分它在哪里工作问题？！:|

gcc 错误：“'z = Matrix::operator+(Matrix&)((* & y))' 中的 'operator=' 不匹配' 候选是：atrix& Matrix::operator=(Matrix&) 参数 1 的未知转换来自 '矩阵'到'矩阵&'"

```
class Matrix {
  //friend list:
  friend istream& operator>>(istream& in, Matrix& m);
  friend ostream& operator<<(ostream& in, Matrix& m);

  int** a;    //2D array pointer
  int R, C;   //num of rows and columns
  static int s1, s2, s3, s4, s5;
 public:
  Matrix();
  Matrix(const Matrix&);
  ~Matrix();
  static void log();

  Matrix operator+ (Matrix &M){
    if( R == M.R && C == M.C ){
        s4++;
        Matrix temp;
        temp.R = R;
        temp.C = C;         temp.a = new int*[R];
        for(int i=0; i<R; i++)
            temp.a[i] = new int[C];

        for(int i=0; i<R; i++)
            for(int j=0; j<C; j++)
                temp.a[i][j] = a[i][j] + M.a[i][j];

        return temp;
    }   
}

  Matrix& operator = (Matrix& M){
s5++;
if(a != NULL)
{
    for(int i=0; i<R; i++)
        delete [] a[i];
    delete a;
    a = NULL;
    R = 0;
    C = 0;
}
R = M.R;
C = M.C;
a = new int*[R];
for(int i=0; i<R; i++)
    a[i] = new int[C];

for(int i=0; i<R; i++)
    for(int j=0; j<C; j++)
        a[i][j] = M.a[i][j];    

return *this;
} 
```

};

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:05:50.730

```
Matrix operator+ (Matrix &M){
Matrix& operator= (Matrix &M){ 
```

他们都有同样的问题——参数类型应该是`const Matrix&`（就像在复制构造函数中一样）。否则，您无法将临时对象传递给操作员。

# opengl - 调用 glLoadIdentity 会表现出尴尬的行为

> ID：15459287
> 
> 赞同：0
> 
> 时间：2013-03-17T09:31:03.830
> 
> 标签：opengl, graphics, glut

我用c写了这段代码来绘制一个有太阳和行星的行星系统

```
glClear(GL_COLOR_BUFFER_BIT);
glColor3f(0.0,0.0,0.0);
glMatrixMode(GL_MODELVIEW_MATRIX);
glPushMatrix();
glutWireSphere(1.0, 20, 16);
glLoadIdentity();
glRotatef((GLfloat) year ,0.0,1.0,0.0);
glTranslatef(2.0, 0.0, 0.0);
glRotatef((GLfloat) day, 0.0, 1.0, 0.0);
glutWireSphere(0.2, 10, 8);
glPopMatrix();
glutSwapBuffers(); 
```

但是当我编译并运行代码时，第二个球体不在视图中。在我增加 y 的值后，当它在中心球体后面时，它会出现一半的旋转，然后再次离开视图，球体的大小也比预期的要大。如果我注释掉对 glLoadIdentity() 的调用，一切正常。据我所知，glLoadIdentity() 使用单位矩阵加载当前 Matrix(ModelView_Matrix)，以便所有平移和旋转的效果都被反转，但是为什么在这种情况下，当它被调用时绘制的对象在没有旋转时以不同的方式还是在调用之前正在执行转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:13:40.253

我怀疑您的问题与您使用`glPushMatrix`和`glPopMatrix`结合的方式有关`glLoadIdentity`：

假设您的模型视图堆栈上有一些矩阵**A。**现在您使用`glPushMatrix`，本质上是保存**A**以便以后恢复它。在 push-pop 块中，您告诉 GLUT 使用前面提到的模型视图矩阵**A**绘制一个球体，它有义务这样做。

如果您现在调用，则**A**之前的`glLoadIdentity`任何内容都将消失，直到您调用，这将恢复**A**的先前状态。**`glPopMatrix`**

 ****所以简而言之，转换调用之后`glLoadIdentity`是基于单位矩阵而不是之前的矩阵状态`glPushMatrix`。

看到你想做的是画一个太阳系。最好执行以下操作：

```
glPushMatrix();
    /* Transformations positioning the sun */
    /* Draw the sun */
    glPushMatrix();
        /* Transformations for getting from the sun to the planet */
        /* Draw the planet */
    glPopMatrix();
glPopMatrix(); 
```

顺便说一句，固定功能管道（glTranslate，glRotate，glPushMatrix，...）已经被弃用了很长一段时间（大约 10 年？），所以我建议使用更[现代的方法](http://www.arcsynthesis.org/gltut/)来选择 OpenGL 。

**编辑：**

在重新阅读问题时，另一件事引起了我的注意：

假设`year`指定行星绕太阳公转的位置，并`day`指定植物绕其自身极轴旋转的程度，则正确的转换顺序为：

1.  `day`绕 y 轴旋转
2.  翻译
3.  `year`绕 y 轴旋转

（现在，您正在以相反的方式进行操作，这可以解释您遇到的奇怪行为。另请参见[此处](http://www.glprogramming.com/red/chapter03.html#name2)。）

根据 JasonD 的评论，您的转换顺序一开始是正确的，但了解背景仍然没有什么坏处。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:39:20.880

我怀疑您在 ModelView 矩阵中*确实有其他转换。*如果它已经设置为身份，那么加载身份不会改变行为。

您提供的代码仅设置本地模型转换。没有应用投影或视图转换，因此这些必须在其他地方完成。也许在初始化时。

如果没有先前的视图转换，第一个球体将被绘制在与视图相同的位置 - 换句话说，相机将在球体内部。****

# c# - BeginTransaction 需要一个打开的连接。连接的当前状态是 Open, Executing

> ID：15459291
> 
> 赞同：0
> 
> 时间：2013-03-17T09:31:40.667
> 
> 标签：c#, .net, db2

当我运行以下代码时，我得到

> “BeginTransaction 需要一个打开的连接。连接的当前状态是打开，正在执行”

例外。

```
using (var con = new IBM.Data.DB2.DB2Connection(
                         "Server=localhost;Database=SAMPLE;UID=***;PWD=***;"))
{
    con.Open();
    var c = con.CreateCommand();
    c.CommandText = "select * from DB2TEST";
    using (var r = c.ExecuteReader())
    {
        r.Read();
        con.BeginTransaction();// The exception is thrown here!!!
    }
} 
```

我知道，如果我将 Begin 事务移到代码中的较早时间，它将起作用 - 但这并没有减少它。我需要迭代一个非常大的阅读器并根据需要打开和关闭事务。

我尝试了 ExecuteResultSet - 但得到了相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:39:50.820

发生这种情况是因为您尝试在连接具有打开的数据读取器时启动事务。

你有几个选择：

1）将您需要的所有数据读入内存，关闭阅读器，然后开始您的事务。

2）打开2个连接。使用一个用于读取和一个用于写入您的事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:50:21.960

您可以使用更新意图进行选择，这将为每一行创建一个 IU（意图更新）锁，并且您可以将其转换为 IX（意图独占），并且在该状态下您可以进行事务。如果您使用 SQLJ，那就更容易了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T12:41:40.750

经过大量调查后，我发现我应该使用“ExecutePageReader”，它是 SQL 中 ServerSideCursors 的 DB2 等价物。

因此，不要在选择时打开阅读器并开始交易。我获取 40 行，关闭阅读器，对事务做任何我想做的事情，然后使用“ExecutePageReader”来获取接下来的 40 行。

# mysql - 如何在 MySQL 中锁定行以供选择

> ID：15459293
> 
> 赞同：8
> 
> 时间：2013-03-17T09:32:07.577
> 
> 标签：mysql, locks

一个程序会从一个表中选择几条记录并更新每一行，而它可以执行多次，这将导致多个进程同时完成同一个任务。

如何防止两个不同的进程更新表中的同一行。也就是说，如何保证每个进程可以选择不同的记录呢？MySQL 中的行选择级别是否有任何锁？或者在这种情况下，有没有更好的方案来防止单行多次更新？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T09:40:31.320

您可以使用`SELECT FOR UPDATE`. 在您的事务中，开始选择您要“锁定”的行，如下所示：

```
 SELECT * from TABLE where id = 123 FOR UPDATE; 
```

如果两个不同的事务尝试同时执行此操作，MySQL 将使第二个事务等待，直到第一个事务提交。这样，您就可以确保第二个事务只在第一个事务完成后才查看该行。

# javascript - 递归地从 JSON 数组中删除元素

> ID：15459299
> 
> 赞同：1
> 
> 时间：2013-03-17T09:32:58.837
> 
> 标签：javascript, jquery, json

我有以下 json 数组：

```
{
"id": "1004482725",
"parent": 0,
"industry": "Akrotiri",
"industry_id": "root",
"name": "Comp",
"percentage": "0",
"report": "null",
"description": "",
"subsidiary": "3",
"children": [{
    "id": "1004482733",
    "parent": "1004482725",
    "industry": "Akrotiri",
    "industry_id": "industry9",
    "name": "Comp11",
    "percentage": "30",
    "report": "null",
    "description": "",
    "subsidiary": "1",
    "children": [{
        "id": "1004482734",
        "parent": "1004482733",
        "industry": "Akrotiri",
        "industry_id": "industry10",
        "name": "Comp110",
        "percentage": "30.00",
        "report": "null",
        "description": "",
        "subsidiary": "1",
        "children": [{
            "id": "aa02634",
            "parent": "1004482734",
            "industry": "",
            "industry_id": "0",
            "name": "Sef 4",
            "percentage": "4",
            "report": "null",
            "description": "",
            "subsidiary": "0",
            "children": []
        }]
    }, {
        "id": "1004482735",
        "parent": "1004482733",
        "industry": "Akrotiri",
        "industry_id": "industry11",
        "name": "Comp111",
        "percentage": "30.00",
        "report": "null",
        "description": "",
        "subsidiary": "1",
        "children": [{
            "id": "aa02635",
            "parent": "1004482735",
            "industry": "",
            "industry_id": "0",
            "name": "Sef 5",
            "percentage": "5",
            "report": "null",
            "description": "",
            "subsidiary": "0",
            "children": []
        }]
    }, {
        "id": "1004482736",
        "parent": "1004482733",
        "industry": "Akrotiri",
        "industry_id": "industry12",
        "name": "Comp112",
        "percentage": "30.00",
        "report": "null",
        "description": "",
        "subsidiary": "1",
        "children": [{
            "id": "1004482737",
            "parent": "1004482736",
            "industry": "Akrotiri",
            "industry_id": "industry13",
            "name": "Comp1120",
            "percentage": "100.00",
            "report": "null",
            "description": "",
            "subsidiary": "2",
            "children": [{
                "id": "1004482738",
                "parent": "1004482737",
                "industry": "Akrotiri",
                "industry_id": "industry14",
                "name": "Comp11200",
                "percentage": "100.00",
                "report": "null",
                "description": "",
                "subsidiary": "1",
                "children": [{
                    "id": "1004482739",
                    "parent": "1004482738",
                    "industry": "Akrotiri",
                    "industry_id": "industry15",
                    "name": "Comp112000",
                    "percentage": "100.00",
                    "report": "null",
                    "description": "",
                    "subsidiary": "1",
                    "children": [{
                        "id": "aa02636",
                        "parent": "1004482739",
                        "industry": "",
                        "industry_id": "0",
                        "name": "Sef 6",
                        "percentage": "6",
                        "report": "null",
                        "description": "",
                        "subsidiary": "0",
                        "children": []
                    }]
                }]
            }]
        }, {
            "id": "1004482740",
            "parent": "1004482736",
            "industry": "Akrotiri",
            "industry_id": "industry16",
            "name": "Comp1121",
            "percentage": "100.00",
            "report": "null",
            "description": "",
            "subsidiary": "1",
            "children": [{
                "id": "1004482741",
                "parent": "1004482740",
                "industry": "Akrotiri",
                "industry_id": "industry17",
                "name": "Comp11210",
                "percentage": "100.00",
                "report": "null",
                "description": "",
                "subsidiary": "1",
                "children": [{
                    "id": "aa02637",
                    "parent": "1004482741",
                    "industry": "",
                    "industry_id": "0",
                    "name": "Sef 7",
                    "percentage": "7",
                    "report": "null",
                    "description": "",
                    "subsidiary": "0",
                    "children": []
                }]
            }]
        }, {
            "id": "1004482742",
            "parent": "1004482736",
            "industry": "Akrotiri",
            "industry_id": "industry18",
            "name": "Comp1122",
            "percentage": "30.00",
            "report": "null",
            "description": "",
            "subsidiary": "2",
            "children": [{
                "id": "1004482743",
                "parent": "1004482742",
                "industry": "Akrotiri",
                "industry_id": "industry19",
                "name": "Comp11220",
                "percentage": "100.00",
                "report": "null",
                "description": "",
                "subsidiary": "1",
                "children": [{
                    "id": "aa02638",
                    "parent": "1004482743",
                    "industry": "",
                    "industry_id": "0",
                    "name": "Sef 8",
                    "percentage": "8",
                    "report": "null",
                    "description": "",
                    "subsidiary": "0",
                    "children": []
                }]
            }]
        }]
    }]
}, {
    "id": "1004482726",
    "parent": "1004482725",
    "industry": "Akrotiri",
    "industry_id": "industry2",
    "name": "Comp10",
    "percentage": "30",
    "report": "null",
    "description": "",
    "subsidiary": "1",
    "children": [{
        "id": "1004482732",
        "parent": "1004482726",
        "industry": "Akrotiri",
        "industry_id": "industry8",
        "name": "Comp102",
        "percentage": "30",
        "report": "null",
        "description": "",
        "subsidiary": "1",
        "children": [{
            "id": "aa02633",
            "parent": "1004482732",
            "industry": "",
            "industry_id": "0",
            "name": "Sef 3",
            "percentage": "3",
            "report": "null",
            "description": "",
            "subsidiary": "0",
            "children": []
        }]
    }, {
        "id": "1004482728",
        "parent": "1004482726",
        "industry": "Akrotiri",
        "industry_id": "industry4",
        "name": "Comp101",
        "percentage": "30",
        "report": "null",
        "description": "",
        "subsidiary": "1",
        "children": [{
            "id": "1004482729",
            "parent": "1004482728",
            "industry": "Akrotiri",
            "industry_id": "industry5",
            "name": "Comp1010",
            "percentage": "100.00",
            "report": "null",
            "description": "",
            "subsidiary": "1",
            "children": [{
                "id": "1004482730",
                "parent": "1004482729",
                "industry": "Akrotiri",
                "industry_id": "industry6",
                "name": "Comp10100",
                "percentage": "100.00",
                "report": "null",
                "description": "",
                "subsidiary": "1",
                "children": [{
                    "id": "1004482731",
                    "parent": "1004482730",
                    "industry": "Akrotiri",
                    "industry_id": "industry7",
                    "name": "Comp101000",
                    "percentage": "100.00",
                    "report": "null",
                    "description": "",
                    "subsidiary": "1",
                    "children": [{
                        "id": "aa02632",
                        "parent": "1004482731",
                        "industry": "",
                        "industry_id": "0",
                        "name": "Sef 2",
                        "percentage": "2",
                        "report": "null",
                        "description": "",
                        "subsidiary": "0",
                        "children": []
                    }]
                }]
            }]
        }]
    }, {
        "id": "1004482727",
        "parent": "1004482726",
        "industry": "Akrotiri",
        "industry_id": "industry3",
        "name": "Comp100",
        "percentage": "30",
        "report": "null",
        "description": "",
        "subsidiary": "1",
        "children": [{
            "id": "aa02631",
            "parent": "1004482727",
            "industry": "",
            "industry_id": "0",
            "name": "Sef1",
            "percentage": "1",
            "report": "null",
            "description": "",
            "subsidiary": "0",
            "children": []
        }]
    }]
}, {
    "id": "1004482744",
    "parent": "1004482725",
    "industry": "Akrotiri",
    "industry_id": "industry20",
    "name": "Comp12",
    "percentage": "30",
    "report": "null",
    "description": "",
    "subsidiary": "1",
    "children": [{
        "id": "1004482745",
        "parent": "1004482744",
        "industry": "Akrotiri",
        "industry_id": "industry21",
        "name": "Comp120",
        "percentage": "30.00",
        "report": "null",
        "description": "",
        "subsidiary": "1",
        "children": [{
            "id": "",
            "parent": "",
            "industry": "",
            "industry_id": "",
            "name": "",
            "percentage": "",
            "report": "",
            "description": "",
            "subsidiary": "",
            "children": ""
        }, {
            "id": "1004482748",
            "parent": "1004482745",
            "industry": "Akrotiri",
            "industry_id": "industry24",
            "name": "Comp1210",
            "percentage": "50.00",
            "report": "null",
            "description": "",
            "subsidiary": "2",
            "children": [{
                "id": "1004482749",
                "parent": "1004482748",
                "industry": "Akrotiri",
                "industry_id": "industry25",
                "name": "Comp12100",
                "percentage": "100.00",
                "report": "null",
                "description": "",
                "subsidiary": "1",
                "children": [{
                    "id": "1004482750",
                    "parent": "1004482749",
                    "industry": "Akrotiri",
                    "industry_id": "industry26",
                    "name": "Comp121000",
                    "percentage": "100.00",
                    "report": "null",
                    "description": "",
                    "subsidiary": "1",
                    "children": [{
                        "id": "aa02639",
                        "parent": "1004482750",
                        "industry": "",
                        "industry_id": "0",
                        "name": "Sef 9",
                        "percentage": "9",
                        "report": "null",
                        "description": "",
                        "subsidiary": "0",
                        "children": []
                    }]
                }]
            }]
        }, {
            "id": "",
            "parent": "",
            "industry": "",
            "industry_id": "",
            "name": "",
            "percentage": "",
            "report": "",
            "description": "",
            "subsidiary": "",
            "children": ""
        }]
    }, {
        "id": "1004482746",
        "parent": "1004482744",
        "industry": "Akrotiri",
        "industry_id": "industry22",
        "name": "Comp121",
        "percentage": "30.00",
        "report": "null",
        "description": "",
        "subsidiary": "1",
        "children": [{
            "id": "",
            "parent": "",
            "industry": "",
            "industry_id": "",
            "name": "",
            "percentage": "",
            "report": "",
            "description": "",
            "subsidiary": "",
            "children": ""
        }]
    }, {
        "id": "1004482747",
        "parent": "1004482744",
        "industry": "Akrotiri",
        "industry_id": "industry23",
        "name": "Comp122",
        "percentage": "30.00",
        "report": "null",
        "description": "",
        "subsidiary": "1",
        "children": [{
            "id": "aa02640",
            "parent": "1004482747",
            "industry": "",
            "industry_id": "0",
            "name": "Sef 10",
            "percentage": "10",
            "report": "null",
            "description": "",
            "subsidiary": "0",
            "children": []
        }]
    }]
}]
} 
```

在这个例子中，我有一些看起来像这样的元素：

```
 "children": [{
            "id": "",
            "parent": "",
            "industry": "",
            "industry_id": "",
            "name": "",
            "percentage": "",
            "report": "",
            "description": "",
            "subsidiary": "",
            "children": ""
        } 
```

我想要实现的是从原始数组中消除这个“孩子”。到目前为止，我已经尝试过这个功能，但它不能按我想要的方式工作：

```
 function deleteEmpty(data){
    if (data.children.length)
    {  

        nr = data.children.length;
        for (i=0;i<nr;i++)
        {
           // console.log(data.children[i]);

            if (data.children[i]["id"] == ""){
                console.log(data.children[i]);
                delete data.children[i];
            }                  
                this.deleteEmpty(data.children[i]);

        }
    }
    return data;
} 
```

我也在这里创建了一个 jsfiddle：http: [//jsfiddle.net/fP7NS/2/](http://jsfiddle.net/fP7NS/2/) 请帮助我或给我一些提示，说明我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:47:18.947

首先（如有必要）将您的 JSON 字符串转换为对象。您的`children`属性有时是一个数组，有时是一个空数组，有时是一个空字符串。这使得逻辑有点尴尬。我建议您编写一个函数来测试特定孩子是否为空。然后你可以这样写你的主循环：

```
function isEmpty(node) {
    // logic for testing that a node is empty
}
function deleteEmptyChildren(node) {
    // assumes node is not empty
    if (Array.isArray(node.children)) {
        node.children = node.children.filter(
            function(child) {
                if (isEmpty(child)) {
                    return false;
                } else {
                    deleteEmptyChildren(child);
                    return true;
                }
            }
        );
    }
} 
```

# internet-explorer - windows phone 8 模拟器网络连接

> ID：15459304
> 
> 赞同：2
> 
> 时间：2013-03-17T09:33:53.183
> 
> 标签：internet-explorer, windows-8, connection, windows-phone-8

我使用的是win8手机模拟器，但它的Internet Explorer无法显示网页，显示没有连接到Internet。我从微软网站检查了很多并尝试过，我确定我启用了自动 DNS 服务器。我正在使用wifi连接。

看到很多人也有这个问题，请问有大神解决了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:20:48.960

我遇到了同样的问题，我在我的模拟器图像上配置了 Windows Phone 模拟器外部接口。这是我所做的：

*   打开你的 Hyper-V 管理器
*   右键单击模拟器图像设置
*   点击Windows Phone Emulator External Interface
*   将虚拟交换机绑定到您的物理网络设备（在我的 mbpro 上是 Intel Pro）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-07T11:01:02.353

在我的例子中，只配置了**Windows Phone Emulator Internal Switch**。
因此，我必须使用这些步骤添加外部开关：

1.  打开**Hyper-V 管理器**，然后在左窗格中单击您的计算机名称（在 Hyper-V 管理器下）。
2.  在**操作**（右侧）下，单击**虚拟交换机管理器。** 虚拟交换机管理器窗口将打开，显示所有已配置的虚拟交换机。
3.  确认您只有一个名为**Windows Phone Emulator Internal Switch**的交换机。其连接类型配置为 **内部网络**。保持原样。
4.  现在添加一个新的（外部）虚拟网络交换机：
    将 Connection type 设置为**External Network**，选择您的活动网络适配器并选中**Allow management operating system to share this network adapter**。
5.  保存更改并重新启动模拟器。

您可以[在此处](http://blogs.msdn.com/b/wsdevsol/archive/2013/10/01/why-can-t-the-windows-phone-emulator-go-online.aspx)找到更多详细信息。

# android - 在 ListView 顶部添加新项目不起作用。而是将项目添加到底部

> ID：15459305
> 
> 赞同：2
> 
> 时间：2013-03-17T09:34:13.630
> 
> 标签：android, android-listview, android-asynctask

我在将新项目添加到 a`ListView`以显示在`ListView`. 但是，当将新项目添加到 时`ListView`，我希望当前项目保持可见，并在其上方添加新项目。

为此，我从这里遵循了解决方案：[https](https://stackoverflow.com/a/3035521/450534) ://stackoverflow.com/a/3035521/450534当这也不起作用时，我开始进行一些实验。

*另外值得一提的是，我正在使用 Chris Banes 的 Pull to Refresh 库。*

现在奇怪的是，当我`paged`在最后一项下方添加数据时`ListView`，一切正常。但是我很困惑为什么新项目不会放在当前项目之上并保持当前位置。这是我到目前为止所做的（在 中`onPostExecute()`）：

```
// GET THE CURRENT LISTVIEW POSITION (USED TO MAINTAIN SCROLL POSITION)
int currentPosition = actualListView.getFirstVisiblePosition();
Log.e("POSITION", String.valueOf(currentPosition));

View v = actualListView.getChildAt(0);

int top = (v == null) ? 0 : v.getTop();
Log.e("TOP", String.valueOf(top));

/*****  APPEND NEW DATA TO THE ADAPTER AND THE LISTVIEW     *****/
// CAST THE ADAPTER (AGAIN)
adapter = new NewsFeedAdapter(getActivity(), arrFeeds);

// SET THE ADAPTER TO THE LISTVIEW
actualListView.setAdapter(adapter);

// SET THE SCROLL POSITION
actualListView.setSelectionFromTop(currentPosition, top);

lv.onRefreshComplete(); 
```

这是开始，`ListView`这是在顶部添加新项目后仍应看到的内容（在此上方）。我计划展示一个小布局，显示顶部有多少新提要。就像 Facebook 应用程序现在所做的那样。

![ListView 的开始](../Images/a4c5566f4b4c78124f7d0895ec3bfb57.png)

但是新项目被添加到底部`ListView`而不是现有项目上方的顶部。

![新项目被添加到 ListView 的底部](../Images/1da016c38cce19eaf2147e4ca86b9671.png)

我错过了什么明显的东西吗？如果您需要我添加更多代码，请告诉我，我会立即添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:44:46.280

另一种选择是将项目添加到用于填充适配器的 ArrayList 的 0 poisiton 处。

```
 your_array_list.add(int index, Object element) //Inserts the specified element at the specified position in this list. 
```

添加后，您可以调用 listAdapter 上的 notifyDataSetChanged()。

请确认它是否有效..

# c++ - std::aligned_storage 的奇怪行为

> ID：15459316
> 
> 赞同：1
> 
> 时间：2013-03-17T09:35:47.520
> 
> 标签：c++, c++11, visual-studio-2012, alignment

```
_declspec(align(32)) struct St{ 
    int foo; 
};
typedef std::aligned_storage<sizeof(St), std::alignment_of<St>::value>::type Ta;

int main() {
    std::cout << std::alignment_of<St>::value << '\n'; 
    std::cout << std::alignment_of<Ta>::value << '\n';
    return 0;
} 
```

输出是：

```
32
8 
```

我正在使用 msvc（Visual Studio 2012）。是`Ta`按 32 对齐，还是只有 8？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:12:19.210

VS2012`max_align_t`为 8，这意味着在所有上下文中支持的最大对齐为 8。大于此值的对齐是“扩展对齐”和

> 是否支持任何扩展对齐以及支持它们的上下文是实现定义的。
> 
> — *[basic.align] 3.11/3*

Microsoft 的对齐说明符允许扩展对齐，但是它们使用的标准库的实现不支持它们。虽然这似乎不符合标准，但对我来说确实是一个 QoI 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T15:57:48.047

我通过替换将您的示例翻译成标准 C++ `struct alignas(32) St{`11 `_declspec(align(32)) struct St{`。

然后我在我的系统 (clang++ / libc++) OS X 上运行它。我的结果是：

```
32
32 
```

如果我将 32 更改为 16 或 64，我将继续为 和 获得相同的对齐`St`方式`Ta`。我怀疑这是您正在使用的实现中的错误。

# c++ - C++ OpenSSL：基于 md5 的 64 位哈希

> ID：15459321
> 
> 赞同：2
> 
> 时间：2013-03-17T09:36:35.773
> 
> 标签：c++, openssl, md5

我知道原始的 md5 算法会产生一个 128 位的散列。

在 Mark Adler 的评论之后[，](https://stackoverflow.com/questions/11597762/adler32-repeating-very-quickly/11598306#11598306)我有兴趣获得一个好的 64 位哈希。有没有办法使用 OpenSSL 创建基于 md5 的 64 位哈希？（md5 看起来足以满足我的需求）。如果没有，OpenSSL 库中是否有另一种算法可以以不低于 md5 的质量完成这项工作（当然长度除外）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:03:50.407

我声称，“哈希质量”与哈希长度密切相关。AFAIK，OpenSSL 没有 64 位哈希算法，所以我的第一个想法很简单，而且很可能毫无价值：

`halfMD5 = md5.hiQuadWord ^ md5.lowQuadWord`

最后，我会简单地使用具有适当输出的算法，例如 crc64。

一些需要验证的 crc64 来源：

*   [http://www.backplane.com/matt/crc64.html](http://www.backplane.com/matt/crc64.html)

*   [http://bioinfadmin.cs.ucl.ac.uk/downloads/crc64/](http://bioinfadmin.cs.ucl.ac.uk/downloads/crc64/)

*   [http://en.wikipedia.org/wiki/Computation_of_CRC](http://en.wikipedia.org/wiki/Computation_of_CRC)

    *   [http://www.pathcom.com/~vadco/crc.html](http://www.pathcom.com/~vadco/crc.html)

* * *

**编辑**

> 乍一看，Jenkins 看起来很完美，但是到目前为止，我正试图为它找到一个友好的 c++ 实现，但没有运气。顺便说一句，我想知道，既然这对于数据库的重复检查来说是一个很好的哈希，那么为什么非公共开源库（如 OpenSSL）提供了它的 API？- 地铁

这可能仅仅是因为 OpenSSL 首先是一个加密库，它使用具有适当加密特征的大哈希值。

数据结构的散列算法还有其他一些主要目标，例如散列表的良好分布特性，其中小的散列值用作包含零、一个或多个（冲突）元素的桶列表的索引。

所以关键是，是否、如何以及在何处处理碰撞。在典型的 DBMS 中，列上的索引将自行处理它们。

对应的容器（地图或集合）：

*   C++：（`std::size_t`32 或 64 位）用于[`std::unordered_multimap`](http://en.cppreference.com/w/cpp/container/unordered_multimap)和[`std::unordered_multiset`](http://en.cppreference.com/w/cpp/container/unordered_multiset)

*   在 Java 中，可以使用列表作为存储桶进行映射：`HashMap<K,List<V>>`

唯一约束将另外禁止插入相等的字段内容：

*   C++：（`std::size_t`32 或 64 位）用于[`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)和[`std::unordered_set`](http://en.cppreference.com/w/cpp/container/unordered_set)

*   Java：`int`（32 位）用于[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)和[`HashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)

* * *

例如，我们有一个表，其中包含文件内容（明文、非加密应用程序）和用于映射或一致性检查的校验和或哈希值。我们要插入一个新文件。为此，我们预先计算哈希值或校验和，并分别查询具有相等哈希值或校验和的现有文件。如果不存在，则不会发生冲突，插入将是安全的。如果存在一个或多个现有记录，则完全匹配的概率很高，而“真实”冲突的概率较低。

*   如果应该省略冲突，可以向哈希列添加唯一约束并重用现有记录，但可能会出现不匹配/冲突的内容。在这里，您需要一个数据库友好的哈希算法，例如“Jenkins”。

*   如果需要处理冲突，可以向明文列添加唯一约束。像 crc 这样对数据库不太友好的校验和算法不会对记录之间的冲突产生影响，并且可以根据要检测的某些类型的损坏或其他要求进行选择。甚至可以使用开头提到的 md5 的异或四字。

其他一些想法：

*   如果明文列上的索引/约束进行映射，则可以使用任何哈希值进行合理快速的查找以找到潜在的匹配项。
*   没有人会阻止您同时添加映射友好的哈希和校验和。
*   唯一约束还会添加一个索引，基本上就像上面提到的哈希表。

简而言之，这在很大程度上取决于您想要使用 64 位哈希算法实现什么。

# c - fsync 不将数据写入文件

> ID：15459328
> 
> 赞同：4
> 
> 时间：2013-03-17T09:37:18.200
> 
> 标签：c, fsync

我有两个（POSIX）线程写入这样的日志文件：

```
pthread_mutex_lock(&log_mutex);
fprintf(LOG, "something...\n");
fsync(fileno(LOG));
pthread_mutex_unlock(&log_mutex); 
```

该文件`main()`以`fopen()`“a”模式打开。在进程运行时，我看不到文件中出现的任何内容，`cat`或者`tail`尽管在进程终止并且文件被`fclose()`-ed 之后，这些行都在那里。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T09:42:23.787

我想您需要调用`fflush()`以将更改刷新到文件系统。

另请参阅[fsync() 和 fflush() 之间的区别](https://stackoverflow.com/a/2340641/145013)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T21:44:23.723

由于您在 C 中使用 FILE 句柄，因此您需要首先通过调用 fflush() 将数据从 C/C++ 缓冲区刷新到内核缓冲区。fsync 并不是真正需要的，除非您还想确保数据到达底层物理存储，尤其是考虑到持久性问题

# excel - On Error Resume Next 似乎不起作用

> ID：15459332
> 
> 赞同：4
> 
> 时间：2013-03-17T09:37:42.553
> 
> 标签：excel, vba

我有以下两行代码：

```
On Error Resume Next
myWorkbook.Sheets("x").Columns("D:T").AutoFit 
```

我已经进入宏并执行了该行`On Error Resume Next`，然后在下一行`myWorkbook...`执行以下操作：

![在此处输入图像描述](../Images/774b0a0260583ea717e3a5c6a22575d0.png)

为什么编译器不*恢复*下一行代码？

`On Error`已在整个程序代码中大量使用；我意识到最好的做法是尽可能少地使用它，但它似乎符合这个宏的目的。

阅读此[**SO QUESTION**](https://stackoverflow.com/questions/14513612/excel-vba-on-error-resume-next-options-are-correct-but-still-not-resuming)它说您不能在另一组中设置一组错误捕获。我如何保证在代码继续运行之前已经“关闭”了一组错误捕获 - 是否`On Error Goto 0`重置错误捕获？如果它确实重置了，那么为什么不恢复以下工作？：

```
Sub GetAction()
Dim WB As Workbook
Set WB = ThisWorkbook

On Error GoTo endbit:
'raise an error
Err.Raise 69
Exit Sub
endbit:
On Error GoTo 0

On Error Resume Next
WB.Sheets("x").Columns("D:T").AutoFit

End Sub 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T10:55:17.957

还有一个 VBA 设置将导致`On Error ...`语句被忽略并且该对话框始终出现。有关检查/更改选项的更多详细信息，请参阅此答案：[https ://stackoverflow.com/a/3440789/381588](https://stackoverflow.com/a/3440789/381588)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T10:33:52.627

初始错误未关闭时的错误示例。

```
Sub GetAction()
Dim WB As Workbook
Set WB = ThisWorkbook
On Error GoTo endbit:
'raise an error
Err.Raise 69
Exit Sub
endbit:
On Error Resume Next
WB.Sheets("x").Columns("D:T").AutoFit
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T10:48:12.883

正如您所发现的，在同一个函数或子例程中，如果它仍然处于活动状态，`On Error Resume Next`则不会覆盖。`On Error Goto ...`

您是正确的，它`On Error Goto 0`恢复了默认的错误处理程序。

在某些情况下，*On Error*是处理异常情况的最合适方法。我更喜欢使用以下结构：

```
On Error Resume Next

statement which might fail

On Error Goto 0

if statement has failed then ... 
```

这将所有内容保持在一起，但在其他情况下，在过程结束时使用通用错误处理程序可能会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-02T13:06:10.573

我发现在迭代嵌套对象的函数/子程序中，错误处理可能是 VBA 中的拖累。一个对我来说可以更好地处理复杂迭代的解决方案是将对象的设置分离到它们自己的函数中，例如

主函数/子函数：设置 FSOfolder = SetFSOFolder(FSOobject, strFolder)

```
Private Function SetFSOFolder(FSO as scripting.FileSystemObject, strFolder as string) as Scripting.Folder
    on error resume Next
    set SetFSOFolder = FSO.GetFolder(strFolder)
    on error goto 0
End Function 
```

然后在主函数的下一行：

```
if (not fsofolder is nothing) then 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-24T20:24:15.640

我同意使用 On Error Resume Next 不是最佳实践，但我的大多数/许多 Access 应用程序对数据完整性中的细微差别（即分析或报告，而不是交易和未经审计）并不过分敏感。出于这个原因，我经常使用 OERN，因为 VBA 对某些您无法完全预料到的情况非常敏感。1 - 错误是否会导致数据损坏。如果是，处理它。我使用的许多例程只是处理大量记录，并且导入的数据中可能存在尚未修复的错误。通常我有很多转换过程可以让系统最终清理自己的数据。

2 - 是错误频繁且非关键（即不是关键）。如果是，则为 OERN，否则错误可能无法预测，您最终会崩溃或必须编写一堆 ITE 或 Select Case 逻辑来捕获它。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-03-20T18:15:43.517

不要`On Error Resume Next`改用编写不应崩溃的代码。

注意：我很小心我的措辞，因为你从不保证代码不会崩溃。但是如果你使用`On Error Resume Next`，那么你的代码自然流的一部分就是让它崩溃，这是错误的，大错特错。

# c++ - C++ 的序列化库

> ID：15459334
> 
> 赞同：0
> 
> 时间：2013-03-17T09:37:53.090
> 
> 标签：c++, serialization

我正在编写一个客户端库，我必须通过套接字发送 C++ 对象和原始数据类型。我遇到过用于序列化的 Boost 和 ProtoBuf 库，但我们必须定义消息格式来发送数据。我试图找到一些库，我不必在其中编写消息格式并且能够发送原始数据类型和对象。那里有 c/c++ 的库吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:59:56.317

您可以尝试[远程调用框架](http://www.deltavsoft.com/index.html)或[Protobuf-Remote](http://code.google.com/p/protobuf-remote/wiki/GettingStartedCpp)它们都支持原始（和更多）类型而无需修改。您可以通过进行一些配置来支持更多类型。

# version-control - 为什么 .meteor 有一个 .gitignore 文件？

> ID：15459335
> 
> 赞同：6
> 
> 时间：2013-03-17T09:37:55.103
> 
> 标签：version-control, meteor, gitignore

我正在创建一个新的流星应用程序，并希望将整个事情置于 git 源代码控制之下。克隆我的流星目录的工作副本时，流星给出：运行：您不在流星项目目录中。

检查 .meteor 目录后，我看到这里的文件被排除在我的本地克隆中。

这样做有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T14:46:33.900

正如@Swadq 已经指出的那样， .meteor 目录是 Meteor 的目录。它包含一个文件夹和一个文件。

该`local`目录包含应用程序的编译版本和一些数据库信息（锁定文件和 mongodb 的实际原始数据）。这当然不应该包含在您的 VCS 中。

该`package`文件包含流星应为您的应用程序加载的所有包。这当然很重要，并且必须包含在您的 VCS 中。更重要**的是：检查此文件以确定当前目录是否为流星应用程序**。如果你不包括这个，你将失去你所依赖的包和简单地运行应用程序的能力。使用`meteor`.

所以理想情况下你的 .gitignore 文件应该只包含`.meteor\local`但不包含`.meteor\packages`. 使用文件时也应该`meteorite`包含。`.gitignore``.meteor\meteorite`

# ruby-on-rails-3 - 如何从 cancan 能力.rb 中引用acts_as_tenant current_tenant

> ID：15459336
> 
> 赞同：0
> 
> 时间：2013-03-17T09:37:55.167
> 
> 标签：ruby-on-rails-3, cancan, acts-as-tenant

我对 current_tenant 设置了一些总体权限 - 我可以从控制器中引用这些权限，即

```
current_tenant.has_some_capability? 
```

工作正常。

我想用 CanCan 来结束它，如果我将以下内容放在我的能力.rb 中我会得到未定义的局部变量或方法 `current_tenant' for #

```
if current_tenant.some_capability?
    can :manage, Whatever
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:28:58.237

我相信 CanCan 期望`current_user`，试试这个：

```
current_user = current_tenant 
```

[阅读入门指南](https://github.com/ryanb/cancan#getting-started)的第一部分

如果您无法从您的能力.rb 访问 current_tenant，请尝试`@current_tenant`在您的应用程序控制器中设置为 before_filter：

```
before_filter do
  @current_tenant = current_tenant
end 
```

# c# - 24小时后SQL数据库中的C#更改记录

> ID：15459340
> 
> 赞同：-3
> 
> 时间：2013-03-17T09:38:18.717
> 
> 标签：c#, sql

如何在 24 小时后更改 SQL 数据库特定行中的记录（如从“true”到“False”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:42:44.307

这将取决于您正在开发的应用程序的类型，并假设此应用程序一直在运行。例如，如果这是一个 Web 应用程序 (ASP.NET)，这绝对是一个非常糟糕的主意，因为您不能依赖于您的应用程序是否仍将在未来的指定时间运行或者它可能被 IIS 停止这一事实。

在桌面应用程序中，您可以[`start a timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)在回调中执行数据库更新。另一种可能性是使用以下[`RegisterWaitForSingleObject`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.registerwaitforsingleobject.aspx)方法：

```
ThreadPool.RegisterWaitForSingleObject(
    new AutoResetEvent(false),
    (state, timedOut) =>
    {
        // this callback will execute 24 hours later
        // here you could perform your database update
    },
    null,
    TimeSpan.FromHours(24),
    true
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:49:44.120

根据您的需求，有不同的选择。这里有一些可以帮助您选择：

1.  SQL Server 代理（不包含在 Express Edition 中）
2.  使用任务计划程序和批处理文件。
3.  石英 .NET ( [http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/) )
4.  电源外壳

对于 #2，您可以在此处找到信息：http: [//social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/7e00c796-5854-4a2c-91d3-7b325420fd14/](http://social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/7e00c796-5854-4a2c-91d3-7b325420fd14/)

以及在这里生成 SQL 批处理文件的有趣工具：http: [//www.codeproject.com/Articles/12203/Generating-osql-Batch-Scripts](http://www.codeproject.com/Articles/12203/Generating-osql-Batch-Scripts)

请注意，如果您必须在您的应用程序中执行此操作，请使用 #3 或 Darin 的建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T10:50:14.570

你不应该这样做。最好有布尔时间限制，然后在您的应用程序中检查过期。

# css - 多个具有相同 ID 的 HTML 元素，有那么大错吗？

> ID：15459341
> 
> 赞同：0
> 
> 时间：2013-03-17T09:38:28.217
> 
> 标签：css

在某些 DIV 元素中，我有一个复杂的布局，其中不同的子元素有自己的 ID。今天我意识到我需要复制整个东西，我没有时间用不同的 ID 重新创建相同的东西。

例如，拥有两个具有相同 ID 的 DIV 有那么糟糕吗？会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:43:10.340

主要问题是，当使用 JS 选择它们时，假设每个 ID 只有一个 - 这意味着事情通常会中断。

具体来说，`getElementById`速度非常快，因为它假设每个 id 中只有一个。

此外，[HTML4 规范](http://www.w3.org/TR/html401)说：

> 此属性为元素分配名称。此名称在文档中必须是唯一的。

真的不是很难改变，只需换成`id`,`class`并在你的 CSS`#`中换成`.`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:41:14.193

ID 应该是唯一的（只有一个元素使用它），而类更像是通用的（一组元素使用它）。

[从这个网站](http://www.tizag.com/cssT/cssid.php)引用，把它想象成一个教室：

> *   ID = 一个人的身份 (ID) 对一个人来说是唯一的。
> *   班级 = 一个班级有很多人。

所以，我建议你从ID改为class。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:42:52.783

这很糟糕，真的，因为它不应该那样使用。

浏览器非常宽容，但我会花时间使用类来避免这种情况。

# php - php是否有“如果var不为空，则回显var”功能？

> ID：15459343
> 
> 赞同：-1
> 
> 时间：2013-03-17T09:38:51.203
> 
> 标签：php

所以我经常写一些东西，比如

```
if (!empty($someLongVar['nestedArrayKey'])) echo $someLongVar['nestedArrayKey']; 
```

或者

```
<?= !empty($someLongVar['nestedArrayKey']) ? $someLongVar['nestedArrayKey'] : "" ?> 
```

我觉得这是在浪费宝贵的程序员时间。那么我缺少某种速记吗？像这样的功能

```
echoIf($someLongVar['nestedArrayKey']) 
```

将为成千上万的程序员节省大量空间和打字。

自己编写这样的函数似乎是不可能的，因为每次我引用一个不存在的变量时 PHP 都会抛出一个警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:42:03.180

您可以使用操作员抑制警告`@`。

```
function echoIf($variable) {
    if(!empty($variable))
        echo $variable;
}

echoIf(@$myVariable['test']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:42:15.487

```
function ifVar($var) {
   if(isset($var)) if(!empty($var)) echo $var."\n";
} 
```

# php - 这些代码有什么区别

> ID：15459346
> 
> 赞同：0
> 
> 时间：2013-03-17T09:39:16.587
> 
> 标签：php

我是 PHP 的初学者，正在尝试学习并想知道这些代码之间的区别：

```
echo "<div>$lang[CATEGORY_NAME]</div>";

echo "<div>" . $lang['CATEGORY_NAME'] . "</div>"; 
```

以及何时应该使用每一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:55:33.680

生病将我的答案分成3部分。

## 1.双引号字符串

换句话说，代码如

> 回声“傻笑”；

在双引号字符串中，PHP 解释器在字符串中查找变量，并用它们的值替换它们。所以下面的代码

> $lol = "你好吗";
> 
> 回声“foo $lol”；

将产生以下输出。

> foo 你好吗

请注意，在双引号字符串中，PHP 解释器将始终查找变量并将其替换为它们的值，即使字符串中没有变量（这可能会导致性能问题，但稍后再说）。

## 2.单引号字符串

即像这样的代码

> $lol = '你好';
> 
> echo '$lol 用户';

在这种情况下，PHP 解释器按原样输出字符串。所以如果你还没有猜到，输出将是

> $lol 用户

（请参阅 $lol 没有被它的值替换，在这种情况下 $lol 只是一个以美元符号开头的字符串（不是变量）。

## 3.字符串连接

顾名思义，用于连接字符串。特殊的 PHP 字符。（点）用于连接字符串，例如

> $lol = '你好';
> 
> $bar = '用户';
> 
> 回声$大声笑。' ' 。$酒吧。'。你好吗？';

输出将是

> 你好用户。你好吗？

## 性能和使用

现在来回答。正如我已经说过的，双引号字符串会在其中查找变量，所以如果您不打算在字符串中输出变量，使用单引号字符串**总是**更快。至于输出变量，最好将它们与单引号字符串连接，而不是使用双引号字符串。请参见以下示例：

> echo "你好 {$arr['var1']['var2']}。你好吗？";

此代码不清楚，当您想要输出包含引号等的字符串时，它可能会导致问题。另外，正如您所指出的（感谢 Martina 的评论），如果您想输出带有键的数组，您必须用它们包围它们{ 和 }，所以双引号字符串中的变量读起来很乱。

这段代码

> 回声“你好”。$arr['var1']['var2'] 。'。你好吗？';

更具可读性，解析速度更快。

希望这能回答你的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:47:16.857

双逗号字符串内的变量是变量。因此，当解析代码时，它被视为变量。在后面的示例中，您将字符串与 $variable 连接。应该使用后一种方法，因为它提供了清晰的可读性并且花费更少的时间来解析代码。另一件事是您可以在后面的示例中使用单逗号，在第一个示例中使用双逗号。但是将 $variables 从字符串中分离出来并使用 concat 是一个很好的做法。

带变量的单逗号

例子 ：

```
echo '<div>$lang[CATEGORY_NAME]</div>'; 
```

输出

```
<div>$lang[CATEGORY_NAME]</div> 
```

带 concat 的单逗号

```
echo '<div>' . $lang['CATEGORY_NAME'] . '</div>'; 
```

输出

```
Category_name // whatever 
```

带变量的双逗号

例子 ：

```
echo "<div>$lang[CATEGORY_NAME]</div>";//parser will search for variable inside string 
```

输出

```
Category_name // whatever 
```

双逗号与 concat

```
echo "<div>" . $lang['CATEGORY_NAME'] . "</div>"; 
```

输出

```
Category_name // whatever 
```

现在由您决定选择什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T09:50:44.103

```
echo '<div>' . $lang['CATEGORY_NAME'] . '</div>'; 
```

这具有不在引号内搜索变量的优点（使用单引号，否则解析器必须检查字符串中的变量）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T09:54:07.393

当 PHP 遇到双引号`"`时，它会执行字符串扫描以评估可能在内部（在运行时）提到的任何需要评估的变量。与 不同`"`，单引号`'`使 PHP 按原样使用字符串，无需进一步评估，因此速度更快。

在这种情况下，

```
echo '<div>' . $lang['CATEGORY_NAME'] . '</div>'; 
```

稍微好一点，因为`<div>`and`</div>`标记不再需要 PHP 的任何评估。此外，PHP 可以执行一些优化，`$lang['CATEGORY_NAME']`因为它会在编译时标记它是什么（感谢 APC，在脚本文件更改后只进行一次编译）。

在第一种情况下

```
echo "<div>$lang[CATEGORY_NAME]</div>"; 
```

*该字符串是在运行时*解析的，因此比上述版本稍贵。

# visual-studio-2010 - 在 Win 7 中以 XPSP3 兼容模式运行时 Visual Studio 2010 工具箱为空？

> ID：15459352
> 
> 赞同：0
> 
> 时间：2013-03-17T09:40:18.160
> 
> 标签：visual-studio-2010, windows-7, toolbox, windows-xp-sp3, compatibility-mode

我发现在`Visual Studio 2010`设计器中获取非空工具箱的唯一方法`Win 7`是**不在**XPSP3 兼容模式下运行 IDE。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:07:35.833

这是一个非常奇怪的问题。我无法理解提出这个问题或尝试最初导致观察的场景背后的动机。你在 XP 兼容模式下运行 VS 2010 做什么？它支持Windows 7就好了，我每天都运行它。

显然，当您开始应用兼容模式补丁和填充程序（这就是该复选框的作用）时，事情可能会中断。这对你来说真的不足为奇。兼容模式*仅*适用于不能以任何其他方式工作的应用程序。因为你不能打破已经坏掉的东西，唯一的可能就是改进。VS 2010 显然打破了这条规则，因为我们都知道它在 Windows 7 上运行良好。

至于工具箱坏掉的*具体*原因，我不知道。我真的不在乎。但是，如果您这样做，您是一名程序员，并且您拥有 Visual Studio 的副本，因此请附加调试器并自己解决。如果不出意外，这将是调试第三方代码的一个很好的练习，这项技能有时甚至有实际用途。

# mysql - 如何在查询中仅乘以一行？

> ID：15459368
> 
> 赞同：2
> 
> 时间：2013-03-17T09:42:07.863
> 
> 标签：mysql

```
SELECT user_id, currency, SUM( price ) AS totalPrice, created
FROM accounts WHERE user_id IN ( SELECT users.id FROM users
                                 WHERE country_id ='$con_id' )
AND created BETWEEN  '2013-02-01' AND  '2013-02-28' GROUP BY currency 
```

这个查询给了我类似的结果

```
Curreny  totalPrice
SEK      10
USD      10 
```

我只想从 7 乘以**瑞典克朗**。我在数据库中只有**美元**汇率，所以我想在查询中将它乘以**7**以获得**瑞典克朗**汇率。我怎样才能在这个查询中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:52:17.283

你的问题有点令人困惑。如果我正确理解您的问题，您想将总价值乘以`7`货币是否等于`SEK`。

```
SELECT  user_id, 
        currency, 
        SUM(price) * IF(currency = 'SEK', 7, 1) totalPrice, 
        created
FROM    accounts
WHERE   user_id
        IN 
        (
            SELECT users.id
            FROM users
            WHERE country_id =  '$con_id'
        ) AND 
        created BETWEEN  '2013-02-01' AND  '2013-02-28'
GROUP   BY currency 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:51:38.737

我会将所有转换率存储在一个表中。对于 SEK，您存储 7.0 als 转换率和 vor USD 1.0。只需将总价格乘以转化率（带子查询）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:53:32.733

这是一个丑陋的实现方式：

```
SELECT user_id, currency,
       CASE WHEN currency = 'SEK' THEN SUM(price)*7
       ELSE SUM(price) END totalPrice, created
FROM accounts
WHERE user_id
IN ( SELECT users.id FROM users
     WHERE country_id =  '$con_id')
AND created BETWEEN  '2013-02-01' AND  '2013-02-28'
GROUP BY currency 
```

# mongodb - Mongodb：限制2级嵌套文档

> ID：15459378
> 
> 赞同：0
> 
> 时间：2013-03-17T09:43:43.077
> 
> 标签：mongodb

Mongod deb 专辑集合包含以下项目：

```
var album = {
    name: 'album1',
    tracks: [{
        title: 'track0',
        language: 'en',
        processing: {
            tasks: [
               {_id: 1, name: 'someTask1'},
               {_id: 2, name: 'someTask2'},
            ]
        }

    },{
        title: 'track1',
        language: 'en',
    },{
        title: 'track2',
        language: 'es',
    }]
} 
```

我只需要选择一个专辑、track0 和 _id 1 的任务，这样结果集就会看起来像（只包含一个轨道和一个任务）

```
{
    name: 'album1'
    tracks: [{
        title: 'track0',
        language: 'en',
        processing: {
            tasks: [
               {_id: 1, name: 'someTask1', },
            ]
        }
   ]
} 
```

如果不使用聚合框架仅使用查找，是否可以做到这一点？

我尝试使用 $elemMatch 和 .$ 投影来限制输出，但它似乎不适用于嵌套级别 > 1（这种情况下的任务）=(

# android - 为什么程序中不显示收到的短信？

> ID：15459382
> 
> 赞同：1
> 
> 时间：2013-03-17T09:44:08.373
> 
> 标签：android, eclipse, sms, broadcastreceiver

我在 eclips 中编写了发送和接收短信。我设置了特殊电话号码。当从特殊号码收到短信时，短信进入程序，对于其他短信，转到手机的收件箱。现在，当从特殊号码收到短信时，程序打开但不显示在程序中。请帮我。

接收.java

```
public class SmsReceiver extends BroadcastReceiver {
    public String str = "";

    @Override
    public void onReceive(Context context, Intent intent) {
        // ---get the SMS message passed in---

        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;

        if (bundle != null) {

            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];

            for (int i = 0; i < msgs.length; i++) 
            {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);

                //for get sms from special number===============================
                String msg_from = msgs[i].getOriginatingAddress();
                Log.v("msg_from >>",msg_from);     
                if(msg_from.equals("09124502715"))
                {
                    //===============================
                str += "SMS from " + msgs[i].getOriginatingAddress();
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
                }

            }
            // ---display the new SMS message---
            // Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
            Intent act = new Intent(context, MainActivity.class);
            act.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            act.putExtra("message", str);
            context.startActivity(act);
        }

        abortBroadcast();
        }
    }

public class MainActivity extends Activity {

 private TextView showSms;

    private String   ReceivedSms;

  @Override

  public void onCreate(Bundle savedInstanceState) 
{

 super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

       super.onCreate(savedInstanceState);

   // _smsReceiver.onReceive(getBaseContext(), getIntent());

       setContentView(R.layout.activity_main);

   Intent _intent = getIntent();

   ReceivedSms = _intent.getStringExtra("message");

    showSms = (TextView) this.findViewById(R.id.txt_Show);

    showSms.setText(ReceivedSms);

}

 @Override

  public boolean onCreateOptionsMenu(Menu menu) 
{

 getMenuInflater().inflate(R.menu.activity_main, menu);

      return true;

 }

}

public class SMS extends Activity {

     Button btnSendSMS;
        EditText txtPhoneNo;
        EditText txtMessage;

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);        

            btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
            txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
            txtMessage = (EditText) findViewById(R.id.txtMessage);

            btnSendSMS.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {                
                    String phoneNo = txtPhoneNo.getText().toString();
                    String message = txtMessage.getText().toString();                 
                    if (phoneNo.length()>0 && message.length()>0)                
                        sendSMS(phoneNo, message);                
                    else
                        Toast.makeText(getBaseContext(), 
                            "Please enter both phone number and message.", 
                            Toast.LENGTH_SHORT).show();
                }
            });        
        } 
        private void sendSMS(String phoneNumber, String message)
        {        
            String SENT = "SMS_SENT";
            String DELIVERED = "SMS_DELIVERED";

            PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
                new Intent(SENT), 0);

            PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

            //---when the SMS has been sent---
            registerReceiver(new BroadcastReceiver(){
                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS sent", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                            Toast.makeText(getBaseContext(), "Generic failure", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_NO_SERVICE:
                            Toast.makeText(getBaseContext(), "No service", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_NULL_PDU:
                            Toast.makeText(getBaseContext(), "Null PDU", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_RADIO_OFF:
                            Toast.makeText(getBaseContext(), "Radio off", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                    }
                }
            }, new IntentFilter(SENT));

            //---when the SMS has been delivered---
            registerReceiver(new BroadcastReceiver(){
                @Override
                public void onReceive(Context arg0, Intent arg1) {
                    switch (getResultCode())
                    {
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS delivered", 
                                    Toast.LENGTH_SHORT).show();
                            break;
                        case Activity.RESULT_CANCELED:
                            Toast.makeText(getBaseContext(), "SMS not delivered", 
                                    Toast.LENGTH_SHORT).show();
                            break;                        
                    }
                }
            }, new IntentFilter(DELIVERED));        

            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);        
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:37:52.077

SmsMessage.getOriginatingAddress - 以字符串形式返回此 SMS 消息的发件人地址（发件人），如果不可用，则返回 null。如果您使用 sendms() 方法，它将把发件人地址作为 null 传递。sms.sendTextMessage(phoneNumber, null, message, sentPI, DeliverPI);

你也应该推荐 abortBroadcast() 方法。因为这会导致一些不行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:25:13.277

您是否将您正在使用的活动添加到 manfest.xml 中？不这样做可能会导致空指针异常，无论如何都会过去一些日志猫错误......

# jpa - JPA 级联持续错误

> ID：15459383
> 
> 赞同：6
> 
> 时间：2013-03-17T09:44:18.167
> 
> 标签：jpa, cascade, persist

我有一个一对多的关系：一个 ProductCategory 可以包含许多产品。这是代码：

```
@Entity
public class Product implements Serializable {

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private String id;
    @Column(name="ProductName")
    private String name;
    private BigDecimal price;
    private String description;
    @ManyToOne 
    @JoinColumn(name="UserId")
    private User user;
    @ManyToOne
    @JoinColumn(name="Category")
    private ProductCategory category;
    private static final long serialVersionUID = 1L;

    public Product() {
        super();
    }   
    public String getId() {
        return this.id;
    }

    public void setId(String id) {
        this.id = id;
    }   
    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }   
    public BigDecimal getPrice() {
        return this.price;
    }

    public void setPrice(BigDecimal price) {
        this.price = price;
    }   
    public String getDescription() {
        return this.description;
    }

    public void setDescription(String description) {
        this.description = description;
    }   
    public User getUser() {
        return this.user;
    }

    public void setUser(User user) {
        this.user = user;
    }   
    public ProductCategory getCategory() {
        return this.category;
    }

    public void setCategory(ProductCategory category) {
        this.category = category;
    }
}

@Entity
public class ProductCategory {
    @Id
    private String categoryName;
    @OneToMany(cascade= CascadeType.ALL,mappedBy="category")
    private List<Product> products;

    public String getCategoryName() {
        return categoryName;
    }

    public void setCategoryName(String productName) {
        this.categoryName = productName;
    }

    public List<Product> getProducts() {
        return products;
    }

    public void setProducts(List<Product> products) {
        this.products = products;
    }

} 
```

这是使用 2 个实体的 Servlet 代码：

```
String name = request.getParameter("name");
BigDecimal price = new BigDecimal(request.getParameter("price"));
String description = request.getParameter("description");
ProductCategory category = new ProductCategory();
category.setCategoryName(request.getParameter("category"));
Product product = new Product();
product.setName(name);
product.setPrice(price);
product.setDescription(description);
product.setCategory(category);
User user = userManager.findUser("Meow");
product.setUser(user);
productManager.createProduct(product);  // productManager is an EJB injected by container 
```

这是错误：

**java.lang.IllegalStateException：在同步期间，通过未标记为级联 PERSIST 的关系找到了一个新对象**

为什么会发生此错误？我将该字段标记为“cascade = CascadeType.All”！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T09:56:26.563

您正在尝试保存产品。该产品与一个类别相关联。所以当 JPA 保存产品时，它的类别必须已经存在，或者必须配置一个级联，以便持久化产品级联到持久化其类别。

但是你没有这样的级联。您所拥有的是一个级联，表示对类别进行的任何操作都会级联到其产品列表。

# wpf - 启用父操作时 WPF TouchUp 未触发

> ID：15459384
> 
> 赞同：7
> 
> 时间：2013-03-17T09:44:30.340
> 
> 标签：wpf, touch

我有一个 Canvas，带有一个子控件。子控件可以正常接收所有 PreviewTouchDown 和 PreviewTouchUp 事件 - 但在`IsManipulationEnabled`Canvas 上启用 Manipulation (= true) 后，只有“向下”事件会在子对象上触发，但 TouchUp 和 PreviewTouchUp 事件根本不会触发。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T12:12:25.887

您还需要在子元素上设置`IsManipulationEnabled`为。`true`

* * *

触摸和操作事件之间的关系在[Input Overview / Touch and Manipulation](http://msdn.microsoft.com/en-us/library/ms754010.aspx#touch_and_manipulation)部分**The Relationship Between Touch and Manipulation Events**中有解释：

> UIElement 始终可以接收触摸事件。当 IsManipulationEnabled 属性设置为 true 时，UIElement 可以接收触摸和操作事件。如果未处理 TouchDown 事件（即 Handled 属性为 false），则操作逻辑将捕获对元素的触摸并生成操作事件。如果在 TouchDown 事件中将 Handled 属性设置为 true，则操作逻辑不会生成操作事件。下图显示了触摸事件和操作事件之间的关系。

触摸和操作事件

![触摸和操作事件](../Images/0e4d6233384536edbe54c3f8b278b5ba.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-03T12:41:24.257

我知道它已经有一年了，但这可能会对某人有所帮助：对于解决方法，如果父元素具有 IsManipulationEnabled = true，您可以很好地捕获“Stylus tap”事件

```
....

MyChildElement.StylusSystemGesture += MyChildElement_StylusSystemGesture;

....

void MyChildElement_StylusSystemGesture(object sender, StylusSystemGestureEventArgs e)
    {
        if (e.SystemGesture == SystemGesture.Tap)
            //Do something
    } 
```

# magento - 调整默认 magento 1.7 产品图像的大小

> ID：15459386
> 
> 赞同：0
> 
> 时间：2013-03-17T09:44:40.573
> 
> 标签：magento

我已经尽我所能来更改 magento 的默认产品大小，请帮助？我需要这个更大[http://officeresourcegroup.com/new/desks/dmi/dmi-andover-series.html](http://officeresourcegroup.com/new/desks/dmi/dmi-andover-series.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T10:27:36.130

您需要在您的主题中编辑 media.phtml。有一个调整大小的调用使图像变为 265x265。

这是基本包中文件的路径，请与您的主题目录交换：

/app/design/frontend/base/default/template/catalog/product/view/media.phtml

寻找这条线：

$this->helper('catalog/image')->init($_product, 'image')->resize(265)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:39:58.050

你需要改变这个： $this->helper('catalog/image')->init($_product, 'image')->resize(265);

我认为您正在使用外部模块来缩放图像，对吗？很快您应该更改 media.phtml 这个模块。查看 app/design/frontend/default/default/template/(extension-folder-zoom)/media.phtml 或 app/design/frontend/base/default/template/(extension-folder)/media.phtml。请注意， (extension-folder) 是您使用的模块名称。

如果你无论如何都找不到，也许 html 是在控制器模块中生成的，但通常不是这种方式。

确定应该使用哪个文件的另一种方法是调试屏幕选项。观看此视频，不会怀疑如何： [http ://www.youtube.com/watch?v=E4GLjYHaJig](http://www.youtube.com/watch?v=E4GLjYHaJig)

# java - 读取字节到 Netty 服务器

> ID：15459387
> 
> 赞同：0
> 
> 时间：2013-03-17T09:44:41.890
> 
> 标签：java

```
public class ServerPipelineFactory implements ChannelPipelineFactory {
    @Override
    public ChannelPipeline getPipeline() throws Exception {
        PacketFrameDecoder decoder = new PacketFrameDecoder();
        PacketFrameEncoder encoder = new PacketFrameEncoder();
        return Channels.pipeline(decoder, encoder, new Handler());
    }
} 
```

和我的解码器

```
public class PacketFrameDecoder extends
        ReplayingDecoder<PacketFrameDecoder.DecoderState> {
    public enum DecoderState {
         READ_CONTENT;
    }

    private int length;

    public PacketFrameDecoder() {
        super(DecoderState.READ_CONTENT);
    }

    @Override
    protected Object decode(ChannelHandlerContext chc, Channel chnl,
            ChannelBuffer cb, DecoderState state) throws Exception {
        switch (state) {

        case READ_CONTENT:

             for (int i = 0; i < cb.capacity(); i ++) {
                 byte b = cb.getByte(i);
                 System.out.println((char) b);
             }

            return null;
        default:
            throw new Error("Shouldn't reach here.");
        }
    }
} 
```

我发信息

```
Socket fromserver = new Socket("localhost", 7283);
PrintWriter out = new PrintWriter(fromserver.getOutputStream(), true);
int data = 12;
out.write(data);
out.flush();
out.close(); 
fromserver.close(); 
```

但是当我得到字节时-**我有 cb.capacity() = 256** **和消息“？0？0”** `System.out.println((char) b);`

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:42:12.163

使用容量是错误的，因为它是缓冲区中的“最大”字节数。同样从位置 0 开始也是错误的，因为 readerIndex 可能位于其他位置。请阅读 ChannelBuffer 的 apidocs，所有这些都非常详细地解释了。

# windows-7 - 如何在 Windows 7 的上下文菜单中添加一个条目并将一个复杂的命令关联到它？

> ID：15459392
> 
> 赞同：0
> 
> 时间：2013-03-17T09:45:14.597
> 
> 标签：windows-7, registry, contextmenu, pipe, regedit

例如，当我右键单击任何目录时，我想要一个执行以下操作的选项：

```
svn info | grep URL | awk "{print $NF}" 
```

或由管道或其他复杂内容组成的任何其他命令（上述命令获取 SVN 存储库的 URL，但这只是一个示例）。

我试图做的是在 HKEY_CLASSES_ROOT\Directory\shell 中添加一个新键，向它添加一个名为 command 的键并将其默认值设置为上述命令。不幸的是，它不能那样工作。有任何想法吗？

# clojure - Clojure Immutant 服务器说请求的资源不可用

> ID：15459393
> 
> 赞同：0
> 
> 时间：2013-03-17T09:45:16.710
> 
> 标签：clojure, jboss7.x

我试图将我的 clojure Web 应用程序部署到 Immutant 服务器。部署顺利，服务器正在运行。但是当我尝试从浏览器访问它时，它说：

```
JBWEB000065: HTTP Status 404 -

JBWEB000309: type JBWEB000067: Status report

JBWEB000068: message

JBWEB000069: description JBWEB000124: The requested resource is not available.

JBoss Web/7.2.0.Final 
```

Web 应用程序没有错误，并且在我的本地系统和服务器上的码头上运行良好

```
lein immutant run -b 173.255.244.160 
```

控制台输出：

```
 Starting Immutant: /home/devasia/.lein/immutant/current/jboss/bin/standalone.sh -b     173.255.244.160
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /home/devasia/.lein/immutant/current/jboss

  JAVA: java

  JAVA_OPTS:  -server -Xms64m -Xmx512m -XX:MaxPermSize=256m -  Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true

=========================================================================

09:30:23,517 INFO  [org.jboss.modules] (main) JBoss Modules version 1.2.0.CR1
09:30:23,813 INFO  [org.jboss.msc] (main) JBoss MSC version 1.0.4.GA
09:30:23,922 INFO  [org.jboss.as] (MSC service thread 1-6) JBAS015899: JBoss AS    7.x.incremental.673 "TBD" starting
09:30:25,133 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10) Initializing Immutant Core Subsystem
09:30:25,141 INFO  [org.immutant.common.as] (ServerService Thread Pool -- 15) Initializing Immutant Common Subsystem
09:30:25,145 INFO  [org.immutant.bootstrap.as] (ServerService Thread Pool -- 18) Initializing Immutant App Bootstrap Subsystem
09:30:25,151 INFO  [org.immutant.messaging.as] (ServerService Thread Pool -- 6) Initializing Immutant Messaging Subsystem
09:30:25,151 INFO  [org.immutant.daemons.as] (ServerService Thread Pool -- 22) Initializing Immutant Daemons Subsystem
09:30:25,155 INFO  [org.immutant.xa.as] (ServerService Thread Pool -- 4) Initializing Immutant XA Subsystem
09:30:25,156 INFO  [org.immutant.jobs.as] (ServerService Thread Pool -- 8) Initializing Immutant Jobs Subsystem
09:30:25,160 INFO  [org.projectodd.polyglot.cache.as] (ServerService Thread Pool -- 11) Initializing Polyglot Cache Subsystem
09:30:25,162 INFO  [org.immutant.web.as] (ServerService Thread Pool -- 3) Initializing Immutant Web Subsystem
09:30:25,164 INFO  [org.projectodd.polyglot.hasingleton.as] (ServerService Thread Pool -- 23) Initializing HA-Singleton Subsystem
09:30:25,164 INFO  [org.immutant.cache.as] (ServerService Thread Pool -- 21) Initializing Immutant Cache Subsystem
09:30:25,175 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10) Welcome to Immutant AS - http://immutant.org/
09:30:25,176 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10)   version........... 1.x.incremental.800
09:30:25,176 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10)   build............. 800
09:30:25,177 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10)   revision.......... 3ef999cedd68d79d283803785e204ad1243e27dd +modifications
09:30:25,177 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10)   built with:
09:30:25,180 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10)     HornetQ......... 2.3.0.CR1 (buzzzzz!, 122)
09:30:25,180 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10)     JBossAS......... 7.x.incremental.673
09:30:25,180 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10)     Clojure......... 1.5.0
09:30:25,181 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10)     Infinispan...... 5.2.1.Final
09:30:25,181 INFO  [org.immutant.core.as] (ServerService Thread Pool -- 10)     Quartz.......... 2.1.5
09:30:25,482 WARN  [org.jboss.as.server] (Controller Boot Thread) JBAS015883: No security realm defined for native management service; all access will be unrestricted.
09:30:25,490 INFO  [org.xnio] (MSC service thread 1-8) XNIO Version 3.0.7.GA
09:30:25,494 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS015888: Creating http management service using socket-binding (management-http)
09:30:25,494 WARN  [org.jboss.as.server] (Controller Boot Thread) JBAS015884: No security realm defined for http management service; all access will be unrestricted.
09:30:25,500 INFO  [org.xnio.nio] (MSC service thread 1-8) XNIO NIO Implementation Version 3.0.7.GA
09:30:25,514 INFO  [org.jboss.remoting] (MSC service thread 1-8) JBoss Remoting version 3.2.14.GA
09:30:25,564 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 25) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
09:30:25,584 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 28) JBAS010280: Activating Infinispan subsystem.
09:30:25,631 WARN  [org.jboss.as.domain.http.api] (MSC service thread 1-5) JBAS015102: Unable to load console module for slot main, disabling console
09:30:25,643 INFO  [org.jboss.as.remoting] (MSC service thread 1-2) JBAS017100: Listening on 127.0.0.1:9999
09:30:25,671 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 35) JBAS013171: Activating Security Subsystem
09:30:25,674 INFO  [org.jboss.as.connector.logging] (MSC service thread 1-4) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.15.Final)
09:30:25,695 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 32) JBAS011800: Activating Naming Subsystem
09:30:25,708 INFO  [org.jboss.as.security] (MSC service thread 1-1) JBAS013170: Current PicketBox version=4.0.15.Final
09:30:25,781 INFO  [org.jboss.as.naming] (MSC service thread 1-2) JBAS011802: Starting Naming Service
09:30:26,193 INFO  [org.apache.coyote.http11] (MSC service thread 1-8) JBWEB003001: Coyote HTTP/1.1 initializing on : http-/173.255.244.160:8080
09:30:26,199 INFO  [org.apache.coyote.http11] (MSC service thread 1-8) JBWEB003000: Coyote HTTP/1.1 starting on: http-/173.255.244.160:8080
09:30:26,397 INFO  [org.jboss.as.remoting] (MSC service thread 1-6) JBAS017100: Listening on 173.255.244.160:4447
09:30:26,406 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-5) JBAS015012: Started FileSystemDeploymentService for directory    /home/devasia/.lein/immutant/current/jboss/standalone/deployments
09:30:26,441 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "listing.clj" (runtime-name: "listing.clj")
09:30:26,500 WARN  [org.jboss.as.messaging] (MSC service thread 1-5) JBAS011600: AIO wasn't located on this platform, it will fall back to using pure Java NIO. If your platform is Linux, install LibAIO to enable the AIO journal
09:30:26,527 INFO  [org.infinispan.factories.GlobalComponentRegistry] (ServerService Thread Pool -- 48) ISPN000128: Infinispan version: Infinispan 'Delirium' 5.2.1.Final
09:30:26,643 INFO  [org.hornetq.core.server] (MSC service thread 1-2) HQ221001: live server is starting with configuration HornetQ Configuration (clustered=false,backup=false,sharedStore=true,journalDirectory=/home/devasia/.lein/immutant/current/jboss/standalone/data/messagingjournal,bindingsDirectory=/home/devasia/.lein/immutant/current/jboss/standalone/data/messagingbindings,largeMessagesDirectory=/home/devasia/.lein/immutant/current/jboss/standalone/data/messaginglargemessages,pagingDirectory=/home/devasia/.lein/immutant/current/jboss/standalone/data/messagingpaging)
09:30:26,646 INFO  [org.hornetq.core.server] (MSC service thread 1-2) HQ221008: Waiting to obtain live lock
09:30:26,850 INFO  [org.hornetq.core.server] (MSC service thread 1-2) HQ221017: Using NIO Journal
09:30:27,007 INFO  [org.hornetq.core.server] (MSC service thread 1-2) HQ221039: Waiting to obtain live lock
09:30:27,007 INFO  [org.hornetq.core.server] (MSC service thread 1-2) HQ221040: Live Server Obtained live lock
09:30:27,231 INFO  [org.infinispan.jmx.CacheJmxRegistration] (ServerService Thread Pool -- 48) ISPN000031: MBeans were successfully registered to the platform MBean server.
09:30:27,235 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 48) JBAS010281: Started __recoveryInfoCacheName__ cache from polyglot container
09:30:27,273 INFO  [org.infinispan.jmx.CacheJmxRegistration] (ServerService Thread Pool -- 48) ISPN000031: MBeans were successfully registered to the platform MBean server.
09:30:27,274 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 48) JBAS010281: Started default cache from polyglot container
09:30:27,445 INFO  [org.hornetq.core.server] (MSC service thread 1-2) HQ221024: Started Netty Acceptor version 3.6.2.Final-c0d783c 173.255.244.160:5455 for CORE protocol
09:30:27,447 INFO  [org.hornetq.core.server] (MSC service thread 1-2) HQ221024: Started Netty Acceptor version 3.6.2.Final-c0d783c 173.255.244.160:5445 for CORE protocol
09:30:27,449 INFO  [org.hornetq.core.server] (MSC service thread 1-2) HQ221009: Server is now live
09:30:27,449 INFO  [org.hornetq.core.server] (MSC service thread 1-2) HQ221003: HornetQ Server version 2.3.0.CR1 (buzzzzz!, 122) [0adf02af-8edd-11e2-a868-0d52633a1c04] 
09:30:27,500 INFO  [org.jboss.as.messaging] (ServerService Thread Pool -- 48) JBAS011601: Bound messaging object to jndi name java:/ConnectionFactory
09:30:27,504 INFO  [org.jboss.as.messaging] (ServerService Thread Pool -- 49) JBAS011601: Bound messaging object to jndi name java:jboss/exported/jms/RemoteConnectionFactory
09:30:40,249 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-8) JBAS010404: Deploying non-JDBC-compliant driver class org.postgresql.Driver (version 9.0)
09:30:43,330 INFO  [com.mchange.v2.log.MLog] (MSC service thread 1-8) MLog clients using log4j logging.
09:30:49,880 INFO  [immutant.runtime] (MSC service thread 1-8) Initialized listing from :ring options in project.clj
09:30:49,916 INFO  [org.jboss.web] (ServerService Thread Pool -- 50) JBAS018210: Register web context: 
09:30:50,417 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 26) JBAS018559: Deployed "listing.clj" (runtime-name : "listing.clj")
09:30:50,426 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015961: Http management interface listening on http://127.0.0.1:9990/management
09:30:50,427 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://127.0.0.1:9990
09:30:50,427 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.x.incremental.673 "TBD" started in 27321ms - Started 135 of 180 services (45 services are passive or on-demand) 
```

我正在使用 oracle java 7 运行 Ubuntu 12.04 LTS 32 位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T23:33:44.103

如果没有看到 project.clj，特别是 :ring 映射，很难知道发生了什么。当您说它在本地系统上运行良好时，是使用 Jetty 还是 Immutant？我会尝试确保它首先在 Immutant 上本地运行。我担心的一件事是缺少像“在子上下文路径中注册环处理程序：/ *”这样的日志消息。这要么表明我们的错误，要么可能表明您的 :ring 映射中的 :handler 条目有错误。这是一个非常简单的应用程序，您可以在某个地方（github？）发布并复制步骤吗？如果是这样，我很乐意自己尝试在本地运行它。

# arrays - 按嵌套在数组中的字典中的字符串对数组进行排序

> ID：15459394
> 
> 赞同：1
> 
> 时间：2013-03-17T09:45:31.437
> 
> 标签：arrays, sorting, dictionary, nsstring, plist

所以我有一个相当复杂的 plist 系统。这是显示数据结构的图像。

![在此处输入图像描述](../Images/535e88f28191c0015a3cd3437226f3c4.png)

是否可以通过嵌套在这些字典中的键为 'name' 的字符串对整个 'Staff' 数组进行排序？字符串当然会有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:12:52.963

你需要先找到那个员工`NSArray`，然后`NSSortDescriptor`像往常一样使用这是我的代码

```
NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"Contacts" ofType:@"plist"];
NSDictionary *contacts = [NSDictionary dictionaryWithContentsOfFile:plistPath];
NSArray *staff = [contacts objectForKey:@"Staff"];

NSSortDescriptor *sortDesc = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
NSLog(@"%@", [staff sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDesc]]); 
```

谢谢

# java - 无法从警报对话框中的 RatingBar 获取值

> ID：15459400
> 
> 赞同：2
> 
> 时间：2013-03-17T09:46:48.773
> 
> 标签：java, android, ratingbar

我有一个显示评分栏的警报对话框。

```
LayoutInflater rating = LayoutInflater.from(RatingActivity.this);
            final View v = rating.inflate(R.layout.rating_layout, null);

            AlertDialog.Builder adb = new AlertDialog.Builder(RatingActivity.this);
            adb.setTitle("Rate us!);
            adb.setView(v);
            AlertDialog ratingbar = adb.create();

final RatingBar cleanbar = (RatingBar) ratingbar.findViewById(R.id.clealiness); 
```

当我触发 onclick 监听器时，它显示 NULL POINTER EXCEPTION。第二行错误表示 getNumStars() 行中的错误。之后强制关闭。

```
adb.setPositiveButton("Rate", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
    //this line error. means they cant get the rating value?
final String cleaninput = Integer.toString(cleanbar.getNumStars()); 
```

我可以知道任何其他方法来获得评级栏的价值吗？我见过很少有人喜欢 ratingBar.getRating(); ratingBar.getNumStars();

他们都无法工作......即使我将值直接放入int。

```
final int cleaninput = (int) cleanbar.getRating();  //fails 
```

编辑（解决）::

```
final RatingBar cleanbar = (RatingBar)v.findViewById(R.id.clealiness); 
```

我将评级栏替换为 v 并且它有效！不知道是什么原因>.<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:53:25.273

我认为你的问题是这样的：

```
final RatingBar cleanbar = (RatingBar) ratingbar.findViewById(R.id.clealiness); 
```

它不会正确初始化 RatingBar，因为您没有从 Activity 的布局（包含 RatingBar）中初始化 RatingBar，这就是您到达**`NPE`**的原因

```
cleanbar.getNumStars() // cleanbar is assigned as null 
```

将其更改为

```
final RatingBar cleanbar = (RatingBar) findViewById(R.id.clealiness); 
```

现在它应该可以工作了。

## 更新：

```
LayoutInflater rating = LayoutInflater.from(RatingActivity.this);
final View ratingView = rating.inflate(R.layout.rating_layout, null);

AlertDialog.Builder adb = new AlertDialog.Builder(RatingActivity.this);               
adb.setTitle("Rate us!);
adb.setView(ratingView);

AlertDialog ratingbar = adb.create(); 
```

现在为了正确获得价值：

```
RatingBar cleanbar = (RatingBar) ratingView.findViewById(R.id.clealiness); 
```

您需要分配`RatingBar`与`View`您膨胀。

现在它应该可以工作了：

```
final int cleaninput = (int) cleanbar.getRating(); 
```

# android - 在 Android 4.0+ 中禁用主页按钮

> ID：15459407
> 
> 赞同：3
> 
> 时间：2013-03-17T09:48:01.910
> 
> 标签：android, home-button

我正在尝试用我自己的应用程序替换股票锁定屏幕。
在我的代码中，我想禁用主页按钮。
我知道如何在 Android 2.3 及更低版本中执行此操作，
但相同的代码不适用于 Android 4.0+（按下 Home 按钮时返回桌面）

最近我发现了一个名为 MiHome 的应用程序，它有自己的锁定屏幕并且能够禁用主页按钮。
有谁知道它是如何实现的？？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-17T10:50:09.450

除非您将应用程序设为主屏幕，否则无法拦截 Android 上的主页按钮。这是出于安全原因，因此恶意应用程序无法通过覆盖所有可以退出的按钮来接管您的设备。主页按钮是能够离开任何应用程序的一种可靠方式。

如果要处理 HOME 按钮，请实现主屏幕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T10:10:47.087

出于安全/可靠性原因，在 ICS 中禁用了使用主页按钮进行操作。（大多数应用程序将其用于恶而不是善）

请参阅以下问题以了解解决方法。

 ~~~~1.  [如何禁用 android 4.0 主页按钮](https://stackoverflow.com/questions/11394843/how-can-i-disable-android-4-0-home-button)
2.  [覆盖android ICS中的Home键](https://stackoverflow.com/questions/10025660/override-home-and-back-button-is-case-a-boolean-is-true/10025904#10025904)
3.  [在 Android ICS (4.0) 中禁用主页按钮](https://stackoverflow.com/questions/10077675/disable-home-button-in-android-ics-4-0)~~  ~~似乎唯一的方法是实现主屏幕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T07:10:30.310

尝试这个

```
 params = new WindowManager.LayoutParams(
                    WindowManager.LayoutParams.MATCH_PARENT,
                    WindowManager.LayoutParams.MATCH_PARENT,
                    WindowManager.LayoutParams.TYPE_SYSTEM_ERROR, WindowManager.LayoutParams.FLAG_FULLSCREEN | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD |WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED,
                    PixelFormat.TRANSLUCENT);
            params.gravity = Gravity.TOP;

            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
                getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);
            } else {
                getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);
            }
    mOverlay = (RelativeLayout) inflater
                    .inflate(R.layout.main, (ViewGroup) null);

    mOverlay.setFitsSystemWindows(false);
            getWindow().getDecorView().setSystemUiVisibility(
                    View.SYSTEM_UI_FLAG_LAYOUT_STABLE
                            | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                            | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
                            | View.SYSTEM_UI_FLAG_FULLSCREEN
                            | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);
            mWindowManager = (WindowManager) context
                    .getSystemService(Context.WINDOW_SERVICE);
            mWindowManager.addView(mOverlay, params); 
```~~~~

# c++ - 访问向量中的地图：map > > >

> ID：15459409
> 
> 赞同：1
> 
> 时间：2013-03-17T09:48:17.670
> 
> 标签：c++, map, vector, mapreduce

我有以下自己创建的数据类型：

```
typedef map<string, vector<map<string, vector<int> > > > Entry; 
```

这应该代表以下数据结构：

```
Filename | vector<map<Word, vector<LineNumber> > > 
```

这意味着，每个 FileName 包含许多单词，每个单词包含 linNumbers。它代表多个文件的单词索引。

为此，假设我编写了一个仿函数，它应该将文件名、单词和 lnr 添加到我的数据结构中：

```
FileWordLineAdder(string fileName, Entry wordLnr, int lnr) : fileName(fileName), entries(wordLnr), lnr(lnr) {
}

void operator()(string word) {
    word = normalize(word);
    if (word.size() == 0)
        return;

    vector<map<string, vector<int> > >& wordLnr = entries[fileName];

/* PROBLEM START */

    //vector<int>& lnrs = wordLnr[word];
    //lnrs.push_back(lnr);

/* PROBLEM END*/
} // operator() 
```

现在我可以将文件名插入到我的数据结构中（参见问题部分上面的行），但我无法访问向量中的地图。

谁能帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T09:52:42.547

我认为您过度设计了数据结构。对于“file -> word -> linenumbers”的索引，一个简单的：

```
Filename | map<Word, vector<LineNumber> > 
```

IE

```
map<string/*filename*/, map<string/*word*/, vector<unsigned long/*lineNumber*/ > > > 
```

可能就足够了。请注意，这个数据结构已经**是整个索引**。它不是“条目”，因此您的 typedef 可能命名错误。

（请注意，我删除了地图上的一层“矢量” - 我认为这是您问题的实际根源。对于`vector<map<...>>`文件名，您将有许多单词映射，您可能不知道哪一个地图可供选择。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:08:19.197

我的解决方案如下所示：

```
typedef map<string/*word*/, vector<unsigned long> /*lineNumber*/> IndexInnerMap;
typedef map<string/*filename*/, IndexInnerMap> Index;

    // Get innerMap of specific fileName
    IndexInnerMap& wordLnr = index[fileName];
    // Get vector<lineNumber> of specific word
    vector<unsigned long>& lnrs = wordLnr[word];
    // Add line number to vector
    if (lnrs.empty() || lnrs.back() != lnr) {
        lnrs.push_back(lnr);
    } // if 
```

感谢您的帮助 ;）

# perl - Perl环境设置无效

> ID：15459424
> 
> 赞同：0
> 
> 时间：2013-03-17T09:49:33.940
> 
> 标签：perl

```
package A;
$ENV{MOJO_USERAGENT_DEBUG} =1;
use Test::Mojo;
use utf8;

....
;
1;
package B;
BEGIN{ $ENV{MOJO_USERAGENT_DEBUG =1 } };
use Test::Mojo;
use utf8;
...
;
1; 
```

包`Test::Mojo`导入`Mojo::UserAgent`模块：

```
package Test::Mojo;
...
use Mojo::UserAgent;
...
1; 
```

为什么包 A 中的代码无法打开调试。但是包B可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:59:13.260

因为 Test::Mojo 在加载时会检查变量，所以您需要在此之前设置环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T19:46:09.820

```
#!/usr/bin/env perl
# vim:set shiftwidth=4 tabstop=4 expandtab ai smartindent fileformat=unix fileencoding=utf-8 syntax=perl:
# http://perldoc.perl.org/perlmod.html#BEGIN,-UNITCHECK,-CHECK,-INIT-and-END
package init;
            { print "10\. Ordinary code runs at runtime.\n"; }
END         { print "16\. So this is the end of the tale.\n" }
INIT        { print " 7\. INIT blocks run FIFO just before runtime.\n" }
UNITCHECK   { print " 4\. And therefore before any CHECK blocks.\n" }
CHECK       { print " 6\. So this is the sixth line.\n" }
            { print "11\. It runs in order, of course.\n"; }
BEGIN       { print " 1\. BEGIN blocks run FIFO during compilation.\n" }
END         { print "15\. Read perlmod for the rest of the story.\n" }
CHECK       { print " 5\. CHECK blocks run LIFO after all compilation.\n" }
INIT        { print " 8\. Run this again, using Perl's -c switch.\n" }
            { print "12\. This is anti-obfuscated code.\n"; }
END         { print "14\. END blocks run LIFO at quitting time.\n" }
BEGIN       { print " 2\. So this line comes out second.\n" }
UNITCHECK   { print " 3\. UNITCHECK blocks run LIFO after each file is compiled.\n" }
INIT        { print " 9\. You'll see the difference right away.\n" }
            { print "13\. It merely _looks_ like it should be confusing.\n"; }
sub import {
    print "IMPORT\n";
}
1; 
```

这应该很清楚;-)。

换句话说：BEGIN 块和“使用”语句在同一编译步骤中按照它们出现的顺序进行评估。在两个示例中，BEGIN 和“use”已经互换，因此在 A 中，BEGIN 块在“use Test::Mojo”之后执行。我的猜测是 Test::Mojo 在编译时评估 env var。如果它会在运行时评估它，它应该可以工作。

更多细节？[看这里](http://perldoc.perl.org/perlmod.html#BEGIN,-UNITCHECK,-CHECK,-INIT-and-END)。

# sql-server - 仅将系统日期的日期部分插入 SQL Server 的最佳方法是什么

> ID：15459427
> 
> 赞同：1
> 
> 时间：2013-03-17T09:49:52.020
> 
> 标签：sql-server, datetime

我目前正在使用

```
Convert(varchar, Getdate(), 101) 
```

仅将系统日期的日期部分插入我的 sql server 数据库表之一。我的问题是：这是正确的方法还是有其他更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T10:36:47.603

我不明白您为什么要将`GETDATE()`输出（`DATETIME`已经是）转换为 a `VARCHAR`，然后 SQL Server 会在再次插入时将其转换回`DATETIME`。

只需使用：

```
INSERT INTO dbo.YourTable(SomeDateTimeColumn) 
VALUES(GETDATE()) 
```

如果您正在执行该转换以摆脱 的时间部分，则`DATETIME`最好：

1.  使用`DATE`数据类型（在 SQL Server **2008**和更新版本中可用）仅存储`DATE`（无时间）
2.  如果您使用的是 SQL Server **2005**或更早版本，请改用此转换 - 应该比两次转换更有效！

    ```
    INSERT INTO dbo.YourTable(SomeDateTimeColumn) 
    VALUES(DATEADD(dd, DATEDIFF(dd, 0, GETDATE()), 0)) 
    ```

**更新：**做了一些性能测试，在这种特殊情况下，似乎 SQL Server 需要做的工作量实际上是相同的 - 无论您是否使用*convert to varchar 剥离时间并返回 datetime*方法你已经有了，或者你是否正在使用我的*get the number of days since date 0*方法。最后好像没什么区别。

然而，**最好**的解决方案仍然是：如果您只需要**日期**- 使用类型的列`DATE`（在 SQL Server **2008**`GETDATE()`和更新版本中）并完全保存对输出的任何转换或操作。

# javascript - Jquery选项卡控件-如何选择选项卡

> ID：15459428
> 
> 赞同：3
> 
> 时间：2013-03-17T09:50:06.787
> 
> 标签：javascript, jquery, html

我有以下 html 来显示 jquery 的选项卡控件：

```
<div id="tabs" class="news1">
    <ul>
        <li><a href="#tabs-1">Track</a></li>
        <li><a href="#tabs-2">History</a></li>
   </ul>
   <div id="tabs-1">
   </div>
   <div id="tabs-2">
   </div>
</div> 
```

在页面加载时，编写以下脚本：

```
<script>
$(function() {
    $( "#tabs" ).tabs();
});
</script> 
```

在页面加载时，默认选择 tab-1。如何使用 JavaScript 或 jQuery 以编程方式选择 tab-2？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T09:52:50.000

您可以指定[active](http://api.jqueryui.com/tabs/#option-active)选项，该选项必须设置为要激活的选项卡的从零开始的索引：

```
$("#tabs").tabs({
    active: 1
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:52:51.767

```
$("selector").tabs("option", {
    "selected": 1,
    "disabled": [0]
});​ 
```

# highcharts - highcharts反转yAxis但将填充区域保持在样条线下方？

> ID：15459433
> 
> 赞同：1
> 
> 时间：2013-03-17T09:50:42.560
> 
> 标签：highcharts

我图表中的 yAxis 是反转的，并且有一个填充区域，这将填充区域放在样条曲线上方。当轴反转时，有没有办法将填充区域保持在样条线下方？

一个工作的[jsfiddle在这里](http://jsfiddle.net/peter/wnyjK/)

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'areaspline'
            },
            title: {
                text: 'Average fruit consumption during one week'
            },
            legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'top',
                x: 150,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF'
            },
            xAxis: {
                categories: [
                    'Monday',
                    'Tuesday',
                    'Wednesday',
                    'Thursday',
                    'Friday',
                    'Saturday',
                    'Sunday'
                ]
            },
            yAxis: {
                title: {
                    text: 'Fruit units'
                },
                reversed:true,
            },
            tooltip: {
                formatter: function() {
                    return ''+
                    this.x +': '+ this.y +' units';
                }
            },
            credits: {
                enabled: false
            },
            plotOptions: {
                areaspline: {
                    fillOpacity: 0.5
                }
            },
            series: [{
                name: 'John',
                data: [3, 4, 3, 5, 4, 10, 12]
            }, {
                name: 'Jane',
                data: [1, 3, 4, 3, 3, 5, 4]
            }]
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T11:17:16.947

如果您将阈值更改为这样的[jsfiddle](http://jsfiddle.net/wnyjK/6/)

highcharts 阈值参考[这里](http://api.highcharts.com/highcharts#plotOptions.areaspline.threshold)

```
 plotOptions: {
                areaspline: {
                    fillOpacity: 0.5,
                    threshold: 12
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-01T10:12:38.927

对我有用的是将阈值明确设置为空：

```
{
    ... (other series properties)
    threshold: null,
    ...
} 
```

# ruby-on-rails - 如何使用 Globalize3 制作本地化的回形针附件？

> ID：15459435
> 
> 赞同：4
> 
> 时间：2013-03-17T09:50:45.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paperclip, globalize3

我有一个项目使用 Paperclip gem 进行附件和 Globalize3 进行属性翻译。记录需要为每个区域设置不同的附件。

我想将 Paperclip 属性移动到翻译表，这可能会起作用，但我认为当 Paperclip 需要删除附件时这不会起作用。

实现这样的目标的最佳方法是什么？

更新：要清楚，我想要这个，因为我的客户想要为每个语言环境上传不同的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:45:32.873

不幸的是，我没有找到使用 Globalize3 的方法。理论上，我可以为图像添加一个单独的模型，并将 image_id 添加到已翻译列的列表中（具有类似于 MainModel -> Translation -> Image 的内容），但似乎 Globalize 对非字符串列存在一些迁移问题。

我没有使用 Globalize3，而是使用具有区域设置属性的单独图像模型和接受嵌套属性的主模型来完成此操作。类似于以下内容：

```
class MainModel < ActiveRecord::Base
  has_many :main_model_images
  accepts_nested_attributes_for :main_model_images

  # return image for locale or any other as a fallback
  def localized_image(locale)
    promo_box_images.where(:locale => locale).first || promo_box_images.first
  end
end

class MainModelImage < ActiveRecord::Base
  belongs_to :main_model
  has_attached_file :image

  validates :locale,
    :presence => true,
    :uniqueness => { :scope => :main_model_id }
end 
```

棘手的部分是让表单只接受一个图像的嵌套属性，而不是 has_many 关系中的所有图像。

```
=f.fields_for :main_model_images, @main_model.image_for_locale(I18n.locale) do |f_image|
  =f_image.hidden_field :locale
  =f_image.label :image 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T17:43:32.127

您也可以尝试使用回形针-globalize3 gem，它应该可以处理您描述的情况。[https://github.com/emjot/paperclip-globalize3](https://github.com/emjot/paperclip-globalize3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:55:33.840

好的，因为您要求我分享我对这个问题的解决方案，即使我使用 Carrierwave 作为库来上传这里是它：

好的，所以我会有这样的模型设置：

```
class MyModel < ActiveRecord::Base
  # ...

  translates :attr_one, :attr_two, :uploaded_file 
```

现在，CarrierWave 工作所需的是将上传器附加到的地方，这可以在 Translation 模型上完成

```
 Translation.mount_uploader :uploaded_file, FileUploader
end 
```

现在对于你关于删除的问题，我认为虽然我不需要这样做，但它应该像自述文件所说的那样工作，但在翻译模型上应该。[https://github.com/jnicklas/carrierwave#removing-uploaded-files](https://github.com/jnicklas/carrierwave#removing-uploaded-files)

```
MyModel.first.translation.remove_uploaded_file! 
```

我已经有 2 年没有看过回形针了，如果这不是适用的知识，我建议你试试carrierwave。

# .net - 微软报告查看器

> ID：15459437
> 
> 赞同：2
> 
> 时间：2013-03-17T09:51:02.403
> 
> 标签：.net, vb.net

需要帮忙。我做了一个监控系统，可以使用 vb.net 生成报告。我使用 microsoft report viewer 生成报告，但是当我将系统安装到另一台 PC 时。我无法生成报告。

这是我尝试进行报告时的错误消息。

![错误](../Images/5a6994b6fcfe917b772edf1f833a1adf.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-17T14:10:44.077

使用以下链接下载水晶报告并安装在托管应用程序的 PC/服务器中 [http://resources.businessobjects.com/support/downloads/redistributables/vs_2008/redist/x86/CRRedist2008_x86.msi](http://resources.businessobjects.com/support/downloads/redistributables/vs_2008/redist/x86/CRRedist2008_x86.msi)

# django - 如何使用 API 获取我的 Facebook 帐户中的所有 photos_stream 照片？

> ID：15459438
> 
> 赞同：0
> 
> 时间：2013-03-17T09:51:03.890
> 
> 标签：django

在我的 Django 项目中，我需要使用 facebook API 获取 photostream 中的所有照片？，现在我使用 api 就像[https://graph.facebook.com/10151509108346729/photos/?access_token=](https://graph.facebook.com/10151509108346729/photos/?access_token=) "68051_10151509108346729_1731694342"。但我得到了只有共享的照片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T10:15:51.057

使用此代码

```
 facebook_images=[]
           user = request.user
           details = UserSocialAuth.objects.filter(user=request.user,provider='facebook').order_by('-id')[0]
           uid = details.uid
           access_token = details.extra_data['access_token']
           url = "https://graph.facebook.com/%s/albums?fields=id&access_token=%s" % (uid,access_token)
           url = str(url)
           data = json.load(urllib.urlopen(url))
           album_ids = []
           if data.has_key('data'):
               for x in data['data']:
                   album_ids.append(x['id'])
           for album_id in album_ids:
               url="https://graph.facebook.com/%s/photos?access_token=%s" %(album_id,access_token)
               photos_response = json.load(urllib.urlopen(url))
               data = photos_response['data']
               photo_urls = []
               for x in data:
                   facebook_images.append(x['source'])
           request.session['facebook_images']=facebook_images
           if request.session['print_type'] == 'photobook':
               return HttpResponseRedirect(reverse('photobook_photo_selection'))
           elif request.session['print_type'] == 'canvas':
               return HttpResponseRedirect(reverse('canvas_photo_selection'))
           else:
               return redirect('photo_selection') 
```

# .net - Microsoft SQL Server 2012：如何将记录插入关系表

> ID：15459439
> 
> 赞同：0
> 
> 时间：2013-03-17T09:51:18.890
> 
> 标签：.net, sql, sql-server-2012

有没有办法将记录插入关系表而不是对每个表运行查询？

我需要插入一个新日志： l_WinUser, l_Status, t_StartTime, t_StartDate 其中 username = username, g_Exe = g_Exe

如果是这样，.NET 中有没有办法获取插入的记录 ID？目前我正在执行另一个查询来检索插入的日志（工作正常）：

```
SELECT TOP (1) Logs.l_LogID 
FROM Logs 
INNER JOIN Game ON Logs.g_GameID = Game.g_GameID 
INNER JOIN Member ON Logs.m_MemberID = Member.m_MemberID 
WHERE (Game.g_Exe = @exe) 
AND (Member.m_Username = @username) 
AND (Logs.l_WinUser = @winUser)
ORDER BY Logs.l_LogID DESC 
```

这是ERD：

![erd](../Images/259b45f2c0d6d728e16535e5771f8bc7.png)

太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:24:08.353

您可以创建一个 VIEW、一个 INSTEAD OF INSERT 触发器并`INSERT`针对它运行一个 -Statement。

```
create View View_Logs 
as
select l_WinUser, 
       l_Status, 
       t_StartTime, 
       1t_StartDate,
       username,
       g_Exe
FROM Logs 
INNER JOIN Game ON Logs.g_GameID = Game.g_GameID 
INNER JOIN Member ON Logs.m_MemberID = Member.m_MemberID 
```

现在你像这样插入你的新条目

```
insert into View_logs
  (l_WinUser,l_status, lt_StartDate,username,g_exe)
values
  ('Foo', 1, GetDate(),'BarUser','SomeEXE') 
```

你会得到新的`l_LogID`使用

```
select SCOPE_IDENTITY() 
```

注意：在第一次尝试中，我写道，针对视图的 INSERT 也会插入/更新相关表，这是不正确的。所以我更正了这个答案。

这是触发器（未经测试）：

```
create trigger YourTriggerName on View_ogs
for instead of insert 
as
declare @GameID int, @MemberID int, @timeKey int

select @GameID=g_GameID from Game g join inserted i on g.g_Exe = i.g_exe
if @GameID is null begin
  insert into Game (g_exe) select g_exe from Inserted
  select @GameID = SCOPE_IDENTITY()
  end

select @MemberID=m.m_memberID from Member m join inserted i on m_username = i.username
if @MemberID is null begin
  insert into Member (m_username) select username from Inserted
  select @MemberID = SCOPE_IDENTITY()
  end

select @timeKey=t.t_timeKey 
from Time_Date t 
     join inserted i 
       on t.t_StartTime=i.t_StartTime 
      and t.t_StartDate = t_StartDate

if @timeKey is null begin
  insert into Time_Date (t_StartTime, t_StartDate) select t_StartTime, t_StartDate from Inserted
  select @timeKey = SCOPE_IDENTITY()
  end

set nocount off
insert into Logs
  (l_WinUser, l_Status, m_MemberID, g_GameID, t_TimeKey)
  select l_WinUser, l_Status, @MemberID, @GameID, @timekey) 
```

# javascript - 将当前帖子的 URL 放入 Blogger

> ID：15459443
> 
> 赞同：2
> 
> 时间：2013-03-17T09:52:01.767
> 
> 标签：javascript, blogger

我想将当前帖子的 URL 放在每个帖子的文本区域中，因此我在帖子编辑器（HTML 模式）中输入了以下代码：

```
<script type='text/javascript'>
  var postUrl = '<data:post.url/>';
  document.write('<textarea>');
  document.write(postUrl);
  document.write('</textarea>');
</script> 
```

但出现的是

```
<data:post.url/> 
```

它不会被帖子 URL 取代。

布局 HTML 包含以下代码：

```
<body expr:class='&quot;loading&quot; + data:blog.mobileClass'> 
```

由于有许多自定义 Facebook/Twitter 小部件（“喜欢”按钮等）可用，我认为必须有某种方法将data:post.url的*值传递给目标 jscript，但我的谷歌搜索失败了。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:30:35.663

你可以把这个放在你的帖子中：

```
<div id="mytextbox"></div> 
```

然后通过将此代码放在`</body>`结束标记之前的底部来编辑您的模板。

```
<script type='text/javascript'>
var d=document;
var mydiv = d.getElementById(&quot;mytextbox&quot;);
if (mydiv!=null)
{
mydiv.innerHTML = mydiv.innerHTML + &quot;<textarea>&quot;+&quot;<data:blog.url/>&quot;+&quot;</textarea>&quot;;
}
</script> 
```

Blogger 布局代码`<data:blog.url/>`实际上返回的是当前页面的 URL，而不是博客的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T18:27:47.030

使用下面的检查脚本，这对我有用。

```
<script type='text/javascript'>
     var postUrl = '<data:post.url/>';
     document.write("<div class="fb-like" data-href='" + postUrl + "' data-layout="standard" data-action="recommend" data-show-faces="true" data-share="true"></div>");
</script> 
```

它相应地给出每个帖子的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T00:33:03.833

显然它只是将 'data:post.url' 视为一个字符串，因为它被引号包围，这行得通吗？

```
<script type='text/javascript'>
  document.write('<textarea>' + data:post.url + '</textarea>');
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-19T19:22:43.863

你真的不需要javascript来做到这一点。您只需要使用 expr:value 指定一个值，如下所示：

```
<input type="text" expr:value='data:blog.url'/> 
```

然后，您可以使用这样的内联样式来设置您想要的样式：

```
 <input type="text" expr:value='data:blog.url' style='height:30px; width:100px;' /> 
```

为确保您将链接放在正确的位置，您必须仔细检查博客页面的元素并将代码粘贴到所需位置。

希望有帮助。

# java - 如何从 java 类访问 Jframe 组件并使 UI 与观察者模式的逻辑分开？

> ID：15459446
> 
> 赞同：0
> 
> 时间：2013-03-17T09:52:26.037
> 
> 标签：java, swing, user-interface, jframe

**环境：**我正在尝试创建一个简单的数据处理应用程序（读取文件并对提取的数据进行一些处理）该应用程序必须让用户实时更新处理。我保持 UI 和逻辑分离，以便我可以将逻辑重新用于其他应用程序。

**问题：**我在 UI 中有一个文本区域，它必须实时显示处理信息，UI 使用**JFrame-Home.java**（netbeans 拖放）。**逻辑 - Utility.java**

1.  如何访问另一个类（Utility.java）中的 JFrame 组件（Home.java）？

2.  **访问 UI 组件并从逻辑代码**修改它是正确的方法吗？通过这样做增加了重用逻辑类的工作量，我该怎么做？

观察者模式是这里的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:01:57.423

这是一个加载的问题，很大程度上取决于。如果我这样做，我会建立一系列接口。

我将从定义逻辑实际上可以做什么的模型接口开始。然后，我将建立一系列侦听器接口，这些接口可以针对该模型进行注册，以提供所需的回调。

这将视图的逻辑/模型分开。它允许您灵活地更改任何部分，而不会对应用程序的其余部分产生不利影响

# ruby-on-rails - 使用 nginx 和 unicorn 的 rails 部署：403 禁止错误

> ID：15459447
> 
> 赞同：1
> 
> 时间：2013-03-17T09:52:31.450
> 
> 标签：ruby-on-rails, nginx, centos, capistrano, unicorn

我刚刚设置了一个 VPS（Centos 6.3）并使用 capistrano 部署了我的应用程序。VPS 运行 nginx & unicorn。访问服务器时出现 403 Forbidden 错误：此行出现在 /var/log/nginx/error.log 中：

```
*5 directory index of "/var/www/current/public/" is forbidden, client: xxxxx,   server: xxx, request: "GET / HTTP/1.1", host: "xxxx" 
```

**但是，如果我在 ./public 中将 index.html 添加到我的 rails 应用程序中，则一切正常。这让我觉得这些路线不起作用。**

我还使用 chmod -R 755 * 设置了 /var/www 的所有文件夹的权限（从长远来看，这可能不是最好的主意，但希望将其排除为错误来源）。有没有其他方法可以更详细地调试它（error.log 文件没有告诉我其他任何信息）？

任何帮助深表感谢。

这是我的 routes.rb 文件（一切都在本地开发中）

```
MyTest::Application.routes.draw do

  root :to => 'welcome#index'
end 
```

以下是我的 nginx.conf 文件：

```
upstream unicorn {
  server unix:/tmp/unicorn.blog.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  # server_name example.com;
  root /var/www/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 5;
} 
```

这是 unicorn_init.sh：

```
#!/bin/sh
set -e

# Feel free to change any of the following variables for your app:
TIMEOUT=${TIMEOUT-60}
APP_ROOT=/var/www/current
PID=$APP_ROOT/tmp/pids/unicorn.pid
CMD="cd $APP_ROOT; bundle exec unicorn -D -c $APP_ROOT/config/unicorn.rb -E production"
AS_USER=##########
set -u

OLD_PIN="$PID.oldbin"

sig () {
  test -s "$PID" && kill -$1 `cat $PID`
}

oldsig () {
  test -s $OLD_PIN && kill -$1 `cat $OLD_PIN`
}

run () {
  if [ "$(id -un)" = "$AS_USER" ]; then
    eval $1
  else
    su -c "$1" - $AS_USER
  fi
}

case "$1" in
start)
  sig 0 && echo >&2 "Already running" && exit 0
  run "$CMD"
  ;;
stop)
  sig QUIT && exit 0
  echo >&2 "Not running"
  ;;
force-stop)
  sig TERM && exit 0
  echo >&2 "Not running"
  ;;
restart|reload)
  sig HUP && echo reloaded OK && exit 0
  echo >&2 "Couldn't reload, starting '$CMD' instead"
  run "$CMD"
  ;;
upgrade)
  if sig USR2 && sleep 2 && sig 0 && oldsig QUIT
  then
    n=$TIMEOUT
    while test -s $OLD_PIN && test $n -ge 0
    do
      printf '.' && sleep 1 && n=$(( $n - 1 ))
    done
    echo

    if test $n -lt 0 && test -s $OLD_PIN
    then
      echo >&2 "$OLD_PIN still exists after $TIMEOUT seconds"
      exit 1
    fi
    exit 0
  fi
  echo >&2 "Couldn't upgrade, starting '$CMD' instead"
  run "$CMD"
  ;;
reopen-logs)
  sig USR1
  ;;
*)
  echo >&2 "Usage: $0 <start|stop|restart|upgrade|force-stop|reopen-logs>"
  exit 1
  ;;
esac 
```

最后，我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'execjs', '~> 1.4.0'
gem 'therubyracer'
gem "less-rails"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
 gem 'unicorn'

# Deploy with Capistrano
 gem 'capistrano'

# To use debugger
# gem 'debugger'

gem "haml", "~> 4.0.0"
gem 'twitter-bootstrap-rails', '~> 2.2.6'
gem "simple_form", "~> 2.1.0" 
```

这是我的独角兽.rb：

```
root = "/var/www/current"
working_directory root
pid "#{root}/tmp/pids/unicorn.pid"
stderr_path "#{root}/log/unicorn.log"
stdout_path "#{root}/log/unicorn.log"

listen "/tmp/unicorn.blog.sock"
worker_processes 4
timeout 30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:12:51.277

我想到了。在 Centos 6.3 上，标准配置存储在 /etc/nginx/conf.d/ 删除此目录中的默认配置后，一切正常。请注意，最好将自定义 nginx 配置文件符号链接到 /etc/nginx/conf.d 而不是 /etc/nginx/sites-enabled （我必须在我的系统上创建此目录，然后将其包含在我的 /etc /nginx/nginx.conf）。

# heroku - Proximo 转发多个 IP

> ID：15459454
> 
> 赞同：1
> 
> 时间：2013-03-17T09:53:12.093
> 
> 标签：heroku, proximo

我在我的 Heroku 应用程序上使用 Proximo，但只需要通过它转发某些流量，所以在阅读[文档](https://devcenter.heroku.com/articles/proximo#configuring-the-proximo-wrapper)后，我添加了我想要转发的 IP，但是它似乎删除了以前的 IP，所以我只能一次添加一个IP。

有没有办法告诉 Proximo 转发多个 IP？文档没有显示这一点，但它可能被忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:13:01.437

啊哈，我在 6 个月前找到了 Proximo-stacklet 的 GitHub 存储库，它允许使用[多个掩码](https://github.com/pirateradio/proximo-stacklet/commit/3b2c41d803d7eaf41816e99ba6233d1333835b03#bin/proximo)。

对于其他寻找这个的人，他们需要用逗号分隔。

# java - 带Set的for循环，是O(n)吗？

> ID：15459455
> 
> 赞同：1
> 
> 时间：2013-03-17T09:53:15.213
> 
> 标签：java, big-o

我有这个 for 循环：

```
public void method(int[] arr) {
    Set set = new HashSet();

    for(int i = 0; i < arr.length; i++){
        set.add(arr[i]);
    }
} 
```

这个方法在 O(n) 中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T09:56:43.693

如果你使用 HashSet，**是**的。 `HashSet`有`O(1)`并且你`O(n)`通过使用一个for循环来乘以它。因此，整个构造具有`O(n)`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T10:01:03.363

`HashSet`具有近线性的插入性能，所以是的：n 这样的操作将是 O(n)。

请注意，我会改为这样做，这与您的所有代码所做的结果完全相同：

```
Set<Integer> set = new HashSet<Integer>(Arrays.asList(arr)); 
```

如上所述，您也应该键入您的 Set。

# c# - XNA 负载模型不正确

> ID：15459461
> 
> 赞同：0
> 
> 时间：2013-03-17T09:53:43.683
> 
> 标签：c#, 3d, xna, xna-4.0

我尝试将模型加载到 XNA。此模型已加载，但纹理加载不正确。图片：

![在此处输入图像描述](../Images/35e954235cd33c32b939cc6d1aefb122.png)

两堵墙是正确的，但第三堵是条纹的，我现在不知道为什么。在 3dsMax 中，所有的墙都是核心的（在编辑模式和渲染中）这是我在 Draw() 中的函数：

```
Matrix[] transforms = new Matrix[capitol.Bones.Count];
capitol.CopyAbsoluteBoneTransformsTo(transforms);

foreach (ModelMesh mesh in capitol.Meshes)
{
     foreach (BasicEffect effect in mesh.Effects)
     {
          effect.Alpha = 1.0f;
          effect.DiffuseColor = new Vector3(1.0f, 1.0f, 1.0f);
          effect.SpecularColor = new Vector3(0.75f, 0.75f, 0.75f);
          effect.SpecularPower = 5.0f;
          effect.AmbientLightColor = new Vector3(0.5f, 0.5f, 0.5f);

          effect.DirectionalLight0.Enabled = true;
          effect.DirectionalLight0.DiffuseColor = Vector3.One;
          effect.DirectionalLight0.Direction = Vector3.Normalize(new Vector3(1.0f, -1.0f, -1.0f));
          effect.DirectionalLight0.SpecularColor = Vector3.One;

          effect.DirectionalLight1.Enabled = true;
          effect.DirectionalLight1.DiffuseColor = new Vector3(0.5f, 0.5f, 0.5f);
          effect.DirectionalLight1.Direction = Vector3.Normalize(new Vector3(-1.0f, -1.0f, 1.0f));
          effect.DirectionalLight1.SpecularColor = new Vector3(0.5f, 0.5f, 0.5f);

          effect.LightingEnabled = true;

          //effect.EnableDefaultLighting();
          effect.World = transforms[mesh.ParentBone.Index] 
                   * Matrix.CreateRotationY(90f)
                   * Matrix.CreateTranslation(modelPosition);

          effect.View = Matrix.CreateLookAt(cameraPosition, Vector3.Zero, Vector3.Up);
          effect.Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(20.0f), aspectRatio, 1.0f, 50.0f);
    }
    // Draw the mesh, using the effects set above.
    mesh.Draw();
} 
```

负载型号：

```
brick = Content.Load<Model>("models\\brick_model"); 
```

# ios - 没有互联网连接时 NSIncrementalStore 是如何工作的？

> ID：15459464
> 
> 赞同：0
> 
> 时间：2013-03-17T09:54:02.873
> 
> 标签：ios, core-data

标题是真正的问题。但是一些建议 + 示例代码重新：当没有互联网连接时如何在 nsincrementalstore 子类中处理会很棒。

我正在考虑缓存到 sqlite 持久存储，因此当互联网连接不可用时，我会使用使用 sqlite 存储而不是增量存储的托管上下文。不完全确定如何保存到 sqlite 存储将继续工作与 Web 服务同步（在本例中为 Parse）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:32:06.843

我建议你在更高的层次上重新考虑你的架构。

不要陷入持久存储和子类的杂草中。相反，请考虑您需要保存的交易。

您对本地商店所做的每次修改都需要与 Web 服务进行某种交互。但是这些交互会很混乱：它们会失败，服务器会很忙，网络会来来去去。

如果您分两部分考虑这一点，本地数据更新和远程数据更新，您将在项目结束时剩下更多的头发。

# c++ - 如何完全控制控制台？

> ID：15459466
> 
> 赞同：0
> 
> 时间：2013-03-17T09:54:16.723
> 
> 标签：c++, console-application

我目前正在编写一个必须能够在终端中显示旋转立方体的 C++ 程序。（作业）。所以我从一个 60*60 的字符数组（准确地说是二维向量）开始，我将把它写到屏幕上。但是如果我只是用两个 for 循环来做这件事， `std::cout`我会得到非常难看的输出：只是前一个下的屏幕，无休止。

所以我需要更好的东西，我需要做一些类似于 Vim 的事情：它似乎接管了控制台，当你完成后它消失了，你的终端又回来了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:55:19.890

您可以使用像[ncurses](http://www.gnu.org/software/ncurses/)这样的库来执行此操作。

# entity-framework - 更新子实体实体框架

> ID：15459474
> 
> 赞同：0
> 
> 时间：2013-03-17T09:55:25.613
> 
> 标签：entity-framework, c#-4.0, entity-framework-4, linq-to-entities, edmx

嗨，这里我们另一个实体框架问题和更新子实体。
场景：
我有名为“客户”的对象，这些对象具有“评估”和“每周评估”。客户端创建并保存良好，但评估（子实体）未附加并添加到数据库中。

```
 public SHAID.DataLayer.Client Save(SHAID.DataLayer.Client client)
    {
         System.Data.EntityKey key;
         object originalItem;

         using (_shaidEntities = new DataLayer.SHAIDEntities())
         {

             key = _shaidEntities.CreateEntityKey("Clients", client);

             if (_shaidEntities.TryGetObjectByKey(key, out originalItem))
             {

                 foreach (var item in client.Assessments)
                 {
                     if (item.Id == default(int))
                     {
                         item.Client.Id = client.Id;

                     }
                 }

                 _shaidEntities.ApplyCurrentValues(key.EntitySetName, client);

                 //client.WeeklyAssessments.Load();
                 //client.Assessments.Load();
             }
             else
             {
                 _shaidEntities.AddToClients(client);
             }

             _shaidEntities.SaveChanges();

         }

        return client;
    } 
```

客户对象附加了评估，并且客户参考 ID 已经填充了正确的 ID
当我迭代评估集合（AddObject，Attach）时我尝试了各种解决方案，但每次上下文抱怨它已经附加

请帮忙

非常感激

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:32:11.270

设法通过创建新的评估并将它们添加到 originalItem 来解决这个问题。可以在 originalItem 列表中轻松找到编辑现有评估并进行更新

必须取消注释 client.WeeklyAssessments 和client.Assessments 才能取回子实体的填充ID

# ios - 在方法objective-c之外保留数组数据

> ID：15459488
> 
> 赞同：2
> 
> 时间：2013-03-17T09:57:00.540
> 
> 标签：ios, objective-c, methods, nsmutablearray

**我有一个数组，`players`里面有两个字符串：`player1`和`player2`。这是我的 .h 文件：**

```
#import <UIKit/UIKit.h>

@interface hardOne : UIViewController {
        UISwitch *hard1ON;
        NSMutableArray *players;
        NSString *player1, *player2;
}

@property (nonatomic, retain) IBOutlet UISwitch *hard1ON;
@property (nonatomic) BOOL switchState;
@property (nonatomic, retain) NSMutableArray *players;

- (IBAction) switchValueChanged;
@end 
```

**数组在 viewDidLoad 中初始化，然后在我的 .m 文件中的两个 IBAction 中将数据输入到该数组中：**

```
#import "hardOne.h"

@interface hardOne () <UITextFieldDelegate>

@property (nonatomic, strong) IBOutlet UITextField *textFieldOne;
@property (nonatomic, strong) IBOutlet UITextField *textFieldTwo;

@end

@implementation hardOne
@synthesize hard1ON;
@synthesize players;
@synthesize textFieldOne;
@synthesize textFieldTwo;

BOOL switchState;
int counter = 0;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [hard1ON setOn:switchState animated:NO];
    //read player names to user defaults
    [textFieldOne setText:[[NSUserDefaults standardUserDefaults] stringForKey:@"player1"]];
    [textFieldTwo setText:[[NSUserDefaults standardUserDefaults] stringForKey:@"player2"]];
    self.players = [[NSMutableArray alloc] init];
    NSLog(@"%@",self.players);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction) switchValueChanged
{
    counter += 1;
    if (counter % 2 == 0) {
        switchState = 0;
    } else {
        switchState = 1;
    }
    if (hard1ON.on) {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"theChange" object:nil];
    } else {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"theChange2" object:nil];
    }
}

- (IBAction) returnKey1
{
    player1 = [textFieldOne text];
    [self.players addObject:(player1)];
    //set player1's name to user defaults
    [[NSUserDefaults standardUserDefaults] setValue:[textFieldOne text] forKey:@"player1"];
}

- (IBAction) returnKey2
{
    player2 = [textFieldTwo text];
    [self.players addObject:(player2)];
    //set player2's name to user defaults
    [[NSUserDefaults standardUserDefaults] setValue:[textFieldTwo text] forKey:@"player2"];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return NO;
}

@end 
```

如果我`NSLog`在第二个 IBAction 中使用，一旦完成，该数组将在控制台中正确显示字符串`player1`和`player2`，但是如果我尝试在其他任何地方使用该数组，它是`null`。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:25:30.727

你对玩家有两个定义。

一是财产。它从未初始化，因此为空。您将其用作 self.players 并由实例变量 _players 支持。

一个是实例变量。它在 viewDidLoad 中初始化。这不是零。

这几乎肯定是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:48:14.393

我会尝试将数组添加为私有实例变量，即将它添加到@interface 中的 .m 文件中

```
NSMutableArray *players; 
```

那么你应该能够通过使用“玩家”而不是 self.players 来访问数组。这应该在整个班级都可用。如果这不起作用，那么我会说问题不在您的变量范围内，而是在其他代码的范围内。

# android - 无法编辑输入字段中的文本出现错误：beginbatchedit on inactive inputconnection

> ID：15459489
> 
> 赞同：1
> 
> 时间：2013-03-17T09:57:13.633
> 
> 标签：android, cordova, jquery-mobile

我正在使用 Android 上的 PhoneGap/Mobile jQuery 制作应用程序。我正在使用 phonegap 2.3.0 版

我可以编辑表单中的某些字段，但是当我开始填写其他字段时，它不会显示字段内的文本。

我看到很多人遇到这个问题，但还没有人找到解决方案

以下是人们遇到相同问题的一些链接

[http://community.phonegap.com/nitobi/topics/phonegap_2_0_0_2_1_0_and_android_4_1_inputtext_text_not_taking_input_after_some_seconds](http://community.phonegap.com/nitobi/topics/phonegap_2_0_0_2_1_0_and_android_4_1_inputtext_text_not_taking_input_after_some_seconds) [http://community.phonegap.com/nitobi/topics/android_version_4_1_1](http://community.phonegap.com/nitobi/topics/android_version_4_1_1)

我对android没有太多经验，我正在使用带有phonegap的HTML5

[我使用他们的网站http://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)上的教程来设置应用程序

它创建了应用程序，我将应用程序命名为 phonetest，并且我的主 java 文件包含此代码。

```
/*
       Licensed to the Apache Software Foundation (ASF) under one
       or more contributor license agreements.  See the NOTICE file
       distributed with this work for additional information
       regarding copyright ownership.  The ASF licenses this file
       to you under the Apache License, Version 2.0 (the
       "License"); you may not use this file except in compliance
       with the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

       Unless required by applicable law or agreed to in writing,
       software distributed under the License is distributed on an
       "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
       KIND, either express or implied.  See the License for the
       specific language governing permissions and limitations
       under the License.
 */

package com.inam.phonetest;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.util.Log;

import org.apache.cordova.*;

    public class phonetest extends DroidGap
    {
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            // testing asdfsd
            try
            {
                    String pName = this.getClass().getPackage().getName();
                    Log.w("myApp", "no network"+"/data/data/"+pName+"/databases/");
                    this.copy("cps.db","/data/data/"+pName+"/databases/");
                    //this.copy("0000000000000001.db","/data/data/"+pName+"/databases/file__0/");
            }
            catch (IOException e)
            {

                e.printStackTrace();
            }

            File database=getApplicationContext().getDatabasePath("cps.db");

            if (!database.exists()) {
                // Database does not exist so copy it from assets here
                Log.w("Database", "Not Found");
            } else {
                Log.w("Database", "Found");
            }

            super.onCreate(savedInstanceState);
              ////////////
            setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
            super.loadUrl("file:///android_asset/www/index.html");
        }

        void copy(String file, String folder) throws IOException 
        {

         File CheckDirectory;
         CheckDirectory = new File(folder);
         if (!CheckDirectory.exists())
         { 
          CheckDirectory.mkdir();
         }

            InputStream in = getApplicationContext().getAssets().open(file);
            OutputStream out = new FileOutputStream(folder+file);

            // Transfer bytes from in to out
            byte[] buf = new byte[1024];
            int len; while ((len = in.read(buf)) > 0) out.write(buf, 0, len);
            in.close(); out.close();

        }
    } 
```

我的 HTML 文件有这个脚本

```
<table><tr>
<td><input  name="last_name" id="last_name" type="text" class="mytextfield"  style="height:35px; width:250px;" tabindex=""  value="" /></td>
      <td  ><font color="red">*</font>Home Phone Number </td>
      <td  ><input  name="phone_num" id="phone_num"  value=""  tabindex="" type="text" pattern="[0-9]*" maxlength="10" /></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:40:52.597

我在输入字段中使用`maxlength`and`max`并且该字段并没有限制我输入超过 maxlength 和 max 的字符，这以某种方式破坏了某些规则，之后它停止在字段中显示单词。

# c++ - C++读/写二进制模式

> ID：15459490
> 
> 赞同：2
> 
> 时间：2013-03-17T09:57:45.990
> 
> 标签：c++, struct, binary, seekg

我在学校学习 C++，在我看来它是一门漂亮的语言，但我有这个烦人的问题。`FILE *text`课本上是用and`scanf`和写的`printf`，我个人不喜欢；我习惯了`cin`and `cout`or with`<<` `>>` 更好的说法`fstream`。

所以这是我的问题：

1.  我必须制作一个以二进制模式写入数据的应用程序（我已经完成了一半，但由于某种原因它没有以二进制模式写入）

2.  在我写下城市（orasul）坐标（x 和 y）后，我必须搜索它们并获取这些值。（这里我尝试使用`string.find`）但我必须使用`seekg`“二进制模式”搜索并将这些值在结构中分开。

如果你们能以某种方式指导我，因为我在这里很迷失。有没有办法让我得到`sizeof(struct)`？

```
#include <iostream>
#include <conio.h>
#include <fstream>
#include <string>
#include <limits>

using namespace std;

struct oras {
    std::string orasul;
    int x;
    int y;
} ora;

void functiaPrincipala();
void calculator(float coordonate_x1, float coordonate_y1, float coordonate_x2, float coordonate_y2);
void adaugaOras();
void stergeLocatie();
void repetare();

void main() {
    functiaPrincipala();
}

void functiaPrincipala() {
    // variabile
    int obtiune;
    // ofstream fisierOut;
    // ifstream fisierIn;

    cout << "1) Adauga localitate: " << endl;
    cout << "2) Stergerea unei localitati existente: " << endl;
    cout << "3) Stergerea tuturor localitatilor existente: " << endl;
    cout << "4) Afisarea tuturor localitatilor existente: " << endl;
    cout << "5) Calculul distantei a doua localitati: " << endl;
    cout << "Introduceti obtiunea: " << endl;
    cin >> obtiune;

    switch (obtiune) {
        case 1:
            adaugaOras();
            break;
        case 2:
            stergeLocatie();
            break;
        case 3:
            break;
        case 4:
            break;
        case 5:
            break;
    }

    getch();
}

void calculator(float coordonate_x1, float coordonate_y1, float coordonate_x2, float coordonate_y2) {
    float rezultat;

    rezultat = sqrt((coordonate_x2 * coordonate_x1) - (coordonate_x2 * coordonate_x1) + (coordonate_y2 * coordonate_y1) - (coordonate_y2 * coordonate_y1));

    cout << "Distanta de la orasul 1 la orasul 2 este de: " << rezultat;

}

void adaugaOras() {
    int n;
    ofstream fisierOutt("textttt.txt", ios::app | ios::binary);

    //  fisierOutt.open("textttt.txt");
    cout << "Cate orase doresti sa introduci: ";
    cin >> n;
    if (fisierOutt.is_open()) {

        for (int i = 0; i < n; i++) {
            cout << "Introdu numele orasului: ";
            cin >> ora.orasul;
            cout << "Introdu coordonatele x: ";
            cin >> ora.x;
            cout << "Introdu coordonatele y: ";
            cin >> ora.y;
            fisierOutt << ora.orasul << " " << ora.x << " " << ora.y << endl;
            cout << endl << endl;

        }

    } else {
        cout << "Nu am putut deschide fisierul";
    }
    fisierOutt.close();
    cout << endl;
    // repetare();
}

void stergeLocatie() {

}

void repetare() {
    char obtiune;
    cout << "Doriti sa mai adaugati ceva sau sa iesiti?(d/n)";
    cin >> obtiune;
    if (obtiune == 'd') {
        functiaPrincipala();
    } else {
        exit;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:00:25.303

就像我在评论中所说的那样，您不能真正寻找特定的条目，因为所有条目的大小都不同。

它可以通过拥有一个单独的索引文件来解决，其中每个索引条目都包含该条目在真实文件中的位置。这样，当您需要条目 X 时，您首先在索引文件中寻找正确的位置，读取该位置，然后使用该位置在实际数据文件中寻找。

这就是有多少[DBM](http://en.wikipedia.org/wiki/Dbm)数据库管理器处理他们的数据。

索引文件中的条目必须是固定大小的，例如索引中的每个条目的类型都是`std::ostream::pos_type`，您可以使用它[`write`](http://en.cppreference.com/w/cpp/io/basic_ostream/write)来编写索引和[`read`](http://en.cppreference.com/w/cpp/io/basic_istream/read)读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:18:31.283

检查[https://stackoverflow.com/a/15452958/2156678](https://stackoverflow.com/a/15452958/2156678)。有询问者想要一种对二进制文件进行搜索（和更新）的方法，我提出了一种实现相同目的的简单方法。

# iphone - 如何创建圆形 UIview 而不是矩形

> ID：15459495
> 
> 赞同：2
> 
> 时间：2013-03-17T09:58:19.243
> 
> 标签：iphone, uiview

嗨，在我的应用程序中，我需要一个圆形而不是矩形的视图。如何创建圆形的uiview对象请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:15:04.983

从技术上讲，所有 UIView 将始终是“矩形”，这意味着它们将使用 {x, y} 坐标放置在屏幕上，并且它们将使用高度和宽度进行标注（使它们成为矩形）。但是，在 UIView 的范围内，您可以做很多事情来使其显示为一个圆圈。这里有一些方法：

1.  使用`UIImageView`并将其 Image 设置为圆形图像。这很容易，但不是很灵活。
2.  学习Core Graphics（也称为Quartz2D），在UIView的`-drawRect:`方法中画一个圆。[Quartz 2D 编程指南](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html)
3.  为 UIView 的图层使用 CAShapeLayer。[CAShapeLayer 类参考](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html)

当然还有其他方法，但这应该是一个好的开始。如果您需要检测圆内的触摸，您可以使用选项 2\. 或 3\. 并保留对 CGPathRef（或 UIBezierPath）的引用，并使用[CGPathContainsPoint](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/CGPath/Reference/reference.html#//apple_ref/c/func/CGPathContainsPoint)来确定触摸是否在圆的范围内并采取相应措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:02:28.347

您可以设置视图层的cornerRadius。

```
#import <QuartzCore/QuartzCore.h>

yourView.layer.cornerRadius = 20; 
```

# ruby-on-rails - Ruby on Rails，回调，稍后运行方法

> ID：15459496
> 
> 赞同：0
> 
> 时间：2013-03-17T09:58:19.390
> 
> 标签：ruby-on-rails, callback, delayed-job

我需要某种回调，以便在创建方法后 5 分钟内调用函数。

我的情况：

用户登录我的网页，上传一些文件（调用创建方法），在 5 分钟内是否应该对文件进行分析（在 5 分钟内它应该调用该方法，该方法只占用整个文件夹，文件存储在哪里并对其进行分析）。这就是为什么像在命令行中键入`rake jobs:work`或使用`gem daemons`和键入这样的事情`"RAILS_ENV=production script/delayed_job start"`不适合我的原因。

我想像往常一样使用 rails s 开始我的应用程序，登录，上传文件，它应该自动工作以分析文件。
据我了解，一旦[工作开始](https://github.com/collectiveidea/delayed_job#running-jobs)，它们会继续运行吗？我不需要这个。我只需要在创建方法后 5 分钟内运行一些方法。排队工作和启动工人的
所有这些事情似乎太复杂了，无法完成如此简单的任务。`gem 'delayed_job_active_record'``daemons`

那么，是否可以使用`gem 'delayed_job_active_record'`并`gem daemons`使用 rails 启动我的应用程序，并且一切都将在后台自动完成，而无需我停止应用程序并在命令行中输入内容来运行延迟的作业？或者是否有可能没有所有这些复杂的东西？

我已经[在这里](https://stackoverflow.com/questions/15448859/ruby-on-rails-delayed-job)和[这里](https://stackoverflow.com/questions/15444568/ruby-on-rails-activerecord-callback-delayed-execution)询问过延迟工作。

提前谢谢了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-17T10:04:31.373

这是一篇文章，其中描述[了如何使用延迟作业设置调度](http://zadasnotes.blogspot.com.es/2011/03/rails-tips-using-delayedjob-to-schedule.html)
*更新 2015-07-06：*链接已损坏，我找不到缓存版本 - 请参阅下面的更新

如果可以的话，我建议研究[sidekiq](https://github.com/mperham/sidekiq)，它是一个很棒的消息队列，甚至内置了调度。虽然它确实使用了 redis，所以除非你已经部署了 redis，否则它会做一点点工作。

**更新**
[这里是](https://gist.github.com/kares/1024726)一个简单的解决方案的要点，用于延迟作业的计划和重复作业

# android - Android 从 Gallery NullPointerException 中选择图像？

> ID：15459497
> 
> 赞同：1
> 
> 时间：2013-03-17T09:58:23.960
> 
> 标签：android, image, null

我目前正在尝试创建一个应用程序，它允许用户从图库中拍摄图像并将其上传到服务器。但我仍然坚持选择图像。我完全按照教程进行操作，但是在启动活动时我得到了一个 NullPointer。

各位看官有没有看错？

提前致谢！

这是代码；

```
package de.arvidg.exampleactionbartabs;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class UploadPicture extends Activity {

    private static int RESULT_LOAD_IMAGE = 1;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button buttonLoadImage = (Button) findViewById(R.id.choosepic2);
        buttonLoadImage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent i = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                startActivityForResult(i, RESULT_LOAD_IMAGE);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();

            ImageView imageView = (ImageView) findViewById(R.id.chosenPicView);
            imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

        }

    }
} 
```

日志猫：

```
03-17 10:56:35.470: W/dalvikvm(12169): threadid=1: thread exiting with uncaught exception (group=0x41e64300)
03-17 10:56:35.480: E/AndroidRuntime(12169): FATAL EXCEPTION: main
03-17 10:56:35.480: E/AndroidRuntime(12169): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.arvidg.exampleactionbartabs/de.arvidg.exampleactionbartabs.UploadPicture}: java.lang.NullPointerException
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2190)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2215)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.app.ActivityThread.access$600(ActivityThread.java:145)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1211)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.os.Looper.loop(Looper.java:137)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.app.ActivityThread.main(ActivityThread.java:4978)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at java.lang.reflect.Method.invokeNative(Native Method)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at java.lang.reflect.Method.invoke(Method.java:511)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at dalvik.system.NativeStart.main(Native Method)
03-17 10:56:35.480: E/AndroidRuntime(12169): Caused by: java.lang.NullPointerException
03-17 10:56:35.480: E/AndroidRuntime(12169):    at de.arvidg.exampleactionbartabs.UploadPicture.onCreate(UploadPicture.java:34)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.app.Activity.performCreate(Activity.java:5008)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-17 10:56:35.480: E/AndroidRuntime(12169):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-17 10:56:35.480: E/AndroidRuntime(12169):    ... 11 more 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/selectpic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="select Picture" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="225dp"
            android:layout_weight="29.60"
            android:src="@drawable/gradient_bg" />

        <TextView
            android:id="@+id/chosenpic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="2.94"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

    </LinearLayout>

</LinearLayout> 
```

第 34 行是该语句的最后一个括号

```
buttonLoadImage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent i = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                startActivityForResult(i, RESULT_LOAD_IMAGE);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:11:02.350

你的错误是我认为在你面前。`Button`你也给了错误的id `ImageView`。

使用您在布局中提供的 id 初始化您的按钮，如下所示： 将您的按钮 id 定义为`R.id.selectpic`.

> ```
>  Button buttonLoadImage = (Button) findViewById(R.id.selectpic); 
> ```

你的`ImageView`身份证`R.id.imageView1`如下`R.id.chosenPicView`：

> ```
>  ImageView imageView = (ImageView) findViewById(R.id.imageView1); 
> ```

然后试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:12:47.070

只是改变

```
Button buttonLoadImage = (Button) findViewById(R.id.choosepic2); 
```

到

```
Button buttonLoadImage = (Button) findViewById(R.id.selectpic); 
```

在您的代码中的某个时刻，您更改了布局文件中按钮的 id，并且没有在活动代码上反映该更改。

总是仔细检查你的身份证。

# git - 如何使用 Git 流创建新功能？

> ID：15459499
> 
> 赞同：1
> 
> 时间：2013-03-17T09:58:43.533
> 
> 标签：git

我使用 Git Flow（功能 A）启动了一项新功能，但尚未提交任何更改。

然后我需要创建一个新功能（功能 B），但我不希望它包含我未提交的功能 A 更改。

我无法弄清楚为什么新功能没有从开发分支的当前状态开始！它包括我尚未提交的功能 A 的所有更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:11:27.960

这是 git 中的正常行为，与 git flow 无关：
当您切换（也称为结帐）一个分支并且您的工作目录中有未提交的更改时，有两种可能的情况：

1.  另一个分支的签出不会覆盖任何未提交的更改：签出成功，您现在位于签出分支上，未提交的更改仍在您的工作目录中。
2.  另一个分支的检出会覆盖其中一些未提交的更改：检出失败。

`git flow feature start <name>`正是这样做的：它创建一个新分支并检查它。因为没有冲突场景 1 发生。

问问自己：
如果在切换分支后未提交的更改不会保留在工作目录中，它们应该去哪里？

正如托马斯正确指出的那样，`git stash`可以在这里为您提供帮助。或者您可以简单地将更改提交到功能 A 的分支，因为无论如何您都应该经常提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:06:02.637

我不熟悉 Git Flow，但也许[`git stash`](https://www.kernel.org/pub/software/scm/git/docs/git-stash.html)会在这里有所帮助？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T10:12:03.197

如果您当前在`featureA`带有一些未提交更改的分支上，并且您想创建不包含未提交更改的新分支，请尝试以下操作：

```
git stash
git checkout -b featureB
//now in branch 'featureB` you will no longer have the uncommitted changes
//in order to continue your work on 'featureA':
git checkout featureA
git stash pop 
```

# windows - 带驱动器号的完整文件路径

> ID：15459501
> 
> 赞同：-1
> 
> 时间：2013-03-17T09:58:51.277
> 
> 标签：windows, driver, kernel-mode, filter-driver

我是驱动程序开发的初学者。我正在开发一个过滤器驱动程序（内核模式）。我想获取每个打开的文件的完整路径。我有一个**文件对象和一个 IRP**。我正在使用**&pFileObject->fileName**来显示路径。它显示完整路径，但不显示驱动器号。请提供一个告诉**驱动器**号的内核级例程。下面是代码

```
#include "StdAfx.h"
#include "drv_common.h"
#include "ntddk.h"
#include "FsFilter.h"

///////////////////////////////////////////////////////////////////////////////////////////    ////////
// PassThrough IRP Handler

NTSTATUS FsFilterDispatchPassThrough( __in PDEVICE_OBJECT DeviceObject, __in PIRP Irp )
{
    PFSFILTER_DEVICE_EXTENSION pDevExt = (PFSFILTER_DEVICE_EXTENSION)DeviceObject-    >DeviceExtension;

    IoSkipCurrentIrpStackLocation(Irp);
    return IoCallDriver(pDevExt->AttachedToDeviceObject, Irp);
}

///////////////////////////////////////////////////////////////////////////////////////////    ////////
// IRP_MJ_CREATE IRP Handler

NTSTATUS FsFilterDispatchCreate(
    __in PDEVICE_OBJECT DeviceObject,
    __in PIRP           Irp
    )
{
    PFILE_OBJECT pFileObject = IoGetCurrentIrpStackLocation(Irp)->FileObject;

    DbgPrint("%wZ\n", &pFileObject->FileName);

    return FsFilterDispatchPassThrough(DeviceObject, Irp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:38:00.043

As @sergmat suggested you can use `IoVolumeDeviceToDosName` routine to get the volume name. But be sure that you call that route only at `PASSIVE_LEVEL`, which might be what you are experiencing.

Also, using `pFileObject->FileName` in dispatch routine is not recommended. The memory may come from paged pool which is not accessible in `DISPATCH_LEVEL` or higher.

# javascript - 由 HTML5 data-* 和 CSS 类构建的动态 JQuery UI 滑块

> ID：15459504
> 
> 赞同：2
> 
> 时间：2013-03-17T09:59:17.987
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-slider

我正在尝试使用单个 CSS`class`和 HTML5`data-*`值创建多个 jquery UI 滑块，但没有成功。我可以得到一些值，但有些根本不起作用。

这是代码：http: [//jsfiddle.net/Smartik/FTtAb/1/](http://jsfiddle.net/Smartik/FTtAb/1/)

如您所见，`data-id`并且`data-val`有效，但我无法获得`data-min`,`data-max`的值`data-step`（这已经是最重要的了）。尝试取消注释这些行，看看会发生什么。

所以，我的问题；有没有办法使用`data-*`或其他方法来获取这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:11:21.100

您从`data-`属性中提取的值是字符串，而不是数字。jQuery UI[滑块](http://api.jqueryui.com/slider/)小部件的[min](http://api.jqueryui.com/slider/#option-min)、[max](http://api.jqueryui.com/slider/#option-max)和[step](http://api.jqueryui.com/slider/#option-step)选项只接受数字。

您可以使用[parseInt()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)将这些值转换为数字：

```
var min   = parseInt(jQuery('#' + id).attr('data-min'), 10);
var max   = parseInt(jQuery('#' + id).attr('data-max'), 10);
var step  = parseInt(jQuery('#' + id).attr('data-step'), 10); 
```

[你会在这里](http://jsfiddle.net/FTtAb/2/)找到一个更新的小提琴。

（顺便说一句，考虑将结果缓存`jQuery('#' + id)`在局部变量中以提高效率）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:29:00.557

除了 parseInt 您还应该使用该`data`函数。这是一个修改过的小提琴：

[http://jsfiddle.net/FTtAb/3/](http://jsfiddle.net/FTtAb/3/)

```
jQuery('.sliderui').each(function() {
    var obj = jQuery(this);
    var sId   = "#" + obj.data('id');
    var val   = parseInt(obj.data('val'));
    var min   = parseInt(obj.data('min'));
    var max   = parseInt(obj.data('max'));
    var step  = parseInt(obj.data('step'));

    obj.slider({
        value: val,
        min: min,
        max: max,
        step: step,
        slide: function( event, ui ) {
            jQuery(sId).val( ui.value );
        }
    });
}); 
```

# php - 使用文件夹选择页面

> ID：15459506
> 
> 赞同：0
> 
> 时间：2013-03-17T09:59:49.943
> 
> 标签：php, layout, web

我不太确定这叫什么，所以我只是在寻找有关它的任何信息。

我见过一些使用这种网址 www.domain.com/folder/1/2/3/1234/ 的网站，但这些数字可以动态设置并用作变量。我确定我在这方面落后了几步，但这让我感到困惑。当然，如果您在文件夹字符串中设置 1 2 3 1234 它会在文件夹中的文件夹 1 中的文件夹 2 中的文件夹 3 中查找文件夹 1234，然后返回根目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:03:11.320

是的，但是您可以从 .htaccess 修改此行为，以便所有查询都转到例如 index.php，然后您自己解析 REQUEST_URI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:07:46.017

只需在 Apache 中启用 mod_rewrite，然后使用简单的 .htaccess 将所有请求重定向到单个 index.php，然后解析 $_GET（以下示例中的 $_GET['route']）参数或 REQUEST_URI。

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?route=$1 [L,QSA] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T10:14:12.200

您正在寻找的技术称为[URL 重写](http://en.wikipedia.org/wiki/URL_rewriting)。

对于 Apache HTTP Server，有一个非常流行的模块，称为[`mod_rewrite`](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html).

搜索“ **mod_rewrite tutorial/guide** ”会给你很多相关的结果。

# c# - C# 文本框中的最后一个 DataGridView 行值

> ID：15459512
> 
> 赞同：0
> 
> 时间：2013-03-17T10:00:14.947
> 
> 标签：c#, datagridview, textbox

我有一个列名为“order_ID”的 DataGridView（绑定到 SQL 数据库表）。我想要的是在 GridView/SQL 表的该列中添加最后一个填充值，以显示在文本框中。我该怎么做呢？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:18:12.723

这是你想要达到的目标吗？

```
int lastRow = yourDataGridView.Rows.Count - 1;
object last_order_ID = yourDataGridView.Rows[lastRow].Cells["order_ID"].Value;
yourTextBox.Text = Convert.ToString(last_order_ID); 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-04T11:53:10.067

下一个 ID：

```
int lastRow = dataGridView1.Rows.Count-1;
        int last_order_ID = Convert.ToInt32(dataGridView1.Rows[lastRow].Cells["s_id"].Value) + 1;
        txt_num.Text = Convert.ToString(last_order_ID); 
```

# javascript - 这段代码中的 1/cos(x) 对于 3d 画布游戏有什么意义？

> ID：15459514
> 
> 赞同：2
> 
> 时间：2013-03-17T10:00:45.350
> 
> 标签：javascript, math, canvas, 3d, geometry

我最近一直在试验 HTML5 画布，并遇到了[这个 3d 示例](http://www.benjoffe.com/code/demos/canvascape)，其背后的代码相对较少。我希望找到一个很好的 3d 渲染介绍，但我在理解代码背后的几何图形时遇到了比我预期的更多的麻烦。[我设置了一个 JSbin](http://jsbin.com/ifanod/1/edit)并复制了他网站上用来玩的代码。我一直在理解

```
deltaX=1/Math.cos(theta); 
```

后来用于：

```
 if (deltaX>0) {

        stepX = 1;
        distX = (mapX + 1 - x) * deltaX;
    }
    else {
        stepX = -1;
        distX = (x - mapX) * (deltaX*=-1);      
    } 
```

[来源](http://www.benjoffe.com/script/canvascape/main.js)

我最好的猜测是它用于`cos(x) = adjacent/hypotenuse`直角三角形中的关系，但我不明白三角形适合的位置，如果有的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T11:39:23.783

如果你从原点画一条`(0, 0)`带方向的线`theta`（从 x 轴测量），那么

*   `deltaX = 1/cos(theta)`是这条线上的距离，直到与垂直线`x = 1`相遇，并且
*   `deltaY = 1/sin(theta)`是这条线上的距离，直到`y = 1`遇到水平线。

确实是三角关系。在第一种情况下，三角形具有点`(0, 0)`，`(1, 0)`以及`(1, y)`直线与垂直线 相交的点`x=1`。

`(mapX, mapY)`是具有整数坐标的网格点，并且`(x, y)`是正方形中的一个点`[mapX, mapX+1) x [mapY, mapY+1)`。

`distX`计算在 -`theta`方向上的下一条垂直网格线`distY`的距离，以及下一条水平网格线的距离。

*备注：*如果方向是 π/2 的倍数，即方向正好是右、上、左或下，则计算失败，因为`sin(theta) = 0`或`cos(theta) = 0`在那种情况下。这可能不会在您的程序中发生，因为以`playerDirection`开头`0.4`和 递增或递减`0.07`。

# java - 使用 Netbeans IDE 动态更改 jtable 中列的宽度

> ID：15459517
> 
> 赞同：0
> 
> 时间：2013-03-17T10:01:28.530
> 
> 标签：java, swing, netbeans, jtable

在 netbeans 和 java swing 中开发应用程序我想更改 jtable 中列的宽度，以在谷歌搜索后调整单元格中的数据长度我偶然发现 Binklye 在以下链接上的博客

[http://binkley.blogspot.com/2006/01/getting-jtable-columns-widths-to-fit.html](http://binkley.blogspot.com/2006/01/getting-jtable-columns-widths-to-fit.html)

下面是代码片段

```
{

    final TableCellRenderer renderer = getTableHeader()
            .getDefaultRenderer();

    for (int i = 0; i < getColumnCount(); ++i)
        getColumnModel().getColumn(i).setPreferredWidth(
                renderer.getTableCellRendererComponent(this,
                        getModel().getColumnName(i), false, false, 0, i)
                        .getPreferredSize().width);
}

public Component prepareRenderer(final TableCellRenderer renderer,
        final int row, final int column) {
    final Component prepareRenderer = super
            .prepareRenderer(renderer, row, column);
    final TableColumn tableColumn = getColumnModel().getColumn(column);

    tableColumn.setPreferredWidth(max(
            prepareRenderer.getPreferredSize().width,
            tableColumn.getPreferredWidth()));

    return prepareRenderer;
} 
```

很乐意有人帮助实施代码。

另一方面，如果有其他解决方案，将很高兴看到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:18:40.903

查看[表格列调整器](http://tips4java.wordpress.com/2008/11/10/table-column-adjuster/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:04:52.287

试试这个：

```
jtable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS); 
```

您可以编写自己的自定义方法，当您添加或删除行时将触发该方法。示例代码：

```
public static void resizeRow(JTable table) {
        TableColumnModel columnModel = table.getColumnModel();
        for (int i = 0; i < columnModel.getColumnCount(); i++) {
            TableColumn column = columnModel.getColumn(i);
            column.setPreferredWidth(/*your logic of setting width*/);
        }

    } 
```

# android - 生命周期配置未涵盖插件执行 - Android maven

> ID：15459518
> 
> 赞同：0
> 
> 时间：2013-03-17T10:01:34.523
> 
> 标签：android, eclipse, maven

使用 Eclipse Juno 时，错误提示：

> 生命周期配置未涵盖插件执行

pom.xml：

```
<build>
    <finalName>${project.artifactId}</finalName>
    <sourceDirectory>src</sourceDirectory>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.5.1</version>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <configuration>
                <sdk>
                    <platform>14</platform>
                </sdk>
                <extractDuplicates>true</extractDuplicates>
                <emulator>
                    <avd>Android_2.2</avd>
                    <wait>45000</wait>
                    <options></options>
                </emulator>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:01:34.523

您必须安装 android-m2e 连接器。

您可以通过 Eclipse Marketplace 安装适用于 Maven 的 Android 连接器。选择 Help -> Eclipse Marketplace... 并搜索“android m2e”。

学分：[http ://rgladwell.github.com/m2e-android/](http://rgladwell.github.com/m2e-android/)

# html - 白名单phonegap android不适用于下一页

> ID：15459532
> 
> 赞同：0
> 
> 时间：2013-03-17T10:02:58.597
> 
> 标签：html, cordova, whitelist

我在用

```
 $('#result').load('http://.... #div'); 
```

获取外部网站的内容。我编辑了PhoneGap**的域****白名单**。如果我将此页面设置为索引页面，它就可以工作。但是，通过提交表单设置为下一页时，它就不能正常工作了。未显示来自外部网站的内容。我该如何解决？谢谢

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:29:57.303

最好为此使用 javascript 框架并仍然使用单个 index.html 文件。我遇到的最佳实践是使应用程序不是多个 html 文件。有许多框架可以实现这一点，最好的文档是 jquerymobile。

在您的 javascript 文件中使用 JQueryMobile，您将检查 page1 div 何时使用 jquerymobile 加载，然后运行您的 .load 代码。

JQueryMobile 没有它寻找的不同事件。在这种情况下，在页面启动 (pageinit) 之前，您希望运行加载事物以从其他网站获取内容。

```
$( "#page1" ).live( "pageinit",function(){ 

    $('#result').load('http://.... #div'); //place your load here..you can even $.post(function(){..}); to a php script to get exactly what you want.

}); 
```

您在 body 标签内的 html 文件将包含此内容，当然您需要在 head 标签之间包含 jquery 和 jquerymobile js 和 css 文件。

```
<div data-role="page" id="home" data-theme="a">
            <div data-role="header">
                <h1>Welcome</h1>
            </div>
            <div data-role="content">
                <ul data-role="listview">
                    <li class="btn_a"><a href="#page1">Page1</a></li>
                    <li class="btn_s"><a href="#page2">Page2</a></li>
                    <li class="btn_l"><a href="#page3">Page3</a></li>

                </ul>
            </div>

            <div  data-role="footer">
                <h4>Your Brand</h4>
            </div>
        </div>

<div data-role="page" id="page1" data-theme="a">
            <div data-role="header">
                <h1>Page1 Heading</h1>
            </div>
            <div data-role="content">
                <h1>This is Page1</h1>
                           <div id="#result"></div>
            </div>

            <div  data-role="footer">
                <h4>Your Brand</h4>
            </div>
        </div> 
```**

# c# - 如何从 DataTable 的特定列填充 ImageList？

> ID：15459538
> 
> 赞同：3
> 
> 时间：2013-03-17T10:03:31.117
> 
> 标签：c#, datatable, windows-applications, timagelist

我有一个 DataTable，它有一百行和很多列。其中一列是 - “ImageThumbnail” 我想在表单上的一个控件中显示缩略图。此控件需要一个“ImageList”作为其图像源。所以我喜欢我的 ImageList 控件从数据集的“ImageThumbnail”列中填充。我可以使用循环遍历 DataTable 中的所有行来做到这一点，但我相信必须有一些有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T13:52:28.280

在为自己快速尝试之后，在我看来，这归结为尝试以`DataColumn`​​有效的方式从单个中获取值。在我意识到这一点后，我发现[这篇文章](https://stackoverflow.com/a/2077822/340045)提出了 2 个解决方案。我将这些应用到我的测试中，`ImageLists`并在下面包含了我的代码：

```
DataTable dt = new DataTable();
dt.Columns.Add("Name", typeof(String));
dt.Columns.Add("Image", typeof(Image));

dt.Rows.Add("Img1", Properties.Resources.Img_1);
dt.Rows.Add("Img2", Properties.Resources.Img_2);
dt.Rows.Add("Img3", Properties.Resources.Img_3);
dt.Rows.Add("Img4", Properties.Resources.Img_4);

ImageList imgList = new ImageList();

//// Loop Approach:
//for (int idx = 0; idx < dt.Rows.Count; idx++)
//{
//    imgList.Images.Add(dt.Rows[idx]["Image"] as Image);
//}

// LINQ Approach:
imgList.Images.AddRange(dt.Rows.Cast<DataRow>().Select(row => row["Image"] as Image).ToArray()); 
```

在我看来，LINQ 方法更简洁，但循环方法可能更容易理解，因此更具可读性。我不确定其中哪一个会更有效，或者它们是否最终都会得到相似的 IL 代码。但是，LINQ 方法使用`AddRange`和`ToArray`内置方法，这些方法可能包括效率改进（或将来可能会这样做）。

# symfony - 在 Symfony2 中获取配置数据

> ID：15459539
> 
> 赞同：1
> 
> 时间：2013-03-17T10:03:43.307
> 
> 标签：symfony

我知道这一点：

```
$this->container->getParameter('param_name') 
```

...将从 /app/config/ 中的主配置文件中获取参数名称。

但是我如何从包的配置文件中的配置文件和事件侦听器类中的方法中获取配置数据。代码在每个请求上运行（配置文件在包含事件侦听器类的包中）。

我正在编写一个基于用户代理的捆绑包，它授予不同设备的权限。所以我会将设备检测到一个组中，例如“IPHONE”、“IPAD”、“ANDROID_4+”、“ANDROID_<4”等，然后我的配置文件将如下所示：

```
parameters:
    allow_feature_1: IPHONE, IPAD, ANDROID_4+
    allow_feature_2: IPHONE, IPAD, ANDROID_<4, ANDROID_4+ 
```

我只需要将这些配置值放入我的班级。

我已经完成了所有的事件监听器代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:48:08.743

首先，您应该将参数存储在单独的文件 parameters.yml 中，并将此文件导入 config.yml。要在事件侦听器中从 parameters.yml 获取参数的访问权限，您应该注入此参数[http://symfony.com/doc/2.1/book/service_container.html#service-parameters](http://symfony.com/doc/2.1/book/service_container.html#service-parameters)（对于 sf2.1）。

# symfony - 菜单构建器不存在 Symfony 异常 KNPMenu 构建器

> ID：15459541
> 
> 赞同：0
> 
> 时间：2013-03-17T10:03:59.110
> 
> 标签：symfony, twitter-bootstrap, menu, builder, knpmenu

我尝试使用 KnpMenu 教程来创建菜单，并在 Symfony 中将其与引导程序一起使用。它在本地模式下完美运行，但是当我在我的服务器上尝试它时（都在开发模式下）它不起作用，我有这个错误：

> 在“robStormWelcomeBundle:Homepage:index.html.twig”中呈现模板（“类“robStorm\WelcomeBundle\Menu\Builder”不存在菜单构建器“robStormWelcomeBundle:Builder”。”）期间引发异常。500 内部服务器错误 - Twig_Error_Runtime 1 链接异常：InvalidArgumentException »

但是，我在本地或服务器上有完全相同的文件......

这是我的文件的内容：

在 app/config/config.yml 中：

```
# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%
twig:
    form:
        resources:
            - "BraincraftedBootstrapBundle:Form:form_div_layout.html.twig"
knp_menu:
   twig:
       template: "BraincraftedBootstrapBundle:Menu:menu.html.twig" 
```

在 src/robStorm/WelcomeBundle/Controller/HomepageController ：

```
public function indexAction()
{
    return $this->render('robStormWelcomeBundle:Homepage:index.html.twig');
} 
```

在 src/robStorm/WelcomeBundle/Menu/builder.php ：

```
<?php
namespace robStorm\WelcomeBundle\Menu;

use Knp\Menu\FactoryInterface;
use Symfony\Component\DependencyInjection\ContainerAware;
use Knp\Menu\Matcher\Matcher;
use Knp\Menu\Matcher\Voter\UriVoter;
use Knp\Menu\MenuFactory;
use Knp\Menu\Renderer\ListRenderer;

class Builder extends ContainerAware
{

    public function mainMenu(FactoryInterface $factory, array $options)
    {
        $menu = $factory->createItem('root');

        $item = $menu->addChild('Accueil', array('route' => 'robStormWelcomeBundle_homepage'));      
        $menu->addChild('Combat', array('route' => 'robStormWelcomeBundle_homepage_combat'));
        $menu->addChild('Boutique', array('uri' => '#'));

        return $menu;
    }

    public function menuDroite(FactoryInterface $factory, array $options)
    {
        $menu = $factory->createItem('root');

        $menu->addChild('Aide', array('uri' => '#'));
        $menu->addChild('d1', array('attributes' => array('divider' => true)));
        $dropdown = $menu->addChild('Mon compte');
        $dropdown->addChild('Mon profil', array('uri' => '#'));
        $dropdown->addChild('Mes messages', array('uri' => '#'));
        $dropdown->addChild('d1', array('attributes' => array('divider' => true)));
        $dropdown->addChild('Se déconnecter', array('uri' => '#'));

        return $menu;
    }

} 
```

在 src/robStorm/WelcomeBundle/Ressources/config/routing.yml ：

```
robStormWelcomeBundle_homepage:
    pattern:  /
    defaults: { _controller: "robStormWelcomeBundle:Homepage:index" } 
```

在 src/robStorm/WelcomeBundle/Ressources/views/layout.html.twig ：

```
<div class="container">
    {{ knp_menu_render('robStormWelcomeBundle:Builder:mainMenu', {'nav_type': 'navbar', 'currentAsLink': true}) }}
    {{ knp_menu_render('robStormWelcomeBundle:Builder:menuDroite', {'nav_type': 'navbar', 'currentAsLink': true, 'pull': 'right'}) }}
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:14:13.490

**问题**在于文件/类的情况。

如果使用`robStormWelcomeBundle:Builder:mainMenu`，服务器将查找`src/robStorm/WelcomeBundle/Menu/Builder.php`文件（注意大写的文件名）。但是该文件不存在，您将其命名为`builder.php`（小写）。

您现在所做的解决方案（更改`...:Builder:mainMenu`为`...:builder:mainMenu`）不是那么好。这意味着 PHP 将寻找一个`builder`类，而不是实际的`Builder`类。因为 PHP 是一种非常懒惰的语言，它会接受`Builder`class 而不是`builder`，但这样做并不好。

**实际解决方案**非常简单：重命名`builder.php`为`Builder.php`.

> **这**不会发生在您的本地环境中，但不会发生在服务器上的原因是因为计算机也很懒（服务器不是）。

# objective-c - 调整uiimage的大小是翻转吗？

> ID：15459544
> 
> 赞同：0
> 
> 时间：2013-03-17T10:04:15.913
> 
> 标签：objective-c

我正在尝试调整 UIImage 的大小。我正在拍摄图像并将其宽度设置为 640（例如），并检查我必须使用的因子，并将其用于图像高度。

不知何故，图像有时会翻转，即使是纵向图像，它也会变成横向。我可能没有注意这里的东西..

```
 //scale 'newImage'
    CGRect screenRect = CGRectMake(0, 0, 640.0, newImage.size.height* (640/newImage.size.width) );
    UIGraphicsBeginImageContext(screenRect.size);
    [newImage drawInRect:screenRect];
    UIImage *scaled = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-17T10:29:26.847

好的，我有答案，但不是她。当我从assetLibrary 中获取图像时，我使用了它：

```
CGImageRef imageRef = result.defaultRepresentation.fullResolution; 
```

这会翻转图像，现在我使用：

```
CGImageRef imageRef = result.defaultRepresentation.fullScreenImage; 
```

图像很好。

# php - jquery-ui，模态表单和 IE8

> ID：15459545
> 
> 赞同：1
> 
> 时间：2013-03-17T10:04:16.427
> 
> 标签：php, forms, jquery-ui, modal-dialog, ie8-compatibility-mode

我有一个用户数据表，使用：

```
jquery-1.9.1.js
jquery-ui-1.10.1.custom.js
and Christian Bach jquery.tablesorter-update
"jquery.tablesorter-update.js" 
```

当使用“模态表单”的演示版时，在与表格相同的页面上创建新用户（表格在表格顶部打开），它在 Chrome 和 Safari 中看起来和工作得很好，但在 IE8 中会变形。

头部片段：

```
<!-- CSS for table -->
<style type="text/css">
            div#tableBody {
              width: 100%;
              padding: 0.3em;
              font-size:x-small;
            }
            table {
              width: 100%;
            }
            table th {
              padding: 0.3em;
            }
            table th span {
              float:right;
            }
            table tr.odd {
              background-color: #FFFFFF;
              }
              div.ui-datepicker {
                font-size:small;
              }
</style>
<!--  jQuery UI Theme Start-->
    <link href="../css/redmond/jquery-ui-1.10.1.custom.css" rel="stylesheet">
    <script src="../js/jquery-1.9.1.js"></script>
    <script src="../js/jquery-ui-1.10.1.custom.js"></script>
    <script src="../js/jquery.ui.datepicker-sv.js"></script>
<!-- jQuery UI Theme End-->

<!--Christian Bach jquery.tablesorter-update Star-->
<script type="text/javascript" src="../scripts/jquery.tablesorter-update.js"></script>
<!--Christian Bach jquery.tablesorter-update End-->

<script language="JavaScript">
<!--
function DeleteItem(idurl)
{
    go_on = confirm("Are you sure?");
    if (go_on)
    {
        document.location.href=idurl;
    }
}   

// Tablesort

$(document).ready(function() { 
    // call the tablesorter plugin 
    $('#itemTable').tablesorter({ 
        // sort on the first column and third column, order asc 
        locale: 'eu', widgets: ['zebra'], useUI: true
    }); 
});

//-->
</script>

<style>
        body { font-size: 62.5%; }
        label, input { display:block; }
        input.text { margin-bottom:12px; width:95%; padding: .4em; }
        fieldset { padding:0; border:0; margin-top:25px; }
        h1 { font-size: 1.2em; margin: .6em 0; }
        div#users-contain { width: 350px; margin: 20px 0; }
        div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
        div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
        .ui-dialog .ui-state-error { padding: .3em; }
        .validateTips { border: 1px solid transparent; padding: 0.3em; }
</style>
<script>
    $(function() {
        var name = $( "#name" ),
            email = $( "#email" ), 
```

============= 从 jquery-ui 模态表单演示中完全剽窃

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T10:01:48.533

我强烈怀疑这个问题更多的是 HTML 和 CSS，而不是 jQuery 所做的任何事情，因为 1.9 是关心旧版本 IE 的最后一个版本。

也就是说，我建议 - 不仅要解决这个问题，还要解决 IE 错误的任何未来问题 - 让您查看 reset.css（好吧，在我被石头砸死之前，使用 normalise.css 是一个更好的主意这些天，你可以在这里找到：[normalise.css](http://necolas.github.io/normalize.css/)

诚然，这并没有专门解决您的问题，但我会坚持在那里，因为这很可能会解决您的问题和任何其他潜在的 IE 问题。

也就是说，我不确定为什么您需要专门设置所有这些宽度，因为桌子无论如何都会占用它所能满足的任何空间来满足它对宽度的“需求”。

# paypal - PayPal Pro：信用卡验证真的有必要吗？

> ID：15459549
> 
> 赞同：0
> 
> 时间：2013-03-17T10:05:00.107
> 
> 标签：paypal, credit-card, luhn

由于 PayPal 收取交易费用而不是支付授权费用，我想知道使用 Luhn 算法进行信用卡验证有什么意义？

我碰巧在 CC 验证方面遇到了麻烦。如果事实证明它不是很重要，我可以简单地摆脱它来解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:20:38.400

我不确定我是否理解您的问题是否完整，但 PayPal 会进行验证检查以验证尝试传递的数据，然后再将其传递给处理器。

# php - 代码点火器 Twitter GET 问题

> ID：15459556
> 
> 赞同：0
> 
> 时间：2013-03-17T10:06:47.567
> 
> 标签：php, codeigniter, twitter-oauth

在遗留 CI 项目上工作，以包括用户授权 Twitter 应用程序以允许该站点向用户发布 DM 的选项（不是我的想法）

我昨天在全新安装的 CI 中插入了来自[epoberezkin](https://github.com/epoberezkin/twitter-codeigniter)的 twtest GIT 项目，一切运行良好。但是，当我将它插入旧版 CI 框架时，它会中断并且不允许用户连接。我想我已经把它缩小到这个功能：

公共函数 twprocess_callback() { $ci = & get_instance();

```
$data = $ci->input->get();
$returned_request_token = $ci->input->get('oauth_token'); 
```

......

变量 $returned_request_token 始终为空，但在我的独立版本中，它从 GET 获取值并按预期​​工作。

我运行了一个`print_r($)_SERVER)`并且数据在那里，但是获取特定部分的 CI 实现`GET`不起作用。我可以分解并手动获取它，但我希望有一个更以 CI 为中心的解释。

CI 中有什么东西可以关闭 GET 方法吗？

问候，罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:23:08.930

可能是配置问题。什么是价值

```
$config['allow_get_array'] 
```

在你的 config.php 中？

# php - 每个月的单独预订日期范围

> ID：15459559
> 
> 赞同：0
> 
> 时间：2013-03-17T10:07:14.193
> 
> 标签：php, mysql, date

我每年有一个场景要玩：

预订表记录：
agent_id start_dt end_dt created_on hotel_id description
--------- 2012-02-27 2012-03-05 ------ ------ - ----------
--------- 2012-06-02 2012-06-04 ------ -------- -------- ---
--------- 2012-03-28 2012-04-02 ------ -------- ----------
----- ---- 2012-08-22 2012-09-10 ------ -------- ----------

有了这张表之后，现在我想有单独的日期特定年份的每个月，例如 2012 年或可能是 2013 年；

> **一月**：无日期

> **二月**: 2012-02-27, 2012-02-28

> **三月**: 2012-03-1, 2012-03-2, 2012-03-3, 2012-03-4, 2012-03-5, 2012-03-28, 2012-03-29, 2012-03-30, 2012-03-31

> **四月**: 2012-04-1, 2012-04-2

> **五月**: 确实没有日期

> **六月**: 2012-06-2, 2012-06-3, 2012-06-4

> **七月**：确实没有日期

> **八月**: 2012-08-22, 2012-08-23, 2012-08-24, 2012-08-25, 2012-08-26, 2012-08-27, 2012-08-28, 2012-08-29, 2012-08-30, 2012-08-31

> **九月**：2012-09-1、2012-09-2、2012-09-3、2012-09-4、2012-09-5、2012-09-6、2012-09-7、2012-09-8、 2012-09-9, 2012-09-10

> **十月**：无日期

> **十一月**：无日期

> **十二月**：无日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:29:22.110

如果你想让 MySQL 为你计算它，

获取所有 start_dt ：

```
SELECT group_concat(start_dt) as all_start_date, DATE_FORMAT(start_dt,'%M') as month 
FROM `your_table_name` 
GROUP BY DATE_FORMAT(start_dt,'%M') 
```

要获取所有 end_dt（只需将所有 start_dt 更改为 end_dt）：

```
SELECT group_concat(end_dt) as all_end_date, DATE_FORMAT(end_dt,'%M') as month 
FROM `your_table_name` 
GROUP BY DATE_FORMAT(end_dt,'%M') 
```

如果您想添加特定条件，例如仅在 2012 年，您应该添加：

```
WHERE DATE_FORMAT(start_dt,'%Y') = '2012' 
```

在 GROUP BY ...之前，它会是这样的，

```
SELECT group_concat(start_dt) as all_start_date, DATE_FORMAT(start_dt,'%M') as month 
FROM `your_table_name` 
WHERE DATE_FORMAT(start_dt,'%Y') = '2012' 
GROUP BY DATE_FORMAT(start_dt,'%M') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:22:01.780

从 mysql 中选择所有日期，然后为每一行计算中间的日期，使用[DatePeriod](http://php.net/manual/en/class.dateperiod.php)将每个日期放入第二个二维数组中，以月份 id 为键

```
$reservations_by_month = [];
foreach ($reservations as $reservation) {
    $begin = new DateTime($reservation['start_dt']);
    $end = new DateTime($reservation['end_dt']);
    $end = $end->modify('+1 day'); 

    $interval = new DateInterval('P1D');
    $daterange = new DatePeriod($begin, $interval ,$end);

    foreach($daterange as $date){
        $month = $date->format('m');
        if (!is_array($reservations_by_month[$month])) $reservations_by_month[$month] = [];
        $reservations_by_month[$month][] = $date->format('Y-m-d');
    }
} 
```

# javascript - 防止删除第一行

> ID：15459561
> 
> 赞同：1
> 
> 时间：2013-03-17T10:07:33.847
> 
> 标签：javascript, jquery, html, html-table

我有一个可以添加/删除行的表。事情是当我删除第一个时，不能再添加任何行。所以，我想防止删除第一行。请问我该怎么做？

谢谢

## jQuery

```
$(document).ready(function ($) {
    // trigger event when button is clicked
    $("button.add").click(function () {
        // add new row to table using addTableRow function
        addTableRow($("table"));
        // prevent button redirecting to new page
        return false;
    });

    // function to add a new row to a table by cloning the last row and 
    // incrementing the name and id values by 1 to make them unique
    function addTableRow(table) {
        // clone the last row in the table
        var $tr = $(table).find("tbody tr:last").clone();
        // get the name attribute for the input and select fields
        $tr.find("input,select").attr("name", function () {
            // break the field name and it's number into two parts
            var parts = this.id.match(/(\D+)(\d+)$/);
            // create a unique name for the new field by incrementing
            // the number for the previous field by 1
            return parts[1] + ++parts[2];
            // repeat for id attributes
        }).attr("id", function () {
            var parts = this.id.match(/(\D+)(\d+)$/);
            return parts[1] + ++parts[2];
        });
        // append the new row to the table
        $(table).find("tbody tr:last").after($tr);
        $tr.hide().fadeIn('slow');
        // row count
        rowCount = 0;
        $("#table tr td:first-child").text(function () {
            return ++rowCount;
        });
        // remove rows
        $(".remove_button").on("click", function () {
            $(this).parents("tr").fadeOut('slow', function () {
                $(this).remove();
                rowCount = 0;
                $("#table tr td:first-child").text(function () {
                    return ++rowCount;
                });
            });
        });
    };
}); 
```

## HTML

```
<table id="table">
    <thead>
        <tr>
            <th width="8" scope="col">&nbsp;</th>
            <th width="131" scope="col">Roba/Usluga</th>
            <th width="144" scope="col">Jmj</th>
            <th width="144" scope="col">Qty</th>
            <th width="144" scope="col">Price</th>
            <th width="144" scope="col">Rabat</th>
            <th width="81" scope="col">&nbsp;</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td></td>
            <td>
                <select name="sif_roba1" id="sif_roba1">
                    <option value="">Please select</option>
                    <option value="1">David Hasselhoff</option>
                    <option value="2">Michael Jackson</option>
                    <option value="3">Tina Turner</option>
                </select>
            </td>
            <td>
                <select name="idjmj1" id="idjmj1">
                    <option value="">Please select</option>
                    <option value="1">David Hasselhoff</option>
                    <option value="2">Michael Jackson</option>
                    <option value="3">Tina Turner</option>
                </select>
            </td>
            <td>
                <input name="cijena1" id="cijena1">
            </td>
            <td>
                <input name="track1" id="track1">
            </td>
            <td>
                <input name="rabat1" id="rabat1">
            </td>
            <td>
                <button type="button" class="btn remove_button">Remove</button>
            </td>
        </tr>
    </tbody>
</table>
<button type="button" class="add" onClick="clickMe();">Add</button> 
```

演示 [http://jsfiddle.net/PBZFw/](http://jsfiddle.net/PBZFw/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:15:48.537

您可以检查行的长度：

```
$(".remove_button").on("click", function () {
    if ( $('#table tbody tr').length === 1 ) return;
    // ...   
}); 
```

[http://jsfiddle.net/QLQRT/](http://jsfiddle.net/QLQRT/)

另一个选项是使用`not`方法和`first-child`选择器：

```
$(this).closest("tr").not(':first-child').fadeOut()... 
```

或者使用 CSS 隐藏第一行按钮：

```
#table tbody tr:first-child .remove_button { display: none; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:32:22.120

在这里解决方案，您可以根据自己的目标优化该功能 [http://jsfiddle.net/PBZFw/](http://jsfiddle.net/PBZFw/)

```
 $(document).ready(function ($) {
        // trigger event when button is clicked
        $("button.add").click(function () {
            // add new row to table using addTableRow function
            addTableRow($("table"));
            // prevent button redirecting to new page
            return false;

        });
        $(document).on("click", ".remove_button", removeTableRow );
        // function to add a new row to a table by cloning the last row and 
        // incrementing the name and id values by 1 to make them unique
        var rowCount = null;
        function addTableRow(table) {
            // clone the last row in the table
            var $tr = $(table).find("tbody tr:last").clone();

            // get the name attribute for the input and select fields
            $tr.find("input,select").attr("name", function () {
                // break the field name and it's number into two parts
                var parts = this.id.match(/(\D+)(\d+)$/);
                // create a unique name for the new field by incrementing
                // the number for the previous field by 1
                return parts[1] + ++parts[2];

                // repeat for id attributes
            }).attr("id", function () {
                var parts = this.id.match(/(\D+)(\d+)$/);
                return parts[1] + ++parts[2];
            });
            // append the new row to the table
            $(table).find("tbody tr:last").after($tr);
            $tr.hide().fadeIn('slow');
            // row count
            rowCount = 0;
            $("#table tr td:first-child").text(function () {
                return ++rowCount;
            });
        };

        function removeTableRow(){    
            var $tbody = $(this).parents('tbody'),
                $trLen = $tbody.find('tr').length
            if ( $trLen === 1 ) return false; 
            $(this).parents("tr").fadeOut('slow', function () {
                    $(this).remove();
                    rowCount = 0;
                console.log( rowCount );
                    $("#table tr td:first-child").text(function () {
                        return ++rowCount;
                    });
            });
        }
    }); 
```

# c++ - 圈圈碰撞资源少

> ID：15459563
> 
> 赞同：0
> 
> 时间：2013-03-17T10:07:48.177
> 
> 标签：c++

我想在一台低资源机器上测试 1000 个圈子在 60 FPS 上碰撞，一台 Iphone（好吧，这绝不是低资源）。我明白这不是一个小问题。我从多个角度看了它，觉得我没有黑客的能力来弄清楚它，实际上我觉得有人可能会立即回应 PFFFFFFF 1000 多么菜鸟。事实上，这正是我所祈求的回应！

我希望我能为这个简单的问题找到这样一个高质量的答案。

例如，这非常出色，我以前从未听说过 BAMS 一词。
[https://stackoverflow.com/a/1049285/310678](https://stackoverflow.com/a/1049285/310678)
和我一无所知的东西。

当您说 20 30 50 100 200 而说 1000 2000 5000 10000 20000 时，这很容易！
请帮我争取高分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:20:18.180

1.  使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)来划分空间并显着减少比较次数。[这是一个很好的教程。](http://gamedev.tutsplus.com/tutorials/implementation/quick-tip-use-quadtrees-to-detect-likely-collisions-in-2d-space/)
2.  检查 2 个圆圈之间的碰撞非常快。半径为 r1 且圆心在 (x1, y1) 的圆与其他半径为 r2 且圆心在 (x2, y2) 的圆碰撞当且仅当：
    `euclideanDistance(x1, y1, x2, y2) <= r1 + r2`。
3.  您的 FPS 不仅很大程度上取决于算法，还取决于渲染方式。尝试预先计算您的位图或您想要显示的任何内容，以便稍后仅在屏幕上“blit”（复制像素）。使用硬件加速的方法。
4.  可能的优化：使用整数算法而不是浮点数。

[关于SO的类似问题。](https://stackoverflow.com/questions/4981866/quadtree-for-2d-collision-detection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:36:58.680

这就是我最终提出的基本解决方案。

*   它可以从测试中扣除所有减法。
*   它极大地减少了需要完成的测试数量。
*   它可以很容易地分成不同的线程。
*   它给了我一个很好的表现。
*   它工作时让我感觉很酷。
*   它专注于计算机擅长的领域。

    ```
    void Collider::test_one(Actor * actor){
        std::sort(this->_stack->begin(),this->_stack->end(),*Collider::sort_x);

        vector<Actor*>::iterator it_target = std::find(this->_stack->begin(),this->_stack->end(),actor);
        vector<Actor *> possible_x;
        vector<Actor *> possible_y;

        int x = 1;
        int count = 0;

        Actor * one = *(it_target);
        Actor * two;

         /*
         for(int x= 0; x < this->_stack->size(); x++){
         cout << this->_stack->at(x)->x_loc << "\n";
         }
        */

        //cout << "***" << "\n";

        while ( it_target +x != this->_stack->end()) {
            two = *(it_target+x);

            //cout << one->half_width+two->half_width+one->x_loc << "\n";
            //cout << two->x_loc << "\n";

            if(one->half_width+two->half_width+ one->x_loc > two->x_loc){
                possible_x.push_back(two);
            }else{
                break;
            }
            count ++;
            x++;
        }

        reverse_iterator<vector<Actor*>::iterator> rit_target(it_target);
        x=0;
        while (rit_target +x != this->_stack->rend()) {
            two = *(rit_target+x);
            if(two->half_width+one->half_width+ two->x_loc > one->x_loc){
                possible_x.push_back(two);
            }else{
                break;
            }
            count ++;
            x++;
        }

        //cout <<count <<" POSSIBLE X \n";

        x=1;
        count=0;
        std::sort(this->_stack->begin(),this->_stack->end(),*Collider::sort_y);
        it_target = std::find(this->_stack->begin(),this->_stack->end(),actor);

        /*
        for(int x= 0; x < this->_stack->size(); x++){
           cout << this->_stack->at(x)->y_loc << "\n";
        }
        */

        while ( it_target +x != this->_stack->end()) {
            two = *(it_target+x);

            //cout << one->half_width+two->half_width+ one->y_loc << "  DISTANCE\n";
            //cout << two->y_loc << "  Y_LOC \n";

            if(one->half_width+two->half_width+ one->y_loc > two->y_loc){
                possible_y.push_back(two);
            }else{
                break;
            }
            count ++;
            x++;
        }

        reverse_iterator<vector<Actor*>::iterator> yrit_target(it_target);
        x=0;
        while (yrit_target +x != this->_stack->rend()) {
            two = *(yrit_target+x);
            if(two->half_width+one->half_width+ two->y_loc > one->y_loc){
                possible_y.push_back(two);
            }else{
                break;
            }
            count ++;
            x++;
        }

        //cout <<count <<" POSSIBLE Y \n";

        vector<Actor *> result;

        std::sort(possible_x.begin(),possible_x.end());
        std::sort(possible_y.begin(), possible_y.end());

        std::set_intersection(possible_x.begin(), possible_x.end(),possible_y.begin(),possible_y.end(),back_inserter(result));

        for(int x=0; x< result.size();x++){
            //cout << result.at(x)  << " COLLISION";
            result.at(x)->collision(*actor);
        }

    } 
    ```

    关于加快速度的任何建议？我知道我这里一团糟，一周前我什至不知道如何使用迭代器。

# ruby - 如何在 Rake 中获取当前的 Rack 环境？

> ID：15459569
> 
> 赞同：8
> 
> 时间：2013-03-17T10:08:29.180
> 
> 标签：ruby, rake, rack

有没有办法在 Rake 中获取有关当前 Rack 环境的信息？例如，我如何判断 Rack 是在运行`development`还是在`production`模式下运行？

我知道 Rake 不支持 Rack。我试图避免在生产环境和开发环境之间几乎相同的 Rake 任务中复制代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-23T11:48:28.440

问题很旧，但从未获得最佳实践答案或令人满意的答案。

真正的问题是：**如何确定在 Rake 任务中使用哪个环境以加载正确的配置/命中正确的 if 条件。**

> 注意：由于 Rake 没有提供太多关于 Rack 的信息（Rake 不使用 HTTP），因此依赖 RACK_ENV 基本上是错误的，但如果 R​​ake 任务加载您的主 Sinatra 应用程序（需要 RACK_ENV 来让 Sinatras 开发？/测试？/生产？设置正确）。

答案：**在每个 Rake 任务调用中设置环境。**

命令行调用：

```
/usr/bin/rake namespace:task_name RACK_ENV=production 
```

Cronjob 调用（在 crontab 中）：

```
cd /into/your/app/root && /usr/bin/rake namespace:task_name RACK_ENV=production --silent 
```

> 注意：如果您在全局系统变量中指定了 Rake bin 的路径，则无需指定它。您的路径可能与示例中使用的路径不同，请使用以下命令检查 Unix 系统： whereis rake

您可以`RACK_ENV`通过以下方式检查您的任务：

```
puts ENV["RACK_ENV"] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T10:20:07.680

作为其他环境变量，您可以使用以下方法检索它：

```
ENV['RACK_ENV'] 
```

考虑到它是一个 Sinatra 应用程序，并且您已将环境设置为`config/environment.rb`，您可以将以下内容添加到您的`Rakefile`：

```
task :environment do
  require File.expand_path('config/environment', File.dirname(__FILE__))
end

task :your_task => :environment do
  # task
end 
```

然后，您可以使用或检索环境（取决于您在 中如何设置`environment.rb`）。`ENV['RACK_ENV']``Sinatra::Application.environment`

考虑到没有`config/environment.rb`配置文件，只有应用程序文件，例如`hello_world.rb`，以下工作：

hello_world.rb：

```
require 'sinatra'

set :environment, :production

get '/' do
  'Hello World'
end 
```

耙文件：

```
task :environment do
  require File.expand_path('hello_world', File.dirname(__FILE__)) # your Sinatra app
end

task :your_task => :environment do
  puts Sinatra::Application.environment
end 
```

这样做时，`rake your_task`您应该获得：

```
> rake your_task
production 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-13T10:03:56.933

*2.5 年后，我想分享我发现的最佳解决方案。*

* * *

在应用程序的根文件夹中创建一个`.env`文件，并添加一个指定应用程序环境的标志：

```
ENVIRONMENT=development 
```

然后使用 Brandon Keepers 的[**`dotenv`**](https://github.com/bkeepers/dotenv)gem 从这个文件中加载所有的环境变量。`.env`现在您可以使用在 Rake 任务中指定的任何环境变量。

Rake 将依赖于 中设置的显式值`.env`，因此您必须`.env`为您计划使用的每个环境（例如*dev*、*test*、*staging*、*production*等）创建单独的文件。

样品`Rakefile`：

```
require 'dotenv/tasks'

task :default => :help

desc 'Show this help menu'
task :help do
    puts "Available rake tasks:"
    system('rake --tasks')
end

# Will run in any environment
desc 'Demo task'
task :demo_task => :dotenv do
    puts "Running demo task in '#{ENV['ENVIRONMENT']}' mode"
end

# Will only run if ENVIRONMENT value in .env file is set to 'production'
desc 'Production-only task'
task :production_task => :dotenv do
    if ENV['ENVIRONMENT'] == 'production'
        puts "Running 'Production-only' task"
    else
        puts "Won't run, because the environment is not set to PRODUCTION!"
    end
end

# Will only run if ENVIRONMENT value in .env file is set to 'development'
desc 'Development-only task'
task :dev_task => :dotenv do
    if ENV['ENVIRONMENT'] == 'development'
        puts "Running 'Development-only' task"
    else
        puts "Won't run, because the environment is not set to DEVELOPMENT!"
    end
end 
```

如果您想在您的 Rack 或 Sinatra 应用程序中使用环境变量（您可能会这样做），请将以下内容添加到应用程序的配置或引导程序块中：

```
require 'dotenv'
Dotenv.load 
```

# sql - 在 plpgsql 中连接输出

> ID：15459570
> 
> 赞同：0
> 
> 时间：2013-03-17T10:08:42.233
> 
> 标签：sql, postgresql, concatenation, aggregate-functions, plpgsql

我想在连接的文本输出中输出以下 plpgsql 函数的结果。

我该怎么做？我想要类似的东西：

```
output = output + 'new point'; 
```

到目前为止我的功能：

```
DECLARE 
    descriptions text[];
    i text;
    counter int := 1;
    _r record;
    output text;

BEGIN

    descriptions = string_to_array(description, ',');

    FOREACH i IN ARRAY descriptions

    LOOP

        FOR _r IN EXECUTE 'select point_id as id, name_of_location as name, description as desc
                   from information_on_point_of_interest
                   where description = '''||descriptions[counter]||''''

        LOOP
            output := output + _r.id || ',' || _r.name || ',' || _r.desc || '|';

        END LOOP;

    END LOOP;

RETURN output;

END; 
```

`output := output + new point`好像不支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:23:39.250

### 为什么？

您的功能失败，因为您没有初始化`output`. 它从`NULL`停留开始，`NULL`因为`NULL || anything`结果......`NULL`

您还应该使用`concat_ws()`car`NULL`获取连接列中的任何值。

### 适当的解决方案

使用这个简单的 SQL 查询可以更快（更正确）地完成您想要实现的目标：

```
SELECT string_agg(concat_ws(',', point_id, name_of_location, description), '|')
FROM  (SELECT unnest(string_to_array(description_list, ',')) AS description) x
JOIN   information_on_point_of_interest USING (description); 
```

我将您的描述列表重命名为`description_list`以减少混乱。
在手册中阅读这些功能：

*   [`unnest()`](http://www.postgresql.org/docs/current/interactive/functions-array.html)(PostgreSQL 8.4+)
*   [聚合函数`string_agg()`](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)(PostgreSQL 9.0+)
*   [`concat_ws()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)(PostgreSQL 9.1+)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:06:52.417

concat 运算符是`||`SQL 标准。

您的问题是没有初始化该变量，所以您正在做的是`null || text`并且将 null 与任何内容连接的结果为 null。你必须像这样初始化它：

```
DECLARE 
    output text:=''; 
```

[http://sqlfiddle.com/#!12/9e854/1](http://sqlfiddle.com/#!12/9e854/1)

# intellij-idea - 在 IntelliJ 中导入 gradle 项目

> ID：15459573
> 
> 赞同：7
> 
> 时间：2013-03-17T10:08:50.360
> 
> 标签：intellij-idea, gradle

我有 IntelliJ 12.0 和 gradle 1.2。在 Windows 7 上。当我尝试导入 build.gradle 文件时，我在 IntelliJ 中收到以下错误消息。我有点迷失在这里。有想法该怎么解决这个吗？

```
 (ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
 Caused by: org.jetbrains.plugins.gradle.remote.GradleApiException: 
 Could not fetch model of type 'BasicIdeaProject' using Gradle installation 'C:\Program Files (x86)\gradle-1.2'.
 The newly created daemon process has a different context than expected.
 It won't be possible to reconnect to this daemon. Context mismatch: 
 Java home is different.
 Wanted: DefaultDaemonContext[uid=null,javaHome=c:\program files (x86)\jetbrains     \intellij idea 12.0\jre\jre,daemonRegistryDir=C:\Users\Nilo\.gradle     \daemon,pid=5144,idleTimeout=null,daemonOpts=-XX:MaxPermSize=256m,-XX:     +HeapDumpOnOutOfMemoryError,-Xmx1024m,-Dfile.encoding=windows-1252]
 Actual: DefaultDaemonContext[uid=d8c5c4bc-5488-42c2-b4b3-28c1d53afacf,javaHome=C:     \Program Files (x86)\JetBrains\IntelliJ IDEA 12.0\jre,daemonRegistryDir=C:\Users\Nilo \.gradle\daemon,pid=6880,idleTimeout=10800000,daemonOpts=-XX:MaxPermSize=256m,-XX:+HeapDumpOnOutOfMemoryError,-Xmx1024m,-Dfile.encoding=windows-1252]
at org.jetbrains.plugins.gradle.remote.impl.GradleProjectResolverImpl.resolveProjectInfo(GradleProjectResolverImpl.java:61)
... 21 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T10:51:48.363

看起来它可能会在 12.1 或 12 EAP 中修复：[IDEA-102365](http://youtrack.jetbrains.com/issue/IDEA-102365)，[IDEA-89697](http://youtrack.jetbrains.com/issue/IDEA-89697)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-05T02:34:29.437

我的修复：文件->项目结构->将jdk路径更改为没有jre。

我不确定它是如何到达那里的，但我花了很长时间才找到*它*。也许是因为它从以前的错误安装中获取了设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-05T20:43:37.660

虽然我没有找到不同 javaHome 的根本原因，但至少我找到了一个对我有用的解决方法：

尝试在您的`gradle.properties`（在您的项目构建目录中`%USERPROFILE%\.gradle\`或在您的项目构建目录中）设置以下内容：

```
org.gradle.java.home=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0\jre 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-28T12:07:05.313

IntelliJ v15.0.6，同样的问题。

我使用的 JRE 不是 IntelliJ 内置的。

*   我确保 JAVA_HOME 指向我的 JRE，然后
*   我删除了“C:\Program Files (x86)\JetBrains\IntelliJ IDEA 15.0.6\”，然后
*   我重新启动了 IntelliJ。

现在我的 gradle 构建脚本可以在 IntelliJ 中正常工作。

# c - lseek 是否适用于文件重定向？

> ID：15459574
> 
> 赞同：0
> 
> 时间：2013-03-17T10:08:50.827
> 
> 标签：c, stdin, io-redirection, seek, fcntl

通常`lseek`对`stdin`.

但是，如果我像这样运行我的程序怎么办：

`./a.out < filename`

现在`stdin`是文件而不是键盘。

会`lseek`在那里工作吗？

我可不可以做

`lseek(0, -1, SEEK_CUR)`

并获得相同的效果

`ungetc()`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:10:03.363

是的，`lseek`会改变搜索指针。不，它不等于`ungetc()`.

`fseek(stdin, -1, SEEK_CUR)`更接近`ungetc()`，但仍不相同。

# vba - If...Then...Else 在 Then 之后有多个语句

> ID：15459576
> 
> 赞同：13
> 
> 时间：2013-03-17T10:09:03.557
> 
> 标签：vba, if-statement, conditional-statements

一个非常简单的问题：考虑`If...Then...Else`到 VBA 中的一条指令，之后如何分隔多条指令`Then`？换句话说，我应该写类似

```
If condition [ Then ]    
   [ statement1 ] & [statement2] 
Else [Else statement] (i.e. using "&"), 
```

或者

```
If condition [ Then ]         
   [ statement1 ] And [statement2] 
Else [Else statement] (i.e. using "And"), 
```

或其他一些分隔符/命令？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-17T10:55:31.383

多个语句将由一个新行分隔：

```
If SkyIsBlue Then
  StartEngines
  Pollute
ElseIf SkyIsRed Then
  StopAttack
  Vent
ElseIf SkyIsYellow Then
  If Sunset Then
    Sleep
  ElseIf Sunrise or IsMorning Then
    Smoke
    GetCoffee
  Else
    Error
  End If
Else
  Joke
  Laugh
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-30T20:08:42.263

这适用于多个语句：

```
if condition1 Then stmt1:stmt2 Else if condition2 Then stmt3:stmt4 Else stmt5:stmt6 
```

或者您可以将其拆分为多行：

```
if condition1 Then stmt1:stmt2
Else if condition2 Then stmt3:stmt4
Else stmt5:stmt6 
```

# java - java - 如何使用正则表达式获取java中类似列表的字符串中的每个字段？

> ID：15459581
> 
> 赞同：1
> 
> 时间：2013-03-17T10:09:33.473
> 
> 标签：java, regex, regex-group

我想解析一个字符串，比如`{"aaa","bbb", "ccc"}`to `aaa,bbb,ccc`。我怎样才能在java的正则表达式中做到这一点？我尝试编写如下代码：

```
String s = "{\"aaa\",\"bbb\", \"ccc\"}";
Pattern pattern = Pattern.compile("\\{\\\"([\\w]*)\\\"([\\s]*,[\\s]*\\\"([\\w]*)\\\")*}");
Matcher matcher = pattern.matcher(s);
if(matcher.find())      {
    StringBuilder sb = new StringBuilder();
    int cnt = matcher.groupCount();
    for(int i = 0; i < cnt; ++i)        {
        System.out.println(matcher.group(i));
    }
} 
```

但输出是

```
{"aaa","bbb", "ccc"}
aaa
, "ccc" 
```

我有一种感觉，这是关于小组和不贪婪匹配的东西，但我不知道该怎么写，有人可以帮我吗？非常感谢！

**PS**我知道如何使用类似的方法来做到这一点`String.replace`，我只是想知道它可以通过正则表达式来完成。谢谢

**感谢您的所有回答和时间，但我首先想要的是在 java 中使用正则表达式的委托解决方案，尤其是在`regex`. 我想知道如何使用`group`来解决它。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:24:55.743

试试这个。

```
import java.util.*;
public class Main{

    public static void main(String[] args){
        String s = "{\"aaa\",\"bbb\", \"ccc\"}";
        s = s.substring(1,s.length() -1 );
        s = s.replace("\"","");
        String[] sa = s.split(", ?");
        for (int i = 0; i < sa.length; i++)
            System.out.println(sa[i]);
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:26:31.317

试试这个示例代码：

```
public class RegexTester {
public static void main(String[] args) throws Exception {
    String data = "{\"aaa\",\"bbb\", \"ccc\"}";

    String modifiedData = data.replaceAll("\\{|\"|\\}", "");

    System.out.println("Modified data : " + modifiedData);
} 
```

使用正则表达式试试这个模式：

```
Pattern pattern = Pattern.compile("\\{\"(.+?)\"(,?)\"(.+?)\"(,?)\\s*\"(.+?)\"");
    Matcher matcher = pattern.matcher(data);
    System.out.println("Started");
    while (matcher.find()) {

        System.out.print(matcher.group(1));
        System.out.print(matcher.group(2));
        System.out.print(matcher.group(3));
        System.out.print(matcher.group(4));
        System.out.print(matcher.group(5));
    } 
```

希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T10:50:54.517

仅正则表达式匹配：*相当复杂*

正则表达式模式：`(?:\{(?=(?:"[^"]+"(?:, ?|(?=\})))*\})|(?!^)\G, ?)"([^"]+)"`
注意：它需要**全局**修饰符**g**，*需要转义*，使用**无限**数量的标记

在这里解释演示：[http ://regex101.com/r/iE9gS1](http://regex101.com/r/iE9gS1)

# ruby-on-rails - 在Rails中，需要在相同的两个模型之间设置多对多关系和一对多关系

> ID：15459586
> 
> 赞同：1
> 
> 时间：2013-03-17T10:09:50.923
> 
> 标签：ruby-on-rails, activerecord

我有一个应用程序，其中项目属于一个所有者（用户）并且拥有并属于许多成员（用户）。

我在模型中设置了以下代码来处理这些关联。请注意，项目在其数据库中有 owner_id 但没有 member_id

项目模型代码

```
attr_accessible :description, :name, :owner_id, :avatar_url

belongs_to :owner, foreign_key: :owner_id, class_name: "User"
has_and_belongs_to_many :members, class_name: "User" 
```

用户型号代码

```
has_and_belongs_to_many :projects
has_many :owned_projects, class_name: "Project", foreign_key: "owner_id"
has_many :associated_projects, class_name: "Project", foreign_key: "member_id" 
```

在给定的项目中，我可以调用 p.owner 但不能调用 p.members。对于用户，我可以调用 u.owned_projects 或 u.projects，但不能调用 u.associated_projects。

当我尝试这些命令时，我收到以下错误

```
1.9.3p194 :003 > p.members
User Load (0.2ms)  SELECT "users".* FROM "users" INNER JOIN "projects_users" ON "users"."id" = "projects_users"."user_id" WHERE "projects_users"."project_id" = 3
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: projects_users: SELECT "users".* FROM "users" INNER JOIN "projects_users" ON "users"."id" = "projects_users"."user_id" WHERE "projects_users"."project_id" = 3 
```

和

```
1.9.3p194 :007 > ryan.associated_projects
Project Load (0.2ms)  SELECT "projects".* FROM "projects" WHERE "projects"."member_id" = 14593
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: projects.member_id: SELECT "projects".* FROM "projects"  WHERE "projects"."member_id" = 14593 
```

如何设置这些模型，以便它们按我的意愿工作？

注意：我在之后建模了我的代码 -[相同模型之间的两个 has_many 链接，](https://stackoverflow.com/questions/6509227/two-has-many-links-between-the-same-models)但它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:54:26.423

您的 User 和 Project 模型中必须有 has_many_and_belongs_to 关系。您还需要一个中间表。[http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

```
Class Project < ActiveRecord::Base

     attr_accessible :description, :name, :owner_id, :avatar_url

     belongs_to :owner, foreign_key: :owner_id, class_name: "User"
     has_and_belongs_to_many :members, class_name: "User"

end

Class User < ActiveRecord::Base

     has_and_belongs_to_many :projects
     has_many :owned_projects, class_name: "Project", foreign_key: "owner_id"

end 
```

如前所述，您必须在成员项目和用户（成员）之间有一个中间表。当您尝试查看项目成员时出现该错误：**没有这样的表：projects_users**

```
Projects_Users Table
user_id | project_id 
```

# c# - 逆变通用接口，以及我不断遇到的一堵墙

> ID：15459591
> 
> 赞同：4
> 
> 时间：2013-03-17T10:10:35.610
> 
> 标签：c#, generics, contravariance

我有一个`Company`包含不同列表的类`IFactory<IPart>`；例如一个`EngineFactory`.

```
public class Company
{
    private Dictionary<Type, IFactory<IPart>> _factories;

    public Company()
    {
        _factories = new Dictionary<Type, IFactory<IPart>>();
        _factories[typeof (Engine)] = new EngineFactory();
    }

    public void SendOrderIntakeToFactory(IPart part)
    {
    }
} 
```

`EngineFactory`看起来像这样：

```
public class EngineFactory : IFactory<Engine> 
{
    public void Produce(Engine part)
    {
    }
} 
```

和`IFactory`界面：

```
public interface IFactory<T> where T : IPart
{
    void Produce(T part);
} 
```

这将导致编译器错误：

> > 无法将类型“EngineFactory”隐式转换为“IFactory”。存在显式转换（您是否缺少演员表？）

在这条线上：`_factories[typeof (Engine)] = new EngineFactory();`

好的，这对我来说很有意义，如果不指定方差，这将永远不会起作用。所以我尝试将`out`关键字添加到泛型类型`T`，但这将迫使我删除`T`as 方法参数（因为它不允许`<out T>`用作输入参数）：

```
public interface IFactory<out T> where T : IPart
{
    void Produce(IPart part);
} 
```

这显然打破了我的通用设计。我能够`Wheel`在我的`EngineFactory`.

我理解挑战在于这两个要求：

*   将工厂存储为`IFactory<IPart>`
*   `void Produce(T part);`在工厂中需要一个通用的实现。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:18:47.003

如果泛型类型参数仅用作方法的返回类型，则可以将其标记为协变。更改`Produce`方法以返回部分，一切都会起作用

```
public interface IFactory<out T> where T : IPart
{
    T Produce();
} 
```

如果将协变类型参数用作方法参数，则不能使用它。

顺便说一句，这是一个非常奇怪的工厂，它接受对象而不是创建它们。

* * *

更新您可以将运行时类型定义与动态一起使用：

```
public class Company
{
    private Dictionary<Type, dynamic> _factories;

    public Company()
    {
        _factories = new Dictionary<Type, dynamic>();
        _factories[typeof(Engine)] = new EngineFactory();
    }

    public void SendOrderIntakeToFactory(IPart part)
    {
        _factories[part.GetType()].Produce((dynamic)part);
    }
} 
```

你什么时候打电话

```
company.SendOrderIntakeToFactory(new Engine()); 
```

然后`EngineFactory`将被选中，并`Produce`使用运行时类型的参数调用它的方法`Engine`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T10:46:37.267

我想你可以稍微放松一下字典。考虑以下“工厂容器”：

```
public class Factories
{
    private Dictionary<Type, object> _factories;

    public Factories()
    {
        _factories = new Dictionary<Type, object>();
        _factories[typeof (Engine)] = new EngineFactory();
    }

    public IFactory<TPart> GetFactory<TPart>() where TPart:IPart
    {
        //TODO: add check whether typeof(TPart) exist in the dictionary
        return (IFactory<TPart>)_factories[typeof(TPart)];
    }
} 
```

此实现将允许您执行以下操作：

```
var factories = new Factories();
var engineFactory = factories.GetFactory<Engine>();
var engine = new Engine();
engineFactory.Produce(engine); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T11:22:55.790

你特别想做的（混合协方差和逆变）是一个**兔子洞**。唯一的解决方案是**不要**像这样混合方差；当您觉得需要混合方差时，请转到运行时类型检查。

[更新] 这将解决两个问题（强类型和灵活的位置）

```
interface IPart{}
class Engine : IPart{} 

interface IMachine
{
    void Produce(IPart part);
    Type Type { get; }
}

interface IGenericMachine<in TPart> : IMachine
{
    void Produce(TPart with);
}

class EngineMachine : IGenericMachine<Engine>
{
    public void Produce(Engine with)
    {
    }

    public void Produce(IPart part)
    {
        if (part.GetType() != typeof(Engine))
            throw new ArgumentException("part must be an Engine");
    }

    public Type Type { get { return typeof (Engine); } }
}

internal class MachineLocator
{
    public Dictionary<Type, IMachine> Machines;

    public IGenericMachine<TPart> GetMachine<TPart>()
    {
        return Machines
            .Select(x => x.Value)
            .OfType<IGenericMachine<TPart>>()
            .Single();
    }

    public IMachine GetMachine(Type type)
    {
        return Machines
            .Where(x => x.Value.Type == type)
            .Select(x=>x.Value)
            .Single();
    }
}

class Program
{
    static public void Main()
    {
        var locator = new MachineLocator();

        locator.Machines.Add(typeof(EngineMachine), new EngineMachine());

        var machineKnown = locator.GetMachine<Engine>();
        var machineUnknown = locator.GetMachine(typeof(Engine));

        machineUnknown.Produce(new Engine());
    }
} 
```

当一切已经说过并且做完了; 看一下*控制反转*作为一般程序的更好设计模式。基本上类不寻找东西，他们得到它。

# php - 用户使用 Concrete5 更新滑块和图库图像的最简单方法是什么？

> ID：15459593
> 
> 赞同：0
> 
> 时间：2013-03-17T10:10:42.240
> 
> 标签：php, content-management-system, concrete5

为了在 C5 中创建一个可编辑的窗格，我在 div 标签之间使用了以下内容，这样用户就可以简单地使用内容编辑器来添加文本。这很好用：

```
<div class="myWrapper">
<?php  
$a = new Area('WelcomeText');
$a->display($c);
?>
</div> 
```

但是当标记有点复杂时我该怎么办？我想让用户自己更新 2 张图片和各自的链接。例如图片：http: [//i48.tinypic.com/4jma8p.png](http://i48.tinypic.com/4jma8p.png)

非代码文化用户执行此操作的最简单方法是什么？

```
<ul class="Gal_2">
 <li class="Frst">
    <a href="<?php  echo $this->getThemePath(); ?>/Images/TEMP_IMG2.jpg" rel="group">
      <img src="<?php  echo $this->getThemePath(); ?>/Images/TEMP_IMG2.jpg" width="224" height="150" alt="Island Rab" align="left" />
    </a>
 </li>
 <li>
    <a href="<?php  echo $this->getThemePath(); ?>/Images/TEMP_IMG1.jpg" rel="group">
      <img src="<?php  echo $this->getThemePath(); ?>/Images/TEMP_IMG1.jpg" width="224" height="150" alt="Island Rab - Lopar beach" align="right" />
    </a>
 </li>
</ul> 
```

在此先感谢... PC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:08:00.023

使用免费的 Designer Content 插件创建自定义块：http: [//www.concrete5.org/marketplace/addons/designer-content](http://www.concrete5.org/marketplace/addons/designer-content)

您创建的块将有两个链接到其他页面的图像字段，然后使用“静态 html”字段用您的`<ul>`和`<li>`标签包围图像。

这实际上是 Designer Content 的完美用例，因此它应该是不言自明的。但是，如果您遇到问题，请在支持论坛上发布消息（或直接发送电子邮件至 concrete@jordanlev.com）。

# java - Ektorp CouchDB 测试连接

> ID：15459604
> 
> 赞同：1
> 
> 时间：2013-03-17T10:12:02.137
> 
> 标签：java, couchdb, ektorp

我正在开发一个使用 Ektorp 框架与 CouchDB 通信的 Java 应用程序。我使用以下代码创建一个新的 CouchDbInstance：

```
HttpClient httpClient = new StdHttpClient.Builder()
    .host("localhost")
    .port("5984")
    .username("")
    .password("");

/* no user name and password required because, its admin party */

CouchDbInstance couchDbInstance = new StdCouchDbInstance(httpClient); 
```

现在我想在创建/修改等文档之前测试与 CouchDB 的连接。没有测试连接的方法。你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:06:08.340

您可以使用 CouchDbConnector#getDbInfo()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:08:37.663

我在我当前的项目中使用 Ektorp，我们正在使用 couchDbConnector.getAllDatabases() 进行测试，捕获 DbAccessExceptions。

与 checkIfDbExists() 相比，这有一点优势，即完全不知道在 CouchDB 服务器上配置的实际数据库，并且不引用任何特定于应用程序的配置进行连接检查，感觉更简洁一些。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-30T22:12:01.337

我目前正在使用 ektorp 开展一个项目，并且正在像这样测试我的数据库连接。

第 1 步 - 连接到 HttpClient 就像你做的那样

```
 HttpClient httpClient = new StdHttpClient.Builder()
    .host("localhost")
    .port("5984")
    .username("")
    .password("");

/* no user name and password required because, its admin party */

CouchDbInstance couchDbInstance = new StdCouchDbInstance(httpClient); 
```

第 2 步——创建一个 CouchDbInstance

```
CouchDbInstance dbInstance = new StdCouchDbInstance(httpClient); 
```

第 3 步 - 使用 CouchDbConnector 连接到本地 CouchDB 中的特定数据库（在此示例中，我的数据库称为专辑，但您只需输入要连接的任何数据库的名称，而不是您正在编码的专辑）

```
CouchDbConnector albums = dbInstance.createConnector("albums", true); 
```

第 4 步——您可以像这样打印出您连接的数据库的名称。

```
System.out.println(albums.getDatabaseName()); 
```

您还可以创建一个端点，通过创建一个字符串类型的方法，在浏览器中打印您连接到的数据库的名称

```
return albums.getDatabaseName(); 
```

我希望这是有帮助的。我使用 ektorp 的[参考文档](http://ektorp.org/reference_documentation.html#d100e1191)来了解这一点。我花了一段时间才弄清楚如何像这样使用 ektorp，我还在学习！

# python - 将 Neo4j 子图加载到 Networkx

> ID：15459615
> 
> 赞同：18
> 
> 时间：2013-03-17T10:13:50.903
> 
> 标签：python, neo4j, networkx, graph-databases, subgraph

我一直在通过 python 的 Bulbflow 处理 Neo4j，现在需要一种方法来保存/导出子图。我已经看到了 Java 甚至 Ruby 方法来做到这一点，但是一个简单的 Python 方法似乎对我隐藏了..

到目前为止，我发现了两条可能的路径：

1.  通过[py2neo](http://pythonhosted.org/py2neo/geoff.html)访问[Geoff](http://nigelsmall.com/geoff)，但令人惊讶的是，很少有文档用于从大型本地 neo4j 数据库或 neo4jserver 中提取子图。

2.  使用[Networkx](http://networkx.github.com/)：我发现 networkx 可以从许多不同格式加载图形（我不确定 neo4j 存储它们的 dbs 的格式），但是我还没有找到将仅一个子图提取到 Networkx 中的方法。我认为这应该通过 gremlin 查询来完成，但我不知道该怎么做。

我偏爱 Networkx 路径，因为它还带有我希望应用于子图的网络分析算法。我觉得它也可以避免 Bulbflow 和 py2neo 之间的潜在冲突，尽管我不确定这种冲突是否会存在。

任何建议将不胜感激！

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T19:07:05.290

直到你问我才知道答案，但似乎你可以在 gml 中导出，networkx 可以读取。以下是一些可能有用的答案：

[Neo4j 导出树](https://stackoverflow.com/questions/6871860/neo4j-export-tree)

[将 Neo4j DB 转换为 XML？](https://stackoverflow.com/questions/2204440/convert-neo4j-db-to-xml)

[https://github.com/tinkerpop/gremlin/wiki/Gremlin-Methods](https://github.com/tinkerpop/gremlin/wiki/Gremlin-Methods)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-24T09:26:28.720

我知道这是一个老问题，但如果你像我一样偶然发现它——知道 networkx 有一个 subgraph[命令](https://networkx.github.io/documentation/networkx-1.10/reference/generated/networkx.Graph.subgraph.html)，所以你可以从 Neo4j 加载整个图并使用它。

# iphone - 获取当前时间并保持更新 - Objective C

> ID：15459622
> 
> 赞同：4
> 
> 时间：2013-03-17T10:14:30.030
> 
> 标签：iphone, ios, objective-c

我知道如何使用 NSDate 来获取时间并将其显示在 UILabel 中。

我需要显示日期+小时和分钟。知道如何在不忙于等待的情况下保持更新吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T10:23:21.900

使用 NSTimer 更新标签上的时间

```
- (void)viewDidLoad
 {
  [super viewDidLoad];

   [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateTime) userInfo:nil repeats:YES];
 }

-(void)updateTime
{

NSDate *date= [NSDate date];
NSDateFormatter *formatter1 = [[NSDateFormatter alloc]init]; //for hour and minute

formatter1.dateFormat = @"hh:mm a";// use any format 

clockLabel.text = [formatter1 stringFromDate:date];

[formatter1 release];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T10:52:04.443

正如您的评论所说，如果您想在分钟更改时更改`label.text`

你应该这样做：

1st：获取当前时间：

```
NSDate *date = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponents = [calendar components:NSHourCalendarUnit fromDate:date]; 
```

并设置`label.text = CURRENTHOUR_AND_YOURMINNUTS`；

然后在下一分钟刷新标签，如下所示：

首先，您可以在`60 - nowSeconds` [self performSelector:@selector(refreshLabel) withObject:nil afterDelay:(60 - dateComponents.minute)] 之后检查；

```
- (void)refreshLabel
{
    //refresh the label.text on the main thread
    dispatch_async(dispatch_get_main_queue(),^{      label.text = CURRENT_HOUR_AND_MINUTES;    });
    // check every 60s
    [self performSelector:@selector(refreshLabel) withObject:nil afterDelay:60];
} 
```

它会每分钟检查一次，所以效果不仅仅是上面的答案。

调用时`refreshLabel`，表示分钟已更改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T10:22:41.107

您可以使用 NSTimer 定期获取当前时间。

```
[NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];

- (void)timerFired:(NSTimer*)theTimer{
 //you can update the UILabel here.
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-17T10:32:37.057

您可以使用 NSTimer ，但是，鉴于上述方法，UILabel 不会在触摸事件上更新，因为主线程将忙于跟踪它。您需要将其添加到`mainRunLOOP`

```
 NSTimer* timer = [NSTimer timerWithTimeInterval:1.0f target:self selector:@selector(updateLabelWithDate) userInfo:nil repeats:YES];
    [[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];

-(void)updateLabelWithDate
{
   //Update your Label
} 
```

您可以更改时间间隔（您想要更新的速率）。

# php - jQuery的PHP联系表单错误

> ID：15459624
> 
> 赞同：-2
> 
> 时间：2013-03-17T10:15:09.343
> 
> 标签：php, jquery, forms, contact

我有一个带有验证的 PHP 联系表单，我想用 jQuery 效果显示错误/成功消息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:17:24.170

为此，您必须使用 ajax 将表单数据发布到服务器，然后在服务器端验证并插入数据库后，您将响应发送回客户端。

您可以使用隐藏的 div 将响应放入其中，然后您可以使该 div 可见以显示错误或确认消息。

# python - 在python中为str.join别名

> ID：15459633
> 
> 赞同：3
> 
> 时间：2013-03-17T10:16:48.063
> 
> 标签：python, python-3.x

`str.join`是否可以在 python3中使用别名？

例如：

```
a=['a','b','c']
j=str.join
''.j(a) 
```

还要能够做到

```
' '.j(a) 
```

具有相同的别名或更一般地能够像这样使用它：

```
string_here.j(iterable here) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:24:26.013

不完全符合您想要的语法，但足够接近：

```
>>> a=['a','b','c']
>>> j=str.join
>>> j('', a)
'abc'
>>> j(' ', a)
'a b c' 
```

`str.join`是一个未绑定的方法。要将其应用于对象，您需要将该对象指定为第一个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T10:26:34.167

> **TL;DR：**是的，但不是你期望的那样。

在您的示例中，您正在为未绑定的函数设置别名。这意味着它没有隐式应用它的对象，因此您必须传递对要执行操作的对象的引用。

这就是`self`方法中的参数的用途。通常，当您使用 ` 时，它会自动为您传递。样式表示法，但在这里你必须明确地提供它。

```
>>> list_ = [1, 2, 3]
>>> f = str.join   # aliasing the class method
>>> f(' ', list_)  # passing a reference to s
prints "1 2 3"
>>> f('', list_ )  # flexibility to use any string 
```

如果您只想说`f(list_)`，则`f`必须绑定该功能。这意味着您必须提前知道要使用的字符串。以下是如何做到这一点：

```
>>> str_ = ' '
>>> list_ 
>>> f = str_.join   # aliasing the object method
>>> f(list_)        # no need to pass a reference now
"1 2 3" 
```

我希望你明白我在说什么。Python 是一门很棒的语言，在所有语言中问题最少。我无法通过 FGITW 进入顶部，但我希望你会喜欢这个全面的例子。如果你有任何问题，尽管问我。

# c# - 死锁检测有序锁实现

> ID：15459634
> 
> 赞同：1
> 
> 时间：2013-03-17T10:16:53.857
> 
> 标签：c#, locking, deadlock

我正在尝试实现一种机制，其中自动检查锁顺序并在运行时无序获取锁时引发异常以避免死锁。下面是一个参考实现。如果您发现此实现有任何问题，请告诉我。非常感谢。

```
public class someResource
{
    private OrderedLock lock1 = new OrderedLock(1);
    private OrderedLock lock2 = new OrderedLock(2);

    public void lockInOrder()
    {
        lock1.AcquireWriteLock();
        lock2.AcquireWriteLock();
        // do something
        lock1.ReleaseWriteLock();
        lock2.ReleaseWriteLock();
    }

    public void lockOutOfOrder()
    {
        lock2.AcquireReadLock();
        lock1.AcquireReadLock(); // throws exception
        // read something
        lock2.ReleaseReadLock();
        lock1.ReleaseReadLock();
    }
}

public class OrderedLock : IDisposable
{
    private static readonly ConcurrentDictionary<int, object> createdLocks = new ConcurrentDictionary<int, object>();
    [ThreadStatic]
    private static ISet<int> acquiredLocks;

    private readonly ThreadLocal<int> refCount = new ThreadLocal<int>(false);
    private readonly ReaderWriterLockSlim locker = new ReaderWriterLockSlim(LockRecursionPolicy.SupportsRecursion);
    private readonly int id;

    /// <exception cref="InvalidOperationException">Duplicate identifier detected</exception>
    public OrderedLock(int id)
    {
        if (!createdLocks.TryAdd(id, null))
        {
            throw new InvalidOperationException("Duplicate identifier detected");
        }

        this.id = id;
        this.refCount.Value = 0;
    }

    public void AcquireReadLock()
    {
        this.CheckLockOrder();
        this.locker.EnterReadLock();
    }

    public void AcquireWriteLock()
    {
        this.CheckLockOrder();
        this.locker.EnterWriteLock();
    }

    public void ReleaseReadLock()
    {
        this.refCount.Value--;
        this.locker.ExitReadLock();
        if (this.refCount.Value == 0)
        {
            acquiredLocks.Remove(this.id);
        }
    }

    public void ReleaseWriteLock()
    {
        this.refCount.Value--;
        this.locker.ExitWriteLock();
        if (this.refCount.Value == 0)
        {
            acquiredLocks.Remove(this.id);
        }
    }

    public void Dispose()
    {
        while (this.locker.IsWriteLockHeld)
        {
            this.ReleaseWriteLock();
        }

        while (this.locker.IsReadLockHeld)
        {
            ReleaseReadLock();
        }

        this.locker.Dispose();
        this.refCount.Dispose();
        GC.SuppressFinalize(this);
    }

    /// <exception cref="InvalidOperationException">Invalid order of locking detected</exception>
    private void CheckLockOrder()
    {
        if (acquiredLocks == null)
        {
            acquiredLocks = new HashSet<int>();
        }

        if (!acquiredLocks.Contains(this.id))
        {
            if (acquiredLocks.Any() && acquiredLocks.Max() > this.id)
            {
                throw new InvalidOperationException("Invalid order of locking detected");
            }

            acquiredLocks.Add(this.id);
        }

        this.refCount.Value++;
    }
} 
```

# php - XDebug with IISExpress + PHP Tools for Visual Studio

> ID：15459639
> 
> 赞同：4
> 
> 时间：2013-03-17T10:17:28.003
> 
> 标签：php, visual-studio-2012, xdebug, iis-express

我有以下设置：

*   Visual Studio 2012，带有用于 Visual Studio 的扩展[PHP 工具](http://www.devsense.com/products/php-tools)
*   PHP 5.3
*   无 IIS，使用集成的 IIS Express 服务器进行调试

我的 php.ini 中有以下条目（[pastebin 上的完整版](http://pastebin.com/eb7EA6M6)）

```
[XDEBUG]
xdebug.remote_enable = on
xdebug.remote_handler = dbgp
xdebug.remote_host = localhost
xdebug.remote_port = 9000

[PHP_XDEBUG-2.2.1-5.3-VC9-NTS]
[PHP_XDEBUG-2.2.1-5.3-VC9-NTS]
zend_extension="C:\P(...)es (x86)\PHP\v5.3\ext\php_xdebug-2.2.1-5.3-vc9-nts.dll" 
```

我已将 PHP 工具配置为使用端口 9000 进行调试。在 XDebug 主页上，我提交了我的 phpinfo() 输出，它说那里设置正确。

但是，当我尝试在 Visual Studio 中调试时，什么也没有发生，即我想调试的 php 文件在浏览器中加载而不会中断我的断点。

这是我尝试调试的网址：

```
http://localhost:16472/index.php?XDEBUG_SESSION_START=1 
```

为了使 xdebug 与 IIS Express 一起工作，需要做些什么特别的事情吗？还是我必须在计算机上安装 IIS 或 Apache 才能让事情顺利进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:53:34.160

这是项目路径中 unicode 字符的一个小问题，在以后的更新中得到了解决。现在只需要更新 PHP 工具。[此论坛](http://support.devsense.com/viewtopic.php?f=21&t=988)的更多详细信息

# restler - restler 3中的保留字？

> ID：15459640
> 
> 赞同：0
> 
> 时间：2013-03-17T10:17:34.517
> 
> 标签：restler

我对使用可选参数和 phpdocs 有点困惑。我得到以下@url 声明：

```
@url GET /pruefvorschrift/:typs 
```

现在想将 :typs 设置为可选，所以我这样做

```
function getpruefvorschrift ($typs=null) {... 
```

这不起作用，$typs 中永远不会提供 :typs 的值。如果我将上面的@ url rout 更改为使用其他词，例如：id 它可以工作吗？

我不明白有人可以帮忙吗？

为了完整性：我在这个文件中有很多功能

```
get /device.json/{id}

get /device/pruefvorschrift/:typs.json

get /device/serial.json/{serial}

get /device/:id/merkmale.json 
```

希望能帮上忙

谢谢英格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:17:17.937

参数名称不是这里的问题！

强烈建议不要使用可选参数作为 URL 的一部分

通过为 $typs 设置默认值，您将其设为可选

这意味着我们需要为同一个 api 方法创建两条路由

```
GET /device/pruefvorschrift/{typs} 
```

和

```
GET /device/pruefvorschrift 
```

默认情况下restler 3不这样做，而restler 2默认情况下这样做

您可以将以下内容添加到 phpdoc 注释中以更改该行为

```
/**
* @smart-auto-routing false
*/
function getpruefvorschrift ($typs=null) { 
```

但请记住，这可能会妨碍另一条路线，请在[http://restler3.luracast.com/examples/_006_routing/readme.html](http://restler3.luracast.com/examples/_006_routing/readme.html)和[https://github.com/Luracast/Restler/issues/10进一步阅读](https://github.com/Luracast/Restler/issues/10)

# spring - Spring JPA 存储库查询找不到 ID 属性

> ID：15459642
> 
> 赞同：1
> 
> 时间：2013-03-17T10:17:41.013
> 
> 标签：spring, jpa, repository

我需要一个 spring 存储库方法，它可以让我使用 id 列表获取场景实体列表。当我尝试引用场景 ID 时，我得到一个错误，说它找不到名为 IdScene 的属性。我正在使用自定义查询来执行此操作。我的查询有问题吗？

我的实体是

```
public class Scene implements Serializable
{
private long id_scene;
private Media media;
private int sceneNumber;
private int version;

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name = "id_scene")
public long getIdScene() {
    return id_scene;
}
public void setIdScene(long id_scene) {
    this.id_scene = id_scene;
}

@ManyToOne
@JoinColumn(name = "id_media")
public Media getMedia() {
    return this.media;
}
public void setMedia(Media media) {
    this.media = media;
}

private List<Thumbnail> thumbnails = new ArrayList<Thumbnail>();

@OneToMany(mappedBy = "scene", cascade=CascadeType.ALL,
        orphanRemoval=true)
@LazyCollection(LazyCollectionOption.FALSE)
public List<Thumbnail> getThumbnails() {
    return this.thumbnails;
}
public void setThumbnails(List<Thumbnail> thumbnails) {
    this.thumbnails = thumbnails;
}

public void addThumbnail(Thumbnail thumbnail) {
    thumbnail.setScene(this);
    this.thumbnails.add(thumbnail);
}

private Property property;

@OneToOne(mappedBy="scene", cascade=CascadeType.ALL,
        orphanRemoval=true)
@LazyCollection(LazyCollectionOption.FALSE)
public Property getProperty() {
    return property;
}
public void setProperty(Property property) {
    this.property = property;
}

public void addProperty(Property property) {
    property.setScene(this);
    this.property = property;
}

@Column(name = "sceneNumber")
public int getSceneNumber() {
    return sceneNumber;
}

public void setSceneNumber(int sceneNumber) {
    this.sceneNumber = sceneNumber;
}

@Column(name = "version")
public int getVersion() {
    return version;
}
public void setVersion(int version) {
    this.version = version;
}
} 
```

我的存储库：

```
public interface SceneRepository extends JpaRepository<Scene, Long> {

public final static String FIND_BY_ID_LIST = "SELECT s"
        + " FROM Scene s WHERE s.IdScene IN (:id)";

@Query(FIND_BY_ID_LIST)
public List<Scene> findByIdScene(@Param("id") List<Long> id);//, Pageable page);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:47:09.730

尝试：

```
"SELECT s FROM Scene s WHERE s.idScene IN (:id)" 
```

注意'idScene'中的小写'i'”

这是因为 Java Bean 命名约定，一个属性定义为：

```
public String getWibble() { return wibble; }
public void setWibble(String value) { wibble = value; } 
```

定义`wibble`而不是`Wibble`

# html - jaxb/如何在元素中获取文本

> ID：15459645
> 
> 赞同：0
> 
> 时间：2013-03-17T10:18:03.773
> 
> 标签：html, jaxb

我有下一个元素：

```
<div id="one"> Hello! </div> 
```

我想通过 jaxb 说“你好！” 细绳。我怎样才能做到这一点？

* * *

**更新**

我有一堂课，有`@XmlElement`. 例如，“div”类，其中一个成员是 List 跨度。所以：

```
public class div {

    private List<Span> span;
    private List<Span> ls;

    public List<Span> getSpan() {
        return span;
    }

    public void setSpan(List<Span> span) {
        for (int i = 0 ; i<span.size(); i++){ 
            ls.add(span.get(i));
        } 
        this.span = span; 
    }

} 
```

我也希望它有价值。所以我写： public String getValue() { return value; }

```
'@XmlValue' 
public void setValue(String value) { this.value = value; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:21:05.737

您可以利用`@XmlValue`注释执行以下操作：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Div {

    @XmlAttribute
    private String id;

    @XmlValue
    private String value;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html](http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html)

# c# - VisualStateManager 银光

> ID：15459646
> 
> 赞同：1
> 
> 时间：2013-03-17T10:18:12.110
> 
> 标签：c#, silverlight, xaml, visualstatemanager

您好，我一直坚持让我的 VisualState 正常工作。我想要实现的是在用户输入上设置边框颜色，所以我要做的是

```
VisualStateManager.GoToState(textbox, "BorderHighlight", false); 
```

故事板在单独的 VisualStateGroup 中定义

```
<VisualState x:Name="BorderHighlight" >
    <Storyboard >
        <ColorAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:05"  
            Storyboard.TargetName="Border" Storyboard.TargetProperty="        
               (Border.BorderBrush).(SolidColorBrush.Color)">
                   ...
         </ColorAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

问题是文本框现在没有离开视觉状态，所以它不能被第二次触发。所以我必须以某种方式将其切换回正常状态。我尝试向组添加一个正常状态，似乎这是不允许的（只能有一个正常状态？）我还尝试设置一个正常状态，就像在第一个完成后设置高亮状态一样，这也不起作用。

请如果有人能在这里指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:36:57.387

我假设您正在创建一个自定义控件。我会有这样的事情：

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="BorderStates">

        <VisualState x:Name="BorderHighlight">
            <Storyboard> ... </Storyboard>
        </VisualState>

        <VisualState x:Name="BorderNormal">
            <Storyboard> ...  </Storyboard>
        </VisualState>

    </VisualStateGroup>
    ...
</VisualStateManager.VisualStateGroups> 
```

然后响应控件实现中的事件，例如

```
protected override void OnMouseEnter(MouseEventArgs e)
{
    VisualStateManager.GoToState(this, "BorderHighlight, false);
    ...
}

protected override void OnMouseLeave(MouseEventArgs e)
{
    VisualStateManager.GoToState(this, "BorderNormal, false);
    ...
} 
```

# android - 在设备挂起之前，Android 设备 RAM 使用量会增加，但应用程序内存不会增加

> ID：15459648
> 
> 赞同：3
> 
> 时间：2013-03-17T10:18:15.913
> 
> 标签：android, memory, memory-leaks, ram

我有一个应用程序，它从 A 加载活动 A（由 ListFragment 组成），我加载活动 B。如果我继续在这两个活动之间切换，我会看到设备 RAM 每次切换时都会增加 10 mb。在三星设备上，我们可以使用任务管理器“清除内存”，这基本上清除了 RAM，但即使我这样做，内存也不会被清除。即使我强制停止应用程序并再次清除内存，它也不会下去..最后在这两个活动之间切换后，一旦RAM已满，手机就会变慢并挂起，我必须重新启动设备。有趣的是，当使用“dumpsys meminfo”检查时，应用程序的内存不会超过 14-15 mb。我的应用程序没有 OOM。这种行为在三星 Galaxy Tab 2 4.0、galaxy grand、ace duos 上观察到。它没有在 Nexus 7 或 Galaxy Nexus 等 Nexus 设备上观察到。为什么RAM一直在增加，而应用程序内存却没有？这是因为任何 BITMAP 泄漏吗？我尝试使用 MAT，但我刚刚开始使用它，所以可能需要一些时间来弄清楚如何识别泄漏。有什么猜测吗？

**编辑** 我在启动两个活动时使用 Intent.FLAG_ACTIVITY_REORDER_TO_FRONT 标志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T10:36:41.433

当您切换活动时，您应该在意图上设置标志：

Intent.FLAG_ACTIVITY_REORDER_TO_FRONT

这样，如果活动已经在堆栈上，它将切换到它而不是开始一个新的。

# javascript - IE9 中的 box-shadow 是如何返回的？

> ID：15459651
> 
> 赞同：0
> 
> 时间：2013-03-17T10:19:08.070
> 
> 标签：javascript, jquery, internet-explorer, css

我需要知道`box-shadow`在 IE9 中使用 jQuery 时如何返回 CSS 属性`.css('box-shadow')`。但是，我无法在我的计算机上安装 IE9。有人可以在 IE9 中运行[这个小提琴](http://jsfiddle.net/FY6Ap/1/)并告诉我结果是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:23:45.367

我相信这就是你要找的东西？

![Drop-Shadow IE9 的结果](../Images/f177fa95d96cfc8e2eccb59dd1d95e81.png)

# r - 使用 ggplot2 强制不同的休息时间（月）

> ID：15459652
> 
> 赞同：1
> 
> 时间：2013-03-17T10:19:10.193
> 
> 标签：r, ggplot2

我试图让这个图由多条彩色线组成，一条代表每年，只显示沿 X 轴的月份。一旦我`format()`用作 X in 的值`aes`，我就只能使用`scale_x_discrete`. 从那里，我无法弄清楚如何只显示月份，并且只显示一次。

绘图是正确的，但中断和标签不正确。最重要的是，休息。因为一年中的日子通常不会重叠，所以我也得到了太多的中断值。您可以看到两条注释掉的行并排在一起，这是我试图解决问题的地方。

我真正想要的是在 X 轴上形成中断，并按月份标记。

数据集：[Retail_Gas_Prices.csv](http://share.kevin-funk.com/Retail_Gas_Prices.csv)

```
require(ggplot2)  # ggplot
require(reshape)  # melt
require(scales)   # date_format

# monthtext <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
gp <- read.csv("Retail_Gas_Prices.csv")
gp$Month <- substr(gp$Date, 1, 2)
gp$Year <- substr(gp$Date, 7, 10)
gp$Date <- as.Date(substr(gp$Date, 1, 10), "%m/%d/%Y")

coord_radar <- function(...) {
  structure(coord_polar(...), class = c("radar", "polar", "coord"))
}

gas_ra_plot <- ggplot(gp, aes(x=format(Date, '%m:%w:%d'), y=Weekly.US, group=Year, color=Year)) +
  geom_line()+
#   coord_polar()+
  labs(title = "Gas Prices by Month")+
  scale_x_discrete(expand = c(0.0, 0.0))+
#   scale_x_discrete(breaks = seq(1,12,1), expand = c(0.0, 0.0))+
#   scale_x_discrete(breaks = seq(min(gp$Date),max(gp$Date), length(gp$Date)/12), expand = c(0.0, 0.0))+
  scale_y_continuous(expand = c(0.0, 0.0))+
  ylab("Cost in Dollars") +
  theme(axis.ticks = element_blank())+
  theme(axis.title.x = element_blank())+

  theme(strip.background = element_blank())+
  theme(panel.background = element_blank())+
  theme(panel.grid.major.x = element_line(
    colour = "#dddddd"))

print(gas_ra_plot) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:58:56.227

```
gp <- read.csv('http://share.kevin-funk.com/Retail_Gas_Prices.csv')

require(ggplot2) 
require(scales)

#parse the datetimes
gp$Date <- strptime(as.character(gp$Date),"%m/%d/%Y %I:%M:%S %p %z",tz="GMT")

#create year variable
gp$Year <- format(gp$Date,"%Y")

#create dates with the same year (2013)
gp$Date1 <- as.Date(format(gp$Date,"%m-%d"),"%m-%d")

#might be better to make this 2012 due to Feb-29
gp$Date1 <- as.Date(paste0("2012-",format(gp$Date,"%m-%d")),"%Y-%m-%d")

gas_ra_plot <- ggplot(gp, aes(x=Date1, y=Weekly.US, group=Year, color=Year)) +
  geom_line()+
  scale_x_date(labels = date_format("%b-%d"))

print(gas_ra_plot) 
```

# php - PHP 中的 Paymill 订阅

> ID：15459655
> 
> 赞同：1
> 
> 时间：2013-03-17T10:19:27.443
> 
> 标签：php, paymill

我正在尝试创建订阅 i Paymill。我已经阅读了他们的例子，但我似乎不明白。

我真正想做的就是设置订阅，这是我当前的代码：

```
$token = $_POST['paymillToken'];

if ($token) {
    require "Services/Paymill/Payments.php";
    require "Services/Paymill/Transactions.php";
    require "Services/Paymill/Subscriptions.php";
    require "Services/Paymill/Offers.php";

  $params = array(
    'amount'      => '49900',  // Cent!
    'currency'    => 'SEK',   // ISO 4217
    'token'       => $token,
    'description' => 'User ID# ' . $userIdMain . ' Email: ' . $userEmail
  );

$transactionsObject = new Services_Paymill_Transactions(
    PAYMILL_API_KEY, PAYMILL_API_HOST
);
$transaction        = $transactionsObject->create($params);

echo "<br /><br />";    
print_r($transaction);

echo $transaction['client']['id'];
echo $transaction['payment']['id'];

$params = array(
    'client'   => $transaction['client']['id'],
    'offer'    => 'offer_9cdffb501f565bf827a8',
    'payment'  => $transaction['payment']['id']
);
$subscriptionsObject = new Services_Paymill_Subscriptions(PAYMILL_API_KEY, PAYMILL_API_HOST);
$subscription        = $subscriptionsObject->create($params);

echo "<br /><br />";    
print_r($subscription);

} 
```

问题是上面一次创建了两个付款。但似乎订阅对象要求我首先有一个 payment_id （参见上面的 $transaction['payment']['id'] ）。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:37:28.300

创建订阅也会创建一个事务，这是正确的。添加支付对象 ( [https://www.paymill.com/en-gb/documentation-3/reference/api-reference/#create-new-credit-card-payment-with](https://www.paymill.com/en-gb/documentation-3/reference/api-reference/#create-new-credit-card-payment-with) )*而不是*创建新交易并通过Subscription->create() 的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T19:45:20.410

好吧，这不是 PHP，但在正确的步骤设置订阅后，我也有同样的不确定性。最后，这很容易，所以我到目前为止发布我的代码以防万一。

该应用程序是 MVC .net，我正在使用 PayMill PayButton 生成支付令牌。这是注册过程中模型的一部分。以下代码调用 PayMill API 的 .net 包装器。

```
 private static async Task<Subscription> MakePayMillSubscription(int amount, ApplicationUser user, PaymillContext paymillContext, Payment payment, Client client)
    {

        SubscriptionService subscriptionService = paymillContext.SubscriptionService;
        Subscription subscription = await subscriptionService.CreateAsync( payment, client, null, amount, "EUR", Interval.periodWithChargeDay(1, Interval.TypeUnit.MONTH), null, user.Id, Interval.period(10, Interval.TypeUnit.YEAR));
        return subscription;
    }

    private static async Task<Client> MakePayMillClient(RegisterViewModel model, ApplicationUser user, PaymillContext paymillContext)
    {

        ClientService clientService = paymillContext.ClientService;
        Client client = await clientService.CreateWithEmailAndDescriptionAsync(
            model.Email,
            user.Id
        );
        return client;
    }

    private static async Task<Payment> MakePayMillPayment(RegisterViewModel model,PaymillContext context, Client client)
    {

        Payment payment = await context.PaymentService.CreateWithTokenAndClientAsync(model.paymillToken, client);

        return payment;
    } 
```

然后我现在像这样在注册期间调用这些（我仍处于测试阶段）

```
 client = await MakePayMillClient(model, user, paymillContext);
   payment = await MakePayMillPayment(model, paymillContext,client);
   subscription = await MakePayMillSubscription((int)(account.TotalAmountDue * 100.0M), user, paymillContext, payment, client); 
```

# jquery-ui - Jqueryui 可在 Jquery 布局部分之间拖动

> ID：15459660
> 
> 赞同：0
> 
> 时间：2013-03-17T10:20:02.710
> 
> 标签：jquery-ui, jquery-ui-draggable, jquery-layout

这是我正在尝试做的事情

[http://jsfiddle.net/YSBGu/](http://jsfiddle.net/YSBGu/)

```
 $( ".dragcomp" ).draggable({
                cursorAt: {
                    left: 0
                },
                zIndex: 300,
                revert: "invalid",
                helper: "clone",
                distance: 10

            }); 
```

您会注意到，当试图将左列中的 div 拖到中间部分时，它会停留在左侧并滚动它。有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:24:22.160

您可以指定[appendTo](http://api.jqueryui.com/draggable/#option-appendTo)选项以在窗格结构的祖先（例如`<body>`元素本身）下重新设置辅助元素：

```
$(".dragcomp").draggable({
    appendTo: "body",
    cursorAt: {
        left: 0
    },
    zIndex: 300,
    revert: "invalid",
    helper: "clone",
    distance: 10
}); 
```

[你会在这里](http://jsfiddle.net/YSBGu/2/)找到一个更新的小提琴。

# java - Eclipse 不再启动

> ID：15459661
> 
> 赞同：4
> 
> 时间：2013-03-17T10:20:04.800
> 
> 标签：java, linux, eclipse, fedora

从我记事起，Eclipse 就一直运行良好，但现在它拒绝启动。

工作区中的日志文件显示以下内容。我正在使用 Fedora 18。有什么想法吗？

```
!SESSION 2013-03-17 20:16:47.631 -----------------------------------------------
eclipse.buildId=4.2.0.M20130304-1457
java.version=1.7.0_09-icedtea
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_AU
Command-line arguments:  -os linux -ws gtk -arch x86_64

!ENTRY org.eclipse.osgi 4 0 2013-03-17 20:16:55.304
!MESSAGE Application error
!STACK 1
java.util.EmptyStackException
    at java.util.Stack.peek(Stack.java:102)
    at java.util.Stack.pop(Stack.java:84)
    at org.eclipse.e4.ui.css.core.impl.sac.CSSDocumentHandlerImpl.endDocument(CSSDocumentHandlerImpl.java:74)
    at org.apache.batik.css.parser.Parser.parseStyleSheet(Parser.java:238)
    at org.eclipse.e4.ui.css.core.impl.dom.parsers.AbstractCSSParser.parseStyleSheet(AbstractCSSParser.java:64)
    at org.eclipse.e4.ui.css.core.impl.engine.AbstractCSSEngine.parseStyleSheet(AbstractCSSEngine.java:180)
    at org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngine.setTheme(ThemeEngine.java:415)
    at org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngine.setTheme(ThemeEngine.java:376)
    at org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngine.setTheme(ThemeEngine.java:369)
    at org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngine.restore(ThemeEngine.java:546)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.initializeStyling(PartRenderingEngine.java:1179)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:945)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:638)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:593)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1447)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1423) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T10:30:19.097

在命令提示符（shell）中转到 eclipse 文件夹路径运行命令 eclipse -clean

或者

删除旧工作台（首先复制其中存在的所有项目）。启动 Eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-03T22:58:11.640

在我的例子中，它是 Liferay Developer Studio，它本质上是一个与 Liferay 插件捆绑的 Eclipse。它会尝试加载工作区并给我一条错误消息 - 无法加载工作区，请检查位于（工作区位置）的日志文件。

我尝试使用 -clean 启动它，并尝试`configuration/org.eclipse.equinox.simpleconfigurator/bundles.info`按照另一篇文章中的建议[评论](https://stackoverflow.com/questions/35784169/installed-a-plugin-on-eclipse-mars-now-eclipse-wont-start-how-can-i-uninsta)导致错误的行。最后，我找到了这篇文章并遵循了 Sach 的回答。

我将我的“工作区”重命名为“工作区复制”并使用“工作区”启动 Eclipse，但它找不到并为我创建了一个新的。这次eclipse启动成功。我切换到“工作区副本”，它也加载得很好。瞧！问题解决了。然后我去 Eclipse Marketplace 检查我的新插件，它崩溃了。哎呀，不是太快了ameego。然后我删除了“workspace”并用“workspace”启动了eclipse，它打开得很好，就像上次一样。进入 Eclipse Marketplace 并卸载新安装的插件（内存分析器）。将工作区切换到“workspace-copy”，现在工作正常。呸！！我宝贵的3个小时就这样过去了。。

抱歉，我没有足够的声誉将我的经验作为评论发布，所以在这里发布。希望对有需要的人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T11:16:09.443

转到您的工作区文件夹并删除 .metadata。然后尝试运行eclipse。它将完美地加载到工作区中，创建一个新的 .metada 文件夹，因为它是第一次运行，具有空白工作区。只需再次导入您的项目，一切都会运行。

# git - git push 成功，但并非所有文件都被推送

> ID：15459664
> 
> 赞同：1
> 
> 时间：2013-03-17T10:20:16.167
> 
> 标签：git

我已经对我的远程存储库进行了 git push 并且它是成功的，当我尝试将远程存储库克隆到另一台计算机时它没有克隆整个文件。

流文件是这样的：从我的本地计算机 -> 到远程服务器 -> 到其他计算机。使用 Git。

在我的项目文件中，我有

> amon - 这是一个文件夹，该文件夹中还有另外 2 个文件夹。此文件夹不是副本
> 
> 测试仓库.txt
> 
> 第二个测试文件

这是我的过程的样子。 ![在此处输入图像描述](../Images/c8b0777d58a73a992d79a1dbd1cdc32e.png)

请帮忙。谢谢

编辑 amon/文件夹结构：

![在此处输入图像描述](../Images/17b1a57a11b77ab16903e110d9f5b753.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:43:09.880

我不确定红色标记表示什么，但您的文件夹似乎`amon`是空的（没有内容/文件，只是空文件夹）或者它被添加到`.gitignore`. 如果您希望对其进行跟踪，请确保未`.gitignore`先将其添加到文件中。如果不是那么，现在添加一些虚拟文件，`readme.txt`也许现在。直到您的实际文件被添加到文件夹中。确保将文件添加到 git 即`git add amon/readme.txt`然后提交文件，它应该可以工作。

根据您的评论，[您](http://www.gitguys.com/topics/creating-a-shared-repository-users-sharing-the-repository/)可以开始使用自己的本地计算机或服务器作为共享存储库，它允许您和您的同事推送/拉取/获取/合并您的更改。

# java - 为什么从字符串转换日期时Java时区不同？

> ID：15459667
> 
> 赞同：0
> 
> 时间：2013-03-17T10:20:40.190
> 
> 标签：java, date, timezone, date-format, gmt

我有格式为 YYYYMMDD 的日期字符串，我试图使用获取的日期格式化程序将其解析为日期

```
public static DateFormat getDateFormat() {
  SimpleDateFormat result = new SimpleDateFormat("yyyyMMdd");                  
  result.setLenient(false);
  return result;
} 
```

我将程序运行时的默认时区设置为

```
public static void doTheDateZoneInit() {
    TimeZone tzone = TimeZone.getTimeZone("Europe/London");
    TimeZone.setDefault(tzone);
} 
```

当我格式化日期并输出它而不在打印字符串中指定时区时

```
Date myDate= getDateFormat().parse("20110331");
System.out.println("Date after it is formatted:" + myDate); 
```

输出在 BST 时区

```
Date after it is formatted:Thu Mar 31 01:00:00 BST 2011 
```

如果我在不同的日期一遍又一遍地运行相同的东西，我会得到不同的输出

*   20120331 >> BST >> 格式化后的日期：Sat Mar 31 01:00:00 BST 2012
*   20121231 >> GMT >> 格式化后的日期：Mon Dec 31 00:00:00 GMT 2012
*   20130328 >> GMT >> 格式化后的日期：Thu Mar 28 00:00:00 GMT 2013
*   20130331 >> GMT >> 格式化后的日期：Sun Mar 31 00:00:00 GMT 2013
*   20140331 >> BST >> 格式化后的日期：Mon Mar 31 01:00:00 BST 2014
*   20130401 >> BST >> 格式化后的日期：Mon Apr 01 01:00:00 BST 2013
*   20130402 >> BST >> 格式化后的日期：Tue Apr 02 01:00:00 BST 2013
*   20130501 >> BST >> 格式化后的日期：Wed May 01 01:00:00 BST 2013

似乎在 2012 年到 2013 年有一个范围，所有计算都以 GMT 为准。我不知道为什么会这样。

问题是我在这些日期中添加了结束时间......例如，我使用从 String 转换的日期调用以下方法并将 23:59:59:999 添加到它以获得最新的指定日期的时间。

```
public static Date addAlmostOneDay(Date startDate) {
    Calendar cal = new GregorianCalendar();
    cal.setTime(startDate);
    cal.add(Calendar.HOUR, 23);
    cal.add(Calendar.MINUTE, 59);
    cal.add(Calendar.SECOND, 59);
    cal.add(Calendar.MILLISECOND, 999);
    return cal.getTime();
} 
```

但是，如果我要添加 23:59:59，它会转换为 GMT ......它不会将日期设置为原始日期的末尾，而是将 BST 和 GMT 之间的时间差异考虑在内

*   Sun Mar 31 00:00:00 GMT 2013 变为 Mon Apr 01 00:59:59 BST 2013（次日 + 1 小时），而
*   Mon Apr 01 01:00:00 BST 2013 变成 Mon Apr 01 23:59:59 BST 2013 （今天结束就是我想要的）

有人可以解释一下为什么这似乎正在发生。使用 YYYMMDD 格式的不同输入运行相同的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T10:46:36.093

好的，我想我明白你的意思了。您将默认时区设置为伦敦之一。

在夏季，伦敦处于英国夏令时 (BST) 时区。在冬季，它位于 GMT 时区。并且此时区更改完成的日期每年都不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T10:47:04.723

BST 是英国夏令时，伦敦的有效时区在 2013 年 3 月 31 日至 2013 年 10 月 27 日和 2014 年 3 月 30 日至 2014 年 10 月 26 日之间。

在这些日期之间，选择欧洲/伦敦作为时区将为您提供 BST，在冬季，伦敦的正确时区是 GMT，这与您的输出一致。

# ruby-on-rails - Rails 搜索表单提交以显示方法

> ID：15459668
> 
> 赞同：3
> 
> 时间：2013-03-17T10:20:41.150
> 
> 标签：ruby-on-rails, search, controller

我正在尝试在 Rails 视图中设置一个表单，以将一个 id 提交回控制器中的 show 方法。我的表单使用自动完成来设置隐藏的 id 字段：

```
<%= form_tag students_path, id: 'search_student_name', method: :get do %>
  <%= text_field_tag :search_name, '', size: 30 %>
  <%= hidden_field_tag :id %>
  <%= submit_tag "Search", name: nil %>
<% end %> 
```

我正在使用脚手架生成的标准控制器“显示”方法：

```
# GET /students/1
# GET /students/1.json
def show
  @student = student_scope.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @student }
  end
end 
```

我将不胜感激有关表单 url/post 方法/其他路由组合的任何建议，以使其正常工作。这是您通常使用 Rails 的方式，还是应该设置一个新的控制器方法来处理提交的表单？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T10:40:29.923

因为它不完全是一个 Restful 节目，所以您应该创建一个新动作，搜索。

```
#routes.rb
post 'search' => 'students#search'

#student_controller.rb
def search
   @student = Student.find_by_name params[:search_name]
   render action: 'show'
end 
```

据我所知，该表单不需要发送 :id 。

```
<%= form_tag search_path, method: :get do %>
  <%= input_tag :search_name, type: 'text' %>
  <%= submit_tag "Search" %>
<% end %> 
```

# javascript - 使用 jQuery 进行货币格式化 - 逗号或点

> ID：15459669
> 
> 赞同：1
> 
> 时间：2013-03-17T10:21:00.683
> 
> 标签：javascript, jquery, currency, currency-formatting

我的网站目前以英镑、美元和欧元为用户报价，但只要用户希望以欧元报价，它就会中断。这是因为欧元需要格式化为以千位分隔，`,`美分由`.`例如 €12.000.000,00 分隔

英镑 £ - 正确

```
£12,000,000.00 
```

英镑 £ - 不正确

```
£12.000.000,00 
```

美元 - 正确

```
$12,000,000.00 
```

美元 - 不正确

```
£12.000.000,00 
```

欧元 - 正确

```
£12.000.000,00 
```

EUR € - 不正确

```
$12,000,000.00 
```

是否有一个小的 jQuery 脚本可以处理这个问题？以多种货币显示数据的最佳实践方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:25:21.930

在[谷歌](https://www.google.fr/search?q=currency%20formatting%20jquery)上快速浏览后，我创建了大量的插件！

更深入地说，我认为您需要在数字上解析浮点数，省略空格和特殊字符。比您必须计算每个数字位置以根据货币将“点”或“逗号”放置在您需要它们的位置。

要使所有货币都能正常工作，还有很多工作要做，所以我会尝试[这个可爱的插件](http://josscrowcroft.github.com/accounting.js/#demo)，这似乎正是你所需要的！

# php - PHP多维数组打印到浏览器显示嵌套数组

> ID：15459670
> 
> 赞同：0
> 
> 时间：2013-03-17T10:21:01.910
> 
> 标签：php, arrays

我正在尝试解决以下问题：

注意我是编程和 PHP 的新手，并且正在通过`SAMS PHP, MySQL and Apache (Julie C. Meloni).`

有一个练习，必须创建一个多维数组。外部数组是列出电影类型的关联数组。流派数组列出了该流派的电影。然后，您会被要求打印出一个类型列表以及与该类型相关的电影列表。

我的代码：

```
<?php 
$genres = array(
    'Science Fiction' => array('Star Trek', 'Star Wars', 'Alien'),
    'Drama' => array('Les Amant de Pont Neuf', 'War & Peace', 'Bridehead Revisited'),
    'Crime' => array('Heat', 'Pulp Fiction', 'Messerine')
);
$gKeys = array_keys($genres);
foreach ($gKeys as $genre) {
   print $genre."<br/>";

}
?> 
```

这有效并打印出来：

> 科幻小说
> 
> 戏剧
> 
> 犯罪

这是我撞墙的地方。当我尝试在之后添加另一个 foreach 循环时

```
print $genre; 
```

浏览器中不会出现任何结果（第一个循环的结果除外）。我已经尝试了一切。例如：

*   首先使用应用于 $genre 的 array_value() 函数，然后在返回的数组上尝试 foreach。
*   教科书中还提到了while (list($x) = ($y)) 机制。
*   我彻底重新阅读了数组章节，并在其他地方寻找无济于事。

也许我错误地构造了多维数组？为了保持一致性，二维数组是否也需要是关联数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:26:31.777

您的数组结构正确。您使用了错误的数组（仅包含键的数组）并在之后添加了另一个 foreach 循环，`print $genre;`因此它不起作用。

不，第二维数组也不需要是关联数组。

```
<?php

$genres = array(
    'Science Fiction' => array('Star Trek', 'Star Wars', 'Alien'),
    'Drama' => array('Les Amant de Pont Neuf', 'War & Peace', 'Bridehead Revisited'),
    'Crime' => array('Heat', 'Pulp Fiction', 'Messerine')
);

foreach ($genres as $genre => $movies)
{
    print $genre . " - <br/>";
    foreach ($movies as $movie)
    {
        print $movie . "<br/>";
    }
    print "</br>";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:24:25.573

等待！你为什么这样做：

```
$gKeys = array_keys($genres); 
```

这只是给你一个单一的键数组。

在 $genres 上做你的第一个循环，然后在里面：

```
foreach ($genre as $key=>$subgenre)
{
   //do stuff here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T10:25:46.433

```
foreach ($genres as $genrekey => $genrevalue) {
  print $genrekey."<br/>";
  foreach ($genrevalue as $value) {
    print $value."<br/>";
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T10:28:30.690

**您的外部数组是一个以流派**为键的关联数组。

要打印出该类型的**电影**（子数组），请使用另一个 foreach，如下所示：

```
print "<ul>";
foreach ($genres as $genre => $movies) {
    print "<li>".$genre."<ul>";
    foreach ($movies as $movie) {
        print "<li>".$movie."</li>";
    }
    print "</ul></li>";
}
print "</ul>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T10:30:14.600

```
 function multiarray_keys($ar) {

        foreach($ar as $k => $v) {
            $keys[] = $k;
            if (is_array($ar[$k]))
                $keys = array_merge($keys, multiarray_keys($ar[$k]));
        }
        return $keys;
    }

    $gKeys = multiarray_keys($genres);
echo "<pre>";
print_r(multiarray_keys($array));
echo "</pre>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T10:40:26.457

如果您需要它来查看数组中的数据以进行调试，您可以使用 PHPs `var_export()`, `var_dump()`，`print_r()`只是为了确保数据按照您的意愿填充。否则，如果你想在生产中展示它，你可以这样做：

```
foreach($multiDimentinalArray as $key => $value):
     if(is_array($value)):
         foreach($value as $k => $val):
              print "    $key.$k => $val";
     else:
          print "$key => $value";
     endif;
endforeach; 
```

# python - 如何将 python 字典放入键是日期对象的 pandas 时间序列数据框中

> ID：15459675
> 
> 赞同：4
> 
> 时间：2013-03-17T10:21:45.563
> 
> 标签：python, pandas

我有一个 python 字典，其中键是日期对象，值是时间。

```
 timeseries = {datetime.datetime(2013, 3, 17, 18, 19): {'t2': 400, 't1': 1000},
                 datetime.datetime(2013, 3, 17, 18, 20): {'t2': 300, 't1': 3000}
                } 
```

如何将此时间序列放入熊猫数据框中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T12:06:01.687

使用`DataFrame.from_dict`：

```
import pandas as pd
import datetime
timeseries = {datetime.datetime(2013, 3, 17, 18, 19): {'t2': 400, 't1': 1000},
                 datetime.datetime(2013, 3, 17, 18, 20): {'t2': 300, 't1': 3000}
                }
print pd.DataFrame.from_dict(timeseries, orient="index") 
```

输出：

```
 t2    t1
2013-03-17 18:19:00  400  1000
2013-03-17 18:20:00  300  3000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:54:38.717

您需要 Series 来创建 DataFrame。

```
series_dict = dict((k, Series(v)) for k, v in timeseries.iteritems())

df = DataFrame(series_dict) 
```

# javascript - Javascript 模块设计

> ID：15459678
> 
> 赞同：1
> 
> 时间：2013-03-17T10:22:07.423
> 
> 标签：javascript, object, module

我想知道是否有人可以解释这两个 JavaScript 模块之间的区别。我一直在尝试通过阅读一些 underscore.js 和 jQuery 源代码等来学习如何设计 javascript 模块，并注意到这两种模式。

示例 1

```
(function() {

    var _this = this;

    _this.VERSION = '0.1';

}).call(this); 
```

示例 2

```
(function(_this) {

    _this.VERSION = '0.1';

}(this)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:42:29.370

`call(obj[, arg[, arg[, arg[, ...]]]])`在`obj`上下文中`function () {}(obj)`运行函数，将在当前上下文中运行函数并传入`obj`参数。在这个特定的例子中没有区别 - 两个例子都会做同样的事情。对于某些人来说，使用`call`or`apply`而不是 just运行匿名函数会更干净`()`，我认为就是这种情况。

在第二个示例中， with 行`var _this = _this;`是无用的，`_this`已在范围内定义，并且该行正在重新定义具有相同值的现有变量（因此它甚至不正确）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:23:37.390

示例 1 显式设置`this`函数内变量的值。

在示例 2 中，该函数不关心 的值`this`。它宁愿期待一个它可以使用的论点。您也可以说它不依赖于 的值`this`。这种模式的一个优点是通过参数的名称可以清楚地表明您想要什么（`window`，`myObjectContext`...）。

在您的具体情况下，它没有任何区别。但是，如果该函数包含实际使用 的代码`this`，例如`this.myObject = {}`，它**可能**会有所不同，因为`this`在每种情况下可能具有不同的值。但说实话，使用第二种模式的人永远不会`this`在函数中引用。

# java - Java：水平滚动时 JTable 列不适合 JScrollPane

> ID：15459680
> 
> 赞同：1
> 
> 时间：2013-03-17T10:22:32.370
> 
> 标签：java, swing, jtable, jscrollpane, horizontal-scrolling

我在 JScrollPane 中有 JTable，我正在努力解决这个问题，即水平滚动时 JTable 不适合 JScrollPane。我在 JTable 中有 18 行，但水平滚动时只显示 16 行。这就是我的意思

![http://imgur.com/BfD7sKA （抱歉无法发布图片，需要 10 名声望：P）](../Images/bac6dea1e65c976bf5ba077c808215f7.png)

因此，从图片中可以看出，行有点在列上运行，最后 2 行丢失了。

我还没有以编程方式编写任何代码，一切都是使用 Netbeans IDE Design builder 完成的。

PS你有趣的事实，如果我扩展我的程序或进入全屏，程序会显示必须存在的所有列。但是如果我再次缩小程序并尝试使用水平滚动，就会发生这种情况。

如果我错过了任何东西（抱歉第一次在这里发帖），请问。谢谢您的帮助！

所以这是 Netbeans 关于主 UI 窗口的代码

```
package View;

import static javax.swing.JFrame.EXIT_ON_CLOSE;
import base.*;
import java.awt.Dimension;

/**
 *
 * @author Nikki
 */
public class V_main extends javax.swing.JFrame {

    /**
     * Creates new form V_main
     */
    public V_main() {
        initComponents();
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        Dimension d = account_table.getPreferredSize();
            jScrollPane1.setPreferredSize(
        new Dimension(d.width,account_table.getRowHeight()*18+1));
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        picture_label = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        account_table = new javax.swing.JTable();
        exit_button = new javax.swing.JButton();
        jButton4 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("BASe (Basic Accounting System)");

        picture_label.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/fazer_logo.png"))); // NOI18N

        jButton1.setText("Add New Customer");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setText("Remove Customer");

        jButton3.setText("Edit Customer Information");

        jScrollPane1.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
        jScrollPane1.setAutoscrolls(true);
        jScrollPane1.setPreferredSize(new java.awt.Dimension(1500, 1000));

        account_table.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {"Nikki", "Kononov", null, "", "", "none", "nikki@gmail.com", null, "none", null, null, null, null, null, null, null},
                {"Nikki", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {"Nikki", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null}
            },
            new String [] {
                "Company", "Person", "Title ", "Street Address", "Zip Code", "City", "Area", "Country", "Website", "Email", "Telephone", "Fax", "Mobile", "Employees", "Turnover", "Result"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.String.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Integer.class
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }
        });
        account_table.setAutoResizeMode(javax.swing.JTable.AUTO_RESIZE_OFF);
        account_table.setCellSelectionEnabled(true);
        account_table.setFillsViewportHeight(true);
        account_table.setPreferredSize(new java.awt.Dimension(1300, 1000));
        jScrollPane1.setViewportView(account_table);
        account_table.getColumnModel().getSelectionModel().setSelectionMode(javax.swing.ListSelectionModel.SINGLE_INTERVAL_SELECTION);

        exit_button.setText("Exit");
        exit_button.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                exit_buttonActionPerformed(evt);
            }
        });

        jButton4.setText("Search for Customers");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 938, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                            .addGap(27, 27, 27)
                            .addComponent(picture_label))
                        .addGroup(layout.createSequentialGroup()
                            .addGap(18, 18, 18)
                            .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 159, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jButton3)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(exit_button, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jButton2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 159, Short.MAX_VALUE)
                            .addComponent(jButton4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(picture_label)
                        .addGap(13, 13, 13)
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jButton4, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(exit_button, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 533, Short.MAX_VALUE)))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>                        

    private void exit_buttonActionPerformed(java.awt.event.ActionEvent evt) {                                            
        super.dispose();
    }                                           

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        BASe.showAdd();
    }                                        

    /**
     * @param args the command line arguments
     */
    // Variables declaration - do not modify                     
    private javax.swing.JTable account_table;
    private javax.swing.JButton exit_button;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel picture_label;
    // End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:04:58.170

您可以滚动或让*所有*列适合（如果有很多则被挤压）在没有滚动条的情况下可见。该行为由 autoResizeMode 属性控制。要显示滚动条：

```
table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF); 
```

要显示所有列，每个列都有相同的多余宽度：

```
table.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS); 
```

后者是默认设置（模 netbeans 的干扰，对该部分一无所知）。

**编辑**

此特定上下文中的错误似乎是在表及其封闭的 scrollPane 上调用 setPreferredSize ，但大小不兼容。当实际大小大于表的硬编码首选项时，结果是未确定的行为。

[底线：永远不要在组件上使用 setXXSize](https://stackoverflow.com/a/7229519/203657)的另一个原因。这里的出路是实现表的 getPreferredScrollableViewportSize （这是它的 Scrollable 角色的一部分）以在列/行大小方面返回合理的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-13T13:33:15.690

把表头的宽度设置大一点，比如10000，就可以解决问题了！下面的示例代码： Tablename.getTableHeader().setPreferredSize(new Dimension(10000,30));

# breeze - BreezeJS 是否有任何脚手架模板？

> ID：15459681
> 
> 赞同：0
> 
> 时间：2013-03-17T10:22:34.170
> 
> 标签：breeze, scaffold

示例很棒，但是为现有的 odata 模型实体搭建一些模板会是一个更好的开始，并且会大大减少重复工作的浪费时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:54:00.850

也许您想贡献这样的模板？我们会欢迎他们......或者至少是一个例子，因为我们不清楚什么模板对此最有价值。我知道这听起来很刻薄，但这是一个真正的帮助请求。

# python - 将字节数组从 Python 传输到 C 并返回

> ID：15459684
> 
> 赞同：7
> 
> 时间：2013-03-17T10:22:43.187
> 
> 标签：python, c

我需要快速处理 XOR 字节数组，在 Python 的一个变体中

```
for i in range(len(str1)): str1[i]=str1[i] ^ 55 
```

工作很慢
我用 C 写了这个模块。我对 C 语言非常了解，在我没有写之前。
在一个变体中

```
PyArg_ParseTuple (args, "s", &str)) 
```

一切都按预期工作，但我需要使用而不是 ss* 因为元素可以包含嵌入的 null，但是如果我在调用 python 崩溃时将 s 更改为 s*

```
PyArg_ParseTuple (args, "s*", &str)) // crash 
```

也许像我这样的初学者想使用我的示例作为开始编写他自己的东西，因此请在 Windows 上将本示例中使用的所有信息带上。[在http://docs.python.org/dev/c-api/arg.html](http://docs.python.org/dev/c-api/arg.html)
页面上解析参数和构建值

**test_xor.c**

```
#include <Python.h>

static PyObject* fast_xor(PyObject* self, PyObject* args)
{
    const char* str ;
    int i;

    if (!PyArg_ParseTuple(args, "s", &str))
        return NULL;

    for(i=0;i<sizeof(str);i++) {str[i]^=55;};
    return Py_BuildValue("s", str);

}

static PyMethodDef fastxorMethods[] =
{
     {"fast_xor", fast_xor, METH_VARARGS, "fast_xor desc"},
     {NULL, NULL, 0, NULL}
};

PyMODINIT_FUNC

initfastxor(void)
{
     (void) Py_InitModule("fastxor", fastxorMethods);
} 
```

**test_xor.py**

```
import fastxor
a=fastxor.fast_xor("World") # it works with s instead s*
print a
a=fastxor.fast_xor("Wo\0rld") # It does not work with s instead s* 
```

**编译.bat**

```
rem use http://bellard.org/tcc/
tiny_impdef.exe C:\Python26\python26.dll
tcc -shared test_xor.c python26.def -IC:\Python26\include -LC:\Python26\libs -ofastxor.pyd
test_xor.py 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T11:13:29.697

您无需构建扩展模块即可快速完成此操作，您可以使用 NumPy。但是对于您的问题，您需要一些像这样的 c 代码：

```
#include <Python.h>
#include <stdlib.h> 

static PyObject * fast_xor(PyObject* self, PyObject* args)
{
    const char* str;
    char * buf;
    Py_ssize_t count;
    PyObject * result;
    int i;

    if (!PyArg_ParseTuple(args, "s#", &str, &count))
    {
        return NULL;
    }

    buf = (char *)malloc(count);

    for(i=0;i<count;i++)
    {
        buf[i]=str[i] ^ 55;
    }

    result = Py_BuildValue("s#", buf, count);
    free(buf);
    return result;
} 
```

您不能更改字符串对象的内容，因为 Python 中的字符串是不可变的。您可以使用“s#”来获取`char *`指针和缓冲区长度。

如果你可以使用 NumPy：

```
In [1]: import fastxor

In [2]: a = "abcdsafasf12q423\0sdfasdf"

In [3]: fastxor.fast_xor(a)
Out[3]: 'VUTSDVQVDQ\x06\x05F\x03\x05\x047DSQVDSQ'

In [5]: import numpy as np

In [6]: (np.frombuffer(a, np.int8)^55).tostring()
Out[6]: 'VUTSDVQVDQ\x06\x05F\x03\x05\x047DSQVDSQ'

In [7]: a = a*10000

In [8]: %timeit fastxor.fast_xor(a)
1000 loops, best of 3: 877 us per loop

In [15]: %timeit (np.frombuffer(a, np.int8)^55).tostring()
1000 loops, best of 3: 1.15 ms per loop 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T11:12:37.897

这可以使用 numpy 快速完成。您不太可能在 C 中手动滚动您自己的 xor 例程得到更快的速度：

```
In [1]: import numpy

In [2]: data = numpy.uint8(numpy.random.randint(0, 256, 10000))

In [3]: timeit xor_data = numpy.bitwise_xor(data, 55)
100000 loops, best of 3: 17.4 us per loop 
```

如果您使用的是大型数据集（例如 1 亿个点），则它与您为代码引用的时间相当：

```
In [12]: data = numpy.uint8(numpy.random.randint(0, 256, 100000000))

In [13]: timeit xor_data = numpy.bitwise_xor(data, 55)
1 loops, best of 3: 198 ms per loop 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-17T13:47:44.473

另一种方法是使用[`PyObject_GetBuffer`](http://docs.python.org/2/c-api/buffer.html#bufferobjects). 下面的模块定义`fast_xor`了支持缓冲区协议的任何对象，以及`fast_xor_inplace`具有可写缓冲区的对象，例如`bytearray`. 这个版本返回`None`。我还添加了`unsigned char`默认值为 55 的第二个参数。

例子：

```
>>> s = 'abc'
>>> b = bytearray(s)
>>> fast_xor(s), fast_xor(s, 0x20)
('VUT', 'ABC')
>>> fast_xor_inplace(b, 0x20)
>>> b
bytearray(b'ABC')

>>> fast_xor_inplace(s)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
BufferError: Object is not writable.

>>> fast_xor(b, 256)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: unsigned byte integer is greater than maximum 
```

来源：

```
#include <Python.h>

static PyObject *fast_xor_inplace(PyObject *self, PyObject *args)
{
    PyObject *arg1;
    unsigned char arg2 = 55;
    Py_buffer buffer;
    char *buf;
    int i;

    if (!PyArg_ParseTuple(args, "O|b:fast_xor_inplace", &arg1, &arg2))
        return NULL;

    if (PyObject_GetBuffer(arg1, &buffer, PyBUF_WRITABLE) < 0)
        return NULL;

    buf = buffer.buf;
    for(i=0; i < buffer.len; i++)
        buf[i] ^= arg2;

    PyBuffer_Release(&buffer);
    Py_INCREF(Py_None);
    return Py_None;
}

static PyObject *fast_xor(PyObject *self, PyObject *args)
{
    PyObject *arg1;
    unsigned char arg2 = 55;
    PyObject *result;
    Py_buffer buffer;
    char *buf, *str;
    int i;

    if (!PyArg_ParseTuple(args, "O|b:fast_xor", &arg1, &arg2))
        return NULL;

    if (PyObject_GetBuffer(arg1, &buffer, PyBUF_SIMPLE) < 0)
        return NULL;

    result = PyString_FromStringAndSize(NULL, buffer.len);
    if (result == NULL)
        return NULL;

    buf = buffer.buf;
    str = PyString_AS_STRING(result);
    for(i=0; i < buffer.len; i++)
        str[i] = buf[i] ^ arg2;

    PyBuffer_Release(&buffer);
    return result;
}

static PyMethodDef fastxorMethods[] =
{
     {"fast_xor", fast_xor, METH_VARARGS, "fast xor"},
     {"fast_xor_inplace", fast_xor_inplace, METH_VARARGS, "fast inplace xor"},
     {NULL, NULL, 0, NULL}
};

PyMODINIT_FUNC
initfastxor(void)
{
    Py_InitModule3("fastxor", fastxorMethods, "fast xor functions");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T10:32:24.670

尝试

```
 char pybuffer[1024];
  ...
  PyArg_ParseTuple (args, "s#", pybuffer, sizeof(pybuffer)); 
```

不确定缓冲区大小要求是什么 - 我假设 1024 就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T10:51:05.390

不要使用`for`-loop。改为使用[列表](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)推导，它们要快得多：

```
In [1]: import random

In [2]: t = bytearray([random.randint(0,255) for i in xrange(10000)])

In [3]: u = bytearray([b^55 for b in t]) 
```

这非常快：

```
In [11]: %timeit u = bytearray([b^55 for b in t])
1000 loops, best of 3: 1.36 ms per loop 
```

这并不慢。对于 1 MB（10**6 字节），大约需要 130 毫秒。

当然，使用 numpy 作为 Henry Gomersall 的回答是更好的解决方案。

# .htaccess - 将一个域的所有子域重定向到另一个域

> ID：15459685
> 
> 赞同：-2
> 
> 时间：2013-03-17T10:22:48.527
> 
> 标签：.htaccess

我想使用 htaccess 将域的所有子域重定向到另一个域。一个例子 ：

`*.domain1.com`到`*.domain2.com`

我能怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:44:18.090

也许是：

```
RewriteCond %{HTTP_HOST} ^(.*)\.domain1\.com$ [NC]
RewriteRule ^(.*)$ http://%1.domain2.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:51:31.800

使 www 可选

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?(.+)\.example\.com$ [NC]
RewriteRule ^(.*)$ http://example.com/%2 [R=301,L] 
```

# c# - TweetSharp SendTweetWithMediaOptions 示例

> ID：15459686
> 
> 赞同：4
> 
> 时间：2013-03-17T10:22:54.587
> 
> 标签：c#, asp.net, asp.net-mvc, twitter, tweetsharp

这里有人尝试使用 TweetSharp 用图像发推文吗？

我尝试了以下方法：

```
Dictionary<string, Stream> imageDict = new Dictionary<string, Stream>();
imageDict.Add(imagePath, imageStream);
// I'm getting an error with the line below.
// It's saying I have some invalid arguments. :(
status = service.SendTweet(new SendTweetWithMediaOptions() { Status = readerMsg.Message, Images = imageDict }); 
```

但最后一行给了我一个无效的参数错误，没有任何有用的理由。

我尝试查看他们的[GitHub](https://github.com/danielcrenna/tweetsharp)页面，但该示例仅说明了如何发布简单的文本消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T19:27:24.397

请参阅此拉取请求的第一部分：[TweetSharp Github](https://github.com/danielcrenna/tweetsharp/pull/65/files)

调用`SendTweetWithMedia`而不是 SendTweet 可能是这种情况。

此外，字典中的键似乎不是图像路径（无论如何你都在给它一个 Stream）示例将“测试”传递给它。

--HTH 玩得开心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T17:08:18.230

`service.SendTweet()`接受类型参数`SendTweetOptions`，如果你想发布图片，你可以使用

```
service.SendTweetWithMedia(new SendTweetWithMediaOptions 
{ 
     Status = "message", 
     Images = dictionary 
}
); 
```

# json - 公共 Facebook 页面上其他人的帖子的 JSON 数据

> ID：15459687
> 
> 赞同：0
> 
> 时间：2013-03-17T10:23:05.110
> 
> 标签：json, facebook

如何以 JSON 格式在公共 Facebook 页面上检索其他人的帖子？

例如，[Stackoverflow Facebook](https://www.facebook.com/stackoverflowpage)页面。如何在页面上获取包含来自 Stackoverflow facebook 粉丝的帖子的 JSON 数据？所以，我可以在我的网络、android 应用程序等上列出它们。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:31:51.747

您应该能够使用`me/feed`有效的访问令牌检索帖子。如果这不起作用，请尝试使用`pageid/feed`有效的访问令牌。这将返回所有帖子（包括状态更新）。您可以通过多种方式过滤它们。这是使用图形 API 的方法。否则有 FQL 查询。我希望这有帮助。

# jms - LoadRunner 和 JMS

> ID：15459688
> 
> 赞同：1
> 
> 时间：2013-03-17T10:23:06.133
> 
> 标签：jms, loadrunner

LoadRunner 是否支持测试 JMS 队列？我需要什么协议来处理这个任务？显然，如果没有 GUI 来测试（使用 http 协议），这是一个挑战。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:47:27.707

你这里真的有好几条路

(1) Web服务虚拟用户中的JMS Queue支持

(2) JMS with Java Code in Java Template virtual User

(3) VB Code for Native queue support，绕过JMS映射层

(4) Native queue support的C代码，绕过JMS映射层

(5) Winsock（适用于非安全 MQ 队列...尚未尝试与其他队列类型一起使用）

我更喜欢按顺序选择选项 5,3 和 2。选项 1 对我来说似乎总是不必要地复杂，无法让它发挥作用。即，我通常必须为一些奇特的技巧致电支持，而我从不想致电 HP 支持，因为我知道在找到可以提供帮助的人之前，这将是一系列艰难的对话。

第 2 项工作得很好，但我把它留到最后的原因是我是 C 的本地思想家，所以当我接触到 Java 时，我必须用 C 来思考，然后再转换到 Java，所以我的工作效率受到了打击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:51:12.313

看起来您需要 JMS 协议插件

[http://h21007.www2.hp.com/portal/download/product/25384/JMS_datasheet_protocol_1225202153810.pdf](http://h21007.www2.hp.com/portal/download/product/25384/JMS_datasheet_protocol_1225202153810.pdf)

# c# - 将唯一的单击事件绑定到转发器中的每个项目（ajax/jquery）

> ID：15459689
> 
> 赞同：0
> 
> 时间：2013-03-17T10:23:11.660
> 
> 标签：c#, jquery, asp.net, ajax

好的，所以我有这个中继器：

```
 <asp:Repeater runat="server" ID="rep"  >
        <ItemTemplate> 
        <tr>
        <td>           
        <div id="resultDiv">
        click me
        </div>                      
        </td>
        </tr>            
        </ItemTemplate>
        </asp:Repeater> 
```

我有这个 jquery ajax 调用：

```
 $(document).ready(function () {
            $("#resultDiv").click(function () {
                $.ajax({
                    type: "POST",
                    url: "Page.aspx/GetDate",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        // Replace the div's content with the page method's return.
                        $("#resultDiv").text(msg.d);
                    }
                });
            });
        }); 
```

问题是这只适用于中继器内的第一个 div。如果我单击任何其他 div，则不会触发 click 事件。我知道这是因为它们都有相同的 id，即“resultDiv”。

我现在正在寻找一种为他们提供唯一 ID 的方法，我可以这样做：（在中继器 itemtemplate 内）

```
 <td>          
<div id="resultDiv_<%#Eval("divId") %>">
 click me
 </div> 
```

这为转发器内的所有 div 提供了唯一的 ID，但是这样 ajax 点击事件不再触发，因为

```
 $("#resultDiv").click(function () { 
```

`resultDiv`现在类似于`resultDiv_1`or `resultDiv_2`。

所以我正在寻找一些东西来将点击事件绑定到转发器内的每个 div。我尝试在 ajax 调用中这样做：

```
$("#<%#Eval("divId") %>").click(function () 
```

但这不起作用，并给了我各种错误。

我有什么办法可以做到这一点？请不要说我不想使用更新面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:32:14.573

如果您需要实时事件处理程序，您应该使用`on`：

```
$("body").on('click', '#resultDiv', function(e) { }); 
```

如果您想以相同的方式处理所有#resultDiv（使用`resultDiv_1`or `resultDiv_2`），您可以使用：

```
$("body").on('click', 'div[id^=resultDiv]', function(e) { }); 
```

您可以使用类而不是 ID，因为它们不是唯一的，您可以使用`addClass`或轻松地使用它们`removeClass`！

在您的情况下，我将向每个 div 添加相同的类，并将参数传递给一些数据属性（如果您需要每次单击来调用不同的任务）：

```
<div id="resultDiv" class="result" data-some-var="some-param">
    click me
</div> 
```

而不是你的活动：

```
$("body").on('click', '.result', function(e) {
    var param = $(this).attr('data-some-var');
    //send or do something different according to the param
}); 
```

# java - Java中的自动更新ID

> ID：15459691
> 
> 赞同：-1
> 
> 时间：2013-03-17T10:23:26.653
> 
> 标签：java, auto-generate

这是我的学校作业。我需要一个库存系统，当用户输入新产品时，它会自动更新产品 ID。我创建了一个名为 Product 的对象数组，它具有 4 个属性（名称、ID、价格、数量）。ID 不需要用户输入。

这部分在 input() 方法中，它与 Object 位于不同的类中。我没有将 ID 传递给对象类，就像我对其他三个属性所做的那样。

```
 x[i] = new Product(name,price,stock);
            id = x[i].setID(); 
```

* * *

对象类的一部分：

```
/**
 * Constructor
 */
public Product(){
    id = 0; name = ""; price = 0.00; quantity = 0;
}

public Product( String n, double p, int q){
    setName(n); setPrice(p); setQuantity(q);
}

public void setID(){
    this.id = id++;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:36:50.850

您所拥有的将不起作用，因为`id`它是一个实例变量。这意味着您创建的每个产品的 ID 都是 0。调用`setID()`您创建的每个产品都会将每个产品的 ID 设置为 1。

您需要一个`static`计数器，它属于该类，而不是它的每个实例：

```
public class Product {
    private static int nextId = 0;

    ...

    public Product(String name, double price, int quantity) {
        this.id = Product.nextId;
        Product.nextId++;
        this.name = name; 
        this.price = price; 
        this.quantity = quantity;
    }
} 
```

请注意，这在多线程环境中效果不佳，并且 double 对价格来说是一个糟糕的选择，但稍后您会了解到这一点。

有关实例和静态变量的更多信息，请参阅[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:32:43.960

您是否正在寻找一种为每个 Product 对象生成唯一 ID 的方法？如果是这样，那么您现在编写它的方式就行不通了，因为每个 Product 都有自己的 id，它完全独立于所有其他 Product 对象。有几种方法可以解决这个问题：-

1.  查看静态变量在 Java 中的含义
2.  在代码中维护一个变量，每次创建 Product 对象时该变量都会递增。将此变量传递给 Product 的构造函数。

# c - 将字符串复制到指针似乎不起作用

> ID：15459694
> 
> 赞同：-1
> 
> 时间：2013-03-17T10:23:52.847
> 
> 标签：c, string, pointers, copy

我有这个结构`Node`

```
typedef struct Node{
  unsigned int length;
  char *string;
} Node; 
```

此操作接受指向 a 的指针`Node`并尝试附加提供的字符串：

```
int setString(Node *node, char *string){

  char *newString;
  if(!isString(node) || !string) return 0;

  newString = (char *) malloc(strlen(string)+1);
  if(!newString) return 0;

  /*THIS PART FAILS*/
  strncpy(newString,string,sizeof(newString));

  node->string = newString;
  node->length = strlen(newString);

  /*Which can be seen here*/
  printf("Original String: %s\n",string);
  printf("Copied String: %s\n",node->string);

  return 1;
} 
```

在指示的部分，我可以看到原始字符串似乎没有被复制到`node->string`. 它会复制前两个字符，然后接下来的内容要么是垃圾，要么是空白。

我检查了这篇文章，我正在关注第三种情况，这似乎适用于 OP。也许我忽略了一些东西，但就是不知道在哪里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T10:25:53.453

```
strncpy(newString,string,sizeof(newString)); 
```

在这种情况下`sizeof`不会做你想做的事。通过您分配或**不使用`strncpy`**的大小。如果您遵循自己的逻辑，那么您已经信任，`string` **因为您在`strlen`**调用时接受了它`malloc`。

因此，您可以安全地使用`strcpy`。

* * *

如果你愿意去一点非便携，你可以侥幸逃脱：

```
newString = strdup(string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:27:31.527

您的 sizeof() 调用导致您的问题：

```
sizeof(newString); 
```

newString 是一个指向字符的指针，在这里声明：

```
char *newString; 
```

字符指针（通常）使用 2,4 或 8 个字节（取决于机器架构）。所以很明显，您只复制了前 2/4/8 个字节。用于`strlen(string) + 1`要复制的字符数。

或者你可以只使用`strcpy()`. 这将处理终止的空字节。由于您使用`malloc()`正确调用，`strlen`因此没有机会导致溢出`strcpy()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T10:28:19.993

您不能使用`sizeof()`来确定字符串长度。

您必须改用该`strlen(string)`功能。

您还需要`\0`在复制符号之后设置以终止字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T10:29:24.447

不确定，但直接试试这个：

```
strncpy(node->string,string,strlen(newString)); 
```

将长度函数更改为**strlen**。

（我试图将代码更改为粗体）

# c# - 如何在多个后台工作人员中划分大型加载任务？

> ID：15459698
> 
> 赞同：1
> 
> 时间：2013-03-17T10:24:13.180
> 
> 标签：c#, asp.net, visual-studio-2010, c#-4.0

如何让多个后台工作人员..第一个从 db 获得 100 条记录，当第一个完成时，第二个开始并从 db 获得另外 100 条记录，并将其附加到第一个加载的 100 条记录和另一个 BG，直到我从加载我的所有数据D b ？

# javascript - 回调中的原型递归函数

> ID：15459703
> 
> 赞同：2
> 
> 时间：2013-03-17T10:24:35.717
> 
> 标签：javascript, prototypejs

我在原型对象中有以下函数：

```
EmptyChild:function(node)
{

     if (Array.isArray(node.children)) {
        node.children = node.children.filter(
            function(child) {
                if (child['id'] =="" || child.length) {
                    return false;
                } else {
                    this.EmptyChild(child);
                    return true;
                }
            }
        );
    }
} 
```

但我收到以下错误：

```
 Uncaught TypeError: Object [object global] has no method 'EmptyChild' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T10:26:30.020

`this`是回调中的全局对象。您需要将其保存在变量中或将其传递给`filter`.

请参阅[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

> 如果为过滤器提供了 thisObject 参数，它将被用作回调的每次调用的 this。如果未提供或为 null，则使用与回调关联的全局对象。

所以你的代码可以是：

```
 if (Array.isArray(node.children)) {
        node.children = node.children.filter(
            function(child) {
                if (child['id'] =="" || child.length) {
                    return false;
                } else {
                    this.EmptyChild(child);
                    return true;
                }
            }
        , this); // <===== pass this
    } 
```

# c# - 在 C# Winform 中永久存储用户选择

> ID：15459710
> 
> 赞同：0
> 
> 时间：2013-03-17T10:25:01.057
> 
> 标签：c#, .net, winforms

如何将用户的选择永久存储在 c# winform 中。我写了这段代码来获取设置：

```
string my_data_to_do = (string)Settings.Default["MyDataToDo"]; 
```

为了保存用户的设置，我写道：

```
if (checkBox3.Checked)
{
   Settings.Default["MyDataToDo"] = "Tasks In Hand";
}
else
{
   Settings.Default["MyDataToDo"] = "Nothing To Do";
} 
```

这显示了保存的数据，但仅在我退出应用程序之前。当我退出并再次启动我的程序时，所有这些设置都会自动删除，并且会出现默认数据，我将其保存在**Settings.settings**文件中。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T10:27:40.530

仅从您发布的代码中很难判断您是否正在执行此操作，但是在设置了这样的设置之后，您需要调用 Settings.Default.Save() 以使其在应用程序关闭后持续存在。

# javascript - 如何在 KendoUI 自动完成中显示加载图像

> ID：15459712
> 
> 赞同：1
> 
> 时间：2013-03-17T10:25:18.423
> 
> 标签：javascript, jquery, kendo-ui

我有以下自动完成代码。

```
$("#input").kendoAutoComplete({
        minLength: 4,
        dataTextField: "ProductName",
        template: kendo.template($('#productAutoCompleteTemplate').html()),
        dataSource: {
            serverFiltering: true,
            data: "json",
            transport: {
                read: {
                    url: productSearchUrl,
                    dataType: "json",
                    type: "post"
                },
                parameterMap: function(data) {
                    return {
                        searchText: $('input.txtProductText', $panelBar.select()).val()
                    };
                }
            }

        },
        select: onProductSelected
    }); 
```

自动完成工作正常。但我需要显示加载图像，直到从服务器检索到数据。如何使用 KendoUI 自动完成功能实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:20:01.137

您可以借助 dataSource[事件**requestStart**和**requestEnd**](http://docs.kendoui.com/api/framework/datasource#events-requestStart)轻松完成此操作。您可以分别显示（）和隐藏（）您的加载 gif 或任何您的加载动画。

# c - 使用递归函数计算数组的平均值

> ID：15459717
> 
> 赞同：0
> 
> 时间：2013-03-17T10:26:02.917
> 
> 标签：c, function, recursion, average

你将如何编写一个递归函数来计算数组元素的平均值？

这是我到目前为止所拥有的：

```
int media(int numeros[], int i, int n) {
    if (i == n-1) return numeros[i]/n;  
    return numeros[i]/n + media(numeros, i + 1, n); 
} 
```

但它不起作用，我认为这是因为这条线：`if (i == n-1) return numeros[i]/n;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:44:40.697

这个怎么样：

```
double media(int numeros[], int i, int n) {
    if (i == n - 1) {
        return numeros[i];
    }

    if (i == 0)
        return ((numeros[i] + media(numeros, i + 1, n)) / n);
    else
        return (numeros[i] + media(numeros, i + 1, n));
} 
```

您正在做的是除以每次调用的元素数量 - 这样做会给您错误的平均值。上面的代码做了你正在做的事情，但是当它即将返回结果时（当`i==0`）它会根据所有元素的总数计算实际平均值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:00:38.847

问题是，如果你除以每个元素，由于舍入（到整数），你很可能会得到一个不正确的答案（整数除以整数返回整数）。

对于`{1,2,3,4}`，我们将每个元素除以 4 - `1/4 + 2/4 + 3/4 + 4/4`，但是每个除法返回一个整数，所以它们都是 0，结果是 0。

所以，**要么做到`double`：（**但由于四舍五入，最后还是分开更好）

```
double media(int numeros[], int i, int n){
   if (i == n-1) return 1.0*numeros[i-1]/n;  
   return 1.0*numeros[i]/n + media(numeros, i + 1, n); 
} 
```

或者**在最后分开：（**无论是肖恩兰德斯曼建议的方式，还是如下所示）

```
int media(int numeros[], int i, int n){
   if (i == -1) return media(numeros, 0, n)/n;
   if (i == n-1) return numeros[i-1];
   return numeros[i] + media(numeros, i + 1, n);
} 
```

呼叫者：

```
int media(array, -1, n); 
```

# tsql - 如何管理插入的外键错误以进行数据验证（t-sql）

> ID：15459732
> 
> 赞同：0
> 
> 时间：2013-03-17T10:27:27.693
> 
> 标签：tsql, database-design, foreign-keys, sql-server-2000, validation

我正在 SQL Server 2000 中构建一个数据库，需要通过测试外键违规来执行数据验证。这篇文章与我之前的一篇文章（[Trigger exits on first failed insert and cant set xact_abort OFF in SQL Server 2000](https://stackoverflow.com/questions/15454476/trigger-exits-on-first-failed-insert-and-cant-set-xact-abort-off-in-sql-server-2)）有关，该文章重点介绍了如何从工作 SQL Server 2005 实现移植到 server 2000 实现。根据在这篇文章中收到的建议需要批发重新编码，我现在正在重新考虑设计本身——因此这篇文章。回顾一下我的申请，我的

*   我收到一个包含**约 5k 条记录的****每日**数据馈送到一个暂存表中。当这个插入完成时，一条记录会被添加到一个名为 TRIGGER_DATA 的表中。
***   我在该表上创建了一个“插入时”触发器，然后尝试将其中的数据一次插入 FACT_data 表中的一条记录。*   FACT_data 表是许多 DIM 表的外键，这些表定义了字段可以接受的输入。*   如果任何记录违反外键约束，则插入应该失败，并且应该将记录插入到 Load_error 表中（该表没有外键并且所有字段都可以为空）。**

 **考虑到每次插入中的记录量，我认为在 Stage_data 表上创建触发器不是一个好主意，因为这会导致每天一次性触发约 5k 触发器。但是，由于我无法在 SQL Server 2000 下的触发器中将 xact_abort 设置为关闭，因此在第一次失败时它会在触发器中中止，我想知道它是否实际上是一个不错的解决方案。

问题：

1.  我现在问自己的基本问题是执行此操作的典型方法是什么——在我看来，通过检查 FK 违规进行的这种数据验证必须很常见，因此可能已经出现了共识最佳实践（尽管我真的不能为 server 2000 平台找到任何一个！）
2.  考虑到每个插入中的记录量，我是否正确地认为 stage_data 表上的触发器是不好的做法，还是可以接受？
3.  我从触发器中循环遍历每条记录并测试插入的方法是否可以？
4.  你对我刚刚想到的这个替代方案有什么看法。完全停止使用触发器，并在加载 Stage 表后，使用一条记录更新“堆栈”表，该记录表明数据已被接收并准备好进行验证并加载到 FACT 表（可能连同指示顺序的优先级）必须处理哪些订单任务）。然后，此堆栈或“作业”表将成为所有请求插入及其状态（已创建/进行中/已完成）的寄存器。然后我会有一个存储过程不断地轮询这个表并处理最高优先级的记录。这意味着所有存储的过程调用都将在触发器之外发生。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:22:44.047

你根本不需要触发器。除非出于某种原因您需要对每日数据加载进行瞬间计时，否则只需安排一个作业（存储过程），该作业根据需要经常运行以在暂存表中查找数据。

当它找到任何记录时，一次处理一个记录并加载正常的记录，并对已损坏 FK 的记录执行任何操作（删除、移动到工作队列等）。

如果您使用的调度频率通常足够高，以至于在最后一个作业仍在运行时存在下一个作业开始的风险，那么您应该创建一个哨兵表，您的存储过程可以写入该表来说明该作业正在运行。这可以以两种方式之一起作用。要么您只有一条记录显示“正在运行”或“未运行”，要么您可以为每个作业拥有一条记录（如事务日志），其中包含指示作业是否完成的状态代码。**

# javascript - css transition-end 没有事件被触发

> ID：15459736
> 
> 赞同：0
> 
> 时间：2013-03-17T10:27:38.993
> 
> 标签：javascript, events, css-transitions

如果关键帧动画结束，我会尝试获取一个事件，但我没有让它工作。

也许有人可以看看并告诉我我做错了什么，我用jQuery“on”和addListener试过了......

我在 codepen [http://codepen.io/destroy90210/pen/faeAh](http://codepen.io/destroy90210/pen/faeAh)上放了一个例子， 我用 chrome v25 测试它

```
$(".addView").on("click", function(){
  $(".content").append("<div id='col' class='column'>view</div>");
  //this doesn´t work
  var elm = document.getElementById("col"); 
  elm.addEventListener('webkitTransitionEnd', function( event ) { 
    alert( "Finished transition!" ); 
    }, false );
  //or this
  console.log($(".column"));
  $(".column").on('webkitTransitionEnd', function () {
    alert( "Finished transition! 2" ); 
  });
});

//or this :(
$(".content").on('webkitTransitionEnd', '.column', function () {
  alert( "Finished transition! 3" ); 
}); 
```

css

```
.column{
  width: 25%;
  float: left;
  background-color: #00ff00;
  height:100%;
  color:white;
  text-align:center;
  font-size:3em;
  font-weight:300;
  -webkit-transform-origin: 0% 50%;
-webkit-animation: rotateInFromRight 1s cubic-bezier(.70, 0, .40, 1) 1 normal forwards;
}

@-webkit-keyframes rotateInFromRight{
  0% { -webkit-transform:rotateY(90deg);opacity:0}
  50%{ opacity:1}
  100%{ -webkit-transform: rotateY(0deg); opacity:1}
} 
```

html

```
<div class="sidebar">
  <button class="addView">add View</button>
</div>
<div class="content"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:01:42.613

由于您正在创建将动态设置动画的元素，因此您需要像这样将处理程序附加到**该**元素。

```
$(".addView").on("click", function(){
  var elm = $("<div id='col' class='column'>view</div>");
  elm.eq(0).bind('webkitAnimationEnd', function() {
    alert('Finished transition');
  });
  $(".content").append(elm);
}); 
```

[更新了笔](http://codepen.io/anon/pen/igzkl)。

# c# - C# - 如何从任务管理器的“应用程序”选项卡中隐藏窗口？

> ID：15459741
> 
> 赞同：-4
> 
> 时间：2013-03-17T10:28:24.557
> 
> 标签：c#, winforms, console-application

我想用 C#（控制台或 Windows 应用程序）制作程序。我想从任务管理器的“应用程序”选项卡中隐藏我的应用程序

我不想这样做：

```
Form1.Text=""; 
```

我希望用户在任务管理器的应用程序选项卡中不显示任何内容。任何人都知道我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:34:46.813

没有办法从任务管理器中隐藏它，但是您可以通过使其显示为来伪装它`"svchost.exe"`

这些程序可`task manager`用于检查用户在您的计算机上运行的进程。

# web-services - 使用 Web 服务 API 在 Moodle 中获取所有日历事件

> ID：15459745
> 
> 赞同：1
> 
> 时间：2013-03-17T10:28:42.010
> 
> 标签：web-services, calendar, moodle

将moodle升级到2.5dev版本后，我试图在url中使用**core_calendar_get_calendar_events函数获取日历事件：**

```
http://localhost/moodle-2.5dev/webservice/rest/server.php?wstoken=token_here&wsfunction=core_calendar_get_calendar_events 
```

结果只是一个空的 xml 文件，其中包含元素`KEY name="events"`和`KEY name="warnings"`. 从 Documents API 我得到它需要参数**events**，但不知道如何使用它，因为该函数本身是新的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:01:12.543

您想查看 ROOT/calendar/externallib.php - 这可能更准确地称为组件的 Web 服务库。查找函数`get_calendar_events_parameters`：这告诉您该函数需要两个参数。第一个参数“events”是一个带有“eventids”的数组，其中包含一个id数组；'courseids' 和 'groupids' 也是如此。

第二个参数是“options”，它是一个包含“userevents”（布尔）、“siteevents”（布尔）、“timestart”（整数）、“timeend”（整数）和“ignorehidden”（布尔）的数组。

所以函数调用应该是这样的：

```
$soap->core_calendar_get_calendar_events(array(array(1),array(2),array(3)), array(true, true, 0, 0, true)); 
```

# php - 从 iframe 获取 php 变量

> ID：15459747
> 
> 赞同：0
> 
> 时间：2013-03-17T10:29:04.997
> 
> 标签：php, javascript, iframe

我一直在玩小书签，并制作了一个将页面包装在`iframe`然后放置表单的小书签，这样我就可以将数据提交到我的服务器，但我无法从页面中获取 PHP 变量。

示例代码（已编译为书签： http: [//moxleystratton.com/javascript/bookmarklet-compiler](http://moxleystratton.com/javascript/bookmarklet-compiler)）：

```
javascript:void((function(){
var a=document;
a.write(
      '<!DOCTYPE html>
      <html>
          <head>
          <meta charset="UTF-8">
          <title>'+a.title+' - Edit Mode </title>
      </head>
      <body>
      <section>
      <div id="wrapper">
      <iframe src="'+a.URL+'" >
      </iframe>
      </div>
      </section>
      <footer>
            <form action="/sys/manage/seo.php" method="post">
    <input type="hidden" value=rawData >
    <label for="title">Title</label>
    <input type="text" name="title" value="<?= $title;?>">
    <label for="title">Meta-Description</label>     
    <input type="text" name="meta-desc" value="<?= $data->meta-desc;?>">
    <label for="title">Meta-Keywords</label>        
    <input type="text" name="meta-key" value="<?= $data->meta-key;?>">
</form>
      </footer>
      </body>
      </html>')})()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:36:41.663

首先像这样修复你的JS：

```
void((function(){
var a=document;
a.write(
      '<!DOCTYPE html>\
      <html>\
    <head>\
          <meta charset="UTF-8\
          <title>'+a.title+' - Edit Mode </title>\
      </head>\
      <body>\
      <section>\
      <div id="wrapper">\
      <iframe src="'+a.URL+'" >\
      </iframe>\
      </div>\
      </section>\
      <footer>\
            <form action="/sys/manage/seo.php" method="post">\
    <input type="hidden" value=rawData >\
    <label for="title">Title</label>\
    <input type="text" name="title" value="<?= $title;?>">\
    <label for="title">Meta-Description</label>     \
    <input type="text" name="meta-desc" value="<?= $data->meta-desc;?>">\
    <label for="title">Meta-Keywords</label>        \
    <input type="text" name="meta-key" value="<?= $data->meta-key;?>">\
</form>\
      </footer>\
      </body>\
      </html>')})()); 
```

在这里演示：http: [//jsfiddle.net/shahverdy/Z5EBk/](http://jsfiddle.net/shahverdy/Z5EBk/)

# r - 具有连续出现的元素的干净向量

> ID：15459750
> 
> 赞同：0
> 
> 时间：2013-03-17T10:29:23.577
> 
> 标签：r

呈现如下矢量，

```
vec01 <- c(1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 1, 2, 1,
           2, 1, 1, 1, 1, 2, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 2, 2,
           1, 2, 2, 1, 1, 2, 3, 4, 1, 1, 1, 1, 1, 1, 1, 2, 3, 4, 5, 1, 1, 1,
           2, 1, 2, 3, 4, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3,
           1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 1) 
```

问题1：如何删除下面突出显示的异常：

```
vec01 <- c(1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 1, 2, 1,
           2, 1, 1, 1, 1, 2, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, *2*, *2*,
           1, 2, *2*, 1, 1, 2, 3, 4, 1, 1, 1, 1, 1, 1, 1, 2, 3, 4, 5, 1, 1, 1,
           2, 1, 2, 3, 4, *2*, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3,
           1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 1) 
```

异常的定义：该元素需要属于系列 1,2,.... 上面以粗体标记的元素

问题2：如何在去除异常后识别序列组，每个序列属于一个组，即输出如下

```
result <- structure(list(vec = c(1L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 3L,
                                 4L, 5L, 6L, 7L, 8L, 1L, 2L, 1L, 2L, 1L, 2L, 1L,
                                 1L, 1L, 1L, 2L, 1L, 2L),
                         group = c(1L, 1L, 2L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 8L,
                                   8L, 8L, 8L, 8L, 8L, 8L, 9L, 9L, 10L, 10L, 11L,
                                   11L, 12L, 13L, 14L, 15L, 15L, 16L, 16L)),
                         .Names = c("vec", "group"),
                         row.names = c(NA, 30L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T10:55:45.763

这是问题 2（如果最后删除所有 TRUE 则问题 1）

```
library(data.table)  #load data.table because syntax is nice (matter of pers taste)
DT = data.table(vec01)
DT[,counter:=ifelse(vec01==1,1,0)]  #identify each sequence starting with one
DT[,counter:=cumsum(counter)]  #trick to give a diff ID to each seq so we can use by
DT[,flag:=is.unsorted(vec01),by=counter]  #check sorting for each sequence 
```

编辑：替换`is.unsorted`为`f(vec01)``f = function(x){!(x==Reduce(max,x,accumulate=T))}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T10:42:36.887

要清理序列（问题 1）：

```
m <- vec01[1]==1
for (i in seq(2,length(vec01))) 
    m[i] <- vec01[i]==1 || vec01[i]==vec01[i-1]+1 && m[i-1]
vec01 <- vec01[m] 
```

现在制作您想要的结构（感谢@statquant的`cumsum()`想法）：

```
data.frame(vec=vec01, group=cumsum(c(1,diff(vec01)!=1))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T04:08:36.087

有趣的问题，这是另一个解决方案。它查看值在哪里递增并构建相应的理想（无异常）序列`vec02`。那么这只是一个比较`vec01`和的问题`vec02`。

```
is.incr <- c(FALSE, diff(vec01) == 1)
vec02   <- rep(1, length(vec01)) + sequence(rle(is.incr)$lengths) * is.incr
vec     <- vec01[vec01 == vec02]
result  <- data.frame(vec = vec, group = cumsum(vec == 1)) 
```

# java - 带有边框布局的左下角内容

> ID：15459755
> 
> 赞同：1
> 
> 时间：2013-03-17T10:29:43.470
> 
> 标签：java, swing, border-layout

我想在我的面板中添加一个状态栏。

实际上，它看起来像这样：

![在此处输入图像描述](../Images/f80cb5905055df26b1e52e9c7bf9ae55.png)

但我希望文本显示在左下角。

这是我的代码：

```
private JPanel pnl1, pnl2;
    //pnl1 contains everything exept the status bar, pnl2 only status bar
private JLabel lab3; 
    //lab3 is the status bar
    (…)

public static void main(String[] args) {
    new Panel1();
}

public Panel1() {

    pnl1 = new JPanel();
    pnl2 = new JPanel();

    lab3 = new JLabel("Started.");          //Statusbar
    (…)
    pnl1.setLayout(new FormLayout(
            "40*($lcgap, 10dlu)",
            "30*($lgap, 10dlu)" 
            ));
    CellConstraints cc = new CellConstraints();

    pnl1.add(…)
    pnl2.add(lab3);

    this.add(pnl1);
this.add(pnl2, BorderLayout.PAGE_END);
    this.(…) 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:37:46.240

您正在将标签添加到`pnl2`没有更改布局的情况下。`JPanel`is的默认布局[`FlowLayout`](http://docs.oracle.com/javase/6/docs/api/java/awt/FlowLayout.html#FlowLayout%28%29)，它使用居中对齐。

如果您希望标签左对齐，您可以使用 a `FlowLayout`，确保对齐设置为`LEADING`：

```
 pnl2.setLayout(new FlowLayout(FlowLayout.LEADING));
    pnl2.add(lab3); 
```

或者您可以使用不同的布局，例如`BorderLayout`：

```
 pnl2.setLayout(new BorderLayout());
    pnl2.add(lab3); 
```

# hadoop - 如何使用 Hadoop 从 csv 文件中读取 1000 万条记录并为每条记录创建 pdf

> ID：15459756
> 
> 赞同：-2
> 
> 时间：2013-03-17T10:30:00.963
> 
> 标签：hadoop, mapreduce, hdfs

下面的问题比 Hadoop 更符合 MapReduce。我需要知道如何将 hadoop 用于以下用例。

**用例：从 tsv 文件中读取 1000 万条记录（每条记录有 20 列），并为每条记录生成一个 pdf。**

我有以下可用的单元程序。

*   程序描述：一个静态方法，它接受一个 java 对象（表示单个记录），并返回一个 FilePath 字符串（创建的 pdf）。

*   程序名称：PdfUtil.createPdf(Record record) - 返回 FilePath 字符串。

在map方法中我应该做什么，在reduce方法中我应该做什么。如果我在 Mapper 的 map 方法中调用 PdfUtil.createPdf 方法，我应该在 Reducer 的 Reduce 方法中做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:20:01.963

@Suresh：是的，您可以在不使用 Reduce 方法的情况下在 Map Reduce 中编码。

只需编写 Map 方法，使用它调用 PdfUtil.createPdf。

我很困惑的一件事是，每条记录都需要一个 PDF 文件吗？

# java - Java 领域和安全请求

> ID：15459759
> 
> 赞同：2
> 
> 时间：2013-03-17T10:30:35.477
> 
> 标签：java, security, realm

我正在开发一个具有分离和孤立宇宙的游戏（对于那些了解这个游戏的人来说，就像 ogame）。一名玩家（帐户）与一个 Universe 相关联，但一名玩家（物理）可以为每个 Universe 创建一个帐户。

所以玩家可以在玩的时候登录多个宇宙并切换宇宙。

为此，我创建了`Authentication`存储`id`记录的玩家和宇宙名称（这是我的 PostgreSQL 数据库中的模式名称）的类。

所以，一个`Authentication`对象代表一个登录的玩家。为了管理应用程序角色，我使用了一个自定义领域，它只收集`id`和宇宙名称（来自我的`Authentication`对象）来处理 SQL 请求并获取组名以将其转换为角色。

所有这些机制都可以正常工作。

我想知道这样做是否真的安全？攻击者可以向我的领域发送请求并注入他的请求`id`和宇宙名称以直接处理身份验证吗？因为我的领域既不需要密码也不需要用户名（之前在我的应用程序中处理以创建`Authentication`对象），这样的恶意请求可能会起作用。

所以我的问题只是想知道是否可以在我的 Java 应用程序（或我的 Glassfish 服务器）之外发出对我的领域的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:21:14.550

假设请求发生在应用程序之外，并且来自客户端，那么如果您不验证用户名/密码，那么有人可能会在您的应用程序之外发出请求并侵犯您的安全性。您应该在提交领域/宇宙时要求提交用户名/密码，并在那时验证用户是否有权执行他们提出的请求。不仅要确保用户名/密码有效，还要验证他们是否已为他们正在登录的 Universe 以及他们尝试访问的领域/角色进行了注册。如果你不需要这个，你就会为攻击敞开心扉。

Firefox 和 Firebug 很好，但它不会向您显示原始请求。要真正查看请求和发生了什么，您应该使用像[Wireshark](https://www.wireshark.org/)这样的数据包嗅探器。如果您可以在那里看到请求，那么您很容易受到攻击。还要确保用户名/密码是加密的并且不能以纯文本形式查看，否则攻击者可以通过嗅探线路来提取用户的凭据。

如果所有处理都发生在服务器端并且没有发起客户端请求（并且您在客户端的 Wireshark 中什么也看不到），那么您可能是安全的。

# css - 少 @import 不起作用

> ID：15459764
> 
> 赞同：27
> 
> 时间：2013-03-17T10:31:44.737
> 
> 标签：css, web, less

```
<head>
    <link rel="stylesheet/less" href="less/news.less">
</head>
<body>
    <script src="less.js"></script>
</body> 
```

news.less 看起来像这样；

```
@import: "libs/base.less" 
```

base.less 看起来像这样；

```
@import "colors.less";
@import "mixins.less";
@import "bootstap.less";
@import "font-aweseome.less"

body {
    background-color: @light-grey;
} 
```

bootstrap.less 和 font-awesome.less 是带有更改扩展名的 CSS 文件。所有文件都在正确的文件夹中。

在浏览器中查看时，base.less 中的样式被忽略，这意味着我的导入不起作用。

任何人都可以提供任何提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-17T18:22:17.373

您的`@import`陈述必须遵循以下格式：

```
@import "styles.less"; 
```

`@import "font-aweseome.less"`不起作用，因为末尾没有分号。

`@import: "libs/base.less"`将不起作用，因为 import 语句后有一个冒号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T11:23:56.553

为什么冒号在：

```
@import: "libs/base.less" 
```

我认为毕竟@import-s 最好有一个分号。

查看控制台以确保路径正确，并且浏览器不会尝试从错误的 url 加载更少的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T14:17:28.180

**Try this:** @import url('Your Path');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-06T01:39:37.253

to import is

```
@import "styles.less"; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-04T09:44:52.987

1.在 news.less 中导入你的 base.less，

```
 @import "libs/base.less"; 
```

2.在html中引用你的news.less文件

```
 <link  rel="stylesheet/less" type="text/css"  href="less/news.less"/> 
```

3.Refer less.js library in the html

```
 <script src="lib/less.js"></script> 
```

# java - 免费标记模板如何在双HashMap中使用for语句

> ID：15459765
> 
> 赞同：1
> 
> 时间：2013-03-17T10:31:48.013
> 
> 标签：java, freemarker

在免费标记模板中，我想在 HashMap 中打印 HashMap。这可能吗？

我尝试

```
<#list capitalList?keys as key>
    ${key} = ${capitalList[key]}
</#list> 
```

但这不打印 HashMapin HashMap。我如何使用免费的标记模板来做到这一点。存在foreach还是for？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:55:04.620

您可以使用嵌套`list`指令。一个简单的例子：

```
<ul>
<#list hm2d?keys as hm2d_key>
    <#assign hm = hm2d[hm2d_key]>
    <li>${hm2d_key}:
        <ul>
        <#list hm?keys as key>
            <li>${key} = ${hm[key]}</li>
        </#list>
        </ul>
    </li>
</#list>
</ul> 
```

# ios - 如何在 3.5 和 5 英寸设备上居中查看？

> ID：15459766
> 
> 赞同：-1
> 
> 时间：2013-03-17T10:31:51.563
> 
> 标签：ios, objective-c, ios6

我有一个几乎没有控件的视图，并且我希望它垂直居中而不管设备如何。

我在没有太多帮助的情况下尝试了自动布局。

我尝试了 Size Inspector - Arrange - Center Horizo​​ntally in container，但它仅适用于一种类型的屏幕。所以如果我安排在4英寸的显示器上，3.5英寸会太低，如果我安排在3.5英寸上，4英寸会太高。

对此可以做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:43:04.253

您可以通过以下方式获得要放置的主视图的中心

```
 CGPoint viewCenterPoint = [[self view] center]; 
```

这将获得主视图中心的`x`和`y`位置。您可以自己为每个人设置`x`或位置`y`

```
CGPoint viewCenterPoint = CGPointMake([[self view] center].x, [[self view] center].y); 
```

所以如果你想拥有`x`主视图的中心，那么你可以这样做。

设置好`viewCenterPoint`之后，您就可以在您想要放置在主视图中心的新视图上执行此操作。

```
 // ... all code to set myNewView up
 [myNewView setCenter:viewCenterPoint]; 
```

很简单，这应该适用于 3.5 英寸和 4 英寸设备以及 iPad。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:35:12.740

尝试在代码中设置其框架的 X 和 Y`[UIScreen mainScreen].bounds.size`以获取屏幕的大小。

无论如何，我很确定这可以通过自动布局来完成

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-17T15:11:07.630

我最终使用了两种不同的 XIB，一种用于 3.5 英寸设备，一种用于 4 英寸设备。

# struts2 - jstl坚持选择我有一个JSP页面，通过迭代器打印arraylist内容 <s:iterator var="BeanList" value="BeanList"></s:iterator>每次

> ID：15459774
> 
> 赞同：0
> 
> 时间：2013-03-17T10:32:36.380
> 
> 标签：struts2, jstl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:36:10.927

您正在使用`HTML Select`标签，其值是从标签填充的`Struts2 Property`。

不涉及 JSTL。

`Struts2 Select`但请相信我，您可以直接使用标签来避免这种情况。

官方文档：[http ://struts.apache.org/release/2.3.x/docs/select.html](http://struts.apache.org/release/2.3.x/docs/select.html)

在行动

```
@Getter @Setter List<String> allCities; 
@Getter @Setter String selectedCity; 
```

在 JSP 中：

```
<s:select list="allCities" 
          name="selectedCity" /> 
```

比手动迭代更快更干净:)

* * *

最终，您可以添加一个可选的标头值：

```
<s:select list="allCities" 
          name="selectedCity" 
          headerKey="-1" 
          headerValue="Select a City" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:42:57.370

为此，您需要在 Action 类中声明一个带有选择框名称的变量，并为此放置 setter 和 getter。然后，当您提交表单时，名称匹配并自动填充到 Action 类中。

当检索`value`到相同变量的数据集时，它将使用名称自动填充。

这将通过`params interceptor`内部使用来实现。

# android - 异常查找布局文件

> ID：15459777
> 
> 赞同：2
> 
> 时间：2013-03-17T10:32:49.653
> 
> 标签：android

我不断收到带有 FileNotFoundException 异常的谷歌播放崩溃报告

```
java.io.FileNotFoundException: res/layout/newday.xml
at android.content.res.AssetManager.openXmlAssetNative(Native Method)
at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:533)
at android.content.res.Resources.loadXmlResourceParser(Resources.java:2132)
at android.content.res.Resources.loadXmlResourceParser(Resources.java:2105)
at android.content.res.Resources.getLayout(Resources.java:857)
at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:262)
at android.app.Activity.setContentView(Activity.java:1867)
at com.mycompany.myapp.activities.NewDayActivity.onCreate(SourceFile:75)
at android.app.Activity.performCreate(Activity.java:5008)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2096)
at android.app.ActivityThread.access$600(ActivityThread.java:138)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1207)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:213)
at android.app.ActivityThread.main(ActivityThread.java:4787)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
at dalvik.system.NativeStart.main(Native Method) 
```

我的应用程序包是 com.mycompany.myapp。这不会经常发生。抱怨此问题的用户还表示，这种情况发生在 50% 的情况下。那有什么问题呢？

在活动中，我使用这种方法

```
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
    setContentView(R.layout.newbodymeasureday);
} 
```

在 super.onCreate(arg0) 我有这个

```
getWindow().setFormat(PixelFormat.RGBA_8888); 
```

我在这个超级电话中也有一个主题变化

```
String theme = SharedPrefsUtils.getCustomTheme(act);
String[] codes = act.getResources().getStringArray(R.array.themes_codes);
if (theme != null && theme.equals(codes[1])) {
    act.setTheme(R.style.GymGymTheme);
    Log.d(TAG, "Theme Light");
} 
```

# magento - 如何为 Magento 中的字段加载 CSS 文件？

> ID：15459780
> 
> 赞同：1
> 
> 时间：2013-03-17T10:33:29.327
> 
> 标签：magento

我在 Magento 中有一个自定义管理配置字段类型，我想为该配置字段加载一个 CSS 文件（也是 javascript）。

字段类：

```
class Company_Module_Block_Configure extends Mage_Adminhtml_Block_System_Config_Form_Field
{

    protected function _getElementHtml(Varien_Data_Form_Element_Abstract $element)
    {
        // I would like to load the CSS and Javascripts files to the head.
        return "Here comes the field output";
    }
} 
```

我试过这个，但没有运气。也许头部渲染得更快：

```
Mage::app()->getLayout()->getBlock('head')->addCss('My css url...'); 
```

或者我应该以某种方式观察某种“before_body_end”事件。可能吗？

## 更新#1：

我已经开始经历 before_body_end 事件：

配置文件

```
<config>
   <global>
       <events>
            <core_block_abstract_to_html_before>
                <observers>
                    <test>
                        <class>Company_Module_Model_Observer</class>
                        <method>test</method>
                    </test>
                </observers>
            </core_block_abstract_to_html_before>
        </events>
    </global>
</config> 
```

观察到的方法如下所示：

```
public function test($block){
    if($block->getEvent ()->getBlock()->getNameInLayout() == 'before_body_end'){

    }
} 
```

# wordpress - 如何在wordpress中添加分页

> ID：15459787
> 
> 赞同：2
> 
> 时间：2013-03-17T10:34:29.453
> 
> 标签：wordpress

我在wordpress的模板文件中尝试了以下代码...

```
 <?php query_posts('showposts=3&post_type=packages&order=ASC&paged='.$paged) ?> 
```

它不工作......请帮助我！我是wordpress的初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T10:17:00.580

第一个参数是链接之间的分隔符

第二个参数是上一页

第三个参数是下一页

```
<div style="text-align:center;">
<?php posts_nav_link(' &#183; ', 'previous page', 'next page'); ?>
</div> 
```

您也可以用图像替换它们

```
<?php posts_nav_link( ' ', '<img src="' . get_bloginfo('stylesheet_directory') . '/images/prev.jpg" />', '<img src="' . get_bloginfo('stylesheet_directory') . '/images/next.jpg" />' ); ?> 
```

# c++ - 声明为`extern "C"`的函数的限制？C++ 功能仍然可用吗？

> ID：15459791
> 
> 赞同：5
> 
> 时间：2013-03-17T10:34:41.120
> 
> 标签：c++, c, language-features, extern

`extern "C"`除了指定标识符之外，还做些什么不应该被破坏？

C++ 功能在已声明为的函数中是否可用`extern "C"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:36:07.423

它只影响名称修改，以便其他应用程序可以清楚地看到外部可见性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:04:16.957

`extern "C"`并不**意味着**编译为 C 代码。这**仅**意味着应该编译该函数，以便可以从 C 代码中调用它；实际影响的是实现相关的。在这样的函数中，你可以在 C++ 中做的任何事情都很好，包括抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T14:46:59.253

您不应该从它们中抛出异常，否则您可以`extern "C"`使用尽可能多的 C++ 特性来实现函数体。

这很好：

```
MyObject myobj;
extern "C" { 
    int myfunc(char *c) 
    {    // c++ features used here
        std::string s = myobj.method(....
    }
} 
```

# sql - 如何使用 STUFF 连接具有相同 ID 的项目

> ID：15459792
> 
> 赞同：-4
> 
> 时间：2013-03-17T10:34:44.373
> 
> 标签：sql, tsql, sql-server-2008r2-express

我有三个表如下：

**订购产品变体**

```
Id  |   ProductVariantId
----------------------------------------
1   |   22 
2   |   23
3   |   24
4   |   25 
```

**产品变体**

```
Id  |   ProductId
----------------------------------------
22  |   34
22  |   35
23  |   36
23  |   37
24  |   38
24  |   39 
```

**产品**

```
Id  |   Product
----------------------------------------
34  |   KBDMouse800 
35  |   KBDMK250
36  |   LaptopCorei7
37  |   LaptopCorei5
38  |   BluetoothMouse1000
39  |   PresentorR800 
```

我希望输出结果为：

```
OrderProductVariant.Id  |   Product
-----------------------------------------
1           |   KBDMouse800, KBDMK250
2           |   LaptopCorei7, LaptopCorei5
3           |   BluetoothMouse1000, PresentorR800 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:42:59.250

当前查询将给出 table 中的所有记录`OrderProductVariant`。也许是时候弄清楚如何过滤不匹配的记录了。

```
SELECT  o.ID,
        STUFF((SELECT   ',' + ' ' + b.Product 
               FROM ProductVariant a
               INNER JOIN Product b ON a.ProductId = b.Id
               WHERE a.Id = o.ProductVariantId
               FOR XML PATH ('')), 1, 1, '')  AS ProductList
FROM    OrderProductVariant AS o
GROUP   BY o.ID, o.ProductVariantId 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/7f956/15)

# php - php构造函数继承

> ID：15459795
> 
> 赞同：7
> 
> 时间：2013-03-17T10:34:57.030
> 
> 标签：php, inheritance, constructor

我想澄清我遇到的问题

我有一个基本的 DataBase 类，它将被一堆其他类继承。构造函数如下所示：

```
public function __construct ($table)
{
     $this->table = $table;
     $this->db = new Database();
     $this->db->connect();
} 
```

我将从孩子的这个构造函数中调用如下：

```
 public function __construct ($something)
{
    parent::__construct("planets_games");
} 
```

我的问题是 php 不允许我在没有 $something 参数的情况下制作孩子的构造函数，我得到以下信息：

```
 Fatal error: Declaration of planetsGames::__construct() must be compatible with that of IScaffold::__construct() 
```

我目前正在通过实例化这样的对象来绕过它：

```
$pg = new planetsGames('uselessStringHereThatHasNoUtilityAtAll'); 
```

我想我在我的基本 php 知识中遗漏了一些非常重要的东西

非常感谢您提前提供的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T10:52:32.443

此错误消息涉及[liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。它适用于每个 IS-A 关系（这是使用继承（扩展）的含义），并声明每个子类型都应该完全可以替换为超类型。

但这不适用于构造函数！您使用的是哪个 php 版本？

似乎基类已将构造函数标记为抽象。这是出现此错误的唯一方式。

**您永远不应该将构造函数标记为抽象、最终或将它们放在接口中！**

在大多数语言中，这甚至是不可能的。

> 您应该从中得到的是，最佳实践是每个具体对象都有一个带有签名的构造函数，该签名最能代表消费者应如何完全实例化该特定对象。在某些涉及继承的情况下，“借用”父构造函数是可接受且有用的。此外，鼓励当您对特定类型进行子类化时，您的新类型应该在适当的时候拥有自己的构造函数，该构造函数对新子类型最有意义。

[http://ralphschindler.com/2012/03/09/php-constructor-best-practices-and-the-prototype-pattern](http://ralphschindler.com/2012/03/09/php-constructor-best-practices-and-the-prototype-pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-30T16:19:42.667

晚会晚了几年......

问题是您的构造函数**需要**一个值。您可以通过设置默认值（例如空字符串）来防止致命错误。

```
public function __construct($something = "")
{
    parent::__construct("planets_games");
} 
```

然后像平常一样实例化类

```
$pg = new planetsGames(); 
```

# algorithm - 如何生成表示“e”的二进制扩展的系列

> ID：15459799
> 
> 赞同：4
> 
> 时间：2013-03-17T10:35:15.443
> 
> 标签：algorithm, haskell, clojure, lazy-evaluation

我试图在“e”的扩展中找到前 100,000 个二进制数字。是否有一种算法可以将“e”的二进制数字生成为无限列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T12:46:26.880

`e`这是Haskell 中的一个无限制的插口：

```
main = print $ stream (1,0,1) [(n, a*d, d) | (n,d,a) <- map f [1..]]
    where
        f k = (1, k, 1)

stream z (x:xs)
    | lbound == approx z 2 = lbound : stream (mul (10, -10*lbound, 1) z) (x:xs)
    | otherwise            =          stream (mul z x) xs
  where
    lbound = approx z 1

approx (a,b,c) n = (a*n + b) `div` c

mul (a,b,c) (d,e,f) = (a*d, a*e + b*f, c*f) 
```

基于 Programming Praxis [unbounded spigot for e 和 pi](http://programmingpraxis.com/2012/06/19/digits-of-e/)，它又衍生自[Gibbon 的第一个 pi 无界 spigot。](http://www.cs.ox.ac.uk/jeremy.gibbons/publications/spigot.pdf)

```
$ runhaskell A.hs
[2,7,1,8,2,8,1,8,2,8,4,5,9,0,4,5,2,3,5,3,6, ^C 
```

如果您对这些有趣的算法感兴趣，我会推荐 Gibbon 的论文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T13:26:21.377

您可能有兴趣为此使用[CReal](http://hackage.haskell.org/packages/archive/numbers/3000.1.0.3/doc/html/Data-Number-CReal.html)。对于 100,000 个二进制数字，30,200 个十进制数字就足够了：

```
Prelude> 100000 * logBase 10 2
30102.999566398114
Prelude> :m + Data.Number.CReal
Prelude> :set +s
Prelude Data.Number.CReal> last $ showCReal 1000 (exp 1)
'4'
(0.34 secs, 34061824 bytes)
Prelude Data.Number.CReal> last $ showCReal 2000 (exp 1)
'4'
(1.25 secs, 104478784 bytes)
Prelude Data.Number.CReal> last $ showCReal 4000 (exp 1)
'7'
(5.96 secs, 355775928 bytes)
Prelude Data.Number.CReal> last $ showCReal 8000 (exp 1)
'2'
(20.89 secs, 1298942504 bytes) 
```

这种模式对我来说看起来是二次的，所以在我的机器上计算前 30,200 位`exp 1`看起来可能会在大约五六分钟内合理地完成。可能会接受直接以二进制输出的补丁（因此避免转换为十进制并返回）。

编辑：投影满意，计算时间不到六分钟！

```
Prelude Data.Number.CReal> showCReal 30200 (exp 1)
"2.718281828459045235360287471352662497757247093699959574966967627724076630353547594571382178525166427427466391932003059921817413596629043572900334...middle snipped due to StackOverflow message limit...39106913376148418348845963656215266103322394174671"
(349.44 secs, 17096829912 bytes) 
```

# python - 如何让pypdf逐行读取页面内容？

> ID：15459802
> 
> 赞同：1
> 
> 时间：2013-03-17T10:35:50.977
> 
> 标签：python, string, pdf, pypdf

我有一个 pdf，其中每一页都包含一个地址。地址格式如下：

```
Location Name

Street Address

City, State Zip 
```

例如：

```
The Gift Store

620 Broadway Street

Van Buren, AR 72956 
```

每个地址都仅采用这种格式，并且每个地址都位于 pdf 的不同页面上。

我需要提取地址信息并将结果存储在 excel/csv 文件中。我需要将每个信息字段的条目分开。我的 Excel 表需要在不同的列中包含位置名称、街道地址、城市、州、邮编。我在 python 中使用 pyPdf。

我已经使用以下代码来执行此操作，但我的代码没有考虑换行符；相反，它将单个页面的整个数据作为连续字符串提供。

```
import pyPdf  
def getPDFConten(path):
    content = ""
    num_pages = 10
    p = file(path, "rb")
    pdf = pyPdf.PdfFileReader(p)
    for i in range(9, num_pages):
        x = pdf.getPage(i).extractText()+'\n' 
        content += x

    content = " ".join(content.replace(u"\xa0", " ").strip().split())     
    return content

con = getPDFContent("document.pdf")
print con 
```

或者我上面的例子，它给出了“The Gift Store 620 Broadway Street Van Buren, AR 72956”。

如果我可以逐行读取输入，那么我可以轻松地从前两行获取位置名称和街道地址，然后使用子字符串从第三行获取其余部分。

我尝试使用[此处列出的解决方案（[pyPdf 忽略 PDF 文件中的换行符](https://stackoverflow.com/questions/11017379/pypdf-ignores-newlines-in-pdf-file?rq=1)），但它对我不起作用。我也尝试使用 pdfminer：它可以逐行提取信息，但它首先将 pdf 转换为文本文件，我不想这样做。我只想使用 pyPdf。谁能建议我错在哪里或我错过了什么？这可以使用pyPdf吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:11:34.743

您可以尝试使用从[poppler](http://poppler.freedesktop.org/)实用程序[`subprocess`](http://docs.python.org/2/library/subprocess.html)调用`pdftotext`（可能使用`-layout`选项） 。它比使用 pypdf 对我来说效果更好。

例如，我使用以下代码从 PDF 文件中提取[CAS编号：](http://en.wikipedia.org/wiki/CAS_registry_number)

```
import subprocess
import re

def findCAS(pdf, page=None):
    '''Find all CAS numbers on the numbered page of a file.

    Arguments:
    pdf -- Name of the PDF file to search
    page -- number of the page to search. if None, search all pages.
    '''
    if page == None:
        args = ['pdftotext', '-layout', '-q', pdf, '-']
    else:
        args = ['pdftotext', '-f', str(page), '-l', str(page), '-layout',
                '-q', pdf, '-']
    txt = subprocess.check_output(args)
    candidates =  re.findall('\d{2,6}-\d{2}-\d{1}', txt)
    checked = [x.lstrip('0') for x in candidates if checkCAS(x)]
    return list(set(checked))

def checkCAS(cas):
    '''Check if a string is a valid CAS number.

    Arguments:
    cas -- string to check
    '''
    nums = cas[::-1].replace('-', '') # all digits in reverse order
    checksum = int(nums[0]) # first digit is the checksum
    som = 0
    # Checksum method from: http://nl.wikipedia.org/wiki/CAS-nummer
    for n, d in enumerate(nums[1:]):
        som += (n+1)*int(d)
    return som % 10 == checksum 
```

# android - 如何通过IP地址Android找到无线网络设备的名称？

> ID：15459803
> 
> 赞同：1
> 
> 时间：2013-03-17T10:35:51.760
> 
> 标签：android

我有一个本地网络上的 IP 地址列表，我想知道哪个设备拥有每个地址，我怎么知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:18:11.037

引用以下文档`InetAddress`：

> **主机名解析**
> 主机名到 IP 地址的解析是通过结合使用本地机器配置信息和网络命名服务（例如域名系统 (DNS) 和网络信息服务 (NIS)）来完成的。默认情况下，正在使用的特定命名服务是本地计算机配置的服务。对于任何主机名，都会返回其对应的 IP 地址。
> 
> **反向名称解析意味着对于任何 IP 地址，都会返回与该 IP 地址关联的主机。**
> 
> InetAddress 类提供将主机名解析为其 IP 地址的方法，反之亦然。

那么这个方法就是[`InetAddress.getHostName()`](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#getHostName%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:20:30.910

使用 ip 地址创建一个 InetAddress 对象，然后在其上调用 getHostName

```
InetAddress inetAddr = InetAddress.getByName("192.168.1.20");
String hostname = inetAddr.getHostName(); 
```

请注意，虽然不能保证在 Android 上像这样实例化 inetAddress 对象时会完成反向查找，因此您需要在使用它之前检查主机名的值是否不为空。

# c# - 第三方 DLL 没有“强名称”？

> ID：15459816
> 
> 赞同：5
> 
> 时间：2013-03-17T10:36:59.060
> 
> 标签：c#, .net, vb.net, visual-studio-2010, assembly-signing

我的`Visual Studio 2010`解决方案引用了第三方专有 DLL。

当我尝试编译解决方案时，错误消息显示为：

> 无法发出程序集：引用的程序集“NameOfAssembly.DLL”没有强名称

使用我自己的密钥签署第三方 DLL 是解决此问题的唯一方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T12:50:36.443

这是任何创建他人使用的程序集的人的犯罪过失，因为在构建程序集时给它一个强名称是多么微不足道。事后做这件事很痛苦，你必须用 ildasm.exe 反编译程序集，然后用 ilasm.exe 将它重新组合在一起，现在使用 /key 选项。

如果您与所有者有工作关系，请向他们发送 nastygram。如果您不这样做，那么您可能应该质疑组件的质量，这是一个重大疏忽，并表明很少有人真正使用该组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-10T19:23:02.380

确保您已获得对程序集进行逆向工程的许可，以作为强名称。我不希望你有任何法律问题。您可以使用 ILDASM 和 ILASM 命令对程序集进行强命名。在 Visual Studio 命令提示符下。

使用 ILDASM 将程序集转换为 MISL 代码。ILDASM MyThirdParty.dll /out:MyThirdParty.il

使用 ILASM 使用强名称键进行编译。ILASM MyThirdParty.il /dll /resource=MyThirdParty.res /key=MyKey.snk

如果您需要创建强名称密钥，请使用 SN 命令。我认为它是 -k 选项。如果遇到 BadImage 异常，则检查程序集编译的 CLR 版本。如果它是 CLR 2.0/3.5，则使用“C:\Windows\Microsoft.NET\Framework\v2.0.50727\ILASM”而不是 4.0 版本.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T10:42:47.623

如果您想要强签名程序集，所有引用都必须是强签名的。此条[目](https://stackoverflow.com/questions/4244838/signing-assemblies-with-a-strong-name-ok-but-what-if-some-3rd-party-dll-isnt?rq=1)描述了这些步骤。

# jakarta-ee - 如何将 glassfish-resources.xml 与分布式 .jar 文件捆绑在一起？

> ID：15459817
> 
> 赞同：2
> 
> 时间：2013-03-17T10:37:00.697
> 
> 标签：jakarta-ee, deployment, resources, glassfish

[glassfish 文档](http://docs.oracle.com/cd/E26576_01/doc.312/e24929/deploying-applications.htm#giydj)说：

> 应用程序范围的资源在 glassfish-resources.xml 部署描述符文件中定义。该文件位于模块或应用程序存档的 META-INF 目录中。

然而，情况似乎并非如此。当我这样做并将 .jar 文件部署到我的 Glassfish 3.1.2 服务器时，他抛出了几个异常，并说：

> 准备应用程序时出现异常：资源无效：jdbc/malivechat-db-ds__pm

我的资源的 JNDI 名称实际上是“jdbc/malivechat-db-ds”。所以我不明白下划线“__pm”来自哪里（？）。但是，如果我单独添加我的资源，比如我通过管理控制台执行此操作，或者让 Netbeans 为我部署包，一切正常。

**有没有办法将 glassfish-resources.xml 文件与我们分发的 .jar 文件捆绑在一起？**

在我看来，它必须如此。虽然添加资源似乎是特定于应用程序服务器的（为什么？我的意思是为什么“glassfish-resources.xml”而不仅仅是“resources.xml”？），当然应该有一种方法来添加所有供应商特定的 *-resources.xml 文件到我们的 .jar 文件，从而“支持”一组不同的应用程序服务器？

无论哪种方式，按照 glassfish 文档所说的方式进行操作似乎都行不通，或者我完全错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-05T09:14:27.140

也许这是您的问题：[错误 243034 - 项目中的文件 glassfish-resources.xml 未在 Glassfish 上执行以安装 jdbc 池](https://netbeans.org/bugzilla/show_bug.cgi?id=243034)

大概相关：

[如何在部署时在 Glassfish 中自动设置 JTA 数据源/资源？](https://stackoverflow.com/questions/25872948/how-to-automatically-set-up-jta-data-source-resources-in-glassfish-on-deploy/29455676#29455676)

[如何部署 webapp 并创建其资源](https://stackoverflow.com/questions/19530730/how-to-deploy-a-webapp-and-create-its-resources)（使用建议的解决方案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T14:45:13.667

我有同样的问题。我通过在资源名称中指定 JNDI 应用程序命名空间来解决它。尝试将 JNDI 资源名称更改`glassfish-resources.xml`为如下所示： `jndi-name="java:app/malivechat-db-ds"`

并使用相同的语法查找您的资源。例如在`persistence.xml`：

`<jta-data-source>java:app/malivechat-db-ds</jta-data-source>`

# routing - OSPF 数据库交换期间的 M/S 确定

> ID：15459820
> 
> 赞同：-1
> 
> 时间：2013-03-17T10:37:30.713
> 
> 标签：routing, ospf

根据 OSPF RFC 2328，在邻居状态机的状态 ExStart 期间确定主/从使用路由器 ID 来确定谁成为数据库交换进程的主服务器和谁成为从服务器。我无法理解（并且无法在 RFC 中看到它的解释）是为什么在 2 个路由器之间的 Hello 交换期间已经知道路由器 ID 的事实，为什么需要这种 M/S 确定。因此，基于 Hello 交换，2 个路由器应该先验地知道谁将成为主设备，并相应地直接进行 DB 交换，而不是在 ExStart 状态期间需要明确的 M/S 确定。任何人都可以帮助解决这个疑问吗？

TIA, RevK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T13:42:57.203

为了保证交换或同步的可靠，ospf采用了类似TCP的策略，但更简单。实际上，协商Master/Slave的主要目的是确定使用哪个序列号。只有 Master 可以增加序列号，而 Slave 使用相同的序列号来确认 Master。如果 Master 没有收到确认，它会重新发送数据包。如果 Slave 收到来自 master 的重复数据包，它会重新发送最后一个数据包以确认 Master。

此外，协商还包括接口MTU。

# google-chrome-extension - 当我的 Chrome 扩展程序正在更新/卸载时，有什么方法可以得到通知？

> ID：15459822
> 
> 赞同：1
> 
> 时间：2013-03-17T10:38:04.250
> 
> 标签：google-chrome-extension

当扩展程序正在更新/卸载时，是否有某种方法可以得到通知，例如事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:40:25.453

安装或更新扩展程序时，您可以收听一个[`chrome.runtime.onInstalled`](https://developer.chrome.com/dev/extensions/runtime.html#event-onInstalled "Chrome 文档")事件。

目前无法知道您的扩展程序是否会被卸载，可能永远不会是一个，正如[@sowbug](https://stackoverflow.com/users/344467/sowbug) [提到](https://stackoverflow.com/questions/15459822/is-there-any-way-to-get-notified-when-my-chrome-extension-is-beeing-updated-un/15459839?noredirect=1#comment21920023_15459839)的那样，不应该是一个。他们无法为所有这些情况（`onSubmergedInWater`, `onCrushed`）创建事件，因此最好鼓励开发人员始终将应用程序或扩展程序保持在可终止状态（请参阅[此视频](http://www.youtube.com/watch?v=lm-Vnx58UYo)以了解我在说什么）。

[从他们的常见问题页面](http://developer.chrome.com/extensions/faq.html#faq-lifecycle-events)引用：

> **可以在安装/卸载扩展程序时通知它们吗？**
> 
> 您可以收听 runtime.onInstalled 事件，以便在安装或更新扩展程序或 Chrome 本身更新时收到通知。当您的扩展程序被卸载时，没有相应的事件。

# java - 如何使用数据库中的数据更新（刷新）JTable

> ID：15459823
> 
> 赞同：4
> 
> 时间：2013-03-17T10:38:07.640
> 
> 标签：java, swing, ms-access, jtable

在从数据库（MS Access）中添加或删除记录后，我试图更新 a `JTable`，但它似乎不起作用。另外，我不明白为什么我的列名不显示。这是我的代码：

```
package Administrator13_03_13;

public class Arsti2 {
JFrame main = new JFrame("Ārst");
JPanel tP = new JPanel();
JPanel bP = new JPanel();
JButton one = new JButton("Test");
JTable table = new JTable();
DefaultTableModel model;
Vector columnNames = new Vector();
Vector data = new Vector();

Arsti2() {
    main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    main.setSize(840,300);
    try {

        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String Base = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)}; DBQ=SL.mdb";
        Connection con = DriverManager.getConnection(Base,"","");
        Statement st = con.createStatement();
        ResultSet res = st.executeQuery("SELECT * FROM Arsti");
        ResultSetMetaData rsmd = res.getMetaData();
        int column = rsmd.getColumnCount();         
        columnNames.addElement("ID");
        columnNames.addElement("Vards");
        columnNames.addElement("Uzvards");
        columnNames.addElement("Dzimums");
        columnNames.addElement("Personas kods");
        columnNames.addElement("Telefona numurs");
        columnNames.addElement("Nodalas ID");
        columnNames.addElement("Amata ID");
        while(res.next()) {
            Vector row = new Vector(column);
            for(int i=1; i<=column; i++) {
                row.addElement(res.getObject(i));
            }
            data.addElement(row);
        }
        model = new DefaultTableModel(data,columnNames);
        table.setModel(model);
        //model.fireTableDataChanged();
        tP.add(table);
        bP.add(one);
        main.add(tP,BorderLayout.NORTH);
        main.add(bP,BorderLayout.SOUTH);
    } catch(Exception e) {
        e.printStackTrace();
    }
    main.setVisible(true);
    one.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent evnt1) {
            model.fireTableDataChanged();
        }
    });
}

public static void main(String[] args) {
    new Arsti2();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:33:37.010

> 我也不明白为什么我的列名不显示

除非您向其中添加容器（如 JScrollPane），否则不会显示列名。

`add(new JScrollPane(table));`

应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:43:43.267

只是 `model.fireTableDataChanged();`不会工作，你必须从数据库重新加载你的模型这应该工作：

```
public class Arsti2 {
JFrame main = new JFrame("Ārst");
JPanel tP = new JPanel();
JPanel bP = new JPanel();
JButton one = new JButton("Test");
JTable table = new JTable();
DefaultTableModel model;
Vector columnNames = new Vector();
Vector data = new Vector();

Arsti2() {
    main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    main.setSize(840,300);
    try {

        reloadData();
        model = new DefaultTableModel(data,columnNames);
        table.setModel(model);
        //model.fireTableDataChanged();
        tP.add(table);
        bP.add(one);
        main.add(tP,BorderLayout.NORTH);
        main.add(bP,BorderLayout.SOUTH);
    } catch(Exception e) {
        e.printStackTrace();
    }
    main.setVisible(true);
    one.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent evnt1) {
            try {
                reloadData();
                 model.fireTableDataChanged();
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    });
}

private void reloadData() throws ClassNotFoundException, SQLException {
    columnNames.clear();
 data.clear();
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String Base = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)}; DBQ=SL.mdb";
    Connection con = DriverManager.getConnection(Base,"","");
    Statement st = con.createStatement();
    ResultSet res = st.executeQuery("SELECT * FROM Arsti");
    ResultSetMetaData rsmd = res.getMetaData();
    int column = rsmd.getColumnCount();         
    columnNames.addElement("ID");
    columnNames.addElement("Vards");
    columnNames.addElement("Uzvards");
    columnNames.addElement("Dzimums");
    columnNames.addElement("Personas kods");
    columnNames.addElement("Telefona numurs");
    columnNames.addElement("Nodalas ID");
    columnNames.addElement("Amata ID");
    while(res.next()) {
        Vector row = new Vector(column);
        for(int i=1; i<=column; i++) {
            row.addElement(res.getObject(i));
        }
        data.addElement(row);
    }
}

public static void main(String[] args) {
    new Arsti2();
}
} 
```

# c# - 如何有效地将文本文件中的值拆分到我的程序中？

> ID：15459827
> 
> 赞同：1
> 
> 时间：2013-03-17T10:38:43.647
> 
> 标签：c#, arrays, string, char

我有一个文本文件，我必须用每个空格（''）和换行符（'\n'）分割值。它不能很好地工作，因为每个换行符都有一个回车连接到它（\r\n）。

```
char[] param = new char[] {' ','\n','\r'}; // The issue
string[] input = fill.Split(param); 
```

param 数组不接受 '\r\n' 参数作为 n 拆分参数，这就是我分别使用 '\n' 和 '\r' 的原因，但它不能按照需要的方式工作。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:42:42.257

使用[采用字符串数组的 String.Split()](http://msdn.microsoft.com/en-gb/library/tabh47cf.aspx)的重载，而不是采用字符数组的重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:43:32.050

有[一个接受字符串的重载](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)：

```
string[] input = fill.Split(
    new string[] { " ", Environment.NewLine },
    StringSplitOptions.None); 
```

您也可以使用[`Environment.NewLine`](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)代替`"\r\n"`.

但是如果你想支持所有类型的换行符，你最好指定所有流行的可能性：

```
string[] input = fill.Split(
    new string[] { " ", "\n", "\r\n" },
    StringSplitOptions.None); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T10:46:06.310

```
string[] result = text.Split(new string[] { " ", Environment.NewLine },
                            StringSplitOptions.None); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T10:49:55.543

```
string fill = @"one two three four";
string[] result = fill.Split(new string[] { " ", Environment.NewLine },
                            StringSplitOptions.None);

foreach (var s in result)
{
    Console.WriteLine(s);
} 
```

这是一个[`DEMO`](http://ideone.com/UG6wQX).

但请记住，[`Environment.NewLine`](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)是

> 包含“\r\n”的字符串用于非 Unix 平台，或包含“\n”的字符串用于 Unix 平台。

# windows - 在类库中使用 sqlite 的 Windows 认证工具包失败

> ID：15459829
> 
> 赞同：5
> 
> 时间：2013-03-17T10:38:49.137
> 
> 标签：windows, sqlite

在我的 Windows 应用商店应用程序中，我使用了一个使用 SQlite for Windows Runtime 3.7.15.2 的类库。我在这里使用了 Tim Heuers 的 [说明](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)。我的应用程序运行没有问题，应用程序包的创建没有问题，但在 Windows 认证过程中，无论我尝试什么，我都会遇到相同的错误。
错误是：

```
- 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_bind_blob。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_bind_double。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_bind_int。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_bind_int64。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_bind_null。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_bind_parameter_index。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_bind_text16。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_busy_timeout。
.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_changes。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_close。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_blob。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_bytes。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_count。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_double。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_int。.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_int64。.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_name。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_name16。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_text。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_text16。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_column_type。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_config。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_errmsg16。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_finalize。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_last_insert_rowid。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_open。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_open16。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_open_v2。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_prepare_v2。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_reset。LibraryName.dll 调用此 API。
 - 此应用程序类型不支持 sqlite3.dll 中的 API sqlite3_step。LibraryName.dll 调用此 API。

```

我想我什么都试过了。我看到了这个 [API Failure Sqlite](https://stackoverflow.com/questions/12361723/api-failure-sqlite) 问题，它看起来一样，但它并没有帮助我用尽想法......

# jquery - 带有标签的jquery移动和动态链接

> ID：15459830
> 
> 赞同：0
> 
> 时间：2013-03-17T10:39:00.063
> 
> 标签：jquery, html, jquery-mobile

我有需要动态值的导航。但是，它没有将带有标签的值与动态导航一起传递。

```
<a class="img-icon-category" href="faqs.php?q=value&#faqs-overview" data-transition="slide"> &nbsp; </a> 
```

我想知道这段代码是否正确。我尝试关注 jquery mobile doc，但我仍然对如何以最佳方式配置它感到困惑，以避免在切换页面时在 iphone 中显示标题导航。

注意：我不是程序员或移动开发人员，我有兴趣为我的项目学习这个东西。感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:19:26.890

根据您想要实现的目标，您可能需要对某些字符进行 HTML 或 URL 编码。

这`value&#faqs-overview`作为参数发送到`q`变量：

```
<a class="img-icon-category" href="faqs.php?q=value%26%23faqs-overview" data-transition="slide"> &nbsp; </a> 
```

请注意，如果您要发送多个参数，则需要将`&`参数分隔符 HTML 编码为`&amp;`或使用`;`分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:47:20.697

删除属性中**#**之前的 &，仅**当**您要在[查询字符串中传递更多值时才需要它](http://en.wikipedia.org/wiki/Query_string)**[`href`](http://www.w3schools.com/tags/att_a_href.asp)**

 **改变

```
<a class="img-icon-category" href="faqs.php?q=value&#faqs-overview" data-transition="slide"> &nbsp; </a> 
```

至

```
<a class="img-icon-category" href="faqs.php?q=value#faqs-overview" data-transition="slide"> &nbsp; </a> 
```**

# jsp - JSP 文件的各个部分在已编译的 servlet 中位于何处？

> ID：15459832
> 
> 赞同：3
> 
> 时间：2013-03-17T10:39:16.197
> 
> 标签：jsp, servlets

在翻译阶段之前，有一个 <%! .... %> 我的 JSP 页面中的代码行。我知道这只会在翻译的 servlet 中运行一次。是不是说servlet引擎把代码放在了servlet的init()方法中呢？

我想学的是：翻译后哪些代码去哪些方法？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:30:58.927

这是一个例子：

这个 JSP 代码：

```
<%@ page import="java.util.*" %> <!-- 1 -->
<%! private Date date; %>        <!-- 2 -->
<% date = new Date(); %>         <!-- 3 -->
Current date: <%= date %>        <!-- 4 --> 
```

将被翻译成：

```
import java.util.*; // 1

public class ServletAbc extends GenericServlet {

    private Date date; // 2

    public void service(ServletRequest request,ServletResponse response)
                throws IOException,ServletException{

        PrintWriter out=response.getWriter();

        date = new Date(); // 3

        out.println("Current date: "); // 4
        out.println(date);
    }
} 
```

请注意，翻译的小部分取决于容器。例如，这些`out.println()`陈述也可能被翻译成`out.println("Current date: " + date);`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:55:46.863

在代码编译时，包含在`<%! .... %>`这个标签内的代码被认为是 servlet 的类成员。

和

包含在`<% .... %>`此标记内的代码进入`service() method`servlet。

如果要查看`generated java file`，请转到`tomcat/work/.....`目录。

文件将被创建，名称`JspFileName_jsp.java`为`JspFileName_jsp.class`

为了更好地理解，请访问[此链接](http://cs.au.dk/~amoeller/WWW/jsp/translation.html)

# jquery - jquery移动对话导航不起作用

> ID：15459833
> 
> 赞同：0
> 
> 时间：2013-03-17T10:39:39.663
> 
> 标签：jquery, jquery-mobile

这让我整个上午都感到困惑。

我的 Jquery 移动页面中有一个对话框。一切正常，但只有在我 F5 页面之后。

我现在有以下页面

```
<div data-role="page" id="pictures">

        <div data-role="header">
            <a href="#" id="logoutbutton"  data-role="button" data-icon="home">Log Uit</a>
            <h1>Foto's</h1>
        </div><!-- /header -->

        <div data-role="content">
            <div class="grid_outer" id="grid_outer_pictures" style="width: 275px;margin-left: auto; margin-right: auto;">
                <div  class="grid_inner" id="grid_inner_pictures">
                    <h2 class="h2_header">Mijn Foto's</h2>

                    <?php

                    if ($nrofuserpictures < 3) {
                        echo "
                    <input value='Voeg Toe' data-icon='add' data-theme='b' type='button' id='addpicturebutton'>
                    ";
                    }
                    ?>

                    <?php
                    include 'php/show_m_userpictures.php';
                    ?>
                </div>
            </div>
        </div><!-- /content -->

        <?php
        include 'homefooter.php';
        ?>

        <!-- /footer -->
    </div><!-- /page -->

    <div data-role="dialog" id="confirmbox">
        <div data-role="header" data-icon="false">
            <h1>Bevestig</h1>
        </div><!-- /header -->

        <div data-role="content">
            <h3 id="confirmMsg">Confirmation Message</h3>

            <br>

            <center>
                <a href="#" class="btnConfirmYes" data-role="button" data-icon="check" data-mini="true" data-inline="true">&nbsp;&nbsp;&nbsp;Ja&nbsp;&nbsp;&nbsp; </a>
                &nbsp;&nbsp;&nbsp;
                <a href="#" class="btnConfirmNo" data-role="button" data-rel="back" data-icon="delete" data-mini="true" data-inline="true">Nee</a>
            </center>
        </div>
    </div> 
```

show_m_userpictures.php 脚本生成一个带有图片的 div 和一个删除按钮，如下所示：

```
<div class='picture'><img id='userpicture' width='170' height='139.4' src='../users/annet/pictures/example.png' pictureid='30' class='unapproved' /></div><div style='min-width: 150px; max-width: 150px;'><input value='Verwijder' data-icon='delete' data-theme='b' type='button' id='deletepicturebutton' pictureid='30'></div> 
```

我在一个单独的 js 文件中有以下 javascript 代码。

```
$(document).on('pageshow', '#pictures', function() {
alert('pageshow pictures ');

$("[id=deletepicturebutton]").on('click', function(e) {

    e.preventDefault();
    var pictureid = $(this).attr('pictureid');

    alert('deletepicturebutton clicked pictureid ' + pictureid);

    showConfirm("Weet je zeker dat je deze foto wilt verwijderen ?", function() {

        $.ajax({
            async : false,
            url : "../php/process_delete_picture.php?pictureid=" + pictureid,
            success : function(data) {
                if (data != "") {
                    // in case of error
                    alert(data);
                } else {
                    alert("Foto verwijderd !");
                    window.location.href = "pictures.php";

                }
            }
        });
    });

}); 
```

});

和 showConfirm 功能。

```
// confirm dialog
function showConfirm(msg, callback) {
$("#confirmMsg").text(msg);
$("#confirmbox .btnConfirmYes").on("click.confirmbox", function() {
    $("#confirmbox").dialog("close");
    callback();
});

$("#confirmbox .btnConfirmNo").off("click.confirmbox", function(r) {
});

//$.mobile.changePage("#confirmbox");
$.mobile.changePage('#confirmbox', 'pop', false, true); 
```

}

我不明白为什么我第一次进入页面并单击其中一个删除按钮时没有显示对话框？我正在做一个 pageshow 事件，用 pagebeforeshow 尝试过，我什至将 javascript 添加到页面底部。

谢谢你的帮助！

**更新**

我试图导航到这样的外部页面

```
$.mobile.changePage('confirmbox.php', 'pop', false, true); 
```

那行得通！但这不是我想要的，因为那样我就不能正确使用回调。所以不知何故，第一次加载的页面不知道对话框（？？？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:17:44.390

很难找出在这种情况下到底发生了什么。如果您可以发布一个重现该案例的工作示例，那将有很大帮助。

我已经修改了您的代码的某些部分。请注意，在您的实现中，多次调用 showConfirm 方法似乎不止一次地将 click 事件附加到对话框的按钮上。结果是多次调用回调。

```
<!doctype html>
<html lang="en">

    <head>
        <title>StackOveflow Case</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script>
            $(document).on('click', '#pictures #deletepicturebutton', function (e) {
                e.preventDefault();
                var pictureid = $(this).attr('pictureid');
                alert('deletepicturebutton clicked pictureid ' + pictureid);
                showConfirm("Weet je zeker dat je deze foto wilt verwijderen ?", function () {
                    /*
                    $.ajax({
                        async: false,
                        url: "../php/process_delete_picture.php?pictureid=" + pictureid,
                        success: function (data) {
                            if (data != "") {
                                // in case of error
                                alert(data);
                            } else {
                                alert("Foto verwijderd !");
                                window.location.href = "pictures.php";

                            }
                        }
                    });
                    */
                    alert('in callback');
                });
            });

            function showConfirm(msg, callback) {
                $("#confirmMsg").text(msg);

                $("#confirmbox .btnConfirmYes").unbind("click").click(function (e) {
                    e.preventDefault();
                    $("#confirmbox").dialog("close");
                    callback();
                });

                $.mobile.changePage('#confirmbox', {
                    transition: "pop",
                    reverse: false,
                    changeHash: true
                });
            }
        </script>
    </head>

    <body>
        <div data-role="page" id="pictures">
            <div data-role="header">
                <a href="#" id="logoutbutton" data-role="button" data-icon="home">Log Uit</a>
                 <h1>Foto's</h1>

            </div>
            <!-- /header -->
            <div data-role="content">
                <div class="grid_outer" id="grid_outer_pictures" style="width: 275px;margin-left: auto; margin-right: auto;">
                    <div class="grid_inner" id="grid_inner_pictures">
                         <h2 class="h2_header">Mijn Foto's</h2>

                        <div class='picture'>
                            <img id='userpicture' width='170' height='139.4' src='../users/annet/pictures/example.png' pictureid='30' class='unapproved' />
                        </div>
                        <div style='min-width: 150px; max-width: 150px;'>
                            <input value='Verwijder' data-icon='delete' data-theme='b' type='button' id='deletepicturebutton' pictureid='30'>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /page -->
        <div data-role="dialog" id="confirmbox">
            <div data-role="header" data-icon="false">
                 <h1>Bevestig</h1>

            </div>
            <!-- /header -->
            <div data-role="content">
                 <h3 id="confirmMsg">Confirmation Message</h3>

                <br>
                <center>
                    <a href="#" class="btnConfirmYes" data-role="button" data-icon="check" data-mini="true" data-inline="true">&nbsp;&nbsp;&nbsp;Ja&nbsp;&nbsp;&nbsp;</a>&nbsp;&nbsp;&nbsp;
                    <a href="#" class="btnConfirmNo" data-role="button" data-rel="back" data-icon="delete" data-mini="true" data-inline="true">Nee</a>
                </center>
            </div>
        </div>
    </body>

</html> 
```

我希望这有帮助。

# android - LruCache 不工作

> ID：15459834
> 
> 赞同：7
> 
> 时间：2013-03-17T10:39:39.707
> 
> 标签：android, android-lru-cache

```
 final int maxMemory = (int) (Runtime.getRuntime().maxMemory() / 1024);
    final int cacheSize = maxMemory / 8;
    mMemoryCache = new LruCache<String, Bitmap>(cacheSize) {
            @Override
            protected int sizeOf(String key, Bitmap bitmap) {
                // The cache size will be measured in kilobytes rather than
                // number of items.
                return bitmap.getByteCount() / 1024;
            }
        };
    URL url = new URL("http://s2.goodfon.ru/image/260463-1920x1200.jpg");
    Bitmap bitmap = BitmapFactory.decodeStream((InputStream) url.getContent(), null, options);
    if(bitmap != null)
        Log.i("Success", "BITMAP IS NOT NULL");

    String key = "myKey";
    Log.i("Get is null", "putting myKey");
    mMemoryCache.put(key, bitmap);

    Bitmap newBitmap = mMemoryCache.get(key);
    if(newBitmap == null)
        Log.i("newBitmap", "is null"); 
```

你好，这里是代码。我成功地从 URL 获取位图（日志说位图不为空，我可以轻松地显示它）。然后我试图将它放入 LruCache 并取回它，但它返回 null。（日志说 newBitmap 为空）。我的错误在哪里？请告诉我。Android 4.1.2 缓存大小 8192 Kb。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T03:21:59.057

如果它在磁盘上为 1.19 MB，但在内存中约为 9 MB，这意味着作为压缩的 JPEG 文件，它为 1.19 MB，一旦将其提取到可以显示的位图（未压缩）中，它将占用 9 MB 内存. 如果它是代码片段中的 url 建议的 1920 x 1200 像素图像，则该图像将占用 1920 x 1200 x 4 字节的内存（每个像素 4 字节表示从 0 到 256 乘以 230 万总像素的 ARGB 值= 9,216,000 字节）。如果您为此缓存使用 1/8 的可用内存，则 9MB 可能/很可能超过该总内存空间，因此位图永远不会进入缓存或立即被驱逐。

如果图像那么大，您可能希望在解码时对图像进行下采样（`BitmapFactory.Options.inSampleSize`如果您还不熟悉，请使用网络上的大量文档来使用它）。

此外，您正在使用 Runtime.maxMemory 来计算缓存大小。这意味着您正在请求允许整个 VM 使用的最大内存量。

[http://developer.android.com/reference/java/lang/Runtime.html#maxMemory%28%29](http://developer.android.com/reference/java/lang/Runtime.html#maxMemory%28%29)

更常见的方法是使用 ActivityManager.getMemoryClass() 方法返回给您的值。

这是一个示例代码片段和文档中的方法定义以供参考。

```
 ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    int memClassBytes = am.getMemoryClass() * 1024 * 1024;
    int cacheSize = memClassBytes / 8;
    mMemoryCache = new LruCache<String, Bitmap>(cacheSize) 
```

[http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T15:14:08.220

您还可以回收从 lrucache 中弹出的位图

```
final Bitmap bmp = mLruCache.put(key, data);
if (bmp != null)
    bmp.recycle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T08:58:51.850

在以下行中将 Runtime maxMemory 除以 1024 时，Android 示例是错误的：

```
final int maxMemory = (int) (Runtime.getRuntime().maxMemory() / 1024); 
```

maxMemory 的单位是 Byte，与 'cacheSize' 相同（'/8' 只是表示它将使用当前 Activity 可用内存的八分之一）。因此，'/1024' 将使 'cacheSize' 非常小，以至于在 'mMemoryCache' 中实际上不能“缓存”任何位图。

解决方法是删除上面代码中的'/1024'。

# makefile - 如何获取当前文件夹的基本名称作为makefile中的变量？

> ID：15459837
> 
> 赞同：19
> 
> 时间：2013-03-17T10:39:57.153
> 
> 标签：makefile, directory

我想将文件复制到使用`scp`. 但我想在我的 makefile 中使用我当前的文件夹名称作为变量。

我知道我得到了我当前的路径，`$(CURDIR)`但我的本地路径在我的远程服务器上不一样。

例如，我的路径是`/Users/obstschale/Documents/Lab2/`，我想将 Lab2.tar 复制到`user@server.au:/home/path/Lab2/`.

```
copy2server:
    echo $(CURDIR)
    scp Lab2.tar user@server.au:/home/path/{folder} 
```

我可能不得不`$(CURDIR)`输入一些东西并找到我的最后一个文件夹。

更新：`$(CURDIR)`是正确的变量。`$(CURID)`是错误的，至少它对我不起作用。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-17T10:53:11.520

正如 Sylvain 所描述的那样，我对 makefile（GNU Make 3.81）中的反引号语法并不满意。如果它也不适合您，请使用

```
$(shell basename $(CURDIR)) 
```

代替

```
`basename $(CURDIR)` 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-10T14:34:05.873

我试过这个规则：

```
test:
    @echo $(CURDIR)           # e.g. /tmp/foobar/blafoor/baz
    @echo $(notdir $(CURDIR))  # gives "baz" here. 
```

这对我来说很好。

也许这不是为了工作，因为`notdir`应该

> 提取每个文件名的非目录部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-02T22:28:58.853

如果您要删除路径中的最后一个文件夹名称，则有许多内置的 makefile 函数。有关文件操作的快速概述，请参见[http://www.chemie.fu-berlin.de/chemnet/use/info/make/make_8.html#SEC74](http://www.chemie.fu-berlin.de/chemnet/use/info/make/make_8.html#SEC74)。

```
copytoserver:
    scp Lab2.tar user@server.au:/home/path/$(notdir $(CURDIR)) 
```

这其中的关键项目当然是`$(notdir $(CURDIR))`。正如您所发现的，其中`$(CURDIR)`包含运行 makefile 的目录的路径，没有最后的“/”。该`notdir`函数会删除文件名中最后一个“/”之前的所有内容。这最终会剥离除最终目录之外的所有内容。

如果`$(CURDIR)`仍然有尾随的'/'，你可以把它去掉，这样`notdir`函数就会做你想做的事情：

```
$(notdir $(patsubst %/,%,$(CURDIR))) 
```

请注意，在这种情况下，间距非常重要，在任何逗号之前或之后放置一个空格都会在它进行贪婪模式替换时插入一个空格。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-17T10:45:46.280

您可以使用`basename`shell 命令提取`$(CURDIR)`.

```
copyserver:
   folder=`basename "$(CURDIR)"`; scp Lab2.tar user@server.au:/home/path/${folder} 
```

# symfony - symfony2 实体 oneToMany 和方法

> ID：15459842
> 
> 赞同：0
> 
> 时间：2013-03-17T10:40:32.490
> 
> 标签：symfony, entity, many-to-one, relationships

嗨，我已经完全成功地设置了我的实体 onetoMany 和 ManyToOne 我生成了 setter 和 getter，并在用户实体中创建了这个方法：

用户实体：

```
 /**
 * @ORM\OneToMany(targetEntity="TB\RequestsBundle\Entity\Requests", mappedBy="followeeuser")
 */
protected $followees; 
```

请求实体：

```
/**
 * @ORM\ManyToOne(targetEntity="TB\UserBundle\Entity\User", inversedBy="followees")
 * @ORM\JoinColumn(name="followee_id", referencedColumnName="id", nullable=false)
 */ 
protected $followeeuser; 
```

当我使用自己的自定义查询时效果很好......但我无法弄清楚如何使用 symfony 生成的这个函数：

```
 public function addFollowee(\TB\UserBundle\Entity\User $followee)
{
    $this->followees[] = $followee;
} 
```

我不知道要传递什么...我首先尝试根据用户的 id 从树枝获取用户对象...效果很好，但发生了错误：

```
$user->addFollowee($userRepository->find($target_user_id));

Found entity of type TB\UserBundle\Entity\User on association TB\UserBundle\Entity\User#followees, but expecting TB\RequestsBundle\Entity\Requests 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:14:52.283

也许你应该在编码之前考虑一下你想要做什么。拿起一支笔和一张纸。:)

如果我错了，请告诉我，但这是我认为您正在尝试做的事情：

一个用户可以有多个“关注者”。一个“关注者”可以有一个用户。

因此，OneToMany 关系是可以的。

以下是如何编写它，来自文档：

Requests.php（顺便说一句，你应该使用 Request.php）

```
/**
 * @ORM\ManyToOne(targetEntity="User", inversedBy="requests")
 **/
private $user; 
```

用户.php

```
/**
 * @ORM\OneToMany(targetEntity="Requests", mappedBy="user", cascade={"all"})
 **/
private $requests;

public function __construct()
{
    $this->requests = new \ArrayCollection();
} 
```

现在您可以检查您的关系是否正常，并更新您的架构：

```
php app/console doctrine:schema:validate
php app/console doctrine:schema:update --force 
```

关于 getter/setter ：

请求.php

```
public function getUser()
{
    return $this->user;
}

public function setUser(User $user) // Please add a Use statement on top of your document
{
    $this->user = $user;
    return $this;
} 
```

用户.php

```
public function addRequest(Requests $request)
{
    $this->requests->add($request);
    return $this;
}

public function removeRequest(Requests $request)
{
    $this->requests->removeElement($request);
    return $this;
}

// Get requests and set requests (you know how to write those ones) 
```

现在，要将用户设置为请求，请使用

```
$request->setUser($user); 
```

并向用户添加请求，请使用

```
$user->addRequest($request); 
```

# java - 四边形上的 Opengl 纹理

> ID：15459843
> 
> 赞同：0
> 
> 时间：2013-03-17T10:40:39.313
> 
> 标签：java, opengl, lwjgl

这是我的 Texture 类的内容：

```
public int id;

public Texture(InputStream inputStream) {
    ByteBuffer buf = null;
    int tWidth = 0;
    int tHeight = 0;

    try {
        PNGDecoder decoder = new PNGDecoder(inputStream);
        buf = ByteBuffer.allocateDirect(4*decoder.getWidth()*decoder.getHeight());
        decoder.decode(buf, decoder.getWidth()*4, PNGDecoder.TextureFormat.RGBA);
        buf.rewind();
        inputStream.close();
    } catch (IOException exception) {
        ErrorHandler.handleError("Failed to load image", exception);
    }

    id = glGenTextures();
    glActiveTexture(id);
    glBindTexture(GL_TEXTURE_2D, id);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, tWidth, tHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, buf);

    glBindTexture(GL_TEXTURE_2D, 0);
} 
```

这就是我渲染的方式：

```
 glActiveTexture(background.id);
    glBindTexture(GL_TEXTURE_2D, background.id);

    glBindBuffer(GL_ARRAY_BUFFER, vboVertexHandle);
    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);

    glVertexAttribPointer(0, 3, GL_FLOAT, false, 0, 0);
    glVertexAttribPointer(1, 2, GL_FLOAT, false, 0, 4*18);

    glDrawArrays(GL_TRIANGLES, 0, 6);

    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);

    glBindTexture(GL_TEXTURE_2D, 0); 
```

这是片段着色器：

```
#version 330

in vec2 textureCoordinate;

out vec4 outputColor;

uniform sampler2D texture_diffuse;

void main() {
    outputColor.rgb = vec3(1.0f, 1.0f, 1.0f);
    outputColor += texture2D(texture_diffuse, textureCoordinate);
} 
```

**我做错了什么？**传递给着色器程序的纹理坐标是 100% 正确的（我检查过）。但我仍然得到一个白色的四边形。

注意：我使用[这个](http://fastpng.sourceforge.net/)png 解码器。

**编辑：** 我将每 4 个字节的浮点数打印到控制台，我得到 0.00.00.00.0.... 这是否意味着纹理加载不正确，或者信息以不同的格式存储到缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:46:26.610

您的片段着色器看起来不对 - 您设置了白色并添加了纹理中的值，因此它将钳制为白色。做更多这样的事情

```
void main() {
    outputColor.a = 1.0f;
    outputColor.rgb = texture2D(texture_diffuse, textureCoordinate);
} 
```

# c# - 如何在 EF 中联合来自其父实体的子集合？

> ID：15459844
> 
> 赞同：0
> 
> 时间：2013-03-17T10:40:44.183
> 
> 标签：c#, linq, entity-framework-4

我有多个“父”实体，每个实体都有一个子导航集合。

对于给定的父母子集，是否有一种简洁有效的方法来创建所有孩子的 IEnumerable？（即没有重复）。

我可以通过父母和联合孩子进行沟通，但这似乎很无能为力。

```
from p from parents
select p.Children 
```

返回重复项。

```
class Parent
{
    public List<Child> Children { get; set; }
}

class Child
{
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:01:26.800

或者使用方法语法：

```
var children = parents.SelectMany(p => p.Children)
                      .Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:44:43.787

```
var query = (from p in parents
             from c in p.Children
             select c)
            .Distinct(); 
```

# asp.net - 404.17 错误 - 请求的内容似乎是脚本

> ID：15459845
> 
> 赞同：2
> 
> 时间：2013-03-17T10:41:09.903
> 
> 标签：asp.net, http, authentication, iis, iis-7.5

我有一个与此类似的[问题](https://stackoverflow.com/questions/87107/how-do-i-fix-404-17-error-on-win-server-2k8-and-iis7)；

*   IIS 7.5
*   服务器 2008
*   ASP.Net 4.0 网站

我在尝试运行该站点时遇到的错误是：

> HTTP 错误 404.17 - 未找到
> 请求的内容似乎是脚本，不会由静态文件处理程序提供服务。
> 
> ...
> 
> 最可能的原因：
> 
> *   该请求与通配符 mime 映射匹配。该请求被映射到静态文件处理程序。如果有不同的前置条件，请求将映射到不同的处理程序。

现在奇怪的部分来了：

## 奇怪的部分

奇怪的是，在开发服务器上——*在各个方面都与生产服务器相似*——一切都运行得很顺利。

**这是我不能**尝试的事情的列表，因为我不想弄乱服务器（它托管许多其他站点）：

*   重新安装.Net
*   重新安装 IIS
*   重新安装*任何东西*
*   运行 aspnet_regiis

这是我尝试过*的：*

*   重新发布网站
*   重新启动应用程序池
*   将应用程序池更改为 .Net 2.0 并返回到 .Net 4.0
*   在集成和经典管道模式之间切换
*   启用 32 位模式
*   看一下处理程序映射

最终我创建了一个新的应用程序池，它*开始*工作了。
**问）“有点”？**
A）是的，有点。

现在该站点仅在（新）应用程序池设置为`.Net 4.0`, 并且站点的身份验证`Integrated`设置为时才有效。
`ASP.NET Impersonation``Disabled`

*对这些设置的任何*更改都会使服务器再次大喊“404.17”。

**问）那有什么问题？**
A) 有什么问题是我需要 ASP.NET 模拟才能使站点正常运行。

与往常一样，最需要您的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T02:28:34.340

HTTP 错误 404.17 - 未找到

请求的内容似乎是脚本，不会由静态文件处理程序提供。

当您将正确的 IIS 版本安装到相应的 .net 框架时，通常会发生此错误。如果它是版本（未安装）问题，那么您将收到不同的错误消息。无论如何，我认为您现在已经解决了您的问题，但我想与其他遇到此问题的人分享一些话。上周这些错误消息让我非常头疼，我已经尝试了所有方法。

最好的补救办法总是在最新的 Visual Studio 中重新安装最新的 .net。要做的重要事情是卸载现有的 IIS（express 或任何你拥有的）并首先重新安装它。然后下载最新的视觉工作室。通过这种方式，Visual Studio 安装可以轻松访问您的 IIS 并添加必要的应用程序池。

至于错误 404.17，可能只是因为没有为适当的 dot net 版本分配正确的应用程序池。如果没有正确的版本，则重新安装 Visual Studio 是我知道的唯一方法。另外，我认为您也可以尝试下载另一个版本的 Visual Studio。例如，如果您有专业人士，请下载终极版，反之亦然。希望这可以帮助有类似问题的人。

# matlab - 在matlab数组中找到不重叠的零序列

> ID：15459846
> 
> 赞同：2
> 
> 时间：2013-03-17T10:41:13.413
> 
> 标签：matlab, vectorization

这与： [在序列中查找零岛有关](https://stackoverflow.com/questions/3274043/finding-islands-of-zeros-in-a-sequence)。

但是，问题并不完全相同：

让我们取与上述帖子相同的向量进行比较：

```
sig = [1 1 0 0 0 0 1 1 1 1 1 0 1 0 0 0 1 1 1 1 1 1 1 1 0 0 1 1 1 0]; 
```

我试图找到的是*n*个连续零岛的起始索引；但是，不允许重叠。例如对于 n=2，我想要结果：v=[3, 5, 14, 25];

我发现[Amro](https://stackoverflow.com/a/3276934)的解决方案非常出色作为起点（尤其是关于 strfind），但他回答的第二部分并没有给我预期的结果。这是我到目前为止的非矢量化解决方案：

```
function v=findIslands(sig, n)
        % Finds indices of unique islands

        % sig       --> target vector
        % n         --> This is the length of the island

        % This will find the starting indices for all "islands" of ones
        % but it marks long strings multiple times
        startIndex = strfind(sig, zeros(1,n));

        L=length(startIndex);

        % ongoing gap counter
        spc=0;

        if L>0 % Check if empty
            v=startIndex(1);
            for i=2:L
                % Count the distance
                spc=spc+(startIndex(i)-startIndex(i-1));
                if spc>=n
                    v=[v,startIndex(i)];
                    % Reset odometer
                    spc=0;
                end
            end
        else
            v=[];
            display('No Islands Found!')
        end 
```

我想知道是否有人对上述问题有更快的矢量化解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:40:30.767

您可以将所有内容转换为字符串并使用正则表达式：

```
regexp(sprintf('%d', sig(:)), sprintf('%d', zeros(n, 1))) 
```

### 例子

```
>> sig = [1 1 0 0 0 0 1 1 1 1 1 0 1 0 0 0 1 1 1 1 1 1 1 1 0 0 1 1 1 0];
>> n = 2;
>> regexp(sprintf('%d', sig(:)), sprintf('%d', zeros(n, 1)))

ans =
     3     5    14    25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:41:56.420

使用来自同一个链接问题的 gnovice 的答案。它是矢量化的，并且运行在`duration == n`您想要的位置。

[https://stackoverflow.com/a/3274416/105904](https://stackoverflow.com/a/3274416/105904)

以 运行`duration >= n`，然后除以`duration`，`n`这将告诉您在每个位置有多少连续运行以及如何扩展索引列表。如果您的岛密度不是太高，这最终可能比正则表达式版本更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T10:47:32.767

做这个：

例如，让我们看一下您想要的运行长度为 2 的情况。

1.  将向量转换为二进制数
2.  设置索引 = size-1，设置起始 = []
3.  循环直到 n < 4：
4.  n能被4整除吗？
5.  是的？将索引附加到开始。设置 n = n / 4
6.  不？设置 n = n / 2
7.  转到 3

对于任何其他运行长度，将 4 替换为 2**运行。

# css - 使用溢出隐藏使内容不换行

> ID：15459847
> 
> 赞同：1
> 
> 时间：2013-03-17T10:41:17.473
> 
> 标签：css, overflow, nowrap

我要这个 ：

![在此处输入图像描述](../Images/26aafe6d77d4f93e109f0ecb7338de34.png)

但我明白了：

![在此处输入图像描述](../Images/fdb81bcfa00cb900494d9d2d648ac4bf.png)

使用它来设置包含 div 的样式：

```
.option {
    display:inline-block;
    width:100%;
    white-space:nowrap;
    overflow:hidden;
    margin:10%;
} 
```

其余的在这里~~什么都没有~~：http : [//jsfiddle.net/n2LtN/](http://jsfiddle.net/n2LtN/)

什么不见​​了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:47:39.310

我通过使用 display:`inline-block`而​​不是`display:inline`, without来修复它`floating`：

```
span, input[type="checkbox"] {
    display:inline-block;
    *display:inline; /*That's for IE*/
    *zoom:1; /*That's for IE*/
    width:auto;
} 
```

见工作[小提琴](http://jsfiddle.net/soyuka/n2LtN/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:47:03.397

`float:left`从中 删除`span, input[type="checkbox"]`

您应该阅读 float 的工作原理。

# git - 使用 git 制作镜像的每日快照

> ID：15459858
> 
> 赞同：1
> 
> 时间：2013-03-17T10:42:51.933
> 
> 标签：git, snapshot, mirror

我想镜像一个远程站点（类似于 CPAN，通过 rsync）并使用`git`. 是否有任何工具可以执行“从存储库中删除已删除的文件并将更改/新文件添加到索引并以当前日期作为提交消息提交”任务？

我们的想法是制作网站的存档（仅文件）并每天返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:40:57.953

制作一个shell脚本：

```
git add --all
git commit -m "changes on `date`" 
```

不确定将当前日期放入提交消息是否有意义，因为每个提交都已经有了时间戳。

# ios - iPhone 播放嵌入式视频全屏

> ID：15459859
> 
> 赞同：1
> 
> 时间：2013-03-17T10:42:58.737
> 
> 标签：ios, html, video

我创建了一个小网站，其中包含带有此代码的视频：

```
 <video autoplay="autoplay">
        <source src="inc/WEB_MASTER.mp4" type="video/mp4">
        <source src="inc/WEB_MASTER_ios.m4v" type="video/mp4">
        Your browser does not support the video tag.
    </video> 
```

当我通过我的 iPhone 加载页面时，视频开始播放，但它不会在网站的部分播放，而是 iphone 全屏播放视频。如何强制 iphone 在网站的相应区域播放视频？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-01T05:48:51.197

iPhone 和 iPod 似乎只是在 Safari 中强制全屏视频播放的唯一设备/浏览器（以及在使用其未修改的 WebView 的应用程序中）

*您可以通过浏览*视频而不是实际播放视频来模拟播放来解决此问题`.play()`。

我编写了一个模块，负责**播放内联视频**并将其同步到音频（但它也适用于没有音轨的视频）：[iphone-inline-video](https://github.com/bfred-it/iphone-inline-video)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-17T10:55:07.713

这个问题在这里得到了回答： [HTML5 inline video on iPhone vs iPad/Browser](https://stackoverflow.com/questions/3699552/html5-inline-video-on-iphone-vs-ipad-browser)

只需将 webkit-playsinline 属性添加到 video 标签。适用于 iOS 4.0 及更高版本：

```
<video id="player" width="120" height="60" webkit-playsinline> 
```

这是[webkit-playsinline](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/Attributes.html#//apple_ref/doc/uid/TP40008058-SW30)的官方文档。

# asp.net - ASP.NET 网页中的 PRG 模式或任何类似的东西

> ID：15459862
> 
> 赞同：1
> 
> 时间：2013-03-17T10:43:20.623
> 
> 标签：asp.net-webpages, asp.net, webmatrix, asp.net-webpages, post-redirect-get

**问题围绕着这个概念：**
一个基于[asp.net-webpages](/questions/tagged/asp.net-webpages "显示标记为“asp.net-webpages”的问题")的网站包括一个表单，
当提交时执行一个页面，其中包括*WebMail Helper*。
然后该页面请求这些值并将它们发送到我的电子邮件地址。

唯一的缺点是页面可以重新加载，它会重新发送值。
为了防止这种情况，我需要包含一个 PRG 模式或任何类似的东西。

任何帮助深表感谢。

一个解决方案对下一步很有用，即：添加电子邮件确认步骤。
希望我可以避免使用 MVC 模式。

# events - 如何使用 scalatest 检查某些事件是否以特定顺序发生？

> ID：15459864
> 
> 赞同：0
> 
> 时间：2013-03-17T10:43:37.073
> 
> 标签：events, scala, scalatest

我需要测试我的库是否以正确的顺序处理某些（用户定义的）事件。目前，我正在做一些非常简单的事情。我创建了一个缓冲区，并让每个事件都为其附加不同的值：

```
val buf = new collection.mutable.ArrayBuffer[Int];
val ev1 = () => { buf += 1; }
val ev2 = () => { buf += 2; }
//
// ... library runs the events ...
// 
// check that ev2 ocurred before ev1
buf should be (ArrayBuffer(2, 1)) 
```

有没有更好更清晰的方法？

**更新：**同时我创建了一个[小工具包](https://gist.github.com/ppetr/5188419)来帮助我进行测试。主类`Event`允许在针对其他事件发生计算时包装计算、函数和寄存器。*我对scalatest*只有一点了解，所以我不知道如何更好地整合它——如果你知道，请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:42:55.017

我知道这几乎是一样的，但你可以让你的代码更干净一些。如果您需要多次测试事件顺序，您可以定义如下特征：

```
trait EventOrderTester {
  val buf = ArrayBuffer.empty[Int]
  def ev(order: Int): () => Unit = () => buf += order
  lazy val expected = buf.sorted
} 
```

然后你可以像这样定义测试：

```
"my test" in new EventOrderTester {

  x.addListener1(ev(2))
  x.addListener2(ev(1))

  //
  // ... library runs the events ...
  // 
  // check that listener2 ocurred before listener1
  buf should be(expected)
} 
```

# c++ - 将'_'更改为''根本不起作用

> ID：15459872
> 
> 赞同：0
> 
> 时间：2013-03-17T10:44:55.737
> 
> 标签：c++, arrays, char

所以我得到了简单的代码来将所有 _ 更改为空格，但是......它不起作用！Any1知道为什么吗？我不知道

```
while (fout >> array[x][y]){
    if (array[x][y]=='_') array[x][y]==' ';
    y++;
    if (y==8) {
        y=0;
        x+=1;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T10:48:49.797

看看这一行：

```
if (array[x][y]=='_') array[x][y]==' ';
                                  ^ 
```

尝试设置新值时有两个等号。

# maven - 需要示例 Grails Maven 项目

> ID：15459875
> 
> 赞同：0
> 
> 时间：2013-03-17T10:45:26.670
> 
> 标签：maven, grails, jenkins, hudson

我正在做一些关于 Grails 的项目。到目前为止，我正在使用 IVY 来构建/运行。现在我计划为我的 Grails 迁移到 Maven 构建。我一直在寻找和阅读项目和材料。但我没有找到任何可以提供完整指南或示例代码的东西。

```
 Please let me know if you know or have any thing. 
```

谢谢，拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:58:44.003

尝试使用此原型生成示例项目

[https://github.com/grails/grails-maven-archetype](https://github.com/grails/grails-maven-archetype)

简单执行这个命令：

```
mvn archetype:generate -DarchetypeGroupId=org.grails \
    -DarchetypeArtifactId=grails-maven-archetype \
    -DarchetypeVersion=2.1.0.RC1 \
    -DgroupId=example -DartifactId=my-app 
```

# clojure - 如何使用 Clojure 代理制作类 java 类？

> ID：15459877
> 
> 赞同：4
> 
> 时间：2013-03-17T10:45:41.563
> 
> 标签：clojure

我想在 Clojure 中创建一个具有属性和方法的对象，我读到 gen-class 和 proxy 可以完成我需要的工作，但它的实现对我来说非常混乱。

我想使用代理来避免 AOT 编译步骤，我阅读了它，但我最好学习如何使用两者中更容易的一个

这是我想在 Clojure 中做的事情

Java代码：

```
public class MyClass {
    public float myFloat;

    MyClass( float _myFloat ) {
        myFloat = _myFloat
    }

    public void showNumber() {
        println( myFloat );
    }
} 
```

我正在努力使用代理将该代码转换为 Clojure，任何帮助将不胜感激

* * *

**更新：**

显然***deftype***更适合我的目的，但我仍在努力实现它

这是我的 Clojure 代码：

```
(deftype Particle [x y]
  Object
  (render [this]
    (no-stroke)
    (fill 200 30 180)
    (ellipse x y 200 200))) 
```

事情是我需要指定一个我不确定要使用哪个协议的协议，所以我正在使用 Object ，因为我正在尝试创建一个类似 java 的对象，但我收到以下错误消息：

***无法在接口中定义方法：渲染***

如果有帮助，我正在使用 quill，它是 Clojure 的处理端口

* * *

**更新 2：**

好的，我设法获得了一个有效的 defprotocol 和 deftype 组合，但是我还需要学习如何做一件事，那就是向我的类添加成员变量或属性，这是我的 clojure 代码：

```
(defprotocol ParticleProtocol
  (update [this])
  (render [this]))

(deftype Particle [position]
  ParticleProtocol
  (update [this])
  (render [this]
    (no-stroke)
    (fill 200 30 180)
    (ellipse (.x position) (.y position) 20 20))) 
```

对于这个对象，我想添加几个变量，比如半径等，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T21:50:28.383

I agree that `deftype` (or possibly `defrecord`) is a better than `proxy` to do this in Clojure, but see my comments at the end to consider all possibilities.

For your question after UPDATE 2.

You can add "properties" to records by specifying them in the arglist:

```
(deftype Particle [position radius prop3 prop4]
   ...
 ) 
```

Remember that types in Clojure are immutable, so there is no concept of setting properties after creating the entity. If some of the properties are optional, it is recommended best practice to create helper "factory" methods, like:

```
(defn make-particle 
  ([position] (Particle. position nil nil nil))
  ([position radius] (Particle. position radius nil nil))
  ;; etc. add more here as needed
  ) 
```

An option to consider is to drop types entirely and just use maps, which have within them whatever "properties/fields" you need. Types are useful when you need to implement abstractions. For your ParticleProtocol - what is the value it is providing? Protocols are meant to provide a way to have polymorphism, so will you have multiple implementations of this protocol?

Chas Emerick did an in depth flowchart of how to choose a data type in Clojure that may help you: [http://cemerick.com/2011/07/05/flowchart-for-choosing-the-right-clojure-type-definition-form/](http://cemerick.com/2011/07/05/flowchart-for-choosing-the-right-clojure-type-definition-form/)

* * *

**[Update showing example map implementation]**:

To construct a map with a "property" and retrieve that property you would do:

```
(def mymap {:myfloat 3.1415926})
(println "myfloat has value:" (:myfloat mymap)) 
```

To provide additional functionality, such as a "render" function, just create a fn that accepts a map with the desired keys:

```
;; the details are bogus, just showing the syntax
(defn render [m]
  (no-stroke)
  (fill (:radius m) (:position m))
  (do-something-else (:position m))) 
```

For your `update`, if you meant to update the values in the particle map, then you need to create a new map, rather than updating an existing one.

```
(def myparticle {:position 100 :radius 25})

(defn change-pos [particle-map new-pos]
  (assoc-in particle-map [:position] new-pos))

(let [new-particle (change-pos myparticle 300)]
  (println new-particle))
;; prints out {:position 300 :radius 25}
;; orig myparticle still has value {:position 100 :radius 25}

;; or do it directly
(println (assoc myparticle :position 300))
;; prints out {:position 300 :radius 25} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:46:24.443

您可以在 旁边添加“变量” `position`，如下所示：

```
(deftype Particle [position radius]
   ...
  ) 
```

`position` and `radius` aren't really variables, they are more like `final` attributes. If you need to "vary" them, you should store atoms in them, like this:

```
(Particle. (atom (Position. 3 4)) (atom 5.0)) 
```

But you should really heed the advise of @m0skit0 to stop thinking in terms of objects and classes and start thinking in functions and immutable data structures.

# android - Android ActionBarSherlock，SearchView `setOnCloseListener` 不起作用

> ID：15459882
> 
> 赞同：6
> 
> 时间：2013-03-17T10:46:17.543
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 SearchView，它工作正常，但只是`setOnCloseListener`不工作；这是我的代码

```
import com.actionbarsherlock.widget.SearchView.OnCloseListener; 
```

和

```
searchView.setOnCloseListener(new OnCloseListener() {
            @Override
            public boolean onClose() {

                Toast.makeText(context, "close", Toast.LENGTH_SHORT).show();
                return false;
            }
        }); 
```

******编辑* *** ******

 **```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        //Used to put dark icons on light action bar
        //Create the search view
        final SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
        searchView.setQueryHint("Search");
        searchView.setIconifiedByDefault(true);

    //search button
    menu.add(Menu.NONE,Menu.NONE,1,"Search a word")
        .setIcon(R.drawable.abs__ic_search_api_holo_light)
        .setActionView(searchView)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

        MenuItem sView =  menu.findItem(1);

        sView.setOnActionExpandListener(this);

return true;

}

    @Override
    public boolean onMenuItemActionCollapse(MenuItem item) {
        adopter.getFilter().filter(null);
        Toast.makeText(getApplicationContext(), "collapse", Toast.LENGTH_LONG).show();
        return true; // Return true to collapse action view
    }

    @Override
    public boolean onMenuItemActionExpand(MenuItem item) {
        Toast.makeText(getApplicationContext(), "Expand", Toast.LENGTH_LONG).show();
        return true; // Return true to expand action view
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-24T06:30:57.547

自己解决了。离开 `setOnCloseListener`它是行不通的，然后把下面的代码放进去`onCreateOptionsMenu`

```
//        searchView.setOnCloseListener(new OnCloseListener() { 
//          @Override
//          public boolean onClose() {
//              adapter.getFilter().filter("");
//              Toast.makeText(getBaseContext(), "on close", Toast.LENGTH_SHORT).show(); 
//              return false;
//          }
//      });

        MenuItem menuItem = menu.findItem(ID_OF_SEARCHVIEW);
        menuItem.setOnActionExpandListener(new OnActionExpandListener() {   
            @Override
            public boolean onMenuItemActionExpand(MenuItem item) {
                adapter.getFilter().filter("");
                return true;
            }

            @Override
            public boolean onMenuItemActionCollapse(MenuItem item) {
                adapter.getFilter().filter("");
                return true;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-14T01:23:21.917

我遇到了与 onCloseListener 不调用 SearchView 相同的问题。[从25758](http://code.google.com/p/android/issues/detail?id=25758)中提出的错误问题和我阅读的一些帖子中了解，要调用 onCloseListener，您需要设置：

```
searchView.setIconifiedByDefault(true); 
```

但就我而言，我想让搜索视图一直打开而不是图标化。我设法通过在下面再添加一行来解决这个问题：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.search_bar, menu);
    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    searchView = (SearchView) menu.findItem(R.id.search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setOnQueryTextListener(queryTextListener);
    searchView.setIconifiedByDefault(true);
    searchView.setIconified(false);
    return true;
} 
```

searchView.setIconified(false) 将导致 searchView 打开，尽管在上一行中将默认设置为 iconified 为 true。通过这种方式，我设法同时拥有一个始终打开的 SearchView 并让它调用 onCloseListener。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-11T17:13:31.003

我正在使用这段代码。它完美地工作

```
 @Override
    public void onStartSearch() {
    }

    @Override
    public void onSearch(String search) {

    }

    @Override
    public void onCloseSearch() {
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        inflater.inflate(R.menu.your_menu, menu);

        // Associate searchable configuration with the SearchView
        MenuItem searchItem = menu.findItem(R.id.action_search);
        mSearchView = (SearchView) MenuItemCompat.getActionView(searchItem); //here I user appcompat, but you can take it just from actionbarsherlock

        SearchView.SearchAutoComplete searchAutoComplete = (SearchView.SearchAutoComplete) mSearchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
        searchAutoComplete.setTextColor(getResources().getColor(R.color.action_bar_text_color));

        mSearchView.setIconifiedByDefault(true);
        mSearchView.setSubmitButtonEnabled(false);

        /**
         * Set all of different kinds of listeners
         */
        MenuItemCompat.setOnActionExpandListener(searchItem, new MenuItemCompat.OnActionExpandListener() {
            @Override
            public boolean onMenuItemActionCollapse(MenuItem item) {
                menuIsOpen = false;
                onCloseSearch();
                return true;
            }

            @Override
            public boolean onMenuItemActionExpand(MenuItem item) {
                menuIsOpen = true;
                onStartSearch();
                return true;
            }
        });

        mSearchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
            @Override
            public boolean onQueryTextChange(String s) {
                onSearch(s);
                return false;
            }

            @Override
            public boolean onQueryTextSubmit(String s) {
                onSearch(s);
                return true;
            }
        });

        super.onCreateOptionsMenu(menu, inflater);
    }

/**
     * Function for closing search when android is less than 14
     */
    public boolean onBackButton() {
        if (AndroidUtils.getSdkVersion() >= 14)
            return false;

        if (menuIsOpen) {
            menuIsOpen = false;
            getActivity().supportInvalidateOptionsMenu();
            onCloseSearch();
            return true;
        }
        return false;
    } 
```

在 backButton 之后它关闭搜索，或者只是从操作栏中选择关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T10:37:31.607

您可以使用 OnActionExpandListener：

```
public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
  SearchView searchView = new SearchView(((SherlockFragmentActivity) getActivity()).getSupportActionBar().getThemedContext());
  searchView.setIconifiedByDefault(true);
  // ...
  MenuItem menuItem = menu.add(R.string.search);
  // ...
  menuItem.setOnActionExpandListener(this);
}

@Override
public boolean onMenuItemActionExpand(final MenuItem item) {
    mInSearchMode = true;
    return true;
}

@Override
public boolean onMenuItemActionCollapse(final MenuItem item) {
    mInSearchMode = false;
    return true;
} 
```**

# c# - 异步与多线程

> ID：15459887
> 
> 赞同：5
> 
> 时间：2013-03-17T10:46:36.143
> 
> 标签：c#, asynchronous

我读了这个问题[Asynchronous vs Multithreading-is there a difference](https://stackoverflow.com/questions/600795/asynchronous-vs-multithreading-is-there-a-difference)并在 Google 中搜索差异。

使用异步而不是多线程有什么好处？什么时候使用异步而不是多线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:00:13.320

如果您的任务可以使用异步编程来完成，那么最好这样做，而不是进行多线程编程。有3个原因：-

## 1：性能

在多线程中，CPU 或 w/e 必须不断在线程之间切换。所以，即使你的线程什么都不做，只是坐在那里（或者更有可能，做一个比较以查看一个条件是否为真，以便它可以与它被创建的 w/e 一起做），CPU 仍然会切换线程和过程需要一些时间。我不认为那会很糟糕，但你的表现肯定会受到打击。

## 2：简单和简洁

另外，也许只有我一个人，但异步编程对我来说似乎更自然。在你问之前，不，我不是 JS 的粉丝，但仍然。不仅如此，您还会遇到共享变量和线程安全等问题——所有这些都可以通过使用异步编程和回调来规避。

## 3：烦人的线程实现

在 Python 中有一个非常可怕的东西，叫做 GIL（全局解释器锁）。基本上，Python 不允许您实际运行并发线程。此外，如果您正在考虑在多核 CPU 上运行线程程序，请忘记它。

C# 中也可能有警告，我不知道。这些只是我的 2 美分...

* * *

尽管如此，异步和多线程确实没有那么可比性。虽然可以使用多线程（效率低下）来实现异步，但它是一种获得并发性的方法，而异步是一种编程风格，如 OOP（面向对象编程）。

# php - 如何用动态输入字段构建表格？

> ID：15459890
> 
> 赞同：1
> 
> 时间：2013-03-17T10:46:45.533
> 
> 标签：php, mysql

我有一个 PHP 脚本，您可以（作为管理员）在其中选择问题表单中有多少个输入字段。有些字段是非可选的，但有些是（任意数量）。

MySQL 中用于收集答案的表如下所示：

```
id | userid | fname | ename | seat | optional 
```

如果管理员希望它是两个可选的输入字段，那么一个填写表格的结果将在表中占用三个拖曳：

```
| 5 | 3 | Peter | Pan | 4 |            |
|   | 3 |       |     |   | opt.value1 |
|   | 3 |       |     |   | opt.value2 | 
```

这真的是存储它的最佳方式吗？你会怎么解决？

而且，我怎样才能确保用户 ID 对用户来说是唯一的？我不能在 MySQL 中使用自动递增键值的东西，因为相同的值在三行上......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:58:50.297

最佳做法是将“id”和“可选”值存储在单独的表中。然后为每个“id”从中提取您想要的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:05:04.070

我学到的方式是你必须使用多个表。像这样：

表格1：

```
id | userid | fname | ename | seat 
```

表2：

```
userid | optional 
```

Table2.userid 是对 Table1.userid 的引用

然后可以将必须​​归档的字段放入第一个表中，并将所有可选字段放入第二个表中。

如果我按照您的示例进行操作，您的数据库应如下所示：

表格1：

```
id | userid | fname | ename | seat
 5 |      3 | Peter |   Pan |    4 
```

表2：

```
userid | optional
     3 | opt.value1
     3 | opt.value2 
```

顺便问一下，为什么Table1中同时有id和userid？

# django - 列出所有相关对象并允许对相关对象进行分页

> ID：15459891
> 
> 赞同：0
> 
> 时间：2013-03-17T10:46:47.247
> 
> 标签：django

有人可以通过以下示例给我最好的方法...

在一个页面上，我按 ID 加载“**组**”对象。我还想列出属于该组的所有联系人（带有分页）。

由于分页问题，​​我正在考虑只运行第二个数据库查询......

在我看来...

```
group = get_object_or_404(Group, pk=id)
contacts = Contacts.objects.filter(group=x) 
```

但这似乎很浪费，因为我已经知道 Group 为什么要两次访问数据库。

看我的模型。

```
class GroupManager(models.Manager):

    def for_user(self, user):
        return self.get_query_set().filter(user=user,)

class Group(models.Model):
    name = models.CharField(max_length=60)
    modified = models.DateTimeField(null=True, auto_now=True,)

    #FK
    user = models.ForeignKey(User, related_name="user")

    objects = GroupManager()

    def get_absolute_url(self):
        return reverse('contacts.views.group', args=[str(self.id)])

class Contact(models.Model):

    first_name = models.CharField(max_length=60)
    last_name = models.CharField(max_length=60)

    #FK
    group = models.ForeignKey(Group) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:58:45.590

这是[`select_related`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)为：

> 返回一个 QuerySet，它将自动“遵循”外键关系，在执行查询时选择附加的相关对象数据。这是一个性能提升器，它会导致（有时很多）更大的查询，但意味着以后使用外键关系将不需要数据库查询。

在您的情况下，它将是：

```
Group.objects.select_related().get(pk=group) 
```

现在在每次 FK 查找时，您不会再次访问数据库。

下一步是使用[缓存 api](https://docs.djangoproject.com/en/1.5/topics/cache/#the-low-level-cache-api)缓存结果，这样您就不会在每次调用下一个“页面”时都访问数据库。如果您的数据对时间不敏感，这将很有用。

# java - OSGi 服务类依赖项

> ID：15459905
> 
> 赞同：0
> 
> 时间：2013-03-17T10:48:14.670
> 
> 标签：java, osgi, apache-felix

我想知道什么是组织我的包的好方法，以便可以在它们之间共享作为服务参数所需的类。

我有几个服务接口，它们公开需要在bundes之间引用的类类型，例如：

```
public interface DoesThis {
   public CustomClassB doSomething(CustomClassA customClassA);
} 
```

据我了解`CustomClassA`（如果在与公开服务相同的捆绑包中定义）将无法用于其他捆绑包，那么最好在一个包中公开捆绑包之间的类引用，然后将其导出？

就像一个子问题：服务和包导出是否应该协同工作......从我正在阅读的文档中不清楚是否是这种情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:11:16.633

基本上，是的。接口引用的所有类型都必须在导出的包中。有几个选项：

*   它们可能与接口在同一个包中，在这种情况下，它们自然会与接口同时导出，因为在 OSGi 中，我们总是导出/导入整个包。
*   它们可以在不同的包中，但由与服务接口相同的包导出。
*   它们可能位于不同的包中并由不同的捆绑包导出。在这种情况下，服务接口包必须导入该包。

如果您考虑一下，不导出类型是没有意义的。例如，如果消费者`doSomething`无法创建`CustomClassA`要传入的类型对象，或者无法理解返回类型，消费者如何调用您的方法`CustomClassB`？

关于您的子问题...是的，包导出主要是为了支持服务注册表。只有提供者和消费者能够就服务的“合同”达成一致，服务才能工作，在 Java 术语中，这意味着它们加载相同的接口。

# c++ - 如何使派生类的成员只读？

> ID：15459906
> 
> 赞同：1
> 
> 时间：2013-03-17T10:48:31.273
> 
> 标签：c++, inheritance, readonly, member

给定一个带有受保护成员的抽象基类，我怎样才能只提供对派生类的读取访问权限？

为了说明我的意图，我提供了一个最小的例子。这是基类。

```
class Base
{
public:
    virtual ~Base() = 0;
    void Foo()
    {
        Readonly = 42;
    }
protected:
    int Readonly;                 // insert the magic here
}; 
```

这是派生类。

```
class Derived : public Base
{
    void Function()
    {
        cout << Readonly << endl; // this should work
        Readonly = 43;            // but this should fail
    }
}; 
```

不幸的是，我不能使用`const`成员，因为它必须由基类修改。我怎样才能产生预期的行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T10:52:13.040

通常的方法是让你的成员`private`成为基类，并提供一个`protected`访问器：

```
class Base
{
public:
    virtual ~Base() = 0;
    void Foo()
    {
        m_Readonly = 42;
    }
protected:
    int Readonly() const { return m_Readonly; }
private:
    int m_Readonly;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T10:52:34.147

由于受保护的成员在派生类中是可见的，如果您希望该成员在派生类中是只读的，您可以将其设为私有，并提供一个 getter 函数。

```
class Base {
public:
    Base();
    virtual Base();

    public:
         int getValue() {return value;}

    private:
         int value;
} 
```

这样您仍然可以更改基类中的值，并且它在子类中是只读的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T19:22:25.283

继承的最佳实践指南应该是始终使成员变量私有和访问函数公开。如果您有只希望从派生类调用的公共函数，则意味着您正在编写意大利面条式代码。（来源：Meyer's Effective C++ item 22）

# arrays - 使用 grep 检查数组中是否存在多个 var

> ID：15459907
> 
> 赞同：3
> 
> 时间：2013-03-17T10:48:44.183
> 
> 标签：arrays, bash, grep, conditional-statements

我正在使用此代码检查一个 $var 是否存在于数组中：

```
 if echo ${myArr[@]} | grep -qw $myVar; then echo "Var exists on array" fi 
```

我如何将多个 $vars 合并到我的支票中？类似 grep -qw $var1,$var2; 然后...菲

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:13:06.203

```
if echo ${myArr[@]} | grep -qw -e "$myVar" -e "$otherVar"
then 
  echo "Var exists on array"
fi 
```

从手册页：

> -e PATTERN, --regexp=PATTERN 使用 PATTERN 作为模式。这可用于指定多个搜索模式，或保护以连字符 (-) 开头的模式。（-e 由 POSIX 指定。）

但是如果你想使用这样的数组，你不妨使用 bash 内置的[关联数组](http://www.linuxjournal.com/content/bash-associative-arrays)。

实现和逻辑：

```
myVar1=home1
myVar2=home2

myArr[0]=home1
myArr[1]=home2
if echo ${myArr[@]} | grep -qw -e "$myVar1.*$myVar2" -e "$myVar2.*$myVar1"
then 
          echo "Var exists on array"
fi

# using associative arrays

declare -A assoc
assoc[home1]=1
assoc[home2]=1

if [[ ${assoc[$myVar1]} && ${assoc[$myVar2]} ]]; then
  echo "Var exists on array"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:03:35.147

实际上你不需要`grep`这个，Bash 完全有能力做扩展正则表达式本身（Bash 3.0 或更高版本）。

```
pattern="$var1|$var2|$var3"

for element in "${myArr[@]}"
do
    if [[ $element =~ $pattern ]]
    then
        echo "$pattern exists in array"
        break
    fi
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T11:59:38.747

一些二次的，但知道空间：

```
myArr=(aa "bb c" ddd)

has_values(){ 
  for e in "${myArr[@]}" ; do
    for f ; do
      if [ "$e" = "$f" ]; then return 0 ; fi
    done
  done 
  return 1
}

if has_values "ee" "bb  c" ; then echo yes ; else echo "no" ; fi 
```

这个例子将打印 no 因为`"bb c" != "bb c"`

# sql - 使用 vb.NET、Access 的条件表达式中的数据类型不匹配

> ID：15459908
> 
> 赞同：0
> 
> 时间：2013-03-17T10:48:45.173
> 
> 标签：sql, vb.net

我已经尝试在两个变量周围加上引号，并且一直在寻找解决方案。查询文本：

```
"UPDATE Customer SET RoundID =" & SelectedID & " WHERE CustomerID ='" & ctrl.Tag & "'" 
```

SelectedID 是一个整数，例如 35。ctrl.Tag 也是一个整数。我正在尝试更新我的客户表中的一个字段。RoundID 是一个长整数，CustomerID 是一个自动编号。数据库存储在 access 中，我使用的是 Access 2013，我使用 Visual Basic Express 2008 编写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:48:30.110

使用参数更容易也更安全：

```
command.CommandText = "UPDATE Customer SET RoundID = @SelectedID WHERE CustomerID = @Tag"
command.Parameters.AddWithValue("@SelectedID", SelectedID)
command.Parameters.AddWithValue("@Tag", ctrl.Tag) 
```

# php - 使用 php 从 print_r 显示错误

> ID：15459914
> 
> 赞同：-4
> 
> 时间：2013-03-17T10:49:15.640
> 
> 标签：php, database

为什么会显示 stdClass Object ( [jobid] => 1 ) stdClass Object ( [jobid] => 2 )

而不是值 1 和 2

```
<?php 
foreach($RowTable as $row) {
    print_r($row, false);?>    
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:56:42.937

只需查看[文档](http://php.net/manual/en/function.print-r.php)：

> print_r() 以人类可读的方式显示有关变量的信息。

如果要打印值，请使用`echo $row->jobid;`.

# jquery - 创建后动态绑定某个类的元素

> ID：15459915
> 
> 赞同：0
> 
> 时间：2013-03-17T10:49:26.423
> 
> 标签：jquery, event-handling, keypress, dynamically-generated

我`arindic`使用`document.ready()`.

然后在它们的动态生成结束后，仍然在`document.ready()`例程中，我将这些元素与`keypress`事件绑定，如下所示：

```
$('.arindic').bind('keypress', function(evt){
   // do lots of stuff
}); 
```

但它不起作用。我知道“做很多事情”的功能运行良好，因为在底部`document.ready()`我有这个：

```
 $('.arindic').keypress(function(evt){ // do lots of stuff // }); 
```

这适用于页面上已经静态存在的文本区域。我绑定动态元素的方式有问题吗？而不是`.bind()`我也尝试过`.on()`，`.live()`但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:55:00.147

最好的办法是使用`.on()`绑定到静态元素并冒泡到动态创建的元素。

```
$(document).on('keypress', '.arindic', function(event)
{
    // do lots of stuff
}); 
```

使用文档绑定不是一件好事，我会将其更改`.arindic`为包含在其中的最高级别的静态元素，并允许此事件从那里冒泡。

# c++ - 在 C++ Ubuntu 12.04 中使用 GMP

> ID：15459921
> 
> 赞同：2
> 
> 时间：2013-03-17T10:50:11.650
> 
> 标签：c++, ubuntu, gmp

我正在尝试将 Ubuntu 12.04 上的 GMP 库用于 C++，但遇到了麻烦。我安装得很好，但我的任何程序都无法使用它，他们说“未定义对 '_gmpf_add' 和所有其他操作的引用。我正在使用 Code::Blocks IDE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:58:46.603

确保您链接到 gmp。这可能就像编辑您的 makefile 并将“-lgmp”添加到您的 LDFLAGS 一样简单。

例子：

```
$ g++ gmp-code.cc -lgmp -o gmp-code 
```

# android - 如何在 IntelliJ 模拟器中运行 Android 应用程序

> ID：15459922
> 
> 赞同：2
> 
> 时间：2013-03-17T10:50:14.237
> 
> 标签：android, android-emulator, intellij-idea

我安装了 IntelliJ 12 和 Android SDK 10 和 17。我在 IntelliJ 中设置了一个简单的“hello world”android 应用程序。然后我使用 IntelliJ 在模拟器中运行该应用程序。IntelliJ 执行以下命令：

```
"D:\Program Files\Android\android-sdk\tools\emulator.exe" -avd AVD_for_Nexus_S_by_Google -netspeed full -netdelay none 
```

Android 模拟器运行但“hello world”应用程序不在其中：

![](../Images/d720db5a2e422055b00a4ce7adb1932a.png)

我应该怎么做才能让模拟器执行“hello world”应用程序？我想上面的命令中应该有一些对应用程序的引用。

# c# - 在c#中将一组字符写入串口

> ID：15459924
> 
> 赞同：-4
> 
> 时间：2013-03-17T10:50:27.777
> 
> 标签：c#

我想在 C# 中将一组字符写入串行端口。

字符集是 123456

```
 serialPort1.WriteLine("123456"); 
```

上面的代码不起作用。所以给我一些其他的方法。

谢谢。

编辑：

我不想将字符串“123456”作为一个整体发送。我只想将字符“123456”一个一个发送到串口。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:32:46.870

你可以试试 ：

```
 String stringToSend = "123456";
        serialPort1.Write(stringToSend.ToCharArray(), 0, stringToSend.Length); 
```

看看：[MSDN](http://msdn.microsoft.com/en-us/library/y2sxhat8%28v=vs.90%29.aspx)

# javascript - 加载新页面时计数器变量不存在

> ID：15459933
> 
> 赞同：1
> 
> 时间：2013-03-17T10:51:52.197
> 
> 标签：javascript, counter

我想在 javascript 中使用计数器变量，例如带计时器的静态变量。计数器必须每秒减 1。我正在做在线考试。在回答问题时，新问题出现在同一页面上。当计数器变量用新问题（意味着新页面）初始化时，我的问题就开始了。计数器变量不会在新页面上持续存在...建议任何解决方案

```
<script language="JavaScript">

function ExamTimer() 
{   
if ( typeof ExamTimer.counter == 'undefined' )   
{   
ExamTimer.counter = 30000;  // 30 min
    }
else
{

 ExamTimer.counter = ExamTimer.counter-1;   
    if(ExamTimer.counter<=0)
    {
          alert("exam finish");
     }
setTimeout(ExamTimer, 1000);

  }
window.onload=ExamTimer;
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:02:54.147

Javascript 变量并不意味着比当前页面加载更有效。浏览器的 Javascript 引擎会在每次页面加载时执行代码（尽管[大多数浏览器会缓存已编译的代码](https://stackoverflow.com/questions/1096907/do-browsers-parse-javascript-on-every-page-load)），因此每当页面重新加载时客户端变量都会丢失。

有几种常见的方法可以将值从一个页面传递到另一个页面：

1.  [DOM 存储](https://developer.mozilla.org/en-US/docs/DOM/Storage#sessionStorage)
2.  [饼干](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)
3.  通过 GET 或 POST 请求的服务器端变量

无论您选择哪种方法，请记住它需要对用户不必要的操作具有足够的弹性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:39:19.053

使用 ajax 将值从一个页面传递到另一个页面。使用会话保持最后剩余时间泰语传递到下一页

```
<script language="JavaScript">

 function ExamTimer() 
 {   
 if ( typeof ExamTimer.counter == 'undefined' )   
 {   
  ExamTimer.counter = <cfoutput>#session.RemainTime#</cfoutput>;
  }
  else
   {

 ExamTimer.counter = ExamTimer.counter-1; 
 $.get('linktosend.cfm',{counter:ExamTimer.counter},function(responseText)
    { 
// value of ExamTimer.counter send to linktosend.cfm and store in session.RemainTime           
 });  
 if(ExamTimer.counter<=0)
 {
       alert("exam finish");
 }
setTimeout(ExamTimer, 1000);

 }
 window.onload=ExamTimer;

 </script> 
```

# android - 无法在 android 中启动 cygpath

> ID：15459934
> 
> 赞同：29
> 
> 时间：2013-03-17T10:51:52.637
> 
> 标签：android, android-ndk, java-native-interface, cygpath

当我尝试将项目导入我的工作区时，它显示错误

> [2013-03-17 16:14:15 - 无法启动 cygpath。Cygwin 在路径上吗？] java.io.IOException: 无法运行程序 "cygpath": CreateProcess error=2, 系统找不到指定的文件

这个项目包含 jni 库，它是一个基于 ndk 的项目。为什么会发生这个错误，我无法将此项目导入我的系统。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-26T11:19:22.473

转到您的项目，右键单击那里。然后获取属性并选择 c/c++ 构建，在那里您可以看到构建设置。在构建设置中，给出系统中 ndk 的路径，例如：

```
D:\android\android-ndk-r8d\ndk-build.cmd NDK_DEBUG=1 
```

现在清理您的项目并运行。就是这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T18:38:43.453

使用 NDK r8d，您不需要 cygwin。可能您导入的项目针对旧版本进行了调整，并且可能将**ndk-build.sh**定义为 C++ 构建命令。您应该使用**ndk-build.cmd**或简单地使用**ndk-build**（利用 Windows 命令行约定）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T16:37:07.160

你可以设置一个环境变量

```
NDK_HOME = [your path to ndk] 
```

# python - 如何在 pymunk 中制作“复合”形状？

> ID：15459943
> 
> 赞同：2
> 
> 时间：2013-03-17T10:52:46.937
> 
> 标签：python, shapes, pymunk

正如标题所说，我怎样才能加入/约束 2 个 pymunk 身体/形状，使它们不充当一个单一的对象？
例如，在这种情况下，我有一个板球拍，由 2 个独立的主体和多边形组成。
我想将蝙蝠的“手柄”连接到我的蝙蝠的“刀片”上，这样我就得到了一个类似蝙蝠的物体。

我的代码：

```
### BAT n Co. ###
# body format: [vertices, offset, position, mass]
bat_bodies_v = [
# bat
    [[[0, 34], [4, 34], [4, 0], [0, 0]],(-2,-20),(103,190),20], # handle
    [[[6, 90] , [0, 32] , [0, 17], [6, 0] , [10, 0], [10, 90]],(-5,-20),(100,100),1100] # blade
]

bat_bodies = []
for vertices, offset, pos, mass in bat_bodies_v:
    moment = pm.moment_for_poly(mass,vertices,offset)
    b = pm.Body(mass,moment)
    b.position = pos

    poly = pm.Poly(b, vertices,offset)
    poly.friction = 0.9

    bat_bodies.append(poly)
    space.add(b,poly)

# the closest I got.
j1 = pm.constraint.PinJoint(bat_bodies[0].body,bat_bodies[1].body)
j2 = pm.constraint.RotaryLimitJoint(bat_bodies[0].body,bat_bodies[1].body,0,0)
space.add(j1,j2) 
```

* * *

**这**=============**变成**================>**这** ![开始](../Images/82a5d4c406cd1a1b5067056712e08682.png)![结尾](../Images/8c3cdc9e0b34459c82f092e9901696b1.png)
[我有一个函数可以在身体位置绘制那些绿色圆圈]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:54:59.847

在 pymunk 中构建复杂形状的最佳方法是将形状附加到同一个主体上。因此，除非您有充分的理由将它们分开，否则我建议您尝试将两种形状添加到同一个主体中。

但是，有时您可能想做其他事情，例如能够破坏对象。我自己并没有真正实现任何东西，但 Scott（Chipmunk 的）在这篇文章中写道[http://chipmunk-physics.net/forum/viewtopic.php?f=1&t=2420&p=10644&hilit=breakable#p10644](http://chipmunk-physics.net/forum/viewtopic.php?f=1&t=2420&p=10644&hilit=breakable#p10644)使用 PivotJoint 和GearJoint 可能是将两个主体保持在一起的好主意。

# navigation - AngularJS 中的标签式导航

> ID：15459944
> 
> 赞同：3
> 
> 时间：2013-03-17T10:52:55.357
> 
> 标签：navigation, angularjs

在 AngularJS 中，如何创建一个简单的选项卡式导航（在单击选项卡时切换内容）？

HTML：

```
<ul class="tabbed-navi">
    <li class="active">
        <a href="#one">Nav One</a>
    </li>
    <li>
        <a href="#two">Nav Two</a>
    </li>
    <li>
        <a href="#three">Nav Three</a>
    </li>
</ul>

<div class="active">
    Content One
</div>
<div>
    Content Two
</div>
<div>
    Content Three
</div> 
```

我正在寻找一个简单的、对初学者友好的示例，*而不是*“下载这些其他东西然后......”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:45:43.430

请参阅 AngularJS 主页的“创建组件”部分。该示例应用程序定义了两个指令：`pane`和`tabs`.

有关其工作原理的其他说明，请参阅[AngularJS 控制器中的“this”与 $scope](https://stackoverflow.com/questions/11605917/this-vs-scope-in-angularjs-controllers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T00:44:41.167

也许像这样的东西......

```
<ul class="tabbed-navi">
    <li class="active">
        <a href ng-click="option=1">Nav One</a>
    </li>
    <li>
        <a href ng-click="option=2">Nav Two</a>
    </li>
    <li>
        <a href ng-click="option=3">Nav Three</a>
    </li>
</ul>

<div ng-class="option==1? 'active':''">
    Content One
</div>
<div ng-class="option==2? 'active':''">
    Content Two
</div>
<div ng-class="option==3? 'active':''">
    Content Three
</div>
```

# php - Wordpress，投资组合页面使用标题“博客档案”，我希望它说“投资组合”

> ID：15459945
> 
> 赞同：0
> 
> 时间：2013-03-17T10:53:04.830
> 
> 标签：php, wordpress

在我的 Wordpress 网站上，当我单击我的投资组合类别时，它会显示标题“博客档案”，这不是我想要的。

我想要一个 'Portfolio' 的标题。所以我找到了 archive.php 的模板文件，它基本上说如果变量 is_Day、is_Month 或 is_Year 设置，然后显示相关的归档标题，否则显示 'Blog Archive' ，见下面的代码

```
<h2>
    <?php if ( is_day() ) : /* if the daily archive is loaded */ ?>
  <?php printf( __( 'Daily Archives: <span>%s</span>' ), get_the_date() ); ?>
<?php elseif ( is_month() ) : /* if the montly archive is loaded */ ?>
  <?php printf( __( 'Monthly Archives: <span>%s</span>' ), get_the_date('F Y') ); ?>
<?php elseif ( is_year() ) : /* if the yearly archive is loaded */ ?>
  <?php printf( __( 'Yearly Archives: <span>%s</span>' ), get_the_date('Y') ); ?>
<?php else : /* if anything else is loaded, ex. if the tags or categories template is missing this page will load */ ?>
  <?php _e('Blog Archive', 'theme5820'); ?>
<?php endif; ?>
</h2> 
```

在我看来，投资组合页面正在使用存档模板来显示帖子，因为上面说'如果加载了其他任何东西，例如。如果缺少标签或类别模板，则将加载此页面'

所以我的问题真的是，是否可以将“博客存档”更改为投资组合，或者我应该为投资组合类别创建一个页面，因为投资组合页面本身显示标题正常。

干杯，丰富:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:42:48.257

首先，看看有没有`category.php`模板。如果是这样，请将其复制到`category-portfolio.php`；如果没有，请复制`archive.php`到`category-portfolio.php`. 然后编辑新文件并删除您不想要的任何标题代码（如果有`category.php`代码可能会有所不同，`archive.php`因为它更特定于类别显示）。`Portfolio`当您选择类别时，WP 将自动使用新模板。

（我假设这是在您自己的主题中。如果没有，请创建一个子主题，将新文件放在那里，然后选择它。这样，如果您当前的主题升级，您就不会被烧毁）。

# node.js - Node.js：猫鼬动态更新播放器

> ID：15459949
> 
> 赞同：0
> 
> 时间：2013-03-17T10:53:39.560
> 
> 标签：node.js, mongodb, mongoose

我有以下有效的代码。但我希望它更加动态，而不是“mPlayers.0”，我希望它是“mPlayers.counter”，这样我就可以有一个查询。这似乎不是一件很难的事情，但我就是无法让它发挥作用。

任何帮助表示赞赏！

```
if(counter === 0) {
  models.GameBoard.findOneAndUpdate({_id: game._id}, {$set: {"mPlayers.0": updatedPlayer}}).exec();
} else if(counter === 1) {
  models.GameBoard.findOneAndUpdate({_id: game._id}, {$set: {"mPlayers.1": updatedPlayer}}).exec();
} else if(counter === 2) {
  models.GameBoard.findOneAndUpdate({_id: game._id}, {$set: {"mPlayers.2": updatedPlayer}}).exec();
} else if(counter === 3) {
  models.GameBoard.findOneAndUpdate({_id: game._id}, {$set: {"mPlayers.3": updatedPlayer}}).exec();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:11:45.687

看起来好像你想要这个：

```
var value = {};
value['mPlayers.' + counter] = updatedPlayer;
models.GameBoard.findOneAndUpdate({_id: game._id}, {$set: value}).exec(); 
```

# jquery - 修改内联样式，多元素深度

> ID：15459950
> 
> 赞同：1
> 
> 时间：2013-03-17T10:53:43.467
> 
> 标签：jquery, css, greasemonkey, inline-styles

我正在尝试在一个网站上修改 CometChat 的颜色，由于有一个未修改的 CometChat，该网站将保持匿名。我只想更改颜色，但由于不想为单个页面安装单个扩展，我更喜欢使用 Greasemonkey 而不是用户样式扩展。

我已将背景颜色更改为黑色，这很好，直到我将默认文本颜色（黑色）修改为白色。
系统似乎根据 Cookie 中的颜色设置文本样式，但它在跨度上使用内联样式。

我不知道如何只修改“颜色：#000000”的内联样式（不，它们没有附加的“;”）而不更改所有其他颜色，并从聊天中删除一个功能。

我试过：

*   使用 jQuery`.attr`查找值，然后应用具有`!important`颜色的类。
*   用于`.attr`直接更改颜色。

我还尝试`span[style="color:#000000"]`了其他一些方法，到目前为止没有任何效果。

我注意到的一件事是，在尝试`alert()`查看它是否正常工作时（在某些尝试期间`.each`），它不会创建警报。我能想到的唯一原因是文档深处有几个Div。（`html > body > div#container > div#currentroom > div#currentroom_left > div#currentroom_convo > div#currentroom_convotext > div > div.cometchat_chatboxmessage > span.cometchat_chatboxmessagecontent > span`（我想编辑的那个））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:22:31.797

我猜那个/那些跨度是由AJAX添加的（不能从问题中看出）。无论它们是否，您都可以使用`waitForKeyElements()`来更改它/它们：

```
// ==UserScript==
// @name     YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements (
    "#currentroom_convotext div.cometchat_chatboxmessage > span.cometchat_chatboxmessagecontent > span", 
    changeChatMessageCSS
);

function changeChatMessageCSS (jNode) {
    jNode.css ("color", "white");
} 
```

* * *

指示页面是否重置内联样式或`!important`在其 CSS 中使用。（它可能也不行。）

# javascript - 淘汰赛，observables 相互更新

> ID：15459951
> 
> 赞同：0
> 
> 时间：2013-03-17T10:53:45.377
> 
> 标签：javascript, knockout.js

我有 3 个字段的视图模型

```
dateStart = ko.observable();
dateEnd = ko.observable();
days = ko.observable(); 
```

假设选择了 startDate，只要选择了 endDate，就需要更新天数字段（天数 = endDate - startDate）。

此外，当更新天字段时，我需要计算 endDate（endDate = startDate + days）。

这怎么能用 knockoutjs 来完成？

谢谢你！

我试过 [http://jsfiddle.net/NfG4C/6/](http://jsfiddle.net/NfG4C/6/)，但我的 js 总是抛出太多的递归异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:07:16.833

据我了解，您基本上需要两件事。

1.  每当有人选择“endDate”时，您都想计算“days”字段[假设他们当然选择了“startDate”]
2.  每当有人更改“天”字段时，您都想重新计算“结束日期”字段

解决此问题的一种方法是使用“可写”计算 Observable [[http://knockoutjs.com/documentation/computedObservables.html]](http://knockoutjs.com/documentation/computedObservables.html)。请通过链接了解详细信息，但一般而言，“可写计算的可观察”是基于某些“其他”可观察的“计算”的东西，反之亦然。

我冒昧地修改了您的小提琴并将“天”更改为计算的可观察量。请看一下：http: [//jsfiddle.net/dJQnu/5/](http://jsfiddle.net/dJQnu/5/)

```
this.days = ko.computed({
    read: function () {
        //debugger;
        // here we simply need to calculate the days as => (days = endDate - startDate)
        if (that.dateStart() && that.dateEnd()) {
            var vacDayCounter = 0;
            for (var curDate = new Date(that.dateStart()); curDate <= that.dateEnd(); curDate = curDate.addDays(1)) {
                if (isDateCountsAsVacation(curDate)) {
                    vacDayCounter++;
                }
            }
            //that.days(vacDayCounter);
            return vacDayCounter;
        }
    },
    write: function (newDays) {
        if (newDays && !isNaN(newDays) && that.dateStart()) {
            var tmpEndDate = new Date(that.dateStart())
            appliedDays = 0;
            while (appliedDays < newDays) {
                if (isDateCountsAsVacation(tmpEndDate)) {
                    appliedDays++;
                }
                tmpEndDate = tmpEndDate.addDays(1);
            }
            if (tmpEndDate) {
                that.dateEnd(tmpEndDate);
            }
        }
    }
}); 
```

如果您注意到，我只是将您的代码（逻辑）用于读写部分。在读取期间，我们正在“计算”可观察对象本身的值，在本例中是“天”，而在写入期间（用户更改实际“天”输入值时会触发），我们正在重新计算“dateEnd”字段。

如果您有任何其他问题，请告诉我。

希望这可以帮助。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:59:51.320

您会遇到一个重复性问题，因为从订阅更新可观察对象时也会触发该可观察对象订阅方法。

您需要添加第四个成员，updatedFromSubscriber

从一开始就将其设置为 false，在每个订阅方法中添加

```
if(this.updatedFromSubscriber)
 return; 
```

并且在更新 observable 之前

```
this.updatedFromSubscriber = true 
```

更新 observable 后将其设置为 false

# c++ - C++ std lib 方法的名称解释

> ID：15459952
> 
> 赞同：-6
> 
> 时间：2013-03-17T10:53:48.603
> 
> 标签：c++, language-design

我是一名 Python/Scala/Haskell 编码器，正在尝试学习 C++，但我很难记住任何东西，因为 C++ 中的许多方法或类的名称对我来说没有任何意义。这可能是因为我不明白他们实际上打算做什么。谁能帮我解释一下：

1.  `vector`- 将向量称为列表或事物序列是一件很奇怪的事情。为什么是矢量？
2.  `unordered_set`- 为什么不简单地一个`set`？从什么时候开始订购套装？不隐含地设置意味着顺序无关紧要，而应该显式调用有序版本（java的TreeSets）`ordered_set`？
3.  `vector.cend`- cend 是什么意思？我在英文字典里找不到cend？为什么不简单地称之为结束呢？
4.  `emplace`- 安置是什么意思？一个更好的词不应该是“插入”吗？
5.  `push_back`- 为什么不简单地调用`push`or `append`？“后退”部分不是隐含的吗？
6.  为什么`empty()`返回一个布尔值？不应该`isEmpty()`吗？
7.  此外，`.begin()`and`.end()`似乎不一致。`begin()`是动词，而`end()`在这种情况下是名词。begin 表示开始某事，而它只是返回一个开始的指针。不应该调用`start`作为名词并且与“end”配合得很好的方法，或者`beginning`至少而不是`begin`
8.  此外，`list.unique`根本不像我认为的那样做 - 它只是**连续**相似物品的印章！？！（严重违反最小惊讶原则）-有趣的是，您也可以使用额外的哈希集在线性运行时正确地做到唯一

我还有很多，但如果我了解以上内容，我可能会更轻松地学习 C++。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:01:54.507

在 C++ 中，命名策略与其他语言完全不同。但是正如您所提到的，他们命名该函数`push_back`只是因为在某些容器中，例如`deque`has `push_front`（它是一个双端约束器）。我们使用诸如`clear`清空容器之类的功能而不是`empty`. 此外，在 C++ 中，集合容器是有序的。它以平均 O(nlogn) 次对元素进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:07:50.630

1.  `vector`: 函数式语言中也有向量，比如[这个包](http://www.haskell.org/haskellwiki/Numeric_Haskell%3a_A_Vector_Tutorial)
2.  `unordered_set`- Unordered/ordered 指的是底层实现；元素的实际存储方式。
3.  `vector.cend`-`cend`是一个指向末尾的常量迭代器。常量迭代器不允许您修改迭代器指向的值。
4.  `emplace`- Emplace 类似于插入，只是它“就地”创建对象；您将要传递给对象的构造函数的参数设置为 emplace。
5.  `push_back`- 这是为了保持统一的界面。像 std::list 这样的一些容器可以让你 push_front
6.  为什么`empty()`返回一个布尔值？不应该`isEmpty()`吗？：应该吗？谁说的？你已经习惯了 Python/Scala/Haskell，但这并不是真正的方法。
7.  此外，`.begin()`and`.end()`似乎不一致。`begin()`是动词，而`end()`在这种情况下是名词。begin 表示开始某事，而它只是返回一个开始的指针。不应该调用该方法，`start`它是一个名词并且与“end”配合得很好，或者`beginning`至少不是`begin`：我想。这似乎是一个小小的抱怨。就是这样。
8.  为什么不`list.unique`返回一个`set`？看起来很奇怪，它不仅修改了数据结构（来自功能世界，将数据变异作为副作用似乎真的很奇怪），而且这里更奇怪，因为 C++ 已经有了集合。我理解`unique`错了吗？？：如果你把没有副作用的心态带到 C++ 中，很多事情会很奇怪。如果你认真学习 C++，那么让你学习 Python/Scala/Haskell 的开放思想也应该适用于 C++。`list.unique`更像是 Ruby 的`Array#uniq`. 从[文档](http://www.cplusplus.com/reference/list/list/unique/)中：

> 请注意，只有当一个元素与它之前的元素比较相等时，它才会从列表容器中删除。因此，此函数对于排序列表特别有用。

如前所述，返回一个集合会丢失信息，因为在它们不连续的情况下它不会保留重复项。

就像我说的，如果你认真学习 C++，你将不得不处理其中一些语言/库设计决策。其中许多观点对我来说似乎都是小问题。其中一些是“就是这样”。C++ 中的某些东西简直是疯狂的，但如果你对 C++ 很认真，你会怎么做？事实上，例如 Haskell 似乎有一个“自然遵循”的更直接的设计，但这是一种不同的语言。希望你能克服这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T11:14:29.040

特别是，它与效率有关`unique`；它实际上应该被称为`compact`. 它将连续相等的元素压缩为单个元素，这可以在 O(n) 中完成，而返回 a`set`将是 O(n log n)，并且会产生构造和移动对象的成本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T11:17:39.933

> 向量 - 向量是一个很奇怪的东西，可以称为列表或事物序列。为什么是矢量？

C++ 也有`std::list<T>`一个双向链表。我有点同意它可以称为数组，但它又不是固定大小。

> unordered_set - 为什么不只是一个集合？从什么时候开始订购套装？不设置隐含意味着顺序无关紧要，有序版本（java的TreeSets）应该显式调用ordered_set？

C++03 已经有了`std::set<T>`基于搜索树的有序集。C++11 添加了`unordered_set<T>`基于哈希表的 . 需要区分有序集合 named`set`和 new `unordered_set`。

> vector.cend - cend 是什么意思？我在英文字典里找不到cend？为什么不简单地称之为结束呢？

`end()`成员函数返回`iterator`或`const_iterator`取决于上下文。该`cend()`函数总是返回`const_iterator`。这在某些情况下很有用。

> emplace - emplace 是什么意思？一个更好的词不应该是“插入”吗？

已有`insert()`成员函数采用 type 的值`T`。`emplace()`不同的是，它的参数直接传递给`T`类型的构造函数，并且`T`值在容器中的正确位置就地构造。

> push_back - 为什么不简单地调用 push 或 append？“后退”部分不是隐含的吗？

这很可能与`std::deque`'s平价`push_front()`。

> 为什么 empty() 返回一个布尔值？不应该是 isEmpty() 吗？

C++ 标准库在任何地方都不使用驼峰式大小写。这会违反整体风格。它也没有使用这种`is_foo()`风格。

> 此外， .begin() 和 .end() 似乎不一致。在这种情况下，begin() 是动词，而 end() 是名词。begin 表示开始某事，而它只是返回一个开始的指针。该方法不应该被称为 start 这是一个名词并且与“end”很相配，或者至少开始而不是 begin

我不是以英语为母语的人，但我相信 begin 和 end 都可以解释为名词和动词。

> 为什么 list.unique 不返回一个集合？看起来很奇怪，它不仅修改了数据结构（来自功能世界，将数据变异作为副作用似乎真的很奇怪），而且这里更奇怪，因为 C++ 已经有了集合。我理解独特的错误吗？

`std::list`使用现有的非成员函数 ( ) 进行操作`std::unique()`可能会降低效率。`std::list`还提供了`sort()`成员函数来优化排序。（可以在 O(n * log n) 时间内对双向链表进行排序。）

# ruby-on-rails - 如何在rails中将非www重定向到www（使用apache +乘客）

> ID：15459955
> 
> 赞同：0
> 
> 时间：2013-03-17T10:54:09.357
> 
> 标签：ruby-on-rails, apache, passenger

我从 SO 上的早期线程中获得了以下代码，我已将此代码放在 .htaccess 文件中

```
RewriteEngine On
RewriteCond % ^example.com [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 
```

但是重新启动服务器后，我没有看到非 www 重定向到 www。我还需要做什么？我是否也需要编辑 /etc/apache2/sites-enabled/default 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:13:40.837

尝试

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(example\.com)? [NC]
RewriteRule ^(.*) http://www.example.com/$1 [R=301,L] 
```

取自[这里](http://www.htaccesseditor.com/en.shtml#a_WWW)。

# c# - LinqPad SQL 精简版异常

> ID：15459956
> 
> 赞同：1
> 
> 时间：2013-03-17T10:54:09.433
> 
> 标签：c#, linq, linq-to-sql, sql-server-ce, linqpad

在 LinqPad 中执行以下 Linq 查询时出现异常。

我使用的 Db 是 SQLCE（精简版）

SQLCeException: 为函数指定的参数值无效。[ 参数 # = 1，函数名称（如果已知）= LEN ]

```
from m in Menus 
where m.CategoryName.Length > 2
select m 
```

或者

```
Menus.Where (m => m.CategoryName.Length>5) 
```

有人可以阐明这里发生的事情吗？

这是表[http://i49.tinypic.com/11hs5ub.png](http://i49.tinypic.com/11hs5ub.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:30:54.003

我无法为您提供解决方案，但问题正在发生，因为 LEN 函数不接受 NTEXT 类型的参数。您的 Linq-to-sql 版本生成的 SQL 不正确。您是否可以使用更新版本的 Linq to SQL 和/或 SQL CE？

或者你可以使用实体框架吗？

# r - 如何在 .GlobalEnv 中的 R 中将用户定义函数的输出作为 data.frame 提供

> ID：15459967
> 
> 赞同：0
> 
> 时间：2013-03-17T10:55:11.790
> 
> 标签：r, user-defined-functions, rstudio, rstudio-server

我创建了一个函数'mywsobj'，它接受一个输入和两个输出

用户输入：环境

输出1：一个data.frame名称“wsobj”（对象列表的数据，它们的类，它们的内存使用情况）输出到控制台输出2：对象列表的条形图及其内存使用情况。

到目前为止一切正常，

我的问题1：但是如何在用户指定的输入环境中或至少在 .GlobalEnv 中从函数内部保存该“wsobj” data.frame ？我尝试阅读以下内容：<< 的使用、pos/parent.environment 的使用等，但事情远远超出了我的范围。

我的问题2：是否可以在 R/特别是在 Rstudio 服务器中指定项目特定/用户特定环境？

虽然我在这里的代码可能并不重要，但它在下面：

```
 # creating SOME data
dfAtoZ<- data.frame(LETTERS) 
df1to1Cr <- data.frame(1:10000000)
vec1to1Cr <- as.vector(1:10000000)
mat1to1Cr <- as.matrix(1:10000000)
set.seed<-10
randvec<-runif(1000,min=-100,max=100)
# creating MY function
mywsobj<-function(myenvironmentName)
{#step1 creating vector of object names
wslist <- vector(length=length(ls(myenvironmentName)))
for(i in 1:length(ls(myenvironmentName)))
{wslist[i]<-ls(myenvironmentName)[i]}
# wslist<-cbind(unlist(ls()))
#step2 creating vector of object classes
wsclass <- vector(length=length(wslist))
wsmemKb <- vector(mode="numeric",length=length(wslist))
for(i in 1:length(wslist))
{wsclass[i]<-class(get(wslist[i]))
wsmemKb[i]<- object.size(get(wslist[i]))/1000*1024}
#step4 combining them in a data.frame
wobj<-data.frame(cbind(wslist,wsclass,wsmemKb))
# library(sqldf)
# sqldf("pragma table_info(wobj)") shows col 3(wsmem) still non-numeric
wobj[,3] <- as.numeric( as.character(wobj[,3]) )
# create data to return matrix of memory consumption
objmemsize <- rev(sort(sapply(ls(envir=myenvironmentName), 
                function (object.name)object.size(get(object.name))/1000)))
# draw bar plot
barplot(objmemsize,main="Memory usage by object in myenvironment", 
          ylab="KiloByte", xlab="Variable name", 
            col=heat.colors(length(objmemsize)))
# result <- sqldf("select * from wobj order by 1/wsmemKb")
return(wobj)
#   return(data.frame(myenvironmentName,wobj))
#   return(assign("myname",wobj,envir = .GlobalEnv))
#   attach(wobj,pos=2,"wobj")
return(barplot)
}
# use of mywsobj function
mywsobj(.GlobalEnv)
# saving output of mywsobj function
output<-as.data.frame(mywsobj(.GlobalEnv)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:11:58.560

不确定这是否是您所追求的。但是，您可以使用`$`.

```
my_fun <- function(in.env) {
    # you may want to check if input argument is an environment

    # do your computations
    set.seed(45)
    x <- sample(10)
    y <- runif(10)
    in.env$val <- sum(x*y)
}

my_fun(my.env <- new.env())
ls(my.env)
[1] "val"
my.env$val
# [1] 22.30493 
```

或者，您也可以`assign`按如下方式使用：

```
my_fun <- function(in.env) {
    # you may want to check if input argument is an environment

    # do your computations
    set.seed(45)
    x <- sample(10)
    y <- runif(10)
    assign("val", sum(x*y), envir=in.env)
}

# assign to global environment
my_fun(globalenv())
> val
# [1] 22.30493

# assign to local environment, say, v
v <- new.env()
my_fun(v)
> v$val
# [1] 22.30493 
```

# c++ - 大小为 1 的无效读取，新运算符

> ID：15459968
> 
> 赞同：0
> 
> 时间：2013-03-17T10:55:16.517
> 
> 标签：c++, valgrind

我读了一种特殊格式的二进制文件。我必须使用动态数组来读取大小未知的字符串。一切正常，但 valgrind 中存在错误。\0 的赋值没问题，没有它我试过了。我不知道还有什么问题。

```
int ReadInt(ifstream& i)
{
    int x=0;
    i.read((char*)&x,4);
    return x;
}

bool BINtoCSV ( const char * inFileName, const char * outFileName )
{
    ifstream i(inFileName,ios::binary|ios::in);
    if(i.fail()) return false;
    ofstream o(outFileName,ios::binary|ios::out);
    if(o.fail()) return false;

    char eater[4];
    for(unsigned f=0;f<4;f++)eater[f]='\0';
    int rows=0,inLine=0;
    char c='k';
    i.read(eater,1);//H
    i.read(eater,4);//num
    i.read((char*)&rows,4);//rows
    i.read((char*)&inLine,4);//inlines

    for(int a=0;a<rows;a++){
        i.read((char*)&c,1);
        if(c!='R') {if(a==0){i.close(); o.close(); return true;}i.close(); o.close();
            return false;}
        i.read(eater,4);
        for(int b=0;b<inLine;b++)
        {
            for(unsigned f=0;f<4;f++)eater[f]='\0';
            i.read((char*)&c,1);
            if(c=='I') { o<<ReadInt(i)<<(!((b+1)%inLine)?'\n':';');}
            else if(c=='S')
            {
                int l=0; i.read((char*)&l,4);
                char* block=new char[l];
                for(int a=0;a<l;a++) block[a]='\0';
                i.read(block,l);
                o<<block<<(!((b+1)%inLine)?'\n':';'); 
                delete [] block;
            }

            else 
            {
                i.close(); 
                o.close(); 
                return false;
            }
        }
    }

    i.close();
    o.close();
    return true;
} 
```

有来自 valgrind 的日志示例。

```
Invalid read of size 1
at 0x4C2BFB4: strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
by 0x4EC62E0: std::basic_ostream<char, std::char_traits<char> >& std::operator<<   
<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char 
const*) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
by 0x401841: BINtoCSV(char const*, char const*) (in /home/ondrnovy/Plocha/a.out)
by 0x401EA7: main (in /home/ondrnovy/Plocha/a.out)
Address 0x5a07683 is 0 bytes after a block of size 3 alloc'd
at 0x4C2AC27: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-
amd64-linux.so)
by 0x40179F: BINtoCSV(char const*, char const*) (in /home/ondrnovy/Plocha/a.out) 
by 0x401EA7: main (in /home/ondrnovy/Plocha/a.out) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:08:44.190

在这部分

```
char* block=new char[l];
for(int a=0;a<l;a++) block[a]='\0';
i.read(block,l);
o<<block<<(!((b+1)%inLine)?'\n':';'); 
```

您尝试使用需要 C 样式字符串但未正确以零结尾`block`的运算符编写。`<<``block`

运算符将用于`strlen`查找字符串的结尾，但没有结尾，它在`buffer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:08:32.553

我不熟悉 GNU 的 amd64 标准库实现，但我在基于 ARM 的平台上看到了来自 Valgrind 的相同类型的警告。`strlen`他们在那里使用的实现经过优化，每次迭代处理一个字（4 个字节）（[这里是有](http://www.netmite.com/android/mydroid/bionic/libc/arch-arm/bionic/strlen.c)问题的代码）。

与此等效的 C 可能是这样的：

```
uint32_t dat, *p;
uint32_t temp;
int len = 0;

p = (uint32_t*)inputstring;
dat = *p++;
len -= (int)p;

// The only case where ((x-1) & 0x80) & ~x will be non-zero is
// if x == 0\. So loop as long as the result is zero, i.e. no
// word has been loaded that contains a NUL-byte.
do {
    temp = dat - 0x01010101;
    temp &= 0x80808080;
    temp &= ~dat;
    if (!temp) dat = *p++;
} while (!temp);

len += (int)p;

if (dat & 0xFF) {
    len++;
    if (dat & 0xFF00) {
        len++;
        if (dat & 0xFF0000) {
            len++;
        }
    }
}

return len; 
```

我只能猜测`new`在该平台上使用的运算符实现将`char`数组填充为 4 个字节的倍数，以确保此优化安全。但是 Valgrind 在检查越界问题时可能并不关心这一点。

# c++ - 向量 被转换为向量 >

> ID：15459971
> 
> 赞同：0
> 
> 时间：2013-03-17T10:55:22.663
> 
> 标签：c++, vector, double, allocator

我正在创建一个双精度向量，然后尝试将其添加到我定义的对象中。问题是我`vector<double>`正在以`vector<double, allocator<double>>`某种方式转换为。谁能明白为什么？

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
using namespace std;

double stringToDouble( const std::string& s )
{
  std::istringstream i(s);
  double x;
  if (!(i >> x))
    return 0;
  return x;
}

int main() {
    ifstream userDefine("userDefine.csv");
    string token, line;
    stringstream iss;
    int count = 0;
    vector<double> prices;

    while ( getline(userDefine, line) )
    {
        iss << line;
        while ( getline(iss, token, ',') )
        {
             double temp = stringToDouble(token);
             prices.push_back(temp);
        }
    }
    return 0;
} 
```

然后，当添加到我的对象时，我收到以下错误：

> 没有匹配的调用函数`generatorTemplate::generatorTemplate(std::string&, std::vector<double, std::allocator<double> >&......`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T10:58:28.220

`std::vector<T>`实际上是一个[`template < class T, class Alloc = allocator<T> > class vector;`](http://en.cppreference.com/w/cpp/container/vector)。如您所见，它具有分配器类型参数和默认值。您正在观察的内容是预期的。没有什么不妥。

# svn - 在 Jenkins 中配置声纳插件

> ID：15459972
> 
> 赞同：0
> 
> 时间：2013-03-17T10:55:24.567
> 
> 标签：svn, jenkins, sonarqube

我使用 Jenkins 作为 SVN 的持续集成工具，并配置了 SONAR 来分析代码。

我安装了 SONAR 服务器并在 Jenkins 中配置了 SONAR URL。

但是，我看不到我的代码库与 SONAR 相关联。当我从我在 Jenkins 中创建的 JOB 中单击声纳链接时，我可以看到 SONAR 页面，但看不到我的包/类。

有什么想法/建议吗？

# python - “ascii”编解码器无法对位置 0-4 中的字符进行编码：序数不在范围内（128）

> ID：15459981
> 
> 赞同：0
> 
> 时间：2013-03-17T10:56:15.620
> 
> 标签：python, twitter

hiee ima newbee 在 python 领域请帮助..

这是我得到的错误

“ascii”编解码器无法对位置 0-4 中的字符进行编码：序数不在范围内（128）

这是我的代码

```
import json
import urllib
import difflib

def main():
    f1 = open('tweet-stream.json','r')    
    Outputfile =open('newdata6.ods', 'w')
    count = 0

    for line in f1:
        d = json.loads(line)
        lang =  d["user"]["lang"]
        status_count = d["user"]["statuses_count"]
        id1= d['user']['id']
        name=d['user']['location']
        print >>Outputfile,"Language: "+ ','+ lang +','+ "Status_Count" +','+str(status_count)+','+str(id1)+','+str(name)

if __name__ == "__main__":    
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:05:48.130

Python 中 Unicode 的一个很好的指南在这里： http: [//nedbatchelder.com/text/unipain.html](http://nedbatchelder.com/text/unipain.html)

遵循该演示文稿中的指南将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:24:20.167

不是一个完整的答案，但尝试替换

```
 print >>Outputfile,"Language: "+ ','+ lang +','+ "Status_Count" +','+str(status_count)+','+str(id1)+','+str(name) 
```

经过

```
 print >>Outputfile,"Language: "+ ','+ lang +','+ "Status_Count" +','+unicode(status_count)+','+unicode(id1)+','+unicode(name) 
```

甚至这样做：

```
print >>Outputfile, u"Language: ,%s,Status_Count,%s,%s,%s" % (lang, status_count, id1, name) 
```

甚至更好：

```
text = u"Language: ,%(lang)s,Status_Count,%(count)s,%(id)s,%(name)s\n" % {
      "lang": lang,
      "count": status_count,
      "id": id1,
      "name": name
}

OutputFile.write(text) 
```

告诉我们错误所在的行也是一件好事。据我所知，在您尝试使用“str”函数将数据转换为 ascii 时可能会发生错误。最有可能的是，json 返回一个 unicode 字符串，它包含非 ascii 关键字。

另外，您应该将变量保留为小写。大写用于类名等。而不是`Outputfile`，你应该写`output_file`

# iphone - 从两个分组的 UITableView 单元格中删除内部分隔符

> ID：15459982
> 
> 赞同：2
> 
> 时间：2013-03-17T10:56:26.007
> 
> 标签：iphone, ios, cocoa-touch, uitableview, uikit

我有一个`UITableView`包含两个单元格的分组。我`separatorColor`为表格视图设置了一个自定义，但想去掉两个单元格之间的内部分隔符，使它看起来像一个单元格。我想将外部分隔器保留在单元格的边缘。

我现在拥有的：

![具有两个单元格和一个可见分隔符的分组表视图](../Images/8d851df717d2b0f526db5397c8283ee4.png)

我想达到的目标：

![具有两个单元格且没有可见分隔符的分组表视图](../Images/a2496b20ca5f433554a64d97ac02d062.png)

这可能吗？我的项目针对 iOS 5.0 及更高版本。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:08:08.217

尝试更改表格视图的分隔符样式。

```
tableView.separatorColor = [UIColor clearColor]; 
tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:28:04.590

这必须是动态表吗？你提到它只有两个单元格..也许你可以看看让表格/部分成为一个具有更大行高的单元格？或者根本不把它放在桌子上？而是使用 UIView：

```
#import <QuartzCore/QuartzCore.h>

-(void)viewDidLoad
{
    [myview.layer setBorderWidth:1];
    [myview.layer setBorderColor:[[UIColor lightGrayColor] CGColor]];
    [myView.layer setCornerRadius:20];
} 
```

上面的代码将为您提供您想要的任何视图的圆角，只需换出`myview`变量即可。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T11:05:49.543

尝试添加

```
[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone]; 
```

或者你可以添加

```
UIView *backgroundVie = [[UIView alloc] init];
backgroundVie.backgroundColor = [UIColor clearColor];
    cell.backgroundView=backgroundVie ; 
```

# android - Phonegap 安卓应用超链接页面加载

> ID：15459986
> 
> 赞同：0
> 
> 时间：2013-03-17T10:57:23.097
> 
> 标签：android, html, cordova, jquery-mobile, hyperlink

我正在使用 HTML5 和 Jquery 移动框架开发 android 本机应用程序，我使用`phonegap build`功能来构建我的应用程序`apk`文件，无论如何我的应用程序可以在任何 android 设备上运行良好，

我的问题是我在我的应用程序中添加了一个超链接，例如：

```
<a href="http://google.com"> tap me</a> 
```

当我们点击这个超链接时，一个新站点将打开相同的窗口，但是在点击和新站点索引页面打开时间之间有太多延迟，几乎 5 秒，我认为这是因为加载新网页，这 5 秒我的应用程序仍然...所以用户不知道是否新页面加载或任何错误...我需要`gif`在这 5 秒间隙之间放置加载文本或动画图像，例如 jquery 移动页面加载...

任何的想法。？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:40:22.977

如果您使用的是 jQuery Mobile，则可以使用页面加载小部件在新数据/页面加载时显示消息或微调器

[http://jquerymobile.com/demos/1.2.0/docs/pages/loader.html](http://jquerymobile.com/demos/1.2.0/docs/pages/loader.html)

```
<a class="show-page-loading-msg" href="http://google.com">Tap me</a> 
```

为此链接（以及其他类似链接）添加事件处理程序：

```
$(document).on('tap', '.show-page-loading-msg', function () {
    $.mobile.loadingMessage();
}); 
```

# php - PHP 和 Mysql 的编码陷阱

> ID：15459993
> 
> 赞同：0
> 
> 时间：2013-03-17T10:58:08.967
> 
> 标签：php, mysql, character-encoding, security

使用web漏洞扫描器解析日志后发现这个

```
level Warning code 1366 message Incorrect string value: '\xDE~\xC7\x1FY\x00...' for column 'act_parametres' at row 1 
```

字符串是“\xDE~\xC7\x1FY\x00”

这是一个片段以显示我的理解

```
<?php

mysql_connect('localhost', 'root', '');
mysql_select_db('testsunitaires');
mysql_query('SET NAMES utf8mb4');
mysql_query("set collation_connection='utf8mb4_unicode_ci'");
mysql_query("set collation_database='utf8mb4_unicode_ci'");
mysql_query("set collation_server='utf8mb4_unicode_ci'");

mysql_query('CREATE TABLE `encodage` (`chaine` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci');

$s = "\xDE~\xC7\x1FY\x00";
$sql = sprintf("INSERT INTO encodage SET chaine='%s'", mysql_real_escape_string($s));
mysql_query($sql);
echo "$s => " . htmlentities($s, NULL, 'ISO-8859-1') . "\n";
echo "$s => " . htmlentities($s, NULL, 'UTF-8') . "\n";
echo mb_detect_encoding($s, 'auto', true) . "\n";

$req = mysql_query('SHOW WARNINGS');
while($a = mysql_fetch_array($req)) var_dump($a); 
```

它的输出是

```
�~�Y => &THORN;~&Ccedil;Y
�~�Y => 

array(6) {
["Level"]=> string(7) "Warning"
["Code"]=> string(4) "1366"
["Message"]=> string(73) "Incorrect string value: '\xDE~\xC7\x1FY\x00' for column 'chaine' at row 1"
} 
```

ISO-8859-1 中的 htmlentities() 运行良好，但在 UTF-8 中却不行（而且我的应用程序是完整的 UTF-8）。mb_detect_encoding() 无法解析字符串。

这个字符串显然是一种攻击方式，但最好的答案是什么？只是丢弃一个编码不好的字符串？有没有办法清理字符串？我的目标是根本没有 Mysql 警告，但不要错过来自配置错误的浏览器的信息，该浏览器试图将 latin1 与 UTF-8 网站“对话”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:14:57.543

1.  不要使用`mysql_query('SET NAMES utf8mb4');`. 这会通知服务器您将向其发送 UTF-8，但它不会将客户端`mysql_`扩展设置为使用 UTF-8。这意味着`mysql_real_escape_string`根据错误的字符集转义数据，可能导致严重的可利用漏洞。

    改为使用[`mysql_set_charset`](http://php.net/mysql_set_charset)。

2.  如果一个值不是有效的 UTF-8，那么它不是有效的 UTF-8。您不必担心“浏览器损坏”。实际上没有。*如果您的服务器以未知/损坏的编码从客户端接收数据，您将拒绝它。你不能用它做任何其他事情。检查[`mb_check_encoding`](http://php.net/mb_check_encoding)数据是否以您期望的编码进行编码，`400 Bad Request`如果不是，则抛出错误。另请参阅[在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)。

3.  `mysql_`已弃用，请使用 mysqli 或 PDO。

[* 某些较旧的 IE 版本在某些情况下倾向于忽略`accept-charset`表单上的声明。这可以通过嵌入一个字符来解决，该字符只能以隐藏字段中的一种 Unicode 编码形式编码，比如✔。]

# c++ - 需要有关此 C++ 代码的帮助

> ID：15459994
> 
> 赞同：0
> 
> 时间：2013-03-17T10:58:20.783
> 
> 标签：c++

我是初学者程序员并试图让这个代码工作：

```
#include <iostream>
#include <vector>
using namespace std;
template <typename T>
T min(vector<T>vec) {
    T x=vec[0];
    int index;
    for (int i=0; i<vec.size(); i++) {
        if (vec[i]<x) { x=vec[i]; index=i; }
    }
    return index;
}
template <typename T>
void printVec (vector<T>v) {
    for (int i=0; i<v.size(); i++) 
        cout<<v[i]<<endl; 
}
template <typename T>
void selectSort(vector<T>&first) {
vector<T>second;
while(first.size()!=0) {
    second.push_back(first[min(first)]);
    first.erase(first.begin()+min(first));
  }
      first=second;
}

int main() {
    int Mas[] = { 7, 15, 14, 12, 99, 180, 197, 567, 123, -101, 32, 144, 156, 177, 4, -17, -88, 18, 99, 143, -90 };
    int dim = sizeof(Mas)/sizeof(int);
    vector<int>v (&Mas[0], &Mas[dim]);
    int m=min(v);
    selectSort(v);
    printVec(v);

    cin.get();
    return 0; } 
```

由于某些原因，

```
 while(first.size()!=0) { 
```

循环似乎不起作用。有人可以帮忙吗？对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:23:09.797

在`min`中，变量`index`未初始化。

当向量中的第一个元素是最小的元素时，这将导致`min`返回一个随机垃圾值。

将其初始化为 0（这是您的默认最小值的索引）。

当编译器警告你代码有问题时，你应该首先解决这个问题，甚至在你运行程序之前。

# python - 将整数列表传递给python

> ID：15459997
> 
> 赞同：30
> 
> 时间：2013-03-17T10:58:25.790
> 
> 标签：python, command-line, argparse

我想将 2 个整数列表作为输入传递给 python 程序。

例如，（从命令行）

```
python test.py --a 1 2 3 4 5 -b 1 2 
```

此列表中的整数范围为 1-50，列表 2 是列表 1 的子集。
有什么帮助/建议吗？是`argparse`正确的模块吗？使用它有什么顾虑吗？

我试过了 ：

```
import argparse
if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('--a', help='Enter list 1 ')
    parser.add_argument('--b', help='Enter list 2 ')
    args = parser.parse_args()
    print (args.a) 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-17T11:33:00.227

`argparse`支持[`nargs`](http://docs.python.org/dev/library/argparse.html#nargs)参数，它告诉你它吃了多少个参数。当`nargs="+"`它接受一个或多个参数时，您可以传递`-b 1 2 3 4`，它将作为列表分配给`b`参数

```
# args.py
import argparse

p = argparse.ArgumentParser()

# accept two lists of arguments
# like -a 1 2 3 4 -b 1 2 3
p.add_argument('-a', nargs="+", type=int)
p.add_argument('-b', nargs="+", type=int)
args = p.parse_args()

# check if input is valid
set_a = set(args.a)
set_b = set(args.b)

# check if "a" is in proper range.
if len(set_a - set(range(1, 51))) > 0: # can use also min(a)>=1 and max(a)<=50
    raise Exception("set a not in range [1,50]")

# check if "b" is in "a"
if len(set_b - set_a) > 0:
    raise Exception("set b not entirely in set a")

# you could even skip len(...) and leave just operations on sets
# ... 
```

所以你可以运行：

```
$ python arg.py  -a 1 2 3 4 -b 2 20
Exception: set b not entirely in set a

$ python arg.py  -a 1 2 3 4 60 -b 2
Exception: set a not in range [1,50] 
```

这是有效的：

```
$ python arg.py  -a 1 2 3 4 -b 2 3 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-17T11:00:41.140

您可以将它们作为字符串传递，而不是转换为列表。您可以使用[argparse](http://docs.python.org/dev/library/argparse.html)或[optparse](http://docs.python.org/2/library/optparse.html)。

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--l1', type=str)
parser.add_argument('--l2', type=str)
args = parser.parse_args()
l1_list = args.l1.split(',') # ['1','2','3','4'] 
```

例子：`python prog.py --l1=1,2,3,4`

此外，作为一条线，您可以传递类似 1-50 的内容，然后在“-”上拆分并构建范围。像这样的东西：

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--l1', type=str, help="two numbers separated by a hyphen")
parser.add_argument('--l2', type=str)
args = parser.parse_args()
l1_list_range = xrange(*args.l1.split('-')) # xrange(1,50)
for i in l1_list_range:
    print i 
```

例子：`python prog.py --l1=1-50`

逻辑我认为你可以自己写。:)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-23T17:57:52.277

这对我有用：

`parser.add_argument('-i', '--ids', help="A comma separated list IDs", type=lambda x: x.split(','))`

**编辑：**

我刚刚意识到这实际上并不能回答所提出的问题。**Jakub**有正确的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T11:25:02.397

它们的工作方式[`optparse`](http://docs.python.org/2/library/optparse.html)和[`argparse`](http://docs.python.org/2/library/argparse.html#module-argparse)工作方式是它们从命令行读取参数，参数由空格分隔，因此，如果您想通过命令行接口输入整数列表，[`optparse`](http://docs.python.org/2/library/optparse.html)或者[`argparse`](http://docs.python.org/2/library/argparse.html#module-argparse)- 您可以通过删除空格来执行此操作，或者通过用 包围你的论点`"`，例如：

```
> my_script.py --a "1 2 3 4 5" --b "1 2" 
```

或者：

```
> my_script.py --a 1,2,3,4,5 --b  1,2 
```

然后，您的脚本需要将这些输入转换为实际列表。

使用[`argparse`](http://docs.python.org/2/library/argparse.html#module-argparse)语法（与 for 非常相似[`optparse`](http://docs.python.org/2/library/optparse.html)）：

```
# with spaces and "
a_lst = [i for i in args.a.split(' ')] 
b_lst = [i for i in args.b.split(' ')]

# without spaces and ,
a_lst = [i for i in args.a.split(',')] 
b_lst = [i for i in args.b.split(',')] 
```

* * *

另一种方法是导入您要运行的模块并将列表对象传递给处理您的代码的类，或者使用while循环和[`raw_input`](http://docs.python.org/2/library/functions.html#raw_input)/[`input`](http://docs.python.org/2/library/functions.html#input)来收集所需的列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T11:25:06.787

如果*唯一*的参数是列表和分隔符，您可以相对简单地做到这一点：

```
sa = sys.argv.index('-a')
sb = sys.argv.index('-b')
lista = [int(i) for i in sys.argv[sa+1:sb]]
listb = [int(i) for i in sys.argv[sb+1:]] 
```

添加验证很容易：

```
aval = [i for i in lista if i>1 and i<50]
if len(aval) < len(lista):
    print 'The -a list contains invalid numbers.'
bval = [i for i in listb if i>1 and i<50]
if len(bval) < len(listb):
    print 'The -b list contains invalid numbers.' 
```

生成帮助消息：

```
if sys.argv[1] in ['-h', '-H'] or len(sys.argv) == 1:
    print "Usage: <name> -a [list of integers] -b [list of integers]" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-29T18:40:49.813

为了完整起见，只需添加这个。我很惊讶我没有看到这种方法。

```
from argparse import Action, ArgumentParser

class CommaSeparatedListAction(Action):
    def __call__(self, parser, namespace, values, option_string=None):
        setattr(namespace, self.dest, values.split(','))

parser = ArgumentParser()
parser.add_argument('-l', action=CommaSeparatedListAction)
print(parser.parse_args('-l a,b,c,d'.split()))

# Namespace(l=['a', 'b', 'c', 'd']) 
```

这只是一个基本示例，但您也可以以某种方式添加验证或转换值，例如将它们强制为大写。

```
from argparse import Action, ArgumentParser

class UppercaseLetterCommaSeparatedListAction(Action):
    def __call__(self, parser, namespace, values, option_string=None):
        letters = values.split(',')
        for l in letters:
            self._validate_letter(parser, l)
        setattr(
            namespace,
            self.dest,
            list(map(lambda v: v.upper(), letters))
        )

    def _validate_letter(self, parser, letter):
        if len(letter) > 1 or not letter.isalpha():
            parser.error('l must be a comma separated list of letters')

parser = ArgumentParser()
parser.add_argument('-l', action=UppercaseLetterCommaSeparatedListAction)
print(parser.parse_args('-l a,b,c,d'.split()))

# Namespace(l=['A', 'B', 'C', 'D'])

parser = ArgumentParser()
parser.add_argument('-l', action=UppercaseLetterCommaSeparatedListAction)
print(parser.parse_args('-l a,bb,c,d'.split()))

# usage: list.py [-h] [-l L]
# list.py: error: l must be a comma separated list of letters

parser = ArgumentParser()
parser.add_argument('-l', action=UppercaseLetterCommaSeparatedListAction)
print(parser.parse_args('-l a,1,c,d'.split()))

# usage: list.py [-h] [-l L]
# list.py: error: l must be a comma separated list of letters 
```