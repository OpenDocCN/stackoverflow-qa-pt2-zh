# StackOverflow 问答 15630000-15630999

# oracle - 将Oracle中的整个表类型插入没有索引的数据库中

> ID：15630002
> 
> 赞同：-2
> 
> 时间：2013-03-26T05:28:06.030
> 
> 标签：oracle, indexing

我有一个新问题必须解决！我创建了一个表作为类型

```
TYPE ebRBKTable IS TABLE OF EBTDCCRBK%ROWTYPE INDEX BY PLS_INTEGER;
rbkTable        ebRBKTable; 
```

然后通过以下语句将一些数据插入表中

```
rbkTable(InsertTable).BDADDUSERID             := 'FT_RBK_TDCC'; 
```

最后我用以下语句插入

```
FORALL i IN 1..InsertTable - 1
INSERT INTO EBTDCCRBK VALUES rbaTable(i); 
```

我想问一下是否有一些方法可以一次性插入所有类型`count(i)`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:25:09.310

语句本身不是`forall`循环。

它的作用是将数组的所有元素一次性发送到 SQL 引擎，这使 SQL 能够插入行，而无需返回 PL/SQL 引擎来获取更多数据。

换句话说`FORALL`，删除了常规 FOR 循环中的上下文切换。

我们可以用一个简单的跟踪来证明这一点。考虑：

```
SQL> alter session set sql_trace=true;

Session altered.

SQL> declare
  2    TYPE ebRBKTable IS TABLE OF EBTDCCRBK%ROWTYPE INDEX BY PLS_INTEGER;
  3    rbkTable        ebRBKTable;
  4  begin
  5
  6    for idx in 1..100000
  7    loop
  8      rbkTable(idx).BDADDUSERID := dbms_random.string('a', 10);
  9    end loop;
 10
 11    forall idx in 1..rbkTable.count
 12    insert into EBTDCCRBK values rbkTable(idx);
 13    commit;
 14
 15  end;
 16  / 
```

在我们看到的 SQL 跟踪中：

```
INSERT INTO EBTDCCRBK
VALUES
 (:B1 )

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.00       0.00          0          0          0           0
Execute      1      0.07       0.07          1        724       3066      100000
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total        2      0.07       0.07          1        724       3066      100000 
```

与正则循环：

```
SQL> alter session set sql_trace=true;

Session altered.

SQL> declare
  2    TYPE ebRBKTable IS TABLE OF EBTDCCRBK%ROWTYPE INDEX BY PLS_INTEGER;
  3    rbkTable        ebRBKTable;
  4  begin
  5
  6    for idx in 1..100000
  7    loop
  8      rbkTable(idx).BDADDUSERID := dbms_random.string('a', 10);
  9    end loop;
 10
 11    for idx in 1..rbkTable.count
 12    loop
 13      insert into EBTDCCRBK values rbkTable(idx);
 14    end loop;
 15    commit;
 16
 17  end;
 18  /

PL/SQL procedure successfully completed.

SQL> alter session set sql_trace=false; 
```

跟踪文件显示：

```
INSERT INTO EBTDCCRBK
VALUES
 (:B1 )

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.00       0.00          0          0          0           0
Execute 100000      3.33       3.24          1        689     104216      100000
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total   100001      3.33       3.24          1        689     104216      100000 
```

请注意，该`FORALL`版本中的跟踪文件只执行了一次，即 SQL 引擎一键完成了工作。在`FOR LOOP`变体中，SQL 引擎有 100k 次执行，并使用更多 CPU 来完成相同的工作（因为它必须执行大量单个操作，并且会话是从 pl/sql->sql 为每个插入的行进行上下文切换.

# javascript - Javascript cookie 持续时间

> ID：15630006
> 
> 赞同：1
> 
> 时间：2013-03-26T05:28:21.377
> 
> 标签：javascript, cookies

我正在使用这个函数来读取和写入一个带有一点 php 的 cookie，并且它工作正常。但我需要在其中添加 7 天的持续时间。任何人都可以让我知道我可以在哪里以及如何添加它，因为我是 javascript 的初学者并且不知道更新此代码的任何线索。

```
 <script language="javascript">
        writeCookie();
        function writeCookie()
        {
            the_cookie = document.cookie;
            if(the_cookie)
            {
                the_cookie = "PixelRatio="+window.devicePixelRatio+";"+the_cookie;
                document.cookie = the_cookie;

                if(window.devicePixelRatio > 1)
                {
                    location = '<?php echo $_SERVER['PHP_SELF']?>';
                }
            }
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:17:09.287

您可以使用以下任一**属性来设置 cookie 的持续时间**。

**Expires** - cookie 过期并被丢弃的日期。例如，今天是 2013 年 3 月 26 日，如果要设置持续时间为 7 天，代码如下
`document.cookie="acookie=avalue; expires=Tue, 02 Apr 2013 23:59:59 GMC";`

**Max-Age** - 一个数字，表示到期前的秒数。我们必须计算几天的秒数。7天持续时间的例子是（60*60*24*7），代码如下

```
document.cookie="acookie=avalue; max-age=604800 "; 
```

**注意**：某些浏览器不支持 Max-Age 属性。在支持它的浏览器上，如果同时设置了 Max-Age 和 Expires 属性，则 Max-Age 优先于 Expires。

# google-apps-script - 如何在不向新所有者发送电子邮件通知的情况下更改 google docs 文件所有者

> ID：15630013
> 
> 赞同：2
> 
> 时间：2013-03-26T05:28:58.973
> 
> 标签：google-apps-script, google-drive-api

我正在使用 Drive API 和 Google Apps Script UrlFetchApp 来更改文件所有者。它工作得很好，它会为每个文件向新所有者发送一封电子邮件通知。如何隐藏此电子邮件通知？

这是我的部分代码片段

```
var base = 'https://docs.google.com/feeds/';
var fetchArgs = googleOAuth_('docs', base);
fetchArgs.method = 'POST';

var rawXml = "<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007'>"
+"<category scheme='http://schemas.google.com/g/2005#kind' "
+"term='http://schemas.google.com/acl/2007#accessRule'/>"
+"<gAcl:role value='owner'/>"
+"<gAcl:scope type='user' value='"+newOwnerEmail+"'/>"
+"</entry>";

fetchArgs.payload = rawXml;
fetchArgs.contentType = 'application/atom+xml';
var url = base + encodeURIComponent(oldOwnerEmail) + '/private/full/'+fileOrFolderId+'/acl?v=3&alt=json';
var content = UrlFetchApp.fetch(url, fetchArgs).getContentText(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:04:35.390

您必须添加`sendNotificationEmails=false`到您的请求以修改文件的权限

# php - 警报消息显示在新窗口中

> ID：15630017
> 
> 赞同：0
> 
> 时间：2013-03-26T05:29:21.587
> 
> 标签：php, javascript, alert

如果条件失败，我想显示警报消息。所以我使用以下代码来显示消息

```
print '<script type="text/javascript">';
print 'alert("You cannot leave field empty")';
print '</script>'; 
```

它工作正常，但问题是，它在以空白页为背景的新窗口中显示消息。我需要在同一窗口中显示此消息。请帮助找出一种方法来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:37:38.740

在加载时显示

```
print '<script type="text/javascript">';
    print 'window.onload = function(){'
    print 'alert("You cannot leave field empty")';
    print '};'
print '</script>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:45:21.200

我认为您需要在表单的同一页面中执行类似的操作，并且不要将表单数据重定向到另一个页面......（我想您正在尝试通过警报消息验证表单）：

```
<?php
    if(isset($_POST) && count($_POST)){
        // do some validation for data...

        if(!valid){
               print '<script type="text/javascript">';
               print 'alert("You cannot leave field empty")';
               print '</script>';
        }

    }

    // as it's the same page of your form...all the code of form and other stuff goes           here....
    ?>

    <form action="" type="POST">
             <!-- all inputs and elements of form
    </form 
```

这样，警报将显示在表单的同一页面中......如果提交验证错误......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:35:35.203

将代码包含在 if 条件中。然后将其放在要显示警报的同一页面中。

```
if (condition) {
  print '<script type="text/javascript">';
  print 'alert("You cannot leave field empty")';
  print '</script>'; 
} else {
   //Normal flow
} 
```

# php - 将字符串中的'&'从xcode传递给php？

> ID：15630019
> 
> 赞同：0
> 
> 时间：2013-03-26T05:29:54.803
> 
> 标签：php, ios, objective-c, xcode

我正在使用 iphone 中的 web 服务进行编程，该服务访问 mysql 数据库，其中包含“移动和游戏解决方案”等值。我从用户的字符串中获取这个值并传递给 php 文件。但是 php 不接受带有 '&' 的字符串。它只接受“移动”。帮我。我在 xcode 中的代码是：

```
strEditbuunit = [labeditbunit.text stringByReplacingOccurrencesOfString:@" " withString:@"+"];

NSString *Updpost =[NSString stringWithFormat:@"buname=%@",strEditbuunit];

UpdLTRhostStr = @"http://localhost/practice/ltrupdate.php?";

UpdLTRhostStr = [UpdLTRhostStr stringByAppendingString:Updpost];  
UpdLTRdataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:UpdLTRhostStr]];
UpdLTRserverOutput = [[NSString alloc] initWithData:UpdLTRdataURL encoding: NSASCIIStringEncoding];

<?php
$con = mysql_connect("192.168.0.82","android","android");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("androidlogin", $con);
$buname = $_GET["buname"];
$retval1 = mysql_query( "SELECT code_id FROM typedescs where name = '$buname'" );
    while($row1 = mysql_fetch_assoc($retval1))
    {
        $bu_id = $row1['code_id'];

    }
 echo $buname;
mysql_close($con);
?> 
```

当我回显 buname 时，由于“&”，它给了我“移动”而不是“移动和游戏解决方案”。请帮助我如何将带有特殊字符的字符串从 xcode 传递给 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:31:41.033

它与PHP无关。您没有在 URL 中引用查询参数。

```
UpdLTRhostStr = @"http://localhost/practice/ltrupdate.php?";
UpdLTRhostStr = [UpdLTRhostStr stringByAppendingString:Updpost]; 
```

这是一种方法：

```
UpdLTRhostStr = [NSString
    stringWithFormat:@"http://localhost/practice/ltrupdate.php?buname=%@",
    CFURLCreateStringByAddingPercentEscapes(
        kCFAllocatorDefault, (CFStringRef) buunit, NULL,
        CFSTR(":/?#[]@!$&’()*+,;="), kCFStringEncodingUTF8)]; 
```

不要忘记，在将字符串传递给 MySQL 之前，您也需要在 PHP 端对字符串进行转义。正如 Marc B 指出的那样，您有一个严重的安全漏洞。

# ruby - 提交第二个任务时，Delayed_job 进入繁忙循环

> ID：15630020
> 
> 赞同：0
> 
> 时间：2013-03-26T05:30:03.803
> 
> 标签：ruby, ruby-on-rails-3, delayed-job

我正在为一些后台服务运行延迟作业，直到最近，所有这些服务都是孤立运行的，例如发送电子邮件、写报告等。

我现在需要一个delayed_job，作为它的最后一步，来提交另一个delayed_job。

1.  delay.deploy() - 当delayed_job 运行它时，它会触发一个部署操作，最后一步是...
2.  delay.update_status() - 当delayed_job 运行这个作业时，它会检查我们开始的部署的状态。如果部署仍在进行中，我们再次调用 delay.update_status()，如果部署已停止，我们将最终部署状态写入数据库记录。

第 1 步工作正常 - 5 秒后，delayed_job 启动部署，开始部署，然后调用 delay.update_status()。

但是在这里，update_status() 不是在 5 秒内启动，delayed_job 进入了一个繁忙的循环，触发了一堆 update_status 调用，并且在没有暂停的情况下非常努力地循环。

我可以看到所有这些调用都填满了日志，服务器变慢了，直到达到 update_status 的结束条件（部署最终成功或失败），然后一切又恢复平静。

我是否错误地使用了 Delayed_Job::delay()，我是否缺少此用例的基本原则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T05:54:22.670

好的，事实证明这是“预期的行为” - 如果您已经在为延迟作业运行的代码中，并且您再次调用 .delay() 而不指定延迟，它将立即运行。您需要添加参数run_at：

```
 delay(queue: :deploy, run_at: 10.seconds.from_now).check_status 
```

查看[google 群组中的讨论](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/delayed_job/rG6HIXHSFuc)

# c++ - Subset_sum_problem 中的所有子集

> ID：15630022
> 
> 赞同：3
> 
> 时间：2013-03-26T05:30:14.027
> 
> 标签：c++, algorithm

我一直在解决[Subset_sum_problem](http://en.wikipedia.org/wiki/Subset_sum_problem)。

给定一组整数（S），需要计算总和等于给定目标（T）的非空子集。

**示例**：给定集合，S{4, 8, 10, 16, 20, 22} 目标，T = 52。

**约束**：集合 S 的元素 N 的数量限制为 8。因此，NP 时间解是可以接受的，因为 N 的上限很小。时间和空间的复杂性并不是真正的问题。

**输出**：

总和正好等于 T=52 的可能子集是：

{10、20、22}

{4、10、16、22}

Wiki 和其他一些页面中给出的解决方案试图检查是否存在这样的子集（是/否）。

如上例所述，计算所有可能的子集并没有真正的帮助。

[此链接](http://www.cs.utsa.edu/~wagner/CS3343/dp/subsetsum.html)上的动态编程方法提供了单个这样的子集***，但我需要所有这些子集。***

一种明显的方法是使用蛮力计算所有 2^N 组合，但这将是我最后的手段。

我正在寻找一些程序示例（最好是 C++）或算法来计算这些带有插图/示例的子集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:34:46.633

如果 N <= 8 为什么不使用 2^n 解决方案？只有 256 种可能性会非常快

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T05:56:53.940

当您为子集和问题构建动态规划表时，您会像这样初始化其中的大部分（取自问题中引用的 Wikipedia 文章）：

    Q(i,s) := Q(i - 1,s) 或 (xi == s) 或 Q(i - 1,s - xi)

这会将表格元素设置为 0 或 1。

这个简单的公式不能让您区分可以给您 1 的几种情况。

但是您可以改为将 table 元素设置为可以区分这些情况的值，如下所示：

    Q(i,s) := {Q(i − 1,s) != 0} *** 1** + {xi == s} *** 2** + {Q(i − 1,s − xi) != 0} ***4**

然后你可以从最后一个元素开始遍历表格。在每个元素处，元素值将告诉您是否有零、一条或两条可能的路径及其方向。所有路径都会为您提供总和为 T 的所有数字组合。最多为 2 ^N。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T05:38:47.457

只是蛮力的。如果 N 限制为 8，那么您的子集总数为 2^8，即只有 256 个。它们给出限制是有原因的。

您可以将集合包含表示为二进制字符串，其中每个元素要么在集合中，要么在集合外。然后你可以只增加你的二进制字符串（可以简单地表示为一个整数），然后使用按位 & 运算符确定哪些元素在集合中。一旦你数到了 2^N，你就知道你已经完成了所有可能的子集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T05:40:30.697

最好的方法是使用动态编程方法。但是，动态编程只是回答子集总和是否存在，如您在问题中提到的那样。

通过动态规划，您可以通过回溯输出所有解决方案。但是，生成所有有效组合的总体时间复杂度仍然是 2^n。

因此，任何比 2^n 更好的算法都几乎是不可能的。

**UPD**：来自@Knoothe 评论：您可以修改[horowitz-sahni 的](http://en.wikipedia.org/wiki/Subset_sum_problem#Exponential_time_algorithm)算法以枚举所有可能的子集。如果存在`M`总和等于的此类集合`S`，则总体时间复杂度在`O(N * 2^(N/2) + MN)`

# warnings - 在 PHP cli 中捕获特定警告

> ID：15630023
> 
> 赞同：0
> 
> 时间：2013-03-26T05:30:21.617
> 
> 标签：warnings, try-catch, php

我在 php-cli 中创建了一个脚本，该脚本会引发一些警告，我只需要捕获其中一个并终止脚本“die();” 只有它来了。

这个：

警告：`fgets()`期望参数 1 是资源，在第 46 行的 file.php 中给出布尔值

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T06:03:22.297

您的脚本可能如下所示：

```
$f = fopen($filename, "r");
while ($line = fgets($f)){
    ...
} 
```

或者可能：

```
$f = fopen($filename, "r");
$line = fgets($f); 
```

您可以处理`fopen()`和`fgets()`调用之间的错误，而不使用`try[}catch(){}`：

```
$f = fopen($filename, "r");
if (!$f){
    die("Error while opening the file.\n");
}
$line = fgets($f); 
```

# html - 在所有浏览器上播放音频的最佳方式是什么？

> ID：15630024
> 
> 赞同：0
> 
> 时间：2013-03-26T05:30:23.980
> 
> 标签：html, html5-audio

我正在做一场噩梦，试图`<audio> ... </audio>`在所有浏览器上工作。我必须包含 ogg 和 mp3 以及 wav 文件才能让一个文件显示在任何浏览器中。有没有更简单的方法，那就是看 html5？我还没有研究任何 jquery 库或任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:37:52.877

试试**Audio.JS**，它是一个不错的音频播放包...

**audio.js**是一个插入式 javascript 库，它允许 HTML5 的标签在任何地方使用。

**[链接到 Audio.js](http://kolber.github.com/audiojs/)**

# c# - 如何使用 WPF 数据绑定来编辑多个项目的公共字段

> ID：15630028
> 
> 赞同：3
> 
> 时间：2013-03-26T05:30:36.040
> 
> 标签：c#, wpf, listview, data-binding

类似于您可以在 Visual Studio 设计器中选择多个对象并更改公共属性的方式，我想在我的 WPF 应用程序中执行相同的操作。我目前将 ListView 的选定项绑定到“属性编辑器”窗口以编辑选定对象的各种属性。我的问题是利用数据绑定的最佳方法是什么，但允许选择多个项目并一次编辑所有公共字段？

编辑：感谢自由职业者的回答。更复杂一点的是，在列表视图上选择的任何内容都设置为第二个列表视图（属性编辑器）的数据上下文。第二个列表视图为所选对象的每个属性使用了 ItemTemplateSelector。知道如何将 ItemTemplateSelector 的概念与 MultiBinding 的概念结合起来，以便我可以将选定对象的列表传递给属性编辑器列表视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:37:10.947

你可以用`multibindings`这个。

有关此课程的更多详细信息，请参阅此链接>>

[http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)

希望它有帮助。

# r - R中的which.max关系方法

> ID：15630032
> 
> 赞同：20
> 
> 时间：2013-03-26T05:31:09.933
> 
> 标签：r, max, min

`which.max``which.min`如果有关系，将返回最大值或最小值的最小索引。

有没有办法解决这个问题，以便在**不**影响函数效率的情况下返回最大的索引？

`max.col`有这个确切的功能，但我正在处理一个向量而不是一个矩阵。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T05:40:29.320

你可以这样做：

```
x<-c(1,2,1,4,3,4)
#identical to which.max, except returns all indices with max
which(x==max(x)) 
[1] 4 6
z<-which(x==max(x))
z[length(z)]
[1] 6
#or with tail
tail(which(x==max(x)),1)
[1] 6 
```

编辑：

或者，您也可以`max.col`对这样的向量使用函数：

```
max.col(t(x),"last")
[1] 6
#or
max.col(matrix(x,nrow=1),"last")
[1] 6 
```

编辑：一些基准测试：

```
x<-sample(1:1000,size=10000,replace=TRUE)
library(microbenchmark)
microbenchmark(which.max(x),{z<-which(x==max(x));z[length(z)]}, 
     tail(which(x==max(x)),1),max.col(matrix(x,nrow=1),"last"),
     max.col(t(x),"last"),which.max(rev(x)),times=1000)
Unit: microseconds
                                             expr     min      lq  median      uq       max neval
                                     which.max(x)  29.390  30.323  30.323  31.256 17550.276  1000
 {     z <- which(x == max(x))     z[length(z)] }  40.586  42.452  42.919  44.318   631.178  1000
                      tail(which(x == max(x)), 1)  57.380  60.646  61.579  64.844   596.657  1000
             max.col(matrix(x, nrow = 1), "last") 134.353 138.085 139.485 144.383   710.949  1000
                            max.col(t(x), "last") 116.159 119.425 121.291 125.956   729.610  1000
                                which.max(rev(x))  89.569  91.435  92.368  96.566   746.404  1000 
```

因此，所有方法似乎都比原始方法慢（给出错误的结果），但`z <- which(x == max(x));z[length(z)]`似乎是这些方法中最快的选择。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-26T05:45:22.810

你可以逆转`x`

```
which.max(rev(x))
which.min(rev(x)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T05:39:27.553

该`which`函数有一个“arr.ind”参数，通常设置为 FALSE，但在这种情况下设置为 TRUE 很有用：

```
x <- sample(1:20, 50, repl=TRUE)

> which(x==max(x), arr.ind=TRUE)
[1] 11 23
> tail(which(x==max(x), arr.ind=TRUE) , 1)
[1] 23 
```

使用 arr.ind 参数对矩阵或数组结构特别有用，但它也适用于原子向量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-04T09:18:37.730

要扩展 Jouni 的答案，您可以改为使用`max`以下结果`which`：

```
x <- c(1, 2, 1, 4, 3, 4)
which(x == max(x)) 
[1] 4 6
max(which(x == max(x)))
[1] 6 
```

基准测试：

```
x <- sample(1:1000, size = 10000, replace = TRUE)
library(microbenchmark)
microbenchmark(which.max(x), {z <- which(x == max(x)); z[length(z)]}, 
               tail(which(x == max(x)), 1), max.col(matrix(x, nrow = 1), "last"),
               max.col(t(x), "last"), which.max(rev(x)), max(which(x == max(x))), times = 1000)
Unit: microseconds
                                             expr     min      lq       mean  median      uq      max neval
                                     which.max(x)   6.322   6.717   7.171838   7.112   7.112   40.297  1000
 {     z <- which(x == max(x))     z[length(z)] }  27.260  28.445  37.126964  28.840  29.630 2276.346  1000
                      tail(which(x == max(x)), 1)  35.952  37.927  45.198484  38.718  40.298 1005.038  1000
             max.col(matrix(x, nrow = 1), "last") 160.791 162.766 181.698171 163.557 169.087 1688.494  1000
                            max.col(t(x), "last")  84.149  86.124 100.249921  86.915  89.680 1230.618  1000
                                which.max(rev(x))  53.729  55.310  69.442985  56.100  57.680 1076.149  1000
                          max(which(x == max(x)))  26.865  27.655  35.552256  28.050  28.841 1029.137  1000 
```

# c - 如何执行“超长”整数的乘法和除法？

> ID：15630033
> 
> 赞同：1
> 
> 时间：2013-03-26T05:31:10.580
> 
> 标签：c, arrays, int

考虑处理可能有数百位数字的整数的需要。让我们称它们为“超长”整数。显然，它们不能使用 int 或 long int 等数据类型存储。一个“超长”整数可以作为用户的输入逐位读取，并存储在一个数组中，超长整数的每个数字在数组中占据一个位置。该问题涉及将两个正的“超长”整数作为用户的输入，逐位数字。每个数字都由用户作为字符输入。正“超长”整数的结尾由 $ 符号的输入和存储来表示。

在这里，您可以假设正超长整数将占用的最大位数为 25 位。

编写一个能够对这些正超长整数执行以下操作的 C 程序。

1.  添加两个正超长整数
2.  从另一个正超长整数中减去一个正超长整数
3.  将两个正超长整数相乘
4.  将一个正超长整数除以另一个正超长整数
5.  提供一个正超长整数除以另一个正超长整数的余数
6.  求两个正超长整数的最大值

我完成了编写用于执行两个正超长整数的加法、减法和最大值的函数。我无法执行乘法和除法来分别获得商和余数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:37:41.423

如果您无法编写自己的函数，您只需要使用 GMP 库，

[http://gmplib.org/](http://gmplib.org/)

使用它，您将被排序....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:55:29.700

所有表达式的结果将是一个非常大的数字，超出了甚至 long int 或 long double 的范围。您必须使用数组在 c 中存储如此大的数字。您必须使用与我们用来将两个数字相乘的逻辑相同的逻辑，除非将数据存储在我们存储到数组中的普通变量中。

以下是一些参考链接：

[http://www.cquestions.com/2010/08/multiplication-of-large-numbers-in-c.html](http://www.cquestions.com/2010/08/multiplication-of-large-numbers-in-c.html)

[http://www.cquestions.com/2010/08/division-of-large-numbers-in-c.html](http://www.cquestions.com/2010/08/division-of-large-numbers-in-c.html)

[http://www.thinbasic.com/community/showthread.php?11206-C-multiplying-big-integers](http://www.thinbasic.com/community/showthread.php?11206-C-multiplying-big-integers)

[http://cboard.cprogramming.com/c-programming/114679-multiplying-huge-numbers-integer-arrays.html](http://cboard.cprogramming.com/c-programming/114679-multiplying-huge-numbers-integer-arrays.html)

[极大的整数乘法和加法](https://stackoverflow.com/questions/2985058/extremely-big-integer-multiplication-and-addition)

# vba - 如何通过宏清除工作表的 VBA 代码？

> ID：15630035
> 
> 赞同：3
> 
> 时间：2013-03-26T05:31:19.780
> 
> 标签：vba, excel

我有一个文件，其中有一个模板表，当它被激活时需要运行一些代码。正在复制此工作表以创建*不需要*运行此代码的工作表。目前，我有代码在运行时检查工作表的代号，以便它在额外的工作表上不执行任何操作，但是当您在工作表之间切换时它仍然会减慢使用速度。

有什么方法可以使重复的宏也清除它们的 VBA 代码内容？

（编辑）请注意，我需要清除的代码不在模块中。经过一番研究，我似乎找到了一种删除模块的方法（通过访问`VBProject.VBComponents`），但我不确定如何访问工作表的 VBA*代码*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:17:52.510

要删除所有`Sheet`模块中的完整代码，您可以尝试以下操作：

```
Sub Remove_some_vba_code()

Dim activeIDE As Object 'VBProject
Set activeIDE = ActiveWorkbook.VBProject

Dim Element As VBComponent

Dim LineCount As Integer
For Each Element In activeIDE.VBComponents
    If Left(Element.Name, 5) = "Sheet" Then    'change name if necessary
        LineCount = Element.CodeModule.CountOfLines

        Element.CodeModule.DeleteLines 1, LineCount
    End If
Next

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:22:22.120

您可以解决此问题的另一种方法是将所有代码保留在工作表之外。然后你不必删除任何东西。工作表的代码模块是编写事件代码的便利位置，但您也可以创建自己的类模块来处理事件。把它放在一个标准模块中：

```
Public gclsEvent As CEvent

Sub Auto_Open()

    Set gclsEvent = New CEvent
    Set gclsEvent.This = Sheet1

End Sub 
```

这将创建一个全局的 CEvent 实例，因此只要您的工作簿处于打开状态，它就不会失去作用域。它将代号为 Sheet1 的工作表分配给类的 This 属性。使用此代码创建一个名为 CEvent 的类模块

```
Private WithEvents mwsThis As Worksheet

Public Property Set This(ByVal wsThis As Worksheet): Set mwsThis = wsThis: End Property
Public Property Get This() As Worksheet: Set This = mwsThis: End Property

Private Sub mwsThis_Activate()

    Me.This.Copy , Me.This.Parent.Sheets(Me.This.Parent.Sheets.Count)

End Sub 
```

WithEvents 关键字公开了该对象的事件。由于我们只是连接 Sheet1 的事件，因此激活另一个工作表不会触发代码。

# jquery - jQuery datepicker with standard ASP.NET Controls

> ID：15630046
> 
> 赞同：3
> 
> 时间：2013-03-26T05:32:23.913
> 
> 标签：jquery, asp.net

How do we make the date to appear in the textbox on the click of an image button using jquery and ASP.NET?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T05:41:15.637

这是一个很好的例子，可以帮助您使用它。
[http://www.codeproject.com/Articles/47474/ASP-NET-Control-from-jQuery-DatePicker-in-3-Minute](http://www.codeproject.com/Articles/47474/ASP-NET-Control-from-jQuery-DatePicker-in-3-Minute)

## 编辑 1

您应该查看[jQuery UI DatePicker](http://jqueryui.com/demos/datepicker/)。

**ASP.NET 示例**

```
<script>
$(function() {
    $( "#<%= txtDate.ClientID %>" ).datepicker();
});
</script>

<form id="form1" runat="server">
  <div>
    <asp:TextBox ID="txtDate" runat="server" />
  </div>
</form> 
```

## 编辑 2

如果你想显示按钮
通过这个链接
[我如何在 ASP.NET 中使用带有图标和格式的 JQuery Datepicker](https://stackoverflow.com/questions/13623539/how-i-can-use-jquery-datepicker-with-a-icon-and-a-format-in-asp-net)

建议您使用 like

```
$(".txtVon").datepicker({
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T05:42:14.163

请使用类选择器尝试下面的代码，了解更多详细信息，请单击[jQuery Date Picker](http://jqueryui.com/datepicker/#icon-trigger)

```
<asp:TextBox ID="txtFromDate" CssClass="From-Date" runat="server"></asp:TextBox>

<script language="javascript" type="text/javascript">

           jQuery('.From-Date').datepicker({
                showOn: "button",
                buttonText: "Select Date",
                buttonImage: "images/calendar.png",
                buttonImageOnly: true
                }
            });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:44:34.077

尝试这个：

```
<script language="javascript" type="text/javascript">
$(document).ready(function(){

    $("#<%= txtDate.ClientID %>").datepicker({
        showOn: "button",
        buttonImage: generateURL("/Images/Calendar.jpg"),
        buttonImageOnly: true

    });

});
</script>

<asp:TextBox ID="txtDate" runat="server"></asp:TextBox> 
```

# vim - usage of norm(al) and put in vim

> ID：15630048
> 
> 赞同：-1
> 
> 时间：2013-03-26T05:32:31.170
> 
> 标签：vim, vi

I am beginner using Vim Editor for addressing the code review comments. Kindly elaborate "put" and "norm" in vim search.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:20:30.673

Vim 带有大量文档，您可以使用该`:help`命令访问这些文档。

用于`:help :command`获取有关特定命令的帮助。

# scroll - How do I add infinite scroll with jQuery Masonry?

> ID：15630049
> 
> 赞同：13
> 
> 时间：2013-03-26T05:32:38.490
> 
> 标签：scroll, infinite

I am trying to incorporate infinite scroll with my current web site that is using a type of jQuery Masonry. I am trying to understand the language and the basic function of javascript (and html in general), but it can be quite overwhelming. I am also seeing different methods to add infinite scroll to a web page, including the use of php. Basically, I have no sense of direction as to which is the best method for my web site. Any tips or help is greatly appreciated. And I apologize for my lack of knowledge regarding this topic, but I just feel this is quite over my head... @_@

Here is my web site. It is my personal artwork collections: [http://themptyrm.com](http://themptyrm.com)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-28T19:09:18.347

将此添加到您的 html 文件中

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="../jquery.masonry.min.js"></script>
<script src="../js/jquery.infinitescroll.min.js"></script> 
```

并添加这个，在这里你可以指定无限滚动选项

```
<script type="text/javascript">
var $container = $('#container');
$container.infinitescroll({
  navSelector  : '#page-nav',    // selector for the paged navigation 
  nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
  itemSelector : '.box',     // selector for all items you'll retrieve
  loading: {
      finishedMsg: 'No more pages to load.',
      img: 'http://i.imgur.com/6RMhx.gif'
    }
  },
  // trigger Masonry as a callback
  function( newElements ) {
    var $newElems = $( newElements );
    $container.masonry( 'appended', $newElems );
  }
);
</script> 
```

顺便说一句，您的页面看起来很棒

如果您有更多疑问，请点击此处[Masonry with Infinite scroll](http://masonry.desandro.com/methods.html#appended)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T05:38:06.227

Infinite Scroll，我在我的项目中尝试过一次，所以这里是我迄今为止使用的一些参考资料。

[https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll)

[http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)

jScroll 是一个用于无限滚动的 jQuery 插件，由 Philip Klauzinski 编写。无限滚动; 也称为延迟加载、无限滚动、自动分页器、无限页等；当您向下滚动时，能够在当前页面或内容区域内通过 AJAX 加载内容。每次滚动到现有内容的末尾时，可以自动加载新内容，也可以通过单击现有内容末尾的导航链接触发加载。

[http://jscroll.com/](http://jscroll.com/)

希望能帮助到你。

# php - How to get information from a client, then automatically use that in a form?

> ID：15630052
> 
> 赞同：0
> 
> 时间：2013-03-26T05:33:07.257
> 
> 标签：php, html, cookies, automation

I'm trying to get a clients information on their computer and automatically using that to determine some components of the form. This form is ranging from the users name-location and I'm trying to make it so that the setup process is quick and easy. I'm also wondering if I can take information from cookies on previously saved websites? Here is the visible part of the html form I have so far.

```
 <td><input type="text" class="username" id="username" name="username" maxlength="45" size="30" value = "" /></td>
<td>E-Mail</td>
     <td><input type="text" name="email" size="30" value="" maxlength="100"/></td>

     <td>Password (between 6 and 16 chars):</td>
     <td valign="top"><input class="password" id="password" type="password" name="password"
         size="16" maxlength="16"/></td>

     <td>Confirm password</td>
     <td><input type="password" name="passwd2" size="16" maxlength="16"/></td>

   <tr>
     <td>Time Zone: </td>
     <td><select id="tzone" name="tzone" >
        <option value="Pacific/Midway" >(GMT-11:00) Midway Island, Samoa</option>
<option value="Pacific/Honolulu" >(GMT-10:00) Hawaii</option>
<option value="America/Anchorage" >(GMT-09:00) Alaska</option>

etc...
  </select>
    </td> 
```

All I need is PHP to automate some parts of this form, such as the timezone, and make is easier for the user (I already know how to get the persons timezone, it's just I'm not able to use that in the `<option select>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:48:30.307

这可能会对您有所帮助。

带有 GET 表单或 POST 的 HTML

```
<select id="tzone" name="tzone" >
<option value="-:11" >(GMT-11:00) Midway Island, Samoa</option>
<option value="-:10" >(GMT-10:00) Hawaii</option>
<option value="-:09" >(GMT-09:00) Alaska</option>
<option value="+:04" >(GMT+04:00) Russia</option>
</select> 
```

PHP

```
$selected_zone = $_GET["tzone"];// for POST use $_POST["tzone"]
$zone = explode(":", $selected_zone);
$timestamp = date("H:i:s");
if($zone[0] == "-" ){
    $time = date( "H:i:s", strtotime( $timestamp ) - $zone[1] * 3600 );
}else{
    $time = date( "H:i:s", strtotime( $timestamp ) + $zone[1] * 3600 );
} 
```

并且会像这样放出时间

15:00:00

# python - How to remove Create and Edit... from many2one field.?

> ID：15630054
> 
> 赞同：10
> 
> 时间：2013-03-26T05:33:28.040
> 
> 标签：python, xml, one-to-many, openerp, many-to-one

Please advice me How to remove "Create and Edit..." from many2one field.? that item shows below in the many2one fields which I filtered with domain option.

OpenERP version 7

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-26T05:42:02.530

我没有太多想法。也许为此您必须对网络插件进行更改。

但另一种解决方案是您可以进行**many2one**字段**选择**。在您的 xml 中添加`widget="selection"`属性。

`<field name="Your_many2one_field" widget="selection">`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-02T07:46:00.020

**Many2one 小部件（默认）**

**选项**：您可以与此小部件一起使用的其他可能选项。

*   no_quick_create - 它将删除创建“输入文本”选项。
*   no_create_edit - 它将删除 Create and edit... 选项。
*   no_create - no_quick_create 和 no_create_edit 结合。
*   no_open - 处于读取模式：不呈现为链接。

**示例**：

```
<field name="field_name" options="{'no_quick_create': True, 'no_create_edit' : True}"/> 
```

您可以参考[Ludwik Trammer 的帖子](http://ludwiktrammer.github.io/odoo/form-widgets-many2one-fields-options-odoo.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-29T13:18:54.313

它在 openerp v7.0 中进行了测试，在其中我们可以通过下载存在的模块来删除“创建和编辑”，

[https://www.odoo.com/apps/7.0/web_m2x_options/#access_token=31af017545174c1eb6745fa70c9b6684&scope=userinfo&state=&expires_in=3600&token_type=Bearer](https://www.odoo.com/apps/7.0/web_m2x_options/#access_token=31af017545174c1eb6745fa70c9b6684&scope=userinfo&state=&expires_in=3600&token_type=Bearer)

并添加属性 'create':false, 'create_edit': false 像这样

```
 <field name="partner_id" options="{'limit': 10, 'create': false, 'create_edit': false}"/> 
```

这里给出了一个很好的教程 [https://www.odoo.com/apps/7.0/web_m2x_options/](https://www.odoo.com/apps/7.0/web_m2x_options/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-02T21:21:28.790

对于 Odoo 8.0 和 9.0，您应该使用 no_create 和 no_open。

`no_create:`设置为 True 以禁用在下拉列表中创建新条目的选项。

`no_open:`设置为 True 以禁用下拉列表右侧的按钮，该按钮弹出一个允许编辑所选实例的窗口。

```
<field name="field_name"  options="{'no_create': True, 'no_open': True}" /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-01T20:00:49.820

在xml文件中放：

```
<field name="my_field_name" options="{'no_create' : True}"/> 
```

我希望这行得通！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-12T07:39:45.040

在 XML 文件中：

 *请将 ***options="{'no_create': True}"***添加到您的字段中，这将删除创建按钮

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-26T14:00:07.883

只需在选项中添加**no_open**、**no_create**、**no_create_edit 即可**

```
<field name="partner_id" options='{"no_open": True,"no_create": 1, "no_create_edit": 1}'/> 
```

我试过了，它工作正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-21T11:14:32.377

For those who don't want the 'selection' widget (it is less powerful, doesn't offer search capability) this is another method, tested in 8.

```
<xpath expr="//field[@name='partner_id']" position="attributes">
   <attribute name="options">{'no_create': '1', 'no_create_edit': '1'}</attribute>
</xpath> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-26T06:18:40.277

在你的 XML 文件中

```
<field name="your_field_name" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-27T16:09:00.447

odoo 的解决方案在这里，对于 many2one 关系领域。

在下面列出的官方 odoo 版本中工作，默认功能。

*   奥多 9
*   奥多 10
*   奥多 11

```
<field name="patient_id" options="{'no_quick_create': true, 'no_create_edit': false}"/> 
```

笔记：

*   'no_quick_create': true，禁用内联创建功能，没有
*   popup 'no_create_edit': true，禁用带有弹出功能的内联创建。'不
*   _create': true，禁用内联和弹出都只有这个选项*

# java - How to install Maven 3 on Ubuntu 18.04/17.04/16.10/16.04 LTS/15.10/15.04/14.10/14.04 LTS/13.10/13.04 by using apt-get?

> ID：15630055
> 
> 赞同：305
> 
> 时间：2013-03-26T05:33:31.960
> 
> 标签：java, maven-3, ubuntu-16.04, apt-get, ubuntu-17.04

Try:

```
sudo apt-get install maven 
```

If it works for you ignore the rest of this post.

## Intro

I started setting up my Ubuntu 12.10 on April 2013 and the normal `sudo apt-get install maven` was not working for maven 3 back then.

The **manual installation** in this post is useful if you like to dig in deeper to your ubuntu kernel in regards with apt-get and where it finds the list of applications that are available for installation on Ubuntu . It can also be potentially useful for more recent releases of Ubuntu like **Ubuntu 15.04**, etc. if you face the same problem as I did back then with Ubuntu 12.10\.

## Automatic Installation via apt-get:

Checkout the **manual installation** if your current ubuntu can not install maven via common 'apt-get install maven'.

```
sudo apt-get update
sudo apt-get install maven 
```

Make sure to remove maven 2 if your ubuntu is not fresh or if you were using maven 2 before:

```
sudo apt-get remove maven2 
```

## Manual Installation via apt-get by adding maven 3 repository (Ubuntu 14.04 check out update 1):

This can be useful if your ubuntu apt-get repositories list is not up to date.

Maven 3 was required to set up the system and as it turns out most of the documents out there are referring to how to install Maven to Ubuntu version 12.04 or before. Best document I found was:

[killertilapia's blog](http://killertilapia.blogspot.com.au/2012/10/installing-maven-3-in-ubuntu-1204.html)

The whole process I came up with is as follows:

1.  `sudo -H gedit /etc/apt/sources.list`
2.  Add the following line the `sources.list` file:

    > deb [http://ppa.launchpad.net/natecarlson/maven3/ubuntu](http://ppa.launchpad.net/natecarlson/maven3/ubuntu) precise main
    > 
    > deb-src [http://ppa.launchpad.net/natecarlson/maven3/ubuntu](http://ppa.launchpad.net/natecarlson/maven3/ubuntu) precise main

3.  `sudo apt-get update && sudo apt-get install maven3`

4.  `sudo ln -s /usr/share/maven3/bin/mvn /usr/bin/mvn`

> Caution 1: command "sudo apt-add-repository ppa:natecarlson/maven3" did not work on my Ubuntu and had to run `sudo apt-add-repository -rm ppa:natecarlson/maven3` to get my apt-get to work again.
> 
> Caution 2: thanks to David, you need to remove your existing symbolic link to previous versions of maven before running step 4.

## OS X Installation

I decided to add OS X installation in case you use multiple environments for your dev: [See the source stackoverflow thread for more details](https://stackoverflow.com/questions/8826881/maven-install-on-mac-os-x).

Install [Homebrew](http://brew.sh/) that is the equavalent of `apt-get`, then install Maven using:

```
brew install maven 
```

## **Update 1**: **Installation for Ubunutu 14.04**

Haven't tried this myself but I am confident this should work without security warnings:

```
sudo apt-get purge maven maven2 maven3
sudo apt-add-repository ppa:andrei-pozolotin/maven3
sudo apt-get update
sudo apt-get install maven3 
```

**Note**: source [here](https://launchpad.net/~andrei-pozolotin/+archive/ubuntu/maven3), many thanks and +1s to @rendybjunior, @Dominic_Bartl, and @FunThomas424242

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2013-05-15T13:25:08.760

这是一个更简单的方法：

```
sudo apt-get install maven 
```

更多细节在[这里](http://www.mkyong.com/maven/how-to-install-maven-in-ubuntu/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-01T02:32:28.983

最好使用[miske 的答案](/a/16566273/463897)。

# 正确安装 natecarlson 的存储库

如果您真的想使用 natecarlson 的存储库，下面的说明可以执行以下任何操作：

1.  从头开始设置
2.  `apt-get update`如果之后出现`404`错误，请修复它`add-apt-repository`
3.  如果手动添加后`apt-get update`出现错误，请修复它`NO_PUBKEY``/etc/apt/sources.list`

打开终端并运行以下命令：

```
sudo -i 
```

如有必要，输入您的密码，然后将以下内容粘贴到终端中：

```
export GOOD_RELEASE='precise'
export BAD_RELEASE="`lsb_release -cs`"
cd /etc/apt
sed -i '/natecarlson\/maven3/d' sources.list
cd sources.list.d
rm -f natecarlson-maven3-*.list*
apt-add-repository -y ppa:natecarlson/maven3
mv natecarlson-maven3-${BAD_RELEASE}.list natecarlson-maven3-${GOOD_RELEASE}.list
sed -i "s/${BAD_RELEASE}/${GOOD_RELEASE}/" natecarlson-maven3-${GOOD_RELEASE}.list
apt-get update
exit
echo Done! 
```

# 删除 natecarlson 的存储库

如果您安装了 natecarlson 的存储库（使用`add-apt-repository`或手动添加到`/etc/apt/sources.list`）并且不再需要它，请打开终端并运行以下命令：

```
sudo -i 
```

如有必要，输入您的密码，然后将以下内容粘贴到终端中：

```
cd /etc/apt
sed -i '/natecarlson\/maven3/d' sources.list
cd sources.list.d
rm -f natecarlson-maven3-*.list*
apt-get update
exit
echo Done! 
```

# scripting - Is a scripting application allowed in the Windows Store?

> ID：15630056
> 
> 赞同：7
> 
> 时间：2013-03-26T05:33:43.227
> 
> 标签：scripting, windows-store-apps, policy, windows-store

So I have this bit of a project planned for Windows Store and Android. Basically, a networking multi-tool coupled with a scripting engine to implement protocols and behavior. Ideal uses being things like "my embedded device uses this simplistic network protocol. I'd like to quickly prototype a way to control it from my tablet".

It's my understanding that the Android market should have no problem with this. However, the Windows Store policy includes a vague clause concerning remote code execution

> 3.9 All app logic must originate from, and reside in, your app package Your app must not attempt to change or extend the packaged content through any form of dynamic inclusion of code or data that changes how the application interacts with the Windows Runtime, or behaves with regard to Store policy. It is not permissible, for example, to download a remote script and subsequently execute that script in the local context of your app package.

Of course, the scripting engine will be sandboxed and such and should be "safe"(completely intepreted, no reflection), but does it violate this policy?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T20:14:49.787

如果你在你的脚本引擎中构建，并且只运行本地脚本，你会很好。但是，如果您想拥有一个可以下载并随后运行的脚本存储库，那将违反我们理解的政策。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T04:32:14.333

不幸的是，由于接近法律语言，我认为除了该团队中的某个人（或有直接经验的人）之外，没有人可以回答这个问题。您是否尝试过 Windows Store Appl Publishing 论坛：[http ://social.msdn.microsoft.com/Forums/en-US/windowsstore/threads](http://social.msdn.microsoft.com/Forums/en-US/windowsstore/threads)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T14:04:44.830

在给出的脚本引擎示例的上下文中，除非应用程序在部署到用户系统后修改脚本引擎，以便更改协议/行为的表示（脚本工件的格式），否则将违反策略。就好像您提交了 Python 解释器，并且在某个时间点它突然转向解释 ecmascript。

# php - .htaccess 重定向 [子域] + 添加到文件名

> ID：15630060
> 
> 赞同：2
> 
> 时间：2013-03-26T05:34:38.177
> 
> 标签：php, .htaccess, http, redirect, subdomain

我正在尝试 .htaccess 将 images/icon.png 重定向到 images/[subdomain]_icon.png ..

喜欢：

```
demo.domain.com/images/icon.png to demo.domain.com/images/demo_icon.png
test.domain.com/images/icon.png to test.domain.com/images/test_icon.png
abc.domain.com/images/icon.png to abc.domain.com/images/abc_icon.png 
```

重定向应该是通用的，而不是固定的.. 任何子域都应该添加 _icon.png..

```
[subdomain].domain.com/images/icon.png -> [subdomain].domain.com/images/[subdomain]_icon.png 
```

请指教..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:50:14.760

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ([^.]+)\.yourdomain\.com$ [NC]
RewriteRule ^images/icon\.png http://%1.yourdomain.com/images/%1_icon.png [R=301,L] 
```

这个例子需要测试...

# php - 上传并重命名临时文件后难以使用 php 移动临时文件

> ID：15630071
> 
> 赞同：2
> 
> 时间：2013-03-26T05:35:49.177
> 
> 标签：php, mysql, sql, file, file-upload

我有一个用于将文件上传到 Web 服务器的表单，然后将文件路径连同它所连接的电子邮件地址和序列代码一起保存到 sql 表中。问题是，如果有人上传了与以前的人同名的文件或上传了怎么办？为了解决这个问题，我想将文件命名为“在此处插入序列号”.mp4 或 .pdf。当我这样做时，会出现以下错误：

```
Warning: move_uploaded_file() [function.move-uploaded-file]: The second argument to copy() function cannot be a directory in /home/content/98/10339998/html/scripts/upload.php on line 57

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/php7UzcdG' to '../story_files/' in /home/content/98/10339998/html/scripts/upload.php on line 57
Stored in: ../story_files/ 
```

这是一个完整的回声示例：

```
Customer's unique serial code: d0d74-ef227 

Upload: 
Type: application/pdf
Size: 14.4287109375 kB
Temp file: /tmp/php7UzcdG

Warning: move_uploaded_file() [function.move-uploaded-file]: The second argument to copy() function cannot be a directory in /home/content/98/10339998/html/scripts/upload.php on line 57

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/php7UzcdG' to '../story_files/' in /home/content/98/10339998/html/scripts/upload.php on line 57
Stored in: ../story_files/
../story_files/

Upload: file.mp4
Type: video/mp4
Size: 374.6396484375 kB
Temp file: /tmp/phpQczVLm
file.mp4 already exists. 
Serial Code Emailed to Customer Michael 
```

这是代码，注意它的视频和故事部分之间的区别，我没有转换视频部分，但它是完整的原始代码。另外，PHP 认为串行代码是文件路径，这是为什么呢？该代码只是一个 10 位的字母和数字系列，两组 5 位数字之间带有破折号，以简化阅读。

```
 <title>Uploading Files and Sending Serial Code To Customer</title>

<!--Favicon Code-->
<link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico" />
<!--Favicon Code-->

<link href="/CSS/CSS.css" rel="stylesheet" type="text/css" />
<div align="center">
  <p><span class="linkText"><a href="/index.html">Home</a> <a href="/contact-us.php">Contact Us</a> <a href="/products.html">Products</a><a href="/products.html"></a><a href="/products.html"></a></span> </p>
  <p>&nbsp;</p>
  <h2 class="headingText"><img src="/images/banner.jpg" alt="legendmaker - makes legends: banner" width="297" height="473"></h2>
  <h2 class="headingText">&nbsp;</h2>
  <h2 class="headingText">Upload Story Files</h2>
</div>
<?php
// before we do anything make sure there is a correct password (we don't want unauthorized usage)
$password = trim($_POST['password']);

if ("*****" == $password)// not going to post my pass on the forums :P

{

///// generate unique serial code ///////////////////////////////////////////////////////////////
$string1 = substr(md5(uniqid(rand(), true)), -5, 5);
$string2 = substr(md5(uniqid(rand(), true)), -5, 5);
$serial  = sprintf('%s-%s', $string1, $string2);

echo "Customer's unique serial code:  ";
echo $serial;
echo "     ";
/////end of generate unique serial code ///////////////////////////////////////////////////////////////
///story file upload///////////////////////////////////////////////////////////////////////////////////

if ($_FILES["file"]["size"])
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "<br>" . "<br>" . "<br>" . "Upload: " . $_FILES["file"]["$code"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("stories/" . $_FILES["file"]["$code"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "../story_files/" . $_FILES["file"]["code"]);
      echo "Stored in: " . "../story_files/" . $_FILES["file"]["$code"] . "<br>";
      $storyPath  = sprintf("../story_files/" . $_FILES["file"]["$code"]);
      echo $storyPath;    
      }
    }
  }
else
  {
  echo "No story file was chosen, this is not an error just a notification. Any other files selected will still upload correctly.   ";
  }

///video file upload////////////////////////////////////////////////////////////////////////////////

if ($_FILES["videoFile"]["size"])
  {
  if ($_FILES["videoFile"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["videoFile"]["error"] . "<br>";
    }
  else
    {
    echo "<br>" . "<br>" ."Upload: " . $_FILES["videoFile"]["name"] . "<br>";
    echo "Type: " . $_FILES["videoFile"]["type"] . "<br>";
    echo "Size: " . ($_FILES["videoFile"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["videoFile"]["tmp_name"] . "<br>";

    if (file_exists("../video_files/" . $_FILES["videoFile"]["name"]))
      {
      echo $_FILES["videoFile"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["videoFile"]["tmp_name"],
      "../video_files/" . $_FILES["videoFile"]["name"]);
      echo "Stored in: " . "../video_files/" . $_FILES["videoFile"]["name"] . "<br>";     
      $videoPath  = sprintf("../video_files/" . $_FILES["file"]["name"]);
      echo $videoPath;
      }
    }
  }
else
  {
  echo "No video file was chosen, this is not an error just a notification. Any other files selected will still upload correctly.   ";
  }  

  /// submit information to database/////////////////////////////////////////////////////////////////////
$username="storycodes";
$password="Legendmaker1!";
    $con = mysqli_connect("storycodes.db.10339998.hostedresource.com",$username,$password);

    if (!$con)
    {
        die('Could not connect: ' . mysqli_error());
    }
$email = $_POST['email'] ;  
$submitInformation = "INSERT INTO `storycodes`.`storycodes` (`code`, `email`, `video`, `story`) VALUES ('$serial', '$email', '$videoPath', '$storyPath');"; 
mysqli_query($con, $submitInformation); // submits information to database for later recollection
////////////////////end of submit to database///////////////////////////////////////////////////////////

/////////////////// email the code to customer//////////////////////////////////////////////////////////
require_once '../PHPMailer_5.2.2/class.phpmailer.php';

$name = $_POST['name'] ;

$body = "Thank you for using legendmaker $name! Your story has been completed and will now be accesible at www.thelegendmaker.net/stories.html  On that page you will be required to enter a serial code in order to access your files. We require a serial code in order to access files because we care about our customers and security is a concern.                                                           Your serial code is: $serial";

$mail = new PHPMailer(true); //defaults to using php "mail()"; the true param means it will throw exceptions on errors, which we need to catch

try 
{
  $mail->AddAddress($email, $name);
  $mail->SetFrom('fakeemail1@gmail.com', 'Sender Name');
  $mail->AddReplyTo('fakeperson@yahoo.com', 'Fake Name');
  $mail->Subject = "Message From Legendmaker: $name your story is now complete.";
  $mail->Body = $body;
  $mail->Send();
  echo "<br>" . "<br>" . "Serial Code Emailed to Customer $name</p>\n";
  echo "<img src='/images/knight-success.png' alt='success' width='429' height='791' />"; 
} catch (phpmailerException $e) {
  echo $e->errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
  echo $e->getMessage(); //Boring error messages from anything else!
}

/////////////////// end of email code///////////////////////////////////////////////////////////////////

}

else
{
echo "incorrect password";
}
/// end of file uploads//////////////////////////////////////////////////////////////////////////
?>
<link href="/CSS/CSS.css" rel="stylesheet" type="text/css" />

<p>
  <!--google cart code ------------------------------------>
  <script  id='googlecart-script' type='text/javascript' src='https://checkout.google.com/seller/gsc/v2_2/cart.js?mid=215313740482542' integration='jscart-wizard' post-cart-to-sandbox='false' currency='USD' productWeightUnits='LB'></script>
</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="center"><a href="/contact-us.php">Contact Us</a> <a href="/upload.html">Site Owner Upload</a> <a href="/service_agreement.html">Service Agreement</a></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:40:09.790

您使用 `$_FILES["file"]["code"]`而不是代替`$_FILES["file"]["name"]`不存在的文件名，因此结果是您将目录作为第二个参数传递。

```
move_uploaded_file($_FILES["file"]["tmp_name"],
  "../story_files/" . basename($_FILES["file"]["name"])); 
```

* * *

编辑如果您想使用生成的序列代码作为文件名，只需将其连接到目录字符串`move_uploaded_file`

```
move_uploaded_file($_FILES["file"]["tmp_name"],
  "../story_files/" . $serial); 
```

# unit-testing - 除了数据库、文件系统等的集成测试之外，还需要单元测试吗？

> ID：15630072
> 
> 赞同：1
> 
> 时间：2013-03-26T05:35:49.103
> 
> 标签：unit-testing, mocking, integration-testing

在我的办公室，除了对主要负责与文件系统（数据库等）交互的类进行集成测试外，我们还对单元测试的必要性存在争议。

我们拥有的集成测试几乎是单元测试，因为测试对象根本不与其他对象交互。*我们称测试集成*的唯一原因是测试中使用了真正的文件系统。并且建议让被测类使用文件系统层组件，然后在测试中模拟它（所以我们称之为*单元*测试），并检查与该组件的交互，而不是真实的文件系统结果。我们讨论的是这种改变的必要性。

我们的一个观点是，单元测试总是需要的，因为：

1.  编写单元测试让代码变得更好
2.  进行单元测试，您无需关心真实的文件系统和文件的副作用，出现在错误的位置
3.  开发人员可以通过使测试的类使用文件系统模拟并为该模拟设置适当的期望来全面测试结果
4.  可以将 mock 期望与被测类的特定内部算法联系起来，因为我们使用单元测试进行白盒测试

因此，必须始终为这样的测试类编写单元测试。并且该类必须始终使用文件系统层组件进行测试。

另一种观点是，专门用于文件系统交互的类的特定边缘情况不需要单元测试，因为：

1.  仅仅通过简单的模拟而不是真实的文件系统（或其完整仿真），无法正确验证测试类是否有效。文件系统是一个如此复杂的组件，它：
    *   一个经过测试的课程可以以多种不同的方式工作，以取得成功的结果。模拟期望仅涵盖一两种可能的场景，因此单元测试错误地显示正确实现良好算法的类的失败，这与预期不同。
    *   一个经过测试的类可以以某种方式工作，被模拟检测为成功的场景，而该类仍然没有产生正确的结果。这可能是由于实际文件系统中相当复杂的原因。所有这些原因是不可能仅仅通过一个模拟来涵盖的。
2.  带有模拟和期望的单元测试非常脆弱，因为它与被测类的内部算法密切相关。并且即使对算法进行正确的更改，测试也会错误地失败。
3.  当类只有 1-2 个公共方法并且唯一的依赖项是文件系统时，集成测试是单元测试的适当且完全的替代品。集成测试在这种情况下提供与单元测试相同的好处 - 清晰的依赖关系，更易读的代码等。

因此，在我们的案例中不需要使用文件系统模拟进行单元测试。对于这种特殊的类情况，它很脆弱并且不准确。

所以，总而言之，问题是：
**对于没有复杂类的边缘情况，集成测试是否足够充分，它主要负责使用文件系统（数据库等）？**

*此类的集成*测试和*单元*测试之间的唯一区别在于，单元测试将使用文件系统模拟（类将完全隔离），而集成测试使用真实文件系统。

如果您可以添加对经典书籍的引用，或者可能是知名业内人士的文章/演示文稿，我将不胜感激，这样我们就可以有一个非常强大的基础来支持所得出的结论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:56:18.900

简短的回答是肯定的，您**可以**使用“集成”测试来全面测试一个类。不过，更好的问题是你**应该**这样做吗？

我认为您对“单元测试”（无外部依赖项）和“集成测试”（具有此类依赖项）之间的定义差异过于关注。测试的目标是让您确信您的代码始终在工作，同时降低拥有这种信心的相关成本。所以你的问题

> 对于没有复杂类的边缘情况，集成测试是否足够充分，该类主要负责使用文件系统（数据库等）？

有点不完整。

对于我们的讨论，“单元”和“集成”之间的区别中最有用的部分是：**单元测试更容易编写、维护和运行更便宜。**

要编写单元测试，您只需要知道代码。如果单元测试失败，您知道这是因为代码更改所致。编写集成测试需要设置依赖项，例如创建具有特定内容的文件、将行插入数据库等。如果集成测试失败，可能是您的代码，也可能是您的依赖项。由于这些原因和其他原因，集成测试更复杂，因此创建、维护和运行成本更高。

增加的费用应该促使开发人员将封装业务逻辑的类与处理与外部系统交互的类分开，以尽量减少所需的集成测试数量。可以使用更便宜的单元测试来测试业务逻辑。

**编辑**

您的类可能具有复杂的逻辑，而其本身也很复杂，因为它必须处理底层外部依赖项（即相关文件系统）中的复杂行为。在这种情况下，模拟文件系统本身可能非常困难，并且仅使用正确设置的文件系统并编写“集成”测试*可能更便宜/更容易。*

要记住的重要一点是您要实现的目标：以可接受的成本建立信心。如果“集成”测试足够便宜，那就太好了。如果您可以使用“单元”测试更便宜地获得相同的信心，那就更好了。确切的组合取决于手头的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:00:30.263

最好有一个已知的文件系统或数据库状态用于测试。例如，您不希望测试失败，因为它试图插入已经存在的记录。此故障不是由于代码而是数据库问题。同样的事情也可能发生在文件系统中。但是，您应该编写您能够编写的最佳测试。如果您不能轻松地模拟文件系统或其他任何东西，请与它进行交互。只要意识到如果测试失败，它可能不是代码问题。

> 丑陋的测试总比没有测试好。--Testivus之道 [http://www.artima.com/weblogs/viewpost.jsp?thread=203994](http://www.artima.com/weblogs/viewpost.jsp?thread=203994)

现在，即使您确实使用模拟进行了测试，但这并不意味着您不应该进行 QA 或某种集成测试来确保一切都正确连接。我认为单元测试是为了验证代码的内部是否正常工作，集成测试告诉我所有的部分都可以一起工作。

我不知道您使用的是什么语言，但 PHPUnit 的文档提供了一些关于测试数据库和文件系统的想法。

*   [http://www.phpunit.de/manual/current/en/database.html](http://www.phpunit.de/manual/current/en/database.html)
*   [http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.stubbing-and-mocking-web-services](http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.stubbing-and-mocking-web-services)
*   [http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.mocking-the-filesystem](http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.mocking-the-filesystem)

> 带有模拟和期望的单元测试非常脆弱，因为它与被测类的内部算法密切相关。并且即使对算法进行正确的更改，测试也会错误地失败。

对于使用模拟进行测试，您不应该与算法绑定。您要测试的只是该类的预期行为。不是它是怎么做的。

# batch-file - 从另一个运行 bat 文件

> ID：15630073
> 
> 赞同：0
> 
> 时间：2013-03-26T05:35:56.797
> 
> 标签：batch-file

这是批处理文件的结构

```
SET CURDATE=%date%
REM run some code bellow
.....
.....
.....
.....
"C:\CADMAC2k\SYS\CADMAC.exe" 
```

此批处理文件读取当前日期，进行一些修改，然后启动 cadmac.exe（一个 cad 程序）。

此批处理文件需要以管理员权限运行，但 cadmac.exe 应以当前登录帐户运行。

当我右键单击此批处理文件并选择**以管理员**身份运行时，cadmac.exe 也以管理员权限运行。

有没有办法让 cadmac.exe 以当前用户权限（登录帐户）而不是管理员权限运行？

任何形式的建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:43:17.520

如果您的批处理文件中有特定的命令需要以管理员身份运行，您可以使用**[runas](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/runas.mspx)**命令。

然后，您可以作为登录用户启动批处理文件。必要时，runas 会提示输入管理员凭据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:45:41.480

您可以使用 Run AS for exe。这是可能的解决方案 [在 .bat 文件中使用 Run As 运行 .exe](http://www.techimo.com/forum/technical-support/90867-running-exes-run-bat-file.html)

# java - 从 SOAP 附件中提取的 ZIP 文件损坏

> ID：15630096
> 
> 赞同：1
> 
> 时间：2013-03-26T05:38:08.193
> 
> 标签：java, soap, zip, saaj

我正在使用帮助我从消息中心获取文件的 Web 服务。文件类型可以是 XML 或 ZIP。

对于 ZIP 文件，内容类型为二进制。

我有这段代码：

```
private String extractPayload(String filePath, AttachmentPart attach){

        FileOutputStream fileStream = null;

        try {
              DataHandler handler;
              handler = attach.getDataHandler();

              File f = new File(filePath);

              fileStream = new FileOutputStream(filePath);

              handler.writeTo(fileStream);

              fileStream.flush();

        } catch (Exception ex) {

              logger.info("####Exception:" + ex.getMessage());

        } finally {

              if (fileStream != null)
                    fileStream.close();

        }

        return filePath; 
```

}

现在，该代码可以很好地获取 XML 文件，尽管对于 ZIP 文件，该文件被证明是损坏的。我使用来自 Messaging Hub 的文件实用程序下载了相同的文件，并发现我通过 SOAP 附件获取的文件大小比其实际大小大约多 4 个字节。

**更新：**附件编码为 7 位（如果这可能会造成阻碍），而另一个包含另一个 zip 的附件编码为 Quote-printable。两个 zip 都是从同一个 Web 服务中获取的（尽管它们的编码不同），并且都损坏了。

**编辑：**我强烈认为问题出在我接收文件的编码上，这是实际文件和接收到的附件文件之间的比较。

实际文件大小：9031 字节收到的附件文件大小：9066 字节

我尝试在文档编辑器中比较这两个文件以找出两者之间的差异。原始文件到获取的附件文件差异（二进制编辑器）：

ed 更改为 3f ， db 更改为 3f ， d6 更改为 3f ， 85 更改为 3f ， d0 更改为 3f ，

等等。

Zip 文件包含一个 PDF 和一个 XML 文件。

两个文件的起始行类似，以PK开头

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:31:27.433

我假设你`buf`是一个 2048 字节的数组。尝试以下更改

代替

```
fileStream.write(buf); 
```

有了这个

```
fileStream.write(buf, 0, n); 
```

这是为了防止在您上次读取时仅获得 1024 字节，然后其他 1024 字节`buf`将具有垃圾值并将被写入文件并损坏它。

# ms-project-server-2010 - Project Server 2010 项目备注字段

> ID：15630097
> 
> 赞同：0
> 
> 时间：2013-03-26T05:38:08.567
> 
> 标签：ms-project-server-2010, epm

在 Project Server 2010 中，项目级别有一个“备注”字段（与任务级别的不同）。此字段可以添加到项目详细信息页面，但仍处于禁用状态。谁能告诉我这个字段是如何填充的或者它从哪里检索笔记？我们公司希望跟踪每周的项目笔记，所以我正在探索是否可以将此字段用于此目的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:34:37.800

所有项目级别的摘要信息（如开始/完成日期、总工期等）都存储在带有`TASK_ID == 0`.

您的案例中的任务注释或项目注释存储在`MSP_TASKS.TASK_RTF_NOTES`列中。这是一篇很好的文章如何阅读该领域并在报告中使用它：http: [//blogs.msdn.com/b/chrisfie/archive/2008/06/04/how-to-display-microsoft-project-task- s-notes-field-in-a-report.aspx](http://blogs.msdn.com/b/chrisfie/archive/2008/06/04/how-to-display-microsoft-project-task-s-notes-field-in-a-report.aspx)。

# google-maps - 处理大量标记

> ID：15630099
> 
> 赞同：1
> 
> 时间：2013-03-26T05:38:39.187
> 
> 标签：google-maps, google-maps-api-3

在这种情况下，我想显示一辆车的日志路线。我创建了折线（flightPath）来显示路线。而且因为我也想知道汽车在某个位置（坐标）的速度，所以我也在路线上创建了标记。[这是我在 Polyline (Route) Hover 上的 Tooltip](https://stackoverflow.com/questions/15429680/tooltip-on-polyline-route-hover)之前的代码（问题）。问题是当标记的数量非常大（大量）时。路线会慢慢显示。geocodezip 先生在该线程上给了我一个参考（[标记太多！](https://developers.google.com/maps/articles/toomanymarkers)）。

*   基于网格的聚类
*   基于距离的聚类
*   视口标记管理
*   闪光
*   融合表
*   标记集群
*   标记管理器

但我混淆了哪种解决方案最适合这种情况。我认为基于距离的聚类或 MarkerManager 可能适合这种情况，但我怀疑也许另一个更好。我想问一下，处理这个问题的最佳方法是什么。标记集群？融合表？或者也许是另一个图书馆？谢谢你。

# javascript - 如果我在 ajax 调用的成功函数中不包含选择器，则无法选择 ajax 加载的内容

> ID：15630101
> 
> 赞同：0
> 
> 时间：2013-03-26T05:38:49.513
> 
> 标签：javascript, jquery, ajax

如果 jquery select 在 ajax 成功函数之外，我无法选择通过 ajax 调用插入的任何元素。如果我成功地移动所有东西，它就可以正常工作。

任何有经验的人都可以帮助我了解正在发生的事情以及如何处理这个问题？我正在搜索 2 天已经找不到任何东西：S

这有效：

```
//Show levels using ajax
//define variables
var levels = 2; //level count can be rewritten to come from DB and not be hardcoded like now
var completed_calls = 0; //count tasks start from 0
var views = new Array();
//All level display ajax function
function create_views(level) {
        $.ajax({
            url: "actions.php",
            type: "GET",
            data: "show_level=" + level,
            cache: false,
            success: function (data){
                views[level] = '<li data-level="' + level + '">' + data + '</li>';

                //Count completed tasks
                completed_calls++;

                //if last level is being called append and activate slider
                if (levels == completed_calls) {
                    //append views to container
                    $(".slides_container").append(views.join(' '));
                    //activate slider
                    var unislider = $(".slides_container").dpUniSlider({
                        //loop: false,
                        draggable: false
                    });

                    //Login and Registration windows on login slide, one closes the other opens up
                    //+ login registration links in header for logged out users
                        //Login
                        $("#header-login, #logwindow").on("click", function(){
                                $("#regsitrationform").hide();
                                $("#register h2").hide();
                            $("#loginform").show().css("opacity",0);
                            unislider.goToSlide(2);
                            $("#loginform, #register h2").delay(480).fadeTo(0, 1);
                                $("#logwindow").removeClass("active").addClass("notactive");
                                $("#regwindow").removeClass("notactive").addClass("active");
                            return false;
                        });

                        //Registration
                        $("#header-register, #regwindow").on("click", function(){
                                $("#loginform").hide();
                                $("#register h2").hide();
                            $("#regsitrationform").show().css("opacity",0);
                            unislider.goToSlide(2);
                            $("#regsitrationform, #register h2").delay(480).fadeTo(0, 1);
                                $("#regwindow").removeClass("active").addClass("notactive");
                                $("#logwindow").removeClass("notactive").addClass("active");
                            return false;
                        });

                        //Pop-up logo tooltip: close
                            $(".close").on("click", function(){
                                $(".logo").fadeTo("slow", 1);
                                $(this).parent().fadeOut("fast");
                                return false;
                            });

                        //Pop-up logo tooltip: clear
                            $(".clear").on("click", function(){
                                $(this).parent().find("input").val("");
                                return false;
                            });

                        //Activate Georgian keyboard for some logos
                            $("input[data-lang=ge]").GeoKBD();
                }
            }
        });
}
//Loop through all levels and display views
for (var i=1; i<=levels; i++) {create_views(i);} 
```

这不会：

```
//Show levels using ajax
//define variables
var levels = 2; //level count can be rewritten to come from DB and not be hardcoded like now
var completed_calls = 0; //count tasks start from 0
var views = new Array();
//All level display ajax function
function create_views(level) {
        $.ajax({
            url: "actions.php",
            type: "GET",
            data: "show_level=" + level,
            cache: false,
            success: function (data){
                views[level] = '<li data-level="' + level + '">' + data + '</li>';

                //Count completed tasks
                completed_calls++;

                //if last level is being called append and activate slider
                if (levels == completed_calls) {
                    //append views to container
                    $(".slides_container").append(views.join(' '));
                    //activate slider
                    var unislider = $(".slides_container").dpUniSlider({
                        //loop: false,
                        draggable: false
                    });
                }
            }
        });
}
//Loop through all levels and display views
for (var i=1; i<=levels; i++) {create_views(i);}

//Ajax call to display-update single level
function update_view(level) {

}

                    //Login and Registration windows on login slide, one closes the other opens up
                    //+ login registration links in header for logged out users
                        //Login
                        $("#header-login, #logwindow").on("click", function(){
                                $("#regsitrationform").hide();
                                $("#register h2").hide();
                            $("#loginform").show().css("opacity",0);
                            unislider.goToSlide(2);
                            $("#loginform, #register h2").delay(480).fadeTo(0, 1);
                                $("#logwindow").removeClass("active").addClass("notactive");
                                $("#regwindow").removeClass("notactive").addClass("active");
                            return false;
                        });

                        //Registration
                        $("#header-register, #regwindow").on("click", function(){
                                $("#loginform").hide();
                                $("#register h2").hide();
                            $("#regsitrationform").show().css("opacity",0);
                            unislider.goToSlide(2);
                            $("#regsitrationform, #register h2").delay(480).fadeTo(0, 1);
                                $("#regwindow").removeClass("active").addClass("notactive");
                                $("#logwindow").removeClass("notactive").addClass("active");
                            return false;
                        });

                        //Pop-up logo tooltip: close
                            $(".close").on("click", function(){
                                $(".logo").fadeTo("slow", 1);
                                $(this).parent().fadeOut("fast");
                                return false;
                            });

                        //Pop-up logo tooltip: clear
                            $(".clear").on("click", function(){
                                $(this).parent().find("input").val("");
                                return false;
                            });

                        //Activate Georgian keyboard for some logos
                            $("input[data-lang=ge]").GeoKBD(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:57:14.580

> 如果 jquery select 在 ajax 成功函数之外，我无法选择通过 ajax 调用插入的任何元素。如果我成功地移动所有东西，它就可以正常工作。

听起来问题是您正在尝试将事件处理程序绑定到尚不存在的元素。尝试在执行代码时出现的父元素上使用`on`,`delegate`或`live`（取决于您使用的 jQuery 版本）。

就像是：

```
$(".slides_container").on('click', 'li[data-level]', function () {...}); 
```

# php - 为什么我的第二个数据库表连接不起作用

> ID：15630102
> 
> 赞同：0
> 
> 时间：2013-03-26T05:38:49.957
> 
> 标签：php, mysql, database, connection

这是我想要做的事情

我想在客户第一次填写我的调查时获取第一个条目中某个列的值并将其与新的比较

所以这是我的代码

```
<?php
$datCurrent = $_SESSION['question11'];

$con = mysql_connect('localhost','root','');
mysql_select_db('esm_quiz', $con);

$countRow = mysql_query("SELECT COUNT(code_exp) FROM esm_resultat");

if(mysql_result($countRow, 0) == 2){

$con2 = mysql_connect('localhost','root','');
mysql_select_db('esm_quiz', $con2);
$SQL = "SELECT * FROM esm_resultat WHERE code_exp = '$datID' ORDER BY date LIMIT 1,2 ";
$row = mysql_query($SQL, $con2);

echo "nombre de ranger<br/>";
    $oldData = $row['q11'];

    if ($datCurrent > $oldData){

        echo"semaine2 > semaine1<br/>";
        echo "".$datCurrent."<br/>";
        echo $oldData;

    }elseif($datCurrent == $oldData){

            echo"semaine2 = semaine1<br/>";

        }elseif($datCurrent < $oldData){

                echo"semaine2 < semaine1<br/>";
            }           
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:48:07.880

*注意：`mysql_query()`只接受 1 个参数。它不同于`mysql_select_db()`*

`mysql_query()`运行或执行您的查询

`mysql_select_db()`只需与所选的特定数据库建立连接即可。

所以要明确说明

在执行查询时，您不能使用它`mysql_query()`来建立与数据库的连接

*见解：您甚至不需要与同一个数据库建立另一个连接即可使用不同的查询功能。您可以在一个连接中使用尽可能多或不同的功能进行查询。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:48:11.883

我建议只使用一个连接，但如果您需要这样做，请尝试[`$new_link`](http://php.net/manual/en/function.mysql-connect.php)为第二个连接添加这样的参数：

```
$con2 = mysql_connect('localhost','root','',true); 
```

如果两个连接的参数相同，这将区分它们。

# winapi - Windows 对等连接

> ID：15630103
> 
> 赞同：2
> 
> 时间：2013-03-26T05:39:00.720
> 
> 标签：winapi, p2p

我现在正尝试在我的应用程序中使用 Windows P2P 本机函数通过 Internet 连接它的实例。为了测试，我设置了一个应用程序，它使用 PeerGraphCreate 来建立 P2P 图，然后使用 PeerPnrpRegister 注册一些对等名称。他们使用 PeerGraphRegisterEvent 注册消息并在应用程序侦听线程中的事件时进入循环。这一面似乎工作得很好。

在第二个应用程序中，我使用成功的 PeerGraphOpen 打开图形。然后，我使用 PeerPnrpResolve 从第一个应用程序解析对等名称。它返回两个 ipv6 地址。但是，当我将其中任何一个提供给 PeerGraphConnect 函数时，它会返回一个 HRESULT 读取“请求的地址在其上下文中无效。我不知道出了什么问题，有人会很乐意提供线索吗？

这是第二个应用程序的代码供参考：

```
HGRAPH hGraph;
HRESULT hr = PeerGraphOpen( L"TestP2PGraph", L"DebugPeer", L"TestPeerDB", NULL, 0, NULL, &hGraph );
if( hr == S_OK || hr == PEER_S_GRAPH_DATA_CREATED )
{
    // Connect to PNRP
    if( SUCCEEDED( PeerPnrpStartup( PNRP_VERSION ) ) )
    {
        ULONG numEndpoints = 1;
        PEER_PNRP_ENDPOINT_INFO* endpointInfo;
        hr = PeerPnrpResolve( L"0.TestBackgroundPeer", L"Global_", &numEndpoints, &endpointInfo );
        if( SUCCEEDED( hr ) )
        {

            PEER_ADDRESS addr;
            addr.dwSize = sizeof( PEER_ADDRESS );
            addr.sin6 = *((SOCKADDR_IN6*)endpointInfo->ppAddresses[1]);
            ULONGLONG connection;
            hr = PeerGraphConnect( hGraph, NULL, &addr, &connection );
            ^^ this reads "Requested address is not valid in its context 
```

如果有任何帮助，我将不胜感激。

# c++ - C++ #include，嵌套包含如何工作？

> ID：15630111
> 
> 赞同：5
> 
> 时间：2013-03-26T05:39:28.713
> 
> 标签：c++, oop, include

因此，我正在学习 C++ 并学习在我的实践中使用 SQLite 来实现跨应用程序运行的数据持久性，这很有趣。

但是我碰到了这个问题：

该程序是一本成绩册，经典的 Ditel C++ 书籍练习。我的课程结构如下：

```
~/classes/Database.h/cpp // A small wrapper for sqlite3
~/classes/Student.h/cpp // The Student object with name and grades (Uses Database)
~/classes/GradeBook.h/cpp // Takes care of most of the application logic and UI (Uses Database and Student)
~/main.cpp // contains just the main function and base Instances of Database and GradeBook 
```

这样我就可以从 main() 实例化单个数据库对象，并通过引用 GradeBook 和 Student 将其传递，以便他们可以使用数据库函数。我尝试了所有可能的包含顺序，事实证明只有这个顺序对我有用。

```
Student includes Database.
GradeBook includes Student, gets access to Database.
main.cpp includes GradeBook, gets access to both Database and Student. 
```

问题是，这对吗？包含似乎从最深的类向后“级联”到 main.cpp 文件似乎完全违反直觉，换句话说，我做得对吗，还是我错过了什么？

如果是这样，关于这种“级联”如何工作的一点解释或指示将会非常棒。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T05:43:03.000

首先，你的头文件应该使用包含保护来防止多重包含：

```
#ifndef MY_HEADER_H
#define MY_HDEADER_H

// code...

#endif  // this file will only ever be copied in once to another file 
```

其次，你应该明确地包含*所有*你需要做的头文件。依靠标头 A 为您包含标头 B 很笨拙，而且由于您使用的是包含保护，您永远不必担心包含两次相同的文件。

因此，要回答您的问题，不，从可以“更好”的意义上说，这不是“正确的”。 `main.cpp`应该包括它需要的所有头文件。他们全部。 `#include`是一种简单的文本替换机制。当您`#include`创建一个文件时，它实际上是粘贴进去的。就是这样。

# php - 忽略不工作的Mysql

> ID：15630113
> 
> 赞同：1
> 
> 时间：2013-03-26T05:39:37.903
> 
> 标签：php, mysql, insert

您好我正在通过脚本导入 csv 表结构如下

```
`contact_id` int(11) NOT NULL auto_increment,
  `contact_first` varchar(255) character set latin1 default NULL,
  `contact_last` varchar(255) character set latin1 default NULL,
  `contact_email` varchar(255) character set latin1 default NULL,
  PRIMARY KEY  (`contact_id`) 
```

csv中的数据是这样的

```
Jim,Smith,jim@tester.com
Joe,Tester,joe@tester.com 
```

我用于插入的查询如下

```
mysql_query("INSERT IGNORE INTO contacts (contact_first, contact_last, contact_email) VALUES
                (
                    '".addslashes($data[0])."',
                    '".addslashes($data[1])."',
                    '".addslashes($data[2])."'
                )
            "); 
```

我在查询中使用了忽略功能，但它不起作用，它继续插入相同的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:43:38.327

`IGNORE`关键字只会对重复行产生您想要的影响。

仅当您在相应列上有主键或唯一键时，才会将行识别为重复。

您还没有真正解释确切的问题是什么，但我怀疑您可能想在`contact_email`列上创建一个唯一键以防止插入重复项。

我还建议至少使用`mysql_escape_string`而不是`addslashes`确保正确编码字符串。

关于 mysql_* 函数已被弃用的事实可能会有评论，因此您应该查看 PDO 或 mysqli_* 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:45:45.347

如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告，而不是参考[DOCS](http://dev.mysql.com/doc/refman/5.1/en/insert.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:47:35.270

**IGNORE**的用途是：

`If you use the IGNORE keyword, errors that occur while executing the INSERT statement are treated as warnings instead. For example, without IGNORE, a row that duplicates an existing UNIQUE index or PRIMARY KEY value in the table causes a duplicate-key error and the statement is aborted. With IGNORE, the row still is not inserted, but no error is issued.`

在您的情况下，您将插入三个相同的值，但作为 ID`auto incremental` 将插入具有相同值的新记录，这是显而易见的。如果要阻止它插入数据库，则必须将唯一索引添加到另一列之一

希望它会有所帮助！

# c# - 在c#中找到结束标签时删除html标签并拆分它

> ID：15630114
> 
> 赞同：0
> 
> 时间：2013-03-26T05:39:44.707
> 
> 标签：c#, windows-phone-8

我想从以下字符串中删除所有 html 标记并将其拆分，而不使用句点（句号）作为匹配字符。下面的字符串是动态的，可以在列表标签​​内有更多的条件

```
<li>This Offer cannot be redeemed with any other offer.</li><li>Only one Offer can be used at a time.</li><li>This Offer is not transferable.</li><li>......</li><li>....</li</ul></div> 
```

我期待以下结果

1.  此优惠不可与任何其他优惠同时兑换。
2.  一次只能使用一个优惠。
3.  此优惠不可转让。
4.  ……
5.  ……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:44:22.037

```
String[] myString = yourString.replace("<li>", "").Split(new string[] { "</li>" }, StringSplitOptions.RemoveEmptyEntries); 
```

尝试这个

```
const string HTML_TAG_PATTERN = "<[^/li]>"; // may require some change
string safeString = Regex.Replace(yourString, HTML_TAG_PATTERN, string.Empty);
String[] myString = safeString.Split(new string[] { "</li>" }, StringSplitOptions.RemoveEmptyEntries); 
```

你也可以试试这个正则表达式

```
string acceptable = "li";
string stringPattern = @"</?(?(?=" + acceptable + @")notag|[a-zA-Z0-9]+)(?:\s[a-zA-Z0-9\-]+=?(?:(["",']?).*?\1?)?)*\s*/?>";
string yourString= Regex.Replace(yourString, stringPattern, string.Empty);
String[] myString = yourString.replace("<li>", "").Split(new string[] { "</li>" }, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:58:47.280

您可以删除所有 html 标记并通过以下代码拆分

```
string HTML_TAG_PATTERN = "<.*?>";
string str = @"<li>This Offer cannot be redeemed with any other offer.</li><li>Only one Offer can be used at a time.</li><li>This Offer is not transferable.</li><li>......</li><li>....</li</ul></div>";
string[] stString = Regex.Replace(str.Replace("</li>", "#$#"), HTML_TAG_PATTERN, string.Empty).Split("#$#".ToCharArray(), StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T05:49:02.323

如果您能够为您的`<li>`then 提供 id，您可以尝试使用类似以下的 javascript 代码>>

```
var str=doccument.getElementById("liID").innerHTML; 
```

您可以根据您的应用程序在 Windows onload 事件或任何特定事件上尝试此操作。

# java - 如何使用后台线程检查套接字是否已连接

> ID：15630116
> 
> 赞同：0
> 
> 时间：2013-03-26T05:39:58.977
> 
> 标签：java, android, sockets

我正在开发应用程序，在该应用程序中，我在读取和写入套接字之前检查端口的可用性。我正在使用以下代码检查状态

```
private boolean isAvailable(String host, int port) {
        try {
            Socket socket = new Socket();
            socket.connect(new InetSocketAddress(host, port), 1000);
            isPortAvailable = socket.isConnected();
        } catch (IOException e) {
            isPortAvailable = false;
        }
        return isPortAvailable;
    } 
```

在此之后，我正在检查此状态`onClick()`

```
if (isAvailable(ip, Integer.parseInt(portLVR))) {
    startActivity(new Intent(getApplicationContext(),ActivityLivingRoom.class));
} else
    Toast.makeText(getApplicationContext(),"Connection Error !", Toast.LENGTH_SHORT).show(); 
```

但我的问题是，如果我在主线程上检查此状态，那么 android 会给我`networkonMainThradException`，那么我如何使用后台线程管理此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:20:28.110

尝试这个

```
 private class SocketCheckTask extends AsyncTask<String , Integer , Boolean> {
       String classname="";
     public SocketCheckTask (String classname) {
              this.classname=classname;
    } 
@Override
protected Boolean doInBackground(String... params) {
    return isAvailable(params[0], Integer.parseInt(params[1]);
  }

@Override
protected void onPostExecute(Boolean isAvailable) {
   if (isAvailable)) {
     Class c=Class.forName("yourpackage"+classname);
startActivity(new Intent(getApplicationContext(),c));
     } else
Toast.makeText(getApplicationContext(),"Connection Error !", Toast.LENGTH_SHORT).show();
     }
} 
```

像这样发送

```
 SocketCheckTask task=new SocketCheckTask ("ActivityLivingRoom");
task.execute(ipadress,port); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:42:36.233

您不能打开套接字，也不能仅仅为了确定主机：端口是否可用而关闭它。

测试任何服务或资源是否可用的唯一真正方法是尝试使用它。

只需在需要时进行连接和 I/O，并在此时处理产生的异常。无论如何，你必须抓住它们。

不要编写试图预测未来的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:16:46.517

我认为最好的解决方案是，在单击事件上启动一个新线程并将您的启动活动代码放在同一个线程中。

如果您使用 toast，您可以从该线程中执行此操作，但如果您计划更新 UI（如红色/绿色状态），则必须使用处理程序和消息。

仅供参考，Asynctask 只是删除了 Thread 的实现并向人们展示了一个很好的抽象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T05:52:56.877

像这样：

```
private class CheckAvailabilityTask extends AsyncTask<Void, Void, Boolean> {
    String ip;
    int port;

    public CheckAvailabilityTask(String ip, int port) {
        this.ip = ip;
        this.port = port;
    }
    @Override
    protected Boolean doInBackground(Void... params) {
        return isAvailable(this.ip, this.port);
    }

    @Override
    protected void onPostExecute(Boolean isAvailable) {
        if (iisAvailable) {
            startActivity(new Intent(getApplicationContext(),ActivityLivingRoom.class));
        } else
        Toast.makeText(getApplicationContext(),"Connection Error !", Toast.LENGTH_SHORT).show();
    }
} 
```

在`onClick()`事件中：

```
new CheckAvailabilityTask(IP, PORT).execute(); 
```

# php - 如何通过阅读更多链接调用下一页

> ID：15630118
> 
> 赞同：0
> 
> 时间：2013-03-26T05:40:09.730
> 
> 标签：php, html, find

我在 php 中使用这个脚本。我已成功添加了 readmore 选项，但我希望任何单击此链接的用户都将打开一个包含完整文章和图库图片的新页面。但我希望它打开到同一个窗口。

```
echo "<div id=message>";
$text = $row["message"]; 
<?php echo substr($text,0,500);?>
<a href="#"?id=<?php echo $row['id']?> title="Full Story Of <?php echo $row['title']?>">Read More &raquo;</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:09:48.927

请尝试以下方法：

```
echo "<div id=message>";
$text = $row["message"]; 
<?php echo substr($text,0,500);?>
<a href="readmorepage.php?id=<?php echo $row['id']?>" title="Full Story Of <?php echo $row['title']?>" target="_self">Read More &raquo;</a> 
```

虽然 _self 是相同的默认值，所以你不需要写它。

# asp.net - 使用 POST 方法的 AJAX 回调

> ID：15630120
> 
> 赞同：0
> 
> 时间：2013-03-26T05:40:10.960
> 
> 标签：asp.net, jquery

我需要一些帮助。我正在使用 jQuery 来引发 ajax 回调：

```
function TestingCallback(controlId) {        

        if (controlId == 'drpControl') {
            var options =           {
                type: "POST",
                url: "Main.aspx",
                data: { drpControl: $(".drpControl").val() },               
                //contentType: "application/json; charset=utf-8",
                //cache: false,
                success: function (data) {
                },
                complete: function (jqXHR, status) {
                    formData = $("#form1").serialize();
                    window.location = "Main.aspx?" + formData;
                    ShowLoadingBar();
                    return false;
                }
            };
            var resp = $.ajax(options);
        }
} 
```

后端我得到这样的数据：

`Request.Form["drpControl"]`，效果很好。

但是，只要我将此行添加到回调选项：`contentType: "application/json; charset=utf-8",`，我就会得到一个 null 值`Request.Form["drpControl"]`。

请协助解决这个问题。

提前致谢

我可以补充一点，我试图引起回发但保留所有控制值，因此这一行：

```
 formData = $("#form1").serialize(); 
   window.location = "Main.aspx?" + formData; 
```

但是在第二次回发（更改drpControl）字段值被清除后，我假设这与IE无法满足长查询字符串有关，我已经在Chrome中对其进行了测试，它运行良好，但不是IE，我需要它来为 IE 8 工作。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:42:34.187

在内容类型中添加这个

```
contentType: "application/json" 
```

指定编码对于 JSON 来说有些多余，因为 JSON 的默认编码是 UTF-8。因此，在这种情况下，接收服务器显然很高兴知道它正在处理 JSON，并假设默认编码为 UTF-8，这就是它在有或没有标头的情况下工作的原因。

**contentType (default: 'application/x-www-form-urlencoded; charset=UTF-8')** - 向服务器发送数据时，使用此内容类型。默认为“application/x-www-form-urlencoded; charset=UTF-8”，在大多数情况下都可以。如果您明确地将内容类型传递给 $.ajax()，那么它将始终被发送到服务器（即使没有发送数据）。如果没有指定字符集，数据将使用服务器的默认字符集传输到服务器；您必须在服务器端对此进行适当解码。

* * *

请注意，但要像这样传递数据

```
data: "{'drpControl' : " + $(".drpControl").val()+ "}", 
```

# java - 在 java 中使用二维数组进行单词搜索 - 越过第二个字母

> ID：15630131
> 
> 赞同：0
> 
> 时间：2013-03-26T05:41:11.467
> 
> 标签：java, arrays, 2d, wordsearch

所以，我的任务是使用二维数组网格创建一个单词搜索程序。

到目前为止，我的代码可以在网格中找到所有 2 个字母的单词，但是长度超过 2 个字母并且代码会跳过它们。我目前在凌晨 2 点累得要死，所以它可能是我明显遗漏的东西，但如果不是，请帮帮我？

当前搜索代码：

```
 /**
     * Searches for a word in this LetterGrid using traditional WordSearch
     * rules.
     * 
     * @param word
     *            the word to look for
     */
    public boolean wordSearch(String word)
    {
            // Check each letter in grid
            for (int row = 0; row < this.noOfRows; row++)
            {
                    for (int col = 0; col < this.rowLength; col++)
                    {
                            if (grid[row][col] == word.charAt(0) && word.length() > 1)
                            {
                                    return gridCheck(row, col, word, 1);
                            }
                            else if (grid[row][col] == word.charAt(0))
                            {
                                    return true;
                            }
                    }

            }
            return false;
    }

    public boolean gridCheck(int row, int col, String word, int charToFind)
    {

            if (charToFind == word.length() - 1)
            {
                    return true;
            }
            else if (charToFind < word.length() - 1)
            {
                    // Where is the letter being checked? -contingency check-
                    // if letter being checked is not touching any edge [most likely]
                    if (row > 0 && row < this.noOfRows && col > 0
                                    && col < this.rowLength)
                    {
                            // FOR CODES SEE CHECKPLACES.TXT
                            // A
                            if (grid[row - 1][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col - 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // B
                            else if (grid[row - 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col, word, word.charAt(charToFind + 1));
                            }
                            // C
                            else if (grid[row - 1][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col + 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // D
                            else if (grid[row][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col - 1, word, word.charAt(charToFind + 1));
                            }
                            // E
                            else if (grid[row][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col + 1, word, word.charAt(charToFind + 1));
                            }
                            // F
                            else if (grid[row + 1][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col - 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // G
                            else if (grid[row + 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col, word, word.charAt(charToFind + 1));
                            }
                            // H
                            else if (grid[row + 1][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col + 1, word,
                                                    word.charAt(charToFind + 1));
                            }

                    }
                    // Letter is touching top left corner
                    if (row == 0 && col == 0)
                    {
                            // E
                            if (grid[row][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col + 1, word, word.charAt(charToFind + 1));
                            }
                            // H
                            else if (grid[row + 1][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col + 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // G
                            else if (grid[row + 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col, word, word.charAt(charToFind + 1));
                            }
                    }
                    // Letter is touching top Right corner
                    if (row == 0 && col == this.rowLength)
                    {
                            // D
                            if (grid[row][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col - 1, word, word.charAt(charToFind + 1));
                            }
                            // F
                            else if (grid[row + 1][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col - 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // G
                            else if (grid[row + 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col, word, word.charAt(charToFind + 1));
                            }

                    }
                    // Letter is Touching bottom Left Corner
                    if (row == this.noOfRows && col == 0)
                    {
                            // B
                            if (grid[row - 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col, word, word.charAt(charToFind + 1));
                            }
                            // C
                            else if (grid[row - 1][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col + 1, word,
                                                    word.charAt(charToFind + 1));
                            }

                            // E
                            else if (grid[row][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col + 1, word, word.charAt(charToFind + 1));
                            }

                    }
                    // Letter is touching bottom right corner
                    if (row == this.noOfRows && col == this.rowLength)
                    {
                            // A
                            if (grid[row - 1][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col - 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // B
                            else if (grid[row - 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col, word, word.charAt(charToFind + 1));
                            }
                            // D
                            if (grid[row][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col - 1, word, word.charAt(charToFind + 1));
                            }
                    }
                    // letter is on top row of grid
                    if (row == 0 && col > 0 && col < this.rowLength)
                    {
                            // D
                            if (grid[row][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col - 1, word, word.charAt(charToFind + 1));
                            }
                            // E
                            else if (grid[row][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col + 1, word, word.charAt(charToFind + 1));
                            }
                            // F
                            else if (grid[row + 1][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col - 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // G
                            else if (grid[row + 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col, word, word.charAt(charToFind + 1));
                            }
                            // H
                            else if (grid[row + 1][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col + 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                    }
                    // Letter is on bottom row of grid
                    if (row == this.noOfRows && col > 0 && col < this.rowLength)
                    {
                            // FOR CODES SEE CHECKPLACES.TXT
                            // A
                            if (grid[row - 1][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col - 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // B
                            else if (grid[row - 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col, word, word.charAt(charToFind + 1));
                            }
                            // C
                            else if (grid[row - 1][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col + 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // D
                            else if (grid[row][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col - 1, word, word.charAt(charToFind + 1));
                            }
                            // E
                            else if (grid[row][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col + 1, word, word.charAt(charToFind + 1));
                            }
                    }
                    // Letter is on Leftmost column of grid
                    if (col == 0 && row > 0 && row < this.noOfRows)
                    {
                            // B
                            if (grid[row - 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col, word, word.charAt(charToFind + 1));
                            }
                            // C
                            else if (grid[row - 1][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col + 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // E
                            else if (grid[row][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col + 1, word, word.charAt(charToFind + 1));
                            }
                            // G
                            else if (grid[row + 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col, word, word.charAt(charToFind + 1));
                            }
                            // H
                            else if (grid[row + 1][col + 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row + 1, col + 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                    }
                    // Letter is on rightmost column of grid
                    if (col == this.rowLength && row > 0 && row < this.noOfRows)
                    {
                            // A
                            if (grid[row - 1][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col - 1, word,
                                                    word.charAt(charToFind + 1));
                            }
                            // B
                            else if (grid[row - 1][col] == word.charAt(charToFind))
                            {
                                    gridCheck(row - 1, col, word, word.charAt(charToFind + 1));
                            }
                            // D
                            else if (grid[row][col - 1] == word.charAt(charToFind))
                            {
                                    gridCheck(row, col - 1, word, word.charAt(charToFind + 1));
                            }

                    }
            }

            // If word is not found
            return false;
    } 
```

网格对象的构造函数 [如果我们需要它] 如下 -

```
/**
     * Constructs a new LetterGrid Object
     * 
     * @param letterGridFile
     *            the file to use
     */
    public LetterGrid(String letterGridFile)
    {
            try
            {
                    // Init Scanner
                    Scanner fileIn = new Scanner(new File(letterGridFile));
                    // Init ArrayList
                    ArrayList<String> nextLine = new ArrayList<String>(10);
                    // Read Data
                    while (fileIn.hasNextLine())
                    {
                            nextLine.add(fileIn.nextLine());
                            noOfRows++;
                    }
                    fileIn.close();

                    rowLength = nextLine.size();
                    grid = new char[noOfRows][rowLength];
                    // Add data to grid
                    for (int rowCount = 0; rowCount < noOfRows; rowCount++)
                    {

                            grid[rowCount] = (nextLine.get(rowCount).toCharArray());
                    }
            }
            // In case file name is mistyped or nonexistent
            catch (IOException exp)
            {
                    System.out.println("Oops, something went wrong.");
                    System.out.println("--> File Not Found");
            }

    } 
```

最后，我用来搜索的参考：

```
Places to check             the X = current letter to check around
Row   Col  Code              A    B    C
-1    -1    A
-1     0    B                D    X    E
-1     1    C
 0    -1    D                F    G    H
 0     1    E
 1    -1    F
 1     0    G
 1     1    H 
```

谢谢大家的帮助=）

-Apok

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T02:17:25.057

尽管您需要添加额外的代码来限制网格范围内的搜索，但这样的事情可能会奏效（这也是 C# 而不是 java，但几乎相同）

```
 private Point FindWordInWordSeacrh(String word)
    {
        char[,] grid = new char[10, 10];

        for (int x = 0; x < 10; x++)
        {
            for (int y = 0; y < 10; y++)
            {
                int iWOrdCharIndex = 0;
                if (grid[x,y] == word[iWOrdCharIndex])
                {
                    // if the first letter of the word is found
                    iWOrdCharIndex++;

                    // Set the direction vector to continue the search
                    for (int xDir = -1; xDir <= 1; xDir++)
                    {
                        for (int yDir = -1; yDir <= 1; yDir++)
                        {
                            // Diretion vector set so check for remaining letters of word
                            for (int iCharPos = 1; iCharPos < word.Length; iCharPos++)
                            {
                                // Check the next letters of the word along this direction vector
                                if (grid[x+xDir, y+yDir] != word[iCharPos])
                                {
                                    // break loop and chnage direction vector if looking in wrong direction 
                                    break;
                                }
                                else if (iCharPos == word.Length)
                                {
                                    // retun the starting point if word found
                                    return new Point(x, y);
                                }
                            }
                        }
                    }
                }

            }
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:22:56.087

那么我看到的第一件事是我认为您的代码将在以下内容中计算“计算机”一词：

```
xxxxxxcxxxxxx
xxxxxoxxxxxxx
xxxxxmxxxxxxx
xxxxxxpuxxxxx
xxxxxretxxxxx 
```

X 是任意字母。

我相信你需要实现一些东西来保留调用之间的搜索方向。

例如，如果您在网格中的某个点找到单词“computer”的第一个字母，然后在西北方向找到“o”，那么您的代码应继续在 NW 方向搜索，直到找到不在单词中的字符（或者当然，如果它撞到“墙”）

# cordova - 返回上一页适用于模拟器而不是 iOS 设备 jquerymobile

> ID：15630134
> 
> 赞同：3
> 
> 时间：2013-03-26T05:41:43.547
> 
> 标签：cordova, jquery-mobile, photoswipe

我正在用这种方法更改页面

```
$.mobile.changePage("Preview.html", {
        transition : "slide",
        role : "page",
        changeHash:true                            
    }); 
```

这就是我的预览页面的样子

```
 <div data-role="page"  data-name="preview" class="prew">
        <div data-role="content">
            //content
       </div>
    </div> 
```

现在，当我触摸屏幕时，我必须返回上一页。

所以我创建了这个函数

```
$('.prew').live('tap', function() {
         alert('clicked');
         history.go(-1);//<--this works in simulator not in device.
         //window.history.back() ;//<--this also works in simulator not on device.
         //navigator.app.backHistory();<--this works fine on android not on iOS.
    }); 
```

编辑：我使用了一个名为 photoswipe 的插件，它导致了这个问题。history.go(-1),history.back() 或 data-rel="back" 在其他页面上工作正常。

photoswipe 阻止返回上一页。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:22:37.060

这是您可以使用的方法。但是，页面应该具有唯一的 ID 才能使其正常工作。

[**在这里测试一下**](http://jsfiddle.net/Palestinian/Uqvns/)。

```
$('.prew').on('tap', function() {

 // get the ID of the previous page
 var previous = '#' + $.mobile.activePage.prev('div[data-role="page"]')[0].id;

 // move to previous page with reverse effect
 $.mobile.changePage(previous, {
    transition: 'slide',
    reverse: true
 });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T11:47:59.860

我不会推荐`data-rel="back"`。以我的经验，这似乎会导致问题（尤其是当用户使用 ctrl + f5 手动强制重新加载时）。

如果您已正确处理[历史记录](http://www.w3schools.com/jsref/obj_history.asp)，那么我建议您使用`history.back()` [function](http://www.w3schools.com/jsref/met_his_back.asp)。

```
$('.prew').live('tap', function() {
    alert('clicked');
    history.back();
}); 
```

另外我认为在 Page tag 中使用 ID 比使用 class 更好`(e.g. id="prew")`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T07:08:53.317

因此，不要使用 javascript 方法转到上一页。为什么不向按钮/链接添加 data-rel="back" 属性。

然后一切都将由 jQuery Mobile (JQM) 自己处理。

```
<a href="#" data-rel="back">Back</a> 
```

# c - 为什么我的 C 程序使用函数来计算一年中的总月数会失败？

> ID：15630135
> 
> 赞同：0
> 
> 时间：2013-03-26T05:41:46.790
> 
> 标签：c, function, structure

我编写了一个程序，该程序逐渐从一个包含一个月信息的简单结构发展为包含 12 个非闰年相同信息结构的数组。现在，我正在尝试包含一个函数，“当给定月份编号时，返回一年中的总天数，包括该月份。假设问题 3 的结构模板和适当的此类结构数组已声明对外。”

当我按下运行时，我得到两个错误，我都不明白。它们是：“体系结构 x86_64 的未定义符号：“_months”，引用自：main.o ld 中的 _days：未找到体系结构 x86_64 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 到见调用）”

任何帮助将不胜感激，谢谢。

```
#include <stdio.h>
int days(int monthnum);
struct month {
char name[10];
char abbreviaton[4];
int days;
int monthnum;
};
int main(void)
{

struct month months[12] = {
    {"January", "Jan", 31, 1},
    {"February", "Feb", 28, 2},
    {"March", "Mar", 31, 3},
    {"April", "Apr", 30, 4},
    {"May", "May", 31, 5},
    {"June", "Jun", 30, 6},
    {"July", "Jul", 31, 7},
    {"August", "Aug", 31, 8},
    {"September", "Sep", 30, 9},
    {"October", "Oct", 31, 10},
    {"November", "Nov", 30, 11},
    {"December", "Dec", 31, 12},
};

struct month *sign;

sign = &months[12];

days(months[12].monthnum);

return 0;
}
extern struct month months[12];
int days(int monthnum)
{
int index, total;

if (monthnum < 1 || monthnum > 12)
    return(-1);
else
{
    for (index = 0, total = 0; index < monthnum; index++)
        total += months[index].days;
return(total);
}
} 
```

这是我现在拥有的代码。该程序有效：

```
#include <stdio.h>
int days(int monthnum);
struct month {
char name[10];
char abbreviaton[4];
int days;
int monthnum;
};
struct month months[12] = {
    {"January", "Jan", 31, 1},
    {"February", "Feb", 28, 2},
    {"March", "Mar", 31, 3},
    {"April", "Apr", 30, 4},
    {"May", "May", 31, 5},
    {"June", "Jun", 30, 6},
    {"July", "Jul", 31, 7},
    {"August", "Aug", 31, 8},
    {"September", "Sep", 30, 9},
    {"October", "Oct", 31, 10},
    {"November", "Nov", 30, 11},
    {"December", "Dec", 31, 12},
};
int main(void)
{
int value;
int count = 0;
struct month *sign;

sign = &months;

printf("Enter month number: ");

scanf("%d", &months[count].monthnum);

value = days(sign->monthnum);

printf("%d", value);

return 0;
}
extern struct month months[];
int days(int monthnum)
{
int index, total;

if (monthnum < 1 || monthnum > 12)
    return(-1);
else
{
    for (index = 0, total = 0; index < monthnum; index++)
        total += months[index].days;
return(total);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:45:46.060

直接的问题是由于这条线；

```
extern struct month months[12]; 
```

这里没有要引用的数组定义；`months`被声明在里面`main`，没有别的地方。摆脱那条线。

接下来你有逻辑问题：

```
days(months[12].monthnum); 
```

您已经超出了数组的范围。数组是 0 索引的，即一个包含 12 个元素的数组包含有效的索引 0-11。12 太远了。

顺便说一句，当您显式初始化每个元素时，您不需要指定数组的维度。只需使用：

```
struct month months[] = {
    {"January", "Jan", 31, 1},
    {"February", "Feb", 28, 2},
    {"March", "Mar", 31, 3},
    {"April", "Apr", 30, 4},
    {"May", "May", 31, 5},
    {"June", "Jun", 30, 6},
    {"July", "Jul", 31, 7},
    {"August", "Aug", 31, 8},
    {"September", "Sep", 30, 9},
    {"October", "Oct", 31, 10},
    {"November", "Nov", 30, 11},
    {"December", "Dec", 31, 12},
}; 
```

编译器知道有十二个元素，因为你告诉它。现在，当/如果添加或删除元素时，您不必更改维度。

下一个问题；可变范围。你的`days`函数中有这个：

```
total += months[index].days; 
```

好吧，因为是本地的，所以`days`无法访问。你需要学习和理解变量作用域。`months``months``main`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T05:49:26.573

`extern struct month months[12];``months`意味着您在某处定义了一个全局数组。您的`months`数组不是全局的，它是您的`main`函数的本地数组。这就是错误。其他消息不是第二个错误。

您还应该注意，您不应该访问`months[12]`，因为该数组中只有 12 个元素 -`months[0]`到`months[11]`.

# gridview - 格式日期时间转换显示默认日期时间

> ID：15630139
> 
> 赞同：0
> 
> 时间：2013-03-26T05:42:04.180
> 
> 标签：gridview, yii

我有一个 Cgridview 日期输出为 `2013-03-25 13:30:00`

但我想在这个输出中`Monday 25 March 2013 1:30 pm`

我已经用它来获得

```
array('name'=>'Appointment','value'=>  'date("j F Y,g:i a",  strtotime("$data->Appointment"))'), 
```

但它的表现`1 January 1970,1:00 am`

我在这里错过了什么？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:25:03.287

不知道为什么`strtotime`在这里不起作用，但是使用 Yii 你可以使用：

*   [http://www.yiiframework.com/doc/api/1.1/CDateFormatter](http://www.yiiframework.com/doc/api/1.1/CDateFormatter)
*   [http://www.yiiframework.com/doc/api/1.1/CDateTimeParser](http://www.yiiframework.com/doc/api/1.1/CDateTimeParser)

例如：

```
array(
  'name'=>'Appointment',
  'value'=>'Yii::app()->dateFormatter->format("EEEE d MMMM y hh:mm:ss a", CDateTimeParser::parse($data->Appointment, "yyyy-MM-dd H:mm:ss"))'
), 
```

如果你想在其他地方使用这种日期格式，你可以在你的模型中定义一个 getter。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T09:07:35.580

请尝试以下模式。这个对我有用。

```
array(
'name'=>'added_date',
'value'=>'date("j F Y,g:i a",strtotime($data->added_date))',
), 
```

你试过这种方式吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T08:10:23.833

试试这个它可能会解决你的问题

```
array('name'=>'Appointment','value'=>'date("j F Y,g:i a",$data->Appointment)'), 
```

# javascript - 数学随机和算术移位

> ID：15630141
> 
> 赞同：1
> 
> 时间：2013-03-26T05:42:16.447
> 
> 标签：javascript, bit-shift

如果我在 JavaScript 中有以下代码：

```
var index1 = (Math.random() * 6) >> 0;
var index2 = Math.floor(Math.random() * 6); 
```

`index1`或的结果`index2`介于`0`和之间`6`。

我一定对我对`>>`运营商的理解感到困惑。我认为通过使用[算术移位](http://en.wikipedia.org/wiki/Arithmetic_shift)，结果`index1`将介于`1`和之间`6`。

我注意到，但是如果我使用运算符，我不需要使用`Math.floor()`或`Math.round()`for 。`index1``>>`

我知道我可以通过添加`1`两个索引来实现这一点，但我希望有一种更好的方法来确保结果是 from `1`to`6`而不是添加`1`.

我知道[按位运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)将其操作数视为 32 位（零和一）的序列，而不是十进制、十六进制或八进制数。例如，十进制数字 9 的二进制表示为 1001。按位运算符对这种二进制表示执行操作，但它们返回标准的 JavaScript 数值。

**更新：**

我在*第 26 行*看到了这个 CAAT[教程](http://labs.hyperandroid.com/static/CAAT-Samples/tutorials/t9-5.html)中的原始用法，我想知道这是否真的会返回一个介于and之间的随机数，而且它似乎只会返回一个介于and之间的随机数。所以你永远不会真正看到鱼的图像！*`1``6``0``6``anim1.png`*

 *提前感谢您的任何启发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:59:44.823

维基百科说“（负数的算术右移相当于在一些历史计算机使用的有符号数的补码表示中使用向 0 舍入的除法。）”

不完全是一个答案，但想法是 >> 0 是非常具体的，一般不应该用于获得 1 到 6 之间的范围。

大多数人会告诉你做

```
 Math.floor((Math.random()*10)+1); 
```*

# cobol - 在 cobol 中初始化索引变量

> ID：15630146
> 
> 赞同：1
> 
> 时间：2013-03-26T05:42:37.330
> 
> 标签：cobol, mainframe

我们有一个 COBOL 程序，其中我们将值填充到 COBOL 内部表中，然后搜索该表以找出某个值。在此搜索之前，我们初始化表索引变量。

```
SET PAF-IDX                  TO 1\. 
```

谁能澄清一下，如果在 COBOL 中允许初始化索引变量，就像这样。

```
INITIALIZE                   PAF-IDX. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:24:32.283

不，你为什么要“初始化”它？

这来自 IBM Enterprise Cobol 手册：

```
identifier-1
Receiving areas.
identifier-1 must reference one of the following:
v An alphanumeric group item
v A national group item
v An elementary data item of one of the following categories:
Alphabetic
Alphanumeric
Alphanumeric-edited
DBCS
External floating-point
Internal floating-point
National
National-edited
Numeric
Numeric-edited
v A special register that is valid as a receiving operand in a MOVE
statement with identifer-2 or literal-1 as the sending operand.
When identifier-1 re 
```

编辑：

OpenCobol Programmer's Guide 专门记录了它：

```
The list of data items eligible to be set to new values by this statement is:
Every elementary item specified as identifier-1 ..., PLUS...
Every elementary item defined subordinate to every group item specified as dentifier-1 
..., with the following exceptions:
USAGE INDEX items are excluded.
Items with a REDEFINES as part of their definition are excluded; this means that
tems subordinate to them are excluded as well. 
```

Cobol 标准草案不太明确，但这些项目在 INITIALIZE 中使用时通过生成 SET 而不是 MOVE 进行处理：DATA-POINTER、FUNCTION-POINTER、OBJECT-REFERENCE 或 PROGRAM-POINTER。

编辑：

看到 OpenCobol 引用并不像我想的那样“具体”：在 IBM Cobol 中，目前，没有任何东西不能通过成为 MOVE 的目标来进行操作可以被初始化。这与当前的 OpenCobol 相同。草稿 Cobol 列出了一些例外情况，但既不包括 INDEXED BY（不是表本身的一部分，而是编译器自己定义存储的单独项目）也不包括 USAGE INDEX。

# ruby-on-rails - 从 Gemfile.lock 更新 Gemfile，以冻结 gem

> ID：15630155
> 
> 赞同：5
> 
> 时间：2013-03-26T05:43:30.543
> 
> 标签：ruby-on-rails, gem, bundler, gemfile

从 Gemfile 生成 Gemfile.lock 后，是否有任何工具可以往返返回以冻结 Gemfile 中的版本。我宁愿避免手动操作。

背景：在 gems 上冻结次要版本是一种很好的做法，例如，如果 Gemfile.lock 是 2.4.1，我想更新 Gemfile 以包含 ~> 2.4（[如here所述](http://ryanbigg.com/2011/01/why-you-should-run-bundle-update/)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T19:40:18.153

在运行捆绑安装之前，您应该在 GemFile 本身中定义您想要冻结您的应用程序的 gem 版本。一旦定义好并运行`bundle install`，它将生成一个 Gemfile.lock ，其中包含所有已安装 gem 的版本及其依赖项。

同样，.lock 文件是自动生成的，不应手动编辑。这就是 GemFile 的用途。

# php - jQuery AJAX 成功后刷新页面内容

> ID：15630158
> 
> 赞同：2
> 
> 时间：2013-03-26T05:43:57.030
> 
> 标签：php, jquery, ajax

我正在用 jQuery 更新我的数据库，`.click()`然后调用我的 AJAX；我的问题是，一旦 SQL 运行了刷新页面内容的最佳方式，我就可以再次执行之前的操作，目前我正在使用`window.location.reload(true);`，但我不喜欢那种方法，因为我不不想让页面重新加载我想要的只是我用来更新它的元素上的内容，以便在 AJAX 成功后匹配数据库字段

这是我的 jQuery：

```
$(document).ready(function(){
    $("span[class*='star']").click(function(){
        var data = $(this).data('object');

        $.ajax({
            type: "POST",
            data: {art_id:data.art_id,art_featured:data.art_featured},
            url: "ajax-feature.php",
            success: function(data){
                if(data == false) {
                    window.location.reload(true);
                } else {
                    window.location.reload(true);
                }  
            }
        });
        console.log(data.art_featured);
    });
}); 
```

PHP：

```
<section class="row">
    <?php
    $sql_categories = "SELECT art_id, art_featured FROM app_articles" 

    if($result = query($sql_categories)){
        $list = array();

        while($data = mysqli_fetch_assoc($result)){
            array_push($list, $data);
        }

        foreach($list as $i => $row){
    ?>
    <div class="row">
        <div class="column one">
            <?php if($row['art_featured']==0){
            ?>
            <span data-object='{"art_id":"<?php echo $row['art_id'];?>", "art_featured":"<?php echo $row['art_featured'];?>"}' class="icon-small star"></span>
            <?php
                } else if($row['art_featured']==1) {
            ?>
            <span data-object='{"art_id":"<?php echo $row['art_id'];?>", "art_featured":"<?php echo $row['art_featured'];?>"}' class="icon-small star-color"></span>
            <?php
                }
            ?>
        </div>
    </div>
    <?php
        }
    } else {
        echo "FAIL";
    }
    ?>
</section> 
```

编辑：

我需要更新类`.star`或`.star-color`根据`art_featured`当时的 a 值来更新类`art_featured`，基本上无论我在哪里呼应，`art_featured`一旦 Ajax 成功，我需要重新加载。

编辑：

```
$("span[class*='star']").click(function(){
    var data = $(this).data('object');
    var $this = $(this); //add this line right after the above

    $.ajax({
        type: "POST",
        data: {art_id:data.art_id,art_featured:data.art_featured},
        url: "ajax-feature.php",
        success:function(art_featured){
            //remember $this = $(this) from earlier? we leverage it here
            $this.data('object', $.extend($this.data('object')),{
                art_featured: art_featured
            });
        }
    });
    console.log(data.art_featured);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:07:26.980

如果你可以`art_featured`在 MySQL 数据库成功后返回，它会将它发送回 ajax 成功函数。在这里，我们可以操作数据，但是，首先我们应该存储对被点击元素的引用。

```
var data = $(this).data('object');
var $this = $(this); //add this line right after the above 
```

现在在我们的成功函数中，而不是`data`只使用 use `art_featured`，因为这就是我们要返回的全部内容。现在我们可以更新目标上的现有数据对象。

```
success:function(art_featured){
    //remmeber $this = $(this) from earlier? we leverage it here
    $this.data('object', $.extend($this.data('object'),{
        art_featured: art_featured
    }));
} 
```

以上将扩展现有的数据对象，允许基于我们正在扩展的对象重新定义键：值对。

您应该会发现它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:56:33.600

我不完全理解您的问题，所以让我们假设您要更改的内容是具有类 div 的 div，并且您想用刚刚发送的内容（即数据）替换内容。然后您需要返回数据（可能使用 JSON 最简单），然后您的调用将是

```
 $.ajax({
        type: "POST",
        data: {art_id:data.art_id,art_featured:data.art_featured},
        url: "ajax-feature.php",
        dataType:'json',
        success: function(data){
          for(n in data){
            $('.div').append('<p>'+data[n]+'</p>');
            }
        }
}); 
```

注意将 dataType 返回为 json，然后通过 for n in data 遍历 json 数据，然后使用 n 从数组中调用数据。因此，如果第三项是名称，那么您可以执行类似的操作

```
 $('.div').append('<p>Name is '+data[3]+'</p>'); 
```

您必须通过 json 编码从 PHP 表单返回数据，这可以使用 json_encode php 函数完成。如果是跨域，则必须使用 jsonp

编辑：如果您在发送表单之前已经知道要替换的数据（即不需要响应），那么您可以将这些变量放入成功回调中。这将等待 ajax 成功返回，然后更新您的 div。

所以你可以拥有这个

```
var updateText = yourDataFromForm

$.ajax({
        type: "POST",
        data: {art_id:data.art_id,art_featured:data.art_featured},
        url: "ajax-feature.php",
        dataType:'json',
        success: function(data){

            $('.div').append('<p>'+updateText+'</p>');

        }
}); 
```

# algorithm - 算法的缓存和命中率编码

> ID：15630160
> 
> 赞同：-1
> 
> 时间：2013-03-26T05:44:01.180
> 
> 标签：algorithm, caching, memory, computer-science, hit

我知道命中率是缓存中找到的数据的百分比。但我不知道如何找到算法的命中。我在想，对于代码 1，我将有 11 个块，每个块有 4 个元素，对于代码 2，我将有 4 个块，每个块有 11 个元素，每次我看到 4 个元素丢失。不确定这是否有意义。欢迎任何建议

假设一个 11 行 4 列的二维数组 A，像这样存储在内存中`[0][0], [0][1], [0][2], [0][3], [1][0], [1][1], …[10][2], [10][3]`

还假设有 10 个内存块的完全关联的单级缓存，每个内存块保存 4 个字节，以及一个 FIFO 替换策略。

每一行都完全适合一个缓存块，不幸的是，整个阵列无法放入缓存中。缓存行太小了...

现在给出以下 2 个代码，1-我如何计算命中率 2-假设缓存访问时间为 5ns，内存访问时间为 70ns，并且假设对内存和缓存的访问重叠，我如何计算每个代码的 EAT ?

代码 1：

```
for (int row = 0; row < 11; row ++)
{
   for (int column = 0; column < 4; column ++)
   {
      myByte = A [ row, column ];
   }
} 
```

代码 2：

```
for (int column = 0; column < 4; column ++)
   {
   for (int row = 0; row < 11; row ++)
   {
      myByte = A [ row, column ];
   }
} 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:55:40.543

好吧，我们不计算算法的命中率。我们以利用缓存概念的方式编写算法，即获得最大命中率。您的问题实际上属于计算机组织和体系结构。

无论如何，您的 2D - 数组以行主要顺序存储在内存中。因此，对于代码 1，第一个内部 for 循环将从包含四个元素的内存中获取一个块，因为在缓存中没有找到任何内容（因为它是未命中）（即内存访问时间 70ns）。现在后续三个元素即 [0 ][1],[0][2],[0][3] 将从 cahce 获取（即 3*5 = 15ns），即访问前四个元素的总时间 = 70+3*5 = 85ns。

上面的过程将在你的 10 个缓存块中重复你的数组的 10 行。但是对于使用 FIFO 概念的最后一个块，会发生块交换，但时间将保持不变。所以总时间 = 85*11 = 935ns

对于代码 2，

对于内部 for 循环的每次迭代，都会获取一个块。因此，每次访问内存时，您都没有使用缓存的概念，即它是一段糟糕的代码。如果您的数组以列主要顺序存储在内存中，则代码 2 效果最佳。

# android - 已禁用 Android 按钮变暗

> ID：15630161
> 
> 赞同：0
> 
> 时间：2013-03-26T05:44:04.163
> 
> 标签：android, button

我正在创建我的第一个 Android 应用程序，该应用程序将获利，并将其出售给一家公司。我在 Android 应用程序开发方面还不是很先进。

我有两个按钮。我已经能够检测到何时到达 ScrollView 的底部。一旦发生这种情况，其中一个按钮就会变成可点击的，Button.setClickable(true);

当按钮不可点击时，我希望它变暗。

这是我写的另一个应用程序的示例。它是用 Java 编写的，但它不是 Android 应用程序。

![JSpeak](../Images/bfd3393e61fe0de22fd75ed1b2f6f9a6.png)

许多按钮和其他组件被禁用，直到带有菱形（打开扫描）的那个被打开。那些被禁用的组件看起来很暗淡。我想知道如何为 Android 完成相同的操作。我已经搜索了谷歌，但还没有找到任何相关的东西。

PS 如果您想了解更多关于我创建的图片中的软件的信息。它是开源的，你可以在这里查看。

[https://github.com/BullShark/JSpeak](https://github.com/BullShark/JSpeak)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:53:59.173

与 Anup Cowkur 类似的答案，但我相信定义`drawable`具有不同状态的单个是更清洁和更好的做法。

**dimmable_button.xml**（放在你的 res/drawables 文件夹中）

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item state_enabled="true"
           android:drawable="@drawable/clickable_image" />
     <item state_enabled="false"
           android:drawable="@drawable/dimmed_image" />
</selector> 
```

然后，`layout`定义按钮的文件：

```
<button
    ....
    android:background="@drawable/dimmable_button" /> 
```

现在，当您执行`button.setEnabled(bool)`此操作时，按钮的背景会自动变为暗淡的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:47:02.547

只需使用您想要的任何外观制作另一个图像，并在它不可点击时将图像的背景更改为它。

当它变暗时：

```
button.setBackgroundResource(R.drawable.dim_image); 
```

当它再次变为可点击时：

```
button.setBackgroundResource(R.drawable.clickable_image); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:56:04.563

你试过了吗

`myButton.setEnabled(false);`?

或者

`android:clickable`可以通过xml使用

# arrays - 将数据导入 Simulink 框图问题

> ID：15630162
> 
> 赞同：1
> 
> 时间：2013-03-26T05:44:07.033
> 
> 标签：arrays, matlab, time, import, simulink

致所有 MATLAB 和 Simulink 用户，

我正在做一个项目，但在从 Simulink 块中的“来自工作区的信号”导入数据时遇到问题。

**我的情况：**

我需要在 22 秒的采样周期内将 565 行 2 列数据输入到我的 Simulink 框图中。每个数据采样时间为 22/565。

但是，输出数据是 [565 x 2]，由于维度问题，它会影响下游 Simulink 模块的输入。

例如，理想情况下，[1 x 2] 输出乘以 [2 x 1] 并在 22 秒内重复 565 次。现在，[565 x 2] 输出信号由于尺寸原因无法通过。

**我解决问题的尝试：**

我尝试使用“来自工作区”而不是“来自工作区的信号”，但遇到了一些问题。

t=[0:22/565:22]' M (565 行 n 2 列值) data.time=t; 数据.signals.values = M; data.signals.dimensions=[565 2];

**运行仿真时会弹出此错误：**

*“在'test/From Workspace'中指定为工作空间输入的无效结构格式变量。结构'dimensions'字段必须是标量或具有2个元素的向量。此外，该字段必须与输入信号的维度兼容存储在“值”字段中。" *

如果有人可以为我的案例提供见解/解决方案/替代方法，我将不胜感激。

谢谢你！

问候，KO

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:38:51.823

看起来你应该使用

```
data.signals.dimensions = 2; 
```

例如

```
>> t= linspace(0,10,1001)';
>> data.time = t;
>> data.signals.values = [sin(t) cos(t)];
>> data.signals.dimensions = 2; 
```

# javascript - 通过 JS 或 Jquery 返回输入组的当前索引

> ID：15630163
> 
> 赞同：0
> 
> 时间：2013-03-26T05:44:11.160
> 
> 标签：javascript, jquery, html

休斯敦我们有一个情况.. 任何光线将不胜感激。

很难解释，但会尽力而为。我做了功课，但无法解决。具有类似于以下的代码。（静态的，很难改变。需要找到现有结构的解决方案。）。

有问题的数组是grade[]。

```
(line 1)  \<input id='grade[]'  onclick="curr_ndx(this);" \>   // index of grade[] is 0
(line 2)  \<input id='grade[]'  onclick="curr_ndx(this);" \>   // index of grade[] is 1
(line 3)  \<input id='grade[]'  onclick="curr_ndx(this);" \>   // index of grade[] is 2 
```

我需要在“grade[]”数组中检索输入的“grade[]”索引。如果用户点击第 2 行的“输入”，它应该警告“1”，或者如果用户点击（第 3 行输入），则应该提示“2”。

谢谢一堆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:50:01.753

在 jQuery 中，您可以使用`.index()`方法来找出给定项目的兄弟是这样的：

HTML：

```
<div id="grades">
<input \>
<input \>
<input \>
</div> 
```

代码：

```
$("#grades input").click(function() {
    alert($(this).index());
}); 
```

工作演示：http: [//jsfiddle.net/jfriend00/xvVGx/](http://jsfiddle.net/jfriend00/xvVGx/)

仅供参考，您的输入字段上也不应该有重复的 id 值。也许你的意思是使用`name='grade[]'`而不是`id='grade[]'`.

* * *

如果您有其他输入字段并且只想计算`id='grade[]'`那些，那么您可以这样做：

```
$("#grades input").click(function() {
    alert($(this).index("[id*='grade[]']"));
}); 
```

* * *

但是，你真的不应该有重复的 id 值，所以它应该是这样的：

HTML：

```
<div id="grades">
<input name='grade[]' \>
<input name='grade[]' \>
<input name='grade[]' \>
</div> 
```

代码：

```
$("#grades input[name='grade[]']").click(function() {
    alert($(this).index("[name='grade[]']"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:53:19.953

如果您给所有元素起相同的名称，则函数可以是：

```
function curr_ndx(el) {
  var els = document.getElementsByName(el.name);
  for (var i=0, iLen=els.length; i<iLen; i++) {
    if (els[i] == el) return i;
  }
} 
```

如果元素在表单中，您也可以利用它：

```
function curr_ndx(el) {
  var els = el.form[el.name];
  for (var i=0, iLen=els.length; i<iLen; i++) {
    if (els[i] == el) return i;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:52:33.227

您可以使用 Jquery `index()` [http://api.jquery.com/index/](http://api.jquery.com/index/)。

```
$('input').click(function() {
  alert($(this).index());
}) 
```

# .net - 无法检测绑定到 EF 导航属性 MVVM 的 Datagrid 记录中的更改（与列表视图一起使用）

> ID：15630168
> 
> 赞同：1
> 
> 时间：2013-03-26T05:44:24.990
> 
> 标签：.net, wpf, entity-framework, mvvm, entity-framework-5

我有一个使用 MVVM 模型和实体框架 5 进行数据访问的 WPF 应用程序。我有一个用户控件，其中包含员工的主/详细视图。员工列表的列表视图和“详细信息”网格，其数据上下文设置为列表视图的选定员工。在该网格中，我有一个数据网格，它绑定到所选员工的导航属性（名为employee_certification 的属性）。所有绑定都正常工作并且没有错误，即使在输出窗口中也是如此。

**问题**：我的问题是我无法检测到用户是否对导航属性的记录进行了任何更改。我目前使用更改跟踪器来测试实体中的更改以启用某些命令按钮，例如保存、撤消等。但是更改跟踪器从未检测到**导航**属性（称为雇员认证）中的更改。

以下是我从模型中获取员工实体的方法：

```
 Public Function GetEmployee_All(Context As FTC_Context) As ObservableCollection(Of employee) Implements IEmployeeDataService.GetEmployee_All
        Dim employees = Context.employees.Include("employee_certification").ToList            
        Return New ObservableCollection(Of employee)(employees)
    End Function 
```

这是导航属性到数据网格的绑定。（有效，这意味着它确实显示了正确的记录）

```
<DataGrid  Grid.Column="1" Grid.Row="2" MinWidth="350"        
            ItemsSource="{Binding ElementName=DetailControl, Mode=TwoWay, Path=DataContext.employee_certification}" 
            CanUserAddRows="False" CanUserDeleteRows="False" >
    <DataGrid.Columns>
    </DataGrid.Columns>
</DataGrid> 
```

即使绑定有效并且显示了正确的记录，我也无法确定用户是否对导航属性的记录进行了更改。

**目标**：如果可能的话，我希望能够通过上下文本身检测变化。我不想编写一个帮助类来将当前记录与数据库原件进行比较。有人可以帮我这样做吗？

**编辑#1：** 我认为这可能与数据网格有关。我在我的应用程序的另一个用户控件中有以下列表视图，并且可以通过 EF 上下文跟踪对列表视图记录中的记录字段所做的任何更改。

绑定 vendor_account 是实体 vandor 的导航属性的列表视图：

```
 <ListView Grid.Column="1" Grid.Row="2"
           Style="{DynamicResource FTC_SubListView}"
           ItemContainerStyle="{DynamicResource FTC_SubListViewItem}"
           ItemsSource="{Binding vendor_account, Mode=TwoWay}"
           ItemTemplate="{DynamicResource FTC_VendorAccountsTemplate}"  /> 
```

以下是我如何确定是否有更改以在我的视图中启用保存按钮：

```
 Private Function CanSaveExecute() As Boolean
        If _Selection.HasErrors = False Then
            If (From entry In Context.ChangeTracker.Entries(Of vendor)() Where entry.Entity.idVendor = _Selection.idVendor And entry.State = EntityState.Modified Select entry).Count > 0 Then
                Return True
            ElseIf (From entry In Context.ChangeTracker.Entries(Of vendor_account)() Where entry.Entity.idVendor = _Selection.idVendor And (entry.State = EntityState.Modified Or entry.State = EntityState.Added) Select entry).Count > 0 Then
                Return True
            Else
                Return False
            End If
        Else
            Return False
        End If
    End Function 
```

但如果我对数据网格使用以下内容，它永远不会对emplopyee_certification 导航属性进行更改计数：

```
 Private Function CanSaveExecute() As Boolean
        If _Selection.HasErrors = False Then
            If (From entry In Context.ChangeTracker.Entries(Of employee)() Where entry.Entity.idEmployee = _Selection.idEmployee And entry.State = EntityState.Modified Select entry).Count > 0 Then
                Return True
            ElseIf (From entry In Context.ChangeTracker.Entries(Of employee_certification)() Where entry.Entity.idEmployee = _Selection.idEmployee And entry.State = EntityState.Modified Select entry).Count > 0 Then
                Return True
            Else
                Return False
            End If
        Else
            Return False
        End If
    End Function 
```

有谁知道为什么我的列表视图允许更改跟踪器从更改跟踪器中查看 x 个已更改的实体，但不能使用数据网格？

**编辑#2**

好的，所以我缩小范围，我将列表视图和数据网格放在同一个用户控件上，并以相同的方式将它们绑定到对象的数据上下文的导航属性，如上所述。员工具有作为链接记录的认证，这是员工对象的导航属性 (employee_certification)。

如果我对employee_certification 记录使用列表视图，那么当我对这些记录进行更改时，我可以查询更改跟踪器以计算更改并在计数大于零时启用保存和撤消按钮。

```
 From entry In Context.ChangeTracker.Entries(Of employee_certification)() Where entry.Entity.idEmployee = _Selection.idEmployee And entry.State = EntityState.Modified Select entry).Count 
```

当我使用数据网格并更改employee_certification 记录中的任何字段时，更改跟踪器不会将其中任何一个标记为已修改。

这是数据网格/列表视图的定义方式

```
 <DataGrid  Grid.Column="1" Grid.Row="2" MinWidth="350"        
            ItemsSource="{Binding employee_certification, Mode=TwoWay}" 
            CanUserAddRows="False" CanUserDeleteRows="False" >
    <DataGrid.Columns>
        <!--  Custom Defined Columns Go Here  -->
    </DataGrid.Columns>
</DataGrid>
<ListView Grid.Column="1" Grid.Row="3"
            Style="{DynamicResource FTC_SubListView}"
            ItemContainerStyle="{DynamicResource FTC_SubListViewItem}"
            ItemsSource="{Binding employee_certification, Mode=TwoWay}"
            ItemTemplate="{DynamicResource MyTemplate}">
</ListView> 
```

由于内置排序等，我想使用数据网格。

**编辑问题#2：**为什么更改跟踪器跟踪列表视图编辑中的更改而不是数据网格编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:27:50.433

这很令人沮丧。正如标题所暗示的，我认为问题出在实体框架、可观察集合和数据网格的一些交互上。事实证明，这只是 DataGridTemplateColumn 的绑定声明的问题。

根据此[SO ANSWER](https://stackoverflow.com/questions/14193507/datagrid-and-observable-collection-in-wpf)，当使用您自己的 DataGridTemplateColumn 时，DataGrid 将所有绑定上的 UpdateSourceTrigger 更改为 Explicit。这必须由事件处理。但是，我正在使用 MVVM 模式并且不希望事件来处理单元格更改。我希望更改自动反映回我的视图模型中的集合，所以我必须像这样显式声明列绑定：（即对于组合框）

```
 SelectedValue="{Binding idCertification, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=LostFocus}" 
```

我必须添加 UpdateSourceTrigger=LostFocus 才能将更改反映回可观察的集合。现在我可以直接绑定到导航属性，并使用实体框架中的*Context.changeTracker*来计算更改（employee_certification，如上面的问题所示），以启用保存和撤消命令。

两天的搜索发现它只是对绑定的简单添加，arrrgh。

# .net-4.0 - 无法在 .NET 4.0 上加载 Exchange Powershell 管理单元：Microsoft.Exchange.Data.* 的类型初始化程序引发异常

> ID：15630177
> 
> 赞同：0
> 
> 时间：2013-03-26T05:45:04.760
> 
> 标签：.net-4.0, exchange-server, powershell-2.0

我最近将我的应用程序从 .NET Framework 2.0 升级到了 .NET 4.0。升级后我遇到了一个奇怪的问题。我无法加载 Microsoft Exchange/Powershell 程序集。

```
rc = RunspaceConfiguration.Create(); warning = null;
 if (Version == "2010") 
info = rc.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.E2010", out warning); 
```

例外情况之一是：

```
[Could not load file or assembly 'System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.][1] 
```

该代码在 .NET 2.0 中运行良好。我无法理解问题的原因。但是参考[这篇文章](http://www.devproconnections.com/article/net-framework/net-framework-45-versioning-faces-problems-141160 "Microsoft 正在准备将其 .NET Framework 4.5 作为就地更新发布")，我得出的结论是这是一个错误。请建议灵魂。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T20:35:06.493

我认为您可能会遇到与以下相同的问题：

[无法加载 Exchange Powershell 管理单元：“Microsoft.Exchange.Data.Directory.Globals”的类型初始化程序引发异常](https://stackoverflow.com/questions/12480447/cannot-load-exchange-powershell-snap-in-the-type-initializer-for-microsoft-exc)

您是否安装了 .NET 4.5？它显然会覆盖 .NET 4.0 并导致 Exchange cmdlet 出现问题。上面的帖子通过卸载 .NET 4.5 并安装 .NET 4.0 解决了这个问题。

希望这可以帮助！

# java - 将本地结帐版本与 SVN 当前版本进行比较

> ID：15630179
> 
> 赞同：0
> 
> 时间：2013-03-26T05:45:16.260
> 
> 标签：java, svn, svnkit, svn-checkout

可以使用存储库当前版本检查本地签出修订号。

即我从存储库中签出一个文件并在本地进行更改，然后我提交其他用户签出相同的文件并进行更改并提交文件。在提交之前，我需要检查本地版本和存储库版本是否相同。让用户知道版本不兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:59:54.033

在我看来，您想将本地文件与存储库中的最新版本进行比较。

“diff”命令会将您的本地文件与您签出的版本进行比较：

> [http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.tour.cycle.examine.diff](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.tour.cycle.examine.diff)

您可能还想使用“status”命令查看自检出后存储库中是否有任何更改：

> [http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.tour.cycle.examine.status](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.tour.cycle.examine.status)

如果这些都不是您想要的，我相信您可以通过浏览这些页面找到您正在寻找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:52:46.197

如果您有旧副本，则 SVN 不允许直接进行相同的更改，然后 SVN 在您的本地。在每次提交时，它都会更改文件更新的修订。并且在提交这些更改时，它会显示差异，并会在您拉出后要求调整或覆盖其他人所做的更改和差异。

您也可以使用“SVN 显示日志”选项，它将显示所有更新的文件。如果您双击任何文件，它将显示您的工作文件和 SVN 上的文件的比较。

您可以右键单击文件夹/文件，可以看到文件和文件夹的修订版本。

![在此处输入图像描述](../Images/de3a8723857dc46bb83347f688cbc560.png)

# python - 如何在python中按顺序打印函数中的3个参数

> ID：15630180
> 
> 赞同：0
> 
> 时间：2013-03-26T05:45:17.303
> 
> 标签：python

问题是：写一个接受3个参数的函数，并按顺序打印出来

我是新手，所以我很欣赏一个我能理解的简单功能。

例如：

```
>>> print_in_order(5,6,4)
In order: 4, 5, 6 
```

我写：

```
def print_in_order(x,y,z):
    print "in order: ", sorted([x,y,z]) 
```

然后我打电话：

```
print_in_order(5,6,4) 
```

但结果是

```
In order: [4,5,6] 
```

我想去掉方括号，但仍然无法找到出路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:03:37.243

好吧，既然你已经证明你确实尝试过，我收回我之前说的话：

```
def print_in_order(x,y,z):
    print "in order: " + ", ".join(map(str, sorted([x,y,z]))) 
```

扩展这个，如果你想支持任意数量的参数，你可以使用这个：

```
def print_in_order(*args):
    print "in order: " + ", ".join(map(str, sorted(args))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:21:55.783

```
def print_in_order(x,y,z):
    print "in order: %d, %d, %d" % tuple(sorted([x,y,z])) 
```

# python - 解释这个算法

> ID：15630182
> 
> 赞同：1
> 
> 时间：2013-03-26T05:45:38.903
> 
> 标签：python, palindrome

在解决 codechef 上的[回文问题](http://www.codechef.com/problems/TAPALIN)时，我编写了一个算法，该算法在超过 10^6 的测试用例上给出了 TLE。因此，在已经解决它的人的带领下，我在 python 中编写了以下代码。

```
################################################
### http://www.codechef.com/problems/TAPALIN ###
################################################
def pow(b,e,m):
    r=1
    while e>0:
        if e%2==1:
            r=(r*b)%m
        e=e>>1
        b=(b*b)%m
    return r
def cal(n,m):
    from math import ceil
    c=280000002
    a=pow(26, int(ceil(n/2)), m)
    if(n%2==0):
        return ((52*(a-1+m)%m)*c)%m
    else:
        return ((52*(((a-1+m)*c)%m))%m+(a*26)%m)%m
c=int(raw_input())
m=1000000007
for z in range(c):
    print cal(int(raw_input()),m) 
```

pow 函数是[从右到左的二进制方法](http://en.wikipedia.org/wiki/Modular_exponentiation)。我不明白的是：

1.  值 280000002 是从哪里来的？
2.  为什么我们需要执行这么多的 mod 操作？
3.  这是我不知道的一些著名算法吗？

几乎每个在 codechef 上提交的代码都使用了这个算法，但我无法破译它的工作原理。任何与该理论的联系将不胜感激。

我仍然无法弄清楚到底发生了什么。**任何人都可以为这个公式/算法写一个伪代码吗？也帮助我理解这段代码的时间复杂度**。另一件让我吃惊的是，如果我把这段代码写成：

```
################################################
### http://www.codechef.com/problems/TAPALIN ###
################################################
def modular_pow(base, exponent):
    result=1
    while exponent > 0:
        if (exponent%2==1):
            result=(result * base)%1000000007
        exponent=exponent >> 1
        base=(base*base)%1000000007
    return result
c=int(raw_input())
from math import ceil
for z in range(c):
    n=int(raw_input())
    ans=modular_pow(26, int(ceil(n/2)))
    if(n%2==0):
        print ((52*((ans)-1+ 1000000007)%1000000007)*280000002)%1000000007
    else:
        print ((52*((((ans)-1+ 1000000007)*280000002)%1000000007))%1000000007+(ans*26)%1000000007)%1000000007 
```

这将性能从**0.6secs 提高到 0.4 secs**。尽管最好的代码在 0.0 秒内运行。我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:19:40.343

这个数字`280000002`是 25 mod 的模乘逆`10^9 + 7`，因为我们知道`10^9 + 7`它是素数，所以它可以简单地使用 计算`pow(25, 10^9 + 7 - 2, 10^9 + 7)`。在此处阅读更多信息：[http ://en.wikipedia.org/wiki/Modular_multiplicative_inverse](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)

而且我们需要执行如此多的 mod 操作，因为我们不想使用大数字 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:23:29.700

以前从未见过这个算法，但是通过一些更简单的测试用例开始了解正在发生的事情（顺便说一句，我猜每个人都在使用它，因为它是代码厨师的最佳答案，每个人都只是在复制它，我不知道'不要认为你必须假设这是唯一的方法）。

要回答您的问题：

> 值 280000002 是从哪里来的？

280000002 是 25 mod 1000000007 的模乘逆。这意味着以下同余为真

```
280000002 * 25 === 1 (mod 1000000007) 
```

> 为什么我们需要执行这么多的 mod 操作？

可能只是为了不处理大量的数字。尽管其中有一些额外的数学运算在我看来只是使数字大于所需的数字，但请参阅最后的注释。从理论上讲，您可以在最后只做一个大模型并获得相同的结果，但我们的微型 CPU 可能不喜欢这样。

> 这是我不知道的一些著名算法吗？

再次，我对此表示怀疑。这不是一个真正的算法，因为它是一个混搭的数学公式。

说到数学，里面有些东西对我来说是有问题的。自从我搞砸了这些东西已经有一段时间了，但我很确定这`(52*(a-1+m)%m)`将永远等同于`(52*(a-1)%m`since `52m mod m = 0`。不知道你为什么要在那里添加这么大的数字，如果你摆脱它，你可能会看到一些性能提升。

# cobol - COBOL/CICS 中的字段验证

> ID：15630189
> 
> 赞同：1
> 
> 时间：2013-03-26T05:46:04.887
> 
> 标签：cobol, mainframe

我正在为我的大学事务处理课程编辑一些源代码。我们正在与 COBOL/CICS 合作，该程序是一个录像带出租系统。我们有一个要进行的更改列表，其中一项让我卡住了（自从我参加 COBOL 课程以来，这是自 2010 年秋季学期以来，所以不幸的是，我比我应该做的要生疏得多）。有一个“客户维护”部分，用户可以在其中添加新客户。新客户的项目之一是邮政编码，就目前而言，它将接受任何输入作为有效输入，但我们需要让它只接受数字值（我知道如何做）以及特定的格式：“12345”、“123456789”或“12345-6789”，并且只能以“12345”或“12345-6789”的形式写入记录。其他任何内容，例如“1234” 或 12345-6' 将导致错误。如何检查这些字段的格式是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:33:27.110

由于有效的数据格式是固定的，所以很容易。

```
05  nice-name-for-zip-code pic x(10).
05  filler redefines nice-name-for-zip-code.
    10  simple-zip-first-part pic x(5).
    10  simple-zip-last-part pic x(5).
        88  simple-zip-last-part-valid value space.
05  filler redefines nice-name-for-zip-code.
    10  complex-zip-first-part pic x(5).
    10  complex-zip-separator pic x.
        88  complex-zip-separator value "-".
    10  complex-zip-last-part pic x(4).
05  filler redefines nice-name-for-zip-code.
    10  long-zip-first-part pic x(9).
    10  long-zip-last-part pic x. 
        88  long-zip-last-part-valid value space.

if ( simple-zip-first-part numeric )
and ( simple-zip-last-part-valid )
    ....

if ( complex-zip-first-part numeric )
and ( complex-zip-separator-valid )
and ( complex-zip-last-part numeric )
    ....

if ( long-zip-first-part numeric )
and ( long-zip-last-part-valid )
    .... 
```

如果任何 IF 为真，则您的格式有效。否则无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T20:14:38.057

您还可以使用 CICS 命令 BIF DEEDIT，它将删除非数字字符，减号通过该测试。之后，测试 5 或 10 的长度。

或者，您可以像这样使用 88：

```
01 Zip-Validation-Field.
 02 filler pic x(5).
  88 Zip-Valid value '00000' thru '99999'.
 02 filler pic x(5).
  88 Zip-plus-4-valid value '-0000' thru '-9999'. 
```

并测试：

```
If Zip-Valid and Zip-plus-4-valid... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T02:48:10.997

您可以使用 MOVE CORR

```
 01 TX-ZIPCODE          PIC X(08) VALUE '    -   '.
 01 TX-ZIPCODE-R REDEFINES TX-ZIPCODE.
    03 ZIPCODE-P1       PIC 9(04).
    03 FILLER           PIC X(01).
    03 ZIPCODE-P2       PIC 9(03).
 01 NUM-ZIPCODE         PIC X(07).
 01 NUM-ZIPCODE-R REDEFINES NUM-ZIPCODE.
    03 ZIPCODE-P1       PIC 9(04).
    03 ZIPCODE-P2       PIC 9(03).

 MOVE CORR TX-ZIPCODE-R TO NUM-ZIPCODE-R.

 IF NUM-ZIPCODE IS NOT NUMERIC
*     ERRO
 END-IF. 
```

希望我对你有帮助！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:47:46.767

一种不同的方法可能是让 CICS BMS 支持为您完成大部分验证和编辑。这假设您正在使用带有 CICS 的 3270 型终端（可能是这种情况）

尝试将邮政编码设置为 BMS 地图上的组字段。这具有创建具有多个部分的单个输入字段的效果。

您的 BMS 地图定义如下所示：

```
 ZIP1     DFHMDF POS=(2,1),LENGTH=5,GRPNAME=ZIP,ATTRB=(UNPROT,NUM)
 SEP      DFHMDF POS=(2,6),LENGTH=1,GRPNAME=ZIP,ATTRB=(ASKIP,NORM),INITIAL='-'
 ZIP2     DFHMDF POS=(2,7),LENGTH=5,GRPNAME=ZIP,ATTRB=(UNPROT,NUM),JUSTIFY=(LEFT,BLANK) 
```

邮政编码将出现在第 2 行的开头 (POS=(2..))。它将有一个 5 位输入字段 (ZIP1) 用于邮政编码的第一部分，然后是一个硬编码输入保护破折号 (SEP) 和另一个左对齐的 5 位空白填充输入字段 (ZIP2) 用于邮政编码的最后一部分邮政编码。

从此时起，BMS 将强制用户在邮政编码的第一部分输入 5 位数字，不能触摸破折号，并可选择在输入字段的第二部分输入 0 到 5 位数字。这些字段都不接受非数字数据（受输入保护的 SEP 除外）

当您从屏幕检索数据时，您需要做的就是检查 ZIP2 是否为数字，以确定输入的是长邮编还是短邮编。如果 Zip 长，则存储整个内容，如果短，则仅存储 ZIP1。

# javascript - 如何在 ios 中获取 UIWebview 中的内容

> ID：15630191
> 
> 赞同：0
> 
> 时间：2013-03-26T05:46:24.453
> 
> 标签：javascript, ios, xcode, uiwebview, nsstring

我的视图控制器中有一个 uiwebview，用于显示 epub 内容，如何从 UIWebView 获取 NSString 中的内容？这段代码对我不起作用

```
NSString *html = [webView stringByEvaluatingJavaScriptFromString: @"document.body.innerHTML"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:49:22.097

试试这个：

```
NSString *html = [webView stringByEvaluatingJavaScriptFromString:@"document.body.innerText"];//may be `"document.body.innerText;"` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T12:32:28.757

使用此委托确保在显示内容之前加载 Web 视图：

```
 - (void)webViewDidFinishLoad:(UIWebView *)webView
   {
    if(!webView.isLoading){
       //if you need to get all ressources
        NSString html=[webView    stringByEvaluatingJavaScriptFromString:@"document.documentElement.outerHTML"];
       //if you need just the content of Body
       NSString html=[webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"];
         }

    } 
```

# javascript - 如何查看网站在谷歌上的排名？

> ID：15630194
> 
> 赞同：-5
> 
> 时间：2013-03-26T05:46:40.670
> 
> 标签：javascript

我在 .NET 上创建了一个站点，我想检查我的站点在 Google 上的排名。我不想使用任何 Google API 或任何页面排名检查工具。有没有办法通过代码检查我的网站排名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:52:07.897

在谷歌的 TOS 中它说：

> 您明确同意不通过任何自动化方式（包括使用脚本或网络爬虫）访问（或尝试访问）任何服务。

如果您构建查询以检查某些内容。它可能会工作一段时间。但随后它会询问您是否是人类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:53:11.093

尝试[SEOStats](https://github.com/eyecatchup/SEOstats)或[http://www.halotis.com/2009/08/02/google-page-range-python-script/](http://www.halotis.com/2009/08/02/google-page-range-python-script/)

请参阅[通过 API (PHP) 获取 Google PageRank](https://stackoverflow.com/questions/1344917/getting-google-pagerank-via-an-api-php)

# php - google api v3 博主帖子插入 php ajax

> ID：15630195
> 
> 赞同：3
> 
> 时间：2013-03-26T05:46:42.693
> 
> 标签：php, google-api

我试图通过使用 api 来获取博主的博客信息。

```
 $blogger = new Google_BloggerService($client);
$data = $blogger->blogs->getByUrl(array('url'=>'http://puwaruwa.blogspot.com/')); 
```

它运行良好，并给了我详细信息。

然后我尝试插入如下帖子

```
 <?php

$token = json_decode($token, true); //already got the token

?>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$.ajax({
                type:"POST",
                url: "https://www.googleapis.com/blogger/v3/blogs/55555555555555/posts/",
                Authorization: "OAuth <?php echo $token['access_token']; ?>",
                data: {"kind": "blogger#post",
              "blog": {
                "id": "555555555555555"
              },
              "title": "A new post",
              "content": "With <b>exciting</b> content..."},
                dataType: 'json',
                contentType: 'application/json',
                success:function(data){alert(data);}
                });

</script> 
```

但它给了我

```
 {
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

请帮助我通过 api v3 使用 php 将帖子插入博客博客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:32:34.230

这比我试图在博客上发帖要简单。我在这里只展示发布帖子的 php 代码，它对我来说工作正常。

```
$blogger = new Google_BloggerService($client);    
$mypost = new Google_Post();
$mypost->setTitle('this is a test 1 title');
$mypost->setContent('this is a test 1 content');
$data = $blogger->posts->insert('5555555555555555555', $mypost); 
```

谢谢。

完整的详细帖子位于 [http://gayanonline.blogspot.com/2013/03/google-api-v3-with-php-using-blogger.html](http://gayanonline.blogspot.com/2013/03/google-api-v3-with-php-using-blogger.html)

# c++ - malloc / 免费用于调整数组大小

> ID：15630196
> 
> 赞同：0
> 
> 时间：2013-03-26T05:46:47.110
> 
> 标签：c++, c, malloc, free

队列.cpp

```
#include "Queue.h"
#include "Log.h"
void Queue::resize(int n)
{
  Log("[Resize] Req: %d ", n);
  DATA_TYPE *temp = (DATA_TYPE *) malloc(sizeof(DATA_TYPE) * n);
  int i, j;
  for(i = f, j = 0; i < r; i++, j++)
    *(temp + j) =  *(buffer + i);

  Log("Buf: %p ", buffer);
  free(buffer);
  buffer = temp;
  _buf_len = n;
  r = r - f;
  f = 0;
  Log("Buf new: %p \n", buffer);
}

void Queue::enqueue(DATA_TYPE c)
{ 
  if(N == _buf_len)
    resize(N * 2);

  buffer[r++] = c;
  N++; 
  Log("[Enqueue] D: %d N: %d BUF_LEN: %d \n", c, N, _buf_len);
}

DATA_TYPE Queue::dequeue(void)
{
   DATA_TYPE c = buffer[f++]; 
   N--;
   if(N > 0 && N == _buf_len / 4)
     N / 2 == 0 ? resize(1) : resize( N / 2);

   Log("[Dequeue] D: %d N: %d BUF_LEN: %d \n", c, N, _buf_len);
   return c;     
}

DATA_TYPE Queue::peek(void)
{
   return buffer[f]; 
}

bool Queue::isempty(void)
{
  return r == f;
}

int Queue::size(void)
{
  return N;
}

Queue::Queue(int n)
{
  buffer = (DATA_TYPE *) malloc(sizeof(DATA_TYPE) * n);
  f = r = 0;
  N = 0;
  _buf_len = n; 
}

Queue::Queue()
{
  buffer = (DATA_TYPE *) malloc(sizeof(DATA_TYPE));
  f = r = 0;
  N = 0;
  _buf_len = 1; 
} 

Queue::~Queue()
{
  free(buffer);
} 
```

队列.h

```
#ifndef QUEUE_H
#define QUEUE_H

#include <stdlib.h>

typedef int DATA_TYPE;

class Queue
{ 

  public:
    Queue(int);
    Queue();
    ~Queue();   
    void enqueue(DATA_TYPE);
    DATA_TYPE dequeue(void);
    bool isempty(void);
        DATA_TYPE peek(void);
    int size(void);     
  private:
        int N;
        int _buf_len;
    int f;
    int r;
    DATA_TYPE *buffer;
    void resize(int);

};

#endif 
```

日志.h

```
#ifndef LOG_H
#define LOG_H

#include "stdio.h"
#include "stdarg.h"
#define DEBUG

void Log(const char *, ...);
#endif 
```

日志文件

```
#include "Log.h"

void Log(const char *frmt, ...)
{
  #ifdef DEBUG
  va_list ap;
  va_start(ap, frmt);
  vprintf(frmt, ap);
  va_end(ap);
  #endif
} 
```

主文件

```
#include "Queue.h"

#include "stdio.h"
#include "ctype.h"
#include "string.h"

int main(int argc, char *argv[])
{
  Queue queue;
  ++argv;
  //--argc;
  while(--argc > 0)
  {
    if(strcmp(*argv, "-") != NULL)
      queue.enqueue(atoi(*argv));
    else 
       if(!queue.isempty())
         queue.dequeue();//printf("%d\n", queue.dequeue()); 
     ++argv;    
  }

  printf("\nItems left on queue: %d\n", queue.size());

  return 0;
} 
```

上面提到的代码在运行时

```
./a.out 12 23 34 56 11 22 33 44 55 66 77 88 - - - 34 56 - - - 123 67 56 78 - - 45 - 78 - 23 - 1256 - - 4

[Enqueue] D: 12 N: 1 BUF_LEN: 10 <br>
[Enqueue] D: 23 N: 2 BUF_LEN: 10 <br>
[Enqueue] D: 34 N: 3 BUF_LEN: 10 <br>
[Enqueue] D: 56 N: 4 BUF_LEN: 10 <br>
[Enqueue] D: 11 N: 5 BUF_LEN: 10 <br>
[Enqueue] D: 22 N: 6 BUF_LEN: 10 <br>
[Enqueue] D: 33 N: 7 BUF_LEN: 10 <br>
[Enqueue] D: 44 N: 8 BUF_LEN: 10 <br>
[Enqueue] D: 55 N: 9 BUF_LEN: 10 <br>
[Enqueue] D: 66 N: 10 BUF_LEN: 10 <br>
[Resize] Req: 20 Buf: 0xb7f010 Buf new: 0xb7f030  <br>
[Enqueue] D: 77 N: 11 BUF_LEN: 20 <br>
[Enqueue] D: 88 N: 12 BUF_LEN: 20 <br>
[Dequeue] D: 12 N: 11 BUF_LEN: 20 <br>
[Dequeue] D: 23 N: 10 BUF_LEN: 20 <br>
[Dequeue] D: 34 N: 9 BUF_LEN: 20 <br>
[Enqueue] D: 34 N: 10 BUF_LEN: 20 <br>
[Enqueue] D: 56 N: 11 BUF_LEN: 20 <br>
[Dequeue] D: 56 N: 10 BUF_LEN: 20 <br>
[Dequeue] D: 11 N: 9 BUF_LEN: 20 <br>
[Dequeue] D: 22 N: 8 BUF_LEN: 20 <br>
[Enqueue] D: 123 N: 9 BUF_LEN: 20 <br>
[Enqueue] D: 67 N: 10 BUF_LEN: 20 <br>
[Enqueue] D: 56 N: 11 BUF_LEN: 20 <br>
[Enqueue] D: 78 N: 12 BUF_LEN: 20 <br>
[Dequeue] D: 97 N: 11 BUF_LEN: 20 <br>
[Dequeue] D: 0 N: 10 BUF_LEN: 20 <br>
[Enqueue] D: 45 N: 11 BUF_LEN: 20 <br>
[Dequeue] D: 12 N: 10 BUF_LEN: 20 <br>
[Enqueue] D: 78 N: 11 BUF_LEN: 20 <br>
[Dequeue] D: 23 N: 10 BUF_LEN: 20 <br>
[Enqueue] D: 23 N: 11 BUF_LEN: 20 <br>
[Dequeue] D: 77 N: 10 BUF_LEN: 20 <br>
[Enqueue] D: 1256 N: 11 BUF_LEN: 20 <br>
[Dequeue] D: 88 N: 10 BUF_LEN: 20 <br>
[Dequeue] D: 34 N: 9 BUF_LEN: 20 <br>
[Enqueue] D: 4 N: 10 BUF_LEN: 20 <br>

Items left on queue: 10
*** glibc detected *** ./a.out: free(): invalid next size (fast): 0x0000000000b7f030 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7e626)[0x7fc65d098626]
./a.out[0x400bac]
./a.out[0x400c88]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7fc65d03b76d]
./a.out[0x4006c9]
======= Memory map: ========
00400000-00402000 r-xp 00000000 08:06 1969214                            /home/mohit/learnc/algoritms/a.out
00601000-00602000 r--p 00001000 08:06 1969214                            /home/mohit/learnc/algoritms/a.out
00602000-00603000 rw-p 00002000 08:06 1969214                            /home/mohit/learnc/algoritms/a.out
00b7f000-00ba0000 rw-p 00000000 00:00 0                                  [heap]
7fc65cd20000-7fc65ce19000 r-xp 00000000 08:06 2756166                    /lib/x86_64-linux-gnu/libm-2.15.so
7fc65ce19000-7fc65d018000 ---p 000f9000 08:06 2756166                    /lib/x86_64-linux-gnu/libm-2.15.so
7fc65d018000-7fc65d019000 r--p 000f8000 08:06 2756166                    /lib/x86_64-linux-gnu/libm-2.15.so
7fc65d019000-7fc65d01a000 rw-p 000f9000 08:06 2756166                    /lib/x86_64-linux-gnu/libm-2.15.so
7fc65d01a000-7fc65d1cd000 r-xp 00000000 08:06 2756134                    /lib/x86_64-linux-gnu/libc-2.15.so
7fc65d1cd000-7fc65d3cc000 ---p 001b3000 08:06 2756134                    /lib/x86_64-linux-gnu/libc-2.15.so
7fc65d3cc000-7fc65d3d0000 r--p 001b2000 08:06 2756134                    /lib/x86_64-linux-gnu/libc-2.15.so
7fc65d3d0000-7fc65d3d2000 rw-p 001b6000 08:06 2756134                    /lib/x86_64-linux-gnu/libc-2.15.so
7fc65d3d2000-7fc65d3d7000 rw-p 00000000 00:00 0 
7fc65d3d7000-7fc65d3ec000 r-xp 00000000 08:06 2756155                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fc65d3ec000-7fc65d5eb000 ---p 00015000 08:06 2756155                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fc65d5eb000-7fc65d5ec000 r--p 00014000 08:06 2756155                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fc65d5ec000-7fc65d5ed000 rw-p 00015000 08:06 2756155                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fc65d5ed000-7fc65d6cf000 r-xp 00000000 08:06 3678116                    /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fc65d6cf000-7fc65d8ce000 ---p 000e2000 08:06 3678116                    /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fc65d8ce000-7fc65d8d6000 r--p 000e1000 08:06 3678116                    /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fc65d8d6000-7fc65d8d8000 rw-p 000e9000 08:06 3678116                    /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fc65d8d8000-7fc65d8ed000 rw-p 00000000 00:00 0 
7fc65d8ed000-7fc65d90f000 r-xp 00000000 08:06 2756114                    /lib/x86_64-linux-gnu/ld-2.15.so
7fc65dae6000-7fc65daeb000 rw-p 00000000 00:00 0 
7fc65db0b000-7fc65db0f000 rw-p 00000000 00:00 0 
7fc65db0f000-7fc65db10000 r--p 00022000 08:06 2756114                    /lib/x86_64-linux-gnu/ld-2.15.so
7fc65db10000-7fc65db12000 rw-p 00023000 08:06 2756114                    /lib/x86_64-linux-gnu/ld-2.15.so
7fff2987b000-7fff2989c000 rw-p 00000000 00:00 0                          [stack]
7fff299b0000-7fff299b1000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted 
```

问题：为什么我在`~Queue()`被免费调用（缓冲区）时收到此错误

我已经编辑了原始问题，即“删除缓冲区而不是空闲（缓冲区）”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:00:46.777

您的错误源于您将调用`malloc`与调用混合在一起的事实`delete`。

解决方案：你用 分配的所有东西`malloc`，你用 取消分配`free`。你用你创造的一切都`new`用`delete`. 如果你混合和匹配你会得到未定义的行为，这最肯定意味着错误和错误，正如你在这里所见证的那样。

试试这个：

```
free(buffer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:42:53.713

我的问题解决了。这是一个逻辑错误。使用 Valgrind 我得到了根本原因。问题：函数 enqueue() 在 (N == _buf_len) 期间出现逻辑错误，我需要再添加一个条件 (N == _buf_len || r == _buf_len)。
例如，当 Buf_len = 8（32 字节的 malloc），r = 8，n = 5，并且如果再次调用 enqueue，我尝试在边界处插入对象，即缓冲区 [8]。当在析构函数中，我试图释放块，它指向由 malloc 分配的外部内存。

```
 void Queue::enqueue(DATA_TYPE c)
{ 
  if(N == 0)
    resize(1);
  else
    if(N == _buf_len || r == _buf_len)
      resize(N * 2);
  buffer[r++] = c;
  N++; 
  Log("[Enqueue] D: %d N: %d BUF_LEN: %d R: %d F: %d BUFFER: %p\n", c, N, _buf_len, r, f, buffer);
}

DATA_TYPE Queue::dequeue(void)
{
   DATA_TYPE c = buffer[f++]; 
   N--;
   if(N > 0 && N == _buf_len / 4)
     _buf_len / 2 == 0 ? resize(1) : resize( _buf_len / 2); 
   Log("[Dequeue] D: %d N: %d BUF_LEN: %d R: %d F: %d BUFFER: %p\n", c, N, _buf_len, r, f, buffer);
   return c;
} 
```

# r - 多个数据集的 R 程序中的 T.test

> ID：15630198
> 
> 赞同：0
> 
> 时间：2013-03-26T05:46:48.813
> 
> 标签：r

所以我知道 R 有一个内置函数 t.test....基本上只是 t.test(y1,y2) 等但是我无法访问我想要比较的数据。

所以我基本上有两个单独的数据输出第一个被称为“数据”，它的输出类似于这个

```
Time    Kilometres
0   0
1   0.05
2   0.1
3   0.15
4   0.2
5   0.25
6   0.3
7   0.35
8   0.4
9   0.45
10  0.5 
```

另一个输出称为“hunt”并具有此输出

```
cuts: [20,25)
   Time Kilometres
21   20        7.3
22   21        8.4
23   22        9.5
24   23       10.6
25   24       11.7
------------------------------------------------------------ 
cuts: [25,30)
   Time Kilometres
26   25       12.8
27   26       13.9
28   27       15.0
29   28       16.1
30   29       17.2
------------------------------------------------------------ 
cuts: [30,35)
   Time Kilometres
31   30       18.3
32   31       19.4
33   32       20.5
34   33       21.6
35   34       22.7 
```

我的问题是，是否可以为每次切割进行单独的 T.tests。就像在将每个切割与我的第一个数据“数据”进行比较时，为每个切割获取单独的 p 值。

所以 cut 的 p 值：[0,5] = cut:[5:10] = etc 再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:31:55.370

到目前为止，尚不清楚您要在每个组中测试什么。可以用作两组`t.test`测试或一组测试。每次剪辑只有一组。当用作一组测试时，需要对运行测试的平均值有一个假设值，但尚不清楚哪种参考值是合适的。我想知道您是否真正想做的是在每个切割类别中进行线性回归以测试趋势？这将隐含地针对零斜率进行测试。这是经过轻微测试的代码：

```
 lapply( split( dat, cut.grp) , 
         function(dgrp) summary(lm( Kilometres ~ Time, data=dgrp))$coefficients [ ,"Pr(>|t|)"] ) 
```

# php - 将文件从网站直接传输或下载到您的站点服务器

> ID：15630204
> 
> 赞同：1
> 
> 时间：2013-03-26T05:47:23.300
> 
> 标签：php, ftp, transfer

我想将 wordpress 从其网站 ( [wordpress.org](http://www.wordpress.org/) ) 直接下载到我的 ftp 主机。听说有办法直接做，不用下载再上传。

我该怎么做？使用 ftp 或 php。

**编辑：**
我没有对服务器的 ssh 访问权限。它是一个免费服务器：[FreeWebHostingArea.com](http://FreeWebHostingArea.com/)

**edit2：**
一些网站提供了一种通过 php 将 fie 发送到目标服务器的方法。但我需要一种将文件下载（而不是发送）到我的 ftp 服务器的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:50:21.193

经过一番搜索，我找到了如何下载它。这是代码：

```
<?php

$new_file = file_get_contents('http://wordpress.org/latest.zip') or exit('unable to open from wordpress');

$current = fopen('latest.zip','c') or exit("Unable to open file!");
fclose($current);

chmod('latest.zip',0777);

file_put_contents('latest.zip',$new_file);

echo 'Done';

?> 
```

该脚本首先从[wordpress.org](http://wordpress.org/)
打开“latest.zip”， 然后在主机中打开一个名为“latest.zip”的文件。并关闭它。它应该设置`chmod`以写入文件。
最后它将下载文件的内容以“latest.zip”的形式发送到主机。

重要提示：您上传此“script.php”的文件夹应具有写入权限，以便创建“latest.zip”文件。

# visual-c++ - 使用opencv在vc++中将rgb图像转换为灰度图像

> ID：15630205
> 
> 赞同：0
> 
> 时间：2013-03-26T05:47:25.503
> 
> 标签：visual-c++, opencv

我在 vc++2010 express 中创建了 gui 应用程序，我将图像文件夹加载到列表框，并通过选择列表框项目，图像显示在图片框 1 中，使用浏览按钮。现在我想访问picturebox1图像并转换为灰度图像，转换后的灰度必须显示在picturebox2中，使用灰度转换按钮。请帮帮我

唐卡卡鲁纳

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T06:25:23.923

在 opencv Mat 中获取图像。然后使用 cvtColor 函数转换图像。CV_BGR2GRAY 代码用于将 RGB 转换为灰度。然后将灰度图像显示回您想要显示的位置。

# windows-8 - Java Swings JMenuBar 在 Windows 8 中不可见

> ID：15630213
> 
> 赞同：0
> 
> 时间：2013-03-26T05:48:28.087
> 
> 标签：windows-8, jmenubar

我的一个应用程序长期以来一直运行良好，最近我将它安装在 Windows 8 上，我看到完整的 JMenuBar 不可见，有人对此有任何解决方案。

问候拉吉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T07:27:15.403

解决了我的问题，有一些与操作系统版本检查有关的问题。谢谢

# doctrine-orm - 一对一执行查询的语法错误

> ID：15630217
> 
> 赞同：0
> 
> 时间：2013-03-26T05:48:32.893
> 
> 标签：doctrine-orm, doctrine-query

我有两个实体：

1.  `User`具有两个字段的实体是：`id`（@id），`username`
2.  `Profile`具有两个字段的实体是：`user`(@OneToOne,targetEntity="User"),`fullname`

但是，当我从阅读 JPA 书籍的内容中尝试查询时：

`SELECT p from Profile p where p.user.username = 'john'`

它提醒我一条消息：

`[Syntax Error] line 0, col 55: Error: Expected =, <, <=, <>, >, >=, !=, got '.'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:50:39.343

从当前的[EBNF](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#ebnf)开始，您使用的语法在 Doctrine 2 ORM 中无效。您必须按以下方式加入相关实体：

```
SELECT
    p
FROM
    Profile p
JOIN
    p.user u
WHERE
    u.username = :username 
```

# java - 从谷歌日历获取事件时出现无效的日期/时间异常

> ID：15630219
> 
> 赞同：0
> 
> 时间：2013-03-26T05:48:35.587
> 
> 标签：java, google-calendar-api

嗨，我正在根据 datetime 检索事件。当我通过日期时间作为查询以从谷歌日历获取事件时低于异常。

```
 private static void dateRangeQuery(CalendarService service) throws ServiceException,
              IOException {
          DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd-HH:mm");
           //get current date time with Date()
           Date date = new Date();
           System.out.println(dateFormat.format(date));

           //get current date time with Calendar()
           Date dt = Calendar.getInstance().getTime();
           //System.out.println(dateFormat.format(cal.getTime()));
          // System.out.println(cal.getTime());
          DateTime startTime =  DateTime.parseDateTime(dateFormat.format(dt));
          Calendar cal2 = Calendar.getInstance();
          cal2.add(Calendar.MINUTE, 20);
           System.out.println(dateFormat.format(cal2.getTime()));
           System.out.println(cal2.getTime());
          DateTime endTime =  DateTime.parseDate(dateFormat.format(cal2.getTime()));

            CalendarQuery myQuery = new CalendarQuery(eventFeedUrl);
            myQuery.setMinimumStartTime(startTime);
            myQuery.setMaximumStartTime(endTime);

            // Send the request and receive the response:
            CalendarEventFeed resultFeed = service.query(myQuery,
                CalendarEventFeed.class);

            //System.out.println("Events from " + startTime.toString() + " to "
            //    + endTime.toString() + ":");
            System.out.println();
            for (int i = 0; i < resultFeed.getEntries().size(); i++) {
              CalendarEventEntry entry = resultFeed.getEntries().get(i);
              System.out.println("\t" + entry.getTitle().getPlainText());
            }
            System.out.println();
          } 
```

以下例外：

```
Exception in thread "main" java.lang.NumberFormatException: Invalid date/time format.
    at com.google.gdata.data.DateTime.parseDateTime(DateTime.java:303)
    at GoogleCalender.dateRangeQuery(GoogleCalender.java:185)
    at GoogleCalender.main(GoogleCalender.java:115) 
```

请任何人都可以建议如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:12:53.827

预期的 XML dateTime 模式`DateTime.parseDateTime()`是`[-]CCYY-MM-DDThh:mm:ss[Z|(+|-)hh:mm]`。

因此，应使用 SimpleDateFormat`yyyy-MM-dd'T'HH:mm:ss`模式（未经测试）格式化日期。

但更简单的方法是简单地使用`DateTime`以 a`java.util.Date`作为参数的构造函数，而不是将 Date 转换为 String，然后将 Date 转换为 DateTime。

# wordpress - 使用 post id wordpress 显示分配给自定义帖子类型的所有类别

> ID：15630227
> 
> 赞同：0
> 
> 时间：2013-03-26T05:49:24.997
> 
> 标签：wordpress, categories, taxonomy, custom-post-type, posts

我在我的 WordPress 网站中创建了一个自定义帖子类型。我在该自定义帖子类型中添加了许多帖子。

我想显示分配给该自定义帖子类型中每个帖子的所有类别。请帮我。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T15:10:34.553

你可以试试：

```
$terms = get_the_terms($post->ID, 'your_taxonomy_name'); 
```

[http://codex.wordpress.org/Function_Reference/get_the_terms](http://codex.wordpress.org/Function_Reference/get_the_terms)

但您必须先为您的 CPT 设置分类：

[http://codex.wordpress.org/Function_Reference/register_taxonomy](http://codex.wordpress.org/Function_Reference/register_taxonomy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T13:45:09.967

你可以试试下面的代码

```
foreach ( get_posts( 'numberposts=-1') as $post ) {

            wp_set_object_terms($post_id, 'category_name', 'category');
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T17:59:46.237

使用 Wordpress 功能：

has_term：[http ://codex.wordpress.org/Function_Reference/has_term](http://codex.wordpress.org/Function_Reference/has_term)

和 get_the_terms：[http ://codex.wordpress.org/Function_Reference/get_the_terms](http://codex.wordpress.org/Function_Reference/get_the_terms)

使用 has_term() 很重要，因此您不会在不使用自定义分类法的帖子上出现错误。

get_the_terms() 获取当前帖子 ID 的所有术语，在循环中使用它。

* * *

例子：

```
<ul class="post-entry-meta">

<?php if( has_term('','your taxonomy' ))

{

$terms = get_the_terms( $post->ID , 'your taxonomy' ); 

foreach ( $terms as $term )

{echo '<li class="taxonomy-list">', $term->name , '</li>' ;}

}?> 

</ul> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-08T13:27:56.977

```
<?php
$custom_post_taxonomies = get_object_taxonomies('your_taxonomy_name');

if(count($custom_post_taxonomies) > 0)
{
 foreach($customPostTaxonomies as $tax)
 {
     $args = array(
          'orderby' => 'name',
          'show_count' => 0,
          'pad_counts' => 0,
          'hierarchical' => 0,
          'taxonomy' => $tax,
          'title_li' => ''
        );

     wp_list_categories( $args );
 }
}
?> 
```

请用您的分类名称替换“your_taxonomy_name”。它运作良好。

# java - SSH命令无法启动远程java进程

> ID：15630230
> 
> 赞同：1
> 
> 时间：2013-03-26T05:49:35.587
> 
> 标签：java, ssh

我有一个`start`函数，我把它放在一个驻留在远程站点的脚本中，函数的代码如下所示。

```
function start() {
    cd $install_dir

    mkdir -p logs

    export classpath=$classpath:$target_jar
    nohup java -Xms2048m -Xmx8192m -server -XX:PermSize=128m -XX:MaxPermSize=256m \
        -XX:+PrintGCDetails -XX:+PrintGCDateStamps \
        -XX:-OmitStackTraceInFastThrow \
        -cp $target_jar $main_class >> logs/jvm.log 2>&1 &

    echo "Service started, see logs"
} 
```

当我尝试使用 ssh 调用该函数时`ssh xxx@host "./service.sh start"`，我无法启动 java 进程，我只收到响应消息“服务已启动，查看日志”并且没有错误，jvm.log 也是空的。在我看来，我的脚本显然已经执行，但目标 java 进程没有运行。

如果我登录到该远程站点并执行`./service.sh start`，它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:25:35.950

由于您能够手动运行该服务，因此 ssh 和脚本部分很好。

可能出问题的是环境。例如，您在没有绝对路径的情况下引用了 java。因此，您可能正在运行它的不同版本。共享库加载 (LD_LIBRARY_PATH) 的变量也可能具有不同的值。

最后检查文件权限

# scala - 在 Play 2.0 项目中使用 dispatch 0.9.5

> ID：15630231
> 
> 赞同：1
> 
> 时间：2013-03-26T05:49:35.257
> 
> 标签：scala, playframework, playframework-2.0, sbt

我有一个 Play 2.0 项目（将在未来几个月升级到 2.1，但不是现在）。似乎 Play 会自动导入以前版本的 dispatch (0.8.8)。dispatch 0.9.5 中有一些我想使用的重要特性。所以我将它添加到我的 Build.scala 中：

```
val appDependencies = Seq(
    //Some other dependencies,
    "net.databinder.dispatch" %% "dispatch-core" % "0.9.5"
) 
```

但是，我无法在我的代码中访问此版本的调度。我怎样才能做到这一点？

# jsf - context.addMessage 不适用于文件上传组件

> ID：15630233
> 
> 赞同：0
> 
> 时间：2013-03-26T05:49:51.760
> 
> 标签：jsf, primefaces

我想在 fileUpload 组件的 uploadListner 中显示一条消息。但是它根本没有显示任何消息。下面是我正在使用的代码片段。

```
 FacesContext context = FacesContext.getCurrentInstance();
        FacesMessage msg = new FacesMessage(
                FacesMessage.SEVERITY_ERROR,
                "Please remove special charecters from the File Name.        ",
                "");
        context.addMessage(null, msg); 
```

我在 p:commandButton 尝试了同样的事情，它工作正常。这是片段的 XHTML 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:58:37.150

您需要在视图中声明一个或`<h:messages>`组件才能显示消息。鉴于您在 中使用客户端 ID ，您可能打算显示全局消息，在这种情况下，您可以向上述消息组件添加一个属性以仅过滤全局消息。`<p:messages>``<p:growl>``null``FacesContext#addMessage()``globalOnly="true"`

此外，如果您要发送 ajax 请求，您也不应该忘记通过`update`在`<p:fileUpload>`.

例如

```
<p:fileUpload ... update="messages" />
...
<h:messages globalOnly="true" /> 
```

或者，如果您使用的是 PrimeFaces 等价物，您也可以使用`autoUpdate="true"`：

```
<p:fileUpload ... />
...
<p:messages globalOnly="true" autoUpdate="true" /> 
```

# list - 从列表中的元组中获取特定值

> ID：15630234
> 
> 赞同：0
> 
> 时间：2013-03-26T05:49:59.867
> 
> 标签：list, python-2.7, tuples

我有一个这样的清单

```
tails = {(1, 352, 368), (2, 336, 368), (3, 320, 368)} 
```

其中第一个值是尾号，第二个是它的 x 位置，第三个是它的 y 位置。稍后在我的代码中，我有

```
for item in tail:
    pygame.draw.rect(windowSurface, RED, (xposition, yposition, 16, 16)) 
```

如何从该特定元组中获取第二个和第三个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:45:49.727

由于您正在寻找学习 python 基础知识，我将展示几种不同的方法来做到这一点（尽管 python 的“应该有一种——最好只有一种——明显的方法”）：

```
for item in tails:
    xposition = item[1]  # get item by index
    yposition = item[2]
    pygame.draw.rect(windowSurface, RED, (xposition, yposition, 16, 16)) 
```

或者

```
for item in tails:
    ( xposition, yposition ) = item[1:]  # tuple assignment
    pygame.draw.rect(windowSurface, RED, (xposition, yposition, 16, 16)) 
```

或者

```
for tail_num, xposition, yposition in tails:  # tuple assignment in for-loop
    pygame.draw.rect(windowSurface, RED, (xposition, yposition, 16, 16)) 
```

或者

```
# prepare args using list comprehension
rect_args_list = [ tuple(item[1:]) + ( 16, 16) for item in tails ]
for rect_args in rect_args_list:
    pygame.draw.rect(windowSurface, RED, rect_args) 
```

# protocols - SMB 与 java 的连接

> ID：15630240
> 
> 赞同：2
> 
> 时间：2013-03-26T05:50:15.737
> 
> 标签：protocols, smb

您好我已经创建了一个测试程序来连接 SMB 协议。我的动机是在共享位置上创建一个 test.txt 文件，例如`String path="smb://192.168.143.134/rtf2xml/"+sharedFolder+"/test.txt";`

但是当我尝试运行我的程序时（下面是代码示例）

```
import java.io.IOException;

import jcifs.smb.NtlmPasswordAuthentication;
import jcifs.smb.SmbFile;
import jcifs.smb.SmbFileOutputStream;

public class Test {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        String user = "abc";
        String pass ="123456";

        String sharedFolder="INPUT";
        String path="smb://192.168.143.134/rtf2xml/"+sharedFolder+"/test.txt";
        NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("192.168.143.134",user, pass);
        SmbFile smbFile = new SmbFile(path, auth);
        smbFile.createNewFile();
        SmbFileOutputStream smbfos = new SmbFileOutputStream(smbFile);
        smbfos.write("testing....and writing to a file".getBytes());
        System.out.println("completed ...nice !");
    }

} 
```

它正在抛出异常

```
Exception in thread "main" jcifs.smb.SmbException: Failed to negotiate
jcifs.smb.SmbException: Timeout trying to open socket
java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at jcifs.netbios.NbtSocket.<init>(NbtSocket.java:59)
    at jcifs.smb.SmbTransport.run(SmbTransport.java:342)
    at java.lang.Thread.run(Unknown Source)

    at jcifs.smb.SmbTransport.start(SmbTransport.java:315)
    at jcifs.smb.SmbTransport.negotiate0(SmbTransport.java:865)
    at jcifs.smb.SmbTransport.negotiate(SmbTransport.java:941)
    at jcifs.smb.SmbTree.treeConnect(SmbTree.java:119)
    at jcifs.smb.SmbFile.connect(SmbFile.java:827)
    at jcifs.smb.SmbFile.connect0(SmbFile.java:797)
    at jcifs.smb.SmbFile.open0(SmbFile.java:852)
    at jcifs.smb.SmbFile.createNewFile(SmbFile.java:2265)
    at Test.main(Test.java:22)

    at jcifs.smb.SmbTransport.negotiate(SmbTransport.java:947)
    at jcifs.smb.SmbTree.treeConnect(SmbTree.java:119)
    at jcifs.smb.SmbFile.connect(SmbFile.java:827)
    at jcifs.smb.SmbFile.connect0(SmbFile.java:797)
    at jcifs.smb.SmbFile.open0(SmbFile.java:852)
    at jcifs.smb.SmbFile.createNewFile(SmbFile.java:2265)
    at Test.main(Test.java:22) 
```

如何摆脱这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-25T21:28:51.353

1.  但是我认为您必须确保目标服务器（192.168.143.134）已启动并处于活动状态。

2.  您可以按以下方式编写它，因为 smb 链接中包含 IP。

    ```
    public static void main(String[] args) throws IOException {
    String user = "abc";
    String pass ="123456";

    String sharedFolder="INPUT";
    String path="smb://192.168.143.134/rtf2xml/"+sharedFolder+"/test.txt";
    NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("",user, pass);//note here
    SmbFile smbFile = new SmbFile(path, auth);
    smbFile.createNewFile();
    SmbFileOutputStream smbfos = new SmbFileOutputStream(smbFile);
    smbfos.write("testing....and writing to a file".getBytes());
    System.out.println("completed ...nice !"); 
    ```

    } ....

# c# - 检查一行是否已被完全选中

> ID：15630247
> 
> 赞同：0
> 
> 时间：2013-03-26T05:50:48.813
> 
> 标签：c#, datagridview, datagridviewrow

我的 datagridview 处于 RowHeaderSelect 模式。因此，单击 RowHeader 会选择整行。

但是，在任何时候，当我使用上下文菜单快捷方式或键盘快捷键时，我都需要检查当前是否选择了整行或单个单元格，并相应地执行操作。我该如何检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:55:11.070

您可以与`e.CommandName`财产核实。

**检查愚蠢的代码补丁**>>

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        SXEngine.Classx USER = (SXEngine.Classx)Session["APPOBJ"];        

        if (e.CommandName == "Select")
        {
            USER.bRowSelect = true;         
        }
        else
        {
            USER.bRowSelect = false ;
        }
    } 
```

研究此链接以获取有关 gridview 不同属性的更多信息>>

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchang.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanging.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:57:08.057

使用 RowCommand 事件的参数 e 的 CommandName 方法。喜欢

```
if(e.CommandName=="Select")   
{
   //code
} 
```

# git - 我有一个分支的 git repo：master。如何在本地和远程 repo 上重命名分支？

> ID：15630249
> 
> 赞同：1
> 
> 时间：2013-03-26T05:50:59.050
> 
> 标签：git, version-control, git-branch

我有一个带有单个分支的 git repo：主分支。相反，我希望将主分支称为“somethingelse”，这样以后我可以添加更多具有其他名称的分支。我不想有一个名为“master”的分支。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:02:04.583

假设您的遥控器的名称是：以下步骤应该可以工作`origin`：

```
# Rename local master to somethingelse
git branch -m master somethingelse

# Delete the remote named origin's master
git push origin :master

# Checkout local somethingelse
git checkout somethingelse

# Push the branch somethingelse to remote
git push origin somethingelse

# Update the remote tracking branch for somethingelse
# otherwise the next pull/push might fail
git branch -u origin/somethingelse somethingelse 
```

这些步骤有很多问题：

*   没有现有的结帐会知道分支重命名
*   当远程上不存在名为的分支时，下一个`git pull`会给你一个错误。`master`远程服务器上不存在默认分支的原因。要更新远程服务器上的默认分支，请使用`git symbolic-ref`我在最后提到的命令。
*   在较新的 git 版本中，要删除远程上的分支，您需要配置`receive.denyDeleteCurrent`为`warn`or `ignore`，否则它不会让您执行删除。如果您无法更改远程上的配置，您将无法删除远程上的分支。尽管您可以将分支 master 重置到树中的其他位置并执行`push -f`.

**更改远程服务器上的默认分支：**

您需要有权访问远程服务器以配置将在新克隆上签出的默认分支：

```
git symbolic-ref HEAD refs/heads/somethingelse 
```

# xml - 在 xcode 中解析 XML

> ID：15630262
> 
> 赞同：1
> 
> 时间：2013-03-26T05:52:44.450
> 
> 标签：xml, xcode, nsxmlparser

我如何在 Xcode 中解析这个 xml。这很紧急。

```
<?xml version="1.0" encoding="utf-8"?>
<url>
    <string name="address">SomeValue</string>
</url> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:06:09.167

看看下面的代码，它可能对你有帮助:)

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
       attributes:(NSDictionary *)attributeDict {

        if([elementName isEqualToString:@"string"])
            urlStr = [[NSString alloc] init];

    }

    - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
        if(!currentElementValue)
            currentElementValue = [[NSString alloc] init];

        currentElementValue = [NSString stringWithFormat:@"%@",string];
    }

    - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
    {
        if([elementName isEqualToString:@"string"])
           urlStr = [NSString stringWithString:currentElementValue];

    }

    - (void)parserDidEndDocument:(NSXMLParser *)parser {

    } 
```

# firebase - 限制返回数据的深度

> ID：15630271
> 
> 赞同：6
> 
> 时间：2013-03-26T05:53:21.063
> 
> 标签：firebase, firebase-realtime-database

是否可以限制从 Firebase 数据库返回的数据深度？

例如，如果我想从父对象获取一些数据而不等待其所有子对象和子对象，我可以指定我只想要 x 级别的对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:59:27.403

Firebase 尚不具备此功能。

我们确实打算添加它，但还没有时间表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-31T23:49:01.087

似乎有一个`shallow`选项...

```
{
  "message": {
    "user": {
      "name": "Chris"
    },
    "body": "Hello!"
  }
}

// A request to /message.json?shallow=true
// would return the following:
{
  "user": true,
  "body": true
}

// A request to /message/body.json?shallow=true
// would simply return:
"Hello!" 
```

**来自**：[https ://firebase.google.com/docs/database/rest/retrieve-data](https://firebase.google.com/docs/database/rest/retrieve-data)

# c# - 如何创建以编程方式生成源代码的程序并在成功编译后对其进行编译和执行

> ID：15630275
> 
> 赞同：0
> 
> 时间：2013-03-26T05:53:36.803
> 
> 标签：c#, compilation, generic-programming

如何创建一个程序（父程序），该程序创建.cs（从父程序以编程方式生成源代码）文件并编译它并在成功编译后执行并与父程序通信结果。

我所做的是

第 1 步：我可以使用 System.IO 命名空间使用 c# 应用程序创建文件

第 2 步：有一个选项，我们可以通过命令行使用“csc”从控制台编译程序，可以使用 System.Globalization 命名空间中的 Prosess.Start() 执行它

但问题是

1.  如何知道它是否正确编译。

2.  如何将父程序与生成的程序通信

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:10:15.877

看看 System.Reflection.Emit - 它允许您在运行时生成 MSIL 程序集。这里有两个起点：

[http://msdn.microsoft.com/en-us/library/system.reflection.emit.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.emit.aspx)

[http://msdn.microsoft.com/en-us/library/3y322t50.aspx](http://msdn.microsoft.com/en-us/library/3y322t50.aspx)

# variables - os.execute 变量

> ID：15630279
> 
> 赞同：0
> 
> 时间：2013-03-26T05:54:11.223
> 
> 标签：variables, lua, operating-system

我有多个 Steam 帐户，我想通过一个带有我指定选项的 Lua 脚本启动它们。除了使用提供的代码启动之外，我几乎已经对所有内容进行了排序。我不知道如何以这种格式“传递”变量。

```
function Steam(n, opt1, opt2, opt3)
os.execute[["start C:\Program" "Files\Sandboxie\Start.exe /box:Steam2 D:\Steam\steam.exe -login username password -opt1 -opt2 -opt3"]]
end 
```

我设置了我的用户名和沙盒，因此只需使用相同的密码更改数字（fenriros2、fenriros3、Steam2、Steam3 等）。

基本上，我想要这个；

```
Steam(3, -tf, -exit, -textmode) 
```

去做;

```
os.execute[["start C:\Program" "Files\Sandboxie\Start.exe /box:Steam3 D:\Steam\steam.exe -login fenriros3 password -applaunch 440 -textmode"]] 
```

完成后，我将使用 -exit 关闭 lua 窗口。

我意识到我的代码并不完全有效，但这是以后的担忧。现在我只需要让它工作。

非常感谢任何帮助，如果我错过了一些明显的东西，我深表歉意，我在 Lua 上还是个新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:10:55.737

第一个明显的。[[ ]] 分隔字符串，因此您需要做的就是为字符串创建一个变量并根据需要替换内容。

```
function Steam(n, opt1, opt2, opt3)
-- Set up execute string with placeholders for the parameters.
local strExecute = [["start C:\Program" "Files\Sandboxie\Start.exe /box:Steam{n} D:\Steam\steam.exe -login fenriros{n} password -{opt1} -{opt2} -{opt3}"]]

-- Use gsub to replace the parameters
-- You could just concat the string but I find it easier to work this way.
strExecute = strExecute:gsub('{n}',n)
strExecute = strExecute:gsub('{opt1}',opt1:gsub('%%','%%%%'))
strExecute = strExecute:gsub('{opt2}',opt2:gsub('%%','%%%%'))
strExecute = strExecute:gsub('{opt3}',opt3:gsub('%%','%%%%'))
os.execute(strExecute)
end

Steam(1,'r1','r2','r3') 
```

# node.js - Node.js Socket.io 运行缓慢

> ID：15630281
> 
> 赞同：0
> 
> 时间：2013-03-26T05:54:21.570
> 
> 标签：node.js, websocket, socket.io

我的 node.js 应用程序使用 TCP 和 Socket.io 连接。它将数据从 TCP 转发到相关的 socket.io 连接。

我注意到的是，在通过 WebSockets (socket.io) 发送数据时有一个小的延迟，在最小的有效负载期间并不那么重要，但随着有效负载数量的增加，延迟变得很重要。

这是一个已知的问题？socket.io 上的单个发布大约需要 1.5 秒。

这是我的代码。

```
var net = require('net');

var httpServer = http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(8080);
console.log('Server running at http://127.0.0.1:1337/');

// The Socket.io jibber-jabber
var io = require('socket.io').listen(httpServer);
io.sockets.on('connection', function (socket) {
  socket.emit('con',"Connected!");
  socket.on('subscribe', function(data) { socket.join(data.room); });
  socket.on('unsubscribe', function(data) { socket.leave(data.room); });
  webSockets.push(socket);
  console.log("Websocket connected.");

  socket.on('disconnect', function () {
    var index = webSockets.indexOf(socket);
  webSockets = webSockets.splice(index,1);
  console.log("Websocket disconnected.");
  });
});

function SendToSocket(room, mssg)
{
    console.log("--- Sending too rooms ---");
    var time1 = new Date();
    io.sockets.in(room).emit(room, mssg);
    var time2 = new Date();
    console.log(time1.getSeconds(),time1.getMilliseconds(),"---",time2.getSeconds(),time2.getMilliseconds());
}

var shortServer = net.createServer(function(c) { //'connection' listener
console.log('TCP client connected');
  c.on('end', function() {
console.log('TCP client disconnected');
c.destroy();
  });

  c.on('data', function(data){
console.log(data);
            SendToSocket('domain',data);
  });
});

shortServer.listen(2501, function() { //'listening' listener
  console.log('TCP Server bound');
}); 
```

输出如下

```
 info  - socket.io started
TCP Server bound
TCP client connected
<Buffer ff fb 1f ff fb 20 ff fb 18 ff fb 27 ff fd 01 ff fb 03 ff fd 03>
--- Sending too rooms ---
42 564 '---' 44 245 
```

42 567 分别表示 socket.io 操作之前的秒和微秒，而 44 245 表示操作之后的时间。延迟接近 2 秒。

只要任何 TCP 连接上有数据，就会调用该`sendToSocket`函数。我已经对这个功能进行了计时，它需要接近 1.5 秒才能完成。如果我不使用房间也是一样的，并使用一个简单的 for 循环将数据发送到所有套接字连接。

更多详细信息：来自 TCP 的最大消息有效负载 - 50 字节。在 socket.io 上发送的最大消息负载 - 256 字节或字符。频率 - 高达每秒 3 次。数量：连接数 - 最多 10 个。

PS：在测试过程中，我注意到，即使我只从一个没有 Socket.io 连接的 TCP 连接发送了一条空白消息；socket.io 在调用期间持有应用程序 1.5 秒`SendToSocket`

# css - 在CSS中将屏幕高度设置为div的高度

> ID：15630286
> 
> 赞同：0
> 
> 时间：2013-03-26T05:54:45.940
> 
> 标签：css, html

我一直在研究 HTML5、javascript 和 CSS，我想获得屏幕的高度并仅在 CSS 中相应地设置我的“div”的高度，而不使用 javascript 和 jquery .. 以便它可以自行调整到任何屏幕。我试过使用 height=100% 但它的高度与 div 的内容一样长。任何想法请帮助我..

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:01:24.093

设置 height=100% 应该可以 - 确保包含的元素也设置为 100% 高度，并添加 position:absolute

这是一个小提琴：

[http://jsfiddle.net/C3anM/](http://jsfiddle.net/C3anM/)

```
<div id="wrapper">Test content </div> 
```

+

```
#wrapper {
    height:100%;
    background-color:green;
    position:absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:22:53.350

我认为您可能正在寻找与视口相关的 css 单元。[目前它们并未得到全面支持](http://caniuse.com/#feat=viewport-units)，但在使用现代浏览器的用户中得到了很好的支持。

[规范](http://dev.w3.org/csswg/css3-values/#viewport-relative-lengths)将它们定义如下：

> **大众单位**
> 
> 等于初始包含块宽度的 1%。
> 
> **单位**
> 
> 等于初始包含块高度的 1%。
> 
> **最小单位**
> 
> 等于“vw”或“vh”中的较小者。
> 
> **最大单位**
> 
> 等于“vw”或“vh”中的较大者。

典型的百分比宽度相对于最近的父元素调整元素的大小，或者在绝对定位的情况下，最近的父元素与`position: relative;`视口相对长度将始终相对于...计算视口，无论父元素在那个树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:04:06.620

我认为您正在尝试绝对定位它。

```
div{
    height:100%;
    width:100%;
    position:absolute;
    border:1px solid red;
} 
```

[http://jsfiddle.net/btevfik/DMUcY/](http://jsfiddle.net/btevfik/DMUcY/)

默认情况下，位置是静态的。所以 div 是按顺序定位的，并且它们的高度由它们的内容计算，除非你`px`为高度设置一个值。

[http://jsfiddle.net/btevfik/MjM9Y/](http://jsfiddle.net/btevfik/MjM9Y/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:41:34.193

你必须设置：

```
html, body
{
    height: 100%;
} 
```

jsFiddle：http: [//jsfiddle.net/sG8gm/](http://jsfiddle.net/sG8gm/)

# android - 使用 Sencha Touch 2.1 和 PhoneGap 在 Android 应用程序中连接 SignalR

> ID：15630287
> 
> 赞同：0
> 
> 时间：2013-03-26T05:54:51.520
> 
> 标签：android, cordova, signalr, sencha-touch-2.1

我正在尝试使用 Sencha Touch 2.1 和 PhoneGap 2.5.0 从本机 Android 应用程序中连接到 SignalR。

这是我到目前为止所拥有的：

我的 SignalR 服务器是在 Windows Server 2012 上运行的 ASP.NET MVC3 应用程序。跨域访问已在 global.asax.vb 中启用。

**全球.asax.vb**

```
Sub Application_Start()
    Dim config As New HubConfiguration
    config.EnableCrossDomain = True     'Allow cross domain (for native apps)
    RouteTable.Routes.MapHubs(config)

    AreaRegistration.RegisterAllAreas()

    RegisterGlobalFilters(GlobalFilters.Filters)
    RegisterRoutes(RouteTable.Routes)
End Sub 
```

我正在使用 SignalR 1.0.1 集线器。我已经实现了我的 Sencha Touch 应用程序调用的“身份验证”方法：

**发射器.vb**

```
Public Class Transmitter
    Inherits Hub

    Public Sub authenticate(ByVal sClientId As String, _
                            ByVal sPassword As String)
        Try
            Dim bRegistered As Boolean = ValidateUser(sClientId, sPassword)

            If bRegistered Then
                Clients.Caller.isAuthenticated(True)
            Else
                Clients.Caller.isAuthenticated(False)
            End If
        Catch ex As Exception
            LogEvent("Authenticate: " & ex.Message)
        End Try
    End Sub
End Class 
```

我开发了一个 Sencha Touch 2.1 应用程序，它连接到我的 SignalR 服务器并调用“身份验证”功能。这在 chrome 网络浏览器中运行良好。我在 index.html 文件中添加了对 SignalR 的引用，如下所示：

**索引.html**

```
<script src="https://www.mySite.com/SignalRServer/Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="https://www.mySite.com/SignalRServer/Scripts/jquery.signalR-1.0.1.js" type="text/javascript"></script>
<script src="https://www.mySite.com/SignalRServer/signalr/hubs"></script> 
```

这是用于连接到 SignalR 并从我的 Sencha Touch 应用程序中调用“authenticate”方法的代码：

**MySenchaTabPanel.js**

```
listeners: {

activate: function () {
    $.connection.hub.logging = true;
    $.connection.hub.url = 'https://www.mySite.com/SignalRServer/signalr';

    var transmitterProxy = $.connection.transmitter;

    transmitterProxy.client.isAuthenticated = function (bAuthenticated) {
        console.log('isAuthenticated: ' + bAuthenticated);
    };

    console.log('Connecting to server...');

    $.connection.hub.start()
        .done(function () {
            console.log('Connected to Server: Transport: ' + $.connection.hub.transport.name);
            transmitterProxy.server.authenticate(sClientId, sPassword);
        })
        .fail(function (error) {
            console.log('Could not connect to server:' + error);
        });
}
} 
```

我现在使用PhoneGap 2.5.0 来包装Sencha Touch 2.1 应用程序，并将它部署在Android 4.2.2 模拟器上。应用程序在启动连接时显示在完成回调函数中找到的“已连接到服务器”日志。但是当它试图调用'authenticate'函数时什么也没有发生。这是日志：

```
03-26 05:29:38.631: D/CordovaLog(1758): exception firing pause event from native
03-26 05:29:49.978: D/CordovaLog(1758): Connecting to server...
03-26 05:29:51.330: D/CordovaLog(1758): exception firing destroy event from native
03-26 05:29:51.688: D/CordovaLog(1758): [05:29:51 GMT+0000 (GMT)] SignalR: Auto detected cross domain url.
03-26 05:29:51.688: D/CordovaLog(1758): [05:29:51 GMT+0000 (GMT)] SignalR: Negotiating    with 'https://www.mySite.com/SignalRServer/signalr/negotiate'.
03-26 05:29:52.840: D/CordovaLog(1758): [05:29:52 GMT+0000 (GMT)] SignalR: SignalR: Initializing long polling connection with server.
03-26 05:29:53.988: D/CordovaLog(1758): [05:29:53 GMT+0000 (GMT)] SignalR: Attempting to connect to 'https://www.mySite.com/SignalRServer/signalr/connect?transport=longPolling&connectionToken=fW1SyP5V9Qwq7d0WF3FBn8Fr9rXvNJZ-VryuonW7LlsUyIbUlQ5LlW9gTRJNGch9t8yO4te8fbyZW2ZPKY_eAdnvIz6tHKxX0rmq8qNa8tv0budwIBjwD6YM1j4pSDTs0&connectionData=%5B%7B%22name%22%3A%22transmitter%22%7D%5D&tid=2' using longPolling.
03-26 05:29:54.258: D/CordovaLog(1758): Connected to Server: Transport: longPolling
03-26 05:29:54.358: D/CordovaLog(1758): [05:29:54 GMT+0000 (GMT)] SignalR: Longpolling connected
03-26 05:29:54.799: D/CordovaLog(1758): [05:29:54 GMT+0000 (GMT)] SignalR: Triggering client hub event 'joined' on hub 'Transmitter'.
03-26 05:29:54.808: D/CordovaLog(1758): [05:29:54 GMT+0000 (GMT)] SignalR: Attempting to connect to 'https://www.mySite.com/SignalRServer/signalr?transport=longPolling&connectionToken=fW1SyP5V9Qwq7d0WF3FBn8Fr9rXvNJZ-VryuonW7LlsUyIbUlQ5LlW9gTRJNGch9t8yO4te8fbyZW2ZPKY_eAdnvIz6tHKxX0rmq8qNa8tv0budwIBjwD6YM1j4pSDTs0&connectionData=%5B%7B%22name%22%3A%22transmitter%22%7D%5D&messageId=B%2C45%7CBo%2C0%7CBp%2C0%7CBq%2C0&tid=10' using longPolling. 
```

当我在三星 Galaxy Android 4.1.2 设备上部署应用程序时看到相同的结果（在我指定传输协议以解决 Android 和 SignalR 的已知问题之后）。有人可以帮我让 SignalR 在 Android 上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:26:22.603

请尝试一些解决问题的方法： 1\. 添加一个简单的 Hub.Echo() 方法并在调用时使用 System.Diagnostics.Debug.WriteLine 记录它 2\. 在 web.config 上启用服务器跟踪以确保客户端实际发送消息到服务器 3\. 比较您的工作设备和故障设备生成的跟踪

如果可能，请尝试在客户端启用 Fiddler ( [http://www.fiddler2.com/fiddler2/version.asp](http://www.fiddler2.com/fiddler2/version.asp) ) [https://github.com/SignalR/SignalR/wiki/Using-fiddler-with-signalr](https://github.com/SignalR/SignalR/wiki/Using-fiddler-with-signalr)

web.config 中的更改

```
 <system.diagnostics>
    <trace autoflush="true" indentsize="4">
      <listeners>
        <add name="default_traces" type="System.Diagnostics.TextWriterTraceListener" initializeData="default_traces.txt" />
      </listeners>
    </trace>
    <switches>
      <add name="SignalRSwitch" value="All" />
    </switches>
    <sources>

      <source name="Application" switchValue="All">
        <listeners>
          <add name="traces" />
        </listeners>
      </source>

      <source name="Microsoft.Owin.Host.SystemWeb" switchValue="All">
        <listeners>
          <add name="traces" />
        </listeners>
      </source>

      <source name="SignalR.Connection">
        <listeners>
          <add name="traces" />
        </listeners>        
      </source>
      <source name="SignalR.PersistentConnection">
        <listeners>
          <add name="traces" />
        </listeners>
      </source>
      <source name="SignalR.HubDispatcher">
        <listeners>
          <add name="traces" />
        </listeners>
      </source>
      <source name="SignalR.Transports.WebSocketTransport">
        <listeners>
          <add name="traces" />
        </listeners>
      </source>
      <source name="SignalR.Transports.ServerSentEventsTransport">
        <listeners>
          <add name="traces" />
        </listeners>
      </source>
      <source name="SignalR.Transports.ForeverFrameTransport">
        <listeners>
          <add name="traces" />
        </listeners>
      </source>
      <source name="SignalR.Transports.LongPollingTransport">
        <listeners>
          <add name="traces" />
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add name="traces" type="System.Diagnostics.TextWriterTraceListener" initializeData="server_traces.txt" />
    </sharedListeners>
  </system.diagnostics> 
```

在 Hub 中进行跟踪的示例类

```
public class AppLogging
{
    static TraceSource traceSource = new TraceSource("Application");

    internal static void WriteVerbose(string format, params object[] args)
    {
        traceSource.TraceEvent(TraceEventType.Verbose, 0, format, args);
    }

    internal static void WriteInformation(string format, params object[] args)
    {
        traceSource.TraceEvent(TraceEventType.Information, 0, format, args);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:20:28.300

谢谢你的建议，古斯塔沃。我已经按照您的建议实施了额外的跟踪，我相信这将非常有用。然而，当我实现额外的跟踪时，我注意到信号器 dll 已从发布版本 1.0.1 更改为从信号器的开发分支构建的 dll。这样做是为了调查我们在 Signalr 中遇到的其他问题。不幸的是，新的 dll 破坏了跨域访问信号器服务器的能力，因此，这就是我无法让我的原生 android 应用程序与信号器一起工作的原因。一旦我们意识到发生了什么，我们就将 dll 改回来，现在我的 phonegap 应用程序在模拟器和设备上都按预期与 signalr 通信。

# php - 查找输出到 PHP 错误日志的 PHP 脚本

> ID：15630290
> 
> 赞同：1
> 
> 时间：2013-03-26T05:54:58.947
> 
> 标签：php, logging, error-logging

我有运行 drupal 的 Web 服务器、开箱即用的 PHP 软件和自定义 PHP 软件。一位开发人员在某处添加了某种日志调用，用无用的消息填充 PHP 错误日志，我想删除此日志调用。如何在日志中找到导致这些消息的原因？

# c++ - C++ 从 main 中的头文件调用函数

> ID：15630293
> 
> 赞同：4
> 
> 时间：2013-03-26T05:55:12.280
> 
> 标签：c++, function, header, scope, inheritance

我正在写一个积分计算器。我试图让 main.cpp 文件从 functions.h.cpp 文件中的函数类中读取函数。对于简单的情况，我有一个定义如下的函数：

```
double square(double aX)
 {
   return aX*aX;
 } 
```

当我将它包含在主文件中时，这个函数可以工作，尽管当我尝试从主文件中调用它时它不想工作，当它在函数文件中时。这是我拥有的代码：

`Main.cpp`文件：

```
#include <iostream>
#include "IntegralCalculator.h"
#include "functions.h"

using namespace std;

int main()
  {
    IntegralCalculator Function(square);
    Function.print();
  } 
```

正如您所看到的，还有一个名为的类`IntegralCalculator`实际上进行了积分的计算，尽管当函数定义包含在主函数中并且函数作为参数传递时，它应该没有问题。该`functions.h`文件定义如下：

```
#ifndef FUNCTIONS_H
#define FUNCTIONS_H

#include <iostream>
#include <cmath>
#include "IntegralCalculator.h"

class functions : public IntegralCalculator
 {
  public:
   functions();
   double square(double aX);

 };

#endif 
```

并且`functions.cpp`文件定义如下：

```
#include <iostream>
#include <cmath>
#include "functions.h"

double functions::square(double aX)
 {
   return aX*aX;
 } 
```

我知道到目前为止我不需要该`<cmath>`库，尽管当我添加它们时我将需要它来实现更复杂的功能。

我尝试在 main 中继承函数类，并尝试为函数类创建命名空间并定义函数，但是这些都不起作用。当我去编译时，我收到以下错误：

`Main.cpp: In function ‘int main()’:`

`Main.cpp:9: error: ‘square’ was not declared in this scope`

如果有人可以请帮我解决这个问题。我正在尝试编写的这段代码比我的课程更先进，所以我不确定如何修复它，尽管我想以这种方式编写程序。

编辑：如果你好奇，我在 Makefile 中包含了`functions.h`和文件。`functions.cpp`当我尝试将`square(double aX)`定义也放入`IntegralCalculator`类中时，我遇到了同样的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T06:12:22.313

您的问题是，`square`是成员函数 AKA 方法。换句话说，`square`任何地方都没有简单的符号，它是`functions::square`. 而且由于它不是静态方法，单独使用没有意义，它总是需要一个对应的对象实例，而你没有，`IntegralCalculator`即使你有也无法使用。

3 个解决方案，按最简单、最接近您的问题、最好的顺序排列：

* * *

从构造函数声明中，将`square`类移出类，使其成为全局函数：

在任何类之外的functions.h中：

```
double square(double aX); 
```

在functions.cpp中

```
double square(double aX) {
    return aX*aX;
} 
```

main.cpp 中的用法：

```
IntegralCalculator Function(square); 
```

* * *

或者让它成为静态方法（如果你使用像 Java 这样的语言，你必须这样做，它不允许“裸”函数，但不是真正的 C++ 方式）：

在functions.h中：

```
class functions // inheriting IntegralCalculator removed as not needed
{
    public:
    static double square(double aX);
}; 
```

在functions.cpp中：

```
//static
double functions::square(double aX) {
    return aX*aX;
} 
```

然后你可以像这样将它传递给 main.cpp 中的函数构造函数：

```
IntegralCalculator Function(functions::square); 
```

* * *

最后，也许是最好的解决方案，将上述两者中最好的一种结合起来：放入`square`命名空间。所以functions.h变成

```
namespace functions {
    double square(double aX)
} 
```

functions.cpp 变成

```
namespace functions {
    double square(double aX) {
        return aX*aX;
    }
} 
```

您仍然像这样在 main 中使用它：

```
IntegralCalculator Function(functions::square); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:19:06.103

你有：

```
class functions : public IntegralCalculator
 {
  public:
   functions();
   double square(double aX);

 }; 
```

没关系，但不会告诉其他 cpp 文件在您的 functions.cpp 文件中某处有一个名为 square 的全局函数。您需要做的是包含该函数的标头，以便编译器知道它存在：

```
double square(double ax);
class functions : public IntegralCalculator
 {
  public:
   functions();
   double square(double aX);

 }; 
```

也与您的问题完全无关，但在看到您的构造函数代码后值得一提，您可能希望使用 typedef 来声明函数指针，如下所示：

```
typedef double (IntegralFunctor*)(double); 
```

这样您的构造函数现在可以

```
IntegralCalculator::IntegralCalculator(IntegralFunctor func); 
```

这样更干净，更不容易混淆

# android - 显示对话框时出现异常

> ID：15630295
> 
> 赞同：0
> 
> 时间：2013-03-26T05:55:22.947
> 
> 标签：android, android-widget

我正在为我的对话框使用自定义布局。这是 util java 中的一种方法（不是活动）。

```
public void showLoadingProgress(String msg){
    Log.d("EditorUtil", "show loading progress"+progressDialog);//No i18n
    if(progressDialog!=null && progressDialog.isShowing()){
        TextView message = (TextView)progressDialog.findViewById(R.id.progressmsg);
        message.setText(msg);
        return;
    }

Context context = EditorActivity.getActivity().getApplicationContext();
progressDialog = new Dialog(EditorActivity.getActivity().getApplicationContext());
progressDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
progressDialog.setCancelable(false);
progressDialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
progressDialog.setContentView(R.layout.customprogress);

TextView message = (TextView)progressDialog.findViewById(R.id.progressmsg);
message.setText(msg);

progressDialog.show();
Log.d("",progressDialog.isShowing()+""); //No i18n 
```

}

我有一个例外

```
03-26 11:23:41.672: W/dalvikvm(8034): threadid=1: thread exiting with uncaught exception (group=0x40c2d930)
03-26 11:23:41.732: E/AndroidRuntime(8034): FATAL EXCEPTION: main
03-26 11:23:41.732: E/AndroidRuntime(8034): java.lang.IllegalStateException: Could not execute method of the activity
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.view.View$1.onClick(View.java:3597)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.view.View.performClick(View.java:4202)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.view.View$PerformClick.run(View.java:17340)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.os.Handler.handleCallback(Handler.java:725)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.os.Looper.loop(Looper.java:137)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at java.lang.reflect.Method.invokeNative(Native Method)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at java.lang.reflect.Method.invoke(Method.java:511)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at dalvik.system.NativeStart.main(Native Method)
03-26 11:23:41.732: E/AndroidRuntime(8034): Caused by: java.lang.reflect.InvocationTargetException
03-26 11:23:41.732: E/AndroidRuntime(8034):     at java.lang.reflect.Method.invokeNative(Native Method)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at java.lang.reflect.Method.invoke(Method.java:511)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.view.View$1.onClick(View.java:3592)
03-26 11:23:41.732: E/AndroidRuntime(8034):     ... 11 more
03-26 11:23:41.732: E/AndroidRuntime(8034): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.view.ViewRootImpl.setView(ViewRootImpl.java:571)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:246)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
03-26 11:23:41.732: E/AndroidRuntime(8034):     at android.app.Dialog.show(Dialog.java:281 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:03:20.443

为了从非活动调用中显示`progressDialog`，您需要将当前活动上下文而不是应用程序上下文传递给对话框构造函数。您可以通过再添加一个参数将 Activity 上下文传递给 showLoadingProgress：

```
public void showLoadingProgress(String msg,Context context){

 //.....
progressDialog = new Dialog(context);
 //.....

} 
```

现在`EditorActivity.getActivity()`作为第二个参数传递给`showLoadingProgress`方法

# javascript - 数组中的 Javascript 函数

> ID：15630297
> 
> 赞同：2
> 
> 时间：2013-03-26T05:55:37.240
> 
> 标签：javascript, arrays, function, random

我的教授要求我制作一个简单的 Javascript 程序，该程序使用随机数在二维表中显示简单的数学问题及其答案。之前他给我们举了一个使用函数写入表的例子，如下所示：

```
function RandomGen() {
Random = math.floor(Math.random()*60);
    document.writeln("<th>");
       document.writeln(Random);
       document.writeln("</th>");
}
RandomGen(); 
```

为了使用数组，我可以这样做吗？

```
var RandomArray [

RandomGen(),
second_function(),
third_function(),
forth_function(),
]

RandomArray[0]; 
```

如何将函数附加在一起以写入表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:19:44.043

你几乎明白了。正确的语法是：

```
var randomArray = [    
  RandomGen,
  second_function,
  third_function,
  forth_function
];

randomArray[0](); // this calls RandomGen
randomArray[1](); // this calls second_function 
```

记住基本的语法规则：

1.  不带括号的函数名是函数引用。它的行为就像任何引用一样，因此可以被视为变量。这意味着您可以将其分配给另一个变量，将其传递给另一个函数，然后如上面的示例将其填充到一个数组中。

2.  将括号添加`()`到函数引用会导致调用该函数。函数引用是普通的旧函数名还是存储在另一个变量中或存储在数组中都没有关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:01:12.310

您可以将函数存储在变量中，然后将变量放入数组中，然后从数组中访问它们以调用它们。

```
var add = function(x,y){ return x + y; };
var multiply = function(x,y){ return x * y; };
var maths = [];
maths.push(add);
maths.push(multiply);
maths[0](1,2);//3
maths[1](3,4);//12 
```

相反，您可以使用对象执行此操作。

```
var maths = {};
maths.add = function(x,y){ return x + y; };
var four = maths.add(1,3); 
```

显然，您将不得不修改这些以匹配您的确切情况。

# c# - 如何在与数据库相关的工作正在进行时显示动画等待窗口

> ID：15630298
> 
> 赞同：0
> 
> 时间：2013-03-26T05:55:37.260
> 
> 标签：c#, multithreading, winforms, async-await

我正在开发 C# 4.0 WinForm 应用程序，这些实际上是与会计相关的应用程序，主要功能是将数据保存在数据库中并从中检索。

后端使用 SqlServer 2008 r2 Express。

问题是当我们在数据库上执行命令时需要几秒钟的时间，那时我的应用程序主窗口会停止。

当我对数据库执行命令时，当在数据库上执行整个命令时，主应用程序返回。

就像“NonQuery()”

所以，我在它之前显示一个表单并在命令之后关闭该表单，但问题是我在表单上放置了一个 GIF 图像，因为在主应用程序上停止执行，gif 在命令执行之前不显示动画.

所以我把它放在BackGroundWorker上，但是主线程被停止了，所以它的子线程也停止了。

我们不能将数据库事务放在后台工作人员中，因为有时工作取决于从数据库中检索到的结果，并且我们希望停止应用程序直到没有获取数据，但在这种情况下，我们也希望在等待表单上显示 gif 图像它的动画。

在这种情况下该怎么做，怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:08:58.677

用于`BackgroundWorker`SQL taransiction，但`Form.Enabled=False`在启动之前放置`BackgroundWorker`，然后`Form.Enabled=true`放在`RunWorkerCompleted`BackgroundWorker 的事件上。

这将释放一个主线程来显示 .gif 图片的动画，并在所有数据查询准备好之前停止用户继续工作。

或者，如果`.Enabled=false`你看起来很难看，你可以创建一个激活/禁用所有主要按钮/控件并阻止用户做事的方法......

或使用方法打开其他表单（使用您的动画 .gif）`.ShowDialog()`。然后从这个表单开始`BackgroundWorker`并阻止用户在 SQl 事务准备好之前关闭这个“第二个”表单......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:56:52.457

您可以在新线程中运行您的方法：

```
 Thread query = new Thread(() => Method("Method", "Parameters", Blah));
  query.Start();
  //start your animation

  while (query.IsAlive)
  {
    Application.DoEvents();
    Thread.Sleep(10);
  }

  //end your animation 
```

这将为您的动画释放 UI 线程，并且需要最少的修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:02:55.723

我不完全明白为什么你不能使用Backgroundworker ...

您可以尝试对数据库内容使用关键字 async 和 await ，这样表单就不会冻结。你可以看看[这个](http://msdn.microsoft.com/de-de/library/vstudio/hh156513.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:09:45.753

该功能称为加载程序...加载页面时显示需要时间...

“
**加载中...**

"

* * *

```
 <asp:UpdateProgress ID="updateProgress1" runat="server">
 <ProgressTemplate>
       <div id="progressBackgroundFilter">
                 </div>
           <div id="processMessage" style="text-align: center">
                             <asp:Image ID="imgLoader" runat="server" ImageUrl="~/Images/loader.gif" />
                                                                            <br />
           <b>Loading...</b>
           </div>
</ProgressTemplate> 
```

# python - pandas argsort 的有趣结果

> ID：15630302
> 
> 赞同：1
> 
> 时间：2013-03-26T05:56:09.837
> 
> 标签：python, pandas

我想我遇到了熊猫的一个错误。我希望得到一些帮助来验证错误或帮助我找出我的逻辑错误在我的代码中的位置。

我的代码如下：

```
import pandas, numpy, StringIO

def sq_fixer(sr):
    sr = sr.where(sr != '20200229')
    ranks = sr.argsort().astype(float)
    ranks[ranks == -1] = numpy.nan

    return ','.join(ranks.astype(numpy.str))

def correct_date(sr):

    date_fixer = lambda x: pandas.datetime(x.year -100, x.month, x.day) if x > pandas.datetime.now() else x
    sr = pandas.to_datetime(sr).apply(date_fixer).astype(pandas.datetime)

    return sr 

txt = '''ID,RUN_START_DATE,PUSHUP_START_DATE,SITUP_START_DATE,PULLUP_START_DATE
1,2013-01-24,2013-01-02,,2013-02-03
2,2013-01-30,2013-01-21,2013-01-13,2013-01-06
3,2013-01-29,2013-01-28,2013-01-01,2013-01-29
4,2013-02-16,2013-02-12,2013-01-04,2013-02-11
5,2013-01-06,2013-02-07,2013-02-25,2013-02-12
6,2013-01-26,2013-01-28,2013-02-12,2013-01-10
7,2013-01-26,,2013-01-12,2013-01-30
8,2013-01-03,2013-01-24,2013-01-19,2013-01-02
9,2013-01-22,2013-01-13,2013-02-03,
10,2013-02-06,2013-01-16,2013-02-07,2013-01-11
3347,,2008-02-27,2008-04-10,2008-02-13 
3588,2004-09-12,,2004-11-06,2004-09-06 
3784,2003-02-22,,2003-06-21,2003-02-19 
593,2009-04-03,,2009-06-01,2009-04-01 
4148,2003-03-21,2002-09-20,2003-04-01,2003-01-01 
4299,2004-05-24,2004-07-23,,2004-04-22 
4590,2005-05-05,2005-12-05,2005-04-05,
4830,2001-06-12,2000-10-12,2001-07-28,2001-01-28 
4941,2006-11-08,2006-12-19,2006-07-19,2007-02-24 
1416,2004-04-03,2004-05-19,2004-02-06,
1580,2008-12-20,,2009-03-19,2008-12-19 
1661,2005-10-03,2005-10-26,2005-09-12,2006-02-19 
1759,2001-10-18,,2002-01-17,2001-10-17 
1858,2003-04-14,2003-05-17,,2002-12-17 
1972,2003-06-01,2003-07-14,2002-12-14,
5905,2000-11-18,2001-01-13,,2000-11-04 
2052,2002-06-11,,2002-08-23,2001-12-12 
2165,2006-10-01,,2007-02-27,2006-09-30 
2218,2007-09-19,,2008-02-06,2007-09-09 
2350,2000-08-08,,2000-09-22,2000-01-08 
2432,2001-08-22,,2001-09-25,2000-12-16 
2611,2005-05-07,,2005-06-05,2005-03-26 
2612,2005-05-06,,2005-05-26,2005-04-11 
7378,2009-08-07,2009-01-30,2010-01-20,2009-06-08 
7550,2006-04-08,,2006-06-01,2006-04-01  '''

df = pandas.read_csv(StringIO.StringIO(txt))

sequence_array = ['RUN_START_DATE', 'PUSHUP_START_DATE', 'SITUP_START_DATE', 'PULLUP_START_DATE']
xsequence_array = ['X_RUN_START_DATE', 'X_PUSHUP_START_DATE', 'X_SITUP_START_DATE', 'X_PULLUP_START_DATE']

df[sequence_array] = df[sequence_array].apply(correct_date, axis=1)

fix_day = lambda x: x if x > 0 else 29
fix_month = lambda x: x if x > 0 else 02
fix_year = lambda x: x if x > 0 else 2020

for col in sequence_array:

    xcol = 'X_{0}'.format(col)
    df[xcol] = ['{0:04d}{1:02d}{2:02d}'.format(fix_year(c.year), fix_month(c.month), fix_day(c.day)) for c in df[col]]

df['X_AS_SEQUENCE'] = df[xsequence_array].apply(sq_fixer, axis=1) 
```

当我运行代码时，大多数结果都是正确的。以索引 6 为例：

```
In [31]: df.ix[6]
Out[31]: 
ID                                       7
RUN_START_DATE         2013-01-26 00:00:00
PUSHUP_START_DATE                      NaN
SITUP_START_DATE       2013-01-12 00:00:00
PULLUP_START_DATE      2013-01-30 00:00:00
X_RUN_START_DATE                  20130126
X_PUSHUP_START_DATE               20200229
X_SITUP_START_DATE                20130112
X_PULLUP_START_DATE               20130130
X_AS_SEQUENCE              1.0,nan,0.0,2.0 
```

但是，某些索引似乎会抛出 pandas.argsort() 循环。以索引 10 为例：

```
In [32]: df.ix[10]
Out[32]: 
ID                                    3347
RUN_START_DATE                         NaN
PUSHUP_START_DATE      2008-02-27 00:00:00
SITUP_START_DATE       2008-04-10 00:00:00
PULLUP_START_DATE      2008-02-13 00:00:00
X_RUN_START_DATE                  20200229
X_PUSHUP_START_DATE               20080227
X_SITUP_START_DATE                20080410
X_PULLUP_START_DATE               20080213
X_AS_SEQUENCE              nan,2.0,0.0,1.0 
```

argsort 应该返回`nan,1.0,2.0,0.0`而不是`nan,2.0,0.0,1.0`.

我已经坚持了三天。在这一点上，我不确定是我还是错误。我不知道如何回溯它以获得答案。非常感激任何的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T07:05:14.337

您可能对结果的解释`argsort`不正确。 `argsort`没有给出值的排名。如果要对值进行排名，请使用[排名方法。](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.rank.html#pandas.Series.rank)

返回的 Series 中的值`argsort`给出了删除 NaN 后原始值的对应位置。在您的情况下，由于您将 20200229 转换为 NaN，因此您是 argsorting `NaN, 20080227, 20080410, 20080213`。非 NaN 值是

```
nonnan = [20080227, 20080410, 20080213] 
```

结果，`NaN, 2, 0, 1`说：

```
argsort     sorted values
  NaN       NaN
   2        nonnan[2] = 20080213
   0        nonnan[0] = 20080227
   1        nonnan[1] = 20080410 
```

所以在我看来还可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T16:13:23.840

如果要对系列进行排序，只需使用 sort_values() 或 rank() 函数：

```
In [2]: a=pd.Series([3,2,1])

In [3]: a
Out[3]:
0    3
1    2
2    1
dtype: int64
In [4]: a.sort_values()
Out[4]:
2    1
1    2
0    3
dtype: int64 
```

如果您使用 argsort()，这将为您提供已排序系列中每个元素的位置，在这种情况下，1 应位于 0 位置，2 应位于 1 位置，3 应位于 2 位置

```
In [5]: a.argsort()
Out[5]:
0    2
1    1
2    0
dtype: int64 
```

# jquery - 在对话框中加载 ajax 响应后，第二次单击时不会触发对话框

> ID：15630305
> 
> 赞同：1
> 
> 时间：2013-03-26T05:56:23.763
> 
> 标签：jquery, jquery-ui-dialog

```
var value;
$("#multipleids").live("dblclick", function(){  
    value =$(this).attr('id');  
    $.ajax({
        type:"post",
        url: "ajax.php",                        
        data:"value="+value,
        success: function(data){
            $("#dialog").html(data);
        }   
    });
    $("#dialog").dialog(
    {
        title: 'title',
        autoOpen:true,          
        closeOnEscape: true,
        width:500,
        height:500,
        resizable: false,
        draggable: false,
        open: function() {             
            })
        }       
    });

}); 
```

hie...点击打开一个包含ajax调用结果的对话框..第二次点击对话框没有打开。当我使用autoOpen：false属性...对话框不在所有显示....任何人都可以建议如何解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:48:55.170

您正在使用 jquery 的 Html 替换 jquery 的设置来创建 jquery ui 对话框，这就是您看不到对话框的原因

您要做的是在#dialog 中创建一个div，然后

```
$("#divinsideyour-dialog").html(markup) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:19:10.200

我更改了您的部分代码，但没有时间测试它，我的代码几乎喜欢这个并且运行良好。你可以试试：

```
var value;

var oTable=$("#dialog").dialog(
    {
        title: 'title',
        autoOpen:false,          
        closeOnEscape: true,
        width:500,
        height:500,
        resizable: false,
        draggable: false,
        open: function() {             
            })
        }       
    });

$("#multipleids").live("dblclick", function(){  
    value =$(this).attr('id');  
    $.ajax({
        type:"post",
        url: "ajax.php",                        
        data:"value="+value,
        success: function(data){
            oTable.dialog("open");
            oTable.createdDialog.html(data);
        }   
    });
}); 
```

# scons - scons 中的编译器许可问题

> ID：15630310
> 
> 赞同：0
> 
> 时间：2013-03-26T05:56:44.000
> 
> 标签：scons

我正在使用带有瑞萨编译器的 scons。

我能够编译和链接我的项目。但是在链接时我收到以下消息：

“软件许可问题：许可或访问功能未知的内部错误”

即使我有瑞萨编译器的试用许可证。

即使有上述消息，我也能够为小型应用程序生成可执行文件（瑞萨电子的 .abs 文件）。当我尝试为更大的应用程序创建可执行文件时，我在链接时收到以下消息：

“软件许可问题：许可或访问功能未知的内部错误” 最大链接大小限制为 64KB 代码+数据。

我尝试在具有有效 Renesas 许可证的机器上使用 SCONS 为上述应用程序创建可执行文件。即使在这台机器上，我也看到了相同的消息，但我无法生成 .abs 文件。（在这台机器上，我可以在不使用 scons 的情况下创建可执行文件）

任何人都可以帮助我克服这个问题。我不知道我收到的消息是来自 SCONS 还是来自 Renesas 工具链。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:29:14.460

您的工具链可能设置了一些环境变量，告诉编译器在哪里可以找到许可证文件。scons 几乎抹杀了你的环境，而且你可能没有传播它需要的信息。

# ruby-on-rails - rails 2 + thinkbot-should

> ID：15630311
> 
> 赞同：2
> 
> 时间：2013-03-26T05:56:45.853
> 
> 标签：ruby-on-rails, shoulda

我在 rails 2 应用程序中使用了 thinkbot-should gem。模型是

```
class Zone < ActiveRecord::Base
  belongs_to :organization
  has_many :volunteer_shifts

  validates_presence_of :organization_id
  validates_presence_of :name
end

$cat spec/models/zone_spec.rb 

require 'spec_helper'
describe Zone do
  context "should" do
    it { should have_db_column(:organization_id) }#, :decimal}
    it { should have_db_column(:name) }
    it { should have_db_column(:description) }

    it { should belong_to(:organization) }
    it { should have_many(:volunteer_shifts) }

    it { should validate_presence_of(:organization_id) }
    it { should validate_presence_of(:name) }
  end
end 
```

但规范没有说

```
'Zone should should require organization_id to be set' FAILED
Expected errors to include "%{attribute}: can't be blank" when organization_id is set to nil, got errors: organization_id Organization: can't be blank (nil)name Name: can't be blank (nil) 
```

所有验证匹配器都失败。参考站点是[http://rubydoc.info/gems/thoughtbot-shoulda/2.11.1/frames](http://rubydoc.info/gems/thoughtbot-shoulda/2.11.1/frames)

```
$ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [i686-linux]
$rails -v
Rails 2.3.16
$cat spec/spec_helper.rb | grep shoulda
require 'shoulda/rails'

group :test do
  gem 'rspec', '1.3.2', :require => false
  gem 'rspec-rails', '1.3.4', :require => false
  gem 'thoughtbot-shoulda', "2.11.1"
end

$bundle exec script/console 
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after   2011-11-01.
Gem.source_index called from   ./script/../config/../vendor/rails/railties/lib/rails/gem_dependency.rb:21.
Loading development environment (Rails 2.3.16)
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /home/prasad/projects/app/config/../vendor/rails/railties/lib/rails/gem_dependency.rb:21.
>> Zone
SQL (0.3ms)   SET NAMES 'utf8'
SQL (0.2ms)   SET SQL_AUTO_IS_NULL=0
SQL (2.4ms)   SHOW TABLES
Zone Columns (1.6ms)   SHOW FIELDS FROM `zones`
=> Zone(id: integer, organization_id: integer, name: string, description: text, created_at: datetime, updated_at: datetime) 
```

Gemfile.lock

```
GEM
 remote: http://rubygems.org/
 specs:
Ascii85 (1.0.2)
actionmailer (2.3.16)
  actionpack (= 2.3.16)
actionpack (2.3.16)
  activesupport (= 2.3.16)
  rack (~> 1.1.0)
active_utils (1.0.3)
  activesupport (>= 2.3.11)
  i18n
activerecord (2.3.16)
  activesupport (= 2.3.16)
activeresource (2.3.16)
  activesupport (= 2.3.16)
activesupport (2.3.16)
acts_as_xlsx (1.0.5)
  activerecord (>= 2.3.9)
  axlsx (>= 1.0.13)
  i18n (>= 0.4.1)
addressable (2.3.3)
airbrake (3.1.8)
  activesupport
  builder
  json
authorize-net (1.5.2)
  nokogiri (~> 1.4)
axlsx (1.3.5)
  htmlentities (~> 4.3.1)
  nokogiri (>= 1.4.1)
  rubyzip (>= 0.9.5)
barby (0.5.1)
builder (3.2.0)
calendar_date_select (1.16.1)
capistrano (2.9.0)
  highline
  net-scp (>= 1.0.0)
  net-sftp (>= 2.0.0)
  net-ssh (>= 2.0.14)
  net-ssh-gateway (>= 1.1.0)
capistrano-ext (1.2.1)
  capistrano (>= 1.0.0)
capybara (1.1.4)
  mime-types (>= 1.16)
  nokogiri (>= 1.3.3)
  rack (>= 1.0.0)
  rack-test (>= 0.5.4)
  selenium-webdriver (~> 2.0)
  xpath (~> 0.1.4)
capybara-webkit (0.12.1)
  capybara (>= 1.0.0, < 1.2)
  json
childprocess (0.3.9)
  ffi (~> 1.0, >= 1.0.11)
cocaine (0.4.2)
commonjs (0.2.6)
crack (0.1.8)
cucumber (1.1.0)
  builder (>= 2.1.2)
  diff-lcs (>= 1.1.2)
  gherkin (~> 2.5.0)
  json (>= 1.4.6)
  term-ansicolor (>= 1.0.6)
cucumber-rails (0.3.2)
  cucumber (>= 0.8.0)
daemon-spawn (0.3.0)
daemons (1.0.10)
delayed_job (2.0.7)
  activesupport (~> 2.0)
  daemons (= 1.0.10)
diff-lcs (1.2.1)
factory_girl (2.6.4)
  activesupport (>= 2.3.9)
faker (1.1.2)
  i18n (~> 0.5)
fakeweb (1.3.0)
fastercsv (1.5.3)
ffi (1.4.0)
gherkin (2.5.4)
  json (>= 1.4.6)
graticule (0.2.12)
  activesupport
highline (1.6.16)
hodel_3000_compliant_logger (0.1.1)
htmlentities (4.3.1)
httparty (0.6.1)
  crack (= 0.1.8)
i18n (0.5.0)
json (1.7.7)
launchy (2.2.0)
  addressable (~> 2.3)
less (2.1.0)
  commonjs (~> 0.2.0)
  therubyracer (~> 0.10.0)
libv8 (3.3.10.4)
lockfile (1.4.3)
macaddr (1.6.1)
  systemu (~> 2.5.0)
mail (2.4.1)
  i18n (>= 0.4.0)
  mime-types (~> 1.16)
  treetop (~> 1.4.8)
mechanize (1.0.0)
  nokogiri (>= 1.2.1)
mime-types (1.21)
multi_json (1.7.0)
multipart-post (1.1.0)
mysql (2.8.1)
net-scp (1.1.0)
  net-ssh (>= 2.6.5)
net-sftp (2.1.1)
  net-ssh (>= 2.6.5)
net-ssh (2.6.6)
net-ssh-gateway (1.2.0)
  net-ssh (>= 2.6.5)
newrelic_rpm (3.5.8.72)
nokogiri (1.4.7)
oink (0.1.2)
  hodel_3000_compliant_logger
paperclip (2.8.0)
  activerecord (>= 2.3.0)
  activesupport (>= 2.3.2)
  cocaine (>= 0.0.2)
  mime-types
pdf-reader (0.8.5)
  Ascii85 (>= 0.9)
pipejump (0.4.4)
polyglot (0.3.3)
postageapp (1.0.14)
  json
rack-test (0.6.2)
  rack (>= 1.0)
rails (2.3.16)
  actionmailer (= 2.3.16)
  actionpack (= 2.3.16)
  activerecord (= 2.3.16)
  activeresource (= 2.3.16)
  activesupport (= 2.3.16)
  rake (>= 0.8.3)
rake (0.8.7)
rcov (1.0.0)
rdoc (2.4.3)
rmagick (2.12.2)
rspec (1.3.2)
rspec-rails (1.2.9)
  rack (>= 1.0.0)
  rspec (>= 1.2.9)
rubyzip (0.9.7)
sanitize (2.0.0)
  nokogiri (~> 1.4.4)
selenium-webdriver (2.31.0)
  childprocess (>= 0.2.5)
  multi_json (~> 1.0)
  rubyzip
  websocket (~> 1.0.4)
steak (1.1.0)
  rspec (>= 1.3)
system_timer (1.0)
systemu (2.5.2)
term-ansicolor (1.1.1)
therubyracer (0.10.2)
  libv8 (~> 3.3.10)
thoughtbot-shoulda (2.11.1)
timecop (0.6.1)
treetop (1.4.10)
  polyglot
  polyglot (>= 0.3.1)
uuid (2.3.6)
  macaddr (~> 1.0)
vpim (0.695)
webrat (0.5.3)
  nokogiri (>= 1.2.0)
  rack (>= 1.0)
websocket (1.0.7)
wicked_pdf (0.7.9)
xpath (0.1.4)
  nokogiri (~> 1.3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:35:29.270

我重新创建了您的代码，一切正常（并且规范通过了）。你有`require 'shoulda'`你的`spec_helper`，对吧？我唯一能想到的另一件事是你可能有一段时间没有跑步`db:migrate`了。另外，你确定上`ruby 1.8.7`吗？很难想到你所拥有的和我在本地拥有的有什么不同。

# python - 图像每个维度中的元素数

> ID：15630313
> 
> 赞同：1
> 
> 时间：2013-03-26T05:57:01.983
> 
> 标签：python, image, dimensions

我想为我的 python 脚本提供一个输入图像，并找出输入图像的每个维度中的元素数量。python中是否有任何函数可以给出每个维度中元素的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:10:10.537

使用 scipy：

```
>>> from scipy.misc import imread
>>> img = imread("test.jpg")
>>> img.shape
0: (963, 712, 3) 
```

其中 963 - 宽度，712 - 高度，3 - 通道数。

# android - 我如何在 Textview setText Android 上进行计算

> ID：15630318
> 
> 赞同：1
> 
> 时间：2013-03-26T05:57:58.113
> 
> 标签：android, loops, textview, calculator

如何将 n 的值与 2 相加？即`n+2`textview 输出应为 4 。

```
int n=2;
private void tvm() {
            if (n<=maxCount) {
                n++;
                textview.setText("Counter:"+ n+2);                 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:39:19.070

只是您需要通过给出与上述答案中所示相同的括号来给予优先级。希望现在它可以正常工作。

```
tv.setText("Text you enter: "+ (a + b)); 
```

输出：“您输入的文字：`c`”

在哪里`c =a + b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:00:30.437

```
int n=2;
private void tvm() {
            if (n<=maxCount) {            
                textview.setText("Counter:"+ String.valueOf( n+2));   
                  n++;              
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:01:04.637

将您的代码更改为

```
textview.setText("Counter:"+ (n+2)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T06:04:59.727

如果您希望输出为 4，那么首先您需要将 value 设置为 textView 然后增加 n 值。

```
if (n<=maxCount) 
{
    text.setText("Counter:"+ (n+2));
    n++;
} 
```

**输出：** 计数器：4

# eclipse - Eclipse Juno 的 Maven 插件安装失败？

> ID：15630320
> 
> 赞同：0
> 
> 时间：2013-03-26T05:58:06.947
> 
> 标签：eclipse, maven-plugin, eclipse-juno

从 eclipse 市场安装 maven 插件时出现以下错误。Eclipse 版本是 Juno。

```
An error occurred while collecting items to be installed

session context was:(profile=epp.package.jee, 
phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Problems downloading artifact: 
    osgi.bundle,org.eclipse.m2e.maven.runtime,1.3.1.20130219-0923.
MD5 hash is not as expected.
Expected: 7a5ed4c4367be0a19e1c297bfbfe53b8 and 
found 223b1b3e1b17bf8fb075672dfbd58dd7. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:04:55.703

再次运行安装。如错误消息所示，下载的插件文件已损坏。

# android - Android Handler，内存泄漏？

> ID：15630321
> 
> 赞同：0
> 
> 时间：2013-03-26T05:58:12.493
> 
> 标签：android, multithreading, memory, handler, memory-leaks

我知道 Handler 可能会在 Android 中泄漏内存，但我不太确定我所做的是否正确：

```
public class MyActivity extends Activity
{

Handler handler;
HashMap<String, String> bigData = new HashMap<String, String>();

protected void onCreate(undle savedInstanceState) {
    super.onCreate(savedInstanceState);
    handler = new WeakHandler(){
        public void handlerMessage(Message msg, Context conetxt)
        {
           // i think this usage is wrong, still leak, am I right?
           Log.v("MyActivity", bigData.get("abc"))
        }
    }
};

static class WeakHandler extends Handler {

    private final WeakReference<Context> ref;

    public WeakHandler(Context t) {
        super();
        ref = new WeakReference<Context>(t);
    }

    @Override
    public final void handleMessage(Message msg) {
        final Context context = ref.get();
        if (context != null) {
            handleMessage(msg, context);
        }
    }

    public void handlerMessage(Message msg, Context conetxt)
    {

    }

 } 
```

另外，如果我只想使用 Handler 来“post”、“postDelayed”、“removeCallbacks”，我不关心 handleMessage，只创建一个新的 Handler 实例来执行此操作是否安全，如下所示：

```
new Handler().postDelayed(some Runnable); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T18:08:46.937

当您实例化 WeakHandler 时，它不会是一个实际的 WeakHandler 类，而是一个扩展 WeakHandler 类的匿名类。Anonymous 类永远不是静态的，因此除了显式 WeakReference 之外，它还将隐式引用包含的类（即 MyActivity）。

由于 onCreate() 在主线程上运行，在 onCreate() 内部创建的 Handler 将与主线程（实际上是应用程序启动时创建的主 Looper）相关联。如果您向 Handler 发布 Message（或 Runnable，因为 Runnable 将被 Message 包裹），则该 Message/Runnable 将具有对 Handler 的引用。

所以给你 postDelayed 延迟 5 分钟的东西。销毁 Activity 后（例如，因为旋转），主 Looper 将引用 Message/Runnable，Message/Runnable 将引用 Handler，Handler 将引用 Activity 5 分钟。这是一个泄漏。

是的，"Log.v("MyActivity", bigData.get("abc"))" 行也泄露了活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:40:46.383

使用 MAT Analyzer 检查内存泄漏。[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。谈话是关于内存泄漏的。

我猜对上下文的引用会导致泄漏。使用 getApplicationContext();

只要您的应用程序存在，这个上下文就会存在。

[http://android-developers.blogspot.in/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.in/2009/01/avoiding-memory-leaks.html)。

# html - 试图让 2 个下拉框指向一个 URL

> ID：15630322
> 
> 赞同：0
> 
> 时间：2013-03-26T05:58:13.443
> 
> 标签：html

所以我想在我的网站上有一个包含 2 个下拉框和一个提交按钮的页面。单击提交按钮时，它将指向一个 URL，然后将它们带到一个新页面。URL 将基于在下拉菜单中选择的任何内容。

例如：下拉 1 有选项 A 和 B 下拉 2 有选项 1 和 2

那么每个组合都会有一个不同的 url A1 指向 URL-1 A2 指向 URL-2 B1 指向 URL-3 B2 指向 URL-4

我真的对编码知之甚少，并且在过去的 3 个小时里一直在寻找一种方法来做到这一点，我什至不知道如何用谷歌搜索它。我真的很感谢我在这一点上能得到的任何帮助。先感谢您！:)

这是我的投递箱中的代码。我编辑了选项以将示例与 A、B、1 和 2 匹配。

```
<html>
<body>
<form>
<select id="list1t">
  <option>Select one</option>
  <option>A</option>
  <option>B</option>
</select>
</form>
<form>
<select id="list2">
  <option>Select one</option>
  <option>1</option>
  <option>2</option>
</select>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:19:49.327

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
var url;
$(function(){
$('#link').click(function(){
    var val1=$('#first').val();
    var val2=$('#second').val();
    if(val1=='A'){
        if(val2=='1'){
              url="URL1";
        }
        else{
              url="URL2";
        }
    }else{
        if(val2=='1'){
              url="URL3";
        }
        else{
              url="URL4";
        }
    }
    window.location.href=url;
});
});
</script> 
```

html将是

```
<select id="first">
    <option value="A" selected>A</option>
    <option value="B">B</option>
</select>
<select id="second">
    <option value="1" selected>1</option>
    <option value="2">2</option>
</select> 
```

您可以使用链接单击 。无需表单或提交按钮

```
<a href="#" id="link">BUTTON</a> 
```

# c# - 在当前页面按钮上应用不同的样式？

> ID：15630325
> 
> 赞同：0
> 
> 时间：2013-03-26T05:58:26.457
> 
> 标签：c#, asp.net, .net, vb.net, sitefinity

我在 asp.net 中做一个网站（制作用户控件）并在 sitefinity 页面中使用它们。我的导航栏按钮也是放置在模板中的用户控件。

要求在当前页面按钮上，该页面的按钮应该有不同的样式（颜色和 bgcolor）。

我不知道如何实现这个要求。请指导请求。

**编辑：** 我没有得到如何在所选页面上应用课程。如何在用户控件中知道哪个页面是当前页面。因为两者都是在 sitefinity 页面中使用的单独的用户控件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:35:26.127

您是否对使用自定义控件进行导航有特定要求？如果您使用 Sitefinity 附带的导航控件（它位于小部件 Dock 中） - 它会自动将 CSS 类（“rtSelected”）添加到所选页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:04:14.897

使用主题，您可以使用与 .NET Framework 捆绑在一起的预定义外观轻松自定义服务器控件，或者可以根据您网站的外观制作自己的主题。试试这个链接

[http://www.codeproject.com/Articles/11886/Themes-and-Skins-in-ASP-NET-2-0](http://www.codeproject.com/Articles/11886/Themes-and-Skins-in-ASP-NET-2-0)

编辑#1

试试这个链接

[如何让用户控件了解 ASP.NET 中的 css 类](https://stackoverflow.com/questions/34390/how-to-make-user-controls-know-about-css-classes-in-asp-net)

和

[将 CSS 应用于 ASP:NET 中的自定义用户控件的单个实例](https://stackoverflow.com/questions/8288728/apply-css-to-single-instance-of-custom-user-control-in-aspnet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:05:19.003

如果可以，您可以使用`telerik controls`.

您可以根据需要为其编写 css 代码，然后按如下方式提供指向该 css 的链接>>

```
 <MyUserControls:MyMenuButton ID="SalesDocumentsMyMenuButton"
                    RootMenuItemText="Sales Documents"
                    RootMenuImage="~/images/common/sales_document.gif"
                    UseSeperator="true"
                    CssClass="css/myButtonMenu.css"
                    runat="server" /> 
```

您还可以为特定控件的代码隐藏编写 css >>

```
<div class='<%= CssClass %>' >
    <div id="contentPlaceholder" runat="server" class="contentPlaceholderStyle">
    </div>
</div>

[CssClassProperty]
public string CssClass
{
    get { return (string)(ViewState["CssClass"] ?? ""); }
    set { ViewState["CssClass"] = value; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:10:35.573

您可以创建不同的主题并根据您的情况使用它。
主题将包含不同的 css 文件。
创建具有相同名称但具有不同颜色或背景颜色的 css 类并
根据您的条件使用该主题

例子

```
protected void BasePage_PreInit(object sender, EventArgs e)
{
   this.Page.Theme = themeName;
 } 
```

这是一个教程
[http://www.aspdotnet-suresh.com/2011/10/how-to-change-page-theme-dynamically-in.html](http://www.aspdotnet-suresh.com/2011/10/how-to-change-page-theme-dynamically-in.html)
[http://www.codeproject.com/Articles/18300/How -to-change-page-theme-in-asp-net-2-0-dynamicall](http://www.codeproject.com/Articles/18300/How-to-change-page-theme-in-asp-net-2-0-dynamicall)
[http://aspalliance.com/959_Themes_and_Master_Pages_in_ASPNET_20__A_Perfect_Combination.4](http://aspalliance.com/959_Themes_and_Master_Pages_in_ASPNET_20__A_Perfect_Combination.4)

# java - 如何在Java中获取最后一个数组之前的所有元素

> ID：15630329
> 
> 赞同：2
> 
> 时间：2013-03-26T05:59:01.087
> 
> 标签：java, string

我能够获取数组的最后一个元素，但无法获取除最后一个元素之外的所有元素。这是我的代码，通过它我得到拆分后数组的最后一个元素：

```
class Main {
   public static void main(String args[]) {
      String s ="23+43*435/675-90";
      String[] ss = s.split("[-+*/]");
      String last=ss[ss.length-1];
      System.out.println(last);     
   }
} 
```

此代码返回 90 但现在我也希望它返回结果，例如`23+43*435/675-`给定的字符串可以更小或更大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:05:22.813

尝试

```
 String s ="23+43*435/675-90";
    s = s.replaceAll("(.*[-+*/]).*", "$1");
    System.out.println(s); 
```

输出

```
23+43*435/675- 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T06:04:02.650

```
String whatYouWant = s.substring(0, s.length() - last.length()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T06:23:42.440

```
public static void main(String args[]) {
    String s ="23+43*435/675-90";
    String[] ss = s.split("[-+*/]");
    String last=ss[ss.length-1];
    System.out.println(last);
    String except_last = s.substring(0, s.length() - last.length());
    System.out.println(except_last);
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-26T06:02:49.580

你最好的选择是：

```
String[] s3 = new String[ss.length-1];
System.arraycopy(ss, 0, s3, 0, ss.length-1); 
```

或者用 Python 来做。

不幸的是，没有方便的方法将您的子数组重新连接成字符串，但是如果您想要一个子数组，那么您就可以开始了。

# android - 在一台设备上获取 INVALID_SENDER，同时与另一台 GCM android 一起使用

> ID：15630331
> 
> 赞同：12
> 
> 时间：2013-03-26T05:59:21.473
> 
> 标签：android, google-cloud-messaging

我正在[使用 Google Cloud Messaging (GCM) 跟踪 Android 推送通知](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)，以在我的应用程序中实现 GCM，`(Galaxy S)`当我尝试使用另一台设备测试它时，它在单个设备上运行良好，`( Galaxy Tab 7')`它会生成错误。

> handleRegistration：registrationId = null，error = INVALID_SENDER，未注册 = null

这是我得到的日志

```
V/GCMRegistrar(5649): Registering app  my_maypackage of senders APA91bHvzZbO_nyYvaA_QRGDaV-wRAYKjt0qJSQmzPUi2unqG7j0OGuyhVY1A3zh-ZfnA0XT0ffgyKypVJ_5owLZvZBNGARpTBkBg9ED8gVVCDejaIpShghq_tXGhMnFQEufwdCL1ibm
V/GCMRegistrar(5649): Setting registeredOnServer status as true until 2013-04-02 11:02:07.847

V/GCMBroadcastReceiver(5649): onReceive: com.google.android.c2dm.intent.REGISTRATION
V/GCMBroadcastReceiver(5649): GCM IntentService class: my_maypackage.GCMIntentService
V/GCMBaseIntentService(5649): Acquiring wakelock
V/GCMBaseIntentService(5649): Intent service name: GCMIntentService-980172650021-7

D/GCMBaseIntentService(5649): handleRegistration: registrationId = null, error = INVALID_SENDER, unregistered = null
D/GCMBaseIntentService(5649): Registration error: INVALID_SENDER
I/GCMIntentService(5649): Received error: INVALID_SENDER
V/GCMBaseIntentService(5649): Releasing wakelock 
```

注意：两台设备都配置了相同的 gmail 帐户。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-21T20:05:13.860

日志显示不正确的发件人 ID。它应该取自 Google api 项目 url。例如

[https://code.google.com/apis/console/b/0/#project:65464654646546](https://code.google.com/apis/console/b/0/#project:65464654646546)

那么 65464654646546 是发件人 ID。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-24T12:17:28.787

对我来说，从控制台的 API 部分启用“Google Cloud Messaging for Android”做了什么： ![在此处输入图像描述](../Images/760ca09a3e2a1404caff90d4a4ef8a68.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-11T02:00:36.477

[添加到@spanjeta 的答案：]

问题在于获得项目编号并非易事，因为谷歌一直在修改开发者控制台。虽然 Google 很友好地为开发人员提供了为他们的项目声明友好/文本 ID 的可能性，但他们没有更新 GCM 文档，因为这不能替换 GCM 客户端中的项目 ID。当你这样做时（给项目一个文本名称/ID） - 你不能使用它，因为你会得到一个 INVALID_SENDER 错误。您必须以某种方式获得纯数字项目 ID。

那么如何获得项目编号呢？您需要以某种方式访问​​旧的开发人员控制台。以下方式有效（目前）：哟去开发者控制台→您的项目→APIS→Google Cloud Messaging for Android→配额然后将使用以下URL打开一个新的旧的google devloper控制台选项卡： [https：//code .google.com/apis/console/b/0/?noredirect#project](https://code.google.com/apis/console/b/0/?noredirect#project) : **YOUR_PROJECT_NUMBER** :quotas

然后，在您的应用中使用**YOUR_PROJECT_NUMBER**作为 GCM SENDER_ID。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-24T07:44:13.593

I just wanted to share with you that I ran into this same problem just now.

GCM push worked perfectly fine before, nothing's got changed, and all of the sudden our users flushed back with complaints about not getting push notifications.

So I did check out all the StackOverflow thread re. this issue and still couldn't figure things out (had the app id / keys all correctly input, code's perfectly fine, even tried out on the Google demo and blah blah blah)

So in an act of desperate I went to the dev console and disabled GCM, then re-enabled it... everything just worked!

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-22T07:18:38.190

项目仪表板顶部显示项目 ID 和项目编号。

```
Project ID: aaaa-bbb-000000 Project Number: 00000111112 
```

您必须使用数字项目编号作为 SENDER_ID。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-11T21:36:16.627

也许您需要更改 GOOGLE_PROJ_ID

**第一的**

[![在此处输入图像描述](../Images/30201d87df2d6bca25944c40f564dbcf.png)](https://i.stack.imgur.com/RdNaS.png)

**第二** [![在此处输入图像描述](../Images/0d5e91c79e343f8b13832a720782aaac.png)](https://i.stack.imgur.com/K3ilV.png)

**祝你好运！！**

# php - jQuery 自动完成输入框

> ID：15630332
> 
> 赞同：3
> 
> 时间：2013-03-26T05:59:22.593
> 
> 标签：php, jquery, json

所以我使用jQuery和PHP创建了一个自动完成框来从数据库中提取内容，它工作正常，除了当我在输入框中输入时它会拉回所有结果，而不是类似于我的结果米打字。

因此，如果您键入**Test**它会退回：

```
This
is
a
Test 
```

而不是显示

```
Test 
```

**这是我的 HTML**

```
<input type="text" id="group_name" name="group_name"> 
```

**这是我正在使用的 jQuery**

```
<script>
     $(document).ready(function() {
        $( "#group_name" ).autocomplete({
              source: "/wuzhapnn/php/data_stream/group_names",
              select: function(event, ui) { 
              $("#f").submit(); }
        });
    });
</script> 
```

**这是我的php页面**

```
if ($_GET['run'] == 'group_names') {
    // pulls live data from database
    $db = db_open();
    $query = "SELECT group_name FROM groups";
    $result = db_query($db, $query);
    if (db_num_rows($result) > 1) {
        $result = db_fetch_all($result);
        foreach ($result as $key=>$value) {
            $group_names_array[] .= $value['group_name'];
        }   
    } else {

    }

    echo json_encode(array_values(array_unique($group_names_array)));  
} 
```

*   **最近更新**

**新的 jQuery**

```
<script>
    var availableName;

    $.getJson('/wuzhapnn/php/data_stream',function(response){
        availableName = response;
    });

     $(document).ready(function() {
        $( "#group_name" ).autocomplete({
            source: availableName,
              select: function(event, ui) { 
              $("#f").submit(); }
        });
    });
</script> 
```

**新的 PHP 页面**

```
if ($_GET['run'] == 'group_names') {
    // pulls live data from database
    $db = db_open();
    $query = "SELECT group_name FROM groups WHERE group_name LIKE '%".$_GET['term']."%'";
    $result = db_query($db, $query);
    if (db_num_rows($result) > 1) {
        $result = db_fetch_all($result);
        foreach ($result as $key=>$value) {
            $group_names_array[] .= $value['group_name'];
        }   
    } else {

    }

    echo json_encode(array_values(array_unique($group_names_array)));  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:03:20.770

您需要添加`LIKE`子句。

```
"SELECT group_name FROM groups WHERE group_name LIKE '%".$_GET['term']."%'"; 
```

因为`"SELECT group_name FROM groups"`这将给出所有结果，`database`但您只需要那些与键入的单词匹配的结果，所以使用`LIKE MySQL`子句。

**其他人评论回复。**

如果您想在使用它之前创建 json 对象，您可以按如下方式进行，

```
var availableName;

$.getJson('/wuzhapnn/php/data_stream/group_names',function(response){
   availableName = response;
}); 
```

在此之后只需使用下面的代码进行自动完成。

```
$( "#group_name" ).autocomplete({
     source: availableName , 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:12:36.837

您的 PHP 代码段实际上并未使用自动完成插件发送的值。如果您使用的是 JQuery 的[插件](http://jqueryui.com/autocomplete/)，那么值 send 是一个名为*terms*的 GET 参数。

这需要包含在您的 PHP 中。

```
$term = $_GET['term']; 
```

然后，您需要在查询中包含如下内容，**但首先请先转义此值，然后再直接在 SQL 语句中使用它**。

```
SELECT group_name FROM groups WHERE group_name LIKE %<term>% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:48:52.917

让它工作正常

**新的 jQuery**

```
<script>
    $(function() {       
        $( "#group_name" ).autocomplete({
          source: "/wuzhapnn/php/data_stream",
          minLength: 2,
        });
      });
</script> 
```

**新 PHP**（感谢 Dipesh Parmar）

```
// pulls live data from database
$db = db_open();
$query = "SELECT group_name FROM groups WHERE group_name LIKE '%".$_GET['term']."%'";
$result = db_query($db, $query);

    $result = db_fetch_all($result);
    foreach ($result as $key=>$value) {
        $group_names_array[] .= $value['group_name'];
    }   

echo json_encode(array_values(array_unique($group_names_array))); 
```

# ios - 如何从 UITextView 或 UITextField 获取选定范围的文本

> ID：15630336
> 
> 赞同：13
> 
> 时间：2013-03-26T05:59:36.267
> 
> 标签：ios, uitextfield, uitextview, nsattributedstring, uitextrange

我正在尝试从 UITextView（和或 UITextField）中获取选定的文本范围，以便我可以编辑选定的文本或修改属性字符串。当我进行选择时，会触发下面的方法，但是方法中的代码返回 null 值。

```
- (void)textViewDidChangeSelection:(UITextView *)textView {

    UITextRange *selectedRange = [textField selectedTextRange];

    NSLog(@"Start: %@ <> End: %@", selectedRange.start, selectedRange.end);

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-12T07:14:14.490

你可以试试这个

```
- (void)textViewDidChangeSelection:(UITextView *)textView {

   UITextRange *selectedRange = [textView selectedTextRange];
   NSString *selectedText = [textView textInRange:selectedRange];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-08T02:37:31.663

**迅速**

首先获取选定的文本范围，然后使用该范围获取实际文本：

```
if let textRange = myTextView.selectedTextRange {

    let selectedText = myTextView.text(in: textRange)

    // ...
} 
```

**笔记：**

*   从 a 中选择文本`UITextField`以相同的方式完成。
*   范围是 a `UITextRange`，而不是`NSRange`。这允许正确选择诸如表情符号和扩展字素簇之类的东西。有关此问题的相关详细信息，请参阅[此答案](https://stackoverflow.com/a/35193481/3681880)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-19T08:23:32.947

**斯威夫特 5.0**

这是我从中选择文件名`Panda`的方法`Panda.txt`

```
func textFieldDidBeginEditing(_ textField: UITextField) {
    // if textField.text is `Panda.txt`, offset will be 3
    let offset = String(textField.text!.split(separator: ".").last!).length
    let from = textField.position(from: textField.beginningOfDocument, offset: 0)
    let to = textField.position(from: textField.beginningOfDocument,
                                offset:textField.text!.length - (offset+1) )
    //now `Panda` will be selected
    textField.selectedTextRange = textField.textRange(from: from!, to: to!)
    //note: unwrap with `!` is not recommended, text here is 100% not null,so it's safe
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-23T08:51:45.120

**斯威夫特 4.1**

在您的`UITextView`扩展中，将以下代码放入一个函数中，并在您的控制器中使用它：您可以在视图控制器的 SelectionDidChange 委托方法中使用您的 textView 实例调用此方法。最好用 condition 包装这个函数调用`textView.selectedRange.length > 0`，以获得一些文本......

```
 let begin = self.beginningOfDocument
  let start = self.position(from: begin, offset: selectedRange.location)
  let end = self.position(from: position(from: start!, offset: 0)!, offset: selectedRange.length)
  let txtRange = self.textRange(from: start!, to: end!)

  let txt = self.text(in: txtRange!)
  print("Sel Text is \(String(describing: txt))") 
```

我们不能使用可选绑定来存储选定的范围，而是可以为 nsrange 类型声明一个可选，然后使用 if-let ... 事物。

`TextInputComponent`具有获取选定文本范围的属性。

```
let range = textView.selectedRange 
```

然后您可以使用`range.location`, `range.length`values 来更改容器中文本的属性等...

# javascript - 如何创建 Twitter 小部件？

> ID：15630340
> 
> 赞同：0
> 
> 时间：2013-03-26T05:59:57.707
> 
> 标签：javascript, widget, twitter

我想为我的 Web 应用程序创建 Twitter 小部件。

我不想使用 Twitter 提供的小部件，因为如果有成千上万的用户，那么我必须为每个人创建一个单独的小部件，这是不可能的。

我想显示当前登录到我的 Web 应用程序的用户时间轴中的所有推文。

在访问时间线之前，我必须强制我的 Web 应用程序用户登录 Twitter。

怎么做？

有没有人有详细的想法？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:05:43.037

通过使用此代码，您可以添加自己的 twitter 小部件。您也可以自定义它。

```
 echo "<ul id='news'>";
  $twit_usr = 'username';//Please enter your twitter username
//$num_tweets = '60';
$reader = new XMLReader();
$reader->open( 'http://api.twitter.com/1/statuses/user_timeline/'.$twit_usr.'.xml/'                              );
while ( $reader->read() ) 
{
   if ( $reader->nodeType == XMLREADER::ELEMENT ) 
   {
      $name = $reader->name;
      if( $name == "status" )
      {
        while( $reader->read() )
        {
            if( $reader->nodeType == XMLREADER::ELEMENT )
            {
                $noName = $reader->name;
                if( $noName == "text" )
                {
                    $reader->read();
                    $checkUrl = $reader->value;
                    $text = preg_replace('/(?<!http:\/\/)(www.[-a-zA-Z0-9@:%_\+.~#?&\/=]+)/i', '<a href="http://\1">\1</a>', $text);
                    $pattern = "#(http:\/\/[^ ]+)#i";
                    $replacement = "<a href=\"$0\" target=\"_blank\">$0</a>";
                    $finalString = preg_replace( $pattern, $replacement, $checkUrl );
                    //$finalString = ereg_replace("[[:space:]]+[[:alpha:]]+://[^<>[:space:]]+[[:alnum:]/]+[[:alnum:]]+[[:space:]]", "<a href=\"\\0\">\\0</a>", $checkUrl);
                    $result .= '<li>'.$finalString . '</li>';
                    //break;
                }//close if noName match

            }//close if nodeType
        }//close while reader read inner
      }//close if name item  
   }//close if nodeType
}//close while reader-read outer
 print_r($result);
 echo '</ul>'; 
```

# iphone - 如何使用单个数组在 UITableView 部分表中获取显示数据

> ID：15630341
> 
> 赞同：0
> 
> 时间：2013-03-26T05:59:58.820
> 
> 标签：iphone, ipad, nsarray, uitableview

我在服务器上有要在 tableView 中显示的数据。

问题是我想显示基于类别的数据，所以我有数组类别，其中有类别，这些类别将是部分标题，其中有数据，所以为了在部分中显示数据，我必须声明 Array.

**例如**，如果有三个类别，那么我们必须创建三个数组来填充数据，但是如果有更多类别，因为类别是动态的并且来自服务器。

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return [categoryArray count] ;
    } 
```

以及如何设置节标题的标题，因为它是在类别数组中，所以如果它是在数组中一个接一个的节。

```
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
  {

    NSLog(@"Number of Sections");
    if(section == 0)
     return @"Sales";
    if(section == 1)
    return @"Soft Skills";
} 
```

如何在 tableView 单元格中显示数据 我可以为所有类别创建数组吗？

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

if (section==0)
{

    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];

    int count=[resultArray count];

    NSLog(@"resultArry Row Counts is %d",count);

    return [resultArray count];

}
else{
    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];

    int count=[resultArrayOne count];

    NSLog(@"resultArry Row Counts is %d",count);

    return [resultArrayOne count];
}
     }

       - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath     
    {

NSLog(@"Table Cell Data");

     static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

if (indexPath.section==0) {

    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];

    ObjectData *theCellData = [resultArray objectAtIndex:indexPath.row];
    NSString *cellValue =theCellData.sub_Category;
    cell.font=[UIFont fontWithName:@"Helvetical Bold" size:14];
    NSLog(@"Cell Values %@",cellValue);
    cell.textLabel.text = cellValue;

    return cell;
}

else {

    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];
    ObjectData *theCellData = [resultArrayOne objectAtIndex:indexPath.row];
    NSString *cellValue =theCellData.sub_Category;
    cell.font=[UIFont fontWithName:@"Helvetical Bold" size:14];

    NSLog(@"Cell Values %@",cellValue);
    cell.textLabel.text = cellValue;
    return cell;

   }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:55:26.620

由于从服务器获取类别似乎不是您的问题，因此我将我的答案基于预先填充的数组以获得更好的可视化。

```
NSMutableArray *categories = @[@"Cat1", @"Cat2"];

// creata a dictionary with all the array for the categorie rows
NSMutableDictionary *rowDict = @{@"Cat1":@[@"Cat1Row1",@"Cat1Row2",@"..."],
                     @"Cat2":@[@"Cat2Row1", @"Cat2Row2",@"..."] 
```

此解决方案的关键是您使用类别字符串作为字典的键。

您现在可以像这样访问标题

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
  return categories[section];
} 
```

并像这样访问您的行

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  // ...
  // create or deque a cell like you normally would do

  // now configure the cell
  cell.textLable.text = [rowDict[categories[indexPath.section]] objectAtIndex:indexPath.row] 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:04:51.243

试试下面的代码。它会解决你的问题：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
      return [categoryArray objectAtIndex:section];
} 
```

**编辑 ：**

1.  首先创建一个模型数据类来存储您的类别数据。
2.  使用这个模型类来感受你的`numberOfRowsInSection`委托`cellForRowAtIndexPath`功能。
3.  而不是为每个类别创建不同的数组。将此数组存储在一个模型类中。这将很容易处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:05:01.307

利用

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
  return [categoryArray objectAtindex:section];
} 
```

为章节标题。

同样，将每个类别的值存储在 nsmutable 数组 NSDictionary 中，并在 uitableviewcell 中显示每个类别的数据。

# php - PHP 将动态文件加载到字符串（CSS 文件生成）

> ID：15630343
> 
> 赞同：0
> 
> 时间：2013-03-26T06:00:08.337
> 
> 标签：php, css, string, load

`file_get_contents()`不是这样做的正确方法......

我想加载一个 PHP 脚本以便它运行，并将输出写入 CSS 文件。

这是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:21:26.433

使用[PHP 缓冲](http://php.net/manual/en/ref.outcontrol.php)

```
ob_start();
// Prepare and assign your code in $data variable
echo $data;
$content = ob_get_clean();
file_put_contents($file_path, $content); 
```

# performance - Erlang 真的很快吗，因为它会在后台产生许多内存副本？

> ID：15630345
> 
> 赞同：5
> 
> 时间：2013-03-26T06:00:11.410
> 
> 标签：performance, erlang

我是Erlang的新手，我理解该语言采用了actor模型的设计，并创造了轻量级进程的概念，这是高并发编程的关键。但是，它也采用了函数式编程范式，它强加了引用透明性。这意味着分配后不能更改变量。所以，我看到很多类似的功能，比如：

```
gb_trees:delete(Key, Tree1) -> Tree2 
```

当我们从树中删除一个键时，我们确实创建了一棵全新的树。这是否意味着，我们在后台克隆 Tree1 的所有剩余节点？

如果是这样，这种语言真的适合高性能服务器开发吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T07:36:11.717

在树的情况下，您只需要复制实际更改的节点。假设你有一棵树：

```
 A
      / \
     /   \
    B     C
         / \
        D   E 
```

如果`delete_tree`使用 B 作为参数调用方法，则需要复制的唯一节点是 A，因为子树 CDE 仍然与操作之前相同。

另外，如果在操作后不使用Tree1，只使用生成的树，编译器可以改变操作直接修改树，这样可能会更快。

这些操作不是很昂贵，而且对于大多数数据结构，冗余复制开销非常小。对于某些事情（即作为字节数组加载的大图像），您可能需要[创造性的解决方案](https://stackoverflow.com/questions/7071783/large-mutable-byte-array-in-erlang)。

Erlang 适用于服务器系统不是因为它的速度，而是因为它的可靠性。对于大型系统来说，再增加一打或一百台服务器并不是什么大问题，但如果你有 1 秒的停机时间来进行电话计费，那就是大问题了。在美国，这可能是数十万电话不计费——这显然比购买更多服务器的成本更高。

# dependency-injection - 温莎城堡 3.2 中缺少 PerWebRequest 生活方式

> ID：15630349
> 
> 赞同：1
> 
> 时间：2013-03-26T06:00:33.137
> 
> 标签：dependency-injection, castle-windsor, perwebrequest

我正在使用 Castle Windsor 的 PerWebRequest Lifestyle（版本 3.0.0.4001）。我想将它更新到最新版本（3.2）。在最新版本中，它说

```
does not contain a definition for 'PerWebRequest' and no extension method 'PerWebRequest' accepting a first argument of type 'Castle.MicroKernel.Registration.Lifestyle.LifestyleGroup<.... 
```

以下是我注册组件的方式，但使用最新版本会引发错误：

```
container.Register(Component.For<IUserRepository>().ImplementedBy<UserRepository>().LifeStyle.PerWebRequest); 
```

我需要添加任何参考吗？或者有人可以建议将哪一种 Castle Windsor Lifestyle 推荐用于 Web 应用程序（用户将其用于日常活动，例如（客户维护））

# mysql - 向表中插入新行而不更新旧行

> ID：15630350
> 
> 赞同：0
> 
> 时间：2013-03-26T06:00:37.023
> 
> 标签：mysql, sql, sql-update, insert-update

好吧，我已经修改了这个问题，以包括我到目前为止所拥有的以及我想要做的事情。就这样吧：

```
CREATE ORDER (
product_nat_id int(3) NOT NULL,
name VARCHAR(20),
PRIMARY KEY (product_nate_id)
)
INSERT INTO ORDER(product_nat_id, name) VALUES(1, 'Product 1');
INSERT INTO ORDER(product_nat_id, name) VALUES(2, 'Product 2');
INSERT INTO ORDER(product_nat_id, name) VALUES(3, 'Product 3');

CREATE TABLE INT_PRODUCT (
product_id INTEGER NOT NULL AUTO_INCREMENT,
product_nat_id INTEGER NOT NULL,
title TINYTEXT,
dateCreate TIMESTAMP CURRENT_TIMESTAMP,
CONSTRAINT INT_PRODUCT_PK PRIMARY KEY (product_id),
UNIQUE INT_PRODUCT_NK (product_nat_id)); 
```

但我想要的是，每当一条记录到达时带有更新的值但重复的键，我需要插入它（而不是更新），但要避免基于插入时间差异的重复约束。希望这现在有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T07:22:01.933

您的帖子的示例代码如下：

**插入查询语法如下所示：**

```
INSERT INTO table (primarykeycol,col1,col2) 
VALUES (1,2,3) ON DUPLICATE KEY UPDATE col1=0, col2=col2+1 
```

**如果已经有一行 primarykeycol 设置为 1，则此查询等于：**

```
UPDATE table SET col1=0, col2=col2+1 WHERE primarykeycol = 1 
```

**解释为：**

1.  通常要获得相同的结果，您必须发出 UPDATE 查询，然后检查是否存在受影响的行，如果没有则发出 INSERT 查询。

2.  这样，您可以一步完成所有操作——首先尝试插入，然后在插入失败时更新。

3.  这种语法非常适合的一种情况是当您使用每日计数器时。例如，您可能有一个包含 PostID、Date 和 Count 列的表。

4.  每天你都必须检查你是否已经为那一天创建了一个条目，如果是的话，增加计数列——这可以很容易地用一个 INSERT ... ON DUPLICATE KEY UPDATE 查询代替。

5.  不幸的是，有一些警告。一个是当您有多个唯一索引时，它的行为就像您在 UPDATE 查询的 WHERE 子句中有 OR 条件一样。

6.  这意味着应该更新多行，但 INSERT ... ON DUPLICATE KEY UPDATE 只会更新一行。

MySQL 手册：[**INSERT ON DUPLICATE KEY UPDATE 语法**](http://dev.mysql.com/doc/refman/4.1/en/insert-on-duplicate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:26:00.377

我建议如下：

1.  查找之前的记录。我想你应该知道那会是什么

    `SELECT Count(*) FROM dim WHERE recordId = '$recordid'`

2.  如果在步骤 1 中返回的记录大于 0，则使“上一个”记录无效：

    `UPDATE dim SET datevalid = '$datevalue' where recordId = '$recordid' and status = 2`

3.  继续第 1 步，其中检查中返回的记录大于 0，现在执行插入：

    `INSERT INTO dim (recordId,field1,field2,date,status) VALUES (1,'sad','123123','2013-03-26',1)`

4.  如果第 1 步是错误的，那么只需插入：

    `INSERT INTO dim (recordId,field1,field2,date,status) VALUES (1,'sad','123123','2013-03-26',1)`

当您需要查找记录并区分有效或无效时，我会添加一个`status`字段作为额外的措施，然后您不需要在日期之间进行过滤。然后，您可以使用该`status`字段。即使一组有效和无效记录的数据可能相同，每条记录也有一个唯一的自动增量键。`recordId`在这种情况下，唯一键将不一样。您分配`recordId`，系统将分配表上的唯一键。`status = 1`有效且`status = 2`无效。

希望这可以帮助！

# css - 减少 CSS 不透明度的孩子

> ID：15630354
> 
> 赞同：1
> 
> 时间：2013-03-26T06:00:47.567
> 
> 标签：css, html, less, opacity

所以我开始使用 LESS CSS。现在我有一个不透明度的父 div：0.8; 我希望孩子有混浊：1；

所以我创建了这个：

```
.offerte{
    font-family: BrushScriptRegular;
    font-size: 34px;
    background-color: black;
    opacity: 0.80;

    a:hover {
    border-bottom: @underlineBorder;
    opacity: 1;
    }
} 
```

我被告知这应该覆盖LESS中的父母不透明度。但这对我不起作用。LESS 的任何其他解决方案如何处理这个问题？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:11:56.360

他们对您的代码进行了一些重大更改，请看一下，

```
.offerte {
    font-family: BrushScriptRegular;
    font-size: 34px;
    background-color: black;
    opacity: 0.8;
    &:hover {
    border-bottom: @underlineBorder;
    opacity: 1;
    }
} 
```

我支持offerte是一个悬停的锚类，如果是，那么你应该做这些修改......谢谢......

# iphone - 在 iOS 应用程序中将用户输入的数字显示为上标

> ID：15630357
> 
> 赞同：2
> 
> 时间：2013-03-26T06:00:53.460
> 
> 标签：iphone, ios, objective-c

我正在创建一个 iOS 应用程序，我想在其中将用户键入的数字显示为上标，例如，如果用户按 4，则`e^4`必须在 textview 上显示。如果有人有建议，请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:05:44.037

```
@"\u2070 \u00B9 \u00B2 \u00B3 \u2074 \u2075 \u2076 \u2077 \u2078 \u2079" 
```

应该`0 - 9`分别（我测试过）除了 1 2 和 3 稍微大一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T12:51:16.477

这对我有用...

在开始时声明

```
static char * superscript[] = {"⁰", "¹", "²","³", "⁴", "⁵", "⁶","⁷", "⁸", "⁹"}; 
```

然后在访问它时

```
generate1=[NSString stringWithFormat:@"b%@ = a%@ ==> %.1f",[NSString stringWithUTF8String:subscript[degree_term]]; 
```

这里“degree_term”是你想要的上标......

# regex - 将单列转换为表格格式

> ID：15630361
> 
> 赞同：0
> 
> 时间：2013-03-26T06:01:08.773
> 
> 标签：regex, shell

我有一个文件，其中包含单个列中的所有条目，例如：

```
0
SYSCATSPACE
16384
13432
2948
1
1
TEMPSPACE1
1
1
applicable
1
2
USERSPACE1
4096
1888
2176
1 
```

但我想将其转换为表格形式`3*6`：

```
0 SYSCATSPACE 16384 13432 2948       1
1 TEMPSPACE1  1     1     applicable 1
2 USERSPACE1  4096  1888  2176       1 
```

谁能帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:04:05.353

使用 sed：

```
sed -n 'N;N;N;N;N;s/\n/ /gp' input 
```

它读取 6 行，用空格替换换行符并打印为单行。如果你想对齐列，你可以这样做`column`：

```
sed -n 'N;N;N;N;N;s/\n/ /gp' input | column -t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:18:09.980

重击方法：

```
while read a; do
    read b; read c; read d; read e; read f;
    echo "$a $b $c $d $e $f"
done 
```

注意：这不是优化的方法，而只是另一种可能的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:09:08.383

```
perl -lne '$a.="$_ ";if($.%6==0){push(@x,$a);$a=""}END{for(@x){print $_}}' your_file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T07:26:14.727

另一种方法，使用 xargs+printf

```
cat list.txt | xargs -n 6 printf "%10s%20s%10s%10s%10s%10s\n" 
```

或者，只是 printf

```
printf "%10s%20s%10s%10s%10s%10s\n" `cat list.txt` 
```

根据字段长度将值修改为`%10s`合适的数字。

或者只是 xargs+echo+column：

```
cat list.txt | xargs -n 6 echo | column -t 
```

# sms - 如何模拟 ESME 向移动客户端发送短信

> ID：15630363
> 
> 赞同：1
> 
> 时间：2013-03-26T06:01:12.790
> 
> 标签：sms, simulator, smpp

我想模拟 ESME 向人 B 发送 SMS 的过程。我该怎么做？我尝试使用 LogicaOpenSMPP。我可以从 ESME 向 SMSC 发送 SMS，但我不知道如何将该消息转发给另一个客户端。我该怎么做？还是有其他选择？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T02:04:56.247

我能够使用 Smscsim 实现我的目标。通过使用 SMSCSim，我们可以很容易地模拟 A 向 B 发送消息的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:54:45.447

如网站所述，LogicaOpenSMPP 没有任何转发功能

> 该应用程序表现为具有 SMPP 接口的真正 SMSC，您的应用程序可以绑定到它、发送消息、取消绑定等，但是由于所有响应仅由模拟器组成，因此不会在任何地方传递任何内容。

如果您确实需要这样做，请下载源代码并尝试注入您的转发功能。

# neo4j - 用于层次关系匹配的 Neo4j 密码查询

> ID：15630366
> 
> 赞同：1
> 
> 时间：2013-03-26T06:01:30.150
> 
> 标签：neo4j, cypher

我正在对一组节点进行建模，这些节点具有一些层次关系（作为父关系），但还有一些非层次关系。

为简单起见，假设这是一个与每个人的出生国关系的家谱

所以每个出生国家都是一个节点，每个人都是一个节点，我可以用密码创建关系：

```
start parent=node(123), child=node(456)
create parent-[:PARENT]->child; 
```

和

```
start person=node(123), country=node(789)
create person-[:BORN_IN]->country; 
```

我想做的是，例如，获取一个没有任何来自英​​国的祖先的人的名单，或者有一个来自日本的祖先的人的名单，等等。我觉得这应该是一个合理的查询，但我是密码新手，不知道如何构建它。

****更新**** 在对案例进行更广泛的测试后，我发现查询在某些情况下并不完全正确。给定一个孩子的父母来自英格兰而祖父母不是来自英格兰，查询没有任何来自英​​格兰的祖先的孩子会错误地返回父母来自英格兰的孩子。看起来就像我编写查询的方式一样，我得到了祖父母与英国有 NULL 关系的回报。我的查询如下：**

 **```
START n=node(*), ancestor=node(123)
MATCH n-[r:PARENT*]->o-[b?:BORN_IN]->ancestor
WHERE b IS NULL 
RETURN DISTINCT n; 
```

如果此人的所有祖先都出生在相关国家，则效果很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:21:43.257

您可以使用可变长度关系来包含所有子/祖先。我刚刚选择了“确实有日本祖先的人”：

```
START country=<lookup Japan>
match (child)-[:PARENT*0..5]->(parent)-[:BORN_IN]->(country)
return child 
```

注意：没有尝试过，但逻辑上应该这样做。我还选择了随机深度 5。

```
MATCH a-[:PARENT]->b-[:BORN_IN]->z 
```

如您的示例中所述，*应该*找到所有父母出生在 z 的人 (a)

如果您在 console.neo4j.org 上有一个方便的数据集，可以看看发生了什么。**

# c# - PerformanceProgressBar 失去了它的点

> ID：15630367
> 
> 赞同：2
> 
> 时间：2013-03-26T06:01:38.067
> 
> 标签：c#, windows-phone-7, progress-bar

我在我的一些页面上使用 WP 工具包中的 PerformanceProgressBar，奇怪的是，当我点击应用程序中的更多链接并浏览导航时，进度条中的点数不断减少（最少两个点）。这只发生在我的 HTC HD7 Windows Phone Mango 设备上，它在我的 Lumia 920 WP8 上运行良好

不确定这是否是实现的一部分并与性能有关，或者我做错了什么！

# node.js - 带有 Node.JS 和 node-usb 的 USB Light HID 控制 - 仅闪存？

> ID：15630369
> 
> 赞同：0
> 
> 时间：2013-03-26T06:01:50.257
> 
> 标签：node.js, usb, hid, light

我有一个 Delcom USB 灯 - 想想构建灯（[http://www.delcomproducts.com/products_USBLMP.asp](http://www.delcomproducts.com/products_USBLMP.asp)），我试图从 node.js 控制它（如果有什么不同，可以在 Ubuntu 上运行）

我正在使用 node-usb ( [https://github.com/schakko/node-usb](https://github.com/schakko/node-usb) )，我可以连接并认领该设备。我什至可以让它“闪烁”（就像你第一次插入它时一样），但我不能让它保持点亮状态，更不用说改变颜色了

```
var usb_driver = require("../usb.js"), 
    assert = require('assert');

// setup our vars
var lightVID = 0x0fc5
var lightPID = 0xb080

// Search for ledLight
var usb = usb_driver.create()

var theLight_devices = usb.find_by_vid_and_pid(lightVID, lightPID);
assert.ok((theLight_devices.length >= 1));
console.log("Total lights found: " + theLight_devices.length);  

// get the light
var theLight = theLight_devices[0];

var theLightInterfaces = theLight.getInterfaces();
assert.ok((theLightInterfaces.length >= 1));
console.log("The Light contains interfaces: " + theLightInterfaces.length);

var theLightInterface = theLightInterfaces[0];
console.log("Claiming the LIGHT interface for further actions")
theLightInterface.detachKernelDriver();
//theLightInterface.claim()

console.log(theLightInterface.claim());

// controlTransfer(mixed read|write, _bmRequestTyc8, _bRequest, _wValue, _wIndex, func, timeout);
theLight.controlTransfer(new Buffer(10), 0x88, 0xc8, 0x0635, 0x04, function() {     console.log("LED toggled") }, 0); 
```

当你运行它时，它告诉我有一个设备，它声称它，它甚至闪烁，但它不会一直亮着。

关于下一步该转向哪里的任何想法？

是否与关闭 Node.js 和“闪存”计算机再次控制 USB 端口有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:07:22.743

下面是一些更新的代码：

```
var theLightInterface = theLightInterfaces[0]
console.log("Claiming the LIGHT interface for further actions " + theLightInterface)

for(var inter in theLightInterface){
    console.log("Name: "+ inter)
    console.log("Value: "+ theLightInterface[inter])
}
console.log("Is Active: "+ theLightInterface.isKernelDriverActive() )
console.log("Release Kernel: "+ theLightInterface.detachKernelDriver() )
console.log("Claim Interface: "+ theLightInterface.claim() )

theLight.controlTransfer(new Buffer(0), 0x12, 0xc8, 0x04, 101, function() { console.log("LED toggled") }, 1000) 
```

结果是：

```
Is Active: 1
Release Kernel: undefined
Claim Interface: undefined 
```

设置 0x12 和 0xc8 后，它确实使灯闪烁/闪烁 - 但我认为我无法控制 USB 驱动程序

# jsf - primefaces重新加载画廊

> ID：15630378
> 
> 赞同：0
> 
> 时间：2013-03-26T06:02:36.063
> 
> 标签：jsf, primefaces

参考： http: [//www.primefaces.org/showcase/ui/galleria.jsf](http://www.primefaces.org/showcase/ui/galleria.jsf)

我的页面：

```
<p:galleria id="merchant-gallery" value="#{testController.imageIds}" var="item" autoPlay="false" >  
    <p:graphicImage width="300" value="#{imageStreamer.image}" >
        <f:param name="id" value="#{item}" />
    </p:graphicImage>
</p:galleria> 
```

我尝试将其包含`<p:galleria>`在一个表格中并添加了一个`<p:remoteCommand name="updateme" update="@form"/>`，但在调用 updateme 之后，它只是让 Galleria 空白。

*更新

测试控制器 bean：

```
public List<Integer> getImageIds() {
    int aId = (Integer) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("user_id");
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("TEST2PU");
    EntityManager em = emf.createEntityManager();
    TypedQuery<Merchant> tp = em.createQuery("SELECT a FROM Account a WHERE a.id = :id", Account.class);
    tp.setParameter("id", aId);
    current = tp.getSingleResult();

    Collection rawPhotoCollection = current.getPhotoCollection();

    imageIds = new ArrayList<Integer>(rawPhotoCollection);
    List<Photo> photoList = new ArrayList<Photo>(rawPhotoCollection);

    for (int i = 0; i < photoList.size(); i++) {
        int imageId = photoList.get(i).getId();
        imageIds.set(i, imageId);
    }

    return imageIds;
} 
```

imageStreamer 豆：

```
@EJB
private test.controller.photo.PhotoFacade ejbFacade;

public StreamedContent getImage() throws IOException {
    FacesContext context = FacesContext.getCurrentInstance();

    if (context.getCurrentPhaseId() == PhaseId.RENDER_RESPONSE) {
        return new DefaultStreamedContent();
    } else {
        Map<String, String> param = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
        String id = param.get("id");

        Photo image = ejbFacade.find(Integer.valueOf(id));
        return new DefaultStreamedContent(new ByteArrayInputStream(image.getImage()));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:06:25.727

我修改了您的示例并遇到了同样的问题。它与您的上传或远程命令无关。我认为这是primefaces中的一个错误。有关类似问题，请参阅[http://code.google.com/p/primefaces/issues/detail?id=4840](http://code.google.com/p/primefaces/issues/detail?id=4840)。当我执行命令时

```
PrimeFaces.cw('Galleria','widget_companydetail_merchant-gallery',{id:'companydetail:merchant-gallery',transitionInterval:0,panelWidth:640,panelHeight:480,custom:false},'galleria'); 
```

在萤火虫控制台中，画廊重新出现。因此，当更改远程命令并将 javascript 添加到 oncomplete 时，它​​可以工作。

```
<p:remoteCommand name="updateme" update="@form" oncomplete="PrimeFaces.cw('Galleria','widget_companydetail_merchant-gallery',{id:'companydetail:merchant-gallery',transitionInterval:0,panelWidth:640,panelHeight:480,custom:false},'galleria');"/> 
```

# python - 如何在 Django 中为具有 ListField 变量的方法编写 unittest？

> ID：15630385
> 
> 赞同：1
> 
> 时间：2013-03-26T06:03:11.660
> 
> 标签：python, django, unit-testing, testing

我以前从未写过单元测试。我正在尝试为此类编写单元测试：

```
class User(models.Model):
    facebook_id = models.CharField(max_length=200)
    friends = ListField()
    status = models.CharField(max_length=200)
    status_time = models.DateTimeField('date published')

    @staticmethod
    def login(cls, userid, facebook_friends):
        myuser = None
        try:
            myuser = User.objects.get(facebook_id=userid)
        except User.DoesNotExist:
            myuser = User()
            myuser.status_time = datetime.datetime.now() - datetime.timedelta(minutes=16)
            myuser.facebook_id = userid
            myuser.save()

        # user exists
        myuser.friends = facebook_friends
        myuser.save()
        return {"data":myuser.get_friend_statuses()} 
```

但我不确定如何为 facebook_friend 编写单元测试，因为它在 List Field 类中：

```
class ListField(models.TextField):
    __metaclass__ = models.SubfieldBase
    description = "Stores a python list"

    def __init__(self, *args, **kwargs):
        super(ListField, self).__init__(*args, **kwargs)

    def to_python(self, value):
        if not value:
            value = []
        if isinstance(value, list):
            return value
        return ast.literal_eval(value)

    def get_prep_value(self, value):
        if value is None:
            return value
        return unicode(value)

    def value_to_string(self, obj):
        value = self._get_val_from_obj(obj)
        return self.get_db_prep_value(value) 
```

我试过这样的东西，但它不工作，我不知道如何写它：

```
 class ListField(models.TextField):
     def test_wrong_username(self):
         user = User.login(self, 'username1', ['one', 'two', 'three'])
         errcode = User.login(self, 'username2', ['one', 'two', 'three'])
         self.assertEqual(errcode, user) 
```

谁能帮我/告诉我如何为此编写单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:46:23.667

我将假设`facebook_friends`您实际上想要测试登录方法，而不是测试。我假设这是因为这是您的示例测试代码告诉我的。

好的，所以您希望从登录方法中获得的行为是

如果具有给定用户 ID 的用户存在，则从数据库中检索该用户。我们传递给函数的 facebook_friends 被保存到 Friends 属性中，我们返回一个包含好友状态的字典。

如果用户不存在，我们创建它，设置几个属性，保存它，然后按照与上面相同的代码路径进行其余部分。所以，我对用户的单元测试存在登录方法的代码路径可能看起来像这样

```
import unittest
from mock import patch

class UserLoginTest(unittest.TestCase):

    @patch('model.User.get_friend_statuses')
    def test_login_when_user_exists(self, mock_get_friend_statuses):
         # objects.create creates and saves a db entry in one step
         User.objects.create(facebook_id='an_id')

         return_value = User.login('an_id', ['some', 'list', 'items'])

         user = User.objects.get(facebook_id='an_id')
         self.assertEqual(user.friends, ['some', 'list', 'items'])
         self.assertEqual(
             return_value,
             {'data' mock_get_friend_statuses.return_value}
         )
         self.assertIsNone(user.status_time) 
```

# android - HTML 页面应该修复所有的 android 设备

> ID：15630386
> 
> 赞同：0
> 
> 时间：2013-03-26T06:03:16.320
> 
> 标签：android, android-layout, webview, android-webview

我已尝试使用以下代码根据设备屏幕尺寸来适应网页。

```
 WebView mWebView=(WebView)findViewById(R.id.webView1);
    mWebView.loadUrl("file:///android_asset/test/index.html");
    mWebView.setInitialScale(1);
    mWebView.getSettings().setLoadWithOverviewMode(false);
    mWebView.getSettings().setUseWideViewPort(true);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    mWebView.setScrollbarFadingEnabled(false); 
```

在这个 Zoomcontrols 工作正常。但是网页不固定到设备屏幕大小。
谁能给我建议...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:03:16.663

尝试将以下元标记添加到您的 HTML 文件中

```
<meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" /> 
```

# php - 使用新 API 获取 Twitter 数据

> ID：15630390
> 
> 赞同：1
> 
> 时间：2013-03-26T06:03:26.257
> 
> 标签：php, json, twitter

由于 twitter 最近更新了它的 API，我怎样才能得到一个人**的关注者数量**？

我可以使用以下方法使用旧 API 获取此类数据，但如果我理解正确，它将随时停止工作。

```
http://api.twitter.com/1/statuses/user_timeline.json?screen_name=twitter 
```

如何使用他们的新 API 获得相同的数据？我检查了他们的文档，但无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:17:02.613

直接从新[文档](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)来看，最大的区别似乎是使用`1.1`而不是`1`

您仍然使用 JSON 检索数据 -

`https://api.twitter.com/1.1/statuses/user_timeline.json`

文档说要求是：

`Always specify either an user_id or screen_name when requesting a user timeline.`

并且返回的对象包含一个“用户”对象，其中包含`followers_count`键：值对。

```
{
    {
        ......
        user: {
            .....
            "followers_count" : int
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:19:58.750

是的，这令人困惑。我最近为一个客户做了这个，我花了一段时间才弄清楚。

阅读：[https ://dev.twitter.com/docs/auth/application-only-auth](https://dev.twitter.com/docs/auth/application-only-auth)

要遵守 v1.1 并获取您想要的数据，您需要通过您的 twitter 帐户创建一个 twitter 应用程序。该应用程序将为您提供几个访问密钥。您将使用这些访问密钥来获取访问令牌，您可以使用它来获取您的公共数据。

这是我使用的实现：[https ://gist.github.com/luk3thomas/5243493](https://gist.github.com/luk3thomas/5243493)

# c# - XAML - 查找单击了哪个按钮的方法

> ID：15630394
> 
> 赞同：0
> 
> 时间：2013-03-26T06:03:37.210
> 
> 标签：c#, xaml, button, dynamic

我正在开发 Windows 应用商店应用程序。

我正在从文件后面的 C# 代码动态加载 XAML 代码。所以，我无法向按钮添加点击事件。

有没有办法在没有点击事件的情况下知道使用按钮名称点击了哪个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:13:18.410

您如何动态加载 XAML 代码？您可以动态加载 XAML，定位所有按钮实例，并为“Tapped”事件添加事件侦听器。

```
var grid = Xaml.LoadXaml("<Grid><Button x:Name='BLAH' /><Button x:Name='BLAH2'></Grid");
foreach(var button in VisualHelper.FindVIsualCHildren<Button>(grid))
  button.Tapped += delegate(object sender, TappedEventArgs a) 
  { 
        var btn = sender as BUtton; 
   } 
```

你可以从这个工具包中找到有用的东西：[http ://winrtxamltoolkit.codeplex.com/](http://winrtxamltoolkit.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:12:41.800

您应该研究用于 WPF 开发的[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)和[命令模式。](http://en.wikipedia.org/wiki/Command_pattern)click 事件处理程序是过时的 Windows 窗体编程。在 WPF 中，命令模式由[ICommand](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)接口表示。每个按钮都有一个 Command 属性，您可以在其中绑定一个命令对象。

# android - 微调器值基于父微调器值更改而更改

> ID：15630396
> 
> 赞同：1
> 
> 时间：2013-03-26T06:03:39.547
> 
> 标签：android

大家好，我有三个微调器。我想根据第一个微调器值更改第二个微调器值，并根据第二个微调器值更改第三个微调器值，所有值都是从数据库中获取和显示的。我正在使用 ArrayAdapter。我正在搜索最后两周。但我没有得到解决方案，请帮助我，我的时间不多了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:13:21.367

你只需要像这样设置适配器：

```
package com.example.mapsdemo;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class MainActivity extends Activity {

    private Spinner spin1;
    private Spinner spin2;

    ArrayList<String> a = new ArrayList<String>();
    ArrayList<String> b = new ArrayList<String>();
    ArrayList<String> c = new ArrayList<String>();

    // private ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        spin1 = (Spinner) findViewById(R.id.spinner1);
        spin2 = (Spinner) findViewById(R.id.spinner2);

        fillarray();

        spin1.setAdapter(new ArrayAdapter<String>(MainActivity.this,
                android.R.layout.simple_dropdown_item_1line, a));
        /*
         * spin2.setAdapter(new ArrayAdapter<String>(MainActivity.this,
         * android.R.layout.simple_dropdown_item_1line, b));
         */

        spin1.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int pos,
                    long arg3) {
                // TODO Auto-generated method stub
                if (pos == 0) {
                    spin2.setAdapter(new ArrayAdapter<String>(
                            MainActivity.this,
                            android.R.layout.simple_dropdown_item_1line, b));
                } else {
                    spin2.setAdapter(new ArrayAdapter<String>(
                            MainActivity.this,
                            android.R.layout.simple_dropdown_item_1line, c));
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
    }

    private void fillarray() {
        // TODO Auto-generated method stub
        a.clear();
        a.add("a");
        a.add("b");
        a.add("c");
        a.add("d");
        a.add("e");

        b.clear();
        b.add("1");
        b.add("2");
        b.add("3");
        b.add("4");

        c.clear();
        c.add("Android");
        c.add("ios");
    }

} 
```

您的布局文件，如：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="40dp" />

    <Spinner
        android:id="@+id/spinner2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/spinner1"
        android:layout_marginTop="80dp" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T06:29:42.173

可能这会有所帮助，

```
ArrayAdapter<String> secondspinnerAdapter;
ArrayAdapter<String> firstspinnerAdapter = new ArrayAdapter<String>(
                MainActivity.this, android.R.layout.simple_spinner_item,
                firstspinnervalue);
        first_spinner.setAdapter(firstspinnerAdapter);
        firstspinnerAdapter 
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

firstspinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub

                    // get data from database add to arraylist

                      secondspinnerAdapter = new
                      ArrayAdapter<String>( mainActivity.this,
                      android.R.layout.simple_spinner_item,   arraylistvalue);
                      second_spinner.setAdapter(secondspinnerAdapter);
                      second_spinner.setSelection(arg2, false);
                      secondspinnerAdapter.setDropDownViewResource
                      (android.R.layout.simple_spinner_dropdown_item);

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

选择第一个微调器项目，然后从数据库中获取数据并填充 arraylist 并设置 secondspinner。

以同样的方式跟随选择的第二个微调器项目。

# sql - PowerShell 和 SQL

> ID：15630399
> 
> 赞同：0
> 
> 时间：2013-03-26T06:04:01.137
> 
> 标签：sql, powershell

我正在使用 powershell 和 SQL 使用查询从服务器中提取驱动器信息

我正在写以下查询

```
set @sql = 'C:\WINDOWS\SysWOW64\WindowsPowerShell\v1.0\powershell.exe -c "Get-WmiObject -Class Win32_Volume -Filter ''DriveType = 3'' | select name,label,capacity,freespace | foreach{$_.name+''!''+$_.label+''|''+$_.capacity/1048576+''%''+$_.freespace/1048576+''*''}"'   

xp_cmdshell @SQL 
```

我得到以下输出

输出

```
*******************************************************************************************
C:\!RISCDCC36N03C$|139980.3984375%35242.921875*
D:\!RISCDCC36N03D$|139977.99609375%34774.08984375*
G:\!RISCDCSQL552G|92151.9375%46329.1875*
M:\!|0%0*
M:\RISCDCSQL557BMP\!RISCDCSQL557BMP|81911.9375%31869.3125*
M:\RISCDCSQL557DMP\!RISCDCSQL557DMP|40954.9375%37753.5*
M:\RISCDCSQL557CMP\!RISCDCSQL557CMP|20475.9375%7643.375*
T:\!RISCDCSQL563T$|81911.9375%15462*
R:\!RISCDCSQL561R$|35836.9375%19392.0625*
P:\RISCDCSQL560BMP\!RISCDCSQL560BMP|225278.9375%15844.625*
P:\!RISCDCSQL560P$|245759.9375%13014.75*
P:\RISCDCSQL560CMP\!RISCDCSQL560CMP|122876.9375%29950.9375*
P:\RISCDCSQL560AMP\!RISCDCSQL560AMP|102398.9375%100423.25*
L:\!RISCDCSQL556L$|20479.9375%5072.1875*
I:\!RISCDCSQL553I$|512003.9375%81162.5*
I:\RISCDCSQL553MP1\!RISCDCSQL553MP1|307200.9375%137322.9375*
X:\RISCDCSQL567CMP\!RISCDCSQL567CMP|97288.9375%45540.125*
X:\!|0%0*
X:\RISCDCSQL567AMP\!RISCDCSQL567AMP|35841.9375%28526.125*
U:\!RISCDCSQL564U$|66552.9375%7892*
NULL

************************************************************************** 
```

我不明白为什么对于 M 驱动器和 X 驱动器它给出 0%0。我正在使用这些信息来计算空间的进一步增长。在计算它时，我将其除以零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:53:00.980

（文档[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394515%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394515%28v=vs.85%29.aspx)）

看起来驱动器 M 和 X 每个都有一个完整的卷/分区（没有可用空间）。

使用额外的过滤子句从输出中删除它们 -
`-Filter ''DriveType = 3 and freespace>0''`

这对我有用，在 Powershell 提示符下......

```
PS C:\Windows\System32> Get-WmiObject -Class Win32_Volume -Filter 'DriveType = 3
and freespace>0' | select name,label,capacity,freespace 
```

# mysql - 如何在不传递参数的情况下调用存储过程？

> ID：15630406
> 
> 赞同：2
> 
> 时间：2013-03-26T06:04:39.363
> 
> 标签：mysql, stored-procedures

我在 mysql 中创建了一个 SP，我将在其中传递一个 IN 参数“val”。在过程的主体部分中，我使用 if else 条件与 select 语句在查询的 where 条件中具有“val”。在其中一个选择查询中，我不想使用“val”。那么如何为不使用'val'参数的条件调用程序。在此先感谢，克里希纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:12:51.550

将空值传入您的存储过程，让您的存储过程检测空值并采取相应的行为。

使用 null 调用存储过程：

```
call my_proc(null); 
```

然后在 proc 内部，如果参数为 null，则如下所示“忽略”参数：

```
select ...
from ...
where ...
and (val is null or some_column = val) 
```

# c++ - 在 C++ 中进行铸造没有按预期工作

> ID：15630414
> 
> 赞同：2
> 
> 时间：2013-03-26T06:05:21.843
> 
> 标签：c++, casting

这个小程序是用来计算2位数字的第一位和第二位的。但是，当我尝试在数字 99 上使用它时，它会打印 9 和 8，但其他 2 位数字似乎也可以正常工作。这可能是微不足道的，但我在编程方面相对较新。

```
#include <iostream>

using namespace std;

void test(int num) {

    float numValue = (num*1.0) / 10;
    cout << numValue << endl;
          // prints 9.9

    int firstDigit = num / 10;
    cout << firstDigit << endl;
         // prints 9

    int secondDigit = (numValue - firstDigit) * 10;
    cout << secondDigit << endl;
         // prints 8, supposed to be (9.9 - 9) * 10

}

int main()
{
    test(99);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:11:14.763

发生这种情况是因为`(numValue - firstDigit)`不完全是 0.9，而是`0.89999...`因为浮点数通常不准确。所以当你乘以`0.8999...`10 时，你得到的结果是`8.999...`然而，然后你把它放入一个`int`变量中，所以它被修剪并变成了 8。

不过，您的确切任务并不需要浮点运算，使用整数就足够了。

# ios - iAds 说它被掩盖了

> ID：15630419
> 
> 赞同：0
> 
> 时间：2013-03-26T06:05:45.580
> 
> 标签：ios, xamarin.ios

在输出窗口中，当我在当前视图上调出一个菜单（子视图）时，但没有覆盖 iAd...

但是，它仍然在输出中发出消息。

更糟糕的是，如果我触摸广告，它不会激活它。我很确定这不仅会导致我的应用程序被拒绝，而且还会导致广告为零……

我以这种方式弹出了几种不同的视图，其中一个似乎没有问题……但是，我还没有弄清楚它们之间的任何区别……

-燧石

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:29:03.247

原来我有一些旧代码为该视图创建了一个控制器（现在是一个子视图），并且它似乎与一个视图混淆了，该视图具有一个从它注册的控制器注册到另一个控制器的子视图……不能说是我糊涂了！-燧石

# c# - 为什么在c#中不支持“公共”或“私有”或“受保护”继承

> ID：15630420
> 
> 赞同：-4
> 
> 时间：2013-03-26T06:05:48.377
> 
> 标签：c#, c++

我知道在 c++ 中，继承是“公共”或“私有”或“受保护”，这意味着如果我将 A 类公开继承到 B 类，如下所示

```
 class A
{
    public int pub1;
    private int prvt1;
    protected int proc1;
}

class B : public A
{

    //public int pub1;//This variable is because of inheritacne and is internal.
    //public int proc1;//This variable is because of inheritacne and is internal.
    public int pub2;
    private int prvt2;
    protected int pro2;
} 
```

即A类的两个变量（pub1，proc1）被继承但访问说明符是公共的。但在C#中如下

```
 class A
{
    public int pub1;
    private int prvt1;
    protected int proc1;
}

class B : A
{

    //public int pub1; //This variable is because of inheritacne and is internal.
    //protected int proc1;//This variable is because of inheritacne and is internal.
    public int pub2;
    private int prvt2;
    protected int pro2;
} 
```

即 A 类的两个变量 (pub1, proc1) 被继承，但访问说明符与 A 类中的相同。

为什么在.NET 框架中给出这种实现。这有什么优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:21:18.070

这个答案仅与 C# 有关。

在 C# 中，只有一个“级别”的继承，那就是一种“公共”继承。您的班级`A`可以有五种不同的可访问性的成员，即：

```
class A
{
    public int pub1;
    private int prvt1;    // "private" keyword can be left out
    protected int proc1;
    internal int intnl1;
    protected internal int protintnl1;
} 
```

当一个`public`or`protected`成员被继承时，它在派生类中仍然具有完全相同的可访问性。当一个`private`成员被继承时，它不能从派生类访问，所以在某种意义上它是超级私有的。同样，当一个成员被*另一个程序集中*`internal`的类型继承时，内部成员对派生类变得不可见。

 *因此，当一个`protected internal`成员由*另一个程序集中*的类派生时，它就变成了有效`protected`的。当成员被覆盖时，可以看到这一点。考虑这个例子：

```
public class Ax
{
    protected internal virtual void Method()
    {
    }
} 
```

然后在另一个程序集中：

```
// Bx is in another assembly than Ax
class Bx : Ax
{
    protected override void Method()
    {
    }
} 
```

请注意，`Method`已有效地变为`protected`新程序集内部。

在 a`struct`中，不允许声明新`protected`（或`protected internal`）成员，因为在 C# 中结构是密封的，因此引入`protected`成员是没有意义的。（有一种`protected`方法，`MemberwiseClone()`结构从它们的基类继承。）

同样，一个`static`类不能声明新的`protected`（或`protected internal`）成员。一个`sealed`类可能继承许多`protected`成员，`override`其中一些成员，但它会发出编译器警告，要求`protected`在类中引入新成员`sealed`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:20:33.367

也许这是一条评论，但它太大而无法放入评论区。

我拿走了你的课程定义并尝试了这个 -

```
class A
{
    public:
    int pub1;
    private:
    int prvt1;
    protected:
    int proc1;
};

class B : public A
{

    //public int pub1;//This variable is because of inheritacne and is internal.
    //public int proc1;//This variable is because of inheritacne and is internal.
    public:
    int pub2;
    private:
    int prvt2;
    protected:
    int pro2;
};

int main()
{
    B* b = new B();
    b->pub2 = 1;
    b->proc1 = 2;
} 
```

编译器冲我咆哮——

```
prog.cpp: In function ‘int main()’:
prog.cpp:8:9: error: ‘int A::proc1’ is protected
prog.cpp:29:8: error: within this context 
```

我猜 C++ 不会将受保护的成员转换为公共的。还是我从问题中遗漏了什么？*

# c# - 如何在使用 syntaxHighlighter 时将画笔（java、sql、c）导出到 pdf 文件

> ID：15630426
> 
> 赞同：1
> 
> 时间：2013-03-26T06:06:07.887
> 
> 标签：c#, asp.net, css, syntaxhighlighter

我想将 html 数据导出到 pdf 文件。我还需要将一些导出`java code`到 pdf 文件，并且应该使用 syntaxhighlighter 类显示 java 代码，但事实并非如此。

例如

```
this text is to be export to pdf

Public Static Void Main()
{
   Console.Writeline("hello");
} 
```

我正在使用这行代码。

```
 HtmlPipelineContext htmlContext = new HtmlPipelineContext(null);
        htmlContext.SetTagFactory(iTextSharp.tool.xml.html.Tags.GetHtmlTagProcessorFactory());
        ICSSResolver cssResolver = XMLWorkerHelper.GetInstance().GetDefaultCssResolver(true);
        cssResolver.AddCssFile(Server.MapPath("~/App_Themes/codeviewer/styles/shCore.css"), true);
        cssResolver.AddCssFile(Server.MapPath("~/App_Themes/codeviewer/styles/shThemeDefault.css"), true);

        IPipeline pipeline = new CssResolverPipeline(cssResolver, new HtmlPipeline(htmlContext, new PdfWriterPipeline(document, pdfWriter)));
        XMLWorker worker = new XMLWorker(pipeline, true);
        XMLParser Parser = new XMLParser(true, worker);
        Parser.Parse(reader); 
```

但是 css 类并未应用于`java code`从某些 js 文件加载的类。请帮忙。提前致谢。

# command-line - 如何使用 WIX 创建以被动模式运行的 MSI？

> ID：15630428
> 
> 赞同：1
> 
> 时间：2013-03-26T06:06:37.987
> 
> 标签：command-line, wix, windows-installer, mode, silent

如何使用可以在被动模式下运行的 WIX 创建 MSI？如果我双击 msi，它应该以被动模式启动。这应该等同于使用`/passive`或`/qb!-`命令行选项运行 MSI 包。这是从另一个应用程序启动 MSI 安装所必需的。

有没有办法将命令行选项嵌入到 MSI 包中？

请发表有帮助的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:56:14.493

只是不要使用 UIRef 来包含任何 UI：如果 .msi 包中没有对话框，MSI 将使用基本 UI（相当于 /qb-）运行它。

# iphone - 如何获得旋转 UIView 的正确框架（包括正确的位置）

> ID：15630429
> 
> 赞同：0
> 
> 时间：2013-03-26T06:06:41.383
> 
> 标签：iphone, ios, cocoa-touch, uiview

我有一个应用程序，其中有一个用户可以用手指旋转和平移的矩形。我只是想知道这个旋转视图的框架是什么，这样我就可以知道它是否与另一个矩形相交`UIView`（不能使用框架属性，因为当 UIView 被转换时它会失效）。实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:10:40.847

每个`UIView`都有一个`frame`CGRect 类型的属性。

您可以使用`view.frame`.

应用变换后，您可以使用视图上的 bounds 和 center 属性来获取方向。这可能需要一些计算，但我希望你能轻松完成。

请参阅[此问题](https://stackoverflow.com/questions/5361369/ios-programming-frame-bounds-and-center)的答案中的[此图像](http://littlehales.files.wordpress.com/2012/03/coords.jpg)。

# unix - 关于 UNIX Internals 架构设计实践方面的书籍

> ID：15630434
> 
> 赞同：2
> 
> 时间：2013-03-26T06:07:40.527
> 
> 标签：unix

最近我开始了操作系统课程……现在正在浏览它的内容我可以了解架构设计如何在现实生活中的操作系统中工作的实际方面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:33:11.970

Tanenbaum 的书非常好：在[http://www.minix3.org/documentation/index.html](http://www.minix3.org/documentation/index.html)中描述了有关 MINIX 源代码的大量详细信息。然而，这并不是最好的：源代码描述相当混乱。

关于 Unix 历史版本的经典著作是：[http ://en.wikipedia.org/wiki/Lions%27_Commentary_on_UNIX_6th_Edition,_with_Source_Code](http://en.wikipedia.org/wiki/Lions%27_Commentary_on_UNIX_6th_Edition,_with_Source_Code)

# java - 使用 wsdl4j 解析 wsdl 以列出操作、输入/输出参数时出现 nullpointerexception

> ID：15630435
> 
> 赞同：3
> 
> 时间：2013-03-26T06:07:42.243
> 
> 标签：java, wsdl, nullpointerexception, wsdl4j

该代码适用于仅具有单个操作的 wsdl，但对于具有多个操作标签的 wsdl，它会给出空指针异常。

```
 Exception in thread "main" java.lang.NullPointerException
at project.Project.listInputs(Project.java:78)
at project.Project.main(Project.java:198) 
```

编码：

```
package project;

 import java.io.FileInputStream;
 import java.io.FileNotFoundException;
 import java.io.IOException;
 import java.util.ArrayList;
 import java.util.Arrays;
 import java.util.HashSet;
 import javax.xml.parsers.DocumentBuilderFactory;
 import javax.xml.parsers.ParserConfigurationException;
 import org.w3c.dom.Document;
 import org.w3c.dom.NodeList;
 import org.xml.sax.SAXException;

 /**
 *
 * @author karthikbv
 */
 public class Project {

     /**
     * @param args the command line arguments
     */
     public String[] listOperations(String filename) throws FileNotFoundException, SAXException,IOException, ParserConfigurationException 
     {
        Document d = (Document) DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new FileInputStream(filename));
        NodeList elements = d.getElementsByTagName("wsdl:operation");
        ArrayList<String> operations = new ArrayList<>();
        for (int i = 0; i < elements.getLength(); i++) {
            operations.add(elements.item(i).getAttributes().getNamedItem("name").getNodeValue());
        }
        return operations.toArray(new String[operations.size()]);
     }
     public String[] listOperationsUnique(String filename) throws   FileNotFoundException,SAXException, IOException, ParserConfigurationException 
     {
        String[] nonUnique = listOperations(filename);
        HashSet<String> unique = new HashSet<>(Arrays.asList(nonUnique));
        return unique.toArray(new String[unique.size()]);
     }
     public String[] listInputs(String filename) throws FileNotFoundException, SAXException,IOException, ParserConfigurationException, NullPointerException 
     {
        Document d1 = (Document) DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new FileInputStream(filename));
        NodeList elements1 = d1.getElementsByTagName("wsdl:input");
        NodeList elements ;
        NodeList ele = d1.getElementsByTagName("wsdl:message");        
        //ArrayList<String> tinput = new ArrayList<>();       
        ArrayList<String> tput = new ArrayList<>();
        ArrayList<String> input = new ArrayList<>();
        for(int k=0; k < elements1.getLength(); k++)
        {
            if(elements1.item(k).getAttributes().getNamedItem("message") != null)
            {
                input.add(elements1.item(k).getAttributes().getNamedItem("message").getNodeValue());
            }
        }
        String[] s,s1,s2;
        s1 = input.toArray(new String[input.size()]);
        s= this.listMessages(filename);
        for(int i=0;i<s1.length;i++)
        {
            for(int j=0;j<s.length;j++)
            {
                if((s1[i].substring(4)).equals(s[j]))
                {
                  for (int k = 0; k < ele.getLength(); k++) 
                  {
                    if(ele.item(k).getAttributes().getNamedItem("name").getNodeValue().equals(s[j]))
                    {
                        elements = ele.item(k).getChildNodes();
                        for(int l=0; l < elements.getLength(); l++)
                        {
                            if(elements.item(l).getAttributes() != null)
                            {
                                tput.add(elements.item(l).getAttributes().getNamedItem("type").getNodeValue());
                            }
                        }            
                    }
                  }   
                }
            }
        }
        s2 = tput.toArray(new String[tput.size()]);
        return s2;
        //return input.toArray(new String[input.size()]);
     }

     public String[] listMessages(String filename) throws FileNotFoundException, SAXException,IOException, ParserConfigurationException 
     {
        Document d = (Document) DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new FileInputStream(filename));
        NodeList elements = d.getElementsByTagName("wsdl:message");
        ArrayList<String> messages = new ArrayList<>();
        for (int i = 0; i < elements.getLength(); i++) 
        {
            if(elements.item(i).getAttributes().getNamedItem("name") != null)
            {
                messages.add(elements.item(i).getAttributes().getNamedItem("name").getNodeValue());
            }
        }
        return messages.toArray(new String[messages.size()]);
     }
     public String[] listMinputs(String filename) throws FileNotFoundException, SAXException,IOException, ParserConfigurationException, NullPointerException 
     {
        Document d1 = (Document) DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new FileInputStream(filename));
        NodeList melements1 = d1.getElementsByTagName("wsdl:part");
        ArrayList<String> minput = new ArrayList<>();
        int l,i;
        l = melements1.getLength();
        for(int k=0; k < l; k++)
        {
            if(melements1.item(k).getAttributes().getNamedItem("element") != null)
            {
                minput.add(melements1.item(k).getAttributes().getNamedItem("element").getNodeValue());
            }
        }
         return minput.toArray(new String[minput.size()]);
      }

    /**
     *
     * @param args
     * @throws FileNotFoundException
     * @throws SAXException
     * @throws IOException
     * @throws ParserConfigurationException
     */
    public static void main(String[] args) throws FileNotFoundException, SAXException, IOException, ParserConfigurationException, NullPointerException 
    {
        // TODO code application logic here
        Project p;
        p = new Project();
        System.out.println("Hi");
        String uri;
        uri = "C:/Users/karthikbv/Desktop/sample.wsdl";
        String[] s, s1;
        s = p.listOperationsUnique(uri);
        s1 = p.listInputs(uri);
        int len = s.length;
        int len1 = s1.length;
        System.out.println("Operations:");
        for(int i=0; i<len; i++)
        {
           System.out.println(s[i]); 
        }
        System.out.println("Input Params:");
        for(int i=0; i<len1; i++)
        {
           System.out.println(s1[i]); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:09:03.403

得到了我需要的答案。只需在第 78 行将节点项值更改为“名称”。感谢所有花时间研究该问题的人。

# mapkit - iOS 第三方地图

> ID：15630436
> 
> 赞同：1
> 
> 时间：2013-03-26T06:07:43.453
> 
> 标签：mapkit, openstreetmap, mapbox

我正在构建一个 iOS 应用程序，使用 MapBox 获取地图，使用 MapQuest 获取方向数据。应用程序可以使用或显示第三方（非 MapKit）地图数据是否有任何限制？显示其他来源的地图和路线的应用程序是否会被批准在 App Store 中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:37:33.650

我是 MapBox iOS SDK 的开发者。许多应用程序已获得 Apple 的批准，具有替代地图和/或方向。一些例子包括：

*   [http://thesilenthistory.com](http://thesilenthistory.com)
*   [http://www.mapofthedead.com](http://www.mapofthedead.com)
*   [http://www.bassproshopsgames.com/myguide-Hunt/bass-pro-shops-myguide-hunt](http://www.bassproshopsgames.com/myguide-Hunt/bass-pro-shops-myguide-hunt)
*   [http://mapcraftapp.com](http://mapcraftapp.com)
*   [http://www.messageme.com](http://www.messageme.com)
*   [http://moves-app.com](http://moves-app.com)
*   [https://itunes.apple.com/us/app/london-tube-tamer-transport/id558106521?mt=8](https://itunes.apple.com/us/app/london-tube-tamer-transport/id558106521?mt=8)

此外，除了最后一个之外，其他所有人都使用 MapBox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T12:53:01.413

这里还有其他替代方案可以在双方都为您提供帮助：

[skobbler iOS SDK](http://developer.skobbler.com/getting-started/ios) - 他们提供离线地图、路线计算、转弯导航和免费套餐。

[cartotype](http://www.cartotype.com/) - 他们提供矢量数据，地图和路线可以显示为集成地图图层或叠加层。

# python - 在我的班级中调用函数不起作用

> ID：15630439
> 
> 赞同：2
> 
> 时间：2013-03-26T06:08:06.383
> 
> 标签：python, class, function

```
class MyClass(object):
    def f(self):
        return 'hello world' 
```

我在这里和其他网站上使用此代码阅读的所有内容，如果我运行`MyClass.f()`它应该返回`hello world`但我不断得到

```
Traceback (most recent call last):
  File "C:\Users\Calvin\Desktop\CS_Semester_Project\testing.py", line 5, in <module>
    MyClass.f()
TypeError: unbound method f() must be called with MyClass instance as first argument (got nothing instead) 
```

我不知道我做错了什么，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:15:01.973

该错误告诉您`f()`必须在type的*实例*`MyClass`上调用，而不是在`MyClass`其自身上调用。

您需要创建一个实例`MyClass`：

```
obj = MyClass() 
```

在这种情况下`obj`将是`MyClass`.

然后你需要调用`f()`那个对象：

```
obj.f() 
```

由于在 Python 中调用方法的方式，错误消息令人困惑。当您调用`obj.f()`,作为第一个参数`obj`隐式传递给。`f()`这就是为什么你必须写

```
def f(self):
    ... 
```

`self`将`obj`在您调用时引用`obj.f()`。

知道这一点，如果您再看一下错误消息：

```
TypeError: unbound method f() must be called with MyClass instance as first argument (got nothing instead) 
```

这更有意义。它说它`f()`期待一个参数，（特别是 的一个实例`MyClass`）并且没有得到一个，因为试图在一个*类型*而不是一个类型的*实例*上调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:09:00.877

做这个：

```
myCls = MyClass()
myCls.f() 
```

当你像静态函数一样调用它时错误说你的方法需要实例你可以在[方法部分](http://docs.python.org/2/tutorial/classes.html#method-objects)[的教程中阅读更多关于python类的信息](http://docs.python.org/2/tutorial/classes.html)

# jsf-2 - 如何强制设置器调用 JSF 2.0 中的禁用字段

> ID：15630442
> 
> 赞同：3
> 
> 时间：2013-03-26T06:08:10.140
> 
> 标签：jsf-2

在 JSF 中禁用/只读字段的设置器不会被调用，因此支持 bean 永远不会有禁用字段的值，无论是复选框还是输入文本字段等。如果我需要映射的字段中禁用字段的值该怎么办豆？如何强制调用 setter 以便将值设置回来？任何建议/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:30:25.920

您可以使用 javascript 或 jQuery 禁用客户端上的字段，而不是使用 JSF，`disabled="true"`例如使用 jQuery：

有关详细信息，请参阅此帖子：[如何使用 jQuery 禁用输入？](https://stackoverflow.com/q/1414365/620338)

或者您可以将禁用的输入字段值作为隐藏字段与您的表单一起提交

```
<h:inputHidden value="#{myBean.myValue}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-10T04:06:41.797

您可以在您的样式中制作`disabled='false'`和使用`style="display:none"`（或者更好地在 css 类中这样做）？因此，该字段将从 jsf 的角度进行处理，但不会在浏览器端的视图中占用空间。

# model-view-controller - Mixin中具有相同功能的多个类

> ID：15630444
> 
> 赞同：0
> 
> 时间：2013-03-26T06:08:52.623
> 
> 标签：model-view-controller, extjs4, mixins

我在我的项目中使用了 mixins(EXT Js 4)。我有以下结构。两个名为 Class A 和 Class B 的类具有以下功能。

```
Ext.define('ClassA', {        
    classAFunction: function() {      
       alert("ClassAFunction in class A");        
    }        
});

Ext.define('ClassB', {        
    classBFunction: function() {      
       alert("ClassBFunction in class B");        
    },

    classAFunction: function() {      
       alert("ClassAFunction in class B");        
    }           

}); 
```

在我的控制器中，我使用 mixins 来扩展我的控制器的功能，如下面的代码所示。

```
Ext.define(Site_Controller', {
extend: 'Ext.app.Controller',

views: [
    'ui.Site_View'
],

mixins: {
   classA: 'ClassA',        
   classB: 'ClassB'

},

init: function() {
    this.control({
        'MainPanel button[action=save]':{
            click: this.CreateSite
        }
    });
},

CreateSite: function() {

  alert("HELLO");
  this.classAFunction;
  this.classBFunction;
}

}); 
```

我在点击视图中的按钮时调用控制器的 createsite 方法。因此，当首先调用 createsite 方法时，我得到了“HELLO”，然后调用了 classAFunction，它给了我“A 类中的 ClassAFunction”。所以它调用classA函数但我想调用classB中存在的ClassAFunction。所以在 extjs 中我怎么能做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T04:54:44.877

您可以访问 mixins 并直接调用该函数

```
this.mixins.classB.classAFunction.call(this); 
```

# css - 如何使用 iframe 将 css 应用于外部加载网页。可能吗？

> ID：15630448
> 
> 赞同：3
> 
> 时间：2013-03-26T06:09:09.320
> 
> 标签：css, iframe, web, external

我想从其他网站添加一个页面（市场观察代码），该页面由客户使用 iframe 提供。但它的颜色与我的网站不匹配。如何匹配它。有什么办法可以匹配吗？请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:35:45.413

您可以让 iFrame 继承父 CSS 和 javascript 看到这个问题：

[iframe 从父级继承](https://stackoverflow.com/questions/4612374/iframe-inherit-from-parent)

但是您需要访问 iFrame 标记才能执行此操作，否则我认为这是不可能的（并且可能不应该出于安全等其他原因）

# android - Android - 果冻豆页面在 html 页面转换时冻结

> ID：15630450
> 
> 赞同：0
> 
> 时间：2013-03-26T06:09:16.080
> 
> 标签：android, android-4.2-jelly-bean

我有一个 Web 应用程序，在提交表单时，我希望显示加载图像，直到下一页加载，问题出在 Jelly Bean，它只是冻结第 1 页，一段时间后它加载第 2 页，加载器根本不显示我尝试了 blockui.js，在表单提交时显示/隐藏 div，但没有预期结果。我在 Gingerbread 和 ICS 等其他 android 版本中没有发现这个问题。

注意：当我延迟提交表单时，它会显示加载器图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:33:41.377

我认为在 jelly bean web-kit 中有一个变化。JB 使用 chrome 的 web-kit。这就是为什么该应用程序在所有其他版本上都能顺利运行，而 Jellybean 则变得很奇怪。您需要以任何其他方式对其进行管理。当我完成一个基于 html 和 js 的应用程序时，我也遇到了一些类似的问题。我仍然无法完成这个问题，由于某种原因我需要删除该应用程序

# javascript - 想要制作非活动超链接

> ID：15630453
> 
> 赞同：0
> 
> 时间：2013-03-26T06:09:35.663
> 
> 标签：javascript, jquery, html, javascript-events

我在隐藏和显示 div 元素时遇到问题。在这种情况下，当用户单击年份时，会显示相关内容。 **问题**我想在打开的相应年份不活动 hyperling。脚本和 html 在下面我已经尝试过 .preventDefault()。但没有成功。

```
 <script type="text/javascript" >
          $(document).ready(function() {
             $("div.new:gt(0)").hide();// to hide all div except for the first one
             $("div[name=arrow]:eq(0)").hide();
             // $("div.nhide:gt(0)").hide(); 
              // $("a[name=new]").hide();
             $("a[name=new]").hide();
             $('#content a').click(function(selected) {

                var getID = $(this).attr("id"); 
                var value=  $(this).html(); 

                if( value == '&lt;&lt; Hide')
                {
                    // $("#" + getID + "arrow").hide();
                    $("a[name=new]").hide();
                    $("#" + getID + "_info" ).slideUp('slow');
                    $("div[name=arrow]").show();
                    $("div.new").hide(); 
                    $(this).hide();
                    // var getOldId=getID;
                    // $("#" + getID ).html('&lt;&lt; Hide').hide(); 
                }
                if($("a[name=show]"))  
                {
                    // $("div.new:eq(0)").slideUp()
                    $("div.new").hide(); 
                    $("div[name=arrow]").show();
                    $("a[name=new]").hide();
                    $("#news" + getID + "arrow").hide();
                    $("#news" + getID + "_info" ).slideDown();

                    $("#news" + getID ).html('&lt;&lt; Hide').slideDown(); 
                } 

            });  
        });  
          </script> 
```

html代码如下

```
 <div id="content">
<div class="news_year">
 <a href="#" name="show"  id="2012">
   <div style="float:left;" name="year" id="news2012year">**2012** </div>
   <div style="float:left;" name="arrow" id="news2012arrow">&gt;&gt;</div>
 </a>
    </div> 

 <div class="new" id="news2012_info">
   <div class="news">
      <div class="news_left">News for 2012</div>
   </div>
    <div class="nhide" ><a href="#" class="new" name="new" id="news2012">&lt;&lt; Hide</a>  </div>
  </div>
<div id="content">
<div class="news_year">
 <a href="#" name="show"  id="2011">
   <div style="float:left;" name="year" id="news2012year">2012 </div>
   <div style="float:left;" name="arrow" id="news2012arrow">&gt;&gt;</div>
 </a>
    </div> 

 <div class="new" id="news2011_info">
   <div class="news">
      <div class="news_left">News for 2011</div>
   </div>
    <div class="nhide" ><a href="#" class="new" name="new" id="news2011">&lt;&lt; Hide</a>  </div>
  </div> 
```

[小提琴](http://jsfiddle.net/ethagnawl/sn4aG/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:21:04.740

如果我理解你的问题，event.preventDefault(); 不适用于所有浏览器，因此如果您使用其他浏览器（如 IE），请使用 event.returnValue = false; 而不是 that.so 您可以使用 javascript 检测您的浏览器

var appname = window.navigator.appName;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:21:19.440

这就是我目前在我的项目中用来“禁用”锚标记的方法

禁用锚点：

*   移除`href`属性
*   更改不透明度以增加效果

* * *

```
<script>
$(document).ready(function(){
            $("a").click(function () { 
                $(this).fadeTo("fast", .5).removeAttr("href"); 
            });
        });
</script> 
```

启用锚点：

```
$(document).ready(function(){
    $("a").click(function () { 
        $(this).fadeIn("fast").attr("href", "http://whatever.com/wherever.html"); 
    });
}); 
```

原始代码可以在[这里找到](https://stackoverflow.com/a/3736724/973578)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:22:23.327

在 click 函数内的代码周围加上一条`if`语句，检查变量是真还是假。如果它是假的，它不会运行代码，这意味着链接实际上是非活动的。尝试这个..

```
var isActive = true;
if (isActive) {
    // Your code here
}
// The place where you want to de-activate the link
isActive = false; 
```

您还可以考虑将链接颜色更改为灰色以表示它处于非活动状态。

**编辑**
刚刚意识到您希望禁用多个链接..上面的代码将禁用所有链接。试试下面的代码（把`if`周围的代码放在点击函数中）

```
if(!$(this).hasClass("disabled")) {
    // Your code here
}

// The place where you want to de-activate the link
$("#linkid").addClass("disabled");

// To re-enable a link
$("#linkid").removeClass("disabled");

// You can even toggle the link from disabled and non-disabled!
$("#linkid").toggleClass("disabled"); 
```

然后在你的 CSS 中你可以有这样的声明：

```
.disabled:link {
    color:#999;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:24:34.617

在扩展元素时向包装元素添加一个名为“显示”的类，并在隐藏它时将其删除。用于`.hasClass('shown')`确保永远不会执行不适当的条件。

# xml - 将值放入变量并在 XSLT 中使用它

> ID：15630458
> 
> 赞同：0
> 
> 时间：2013-03-26T06:09:53.597
> 
> 标签：xml, xslt, xslt-1.0

```
<xsl:choose>
  <xsl:when test="type='LEVEL'">
    <xsl:variable name="myVar" select = "value"/>
      <xsl:variable name="spaces" select = "'&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0'"/>
      <xsl:value-of select="substring($spaces, 1, $myVar)"/>
   </xsl:when> 
```

我在 XSLT 中有上面的代码。myVar 是一个变量，其值类似于（1 或 2 或 3）。我需要将以下代码行的输出存储在一个变量中，并在 when 条件之外使用它。

```
xsl:value-of select="substring($spaces, 1, $myVar)"/ 
```

我目前无法做到。有人可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:11:58.413

你不能。您可以在 when 条件之外声明变量（即使它们的声明中的某些 XPath 会失败并返回 null），或者在 when 条件内使用输出。但是，如果要使用输出，为什么还要使用选择？最后一次尝试，可能是声明变量并在其序列构造函数中使用选择，如下所示：

```
<!-- You declare the 'tool' variables alone -->
<xsl:variable name="myVar" select = "value"/>
<xsl:variable name="spaces" select = "'&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0'"/>

<!-- For myVarSub you use a sequence constructor instead of the select way -->
<xsl:variable name="myVarSub">      
    <xsl:choose>
       <xsl:when test="type='LEVEL'">    
            <!-- xsl:sequence create xml node -->
            <xsl:sequence select="substring($spaces, 1, $myVar)"/>
       </xsl:when>
    <xsl:choose>
</xsl:variable> 
```

之后，只需在需要时输出或使用变量。如果不添加其他 when 条件，则当 test 为 false 时，myVar 将为 null。但是，请注意这是一个 xslt 2.0 解决方案，因为 xsl:sequence。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:13:40.057

我不确定您要做什么，但您可以尝试以下操作。源 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
<Result>
<resultDetails>
    <resultDetailsData>
        <itemProperties>
            <ID>1</ID>
            <type>LEVEL</type> 
            <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:int">5</value> 
        </itemProperties>
    </resultDetailsData>
</resultDetails>
</Result> 
```

应用此 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

<xsl:template match="itemProperties">
    <xsl:variable name="fromOutputTemplate">
        <xsl:call-template name="output"/>  
    </xsl:variable>
    <out>
        <xsl:value-of select="$fromOutputTemplate"/>    
    </out>          
</xsl:template>

<xsl:template name="output">
    <xsl:variable name="spaces" select = "'&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;'"/>
    <xsl:variable name="myVar" select = "value"/>

    <xsl:choose>
        <xsl:when test="type='LEVEL'">
                <xsl:value-of select="substring($spaces, 1, $myVar)"/>
        </xsl:when>
    </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

它为您提供以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>

        <out>     </out> 
```

那是你想走的路吗？

# hadoop - Namenode-HDFS 的“连接被拒绝”错误（Hadoop 问题）

> ID：15630460
> 
> 赞同：7
> 
> 时间：2013-03-26T06:10:12.243
> 
> 标签：hadoop, hdfs

当我们看到 using 命令时，我的所有节点都已启动并运行`jps`，但我仍然无法连接到 hdfs 文件系统。每当我单击`Browse the filesystem`Hadoop Namenode localhost:8020 页面时，我得到的错误是`Connection Refused`. 我也尝试过格式化并重新启动namenode，但错误仍然存​​在。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T20:41:59.030

`JobTracker, Jps, NameNode. DataNode, TaskTracker`通过运行`jps`命令检查您的所有服务是否正在运行。

尝试一一运行启动它们：

```
./bin/stop-all.sh
./bin/hadoop-daemon.sh start namenode
./bin/hadoop-daemon.sh start jobtracker
./bin/hadoop-daemon.sh start tasktracker
./bin/hadoop-daemon.sh start datanode 
```

如果您仍然收到错误，请再次停止它们并清理您的临时存储目录。目录详细信息在配置文件`./conf/core-site.xml`和运行中，

```
./bin/stop-all.sh
rm -rf /tmp/hadoop*
./bin/hadoop namenode -format 
```

`./logs`检查文件夹中的日志。

```
tail -200 hadoop*jobtracker*.log
tail -200 hadoop*namenode*.log
tail -200 hadoop*datanode*.log 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-26T09:33:00.680

HDFS 在某些发行版/构建下可能会使用端口 9000。

请仔细检查您的名称节点端口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-29T06:00:21.153

更改 core-site.xml

```
 <property>
     <name>fs.default.name</name>
     <value>hdfs://hadoopvm:8020</value>
     <final>true</final>
   </property> 
```

更改为IP地址。

```
<property>
  <name>fs.default.name</name>
  <value>hdfs://192.168.132.129:8020</value>
  <final>true</final>
</property> 
```

# java - 在哪里可以下载 java-x86-windows.dll

> ID：15630463
> 
> 赞同：1
> 
> 时间：2013-03-26T06:10:28.603
> 
> 标签：java, php, php-java-bridge

我想使用**Java_Bridge**在 php 文件中使用我的 java 类。但是，为了在我的 Windows 系统中安装 javabridge，我需要无法找到**的 java-x86-windows.dll 。**我在哪里可以得到这个 java-x86-windows.dll，还有其他方法可以从 php 文件中调用 java 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:45:05.970

另一种选择是使用 Java/PHP 桥的 Zend Server 实现，我在生产环境中使用过它，它非常好。它不需要像 tomcat 这样的 Java 服务器，并提供了完整的 PHP 堆栈（apache、PHP 和 MySQL），从而降低了复杂性（更少的移动部件）。你可以到这里：

[http://www.zend.com/en/products/server/free-edition](http://www.zend.com/en/products/server/free-edition)

请记住，您必须使用适合您操作系统的路径分隔符（; 用于 windows， : 用于 linux）将您的 jars 添加到 watchdog-jb.ini 文件中的 Zend 类路径并重新启动服务器。然后，您可以通过以下方式调用您的课程：

```
$myClass = new Java("com.someclass", $data); //Your constructor 
```

从那时起，它与 sourceforge 版本非常相似。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:22:19.073

您可以从这个[站点下载它，或者您可以在](http://php-java-bridge.sourceforge.net/pjb/)[sourceforge](http://sourceforge.net/mailarchive/forum.php?forum_name=php-java-bridge-users&max_rows=25&style=nested&viewmonth=200611)上尝试

> PHP/Java Bridge 是流式、基于 XML 的网络协议的实现，可用于将原生脚本引擎（例如 PHP、Scheme 或 Python）与 Java 虚拟机连接起来。

# scrapy - Scrapy 和长时间运行的爬网

> ID：15630467
> 
> 赞同：0
> 
> 时间：2013-03-26T06:10:45.213
> 
> 标签：scrapy

我正在运行长时间的爬网来下载一段时间（大约一个小时）后失败的图像。我收到以下错误：

```
[1]+  Killed scrapy crawl myScrapper
Killed 
```

除了被截断的图像外，我在日志中没有任何特别的内容：

```
exceptions.IOError: image file is truncated (1 bytes not processed) 
```

有人知道吗？

谢谢！

# php - php发送邮件本地不woking？

> ID：15630469
> 
> 赞同：0
> 
> 时间：2013-03-26T06:11:11.160
> 
> 标签：php, symfony-1.4

我试图在本地主机中发送邮件。

但工作。我改变了 php.ini

```
 [mail function]
        SMTP=SMTP.gmail.com
        smtp_port =587
        sendmail_from =postmaster@testmail.com
       sendmail_path = "C: \xampp\sendmail.exe\" -t" 
```

这是我的 php 邮件功能

```
 public function sendMail($to,$subject,$from=null,$headers = null)
            {
              if($headers == null) {
               $headers = $this->setMimes();
                 }
               $headers .= $this->setFrom($from);
                return mail($to,$subject,$this->getMessage(),$headers);
           } 
```

这封邮件没有发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:15:03.577

检查/更改您的 PHP 邮件配置：

打开您的 php.ini 文件（如果您不知道它在哪里，请参见下文） 搜索显示为 [mail function] 添加/更改邮件服务器的详细信息的行。这可以是本地邮件服务器或 ISP 的邮件服务器。保存/关闭 php.ini 文件 重新启动您的网络服务器

首次打开 php.ini 文件时邮件设置的示例：

```
[mail function]
; For Win32 only.
SMTP = localhost
smtp_port = 25

; For Win32 only.
;sendmail_from = me@example.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
;sendmail_path = 
```

附加信息在回显 phpinfo() 中，您可以查看您的 PHP 配置详细信息。您可以通过创建一个包含以下行的 .php 文件来做到这一点： . 当您在浏览器中运行它时，您将看到 PHP 配置变量的完整列表。只需搜索包含 php.ini 和 sendmail_path 的行即可查看您需要使用的值。

另一个想法是您可以使用 ini_set() 像这样正确配置您的邮件设置

如果您的邮件脚本继续失败，请将以下代码添加到您的电子邮件脚本的顶部。

```
// Please specify your Mail Server - Example: mail.example.com.
ini_set("SMTP","mail.example.com");

// Please specify an SMTP Number 25 and 8889 are valid SMTP Ports.
ini_set("smtp_port","25");

// Please specify the return address to use
ini_set('sendmail_from', 'example@YourDomain.com'); 
```

# ruby-on-rails - 在 ruby on rails 博客应用程序中未显示评论

> ID：15630470
> 
> 赞同：0
> 
> 时间：2013-03-26T06:11:13.963
> 
> 标签：ruby-on-rails, blogs

我正在尝试在博客应用程序中显示评论者和评论模型的主体。但它没有显示。这是评论控制器的代码。

```
class CommentsController < ApplicationController

  http_basic_authenticate_with :name => "dhh", :password => "secret", :only => :destroy

  def create
    @post=Post.find(params[:post_id])
    @comment=@post.comments.create(params[:comments])
    redirect_to post_path(@post)
  end

  def destroy
    @post = Post.find(params[:post_id])
    @comment = @post.comments.find(params[:id])
    @comment.destroy
    redirect_to post_path(@post)
  end

  def check
    @comment=Comment.all
  end
end 
```

//评论模型

```
class Comment < ActiveRecord::Base
  belongs_to :post
  attr_accessible :body, :commenter
end 
```

//发布模型

```
class Post < ActiveRecord::Base
  attr_accessible :content, :name, :title, :tags_attributes

  validates :name,  :presence=>true
  validates :title, :presence=>true,
                    :length=>{:minimum=>5}
  has_many :comments, :dependent=>:destroy
  has_many :tags

  accepts_nested_attributes_for :tags, :allow_destroy => :true,
    :reject_if => proc { |attrs| attrs.all? { |k, v| v.blank? } }
end 
```

// 评论视图

```
<p>
  <b>Commenter:</b>
  <%= comment.commenter %>
</p>

<p>
  <b>Comment:</b>
  <%= comment.body %>
</p>

<p>
  <%= link_to 'Destroy Comment', [comment.post, comment],
               :confirm => 'Are you sure?',
               :method => :delete %>
</p> 
```

// 发布视图

```
<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @post.name %>
</p>

<p>
  <b>Title:</b>
  <%= @post.title %>
</p>

<p>
  <b>Content:</b>
  <%= @post.content %>
</p>

<p>
  <b>Tags:</b>
  <%= join_tags(@post) %>
</p>

<h2>Comments</h2>
<%= render @post.comments %>

<h2>Add a comment:</h2>
<%= render "comments/form" %>

<br />
<%= link_to 'Edit Post', edit_post_path(@post) %> |
<%= link_to 'Back to Posts', posts_path %> | 
```

请解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:22:48.187

哪个文件是您所说的“评论视图”？能够呈现这样的集合

```
 <%= render @post.comments %> 
```

你需要放置一个评论模板`views/comments/_comment.html.erb`

当然，您可以将其放入另一个部分，例如“posts/_comment.html.erb”，但您必须更加明确：

```
<%= render :partial => 'posts/comment', :collection => @post.comments %> 
```

（注意文件名中有下划线，但传递给渲染的“部分路径”中没有）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:51:42.143

```
<%= render @post.comments %> 
```

是不正确的。您必须渲染部分，而不是对象。

我会认为您的评论视图`views/comments`被命名为`show.html.erb`. 尝试这样的事情：

```
<%= @post.comments.map do |comment| %>
  <%= render 'comments/show', comment: comment %>
<%= end %> 
```

UPD：我的错误：它是正确的，评论中的描述。

# php - jquery只改变一个元素

> ID：15630473
> 
> 赞同：0
> 
> 时间：2013-03-26T06:11:15.280
> 
> 标签：php, jquery

您好，我有一个 php 页面，其中显示 10 篇文章，其中隐藏了阅读更多按钮文章

这是我的php代码

```
$query = mysql_query("SELECT * FROM stories ORDER BY id DESC LIMIT 0,10");
while ($row=mysql_fetch_array($query))
{
    echo "<div class='content_story_block'>
            <div class='content_story_block_menu'>$row[title]
                <div id='Read_More' style='display:none;' class='content_story_block_menu_span'>Read More</div>
            </div>
            <div class='content_story_block_row'>$row[brief]</div>
         </div>";
} 
```

这是我的jQuery代码

```
<script type="text/javascript">
    $('.content_story_block').hover(function() {
      $('#Read_More').toggle('slow', function() {
        // Animation complete.
      });
    });
</script> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:14:15.373

`Read_More`从 id更改为 class：

```
<div style='display:none;' class='content_story_block_menu_span Read_More'>
Read More</div> 
```

然后更改您的脚本：

```
<script type="text/javascript">
    $('.content_story_block').hover(function() {
      $(this).find('div.Read_More').toggle('slow', function() {
        // Animation complete.
      });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:14:20.010

```
<script type="text/javascript">
    $('.content_story_block').hover(function() {
      $(this).next('#Read_More').toggle('slow', function() {
        // Animation complete.
      });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:18:10.947

尝试这个

```
<script type="text/javascript">
$('.content_story_block').hover(function() {

 $('.content_story_block_menu_span').each(function(){
      $(this).toggle('slow', function() {
    // Animation complete.
  });
  })
}); 
```

# actionscript-3 - 在 Flex 应用程序中嵌入 n（多个）.txt 文件

> ID：15630474
> 
> 赞同：1
> 
> 时间：2013-03-26T06:11:49.750
> 
> 标签：actionscript-3, apache-flex

我必须在我的 Flex 应用程序中嵌入 .txt 文件。我的应用程序有一些示例（以后可以增加其数量）。对于每个示例，我必须嵌入一个不同的 txt 文件。我知道如何使用 Embed 标记，但它需要为我将嵌入的 n 个 txt 文件使用 n 个类变量。有没有办法以更优化的方式实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:29:26.400

我认为没有，因为每个嵌入都被视为单独的东西。但是，您可以将所有文本文件作为字符串合并到一个 XML/JSON 文件中，并仅将该文件与其类嵌入，创建一个实例并将其解析为文本文件片段。

# java - 如何从 msb 开始获取特定位置的位值？

> ID：15630476
> 
> 赞同：3
> 
> 时间：2013-03-26T06:11:58.463
> 
> 标签：java, bits

我以前从未在 Java 中使用过比特，所以问题如下：我有

```
byte a=254; 
```

如何从这个字节中获取一个位，从 msb 位置开始？

```
If position == 0 it returns 1
If position == 7 it returns 0 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:16:25.657

```
int getBitFromMSB(byte x,int position){
    return (x >>> (7 - position)) & 1;
} 
```

# jquery - 日期选择器 ASP.NET

> ID：15630477
> 
> 赞同：1
> 
> 时间：2013-03-26T06:12:06.480
> 
> 标签：jquery, asp.net

我是 jquery 的新手，我们如何使用 jquery 和 ASP.NET 在单击按钮时使日期出现在文本框中？日历出现了，但它消失得非常快，可以与文本框一起使用吗？我还需要在按钮的脚本中包含什么？我用过这个功能

```
<script type="text/javascript" language="javascript">
 $(document).ready(dateselect)
    function dateselect()
     {
      var date1 = $("#Button1").datepicker();
     } 
</script>
<asp:Button ID="Button1" runat="server" Text="Button"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:24:45.307

**Javascript：**

```
<script type="text/javascript">
 $(function() {
        $("#<%= txtFrom.ClientID %>").datepicker({
            showmonth:true,
            autoSize: true,
            showAnim: 'slideDown',
            duration: 'fast'
        });

        $("#<%= ImageButton1.ClientID %>").click(function() {
          $("#<%= txtFrom.ClientID %>").datepicker('show');
        });
    });
</script> 
```

**代码：**

```
<asp:TextBox ID="txtFrom" MaxLength="10" runat="server" ToolTip="Enter From Date">
</asp:TextBox>
<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/Images/clock_add.gif" /> 
```

参考[jquery论坛](http://forum.jquery.com/topic/displaying-a-datepicker-on-custom-button-click-event)

## 编辑 1

更改此功能

```
 $("#<%= ImageButton1.ClientID %>").click(function() {
          $("#<%= txtFrom.ClientID %>").datepicker('show');
        }); 
```

至

```
 $("#<%= ImageButton1.ClientID %>").click(function() {
          $("#<%= txtFrom.ClientID %>").datepicker('show');
          return false;
        }); 
```

或者

```
 $("#<%= ImageButton1.ClientID %>").click(function(event) {
          $("#<%= txtFrom.ClientID %>").datepicker('show');
          event.preventDefault();
        }); 
```

## 编辑 2

```
$("#txtStartDate").datepicker({
  showOn: "both",       
  onSelect: function(dateText, inst){
     $("#txtEndDate").datepicker("option","minDate",
     $("#txtStartDate").datepicker("getDate"));
  }
}); 
```

来源：
[根据另一个日期选择器或文本框限制 jquery datepicker 中的日期](https://stackoverflow.com/questions/4419804/restrict-date-in-jquery-datepicker-based-on-another-datepicker-or-textbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:21:59.057

尝试这个

```
<script type="text/javascript">
$(document).ready(function() {

    $("#txtDate").datepicker({
        showOn: 'button',
        buttonText: 'Show Date',
        buttonImageOnly: true,
        buttonImage: 'http://jqueryui.com/demos/datepicker/images/calendar.gif'
    });
});
</script>
<input type='text' id='txtDate' /> 
```

它工作正常我试过这个

# c# - 如何设置将一页传递到另一页的值？

> ID：15630483
> 
> 赞同：0
> 
> 时间：2013-03-26T06:12:23.490
> 
> 标签：c#, listbox, windows-phone

嗨，这是使用 xaml 页面，我想使用选定的项目导航。

```
 <ListBox x:Name="NotchsList11"  Margin="0,0,0,0" Grid.Row="3" HorizontalAlignment="left" Width="Auto"  Grid.RowSpan="2">
    <ListBox.ItemTemplate>
      <DataTemplate> 
         <StackPanel VerticalAlignment="Top" Width="Auto">
            <ListBox ItemsSource="{Binding Images}"  Width="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled" SelectionChanged="NotchsList11_SelectionChanged">
              <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                       <StackPanel Orientation="Horizontal"  VerticalAlignment="Top">
                       </StackPanel>
                    </ItemsPanelTemplate>
              </ListBox.ItemsPanel>
              <ListBox.ItemTemplate>
                <DataTemplate>
                    <Image Source="{Binding}" Width="152" Height="90"  Stretch="Fill"  VerticalAlignment="Top">
                   </Image>
                </DataTemplate>
             </ListBox.ItemTemplate>
           </ListBox>
        </StackPanel>
      </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我的 xaml.cs 页面代码如下

```
private void NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Notch selectedItemData = (sender as ListBox).SelectedItem as Notch;
        if(selectedItemData != null)
        {
            NavigationService.Navigate(new Uri(string.Format("/Test.xaml?parameter={0}",selectedItemData.articleid), UriKind.Relative));
        }
    } 
```

如果我选择任何一项我无法导航到其他页面，因为我收到错误 selectedItemData is null.so 任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:40:19.367

一个。

```
 private void NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Notch selectedItemData  = NotchsList11.SelectedItem as Notch;
        if (selectedItemData != null)
        {
            NavigationService.Navigate(new Uri(string.Format("/Test.xaml?parameter={0}",selectedItemData.articleid), UriKind.Relative));
        }
    } 
```

B. 或者您可以使用整个 SelectedItemData 对象作为数据上下文

```
private void NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Notch selectedItemData  = NotchsList11.SelectedItem as Notch;
        if (selectedItemData != null)
        {
            NavigationService.Navigate(new Uri("/Test.xaml", UriKind.Relative));
            FrameworkElement root = Application.Current.RootVisual as FrameworkElement;
            root.DataContext = selectedItemData;
        }
    } 
```

备注：在Test页面中可以使用(Notch)DataContext来引用Class的实例，这样就可以使用Image数据作为((Notch)DataContext).Image

C. 或者，这样：

```
 private void NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count > 0)
        {
            NavigationService.Navigate(new Uri(((Notch)e.AddedItems[0]).articleid, UriKind.Relative));

            ((ListBox)sender).SelectedIndex = -1; 
```

备注：Notch 是您作为 ItemSource 绑定到 ListBox 的类

最好的问候斯帕索

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:07:09.757

不要尝试从发件人对象中提取。如果实际上代码认为某个项目确实被选中并且不为空，则只需直接从列表对象中提取您需要的内容。

您只需将您的 SelectionChanged 方法更改为如下所示：

```
 private void NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (NotchsList11.SelectedItem != null)
        {
            NavigationService.Navigate(new Uri(string.Format("/Test.xaml?parameter={0}",
                (NotchsList11.SelectedItem as Notch).articleid), UriKind.Relative));
        }
    } 
```

这是一个示例： [http ://code.msdn.microsoft.com/wpapps/Windows-Phone-8-JumpStart-1b7c34e3/sourcecode?fileId=72994&pathId=1694015380](http://code.msdn.microsoft.com/wpapps/Windows-Phone-8-JumpStart-1b7c34e3/sourcecode?fileId=72994&pathId=1694015380)

# java - 你如何在两个空隙之间共享一个变量/真正的任何东西？

> ID：15630485
> 
> 赞同：0
> 
> 时间：2013-03-26T06:12:34.333
> 
> 标签：java, android, variables

我想知道如何将事物从一个虚空“共享”到另一个虚空。我有两个空白：一个称为“Setup”，一个称为“NextQuestionAnswer”。我在“设置”中有一个变量，我需要从“NextQuestionAnswer”空白处访问它。我见过其他类似的问题，但似乎没有任何帮助。这是我想要实现的代码。

我的问题是我不能将 TextView 声明为全局变量，因为它不接受公共或静态。

```
 public void setup() {
      ArrayList<String> questions = new ArrayList<String>();
      ArrayList<String> answers = new ArrayList<String>(); 
      ArrayList<String> correctanswers = new ArrayList<String>();

    TextView question = (TextView)(findViewById(R.id.textboxquestion));
      RadioButton ac1 = (RadioButton)(findViewById(R.id.radiobuttona));
      RadioButton ac2 = (RadioButton)(findViewById(R.id.radiobuttonb));
      RadioButton ac3 = (RadioButton)(findViewById(R.id.radiobuttonc));
      RadioButton ac4 = (RadioButton)(findViewById(R.id.radiobuttond));
    }

    public void NextQuestionAnswer() {

    question.setText("something here"); ---THIS IS THE LINE THAT I WANT TO BE ABLE TO DO

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:15:22.260

您不能在另一个函数的一个函数中访问变量声明，因此您必须在类级别声明它。`onCreate()`请在Method之前声明它，以便您可以访问它。

例子。

```
public class Test extends Activity 
{
    private TextView textView = null;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:13:59.303

您可以在您的类中放置一个全局变量，并在您的 2 种方法中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:17:22.943

```
 private String textValue = null;   
 public void setup() {
     ...
     setTextValue("value");
     ...
 }

 public void NextQuestionAnswer() {

    question.setText(getTextValue());

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:18:04.370

```
class MainActivity extends Activity 
{
TextView tv;//global declaration

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
            tv= (TextView) findViewById(R.id.textView)
}  

  public void setup() {
         //tv can be accessed here also
   }

  public void NextQuestionAnswer() {
   tv.setText("my text"); //set yout text value

  }

} 
```

当您将其声明为类变量时，可以通过类访问。

如果您在方法内声明变量，则该变量仅在该方法本地可用。

局部变量存储在堆栈中。实例和静态变量存储在堆上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T06:16:02.687

创建变量作为全局变量

局部变量访问仅限于方法本身

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T06:16:11.730

这只是一个想法：

如果两种方法都在同一个类中，为什么不使用全局变量？如果一种方法在不同的类中，请使用带有 getter/setter 的全局变量（假设变量不是公共的）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T06:19:47.840

您可以将其声明为私有，也可以将其公开

```
private TextView question
    onCreate
    {
    question = (TextView)(findViewById(R.id.textboxquestion));
    }      
    public void setup() {
          ArrayList<String> questions = new ArrayList<String>();
          ArrayList<String> answers = new ArrayList<String>(); 
          ArrayList<String> correctanswers = new ArrayList<String>();

          RadioButton ac1 = (RadioButton)(findViewById(R.id.radiobuttona));
          RadioButton ac2 = (RadioButton)(findViewById(R.id.radiobuttonb));
          RadioButton ac3 = (RadioButton)(findViewById(R.id.radiobuttonc));
          RadioButton ac4 = (RadioButton)(findViewById(R.id.radiobuttond));
        }

        public void NextQuestionAnswer() {

        question.setText("something here"); ---THIS IS THE LINE THAT I WANT TO BE ABLE TO DO

    } 
```

# android - 将我的应用程序转换为 .apk 文件，它不会显示谷歌地图

> ID：15630486
> 
> 赞同：0
> 
> 时间：2013-03-26T06:12:34.940
> 
> 标签：android, google-maps-api-2

嗨，我是 android 应用程序开发的新手。我做了一个谷歌地图 v2 来使用 GPS 显示我当前的位置。

> 当我使用 USB 电缆测试移动设备时它会正常工作，但问题是当我将应用程序转换为 .apk 时，它会检索我的 gps 当前>位置但没有显示地图

任何人都可以帮助解决我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:22:48.337

对于生成 .APK，您必须使用`keystore`&`MAP API KEY`来自同一台机器。如果这两个与不同的机器不同，那么它会发生..`(mean MAP are not show)`

如果您有不同的密钥库，那么您可以从密钥库获取 MAP API 密钥。

检查以下链接：

[如何从 Java 的 keytool 获取 MD5 指纹，而不仅仅是 SHA-1？](https://stackoverflow.com/q/6305938/1168654)

[https://stackoverflow.com/a/5262845/1168654](https://stackoverflow.com/a/5262845/1168654)

**已编辑**

打开此[链接](https://developers.google.com/maps/documentation/android/v1/mapkey#getdebugfingerprint)：按照步骤操作，`"Getting the MD5 Fingerprint of the SDK Debug Certificate"`然后从此[链接](https://developers.google.com/maps/documentation/android/v1/maps-api-signup)注册：然后在您的代码中使用该映射键，看看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:18:53.043

这表明您没有在项目中正确引用 Google Play 服务，或者您的设备不支持它。

请阅读[快速入门](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)，了解如何在项目中正确引用 jar。

# internet-explorer - 浏览器中的 CSS 媒体查询问题

> ID：15630488
> 
> 赞同：0
> 
> 时间：2013-03-26T06:12:41.407
> 
> 标签：internet-explorer, css, media-queries

我把这个CSS

```
@import url("large_screen.css")all;
@import url("small_screen.css")(max-width : 1024px); 
```

这个 css 文件在 chrome、mozila 浏览器中工作，它可以在小屏幕和大屏幕分辨率下工作，但即只渲染“large_screen.css”文件，不能在小分辨率 css (1024X768) 下工作，它是如何解决这个问题的，请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:17:59.963

哪个版本的IE？低于 9 的任何内容都会对媒体查询产生问题。您必须在 CSS 文件中进行 IE 修复，或加载 JS 文件以帮助渲染较低版本。

[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:22:35.583

在我看来，您可以尝试：

```
@import url("small_screen.css")(max-width:1024px) and (orientation:landscape); 
```

或/和

```
@import url("small_screen.css")(max-width:768px) and (orientation:portrait); 
```

**编辑**

然后我建议将您的样式放入媒体查询中。例子：

```
@media only screen and (max-width:1024px) and (orientation:landscape) {
    /* Styles here */
}

@media only screen and (max-width:768px) and (orientation:portrait) {
    /* Styles here */
} 
```

# android - 如何在对话框中获取要与数据库值进行比较的edittext值

> ID：15630495
> 
> 赞同：-1
> 
> 时间：2013-03-26T06:13:07.737
> 
> 标签：android, database, dialog, android-edittext

我有一个对话框，要求用户提供登录凭据。我想将该密码与之前存储用于身份验证的数据库值进行比较。M 做不到。任何人都可以帮忙吗？

```
public void onClick(View v) {
    // TODO Auto-generated method stu
    Toast.makeText(context, "Button Clicked", Toast.LENGTH_SHORT).show();   
    String existPin=exist_pin.getText().toString();
    String confirmPin=new String();
    prefEditor.putString("ExistPin", existPin);
    prefEditor.commit();
    WayDataBase way=new WayDataBase(LoginActivity.this);
    String storedPin=way.getPin(confirmPin);
    Toast.makeText(context, "Data from database", Toast.LENGTH_SHORT).show();
    if(existPin.equals(storedPin))
    {
        d2.dismiss();
        Intent i=new Intent(getApplicationContext(),ApplicantPage1.class);
        startActivity(i);
    }
    else
    {
        Toast.makeText(context, "Invalid credentials", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:46:02.060

更好地在数据库中进行比较，只需`pin`在函数中传递输入的参数`getPin`并检查并返回布尔值而不是字符串，如下所示：

```
public boolean isValidPin(String pin) {// within database.

        boolean type = false;

        Cursor c = myDataBase.rawQuery(
                "select * from table where user_pin='" + pin+ "'", null);
        if (c.getCount() > 0) {
            c.moveToFirst();
            type = true;
        }

        c.close();

        return type;

    } 
```

从盒子中获取引脚并传递给函数，然后放置条件并检查布尔值。

```
String pin=exist_pin.getText().toString();
boolean flag=isValidPin(String pin);

 if(flag)
    {
        d2.dismiss();
        Intent i=new Intent(getApplicationContext(),ApplicantPage1.class);
        startActivity(i);
    }
    else
    {
        Toast.makeText(context, "Invalid credentials", Toast.LENGTH_SHORT).show();
    } 
```

# c# - 单类交易

> ID：15630496
> 
> 赞同：0
> 
> 时间：2013-03-26T06:13:10.777
> 
> 标签：c#, entity-framework, entity, transactionscope

我有一个 asp.net 应用程序，它利用了三层：DAL -> IUnitOfWork 接口，它实现了 EntityFramework BLL -> 一组业务逻辑类，其中 evenry 类继承自基本业务逻辑类 UI -> Web 表单

```
Base business logic class appears like following
public class BasebusinessLogicClass<TEntity>
ctor(IUnitOfWork uow){this.Unit = uow)
public void Insert(T entity) { // add entity on unit context and call SaveChanges}
public void Edit(T entity) { // edit entity on unit context and call SaveChanges}
public void Delete ..// as the above snippet.. 
```

正如您在我的代码片段中看到的，每个业务逻辑类都执行“原子”业务操作。每次调用 Insert、Delete、Edit 方法都会调用 SaveChanges()。现在，我需要实现一种事务，其范围必须限制在类上，例如：

```
public class BusinessTransactionBase 
private collection of BusinessLogicBase;
public void Begin() {..initialize the TransactionScope class of .NET}
public void Commit() {Call Complete methid of transactionScope}
public void Rollback() {Dispose transasctionScope object}
public BusinessObjectBase<T> LoadBusinessObject<T>(){ return business logic base of T entity} 
```

好吧，我正在寻找的是允许仅在事务中加入 businessLogicBase 的私人集合。因此，如果从另一个角度执行类似“PersonLogicBase.Insert(T item).. AND 我的事务将回滚”，则 PersonLogicBase.Insert(T item) 不会受到撤消操作的影响。

据我所知，实现这一目标的唯一方法是在分离的线程上实例化每个 BusinessTransaction 对象，但我会使用更好/更简单的解决方案。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:46:20.687

工作单元是业务交易。如果您需要在单独的事务中对给定类型执行所有操作，则需要该类型的工作单元的新实例。如果您共享您的工作单元，您也将共享业务交易。

# c# - 如何压缩流？

> ID：15630501
> 
> 赞同：-1
> 
> 时间：2013-03-26T06:13:48.717
> 
> 标签：c#, .net-1.1

我正在用 C# (.Net 1.1) 读/写一个流文件。我的文件太大，我想把它压缩成一个 zip 文件并保存这个 zip 文件。

如何压缩我的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:17:48.363

这里有几个链接可以帮助你（谷歌搜索 1 分钟）：

[SharpZipLib](http://www.icsharpcode.net/OpenSource/SharpZipLib/)

[底部看MSDN](http://msdn.microsoft.com/en-us/library/3z72378a%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:18:06.150

为此有一些第三方控制器。

目前，您可以参考以下链接以获取有关在 .net1.1 中压缩的更多指导

[.NET 的开源 zip 库？](https://stackoverflow.com/questions/374396/open-source-zip-library-for-net)

# iphone - UIAlertView 背景问题？

> ID：15630503
> 
> 赞同：0
> 
> 时间：2013-03-26T06:14:06.023
> 
> 标签：iphone, ios, objective-c, uialertview

我在课堂上使用 Uialertview。

这是我的代码

```
UIAlertView *alertView   = [[UIAlertView alloc]initWithTitle:nil message:@"message" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
[alertView show]; 
```

但问题是当我按下确定按钮时，警报隐藏了，但黑色背景仍然存在。

有人对此有答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:22:28.633

尝试这个。

```
 UIAlertView * alertView = [[[UIAlertView alloc] initWithTitle:@"" message:@"message" delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil] autorelease];
 [alertView show]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:19:56.267

在您的代码中`[[UIAlertView alloc]initWithTitle:nil @"message"` **应该** `initWithTitle:@"message"`

像这样，

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Your Title" message:@"Your Message Body !!" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:26:47.593

尝试，

```
UIAlertView *alertView   = [[UIAlertView alloc]initWithTitle:@"" message:@"message" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[alertView show]; 
```

# django - django tastepie：如何使用 url 参数控制相关字段“丰满度”？

> ID：15630506
> 
> 赞同：2
> 
> 时间：2013-03-26T06:14:22.447
> 
> 标签：django, tastypie

我正在使用 django sweetpie 将具有相关（ToOne）字段的模型发布到另一个模型资源。uri是： `/api/map/?format=json`

我想让客户端包含一个`full_pages`url 参数来获取完整的相关页面资源：`/api/map/?full_pages=1&format=json`

我不太了解[关系字段文档](https://django-tastypie.readthedocs.org/en/v0.9.12/fields.html?highlight=apifield#relationship-fields)，但我做了一个`get_full`可调用的：

```
def get_full(bundle):
    if bundle.request.GET.get('full_pages', 0):
        return True
    return False 
```

我尝试将可调用对象传递给以下`full`参数`ToOneField`：

```
from tastypie.contrib.gis import resources as gis_resources

class MapResource(gis_resources.ModelResource):
    page = fields.ToOneField('pages.api.PageResource', 'page', full=get_full) 
```

但是当我检查 pdb 时，`get_full`它永远不会被调用。

因此，我尝试`FillableToOneField`使用`full`属性创建自定义：

```
class FillableToOneField(fields.ToOneFIeld):
    full = get_full

class MapResource(ModelResource):
    page = FillableToOneField('pages.api.PageResource', 'page') 
```

同样，`get_full`从不调用。

有没有更好、更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:09:09.603

您可以通过以下方法简单地实现这一点`dehydrate`。

```
class MapResource(ModelResource):
    page = fields.ToOneField('pages.api.PageResource', 'page')

    def dehydrate(self, bundle):
        if bundle.request.Get.get('full_pages'):
            self.page.full = True
        return bundle 
```

并让他们发送请求`/api/map/?full_pages=True&format=json`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:14:27.403

在阅读[了 Amyth 的答案](https://stackoverflow.com/a/15632203/571420)和[django-boundaryservice 代码](https://github.com/newsapps/django-boundaryservice)之后，我通过在*相关*PageResource上的方法中默认完整`True`并更改它来实现它：`dehydrate`

 *```
class MapResource(gis_resources.ModelResource):
    page = fields.ToOneField('pages.api.PageResource', 'page', full=True) 
```

pages.api：

```
class PageResource(ModelResource):
    ...

    def dehydrate(self, bundle):
        if not bundle.request.GET.get('full_pages'):
            bundle = bundle.data['resource_uri']
        return bundle 
```*

# android - 维护活动的单个实例

> ID：15630514
> 
> 赞同：0
> 
> 时间：2013-03-26T06:15:04.953
> 
> 标签：android, button, android-activity

我的第一个活动中有按钮，称为开始。

现在，当我单击此按钮时，加载下一个活动需要 1 到 2 秒，现在用户多次单击开始按钮，所以下一个活动将打开多次。

如何克服这一点？即使用户多次单击“开始”按钮，是否有任何方法只打开一次活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:17:24.650

您可以在清单文件中将第二个活动的启动模式设置为“单实例”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:19:08.687

您的选择：

*   单击时，禁用该按钮并向`ProgressDialog`用户显示一个。
*   使用该`Intent`标志`FLAG_ACTIVITY_SINGLE_TOP`来确保堆栈上只维护一个活动。[文档](http://developer.android.com/reference/android/content/Intent.html)
*   `launchMode=singleInstance`在您的中使用限定符，因此一次只允许`AndroidManifest.xml`您的一个实例。[文档](http://developer.android.com/guide/topics/manifest/activity-element.html)`Activity`

我会推荐第一个，因为它可以向用户显示您的应用程序仍在工作，即使需要几秒钟来进行必要的处理以开始您的`Activity`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:29:21.847

不要使用类似 a`launchMode`或`Intent flags`. 它们用于不同的目的。

说明[在这里](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

你要做的是：

1.  显示进度对话框以清楚地向用户显示正在进行的操作（调用 2nd Activity）。这是用户不会尝试多次单击该按钮
2.  只需在第一次单击后禁用按钮的单击侦听器。不建议这样做，因为用户可能无法知道他/她是否单击了按钮。这也是用户倾向于多次单击按钮的情况。

# xcode - iPad 模拟器运行我的应用程序的旧版本

> ID：15630519
> 
> 赞同：1
> 
> 时间：2013-03-26T06:15:44.323
> 
> 标签：xcode, ipad, simulator

所以，在我第一次创建我的应用程序时，我匆忙创建了一个让我烦恼的可怕文件结构，所以我决定创建同一个应用程序的新版本，并从头开始在新文件中使用一些相同的旧东西. 当我在 iPad 模拟器中构建新应用程序时，即使我删除了对旧项目文件和文件夹的所有引用，模拟器也会运行旧应用程序。

不知道我能做些什么来让它运行我的应用程序的新版本而不是旧版本。有什么建议么？

iPad 模拟器运行的是我重新创建的旧版本的应用程序，而不是构建时的新版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:19:50.660

只需通过模拟器菜单删除模拟器中的旧应用程序/重置内容和设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:22:22.760

您不仅应该从模拟器中删除旧应用程序，而且如果您正在旧项目文件/工作区上构建新应用程序，请打开 Xcode 的 Organizer -> Projects，找到您的项目并将其删除，对您的项目进行清理，然后关闭Xcode 并重新打开它。这将确保你得到干净和完整的重建。

# c++ - 如何将其定义为宏？

> ID：15630520
> 
> 赞同：0
> 
> 时间：2013-03-26T06:15:47.767
> 
> 标签：c++, c, macros

```
case MAP_KEY3:
case MAP_KEY4:
case MAP_KEY5:
case MAP_KEY6:
    break;
default:
    LampShow(LampID, 0);
    LampShow(LampID, 2);
    LampShow(LampID, 0);
    break; 
```

我想制作上述代码的 MARCO，以便我可以在任何地方重复使用它。但是怎么办？它适用于 C 语言。

如果我这样做如下：

```
#define AAA /
    case MAP_KEY3:  /
    case MAP_KEY4:  /
    case MAP_KEY5:  /
    case MAP_KEY6:  /
        break;      /
    default:        /
        LampShow(LampID, 0);   /
        LampShow(LampID, 2);   /
        LampShow(LampID, 0);   /
        break; 
```

然后我会得到这个错误：

```
34: syntax error before `case' 
```

第 34 行是`case MAP_KEY3: /`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T06:21:26.253

```
#define EVIL_MACRO \
case MAP_KEY3: \
case MAP_KEY4: \
case MAP_KEY5: \
case MAP_KEY6: \
    break; \
default: \
    LampShow(LampID, 0); \
    LampShow(LampID, 2); \
    LampShow(LampID, 0); \
    break; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T06:17:49.850

> 我想制作上述代码的 MARCO，以便我可以在任何地方重复使用它

这就是函数的用途。

# bash - 在 if 语句中检查两个以上的条件

> ID：15630532
> 
> 赞同：1
> 
> 时间：2013-03-26T06:16:47.267
> 
> 标签：bash

如何在 bash shell 脚本中的 if 语句中给出两个或多个条件。这里我有一个名为`opt`. 如果`opt`值为`1`or`2`或`3`，则 if 块应执行 else 块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:23:37.670

```
if [[ $opt =~ ^[123]$ ]]
then
  echo foo
else
  echo bar
fi 
```

帽子提示[乔纳森·莱弗勒](https://stackoverflow.com/a/15630740)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:29:53.533

做到这一点的经典方法是`case`声明：

```
case "$opt" in
([123]) do-then-thing;;
(*)     do-else-thing;;
esac 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:22:06.497

您可以使用：

```
if [ cond1 ] || [ cond2]; then 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T06:22:38.740

可以使用 test 的 or 运算符（通常称为 [）

```
 opt=2; if test $opt -eq 1 -o $opt -eq 2; then echo "hello"; fi 
```

# java - 如何从另一个应用程序访问 java 类？

> ID：15630535
> 
> 赞同：0
> 
> 时间：2013-03-26T06:16:53.257
> 
> 标签：java

我有一个带有 netbeans 类的 java 包。我需要为 netbeans 中的另一个 java 应用程序导入这些包。但是包中的类没有 main 方法。我如何导入这些类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:27:17.663

您想在另一个应用程序/项目中导入这些类并使用 netbeans：
一种方法：

1\. 在创建新应用程序/项目时，您可以选择“**从现有资源创建项目**”。
2.选择存储的包（主要在我的文件夹中）

您将在新应用程序中看到这些软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:28:20.257

只需创建这些类的 jar 并在其他应用程序中导入/添加 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:18:02.447

您可以`import`在当前课程中使用。另一个包中的那些类不需要在其中包含主要方法。

**例如：-** `import package2.subpackage.ClassNameToBeImported;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:22:03.877

您不需要主类来导入包。

我举一个例子。

> 导入包.类名；

现在，您可以创建此类的对象并使用此对象调用方法。

您不需要主要课程。你试试看，告诉我发生了什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T06:25:44.180

使用 import 关键字导入包。

并且还要确保包含定义这些包的项目的类文件的 jar 文件或目录包含在使用它们的项目的类路径中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T06:29:31.650

为什么这里需要 main 方法。只需使用 import 语句然后调用相应的方法。main 方法只需要在运行单个类的情况下。

# list - 我们可以在通用列表中输入 cast 吗？

> ID：15630540
> 
> 赞同：0
> 
> 时间：2013-03-26T06:17:14.130
> 
> 标签：list, c#-3.0

我们可以在通用列表中进行类型转换，例如在字符串中创建列表并尝试添加和检索 int 值...例如：

```
class Program
{
    static void Main()
    {
    List<int> list = new List<int>();
    list.Add(2);
    list.Add(3);
    list.Add("prakash");
    list.Add("arun");
    }
    for (int i = 0; i < list.Count; i++) // Loop through List with for
    {
        Console.WriteLine(list[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-17T12:36:07.117

不，您不能将字符串添加到通用`List<int>`. 正如 Dmitry 指出的那样，您可以`int`在添加字符串之前尝试解析字符串。

您可以将 if 语句与 TryParse 一起使用，如下所示。

```
int theNumber;
if (int.TryParse("prakash", out theNumber))
{
    list.Add(theNumber);//Will not be added 
}

if (int.TryParse("42", out theNumber))
{
    list.Add(theNumber);//Will be added
} 
```

# bing-maps - 如何在 wp7 应用中将 Bing Map 试用密钥更改为企业密钥？

> ID：15630551
> 
> 赞同：0
> 
> 时间：2013-03-26T06:17:58.253
> 
> 标签：bing-maps, enterprise

我在我的一个应用程序中使用必应地图。我使用的必应地图密钥是试用密钥，现在我想将此密钥更改为企业。

如何将相同的密钥（试用密钥）更改为企业密钥。我需要支付多少费用才能将此试用密钥更改为企业密钥以及执行相同操作的步骤是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T22:49:16.197

首先，您需要将 Bing 地图帐户转换为企业帐户。为此，请联系 maplic@microsoft.com

完成此操作后，您可以进入 Bing 地图门户并创建企业 Bing 地图密钥，然后使用此新密钥更新您的应用程序。

企业密钥的成本取决于您的应用程序生成的事务数量及其应用程序的类型。

如果它是一个公开可用的应用程序并且每天生成少于 50,000 笔交易，那么请创建一个基本密钥，因为这将属于免费使用条款。

# javafx - 使用 setCellValueFactory 时 Javafx 多次调用获取方法

> ID：15630558
> 
> 赞同：0
> 
> 时间：2013-03-26T06:18:13.700
> 
> 标签：javafx, tableview, tablecolumn

为什么一个

```
tableColumn.setCellValueFactory(new PropertyValueFactory<Object1, Integer>("Number")); 
```

当我只向 tableView 添加一行时，方法多次调用 getNumber 方法？

number 字段在 object2 中，在 object1 中使用。所以这里 Object1 one 提供了一个 getNumber 方法，该方法获取存储在 object2 中的 arraylist 中的数字。

这是我的 getNumber 方法：

```
public double getNumber() {
    setNumber++;
    return sets.get(setNumber).getNumber();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:32:49.433

当 TableView 显示该值时，将获取该值。当您在检索时修改您的值时，您只是在这样做，并且您只需计算获取次数。

想象一下，您有一个 TableView，列表中有 10 个可见行和 20 个条目。当您向下和向上滚动时，将为新出现在可见区域中的行获取值。

如果你试试这个：

```
public class SO extends Application {
    public static class Item {
        final int v;
        Item(int v) { this.v = v; }
        public int getV() {
            System.out.println(v);
            return v;
        }
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        StackPane pane = new StackPane();
        Scene scene = new Scene(pane, 300, 100);
        primaryStage.setScene(scene);
        ObservableList<Item> list = FXCollections.observableArrayList();
        for (int i=0; i<20; i++) {
            Item item = new Item(i);
            list.add(item);
        }
        TableView<Item> tv = new TableView<>(list);
        TableColumn<Item, String> col = new TableColumn<>("Column");
        col.setCellValueFactory(new PropertyValueFactory<Item,String>("v"));
        tv.getColumns().add(col);
        pane.getChildren().add(tv);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }

} 
```

当将 TableView 滚动到最后时，它将在控制台中打印越来越多的数字。向后滚动时，它会打印递减的数字，因为它显示列表开头的值。部分输出：

```
5
6
7
8
9
9
2
2
1
1
0 
```

# android - 更改简单ListView多选Android的文本颜色

> ID：15630562
> 
> 赞同：5
> 
> 时间：2013-03-26T06:18:25.027
> 
> 标签：android, listview

我正在为板球开发一个应用程序。我的要求是这样的，如果我选择第 1 队，则必须显示可用国家名称列表，如果我选择国家名称为印度，则必须显示来自印度的球员名单，并且我从中选择了多个球员。我已经做了一切。但我的问题是我正在使用 android.R.layout.simple_list_item_multiple_choice 来选择玩家。我正在使用简单的列表视图，该列表的背景是黑色图像。我的列表视图就是这样

```
 <ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="8.5"
    android:cacheColorHint="#00000000" 

     /> 
```

现在的问题是 listview 值显示为黑色。我已经有黑色背景图片。并且该值也是黑色的。所以它看起来不太好。如何在不更改自定义适配器的情况下将列表视图值的颜色更改为白色。

这是我的适配器类

```
 adapter=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_multiple_choice,playersName);
    lvview.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    lvview.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T06:47:04.090

您必须创建 Custome`TextView`来更改 all 的颜色`ListView items`，而不是将默认值传递`android.R.layout.simple_list_item_multiple_choice`给`ArrayAdapter`您应该传递具有不同 TextColor 属性的自定义列表项 XML。

例如，在文件夹 Layout 下创​​建 custom_list_item.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
   <CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/textView"
       android:layout_width="fill_parent"
       android:layout_height="?android:attr/listPreferredItemHeight"
       android:textAppearance="?android:attr/textAppearanceLarge"
       android:gravity="center_vertical"
       android:checkMark="?android:attr/listChoiceIndicatorSingle"
       android:paddingLeft="6dip"
       android:paddingRight="6dip"
       android:textColor="#FF00FF"
       /> 
```

然后将其传递给适配器，如下所示：

```
 new ArrayAdapter<String>(this, R.layout.custom_list_item, playersName); 
```

**编辑：**

这是我测试过的运行良好的代码。

> ```
>  lv.setAdapter(new ArrayAdapter<String>(this, R.layout.custom_list_item, playersName));
>     lv.setBackgroundColor(Color.BLACK);
>     lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
>     lv.setOnItemClickListener(new OnItemClickListener()
>     {
>         @Override
>         public void onItemClick(AdapterView<?> p_arg0, View p_arg1, int p_arg2, long p_arg3)
>         {
>              my_sel_items = new String("Selected Items");
>                 SparseBooleanArray a = lv.getCheckedItemPositions();
>                 for (int i = 0; i < a.size(); i++) {
>                     if (a.valueAt(i)) {
>                         my_sel_items = my_sel_items + ","
>                                 + (String) lv.getAdapter().getItem(i);
>                     }
>                 }
>                 Log.v("values", my_sel_items);
>         }
>     }); 
> ```

列表视图的布局

> ```
>  <ListView
>                       android:id="@+id/android:list"
>                       android:layout_marginTop="60dip"
>                       android:layout_width="fill_parent"
>                       android:layout_height="fill_parent"
>                       android:textColor="#000000"
>                      /> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:55:04.923

检查以下代码：

```
package com.example.mapsdemo;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.util.SparseBooleanArray;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Spinner;

public class MainActivity extends Activity {

    ArrayList<String> a = new ArrayList<String>();

    private ListView lView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        fillarray();
        lView = (ListView) findViewById(R.id.listView1);
        lView.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_multiple_choice, a));
        lView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        lView.setOnItemClickListener(new OnItemClickListener() {

            private String my_sel_items;

            public void onItemClick(AdapterView arg0, View arg1, int arg2,
                    long arg3) {
                // List list = new ArrayList();
                my_sel_items = new String("Selected Items");
                SparseBooleanArray a = lView.getCheckedItemPositions();

                for (int i = 0; i < a.size(); i++) {
                    if (a.valueAt(i)) {
                        my_sel_items = my_sel_items + ","
                                + (String) lView.getAdapter().getItem(i);
                    }
                }
                Log.v("values", my_sel_items);
            }
        });
    }

    private void fillarray() {
        // TODO Auto-generated method stub
        a.clear();
        a.add("a");
        a.add("b");
        a.add("c");
        a.add("d");
        a.add("e");

    }

} 
```

你在日志中的结果

```
03-26 12:25:06.106: V/values(3301): Selected Items,a
03-26 12:25:06.810: V/values(3301): Selected Items,a,b
03-26 12:25:07.466: V/values(3301): Selected Items,a,b,c
03-26 12:25:08.136: V/values(3301): Selected Items,a,b,c,d 
```

**编辑：**

检查此[链接](http://dj-android.blogspot.in/2013/02/multi-selection-listview-android-with.html)，您可以在此代码中使用任何字体颜色和列表视图背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T21:43:03.180

[Luksprog](https://stackoverflow.com/questions/9460407/change-text-color-for-listview-items)解决方案是可以接受的，并不困难。但是没有线

```
if (position == 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:23:39.653

样式.xml

```
 <?xml version="1.0" encoding="utf-8"?> 
    <resources> 
    ...other styles 
```

//添加这个

```
 <style name="ListFont" parent="@android:style/Widget.ListView">
    <item name="android:textColor">#FFFFFF</item>
    </style> 

     ...other styles

    </resources> 
```

在布局 xml 中将此属性放入`style="@style/ListFont"`listview

# javascript - 即使在离线模式下也能保持服务器时间 (javascript/html5)

> ID：15630565
> 
> 赞同：0
> 
> 时间：2013-03-26T06:18:34.997
> 
> 标签：javascript, html, date, timestamp, offline

我被困在一个设计场景中，我有一个基于 javascript/html5 的应用程序，它在**离线模式下运行**。它是基于浏览器的，并且会发生一些粗鲁的操作。

现在，在**离线模式下**，我想在我的应用程序中维护**服务器时间**。我的 crud 操作等将需要此服务器时间

在本地运行时如何使用**javascript/html5维护****服务器时间？**

 **注意：应用程序第一次联系服务器并下载一些数据，所以我也可以获取时间。

**

***我无法使用设备的本地时间计算服务器时间，因为用户可以更改设备的时间并创建欺诈条目。***

**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:28:03.277

你不能，没有办法阻止用户更改设备上的时间，如果你没有网络连接，你也无法联系在线服务器。

如果可验证的审核至关重要，那么您应该记录更新到达服务器的时间，而不是尝试记录更新到达设备的时间。当然，没有什么能阻止你同时做这两件事。**

# objective-c - 如何从实用程序 nsobject 类中的 uiviewcontroller 调用方法

> ID：15630569
> 
> 赞同：0
> 
> 时间：2013-03-26T06:18:57.910
> 
> 标签：objective-c, methods, uiviewcontroller, import, nsobject

如何将方法从我的 uiviewcontroller 导入到 nsobject 的实用程序类（我在 viewcontroller 中使用它来调用常用方法？）我有大量需要调用相同方法的视图控制器。

我需要使用 NSInvocation 吗？我应该使用不同的东西，比如协议和委托吗？

如果不通过实用程序类访问该方法，我只会得到“NSInvalidArgumentException”

这是我需要使用的基本结构。

实用程序类 - .h

```
#import <Foundation/Foundation.h>

@interface utilityClass : NSObject
- (void) swipeLoad: (UIView*)myview;

@end 
```

.m

```
#import "utilityClass.h"

@implementation utilityClass

- (void) swipeLoad: (UIView*) myview
{
    UISwipeGestureRecognizer *oneFingerSwipeRight =
    [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeRight:)];
    [oneFingerSwipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
    [myview addGestureRecognizer:oneFingerSwipeRight];

    UISwipeGestureRecognizer *oneFingerSwipeLeft =
    [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeLeft:)];
    [oneFingerSwipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [myview addGestureRecognizer:oneFingerSwipeLeft];

    UISwipeGestureRecognizer *twoFingerSwipeRight =
    [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(twoFingerSwiperight:)];
    [twoFingerSwipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
                twoFingerSwipeRight.numberOfTouchesRequired = 2;
    [myview addGestureRecognizer:twoFingerSwipeRight];

    UISwipeGestureRecognizer *twoFingerSwipeLeft =
    [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(twoFingerSwipeLeft:)];
    [twoFingerSwipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    twoFingerSwipeLeft.numberOfTouchesRequired = 2;
    [myview addGestureRecognizer:twoFingerSwipeLeft];
            }

@end 
```

视图控制器 - .h

```
#import <UIKit/UIKit.h>
#import "utilityClass.h"

@class utilityClass;

@interface viewController : UIViewController
{
   utilityClass *utilityClass;
}

@property (nonatomic, retain) utilityClass*utilityClass;

@end 
```

.m

```
#import "viewcontroller.h"

@interface viewcontroller ()

@end

@implementation viewcontroller

@synthesize utilityClass = _utilityClass;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.utilityClass = [[utilityClass alloc] init];

    [self.utilityClass swipeLoad:self.view];

}

- (void)twoFingerSwiperight:(UISwipeGestureRecognizer *)recognizer {
                //[self another_method]
}

- (void)twoFingerSwipeLeft:(UISwipeGestureRecognizer *)recognizer {
                //[self another_method]
}

- (void)oneFingerSwipeRight:(UISwipeGestureRecognizer *)recognizer {
                //[self another_method]
}

- (void)oneFingerSwipeLeft:(UISwipeGestureRecognizer *)recognizer {
    //[self another_method]
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:57:14.393

听起来你最好继承 UIViewController 并将你的滑动方法放在那里。然后让所有视图控制器成为新子类的子类（在下面的示例中，您的视图控制器将是`MyViewController`.

然后，您将完全摆脱您的实用程序类。

// MyViewController.h

```
#import <UIKit/UIKit.h>

@implementation MyViewController : UIViewController

@end 
```

// MyViewController.m

```
@implementation MyViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    UISwipeGestureRecognizer *oneFingerSwipeRight =
    [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeRight:)];
    [oneFingerSwipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
    [self.view addGestureRecognizer:oneFingerSwipeRight];

    UISwipeGestureRecognizer *oneFingerSwipeLeft =
    [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeLeft:)];
    [oneFingerSwipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [self.view addGestureRecognizer:oneFingerSwipeLeft];

    UISwipeGestureRecognizer *twoFingerSwipeRight =
    [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(twoFingerSwiperight:)];
    [twoFingerSwipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
    twoFingerSwipeRight.numberOfTouchesRequired = 2;
    [self.view addGestureRecognizer:twoFingerSwipeRight];

    UISwipeGestureRecognizer *twoFingerSwipeLeft =
    [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(twoFingerSwipeLeft:)];
    [twoFingerSwipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    twoFingerSwipeLeft.numberOfTouchesRequired = 2;
    [self.view addGestureRecognizer:twoFingerSwipeLeft];
}

- (void)oneFingerSwipeRight:(UISwipeGestureRecognizer *)recognizer {
    // Your code here
}

- (void)oneFingerSwipeLeft:(UISwipeGestureRecognizer *)recognizer {
    // Your code here
}

- (void)twoFingerSwiperight:(UISwipeGestureRecognizer *)recognizer {
    // Your code here
}

- (void)twoFingerSwipeLeft:(UISwipeGestureRecognizer *)recognizer {
    // Your code here
}

@end 
```

另外，一个旁注。建议类名以大写字母开头，变量和函数以小写字母开头。它有助于使您的代码更具可读性。

# c# - 如何连接两个表列名并在 linq 中产生一个结果

> ID：15630571
> 
> 赞同：-2
> 
> 时间：2013-03-26T06:18:59.267
> 
> 标签：c#, asp.net-mvc, linq

需要清除对 linq 的一个疑问

```
public List<SelectListItem> GetAttributeName() 
{ 
   var attri = (from z in _entities.Attributes 
                select z).AsEnumerable()
               .Select(z => new SelectListItem { 
       Text = z.AttributeName + " (" + z.AttributeType.AttributeTypeCode + ")", 
       Value = z.AttributeID.ToString() 
               }); 

  return attri.ToList(); 
} 
```

在这条线上

```
Text = z.AttributeName + " (" + z.AttributeType.AttributeTypeCode + ")", 
```

输出将是..像这样..

```
abcd (efgh)
ijkl(mnop)
qrst(uvwx) 
```

但我需要输出是

```
abcd
ijkl
qrst
efgh
mnop
uvwx 
```

如何做到这一点..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:30:31.240

```
public List<SelectListItem> GetAttributeName() 
{ 
   return _entities.Attributes
                   .Select(a => new SelectListItem {
                         Text = a.AttributeName,
                         Value = a.AttributeID.ToString() })
                   .Concat(_entities.Attributes.AsEnumerable()
                                   .Select(a => new SelectListItem {
                         Text = a.AttributeType.AttributeTypeCode.ToString(),
                         Value = a.AttributeID.ToString() })
                   .ToList();
} 
```

或单次查询数据库（上一个示例将查询数据库两次）：

```
public List<SelectListItem> GetAttributeName() 
{ 
   var attributes = _entities.Attributes
                             .Select(a => new { 
                                  a.AttributeName,
                                  a.AttributeType.AttributeTypeCode,
                                  a.AttributeID
                             }).ToList();

   return attributes.Select(a => new SelectListItem {
                         Text = a.AttributeName,
                         Value = a.AttributeID.ToString() })
                    .Concat(attributes.Select(a => new SelectListItem {
                         Text = a.AttributeTypeCode.ToString(),
                         Value = a.AttributeID.ToString() })
                    .ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:21:30.327

我刚刚使用了这个查询并完美地得到了值..

```
var attributes = _entities.Attributes.ToList().Select(a => new SelectListItem
                    {
                        Text = a.AttributeName,
                        Value = a.AttributeID.ToString()
                    }).Concat(_entities.AttributeTypes.ToList().Select(a => new SelectListItem
                    {
                        Text = a.AttributeTypeCode,
                        Value = a.AttributeTypeID.ToString()
                    }).Distinct().ToList());

                    return attributes.ToList(); 
```

# sql - 对两个单独的列使用 distinct 和 case

> ID：15630574
> 
> 赞同：1
> 
> 时间：2013-03-26T06:19:06.780
> 
> 标签：sql, count, distinct, case

我使用以下代码按年计算案例：

```
COUNT(CASE WHEN Year(FilingDate)=2008 THEN 1 ELSE NULL END) AS '2008' 
```

我只想在另一列不同时计算这些情况。另一列称为“归档日期”，我想它看起来像这样：

```
COUNT(CASE distinct (DocketNumber) WHEN Year(FilingDate)=2008 THEN 1 ELSE NULL END) AS '2008', 
```

样本记录：

案卷编号归档日期

123 2008

123 2008

123 2008

111 2009

112 2009

我只想收到 = 1 有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:14:22.060

将选项与[SUBQUERY](http://msdn.microsoft.com/en-us/library/ms189575%28v=sql.105%29.aspx)和[GROUP BY](http://msdn.microsoft.com/en-us/library/ms177673.aspx)子句一起使用

```
SELECT COUNT(CASE WHEN YearFilingDate = 2008 THEN 1 END) AS '2008'
FROM
 (      
  SELECT Year(FilingDate) AS YearFilingDate, DocketNumber
  FROM dbo.test55
  GROUP BY Year(FilingDate), DocketNumber
  ) x 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/08879/1)上的演示[](http://sqlfiddle.com/#!3/08879/1)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:29:00.430

```
SELECT COUNT(CASE WHEN Year(FilingDate)=2008 THEN 1 ELSE NULL END) AS '2008'
GROUP BY DocketNumber 
```

或许。**

# python - OpenERP自己的前缀序列

> ID：15630578
> 
> 赞同：1
> 
> 时间：2013-03-26T06:19:26.810
> 
> 标签：python, xml, openerp

如何在 openerp 7 中创建序列号，如下所示

它已经支持

```
<field name="prefix">STJ/%(year)s/</field> 
```

但我需要添加自己的记录并像这样创建

```
<field name="prefix">%(employer_no)s/</field> 
```

雇主_在我的表格中没有提及

请在这里参考我的代码 [https://github.com/priyankahdp/openerp/blob/openerp/](https://github.com/priyankahdp/openerp/blob/openerp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:28:19.997

我认为将自定义变量注入序列插值的唯一机会是[`interpolation_dict`覆盖`ir.sequence`](http://bazaar.launchpad.net/~openerp/openobject-server/7.0/view/head:/openerp/addons/base/ir/ir_sequence.py#L179)

# c# - 将映射封装在不同的类中

> ID：15630579
> 
> 赞同：1
> 
> 时间：2013-03-26T06:19:26.913
> 
> 标签：c#, linq

我想对查询进行 LINQ 投影。为此，我使用[LINQ Projector](http://linqprojector.codeplex.com/)库。该项目的灵感来自 Paul Hiles 的这篇[文章](http://www.devtrends.co.uk/blog/stop-using-automapper-in-your-data-access-code)。

该库允许您进行以下操作：

```
public class Blog
{
   public int Id {get;set;}
   public string Name {get;set;}
   public ICollection<Post> Posts {get;set;}
}

public class BlogView
{
   public int Id {get;set;}
   public string BlogName {get;set;}
   public int NumberOfPosts {get;set;}
}

var person = new DataContext().Blog.Project().To<BlogView>(
   //custom mappings
    m=>m
   .Map(t=>t.BlogName, s=>s.Name)
   .Map(t=>t.NumberOfPosts, s=>s.Posts.Count());       
).First(); 
```

我喜欢它，但我想将自定义映射封装在类中。该方法`To` 可以接受`Action<Mapper<Person, PersonView>>`此示例。

什么是最好和灵活的方法？（所有映射类的基类，泛型）

# jquery - 将 JSON 响应传递给 Highcharts 基本折线图

> ID：15630583
> 
> 赞同：0
> 
> 时间：2013-03-26T06:19:44.783
> 
> 标签：jquery, ajax, json, highcharts

阿贾克斯调用：

```
var dataString = "params="+globalData.cmpThemesData;
$.ajax( {
    type : "POST",
    url : e + "/home/comparethemes",
    dataType : JSON,
    data : dataString,
    beforeSend : function() {
    },
    success : function(data) {

        $.each(data, function(key, value) {

            var series = {}; 
            series.name = value.name;
            series.data = value.value;
            basicLineptions.series.push(series);
        });

            var chart = new Highcharts.Chart(basicLineptions);  
    }
}); 
```

来自 Ajax 调用的 JSON 响应：

```
[{
    "name": "Name1",
    "data": "33100,33100,33100,27100,27100,27100,33100,27100,27100,33100,27100,0"
},
{
    "name": "Name 2",
    "data": "33100,33100,33100,27100,27100,27100,33100,27100,27100,33100,27100,0"
},
{
    "name": "Name 3",
    "data": "33100,27100,33100,33100,33100,27100,27100,22200,27100,33100,74000,0"
},
{
    "name": "Name 4",
    "data": "18100,22200,33100,22200,14800,12100,18100,22200,12100,9900,14800,0"
}] 
```

基本线图选项：

```
 var basicLineptions = { 
 chart: {
 renderTo: 'content',
type: 'line',
marginRight: 130,
marginBottom: 25
},
title: {
text: 'Compare Theme Data',
x: -20 //center
},
subtitle: {
text: '',
x: -20
},
xAxis: {
categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun','Jul', 'Aug', 'Sep', 'Oct',         'Nov', 'Dec']
},
yAxis: {
title: {
    text: 'Search Volumes'
},
plotLines: [{
    value: 0,
    width: 1,
    color: '#808080'
}]
},
tooltip: {
valueSuffix: ''
},
legend: {
layout: 'vertical',
align: 'right',
verticalAlign: 'top',
x: -10,
y: 100,
borderWidth: 0
},
series: [],
exporting: {
   enabled: false
}
}; 
```

如何将此 JSON 响应传递给 Highcharts 基本折线图以比较 Jquery 中的数据？

[基本折线图数据对比图](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/)

这就是我试图通过的方式：

```
$.each(data, function(key, value){
   var series = {};
   series.name = data.name;
   series.data = data.value;
   basicLineptions.series.push(series);
});
var chart = new Highcharts.Chart(basicLineptions); 
```

谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:28:35.670

你应该试试这个：

```
$.each(data, function(key, value) {
   var series = {};     //-^---^---------this should be used to refer the data.
       series.name = value.name; //<-----data should be referenced by value here
       series.data = parseInt(value.value); //<----here data is the key in the json.
       basicLineptions.series.push(series);
});
var chart = new Highcharts.Chart(basicLineptions); 
```

在这里，您必须按函数回调中提供的值引用数据，然后初始化图表。

* * *

### 更新：

您需要使用以下内容进行更新：

```
var dataString = {"params":globalData.cmpThemesData}; //<---this one send obj
$.ajax({
type : "POST",
url : e + "/home/comparethemes",
dataType : "JSON", //<-------------this one "" should be in quotes
data : dataString,
beforeSend : function() {},
success : function(data) {
    $.each(data, function(key, value) {
        var series = {}; 
        series.name = value.name;
        series.data = parseInt(value.value);
        basicLineptions.series.push(series);
    });
    var chart = new Highcharts.Chart(basicLineptions);  
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:46:43.460

我认为问题出在您的数据（value.value）上。这看起来像一个字符串，它应该是一个数组。尝试：

```
series.data=value.value.split(","); 
```

# android - 使用 Dagger 进行 Android 功能测试

> ID：15630589
> 
> 赞同：12
> 
> 时间：2013-03-26T06:19:53.657
> 
> 标签：android, dependency-injection, mockito, functional-testing, dagger

我正在尝试使用 Mockito & [Dagger](http://square.github.com/dagger/)测试 Activity 。我已经能够在我的应用程序中向 Activity 注入依赖项，但是在测试 Activity 时，我无法向 Activity 注入模拟。我应该注入 Activity 来测试还是让 getActivity() 创建它？

```
public class MainActivityTest extends
    ActivityInstrumentationTestCase2<MainActivity> {

@Inject Engine engineMock;
private MainActivity mActivity;
private Button mLogoutBtn;

public MainActivityTest() {
    super(MainActivity.class);
}

@Override
protected void setUp() throws Exception {
    super.setUp();

    // Inject engineMock to test
    ObjectGraph.create(new TestModule()).inject(this);
}

@Override
protected void tearDown() {
    if (mActivity != null)
        mActivity.finish();
}

 @Module(
 includes = MainModule.class,
 entryPoints = MainActivityTest.class,
 overrides = true
 )

static class TestModule {
    @Provides
    @Singleton
    Engine provideEngine() {
        return mock(Engine.class);
    }
}

@UiThreadTest
public void testLogoutButton() {

    when(engineMock.isLoggedIn()).thenReturn(true);

    mActivity = getActivity();
    mLogoutBtn = (Button) mActivity.findViewById(R.id.logoutButton);

    // how to inject engineMock to Activity under test?
    ObjectGraph.create(new TestModule()).inject(this.mActivity);

    assertTrue(mLogoutBtn.isEnabled() == true);
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T08:55:12.503

我使用 Mockito 和 Dagger 进行功能测试。关键概念是您的测试类继承自 ActivityUnitTestCase，而不是 ActivityInstrumentationTestCase2；后一个超类调用 Activity 的 onStart() 生命周期方法阻止您注入测试加倍依赖项，但使用第一个超类，您可以更细粒度地处理生命周期。

您可以在以下位置查看我使用 dagger-1.0.0 和 mockito 测试活动和片段的工作示例：

[https://github.com/IIIRepublica/android-civicrm-test](https://github.com/IIIRepublica/android-civicrm-test)

被测项目位于：

[https://github.com/IIIRepublica/android-civicrm](https://github.com/IIIRepublica/android-civicrm)

希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T22:17:35.240

我已经把所有东西放在一起并制作了演示应用程序，展示了如何用匕首进行测试：[https ://github.com/vovkab/dagger-unit-test](https://github.com/vovkab/dagger-unit-test)

这是我以前的答案，其中包含更多详细信息：
[https ://stackoverflow.com/a/24393265/369348](https://stackoverflow.com/a/24393265/369348)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:57:41.987

我做了一些更多的实验，发现 Dagger 在注入测试时无法正确创建活动。在新版本的测试中，testDoSomethingCalledOnEngine 通过了，但没有在 MainActivity 上调用 onCreate。第二个测试，testDoSomethingUI 失败，实际上有两个 MainActivity 实例，onCreate 被调用到另一个实例（由我的 ActivityInstrumentationTestCase2 创建）而不是另一个实例。也许 Square 的开发人员只考虑使用 Robolectric 测试[Activites](http://pivotal.github.io/robolectric/)而不是 Android 仪器测试？

```
public class MainActivityTest extends
    ActivityInstrumentationTestCase2<MainActivity> {

@Inject Engine engineMock;
@Inject MainActivity mActivity;

public MainActivityTest() {
    super(MainActivity.class);
}

@Override
protected void setUp() throws Exception {
    super.setUp();

    // Inject engineMock to test & Activity under test
    ObjectGraph.create(new TestModule()).inject(this);
}

 @Module(
 includes = MainModule.class,
 entryPoints = MainActivityTest.class,
 overrides = true
 )

static class TestModule {
    @Provides
    @Singleton
    Engine provideEngine() {
        return mock(Engine.class);
    }
}

public void testDoSomethingCalledOnEngine() {
    when(engineMock.isLoggedIn()).thenReturn(true);
    mActivity.onSomethingHappened();
    verify(engineMock).doSomething();
}

@UiThreadTest
public void testDoSomethingUI() {
    when(engineMock.isLoggedIn()).thenReturn(true);
    mActivity.onSomethingHappened();
    Button btn = (Button) mActivity.findViewById(R.id.logoutButton);
    String btnText = btn.getText().toString(); 
    assertTrue(btnText.equals("Log out"));  
} 
```

}

# jmeter - 使用 Jmeter 的数据关联和并发用户

> ID：15630594
> 
> 赞同：0
> 
> 时间：2013-03-26T06:20:08.533
> 
> 标签：jmeter

这是纳雷什。看来这个博客对初学者和所有人都很有帮助。

我为 Perf 选择了 Jmeter。测试基于 Web 的应用程序，它是使用环境构建的 - Microsoft dot net(Asp.net 3.5 with C#)。Jmeter会帮助我吗？

我做了一些示例记录，例如登录和搜索。

场景 1 - 登录

在这里，我记录了登录，然后使用 CSV 配置文件进行了参数化。

并在稍后执行。

由于我对 exp 的操作不多，我是否需要在上述配置中添加任何内容才能完美运行它。例如添加 HTTP cookie 管理器或 ?????

如何运行并发用户？

场景二：

在这里，我已经登录-login.aspx 记录给定搜索-search.aspx 记录结果会以表格形式显示在搜索的正下方-(same)search.aspx 记录

我想为 100 个同时搜索运行它。我了解如何传递 CSV 文件。

我确信执行这个场景需要做一些事情。

如果是，我是否需要进行数据关联？这个怎么做？

我需要添加HTTP cookie管理器还是HTTP缓存管理器......

请各位大侠帮忙，不胜感激：）

纳雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T09:54:34.077

是的，您必须添加 HTTP Cookie 管理器和 HTTP 缓存管理器

# json - 在 extjs 中如何使 validate json

> ID：15630595
> 
> 赞同：1
> 
> 时间：2013-03-26T06:20:10.347
> 
> 标签：json, extjs4

我在 extjs+yii 工作。我的看法是——

```
Ext.define('Balaee.view.qb.qbqns.QbqnsView',
{
        extend:'Ext.view.View',
        id:'qbqnsViewId',
        alias:'widget.QbqnsView',
        store:'qb.QbqnsStore',
        autoScroll: true,
        config:
        {
            tpl:'<tpl for=".">'+
                '<div id="main">'+
                '</br>'+
            //  '<b>Question :-</b> {pollQuestion}</br>'+
                '<h1 id="q">Question :-</h1> {question} </br>'+

                '<tpl for="options">'+     // interrogate the kids property within the data
                 '<p>&nbsp&nbsp<input type="radio" name="{parent.questionId}" value="{optionId}">&nbsp{option}</p>'+
                //'<p>&nbsp&nbsp<input type="radio" name="{questionId}">&nbsp{option}</p>'+
                '</tpl></p>'+
                '<p>---------------------------------------------------------</p>'+
                '</div>'+
                '</tpl>',
            itemSelector:'div.main' 
        }
});// End of login class 
```

此视图显示问题及其相关选项。现在，在选择答案并单击提交按钮后，我想发送 Questionid 及其选择的单选按钮选项。随着数据采用 json 格式，我正在捕获这些选定的单选按钮值，制作 jsons，然后将其作为参数传递。所以在控制器中，我将代码编写为-

```
var answers = '{"data":[';
        var i=0;
        QbqnsStore.each(function(model){
            i++;
            var inputs = document.getElementsByName(model.get('questionId'));
            console.log(document.getElementsByName(model.get('questionId')));
            console.log("length is"+inputs.length);
            for (var j = 0; j < inputs.length; j++) {
                if (inputs[j].checked) {
                    console.log("count of store is"+QbqnsStore.count());
                    //if (i == QbqnsStore.count()){
                    if (i == QbqnsStore.count()){
                        console.log("value of i is"+i);
                        answers = answers + '{"paperId":"'+paperNumber+'","userId":"'+userId+'","questionId":"'+inputs[j].name+'","option":'+inputs[j].value+'}'
                    //i=1;
                    }
                    else{
                        console.log("value of i is"+i);
                        answers = answers + '{"paperId":"'+paperNumber+'","userId":"'+userId+'","questionId":"'+inputs[j].name+'","option":'+inputs[j].value+'},'
                    }
                }
            }// End of inner for loop
        }); //End of each

        answers =answers+']}';
        console.log("selected data is:");
        console.log(answers);
        var storeObject=this.getStore('qb.QbquestionoptionStore');
        storeObject.load({

            params:{
                data: answers 
            },
            callback: function(records,operation,success){

            },
            scope:this
        }); 
```

当用户解决所有问题时，它可以正常工作。在解决所有问题的情况下，上述函数正在形成 json as-

```
{"data":[{"paperId":"1517","userId":"116","questionId":"1","option":1},{"paperId":"1517","userId":"116","questionId":"2","option":4},{"paperId":"1517","userId":"116","questionId":"3","option":9},{"paperId":"1517","userId":"116","questionId":"4","option":9}]} 
```

它的格式正确。但是当用户只从纸上解决前一个或两个问题时，它会形成 json as-

```
{"data":[{"paperId":"1518","userId":"116","questionId":"2","option":4},]} 
```

即在 json 末尾插入额外的逗号，这使得 json 无效。那么当用户只解决一个或两个问题时，如何从 json 中删除这个额外的逗号。请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:45:48.030

我认为你的情况永远不是真的。你有没有尝试过 ：

```
if (i == QbqnsStore.count() - 1){ 
```

代替

```
if (i == QbqnsStore.count()){ 
```

?

# iphone - 遇到了一些我不知道的代码语法。谁能解释

> ID：15630597
> 
> 赞同：0
> 
> 时间：2013-03-26T06:20:16.177
> 
> 标签：iphone, ios, objective-c

这段代码是

```
_gradientLayer.locations = @[@0.00f, @0.01f, @0.95f, @1.00f]; 
```

我知道它声明了一个数组，但是我在哪里可以找到任何参考来阅读更多关于它的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:24:50.790

这是 Obj-c 中新增的文字。

> Apple 编译器版本的用户可以从 Apple LLVM Compiler 4.0 开始使用这些功能。从 clang v3.1 开始，开源 LLVM.org 编译器版本的用户可以使用这些功能。

您可以在运行 XCode4.4 及更高版本的编译器中找到它。

[在这里](http://clang.llvm.org/docs/ObjectiveCLiterals.html)找到完整的参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:21:24.477

_gradientLayer 是一个 CAGradient 层，您必须定义位置和颜色数组才能将渐变添加到渐变层。

```
CAGradientLayer *layer = [CAGradientLayer layer];
layer.colors = [NSArray arrayWithObjects:
                (id)[[UIColor darkKinepolisColor] CGColor],
                (id)[[UIColor lightKinepolisColor] CGColor],
                (id)[[UIColor lightKinepolisColor] CGColor],
                (id)[[UIColor darkKinepolisColor] CGColor],
                nil];
layer.locations = [NSArray arrayWithObjects:
                   [NSNumber numberWithFloat:0.00],
                   [NSNumber numberWithFloat:0.01],
                   [NSNumber numberWithFloat:0.95],
                   [NSNumber numberWithFloat:1.0],
                   nil]; 
```

在这里它像

```
_gradientLayer.locations = @[@0.00f, @0.01f, @0.95f, @1.00f];
_gradientLayer.colors = @[(id)[[UIColor darkKinepolisColor] CGColor],
            (id)[[UIColor lightKinepolisColor] CGColor],
            (id)[[UIColor lightKinepolisColor] CGColor],
            (id)[[UIColor darkKinepolisColor] CGColor]]; 
```

旧的数组方式被新的注释取代

# mongodb - 更新 miniMongo 时出错

> ID：15630598
> 
> 赞同：0
> 
> 时间：2013-03-26T06:20:18.363
> 
> 标签：mongodb, meteor

最初，我有一个像这样的嵌套对象：
db.insert{a:1, b:2, c:{}}
我想将内容插入到对象 c 中。所以我使用以下内容：
db.update({a:1}, {$set: {c: {one: 1, two: 2, three: 3}}})

但是，我不断收到错误消息。如何为嵌套对象进行插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:17:36.090

在 Meteor 中，您需要像这样在全局范围内初始化 MongoDB 集合，

`YourCollection = new Meteor.Collection("yourcollection")`

请记住，这需要在全局范围内，这意味着您需要将其添加到客户端或服务器代码之外，以便两者都可以访问此集合。

那么你可以这样做，

`YourCollection.insert({ a: 1, b: 2 })`

`c`如果字段不包含任何对象，则无需添加字段。这就是 MongoDB 的强大之处。

从 0.5.8 开始，Meteor 不允许您使用任意 Mongo 选择器从客户端更新文档。要了解有关此内容的更多信息，请阅读[理解“不允许。不受信任的代码只能通过 ID 更新文档。” 流星错误](https://stackoverflow.com/questions/15464507/understanding-not-permitted-untrusted-code-may-only-update-documents-by-id-m/15465286#15465286)。所以你可以选择使用`Meteor.methods`.

但是，如果您想从客户端更新，您仍然可以这样做，

`YourCollection.update( { _id: "tdMrJojHyxWQ8tr6w" }, { $set : { one: 1, two: 2, three: 3 } } )`

# c# - WinRT Xaml：点击网格中的单个元素

> ID：15630602
> 
> 赞同：0
> 
> 时间：2013-03-26T06:20:35.440
> 
> 标签：c#, xaml, windows-runtime

我希望能够单独找出哪些子网格作为更大网格的一部分被点击。每个子网格都在单独的列和行中，我正在尝试做一些简单的事情，我处理通过不同事件处理程序点击的各个网格。我究竟做错了什么？我只能让整个网格在被点击时触发事件处理程序，但我想要的是事件处理程序“row0col0_Tapped”仅在外部网格的第 0 行和第 0 列的那部分被点击时触发。

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}" IsTapEnabled="True">
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <Grid IsTapEnabled="True" Grid.Row="0" Grid.Column="0" Tapped="row0col0_Tapped">
        <Canvas x:Name="row0col0"></Canvas>
    </Grid>
    <Grid IsTapEnabled="True" Grid.Row="0" Grid.Column="1"></Grid>
    <Grid IsTapEnabled="True" Grid.Row="0" Grid.Column="2"></Grid>

    <Grid IsTapEnabled="True" Grid.Row="2" Grid.Column="0"></Grid>
    <Grid IsTapEnabled="True" Grid.Row="2" Grid.Column="1"></Grid>
    <Grid IsTapEnabled="True" Grid.Row="2" Grid.Column="2"></Grid>

    <Grid IsTapEnabled="True" Grid.Row="2" Grid.Column="0"></Grid>
    <Grid IsTapEnabled="True" Grid.Row="2" Grid.Column="1"></Grid>
    <Grid IsTapEnabled="True" Grid.Row="2" Grid.Column="2"></Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:24:58.983

请为要点击的网格设置透明背景。

```
 <Grid IsTapEnabled="True" Background="Transparent" Grid.Row="0" Grid.Column="0"   Tapped="row0col0_Tapped">
    <Canvas x:Name="row0col0"></Canvas>
</Grid> 
```

# sql - Visual Studio 中的实体框架

> ID：15630604
> 
> 赞同：-2
> 
> 时间：2013-03-26T06:20:42.673
> 
> 标签：sql, visual-studio-2010, entity-framework-4, sql-server-ce

如何将紧凑型 sqlserver 4 插入到 visualstudio 2010？

我已经安装 了`service pack 1 visual studio 2010`和`SQLServer2005SP4-KB2463332-x86-ENU.exe``SSCERuntime_x86-ENU.exe`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:59:15.427

您需要下载[Microsoft SQL Server Compact 4.0](http://www.microsoft.com/en-us/download/details.aspx?id=17876)。

过去，如果您想要 64 位工作，您必须安装 32 位和 64 位版本。我不相信情况仍然如此，但我从未使用过它。

安装完成后，打开 VS 项目，添加引用，然后浏览到刚刚安装 SDK 的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:55:40.273

您需要安装 SQL Server Compact 4.0 VS 2010 SP1 工具，您可以通过 Web Platform Installer 安装这些工具

# sql-server - 简单的 SELECT 脚本在 Sql Server 中给出错误

> ID：15630607
> 
> 赞同：1
> 
> 时间：2013-03-26T06:21:03.087
> 
> 标签：sql-server

下面是两个脚本

1.  `select *`
2.  `select count(*)`

第一个给出错误，但第二个没有给出错误。

下面是sql server给出的错误

> 消息 263，级别 16，状态 1，行 1 必须指定要从中选择的表。

请问能说说原因吗？

**注意：未指定表名。**

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T06:23:29.033

之所以`select count(*)`有效是因为它默认为`master`数据库

如其他答案中所述，您必须指定表名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:42:30.987

`select count(*)`之所以有效，是因为`count`它是一个函数并返回一个标量值，因为`from`子句是可选的，它将成功执行，而`*`函数和标量值都不是它无法执行的原因。

从[选择](http://msdn.microsoft.com/en-us/library/ms189499%28v=sql.100%29.aspx)

```
 [ WITH <common_table_expression>]
SELECT select_list [ INTO new_table ]
[ FROM table_source ] [ WHERE search_condition ]
[ GROUP BY group_by_expression ]
[ HAVING search_condition ]
[ ORDER BY order_expression [ ASC | DESC ] ] 
```

SELECT 语句中子句的顺序很重要。任何一个可选子句都可以省略，但是当使用可选子句时，它们必须以适当的顺序出现

所以选择后跟任何标量值将执行即选择1，选择'*'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:22:09.150

`SELECT *`不是一个完整的查询

它应该是

```
SELECT * from MyTableName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:36:54.433

在^第一个查询中，要使其完整，您需要定义`from`子句。

```
SELECT * FROM <Table_Name> 
```

在^(第二)个查询中，如果您没有指定要从中选择的表，则单个选择将只返回一行 - 因此 count(*) 将返回 1。

该`FROM`子句是可选的，它一直以这种方式工作。所以你可以在不需要桌子的情况下做`"SELECT 1"`或`"SELECT @val"`等等。

在其他数据库系统中，有一个`"DUAL"`用一行调用的虚拟表，用于执行这样的 SELECT 语句，例如`"SELECT 1 FROM dual;"`

# django - django 在模型中构建 get_page_url 函数以返回带有分页号的列表

> ID：15630613
> 
> 赞同：0
> 
> 时间：2013-03-26T06:21:21.603
> 
> 标签：django, django-pagination

我有一个场景，其中项目是从模型中的项目列表中分页的，我想创建一个函数来返回包含该项目的页面。

例如

```
class Item(models.Model):
   subject  = models.CharField(max_length=200) 
```

假设我在表中有 1000 个项目，并且我总是每页返回 10 个。我如何在模型中构建一个方法/函数来告诉我该项目将落在哪个页面？

请指教？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:30:30.113

你可以添加一个类方法，它需要一个`order_by`和`paginate_by`

```
import itertools

def grouper(n, iterable, fillvalue=None):
    args = [iter(iterable)] * n
    return itertools.izip_longest(fillvalue=fillvalue, *args)

class Item(models.Model):
    # attrs

    @classmethod
    def get_pagination_index(cls, self, order_by, paginate_by):
        if order_by:
            qs = cls.objects.all().order_by(order_by)
        else:
            qs = cls.objects.all()
        pages = grouper(paginate_by, qs)
        i = 0
        for page in pages:
            i += 1
            if self in page:
                return i

        # return item_index = list(qs).index(self) # get the exact number 
```

# asp.net-mvc - 如何将数据库中的值显示到mvc的布局页面中

> ID：15630616
> 
> 赞同：2
> 
> 时间：2013-03-26T06:21:26.987
> 
> 标签：asp.net-mvc, layout, controller

在这里，我试图在 mvc 中制作一个动态且可编辑的布局页面。在我的布局页面中，我有一个徽标（目前是硬编码的）。我正在实现一个功能，以便任何用户都可以通过上传自己的徽标来更改该徽标。**该徽标的路径存储在数据库中。**例如，如果这是我现在的徽标：

```
<img alt="" src="~/Images/W_logo.png" style="border-style: none;" width="115px" height="60px" /> 
```

我希望它是这样的：

```
<img alt="" src="@item.logo" style="border-style: none;" width="115px" height="60px" /> 
```

其中“logo”是我在模型中传递的参数。

或者

```
 <img alt="" src="@ViewData["logopath']" style="border-style: none;" width="115px" height="60px" /> 
```

此外，如果我使用控制器来存储值，我该如何制作它，以便它在每次应用程序启动时运行。例如这是我的控制器：

```
public ActionResult layoutChange()
{
  --recover path from database--
  ViewData["logopath"]=path from the database;
  return View(); -- Here the view is the layout page
} 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:55:46.653

我建议您尝试`Html.RenderAction`在您的 _Layout.cshtml 页面中使用。您可以使用它来指定要调用的控制器操作。

然后，控制器操作可以按照您的指示“*从数据库中恢复路径*”，并将此路径传递给包含标签标记的局部视图`img`。所有这些的结果将成为您的 _Layout 页面的动态标记的一部分。

通过采用这种方法，您无需将路径值传递给 _Layout 页面。发生的情况是 _Layout 页面调用控制器（通过 Html.RenderAction），控制器计算出路径并返回整个 IMG 标记标记。

希望有帮助。

# sharepoint - 通过代码按列创建来过滤共享点可视 Web 部件

> ID：15630617
> 
> 赞同：0
> 
> 时间：2013-03-26T06:21:37.197
> 
> 标签：sharepoint, sharepoint-2010, web-parts

我创建了一个可视化 Web 部件并在 Grid 中加载列表。现在，当用户 A 登录时，它必须只显示用户 A 创建的项目。用户 B 它必须只显示属于用户 b 的项目。这是我编写的代码。它显示所有项目，而与登录用户无关。谁可以帮我这个事

```
public void Displaylistdata()
        {
           // System.Diagnostics.Debugger.Break();

            DataTable dt = new DataTable();
            var oSPWeb = SPContext.Current.Web;
            SPList oSpList = oSPWeb.Lists["Participation at a Glance"];
            string strCreatedby = SPContext.Current.Web.Author.Name;
            SPQuery oQuery = new SPQuery();
            oQuery.Query = "<Query><Where><Eq><FieldRef Name='Author' /><Value Type='User'>" + strCreatedby + "</Value></Eq></Where></Query>";
            SPListItemCollection collListItems = oSpList.GetItems(oQuery);

            DataTable dts = collListItems.GetDataTable();

            if (dts != null)
            {
                Gridview1.GridLines = GridLines.None;
                Gridview1.DataSource = dts;
                Gridview1.DataBind();
                Controls.Add(Gridview1);
            }

            else`enter code here`
            {

                lbl_noact.Visible = true;
                lbl_noact.Text = "We apologize there are no times currently available.";

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:42:36.407

嗨，我已通过如下更改我的骆驼查询来修复。以前数据类型是 USER 但当我更改为字符串时，它就像一个魅力:-)

```
 DataTable dt = new DataTable();
        var oSPWeb = SPContext.Current.Web;
        SPList oSpList = oSPWeb.Lists["Participation at a Glance"];
        string strCreatedby = SPContext.Current.Web.CurrentUser.Name;
        SPQuery oQuery = new SPQuery();
        oQuery.Query = @"<Where><Eq><FieldRef Name='Author' /><Value Type='String'>" + strCreatedby + "</Value></Eq></Where>";
        SPListItemCollection collListItems = oSpList.GetItems(oQuery); 
```

# javascript - 创建像键和值这样的json

> ID：15630625
> 
> 赞同：1
> 
> 时间：2013-03-26T06:22:15.253
> 
> 标签：javascript, underscore.js

```
var data1=[
    {"year":2000,
     "country":"Madagascar",
     "country_id":847,
     "indicator":"Current account balance - National Currency (millions)"
    },
    {"year":2005,
     "country":"Madagascar",
     "country_id":847,
     "indicator":"Current account balance - National Currency (millions)"
    },
    {"year":2000,
     "country":"Madagascar",
     "country_id":847,
     "indicator":"Net Income - National Currency (millions)"
    },
    {"year":2005,
     "country":"Madagascar",
     "country_id":847,
     "indicator":"Net Income - National Currency (millions)"
    }
] 
```

这是我的 json 数据，我想使用 underscorejs 做这样的事情

```
{
  "key":"Madagascar"
  "values":[
    {"year":2000,
     "country":"Madagascar",
     "country_id":847,
     "indicator":"Current account balance - National Currency (millions)"
    },
    {"year":2005,
     "country":"Madagascar",
     "country_id":847,
     "indicator":"Current account balance - National Currency (millions)"
    }
  ]
} 
```

请任何人都可以帮助我使用 underscore.js 解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:06:11.010

Underscore 有一个 _.groupBy() 方法可以完成繁重的工作，但它会为每个值创建一个带有键的对象：

```
var groupedData1 = _.groupBy(data1, 'country'); 
```

这是 groupedData1 的值：

```
{"Madagascar": [
    {
        "year": 2000,
        "country": "Madagascar",
        "country_id": 847,
        "indicator": "Current account balance - National Currency (millions)"
    }, 
    {
        "year": 2005,
        "country": "Madagascar",
        "country_id": 847,
        "indicator": "Current account balance - National Currency (millions)"
    }, 
    {
        "year": 2000,
        "country": "Madagascar",
        "country_id": 847,
        "indicator": "Net Income - National Currency (millions)"
    }, 
    {
        "year": 2005,
        "country": "Madagascar",
        "country_id": 847,
        "indicator": "Net Income - National Currency (millions)"
    }
]} 
```

要转换为键/值数组，您可以使用 _.each() 和 _.keys() 遍历每个国家/地区：

```
var groupedData2 = [];

_.each(_.keys(groupedData1), function (country) {
    groupedData2.push({
        "key": country, 
        "values": groupedData1[country]
    });
}); 
```

这将创建一组对象，每个国家/地区一个对象：

```
[{
    "key": "Madagascar",
    "values": [{
        "year": 2000,
        "country": "Madagascar",
        "country_id": 847,
        "indicator": "Current account balance - National Currency (millions)"
    }, {
        "year": 2005,
        "country": "Madagascar",
        "country_id": 847,
        "indicator": "Current account balance - National Currency (millions)"
    }, {
        "year": 2000,
        "country": "Madagascar",
        "country_id": 847,
        "indicator": "Net Income - National Currency (millions)"
    }, {
        "year": 2005,
        "country": "Madagascar",
        "country_id": 847,
        "indicator": "Net Income - National Currency (millions)"
    }]
}] 
```

# jenkins - 我可以将提交者列表/电子邮件列表添加到电子邮件分机插件的内容中吗？

> ID：15630628
> 
> 赞同：1
> 
> 时间：2013-03-26T06:22:20.157
> 
> 标签：jenkins, jenkins-plugins

构建失败时我需要获取提交者列表，我可以将提交者列表或提交者的电子邮件列表添加到电子邮件扩展插件的内容中吗？是否有像 ${COMMITTERS} 这样的环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T20:02:50.147

@Tracy - Jenkins 不会将提交者信息公开为环境变量。电子邮件分机插件也没有。但是[电子邮件扩展插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)允许您使用自己的果冻脚本创建自己的电子邮件格式。看看[这个](https://wiki.jenkins-ci.org/download/attachments/3604514/txt.jpg)和[这个](https://wiki.jenkins-ci.org/download/attachments/3604514/html.jpg)要了解如何配置这种类型的电子邮件格式，请转到电子邮件扩展插件页面并搜索“果冻内容”。这应该带你到那个部分。试试这个，让我知道它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T05:45:38.030

您可以通过使用获取提交者名称`${CHANGES, format="%a"}`但是我不确定如果有多个提交者是否可以显示多个不同的名称

# php - 将 PHP 变量值转换为 PDF 文件

> ID：15630631
> 
> 赞同：1
> 
> 时间：2013-03-26T06:22:23.947
> 
> 标签：php, pdf

使用以下 ajax 代码即时将变量“a”发送到 php 文件 get_output.php：

```
var a="";
for($i=0;$i<n;$i=$i+1)
{
   var a = (a+'. '+ (document.getElementById((values[$i])).innerHTML));
}
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("output_container").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("POST","get_output.php?q="+a,true);
xmlhttp.send(); 
```

在 get_output.php 中存在以下代码：

```
<html>
<head>
</head>
<body>
    <?php
        $value=$_GET["q"];
        echo $value;
    ?>
</body>
</html> 
```

在这里，我在变量“值”中得到了我想要的输出。现在我想将变量“值”内容放入 pdf 文件中。当我在谷歌进行研究时，我发现所有解决方案都通过使用“url”等将完整页面转换为 pdf 文件。

我想要的是变量“值”中存在的内容应该进入PDF文件。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:17:18.367

您可以使用[TCPDF](http://www.tcpdf.org/)来完成。`TCPDF`是一个用于生成 PDF 文档的 PHP 类。[下载它](http://sourceforge.net/projects/tcpdf/files/tcpdf_6_0_004.zip/download)，并将`$html`TCPDF/pdfgenerator/examples/example_001.php文件中的变量修改为：

```
// Set some content to print
$html = <<<EOD
<div>
$value
</div>  
    EOD; 
```

或在文件夹中创建一个新文件（例如`test.php`）。`/TCPDF/pdfgenerator/examples/`将以下代码复制粘贴到您刚刚创建的新文件中：

```
<?php
require_once('../config/lang/eng.php');
require_once('../tcpdf.php');
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

    $value=$_GET["q"];/*The value that you want to print*/

// set document information
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('Nicola Asuni');
$pdf->SetTitle('TCPDF Example 001');
$pdf->SetSubject('TCPDF Tutorial');
$pdf->SetKeywords('TCPDF, PDF, example, test, guide');

$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, '','', array(0,64,255), array(0,64,128));
$pdf->setFooterData($tc=array(0,64,0), $lc=array(0,64,128));

// set header and footer fonts
$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));
$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));

// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

//set margins
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

//set some language-dependent strings
$pdf->setLanguageArray($l);

// set default font subsetting mode
$pdf->setFontSubsetting(true);

// Set font
// dejavusans is a UTF-8 Unicode font, if you only need to
// print standard ASCII chars, you can use core fonts like
// helvetica or times to reduce file size.
$pdf->SetFont('times', '', 11, '', true);

// Add a page
// This method has several options, check the source code documentation for more information.
$pdf->AddPage();

// set text shadow effect
$pdf->setTextShadow(array('enabled'=>true, 'depth_w'=>0.2, 'depth_h'=>0.2, 'color'=>array(196,196,196), 'opacity'=>1, 'blend_mode'=>'Normal'));

// Set some content to print
$html = <<<EOD
<div>
$value
</div>  

EOD;

// Print text using writeHTMLCell()
$pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);

// ---------------------------------------------------------

// Close and output PDF document
// This method has several options, check the source code documentation for more information.
$pdf->Output("generatedpdf.pdf", 'F');
//============================================================+
// END OF FILE
//============================================================+
?> 
```

当你运行它时，会生成一个新的 pdf 文件`TCPDF/pdfgenerator/examples/generatedpdf.pdf` ，其中只包含`$value`php 变量中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:37:04.370

您必须使用一些可用的 pdf 生成库来生成 PDF 并将其发送到浏览器。

我想建议 FPDF 它非常适合玩。

[http://www.fpdf.org/](http://www.fpdf.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T09:22:16.123

如果 id 相同，我在这里向您发送从主页到 PDF 页面获取值的代码

```
 $id = intval($_GET['id']);

                // Make sure the ID is in fact a valid ID
                if($id <= 0)
                {
                    die('The ID is invalid!');
                }
                else
                 {
require("fpdf.php");
$pdf=new FPDF();
//var_dump(get_class_methods($pdf));
$pdf->AddPage();
//------------------------
$pdf->SetFont("arial","B","20");
$pdf->Cell(160,10,"t",1,0,"l");
$pdf->Cell(30,10,"".$t,1,1,"l");
$pdf->Output();

        }
}  //top most close
    else
     {
        echo 'Error! No ID was passed.';
    }
    ?>

    //PDF code

    } 
```

# java - 休眠子查询抛出空指针异常

> ID：15630633
> 
> 赞同：10
> 
> 时间：2013-03-26T06:22:27.170
> 
> 标签：java, sql, spring, hibernate, sql-server-2005

我正在尝试从休眠中触发子查询，但它显示 NPE:-(任何人都知道如何解决它？下面是代码：

```
DetachedCriteria criteria = DetachedCriteria.forClass(My.class,"A");
        criteria.createAlias("A.a", "a");
        criteria.createAlias("A.b", "b");
        if(cValue !=null && cValue.size()>0){
            criteria.add(Restrictions.in("b.c", cValue));
        }
        if(StringUtils.isNotEmpty(commodityList)){
            DetachedCriteria commCriteria  = DetachedCriteria.forClass(My.class,"A1");
            commCriteria.createAlias("A1.a", "a1");
            commCriteria.add(Restrictions.in("a1.name", commodityList.split(",")));
            criteria.add(Subqueries.propertyIn("b.c", commCriteria));
        }
        criteria.addOrder(Order.asc("b.c"));

        return getHibernateTemplate().findByCriteria(criteria); 
```

堆栈跟踪：

```
java.lang.NullPointerException
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getProjectedTypes(CriteriaQueryTranslator.java:318)
    at org.hibernate.criterion.SubqueryExpression.toSqlString(SubqueryExpression.java:56)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getWhereCondition(CriteriaQueryTranslator.java:334)
    at org.hibernate.loader.criteria.CriteriaJoinWalker.<init>(CriteriaJoinWalker.java:82)
    at org.hibernate.loader.criteria.CriteriaLoader.<init>(CriteriaLoader.java:67)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1550)
    at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
    at org.springframework.orm.hibernate3.HibernateTemplate$36.doInHibernate(HibernateTemplate.java:1065)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:419)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    at org.springframework.orm.hibernate3.HibernateTemplate.findByCriteria(HibernateTemplate.java:1055)
    at org.springframework.orm.hibernate3.HibernateTemplate.findByCriteria(HibernateTemplate.java:1048)
    at com.boeing.kmapi.base.skillset.dao.impl.EssSkillsetCommMapDAOImpl.getEssSkillsetCommMapforSkillsetIdList(EssSkillsetCommMapDAOImpl.java:51)
    at com.boeing.kmapi.base.skillset.service.impl.EssGenericReportServiceImpl.filterCommodityDetails(EssGenericReportServiceImpl.java:87)
    at com.boeing.kmapi.base.skillset.service.impl.EssGenericReportServiceImpl.getGenericReport(EssGenericReportServiceImpl.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597) 
```

通过向内部查询添加投影解决了该问题。

```
commCriteria.createAlias("A1.b", "b1");
commCriteria.setProjection(Projections.projectionList().add(Projections.property("b1.c"))); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T09:09:26.483

通过向内部查询添加投影解决了该问题。

```
commCriteria.createAlias("A1.b", "b1");
commCriteria.setProjection(Projections.projectionList().add(Projections.property("b1.c"))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-26T17:12:38.123

这是休眠中的一个错误[https://hibernate.atlassian.net/browse/HHH-993](https://hibernate.atlassian.net/browse/HHH-993)

正如@Renjith 所说，它是通过向 DetachedCriteria 添加投影来解决的。

# javascript - javascript更改图像源后jquery zoomer重新绑定

> ID：15630635
> 
> 赞同：0
> 
> 时间：2013-03-26T06:22:28.810
> 
> 标签：javascript, jquery, image

我做了一个小图片库，里面有一张大图片和几张小图片。有一个带有大图像的缩放器，当我单击小图像时，它会替换大图像，但缩放器显示旧图像而不是新图像

jQuery

```
jQuery(document).ready(function($){ //fire on DOM ready
            $('#myimage').addpowerzoom()
            }) 
```

javascript

```
function movImg(img){
    var bImg = document.getElementById('myimage');
    bImg.src=img.src;
$(document).trigger("ready");
} 
```

html

```
<img id="myimage" src="img/abc.jpg"  alt="" />
<image src="thumbnails/xyz.jpg" onClick="movImg(this);" width="73px" style="cursor:  pointer;" /> 
```

我在哪里错了或正确的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:28:06.130

~~尝试打电话`$('#myimage').addpowerzoom();`而不是`$(document).trigger("ready");`~~

这对我有用。更改图像源时发生的轻微延迟似乎会破坏 powerzoom。这个想法是在加载图像`addpowerzoom()` *后*调用。

```
<!DOCTYPE html>
<html lang="en-AU">
    <head>
        <meta charset="utf-8" />
        <script type="text/javascript" src="js/jquery-1.8.2.js"></script>
        <script type="text/javascript" src="ddpowerzoomer.js"></script>
        <script type="text/javascript">
            function movImg(img){
                var bImg = document.getElementById('myimage');
                bImg.src = img.src;
                jQuery('#myimage').one("load", function() {
                    jQuery('#myimage').addpowerzoom();
                });
            };

            jQuery(document).ready(function($){
                $('#myimage').addpowerzoom();
            });
        </script>
    </head>
    <body>
        <img id="myimage" src="img/abc.jpg"  alt="" />
        <img id="thumb" src="thumbnails/xyz.jpg" onClick="movImg(this);" width="64px" style="cursor:  pointer;" />
    </body>
</html> 
```

# wpf - WPF：TextBox 不会在 KeyDown (CTRL+V) 事件上粘贴文本

> ID：15630640
> 
> 赞同：2
> 
> 时间：2013-03-26T06:22:45.637
> 
> 标签：wpf, winapi, events, key

我们在 Win32 Window 中托管了一个 WPF 窗口。实现是这样的，当用户按下 CTRL+V 时，剪贴板中的文本在 KeyUp 事件中而不是在 KeyDown 事件中粘贴到 TextBox（由于在 MFC 中托管时对 TextBox 控件的限制）。因此我们重写了 KeyUp 事件来粘贴文本。

但是，在某些机器中，人们注意到文本在执行 CTRL+V 时被粘贴了**两次**。进一步调查发现它被粘贴为 KeyDown （默认窗口行为）以及 KeyUp 事件（被我们覆盖）。

想知道为什么它只粘贴在 KeyUp 上，即使在某些机器和某些机器上同时用于 KeyDown 和 KeyUp？

帮助将不胜感激。

-纳扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:45:49.667

我认为这取决于按 CTRL+V 时哪个控件具有焦点。

如果编辑控件具有焦点，它将收到 WM_PASTE 通知，并且默认的 WindowProc 会将剪贴板内容粘贴到文本框中。

如果另一个控件具有焦点，则您需要自己处理 CTRL+V 才能粘贴到编辑控件中。

# objective-c - 如何制作键盘快捷键 从多个窗口保存

> ID：15630643
> 
> 赞同：1
> 
> 时间：2013-03-26T06:22:56.343
> 
> 标签：objective-c, macos, keyboard-shortcuts, nswindow, save

好的，我有一个有很多 xib 的项目，每个 xib 都包含很多 nswindows。

我需要使用键盘快捷键来保存每个窗口。

我是否需要为每个 XIB 创建多个 mainMenu NSMenuItems。但另一个问题是单个 Cmd+S 如何知道哪个窗口处于焦点以及如何调用我的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:34:09.590

不，您不需要制作多个 NSMenuItem。

mainMenu.xib 附带的一个用于此目的。

制作菜单的 IBAction`File->Save`并将其用作：

```
- (IBAction)saveMenu:(id)sender {
    NSWindow *currentWindow=[NSApp keyWindow];
    NSLog(@"this is key window  : %@", currentWindow.title);
} 
```

这将为您提供活动窗口。

在每个控制器中，您需要覆盖

```
- (void)saveDocument:(id)sender; 
```

并使用 IB 绑定它。

# html - tag isn't showing up on the web page

I was watching tutorials about html for beginners and tried to make a simple html file. when I open this on google chrome the body "hello" is showing up but the title p

> ID：15630645
> 
> 赞同：5
> 
> 时间：2013-03-26T06:23:08.530
> 
> 标签：html, tags, title, head

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T06:27:49.870

您希望在哪里显示标题？

标题通常显示在浏览器的标签栏中，或者在操作系统的窗口切换器中显示为文本。它不会显示在您的网页中。

您的标记似乎是正确的，只需在浏览器窗口中查找标题即可。

如果您打算制作标题（在您的网站上显示大文本的意思），一种方法是在您的正文标签下方写下

```
<h1>Title here</h1>. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T06:24:29.383

`<title>`未在网页中显示；它显示在**选项卡/窗口的标题**中。

建议先学习基本的HTML结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:25:49.390

我想你想要一个标题

```
<html>
<head> 
   <title>my page </title>
</head>

<body> 

<h1> first page </h1>
hello

</body>

</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-05T16:56:21.053

我了解到标题是元标记（SEO 位），而 H1 是页面上显示的内容。因此，如果您希望两者相同，例如：我学到的东西是您网站的标题和标题，您可以重复该行。

```
<html>
<head> 
<title>Things I've Learned</title>
</head>

<body> 

<h1>Things I've Learned</h1>

<p>These are the things</p>

</body>
</html> 
```

VIA QUORA：“这些标签之间的主要区别在于它们的内容出现在哪里。这种差异会影响搜索引擎和网络冲浪者分析您的页面的方式。标题标签：标题标签被称为元标签。......因为它显示最大文本，H1 Header 标签通常用于在页面顶部创建标题。”

更多关于如何为搜索引擎优化标题的[信息](https://www.v9digital.com/blog/2015/01/08/h1-headers-title-tags-seo/)。

# visual-c++ - 链表排序插入第一次尝试

> ID：15630646
> 
> 赞同：1
> 
> 时间：2013-03-26T06:23:21.223
> 
> 标签：visual-c++

我正在尝试编写一个用于排序插入链表的 C++ 程序。我已经给出了下面的代码。问题是在进行第二次插入时，即**insert(&head, 45);** 在 insert() 函数中，head 值变为 0。我无法插入第二个元素并出现错误。任何人都可以请帮忙。

```
#include "stdafx.h"
#include <conio.h>
#include <iostream>

using namespace std;

struct node
{
    int data;
    node *next;
};

void insert (node** head, int key)
{
    if(*head == NULL)
    {
        cout <<"List is empty, Inserting at first posistion"<<endl;
        *head = new node;
        (*head)->data = key;
        (*head)->data = NULL;
    }
    else
    {
        struct node* temp;
        temp = new node;
        temp = *head;

        if(key < temp->data)
        {
        cout<<"Key is smaller than first element. Inserting at first and moving"<<endl;
            struct node* ctemp = new node;
            ctemp->data = key;
            ctemp->next = (*head);
            //delete(ctemp);
            return;
        }

        while(temp->next != NULL)
        {
            if(key > temp->data)
            {
                temp = temp->next;
            }else
            {
                cout<<"Inserting the data at middle"<<temp->data<<" here"<<endl;
                struct node* temp1 = new node;
                temp1->data = key;
                temp1->next = temp->next;
                temp->next = temp1;
                delete(temp1);
                return;
            }
        }

        if(key > temp->data)
        {
            cout<<"Inserting at last"<<endl;    
            struct node* last = new node;
            last->data = key;
            last->next = NULL;
            temp->next = last;
            delete(last);
            return;
        }
    }
}

void print(struct node *head)
{
    struct node* temp = head;
    cout<<"Element in the list"<<endl;
    while(temp != NULL)
    {
        cout<<temp->data<<"->";
        temp = temp->next;
    }
    delete(temp);
}

int main()
{
    struct node* head = NULL;
    insert(&head, 21);
    insert(&head, 45);
    insert(&head, 5);

    print(head);
    getch();
    delete(head);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:27:47.460

如果列表为空，请更改`(*head)->data = NULL;`为。`(*head)->next = NULL;`

# python - 使用 Scipy 与 Matlab 拟合对数正态分布

> ID：15630647
> 
> 赞同：3
> 
> 时间：2013-03-26T06:23:21.797
> 
> 标签：python, matlab, statistics, scipy, curve-fitting

我正在尝试使用 Scipy 拟合对数正态分布。我之前已经使用 Matlab 完成了它，但由于需要将应用程序扩展到统计分析之外，我正在尝试在 Scipy 中重现拟合值。

下面是我用来拟合数据的 Matlab 代码：

```
% Read input data (one value per line)
x = [];
fid = fopen(file_path, 'r'); % reading is default action for fopen
disp('Reading network degree data...');
if fid == -1
    disp('[ERROR] Unable to open data file.')
else
    while ~feof(fid)
        [x] = [x fscanf(fid, '%f', [1])];

    end
    c = fclose(fid);
    if c == 0
         disp('File closed successfully.');
    else
        disp('[ERROR] There was a problem with closing the file.');
    end
end

[f,xx] = ecdf(x);
y = 1-f;

parmhat  = lognfit(x); % MLE estimate
mu = parmhat(1);
sigma = parmhat(2); 
```

这是拟合图：

![在此处输入图像描述](../Images/aca3e103c902de764c42ec9949a3e824.png)

现在这是我的 Python 代码，目的是实现相同的目标：

```
import math
from scipy import stats
from statsmodels.distributions.empirical_distribution import ECDF 

# The same input is read as a list in Python
ecdf_func = ECDF(degrees)
x = ecdf_func.x
ccdf = 1-ecdf_func.y

# Fit data
shape, loc, scale = stats.lognorm.fit(degrees, floc=0)

# Parameters
sigma = shape # standard deviation
mu = math.log(scale) # meanlog of the distribution

fit_ccdf = stats.lognorm.sf(x, [sigma], floc=1, scale=scale) 
```

这是使用 Python 代码的最佳选择。

![在此处输入图像描述](../Images/cabede1b34bdf4cacc1257cc9f5eb7a7.png)

如您所见，两组代码都能够产生良好的拟合效果，至少在视觉上是这样。

问题是估计的参数 mu 和 sigma 存在巨大差异。

来自 Matlab：mu = 1.62 sigma = 1.29。来自 Python：mu = 2.78 sigma = 1.74。

为什么会有这样的差异？

注意：我已经仔细检查了两组拟合的数据是否*完全相同*。相同的点数，相同的分布。

非常感谢您的帮助！提前致谢。

其他信息：

```
import scipy
import numpy
import statsmodels

scipy.__version__
'0.9.0'

numpy.__version__
'1.6.1'

statsmodels.__version__
'0.5.0.dev-1bbd4ca' 
```

Matlab 版本为 R2011b。

版：

如下面的答案所示，故障在于 Scipy 0.9。我能够使用 Scipy 11.0 从 Matlab 重现 mu 和 sigma 结果。

更新 Scipy 的一种简单方法是：

```
pip install --upgrade Scipy 
```

如果你没有 pip（你应该！）：

```
sudo apt-get install pip 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T08:59:35.280

scipy 0.9.0中的方法存在一个错误，`fit`已在 scipy 的更高版本中修复。

下面脚本的输出应该是：

```
Explicit formula:   mu = 4.99203450, sig = 0.81691086
Fit log(x) to norm: mu = 4.99203450, sig = 0.81691086
Fit x to lognorm:   mu = 4.99203468, sig = 0.81691081 
```

但是对于 scipy 0.9.0，它是

```
Explicit formula:   mu = 4.99203450, sig = 0.81691086
Fit log(x) to norm: mu = 4.99203450, sig = 0.81691086
Fit x to lognorm:   mu = 4.23197270, sig = 1.11581240 
```

以下测试脚本显示了获得相同结果的三种方法：

```
import numpy as np
from scipy import stats

def lognfit(x, ddof=0):
    x = np.asarray(x)
    logx = np.log(x)
    mu = logx.mean()
    sig = logx.std(ddof=ddof)
    return mu, sig

# A simple data set for easy reproducibility
x = np.array([50., 50, 100, 200, 200, 300, 500])

# Explicit formula
my_mu, my_sig = lognfit(x)

# Fit a normal distribution to log(x)
norm_mu, norm_sig = stats.norm.fit(np.log(x))

# Fit the lognormal distribution
lognorm_sig, _, lognorm_expmu = stats.lognorm.fit(x, floc=0)

print "Explicit formula:   mu = %10.8f, sig = %10.8f" % (my_mu, my_sig)
print "Fit log(x) to norm: mu = %10.8f, sig = %10.8f" % (norm_mu, norm_sig)
print "Fit x to lognorm:   mu = %10.8f, sig = %10.8f" % (np.log(lognorm_expmu), lognorm_sig) 
```

使用标准中的选项`ddof=1`。开发。使用无偏方差估计的计算：

```
In [104]: x
Out[104]: array([  50.,   50.,  100.,  200.,  200.,  300.,  500.])

In [105]: lognfit(x, ddof=1)
Out[105]: (4.9920345004312647, 0.88236457185021866) 
```

[matlab 的lognfit 文档](http://www.mathworks.com/help/stats/lognfit.html)中有一条注释说，当不使用审查时，lognfit 使用方差的无偏估计量的平方根来计算 sigma。这对应于在上述代码中使用 ddof=1。

# box2d - 碰撞后保持物体的恒定速度

> ID：15630655
> 
> 赞同：1
> 
> 时间：2013-03-26T06:23:47.233
> 
> 标签：box2d, box2dweb

我有几个圈子在移动。我设置了`linearVelocity`每个圆圈的。但是当它们碰撞时，它们的速度会发生变化。有时，速度的垂直分量或水平分量或两个分量都变为零，并且圆不移动。

我对所有物体都有相同的恢复系数，零重力和零角度和线性阻尼。

然而，圆的半径发生了变化。当半径相等的圆也相撞时，速度也会发生变化。

# c# - 如何将事件附加到动态对象或 COM 对象

> ID：15630656
> 
> 赞同：3
> 
> 时间：2013-03-26T06:23:47.423
> 
> 标签：c#, dynamic, reflection, com, wmp

我认为[这篇文章](https://stackoverflow.com/questions/8694235/attach-event-to-dynamic-object)和我有同样的问题。但是，我的情况没有可行的解决方案。

我在我的程序中使用 Windows Media Player ActiveX。

出于某种原因，我不想添加它的引用并通过 IDE 自动转换为 AxHost。

`Activator`我通过and创建实例`ProgID`

```
protected const string WMP_PROG_ID = "WMPlayer.OCX.7";

private dynamic _wmp;

protected virtual bool init(){
    try{
        _wmp = Activator.CreateInstance(Type.GetTypeFromProgID(WMP_PROG_ID));
    }
    catch{ return false; }
    return true;
} 
```

我试图这样做`Reflection`，但我发现这`dynamic`适合我的情况。

每个属性和方法都可以正常工作，如下所示：

```
protected override bool setSpeed(float speed){
    try{
        _wmp.settings.rate = speed;
    }
    catch { return false; }
    return true;
}

protected override int getLength(){
    double res;
    try{
        res = _wmp.currentMedia.duration;
    }
    catch { return 0; }
    return (int)(res * 1000);
} 
```

不幸的是，当我想像[我在顶部指出的文章](https://stackoverflow.com/questions/8694235/attach-event-to-dynamic-object)那样附加事件时，它没有工作。

我的代码是这样的：

```
protected bool connectEvent(){
_wmp.StatusChange += new EventHandler(_wmp_StatusChange);
    return true;
}

protected void _wmp_StatusChange(object sender, EventArgs e){
    Console.WriteLine(_wmp.Status);
} 
```

我检查了 的事件处理程序的类型`StatusChange`，它是`EventHandler`.

这些代码编译得很好，我可以加载一些音乐，播放它，暂停它，......做任何我喜欢的事情。

但该`StatusChange`事件从未触发。

我试图在`connectEvent`.

在运行时`_wmp.StatusChange += new EventHandler(...)`，IntelliTrace 会给我一些信息。

这些信息是用繁体书写的。中文，我觉得意思是：

`Microsoft.CSharp.RuntimeBinder.RuntimeBinderException`: 无法应用运算符“+=”来键入`System.Dynamic.DynamicObject`和`System.EventHandler`

即使有一个例外，但就像我说的，编译通过了，一切仍然有效——除了我无法监听事件。

那么，如何在动态对象中成功附加事件`_wmp`？

任何可能的解决方案（如`Reflection`）对我有用。

此外，在上述情况下，处理程序类型`StatusChange`为`EventHandler`.

但是如果我想处理`PlayStateChange`事件，如果我不添加 wmp.dll 的引用，它就是一个“未知句柄”。

我希望该解决方案也适用于这种情况。

提前感谢大家的支持，请原谅我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:44:39.697

将使用 COM 对象的程序从早期绑定转换为后期绑定调用的通用策略是**首先**将其编写为早期绑定。IntelliSense 将帮助您陷入成功的陷阱，确保您使用正确命名的方法、传递正确类型的参数，并且特别有助于您了解事件处理程序签名的外观。

这会产生这段测试代码：

```
 void testEarlyBound() {
        var wmp = new WMPLib.WindowsMediaPlayer();
        wmp.StatusChange += new WMPLib._WMPOCXEvents_StatusChangeEventHandler(wmp_StatusChange);
    }

    void wmp_StatusChange() {
        throw new NotImplementedException();
    } 
```

借助 IntelliSense 完全自动生成的 StatusChange 事件处理程序分配和方法主体。注意事件处理程序的签名，它*不是*EventHandler。只是一个返回 void 且不带参数的方法，它与 Action 委托类型匹配。现在您可以很好地编写没有无法诊断的运行时异常的后期绑定版本：

```
 void testLateBound() {
        dynamic wmp = Activator.CreateInstance(Type.GetTypeFromProgID("WMPlayer.OCX"));
        wmp.StatusChange += new Action(wmp_StatusChange);
    } 
```

# ios - 在 Objective C 中自定义 UIBarButtonItem

> ID：15630667
> 
> 赞同：0
> 
> 时间：2013-03-26T06:24:31.630
> 
> 标签：ios

我正在尝试将图像添加到 IOS App 中的 UIBarButtonItem。我可以添加它，但问题是图像占用了按钮的大小。但我希望按钮具有包含边框的图像大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:32:41.417

```
UIButton *customButton = [UIButton buttonWithType:UIButtonTypeCustom];
[customButton setBackgroundImage:[UIImage imageNamed:@"customButtonBgImage.png"] forState:UIControlStateNormal];
[customButton setImage:[UIImage imageNamed:@"customButtonImage.png"] forState:UIControlStateNormal];
[customButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithCustomView:customButton]; 
```

您可以在任何需要的地方添加 barButtonItem。

# iphone - IOS：处理应用内购买收据验证失败

> ID：15630671
> 
> 赞同：3
> 
> 时间：2013-03-26T06:24:40.533
> 
> 标签：iphone, ios, in-app-purchase

我将应用内购买与我的 ios 应用程序集成在一起。但问题是有时Apple在针对iTunes服务器进行应用内购买收据验证后返回“无效响应数据”。我不知道为什么？。此外，这仅发生在少数用户而不是所有人身上。任何人都知道或面临这个问题的实际问题是什么？此外，当收据验证失败时，苹果是否会对该购买收费？

这是我的服务器端代码，用于验证针对 ituens 服务器购买的收据：

```
 <?php

        $devmode = FALSE; //TRUE; // change this to TRUE  testing against sandbox

        $receiptdata        = $_POST['receiptdata'];    
        $email_id           = base64_decode($_POST['user_email_id']);
        $pwd                = $_POST['pwd'];

        if($devmode)
        {
            $appleURL = "https://sandbox.itunes.apple.com/verifyReceipt";

        }
        else
        {
            $appleURL = "https://buy.itunes.apple.com/verifyReceipt";       
        }

        try {
            $receipt = json_encode(array("receipt-data" => $receiptdata));
            $response_json = do_post_request($appleURL, $receipt); 
            $response = json_decode($response_json);

            if (!is_object($response)) {
                throw new Exception('Invalid response data');
            }

            if (!isset($response->status) || $response->status != 0) 
            {           
                throw new Exception('Invalid receipt');
            }

            if($response->{'status'} == 0)
            {
                echo 'receipt verification success';

            } else {

            } 
        catch (Exception $ex) {
            eecho 'exception got: ' . $ex->getMessage();
            exit(0);
        }
function do_post_request($endpoint, $postData, $optional_headers = null)
{
        // create the cURL request
        $ch = curl_init($endpoint);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);

        // execute the cURL request and fetch response data
        $response = curl_exec($ch);
        $errno    = curl_errno($ch);
        $errmsg   = curl_error($ch);
        curl_close($ch);

        // ensure the request succeeded
        if ($errno != 0) {
            throw new Exception($errmsg, $errno);
        }

        return $response;
}
    ?> 
```

任何必须感谢的帮助。

谢谢，-loganathan

# codeigniter - 发布代码点火器的url方案

> ID：15630676
> 
> 赞同：0
> 
> 时间：2013-03-26T06:24:49.380
> 
> 标签：codeigniter

我有一个像

```
<form action="abc/1" method="post">

</form> 
```

我希望每次提交此表单时我的 URL 都保持不变，就像假设我当前的 URL 是

```
http://localhost/abc/1 after form submit it should be again 
http://localhost/abc/1

but instead this it become
http://localhost/abc/1
http://localhost/abc/abc/1
http://localhost/abc/abc/abc/1 each time I press submit button in form. 
```

它与代码点火器中 mvc 的 URL 方案有关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:58:06.240

表单的操作与您当前的位置相关。

如果您正在打开`http://example.com/contact`并且您的表单的操作设置为`contact/send`发送到`http://example.com/contact/contact/send`现在的表单，则可以通过删除操作属性的`contact/`部分表单或在操作属性`/`的开头添加 a 来轻松解决此问题，因此路径是绝对的 - `/contact/send`.

在 CodeIgniter 中执行此操作应该相对容易，因为您可以使用[URL Helper](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)指向应用程序中的正确 URL。

```
<form action="<?php echo site_url('abc/1'); ?>" method="post">

</form> 
```

此示例将始终将您指向与您的 base_url 和 index_page 设置相关的页面`application/config/config.php`。

在您的情况下，在评论中提到，`<?php echo site_url('home/authenticateUser/' . $user_id); ?>`可能会是答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:07:59.227

试试喜欢

```
<form action="/abc/1" method="post">

</form> 
```

否则你最好使用 site_url 之类的

```
<form action="<?php echo site_url('abc/1');?>" method="post">

</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:43:36.710

将操作从 "abc/1" 更改为 "/abc/1" 将起作用，但如果您在子目录中构建应用程序，这通常是在 localhost 开发环境中的情况，这将恢复到您的 htdocs 文件夹，如与您所需的文件夹相反。

我会推荐以下两种选择之一：

1.  `<form action="<?php echo base_url(abc/1); ?" method="post">`
2.  `<?php form_open('abc/1')' ?>`

2 号更好，因为它与 CodeIgniter 的 CSRF 功能一起使用，并自动添加 base_url()。

希望这可以帮助。

# asp.net-mvc-4 - 使用 MVC 4 的 Web 应用程序中的动态布局

> ID：15630678
> 
> 赞同：0
> 
> 时间：2013-03-26T06:24:59.090
> 
> 标签：asp.net-mvc-4

我有一个 MVC 4 / Entity web 项目落入我的腿上，我以前从未使用过。我正在经历它，但简单的事情真的让我感到困惑——比如根据数据库中的参数在我的布局中隐藏或显示链接。

我在我的 HomeController 中创建了一个函数，它只是在 ViewBag 中设置 2 个布尔值来判断一个人是经理还是超级用户。我使用该函数调用该函数

```
@Html.Action("SetupViewBag", "Home") 
```

它就`<body>`在我的布局中的标签之后。这是 SetupViewBag 的代码：

```
public void SetupViewBag()
{
   ViewBag.IsManager = ADAccess.IsManager(SessionManager.GetUserName());
   ViewBag.IsSuper = SessionManager.SuperUser();
} 
```

当我设置断点时，布尔值设置正确且顺序正确，但是当我尝试使用下面的代码访问它们时，我得到一个 'Cannot convert null to 'bool' 因为它是一个不可为空的值类型。 '

```
@{
   if((bool)@ViewBag.IsManager){                       
      <li>@Html.ActionLink("Management", "Management", "Home",null, new { id = "managementLink" })</li>
   }                     
} 
```

必须有一些非常简单的东西我错过了。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:42:54.390

根据您的评论@Dakine83，您应该在控制器构造函数方法上设置 ViewBag，如​​下所示：

```
public class YourController : BaseController {
    public YourController(){

    }
} 
```

这样做的原因是因为在调用您的操作方法时已经呈现了布局页面。你有一个 null 的原因`ViewBag.IsManager`。

更新：使用基本控制器

```
public class BaseController : Controller {
    public BaseController() {
            ViewBag.IsManager = ADAccess.IsManager(SessionManager.GetUserName());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:38:21.603

我希望这对你有用，请尝试一次 @Html.ActionLink("Management", "Management", "Home", new { id = false }, null);

谢谢

# jquery - 获取jQuery中选定元素的数量

> ID：15630685
> 
> 赞同：1
> 
> 时间：2013-03-26T06:25:38.807
> 
> 标签：jquery, html, html-select

我有选择：

```
<select>
    <option>Option1</option>
    <option selected>Option2</option>
    <option>Option3</option>
</select> 
```

我如何知道所选元素的数量？
我用：

```
var shop_val = $("select option").eq(); 
```

但它的返回对象，我想要元素的数量和每个项目的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:28:44.310

```
$("select option:selected").index()+1 gives the number 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T06:26:49.713

你可以这样做

```
var shop_val = $("select option:selected").length(); 
```

你也可以这样做

```
$("select").change(function () {
  var str = "";
  $("select option:selected").each(function () {
        str += $(this).text() + " ";
      });
  alert(str);
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T06:26:57.320

1.  为选项添加值属性
2.  `$('select').val();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T06:28:37.637

您可以使用 :selected 选择器选择所选项目，然后获取 .length，如下所示：

```
var sel = $("#mySelect :selected").length; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T06:29:49.380

我建议：

```
 var shop_val = $("select option:selected").index(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T06:33:23.847

添加值属性为

```
<select>
   <option value=1>Option1</option>
   <option selected value=2>Option2</option>
   <option value=3>Option3</option>
</select> 
```

然后使用

`$('select').val();`

# html - 如何在单个块中使用 scala 和 html 代码

> ID：15630690
> 
> 赞同：1
> 
> 时间：2013-03-26T06:26:17.927
> 
> 标签：html, scala, playframework, playframework-2.0, scala-template

为什么选项 html 元素未绑定在案例 1 中的 select 内？

案例1：不工作

```
@base{
  <select name="" value="" class="custom-select">
  @{
    println("1"); // this is printed to console             
    <option value="test">i</option> // this is not shown in html
    println("2"); // this is printed to console                     
  }
  </select>
} 
```

案例2：工作

```
@base{
  <select name="" value="" class="custom-select">
  @{
    println("1"); // this is printed to console             
    <option value="test">i</option> // this is shown in html                    
  }
  </select>
} 
```

更新：

如何创建一个将所有选项元素绑定到 scala 模板的循环？以下代码不绑定任何选项元素。什么是实际返回类型？空行？

```
<select name="" value="" class="custom-select">
@{
    for(i <- 1 to 10) {
        <option value="@i">@i</option>
    }
}
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:12:09.890

代码块`@{...}`是一个闭包，它具有从最后一条语句推断出的返回类型。

在第一种情况下，返回类型被推断为`Unit`因为`println(...)`返回`Unit`

在第二个块中返回 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:44:07.337

我不能直接回答第一个问题，但假设@korefn 和@om-nom-nom 是正确的；该块是一个闭包，并将返回解释为无效。

为了响应您的更新，我会尝试：

```
@for(i <- 1 to 10) {
    <option value="@i">@i</option>
} 
```

这就是我过去使用它的方式。我还发现使用嵌套的 @if 块以不同方式处理所选选项很有帮助，以便在加载文档时选择它。

# python - 查询由其他表进一步链接的一对多关系

> ID：15630691
> 
> 赞同：0
> 
> 时间：2013-03-26T06:26:26.500
> 
> 标签：python, sqlalchemy, pyramid

抱歉，我想不出一个更好的通用标题。我正在使用金字塔和 sqlalchemy 构建照片投票应用程序。完整的 schema 和 orm 在最后，但最相关的信息是

1.  `photo`桌子
2.  `vote`带有`photo_id`和的表`user_id`，其中后者标识对照片投赞成票或反对票的用户。
3.  `category`包含照片类别列表的表格
4.  `photocategory`表链接`photo`和`category`表

在应用程序的主照片提要中，我想按以下顺序显示照片

1.  用户未投票的照片在他/她投票的照片之前
2.  在上面的每个组中（未投票然后投票），按照片现有投票数的降序排列

该应用程序还可以灵活地仅显示特定类别的照片

我现在实施的方式是......

*   只获取所需类别的照片

IE

```
photos = DBSession.query(Photos).join(photocategory, Photo.id==photocategory.c.photo_id).filter(photocategory.c.category_id==__CATEGORY_ID_HERE__).all() 
```

*   `photos`按票数排序

IE

```
photos = sorted(photos, key=lambda photo: len(photo.votes), reverse=True) 
```

*   遍历`photos`以查看用户是否已经投票，并将照片附加到 a`voted`或`unvoted`列表/数组

但是，这太低效了，因为我必须搜索用户之前为每张照片投票的所有照片`photos`，所以我想知道这样做的正确和有效方法是什么......谢谢

**架构**

```
 photo_table = schema.Table('photo', metadata,
  schema.Column('id', types.Integer,
    schema.Sequence('photo_seq_id'), primary_key=True),
  schema.Column('caption', types.UnicodeText(), nullable=True),
  schema.Column('timestamp', types.TIMESTAMP(), default=datetime.now()),
  schema.Column('last_updated', types.TIMESTAMP(), default=datetime.now(),),
  schema.Column('spam', types.Boolean, default=0),
  schema.Column('trash', types.Boolean, default=0),
  schema.Column('image_path', types.Unicode(255), nullable=False),
  schema.Column('user_id', types.Integer, schema.ForeignKey('user.id', ondelete='CASCADE')),
  mysql_engine='InnoDB'
)

category_table = schema.Table('category', metadata,
  schema.Column('id', types.Integer,
    schema.Sequence('category_seq_id'), primary_key=True),
  schema.Column('name', types.Unicode(255), nullable=False, unique=True),
  mysql_engine='InnoDB'
)

photocategory_table = schema.Table('photocategory', metadata,
  schema.Column('photo_id', types.Integer, schema.ForeignKey('photo.id', ondelete='CASCADE'), primary_key=True),
  schema.Column('category_id', types.Integer, schema.ForeignKey('category.id', ondelete='CASCADE'), primary_key=True),
  mysql_engine='InnoDB'
)

vote_table = schema.Table('vote', metadata,
  schema.Column('id', types.Integer,
    schema.Sequence('vote_seq_id'), primary_key=True),
  schema.Column('timestamp', types.TIMESTAMP(), default=datetime.now()),
  schema.Column('upvote', types.Boolean, nullable=False),
  schema.Column('photo_id', types.Integer, schema.ForeignKey('photo.id', ondelete='CASCADE')),
  schema.Column('user_id', types.Integer, schema.ForeignKey('user.id', ondelete='CASCADE')),
  mysql_engine='InnoDB'
) 
```

**ORM 映射器**

```
orm.mapper(Photo, photo_table, properties={
  'votes': orm.relation(Vote, backref='photo', lazy='dynamic'),
  'categories': orm.relation(Category, secondary=photocategory_table, backref='photos'),
})

orm.mapper(User, user_table, properties={
  'photos': orm.relation(Photo, backref='owner'),
  'votes': orm.relation(Vote, backref='voter', lazy='dynamic'),
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:11:08.597

也许使用 SQL 本身来做这件事是一个更好的主意。以下内容未经测试，可能无法正常工作，但您可以对其进行调整以满足您的需要

您可以通过以下方式选择类别的照片

```
cat_photos = session.query(PhotoCategory.photo_id.label('pid')).options(lazyload('*')).filter(PhotoCategory.category_id==SOMEID).subquery() 
```

加入用户和照片表以获取用户可以投票的照片列表。假设用户不能对他自己的照片投票，你会得到

```
elig_photos = session.query(User).join(Photos,Photos.user_id!=User.id).options(lazyload('*')).with_entities(Photos.id.label('pid'),User.id.label('uid').subquery() 
```

现在您可以将其加入投票表和您的子查询，以获取用户尚未投票的特定类别的照片

```
not_voted = session.query(elig_photos).outerjoin(Votes,and_(Votes.photo_id==elig_photos.c.pid,Votes.user_id==elig_photos.c.uid)).join(cat_photos,cat_photos.c.pid==elig_photos.c.pid).with_entities(elig_photos.c.pid.label('photo_id'),Votes.upvote.label('upvote')).options(lazyload('*')).filter(User.id==SOMEUSER).filter(Votes.upvote==None).all() 
```

获取按票数排序的此类照片。我们将不得不进行左连接，因为可能有些照片还没有人投票

```
sorted_votes = session.query(cat_photos).outerjoin(Votes,cat_photos.c.pid==Votes.photo_id).with_entities(cat_photos.c.pid.label('pid'),func.coalesce(func.sum(Votes.upvote),0).label('sum_votes')).options(lazyload('*')).group_by(cat_photos.pid).order_by(desc('sum_votes')).all() 
```

注意 - 我`options(lazyload('*'))`为每个查询添加了一个选项以使关系延迟加载

现在你有两个列表 -

*   `sorted_votes`其中按票数降序排列了该类别的照片（0票为没有被任何人投票的照片）
*   `not_voted`其中列出了用户未投票的该类别的照片

请注意，用户上传的该类别的照片将成为第一个列表的一部分

您可以在 python 中处理这两个列表以首先根据它们在第一个列表中的索引显示 not_voted，然后按原样显示第一个列表的其余部分

```
not_voted_sorted = sorted(not_voted,key=lambda x:sorted_votes.index(x))
rest_of_the_photos = [y for y in sorted_votes if y not in not_voted] 
```

如果您只从这些查询中获取 photo_ids，那将是一个好主意 (IMO)。整个 Photo 对象列表可以从 DB 中单独获取，并保存在以 photo_id 为键的字典中。因此，如果您知道要显示的 photo_id，则可以在模板中显示整个照片详细信息。

最后注意：如果某些事情不起作用，请尝试为您尝试执行的操作编写一个普通 SQL，然后编写 SQLAlchemy 等效项并打印该语句以比较您的手写 SQL 和 SQLAlchemy 生成的 SQL 是否相同

# sql-server - 日期时间格式错误

> ID：15630693
> 
> 赞同：0
> 
> 时间：2013-03-26T06:26:40.067
> 
> 标签：sql-server

尝试转换`DATETIME`为`VARCHAR`.

这是我使用的查询：

```
SELECT CONVERT(VARCHAR, GETDATE(), 131) 
```

这是它返回的输出：

```
15/05/1434 11:53:26:073AM 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:54:59.243

除非您想要 Hijiri，否则没有确切的转换可以让您准确地得到 dd/mm/yy hh:mi:ss。

为了接近你将被迫使用：

```
SELECT CONVERT( VARCHAR(30), GETDATE(),105) --dd-mm-yy
+ ' ' + CONVERT( VARCHAR(30), GETDATE(),108 ) -- hh:mi:ss 
```

示例：[SQLFiddle](http://www.sqlfiddle.com/#!3/d41d8/11582)

有关更多信息，请查看[CAST 和 CONVERT的 MSDN 库](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

注意：如果需要正斜杠（与破折号相比），您将需要使用[DATEPART](http://msdn.microsoft.com/en-us/library/ms174420.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:37:00.620

这是显示 Hijiri 日期时间格式。

[http://www.w3schools.com/sql/func_convert.asp](http://www.w3schools.com/sql/func_convert.asp)

您可以通过以下 URL 以 Hijiri 日期时间格式查看当前日期。

[http://www.islamicfinder.org/dateConversion.php?mode=ger-hij&day=26&month=3&year=2013&date_result=1](http://www.islamicfinder.org/dateConversion.php?mode=ger-hij&day=26&month=3&year=2013&date_result=1)

我没有关于 Hijiri 日期时间格式的详细信息。但是当您使用 130 和 131 转换格式时结果正确。

# c# - 使用 System.Windows.Controls.WebBrowser(LightSwitch, VS2012) 显示网页

> ID：15630702
> 
> 赞同：0
> 
> 时间：2013-03-26T06:27:02.760
> 
> 标签：c#, .net, visual-studio, visual-studio-lightswitch

我跟着； [http://dotnettim.wordpress.com/2011/04/17/lightswitchdisplaying-web-pages-html-on-a-screen/](http://dotnettim.wordpress.com/2011/04/17/lightswitchdisplaying-web-pages-html-on-a-screen/)

但不是我留下的网页； ![在此处输入图像描述](../Images/fa3f1a63fb79016e44d7abffc71fc8ad.png)

我使用的是 VS2012，示例在 VS2010 中。我遇到的代码差异如下；

原来的;

```
private void WebPage_Activated() 
```

矿;

```
partial void WebPage_Activated() 
```

我已经检查了调试器并且事件顺利触发，版本之间是否有任何重大更改，或者还有其他我忽略的内容。

我将所有代码都包含在我放置自定义控件的位置的图片中（我对那部分有点不确定）；

```
public partial class WebPage
    {
        partial void WebPage_Activated()
        {
            // Write your code here.
            this.FindControl("prpWebPage").ControlAvailable += webControlAvailable;
        }

        private void webControlAvailable(object sender, ControlAvailableEventArgs e)
        {
            ((System.Windows.Controls.WebBrowser)e.Control).Navigate(new Uri("http://news.bbc.co.uk"));
        }

    } 
```

![在此处输入图像描述](../Images/dae84382a41ca1d5bdce7beafc40cd32.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:38:35.877

我解决了，大小最初设置为0。所以;

![在此处输入图像描述](../Images/135b74ffaf207638597e9a53e0907e7d.png)

解决它 ：）

# html - 响应式图像重排

> ID：15630703
> 
> 赞同：0
> 
> 时间：2013-03-26T06:27:06.083
> 
> 标签：html, css, image, responsive-design

我们正在开发一个响应式网站，允许用户上传图片。

我们保留原始图像，然后生成缩略图以提供给分辨率较低的用户。

已经提出的问题是，当图像在较小屏幕尺寸的逻辑中切换时，其周围的元素会出现可见的回流。

我不确定如何防止这种情况，因为图像的高度不一致，因此无法在包含元素上设置初始高度。

任何想法，将不胜感激。

我看着这个：

[http://andmag.se/2012/10/responsive-images-how-to-prevent-reflow/](http://andmag.se/2012/10/responsive-images-how-to-prevent-reflow/)

但这似乎只适用于我们知道比例的场景，即 16:9、4:3 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:47:44.730

我假设您的缩略图具有固定的最大尺寸。

您可以将图像放在设置了最大高度/宽度的框内，这样方向（横向、纵向、正方形）就无关紧要了。这将为您提供图像周围的固定空白。

您还可以在缩略图中生成此空白，为您的所有图像提供固定的宽度/高度。

# sql-server-2008-express - 安装 SQL Server 2008 Express 时出错

> ID：15630704
> 
> 赞同：0
> 
> 时间：2013-03-26T06:27:15.843
> 
> 标签：sql-server-2008-express

我正在尝试安装 SQL Server 2008 Express 但出现错误

> set.exe 不是有效的 Win32 应用程序

我现在这台机器上没有那么多磁盘空间，只有 10,5 gig，这可能是问题吗？任何关于可能是什么原因以及如何解决它的建议。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:32:42.417

看起来像一个损坏的下载。而不是 [RUN]，选择 [Save]，然后从本地硬盘驱动器运行。在运行可执行文件之前验证下载的大小。如果这不起作用，请尝试重新下载。

确保您将 MS DL 的系统要求阅读为`SQLEXPR_x86_ENU.exe`：[Microsoft® SQL Server® 2008 Express](http://www.microsoft.com/en-us/download/details.aspx?id=1695)

# c++ - 在 C++ 中替换字符串中的特定字符

> ID：15630706
> 
> 赞同：0
> 
> 时间：2013-03-26T06:27:27.120
> 
> 标签：c++

我有如下代码 -

```
Value = "Current &HT"; //this is value
void StringSet(const char * Value)
{
    const char *Chk = NULL; 
    Chk = strpbrk(Value,"&");
  if(Chk != NULL)
  {    
    strncpy(const_cast<char *> (Chk),"&amp",4)
  }
} 
```

在上面的代码中，我想用“&”替换 Value 中的“&”。如果我有“&”单个字符，但在当前情况下 strpbrk() 返回“&HT”并且在下面的 strncpy 中，整个“&HT”被替换。

现在我想知道我只能从字符串中替换单个字符的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:53:43.200

您不能用多个字符替换 C 样式字符串中的一个字符，因为您无法知道 C 样式字符串中有多少空间可用于添加新字符。您只能通过分配新字符串并将旧字符串复制到新字符串来做到这一点。像这样的东西

```
char* StringSet(const char* value)
{
    // calculate how many bytes we need
    size_t bytes = strlen(value) + 1;
    for (const char* p = value; *p; ++p)
        if (*p == '&')
             bytes += 3;
    // allocate the new string
    char* new_value = new char[bytes];
    // copy the old to the new and replace any & with &amp
    char* q = new_value;
    for (const char* p = value; *p; ++p)
    {
        *q = *p;
        ++q;
        if (*p == '&')
        {
             memcpy(q, "amp", 3);
             q += 3;
        }
    }
    *q = '\0';
    return new_value;
} 
```

但这是可怕的代码。你真的应该使用 std::string。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:00:32.143

我认为您需要一些临时数组来保存字符串过去 & 然后替换原始字符串中的 & 并将临时数组附加到原始字符串。这是上面修改的代码，我相信您可以使用 strstr 而不是 strchr 它接受 char* 作为第二个参数。

```
void StringSet(char * Value)
{
    char *Chk = NULL,*ptr = NULL;
    Chk = strchr(Value,'&');
  if(Chk != NULL)
  {
    ptr = Chk + 1;
    char* p = (char*)malloc(sizeof(char) * strlen(ptr));
    strcpy(p,ptr);
    Value[Chk-Value] = '\0';
    strcat(Value,"&amp");
    strcat(Value,p);
    free(p);
  }
} 
```

谢谢尼拉吉·拉蒂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:53:02.657

```
string str="Current &HT";
str.replace(str.find('&'),1,"&amp"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:47:49.523

您不应该修改常量字符串，当然也不能修改字符串文字。`std::string`尽管使用 a而不是自己处理资源管理要好得多，但一种方法是分配一个新的 c 样式字符串并返回一个指向它的指针：

```
char *StringSet(const char *Value) {
  char buffer[256];
  for (char *p = (char*)Value, *t = buffer; p[0] != 0; p++, t++) {
    t[0] = p[0];
    if (p[0] == '&') {
      t[1] = 'a'; t[2] = 'm'; t[3] = 'p';
      t += 3;
    }   
    t[1] = 0;
  }
  char *t = new char[strlen(buffer)+1];
  strcpy(t, buffer);
  return t;
} 
```

# ios - 应用程序不滚动

> ID：15630707
> 
> 赞同：-1
> 
> 时间：2013-03-26T06:27:30.133
> 
> 标签：ios, objective-c, cocoa-touch

我试图让我的视图控制器滚动，但它不起作用。有什么问题的线索吗？

```
 UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,320,480)];
    scroll.contentSize = CGSizeMake(320, 480);
    [self.view addSubview:scroll];

    GGBoxView *boxee = [[GGBoxView alloc] initWithFrame:CGRectMake(12, 56, 144, 120)];
    [scroll addSubview:boxee]; 
```

此代码是我的 GGViewController 类的一部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T06:30:17.210

您正在设置`frame` `CGRectMake(0,0,320,480)`并且`content size` `CGSizeMake(320, 480)`相等，`Content size`必须大于实际大小`scrollView`才能显示滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:29:54.753

你给`scrollview` `content size`480 这意味着它需要整个屏幕，滚动屏幕你必须提供更多`content size`然后只有它`scrolls`否则它不会滚动。

```
scroll.contentSize = CGSizeMake(320, 600); 
```

# python - Django 表单添加 在表单域之后

> ID：15630710
> 
> 赞同：7
> 
> 时间：2013-03-26T06:27:40.080
> 
> 标签：python, html, django, django-forms, django-templates

以下是我的表单代码：

```
class FMessage(forms.Form):
    From = forms.CharField()
    To = forms.CharField()
    Subject = forms.CharField()
    Message = forms.CharField() 
```

这是我的html代码：

```
<form method='POST' action='.'>
    {% csrf_token %}
    {{ form.as_p }}
    <input type='submit' value='submit'>
</form> 
```

该代码通过显示表单可以正常工作，并且在功能上没有任何问题，但是现在我需要将表单字段包装在 html 中，`div`如下所示：

```
<div id='mydiv'>
    <input ... />
<div> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T07:59:14.590

似乎您并不想使用内置`<p>`或`<table>`包装的表单，而是想显示包装在`<div>'s`. 您可以简单地迭代表单中的字段，如下所示。

```
{% if form %}
    <!-- Form Errors -->
    {% if form.errors %}
        <ul class="errors">
            {% for error in form.errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <!-- Display Form -->
    <form>
    {% csrf_token %}
    {% for field in form %}
        <div class="mydiv">
            <label class="mylabel">{{ field.label }}</label>
            {{ field }}
        </div>
    {% endfor %}
    </form>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T06:34:27.983

不要使用`form.as_p`. 您需要显示表单的每个字段，例如，使用`form.to`. 通过这种方式，您可以将字段'to'包装到一个div中

```
 <div>{{ form.To}} </div> 
```

有关更多详细信息，请查看此[链接](https://docs.djangoproject.com/en/dev/topics/forms/#customizing-the-form-template)

# c++ - 警告：不推荐将字符串常量转换为 âchar*â

> ID：15630712
> 
> 赞同：2
> 
> 时间：2013-03-26T06:27:45.387
> 
> 标签：c++, linux

我在 c++ 中有一段代码，它在 gcc 版本 4.1.2 20071124 上运行良好，但在 gcc 版本 4.4.6 20120305 上发出警告。请建议：

代码：

```
WriteLog(sgca_log_file,"Exception occured in load_sgsn_cdr_arch \n",true); 
```

警告：`deprecated conversion from string constant to 'char*'`

其中 Writelog 是在指定日志文件中打印日志的函数：

```
void WriteLog(const char* fileName, const char* pLogMsg, bool pTimeRequired)
{
    FILE    *lFileDesc = NULL;
    char    lMessage[1000];
    char    lBuffer[1000];
    char    lDate[1000];
    time_t  lRawtime;
    struct  tm * lTimeinfo;
    char    LoaderLogFile[80];
    char loaderHome[30];
    char * pch;
    char szdir[30];

    try
    {
        memset(LoaderLogFile, '\0',80);
        memset(lMessage, '\0', 1000);
        memset(lBuffer, '\0', 1000);
        memset(lDate, '\0', 1000);

        time(&lRawtime);
        lTimeinfo = localtime(&lRawtime);
        strftime(lBuffer, 1000, "| %x - %X | ", lTimeinfo);
        strftime(lDate, 1000, "%Y_%m_%d", lTimeinfo);

        if (!strcmp(fileName,"default"))
        {
            strcpy(loaderHome, getenv("LOADER_HOME"));
            sprintf(LoaderLogFile,"%s/log/Loader_%s.log",loaderHome,lDate);
        }

        else
            sprintf(LoaderLogFile,"%s_%s.log",fileName,lDate);

        if (!file_exists(LoaderLogFile))
        {
            if((pch=strrchr(LoaderLogFile,'/')) != '\0')
            {
                strncpy(szdir,LoaderLogFile,pch-LoaderLogFile+1);
                if(file_exists(szdir))
                {
                    lFileDesc = fopen(LoaderLogFile, "a");
                    fflush(lFileDesc);
                    fclose(lFileDesc);
                }
                else
                {
                    sprintf (lBuffer,"Directory %s doesnot exist. Please check the configurations. Stopping the System. \n",szdir);
                    WriteLog("default",lBuffer,true);
                    StopSystem("default",lBuffer);
                }
            }
            else
            {
                sprintf (lBuffer,"Invalid log file name %s \n",LoaderLogFile);
                WriteLog("default",lBuffer,true);
                StopSystem("default",lBuffer);
            }

        }

        //! Check whether the timestamp also has to be written in the log file
        if(pTimeRequired)
        {
            sprintf(lMessage, "%s%s\n", lBuffer, pLogMsg);
        }
        else
        {
            sprintf(lMessage, "%s\n", pLogMsg);
        }

        //! Open the log file in append mode
        lFileDesc = fopen(LoaderLogFile, "a");
        if(lFileDesc != NULL)
        {
            fprintf(lFileDesc, lMessage);
            fflush(lFileDesc);
            fclose(lFileDesc);
        }
        else
        {
            printf("Unable to open the file \n");
        }

    }
    catch(...)
    {
        printf("Exception occured in WriteLog \n");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:29:54.410

我会宣布

```
 void WriteLog(const char* fileName, const char* pLogMsg, 
                 bool pTimeRequired); 
```

因为很可能你不会`fileName`改变`pLogMsg`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:30:49.770

这是因为字符串文字是不可修改的。但是为了向后兼容，它们被允许被视为`char*`而不是`const char*`.

通过将函数更改为：

```
void WriteLog(char* fileName, const char* pLogMsg, bool pTimeRequired); 
```

# ruby - 在绑定对象方面需要帮助

> ID：15630715
> 
> 赞同：1
> 
> 时间：2013-03-26T06:27:56.433
> 
> 标签：ruby, binding, ruby-2.0

来自[`Binding object`](http://www.ruby-doc.org/core-2.0/Binding.html)

> Binding 类的对象将执行上下文封装在代码中的某个特定位置，并保留此上下文以供将来使用。***在此上下文中可以访问***的变量、方法、self 的值以及可能的迭代器块都被保留。绑定对象可以使用 Kernel#binding 创建，并且**可用于 Kernel#set_trace_func 的回调**。

任何人都可以通过上面每条粗线的单个示例来帮助我理解这个事实吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:49:53.367

**方法：**

```
x = eval("foo", binding) rescue "foo undefined"
puts x

def foo; "foo"; end

puts eval("foo", binding) 
```

这输出：

```
foo undefined
foo 
```

**的价值`self`：**

```
puts eval("self", binding)
class Foo
  def eval_self
    eval("self", binding)
  end
end
puts Foo.new.eval_self 
```

这输出：

```
main
#<Foo:0x10c5a3018> 
```

**一个迭代器块：**

```
block = eval("yield", binding) rescue "no iterator block"
puts block

def block
  eval("yield", binding)
end
puts block { "iterator block" } 
```

这输出：

```
no iterator block
iterator block 
```

**内核#set_trace_func：**

```
class Test
  def test
    a = 1
  end
end

set_trace_func proc { |event, file, line, id, binding, classname|
  puts eval("self", binding)
}
t = Test.new
t.test 
```

这输出：

```
main
Test
#<Test:0x10204cb28>
#<Test:0x10204cb28>
Test
main
#<Test:0x10204cb28>
#<Test:0x10204cb28>
#<Test:0x10204cb28>
main
main
main 
```

您可以`Kernel#set_trace_func`在其[文档](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-set_trace_func)中了解更多信息。

# php - 调用过程时显示存储过程查询

> ID：15630717
> 
> 赞同：0
> 
> 时间：2013-03-26T06:28:07.177
> 
> 标签：php, stored-procedures, mysqli

我创建了一个这样的存储过程，并使用输入参数调用该过程。我想在正常情况下使用参数调用它时获得它自己的过程，就像回声查询一样。

```
 $procedure              =   "CREATE PROCEDURE pdruser_login(IN userName VARCHAR(300), IN password VARCHAR(500)) 
                                        BEGIN 
                                        DECLARE _sqlQuery VARCHAR(2046);
                                        SET _sqlQuery = 'SELECT login_id, authorized, admin_authorize FROM tbluser_login WHERE user_name = userName AND user_pwd = password AND authorized = 1 AND privacy_policy = 1 AND is_deleted = 0';
                                        SET @sqlQuery = _sqlQuery;
                                        PREPARE dynquery FROM @sqlQuery;
                                        EXECUTE dynquery;
                                        DEALLOCATE PREPARE dynquery;
                                        END;";              
            if (!mysqli_query($this->con,"DROP PROCEDURE IF EXISTS pdruser_login") ||!mysqli_query($this->con,$procedure))
                {
                    file_put_contents("minefile1.txt", "Stored procedure creation failed: (" . mysqli_errno($this->con) . ") " . mysqli_error($this->con));
                }
            if (!($result   =   mysqli_query($this->con,"CALL pdruser_login('".$userName."','".$password."'"))) 
                {
                    file_put_contents("minefile2.txt","CALL failed: (" . mysqli_errno($this->con) . ") " . mysqli_error($this->con));
                } 
```

但是上面的过程显示了一个错误“CALL failed: (1064) You have an error in your SQL syntax;检查与您的 MySQL 服务器版本相对应的手册，以便在第 1 行的 '' 附近使用正确的语法”。

如何在调用存储过程时显示存储过程查询。有没有办法获取动态查询，以便轻松跟踪复杂查询中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:53:33.600

首先要创建一个 MySQL 过程，您需要设置 DELIMITER 以外的 ; 然后在过程执行后重置定界符，因为在内部进程中所有块都应视为单个查询，但过程内部的查询可能会破坏 sql 语句（由于使用；）

来自 mysql 站点的示例。

```
DELIMITER // 
DROP PROCEDURE IF EXISTS GetAllProducts //
CREATE PROCEDURE GetAllProducts() 
BEGIN 
  SELECT * FROM products; 
END // 
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:35:41.670

出于某种原因，您没有将 SQL 存储在变量中 - 因此，您不能将它包含在调试信息中

```
$sql = "DROP PROCEDURE IF EXISTS pdruser_login";
mysqli_query($this->con,$sql) or trigger_error(mysqli_error($this->con)." [$sql]");
$sql = $procedure;
mysqli_query($this->con,$sql) or trigger_error(mysqli_error($this->con)." [$sql]");
// and so on. 
```

请注意，trigger_error 比 file_put_contents 更有用。它可以将错误放在日志文件中，也可以将其显示在屏幕上，这非常方便。它有必不可少的文件/行标记

# css - DIV 彼此相邻并防止换行（仅使用 css）

> ID：15630723
> 
> 赞同：0
> 
> 时间：2013-03-26T06:28:40.183
> 
> 标签：css, html, css-float, width

我有 3 个 DIV：**1.suiteBar**，**2.ribbonMain**，**3.ribbonSub**

我喜欢通过以下方式显示 DIV：

DIV1 (suiteBar) : 右（没有特定宽度）

DIV2（ribbonMain）：与DIV1在同一行（宽度：100％）

DIV3（ribbonSub）：在 DIV1+DIV2 下，在两个 DIV 的整个宽度上

那可能吗？每次当我给我的 DIV2 一个 100% 的宽度时，它都会产生一个“换行符”......请参阅我的小提琴示例和代码：

> [http://jsfiddle.net/dkHZS/](http://jsfiddle.net/dkHZS/)

```
 #topHeader { 
    display: block;
}
#suiteBar {
    background-color: Aqua;
    float: right;
    display: inline;
}
#ribbon {
    background-color: Lime;
    float: left;
    display: inline;
    width: 100%;
}
#ribbonSub {
    background-color: Gray;
}

<div id="topHeader">
  <div id="suiteBar">suiteBar</div>
  <div id="ribbon">ribbonMain
    <div id="ribbonSub">ribbonSub</div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:59:34.977

检查这个小提琴。

```
I use position. 
```

这种方法也很有效。

[http://jsfiddle.net/hassaan39/NbX7P/](http://jsfiddle.net/hassaan39/NbX7P/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:35:49.340

不要浮动功能区 div：

```
#suiteBar {
    background-color: Aqua;
    float: right;
}

#ribbon {
    background-color: Lime;
} 
```

[http://jsfiddle.net/dkHZS/4/](http://jsfiddle.net/dkHZS/4/)

此外，当您浮动元素时，它会变成块元素，因此将其设置为内联无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:31:38.413

`overflow:hidden`在右侧 div 上使用：http: [//jsfiddle.net/dkHZS/6/](http://jsfiddle.net/dkHZS/6/)

你可以这样做：

```
<div id="left">

</div>

<div id="right">

</div>

<div id="bottom">

</div> 
```

**CSS：**

```
 #left{
float:left;
width: 90%;
 background: green;
    height:20px;
}
#right{

    overflow:hidden;
    background: blue;
    height:20px;
}
#bottom{
width: 100%;
float:left;
    background: red;
    height:20px;
} 
```

# lua - Wireshark 有什么好的 Redis 解析器吗？

> ID：15630725
> 
> 赞同：2
> 
> 时间：2013-03-26T06:28:46.440
> 
> 标签：lua, redis, wireshark, wireshark-dissector

all：
Wireshark 有什么好的 Redis 解析器吗？我用过这个：[https](https://github.com/jzwinck/redis-wireshark) ://github.com/jzwinck/redis-wireshark ，但在解剖时似乎有些错误。
首先十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T07:23:55.690

我是 OP 中提到的 Redis Wireshark 插件的作者。我认为它的主要问题正是您在此处报告的内容：[https](https://github.com/jzwinck/redis-wireshark/issues/1) ://github.com/jzwinck/redis-wireshark/issues/1 - 即它不会重新组装 TCP 片段。我自己目前没有使用该插件，但如果您或其他人愿意提供补丁来改进它，我会很乐意接受它。

# iphone - ccTouchesMoved 有效，但 ccTouchMoved 无效

> ID：15630728
> 
> 赞同：1
> 
> 时间：2013-03-26T06:29:04.890
> 
> 标签：iphone, ios, cocos2d-iphone

self.isTouchEnabled = YES; 当然在init方法中。

```
-(void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];
}

-(void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

} 
```

在上面的代码中 ccTouchesMoved 工作正常，但 ccTouchMoved 没有调用.. 有什么帮助吗？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:20:02.680

Cocos2d 支持两种不同的触摸事件处理方式。它们由两种不同类型的委托定义（均在 CCTouchDelegateProtocol.h 中定义）。

**标准触控代理：** @optional

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event; 
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; 
- (void)ccTouchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event; 
```

这些事件与您在标准 CocoaTouch 应用程序中获得的事件类型相同。你会得到所有的事件，所有的接触；在多点触控环境中，由您决定您关心哪些触控。要在 CCLayer 子类中获取这些事件，您只需设置 isTouchEnabled = YES，如下所示：

self.isTouchEnabled = YES;

**有针对性的触摸代表**

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event; 
@optional 
- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event; 
- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event; 
- (void)ccTouchCancelled:(UITouch *)touch withEvent:(UIEvent *)event; 
```

请注意目标和标准触摸代理之间的**两个重要区别：**

1.  这些方法只提供一次触摸，而不是一组——因此，方法名称以“ccTouch”而不是“ccTouches”开头。

2.  ccTouchBegan 方法是必需的，它返回一个布尔值。

因此 ccTouchBegan 将为每个可用的触摸单独调用，并且您返回 YES 以指示您关心的触摸。**只有 ccTouchBegan 声明的触摸随后会传递到 Moved、Ended 和 Canceled 事件**（所有这些都是可选的）。

要接收这些事件，您必须向全局调度程序注册为目标触摸委托。在 CCLayer 子类中，重写 registerWithTouchDispatcher，如下所示：

-(void) registerWithTouchDispatcher {
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0swallowsTouches:YES]; }

（这意味着在文件顶部导入“CCTouchDispatcher.h”）。

**使用哪个？**

除了更复杂的注册之外，**目标触摸委托**通常更易于使用，因为您不必自己拆分 NSSet，也不必在 Moved 中不断检查事件是否是您想要的事件/结束/取消的事件。**但是**，如果您想在一种方法中处理多个触摸（例如，因为您将它们组合成缩放或旋转输入），您可能希望使用标准触摸委托。 **请注意，您只能使用其中一种。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:57:46.740

有两种行为：一种用于标准触摸，一种用于多次触摸。您不必这样做`addTargetedDelegate:::`，您可以简单地将`touchMode`属性设置为您喜欢的值。`CCLayer`将为您处理注册。

```
- (void)onEnter
{
    [self setTouchMode: kCCTouchesAllAtOnce]; //resp kCCTouchesOneByOne
} 
```

在幕后，更改`touchMode`将禁用然后重新启用触摸，启用触摸 ( `enableTouch`) 将为您注册正确的委托，方法是调用`addStandardDelegate`或`addTargetedDelegate`。

# triggers - 如何在unity3d中找出盒子对撞机的中心？

> ID：15630731
> 
> 赞同：1
> 
> 时间：2013-03-26T06:29:19.890
> 
> 标签：triggers, rotation, unity3d

嗨，我正在尝试构建一个游戏，如果我在设备上滑动，那么玩家应该在进入附近的对撞机后转 90 度。我希望转弯只发生在盒子对撞机的中心。现在玩家在输入触发器时正在转动..请帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:03:44.010

您可以通过以下方式获得对撞机的中心：

```
Vector3 center = collider.center; 
```

并且有一个建议来实现你想要的：

1.  检测 Collider.OnTriggerStay()，一旦收到这个事件，就开始记录玩家的输入。
2.  检测Collider.OnTriggerExit()，一旦接收到这个事件，就停止记录玩家输入，如果玩家刷屏，转动你的actor。
3.  重新定位触发器。

下面是一些伪代码：

```
bool shouldTurn = false;

void OnTriggerStay()
{
    if (true//player swiped)
    {
        shouldTurn = true;
    }
}

void OnTriggerExit()
{
    if (shouldTurn)
        //turn your actor

    shouldTurn = false;
} 
```

希望这可以帮助。

# android - 在 ddms 中，不显示相应的文件资源管理器窗口。谁能帮我查看这个窗口

> ID：15630735
> 
> 赞同：0
> 
> 时间：2013-03-26T06:29:31.793
> 
> 标签：android

另外请告诉我，我想播放本地原始文件夹中的视频。我的编码是

```
mPath.setText(("file:///Android_raw/toys.3gp")); 
```

但错误是无法播放视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:11:11.030

您可以通过打开 DDMS 选项卡来打开文件资源管理器。选择 DDM 后，将显示文件资源管理器选项卡。如果它不可见意味着加载文件资源管理器需要一些时间。否则你可以重新启动你的日食。

然后播放视频

```
VideoView myVideoView;
Uri uri = Uri.parse("android.resource://com.packagename/"+R.raw.videofilename);
myVideoView.setVideoURI(uri); 
```

在上面的代码中

而不是 com.packagename 放你的包名。

而不是 videofilename 把你的视频文件名。

就是这样......我希望你能理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:31:42.790

您可以通过这种方式打开`File Explorer`选项卡。

**窗口 --> 显示视图 --> 文件资源管理器**

如果您在 中没有看到`File Explorer`，请`Show View`执行此操作。

**窗口 --> 显示视图 --> 其他**& 然后在其中搜索**文件资源管理器**。

# python - Mac OSX 上的 Python EOF 错误

> ID：15630737
> 
> 赞同：0
> 
> 时间：2013-03-26T06:29:44.457
> 
> 标签：python, unix

所以我是编码的初学者，不久前我开始学习 Python！最近我正在编写自己的代码。这是一个从英语到pyg latin的翻译项目（只是一种在单词中添加“ay”的虚构语言。现在这是我的代码：

```
original = raw_input('Name any english word?')       

if len(original) > 0 and original.isalpha():     #Testing if variable has characters and not numbers
    word = original.lower()
    first = word[0]
    if first == 'a'  or first == 'e' or first == 'i' or first == 'o' or first == 'u':
        new_word = word + pyg                    #Word translated to pyg latin
        print new_word
    else:
        new_word = word[1:] + word[0] + pyg
        print new_word
else:
    print "empty"                                #No word active 
```

问题是我在第三行中不断收到 EOF 错误吗？有什么问题，什么是 EOF 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:27:37.473

代码需要的不仅仅是一些缩进修复，但我会原谅的。这适用于我在 OSx 和 PC 上。

```
original = raw_input('Name any english word?\n')
PYG = 'ay'
VOWELS = 'aeiou'
if len(original) > 0 and original.isalpha():     #Testing if variable has characters and not numbers
  word = original.lower()
  first = word[0]
  if first in VOWELS:
    new_word = ''.join([word, PYG])                    #Word translated to pyg latin
    print new_word
  else:
    new_word = ''.join([word[1:], word[0], PYG])
    print new_word
else:
  print 'Empty' 
```

使用`in`and`''.join()`更简单，更 Pythonic。`'\n'`只是在输入查询之前产生一个换行符。

至于你的奇怪错误......我希望你的 Mac 只是因为代码的各种问题之一而抛出一些东西。EOF 的意思是“文件结束”。`raw_input`可以抛出错误，但您所做的任何调用都不应该正常产生它。或者，这可能是因为您无意中使用了 Mac 随附的旧版 python，并且无法以相同的方式容纳其中一些调用。

总之，不重要。代码现在应该可以工作了。

# algorithm - “房子用三色着色”是NP吗？

> ID：15630743
> 
> 赞同：7
> 
> 时间：2013-03-26T06:29:55.080
> 
> 标签：algorithm, language-agnostic, complexity-theory, dynamic-programming, np

考虑[这里](http://www.careercup.com/question?id=9941005)描述的问题（转载如下。）可以将一些更知名的 NP 完全问题简化为它吗？

问题：

有一排房子。每个房子都可以涂上三种颜色：红色、蓝色和绿色。用某种颜色粉刷每个房子的成本是不同的。你必须给所有的房子涂漆，这样相邻的两个房子就没有相同的颜色。你必须以最低的成本粉刷房屋。你会怎么做？

注：将房屋 1 涂成红色的成本与将房屋 2 涂成红色的成本不同。房屋和颜色的每种组合都有其自身的成本。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-26T07:21:52.680

不，它不是[NP 难的](http://en.wikipedia.org/wiki/NP-hard)（从技术上讲，“ [NP 完全](http://en.wikipedia.org/wiki/NP-complete)”是错误的术语，因为这不是决策问题）。

[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)有效，并为您提供 O( *n* ) 时间算法。（*n*是房屋数量）。

您维护三个数组`R[1..n], B[1..n], G[1..n]`，其中`R[i]`是绘制房屋 1、2、3 ... 的最低成本，`i`例如`i`红色。同样`B[i]`，涂漆 1、2 ... 的最低成本是`i`蓝色`i`的，并且`G[i]`是`i`绿色的。

您可以计算`R[i+1]`: `R[i+1]= (Cost of painting house i+1 Red) + minimum {G[i], B[i]}`。

类似`B[i+1]`和`G[i+1]`可以计算。

最终你会取最少的`R[n], B[n] and G[n]`.

这是 O( *n* ) 时间和 O( *n* ) 空间。

例如，考虑以下房屋的成本矩阵：

```
房屋编号：1 2 3
右：1 4 6
克：2 100 2
乙：3 100 4

```

该算法正在构建以下矩阵以获得答案：

```
房屋：0 1 2 3
R：0 1 6 107
克：0 2 101 8
乙：0 3 101 10

```

从最后一列中，所有 3 栋房屋都已涂漆，我们可以找到最小成本，等于 8，对应于组合 [Green (2), Red (4), Green (2)]。

快速Python：

```
# rc = costs of painting red, bc of blue and gc of green.
def min_paint(rc, bc, gc):
    n, i = len(rc), 1
    r, b, g = [0]*n, [0]*n, [0]*n
    r[0], b[0], g[0] = rc[0], bc[0], gc[0]
    while i < n:
        r[i] = rc[i] + min(b[i-1], g[i-1])
        b[i] = bc[i] + min(r[i-1], g[i-1])
        g[i] = gc[i] + min(b[i-1], r[i-1])
        i += 1

    return min(r, b, g)

def main():
    print min_paint([1, 4, 6], [2, 100, 2], [3, 100, 4])

if __name__ == "__main__":
    main() 
```

输出将是 ([1, 6, 107], [2, 101, 8], [3, 101, 10])，这是一个导致解决方案的成本矩阵。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-14T14:13:35.377

@Knoothe 的解释很到位，但我相信可以改进实现 - 它使用`O(n)`额外的空间来存储以前的值，但我们可以`O(1)`通过注意到我们只需要每种颜色的以前的值，而不是整个值数组。就是这样：

```
def min_paint(rc, bc, gc):
    # `r` is the min cost of painting the current house
    # using color red; similarly for `b` and `g`
    r, b, g = 0, 0, 0
    for cr, cb, cg in zip(rc, bc, gc):
        # new value for `r` is current cost for `r` plus the
        # minimum cost for painting the previous house in one
        # of the other two colors; similarly for `b` and `g`
        r, b, g = cr + min(b, g), cb + min(r, g), cg + min(r, b)
    # answer is the min cost for painting the last house
    return min(r, b, g) 
```

例如：

```
min_paint([1, 4, 6], [2, 100, 2], [3, 100, 4])
=> 8 
```

# jquery - 如何对 jQuery 进行编码以引用我的根文件夹中的图像作为背景图像？

> ID：15630746
> 
> 赞同：0
> 
> 时间：2013-03-26T06:30:03.490
> 
> 标签：jquery, background, directory, root

我想让用户更改我网页的背景。这是我的一些 jQuery 代码：

```
$("#green_box1").click(function() {
        $.backstretch('http://www.cosmetichouseintl.com/wp-content/uploads/2011/05/MP900406576.jpg');
        }) 
```

我正在使用这里推荐的 backstretch 插件：http: [//srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

它工作得很好，除了据我所知，我只能从网址引用图像，我更愿意从我的根文件夹引用背景图像。有没有办法我可以用不同的方式编码来引用我的根文件夹中的图像而不是在线图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:37:36.543

如果 image.jpg 与您的代码所在的文件位于同一文件夹中，您可以简单地使用：

```
$("#green_box1").click(function() {
    $.backstretch('image.jpg');
}) 
```

如果当您在文件的文件夹中时，image.jpg 在名为“yourFolder”的文件夹中，您可以使用：

```
$("#green_box1").click(function() {
    $.backstretch('yourFolder/image.jpg');
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:42:34.037

目前，您正在提供

[http://www.cosmetichouseintl.com/wp-content/uploads/2011/05/MP900406576.jpg](http://www.cosmetichouseintl.com/wp-content/uploads/2011/05/MP900406576.jpg)

这意味着 MP900406576.jpg 存在于化妆品houseint1 域中，并且存在于目录结构中为 wp-content/uploads/2011/05/

同样，您也可以将路径放置到您的图像文件中，例如

```
$("#green_box1").click(function() {
    $.backstretch('path_to_the_imag_folder/imagename.jpg');
}) 
```

# iphone - uitableview reloadRowsAtIndexPaths 不起作用

> ID：15630752
> 
> 赞同：0
> 
> 时间：2013-03-26T06:30:25.930
> 
> 标签：iphone, ios, delegates, tableview

我有一个`tableviewcell`，`RegisterViewController`当我点击它时，它会推送到`SelectCityViewController`我可以从中选择一个城市的地方`uipickerview`。我已经在`SelectCityViewController`. 但是当我实现委托方法时，我从 中取回了城市并从中`pickerview`选择`indexpath`了。当我检查日志时，我得到了城市和选定的. 但是当我打电话时，单元格仍然有旧的标题标签文本。编码：`didSelectRowAtIndexPath``RegisterViewController``indexpath``reloadRowsAtIndexPaths`

```
SelectCityViewController.h

@protocol SelectCityDelegate <NSObject>

- (void)didGetCity:(City *)city;

@end

SelectCityViewController.m

- (void)finished:(UIBarButtonItem *)buttonItem
{
    if ([self.delegate respondsToSelector:@selector(didGetCity:)]) {
        [self.delegate didGetCity:self.city];
    }
    NSLog(@"%@", self.city.city);
    [self.navigationController popViewControllerAnimated:YES];
}

RegisterViewController.m

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 2) {
        self.selectedIndexPath = indexPath;
        UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
        SelectCityViewController *signUp = [storyBoard instantiateViewControllerWithIdentifier:@"SignVC"];
        signUp.delegate = self;
        [self.navigationController pushViewController:signUp animated:YES];
    }
}

- (void)didGetCity:(City *)city
{
    NSLog(@"%@", city.city);
    NSLog(@"%@", selectedIndexPath);
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:selectedIndexPath];
    cell.textLabel.text = city.city;
    [self.tableView reloadRowsAtIndexPaths:@[selectedIndexPath] withRowAnimation:UITableViewRowAnimationFade];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:45:05.853

`didGetCity`需要更新支持表格的模型，而不是表格单元格本身。你怎么回答`numberOfRowsInSection:`？随着一些数组的计数？

索引处的数组`selectedIndexPath.row`需要更改。 `cellForRowAtIndexPath:`应该使用相同的数据初始化单元格。然后您的 didGetCity 方法会更新数组并重新加载。它不应该指代细胞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:32:26.933

我认为问题出在下面的代码中，您不必在此处设置值，因为当您重新加载时，它将用您创建单元格的函数中的值覆盖该值。

```
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:selectedIndexPath];
cell.textLabel.text = city.city; 
```

只需重新加载单元格，并将上面的代码放入您的

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

   //Cell intialization and other things

      cell.textLabel.text = city.city;
} 
```

# iphone - UIBezierPath 有多种颜色？

> ID：15630759
> 
> 赞同：2
> 
> 时间：2013-03-26T06:31:09.967
> 
> 标签：iphone, ios, uibezierpath

我正在从事`UIBezierPath`用于绘图的项目。我的问题是当我改变路径的颜色时，整个`UIBezierPath`颜色都会改变。我想问一下是否可以`UIBezierPath`用多条线改变颜色。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:36:35.023

对于一个单一的 UIBezier 路径，你不能 AFAIK

你可以做这样的事情

///// 在drawRect中添加这个

```
for (NSMutableDictionary *dic in pathArray) {
    UIBezierPath *_path = [dic valueForKey:@"path"];
    [[dic valueForKey:@"fColor"] setFill]; 
    [[dic valueForKey:@"sColor"] setStroke];
    [_path stroke]; 
  } 
```

在触摸事件中填充数组

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    self.currentPath=[[UIBezierPath alloc]init];
    self.currentPath.lineWidth=5;
    self.currentPath.miterLimit=-10;
    self.currentPath.lineCapStyle = kCGLineCapRound;
    self.currentPath.flatness = 0.0;

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [self.currentPath moveToPoint:[mytouch locationInView:self]];
    NSMutableDictionary *dic = [[NSMutableDictionary alloc] init];
    [dic setObject:currentfColor forKey:@"fColor"];
    [dic setObject:currentsColor forKey:@"sColor"];
    [dic setObject:self.currentPath forKey:@"path"];
    [pathArray addObject:dic];

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    [self.currentPath addLineToPoint:[touch locationInView:self.view]];
    [self.view setNeedsDisplay];
} 
```

**PS：这只是一个例子。我还没有检查过这段代码，但它应该可以工作，可能需要一些改动。**

# android - 如何在 Android 上设置 Http 连接超时

> ID：15630761
> 
> 赞同：2
> 
> 时间：2013-03-26T06:31:27.183
> 
> 标签：android

我正在编写一个连接到 web 服务的应用程序，如果它无法获得连接，我不希望它等待太久。因此，我设置了 httpparams 的 connectionTimeout。但它似乎没有任何效果。

这是我的代码

```
public void doPost(ArrayList<NameValuePair> list) {

        HttpPost post = new HttpPost(URL);
        HttpParams httpParameters = new BasicHttpParams();
        // Set the timeout in milliseconds until a connection is established.
        // The default value is zero, that means the timeout is not used.
        int timeoutConnection = 3000;
        HttpConnectionParams.setConnectionTimeout(httpParameters,
                timeoutConnection);
        // Set the default socket timeout (SO_TIMEOUT)
        // in milliseconds which is the timeout for waiting for data.
        int timeoutSocket = 5000;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

        DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);

        httpClient.setParams(httpParameters);
        try {
            post.setEntity(new UrlEncodedFormEntity(list));
            HttpResponse response = httpClient.execute(post);

            Log.i("response ", response.toString());

            Log.i("response code", ""
                    + response.getStatusLine().getStatusCode());

            if (response != null) {

                HttpEntity entity = response.getEntity();

                if (entity != null) {
                    InputStream instream = entity.getContent();
                    result = convertStreamToString(instream);
                    Log.i("Result ", result);
                    // Closing the input stream will trigger connection release
                    instream.close();
                }
            } else {
                Log.i("SERVER ERROR ", "Server Not responding");
            }
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

现在我添加异常

但我的日志类别会在 5 秒内显示任何错误。它会给我 2 3 mint 的错误。

这是错误

```
03-26 12:36:59.165: W/System.err(491): java.net.SocketException: The operation timed out
03-26 12:36:59.165: W/System.err(491):  at org.apache.harmony.luni.platform.OSNetworkSystem.connectStreamWithTimeoutSocketImpl(Native Method)
03-26 12:36:59.165: W/System.err(491):  at org.apache.harmony.luni.platform.OSNetworkSystem.connect(OSNetworkSystem.java:115)
03-26 12:36:59.165: W/System.err(491):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:244)
03-26 12:36:59.165: W/System.err(491):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:533)
03-26 12:36:59.165: W/System.err(491):  at java.net.Socket.connect(Socket.java:1055)
03-26 12:36:59.165: W/System.err(491):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
03-26 12:36:59.165: W/System.err(491):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
03-26 12:36:59.165: W/System.err(491):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-26 12:36:59.165: W/System.err(491):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-26 12:36:59.165: W/System.err(491):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348)
03-26 12:36:59.165: W/System.err(491):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-26 12:36:59.165: W/System.err(491):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-26 12:36:59.165: W/System.err(491):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-26 12:36:59.165: W/System.err(491):  at com.raa.json.JsonParser1.getJSONFromUrl(JsonParser1.java:39)
03-26 12:36:59.165: W/System.err(491):  at com.raa.activity.ProductListActivity$MyTask.doInBackground(ProductListActivity.java:168)
03-26 12:36:59.165: W/System.err(491):  at com.raa.activity.ProductListActivity$MyTask.doInBackground(ProductListActivity.java:1)
03-26 12:36:59.165: W/System.err(491):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-26 12:36:59.165: W/System.err(491):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-26 12:36:59.165: W/System.err(491):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-26 12:36:59.165: W/System.err(491):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
03-26 12:36:59.165: W/System.err(491):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
03-26 12:36:59.165: W/System.err(491):  at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T07:17:24.987

试试这个，private static long TIME_OUT_IN_SECONDS = 120;

```
 System.out.println("posthhhhhhhhhhhhhhhhhhh");

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = null;
        long requestStratTime = new Date().getTime();

        httpResponse = httpClient.execute(httpPost);
        long requestEndTime = new Date().getTime();
        Log.d("requestStratTime", "requestStratTime" + requestStratTime);
        Log.d("requestEndTime", "requestEndTime" + requestEndTime);
        long timeOfRequest = (requestEndTime - requestStratTime) / 1000;
        Log.d("timeOfRequest", "timeOfRequest" + timeOfRequest);
        if (httpResponse == null && timeOfRequest > TIME_OUT_IN_SECONDS) {

            throw new TimeOutException();
        }

        int responseCode = httpResponse.getStatusLine().getStatusCode();
        System.out.println("responseCode" + responseCode);
        String ss = httpResponse.getStatusLine().toString();
        System.out.println("ssssssssssssssssssssssss" + ss);
        if (responseCode == 200) {

            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } else {
            throw new ParsingException();
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:35:08.573

捕捉 SocketTimeoutException 和 ConnectTimeoutException 。

```
catch (SocketTimeoutException e) 
{
     e.printStackTrace();
}
catch (ConnectTimeoutException e)
{
     e.printStackTrace();
} 
```

# android - 权限拒绝：permission.MAPS_RECEIVE 由于发件人 com.google.android.apps.maps

> ID：15630768
> 
> 赞同：1
> 
> 时间：2013-03-26T06:32:00.323
> 
> 标签：android, android-maps-v2

我导入了一个地图样本并运行该应用程序，运行该应用程序后它显示一个白色的地图屏幕。

我在Locat中发现了一个警告说

`W/BroadcastQueue(306): Permission Denial: receiving Intent { act=com.google.android.maps.api.action.TOKEN_RESPONSE flg=0x10 pkg=com.example.mapdemo (has extras) } to ProcessRecord{42554900 5306:com.example.mapdemo/u0a216} (pid=5306, uid=10216) requires com.example.mapdemo.permission.MAPS_RECEIVE due to sender com.google.android.apps.maps (uid 10031)`

我彻底检查了清单，无法追踪任何问题。请在下面找到我的清单权限。

```
 <permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
  <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>
  <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
  <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

请让我知道可能的解决方案

更新：我能够摆脱该警告。错误是我使用的是 v1 api 密钥。但是我仍然无法获取地图。显示白屏，没有任何警告或错误。

问候，
沙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T06:34:40.870

确保您的清单有

```
<permission
        android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/> 
```

还要确保您在地图 api 控制台中设置了密钥（调试或发布）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T06:50:34.543

**`@Gabe Sechan`现在完全不需要这个权限了。Google Play Services 3.1.59 的最新更新使其毫无用处。结果，它可以被删除。**

因此，请务必更新最新的 google play 服务。

# node.js - Node.js 检查路径是文件还是目录

> ID：15630770
> 
> 赞同：497
> 
> 时间：2013-03-26T06:32:14.203
> 
> 标签：node.js, path, directory, filesystems, fs

我似乎无法获得任何解释如何执行此操作的搜索结果。

我想要做的就是能够知道给定路径是文件还是目录（文件夹）。

* * *

## 回答 #1

> 赞同：790
> 
> 时间：2013-03-26T06:36:58.300

下面应该告诉你。从[文档](https://nodejs.org/docs/latest/api/fs.html#fs_class_fs_stats)：

```
fs.lstatSync(path_string).isDirectory() 
```

> 从 fs.stat() 和 fs.lstat() 返回的对象属于这种类型。
> 
> ```
> stats.isFile()
> stats.isDirectory()
> stats.isBlockDevice()
> stats.isCharacterDevice()
> stats.isSymbolicLink() // (only valid with fs.lstat())
> stats.isFIFO()
> stats.isSocket() 
> ```

### 笔记：

上述**解决方案**将`throw`是一个`Error`if；例如，`file`or`directory`不存在。

如果您想要一种`true`或方法，请按照约瑟夫在下面的评论中提到的方法进行`false`尝试。`fs.existsSync(dirPath) && fs.lstatSync(dirPath).isDirectory();`

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2017-04-30T00:42:15.373

## 更新：Node.Js >= 10

我们可以使用新的[fs.promises](https://nodejs.org/dist/latest-v10.x/docs/api/fs.html#fs_fs_promises_api) API

```
const fs = require('fs').promises;

(async() => {
    const stat = await fs.lstat('test.txt');
    console.log(stat.isFile());
})().catch(console.error) 
```

* * *

## 任何 Node.Js 版本

以下是如何**异步**检测路径是文件还是目录，这是 node.js 中推荐的方法。使用[fs.lstat](https://nodejs.org/docs/latest/api/fs.html#fs_fs_lstat_path_callback)

```
const fs = require("fs");

let path = "/path/to/something";

fs.lstat(path, (err, stats) => {

    if(err)
        return console.log(err); //Handle error

    console.log(`Is file: ${stats.isFile()}`);
    console.log(`Is directory: ${stats.isDirectory()}`);
    console.log(`Is symbolic link: ${stats.isSymbolicLink()}`);
    console.log(`Is FIFO: ${stats.isFIFO()}`);
    console.log(`Is socket: ${stats.isSocket()}`);
    console.log(`Is character device: ${stats.isCharacterDevice()}`);
    console.log(`Is block device: ${stats.isBlockDevice()}`);
}); 
```

* * *

使用同步 API 时注意：

> 使用同步形式时，会立即抛出任何异常。您可以使用 try/catch 来处理异常或允许它们冒泡。

```
try{
     fs.lstatSync("/some/path").isDirectory()
}catch(e){
   // Handle error
   if(e.code == 'ENOENT'){
     //no such file or directory
     //do something
   }else {
     //do something else
   }
} 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2018-11-29T00:31:38.113

说真的，问题存在五年而没有漂亮的外观？

```
function isDir(path) {
    try {
        var stat = fs.lstatSync(path);
        return stat.isDirectory();
    } catch (e) {
        // lstatSync throws an error if path doesn't exist
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-03-19T20:57:31.090

根据您的需要，您可能可以依赖节点的`path`模块。

您可能无法访问文件系统（例如，尚未创建文件）并且您可能希望避免访问文件系统，除非您确实需要额外的验证。如果您可以假设您正在检查的内容遵循`.<extname>`格式，只需查看名称即可。

显然，如果您正在寻找一个没有 extname 的文件，您需要点击文件系统来确定。但保持简单，直到你需要更复杂。

```
const path = require('path');

function isFile(pathItem) {
  return !!path.extname(pathItem);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-04T08:16:01.693

这是我使用的一个功能。没有人在这篇文章中使用`promisify`和`await/async`功能，所以我想我会分享。

```
const promisify = require('util').promisify;
const lstat = promisify(require('fs').lstat);

async function isDirectory (path) {
  try {
    return (await lstat(path)).isDirectory();
  }
  catch (e) {
    return false;
  }
} 
```

注意：我不使用`require('fs').promises;`，因为它已经实验一年了，最好不要依赖它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-12T22:00:33.930

# 如果您在遍历目录时需要这个¹

从 Node 10.10+ 开始，`fs.readdir`具有`withFileTypes`使其返回目录条目[`fs.Dirent`](https://nodejs.org/docs/latest-v16.x/api/fs.html#class-fsdirent)而不仅仅是文件名的选项。目录条目包含其`name`有用的方法，例如`isDirectory`or `isFile`，因此您无需`fs.lstat`显式调用！

你可以像这样使用它：

```
import { promises as fs } from 'fs';

// ./my-dir has two subdirectories: dir-a, and dir-b
const dirEntries = await fs.readdir('./my-dir', { withFileTypes: true });

// let's filter all directories in ./my-dir
const onlyDirs = dirEntries.filter(de => de.isDirectory()).map(de => de.name);
// onlyDirs is now [ 'dir-a', 'dir-b' ] 
```

^(1）因为这就是我发现这个问题的方式。)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-24T06:20:41.753

上面的答案检查文件系统是否包含文件或目录的路径。但它不能确定给定路径是文件还是目录。

> 答案是使用“/”来识别基于目录的路径。比如 --> "/c/dos/run/." <-- 尾随期间。

就像尚未写入的目录或文件的路径。或者来自不同计算机的路径。或同时存在同名文件和目录的路径。

```
// /tmp/
// |- dozen.path
// |- dozen.path/.
//    |- eggs.txt
//
// "/tmp/dozen.path" !== "/tmp/dozen.path/"
//
// Very few fs allow this. But still. Don't trust the filesystem alone!

// Converts the non-standard "path-ends-in-slash" to the standard "path-is-identified-by current "." or previous ".." directory symbol.
function tryGetPath(pathItem) {
    const isPosix = pathItem.includes("/");
    if ((isPosix && pathItem.endsWith("/")) ||
        (!isPosix && pathItem.endsWith("\\"))) {
        pathItem = pathItem + ".";
    }
    return pathItem;
}
// If a path ends with a current directory identifier, it is a path! /c/dos/run/. and c:\dos\run\.
function isDirectory(pathItem) {
    const isPosix = pathItem.includes("/");
    if (pathItem === "." || pathItem ==- "..") {
        pathItem = (isPosix ? "./" : ".\\") + pathItem;
    }
    return (isPosix ? pathItem.endsWith("/.") || pathItem.endsWith("/..") : pathItem.endsWith("\\.") || pathItem.endsWith("\\.."));
} 
// If a path is not a directory, and it isn't empty, it must be a file
function isFile(pathItem) {
    if (pathItem === "") {
        return false;
    }
    return !isDirectory(pathItem);
} 
```

节点版本：v11.10.0 - 2019 年 2 月

> 最后的想法：为什么还要访问文件系统？

# oracle - 在Oracle中创建表之前检查表是否存在

> ID：15630771
> 
> 赞同：36
> 
> 时间：2013-03-26T06:32:23.640
> 
> 标签：oracle, if-statement

在 Oracle 中创建之前尝试检查表是否存在。搜索来自 Stackoverflow 和其他人的大部分帖子。查找一些查询，但它对我不起作用。

```
IF((SELECT count(*) FROM dba_tables where table_name = 'EMPLOYEE') <= 0)
THEN
create table EMPLOYEE
(
ID NUMBER(3),
NAME VARCHAR2(30) NOT NULL
)
END IF; 
```

这给了我错误

```
Error: ORA-00900: invalid SQL statement
SQLState:  42000
ErrorCode: 900
Position: 1 
```

我搜索条件的语法`IF`，我认为这也是写的。请建议我....

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-26T09:16:14.850

正如 Rene 还评论的那样，先检查然后创建表的情况很少见。如果您想根据您的方法运行代码，这将是：

```
declare
nCount NUMBER;
v_sql LONG;

begin
SELECT count(*) into nCount FROM dba_tables where table_name = 'EMPLOYEE';
IF(nCount <= 0)
THEN
v_sql:='
create table EMPLOYEE
(
ID NUMBER(3),
NAME VARCHAR2(30) NOT NULL
)';
execute immediate v_sql;

END IF;
end; 
```

但我宁愿抓住异常，为您节省一些不必要的代码行：

```
declare
v_sql LONG;
begin

v_sql:='create table EMPLOYEE
  (
  ID NUMBER(3),
  NAME VARCHAR2(30) NOT NULL
  )';
execute immediate v_sql;

EXCEPTION
    WHEN OTHERS THEN
      IF SQLCODE = -955 THEN
        NULL; -- suppresses ORA-00955 exception
      ELSE
         RAISE;
      END IF;
END; 
/ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-03T15:52:18.907

我知道这个话题有点老了，但我认为我做了一些可能对某人有用的事情，所以我发布了它。

我将此线程的答案中的建议编译成一个过程：

```
CREATE OR REPLACE PROCEDURE create_table_if_doesnt_exist(
  p_table_name VARCHAR2,
  create_table_query VARCHAR2
) AUTHID CURRENT_USER IS
  n NUMBER;
BEGIN
  SELECT COUNT(*) INTO n FROM user_tables WHERE table_name = UPPER(p_table_name);
  IF (n = 0) THEN
    EXECUTE IMMEDIATE create_table_query;
  END IF;
END; 
```

然后，您可以通过以下方式使用它：

```
call create_table_if_doesnt_exist('my_table', 'CREATE TABLE my_table (
        id NUMBER(19) NOT NULL PRIMARY KEY,
        text VARCHAR2(4000),
        modified_time TIMESTAMP
  )'
); 
```

我知道两次传递表名有点多余，但我认为这是最简单的。

希望有人发现上面有用:-)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T06:56:52.207

请试试：

```
SET SERVEROUTPUT ON
DECLARE
v_emp int:=0;
BEGIN
  SELECT count(*) into v_emp FROM dba_tables where table_name = 'EMPLOYEE'; 

  if v_emp<=0 then
     EXECUTE IMMEDIATE 'create table EMPLOYEE ( ID NUMBER(3), NAME VARCHAR2(30) NOT NULL)';
  end if;
END; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-23T20:43:25.293

```
declare n number(10);

begin
   select count(*) into n from tab where tname='TEST';

   if (n = 0) then 
      execute immediate 
      'create table TEST ( ID NUMBER(3), NAME VARCHAR2 (30) NOT NULL)';
   end if;
end; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-13T14:14:27.757

我的解决方案只是在线程中汇总最佳想法，并稍作改进。我使用专用过程 (@Tomasz Borowiec) 来促进重用，并使用异常处理 (@Tobias Twardon) 来减少代码并消除过程中的冗余表名。

```
DECLARE

    PROCEDURE create_table_if_doesnt_exist(
        p_create_table_query VARCHAR2
    ) IS
    BEGIN
        EXECUTE IMMEDIATE p_create_table_query;
    EXCEPTION
        WHEN OTHERS THEN
        -- suppresses "name is already being used" exception
        IF SQLCODE = -955 THEN
            NULL; 
        END IF;
    END;

BEGIN
    create_table_if_doesnt_exist('
        CREATE TABLE "MY_TABLE" (
            "ID" NUMBER(19) NOT NULL PRIMARY KEY,
            "TEXT" VARCHAR2(4000),
            "MOD_TIME" TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
    ');
END;
/ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-17T14:09:11.387

-- 检查特定模式中的表：

```
declare n number(10);

begin
    Select count(*) into n  from SYS.All_All_Tables where owner = 'MYSCHEMA' and TABLE_NAME =  'EMPLOYEE';

   if (n = 0) then 
     execute immediate 
     'create table MYSCHEMA.EMPLOYEE ( ID NUMBER(3), NAME VARCHAR2(30) NOT NULL)';      
   end if;
end; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-28T05:15:03.447

任何依赖于在创建之前进行测试的解决方案都可能遇到“竞争”情况，即另一个进程在您测试它不存在并创建它之间创建表。- 我知道的小问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-23T11:19:53.957

好吧，已经提供了很多答案，而且很多答案也很有意义。

有些人提到这只是警告，有些人提供了一种临时方法来禁用警告。***当您的数据库中的事务数量很高时，***所有这些都会起作用，但会增加风险。

我今天遇到了类似的情况，这是我想出的***非常简单的查询...***

```
declare
begin
  execute immediate '
    create table "TBL" ("ID" number not null)';
  exception when others then
    if SQLCODE = -955 then null; else raise; end if;
end;
/ 
```

> # 955 是故障代码。

这很简单，如果在运行查询时出现异常，它将被抑制。并且您可以将其用于`SQL`or `Oracle`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-16T09:24:32.583

它也不需要声明和计数。

```
begin
for rec in (select 1 from user_tables where table_name = 'YOUR_TABLE')
-- or
-- for rec in (select 1 from all_tables where table_name = 'YOUR_TABLE' and owner = 'YOU')
loop
    execute immediate 'create table your_table as (f1 char(1))';
end loop;
end;
/ 
```

将好模式创建检查功能

```
create or replace function this_object_exists (p_obj_name user_objects.object_name%type) return boolean
is
begin
   for rec in (select 1 from user_objects where object_name = upper(p_obj_name))
   loop
        return true;
   end loop;
   return false;
end this_object_exists; 
```

因此使用代码进行检查存在

| . | . | . | . |
| --- | --- | --- | --- |
| 索引分区 | 表子分区 | 序列 | 表分区 |
| 程序 | LOB 分区 | 高球 | 索引子分区 |
| 包裹 | 包体 | 正文 | 扳机 |
| 指数 | 桌子 | 看法 | 功能 |
| 代名词 | 类型 | 工作 | ... |

```
begin
if not this_object_exists('your_table') then
    execute immediate 'create table your_table as (f1 char(1))';
end if;
end; 
```

或者

```
begin
if this_object_exists('your_table') then
    execute immediate 'drop table your_table';
end if;
execute immediate 'create table your_table as (f1 char(1))';
end; 
```

# ios - 是否有 NSMapTable 的 NSMutableArray 版本？

> ID：15630774
> 
> 赞同：3
> 
> 时间：2013-03-26T06:32:27.477
> 
> 标签：ios, objective-c, nsmutablearray, nsmutabledictionary, weak-references

我想保留**对**`mutable array`一组. 非常适合这种需求，除了一个细节......想要一个它拥有的每一个价值的关键。**`UIViews``NSMapTable``NSMapTable`**

 **有类似的东西`NSMapArray`吗？如果没有，我是否需要为我存储的所有值生成一次性唯一键？我应该使用`NSUUID`生成键名吗？

**编辑：**请不要说我在谈论真正的**弱**自归零参考。CFArrays 和 NSValue 解决方案存储引用，当它们的引用对象被释放时，这些引用不会自行消失......它们最终会成为垃圾指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:17:05.720

您可以在 iOS 6 上尝试`NSHashTable`，它类似于 a `NSSet`，支持弱引用（`NSPointerArray`看起来也不错，但文档说它*不支持 ARC 下的弱引用*）。

`NSPointerArray` *编辑：有些人似乎*认为与文档所说的相反，ARC下的弱引用为零。OS X 10.8 Foundation Release Notes 是这么说的，尽管类文档说相反（iOS 发布说明没有说）。毕竟，这就是他们在 OS X 10.8 和 iOS 6.0 中添加`+ weakObjectsPointerArray`构造函数和`NSPointerFunctionsWeakMemory`选项的原因......你应该尝试......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T07:39:45.350

你所说的有点自相矛盾：一方面你说你希望它们将弱引用归零，在这种情况下，你的数组将`nil`在它们被释放后填充元素。另一方面，您说您希望它像`NSMapTable`，这可能会在弱引用被释放后删除元素。它是哪一个？

如果您希望它真正将弱引用归零（这将`nil`在您的数组中留下元素），一个好的解决方案是使用`std::vector<id __weak>`一个 C++ 向量，其元素正在归零弱引用。ARC 将处理所有细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:50:21.793

您说将弱引用存储在数组中很重要。这可以使用 Core Foundation 数组来实现。你会在这里找到答案：[非保留数组代表](https://stackoverflow.com/questions/4692161/non-retaining-array-for-delegates)。**

# paypal - 如何在个人测试帐户中登录 https://www.sandbox.paypal.com/

> ID：15630776
> 
> 赞同：0
> 
> 时间：2013-03-26T06:32:32.843
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments

我在[https://developer.paypal.com/](https://developer.paypal.com/)上创建了一个帐户，然后创建了一个个人帐户和一个企业帐户，现在我想测试这些帐户以在沙盒上进行交易，但是在沙盒上我可以无法以个人帐户和企业帐户登录[https://www.sandbox.paypal.com/](https://www.sandbox.paypal.com/) 我使用了我的个人帐户和企业帐户的电子邮件地址和密码。我如何在贝宝沙盒上进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:10:17.233

我也经历了这些阶段，无论如何，在使用您在 https://www.paypal.com/ 创建的贝宝帐户[登录](https://developer.paypal.com/)[https://developer.paypal.com/](https://www.paypal.com/)后，您会发现一个应用程序菜单在那里，在左侧你会找到sandbox_accounts，paypal会自动创建你的商家账户，这个商家账户将在paypal api中用作卖家，你的个人账户将用于支付等交易。

# pysvn - 从具有更改路径的存储库中检索日志消息

> ID：15630777
> 
> 赞同：0
> 
> 时间：2013-03-26T06:32:40.433
> 
> 标签：pysvn

Pysvn：我正在尝试从存储库中读取所有日志消息，其路径已更改。使用 pysvn.client.log 仅检索当前路径之前的日志消息，但我想读取所有日志消息，包括更改的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T21:54:16.797

这由`strict_node_history`参数控制（参见[pysvn - 程序员参考](http://pysvn.tigris.org/docs/pysvn_prog_ref.html#pysvn_client_log)）。您必须将其设置为 false，以便日志在路径更改之前返回修订。

```
log = client.log(url,
                 revision_start = pysvn.Revision( pysvn.opt_revision_kind.head),
                 revision_end=pysvn.Revision( pysvn.opt_revision_kind.number, 0),
                 discover_changed_paths=True,
                 strict_node_history=False,
                 limit=0,
                 include_merged_revisions=False,) 
```

# css - CSS继承，或类似的东西

> ID：15630779
> 
> 赞同：0
> 
> 时间：2013-03-26T06:32:43.410
> 
> 标签：css

这可能是个愚蠢的问题，但它就在这里。

我的 css 文件中有 3 个 ID，它们都有相同的代码。例如：

```
#ID1 {
    // some code
    width: 300px;
    height: 300px;
}    
#ID2 {
    // some code
    width: 300px;
    height: 300px;
}    
#ID3 {
    // some code
    width: 300px;
    height: 300px;
} 
```

我的问题是：是否可以在 CSS 中创建一些类或 ID，并在另一个 CSS 类或 ID 中调用它。例如：

```
#setting {
    width: 300px;
    height: 300px;
}
#ID1 {
    .setting        
    // some code
}    
#ID2 {
    .setting  
    // some code
}    
#ID3 {
    .setting  
    // some code
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:06:14.197

您可以在单个元素上使用多个 CSS 类。

您可以创建“通用”类并将它们应用于元素。

例如：

```
<div class="class1 class2">some content</div> 
```

请记住，如果 class1 和 class2 中存在公共属性，则 class2 中该属性的值将覆盖该元素上 class1 中的值，最终该元素将具有 class2 中定义的值。

真正的旧浏览器不支持这一点，但很可能你不应该担心它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:47:52.117

您可以通过应用对其父类的引用来覆盖 css，请查看以下示例：

```
#setting {
width: 300px;
height: 300px;
}
#ID1 .setting {
   // some code
}    
#ID2 .setting  {
   // some code
}    
#ID3 .setting  {
   // some code
} 
```

上面的代码将分别应用 ID1、ID2、ID3 内的所有“设置”类标签。如果您的“设置”孩子是直接班级，那么您可以在下面作为示例：

```
#setting {
width: 300px;
height: 300px;
}
#ID1 > .setting {
   // some code
}    
#ID2 > .setting  {
   // some code
}    
#ID3 > .setting  {
   // some code
} 
```

上面的代码将仅适用于以“设置”类命名的直接子级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:34:49.877

您要查找的内容称为 LESS。[在这里](http://lesscss.org/)阅读

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T07:17:16.727

不，这在 CSS 中是不可能的，它与继承无关。在 CSS 规则中，您将所有选择器放在“{”之前，并且仅将声明（*属性*：*值*）放在“{”和“}”之间。

但是您可以在元素上同时使用`id`属性和属性，如`class`

```
<div id="ID1" class="setting">...</div> 
```

然后如果你有例如

```
.setting {
    width: 300px;
    height: 300px;
} 
```

（注意：`.`not `#`），这些声明适用于所有带有 的元素`class=setting`，以及由于其他 CSS 规则而可能适用的任何其他声明。

# extjs - ExtJS GPL 和商业许可问题

> ID：15630781
> 
> 赞同：0
> 
> 时间：2013-03-26T06:32:55.690
> 
> 标签：extjs, licensing

我们将为一家公司开发一款商业软件，并将该软件出售给该公司的客户。该软件包含基于字体的 JS/HTML 代码和后端 C++ 代码。我们想使用 ExtJS4.2 开发字体端模块。

1.  我们不会修改 ExtJS 代码本身，只是将它用于库，但我不知道扩展 ExtJS 类型/类是否会被视为“修改 ExtJS”。
2.  如果我们**不想**让后端代码开源，我们需要哪个许可证？
3.  如果一定要使用Commercial License，是不是可以先用GPLv3在公司内部试用ExtJS进行私下学习培训，在决定发布软件开始收费的时候再使用Commercial license？
4.  如果我们必须使用商业许可证，我们需要购买哪种商业许可证？我们有一个包含几个人的团队来开发字体端模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:16:48.080

“我们可以先用 GPLv3 试用 ExtJS 在公司进行私下学习和培训，当我们决定发布软件并开始收费时使用商业许可？”

不是根据 Sencha 自己的商业许可。[请参阅http://www.sencha.com/legal/sencha-sdk-software-license-agreement](http://www.sencha.com/legal/sencha-sdk-software-license-agreement)的这一部分

“软件的开源版本（“GPL 版本”）是根据 GNU 通用公共许可证版本 3.0（“GPL”）的条款获得许可的，而不是根据本协议。如果您或其他第三方在任何时间，使用 GPL 版本开发所有（或任何部分）应用程序，您不得将此类开发工作与软件结合，并且必须根据以下条款许可此类应用程序（或从中派生的任何部分） GNU 通用公共许可证第 3 版，其副本位于[http://www.gnu.org/copyleft/gpl.html](http://www.gnu.org/copyleft/gpl.html)。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:39:42.613

我想你所有的问题都[在这里](https://www.sencha.com/store/licensing-faq)得到解答。

# java - 如何在属性文件中打印 &(&) 符号

> ID：15630784
> 
> 赞同：1
> 
> 时间：2013-03-26T06:33:16.347
> 
> 标签：java, swing, properties

我正在从带有 & 符号的属性文件中打印一个标签，即，我想将标签打印为“ *sale & care* ”，但 & & 符号不会出现在 Swing 屏幕上。我是 Swing 的新手。当我以这种方式“*销售和护理*”时，系统会挂起。

属性文件中的键值结构如下所示：`saleandcare.label = sale & care`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:48:33.447

尝试这个

```
saleandcare.label = <html>sale &amp care</html> 
```

代替

```
saleandcare.label = sale & care 
```

希望能帮助到你

# sql - SPlit 函数错误 - 语句终止。最大递归 100 在语句完成之前已经用完

> ID：15630791
> 
> 赞同：0
> 
> 时间：2013-03-26T06:33:41.893
> 
> 标签：sql, sql-server, split

我一直在使用下面的这段代码来拆分输入 id，例如 FUNCTION_split('1,2,3',',')。现在的问题是它不适用于列表中超过 100 个的案例。有没有办法修改这段代码来处理超过 100 个 id？

```
CREATE FUNCTION [dbo].[FUNCTION_split]  
 (@list  NVARCHAR(MAX),  
  @delimiter NCHAR(1) = ',')   
    RETURNS TABLE   
AS  

RETURN  
    WITH cte_list([BeginChar], [EndChar]) AS (  
        SELECT [BeginChar] = CONVERT(BIGINT, 1), [EndChar] = CHARINDEX(@delimiter, @list + @delimiter)  
    UNION ALL  
        SELECT [BeginChar] = [EndChar] + 1, [EndChar] = CHARINDEX(@delimiter, @list + @delimiter, [EndChar] + 1)  
    FROM cte_list 
        WHERE  [EndChar] > 0  
    )  
    SELECT LTRIM(RTRIM(SUBSTRING(@list, [BeginChar],  
        CASE WHEN [EndChar] > 0 THEN [EndChar] - [BeginChar] ELSE 0 END))) AS [ParsedValue]  
    FROM cte_list 
        WHERE [EndChar] > 0 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:44:33.830

您可以在查询中使用选项 MAXRECURSION

```
SELECT * FROM [dbo].[FUNCTION_split] ( @p1 , @p2 ) OPTION ( MAXRECURSION 30000 ); 
```

无限递归使用 Maxrecursion (0)

[查询提示](http://msdn.microsoft.com/de-de/library/ms181714.aspx)

# python - 确定语法错误来自哪个文件

> ID：15630794
> 
> 赞同：3
> 
> 时间：2013-03-26T06:33:56.790
> 
> 标签：python, django, syntax-error

我在尝试使用 Django 设置起步时遇到了令人难以置信的沮丧。我确信这与关于 python3 的禁止和我的需求文件中的某些内容有关。无论如何，当我从我的 Django 项目目录运行此命令时：

```
python3 manage.py runserver --settings=my_test_app.settings.development 
```

我得到的唯一输出是

```
SyntaxError: invalid syntax (__init__.py, line 6) 
```

对于我的一生，我无法弄清楚`__init__.py`这个错误消息正在谈论什么文件。我尝试使用 pdb 设置断点，尝试在调用代码周围捕获异常，甚至将打印语句放入`__init__`我项目中的所有文件中，但没有骰子。有人知道这里可能发生什么吗？或者至少如何找出导致此语法错误的文件？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T11:23:38.487

在以下情况下，我遇到了完全相同的问题：

*   从 django-twoscoops-project 模板开始

    django-admin.py startproject --template= [https://github.com/twoscoops/django-twoscoops-](https://github.com/twoscoops/django-twoscoops-) project/archive/master.zip --extension=py,rst,html project_name app_name

*   使用 django-debug-toolbar 版本 0.9.4

禁用 django-debug-toolbar 或将 requirements.txt 中的 django-debug-toolbar 升级到 1.0.1 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:58:04.397

来自 Python 文档：

> 此类的实例具有属性文件名、行号、偏移量和文本，以便更轻松地访问详细信息。异常实例的 str() 只返回消息。

那么也许异常的文件名属性有更长的路径？如果不是，它必须是`__init__.py`直接在您的`PYTHONPATH`路径之一上的。

# perl - 写散列的散列

> ID：15630795
> 
> 赞同：-1
> 
> 时间：2013-03-26T06:34:09.117
> 
> 标签：perl, hash, hashmap

我有一个包含这个值的哈希。

哈希的名称是 PG_HASH

```
 {
      'PG_3' => {
                  'REFUND' => '-53702.00',
                  'PAYMENT' => '1122787.00'
                },
      'PG_1' => {
                  'REFUND' => '-72569.00',
                  'PAYMENT' => '1112523.00'
                },
    } 
```

除此之外，我还有一个包含与哈希相关的值的数组。

```
@array = {
    pg_id => $pg_id,
    sum_type => $sum_type,
    sum_total => $sum_total,
    payment_ref => $payment_ref,
    payment_gateway => $payment_gateway
}; 
```

现在我想写一个带有标题的 CSV 文件：

```
Pg_id  TYPE    Sumtotal   TYPE1    Sumtotal
1      REFUND  -72569.00  PAYMENT  1112523.00
3      REFUND  -53702.00  PAYMENT  1122787.00 
```

我无法将文件写入单行。我尝试迭代父哈希，但无法将其与数组匹配。

帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:09:46.773

```
#! /usr/bin/env perl
use strict;
use warnings;
use feature 'say';
use Perl6::Form;

my %PG_HASH = (
    'PG_3' => {
        'REFUND'  => '-53702.00',
        'PAYMENT' => '1122787.00'
    },
    'PG_1' => {
        'REFUND'  => '-72569.00',
        'PAYMENT' => '1112523.00'
    },
);
my @array = (
    {
        pg_id           => 1,
        sum_type        => 'imaginary',
        sum_total       => '1000000.00',
        payment_ref     => 'imag',
        payment_gateway => '.us'
    },
    {
        pg_id           => 3,
        sum_type        => 'imaginary',
        sum_total       => '500000.00',
        payment_ref     => 'imag',
        payment_gateway => '.us'
    },
);

say "Pg_id  TYPE    Sumtotal   TYPE1    Sumtotal";
for (@array) {
  my $pg = $PG_HASH{'PG_' . $_->{pg_id}};
  print form "{<<<<} REFUND  {>>>>>>>}  PAYMENT  {>>>>>>>>}",
              $_->{pg_id}, $pg->{REFUND}, $pg->{PAYMENT};
}

say '';
say "Pg_id  TYPE      Sumtotal   TYPE1       Sumtotal";
for (keys %PG_HASH) {
  my ($id) = $_ =~ /PG_(\d+)/;
  my ($info) = grep { $_->{pg_id} == $id } @array;
  print form "{<<<<} PAYMENT  {>>>>>>>>}  SUM TOTAL  {>>>>>>>>}",
               $id, $PG_HASH{$_}{PAYMENT}, $info->{sum_total};
} 
```

输出：

```
Pg_id  TYPE    Sumtotal   TYPE1    Sumtotal
1      REFUND  -72569.00  PAYMENT  1112523.00
3      REFUND  -53702.00  PAYMENT  1122787.00

Pg_id  TYPE      Sumtotal   TYPE1       Sumtotal
3      PAYMENT  1122787.00  SUM TOTAL   500000.00
1      PAYMENT  1112523.00  SUM TOTAL  1000000.00 
```

[Perl6::Form](https://metacpan.org/module/Perl6%3a%3aForm)生成格式化输出（不是 CSV 输出）。按照该链接学习比我在这里做的更多。

此代码显示了参考散列对数组进行循环，以及参考数组对散列的键进行循环。

*这段代码也很糟糕。*

首先，它通过生成键来引用散列：`'PG_' . $_->{pg_id}`. 它不应该能够做到这一点。哈希不应该有这样的键。如果直接由 pg_id 键入，（因此，一个键`1`而不是`'PG_1'`），循环将读取：

```
for (@array) {
  my $id = $_->{pg_id};
  print form "{<<<<} REFUND  {>>>>>>>}  PAYMENT  {>>>>>>>>}",
              $id, $PG_HASH{$id}{REFUND}, $PG_HASH{$id}{PAYMENT};
} 
```

其次，它通过为散列的每个键搜索整个数组（针对多个潜在结果而不是单个结果）来引用该数组。可能`@array`应该是一个散列，或者您应该处理它（即，使用第一个循环）而不是查找它的条目。

第三...名称中带有“哈希”的哈希？一个名为`@array`? 我相信这些不是真名。无论如何，*如果对数据的来源有更多了解，就可以编写更好的代码*。例如，如果您`%PG_HASH`从数据库查询中填充，然后`@array`作为记录流接收，那么您应该在添加到哈希之前`3`从数据库中提取`PG_3`，并且您应该循环遍历数组而不是哈希的键。

# jsp - 使用jsp检索图像/文件，例如视频

> ID：15630798
> 
> 赞同：-1
> 
> 时间：2013-03-26T06:34:15.780
> 
> 标签：jsp

我想从名为联系人的表中检索和显示图像/文件（其中包括“FIRST_NAME”、“LAST_NAME”和“PHOTO”列），并在我的表中的所有记录的 html 表单上显示信息。.PDF 和 .MP4（或任何其他文件）等所有其他文件是否相同。如果有什么不同，请帮助我。我是吉马大学（埃塞俄比亚）的学生，我目前正在使用 JSP 进行我的毕业项目（基于网络的项目）。我是这种编程语言的新手，我需要你的全力帮助！

我目前正在使用 NetBeans 7.3

```
 Thank you! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:20:30.720

如果您想在 html 页面中显示图像而不是显示图像文件的名称，那么您可能需要编写一个自定义 servlet 从数据库中提取图像并将其流式传输到浏览器。所以html代码将如下所示。

```
<img src="/imageServlet/123" /> 
```

您需要将您编写的 servlet 映射到路径“imageServlet”。123 应该是您正在显示的数据库详细信息中记录的主键。然后在servelt 中，您需要读取图像并将其内容写入servlet 的输出流。

# android - Android manifest 上的 anyDensity ，

> ID：15630801
> 
> 赞同：1
> 
> 时间：2013-03-26T06:34:35.797
> 
> 标签：android, android-manifest, device, manifest, android-screen-support

我的清单上有以下代码

```
 <supports-screens
    android:anyDensity="false"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" /> 
```

问题是我的应用程序对 ldpi 设备不可见，我想让它可见。我已经阅读了关于网上任何密度的所有内容，如果将其更改为 true，它不会在 ldpi 设备上运行，因为我正在我的应用程序中创建位图，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:23:38.897

ldpi 设备仅占 Google Play 设备的 1.7%。该[统计数据](http://developer.android.com/about/dashboards/index.html)可以追溯到 2012 年 10 月 1 日那一周。现在可能要低得多。

就我个人而言，除了我自己，我不知道还有谁拥有 ldpi 设备。如果 Google Play 上唯一保持活跃的 ldpi 设备归像我这样的开发人员所有，我不会感到惊讶，他们最初只是为了测试目的而保留它们。

![在此处输入图像描述](../Images/cbbf0f2d5cb4a5d19dbc96ad9dfcfd39.png)

为这些设备重写你的应用程序有什么意义？这些用户是否更有可能在您的应用上花钱？这些用户是否比其他用户更有可能观看更多广告？相反。

即使你为那一小部分市场重写了你的应用程序做得很好，所产生的用户体验也会如此下降，可能不值得在这些类型的手机上安装你的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:55:24.167

为什么在清单中使用这个标签？您是否希望您的应用在 ldpi 设备上可用？

# c++ - C++11 - 单独移动数组的每个元素（原始数组、std::array、std::vector）？

> ID：15630815
> 
> 赞同：4
> 
> 时间：2013-03-26T06:35:34.977
> 
> 标签：c++, arrays, vector, element, move

在具有所有*移动语义等的***C++11**中，人们可能想知道实际上可以移动什么。这方面的一个例子是数组。是否可以移动原始数组的每个元素，

 *```
int array1[8];
int array2[8];
array1[0] = std::move(array2[0]); 
```

标准::数组，

```
std::array<int, 8> array1;
std::array<int, 8> array2;
array1[0] = std::move(array2[0]); 
```

和 std::vectors

```
std::vector<int> array1;
std::vector<int> array2;
array1[0] = std::move(array2[0]); 
```

单独？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:42:12.080

当然，假设`array1`and`array2`在您的示例中使用一些数据正确初始化。当您以您描述的方式处理单个数组元素时，它与移动单个变量时的过程*完全相同。*

```
Foo var1;
Foo var2;
var1 = std::move(var2); 
```

[这是您的三个代码片段的实际示例。](http://coliru.stacked-crooked.com/view?id=30b059816349ee7eeb5a832d4e2be884-50d9cfc8a1d350e7409e81e87c2653ba).

显然，移动后源变量中“剩余”的内容取决于变量的类型，但只要您不需要从源变量中读取任何内容，就可以了。*

# javascript - 如何从 JavaScript 数组项的开头删除“未定义”？

> ID：15630820
> 
> 赞同：0
> 
> 时间：2013-03-26T06:36:02.240
> 
> 标签：javascript

我正在尝试生成一个随机数字数组，但我在每一行的开头都得到“未定义”。我已经在网上搜索了几个小时，但一直无法弄清楚。

预期的输出应该是 5 行 2 个随机数字，如下所示：

```
87
57
81
80
02 
```

但实际输出如下所示：

```
undefined87
undefined57
undefined81
undefined80
undefined02 
```

这是一个修改后的摘录，产生如上所示的结果：

```
function NumberSet() {

  // generate all the digits
  this.generate = function() {
    random_digits = [];

    // create 5 rows of 2 random digits
    for(i=0; i<5; i++) {
      for(z=0; z<2; z++) {
        // use .toString() in order to concatenate digits to 
        // the array without adding them together
        random_digit = Math.floor(Math.random()*10).toString();
        random_digits[i] +=random_digit;
      }
    }
    return random_digits;
  }
}
randomnumbers1 = new NumberSet();
mynums = randomnumbers1.generate();
jQuery.each(mynums, function(i, l) {
  // display output in a div#nums
  $('#nums').append(l + '<br>');
}); 
```

最终版本不会使用这种方法来显示数字。我只是想解决“未定义”的来源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:44:12.610

初始化变量

```
 random_digits[i] = "";
 for(z=0; z<2; z++) {
    random_digit = Math.floor(Math.random()*10).toString();
    random_digits[i] +=random_digit;
  } 
```

用 正确声明变量`var`。

```
var random_digit, random_digits = []; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:47:43.823

`random_digit`在第一个循环中声明`for`并分配一个空字符串。通过`for`附加随机数的内部循环，然后在外部循环`push()`中返回数组。`for`

```
function NumberSet() {
  // generate all the digits -a meme should be attached here-
  this.generate = function() {
    random_digits = [];

    // create 5 rows of 2 random digits
    for(i=0; i<5; i++) {
      var random_digit = ""; //Declare it out here
      for(z=0; z<2; z++) {
        // use .toString() in order to concatenate digits to 
        // the array without adding them together
        random_digit += Math.floor(Math.random()*10).toString(); //Append it here
      }
      random_digits.push(random_digit); //Push it back here
    }
    return random_digits;
  }
} 
```

[提琴迪迪](http://jsfiddle.net/LrSNd/)

## 或忘记内部循环并使用递归

```
function NumberSet() {

    // generate all the digits
    this.generate = function () {
        random_digits = [];

        // create 5 rows of 2 random digits

        // Use i for how many numbers you want returned!
        var random_digit = function (i) {
            var getRand = function() {
                return (Math.floor(Math.random() * 10).toString());
            }
            return (i > 0) ? getRand()+random_digit(i-1) : "";
        };

        for (i = 0; i < 5; i++) {
            random_digits.push(random_digit(2)); //In this case, you want 2 numbers
        }
        return random_digits;
    }
} 
```

[小提琴做做](http://jsfiddle.net/LrSNd/1/)

## 和最终版本，因为我很无聊

```
function NumberSet(elNum, numLen) {
    this.random_digits = []; //Random digits array
    this.elNum = elNum; //Number of elements to add to the array
    this.numLen = numLen; //Length of each element in the array
    // generate all the digits

    this.generate = function () {
        // create 5 rows of 2 random digits
        var random_digit = function (i) {
            var getRand = function () {
                return (Math.floor(Math.random() * 10).toString());
            }
            return (i > 0) ? getRand() + random_digit(i - 1) : "";
        };
        for (i = 0; i < this.elNum; i++) {
            this.random_digits.push(random_digit(this.numLen)); 
        }
        return this.random_digits;
    }
}

randomnumbers1 = new NumberSet(5, 2).generate();

jQuery.each(randomnumbers1, function (i, l) {
    // display output in a div#nums
    $('#nums').append(l + '<br>');
}); 
```

[屋顶上的小提琴](http://jsfiddle.net/Cwalkdawg/LrSNd/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T06:53:44.037

您的功能可以简化为：

```
function NumberSet() {

  this.generate = function() {
    var random_digits = new Array();

    for (i = 0; i < 5; i++) {
        randnum = Math.floor(Math.random() * 99);
        random_digits[i] = (randnum < 10 ? '0' : 0) + randnum;
    }
    return random_digits;
  }
} 
```

[**`Live Demo`**](http://jsfiddle.net/samliew/GBpvb/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:40:37.443

代替

```
random_digits[i] +=random_digit; 
```

和

```
random_digits[i] = (random_digits[i]  == undefined ? '' : random_digits[i]) + random_digit; 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/FUZEq/2/)

# c++ - 问与答：我如何知道一个月的最后一天是哪一天？

> ID：15630821
> 
> 赞同：3
> 
> 时间：2013-03-26T06:36:07.007
> 
> 标签：c++, gregorian-calendar, monthcalendar, date-arithmetic, leap-year

我正在尝试编写一个自己滚动的时区转换器，我需要一种方法来确定该月的最后一天是什么。经过一番研究，我发现了寻找闰年的公式。

这是一个很小的贡献，但也许我会节省其他人我花了 20 分钟弄清楚并应用它的时间。

此代码接受一个有符号的短月，索引为 0（0 是一月）和一个索引为 0 的 int 年（2012 年是 2012 年）。

它返回 1 索引日（27 日是 27 日，但在 SYSTEMTIME 结构等中，您通常需要 0 索引 - 只是抬头）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:36:07.007

```
short _get_max_day(short month, int year) {
    if(month == 0 || month == 2 || month == 4 || month == 6 || month == 7 || month == 9 || month == 11)
        return 31;
    else if(month == 3 || month == 5 || month == 8 || month == 10)
        return 30;
    else {
        if(year % 4 == 0) {
            if(year % 100 == 0) {
                if(year % 400 == 0)
                    return 29;
                return 28;
            }
            return 29;
        }
        return 28;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T06:55:35.043

关于什么

```
#include <time.h>
#include <iostream>

int LastDay (int iMonth, int iYear)
{
    struct tm when;
    time_t lastday;

    // Set up current month
    when.tm_hour = 0;
    when.tm_min = 0;
    when.tm_sec = 0;
    when.tm_mday = 1;

    // Next month 0=Jan
    if (iMonth == 12)
    {
        when.tm_mon = 0;
        when.tm_year = iYear - 1900 + 1;
    }
    else
    {
        when.tm_mon = iMonth;
        when.tm_year = iYear - 1900;
    }
    // Get the first day of the next month
    lastday = mktime (&when);

    // Subtract 1 day
    lastday -= 86400;

    // Convert back to date and time
    when = *localtime (&lastday);

    return when.tm_mday;
}

int _tmain(int argc, _TCHAR* argv[])
{
    for (int m = 1; m <= 12; m++)
        std::cout << "Last day of " << m << " is " << LastDay (m, 2002) << std::endl;

    return 0;
} 
```

它打印出来（2002年）......

```
Last day of 1 is 31
Last day of 2 is 28
Last day of 3 is 31
Last day of 4 is 30
Last day of 5 is 31
Last day of 6 is 30
Last day of 7 is 31
Last day of 8 is 31
Last day of 9 is 30
Last day of 10 is 31
Last day of 11 is 30
Last day of 12 is 31 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T09:44:40.027

我使用一个简单的函数返回（标准）COleDateTime 中的整个日期。它可能没有其他选项那么快，但它非常有效，适用于闰年并且非常简单。

这是我正在使用的代码：

```
COleDateTime get_last_day_of_month(UINT month, UINT year)    
{
if(month == 2)
    {                                               // if month is feb, take last day of March and then go back one day
        COleDateTime    date(year, 3, 1, 0, 0, 0);  // 1 March for Year
        date -= 1;                                  // go back one day (the standard class will take leap years into account)
        return date;
    }
    else if(month == 4 || month == 6 || month == 9 || month == 11) return COleDateTime(year, month, 30, 0, 0, 0);
    else return COleDateTime(year, month, 31, 0, 0, 0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-14T12:38:56.700

```
import datetime 
from datetime import date
from dateutil.relativedelta import relativedelta

year = int((date.today()).strftime("%Y"))
month = list(range(1, 13, 1))
YearMonthDay = [(datetime.datetime(year, x, 1) + relativedelta(day=31)).strftime("%Y%m%d") for x in month]
print(YearMonthDay) 
```

['20220131', '20220228', '20220331', '20220430', '20220531', '20220630', '20220731', '20220831', '20220930', '202213101', '2021'2]1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-14T15:45:14.450

在 C++20 中：

```
#include <chrono>

std::chrono::day
get_max_day(std::chrono::month m, std::chrono::year y)
{
    return (y/m/std::chrono::last).day();
} 
```

如果你真的需要一个类型不安全的 API：

```
int
get_max_day(int m, int y)
{
    return unsigned{(std::chrono::last/m/y).day()};
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-11-09T10:28:19.217

```
Word Year, Month, Day;
TDateTime datum_tdatetime = Date();

// first day of actual month
datum_tdatetime.DecodeDate(&year, &month, &day);
day = 1;
datum_tdatetime = EncodeDate(year, month, day);
// last day of previous month
datum_tdatetime -= 1;
// first day of previous month
datum_tdatetime.DecodeDate(&year, &month, &day);
day = 1;
datum_tdatetime = EncodeDate(year, month, day); 
```

# algorithm - 加权图的 PageRank 算法

> ID：15630823
> 
> 赞同：3
> 
> 时间：2013-03-26T06:36:11.443
> 
> 标签：algorithm, pagerank

我有这样的情况：假设图 G 有 4 个节点和 2 条边：边 A 到 B，权重为 0.9，边 C 到 D，权重为 0.1。
在加权图的 PR 算法中，来自一个节点的所有外链的权重都被归一化，使得它们的总和为 1。因此，在我的示例中，将两个权重转换为 1，则 B 和 D 的 pagerank 值相等。
我需要这个算法的修改版本，使得 D 从 C 获得的质量（或选票）比从 A 获得的 B 少，因为边缘 C 到 D 的权重更小。最后，D的最终值小于B。
我不知道以前是否有人这样做过。如果没有，你能给我一些建议吗？任何帮助表示赞赏。

这是我关于 SO 的第一个问题。抱歉，如果有任何混淆。

编辑：好的，似乎没有这样的算法。
所以让我以不同的方式重申我的问题：我想找到一种算法，使得质量（或信息）从一组源节点传播到图中的所有其他节点。通过边缘传递的质量取决于重量，即重量越小传递的质量越少，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:01:52.357

只需标准化*所有*边缘。在您的示例中，情况已经如此。

# regex - 在 R 中提取文本

> ID：15630824
> 
> 赞同：1
> 
> 时间：2013-03-26T06:36:13.217
> 
> 标签：regex, r, text, extract, substr

我正在尝试使用 R 提取可变长度的文本子字符串。我有几个字符，如下所示：

```
"\"/Users/Nel/Documents/Project/Data/dataset.csv\"" 
```

我需要从每个这样的字符中提取文件路径。在这种情况下，我想要得到的是：

```
path1 <- "/Users/Nel/Documents/Project/Data/dataset.csv" 
```

我可以使用 substring 函数：

```
path1 <- substr("\"/Users/Nel/Documents/Project/Data/dataset.csv\"", 3, 46) 
```

使用硬编码的索引来获得我在这个特定实例中想要的东西。但是，这条特定的路径是众多路径之一，我需要能够即时找到这些索引。我相信

```
grep() 
```

函数可以工作，但我无法弄清楚相关的正则表达式。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:41:00.660

您似乎只是想删除一些硬编码的引号。

尝试`gsub`：

```
x
# [1] "\"/Users/Nel/Documents/Project/Data/dataset.csv\""
gsub('\"',"",x)
# [1] "/Users/Nel/Documents/Project/Data/dataset.csv"
## or 
# gsub('["]', "", x) 
```

# android - 基于 cursorLoder 中的字母排序

> ID：15630826
> 
> 赞同：0
> 
> 时间：2013-03-26T06:36:23.187
> 
> 标签：android, sql, cursor

我想按字母顺序对表格进行排序。我可以通过使用这个查询来做到这一点

```
return new CursorLoader(getActivity(),URI, null, null, null, COL_NAME); 
```

但以这种方式，我以这种方式得到结果。

```
A B C D ...Z a b c ....z. 
```

我希望我的 cursorLoder 返回`A a B b C c ....Z z.`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:47:33.783

```
return new CursorLoader(getActivity(),URI, null, null, null, COL_NAME + " COLLATE NOCASE"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:48:05.060

利用：

```
COL_NAME + " collate nocase" 
```

# sql - 触发器删除postgresql中的过去记录

> ID：15630830
> 
> 赞同：0
> 
> 时间：2013-03-26T06:36:54.823
> 
> 标签：sql, postgresql, database

我只想维护当前 1 个月的记录日志详细信息。需要删除过去的记录日志详细信息。我尝试了此代码但无法正常工作，

```
create sequence userseq1;

CREATE TABLE users
( id integer NOT NULL DEFAULT nextval('userseq1'::regclass) 
);

INSERT INTO users VALUES(126);

CREATE TABLE History
( userid integer
, createdate timestamp
);

CREATE OR REPLACE FUNCTION recordcreatetime() RETURNS trigger language plpgsql
AS $$
DECLARE
BEGIN
    INSERT INTO History values(new.id,NOW() );
    RETURN NEW;
END;
$$;

CREATE TRIGGER user_hist
BEFORE INSERT ON users
FOR EACH ROW
EXECUTE procedure recordcreatetime(); 
```

但是，它正在插入一个一个顺序添加的值。我想删除前 1 个月的记录日志详细信息。我尝试了下面的代码，但它不起作用

```
CREATE OR REPLACE FUNCTION trf_keep_row_number_steady()
RETURNS TRIGGER AS 
$body$
DECLARE
BEGIN
        IF (SELECT count(createdate) FROM history) > rownum_limit
    THEN 
        DELETE FROM history
        WHERE createdate = (SELECT min(createdate) FROM history);        
    END IF;
END;
$body$
LANGUAGE plpgsql;

CREATE TRIGGER tr_keep_row_number_steady 
AFTER INSERT ON history
FOR EACH ROW EXECUTE PROCEDURE trf_keep_row_number_steady(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:49:27.817

我可以在你的第二个代码块中看到，你在`history`桌子上有一个触发器，你正试图`DELETE FROM history`在同一个触发器中。

**不允许通过同一张表上的触发器在表上插入/更新/删除。**请考虑其他一些替代方法，例如，在主语句之前或之后运行单独的`DELETE`语句来清除所需的行`INSERT`。

# java - 关于 JCIFS 的 SAXException

> ID：15630831
> 
> 赞同：0
> 
> 时间：2013-03-26T06:36:54.837
> 
> 标签：java, saxparser, jaxp, jcifs

在一个功能中，我使用 JCIFS 的 SmbFile 概念构建了一个从上传的 xml 文件中读取值的逻辑，该文件位于远程保护共享文件夹中，如下所示：

```
String JAXP_SCHEMA_LANGUAGE = "http://java.sun.com/xml/jaxp/properties/schemaLanguage";
String JAXP_SCHEMA_SOURCE = "http://java.sun.com/xml/jaxp/properties/schemaSource";
String W3C_XML_SCHEMA = "http://www.w3.org/2001/XMLSchema";    
String strStImgPath = PROTECTED_SHARE_FOLDER_PATH;
String strFileName = "SampleFile.xml";
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(DOMAIN, USER,    
PASSWORD);
SmbFile fNew = new SmbFile(strStImgPath, strFileName, auth);
SmbFileOutputStream fout = new SmbFileOutputStream(fNew, false);
fout.write(foFile.getFileData());
fout.close();

Document doc = null;
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setValidating(true);
factory.setNamespaceAware(true);
try {
   factory.setAttribute(JAXP_SCHEMA_LANGUAGE, W3C_XML_SCHEMA);
   factory.setAttribute(JAXP_SCHEMA_SOURCE, new SmbFile(schemaSource, auth));
} catch (IllegalArgumentException x) {
   x.printStackTrace();
}

try {
   DocumentBuilder builder = factory.newDocumentBuilder();
   DefaultErrorHandler parserErrors = new DefaultErrorHandler();
   builder.setErrorHandler(parserErrors);
   **doc = builder.parse(new SmbFileInputStream(fNew));**
} catch (Exception e) {
   e.printStackTrace();
} 
```

该行`doc = builder.parse(new SmbFileInputStream(fNew));`引发以下异常：

```
org.xml.sax.SAXException: "http://java.sun.com/xml/jaxp/properties/schemaSource" property cannot have a value of type {jcifs.smb.SmbFile}. Possible types of the value supported are String, File, InputStream, InputSource OR an array of these types.
    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at javax.xml.parsers.DocumentBuilder.parse(Unknown Source)
    at com.boeing.app.UploadStInfoAction.execute(UploadStInfoAction.java:299)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:270)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:191)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:227)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:211)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:817)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:623)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:444)
    at java.lang.Thread.run(Unknown Source) 
```

谁能说出为什么会发生此异常？以及解决此问题的替代方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:09:44.803

嗯，错误信息很容易解释？

解析器不喜欢您的 SmbFile 作为模式源（如果您查看 SmbFile 的文档，例如[http://www.jarvana.com/jarvana/view/org/samba/jcifs/jcifs/1.2.19/jcifs- 1.2.19-javadoc.jar!/jcifs/smb/SmbFile.html](http://www.jarvana.com/jarvana/view/org/samba/jcifs/jcifs/1.2.19/jcifs-1.2.19-javadoc.jar!/jcifs/smb/SmbFile.html)），您会看到 SmbFile 不是来自解析器接受的任何类。

作为一个详尽的猜测，我会尝试

```
factory.setAttribute(JAXP_SCHEMA_SOURCE, new SmbFile(schemaSource, auth).getInputStream()); 
```

看看会发生什么...

# android - 我到这里向我的 android 应用程序添加图像，但出现错误行

> ID：15630833
> 
> 赞同：1
> 
> 时间：2013-03-26T06:36:58.660
> 
> 标签：android, image, android-resources

我到这里向我的 android 应用程序添加图像，但出现错误行：

```
String pathName = "chemistry\2013_03_26\chemistry1.pdf";//Error line
Resources res = getResources();
Bitmap bitmap = BitmapFactory.decodeFile(pathName);
BitmapDrawable bd = new BitmapDrawable(res, bitmap);
View view = findViewById(R.id.container);
view.setBackgroundDrawable(bd); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:43:50.567

我认为您应该将绝对路径与`getFilesDir()`or一起使用`getExternalFileDir()`。

[您可以在点击](http://developer.android.com/training/basics/data-storage/files.html)这里找到更多信息

# iphone - 如何找到故事板的视图

> ID：15630834
> 
> 赞同：0
> 
> 时间：2013-03-26T06:37:00.420
> 
> 标签：iphone, ios, xcode, ipad, storyboard

我正在使用 xcode 单视图应用程序为 Ipad 制作应用程序。在应用程序的情节提要中，我为应用程序的所有模块创建了许多**视图控制器场景。我已经将****视图控制器场景**作为主页，其中我给出了菜单按钮当我点击任何按钮时，我想将该模块的**视图控制器场景**或**视图添加为****主页视图**的子模块 ，**因为我需要在应用程序的每个模块上显示手册。** 请建议我如何查找模块视图并将其添加为主页视图的子视图。

如果我不正确，请建议我正确的方法来满足我的要求。

关于阿努帕姆

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-26T07:42:36.210

1.  在情节提要中选择您的 subviewController

2.  选择实用程序（用于设置 viewcontroller 属性）选择身份检查器 -> 已归档类 - 为 viewcontroller 设置类名，例如： **Subview1ViewController** -> 已归档 storyboard Id - 将标识符/storyboard Id 提供给 viewcontroller ，如我的情况**SubView1**。

    现在需要移动 HomeViewController.m 文件，我们从情节提要中获取 viewcontroller 对象。

*MainStoryboard = 你的故事板名称

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
 subView1Object = [storyboard instantiateViewControllerWithIdentifier:@"SubView1"];
[self.view addSubview:subView1Object.view]; 
```

:) 我想添加一个故事板的图像，以便更好地理解如何给出类名和标识符，但由于一些限制，我无法发布图像错误我面临的是“你需要至少 10 个声望才能发布图像。” :(所以我是 Stackover 流程​​的新手，所以如果你喜欢 anser，请喜欢并给我声誉 :)

# html - 在 IE 中自动生成的额外空间或框

> ID：15630839
> 
> 赞同：0
> 
> 时间：2013-03-26T06:37:18.687
> 
> 标签：html, jsp, fieldset

在我的页面中，在 IE 中自动生成了一个额外的空间或框...但是在其他浏览器中运行良好...我不知道这是什么原因...我附上了屏幕截图...在截图，你可以找到一个小空间或盒子......那是自动生成的...... ![在此处输入图像描述](../Images/82b768e89d8cdc6d124ce2f728e7cba8.png)

我的代码：

```
<s:form name="CompanyInformationForm" action="CompanyInformation"  method="post" enctype="multipart/form-data">
     <span class="headerLabelText"> <s:text  name="companyInformation"></s:text>
    </span>
    <br/><br/>
    <table summary="header data for Company Information text table">
      <caption class="captionHide">Company Information</caption>
    <tr>
        <th scope="row" align="left" headers="companyinfoheader1"><span class="paragraphText">
        <s:property value="%{companyinfoheader1}"/></span></th>
    </tr>   
    <tr>
        <td headers="companyinfoheader2"><span class="paragraphText">
        <s:property value="%{companyinfoheader2}"/></span></td>
    </tr>   
    </table>
    <fieldset style="display:block;">
        <table class="mi360Field" width="100%" summary="Upload Issuer File table">
        <caption class="captionHide">Upload Issuer</caption>
        <tr>
        <th scope="row" align="left" width="50%" headers="uploadIssuerTemplate">
            <span>
                 <span class="purpleHeaderText"> <s:text name="uploadIssuerTemplate"></s:text></span>
            </span><br/><br/>
            <table summary="provider directory file upload table">
             <caption class="captionHide">Upload File</caption>
                <tr>
                    <td headers="issuerFileType">
                     <span class="headerLabelText"> <s:property value="%{issuerFileType}"/> : </span></td>

                    <td headers="fileTypeID"><s:select cssClass="selectBox" name="documentUtilDTO.fileTypeID" title="issuer file type" list="fileType"  listKey="key" listValue="value"
                    titleKey="fileType" label="%{issuerFileType}" title="fileType"

                    style="width:225px" styleId="newPageMessageType">
                    </s:select></td>
                </tr>
                <tr><th scope="row" align="left"></th></tr>
                <tr><td headers="uploadissuerFile">
                      <span class="headerLabelText"> <s:text name="uploadissuerFile"></s:text>
                    </span></td>
                    <td headers="fileData"><div class="fileinputs"><s:file name="documentUtilDTO.fileData" label="test" title="test" tooltipIconPath="../../KY/images/common/buttons/uploadBtn.png" title = "Browse" tooltip="Browse..." size="20" cssClass="file" /></div></td>
                </tr>   
                <tr>
                    <td></td>
                    <td><s:a href="#" accesskey="u" onclick="submitForm('UploadCompanyInformation')"><img id="uploadBtn" src="../../KY/images/common/buttons/uploadBtn.png" alt="upload" style="border: none;"  /></s:a></td>
                </tr>           
            </table>

        </th>
        </tr>
        </table>
        <br></br>

        <div id="divDocuments" style="height:auto;overflow-y:auto;border: none;">
            <br />
            <s:form>
            <s:url id="downloadCompanyinfoDOC" action="downloadCompanyinfoDOC" > </s:url>
            <display:table  export="false" id="data"  class="displayTableBorder"  style="width:70%;" name="listCmpInfDto" uid="fileDetails"  rules="rows"  requestURI="CompanyInformation" pagesize="3" summary="Company Information list">
                <display:setProperty name="paging.banner.placement" value="bottom" />
                <display:setProperty name="basic.empty.showtable" value="true" />
                <display:setProperty name="paging.banner.onepage" value="" />
                <display:setProperty name="paging.banner.no_items_found" value="" />
                <display:setProperty name="paging.banner.one_item_found" value="" />
                <display:setProperty name="paging.banner.all_items_found" value="" />
                <display:setProperty name="paging.banner.some_items_found" value="" />
                <display:setProperty name="paging.banner.page.separator" value=" " />
                <display:setProperty name="paging.banner.group_size" value="5" />
                <display:caption media="html" class="captionHide">document List</display:caption>
                <display:setProperty name="paging.banner.full" value='<p><span id="hix-pagination"><span> <a id="doublePrevCompany" class="prev" href="{1}">&#9668;&#9668;</a> <a id="singlePrevCompany" class="prev" href="{2}">&#9668;</a> {0} <a id="singleNextCompany" class="next" href="{3}">&#9658;</a> <a id="doubleNextCompany" class="next" href="{4}">&#9658;&#9658; </a></span></span></p>' /> 
                <display:setProperty name="paging.banner.first" value='<p><span id="hix-pagination"><span> <a id="doublePrevCompany" class="prev" href="{1}">&#9668;&#9668;</a> <a id="singlePrevCompany" class="prev" href="{2}">&#9668;</a> {0} <a id="singleNextCompany" class="next" href="{3}">&#9658;</a> <a id="doubleNextCompany" class="next" href="{4}">&#9658;&#9658; </a></span></span></p>' /> 
                <display:setProperty name="paging.banner.last" value='<p><span id="hix-pagination"><span> <a id="doublePrevCompany" class="prev" href="{1}">&#9668;&#9668;</a> <a id="singlePrevCompany" class="prev" href="{2}">&#9668;</a> {0} <a id="singleNextCompany" class="next" href="{3}">&#9658;</a> <a id="doubleNextCompany" class="next" href="{4}">&#9658;&#9658; </a></span></span></p>' />                                                                                                      

                <display:column property="fileType" scope="colgroup" title="${documentFileType}"     sortable="true" headerClass="hixTableHeader"  class="displayTagtd" style="width: 10%;text-align: center;"  media="html" />
                <display:column property="fileName" scope="colgroup" url="${downloadCompanyinfoDOC}" sortable="true" paramProperty="companyDocID" paramId="documentUtilDTO.documentId" title="${documentFileName}"   headerClass="hixTableHeader"   class="displayTagtd" style="width: 10%;text-align: center;"/>
                <display:column property="creationDate" scope="colgroup"  title="${uploadDate}"  sortable="true"   headerClass="hixTableHeader"  class="displayTagtd" style="width: 10%;text-align: center;"  />
                <display:column property="createdBy" scope="colgroup" title="${uploadBy}" sortable="true"  headerClass="hixTableHeader"  class="displayTagtd" style="width: 10%;text-align: center;"  />
            </display:table>
            <br></br>
            <table style="width:70%; overflow-y:auto;border: none;" summary="button section">
            <caption class="captionHide" >button section</caption>
                <tr>
                    <th scope="row" width=50% align="left"><s:a href="#" accesskey="c" onclick="submitForm('IssuerHome')"><img id="cancelBtn" src="../../KY/images/common/buttons/closeBtn.png" alt="close" style="border: none;" /></s:a></th>
                </tr>
            </table>
            <br/>
            <br/>
            <br/>
            </s:form>
        </div>
    </fieldset>
    <span style="display:none"><s:submit/></span>
</s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:05:42.660

如果您的字段集设置为阻止，则最后一个表之后的三个 <br/> 可能是导致此问题的原因。

另外一个附带问题是，您有嵌套的表单，这在 v5 之前的 HTML 中是不允许的。IE 可能无法正确呈现这些内容。

## 更新

根据评论，问题是嵌套表格

# c# - 如何从字符串中删除特殊字符并制作新字符串？

> ID：15630845
> 
> 赞同：1
> 
> 时间：2013-03-26T06:37:51.157
> 
> 标签：c#, string, winforms

我有一个`4(4X),4(4N),3(3X)`来自这个字符串的字符串，我想制作字符串`4,4,3`。如果我得到字符串，`4(4N),3(3A),2(2X)`那么我想制作我的字符串`4,3,2`。

请有人告诉我如何解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:44:30.257

这个 Linq 查询从输入字符串的每个部分中选择子字符串，从开始到第一个左大括号：

```
string input = "4(4N),3(3A),2(2X)";
string result = String.Join(",", input.Split(',')
                                  .Select(s => s.Substring(0, s.IndexOf('('))));
// 4,3,2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:41:31.753

这可能会有所帮助：

```
string inputString = "4(4X),4(4N),3(3X)";
string[] temp = inputString.Split(',');
List<string> result = new List<string>();

foreach (string item in temp)
{
    result.Add(item.Split('(')[0]);
}

var whatYouNeed = string.Join(",", result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:14:27.653

您可以使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)

```
String input = @"4(4X),4(4N),3(3X)";
String pattern = @"(\d)\(\1.\)";
// ( ) - first group.
// \d - one number
// \( and \) - braces.
// \1 - means the repeat of first group.
String result = Regex.Replace(input, pattern, "$1");
// $1 means, that founded patterns will be replcaed by first group
//result = 4,4,3 
```

# android - 如何确定在android中编辑文本的预测文本是打开还是关闭

> ID：15630847
> 
> 赞同：0
> 
> 时间：2013-03-26T06:37:57.070
> 
> 标签：android, android-edittext, android-softkeyboard

我的应用程序中有一个编辑文本。编辑文本获得焦点时弹出软键盘。用户可以通过选择打开或关闭软键盘预测文本功能来打开/关闭预测文本。我想确定
键盘弹出时预测文本是否打开/关闭。

请帮忙。

问候，克里希纳库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:49:46.633

我认为您可以使用`isSuggestionsEnabled`：

```
EditText et = (EditText)findViewById(R.id.mET);
et.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {

        if(hasFocus){
            boolean suggestions = et.isSuggestionsEnabled();
        }
    }
}); 
```

# c# - 如何在保存到数据库之前禁用文本框的文本编码？

> ID：15630848
> 
> 赞同：1
> 
> 时间：2013-03-26T06:37:59.983
> 
> 标签：c#, asp.net, visual-studio, visual-web-developer

我在我的 StateCode 文本框中输入了文本“J&K”（没有 Cotes）并将其保存到数据库（SqlServer）中。但它保存为 J & amp; K. 所以我无法使用 J&K（主键）获取保存的数据。如何在将文本保存到数据库之前禁用文本编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:42:01.293

您可以使用[HttpUtility.HtmlDecode 方法](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)删除编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:41:51.643

用于`Server.HtmlEncode("YourTextWith<and>Characters")`此活动。

将您的输出文本包装在其中。

或者，

这也有帮助>>

```
System.Web.UI.HtmlControls.HtmlTextArea textBox = new System.Web.UI.HtmlControls.HtmlTextArea();
textBox.Value = "j&k"; 
```

希望它有帮助。

# function - 在函数中实现代码时的 setTimeout 问题

> ID：15630852
> 
> 赞同：0
> 
> 时间：2013-03-26T06:38:27.040
> 
> 标签：function, audio, settimeout

```
<html>
<head>
<title>Practice</title>

<script LANGUAGE="Javascript" type="text/javascript">

function myfunction() {
var element=document.getElementById("data1");
var element2=document.getElementById("bulkcontent");
var fname=prompt("Please enter your name:", "Your name");
var gend=prompt("Please enter your gender:", "Your gender");
var age=prompt("Please enter your age:", "Your age");
var pic=prompt("Please provide a picture url:", "Picture Url");
var r=confirm("Do you really wish to create a table? If you are unsatisfied with your result, please refresh the page.");

    if(r==true)
        {
element.innerHTML = "<table height='500' width='450' border='3' style='color:green;'><tr><th rowspan='3' height='350' width='250'><img src='" + pic + "' height='350' width='250' alt='UserPic' /></th><td height='150' width='200'><center><u>Name:</u></center><center>" + fname + "</center></td></tr><tr><td height='150' width='200'><center><u>Gender:</u></center><center>" + gend + "</center></td></tr><tr><td height='150' width='200'><center><u>Age:</u></center><center>" + age + "</center></td></tr><tr><td colspan='2'width='450' height='150'><center><u>Inventory</u></center><br/><center>1\. --- 2\. --- 3\. --- 4\. ---</center><br/></td></tr></table>";

element2.innerHTML = "<table border='3' style='color:green;'<tr><td colspan='2' height='400' width='400'><img src='http://i.imgur.com/b4lrB.jpg' alt='startarea' /></td></tr><tr><td width='60'><input type='button' value='enter' onClick='myfunction2()'></input><input type='button' value='Look Around' onClick='lookaround1()'></input></td><td width='340'><p>You are " + fname + ", and you have stumbled across this abandoned school house on a rainy night. You really don't want to go inside, but it's been miles and a " + gend + ", such as yourself, can't stand to be in the rain. What will you do?</p></td></tr></table>";
        }
    else if(r==false)
        {
            alert("Reconsider for a bit and return to us with a more decisive plan of action little wriggler.")
        }
}
function myfunction2()
{
    alert("Welcome Aka, please click the create table button to get started, but first read the paragraph in the table below! KK: DO IT FAST AKA HURRY THE F--K UP! THIS TIME IT IS DIFFERENT. YOU MIGHT ACTUALLY SEE A SLIDE COME UP!")
}

function lookaround1()
{

var audio=document.getElementById("audio");

setTimeout(lookaround1() 
{audio.play();},3000);}

</script>

</head>
<body style="background-color:black;color:white;" onLoad="myfunction2()">

<div id="data1" style="opacity:0.5;width:0px;float:left;position:relative;left:0px;top:25px;">

</div>

<div id="bulkcontent" style="opacity:0.5;width:450px;height:550px;color:white;float:middle;position:relative;right:-460px;top:0px;">
<br/>
<hr/>
<br/>
<p>Welcome to the character creation menu, Today we are going to create a character. When you click on the create table button answer the promp questions as they are asked. Afterwards your character table shall be made. Scroll down a bit for the create table button!</p>
<br/>
<hr/>
<br/>
<center>Coded by Brandyn Porter. hOnK hOnK :o) 2013 </center>
</div>
<div id="links" style="opacity:0.7;width:250px;float:right;position:relative;right:85px;top:-475px;">
<img src="http://media.tumblr.com/tumblr_ln04c8bSpu1qin2iv.png" height="300" width="250" alt="gamzee" />
<hr/>
<br/>
<p style="color:white;">This is Gamzee. Gamzee says motherf--king hello, he also motherf--king asks for some motherfucking faygo. Are you gonna motherfucking deny this motherf--ker some motherf--king faygo? Yeah I didn't motherf--king think so.</p>
<br/>
<hr/>
</div>

<br/>
<hr width="1300" />
<br/>

<input  onClick="myfunction()" style="float:middle;position:relative;right:-635px;top:25px;" type="button" value="Create Table" ></input>

<audio src="sc1.ogg" height="0" width="0" id="audio"></audio>

</body>
</html> 
```

此代码用于为网页选择您自己的冒险故事类型的游戏。基本上，这个页面做了一个非常原始的介绍尝试，在创建创建表格按钮时，系统会提示您几个问题，并且您的答案会被放入表格中。现在之后您会看到三个表格，一个是您在字符数据表中提供的信息，另一个是带有图片和一些按钮和对话框的表格，最后一个暂时只是装饰。现在我有一个用于输入按钮的占位符功能，但实际上我有一个用于“环顾四周”功能的预期功能。当按下它时，用户将在 3 秒后体验到播放的声音，然后我打算给他们一条警告消息，告诉他们有关声音的信息。我尝试编写 setTimeout 函数，但每次我为它输入一些代码时，我的整个脚本都会中断，并且不再起作用。我对javascript相当陌生，所以我不确定我做错了什么。:(如果需要任何其他细节，我很乐意提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:06:38.670

```
<html>
<head>
<title>Practice</title>
<script type="text/javascript">
    function myfunction() {
        var element = document.getElementById("data1");
        var element2 = document.getElementById("bulkcontent");
        var fname = prompt("Please enter your name:", "Your name");
        var gend = prompt("Please enter your gender:", "Your gender");
        var age = prompt("Please enter your age:", "Your age");
        var pic = prompt("Please provide a picture url:", "Picture Url");
        var r = confirm("Do you really wish to create a table? If you are unsatisfied with your result, please refresh the page.");

        if (r == true) {
            element.innerHTML = "<table height='500' width='450' border='3' style='color:green;'><tr><th rowspan='3' height='350' width='250'><img src='" + pic + "' height='350' width='250' alt='UserPic' /></th><td height='150' width='200'><center><u>Name:</u></center><center>"
                    + fname
                    + "</center></td></tr><tr><td height='150' width='200'><center><u>Gender:</u></center><center>"
                    + gend
                    + "</center></td></tr><tr><td height='150' width='200'><center><u>Age:</u></center><center>"
                    + age
                    + "</center></td></tr><tr><td colspan='2'width='450' height='150'><center><u>Inventory</u></center><br/><center>1\. --- 2\. --- 3\. --- 4\. ---</center><br/></td></tr></table>";

            element2.innerHTML = "<table border='3' style='color:green;'<tr><td colspan='2' height='400' width='400'><img src='http://i.imgur.com/b4lrB.jpg' alt='startarea' /></td></tr><tr><td width='60'><input type='button' value='enter' onClick='myfunction2()'></input><input type='button' value='Look Around' onClick='lookaround1()'></input></td><td width='340'><p>You are "
                    + fname
                    + ", and you have stumbled across this abandoned school house on a rainy night. You really don't want to go inside, but it's been miles and a "
                    + gend
                    + ", such as yourself, can't stand to be in the rain. What will you do?</p></td></tr></table>";
        } else if (r == false) {
            alert("Reconsider for a bit and return to us with a more decisive plan of action little wriggler.")
        }
    }
    function myfunction2() {
        alert("Welcome Aka, please click the create table button to get started, but first read the paragraph in the table below! KK: DO IT FAST AKA HURRY THE F--K UP! THIS TIME IT IS DIFFERENT. YOU MIGHT ACTUALLY SEE A SLIDE COME UP!")
    }

    function lookaround1() {
        var audio = document.getElementById("audio");
        audio.play();
        setTimeout(lookaround1, 3000);
    }

</script>

</head>
<body style="background-color: black; color: white;"
    onLoad="myfunction2()">

    <div id="data1"
        style="opacity: 0.5; width: 0px; float: left; position: relative; left: 0px; top: 25px;">

    </div>

    <div id="bulkcontent"
        style="opacity: 0.5; width: 450px; height: 550px; color: white; float: middle; position: relative; right: -460px; top: 0px;">
        <br />
        <hr />
        <br />
        <p>Welcome to the character creation menu, Today we are going to
            create a character. When you click on the create table button answer
            the promp questions as they are asked. Afterwards your character
            table shall be made. Scroll down a bit for the create table button!</p>
        <br />
        <hr />
        <br />
        <center>Coded by Brandyn Porter. hOnK hOnK :o) 2013</center>
    </div>
    <div id="links"
        style="opacity: 0.7; width: 250px; float: right; position: relative; right: 85px; top: -475px;">
        <img src="http://media.tumblr.com/tumblr_ln04c8bSpu1qin2iv.png"
            height="300" width="250" alt="gamzee" />
        <hr />
        <br />
        <p style="color: white;">This is Gamzee. Gamzee says motherf--king
            hello, he also motherf--king asks for some motherf--king faygo. Are
            you gonna motherf--king deny this motherf--ker some motherf--king
            faygo? Yeah I didn't motherf--king think so.</p>
        <br />
        <hr />
    </div>

    <br />
    <hr width="1300" />
    <br />

    <input onClick="myfunction()"
        style="float: middle; position: relative; right: -635px; top: 25px;"
        type="button" value="Create Table"></input>

    <audio src="sc1.ogg" height="0" width="0" id="audio"></audio>

</body>
</html> 
```

我猜你错误地使用了 setTimeout 函数。

[https://developer.mozilla.org/en/docs/DOM/window.setTimeout](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)

```
function lookaround1() {
    var audio = document.getElementById("audio");
    audio.play();
    setTimeout(lookaround1, 3000);
} 
```

# jsp - 使用 Eclipse Juno 进行 JDBC 编程中的 ClassNotFound 异常

> ID：15630853
> 
> 赞同：0
> 
> 时间：2013-03-26T06:38:33.797
> 
> 标签：jsp, jakarta-ee, servlets, classnotfoundexception, jdbc-odbc

StackOverFlow 的所有活跃人员，问候洒红节（印度节）

我在 Eclipse JUNO 中创建了一个简单的 JDBC 程序：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class Connect {
static Connection conn;
public static void main(String[] args) {
    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","elt","elt");
        System.out.println("Connected");
    } catch (ClassNotFoundException cnf) {
        cnf.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }
}
} 
```

当我在 Eclipse Juno 中执行这个程序时，我得到了输出：

```
Connected 
```

但是当我创建一个包含单个 jsp 页面和单个 servlet 的 Java EE 项目时，它给出了一个错误。我的 JSP 页面的代码是：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form method="post" action="LoginAction">
    User ID : <input type="text" name="uname"><br><br>
    Password : <input type="password" name="upass"><br><br>
    <input type="Submit" value="submit">
</form>
</body>
</html> 
```

我的 servlet 的代码如下：

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class LoginAction extends HttpServlet {

static String u_name,u_pass;
static Connection conn;
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    doPost(request, response);
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    out.println("Hello Foo !");
    u_name = request.getParameter("uname");
    u_pass = request.getParameter("upass");
    out.println(u_name);
    out.println(u_pass);

    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","elt","elt");
        out.println("Connected");
    } catch (ClassNotFoundException cnf) {
        cnf.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }
}
} 
```

My web.xml 的代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
 <display-name>eLearning</display-name>
 <welcome-file-list>
 <welcome-file>login.jsp</welcome-file>
 </welcome-file-list>
 <servlet>
<servlet-name>LoginAction</servlet-name>
<servlet-class>LoginAction</servlet-class>
 </servlet>
 <servlet-mapping>
<servlet-name>LoginAction</servlet-name>
<url-pattern>/LoginAction</url-pattern>
 </servlet-mapping>
</web-app> 
```

我的错误是：

```
java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver
at     org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
at java.lang.ClassLoader.loadClassInternal(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at LoginAction.doPost(LoginAction.java:32)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

在你开始提示错误的来源之前，我想告诉你，我已经添加了 classes12.jar，因为我的普通 java 程序正在运行。我还添加了 ojdbc14.jar 。我正在使用oracle 10g。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:18:55.943

只需尝试使用 jdk 代替 jre。使用 jre6 和 tomcat6。在我的情况下，JRE7 和 TOMCAT7 运行不佳。所以我按照我的建议做了。甚至 servlet 也会通过添加依赖项来获得更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:49:43.617

classes12.jar 用于 JDK 1.2/1.3，ojdbc14.jar 用于 JDK 1.4/1.5。

如果您使用的是 JDK 1.4 或更高版本，则从类路径中删除 classes12.jar 并仅使用 ojdbc14.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:00:31.830

嗨，朋友，首先你必须安装 jdk，然后将 classes12.jar 添加到你的库中

# c# - 无法在 Win XP 机器上运行 netsh 命令

> ID：15630854
> 
> 赞同：1
> 
> 时间：2013-03-26T06:38:35.433
> 
> 标签：c#, visual-studio-2010, cmd, windows-xp, netsh

我想以`Reserve the port`编程`port binding`方式使用以下代码：

```
private void PortReserve()
{
  try
   {
    System.Diagnostics.Process process = new System.Diagnostics.Process();
    System.Diagnostics.ProcessStartInfo startInfo = new           
    System.Diagnostics.ProcessStartInfo();
    startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Normal;
    startInfo.FileName = "cmd.exe";
    startInfo.UseShellExecute = true;
    startInfo.Arguments = @"/c netsh http add urlacl url=https://127.0.0.1:8083/ user=EVERYONE";
    process.StartInfo = startInfo;
    process.Start();

    }
    catch (Exception ex)
    {
      throw ex;
    }} 
```

对于端口绑定：将参数替换`startInfo.Arguments`为`@"/c netsh http add sslcert ipport=127.0.0.1:8083 certhash=df03c4b0b32f3302a3b70abe6b5dfd864d0986a5 appid={00112233-4455-6677-8899-CCBBCCDDEEFF} clientcertnegotiation=enable";`

上面的命令在 win和machine 中运行良好`7`，但是当它开始抛出错误时： `win servers``8``Win xp``CMD``The following command was not found http add urlacl url=https://127.0.0.1:8083 user=Everyone`

我检查了`mmc`所有成功导入的证书`machine`。

在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T07:00:50.407

根据[MSDN](http://msdn.microsoft.com/de-de/library/ms733791%28v=vs.100%29.aspx)，您不能在 xp 中使用 netsh。

> 如果您运行的是 Windows Server 2003 或 Windows XP，请使用 HttpCfg.exe 工具。在 Windows Server 2003 中安装了此工具。对于 Windows XP，您可以在 Windows XP Service Pack 2 Support Tools 下载该工具。有关详细信息，请参阅 Httpcfg 概述。Windows 支持工具文档解释了 Httpcfg.exe 工具的语法。

# spring - JPA 中的批量插入/更新查询

> ID：15630855
> 
> 赞同：-1
> 
> 时间：2013-03-26T06:38:35.410
> 
> 标签：spring, jpa, spring-batch

我在基于 Spring 的 Web 应用程序中使用 JPA 1.0。我有一个实体列表，将作为批处理插入/更新。我知道，

```
PreparedStatement ps = ...
for (....) {
  ps.setString(..);
  ps.addBatch();
}

ps.executeBatch(); 
```

我想知道是否有任何方法可以从 Spring 的 JPATemplate 或任何替代方法中获取preparedStament 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:41:00.800

大多数 JPA 提供程序支持批量写入，通常通过持久性单元属性，

对于 EclipseLink 使用，

```
<property name="eclipselink.jdbc.batch-writing" value="JDBC"/> 
```

见， [http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/p_jdbc_batchwriting.htm#CIHIAGAF](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/p_jdbc_batchwriting.htm#CIHIAGAF)

# c++ - 我的应用程序中的 QKeyEvent 不起作用

> ID：15630857
> 
> 赞同：2
> 
> 时间：2013-03-26T06:38:37.287
> 
> 标签：c++, linux, qt, connect, qkeyevent

我想编写一个响应我的键事件的复古蛇，这是我的代码：

`paint.h`

```
#ifndef PAINT_H
#define PAINT_H
#include<QWidget>
#include<QPaintEvent>
#include<QKeyEvent>
#include<QTimer>

class paint:public QWidget
{
Q_OBJECT
public:
    paint(QWidget*parent=0);
    ~paint();
protected:
    void paintEvent(QPaintEvent* );
    void keypress(QKeyEvent* keyevent);
public slots:
    void autorun();
private:
    int snake[100][2];
    int length;
    QTimer *timer;
    int flag;
};
#endif 
```

`paint.cpp`

```
#include"paint.h"
#include<QtGui>

paint::paint(QWidget*parent):QWidget(parent)
{
flag=1;
snake[0][0]=45;
snake[0][1]=45;
length=4;
timer=new QTimer;
timer->start(1000);
connect(timer,SIGNAL(timeout()),this,SLOT(autorun()));
}

paint::~paint(){}

void paint::paintEvent(QPaintEvent* )
{
QPainter p(this);
p.setWindow(0,0,810,810);
QRectF border(45-20,45-20,16*45+40,16*45+40);
QRectF inter(45,45,16*45,16*45);
p.setPen(Qt::NoPen);
p.setBrush(QBrush(Qt::darkMagenta,Qt::SolidPattern));
p.drawRect(border);
p.setBrush(QBrush(Qt::gray,Qt::SolidPattern));
p.drawRect(inter);//
p.setPen(Qt::NoPen);
for(int i=45;i<=17*45;i+=45)
{
    p.drawLine(45,i,17*45,i);
    p.drawLine(i,45,i,17*45);
}
p.setPen(QPen(Qt::darkGray,1,Qt::SolidLine,Qt::RoundCap,Qt::RoundJoin));
//  for(int i=0;i<length;++i)
{
    QRectF snakebody(snake[0][0],snake[0][1],45,45);
    p.setBrush(QBrush(Qt::red));
    p.drawRect(snakebody);
}
}
void paint::keypress(QKeyEvent* keyevent)
{
qDebug()<<"key"<<endl;
switch(keyevent->key())
{
    case Qt::Key_Up:
        snake[0][1]=45;
        break;
    case Qt::Key_Down:
        snake[0][1]=720;
        break;
    case Qt::Key_Left:
        snake[0][0]=45;
        break;
    case Qt::Key_Right:
        snake[0][1]=720;
        break;
    case Qt::Key_Q:
        qDebug()<<"Q"<<endl;
        break;
}
}
void paint::autorun()
{
snake[0][1]+=45;
if(snake[0][1]>720)
{
    snake[0][1]=45;
    snake[0][0]+=45;
    if(snake[0][0]>720)
    {
        snake[0][0]=45;
    }
}
update();
} 
```

专注于`keypress()`功能，不知该功能不连接任何东西，它可以工作吗？实际上它没有，但我不知道如何激活它。我还需要做其他事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:50:57.810

[http://qt-project.org/doc/qt-4.8/qwidget.html#keyPressEvent](http://qt-project.org/doc/qt-4.8/qwidget.html#keyPressEvent)。您需要覆盖 keyPressEvent，而不是创建自己的 keyPress 函数。

所以，改变

```
void keypress(QKeyEvent* keyevent); 
```

至

```
void keyPressEvent(QKeyEvent* keyevent) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:55:57.983

您还必须使用参数调用小部件的`setFocusPolicy`函数`Qt::StrongFocus`。因此，小部件通过选项卡和单击来接受焦点。

# iphone - 重新排列表格视图单元格后如何更新核心数据记录

> ID：15630870
> 
> 赞同：2
> 
> 时间：2013-03-26T06:39:27.740
> 
> 标签：iphone, uitableview, core-data, nsmanagedobjectmodel

我知道之前有人问过这个问题，但是，我仍然对如何在 Core Data 项目中使用 UITableView 单元格实现重新排序感到困惑。下面提到的代码我在我的项目中用于重新排列 TableView 单元格。重新排列后的单元格在核心数据中不受影响。

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath
      toIndexPath:(NSIndexPath *)toIndexPath
{
 NSInteger sourceRow = fromIndexPath.row;
        NSInteger destRow = toIndexPath.row;
        Question *cat1=[questionsArray objectAtIndex:sourceRow];
        [questionsArray removeObjectAtIndex:sourceRow];
        [questionsArray insertObject:cat1 atIndex:destRow];
        [self.cardsTable setEditing:NO animated: YES];
        [cardsTable reloadData];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:29:14.270

如果您可以针对 iOS 5.0 及更高版本，那么您可以使用 an`NSOrderedSet`来维护对象的顺序。请记住，使用此方法的效率明显低于我在下面建议的其他方法（根据 Apple 的文档）。有关更多信息，请查看[iOS 5 的核心数据发行说明](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-CoreData/index.html)。

如果您需要支持 5.0 之前的 iOS 版本或者想要使用更高效的方法，那么您应该在实体中创建一个额外的整数属性，并在添加或重新排列实体对象时手动维护其中的实体对象的索引。当需要显示对象时，您应该根据这个新属性对它们进行排序，一切就绪。例如，您的`moveRowAtIndexPath`方法应如下所示：

```
- (void)moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath sortProperty:(NSString*)sortProperty
{
    NSMutableArray *allFRCObjects = [[self.fetchedResultsController fetchedObjects] mutableCopy];

    NSManagedObject *sourceObject = [self.fetchedResultsController objectAtIndexPath:sourceIndexPath];

    // Remove the object we're moving from the array.
    [allFRCObjects removeObject:sourceObject];
    // Now re-insert it at the destination.
    [allFRCObjects insertObject:sourceObject atIndex:[destinationIndexPath row]];

    // Now update all the orderAttribute values for all objects 
    // (this could be much more optimized, but I left it like this for simplicity)
    int i = 0;
    for (NSManagedObject *mo in allFRCObjects)
    {
        // orderAttribute is the integer attribute where you store the order
        [mo setValue:[NSNumber numberWithInt:i++] forKey:@"orderAttribute"];
    }
} 
```

最后，如果你觉得这太多的手工工作，那么我真的推荐使用免费的[Sensible TableView](http://sensiblecocoa.com)框架。该框架不仅会自动为您维护订单，还会根据您的实体属性及其与其他实体的关系生成所有表格视图单元格。在我看来，这绝对是节省时间的好方法。我还知道另一个名为[UIOrderedTableView](https://github.com/zehrer/UIOrderedTableView)的库，但我自己从未使用过它，所以我不能推荐它（以前的框架也更受欢迎）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:23:29.457

首先，您必须将索引保存在您的 NSManagedObject 中。

当您插入新对象时，请确保将索引设置为 lastIndex+1

获取对象后按索引排序。

当您重新排序单元格时，您还必须为对象设置索引。请注意，因为您可能必须更改所有对象的索引。

示例：您取出第一个单元格并将其移动到最后一个位置。在这种情况下，您的所有索引都会更改。FirstCell 采用最后一个索引，所有其他采用 oldIndex-1。

我建议在完成编辑迭代到您的数据源数组后，只需将对象索引设置为迭代索引。

# algorithm - 什么是最新最好的人脸识别算法？

> ID：15630871
> 
> 赞同：5
> 
> 时间：2013-03-26T06:39:28.537
> 
> 标签：algorithm, matlab, computer-vision

我正在做我的最后一个项目，其中包括人脸识别，并试图在 matlab 上实现它。任何人都可以帮助我获取有关每种算法及其优缺点的一些资源。另外，如果我得到他们的 matlab 实现，我会很高兴。

我已经尝试过 PCA(Eigenfaces)，但在某些资源中它说它不再是一个好的算法。所以我正在寻找替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:40:40.340

Viola Jones 人脸检测器很好，但当然它只是检测： [http](http://www.cs.ubc.ca/~lowe/425/slides/13-ViolaJones.pdf) ://www.cs.ubc.ca/~lowe/425/slides/13-ViolaJones.pdf 如果你想要最好的结果，你可以尝试融合如果性能不是问题，一次采用多种方法，识别率会大大提高

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T06:42:45.033

*   可以使用[Gabor 小波](http://www.cc.gatech.edu/~vbettada/files/vinay-ProjectReport.pdf)
*   [opencv](http://opencv.willowgarage.com/wiki/FaceRecognition)中的人脸识别
*   matlab 代码使用[Gabor 特征](http://www.mathworks.com/matlabcentral/fileexchange/11073-face-detection-system)

# radio-button - 表单提交后保持选中单选按钮

> ID：15630872
> 
> 赞同：0
> 
> 时间：2013-03-26T06:39:48.587
> 
> 标签：radio-button

我有两个单选按钮，当用户单击一个单选按钮并单击按钮时，它应该保持选中状态。但是，即使我使用第一个单选按钮进行选择和搜索，也只有最后一个仍然被选中。

我的代码：

```
<input type="radio" <?php if(isset($_POST['gender']) && isset($_POST['gender']) == 'male') echo "checked='checked'"; ?> name="gender" id="male" value="male" onclick="getGender(this.value);" /><strong>Groom</strong>
              <input type="radio" <?php if(isset($_POST['gender']) && isset($_POST['gender']) == 'female') echo "checked='checked'"; ?> name="gender" id="female" value="female" onclick="getGender(this.value);" /><strong>Bride</strong> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T10:32:13.247

只是改变

```
&& isset($_POST['gender']) == 'male') 
```

至

```
&& ($_POST['gender'] == 'male') 
```

对女性做同样的事情

# c# - 属性无法反序列化，因为成员“属性”不是公共的

> ID：15630873
> 
> 赞同：1
> 
> 时间：2013-03-26T06:39:55.487
> 
> 标签：c#, .net-4.5

> 无法反序列化数据协定类型“DTO.AccountData”，因为成员“属性”不是公共的。将成员设为公开将修复此错误。或者，您可以将其设为内部，并在程序集上使用 InternalsVisibleToAttribute 属性以启用内部成员的序列化 - 有关更多详细信息，请参阅文档。请注意，这样做有一定的安全隐患。

在我的班级中，所有成员变量都是公共的

```
public class AccountData
{

    public string mdn
    {
        get;
        set;
    }
    .....
    //other public varibales
    .....       

    public Dictionary<string, string> properties
    {
        get;
        set;
    }

} 
```

**更新**
我尝试了 [DataContract] 和 [DataMember] 属性，但不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T05:18:32.683

不幸的是`DataContractJsonSerializer`，希望您的 json 数据为

```
 {"properties":[{"Key":"Name","Value":"Valorie"},{"Key":"Month","Value":"May"},{"Key":"Year","Value":"2013"}]} 
```

我认为使用[Json.NET](http://json.codeplex.com/)解析 json 是一个好主意

有关更多信息，您可以查看这个问题[Parse dictionary from json windows phone](https://stackoverflow.com/q/15804758/468724)

# android - 适用于 Android 4.0 的 mpg123 库

> ID：15630874
> 
> 赞同：0
> 
> 时间：2013-03-26T06:39:57.350
> 
> 标签：android, video

我正在使用 NDK 创建音乐音高变化的应用程序

有人更新了 mpg123 lib For android 吗？

在 android 2.3 上工作很好但是，mpg123 lib 不适用于 android 4.0 或更高版本

# c++ - 擦除通过 ExtTextOut 函数绘制的文本

> ID：15630881
> 
> 赞同：0
> 
> 时间：2013-03-26T06:40:16.917
> 
> 标签：c++, visual-c++, mfc

我有一个派生自 CStatic 的类，并且在那上面画线以显示 MFC C++ 项目中的测量值。问题是我在大约线的中间显示线的距离。我正在使用 ExtTextOut 函数来绘制文本。当我为此使用设备上下文时，我用谷歌搜索了很多以删除该文本并在其他位置重绘，但我无法做到。基本上 CStatic 有一个图像显示，我在其上进行测量。请问谁能告诉我如何在不损害背景图像的情况下擦除通过 ExtTextOut 绘制的文本？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:47:49.393

我认为您不能只删除文本，而将其背后的内容保持不变。您必须再次重绘背景。

如果您不想重绘所有内容，则可以使文本所在的部分无效（使用 InvalidateRect 或 InvalidateRgn），并且仅重绘该部分。

另一种适用于线条但我不知道它是否适用于文本的选项是使用[CDC::SetROP2](http://msdn.microsoft.com/es-es/library/99ax95h9%28v=vs.100%29.aspx)将绘图模式设置为 R2_XORPEN （我认为），绘制文本，然后再次绘制以擦除它。但是，通过这种方式，文本看起来会与背景“混合”。

# ruby-on-rails - main:Object with Each gem at scheduler.rb 的未定义方法“job_type”

> ID：15630883
> 
> 赞同：0
> 
> 时间：2013-03-26T06:40:21.427
> 
> 标签：ruby-on-rails, rvm, capistrano, crontab, whenever

我一直在尝试实现 Each gem 来帮助安排我的 Sidekiq 任务。我检查了 crontab，它已正确更新，并且**bundle exec**也可以在终端中正常工作。

这是我的 schedule.rb：

```
# set RAILS_ROOT  
RAILS_ROOT = File.dirname(__FILE__) + '/..'  

set :output, 'log/whenever.log'
set :job_template, "bash -l -i -c ':job'"
job_type :runner, "cd :path && bundle exec rails runner -e staging ':task' :output"

every 1.day, :at => '10:30 pm', :roles => [:app] do
  runner "Backup.perform_async"
end 
```

crontab 如下图所示：

```
bash -l -i -c 'cd /path/to/app && bundle exec rails runner -e staging '\''Backup.perform_async'\'' >> log/whenever.log 2>&1' 
```

但是，当调用 cron 作业时，会返回此错误：

**/path/to/app/config/schedule.rb:8:in `<top (required)>': undefined method`job_type' for main:Object (NoMethodError)**

我还尝试通过终端手动运行 cron 作业，并注意到 rvm 也正确切换。我也试过设置

```
env "GEM_HOME", ENV["GEM_HOME"] 
```

但错误只是改为**/path/to/app/config/schedule.rb:2:in `<top (required)>': undefined method`env' for main:Object (NoMethodError)**

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:31:58.020

使用包装器：[https ://rvm.io/integration/cron/#direct](https://rvm.io/integration/cron/#direct)

您可以使用以下方法创建更多包装器：

```
rvm wrapper create 1.9.3@my-project my-project bundle 
```

然后像这样使用它：

```
/path/to/rvm/bin/my-project_bundle ... 
```

# arm - 关于 LPC1769 上的 Vcom

> ID：15630884
> 
> 赞同：0
> 
> 时间：2013-03-26T06:40:23.450
> 
> 标签：arm, microcontroller

我正在使用基于 ARM 的微控制器 LPC1769 和 LPCXpresso IDE。我正在使用 1769 中使用 USB 设备控制器的 Vcom 示例项目。默认情况下，它以 9600 波特工作。但我不明白如何更改波特率 - 我想以更高的波特率使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:49:14.773

请定义好每一件事以获得更好的答案，我提供的是计算机端的答案，

如果您与计算机连接，它使用将分配给设备的通用 Com 端口，

现在，再次，如果您使用的是计算机，则 com 端口已配置。转到设备管理器，然后查看属性>>配置>>那里你会看到波特率。

去改变它，

那会的。:)

编辑：更新了驱动程序端的支持链接，

对于您可以使用的相同 VCP（虚拟比较端口）驱动程序，我几乎没有链接

```
http://www.ftdichip.com/Drivers/VCP.htm 
```

和不同情况下相同的文档，请先参考文档:)

```
http://www.ftdichip.com/Support/Documents/DataSheets.htm 
```

这都是我这边的:)

# c# - 使用控制器返回的值填充图表

> ID：15630888
> 
> 赞同：1
> 
> 时间：2013-03-26T06:40:38.787
> 
> 标签：c#, javascript, jquery, asp.net-mvc, highcharts

我创建了一个 C# asp.net MVC 应用程序。控制器如下所示。我正在使用高图表，我想用控制器返回的内容填充图表。

下面有 2 个字段，Mon 和 Tue，我需要在下面的 javascript 中填充硬编码值以显示控制器返回的值；

注意：我不确定控制器方法是否有效:(（我是初学者），但我更关心如何使用控制器返回的值填充图表。

我的 C# 控制器；

```
 public string timeHour()
    {
        var m = new MyModel();

        m.theTime = getAllTime(); // get all time

        return new JavaScriptSerializer().Serialize(m);
    } 
```

我在视图中看到的最高图表；

```
$(function () {
        $('#container').highcharts({
            chart: {
                type: 'areaspline'
            },
            title: {
                text: 'some title'
            },
            legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'top',
                x: 150,
                y: 100,
                borderWidth: 1,
                backgroundColor: '#FFFFFF'
            },
            xAxis: {
                categories: [
                    'Mon',
                    'Tue'
                ],
                plotBands: [{ // visualize the weekend
                    from: 4.5,
                    to: 6.5,
                    color: 'rgba(68, 170, 213, .2)'
                }]
            },

            plotOptions: {
                areaspline: {
                    fillOpacity: 0.5
                }
            },
            series: [{
                name: 'John',
                data: [3, 4]
            }]
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T15:02:55.480

首先，我会将控制器的返回类型从 更改`string`为`JsonResult`。让你的控制器返回 ActionResults 是一个很好的 MVC 风格的约定，它使你的代码更具描述性。

```
[HttpGet]
public JsonResult timeHour()
{
    var m = new MyModel();
    m.theTime = getAllTime(); // get all time
    return Json(m, JsonRequestBehavior.AllowGet)
} 
```

我相信这`GET`和`POST`请求都应该对你有用。它看起来`getallTime()`是幂等的（虽然这里没有显示代码），所以看起来`GET`请求应该可以工作。这可以使用[.get() 方法](http://api.jquery.com/jquery.get/)在 jQuery 中完成：

```
$(function () {
    $.get("timeHour", null, function(result) {
        console.log("If the GET request is successful, the Controller will return the HighCharts data:");
        console.log(result);
    }, "json");
}); 
```

您需要确保返回给客户端的 JSON 采用 Highcharts 喜欢的格式。既然已经成功调用了 Controller（通过 AJAX GET 请求）并且返回了 Highcharts 数据，那么您的第二个问题就可以回答了：

> 如何使用控制器返回的值填充图表

...通过[Highcharts“series.data”文档](http://api.highcharts.com/highcharts#series.data)。如果您阅读本文，我想您可以弄清楚您需要如何更改`MyModel`对象以满足您的需求。

# .net - Windows 服务设置项目不会复制引用的 dll

> ID：15630894
> 
> 赞同：1
> 
> 时间：2013-03-26T06:41:02.123
> 
> 标签：.net, visual-studio-2010, windows-services, windows-installer, installation

我刚刚构建了一个 Windows 服务，它在我的开发机器上的调试/发布中运行得像梦一样。我已经创建了一个设置项目，遵循演练中的步骤，例如[这个博客文章](http://blog.tallan.com/2009/06/01/creating-a-project-installer-for-a-windows-service/)、[这个 msdn 演练](http://support.microsoft.com/kb/816169)，以及[这个对一个相当懒惰的 SO 问题的慷慨回答](https://stackoverflow.com/questions/593454/easiest-language-for-creating-a-windows-service/593803#593803)。

我的项目在目标机器上安装得很好，但是当我运行它时，计时器会滴答作响，但什么也没有发生。在对此进行调查时，我注意到**安装程序似乎没有复制我的应用程序中引用的几个 dll**。我可以在应用程序的 bin 文件夹中看到它们，并且可以从我的设置项目的节点中看到它们列在`dependencies`数组中。`Primary output from MyProject (Active)`但它们不在`Program Files`目标计算机上 .exe 所在的应用程序文件夹中。

谁能建议我可以执行的一些步骤以确保我正确执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:41:02.123

事实证明，您需要[将引用的文件显式添加到安装项目](https://stackoverflow.com/questions/487905/setup-project-not-installing-referenced-project-content-files)（右键单击安装项目，然后`Add`>`File...`并浏览到/选择适用的文件）。

但是，我仍然想知道：

*   如何实现自动化，尤其是在使用 NuGet 的应用程序中存在包时
*   我是否错过了导致我需要手动执行的步骤。
*   我是否可能遗漏了某些内容，例如与安装项目中所需的安装/提交/回滚/卸载自定义操作有关

# android - 活动中的暗淡或模糊背景

> ID：15630898
> 
> 赞同：2
> 
> 时间：2013-03-26T06:41:31.443
> 
> 标签：android

在我的一个项目中，我使用了`PopupWindow`. 我的问题是在查看弹出窗口时，设计似乎不舒服。所以我想使我的活动背景变暗或模糊。我搜索了很多，但大多数答案似乎只针对`Dialog`not for `PopupWindow`。在 android 中是否可以在查看时使我们的活动背景变暗`PopupWindaow`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-20T09:54:59.183

我通过使用以下内容将背景设置为弹出窗口的布局来解决此问题。

```
android:background="#80FFFFFF" 
```

Thnaks ..它按预期工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T08:29:53.433

你可以简单地使用这个：

```
ColorDrawable dw = new ColorDrawable(0xb0000000);
dialog.getWindow().setBackgroundDrawable(dw); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:51:25.477

总有一个解决办法。在展示您的`PopupWindow`使用之前，另一个`PopupWindow`只有深色半透明色调。同样，当以相反的顺序关闭两个弹出窗口时。

代码见[这个](https://stackoverflow.com/questions/3221488/blur-or-dim-background-when-android-popupwindow-active/15631963#15631963)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T07:02:29.627

尝试这个

```
 Window window = popUpView.getWindow();
    WindowManager.LayoutParams wlp = window.getAttributes();
    wlp.gravity = Gravity.CENTER_VERTICAL;
    wlp.flags = WindowManager.LayoutParams.FLAG_DIM_BEHIND;
    wlp.dimAmount = (float) 1.0;
    window.setAttributes(wlp); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-26T06:43:40.493

是的，有可能，试试吧`android:theme="@android:style/Theme.Translucent"`，它会让你的活动变得透明。

# python - cProfile - 将数据保存在 Python 对象中/延迟写入磁盘

> ID：15630900
> 
> 赞同：0
> 
> 时间：2013-03-26T06:41:36.983
> 
> 标签：python, cprofile

我有一个想用 cProfile 分析的函数，但我还保存了很多关于结果的其他分析 - 这当前保存到一个以编程方式生成名称的目录中，我希望将配置文件数据保存在同一个目录。

但是：目录名称仅在我要分析的函数完成后在`concurrent.futures`回调函数中计算出来。

有没有一种简单的方法可以将配置文件数据保存在 Python 对象中，该对象可以传递给回调函数（例如，与函数的结果一起返回），以便在知道文件名后写入磁盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:43:53.017

中的`run()`函数`cProfile.py`看起来像这样（在 Python 2.7 中，但同样的方法也适用于 Python 3）。从那里您会看到，如果您`Profile`直接使用对象，则可以`dump_stats`在分析后到达您想要的位置。

```
def run(statement, filename=None, sort=-1):
    """Run statement under profiler optionally saving results in filename

    This function takes a single argument that can be passed to the
    "exec" statement, and an optional file name.  In all cases this
    routine attempts to "exec" its first argument and gather profiling
    statistics from the execution. If no file name is present, then this
    function automatically prints a simple profiling report, sorted by the
    standard name string (file/line/function-name) that is presented in
    each line.
    """
    prof = Profile()
    result = None
    try:
        try:
            prof = prof.run(statement)
        except SystemExit:
            pass
    finally:
        if filename is not None:
            prof.dump_stats(filename)
        else:
            result = prof.print_stats(sort)
    return result 
```

# java - 如何检查 PDF 阅读器是否安装了 Java

> ID：15630903
> 
> 赞同：1
> 
> 时间：2013-03-26T06:41:48.693
> 
> 标签：java

我尝试使用语句打开一个 pdf 文件

`Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + "Sample.pdf");`.

但是我没有`pdf`在我的系统中安装阅读器。所以当我执行这个程序时什么都没有显示。没有例外。`Pdf`如果系统中未安装阅读器，任何想法都会出现异常。如果`Pdf`已经安装了阅读器，则此程序运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:51:13.093

**编辑**
因为我以前的解决方案不起作用。这是另一个肯定会为您工作的方法：

```
try
{
  File file = new File("Sample.pdf");
  java.awt.Desktop.getDeskTop().open(file);
  System.out.println("File opened successfully");
}catch(Exception ex)
{
  System.out.println("Error occurred: "+ex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:54:02.960

为此，您必须处理注册密钥。

使用[JNI](https://github.com/twall/jna)来解决问题。

```
String productName = Advapi32Util.registryGetStringValue(
            WinReg.HKEY_LOCAL_MACHINE, "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion", "ProductName");
        System.out.printf("Product Name: %s\n", productName); 
```

[使用 Java 读取/写入 Windows 注册表](https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java)

# c# - 更改 Awesomium 在 Windows 音量混合器中的显示方式

> ID：15630921
> 
> 赞同：0
> 
> 时间：2013-03-26T06:43:01.907
> 
> 标签：c#, browser, awesomium

我正在制作一个程序，我正在使用 awesomium webcontrol。但是每当我播放其中的声音时，例如 youtube 视频，它都会在音量混合器中显示为 awesomium_rendering_process。我想更改该名称以及图标。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:08:19.593

详细信息在此线程中：

[http://social.msdn.microsoft.com/Forums/en-US/windowspro-audiodevelopment/thread/02c8980d-f443-44a3-a710-356b1de60525](http://social.msdn.microsoft.com/Forums/en-US/windowspro-audiodevelopment/thread/02c8980d-f443-44a3-a710-356b1de60525)

难度：需要COM的工作知识。

更多细节在这里：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd368246%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368246%28v=vs.85%29.aspx)

# asp.net - 将状态更改为 EntityState.Modified 引发错误

> ID：15630924
> 
> 赞同：0
> 
> 时间：2013-03-26T06:43:12.457
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

我有以下 Asp.Net MVC 4 脚手架代码。

```
 //
    // POST: /Detail/Edit/5

    [HttpPost]
    public ActionResult Edit(Detail detail)
    {
        var dd = Details.FirstOrDefault(d => d.DetailId == detail.DetailId);
        if (dd == null)
        {
            return HttpNotFound();
        }

        detail.UpdatedBy = User.Identity.Name;
        detail.UpdateTime = DateTime.Now;
        if (ModelState.IsValid)
        {
            _db.Entry(detail).State = EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("Index", new { id = detail.MasterId });
        }
        return View(dealDetail);
    } 
```

但是，该行`_db.Entry(detail).State = EntityState.Modified;`引发以下错误。更新主/细节编辑风景的细节线的正确方法是什么？

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:41:13.107

这一行：

```
var dd = Details.FirstOrDefault(d => d.DetailId == detail.DetailId); 
```

将导致从数据库加载 Detail 实体。现在您有两个具有相同 ID 的详细信息，但只有一个（由该查询加载的那个）可用于持久性。您可以将代码更改为：

```
if (!Details.Any(d => d.DetailId == detail.DetailId))
{
    return HttpNotFound();
} 
```

或更新附加的详细信息 ( `dd`)，例如：

```
// All values of detail entity must be set in your HTTP post! 
_db.Entry(dd).CurrentValues.SetValues(detail); 
```

# ruby-on-rails - (Net::SSH::AuthenticationFailed: root) 使用 Rubber 将 Rails 应用程序部署到 EC2 时

> ID：15630925
> 
> 赞同：6
> 
> 时间：2013-03-26T06:43:17.217
> 
> 标签：ruby-on-rails, amazon-web-services, amazon-ec2, capistrano

我正在关注 Railscast 关于如何将您的 rails-app 部署到 EC2 的本教程：

[http://railscasts.com/episodes/347-rubber-and-amazon-ec2](http://railscasts.com/episodes/347-rubber-and-amazon-ec2)

我做了一些事情，现在每当我尝试部署时都会收到此错误：

```
connection failed for: production.foo.com (Net::SSH::AuthenticationFailed: root) 
```

这是一个非常模糊的错误，似乎与 mac 相关。另一个遵循教程的用户也有这个错误：

[http://railscasts.com/episodes/347-rubber-and-amazon-ec2?view=comments#comment_158643](http://railscasts.com/episodes/347-rubber-and-amazon-ec2?view=comments#comment_158643)。

这家伙也经历过类似的事情：

[https://github.com/rubber/rubber/issues/182](https://github.com/rubber/rubber/issues/182)。

我浏览了有关此问题的所有博客文章，但没有任何结果。您将如何解决此问题？

**更新**

这是我尝试通过 ssh 连接时得到的完整堆栈跟踪：

```
➜  HN_Notifier_Web git:(master) ✗ ssh -vvvv -i gsg-keypair.pub ubuntu@ec2-54-242-109-133.compute-1.amazonaws.com
OpenSSH_5.9p1, OpenSSL 0.9.8r 8 Feb 2011
Warning: Identity file gsg-keypair.pub not accessible: No such file or directory.
debug1: Reading configuration data /etc/ssh_config
debug1: /etc/ssh_config line 20: Applying options for *
debug1: /etc/ssh_config line 53: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Connecting to ec2-54-242-109-133.compute-1.amazonaws.com [54.225.178.242] port 22.
debug1: Connection established.
debug3: Incorrect RSA1 identifier
debug3: Could not load "/Users/holgersindbaek/.ssh/id_rsa" as a RSA1 public key
debug1: identity file /Users/holgersindbaek/.ssh/id_rsa type 1
debug1: identity file /Users/holgersindbaek/.ssh/id_rsa-cert type -1
debug1: identity file /Users/holgersindbaek/.ssh/id_dsa type -1
debug1: identity file /Users/holgersindbaek/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3
debug1: match: OpenSSH_5.3 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9
debug2: fd 3 setting O_NONBLOCK
debug3: load_hostkeys: loading entries for host "ec2-54-242-109-133.compute-1.amazonaws.com" from file "/Users/holgersindbaek/.ssh/known_hosts"
debug3: load_hostkeys: found key type RSA in file /Users/holgersindbaek/.ssh/known_hosts:16
debug3: load_hostkeys: loaded 1 keys
debug3: order_hostkeyalgs: prefer hostkeyalgs: ssh-rsa-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-rsa
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-rsa,ssh-dss-cert-v01@openssh.com,ssh-dss-cert-v00@openssh.com,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit: first_kex_follows 0
debug2: kex_parse_kexinit: reserved 0
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit: first_kex_follows 0
debug2: kex_parse_kexinit: reserved 0
debug2: mac_setup: found hmac-md5
debug1: kex: server->client aes128-ctr hmac-md5 none
debug2: mac_setup: found hmac-md5
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug2: dh_gen_key: priv key bits set: 126/256
debug2: bits set: 499/1024
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 0c:2f:59:00:c6:ee:26:3f:eb:e5:aa:da:e8:33:dd:a9
debug3: load_hostkeys: loading entries for host "ec2-54-242-109-133.compute-1.amazonaws.com" from file "/Users/holgersindbaek/.ssh/known_hosts"
debug3: load_hostkeys: found key type RSA in file /Users/holgersindbaek/.ssh/known_hosts:16
debug3: load_hostkeys: loaded 1 keys
debug3: load_hostkeys: loading entries for host "54.225.178.242" from file "/Users/holgersindbaek/.ssh/known_hosts"
debug3: load_hostkeys: found key type RSA in file /Users/holgersindbaek/.ssh/known_hosts:7
debug3: load_hostkeys: loaded 1 keys
debug1: Host 'ec2-54-242-109-133.compute-1.amazonaws.com' is known and matches the RSA host key.
debug1: Found key in /Users/holgersindbaek/.ssh/known_hosts:16
debug2: bits set: 525/1024
debug1: ssh_rsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: /Users/holgersindbaek/.ssh/id_rsa (0x7f825141d860)
debug2: key: /Users/holgersindbaek/.ec2/gsg-keypair (0x7f825141e700)
debug2: key: /Users/holgersindbaek/.ssh/id_dsa (0x0)
debug1: Authentications that can continue: publickey
debug3: start over, passed a different list publickey
debug3: preferred publickey,keyboard-interactive,password
debug3: authmethod_lookup publickey
debug3: remaining preferred: keyboard-interactive,password
debug3: authmethod_is_enabled publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/holgersindbaek/.ssh/id_rsa
debug3: send_pubkey_test
debug2: we sent a publickey packet, wait for reply
debug1: Authentications that can continue: publickey
debug1: Offering RSA public key: /Users/holgersindbaek/.ec2/gsg-keypair
debug3: send_pubkey_test
debug2: we sent a publickey packet, wait for reply
debug1: Authentications that can continue: publickey
debug1: Trying private key: /Users/holgersindbaek/.ssh/id_dsa
debug3: no such identity: /Users/holgersindbaek/.ssh/id_dsa
debug2: we did not send a packet, disable method
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

**更新**

这是我的 Rubber.yml：

```
# REQUIRED: The name of your application
app_name: your_app_name

# REQUIRED: The system user to run your app servers as
app_user: app

# REQUIRED: Notification emails (e.g. monit) get sent to this address
#
admin_email: "root@#{full_host}"

# OPTIONAL: If not set, you won't be able to access web_tools
# server (graphite, graylog, monit status, haproxy status, etc)
# web_tools_user: admin
# web_tools_password: sekret

# REQUIRED: The timezone the server should be in
timezone: US/Eastern

# REQUIRED: the domain all the instances should be associated with
#
domain: foo.com

# OPTIONAL: See rubber-dns.yml for dns configuration
# This lets rubber update a dynamic dns service with the instance alias
# and ip when they are created.  It also allows setting up arbitrary
# dns records (CNAME, MX, Round Robin DNS, etc)

# OPTIONAL: Additional rubber file to pull config from if it exists.  This file will
# also be pushed to remote host at Rubber.root/config/rubber/rubber-secret.yml
#
# rubber_secret: "#{File.expand_path('~') + '/.ec2' + (Rubber.env == 'production' ? '' : '_dev') + '/rubber-secret.yml' rescue ''}"

# OPTIONAL: Encryption key that was used to obfuscate the contents of rubber-secret.yml with "rubber util:obfuscation" 
# Not that much better when stored in here, but you could use a ruby snippet in here to fetch it from a key server or something
#
# rubber_secret_key: "XXXyyy=="

# REQUIRED All known cloud providers with the settings needed to configure them
# There's only one working cloud provider right now - Amazon Web Services
# To implement another, clone lib/rubber/cloud/aws.rb or make the fog provider 
# work in a generic fashion
#
cloud_providers:
  aws:
    # REQUIRED The AWS region that you want to use.
    # 
    # Options include
    # us-east-1
    # eu-west-1
    # ap-northeast-1
    # ap-southeast-1
    # ap-southeast-2
    #
    region: us-east-1

    # REQUIRED The amazon keys and account ID (digits only, no dashes) used to access the AWS API
    #
    access_key: XXX
    secret_access_key: YYY
    account: 'ZZZ'

    # REQUIRED:  The name of the amazon keypair and location of its private key
    #
    # NOTE: for some reason Capistrano requires you to have both the public and
    # the private key in the same folder, the public key should have the
    # extension ".pub".  The easiest way to get your hand on this is to create the
    # public key from the private key: ssh-keygen -y -f gsg-keypair > gsg-keypair.pub
    #
    key_name: gsg-keypair
    key_file: "#{Dir[(File.expand_path('~') rescue '/root') + '/.ec2/*' + cloud_providers.aws.key_name].first}"

    # OPTIONAL: Needed for bundling a running instance using rubber:bundle
    #
    # pk_file: "#{Dir[(File.expand_path('~') rescue '/root') + '/.ec2/pk-*'].first}"
    # cert_file: "#{Dir[(File.expand_path('~') rescue '/root') + '/.ec2/cert-*'].first}"
    # image_bucket: "#{app_name}-images"

    # OPTIONAL: Needed for backing up database to s3
    # backup_bucket: "#{app_name}-backups"

    # REQUIRED: the ami and instance type for creating instances
    # The Ubuntu images at http://alestic.com/ work well
    # Ubuntu 12.04 Precise instance-store 64-bit: ami-eafa5883
    #
    # m1.small or m1.large or m1.xlarge
    image_type: c1.medium
    image_id: ami-b6089bdf

    # OPTIONAL: EC2 spot instance request support.
    #
    # Enables the creation of spot instance requests.  Rubber will wait synchronously until the request is fulfilled,
    # at which point it will begin initializing the instance, unless spot_instance_request_timeout is set.
    # spot_instance: true
    #
    # The maximum price you would like to pay for your spot instance.
    # spot_price: "0.085"
    #
    # If a spot instance request can't be fulfilled in 3 minutes, fallback to on-demand instance creation.  If not set,
    # the default is infinite.
    # spot_instance_request_timeout: 180

  # Use an alternate cloud provider supported by fog.  This doesn't fully work
  # yet due to differences in providers within fog, but gives you a starting
  # point for contributing a new provider to rubber.  See rubber/lib/rubber/cloud(.rb)
  fog:
    credentials:
      provider: rackspace
      rackspace_api_key: 'XXX'
      rackspace_username: 'YYY'
    image_type: 123
    image_id: 123

# REQUIRED the cloud provider to use
#
cloud_provider: aws

# OPTIONAL: Where to store instance data.
# 
# Allowed forms are:
# filesystem: "file:#{Rubber.root}/config/rubber/instance-#{Rubber.env}.yml"
# cloud storage (s3): "storage:#{cloud_provider.aws.backup_bucket}/RubberInstances_#{app_name}/instance-#{Rubber.env}.yml"
# cloud table (simpledb): "table:RubberInstances_#{app_name}_#{Rubber.env}"
#
# If you need to port between forms, load the rails console then:
# Rubber.instances.save(location)
# where location is one of the allowed forms for this variable
#
# instance_storage: "file:#{Rubber.root}/config/rubber/instance-#{Rubber.env}.yml"

# OPTIONAL: Where to store a backup of the instance data
#
# This is most useful when using a remote store in case you end up
# wiping the single copy of your instance data.  When using the file
# store, the instance file is typically under version control with
# your project code, so that provides some safety.
#
# instance_storage_backup: "storage:#{cloud_providers.aws.backup_bucket}/RubberInstances_#{app_name}/instance-#{Rubber.env}-#{Time.now.strftime('%Y%m%d-%H%M%S')}.yml"

# OPTIONAL: Default ports for security groups
web_port: 80
web_ssl_port: 443
web_tools_port: 8080
web_tools_ssl_port: 8443

# OPTIONAL: Define security groups
# Each security group is a name associated with a sequence of maps where the
# keys are the parameters to the ec2 AuthorizeSecurityGroupIngress API
# source_security_group_name, source_security_group_owner_id
# ip_protocol, from_port, to_port, cidr_ip
# If you want to use a source_group outside of this project, add "external_group: true"
# to prevent group_isolation from mangling its name, e.g.  to give access to graphite
# server to other projects
#
# security_groups:
#   graphite_server:
#     description: The graphite_server security group to allow projects to send graphite data
#     rules:
#       - source_group_name: yourappname_production_collectd
#         source_group_account: 123456
#         external_group: true
#         protocol: tcp
#         from_port: "#{graphite_server_port}"
#         to_port: "#{graphite_server_port}"
#
security_groups:
  default:
    description: The default security group
    rules:
      - source_group_name: default
        source_group_account: "#{cloud_providers.aws.account}"
      - protocol: tcp
        from_port: 22
        to_port: 22
        source_ips: [0.0.0.0/0]
  web:
    description: "To open up port #{web_port}/#{web_ssl_port} for http server on web role"
    rules:
      - protocol: tcp
        from_port: "#{web_port}"
        to_port: "#{web_port}"
        source_ips: [0.0.0.0/0]
      - protocol: tcp
        from_port: "#{web_ssl_port}"
        to_port: "#{web_ssl_port}"
        source_ips: [0.0.0.0/0]
  web_tools:
    description: "To open up port #{web_tools_port}/#{web_tools_ssl_port} for internal/tools http server"
    rules:
      - protocol: tcp
        from_port: "#{web_tools_port}"
        to_port: "#{web_tools_port}"
        source_ips: [0.0.0.0/0]
      - protocol: tcp
        from_port: "#{web_tools_ssl_port}"
        to_port: "#{web_tools_ssl_port}"
        source_ips: [0.0.0.0/0]

# OPTIONAL: The default security groups to create instances with
assigned_security_groups: [default]
roles:
  web:
    assigned_security_groups: [web]
  web_tools:
    assigned_security_groups: [web_tools]

# OPTIONAL: Automatically create security groups for each host and role
# EC2 doesn't allow one to change what groups an instance belongs to after
# creation, so its good to have some empty ones predefined.
auto_security_groups: true

# OPTIONAL: Automatically isolate security groups for each appname/environment
# by mangling their names to be appname_env_groupname
# This makes it safer to have staging and production coexist on the same EC2
# account, or even multiple apps
isolate_security_groups: true

# OPTIONAL: Prompts one to sync security group rules when the ones in amazon
# differ from those in rubber
prompt_for_security_group_sync: true

# OPTIONAL: The packages to install on all instances
# You can install a specific version of a package by using a sub-array of pkg, version
# For example, packages: [[rake, 0.7.1], irb]
packages: [postfix, build-essential, git-core, ec2-ami-tools, libxslt-dev, ntp]

# OPTIONAL: gem sources to setup for rubygems
# gemsources: ["https://rubygems.org"]

# OPTIONAL: The gems to install on all instances
# You can install a specific version of a gem by using a sub-array of gem, version
# For example, gem: [[rails, 2.2.2], open4, aws-s3]
gems: [open4, aws-s3, bundler, [rubber, "#{Rubber.version}"]]

# OPTIONAL: A string prepended to shell command strings that cause multi
# statement shell commands to fail fast.  You may need to comment this out
# on some platforms, but it works for me on linux/osx with a bash shell
#
stop_on_error_cmd: "function error_exit { exit 99; }; trap error_exit ERR"

# OPTIONAL: The default set of roles to use when creating a staging instance
# with "cap rubber:create_staging".  By default this uses all the known roles,
# excluding slave roles, but this is not always desired for staging, so you can
# specify a different set here
#
# staging_roles: "web,app,db:primary=true"

# OPTIONAL: Lets one assign amazon elastic IPs (static IPs) to your instances
#           You should typically set this on the role/host level rather than
#           globally , unless you really do want all instances to have a
#           static IP
#
# use_static_ip: true

# OPTIONAL: Specifies an instance to be created in the given availability zone
#           Availability zones are sepcified by amazon to be somewhat isolated
#           from each other so that hardware failures in one zone shouldn't
#           affect instances in another.  As such, it is good to specify these
#           for instances that need to be redundant to reduce your chance of
#           downtime. You should typically set this on the role/host level
#           rather than globally.  Use cap rubber:describe_zones to see the list
#           of zones
# availability_zone: us-east-1a

# OPTIONAL: If you want to use Elastic Block Store (EBS) persistent
# volumes, add them to host specific overrides and they will get created
# and assigned to the instance.  On initial creation, the volume will get
# attached _and_ formatted, but if your host disappears and you recreate
# it, the volume will only get remounted thereby preserving your data
#
# hosts:
#   my_host:
#     availability_zone: us-east-1a
#     volumes:
#       - size: 100 # size of vol in GBs
#         zone: us-east-1a # zone to create volume in, needs to match host's zone
#         device: /dev/sdh # OS device to attach volume to
#         mount: /mnt/mysql # The directory to mount this volume to
#         filesystem: ext3 # the filesystem to create on volume
#       - size: 10 # size of vol in GBs
#         zone: us-east-1a # zone to create volume in, needs to match host's zone
#         device: /dev/sdi # OS device to attach volume to
#         mount: /mnt/logs # The directory to mount this volume to
#         filesystem: ext3 # the filesystem to create on volume
#
#       # volumes without mount/filesystem can be used in raid arrays
#
#       - size: 50 # size of vol in GBs
#         zone: us-east-1a # zone to create volume in, needs to match host's zone
#         device: /dev/sdx # OS device to attach volume to
#       - size: 50 # size of vol in GBs
#         zone: us-east-1a # zone to create volume in, needs to match host's zone
#         device: /dev/sdy # OS device to attach volume to
#
#    # Use some ephemeral volumes for raid array
#    local_volumes:
#      - partition_device: /dev/sdb
#        zero: false # zeros out disk for improved performance
#      - partition_device: /dev/sdc
#        zero: false # zeros out disk for improved performance
#
#     # for raid array, you'll need to add mdadm to packages.  Likewise,
#     # xfsprogs is needed for xfs filesystem support
#     #
#     packages: [xfsprogs, mdadm]
#     raid_volumes:
#       - device: /dev/md0 # OS device to to create raid array on
#         mount: /mnt/fast # The directory to mount this array to
#         mount_opts: 'nobootwait' # Recent Ubuntu versions require this flag or SSH will not start on reboot
#         filesystem: xfs # the filesystem to create on array
#         filesystem_opts: -f # the filesystem opts in mkfs
#         raid_level: 0 # the raid level to use for the array
#         # if you're using Ubuntu 11.x or later (Natty, Oneiric, Precise, etc)
#         # you will want to specify the source devices in their /dev/xvd format
#         # see https://bugs.launchpad.net/ubuntu/+source/linux/+bug/684875 for
#         # more information.
#         # NOTE: Only make this change for raid source_devices, NOT generic
#         # volume commands above.
#         source_devices: [/dev/sdx, /dev/sdy] # the source EBS devices we are creating raid array from (Ubuntu Lucid or older)
#         source_devices: [/dev/xvdx, /dev/xvdy] # the source EBS devices we are creating raid array from (Ubuntu Natty or newer)
#
#     # for LVM volumes, you'll need to add lvm2 to packages.  Likewise,
#     # xfsprogs is needed for xfs filesystem support
#     packages: [xfsprogs, lvm2]
#     lvm_volume_groups:
#       - name: vg # The volume group name
#         physical_volumes: [/dev/sdx, /dev/sdy] # Devices used for LVM group (you can use just one, but you can't stripe then)
#         extent_size: 32 # Size of the volume extent in MB
#         volumes:
#           - name: lv # Name of the logical volume
#             size: 999.9 # Size of volume in GB (slightly less than sum of all physical volumes because LVM reserves some space)
#             stripes: 2 # Count of stripes for volume
#             filesystem: xfs # The filesystem to create on the logical volume
#             filesystem_opts: -f # the filesystem opts in mkfs
#             mount: /mnt/large_work_dir # The directory to mount this LVM volume to

# OPTIONAL: You can also define your own variables here for use when
# transforming config files, and they will be available in your config
# templates as  <%%= rubber_env.var_name %>
#
# var_name: var_value

# All variables can also be overridden on the role, environment and/or host level by creating
# a sub level to the config under roles, environments and hosts.  The precedence is host, environment, role
# e.g. to install mysql only on db role, and awstats only on web01:

# OPTIONAL: Role specific overrides
# roles:
#   somerole:
#     packages: []
#   somerole2:
#     myconfig: someval

# OPTIONAL: Environment specific overrides
# environments:
#   staging:
#     myconfig: otherval
#   production:
#     myconfig: val

# OPTIONAL: Host specific overrides
# hosts:
#   somehost:
#     packages: [] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:57:05.270

Rubber 期望在 YAML 文件中获得您的 EC2 凭证`config/rubber/rubber.yml`

```
access_key: xxx
secret_access_key: blah
account: 123 
```

要找到这些值：

*   登录 AWS
*   在屏幕的右上角，单击您的用户名并选择`Security Credentials`
*   该`account`数字位于打开页面的右上角附近
*   你`access_key`在这个页面的一半，有一个链接可以看到你的`secret_access_key`

Rubber 使用这些凭证来配置您的 AWS 基础设施。

连接到实际服务器时，它将需要您的秘密 RSA 密钥。您需要告诉橡胶密钥对的名称（如您的 EC2 仪表板中所示）及其位置。再次在`config/rubber/rubber.yml`

```
key_name: my-keypair
key_file: ~/.ec2/myec2.pem 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:39:41.050

我不确定我做错了什么以及我在这里做错了什么。橡胶中似乎有一些错误。

最后，我制作了一个新应用程序，按照 Railscast 后半部分的方式进行部署（使用单个实例）。之后我登录 AWS，单击实例 -> 操作 -> 连接。在那里您可以看到连接到实例的“正确”方式。

# python - 无法将 JSON 转换为 Python 对象

> ID：15630935
> 
> 赞同：0
> 
> 时间：2013-03-26T06:44:18.543
> 
> 标签：python, django, json

我从这样的 API 收到 JSON 响应：

```
{"code": 200, 
"data": {"messageKey": {}, "returncode": "SUCCESS",
    "meetingID": "REG_561538474", "hasBeenForciblyEnded": "false", 
    "moderatorPW": "58963", "attendeePW": "54321", "message": {},
    "createTime": "1364280051568"}, "errors": null} 
```

现在我想把它转换成 Python 对象并在数据库中保存一些值。

这是我的代码：

```
getmobject  = Meeting()
getj = json.loads(r.text)
for x,v in getj.items():
   if x == 'data':
      if x.meetingID:# == 'meetingID':
         getmobject.meetingID = x.meetingID
         if x.moderatorPW:
            getmobject.moderator_passwd = x.moderatorPW
            if x.attendeePW:
               getmobject.attendee_passwd = x.attendeePW
               getuser_main = User.objects.get(username = request.user.username)
               getmobject.name = get_meeting_name
               getmobject.created_by = getuser_main
               getmobject.sms_no = '12345'

               """Reminder we are making false as if participant accept then only
                  meeting will able to initiate"""
               getmobject.reminder = False   
               getmobject.save() 
```

但问题是我收到错误：

```
'unicode' object has no attribute 'meetingID' 
```

请帮我看看我在这里做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:46:58.020

在您的代码`x == "data"`中，然后`v`是字典出现在json字符串中的“数据”前面，所以您应该使用`v["meetingID"]`而不是`x.meetingID`等等...

# c# - 避免在注销 ASP.NET C# 2.0 后显示以前的页面

> ID：15630936
> 
> 赞同：0
> 
> 时间：2013-03-26T06:44:26.923
> 
> 标签：c#, asp.net, asp.net-2.0, logout

我在注销时遇到问题。在注销应用程序后，当用户按下浏览器后退按钮时，这些安全页面也会显示。

而且页面加载事件也没有为浏览器后退按钮触发。我正在使用母版页和内容页。

我的注销功能在母版页中。

```
 Session.Clear();
    Session.Abandon();
    Session.RemoveAll();
    Response.Redirect("~/Default.aspx"); 
```

这里我的登录页面是 Default.aspx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:53:01.233

我认为您不应该重定向到`Default.aspx`，以我的方式，我通常会创建一个“中间页面”，该页面将检查会话并防止在注销后返回上一页。

路线可能是这样的：注销 -> 清除会话页面 -> 登录页面

因此，从登录页面，如果您单击浏览器上的返回按钮，它将让您清除会话页面并返回登录区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:49:16.633

您需要做的是，不要缓存要阻止用户在注销后访问的页面：

```
Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetNoStore(); 
```

# c# - 如何检查分配了哪些事件？

> ID：15630943
> 
> 赞同：3
> 
> 时间：2013-03-26T06:45:01.217
> 
> 标签：c#, winforms, reflection, controls

我的代码如下。

```
Control[] FoundControls = null;
FoundControls = MyFunctionToFilter(TF, c => c.Name != null && c.Name.StartsWith("grid"));
var eventinfo = FoundControls[0].GetType().GetEvents(); 
```

但是，eventinfo 给了我属于网格的所有控件的列表。而在主类中只定义了两个事件，即**KeyDown**和**Validating 。**

如何获取这些已分配事件的列表，即 Keydown 和 Validating？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:54:14.837

[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)(WinForms) 有一个复杂的组件事件模型（并且`DataGridView`是一个组件）。一些事件继承自`Control`（如`FontChanged`，`ForeColorChanged`等），但所有特定于组件的事件都存储在单个[EventHandlerList](http://msdn.microsoft.com/en-us/library/system.componentmodel.eventhandlerlist.aspx)对象中，该对象继承自`Component`（顺便说一句，来自 Control 的事件也存储在那里，请参阅末尾的更新）回答）。有一个受保护的`Events`财产：

```
protected EventHandlerList Events
{
    get
    {
        if (this.events == null)            
            this.events = new EventHandlerList(this);            
        return this.events;
    }
} 
```

以下是为事件添加事件处理程序的方式`DataGridView`：

```
public event DataGridViewCellEventHandler CellValueChanged
{
    add { Events.AddHandler(EVENT_DATAGRIDVIEWCELLVALUECHANGED, value); }
    remove { Events.RemoveHandler(EVENT_DATAGRIDVIEWCELLVALUECHANGED, value); }
} 
```

如您所见，委托（值）通过`EventHandlerList`一些键值传递给。所有事件处理程序都按键存储在那里。您可以将`EventHandlerList`其视为一个字典，其中对象作为键，委托作为值。所以，这里是如何通过反射获取组件的事件。第一步是获取这些密钥。正如您已经注意到的，它们被命名为`EVENT_XXX`：

```
private static readonly object EVENT_DATAGRIDVIEWCELLVALUECHANGED;
private static readonly object EVENT_DATAGRIDVIEWCELLMOUSEUP;
// etc. 
```

所以我们开始：

```
var keys = typeof(DataGridView) // You can use `GetType()` of component object.
   .GetFields(BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.FlattenHierarchy)
   .Where(f => f.Name.StartsWith("EVENT_")); 
```

接下来，我们需要我们的`EventHandlerList`：

```
var events = typeof(DataGridView) // or GetType()
          .GetProperty("Events", BindingFlags.Instance | BindingFlags.NonPublic);
// Could be null, check that
EventHandlerList handlers = events.GetValue(grid) as EventHandlerList; 
```

最后一步，获取附加了处理程序的键列表：

```
var result = keys.Where(f => handlers[f.GetValue(null)] != null)
                 .ToList(); 
```

那会给你钥匙。如果您需要委托，那么只需在处理程序列表中查找它们。

更新：继承自`Control`的事件也存储在 中`EventHandlerList`，但由于某些未知原因，它们的键具有不同的名称，例如`EventForeColor`. 您可以使用与上述相同的方法来获取这些密钥并检查是否附加了处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:48:02.020

根据this question中的评论表明这是一个与Windows Forms相关的问题，几乎不可能通过迭代列表来确定分配的事件处理程序，无论如何都不是没有反射。

以下文字来自[Hans Passant](https://stackoverflow.com/a/3856171/395659)对类似问题的回答：

> Windows 窗体对此有很强的反制措施。大多数控件将事件处理程序引用存储在需要秘密“cookie”的列表中。cookie 值是动态创建的，您无法预先猜到。反射是一个后门，你要知道cookie的变量名。例如，Control.Click 事件的一个名为“EventClick”，您可以在参考源或反射器中看到它。

知道 cookie 名称将帮助您获得分配的事件，但我不确定是否有这样的列表，其中包含您可以迭代的所有名称。请参阅[此其他答案](https://stackoverflow.com/a/293031/395659)，该答案演示了如何从一个已知 cookie 名称的控件中获取事件。

在这里您可以找到[另一个示例](https://stackoverflow.com/a/2130848/395659)（仍然使用已知的事件名称）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:38:02.250

你不能使用反射来查看处理程序列表吗？

这是一个简单的控制台应用程序，查看与串行端口实例的事件挂钩的处理程序：

```
using System;
using System.IO.Ports;
using System.Reflection;

class Program
{
    static void OnErrorReceived(object sender, SerialErrorReceivedEventArgs e){}

    static void Main(string[] args)
    {
        var serialPort = new SerialPort();

        // Add a handler so we actually get something out.
        serialPort.ErrorReceived += OnErrorReceived;  

        foreach (var eventInfo in serialPort.GetType().GetEvents())
        {
            var field = serialPort.GetType().GetField(eventInfo.Name, BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.GetField);
            if (field != null)
            {
                var backingDelegate = (Delegate)field.GetValue(serialPort);
                if (backingDelegate != null)
                {
                    var subscribedDelegates = backingDelegate.GetInvocationList();

                    foreach (var subscribedDelegate in subscribedDelegates)
                    {
                        Console.WriteLine(subscribedDelegate.Method.Name + " is hooked on " + eventInfo.Name);
                    }
                }          
            }                     
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-26T07:08:11.070

基于凯尔评论：

> @Jacob 是的......因为这是在主类中声明的仅有的两个事件——Kyle

**事件**将仅包含 KeyDown 和 Validating 事件。

```
 Control a = new TextBox();
        var events = a.GetType().GetEvents().Where(eventInfo => eventInfo != null && (eventInfo.Name == "KeyDown" || eventInfo.Name == "Validating")); 
```

> +events.ToList()[0] {System.Windows.Forms.KeyEventHandler KeyDown}
> 
> +events.ToList()[1] {System.ComponentModel.CancelEventHandler 验证}

# python-2.7 - GAE 呈现“无”，但我可以在数据存储查看器中看到数据库实体

> ID：15630949
> 
> 赞同：0
> 
> 时间：2013-03-26T06:45:47.283
> 
> 标签：python-2.7, google-app-engine, rendering, google-cloud-datastore

我在访问数据存储实体时遇到问题。我是 GAE 和 Python 的新手，所以请善待。我一直在从在线教程和其他示例代码中获取代码，到目前为止一切正常。

最终，我希望能够剥离电子邮件附件，对文件进行一些简单的更改，并与其他 .kml 文件（甚至更好的 .kmz，但一次一件事 :) 合并。

步骤1。是向应用程序的appspotmail地址发送电子邮件=完成:)

第2步。...写入 db.model = 我可以在仪表板/数据存储查看器中看到实体在那里，所以没问题 = 完成 :)

第三步。- 呈现模板以显示最近收到的 20 封电子邮件。此列表将动态更新..... :( Hmmmmm

相反，我看到`none`为 index.html 中的所有变量呈现。你能指出我正确的方向吗？谢谢！

达沃

这是 yaml.app

```
application: racetracer
version: 1
runtime: python27
api_version: 1
threadsafe: false

libraries:                                                                      
- name: jinja2                                                                  
  version: latest   

handlers:
- url: /_ah/mail/.+ 
  script: handle_incoming_email.py
  login: admin

- url: /favicon.ico
  static_files: images/favicon.ico
  upload: images/favicon.ico

- url: /static/css
  static_dir: static/css

- url: /static/html
  static_dir: static/index.html

- url: .*
  script: main.app

inbound_services:
- mail 
```

这是handle_incoming_email.py

```
import logging, email
import cgi
import datetime
import os.path
import os

from os import path
from google.appengine.ext import webapp 
from google.appengine.ext import db
from google.appengine.ext.webapp.mail_handlers import InboundMailHandler 
from google.appengine.ext.webapp.util import run_wsgi_app 
from google.appengine.ext.webapp.template import render
import jinja2
import wsgiref.handlers

from main import *
from baseController import *
from authController import *

class Vault(db.Model):
    #fromAddress= db.UserProperty()
    fromAddress= db.StringProperty()
    subject = db.StringProperty(multiline=True)
    #date = db.DateTimeProperty(auto_now_add=True)
    date = db.StringProperty(multiline=True)
    name = db.StringProperty(multiline=True)

class ProcessEmail(InboundMailHandler): 
    def receive(self, mailMessage): 
        logging.info("Email from: " + mailMessage.sender + " received ok")
        logging.info("Email subject: " + mailMessage.subject )
        logging.info("Email date: " + mailMessage.date )

        fromAddress = mailMessage.sender
        subject = mailMessage.subject
        date = mailMessage.date

        if not hasattr(mailMessage, 'attachments'):
            logging.info("Oi, the email has no attachments")
            # raise ProcessingFailedError('Email had no attached documents')
        else:
            logging.info("Email has %i attachment(s) " % len (mailMessage.attachments))

            for attach in mailMessage.attachments:
                name = attach[0] #this is the file name
                contents = str(attach[1]) #and this is the attached files contents
                logging.info("Attachment name: " + name )
                logging.info("Attachment contents: " + contents)
                vault = Vault()
                vault.fromAddress = fromAddress
                vault.subject = subject
                vault.date = date
                vault.name = name
                vault.contents = contents #.decode() EncodedPayload.decode()
                    vault.put()      

                #f = open("aardvark.txt", "r")
                #blah = f.read(30);
                #logging.info("the examined string is : " + blah)
                #f.close() # Close opened file

app = webapp.WSGIApplication([
  ProcessEmail.mapping()
], debug=True)

def main():
    run_wsgi_app(app)

if __name__ == "__main__":
    main() 
```

这是basecontroller.py

```
from authController import *
from handle_incoming_email import *
import logging
import os
import webapp2
import jinja2
import wsgiref.handlers

from google.appengine.ext.webapp import template 
from google.appengine.ext import db
from google.appengine.api import users 

TEMPLATE_DIR = os.path.join(os.path.dirname(__file__))
jinja_environment = \
    jinja2.Environment(loader=jinja2.FileSystemLoader(TEMPLATE_DIR))

class Vault(db.Model):
    #fromAddress= db.UserProperty()
    fromAddress= db.StringProperty()
    subject = db.StringProperty(multiline=True)
    #date = db.DateTimeProperty(auto_now_add=True)
    date = db.StringProperty(multiline=True)
    name = db.StringProperty(multiline=True)

class MainPage(webapp2.RequestHandler):    
    def get(self):
        logging.info("this is MainPage in baseController")
        list = db.GqlQuery("SELECT * FROM Vault ORDER BY date DESC").fetch(10)
        logging.info("this is in list: " + str(list))

        vault = Vault()

        fromAddress = vault.fromAddress
        subject = vault.subject
        date = vault.date
        name = vault.name

        values = {
                'fromAddress': fromAddress,
            'subject': subject,
            'date': date,
            'name': name,
            }
        templ = jinja_environment.get_template('index.html')
        self.response.out.write(templ.render(values))                        

def main():
    wsgiref.handlers.CGIHandler().run(app)

if __name__ == "__main__":
  main() 
```

我在教程中读到，渲染模板比仅使用 .py 中的 html 更好，但也许我已经将它分解为太多文件？他们的逻辑是，不同的人做前端和后端，所以现在就习惯了。无论如何，上面的内容打算呈现为 index.html ，即：

索引.html

```
{% extends "base.html" %}
{% block title %} racetracer {% endblock %}
{% block content %}
<h1>Racetracer </h1>
<h3>Files recently received :</h3>
<br>
        <table>
        <tr>
            <th>Email address:                  </th>
            <th>-----------                     </th>
            <th>Subject:                        </th>
            <th>Date Received:                  </th>
            <th>Attachment:                     </th>
        </tr>           
        <tr>                
            <td> {{ fromAddress }}              </td>
            <td> ---------------                </td>   
            <td> {{ subject }}                  </td>
            <td> {{ date }}                     </td>
            <td> {{ name }}                     </td>
        <blockquote>{{ content|escape }}</blockquote>                     
        </p>
        </tr>                               
    </tr>    
    </table>      
<br>

<hr>
<form action="/sign" method="post">
    <textarea name="content" rows="1" cols="20"></textarea>
    <input type="submit" value="Submit (in index:)">
</form>
{% endblock %} 
```

和 base.html....

```
<html><head>
<link type="text/css" rel="stylesheet" href="/static/css/main.css" /></head>

<body> From the file base out in the racetracer folder<br>
right now you are logged in as : 
    {% if user %}
        {{ user.nickname }}!
        [<a href="{{ logout }}"><b>sign out</b></a>]
    {% else %}
        anonymous, who are you?
        [<a href="{{ login }}"><b>sign in</b></a>]
    {% endif %}
    {% block content %}
    {% endblock %}
</body></html> 
```

这是 main.py

```
import os
import webapp2
from handle_incoming_email import *
from baseController import *
from authController import *
from google.appengine.ext.webapp import template 

app = webapp2.WSGIApplication([
    ('/', MainPage),
    #('/ProcessEmail', ProcessEmail),
], debug=True)

def main():
    wsgiref.handlers.CGIHandler().run(app)

if __name__ == "__main__":
  main() 
```

谢谢你的帮助！将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:46:06.473

你得到 None 因为它是 None。您正在声明 Vault 对象，但没有为其分配任何值。作为 GQL 查询的结果，这些值将位于列表实体中。

```
vault = Vault() # This creates an empty object (assuming you aren't doing any dynamic init

fromAddress = vault.fromAddress  # Still empty....
subject = vault.subject
date = vault.date
name = vault.name 
```

此外，您不应将 list 分配为 var，因为它是为 Py 保留的。

你想要做的是设置如下：

```
my_list = YOUR GQL QUERY.fetch()

# Create a formatted list
values = []
for ml in my_list:
    value = {
            'fromAddress': ml.fromAddress,
        'subject': ml.subject,
        'date': ml.date,
        'name': ml.name,
        }

    values.append(value) # You could just append the dictionary directly here, of course 
```

然后使用模板参数中的值列表

** 更新 **

与您的数据存储库模型相比，您的 GQL 查询看起来不错。

首先，确保您已将“list”变量更改为“my_list”。接下来，如果您想查看打印为可读字符串的检索对象的内容，请将其添加到您的模型中：

```
 def __unicode__(self):
       return ('%s %s %s' % (self.key,self.fromAddress,self.subject)) # etc... for the vars you want printed with you print the object 
```

检查您的 logging.info(my_list) 并查看它是否打印出更具可读性的内容。

如果没有，请在列表上运行 for 循环并记录密钥和/或 fromAddress，因此：

```
for vault in my_list:
   logging.info('the key = %s'%vault.key) 
```

如果没有返回任何内容，请直接转到开发环境中的交互式控制台并运行该查询：

```
from google.appengine.ext import db
from *vault_file* import Vault

my_list = db.GqlQuery("SELECT * FROM Vault ORDER BY date DESC").fetch(10) # run query

for vault in my_list:
   print vault.key
   print vault.fromAddress 
```

让我知道这些测试离开你的地方，我将继续更新。

*** 更新 #2 ***

因此，现在您可以确认获取数据存储区值
，您希望将模板页面参数设置为等于保管库列表，因此：

```
params = dict(values=my_list)
self.response.out.write(templ.render(params)) 
```

现在在您的页面上，您需要遍历列表以打印每个字典项目：

```
{% for vault in values %}
    <tr>
       <td>{{vault.fromAddress}}}</td>
       etc...
    </tr>

{% endfor %} 
```

那个工作？

# ios - 使用 ios 的 OpenCV 线检测和提取

> ID：15630950
> 
> 赞同：0
> 
> 时间：2013-03-26T06:45:50.573
> 
> 标签：ios, opencv

嗨，我在 ios 中使用**opencv**进行线检测。这是我最后一年的项目。我想上传心电图的图像，然后从中提取线，因为我使用了opencv并成功地提取了线，但现在我想保存线并面临很多问题，任何人都可以帮助我或任何教程?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:46:57.377

我很快写了一些东西，我认为它可以帮助你：

```
void write_lines_to_file ( string file_name, vector<vector<Point> > lines )
{
  FileStorage fs ( file_name, FileStorage::WRITE );
  fs << "lines" << "[";
  for ( unsigned int i = 0; i < lines.size(); i++ )
    {
      // I've assumed each line is a vector< Point >, in index [0] the head and index [1] the tail.
      fs << "{:" << "x1" << lines[i].at ( 0 ).x << "y1" << lines[i].at ( 0 ).y << "x2" << lines[i].at ( 1 ).x << "y2" << lines[i].at ( 1 ).y << "}";
    }
  fs.release();
} 
```

我没有测试它，我做了自己的假设，所以当你想使用它时请谨慎。

# c - 如何在 WIN32 API 中使用 trim() 文本 LPWSTR 类型

> ID：15630952
> 
> 赞同：0
> 
> 时间：2013-03-26T06:45:55.417
> 
> 标签：c, string, winapi, trim

我有：`LPWSTR str=" Nguyen Phong Sac "` 如何修剪 str。它的意思是：`str="Nguyen Phong Sac"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:41:38.237

尝试这个。请注意，此功能尚未经过彻底测试，只是为了了解一下。

```
void Trim(TCHAR *buffer)
{
  int i = 0;

  while (buffer[i++] == ' ' && buffer[i] != 0) 
  {
  }

  int first = i - 1 ;

  i = lstrlen(buffer)  ;

  while (buffer[--i] == ' ' && i > 0) 
  {
  }

  int last = i + 1 ;

  int j = 0 ;
  for (i = first; i <= last - first; i++)
    buffer[j++] = buffer[i] ;

  buffer[j] = 0 ;
} 
```

# nhibernate - NHibernate 映射一个单独的 Lib

> ID：15630958
> 
> 赞同：0
> 
> 时间：2013-03-26T06:46:13.823
> 
> 标签：nhibernate, mapping

我的`Route`has `Stops`，在我的数据库中没有关系（FK），只是`RouteId`在 Stop 表中。所以我`IList<Stop> Stops`在我的 Route 类中添加了一个。现在我的课程（Route 和 Stop）在一个 Lib（单独的项目）中。我有一个控制台应用程序，我可以在其中定义映射并进行测试。我应该如何定义我的映射以及在哪里（`*.nhm.xml`| `App.config`）。我知道这与添加程序集和命名空间有关，但我就是找不到方法。

![在此处输入图像描述](../Images/c70e17c507283f7f8a0e5daa0871d832.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:17:29.137

`hbm.xml`可以在另一个程序集中，您必须在映射中指定程序集限定名称

例子：

```
<class name="the.name.space.User, Assemblyname" table="USER"> 
```

# sql - 如何在 SQL 中连接字符串

> ID：15630959
> 
> 赞同：1
> 
> 时间：2013-03-26T06:46:16.513
> 
> 标签：sql, sql-server, sql-server-2008

我有一个场景，其中我有一个表`Company`，其中包含一些我想查询的列

1.  姓名
2.  高优先级
3.  优惠券（外键）

现在如果`High Priority`是真的，我想放在`(High Priorty)`公司名称栏的前面，如果公司里有超过 3 张优惠券，那么我想放在`(Important)`公司名称前面

这个怎么做？请帮助我，并在此先感谢

**编辑**

如果我想在 SQL 视图中添加这一切，我应该怎么做，因为当我试图在 SQL 视图中添加它时，它会给出错误

> 创建视图或函数失败，因为没有为列 1 指定列名。

**编辑#2**

我想根据这个查询选择公司优惠券计数

```
RejectProcessed = 0 and ReviewVerify = 0 and isPublish = 0 and ForSupervisor = 0 
```

我的意思是，当我们计算每家公司的优惠券时，我们应该在每张优惠券上插入这个查询，这些是 COUPON 表中已经存在的字段。

如果您需要更多详细信息，请告诉我

这就是我创建 nt 视图的方式

```
 Create view GetCompanyNames as
   SELECT  CASE WHEN COALESCE(b.totalCoupons, 0) > 3 THEN a.Name +'(Important) '
         WHEN IsHighPriority = 1 THEN a.Name +'(High Priority) '
        ELSE a.Name +''
    END  AS CompanyName
  FROM    Company a
    LEFT JOIN
    (
        SELECT  Name, COUNT(*) totalCoupons
        FROM    Company
        GROUP   BY Name
    ) b ON a.name = b.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:53:00.003

```
SELECT  CASE WHEN COALESCE(b.totalCoupons, 0) > 3 THEN '(Important) '
            WHEN IsHighPriority = 1 THEN '(High Priority) '
            ELSE ''
        END + a.Name AS CompanyName
FROM    Company a
        LEFT JOIN
        (
            SELECT  Name, COUNT(*) totalCoupons
            FROM    Company
            GROUP   BY Name
        ) b ON a.name = b.name 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-26T06:48:40.773

`+`您可以使用运算符连接字符串

```
select 'a'+'b' 
```

选择文本“ab”

# javascript - 转储 JQuery 对象

> ID：15630961
> 
> 赞同：0
> 
> 时间：2013-03-26T06:46:35.880
> 
> 标签：javascript, jquery, for-loop

我一直在学习 js 对象的工作，所以我决定看看如果我尝试将 jQuery 对象分解成它的组件会发生什么。我想知道是否有更好、更精细的方法来做到这一点，或者是否有其他一些可能具有教育意义的技巧：

```
<!doctype html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>JQuery Dump</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <style type="text/css">
            ol li {
                font-weight:bold
            }
            ol li ul {
                margin-bottom:0px
            }
            ol li ul li {
                display:inline-block;
            }
            ol li ul li {
                font-weight:normal;
                list-style:none;
                margin-right:8px;
            }
        </style>
    </head>

    <body>
        <ol>
            <script>
                var x = "";
                for(var i in jQuery) {
                    x += ("<li>" + i + "<ul>");
                    for(var j in jQuery[i]) {
                        x += ("<li><pre>" + j + "</pre></li>");
                    }
                    x += ("</ul></li>");
                }
                document.write(x);
            </script>
        </ol>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:52:11.933

这是了解递归函数的绝佳机会。这是从 [这个答案](https://stackoverflow.com/a/7102330/16959)中提取的简洁示例，我已经对其进行了调整以更好地匹配您的问题（[演示](http://jsfiddle.net/z2TrM/2/)）。

```
<div id="Tree"></div> 
```

使用以下 JavaScript：

```
var tree = $('#Tree');
function r(obj) {
    var html = "<ul>";
    if (obj)
        for (var key in obj) {
            if (typeof obj[key] == "object")
                html += '<li>'+key+':'+r(obj[key])+'</li>';
            else if (typeof obj[key] != "function")
                html +='<li>'+key+':'+obj[key]+'</li>';
            else
                html +='<li>'+key+'()</li>';
        }
    html += "</ul>";
    return html;
} 

$('#Tree').html(r(jQuery));

r(jQuery); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:53:06.883

如果您只是想了解一下 jQuery 对象，您可以使用`console.dir`它与该对象进行交互。例如，打开您的控制台并输入`console.dir($)`.

[https://developer.mozilla.org/en-US/docs/DOM/console.dir](https://developer.mozilla.org/en-US/docs/DOM/console.dir)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:50:37.560

而不是编写上面的代码并在 html 页面上打印此代码，您应该简单地尝试`console.dir($)`查看您的控制台屏幕。

# php - 日文文本输出为问号或 goobledy gook

> ID：15630965
> 
> 赞同：1
> 
> 时间：2013-03-26T06:46:55.313
> 
> 标签：php, mysql, utf-8

我已经为此工作了一段时间，并且尝试了许多提供的解决方案 - 无济于事。

在 phpadmin 中，变量是`utf8_unicode_ci`.

带有以下标头的简单查询：

```
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
<meta http-equiv="Content-Language" content="ja" /> 
```

输出问号：

![乱七八糟的文字](../Images/cbb352f9584e47da8c8aacff9ab26482.png)

`mysql_query("SET NAMES utf8");` 如果我在查询之前添加该行，我会得到 goobledy gook (mojibake)：

![在此处输入图像描述](../Images/ac54ce9fda434b7767b6131b3f3ebfa1.png)

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:54:10.820

您应该将 MySQL**连接编码**设置为您在页面上使用的相同编码。服务器将它找到的结果转换为这种编码，这样您就不必关心数据的实际存储方式。

由于设置连接 UTF-8 会产生 mojibake，因此您的页面必须有一些不同的编码。SJIS 可能吗？在这里您可以找到 MySQL 支持的 CJK 编码：http: [//dev.mysql.com/doc/refman/5.5/en/charset-asian-sets.html](http://dev.mysql.com/doc/refman/5.5/en/charset-asian-sets.html)

设置结尾的首选方法是使用[`mysql_set_charset`](http://php.net/manual/en/function.mysql-set-charset.php). 执行`SET NAMES`适用于基于 ASCII 的编码（如 UTF-8），但不适用于其他编码（如 sjis）。例如：

```
mysql_set_charset('cp932'); 
```

另外，不要`mysql`在新程序中使用该库。它已被弃用，并将在某个时候从 PHP 中删除。

# iphone - 录音、编辑、删除、播放

> ID：15630970
> 
> 赞同：1
> 
> 时间：2013-03-26T06:47:13.993
> 
> 标签：iphone, ios, ipad, ios-simulator

我正在开发录音应用程序。

现在我需要添加一个编辑录制的音频文件的功能。用户应该能够播放音频文件并将录音插入其中。剪切不需要的音频。

我需要两个基本功能插入音频和覆盖现有音频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:28:23.903

请！[使用 AVAudioRecorder (iOS 4)](http://www.techotopia.com/index.php/Recording_Audio_on_an_iPhone_with_AVAudioRecorder_%28iOS_4%29)检查iPhone可能会对您有所帮助

# ios - 将 NSDictionary 添加到发送到不可变对象的 NSMutableArray 变异方法时获取 sigarbt

> ID：15630971
> 
> 赞同：-2
> 
> 时间：2013-03-26T06:47:15.207
> 
> 标签：ios, objective-c, nsmutablearray, nsdictionary

我在这段代码中得到了 sigarbt

```
if (![newPlayerName isEqual:@""] && !thereAreJustSpaces)
    {

        NSDictionary *player = [NSDictionary dictionaryWithObjectsAndKeys:
                                newPlayerName, @"name", @"", @"email", nil];

        [self.playerNames addObject:player];//Getting sigarbt over here.
    } 
```

这是我的控制台输出

```
2013-03-26 08:44:30.683 ChooseTeams[3921:15203] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[__NSCFArray insertObject:atIndex:]: mutating method sent to immutable object'
*** First throw call stack:
(0x1655022 0xfcdcd6 0x15fda48 0x15fd9b9 0x164eda8 0x164ecb0 0x43f9 0x1656e99 0x13314e 0x371a0e 0x1656e99 0x13314e 0x1330e6 0x1d9ade 0x1d9fa7 0x1d9266 0x1583c0 0x1585e6 0x13edc4 0x132634 0x17e8ef5 0x1629195 0x158dff2 0x158c8da 0x158bd84 0x158bc9b 0x17e77d8 0x17e788a 0x130626 0x26dd 0x2605 0x1)
terminate called throwing an exception(lldb) 
```

我有财产

```
@property (strong, nonatomic) NSMutableArray *playerNames; 
```

并在 viewDidLoad

```
self.playerNames = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:49:38.413

你的答案在于你的例外

2013-03-26 08:44:30.683 ChooseTeams[3921:15203] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFArray insertObject:atIndex:]：**发送到不可变对象的变异方法**”

我认为 self.playerNames 是**NSArray**，它应该是**NSMutableArray**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T15:14:18.387

```
- (id) init
{
    self = [super init];
    if (self)
    {
        self.playerNames = [NSMutableArray array];
    }
   return self;
} 
```

别的东西：

```
newPlayerName = [newPlayerName stringByReplacingOccurrencesOfString:@" " withString:@""];

if (![newPlayerName isEqualToString:@""])
    {

        NSArray *keys = [[NSArray alloc] initwithobjects:@"key1", @"key2",nil];
        NSArray *objects = [[NSArrayAlloc] initwithobjects:@"value1",@"value2",nil];

        NSDictionary *dic = [[NSDictionary alloc] initWithObjects:objects forKeys:keys];

        [self.playerNames addObject:player];//Getting sigarbt over here.
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:04:38.423

你的“playerNames”需要是可变的。

例子：

```
playerNames=[[NSMutableArray alloc]init]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T15:03:50.270

异常可能并非来自您认为的地方。它清楚地表明您正在尝试将一个对象添加到一个*不可*变的 NSArray 中，所以这就是发生的情况。您的可疑 playerNames 不是可变的，或者您没有插入 playerNames。

你应该开始学习 Xcode 调试。首先，在 Objective-C 异常上设置断点。然后，您将*确切地*看到问题发生的位置。接下来，显示您存储在 playerNames 中的值，并检查问题发生时它是否仍然是同一个数组。

# php - 使用 PHP DOM 抓取

> ID：15630972
> 
> 赞同：0
> 
> 时间：2013-03-26T06:47:16.103
> 
> 标签：php, dom, scrape

这是我到目前为止的一段代码

```
<?php 
include('include/simple_html_dom.php'); 

$url = 'http://www.nba.com/news/';
$html = file_get_html($url);

foreach($html->find('div[id=nbaNewsStories]') as $key)
{
    echo ($key->innertext) . "<br />";
}

?> 
```

到目前为止，这显示了我想要的部分链接。我的问题是，当您点击被拉取的文章时，链接是相对的，不会转到网页。我需要创建一个绝对网址，所以当点击文章标题时，它将转到`http://www.nba.com/news/title`文章

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:22:10.093

在你的 foreach 之前包括它：

```
foreach($html->find('a') as $key)
{      
    $key->href = 'http://www.nba.com'.$key->href;    
} 
```

# session - Tomcat 7 上的 GWT 显示单个会话

> ID：15630974
> 
> 赞同：1
> 
> 时间：2013-03-26T06:47:18.513
> 
> 标签：session, gwt, tomcat

我已将我的第一个 GWT 应用程序部署到 Tomcat 7 独立服务器（不在 Apache 中）。在应用程序中，我在会话中存储了一些信息，使用

```
getThreadLocalRequest().getSession().setAttribute(...) 
```

问题是 Tomcat 总是显示一个会话。这意味着当我从不同的浏览器甚至不同的计算机（具有不同的公共 IP）运行这个应用程序时，我得到了相同的会话和另一个用户设置的相同属性！

在 Tomcat 管理器上，我只看到一个会话

这是正常行为吗？可以将其更改为每个实际会话都有一个会话吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:29:59.073

为每个用户创建一个新会话

`getThreadLocalRequest().getSession(true).setAttribute(...)`

您可以通过编写检查会话 id.weather 创建或不创建新会话。

```
 HttpSession session = getThreadLocalRequest().getSession(true);
 System.out.println("Session id: " + session.getId()); 
```

# push-notification - IBM Worklight：推送通知行为

> ID：15630976
> 
> 赞同：1
> 
> 时间：2013-03-26T06:47:21.933
> 
> 标签：push-notification, ibm-mobilefirst

我有一些与 Worklight 中的推送通知相关的问题：

1.  如果在应用程序处于后台或关闭时收到推送通知，它将显示在通知栏中。单击通知消息时，它将被定向到应用程序的主页。请问是否可以切换到其他页面而不是主页？

2.  当应用程序关闭并且通知消息到达时，我通过单击应用程序图标而不是通知栏中的消息来启动应用程序，在我看来，我无法在应用程序中取回通知消息。（应用在后台运行时没有问题）
    步骤：
    a）在应用内部订阅事件源
    b）关闭应用
    c）向设备提交通知（“Hello”）
    d）在应用中，通知消息（“你好”）显示在状态栏中。向下滑动状态栏。消息显示在通知栏中。
    e) 不要点击通知栏进入应用。相反，单击应用程序图标（这是进入应用程序的正常方式）。
    结果：似乎 pushNotificationReceived 没有被调用，因此我无法在应用程序内取回通知。
    非常感谢！！

详细信息：
Worklight 5.0.6
Android 版本 4.1.1 (Samsung Galaxy S3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:39:43.387

关于第一个问题：考虑到 Worklight 是一个单页应用程序，您不能定向到不同的 HTML 页面，因为您将失去 Worklight 的上下文。

也就是说，如果您使用 jQuery 的页面和片段方法，您可以做的是在有效负载中传递一个特定的值，并且在`pushNotificationReceived`（我基于[推送通知示例应用程序](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#adavanced-topics)）中，您可以做一些 JavaScript 魔术来加载特定的基于有效载荷的内容...

关于第二个问题：请使用更详细的复制步骤编辑您的帖子。

# mfc - 当我单击 CListCtrl 中的另一个列项时，多选将丢失

> ID：15630982
> 
> 赞同：2
> 
> 时间：2013-03-26T06:47:39.117
> 
> 标签：mfc, clistctrl

1.  请看屏幕截图（这是一个示例）
2.  我有一个包含 2 列的列表视图，第一列是“名称”，第二列是“状态”
3.  当我单击第二列中的灯泡时，它将在状态“开”和“关”之间切换
4.  目前，我需要实现一个多选功能。就是用ctrl或者shift选择多行，然后点击其中任意一个“灯泡”，切换所有选中项的状态。

问题是：

当我单击“灯泡”时，选择的多重将丢失。这意味着当我使用 API GetSelectedCount 时，它将返回 0。

我的调查：

当我点击“灯泡”时，将触发关于项目更改的事件。并且 OnItemChanged 事件将在 OnClick 事件之前触发（这就是 API GetSelectedCount 将在事件 OnClock 中返回 0 的原因）。我想在事件 OnItemChanged 中缓存多选项目，但我失败了，因为每个项目都会触发一次 OnItemChanged 事件。

例如：如果我在列表视图中多选了 3 个项目，然后单击第 3 个项目的“灯泡”，则会触发 3 次 OnItemChanged 事件，以通知这 3 个项目未被选中。所以，在（点击灯泡）的OnClick事件中，我不知道在之前的操作中选择了哪些项目。

此外，单击“灯泡”后，我仍然想保留多选。

任何帮助都感激不尽？

ON_NOTIFY_REFLECT(LVN_ITEMCHANGED, OnItemChanged)

ON_NOTIFY_REFLECT_EX(NM_CLICK, OnClick)

void CListCtrl::OnItemChanged(NMHDR* pNMHDR, LRESULT* pResult) {......}

BOOL CListCtrl::OnClick(NMHDR* pNMHDR, LRESULT* pResult) {......}

![屏幕截图示例](../Images/00f7a45a32f9ffa1e0ac7d593a321a9f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-14T06:49:01.767

我知道这是一个老问题，但我通过拦截 OnLButtonDown 消息解决了这个问题。

首先将 ON_WM_LBUTTONDOWN() 添加到您的消息映射声明中。添加函数原型 afx_msg void OnLButtonDown(UINT, CPoint); 到您的列表控制类。

我的函数看起来有点像这样：

```
 afx_msg void OnLButtonDown(UINT, CPoint)
    {       
        //We need to intercept the left button down
        //message so that we don't lose our multi-select
        //if the user has clicked on an icon
        DWORD pos = GetMessagePos();
        CPoint pt(short(LOWORD(pos)), short(HIWORD(pos)));
        ScreenToClient(&pt);

        uint flags;           
        int itemIndex = HitTest(pt, &flags);

        //We didn't hit a list item or an icon
        if (itemIndex == -1 || !(LVHT_ONITEMICON & flags))
        {
           ::CListCtrl::OnLButtonDown(var, point);
           return;
        }
        else
        {
            uint selectedItemCount = GetSelectedCount();
            int nItem = -1;
            if (selectedItemCount > 0)
            {      

                for (nItem = GetNextItem(-1, LVNI_SELECTED); nItem >= 0; 
                nItem = GetNextItem(nItem, LVNI_SELECTED))
                {    
                    //Do whatever you need to do to selected items
                }
            }
        }
    } 
```

# android - Android 视频视图可见性

> ID：15630983
> 
> 赞同：1
> 
> 时间：2013-03-26T06:47:42.510
> 
> 标签：android, android-videoview

我有一个 TextView 和`VideoView`一个`Relative layout`. 我正在做的是，将 TextView 动画到屏幕的中心，更改文本并返回到屏幕的角落。我在屏幕中央放置了一个视频视图。当 TextView 动画时，它落后于 Video View 破坏动画。我努力寻找任何解决方法来在视频视图之上显示 TextView 但并不幸运。所以我想知道关于这个问题的任何帮助，或者我可以在动画事件上将视频视图的可见性设置为 false 和 true，这样我就可以实现我想要的。

这是我的相对布局代码

```
 <RelativeLayout
    android:layout_width="1440dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="0dp"
    android:background="#000000" >
  <VideoView
    android:id="@+id/videoView1"
    android:layout_width="962dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    />
  <TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="970dp"
    android:layout_marginTop="320dp"
    android:paddingLeft="58dp"
    android:text="00"
    android:textAlignment="center"
    android:textSize="150sp"
    android:onClick="increaseCounter"
    android:clickable="true"
    android:textColor="#FF0000">
  <requestFocus
    android:duplicateParentState="true"
    android:focusable="true"
    android:focusableInTouchMode="true" />
  </TextView>
  </RelativeLayout> 
```

我在 textview 上使用翻译动画，我想在视频视图之上制作动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:05:32.907

看看下面的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <VideoView
        android:id="@+id/videoView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="This is a sample text message"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

这是我尝试过的布局，下面是我使用的动画

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            .......
            textView.startAnimation(inFromRightAnimation());
            textView.requestFocus();
        }
        private Animation inFromRightAnimation() {

            Animation inFromRight = new TranslateAnimation(
                    Animation.RELATIVE_TO_PARENT, +1.0f, Animation.RELATIVE_TO_PARENT, 0.0f,
                    Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f
            );
            inFromRight.setDuration(5*1000);
            inFromRight.setInterpolator(new AccelerateInterpolator());
            return inFromRight;
        } 
```

它工作正常。VideoView 将位于 TextView 的后面，并且 TextView 在 VideoView 上方正确地从整个屏幕向右转换到中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:21:44.247

尝试使用，它会出现在窗口顶部的文本

```
<RelativeLayout
 android:layout_width="1440dp"
 android:layout_height="wrap_content"
 android:background="#000000" >
<TextView
 android:id="@+id/textView2"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:text="00"
 android:textAlignment="center"
 android:layout_alignParentTop="true"
 android:textSize="150sp"
 android:onClick="increaseCounter"
 android:clickable="true"
 android:textColor="#FF0000">
 <requestFocus
 android:duplicateParentState="true"
 android:focusable="true"
 android:focusableInTouchMode="true" />
 </TextView>
 <VideoView
 android:id="@+id/videoView1"
 android:layout_below="@+id/textView2"
 android:layout_width="962dp"
 android:layout_height="wrap_content"
 />
 </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:36:41.487

终于找到了解决我面临的问题的方法。创建了一个`RelativeLayout`具有最高**z-index**（定义在最底部）的控件，并放置了我想要在动画期间继续显示的所有控件，除了`videoView`我在动画期间实际想要隐藏的控件并`textView`在视频视图的顶部设置动画。在动画开始时，我将最终`RelativeLayout`背景设置为黑色，并在动画结束时将其重置为透明。一种黑客，但工作。

```
 @Override
    public void onAnimationStart(Animation arg0) {

       RelativeLayout rl =(RelativeLayout) findViewById(R.id.superView);
    rl.setBackgroundColor(Color.BLACK);
        }

    @Override
    public void onAnimationEnd(Animation arg0) {

    RelativeLayout rl =(RelativeLayout) findViewById(R.id.superView);
    rl.setBackgroundColor(Color.TRANSPARENT);
        } 
```

# java - 如何在java中制作一个大数组

> ID：15630998
> 
> 赞同：7
> 
> 时间：2013-03-26T06:48:24.743
> 
> 标签：java

我想创建一个用户将作为输入的大小的布尔数组。例如 - 用户可能会输入一个大数字，如 1000000000000 ；所以我必须创建一个大小为 1000000000000 的布尔数组。我面临的问题是，我不能将输入存储为 int，因为它不能容纳这么大的数字 - 因此我无法创建数组。Double 是一个选项。我可以将输入数字存储为 double ，但我不知道如何创建 double 数字大小的数组。这就是想法 -

```
Scanner scanner = new Scanner(System.in);
int target = scanner.nextInt();
boolean [] array_a=new boolean [(target)]; 
```

如果目标超出 int 范围，这将不起作用。感谢任何帮助。

**更新：**谢谢大家。所以你只能创建一个 int 最大范围（即 2147483648）大小的数组，对吧？内存方面并没有早先打击我。打算采取不同的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T06:50:30.190

您不能在 Java 中创建大小大于最大正数的数组`int`，因为[数组索引是`int`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html). （对于各种[`List`实现](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)也是如此。您*可能*可以创建一个具有更多条目的条目 [a `LinkedList`，例如]，但是像`get`and `size`start 之类的东西并不能正常工作，您只能通过`iterator`[假设事情没有' t 只是简单的休息]，这需要一段时间。）

您似乎不太可能真的需要`boolean`为超过 2,147,483,647 个条目创建一个有空间的数组，但如果您真的这样做，则必须创建多个数组并通过获取索引的模数来选择正确的数组（这将需要成为一个`long`）。（或者使用一些非 JDK 库，如果存在这样做的话。）这将需要 4G 的 RAM。可行，但完全不同的方法会更好的可能性很高。

但是 1,000,000,000,000 个元素呢？这将需要大约 1-2 TB 的 RAM。正如 NPE 所说，如果你不是在超级计算机上运行，​​你就不会拥有它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T06:50:09.457

> 必须创建一个大小为 1000000000000 的布尔数组。我面临的问题是，我无法将输入存储为 int

你的问题不在于。您的主要问题是您将没有足够的内存来分配具有 1,000,000,000,000 个元素的数据结构（即使您克服了`int`索引的限制）。

你需要重新考虑算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:52:24.787

如何使用 HashMap 并使用长键和布尔值。

你有几个优点。
1.可以使用long范围内的索引
2.不用担心使用的item index的最大尺寸。只要它很长，它就可以工作
3.您不会预先为整个集合分配内存。相反，您只会使用您需要的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-25T10:52:28.773

您可以创建一个抽象，例如数组数组（您甚至可以修改它）。

Object [][] 可以是布尔值或其他值。

```
class LargeArray {

    private final long size;
    private final int sizeI;
    private final int sizeJ;
    private final Object [][] objects;

    public LargeArray() {
        sizeI = 3;//Any reasonable value;
        sizeJ = Integer.MAX_VALUE;
        objects = new Object [sizeI][sizeJ];
        size = sizeI * sizeJ;
    }

    public long size() {
        return size;
    }

    public Object get(long index) {
         int i = index / sizeJ;
         int j = index % sizeJ;
         return objects[i][j];
    }

    public void set(long index, Object object) {
         int i = index / sizeJ;
         int j = index % sizeJ;
         objects[i][j] = object;
    }
} 
```

您还可以更改第一个维度，例如 3。在这种情况下，对象 [3][Integer.MAX_VALUE]，您可以创建 (2^31 -1)*3 = 2,147,483,647 * 3 = 6442450941 个元素，您将需要 (2^31 - 1)*3 * 4 =~ 23 GB RAM，这实际上是可能的！！！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T06:54:50.407

首先：您确实需要一个充分的理由来分配这么多内存。正如其他人所说，您可能需要重新考虑这种方法。

一些建议：要么将要分配的数量限制在某个最大值，要么将其存储在文件中并寻找数据或根据需要进行分配（惰性分配）。如果数据稀疏（实际布尔值很少，但索引分布非常广泛），则最好使用地图。如果它主要是零，请考虑只存储零:)

第二：如果打包位，理论上可以分配 8 * 最大数组大小布尔值。请参阅此讨论以获取灵感：[Implementing a C style bitfield in Java](https://stackoverflow.com/questions/12546106/implementing-a-c-style-bitfield-in-java)