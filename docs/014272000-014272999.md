# StackOverflow 问答 14272000-14272999

# algorithm - 合并两个数组的最大可能方式

> ID：14272000
> 
> 赞同：3
> 
> 时间：2013-01-11T05:02:36.087
> 
> 标签：algorithm, math, combinatorics

假设我有两个大小数组`m`和`n`：

`a[1] a[2] a[3] ..... a[m]`

和

`b[1] b[2] b[3] ..... b[n]`

我想形成一个合并这两个数组的新数组，这样在新的`m + n`元素数组中，`a[i]`总是放置在之前`a[i + 1]`并且`b[i]`总是放置在之前`b[i + 1]`。例如，`a[1] a[2] b[1] b[2]... b[n] a[m]`将是一个有效的数组，但`a[2] a[1] b[1] b[2] ... b[n] a[m]`不会。给定`m`和`n`，当允许重复时，有多少这样的组合是可能的？

我有解决问题的直觉：

`- b[1] - b[2] - b[3] - ..... - b[n]`

我可以放置在数组内的`a[1]`任何位置，考虑到前面和最后一个位置，我有完全的放置方式。如果我首先放置（就在之前），我现在可以放置在位置。但如果我刚刚放置，我将有办法放置。我可以将这种方法递归地应用于所有where 。但是我找不到任何数学公式来表达解决方案，除了允许重复时我无法理解如何处理。`n - 1``b``n + 1``a[1]``a[1]``b[1]``a[2]``n + 1``a[1]``b[1]``n``a[2]``a[i]``1 <=i <= n`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:07:15.577

考虑这个问题的一种方法是以下 - 而不是按顺序列出元素，您可以考虑在每个瞬间选择是选择第一个未使用的 A 还是第一个未使用的 B。“的所有可能排序”选择 A" 和 "选择 B" 将产生生成这些序列的所有可能方式。

如果您假设所有元素都是不同的，那么答案将由您可以置换 m A 后跟 n B 的序列的方式数给出。这是由

```
 (m + n)!
 -----------
    m!  n! 
```

不过，如果有一些重复的元素，我没有给你答案。如果我想到什么，我一定会更新这个答案。

与此同时，我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:10:44.710

您正在寻找[星星和酒吧](http://en.wikipedia.org/wiki/Stars_and_bars_%28combinatorics%29)公式。数组 A 的位置是 bin；将在每个位置插入来自 A 的相应元素和来自 B 的任意数量的元素。（选择哪些元素已经由它们的原始顺序确定，因此我们将它们视为无法区分。）如果 A 中有 (n-1) 个元素（在一端添加一个 bin），B 中有 k 个元素，则公式为二项式系数

```
 n + k - 1  
(            )
      k

= ( (n+k-1)! / ( k! (n-1)! )
= (a.size() + b.size())! / (a.size()! * b.size()!) 
```

这与模板类型定义的答案相同:)

实际上*计算*如此大数的商是另一个问题。在大多数语言中，分子通常会产生整数溢出。C++ 中的一种简单策略（不一定是最优策略）是

```
unsigned long long gcd( unsigned long long &a, unsigned long long &b )
    { return b? gcd( b, a % b ) : a; }

std::vector< std::size_t > numerator( a.size() ); // factors of (a+b)!/b!
std::iota( numerator.begin(), numerator.end(), b.size()+1 );

for ( std::size_t afactor = 2; afactor != a.size()+1; ++ afactor ) {
    std::size_t reduced = afactor;
    for ( auto &&nfactor : numerator ) {
        auto common = gcd( afactor, nfactor );
        nfactor /= common;
        reduced /= common;
        if ( reduced == 1 ) goto next_afactor;
    }
    throw std::logic_error( "Fractional combinations" );
next_afactor: ;
}

return std::accumulate( numerator.begin(), numerator.end(), 1,
                        std::multiplies< std::size_t >() ); 
```

# ruby - Ruby 自然排序/排序

> ID：14272002
> 
> 赞同：3
> 
> 时间：2013-01-11T05:02:58.893
> 
> 标签：ruby, ruby-on-rails-3, sorting, ruby-on-rails-3.2

我正在使用[Challonge](http://www.challonge.com) API，在查询锦标赛时，每场比赛都会返回一个`indentifier=`AZ。在前 26 个匹配之后，标识符变为`AA-AZ`then `BA-BZ`，依此类推。

当拉取单个锦标赛的整个比赛列表并尝试使用`.sort_by`标识符时，结果按以下顺序排列：

`A AA AB AC ... B BA BB BC ... C ...`

为了正确显示匹配项，它们需要按以下顺序排列：

`A B C ... AA AB AC ... BA BB BC ...`

我花了一些时间搜索，找不到任何真正简单的方法来实现这一点。我发现的大多数帖子都涉及文件名或编号，我不确定如何将其应用于这种情况。

任何帮助将不胜感激！

**编辑**

这是一个示例响应：

`[{"match":{"created_at":"2013-01-09T23:25:22-05:00","has_attachment":false,"id":8148294,"identifier":"CK","loser_id":null,"player1_id":null,"player1_is_prereq_match_loser":true,"player1_prereq_match_id":8148251,"player1_votes":null,"player2_id":null,"player2_is_prereq_match_loser":false,"player2_prereq_match_id":8148293,"player2_votes":null,"round":-9,"started_at":null,"state":"pending","tournament_id":320424,"updated_at":"2013-01-09T23:25:25-05:00","winner_id":null,"prerequisite_match_ids_csv":"8148251,8148293","scores_csv":""}}`

你可以看到`"indentifier":"CK"`里面。使用时，`.length`我不断得到一个`undefined method 'length'`. 在我正在使用的控制器中`@tournamentlist = tournamentlist.matches.sort...`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T05:17:47.547

要不就：

```
ids = ["AA", "A", "C", "CA", "CCC"]
ids.sort { |a,b| [a.length, a] <=> [b.length, b] }
#=> ["A", "C", "AA", "CA", "CCC"] 
```

或者，使用[`sort_by`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-sort_by)，甚至更短：

```
ids.sort_by { |a| [a.length, a] } 
```

参考：[如何按不同订单的多个条件进行排序？](https://stackoverflow.com/questions/73032/how-can-i-sort-by-multiple-conditions-with-different-orders)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T05:09:59.430

这很简单，只需将该数组分成组，其中每个组包含相同长度的 id（一个字母 id、两个字母 id 等），将它们分别排序然后合并。

```
ids = %w[A B C AA AB AC BA BB BC AAB BBC CBA].shuffle
ids # => ["CBA", "BA", "C", "BC", "BB", "AC", "BBC", "AAB", "AA", "B", "AB", "A"]

sorted_ids = ids.group_by(&:length).sort{|(len1, _), (len2, _)| len1 <=> len2 }.map do |_, id_group|
  id_group.sort
end.flatten

sorted_ids # => ["A", "B", "C", "AA", "AB", "AC", "BA", "BB", "BC", "AAB", "BBC", "CBA"] 
```

### 让我们分解这段代码：

```
.group_by(&:length) 
```

这将处理原始数组并按其长度分组字符串，生成一个数组，其中每个元素也是一个包含两个元素的数组：第一个元素是长度，第二个元素是这个长度的字符串数组。

```
.sort{|(len1, _), (len2, _)| len1 <=> len2 } 
```

这部分对 id 组进行排序，以便它们按长度升序出现（所有单字母字符串排在第一位）。

```
.map {|_, id_group| id_group.sort } 
```

它将获取所有`(length, strings)`对，对字符串进行排序并返回。此调用生成数组数组。

```
.flatten 
```

`flatten`照它说的做：采用嵌套数组并“展平”它，这样就没有嵌套。

# oracle11g - 我无法在 AVDF 12 中收集审计跟踪。怎么了？

> ID：14272003
> 
> 赞同：1
> 
> 时间：2013-01-11T05:03:07.250
> 
> 标签：oracle11g, audit, audit-trail

我根据*Oracle® Audit Vault and Database Firewall Installation Guide 和 Administrator's在 Oracle Linux VM (VMware) 中安装了 Audit Vault Server 12（未安装数据库防火墙）并在 Windows 7 x64 VM (VMware) 中激活了 Oracle 11g 第 2 版的代理指南版本 12.1.0*如下：

1)`ALTER SYSTEM SET AUDIT_TRAIL=XML, EXTENDED SCOPE=SPFILE;` 数据库重启。

2) 注册 Oracle 数据库主机。

3) 在主机上部署代理并请求激活。

4) 在安全目标上创建用户帐户并在 Oracle 数据库安全目标上设置 Oracle AVDF 用户权限。

5) 使用 stpe 4 的用户帐户在 Audit Vault 服务器中注册安全目标：`jdbc:oracle:thin:@//IP:1521/orcl`

6) 在 Audit Vault Server 中配置 Audit Trail：TABLE -`sys.aud$`或`DVSYS.audit_trail$`DIRECTORY - 以 XML 格式保存审计跟踪目录。

每一步似乎都安装没有任何问题。我关闭了防火墙以防万一。在 Audit Vault Server 中配置 Audit Trail 后，AVDF 的管理员网页仅显示“请求已完成”的消息。但是，收集状态是一个红色的向下箭头，甚至审核员网页也显示相同的状态。我无法在审核员网页中查看审核记录。但是，保险库选项页面 ( `https://IP:1158/dva`) 在其报告页面中显示了审计跟踪。有什么不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T19:42:50.797

我们遇到了类似的问题，经过数周的故障排除和 OAV 代理的重新部署，我们发现 OAV 服务器端存在内存泄漏。OAV 服务器上的 SGA 参数需要正确调整。您最好的选择是打开一个 SR 并与 Oracle 合作，因为它是一个错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T16:26:38.643

也许 orcl 是错误的数据库名称

```
jdbc:oracle:thin:@//IP:1521/xxxx 
```

# android - Android In-App Billing v3：未收到签名

> ID：14272012
> 
> 赞同：13
> 
> 时间：2013-01-11T05:03:57.410
> 
> 标签：android, in-app-purchase

我正在我的应用程序上的 In App Store 上工作，我使用了 robotsmedia 的 AndroidBillingLibrary，当我使用该库购买***android.test.purchased***时，响应正常，我需要的所有数据都在那里。

问题是，当我切换到***Android In-App Billing v3***时，这都是从响应中收到的，没有签名。

`{"packageName":"com.my.sampleapp","orderId":"transactionId.android.test.purchased","productId":"android.test.purchased","developerPayload":"","purchaseTime":0,"purchaseState":0,"purchaseToken":"inapp:com.my.sampleapp:android.test.purchased"}`

我完全按照这个示例[https://developer.android.com/training/in-app-billing/preparing-iab-app.html#GetSample](https://developer.android.com/training/in-app-billing/preparing-iab-app.html#GetSample)但没有签名。我什至运行谷歌给定的示例应用程序，但没有运气。

我将 Base64 编码的 RSA 公钥正确放入 `mHelper = new IabHelper(this, myPublicKey);`

这是我的购买代码`mHelper.launchPurchaseFlow(this, itempackage, 10001, mPurchaseFinishedListener);`

```
OnIabPurchaseFinishedListener mPurchaseFinishedListener = new OnIabPurchaseFinishedListener() {
        public void onIabPurchaseFinished(IabResult result, Purchase purchase) {
            Log.i("Billing", "purchasing: " + result.getMessage());

            if (result.isFailure()) {
                Log.i("Billing", "Error purchasing: " + result);
                return;
            } else if (purchase.getSku().equals("android.test.purchased")) {
                Log.i("Billing - signature", purchase.getSignature());
                consumeItems();
            } else {
                Log.i("Billing", "Error purchasing: " + result);
            }
        }
    }; 
```

不知何故，我的***mPurchaseFinishedListener***在购买后没有收到任何东西，但`protected void onActivityResult(int requestCode, int resultCode, Intent data)`正在收到东西但没有签名。

有什么解决办法吗？奇怪的是 v2 正在接收签名而 v3 没有。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T13:05:20.147

您不会获得测试 ID、android.test.purchased 等的签名。

您将收到真实购买的签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T16:46:41.230

正如 Rawkode 所说，您不再获得测试购买的签名 (android.test.*)。我潜入并使用我的真实产品将我的应用程序上传到市场（只是没有发布）。

低调的签名开始被退回！当数据包含 android.test.* 项目 ID 时，我建议修改您正在使用的任何服务器端验证以跳过签名检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:52:17.687

你说的签名是什么意思？那是订阅吗？还是应用内物品（消耗品或非消耗品）？因为应用内结算 v3 目前不支持订阅，如果您想要该功能，您必须使用 v2 (https://developer.android.com/google/play/billing/billing_overview.html)。此外，请确保您的项目在您的开发者控制台上被标记为“受管理的项目”（对于 Billing v3）。

对不起，如果我误解了。此外，尝试在您的 IabHelper 实例上启用调试模式，这将为您提供更好的问题概览。

```
mHelper.enableDebugLogging(true, "YOURTAG"); 
```

我建议查看开发者网站上的实施指南： [https ://developer.android.com/google/play/billing/billing_integrate.html](https://developer.android.com/google/play/billing/billing_integrate.html)

那里也有示例代码。

# iphone - 在默认搜索栏中搜索字符串为空时启用搜索按钮

> ID：14272015
> 
> 赞同：27
> 
> 时间：2013-01-11T05:04:09.973
> 
> 标签：iphone, ios, objective-c, uisearchbar

在我的应用程序中，我正在使用默认 IOS 搜索栏的搜索功能，如果我放置一些字符串进行搜索，但在第一次搜索后我需要显示整个数据源（原始内容）我的功能是搜索字符串是否为空它将显示整个数据源。我的问题是，如果我在默认搜索栏中将搜索字符串设为空，搜索按钮会自动进入隐藏状态。即使字符串为空，我也需要启用搜索按钮。

![](../Images/4cbee6b5b467191f8cf68dccd4a4cb91.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-12-10T10:10:33.057

实际上你可以`searchBar.enablesReturnKeyAutomatically = NO;`在 iOS 7+ 上设置 Tested

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-11T05:17:03.670

如果您有空字符串，此代码将显示**搜索按钮。**

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar 
{
    [self.searchBar setShowsCancelButton:YES animated:YES];
    self.tblView.allowsSelection = NO;
    self.tblView.scrollEnabled = NO;

    UITextField *searchBarTextField = nil;
    for (UIView *subview in self.searchBar.subviews)
    {
        if ([subview isKindOfClass:[UITextField class]])
        {
            searchBarTextField = (UITextField *)subview;
            break;
        }
    }
    searchBarTextField.enablesReturnKeyAutomatically = NO;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-11T14:41:25.870

斯威夫特 3/iOS 10

```
for view1 in searchBar.subviews {
        for view2 in view1.subviews {
            if let searchBarTextField = view2 as? UITextField {
                searchBarTextField.enablesReturnKeyAutomatically = false
                break
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T05:33:01.013

**使用以下代码启用没有文本的返回键**

```
 UITextField *searchField = nil;
  for (UIView *subview in searchBar.subviews) {
    if ([subview isKindOfClass:[UITextField class]]) {
      searchField = (UITextField *)subview;
      break;
    }
  }

  if (searchField) {
    searchField.enablesReturnKeyAutomatically = NO;
  } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-08-24T15:00:47.397

也许是苹果方面的错误？由于从 .xib 文件设置自动启用返回键无法按预期工作。

只需添加以下代码：

```
- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar {
    searchBar.enablesReturnKeyAutomatically = NO;

    return YES;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T05:25:16.380

创建一个自定义`view`& 上`view`添加一个`button`以删除键盘。当. `- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar` `delegate`_ `UISearchBar`在该按钮上单击退出键盘以及`view`您为此创建的键盘`button`。此外，如果您想搜索该按钮单击，那么您也可以这样做。请参阅图片以获取更多说明。

![在此处输入图像描述](../Images/489c0225c9b5dc8085fdc7d480ee2904.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-10T05:59:29.650

它与接受的答案几乎相同，但如果您使用的是 iOS 7，由于搜索栏的一些变化，您将需要额外的 for 循环

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar 
{
    [self.searchBar setShowsCancelButton:YES animated:YES];
    UITextField *searchBarTextField = nil;
    for (UIView *mainview in self.searchBar.subviews)
    {
        for (UIView *subview in mainview.subviews) {
            if ([subview isKindOfClass:[UITextField class]])
            {
                searchBarTextField = (UITextField *)subview;
                break;
            }

        }  
    }
    searchBarTextField.enablesReturnKeyAutomatically = NO;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-05T16:51:55.047

使用它适用于 ios 6 和 7：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)search
{
    UITextField *searchBarTextField = nil;
    for (UIView *mainview in search.subviews) {
        if (floor(NSFoundationVersionNumber) <= NSFoundationVersionNumber_iOS_6_1) {
            if ([mainview isKindOfClass:[UITextField class]]) {
                searchBarTextField = (UITextField *)mainview;
                break;
            }
        }
        for (UIView *subview in mainview.subviews) {
            if ([subview isKindOfClass:[UITextField class]]) {
                searchBarTextField = (UITextField *)subview;
                break;
            }
        }
    }
    searchBarTextField.enablesReturnKeyAutomatically = NO;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-14T17:03:29.740

如果您正在寻找更优雅的解决方案，您可以使用递归在搜索栏中查找文本字段，如下所示。这应该适用于 ios 6、7 或任何其他未来的 ios，除非苹果有任何弃用。

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar {
    UITextField* textField = [self findTextFieldInView:searchBar];
    if (textField) {
        textField.enablesReturnKeyAutomatically = NO;
    }
}

-(UITextField*)findTextFieldInView:(UIView*)view {
    if ([view isKindOfClass:[UITextField class]]) {
        return (UITextField*)view;
    }
    for (UIView* subview in view.subviews) {
        UITextField* textField = [self findTextFieldInView:subview];
        if (textField) {
            return textField;
        }
    }
    return nil;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-05-10T09:39:12.317

**简单的斯威夫特版本：**

```
if let searchTextField:UITextField = searchBar.subviews[0].subviews[2] as? UITextField {
                searchTextField.enablesReturnKeyAutomatically = false
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-01-28T07:19:43.097

这是使用 Swift 的解决方案。只需将其粘贴到您的 viewDidLoad 函数中，并确保您在代码中有一个 searchBar 的 IBOutlet。（在我下面的示例中，inputSearchBar 变量是 IBOutlet）

```
 // making the search button available when the search text is empty
    var searchBarTextField : UITextField!
    for view1 in inputSearchBar.subviews {
        for view2 in view1.subviews {
            if view2.isKindOfClass(UITextField) {
                searchBarTextField = view2 as UITextField
                searchBarTextField.enablesReturnKeyAutomatically = false
                break
            }
        }
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-30T09:11:34.033

**迅速使用 UISearchBarDelegate**

```
func searchBarTextDidBeginEditing(_ searchBar: UISearchBar) {
    searchBar.enablesReturnKeyAutomatically = false  
}` 
```

[![在此处输入图像描述](../Images/7958bfa8e290e328bb2f1593ae9b782a.png)](https://i.stack.imgur.com/wvbXC.jpg)

# java - 你能自动将 Eclipse 的调试器附加到子进程吗？

> ID：14272023
> 
> 赞同：5
> 
> 时间：2013-01-11T05:04:56.850
> 
> 标签：java, eclipse, debugging

启动 Java 进程时是否可以自动附加 Eclipse 调试器？我正在运行一个生成进程的程序（使用 RMI 激活），我给子进程一个包含 argv 的 argv `-Xdebug -agentlib:jdwp=transport=dt_socket,suspend=n,server=y,address=9000`，然后我告诉 Eclipse 使用保存的调试配置连接到远程应用程序。但是每次生成进程时单击 Debug 有点乏味。有没有办法自动告诉 Eclipse 打开一个新连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:22:53.693

如果调试进程是您启动的最后一个进程。您可以使用 F11 重新启动它。

但是如果搜索真的是自动的，那么你需要在 Eclipse 中编写一个插件。首先检查它是否不存在： [http ://marketplace.eclipse.org/](http://marketplace.eclipse.org/)

# android - 如何使用 Baseadapter 在列表视图中获取数据？

> ID：14272024
> 
> 赞同：-1
> 
> 时间：2013-01-11T05:04:59.480
> 
> 标签：android

我已经创建了 android 应用程序，我使用了 Listview，我想使用 Baseadapter 在 listview 中显示数据，但是我的应用程序在 logcat 中给了我错误。我搜索了很多找不到相关信息。

**日志错误：**

```
java.lang.RuntimeException: Unable to instantiate activity
ComponentInfo{com.oj2.exlistview/com.oj2.exlistview.TimeTrackerr}:
java.lang.ClassNotFoundException: com.oj2.exlistview.TimeTrackerr in loader
dalvik.system.PathClassLoader[/data/app/com.oj2.exlistview-1.apk] 
```

在 src 文件夹中，我有三个文件

1）首先是适配器类 2）其次是活动类 3）这个普通类具有成员乐趣和数据成员

1）**以下是适配器类**

```
package com.oj2.exlistview;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView.FindListener;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class TimeTrackAdapter extends BaseAdapter {

    ArrayList<TimeRecord> times = new ArrayList<TimeRecord>();

    public TimeTrackAdapter() {
        super();

        times.add(new TimeRecord("23.43", "Feeling good"));
        times.add(new TimeRecord("11.43", "hi this adapter"));
        times.add(new TimeRecord("12.43", "I m Rocking it"));
        times.add(new TimeRecord("13.43", "Feeling good"));
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return times.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return getItem(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        if (convertView == null){
            LayoutInflater inflater = LayoutInflater.from(parent.getContext());
            convertView = inflater.inflate(R.layout.time_list_item, parent,false);
            TimeRecord time = times.get(position);

            TextView timeTextView = (TextView) convertView.findViewById(R.id.timeView);
            timeTextView.setText(time.getTimes());

            TextView noteTextView = (TextView) convertView.findViewById(R.id.noteView);
            timeTextView.setText(time.getTimes());

        }
        return null;
    }
} 
```

2）**第二个是活动类**

```
package com.oj2.exlistview;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;

public class TimeTracker extends Activity{
    TimeTrackAdapter timeTrackAdapter= null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list);
        ListView listView = (ListView) findViewById(R.id.timeListView);
        timeTrackAdapter = new TimeTrackAdapter();

        listView.setAdapter(timeTrackAdapter);
        listView.getAdapter();
    }

} 
```

3）**以下是Manifest文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.oj2.exlistview"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.oj2.exlistview.TimeTrackerr"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:09:40.477

你的班级名称是

```
TimeTracker 
```

你写的

```
android:name="com.oj2.exlistview.TimeTrackerr" 
```

从清单的活动属性中删除最后一个 r，如下所示

```
android:name="com.oj2.exlistview.TimeTracker" 
```

或者只是写

```
android:name=".TimeTracker" 
```

# java - Require override of specific methods of a non-abstract class

> ID：14272026
> 
> 赞同：16
> 
> 时间：2013-01-11T05:05:13.673
> 
> 标签：java, inheritance, methods

Is it possible to have a class defined like

```
public class MyClass
{
    public void methodA(){} // Inherit
    public void methodB(){} // Inherit
    public void methodC(){} // Require override
} 
```

and then have all classes which extend from MyClass to be required to override `methodC()` but just simply inherit `methodA()` and `methodB()`?

If it is possible, how does one do it? If it's not possible, can you propose an alternative solution to achieve a similar result?

EDIT:

I need a non-abstract class because I want to be able to instantiate this class too.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T05:08:24.647

You would have to make your base class abstract.

```
public abstract class MyClass
{
    public void methodA(){} // Inherit
    public void methodB(){} // Inherit
    public abstract void methodC(); // Require override
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-11T05:09:25.470

You cannot require an override of a non-abstract method.

Maybe you can do something similar to the [template method pattern](http://en.wikipedia.org/wiki/Template_method):

```
 public final void methodC() { methodC1(); someMoreLogic(); methodC2();}

 protected abstract void methodC1();

 protected abstract void methodC2(); 
```

Here methodC encapsulates a fixed algorithm that calls into pieces that have to be supplied by the subclasses.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T05:09:36.687

I don't think you do exactly what you want. Alternatively, create MyBaseClass as an abstract class with `methodC()` abstract implementations for `methodA()` and methodB(). Derive MyClass from it, adding an implementation for `methodC()`. Any classes that you do not want to have inherit that implementation should directly subclass MyBaseClass rather than MyClass.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T05:09:55.373

If you want a method to be just inherited use `final` keyword. To force overriding make it `abstract`. However, only non-abstract child classes will have to override it.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T05:12:22.923

AFAIK there is no way to force override a method in Java with out abstract.

You can achive with `abstract` class by making the `method as abstract` method.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-17T04:37:30.190

one way to do it may be to use virtual keyword instead of abstract but it **doesnt require** to override, but you **can** do override. though so, you can instantiate.

another way and more recommended is to create an interface where you can indicate what the class requirements. it is something like abstract, you indicate what to require, but keep in mind interface is not a class. it's more like pointer. for more for interface click: [https://docs.oracle.com/javase/tutorial/java/concepts/interface.html](https://docs.oracle.com/javase/tutorial/java/concepts/interface.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-28T01:29:43.263

So, java.lang.Thread is a concrete class that implements the Runnable interface. Therefore, it must be that Thread implements a public void run() method. Yet, when you extend Thread, like MyClass extends Thread { }, you are required to implement the run() method.

It stands to reason that there is a way to force overriding of a method without making the containing class abstract.

# c# - 具有“全部保存”功能的 ASP.NET GridView

> ID：14272028
> 
> 赞同：0
> 
> 时间：2013-01-11T05:05:25.227
> 
> 标签：c#, javascript, jquery, asp.net, gridview

**场景：**我想提供一个 GridView，用户可以在其中逐行输入数据并显示它（我还没有绑定到数据库）。我提供了一个页脚，用户在其中输入数据并单击添加以将数据添加到 GridView。最后，我给出了一个“*全部保存*”按钮来将整个 GridView 数据保存到数据库中。

**我做了什么：**我以这种方式实现了它，当每一行添加到 GridView 时，数据被保存到 XML 文件中。当用户单击“*全部保存*”时，文件中的所有数据都会保存在数据库中。这个实现完美地工作。

**我的问题：**我的问题是我发现这个实现有点复杂，所以我想知道是否有其他方法可以做到这一点（Javascript/jquery 或任何其他）。欢迎任何想法/建议/链接/示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:10:14.530

非常感谢你们的回复。我使用[Obout 网格（Excel 样式）](http://www.obout.com/grid/commands/aspnet_commands_excel_style_full.aspx)来实现它。它就像我想要的那样工作。

# git - GIT 推动澄清

> ID：14272033
> 
> 赞同：0
> 
> 时间：2013-01-11T05:05:46.027
> 
> 标签：git, version-control

我设置了 2 个非裸存储库和一个裸存储库。

在第一个存储库提交给自己然后推送到裸存储库直到这里一切正常之后。

然后在第二个存储库中，我克隆了裸存储库并将内容放入第二个存储库。

然后在第二个仓库中，我添加了一个新文件并提交给自己，但我还没有投入到裸仓库中。

然后我执行 git status 并收到类似“您的分支比 origin/master 提前 1 次提交”这样的消息：所以这是自然行为，因为我还没有推送到裸仓库。

后来我推入裸仓库并 cd 到裸仓库并执行**git log**，我看到最新的提交是成功的。

然后我返回到第二个 repo 并执行**git status**，但我仍然收到消息“您的分支比 origin/master 早 1 个提交”。

为什么即使在裸仓库具有最新提交后我仍然收到相同的消息。

```
**EDIT**:And if I try to pull or fetch the message still remains.
1) user@ubuntu:~/user2$ git pull /home/user/central [/home/user/central-Bare repo]

2) user@ubuntu:~/user2$ git fetch /home/user/central
From /home/user/central
 * branch            HEAD       -> FETCH_HEAD [And this fetch command has no output why does this happen.Am I fetching correctly] 
```

当我对 master 和 origin/master 进行 diff b/w 时，我得到以下信息：

```
user@ubuntu:~/user2$ git diff master origin/master
diff --git a/anotherfile.txt b/anotherfile.txt
deleted file mode 100644
index 6acd600..0000000
--- a/anotherfile.txt
+++ /dev/null
@@ -1,2 +0,0 @@
-This is a second file to be committed
-hello 
```

我在 user2 repo 中添加了一些文件，user2 的 git log 是 non-bare repo，bare repo 的 git log 是相同的。user2 repo 的 git status 如下所示：

```
user@ubuntu:~/user2$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 4 commits.
#
nothing to commit (working directory clean) 
```

非裸repo user2中的git branch -vva结果如图所示：

```
user@ubuntu:~/user2$ git branch -vva
* master                dac4ae0 [origin/master: ahead 4] Fifth Commit
  remotes/origin/HEAD   -> origin/master
  remotes/origin/master 8cfb52f Initial Commit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:33:42.373

我想我发现了问题。首先你需要看到这个问题。

[Git：从命名远程获取和从 URL 获取有什么区别？](https://stackoverflow.com/questions/14085504/git-whats-the-difference-between-fetching-from-named-remote-and-fetching-from/14090822#14090822)

然后我建议你在第二个代表中执行以下命令：

```
git remote add origin <bare repo path>
git pull origin
git push 
```

或者当你初始化第二个 repo 时使用`git clone <bare repo path>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:10:28.113

消息“您的分支比`origin/master`1 提交领先”意味着您的本地 master 有一个远程 master 引用 ( `origin/master`) 没有的提交。也许更新它以`git fetch`解决您的问题。

# iphone - IOS 推送通知未从 MDM 服务器到达设备

> ID：14272038
> 
> 赞同：2
> 
> 时间：2013-01-11T05:06:31.130
> 
> 标签：iphone, ios, push-notification

我正在开发移动设备管理系统，但我的推送通知不起作用。我的代码是

```
//$apnsHost = 'gateway.push.apple.com';
$apnsHost = 'gateway.sandbox.push.apple.com';
$apnsPort = 2195;
$apnsCert = 'PushCert.pem';

// Put your device token here (without spaces):
$deviceToken = 'my-device-token'; //I have replaced my actual token here

// Put your private key's passphrase here:
$passphrase = 'pushchat';

// Put your alert message here:
$message = 'My first push notification!';

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', $apnsCert);
//stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);
$fp = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 60, STREAM_CLIENT_CONNECT, $ctx);
if (!$fp)
    exit("Failed to connect: $error $errorString" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
    );

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

我收到类似“连接到 APNS 消息已成功传递”的消息。但通知没有出现在 iPhone 设备上。我还应该检查什么以及解决方案是什么？我还在配置实用程序中检查了 Iphone 日志，但运行脚本时没有看到日志。

# oop - 将参数传递给可能显示封装的方法

> ID：14272039
> 
> 赞同：0
> 
> 时间：2013-01-11T05:06:39.943
> 
> 标签：oop, methods

我有一个存储一些临时数据的类。此类具有用于清除过期数据的“deleteOld”方法。

将参数传递给该函数以设置到期期限是个好主意吗？我的意思是类似的东西`deleteOld(expiredDays)`。或者这个函数应该封装expiredDays参数？

```
deleteOld()
{
  // get expiredDays from config
} 
```

'expiredDays' 是在配置中设置的常量。

第一个变体看起来更灵活。但是第二个看起来更 OOP，因为类客户端不需要知道有关 expiredDays 的任何信息。第二种方式没有透露类实现的细节。

它是 PHP，但我想这没关系

你怎么看？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:34:09.957

它总是取决于，主要取决于业务逻辑。如果一个值控制业务逻辑的某些方面，它可以作为参数给出。这就是参数的用途。

在您的情况下，我认为这`expiredDays`是管理存储数据的业务问题，因此揭示这一点是没有问题的。除了您的业务逻辑要求外部的任何人都不得更改它。正如我所说，这取决于。

您不会透露的可能是数据的存储方式（文件系统，数据库，...）。

# json - 将键值对附加到 json 对象

> ID：14272051
> 
> 赞同：12
> 
> 时间：2013-01-11T05:07:29.593
> 
> 标签：json

这是我正在使用的**json 对象**

```
{
    "name": "John Smith",
    "age": 32,
    "employed": true,
    "address": {
        "street": "701 First Ave.",
        "city": "Sunnyvale, CA 95125",
        "country": "United States"
    },
    "children": [
        {
            "name": "Richard",
            "age": 7
        },
        {
            "name": "Susan",
            "age": 4
        },
        {
            "name": "James",
            "age": 3
        }
    ]
} 
```

我希望这是另一个键值对：

```
"collegeId": {
                      "eventno": "6062",
                      "eventdesc": "abc"
                                            }; 
```

我尝试了 concat 但这给了我 || 的结果 符号，我 cdnt 迭代。我使用了溢出，但只删除了逗号。

```
concattedjson = JSON.stringify(JSON.parse(json1).concat(JSON.parse(json2))); 
```

如何将密钥对值添加到现有的 json 对象？我正在使用 JavaScript。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T06:44:49.620

这是最简单的方法，它对我有用。

```
var testJson = {
        "name": "John Smith",
        "age": 32,
        "employed": true,
        "address": {
            "street": "701 First Ave.",
            "city": "Sunnyvale, CA 95125",
            "country": "United States"
        },
        "children": [
            {
                "name": "Richard",
                "age": 7
            },
            {
                "name": "Susan",
                "age": 4
            },
            {
                "name": "James",
                "age": 3
            }
        ]
    };
    testJson.collegeId = {"eventno": "6062","eventdesc": "abc"}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T05:10:05.507

您需要在引用“collegeId”处创建一个对象，然后为该对象创建另外两个键值对，如下所示：

```
var concattedjson = JSON.parse(json1);
concattedjson["collegeId"] = {};
concattedjson["collegeId"]["eventno"] = "6062";
concattedjson["collegeId"]["eventdesc"] = "abc"; 
```

假设 concattedjson 是您的 json 对象。如果您只有一个字符串表示形式，[`parse`](http://msdn.microsoft.com/en-us/library/ie/cc836466%28v=vs.94%29.aspx)则在扩展它之前首先需要它。

**编辑**

**[`demo`](http://jsfiddle.net/2bJdg/)**对于那些认为这行不通的人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T05:12:59.347

只需使用将 JSON 字符串转换为对象`JSON.parse()`，然后添加属性。如果您需要将其重新转换为字符串，请执行`JSON.stringify()`.

顺便说一句，没有 JSON 对象这样的东西。有对象，并且有表示这些对象的 JSON 字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T14:22:23.107

```
const newTestJson = JSON.parse(JSON.stringify(testJson));
newTestJson.collegeId = {"eventno": "6062","eventdesc": "abc"};
testJson = newTestJson; 
```

# python - 我的 c 应用程序的 GUI 开发。如何进行？

> ID：14272053
> 
> 赞同：3
> 
> 时间：2013-01-11T05:07:34.700
> 
> 标签：python, c, user-interface, wxpython, tkinter

我用 C 语言开发了一个在命令行界面上工作的应用程序。我想让我的代码通过 GUI 显示数据，并且我还想提供一个等待用户输入的窗口。

我需要一些关于如何进行的指示。我遇到了一些网站说 python 中的库将服务于目的。：WxPython、TKinter、PyQt

如何开始？如何将我的 C 应用程序链接到 GUI？我是否也应该开发一个 GUI 应用程序，然后将其链接到我的 C 应用程序？

我是初学者。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:19:40.887

我建议在您的应用程序中使用**[GTK+](http://www.gtk.org/)**或[**Qt**](http://qt.digia.com/)。
它们很受欢迎，跨平台，并且都有大量的文档和强大的社区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:40:43.453

如果您决定将 C 代码与 UI 链接，请看一下[Cython ，它可以轻松地将 C 世界与 Python 世界连接起来，它作为一种胶水语言非常方便。](http://cython.org/)

根据您的应用程序，将其保留为从 python 程序调用的命令行应用程序可能是一个不错的选择。subprocess模块是这里的常用路径，但有一些工具可以提供更多帮助——[比如](http://pypi.python.org/pypi/commandwrapper)[commandwrapper](http://docs.python.org/2/library/subprocess.html)。

至于 GUI，除了其他答案中已经提到的（完全可行的）替代方案之外，[Kivy](http://kivy.org)是一个有趣的新手，而[pyFLTK](http://pyfltk.sourceforge.net/)是一种轻量级、易于学习的老派方法。这些有点异国情调，但很高兴知道它们的存在。

最后，最近发布了[QT5](http://qt-project.org/qt5)，它显示出很大的希望。如果您不介意编写 C++，您可能需要考虑它，它的各种语言包装器尚未准备好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T05:26:46.747

您需要为要使用的任何 GUI 框架安装库。 [WxWidgets](http://www.wxwidgets.org)可用于 C 和 Python，因此您实际上不需要链接到 Python 库。其他选项（如 Intelis 所示）是[GTK+](http://www.gtk.org/)和[QT](http://qt.digia.com/)。

如果您在 Windows 中进行开发，那么您也可以使用 Windows API 来创建您的 GUI 应用程序。或者，您可以考虑使用 C++（托管 C++ 或[MFC](http://msdn.microsoft.com/en-us/library/d06h2x6e%28v=vs.80%29.aspx)）。

安装适当的库后，您需要使用该`#include <...>`指令将它们包含在您的 C 源代码中。

看看这些网站：

[WxWidgets 教程](http://www.wxwidgets.org/docs/tutorials/hello.htm)。

[GTK+ 教程](http://zetcode.com/tutorials/gtktutorial/)

[QT教程](http://zetcode.com/gui/qt4/)

# tomcat6 - 在 Plesk for Windows 上配置 Tomcat 6 服务器

> ID：14272054
> 
> 赞同：1
> 
> 时间：2013-01-11T05:07:39.270
> 
> 标签：tomcat6, windows-server-2008-r2, plesk

我安装了安装了 Plesk 11.0.9 的 Windows 2008 R2 Server。Plesk 有 Tomcat 5.5 的内置版本并且运行良好。现在我们要更新 Tomcat 服务器，并且我们已将 Tomcat 6 安装在安装先前版本的同一目录中。然后我们启动 Tomcat 6 服务并停止 Tomcat 5.5 服务。我们还重新启动了服务器，但仍然在服务器组件的 plesk 面板中显示 Tomcat 5 版本并且 Tomcat 5 服务正在运行 :( ，tomcat 6 不走运。

我用谷歌搜索它，我只看到带有 Linux 服务器的 Plesk 的 tomcat 6 安装，对于 Windows 的 Plesk 没有。甚至在 Plesk 论坛上也没有。

我们需要安装 konacart，为此我们需要 tomacat 6，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:20:14.667

首先，您必须将“C:\Program Files (x86)\Parallels\Plesk\Additional\Tomcat”文件夹备份到“C:\Program Files (x86)\Parallels\Plesk\Additional\Tomcat5.5”（对于例子）。

1.  停止 Tomcat 服务。

2.  将 apache-tomcat-6.0.36-windows-x86.zip 解压缩到“C:\Program Files (x86)\Parallels\Plesk\Additional\Tomcat” 并覆盖内容。

3.  将 server.xml 文件从旧 Tomcat 5.5 文件夹（“C:\Program Files (x86)\Parallels\Plesk\Additional\Tomcat5.5\conf\server.xml”）替换为 Tomcat 6.0“C:\Program Files (x86)\Parallels\Plesk\Additional\Tomcat\conf\server.xml"

4.  将注册表 HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\services\Tomcat5\ 中的键“ImagePath”更新为“C:\Program Files (x86)\Parallels\Plesk\Additional\Tomcat\bin\tomcat6.exe” //RS//Tomcat5 ( Tomcat5 这里只是[服务名称](http://tomcat.apache.org/tomcat-6.0-doc/windows-service-howto.html)）

5.  启动 Tomcat 服务。

我已经用 *.war 应用程序测试了这个配置，它对我有用。还有像“TomcatManager::installVHost”找不到引擎 PSA”这样的错误消息 - 这是因为我不使用 Tomcat 5.5 中的 server.xml

# objective-c - ios的文本字段

> ID：14272058
> 
> 赞同：-1
> 
> 时间：2013-01-11T05:08:08.900
> 
> 标签：objective-c, xcode, uitextfield

我对`iOS`xcode 很陌生。我想在不使用 nib 文件或情节提要的情况下创建一个文本字段。我搜索了答案，但到处都令人困惑，或者他们使用了 nib 文件。我已经创建了按钮并且它工作正常，但是对于文本字段 m 面临问题。这是我的`viewcontroller.m`请帮助。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)loadView {

self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
self.view.backgroundColor = [UIColor purpleColor];

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
UIButton *button1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
UITextField *textfield;

button.frame = CGRectMake(10 ,350 , 300, 40);
button1.frame = CGRectMake(10 ,50 , 300, 40);
textfield.frame = CGRectMake(10, 100, 200, 30);

[button setTitle:@"Change screen to green!" forState:UIControlStateNormal];
[button1 setTitle:@"click screen to red!" forState:UIControlStateNormal];

[button addTarget:self action:@selector(buttonPressed)     forControlEvents:UIControlEventTouchUpInside];
[button1 addTarget:self action:@selector(buttonPressed1) forControlEvents:UIControlEventTouchUpInside];

[self.view addSubview:button];
[self.view addSubview:button1];
[self.view addSubview:textfield];
}
-(void)buttonPressed {
self.view.backgroundColor = [UIColor greenColor];

}
-(void)buttonPressed1 {
self.view.backgroundColor = [UIColor redColor];

}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:15:13.463

您刚刚声明了`UITextField`而不是分配。您必须先分配它，然后设置`frame`并添加它`view`-

```
UITextField *txt = [[UITextField alloc] init];
txt.frame = CGRectMake(10, 100, 200, 30);
txt.delegate = self;
[self.view adsubview:txt]; 
```

它解决了你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:31:46.013

首次使用

```
UITextField *textfield = [[UITextField alloc] init]; 
```

代替

```
UITextField *textfield; 
```

然后设置文本字段的背景颜色，因为背景颜色默认为 clearColor。

```
textfield.backgroundColor   =   [UIColor whiteColor]; 
```

或使用

```
textfield.borderStyle = UITextBorderStyleRoundedRect; 
```

获得白色边框的文本字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:49:15.650

```
UITextField *textfield =[[UITextField alloc] init];
 textfield.frame = CGRectMake(10, 100, 200, 30); 
textfield.delegate = self; [self.view addSubview:textfield];
[self.view bringSubViewToFront:textfield]; 
```

可以解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T05:12:26.570

用这个：

```
UITextField *textfield = [[UITextField alloc] init]; 
```

插图

```
UITextField *textfield; 
```

`UITextField *textfield;`只是 crete 对象引用不是对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T06:11:54.307

如果您像答案所建议的那样添加了 alloc init，那么您的文本字段实际上就在屏幕上，但是由于它没有边框或没有文本，所以您看不到它。尝试添加这一行，然后你会看到它：

```
textfield.borderStyle = UITextBorderStyleRoundedRect; 
```

# css - 将标签内的文本垂直居中

> ID：14272061
> 
> 赞同：0
> 
> 时间：2013-01-11T05:08:17.260
> 
> 标签：css

下面的示例适用于 Chrome，但不适用于 FF 或 IE。我正在尝试将“选项 1”和“选项 2”垂直居中。有人可以将我推向正确的方向吗？

**HTML**

```
<div id="polls-4" class="wp-polls">
    <form id="polls_form_4" class="wp-polls-form" action="/sandbox/our-girls/" method="post">
        <p style="display: none;"><input type="hidden" id="poll_4_nonce" name="wp-polls-nonce" value="eeb4f4642f"></p>
        <p style="display: none;"><input type="hidden" name="poll_id" value="4"></p>
        <div id="polls-4-ans" class="wp-polls-ans"><ul class="wp-polls-ul">
        <li><input type="radio" id="poll-answer-13" name="poll_4" value="13"> <label for="poll-answer-13"><img src="http://i.minus.com/iCKua5u7mVHHA.gif">Option 1</label></li>
        <li><input type="radio" id="poll-answer-14" name="poll_4" value="14"> <label for="poll-answer-14"><img src="http://i.minus.com/iCKua5u7mVHHA.gif">Option 2</label></li>
        </ul>
    </form>
</div> 
```

**CSS**

```
.wp-polls-ul { margin:0 !important }
.wp-polls-ul li { margin-bottom:10px }
.wp-polls-form .wp-polls-ul li input { float:left;height:35px;margin-right:10px }
.wp-polls-form .wp-polls-ul li label { display:block;height:35px;line-height:35px;vertical-align:top }
.wp-polls-form .wp-polls-ul li label img { margin-right:10px } 
```

示例：http: [//jsfiddle.net/tePwt/](http://jsfiddle.net/tePwt/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:40:05.940

@Passerby 提交的将为 Firefox 生成项目符号，只需稍加修改即可尝试。[http://jsfiddle.net/tePwt/5/]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:11:25.193

@John 使用这个 jsfiddle.net/tePwt/7/ 我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:57:00.093

从评论扩展：

添加

```
vertical-align:middle 
```

到`img`. [JSFiddle 演示](http://jsfiddle.net/tePwt/3/)。

# c# - 持久化 C# 应用程序设置/配置的最佳实践

> ID：14272076
> 
> 赞同：2
> 
> 时间：2013-01-11T05:09:48.727
> 
> 标签：c#, mysql, entity-framework, application-settings, configuration-management

我正在努力解决如何保留已读取但也由我的 C# 应用程序更新的首选项/设置/配置。我的配置可以是

*   表示连接字符串、目录名、文件名、...的单个整数、字符串、字节[]
*   字符串或其他值类型的集合。

*   代表一组主要是值类型的类对象实例。

-> 这些设置在不同的、有时是不相关的类中访问。

鉴于以下要点，我目前正在考虑您认为最佳实践：

*   一个自写的键/值存储。在内部，键/值存储在哈希表中，哈希表被序列化/反序列化以实现持久性。

*   实体框架：我可以访问 MS 实体框架并运行 MySQL 服务器实例。

*   文本文件/XML 文件

*   还有其他/更好的想法吗？

排除：

*   我不想在 Settings.settings、App.config 等中存储任何设置

*   我不想使用注册表

*   我不想将设置存储在任何模糊的漫游目录结构或其他隐藏目录中。设置应存储在专用数据库/表中或应用程序可执行文件夹或子文件夹中。

问题：

*   我不确定是否将所有配置对象存储在同一个实体中，或者是否应该设置几个这样的实体来存储配置组？
*   持久化这些轻量级对象的最佳方法是什么？这些对象充当设置/配置，然后加载和访问这些对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:22:25.820

您可以将设置存储在 WMI 命名空间中。我们在那里存储了我们的产品特定设置和配置之一。此外，尽管您已排除 App.config，但应用程序特定设置通常会存储在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:09:47.050

我建议在这种情况下使用 XML。

*   易于书写和阅读

*   人类可读，易于手动打开和编辑

*   使用 LINQ to XML，您可以查询特定数据并将该数据转换为强类型对象

*   广泛使用和理解，特别是对于配置文件

*   灵活的结构

这些只是我想到的几件事。这是一些查询文件以查找所有类型为 tcp 的协议的示例代码。

```
XElement settings = XElement.Load("settings.xml");
IEnumerable<XElement> tcpSettings = settings.Elements("protocol").Where(o => o.Attribute("name").Value == "tcp")
// make some changes to the settings
settings.Save("settings.xml"); 
```

**编辑：**

[序列化包含字典成员的类](https://stackoverflow.com/questions/495647/serialize-class-containing-dictionary-member)

# c - 初始化静态字符常量 *somevar

> ID：14272083
> 
> 赞同：10
> 
> 时间：2013-01-11T05:10:13.153
> 
> 标签：c, pointers, static, constants

我正在阅读一段代码，其中有

```
#include ...

static char const *program_name;

...
int main(int argc, char** argv){
program_name = argv[0];

...
} 
```

我想知道主函数如何为`const`变量赋值。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-11T05:14:10.127

声明：

```
static char const *program_name; 
```

说`program_name`是一个（变量）指向常量字符的指针。指针可以更改（因此可以在 中赋值`main()`），但不能通过此指针更改指向的字符串。

比较和对比：

```
static char * const unalterable_pointer = "Hedwig"; 
```

这是一个指向变量数据的常量指针；指针无法更改，但如果它初始化指向的字符串不是文字，则可以修改该字符串：

```
static char owls[] = "Pigwidgeon";
static char * const owl_name = owls;

strcpy(owl_name, "Hedwig");

/* owl_name = "Hermes"; */ /* Not allowed */ 
```

还比较和对比：

```
static char const * const fixed_pointer_to_fixed_data = "Hermes"; 
```

这是一个指向常量数据的常量指针。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T05:13:45.103

`program_name`是指向 const char 的指针，而不是 const 指针。赋值语句将值分配给指针而不是指针。

# c# - 查找用户是否按下键？

> ID：14272087
> 
> 赞同：1
> 
> 时间：2013-01-11T05:10:48.457
> 
> 标签：c#, winapi

我想查找用户是否按下了键盘键。我尝试了一些代码：

```
 [DllImport("User32.dll")]
    private static extern short GetAsyncKeyState(System.Windows.Forms.Keys vKey);
    [DllImport("User32.dll")]
    private static extern short GetAsyncKeyState(System.Int32 vKey);
    .....
     if ((GetAsyncKeyState(Keys.F10) == -32767))
       {....} 
```

它的作用是只检查 F10 键的按下情况。它不关心是 Shift+F10 还是 Ctrl+F10 还是 F10。但我想要的是分别查找它们说如果它是 Shift+F10 然后告诉我用户按下了 Shift+F10，如果是 F10 然后告诉我用户按下了 F10。我怎样才能到达那里一个简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:57:55.403

没有简单的方法；GetAsyncKeyState() 将返回您指定的确切键的值，忽略修饰键的概念。处理[WM_CHAR](http://msdn.microsoft.com/en-us/library/ms646276%28v=vs.85%29.aspx)可以处理您想要的一些修饰符，但对于所有这些修饰符（shift、alt、ctrl），您必须明确检查其他键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:27:33.557

您需要检查`GetAsyncKeyState`您感兴趣的每个键。在这种情况下，您将检查 F10，然后检查 shift、ctrl、alt 等。有关可能的值，请参阅[虚拟键代码](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd375731%28v=vs.85%29.aspx)并参阅[GetAsyncKeyState](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646293%28v=vs.85%29.aspx)。

```
short key = GetAsyncKeyState(Keys.F10);
// Check the most significant bit to see if the key is down
if ( ( key & 0x8000 ) > 0 )
{
     // Check  shift is down 0x10 is value for VK_SHIFT
     key = GetAsyncKeyState( 0x10 );
     if ( key & 0x8000 ) > 0 )
     {
         // Shift key is down as well
     }
     // Repeat for other key states.
} 
```

查看 c# [keys 枚举](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys%28v=vs.71%29.aspx)，有许多可能的 shift 值，您可能需要进行一些试验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:17:34.147

你不能检查如下？

```
//in pseudocode
if (f10pressed) {
    if (shiftpressed) {
        //Shift+F10
    } else if (ctrlpressed) {
        //Ctrl+F10
    } else {
        //F10
    }
} 
```

# iphone - 像默认 MessageComposer 一样将联系人/号码添加到 Textview/textfield 中

> ID：14272094
> 
> 赞同：4
> 
> 时间：2013-01-11T05:11:27.797
> 
> 标签：iphone, objective-c

就像我的其他问题一样，我试图搜索这个。但我什么也没得到。
也许我的路径是错误的。请指导我。

**这是我的问题：**我有一个 UITextView。我将添加数字、姓名和联系人。
我想像 MessageComPoser 那样分别显示每个数字。

![好像](../Images/aff857c1cc8c9564a17a2d306b29b6a1.png)

有人知道怎么做吗？
如果我的问题不值得，请给我正确的答案，然后投反对票。
（对于我的问题，有人甚至没有给出任何答案就投了反对票！！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:19:49.637

使用苹果的原生框架无法做到这一点，他们没有提供任何控制来做同样的事情。

您可以使用[**Three20**](http://api.three20.info/interface_t_t_message_recipient_field.php#_details)框架提供的[**TTMssageRecipientField**](http://three20.info/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:42:31.053

我找到了答案。我不想使用 Three20 库，因为它很难在我的项目中使用。

所以我找到了很棒的[***链接***](https://stackoverflow.com/a/13263181/1358508)。这给了我答案。我使用了这个代码，它可能对许多用户**都有帮助**，特别是对于那些支持这个问题的人。

[***优秀的代码***](http://www.cocoacontrols.com/platforms/ios/controls/thcontactpicker)

# java - 设置 content-type，octet-stream 和 text/csv 的区别

> ID：14272095
> 
> 赞同：4
> 
> 时间：2013-01-11T05:11:41.980
> 
> 标签：java, servlets, mime-types

`response.setContentType("application/octet-stream");`使用而不是为csv文件设置内容类型有什么区别`response.setContentType("text/csv");`，似乎它们都产生相同的结果。哪种方法更受欢迎？只是好奇。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T05:17:55.180

一些浏览器，尤其是 IE，完全忽略了内容类型头，并根据文件扩展名在应用程序中打开响应。在那些浏览器中，这可能无关紧要。

但是，text/csv 是首选的内容类型，应该适用于所有浏览器。"application/octet-stream" 非常通用，并没有给出任何关于应该使用什么类型的应用程序来打开结果的提示。

例如，如果您要返回一个 MS Excel 文件，您将使用 application/vnd.ms-excel 来更具体。由于 CSV 不依赖于某个特定应用程序，因此首选 text/csv。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:19:52.527

CSV 文件没有官方`RFC`文档，但它们是纯文本文件，因此最好使用的 MIME 类型是 text/plain。

```
There are OS specific MIME implementations for CSV files. For example Microsoft use application/vnd.ms-excel. 
```

对于其他 MIME 类型，请参阅此站点：[http ://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm](http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm)

# android - 从 OnClickListener 重新加载或刷新活动不起作用

> ID：14272096
> 
> 赞同：0
> 
> 时间：2013-01-11T05:11:54.073
> 
> 标签：android, android-activity

在我的“ArticleActivity”（用户阅读文章的地方）中，我有一个“相关文章”列表。当用户点击一篇文章时，它应该重新加载或刷新 ArticleActivity 以显示他们点击的文章，而不是他们刚刚阅读的文章。

我在网上找到了很多答案，并尝试了其中的大约 492 个......我可以让它开始一个不同的活动，但我不能让它重新启动当前的活动。

我最近的尝试：

```
 //RELATED ARTICLE CLICK
    relatedArticleClickListener = new OnClickListener()
    {
        public void onClick(View v) {
            Log.d("MYLOG", "related article clicked " + v.getId());
            Intent myIntent = new Intent(v.getContext(), ArticleActivity.class);
            myIntent.putExtra("id", v.getId());
            startActivity(myIntent);
            finish();
        }   
    }; 
```

**更新：**

可能与具有以下内容的 ArticleActivity 有关：`android:launchMode="singleTask"`？我需要它，但还需要能够用新文章重新加载活动。

如果我更改`ArticleActivity.class`为`MainActivity.class`并保留所有其余代码完全相同，它确实会转到 MainActivity。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:17:08.280

替换这些行

```
finish();
startActivity(myIntent); 
```

用这些

```
startActivity(myIntent);
finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:31:38.453

阅读您的更新后，进一步了解您的问题。该行为与您的`singleTask`指定有关。在 下`singleTask`，如果活动已经存在，则不会重新创建它，而是`onNewIntent()`调用它的方法来处理新的意图。有关详细信息，请参阅[Activity.launchmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)。

你真的需要`singleTask`吗？因为删除它也会导致您的问题消失。它还允许您阅读的文章位于后退堆栈中，因此当您的用户完成一篇文章并按下后退键时，它将带他们回到第一篇文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:19:20.937

您应该使用 Intent Flag 这将对您有所帮助，

参考这个链接

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

[http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/](http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/)

[Android中FLAG_ACTIVITY_SINGLE_TOP的含义](https://stackoverflow.com/questions/5887627/the-meaning-of-intent-flags-in-android)

# string - 将 trie 转换为反向 trie？

> ID：14272106
> 
> 赞同：1
> 
> 时间：2013-01-11T05:12:43.280
> 
> 标签：string, algorithm, data-structures, trie

假设我有一个包含多个字符串的**[trie](http://en.wikipedia.org/wiki/Trie)**数据结构。要在 trie 中查找字符串，我将从根开始，依次跟随标有字符串的适当字符的指针，直到到达给定节点。

现在假设我想为同一组字符串构建一个“反向特里”，而不是从第一个字符开始查找字符串，而是从*最后*一个*字符*开始查找字符串。

是否有一种有效的算法可以将尝试转化为反向尝试？在最坏的情况下，我总是可以列出 trie 中的所有字符串，然后将它们一次插入一个反向 trie，但似乎可能有更好、更聪明的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:18:14.537

但是，如果您的排序标准基于字符串的反向，则您的 trie 中的节点基本上是随机顺序的。也就是说，给定`[aardvark, bat, cat, dog, elephant, fox]`按字母顺序排列的序列，反转单词不会给你序列`[xof, tnahpele, god, tac, tab, kravdraa]`。

换句话说，没有比构建反向尝试“更聪明的解决方案”了。

# windows-7 - Windows 7 上的 emacs 24，tramp 找不到 plink 程序

> ID：14272107
> 
> 赞同：3
> 
> 时间：2013-01-11T05:12:44.047
> 
> 标签：windows-7, remote-access, putty, emacs24, tramp

我正在尝试在 Windows 7 上使用带有 Tramp 的 Emacs 24.2 来远程编辑 linux 服务器上的文件。我安装了 Putty 套装程序和 OpenSSH。我还把putty套装中的plink.exe放到emacs 24文件夹下的bin文件夹中，将文件夹emacs24/bin添加到PATH环境变量中。

但是，当我尝试使用 minibuffer 中的命令从 emacs 访问远程文件：/username@host:filename 时，我从 emacs 收到以下错误消息：plink 不被识别为内部或外部命令。好像emacs找不到plink程序。但是，当我尝试在 windows cmd 中运行 plink 时，它可以找到 plink 程序。另外，我可以在 windows cmd 中 ssh 到远程服务器。

谁能告诉我我的问题是什么？我需要安装 cygwin 才能使其工作吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-15T05:40:58.040

为了让 plink 的流浪汉正常工作，我必须将我的 PuTTY 路径添加到我的系统搜索路径中。

在 Windows 10 上：控制面板 >> 系统和安全 >> 系统 >> 高级系统设置 >> 环境变量

到 PATH 我附加了 PuTTY 路径：C:\Program Files (x86)\PuTTY

我猜关键是从 PowerShell 或命令提示符中，您需要能够在不指定路径的情况下运行 plink。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T05:14:45.320

我能够解决这个问题，我不必安装 cygwin。

尝试将安装 putty 的路径添加到`exec-path`emacs 中的变量中。在 emacs 中执行以下 elisp 代码或将其放入您的 .emacs 文件中。确保斜杠是正斜杠，而不是反斜杠，因为 Emacs 和 Windows 使用不同的约定。

`(add-to-list 'exec-path "C:/Program Files (x86)/PuTTy")`

`exec-path`通过键入检查设置的内容`C-h v` `exec-path`

# android - 平板电脑“可绘制”限定符

> ID：14272110
> 
> 赞同：2
> 
> 时间：2013-01-11T05:12:49.587
> 
> 标签：android, titanium

适用于 Mobile+Tablet 的 Titanium 项目，完美地完成了移动版本，但在平板设计时面临一些复杂性。

以下是 Titanium 支持的限定符矩阵，但找不到任何针对 Android-Tablet 的限定符

![在此处输入图像描述](../Images/01eec867c50fc3ea7b31e9d48bfa4dd6.png)

我发现你可以通过将东西放在“ *platform>android>res* ”目录中来强制应用Android资源。

```
var tab = Titanium.UI.createTab({  
    icon:Ti.App.Android.R.drawable.tab_icon
}); 
```

使用 Tab 及其`icon`属性，我可以获得可绘制对象，但它不适用于其他控件（即 ImageView、Button、View 等...）
如何设置从平台文件夹获取图像的 ImageView 的背景？

欢迎任何提示/建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:39:55.673

一切都很好，只是您将路径设置为字符串

IE。`icon:'Ti.App.Android.R.drawable.tab_icon'.`

相反，您必须像下面这样设置图像。

```
icon:Ti.App.Android.R.drawable.tab_icon 
```

**编辑**

我找到了处理 Android 多分辨率的解决方案。

这是我放在`resources/android/images`文件夹中的资源

![你可以看到图像](../Images/eb8b3ef7dc3690677a94e7926a894621.png)

在这张图片中，我为每种类型的可绘制文件夹创建了不同的图片。您可以在所有文件夹中看到 bg.png。在 bg.png 我写了与可绘制文件夹相关的文本。

这是我的**app.js**文件，用于在 imageView 中显示图像

```
Titanium.UI.setBackgroundColor('#000');

var win1 = Titanium.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff'
});

var view  = Ti.UI.createImageView({
    width : Ti.UI.SIZE,
    height : Ti.UI.SIZE,
    image : '/images/bg.png'

})

win1.add(view);
win1.open(); 
```

现在在您的设备中运行应用程序并检查您在 ImageView 中获得的图像。

**注意：：**加载窗口后，如果您要更改方向，它将不会在 ImageView 中为该方向重新加载图像，因为默认情况下，Titanium 通过将`android:configChanges="keyboardHidden|orientation"`行放入自动生成的清单文件中来限制方向更改。

您可以通过将生成的清单文件从“/build/android/”复制到“/project directory/platform/android/”来更改此默认行为

复制此文件后，从“/project directory/platform/android/”目录打开清单文件并删除上面的行（android:configChanges="keyboardHidden|orientation"）。

现在保存文件并运行应用程序，您也可以检查多方向。

**同样对于平板电脑，您可以分别将图像保存在`res-port-large`or`res-port-xlarge`和`res-land-large`or`res-land-xlarge`中用于纵向和横向。**

**编辑2 ::**

还有另一种方法可以解决这个问题。在项目的根目录中创建以下文件夹。

```
Resources
platform
    -> res
        -> drawable
        -> drawable-ldpi
        -> drawable-mdpi
        -> drawable-hdpi
        -> drawable-xhdpi 
```

现在将所有图像放在相应的文件夹中。

现在，您可以从 javascript 文件中执行以下代码来访问这些文件。

```
var view  = Ti.UI.createImageView({
    width : Ti.UI.SIZE,
    height : Ti.UI.SIZE,
    image : Ti.App.Android.R.drawable.icon //Here icon is available to all above folders which we have created in /platform/res

}) 
```

享受！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:40:24.640

在对 Titanium 做了一些工作后，我得出结论，Titanium 遵循相同的命名 drawable 的标准，但唯一的区别是在我们使用的 android 中，`drawable-hdpi`但在 Titanium 中它是`res-hdpi`.

# asp.net - ASPX GridView 标题名称？

> ID：14272113
> 
> 赞同：0
> 
> 时间：2013-01-11T05:13:01.173
> 
> 标签：asp.net

我们如何访问编辑和删除按钮上方的标题？我想在那里放一些文本而不是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:26:09.040

```
 <asp:GridView ID="GridView1" runat="server">
            <Columns>
             <asp:TemplateField>
            <HeaderTemplate>
                <asp:LinkButton ID="btnInsert" runat="server" 
                Text="Insert" CommandName="Insert" ForeColor="White" />
            </HeaderTemplate>
           </asp:TemplateField>
           <asp:CommandField HeaderText="Edit" ShowEditButton="True" />
           <asp:CommandField HeaderText="Delete" ShowDeleteButton="True" />
           </Columns>
         </asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:33:04.663

您可以将文本添加到标题列到编辑按钮的 gridview 列。

```
 <asp:GridView ID="grdviewlst" runat="server" >
                    <Columns>

                        <asp:TemplateField HeaderText="Actions">
                            <ItemTemplate>
                                <asp:Button ID="btnedit" CssClass="btnclassedit" runat="server" CommandName="EDIT"
                                    Text="Edit" ToolTip="Edit" />

                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView> 
```

# php - 设置 MySQL 表数据的过期时间

> ID：14272114
> 
> 赞同：1
> 
> 时间：2013-01-11T05:13:29.980
> 
> 标签：php, mysql, sql

在我正在构建的 MySQL 数据库中，我有一列有一个简单的 0 或 1（真或假）数据字段。所有数据最初设置为 0。如果用户在我正在构建的网站上按下按钮，它将（在数据库中）从 0 更改为 1，以显示用户已登录。我希望他们*自动*注销一天的结束（同样，这是通过将它们设置为 0 来完成的）。

这是一个问题：有没有办法在一段时间后“过期”数据并将其设置回默认值（或 0）？如果是这样，是否可以基于特定的时间段？

如果有任何 SQL 命令或方法可以做到这一点，那么 PHP 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:17:15.913

如果不触发程序，您可能会在这里不走运。但是，您为什么不执行以下操作：代替布尔值，使用日期并在登录时设置日期。然后，不是询问登录是否为真，而是询问登录日期是否为当前日期。无需过期清理，问题已解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:27:01.640

您可以使用事件（http://dev.mysql.com/doc/refman/5.1/en/events.html）或 crontab（仅限 linux/unix）

# algorithm - 在无向无权图中查找给定长度的路径数

> ID：14272119
> 
> 赞同：17
> 
> 时间：2013-01-11T05:14:33.440
> 
> 标签：algorithm, graph, routes, depth-first-search, breadth-first-search

路径的“长度”是路径中的边数。

给定一个源顶点和一个目标顶点，我想找到从源顶点到**给定长度**k的目标顶点**的路径数。**

 ***   我们可以根据需要多次访问每个顶点，所以如果从`a`到的路径`b`是这样的：`a -> c -> b -> c -> b`它被认为是有效的。这意味着可以有循环，我们可以不止一次地经过目的地。

*   两个顶点可以通过不止一条边连接。因此，如果顶点`a`和顶点`b`由两条边连接，则路径 、`a -> b`通过边 1 和`a -> b`通过边 2 被认为是不同的。

*   顶点数 N <= 70，路径长度 K <= 10^9。

*   由于答案可能非常大，因此要以某个数字为模进行报告。

这是我到目前为止的想法：

我们可以在不将任何顶点标记为已访问[的情况下使用广度优先搜索](http://en.wikipedia.org/wiki/Breadt-first_search)，在每次迭代中，我们跟踪该路径所需的边数“n_e”，以及我们的每条边重复边数的**乘积**“p”路径有。

`n_e`如果大于 k，则搜索搜索应该终止，如果我们到达目的地`n_e`等于 k，我们终止搜索并添加`p`路径数。

我认为我们可以使用深度优先搜索而不是广度优先搜索，因为我们不需要最短路径，并且在广度优先搜索中使用的 Q 的大小可能还不够。

我正在考虑的第二种算法类似于[Floyd Warshall](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)使用[这种](http://www.iarcs.org.in/inoi/online-study-material/topics/floyd-warshall.php)方法的算法。只有我们不需要最短路径，所以我不确定这是正确的。

我的第一个算法遇到的问题是“K”可以达到 1000000000，这意味着我的搜索将一直运行到它有 10^9 条边并且 n_e 边数将在每个级别仅增加 1，这将非常慢，我不确定它是否会因大量输入而终止。

所以我需要一种不同的方法来解决这个问题；任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-11T05:51:25.377

所以，这是我记得的一个漂亮的图论技巧。

做一个邻接矩阵`A`。如果和`A[i][j]`之间有边，则为 1 ，否则为 0。`i``j`

那么，和`k`之间的长度路径数就是A^k的入口。`i``j``[i][j]`

因此，要解决这个问题，请`A`使用矩阵乘法构建和构造 A^k（此处适用于求幂的常用技巧）。然后只需查找必要的条目。

编辑：嗯，你需要在矩阵乘法中进行模运算以避免溢出问题，但这是一个小得多的细节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-26T12:33:28.300

实际上 A^k 的 [i][j] 条目在每个简单图中显示了总不同的“步行”，而不是“路径”。我们可以很容易地通过“数学归纳法”来证明它。但是，主要问题是在给定图中找到完全不同的“路径”。我们有很多不同的算法要解决，但上限如下：

(n-2) *(n-3)* ...(nk) 其中“k”是指定路径长度的参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-10T12:30:26.117

让我在上面的答案中添加更多内容（因为这是我面临的扩展问题）。扩展问题是

> `k`在给定的无向树中找到长度路径的数量。

`A`对于图的给定邻接矩阵，解决方案很简单，`G`找出 A ^(k-1)和 A ^k，然后计算`1`对角线上方（或下方）元素中 s 的数量。

让我也添加 python 代码。

```
import numpy as np

def count_paths(v, n, a):
    # v: number of vertices, n: expected path length
    paths = 0    
    b = np.array(a, copy=True)

    for i in range(n-2):
        b = np.dot(b, a)

    c = np.dot(b, a)
    x = c - b

    for i in range(v):
        for j in range(i+1, v):
            if x[i][j] == 1:
                paths = paths + 1

    return paths

print count_paths(5, 2, np.array([
                np.array([0, 1, 0, 0, 0]),
                np.array([1, 0, 1, 0, 1]),
                np.array([0, 1, 0, 1, 0]),
                np.array([0, 0, 1, 0, 0]),
                np.array([0, 1, 0, 0, 0])
            ]) 
```**

# java - 分离后可以将调试器附加到 Java 进程吗？

> ID：14272120
> 
> 赞同：1
> 
> 时间：2013-01-11T05:14:48.290
> 
> 标签：java, debugging, jdwp

如果您使用 arguments 运行 java 进程`-Xdebug -agentlib:jdwp=transport=dt_socket,suspend=n,server=y,address=9000`，则一旦调试器附加到该端口，该进程就会停止侦听该端口。然后，一旦调试器分离，您将无法再次连接到它。分离后有什么方法可以附加调试器？或者是否有一个jdwp代理服务器总是附加到进程并允许调试器随意附加和分离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:57:25.860

简短的回答是肯定的，你应该能够重新连接。这样做应该没有问题。如果多个应用程序在分离/附加期间尝试绑定到同一个端口，则可能存在竞争条件，但我没有看到任何其他可能的问题。

# openssl - OpenSSL SHA1 API 和命令行实用程序的输出差异

> ID：14272124
> 
> 赞同：1
> 
> 时间：2013-01-11T05:15:18.603
> 
> 标签：openssl, sha1

我对 OpenSSL 库和他们提供的命令行实用程序有这个小问题。

下面是我从字符串生成 SHA1 哈希的 C 程序`"hello, world"`：

```
/* test sha1 sample program */
#include <openssl/sha.h>
#include <stdio.h>

int main()
{
   char input[] = "hello, world";
   unsigned char output[20];

   int i = 0;

   SHA1(input,strlen(input) ,output);

   for( i =0;i<20;i++)
     printf(" %x " , output[i]);
 // value printed --  b7  e2  3e  c2  9a  f2  2b  b  4e  41  da  31  e8  68  d5  72  26  12  1c  84

 // value from CMD
 // utility           cd  50  d1  97  84  89  70  85  a8  d0  e3  e4  13  f8  61  2b  09  7c  03  f1

   return 0;
 } 
```

我使用的命令行实用程序是：

```
>echo "hello, world" | openssl sha1 
(stdin)= cd50d19784897085a8d0e3e413f8612b097c03f1 
```

价值观不同，谁能指出为什么两者的行为存在差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:48:26.053

echo "hello, world" 在末尾添加了一个尾随换行符。

要产生相同的结果，请尝试 echo -n "hello, world" | openssl sha1

# android - Android TabHost 已弃用

> ID：14272125
> 
> 赞同：6
> 
> 时间：2013-01-11T05:15:26.100
> 
> 标签：android, android-tabs

我正在创建将支持`Android 2.2` `to Android 4.1`. `TabHost`是`deprecated in Android version 3.2`。_ 但是创建的应用程序在所有`versions`. 但是我想创建`Tab bar`一个看起来像`tab bar` `in Android 4.1`在运行应用程序时的应用程序`Android 4.2`，如果我在下面的`android 3.2 version`设备中运行应用程序，它必须看起来像`tab bar`在那个设备中。我怎样才能做到这一点。？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-11T05:25:38.360

你的问题有很多点，

1.  `TabHost`尚未[弃用](http://developer.android.com/reference/android/widget/TabHost.html)。最近 Google 弃用`TabActivity`了`ActivityGroup`.
2.  即使它已弃用，也不意味着它不能使用。**如果 X 已被弃用，则仅意味着存在一个名为 Y 的更好的替代方案。**

现在回答你的问题，你有不止一种选择

1.  您可以按照其他答案的建议使用 ActionBarSherlock。（编辑：ActionBarSherlock 现在已弃用。）
2.  您可以`TabHost`与片段一起使用，请参阅我的答案[here](https://stackoverflow.com/questions/6987334/separate-back-stack-for-each-tab-in-android-using-fragments/12928498#12928498)作为一个很好的例子。要`Fragment`在 pre 3.0 API 中使用，您需要使用 [Google 的支持库。](http://developer.android.com/tools/extras/support-library.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T05:18:20.653

试试[ActionBarSherlock](http://actionbarsherlock.com/)。

> ActionBarSherlock 是支持库的扩展，旨在通过单个 API 促进在所有版本的 Android 中使用操作栏设计模式。
> 
> 该库将在适当时自动使用本机操作栏，或者会自动围绕您的布局包装自定义实现。这使您可以轻松地为 2.x 及更高版本的每个版本的 Android 开发带有操作栏的应用程序。

教程：

[教程一](http://avilyne.com/?p=180)，[教程二](http://xrigau.wordpress.com/2012/03/15/using-an-actionbar-in-your-application-with-actionbarsherlock/)， [教程三](http://www.grokkingandroid.com/adding-actionbarsherlock-to-your-project/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-30T10:09:31.070

顺便说一句，Android 引入了 ActionBarCompat 以确保 ActionBar 与 3.0 到 2.1 以下的操作系统兼容。您可以在支持库中使用 ActionBarCompat 代替 ActionBarSherlock

[http://android-developers.blogspot.co.uk/2013/08/actionbarcompat-and-io-2013-app-source.html](http://android-developers.blogspot.co.uk/2013/08/actionbarcompat-and-io-2013-app-source.html)

# asp.net - 帧显示两次

> ID：14272126
> 
> 赞同：0
> 
> 时间：2013-01-11T05:15:28.423
> 
> 标签：asp.net, html

我的 ASP.Net 应用程序遇到浏览器问题。当我运行我的应用程序时，一些浏览器会在同一页面中垂直显示我的主页两次。

这是我在我的 aspx 页面中使用的代码，在我的 home.aspx 页面中。

```
<frameset rows="121,*" cols="*" frameborder="no" border="5" framespacing="0" bordercolor="#999999"runat="server">
  <frame src="TopHeader.aspx" name="topFrame" scrolling="no"  noresize="noresize" id="topFrame" title="topFrame" />
  <frameset rows="*" cols="253,*" framespacing="5" frameborder="yes" border="1"  bordercolor="#e5e5e5" >
    <frame src="LeftNav.aspx" name="leftFrame" scrolling="yes" frameborder="no"  id="leftFrame" title="leftFrame" runat="server" />
    <frame src="Default.aspx" name="mainFrame" id="mainFrame" title="mainFrame" frameborder="no" runat="server" />
  </frameset>
</frameset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:22:18.223

我浏览了您的代码，您在那里写了 frameborder="no" 和 border="5" 这两个可能会导致效果。如果border="5" 然后使用frameborder="yes" 和frameborder="0" 将工作而不是"no" 使用cols="30%,70%" 而不是cols=" *" 因为cols="* " 将占据所有可用空间。我已经在我的系统中运行了您的代码，但没有多次获取页面。

# jquery - 在最后一个链接jQuery之后将第一个单词包装在span中

> ID：14272131
> 
> 赞同：1
> 
> 时间：2013-01-11T05:16:06.033
> 
> 标签：jquery

试图找到一种将第一个单词包装在 span 标签中的方法。要换行的文本总是在最后一个链接后面

```
 <div class="style1">
    <a class="style2" href="http://www.example.com">a</a>
    <a class="style3" href="http://www.example.com">b</a>
    test test test test test test test 
</div> 
```

我希望第一个`test`被包裹`<span>test</span>`

它将在此处用于更深入的解决方案

小提琴：http: [//jsfiddle.net/evanmoore/awwTA/1/](http://jsfiddle.net/evanmoore/awwTA/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:42:04.430

```
$('.pag').contents().filter(function () {
  // IE doesn't support `textContent` proerty, you can replace it with $(this).text()
  if (this.nodeType === 3 && $.trim(this.textContent) !== '') {
      $(this).wrap('<div/>').parent().html(function (i, v) {
           return v.replace(/(\w+\s)/, '<span>$1</span>')
      }).replaceWith(function() {
           return this.innerHTML;
      })
  }
}) 
```

[http://jsfiddle.net/XKjtq/](http://jsfiddle.net/XKjtq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:50:54.537

试试这段代码：

```
<script>
    data = $(".style1").html().trim().split("\n");
    str = data[data.length - 1];
    data.splice(data.length - 1, 1);
    str = str.trim().split(" ");
    str[0] = "<span>" + str[0] + "</span>";
    data[data.length] = str.join(" ");
    $(".style1").html(data.join("\n"));
</script> 
```

# javascript - 将时钟（日期和时间）运行速度提高四倍的 JavaScript 代码

> ID：14272133
> 
> 赞同：4
> 
> 时间：2013-01-11T05:16:39.183
> 
> 标签：javascript, html

我需要虚拟时间（4 x 当前日期和时间）。我已经设法用当前日期和时间显示运行时钟，但我无法比当前时间快四倍。

> 例如，如果当前日期为 01-01-2012 00:00:00，则虚拟时间应为 01-01-2012 00:00:04

不仅秒数应该成倍增加；当秒数超过 59 个虚拟秒时，相应的分钟、小时、日期、月份和年份也应该相乘。也就是说，时钟应该以我的日期格式每秒以四秒的增量运行。

请看我的页面： http: [//www.chemfluence.org.in/sample.html](http://www.chemfluence.org.in/sample.html)

它现在以当前时间运行。我想快四倍地运行它。

请在下面查看我的代码。

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            function startTime()
            {
                var today = new Date();
                var h = today.getHours();
                var m = today.getMinutes();
                var s = today.getSeconds();
                // Add a zero in front of numbers<10
                m = checkTime(m);
                s = checkTime(s);
                document.getElementById('txt').innerHTML =
                    today.getDate() +
                    "-" +
                    (today.getMonth()+1)+"-" +
                    today.getFullYear() +
                    " "+h+":"+m+":"+s;
                t = setTimeout(function(){startTime()},500);
            }

            function checkTime(i)
            {
                if (i<10)
                {
                    i = "0" + i;
                }
                return i;
            }
        </script>
    </head>

    <body onload="startTime()">
        <div id="txt"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T05:34:33.640

在知道两个时间戳和因子的情况下，有一个简单的公式可以确定每个给定时间的虚拟时间：

```
var virtualOrigin = Date.parse("2012-01-01T00:00:04"),
    realOrigin = Date.parse("2012-01-01T00:00:00"),
    factor = 4;

function getVirtual(time) {
    return new Date( virtualOrigin + (time - realOrigin) * factor );
}

// usage:
var now = new Date(),
    toDisplay = getVirtual(now); 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/pWmcA/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:20:45.867

1.  确定当前时间（“START”）（作为时间戳——自 1970 年以来的秒数）

2.  显示时钟时，改为显示 (("CURRENT" - "START") * 4) + "START"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:29:37.783

您可以执行`setInterval`1 秒，然后将 4 秒添加到当前日期。

（此示例仅将时间记录到控制台，但您可以轻松地将其连接到 HTML 元素。）

```
var date = new Date();

setInterval(function(){
  date = new Date(date.getTime() + 4000);
  console.log(date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds());
}, 1000); 
```

# android - 使用应用程序嵌入教程

> ID：14272134
> 
> 赞同：1
> 
> 时间：2013-01-11T05:16:57.737
> 
> 标签：android

在我的应用程序中，客户希望我嵌入一个教程来帮助用户学习它。本教程将以屏幕的形式显示如何执行任务的动画。

在实现这个之前......我想知道是否有任何框架已经存在，我可以轻松使用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:41:58.557

您可以使用 VideoView 嵌入视频文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:31:53.197

不，您必须手动执行此操作。设计一个通用的框架或库来做到这一点将非常困难，因为不同的应用程序的用例会有很大的不同。

# java - 声纳添加新项目

> ID：14272135
> 
> 赞同：3
> 
> 时间：2013-01-11T05:16:57.983
> 
> 标签：java, php, jenkins, sonarqube, sonar-runner

我正在尝试将一个新项目添加到`sonar`. 运行 sonar runner 时，出现以下错误，谁能帮我解决这个问题。

`sonar-runner`

```
Runner configuration file: /opt/lampp/htdocs/typo3/sonar-runner-1/conf/sonar-
runner.properties
Project configuration file: /opt/lampp/htdocs/typo3/sonar-project.properties
Runner version: 2.0
Java version: 1.6.0_24, vendor: Sun Microsystems Inc.
OS name: "Linux", version: "2.6.38-8-generic", arch: "i386"
Default locale: "en_IN", source code encoding: "UTF-8"
Server: http://localhost:9000
Work directory: /opt/lampp/htdocs/typo3/.sonar
Total time: 1:00.153s
Final Memory: 0M/30M
Exception in thread "main" java.lang.IllegalStateException: Fail to request server 
version
    at org.sonar.runner.Bootstrapper.getServerVersion(Bootstrapper.java:73)
    at org.sonar.runner.Runner.checkSonarVersion(Runner.java:220)
    at org.sonar.runner.Runner.execute(Runner.java:15
at org.sonar.runner.Main.execute(Main.java:84)
at org.sonar.runner.Main.main(Main.java:56)
Caused by: java.net.SocketTimeoutException: Read timed out
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(Unknown Source)
at java.io.BufferedInputStream.fill(Unknown Source)
at java.io.BufferedInputStream.read1(Unknown Source)
at java.io.BufferedInputStream.read(Unknown Source)
at sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source)
at sun.net.www.http.HttpClient.parseHTTP(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at java.net.URLConnection.getContent(Unknown Source)
at org.sonar.runner.Bootstrapper.remoteContent(Bootstrapper.java:125)
at org.sonar.runner.Bootstrapper.getServerVersion(Bootstrapper.java:71)
... 4 more

XXXXXXXXX:/opt/lampp/htdocs/typo3$ ` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:46:52.907

好的，我自己找到了修复程序，我的声纳在端口 9005 中工作，所以我设置了 url sonar.properties 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:05:52.503

消息“请求服务器失败”明确指出这与声纳服务器有关。要么它不可用（它可能已关闭），要么您的配置不正确。

# c++ - 正在投射 std::pair const& 到 std::pair 常量&安全？

> ID：14272141
> 
> 赞同：16
> 
> 时间：2013-01-11T05:17:45.943
> 
> 标签：c++, templates, casting, constants, reinterpret-cast

假设程序员没有故意做一些奇怪的事情，比如专业化，那么进入 a`reinterpret_cast`是否安全（理论上或实际上）？`std::pair<T1, T2> const &``std::pair<T1 const, T2> const &``std::pair<T1 const, T2>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T19:25:38.803

这样做是不便携的。

`std::pair`要求在第 20.3 条中列出。第 17.5.2.3 条阐明

> 第 18 到 30 条和附录 D 没有指定类的表示，并且有意省略了类成员的说明。实现可以定义静态或非静态类成员，或两者，根据需要实现第 18 到 30 条和附录 D 中指定的成员函数的语义。

这意味着实现包含部分专业化是合法的（尽管极不可能），例如：

```
template<typename T1, typename T2>
struct pair<T1, T2>
{
    T1 first;
    T2 second;
};

template<typename T1, typename T2>
struct pair<const T1, T2>
{
    T2 second;
    const T1 first;
}; 
```

这*显然*与布局不兼容。`first`其他变体，包括可能在规则之前和/或`second`在规则下也允许包含其他非静态数据成员。

* * *

现在，考虑一下布局已知的情况有点有趣。尽管 Potatoswatter 指出了[DR1334](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_closed.html#1334)断言并且`T`与布局`const T`不*兼容*，但该标准提供了足够的保证，让我们无论如何都能获得大部分内容：

```
template<typename T1, typename T2>
struct mypair<T1, T2>
{
    T1 first;
    T2 second;
};

mypair<int, double> pair1;
mypair<int, double>* p1 = &pair1;
int* p2 = reinterpret_cast<int*>(p1); // legal by 9.2p20
const int* p3 = p2;
mypair<const int, double>* p4 = reinterpret_cast<mypair<const int, double>*>(p3); // again 9.2p20 
```

但是，这不起作用，`std::pair`因为我们无法应用 9.2p20 而不知道它`first`实际上是初始成员，但未指定。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T19:14:29.073

`pair`在标准的第 20.3.2 节中定义为具有数据成员：

```
template <class T1, class T2>
struct pair {
    T1 first;
    T2 second;
}; 
```

这意味着对于具体类型`T1`、和`T2`，保证具有各自的数据成员：`pair<T1, T2>``pair<const T1, T2>`

```
struct pair<T1, T2> {
    T1 first;
    T2 second;
};
struct pair<const T1, T2> {
    const T1 first;
    T2 second;
}; 
```

现在，*如果`T1`和`T2`都是标准布局*，那么`pair<T1, T2>`和`pair<const T1, T2>`都是标准布局。如上所述，在[DR1334](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_closed.html#1334)中，它们与*布局不兼容*(3.9p11)，但在 9.2p19 中，它们可以是`reinterpret_cast`各自的`T1`或`const T1`第一个成员。到 9.2p13，`T2`第二个成员必须位于第一个成员之后（即具有更高的地址），并且到 1.8p5 必须立即位于第一个成员之后，以便在考虑对齐后对象是连续的（9.2p19）。

我们可以使用`offsetof`（为标准布局类型定义）检查这一点：

```
static_assert(offsetof(pair<T1, T2>, second) ==
    offsetof(pair<const T1, T2>, second), "!"); 
```

由于`pair<T1, T2>`和`pair<const T1, T2>`具有相同的布局，正向转换并使用结果访问成员在 3.9.2p3 中有效：

> 如果一个类型的对象`T`位于一个地址，那么一个值为地址的*cv*`A`类型的指针被称为指向该对象，而不管该值是如何获得的。 *`T*``A`*

 *所以`reinterpret_cast`只有`std::is_standard_layout<std::pair<T1, T2>>::value`is才是安全的`true`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:31:20.873

实际的答案是转换为 const 应该是安全的，因为您正在重新解释转换为具有相同表示的对象。但是，反过来会引入未定义的行为（const to non-const）。

至于“理论上的”答案，我应该注意到 C++ 标准不保证 const/non-const 对象的相同按位表示。const 关键字保证“概念上的 constness”，这取决于实现。*

# php - paypal订阅：用户订阅后没有IPN

> ID：14272145
> 
> 赞同：0
> 
> 时间：2013-01-11T05:18:14.820
> 
> 标签：php, paypal, payment-gateway, payment, paypal-ipn

我有一个订阅计划，即每月 30 美元，第一个月是免费的。但是当有人订阅时，我没有收到 Paypal 的任何回复，但是我在一个月后收到第一笔付款的回复。如果第一个月是免费的，Paypal 不会发回任何回复？我怎样才能找到成功订阅的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:19:03.787

您是否使用标准订阅按钮或定期付款的快速结帐？

无论哪种方式，您都会在创建新订阅配置文件以及每次付款时获得 IPN。如果您没有看到，我会在您的 PayPal 帐户中检查您的 IPN 历史记录，看看您是否在那里发现错误，并检查您的网络日志，看看您是否在那里发现错误。

我猜你的 IPN 脚本在被新的配置文件 IPN 命中时由于某种原因失败了。

txn_type 值可以是 subscr_signup 或 recurring_payment_profile_created，具体取决于您使用的方法。

# ios - 如何在Objective-C中使用segue表视图控制器单元格单击和单元格长按

> ID：14272152
> 
> 赞同：0
> 
> 时间：2013-01-11T05:19:27.123
> 
> 标签：ios, objective-c, uitableview, storyboard

我是 Objective-C 的新程序员。

我在我的应用程序中使用故事板。它包含 UITableViewController。

当我单击它是使用 segue 的单元格时，转到下一个视图控制器。但我想使用`-(void)onLongPress:(UILongPressGestureRecognizer*)`pGesture 并使用相同的单元格显示另一个 ViewController。

我的 TableView 显示公司。我想根据单元格 LongClick 显示公司详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:40:50.910

您需要创建一个 UILongPressGestureRecognizer。

然后您需要将它附加到您希望识别 longPress 的视图上。当你附加它时，你定义了一个动作选择器和一个目标。动作选择器是一种在识别手势时将在目标中触发的方法。

假设您在 tableViewController 中创建手势识别器并且这也是目标，那么它看起来像这样

```
UILongPressGestureRecognizer* longPGR =
[[UILongPressGestureRecognizer alloc] initWithTarget:self
                                              action:@selector(onLongPress:)];
[self.relevantViewInTableViewCell addGestureRecognizer:longPGR]; 
```

然后你创建一个动作方法来拦截水龙头

```
-(void)onLongPress:(UILongPressGestureRecognizer*)pGesture
{
    //statement
} 
```

如果您使用动态单元格创建表格，则 longPGR 创建应该在您创建单元格时进行。

如果您有静态单元格，您可以使 IBOutlet @properties 连接到相关单元格，并在您的 longPGR 创建中使用该属性。

要显示另一个 viewController，不需要使用 segue。您可以在 longPress 方法中将新的 viewController 推送到 NavigationController 的堆栈中：

```
[self.navigationController pushViewController:newViewController]; 
```

这与使用 segue 具有相同的效果。

# android - 动态 TextViews OnCLickListener 在第一次加载 Activity 时未触发

> ID：14272161
> 
> 赞同：0
> 
> 时间：2013-01-11T05:20:12.493
> 
> 标签：android, onclicklistener

我有一个`LinearLayout`填充了`TextViews`. 每一个`TextViews`都设置为相同的`OnClickListener`. 侦听器确实被触发，但仅在 Activity 加载的第二次。

我怎样才能让它第一次触发/为什么它不是第一次触发？

```
public static void loadArticlesIntoSimilarList(Context mContext, String myid)
{
    //POPULATES THE LIST OF ARTICLES
    //associatedArticles = articlesDataSource.getAssociatedArticlesData(articleId);
    for(final Article similarArticle : articlesDataSource.getAssociatedArticlesList(myid))
    {
        TextView similarArticleTextView = new TextView(mContext);
        similarArticleTextView.setTextColor(mContext.getResources().getColor(R.color.meddark_gray));

        LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.FILL_PARENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);

        similarArticleTextView.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
        layoutParams.setMargins(ConversionHelper.dpToPx(5), 0, ConversionHelper.dpToPx(5), ConversionHelper.dpToPx(20));

        similarArticleTextView.setText(similarArticle.title);
        similarArticleTextView.setId((int) similarArticle.id);

        similarArticlesLinearLayout.addView(similarArticleTextView);
        similarArticleTextView.setClickable(true);
        similarArticleTextView.setOnClickListener(relatedArticleClickListener);
        similarArticleTextView.setLayoutParams(layoutParams);
    }
} 
```

我首先将**监听器**设置在顶部：

```
private static OnClickListener relatedArticleClickListener; 
```

**功能**是：

```
 //RELATED ARTICLE CLICK
    relatedArticleClickListener = new OnClickListener()
    {
        public void onClick(View v) {
            Log.d("MYLOG", "RL Article clicked " + v.getId());
            Intent myIntent = new Intent(v.getContext(),MainActivity.class);
            myIntent.putExtra("id", v.getId());
            startActivity(myIntent);
            finish();
        }
    }; 
```

# c# - .Net ActiveX 控件中的 UnhandledException

> ID：14272165
> 
> 赞同：0
> 
> 时间：2013-01-11T05:20:55.037
> 
> 标签：c#, exception, activex

我需要处理 Internet Explorer 上托管的 .Net ActiveX 中任何来源的异常事件，以防止浏览器崩溃或发生任何异常，因为

```
AppDomain.CurrentDomain.UnhandledException += new 
       UnhandledExceptionEventHandler(CurrentDomain_UnhandledException); 
```

和

```
Application.ThreadException += new 
       System.Threading.ThreadExceptionEventHandler(Application_ThreadException); 
```

在 Application.cs 中不起作用。

# ruby - 'gem install -v' 安装错误版本的 gem

> ID：14272166
> 
> 赞同：1
> 
> 时间：2013-01-11T05:21:01.890
> 
> 标签：ruby, rubygems

我想在我的机器上安装 bundler v1.2.3。首先，我检查了远程 gem 存储库是否存在该版本的 gem：

```
$ gem list --remote | grep "^bundler "
bundler (1.2.3) 
```

然后我尝试安装 gem，但版本不同（v1.1.5）：

```
$ sudo gem install bundler -v '1.2.3'
Successfully installed bundler-1.1.5
1 gem installed
Installing ri documentation for bundler-1.1.5...
Installing RDoc documentation for bundler-1.1.5... 
```

为什么会发生这种情况，这个问题有什么解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T22:36:30.743

刚刚在运行 10.8 的 Mac 上测试过，没有问题。我已经安装了 Bundler 1.3.5。

```
andys-MacBook-Pro:.gem uw$ gem list 'bundler'

*** LOCAL GEMS ***

bundler (1.3.5)
andys-MacBook-Pro:.gem uw$ gem install 'bundler' -v '1.2.3'
Fetching: bundler-1.2.3.gem (100%)
Successfully installed bundler-1.2.3
Parsing documentation for bundler-1.2.3
Installing ri documentation for bundler-1.2.3
1 gem installed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T23:07:42.007

我注意到您使用 sudo 进行安装，但不使用列表。这有时会导致问题，特别是如果您安装了多个版本的 ruby​​/gem（或者如果您使用 rvm）。

如果其中一个 gem 没有使用 ruby​​gems.org 作为默认 gemserver，我也见过这样的怪事。做什么`$ sudo gem list --remote | grep "^bundler "`给你什么

可能无关紧要，但您使用的是哪个版本的 ruby​​？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:45:23.287

我在我的 Win 7 32 位机器上正确安装了 gem (bundle 1.2.3)。再试一次

```
C:\Windows\System32>gem install bundler -v 1.2.3
Fetching: bundler-1.2.3.gem (100%)
Successfully installed bundler-1.2.3
1 gem installed
Installing ri documentation for bundler-1.2.3...
Installing RDoc documentation for bundler-1.2.3... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T15:03:16.750

当我使用时，`gem install bundler '1.2.3'` 我得到了以下内容。

```
PS C:\Users\....> gem install bundler '1.2.3'
Fetching: bundler-1.2.3.gem (100%)
Successfully installed bundler-1.2.3
ERROR:  Could not find a valid gem '1.2.3' (>= 0) in any repository 
```

但是当我删除引号并使用时它工作正常 `gem install bundler 1.2.3`

编辑〜没有看到对上一个答案的评论。看起来这个问题已经解决了。

# html - 在表格行中垂直书写

> ID：14272167
> 
> 赞同：1
> 
> 时间：2013-01-11T05:21:07.060
> 
> 标签：html, css

我想在 HTML 表格中垂直书写。在最后一列中，我希望将文本“时间表”垂直显示。它应该覆盖所有行。像这样的东西：

大号

ü

ñ

C

H

这该怎么做 ？这是我要创建的表。

```
<table style = "border-collapse: collapse"  border = "1px">

  <thead>
    <tr>
    <th colspan="6" align="center"> Time Table </th>
    </tr>

    <tr>
       <th>DAY/TIME</th>
       <th>8-9</th>
       <th>9-10</th>
       <th>10-11</th>
       <th>11-12</th>
      <th rowspan = "6" style="verticle-align: buttom">Lunch Break</th>
     </tr>

    <tr>
      <th>Mon</th>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>

    <tr>
      <th>Tue</th>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>

    <tr>
      <th>Wed</th>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>

    <tr>
      <th>Thu</th>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>

    <tr>
      <th>Fri</th>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>

  </thead> 

</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T05:46:25.107

将您的午休文本放入 div 并应用此 css

```
word-wrap: break-word;width:11px; 
```

看看这个[jsfiddle 演示](http://jsfiddle.net/jQ8GJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:32:20.840

将一个 id（或类）添加到您想要垂直文本的 th 中，然后您可以添加以下 jQuery 函数 - 在每个字符后添加一个换行符：

```
$(function() {
    var html=$('#verticalText').html();
    var newHtml='';
    for (var i=0;i<html.length;i++) {
        newHtml=newHtml+html[i];
        newHtml=newHtml+'<br/>';
    }
    $('#verticalText').html(newHtml);
}); 
```

[http://jsfiddle.net/K3Ab2/](http://jsfiddle.net/K3Ab2/)

（修改自 Naor 的回答：[在长单词中的 n 个字母后添加换行符](https://stackoverflow.com/questions/10798734/add-line-breaks-after-n-numbers-of-letters-in-long-words)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:39:11.307

使用以下 HTML 代码

```
<table id="MyTable" style = "border-collapse: collapse"  border = "1px"> 
```

时间表

```
<tr>
   <th>DAY/TIME</th>
   <th>8-9</th>
   <th>9-10</th>
   <th>10-11</th>
   <th>11-12</th>
  <th rowspan = "6" id="vertical" style="verticle-align: buttom">Lunch Break</th>
 </tr>

<tr>
  <th>Mon</th>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr>

<tr>
  <th>Tue</th>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr>

<tr>
  <th>Wed</th>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr>

<tr>
  <th>Thu</th>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr>

<tr>
  <th>Fri</th>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr> 
```

使用以下 CSS

```
table#MyTable tr th#vertical {
    width: 1.2em;
    white-space: nowrap;
    color: #000;
    /*Firefox*/
    -moz-transform: rotate(-90deg);
    /*Safari*/
    -webkit-transform: rotate(-90deg);
    /*Opera*/
    -o-transform: rotate(-90deg);
    /*IE*/
    writing-mode: tb-rl;
    filter: flipv fliph;
    border:1px black solid;
} 
```

[看到这个链接](http://jsfiddle.net/8zWWk/)

# c# - 创建 ASP.NET HTTP 模块

> ID：14272171
> 
> 赞同：0
> 
> 时间：2013-01-11T05:21:19.690
> 
> 标签：c#, .net, web-config, ihttpmodule

让我们考虑两个具有相同名称空间的类并扩展 IHttpHandler 如下

**第一类：**

```
using System;
using System.Web;
using System.IO;

namespace MyPipeLine
{
     public class clsMyHandler1 : IHttpHandler
     {
          public void ProcessRequest(System.Web.HttpContext context)
          {
               context.Response.Write("The page request is " + context.Request.RawUrl.ToString());
          }

     }

     public bool IsReusable
     {
          get
          {
               return true;
          }
     }
} 
```

**第 2 类：**

```
using System;
using System.Web;
using System.IO;

namespace MyPipeLine
{
     public class clsMyHandler2 : IHttpHandler
     {
          public void ProcessRequest(System.Web.HttpContext context)
          {
               context.Response.Write("The page request is " + context.Request.RawUrl.ToString());

          }

          public bool IsReusable
          {
               get
               {
                    return true;
               }
          }
     }
} 
```

在上面的**命名空间中是： MyPipeLine 有两个类 clsMyHandler1,clsMyHandler2**有

我在 web.config 文件中给出了条目

```
 <system.webServer>
    <modules>
         <add name="mymodule" type="MyPipeLine.clsMyHandler1,MyPipeLine.clsMyHandler2" />   
      </modules>        
</system.webServer> 
```

当我编译应用程序时，它会抛出错误

> 无法加载文件或程序集“MyPipeLine.clsMyHandler2”或其依赖项之一。该系统找不到指定的文件。

我认为 C# 将所有模块都视为类。你有解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:24:30.603

您想为 HTTP 处理程序创建一个模块和实现接口。使用这个[IHttpModule](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx)

# java - HTTP 状态 404 错误 Java Servlet

> ID：14272172
> 
> 赞同：1
> 
> 时间：2013-01-11T05:21:21.087
> 
> 标签：java, jsp, servlets

问题是“请求的资源 (/main_servlet/) 不可用。”

以下是源代码：

上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/main_servlet"/> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <servlet>
        <servlet-name>main_servlet</servlet-name>
        <servlet-class>smart_servlet.main_servlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>main_servlet</servlet-name>
        <url-pattern>/main_servlet</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

</web-app> 
```

main_servlet.java：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package smart_servlet;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author Box
 */
public class main_servlet extends HttpServlet {

    /** 
     * Processes requests for both HTTP <code>GET</code> and <code>POST</code> methods.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {

            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet main_servlet</title>");  
            out.println("</head>");
            out.println("<body>");
            out.println("<h1>Servlet main_servlet at " + request.getContextPath () + "</h1>");
            out.println("</body>");
            out.println("</html>");

        } finally {            
            out.close();
        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /** 
     * Handles the HTTP <code>GET</code> method.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /** 
     * Handles the HTTP <code>POST</code> method.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /** 
     * Returns a short description of the servlet.
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }
} 
```

main_servlet.java、context.xml 和 web.xml 的代码仅由 NetBeans 自动生成。我真的无法弄清楚为什么找不到源。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:26:48.793

尝试使用以下 URL 访问您的代码：

```
http://(servername)/main_servlet/main_servlet 

      where (severname) is the name of the server on which your app is running. 
```

这是必要的，因为您已将应用程序上下文和 servlet URL 模式定义为“/main_servlet”

或者 - 更好的解决方案是将应用程序上下文更改为“MyApp”之类的其他内容

```
<Context antiJARLocking="true" path="/MyApp"/> 
```

然后你会使用 URL

```
http://(servername/MyApp/main_servlet 
```

# java - 使用程序运行后编译错误

> ID：14272176
> 
> 赞同：-1
> 
> 时间：2013-01-11T05:21:47.713
> 
> 标签：java, compiler-errors

# 主程序

```
package esss;
// Add
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import esss.DBI;
import esss.Shared;
import esss.Control;

public class deduction extends esss.Control {
protected DBI dbi;

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
  HttpSession session = request.getSession();
  esss.Shared bean = (esss.Shared)session.getAttribute("shared");

  //String[] checked = request.getParameter("deduction");// needs parameter
  String type = request.getParameter("deduction");// needs parameter
  String amount = request.getParameter("amount");

  addDeduction(bean, type, amount);
  gotoPage("/mainPage.jsp", request, response);
}

public void addDeduction(esss.Shared bean,String type, String amount) throws ServletException{
  try {
    dbi = new esss.DBI();
    if(dbi.connect()) {
      String payment ="";
      if(type.equals("Parking Lot A")) {
        payment="10";
      }
      else if(type.equals("Parking Lot B")) {
        payment="5";
      }
      else if(type.equals("Extra Life Insurance(Age<35, 50,000)")) {
        payment="5";
      }
      else if(type.equals("Extra Life Insurance(Age 35-55, 25,000)")) {
        payment="17";
      }
      else if(type.equals("Extra Life Insurance(Age>55, 10,000)")) {
        payment="35";
      }

      if(!(type.equals("none"))) {
        String empId= bean.getEmpId();
        String dedDate = bean.getCurrentDate();
        //String dedId = bean.getdedId();
        //String dedname = bean.getdedName();
        //String dedAmount = bean.getAmount();
        dbi.updateDeduction(empId,dedId, dedName, type,dedDate);
        bean.setMessage("Deduction Added");
      }
      else {
        bean.setMessage("Please make sure you perfrom deduction");
      }
      dbi.close();
    }
    }catch(Exception e) {
      e.printStackTrace();
      bean.setMessage("Exception caught : " + e);
      bean.setError("The database could not be connected");
    }
  }
} 
```

# 编译器错误

```
compile:
[javac] Compiling 22 source files to /home/student/mcintron/cps4931/maricarmen/build/WEB-INF/classes
[javac] /home/student/mcintron/cps4931/maricarmen/src/deduction.java:71: cannot find symbol
[javac] symbol  : variable dedId
[javac] location: class esss.deduction
[javac]                     dbi.updateDeduction(empId,dedId, dedName, type,dedDate);
[javac]                                               ^
[javac] /home/student/mcintron/cps4931/maricarmen/src/deduction.java:71: cannot find symbol
[javac] symbol  : variable dedName
[javac] location: class esss.deduction
[javac]                     dbi.updateDeduction(empId,dedId, dedName, type,dedDate);
[javac]                                                      ^
[javac] 2 errors

BUILD FAILED 
```

这是主要代码，当我使用编译器进行编译时，它给了我错误。我不明白为什么它会显示这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:25:07.577

你没有声明这两个变量，对吧？

在行中：

```
 dbi.updateDeduction(empId,dedId, dedName, type,dedDate); 
```

`dedId`和_`dedName`

所以你需要取消注释它们......仔细看，就在上面。我猜可能还有另一个问题。一般来说，如果它说它找不到 XYZ，这意味着它甚至没有被声明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:26:42.897

`dedId`没有声明，我可以在注释中找到下面的行，如果你可以取消注释你的代码或下面的行它可能会编译。

```
 //String dedId = bean.getdedId();
  //String dedname = bean.getdedName(); 
```

替换这个

```
//String dedId = bean.getdedId();
//String dedname = bean.getdedName(); 
```

有了这个

```
 String dedId = bean.getdedId();
 String dedname = bean.getdedName(); 
```

# java - 如何使用数组列表进行排列

> ID：14272177
> 
> 赞同：0
> 
> 时间：2013-01-11T05:21:59.533
> 
> 标签：java

我正在尝试将 arraylist 中的第一个元素与其余元素进行比较。

然后将 arraylist 的第二个元素与其余元素进行比较，依此类推，直到
arraylist 结束。

代码如下：

```
ArrayList<String> a = new ArrayList<String>();

    a.add("G1");
    a.add("G2");
    a.add("G3");
    a.add("G1");

    System.out.println(a.size());

    for(int i = 0; i<a.size(); i++){

        for(int j = 0; j<a.size(); j++){

        if(a.get(i) == a.get(j))
            System.out.println("Element: " + a.get(i)+ " at " + i + " and " + "Element: "+ a.get(j)+ " at " + j);

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:27:17.533

`==`是引用相等（例如这两个对象是否指向内存中的相同位置）。对于对象相等，请`.equals()`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:44:54.617

使用此代码，而不是您的代码。

```
for(int i = 0; i<a.size()-1; i++){

    for(int j = i+1; j<a.size(); j++){

    if(a.get(i).equals(a.get(j)))
        System.out.println("Element: " + a.get(i)+ " at " + i + " and " + "Element: "+ a.get(j)+ " at " + j);

    } 
```

希望有帮助.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:30:21.947

采用

```
 if((a.get(i)).equals(a.get(j))) 
```

代替

```
 if(a.get(i) == a.get(j)) 
```

Morover 开始你的初始化`j = i+1`你已经检查了这些先前的字符串，所以不需要再次启动它。

**编辑**

你必须限制你的外部循环，`i<a.size()-1`以便它不会检查最后一个元素。

我希望这有帮助。如果您需要更多帮助，请询问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T05:51:14.427

在您的情况下，由于您使用的是字符串，而不是使用 ==，它是引用相等，因为内存地址相同，您想要使用`.equals()`它将通过两个字符串的实际值进行比较。

至于你的 for 循环，你可以通过这样做稍微提高效率。

```
for (int i = 0; i < a.size()-1; i++)
{
    for (int j = i+1; j < a.size(); j++)
    {
        if(a.get(i).equals(a.get(j)))
        {
            System.out.println("Element: " + a.get(i)+ " at " + i + " and " + "Element: "+ a.get(j)+ " at " + j);
        }

    }
} 
```

由于有时您已经将 a[i] 与 a[j] 进行比较，因此如果您执行 a[j] 等于 a[i]，结果将是相同的，因此您可以跳过它们。当 j 和 i 相同时，这也使您不必检查 a[i] 是否等于 a[j]。

# codeigniter - Codeigniter 查询问题

> ID：14272178
> 
> 赞同：0
> 
> 时间：2013-01-11T05:22:13.847
> 
> 标签：codeigniter, model

我在 codeiginter 中运行以下查询，我想从数据库中返回数据，但我得到一个空白数组作为响应。我调试此问题的尝试表明，模型的返回值可能是问题所在。我需要一双额外的眼睛，所以如果有人可以帮助我，请告诉我。

模型

```
function test($term)
{

    $sql = "select description from category where title = '$term'";
    $query = $this->db->query($sql);

    return $query->result();
} 
```

控制器

```
 function test()
{
    $this->load->model('test');
    $term = $this->input->post('term',TRUE);
    $rows = $this->test->test($term);
    echo json_encode($rows);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:37:41.433

您的代码看起来正确...尝试打印最后一个查询并检查它

**控制器**

```
function test()
{
  $this->load->model('test');
  $term = $this->input->post('term',TRUE);
  $rows = $this->test->test($term);
  echo $this->db->last_query();exit; //this gives you the last query that was made.
  echo json_encode($rows);
} 
```

检查发布的值是否正确...您甚至可以尝试在 mysql 中运行它，看看它是否返回任何行...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:43:50.310

使用`echo $this->db->last_query();`并让您查询并使用您的 mysql 编辑器进行尝试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:11:05.640

我注意到通过运行 echo $this->db->last_query(); $term 的值有一个前导空格，导致查询返回 null。通过添加 $term = trim($term, " "); 我能够删除前导空格并获得正确的结果。

```
 $this->load->model('tp_model');
 $term = $this->input->post('term',TRUE);
$term = trim($term, " ");
$rows = $this->tp_model->test($term); 
```

# java - 线程“某线程”java.lang.OutOfMemoryError 中的异常：Java 堆空间。我能做些什么？

> ID：14272182
> 
> 赞同：1
> 
> 时间：2013-01-11T05:22:26.733
> 
> 标签：java, eclipse, multithreading, out-of-memory

我的 Eclipse 有以下错误消息。

```
Exception in thread "th3" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Unknown Source)
    at java.util.Arrays.copyOf(Unknown Source)
    at java.util.ArrayList.ensureCapacity(Unknown Source)
    at java.util.ArrayList.add(Unknown Source)
    at Apeiron.FBM.Analysis.Clustering.Key.PatternClusterKey.Load(PatternClusterKey.java:260)
    at Apeiron.FBM.Analysis.UserBin.WaferUserDefineBin.CreatePatternClusterKey(WaferUserDefineBin.java:50)
    at Apeiron.FBM.Analysis.UserBin.UserDefineBin.Load(UserDefineBin.java:244)
    at Apeiron.FBM.Analysis.UserBin.WaferUserDefineBinDictionary.CreateUserDefineBin(WaferUserDefineBinDictionary.java:70)
    at Apeiron.FBM.Analysis.UserBin.UserDefineBinDictionary.Load(UserDefineBinDictionary.java:162)
    at Apeiron.MultiCore.OutputFileCreator.LoadDictionary(OutputFileCreator.java:357)
    at Apeiron.MultiCore.OutputFileCreator.run(OutputFileCreator.java:148)
    at java.lang.Thread.run(Unknown Source) 
```

我的 Apeiron 程序由四个线程完成并调用一个可以用“org.w3c.dom.Document”读取的文件。该文件成为 WaferUserDefineBin 的对象。

所以，我做了一些实验。我发现的现象如下：
1\. 我认为这与堆大小无关。我的 Eclipse 的最大内存是 256M，但我的程序只使用了 40M ~ 50M。我试图将 eclipse.ini 文件中的堆大小扩展到 512M。

1.  改变 WaferUserDefineBin 是文件大小的问题。如果我减小文件的大小，则不会发生错误。

2.  这是多线程的问题。即使文件大小很大，它在单线程中也能很好地运行。

3.  另外，我在读取文件的区域使用了锁定，但是发生了相同的错误。

    我很抱歉我的英语能力很差。非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:24:53.707

您需要增加内存（堆大小），但对于您的程序，而不是 Eclipse 本身。

您可以在“运行配置”中找到这些设置。有一个带有“VM 参数”区域的“参数”选项卡。把你的 -Xm 放在那里。

# c++ - 如何测试阻塞与异步？

> ID：14272184
> 
> 赞同：4
> 
> 时间：2013-01-11T05:22:46.797
> 
> 标签：c++, testing, stl, c++11, future

我正在尝试使用谷歌测试/模拟测试阻塞与异步。

不幸的是，我在想出某种测试来确保异步在第一种情况下发生并在第二种情况下阻塞时遇到了麻烦。

*有没有办法确认 std::future 的行为方式应有尽有？*

**代码**

```
#include <gtest/gtest.h>
#include <future>

static unsigned a_slow_calc()
{
  sleep( 1 );
  return 1u;
}

TEST( Test_future, Ensure_async )
{
  // 1\. immediately returns
  std::future<unsigned> answer = std::async( a_slow_calc );

  // 2\. std::future::get BLOCKS until the result is ready
  EXPECT_EQ( 1u, answer.get() );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:43:11.643

**您应该使用** `std::launch::async` **启动策略。**与您在上面写的评论相反，不能保证您的第一个函数调用立即返回。

默认策略是在此线程或另一个线程上执行工作。您当前的代码可能会*在您的机器上*通过测试，但在客户端的机器上可能会失败......

如果您使用该`std::launch::async`策略，那么您的测试基本上是在测试 C++11 标准。换句话说，您希望测试的内容已经得到标准的保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:29:31.870

您可以[`wait_for`](http://en.cppreference.com/w/cpp/thread/future/wait_for)在`future`, 上使用零超时（或非常小），并查看它是否返回值`future_status::timeout`.

# sqlite - 在sqlite中获取特定月份的类别总和

> ID：14272191
> 
> 赞同：0
> 
> 时间：2013-01-11T05:23:31.267
> 
> 标签：sqlite, time, sum

我正在尝试从我的 sqlite 数据库中的事务表中获取某个月份的所有类别的总和。这是桌子的设置方式...

| 编号 | 交易日期 | 交易金额 | 交易类别 | 交易账户 |

现在，我想指定三件事：

1.  账户名称
2.  这个月
3.  那一年

并从指定的账户、年、月获取按transactionCategory分组的transactionAmount的总和。

这是我的 SELECT 语句的样子......

`SELECT SUM(transactionAmount) AS total, transactionDate, transactionCategory FROM transactions WHERE transactionAccount=? AND Strftime(\"%m\", transactionDate)=? AND Strftime(\"%y\", transactionDate)=? GROUP BY transactionCategory ORDER BY transactionCategory`

不幸的是，这将返回零行。如果我不尝试选择月份和年份，我可以获得准确的结果，但我想查看特定时间范围内的数据......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:10:06.867

我弄清楚了这个问题。我只是错误地格式化了年份。应该是 strftime('%Y', transactionDate)=? 不是 strftime('%y', transactionDate)=? - 区别是大写 Y 与小写 Y。

# r - 对多列数据执行统计

> ID：14272192
> 
> 赞同：1
> 
> 时间：2013-01-11T05:23:44.427
> 
> 标签：r, loops, statistics, multiple-columns

我正在尝试对包含数百到数千列的数据表进行某些统计，例如 t 检验。数据的格式是我比较的两组值**在同一列**中。

所以，基本上我的第一次尝试是像下面这样剪切和粘贴；

```
NN <-read.delim("E:/output.txt")
View(NN)
attach(NN)

#output p-values of 100 t-tests 
sink(file="E:/ttest.txt", append=TRUE, split=FALSE)
t.test(Tree1[1:13],Tree1[14:34])$p.value
t.test(Tree2[1:13],Tree2[14:34])$p.value
t.test(Tree3[1:13],Tree3[14:34])$p.value 
```

……………………

随着数据的增长，这变得越来越不切实际。有没有办法通过每一列依次循环这些 t 检验并将输出保存到文件中？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T05:39:52.583

`lapply`我想用一个匿名函数把你带到那里：

```
> test <- data.frame(a=1:100,b=101:200)
> lapply(test,function(x) t.test(x[1:50],x[51:100])$p.value)
$a
[1] 2.876776e-31

$b
[1] 2.876776e-31 
```

我应该为良好的实践尽自己的一份力量，同时还要注意，一次运行 100 个 t 检验充满了潜在的 1 型错误和其他不良情况。孤立地提取 p 值也可能是一个非常糟糕的举动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T05:29:28.737

不确定这是否是一种明智的方法，或者它是否可以正常工作，但请尝试`mapply`使用索引部分，如下所示：

```
test <- data.frame(a=1:100,b=101:200)

testa <- test[1:50, ]
testb <- test[51:100, ]
t.test2 <- function(x, y) t.test(x, y)[["p.value"]]
mapply(t.test2, testa, testb) 
```

*编辑：我使用了 thelatemail 的数据，因此具有可比性。他的警告是正确的。*

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-11T23:13:38.197

感谢所有的投入。只是一些澄清; 当我一次运行数百个 t 检验时，他们每次都在比较独立的数据集。因此，例如，第 1 列 (Tree1) 中的值，第 1:50 行将仅与同一列中的第 51:100 行比较一次，并且不再使用。第 2 列（Tree2）也是如此，依此类推。类型 1 错误仍然是一个问题吗？我看到它的方式基本上是一次对单独的数据集进行 t 检验。

话虽如此，我已经想出了一种使用 for 循环执行此操作的方法，结果与单独对每一列进行 t 测试时的结果相对应。

```
for (i in 1:100)

  print (t.test(mydata[1:50, i],mydata[51:100, i])$p.value)

end; 
```

唯一的问题是我的输出前面总是有一个 [1]。

# sql - 使用 Top 仅获取第一行，但来自子查询中的多条记录

> ID：14272195
> 
> 赞同：0
> 
> 时间：2013-01-11T05:24:00.137
> 
> 标签：sql, ms-access

我有两张桌子，一张有客户，一张有付款

需要具有特定标准的客户的最新付款。为该 specific_criteria 创建了一个查询）

```
select top 1 *
from payments
where id in (select id from specific_criteria); 
```

显然，这只返回一行。

我实际上不能在这个数据库中编写 VB 代码来做到这一点。

寻找一些 SQL 代码，以获得每个客户的最新付款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:49:50.157

```
SELECT c.*,
       p.*
FROM Customers c
     INNER JOIN
     Payments p ON p.Customer_ID=c.ID
WHERE p.ID IN (SELECT p2.ID FROM
               (SELECT p1.ID, MAX(p1.payment_date)
               FROM Payments p1
               GROUP BY p1.ID) AS p2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:23:29.643

像这样的东西会起作用吗？

```
select c.*, (
    select top 1 p.*
    from payments p
    where p.customer_id = c.id
    order by p.payment_date desc )
from customers c
where customer_critera 
```

# php - PHP中的对象无法访问类中的静态属性

> ID：14272196
> 
> 赞同：0
> 
> 时间：2013-01-11T05:24:03.560
> 
> 标签：php

```
class Foo
{
    public static $my_static = 'foo';

    public static function staticValue() {
        return self::$my_static;
    }
}

$foo = new Foo();
print $foo->staticValue() . "\n";
print $foo->my_static . "\n"; 
```

为什么静态属性无法访问，而静态资源可以使用 PHP 中的对象访问。它只能使用 '::' 访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:13:18.247

因为您有 2 个“范围”，一个是“对象”，一个是每个类中的“静态”。因此，如果您想在静态方法中执行普通方法，也会出现同样的问题。例如：

```
class foo {
 public function bar() {
  echo "bar";
 } 

 public static function bar2() {
   echo $this->bar();
 }
}

$foo = new foo();
$foo->bar2(); 
```

那是因为您处于静态上下文中，并且无法从那里访问对象上下文。我想，更多的是不能说这个。看它就像你有一所房子，里面住着 2 个家庭，他们之间的门永远不会打开。你有一个全局的房子，它是类，然后是家庭 1，它是对象范围，最后是家庭 2，它是静态范围。

也许这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:15:49.250

您需要使用范围解析运算符 :: 访问它

```
echo  $foo::my_static . "\n"; 
```

# wpf - 如何在 vs2012 中更改 XAML 设计器的背景颜色？

> ID：14272205
> 
> 赞同：57
> 
> 时间：2013-01-11T05:24:33.123
> 
> 标签：wpf, xaml, visual-studio-2012, designer

我只是尝试在 Designer 中查看 XAML 代码后的结果。但是，当我在 vs2012 中使用深色主题时，很难识别黑色字母。

我的问题是如何在不修改深色主题的情况下将设计师背景更改为白色。似乎改变了工具中的几个选项？

谢谢

* * *

**请浏览所有答案**。都有不同的方法，可能后面的方法会更好地满足您的需求。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2014-04-04T15:43:00.330

在 VS 2013 中，您可以更改 XAML 设计器背景。去：

```
Tools -> Options -> Environment -> Fonts and Colors 
```

在面板顶部的组合框中，选择：

```
Show settings for: XAML UI Designer 
```

然后设置：

```
Item foreground : white
Item background : white or very light grey (custom) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-01-16T00:18:44.653

从 Visual Studio 2017 开始，XAML 设计器有一个“切换画板背景”按钮，它具有将透明从黑色棋盘更改为白色棋盘的效果。

这样做的好处是无需修改 XAML 文件。

[![显示切换画板背景在 Visual Studio 2017 XAML 设计器中位置的图像](../Images/fedf5bf0983b43940ad7cb9b6d75ea38.png)](https://i.stack.imgur.com/J6C8R.png)

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-03-13T19:25:45.587

不涉及代码的替代方法：

1.  安装“ **Visual Studio 颜色主题编辑器**”扩展

    *   VS 2013“RC”：http: [//visualstudiogallery.msdn.microsoft.com/9e08e5d3-6eb4-4e73-a045-6ea2a5cbdabe](http://visualstudiogallery.msdn.microsoft.com/9e08e5d3-6eb4-4e73-a045-6ea2a5cbdabe)
    *   VS 2012：http: [//visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)
    *   VS 2010：http: [//visualstudiogallery.msdn.microsoft.com/20cd93a2-c435-4d00-a797-499f16402378](http://visualstudiogallery.msdn.microsoft.com/20cd93a2-c435-4d00-a797-499f16402378)

        * * *

2.  根据您要修改的主题创建一个新的自定义主题。（下面是 2013 年特定的帮助图片） ![2013 复制主题图标](../Images/a1251266ac47d51d9a6de533ae105af2.png)

3.  单击主题编辑器左上角的“显示所有元素”过滤器按钮 ![显示所有元素按钮](../Images/0075acb7f28b781efbd7b0f76eed8ea0.png)

4.  在主题编辑器右上角的搜索框中输入“画板” ![搜索框](../Images/961751e5340c444f9d2373a1ffbc266b.png)

5.  将“ **`Cider -> ArtboardBackground`**”颜色设置为您选择的不同颜色。

    *   VS2013 还引入了第二个值“ **`Cider -> ArtboardSecondaryBackground`**”来创建有用的棋盘格效果。
6.  耶！:D

* * *

***注意：*** “`Cider -> ArtboardBackground`”颜色主题字段在 VS2012 中找到，但我无法确认它在 VS2010 中是否具有相同的名称。

***编辑：***添加到 VS2013 的链接（感谢@treaschf 的注释！）官方扩展，虽然我认为它是“RC”版本。此外，添加了方便的图片。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2013-01-11T17:52:24.200

我遇到了同样的问题，并且遇到了一篇非常有用的博客文章，其中详细介绍了如何在 App.xaml 中使用触发器的样式

```
<Style TargetType="{x:Type UserControl}">
    <Style.Triggers>
        <Trigger Property="ComponentModel:DesignerProperties.IsInDesignMode"
                 Value="true">
            <Setter Property="Background"
                    Value="White" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

[http://caraulean.com/2012/visual-studio-2012-dark-theme-tip/](http://caraulean.com/2012/visual-studio-2012-dark-theme-tip/)

# json - JSON.parse Map 想要 String 获取整数

> ID：14272208
> 
> 赞同：2
> 
> 时间：2013-01-11T05:24:54.480
> 
> 标签：json, dart

Dart 很棒，就像编程一样。IDE也很棒。我遇到了 Dart JSON.parse 函数在我看来是一个问题（对我来说）。在我看来，问题是如果一个字符串是一个整数，它会在 Map 中创建一个整数。这可能是不可取的，因为可能存在字符串字段包含数字的情况。例如。仅包含门牌号的地址。或者，也许我只是做错了什么。

暴露可能问题的代码行是：

```
String sId       = mAcctData['I_Id']; 
```

我认为对此有一个合乎逻辑的解决方案，如果是这样，我将不胜感激

```
httpSubmitAccountNrLoadEnd(HttpRequest httpReq) {
  String sResponse = null;
  if (httpReq.status != 200) {
    print('On Http Submit Account Nr. There was an error : status =        ${httpReq.status}');
  } else {
    print("On Return from Http Submit Account Nr. no error - status =   ${httpReq.status}");
    sResponse = httpReq.responseText;
  }

  print("Response From Submit Account Nr. = ${sResponse}"); // print the received raw     JSON text

  Map mAcctData = JSON.parse(sResponse);
  print ("Json data parsed to map");

  print ("Map 'S_Custname' = ${mAcctData['S_Custname']}");
  String sCustName = mAcctData['S_Custname'];

  print ("About to extract sId from Map data");
  String sId       = mAcctData['I_Id'];
  print ("sId has been extracted from Map data");

  String sAcctNr   = mAcctData['I_AcctNr'];
  String sAcctBal  = mAcctData['I_AcctBal']; 
```

以下是控制台输出。显示我遇到的问题的行是：

```
Exception: type 'int' is not a subtype of type 'String' of 'sId'. 
```

> ```
> 即将发送http消息
> 从 Http 返回时提交帐户编号。没有错误 - 状态 = 200
> 来自提交帐户编号的响应。= {"S_Custname":"詹姆斯邦德","I_Id":1,"I_Acctnr":123456789,"I_AcctBal":63727272,"I_AvailBal":0}
> Json 数据解析为 map
> 地图“S_Custname”=詹姆斯邦德即将从 Map 数据中提取 sId
> 
> 例外：类型“int”不是“sId”的“String”类型的子类型。
> 
> 堆栈跟踪：#0 httpSubmitAccountNrLoadEnd (http://127.0.0.1:3030/C:/Users/Brian/dart/transact01/transact01.dart:75:31)
> 
> 1 提交AccountNr.submitAccountNr。(http://127.0.0.1:3030/C:/Users/Brian/dart/transact01/transact01.dart:33:59)
> 
> 例外：类型“int”不是“sId”的“String”类型的子类型。
> 堆栈跟踪：#0 httpSubmitAccountNrLoadEnd (http://127.0.0.1:3030/C:/Users/Brian/dart/transact01/transact01.dart:75:31)
> 
> 1 提交AccountNr.submitAccountNr。(http://127.0.0.1:3030/C:/Users/Brian/dart/transact01/transact01.dart:33:59)
> 
> ```

问题：

1.  有针对这个的解决方法吗？（例如，强制 JSON.parse 创建字符串）
2.  有没有更好的方法来处理这个？（例如，直接从 JSON 字符串中提取数据）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:39:21.370

从我看到的你`sResponse` `mAcctData['I_Id']`真的是`int`：

```
{
  "S_Custname": "James Bond",
  "I_Id": 1,
  "I_Acctnr": 123456789,
  "I_AcctBal": 63727272,
  "I_AvailBal": 0
} 
```

所以如果你想得到一个`String`for`mAcctData['I_Id']`你可以使用[int.toString()](http://api.dartlang.org/docs/bleeding_edge/dart_core/int.html#toString)：

```
String sId = mAcctData['I_Id'].toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:36:08.883

如果您希望它们是这样的，只需将您的整数转换为字符串：

```
{
    "S_Custname": "James Bond",
    "I_Id": "1",
    "I_Acctnr": "123456789",
    "I_AcctBal": "63727272",
    "I_AvailBal": "0"
} 
```

现在它应该可以正常工作了。或者，用于`.toString()`将整数转换为字符串。

# jquery - Ajax 是否在 Firefox 中正确实现？同步问题

> ID：14272210
> 
> 赞同：5
> 
> 时间：2013-01-11T05:25:00.150
> 
> 标签：jquery, ajax, firefox

请看下面的代码，你觉得会先打印哪个日志？
在 Chrome 和 IE 中，首先显示“同步 ajax 调用：成功”，这是预期的，
但在 FF 中（在 FF 3.6 和 FF 17.0 中测试），首先显示“异步 ajax 调用：成功”，
这意味着虽然我们使第二个作为同步调用，但是当它的onreadystatechange被触发时，异步（第一）ajax调用的处理程序比同步（第二）ajax调用的处理程序执行得早，这有意义吗？
不是firefox的bug吗？

```
// first ajax call, Note: this is asynchronous.
$.ajax({
    url: "/rest/someUrl",
    async : true,
    dataType : "json",
    contentType: "application/json",
    success : function(data) {
        console.log("async ajax call: success");
    },
    error : function(data) {
    }
})
// second ajax call, Note: this is synchronous.
$.ajax({
    url: "/rest/someUrl",
    async : false,
    dataType : "json",
    contentType: "application/json",
    success : function(data) {
        console.log("sync ajax call: success");
    },
    error : function(data) {
    }
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T08:35:18.633

要“正确”实现某些东西，必须有一些规范。

在规范中，我没有找到任何关于只要同步请求未完成，所有脚本都应该停止执行的事实（请注意，当 sync-XHR 启动时 async-XHR 已经在运行）。

但我发现了这个：

1.  [每个 XMLHttpRequest 对象都有自己的任务源。即 XMLHttpRequest 任务源。](http://xhr.spec.whatwg.org/#xmlhttprequest-task-source)
    --**两个请求都代表一个任务源**--

2.  [当用户代理要对任务进行排队时，它必须将给定任务添加到相关事件循环的任务队列之一。[...] 来自不同任务源的任务可能被放置在不同的任务队列中。](http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#definitions-1)
    --**两个任务可以添加到同一个任务队列中，但不能**--

3.  [只要事件循环存在，它就必须不断地运行以下步骤：
    1.在事件循环的任务队列之一上运行最旧的任务，如果有的话，[...]。用户代理可以选择任何任务队列。](http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#processing-model-4)
    --**他现在选择了他放置同步请求的任务队列**

当我没有误解这一点并且我的逻辑没有错时，这可能会发生：

Firefox 将 XHR 放在同一个队列中，IE 和 chrome 将它们放在不同的任务队列中。

所有浏览器现在都运行他们放置同步 XHR 的任务队列。

*   在 IE 和 chrome 中，同步 XHR 是他队列中最旧的任务并运行
*   在 FF 中，异步 XHR 在他的队列中是最老的并且运行

两种实现似乎都是正确的。

# c# - 通用类型检测

> ID：14272211
> 
> 赞同：0
> 
> 时间：2013-01-11T05:25:01.283
> 
> 标签：c#, c++

C# 中以下内容的等价物是什么？

```
template<class T>
struct S
{
   typedef T MyType;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:28:00.133

泛型和模板是不同的野兽。没有等价物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:36:33.963

您使用的 C++ 代码与可以在 C# 中完成的操作之间存在脱节。如果您可以解释您要使用此代码完成的工作，这将有所帮助。没有其他信息，看起来您只需要引用泛型类型参数。

```
public struct S<MyType> {
    private MyType value;
    // ... more stuff here...

    public MyType Value {
        get {
            return value;
        }
    }
} 
```

# sql - 组合表sql查询

> ID：14272213
> 
> 赞同：0
> 
> 时间：2013-01-11T05:25:04.367
> 
> 标签：sql

我有一个 JavaScript 程序，如果你输入“让我们谈谈”或类似的东西，它会进入它的问题功能，从问题表中向用户提问。它只问没有被问到的问题。

我已经设置了 3 张桌子。

```
(questions)            (people)                (questionasked)
QID  Question           PID   Person           QID PID  Asked   Answer   

1   What is life?        1  Lindsay           1     1   N       ''.
2   Do you know Kate J?  2  Kate              2     1   Y       'Yes, Kate is cool'. 
```

对于所提问的表，有一个 QID 和 PID 的组合主键，因此相同的问题不会被问两次。

什么是让问题被问到的好方法。问题表中可能有 20 多个问题。提供给进行查询的 php 文件的变量只是名称：name（用户名）。例如。

```
$query1 = "SELECT q.Question 
FROM questions q inner join questionsasked qa 
ON q.QID = qa.QID 
WHERE qa.Asked='N'"; 
```

我可以在这里添加另一个 AND 子句来检查吗

```
 questionsasked inner join people on PID = people.PID AND people.Person = $name  ? 
```

上面的查询没有返回任何东西.. 仍然需要更多的 SQL 练习.. 我希望它返回结果中的第一个问题。

好的，我得到的答案主要是 vidyadhar 的回答，并且还结合了 JW 的“OR qa.Asked IS NULL”，这是一个很好的观点，因为除非实际提出问题，否则我可能不会填写“问题”表。最好只是有一个问题表，然后在回答问题后填写问题表。

我正在使用的答案是：

```
 $query1 = "SELECT q.Question 
 FROM questions q
 INNER JOIN questionsasked qa 
 ON q.QID = qa.QID 
 INNER JOIN peopleiknow p
 ON qa.PID = p.PID
 WHERE qa.Asked='N' OR qa.Asked IS NULL
 AND p.Person = '$name'"; 
```

欢迎任何进一步的调整。

其实我还是有这个问题，所以修改了表格，问题并显示了这个问题中的php代码：[PHP文件中的SQL查询需要修复](https://stackoverflow.com/questions/14277245/sql-query-in-php-file-in-need-of-a-fix)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:35:08.023

我认为这会奏效

SELECT q.Question FROM questions q 内连接 questionasked qa ON q.QID=qa.qid WHERE qa.asked='N'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:45:05.430

```
SELECT  a.PID, f.Person,
        d.question
FROM
        (
            SELECT  a.PID, b.QID
            FROM    people a, questions b
        ) c 
        INNER JOIN questions d
            ON c.QID = d.QID
        INNER JOIN people f
            ON c.PID = f.PID
        LEFT JOIN questionasked e
            ON  c.QID = e.QID AND
                c.PID = e.PID
WHERE   e.Asked = 'N' OR e.Asked IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:46:09.503

在这种情况下，您可以使用 INNER JOIN。请检查

```
SELECT Q.Question
FROM questions Q INNER JOIN questionasked A ON Q.QID=A.QID
    INNER JOIN people P ON A.PID=P.PID
WHERE A.QID= 'Question ID' AND
    A.PID='Person ID' AND
    A.Asked='Y' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T12:42:00.887

我认为如果您查看具有或多或少相同主题的 PHP 问题，应该可以解决此问题。

问候

马丁

# powershell - 如何使用 Powershell 检查目录中是否存在特定 dll 的 pdb？

> ID：14272219
> 
> 赞同：0
> 
> 时间：2013-01-11T05:25:37.823
> 
> 标签：powershell, dll, directory, match, pdb

我有一个父目录，其中有多个项目文件夹。如何在 powershell 中检查所有项目文件夹中的所有相应 dll 是否存在 pdb？

我尝试了以下但不知道如何将 pdb 与特定的 dll 匹配。

```
$source = "C:\ParentDir\*"
$Dir = get-childitem $source -recurse
$List = $Dir | where-object {$_.Name -like "*.dll"} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:23:04.860

试试这个，它应该输出两列，FullName、dll 路径和 PDB，其中包含一个布尔值，指示是否存在相应的 PDB 文件。

```
Get-ChildItem $source -Filter *.dll -Recurse | 
Select-Object FullName,@{n='PDB';e={ Test-Path ($_.FullName -replace 'dll$','pdb') -PathType Leaf }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:50:48.007

试试这个：

```
$source = ".\Projects\"
$dlls = Get-ChildItem -Path $source -Filter *.dll -Recurse | where {!$_.PSIsContainer}
foreach ($dll in $dlls)
{ 
    $pdb = $dll.FullName.Replace(".dll",".pdb") 
    if (!(Test-Path $pdb)) { Write-Output $dll }
} 
```

它为每个没有 pdb 的 dll 返回 fileinfo(dir) 对象。使用`fullname`属性获取文件路径。我在上面提供了很长的答案，以便轻松展示它是如何工作的。要缩短它，请使用：

```
$source = ".\Projects\"
Get-ChildItem -Path $source -Filter *.dll -Recurse | where {!$_.PSIsContainer} | % { $pdb = $_.FullName.Replace(".dll",".pdb"); if (!(Test-Path $pdb)) { $_ } } 
```

# java - 捕获意外异常是一种好习惯吗？

> ID：14272220
> 
> 赞同：2
> 
> 时间：2013-01-11T05:25:45.433
> 
> 标签：java, spring, exception-handling

我正在使用`Spring 3`框架编写一个 Web 应用程序。考虑我有 N 个控制器的情况。每个控制器将请求委托给公开的服务并获取响应并返回给用户。

我想知道是否有更好的方法来捕获控制器代码中抛出的意外运行时异常。我不想为我的每个控制器方法编写如下内容。或者这是唯一的方法？

```
try {
     //call the service
} catch(ServiceException serviceEx) {
    //do process for know exception  
} catch(Exception ex) {
    //return generic error message.
} 
```

我知道我们可以使用 Spring Exception resolver。但是当发生意外错误时，我不想显示不同的错误页面。我想在 UI 上显示一些通用错误消息作为我的小部件的一部分？

编辑：

我也不希望我的用户在尝试执行某些操作时看到异常堆栈跟踪。

桑达尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:17:47.377

我认为捕捉`RuntimeException`s 是不好的做法。最初`RuntimeException`被认为是编程错误的前兆（例如`NullPointerException`，指示`null`缺少检查）。而检查异常意味着表明程序可以从中恢复的错误（例如`FileNotFoundException`）。

今天的问题是许多框架`RuntimeException`在应该使用检查异常的地方使用 s。因此，很难区分程序可以处理异常的情况和遇到编程错误（错误）的情况。

这是我个人对企业发展这件事的看法。我知道大多数人都要求删除已检查的异常并将所有内容作为未检查的异常处理（如在 Scala 中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:24:27.367

在我看来，您应该只在代码中捕获可以从中恢复的异常。所有其他异常（已检查或未检查）应由一个 über 异常处理程序捕获，该异常处理程序将记录异常并向用户显示一些通用错误页面（可能带有可用于查找异常的 id）。

例如，在 struts2 中你会这样：

```
<global-exception-mappings>
    <exception-mapping exception="java.lang.Exception" result="unrecoverableException"/>
</global-exception-mappings> 
```

我从不使用 spring mvc，但这篇文章似乎为您提供了 über 异常处理程序的选项：

[http://doanduyhai.wordpress.com/2012/05/06/spring-mvc-part-v-exception-handling/](http://doanduyhai.wordpress.com/2012/05/06/spring-mvc-part-v-exception-handling/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T05:31:01.557

您可以使用此方法捕获运行时意外异常。

```
 try {
  ...
  } catch ( Exception e ) {
  throw new RuntimeException("msg",e);
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:23:19.043

我认为 RuntimeException 是为违约或一些不可恢复的故障等情况而设计的。大多数时候，您应该让容器或一些外部基础设施为您处理它。或者你必须编写大量冗余代码来处理它们，这有点违背 Spring 的设计理念。

在您的情况下，如果您确实需要将它们传输到其他一些通用消息，您可能可以利用一些过滤器或拦截器来捕获那些意外的 RuntimeException。

# yii - 如何为不同的用户切换区域设置/语言

> ID：14272222
> 
> 赞同：1
> 
> 时间：2013-01-11T05:25:58.113
> 
> 标签：yii, translation, yii-extensions, yii-modules

我设计了一个 Web 应用程序，它适用于两个不同的用户说`user1`and `user2`，并且两个用户都需要`view`不同语言的。

我已经研究过，`yii:t()`但是通过这种方法，我们必须在 中定义语言`main.config`，它为两个用户设置相同的语言。

如何为两个用户翻译不同语言的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:41:15.940

我希望这可以帮助你：你需要在你的组件中编辑 urlmanager.php，如果没有文件，你需要创建一个。

检查此网址：[多语言](http://www.yiiframework.com/wiki/294/seo-conform-multilingual-urls-language-selector-widget-i18n/)

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:55:25.523

把它放在你的**SiteController.php**中：

```
public function actionChangeLocale($locale) {

    // (OPTIONAL) if is registered user (not guest), save preferred locale in database 
    if (!Yii::app()->user->isGuest) {

        // Update user settings
        $uid = Yii::app()->user->id;
        User::model()->updateByPk($uid, array('locale' => $locale));
    }

    // change locale
    Yii::app()->user->setState('_locale', $locale);

    // redirect to previous page, in the new locale
    if(isset($_SERVER["HTTP_REFERER"]))
        $referrer = $_SERVER["HTTP_REFERER"];
    else
        $referrer = Yii::app()->getBaseUrl(true) . '/';

    $this->redirect($referrer);
} 
```

编辑您的**main.php**配置 url 管理器规则：

```
'urlManager' => array(
    'urlFormat' => 'path',
        'showScriptName' => false,
        'caseSensitive' => false,
        'rules' => array(
             'lang/<id:\w+>' => 'site/changeLocale', 
```

要更改语言环境，请创建一个链接以将用户指向所需的语言环境：

```
http://www.mysite.com/myapp/lang/en
http://www.mysite.com/myapp/lang/zh
http://www.mysite.com/myapp/lang/ja
http://www.mysite.com/myapp/lang/in
... 
```

如果您在数据库中保存了登录用户的首选语言环境，请将其添加到**SiteController.php**登录操作：

```
 $uid = Yii::app()->user->id;
    $user = User::model()->findbypk($uid);

    $userLocale = isset($user->locale) ? $model->locale : Yii::app()->language;
    Yii::app()->user->setState('_locale', $userLocale); 
```

以上用法适用于使用 htaccess 重写的用户。确保基本**.htaccess**文件是：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L] # Remove trailing slash

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

相关文章：

*   [http://www.yiiframework.com/doc/guide/1.1/en/topics.i18n](http://www.yiiframework.com/doc/guide/1.1/en/topics.i18n)

相关模块：

*   [http://www.yiiframework.com/extension/ei18n/](http://www.yiiframework.com/extension/ei18n/)

# c# - 在 windows8 中自定义 webview 的上下文菜单

> ID：14272231
> 
> 赞同：1
> 
> 时间：2013-01-11T05:27:07.547
> 
> 标签：c#, xaml, windows-8, webview

在 webview 控件中，我们可以选择内容并右键单击以调用上下文菜单，只有一个“复制”选项，我想将我的自定义项添加到上下文菜单中，但我发现从这个线程似乎不可能：[http： //social.msdn.microsoft.com/Forums/en-GB/winappswithcsharp/thread/20c05893-d26f-474e-88b9-b42800071ccb](http://social.msdn.microsoft.com/Forums/en-GB/winappswithcsharp/thread/20c05893-d26f-474e-88b9-b42800071ccb)。是否可以禁用本机上下文菜单并为 webview 创建我自己的上下文菜单？

# asp.net - 为什么 IIS 托管文件在 localhost 和 machinname url 上显示不同的结果？

> ID：14272240
> 
> 赞同：0
> 
> 时间：2013-01-11T05:28:23.130
> 
> 标签：asp.net, iis-7.5

我已经在我的计算机（Windows7）上托管了我的 asp.net 站点当我使用 localhost url 访问我的托管站点时，我得到了下面给出的正确结果

![在此处输入图像描述](../Images/a67c9cd0a5fd27158ba6b913ae131c75.png)

当我使用 url 中的机器名称访问同一个托管站点时，我得到不同的结果（错误） ![在此处输入图像描述](../Images/ce135606d0b5560ae82f962b211460ca.png)

我不知道 Machinename url 和 localhost url 有什么问题，为什么同一个站点会给我不同的结果。

# android - 资源的 ID 在哪里？

> ID：14272241
> 
> 赞同：0
> 
> 时间：2013-01-11T05:28:48.177
> 
> 标签：android

Android 将为 res/drawable 目录中的每张图片分配 id。他们在哪里？我想从池中动态选择一张图片并显示它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:35:54.323

它们存储在 res/drawable 文件夹中。

如果文件名是 demo.png，那么它们可以通过 R.drawable.demo 访问

如果要访问随机可绘制对象，请将所有资源标识符存储在 Integer ArrayList 中，并使用 Random() 以编程方式生成随机函数，并从 arraylist 中获取该特定项目。然后你每次都会有一个随机的drawable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:36:27.350

自动生成的 id 在 gen 文件中，但不建议使用它们。最好通过一些预定义的 R.drawable.filename 数组直接使用文件名并随机选择它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:36:52.980

ID 存储在 R.java 文件中，但您无法对其进行编辑，因为您的更改每次都会被覆盖。

您还可以按名称访问资源，如果您知道资源的名称或可以根据某些预定义的命名方案派生它们，这可能是解决问题的可行方法。（例如图像在序列中命名`image1`，`image2`依此类推。

[您必须使用类的getIdentifier()](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法将名称映射到标识符`Resources`。

```
String name = "resource" + rng.nextInt(count);
int resource = getResources().getIdentifier(name, "drawable", "com.package"); 
```

此方法的文档说：

> 注意：不鼓励使用此功能。按标识符检索资源比按名称检索资源效率更高。

这是真的，但如果您在对性能不敏感的代码中执行此操作，则不必成为问题。

或者，如果您不介意在 XML 中列出资源，您可以创建[一个类型化数组](http://developer.android.com/guide/topics/resources/more-resources.html#TypedArray)，然后可以从中随机选择。

# iphone - Box2D游戏中改变身体动画的问题

> ID：14272243
> 
> 赞同：0
> 
> 时间：2013-01-11T05:28:51.810
> 
> 标签：iphone, cocos2d-iphone, box2d, box2d-iphone

我陷入了奇怪的问题，我正在制作一款 box2d 游戏，其中我的角色具有不同的行走、跳跃和站立动画。我在切换这些时遇到了问题。这是我的代码..

控制层.m

```
-(id)init{    
    self=[super init];    
    screenSize=[[CCDirector sharedDirector]winSize];    
    if(self!=nil){        
        [self initJoystickAndButtons];
        [self scheduleUpdate];        
return self;
    }
}

-(void)applyJoystick:(SneakyJoystick *)aJoystick forTimeDelta:(float)deltaTime
{          
        if(aJoystick.velocity.x > 0.0f)  {            
            [level1 walkBunny:(ccTime)aJoystick.velocity.x];         
        }            
    if(aJoystick.velocity.y > 0.0f) {                            
            b2Vec2 force;
            force.Set(0.0f, 150.0f);
            level1.bunnyBody->ApplyLinearImpulse(force, level1.bunnyBody->GetWorldCenter());                
            [level1 jumpBunny];                    
        }

   if(aJoystick.velocity.x == 0.0f) {
        [level1 standBunny];
       }          
    }    
} 
```

如您所见，我已经调用了我的角色的三种不同状态，它们在这里定义了动画，现在这里是这些方法...applyJoystick 是从我的更新方法中调用的。

level1Layer.m

```
-(void)walkBunny:(ccTime)duration{        
    NSLog(@"IN WALK BUNNY");
    [animatingCyclist stopAllActions];        
    cyclistAnim = [CCAnimation animation];          
    [cyclistAnim addFrameWithFilename:@"walking-step-2.png"];         
    [cyclistAnim addFrameWithFilename:@"walking-step-3.png"]; 
    [cyclistAnim addFrameWithFilename:@"walking-step-4.png"];
    [cyclistAnim addFrameWithFilename:@"walking-step-5.png"];
    [cyclistAnim addFrameWithFilename:@"walking-step-6.png"];
    [cyclistAnim addFrameWithFilename:@"walking-step-7.png"];
    [cyclistAnim addFrameWithFilename:@"walking-step-8.png"];
    [cyclistAnim addFrameWithFilename:@"walking-step-9.png"];        
    cyclistAnimationAction = [CCAnimate actionWithDuration:(ccTime)duration                                                 animation:cyclistAnim restoreOriginalFrame:YES];        
    id repeatcyclistAnimation = [CCRepeatForever actionWithAction:cyclistAnimationAction];       
    [animatingCyclist runAction:repeatcyclistAnimation];    

}

-(void)jumpBunny{    
    NSLog(@"IN JUMP BUNNY");
    [animatingCyclist stopAllActions];        
    cyclistAnim = [CCAnimation animation];          
    [cyclistAnim addFrameWithFilename:@"jumping-step-1.png"];
    [cyclistAnim addFrameWithFilename:@"jumping-step-2.png"];        
    [cyclistAnim addFrameWithFilename:@"jumping-step-3.png"]; 
    [cyclistAnim addFrameWithFilename:@"jumping-step-4.png"];
    [cyclistAnim addFrameWithFilename:@"jumping-step-5.png"];
    [cyclistAnim addFrameWithFilename:@"jumping-step-6.png"];
    [cyclistAnim addFrameWithFilename:@"jumping-step-7.png"];         
    cyclistAnimationAction = [CCAnimate actionWithDuration:5.5f                                                  animation:cyclistAnim restoreOriginalFrame:YES];       
    [animatingCyclist runAction:cyclistAnimationAction];        

} 
```

和standBunny一样...

问题是，我的这些方法在站立和行走时被反复调用，在一次动画迭代之前它被再次调用，所以我的动画没有完成，它每次都会显示动画的第一张图像。希望大家能解决我的问题！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:24:43.453

您正在停止动画并在每一帧重新创建它。例如：

```
 if(aJoystick.velocity.x > 0.0f)  {            
            [level1 walkBunny:(ccTime)aJoystick.velocity.x];         
        } 
```

将其读作：“只要水平速度大于 0，停止并重新启动行走兔子动画”。

您需要检查速度是否已将状态从 <= 0.0f 更改为 > 0.0f，然后才调用 walkbunny 方法一次。

# c++ - 如何在涉及浮点运算的特定代码中优化和提高效率？

> ID：14272245
> 
> 赞同：0
> 
> 时间：2013-01-11T05:29:15.850
> 
> 标签：c++, optimization, compiler-optimization, computer-architecture, pipelining

我们知道浮点运算有很高的延迟并且需要很多时钟周期来执行，这可能会导致流水线停止！优化以下代码的不同方法是什么。

```
int main()

{

 float fsum[50],a=10.45;

 int isum[100],b=20;

 for(int i=0;i<100;i++)
   {

       if(i<50) 
           {
             fsum[i] = a*a;
           }
       isum[i] = b*b

   }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:30:07.767

如果，无论出于何种原因，您的编译器不能被信任表现出基本的优化能力，并且它生成的代码运行的性能低于您基于机器限制的预期（您正在测量性能，并且您知道这些限制，对吗？） ，然后您可以开始手动优化：

提升循环外的循环不变计算：

```
int main()
{
  float fsum[50],a=10.45;
  float aa = a * a;
  int isum[100],b=20;
  int bb = b * b;

  for(int i=0;i<100;i++)
  {
    if(i<50) {
         fsum[i] = aa;
    }
    isum[i] = bb;
  }

  return 0;
} 
```

拆分循环，并设置边界以匹配封闭的条件

```
int main()
{
  float fsum[50],a=10.45;
  float aa = a * a;
  int isum[100],b=20;
  int bb = b * b;

  for(int i=0; i < 50; i++)
  {
    fsum[i] = aa;
  }

  for(int i=0;i<100;i++)
  {
    isum[i] = bb;
  }

  return 0;
} 
```

现在，如果编译器无法*展开*和*矢量化*一个或两个单级简单循环，那么这些就是你的问题。去看看他们。

# cassandra - WSO2 BAM - Cassandra 中的数据清除选项

> ID：14272253
> 
> 赞同：2
> 
> 时间：2013-01-11T05:29:41.427
> 
> 标签：cassandra, wso2, wso2bam

有什么方法可以删除在 cassandra 中长时间积累的原始事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:10:05.627

目前 WSO2 BAM 不支持。但是下一个版本 BAM 2.1.0 将支持此功能，该版本将在不久的将来发布。

# android - 如何使用 Spring for Android 发布键/值对而不是 JSON 对象？

> ID：14272254
> 
> 赞同：4
> 
> 时间：2013-01-11T05:29:43.383
> 
> 标签：android, spring, rest, post, http-post

我正在尝试使用 Spring for Android 对 url 执行标准 HTTP POST，其中的主体只是参数列表（如键值对）而不是 JSON 对象。

我希望将响应从 JSON 转换为 Java ResponseObject，但据我所知，Spring 也将我的主体转换为 JSON。

这是我的代码：

```
Map<String, Object> params = new HashMap<String, Object>();
    params.put("client_id", mClientId);
    params.put("state", mState);
    params.put("username", mUsername);
    params.put("password", mPassword);
    return getRestTemplate().postForObject(url, params, ResponseObject.class); 
```

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T11:27:09.603

试试这个

发布简单的名称值对列表

```
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
try{
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("name", nameString));
nameValuePairs.add(new BasicNameValuePair("Country", "country name"));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
httpclient.execute(httppost);
}catch (ClientProtocolException e) {
 // TODO Auto-generated catch block
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T04:54:48.990

采用`.exchange()`

```
// Create the request body as a MultiValueMap
MultiValueMap<String, String> body = new LinkedMultiValueMap<String, String>();     

body.add("client_id", mClientId); // and so on

// Note the body object as first parameter!
HttpEntity<?> httpEntity = new HttpEntity<Object>(body, requestHeaders);

MyModel model = restTemplate.exchange("/api/url", HttpMethod.POST, httpEntity, MyModel.class); 
```

# api - API 设计中的（开始，结束）与（开始，长度）

> ID：14272255
> 
> 赞同：12
> 
> 时间：2013-01-11T05:29:49.123
> 
> 标签：api, language-agnostic, coding-style, api-design

我已经看到在指定索引范围时使用了两种替代约定，例如

```
subString(int startIndex, int length); 
```

对比

```
subString(int startIndex, int endIndex); 
```

就你可以用它们做什么而言，它们显然是等价的，唯一的区别是你是指定结束索引还是范围的长度。

我假设在所有情况下 startIndex 都是包容性的，而 endIndex 是排斥性的。

在定义 API 时，是否有任何令人信服的理由来选择其中一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T06:18:47.827

我更喜欢这个，`length`因为它让我在文档中询问/查找的问题少了一个。

对于`endIndex`基于的 - 这是一个包容性或排他性的终点？

（对于任何一种变体，都可以询问相同的问题*，*但`startIndex`它会是一个不正当的 API，使其具有排他性）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T17:47:55.933

如何消除位置参数的歧义...

1.  使用更长的名称 subStringFromUpto( startIndex , stopIndex )

2.  在整个库中使用统一约定

这么多年过去了，我们没有找到更好的吗？

啊，是的，也许在 Smalltalk 中，因为这个问题被标记为与语言无关......

```
aString copyFrom: startIndex to: stopIndex.
aString substringOfLength: length startingAt: startIndex. 
```

不那么含糊，但也许我们还得再等 30 年才能更广泛地采用这种风格
（它可能看起来太简单了，不能认真）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T06:28:17.853

这是一个很好的问题，我认为使用哪种偏好归结为最常见的用例。大多数用例使用任一 API 都同样简单，但请考虑以下情况：

您想获得一个从 5 开始并在字符串末尾结束的子字符串。使用基于索引的版本（假设它的第二个索引是独占的），它很简单：

```
str.subString(5, str.length()); 
```

使用基于长度的 API：

```
str.subString(5, str.length() - 5); 
```

第二种方法不那么简洁和明显。但是，这可以通过简单地说明如果长度会导致剩余字符串溢出来解决，它将优雅地支持这一点（例如`str.subString(5, str.length());`，将抓取从索引 5 到结尾的所有内容，即使它可能要求的字符数可能比剩余的字符数多）。除了支持负索引等高级功能外，Ruby 还使用他们的[String#splice方法来做到这一点。](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-slice)

在我看来，基于索引的方法更具体，尤其是在不允许使用负索引的情况下。这使得对 API 的期望变得非常明显，这可能是一件好事；让自己更难射中自己的脚。然而，像 Ruby 这样有据可查的 API 可以很容易地赋予程序员权力，并且可以进行一些优雅的子字符串化。

我还发现，一般来说，当我执行子字符串操作时，我经常知道我的起点和终点。使用基于长度的方法，调用 API 时将需要额外的计算（例如`substring(startIndex, endIndex - startIndex)`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-13T17:16:16.420

有人应该对典型的调用站点进行研究，以找出哪种方法产生更简洁的代码（因此可能是正确的代码）。

我喜欢这样的论点，即使用“长度”您不必查看文档，但您可能已经在查看文档以确定第二个整数是“结束”还是“长度”。如果您将其命名为 endExclusive，那么它就像自我记录一样。

# java - 将大型 svg 数据发送到服务器

> ID：14272260
> 
> 赞同：0
> 
> 时间：2013-01-11T05:30:20.693
> 
> 标签：java, svg, dojox.charting

在我的应用程序中，我正在使用 dojox 图表。现在我想将图表导出为 pdf。我有以下方法来做到这一点。

1.  发送 svg 到服务器

2.  光栅化 svg，为此我使用 apache batik。

3.  将光栅化图像插入 pdf，我正在使用 itext。

现在问题是将svg发送到服务器。有时 svg 会超过 4000 个字符。最糟糕的是，有时我一次要导出三到四个图表。那么有没有办法将图表对象发送到服务器并获取 svg？或者将svg发送到服务器的可行方法是什么？

我还需要在导出 pdf 时出现图表图例。我在服务器端使用 Java。

提前致谢！！

# web-services - Eclipse Juno - IWAB0489E 将 Web 服务部署到 Axis 运行时时出错

> ID：14272264
> 
> 赞同：2
> 
> 时间：2013-01-11T05:30:24.347
> 
> 标签：web-services, eclipse-juno

我正在按照教程中的步骤操作：http: [//javapapers.com/web-service/java-web-service-using-eclipse/#comment-21575](http://javapapers.com/web-service/java-web-service-using-eclipse/#comment-21575)

但是当尝试“选择服务实现”时，我收到错误“IWAB0489E 将 Web 服务部署到 Axis 运行时时出错 axis-admin failed with {http://xml.apache.org/axis/}HTTP (502)Proxy Error （Forefront TMG 拒绝了指定的统一资源定位符 (URL)。）”。

我还没有下载 Axis2 插件，假设它带有 Eclipse juno。

我使用的是相同的 Eclipse 版本，并发布了作者在他的教程中使用的版本。请提供任何指针;它的紧急！

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-04T10:55:17.660

尝试停止在同一端口上运行的其他 Web 服务。如果发现，我们可以通过在 cmd（命令提示符）中运行此命令两次来停止它

停止已经在 eclipse/other 中使用的任何服务器/端口。

1)`netstat -ano | findstr :yourPortNumber`

2)`taskkill /PID typeyourPIDhere /F`

然后重新启动您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:21:42.873

首先尝试将axis2运行时附加到您的eclipse IDE，然后执行您的服务

我想这个问题与您的网络和防火墙有关，它阻止了您的连接

# javascript - 加载页面时打开新窗口的问题

> ID：14272265
> 
> 赞同：1
> 
> 时间：2013-01-11T05:30:25.373
> 
> 标签：javascript, tapestry

我正在使用挂毯为智能手机开发 Web 应用程序。我有一个问题，在页面加载时打开一个新窗口，但它没有打开。

我正在使用以下代码来实现这一点：

```
<script type="text/javascript">
javascript:OpenWindow('${pname}',340,360);
</script> 
```

示例.js：

```
function OpenWindow(AppName,ww,hh) { 
window.open("layout/play/"+AppName.toLowerCase()+".html","a"+AppName+"Window","width="+ww+",height="+hh+",menubar=no,locationbar=no,resizable=yes,status=no,scrollbars=no");
} 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:34:42.247

不要这样做

```
javascript:OpenWindow('${pname}',340,360); 
```

改为这样做

```
window.onload = function(){

      OpenWindow('${pname}',340,360);              
} 
```

# ios - 将图像从 UITableviewCell 拖放到其他视图

> ID：14272268
> 
> 赞同：1
> 
> 时间：2013-01-11T05:30:38.627
> 
> 标签：ios, objective-c, cocoa-touch, drag-and-drop

我正在开发一个 iPhone 应用程序，我需要从其中拖放一个图像并将其拖放到 tableview 之外的`UITableViewCell`
某个其他位置。`UIView`

（图像视图添加为：[cell.contentView addSubview:imageView]）。

请帮助我，任何有用的提示，示例代码？由于我将 UIImageView 添加到 UITableViewCell，因此未触发触摸事件委托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:51:14.110

你不会得到太多`UIImageView`这样使用的事件`UIButton`并尝试这样的拖动：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button addTarget:self action:@selector(imageTouch:withEvent:) forControlEvents:UIControlEventTouchDown];
[button addTarget:self action:@selector(imageMoved:withEvent:) forControlEvents:UIControlEventTouchDragInside];
[button setImage:[UIImage imageNamed:@"vehicle.png"] forState:UIControlStateNormal];
[self.view addSubview:button];

- (IBAction) imageMoved:(id) sender withEvent:(UIEvent *) event
{
    CGPoint point = [[[event allTouches] anyObject] locationInView:self.view];
    UIControl *control = sender;
    control.center = point;
} 
```

当您的中心点与添加 UIButton 的其他`UIView`使用`[UIView adSubview:]`方法匹配时`UIView`

我从[iOS 中的 Basic Drag and Drop 中获取了这段代码](https://stackoverflow.com/questions/4707858/basic-drag-and-drop-in-ios/4711054#4711054)

看看：[在 Superview 的边界内拖动图像](http://mobiledevelopertips.com/graphics/drag-an-image-within-the-bounds-of-superview.html)

# java - 如何使用 Java 开发跨平台应用程序

> ID：14272273
> 
> 赞同：-5
> 
> 时间：2013-01-11T05:31:00.153
> 
> 标签：java, cross-platform, using

如何使用 Java 开发跨平台应用程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T06:03:12.287

> 由于 java 是平台独立的，它可以在所有移动设备上运行。所以我想在 java 中创建一个应用程序，它应该在 iOS、Android、黑莓和所有移动平台上运行。

这是基于一种误解。Java 声称的平台独立性并不意味着 Java 将在所有平台上运行。可能有数千种平台类型不会也不会运行 Java。

它甚至不意味着 Java 可以在所有移动设备上运行。

*   没有适用于 iOS 的 Java 实现。IIRC，Apple 通过他们对 Apple 应用商店的控制明确禁止/排除它。

*   任何移动设备都没有 Java SE，因为 Oracle 拒绝授予许可……以保护 Java ME。

*   黑莓等是 Java ME，而不是 Java SE。事实上，Java ME 是分散的，因为不同的智能手机制造商实现了不同的 Java ME“配置文件”。

*   Android 不是 Java。Java SE 的大部分不存在，UI 库完全不同。

简而言之，你想做的事情是不现实的。

* * *

“一次编写，到处运行”的口号实际上只适用于基于 Oracle / Sun 代码库的 Java SE 实现。即便如此，也有一些警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:51:28.760

这是一个真正被误导的问题，但我会本着加深理解的精神回答它，我担心它很快就会被关闭。我希望这个问题是真实的，而不仅仅是拖钓。

Java的“环境”不是语言是平台独立的。Java 环境包含 Java 虚拟机和一组标准库，这些库与特定的实时运行平台挂钩。

Java 应用程序是独立于平台的，因为它将在任何存在 Java“环境”的平台上运行。

Java 有各种版本，例如标准版 (J2SE)，旨在在桌面上运行。

有适用于 Windows、Linux 和 OS X 的 J2SE 构建，因此为该环境构建的应用程序将在所有这些平台上运行。

有一个移动版 Java (J2ME) 允许应用程序在功能手机使用的多个不同操作系统中运行（假设它们具有应用程序所需的功能）。但这是因为功能手机的几种不同操作系统支持 J2ME**。

唉，这不是当前一代智能手机的情况。所有（甚至一个）主要智能手机操作系统都不支持标准的 Java 环境。

因此，Java 目前不能用于（智能手机）移动平台独立应用程序。

** 不完全正确，因为每个操作系统似乎都有其 J2ME 实现的怪癖，但足够接近。

# ruby - 调用另一个动作并从中获取结果

> ID：14272274
> 
> 赞同：0
> 
> 时间：2013-01-11T05:31:27.033
> 
> 标签：ruby, sinatra, rack

Sinatra 中有 2 个“动作”

```
get '/default1' do
 haml :"default1_view"
end

post '/default1' do
 if params[:button_name] = "clear_filter"
    #how do I return "get '/default1'" view from here?
 end

 #filtering the result
 haml :"default1_view"
end 
```

如何在`post '/default1'`没有重定向的情况下调用另一个“动作”？

请注意，我只需要从中检索结果**以**`"get '/default1'"`将其显示为结果`post '/default1'`

# java - 卸载 Java 应用程序时不应删除属性文件

> ID：14272277
> 
> 赞同：0
> 
> 时间：2013-01-11T05:31:44.497
> 
> 标签：java, installation, uninstallation

我开发了一个 Java 应用程序并使用了 InstallJammer，这是一个为产品创建安装文件的工具。我使用了两个属性文件来支持我的应用程序。我需要不时向我的客户提供应用程序的 exe 版本。我对这些有问题

当我们卸载应用程序时，我们不应该删除属性文件。应用程序的新属性文件不应覆盖旧的。

任何人都知道如何执行此InstallJammer？这对我很有帮助

# ember.js - Ember-data RecordArray isLoaded 状态

> ID：14272279
> 
> 赞同：6
> 
> 时间：2013-01-11T05:31:50.967
> 
> 标签：ember.js, ember-data

任何人都可以向我解释为什么`isLoaded`在调用 ajax 调用的成功方法之前将 RecordArray 状态设置为 true。

来自 ember-data 源代码

```
 findAll: function(store, type, since) {
    var root = this.rootForType(type);

    this.ajax(this.buildURL(root), "GET", {
      data: this.sinceQuery(since),
      success: function(json) {
          debugger;
        Ember.run(this, function(){
          this.didFindAll(store, type, json);
        });
      }
    });
  }, 
```

在视图中定义

```
handler: function() {        
    var content, controller = this.get('controller');
    if(controller.get('content.isLoaded')) {
    }
}.observes('controller.content.isLoaded') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T06:28:47.437

似乎存在一个持续存在的错误，即`isLoaded`在集合上过早设置属性。这是GitHub 上[的相关问题](https://github.com/emberjs/data/issues/587)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T20:26:55.893

对于使用旧版本 Ember 的任何人：我发现如果您包装您正在使用的任何内容，那么到那时`Ember.run.next`内容*实际上已加载*。

不是最漂亮的解决方案，但它在 Ember v1.0 中对我有用。

# c# - WebMethod 中的警报

> ID：14272280
> 
> 赞同：0
> 
> 时间：2013-01-11T05:31:52.210
> 
> 标签：c#, asp.net

```
 [WebMethod]
 public string LoadLayout()
 {
        try
        {
            List<XmlTag> lstXmlTags = new List<XmlTag>();
            lstXmlTags = parser.GetXmlTags(filePath);

            string script = "<script type=\"text/javascript\">alert(lstXmlTags );</script>";
            System.Web.UI.ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "test", script, true);

        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

我想提醒`lstXmlTags`测试目的。以上代码在本地运行，但在服务器中出现问题。我认为在服务器中它无法获取`filepath`。所以我想提醒`lstXmlTags`返回什么或者它是空的。所以我添加`RegisterClientScriptBlock`以显示结果.但我尝试给我语法错误。我无法使用。谢谢`RegisterClientScriptBlock`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:38:00.153

你可以做的是：

1.  通过 JavaScript 调用 Web 方法
2.  当 web 方法返回或完成时调用警报或其他任何东西。

有关更多参考，请访问：[在 ASP.NET 网页中以编程方式实现客户端回调而无需回发](http://msdn.microsoft.com/en-us/library/ms178208.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:59:28.670

您正在尝试做的事情不会按原样工作。问题是，当您执行时`alert(lstXmlTags)`，它会尝试找到一个名为 的变量`lstXmlTags`，该变量不存在，并且往往会解释您遇到的错误。

我会做的是这样的：

```
string lstXmlTagsText = string.Join("\n", lstXmlTags.Select(t => t.ToString()).ToArray());
string script = "<script type=\"text/javascript\">alert(" + lstXmlTagsText + ");</script>"; 
```

然后像以前一样注册脚本。关键是将`List<XmlTag> lstXmlTags`对象转换为某种人类可读的形式。您会注意到我刚刚使用`ToString`每个方法完成了此操作 - 如果不太正确`XmlTag`，您可能需要使用不同的方法。`ToString`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:31:02.047

为什么不直接设置断点并附加到 w3wp 进程并进行调试，然后您就可以看到变量的值了？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:41:12.570

您似乎将客户端变量与服务器端混合在一起。这是您可以实现这一目标的一种方法：

```
[WebMethod]
public string LoadLayout()
{
    try
    {
        List<XmlTag> lstXmlTags = parser.GetXmlTags(filePath);
        var serializer = new JavaScriptSerializer();
        string json = serializer.Serialize(lstXmlTags);

        string script = string.Format("alert(JSON.stringify({0}));", json);
        System.Web.UI.ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "test", script, true);

    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

这里需要注意的事项：

*   我使用了 JSON 序列化程序（内置[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)类）来确保在将服务器端变量`lstXmlTags`传递给 cilent 端函数之前对其进行正确编码
*   我已经摆脱了`<script type="text/javascript">`标签，因为您已将 true 作为[`RegisterClientScriptBlock`](http://msdn.microsoft.com/en-us/library/bahh2fef.aspx)函数的最后一个参数传递，这意味着（我从文档中引用）：*一个布尔值，指示是否添加脚本标签。*因此，如果您将此设置为 true，则该方法已经为您添加了这些标签，您不应再次手动添加它们。
*   我已经使用`JSON.stringify`了警报函数中的方法。此方法原生内置于所有现代浏览器中，并允许将 javascript 变量定义转换为字符串，以便您获得友好的显示。但是，如果您愿意，当然可以直接使用该变量：`alert({0}[1].SomeProperty);`将显示集合中第二个元素的某些属性。

备注：出于调试目的，最好使用`console.log`javascript 调试工具（例如 FireBug），而不是使用一些模式窗口进行警告。

# javascript - 使用 javascript 更改默认打印机名称

> ID：14272286
> 
> 赞同：0
> 
> 时间：2013-01-11T05:32:56.000
> 
> 标签：javascript, javascript-events

我想更改默认打印机名称，使用 JavaScript 代码，下面的代码成功打开打印对话框，但我想设置我们自己的打印机名称。客户端所有打印机名称都保存在数据库中。可以静态地或动态地改变。

```
 <!DOCTYPE html> 

      <html> 

     <head>  

      <script>

       function printpage()
        {   
         window.print(); 
        } 
      </script> 

     </head> 

     <body> 

     <input type="button" value="Print this page" onclick="printpage()" /> 

    </body> 

  </html> 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T05:34:40.080

你不能。

对于初学者，您怎么知道用户将拥有的打印机的名称？

# common-lisp - 为什么找不到返回元素作为案例的关键？

> ID：14272288
> 
> 赞同：1
> 
> 时间：2013-01-11T05:33:14.777
> 
> 标签：common-lisp

在下面的 case 语句中，x 被设置为 #\j，但返回了 "bye"。

```
(case (find #\j "joy") ((x) (princ "hi")) (otherwise (princ "bye"))) 
```

find 应该返回 #\j，它应该匹配 x，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T08:49:46.983

我们来看一下。

```
CL-USER 2 > (setf x #\j)
#\j

CL-USER 3 > (case (find #\j "joy") ((x) (princ "hi")) (otherwise (princ "bye")))
bye
"bye" 
```

简化：让我们摆脱`FIND`.

```
CL-USER 4 > (case #\j ((x) (princ "hi")) (otherwise (princ "bye")))
bye
"bye" 
```

不工作。简化：不要`PRINC`。

```
CL-USER 5 > (case #\j ((x) (princ "hi")) (otherwise "bye"))
"bye" 
```

不工作。简化：不要`PRINC`。

```
CL-USER 6 > (case #\j ((x) "hi") (otherwise "bye"))
"bye" 
```

不工作。我们有一个小表情。`CASE`是一个宏。让我们展开表格：

```
CL-USER 7 > (macroexpand '(case #\j ((x) "hi") (otherwise "bye")))
(LET ((#:G1084 #\j))
  (COND ((OR (EQL (QUOTE X) #:G1084)) "hi")
        (T "bye")))
T 
```

哦，`X`是引用而不是评估。因此，您正在测试字符`#\j`是否等于符号`X`。这失败了。

`CASE`不评估密钥。

解决方案：要么使用类似的东西，`COND`要么编写一个隐藏类似`COND`. 这已经写了很多次作为练习。

```
CL-USER 8 > (let ((value (find #\j "joy")))
              (cond ((eql value x) "hi")
                    (t "bye")))
"hi" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T07:04:39.157

不评估子句键，因此子句`((x)...)`将仅匹配符号`x`。这就是*case*的重点：键是常量，因此可以编译表单以生成更高效的代码。如果您想要动态键，请使用关联列表、哈希表等。

# c# - 如何在 C# 的方法中调用构造函数

> ID：14272289
> 
> 赞同：3
> 
> 时间：2013-01-11T05:33:22.217
> 
> 标签：c#, constructor

场景是

> 隐藏 BankAccount 的构造函数。为了允许构造 BankAccount，创建一个名为 CreateNewAccount 的公共静态方法，负责根据请求创建和返回新的 BankAccount 对象。此方法将充当创建新 BankAccounts 的工厂。

我使用的代码就像

```
private BankAccount()
{
 ///some code here
}

//since the bank acc is protected, this method is used as a factory to create new bank accounts
public static void CreateNewAccount()
{
    Console.WriteLine("\nCreating a new bank account..");
    BankAccount();
} 
```

但这不断抛出错误。我不知道如何在同一个类的方法中调用构造函数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T05:34:47.943

对于要成为*工厂*的方法，它的返回类型应该是`BankAccount`. 在该方法中，`private`构造函数可用，您可以使用它来创建新实例：

```
 public class BankAccount
    {
        private BankAccount()
        {
            ///some code here
        }

        public static BankAccount CreateNewAccount()
        {
            Console.WriteLine("\nCreating a new bank account..");
            BankAccount ba = new BankAccount();
            //...
            return ba;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T05:35:39.857

您实际上应该`BankAccount`在该方法中创建一个新实例并返回它：

```
private BankAccount()
{
    ///some code here
}

//since the bank acc is protected, this method is used as a factory to create new bank accounts
public static BankAccount CreateNewAccount()
{
    Console.WriteLine("\nCreating a new bank account..");
    return new BankAccount();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:35:38.907

使用“新”运算符：

```
Foo bar = new Foo(); 
```

# php - 为什么 php mysql 插入数据仅适用于第一个查询？

> ID：14272294
> 
> 赞同：0
> 
> 时间：2013-01-11T05:34:02.160
> 
> 标签：php, mysql

我对 php web 开发很陌生，我在这段代码上停留了一段时间。目前数据只被输入到第一个表中。向正确的方向轻推将不胜感激。

```
$first = isset($_GET['first']) ? $_GET['first']: '';
$last  = isset($_GET['last']) ? $_GET['last'] : '';
$email = isset($_GET['email']) ? $_GET['email']: '';
$pass  = isset($_GET['pass']) ? $_GET['pass']: '';
$groupname = isset($_GET['groupname']) ? $_GET['groupname'] : '';
$grouppass  = isset($_GET['grouppassword']) ? $_GET['grouppassword']: '';
define("DB_SERVER", "x");
define("DB_USER", "x");
define("DB_PASS", "x");
define("DB_NAME", "x");
define("TBL_USERS", "Members");
define("TBL_GROUP", "group");

function addNewUser($firstname, $lastname, $email, $password){
    global $connection; 
    $password1 = md5($password);
    $firstname = mysql_real_escape_string($firstname);
    $lastname = mysql_real_escape_string($lastname);
    $q = "INSERT INTO ".TBL_USERS." VALUES ('$firstname', '$lastname', '$email',   '$password1','')";
    return mysql_query($q, $connection);
}

$connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS) or die(mysql_error());
mysql_select_db(DB_NAME, $connection) or die(mysql_error());
addNewUser($first,$last,$email,$pass);
$sql = mysql_query("INSERT INTO ".TBL_GROUP." VALUES ('$groupname', '$grouppass')"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:30:53.593

尝试建立一个共同的连接，并在连接成功后。尝试根据需要插入更多查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:00:00.547

检查“TBL_GROUP”的表结构。您可以尝试使用 phpmyadmin 的“SQL”接口通过 sql 在该表中插入一行/或者您可以使用“INSERT”接口。你会知道哪里出了问题（可能你的 TBL 结构中的某些东西正在制造问题）。

# android - 如何使用警报管理器获得工作日的重复警报？

> ID：14272295
> 
> 赞同：2
> 
> 时间：2013-01-11T05:34:07.927
> 
> 标签：android, facebook

嗨，我正在开发警报应用程序，我需要在用户选择的不同日期在同一时间重复调用警报。

我的意思是，如果我将闹钟时间设置为`8PM`并将重复选项设置为`sunday`，`tuesday`闹钟将在每个`sunday`, `tuesday`.

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T05:37:02.350

为此使用广播接收器和 Sqlite 数据库。

```
public class MyReceiver extends BroadcastReceiver {
    DBAdapter mDba;
    SQLiteDatabase mDb;
    Ringtone rt;
    MediaPlayer mp;
    AlertDialog.Builder alertbox;
    Context ctx;

    @Override
    public void onReceive(Context context, Intent intent) {

        DBHelper mDbh = new DBHelper(context, null, null, 1);
        mDb = mDbh.getWritableDatabase();
        mDb.setLockingEnabled(true);
        mDba = new DBAdapter(context);
        mDba.open();
        Cursor cr = mDb.query("mReminderEntry", null, null, null, null,
                null, null);
        if (cr.equals(null)) {
            System.out.println("No Data Found");
        } else {
            Date d = new Date();
            Calendar calendar = Calendar.getInstance();
            int day = calendar.get(Calendar.DAY_OF_WEEK);
            String today = null;
            if (day == 2) {
                today = "Monday";
            } else if (day == 3) {
                today = "Tuesday";
            } else if (day == 4) {
                today = "Wednesday";
            } else if (day == 5) {
                today = "Thursday";
            } else if (day == 6) {
                today = "Friday";
            } else if (day == 7) {
                today = "Saturday";
            } else if (day == 1) {
                today = "Sunday";
            }

            int system_hour = d.getHours();
            int system_minute = d.getMinutes();
            cr.moveToFirst();
            for (int i = 0; i < cr.getCount(); i++) {
                if (cr.getString(3).equals(system_hour + ":" + system_minute)
                        && cr.getString(1).equals("Daily")) {
                    Intent scheduledIntent = new Intent(context, MyScheduledActivity.class);
                    scheduledIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(scheduledIntent);

                    break;

                } else if (cr.getString(3).equals(
                        system_hour + ":" + system_minute)
                        && cr.getString(1).equals(today)) {

                    Intent scheduledIntent = new Intent(context, MyScheduledActivity.class);
                    scheduledIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(scheduledIntent);

                    break;
                } else {
                    System.out.println("No Matching");
                }
                cr.moveToNext();
            }
        }
        cr.close();
        mDba.close();
    }
} 
```

# javascript - 如何在移动/手持设备上隐藏 sharethis 小部件

> ID：14272296
> 
> 赞同：0
> 
> 时间：2013-01-11T05:34:11.270
> 
> 标签：javascript, jquery, widget, sharethis

当我在手机、平板电脑等手持设备中打开网站时，我正在使用 sharethis 小部件在网站上工作，sharethis 小部件会隐藏内容并干扰正确查看该网站。所以，我尝试了以下方法来隐藏手持设备上的 sharethis 小部件

方法一：

```
var ua = navigator.userAgent.toLowerCase();
    var checker = {
        iphone: (ua.indexOf('iphone') >= 0 || ua.indexOf('ipod') >= 0 ||ua.indexOf('ipad') >= 0) ? true : false,
        blackberry: ua.indexOf("blackberry") >= 0 ? true : false,
        android: ua.indexOf("android") >= 0 ? true : false,
        chrome: ua.indexOf("chrome") >= 0 ? true : false,
        nokia: (ua.indexOf("symbian") >= 0 || ua.indexOf('nokia') >= 0) ? true : false
    };

   if (checker.android || checker.iphone || checker.blackberry || checker.nokia) {
       $('#sthoverbuttons').hide();
   } 
```

方法二：

```
 if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
      $('#sthoverbuttons').hide();
    } 
```

方法三：

```
 if($(window).width() < 980)
   {
      $('#sthoverbuttons').hide();//this one works but i need to find devices and hide.
   } 
```

其中 **#sthoverbuttons**是 sharethis 小部件的容器

而且我还尝试在加载网页时通过将 id 分配给脚本标签来删除脚本 sharethis 脚本，但这也对我没有帮助。

那么，如何在手持设备中隐藏 sharethis 小部件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:44:07.013

您可以使用 CSS3 媒体查询来做到这一点。手持设备通常被归类为 <600px 宽，因此在您的 css 文件中添加类似这样的内容应该可以解决您的问题：

```
@media screen and (max-width: 599px){
    #sthoverbuttons { display: none; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:47:02.407

您可以尝试[CSS Browser Selector](http://rafael.adm.br/css_browser_selector/)，这是一个小型 javascript，它在您的`<html>`标签中写入一堆针对当前浏览器和操作系统的类，如下所示：

```
<html class="webkit chrome mac js"> 
```

意思是我在 Mac 上，使用 Chrome（Webkit 引擎），并且 javascript 处于活动状态。

CSS Browser Selector 中可用的类之一实际上是`mobile`，因此您可以定位您的按钮而忽略媒体查询，`max-width`这不是决定性的：

```
html.mobile #sthoverbuttons { display: none; } 
```

# xml - 如何为每次出现的唯一列表调用模板

> ID：14272297
> 
> 赞同：0
> 
> 时间：2013-01-11T05:34:22.887
> 
> 标签：xml, unique, grouping, xslt-2.0

我目前正在使用 XSLT 2.0 来尝试处理大量数据。我的目标是为整个数据中特定节点的唯一出现调用特定模板。我不能使用“应用模板”，因为我有其他需要根据不同逻辑使用的模板。xml 的结构如下：

```
<root>
  <row>
     <date>date1</date>
     <child>
        <ID>001</ID>
     </child>
  </row>
  <row>
     <date>date2</date>
     <child>
        <ID>002</ID>
     </child>
  </row>
  <row>
     <date>date1</date>
     <child>
        <ID>002</ID>
     </child>
  </row>
  <row>
     <date>date3</date>
     <child>
        <ID>002</ID>
     </child>
  </row>
</root> 
```

理想情况下，我会在这种情况下调用模板两次，因为有两个唯一的 ID 001 和 002，无论该 ID 上出现多少日期。我见过几个例子，人们要么使用 Keys 要么使用前面的兄弟方法；但是，我似乎永远无法正确使用语法。我尝试了以下方法：

被调用的模板：

```
<xsl:template name='doSomething'/>
   <xsl:value-of select='child/ID'/>
   <xsl:value-of select='date'/>
</template> 
```

=====================

```
<xsl:for-each select='/root/row[not(child/ID = current()child/ID)]
   <xsl:call-template name='doSomething'/>
</xsl:for-each> 
```

=====================

```
<xsl:key name='IDs' match='root/row/child/ID' use='.'/>

<xsl:for-each select='root/row[generate-id() = generate-id(key("IDs",.)[1])]>
    <xsl:call-template name='doSomething'/>
</xsl:for-each> 
```

=====================

```
<xsl:for-each select='root/row/child/ID[not(. = preceding-sibling::row/child/ID)]>
   <xsl:call-template name='doSomething'/>
</xsl:for-each> 
```

如果这是可怕的编码，我深表歉意，因为这是我第一次尝试使用 XSLT 进行如此复杂的操作，但我仍然无法理解键的使用以及轴语法的工作原理。我通常在 2.0 中使用 for-each-group。但是，在这里尝试 for-each-group 时，我得到所有条目而不是唯一条目，这让我觉得我不完全理解分组的工作原理。我最初的尝试是这样的：

```
<xsl:for-each-group select='root/row' group-by='child/ID'>
    <xsl:call-template name='doSomething'/>
</xsl:for-each-group> 
```

=====================

我也试过这个：

```
<xsl:for-each-group select='root/row' group-by='child/ID[1]'>
   <xsl:call-template name='doSomething'/>
</xsl:for-each-group> 
```

=====================

我知道这并不完全正确，但我没有想法，只是在试验。任何解决此问题的指导或帮助将不胜感激。提前感谢您提供的任何帮助。

这是我想要的输出：

001日期1 002日期2

但是，我得到：

001日期1 002日期2 002日期1 002日期3

编辑：感谢您的反馈，我意识到我遗漏了相当重要的代码部分。每个 ID 也有相关的日期，代表交易日期。虽然我可以使用 for-each-group 按 ID 分组，但我继续获取与该 ID 关联的所有日期，并且我只想调用唯一 ID 的模板，而不是包含该 ID 的所有条目 - 这就是正在发生。我添加了一个样本输出和当前输出。

我相信我可能误解了 apply-template 的工作原理。我想如果我使用 apply-templates 它将应用 xslt 中的所有模板。因为我有 4 个在特定条件下使用的其他模板。实际输入的 xml 有大约 40 个子节点，用于处理逻辑和信息。

我希望澄清，如果您需要更多详细信息，请告诉我。

**编辑：**

在做了更多研究之后，似乎使用密钥对我来说是一个好方法；但是，我似乎无法使语法正确。这是我的尝试，有人可以帮我纠正吗？

```
<xsl:key name='IDs' match='child' use='ID'/>

<xsl:template match='/'>
   <xsl:for-each select='root/row/child[generate-id(.) = generate-id(key("IDs", ID)[1])]>
       <xsl:call-template name='doSomething'/>
   </xsl:for-each>
</xsl:template> 
```

提前感谢您的任何澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:35:58.230

通过向我们展示您想要的输出、您拥有的代码、您得到的结果，您还没有真正解释问题是什么。

我看不出有任何问题，`apply-templates`或者如果您坚持将其`call-template`与您发布的内容一起使用`for-each-group`。

这是显示这两种方法的示例：

```
<xsl:stylesheet version="2.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:template match="/">
  <apply-templates>
     <xsl:for-each-group select="root/row" group-by="child/ID">
       <xsl:apply-templates select="."/>
     </xsl:for-each-group>
   </apply-templates>
   <call-template>
     <xsl:for-each-group select="root/row" group-by="child/ID">
       <xsl:call-template name="foo"/>
     </xsl:for-each-group>
   </call-template>
</xsl:template>

<xsl:template match="root/row">
  <xsl:copy-of select="."/>
</xsl:template>

<xsl:template name="foo">
  <xsl:copy-of select="."/>
</xsl:template>

</xsl:stylesheet> 
```

当应用于输入时

```
<root>
  <row>
     <child>
        <ID>value</ID>
     </child>
  </row>
  <row>
     <child>
        <ID>value2</ID>
     </child>
  </row>
  <row>
     <child>
        <ID>value2</ID>
     </child>
  </row>
</root> 
```

使用 Saxon 9.4 我得到了输出

```
<apply-templates>
   <row>
     <child>
        <ID>value</ID>
     </child>
  </row>
   <row>
     <child>
        <ID>value2</ID>
     </child>
  </row>
</apply-templates>
<call-template>
   <row>
     <child>
        <ID>value</ID>
     </child>
  </row>
   <row>
     <child>
        <ID>value2</ID>
     </child>
  </row>
</call-template> 
```

因此，据我了解您的描述，这两种方法都会处理`row`您感兴趣的元素。

如果您仍然有问题，请展示最小但完整的 XSLT 示例、您获得的输出、您想要的示例以及您使用的 XSLT 2.0 处理器的详细信息，以便我们重现该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:00:00.243

**解决方案**

感谢所有提供反馈的人，经过周末的进一步研究和一些实验，我能够得到解决方案！

输入：

```
<root>
  <row>
     <date>date1</date>
     <child>
         <id>001</id>
     </child>
  </row>
  <row>
     <date>date1</date>
     <child>
         <id>002</id>
     </child>
  </row>
  <row>
     <date>date2</date>
     <child>
         <id>002</id>
     </child>
  </row>
</root> 
```

XSLT：

```
<xsl:for-each select='root/row'>
    <xsl:if test='preceding-sibling::row[1]/child/id != child/id'>
         <xsl:call-template name='doSomething'/>
    </xsl:if>
</xsl:for-each> 
```

输出：

001日期1, 002日期1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:11:32.683

抱歉，此回复的延迟。这是我想出的解决方案。我不知道这是否是最优雅的解决方案，但它对我来说效果很好。也许一些关于虽然这将是一个糟糕的解决方案的反馈将不胜感激。

```
 <xsl:for-each-group select='root/Row' group-by='concat(child/ID,date)'>
        <xsl:sort select='child/ID'/>
        <xsl:call-template name='DoSomething'/>
    </xsl:for-each-group> 
```

谢谢你。

# php - Where 子句在 tinyint 上不起作用

> ID：14272300
> 
> 赞同：3
> 
> 时间：2013-01-11T05:34:35.520
> 
> 标签：php, mysql, sql

我的 MySQL 查询有问题。我有一个表，其中包含“读取”列之一，其中默认值为“1”，并且由 phpmyadmin 而不是 bool 自动设置为 tinyint(1)。

当我执行查询时：

```
SELECT * FROM book WHERE read = '1' 
```

它给出了一个错误。

但是当我执行这个查询时：

```
SELECT * FROM book WHERE id = '77' 
```

没事。除了可能无法以这种方式搜索 tinyint 之外，我没有看到任何问题。有人可以帮忙吗？我浏览了谷歌，但没有找到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T05:35:25.747

`READ`是保留字。它必须用反引号转义，

```
SELECT * FROM book WHERE `read` = 1 
```

*   [MySQL 保留字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

**更新 1**

另一种选择是供应`ALIAS`，例如

```
SELECT * FROM book a WHERE a.read = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T05:41:32.503

您不能直接使用[**MySQL 保留字**](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)作为列名。**READ**是 MySQL 保留字，如果您仍想使用**READ**作为列名，则在列名前后使用**`（反引号）符号。**

```
SELECT * FROM book WHERE `read` = 1; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T05:47:51.627

只需删除引号

因为它是 tinyint，所以您不应该使用引号（将它们用于字符串、字符或日期）

```
select * from `table_name` where `read`=1; 
```

如果它不起作用，那么您可以按照 Ilion 的说明进行铸造（这很好）

# php - Where 子句在 tinyint 上不起作用

> ID：14272301
> 
> 赞同：1
> 
> 时间：2013-01-11T05:34:35.913
> 
> 标签：php, mysql, where

> **可能重复：**
> [Where 子句在 tinyint 上不起作用](https://stackoverflow.com/questions/14272300/where-clause-works-doesnt-work-on-tinyint)

我的 MySQL 查询有问题。我有一个表，其中一个列“读取”，其中默认值为“1”，并且由 phpmyadmin 而不是 bool 自动设置为 tinyint(1)。

当我执行查询时：

```
SELECT * FROM book WHERE read = '1' 
```

它给出了一个错误。

但是当我执行这个查询时

```
SELECT * FROM book WHERE id = '77' 
```

没事。除了可能无法以这种方式搜索 tinyint 之外，我没有看到任何问题。有人可以帮忙吗？我浏览了谷歌，但没有找到答案。

# css - 水平对齐下拉菜单的子菜单

> ID：14272306
> 
> 赞同：0
> 
> 时间：2013-01-11T05:34:48.567
> 
> 标签：css

我无法将我的子菜单从垂直对齐到水平

这是我的下拉菜单的CSS代码。

我试过浮动左和位置变化，但它不起作用。

请尽快回复。

```
.ddsmoothmenu{
margin-top: 20px;

}

.ddsmoothmenu ul{
z-index:100;
margin: 0;
padding: 0;

list-style-type: none;
     }

   /*Top level list items*/
.ddsmoothmenu ul li{
position: relative;
display: block;
float: left;
vertical-align: inherit;

   }

 /*Top level menu link items style*/
 .ddsmoothmenu ul li a {
display: block;
height: 23px;
width: 100px;
margin-left: 5px;
line-height: 23px;
font-size: 13px;
font-family: Verdana, Geneva, sans-serif;
color: #a9a2a2;
text-align: center;
text-decoration: none;
font-weight: 400;
outline: none;

  }

    * html .ddsmoothmenu ul li a{ /*IE6 hack to get sub menu links to behave       correctly*/
   display: inline-block;
  }

 .ddsmoothmenu ul li a.selected, .ddsmoothmenu ul li a:hover { /*CSS class that's    dynamically added to the currently active menu items' LI A element*/
     color: #f00;
     background: url(../images/templatemo_menu_hover.png)
 }

/*1st sub level menu*/
.ddsmoothmenu ul li ul {
position: absolute;
width: 160px;
margin: 10px 0 0 5px;
left: 0;
display: none; /*collapse all sub menus to begin with*/
visibility: hidden;
background: url(../images/templatemo_smm.png) repeat-y
 }

 .ddsmoothmenu ul li ul span.top { position: absolute; width: 160px; height: 5px; top: -5px; left: 0;  background: url(../images/templatemo_smt.png) no-repeat; }
 .ddsmoothmenu ul li ul span.bottom { position: absolute; width: 160px; height: 5px; bottom: -5px; left: 0;  background: url(../images/templatemo_smb.png) no-repeat; }

 /*Sub level menu list items (undo style from Top level List Items)*/
  .ddsmoothmenu ul li ul li{
display: list-item;
float: none;
}

 /*All subsequent sub menu levels vertical offset after 1st level sub menu */
 .ddsmoothmenu ul li ul li ul{
 top: 0;
 }

 /* Sub level menu links style */
 .ddsmoothmenu ul li ul li a{
font-weight: 500;
width: 140px; /*width of sub menus*/
height: 28px;
line-height: 28px;
margin: 0 10px;
font-size: 12px;
text-align: left;
background: none;
color: #a9a2a2;
border-bottom: 1px solid #151515
  }

 .ddsmoothmenu ul li ul li .last {
border-bottom: none;
 }

 .ddsmoothmenu ul li ul li a.selected, .ddsmoothmenu ul li ul li a:hover {
color: #f00;
width: 129px;
margin-left: 11px;
background: none;
 }

  /* Holly Hack for IE \*/
 * html .ddsmoothmenu{height: 1%;} /*Holly Hack for IE7 and below*/

  /* ######### CSS classes applied to down and right arrow images  ######### */

 .downarrowclass{
 position: absolute;
 top: 12px;
  right: 7px;
  }

 .rightarrowclass{
  position: absolute;
  top: 6px;
  right: 5px;
   }

 /* ######### CSS for shadow added to sub menus  ######### */

.ddshadow{
 position: absolute;
 left: 0;
 top: 0;
 width: 0;
 height: 0;
 }

.toplevelshadow{ /*shadow opacity. Doesn't work in IE*/
 opacity: 0.5;
  }
  /* menu */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:37:18.157

你有没有尝试过：

```
display:inline; 
```

# android - 在android中获取位图null

> ID：14272309
> 
> 赞同：2
> 
> 时间：2013-01-11T05:35:01.153
> 
> 标签：android, bitmap

我想将包含图像、文本的布局转换为位图以在我的应用程序中实现 pagecurl 效果..

我的xml是

详细信息.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background= "#E0FFFF"
    android:gravity="center"
    android:orientation="vertical" >
    <FrameLayout 
       android:id="@+id/framelayout"
       android:layout_marginTop="30dip"
       android:layout_height="fill_parent" 
       android:layout_width="fill_parent">
      <RelativeLayout
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:id="@+id/Rl">
                <TextView
                  android:id="@+id/tvName"
                  android:layout_width="wrap_content"
                  android:layout_height="60dip"
                  android:layout_alignParentTop="true"
                  android:layout_centerHorizontal="true"
                  android:text="BookName"
                  android:textSize="40dip"
                  android:textStyle="bold" />
               <TextView
                  android:id="@+id/tTitle"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_below="@id/tvName"
                  android:text="Page Name"
                  android:textColor="#040404"
                  android:textSize="30dip"
                  android:textStyle="bold"
                  android:typeface="sans" />
              <ImageView
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:layout_alignWithParentIfMissing="false"
                  android:layout_below="@id/tTitle"
                  android:baselineAlignBottom="true"
                  android:scaleType="fitXY"
                  android:src="@drawable/stub"
                  android:id="@+id/smallImage"
                />
          <TextView
               android:id="@+id/tDescription"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:textSize="15dip"
               android:layout_below="@id/smallImage" />
           <Button
               android:id="@+id/buy_button"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_alignBottom="@+id/tTitle"
               android:layout_alignParentRight="true"
               android:layout_alignParentTop="true"
               android:layout_marginRight="22dp"
               android:text="buy"
               android:visibility="visible"/>
           <Button
               android:id="@+id/bLib"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_alignParentLeft="true"
               android:layout_below="@+id/tDescription"
               android:text="Go to Library"
               android:textSize="20dip"
               android:textStyle="italic" 
              />
               <Button
               android:id="@+id/backD"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_toRightOf="@+id/bLib"
                 android:layout_alignParentRight="true"
                android:layout_below="@id/tDescription"
               android:text="Back to Home" 
               android:textStyle="bold"
               android:textSize="20dip"
               />
    </RelativeLayout>
    </FrameLayout>
    </ScrollView> 
```

我的Java类将此布局转换为位图是

```
 public void onCreate(Bundle savedInstanceState) 
    {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.details);
      FrameLayout view = (FrameLayout)findViewById(R.id.framelayout);
      view.setDrawingCacheEnabled(true);
      view.buildDrawingCache();
      Bitmap bm = view.getDrawingCache();
      System.err.println("getting bitmap.."+bm);
    } 
```

我没有找到在这里设置布局值的方法..在这里我将位图 bm 值设置为 null。有人可以建议我如何在位图中转换该布局并将这些值设置为位图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:43:35.573

为了克服这个问题，我在保存位图后销毁了绘图缓存。

```
view.destroyDrawingCache(); 
```

并按照以下代码保存您的位图。

```
view.measure(100, 100);
view.layout(0, 0, 100, 100);
view.setDrawingCacheEnabled(true);
view.buildDrawingCache();
Bitmap b = Bitmap.createBitmap(view.getDrawingCache()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:48:17.897

在获取位图时检查它是否内存不足。

放

```
try   
{....}
catch(OutOfMemoryException ex)
{} 
```

另一个问题可能是：当您使用位图时，您的视图未绘制。尝试使用按钮 onclick 功能来执行相同的过程。

# ios - UINavigationBar 为 UIScrollView 注册触摸

> ID：14272313
> 
> 赞同：1
> 
> 时间：2013-01-11T05:35:28.380
> 
> 标签：ios, uiscrollview, touch, uinavigationbar

我创建了一个应用程序，其中我有一个大滚动视图（两个页面高度），并且导航栏是可见的。此外，我进行了设置，以便滚动视图开始滚动到底部页面，并且 UIScroll 视图未注册 30px 标记以下的触摸（例如，如果您在导航栏下方触摸超过 30px，您将能够按下按钮但不滚动 UIScrollView）。这一切都非常有效，让我可以让它看起来像是从上面拉下一扇窗户，所有这些都是一个整洁的效果。

问题是在用例测试中，许多用户似乎敲得太高（点击 UINavigationBar），因此他们试图拉下窗口的滑动手势没有被读取。基本上，如果触摸从导航栏开始，整个手势都会被忽略。这会导致用户感到沮丧（知道他们应该能够拉下窗口但无法拉下）或认为下拉已因某种原因被禁用。

我想实现一种方法，如果用户的触摸从 UINavigationBar 内开始但不在其中一个导航按钮上，则触摸将传递给 UIScrollView。这是可能的，如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:04:43.853

尝试使用自定义导航栏。从 UINavigation 栏继承，然后在您想要的位置添加一个子视图并在那里添加一个手势。

# sql - 为什么我必须在这个插入语句中包含主键列？

> ID：14272320
> 
> 赞同：3
> 
> 时间：2013-01-11T05:36:14.467
> 
> 标签：sql, sql-server, tsql, sql-server-ce, sql-server-express

给定一个 SQL Server Express Compact Edition 数据库，其中包含一个名为“Clients”的表，其中包含以下列：

```
ID, FirstName, MiddleName, Nickname, LastName, Suffix, IsMale 
```

其中 ID 是自动递增的主键/标识值，当我尝试在表上使用此命令时：

```
INSERT INTO Clients (Title, FirstName, MiddleName, Nickname, LastName, Suffix,
IsMale) VALUES ('', 'John', '', '', 'Smith', '', 'True') 
```

一切正常。但是当我尝试使用这个命令时：

```
INSERT INTO Clients VALUES ('', 'John', '', '', 'Smith', '', 'True') 
```

出现此错误：

```
The number of columns in the query and the table must match. [ Number of columns
in query = 7, Number of columns in table = 8 ] 
```

我在 SQL Server 中使用插入语句已经有一段时间了，这从来都不是问题；针对列数的验证始终忽略自动递增的主键/身份类型。在这种情况下，唯一的主要区别是我现在使用的是非常低端的 SQL Server 版本，而我习惯使用更专业的版本。万一这可能很重要，我在 C# 程序中使用它。

什么会导致这种情况？谢谢。

编辑：这个问题的很多焦点是我在使用非免费、非紧凑版本的 SQL Server 时从未遇到过这个问题。我以前使用的 SQL Server 总是足够聪明，可以忽略列计数中的标识/主键列，并且只需找出自动递增的值，而无需我拼出特定的列名。

虽然这里的另一个区别是我之前一直使用 SQL Management Studio 来处理表定义，而在这种情况下我正在使用 VS 2012 和 SQL Server Compact Edition。所涉及的用户界面显然有很大不同，所以我想可能是为表指定了某些内容，或者当您在 Management Studio 中执行此操作时可以防止此问题发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:38:46.993

如果您没有在插入语句中指定列，那么它将考虑所有列。即使其中一列是自动递增的。

[插入 - MSDN](http://msdn.microsoft.com/en-us/library/ms174335.aspx)

> **将显式值插入标识列**时必须使用 column_list ，并且表的 SET IDENTITY_INSERT 选项必须为 ON。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T05:43:22.657

可以用两种形式编写 INSERT INTO 语句。

第一种形式没有指定将插入数据的列名，只指定它们的值：

```
INSERT INTO table_name
VALUES (value1, value2, value3,...) 
```

仅当提供的值的数量与列数**完全匹配时，这才有效**

第二种形式指定要插入的列名和值：

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

这是必须使用的表单，即使有标识类型的 ID 列。

拉吉

* * *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T05:40:53.663

你忘了提到该表`Clients`有一个列名`Title`。第一个查询有效，因为您已经明确定义了在语句中指定的列的值。

第二个失败，因为您使用的是语句`Implicit`类型。`INSERT`使用该类型时`INSERT`，您必须为表中的所有列指定所有值。由于表中的第一列 is`ID`并且它是`Auto_Increment`ed，`NULL`因此可以用于替换值。

```
INSERT INTO Clients VALUES (NULL, '', 'John', '', '', 'Smith', '', 'True') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:49:30.157

我认为''代表一个空字符串，它不能插入整数值

所以你可以指定 NULL 而不是 ' '

# php - 使用 PHP 中的算法生成序列号

> ID：14272327
> 
> 赞同：1
> 
> 时间：2013-01-11T05:37:15.307
> 
> 标签：php, algorithm

我刚开始从事一个项目，在开始之前，我有几个关于我需要放在一起的代码，以及它需要如何工作的问题。

此代码将生成序列号，当通过算法运行时将等于标识符。算法没什么特别的。

*序列号需要分成 4 组，每组 5 个：（最好是十六进制）*
**示例：** 00A00-0B000-F00C0-0000D

*标识符将只是一组数字：*
**示例：** 15456548

我要创建的是一个脚本，它可以将（array_sum？）序列号中的十六进制加在一起，除以 10 并等于标识符（15456548）。该脚本将需要创建与我所说的一样多的序列号实例。

**程序示例：**

**标识符：** 22807.4
**要制作多少个序列号：** 2

**序列号：**
45154-54587-58458-69875
55457-45584-18658-49578

（这些序列号加起来除以 10 等于标识符（22807.4））

我不确定是否有人可以帮助我想出一些东西，或者至少解释一下这个过程，但我以前从未在 PHP 中构建过这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:46:29.193

另一个样本。你需要添加一些东西。希望您在运行程序时能够意识到它们。

```
<?php 
    $num = '1234';
    $serNums = findSerialNum(1234, 5);
    echo var_export($serNums, true);

    function findSerialNumSingle($num)
    {
        $serialNum = array();
        $target = $num * 10;
        // select some heuristic. We have to generate 5 sets. How shall we 
        // distribute the numbers between the 5 sets? 
        // Obviously one set can exceed the num * 10 itself.
        // Lets select that as the heuristic, that the first number can be max that. 
        $remaining = $target;
        $soFar = 0;
        for($i = 0; $i < 5; $i++)
        {
            // select the entry that we would fill. Randomize it. 
            while(true)
            {
                $idx = rand(0, 4);
                if(!isset($serialNum[$idx])) // is the entry already filled in?
                    break;
            }

            $t = rand(0, $target - $soFar); // find number between 0 and remain number
            $serialNum[$idx] = $t;
            $soFar += $t;
        }

        // put serial number is proper format
        $s = '';
        for($i = 0; $i < 5; $i++)
        {
            $s .= sprintf('%05X', $serialNum[$i]) . '-';
        }
        return $s;
    }
    function findSerialNum($num, $numInstances)
    {
        $serNums = array();
        for($i = 0; $i < $numInstances; $i++)
        {
            while(true)
            {
                // loop till you find a distinct serial number
                $t = findSerialNumSingle($num);
                if(array_search($t, $serNums) == FALSE)
                {
                    $serNums[$i] = $t;
                    break;
                }
            }
        }
        return $serNums;
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:47:37.157

以下代码将执行您要查找的操作，但在类型检查和确保参数匹配正确长度方面没有任何作用。例如，您需要确保`string $serial`参数实际上是`'XXXXX-XXXXX-XXXXX-XXXXX'`. 您还需要确保`array $serial`参数由 4 个整数组成。

```
function TextSerialToIdentifier(string $serial) {
    $a = str_split($serial, 5);
    $b = array();
    foreach($a as $v) {
        array_push($b, intval($v, 16));
    }
    return ArraySerialToIdentifier($b);
}

function ArraySerialToIdentifier(array $serial) {
    $id = 0;
    foreach($serial as $i) {
        $id += $i;
    }
    $id /= 10;
    return intval($id);
}

function CreateSerial($id) {
    $serial = '';
    $id *= 10;
    for($i = 0; $i < 5; $i++ ) {
        $val = rand(0x00000, 0xFFFFF);
        $id -= $val;
        $serial = $serial . '-' . $val;
    }
    return substr($serial, 1);
} 
```

# java - android中的ClassCastException错误Twitter4J

> ID：14272331
> 
> 赞同：0
> 
> 时间：2013-01-11T05:37:25.040
> 
> 标签：java, android, twitter4j, classcastexception

我正在使用 Twitter4J[链接](http://twitter4j.org/en/index.html)库并且运行良好，问题是没有收到错误 java.lang.ClassCastException 我必须在 seguite 上声明我的宣言：

```
<application> android:name=".TwitterApplication" </application> 
```

在我这样做之后，API 工作得很好，但是构建了其他与 Twitter4J API 无关的类，并且我认为应用程序上下文存在问题。

如果我在另一个类中调用该方法`finish();`，则没有任何反应，任何按钮都没有响应，如果我用一些文本填充超过 3 个 textViews，我会收到以下错误：（这当然是我在 auteração 中明确说明的原因）

我怎么能绕过这个！

```
 01-11 03:32:20.629: E / AndroidRuntime (16968): FATAL EXCEPTION: main
 01-11 03:32:20.629: E / AndroidRuntime (16968):
 java.lang.RuntimeException: Unable to start activity ComponentInfo
 {com.app.player / twitter.DetailsTweet}:
 java.lang.ClassCastException: twitter4j.UserJSONImpl 01-11
 03:32:20.629: E / AndroidRuntime (16968): at
 android.app.ActivityThread.performLaunchActivity (ActivityThread.java:
 1650) 01-11 03:32:20.629: E / AndroidRuntime (16968): at
 android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:
 1666) 01-11 03:32:20.629: E / AndroidRuntime (16968): at
 android.app.ActivityThread.access $ 1500 (ActivityThread.java: 117)
 01-11 03:32:20.629: E / AndroidRuntime (16968): at
 android.app.ActivityThread $ H.handleMessage (ActivityThread.java:
 931) 01-11 03:32:20.629: E / AndroidRuntime (16968): at
 android.os.Handler.dispatchMessage (Handler.java: 99) 01-11
 03:32:20.629: E / AndroidRuntime (16968): at android.os.Looper.loop
 (Looper.java: 130) 01-11 03:32:20.629: E / AndroidRuntime (16968): at
 android.app.ActivityThread.main (ActivityThread.java: 3689) 01-11
 03:32:20.629: E / AndroidRuntime (16968): at
 java.lang.reflect.Method.invokeNative (Native Method) 01-11
 03:32:20.629: E / AndroidRuntime (16968): at
 java.lang.reflect.Method.invoke (Method.java: 507) 01-11 03:32:20.629:
 E / AndroidRuntime (16968): at com.android.internal.os.ZygoteInit $
 MethodAndArgsCaller.run (ZygoteInit.java: 875) 01-11 03:32:20.629: E /
 AndroidRuntime (16968): at com.android.internal.os.ZygoteInit.main
 (ZygoteInit.java: 633) 01-11 03:32:20.629: E / AndroidRuntime (16968):
 at dalvik.system.NativeStart.main (Native Method) 01-11 03:32:20.629:
 E / AndroidRuntime (16968): Caused by: java.lang.ClassCastException:
 twitter4j.UserJSONImpl 01-11 03:32:20.629: E / AndroidRuntime (16968):
 at twitter.DetailsTweet.initObjects (DetailsTweet.java: 69) 01-11
 03:32:20.629: E / AndroidRuntime (16968): at
 twitter.DetailsTweet.onCreate (DetailsTweet.java: 40) 01-11
 03:32:20.629: E / AndroidRuntime (16968): at
 android.app.Instrumentation.callActivityOnCreate
 (Instrumentation.java: 1047) 01-11 03:32:20.629: E / AndroidRuntime
 (16968): at android.app.ActivityThread.performLaunchActivity
 (ActivityThread.java: 1614) 01-11 03:32:20.629: E / AndroidRuntime
 (16968): ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:56:36.413

替换这一行

```
<application> android:name=".TwitterApplication" </application> 
```

有了这个

```
<application> <activity android:name=".TwitterApplication"></activity> </application> 
```

# ruby-on-rails - 代表子级的 REST 命名约定

> ID：14272336
> 
> 赞同：0
> 
> 时间：2013-01-11T05:37:59.683
> 
> 标签：ruby-on-rails

我有以下班级模型

```
class FooBar {
}

http://localhost:3000/foo_bars/ 
```

访问上述对象。我应该`/foobars or /foo_bars`用来访问上述对象吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:57:45.523

你应该使用`/foo_bars`. 您将有一个名为的控制器`FooBarsController`和 `resources :foo_bars`您的 routes.rb 文件中的一行，它将获得一条`/foo_bars`路线。

# java - 如何从 Java 打开带有附件的电子邮件客户端

> ID：14272338
> 
> 赞同：0
> 
> 时间：2013-01-11T05:38:01.770
> 
> 标签：java, email-attachments, mapi, email-client, jdic

已经有太多的问题了。可能重复：
1.[如何打开电子邮件客户端并在 java 中自动附加文件](https://stackoverflow.com/questions/1564147/how-to-open-an-email-client-and-automatically-attach-file-in-java)
2.[使用附件启动 Mail-Client？](https://stackoverflow.com/questions/6029579/start-mail-client-with-attachment/)

我的要求是： 1\. 从 Java 打开默认电子邮件客户端。
2\. 添加来自 Java 的“收件人”地址、主题和正文。
3.**将文件附加到邮件中**

但是，这两个对我不起作用...
**JDIC：**
当我使用 JDIC 时，出现以下错误：
`java.lang.ClassNotFoundException: org.jdesktop.jdic.desktop.internal.impl.ServiceManagerStub_unix`

**JMAPI：**
当我使用 JMAPI 时，我得到了关注。

```
java.lang.UnsatisfiedLinkError: org.jdesktop.jdic.desktop.internal.impl.WinAPIWrapper.RegOpenKey(I[BI)[I
    at org.jdesktop.jdic.desktop.internal.impl.WinAPIWrapper.RegOpenKey(Native Method)
    at org.jdesktop.jdic.desktop.internal.impl.WinAPIWrapper.WinRegQueryValueEx(WinAPIWrapper.java:170)
    at jmapi.JMAPI.isMapiSupported(JMAPI.java:40)
    at com.turborep.turbotracker.mail.SendQuoteMail.send(SendQuoteMail.java:120)
    at com.turborep.turbotracker.mail.SendEmail.main(SendEmail.java:77)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我假设，JMAPI 只适用于 Windows 机器（因为需要打开 jdic.dll 库）。
我的机器是：Ubuntu 12.04 & JDK6

在 Ubuntu 中是否还有其他可能实现这一点。

提前致谢。

**编辑：** 我的机器使用 64 位 JVM 运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:23:20.123

您（或您包含的某些库）正在使用[JDesktop 集成组件 (JDIC) 项目](http://www.javadesktop.org/articles/jdic/index.html)，该项目具有每个目标操作系统的版本，并且需要本机库（它通过 JNI 使用）。

你的第一个错误

```
java.lang.ClassNotFoundException: org.jdesktop.jdic.desktop.internal.impl.ServiceManagerStub_unix 
```

可能是由于在 unix 机器上部署了 windows（或任何非 unix）版本的库引起的。

而你的第二个错误

```
java.lang.UnsatisfiedLinkError: org.jdesktop.jdic.desktop.internal.impl.WinAPIWrapper.RegOpenKey(I[BI)[I
    at org.jdesktop.jdic.desktop.internal.impl.WinAPIWrapper.RegOpenKey(Native Method) 
```

意味着您没有正确包含所需的 dll，或者您正在使用 32 位 dll 在 64 位 JVM 上运行 - 请[在此处](http://holistictendencies.wordpress.com/2011/03/28/jmapi-compose-email-messages-with-attachments-from-java/)查看更多信息（这是您的确切问题的人）

# android - 如何使用一个启动器图标启动两个活动？

> ID：14272339
> 
> 赞同：-1
> 
> 时间：2013-01-11T05:38:02.850
> 
> 标签：android, app-launcher

我想通过我的一些应用偏好打开两个具有相同图标的活动。谁能告诉我如何在运行时做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:41:30.383

你不能。您只能拥有一个具有所需意图过滤器的 Activity：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

您可以做的是启动启动画面，然后在其中检查您的偏好。根据偏好，您可以启动相应的活动。

# android-layout - 如何获得内衬的TextView？

> ID：14272340
> 
> 赞同：-1
> 
> 时间：2013-01-11T05:38:04.960
> 
> 标签：android-layout, android-edittext, notepad

我是 android 新手，我想创建记事本。我想创建带有水平线的编辑文本。我需要做什么？我的活动代码：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.add_task);

        title = (TextView) findViewById(R.id.Listname);
        Title_Edit = (EditText)findViewById(R.id.title_Edit);

        content = (TextView) findViewById(R.id.content);
        Content_Edit = (EditText)findViewById(R.id.content_Edit);

        save = (Button)findViewById(R.id.Save);
        cancel = (Button)findViewById(R.id.Cancel);

            Intent intent1 = getIntent();

            // titleEdit = intent1.getStringExtra("title");
            contents = intent1.getIntExtra("content", 0);

            isEdit = intent1.getBooleanExtra("isEdit", false);

            System.out.println(contents + "Intent ID");
            System.out.println(isEdit + "IS EDIT");
            if(isEdit) {

                Database_Notepad db = new Database_Notepad(Add_Task.this);

                Cursor c = db.GetNote(contents);

                Title_Edit.setText(c.getString(0));
                Content_Edit.setText(c.getString(1));

                System.out.println(c + "date from cursor");

                db.close();
                c.close();

        }

        save.setOnClickListener(this);
        cancel.setOnClickListener(this);

    } 

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            switch (v.getId()){

            case R.id.Save:

                String get_title = Title_Edit.getText().toString();
                String get_content = Content_Edit.getText().toString();

                if(!get_title.equals("") || !get_content.equals(""))
                {

                 if (!isEdit) {
                        //if it isn't edit mode we just add a new note to db

                         Database_Notepad db = new Database_Notepad(Add_Task.this);

                         db.Create_Note(get_title, get_content);

                    } else {
                        //if this is edit mode, we just update the old note
                         Database_Notepad db = new Database_Notepad(Add_Task.this);

                         db.updateNote(contents, get_title, get_content);

                        db.close();
                    }

                } 
```

请建议，我需要对编辑文本做什么。我还需要在xml中添加一些东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:41:57.230

I came to know, We need to create a new class which is extended by EditText. After that we need to use it is xml using link "com.notepad.LinedEditText" (package name & class which is extended by editText) and required fields. As I have

```
<com.notepad.LinedEditText
android:id="@+id/content_Edit"
style="@style/CodeFont"
android:layout_above="@+id/duedate"
android:layout_alignParentLeft="true"
android:layout_below="@+id/content"
android:minLines="20"
android:textSize="20dp" /> 
```

that is it. Thanks

# database - prolog 数据库从终端读取输入并将其从当前数据库中收回

> ID：14272341
> 
> 赞同：0
> 
> 时间：2013-01-11T05:38:08.083
> 
> 标签：database, io, prolog

在下面的代码中，我想找到一种首先读取字符的方法（通过用户输入“3.”，然后从 listCharacters 数据库
中删除/撤回该字符的数量

```
 :- dynamic listCharacters/1\.  

 listCharacters(Joe).  
 listCharacters(Tom).  
 listCharacters(Peter).  

 :- write_ln('Type in the name of the character you have from the below list.    
  Example "Tom" '), write_ln('1\. Joe'), write_ln('2\. Tom'), write_ln('3\. Peter'),   
  read(X), retract(listOfCharacters(X)). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:15:27.173

首先，您应该阅读列表中的元素，然后根据该内容构建菜单，例如

```
:- dynamic listCharacters/1.

listCharacters('Joe').
listCharacters('Tom').
listCharacters('Peter').

menu :-
    findall(Elem, listCharacters(Elem), L),

    format('Type in the index of the character you have from the below list.~n', []),
    forall(nth1(I,L,E), format('~d. ~q~n', [I, E])),

    read(X),
    (   nth1(X,L,E),
        retract(listCharacters(E))
    ->  true
    ;   format('cannot remove ~q', [X])
    ). 
```

我已经介绍了一个`menu`程序，如果您坚持调用它，请`:- menu.`在文件底部添加咨询。一些测试：

```
?- menu.
Type in the index of the character you have from the below list.
1\. 'Joe'
2\. 'Tom'
3\. 'Peter'
|: 2.
true.

?- menu.
Type in the index of the character you have from the below list.
1\. 'Joe'
2\. 'Peter'
|: 1.
true. 
```

# objective-c - 我应该如何整理这段代码：

> ID：14272343
> 
> 赞同：0
> 
> 时间：2013-01-11T05:38:19.187
> 
> 标签：objective-c, xcode, nsnull

```
if ([dictInfoForThisBusiness[@"LikeNumber"] isNotEmpty]) {
    BusinessToSave.numberOfLike =dictInfoForThisBusiness[@"LikeNumber"];
}
else
{
    BusinessToSave.numberOfLike = @(0);
}

if (dictInfoForThisBusiness[@"DislikeNumber"])
{
    BusinessToSave.numberOfDislike =dictInfoForThisBusiness[@"DislikeNumber"];
}
else
{
    BusinessToSave.numberOfDislike =@(0);
}

//BusinessToSave.buildingName =dictInfoForThisBusiness[@"Building"];

if([dictInfoForThisBusiness[@"Building"] isNotEmpty]){
    BusinessToSave.buildingName=dictInfoForThisBusiness[@"Building"];
}
else
{
    BusinessToSave.buildingName =nil;
}

if([dictInfoForThisBusiness[@"Street"] isNotEmpty]){
    BusinessToSave.Street=dictInfoForThisBusiness[@"Street"];
}
else
{
    BusinessToSave.Street =nil;
} 
```

显然，这很混乱，原因很简单。

`BusinessToSave`是一个托管对象。

通常它应该简单地归零。但是，字典不能包含 nil 值，而是返回 NULL。

所以我不能只做`BusinessToSave.buildingName = dictInfoForThisBusiness[@"Building"]`

那我该怎么办？

我试过的一件事是：

```
BusinessToSave.buildingName =(NSString*) [dictInfoForThisBusiness[@"Building"] nilIfNull]; 
```

我尝试的另一件事是

```
BusinessToSave.buildingName =((NSString*) dictInfoForThisBusiness[@"Building"]).nilIfNull; 
```

我不知道为什么点符号可以工作，因为 nilIfNull 返回 id

```
-(id) nilIfNull
{
    if ([self isKindOfClass:[NSNull class]])
    {
        return self;
    }
    else
    {
        return nil;
    }
} 
```

我终于适应了

`[dictInfoForThisBusiness[@"Building"] nilIfNull]`如果我期望 NSString，它会起作用。有更好或更标准的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:42:24.870

第一步是尝试摆脱所有其他陈述。只需将此 setup(?) 方法更改为以下内容即可使其更具可读性：

```
BusinessToSave.numberOfLike = @(0);
if ([dictInfoForThisBusiness[@"LikeNumber"] isNotEmpty]) {
    BusinessToSave.numberOfLike =dictInfoForThisBusiness[@"LikeNumber"];
}

BusinessToSave.numberOfDislike =@(0);
if (dictInfoForThisBusiness[@"DislikeNumber"]){
    BusinessToSave.numberOfDislike =dictInfoForThisBusiness[@"DislikeNumber"];
}

BusinessToSave.buildingName =nil;
if([dictInfoForThisBusiness[@"Building"] isNotEmpty]){
    BusinessToSave.buildingName=dictInfoForThisBusiness[@"Building"];
}

BusinessToSave.Street =nil;
if([dictInfoForThisBusiness[@"Street"] isNotEmpty]){
    BusinessToSave.Street=dictInfoForThisBusiness[@"Street"];
} 
```

如何创建一个方法来为您提供正确的对象（或 nil）：

```
BusinessToSave.buildingName = [self valueForDictKey:@"Building"]; 
```

你甚至可以有两种（或更多）不同的方法。(stringForDictKey, integerForDictKey) 等。

```
BusinessToSave.numberOfLike = [self integerForDictKey:@"LikeNumber"];
BusinessToSave.numberOfDislike = [self integerForDictKey: @"DislikeNumber"];
BusinessToSave.buildingName = [self stringForDictKey: @"Building"];
BusinessToSave.street = [self stringForDictKey @"Street"]; 
```

另外：我建议您为所有这些键制作一些#defines，拼错其中一个键名太容易了。:)

```
BusinessToSave.numberOfLike = [self integerForDictKey:KEY_LIKES];
BusinessToSave.numberOfDislike = [self integerForDictKey: KEY_DISLIKES];
BusinessToSave.buildingName = [self stringForDictKey: KEY_BUILDING];
BusinessToSave.street = [self stringForDictKey KEY_STREET]; 
```

# java - 如何使用 min() 函数在 sqlite 中指定查询

> ID：14272352
> 
> 赞同：0
> 
> 时间：2013-01-11T05:39:21.180
> 
> 标签：java, sql, sqlite, select

我有下面的代码定义的表

```
CREATE TABLE Products
(
P_Id INTEGER PRIMARY KEY,
name TEXT,
price REAL,
sellPrice REAL,
plu INTEGER,
codeBar TEXT,
tax INTEGER,
amount INTEGER,
date TEXT
); 
```

当我尝试执行这样的查询时，我得到一个语法错误（这是一个准备好的语句）

```
select * 
from Products 
where P_Id = min(select P_Id from Products where codeBar=?); 
```

有人可以帮忙吗？这个查询有什么问题？

我得到的确切错误消息是：

> *java.sql.SQLException：靠近“选择”：语法错误*

谢谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T05:42:41.247

`MIN()`应该在子查询中。

```
select * 
from Products 
where P_Id = (select min(P_ID) from Products where codeBar=?); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:41:58.523

我相信你想要的是这样的：

```
select * from Products 
where P_Id = (select min(P_Id) from Products where codeBar=?); 
```

# jquery - 通过 JQuery ajaxSubmit POST 时 Magento 购物车没有得到更新

> ID：14272353
> 
> 赞同：0
> 
> 时间：2013-01-11T05:39:36.410
> 
> 标签：jquery, ajax, magento, form-submit

我使用 ajaxSubmit 来满足一个非常特殊的要求。这个 ajaxSubmit 会将产品添加到 Magento 购物车。不幸的是，即使我使用 return true; 因为回调购物页面显示为空，直到我从浏览器按钮手动刷新页面。

```
$('#nothanks').click( function (){
        $('#quickbuyform').ajaxSubmit(function(){
            return true;
        }); 
    }); 
```

尝试了很多东西，包括 windows.location.reload()，没有任何效果，任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:27:41.540

您可以`window.location.reload();`在 ajax 调用之后使用来重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:54:36.410

好的，这就是我所做的，

这是我的 JQuery 提交，

```
$('#nothanks').click( function (){
var url = this.href;
$('#quickbuyform').ajaxSubmit();
    window.location.href = '<?php  echo $this->getUrl('checkout/cart') ?>';
return false; 
```

});

真正的问题是 $('#nothanks') 是图像“添加到购物车”的 ID，因此返回错误中继不起作用。它必须是 href 标记的 id。像下面...

```
<div class='pop_accessories_area_button'><a id="nothanks" href='<?php  echo $this->getUrl('checkout/cart') ?>'><img  src='<?php echo $this->getSkinUrl('images/prpage/nothanksbut.png') ?>' title='No Thanks Go to Cart' alt='No Thanks Go to Cart' /></a></div> 
```

问题解决了！！

感谢大家的支持

# objective-c - 鼠标驱动程序如何移动鼠标指针？

> ID：14272354
> 
> 赞同：2
> 
> 时间：2013-01-11T05:39:41.477
> 
> 标签：objective-c, macos, mouse-cursor

这可能是一个奇怪的问题，但是鼠标软件是如何工作的呢？（特别是在 OSX 上）

如果我想在 OSX 上移动鼠标，我一直在使用这段代码：

```
CGAssociateMouseAndMouseCursorPosition(0);
CGWarpMouseCursorPosition(point); // point is of type NSPoint
CGAssociateMouseAndMouseCursorPosition (1); 
```

但这会导致光标跳跃（甚至偶尔滞后）。鼠标（或触控板）如何使它如此流畅？他们使用什么 API？

同样，如果我使用此代码将光标移动到停靠栏上，例如，停靠栏不会放大（放大已打开），即使使用触控板正常移动光标也可以正常工作。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:12:27.183

您的问题应该是“鼠标*设备驱动程序*如何工作？”

您应该看看[IOKit](https://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/IOKitFundamentals/Introduction/Introduction.html#//apple_ref/doc/uid/TP0000011-CH204-TPXREF101)，尤其是[HID 系列](https://developer.apple.com/library/mac/documentation/devicedrivers/conceptual/IOKitFundamentals/Families_Ref/Families_Ref.html#//apple_ref/doc/uid/TP0000021-BABFEIAC)。

如果您只想模拟鼠标移动，您也可以尝试使用 创建鼠标事件[`CGEventCreateMouseEvent`](http://developer.apple.com/library/mac/documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/doc/uid/TP40003550-CH202-BBCFCJGH)，然后使用 发布它[`CGEventPost`](http://developer.apple.com/library/mac/documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/doc/uid/TP40003550-CH202-BBCEDCEA)。

# javascript - 我无法将 ajax 数据保存到变量中

> ID：14272355
> 
> 赞同：0
> 
> 时间：2013-01-11T05:39:43.653
> 
> 标签：javascript, ajax, jquery

我有 ajax 调用，并且我正在正确获取数据。但我无法将数据分配给局部变量。我正在尝试将数据分配给 item_price。我得到的数据为 100.00 或 115.25

这是我的ajax代码

```
$.ajax({
              type: "get",
              url: "index.php?module=product&view=price",
              data: { code: v },
              dataType: "json",
              success: function(data) {
                    item_price = data;
                }

            }); 
```

* * *

谢谢你们，异步：错误，为我工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:51:51.633

试试这个

```
var item_price;
$.ajax({
          type: "get",
          async: false, //If you need synchronous requests, set this option to false
          url: "index.php?module=product&view=price",
          data: { code: v },
          dataType: "json",
          success: function(data) {
                item_price = data;
            }

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:46:46.637

```
$.ajax({
              type: "get",
              url: "index.php?module=product&view=price",
              data: { code: v },
              dataType: "json",
              success: function(data) { //console.log(data);/*get your price index and assign*/
                    item_price = data.your_price_index;
                }

            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:54:52.393

```
$.post('index.php', { module: product, view: price, code: v }, function(data)
{
    var item_price;
    item_price = data;
});

otherwise try this

$.post('index.php', { module: product, view: price, code: v }, function(data)
{
        $("#My_Div").html(data);
}); 
```

# c# - 将 CSV 文件行解析为对象图时出现问题

> ID：14272365
> 
> 赞同：0
> 
> 时间：2013-01-11T05:40:35.910
> 
> 标签：c#, linq, linq-to-entities

这是我的 csv 文件的样子：

```
1,couchName1,“green”,“suede”
2,couchName2,“blue”,“suede”
3,couchName3,fail,“sued”
...etc. 
```

我需要阅读此 csv 并将每一行转换为沙发对象图。所以这是我尝试过的：

```
 public static IEnumerable<string[]> ReadCsvFile(string filePath)
    {
        IEnumerable<string[]> file = File.ReadLines(filePath).Select(a => a.Split(';'));
        return file;
    }

public static List<Couch> GetCouches(string csvFilePath)
{
    IEnumerable<string[]> fileRows = FileUtilities.ReadCsvFile(csvFilePath);

    if (fileRows == null) return new List<Couch>(); 
    int couchId;

    List<Couch> couches = fileRows.Select(row => new Couch
     {  
        CouchId = int.TryParse(row[0],  out couchId) ? couchId : 0,
        Name= row[1],
        Color= row[2],
        Fabric= row[3]
       }).ToList();

    return couches;
} 
```

我得到错误 {"Index was outside the bounds of the array."} 在 LINQ select 语句的行上，我试图将它们解析到我的 Couch 实例和我想要返回它们的通用列表中。

**解决方案：**

这是我如何让它工作的，我自己解决了它：

```
public static List<Couch> GetCouches(string csvFilePath)
{
    IEnumerable<string[]> fileRows = FileUtilities.ReadCsvFile(csvFilePath);
    List<Couch> couches = new List<Couch>(); // ADDED THIS

    if (fileRows == null) return new List<Couch>(); 
    int couchId;

    // NEW LOGIC, SPLIT OUT EACH ROW'S COLUMNS AND THEN MAKE THE OBJECT GRAPH
    foreach(string[] row in fileRows)
    {
        string[] rowColumnValues = row[0].Split(',').ToArray();

        couches.Add(new Couch
                            {
                              CouchId = int.TryParse(rowColumnValues[0],  out couchId) ? couchId : 0,
                              Name= rowColumnValues[1],
                              Color= rowColumnValues[2],
                              Fabric= rowColumnValues[3]
    }

    return couches;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:57:45.493

我能想到的唯一原因是 fileRows 中的某些行可能没有预期的四个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:19:17.497

弄清楚了。我需要将行拆分为列。

请参阅上面我的最新更新。

# javascript - document.activeElement 在 Firefox 插件的内容脚本中不可用，仅适用于 Gmail

> ID：14272366
> 
> 赞同：12
> 
> 时间：2013-01-11T05:40:43.927
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在使用 addon-sdk 开发一个 Firefox 插件。此插件将菜单项添加到上下文菜单中，用户可以右键单击任何编辑控件以激活此菜单项。激活后，它会在用户键入内容时显示一个带有建议的小弹出窗口。

除了在 Gmail 上，一切都运行良好。

在 Gmail 中，以下代码失败。

```
self.port.on('showPopup', function(data) {
    var active = document.activeElement;
    console.log(active.type);
    if (active && getWordUnderCaret(active).word == data.input) {
        populateSuggestions(data);
        positionPopup(active);
        stylePopup();
    }
}); 
```

失败的原因是`document.activeElement`指向`document.body`和`getWordUnderCaret`失败，因为它期望输入/文本区域控件。这在所有其他地方都很好。我不确定它为什么指向，`document.body`因为我可以看到焦点在输入控件上。`document.activeElement`在 Firebug 控制台中输入给了我正确的对象。

或者，我尝试自己跟踪活动元素，而不是使用`document.activeElement`. 但我遇到了一些问题，比如在某个地方坚持这个。我不能用它作为代理`window`来持久化它。`window`我试过`unsafeWindow`但无法让它工作。

我想知道为什么这在 Gmail 中失败了？任何解决此问题的帮助都会很棒！

我的代码在[Github上可用](https://github.com/navaneeth/varnam-browser-addons/blob/master/firefox/data/varnam.js#L38)

**编辑**

看起来这是 addon-sdk 的问题。我创建了一个可用于重现问题的 Gist。它可以[在这里](https://gist.github.com/4544929)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T04:16:57.893

我想，您指的是 Gmail 上的大框，您在撰写电子邮件时输入消息正文。

» 如果是这样的话；

## 原因：

Gmail 上的编辑控件不是文本控件（输入或文本区域）。那是一个**[所见即所得](http://en.wikipedia.org/wiki/WYSIWYG)**的编辑器，通过设置（或 取决于浏览器支持）**`<iframe>`**使其**可编辑。**`document.designMode = "on"``document.body.contentEditable = true`

所以，当点击时；**`document.activeElement`**在这种情况下，您并不总是以查询的方式获得正确的元素。你得到包装（主）文档的`body`, （甚至不是`iframe`'s `body`）。

例如; 我相信，[在你的这行](https://github.com/navaneeth/varnam-browser-addons/blob/master/firefox/data/varnam.js#L25)代码；您将`click`事件侦听器添加到主文档。但是您也应该将其添加到页面中的**可编辑 iframe**；因为页面和 iframe(s) 有不同的`document`对象（并且 iframe 不会将自己设置为活动的）。所以，你会弄错**`document.activeElement`**。

## 解决方法：

也将必要的事件侦听器添加到 iframe；因为您想收到有关它们的通知。

```
// Add mouseup event listener to the main document
document.addEventListener('mouseup', logActiveElement, false);
// Get all the iframes on the main document.
var iframeElems = document.getElementsByTagName('iframe');
// Add mouseup event listener to the document of the iframe elements
for (var i = 0; i < iframeElems.length; ++i) {
    addIframeEvent(iframeElems[i], true, 'mouseup', logActiveElement);
} 
```

以下是辅助函数：（
*请注意我们如何将事件侦听器从主文档添加到 iframe（文档），以及我们如何检查 iframe 当前是否可编辑。）*

```
// Adds the specified event listener to the iframe element. 
function addIframeEvent(iframeElem, editableOnly, eventName, callback) {
    // Get the document of the iframe element.
    var iframeDocument = iframeElem.contentDocument || 
                            iframeElem.contentWindow.document;
    // Watch for editableOnly argument. 
    if ( (editableOnly && isDocEditable(iframeDocument)) || !editableOnly) {
        // Add the event listener to the document of the iframe element.
        iframeDocument.addEventListener(eventName, callback, false);
    }
}

// Checks whether the specified document is content-editable or in design mode.
function isDocEditable(doc) {
    return ( ('contentEditable' in doc.body) && (doc.body.contentEditable === true) ) || 
        ('designMode' in doc) && (doc.designMode == "on") );
}

// Handler function
function logActiveElement() {
    console.log("Active Element:", document.activeElement);
} 
```

现在，事件处理程序将正确记录`activeElement`到控制台。

## 并发症：

因此; 现有代码中的文本选择和检查等内容与常规编辑控件（输入、文本区域等）的工作方式不同。

例如; 您的`getWordUnderCaret(editor)`函数获取`insertionPoint`（目标）`editor.`**`selectionStart`**中不存在的方法。对于这种选择/检查；[**你应该在DOM Selections**](https://developer.mozilla.org/en-US/docs/DOM/Selection)，[**DOM Ranges**](http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html)之间切换；[而不是文本编辑控件](https://developer.mozilla.org/en-US/docs/DOM/HTMLTextAreaElement)中的文本选择和范围。`document.body``iframe`[](https://developer.mozilla.org/en-US/docs/DOM/Selection)**[](http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html)**

 *****注意：您使用的文本选择/范围 jQuery 库 ( [Rangy](http://code.google.com/p/rangy/) ) 承诺在浏览器中处理这种可编辑的内容（iframe、div 等）。您是否为 iframe 尝试过（例如在 Gmail 上）？*

## 更多的信息：

*   请参阅Mozilla 开发者网络上的**[activeElement 文档。](https://developer.mozilla.org/en-US/docs/DOM/document.activeElement)**此外，它表示：***“不要将焦点与文档上的选择混淆。当没有选择时，它 `activeElement`是页面的`<body>`。”***

## 更新：

检查 Gmail 上的文本控件；我也玩过你的示例代码；

*   添加`attachTo: ["existing", "top", "frame"]`到 PageMod 选项。
*   将 PageMod 选项中的值更改`contentScriptWhen`为`'end'`（而不是 `'ready'`）；确保包括 DOM、CSS、JS 在内的所有内容都已加载。某些内容可能会在页面就绪/加载时通过 JS 进行更改，因此“结束”将在其之后执行。
*   也将选择器上下文应用于菜单项；为了确保该项目仅在选择器上下文中出现。

在 Gmail（搜索框、聊天框等）和其他网站上测试；这似乎工作。[**在**](https://builder.addons.mozilla.org/package/171385/latest/)[addon builder 上](https://builder.addons.mozilla.org/package/171385/latest/)
查看/测试工作[示例](https://builder.addons.mozilla.org/package/171385/latest/)**。**

 **![Gmail 搜索框文本输入](../Images/130cebfae7daf114e78262aecb90a740.png)

![Gmail 聊天框文本区域](../Images/f5ab5486d0fb9edf631d1e3e1258cb4d.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T14:57:01.703

您是否尝试过使用最新的 git 版本的插件 sdk？那里的上下文菜单已经从头开始重写，我听说它修复了很多错误。******

# macos - 使用 Perl 脚本更改 Mac 用户密码

> ID：14272368
> 
> 赞同：0
> 
> 时间：2013-01-11T05:40:50.803
> 
> 标签：macos, perl, passwords

我希望能够使用 Perl 脚本更改用户的密码。我试过了：

```
my $user = "test";
my $pass = "testing";

open(DATA, "| passwd $user") || die "failed";
print DATA $pass;
sleep(1);
print DATA $pass;
close(DATA); 
```

它永远不会通过。

我也试过 `echo -e "$pass\n$pass" | passwd $user" 但是，我收到密码转换失败错误。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:55:54.430

我相信，由于您没有换行符，因此它永远不会完全收到新密码。就像您输入了它但从未按回车键一样。

[我相信， Expect](http://search.cpan.org/~rgiersig/Expect-1.15/Expect.pod)经常用于这样的提示。

# objective-c - 为什么要使用下划线？

> ID：14272369
> 
> 赞同：2
> 
> 时间：2013-01-11T05:40:51.600
> 
> 标签：objective-c

以下示例说明了如何为 Person 类实现 dealloc 方法：

```
@interface Person : NSObject
@property (retain) NSString *firstName;
@property (retain) NSString *lastName;
@property (assign, readonly) NSString *fullName;
@end

@implementation Person
// ...
- (void)dealloc
    [_firstName release];
    [_lastName  release];
    [super      dealloc];
}
@end 
```

以上来自Apple文档： [内存管理示例](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)

我的问题是为什么在 dealloc 中 firstName 和 lastName 之前有下划线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:43:21.983

这些属性通常会这样合成：

```
@synthesize firstName = _firstName, …; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:45:50.143

方法 :: 默认情况下，当您合成 getter 和 setter 访问器方法时，假定属性和 ivar 具有相同的名称。

乍一看，这可能会使您在使用 getter/setter 方法以及何时直接访问 ivar 时感到困惑。

另一种方法是将 ivar 命名为与属性不同的名称。一种常见的方法是使用下划线作为 ivars 名称的前缀。

你可以参考这个链接：[http ://useyourloaf.com/blog/2011/02/08/understanding-your-objective-c-self.html](http://useyourloaf.com/blog/2011/02/08/understanding-your-objective-c-self.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T05:53:09.040

当你这样做时`self.firstName`，你实际上是在调用 getter `firstName`（`self.firstName = @""`调用`setFirstName:`.

```
- (NSString *)firstName
{
    return _firstName;
} 
```

当您执行 _firstName 时，您直接访问实例变量而无需通过 setter。`init`人们在和期间直接访问实例变量的原因`dealloc`是setter方法或观察[1]属性的对象可以运行代码。这可能很糟糕，因为该对象可能尚未完成自身的初始化（在 中`init`），或者它的某些属性已被释放（在 中`dealloc`）。

当您编写时`@sythesize firstName = _firstName`，您是专门命名底层实例变量`_firstName`而不是`firstName`. 这样，您就不会意外键入`firstName`和绕过 setter 方法和 KVO。如果不写`@synthesize`，编译器会自动命名实例变量`_firstName`。

只是个人建议——我会使用 ARC，这样你就不必处理 dealloc。

[1] Key-Value 观察是一种对象可以注册以通知属性更改的方式。它是通过`@synthesize`或正确命名`getter`的和`setter`方法自动提供的。

# ajax - 从 elgg 中的个人资料类型中向选定用户显示内容

> ID：14272371
> 
> 赞同：1
> 
> 时间：2013-01-11T05:40:53.337
> 
> 标签：ajax, widget, entity, friend, elgg

我在朋友的朋友中遇到问题，当我在朋友中添加相同的朋友时，他的朋友在我的同一个人资料类型中，该列表仅在我打开该朋友页面小部件时显示。

例如，我是程序员个人资料类型，我的朋友有程序员、测试员、设计师，当我在小部件中打开他的个人资料时，只显示程序员朋友.....

我尝试相同的代码，但我无法完成代码

```
$option = array( 'type'=>'user','subtype'=>'friends' 'where'=>'guid=') 
```

请帮帮我……thanx adv…………

# iphone - phonegap 2.3 打开地图和 URL 不再适用于 iPhone

> ID：14272373
> 
> 赞同：1
> 
> 时间：2013-01-11T05:41:06.320
> 
> 标签：iphone, url, cordova, maps

刚刚安装了 phonegap 2.3 并尝试打开我创建的地图链接。在更新之前，这一切都很好。

我已经调整了 URL 方案以适合[这里](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)的方案，并且我还尝试为它提供一个正常的 url，无论我做什么，我似乎都无法让它加载应用程序外部的链接，无论是浏览器窗口还是本机地图应用程序..

代码：

```
openDeviceMapsApplication: function(address, lat, lon) {
    var query = '?';

    address = address + ", Australia";
    address = encodeURI(address);

    if (address[0] !== '.') {
        query += 'q=' + address + '&';
    } else {
        query += 'q=' + lat + ',' + lon + '&';
    }

    query += 'z=15';

    var url = 'http://maps.google.com/maps';
    var osVersion = "not detected";

    console.log("detect");

    if(/OS [2-4](_\d)(_\d)? like Mac OS X/i.test(navigator.userAgent)) { //is it ios 2-4?
        url = 'http://maps.google.com/maps'; osVersion = "ios 2-4";
        console.log("ios2-4");
    } else if(/CPU like Mac OS X/i.test(navigator.userAgent)) { // ios 1?!?!
        url = 'http://maps.google.com/maps'; osVersion = "ios 1";
        console.log("ios4");
    } else if(/OS [5](_\d)(_\d)? like Mac OS X/i.test(navigator.userAgent)) { //ios 5?
        url = 'http://maps.google.com/maps'; osVersion = "ios 5";
                        console.log("ios5");
    } else{//ios 6 or greater
        url = 'http://maps.apple.com/'; osVersion = "ios 6 or greater";
                        console.log("ios6");
    }

    url += query;
    console.log(url);
    window.location.href = url;
    return;

}, 
```

有人有解决方法吗？

PS，操作系统检测有效且丑陋..但有效:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:47:43.583

好的，经过大量搜索和虚假线索后，我发现在这个版本的 Cordova/Phonegap 中 URL 的处理方式不同。

所以我找到了委托：---编辑这个委托方法在 CDVViewController.m 作为 Cordova 项目的一部分

```
 - (BOOL)webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request
 navigationType:(UIWebViewNavigationType)navigationType 
```

并添加了一个 if-case。检查基本上说“是 URL（https 或 http）并且是（maps.google.com/maps 或 maps.apple.com - 分别适用于 ios 5 和 6）的 URL

```
if (([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"] || [[url scheme] isEqualToString:@"itms-apps"]) &&
             (([url.path rangeOfString:@"maps.google.com/maps"].location == NSNotFound) || ([url.path rangeOfString:@"maps.apple.com"].location == NSNotFound))) {
        [[UIApplication sharedApplication] openURL:url];
        return NO;
    } 
```

这解决了地图的问题，可能还有其他一些基于 URL 的应用程序引用无法解决。

# perl - 对于循环建议

> ID：14272375
> 
> 赞同：-2
> 
> 时间：2013-01-11T05:41:26.007
> 
> 标签：perl

我有一个字段，其值从 0 到 6,00,000

对于数据库中的此字段值，例如 5,6,7,8,45,91,92,93,94

我必须获得该字段的免费值和使用值建议

**1.USED**
Minvalue= 0 maxvalue=94（来自数据库）

在这种情况下，我使用 for 循环 (i=minvalue;i<=maxvalue;i++) 循环运行 94 次，每次它检查某些内容是否与数据库条目匹配 (5,6,7,45..94)

我打印输出范围，如
使用值：
5 到 8
45 91 到 94

由于值较小，因此它工作得很快。如果数据库中有一个像 490000 这样的条目，那么循环将运行很长时间。

**2.FREE**
最小值= 0 最大值= 600000（来自字段定义）

我在这里也有相同的 for 循环概念，所以循环运行 5lac 次。而且输出永远不会来，太耗时了

我想要像
自由值这样的输出：
0 到 4
9 到 44
46 到 90
95-600000

有什么方法可以减少 for 循环执行或使用其他逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:59:49.507

不要那样做。

如果可能，将此数据库列设置为`AUTO_INCREMENT`（或您的 SQL 引擎最接近的替代项），以便自动分配新值。如果这不可能，您可以改为`SELECT MAX(col) + 1 FROM table`确定下一个可用值（但请注意，这很容易出现竞争）。

无论哪种情况，*都不要担心留下 gaps*。在大多数应用程序中，这不是问题。如果您的应用程序中存在域要求，而您的 ID 数量有限（为什么？），那么当您的所有 ID 都被分配时，您可能最终会遇到问题，因此您需要为此做好计划。

如果您处于某些非常不寻常的情况下，您需要有效分配少量可用值，那么您应该明确跟踪这些值。有一个表，其中每个可用值都有一行，还有一个字段指示分配给它的内容，然后使用类似`SELECT id FROM id_table WHERE inuse = 0 LIMIT 1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:48:26.187

如果数据库表有*N行，那么 0 到**N*之间的值必须至少有一个未被使用，因此您最多只需要循环*N* +1 次。

在 Perl 中执行此操作的一种有效方法是将使用的值存储为散列键，并在循环中增加一个变量，直到它不再匹配散列中的任何键：

```
my @values = (5,6,7,8,45,91,92,93,94);

my %hash;
undef @hash{@values};

my $x = 0;
$x++ while exists $hash{$x};

# now $x is the lowest unused value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:48:04.037

无需遍历特定范围内的所有值。只需检查您的值并分别查找连续值（例如，当前值比前一个值大一）或间隙。这会快得多。

打印使用的范围

```
my @values = (5, 6, 7, 8, 45, 91, 92, 93, 94);
my $start = shift @values;
my $i = $start;
for my $v (@values) {
    if ($v > $i + 1) {
        if ($i == $start) {
            print "$start\n";
        } else {
            print "$start to $i\n";
        }

        $start = $v;
    }

    $i = $v;
}

if ($i == $start) {
    print "$start\n";
} else {
    print "$start to $i\n";
} 
```

并找到自由值的范围

```
my @values = (5, 6, 7, 8, 45, 91, 92, 93, 94);
my $i = 0;
my $max = 600000;
for my $v (@values) {
    if ($v > $i + 1) {
        print "$i to ", $v - 1, "\n";
    } elsif ($v == $i + 1) {
        print "$i\n";
    }

    $i = $v + 1;
}

if ($i < $max) {
    print "$i to $max\n";
} 
```

# java - 错误：不能从静态上下文中引用非静态变量

> ID：14272376
> 
> 赞同：-3
> 
> 时间：2013-01-11T05:41:27.910
> 
> 标签：java, compiler-errors

我从教科书中得到了这个代码。

```
 class FirstClass
 {
     int idNo =25;
     public static void print()
     {
         System.out.println("firstclass citizen " + idNo);
     }
 }
 class SecondClass
 {
     int idNo =24;
     public static void print()
     {
         System.out.println("secondclass citizen" + idNo);
     }
 }
 public class People
 {
     //FirstClass female;
     //SecondClass male;
     public static void main(String[] args)
     {
         System.out.println("people from java world");
         FirstClass.print();
         SecondClass.print();
     }
 } 
```

但是在编译这段代码时，我得到了以下错误

```
People.java:7: error: non-static variable idNo cannot be referenced from a stati
c context
            System.out.println("firstclass citizen " + idNo);
                                                       ^
People.java:16: error: non-static variable idNo cannot be referenced from a stat
ic context
            System.out.println("secondclass citizen" + idNo);
                                                       ^
2 errors 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:47:27.627

`this`引用当前对象，您可以使用 this 从实例方法或构造函数中引用当前对象的任何成员。**但是您不能`this`在静态上下文（方法或块）中使用引用**。

`static`可以在不创建该类的对象的情况下调用方法。因此，如果您在静态上下文中使用此变量或非静态变量，则会产生编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:46:54.870

您可能希望创建类的实例，并将方法转换为实例方法而不是静态方法。

```
public class FirstClass {

    private int idNo = 25;        

    public void print() {
        System.out.println("firstclass citizen " + this.idNo);
    }
} 
```

然后从主要方法：

```
FirstClass fc = new FirstClass();
fc.print(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T05:49:13.990

您不能引用非静态属性并将其用于静态方法，即

```
class FirstClass
{
    static int idNo =25;
    public static void print()
    {
            System.out.println("firstclass citizen " + idNo);
    }
}
class SecondClass
{
    static int idNo =24;
    public static void print()
    {
            System.out.println("secondclass citizen" + idNo);
    }
}
public class People
{
    FirstClass female;
    SecondClass male;
    public static void main(String[] args)
    {
            System.out.println("people from java world");
            FirstClass.print();
            SecondClass.print();
   }
} 
```

# arrays - 给定一个可以改变数字的符号，找到数组的最小和

> ID：14272380
> 
> 赞同：7
> 
> 时间：2013-01-11T05:41:33.387
> 
> 标签：arrays, dynamic-programming

我在编码比赛中遇到了这个问题-

您将获得一个正整数数组，并且可以在需要时更改任何整数的符号。编写一个程序来计算这个数组的最小和。这个总和应该 >= 0。例如：Array = {1,2,4,5} 然后 sum = 0 因为我们改变 1 和 5 {-1,2,4,-5} 的符号

我对这个问题的解决方案是对数组进行排序并找到所有成员的总和。然后我会从最大数开始迭代地从总和减少 2*（排序数组值） - 直到总和变为 0 或直到它变为负数。

但我的解决方案是错误的。取 12、13、14、15、16、50。我的代码将 50 更改为 -50 并停止（即 min sum = 20）。但答案应该是 12,-13,-14,-15,-16,50（最小总和 = 4）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T08:06:14.747

这个问题可以改成背包问题

考虑这个问题：

给你 n 个整数，显然，你可以计算这些数字的总和，假设它是 S

您现在需要从中选择一组数字，并旨在将这些选择的数字相加以尽可能接近 S/2

这可以使用与背包问题非常相似的 DP 算法来完成

你现在能做到吗？:)

这篇文章只是一个提示，如果您需要更多帮助，我可以提供更多详细信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-12T05:41:21.943

我被其他答案激怒了，说了一些关于背包的事情。

Knap-Sack 意味着您有一个目标和`S`一个权重列表，`A`并且您正在寻找**总和**为.`A``S`

对我来说，它看起来更像是制造期调度，您有两台机器并且必须将所有作业分配给它们，以使制造期最小化。

因此，您可以将其视为两个堆栈，并尝试将它们的高度差异最小化。

3/2 近似算法是这样的：

*   对列表进行排序（最大到最小）
*   对于每个对象，将其放在具有最低高度的堆栈上

您可以通过将较小堆栈上的所有对象的符号变为负数来获得近似值。（即计算两个堆栈的绝对差）

如果您搜索最小制造时间调度，您可以找到一个[PTAS](https://en.wikipedia.org/wiki/Polynomial-time_approximation_scheme)和一个需要在列表长度中指数时间的精确算法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-12T03:19:51.747

我写了上面的代码，它似乎正在工作。

如果我错了，请纠正我！

```
public int minimumSum(int[] array)
{
      int counter1, counter2, minimumSum;
      int n = array.length;
      counter1 = array[n-1];
      counter2 = array[n-2];
      // It is assumed that the array is sorted.
      int i = n-3;
      while(i>=0)
      {
          if(counter1 > counter2)
          { 
              counter2 = counter2 + array[i];
          }
          else
          {
              counter1 = counter1 + array[i];
          }
          i--;
      }
      if(counter1 > counter2)
      {
          minimumSum = counter1 - counter2;
      }
      else
          minimumSum = counter2 - counter1;
      return minimumSum ;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-15T12:59:15.980

排序在这里不起作用，因为这不能像 0-1 背包那样通过贪婪方法解决。你可以这样想，数组中的每个元素都有 2 个选择，要么是负数，要么是正数。您可以通过选择一个数字（一个分支）或不选择它（另一个分支）来开发递归解决方案

这是我所说的实现。可以通过多种方式改进代码。抱歉，如果评论很少。我的时间不多了。

```
#include "iostream"
#include <algorithm>
using namespace std;

int *arr,*flag,mini=1000; int* sol; //Flag array is used to see which all elements are selected in that call of the function

void find_difference(int* arr,int* flag,int n,int current,int *sol)
{
if(current==n)return;

int sum0=0, sum1=0,entered=0;
flag[current]=1;              //Selecting the current indexed number
for (int i = 0; i < n; ++i)
{
    if(flag[i]==0)
    {
        sum0=sum0+arr[i];
    }
    else
    {
        sum1=sum1+arr[i];
    }
}
    if(abs(sum0-sum1)<mini)
    {
        mini=abs(sum0-sum1);
        for (int j = 0; j < n; ++j)
        {
            sol[j]=flag[j];    //Remebering the optimal solution
        }
    }
find_difference(arr,flag,n,current+1,sol);  //Moving to the next index to perform the same operation (selecting or not selecting it)
flag[current]=0;                 // Not selecting it
for (int i = 0; i < n; ++i)
{
    if(flag[i]==0)
    {
        sum0=sum0+arr[i];
    }
    else
    {
        sum1=sum1+arr[i];
    }
}
    if(abs(sum0-sum1) < mini)
    {
        mini=abs(sum0-sum1);
        for (int j = 0; j < n; ++j)
        {
            sol[j]=flag[j];
        }
    }
find_difference(arr,flag,n,current+1,sol);
}

int main(int argc, char const *argv[])
{
int n;
cout<<"Enter size: ";
cin>>n;
cout<<"Enter the numbers: "
arr= new int[n];
flag= new int[n];
sol= new int[n];
for (int i = 0; i < n; ++i)
{
    cin>>arr[i];
    flag[i]=0;
    sol[i]=0;
}

find_difference(arr,flag,n,0,sol);

cout<<"Min = "<<mini<<endl;
cout<<"One set is: ";
for (int i = 0; i < n; ++i)
{
    if (sol[i]==1)
    {
        cout<<arr[i]<<" ";
    }
}
cout<<"\nOther set is: ";
for (int i = 0; i < n; ++i)
{
    if (sol[i]==0)
    {
        cout<<arr[i]<<" ";
    }
}
cout<<"\n";
return 0;
} 
```

# android - 在 android 中解析嵌套的 JSONObject 和 JSONArray

> ID：14272387
> 
> 赞同：0
> 
> 时间：2013-01-11T05:42:17.347
> 
> 标签：android, json

我有`json`这样的

```
{
"head": {
    "title": "Music",
    "status": "200"
},
"Info": [
    {
        "Name": "Mos Def",
        "Type": "music",
        "Results": [
            {
                "Name": "Talib Kweli",
                "Type": "music"
            },
            {
                "Name": "Black Star",
                "Type": "music"
            },
            {
                "Name": "Little Brother",
                "Type": "music"
            }
         ]
    }, 
    {
        "Name": "Mos Def",
        "Type": "Vehicles",
        "Results": [
            {
                "Name": "Chevy",
                "Type": "Car"
            },
            {
                "Name": "Ford",
                "Type": "Car"
            },
            {
                "Name": "Pontiac",
                "Type": "Car"
            }
         ]
      }
   ]
} 
```

在我的代码中，我可以获得 JSON Object Info 以在列表视图中显示类型“音乐，车辆”。我想如果我单击音乐它将显示 jsonObject 结果 - 在其他列表视图中。这个怎么解决？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:48:50.437

```
On click of setOnItemSelectedListener of your listView set adapter for another listView.

I worked on similar scenarion in my case I was getting json response for departments and corresponding Team for departments. Onclick of departments I have to show team list for selected department.I have used spinners for displaying items .Here is the sample code for that :

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item, mDeptmntList);
            dataAdapter
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            mDeptmntSpinner.setAdapter(dataAdapter);
            mDeptmntSpinner
                    .setOnItemSelectedListener(new OnItemSelectedListener() {

                        public void onItemSelected(AdapterView<?> arg0,
                                View arg1, int arg2, long arg3) {
                            int index = arg0.getSelectedItemPosition();
                            mSelectedDeptId = index;

                            ArrayAdapter<String> teamAdapter = new ArrayAdapter<String>(
                                    getApplicationContext(),
                                    android.R.layout.simple_spinner_item, mList
                                            .get(index));
                            teamAdapter
                                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                            mTeamSpinner.setAdapter(teamAdapter);
                        }

                        public void onNothingSelected(AdapterView<?> arg0) {

                        }
                    });

this was my json response :

{
   "departmentId":"1",
   "departmentname":"HR",
   "teamlist":[
      {"teamName":"HR_S",
      "teamName":"HR_P"}
   ]
}

Code for fetching this json is :
        JSONArray array = new JSONArray(JSON response);
        JSONObject obj;
        mDeptmntList = new ArrayList<String>();
        mTeam = new ArrayList<ArrayList<Integer>>();
        for (int i = 0; i < array.length(); i++) {
            obj = (JSONObject) array.get(i);
            mDeptmntList.add(i, obj.getString("departmentname"));
            JSONArray teamList = obj.getJSONArray("teamlist");
            int count = teamList.length();
            for (int j = 0; j < count; j++) {
                mTeamTempId.add(j,teamList.getJSONObject(j).getString("teamName"));
            }
        } 
```

# jquery - onclick 对话框应位于顶部

> ID：14272390
> 
> 赞同：1
> 
> 时间：2013-01-11T05:42:39.000
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我在[这里有 jquery-ui 对话框](http://net.tutsplus.com/tutorials/javascript-ajax/creating-a-windows-like-interface-with-jquery-ui/)

我已经对其进行了自定义，当对话框最小化时，它会进入左侧的容器并单击它恢复的容器中的特定对话框，但我希望它恢复到所有对话框的顶部，并且它必须显示在前方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:54:40.330

您可以通过以下方式将 zIndex 设置为对话框

```
$( ".selector" ).dialog( "option", "zIndex", 20 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:21:54.290

我找到了另一种不使用 Z-index 的方法

只需将以下代码行添加到 click 函数，它就可以正常工作。

```
dialog_element.moveToTop(true); 
```

其中diaolg_element 将是被点击的对话框。

干杯吉夫

# html - Chrome 在屏幕模式下加载我的打印样式表，这是一个错误吗？

> ID：14272392
> 
> 赞同：2
> 
> 时间：2013-01-11T05:42:45.257
> 
> 标签：html, css, media-queries

我假设在“屏幕”上下文中不会加载打印样式表，但是，样式表仍在 Chrome（Windows）中加载。这是一个错误，是我绊倒了，还是我的假设不正确，“打印”不应该加载？

![铬屏幕截图](../Images/2e7683803b94ecd321cbb744545ae4a3.png)

这是我的html：

```
<head>
  <link rel="stylesheet" href="all.css" type="text/css" media="all">
  <link rel="stylesheet" href="screen.css" type="text/css" media="screen">
  <link rel="stylesheet" href="print.css" type="text/css" media="print">
</head> 
```

使用 Chrome 24.0.1312.52 m（最新）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T06:03:59.503

这不是错误。当您链接到 DOM 中的样式表时，它将发出服务器请求并下载它。`media=screen`等是仅适用于样式表内样式的`media=print`条件 - 因此您将永远不会看到您的 print.css 样式应用于您的屏幕（反之亦然）。它不会阻止您的样式表被加载。现在，已知某些浏览器会在您指定时延迟加载`media=print`，以便您的页面先呈现，然后再加载 print.css - 但并非所有浏览器都这样做。

Crisp 的这篇博客文章[解释](http://crisp.tweakblogs.net/blog/6441/lazy-loading-print-stylesheets-part-ii.html)了如何使用 javascript 延迟加载打印样式表。这使得它仅在用户需要打印时才加载，不幸的是他使用的方法（`window.onbeforeprint`仅在 IE 和 Firefox 中支持 - [http://www.w3schools.com/tags/ev_onbeforeprint.asp](http://www.w3schools.com/tags/ev_onbeforeprint.asp)）。

# css-transitions - 带有 CSS 过渡的圆形悬停效果

> ID：14272395
> 
> 赞同：0
> 
> 时间：2013-01-11T05:42:51.753
> 
> 标签：css-transitions

你能给我指一个教程，它将提供与[此页面上的圆形图像类似的 CSS 悬停效果](http://www.realviewdigital.com/Portfolio/Catalogues.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:25:31.783

看看这个教程，我想这就是你要找的。 [http://tympanus.net/codrops/2012/08/08/circle-hover-effects-with-css-transitions/](http://tympanus.net/codrops/2012/08/08/circle-hover-effects-with-css-transitions/)

# assembly - 为什么这个 ARM 汇编代码会卡住？

> ID：14272397
> 
> 赞同：0
> 
> 时间：2013-01-11T05:43:05.643
> 
> 标签：assembly, arm

```
LOOP        
                MOV     R5, #604
                LDR     R3,=Addr_IOPIN
                LDR     R3,[R3]
                B       LOOP 
```

我似乎无法弄清楚为什么代码会卡住，但是当它到达 MOV r5, #604 行时，调试器不会继续前进。

# ibm-mq - 为什么我收到 websphere mq 错误代码 2195，我的适配器从 websphere mq 读取消息

> ID：14272399
> 
> 赞同：0
> 
> 时间：2013-01-11T05:43:18.260
> 
> 标签：ibm-mq

我已经为从 websphere mq 读取消息的适配器编写了代码，但是每当适配器从 websphere mq 读取消息时，每次它都会给出 2195 错误代码。我怎样才能看到 2195 发生的确切原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T15:57:18.733

您的类路径中有 com.ibm.mq.pcf.jar 吗？需要避免此消息。

# mysql - 在 sql 脚本中同时使用 sum 和 max

> ID：14272402
> 
> 赞同：5
> 
> 时间：2013-01-11T05:43:22.603
> 
> 标签：mysql, sql, database

我已经更新了查询，但现在出现的错误是：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 7 行的“AS max_parameter_value FROM tcs.parameter_values_archieve”附近使用正确的语法

```
 SELECT sum(max_pv) SUM_MAX,
       sum(min_pv) SUM_MIN,
       sum(max_pv) - sum(min_pv) DIFF
  FROM (SELECT t.parameter_value, t.created_date, t.meter_id, parameter_id
          FROM tcs.parameter_values_archieve t
         INNER JOIN (SELECT meter_id,
                           MAX(parameter_value) max_pv AS max_parameter_value
                      FROM tcs.parameter_values_archieve
                     where created_date like '2013-01-01%'
                       and created_date <= '2013-01-01 20:00:00'
                       and meter_id between 1 and 16
                       and parameter_id = 1
                     GROUP BY meter_id) q ON t.meter_id = q.meter_id
                                         AND t.parameter_value =
                                             q.max_parameter_value) MAX_TBL,
       (SELECT t.parameter_value, t.created_date, t.meter_id, parameter_id
          FROM tcs.parameter_values_archieve t
         INNER JOIN (SELECT meter_id,
                           MIN(parameter_value) min_pv AS max_parameter_value
                      FROM tcs.parameter_values_archieve
                     where created_date like '2013-01-01%'
                       and created_date >= '2013-01-01 20:00:00'
                       and meter_id between 1 and 16
                       and parameter_id = 1
                     GROUP BY meter_id) q ON t.meter_id = q.meter_id
                                         AND t.parameter_value =
                                             q.max_parameter_value) MIN_TBL; 
```

这是我为查找最大值而编写的查询。现在我必须总结所有`max(parameter_value)`. 同样，我必须找到`min(parameter_value)`for`created_date like '2013-01-01%' and created_date >='2013-01-01 08:00:00'`并减去这两个值。

怎么做？我正在使用mysql。

如果我像 foll 一样单独找到 sum，我会得到一个总和，但是当我执行“select sum(min_parameter_value)”时，它会引发字段未知错误。这个总和是否正确？我有疑问吗？

```
SELECT sum(parameter_value) from

(SELECT t.parameter_value,t.created_date,t.meter_id,parameter_id
    FROM tcs.parameter_values_archieve t
        INNER JOIN (SELECT meter_id, min(parameter_value) AS min_parameter_value
                        FROM tcs.parameter_values_archieve where created_date like'2013-01-07%'and created_date >='2013-01-07 08:00:00'and meter_id between 1 and 16 and parameter_id =1
                        GROUP BY meter_id) q
            ON t.meter_id = q.meter_id
                AND t.parameter_value = q.min_parameter_value)min_tbl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T05:55:53.340

试试这个，

```
SELECT sum(max_pv) SUM_MAX,
       sum(min_pv) SUM_MIN,
       sum(max_pv) - sum(min_pv) DIFF
  FROM (SELECT t.parameter_value, t.created_date, t.meter_id, parameter_id
          FROM tcs.parameter_values_archieve t
         INNER JOIN (SELECT meter_id,
                           MAX(parameter_value) max_pv AS max_parameter_value
                      FROM tcs.parameter_values_archieve
                     where created_date like '2013-01-01%'
                       and created_date <= '2013-01-01 20:00:00'
                       and meter_id between 1 and 16
                       and parameter_id = 1
                     GROUP BY meter_id) q ON t.meter_id = q.meter_id
                                         AND t.parameter_value =
                                             q.max_parameter_value) MAX_TBL,
       (SELECT t.parameter_value, t.created_date, t.meter_id, parameter_id
          FROM tcs.parameter_values_archieve t
         INNER JOIN (SELECT meter_id,
                           MIN(parameter_value) min_pv AS max_parameter_value
                      FROM tcs.parameter_values_archieve
                     where created_date like '2013-01-01%'
                       and created_date >= '2013-01-01 20:00:00'
                       and meter_id between 1 and 16
                       and parameter_id = 1
                     GROUP BY meter_id) q ON t.meter_id = q.meter_id
                                         AND t.parameter_value =
                                             q.max_parameter_value) MIN_TBL; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T08:01:09.977

```
SELECT SUM(CASE WHEN t.parameter_value = q.max_parameter_value THEN t.parameter_value END), 
       SUM(CASE WHEN t.parameter_value = q.min_parameter_value THEN t.parameter_value END),
       SUM(CASE WHEN t.parameter_value = q.max_parameter_value THEN t.parameter_value END) - 
       SUM(CASE WHEN t.parameter_value = q.min_parameter_value THEN t.parameter_value END) AS substract
FROM tcs.parameter_values_archieve t INNER JOIN
 (SELECT meter_id, MAX(CASE WHEN created_date <= '2013-01-01 20:00:00' THEN parameter_value END) AS max_parameter_value, 
                   MIN(CASE WHEN created_date >= '2013-01-01 08:00:00' THEN parameter_value END) AS min_parameter_value 
  FROM  parameter_values_archieve
  WHERE created_date like '2013-01-01%' and meter_id between 1 and 16 and parameter_id = 1
  GROUP BY meter_id) q ON t.meter_id = q.meter_id 
```

简单示例[**SQLFiddle**](http://sqlfiddle.com/#!2/95248/14/0)

# install4j - createDesktopLinkAction 不适用于非英语语言

> ID：14272403
> 
> 赞同：0
> 
> 时间：2013-01-11T05:43:24.307
> 
> 标签：install4j

在 linux 上，在非英语语言环境中，createDesktopLinkAction 不起作用。在英语语言环境中，createDesktopLinkAction 运行良好。

是错误吗？还是会在未来有所改善？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:18:06.170

在 Linux 上，*添加桌面链接*操作会在每个启动器`.desktop`的目录中创建一个文件。`$HOME/Desktop`这适用于与 freedesktop 兼容的窗口管理器。

如果该操作不成功，则`.install4j/installation.log`文件中将出现错误。

# iphone - 如何将所有支持的语言从 iphone 库中列出到应用程序中

> ID：14272404
> 
> 赞同：0
> 
> 时间：2013-01-11T05:43:27.757
> 
> 标签：iphone, ios5, nslocalizedstring

我正在创建一个应用程序，我需要将所有支持的语言从库中列出到 tableview 中。这样用户就无需进入设置并更改语言。如果他愿意，他可以直接从应用程序更改它。我已经搜索了很多，但不知道它是否可能。所以请任何人都可以帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:53:28.010

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSArray *languages = [defaults objectForKey:@"AppleLanguages"]; 
```

这将为您提供 Apple 首选的语言。但我不知道支持的语言。可能这是您正在搜索的列表

```
for (NSString *language in languages) {
    NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:language] ;
    displayname = [locale displayNameForKey:NSLocaleIdentifier value:language];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:56:30.027

您可以为应用程序生成不同语言的 pList 文件。

我正在向您解释本地化语言的示例代码。

```
NSDictionary *dictLang;

-(void)localization_language{

    NSString *errorDesc = nil;
    NSPropertyListFormat format;
    NSString *rootPath;

    if (lang == 1) {
       rootPath = [[NSBundle mainBundle] pathForResource:@"FRA" 
                                               ofType:@"plist"];
    }
    else if(lang == 0){
       rootPath = [[NSBundle mainBundle] pathForResource:@"ENG" 
                                               ofType:@"plist"];
    }

    NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:rootPath];    
    dictLang = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
    NSLog(@"PLIST retrive:%@",plistXML);    

    if (!dictLang) {
       NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
    }
} 
```

此代码根据 lang 变量查找 pList 文件。0 代表法国，1 代表英语。

然后，从字典中设置值。

```
lbl1.text =[dictLang objectForKey:@"Key1"];
lbl2.text =[dictLang objectForKey:@"Key2"]; 
```

它会显示存储在 pList 文件中的值。

希望它适用于语言全球化。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:04:24.713

制作一个 Language.plist 文件并制作一个语言字典，将您的默认文本作为键

然后在Defines.h中定义这个宏

```
#define LocalizedString(key)     [[[NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Language" ofType:@"plist"]] valueForKey:[NSString stringWithFormat:@"%d",LANGUAGE_ID]] valueForKey:key] 
```

以编程方式设置您的全局语言 ID，并像这样使用 LocalizedString(@"Hi")

根据 lang Id 为键 hi 选择的翻译值将被显示。

# android - 如何根据api级别应用主题

> ID：14272411
> 
> 赞同：1
> 
> 时间：2013-01-11T05:44:06.367
> 
> 标签：android

![在此处输入图像描述](../Images/2a3b240cd4c33a967650a0fc6cbdb5e8.png)

当使用`android:theme="@android:style/Theme.Holo.Light.Dialog.NoActionBar"`拉伸的图像时，但是当使用`android:theme="@android:style/Theme.NoTitleBar`这样的图像时，完美地显示了为什么这个图像是拉伸的？

```
<RelativeLayout
    android:id="@+id/journal_log_actionbar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/transparent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="10dp"
        android:text="@string/journal_entry"
        android:textColor="@android:color/black" />

    <Button
        android:id="@+id/journal_actionbar_menu_add"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dp"
        android:layout_toLeftOf="@+id/journal_actionbar_menu_save"
        android:background="@drawable/btn_small_add" />

    <Button
        android:id="@+id/journal_actionbar_menu_save"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/journal_actionbar_menu_delete"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dp"
        android:background="@drawable/btn_small_save" />

    <Button
        android:id="@+id/journal_actionbar_menu_delete"
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dp"
        android:layout_centerVertical="true"
        android:background="@drawable/btn_trash" />
</RelativeLayout> 
```

但是当使用`android:theme="@android:style/Theme.NoTitleBar`这种类型的图像 时![在此处输入图像描述](../Images/043408c16800cab36c3435060bc62998.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:27:17.687

换个主题试试

```
<RelativeLayout
android:id="@+id/journal_log_actionbar"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@color/transparent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginLeft="10dp"
    android:text="@string/journal_entry"
    android:textColor="@android:color/black" />

<ImageView
    android:id="@+id/journal_actionbar_menu_add"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginRight="10dp"
    android:layout_toLeftOf="@+id/journal_actionbar_menu_save"
    android:src="@drawable/btn_small_add" />

<ImageView
    android:id="@+id/journal_actionbar_menu_save"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/journal_actionbar_menu_delete"
    android:layout_centerVertical="true"
    android:layout_marginRight="10dp"
    android:src="@drawable/btn_small_save" /> 
```

# c# - 关闭或删除处于打开模式的文件

> ID：14272414
> 
> 赞同：3
> 
> 时间：2013-01-11T05:44:20.493
> 
> 标签：c#, file

我正在通过下面的代码编写一个 CSV 文件，

```
 using(StreamWriter sw = new StreamWriter(AbsolutePathAndFileName))
  {
        //write header line
        int iColCount = TheDataTable.Columns.Count;
        for (int i = 0; i < iColCount; i++)
        {
            sw.Write(TheDataTable.Columns[i]);
            if (i < iColCount - 1)
            {
                sw.Write(separator);
            }
        }
        sw.Write(sw.NewLine);

        //write rows
        foreach (DataRow dr in TheDataTable.Rows)
        {
            for (int i = 0; i < iColCount; i++)
            {
                if (!Convert.IsDBNull(dr[i]))
                {
                    string data = dr[i].ToString();
                    data = data.Replace("\"", "\\\"").Replace(",", " ");
                    sw.Write(data);
                }
                if (i < iColCount - 1)
                {
                    sw.Write(separator);
                }
            }
            sw.Write(sw.NewLine);
        }
        sw.Close();
    } 
```

之后，我将打开该文件进行审查。现在，文件处于打开模式。

但是，当我再次重新生成该文件时，它不允许我并说该文件正在被另一个进程使用。

这个问题有什么解决办法吗？我需要删除或关闭该文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:49:12.523

您应该包含`StreamWriter`一个`using`声明以确保它已被处理。

您是否在需要时以只读模式打开文件？

```
using (FileStream f = File.Open("c:\\software\\code.txt", FileMode.Open, FileAccess.Read, FileShare.None)
{

} 
```

# javascript - 我怎样才能找到这个 Json 对象的长度

> ID：14272416
> 
> 赞同：3
> 
> 时间：2013-01-11T05:44:20.563
> 
> 标签：javascript, jquery, json

我想找到这个 JSON 对象的长度，所以有人告诉我如何获得 JSON 对象的长度……意味着我想知道这个 json 对象包含多少数据。

```
var ddData = [{ "01":"United States",
                "02":"United Kingdom",
                "03":"Aruba",
                "04":"United Kingdom",
                "05":"Aruba",
                "06":"Bahrain",
                "07":"United Kingdom",
                "08":"Algeria",
                "09":"Andorra",
                "10":"American Samoa",
                "11":"United States"
             }] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T05:48:57.967

您可以使用`Object.keys`方法来获取对象键。
由于 ddData 是一个`array`，并且第一个索引包含一个对象，您可以这样做：

```
Object.keys(ddData[0]).length; 
```

但是，`Object.keys`不适用于[旧浏览器](http://kangax.github.com/es5-compat-table/)。

为此，您可以遍历对象并增加一个变量以获取该对象的长度。

```
var count = 0;
for(var i in ddData[0]) {
    count++;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T06:02:18.057

您可以使用`Object.key`s 来返回指定集合的​​长度。[JS小提琴](http://jsfiddle.net/LzSZC/1/)。

[（来自此处](http://kangax.github.com/es5-compat-table/)的浏览器支持）（[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)有关 Object.keys 的文档，包括可以添加到非 ECMA5 浏览器的方法）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T05:52:01.460

你可以简单地这样做而不是调用函数

```
var key, count = 0;
for(key in ddData[0]) {
  count++;
}

console.log(count + " is size of the json"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T05:51:16.480

```
var length=0;
for(attr in ddData[0]){
     length++;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T05:51:48.110

```
var json = JSON.parse(ddData);
for(i=0;i<json.length;i++)
{
alert(json[i].length);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T06:12:46.067

现在我得到了答案......

```
var Data = { "01":"United States",
            "02":"United Kingdom",
            "03":"Aruba",
            "04":"United Kingdom",
            "05":"Aruba",
            "06":"Bahrain",
            "07":"United Kingdom",
            "08":"Algeria",
            "09":"Andorra",
            "10":"American Samoa",
            "11":"United States"
         }

var count = 0;
for(x in Data){
    count++;
}
console.log('cnt',count) 
```

# jquery - jquery实时更新resizeable()

> ID：14272417
> 
> 赞同：1
> 
> 时间：2013-01-11T05:44:29.503
> 
> 标签：jquery, html

我正在寻找一种在调整 div 大小时实时更新某些文本的方法。现在，这适用于在您完成调整 #img1 div 的大小后更新文本，但我希望像素的高度和宽度可以在您拖动 jquery 可调整大小的句柄时显示和***更新***。

```
 $( "#img1" ).resizable({
        grid: [10,10],
      });

    $('#img1').mouseup(function() {
      img1width = $("#img1").width();
      img1height = $("#img1").height();

      $( "#img1-height" ).html("H: "+img1height+"px");
      $( "#img1-width" ).html("W: "+img1width+"px");
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:04:20.273

.resizable 提供调整大小：回调

```
$( "#img1" ).resizable({
    grid: [10,10],
    resize: function(event, ui){
      var img = event.target;
      //do your stuff
    }
}); 
```

# delphi - 如何使用 wglCreateContextAttribsARB wglSwapBuffers

> ID：14272418
> 
> 赞同：1
> 
> 时间：2013-01-11T05:44:33.573
> 
> 标签：delphi, opengl, delphi-xe2

试图用delphi来精简OpenGl ..但我有这个小程序使用我被告知过时的代码。它只是一个简单的程序，运行时将表单变为绿色。但是我想使用 wglSwapBuffers 而不是 glFinish，但是当我用 wglSwapBuffers 替换 glFinish 并将 PFD_DOUBLEBUFFER 添加到 PFD 的标志时，它不会重新调整它。我在用途中遗漏了什么吗？

其次，我知道我的 OpenGL 上下文严重过时，那么我该如何使用 wglCreateContextAttribsARB 来解决这个问题？

```
 unit First1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs,OpenGL,Menus;

type
  TForm2 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure FormPaint(Sender: TObject);
  private
    { Private declarations }
    GLContext   :   HGLRC;
    errorCode : GLenum;
  public
    { Public declarations }
  end;

var
  Form2: TForm2;

implementation

{$R *.dfm}

procedure TForm2.FormCreate(Sender: TObject);
var
  pfd: TPixelformatDescriptor;
  FormatIndex: integer;
begin
  fillchar(pfd,SizeOf(pfd),0);
  with pfd do
  begin
    nSize       := SizeOf(pfd);
    nVersion    := 1; {The current version of descriptor is 1};
    dwFlags     := PFD_DRAW_TO_WINDOW or PFD_SUPPORT_OPENGL or PFD_DOUBLEBUFFER;
    iPixelType  := PFD_TYPE_RGBA;
    cColorBits  := 24;  {Support 24bit Color}
    cDepthBits  := 32;  {Depth of z-buffer}
    iLayerType  := PFD_MAIN_PLANE;
  end; {width}
  FormatIndex  := ChoosePixelFormat(Canvas.Handle,@pfd);
  SetPixelformat(Canvas.Handle,formatIndex,@pfd);
  GLContext := wglCreateContext(Canvas.Handle);
  wglMakeCurrent(Canvas.Handle,GLContext);
end; {FormCreate}

procedure TForm2.FormDestroy(Sender: TObject);
begin
  wglMakeCurrent(Canvas.Handle,0);
  wglDeleteContext(GLContext);
end;

procedure TForm2.FormPaint(Sender: TObject);
begin
 {background}
  glClearColor(0.0,0.4,0.0,0.0);
  glClear(GL_COLOR_BUFFER_BIT);
  wglSwapBuffers;

 {error checking}
  errorCode := glGetError;
  if errorCode<>GL_NO_ERROR  then
    raise Exception.Create('Error in Paint'#13+gluErrorString(errorCode));
end;

end. 
```

# html - 网页开始在移动设备上放大

> ID：14272420
> 
> 赞同：60
> 
> 时间：2013-01-11T05:44:37.123
> 
> 标签：html, viewport

我在我的网页上使用此代码

```
<meta name="viewport" content="width=1000, initial-scale=1.0, maximum-scale=1.0"> 
```

我认为初始比例会确保网页被缩小，但事实并非如此。有任何想法吗？

我试过这个：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
```

但是，我需要将宽度设置为 1000 像素，否则它看起来不正确。

## 回答：

```
<meta name="viewport" content="width=1000; user-scalable=0;" /> 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-14T11:21:38.180

`initial-scale=1.0`告诉浏览器将缩放级别设置为正常（即不放大或缩小）。你只需要`width=1000`：

```
<meta name="viewport" content="width=1000"> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-14T09:32:47.933

尝试这个：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

或者

```
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" /> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-02T21:00:18.493

我也认为视口是问题，但经过测试，我认为视口不是问题。

我的问题是 CSS：固定宽度，或宽度：100% 而不是宽度：自动。因此，如果您发现视口不是问题 - CSS 可能是您的下一个猜测。

希望有帮助！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-03-24T11:52:09.177

答案已经在我们使用的网站上。

如果您检查元素`StackOverflow`并查找`meta` `viewport`它。你会看见

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0"> 
```

因此，您正在设置`width`和`height`取决于哪个是 CSS 像素中屏幕的宽度和高度，比例为 100%。该`initial-scale`属性控制页面首次加载时的缩放级别。最后`minimum-scale`是视口的可选属性，它定义了网站用户能够进行的最小缩放。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-08-06T10:57:46.647

在我的情况下，我只需添加以下代码即可成功停止屏幕缩放，而无需额外添加。

```
 <meta name="viewport" content="width=device-width"> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-11-01T14:24:20.440

上面的答案都不适合我，我设法找出答案。

初始元标记的初始比例为 1。

要在不放大的情况下加载网站，您必须将初始比例从 1 更改为 0。

```
<meta name="viewport" content="width=device-width, initial-scale=0, maximum-scale=1"> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-15T14:47:57.357

我试着玩

```
<meta name="viewport" content="width=1000, initial-scale=1.0, maximum-scale=1.0"> 
```

看来我的网站确实以比例 1 呈现了 1000 像素宽。但是，由于我的手机屏幕没有该网站的空间，该网站继续在视口之外，导致网站被放大的感觉。

设置此值会使站点缩小 1000px 宽：

```
 <meta name="viewport" content="width=1000"> 
```

这是你的问题吗？

顺便说一句，对于移动网站来说，1000px 听起来有点宽，但我认为这个网站最初不是为移动设备制作的？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-17T00:28:44.627

如果您使用带有引导链接的 stylesheet.css，请确保是更新的，通常它会更新，并且当它确实导致旧版本出错时。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-27T19:07:41.170

你可以使用这个。

```
 <meta name="viewport" content="width=100%"> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-29T18:41:00.877

我的问题是因为我在 css 中添加了最小宽度的主体。当我删除它时它可以工作

```
body
{
   padding: 0;
   margin:0;
   min-width: 800px;
   color: black;
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-01-11T06:16:20.163

我有一个类似的问题。尝试这个：

```
<meta name="viewport" content="width=1000; initial-scale=1, maximum-scale=1, minimum-scale=1"/> 
```

我认为这与最小规模有关，但我不太确定。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-03-15T07:46:00.713

试试这会帮助你...这对我有用

```
 <meta name="viewport" initial-scale=1.0 content="width=100%"> 
```

# java - 为什么继续对不可变对象使用 getter？

> ID：14272425
> 
> 赞同：16
> 
> 时间：2013-01-11T05:45:03.930
> 
> 标签：java, c++, oop, object, immutability

使用不可变对象已经变得越来越普遍，即使手头的程序永远不会并行运行。然而我们仍然使用 getter，每个字段需要 3 行样板代码，每次访问需要 5 个额外字符（使用您最喜欢的主流 OO 语言）。尽管这看起来微不足道，而且许多编辑器无论如何都减轻了程序员的大部分负担，但这似乎仍然是不必要的努力。

继续使用访问器而不是直接访问不可变对象的原因是什么？具体来说，强制用户使用访问器（对于客户端或库编写器）有什么好处，如果是，它们是什么？

* * *

请注意，我指的是*不可变*对象，与这个[问题](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)不同，它通常指的是对象。需要明确的是，不可变对象没有设置器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T07:41:01.427

我会说这实际上取决于语言。如果你不介意的话，我会稍微谈谈 C#，因为我认为它有助于回答这个问题。

我不确定你是否熟悉 C#，但它的设计、工具等非常直观且对程序员友好。
C#（也存在于 Python、D 等）的一个特性就是*属性*；属性基本上是一对方法（getter 和/或 setter），它们在外部看起来就像一个实例字段：您可以分配给它，并且可以像实例变量一样从中读取。
当然，在内部，它是一种方法，它可以做任何事情。

但是 C# 数据类型有时也有 GetXYZ() 和 SetXYZ() 方法，有时它们甚至直接公开它们的字段......这就引出了一个问题：你如何选择什么时候做？

[Microsoft对 C# 属性以及何时使用 getter/setter有*很好的*](http://msdn.microsoft.com/en-us/library/ms182181.aspx)指导：

> 属性应该表现得好像它们是字段一样；如果方法不能，则不应将其更改为属性。在以下情况下，方法优于属性：
> 
> *   该方法执行耗时的操作。该方法明显比设置或获取字段值所需的时间慢。
> *   该方法执行转换。访问字段不会返回其存储的数据的转换版本。
> *   该`Get`方法具有可观察到的副作用。检索字段的值不会产生任何副作用。
> *   执行顺序很重要。设置字段的值不依赖于其他操作的发生。
> *   连续两次调用该方法会产生不同的结果。
> *   该方法是静态的，但返回一个可由调用者更改的对象。检索字段的值不允许调用者更改该字段存储的数据。
> *   该方法返回一个数组。

**请注意**，这些指南的*全部目标*是使所有属性在外部看起来像字段。

因此，使用属性而不是字段的唯一真正原因是：

1.  你想要封装，yada yada。
2.  您需要验证输入。
3.  您需要从其他地方检索数据（或将数据发送到）。
4.  您需要前向二进制 (ABI) 兼容性。我是什么意思？如果您在某个时候决定需要添加某种验证（例如），那么将字段更改为属性并重新编译您的库将*破坏*任何其他依赖它的二进制文件。但是，在源代码级别，什么都不会改变（除非您正在获取地址/引用，否则您可能不应该这样做）。

现在让我们回到 Java/C++ 和不可变数据类型。

其中哪一点适用于我们的场景？

1.  有时它不适用，因为不可变数据结构的全部意义在于存储数据，而不是具有（多态）行为（例如，字符串数据类型）。
    如果您要隐藏数据并且什么都不做，那么存储数据有什么意义呢？
    但有时它确实适用（例如，假设您有一个不可变的树）——您可能不想公开元数据。
    但是在那种情况下，您显然会隐藏您不想公开的数据，而且您一开始就不会问这个问题！:)
2.  不适用；没有需要验证的输入，因为没有任何变化。
3.  不适用，否则*不能*使用字段！
4.  可能适用，也可能不适用。

现在 Java 和 C++ 没有属性，但是方法取代了它们——所以上面的建议仍然适用，没有属性的语言的规则变成：

### 如果 (1) 您不需要 ABI 兼容性，*并且*(2) 您的 getter 的行为就像一个字段（即它满足上面 MSDN 文档中的要求），那么您应该使用字段而不是 getter。

要意识到的重要一点是，这些都不是哲学的。所有这些指南都是基于*程序员的期望*。显然，最终的目标是 (1) 完成工作，以及 (2) 保持代码的可读性/可维护性。已经发现上面的指南有助于实现这一点——你的目标应该是做任何适合你的事情来实现这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T05:54:11.160

封装有几个有用的目的，但最重要的一个是*信息隐藏*。通过将字段隐藏为实现细节，您可以保护对象的客户端不依赖于实际存在的字段。例如，您的对象的未来版本可能想要延迟计算或获取值，并且只有在您可以拦截读取字段的请求时才能做到这一点。

也就是说，没有理由让 getter 变得特别冗长。特别是在 Java 世界中，即使“get”前缀非常根深蒂固，您仍然会发现以值本身命名的 getter 方法（即方法`foo()`而不是`getFoo()`），这是节省一些人物。在许多其他 OO 语言中，您可以定义一个 getter 并仍然使用看起来像字段访问的语法，因此根本没有额外的冗长。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T10:54:39.843

不可变对象应该使用直接字段访问来保持**一致性**，因为它允许设计对象**完全按照客户期望的方式执行。**

考虑一个系统，其中每个可变字段都隐藏在访问器后面，而每个不可变字段都没有。现在考虑以下代码片段：

```
class Node {
    private final List<Node> children;

    Node(List<Node> children) {
        this.children = new LinkedList<>(children);
    }

    public List<Node> getChildren() {
        return /* Something here */;
    }
} 
```

在不知道 的确切实现的情况下`Node`，正如您在按合同设计时必须做的那样，在您看到的任何地方`root.getChildren()`，您只能假设正在发生以下三件事之一：

*   没有。该字段`children`按原样返回，您不能修改列表，因为您会破坏 Node.js 的不变性。为了修改`List`你必须复制它，一个 O(n) 操作。
*   它被复制，例如：`return new LinkedList<>(children);`. 这是一个 O(n) 操作。您可以修改此列表。
*   返回一个不可修改的版本，例如：`return new UnmodifiableList<>(children);`. 这是一个 O(1) 操作。同样，为了修改`List`它，你必须复制它，一个 O(n) 操作。

在所有情况下，修改返回的列表都需要 O(n) 操作来复制它，而只读访问需要 O(1) 或 O(n) 之间的任何地方。这里要注意的重要一点是，按照合同设计，您*无法知道库编写者选择了哪种实现*，因此必须假设最坏的情况，O(n)。因此，**O(n) 访问和 O(n) 创建您自己的可修改副本。**

现在考虑以下几点：

```
class Node {
    public final UnmodifiableList<Node> children;

    Node(List<Node> children) {
        this.children = new UnmodifiableList<>(children);
    }
} 
```

现在，无论您在哪里看到`root.children`，都存在一种可能性，即它是一个`UnmodifiableList`，因此**您可以假设 O(1) 访问和 O(n) 用于创建本地可变副本。**

显然，在后一种情况下，可以得出关于访问该字段的性能特征的结论，而在前一种情况下唯一可以得出的结论是，在最坏的情况下，也就是我们*必须*假设的情况下，性能远远不够比直接字段访问更糟糕。*提醒一下，这意味着程序员必须在每次访问*时考虑 O(n) 复杂度函数。

* * *

总而言之，在这种类型的系统中，无论何时看到一个 getter，客户端都会自动知道该 getter 对应于一个可变字段，或者该 getter 执行某种操作，无论是耗时 O(n) 的防御性复制操作、延迟初始化、转换或其他方式。每当客户看到直接字段访问时，他们立即知道访问该字段的性能特征。

通过遵循这种风格，程序员可以推断出更多关于他/她正在与之交互的对象提供的*合约的信息。*这种风格也促进了统一的不变性，因为只要您将上述代码片段更改`UnmodifiableList`为 interface `List`，直接字段访问就允许对象发生变异，从而迫使您的对象层次结构被仔细设计为从上到下不可变。

好消息是，您不仅获得了不变性的所有好处，还能够推断出无论在何处访问字段的性能特征，*而无需查看实现并确信它永远不会改变。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-13T06:35:26.307

Joshua Bloch，在[Effective Java（第 2 版）](https://rads.stackoverflow.com/amzn/click/com/0321356683) “第 14 条：在公共类中，使用访问器方法，而不是公共字段”，对公开不可变字段有以下说法：

> 虽然公共类直接公开字段从来都不是一个好主意，但如果字段是不可变的，则危害较小。如果不更改其 API，则无法更改此类的表示形式，并且在读取字段时无法执行辅助操作，但可以强制执行不变量。

并将本章总结为：

> 总之，公共类不应该公开可变字段。公共类公开不可变字段的危害较小，尽管仍然值得怀疑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T05:54:58.513

您可以拥有公共的最终字段（以模仿某种不变性），但这并不意味着被引用的对象不能改变它们的状态。在某些情况下，我们仍然需要防御副本。

```
 public class Temp {
    public final List<Integer> list;

    public Temp() {
        this.list = new ArrayList<Integer>();
        this.list.add(42);
    }

   public static void foo() {
      Temp temp = new Temp();
      temp.list = null; // not valid
      temp.list.clear(); //perferctly fine, reference didn't change. 
    }
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-09T14:54:43.607

> 继续使用访问器而不是直接访问不可变对象的原因是什么？具体来说，强制用户使用访问器（对于客户端或库编写器）有什么好处，如果是，它们是什么？

您听起来像一个程序程序员，在问为什么您不能直接访问字段，而必须创建访问器。主要问题是，即使你提出问题的方式也是错误的。这不是 OO 设计的工作方式——您通过它的方法设计对象行为并将其公开。然后，如有必要，您可以创建需要实现该行为的内部字段。所以这样说：“我正在创建这些字段，然后通过 getter 公开每个字段，这很冗长”是不正确的 OO 设计的明显标志。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T05:46:37.463

封装字段然后仅通过 getters 方法将其公开是一种 OOP 实践。如果您直接公开字段，这意味着您必须将其公开。将字段公开并不是一个好主意，因为它会暴露对象的内部状态。

因此，公开您的字段/数据成员不是一个好习惯，它违反了 OOP 的封装原则。我还要说它不是特定于不可变对象的；对于非不可变对象也是如此。

**编辑** 正如@Thilo 指出的那样；另一个原因：也许您不需要公开字段的存储方式。

谢谢@Thilo。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-09T14:40:56.867

在 Java 程序中继续生成（我希望现在没有人手工编写）getter 的一个非常实际的原因，即使是对于不可变的“值”对象，在我看来，这是不必要的开销：

**许多库和工具依赖于旧的 JavaBeans 约定**（或者至少是其中的 getter 和 setter 部分）。

这些使用反射或其他动态技术通过 getter 访问字段值的工具无法处理访问简单的公共字段。JSP 是我想到的一个例子。

现代 IDE 也使得一次为一个或多个字段生成 getter 以及在字段名称更改时更改 getter 名称变得微不足道。

所以我们只是继续为不可变对象编写 getter。

# javascript - 免疫 / Unclikable 嵌套 div

> ID：14272429
> 
> 赞同：0
> 
> 时间：2013-01-11T05:45:53.097
> 
> 标签：javascript, html

我正在创建一个嵌套的 div，如下面的代码

```
<body>
  <div style='border:solid 1px red' onclick='alert("hi")'>
  Hawaii
    <div style='border:solid 1px blue;margin:10px;' onclick="alert('haha');return false;">Aloha</div>
  </div>
</body> 
```

我想在点击 aloha 的 div 但不冒泡到夏威夷 div onclick 事件时显示哈哈，有没有办法实现它？

编辑：我忘了提到我知道事件冒泡，但是有没有办法停止单个元素的冒泡/取消传播？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:49:30.963

[event.stopPropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)在现代浏览器中执行此操作。

在版本 9 之前的 Internet Explorer 中，您需要改为设置`event.cancelBubble = true`。

例子：

```
<div style='border:solid 1px blue;margin:10px;' onclick="alert('haha'); event.stopPropagation(); return false;">Aloha</div> 
```

如果您避免将 Javascript 放在 HTML 属性中，您可以做得更好。

# ruby-on-rails-3 - Rspec 控制器私有方法

> ID：14272430
> 
> 赞同：1
> 
> 时间：2013-01-11T05:45:54.777
> 
> 标签：ruby-on-rails-3, rspec2

是否可以在控制器中测试私有方法？这实质上决定了记录是否应该保存在数据库中。

```
def create
    logger.debug "inside CREATE"
    @schedule = Schedule.new(params[:schedule])

    if is_valid_schedule # <-- this is the private method
        if @schedule.save
            flash[:success] = "New schedule entry added!"
            redirect_to @schedule
        else
            render 'new'
        end
    else
        flash.now[:error] = "Schedule has an overlap"
        render 'new'
    end
end 
```

我的测试如下所示：

```
describe "POST #create" do

        let!(:other_schedule) { FactoryGirl.create(:schedule) }

        before(:each) { get :new }

        describe "with valid attributes" do
            it "saves the new schedule in the database" do

                expect{ post :create, schedule: other_schedule }.to change(Schedule, :count).by(1)

            end

            it "redirects to the :show template" do
                post :create, schedule: other_schedule
                response.should redirect_to other_schedule
                flash[:success].should eq("New schedule entry added!")
            end
        end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:24:12.923

在您创建方法测试期间，`is_valid_schedule`调用并测试私有方法。如果你想单独测试这个私有方法。看下面的例子：

```
class Admin::MembersController < Admin::BaseController
  #some code
  private
   def is_valid_example
     @member.new_record?
   end
end 
```

并测试私有方法：

```
require 'spec_helper'
describe Admin::MembersController do
 .... 
 #some code
  describe "test private method" do
   it "should be valid" do
     member = FactoryGirl.create(:member)
     controller.instance_variable_set('@member', member)
     controller.send(:is_valid_example).should be(false)
   end
  end
end 
```

# activerecord - 建立模型 YII activerecord 的特定关系

> ID：14272438
> 
> 赞同：0
> 
> 时间：2013-01-11T05:46:52.960
> 
> 标签：activerecord, yii, models, yii-relations

我正在尝试使用 CGridView 显示车辆模型。

为了显示 Fld7465RRef 引用列的值，需要以下 sql 选择：

```
select VUF._Fld7468_S as Loading_Time_To_DLR  
FROM Vehicles as Vehicles  
left join (_InfoReg7464 as VUF                 
inner join _Chrc7246 as CFU
on VUF._Fld7467RRef = CFU._IDRRef                  
and CFU._Description ='Vehicle uploading for DLRTime')                 
on Vehicles._IDRRef =  VUF._Fld7465RRef 
```

我找不到为此查询建立关系的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:40:54.317

One way to do it would be [DAO](http://www.yiiframework.com/doc/guide/1.1/en/database.dao):

```
$mySqlString = "
    select VUF._Fld7468_S as Loading_Time_To_DLR  
    FROM Vehicles as Vehicles  
    left join (_InfoReg7464 as VUF                 
    inner join _Chrc7246 as CFU
    on VUF._Fld7467RRef = CFU._IDRRef                  
    and CFU._Description ='Vehicle uploading for DLRTime')                 
    on Vehicles._IDRRef =  VUF._Fld7465RRef
";
$command = Yii::app()->db->createCommand($mySqlString); 
$aResult = $command->query()->readAll(); 
```

Of course, you should bind your parameters, if there are any, with a statement like this:

```
$command->bindParam(":userID", $userID, PDO::PARAM_STR); 
```

The other way is [query-builder](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)

# driver - 如何在内核模型 windows-7 x64 中安装我自己的驱动程序

> ID：14272443
> 
> 赞同：0
> 
> 时间：2013-01-11T05:47:31.977
> 
> 标签：driver, windows-7-x64, wdk

> **可能重复：**
> [我自己的驱动程序是否需要在 Windows 7 x64 中进行数字签名](https://stackoverflow.com/questions/14251481/whether-my-own-driver-needs-digital-signing-in-windows-7-x64)

我已经创建了在 Windows 7 x64 上挂钩 ssdt 的驱动程序。除了 Windows 驱动程序工具包（WDK）之外，还有其他代码或命令可以在内核模式下安装驱动程序吗？

# java - 使用 XOM 生成带有名称空间的部分 XML

> ID：14272447
> 
> 赞同：0
> 
> 时间：2013-01-11T05:48:07.750
> 
> 标签：java, xml, xml-namespaces, xom

虽然描述看起来很长，但实际上很简单。

## 我需要的

我有以下 xml 文档

```
<?xml version="1.0" encoding="UTF-8"?>
<atom:feed xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:atom="http://www.w3.org/2005/Atom" type="application/atom+xml;type=feed">
  <atom:link rel="self" href="http://hostname/thirdparty/playlist"/>
  <atom:id>vuter id</atom:id>
  <atom:title>Untitled</atom:title>
  <opensearch:totalResults>249</opensearch:totalResults>
  <opensearch:startIndex>1</opensearch:startIndex>
  <opensearch:itemsPerPage>249</opensearch:itemsPerPage>
  <atom:entry type="application/atom+xml;type=entry">
    <atom:id>12345678</atom:id>
    <atom:title>Playlist example 1</atom:title>
    <atom:link rel="self" type="application/atom+xml;type=entry" href="http://hostname/thirdparty/playlist/2101211130000011141"/>
    <dcterms:identifier>2101211130000011141</dcterms:identifier>
  </atom:entry>
  <atom:entry type="application/atom+xml;type=entry">
    <atom:id>12345678</atom:id>
    <atom:title>Playlist example 2</atom:title>
    <atom:link rel="self" type="application/atom+xml;type=entry" href="http://hostname/thirdparty/playlist/2101211090000000341"/>
    <dcterms:identifier>2101211090000000341</dcterms:identifier>
  </atom:entry>
</atom:feed> 
```

请注意，xml 基本上包含三个命名空间

*   **原子**：[http ://www.w3.org/2005/Atom](http://www.w3.org/2005/Atom)
*   **dcterms**： http: [//purl.org/dc/terms/](http://purl.org/dc/terms/)
*   **[开放搜索： http](http://a9.com/-/spec/opensearch/1.1/) : **//a9.com/-/spec/opensearch/1.1/****

 **现在我需要生成另一个单个**atom:entry**节点的 xml 文档。像下面

```
<atom:entry type="application/atom+xml;type=entry" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:atom="http://www.w3.org/2005/Atom">
    <atom:id>12345678</atom:id>
    <atom:title>Playlist example 1</atom:title>
    <atom:link rel="self" type="application/atom+xml;type=entry" href="http://hostname/thirdparty/playlist/2101211130000011141"/>
    <dcterms:identifier>2101211130000011141</dcterms:identifier>
</atom:entry> 
```

* * *

## 我得到了什么

我正在使用[XOM](http://www.xom.nu/apidocs/)，到目前为止我尝试过

```
Element rootElem = new Builder().build(ins).getRootElement();
xc = XPathContext.makeNamespaceContext(rootElem);    
Element firstEntry = (Element) rootElem.query("atom:entry", xc).get(0); 
Document doc = new Document((Element)firstEntry.copy());
System.out.println(doc.toXML()); 
```

而且我只使用一个命名空间声明来关注 xml。如下所示。

```
<?xml version="1.0"?>
<atom:entry xmlns:atom="http://www.w3.org/2005/Atom" type="application/atom+xml;type=entry">
    <atom:id>12345678</atom:id>
    <atom:title>Playlist example 1</atom:title>
    <atom:link rel="self" type="application/atom+xml;type=entry" href="http://hostname/thirdparty/playlist/2101211130000011141" />
    <dcterms:identifier xmlns:dcterms="http://purl.org/dc/terms/">2101211130000011141</dcterms:identifier>
</atom:entry> 
```

* * *

## 问题

它只包含**Atom**命名空间 :( 因此它不是一个有效的 XML。因为它有一个子节点**dcterms:identifier**，其命名空间丢失。

我非常需要帮助才能摆脱这个问题。期待任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:17:57.993

没有问题。dcterms 命名空间在需要的地方声明：在 dcterms:identifier 标记中

```
<dcterms:identifier xmlns:dcterms="http://purl.org/dc/terms/"> 
```

其实你期待的xml和你得到的xml是一样的。命名空间未在同一位置声明这一事实不会影响 xml 内容的含义。

=======更新========

我建议解决真正的问题，即您的系统不接受有效的 xmls（或者它没有正确解释它们）这一事实。作为解决您的情况的方法，请尝试以下代码：

```
Element rootElem = new Builder().build(ins).getRootElement();
XPathContext xc = XPathContext.makeNamespaceContext(rootElem);    
Element firstEntry = (Element) rootElem.query("atom:entry", xc).get(0); 
Document doc = new Document((Element)firstEntry.copy());
Element root = doc.getRootElement();
recursive(root,root);

static void recursive(Element root, Element child){
        root.addNamespaceDeclaration(child.getNamespacePrefix(), child.getNamespaceURI());
        if (child.getChildElements().size()>0){
            int i = child.getChildElements().size();
            for (int k=0;k<i;k++){
                recursive(root,child.getChildElements().get(k));
            }
        }
    } 
```

基本上，上面的代码会遍历所有子节点，识别命名空间并将其作为命名空间声明添加到根。我已经尝试过并且工作过。我希望它可以解决您的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:54:04.550

你要

```
doc.getRootElement().addNamespaceDeclaration("dcterms", "http://purl.org/dc/terms/"); 
```**

# java - 使用 JAXB 解析 XML

> ID：14272453
> 
> 赞同：1
> 
> 时间：2013-01-11T05:48:50.137
> 
> 标签：java, xml, xml-parsing, jaxb, xsd

我是 xml 解析的新手。我使用 DOM 来解析 xml 以供练习。现在我想将一些移动到其他 xml 解析框架。所以我选择了 JAXB 解析器。对于我的要求，我无法为所有 xml 标签创建 getter setter。因为我将得到的 xml 是动态的。所以我事先不知道创建getter/setter的标签。我参考了这个链接[http://www.mkyong.com/java/jaxb-hello-world-example/](http://www.mkyong.com/java/jaxb-hello-world-example/)。有什么方法可以在不创建 getter 和 setter 的情况下进行解析。请让我清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:54:53.963

对于 JAXB，您应该为可能动态获取的所有 XML 标记创建变量和相应的 getter 和 setter。如果您有一个标签（您可以动态获取）但在 Java 类中没有相应的映射变量，那么您将获得 JAXB 异常。

因此，您可以在 JAXB Java 类中定义一个标签，但在请求中进行，但相反，未在 JAXB 类中定义但在 XML 中定义的标签会给您一个例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:05:52.743

您可以利用`@XmlAnyElement`和`XmlAnyAttribute`注释来映射额外的内容。如果您不想要`get`/`set`方法，只需添加`@XmlAccessorType(XmlAccessType.FIELD)`您的课程。

**顾客**

在下面的类中，我们映射一个特定的 XML 属性和元素，然后使用`@XmlAnyElement`注解来映射可能出现的任何其他元素，并`@XmlAnyAttribute`映射可能出现的任何其他属性。

```
import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.namespace.QName;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {

    @XmlAttribute
    int id;

    @XmlAnyAttribute
    Map<QName, String> otherAttributes;

    String name;

    @XmlAnyElement(lax=true)
    List<Object> otherElements;

} 
```

**输入.xml**

我们将在演示代码中解组以下 XML 文档。

```
<?xml version="1.0" encoding="UTF-8"?>
<customer id="123" status="good">
    <name>Jane Doe</name>
    <address>
        <street>1 A Street</street>
        <city>Any Town</city>
    </address>
    <phone-number>555-1111</phone-number>
</customer> 
```

**演示**

以下文档将解组 XML 输入，将所有生成的对象内容转储`System.out`到 XML 并将对象编组回 XML。

```
import java.io.File;
import java.util.Map.Entry;
import javax.xml.bind.*;
import javax.xml.namespace.QName;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Customer.class, Address.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14272453/input.xml");
        Customer customer  = (Customer) unmarshaller.unmarshal(xml);

        // Mapped XML Attribute
        System.out.println("customer.id");
        System.out.println("    " + customer.id);

        // Other XML Attributes
        System.out.println("customer.otherAttributes");
        for(Entry<QName, String> entry : customer.otherAttributes.entrySet()) {
            System.out.println("    " + entry);
        }

        // Mapped XML Element
        System.out.println("customer.name");
        System.out.println("    " + customer.name);

        // Other XML Elements
        System.out.println(customer.otherElements);
        for(Object object : customer.otherElements) {
            System.out.println("    " + object);
        }

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(customer, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出，请注意所有字段是如何使用 XML 文档中的数据填充的。

```
customer.id
    123
customer.otherAttributes
    status=good
customer.name
    Jane Doe
customer.otherElements
    forum14272453.Address@24f454e4
    [phone-number: null]
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customer id="123" status="good">
    <name>Jane Doe</name>
    <address>
        <street>1 A Street</street>
        <city>Any Town</city>
    </address>
    <phone-number>555-1111</phone-number>
</customer> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/12/jaxbs-xmlanyelementlaxtrue-explained.html](http://blog.bdoughan.com/2012/12/jaxbs-xmlanyelementlaxtrue-explained.html)
*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:29:22.180

这将是动态的。解组调用 Customer.setElements；元帅调用 Customer.getElements

```
@XmlRootElement
class Customer {
    @XmlAnyElement
    public void setElements(List<Element> list) {
        for (Element e : list) {
            String name = e.getNodeName();
            String value = e.getTextContent();
        }
    }

    public List<Element> getElements() throws ParserConfigurationException {
        Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
        List<Element> list = new ArrayList<>();
        Element e = doc.createElement("e1");
        e.setTextContent("v1");
        list.add(e);
        return list;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T05:52:48.547

[Jackson](http://jackson.codehaus.org/)以其 JSON 处理器而闻名，它也[支持 XML 解析](https://github.com/FasterXML/jackson-dataformat-xml)，并且它在反射方面做得很好，因此即使没有 getter 和 setter 也可以进行解析。试试看。

# java - 查询 ContentProvider 时出现“无效表”错误

> ID：14272455
> 
> 赞同：1
> 
> 时间：2013-01-11T05:49:01.887
> 
> 标签：java, android, sqlite, android-contentprovider

其次，我真的是 android 的新手，还没有完全掌握它的工作方式（对于编写大部分教程的人来说，我可以在网上很遗憾地找到，所以一个好的快速和肮脏的教程也会很棒）。继续解决问题，我将尝试仅发布相关代码，如果我跳过某些内容，请告诉我。

清单条目：

```
<provider android:name="MyContentProvider" android:authorities="hua.it20910.android.provider"/> 
```

主要活动调用：

```
Cursor c = getContentProvider().query(MyContentProvider.getTableUri(1), null, null, null, null); 
```

内容提供商：

```
private static SQLiteDatabase db;
private static final String database_name = "contactlist.db";
private static final int database_version = 1;
private static final String table1="Contacts";
private static final String[] table1_row={"_id","Surname","Name","Phone","Email","Address","Group"};
private static final String table2="Groups";
private static final String[] table2_row={"_id","Name"};

public static final String PROVIDER_NAME = "hua.it20910.android.provider";
public static final Uri CONTACTS_URI = Uri.parse("content://"+ PROVIDER_NAME + "/"+table1);
public static final Uri GROUPS_URI = Uri.parse("Content://"+PROVIDER_NAME + "/"+table2);

private static final int CONTACTS = 1;
private static final int CONTACT_ID = 2;
private static final int GROUPS = 3;
private static final int GROUP_ID = 4;

private static final UriMatcher myMatcher;
static {
    myMatcher = new UriMatcher(UriMatcher.NO_MATCH);
    myMatcher.addURI(PROVIDER_NAME, table1, CONTACTS);
    myMatcher.addURI(PROVIDER_NAME, table1+"/#", CONTACT_ID);
    myMatcher.addURI(PROVIDER_NAME, table2, GROUPS);
    myMatcher.addURI(PROVIDER_NAME, table1+"/#", GROUP_ID);
}
private static final String table1Sql = "CREATE TABLE "
            + table1 + "(" 
            + table1_row[0] + " INTEGER PRIMARY KEY AUTOINCREMENT, " 
            + table1_row[1] + " VARCHAR(25), "
            + table1_row[2] + " VARCHAR(25), " 
            + table1_row[3] + " INTEGER, " 
            + table1_row[4] + " VARCHAR(25), "
            + table1_row[5] + " VARCHAR(25)) ";

    private static final String table2Sql = "CREATE TABLE " 
            + table2 + "("
            + table2_row[0] + " INTEGER PRIMARY KEY AUTOINCREMENT, "
            + table2_row[1] + " VARCHAR(25))";

private class DatabaseHelper extends SQLiteOpenHelper{

    public DatabaseHelper(Context context) {
        super(context, database_name, null, database_version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(table1Sql);
        db.execSQL(table2Sql);
    }

    @Override
      public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
         db.execSQL("DROP TABLE IF EXISTS "+table1 );
         db.execSQL("DROP TABLE IF EXISTS "+table2 );
         onCreate(db);
      }     
}

public static Uri getTableUri(int i){
    if (i==1){
        return CONTACTS_URI;
    }
    if (i==2){
        return GROUPS_URI;
    }
    else{
        return null;
    }
}

@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder sqlBuilder = new SQLiteQueryBuilder();
    switch (myMatcher.match(uri)){
        case CONTACTS:
            sqlBuilder.setTables(table1);
            break;
        case CONTACT_ID:
            sqlBuilder.setTables(table1);
            sqlBuilder.appendWhere("_id=" + uri.getPathSegments().get(1));
            break;
        case GROUPS:
            sqlBuilder.setTables(table2);
            break;
        case GROUP_ID:
            sqlBuilder.setTables(table2);
            sqlBuilder.appendWhere("_id=" + uri.getPathSegments().get(1));
            break;
        default:
            throw new SQLException("Wrong uri " + uri);
    }
    if (sortOrder == null || sortOrder == "")
        sortOrder = "_id DESC";
    Cursor c = db.query(null, projection, selection, selectionArgs, null, null, sortOrder);
    c.setNotificationUri(getContext().getContentResolver(), uri);
    return null;
} 
```

正如标题中提到的，我目前收到的错误消息是执行查询时的无效表，但我已经经历了一大堆其他错误才能到达这里，我不确定我是解决了它们还是只是走来走去他们只是为了将来再次找到它们，因此将不胜感激任何错误纠正。

日志猫：

```
01-11 05:43:08.385: E/Trace(930): error opening trace file: No such file or directory (2)
01-11 05:43:08.525: I/ActivityThread(930): Pub hua.it20910.android.provider: hua.it20910.android.MyContentProvider
01-11 05:43:09.515: D/dalvikvm(930): GC_FOR_ALLOC freed 57K, 7% free 2583K/2760K, paused 191ms, total 193ms
01-11 05:43:09.515: I/dalvikvm-heap(930): Grow heap (frag case) to 3.241MB for 635812-byte allocation
01-11 05:43:09.565: D/dalvikvm(930): GC_FOR_ALLOC freed 1K, 6% free 3202K/3384K, paused 43ms, total 43ms
01-11 05:43:09.616: D/dalvikvm(930): GC_CONCURRENT freed <1K, 6% free 3214K/3384K, paused 5ms+13ms, total 52ms
01-11 05:43:09.635: D/AndroidRuntime(930): Shutting down VM
01-11 05:43:09.645: W/dalvikvm(930): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-11 05:43:09.655: E/AndroidRuntime(930): FATAL EXCEPTION: main
01-11 05:43:09.655: E/AndroidRuntime(930): java.lang.RuntimeException: Unable to start activity ComponentInfo{hua.it20910.android/hua.it20910.android.MainActivity}: java.lang.IllegalStateException: Invalid tables
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.os.Looper.loop(Looper.java:137)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-11 05:43:09.655: E/AndroidRuntime(930):  at java.lang.reflect.Method.invokeNative(Native Method)
01-11 05:43:09.655: E/AndroidRuntime(930):  at java.lang.reflect.Method.invoke(Method.java:511)
01-11 05:43:09.655: E/AndroidRuntime(930):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-11 05:43:09.655: E/AndroidRuntime(930):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-11 05:43:09.655: E/AndroidRuntime(930):  at dalvik.system.NativeStart.main(Native Method)
01-11 05:43:09.655: E/AndroidRuntime(930): Caused by: java.lang.IllegalStateException: Invalid tables
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.database.sqlite.SQLiteDatabase.findEditTable(SQLiteDatabase.java:971)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1200)
01-11 05:43:09.655: E/AndroidRuntime(930):  at hua.it20910.android.MyContentProvider.query(MyContentProvider.java:178)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.content.ContentProvider.query(ContentProvider.java:652)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.content.ContentProvider$Transport.query(ContentProvider.java:189)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.content.ContentResolver.query(ContentResolver.java:372)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.content.ContentResolver.query(ContentResolver.java:315)
01-11 05:43:09.655: E/AndroidRuntime(930):  at hua.it20910.android.MainActivity.displayRecords(MainActivity.java:31)
01-11 05:43:09.655: E/AndroidRuntime(930):  at hua.it20910.android.MainActivity.onCreate(MainActivity.java:19)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.app.Activity.performCreate(Activity.java:5104)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-11 05:43:09.655: E/AndroidRuntime(930):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-11 05:43:09.655: E/AndroidRuntime(930):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:30:02.887

> 正如标题中提到的，我目前收到的错误消息是执行查询时的无效表，但我已经经历了围绕其他错误的地狱般的工作才能到达这里，我不确定我是否解决了它们[... ]

你得到这个异常是正常的，因为你在 的方法中`null`执行 sqlite 查询时作为表名传递，这一行：`query``ContentProvider`

```
Cursor c = db.query(null, projection, selection, selectionArgs, null, null, sortOrder); 
```

第*一个参数*是表名，您必须提供有效的表名才能使查询成功。因此，根据`Uri`您选择正确的表并分配一个有效的表名。另外，`SQLiteQueryBuilder`如果您要完全忽略它并简单地直接查询数据库，那么在同一查询方法中使用 a 的目的是什么？

关于教程，我想你错过了最重要的一个，[官方指南`ContentProviders`](http://developer.android.com/guide/topics/providers/content-providers.html)，你甚至有一个在那里构建的例子。

# r - 如何使用 $and 运算符构造 rmongodb 查询

> ID：14272458
> 
> 赞同：0
> 
> 时间：2013-01-11T05:49:19.290
> 
> 标签：r, mongodb, rmongodb

我想使用 rmongodb 访问 R 中的 MongoDB 数据库。我尝试构建以下查询：

```
{'$and': [{_id: {'$gte': '2013-01-01'}}, {_id: {'$lte': '2013-01-10'}}]} 
```

我尝试了三种不同的方法来创建 bson 对象，但都没有运气。

方法一：

```
buf = mongo.bson.buffer.create()
mongo.bson.buffer.start.array(buf, '$and')
mongo.bson.buffer.append(buf, '_id', list('$gte'='2013-01-01'))
mongo.bson.buffer.append(buf, '_id', list('$lte'='2013-01-10'))
mongo.bson.buffer.finish.object(buf)
bson = mongo.bson.from.buffer(buf) 
```

方法二：

```
 buf = mongo.bson.buffer.create()
mongo.bson.buffer.start.array(buf, '$and')
mongo.bson.buffer.start.object(buf, '_id')
mongo.bson.buffer.append(buf, '$gte', '2013-01-01')
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.start.object(buf, '_id')
mongo.bson.buffer.append(buf, '$lte', '2013-01-10')
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
bson = mongo.bson.from.buffer(buf) 
```

方法三：

```
mongo.bson.from.list(list('$and'=list('_id' = list('$lte'='2013-01-10'), '_id' = list('$gte'='2013-01-01')))) 
```

它们都不起作用。全部返回空结果。

我搜索了一段时间，唯一类似的问题是[rmongodb: using $or in query](https://stackoverflow.com/q/12067020/435806) 解决方案是改用 RMongo，它不适用于 R 2.50。

我被困在这个问题好几天了。如果我找不到解决方案，我将不得不用 python 编写一个外部脚本并从 R 中调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:18:01.407

我不知道 R，但您实际上不需要`$and`用于该查询。这有点简单，应该更容易翻译成 R：

```
{_id: {'$gte': '2013-01-01', '$lte': '2013-01-10'}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T19:04:07.833

您创建 mongo bson 数组的方式是错误的。你缺少零件

```
mongo.bson.buffer.start.object(buf, "0")
...
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.start.object(buf, "1")
...
mongo.bson.buffer.finish.object(buf) 
```

有关工作示例，请查看以下最新评论： [https ://github.com/mongosoup/rmongodb/issues/17](https://github.com/mongosoup/rmongodb/issues/17)

我希望这暂时有效。我正在研究一个更简单的解决方案！

# php - 使用 PHP 在一个位置组织表单中的数据

> ID：14272459
> 
> 赞同：0
> 
> 时间：2013-01-11T05:49:25.880
> 
> 标签：php

客户目前有以下问题：

他们的页面上有一个表格，客户可以在其中输入各种形式的数据。然后将表格提交并通过电子邮件发送给公司。对于公司中必须通过电子邮件记录所有这些信息的人来说，这是非常低效的。

我们如何使用 PHP（或者更简单的解决方案）来收集和组织每个提交到单个文档中？

他们希望我将所有提交的数据放入 Excel 电子表格（我正在使用一个名为[Export to Excel](http://wordpress.org/extend/plugins/export-2-excel/)的 WordPress 插件，但它无法正常工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:08:40.930

最简单的方法是打开一个 CSV 文件，将列标题作为第一行，然后继续向该文件追加行。例如

```
datetime, name, phone, address
01/11/2013 12:01:02, abc, 123, foo
01/11/2013 12:01:03, bar, 345, fgh 
```

等等。每天创建一个新文件；编写一个每天发送该文件的cron。收件人可以直接在excel中打开csv文件。或者，您的 cron 可以在一天结束时将文件导出到 excel 中。可以将 cron 设置为以任何所需的频率运行；请记住旋转 csv 文件，这样您就不会一次又一次地通过电子邮件发送相同的数据。

在企业级应用程序中，表单提交被写入数据库，然后写入一个页面，然后从数据库中提取数据，将其显示在屏幕上。该页面还可以允许“下载为excel”功能。该页面通常也会实现一些过滤器，例如某某之间的提交日期。

# jira - 无法在 jira 中获取 sever.xml 端口设置

> ID：14272461
> 
> 赞同：1
> 
> 时间：2013-01-11T05:49:41.600
> 
> 标签：jira

当我在 Windows 中启动 jira 时，它在默认端口 8080 上成功启动，情况是我希望在同一端口上启动另一个应用程序，当我搜索 /conf/server.xml 时，我没有找到连接器端口设置，但是当我通过 jira 提供的 GUI 工具时，我能够获取端口设置，

所以我的问题是jira是如何实现这一点的，jira是否考虑了其他设置或其他什么。？

任何建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:13:49.597

Jira 确实尊重 conf/server.xml 文件。如果您需要更改端口号，则应在默认连接器中设置它（如果不存在，您可以添加它）：

```
<Connector port="8082"
  maxThreads="150"
  minSpareThreads="25"
  maxSpareThreads="75"
  connectionTimeout="20000"

  enableLookups="false"
  maxHttpHeaderSize="8192"
  protocol="HTTP/1.1"
  useBodyEncodingForURI="true"
  redirectPort="8443"
  acceptCount="100"
  disableUploadTimeout="true"/> 
```

有关 Jira 的 Atlassian Confluence 站点的更多信息：[https](https://confluence.atlassian.com/display/JIRA/Changing+JIRA) ://confluence.atlassian.com/display/JIRA/Changing+JIRA 's+TCP+Ports。

此外，您可能需要考虑[http://www.serverfault.com](http://www.serverfault.com)以了解未来的问题，stackoverflow 的兄弟进行系统管理问答。

# excel - excel 2007 中的数据验证

> ID：14272464
> 
> 赞同：1
> 
> 时间：2013-01-11T05:50:07.393
> 
> 标签：excel, excel-2007, vba

我试图在我的 excel 工作表中限制某些单元格的输入，如下所示： `1-7,10,12`，这意味着只有数字和符号`0`才能出现在单元格中。我想以非基于 vba 的数据验证方式理想地处理它，但即使是基于 vba 的解决方案也可以。`9``-``,`

编辑 - 有一个关键字将是一个例外，“固定”，如果我看到这个词，它将被允许。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:06:04.137

使用`Regex`对象的 VBA 版本：我刚刚编写了函数。您可以在工作表更改事件中简单地调用此函数。（就像悉达多的使用方式一样）。还有一件事，每次用户输入错误的字符时，该函数都会将它们全部删除：D ...然后，您需要再次注意，以确保此操作发生在您选择的特定范围内..因为否则它可以擦除任何正在更改的单元格！！！鉴于 Siddtharth[`infinite loops`在此“工作表更改事件”中](https://stackoverflow.com/questions/13860894/ms-excel-crashes-when-vba-code-runs/13861640#13861640)的帖子，我已经编辑了代码以包含该位。

```
 Option Explicit

    '-- within sheet change event
    Private Sub Worksheet_Change(ByVal Target As Range)
       On Error GoTo Zoo
       Application.EnableEvents = False
       Call NumbersAndCommaDashOnly(Target)

       GetBack:
       Application.EnableEvents = True
       Exit Sub
   Zoo:
       MsgBox Err.Description
       Resume GetBack
    End Sub

Function NumbersAndCommaDashOnly(ByRef rngInput As Range) As String    
Dim objRegex As Object
Dim strInput As String

Set objRegex = CreateObject("VBScript.RegExp")
objRegex.IgnoreCase = True
objRegex.Global = True
objRegex.Pattern = "^[-,0-9]+$|^[Fixed]$"

If Not IsNull(rngInput.Value) Then
    strInput = rngInput.Value
Else
    NumbersAndCommaDash = "Empty Range"
    rngInput.Value = ""
    Exit Function
End If

If objRegex.Test(rngInput.Value) Then
    NumbersAndCommaDash = objRegex.Replace(rngInput, "")
Else
    NumbersAndCommaDash = "No numbers found"
    rngInput.Value = ""
End If

End Function 
```

*   对于基于 Excel 公式的解决方案，您可以查看此[MSDN 文章](http://office.microsoft.com/en-001/excel-help/apply-data-validation-to-cells-HP010072600.aspx#BM0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:00:30.270

这是仅适用于单元格 A1 的 VBA 方法。

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim i As Long

    On Error GoTo Whoa

    Application.EnableEvents = False

    If Not Intersect(Target, Range("A1")) Is Nothing Then
        If Len(Range("A1").Value) <> 0 Then
            For i = 1 To Len(Range("A1").Value)
                Select Case Asc(Mid(Range("A1").Value, i, 1))
                '~~> Check for 0-9, "," and "-"
                Case vbKey0 To vbKey9, 44, 45
                Case Else
                    Range("A1").ClearContents
                    MsgBox "Invalid Value"
                    Exit For
                End Select
            Next
        End If
    End If

Letscontinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub 
```

代码进入`Sheet1`代码区域。

![在此处输入图像描述](../Images/d83ab2a901886b8ba6fa8294b3ed10a2.png)

**屏幕截图（运行代码）**

![在此处输入图像描述](../Images/3328ccd4d3a7bc9b4f45f76067c82dd2.png)

**跟进**问题中最近的编辑

换行

```
If Len(Range("A1").Value) <> 0 Then 
```

到

```
If Len(Range("A1").Value) <> 0 And _
UCase(Range("A1").Value) <> "FIXED" Then 
```

# cocos2d-iphone - 删除 CCSprite 的双指针？

> ID：14272476
> 
> 赞同：0
> 
> 时间：2013-01-11T05:51:27.377
> 
> 标签：cocos2d-iphone, cocos2d-x

我正在为 CCSprite 使用双指针。对于指向指针的指针我正在做 new 然后创建然后使用 cocos2d 常用方法 create 在以下情况下我应该如何删除双指针

```
 CCSprite **mCBg;

 mCBg = new CCSprite*[mNumberBackgound];

//for loop for creating sprites 
 mCBgLayer[i]= CCSprite::create("Sprites/level1.png"); 
```

由于 Create 会自动添加到内存池中

使用“新”创建的对象如何在析构函数中删除它们

```
 if(mCBg)
{
    CC_SAFE_DELETE_ARRAY(mCBgLayer);
} 
```

如果我这样做，我会在析构函数中崩溃请给出解释并给出答案。这样我就可以理解cocos2d-x的内存管理了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:32:29.733

Cocos2d-x 使用`Reference Count`和`AutoReleasePool`来管理内存。

使用的函数`CCSprite::create()`的实现`autorelease()`。不需要释放内存，否则引用计数会小于0；更多详情见： http: [//www.cocos2d-x.org/projects/cocos2d-x/wiki/ Reference_Count_and_AutoReleasePool_in_Cocos2d-x](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Reference_Count_and_AutoReleasePool_in_Cocos2d-x)

# wso2 - WSO2 DataService：如何处理返回“未找到数据”的 oracle refcursor？

> ID：14272482
> 
> 赞同：0
> 
> 时间：2013-01-11T05:51:53.987
> 
> 标签：wso2, wso2esb, wso2dss

我在 Mac OSX 10.7.8 上使用 WSO2 4.0.3。我启用了数据服务服务器功能（3.2.2）

处理具有存储过程的数据服务（.dbs 文件），其中 oracle 引用游标作为输出参数。如果存储过程返回数据，则写入的数据服务工作正常，但是当存储过程“未找到数据”时，返回的游标为空，因此不返回元素，因此出现以下错误。

有人可以就如何在 WSO2 数据服务中的 refcursor 上处理这种特定情况提供见解吗？

“[2013-01-11 10:49:02,902] 错误 - SQLQuery DS 错误消息：'StaticOutputElement.execute' 中的错误，找不到类型为：列名：类 DS 代码的参数：INCOMPATIBLE_PARAMETERS_ERROR

DS 故障消息：“StaticOutputElement.execute”中的错误，找不到类型为：列名：类 DS 代码的参数：INCOMPATIBLE_PARAMETERS_ERROR

```
at org.wso2.carbon.dataservices.core.engine.StaticOutputElement.getParamValue(StaticOutputElement.java:201)
at org.wso2.carbon.dataservices.core.engine.StaticOutputElement.execute(StaticOutputElement.java:239)
at org.wso2.carbon.dataservices.core.engine.OutputElementGroup.execute(OutputElementGroup.java:115)
at org.wso2.carbon.dataservices.core.description.query.Query.writeResultEntry(Query.java:335)
at org.wso2.carbon.dataservices.core.description.query.SQLQuery.processStoredProcQuery(SQLQuery.java:908)
at org.wso2.carbon.dataservices.core.description.query.SQLQuery.runQuery(SQLQuery.java:2044) 
```

"

这是我写的 .dbs 文件

```
<data  name="dsname">
<config id="datas">
  <property name="carbon_datasource_name">datas</property>
</config>
<query id="procedure_YEAR" useConfig="datas">
  <sql>{callProcdure (?,?,?,?)}</sql>

  <result element="array" rowName="dict" >
  <element name="status" column="out_status" xsdType="xs:string" />
   <element name="error_desc" column="out_error_desc" xsdType="xs:string" />
    <element name="class" column="class" xsdType="xs:string" />
    <element name="org" column="org" xsdType="xs:string" />
    <element name="year" column="year" xsdType="xs:number" />
    <element name="week_yr" column="week_yr" xsdType="xs:number" />
  </result>
  <param name="in_year1" sqlType="INTEGER" type="IN"  />
  <param name="out_status" sqlType="STRING" type="OUT"  />
  <param name="out_error_desc" sqlType="STRING" type="OUT" />
  <param name="result" sqlType="ORACLE_REF_CURSOR" type="INOUT" />
<!--  <param name="class" sqlType="STRING" type="INOUT" />
  <param name="org" sqlType="STRING" type="INOUT"  />
  <param name="year" sqlType="INTEGER" type="INOUT"  />
  <param name="week_yr" sqlType="INTEGER" type="INOUT"  />
  <param name="bill_amount" sqlType="INTEGER" type="INOUT"  />
  <param name="bill_unit" sqlType="INTEGER" type="INOUT"  />
  <param name="yoy" sqlType="INTEGER" type="INOUT"  />-->

 </query>
 <operation name="YEAR_op">
  <call-query href="procedure_YEAR">
     <with-param name="in_year1" query-param="in_year1" />
   </call-query>
 </operation>
</data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:33:47.603

使用 DSS 3.0.0 及更高版本，您可以为值不确定的结果元素设置 optional="true"。因此，在您的情况下，对于从 REF_CURSOR 返回的元素，请在您的数据库的结果元素定义中设置 optional="true"。

前任：

```
<result element="array" rowName="dict" >
  <element name="status" column="out_status" xsdType="xs:string" />
   <element name="error_desc" column="out_error_desc" xsdType="xs:string" />
    <element name="class" column="class" xsdType="xs:string" optional="true"/>
    <element name="org" column="org" xsdType="xs:string" />
    <element name="year" column="year" xsdType="xs:number" />
    <element name="week_yr" column="week_yr" xsdType="xs:number" />
  </result> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T07:33:01.230

拼写也许？callProcdure = callProcedure

# actionscript-3 - 如何在 FLA 文件中查找 AS 代码

> ID：14272484
> 
> 赞同：1
> 
> 时间：2013-01-11T05:52:05.473
> 
> 标签：actionscript-3, flash, actionscript

所以一位程序员制作了一个 Flash 应用程序，但是当我用 adobe flash 打开它时，我可以在里面找到任何代码，但是该应用程序可以工作，我试图在帧动作中看到，但什么也没有，该库仅包含影片剪辑，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:50:13.297

SWC 库也包含 AS 类。有一些 SWC 文件的资源管理器，例如 Flash Builder 4.6 支持它。您还可以将 *.swc 文件重命名为 *.zip 并检查 catalog.xml 文件中的类名，并使用任何 swf 反编译器来浏览 library.swf 的源代码。

# iphone - 如何使用 iPhone 中的当前日期（今天）获取本周、本月、今年的所有日期/日期

> ID：14272489
> 
> 赞同：0
> 
> 时间：2013-01-11T05:52:41.523
> 
> 标签：iphone, objective-c, nsdate, nsdateformatter

在我的应用程序中，我必须在表格视图中按日期显示工作时间列表，

这里我有5个场景

1.  今天的项目，工作时间
2.  选定日期项目，小时
3.  当前周（周日至周六）
4.  当月（1月工作时间，2月2月3月3月）
5.  当年（2013年所有工作时间）

我已经实现了如下的 sqlite 查询，

**1\. 从 ProjDetailsTable 中选择 Date, ProjectTitle, WorkingHours, sum(WorkingHours) where date = toDaysDate**

**2\. 从 ProjDetailsTable 中选择 Date, ProjectTitle, WorkingHours, sum(WorkingHours) where date = selecteDate**

*`I have done for the fist two scenarions`*

***对于 3,4,5 场景***

* * *

```
3\. Select Date, ProjectTitle, WorkingHours, sum(WorkingHours) from ProjDetailsTable where 
Date between two Dates 
```

* * *

但我的问题是如果我有日期

```
Is there any logic to get the starting for
current week, current month, current year 
```

注意：不是 7 天前，不是 30 个月前，也不是 365 天前。

我的要求是：

**`if Current date is Feb-13-2020 WednesDay`**

**本周：** *2月9日至今天*

**本月：** *2 月 1 日至今天*

**今年： 2020 年** *1 月 1 日至今*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:58:23.900

我希望这会给你一个基本的想法，你必须如何进行：对于其他情况，你可以解决

```
- (NSDate *)firstDayOfWeekFromDate:(NSDate *)date {
      NSCalendar* calendar = [NSCalendar currentCalendar];
      NSDateComponents* comps = [calendar components:NSYearForWeekOfYearCalendarUnit |NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:date];

     [comps setWeekday:2]; // 2: monday
     return [calendar dateFromComponents:comps];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:21:47.290

您可以使用它来获取当前年份和月份。只需按照我朋友的建议将这些添加到以前的答案中即可。

```
NSInteger year = [comps year];
NSInteger month = [comps month]; 
```

现在，我认为如果您获得当前年份和月份，您可以手动设置第一个日期。并随心所欲地表演。

主要是得到工作日..谢谢。

# php - 出现错误，想象一下注释+向图像添加文本，nybdy 可以帮助我吗？

> ID：14272491
> 
> 赞同：-1
> 
> 时间：2013-01-11T05:53:00.200
> 
> 标签：php

```
<?php

    $text=$_POST['text1'];

    $im1=$_POST['image'];

    echo $text;

    echo $im1;

    $im2 = new Imagick($im1);

    $im->annotateImage($im2, 0, 0, 0, $text);

    $im->setImageFormat('jpg');

    $thumbnail = $im->getImageBlob();

    header("Content-Type: $thumbnail");

    echo $thumbnail;

    echo '<img src="data:image/jpg;base64,'.base64_encode($thumbnail).'" />'; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:57:08.653

工作代码：

```
<?php
/* Create some objects */
$image = new Imagick();
$draw = new ImagickDraw();
$pixel = new ImagickPixel( 'gray' );

/* New image */
$image->newImage(800, 75, $pixel);

/* Black text */
$draw->setFillColor('black');

/* Font properties */
$draw->setFont('Bookman-DemiItalic');
$draw->setFontSize( 30 );

/* Create text */
$image->annotateImage($draw, 10, 45, 0, 'The quick brown fox jumps over the lazy dog');

/* Give image a format */
$image->setImageFormat('png');

/* Output the image with headers */
header('Content-type: image/png');
echo $image;

?> 
```

如需进一步参考： http: [//php.net/manual/en/imagick.annotateimage.php](http://php.net/manual/en/imagick.annotateimage.php)

# java - 在 Spring 中使用 @RequestBody 注释获取请求

> ID：14272493
> 
> 赞同：1
> 
> 时间：2013-01-11T05:53:06.800
> 
> 标签：java, spring, model-view-controller

我们可以在 Spring mvc 中使用`GET`带注释的请求吗？`@RequestBody`

我无法理解为什么它正在使用`POST`而不是`GET`. 同样在 spring-reference.pdf 中，此注释的使用与`PUT`.

有人可以解释一下它是否也可以与其他人`RequestMethods`一起使用以及如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:13:40.410

可能您的客户端或服务器中较低层的某些东西正在忽略或剥离它。从技术上讲，HTTP 不禁止将正文添加到 GET，但它有点未定义且未得到普遍支持。

# html - CSS - 定位导航菜单列表

> ID：14272496
> 
> 赞同：0
> 
> 时间：2013-01-11T05:53:29.493
> 
> 标签：html, css, list

HTML/CSS 新手在这里。快速提问。定位导航的最佳工具是什么？清单？边距？“位置：”？我已经确定了 2 个（#top 和 #bottom）列表，但不太确定使用什么来正确定位它们。

> 我的想法-> [http://i.imgur.com/yJrKS.jpg](http://i.imgur.com/yJrKS.jpg)

**更新问题 -**

由于某种原因，单词之间的空格不会与`"li"`宽度完全相等。如果你想让它变得完美，有些需要调整到 10px。有没有办法在单个单词之前和之后添加空格（px）？我尝试添加空格，但无济于事。

[http://jsfiddle.net/RE6Xk/11/](http://jsfiddle.net/RE6Xk/11/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:58:04.583

您应该使用`tables`2 行 4 列...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:00:25.207

我认为每个元素之间的距离在一行中是相同的。因此，我更喜欢为每个元素使用相同的边距值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:10:42.250

使用带有浮动和大小的列表项的无序列表

[演示 jsfiddle](http://jsfiddle.net/pxfunc/DbppU/1/)

```
<ul id="nav">
  <li><a href="#">Nav 1</a></li>
  ...
</ul> 
```

```
...
#nav li {
  float:left;
  width:240px;
  height:40px;
  line-height:40px;
  text-align:center;
}
... 
```

# asp.net-mvc - 如何使单选按钮是/否字段成为必填项？

> ID：14272497
> 
> 赞同：0
> 
> 时间：2013-01-11T05:53:31.333
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我必须强制回答是/否。项目所有者想要一个“复选框”，其中包含一些丑陋的三态复选框或两个单选按钮。后者似乎是最整洁的，但我不知道如何制作它，以便只检查一个复选框。我唯一的另一个想法是填充复选框并使用下拉菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:27:59.653

采用

```
[Required]
public bool? YesNo { get; set; } 
```

在 ViewModel 中并确保它最初为空。

Bool 默认为 false。通过使用 nullable bool?，您将其初始状态设置为 null。

# c++ - 在 Visual Studio 2010 (utility.obj) 中使用带有 VC++ 的 QuickFix 时出错

> ID：14272498
> 
> 赞同：0
> 
> 时间：2013-01-11T05:53:33.477
> 
> 标签：c++, windows, sockets, tcp, quickfix

它是这样的：

1.  我下载了 QuickFix 源代码，使用 CMake 构建它并获得了 .sln 文件。

2.  然后我在 VC++ 2010 中打开 .sln 文件并构建了名为“quickfix_vs10”的项目（实际上我构建了一个名为 quickFix.lib 的库）并收到了一些警告，但构建成功。

3.  然后我在另一个项目中使用了这个 .lib 文件 #pragma comment(lib, "quickFix.lib")

4.  每当我在我的项目中声明类 FIX::TransactTime 的实例时，我都会收到许多链接时间错误。所有这些都与utility.obj 中未解析的令牌有关。如果我使用任何其他类，这些错误就不会出现。

这些错误之一是：

> quickFix.lib(Utility.obj) : 错误 LNK2028: 未解析的令牌 (0A000426) "extern "C" int __stdcall getpeername(unsigned int,struct sockaddr *,int *)" (?getpeername@@$$J212YGHIPAUsockaddr@@PAH@Z ) 在函数 "char const * __cdecl FIX::socket_peername(int)" (?socket_peername@FIX@@$$FYAPBDH@Z) 中引用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:55:24.727

错误信息表示需要链接`"Ws2_32.lib"`

请参阅[getpeername](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738533%28v=vs.85%29.aspx)参考

# html - 在电话间隙混合应用程序中毒化 HTML5 Appcache 的方法？

> ID：14272503
> 
> 赞同：1
> 
> 时间：2013-01-11T05:54:08.483
> 
> 标签：html, caching, cordova

我有一个使用 Phone-gap 开发的混合应用程序。该应用程序不使用 iFrames（使用 ChildBrowser）并具有强大的 XSS 预防机制。此应用缓存 .js 资源以供离线使用。

我正在研究可能导致 HTML5 AppCached 资源中毒的各种方式。在上述情况下，（即没有 iFrame，没有可能的 XSS）有没有办法毒害这些 HTML5 Appcached 资源？

# sql - SQL 查询中与“count(distinct(field))”语句的差异

> ID：14272505
> 
> 赞同：1
> 
> 时间：2013-01-11T05:54:43.630
> 
> 标签：sql, sql-server, count, distinct

我正在 SQL Server 中运行查询，以计算澳大利亚州数据库中存在的唯一电子邮件地址的数量。但是，当我尝试核对这些数字以确保它们正确时，我注意到了一个差异，这让我认为我的查询不正确。以下是我用来协调数字和实际结果的查询：

```
/** Count the total number of active members (status=1) since last night **/
SELECT count(distinct(email)) Total FROM [member] WHERE status = 1 
AND (created_datetime <= '2013-01-11' OR created_datetime IS NULL)
/** RESULT: 8958 **/

/** Count the number of active members (status=1) who live in Victoria since last night **/
SELECT count(distinct(email)) Total FROM [member] WHERE status = 1 
AND (created_datetime <= '2013-01-11' OR created_datetime IS NULL)
AND [state] = 'vic'
/** RESULT: 7545 **/

/** Count the number of active members (status=1) who don't live in Victoria since last night **/
SELECT count(distinct(email)) Total FROM [member] WHERE status = 1 
AND (created_datetime <= '2013-01-11' OR created_datetime IS NULL)
AND [state] <> 'vic'
/** RESULT:1446 **/

/** Add the two results to see how they compare to the total **/
SELECT 7545+1446
/** RESULT:8991 **/ 
```

您会注意到不同电子邮件的总数为 8958，但如果您将居住在维多利亚的电子邮件和不在维多利亚的电子邮件相加，则数字为 8991，这是不同的。我是否错误地使用了 count distinct 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:59:52.867

where 子句中的 created_datetime 不同。在第一个查询中是

```
WHERE status = 1 
AND (created_datetime <= '2013-01-10 23:59:59' OR created_datetime IS NULL) 
```

对于其他两个查询，它是

```
WHERE status = 1 
AND (created_datetime <= '2013-01-31 00:00:00' OR created_datetime IS NULL)
AND [state] <> 'vic' 
```

拉吉

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T06:04:49.880

除了@Raj 和@MarkD 提供的答案之外，我还想添加另一个观察结果。
不应该

```
OR created_datetime IS NULL 
```

只出现在其中一个陈述中而不是两个陈述中？如果两者都存在，则会出现重复，并且“总”查询的结果将永远不会与单个查询的总和相匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T07:45:20.340

您正在计算**不同的**电子邮件。如果来自 Victoria 的用户的电子邮件与来自其他地方的用户的电子邮件相同，那么这些将在总数中计为 1。

当分别计算维多利亚和非维多利亚的电子邮件时，在每种情况下都将再次计为 1，给您总共 2（如果您敢将它们加起来），这将是您现在遇到的差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T06:00:59.620

您的 s 的余额`[State]`可能是`NULL` 正如 Raj 指出的那样，`DATETIME`您的查询不同。

```
SELECT count(distinct(email)) Total FROM [member] WHERE status = 1 
AND (created_datetime <= '2013-01-31 00:00:00' OR created_datetime IS NULL)
AND [state] IS NULL 
```

# javascript - 在 Grails 中滚动时加载内容

> ID：14272510
> 
> 赞同：0
> 
> 时间：2013-01-11T05:54:53.100
> 
> 标签：javascript, jquery, ajax, grails

我只是上传图像并在 gsp 视图中显示它们。我现在要做的是每当我向下滚动时必须加载 gsp 视图图像。

有人告诉我使用 jQuery 进行 ajax 调用。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:55:27.180

实现这样的最快和最简单的方法是使用现有的 jQuery 插件。我建议看看下面应该与 grails 一起工作的插件......

*   [jQuery插件：无限滚动](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)
*   [jQuery插件：滚动分页](http://andersonferminiano.com/jqueryscrollpagination/)
*   [jQuery插件：自动浏览器](http://msjolund.github.com/autobrowse/)

这些插件要求你对 jQuery 有一点了解，所以不要期望只是将代码复制并粘贴到你的 gsp 页面中并让一切正常工作。

# java - 如何从 HTML 内容中获取 Href 值路径并将其存储在 String 中

> ID：14272513
> 
> 赞同：0
> 
> 时间：2013-01-11T05:55:03.920
> 
> 标签：java

我想在字符串中获取所有 href 值 \\192.168.1.102\\Data\ACT\OTHERACTS\HTMLFILES\2009\ftn2csdiv2.htm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:40:49.433

如果您的路径类似于 \\SERVER\directory\file.html，您可以将其视为普通文件路径而不是 URL。

涵盖在 Java 中读取文本文件的答案： [Reading a plain text file in Java](https://stackoverflow.com/questions/4716503/best-way-to-read-a-text-file)

# android - 当我的应用程序处于后台时，它不会在第一次打开

> ID：14272515
> 
> 赞同：0
> 
> 时间：2013-01-11T05:55:05.850
> 
> 标签：android

在我的应用程序中有一个启动屏幕，我正在其中下载数据，然后我通过使用调用我的下一个活动“A”

```
Intent intent;
intent = new Intent(SplashscreenActivity.this, A.class);
intent.putExtra("position",0);
intent.putExtra("flag",true);
startActivity(intent);
finish(); 
```

它很好地打开了应用程序，然后我按下了将应用程序置于后台的主屏幕按钮。

当我再次打开应用程序时，它不会打开应用程序，它只是闪烁并给我活动“A”的日志，当我检查日志时，它不显示 Splashsceen 日志，但它显示活动 A 中的日志，还显示我通过的意图数据，即位置和标志。我无法理解是什么问题是因为我在 splashScreen 中调用的完成（）。我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:44:28.863

```
 Intent intent;
     intent = new Intent(SplashscreenActivity.this, A.class);
      intent.putExtra("position",0);
       intent.putExtra("flag",true);
       startActivity(intent);
            finish();  // here your are killing the current  Activty so it doesnot came remove this line 
```

# rest - GWT 文件上传到 REST Web 服务

> ID：14272520
> 
> 赞同：3
> 
> 时间：2013-01-11T05:55:34.527
> 
> 标签：rest, gwt

我想使用 GWT 将文件上传到 REST Web 服务。但是我在以下这些字段中得到了空值。

```
InputStream uploadedInputStream, FormDataContentDisposition fileDetail 
```

以下是我的 GWT 客户端代码

```
public void onModuleLoad() {
        Button button = new Button("Click Here");
        final FormPanel form = new FormPanel();
        final FileUpload fileUpload = new FileUpload();
        form.setMethod(FormPanel.METHOD_POST);
        form.setEncoding(FormPanel.ENCODING_MULTIPART);
        fileUpload.setName("upload");
        form.add(fileUpload);
        form.setAction("http://localhost:8080/RestWeb/webresources/generic/upload");
        RootPanel.get().add(form);
        RootPanel.get().add(button);
        button.addClickHandler(new ClickHandler() {

            @Override
            public void onClick(ClickEvent event) {
                System.out.println(fileUpload.getFilename());
                System.out.println(fileUpload.getName());
                System.out.println(fileUpload.getStyleName());
                fileUpload.setEnabled(true);

                System.out.println(form.getTarget());
                form.submit();
            }
        });
        form.addSubmitHandler(new SubmitHandler() {

            @Override
            public void onSubmit(SubmitEvent event) {
        Window.alert("Onsubmit");

            }
        });
        form.addSubmitCompleteHandler(new SubmitCompleteHandler() {

            @Override
            public void onSubmitComplete(SubmitCompleteEvent event) {
                Window.alert("OnsubmitComplete"+event.getResults());

            }
        });
    }
} 
```

以下是我的服务器端代码。我在客户端和服务器之间建立了连接，但只有空值。我不明白我的错误。我参考了很多网站，但我得到了相同的代码。

```
@Path("generic")
@WebService
public class GenericResource {

    @Context
    private UriInfo context;
    @Context
    private HttpServletResponse response;
    private String content = "content";

    /**
     * Creates a new instance of GenericResource
     */
    public GenericResource() {
    }
 @POST
    @Path("/upload")
    @Consumes(MediaType.MULTIPART_FORM_DATA)

    public Response uploadFile(
            @FormDataParam("file") InputStream uploadedInputStream,
            @FormDataParam("file") FormDataContentDisposition fileDetail) {

        String uploadedFileLocation = "C://Users/SPC/Parvathy/upload" + fileDetail.getFileName();

        // save it
        writeToFile(uploadedInputStream, uploadedFileLocation);

        String output = "File uploaded to : " + uploadedFileLocation;

        return Response.status(200).entity(output).build();

    }

    // save uploaded file to new location
    private void writeToFile(InputStream uploadedInputStream,
            String uploadedFileLocation) {

        try {
            OutputStream out = new FileOutputStream(new File(
                    uploadedFileLocation));
            int read = 0;
            byte[] bytes = new byte[1024];

            out = new FileOutputStream(new File(uploadedFileLocation));
            while ((read = uploadedInputStream.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }
            out.flush();
            out.close();
        } catch (IOException e) {

            e.printStackTrace();
        }
      }
    }

    public class CorsFilter extends OncePerRequestFilter {

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {
      //  if (request.getHeader("Access-Control-Request-Method") != null && "OPTIONS".equals(request.getMethod())) {
            // CORS "pre-flight" request
                response.addHeader("Content-Type",
                "multipart/form-data");
            response.addHeader("Access-Control-Allow-Origin", "http://127.0.0.1:8888");
            response.addHeader("Access-Control-Allow-Methods",  "PUT, GET, POST, DELETE, OPTIONS");
            response.addHeader("Access-Control-Allow-Headers","origin, access-control-allow-methods, content-type, access-control-allow-origin, access-control-allow-headers");
            response.addHeader("Access-Control-Max-Age", "1800");//30 min
       // }
        filterChain.doFilter(request, response);
      }
    } 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:09:18.230

试试这个。在您的`GWT`代码中，您使用`FileUpload`的是 class.and 名称是`upload`. 因此 GWT 将生成一个带有名称的输入字段`upload`*（检查您的 html 源以确认）*。因此，当您 sumit 表单时，浏览器将字段作为具有相同名称的参数发送。在您的网络服务中，您必须捕获具有相同名称的参数 .. 像这样更改您的代码

```
 public Response uploadFile(
            @FormDataParam("upload") InputStream uploadedInputStream,
            @FormDataParam("upload") FormDataContentDisposition fileDetail) {

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:15:48.513

你试过这样的基于事件的方法[吗](http://www.adrianwalker.org/2011/03/gwt-file-upload-with-event-based.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:41:59.393

您必须创建一个 servlet，并创建 servlet 映射。有关如何与服务器通信的完整详细信息，请参阅以下链接

[https://developers.google.com/web-toolkit/doc/1.6/DevGuideServerCommunication](https://developers.google.com/web-toolkit/doc/1.6/DevGuideServerCommunication)

# asp.net - 运行 ColdFusion 和 .Net 的 IIS 服务器上的 WebResource.axd 错误

> ID：14272522
> 
> 赞同：0
> 
> 时间：2013-01-11T05:55:42.563
> 
> 标签：asp.net

在开始之前，我遵循了这里的建议：

[获取“WebResource.axd 处理程序必须在配置中注册才能处理此请求。” 错误](https://stackoverflow.com/questions/2654514/getting-the-webresource-axd-handler-must-be-registered-in-the-configuration-to)

我曾使用那里的建议来解决我过去在另一台服务器上运行 MVC 4 应用程序时遇到的类似问题。

我正在尝试将我们的一个网站升级到 .Net 4.0，因为我想将其转换为 MVC 4 应用程序。我正计划*零碎地完成它，并且花了很多时间检查旧的基于表单的网站项目中的所有对象并设置它们，以便它们可以作为一部分在 .Net 4 框架上成功运行混合（暂时）网站。大多数情况下，这涉及将类从 App_Code 文件夹中移出到常规文件夹中，并将它们标记为要复制/编译。

现在我有一个新问题。当我转到尝试调用嵌入式资源的页面时，我收到 WebResource.axd 错误：

```
The WebResource.axd handler must be registered in the configuration to process this request. 
```

堆栈跟踪：

```
 [InvalidOperationException: The WebResource.axd handler must be registered in the configuration to process this request.

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <httpHandlers>
            <add path="WebResource.axd" verb="GET" type="System.Web.Handlers.AssemblyResourceLoader" validate="True" />
        </httpHandlers>
    </system.web>
</configuration>]
   System.Web.Handlers.AssemblyResourceLoader.GetWebResourceUrlInternal(Assembly assembly, String resourceName, Boolean htmlEncoded, Boolean forSubstitution, IScriptManager scriptManager) +4179118
   System.Web.Handlers.AssemblyResourceLoader.GetWebResourceUrl(Type type, String resourceName, Boolean htmlEncoded, IScriptManager scriptManager) +956
   System.Web.UI.ClientScriptManager.RenderWebFormsScript(HtmlTextWriter writer) +257
   System.Web.UI.Page.RenderWebFormsScript(HtmlTextWriter writer) +86
   System.Web.UI.Page.BeginFormRender(HtmlTextWriter writer, String formUniqueID) +1847
   System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer) +95
   System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer) +48
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +11423020
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +246
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +11423020
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +246
   System.Web.UI.Page.Render(HtmlTextWriter writer) +40
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +11423020
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5290 
```

LIS 我已经在另一个我从头开始编写的 MVC 4 站点上看到并修复了这个错误。发生这种情况是因为 ColdFusion 也安装在服务器上，并且是托管 ColdFusion 和 .Net 应用程序的 IIS 服务器的一个已知问题。所以我听从了这里的建议：

[获取“WebResource.axd 处理程序必须在配置中注册才能处理此请求。” 错误](https://stackoverflow.com/questions/2654514/getting-the-webresource-axd-handler-must-be-registered-in-the-configuration-to)

我将该站点配置为以“经典”模式运行，并且运行良好。

但这一次不同。我尝试将应用程序池设置为“经典”模式。我们的管理员为我设置了这种方式，但后来我遇到了 404/500 错误。然后他们启用了 ISAPI 和 CGI​​，这让我回到了上面的 WebResource.axd 错误，这次是在经典模式下运行时。

所以我尝试了上面链接中的一些其他建议。具体来说，我遵循了这个建议[（相同的链接，第二个答案）](https://stackoverflow.com/questions/2654514/getting-the-webresource-axd-handler-must-be-registered-in-the-configuration-to)：

> 为此，请转到 IIS 中的相关站点，双击“IIS”部分下的“处理程序映射”，然后找到名为“AboMapperCustom-XXXXXX”之类的处理程序，路径为“*”。选择条目并单击侧栏中的“删除”。这只会删除您的应用程序的映射，因此不会破坏服务器上任何现有的 CF 站点。

当我请求我们的管理员这样做时，我收到了回复：

> “AboMapperCustom-94661 * 处理程序来自父站点，但在各个站点 web.config 中被删除 - 我无法将它们从默认/父站点中删除，因为它确实会破坏 ColdFusion。”

我也尝试过这里的解决方案[http://blog.fredrikhaglund.se/blog/2008/08/26/solution-to-webresourceaxd-exception/](http://blog.fredrikhaglund.se/blog/2008/08/26/solution-to-webresourceaxd-exception/)我在 web.config 中的 httpHandlers 部分看起来像：

```
<system.web>
   ...
   <httpHandlers>
     <add path="WebResource.axd" verb="GET" type="System.Web.Handlers.AssemblyResourceLoader" validate="true" />
     <add path="*/ext.axd" verb="*" type="Ext.Net.ResourceHandler" validate="false" />
     <add path="glimpse.axd" verb="GET,POST" type="Glimpse.Core.Handler" />
   </httpHandlers> 
```

我的问题的很大一部分是我没有对 IIS 服务器的管理员访问权限，所以我不能自己进去解决这个问题。我正在摸索下一步该做什么，似乎我有几个选择：

1.  设置一个错误处理程序来捕获此错误并重定向到“建设中”页面，直到该页面为新站点重写。这是可能的，但并不理想。
2.  不知何故，在 Coldfusion 映射之前设置了一个过滤器来挑选 axd 请求（我只是一个模糊的概念，不知道它如何/为什么会在没有进一步研究的情况下工作）。
3.  提出另一个配置请求，由我们的管理员运行，这可能会解决问题。

有没有人有任何与#3 相关的想法可以解决我的问题？如果没有，我可能会在最终选择选项 1 之前对选项 2 和 3 进行几个小时的研究。解决这个问题的最佳方法可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:22:06.243

我想出了一个解决我的问题的方法。

阅读[.Net 4.0 的 ASP.Net 配置设置后](http://msdn.microsoft.com/en-us/library/b5ysx397%28v=vs.100%29.aspx)

我找到[了 httpHandlers](http://msdn.microsoft.com/en-us/library/e0dzxdza%28v=vs.100%29.aspx)部分的删除元素

当我像这样向我的 httpHandlers 添加删除时：

```
<httpHandlers>
      <remove path="WebResource.axd" verb="GET"/>
      <add path="WebResource.axd" verb="GET" type="System.Web.Handlers.AssemblyResourceLoader" validate="true" /> 
```

有用！

# mysql - MySQL WHERE IN 查询

> ID：14272525
> 
> 赞同：0
> 
> 时间：2013-01-11T05:55:58.073
> 
> 标签：mysql, sql

有提要和点赞表，首先我从提要表中查询数据，然后尝试为获取提要的点赞表获取点赞。

饲料表：

```
`feed_id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
`feed_postid` INT(15) UNSIGNED NOT NULL,
`feed_type` VARCHAR(40) NOT NULL,
`feed_userid` INT(12) UNSIGNED NOT NULL,
`feed_privacy` TINYINT(1) UNSIGNED NOT NULL,
`feed_uids` TEXT NULL,
`feed_title` VARCHAR(180) NULL DEFAULT NULL,
`feed_content` TEXT NOT NULL,
`feed_dateline` DATETIME NOT NULL, 
```

喜欢表：

```
like_id
like_userid
like_type
like_postid 
```

现在我想要查询表格喜欢这样的表格

```
IN((1, 'status'),(2,'image'),(3, 'status'))
// IN((like_postid,like_type),(like_postid,like_type),(like_postid,like_type)) 
```

示例查询：

```
SELECT * FROM likes WHERE like_postid = 1 AND like_type = 'status' OR like_postid = 2 AND like_type = 'image' OR like_postid = 5 AND like_type = 'status'; 
```

现在我想用 IN 函数重写顶部查询

```
SELECT * FROM likes WHERE like_postid, like_type IN((1,'status'), (2,'image'), (5, 'status')); --but this is not work, there is any way to do this? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:13:41.533

你可以试试这个

```
SELECT * FROM likes WHERE (like_postid, like_type) IN ((1,'status'),(2,'image'),(5,'status')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:36:19.740

这是执行前 N 个分析的查询之一 检查它

SELECT * FROM likes WHERE like_type in ('status','image') order by like_postid limit 2 union all SELECT * FROM likes WHERE like_type in ('status','image') order by like_postid offset 4 limit 1

# cassandra - Cassandra 默认列限制为 100

> ID：14272529
> 
> 赞同：1
> 
> 时间：2013-01-11T05:56:31.513
> 
> 标签：cassandra, limit

我已经使用 Java 成功地将一些列插入到 cassandra 中。但是当我尝试列出 cassandra 客户端中的所有列时，它说，列数是有限的，并且限制是 100。我需要的远不止这些。也许有人知道，如何改变这个限制？

这是我从 cassandra 的客户那里得到的：

```
[default@Keyspace1] list user;        
Using default limit of 100
Using default column limit of 100
-------------------
RowKey: 313030
=> (column=45454531, value=56616c756531, timestamp=1357880630549)
=> (column=4545453130, value=56616c75653130, timestamp=1357880630580)
=> (column=454545313030, value=56616c7565313030, timestamp=1357880630682)
=> (column=45454531303030, value=56616c756531303030, timestamp=1357880631306)
=> (column=454545313031, value=56616c7565313031, timestamp=1357880630682)
=> (column=454545313032, value=56616c7565313032, timestamp=1357880630683)
=> (column=454545313033, value=56616c7565313033, timestamp=1357880630684)
=> (column=454545313034, value=56616c7565313034, timestamp=1357880630684)
=> (column=454545313035, value=56616c7565313035, timestamp=1357880630685)
=> (column=454545313036, value=56616c7565313036, timestamp=1357880630686)
=> (column=454545313037, value=56616c7565313037, timestamp=1357880630686)
=> (column=454545313038, value=56616c7565313038, timestamp=1357880630687)
=> (column=454545313039, value=56616c7565313039, timestamp=1357880630688)
=> (column=4545453131, value=56616c75653131, timestamp=1357880630581)
=> (column=454545313130, value=56616c7565313130, timestamp=1357880630689)
=> (column=454545313131, value=56616c7565313131, timestamp=1357880630689)
=> (column=454545313132, value=56616c7565313132, timestamp=1357880630690)
=> (column=454545313133, value=56616c7565313133, timestamp=1357880630691)
=> (column=454545313134, value=56616c7565313134, timestamp=1357880630691)
=> (column=454545313135, value=56616c7565313135, timestamp=1357880630692)
=> (column=454545313136, value=56616c7565313136, timestamp=1357880630693)
=> (column=454545313137, value=56616c7565313137, timestamp=1357880630694)
=> (column=454545313138, value=56616c7565313138, timestamp=1357880630694)
=> (column=454545313139, value=56616c7565313139, timestamp=1357880630695)
=> (column=4545453132, value=56616c75653132, timestamp=1357880630583)
=> (column=454545313230, value=56616c7565313230, timestamp=1357880630696)
=> (column=454545313231, value=56616c7565313231, timestamp=1357880630697)
=> (column=454545313232, value=56616c7565313232, timestamp=1357880630698)
=> (column=454545313233, value=56616c7565313233, timestamp=1357880630698)
=> (column=454545313234, value=56616c7565313234, timestamp=1357880630699)
=> (column=454545313235, value=56616c7565313235, timestamp=1357880630701)
=> (column=454545313236, value=56616c7565313236, timestamp=1357880630702)
=> (column=454545313237, value=56616c7565313237, timestamp=1357880630703)
=> (column=454545313238, value=56616c7565313238, timestamp=1357880630705)
=> (column=454545313239, value=56616c7565313239, timestamp=1357880630706)
=> (column=4545453133, value=56616c75653133, timestamp=1357880630584)
=> (column=454545313330, value=56616c7565313330, timestamp=1357880630707)
=> (column=454545313331, value=56616c7565313331, timestamp=1357880630708)
=> (column=454545313332, value=56616c7565313332, timestamp=1357880630709)
=> (column=454545313333, value=56616c7565313333, timestamp=1357880630711)
=> (column=454545313334, value=56616c7565313334, timestamp=1357880630712)
=> (column=454545313335, value=56616c7565313335, timestamp=1357880630713)
=> (column=454545313336, value=56616c7565313336, timestamp=1357880630714)
=> (column=454545313337, value=56616c7565313337, timestamp=1357880630715)
=> (column=454545313338, value=56616c7565313338, timestamp=1357880630716)
=> (column=454545313339, value=56616c7565313339, timestamp=1357880630717)
=> (column=4545453134, value=56616c75653134, timestamp=1357880630586)
=> (column=454545313430, value=56616c7565313430, timestamp=1357880630718)
=> (column=454545313431, value=56616c7565313431, timestamp=1357880630719)
=> (column=454545313432, value=56616c7565313432, timestamp=1357880630720)
=> (column=454545313433, value=56616c7565313433, timestamp=1357880630721)
=> (column=454545313434, value=56616c7565313434, timestamp=1357880630722)
=> (column=454545313435, value=56616c7565313435, timestamp=1357880630722)
=> (column=454545313436, value=56616c7565313436, timestamp=1357880630723)
=> (column=454545313437, value=56616c7565313437, timestamp=1357880630724)
=> (column=454545313438, value=56616c7565313438, timestamp=1357880630725)
=> (column=454545313439, value=56616c7565313439, timestamp=1357880630725)
=> (column=4545453135, value=56616c75653135, timestamp=1357880630587)
=> (column=454545313530, value=56616c7565313530, timestamp=1357880630726)
=> (column=454545313531, value=56616c7565313531, timestamp=1357880630727)
=> (column=454545313532, value=56616c7565313532, timestamp=1357880630728)
=> (column=454545313533, value=56616c7565313533, timestamp=1357880630729)
=> (column=454545313534, value=56616c7565313534, timestamp=1357880630730)
=> (column=454545313535, value=56616c7565313535, timestamp=1357880630731)
=> (column=454545313536, value=56616c7565313536, timestamp=1357880630731)
=> (column=454545313537, value=56616c7565313537, timestamp=1357880630732)
=> (column=454545313538, value=56616c7565313538, timestamp=1357880630733)
=> (column=454545313539, value=56616c7565313539, timestamp=1357880630734)
=> (column=4545453136, value=56616c75653136, timestamp=1357880630588)
=> (column=454545313630, value=56616c7565313630, timestamp=1357880630735)
=> (column=454545313631, value=56616c7565313631, timestamp=1357880630736)
=> (column=454545313632, value=56616c7565313632, timestamp=1357880630736)
=> (column=454545313633, value=56616c7565313633, timestamp=1357880630737)
=> (column=454545313634, value=56616c7565313634, timestamp=1357880630738)
=> (column=454545313635, value=56616c7565313635, timestamp=1357880630739)
=> (column=454545313636, value=56616c7565313636, timestamp=1357880630740)
=> (column=454545313637, value=56616c7565313637, timestamp=1357880630740)
=> (column=454545313638, value=56616c7565313638, timestamp=1357880630741)
=> (column=454545313639, value=56616c7565313639, timestamp=1357880630742)
=> (column=4545453137, value=56616c75653137, timestamp=1357880630590)
=> (column=454545313730, value=56616c7565313730, timestamp=1357880630743)
=> (column=454545313731, value=56616c7565313731, timestamp=1357880630744)
=> (column=454545313732, value=56616c7565313732, timestamp=1357880630744)
=> (column=454545313733, value=56616c7565313733, timestamp=1357880630745)
=> (column=454545313734, value=56616c7565313734, timestamp=1357880630746)
=> (column=454545313735, value=56616c7565313735, timestamp=1357880630747)
=> (column=454545313736, value=56616c7565313736, timestamp=1357880630748)
=> (column=454545313737, value=56616c7565313737, timestamp=1357880630748)
=> (column=454545313738, value=56616c7565313738, timestamp=1357880630749)
=> (column=454545313739, value=56616c7565313739, timestamp=1357880630750)
=> (column=4545453138, value=56616c75653138, timestamp=1357880630591)
=> (column=454545313830, value=56616c7565313830, timestamp=1357880630751)
=> (column=454545313831, value=56616c7565313831, timestamp=1357880630752)
=> (column=454545313832, value=56616c7565313832, timestamp=1357880630752)
=> (column=454545313833, value=56616c7565313833, timestamp=1357880630753)
=> (column=454545313834, value=56616c7565313834, timestamp=1357880630754)
=> (column=454545313835, value=56616c7565313835, timestamp=1357880630755)
=> (column=454545313836, value=56616c7565313836, timestamp=1357880630756)
=> (column=454545313837, value=56616c7565313837, timestamp=1357880630757)
=> (column=454545313838, value=56616c7565313838, timestamp=1357880630758) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T07:46:09.747

list 命令的格式为

```
 list <ColumnFamilyName> limit X columns Y; 
```

在哪里

*   限制：要返回的行数。默认值为 100。

*   columns：每行返回的列数。默认值为 100。

所以只要给：

```
 list user limit 150 columns 200; 
```

# c# - 在 windows8 中获取 webview 的选定内容

> ID：14272531
> 
> 赞同：1
> 
> 时间：2013-01-11T05:56:59.160
> 
> 标签：c#, xaml, windows-8, webview

在WebView控件中，我们可以选择内容，是否可以获取WebView的选择内容呢？我在这个文本框中没有找到诸如“SelectedText”之类的事件，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T10:07:13.293

[WebView.ScriptNotify](http://msdn.microsoft.com/library/windows/apps/br227713)可以帮助你

# recursion - 何时使用纯递归以及何时使用循环/递归？

> ID：14272533
> 
> 赞同：8
> 
> 时间：2013-01-11T05:57:12.450
> 
> 标签：recursion, clojure

“纯递归”在这里是一个虚构的术语，请原谅。

这是使用两种不同递归方法的两个示例。一个比另一个的使用指南是什么？

```
(defn take-while
  "Returns a lazy sequence of successive items from coll while
  (pred item) returns true. pred must be free of side-effects."
  {:added "1.0"
   :static true}
  [pred coll]
  (lazy-seq
   (when-let [s (seq coll)]
       (when (pred (first s))
         (cons (first s) (take-while pred (rest s)))))))

(defn take-last
  "Returns a seq of the last n items in coll.  Depending on the type
  of coll may be no better than linear time.  For vectors, see also subvec."
  {:added "1.1"
   :static true}
  [n coll]
  (loop [s (seq coll), lead (seq (drop n coll))]
    (if lead
      (recur (next s) (next lead))
      s))) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T06:04:01.520

需要考虑的几个因素：

*   **循环/递归不消耗堆栈空间**- 因此，如果您要进行深度嵌套递归，否则它是正确的选择，否则可能会导致`StackOverflowError`
*   **loop/recur 更快**- 它是 Clojure 中最有效的构造之一，正确完成它应该与 Java 代码中等效 for 循环的速度相匹配
*   **普通递归更惯用**- 平均而言，它倾向于为您提供更清晰、更具功能性的代码，而循环/递归倾向于将您推向命令式、迭代式风格
*   **循环/递归有更多的限制**——你只能在尾部位置递归，你不能在两个不同的函数之间进行相互递归，等等。有时根本不可能使循环/递归工作，在其他时候你可能需要扭曲你的代码来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:23:46.447

`lazy-seq`使用/`lazy-cons`机制的唯一原因是生成惰性序列。如果您不需要它们，那么`loop`/`recur`无疑应该使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:16:02.760

首先在编写函数时使用普通递归。如果可以的话，一旦一切正常，然后将其更改为重复出现。

TCO 的一个问题是，如果你阻止递归，你会得到无限的外观。如果没有，您的代码会因堆栈溢出而崩溃，这正是您想要的。当我第一次听说它时，我不喜欢 recur 的想法——大多数优化应该只是发生——但是能够将其关闭是很好的。

# php - 如何使用 php dom xpath 或 regex 获取样式表 URL？

> ID：14272535
> 
> 赞同：3
> 
> 时间：2013-01-11T05:57:13.127
> 
> 标签：php, dom, xpath

我正在构建用于合并所有屏幕 css 样式表的自定义库，但我不确定如何`screen`仅获取媒体类型的样式表。例如：

```
<!-- This should be fetched -->
<link href="http://www.domain.com/style.css" rel="stylesheet" type="text/css" />
<!-- This should be fetched -->
<link href="http://www.domain.com/ie.css" rel="stylesheet" type="text/css" />

<style type="text/css" media="all">
  <!-- This should be fetched -->
  @import url("http://static.php.net/www.php.net/styles/phpnet.css");
</style>

<style type="text/css" media="screen">
   <!-- This should be fetched -->
  @import url("http://static.php.net/www.php.net/styles/site.css");
</style>

<style type="text/css" media="print">
  <!-- This should NOT be fetched since it is media type print -->
  @import url("http://static.php.net/www.php.net/styles/print.css");
</style> 
```

给定上面的字符串，我只想提取`href`和`url`值。我不知道该怎么做。虽然我确实尝试过：

```
preg_match_all("/(url\([\'\"]?)([^\"\'\)]+)([\"\']?\))/", $html, $matches);
print_r($matches); 
```

但它不返回它。

任何使用 php dom、xpath 或 regex 的解决方案来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T17:30:48.950

Here is the working code ! I have created a codepad pastebin also for you: [http://codepad.org/WQzcO3k3](http://codepad.org/WQzcO3k3)

```
<?php

$inputString = '<!-- This should be fetched -->
<link href="http://www.domain.com/style.css" rel="stylesheet" type="text/css" />
<!-- This should be fetched -->
<link href="http://www.domain.com/ie.css" rel="stylesheet" type="text/css" />

<style type="text/css" media="all">
  <!-- This should be fetched -->
  @import url("http://static.php.net/www.php.net/styles/phpnet.css");
</style>

<style type="text/css" media="screen">
   <!-- This should be fetched -->
  @import url("http://static.php.net/www.php.net/styles/site.css");
</style>

<style type="text/css" media="print">
  <!-- This should NOT be fetched since it is media type print -->
  @import url("http://static.php.net/www.php.net/styles/print.css");
</style>';
$outputUrls = array();

@$doc = new DOMDocument();
@$doc->loadHTML($inputString);
$xml = simplexml_import_dom($doc); // just to make xpath more simple

$linksOrStyles = $xml->xpath('//*[@rel="stylesheet" or @media="all" or @media="screen"]');     

//print_r($linksOrStyles);

foreach ($linksOrStyles as $linkOrStyleSimpleXMLElementObj)
{
    if ($linkOrStyleSimpleXMLElementObj->xpath('@href') != false) {
      $outputUrls[] = $linkOrStyleSimpleXMLElementObj['href'] . '';
    } else {
        //get the 'url' value.
        $httpStart = strpos($linkOrStyleSimpleXMLElementObj.'', 'http://');
        $httpEnd = strpos($linkOrStyleSimpleXMLElementObj.'', '"', $httpStart);
        $outputUrls[] = substr($linkOrStyleSimpleXMLElementObj.'', $httpStart, ($httpEnd - $httpStart));
        //NOTE:Use preg_match only to get URL. i had to use strpos here 
        //since codepad.org doesnt suport preg
        /*
        preg_match(
            "#((http|https|ftp)://(\S*?\.\S*?))(\s|\;|\)|\]|\[|\{|\}|,|\"|'|:|\<|$|\.\s)#ie",
            ' ' . $linkOrStyleSimpleXMLElementObj,
            $matches
        );
        print_r($matches);
        $outputUrls[] = $matches[0];
        */
    }
}

echo 'Output Url list: ';
print_r($outputUrls);

?> 
```

# java - Excel 警告：文件的格式与文件扩展名指定的格式不同

> ID：14272537
> 
> 赞同：3
> 
> 时间：2013-01-11T05:57:29.987
> 
> 标签：java, excel, apache-poi, content-type

在我的应用程序中，我使用 apache POI 3.8 生成报告。

该系统工作正常，并以 xls 格式生成报告。

但是当我打开 xls 文件时，它在打开文件之前给了我警告。

![在此处输入图像描述](../Images/acdac5af1011272d5541a611a03b1337.png)

这是我正在使用的响应类型...

```
response.setHeader("Content-Type", "application/vnd.ms-excel");         
response.setHeader("Content-Disposition","attachment; filename="+xlsFileName+".xls"); 
```

我也试过...

```
response.setHeader("Content-Disposition","attachment; filename="+xlsFileName+".xls");
 response.setHeader("Content-Type", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"); 
```

但问题依然存在。在这两种情况下，如果我将文件扩展名用作“.xlsx”，那么它不会发出任何警告并且工作正常。

那么任何人都可以建议我为什么它会警告 MS-Excel 2003 格式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T06:15:52.280

Apache POI 使用 HSSFWorkbook 对象创建 xls 文件，使用 XSSFWorkbook 对象创建 xlsx 文件。请检查您用于创建 xls 的对象。

[http://poi.apache.org/spreadsheet/quick-guide.html](http://poi.apache.org/spreadsheet/quick-guide.html)

# ruby-on-rails - 来自 bot@heroku.com 的电子邮件：“需要采取行动：Rails 安全漏洞”

> ID：14272545
> 
> 赞同：-1
> 
> 时间：2013-01-11T05:58:19.803
> 
> 标签：ruby-on-rails, security, email, heroku

这是真的吗...？

电子邮件：

“在 Ruby on Rails 框架中发现了一个严重的安全漏洞。此漏洞影响几乎所有运行 Rails 的应用程序，并且已经提供了一个补丁。Heroku 安全团队检测到您正在 Heroku 上运行一个或多个 Rails 应用程序未打补丁并有风险：

应用程序 liveboardv1 (unknown) knouse (3.2.8) audubon (unknown) liveboardalpha (3.2.8) 您可以通过运行此脚本获取所有受影响的 Heroku 应用程序的完整列表。请立即将受影响的应用程序升级到下面列出的任何安全版本的 Rails，以解决此安全漏洞。以下 Rails 版本已被修补并被认为不受此漏洞的影响： 3.2.11 3.1.10 3.0.19 2.3.15 如果您不升级，攻击者可以轻松访问您的应用程序及其数据，并运行任意代码或命令。Heroku 建议立即升级到补丁版本。如何升级：在受影响的应用程序中打开 Gemfile 并将 Rails 版本更改为上面列出的版本：rails '3.2.11'

然后运行： $ bundle update rails

然后将结果提交到 git，并推送到 Heroku： $ git push heroku master

重复任何易受影响的应用程序。如果您此时无法升级，请考虑启用维护模式或将您的应用程序缩小到零 dynos。任何运行不安全版本的应用程序都存在风险。谢谢你，Heroku 安全”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:34:30.093

刚收到类似的邮件，看起来很正宗。也看到了[这个链接](http://www.itpro.co.uk/644983/ruby-on-rails-security-glitch-puts-thousands-of-websites-at-risk)。无论如何，升级到稳定版本似乎是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:47:24.747

是真的。周围的 RoR 应用程序应该更新并且处于危险之中。

# eclipse - @Given 语句未在 cucumber-jvm 中运行

> ID：14272546
> 
> 赞同：0
> 
> 时间：2013-01-11T05:58:21.480
> 
> 标签：eclipse, bdd, selenium-webdriver, cucumber-jvm

```
import package org.test.launch;
import static junit.framework.Assert.*;
import java.util.concurrent.TimeUnit;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import cucumber.annotation.After;
import cucumber.annotation.Before;
import cucumber.annotation.en.Given;
import cucumber.annotation.en.Then;
import cucumber.annotation.en.When;

public class GoogleSearch {

private WebDriver driver;

@Before
public void setup(){
    driver = new FirefoxDriver();
}

@After
public void teardown(){
    driver.quit();      
}

@Given("^Search for different inputs in google$")
public void OpenGooglePage(){
    driver.get("http://www.google.com.au");
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    driver.findElement(By.id("gbqfq")).sendKeys("Planit");
}

@When("^I search for (.*) in google search$")
public void search(String input){
    WebElement searchfield = driver.findElement(By.id("gbqfq"));
    searchfield.sendKeys(input);
    this.driver.findElement(By.id("gbqfba")).submit();
}

@Then("^I should be able to see (.*) in search results$")
public void result(String output){
    WebElement searchresult = driver.findElement(By.cssSelector(".l"));
    assertEquals(searchresult.getText(), output);
} 
```

}

============
功能文件
============
功能：搜索字符串

场景：搜索

```
Given Search for any string in google
When I search for stackoverflow in google search
Then I should be able to see stackoverflow in search results 
```

=========
胶水代码
=========

```
package org.test.launch;

import cucumber.junit.Cucumber;
import org.junit.runner.RunWith;

@RunWith(Cucumber.class)
public class SearchTest {
} 
```

只有@Given 语句正在运行@When 和@Then 语句没有执行。

在控制台输出上，我可以看到以下错误

java.lang.NullPointerException at ?.当我在谷歌搜索中搜索计划时（org\test\launch\GoogleSearch.feature:6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:49:40.443

发现问题：

问题在于@Given 声明。

步骤定义中的功能文件 Given 语句和 @Given 语句不相同，因此代码未运行。

# assembly - x86 div 指令错误

> ID：14272550
> 
> 赞同：0
> 
> 时间：2013-01-11T05:58:47.243
> 
> 标签：assembly, x86, division

我正在使用 Windows 7，但我也尝试使用 dosbox 上的代码

我想知道如何在 16 位模式下逐字分割双字

我用fasm。并制作 .com 文件

以下代码运行正确，但是当 dx 高于 0 时它只是关闭仿真窗口

```
org 100h
mov dx, 0
mov ax, 10
mov bx, 10
div bx
add ax, '0'
int 29h   
mov ax, 00h
int 16h
mov ax, 4c00h
int 21h 
```

如果我像下面这样更改代码。当 dx 高于 0xf 时它会关闭，我不知道为什么。

```
org 100h
mov dx, 0xf
mov ax, 10
div word [divby]
add ax, '0'
int 29h
mov ax, 00h
int 16h
mov ax, 4c00h
int 21h
divby:
        dw 0x10 
```

如何在不关闭错误的情况下逐字分割双字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:51:16.633

当 dx:ax / bx 无法放入 ax 时（或当一除以零时），会发生“关闭”或除法溢出异常。

假设一个在 aa:bb:cc:dd 中有一个“大”值，那么除以 bx 一个必须执行以下步骤：

```
 lea si,[aa]
 lea di,[result]
 mov dx,0
 mov cx,4
 again:
 lodsw      ;; load ax
 div bx
 stosw      ;; store result of division
 loop again
 ;; at this point dx will contain the remainder of the big_int % bx 
```

# twitter - windows phone 8 新的情感图标

> ID：14272552
> 
> 赞同：0
> 
> 时间：2013-01-11T05:59:01.767
> 
> 标签：twitter, windows-phone-8, emoji

我正在为 Windows phone 8 开发 Twitter 客户端。在 Windows phone 8 中，微软添加了新的表情符号图标，并且可以从推文窗口发推文。

我的问题是，每当我在推特上发布表情符号图标时，推特状态（推文列表）只显示方框。

请帮我解决这个问题，以便可以在时间轴中查看正确的表情符号图标。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:24:06.687

尝试使用 Uri.EscapeDataString 对状态文本进行编码。

# .net - WCF 服务的记录器

> ID：14272555
> 
> 赞同：0
> 
> 时间：2013-01-11T05:59:13.733
> 
> 标签：.net, wcf, logging, log4net-configuration

我想在 WCF 服务中使用一个记录器，它有两个服务暴露在外面。而且我想要一个基于每日的（每天都有新的基于日期的记录器文件），还需要两个服务的单独的记录器文件。我可以使用哪些 .NET 记录器，可以在哪里实现上述功能？

我尝试使用 Log4Net。但我没有得到如何更改日志文件名，除了在配置文件中指定的，以满足我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:02:50.567

这是一个你可以尝试的例子。滚动文件附加程序。将每 10MB 创建一个新文件。日期更改时也会生成新文件。

```
<appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
  <param name="File" value="C:\\SomeFolder\\SomeFileName" />
  <param name="AppendToFile" value="true" />
  <param name="MaxSizeRollBackups" value="-1" />
  <param name="MaximumFileSize" value="10MB" />
  <param name="RollingStyle" value="Composite" />
  <param name="StaticLogFileName" value="false" />
  <param name="datePattern" value="yyyyMMdd'.log'" />
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%date [%-7logger] [%-5level] [%5thread] - %message%newline" />
  </layout>
</appender> 
```

如果你想让不同的东西去不同的文件，你可以设置多个附加程序。然后，您将特定的日志类别与特定的附加程序相关联。这里有一个例子：-
[根据情况将log4net登录到不同的appender](https://stackoverflow.com/questions/1677877/logging-in-log4net-to-different-appenders-based-on-circumstances)

# c# - 将 TextBox 解析为 SqlDbType.Date 为“dd.MM.yyyy”

> ID：14272557
> 
> 赞同：3
> 
> 时间：2013-01-11T05:59:26.127
> 
> 标签：c#, sql-server, ado.net, datetime-parsing, sqldbtype

我希望日期在页面上看起来像 dd.MM.yyyy。我喜欢这种方式，它与文化无关。

我不知道如何使它正确。

```
cmd.Parameters.Add("@eventdate", SqlDbType.Date).Value = dateAddTxtBox.Text; 
```

格式例外：

> 字符串未被识别为有效的 DateTime

我也尝试了许多类似`DateTime.ParseExact(dateAddTxtBox.Text, "dd.MM.yyyy", null)`或使用`System.Globalization.CultureInfo.InvariantCulture`的片段。没有任何帮助！

或者也许它会在 SQL 过程方面做得更好，不是吗？

```
CREATE PROCEDURE add_history
@user       VARCHAR(20),
@eventdate  DATE,
...
INSERT INTO History(userid, eventdate, ...)
VALUES ((SELECT userid FROM Users.SUsers WHERE suname=@user), @eventdate, ...) 
```

当我没有用模式格式化我的文本框时，一切都很好：

```
<asp:TextBox id="dateAddTxtBox" runat="server" ReadOnly="True" />
<asp:CalendarExtender ID="AddTxtBoxCalendarExtender" runat="server" Enabled="True" TargetControlID="dateAddTxtBox" Format="dd.MM.yyyy" ... /> 
```

升级版：

稍微提一下>> TextBox 上有只读属性。这就是为什么它没有工作！

现在的问题是，跳过是否正确`ReadOnly="True"`？我不希望用户直接在框中编辑日期。

UPD2：

`ReadOnly="True"`根本没有意义。它应该可以正常工作！我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:07:29.830

不要指定`SqlDbType.Date`. 相反，依靠自动检测，它将起作用：

```
System.DateTime dateValue = DateTime.ParseExact(...);
command.Parameters.AddWithValue("@name", dateValue); 
```

# wordpress - 如何为我自己的插件使用 WordPress 3.5 媒体管理器库工具

> ID：14272562
> 
> 赞同：3
> 
> 时间：2013-01-11T05:59:59.013
> 
> 标签：wordpress, media, wordpress-3.5

在“创建图库”选项卡下的 WordPress 3.5 媒体管理器中，用户可以选择多个图像，然后可以在第二页中重新排序图像。完成后，它会插入一个短代码，例如：`[gallery ids="895,1007,986"]`

我想使用相同的界面，以便用户可以选择和重新排序图像。但是，我不想返回简码，而是只返回图像的 ID 列表，如下所示：`895,1007,986`

另一个重要的事情是我的按钮将位于元框中，并且 ID 列表不会放置在 TinyMCE 后编辑区域内。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T06:10:27.457

你可以`a = wp.media.gallery.edit('[gallery ids="2,1,3..."]');`像 Wordpress 在 media-editor.js 中那样调用。

我不确定什么事件可以捕获更新，我找到了`a.on('all',function(n,a) {console.log(n); console.log(a)})`

注意日志中的“更新”，以及`models`带有图像数组的对象。因此，使用图库选择器的最快解决方案是：

```
wp.media.gallery.edit('[gallery ids="numberlist"]').on('update',function(obj)
  { do something with obj.models)}) 
```

# java - Double to String，如何删除点后的0

> ID：14272563
> 
> 赞同：4
> 
> 时间：2013-01-11T06:00:01.627
> 
> 标签：java, android

> **可能重复：**
> [如何很好地将浮动类型格式化为字符串？](https://stackoverflow.com/questions/703396/how-to-nicely-format-floating-types-to-string)

我有号码：

```
Double d1=(Double)0;
Double d2=(Double)2.2;
Double d3=(Double)4; 
```

当我使用 to String 时，我得到 0.0、2.2、4.0，但我想看到 0、2.2、4。我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T06:09:23.860

使用`DecimalFormat.format`insted `Double.toString`：

```
Double d1 = (Double)0.0;
Double d2 = (Double)2.2;
Double d3 = (Double)4.0;

// Example: Use four decimal places, but only if required
NumberFormat nf = new DecimalFormat("#.####");

String s1 = nf.format(d1); // 0
String s2 = nf.format(d2); // 2.2
String s3 = nf.format(d3); // 4 
```

你甚至不需要`Double`s ，`double`s 就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:09:17.790

> 首先使用 String.valueof(YOUR_VARIABLE) 将您的 Double 转换为 String

然后使用下面的功能来做到这一点。

```
private String getyourNumber(String NUMBER) {
    if(!NUMBER.contains(".")) {
        return NUMBER;
    }

    return NUMBER.replaceAll(".?0*$", "");
} 
```

然后转换你的

> 字符串加倍`Double.parseDouble(YOUR_RETURNED_STRING)`。

# jquery - Twitter bootstrap Modal - 删除以前的状态并重新开始

> ID：14272564
> 
> 赞同：0
> 
> 时间：2013-01-11T06:00:06.057
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

所以这是我的模态

```
 <div class="modal hide fade" >
<div class="modal-header">
    Some Content
</div>
<div class="modal-body" style="text-align:center;">
            <div class="tabbable tabs-left">
                <ul class="nav nav-tabs">
                        <li class="active"><a href="#a_c" data-toggle="tab">A</a></li>
                        <li><a href="#b_c" data-toggle="tab">B</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="a_c">
                AC
                        </div>
                        <div class="tab-pane" id="b_c">                
                BC
                    </div>
        </div> <!-- /tabbable --> 
    </div>
</div> 
```

当我选择选项卡 B 时，关闭模态并再次选择模态 - 状态与 B 保持一致。我希望模态像第一次那样重新开始，使用 A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:57:23.220

尝试 `$('#myModal').modal(); $('#myModal').modal('show');`

当你按下标签 B

# android - 运行时修改后从选项菜单中丢失的项目

> ID：14272567
> 
> 赞同：1
> 
> 时间：2013-01-11T06:00:28.450
> 
> 标签：android, menu, menuitem, android-4.0-ice-cream-sandwich, android-optionsmenu

我在 Android 4.0.4 HTC T-Mobile 上看到以下错误功能：

我的程序在运行时更改了选项菜单（即，将“开始”按钮替换为“停止”按钮）。不幸的是，溢出菜单消失了，并且至少有一个菜单项“丢失”了。乍一看，“更多”菜单项似乎被另一个菜单项取代，在我的例子中是“设置”。

这在 Android 2 上不会发生。

（我找到了一个解决方法，并发布这个以防其他人遇到这个问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:21:53.047

解决方法是不要让可见项目的数量减少。看起来Android 4在不需要时删除了“更多”项目，但在再次需要时无法添加它。

我已将我的代码从

```
private void doPrepareOptionsMenu(Menu menu) {
    boolean running = ...;
    menu.findItem(R.id.menu_stop).setVisible(running);
    menu.findItem(R.id.menu_start).setVisible(!running);
} 
```

到

```
private void doPrepareOptionsMenu(Menu menu) {
    boolean running = ...;
    if (running) {
        menu.findItem(R.id.menu_stop).setVisible(running);
        menu.findItem(R.id.menu_start).setVisible(!running);
    } else {
        menu.findItem(R.id.menu_start).setVisible(!running);
        menu.findItem(R.id.menu_stop).setVisible(running);
    }
} 
```

问题消失了。不同之处在于我们首先使一个项目可见，然后才使另一个项目不可见。

如果您从未在运行时更改过 Android 2 菜单，请了解它的工作原理：

```
SomeListener someListener = new SomeListener() {
    public void someStateChanged() {
        // This runs NOT on the UI thread
        runOnUiThread(new Runnable() {
            public void run() {
                updateUI();
            }
        });
     }
 } 
```

最后`updateUI()`调用代码

```
Menu menu = weakRefOptionsMenu.get();
if (null != menu) {
    doPrepareOptionsMenu(menu);
} 
```

当然，`onPrepareOptionsMenu()`也调用`doPrepareOptionsMenu()`：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    doPrepareOptionsMenu(menu);
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T16:55:18.407

与原始问题相关的是，您有一个默认情况下不可见的菜单项。如果您计划基于某些逻辑在运行时使该项目可见，它将不会出现在 4.0.4 设备上。修复方法是包含一个禁用的、空标题的可见项：

```
<item
    android:title=""
    android:visible="true"
    android:enabled="false"
    android:showAsAction="ifRoom"/>

<item
    android:id="@+id/my_item"
    android:title="My Item"
    android:visible="false"
    android:showAsAction="ifRoom"/> 
```

# c# - 带有 ActionNames 的 MVC4 WebApi 路由不允许通用“获取”

> ID：14272569
> 
> 赞同：2
> 
> 时间：2013-01-11T06:00:30.320
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我一直在尝试能够拥有多个“Get”方法同时还拥有默认的 /api/{controller} 时遇到了麻烦。这是一个带有虚拟代码的示例（是的，我意识到它会返回完全相同的）。

错误：`"Multiple actions were found that match the request"`当我尝试去`/api/courses`

去`/api/courses/all`工作正常，所以做`/api/courses/3`

```
// GET api/courses
public IEnumerable<Courses> Get()
{
    return Db.Courses.OrderBy(x => x.Name);
}

// GET api/courses/all
[ActionName("all")]
public IEnumerable<Courses> GetAll()
{
    return Db.Courses.OrderBy(x => x.Name);
}

// GET api/courses/id
[ActionName("all")]
public Courses Get(int id)
{
    return Db.Courses.Where(x => x.id == id);
} 
```

`RouteConfig`好像：

```
routes.MapHttpRoute(
       "ApiControllerOnly",
       "api/{controller}"
);

// Allow for numeric Ids to be passed in
routes.MapHttpRoute(
       "ApiControllerAndIntegerId",
       "api/{controller}/{id}",
       null,
       new { id = @"^\d+$" }
);

routes.MapHttpRoute(
       "ApiControllerAction",
       "api/{controller}/{action}"
); 
```

我想要做的是调用：

```
/api/courses - returns Get()
/api/courses/all - returns GetAll()
/api/courses/3 - returns Get(id = 3) 
```

编辑：

它还需要允许 Put、Post 等工作，例如`Putting`/api/courses/ 上的课程

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:27:22.240

> 错误：当我尝试转到 /api/courses 时，“发现多个与请求匹配的操作”

通过将路由的默认操作指定为“获取” `ApiControllerOnly`，我就可以开始`/api/courses`工作了。这适用于您的场景吗？

```
 routes.MapHttpRoute(
            name: "ApiControllerOnly",
            routeTemplate: "api/{controller}",
            defaults: new { action = "Get" }
        ); 
```

## 编辑：

如果您的 APIController 中有额外的 Put/Post/etc 方法，则应考虑`HttpMethodConstraint`在`ApiControllerOnly`路由上使用并为 Put/Post/etc 方法添加另一个路由（即`ApiControllerOnly2`）：

```
 config.Routes.MapHttpRoute(
            name: "ApiControllerOnly",
            routeTemplate: "api/{controller}",
            defaults: new { action = @"Get" },
            constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Get) }
        );

        config.Routes.MapHttpRoute(
            name: "ApiControllerOnly2",
            routeTemplate: "api/{controller}"
        );
        config.Routes.MapHttpRoute(
            name: "ApiControllerAndIntegerId",
            routeTemplate: "api/{controller}/{id}",
            defaults: null,
            constraints: new { id = @"^\d+$" }
        );

        config.Routes.MapHttpRoute(
            name: "ApiControllerAction",
            routeTemplate: "api/{controller}/{action}"
        ); 
```

# c# - 如何强制开发人员将属性应用于类？

> ID：14272570
> 
> 赞同：1
> 
> 时间：2013-01-11T06:00:34.887
> 
> 标签：c#, .net, attributes

我正在创建一个基类。我希望如果它被某个派生类继承，它必须应用一个属性，否则会引发编译错误。可能吗？

```
public class MyAttribte : Attribute
{
    public string TestString {get; set; }
}

public class Base
{
}

/*Attribute must be applied else throw compile time error.*/
[MyAttribte]
public class Derived : Base { } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:18:33.473

您不能强制，但如果`Attribute`未指定，您可以在运行时检查并抛出异常。

```
var d1 = new Derived1(); // OK
var d2 = new Derived2(); // throw error at run-time

public class Base
{
    public Base()
    {
        CheckCustomAttribute();

    }

    private void CheckCustomAttribute()
    {
        if (!(this.GetType() == typeof(Base))) // Ingore Base for attribute
        {
            //  var attr = System.Attribute.GetCustomAttributes(this.GetType()).SingleOrDefault(t=>t.GetType() == typeof(CustomAttribute));
            var attr = System.Attribute.GetCustomAttributes(this.GetType()).SingleOrDefault(t => typeof(CustomAttribute).IsAssignableFrom(t.GetType())); // to include derived type of Custom attribute also
            if (attr == null)
            {
                throw new Exception(String.Format("Derived class {0} doesnot apply {1} attribute", this.GetType().Name, typeof(CustomAttribute).Name));
            }
        }
    }
}

[CustomAttribute]
class Derived1 : Base
{
}

class Derived2 : Base
{
}
class CustomAttribute : System.Attribute
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:14:48.967

[您可以使用PostSharp](http://www.sharpcrafters.com/)在编译时执行此操作。[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)框架在编译后使用静态代码编织（也称为编译后过程），提供用于验证您的代码设计的 API。我创建了一个简单的例子来证明这一点。定义你的属性

```
public class MyAttribute : Attribute
{

} 
```

接下来是要应用此属性的类。我将注释掉属性以获取错误。

```
//[MyAttribute]
internal class Program
{
    private static void Main(string[] args)
    {
        Console.WriteLine("Hello World");
    }
} 
```

现在装箱你的`Aspect`. 它将在编译后检查是否`MyAttribute`存在任何内容`Program`，如果不存在 - 填充错误消息。

```
[Serializable]
public class MyValidationAspect : AssemblyLevelAspect
{
    public override bool CompileTimeValidate(_Assembly assembly)
    {
        IEnumerable<object> myAttributes = typeof (Program).GetCustomAttributes(inherit: true)
                                                           .Where(atr => atr.GetType() == typeof (MyAttribute));

        if (!myAttributes.Any())
            Message.Write(MessageLocation.Of(typeof (Program)), SeverityType.Error, "DESIGN1",
                          "You haven't marked {0} with {1}", typeof (Program), typeof (MyAttribute));

        return base.CompileTimeValidate(assembly);
    }
} 
```

然后在装配级别定义这个方面，如下所示：

```
[assembly: MyValidationAspect] 
```

所以现在，当我尝试构建解决方案时，我会收到一个错误：

![在此处输入图像描述](../Images/2883de97a307ea7367685ae7dcaf2438.png)

`PostSharpPlay.exe`是我的控制台程序集的名称。如果我之前删除评论`MyAttribute`- 解决方案编译并且我没有收到任何错误。

![在此处输入图像描述](../Images/7484e20c4d4dcfcf95598d6f54ee483d.png)

# c# - Web 内容聚合的可扩展性

> ID：14272572
> 
> 赞同：0
> 
> 时间：2013-01-11T06:00:45.947
> 
> 标签：c#, performance, architecture, scheduled-tasks, scalability

我正在尝试为我正在制作原型的工具锻炼一个简单的架构。基于 Web 的工具（基于 .NET）基本上会从多个公共 API 请求数据，整理和处理响应数据（JSON 或 XML）并将聚合数据保存在数据库中。这听起来很简单，但该工具需要每天至少为大约 3000 个用户运行这个过程（请求/处理/存储）一次。作为计划任务（cron 作业）定期运行该进程将显着降低性能并增加服务器（单个 VPS）上的资源使用率。

所以问题是，什么样的架构或框架可以用来使这样的工具快速、可扩展、简单且易于实现。

任何想法和想法都会受到赞赏。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:14:32.413

如果您在 cron 运行期间遇到资源消耗达到峰值的问题，那么不要让 cron 连续运行您的程序。破解程序使其可以连续运行的细节取决于细节。例如，假设您有 3000 个用户；一种简单的方法是每 28 秒处理一个用户。

快 - 你没有提到你的程序到底是什么慢，你使用了什么算法等等。你的问题听起来像你遇到了峰值负载的问题。很多时候，快速程序会导致资源使用高峰。对我来说，听起来你会做得很好（故意）让你的程序变慢。AND 慢并不意味着您设计程序的效率低下。

可扩展性 - 如果我们假设您的基本算法很好，那么一种实现可扩展性的方法是添加更多机器！！

# c# - ContextMenuStrip 停止在 ObjectListView 中的空白区域上工作

> ID：14272576
> 
> 赞同：0
> 
> 时间：2013-01-11T06:01:04.520
> 
> 标签：c#, contextmenu, objectlistview

在我的 .NET 4.0 WinForms 应用程序中，我有 ObjectListView 2.5.1.18477 和与之关联的 ContextMenuStrip。

当我右键单击 ObjectListView 中的数据行时，上下文菜单显示正常，但如果我右键单击空白区域（例如红十字），则无论我单击何处，上下文菜单都不会再次显示在 ObjectListView 上。

无论我在 ObjectListView 中的哪个位置单击，如何让上下文菜单继续显示？

谢谢

![在此处输入图像描述](../Images/0bfc15dd5367792c1650fc1f43ef0dde.png)

![在此处输入图像描述](../Images/68a7774ab58ee07e94115b1f7d2bb916.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:12:43.023

啊。其他一些代码正在捕获鼠标事件并失败。

# c++ - const_cast 与 reinterpret_cast

> ID：14272578
> 
> 赞同：8
> 
> 时间：2013-01-11T06:01:12.513
> 
> 标签：c++, casting, constants, reinterpret-cast

参考 SO C++ FAQ[什么时候应该使用 static_cast、dynamic_cast 和 reinterpret_cast？](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used).

const_cast 用于将 const 删除或添加到变量中，它是删除 const 的唯一可靠、已定义且合法的方法。reinterpret_cast 用于更改类型的解释。

我以合理的方式理解为什么 const 变量应该仅使用 const_cast 强制转换为非 const，但我无法找出使用 reinterpret_cast 而不是 const_cast 来添加 const 的合理理由。

我知道使用 reinterpret_cast 甚至添加 constness 是不理智的，但是使用 reinterpret_cast 添加 constness 会是 UB 还是潜在的定时炸弹？

我在这里感到困惑的原因是因为声明

> 很大程度上，您使用 reinterpret_cast 获得的唯一保证是，如果您将结果转换回原始类型，您将获得完全相同的值。

因此，如果我使用 reinterpret_cast 添加 constness 并且如果您将结果 reinterpret_cast 重新转换为原始类型，它应该返回原始类型并且不应该是 UB，但这违反了一个事实，即应该只使用 const_cast 来删除 constness

在单独的说明中，该标准保证您可以使用重新解释案例添加 Constness

> 5.2.10 Reinterpret cast (7) ......当“pointer to T1”类型的prvalue v转换为“pointer to cv T2”类型时，如果两个T1都为static_cast(static_cast(v))和 T2 是标准布局类型（3.9），T2 的对齐要求不比 T1 严格......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T06:16:11.700

`reinterpret_cast`改变对象内数据的解释。`const_cast`添加或删除`const`限定符。数据表示和常数是正交的。所以有不同的演员关键字是有意义的。

> 因此，如果我使用 reinterpret_cast 添加 constness 并且如果您将结果 reinterpret_cast 重新转换为原始类型，它应该返回原始类型并且不应该是 UB，但这违反了一个事实，即应该只使用 const_cast 来删除 constness

那甚至不会编译：

```
int * n = new int;
const * const_added = reinterpret_cast<const int *>(n);
int * original_type = reinterpret_cast<int*>(const_added);
    // error: reinterpret_cast from type ‘const int*’ to type ‘int*’ casts away qualifiers 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T06:16:52.250

你不应该*只是*添加`const`with `reinterpret_cast`。A`reinterpret_cast`应该主要是：重新解释指针（或其他）。

换句话说，如果你要从`const char*`to `char*`（希望因为有一个糟糕的 API 你不能改变），那么`const_cast`你就是朋友。这就是它的全部意图。

但是，如果您需要 from `MyPODType*`to `const char*`，则需要`reinterpret_cast`，而且不需要 a`const_cast`就很好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T06:48:56.137

需要记住一件事：您不能使用`const_cast`来使`const`变量可写。如果 const 引用引用非 const 对象，则只能使用它从 const 引用中检索非 const 引用。听起来很复杂？例子：

```
// valid:
int x;
int const& x1 = x;
const_cast<int&>(x1) = 0;
// invalid:
int const y = 42;
int const& y1 = y;
const_cast<int&>(y1) = 0; 
```

实际上，这两种方法都可以编译，有时甚至可以“工作”。但是，第二个会导致未定义的行为，并且在许多情况下会在将常量对象放置在只读内存中时终止程序。

也就是说，还有几件事：`reinterpret_cast`是最强大的演员，但也是最危险的演员，所以除非必须，否则不要使用它。当您需要从`void*`到 时`sometype*`，请使用`static_cast`. 反方向时，使用内置的隐式转换或使用显式转换`static_cast`。与添加或删除类似`const`，这也是隐式添加的。关于`reinterpret_cast`，另请参见[C++ 的讨论 何时我们应该更喜欢使用两个链接的 static_cast 而不是 reinterpret_cast](https://stackoverflow.com/questions/6594395/c-when-should-we-prefer-to-use-a-two-chained-static-cast-over-reinterpret-cast)，其中讨论了一种不那么骇人听闻的替代方案。

乌里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:32:03.393

我能想到的将 reinterpret_cast 与 const-ness 联系起来的唯一地方是将 const 对象传递给接受 void 指针的 API -

```
UINT ThreadFunction(void* param)
{
    const MyClass* ptr = reinterpret_cast<const MyClass*>(param);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T06:57:36.603

是的，如您所知， const_cast 意味着它从特定类型中删除了常量。

但是，当我们需要为类型添加常量时。我们有理由这样做吗？

例如，

```
void PrintAnything(void* pData)
{
    const CObject* pObject = reinterpret_cast<CObject*>(pData);
    // below is bla-bla-bla.
} 
```

reinterpret_cast 与 'const' 无关。

const_cast 意味着两件事。第一个是从类型中删除常量，另一个是赋予其代码明确性。因为您可以使用 C-style cast 来使用它，但这不是明确的，因此不推荐。

它们的功能不同。这绝对是不同的。

# c# - Windows 8 Metro 加密 - 使用 SignedCms Pkcs7

> ID：14272579
> 
> 赞同：1
> 
> 时间：2013-01-11T06:01:16.137
> 
> 标签：c#, windows-8, cryptography, windows-runtime

`SignedCms`在 Windows 8 Metro 中不受支持。WinRT 中是否有等效/替代品？

我需要在下面转换为 Metro 的代码示例：

```
message.Data = new SignedCms(new ContentInfo(Encoding.ASCII.GetBytes(toDigest)), true);
message.Data.Decode(part.BinaryContent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:16:47.903

在这里找到我要找的东西：

[http://dotnetspeak.com/index.php/2011/11/encrypting-and-decrypting-data-in-winrt-2/](http://dotnetspeak.com/index.php/2011/11/encrypting-and-decrypting-data-in-winrt-2/)

# php - 使用 file_get_contents 发送 cookie

> ID：14272580
> 
> 赞同：0
> 
> 时间：2013-01-11T06:01:26.783
> 
> 标签：php, curl, file-get-contents

在我的脚本中，我需要通过 HTTP post 方法将数据发送到页面，服务器将设置一些 cookie 并将其发送回给我..对于进一步的请求，我需要使用此 cookie 进行服务器访问..我写了一个函数为此，使用 stream_context_create() 和 file_get_contents() 但我无法发送 cookie。我怀疑问题是否是因为我无法连同 cookie 一起发送 cookie 路径和日期。所以任何人都可以解决这个问题。我不需要基于 CURL 的解决方案 我的功能如下（我将其粘贴在 pastebin 中，因为这里我有缩进问题） [http://pastebin.com/QQ1GxzdY](http://pastebin.com/QQ1GxzdY)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:04:41.507

我认为 stream_context_create() 和 file_get_contents() 是文件流。所以你可以先使用 haeder cookie 然后使用 stream_context_create() 或 file_get_contents() 做一些事情。

# ruby-on-rails - 上传多张照片。将图片存储在不同的服务器上

> ID：14272581
> 
> 赞同：1
> 
> 时间：2013-01-11T06:01:27.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, upload

我想创建一个能够上传多张图片的网站（一次从 1 到 20 张，每张不超过 10-20 MB）。

在回形针和 CarrierWave 之间进行选择。但是，问题是存储的组织（决定将文件保存在文件系统中，而数据库是它们的唯一方式）。  

1) 我想将图像专用于一个单独的服务器子域，例如 img.my_site.com。但是，所有文件一次加载到**公用文件夹**中。有一个创建符号链接的选项，但是如何组合两个服务器（Web 应用程序和图像）？

2）如果有人解决了类似的问题，请提出一个更简单的解决方案？

UPD 1：对于大量上传，我想使用 [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

# python - 从 python subprocess.call 调用 rsync

> ID：14272582
> 
> 赞同：15
> 
> 时间：2013-01-11T06:01:33.467
> 
> 标签：python, arguments, call, subprocess, rsync

我正在尝试从 python 脚本中的子进程通过 ssh 执行 rsync，以将图像从一台服务器复制到另一台服务器。我有一个函数定义为：

```
def rsyncBookContent(bookIds, serverEnv):
    bookPaths = ""
    if len(bookIds) > 1:
        bookPaths = "{" + ",".join(("book_"+str(x)) for x in bookIds) + "}"
    else:
        bookPaths = "book_" + str(bookIds[0])

    for host in serverEnv['content.hosts']:
        args = ["rsync", "-avz", "--include='*/'", "--include='*.jpg'", "--exclude='*'", "-e", "ssh", options.bookDestDir + "/" + bookPaths, "jill@" + host + ":/home/jill/web/public/static/"]
        print "executing " + ' '.join(args)
        subprocess.call(args) 
```

我最终想要做的是让 Python 执行这个（它在 bash shell 中工作）：

```
rsync -avz --include='*/' --include='*.jpg' --exclude='*' -e ssh /shared/books/{book_482,book_347} jill@10.12.27.20:/home/jill/web/public/static/ 
```

事实上，我的打印语句输出：

```
executing rsync -avz --include='*/' --include='*.jpg' --exclude='*' -e ssh /shared/books/{book_482,book_347} jill@10.12.27.20:/home/jill/web/public/static/ 
```

但是当从这个 python 脚本中执行时，有两个问题：

1.  如果 len(bookIds) > 1，/shared/books/ 下的子目录列表会被 bash 或 rsync 误解。错误信息是：
    *   rsync：link_stat“/shared/books/{book_482,book_347}”失败：没有这样的文件或目录（2））
2.  如果 len(bookIds) == 1，则源目录下的*所有*文件都被 rsync（不只是 *.jpg，这是我的意图）

似乎 subprocess.call 函数需要转义一些字符或其他东西，不是吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-11T16:50:17.260

弄清楚我的问题。我的问题是由于我误解了 subprocess.call 函数的执行方式以及 bash 在大括号内扩展列表的方式。

当我在带有花括号中的子目录的 bash shell 中发出 rsync 命令时，bash 确实将其扩展为传递给 rsync 的多个参数（/shared/books/book_1 shared/books/book_2 等）。当将带有花括号“/shared/books/{book_1, book_2}”的相同字符串传递给 subprocess.call 函数时，扩展没有发生，因为它没有通过 bash，所以我对 rsync 的论点是真的“/shared/books/{book_1, book_2}”。

类似地，文件模式（'*'、'*.jpg' 等）周围的单引号在 bash 命令行上工作（只有单引号内的值被传递给 rsync），但在 subprocess.call 中，单引号作为文件模式 ("'*.jpg'") 传递给 rsync。

新（工作）代码如下所示：

```
def rsyncBookContent(bookIds, serverEnv):
    bookPaths = []
    for b in bookIds:
        bookPaths.append(options.bookDestDir + "/book_" + str(b))
    args = []
    for host in serverEnv['content.hosts']:
        # copy all *.jpg files via ssh
        args = ["rsync", "-avz", "--include", "*/", "--include", "*.jpg", "--exclude", "*", "-e", "ssh"]
        args.extend(bookPaths)
        args.append("jill@" + host + ":/home/jill/web/public/static/"])
        print "executing " + ' '.join(args)
        subprocess.call(args) 
```

# bookmarklet - 书市可以修改原始页面吗？

> ID：14272586
> 
> 赞同：1
> 
> 时间：2013-01-11T06:02:26.977
> 
> 标签：bookmarklet

我有一个小书签，可以打开一个对话框（实际上是一个 iframe）并提取一些信息。当对话框被关闭时，我想将该信息放入浏览器原始页面上的编辑文本字段中（就像 LastPass 将自动填写页面上的登录表单的方式一样）。

这可能吗？我认为同源策略会阻止这种情况，但也许有一种方法（不安装诸如greasemonkey之类的扩展）。

**编辑**：更准确地说：小书签将 DIV 附加到原始页面；该 DIV 包含一个加载我的页面的 IFRAME；此页面获取一些信息；在 IFRAME 中获取此信息后，我想删除 DIV 并（以某种方式）将该信息放入原始页面。

我面临的问题是将 IFRAME 中的信息传回原始页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:11:23.510

您正在寻找的是函数 addEventListener 和 postMessage。

相关链接：

[http://caniuse.com/#feat=x-doc-messaging](http://caniuse.com/#feat=x-doc-messaging)

[如何跨域使用 window.postMessage？](https://stackoverflow.com/questions/3457391/how-do-you-use-window-postmessage-across-domains)

# c# - Web 服务仅适用于根文件夹

> ID：14272591
> 
> 赞同：2
> 
> 时间：2013-01-11T06:02:55.013
> 
> 标签：c#, web-services

因此，当我将其上传到根目录时，我有一个可以正常工作的 Web 服务

www.mysite.com/service.asmx

但如果我将它上传到另一个文件夹，我会得到以下结果。

> “/”应用程序中的服务器错误。
> 
> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/test/service.asmx

如果它们都同时上传，则测试文件夹中的一个指的是根目录，即使它们可能包含不同的代码。

任何想法，如果这还不够清楚，请写下您的问题并做出错误的答复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:49:49.227

您需要创建虚拟文件夹（在本例中为“test”），然后您需要上传到该 .

这就像告诉服务器将文件夹路径（例如 c:\web\mysite\test）解释为 \test 上下文路径。

假设您使用的是 IIS ，您可以使用[它创建一个虚拟目录](http://support.microsoft.com/kb/172138)

# jquery - 根据子 div 中的值将类添加到父 div

> ID：14272592
> 
> 赞同：2
> 
> 时间：2013-01-11T06:03:04.823
> 
> 标签：jquery

我是 javascript 的新手，正在尝试根据子 div 中的值范围向父 div 添加一个类（这样我就可以使用 Metafizzy Isotope 排序插件）。

这是HTML代码：

```
<div class="product-list">
    <div class="hidden-price">Number Here</div>
</div>
<div class="product-list">
    <div class="hidden-price">Number Here</div>
</div>
<div class="product-list">
    <div class="hidden-price">Number Here</div>
</div> 
```

这是jQuery函数：

```
$('.hidden-price').each(function() {
if(this.text() < 5000) {
    $(this).closest('.product-list').addClass('Under5k');
}
else if (this.text() > 4999 && this.text() < 10000) {
    $(this).closest('.product-list').addClass('Under10k');
}
else {
    $(this).closest('.product-list').addClass('Over10k');
}
}); 
```

这是一个 jsfiddle 的链接：http: [//jsfiddle.net/jeremyccrane/gwYPw/](http://jsfiddle.net/jeremyccrane/gwYPw/)

谢谢！

**更新：**

我在 jsFiddle 上错误地大写了我的课程。它已被捕获并已更新以及下面的正确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:09:06.990

这`text()`是一个 jQuery 方法，因此您需要将其应用于 jQuery 对象。
因此`this.text()`，您需要使用`$(this).text()`.

您可以使用此功能来实现它（更简洁的版本：P）：

```
$('.hidden-price').each( function() {
    var size = $(this).text();
    if (size < 5000) {
        $(this).parent('.product-list').addClass('Under5k');
    } else if (size < 10000) {
        $(this).parent('.product-list').addClass('Under10k');
    } else {
        $(this).parent('.product-list').addClass('Over10k');
    }
}); 
```

[**小提琴**](http://jsfiddle.net/gwYPw/18/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T06:05:38.747

[**更新和工作的 JsFiddle 代码**](http://jsfiddle.net/gwYPw/17/)

**工作代码**

```
$('.hidden-price').each(function() {
    if($(this).text() < 5000) {
                    $(this).parent('div').addClass('under5k');
                }
                else if ($(this).text() > 4999 && $(this).text() < 10000) {
                    $(this).parent('div').addClass('under10k');
                }
                else {
                    $(this).parent('div').addClass('over10k');
                }
}); 
```

代码中的更改

1.  将功能更改为 Parent 而不是最接近
2.  小写的类名“over10k”
3.  将“this.text()”更改为“$(this).text()”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:05:55.947

你可以这样做 ：

```
$('.hidden-price').each(function() {
if(this.text() < 5000) {
    $(this).parents('div:first').addClass('Under5k');
}
else if (this.text() > 4999 && this.text() < 10000) {
    $(this).parents('div:first').addClass('Under10k');
}
else {
    $(this).parents('div:first').addClass('Over10k');
}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:12:07.410

您实际上并没有那么远，您只需要记住这[`.text()`](http://api.jquery.com/text/)是一个 jquery 方法。要访问它，您必须附加`this`到一个[jquery 对象](http://api.jquery.com/jQuery/)（`$(this).etc`而不是`this.etc`）。下面的代码对我来说很好：

```
$('.hidden-price').each(function() {
  if($(this).text() < 5000) {
          $(this).closest('.product-list').addClass('Under5k');
        }
        else if ($(this).text() > 4999 && $(this).text() < 10000) {
          $(this).closest('.product-list').addClass('Under10k');
        }
        else {
          $(this).closest('.product-list').addClass('Over10k');
        }
}); 
```

[**演示**](http://jsfiddle.net/Daedalus/gwYPw/12/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T06:12:33.813

您需要`parse`文本，`int`然后您可以比较这些值：

```
$('.hidden-price').each(function () {
   if (parseInt($(this).text()) < 5000) {
        $(this).closest('.product-list').addClass('under5k');
   } else if (parseInt($(this).text()) > 4999 && parseInt($(this).text()) < 10000) {
        $(this).closest('.product-list').addClass('under10k');
   } else {
        $(this).closest('.product-list').addClass('over10k');
   }
}); 
```

在这里查看小提琴：http: [//jsfiddle.net/gwYPw/15/](http://jsfiddle.net/gwYPw/15/)

尽管您`js`几乎是正确的，但您只需要修改一件事，那就是：

更改`this`为`$(this)`和您的`class initials are started with lowercase alphas`

```
$('.hidden-price').each(function() {
    if($(this).text() < 5000) {
          $(this).closest('.product-list').addClass('under5k');
         //^^^^^^------------------------------------^----------hope you get it.
    } else if ($(this).text() > 4999 && $(this).text() < 10000) {
         $(this).closest('.product-list').addClass('under10k');
    } else {
         $(this).closest('.product-list').addClass('over10k');
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T06:24:18.150

考虑这一点的更简单的方法可能是首先向`.product-list`元素添加一个类，然后根据里面的内容决定要添加什么类。

```
$(".product-list").addClass(function () {
  var val = $(this).find(".hidden-price").text();
  if (val < 5000) {
    return "Under5k"
  }
  if (val < 10000) {
    return "Under10k"
  }
  return "Over10k";
}); 
```

# javascript - 如何判断何时未使用谷歌位置自动完成建议？

> ID：14272594
> 
> 赞同：12
> 
> 时间：2013-01-11T06:03:11.330
> 
> 标签：javascript, jquery, google-maps-api-3, google-places-api, google-places

## 精简版：

我正在使用 Google Places Library（此处为[https://developers.google.com/maps/documentation/javascript/places](https://developers.google.com/maps/documentation/javascript/places)）中的 google 自动填充位置，我需要告诉用户何时从自动完成列表中选择了一个位置当他们点击其他地方，标签等时。

**我的目标是在用户与输入元素交互但未**选择自动完成选项时运行一个函数。

## 更多细节：

在查看文档时，似乎唯一的事件在（真的，如果）地点发生变化时被触发，这发生在（可能很长的）服务器往返之后。如果用户没有从列表中选择任何内容，则永远不会触发该事件。（ [https://developers.google.com/maps/documentation/javascript/reference?hl=fr#Autocomplete](https://developers.google.com/maps/documentation/javascript/reference?hl=fr#Autocomplete)上的文档）

我可以为自动完成附加到的输入元素的模糊事件附加一个侦听器，但问题是模糊事件发生在 places_changed 事件发生之前。

到目前为止，已经尝试了很多事情，包括在自动完成建议上监听事件，如下所示：

```
$('body').on('click', '.pac-item', function(){alert.log('yay!');}); 
```

谷歌图书馆显然吃掉了这些事件。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T22:50:13.583

您应该检查表单何时提交，而不是使用事件进行检查。这是一步一步的：

1.  当用户选择一个地点时，存储地点和输入的文本值
2.  表单提交时，检查输入的值是否和你保存的一样
3.  如果不同，或者没有保存位置，则执行手动位置请求

**演示：http: [//jsfiddle.net/robertdodd/FSRd8/7/](http://jsfiddle.net/robertdodd/FSRd8/7/)**

我在上面整理了一个小演示。我所做的是将验证方法附加到表单。此方法将在提交表单之前检查数据，如果需要，请先执行手动查找。

```
function validateForm() {
    searchfield = $('#searchfield').val();
    if (searchfield == "" || searchfield == null) { 
        // No text entered
    } else if (place && searchfield == placesearch) { 
        // Success
        return true;
    } else { 
        // place info and search text do not match, perform manual lookup   
        // when lookup is complete, the callback function will store the place info
        // and resubmit the form
    }
    return false;
} 
```

这只是所发生的事情的概要，如果您想查看，所有代码都在演示中。

我希望这可以帮助你！

# java - 将类移动到另一个包后，Netbeans 无法部署 JSF App

> ID：14272597
> 
> 赞同：2
> 
> 时间：2013-01-11T06:03:34.940
> 
> 标签：java, jsf, netbeans, build

我需要进行一些重构并尝试将一些类从一个包移动到另一个包。完成此操作后，Netbeans 无法再部署该应用程序。

我试图将一些数据对象类从包中移动：flow.dataobjects 到 flow.holiday.dataobjects。它只出现在这种情况下。我不知道为什么。我还尝试将一个类从 flow.dataobjects 移动到 flow.test.test 包，但出现相同的错误。

这是 netbeans Tomcat.Output：

```
Jan 11, 2013 6:41:06 AM org.apache.catalina.startup.HostConfig checkResources
INFO: Undeploying context []
Jan 11, 2013 6:41:06 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor /home/mfiz/.netbeans/7.2/apache-tomcat-7.0.27.0_base/conf/Catalina/localhost/ROOT.xml
Jan 11, 2013 6:41:08 AM com.sun.faces.config.ConfigureListener contextInitialized
INFO: Initializing Mojarra 2.1.13 ( 20120907-1514) for context ''
Jan 11, 2013 6:41:08 AM com.sun.faces.spi.InjectionProviderFactory createInstance
INFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.
Jan 11, 2013 6:41:08 AM com.sun.faces.config.ConfigureListener contextInitialized
SEVERE: Critical error during deployment: 
java.lang.NoClassDefFoundError: Lflow/dataobjects/HolidayDataObj;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
    at java.lang.Class.getDeclaredFields(Class.java:1743)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.collectAnnotatedFields(ManagedBeanConfigHandler.java:246)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.getBeanInfo(ManagedBeanConfigHandler.java:155)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.process(ManagedBeanConfigHandler.java:141)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.push(ManagedBeanConfigHandler.java:127)
    at com.sun.faces.application.annotation.AnnotationManager.applyConfigAnnotations(AnnotationManager.java:200)
    at com.sun.faces.config.processor.AbstractConfigProcessor.processAnnotations(AbstractConfigProcessor.java:326)
    at com.sun.faces.config.processor.ManagedBeanConfigProcessor.process(ManagedBeanConfigProcessor.java:244)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ValidatorConfigProcessor.process(ValidatorConfigProcessor.java:120)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ConverterConfigProcessor.process(ConverterConfigProcessor.java:126)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ComponentConfigProcessor.process(ComponentConfigProcessor.java:117)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:340)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:222)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:362)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:530)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1471)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:856)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:353)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: flow.dataobjects.HolidayDataObj
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 64 more
Jan 11, 2013 6:41:08 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart 
```

Netbeans Tomcat.Log.Output：

```
Jan 11, 2013 6:41:06 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener
java.lang.RuntimeException: java.lang.NoClassDefFoundError: Lflow/dataobjects/HolidayDataObj;
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:290)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:530)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1471)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:856)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:353)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: Lflow/dataobjects/HolidayDataObj;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
    at java.lang.Class.getDeclaredFields(Class.java:1743)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.collectAnnotatedFields(ManagedBeanConfigHandler.java:246)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.getBeanInfo(ManagedBeanConfigHandler.java:155)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.process(ManagedBeanConfigHandler.java:141)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.push(ManagedBeanConfigHandler.java:127)
    at com.sun.faces.application.annotation.AnnotationManager.applyConfigAnnotations(AnnotationManager.java:200)
    at com.sun.faces.config.processor.AbstractConfigProcessor.processAnnotations(AbstractConfigProcessor.java:326)
    at com.sun.faces.config.processor.ManagedBeanConfigProcessor.process(ManagedBeanConfigProcessor.java:244)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ValidatorConfigProcessor.process(ValidatorConfigProcessor.java:120)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ConverterConfigProcessor.process(ConverterConfigProcessor.java:126)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ComponentConfigProcessor.process(ComponentConfigProcessor.java:117)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:340)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:222)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:362)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223)
    ... 40 more
Caused by: java.lang.ClassNotFoundException: flow.dataobjects.HolidayDataObj
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 64 more
Jan 11, 2013 6:41:08 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener
java.lang.RuntimeException: java.lang.NoClassDefFoundError: Lflow/dataobjects/HolidayDataObj;
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:290)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:530)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1471)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:856)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:353)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: Lflow/dataobjects/HolidayDataObj;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
    at java.lang.Class.getDeclaredFields(Class.java:1743)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.collectAnnotatedFields(ManagedBeanConfigHandler.java:246)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.getBeanInfo(ManagedBeanConfigHandler.java:155)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.process(ManagedBeanConfigHandler.java:141)
    at com.sun.faces.application.annotation.ManagedBeanConfigHandler.push(ManagedBeanConfigHandler.java:127)
    at com.sun.faces.application.annotation.AnnotationManager.applyConfigAnnotations(AnnotationManager.java:200)
    at com.sun.faces.config.processor.AbstractConfigProcessor.processAnnotations(AbstractConfigProcessor.java:326)
    at com.sun.faces.config.processor.ManagedBeanConfigProcessor.process(ManagedBeanConfigProcessor.java:244)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ValidatorConfigProcessor.process(ValidatorConfigProcessor.java:120)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ConverterConfigProcessor.process(ConverterConfigProcessor.java:126)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ComponentConfigProcessor.process(ComponentConfigProcessor.java:117)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:340)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:222)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:362)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223)
    ... 40 more
Caused by: java.lang.ClassNotFoundException: flow.dataobjects.HolidayDataObj
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 64 more 
```

这是错误还是功能？因为自己的应用程序是正确构建的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:47:15.077

对于 Linux 用户：

1.  停止服务器

2.  清理项目

3.  停止 NetBeans

4.  重命名或删除`/home/*YOUR USERNAME*/.cache/netbeans/7.x/index`

5.  启动 NetBeans

注意：将 7.x 替换为您使用的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:22:52.717

此问题可能是由 Netbeans 编译缓存引起的。参考[这个答案](https://stackoverflow.com/a/5984975/620338)，您可以尝试以下操作（在 Windows 机器上）：

1.  停止服务器

2.  清理项目

3.  停止 NetBeans

4.  删除 %HOME%.netbeans\7.x\var\cache

5.  启动 NetBeans

7.x 部分需要更改为您的特定 Netbeans 版本。

**[更新]**

对于运行 7.2 或更高版本（包括 8.x 范围）的任何人，缓存文件夹已被移动。每个安装的版本都会在这里创建它自己的子文件夹：

4.  *[alt]*删除内容`%USERPROFILE%\AppData\Local\NetBeans\Cache\`

# php - php抽象类中的构造函数有什么用

> ID：14272598
> 
> 赞同：20
> 
> 时间：2013-01-11T06:03:38.463
> 
> 标签：php, oop, constructor, abstract-class

在询问之前我已经关注了这个链接 -[答案是在 JAVA 上下文中](https://stackoverflow.com/questions/2105783/what-is-the-use-of-creating-a-constructor-for-an-abstract-class-in-java)，这个是[PHP 中的构造函数](http://php.net/manual/en/language.oop5.decon.php)。

由于我是初学者，我在 OOP 概念中实现我的 PHP 代码，所以我真的很想知道 PHP 抽象类中的用法和好处或何时使用构造函数。

请在现实世界中提供一个示例，以更好地掌握这个概念。

PS - 虽然我遵循[PHP 手册](http://php.net/manual/en/language.oop5.php)来理解 OOP 概念，但我发现它有点难以理解，对链接/博客的任何帮助都是非常可观的。

我的代码 -

```
<?php

abstract class grandClass
{
    abstract function grandmethod();

    function __construct()
    {
        echo "I am grandClass constructor";
    }
}

abstract class parentClass extends grandClass
{
    abstract function raiseFlag();

    function grandmethod()
    {
        echo "This is grandmethod!!!","<br />";
    } 

    public function getValue()
    {
        echo "Zero is the blackhole for the numbers!!","<br />";
    }
}

class childClass extends parentClass
{

    function raiseFlag()
    {
        echo "Peaceful thoughts!!","<br />";
    }

}

$myobj = new childClass();
$myobj->raiseFlag();
$myobj->getValue();
$myobj->grandmethod(); 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-11T06:53:37.960

抽象类中的构造函数与具体类中的构造函数相同。在需要时使用构造函数，例如，如果您需要初始化一些数据或分配一些资源。

我给你举个例子：

```
abstract class Db
{
    protected $pdo;

    public function __construct($pdo)
    {
        $this->pdo = $pdo;
    }

    abstract function select($table, $fields);
}

class Db_Mysql extends Db
{
    public function select($table, $fields)
    {
        // Build MySQL specific select query
        // then execute it with $this->pdo
    }
}

class Db_Pgsql extends Db
{
    public function select($table, $fields)
    {
        // Build PostgreSQL specific select query
        // then execute it with $this->pdo
    }
}

// Usage:
$db = new Db_Mysql($pdo);

$db->select('users', array('id', 'name')); 
```

# ruby-on-rails - 编辑/更新嵌套模型（update_attributes 错误）

> ID：14272605
> 
> 赞同：0
> 
> 时间：2013-01-11T06:04:23.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

在 Rails 3.2 中提交带有嵌套模型的更新表单时出现以下错误。对此的任何帮助将不胜感激。

```
NoMethodError in ProfilesController#update

undefined method `update_attributes' for nil:NilClass
Rails.root: C:/Documents and Settings/Workspace/project_x

Application Trace | Framework Trace | Full Trace
app/controllers/profiles_controller.rb:32:in `update'
Request

Parameters:

{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"PQFLzhgvFzRyJ2BT/GdIpjRiOM729JoYQUHrZGUi08c=",
 "profile"=>{"addresses_attributes"=>{"0"=>{"address1"=>"588 brodie",
 "address2"=>"Apt1115",
 "city"=>"Austin",
 "state"=>"Alabama",
 "zip"=>"78745",
 "id"=>"1"}},
 "vital_attributes"=>{"birthday(2i)"=>"1",
 "birthday(3i)"=>"11",
 "birthday(1i)"=>"1910",
 "height_feet"=>"3",
 "height_inches"=>"3",
 "weight"=>"220",
 "id"=>"1"},
 "certificate_attributes"=>{"C_ASEL"=>"1",
 "C_AMEL"=>"1",
 "C_ASES"=>"1",
 "C_AMES"=>"0",
 "ATP_ASEL"=>"0",
 "ATP_AMEL"=>"0",
 "ATP_ASES"=>"0",
 "ATP_AMES"=>"0",
 "FI_ASE"=>"1",
 "FI_AME"=>"1",
 "FI_INSTA"=>"1",
 "GI_Basic"=>"0",
 "GI_Advanced"=>"0",
 "GI_Instrument"=>"0",
 "id"=>"1"}},
 "commit"=>"Save & Continue",
 "id"=>"1"} 
```

以下是涉及的模型、控制器和形式：

```
class Profile < ActiveRecord::Base
   attr_accessible :addresses_attributes, :vital_attributes, :certificate_attributes

   belongs_to :contact
   has_many :addresses
   has_one :certificate
   has_one :vital

   accepts_nested_attributes_for :addresses, :certificate, :vital
end

class Address < ActiveRecord::Base
   belongs_to :profile
end

class Vital < ActiveRecord::Base
   belongs_to :profile
end

class Certificate < ActiveRecord::Base  
   belongs_to :profile  
end

class ProfilesController < ApplicationController

   before_filter :authenticate, :only => [:show, :edit, :update]
   before_filter :correct_contact, :only => [:show, :edit, :update]
.
.
.

def edit
   @profile = Profile.find(params[:id])
   @address = @profile.addresses.first
   @vital = @profile.vital
   @certificate = @profile.certificate
end

def update
   if @profile.update_attributes(params[:profile])
      flash[:success] = "Profile updated"
      render 'edit'
   else
      render 'edit'
   end
end 

private #######################################################################

def authenticate
   deny_access unless signed_in?
end

def correct_contact
   @contact = Contact.find(params[:id])
   redirect_to(root_path) unless current_contact?(@contact)
end

end

<%= form_for @profile, :html => { :class => "form-horizontal" } do |f| %>

<%= f.fields_for :addresses do |aa| %> 
   <%= aa.label :address1, "Address 1:", :class => "control-label" %>
   <%=aa.label :address2, "Address 2:", :class => "control-label" %>
   <%=aa.text_field :address2 %>
   <%= aa.label :city, "City:", :class => "control-label" %>
   <%= aa.text_field :city %>
   <%= aa.label :state, "State:", :class => "control-label" %>
   <%= aa.select(:state, options_for_select([["Alabama", "Alabama"], ["Texas", "Texas"]]), {}, :class => "select-auto-size") %>
   <%= aa.label :zip, "Zip Code:", :class => "control-label" %>
   <%= aa.text_field :zip %>                        
<% end %>                           

<%= f.fields_for :vital do |ab| %>
   <%= ab.label :birthday, "Birthday:", :class => "control-label" %>
   <%= ab.date_select :birthday, { :start_year => 1910, :end_year => 1995, :order => [:month, :day, :year] },{ :class => "select-auto-size" } %>
   <%= ab.label :sex, "Sex:", :class => "control-label" %>
   <%= ab.radio_button :sex, "Male", :id => "optionRadios1" %> Male&nbsp;&nbsp;
   <%= ab.radio_button :sex, "Female", :id => "optionRadios2" %> Female
   <%= ab.label :height, "Height:", :class => "control-label" %>
   <%= ab.select(:height_feet, options_for_select([["3'", 3], ["4'", 4]]), {}, :class => "select-auto-size") %>
   <%= ab.select(:height_inches, options_for_select([["3''", 3], ["4''", 4]]), {}, :class => "select-auto-size") %>
   <%= ab.label :weight, "Weight:", :class => "control-label" %>
   <%= ab.text_field :weight, :class => "input-mini" %><span>
   <% end %>                                

<%= f.fields_for :certificate do |ac| %>
   <label class="checkbox"><%= ac.check_box :C_ASEL %> Single</label>
   <label class="checkbox"><%= ac.check_box :C_AMEL %> Multi</label>
   <label class="checkbox"><%= ac.check_box :C_ASES %> Other</label>
<% end %>

<%= f.submit "Save & Continue", :class => "btn" %>

<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:36:37.223

> nil:NilClass 的未定义方法“update_attributes”

这告诉您，在您的`update`控制器操作中，`ProfilesController`您正在调用当前而不是您尝试更新的模型实例的`update_attributes`变量。`nil`具体来说

```
def update
  if @profile.update_attributes(params[:profile])
    # ... 
```

您没有分配`@profile`给任何模型实例，所以它是`nil`. 你必须做你在`edit`行动中所做的事情。

```
def update
  @profile = Profile.find(params[:id])
  if @profile.update_attributes(params[:profile])
    # ... 
```

# java - javax.mail.SendFailedException 的原因：没有收件人地址错误

> ID：14272607
> 
> 赞同：3
> 
> 时间：2013-01-11T06:04:27.213
> 
> 标签：java, email, jakarta-mail

有人可以让我知道为什么我们会得到以下异常。

```
javax.mail.SendFailedException: No recipient addresses 
```

可能是因为地址为空或为空吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:08:29.787

根据[此处找到的文档](http://docs.oracle.com/javaee/1.4/api/javax/mail/SendFailedException.html)

> 无法发送消息时会抛出此异常。例外情况包括无法发送消息的地址以及发送消息的有效地址和未发送消息的有效地址

# arrays - 如何在 ruby on rails 上保存包含 id 值的数组

> ID：14272612
> 
> 赞同：0
> 
> 时间：2013-01-11T06:04:52.443
> 
> 标签：arrays, hash, time, model, ruby-on-rails-3.2

如何使用 ruby​​ on rails 将数组值存储在数据库中？我正在制定一个每天有 6 个课时的学校时间表。我将主题 ID 存储到一个数组中，但我只是不知道如何保存该数组的 id 值。

我的控制器：

```
def create
  @timetable = Timetable.new(params[:timetable])

    @buildtimetable = params[:gradeclassroomsubject_id]
      @buildtimetable.each do |subjectID|
        subjectID.save!(params[:gradeclassroomsubject_id].reject { |k,v| v.blank? })
      end
end

class CreateTimetables < ActiveRecord::Migration
  def change
    create_table :timetables do |t|
      t.integer :period_no
      t.integer :day_no
      t.integer :gradeclassroomsubject_id
      t.integer :user_id

      t.timestamps
    end
  end
end 
```

非常感谢任何帮助，我承受着压力，这种感觉有点尴尬。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:28:32.070

简短的回答：不可能将许多值（数组中的所有值）存储到表的列中。

由于您只想存储`subject_id`，我想您已经有一个存储所有主题的表，而您唯一要做的就是设置特定用户与他/她所选择的主题之间的关系。`many-to-many`一段关系是你需要的。

创建一个新表：

```
class CreateStuendship < ActiveRecord::Migration
  def change
    create_table :stuedentships do |t|
      t.integer :subject_id
      t.integer :user_id
      # something else you want to store about this relationship, ex: year, semester...
    end
  end 
```

应用程序/模型/学生：

```
class Studentship < ActiveRecord::Base
  belong_to :user
  belong_to :subject
end 
```

应用程序/模型/user.rb：

```
class User < ActiveRecord::Base
  has_many :studentship
  has_many :subjects, :through => :studentship
end 
```

应用程序/模型/subject.rb：

```
class Subject < ActiveRecord::Base
  has_many :studentship
  has_many :users, :through => :studentship
end 
```

此外，我认为您可以将“period_no”和“day_no”存储到您的`subjects`表中，这样您就可以通过主题表知道课程的时间。如果课程的时间不固定（相同id的科目有不同的课程时间），将这两个属性存入`studentship`可能是个好主意。通过这样做，您不再需要 table `timetables`，这是不必要的。

当您想存储用户所学的科目时，只需根据您的数组迭代地创建新的学生。

最后，你可以

```
user = User.frist
subject = Subject.first
user.subjects  # subjects taken by the first user
subject.users  # users who take the first subject 
```

# windows - 直接访问 Windows 后台处理程序中列出的 USB 打印机端口

> ID：14272618
> 
> 赞同：2
> 
> 时间：2013-01-11T06:05:34.997
> 
> 标签：windows, printing, usb, driver

在打印机领域，尤其是 POS 打印机，有两种常见的方法，OPOS 和 Windows 打印队列。还有像虚拟串口这样的解决方法。但似乎还有另一种方法......驱动程序已安装，但软件似乎直接写入端口而不是使用 Windows spooler。

例如，如果您在安装 Epson USB 打印机时查看后台处理程序端口，有一个 ESDPRT001 ... 是否是 POS 应用程序直接写入端口并绕过整个后台处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:11:13.217

根据[Epson 对 OmniLink 的产品描述，](http://pos.epson.com/omnilink/)不需要驱动程序。后台处理程序很可能已外包给功能强大的机载计算机，该计算机以 ~400Mhz 的速度运行。只是一个猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:04:52.497

[您不需要爱普生 OmniLink 的驱动程序。](http://pos.epson.com/omnilink/)如果您的 spoolsv.exe 不起作用，请查看[此](http://support.epostraders.co.uk/support-files/documents/3/9uC-APD402_T81_Status.pdf)内容。

# objective-c - 自定义初始化 parse.com

> ID：14272626
> 
> 赞同：0
> 
> 时间：2013-01-11T06:06:36.023
> 
> 标签：objective-c, parsing, init, parse-platform

我正在编写一些类，它是 PFObject (Parse.com) 的子类。

示例：LBSomeClass.h

```
@interface LBSomeClass : PFObject
@propertise (strong,nonatomic) NSString* prop1;
@propertise (strong,nonatomic) NSString* prop2;
-(id)init;
-(id)initWithId:(NSString*)uid;
@end 
```

LBSomeClass.m

```
@implementation LBPhoto
@synthesize prop1;
@synthesize prop2;

-(id)init {
self = [super init];
return self;
}

-(id)initWithId:(NSString*)uid {
self = [super init];
PFQuery* query = [PFQuery queryWithClassName:@"someclass"];
self = (LBSomeClass*)[query getObjectWithId:uid];

self.prop1 = [self objectForKey:@"propertiseone"]; //error here
self.prop2 = [self objectForKey:@"propertisetwo"]; //error here

return self;
} 
```

但是当我运行时，出现了一些错误：

```
[PFObject setProp1:]: unrecognized selector sent to instance 0xa2707d0
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[PFObject setProp1:]: unrecognized selector sent to instance 0xa2707d0' 
```

你能帮我解决这个问题吗？非常感谢！！！

**问题解决了！！！**

```
-(id)initWithId:(NSString*)uid {
self = [super initWithClassName:@"Photo"];
[self setObjectId:targetID];

[self fetch];

self.prop1 = [self objectForKey:@"propertiseone"];
// other
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:57:00.123

问题由我解决哈哈

```
-(id)initWithId:(NSString*)uid {
self = [super initWithClassName:@"Photo"];
[self setObjectId:targetID];

[self fetch];

self.prop1 = [self objectForKey:@"propertiseone"];
// other
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T06:24:45.173

采用`@property (readwrite, retain)`

# java - Java中Collection和Arraylist的区别？

> ID：14272628
> 
> 赞同：2
> 
> 时间：2013-01-11T06:06:49.037
> 
> 标签：java

> **可能重复：**
> [使用 Collection 接口创建 ArrayList 对象的多态性有什么好处？](https://stackoverflow.com/questions/3356113/what-is-the-benefit-of-polymorphism-using-collection-interface-to-create-arrayli)

```
 ArrayList al=new ArrayList();
 Collection c=new ArrayList(); 
```

object`al`和 和有什么不一样`c`？他们两个是一样的还是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T06:14:13.890

Collections API 是一组支持对对象集合进行操作的类和接口。

类示例：HashSet、HashMap、ArrayList、LinkedList、TreeSet 和 TreeMap。接口示例：Collection、Set、List 和 Map。

而 ArrayList：它是可重新调整大小的数组实现。属于集合中的“列表”组。它允许所有元素，包括 null。它不是线程安全的。

集合：它实现了对集合进行操作的多态算法。

集合：它是集合层次结构中的根接口。

**以下**接口（集合类型）扩展了 Collection 接口：

*   列表
*   放
*   排序集
*   导航集
*   队列
*   双端队列

Java 不附带 Collection 接口的可用实现，因此您必须使用列出的子类型之一。Collection 接口只定义了这些 Collection 子类型中的每一个共享的一组方法（行为）。这使得可以忽略您正在使用的特定类型的集合，并将其视为集合。这是标准继承，所以没有什么神奇之处，但有时它仍然是一个不错的功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T06:09:11.697

第二个是[接口编码](https://stackoverflow.com/questions/1970806/coding-to-interfaces)。它允许`ArrayList`将 替换为另一个`Collection`（例如`Vector`或`TreeSet`）而没有任何副作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T06:07:59.687

创建了相同的对象，但引用不同。

因此，在第二种情况下，除非强制转换，否则您可以将`ArrayList`only 视为 just 。`Collection`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T06:10:51.290

`Collection`是一个[接口](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/Collection.html)。看看方法。

`List` [接口](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)具有按索引访问的方法。List 还扩展了`Collection`接口。

`ArrayList`是实现`List`接口的具体实现。数组列表

你正在做的是一些抽象。

如果你这样做：

```
Collection foo = new ArrayList(); 
```

您将无法访问`List`接口方法。比如用索引访问。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T06:12:50.473

在`al`你被阻止只使用数组列表。除了arraylist，你不能转换/转换任何东西。

在`c`您可以转换/转换任何实现该`Collection`接口的类。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T06:15:08.427

```
Collection foo = new ArrayList(); 
```

这个更通用，你可以获得 Collection 的其他实现的好处。

# hibernate - 如何使用 Hibernate 保存我的数据（一对多）？

> ID：14272629
> 
> 赞同：0
> 
> 时间：2013-01-11T06:07:08.160
> 
> 标签：hibernate

我正在关注这个例子：http: [//viralpatel.net/blogs/hibernate-one-to-many-xml-mapping-tutorial/](http://viralpatel.net/blogs/hibernate-one-to-many-xml-mapping-tutorial/)

在示例的情况下：这是部门与员工之间的一对多关系（假设员工只能在一个部门工作）。

在示例中，每次都会创建一个新部门，然后将新员工附加到该部门。

如果该部门已经存在，需要进行哪些更改？就像我再次运行该示例并希望将更多员工添加到现有部门一样。

我搜索了网络，但我遇到的所有示例/指南都假设每次都会创建一个新部门。

我的猜测是我需要设置一个搜索数据库并返回部门数据类型的 DAO 函数？

谢谢！:)

**这是viralpatel.net中提到的代码**

```
public static void main(String[] args) {

    SessionFactory sf = HibernateUtil.getSessionFactory();
    Session session = sf.openSession();
    session.beginTransaction();

    Department department = new Department();
    department.setDepartmentName("Sales");
    session.save(department);

    Employee emp1 = new Employee("Nina", "Mayers", "1212");
    Employee emp2 = new Employee("Tony", "Almeida", "4343");

    emp1.setDepartment(department);
    emp2.setDepartment(department);

    session.save(emp1);
    session.save(emp2);

    session.getTransaction().commit();
    session.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:12:41.790

您可以使用`get`Session 对象的方法从数据库中获取对象：

```
session.get(Department.class, id); 
```

您可以在以下 ling 中查看完整文档：http: [//docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:54:59.203

那是我刚才问的同一个问题，您可以通过首先从数据库加载/获取部门来将人员添加到现有部门

```
Department department = session.get(Department.class,new Long(10)); // i assume you are using Long for primary key

Employee emp1 = new Employee("Nina", "Mayers", "1212");
Employee emp2 = new Employee("Tony", "Almeida", "4343");

emp1.setDepartment(department);
emp2.setDepartment(department); 
```

# ios - 错误：git-credential-osxkeychain 死于信号 11

> ID：14272634
> 
> 赞同：28
> 
> 时间：2013-01-11T06:07:40.957
> 
> 标签：ios, git, github, keychain

我已经安装了 github 版本 0.8.4，但是当我尝试从 git 获取某些东西时，它显示了这条消息。

```
Fetching all tracking branches from Queue-iOS completed successfully.

command: git fetch Queue-iOS

error: git-credential-osxkeychain died of signal 11
error: git-credential-osxkeychain died of signal 11
error: git-credential-osxkeychain died of signal 11
error: git-credential-osxkeychain died of signal 11
From https://github.com/appstute/Queue-iOS
   59bb075..b2da838  master     -> Queue-iOS/master 
```

这是关于钥匙串的问题，当我从 git hub 拉取时，会显示以下消息

```
Pulling all tracking branches from Queue-iOS encountered an error.

command: git pull Queue-iOS

error: git-credential-osxkeychain died of signal 11
error: git-credential-osxkeychain died of signal 11
error: git-credential-osxkeychain died of signal 11
error: git-credential-osxkeychain died of signal 11
You asked to pull from the remote 'Queue-iOS', but did not specify
a branch. Because this is not the default configured remote
for your current branch, you must specify a branch on the command line.

error = 1 
```

这里的 Queue-iOS 是我在 git 上配置的本地文件夹。请帮忙。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-07T09:26:33.393

我正在使用 Mac OS X 10.7.5。我最近为 Mac 下载了 git 1.8.1.2。安装后，我在运行时遇到了相同的信号 11 错误消息：

`$git credential-osxkeychain`

依次运行：

`/usr/local/git/bin/git-credential-osxkeychain`

信号 11 是 SEGFAULT，它可能表示`git-credential-osxkeychain`程序存在错误（例如取消引用空指针）。

我按照说明[缓存您的 github 密码](https://help.github.com/articles/caching-your-github-password-in-git)`git-credential-osxkeychain`并从 S3 获取了一份新副本。这解决了问题。新副本的大小不同，这让我猜该错误已被修补。

同时，我相信使用`git@github.com:yang3wei/octopress-3-in-one`配置中的 URL 也可以解决问题，因为它绕过 HTTPS 并使用 SSH 代替不再调用密钥链帮助程序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-21T23:31:56.517

**错误消息**是由 git [credential helper](https://github.com/pah/git-credential-helper)抛出的。它应该是 git 避免在每次推送时询问您的用户名和密码的一种方式（请参见[此处](https://github.com/blog/1104-credential-caching-for-wrist-friendly-git-usage)）。

我不知道它为什么会死，但是，如果您想停止使用它（并避免看到错误消息），请删除您的系统 gitconfig 文件。

在我的系统（OSX 10.6.8）上，我这样做了：`sudo rm /usr/local/git/etc/gitconfig`因为文件中的唯一设置是凭证助手。先检查你的！

由于您收到**两条**死亡消息，因此您可能在自己的`~/.gitconfig`文件甚至项目中也有设置。编辑这些并删除凭据帮助程序块。

正如您所指出的，凭证助手的问题并没有阻止 git 工作。下一步是找出帮助程序失败的原因！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-02T16:11:31.260

我得到了它！尝试修改项目根目录中 .git/config 文件的内容。

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
[remote "origin"]
    url = https://github.com/yang3wei/octopress-3-in-one.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

到：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
[remote "origin"]
    url = git@github.com:yang3wei/octopress-3-in-one
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T12:22:55.340

每次执行 git pull 时，我都会遇到同样的错误。我意识到我没有从中获得的 git-credential 二进制文件（在哪里是 Mac 版本？）： [https](https://github.com/blog/1104-credential-caching-for-wrist-friendly-git-usage) ://github.com/blog/1104-credential-caching-for-wrist-friendly-git-usage并按照那里提到的步骤进行操作。它开始按我预期的方式工作。希望这可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T01:47:58.880

升级后尝试使用 git 版本 1.8.1.3 时出现以下错误： `git-credential-osxkeychain died of signal 11` 当我在执行 git pull 时，我会得到 `fatal: [https://github.com/.../../info/refs?service=git-upload-pack](https://github.com/.../../info/refs?service=git-upload-pack) not found: did you run git update-server-info on the server?`

我猜这与我之前在钥匙串中无效的 github 凭据有关。

*   使用命令空间打开钥匙串访问工具
*   在钥匙串访问工具中搜索了github
*   删除所有与 github 相关的条目（因为我不再需要它）
*   按照设置 git 密码缓存部分再次[设置 git](https://help.github.com/articles/set-up-git)
*   有效

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-28T02:11:18.317

我在错误中遇到了与 git 类似的问题：git-credential-osxkeychain dead of signal 11

从 http 开始不克隆 repo，因为每次需要进行推送或拉取时都需要验证

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-09T14:01:36.653

我正在使用 SourceTree（在 Mac 上）并且遇到了同样的问题。

首先，我在终端中输入了以下命令：

```
curl -s -O \
https://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain
chmod u+x git-credential-osxkeychain
sudo mv git-credential-osxkeychain \
"$(dirname $(which git))/git-credential-osxkeychain"
git config --global credential.helper osxkeychain 
```

然后我不得不切换到SourceTree中的系统git：

SourceTree > 首选项 > Git > 使用系统 Git

# html - 使用 blaze-html，如何在 html 中创建前导不间断空格

> ID：14272637
> 
> 赞同：2
> 
> 时间：2013-01-11T06:07:53.977
> 
> 标签：html, haskell

使用 blaze-html 包，我想创建一些看起来像这样的 html

```
<p>&nbsp;&nbsp;Some indented text 
```

我不知道如何创建不间断的空间。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:30:40.243

当然，一种方法是将包含该字符的 Haskell 编码版本的字符串提供给`toHtml`. 另一种方法是使用`preEscapedToMarkup`：

```
preEscapedToMarkup "&nbsp;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:44:25.453

按照 ertes 的建议，我尝试“给出一个包含字符的 Haskell 编码版本的字符串”。这段代码很冗长，所以我可以更好地理解这些类型是如何组合在一起的。

```
{-# LANGUAGE OverloadedStrings #-}

-- * base
import Data.Monoid ((<>))
import Data.Char (chr)

-- * text
import qualified Data.Text.Lazy as L (Text)
import Data.Text (Text, singleton)
import Data.Text.Lazy.Read (hexadecimal)

-- * blaze-html
import Text.Blaze.Html5
import qualified Text.Blaze.Html5 as H
import Text.Blaze.Renderer.String

nbspHex = "00A0"               :: L.Text -- Unicode codepoint for nbsp
Right (nbspInt, _) = hexadecimal nbspHex
nbspChar = chr nbspInt         :: Char
nbspTxt  = singleton nbspChar  :: Text
nbspHtml = toHtml nbspTxt      :: Html

someHtml ::  Html
someHtml = docTypeHtml $
  body $ do
    p "some text"
    p (nbspHtml <> nbspHtml <> "some indented text")

main :: IO ()
main = do
  let s = renderHtml $ someHtml
  putStrLn s 
```

正如我所希望的那样，这段代码在浏览器中显示了“一些缩进的文本”，但是查看 html，我没有看到任何“@nbsp;”，正如我所预料的那样。所以这不是我真正想要的答案。

感谢 Jukka 指出更好的解决方案。

# java - 如何动态传递类实例？

> ID：14272641
> 
> 赞同：0
> 
> 时间：2013-01-11T06:08:11.490
> 
> 标签：java

以下android java代码有什么问题

```
Class<?> c = Class.forName(PACKAGENAME+"."+className); 
Constructor<?> cons = c.getConstructor(String.class);
Object object = cons.newInstance(result); 
```

我希望它调用一个参数的构造函数。

# python - 可以用scrapy完成表单提交，做浏览器能做的一切吗

> ID：14272642
> 
> 赞同：1
> 
> 时间：2013-01-11T06:08:15.657
> 
> 标签：python, scrapy, phantomjs, casperjs

我有一项任务，我需要向网站提交表单，但他们不提供任何 API。我目前正在使用 webdriver 并且由于我的代码和浏览器之间的异步性质而面临许多问题。我正在寻找一个轻量级的可靠库/工具，我可以使用我可以完成用户使用浏览器执行的所有任务。

Casperjs 是可以完成我的工作的选项之一，但我更熟悉 python，并且与 casperjs 相比，scrapy 拥有更大的开发人员社区。

[没有浏览器的导航实用程序，重量轻且防故障](https://stackoverflow.com/questions/13873719/navigation-utility-with-out-browser-light-weight-and-fail-proof)是相关问题之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:39:23.507

简而言之，**否**。scrapy 无法渲染 java 脚本，但浏览器可以。

你可以使用硒。

如果您确定要使用 scrapy 并且需要运行 javascript，您可以使用

[用硒刮擦](http://snipplr.com/view/66998/rendered-javascript-crawler-with-scrapy-and-selenium-rc/)

[使用 gtk/webkit/jswebkit 抓取](http://snipplr.com/view/66996/renderedinteractive-javascript-with-gtkwebkitjswebkit/)

[使用 webdrivers 抓取](http://snipplr.com/view/66997/rendered-javascript-with-webdrivers/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:31:37.237

如果你喜欢 CasperJS 但又想坚持使用 Python，你应该看看[Ghost.py](https://github.com/jeanphix/Ghost.py)

# ravendb - RavenDB 2 在尝试创建数据库时返回 401

> ID：14272645
> 
> 赞同：2
> 
> 时间：2013-01-11T06:08:39.677
> 
> 标签：ravendb, ravendb-studio

这是 Raven #2230 的全新安装，在 IIS8/Win8 上运行。当工作室启动时，它提供创建新数据库，然后浏览器弹出凭据窗口 (401)。

Web.config 已*添加 key="Raven/AnonymousAccess" value="All"/*设置。还尝试按照[文档](http://ravendb.net/docs/server/deployment/as-iis-application)*添加 key="Raven/AnonymousUserAccessMode" value="All"/*。

启用了现场匿名身份验证，Windows 身份验证也是如此。

将 Raven.Bundles.Authorization.dll 添加到插件文件夹（不确定是否需要，但没有任何区别）。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:31:38.343

RavenDB as of today, is on version 2750 (stable). Upgrade and this issue should be fixed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T10:07:34.420

这样做的方法是将 web.config 中的 AnonymousAccess 设置设置为 Admin：

```
<add key="Raven/AnonymousAccess" value="Admin"/> 
```

创建数据库后，您应该将其更改回 All。

# javascript - 未捕获的类型错误：无法调用未定义 phonegap android 的方法“方法名称”

> ID：14272648
> 
> 赞同：0
> 
> 时间：2013-01-11T06:08:57.233
> 
> 标签：javascript, android, cordova

我是 PhoneGap 应用程序开发的新手，所以我准备了一个示例来测试平台。但不幸的是，当我运行应用程序时，我收到以下错误：

```
Uncaught TypeError: Cannot call method 'clickOnAndroid' of undefined. 
```

它昨天工作，但今天突然停止。

**索引.html**

```
app.initialize();
$('document').ready(function() {    
    $('#current_date').click(function() {               
        window.AndroidShareFunction.clickOnAndroid();           
    })
}); 
```

**主要活动：**

```
final class myInterface {
    myInterface() {
    }
    public void clickOnAndroid() {
        Toast.makeText(getApplicationContext(), "Test", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:09:36.107

由于您在 PhoneGap 平台中运行 JavaScript 应用程序，因此您需要等到 PhoneGap 完全初始化。换句话说，尽管您的文档由于 .而准备就绪`$('document').ready(...)`，但某些设备和/或 PhoneGap 的功能可能不存在，包括`window.AndroidShareFunction`. 要正确等待 PhoneGap 初始化，请使用以下代码：

```
var callback = function () {
    window.AndroidShareFunction.clickOnAndroid(); 
};

$(document).ready(function () {
    document.addEventListener("deviceready", callback, false);
}; 
```

希望这可以帮助。

# windows-phone-7 - VOIP 应用程序 - 耳机上的 MediaElement 输出

> ID：14272652
> 
> 赞同：0
> 
> 时间：2013-01-11T06:09:17.513
> 
> 标签：windows-phone-7, voip, mediaelement

我正在开发一个基于 SIP 的 VOIP 应用程序并坚持以下问题，

1 -- 我能够使用 SIP 协议和服务器，并且能够以 PCM 8000 采样率格式获取音频数据，

2 - 对于播放音频，我正在使用 MediaElement 框架，并使用此框架在 SmartPhone 多媒体扬声器中提供输出，无论如何要在耳片上获得默认输出，并让用户选择是否要参加通话通过扬声器或通过扬声器，

WP8好像有这个支持，但是WP7没找到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:50:23.530

这是不可能的。

除非，您将与 Microsoft 联系并协商获得编译本机 ARM 代码的特权。一些公司（例如 Tango、Spotify、Garmin）做到了。

# c++ - 如何从 IPv4 映射的 IPv6 地址解析 IPv4 地址？

> ID：14272656
> 
> 赞同：0
> 
> 时间：2013-01-11T06:09:43.013
> 
> 标签：c++, c, sockets, networking, network-programming

如何从 IPv4 映射的 IPv6 地址中获取 IPv4 地址？

例如，我有一个 IP 地址`::FFFF:129.144.52.38`。从中，我需要提取`129.144.52.38`. 有没有用于此目的的 API？

我可以使用以下功能识别 IPv6 或 IPv4 地址系列

```
int getaddrfamily(const char *addr)
{
    struct addrinfo hint, *info =0;
    memset(&hint, 0, sizeof(hint));
    hint.ai_family = AF_UNSPEC;
    // Uncomment this to disable DNS lookup
    //hint.ai_flags = AI_NUMERICHOST;
    int ret = getaddrinfo(addr, 0, &hint, &info);
    if (ret)
        return -1;
    int result = info->ai_family;
    freeaddrinfo(info);
    return result;
} 
```

如果我提供 IPv4 映射的 IPv6 地址，那么如何识别它是否是映射地址？是否有任何套接字 API 可以从映射的 IPv6 地址中提取 IPv4？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T17:44:40.810

尝试这样的事情：

```
#ifndef IN6_IS_ADDR_V4MAPPED
#define IN6_IS_ADDR_V4MAPPED(a) \
       ((((a)->s6_words[0]) == 0) && \
        (((a)->s6_words[1]) == 0) && \
        (((a)->s6_words[2]) == 0) && \
        (((a)->s6_words[3]) == 0) && \
        (((a)->s6_words[4]) == 0) && \
        (((a)->s6_words[5]) == 0xFFFF))
#endif

unsigned long getIPv4addr(const char *addr)
{
    struct addrinfo hint, *info = 0;
    unsigned long result = INADDR_NONE;
    memset(&hint, 0, sizeof(hint));
    hint.ai_family = AF_UNSPEC;
    // Uncomment this to disable DNS lookup
    //hint.ai_flags = AI_NUMERICHOST;
    if (getaddrinfo(addr, 0, &hint, &info) == 0)
    {
        switch (info->ai_family)
        {
            case AF_INET:
            {
                struct sockaddr_in *addr = (struct sockaddr_in*)(info->ai_addr);
                result = addr->sin_addr.s_addr;
                break;
            }

            case AF_INET6:
            {
                struct sockaddr_in6 *addr = (struct sockaddr_in6*)(info->ai_addr);
                if (IN6_IS_ADDR_V4MAPPED(&addr->sin6_addr))
                    result = ((in_addr*)(addr->sin6_addr.s6_addr+12))->s_addr;
                break;
            }
        }
        freeaddrinfo(info);
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:14:57.923

您只需从 IPv6 地址中提取最后四个字节，将它们组合成一个 32 位数字，您就拥有了 IPv4 地址。

当然，您需要首先检查它是否真的是 IPv4 映射地址。

# objective-c - 如何将图像发送到远程服务器

> ID：14272660
> 
> 赞同：-7
> 
> 时间：2013-01-11T06:09:56.223
> 
> 标签：objective-c

如何从下面的代码将图像发送到远程服务器最后一个字符串与图像一起放置

NSString *reqString=[NSString stringWithFormat:@"http://projeceads.info/spir/productinfo/productadd/%@/%@/%@/%@/%@/%@/%@/%@",ownerId ,productNameTxt.text,QuantityTxt.text,sizeTxt.text,ageTxt.text,priceTxt.text,descriptionView.text,imgstr]; NSURL *reqUrl=[NSURL URLWithString:reqString]; NSURLConnection *connection=[[NSURLConnection alloc]initWithRequest:[NSURLRequest requestWithURL:reqUrl] delegate:self];
[连接开始]；}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:00:00.983

有两种方法可以将数据上传到 Web 服务器：GET 或 POST

使用 GET，您必须将希望 Web 服务器拥有的所有信息放入 URL。使用 POST，您还可以将信息放入 POST 正文中。

从您的问题看来，您似乎试图通过 GET 请求上传图像并“将图像附加到 URL”。

这样的图像是二进制数据，或者未压缩为 RGBA 值，通常为 1 字节，每次乘以宽度乘以高度。由于这对于大多数用途来说数据太多，因此人们喜欢压缩图像。UIImagePNGRepresentation 允许您以 PNG 或 JPEG 格式创建数据。

但是，如果您的网络服务器无法处理二进制数据，即使这种压缩格式也可能无法通过 HTTP 传输。因为您不能在本身是纯文本格式的 HTTP 中使用 0-255 的所有值。从历史上看，HTTP 仅使用可以安全传输的 7 位 ASCII 字符 (0-127)。因此，您要发送到某处的任何二进制数据都必须编码为仅使用安全字符的表示形式。最流行的这种编码方案是“base64”。

base64 编码的一个缺点是它将您需要发送的数据量增加了大约三分之一。大多数现代网络服务器实际上也可以接收二进制发布数据。

我在这里写了如何通过 POST 将图像上传到 TwitPic。您需要将正确的标题放在一起并组成一个 POST 正文，如下所示：http: [//www.cocoanetics.com/2010/02/uploading-uiimages-to-twitpic/](http://www.cocoanetics.com/2010/02/uploading-uiimages-to-twitpic/)

如果您的网络服务器支持，我也建议您使用这种方式上传图片。这不是您要寻找的答案，而是您应该采取的方法。

现在要实际回答您的问题“如何创建包含图像表示的 URL”（因为我的服务器管理员太愚蠢了，无法为我构建一个也可以接受 POST 的脚本）...

步骤是：

1.  使用 UIImage 创建压缩表示...表示
2.  Base64 编码从 1 开始的输出
3.  对 2 的输出进行 URL 编码
4.  附加到 URL 字符串
5.  发送 GET 请求

对于 base64 编码，我使用著名的 Matt Gallagher 创建的方法：[https ://github.com/Cocoanetics/DTFoundation/blob/master/Core/Source/NSData%2BBase64.h](https://github.com/Cocoanetics/DTFoundation/blob/master/Core/Source/NSData%2BBase64.h)

URL 编码是必要的，因为与 7 位 HTTP 相比，在格式良好的 URL 中合法使用的字符更少。对于 URL 编码，我使用这个 NSString 类别。[https://github.com/Cocoanetics/DTFoundation/blob/master/Core/Source/NSString%2BDTURLEncoding.h](https://github.com/Cocoanetics/DTFoundation/blob/master/Core/Source/NSString%2BDTURLEncoding.h)

总而言之：即使您可能不应该通过 GET URL 发送图像。像普通人一样将它们作为 POST 请求发送，并将图像数据以二进制或 base64 编码格式放入 POST 正文中。

PS：我在这里发布的这个答案的更多编辑版本：http: [//www.cocoanetics.com/2013/01/how-to-send-image-to-remote-server/](http://www.cocoanetics.com/2013/01/how-to-send-image-to-remote-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:17:24.467

你必须发送 NSData

```
NSData *attachmentData = UIImagePNGRepresentation(UIImage); 
```

这不是一个好问题，您可以找到很多与此相关的帖子在发布任何问题之前，请先尝试在谷歌上搜索它。

[http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

# iphone - 不同应用版本的名称更改并避免在 App Store 上发送垃圾邮件

> ID：14272661
> 
> 赞同：1
> 
> 时间：2013-01-11T06:09:58.103
> 
> 标签：iphone, ipad, app-store, spam

我在 App Store 上发布了 2 个仅适用于 iPad 的应用程序。

我现在想发布相同应用的 iPhone 版本。

但是，我读到 Apple 指南指出，开发人员向 App Store 发送许多类似应用程序版本的垃圾邮件将导致其帐户被终止。

所以我基本上想问2个问题：

1.  为了避免垃圾邮件，我应该根本不发布 iPhone 版本还是发布通用应用程序版本？
2.  如果为不同的设备发布相同的应用程序，Apple 会要求更改名称。对于 iPad，我可以说“game_name HD”。但是为 iPhone 命名呢？我在想“game_name Pro”。

非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T21:50:19.450

过去，我使用“Pocket”这个词来表示 iPhone/iPod Touch 版本。如，稗蓝草袖珍版。

# php - Codeigniter 删除

> ID：14272664
> 
> 赞同：0
> 
> 时间：2013-01-11T06:10:28.267
> 
> 标签：php, codeigniter, http-status-code-404, codeigniter-url

我正在尝试通过codeigniter中的删除按钮从我的数据库中删除一些数据......我做了一些研究并在我的视图中提出了这个链接......

```
<td><a href='hockey/deleteskater/" . $row->id . "'>Delete</a></td> 
```

我的控制器中的这个功能

```
public function deleteskater($id){
        $this->load->database();
        $this->db->delete('skaters', array('id' => $id));
    } 
```

但我得到一个 404 Not Found 页面......我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T06:30:17.147

那是因为：

1.  url 可能会被错误地插入（附加到当前 url 的所有段）
2.  更重要的是：您没有打印出变量...只是 '$row->id' 作为字符串。那不是 php-html 插值

应该：

```
<td><a href="<?php echo site_url("hockey/deleteskater/" . $row->id);?>"
     onclick="return confirm('Delete content?');">Delete</a></td> 
```

我冒昧地至少添加了一个 onclick 警报，这样您就不会因为误点击而无意中删除了某些内容。
此外，应通过 POST 请求（和 CSRF 令牌以提高安全性）执行破坏性操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:37:56.883

```
<td><a href='hockey/deleteskater/" . $row->id . "'>Delete</a></td> 
```

应该

```
<td><a href='hockey/deleteskater/<?php echo $row->id ?>'>Delete</a></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T02:05:08.293

您可以使用默认的[Codeigniter 锚点](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)。

```
<td><?php echo anchor("hockey/deleteskater/'. $row->id . '", "Delete"); ?></td> 
```

# sql - SQL Server 表值函数问题

> ID：14272665
> 
> 赞同：0
> 
> 时间：2013-01-11T06:10:38.577
> 
> 标签：sql, sql-server, sql-server-2012

刚刚收到另一个询问，我正在拔掉我在这里留下的剩余头发。

我有 4 个表（、 和`Product`）`Customers`我需要创建一个将 Country Name 传递给函数的值表函数。我还需要将我的桌子与我的桌子连接起来的功能。理想情况下，我想按订单日期过滤国家。所以我希望能够从告诉我在某个日期范围内来自某个国家/地区的订单的功能中进行选择。`Orders``Order Details``Customers``Orders`

到目前为止，我已经尝试了以下但没有太大成功：

```
USE sample;
GO
CREATE FUNCTION Orders_By_Country (@Country VARCHAR(50))
    RETURNS TABLE
    AS RETURN (SELECT Customers.Country, Customers.CompanyName
                    FROM Customers
                   WHERE Customers.Country = Orders.ShipCountry
                 AND Country = @Country); 
```

我的表中没有`Country`列，`Orders`所以也许这就是它不起作用的原因。不知道如何加入这两个。`Orders`并作为关系`Customers`分享，但尝试这也给了我一个错误。`CustomerID`

有任何想法吗？我现在要睡觉了，但我会在早上第一件事回来查看。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:15:11.330

如果您想使用该`Orders`表进行决策，或者您想从 TVF 中的该表返回一个或多个列，则需要**加入**它！

```
CREATE FUNCTION Orders_By_Country (@Country VARCHAR(50))
    RETURNS TABLE
    AS RETURN 
       (SELECT Customers.Country, Customers.CompanyName
        FROM Customers
        INNER JOIN Orders ON Orders.CustomerId = Customers.CustomerId
        WHERE 
            Customers.Country = Orders.ShipCountry
            AND Country = @Country); 
```

或者你可能根本不需要它 - 看到你`Country`在桌子上有一个列`Customers`：

```
CREATE FUNCTION Orders_By_Country (@Country VARCHAR(50))
    RETURNS TABLE
    AS RETURN 
       (SELECT Customers.Country, Customers.CompanyName
        FROM Customers
        WHERE 
            Customers.Country = @Country); 
```

# jquery - 使用 jQuery 在某些事件上禁用 div

> ID：14272667
> 
> 赞同：0
> 
> 时间：2013-01-11T06:10:43.593
> 
> 标签：jquery, button, image, javascript

我有一张图片

```
<div id="map-viewer-button"><img src="image/Btn1.png"
                    onmouseover="this.src='image/Btn2.png'"
                    onmouseout="this.src='image/Btn1.png'"
                    onmousedown="this.src='image/Btn3.png'"
                    onmouseup="this.src='image/Btn2.png'"               
                    onclick="disableButton()" width="200px" height="100px"></div> 
```

我想在点击后禁用图像。并在发生其他情况时启用它。

```
function disableButton(){
        $('#map-viewer-button :input').attr('disabled', true);
}
function enableButton(){
        $('#map-viewer-button :input').removeAttr('disabled');
} 
```

但这不起作用。可能是什么原因？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:20:50.623

该[`disabled`](http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1)属性用于表单控件

> 以下元素支持禁用属性：BUTTON、INPUT、OPTGROUP、OPTION、SELECT 和 TEXTAREA。

你可以改用一个`<input type="image" />`元素

禁用图像输入内联使用：`... onclick="this.disabled = true" />`

* * *

[演示 jsfiddle（纯 JavaScript）](http://jsfiddle.net/pxfunc/NfDXu/1/)

[演示 jsfiddle (jQuery)](http://jsfiddle.net/pxfunc/d7hMU/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:15:33.217

请将代码更改为此并尝试...

```
function disableButton(){
        $('#map-viewer-button :img').attr('disabled', true);
}
function enableButton(){
        $('#map-viewer-button :img').removeAttr('disabled');
} 
```

# facebook - facebook喜欢没有在php中没有评论的情况下显示在facebook墙上

> ID：14272668
> 
> 赞同：1
> 
> 时间：2013-01-11T06:10:45.013
> 
> 标签：facebook

问题是有人点击了like按钮，facebook弹出窗口即将到来，用户点击“post to facebook”按钮。喜欢的页面没有显示在 facebook 墙上。如果我们在评论框中写评论，然后单击 post to facebook 按钮，它就会出现在墙上。

例如。单击此页面上的点赞按钮[http://www.bitcandy.com/plogs/plogDedicated/music/best-song-ever-lana-del-rey-video-games](http://www.bitcandy.com/plogs/plogDedicated/music/best-song-ever-lana-del-rey-video-games)并且不要写任何评论并单击发布到Facebook。它不会显示在你的墙上。如果你写了评论，它就会在那里......</p>

可能你找到了我想解释的问题..如果你知道这个，请告诉我..

谢谢

# php - 为什么这些查询这么慢？

> ID：14272669
> 
> 赞同：0
> 
> 时间：2013-01-11T06:10:49.923
> 
> 标签：php, mysql, sql, performance, optimization

我已经使用[libpuzzle](http://www.pureftpd.org/project/libpuzzle)分析了 300 万张图像。200 万来自我的主服务器，100 万来自另一个服务器。我想将这些信息合并到 1 个 MySQL 数据库中。

我需要在`test_images_pending`数据库中获取记录并将它们插入，`test_images`但我必须以没有重复数据的方式进行。

`test_images`在所有表中总共有 1.15 亿条记录，单词本身就有 1.1 亿条记录。大小 ~4.4 GB

`test_images_pending`分别有6900万和6500万。大小 ~2.6 GB

我的计算机上有 8GB 内存，如果需要，我愿意将所有内容（或尝试）加载到内存中，以加快速度。

我希望对我的代码和/或技术进行一些优化以使 MySQL 更快，我可以将速率从每秒大约 2 张图片（来自 test_images_pending.picture 表）提高到更易于管理的东西。最起码是每秒 100 张图片。

`test_images`这是和的表设置`test_images_pending`：

```
--
-- Table structure for table `errors`
--

CREATE TABLE IF NOT EXISTS `errors` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `url` varchar(255) NOT NULL,
  `num` int(11) NOT NULL,
  `pid` bigint(20) unsigned NOT NULL,
  `error` varchar(512) NOT NULL,
  `datetime` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=245688 ;

-- --------------------------------------------------------

--
-- Table structure for table `pictures`
--

CREATE TABLE IF NOT EXISTS `pictures` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `digest` char(32) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_digest` (`digest`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1107725 ;

-- --------------------------------------------------------

--
-- Table structure for table `signatures`
--

CREATE TABLE IF NOT EXISTS `signatures` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `compressed_signature` varchar(338) NOT NULL,
  `picture_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `picture_id` (`picture_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1107725 ;

-- --------------------------------------------------------

--
-- Table structure for table `stored_pictures`
--

CREATE TABLE IF NOT EXISTS `stored_pictures` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `url` varchar(255) NOT NULL,
  `pid` bigint(20) unsigned NOT NULL,
  `num` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime DEFAULT NULL,
  `picture_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_url` (`url`),
  KEY `idx_picture_id` (`picture_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2773867 ;

-- --------------------------------------------------------

--
-- Table structure for table `words`
--

CREATE TABLE IF NOT EXISTS `words` (
  `pos_and_word` char(5) NOT NULL,
  `signature_id` int(11) NOT NULL,
  KEY `idx_pos_and_word` (`pos_and_word`),
  KEY `signature_id` (`signature_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
-- 
```

这是我正在运行的 php PDO 代码：

```
<html>
<head>
    <link href="../css/print.css" rel="stylesheet" type="text/css" media="print" /> <!-- siehe screen.css -->
    <link href="../css/screen.css" rel="stylesheet" type="text/css" media="screen, projection" /> 
    <!--[if lte IE 6]><link rel="stylesheet" href="../css/ielte6.css" type="text/css" media="screen" /><![endif]--> 
</head>
<body>
<?php
    ini_set('max_execution_time', 0);

    $dbh = new PDO("mysql:host=127.0.0.1;port=3306;dbname=test_images_pending;charset=utf-8", "root", "");
    $dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
    $dbh->setAttribute(PDO::ATTR_AUTOCOMMIT, FALSE);

    try {
        $query = "select id,digest from test_images_pending.pictures"; 
        $sth = $dbh->prepare($query);
        $sth->execute();

        while ($pending_pictures_rows = $sth->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_NEXT)) {

            // Print out what id it's on.
            print $pending_pictures_rows['id']."<br>";
            buffer_flush();

            try {
                $dbh->beginTransaction(); 

                $query = "SELECT COUNT(id) from test_images.pictures WHERE digest = :digest";
                $sth1 = $dbh->prepare($query);
                $sth1->bindParam(':digest', $pending_pictures_rows['digest']);
                $sth1->execute();

                $count = $sth1->fetchColumn();

                if ($count == 1) {

                    $query = "SELECT id from test_images.pictures WHERE digest = :digest";
                    $sth2 = $dbh->prepare($query);
                    $sth2->bindParam(':digest', $pending_pictures_rows['digest']);
                    $sth2->execute();

                    $correct_pic_id = $sth2->fetchColumn();

                    if(!isset($correct_pic_id) or empty($correct_pic_id)) {
                        throw new PDOException('correct_pic_id was empty');
                    }

                    $query = "select * from test_images_pending.stored_pictures WHERE picture_id = :picture_id"; 
                    $sth3 = $dbh->prepare($query);
                    $sth3->bindParam(':picture_id', $pending_pictures_rows['id']);
                    $sth3->execute();

                    while ($row = $sth3->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_NEXT)) {

                        $query = "INSERT INTO test_images.stored_pictures 
                                    (id, url, pid, num, updated_at, created_at, picture_id) 
                                  VALUES 
                                    (default, :url, :pid, :num, :updated_at, :created_at, :picture_id);";

                        $sth4 = $dbh->prepare($query);
                        $sth4->bindParam(':url', $row['url']);
                        $sth4->bindParam(':pid', $row['pid']);
                        $sth4->bindParam(':num', $row['num']);
                        $sth4->bindParam(':updated_at', $row['updated_at']);
                        $sth4->bindParam(':created_at', $row['created_at']);
                        $sth4->bindParam(':picture_id', $correct_pic_id);
                        $sth4->execute();
                    }

                    $query = "DELETE FROM test_images_pending.stored_pictures WHERE picture_id = :picture_id;";
                    $sth5 = $dbh->prepare($query);
                    $sth5->bindParam(':picture_id', $pending_pictures_rows['id']);
                    $sth5->execute();

                    $query = "select id from test_images_pending.signatures WHERE picture_id = :picture_id;"; 
                    $sth6 = $dbh->prepare($query);
                    $sth6->bindParam(':picture_id', $pending_pictures_rows['id']);
                    $sth6->execute();

                    $signature_id = $sth6->fetchColumn();

                    if(!isset($signature_id) or empty($signature_id)) {
                        throw new PDOException('signature_id was empty');
                    }

                    $query = "DELETE FROM test_images_pending.words WHERE signature_id = :signature_id;"; 
                    $sth7 = $dbh->prepare($query);
                    $sth7->bindParam(':signature_id', $signature_id);
                    $sth7->execute();

                    $query = "DELETE FROM test_images_pending.signatures WHERE picture_id = :picture_id";        
                    $sth8 = $dbh->prepare($query);
                    $sth8->bindParam(':picture_id', $pending_pictures_rows['id']);
                    $sth8->execute();

                    $query = "DELETE FROM test_images_pending.pictures WHERE digest = :digest";                                  
                    $sth9 = $dbh->prepare($query);
                    $sth9->bindParam(':digest', $pending_pictures_rows['digest']);
                    $sth9->execute();
                } else if ($count == 0){

                    $query = "INSERT INTO test_images.pictures
                                (id, digest) 
                              VALUES 
                                (default, :digest);";

                    $sth2 = $dbh->prepare($query);
                    $sth2->bindParam(':digest', $pending_pictures_rows['digest']);
                    $sth2->execute();

                    $new_pic_id = $dbh->lastInsertId();

                    $query = "select * from test_images_pending.stored_pictures WHERE picture_id = :picture_id"; 
                    $sth3 = $dbh->prepare($query);
                    $sth3->bindParam(':picture_id', $pending_pictures_rows['id']);
                    $sth3->execute();

                    while ($row = $sth3->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_NEXT)) {

                        $query = "INSERT INTO test_images.stored_pictures 
                                    (id, url, pid, num, updated_at, created_at, picture_id) 
                                  VALUES 
                                    (default, :url, :pid, :num, :updated_at, :created_at, :picture_id);";

                        $sth4 = $dbh->prepare($query);
                        $sth4->bindParam(':url', $row['url']);
                        $sth4->bindParam(':pid', $row['pid']);
                        $sth4->bindParam(':num', $row['num']);
                        $sth4->bindParam(':updated_at', $row['updated_at']);
                        $sth4->bindParam(':created_at', $row['created_at']);
                        $sth4->bindParam(':picture_id', $new_pic_id);
                        $sth4->execute();
                    }

                    $query = "DELETE FROM test_images_pending.stored_pictures WHERE picture_id = :picture_id;";
                    $sth5 = $dbh->prepare($query);
                    $sth5->bindParam(':picture_id', $pending_pictures_rows['id']);
                    $sth5->execute();

                    $query = "select id,compressed_signature from test_images_pending.signatures WHERE picture_id = :picture_id;"; 
                    $sth6 = $dbh->prepare($query);
                    $sth6->bindParam(':picture_id', $pending_pictures_rows['id']);
                    $sth6->execute();
                    $fetched = $sth6->fetch(PDO::FETCH_ASSOC);

                    $signature_id = $fetched['id'];

                    if(!isset($signature_id) or empty($signature_id)) {
                        print_r($sth6->fetch(PDO::FETCH_ASSOC));
                        throw new PDOException('signature_id was empty');
                    }

                    $compressed_signature = $fetched['compressed_signature'];

                    if(!isset($compressed_signature) or empty($compressed_signature)) {
                        print_r($sth6->fetch(PDO::FETCH_ASSOC));
                        throw new PDOException('compressed_signature was empty');
                    }

                    $query = "INSERT INTO test_images.signatures
                                (id, compressed_signature, picture_id)
                              VALUES
                                (default, :compressed_signature, :picture_id);";

                    $sth7 = $dbh->prepare($query);
                    $sth7->bindParam(':picture_id', $new_pic_id);
                    $sth7->bindParam(':compressed_signature', $compressed_signature);
                    $sth7->execute();

                    $new_sig_id = $dbh->lastInsertId();

                    $query = "SELECT pos_and_word FROM test_images_pending.words WHERE signature_id = :signature_id";  
                    $sth8 = $dbh->prepare($query);
                    $sth8->bindParam(':signature_id', $signature_id);
                    $sth8->execute();

                    while ($row = $sth8->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_NEXT)) {

                        $query = "INSERT INTO test_images.words 
                                    (pos_and_word, signature_id)
                                  VALUES 
                                    (:pos_and_word, :signature_id);";

                        $sth9 = $dbh->prepare($query);
                        $sth9->bindParam(':pos_and_word', $row['pos_and_word']);
                        $sth9->bindParam(':signature_id', $new_sig_id);
                        $sth9->execute();
                    }

                    $query = "DELETE FROM test_images_pending.words WHERE signature_id = :signature_id;"; 
                    $sth10 = $dbh->prepare($query);
                    $sth10->bindParam(':signature_id', $signature_id);
                    $sth10->execute();

                    $query = "DELETE FROM test_images_pending.signatures WHERE picture_id = :picture_id";        
                    $sth11 = $dbh->prepare($query);
                    $sth11->bindParam(':picture_id', $pending_pictures_rows['id']);
                    $sth11->execute();

                    $query = "DELETE FROM test_images_pending.pictures WHERE digest = :digest";                                  
                    $sth12 = $dbh->prepare($query);
                    $sth12->bindParam(':digest', $pending_pictures_rows['digest']);
                    $sth12->execute();

                } else {
                    throw new PDOException("Found more than 1 match for the digest '{$pending_pictures_rows['digest']}' in 'test_images.pictures' ", $query);
                }

                $dbh->commit(); 
            } catch (PDOException $e) {
                $dbh->rollback(); 
                print "<pre>"; print_r($e); print "</pre>"; exit;
            }
        }

        try {

            $dbh->beginTransaction();

            $query = "SELECT * FROM test_images_pending.errors";
            $sth13 = $dbh->prepare($query);
            $sth13->execute();

            while ($row = $sth13->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_NEXT)) {

                $query = "INSERT INTO test_images.errors 
                            (id, url, num, pid, error, datetime)
                          VALUES 
                            (default, :url, :num, :pid, :error, :datetime);";

                $sth14 = $dbh->prepare($query);
                $sth14->bindParam(':url', $row['url']);
                $sth14->bindParam(':num', $row['num']);
                $sth14->bindParam(':pid', $row['pid']);
                $sth14->bindParam(':error', $row['error']);
                $sth14->bindParam(':datetime', $row['datetime']);
                $sth14->execute();
            }

            $query = "DELETE FROM test_images_pending.errors WHERE 1";       
            $sth15 = $dbh->prepare($query);
            $sth15->execute();

            $dbh->commit(); 
        } catch (PDOException $e) {
            $dbh->rollback(); 
            print "<pre>"; print_r($e); print "</pre>"; exit;
        }
    } catch (PDOException $e) {
        print "<pre>"; print_r($e); print "</pre>"; exit;
    }

function buffer_flush(){

    echo str_pad('', 512);
    echo '<!-- -->';

    if(ob_get_length()){

        @ob_flush();
        @flush();
        @ob_end_flush();

    }

    @ob_start();

}
?> 
</body>
</html> 
```

编辑：

一些分析：

这个 INSERT 每张非相似图片运行 100 次（到目前为止，每 6 次大约 5 次）。完成 while 循环通常需要 0.5 到 0.9 秒，每个 INSERT 平均需要 0.007 秒。

```
$query = "INSERT INTO test_images.words 
        (pos_and_word, signature_id)
        VALUES 
        (:pos_and_word, :signature_id);";

$sth9 = $dbh->prepare($query);
$sth9->bindParam(':pos_and_word', $row['pos_and_word']);
$sth9->bindParam(':signature_id', $new_sig_id);
$sth9->execute(); 
```

```
DELETE FROM test_images_pending.stored_pictures WHERE picture_id = :picture_id;

select * from test_images_pending.stored_pictures WHERE picture_id = :picture_id

DELETE FROM test_images_pending.stored_pictures WHERE picture_id = :picture_id; 
```

每张相似的图片平均需要 0.15 秒左右（约 1 分/6 分）。

编辑2：

通过这个基准测试：[http ://we-love-php.blogspot.com/2012/08/mass-inserts-updates-sqlite-vs-mysql.html](http://we-love-php.blogspot.com/2012/08/mass-inserts-updates-sqlite-vs-mysql.html)

只需简单地写入文本文件即可替换之前在编辑 1 中提到的慢速 while 循环，例如：

```
$inserts = array();
while ($row = $sth8->fetch(PDO::FETCH_ASSOC, PDO::FETCH_ORI_NEXT)) {
    $inserts[] = "(".$dbh->quote($row['pos_and_word']).", ".$dbh->quote($new_sig_id).")";
}
$query = "INSERT INTO imvu_images.words (pos_and_word, signature_id) VALUES " . implode(',',$inserts) . ";";            
file_put_contents("inserts.sql", $query."\n", FILE_APPEND); 
```

让它更快。不过不是每秒 100 个，更像是 10-20 个。然后我可以稍后执行 SQL，它会立即运行而不会延迟。（这就是为什么我认为我的代码有问题）。我想要每秒 100 个的原因是因为我可以分析图像并将它们以每秒 30 个的速度插入到 1 个数据库中。以这种速度，我分析 200 万张图像并让它一张一张地插入比批量插入行要快。这似乎不对，服务器可以下载 30 张图像，分析 30 张图像，然后在 1 秒内执行 30 次插入，但仅执行这些各种 SQL 语句甚至无法匹配。

编辑3：

将 my.ini 更新为：

```
key_buffer_size=4000M
read_buffer_size=32M
read_rnd_buffer_size=200M
bulk_insert_buffer_size=1000M
myisam_max_sort_file_size=10000M
myisam_repair_threads=1
tmp_table_size = 1024M
max_heap_table_size = 1024M
join_buffer_size=8M
sort_buffer_size=8M
max_allowed_packet=32M
max_connect_errors=10
myisam_sort_buffer_size=256M
query_cache_limit=12M
query_cache_size=256M
query_cache_type=1 
```

在不使用 file_put_contents hack 的情况下，这似乎将性能提高了 2 倍。尽管如此，每秒 5 条记录并没有减少它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:52:09.670

这个过程如此缓慢的原因不是因为单个查询很慢 - 事实上，我对它的速度有多快感到惊讶 - 而是因为您正在处理数百万条记录，一次一条，通过循环遍历每条记录在您的外部结果集中。SQL 擅长的是一次性处理数百万条记录。

您的代码中有太多业务逻辑，我不想为您重写整个代码，但我认为您希望按照以下方式重写代码

```
INSERT INTO test_images.pictures
      (id, digest) 
SELECT id, digest
from  test_images_pending.pictures
where id not in 
   (select id from test_images.pictures) 
```

对其他表执行相同操作。这应该运行得非常快——如果你有一个好的索引方案，你几乎肯定会受到 I/O 限制。您绝对应该达到每秒超​​过 2 条记录！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:01:40.697

编辑：主要问题是正在插入的源表上的索引。建议在进行批量插入之前删除任何不需要的索引，然后重建后缀。

通过调整 mysql 设置和以下代码的组合，我能够在 30 秒左右的时间内获得重复图像（连接部分）以执行 50,000 次，25 秒只是 JOIN 操作。

第二部分我使用的是 NOT IN，这是大部分时间发生的地方，但它以每秒 800 条记录的速度插入，所以它超出了我的目标。

我将把这个问题留得更久，看看它是否可以进一步优化，因为我有 3900 万条记录要处理。

```
<html>
<head>
      <link href="../css/print.css" rel="stylesheet" type="text/css" media="print" /> <!-- siehe screen.css -->
    <link href="../css/screen.css" rel="stylesheet" type="text/css" media="screen, projection" /> 
    <!--[if lte IE 6]><link rel="stylesheet" href="../css/ielte6.css" type="text/css" media="screen" /><![endif]--> 
</head>
<body>
 <?php
    ini_set('max_execution_time', 0);
    $benchmark = false;
    $delete = false;
    $dbh = new PDO("mysql:host=127.0.0.1;port=3306;dbname=test_images_pending;charset=utf-8", "root", "");
    $dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
    $dbh->setAttribute(PDO::ATTR_AUTOCOMMIT, FALSE);

    $timers = array();

    try {
        $query = "SELECT * FROM test_images.pictures
                INNER JOIN test_images_pending.pictures
                USING ( digest )";

        $sth = $dbh->prepare($query);
        $sth->execute();

        while ($join_rows = $sth->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_NEXT)) {

            $digest =  $join_rows[0];
            $correct_pic_id = $join_rows[1];
            $wrong_pic_id = $join_rows[2];

            try {
                $dbh->beginTransaction(); 

                $query = "INSERT INTO test_images.stored_pictures 
                                (url, pid, num, updated_at, created_at, picture_id) 
                          SELECT 
                                url, pid, num, updated_at, created_at, :correct_pic_id FROM test_images_pending.stored_pictures WHERE picture_id = :wrong_pic_id;";

                $sth4 = $dbh->prepare($query);
                $sth4->bindParam(':correct_pic_id', $correct_pic_id);
                $sth4->bindParam(':wrong_pic_id', $wrong_pic_id);
                $sth4->execute();

                $dbh->commit(); 
            } catch (PDOException $e) {
                $dbh->rollback(); 
                print "<pre>"; print_r($e); print "</pre>"; exit;
            }
        }

    } catch (PDOException $e) {
        print "<pre>"; print_r($e); print "</pre>"; exit;
    }

    try {

        $query = "SELECT COUNT(id) FROM  `signatures` WHERE (`id` -  `picture_id` !=0)  ";
        $sth = $dbh->prepare($query);
        $sth->execute();

        $count = $sth->fetchColumn();
        if($count > 0) {
            die("we got a sig that aint matching its pic_id, we cant assume sig_id = pic_id. Back to drawing board");
        }
        $sth = null;

        $query = "  SELECT  digest, id
                    FROM    test_images_pending.pictures
                    WHERE   digest NOT IN
                        (
                        SELECT  digest
                        FROM    test_images.pictures
                        )"; 
        $sth = $dbh->prepare($query);
        $sth->execute();

        while ($not_in_rows = $sth->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_NEXT)) {

            $digest =  $not_in_rows[0];
            $wrong_pic_id = $not_in_rows[1];

            try {
                $dbh->beginTransaction(); 

                $query = "INSERT INTO test_images.pictures
                            (id, digest) 
                          VALUES 
                            (default, :digest);";

                $sth2 = $dbh->prepare($query);
                $sth2->bindParam(':digest', $digest);
                $sth2->execute();

                $new_pic_id = $dbh->lastInsertId();

                $query = "INSERT INTO test_images.stored_pictures 
                                (url, pid, num, updated_at, created_at, picture_id) 
                          SELECT 
                                url, pid, num, updated_at, created_at, :new_pic_id FROM test_images_pending.stored_pictures WHERE picture_id = :wrong_pic_id;";

                $sth3 = $dbh->prepare($query);
                $sth3->bindParam(':new_pic_id', $new_pic_id);
                $sth3->bindParam(':wrong_pic_id', $wrong_pic_id);
                $sth3->execute();

                $query = "INSERT INTO test_images.signatures 
                                (compressed_signature, picture_id) 
                          SELECT 
                                compressed_signature, :new_pic_id FROM test_images_pending.signatures WHERE picture_id = :wrong_pic_id;";

                $sth4 = $dbh->prepare($query);
                $sth4->bindParam(':new_pic_id', $new_pic_id);
                $sth4->bindParam(':wrong_pic_id', $wrong_pic_id);
                $sth4->execute();
                $new_sig_id = $dbh->lastInsertId();

                $query = "INSERT INTO test_images.words 
                            (pos_and_word, signature_id)
                          SELECT 
                            pos_and_word, :new_sig_id FROM test_images_pending.words WHERE signature_id = :old_sig_id

                            ";

                $sth9 = $dbh->prepare($query);
                $sth9->bindParam(':old_sig_id', $wrong_pic_id);
                $sth9->bindParam(':new_sig_id', $new_sig_id);
                $sth9->execute();

                $dbh->commit(); 
            } catch (PDOException $e) {
                $dbh->rollback(); 
                print "<pre>"; print_r($e); print "</pre>"; exit;
            }
        }
    } catch (PDOException $e) {
        print "<pre>"; print_r($e); print "</pre>"; exit;
    }

function buffer_flush(){

    echo str_pad('', 512);
    echo '<!-- -->';

    if(ob_get_length()){

        @ob_flush();
        @flush();
        @ob_end_flush();

    }

    @ob_start();

}
 ?> 
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:34:09.717

为什么不能使用 Mysql 存储过程？它们直接在 Mysql 服务器中执行，比从 php 执行查询要快。 [http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

像这样从 php 调用存储过程：

```
$res = mysql_query('call sp_sel_test()');
if ($res === FALSE) {
    die(mysql_error());
} 
```

您需要在连接时设置客户端标志，以便在 php 中使用存储过程。使用这个：mysql_connect($this->h,$this->u,$this->p,false,65536);

有关更多详细信息，请参阅[MySQL 客户端标志](http://www.php.net/manual/en/mysql.constants.php#86644)。

# ruby-on-rails - Rails更新后运行spork时无法将nil转换为Hash

> ID：14272671
> 
> 赞同：0
> 
> 时间：2013-01-11T06:10:53.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, rspec, ruby-on-rails-3.2

我将 Rails 升级到 3.2.11。如果我运行 rspec，它会通过所有测试。如果我运行服务器，它似乎工作正常。但是，当我运行guard（使用spork）时，guard 中的rspec 将无法加载Rails 环境。

当我运行`bundle exec guard`并尝试运行 rspec 时，加载 Rails 时会出现以下错误：

> 遇到异常：#

堆栈跟踪对我来说没有多大意义。

```
.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.3/lib/rack/session/cookie.rb:85:in `initialize'  
code/config/environment.rb:5:in `<top (required)>'  
code/spec/spec_helper.rb:13:in `block in <top (required)>' 
```

spec_helper 是我从互联网上得到的正常的，只是加载 Rails。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:10:53.507

在过去的几天里，Rack 恰好更新到 1.4.3。并根据这个[没有提供给 Rack::Session::Cookie 警告的秘密选项？](https://stackoverflow.com/questions/10374871/no-secret-option-provided-to-racksessioncookie-warning)Rails 有一些问题。

如果我强制使用 rack 1.4.1 那么就没有问题了。

# c# - 如何在asp.net中提取jquery.ajax序列化表单参数

> ID：14272675
> 
> 赞同：2
> 
> 时间：2013-01-11T06:11:10.493
> 
> 标签：c#, jquery, asp.net, c#-4.0, json.net

我想提取表单参数，就像在java中一样`request.getParameter("blah")`

如何在 C# 中做到这一点，目前我用 jQuery 序列化我的表单并发送到 web 方法，我想在那里提取它

阿贾克斯

```
$("#btn").click(function () {
            alert($('#login').serialize());
            $.ajax({
                type: "POST",
                url: "Default.aspx/Login",
                data: "{'vals': '" + $('#login').serialize() + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    TINY.box.show({ html: msg.d, animate: false, close: false, mask: true, boxid: 'success', autohide: 3, top: 200, left: 500 });
                }
            });
        });
    }); 
```

代码隐藏

```
[WebMethod]
        public static string Login(String vals)
        {
           //WHAT TO DO HERE SO THAT I CAN EXTRACT FROM THAT STRING
          return vals;
        } 
```

我可以在客户端看到 msg.d 恢复的数据，但就是这样的“uname=1&pwd=2”。怎么提取？？请有人帮帮我。还有什么方法可以在不使其静态的情况下访问 webmethod？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:19:01.273

使用 json 而不是字符串。
这里有几个链接，您可以关注
[使用 jQuery AJAX 发送多个数据参数](https://stackoverflow.com/questions/9328743/sending-multiple-data-parameters-with-jquery-ajax)
[http://dotnetslackers.com/articles/ajax/Using-jQuery-with-ASP-NET.aspx](http://dotnetslackers.com/articles/ajax/Using-jQuery-with-ASP-NET.aspx)
[http://www.mikesdotnetting.com/Article/ 96/Handling-JSON-Arrays-returned-from-ASP.NET-Web-Services-with-jQuery](http://www.mikesdotnetting.com/Article/96/Handling-JSON-Arrays-returned-from-ASP.NET-Web-Services-with-jQuery)
[Jquery Ajax 将 json 发布到 web服务](https://stackoverflow.com/questions/6323338/jquery-ajax-posting-json-to-webservice)

# grails - 如何从 Grails 中的控制器声明 inList 约束？

> ID：14272680
> 
> 赞同：2
> 
> 时间：2013-01-11T06:11:32.117
> 
> 标签：grails, controller, constraints

谁能告诉我如何`inList`在 Grails 控制器中声明约束？

假设我有这个课程：

```
class A {
    List hello
} 
```

如何在控制器`inList`中为 from 添加约束`hello` `List`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:53:59.753

定义一个约束，其中`List`属性的值针对列表列表进行验证？听起来怪怪的。但你可以做到。有了这个类：

```
class A {
    List hello
    static constraint = {
        hello inList:[['abc','def','ghi'],[1,2,3],['a','b']]
    }
} 
```

您可以在控制器中执行此操作：

```
def instance1 = new A(hello:['abc','def','ghi']).save()    //valid
def instance2 = new A(hello:[1,2,3]).save()                //valid
def instance3 = new A(hello:['a','b']).save()              //valid
def instance4 = new A(hello:['a','b','c']).save()    //invalid
def instance5 = new A(hello:[1,2]).save()            //invalid 
```

但是，如果`A`是一个域类，其实例保存在传统数据库中，则该`hello`属性将被删除，因此您需要使用

```
static hasMany = [hello: SomeClass] 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:41:02.267

您可以将自定义验证器写入您的字段，以检查数据是否在列表中。您将不得不手动实施列表检查。你可以在[这里](http://www.grails.org/doc/latest/ref/Constraints/validator.html)找到官方文档。有一些stackoverflow条目可以帮助你喜欢

[Grails：基于字段先前值的自定义验证器](https://stackoverflow.com/questions/5005932/grails-custom-validators)

# php - PHP将具有相同键的数组值提取到另一个数组中

> ID：14272681
> 
> 赞同：0
> 
> 时间：2013-01-11T06:11:38.077
> 
> 标签：php, multidimensional-array, foreach

我有一个数组：

```
 $diff_date_results = 
    Array ( 
        [0] => Array ( [differential] => 7.7 [date] => 2012-12-30 ) 
        [1] => Array ( [differential] => 8.2 [date] => 2012-12-31 ) 
        [2] => Array ( [differential] => 9.9 [date] => 2013-01-03 )
    ) 
```

我想从每个内部数组的差分键中提取所有值，以在新创建的数组上使用 array_sum 函数。

我有这个，它为我绘制了三个数字，但我得到每个数字的 php 错误作为未定义的索引。（注意：未定义的索引：第 55 行 C:\wamp\www\jquery\test.php 中的 7.7）

到目前为止，我的代码如下：

```
 $diff_results = array();
    foreach($diff_date_results as $entry){
        $diff_results[$entry['differential']];
    }
    print_r($diff_results); 
```

我相信这很简单，我已经搞砸了太久了，任何帮助都会很棒！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:14:01.743

```
$diff_results = array();
foreach($diff_date_results as $entry){
    $diff_results[] = $entry['differential'];
}

//just for displaying all differential
print_r($diff_results); 
```

现在，您可以在 $diff_results 上使用 array_sum。

此外，如果你想得到总和，那么你也可以使用下面的方法。

```
$diff_results = "";
foreach($diff_date_results as $entry){
    $diff_results = $diff_results + $entry['differential'];
}

//$diff_results will have sum of all differential
echo $diff_results; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:15:42.583

像这样做：

```
$diff_results = array();

foreach($diff_date_results as $key => $entry){
    $diff_results[] .= $entry['differential']];
}

 print_r($diff_results); 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:27:45.613

```
$diff_results = array_map($diff_date_results,
                          function($entry) { return $entry['differential']; }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:31:17.787

```
$diff_date_results =    array ( 
        0 => array ( 'differential'=> 7.7, 'date' => 20), 
        1 => Array ( 'differential' => 8.8, 'date' => 20 ), 
        2 => Array ( 'differential' => 9.8 ,'date' => 20 ),
    );
  $value_differential=array();
 foreach( $diff_date_results as $key=>$value){
   print_r($value);
 $value_differential[]=$value['differential'];
 }

 print_r(array_sum($value_differential)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-11T09:19:02.367

对于像我一样遇到这个问题的任何人，我认为最好的解决方案是[Barmars](https://stackoverflow.com/users/1491895/barmar)的工作版本，如下所示：

```
$diff_results = array_map(function($entry)
                          { 
                          return $entry['differential']; 
                          }, 
                          $diff_date_results); 
```

这是一个更优雅的 1 行解决方案（为了便于阅读，我已将其扩展为 5 行）。

# crystal-reports - Crystal Reports：访问选择公式中的链接元素

> ID：14272682
> 
> 赞同：2
> 
> 时间：2013-01-11T06:11:47.807
> 
> 标签：crystal-reports, report, formula, crystal-reports-2008

我正在使用 Crystal Reports 2008 和 Peachtree 数据库制作报告。报告应显示过去 30 天内未下订单的客户。我已经想出了如何用左外连接链接 CR 中的两个表。但我无法找到如何在公式中使用该链接，例如选择公式。我想要实现的是获取当前客户最后一次下订单的日期，并使用此信息来确定是否应该显示客户。解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:42:24.633

假设您的数据设置正确，并将“客户”和“最后订单日期”添加到详细信息部分会显示所有内容，那么当“数据日期 - 最后订单日期”< 30 时，您可以为该部分的抑制属性添加条件格式公式'，让您只显示最后订单日期超过 30 天的记录。

# iphone - 在 iOS 应用中播放多种声音（mp3、wav 等）

> ID：14272685
> 
> 赞同：1
> 
> 时间：2013-01-11T06:12:01.707
> 
> 标签：iphone, ios, objective-c, audio, avaudioplayer

这是我的要求。我有一组音频文件（主要是 mp3，wav）。我的应用程序界面将包含这些声音名称的列表以及每个声音项的切换 ON/OFF 开关。在打开声音时，它应该开始播放，反之亦然。如果打开了多个声音，则应同时播放它们。我可以在声音播放时打开/关闭任何声音，它应该会立即关闭。

最好为这种行为建议哪些类？我需要混合声音等还是只实例化多个 AVAudioPlayer 实例？？？

请指导我制作一个高效的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:22:59.750

用于同时播放`different` `instance`。`AVAudioPlayer`

现在`maintain list`的`AVAudioPlayer`实例`NSMutableArray`取决于`state ON/OFF`. if state `ON`then `play audio` `add AVAudioPlayer`instance in`array`和 if state `OFF`then `stop audio` `remove AVAudioPlayer`instance from `array`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:58:22.390

您可以使用 openAL 来完成您的任务。这是获取它的链接[https://github.com/kstenerud/ObjectAL-for-iPhone](https://github.com/kstenerud/ObjectAL-for-iPhone)。

# android - SQLite 读取所有数据操作

> ID：14272688
> 
> 赞同：1
> 
> 时间：2013-01-11T06:12:18.743
> 
> 标签：android, sqlite

请检查这有什么问题。我正在尝试检索表中的所有记录（包含 3 列的 11 条记录`"name","address","city"`），但我的代码仅显示一条，即屏幕上最后插入的记录。但我需要显示所有记录。

```
public void readData(View v)
    {
        DatabaseClass mydb = new DatabaseClass(this);
        SQLiteDatabase readdata = mydb.getReadableDatabase();
        TextView tv = (TextView)findViewById(R.id.readtext);
        Cursor c = readdata.rawQuery("select * from mylistdata", null);
        int[] elementId = {R.id.textView1, R.id.textView2, R.id.textView3}; 
        if(c !=null)
        {
            c.moveToFirst();
            while(c.isAfterLast() == false)
            {
                listData = new ArrayList<GenericListItem>();
                String name = c.getString(c.getColumnIndex(DatabaseClass.NAME));
                String address = c.getString(c.getColumnIndex(DatabaseClass.ADDRESS));
                String city = c.getString(c.getColumnIndex(DatabaseClass.CITY));
                listData.add(new GenericListItem(new String[]{name,address,city}));
                listAdapter = new GenericListAdapter(getApplicationContext(), R.layout.list_layout, listData, elementId);
                result.setAdapter(listAdapter);
                c.moveToNext();
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:15:32.467

从循环外部初始化`listData`ArrayList为：`While`

```
 c.moveToFirst();
    listData = new ArrayList<GenericListItem>();
    while(c.isAfterLast() == false)
    {
       // add value here to listData
      c.moveToNext();
    }
   // set  listData datasource to GenericListAdapter here

   listAdapter = new GenericListAdapter(getApplicationContext(), 
              R.layout.list_layout, listData, elementId);

   result.setAdapter(listAdapter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T06:16:26.417

看起来问题在于您每次通过循环都在重新创建列表。试试这个：

```
listData = new ArrayList<GenericListItem>();  //moved out of loop

 while(c.isAfterLast() == false)
        {
            String name = c.getString(c.getColumnIndex(DatabaseClass.NAME));
            String address = c.getString(c.getColumnIndex(DatabaseClass.ADDRESS));
            String city = c.getString(c.getColumnIndex(DatabaseClass.CITY));
            listData.add(new GenericListItem(new String[]{name,address,city}));
            listAdapter = new GenericListAdapter(getApplicationContext(), R.layout.list_layout, listData, elementId);
            c.moveToNext();
        }

        result.setAdapter(listAdapter);  // moved out of loop 
```

# jquery - 使用 jQuery 切换页面

> ID：14272696
> 
> 赞同：0
> 
> 时间：2013-01-11T06:12:55.747
> 
> 标签：jquery, transition

我正在使用以下代码在单页网站上显示/隐藏“页面”，并希望实现过渡/缓动效果，以软化页面更改。不幸的是，这超出了我微弱的能力。

```
 <script>
              $(document).ready(function () {
                $("#page1").addClass("makevisible");
                $("#page1next").click(function () {
                    $("#page1").removeClass("makevisible");
                    $("#page2").addClass("makevisible");
                });
              });
          </script> 
```

欢迎提出任何建议并提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:16:37.260

.fadeIn 和 .fadeOut 听起来非常适合这种事情。它们为不透明度设置动画，并为您希望淡入淡出持续多长时间提供参数，并处理 display 属性以自动从 DOM 显示/隐藏。

[http://api.jquery.com/category/effects/fading/](http://api.jquery.com/category/effects/fading/)

半秒转换的代码：

```
 <script>
          $(document).ready(function () {
            $("#page1").fadeIn(500);
            $("#page1next").click(function () {
                $("#page1").fadeOut(500);
                $("#page2").fadeIn(500);
            });
          });
      </script> 
```

# html - 我可以在 HTML 页面中使用不同的根元素吗？

> ID：14272700
> 
> 赞同：0
> 
> 时间：2013-01-11T06:13:13.597
> 
> 标签：html, html-parsing, doctype

出于好奇，当我发现DOCTYPE 声明中的角色时，我正在阅读 Wikipedia 上的[文档类型声明](https://en.wikipedia.org/wiki/Document_Type_Declaration)文章：`HTML`

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`

根据维基百科，第一个属性`HTML`是文档的根元素，因此应该首先打开。

> ...在 XHTML 中，根元素是`<html>`, 是第一个打开的元素（在 doctype 声明之后）并且最后一次关闭。

所以我想知道，如果我要这样构造一个文档：

```
<!DOCTYPE burrito PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<burrito>
    <head></head>
    <body>
    A burrito is a great way to wrap a webpage.
    </body>
</burrito> 
```

网络浏览器会使用我的`<burrito>`还是将其包装在`<html>`标签中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:48:03.007

标题中问题的答案是“否”，因为所有 HTML 规范都将`html`元素定义为根元素。什么错误处理浏览器可能适用以及为什么当你违反这一点的问题并不是特别有趣，并且浏览器之间的差异是可以预料的。

在任何情况下，假冒`doctype`使浏览器进入 Quirks 模式，它没有任何用处，因为浏览器不关心`doctype`，除了 Quirks 模式、“标准模式”或一些中间模式。他们甚至不阅读所引用的文档类型定义，因此他们不会检测到不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:20:49.740

它将被包裹在`<html>`. 像这样：

```
<!DOCTYPE burrito PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>....</head>
    <body>
        <burrito>
            A burrito is a great way to wrap a webpage.
        </burrito>
    </body>
</html> 
```

# mysql - 如果更改 innodb_buffer_pool_size 会保留数据吗？

> ID：14272705
> 
> 赞同：1
> 
> 时间：2013-01-11T06:13:41.370
> 
> 标签：mysql, innodb

我需要禁用缓冲池以释放一些内存。我猜它不会影响当前的innodb数据。我想保留 InnoDB 表，以为我不会在此服务器上使用它们。

```
innodb_buffer_pool_size = 8G 
```

有人可以确认禁用此行不会影响数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:10:15.977

是的，可以删除该`innodb_buffer_pool_size`行，这将导致缓冲池的大小根据 MySQL 的编译时默认值进行调整，这取决于版本。您也可以将其调整为不同的值。数据不会受到影响，尽管访问它可能会更慢（听起来你可以接受）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:22:00.413

据我所知，禁用它是不好的，您可以将其更改为最小值

为什么因为即使您在另一台服务器上使用它们，远程服务器也会首先检查缓冲池中的数据以从本地服务器检索

我的意思是，如果缓冲池中有数据，您的本地服务器可以轻松满足远程服务器的请求

如果您想从本地服务器快速响应，则不应禁用它...

# batch-file - 在循环期间捕获 bat 文件中的错误：重定向似乎不起作用

> ID：14272706
> 
> 赞同：1
> 
> 时间：2013-01-11T06:13:43.293
> 
> 标签：batch-file, cmd

这似乎应该很简单，但我被卡住了。我正在遍历文本文件中的照片文件路径列表并删除每个路径。问题是如果 del 命令失败（如果文件不存在或正在被其他程序使用，则可能发生这种情况），我不会在日志中收到任何通知。

顺便说一句-这是 windows server 2008 R1 CMD。

这是我的代码：

```
@echo off
for /F %%A in (f:\deletePhotos\deletelist.txt) do (
    echo del %%A /f >> f:\deletePhotos\log.txt 2>&1
) 
```

以下是日志示例：

```
del f:\photos\11\48\ALX10-9322-48.jpg /f
del f:\photos\11\48\ALX10-9692-48.jpg /f
del f:\photos\11\48\LKSR20-5910-48.jpg /f
del f:\photos\11\48\LKSR20-8639-48.jpg /f
del f:\photos\11\48\SEMN4030836-48.jpg /f
del f:\photos\11\48\SEMN4036515-48.jpg /f 
```

日志中的文件（上面）不存在（我检查过）。显然，我试图让日志显示一些错误，例如：

```
Could Not Find f:\photos\11\48\ALX10-9322-48.jpg 
```

但相反，我只是得到命令本身的回声。请帮忙！

****更新**** 想通了：好旧的试验和错误：不得不将日志输出和重定向移到 bat 文件执行之外。

像这样：

```
f:\deletephotos>del.bat f:\deletePhotos\delete_11.txt >> f:\deletePhotos\log.txt 2>&1 
```

那成功了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:21:25.527

作为对评论的回答，这是我对删除文本文件中列出的文件并记录结果的脚本的尝试。如果文件被成功删除，则记录`*filename* deleted`，否则记录 DEL 命令产生的错误消息：

```
@ECHO OFF
> *logfile* (
  FOR /F "tokens=*" %%A IN (*filelist*) DO (
    DEL "%%A" 2>&1 | FINDSTR "." || (ECHO %%A deleted)
  )
) 
```

我必须承认我不得不使用一个小技巧来使我的脚本或多或少紧凑。我最初的想法是基于检查 DEL 执行的直接结果（退出代码）。但是，DEL 似乎没有根据目标文件的存在来设置退出代码。更具体地说，无论是否找到文件，它都会返回“成功”。是的，如果找不到文件，它会打印错误消息，但无论哪种情况，退出代码都是 0。

所以我被迫减少自己的伎俩和计谋，最终找到[了这个页面](http://ss64.org/viewtopic.php?id=582)，我的小伎俩由此而来。这个想法基本上是检查 DEL 的`stderr`输出是否包含*任何东西*。如果没有，请考虑实际成功并打印`*filename* deleted`。否则，发现的消息最终会进入日志文件。

可以看到输出的重定向是放在脚本里面的。如果您希望在调用批处理脚本时在命令行上指定重定向，请删除该行和相应的右括号。`> *logfile* (`

# google-chrome - Google Chrome 扩展程序 - 如何在不点击的情况下生成浏览器操作？

> ID：14272707
> 
> 赞同：1
> 
> 时间：2013-01-11T06:13:47.983
> 
> 标签：google-chrome, google-chrome-extension

我正在开发一个 chrome 扩展。

我发现我们必须点击“图标”来生成浏览器操作很乏味。

有没有办法让我们调用一个可以生成浏览器操作的函数（使用 javascript），这样我们就不需要再点击了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:36:11.960

这是不可能的，chrome 没有办法做到这一点。因为弹出是用于用户交互的。

弹出窗口无法通过任何操作打开，只能手动单击它。如果要作为弹出窗口打开，则必须将该弹出窗口作为新选项卡打开：

`chrome.tabs.create({url: chrome.extension.getURL('popup.html')})`

它将以与弹出窗口完全相同的方式运行，但不在弹出窗口内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-19T11:20:44.193

**所需的 API 现在就在那里，但是它在标志后面仍然是实验性的：**
[https ://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserAction/openPopup](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserAction/openPopup)

> 从 67 版开始：此功能位于 #extension-apis 首选项之后（需要设置为已启用）。要更改 Chrome 中的首选项，请访问 chrome://flags。

Firefox 从 57 版本开始支持此功能。

这也只能从[某些用户操作的处理程序中](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/User_actions)调用。

# python - python中删除和分配元素有什么区别？

> ID：14272712
> 
> 赞同：-6
> 
> 时间：2013-01-11T06:14:25.970
> 
> 标签：python

如果我想刷新一个值，我想知道哪种方法更好。

```
myList = [1, 2, 3] 
```

如果我想更改刷新列表的值。

一种方法是`myList[2] = 5`

另一种方法是

```
del myList[2]
myList[2] = 5 
```

列表中的元素是一些对象，会经常刷新。那么元素什么时候才能真正在第一种方法中被删除，哪种方法更好呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:17:04.040

正确的是`myList[2] = 5`

但是这段代码会产生异常：

```
>>> del myList[2]
>>> myList
[1, 2]
>>> myList[2] = 5
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list assignment index out of range 
```

当你这样做时`del myList[2]`，`myList`长度变为 2，因此最大索引是`1`并且通过这样做`myList[2] = 5`你试图插入不存在的位置。（溢出问题）

你可能有这样的第二*选择*

```
>>> del myList[2]
>>> myList
[1, 2]
>>> myList.append(5); 
>>>  myList
[1, 2, 5] 
```

但是，如果您只想刷新一个值。*在现有索引上，*那么第一选择`myList[2] = 5`是好的和简单的。好像你想最后追加（*索引不存在*）然后使用追加（）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:18:27.917

第一种方法中的元素永远不会真正删除，它的值只是改变了（意味着它指向不同的对象/值）。

第二种方法根本不是有效的 Python，因为在您删除后`mylist[2]`， mylist 将只有 2 个元素，并且`mylist[2]`不再存在。即使您删除了列表中间的一个元素，您仍然会更改错误的值，并且您需要切片来重新分配它。见下文：

```
mylist = [1, 2, 3]
mylist[1] = 4
print(mylist)
# [1, 4, 3]

del mylist[1]
print(mylist)
# [1, 3]

mylist[1] = 0
print(mylist)
# [1, 0] 
```

结论：使用第一种方法，因为它是迄今为止最简单的，并且不会给您带来麻烦（如第二种方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:48:40.280

第一个仅更改python查找值的位置...

```
>>> mylist = [1,2,3]
>>> id(mylist[2]) # check location
31108776
>>> mylist[2] = 5 # change the value
>>> mylist
[1, 2, 5]         # the value has changed
>>> id(mylist[2])
31108752          # location has also changed 
```

此外，第二个生成异常

```
>>> mylist = [1,2,3]  
>>> del mylist[2]  
>>> mylist[2] = 5  
Traceback (most recent call last):  
  File "<pyshell#2>", line 1, in <module> 
    mylist[2] = 5  
IndexError: list assignment index out of range 
```

并且您不能为在项目被删除时不再存在的列表项分配值。

# sqlite - 如何锁定 sqlite 数据库？

> ID：14272715
> 
> 赞同：20
> 
> 时间：2013-01-11T06:14:54.490
> 
> 标签：sqlite

过去我们曾遇到过流氓进程锁定 sqlite 数据库的问题。如果发生这种情况，我已经编写了一些代码来通知我们，但需要对其进行测试。

我怎样才能故意锁定一个sqlite数据库，以便我可以检查它是否被锁定？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T08:43:28.590

执行这些语句：

```
PRAGMA locking_mode = EXCLUSIVE;
BEGIN EXCLUSIVE; 
```

这将锁定整个数据库，直到您执行：

```
COMMIT; 
```

为简单起见，您可以使用`sqlite3`命令行实用程序执行此操作。

有关详细信息，请参阅[文档](http://www.sqlite.org/pragma.html#pragma_locking_mode)。

# android - Android AChartEngine 错误

> ID：14272720
> 
> 赞同：2
> 
> 时间：2013-01-11T06:15:31.280
> 
> 标签：android, achartengine

我正在使用“achartengine”，但我想使用`renderer.setXRoundedLabels(false);` 但它显示错误：

```
The method setXRoundedLabels(boolean) is undefined for the type XYMultipleSeriesRenderer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:40:44.570

该`setXRoundedLabels()`方法从 AChartEngine 1.1.0 版本开始可用。[您可以在此处](http://www.achartengine.org/download/)下载 1.1.0-rc2 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:30:35.040

当您在项目中使用 achartengine 库时，它是在库中定义`renderer`的类的对象，`XYMultipleSeriesRenderer`但它没有任何`setXRoundedLabels()`根据本文档[achartengine 参考文档](http://www.achartengine.org/content/javadoc/org/achartengine/renderer/XYMultipleSeriesRenderer.html)命名的方法。

你也可以`XYMultipleSeriesRenderer`在[这里看到类的定义](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/src/org/achartengine/renderer/XYMultipleSeriesRenderer.java?r=353)

# vba - Excel插值与连续顺序相同值的几个单元格

> ID：14272723
> 
> 赞同：2
> 
> 时间：2013-01-11T06:15:35.733
> 
> 标签：vba, excel, excel-2007

我试图插入的数据如下所示：

```
=X= 
0
0
0
0
0
0.5
1
3.1
5.5
6.2
8.5

=Y=
0.019607843
0.019607843
0.019607843
0.019607843
0.019607843
0.117647059
0.137254902
0.156862745
0.176470588
0.196078431
0.215686275

=Z=
0.019607843
0.039215686
0.058823529
0.078431373
0.098039216
0.117647059
0.137254902
0.156862745
0.176470588
0.196078431
0.215686275
0.235294118 
```

我正在使用[http://www.xlxtrfun.com/XlXtrFun/XlXtrFun.htm](http://www.xlxtrfun.com/XlXtrFun/XlXtrFun.htm)插件。在一个单元格中，我有来自这个插件的插值公式，除了这个特定的数据集之外，它大部分时间都能正常工作。

在**AM1**我有这个代码：

> =插值（$F$2:$F$51,$D$2:$D$51,M2,TRUE,FALSE）

其中 F 列是 Y 数据 D 是 X 数据，M 是 Z

问题在于，在 X 组数据中有连续值 0，所以在带有公式的单元格中，我得到一个**#NUM！**

我尝试将 0 稍微更改为 0.1 0.2 等，之后它可以正常工作，所以我知道公式是正确的，但是有了这些数据，我无法更改它，否则它最终会彻底改变结果。那么有人知道我可以保留这些值并保持正确的插值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:58:28.500

对于线性插值，我认为这个公式有效（酌情复制下来）：

```
=   INDEX(F$6:F$16,MATCH(M6,D$6:D$16))+ 
(M6-INDEX(D$6:D$16,MATCH(M6,D$6:D$16)))*INDEX(F$6:F$16,MATCH(M6,D$6:D$16)+1)-  
    INDEX(F$6:F$16,MATCH(M6,D$6:D$16)))/(INDEX(D$6:D$16,MATCH(M6,D$6:D$16)+1)-  
    INDEX(D$6:D$16,MATCH(M6,D$6:D$16))) 
```

![SO14272723 示例](../Images/30f334d11aac962983ef2cb5944e845b.png)

如果确实如此，则完全归功于[Jon Peltier](http://peltiertech.com/WordPress/excel-interpolation-formulas/)（否则只能怪我！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:28:14.920

无论如何，如果您想尝试将**上述公式作为 VBA 函数**（以保持工作表清洁）......您可以尝试以下方法。也许今天是我不想写更多代码的一天；）所以它对我有用。如果它对你有用，那么感谢[Tushar Mehta](http://www.tushar-mehta.com/excel/newsgroups/interpolation/index.html) LOL 我刚刚从@pnuts 复制了该标语行。但是在上面的站点中，您有更多与国际刑警组织相关的代码。也请尝试一下。

```
Option Explicit
Option Compare Text

Function RealEqual(X, Y) As Boolean
    RealEqual = Abs(X - Y) <= 0.00000001
End Function

Function LinearInterp(XVals, YVals, TargetVal)
   Dim MatchVal
   On Error GoTo ErrXit

   With Application.WorksheetFunction
    MatchVal = .Match(TargetVal, XVals, 1)
     If MatchVal = XVals.Cells.Count _
            And RealEqual(TargetVal, .Index(XVals, MatchVal)) Then
        LinearInterp = .Index(YVals, MatchVal)
     Else
        LinearInterp = .Index(YVals, MatchVal) _
            + (.Index(YVals, MatchVal + 1) - .Index(YVals, MatchVal)) _
                / (.Index(XVals, MatchVal + 1) _
                    - .Index(XVals, MatchVal)) _
                * (TargetVal - .Index(XVals, MatchVal))
     End If
   End With
    Exit Function
ErrXit:
    With Err
     LinearInterp = .Description & "(Number= " & .Number & ")"
    End With
End Function 
```

工作表视图：

![在此处输入图像描述](../Images/7beb4781f21b0cc3351615a16e3e2d3c.png)

# user-tracking - 我可以跟踪图像已下载到哪个设备吗？

> ID：14272726
> 
> 赞同：-1
> 
> 时间：2013-01-11T06:15:41.767
> 
> 标签：user-tracking

我想为我的图像添加一个跟踪脚本，但我不知道该怎么做。假设我有一张我的房子的图像，我存储在图像托管服务中。当有人将其下载到他们的计算机或其他设备时，我想获取有关我的图像下载位置的详细信息。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:22:11.473

不允许直接下载图像。相反，要求他们通过脚本访问它，该脚本跟踪请求并发送图像数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:23:15.967

您不能嵌入会运行到图像中的脚本。

您可以通过检查 Web 服务日志轻松获取有关用于下载文件的 IP 的信息。

您还可以将每个图像呈现为包含图像的 HTML 页面并在该页面上运行脚本。（这里有很多相反的问题，关于“为什么当我得到 somesite/images/image.jpg 我看到一些奇怪的 HTML 代码”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:18:34.933

我认为不可能在图像中做到这一点。我认为二进制文件不支持任何脚本语言...如果有人下载它，您必须将其仅放在您自己的服务器上并编写一些 JavaScript 将信息发送回您，我什至认为您无法获得那工作。见鬼，你甚至可以下载 flickr 托管的图像，即使它们存在的原因，所以你不能这样做......你只需要 0.02 美元的网络知识。

编辑：没有图像托管站点允许您运行任何自定义脚本，而且我认为没有任何提供此功能，您最好的选择是自己托管它......或者只通​​过电子邮件发送。

# php - 如何在 smarty 模板中插入换行符？

> ID：14272727
> 
> 赞同：3
> 
> 时间：2013-01-11T06:15:42.907
> 
> 标签：php, smarty

我有一个 smarty 模板代码如下，我想将 smarty 模板数据逐行写入文本文件。为此，我必须在每条记录的末尾插入一个换行符（即在 value 之后`$user_test_result.test_result_data.total_obtained_marks`）。这应该如何实现？请帮我解决这个问题。提前致谢。

```
{if $all_user_test_result}{assign var='sr_no' value=1}{foreach from=$all_user_test_result item=user_test_result key=key}{if $key!='sort_user_name' && $key!='sort_total_obtained_marks' && $key!='sort_no_correct_answers' && $key!='sort_no_wrong_answers' && $key!='sort_no_skipped_questions'}{$sr_no};{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_user_data.user_name};{else}{$user_test_result.test_user_data.user_name};{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_user_data.test_user_time_used};{else}--{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.no_correct_answers};{else}-{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.no_wrong_answers};{else}-{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.no_skipped_questions};{else}-{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.total_obtained_marks};{else}-{/if}{/if}{assign var='sr_no' value=$sr_no+1}{/foreach}{else}Result not found{/if} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T06:49:36.707

应该有一个换行符（“\n”），它周围有聪明的标签，放在`$user_test_result.test_result_data.total_obtained_marks`像 {“\n”} 这样的值之后。你会得到想要的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T20:45:31.370

除非我弄错了，否则 Smarty 会将模板中的所有空格直接输出到文件中。因此，与其将所有 smarty 标签放在一行上，不如在适当的位置插入换行符。

```
{if $all_user_test_result}{assign var='sr_no' value=1}{foreach from=$all_user_test_result item=user_test_result key=key}{if $key!='sort_user_name' && $key!='sort_total_obtained_marks' && $key!='sort_no_correct_answers' && $key!='sort_no_wrong_answers' && $key!='sort_no_skipped_questions'}{$sr_no};{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_user_data.user_name};{else}{$user_test_result.test_user_data.user_name};{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_user_data.test_user_time_used};{else}--{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.no_correct_answers};{else}-{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.no_wrong_answers};{else}-{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.no_skipped_questions};{else}-{/if}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.total_obtained_marks};{else}-{/if}
{/if}{assign var='sr_no' value=$sr_no+1}{/foreach}{else}Result not found{/if} 
```

为了便于阅读，您还可以在模板中包含不输出的换行符，方法是将它们放入`{* comments *}`：

```
{if $all_user_test_result}{*
    *}{assign var='sr_no' value=1}{*
    *}{foreach from=$all_user_test_result item=user_test_result key=key}{*
        *}{if $key!='sort_user_name' && $key!='sort_total_obtained_marks' && $key!='sort_no_correct_answers' && $key!='sort_no_wrong_answers' && $key!='sort_no_skipped_questions'}{*
            *}{$sr_no};{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_user_data.user_name};{else}{$user_test_result.test_user_data.user_name};{/if}{*
            *}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_user_data.test_user_time_used};{else}--{/if}{*
            *}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.no_correct_answers};{else}-{/if}{*
            *}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.no_wrong_answers};{else}-{/if}{*
            *}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.no_skipped_questions};{else}-{/if}{*
            *}{if $user_test_result.test_user_data.user_status=='Attempted'}{$user_test_result.test_result_data.total_obtained_marks};{else}-{/if}{*
        *}{* Add newline at end of record *}
        {/if}{*
        *}{assign var='sr_no' value=$sr_no+1}{*
    *}{/foreach}{*
*}{else}Result not found{*
*}{/if} 
```

# c# - 如何获取项目下的文件夹？

> ID：14272729
> 
> 赞同：3
> 
> 时间：2013-01-11T06:15:48.190
> 
> 标签：c#, envdte

我正在尝试获取其下的项目和文件夹列表。我可以使用以下方式获取项目和项目项：

```
DTE2 dte2;
dte2=(DTE2)System.Runtime.InteropServices.Marshal.
GetActiveObject("VisualStudio.DTE.10.0");
Projects projects = dte2.Solution.Projects; 
```

然后，我正在遍历项目项目并获得项目的“种类”。但它只显示 GUID。我需要知道该项目是否是文件夹。我怎么做？

参考：

```
var item = projects.GetEnumerator();
while (item.MoveNext())
{
  var project = item.Current as Project;
  for(i=1;i<project.ProjectItems.Count;i++)
  {
     string itemType = project.ProjectItems.Item(i).Kind;
  }
} 
```

编辑 ：

目前，我正在使用一种解决方法：

```
string location = project.ProjectItems.Item(i).get_FileNames(1);
if (location.EndsWith(@"\"))
        {
            // It is a folder E.g C:\\Abc\\Xyz\\
        } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-11T11:11:51.283

您可以`EnvDTE.Constants.vsProjectItemKindPhysicalFolder`用来比较`ProjectItem.Kind`属性。

更多常量可以在这里找到：http: [//msdn.microsoft.com/library/vstudio/envdte.constants](http://msdn.microsoft.com/library/vstudio/envdte.constants)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T08:03:45.920

您可以使用`ProjectKinds.vsProjectKindSolutionFolder`来查看项目是否为文件夹。

例如

```
var item = projects.GetEnumerator();
while (item.MoveNext())
{
  var project = item.Current as Project;
  for(i=1;i<project.ProjectItems.Count;i++)
  {
     string itemType = project.ProjectItems.Item(i).Kind;
     if (itemType  == ProjectKinds.vsProjectKindSolutionFolder)
     {
         // Do whatever
     }
  }
} 
```

编辑：正如我在评论中提到的，我在发布后意识到上面是针对解决方案文件夹的，它是 Project.Kind 而不是 ProjectItem.Kind。关于 GUIDS，微软说：

> Project 或 ProjectItem 的 Kind 属性不返回枚举值（因为 .NET 必须适应第 3 方提供的项目种类）。因此，Kind 属性返回一个唯一的 GUID 字符串来标识该种类。可扩展性模型提供了一些分散在多个程序集和类（EnvDTE.Constants、VSLangProj.PrjKind、VSLangProj2.PrjKind2 等）中的这些 GUID，但有时您必须猜测值并对它们进行硬编码。

来自[http://support.microsoft.com/kb/555561](http://support.microsoft.com/kb/555561)。正如我在评论中所说，希望“文件夹”类型的 ProjectItem 的 GUID 是相同的。您只需要确定此 GUID 并对其进行硬编码。

# mysql - Rails 按属性从多个表中排序帖子

> ID：14272732
> 
> 赞同：2
> 
> 时间：2013-01-11T06:16:08.970
> 
> 标签：mysql, ruby-on-rails, ruby, sorting

所以我在这里有一个社交书签式的设置。4 个表：帖子、用户、评论和投票。主页只是指向帖子模型的索引页面并在`Post.all`数组上运行一个循环并显示一些基本信息：`title`, `upvotes`- `downvotes`（我称它为帖子的“分数”）。

现在我需要做的是通过它们的分数除以它们的相对创建时间（自页面加载以来创建这篇文章以来的秒数？）在模型中排序这些帖子（我猜）。Rails`created_at`在我的帖子对象中给了我一个列，我有一个投票表，如下所示：

# 帖子模型

```
class Post < ActiveRecord::Base
  attr_accessible  :id, :title, :url, :user_id, :comment_count, :agreement
  has_many :votes
  has_many :comments
  belongs_to :user
end 
```

# 投票模型

```
class Vote < ActiveRecord::Base
  attr_accessible :direction, :post_id, :vote_type, :user_id
  belongs_to :user
  belongs_to :post
  belongs_to :comment
end 
```

post 模型中的 ID 对应于投票模型中的 post_id。

`:direction`是一个布尔值。`0`与赞成投票和反对投票`1`相关。Post_ID 是投票的帖子的 ID。

**我应该如何排序帖子，以便他们在主页上的位置由他们的创建时间和他们的赞成票 - 反对票决定？**

```
def index
    @posts = Post.join(:votes).order(<???>)
end 
```

ETA：@shweta 在加入帖子和投票表方面走在了正确的轨道上。但是，他的答案的选择部分不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:06:48.527

**免责声明：**我不知道 ruby​​ 或 rails，只知道 SQL。

shweta 的答案似乎非常接近，所以我将尝试用一些 SQL hack 和斜线来完成它：

按upvotes 排序，然后created_at

```
@posts = Post.joins(:votes).select("posts.id,sum(if(direction = 0, 1, -1)) as score,posts.created_at,OTHER_ATTRS_YOU_NEED").group("posts.id").order("score DESC,posts.created_at") 
```

此外，要包含零票的帖子，您需要进行左连接：

```
@posts = Post.joins("LEFT JOIN votes ON posts.id = votes.post_id").select("posts.id,sum(if(direction = 0, 1, -1)) as score,posts.created_at,OTHER_ATTRS_YOU_NEED").group("posts.id").order("score DESC,posts.created_at") 
```

**更新：**修复未投票帖子的排序：

```
@posts = Post.joins("LEFT JOIN votes ON posts.id = votes.post_id").select("posts.id,sum(if(direction = 0, 1, if(direction is null, 0, -1))) as score,posts.created_at,OTHER_ATTRS_YOU_NEED").group("posts.id").order("score DESC,posts.created_at") 
```

**更新 2：**提高排名

如果您排除较旧的项目，您最终可能会得到一个空列表（例如在安静的日子），这可能不是您想要的。您最好添加另一列进行排名，如下所示：

```
@posts = Post.joins("LEFT JOIN votes ON posts.id = votes.post_id").select(
    "posts.id," +
    "sum(if(direction = 0, 1, if(direction is null, 0, -1))) as score," +
    "(sum(if(direction = 0, 1, if(direction is null, 0, -1))) * " +
    " if(unix_timestamp() - unix_timestamp(posts.created_at) < 7200, 3, 1)) as rank," +
    "posts.created_at,OTHER_ATTRS_YOU_NEED"
).group("posts.id").order("rank DESC,posts.created_at") 
```

出于排名目的，这会使不到 2 小时的帖子得分增加三倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:49:14.600

按upvotes 排序，然后created_at

```
@posts = Post.joins(:votes).select("posts.id,count(votes.id) AS vote_count,posts.created_at,OTHER_ATTRS_YOU_NEED").group("posts.id").order("vote_count DESC,posts.created_at") 
```

按 created_at 排序，然后投票

```
@posts = Post.joins(:votes).select("posts.id,count(votes.id) AS vote_count,posts.created_at,OTHER_ATTRS_YOU_NEED").group("posts.id").order("posts.created_at, vote_count DESC") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T22:39:52.493

所以你想订购`rating/(time elapsed since creation)`。它可以在纯 Ruby 中使用 sort_by 完成，但不如原始 sql 高效。

所以......在数据库上执行此操作需要计算自 Post#creation 以来经过的时间。在 Mysql 上，您有[TIMEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)（在 Postres/Oracle/etc 上可能会有所不同）用于这种计算。SQL 或多或少包括（在轻量级/伪代码中）：

```
class Post
  def self.order_by_popularity
    score        = "sum(if(direction = 0, 1, -1)) as score"
    votes_count  = "count(votes.id) as votes_count"
    time_elapsed = "ABS(Timediff(#{Time.now}, created_at)) as time_elapsed"

    select("posts.*, votes.id, #{score}, #{votes_count}, #{time_elapsed}").
    join(:votes).group("votes.id").
    order "ABS(votes_count/time_elapsed)"
  end
end 
```

更新：汇总您获得上述所有建议（顺便说一句，默认情况下 join(:votes) 是左连接）。我想知道有没有什么陷阱......

正如之前的评论所暗示的，vote_count 将来自 Posts 上的缓存列或 join+group 事物。

旁注：我成功地使用了这种类型的查询，所以我希望为您指明正确的方向，但坦率地说，这可能需要比典型的 stackoverflow 帮助提供的更多的测试/试验。

# jquery - jquery 将鼠标悬停在图像上以交换上面 div 中的另一个图像

> ID：14272733
> 
> 赞同：3
> 
> 时间：2013-01-11T06:16:09.497
> 
> 标签：jquery, hover, mouseover

我想在鼠标悬停/悬停的同时添加`"-h.png"`到所有 img src 的末尾并返回到mouseout`< div id="swap" >``< img src="images/logo.png" />``".png"`

这就是我所拥有的，但它不起作用：

```
<div id="header-wrap">
    <div id="swap">
        <img src="images/4.png"/>
        <img src="images/3.png"/>
        <img src="images/2.png"/>
        <img src="images/1.png"/>
    </div>
    <header id="header">
        <div id="site-logo"><a href="#"><img src="images/logo.png" /></a></div>
    </header>
</div><!-- /#header-wrap --> 

$(document).ready(function() {     
    $('#site-logo').hover(function(){     
        $('#swap img').replace('.png','-h.png');    
    },     
    function(){    
        $('#swap img').replace('-h.png','.png');     
    });
}); 
```

刚刚更新到下面...图像现在正在交换，但所有 4 个图像都交换为 /4-h.png 而不是 4-h.png、3-h.png、2-h.png 和 1-h.png

```
$(document).ready(function() {
    var newSrc = "";
    $('#site-logo').hover(function(){
        newSrc = $('#swap img').attr('src').replace('.png','-h.png');   
        $('#swap img').attr('src', newSrc);
    },     
    function(){
        newSrc = $('#swap img').attr('src').replace('-h.png','.png');     
        $('#swap img').attr('src', newSrc);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:19:47.373

试试这个 ：

```
 /* so it's not working
    $(document).ready(function() {     
        $('#site-logo').hover(function(){     
            $('#swap img').attr('src').replace('.png','-h.png');    
        },     
        function(){    
            $('#swap img').attr('src').replace('-h.png','.png');     
        });
    });
    */ 
```

* * *

好的，所以我发现 .replace 方法是纯 javascript 试试这个：

```
$(document).ready(function() {
    var newSrc = "";
    $('#site-logo').hover(function(){
        $('#swap img').each(function() {
           newSrc = $(this).attr('src').replace('.png','-h.png');   
           $(this).attr('src', newSrc);
        });
    },     
    function(){
        $('#swap img').each(function() {
           newSrc = $(this).attr('src').replace('-h.png','.png');     
           $(this).attr('src', newSrc);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:39:15.477

您可以尝试使用`.slice()`这种方式，您可以实现您的目标：

```
$('#site-logo').hover(function () {
   var atr = $('#swap img').attr('src').slice(0, -4);
   var newAtr = atr+'-h.png'
   $('#swap img').attr('src', newAtr);
},function () {
   var atr = $('#swap img').attr('src').slice(0, -6);
   var newAtr = atr+'.png'
   $('#swap img').attr('src', newAtr);
}); 
```

签出小提琴：http: [//jsfiddle.net/6vqJV/](http://jsfiddle.net/6vqJV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:28:09.710

试试这个代码

```
$(document).ready(function() {     
    $('#site-logo').hover(function(){     
        $('#swap img').attr('src','-h.png');    
    },     
    function(){    
        $('#swap img').attr('src','.png');     
    });
}); 
```

或者

```
$(document).ready(function() {     
        $('#site-logo').hover(function(){     
            $('#swap img').each(function(){
$(this).attr('src','-h.png');
             });    
        },     
        function(){    
            $('#swap img').each(function(){
$(this).attr('src','.png');
});
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:43:33.120

```
$("#site-logo").hover(function () {

  $("#swap img").each(function () {
    var test = $(this).attr('src');
    $("#helper").append("<span>" + test.replace('.png', '-h.png') + "</span><br />");
  });

},

function () {
  $("#swap img").each(function () {
    var test = $(this).attr('src');
    $("#helper2").append("<span>" + test.replace('-h.png', '.png') + "</span><br />");
  });

}); 
```

[测试链接](http://jsfiddle.net/GmRTZ/3/)

# mysql - Mysql：使用 LIMIT 检索所有行

> ID：14272735
> 
> 赞同：0
> 
> 时间：2013-01-11T06:16:11.713
> 
> 标签：mysql, limit

假设我有一张有 5 个条目的表格

如果我这样做有区别吗`SELECT * FROM tbl LIMIT 18446744073709551615;`

与`SELECT * FROM tbl LIMIT 1000;`？

根据[MYSQL 限制语法](http://dev.mysql.com/doc/refman/5.0/en/select.html#id4651990)

**要检索从某个偏移量到结果集末尾的所有行，您可以为第二个参数使用一些较大的数字。此语句检索从第 96 行到最后一行的所有行：SELECT * FROM tbl LIMIT 95,18446744073709551615;**

我正在尝试使用关键字**LIMIT实现全选**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:18:13.483

两者完全不同，

在第一个查询中，如果您只有 5 条记录，则不会选择任何行。但在第二个查询中，您将选择所有 5 行。

在第一个查询中，将从第 96 行中选择记录，并且选择的记录总数为逗号后面的数字。

但在第二个查询中，将选择前 1000 行。

对于已编辑的问题::

这两个限制是相同的，并且执行会有所不同，直到您的表中最多有 1000 行。

实际上，数据库扫描全表，在返回记录的时候，一旦达到限制就会停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:27:14.753

我认为两者都会返回相同的并且完全没有区别

# php - 如何提取结果形式数组

> ID：14272745
> 
> 赞同：0
> 
> 时间：2013-01-11T06:16:43.343
> 
> 标签：php, arrays

我需要从下面的数组中提取结果

```
 Array ( [model_type] =>
        Array ( [label] => Model Type
                [value] => Inspiron 
                [code] => model_type )
         [model_version] => 
        Array ( [label] => Model Version
                [value] => 100L
                [code] => model_version )
        [color] => 
         Array ( [label] => Color 
                 [value] => Black
                 [code] => color )
    ) 
```

我怎样才能得到结果模型类型为 Inspiron 和颜色为黑色

请帮助，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:23:40.320

鉴于此内容，这是一个相当简单的答案。只需键入`$yourvariable['model_type']['value'];`和`$yourvariable['color']['value'];`。假设您的变量被称为`$yourvariable`. 我建议你有机会时阅读[一下手册。](http://us3.php.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:23:35.880

你可以这样做：

```
foreach($results  as $key => $value)
{ 
   if($key == 'model_type') 
      echo $value['value'];

    if($key == 'model_version')
     echo $value['color'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:25:54.817

您可以简单地执行以下操作：

```
$model = $result['model_type']['value'];

$color = $result['color']['value']; 
```

然后简单地回显两个值

```
echo $model . " is " . $color; 
```

# iphone - 嵌套的 UINavigationController 流已损坏

> ID：14272747
> 
> 赞同：0
> 
> 时间：2013-01-11T06:16:51.870
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar

我对 NavigationController 有疑问。我创建堆栈的导航控制器流程就像

**案例 1：-**`A--->B--->C` **案例 2：-** `D--->B--->C`

这是调用 navigationController 的实际流程，其中 A、B、C、D 是不同的堆栈。我通过这种方法调用这些堆栈：

```
B *b=[[B alloc]init]
[[self navigationController]pushViewController:b animated:YES]; 
```

**当我按顺序移动`A-->B-->C`然后导航回来时出现**问题**`C-->B-->A`， 这可以正常工作..现在，如果我再次移动，`D-->B`但它会将我带到`C`**

 **和 **错误**`nested push animation can result in corrupted navigation` 为什么会出现这个错误？

注意..`A and D`在同一个堆栈上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:32:31.120

试试这个……希望对你有帮助……

```
 NSArray *viewContrlls=[[self navigationController] viewControllers];
for( int i=0;i<[ viewContrlls count];i++)
{
    id obj=[viewContrlls objectAtIndex:i];
    if([obj isKindOfClass:[Yourclassname class]])
    {

        [[self navigationController] popToViewController:obj animated:YES];
        return;
    }
}

Yourclassname is your class which you want to push or pop and nothing to change 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:37:56.507

或者在你推送 VC 时试试这个

```
YourAppDelegate *delegate=(YourAppDelegate*)[[UIApplication sharedApplication] delegate];
[delegate.window.navigationController pushViewController:whateverVCYouWant]; 
```

这将只有一个导航堆栈，因此您所有的推送和弹出都发生在一个堆栈中。**

# xml - 如何编辑 Uniprot 下载的信息（txt 或 XML）

> ID：14272752
> 
> 赞同：0
> 
> 时间：2013-01-11T06:17:09.913
> 
> 标签：xml, r, protein-database

我下载了一组蛋白质的 Uniprot 文件（n>1000，因此无法手动检查这些蛋白质）。完整的数据文件以平面文本文件或 XML 文件的形式提供。这些文件中有很多信息（例如，请参见此处：[http](http://www.uniprot.org/uniprot/?query=organism%3A%22homo+sapiens%22) ://www.uniprot.org/uniprot/?query=organism%3A%22homo+sapiens%22 ，然后去下载，您可以查看前 10 个完整数据（txt 或 xml 文件）。

由于其中有很多我不需要的信息，我必须找到一种方法来选择我感兴趣的信息（最好是在数据矩阵中）。对于每个条目，这是：

```
Wanted information:                 Text file entry:    XML file entry:
Uniprot ID                          ID                  <entry><name>
Gene Name                           GN                  <gene><name type="primary">
Full protein name                   RecName:            <protein><recommendedName><fullName>
Transmembrane domains (may be more) TRANSMEM            <feature type="transmembrane region"><location> This consists of <begin position="xxx"/> and <end position="yyy"/>
Full protein sequence               SQ                  <sequence> 
```

有些条目不会包含所有信息（如跨膜域），然后可能会填写一个 NA。有些条目将包含超过 1 次相同类型的信息（再次如跨膜域），对于这些，都应该命名（如果可能在同一个单元格中，用“，”或“;”或“|”分隔）。

我对 R 有点熟悉，但我无法做到这一点（可能是缺乏编程技能）。我查看了 XML 编辑器（因为这似乎是最简单的解决方案），但我无法让任何工作，我根本找不到可以帮助我的东西并解释了不同的步骤。我也知道应该有一种方法可以在 R 中处理 XML 文件，但是那里的帮助文件也没有让我到达我需要的地方。在 XMLQuire 中，到目前为止我唯一可以下载的东西，我可以看到该文件，但是当我想做任何事情时它一直在我身上崩溃（即使我只是想弄清楚我可以在哪里编辑文件)，所以我的文件可能太长或者还有其他问题。

对此问题的帮助将不胜感激，我希望找到做过类似事情的人，但欢迎所有解决方案，无论多么小，无论我需要使用哪个程序，只要它是免费软件。

如果事情不清楚，也请告诉我，我真的尽量做到清楚。很抱歉在这个问题上是个金发女郎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:52:18.620

正如我在评论中提到的，如果您知道或愿意尝试 (Bio)Python，那么有一个库可以解析您检索到的那些文件，Bio.SeqIO：

> 假设您已经从他们的 FTP 站点 (ftp://ftp.uniprot.org/pub/databases/uniprot/current_release/knowledgebase/complete/uniprot_sprot.dat.gz) 以纯文本 SwissPort 文件格式下载了整个 UniProt，并且将其解压缩为文件 uniprot_sprot.dat，并且您只想从中提取一些记录：

```
from Bio import SeqIO
uniprot = SeqIO.index("uniprot_sprot.dat", "swiss")
handle = open("selected.dat", "w")
for acc in ["P33487", "P19801", "P13689", "Q8JZQ5", "Q9TRC7"]:
...handle.write(uniprot.get_raw(acc))
handle.close() 
```

> 第 16.1.5 节中有一个更长的示例，使用 SeqIO.index() 函数对大型序列文件进行排序（无需一次将所有内容加载到内存中）。

[5.4.2.2 获取记录的原始数据](http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc10)

您也可以在这里查看：[打开序列文件](http://biopython.org/wiki/SeqIO)。[Biostar](http://www.biostars.org/p/5328/)已经回答了一个更简单但与您类似的问题，这可能是您需要[解析 Swiss-Prot 文件](http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc121)

基本上，您可以从文件中提取记录，将它们存储在 Python 对象中并随意操作它们。例如检索 ID。

我的回答很模糊，但应该指向正确的方向。我希望它有所帮助。

# jsf - h:outputText 中 jsf 中的空白下划线行

> ID：14272756
> 
> 赞同：2
> 
> 时间：2013-01-11T06:17:27.700
> 
> 标签：jsf, jakarta-ee, richfaces, jsf-1.2

我已经尝试过了，但只有没有下划线的空白跨度

```
 <h:outputText style="font-weight:bold;text-decoration:underline" rendered="#
{declarationBB.deaclarationOpr.declarationDetailsobj.productName == null}" value="                           " /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:00:12.673

HTML 中无关紧要的空白将被折叠。除非您在开头和结尾插入非空白字符，否则您实际上最终没有视觉表示，如下所示：

```
value="[                           ]" 
```

如果您想要的只是一条固定大小的线，请使用一堆下划线：

```
__________________________ 
```

或者，如果您真的想为此使用 HTML/CSS，请使用固定宽度和边框底部的块元素：

```
<div style="width: 200px; border-bottom: 1px solid black;"></div> 
```

`<hr>`但是，如果您真正想要的是“水平规则”，则A在语义上更正确：

```
<hr style="margin: 0; width: 200px; height: 1px; background: black; border: none;" /> 
```

应该注意的是，您应该尽可能避免使用`style`并使用`class`/`styleClass`来代替。

# objective-c - 通过 Objective-C 查询存储在网络服务器上的 SQLite 数据库？

> ID：14272757
> 
> 赞同：2
> 
> 时间：2013-01-11T06:17:34.147
> 
> 标签：objective-c, sqlite, webserver

我正在设计一个具有 Mac OS 和 iOS 版本的应用程序，我希望一些数据保持同步。我能想到的最简单的方法是将我的数据存储在每个设备本地的 SQLite 数据库中，将相同的数据库存储在网络服务器上，然后在每个表上运行一些查询以同步本地数据库和远程数据库。

我缺少的这个难题的唯一部分是查询存储在网络服务器上的远程 SQLite 数据库的方法。理想情况下，我想通过 Objective-C 来完成，而不是将数据编组进出像 Python 或 JS 这样的网络语言，并且不将任何其他文件放在网络服务器上，比如服务器端脚本。我真的很喜欢在网络服务器上打开数据库并通过 ObjC 查询它的能力。

这可行吗？有人有想法么？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:38:18.753

SQLite 基本上是一个将数据库保存在单个文件中的 C 库。由于这种紧凑性，它已成为 iOS 和 Mac (CoreData) 上的存储标准。

因为它将此作为设计目标（相对于多用户、分布式数据库，如 Oragle 或 MySQL），所以您无法通过 Web 访问数据库内容。SQLite 库需要将其作为本地文件打开。

您有以下选择：

*   在您的服务器上有一个 MySQL DB 和一个 Web API（通过诸如 stackmob 之类的服务或自己编程）
*   使用 iCloud
*   使用基于文件的同步形式（例如 Dropbox 或 WebDAV）来继续移动实际的 SQLite 文件
*   混合形式：将事务放入您在每个设备上同步和前滚的文件中

同步很难。我会选择 iCloud。

# actionscript-3 - 我应该在 Intellij IDEA 中使用哪种 AS3 库链接类型？

> ID：14272762
> 
> 赞同：3
> 
> 时间：2013-01-11T06:17:57.763
> 
> 标签：actionscript-3, intellij-idea, shared-libraries

我有一个 Intellij 模块，它使用另一个模块作为库。可以使用以下方式链接库：Merged、External、Include 或 Test。

这四个选项是什么意思？他们的行为有何不同？

在 Intellij 论坛上，有人提到“Merged”和“External”类似于 Flash Builder 的“Merged into code”和“Runtime shared library”。但是如果是这样的话，Include 和 Test 做什么呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T10:03:34.513

[IntelliJ 文档](http://www.jetbrains.com/idea/webhelp/dependencies-tab-2.html)仅链接到[Adob​​e 对 RSL 的描述](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7add.html)，但这就是四种设置的工作方式：

*   合并

    链接项目中实际使用的所有库符号，并将它们包含到目标二进制文件中。这应该是创建 SWF 可执行文件的默认设置。

*   包括

    链接库中的所有符号，无论是否使用它们，并将它们包含到目标二进制文件中。这在创建扩展库（包括您正在扩展的具有附加功能的模块，以便您以后只需要包含一个 SWC）或`getDefinitionByName`经常使用时很有用。

*   排除

    在编译时链接库类，但不*将*它们包含到目标二进制文件中。这意味着目标二进制文件仍然很小，但是当然，排除的依赖项必须要么编译到其他库中，要么作为 RSL 存在以在运行时可用——没有它们，程序就无法运行。此设置在创建库 SWC 时特别有用，否则每个库 SWC 都将包含 playerglobal.swc 及其所有其他依赖项。

*   测试

    库类仅包含在用于 FlexUnit 测试的临时二进制文件中。这可以防止 FlexUnit 框架本身以及其他测试框架（例如 Hamcrest 或 Mockolate）使生产二进制文件膨胀。

# ruby-on-rails - Rails 3.2.9 路由到不正确的控制器

> ID：14272764
> 
> 赞同：0
> 
> 时间：2013-01-11T06:18:01.367
> 
> 标签：ruby-on-rails, controller, routes

我在我的应用程序中使用 devise 和 cancan。两者都在工作。

我有一个`User`模型，我刚刚添加*（使用脚手架）*一个名为`Purchase`.

在添加购买模型之前，我还有一个仪表板控制器*（目前只显示一个页面，`dashboard#show`）*并且是登录后加载的页面`localhost:3000/dashboard`

当用户未登录时，我可以访问`localhost:3000/purchases`. 但是当用户登录时我不能。我可以访问`purchase/1`但不能`/purchases`。

知道这里发生了什么吗？它给我的错误是

> "没有路线匹配 {:action=>"show", :controller=>"dashboard"}"

**仪表板控制器**

```
class DashboardController < ApplicationController
    def show
        @user = User.find(params[:id])
        authorize! :read, @user
    end

end 
```

**路由.rb**

```
App::Application.routes.draw do
  root :to => 'static_pages#index'
  match '/about', :to => 'static_pages#about'
  match '/error', :to => 'static_pages#error'
  devise_for :users

  resources :users

  resources :dashboard

  resource :visitors, :only => :create # POST to visitor_path to create a visitor

  resources :purchases 
```

> 耙子路线

```
 root        /                              static_pages#index
                   about        /about(.:format)               static_pages#about
                   error        /error(.:format)               static_pages#error
        new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy
                   users GET    /users(.:format)               users#index
                         POST   /users(.:format)               users#create
                new_user GET    /users/new(.:format)           users#new
               edit_user GET    /users/:id/edit(.:format)      users#edit
                    user GET    /users/:id(.:format)           users#show
                         PUT    /users/:id(.:format)           users#update
                         DELETE /users/:id(.:format)           users#destroy
         dashboard_index GET    /dashboard(.:format)           dashboard#index
                         POST   /dashboard(.:format)           dashboard#create
           new_dashboard GET    /dashboard/new(.:format)       dashboard#new
          edit_dashboard GET    /dashboard/:id/edit(.:format)  dashboard#edit
               dashboard GET    /dashboard/:id(.:format)       dashboard#show
                         PUT    /dashboard/:id(.:format)       dashboard#update
                         DELETE /dashboard/:id(.:format)       dashboard#destroy
                visitors POST   /visitors(.:format)            visitors#create
               purchases GET    /purchases(.:format)           purchases#index
                         POST   /purchases(.:format)           purchases#create
            new_purchase GET    /purchases/new(.:format)       purchases#new
           edit_purchase GET    /purchases/:id/edit(.:format)  purchases#edit
                purchase GET    /purchases/:id(.:format)       purchases#show
                         PUT    /purchases/:id(.:format)       purchases#update
                         DELETE /purchases/:id(.:format)       purchases#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:56:41.770

由于仪表板是一个单一资源，您需要将其设置为：

```
resource :dashboard 
```

那是资源单数。

我的猜测是，在登录用户的购买页面上，你有类似的东西`link_to "Dashboard", dashboard_path`，但是设置了资源，显示操作总是需要一个 id。由于您没有提供一个，因此您会遇到路由异常。

你可以在这里找到一些关于奇异资源的信息：http: [//guides.rubyonrails.org/routing.html#singular-resources](http://guides.rubyonrails.org/routing.html#singular-resources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:03:13.023

单数必须是`resource`，否则`resources`

```
resource :dashboard
resource :visitor, :only => :create 
```

或者

```
resources :dashboards 
```

取决于任务是什么

# matlab - 在matlab中将n * m图像分解为p * q块

> ID：14272765
> 
> 赞同：0
> 
> 时间：2013-01-11T06:18:01.503
> 
> 标签：matlab

我正在做一个项目，但我面临一个问题：我有一个大小为 m*n(560*585) 的图像，我需要将它分成大小为 p*q(8*8) 的块，并且还必须存储这些块在单独的变量中。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:48:52.873

怎么样[`im2col`](http://www.mathworks.com/help/images/ref/im2col.html)？您还可以使用[`padarray`](http://www.mathworks.com/help/images/ref/padarray.html)填充图像，使其大小为`p`和的整数乘积`q`。

# applet - 如何修复下一代 java 插件？

> ID：14272766
> 
> 赞同：1
> 
> 时间：2013-01-11T06:18:01.220
> 
> 标签：applet, java, java-7

当我们禁用 java 的下一代插件插件时，我们面临问题![在此处输入图像描述](../Images/9ead046244f0d78657e5adfc1ab546df.png)

当我们禁用此选项并尝试通过小程序与 javascript 通信时，Internet Explorer 会挂起，而不管其版本如何。

小程序可以在这里找到：http: [//jdk6.java.net/nonav/plugin2/liveconnect/ArrayAccess.html](http://jdk6.java.net/nonav/plugin2/liveconnect/ArrayAccess.html)

它与启用的选项完美配合。

但作为一项要求，我们需要禁用该选项，任何人都可以指导我们可能的解决方法或解决相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-03T09:06:28.903

你应该重新考虑你的要求。我认为这只是从 Java 1.6.15 到 Java 1.6.30 期间创建的遗留需求。在这个版本范围内，“下一代”确实必须被禁用。在最新版本中，必须启用“下一代”。从 Java 8 开始，没有这样的选项，例如默认启用“下一代”。

# c# - 在单元测试中获取 OutOfMemoryException

> ID：14272768
> 
> 赞同：2
> 
> 时间：2013-01-11T06:18:11.393
> 
> 标签：c#, .net, unit-testing, exception-handling, out-of-memory

这是一个没有实际意义的问题，因为我分配的金额是错误的。它应该是 400MB 而不是 400GB……对不起！不过答案很好。

我正在尝试对我的一种方法进行单元测试，如果上传了大文件，该方法会引发 OutOfMemoryException。

我的问题是我的单元测试也抛出了这个异常（我猜是出于同样的原因）。

根据任务管理器的说法，如果我正确阅读了信息，我确实有足够的 RAM，所以我不确定为什么我的单元测试会以这种方式失败。

![内存使用情况](../Images/4dabbc05f0d43bc6542e284592332642.png)

这是各自的单元测试代码：

```
var data = new List<byte>();
for(UInt64 i = 0; i < 400ul * 1024ul * 1024ul * 1024ul; i += 65536ul)
{
    data.AddRange(new byte[65536]); // <-- throws exception here when i = 536870912
}
this.UploadedFileData = data.ToArray(); 
```

我在上面的代码之前尝试了以下内容：

```
var data = new byte[400ul * 1024ul * 1024ul * 1024ul]; 
```

但是，这会导致错误：算术运算导致溢出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T06:20:11.927

你是32位机吗？

> 除非您使用 /3GB 引导开关，否则 32 位的进程限制为 2GB。

从[C# 增加堆大小 - 是否可能](https://stackoverflow.com/questions/2325370/c-sharp-increase-heap-size-is-it-possible)

您可能需要执行以下操作

> 对于非常大的 List 对象，您可以通过在运行时环境中将 gcAllowVeryLargeObjects 配置元素的 enabled 属性设置为 true 来将 64 位系统上的最大容量增加到 20 亿个元素。

来自[http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

正如大卫所提到的，代码在增长时将需要大量的重新分配。为了防止性能成本和内存碎片，您至少应该设置[`Capacity`](http://msdn.microsoft.com/en-us/library/y52x03h2.aspx)一个适当的数量，如果不重写代码的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:31:34.537

很可能您正在达到最大分配大小限制（大多数版本为 2GB）并且它需要抛出一些东西 - OOM 非常适合。

此处涵盖了限制：[在 CLR 4.0 中，单个对象的大小仍限制为 2 GB？](https://stackoverflow.com/questions/1087982/single-objects-still-limited-to-2-gb-in-size-in-clr-4-0)

旁注：由于需要将基础数据存储在连续的内存块中，因此您希望将它们缓慢增长到巨大的大小`MemoryStream`，这是不好的选择。`List`预先分配必要的存储量或使用自定义分块流/列表。

在 4.5 CLR 之前获得大约 2Gb 分配限制的数组示例 - [http://blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx](http://blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx)

# php - php 嵌套 if else 4 条件不起作用

> ID：14272774
> 
> 赞同：0
> 
> 时间：2013-01-11T06:18:36.417
> 
> 标签：php, if-statement

我有 4 个 if/else 条件，在 4 个中只有 3 个可以正常工作，条件中的值将具有数字和文本的组合，这是否会导致问题。

我不确定，有人可以告诉我这是否导致了问题，还有其他方法可以做到这一点。

在下面的代码中，我提到了从表单传递的 2 个变量的值。在这种情况下，理想情况下它应该进入第 3 个 If 条件，但它会进入第 4 个 if 条件。

我的php代码的一部分：

```
 echo "category :".$option." ".$suboption." "; //Values displayed for $option is 4 and $suboption is Nitrogen

    if ($option==0 && $suboption==0)
        $dc=mysql_query("SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER ORDER BY Ac_code, Prod_desc");
    else{
        if($option==0 && $suboption!=0)
            $dc=mysql_query("SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER WHERE Prod_desc='$suboption' ORDER BY Ac_code, Prod_desc");
        else{
           if($option!=0 && $suboption!=0)
               $dc=mysql_query("SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER WHERE Ac_code='$option' AND Prod_desc='$suboption' ORDER BY Ac_code, Prod_desc");
           else{
               if($option!=0 && $suboption==0)
                  $dc=mysql_query("SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER WHERE Ac_code='$option' ORDER BY Ac_code, Prod_desc");
           }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:22:07.997

这是糟糕的代码。

1.  不要使用太多 if else 条件，根据您的条件定义变量并使用 switch case，或者使用`else if`

2.  不要将字符串“nitrogen”与数字 0 进行比较

见：[http ://codepad.org/8a4qFgmf](http://codepad.org/8a4qFgmf)

.

```
 <?php
    $myVar = ('Nitrogen' == 0);
    var_dump($myVar);  // THIS IS TRUE
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:37:49.273

做更多这样的事情怎么样（尽管这对于用户定义的数据仍然不安全（需要正确转义）

```
<?php

function array_map_assoc( $callback , $array ){
    $r = array();
      foreach ($array as $key=>$value)
            $r[$key] = $callback($key,$value);
        return $r;
}

function funtimes($option, $suboption) {
  $query = "SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER%sORDER BY Ac_code, Prod_desc";
  $clause = array("Ac_code" => $option, "Prod_desc" => $suboption);
  $clause = array_filter($clause);
  $where = ' ';
  if (count($clause)) {
    $where = " WHERE " . implode(', ',array_map_assoc(function($k,$v){return "$k='$v'";},$clause)) . " ";
  }
  echo "For option=$option, suboption=$suboption\n";
  echo sprintf($query, $where);
  echo "\n\n";
}

funtimes(0, 0);
funtimes(1, 0);
funtimes(0, 1);
funtimes(1, 1); 
```

**输出**

```
For option=0, suboption=0
SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER ORDER BY Ac_code, Prod_desc

For option=1, suboption=0
SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER WHERE Ac_code='1' ORDER BY Ac_code, Prod_desc

For option=0, suboption=1
SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER WHERE Prod_desc='1' ORDER BY Ac_code, Prod_desc

For option=1, suboption=1
SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER WHERE Ac_code='1', Prod_desc='1' ORDER BY Ac_code, Prod_desc 
```

现在您有了正确的查询，所以只需执行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T07:00:44.123

是的，可以清理代码，但是对于您的代码，如果您的输入是数字和文本，并且如果 0 表示没有选项，并且空字符串表示没有选项（这看起来像您在做什么），那么将条件替换为

```
if ($option==0 && $suboption==0)
to
if ($empty(option) && empty($suboption)) 
```

同样。

我会写这样的代码

```
$qry = 'SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER';
$where = ' WHERE ';
$post = ' ORDER BY Ac_code, Prod_desc';
$clause = '';
if(!empty($option))
{
    $clase = $where . " Ac_code='$option'";
    $where = " AND ";
}
if(!empty($suboption))
{
    $clase = $where . " Prod_desc='$suboption'";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:40:12.003

虽然我同意 DhruvPathak，但这里是您的代码清理了一下。Switch 可能不是最佳选择，因为您要比较两件事，而不仅仅是一件。

```
//initialize variables
$option = $suboption = 0;

// get option values
//...your code here...

$sql = "SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER";
if ($option!=0 && $suboption==0) {
   $sql .= " WHERE Ac_code='$option'";
}
elseif($option==0 && $suboption!=0) {
   $sql .= " WHERE Prod_desc='$suboption'";
}
elseif($option!=0 && $suboption!=0) {
   $sql .= " WHERE Ac_code='$option' AND Prod_desc='$suboption'";
}
$sql .= " ORDER BY Ac_code, Prod_desc";
$dc = mysql_query($sql); 
```

请注意，如果您通过 GET 或 POST 获取选项和子选项值，这些查询可能会受到 SQL 注入攻击。还有更好的方法来获取数据。

根据您的反馈，这行得通吗？

```
$sql = "SELECT Ac_code, Prod_desc, Capacity FROM RATEMASTER";
if ($option!=0) {
   $sql .= " WHERE Ac_code='$option'";
   if ( (int)$suboption >= 0 || strlen($suboption) > 1)
      $sql .= " AND Prod_desc='$suboption'";
}
elseif($option==0 && ((int)$suboption >= 0 || strlen($suboption) > 1) ) {
   $sql .= " WHERE Prod_desc='$suboption'";
}
$sql .= " ORDER BY Ac_code, Prod_desc"; 
```

# c# - 发生 XamlParseException：无法从文本创建“System.Windows.Media.Geometry”

> ID：14272775
> 
> 赞同：0
> 
> 时间：2013-01-11T06:18:41.983
> 
> 标签：c#, .net, wpf, silverlight, xaml

我仍然是学习者，并且在我的应用程序中面临一些问题。

我有几何字符串，我想在银光应用程序上显示它。我正在使用以下代码来显示它，其中“GeoObject”是字符串，它是几何标记。几何图形非常大，并且包含更多点。这段代码可以正常工作，但不能正常工作并给我错误“无法从文本创建'System.Windows.Media.Geometry'”。我试图找出问题，但找不到它。

这里有人遇到过这样的问题吗？如果是，那么您找到解决方案了吗？

```
string nsPath ="<Path xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\" Data=\"";
var section = (System.Windows.Shapes.Path)XamlReader.Load(nsPath + GeoObject + "\" " + "</Path>"); 
```

我的几何字符串太大，所以我不能在这里发布.....当我将该字符串放在 Silver-light 应用程序设计窗口中的静态路径对象中时，几何显示完美，但是当我运行它时它显示相同的错误.

当我将该字符串放在 WPF 应用程序设计窗口中的静态路径对象中时，几何图形完美显示并且运行完美。

请帮帮我..........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:55:39.470

有两个问题，第一个可能是格式。在调试器中验证您的路径是您认为的那样。由于我们不知道 GeoObject ToStrings 是如何（调用重载 ToString 时返回的内容），因此 StackOverflow 上的我们无法诊断。

此外，我认为示例是错误的，并且生成的路径对象因错误的节点结尾而失败。使用此节点结束修复并**检查调试器中的每一行**，以确保您获得所需的路径和所需的演员表

```
string nsPath ="<Path xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\" Data=\"";

var path = string.Format("{0}{1}\"/>", nsPath, GeoObject);
var xmlResult = XamlReader.Load(path);
var section = (System.Windows.Shapes.Path) xmlResult; 
```

如果可行，请验证路径指向的是实际数据...可能存在权限问题或代码未读取您认为的数据...

# node.js - 从 NodeJS 服务器调用 Yeoman 命令

> ID：14272782
> 
> 赞同：1
> 
> 时间：2013-01-11T06:19:01.357
> 
> 标签：node.js, yeoman

如何从 NodeJS 服务器调用 Yeoman 命令？

我想制作一个简单的客户端网页，允许我在 NodeJS 服务器上执行 Yeoman 命令，例如

```
yeoman install angular
yeoman server 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:57:22.617

添加执行此示例代码的路径或 websocket 命令：

```
var spawn = require('child_process').spawn;
var yeoman = spawn('yeoman', ['install', 'angular']);
yeoman.stdout.on('data', function (data) {
    console.log('yeoman: ' + data);
}); 
```

稍后编辑：您在这里有几个选项+示例，包括`exec`评论中的建议： [http ://nodejs.org/api/child_process.html](http://nodejs.org/api/child_process.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T04:49:21.763

var env = require('yeoman-generator')();

var workingDirectory = //应该执行生成器的路径。生成器 = env.create('iosapp:app'); generator.destinationRoot(workingDirectory);
生成器.run();

您可以通过不带参数调用 yo 来找到创建调用的生成器 ID。

# javascript - plupload2 图像预览

> ID：14272783
> 
> 赞同：1
> 
> 时间：2013-01-11T06:19:08.320
> 
> 标签：javascript, image, plupload

我正在实现一个自定义 plupload 上传器，并希望在图像上传到服务器之前包含图像预览。如何访问该文件？我计划在 FilesAdded 事件中执行此操作，如下面的代码片段所示：

```
uploader.bind('FilesAdded',function(up,files){
$('#filelist').append('<img src=" "/>'); //render image preview here
} 
```

我目前能够显示其他信息，例如图像文件名、大小等。但是，我不知道图像预览。

# android - Android 上的 ORMLite：尝试从对象读取数据时出现 NullPointerException

> ID：14272787
> 
> 赞同：0
> 
> 时间：2013-01-11T06:19:38.487
> 
> 标签：android, ormlite

在我的应用程序中，我有几个持久化模型，在一种情况下，我在尝试使用相应的 getter 获取数据时遇到异常。但是数据库中有数据，我不知道为什么 getter 什么都不返回。答题类：

```
@DatabaseTable
@JsonRootName(value = "answer")
public class Answer {
    public Answer() {}        

    @DatabaseField(generatedId = true, columnName = "_id")
    @JsonIgnore
    private Integer id;

    @DatabaseField
    @JsonProperty(value = "id")
    private Integer answer_id;

    @DatabaseField(dataType = DataType.LONG_STRING)
    private String text;
    // some other fields and setters/getters
    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }
} 
```

问题类：

```
@DatabaseTable
public class Question extends BaseDaoEnabled implements Serializable {

    private static final long serialVersionUID = -7587892134579897L;

    public Question() {
    }
    @DatabaseField(foreign = true, foreignAutoRefresh = true)
    private Answer answer;
} 
```

任务类：

```
@DatabaseTable(tableName = "quests")
@JsonRootName(value = "quest")
public class Quest {

@DatabaseField(allowGeneratedIdInsert = true, generatedId = true, columnName = "_id")
private Integer id;

@DatabaseField(dataType = DataType.DATE_STRING)
Date created_at;

@DatabaseField(foreign = true)
private Survey survey;

@ForeignCollectionField(eager = false, orderColumnName = "question_id")
public Collection<Question> questions; 
```

答案创建：

```
 answer.setText(input.getText().toString());
  try {
      if (answer.getId() == null) {
          DBHelperFactory.GetHelper().getAnswersDao().create(answer);
          question.setAnswer(answer);
          DBHelperFactory.GetHelper().getQuestionsDao().update(question);
      } else  {
          DBHelperFactory.GetHelper().getAnswersDao().update(answer);
      }
      Toast.makeText(this.getActivity(), "Answer saved", 5).show();
      listener.nextQuestion();
  } catch (SQLException e) {
      Log.e(LOG_KEY, "Create failed", e);
  } 
```

以及失败的代码，（任务被传递给在后台运行的函数）

```
for (Question question : quest.questions) {
    if (question.getAnswer() != null) {
         Log.d(LOG_KEY, question.getId().toString());
         Log.d(LOG_KEY, question.getAnswer().getId().toString());
         Log.d(LOG_KEY, question.getAnswer().getText());
         // NullPointerException for getText().
    }
} 
```

`getAnswer()`确实返回答案。数据库中的数据保持不变。但是`getText()`失败了。谁能帮我找出我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:28:36.327

关键是它的`@DatabaseField(dataType = DataType.LONG_STRING)`工作方式很奇怪，我无法让它工作。切换回后`VARCHAR`- 问题消失了。

# google-chrome - 控制台函数保存到chrome中的变量

> ID：14272788
> 
> 赞同：0
> 
> 时间：2013-01-11T06:19:41.883
> 
> 标签：google-chrome, console

这似乎只发生在 chrome 中，想知道是否有人知道它为什么会发生或如何修复它。

打印`console.log('test')`出“测试”

现在如果我们保存函数

```
var log = console.log
log('test') 
```

这给了我们 TypeError: Illegal invocation

控制台的所有方法都会发生同样的事情，例如错误和警告

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:25:01.120

尝试这个：

```
var log = console.log.bind(console);
log('test'); 
```

`.bind`您将提供正确`console`的上下文（即其本身）​​来操作。

# android - 如何创建具有无限有效性的 Android 密钥库 RSA 密钥？

> ID：14272794
> 
> 赞同：26
> 
> 时间：2013-01-11T06:20:41.727
> 
> 标签：android, rsa, keystore, android-keystore

以下是[Google 建议创建 Android 密钥库的方式](http://developer.android.com/tools/publishing/app-signing.html#cert)：

```
keytool -genkey -v -keystore my-release-key.keystore -alias alias_name \
  -keyalg RSA -keysize 2048 -validity 10000 
```

虽然 10000 天似乎是永恒，但 27 年的时间可能比您想象的要快，而且 RSA 可能仍在使用中。
如果现在调整命令行参数有 0.01% 的机会在未来节省我的市场份额，我愿意这样做。

**问题：**如何使此有效期尽可能长？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-08-04T14:50:57.657

“一千年”的例子：

我也毫无问题地创建了“1000 年”JKS 密钥库：

`keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 365000`

然后，检查有效期：

`keytool -list -v -keystore my-release-key.keystore`

```
Enter keystore password:  

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry
...
Valid from: Tue Aug 04 15:28:01 BST 2015 until: Mon Dec 05 14:28:01 GMT 3014 
```

因此，密钥在**3014 年 12 月 5 日星期一 14:28:01 GMT之前有效**

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-11T06:44:15.740

如果我计算正确，你应该能够创建一个有效期为 2920 亿年的密钥。

我查看了 keytool 的来源，[http](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/tools/KeyTool.java) ://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/tools/KeyTool.java ，它看起来像有效期以秒为单位存储，作为一个长。long 可以容纳 2 ^(63) - 1 的最大值是**9223372036854776000 秒**，即 106751991167300 天，即 292,271,023,045 年。可能还有其他因素不允许如此大的值，但这似乎是该工具可以生成的最大数量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-29T16:41:35.813

经过反复试验，我看到了 9999 年左右的实际最大值。截至今天，以这种方式创建了两个键：

```
keytool -genkey -v -keystore year-9998.keystore -alias myalias -keyalg RSA -keysize 2048 -validity 2914760

keytool -genkey -v -keystore year-10002.keystore -alias myalias -keyalg RSA -keysize 2048 -validity 2916223 
```

虽然两个键似乎都创建成功，但使用命令检查这些键：

`keytool -list -v -keystore year-9998.keystore`

> 运行正常，给出“有效期从：2017 年 8 月 29 日星期二 11:12:45 CDT 到：1 月 1 日星期四 10:12:45 CST 9998”

`keytool -list -v -keystore year-10002.keystore`

> 因“keytool 错误：java.security.cert.CertificateParsingException：java.io.IOException：解析通用时间，格式无效”而崩溃

所以我认为实际的最大到期时间是在 10000 年之前。

# java - Netty 部署流程

> ID：14272797
> 
> 赞同：-2
> 
> 时间：2013-01-11T06:21:10.820
> 
> 标签：java, eclipse, maven, netty

我能问为什么我不能在 Eclipse 上部署 netty 3.6.1.final 的原因吗？我下载的版本是`netty-3.6.1.Final-dist.tar.bz2`

正如我在依赖项选项卡中的 pom.xml 中遵循的那样，我无法解决错误

```
<dependency>
  <groupId>io.netty</groupId>
  <artifactId>netty</artifactId>
  <version>3.6.1.Final-dist</version>
  <scope>compile</scope>
</dependency> 
```

我遵循的步骤是[https://netty.io/Main/Downloads](https://netty.io/Main/Downloads)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T18:01:20.333

尝试将依赖项设置为：

```
<dependency>
    <groupId>io.netty</groupId>
    <artifactId>netty</artifactId>
    <version>3.5.11.Final</version>
</dependency> 
```

正如尼古拉所建议的那样。

然后转到项目根目录并从命令行运行：`mvn compile`. 那应该下载您的依赖项。然后刷新eclipse项目，你应该很好。

否则，请提供有关错误的更具体信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:26:46.657

该文件应该从 maven 网站下载，而不是 netty.io，不要放入`-dist`您的版本。

这对我有用

```
<dependency>
    <groupId>io.netty</groupId>
    <artifactId>netty</artifactId>
    <version>3.5.11.Final</version>
</dependency> 
```

然后你使用 Maven 插件在 Eclipse 中作为 pom.xml 运行。

# php - ZendFramework 使用 htaccess 设置环境失败？

> ID：14272801
> 
> 赞同：0
> 
> 时间：2013-01-11T06:21:40.737
> 
> 标签：php, .htaccess, zend-framework, environment-variables, ini

这是**.htaccess**文件

```
Options +FollowSymlinks 
SetEnv APPLICATION_ENV development
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

这是**application.ini**

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

这是 index.php

```
<?php

// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

    echo APPLICATION_ENV; exit;
// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
            ->run(); 
```

我已经看到`mod_rewrite`在 apache 中启用了我在 application.ini 或 zend 中的某个地方缺少什么我已经在表单中搜索了所有相关问题，但没有一个对我有用，任何人请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:54:37.713

要在 .htaccess 文件中使用**SetEnv**，您必须定义：

**AllowOverride FileInfo**

或者

**允许覆盖所有**

在您的 apache **httpd.conf 中**（在相关的**虚拟主机**目录块内）

然后重启apache

# ios - 在模拟器上而不是在设备上构建应用程序：XCode

> ID：14272817
> 
> 赞同：0
> 
> 时间：2013-01-11T06:22:32.380
> 
> 标签：ios, xcode, static-libraries, sup

我正在开发一个基于 SUP 的 iOS 应用程序。我通过在模拟器上运行应用程序，从未在设备上测试过它。有一个文件夹库，这是一个静态库，支持在模拟器和设备上调试和运行应用程序。我在“图书馆搜索路径”中提到了它的绝对路径：

`$(SRCROOT)/Libraries/${BUILD_STYLE}-${PLATFORM_NAME}`与递归。

当我用模拟器构建我的应用程序时，它工作正常。但是当我使用设备运行它时，它会抛出一些警告和下面给出的 68 个类似错误。

> ld：警告：忽略文件 Libraries/Debug-iphoneos/libAfariaSLL.a，文件是为存档而构建的，它不是被链接的架构（armv7s）：Libraries/Debug-iphoneos/libAfariaSLL.a ld：警告：忽略文件 Libraries/Debug -iphoneos/libclientrt.a，文件是为存档而构建的，它不是被链接的架构（armv7s）：Libraries/Debug-iphoneos/libclientrt.a ld：警告：忽略文件 Libraries/Debug-iphoneos/libDatavault.a，文件是为不是被链接的架构的存档（armv7s）而构建：Libraries/Debug-iphoneos/libDatavault.a ld：警告：忽略文件库/Debug-iphoneos/libMo.a，文件是为不是架构的存档构建的链接（armv7s）：库/Debug-iphoneos/libMo.a ld：警告：忽略文件库/Debug-iphoneos/libsupcore.a，文件是为不是被链接的架构的存档（armv7s）构建的：Libraries/Debug-iphoneos/libsupcore.a ld：警告：忽略文件 Libraries/Debug-iphoneos/libSUPObj.a，文件是为不是正在链接的架构（armv7s）：Libraries/Debug-iphoneos/libSUPObj.a ld：警告：忽略文件 Libraries/Debug-iphoneos/libsupUltralite.a，文件是为存档而构建的，它不是被链接的架构（armv7s）：Libraries/ Debug-iphoneos/libsupUltralite.a ld：警告：忽略文件 Libraries/Debug-iphoneos/libMO.a，文件是为存档而构建的，它不是被链接的架构（armv7s）：Libraries/Debug-iphoneos/libMO.a 未定义的符号对于架构 armv7s：“_OBJC_CLASS_$_SUPDataType”，引用自：WorkPlannerActivityMetaData 中的 objc-class-ref。o WorkPlannerChangeLogImplMetaData.o objc-class-ref 在 WorkPlannerChangeLogKeyMetaData.o objc-class-ref 在 WorkPlannerEmployeeCraftMetaData.o objc-class-ref 在 WorkPlannerEmployeeMetaData.o objc-class-ref 在 WorkPlannerEmployeeUserMetaData.o objc-class-参考 WorkPlannerEquipmentMetaData.o ... "_OBJC_CLASS_$_SUPDatabaseMetaDataRBS"，引用自：_OBJC_CLASS_$_WorkPlannerWorkPlannerDBMetaData in WorkPlannerWorkPlannerDBMetaData.oo WorkPlannerEquipmentMetaData.o 中的 objc-class-ref ... "_OBJC_CLASS_$_SUPDatabaseMetaDataRBS"，引用自：WorkPlannerWorkPlannerDBMetaData.o 中的 _OBJC_CLASS_$_WorkPlannerWorkPlannerDBMetaDatao WorkPlannerEquipmentMetaData.o 中的 objc-class-ref ... "_OBJC_CLASS_$_SUPDatabaseMetaDataRBS"，引用自：WorkPlannerWorkPlannerDBMetaData.o 中的 _OBJC_CLASS_$_WorkPlannerWorkPlannerDBMetaData
> “_OBJC_CLASS _ $ _ SUPAbstractStructure”，从引用：在WorkPlannerChangeLogKey.o _OBJC_CLASS _OBJC_CLASS _ $ _ WorkPlannerChangeLogKey _ $ _ WorkPlannerKeyGeneratorPK在WorkPlannerKeyGeneratorPK.o _OBJC_CLASS _ $ _ WorkPlannerKeyPackageName在WorkPlannerKeyPackageName.o _OBJC_CLASS _ $ _ WorkPlannerLocalActivityEmployeeAssociationKey在WorkPlannerLocalActivityEmployeeAssociationKey.o _OBJC_CLASS _ $ _ WorkPlannerLocalActivityEquipmentAssociationKey在WorkPlannerLocalActivityEquipmentAssociationKey.o _OBJC_CLASS _ $ _ WorkPlannerLocalKeyGeneratorPK在WorkPlannerLocalKeyGeneratorPK。 o WorkPlannerLocalPlanDetailKey.o 中的 _OBJC_CLASS_$_WorkPlannerLocalPlanDetailKey ... "_OBJC_CLASS_$_SUPKeyGenerator"，引用自：WorkPlannerKeyGenerator 中的 objc-class-ref。Ø_OBJC_CLASS _ $ _在WorkPlannerKeyGenerator.o WorkPlannerKeyGenerator “_OBJC_CLASS _ $ _ SUPDefaultCallbackHandler”，从引用：_OBJC_CLASS _ $ _的CallbackHandler在CallbackHandler.o “_OBJC_METACLASS _ $ _ SUPKeyGenerator”，从引用：objc：_OBJC_METACLASS _ $ _ WorkPlannerKeyGenerator在WorkPlannerKeyGenerator.o “_OBJC_CLASS _ $ _ SUPClassDelegate”，从引用-class-ref 在 WorkPlannerChangeLogKey.o objc-class-ref 在 WorkPlannerKeyGeneratorPK.o objc-class-ref 在 WorkPlannerKeyPackageName.o objc-class-ref 在 WorkPlannerLocalActivityEmployeeAssociationKey.o objc-class-ref 在 WorkPlannerLocalActivityEquipmentAssociationKey.o objc-class-ref 在WorkPlannerLocalKeyGeneratorPK.o WorkPlannerLocalPlanDetailKey.o 中的 objc-class-ref○○○○_OBJC_CLASS_$_SUPDefaultCallbackHandler"，引用自：CallbackHandler.o 中的_OBJC_CLASS_$_CallbackHandler.o "_OBJC_METACLASS_$_SUPKeyGenerator"，引用自：WorkPlannerKeyGenerator.o 中的_OBJC_METACLASS_$_WorkPlannerKeyGenerator.o "_OBJC_CLASS_$_SUPClassDelegate"，引用自：WorkPlannerChangeChange 中的objc-objcKey -class-ref 在 WorkPlannerKeyGeneratorPK.o objc-class-ref 在 WorkPlannerKeyPackageName.o objc-class-ref 在 WorkPlannerLocalActivityEmployeeAssociationKey.o objc-class-ref 在 WorkPlannerLocalActivityEquipmentAssociationKey.o objc-class-ref 在 WorkPlannerLocalKeyGeneratorPK.o objc-class-ref 在WorkPlannerLocalPlanDetailKey.o_OBJC_CLASS_$_SUPDefaultCallbackHandler"，引用自：CallbackHandler.o 中的_OBJC_CLASS_$_CallbackHandler.o "_OBJC_METACLASS_$_SUPKeyGenerator"，引用自：WorkPlannerKeyGenerator.o 中的_OBJC_METACLASS_$_WorkPlannerKeyGenerator.o "_OBJC_CLASS_$_SUPClassDelegate"，引用自：WorkPlannerChangeChange 中的objc-objcKey -class-ref 在 WorkPlannerKeyGeneratorPK.o objc-class-ref 在 WorkPlannerKeyPackageName.o objc-class-ref 在 WorkPlannerLocalActivityEmployeeAssociationKey.o objc-class-ref 在 WorkPlannerLocalActivityEquipmentAssociationKey.o objc-class-ref 在 WorkPlannerLocalKeyGeneratorPK.o objc-class-ref 在WorkPlannerLocalPlanDetailKey.o_OBJC_CLASS_$_CallbackHandler in CallbackHandler.o "_OBJC_METACLASS_$_SUPKeyGenerator"，引用自：_OBJC_METACLASS_$_WorkPlannerKeyGenerator in WorkPlannerKeyGenerator.o "_OBJC_CLASS_$_SUPClassDelegate"，引用自：objc-class-ref in WorkPlannerChangeLogKey.o objc-class-ref in WorkPlannerKeyGeneratorPK。 objc-class-ref 在 WorkPlannerKeyPackageName.o objc-class-ref 在 WorkPlannerLocalActivityEmployeeAssociationKey.o objc-class-ref 在 WorkPlannerLocalActivityEquipmentAssociationKey.o objc-class-ref 在 WorkPlannerLocalKeyGeneratorPK.o objc-class-ref 在 WorkPlannerLocalPlanDetailKey.o_OBJC_CLASS_$_CallbackHandler in CallbackHandler.o "_OBJC_METACLASS_$_SUPKeyGenerator"，引用自：_OBJC_METACLASS_$_WorkPlannerKeyGenerator in WorkPlannerKeyGenerator.o "_OBJC_CLASS_$_SUPClassDelegate"，引用自：objc-class-ref in WorkPlannerChangeLogKey.o objc-class-ref in WorkPlannerKeyGeneratorPK。 objc-class-ref 在 WorkPlannerKeyPackageName.o objc-class-ref 在 WorkPlannerLocalActivityEmployeeAssociationKey.o objc-class-ref 在 WorkPlannerLocalActivityEquipmentAssociationKey.o objc-class-ref 在 WorkPlannerLocalKeyGeneratorPK.o objc-class-ref 在 WorkPlannerLocalPlanDetailKey.oo “_OBJC_CLASS_$_SUPClassDelegate”，引用自：WorkPlannerChangeLogKey 中的 objc-class-ref.o WorkPlannerKeyGeneratorPK.o 中的 objc-class-ref.o WorkPlannerKeyPackageName.o 中的 objc-class-ref.o WorkPlannerLocalActivityEmployeeAssociationKey.o 中的 objc-class-ref WorkPlannerLocalActivityEquipmentAssociationKey.o 中的 ref WorkPlannerLocalKeyGeneratorPK.o 中的 objc-class-ref WorkPlannerLocalPlanDetailKey.o 中的 objc-class-refo “_OBJC_CLASS_$_SUPClassDelegate”，引用自：WorkPlannerChangeLogKey 中的 objc-class-ref.o WorkPlannerKeyGeneratorPK.o 中的 objc-class-ref.o WorkPlannerKeyPackageName.o 中的 objc-class-ref.o WorkPlannerLocalActivityEmployeeAssociationKey.o 中的 objc-class-ref WorkPlannerLocalActivityEquipmentAssociationKey.o 中的 ref WorkPlannerLocalKeyGeneratorPK.o 中的 objc-class-ref WorkPlannerLocalPlanDetailKey.o 中的 objc-class-refo WorkPlannerLocalActivityEquipmentAssociationKey.o 中的 objc-class-ref WorkPlannerLocalKeyGeneratorPK.o 中的 objc-class-ref WorkPlannerLocalPlanDetailKey.o 中的 objc-class-refo WorkPlannerLocalActivityEquipmentAssociationKey.o 中的 objc-class-ref WorkPlannerLocalKeyGeneratorPK.o 中的 objc-class-ref WorkPlannerLocalPlanDetailKey.o 中的 objc-class-ref

请帮助了解我的构建设置或架构出了什么问题。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:38:47.150

您正在测试具有 armv7s 架构（[what-is-armv7s](https://stackoverflow.com/questions/12569339/what-is-armv7s)）的 iPhone 5 或 iPod 5，但您的库不支持 armv7s。您需要为 armv7s 架构构建库以支持新设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:43:49.870

如果您的目标是使用 XCode 4.5 构建的 iPad3/iOS6 上的 SUP 2.1.3，您应该能够毫无问题地做到这一点。

我正在开发一个具有完全相同细节的应用程序，并且使用模拟器和设备本身运行它都没有问题。

您应该可以通过将项目的架构从*Standard*更改为*armv7来修复它（如果您没有看到该选项，请使用**Other...*添加它），它将在 iPad3 上运行。

![代码](../Images/17c3678f3cabcaaa12e0dbc1e7c8ee95.png)

# android - 在 Eclipse 上安装 BlackBerry Plug-in for Android Development 时出现问题

> ID：14272818
> 
> 赞同：1
> 
> 时间：2013-01-11T06:22:38.130
> 
> 标签：android, blackberry-10, blackberry-android

我正在尝试安装“BlackBerry Plug-in for Android Development”，最后收到以下错误：

请问这有什么问题吗？

```
An error occurred while collecting items to be installed
session context wasprofile=profile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,com.android.ide.eclipse.adt,21.0.0.v201210310015-519525
No repository found containing: osgi.bundle,com.android.ide.eclipse.adt.package,21.0.0.v201210310015-519525
No repository found containing: osgi.bundle,com.android.ide.eclipse.base,21.0.0.v201210310015-519525
No repository found containing: osgi.bundle,com.android.ide.eclipse.ddms,21.0.0.v201210310015-519525
No repository found containing: osgi.bundle,overlay.com.android.ide.eclipse.adt.overlay,21.0.0.v201210310015-519525
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.adt,21.0.0.v201210310015-519525
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.ddms,21.0.0.v201210310015-519525 
```

# android - 任何视图下方的自定义对话框（按钮、图像按钮等）

> ID：14272825
> 
> 赞同：2
> 
> 时间：2013-01-11T06:23:04.407
> 
> 标签：android, android-alertdialog

我想要一个在视图下方打开的自定义对话框，假设我有一个按钮，当我单击该按钮时，自定义对话框在按钮下方打开。请建议或给我任何解决方案。我可以使用滑动抽屉吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:39:32.723

只需访问此链接，它将帮助您...创建自定义对话框..

[http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

[http://www.androidpatterns.com/uap_pattern/quick-actions](http://www.androidpatterns.com/uap_pattern/quick-actions)

[http://lemonbloggywog.wordpress.com/2011/01/06/custom-dialogs-within-an-activity%E2%80%93android/](http://lemonbloggywog.wordpress.com/2011/01/06/custom-dialogs-within-an-activity%E2%80%93android/)

[http://androidforbeginner.blogspot.in/2012/09/custom-popup-window-development-in.html](http://androidforbeginner.blogspot.in/2012/09/custom-popup-window-development-in.html)

![在此处输入图像描述](../Images/634e896e8016f150e441ce2b52595b76.png)

# c# - 使用 TPH 继承的 LINQ 查询 - 获取派生类 ICollection 计数

> ID：14272830
> 
> 赞同：0
> 
> 时间：2013-01-11T06:23:30.577
> 
> 标签：c#, .net, entity-framework, linq-to-entities

我试图弄清楚如何在特定的 ProjectDoc.OfType 上获取 ProjectSummaryVotes 的计数。查询有效，但 ProjectSummaryVote 属性为空，这意味着我收到空值错误。这是可行的吗？如果我需要这样做，我应该放弃 TPH 继承吗？

模型：

```
public class Project
{
    public int ProjectID { get; set; }
    public virtual ICollection<ProjectDoc> ProjectDoc { get; set; }

}
public abstract class ProjectDoc
{
    public int ProjectDocID { get; set; }
    public int ProjectID { get; set; }
    public string DocTitle { get; set; }
    public string Status { get; set; }
    public DateTime DateCreated { get; set; }

    public virtual Project Project { get; set; } 
    public virtual ICollection<Comment> Comment { get; set; }
}

public class Summary : ProjectDoc
{
    [DataType(DataType.MultilineText)]
    public string Text { get; set; }
    public ICollection<ProjectSummaryVote> ProjectSummaryVote { get; set; }
}
public class ProjectSummaryVote
{
    public int ProjectSummaryVoteID { get; set; }
    public int ProjectDocID { get; set; }
    public bool Vote { get; set; }
    public virtual Summary Summary { get; set; }
    public virtual User User { get; set; }
} 
```

询问：

```
 Project project = db.Projects
          .Include(i => i.User)
          .Include(i => i.ProjectDoc)
          .SingleOrDefault(x => x.ProjectID == id); 
```

尝试获取引发错误的计数。

```
 var trueCount = Model.ProjectDoc.OfType<Literrater.Models.Summary>()
      .Where(s => s.Status == "Active")
      .SelectMany(v => v.ProjectSummaryVote.Where(s => s.Vote == true))
      .Count(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:56:07.213

我对数据进行了重新建模，以便所有投票现在都是单个投票模型的一部分。这让我将投票关系从派生模型中移到主模型中，这样就可以轻松访问数据。

# asp.net-mvc - 使用 mvc3 开发移动应用程序？

> ID：14272831
> 
> 赞同：0
> 
> 时间：2013-01-11T06:23:32.020
> 
> 标签：asp.net-mvc, mobile-application

我需要使用 mvc3 开发一个移动应用程序来从相机捕获图像，但实际上我对移动应用程序开发一无所知，我们可以使用 mvc3 开发移动应用程序吗，我不想使用 mvc4 也关于如何开始的任何建议移动应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:53:34.687

ASP.NET MVC 是一个基于 .NET 框架开发**Web 应用程序的框架。**Web 应用程序通常最终会向客户端发送 HTML。例如，您可以使用 javascript 框架[`jQuery Mobile`](http://jquerymobile.com/)来创建移动友好的内容。您可以将它与任何服务器端框架一起使用，而不仅仅是 ASP.NET MVC。

但是您将永远无法使用服务器端框架开发在手机上运行的原生移动应用程序。

# jsf - FullAjaxExceptionHandler显示的错误页面如何调用p:commandButton？

> ID：14272835
> 
> 赞同：3
> 
> 时间：2013-01-11T06:23:55.360
> 
> 标签：jsf, primefaces, action, omnifaces

我正在使用[OmniFaces`FullAjaxExceptionHandler`](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)和 PrimeFaces。我在下面添加了一个命令按钮`errorPage.xhtml`：

```
<h:form>
    <p:commandButton id="logoutButtonId" value="Redirect" actionListener="#{userMB.logout()}">
</h:form> 
```

错误页面正确显示，但按钮不触发方法 `#{userMB.logout()}`。这就是我所理解的设置中发生的情况：

1.  如果发生错误，`FullAjaxExceptionHandler`很好地显示`errorPage.xhtml`.
2.  如果我点击我添加的按钮，页面会使用相同的数据进行更新，就像发生刷新一样。
3.  如果我再次单击该按钮，则会触发托管 bean 方法。

只有在第二次单击时才会调用 bean 方法。似乎在第一次加载时，bean 方法没有绑定到对象。

如何实现在错误页面中添加命令按钮，并且在使用时将 action/actionlistener 正确绑定到 HTML 组件`FullAjaxExceptionHandler`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:54:15.917

此问题有两个可能的原因：

1.  如果您使用的是 Internet Explorer，则可以识别为 PrimeFaces`@all`无法在基于 IE 的浏览器中初始化必要的 ajax javascript。这在这里得到了回答：[Object doesn't support this property or method with primefaces omnifaces timeout combination](https://stackoverflow.com/questions/12820010/object-doesnt-support-this-property-or-method-with-primefaces-omnifaces-timeout/12821032#12821032)。

2.  如果您正在使用另一个浏览器并且您正在使用 JSF 标准`<f:ajax>`来触发 ajax 操作，那么这可以识别为 JSF 自己`jsf.js`未能在`@all`. 这在这里得到了回答：[错误页面上的错误报告表](https://stackoverflow.com/questions/13344969/bug-report-form-on-error-page/13345898#13345898)。

请注意，这些脚本需要放置在调用 ajax 操作的页面上，而不是错误页面本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T05:58:46.487

这对我有用，结合了 BalusC 在下面的回答中提到的方法。它适用于 IE 和 Firefox。在某些情况下可能需要进行一些调整，但由于我得到的错误页面只有一个表单，所以我没有费心循环表单。

```
var originalPrimeFacesAjaxResponseFunction = PrimeFaces.ajax.AjaxResponse;
PrimeFaces.ajax.AjaxResponse = function(responseXML) {
    var newViewRoot = $(responseXML.documentElement).find("update[id='javax.faces.ViewRoot']").text();

    if (newViewRoot) {
        var viewState = $(responseXML.documentElement).find("update[id='javax.faces.ViewState']").text();

        $('head').html(newViewRoot.substring(newViewRoot.indexOf("<head>") + 6, newViewRoot.indexOf("</head>")));
        $('body').html(newViewRoot.substring(newViewRoot.indexOf("<body>") + 6, newViewRoot.indexOf("</body>")));
        if (!$('input').attr("javax.faces.ViewState")){
            var hidden = document.createElement("input");
            hidden.setAttribute("type", "hidden");
            hidden.setAttribute("name", "javax.faces.ViewState");
            hidden.setAttribute("value", viewState);
            hidden.setAttribute("autocomplete", "off");
            $('form').append(hidden);
        }
    } else {
        originalPrimeFacesAjaxResponseFunction.apply(this, arguments);
    }
}; 
```

# javascript - Django 表单上的 TinyMCE

> ID：14272836
> 
> 赞同：1
> 
> 时间：2013-01-11T06:24:17.053
> 
> 标签：javascript, jquery, django, tinymce

我正在尝试将 TinyMCE 富文本仅应用于使用 Django 生成的一种表单。但是，这样做后，它会在表单中插入另一个文本区域。我究竟做错了什么？

编辑代码

```
 <p><div id="AnswerBox">{{ form.as_p }}</div></p>

        $('.answers').load(url, function() {
            $('#AnswerBox').addClass('mceEditor', 
                function() {tinyMCE.init({
                    theme : "advanced",
                    mode : "specific_textareas",
                    editor_selector : "AnswerBox",
                    elements: "AnswerBox",
                    plugins : "fullpage",
                    theme_advanced_buttons3_add : "fullpage",
                });
            })
        }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:25:38.640

您正在将编辑器添加到包装表单的 div 中。您需要将其添加到表单中的特定元素 - 输入和文本区域。这些由函数中`elements`选项的值标识`TinyMCE.init()`。

查看[自定义表单模板](https://docs.djangoproject.com/en/1.4/topics/forms/#customizing-the-form-template)，并将您的`mceEditor`类添加到您想要的元素中。

或者，您可以编写一些 javascript 来插入该类，并将其放在您当前的 js 之前。就像是 -

```
$('#yourForm textarea').addClass('mceEditor'); 
```

（您需要更改模板 -

```
<p><div id="yourForm">{{ form.as_p }}</div></p> 
```

所以 jquery 选择器工作。显然，您需要确定您真正想要编辑器的字段）。

# groovy - playframework 视图中的 if/else 语句

> ID：14272838
> 
> 赞同：1
> 
> 时间：2013-01-11T06:24:18.783
> 
> 标签：groovy, playframework-1.x

我对这样的条件语句有一个看法

```
#{list items: allTasks, as: 'task'}
<div class="task grid_12">

    #{list items:allClients, as: 'client' }
        <div class="client grid_1">

            #{list items:allTasksDone, as: 'taskDone'}

                #{if task.name==taskDone.task.name && client.name ==taskDone.client.name}
                    Done
                #{/if}
                #{else}
                    Not yet
                #{/else}
            #{/list}
        </div>
    #{/list}
</div>
#{/list} 
```

但结果是：如果条件为真，则显示“尚未完成”，如果条件为假，则显示“尚未完成”。
结果似乎是双倍的。
如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:09:13.987

谢谢帕拉科。是的，这是因为循环变量“taskDone”。我已经检查并修改了我的代码，如下所示：

```
<div class="task grid_24">
<div class="client grid_3">
Task/Client
</div>
#{list items:allClients, as: 'client' }
<div class="client grid_2">
${client.name} </div>
#{/list}
</div>

#{list items: allTasks, as: 'task'}
<div class="task grid_24">
    <div class="client grid_3">
        ${task.name}
    </div>

    #{list items:allClients, as: 'client' }
    %{
        i =0;
        }%
        <div class="client grid_2">
            #{list items:allTasksDone, as: 'taskDone'}

                #{if (taskDone.task == task && taskDone.client == client )}
                %{
                    i++;
                    }%
                #{/if}

            #{/list}
        <div class="taskStatus grid_2">
        #{if i>0}Done#{/if}
            #{else } Not yet#{/else}
        </div>
        </div>

    #{/list}
</div>
#{/list} 
```

# java - 没有缓存 Parser 的 Axiom getTextAsStream 已经到达文档的末尾。没有找到兄弟姐妹

> ID：14272839
> 
> 赞同：0
> 
> 时间：2013-01-11T06:24:37.400
> 
> 标签：java, axis2, axiom

我在 Axis2 中使用 Axiom 从 SOAP 消息的大型 base64Binary 部分中提取文本。我的接收器没有使用 MTOM，而是`OMElement.getTextAsStream( false )`用来提取文本。代码看起来像这样：

```
final Iterator<OMElement> childrenIterator = uploadFile.getChildElements();
while ( childrenIterator.hasNext() )
{
    final OMElement element = childrenIterator.next();
    if ( "fileID".equals( element.getLocalName() ) )
    {
        fileID = element.getText();
    }
    // fileContent contains a large base64Binary block
    else if ( "fileContent".equals( element.getLocalName() ) )
    {
        Reader reader = element.getTextAsStream( false );

        final char[] buf = new char[BUFFER_SIZE];
        int len = 0;
        while ( (len = reader.read( buf ) ) >= 0 )
        {
            if ( len > 0 )
            {
                // Process chunk here
            }
        }
    }
} 
```

示例 XML 看起来像

```
<uploadFile>
    <fileID>id</fileID>
    <fileContent>~500kB of base64 data</fileContent>
</uploadFile> 
```

`childrenIterator.hasNext()`在读取 base64Binary 数据后，我在线上遇到了这个异常：

```
Caused by: org.apache.axiom.om.OMException: Parser has already reached end of the document. No siblings found
    at org.apache.axiom.om.impl.llom.OMElementImpl.getNextOMSibling(OMElementImpl.java:359)
    at org.apache.axiom.om.impl.traverse.OMChildrenIterator.getNextNode(OMChildrenIterator.java:36)
    at org.apache.axiom.om.impl.traverse.OMAbstractIterator.hasNext(OMAbstractIterator.java:69)
    at org.apache.axiom.om.impl.traverse.OMFilterIterator.hasNext(OMFilterIterator.java:54) 
```

我做了一些调查，这肯定与我`false`在调用时设置缓存有关`getTextAsStream()`。我需要这样做，因为 base64 数据的潜在大小可能是数百兆字节。

问题似乎在于`TextFromElementReader`将底层推进`XMLStreamReader`到 END_ELEMENT 事件。 `OMElementImpl.getNextOMSibling()`然后调用`next()`底层证券`XMLStreamReader`并获取 END_DOCUMENT 事件。似乎`TextFromElementReader`需要遇到 END_ELEMENT 才能知道它已经到达文本段的末尾，但这会使底层代码`XMLStreamReader`处于错误的状态`OMElementImpl.getNextOMSibling()`。

有没有人见过这个错误？我使用 Axiom 的方式有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:15:57.303

我最终根本没有使用 getTextAsReader。相反，我遍历子文本节点并以这种方式分块处理文本内容。解析器被配置为非合并，所以我得到合理大小的文本节点而不是一个大的。

```
OMNode child = omElement.getFirstOMChild();
while ( child != null )
{
    if ( child instanceof OMText )
    {
        // process 'child' text here

        final OMNode nextSibling = child.getNextOMSibling();
        child.detach();    // detach from OM to keep memory usage low
        child = nextSibling;
    }
} 
```

# java - 从 Java API 打开 x509 证书存储

> ID：14272842
> 
> 赞同：3
> 
> 时间：2013-01-11T06:24:47.167
> 
> 标签：java, x509certificate, digital-certificate, e-token

我试图在 JSP 中显示来自客户端证书存储的证书列表。在 .Net 中有一个选项可以使用以下代码显示证书列表...

```
X509Store xStore = new X509Store(...);
xStore.Open(...); // This will open the list of certicates in open dialog box. 
```

是否有任何类似的功能可以在 Java 中获取此信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:05:43.237

您可以使用默认的 JDK 类打开 JKS 商店，打开 pkcs12 文件或您需要像 bouncycastle 这样的库的类似文件。例如：

```
KeyStore keystore = KeyStore.getInstance("PKCS12", "BC"); 
```

然后加载实际的密钥库：

```
keystore.load(inputStream, password); 
```

请注意，bouncycastle 或 jdk 对空密码的处理方式不同（一个需要空字符串，另一个需要空 iirc）。拥有密钥库实例后，您可以通过遍历别名并检查类型轻松获取证书：

```
Enumeration<String> aliases = keystore.aliases();
while (aliases.hasMoreElements()) {
    String alias = aliases.nextElement();
    if (store.entryInstanceOf(alias, KeyStore.TrustedCertificateEntry.class))
        certificates.put(alias, (X509Certificate) store.getCertificate(alias));
} 
```

# jquery - 非常长的下拉菜单问题

> ID：14272843
> 
> 赞同：0
> 
> 时间：2013-01-11T06:24:53.147
> 
> 标签：jquery, css

我使用了[超长下拉菜单的解决方案](http://css-tricks.com/long-dropdowns-solution/)，这是一个很棒的下拉菜单，但问题是我无法将子菜单（二级）宽度设置为大于一级宽度

有任何想法吗？

[小提琴](http://jsfiddle.net/rvfd5/2/)

[摆弄修复](http://jsfiddle.net/rvfd5/4/)谢谢dunli

![我的菜单截图](../Images/a3a1cf1d738d7036afbd0c2f2571db5d.png)

CSS：

```
 /* 
        LEVEL ONE
    */
    ul.dropdown                         { position: absolute; width: 100%; }
    ul.dropdown li                      { float: right; position: relative; list-style-type:none; width: auto; text-align:center;  }
    ul.dropdown a:hover                 { color: #000;  }
    ul.dropdown li a                    { display: block; color: #222; position: relative; z-index: 2000;  }
    ul.dropdown li a:hover,
    ul.dropdown li a.hover              { background: #F3D673; position: relative; }
    .suca {
    width:100px;}

    /* 
        LEVEL TWO
    */
    ul.dropdown ul                      { display: none; position: absolute; top: 0; left: 0; width: 80px !important; z-index: 1000; }
    ul.dropdown ul li                   { font-weight: normal; background: #f6f6f6; color: #000; border-bottom: 1px solid #ccc;  width:auto;}
    ul.dropdown ul li a                 { display: block; background: #eee !important; padding-right: 20px; width: 100px !important; } 
    ul.dropdown ul li a:hover           { display: block; background: #F3D673 !important; width: 100px !important; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:53:09.663

我已经更新了你`css`的一点点。[这里](http://jsfiddle.net/rvfd5/4/)

# sql-server-2008 - 记录的特殊情况计数

> ID：14272844
> 
> 赞同：1
> 
> 时间：2013-01-11T06:24:50.933
> 
> 标签：sql-server-2008

我被要求提供一份统计土地类型的报告。问题是如果有问题的地块有多种类型的土地，那么计数是去具有最大市场的那部分土地而忽略重置。这些表格有助于显示我正在使用的内容以及所需的输出。

```
 TRMaster Table
Year  Parcel   District
2012  0-0-12   1
2012  0-0-15   1
2012  0-0-20   3

TRValue Table
Year Parcel    PropCode    Market
2012  0-0-12      LC01     10,000
2012  0-0-12      LR01     25,000
2012  0-0-15      LA01     30,000
2012  0-0-15      LS01     28,000
2012  0-0-20      LR01     13,000
2012  0-0-20      LS01     15,000
2012  0-0-20      LS02     18,000

TRProp Table
PropCode    tc233    PropType
LA01           1         A
LC02           3         A
LR01           2         A
LS01           4         A
LS02           4

Desired Output
District tc233    Count
1         1        1    (from 0-0-15 LA01)
1         2        1    (from 0-0-12 LR01)
3         4        1    (from 0-0-20 LS02) 
```

以下查询已关闭，但由于 p.tc233 上的 MIN 子句而无法正常工作。当然，它返回 TRValue 中包裹的每个记录集的最小 p.tc233 值！

```
Select  m.District, MIN(p.tc233), MAX(v1.currentmarket), COUNT(*)
  from trvalue v
 inner join TRProp P on 
       p.code = v.Code and p.PropType = 'A'
 inner join TRMaster m on 
       m.Year = v.Year and m.Parcel = v.parcel and m.Deleted = 0
 where v.Year = 2012 
 group by m.district, p.tc233
having MAX(v.currentmarket) > 0
 order by m.district, p.tc233 
```

我想一两个子选择是必要的！如果需要更多信息，请询问，我会尽我所能。

任何想法表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:55:29.327

这给出了您需要的结果，但我不确定它是否完全正确：

```
;With RatedMarkets as (
   select *,ROW_NUMBER() OVER (PARTITION BY Parcel ORDER BY Market desc) as rn
  from TRValue
)
select
  m.District,
  p.tc233,
  COUNT(*)
from
  TRMaster m
    inner join
  RatedMarkets rm
    on
      m.Parcel = rm.Parcel and
      rm.rn = 1
    inner join
  TRProp p
    on
      rm.PropCode = p.PropCode
group by
  m.District,p.tc233 
```

[SQLFiddle](http://sqlfiddle.com/#!3/b075e/3)

# c# - 如何打印和打印预览对话框显示？

> ID：14272845
> 
> 赞同：0
> 
> 时间：2013-01-11T06:24:52.303
> 
> 标签：c#

我为大学创建了一个网络应用程序。我想在学生的打印结果中添加打印和打印预览按钮。哪些类用于打印表单？

我的打印和打印预览按钮编码如下：

```
protected void btnprint_Click(object sender, EventArgs e)
{
    if (this.gridcontrol != null)
    {
        GridPrintDocument gpd = new GridPrintDocument(this.gridcontrol, true);

        PrintDialog pritdlg = new PrintDialog();
        pritdlg.Document = gpd;

        if (pritdlg.ShowDialog() == DialogResult.OK)
            gpd.Print();
    }
    else
    {
        lblstatus.Text="An error occurred attempting to print the grid ";
    }
}

protected void btnprntprew_Click(object sender, EventArgs e)
{
    if (this.gridcontrol != null)
    {
        //Uses the default printer.
        GridPrintDocument gpd = new GridPrintDocument(this.gridcontrol, true);
        PrintPreviewDialog pripredlg = new PrintPreviewDialog();
        pripredlg.Document = gpd;
        pripredlg.ShowDialog();
    }
    else
    {
        lblstatus.Text = "An error occurred attempting to preview the grid ";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:30:31.270

当您将问题标记为 C# 时，因此在 C# 中 printDialog 和 printPreviewDialog 是执行代码的选项。

```
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{

           e.Graphics.DrawString(richTextBox1.Text, richTextBox1.Font, Brushes.Black, 100, 20);  //richtextbox1 contains what you want to print

           e.Graphics.PageUnit = GraphicsUnit.Inch;          

}

private void btnPrint_Click(object sender, EventArgs e)

{

            //PrintDialog associate with PrintDocument;

            printDialog1.Document = printDocument1;

            if (printDialog1.ShowDialog()==DialogResult.OK)
            {
                printDocument1.Print();
            }
}

private void btnPrintPreview_Click(object sender, EventArgs e)
{
       //Associate PrintPreviewDialog with PrintDocument.

        printPreviewDialog1.Document = printDocument1;  

        // Show PrintPreview Dialog

        printPreviewDialog1.ShowDialog();
} 
```

您可以在 Asp.net 中查看本教程是否需要它

*   [在 ASP-NET 中动态创建打印预览页面](http://www.codeproject.com/Articles/13795/Creating-print-preview-page-dynamically-in-ASP-NET)

# java - java中的用户线程和守护线程有什么区别？

> ID：14272850
> 
> 赞同：25
> 
> 时间：2013-01-11T06:25:24.067
> 
> 标签：java, thread-safety, jvm

> **可能重复：**
> [java](https://stackoverflow.com/questions/2213340/what-is-daemon-thread-in-java)
> [中的守护线程是什么守护线程什么时候有用？](https://stackoverflow.com/questions/7067578/when-are-daemon-threads-useful)

我对 Java 中用户线程和守护线程之间的区别感到困惑。

你能告诉我吗：

1.  Java中的用户线程和守护线程有什么区别？
2.  在什么情况下会使用守护线程？你能给我一些例子吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-11T06:28:50.130

一旦最后一个非 jvm 线程终止，JVM 将退出。这意味着如果您创建的任何线程仍在运行，jvm 将不会关闭。守护线程是不会阻止 JVM 关闭的线程。通常，您会将它们用于一些后台任务，如果用户要求将其关闭，您不希望让应用程序保持正常运行。

另外，您的问题已经在这里被问过（并得到了回答）—— [Java 中的守护线程是什么？](https://stackoverflow.com/questions/2213340/what-is-daemon-thread-in-java)

守护线程的一些常见（根据个人经验）用例可能包括

*   轮询远程系统以获取状态更改的后台线程
*   后台工作线程（例如发送电子邮件通知、snmp 等）
*   用于执行计划维护的自定义计时器线程

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T06:45:50.683

**第二个问题：**

当所有正常线程都已终止时，守护程序线程会自动终止。

您可以使用守护线程在您的应用程序中进行一些内务管理或清理。守护线程用于后台支持任务，仅在正常线程执行时才需要。**GC线程是一个守护线程。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T06:46:51.117

用户线程是由应用程序（用户）创建的线程，并且在大多数情况下，Java VM 会创建一个守护线程来为用户线程提供服务。当用户线程退出时，VM 会区分线程是用户还是守护程序。如果用户线程退出，VM 将检查是否有任何其他用户线程正在运行。如果有，它将安排下一个线程（用户或守护程序）。如果没有其他用户线程在运行，而只有守护线程，则该 VM 实例也将退出。

这两种线程的区别很简单：如果 Java 运行时确定应用程序中运行的唯一线程是守护线程（即不存在用户线程），Java 运行时会立即关闭应用程序，有效地停止所有守护线程死在他们的轨道上。为了让应用程序继续运行，它必须始终具有至少一个活动用户线程。在所有其他方面，Java 运行时以完全相同的方式处理守护线程和用户线程。

# java - 尝试在 java 中使用 protobuf 发送和接收消息，但出现错误：协议消息包含无效标签（零）

> ID：14272852
> 
> 赞同：6
> 
> 时间：2013-01-11T06:25:38.527
> 
> 标签：java, protocol-buffers

问题发生在服务器端， parseDelimitedFrom() 调用。

客户端：

```
 C2SGainCard.Builder s = C2SGainCard.newBuilder();
    C2SGainCard c2s = s.build();

    GameRequest.Builder  reqBuilder=GameRequest.newBuilder();
    reqBuilder.setBody(c2s.toByteString());
    reqBuilder.setName(C2SGainCard.class.getSimpleName());
    reqBuilder.setPlayerId("3");
    GameRequest request=reqBuilder.build();

    DataOutputStream os = new DataOutputStream(socket.getOutputStream());
    os.write(request.toByteArray());
    os.flush();
    os.close();
    socket.close(); 
```

服务器端：

```
 try{
        DataInputStream is = new DataInputStream(socket.getInputStream());
        GameRequest gameRequest = GameRequest.parseDelimitedFrom(is);
    }catch(Exception ex){
        System.out.println(ex.getMessage());
    } 
```

这是另一个类似的问题：

客户端：

```
 C2SSell.Builder s = C2SSell.newBuilder();
    CardOnSell.Builder cardOnSell = CardOnSell.newBuilder();
    cardOnSell.setId(1);
    cardOnSell.setPlayerId(3);
    cardOnSell.setCardId(1);
    cardOnSell.setCurrentPrice(111);
    cardOnSell.setFixedPrice(555);
    cardOnSell.setDescription("cao");

    s.setCardOnSell(cardOnSell.build());

    C2SSell c2s = s.build(); 
```

套接字处理是相同的。

服务器端：

```
 DataInputStream is = new DataInputStream(socket.getInputStream());
    byte[] b = new byte[1024];
    int len=is.read(b);
    String as = new String(b, 0, len);
    GameRequest gameRequest=GameRequest.parseFrom(as.getBytes()); 
```

事实证明，服务器端将在 parseFrom() 再次调用时中断。但是当我评论两行时：

```
cardOnSell.setCurrentPrice(111);
cardOnSell.setFixedPrice(555); 
```

在客户端，parseFrom() 调用正常工作。起初我怀疑.proto文件有问题，并且已经证明那里没有问题......那么这个问题是怎么来的？是因为我在调用 parseFrom() 之前错过了一些数据吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T06:42:54.057

我不记得确切的格式`parseDelimitedFrom`期望，但我*怀疑*你只是想`parseFrom`在你的服务器端。

目前尚不清楚您为什么要使用`os.write(request.toByteArray())`，或者确实为什么要创建`DataOutputStream`. 你应该能够使用`OutputStream`和`InputStream`，写作：

```
request.writeTo(socket.getOutputStream()); 
```

接着：

```
GameRequest gameRequest = GameRequest.parseFrom(socket.getInputStream()); 
```

如果您*确实*想要分隔版本，则需要`writeDelimitedTo`改用。

# ruby-on-rails - Rails：删除选择标签中的空值

> ID：14272857
> 
> 赞同：0
> 
> 时间：2013-01-11T06:26:02.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我的表单选择标签：

```
<%= f.select(:example_name, ModelName.all.collect {|p| [ p.example_name, p.example_name ] }, {:include_blank => 'Select Example'}) %> 
```

这将返回模型 ModelName 的所有 example_name。但是模型在数据库中存储了空值。

因此，我希望 select 标记仅检索保留空值或 nil 值的有效条目。

我们该怎么做呢。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:28:45.677

尝试

```
<%= f.select(:example_name, ModelName.where("example_name IS NOT NULL && example_name != ''").collect {|p| [ p.example_name, p.example_name ] }, {:include_blank => 'Select Example'}) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:28:56.137

您可以更改您的查询

```
ModelName.all 
```

到

```
ModelName.where("example_name <> ''") 
```

这将省略**和** `NULL`值`""`。

**注意**将查询直接放在视图中是不好的做法；一般不需要它。该查询应在控制器操作的分配中使用。

```
@select_options = ModelName.where(... 
```

然后在你看来

```
<%= f.select(:example_name, @select_options.collect { [... 
```

可以说，您甚至也应该`collect`采取行动。

# windows - 关于 Vim 的三个问题

> ID：14272858
> 
> 赞同：3
> 
> 时间：2013-01-11T06:26:05.160
> 
> 标签：windows, file, vim, command-line, directory

我是所谓的“最佳文本编辑器”Vim 的新手，我正在努力熟悉它可以执行的操作。我遇到的一些问题真的很奇怪；我希望有人可以在这些方面给我一些帮助：

1.  当我输入 gVim 并键入`:cd.`时，提示显示我在`C:\Windows\System32`. 为什么是这样？我将 Vim 安装在`E:\Vim`. 是否可以将此默认目录更改为其他目录？

2.  有没有什么方法可以在 Vim 中指定一个目录并在指定的目录中创建一个文件（当然是使用 Vim，而不是在命令行窗口中运行类似的东西`vim someName.txt`）？当我尝试过类似的命令时`:e someFileName.txt`，我收到有关某些交换文件的错误警告。另外，如果我搜索这个`someFileName.txt`，位置真的很奇怪——它在下面`C:\Users\MyUserName\AppData\Local\Temp`。为什么？

3.  这更奇怪：在 Windows 中，默认的命令行目录是`C:\Users\MyUserName`. 我不喜欢这样，所以我把它改成了`C:\`。但是，如果我按下开始按钮，键入`cmd.exe`，然后按下`Enter`，命令行窗口仍然显示我在`C:\Users\MyUserName`. 如果我单击任务栏中的快捷方式图标，则目录正确（`C:\`）。此外，如果我进行这样的更改，并在命令行中运行 Vim，每次关闭文件时都会收到错误警告：

    ```
    can't write viminfo file C:\_viminfo! 
    ```

经过一番调查，我发现如果我将命令行目录改回`C:\Users\MyUserName`，一切都很好，并且`viminfo`在该目录下创建了一个名为的文件。那么它为什么要这样做呢？Vim 不能像在 中那样在`viminfo`下创建这个文件吗？`C:\``C:\Users\MyUserName`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:12:58.890

1.  这是 Windows 上的默认设置。我似乎记得这取决于它是如何安装的。*无论如何，您可以通过在正常*模式下键入以下内容将其更改为您想要的任何内容：

    ```
    :cd <your path> 
    ```

    如果您希望它在会话中保持不变，请创建`$HOME/_vimrc`（如果您还没有）并添加上面不带冒号的行。

2.  您收到有关交换文件的错误消息，因为您在受保护的目录中工作：无法创建交换。上面的答案应该以一般的方式解决这个问题。无论如何，您可以在任何可以写入磁盘的地方编辑文件。在下面的示例中，`~`是您的`$HOME`目录的快捷方式，就像在 UNIX 中一样：

    ```
    :e ~\filename 
    ```

3.  你有写权限`C:`吗？我不是 Windows 用户，所以不要相信我的话，但我认为这*确实*`C:\Users\MyUserName`应该是你的.*`$HOME`*

**   你跑了`vimtutor`吗？这绝对是学习基本编辑命令的最佳方式。

    ***编辑***

    当我们在做的时候……</p>

    *   避免安装太多（或最新趋势）插件。如果您觉得某个插件有用，请在 vim.org 上搜索替代品并进行比较，然后再加入潮流。

    *   同样，避免像瘟疫一样的“分布”。它们改变了太多东西，会把你拖回开悟的道路上。

    *   了解如何使用`:help`. 你的大部分问题的答案都在那里。*

# django - 身份验证在 Django 中不起作用？

> ID：14272859
> 
> 赞同：2
> 
> 时间：2013-01-11T06:26:07.360
> 
> 标签：django, authentication

我有一个登录和身份验证功能，它从表单中获取输入，验证来自数据库的数据，如果正确则返回 right.html，否则返回 wrong.html。密码存储在galaxy_user数据库中，uname的输出为：

```
u'sachitad' 
```

passw 的输出是：

```
u'f8566297ee28e8a3096497070b37b91d24c24243'

 def login(request):
        if request.method == 'POST':
            username = request.POST['username']
            password = request.POST['password']
            u = ''.join(username)
            p = hashlib.sha1(password).hexdigest()
            a = GalaxyUser.objects.values_list('username', 'password')
            uname = a[0][0]
            passw = a[0][1]
            user = authenticate(uname=u, passw=p)

            if user is not None:
                return render_to_response('right.html', context_instance=RequestContext(request))

            else:
                return render_to_response('wrong.html', context_instance=RequestContext(request))

        else:
            return render_to_response('login.html', context_instance=RequestContext(request)) 
```

**编辑：** GalaxyUser 表：

```
 id | create_time         | update_time         | email                         | password                                 | external | deleted | purged | username | form_values_id | disk_usage |
+----+---------------------+---------------------+-------------------------------+------------------------------------------+----------+---------+--------+----------+----------------+------------+
|  1 | 2013-01-11 15:00:30 | 2013-01-11 15:00:30 | user1@gmail.com   | f8566297ee28e8a3096497070b37b91d24c24243 |        0 |       0 |      0 | sachitad |           NULL |       NULL |
|  2 | 2013-01-11 15:01:01 | 2013-01-11 15:01:01 | user2@zurelsoft.com | f8566297ee28e8a3096497070b37b91d24c24243 |        0 |       0 |      0 | saugat   |           NULL |       NULL |
+----+---------------------+---------------------+-------------------------------+------------------------------------------+----------+---------+--------+- 
```

我想使用电子邮件和密码进行身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:14:11.290

Django使用给定的算法（'md5'，'sha1'或'crypt'）将密码存储为给定明文密码和盐的十六进制摘要

authenticate() 采用您在注册用户时提供的密码，而不是它的散列版本。您需要提供验证纯文本密码来验证用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:00:30.033

**authenticate()**接受两个关键字参数，`username`并且`password`.

`user = authenticate(username=u, password=p)`

* * *

编辑：

很难判断问题出在哪里，因为我们没有任何调试信息……您可能在注册功能中错误地注册了用户，因此错误地设置了用户名或密码。这可以解释为什么您被重定向到 wrong.html 页面。以下登录功能适用于我：

```
from django.shortcuts import render_to_response, redirect
from django.http import HttpResponseRedirect
from django.template import RequestContext
from somewhere.forms import LoginForm
from django.contrib.auth import authenticate, login

def Login(request):
    if request.method == 'POST':
        login_form = LoginForm(request.POST) # Bound LoginForm
        if login_form.is_valid():
            username = login_form.cleaned_data['username']
            password = login_form.cleaned_data['password']
            user = authenticate(username=username, password=password)
            if user is not None:
                if user.is_active:
                    login(request, user)
                    return HttpResponseRedirect('/success/')
                else:
                    # user has not been activated...must activate using the following lines:
                    #### request.session['username'] = username
                    #### user.backend = 'django.contrib.auth.backends.ModelBackend'
                    #### user.is_active = True
                    #### user.save()
            else:
                # u_and_p_error = "Username and password did not match"
        else:
            return render_to_response('index.html', {'login_form': login_form}, context_instance=RequestContext(request)) 
```

# wcf - AppHarbor 应用性能优化

> ID：14272860
> 
> 赞同：0
> 
> 时间：2013-01-11T06:26:08.120
> 
> 标签：wcf, web, appharbor

我的 ASP.NET 网站应用程序托管基于 REST 的 WCF 服务并部署在 AppHarbor 上，加载速度太慢。如何优化以获得更好的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:40:44.200

.Net 应用程序在不经常使用时会进入睡眠模式。当第一个请求命中它们时，需要一段时间才能退出“睡眠模式”。这就是为什么我每分钟都使用 pindom 来“ping”我的网站，以保持一切顺利运行。

这是在每次部署和应用程序池回收之后。

# google-maps - 如何使用google api查询路口中的传出路径

> ID：14272861
> 
> 赞同：0
> 
> 时间：2013-01-11T06:26:08.420
> 
> 标签：google-maps, google-maps-api-3

我们正在尝试实施类似 Google Traffic 的软件，该软件会自动引导我们的车辆以最不拥挤的路径驶向目的地。在我们的概念中，我们必须确定哪些路口以及该路口通往的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:03:08.283

Google Maps API 不提供道路网络，除非通过路线服务。

您提议的使用违反了[服务条款](https://developers.google.com/maps/terms)10.2.c

> 10.2 对允许您使用 Maps API 构建的应用程序类型的限制 (c) 禁止导航、自动驾驶车辆控制或企业应用程序。您不得将服务或内容与任何产品、系统或应用程序一起使用，以实现以下任何目的或与之相关：
> 
> (i) 实时导航或路线引导，包括但不限于与用户的传感器设备位置同步的逐向路线引导。
> 
> (ii) 用于自动或自主控制车辆行为的任何系统或功能；或者

# c# - 如何从网页动态设置任何类型的 Web 控件的文本属性

> ID：14272864
> 
> 赞同：0
> 
> 时间：2013-01-11T06:26:35.330
> 
> 标签：c#, asp.net, c#-3.0, web-controls, system.web.ui.webcontrols

我需要从我的网页动态地为任何类型的控件（例如文本框、标签、超链接等）设置文本属性。这是我的代码

```
foreach (string id in List<IdCollection>)
{
Control ctrl = (this.Page.FindControl(id)); // Control should be HtmlGenericControl or WebControl.
ctrl.Text=???(This property is not available for Control Class)..
} 
```

我不需要检查设置文本属性的每个控件类型，如下面的代码

```
if(ctrl is TextBox)
{
((TextBox)ctrl).Text="test";
} 
```

或者

```
 if(ctrl.GetType()==typeof(TextBox))
{
 ((TextBox)ctrl).Text="test";
} 
```

> 有没有其他方法可以将文本属性设置为简单，就像下面的代码一样

```
WebControl wbCntrl=(WebControl)ctrl;
wbCntrl.Tooltip="tooltip"; //// This is possible
wbCntrl.Text="test" ??? //// But this is not possible 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:05:00.857

如果您使用的是 C# 4.0 (VS 2010)，那么您可以使用“动态”关键字：

```
foreach (string id in List<IdCollection>)
{
  dynamic ctrl = (this.Page.FindControl(id)); 
  ctrl.Text = "test";
} 
```

显然，如果您尝试在缺少 Text 属性的控件上执行此操作，您会遇到运行时异常。

# c# - 如何在c#中使用ajax post获取csv文件

> ID：14272867
> 
> 赞同：1
> 
> 时间：2013-01-11T06:26:41.873
> 
> 标签：c#, ajax, asp.net-mvc

js

```
 $.ajax({
    type: "post",
    url: "/Sum/MemberDayCSV",
    data: { Date: date, Detail: detail, ConditionDisplay: conditionDisplay },
    success: function (eg) {
        console.log(eg);
    }
}); 
```

C＃

```
 [HttpPost]
public FileContentResult MemberDayCSV()
{
    string csvContent = "1,2,3,4,5,6";

    return File(new System.Text.UTF8Encoding().GetBytes(csvContent), "application/csv", "sum_member_day.csv"); ;

} 
```

它应该是下载一个csv文件，但什么也没发生。请帮助我，谢谢你的好意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:31:44.260

> 应该是下载一个csv文件，但什么也没发生

您不能使用 AJAX 请求下载文件。问题是 AJAX 请求正在发送到服务器，而您正在客户端上的回调中接收 CSV。但是由于这个回调是在客户端运行的，所以不能提示用户保存文件，更不能直接在文件系统上保存文件。那将是一个巨大的安全漏洞。

相反，您应该做的是为用户提供指向您的控制器操作的单个链接，以便他在单击链接时可以下载 CSV：

```
@Html.ActionLink("Download CSV", "MemberDayCSV", "Sum", null, null) 
```

如果你想将一些参数传递给这个控制器动作，只需使用正确的重载：

```
@Html.ActionLink(
    "Download CSV", 
    "MemberDayCSV", 
    "Sum", 
    new {
        date: "some date",
        detail: "some detail",
        conditionDisplay: "some condition display"
    }, 
    null
) 
```

作为替代方案，您还可以使用指向相同控制器操作的 HTML 表单：

```
@using (Html.BeginForm("MemberDayCSV", "Sum"))
{
    @Html.Hidden("Date", "some date")
    @Html.Hidden("Detail", "some detail")
    @Html.Hidden("ConditionDisplay", "some condition display")

    <button type="submit">Download CSV</button>
} 
```

# ruby-on-rails - 如何在 Rails 开发服务器中禁止将请求记录到 STDOUT？

> ID：14272872
> 
> 赞同：0
> 
> 时间：2013-01-11T06:27:15.030
> 
> 标签：ruby-on-rails, logging

更准确地说，我希望所有`logger.info/debug/etc`消息只显示在 *.log 文件中，而不是控制台窗口中。谢谢。

UPD：
我不想抑制所有控制台输出，例如我想使用`letters`gem 将我自己的输出放到控制台，我也想使用`debugger`不会与`stdout`重定向到`/dev/null`. 我只希望 rails 不向（请求、SQL 查询等）输出`Rails.logger`消息，实际上如果需要，我可以在日志文件中看到此类消息。`stdout``ActiveRecord`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:03:33.037

将以下行放入您的`<environment>.rb`under `config/environments`. 例如，为了开发，以下进入`development.rb`

```
config.logger = Logger.new('/path/to/log/development-nostdout.log') 
```

这会覆盖默认记录器。

# android - 为什么 Eclipse 不在 gen 文件夹中生成“R”？

> ID：14272884
> 
> 赞同：1
> 
> 时间：2013-01-11T06:28:10.147
> 
> 标签：android

好的，这就是我正在做的事情，我正在尝试创建一个非常简单的 android 应用程序，因为这是我第一次尝试遵循来自 hackaday.com 的教程

[http://hackaday.com/2010/07/21/android-development-101-part-3introduction-to-databases/](http://hackaday.com/2010/07/21/android-development-101-part-3introduction-to-databases/)

现在我已经有了所有的代码。唯一的问题是，我在`setContentView(R.layout.activity_main)`. 这是我的代码

```
package com.ernest.randomquotes;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.content.Context;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import com.ernest.randomquotes.R;

public class MainActivity extends Activity {
    **@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
}** 
```

如您所见，我什至导入了，`com.ernest.randomquotes.R`但它仍然返回错误。我还尝试删除 gen 文件夹，因为我在 stackoverflow 中阅读了一些答案，并且对他们有用。我知道`.R`是在 gen 文件夹中生成的，对吗？那么为什么它不为我生成呢？

相信我，我已经研究了几个小时，但我仍然遇到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:32:05.847

尝试关闭项目，重新打开然后构建/清理。如果这不起作用，请重新启动eclipse。希望那会做。另外，如果导入了andriod.R，请检查您的活动文件？这有时会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:33:43.827

不要导入 com.ernest.randomquotes.R .clean 您的项目并重试然后重新启动...尝试两次 clean 和 build ，你会得到

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:19:11.710

当您的 res 文件夹中有问题时，不会生成 gen 文件夹中的 R.java，如果没有显示（有时，它会发生）清理项目并且错误应该会亮起

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:36:21.293

创建新项目后清理或构建您的项目并删除此`import com.ernest.randomquotes.R;`行，因为在创建项目后`R file`不会自动生成。

# php - 返回上一页，PHP 中的标头无法正常工作

> ID：14272887
> 
> 赞同：0
> 
> 时间：2013-01-11T06:28:34.383
> 
> 标签：php, header

我一直在使用标题来更改密码功能，我有多个页面，例如 page1、page2、page3。顶部菜单上的任何地方我都有**更改密码**按钮..所以点击提交后，用户应该重定向到他点击更改密码的同一页面，并显示密码更改成功或失败等消息。

我写的代码就像..

```
header("Location: /".$_SERVER['HTTP_REFERER']."?res=3"); 
```

这是正确的重定向..但是由于 iam 使用***myhost/myproj/mypage.php***它使用双 localhost 进行重定向，例如 不存在的***myhost/myhost/myproj/mypage.php 。***

现在我需要清除我的基本网址，只有它应该像***myhost/myproj/mypage.php一样重定向***

任何建议/解决方案将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:30:29.213

给出完整（绝对）路径或给出正确的相对路径

我想问题是因为你的相对路径不正确

使用 " `../`" OR " `./`"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:31:32.273

尝试，

```
$url = preg_replace('/\?.*/', '',  $_SERVER['HTTP_REFERER']); //To remove query string

header("Location: ".$url."?res=3"); 
```

**注意：**我已从`/`您的语法中删除。

# sql - 如何将表格行转换为特定的格式组

> ID：14272888
> 
> 赞同：-1
> 
> 时间：2013-01-11T06:28:37.713
> 
> 标签：sql, sql-server

我有一张表，我想以 2 种格式输出记录。

在第一个输出中，我希望表格行显示为左右组，您可以在图像中看到。在第二个输出中，我希望行左一右。

我正在使用 SQL Server。

![说明 1](../Images/e5bb1f610c1b9cc1d0adb570330f6a62.png)

![在此处输入图像描述](../Images/84ec5697cbe5ae0130010daf0abd61c0.png)

![在此处输入图像描述](../Images/ce1e9b8b5dbfdf560be6dbef556cf496.png)

我尝试过使用枢轴但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:27:07.053

如果你必须在 T-SQL 中做这样的事情，这是一种方法......

```
----------------------------
--  Display 1
----------------------------
DECLARE @ColBreak INT = 5
;WITH MyTable (SrNo, ItemNo, Qty) AS
(
    SELECT 1, 'A1', 150 UNION ALL
    SELECT 2, 'A2', 100 UNION ALL
    SELECT 3, 'A3', 300 UNION ALL
    SELECT 4, 'A4', 150 UNION ALL
    SELECT 5, 'A5', 100 UNION ALL
    SELECT 6, 'A6', 300 UNION ALL
    SELECT 7, 'A7', 150 UNION ALL
    SELECT 8, 'A8', 100 UNION ALL
    SELECT 9, 'A9', 300 UNION ALL
    SELECT 10, 'A10', 150
)
,Column1 AS
(
    SELECT *
    FROM MyTable T1
    WHERE SrNo  <= @ColBreak
)
,Column2 AS
(
    SELECT *
    FROM MyTable T1
    WHERE SrNo  > @ColBreak
)
SELECT *
FROM Column1 T1
JOIN Column2 T2 ON T1.SrNo + @ColBreak = T2.SrNo

----------------------------
--  Display 2
----------------------------

;WITH MyTable (SrNo, ItemNo, Qty) AS
(
    SELECT 1, 'A1', 150 UNION ALL
    SELECT 2, 'A2', 100 UNION ALL
    SELECT 3, 'A3', 300 UNION ALL
    SELECT 4, 'A4', 150 UNION ALL
    SELECT 5, 'A5', 100 UNION ALL
    SELECT 6, 'A6', 300 UNION ALL
    SELECT 7, 'A7', 150 UNION ALL
    SELECT 8, 'A8', 100 UNION ALL
    SELECT 9, 'A9', 300 UNION ALL
    SELECT 10, 'A10', 150
)
SELECT *
FROM MyTable T1
JOIN MyTable T2 ON T1.SrNo + 1 = T2.SrNo
WHERE T1.SrNo % 2 != 0 
```

# iphone - 如何在IOS 6中获取登录用户的好友好友列表

> ID：14272890
> 
> 赞同：-1
> 
> 时间：2013-01-11T06:28:45.247
> 
> 标签：iphone, objective-c, ios6

在我的应用程序中，我正在使用 FBFriendPickerViewController 登录用户的朋友列表，如果我选择该列表中的任何一个，我就可以显示他的详细信息，例如姓名、ID、位置等。我的问题是，通过使用这些详细信息如何我在我的应用程序中获得了他的（在 FBFriendPickerViewController 中选择的朋友）朋友列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:37:38.583

尝试这个：

```
 NSArray *accounts = [accountStore
                                   accountsWithAccountType:facebookAccountType];
              ACAccount *facebookAccount = [accounts lastObject];
              NSString *acessToken = [NSString stringWithFormat:@"%@",facebookAccount.credential.oauthToken];
              NSDictionary *parameters = @{@"access_token": acessToken};
              NSURL *feedURL = [NSURL URLWithString:@"https://graph.facebook.com/me/friends"];
              SLRequest *feedRequest = [SLRequest
                                        requestForServiceType:SLServiceTypeFacebook
                                        requestMethod:SLRequestMethodGET
                                        URL:feedURL
                                        parameters:parameters];
              feedRequest.account = facebookAccount;
              [feedRequest performRequestWithHandler:^(NSData *responseData,
                                                       NSHTTPURLResponse *urlResponse, NSError *error)
               {
                   NSLog(@"%@",[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
               }];
          }
          else
          {
              // Handle Failure
          } 
```

# apache - 日文字母在我的页面中显示不正确

> ID：14272895
> 
> 赞同：1
> 
> 时间：2013-01-11T06:29:27.897
> 
> 标签：apache, jsp, tomcat

我正在使用 tomcat 5.5.x 版本。部署包含日文字母的 jsp 文件时，在页面中获取垃圾值。即使我尝试在 server.xml 中设置参数 URIEncoding="UTF-8" 并添加到我的jsp文件。但是我仍然面临同样的问题。有没有其他方法可以避免这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:55:27.017

使用的默认编码是 ISO-8859-1。要改用 UTF-8，您可以编写一个`javax.servlet.Filter`来设置请求编码。实际上，Tomcat 已经自带了这样一个示例过滤器。对于 Tomcat 5.x，你可以看看：

```
webapps/servlets-examples/WEB-INF/classes/filters/SetCharacterEncodingFilter.java
webapps/jsp-examples/WEB-INF/classes/filters/SetCharacterEncodingFilter.java 
```

更好的是，如果您使用 Tomcat 5.5.36 或更高版本，过滤器已经可以使用，您只需在 web.xml 中声明它即可。

只需按照此处的说明进行操作：[http ://wiki.apache.org/tomcat/FAQ/CharacterEncoding](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding)

# prolog - 使用 bagof/3 仅用于副作用

> ID：14272898
> 
> 赞同：1
> 
> 时间：2013-01-11T06:30:00.767
> 
> 标签：prolog

在 Prolog 中解决一个非常简单的练习：打印从 1 到 100 的所有数字，但如果数字是 3 的倍数，则打印“Fuzz”，如果是 5 的倍数，则打印“Buzz”，如果两者都打印，则打印“FizzBu​​zz”。

我最终做了以下事情：

```
fizzbuzz :- forall( between(1, 100, X), fizzbuzz(X) ).
fizzbuzz(X) :- ( write_fb(X) ; write_n(X) ), nl.

write_fb(X) :- bagof(_, fb(X), _).
fb(X) :- X rem 3 =:= 0, write('Fizz').
fb(X) :- X rem 5 =:= 0, write('Buzz').

write_n(X) :- write(X). 
```

但是没有任何谓词或控制结构可以避免使用 bagof/3 仅仅因为它的副作用吗？（我总是有点不确定是否只为副作用使用谓词）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-02T23:05:25.300

作为对现有答案的补充，我想展示一个更具**相关性**的解决方案，我希望它能够说明将*声明性*编程范式（例如逻辑编程）应用于这个问题的一些独特好处。

首先，让我们回顾一下任务：

> 打印从 1 到 100 的所有数字，但不是数字，而是打印...
> 
> *   'Fuzz' 如果数字是 3 的倍数
> *   '嗡嗡声'如果是 5 的倍数
> *   和“FizzBu​​zz”（如果两者都有）。

我认为默认的假设是数字仅限于 **整数**。

为简单起见，让我们首先将自己限制为*单个*整数，然后描述该整数与所需输出之间的**关系。**

**使用 Prolog 系统的CLP(FD) 约束**进行声明性整数算术，上述三种情况可以直接转换为 Prolog ：

```
integer_output(N, 'Fuzz') :- N #= 3*_。
integer_output(N, 'Buzz') :- N #= 5*_。
整数输出（N，'FizzBu​​zz'）：- N #= 3*_，N #= 5*_。

```

但这还不是全部，因为这会产生例如：

```
?- integer_output(4, N)。
错误的。

```

因此，我们需要另外一种情况，例如，我们可以将其表述为：

```
整数输出（N，N）：- N mod 3 #\= 0，N mod 5 #\= 0。

```

这只是说明如果其他情况都不适用，我们按*原样*输出数字。由此产生的关系非常普遍。例如，我们可以将它用于**具体**整数：

```
?- integer_output(1, O)。
O = 1。

?- integer_output(3, O)。
O = '绒毛' ;
错误的。

```

*我们也可以用它来编写*单元***测试**，例如：*

 *```
?- integer_output(5, 'Buzz' )。
真的 。

```

在这里，预期的输出*已经指定*，我们可以使用*相同的*关系来询问输出*是否*符合要求。这是关系的一个非常好的属性，如果我们只在系统终端上编写输出而不是像上面那样将其显式地作为谓词参数，那么就不会那么容易了。

但还有更多！我们也可以在*另一个方向使用**相同的*关系，例如：“*哪些*整数导致输出？” 这里是：**`Buzz`**

 **```
?- integer_output(I, 'Buzz')。
5*_680#=我。

```

这是对早期测试用例的大规模**概括，可以作为我们已经涵盖所有用例的额外保证。**事实上，我们甚至可以进一步概括这一点，得到**最一般的查询**，询问答案*的一般情况*：

```
?- integer_output(I, O)。
O ='模糊'，
3*_742#=我；
O = '嗡嗡声'，
5*_742#=我；
O = 'FizzBu​​zz',
5*_1014#=我，
3*_1038#=我。

```

让我们对输出进行更多推理。显然，我们期望每个可能的整数的输出都是*唯一确定的，对吧？*让我们通过询问该属性的**反例来****询问 Prolog**是否如此：

 **```
?-差异（O1，O2），
   整数输出（I，O1），
   整数输出（I，O2）。
O1 =“绒毛”，
O2 = '嗡嗡声'，
5*_1046#=我，
3*_1070#=我；
O1 =“绒毛”，
O2 = 'FizzBu​​zz',
5*_1318#=我，
3*_1342#=我，
3*_1366#=我。

```

现在看起来不太好：从上面看，我们已经怀疑*可能*存在*相同*整数 `I`产生两个*不同*的、同样合理的输出`O1`和 的情况`O2`。

事实上，这是一个出现此问题的*具体整数：*

```
?-整数输出（15，O）。
O = '绒毛' ;
O = '嗡嗡声' ;
O = 'FizzBu​​zz' ;
错误的。

```

所以，事实证明，输出*不是*唯一确定的！让我们跟随我们的本能，马上问：

# **这是谁的错？**

## CLP(FD) 限制责任？

事实上，事实证明，使用声明式表述只是**暴露了任务表述中的模糊性**。过早地采用其中一种解决方案不会暴露这个问题。

可能的*意思*是一个任务描述，它在整数和输出之间引入以下关系：

```
integer_output(N, 'Fuzz') :- N #= 3*_, N mod 5 #\= 0。
integer_output(N, 'Buzz') :- N #= 5*_, N mod 3 #\= 0。
整数输出（N，'FizzBu​​zz'）：- N #= 3*_，N #= 5*_。
整数输出（N，N）：- N mod 3 #\= 0，N mod 5 #\= 0。

```

这产生：

```
?- integer_output(15, O)。
O = 'FizzBu​​zz' ;
错误的。

```

其他测试用例仍然按预期工作。

现在，使用此关系作为构建块，使用元谓词很容易将其*提升*到整数*列表*`maplist/3`：

```
嘶嘶声（Ls）：-
        numlist(1, 100, Ls0),
        地图列表（整数输出， Ls0，Ls）。

```

示例查询和回答：

```
?- fizz_buzz(Ls)。
Ls = [1, 2, 'Fuzz', 4, 'Buzz', 'Fuzz', 7, 8, 'Fuzz'|...] ;
错误的。

```

请注意，我们自己并*没有*写任何东西：我们使用 Prolog **顶层**来为我们写东西，并推理**arguments**。

优点很明显：我们可以*再次*为这样的谓词编写测试用例。例如，我们期望以下内容成立，并且确实如此：

```
?- Ls = [1,2|_] , fizz_buzz(Ls)。
Ls = [1, 2, 'Fuzz', 4, 'Buzz', 'Fuzz', 7, 8, 'Fuzz'|...] 。

```

到目前为止，一切都是完全纯净的，可以在各个方向使用。我将根据您的需要*格式化*此类解决方案作为一个简单的练习。

如果您的 Prolog 系统不提供`numlist/3`，您可以使用**`bagof/3`**来获取从 1 到 100 的整数列表，如下所示：

```
?- bagof (L, (L in 1..100,indomain(L)), Ls)。
Ls = [1, 2, 3, 4, 5, 6, 7, 8, 9|...]。

```

因此，`bagof/3`对于这项任务可能很有用，但我不建议将其用于副作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-03T16:30:09.777

而不是`bagof/3`你可以使用[`if/3`](https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/mpg_002dref_002dif.html)，像这样：

```
:- 使用模块（库（聚合），[forall/2]）。
:- 使用模块（库（之间），[之间/3]）。

嘶嘶声：-
   forall（介于（1,100，Z），fizzbuzz（Z））。

嘶嘶声（Z）：-
   forall( if(integer_fb(Z,X), true, Z=X) , write(X)),
   写（' '）。

integer_fb(Z, 'Fizz') :- Z rem 3 =:= 0。
integer_fb(Z, 'Buzz') :- Z rem 5 =:= 0。

```

使用 SICStus Prolog 4.4.0 的示例输出：

```
| ?- fizzbuzz.
1 2 Fizz 4 Buzz Fizz 7 8 Fizz Buzz 11 Fizz 13 14 FizzBuzz 16 17 Fizz 19 Buzz Fizz 22 23 Fizz Buzz 26 Fizz 28 29 FizzBuzz 31 32 Fizz 34 Buzz Fizz 37 38 Fizz Buzz 41 Fizz 43 44 FizzBuzz 46 47 Fizz 49 Buzz Fizz 52 53 Fizz Buzz 56 Fizz 58 59 FizzBuzz 61 62 Fizz 64 Buzz Fizz 67 68 Fizz Buzz 71 Fizz 73 74 FizzBuzz 76 77 Fizz 79 Buzz Fizz 82 83 Fizz Buzz 86 Fizz 88 89 FizzBuzz 91 92 Fizz 94 Buzz Fizz 97 98 Fizz Buzz 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:29:29.253

aggregate(count, fb(X), C) 允许计算解决方案，但基于 bagof，因此构建列表只是为了计算元素。然后我写了一个可重用的“积木”，早于 call_nth/2，来自[这个](https://stackoverflow.com/a/11400256/874024)@false 答案

```
:- meta_predicate count_solutions(0, ?).

count_solutions(Goal, C) :-
    State = count(0, _), % note the extra argument which remains a variable
    (   Goal,
        arg(1, State, C1),
        C2 is C1 + 1,
        nb_setarg(1, State, C2),
        fail
    ;   arg(1, State, C)
    ). 
```

“应用”代码变为

```
:- use_module(uty, [count_solutions/2]).

fizzbuzz :- forall( between(1, 100, X), fizzbuzz(X) ).
fizzbuzz(X) :-
    ( count_solutions(fb(X), 0) -> write(X) ; true ), nl.

fb(X) :- X rem 3 =:= 0, write('Fizz').
fb(X) :- X rem 5 =:= 0, write('Buzz'). 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T08:15:11.160

您可以使用某种模式匹配：

```
fizzbuzz :-
    forall( between(1, 100, X), fizzbuzz(X) ).
fizzbuzz(X) :-
    0 is X rem 15,
    format('~w FizzBuzz~n', [X]).

fizzbuzz(X) :-
    0 is X rem 5,
    format('~w Buzz~n', [X]).

fizzbuzz(X) :-
    0 is X mod 3,
    format('~w Fizz~n', [X]).

fizzbuzz(X) :-
    write(X), nl. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-30T11:56:19.660

我采用@Kintalken 的想法，只需对您的原始代码进行最小的更改即可达到此解决方案：

```
fizzbuzz :-
    forall( between(1, 100, X),
        (   fizzbuzz(X, Output),
            format("~w~n", [Output])
        )).

fizzbuzz(X, Output) :-
    (   bagof(Y, fb(X, Y), Ys)
    ->  atomic_list_concat(Ys, Output)
    ;   X = Output
    ).

fb(X, 'Fizz') :- X rem 3 =:= 0.
fb(X, 'Buzz') :- X rem 5 =:= 0. 
```

您问题中代码的唯一变化是，首先我收集解决方案，然后仅在一个地方打印，而不是作为收集的谓词的副作用，`bagof`因此您不再需要在内部产生副作用`bagof`。

此外，正如您现在看到的，打印在第二个参数中，`forall`以便清楚地知道副作用发生在哪里，而不是隐藏在其他地方，并且该程序的所有副作用恰好有一个位置，而不是分散在不同谓词的子句之间。

另一件事是，我没有使用连词，不是因为它有任何不同，而是因为它传达了使用来收集解决方案或在没有解决方案时做其他事情的`->`意图。`bagof`当我阅读您的问题和答案以及对答案的评论时，这是讨论的一部分吗？

我不知道如何准确缩进`forall`. 我缩进的方式看起来可能还可以，但可能根本不行。`between`和`fizzbuzz`和`format`现在对齐但只是`fizzbuzz`和`format`应该对齐，但`between`偶然对齐所以这不是故意的，也许它令人困惑，但我不喜欢这样的东西

```
forall(
    between(1, 100, X),
    (   fizzbuzz(X, Output),
        format("~w~n", [Output])
    )) 
```

因为 then`forall(`一个人在整条线上看起来很孤独，没有任何东西可以帮助它在悲伤的小开口时感到不那么孤独。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T18:46:34.207

我......我会做类似的事情：

```
fizzbuzz( X , Y ) :-
  X =< Y ,
  R3 is X % 3 ,
  R5 is X % 5 ,
  map( R3 , R5 , X , V ) ,
  write(V) ,
  nl ,
  X1 is X+1 ,
  fizzbuzz( X1 , Y )
  .

map( 0 , 0 , _ , fizzbuzz ) :- ! .
map( 0 , _ , _ , fizz     ) :- ! .
map( _ , 0 , _ , buzz     ) :- ! .
map( _ , _ , X , X        ) :- ! . 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T11:09:18.337

好吧，您已经在使用它了；`forall/2`：

```
write_fb(X) :-
    forall(fb(X), true). 
```

或者，您可以更改问题的表示：

```
write_fb(X) :-
  (X rem 3 =:= 0 -> write('Fizz') ; true),
  (X rem 5 =:= 0 -> write('Buzz') ; true). 
```

当然，在这种情况下，使用`bagof/3`and friends 就可以了，因为生成的列表非常小。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-12T18:37:39.170

我尊敬的同事已经回答了，但你想要“之间”。

您不需要收集解决方案。因为你的直觉是正确的。我怀疑你从类似的东西开始

```
fizzbuzz :-  between(1, 100, N),
             fb(N).

fb(N) :-  N rem 5 =:= 0,  
          N rem 3 =:= 0,
          write(fizzbuzz).

fb(N) :-  N rem 5 =:= 0,    
          write(buzz).

fb(N) :-  N rem 3 =:= 0,
          write(fizz).

fb(N) :-  write(N). 
```

问题在于 fb 不是“坚定的”——你不希望它为你提供多种解决方案，但确实如此——例如，fb(15) 与每个 fb 规则相结合。

解决方案是强制它坚定不移，使用剪切：

```
fizzbuzz :-  between(1, 100, N),
             fb(N).

fb(N) :-  N rem 5 =:= 0,  
          N rem 3 =:= 0,
          !,
          write(fizzbuzz).

fb(N) :-  N rem 5 =:= 0,
          !,    
          write(buzz).

fb(N) :-  N rem 3 =:= 0,
          !,
          write(fizz).

fb(N) :-  write(N). 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-01T13:09:44.330

为什么要滥用`bagof/3`副作用并就此止步？我们也可以滥用循环列表：

```
fizzbuzz :-
        Fizz = [fail,fail,write('Fizz')|Fizz],
        Buzz = [fail,fail,fail,fail,write('Buzz')|Buzz],
        fb(1, 100, Fizz, Buzz).

fb(N, N, _, _) :- !.
fb(N, Last, [F|Fs], [B|Bs]) :-
        (       bagof(_, ( F ; B ), _)
        ->      true
        ;       write(N)
        ),
        nl,
        succ(N, N1),
        fb(N1, Last, Fs, Bs). 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-30T00:00:45.663

问题：

> 打印从 1 到 100 的所有数字，但如果数字是 3 的倍数，则打印“Fuzz”，如果是 5 的倍数，则打印“Buzz”，如果两者都打印，则打印“FizzBu​​zz”。

我认为您遇到有关 bagof 的这种特殊性这一事实表明您的程序中有“气味”。我发现 Prolog 经常发生这种情况。Prolog 实际上是一个非常小的套件，提供的东西不多。随着时间的推移，我了解到，如果我需要一些不在那个最小套件中的东西，或者我的使用似乎背叛了内置功能的预期用途，那么几乎总是因为我当前的“气味”方法。

更多关于“气味”的信息：[https ://en.wikipedia.org/wiki/Code_smell](https://en.wikipedia.org/wiki/Code_smell)

我认为当我们概述您的程序当前需要的程序流程的一般草图时，您当前方法中的“气味”变得很明显：

1.  产生
2.  打印
3.  转换

问题是您在“转换”之前尝试“打印”。您想在“转换”之后“打印”，如下所示：

1.  产生
2.  转换
3.  打印

考虑到这一点，我们可以重写问题陈述：

新问题：

求解所有每个数字：

> 生成从 1 到 100 的每个数字，但将每个数字转换为每个消息，如果每个数字是 3 的倍数，则转换为每个消息“Fuzz”，如果每个数字是 5 的倍数，则转换为每个消息“Buzz”，转换为每条消息“FizzBu​​zz”，如果每个数字都是两者，则打印每条消息。

以下是旨在解决上述问题的程序。

程序列表后面是一个示例查询会话。

```
*/

/* -- prolog setup -- */

:-  ( op(10'1150,'yfx','forall')    )   .

:-  ( op(10'1150,'fy','if') )   .
:-  ( op(10'1140,'yfx','then') )    .
:-  ( op(10'1140,'yfx','else') )    .

(if IF then THEN else ELSE) :- (IF *-> THEN ; ELSE) .
(if IF then THEN) :- (IF *-> THEN ; (throw(false(IF)))) .

term_expansion((if IF then THEN else ELSE),((IF :- THEN *-> (true) ; ELSE)))    .
term_expansion((if IF then THEN),((IF :- THEN *-> (true) ; (throw(false(IF))))))    .

/* -- program -- */

if
(
  program(_)
)
then
(
  (
    if
    (
      generate(NUMBER)
    )
    then
    (
      true
    )
  )
  forall
  (
    if
    (
      transform(NUMBER,MESSAGE)
    )
    then
    (
      if
      (
        accept(NUMBER,MESSAGE)
      )
      then
      (
        if
        (
          echo(NUMBER)
        )
        then
        (
          echo(MESSAGE)
        )
      )
      else
      (
        true
      )
    )
  )
)
.

if
(
  generate(NUMBER)
)
then
(
  between(1,100,NUMBER)
)
.

if
(
  transform(NUMBER,MESSAGE)
)
then
(
  if
  (
    multiple_of_3(NUMBER)
  )
  then
  (
    if
    (
      multiple_of_5(NUMBER)
    )
    then
    (
      MESSAGE='FizzBuzz'
    )
    else
    (
      MESSAGE='Fuzz'
    )
  )
  else
  (
    if
    (
      multiple_of_5(NUMBER)
    )
    then
    (
      MESSAGE='Buzz'
    )
    else
    (
      % this contingency is undefined in the problem statement %
      true
    )
  )
)
.

if
(
  multiple_of_3(NUMBER)
)
then
(
  NUMBER rem 10'3 =:= 10'0
)
else
(
  false
)
.

if
(
  multiple_of_5(NUMBER)
)
then
(
  NUMBER rem 10'5 =:= 10'0
)
else
(
  false
)
.

if
(
  accept(NUMBER,MESSAGE)
)
then
(
  if
  (
    true
  )
  then
  (
    true
  )
  else
  (
    false
  )
)
else
(
  false
)
.

if
(
  echo(MESSAGE)
)
then
(
  if
  (
    writeq(MESSAGE)
  )
  then
  (
    nl
  )
)
.

/*

example query
=============

?-
program(_)
.

3
'Fuzz'
5
'Buzz'
6
'Fuzz'
9
'Fuzz'
12
'Fuzz'
15
'FizzBuzz'
18
'Fuzz'

[ ... and so on as expected ... ]

90
'FizzBuzz'
93
'Fuzz'
95
'Buzz'
96
'Fuzz'
99
'Fuzz'
100
'Buzz'
true.

?- 
```

然而，目前呈现的程序并不能完全产生上述预期的输出。

在上面的程序中有一个标记：

```
 % this contingency is undefined in the problem statement % 
```

在程序 100% 令人满意之前需要解决问题。

使用 swi-prolog 和 yap 进行了测试。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-04-02T18:12:13.000

/*

# 问题陈述

```
解决所有每个数字：生成从 1 到 100 的每个数字，
    但是将每个数字转换为每个消息，
        如果每个数字是 3 的倍数，则进入每个消息“Fuzz”，
        如果每个数字是 5 的倍数，则进入每个消息“Buzz”，
        如果每个数字都是，则进入每个消息“FizzBu​​zz”，
    然后打印每条消息。

```

*/

/*

# 程序

*/

```
 :- use_module(library(clpfd)) .

    :- op(10'1,'yfx','forall') .
    :- op(10'1,'fy','once') .

    (
        program
    )
    :-
    (
        (
            between(1,100,NUMBER)
        )
        forall
        (
            once
            (
                (
                    MESSAGE='FizzBuzz'
                    ,
                    NUMBER rem 10'3 #= 10'0
                    ,
                    NUMBER rem 10'5 #= 10'0
                )
                |
                (
                    MESSAGE='Buzz'
                    ,
                    NUMBER rem 10'5 #= 10'0
                )
                |
                (
                    MESSAGE='Fuzz'
                    ,
                    NUMBER rem 10'3 #= 10'0
                )
                |
                (
                    MESSAGE=_
                )
            )
            ,
            once
            (
                (
                    nonvar(MESSAGE)
                    ,
                    writeq(NUMBER)
                    ,
                    nl
                    ,
                    writeq(MESSAGE)
                    ,
                    nl
                )
                |
                (
                    true
                )
            )
        )
    )
    . 
```

/*

# 测试

在 swi prolog 中测试。*/

```
 ?- program .

    3
    'Fuzz'
    5
    'Buzz'
    6
    'Fuzz'
    9
    'Fuzz'
    10
    'Buzz'
    12
    'Fuzz'
    15
    'FizzBuzz'

    { .e.t.c. | ... as expected ... |  .e.t.c. }

    99
    'Fuzz'
    100
    'Buzz'
    true.

    ?- 
```

*/*****

# android - 如何在 onPost Execute 中对 listview ArrayAdapter 进行编码？

> ID：14272899
> 
> 赞同：0
> 
> 时间：2013-01-11T06:30:11.547
> 
> 标签：android, listview, dialog, android-arrayadapter

我正在尝试在中显示列表视图`onPostExecute`，我尝试以不同的方式进行操作，但无法显示数据。我在 logcat 中没有收到任何错误，也没有看到任何 forceclose。

```
 class LoadAlltopics extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Topic.this);
            pDialog.setMessage("Loading Topics. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }
        protected String doInBackground(String... args) {
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            JSONObject json = jsonParser.makeHttpRequest(url_get_topicid, "GET", params);
            System.out.println("Group Sucess1");

            Log.d("All Groups: ", json.toString());
            System.out.println("Group Success");
            try {
                int success = json.getInt(TAG_SUCCESS);
                System.out.println("Group Success2");
                if (success == 1) {
                    System.out.println("Group Success3");
                    groups = json.getJSONArray(TAG_GROUP);
                    System.out.println("Result Success+++"+groups);
                    for (int i = 0; i < groups.length();i++) {
                        JSONObject c = groups.getJSONObject(i);

                        String tname = c.getString(TAG_TOPICNAME);
                        System.out.println("Checking ::"+tname);
                        //String lname = c.getString(TAG_LEVELNAME);
                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();
                        // adding each child node to HashMap key => value
                        map.put(TAG_TOPICNAME, tname);
                        //map.put(TAG_LEVELNAME,lname);
                        // adding HashList to ArrayList
                        groupList.add(map);
                        tnamelist.add(tname);
                        System.out.println("Topic Sucess");
                    }
                    List<String> newList = new ArrayList<String>(new HashSet<String>(tnamelist));
                    for(int j=0;j<newList.size();j++){
                        List<String> temp=new ArrayList<String>();
                        System.out.println("TopicList Success"+tnamelist);
                        //for(int k=0;k<groupList.size();k++){
                            JSONObject c = groups.getJSONObject(j);
                            String tname = c.getString(TAG_TOPICNAME);
                            //String lname = c.getString(TAG_LEVELNAME);
                            //if(tname.equalsIgnoreCase(newList.get(j).toString())){
                            //      temp.add(lname);
                            System.out.println("Success Success Success :"+tname);
                            }
                        //lnamelist.add(temp);

                }else {             
                    showAlert();
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }
        private void showAlert() {
            // TODO Auto-generated method stub

        }

        protected void onPostExecute(String file_url) {
            super.onPostExecute(toString());
            pDialog.dismiss();
            groupnamelist=new ArrayList<String>(new HashSet<String>(tnamelist));
            System.out.println("List Success :"+tnamelist);
            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                viewList = Topic.this.getLayoutInflater().inflate(R.layout.topic_row, null);
                dialogMarketList = new Dialog(Topic.this);
                dialogMarketList.requestWindowFeature(Window.FEATURE_NO_TITLE);
                dialogMarketList.setContentView(viewList);      
                dialogMarketList.show();
            lvForDialog = (ListView) viewList.findViewById(R.id.ListView);
            ArrayAdapter<String> adapter =(new ArrayAdapter<String>(Topic.this,R.layout.list_row, groupnamelist));
            lvForDialog.setAdapter(adapter);
            //lv = (ListView) findViewById(R.id.ListView);
            //ArrayAdapter<String>adapter=new ArrayAdapter<String>(Topic.this,android.R.layout.simple_list_item_1,groupnamelist);
            //lv.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:13:50.260

试试这个代码：

lv = (ListView) findViewById(R.id.ListView);

lv.setadapter(new ArrayAdapter(Topic.this,R.layout.list_row,groupnamelist));

# ios - 如何唯一标识从 UIImagePickerController 中挑选的 UIImage？

> ID：14272902
> 
> 赞同：0
> 
> 时间：2013-01-11T06:30:16.237
> 
> 标签：ios, uiimage, uiimagepickercontroller, nsfilemanager

我从照片库中选择了一张使用`UIImagePickerController`. 现在我想将该图像保存在文档文件夹中。我也得到了那个文件夹的网址。

问题是我应该为图像分配什么名称以便我可以唯一地识别它？如果我添加带有图像名称的日期时间戳，那么用户可以将两个相同的图像从照片库中以不同的名称保存在文档文件夹中，这是不可取的。

或者是否有一些逻辑来比较两个`UIImage`s 以检查它是否已经存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:43:32.317

一种方法是使用文件 url 的哈希 - 您可以在[https://github.com/rs/SDWebImage/blob/master/SDWebImage/SDImageCache.m中看到它的实现](https://github.com/rs/SDWebImage/blob/master/SDWebImage/SDImageCache.m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:51:07.943

为了比较两个图像，如果它们相同或不同，你可以试试这个。

```
if([UIImagePNGRepresentation(image1) isEqualToData:UIImagePNGRepresentation(image2)])
{
 NSLog(@"Same images");
} 
```

# php - javascript是否获得一次价值？

> ID：14272903
> 
> 赞同：0
> 
> 时间：2013-01-11T06:30:22.617
> 
> 标签：php, jquery, session-variables

我正在使用 codeigniter，我正在结合 jquery。我的问题是我有一个带有不同锚标签的菜单。单击锚标记时，iframe src 已更改，但是当我单击菜单项时，我想检查会话是否已登录，以便我可以将页面重定向到注销。

var 将服务器记录为检查的哨兵值。不幸的是，当我在一个新标签中打开注销时离开主布局，然后单击其他菜单项，记录的值仍然为 1，这意味着 true 和 logged_in。我想就这种方法寻求帮助。

```
 $(document).ready(function(){

        $('a').click(function(event) {

            var logged = "<?php echo $this->session->userdata('logged_in'); ?>";
            alert(logged);

            if(logged == 1)
                $("#frame").attr("src", $(this).attr("id"));    
            else
                window.location.replace("https://www.facebook.com");
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:13:09.923

```
 $(document).ready(function(){

        $('a').click(function(event) {

           var logged =0;    
           $.ajax({
                  type: "post",
                  url: baseurl+"get_seesion_details",
                  async:false,
                  success: function(data, status){
                           logged = data;
                  } 
           });

           if(logged == 1)
               $("#frame").attr("src", $(this).attr("id"));    
           else
               window.location.replace("https://www.facebook.com");
      });
}); 
```

在代码点火器中

```
function get_seesion_detail(){

    $is_logged  = $this->session->userdata('logged_in');
    echo $is_logged;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:42:30.960

是的，php 是超文本预处理器，这意味着服务器会在 js 在您的页面上激活之前处理数据。因此，一旦“logged”设置为 true，它将一直保留到您重新加载页面为止。

您需要使用 ajax 来使您的脚本正常工作。在此处调用 ajax 函数调用：

```
 var logged = get_session_via_ajax_function();
     alert(logged);
     get_session_via_ajax_function(){....your ajax code here...} 
```

“get_session_via_ajax_function()”不是一个真正的函数，只是给你一个想法。

# css - 活动列表项的圆角 div

> ID：14272906
> 
> 赞同：0
> 
> 时间：2013-01-11T06:30:32.100
> 
> 标签：css, rounded-corners

我有以下 html 结构，我使用图像对其应用圆角。tabsLeft 和 tabsRight 类的 div 实现了圆角。选择 li 后，我将向其添加“on”类。当第一个 li 有 .on 类时，左角的颜色也应该改变。当第一个 li 打开时，是否有唯一的 CSS 解决方案来更改 tabsLeft 类的图像？我不能将 tabsLeft 放在任何 li 内，因为并非所有列表项对每个用户都是可见的（任何列表项都可以是第一个）。

```
<div>
<div class="tabsLeft"></div>
<ul class="tabs" id="tabList" runat="server">
   <li id="a" class="on" runat="server"></li>        
   <li id="b" runat="server"></li>        
   <li id="c" runat="server"></li>        
   <li id="d" runat="server"></li>                      
</ul>
<div class="tabsRight"></div>
</div> 
```

CSS -

```
.tabsLeft{background: url('/Home/images/New.PNG') -256px 0px no-repeat; width: 3px;height: 30px;float: left;position: absolute;}

.tabsRight{background: url('/Home/images/New.PNG') -263px 0px no-repeat;width: 3px;height: 30px;right: 0px;} 
```

我想要的第一个活动选项卡上的 Css -

```
{background: url('/Home/images/New.PNG') -248px 0px no-repeat; width: 3px;height: 30px;float: left;position: absolute;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:03:48.600

您可以根据父母的班级状态更改孩子的 CSS，但不能根据孩子的班级状态更改父母的 CSS。并且您不能根据完全不相关元素的类状态更改元素的 CSS。

但是，您可能会尝试将背景放在第一个`LI`本身上。然后，您可以根据自己的班级状态对其进行修改：

```
.tabs > li:first-child { background: url('/Home/images/New.PNG') -256px 0px no-repeat; etc... }
.tabs > li.on:first-child { background-position: -248px 0px; } 
```

（显然，您需要使用样式以使其适合您的情况）

# xml - 使用 XSLT 在 XML 中对相似节点的内容进行分组

> ID：14272908
> 
> 赞同：3
> 
> 时间：2013-01-11T06:30:46.393
> 
> 标签：xml, xslt, xslt-1.0

我正在使用下面的 XML

```
<Root>
<sample>1</sample>
<sample>2</sample>
<sample>3</sample>
<sample>4</sample>
<sample>5</sample>
<sample>6</sample>
</Root> 
```

我想得到如下所示的输出

```
<sample>123456</sample> 
```

我正在使用下面的 XSLT 来获得上面的输出。但我得到这样的输出。

```
<sample>1</sample>
<sample>23456</sample>
<sample>2</sample>
<sample>3456</sample>
<sample>3</sample>
<sample>456</sample>
<sample>4</sample>
<sample>56</sample>
<sample>5</sample>
<sample>6</sample
><sample>6</sample>
<sample></sample> 
```

这是我尝试过的 XSL 代码：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="sample">
<presample>
<xsl:value-of select="."/>
<xsl:variable name="code" select="following-sibling::sample" />
<xsl:for-each select="following-sibling::sample">
<xsl:if test="not(preceding-sibling::sample)">
<xsl:value-of select="."/>
</xsl:if>
</xsl:for-each>
</presample>
</xsl:template>
</xsl:stylesheet> 
```

请帮助我更正此 XSLT 以获得上述所需的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:38:58.807

这个怎么样：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="sample[1]">
    <sample>
      <xsl:for-each select=". | following-sibling::sample">
        <xsl:value-of select="."/>
      </xsl:for-each>
    </sample>
  </xsl:template>

  <xsl:template match="sample[position() > 1]" />
</xsl:stylesheet> 
```

我想你的最终目标比这更复杂，所以如果你能详细说明，可能会有更好的通用方法。

不确定这是否是你想要的，但这里有一个潜在的更通用的方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="*[text()[normalize-space(.)] and not(name(preceding-sibling::*[1]) = name())]">
    <xsl:copy>
      <xsl:variable name="list" select=". | following-sibling::*"/>
      <xsl:for-each select="$list">
        <xsl:variable name="pos" select="position()" />
        <xsl:if test="not($list[position() &lt; $pos and name() != name(current())])">
          <xsl:value-of select="."/>
        </xsl:if>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[name(preceding-sibling::*[1]) = name()]" />
  <xsl:template match="text()" />
</xsl:stylesheet> 
```

在此运行时：

```
<Root>
  <sample>1</sample>
  <sample>2</sample>
  <sample>3</sample>
  <sample>4</sample>
  <sample>5</sample>
  <sample>6</sample>
  <child>
    <something>4</something>
    <something>5</something>
    <something>6</something>
    <something>7</something>
    <somethingelse>a</somethingelse>
    <somethingelse>b</somethingelse>
    <somethingelse>c</somethingelse>
    <somethingelse>d</somethingelse>
    <something>8</something>
    <something>9</something>
    <something>10</something>
  </child>
</Root> 
```

产生这个：

```
<sample>123456</sample>
<something>4567</something>
<somethingelse>abcd</somethingelse>
<something>8910</something> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:23:12.640

**这是 Muenchian 分组方法的一个简单应用——一种比使用同级轴更有效的分组方法**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kSampleByVal" match="sample" use="."/>

 <xsl:template match="sample[1]" priority="2">
  <sample>
   <xsl:apply-templates select=
   "../*[generate-id()=generate-id(key('kSampleByVal',.)[1])]/text()"/>
  </sample>
 </xsl:template>
 <xsl:template match="*/*"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（提供的已修改以更具代表性）：

```
<Root>
    <sample>1</sample>
    <sample>2</sample>
    <sample>3</sample>
    <sample>4</sample>
    <sample>5</sample>
    <sample>6</sample>
    <sample>3</sample>
    <sample>4</sample>
    <sample>1</sample>
    <sample>2</sample>
    <sample>3</sample>
</Root> 
```

**产生了想要的正确结果**：

```
<sample>123456</sample> 
```

**请注意**：

**我建议在所有情况下都使用 Muenchian 分组方法而不是兄弟姐妹比较分组。**Muenchian 的时间复杂度为 O(N)，而兄弟比较分组的时间复杂度是二次的 - O(N^2)。我见过兄弟比较分组需要 40 分钟，而 Muenchian 分组只需要 2 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:46:10.950

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="sample[not(preceding-sibling::sample)]">
    <sample>
      <xsl:for-each select=". | following-sibling::sample">
        <xsl:value-of select="."/>
      </xsl:for-each>
    </sample>
  </xsl:template>

  <xsl:template match="sample[preceding-sibling::sample]" />
</xsl:stylesheet> 
```

对于输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <sample>1</sample>
  <sample>2</sample>
  <sample>3</sample>
  <sample>4</sample>
  <dummy1>a</dummy1>
  <dummy2>b</dummy2>
  <dummy3>c</dummy3>
  <dummy4>d</dummy4>
  <sample>5</sample>
  <sample>6</sample>
  <sample>7</sample>
  <sample>8</sample>
</root> 
```

输出将是：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <sample>12345678</sample>
  <dummy1>a</dummy1>
  <dummy2>b</dummy2>
  <dummy3>c</dummy3>
  <dummy4>d</dummy4>
</root> 
```

# python - Python 周数，其中所有周有 7 天，无论年份翻转如何

> ID：14272920
> 
> 赞同：6
> 
> 时间：2013-01-11T06:31:44.593
> 
> 标签：python, mysql, date

我有一个应用程序，我需要测量一年中的周数，并且我希望所有周都有 7 天，无论这些天是否在不同的年份。

例如，我希望从 2012 年 12 月 30 日到 2013 年 1 月 5 日的所有日子都在同一周。

[但这在](http://docs.python.org/2/library/datetime.html)python 中并不直接，因为正如`datetime`文档所述：

```
%U  Week number of the year (Sunday as the first day of the week) 
as a decimal number [00,53]. All days in a new year preceding the 
first Sunday are considered to be in week 0. 
```

我不希望将“第一个星期日之前的新年中的所有日子”视为第 0 周。第 0 周的天数少于 7 天，2012 年的最后一周也是如此。

因此 Python 返回：

```
 import datetime 
 datetime.date(2012, 12, 31).strftime('%Y-%U')
 >>> 2012-53

 import datetime 
 datetime.date(2013, 01, 01).strftime('%Y-%U')
 >>> 2013-00 
```

即使这两天是星期一和星期二，也应该是在同一周，当一周被认为是从星期日开始并在星期六结束时。

相反，我想要反映 MySQL 在模式 2 中所做的功能（[此处](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_yearweek)`yearweek`的文档）。

例如，

```
 mysql> select yearweek('2013-01-01', 2) as week;
 +--------+                                      
 | week   |                                      
 +--------+                                      
 | 201253 |                                      
 +--------+                                      
 1 row in set (0.64 sec) 
```

请注意，即使日期是 2013 年，周也被认为是 201253，保证 2012 年的最后一周为 7 天。

这已经在 Python 中实现了吗？

以下日历供参考：

```
 December 2012     
Mo Tu We Th Fr Sa Su 
                1  2 
 3  4  5  6  7  8  9 
10 11 12 13 14 15 16 
17 18 19 20 21 22 23 
24 25 26 27 28 29 30 
31                   

     January 2013     
Mo Tu We Th Fr Sa Su 
    1  2  3  4  5  6 
 7  8  9 10 11 12 13 
14 15 16 17 18 19 20 
21 22 23 24 25 26 27 
28 29 30 31 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:47:52.900

**isoweek**模块提供了您需要的一切。

从文档中：

```
from isoweek import Week
w = Week(2011, 20)
print "Week %s starts on %s" % (w, w.monday())

print "Current week number is", Week.thisweek().week
print "Next week is", Week.thisweek() + 1 
```

[http://pypi.python.org/pypi/isoweek/1.1.0](http://pypi.python.org/pypi/isoweek/1.1.0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T01:47:50.607

我没有找到本地的方法来做到这一点，所以我只是写了一些非常简单的代码来测试一周是否是第零周，这意味着日期在当年但在第一个完整的开始日期之前当年的一周，等价的日期是在上一年的最后一周。

```
def get_week(date):                                             
    date = datetime.datetime.strptime(date, '%Y-%m-%d')              
    week = date.strftime('%Y%U')     

    if week[-2:] == '00':                                       
        year = week[:-2]                                        
        prev_year = int(year) - 1                                    
        week = datetime.date(prev_year, 12, 31).strftime('%Y%U')
    else:                                                            
        pass                                                         

    return week 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-11T06:51:13.777

我想问一下为什么你需要有自己的周处理逻辑。根本原因是什么？

回到问题。如何通过您自己的代码处理逻辑： yu = datetime.date(2013,1,1).strftime("%Y-%U").split("-") if(int(yu[1]) = = 0): 周 = (datetime.date(2012,12,31).strftime("%Y-%U").split('-'))[1]

# c - 不同 libc 实现中 wprintf() 中“%s”的不同行为

> ID：14272922
> 
> 赞同：1
> 
> 时间：2013-01-11T06:31:51.333
> 
> 标签：c, unicode, printf, glibc, newlib

我注意到虽然

```
#include <stdio.h>
wprintf( L"Hello, %s\n", "world" ); 
```

与 Linux 下的标准 glibc 一起工作，同样的事情与 newlib 的工作方式不同。似乎 newlib 期望那里有 "%s" 的宽字符串，因此可以使用以下方法：

```
wprintf( L"Hello, %s\n", L"world" ); 
```

哪种行为是正确的？这是newlib中的错误吗？另外，有没有办法在 printf 字符串格式说明符中明确指定我想要一个“窄”字符串，而不是一个宽字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:35:02.533

`wchar_t *`宽字符串 ( )的正确格式说明符是`%ls`，对于正常来说，“窄”C 字符串 ( `char *`) 是`%s`。glibc 的实现是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-15T15:06:02.513

`%ls`使用宽字符串的标准方法是正确的，并且`%s`是使用窄字符串的标准方法。我不知道 newlib，但是 Microsoft 的`wprintf`，它也错误地认为`%s`是宽字符串，接受`%hs`显式指定窄字符串。它也适用于 glibc，因为`h`被忽略了。如果您完全针对 MSVC，则可能需要使用`%hs`.

资料来源：[http ://en.chys.info/2009/06/wprintfs/](http://en.chys.info/2009/06/wprintfs/)

# android - ViewPager 中可见的两个片段

> ID：14272927
> 
> 赞同：1
> 
> 时间：2013-01-11T06:32:09.657
> 
> 标签：android, android-fragments, android-viewpager

我在这里阅读了很多很好的信息并取得了很好的进展，但现在卡住了。我当前状态的 Android 项目由一个 ViewPager 和两个使用 Action Bar Sherlock 构建的导航选项卡组成。一个选项卡是 ListFragment，另一个目前只是一个用于测试目的的 Fragment。我想用与 ListFragment 相同的容器中的详细信息片段替换 ListFragment，而不是打开一个新活动。我可以使用此论坛中建议的布局来做到这一点（没有 FrameLayout 包装器，我无法加载详细信息）：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fadingEdge="none" >
    <FrameLayout
        android:id="@+id/main_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
    </FrameLayout>

</RelativeLayout> 
```

单击列表项时，我使用对主 Activity 的回调。

从 ListFragment：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id)  {
    mCallback.onItemSelected(position);     
} 
```

在主要活动中：

```
public void onItemSelected(int position)  {     

    TestDetailsFragment newFragment = new TestDetailsFragment();
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

    ft.replace(R.id.main_container, newFragment);
    ft.addToBackStack(null);
    ft.commit();        
} 
```

最后，我的 TestDetailsFragment：

```
public class TestDetailsFragment extends SherlockFragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)  {

    View view = inflater.inflate(R.layout.test_layout, container, false);
    return view;
} 
```

}

我的问题是加载详细信息片段时 ListFragment 仍然可见。如果我按“返回”，详细信息文本就会消失。如果我不按回，而是滑动到我的另一个片段，详细信息文本仍然存在。我想如果我可以改变**ft.replace(R.id.main_container, newFragment);** 到**ft.replace(R.id. *containerId of ViewPager page* , newFragment)**它会起作用，但尽管搜索了很多，但我无法弄清楚如何做到这一点。我尝试用以下方式替换列表布局，但也没有用（错误：没有为 *my_list_layout* 找到视图）：**ft.replace(R.id.my_list_layout, newFragment);** 这是 ListFragment 布局的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/my_list_layout"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<ListView android:id="@android:id/list" 
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent" /> 
```

非常感谢您的任何建议。

我真的很陌生（我在这里的第一篇文章），所以我会继续把我的整个主要活动放在这里，以防我遗漏了一些非常明显的东西。谢谢！

```
 import java.util.ArrayList;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.util.Log;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class MainActivity extends SherlockFragmentActivity 
        implements MyListFragment.OnItemSelectedListener  {

ViewPager mViewPager;
TabsAdapter mTabsAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setTitle(R.string.app_name);

    setContentView(R.layout.main);
    ViewPager mViewPager = (ViewPager)findViewById(R.id.pager);

    final ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayShowTitleEnabled(true);
    actionBar.setHomeButtonEnabled(true);
    actionBar.setIcon(R.drawable.ic_title);

    mTabsAdapter = new TabsAdapter(this, mViewPager);
    mTabsAdapter.addTab(actionBar.newTab().setText("tab1"), MyFragment.class, null);
    mTabsAdapter.addTab(actionBar.newTab().setText("tab2"), MyListFragment.class, null);
    if (savedInstanceState != null)  {
        actionBar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
    }        
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getSupportActionBar().getSelectedNavigationIndex());
}

public void onItemSelected(int position)  {     

    TestDetailsFragment newFragment = new TestDetailsFragment();
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.main_container, newFragment);
    ft.addToBackStack(null);
    ft.commit();        
}

public static class TabsAdapter extends FragmentStatePagerAdapter
    implements ActionBar.TabListener, ViewPager.OnPageChangeListener  {

    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo  {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args)  {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount()  {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position)  {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, 
            int positionOffsetPixels)  {
    }

    @Override
    public void onPageSelected (int position)  {
        mActionBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state)  {          
    }

    @Override
    public int getItemPosition(Object object)  {
        return PagerAdapter.POSITION_NONE;
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft)  {
        Object tag = tab.getTag();
        for (int i=0; i<mTabs.size(); i++)  {
            if (mTabs.get(i) == tag)  {
                mViewPager.setCurrentItem(i);
            }
        }

    }

    @Override 
    public void onTabUnselected (Tab tab, FragmentTransaction ft)  {

    }

    @Override
    public void onTabReselected (Tab tab, FragmentTransaction ft)  {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:33:41.103

> 我的问题是加载详细信息片段时 ListFragment 仍然可见

这是正常的，因为您用于替换它们之间的片段的代码将新的详细信息片段放入`FrameLayout`其中还包含您的`ViewPager`（带有相应的`ListFragment`），它不会被删除。

> 我想如果我可以改变 ft.replace(R.id.main_container, newFragment); 到 ft.replace(R.id.containerId of ViewPager page, newFragment) 它会起作用，但尽管搜索了很多，但我无法弄清楚如何做到这一点。

是的，这将是一个选择。我建议您使用新的嵌套`Fragments`API（可用于兼容包或普通`Fragments`API 16+）。如果您只想`ListFragment`用新的详细信息替换`Fragment`（这样您就可以保留额外`Fragment`的`ViewPager`+ 滑动到它的能力），然后执行以下操作：

*   在您当前使用的地方，`ListFragment`您将放置一个简单的包装器`Fragment`（其布局为 simple `FrameLayout`），另一个`Fragment`将`ViewPager`保持不变
*   在开始时使用`getChildFragmentManager()`包装器`Fragment`中的添加正常`ListFragment`
*   使包装片段实现您的回调接口。要获取对父级的引用，`Fragment`您可以使用中的`getParentFragment()`方法`ListFragment`并将其转换为您的侦听器
*   在包装器`Fragment`将实现的回调中，使用. 替换`ListFragment`为详细信息。`Fragment``FrameLayout`

如果您希望详细信息`Fragment`替换`ViewPager`( 将它的两个片段放在一起)，则修改 的布局，`Activity`使其只有 a `FrameLayout`，您将向其中添加`Fragment`包含 the`ViewPager`或 details的 a `Fragment`。

# r - 使用 R 进行时间序列预测

> ID：14272937
> 
> 赞同：7
> 
> 时间：2013-01-11T06:32:58.210
> 
> 标签：r, time-series, regression, linear-regression, forecasting

我有以下 R 代码

```
library(forecast)
value <- c(1.2, 1.7, 1.6, 1.2, 1.6, 1.3, 1.5, 1.9, 5.4, 4.2, 5.5, 6, 5.6, 
6.2, 6.8, 7.1, 7.1, 5.8, 0, 5.2, 4.6, 3.6, 3, 3.8, 3.1, 3.4, 
2, 3.1, 3.2, 1.6, 0.6, 3.3, 4.9, 6.5, 5.3, 3.5, 5.3, 7.2, 7.4, 
7.3, 7.2, 4, 6.1, 4.3, 4, 2.4, 0.4, 2.4)

sensor<-ts(value,frequency=24)
fit <- auto.arima(sensor)
LH.pred<-predict(fit,n.ahead=24)
plot(sensor,ylim=c(0,10),xlim=c(0,5),type="o", lwd="1")
lines(LH.pred$pred,col="red",type="o",lwd="1")
grid() 
```

结果图是 ![预言](../Images/d671f26000d254252b00426fe1149e03.png)

但我对这个预测并不满意。有什么方法可以使预测看起来与之前的价值趋势相似（见图）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T07:37:05.740

当您将频率定义为 24 时，我假设您每个周期使用 24 小时（每天），因此在您的历史数据集中大约有 2 个周期。一般来说，这是启动时间序列预测的有限样本数据。我建议您获取更多数据，然后您可以再次进行预测模型。您拥有的数据越多，它就越能捕捉到季节性，从而预测未来的价值。由于 auto.arima 等可用的自动算法有限，通常默认使用类似于移动平均线的东西。您的数据集应该得到比移动平均线更好的东西，因为周期中有一些季节性。有许多预测算法可以帮助您更好地塑造远期曲线；Holt-Winters 或其他指数平滑方法可能会有所帮助。然而，自动。

获取更多数据并执行相同的例程将改善您的图表。就个人而言，我更喜欢使用`forecast`over `predict`; 数据似乎和图表一样好一点，因为它显示了您的置信区间。在代码中，我还通过复制两个句点稍微扩展了数据集，所以我们得到了四个句点。看下面的结果：

```
library(forecast)
value <- c(1.2,1.7,1.6, 1.2, 1.6, 1.3, 1.5, 1.9, 5.4, 4.2, 5.5, 6.0, 5.6, 6.2, 6.8, 7.1, 7.1, 5.8, 0.0, 5.2, 4.6, 3.6, 3.0, 3.8, 3.1, 3.4, 2.0, 3.1, 3.2, 1.6, 0.6, 3.3, 4.9, 6.5, 5.3, 3.5, 5.3, 7.2, 7.4, 7.3, 7.2, 4.0, 6.1, 4.3, 4.0, 2.4, 0.4, 2.4, 1.2,1.7,1.6, 1.2, 1.6, 1.3, 1.5, 1.9, 5.4, 4.2, 5.5, 6.0, 5.6, 6.2, 6.8, 7.1, 7.1, 5.8, 0.0, 5.2, 4.6, 3.6, 3.0, 3.8, 3.1, 3.4, 2.0, 3.1, 3.2, 1.6, 0.6, 3.3, 4.9, 6.5, 5.3, 3.5, 5.3, 7.2, 7.4, 7.3, 7.2, 4.0, 6.1, 4.3, 4.0, 2.4, 0.4, 2.4)
sensor <- ts(value,frequency=24) # consider adding a start so you get nicer labelling on your chart. 
fit <- auto.arima(sensor)
fcast <- forecast(fit)
plot(fcast)
grid()
fcast
         Point Forecast     Lo 80    Hi 80      Lo 95    Hi 95
3.000000       2.867879 0.8348814 4.900877 -0.2413226 5.977081
3.041667       3.179447 0.7369338 5.621961 -0.5560547 6.914950
3.083333       3.386926 0.7833486 5.990503 -0.5949021 7.368754
3.125000       3.525089 0.8531946 6.196984 -0.5612211 7.611400
3.166667       3.617095 0.9154577 6.318732 -0.5147025 7.748892 
```

![四个周期的图表](../Images/edfa89dea463dc62440012cbeb911f99.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-23T15:15:07.097

auto.arima() 根据 AIC、AICc 或 BIC 值返回最佳 ARIMA 模型。根据您的“价值”数据集，它可能选择了 ARMA(1,0) 或 AR(1) 模型，如您所见，它往往会很快恢复到平均值。从长远来看，AR(1) 模型总是会发生这种情况，因此如果您想预测超过几个步骤，它就不是很有用。

您可以通过分析价值数据的 acf 和 pacf 来考虑拟合不同类型的模型。然后，您需要检查您的替代模型是否适合数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:49:09.620

您可能需要考虑使用[移动平均线](http://en.wikipedia.org/wiki/Moving_average)来更准确地绘制预测图。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-08-05T13:01:08.570

[我建议在https://code.google.com/p/ltp/](https://github.com/matteoredaelli/predictoR)上查看ltp 包，您还可以在[https://github.com/matteoredaelli/predictoR](https://code.google.com/p/ltp/) 上查看 Web 前端

# eclipse - 如何在工作区 rcp 中仅显示自定义内容内容？

> ID：14272938
> 
> 赞同：0
> 
> 时间：2013-01-11T06:33:02.987
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

嗨，我正在构建一个基于 RCP 应用程序的应用程序，其中我有一个`Treeviewer`将显示我的自定义项目的应用程序。例如，我应该能够遍历我的文件系统并仅像 eclipse 那样显示

```
c:\Eclipse\RCP\Workspace\(root directory)
       Project\(folder)
         class\(subfolder)
            .app 
```

直到现在我可以创建

```
c:(all subfiles and subfolders)
 d:((all subfiles and subfolders)
 e:(all subfiles and subfolders)
 f:((all subfiles and subfolders) 
```

请让我知道一些站点/书籍，以帮助我开始 RCP 编程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:11:09.997

要寻找的一些想法：

*   添加 Eclipse 文件系统 API（定义 org.eclipse.core.resources），然后您可以使用 IWorkspace 接口访问文件系统，并将其显示在您的树查看器中。如果您使用的是 Common Navigator 框架（[下一篇文章开始介绍该](http://cvalcarcel.wordpress.com/2009/07/08/writing-an-eclipse-plug-in-part-1-what-im-going-to-do/)框架），它具有对此的内置支持。
*   您可以手动选择工作区文件夹，并使用为 TreeViewer 创建的现有内容提供程序，然后从工作区文件夹而不是文件系统根目录启动它。

对于文档，您可以查看[vogella.com 上的教程](http://www.vogella.com/tutorials.html)或有时不是太最新的[Eclipse 资源](http://eclipse.org/resources/)。

# meteor - 设置一个流星服务器来订阅另一个流星服务器？

> ID：14272940
> 
> 赞同：2
> 
> 时间：2013-01-11T06:33:07.650
> 
> 标签：meteor, distributed

Meteor 主要被描述为客户端-服务器架构，客户端通常是面向用户的浏览器甚至本机（移动）应用程序。

**相比之下，设置一个流星服务器作为客户端订阅另一个流星服务器是一种可行的方法吗？**

用例类似于[http://diasporaproject.org/](http://diasporaproject.org/)的分布式方法，即分布式但连接的服务器（“pod”）架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:33:27.517

这似乎是一个有效的概念，但在当前版本中尚不可用。来自 docs.meteor.com/#meteor_connect：**在此版本中，Meteor.connect 只能在客户端上调用。服务器还不能连接到其他服务器。**

*感谢 Rahul 帮助 stackoverflow 新手！*

# c++ - 使用 LoadLibrary 后未调用 DllMain

> ID：14272943
> 
> 赞同：12
> 
> 时间：2013-01-11T06:33:28.470
> 
> 标签：c++, windows, dll

我是一个 C++ 初学者（3-4 个月），我正在尝试对 windows hooking 做精益求精。我有一个我试图注入的 DLL 的错误，过了一会儿我意识到我的 DllMain 没有被调用！我几乎查看了 StackOverflow 上的每个线程，但无法弄清楚我的问题。我通过将变量初始化为 5，在 DllMain 中将其更改为 1 并在函数中输出变量来发现这一点。变量永远不会改变。这是代码：

```
int i = 5;

BOOL APIENTRY DllMain( HANDLE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved  )
{
    i=1;
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        hDll  = (HINSTANCE) hModule;

        break;

    case DLL_THREAD_ATTACH:  break;
    case DLL_THREAD_DETACH:  break;
    case DLL_PROCESS_DETACH:  break;

    }

    return TRUE;
}

bool InstallHook(){
    cout << "INSTALLING HOOK... " << endl;
    cout << i << endl;
    hHook = SetWindowsHookEx(WH_CBT, (HOOKPROC) CBTProc, hDll, 0);
    return hHook != NULL;
} 
```

这是我正在加载的 DLL ......

```
typedef bool (*InstallHook)();
typedef void (*UninstallHook)();
InstallHook ih;
UninstallHook uh;
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {
        case WM_CLOSE:
            DestroyWindow(hwnd);
        break;
        case WM_DESTROY:
            uh();
            PostQuitMessage(0);
        break;
        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    // Bunch of code to initialize a simple window until this: 
    HINSTANCE hDll = LoadLibrary("e:\\projects\\DLL\\ToInject.dll");
    ih = (InstallHook)GetProcAddress(hDll, "InstallHook");
    uh = (UninstallHook)GetProcAddress(hDll, "UninstallHook");
    if (!ih()){
        cout << "SUCCESS" << endl;
    }else{
        cout << "FAILED" << endl;
    }
    // other stuff to create a window
    return Msg.wParam;
} 
```

输出：

```
INSTALLING HOOK... 
5 // We can see here that the DLL never changed the value of i to 1.
SUCCESS
UNINSTALL HOOK... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T07:30:50.343

按照以下步骤制作一个工作示例（这是用于视觉工作室）：

*   创建一个新的控制台应用程序；
*   检查DLL；
*   把它放在 dllmain.cpp 中：

***dllmain.cpp***

```
// dllmain.cpp : Defines the entry point for the DLL application.

#include "stdafx.h"
#include <string>

std::string test = "not Loaded"; 

BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    test = "loaded"; //You also change on this location the value of a variable
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        MessageBoxA(NULL,"test","test",NULL);
        break;
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
}

extern "C" __declspec (dllexport) bool example()
{
    MessageBoxA(NULL,test.c_str(),"test",NULL);
    return true;
} 
```

*   编译代码，确保它处于发布模式；
*   创建一个新的控制台应用程序；
*   检查空项目；
*   创建一个名为 main.cpp 的新文件；
*   将其复制到文件中：

***主文件***

```
#include <windows.h>

typedef bool (*testFunction)();

testFunction dllFunction;

int main()
{

    HINSTANCE hDll = LoadLibraryA("example.dll");
    if(hDll)
    {
        dllFunction = (testFunction)GetProcAddress(hDll, "example");
        dllFunction();
    }

    return 0;
} 
```

*   构建项目，确保它处于发布模式；
*   从控制台应用程序复制您在发布文件夹中创建的 DLL；
*   运行程序。

它在这里工作。我得到一个带有测试和 1 次加载的 MessageBox。您可以将此代码与您的代码进行比较。我希望你能找到问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:39:35.860

我在同一个程序中看到 a`WinMain`和 a 。`cout`请说明您创建的项目类型。

您可以在这里查看一个钩子示例 - [http://www.codeproject.com/Articles/5002/Mousey-Roll-Over-and-Park](http://www.codeproject.com/Articles/5002/Mousey-Roll-Over-and-Park)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-04T06:51:19.527

```
extern "C" BOOL APIENTRY DllMain( HANDLE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved  ) 
```

如果你用 C++ 编译它，你必须在 DllMain 函数的前面添加“ extern "C" "

# java - 禁止触发另一个流口水规则

> ID：14272944
> 
> 赞同：3
> 
> 时间：2013-01-11T06:33:38.320
> 
> 标签：java, drools, jbpm, mvel

嗨，我想在另一组 drools 规则触发时禁用其他一些 drools 规则，你会怎么做？

假设我有一个议程组“每日”，它有两组流口水规则集 A 有规则“Default-1”、“Default-2”、“Default-3” 集 B 有规则“Custom-1”、“自定义 2”、“自定义 3”

当议程组“每日”得到关注，并且当前事实与自定义模式匹配时，我希望仅触发“Custom-1”和/或“Custom-2”和/或“Custom-3”；否则，只有“Default-1”和/或“Default-2”和/或“Default-3”触发。

问题是，Default-1/2/3 总是被解雇。我需要一种在 Custom-1/2/3 中禁用它们的方法。首先，我将 Custom-1/2/3 中的显着性级别设置为高于 Default-1/2/3。然后我尝试使用激活组。但是，如果我将它们全部设置为同一个激活组，则六条规则中只有一条会触发，这不是我想要的。

我不允许更改 .java 模块，该模块每次都会加载所有规则。我只能更改 .drl drools 规则。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T06:40:22.217

您可以尝试使用标记对象解决您的问题。假设你定义了一个 Marker 类：

```
public class Marker {
    String uniqueIdentifier;
    //getter and setter, etc
} 
```

（drools 允许您在 *.drl 代码中定义新类，而无需求助于 *.java）
然后使自定义组在默认组之前运行（显着性可以工作，定义流程也可以工作）并“标记”那些对象通过将新的标记事实插入内存来触发自定义规则，如下所示：

```
when
   SomeObject($unique: someIdentifier)
   //normal conditions
then
   insert(new Marker($unique))
   //normal action 
```

并且默认规则中的 仅作用于没有触发自定义规则的对象：

```
when
   SomeObject($unique: someIdentifier)
   not Marker(uniqueIdentifier = $unique)
   //normal conditions
then
   //normal action 
```

此外，为了防止泄漏，您可能需要第三组（最后）规则来清理：

```
when
   SomeObject($unique: someIdentifier)
   $marker : Marker(uniqueIdentifier = $unique)
then
   retract($marker) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T00:30:57.393

[Drools 使用Declarative Agenda](http://docs.jboss.org/drools/release/6.3.0.Final/drools-docs/html_single/index.html#d0e4932)支持这种行为。

它基本上提供了这种上下文方法：

```
void blockMatch(Match match);
void unblockAllMatches(Match match);
void cancelMatch(Match match); 
```

在规则中阻止其他规则，同时阻止其他规则仍然存在`true`或它们实际上已明确解除阻止。

# google-bigquery - 在 BigQuery 中对具有 DateTime 值的字符串字段进行范围查询

> ID：14272946
> 
> 赞同：1
> 
> 时间：2013-01-11T06:33:47.440
> 
> 标签：google-bigquery

我正在将数据从 csv 文件上传到 bigquery 表。来自 csv 的每条记录都包含日期时间字段值，我将这些值作为字符串存储到 BigQuery 表字段中。当我查询这些日期时间字段以获得所需的范围（如 dateField > '2013-01-01 00:00:00' 和 dateField < '2013-01-10 00:00:00'）时，我得到错误的结果。

我尝试使用 TimeStamp 函数，但没有运气。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:22:57.770

我解决了问题：-

当我使用 datetime(YYYY-MM-DD HH:MM:SS) 值生成 csv 文件时，我使用 C# 的代码块将此值转换为 POSIX 值（UNIX 时间戳）：-

```
 protected string convertDateTimeToPOSIX(string strDateTime)
        {
            string strPOSIX = "";
            DateTime dtmDateTime = DateTime.Parse(strDateTime);
            DateTime dtmEpoch = new DateTime(1970, 1, 1, 0, 0, 0, 0);
            TimeSpan objTSpan = (dtmDateTime - dtmEpoch);
            strPOSIX = objTSpan.TotalSeconds.ToString();
            return strPOSIX + "000000";
        } 
```

所以例如。如果 strDateTime = "16-03-2011 23:51:17" 那么它的 POSIX 值将变为 "1300319477000000"

文件上传后，我使用 Web 界面查询 Big Query：-

```
 SELECT Col1, Col2, Col3, FORMAT_UTC_USEC(POSIX_DateTime) DATE FROM [Dataset.tableName] 
    WHERE POSIX_DateTime > PARSE_UTC_USEC('2013-01-01 00:00:00') AND POSIX_DateTime < PARSE_UTC_USEC('2013-01-11 00:00:00')
    ORDER BY DATE 
```

# css - 无法删除 Facebook 按钮后面的白色背景

> ID：14272950
> 
> 赞同：0
> 
> 时间：2013-01-11T06:34:19.473
> 
> 标签：css, facebook, internet-explorer-8

我看到一个奇怪的问题。我在这个网站[http://goo.gl/pR8S0](http://goo.gl/pR8S0)上看到 Facebook 分享/链接按钮后面的白色背景，仅适用于 IE8。在其他浏览器中似乎还不错。我无法确定它是从哪里获得白色背景的。不应有白色背景。相反，我需要它是蓝色的#00AEEF 背景颜色。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:21:55.293

我找到了答案。使用 allowtransparency="true" 让 IE 表现得更好，就像其他浏览器一样，问题在 IE8 中得到解决。因为它是为 IE8 解决的，所以我有希望猜到它也适用于 IE9。

# magento-1.7 - 在 magento 中，无法通过 REST URL 获取图像 url

> ID：14272954
> 
> 赞同：2
> 
> 时间：2013-01-11T06:34:37.420
> 
> 标签：magento-1.7, magento-1.4, magento-1.5, magento

我正在使用 magento 通过 REST url 作为 localhost/magento/api/rest/products 获取产品列表。在这个列表中，我得到了 image_url 节点。但是当我将图像 url 提供为 localhost/magento/api/rest/products/166/images 时，它显示“magento_api/”.. 就是这样。没有关于图片网址的更多信息..

那么如何通过 URL 获取图像详细信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:07:34.517

如果图像在那里，它应该显示三个图像，[在这里](http://postimage.org/image/6zt1aih1t)，并确认其他图像被选中或不检查这个...[管理面板](http://postimage.org/image/5nhcwm0j1)

也可以参考这个在产品[维基上传图片](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-products)

# groovy - 在 Geb 中，如何将输入列表分配给 HTML 输入实体列表

> ID：14272955
> 
> 赞同：1
> 
> 时间：2013-01-11T06:34:43.287
> 
> 标签：groovy, spock, geb

我有一个问题，我有一个 CSS 选择器，它返回一个输入对象列表（所有文本输入），我想轻松地为它们设置值。

我希望能够做这样的事情：（假设 addressTextFields 是只有 html 文本输入的集合）

// 目前这会将每个字段分配为字符串 "["New","Belgium",".........

`addressTextFields = ["New", "Belgium", "500 Linden Street", "Suite 200", "Fort Collins", "98026", "970-111-2222"]` 或者

// 无法编译，因为 ArrayList 和 WebElement 之间的转换是不可能的...不过，我喜欢这种语法 :-)

`addressTextFields << ["New", "Belgium", "500 Linden Street", "Suite 200", "Fort Collins", "98026", "970-111-2222"].each { it -> it }`

关于如何为文本字段赋值的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:16:13.543

通过在输入字段列表上使用 = 和 << 运算符而不是单个输入字段，您尝试将 addressTextFields 列表设置为 ["New", "Belgium", ...] 或添加 [" New", "Belgium", ... ] 到 addressTextFields 列表。

您真正想要做的是将每个元素作为值分配给文本字段：

```
def values = ["New", "belgium", … ]
addressTextFields.eachWithIndex { input, i -> input = values[i] } 
```

如果您使用模块或页面，您可以轻松地在模块或页面级别上创建一个方法，该方法将字符串列表作为输入并将每个值分配给相应的文本输入字段。

```
// Module or page method
def setTextFieldValues(List values) {
   addressTextFields.eachWithIndex { input, i -> input = values[i] }
}

// From within test
setTextFieldValues(["New", "Belgium", … ]) 
```

# android - 水平滑动不同的列表视图

> ID：14272957
> 
> 赞同：1
> 
> 时间：2013-01-11T06:34:48.647
> 
> 标签：android, listview, gallery

我想实现两个垂直列表视图 A 和 B，这样一次只有一个可见，水平滚动显示下一个列表。

我希望滚动平滑，即当您按下并移动手指时，当前列表会随之移动，而新列表也会随之移动……在画廊中移动图像时的效果。

我已经能够滚动视图，并且使用翻译动画能够显示平滑过渡，但我想要实现的是类似画廊的效果。

因此水平滚动切换 bw diff 列表视图和垂直滚动可用于滚动列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:39:36.007

您可以使用 ViewPager 来完成此操作。 [http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

</LinearLayout> 
```

MainActivity.java

```
....

onCreate()...
 mViewPager = (ViewPager) findViewById(R.id.pager);

            mViewPager.setAdapter(new HomePagerAdapter(getSupportFragmentManager()));
//If your Activity implements ViewPager.OnPageChangeListener
  //          mViewPager.setOnPageChangeListener(this);
...

private class HomePagerAdapter extends FragmentPagerAdapter {
    public HomePagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
            case 0:
                return (mMyListViewFragment1 = new MyListViewFragment());

            case 1:
                return (mMyListViewFragment2 = new MyListViewFragment());

        }
        return null;
    }

    @Override
    public int getCount() {
        return 2;
    }
} 
```

# c# - Wix - Msi：如何检查 msi 数据表中是否存在特定行

> ID：14272959
> 
> 赞同：0
> 
> 时间：2013-01-11T06:34:53.763
> 
> 标签：c#, wix, windows-installer

我想检查数据表中是否存在特定行。

例如，我想检查属性表是否存在于 msi 数据表中。如果它存在，那么我想检查“属性”列和“值”列是否存在。如果两者都存在，那么我想检查属性“ARPNOMODIFY”是否存在。

```
 if (database.Tables.Contains("Property"))
                {
                    if (database.Tables["Property"].Columns.Contains("Property"))
                    {
                        // here I want to checked if "ARPNOMODIFY" or any other property exists or not. If it exists then I want its value.
                    }
                } 
```

我有一个数据表，其结构为（“TableName”，“ColumnNAme1”，“ColumnName2”，“ColumnName1 处的值”）。因此，对于上面的记录，该行就像 ("Property","Property","Value","ARPNOMODIFY") 并且我想返回值 1，因为 ARPNOMODIFY 存在并且它的值为 1。

现在将另一行视为 ("Property","Propery","Value","ICFAGREE")。现在，如果属性表中不存在 ICFAGREE 属性，那么我想返回空字符串。提前致谢。

还要考虑另一行（“AdminExecuteSequence”、“Action”、“Condition”、“SetSpecifiedDir”）。现在在此示例中，AdminExecuteSequence 表具有 Action 和 Condition 列。Action 列下的值之一是“SetSpecifiedDir”，因此它在“Condition”列下的对应值是“ORCADIR”。所以我想返回“ORCADIR”这个字符串，如果 AdminExecuteSequence 表中存在“SetSpecifiedDir”值，否则我将返回 null .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:58:20.893

DTF 有丰富的类来帮助您进行这些类型的测试。

[另请参阅：MSI 提示：使用 C#/DTF 创作 ICE](http://blog.iswix.com/2009/02/msi-tip-authoring-ice-using-c-dtf.html)

```
 using System;
    using Microsoft.Deployment.WindowsInstaller;

    namespace ConsoleApplication1
    {
        class Tester : IDisposable
        {
            Database _database;

            public Tester(string databasePath)
            {
                _database = new Database(databasePath, DatabaseOpenMode.ReadOnly);
            }

            public void Dispose()
            {
                _database.Dispose();
            }

            public bool HasTable(string tableName)
            {
                return _database.Tables.Contains(tableName);
            }

            public bool HasColumn(string tableName, string columnName)
            {
                bool columnExists = false;
                if (HasTable(tableName))
                {
                    columnExists = _database.Tables[tableName].Columns.Contains(columnName);
                }
                return columnExists;
            }

            public bool QueryReturnsData(string sqlStatement, params object[] args)
            {
                return QueryReturnsData(string.Format(sqlStatement, args));
            }

            public bool QueryReturnsData(string sqlStatement)
            {
                bool containsData = false;
                using (View view = _database.OpenView(sqlStatement))
                {
                    view.Execute();
                    using (Record rec = view.Fetch())
                    {
                        if(rec != null )
                        {
                            containsData = true;
                        }
                    }
                }
                return containsData;

            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:51:30.660

有用于检索属性值的 API：[MsiGetProperty](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370134%28v=vs.85%29.aspx)

编辑：要查询是否存在任何表，您可以使用[MsiDatabaseGetPrimaryKeys](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370078%28v=vs.85%29.aspx)。

# php - 如何通过api在google plus页面上发帖？

> ID：14272963
> 
> 赞同：10
> 
> 时间：2013-01-11T06:35:24.043
> 
> 标签：php, google-plus

如何使用 php 通过 API 在 Google+ 页面上发帖

在搜索 Google+ API 时，获得了 Google 页面 API（[https://developers.google.com/+/api/pages-signup](https://developers.google.com/+/api/pages-signup)），它允许用户在 Google+ 页面上发帖，但要将这个 API 列入白名单，需要申请 Google+ 页面 API
我我没有获得 Google+ 页面 API 的任何文档（如何在页面上发布）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T12:37:27.940

目前，没有公开的 API 可以发布到 Google+。您找到了请求访问 API 的注册表单。如果获得批准，Google 将为您提供 API 信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-30T12:44:05.037

签出此链接。Google 已经发布了 Page API，但仅限于某些公司，而且选择标准似乎非常严格。

[Google + Pages API - 合作伙伴申请表](https://developers.google.com/+/api/pages-signup)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-31T10:29:35.587

我们试图找到另一种在 Google+ 上发帖的方法，但没有找到任何解决方案，因为 Google+ 为写入权限提供了更高的安全性。

Google+ 默认提供读取权限，使用我们的常规 google 帐户我们可以轻松做到这一点，但我们想在 Google+ 上发帖，因此我们需要 google 权限，并且要获得权限，我们需要创建 google 域帐户。

**请检查谷歌说的这个注释：**

重要提示：对于使用 Google+ Domains API 的帖子，access.domainRestricted 属性必须设置为 true。默认情况下，Google+ 中的帖子是不公开的，因此您还必须指定 access.items 属性以选择域内有权查看帖子的受众。

**并且授予谷歌的权限也说：**

必需 - 授予应用代表用户创建帖子或评论的权限。Google+ Domains API 只允许创建受限帖子，并且只允许将评论添加到受限帖子。

> **您可以查看这些波纹管链接：**

[https://developers.google.com/+/domains/posts/creating](https://developers.google.com/+/domains/posts/creating)

[https://support.google.com/plus/answer/2705802](https://support.google.com/plus/answer/2705802) [https://developers.google.com/+/domains/api/activities/insert#auth](https://developers.google.com/+/domains/api/activities/insert#auth)

[https://developers.google.com/+/domains/authentication/scopes](https://developers.google.com/+/domains/authentication/scopes)

[https://developers.google.com/+/domains/api/activities/insert](https://developers.google.com/+/domains/api/activities/insert)

# c++ - 如何检查 pthread_mutex_t 是否被锁定

> ID：14272969
> 
> 赞同：3
> 
> 时间：2013-01-11T06:35:50.077
> 
> 标签：c++, pthreads

我很确定这是一个幼稚的问题，但仍然会问它，因为我在网上找不到太多帮助。我正在使用 pthreads 编写 c++ 代码。以下是其中一种方法的概述

```
void Method1()
{
    try
    {
    pthread_mutex_lock(&syncLock);
    statement1;
    statement2;
    pthread_mutex_unlock(&syncLock);
    statement3;
    statement4;
    }
    catch(exception& e)
    {
    log error
    }
} 
```

其中 syncLock 是类型`pthread_mutex_t`并且使用默认初始化进行初始化。

我的问题是，如果在方法的 statement2 中引发异常，则控制直接传递给 catch 语句。在这种情况下，我的互斥锁保持锁定状态。但我也不能简单地在 catch 块中编写解锁语句，因为如果异常来自语句 3，则互斥锁已被解锁，并且在已解锁的互斥锁上调用解锁会导致未定义的行为。

那么有没有办法可以在 catch 语句中检查互斥锁是否已解锁。或者，C++ 中是否有可用的 C# 样式锁定语句替代方案，所以我确信即使从该块中抛出异常，锁定也会被释放

我不倾向于为此目的使用库。一个简单的自定义解决方案将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T06:50:57.047

编写一个小型 RAII 风格的储物柜类：

```
class lock { 
    pthread_mutex_t &mutex;
public:   
    lock(pthread_mutex_t &m) :mutex(m) { pthread_mutex_lock(&mutex); }
    ~lock() { pthread_mutex_unlock(&mutex); }
}; 
```

然后编写如下代码：

```
void Method1()
{
    try
    {
        { 
            lock l(syncLock);
            statement1;
            statement2;
         }
         statement3;
         statement4;    
    }
    catch(exception& e)
    {
    log error
    }
} 
```

当您退出定义锁的作用域时，锁将通过析构函数销毁，从而调用`pthread_mutex_unlock`. 无论您是正常退出范围还是通过异常退出，都会发生这种情况。当您进入异常处理程序时，您知道互斥锁已被解锁。

请注意，C++11 已将其内置到标准库中`std::lock_guard`（并且有许多互斥类型可供使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:56:17.540

使用 pthread_mutex_trylock 如果互斥锁已经被锁定，它会给出忙碌状态。如果它没有锁定，那么它将锁定它。在此解锁互斥锁之后。pthread_mutex_unlock(pthread_mutex_t *mutex);

# ios - 如何在 Xcode 的屏幕上捕获指定区域的屏幕截图

> ID：14272970
> 
> 赞同：0
> 
> 时间：2013-01-11T06:35:54.543
> 
> 标签：ios, screenshot

如何在 Xcode 的屏幕上截取指定区域的屏幕截图？

例如，我希望在屏幕上捕获 (0,100,320,200) 的区域并保存到 UIImage 对象？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T06:40:54.607

尝试下面的代码进行全屏截图（关键窗口）

```
UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
CGRect rect = [keyWindow bounds];
UIGraphicsBeginImageContextWithOptions(rect.size,YES,0.0f);
CGContextRef context = UIGraphicsGetCurrentContext();
[keyWindow.layer renderInContext:context];   
UIImage *capturedScreen = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

尝试此代码以本机分辨率捕获 UIView

```
CGRect rect = [captureView bounds];
UIGraphicsBeginImageContextWithOptions(rect.size,YES,0.0f);
CGContextRef context = UIGraphicsGetCurrentContext();
[captureView.layer renderInContext:context];   
UIImage *capturedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

如果您需要，这会将 UIImage 以 jpg 格式以 95% 的质量保存在应用程序的文档文件夹中。

```
NSString  *imagePath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/capturedImage.jpg"]];    
[UIImageJPEGRepresentation(capturedImage, 0.95) writeToFile:imagePath atomically:YES]; 
```

资料来源：[如何截取 UIView 的屏幕截图？](https://stackoverflow.com/questions/2214957/how-do-i-take-a-screen-shot-of-a-uiview)

# iphone - 带有搜索栏的 iOS 地图视图

> ID：14272977
> 
> 赞同：0
> 
> 时间：2013-01-11T06:36:29.830
> 
> 标签：iphone, ios, objective-c, mkmapview, mapkit

我完全盲目`iOS` `MapView`，在这里我需要知道如何显示与用户在`UISearch`bar 中输入的单词相关的位置。如果他在钦奈输入医院，然后必须在钦奈附近的医院下的**MAPVIEW**`MapView`中显示**多个引脚**，我已阅读[此链接仅使用**GOOGLE ALLOWED KEYWORDS**](http://www.raywenderlich.com/13160/using-the-google-places-api-with-mapkit)

我想做上面提到的事情..请指导我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T06:48:07.160

我可以建议你使用foursquare api：

[https://foursquare.com/explore?near=Chennai%2C%20IN&q=HOSPITALS%20IN%20CHENNAI%20](https://foursquare.com/explore?near=Chennai%2C%20IN&q=HOSPITALS%20IN%20CHENNAI%20)

# c# - 将我的程序的写入权限设置为文件夹访问

> ID：14272979
> 
> 赞同：0
> 
> 时间：2013-01-11T06:36:32.407
> 
> 标签：c#, .net, security

我已经在 Visual Studio 中构建了一个程序。该程序创建一个日志文件并在程序通过 log4net 运行时写入其中。因此，无论哪个用户使用该程序，我都应该为我的程序文件夹设置写权限。

当我访问我的应用程序时，它会抛出错误

**访问文件被拒绝**

所以我做了什么，我在那里给了 iis_users 管理员权限，它工作正常......

但我的问题是没有设置我应该能够通过 iis 运行我的应用程序的权限

所以我已经完成了

1）创建 app.manifest 文件，代码为

```
 <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
        <!-- UAC Manifest Options
            If you want to change the Windows User Account Control level replace the 
            requestedExecutionLevel node with one of the following.

        <requestedExecutionLevel  level="asInvoker" uiAccess="false" />
        <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" />
        <requestedExecutionLevel  level="highestAvailable" uiAccess="false" />

            Specifying requestedExecutionLevel node will disable file and registry virtualization.
            If you want to utilize File and Registry Virtualization for backward 
            compatibility then delete the requestedExecutionLevel node.
        -->
         <requestedExecutionLevel  level="asInvoker" uiAccess="false" />
        <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" />
        <requestedExecutionLevel  level="highestAvailable" uiAccess="false" />

      </requestedPrivileges> 
```

但这并不能帮助我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:41:10.077

首先，您不应该这样做——我的意思是，将日志写入您的程序文件夹。这就是 TEMP 文件夹的用途。

也就是说，我认为为程序文件夹中的文件设置权限的一种方法是在设置的自定义操作中进行。

这是一个类似的问题：[How to give Read/Write permissions to a Folder during installation using .NET](https://stackoverflow.com/questions/7288444/how-to-give-read-write-permissions-to-a-folder-during-installation-using-net)

# hyperlink - 重复区域中的链接

> ID：14272980
> 
> 赞同：0
> 
> 时间：2013-01-11T06:36:33.110
> 
> 标签：hyperlink

我对 Dreamweaver 很陌生，需要一些帮助。我创建了一个显示数据库名称的重复区域。我想将每个名称链接到一个单独的 Word 文档，该文档可以在网络浏览器中下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:58:01.300

像这样获取数据和链接：

```
while(info = fetch_frm_database( data )) 
 { 
 Print "<a href="info['siteurl'] . ">" .info['sitetitle'] . "</a><br>"; 
 } 
```

# ibm-midrange - AS/400：使用 COMPUTE 函数，不同字段定义的结果不一致

> ID：14272981
> 
> 赞同：4
> 
> 时间：2013-01-11T06:36:34.343
> 
> 标签：ibm-midrange, cobol

在 AS/400 中使用 COMPUTE 功能时，我遇到了一个神秘的问题。

场景如下：

```
01  WSAA-AMOUNT-A               PIC S9(15)V9(02) COMP-3.
01  WSAA-AMOUNT-B-01            PIC S9(16)V9(02) VALUE 0.
01  WSAA-AMOUNT-B-02            PIC S9(13)V9(05) VALUE 0.
01  WSAA-AMOUNT-C               PIC S9(16)V9(02) VALUE 0.
01  WSAA-RESULT                 PIC S9(15)V9(02) VALUE 0.

MOVE 2500.87             TO WSAA-AMOUNT-A. 
MOVE 12285               TO WSAA-AMOUNT-B-01.
MOVE 12285               TO WSAA-AMOUNT-B-02.
MOVE 4387.5              TO WSAA-AMOUNT-C. 

COMPUTE WSAA-RESULT ROUNDED = (WSAA-AMOUNT-A / ( WSAA-AMOUNT-B-01 + WSAA-AMOUNT-C) * 100 ).
DISPLAY WSAA-RESULT.

COMPUTE WSAA-RESULT ROUNDED = (WSAA-AMOUNT-A / ( WSAA-AMOUNT-B-02 + WSAA-AMOUNT-C) * 100 ).
DISPLAY WSAA-RESULT. 
```

结果令我惊讶的是，第一个公式的结果 = 14.90，而第二个公式的结果 = 15

听起来后者更合乎逻辑，因为 2500.87 / (12285+4387.5) * 100 = 14.99997001。我希望第一个结果的结果在四舍五入后也应该是 15。

**有谁知道这些不一致结果的根本原因是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T00:37:29.870

取得的结果是 14.90 和 15.00。

COMPUTE 格式不正确。乘以 100 时，请尽早执行，因为如果最后执行，两位小数会消失（除以 100 时，请最后执行，这样您就不会在早期丢失有效数字）。

它不仅适用于 100，因此请考虑一下。首先乘法，最后除法，无论涉及什么值。完全没有必要使用小数点后五位的字段来获得“正确”的答案，除非您在最终答案中需要五位小数。

计算机不是计算器或电子表格。它根据您的要求使用中间结果，而不是其他结果，这些结果为您提供许多小数位。您使用您使用的字段中的小数位数要求小数精度。

了解正在发生的事情的一个关键是精细手册。另一个是实验。这通常是一个普遍的答案。

```
COMPUTE WSAA-RESULT ROUNDED = 
                  (WSAA-AMOUNT-A / ( WSAA-AMOUNT-B-01 + WSAA-AMOUNT-C) * 100 ) 
```

显示 WSAA 结果。得到答案 14.90（十四点九零）。

```
COMPUTE WSAA-RESULT = 
                  (WSAA-AMOUNT-A / ( WSAA-AMOUNT-B-01 + WSAA-AMOUNT-C) * 100 ) 
```

显示 WSAA 结果。通过删除 ROUNDED 得到答案 14.00（十四点零零）。

```
COMPUTE WSAA-RESULT ROUNDED = 
                  (WSAA-AMOUNT-A / ( WSAA-AMOUNT-B-02 + WSAA-AMOUNT-C) * 100 ) 
```

DISPLAY WSAA-RESULT 通过使用五个小数位得到 15.00（15 点零零）“正确”“预期”答案。

记住，你最后乘以 100。所以在此之前的值是 0.149（小数点后三位）、0.14（小数点后两位）和 14.99999n（小数点后六位，我不会再做计算了，所以我将第六个保留为“n”）。

为什么有三位、两位和六位小数？六是因为B-02（有五位，ROUNDED加一位，需要的小数位增加一位，这样就可以计算ROUNDED了），二是因为B-01（有两位小数) 三是因为B-01和ROUNDED。

这是一个重新设计的 COMPUTE，分为三个版本：

```
COMPUTE WSAA-RESULT ROUNDED =  ( ( WSAA-AMOUNT-A * 100 )
                               / ( WSAA-AMOUNT-B-01 
                                 + WSAA-AMOUNT-C ) ) 

COMPUTE WSAA-RESULT         =  ( ( WSAA-AMOUNT-A * 100 )
                               / ( WSAA-AMOUNT-B-01 
                                 + WSAA-AMOUNT-C) ) 

COMPUTE WSAA-RESULT ROUNDED = ( ( WSAA-AMOUNT-A * 100 ) 
                              / ( WSAA-AMOUNT-B-02 
                                + WSAA-AMOUNT-C) ) 
```

结果是 15.00、14.99 和 15.00。

这与 Enterprise Cobol 一起使用。似乎 OpenCobol 使用了不同的中间结果，这些结果可能已记录在案。

这是关于中间结果的企业 Cobol 编程指南：

“要了解有关中间结果的信息，您需要了解以下术语。... d 中间结果的小数位数。（如果您使用 ROUNDED 短语，则可能会多带一位小数以确保准确性，如果dmax 在特定语句中，以下各项中的最大值： v 最终结果字段所需的小数位数 v 为除除数或指数以外的任何操作数定义的最大小数位数 v 外部-任何函数操作数的 dmax"

和

```
"Operation ... Decimal places
+ or - ... d1 or d2, whichever is greater
* ... d1 + d2
/ ... (d2 - d1) or dmax, whichever is greater" 
```

在“错误”示例中，加法得到两位小数（加法时 d1 和 d2 均为 2），除法得到 3 位小数（dmax 为 3），乘法得到 3（2 + 0 + 1 表示 ROUNDED ）。尝试舍入后的最终答案（它永远不会运行，因为两个低位小数由于乘以 100 始终为零），被截断到小数点后两位。

对于 ROUNDED B-01，dmax 为 3（结果字段为 2 位，加 1 用于舍入）。对于普通的 B-01，dmax 为 2。ROUNDED B-02 dmax 为六。

请注意，不仅显示的示例是错误的。ROUNDED 在问题的第一个示例中从不运算，并且始终会删除一个有效小数，因此您只能在舍入前的答案为十分之一时获得正确答案。然后，这些正确答案会被另外九个答案所掩盖，这些答案由于截断而变得相同。

如果你总是写出有效的 COMPUTE，你就不会遇到问题。ROUNDED 仅对最终结果进行操作。如果您需要任何中间字段 ROUNDED，请单独计算并在新计算中使用结果。

计算有效。COMPUTE 不像计算器/电子表格那样操作。任何其他 Cobol 动词也没有（它们是*动词*而不是*函数*）。考虑如何编写 COMPUTE 以免失去意义。阅读手册。实验。重复直到正确和理解。

# delphi - 如何防止在 Firemonkey 网格上拖动列？

> ID：14272984
> 
> 赞同：2
> 
> 时间：2013-01-11T06:36:47.393
> 
> 标签：delphi, delphi-xe3, firemonkey-fm2

有没有办法防止在 FireMonkey 2 TGrid 上拖动列标题（重新排序）？

THeader 实例是 TGrid 类私有的，我找不到任何其他控制它的属性。THeaderItem.DragMode 的默认值是 dmAutomatic（出于某种深不可测的原因）。

如果没有创建新的 TGrid 后代，或者将 THeader 从网格中断开，我看不到如何将 DragMode 恢复为 dmManual。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:34:53.637

您可以`FHeader`使用 RTTI 访问私有字段，从这里您可以编写一个方法来设置 Headers 的 DragMode。

试试这个代码

```
procedure SetHeaderDragMode(Grid : TGrid; DragMode:TDragMode);
Var
  LCtx  : TRttiContext;
  LType : TRttiType;
  LField: TRttiField;
  LHeader: FMX.Grid.THeader;
  i : Integer;
begin
  LCtx:=TRttiContext.Create;
  LType:=LCtx.FindType('FMX.Grid.TGrid');
  if (LType<>nil) then
   LField:=  LType.GetField('FHeader');

  if (LField<>nil) then
  begin
    LHeader:=THeader(LField.GetValue(Grid).AsObject);
    if LHeader<>nil then
      for i:=0 to  LHeader.Count-1 do
        LHeader.Items[i].DragMode:=DragMode;
  end;
end; 
```

像这样使用

```
 SetHeaderDragMode(Grid1,TDragMode.dmManual); 
```

# android - 返回首页

> ID：14272988
> 
> 赞同：0
> 
> 时间：2013-01-11T06:37:04.807
> 
> 标签：android

在我的应用程序中有一个查看页面和一个主页，在设置页面中我想输入密码并在按下确定按钮后将其读取到文件中我想返回主页

我试过的代码是......

```
 public class SetteingsPage extends Activity 
      {
Button okBtn,resetBtn,cancelBtn;
TextView passwordTxt,passwordTxt2;
String passwordTxtValue,passwordTxtValue2;
String value;
String localDataPassword;
int id=1;
OpenHelper db_obj;
ArrayList<HashMap<String, String>> PASSWORD_DATA = new ArrayList<HashMap<String, String>>();
String FILENAME1 = "password.txt";

 @Override 
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.settingspage);
      db_obj = new OpenHelper(getApplicationContext());

      okBtn = (Button)findViewById(R.id.button1s);

      passwordTxt = (TextView)findViewById(R.id.editText1s);
      passwordTxt2 = (TextView)findViewById(R.id.editText2s);

      resetBtn = (Button)findViewById(R.id.btnreset);
      cancelBtn = (Button)findViewById(R.id.btnCancels);

        passwordTxt.setHint("Enter Password");
        passwordTxt2.setHint("Confirm Password");

      try {
          System.out.println("Enter try block!!!!!!!!!!!!!!!");
            FileInputStream fis = openFileInput(FILENAME1);
            InputStreamReader in = new InputStreamReader(fis);
            BufferedReader br = new BufferedReader(in);
            localDataPassword = br.readLine();
            System.out.println("localDataPassword"+localDataPassword);
            System.out.println("dasretetile"+localDataPassword);

        } catch (Exception e) { 

        }

       if(localDataPassword == null || localDataPassword.equals("") || localDataPassword.equals("null"))
       {
           resetBtn.setVisibility(View.INVISIBLE);
          okBtn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    String id1 = Integer.toString(id);
                      passwordTxtValue = passwordTxt.getText().toString();
                      passwordTxtValue2 = passwordTxt2.getText().toString();

                      if(passwordTxt.getText().length()>=5)
                      {
                      if(passwordTxtValue.equals(passwordTxtValue2))
                      {

                            try 
                            {
                                db_obj.password_varification(id1, passwordTxtValue);
                                Log.e("Insert Values"," " );

                            } 
                            catch (Exception e) 
                            {
                            }

                             FileOutputStream fos;
                                try {
                                    fos = openFileOutput(FILENAME1, Context.MODE_PRIVATE);
                                    fos.write(passwordTxtValue.getBytes());
                                    System.out.println("---------Data written to files is:"
                                            + passwordTxtValue);
                                    fos.close();

                                   SetteingsPage.this.finish();

                                } catch (Exception e) {
                                    e.printStackTrace();
                                }

                      } 

                      else
                      {
                          Toast.makeText(getApplicationContext(), "Enter values correctly!!!", Toast.LENGTH_SHORT).show();
                            passwordTxt.setText("");
                            passwordTxt2.setText("");
                      }
                      }
                      else
                      {
                          Toast.makeText(getApplicationContext(), "Should hhave min 5 characters!!!", Toast.LENGTH_SHORT).show();
                            passwordTxt.setText("");
                            passwordTxt2.setText("");
                      }
                }
            });
       }
       else
       {
           okBtn.setVisibility(View.INVISIBLE);
           cancelBtn.setVisibility(View.INVISIBLE);
            passwordTxt.setHint("Old Password");
            passwordTxt2.setHint("New Password");
          resetBtn.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    String oldPassword  = passwordTxt.getText().toString();
                    String newPassword  = passwordTxt2.getText().toString();
                    System.out.println("Old Password Value"+oldPassword);
                    System.out.println("From Reset Button"+localDataPassword);
                    System.out.println("New password"+newPassword);

                     if(passwordTxt.getText().length()>=5)
                     {
                    if(oldPassword.equals(localDataPassword))
                    {
                        FileOutputStream fos;
                            try {
                                fos = openFileOutput(FILENAME1, Context.MODE_PRIVATE);
                                fos.write(newPassword.getBytes());
                                System.out.println("-----stert----Data written to files is:"
                                        + newPassword);
                                fos.close();

                                Intent intent=new Intent(SetteingsPage.this,Home.class);
                                startActivity(intent);
                                finish();

                            } catch (Exception e) {
                                e.printStackTrace();
                            }

                    }

                    else
                    {
                        Toast.makeText(getApplicationContext(), "Enter the old password correctly!!!", Toast.LENGTH_LONG).show();
                    }

                    String dummy = Integer.toString(id);
                      db_obj.Deletrowpassword(dummy);

                }
                     else
                     {
                         Toast.makeText(getApplicationContext(), "Should Have Minimum 5 Characters!!!", Toast.LENGTH_SHORT).show();
                            passwordTxt.setText("");
                            passwordTxt2.setText("");
                     }
                }
            });
       }

   }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) 
    {

        if (keyCode == KeyEvent.KEYCODE_BACK) 
        {
             Intent intent = new Intent(getApplicationContext(),Home.class);
             intent.putExtra("key", "common");
             startActivityForResult(intent, 0);
             finish();
        }
        return super.onKeyDown(keyCode, event);

    } 
```

}

两个代码

```
 SetteingsPage.this.finish(); 
```

也

```
 Intent home  = new Intent();
     home.setClass(getApplicationContext(), Home.class);
     startActivity(home); 
```

试过了，但这些都不起作用......

定位输出是..

```
 01-11 12:39:44.218: E/AndroidRuntime(13506): FATAL EXCEPTION: main
   01-11 12:39:44.218: E/AndroidRuntime(13506): java.lang.RuntimeException: Unable to start  activity ComponentInfo{com.example.security/com.example.security.Home}:  java.lang.NullPointerException
  01-11 12:39:44.218: E/AndroidRuntime(13506):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
  01-11 12:39:44.218: E/AndroidRuntime(13506):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
  01-11 12:39:44.218: E/AndroidRuntime(13506):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
  01-11 12:39:44.218: E/AndroidRuntime(13506):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
  01-11 12:39:44.218: E/AndroidRuntime(13506):  at android.os.Handler.dispatchMessage(Handler.java:99)
  01-11 12:39:44.218: E/AndroidRuntime(13506):  at android.os.Looper.loop(Looper.java:130)
  01-11 12:39:44.218: E/AndroidRuntime(13506):  at android.app.ActivityThread.main(ActivityThread.java:3687) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:44:53.040

试试这样。。

直接..之后

TextView txt=(TextView)findViewById(R.id.//);

...添加： if (txt == null) { Log.w("", "TextView is null"); } //

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:07:03.137

如果您已经从其中调用过，则不应`finish`为当前活动调用方法`startActivityForResult`。

也许这会有所帮助：

```
startActivity(intent, Intent.FLAG_ACTIVITY_CLEAR_TOP);
finish(); 
```

如果有帮助，谢谢：）

# php - 日期函数不正确

> ID：14272991
> 
> 赞同：0
> 
> 时间：2013-01-11T06:37:12.000
> 
> 标签：php, mysql, date

好的，所以我有这个功能，当我发布它时，它将花费我发布的确切时间并将其保存在数据库中......我在那个日期调用我的帖子，当它实际发布时。但问题是它说错了时间，它有正确的日期和年份，但没有时间。它比我的时间提前了大约 8 小时。这是我使用的代码

发布到数据库中。

```
$date1 = time();
$sql = mysql_query("INSERT INTO photos 
SET photo='$newname', title='$title', date='$date', author='$by'") 
```

这就是我呼吁的地方。

```
$date = date("F j, Y, g:i a", $row['date']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:07:30.103

you can use time stamp data type with Current_timestamp which will take less space for storage

means something like

**insert into** photos(photo,title,date,author) **values**('$newname','$title',current_timestamp,'$by');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:33:42.700

如果您尝试插入当前时间，则必须使用 javascript 来实现。如果那是您想要的，我可以为您编写代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:43:02.280

将 mysql 中的“日期”字段设置为“ **datetime** ”，并将查询运行为 ....“ **date = now()** ”....（即使用内置的 mysql datetime 函数）。

> 插入照片 SET photo='$newname', title='$title', date=now(), author='$by'

另外，请记住您的电脑和服务器之间的时区差异..

小心

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:48:34.557

您需要设置时区以获得所需的时间。例如，您可以在 php 中设置时区如下 date_default_timezone_set('America/New_York');

# parameters - 我如何知道 /D 参数是否已传递到基于 NSIS 的安装程序中

> ID：14272992
> 
> 赞同：3
> 
> 时间：2013-01-11T06:37:17.890
> 
> 标签：parameters, installation, nsis

NSIS 中是否有任何标志或其他选项可以查看默认 $INSTDIR 变量是通过传递给安装程序的 /D 参数更改的？

我试图这样做：

```
1\. setup.exe /D=C:\Temp
2\. ${GetParameters} $R0
3\. And see that $R0 is empty 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:14:45.243

`.onInit`执行之前，`$InstDir`由 设置`InstallDir`，然后如果由 定义的值`InstallDirRegKey`存在，它将覆盖`InstallDir`。最后，如果用户使用了/D，`$InstDir`则设置为那个参数。这对大多数安装人员来说是可以的，因为您实际上并不需要知道如何`$InstDir`设置。

如果您正在使用`RequestExecutionLevel highest`并且您的安装程序支持根据海拔状态为单个用户或所有用户安装，那么这是不行的。解决这个问题的唯一方法是不使用`InstallDir*`

```
; DO NOT USE: InstallDir
; DO NOT USE: InstallDirRegKey

!include LogicLib.nsh

Function .onInit
${If} $InstDir != ""
  ; /D was used
${Else}
  ; Set some default
  StrCpy $InstDir "$ProgramFiles\foo\bar"
${EndIf}
FunctionEnd 
```

或者，您可以使用`System::Call kernel32::GetCommandLine()t.r0`并解析 $0 最后寻找 /D ...

# iphone - 逐帧播放视频

> ID：14272996
> 
> 赞同：2
> 
> 时间：2013-01-11T06:37:40.840
> 
> 标签：iphone, ios, objective-c, video

> **可能重复：**
> [iOS 逐帧向前/向后播放视频](https://stackoverflow.com/questions/10718515/ios-frame-by-frame-video-playback-forward-backward)

在我的应用程序中，我正在播放具有视频播放功能的视频。

我想再添加一项功能来逐帧播放视频。

我将放置两个按钮，一个用于 Frame+，另一个用于 Frame-。如果我点击 Frame+，则视频应向前移动 1 帧，如果我点击 Frame-，则视频应向后移动 1 帧。

请建议我如何实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:03:46.697

尝试使用`AVPlayer`'s`-(void)stepByCount:(NSInteger)stepCount`方法。这必须使用`AVPlayerItem`如下：

```
AVPlayer *mPlayer = [AVPlayer playerWithURL:url];
[mPlayer.currentItem stepByCount:1]; 
```

# mod-rewrite - 条件重写协助

> ID：14272997
> 
> 赞同：0
> 
> 时间：2013-01-11T06:37:43.903
> 
> 标签：mod-rewrite

我在这里找到了我需要做的事情：[Throw 404 when requesting file unless HTTPS](https://stackoverflow.com/questions/3972393/throw-404-when-requesting-file-unless-https)

但是，我查看了参考文章[http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)并且迷路了。在编辑 .htaccess 时，我的知识范围是复制和粘贴。

有人可以帮助我吗？我有一个深两个文件夹的目录，如果不访问 https，则需要抛出 404 错误，并且如果不安全，我在根目录中还有一个页面需要发送回主页。

先感谢您。感谢您的帮助。

编辑：我还阅读了另一个关于确保使用安全 cookie 的问题，但没有关于如何做到这一点的示例。有人可以详细解释一下吗？

# html - 动态设置页脚高度

> ID：14272998
> 
> 赞同：1
> 
> 时间：2013-01-11T06:37:45.500
> 
> 标签：html, css

我正在创建一个网页，需要在页脚中做一些事情。目前，页脚高度是固定的。在这种情况下，如果内容区域很小，它会在页脚下方出现一个空白区域。但我想动态地将页脚背景扩展到底部。您可以在此处查看示例：http: [//jilson.me/stack/index.html](http://jilson.me/stack/index.html)

页脚的css代码是：

```
.footer{
    height:64px;
    border-top:5px solid #4b4b4b;
    background:#383838;
    max-width:1400px;
    margin:0 auto;
} 
```

如果您想要更多代码，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:53:59.693

将页脚的背景颜色应用于 body 标签：

```
body{
   background-color:#383838;
} 
```

然后将您的页脚 div 移到包装器 div 之外并将包装器的背景颜色设置为

> 背景颜色：#fff;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:44:56.327

请参阅链接 jsfiddle.net/FkPqb/ 我希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:42:29.527

添加`height:100%`到 html

在css中添加这个

```
html, body{height:100%} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T07:00:00.920

试试这个，把这个css应用到你的页脚

```
min-height:64px;
overflow:hidden; 
```

希望它会有所帮助。