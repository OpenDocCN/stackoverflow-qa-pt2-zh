# StackOverflow 问答 15217000-15217999

# ruby-on-rails - 延迟作业不发送邮件 - 如何调试？

> ID：15217003
> 
> 赞同：1
> 
> 时间：2013-03-05T06:11:30.897
> 
> 标签：ruby-on-rails, actionmailer, delayed-job

我使用以下设置延迟了作业设置：

```
Delayed::Worker.max_attempts = 3
Delayed::Worker.delay_jobs = !Rails.env.test?
Delayed::Worker.destroy_failed_jobs = false
Delayed::Worker.sleep_delay = 120 
```

我已经开始了一个工作人员，从事开发工作，并配置了 ActionMailer 来发送邮件。

我也在我的控制器中使用以下内容调用它：

```
OrderMailer.delay.order_notification(@order) 
```

我可以看到在 Mongo 中创建的作业，它们在控制台中没有显示任何错误，我如何找出是否有任何错误？是否有某种工作日志？

我在控制台中得到以下信息：

```
1 jobs processed at 3.6244 j/s, 0 failed .. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:03:30.623

应该有一个`log/delayed_job.log`列出处理的作业。您还可以使用数据库来访问失败任务的错误。

```
>> failed_jobs = Delayed::Job.where('attempts > 0')
>> failed_jobs.first.last_error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-16T21:23:15.280

调试 DelayedJob 的另一种好方法是 gem **Delayed Job Web**（请参阅[https://github.com/ejschmitt/delayed_job_web](https://github.com/ejschmitt/delayed_job_web)），它为您提供“*延迟作业的类似 Resque 的 Web 界面*”，可通过`http://localhost:3000/delayed_job`. 界面提供了一个“Failed Jobs”-Tab，在这里可以调查“最后一个错误”-Field，比在终端更方便...

# c - c中的结构，其成员也是结构

> ID：15217007
> 
> 赞同：1
> 
> 时间：2013-03-05T06:12:15.040
> 
> 标签：c, struct, lvalue

我有以下内容`structs`：

```
typedef struct stack {
    void* ss_sp;
    size_t ss_size;
    // ...
} stack_t; 

typedef struct ucontext {
    ucontext_t* uc_link;
    stack_t uc_stack;
    // ...
} ucontext_t;

typedef struct mythread_type {
    ucontext_t context;
    int ID;
    int status;
} mythread_t; 
```

现在我有一个数组如下：

```
mythread_t mythreads[100]; 
```

我想避免使用

```
mythreads[0].context.uc_stack.ss_size 
```

出于可读性原因。

现在我想知道以下两个代码块是否等效：

*   区块 1

    ```
    ucontext_t c=mythreads[0].context;
    getcontext(&c);
    c.uc_stack.ss_size=1024;
    c.uc_stack.ss_sp=malloc(1024); 
    ```

*   区块 2

    ```
    ucontext_t* c=&(mythreads[0].context);
    getcontext(c);
    (c->uc_stack).ss_size=1024;
    (c->uc_stack).ss_sp=malloc(1024); 
    ```

我想要的是`mythreads[0]`分配 1024 字节的堆栈上下文。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T06:20:49.973

以下是 mythreads[0].context 的副本：

```
ucontext_t c = mythreads[0].context; 
```

相反，以下是指向 mythreads[0] 上下文的指针

```
ucontext_t* c = &(mythreads[0].context); 
```

结果，第一个代码和平修改了副本（它不影响 mythreads[0] 上下文），第二个修改了 mythreads[0] 上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:23:08.917

它们不是等价的。

第一个块对 in 的信息副本进行`mythreads[0].context`操作，第二个块对 in 的信息进行操作`mythreads[0].context`。

如果你写的话，你也许可以实现整体等价：

```
ucontext_t c = mythreads[0].context;
getcontext(&c);
c.uc_stack.ss_size = 1024;
c.uc_stack.ss_sp = malloc(1024);
mthreads[0].context = c; 
```

但其中有两个额外的结构副本。

# sml - 如何在 Isabelle 的 ML 级别轻松编写简单的策略？

> ID：15217009
> 
> 赞同：10
> 
> 时间：2013-03-05T06:12:26.033
> 
> 标签：sml, isabelle

在 Isabelle 理论文件中，我可以编写简单的单行策略，例如：

```
apply (clarsimp simp: split_def split: prod.splits) 
```

然而，我发现，当我开始编写 ML 代码来自动化证明、生成 ML`tactic`对象时，这些单行代码变得相当冗长：

```
clarsimp_tac (Context.proof_map (
    Simplifier.map_ss (fold Splitter.add_split @{thms prod.splits})
    #> Simplifier.map_ss (fn ss => ss addsimps [@{thm split_def}]))
  @{context}) 1 
```

有没有更简单的方法可以在 Isabelle/ML 级别编写简单的单线战术？

例如，类似反引号：`@{tactic "clarsimp simp: split_def split: prod.splits"}`产生类型的函数`context -> tactic`，将是一个理想的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:51:38.613

I see a variety of possibilities, it depends a bit on the context of your the application what is best. Note that in general, individual ML code for proof automated used to be common-place in the very old times, but it is relatively rare today. For example, compare the amount of custom tactics in rather small [HOL-Bali](http://isabelle.in.tum.de/library/HOL/HOL-Bali/index.html) (started in 1997) with the large [JinjaThreads](http://afp.sourceforge.net/entries/JinjaThreads.shtml) in AFP (started in 2007 and continued until recently).

Nesting ML antiquotations like `@{tactic}` would in principle work, but you would quickly run into further questions, like what happens if your theorem arguments should be again Isar or ML source.

Instead of *antiquoting* tactic building blocks in ML, a more basic approach is to *quote* your proof precedure in Isar by giving it regular method syntax like this:

```
ML {*
  (*foo_tac -- the payload of what you want to do,
    note the dependency on ctxt: Proof.context*)
  fun foo_tac ctxt =
    let
      val my_ctxt =
        ctxt |> Simplifier.map_simpset
         (fold Splitter.add_split @{thms prod.splits} #>
          Simplifier.add_simp @{thm split_def})
    in ALLGOALS (clarsimp_tac my_ctxt) end
*}

method_setup foo = {*
  (*concrete syntax like "clarsimp", "auto" etc.*)
  Method.sections Clasimp.clasimp_modifiers >>
    (*Isar method boilerplate*)
    (fn _ => fn ctxt => SIMPLE_METHOD (CHANGED (foo_tac ctxt)))  
*} 
```

Here I've first made a conventional `foo_tac` definition in Isabelle/ML, and then wrapped it up the usual Isar way as proof method. The latter means you have wrappers like `SIMPLE_METHOD` taking care of pushing "chained facts" into your goal state, and `CHANGED` to ensure that the Isar method makes progress (like `simp` or `auto`).

The `foo_tac` example assumes that your modification of the context (or its simpset) is constant, by the hard-wired split rules. If you want to have further parameters there, you can include that in the concrete method syntax. Note that `Method.sections` is already quite sophisticated in this respect. More basic argument parsers are given in the section "Defining proof methods" of the [isar-ref](http://isabelle.in.tum.de/doc/isar-ref.pdf) manual. You should also look at existing examples by searching the sources for `method_setup` (in Isabelle/Isar) or `Method.setup` (in Isabelle/ML).

If you still want to do ML antiquotations instead of concrete method syntax, one could try a variant of `@{context}` that allows modifiers like this:

```
@{context simp add: ...} 
```

That is a bit speculative, invented on the spot, and might turn out as bad practice. As I've said, fine-grained tactic programming in Isabelle became a bit out of use in recent years, although ML is an integral part of the Isabelle framework. If you pose a more concrete question with more of the application context, we can reconsider the antiquotation approach.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-03T21:03:50.480

除了其他答案之外，我认为值得一提的是，在 Isabelle2015 中有一种称为[Eisbach](http://ssrg.nicta.com.au/projects/TS/tactics.pml)的新的高级策略/证明方法构造语言（类似于 Coq 中的 Ltac） ，旨在更容易理解和维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T03:39:29.110

该类`Method`似乎提供了足够的接口来提取策略，`cases_tactic`如下所示：

```
(*
 * Generate an ML tactic object of the given Isar string.
 *
 * For example,
 *
 *   mk_tac "auto simp: field_simps intro!: ext" @{context}
 *
 * will generate the corresponding "tactic" object.
 *)
fun mk_tac str ctxt =
let
  val parsed_str = Outer_Syntax.scan Position.start str
      |> filter Token.is_proper
      |> Args.name
  val meth = Method.method (Proof_Context.theory_of ctxt)
      (Args.src (parsed_str, Position.start)) ctxt
in
  Method.apply (K meth) ctxt [] #> Seq.map snd
end 
```

或者作为反引用：

```
(*
 * Setup an antiquotation of the form:
 *
 *    @{tactic "auto simp: foo intro!: bar"}
 *
 * which returns an object of type "context -> tactic".
 *
 * While this doesn't provide any benefits over a direct call to "mk_tac" just
 * yet, in the future it may generate code to avoid parsing the tactic at
 * run-time.
 *)
val tactic_antiquotation_setup =
let
  val parse_string =
    ((Args.context -- Scan.lift Args.name) >> snd)
      #>> ML_Syntax.print_string
      #>> (fn s => "mk_tac " ^ s)
      #>> ML_Syntax.atomic
in
  ML_Antiquote.inline @{binding "tactic"} parse_string
end 
```

并在理论文件中设置如下：

```
setup {*
  tactic_antiquotation_setup
*} 
```

然后可以按如下方式使用：

```
lemma "(a :: nat) * (b + 1) = (a * b) + a"
  by (tactic {* @{tactic "metis Suc_eq_plus1 mult_Suc_right nat_add_commute"} @{context} *}) 
```

如预期的。

# mysql - mysql - 如何将 BINARY(4) 转换为整数

> ID：15217011
> 
> 赞同：1
> 
> 时间：2013-03-05T06:12:36.483
> 
> 标签：mysql, hash, casting, binary

我想获取 BINARY 字符串的前四个字节并将其解释为数字。

（背景：我有一个 SHA1 哈希，它已被 UNHEX'ed 到 BINARY(20) 列中，我想创建一个 PARTITION BY HASH 表达式，该表达式采用 SHA1 值的前四个字节并将其转换或转换为数字值，正如 PARTITION BY HASH 表达式所期望的那样。）

它真的不需要是四个字节；只是一小部分可以被操作成整数值的字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-22T18:24:52.053

我知道这已经晚了，但是，

尝试这个：

```
SELECT CONV(LEFT(HEX(<column_with_bin_str>),8), 16, 10) FROM Table; 
```

这会将二进制字符串转换为十六进制，从转换后的字符串中获取前 8 个十六进制字符并将其转换为十进制。

我们取前 8 个十六进制字符，因为需要两个十六进制字符来表示一个字节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T06:26:10.650

您可以结合以下两个功能：

[SUBSTRING(str,pos,len)](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring)

> 从字符串 str 返回一个子字符串 len 个字符长，从位置 pos 开始。

* * *

[CONV(N,from_base,to_base)](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_conv) -

> 在不同的数字基数之间转换数字。返回数字 N 的字符串表示形式，从基础 from_base 转换为基础 to_base。

* * *

**编辑**

如果您需要获取其中的前 4 个数字，请`10011001`使用`1001 = 9`：

```
SELECT CONV(SUBSTR(10011001, 1, 4), 2, 10) 
```

如果您有*前导零*，您可以使用 LPAD 函数，例如二进制值的前 4 位数字`01001100`，`0100 = 4`您可以执行以下操作：

```
SELECT CONV(
  SUBSTR(
    LPAD(
      CAST(01001100 as char), (LENGTH(CAST(01001100 as char)) + 1), '0'), 
    1, 4), 2, 10) 
```

请参阅[SQLFiddle](http://sqlfiddle.com/#!2/d41d8/8460)

# javascript - WaitForSeconds 的问题

> ID：15217016
> 
> 赞同：0
> 
> 时间：2013-03-05T06:13:06.673
> 
> 标签：javascript, time, unityscript

我正在学习如何在 Unityscript 中使用*WaitForSeconds*函数，并且之前已经取得了成功。但现在我在一个脚本中尝试它，当对象的健康达到 0 时，将对象（在这种情况下为一个盒子）移出屏幕，然后在设定的秒数后让它重新出现在随机位置屏幕上，并将运行状况设置回其默认值。到目前为止，我所拥有的是：

```
function Update () 
{
    if(health <= 0)
    {
        RespawnWaitTime ();
        var position = Vector3(Random.Range(-6,6),Random.Range(-4.5,4.5),0); //this is the onscreen range   
        transform.position = position;
        health = 2;                 
    }
}

function RespawnWaitTime ()
{
    var offScreen = Vector3(10,10,0);
    transform.position = offScreen;
    yield WaitForSeconds(2);
} 
```

但是，它根本不等待 2 秒。盒子直接进入它的新位置，就好像该功能不存在一样。我相信它确实会转到屏幕外的位置，但会直接跳回来而无需等待。我已经通过将一些代码更改为：

```
function RespawnWaitTime ()
{
    var offScreen = Vector3(10,10,0);
    transform.position = offScreen;
    print("I'm over here!");
    yield WaitForSeconds(2);
    print("I'm coming back!");  
} 
```

第一段文本立即打印完毕，两秒钟后，第二段文本也出现了，正如预期的那样。那么为什么等待也不适用于盒子呢？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:28:31.380

我怀疑 WaitForSeconds 是异步的，因此当 update 调用 RespawnWaitTime 时， RespawnWaitTime 会立即返回。您可以尝试以下代码来查看 WaitForSeconds 的行为方式吗？

```
function Update () {
        print("1 in update before calling respandwaittime");
        RespawnWaitTime ();
        print("3 in update after calling respandwaittime");
}

function RespawnWaitTime (){
    print("2 in in respainwaittime before calling waitforseconds");
    yield WaitForSeconds(2);
    print("4 in in respainwaittime after calling waitforseconds");
} 
```

由于输出为 1,2,3,4（如预期的那样），您可以像这样重新编程：

```
function Update () {
    if(health <= 0){
        recover();
        return;
    }
}

function recover(){
    var offScreen = Vector3(10,10,0);
    transform.position = offScreen;
    yield WaitForSeconds(2);
    //this is the onscreen range   
    var position = Vector3(Random.Range(-6,6),Random.Range(-4.5,4.5),0); 
    transform.position = position;
    health = 2;                 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T14:16:14.430

你需要使用“yield RespawnWaitTime();” - 否则调用它的函数将在协程运行的同时继续执行。

让协同程序暂停执行调用它的代码，直到协同程序完成，此时原始代码从屈服语句后面的行恢复。

但是 - 由于您不能将 yield 语句放在 Update() 中 - 您需要调用一个中间函数，如下所示：

```
function Update () 
{
    if(health <= 0)
    {
        Respawn ();              
    }
}

function Respawn ()
{
    yield RespawnWaitTime ();
    var position = Vector3(Random.Range(-6,6),Random.Range(-4.5,4.5),0);
    transform.position = position;
    health = 2;
}

function RespawnWaitTime () : IEnumerator
{
    var offScreen = Vector3(10,10,0);
    transform.position = offScreen;
    yield WaitForSeconds(2);
} 
```

注意我还在 RespawnWaitTime() 中添加了 ":IEnumerator" - 如果你不这样做，控制台将为调用它的 yield 语句打印一个错误。据我了解，尽管显示了编译错误，但代码可能会起作用，但我不想冒险;-)

# mysql - mysqltcl foreach 循环 tcl

> ID：15217022
> 
> 赞同：3
> 
> 时间：2013-03-05T06:13:33.223
> 
> 标签：mysql, loops, foreach, tcl, eggdrop

我的问题是第一组返回会在 $sub1 可用于字符串匹配之前删除它，因此脚本不会继续。我试图将脚本的其余部分包含在第一组返回中并且它可以工作，但是......我收到多条消息给用户和其他 2 组返回的通道。

无论如何要修复它，以便它不会向用户和频道发送多条消息，因为“foreach sub”中的每个 sub 正在为 pm user 和 pm channel 生成一条线，该线可以是 1 或 2 条消息到200 条消息，取决于数据库中有多少匹配项。

```
bind pubm - * bind_pubm
    proc bind_pubm {nick uhost handle channel text} {
        global SQL; sql:start

        set regexp {^!sub (.*) *$}
        if {[regexp -nocase -- $regexp $text -> subscription]} {
            if {[string match -nocase *HDTV* $subscription] || [string match -nocase *S??E??* $subscription]} {

            set return [mysqlsel $SQL(conn) "select sub from DB_Subs where category='TV'" -list] 
            foreach {sub} $return {     ; # Lists all the subs in the DB for matching.
            regsub -all -- {%} $sub "*" sub1    ; # Replaces % in SQL to * for the String match later.
            }

            if {[string match -nocase $sub1* $subscription]} {  ; # Matches if a sub in the previous list matches the regexp subscription fromthe beginging of proc.
                set return [mysqlsel $SQL(conn) "select user from DB_Subs where sub LIKE '[mysqlescape $sub]%' AND category='TV'" -list]
                    foreach line $return {
                        foreach {user} $line break
                            if {[onchan $user $beta]} {     ; # If the user is on the channel it PM each user.
                                putnow "PRIVMSG $nick : Subscription found matching your request."
                            } else {
                        }
                    }

            set return [mysqlsel $SQL(conn) "select count(DISTINCT user) from DB_Subs where sub LIKE '[mysqlescape $sub]%' AND category='TV'" -flatlist] ; # Counts the users for the Channel message.
                foreach {users} $return break
                    putnow "PRIVMSG $beta :SUBSCRIPTION: $users Users With Subscriptions for $subscription"
            } else {
            }
        } else {
        }
    }
} 
```

很难解释我到底想要完成什么。

最后我试图达到的结果是......

*   从正则表达式设置 $subscription
*   列出数据库中的所有潜艇
*   将数据库中 sub 中的所有 % 转换为 * 以进行以下匹配
*   尝试将 sub 与 $subscription 匹配
*   如果它们匹配，则继续下一个 SELECT
*   从 sub 类似于 %sub% 的数据库中选择所有“用户”
*   然后向每个用户发送与选择匹配的消息
*   last set return 统计与 select 匹配的用户数并向频道发送消息

使用Donal建议的解决方案后。一切似乎都表现得像它应该有的一个小问题。代码的 [string match -nocase [get_subscription $SQL(conn)]* $subscription] 部分没有将每个都保存为要检查的变量。哪一行首先出现，它改为使用并停止而不是完成列表以查看是否还有更多匹配项。一些条目以不同的方式添加，但应提供相同的结果。例如，某些条目被添加为 The.TV.Show.S01 或 The%TV%Show%S01 这意味着它应该匹配两个部分并获得准确的计数和用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:47:02.540

这可能很困难，因为你有太多的东西。尝试将代码分解成更小的部分来完成明确定义的任务。这称为*重构*，它是使代码易于理解的重要部分。

以下是一些建议的重构：

```
proc get_subscription {conn} {
    set return [mysqlsel $conn "select sub from DB_Subs where category='TV'" -list] 
    foreach {sub} $return {
        regsub -all -- {%} $sub "*" sub1
    }
    return $sub1
}

proc notify_subscription_user {conn nick sub beta} {
    set return [mysqlsel $conn "select user from DB_Subs where sub LIKE '[mysqlescape $sub]%' AND category='TV'" -list]
    foreach line $return {
        lassign $line user
        if {[onchan $user $beta]} {
            putnow "PRIVMSG $nick : Subscription found matching your request."
        }
    }
}

proc send_subscription_message {conn sub beta subscription_text} {
    set return [mysqlsel $conn "select count(DISTINCT user) from DB_Subs where sub LIKE '[mysqlescape $sub]%' AND category='TV'" -flatlist]
    lassign $return users
    putnow "PRIVMSG $beta :SUBSCRIPTION: $users Users With Subscriptions for $subscription_text"
} 
```

有了这些，我们就可以将其余的代码改写成这样（删除空`else` 子句、将表达式拆分为行、组合嵌套`if`测试；所有基本的东西）：

```
bind pubm - * bind_pubm
proc bind_pubm {nick uhost handle channel text} {
    global SQL; sql:start

    if {
        [regexp -nocase -- {^!sub (.*) *$} $text -> subscription]
        && ([string match -nocase *HDTV* $subscription]
            || [string match -nocase *S??E??* $subscription])
        && [string match -nocase [get_subscription $SQL(conn)]* $subscription]
    } then {
        notify_subscription_user $SQL(conn) $nick $sub $beta
        send_subscription_message $SQL(conn) $sub $beta $subscription
    }
} 
```

这能解决您的问题吗？我不知道，但它应该给你一个更好的基础。

# java - JAX-RS - Wink - 使用 Wink 客户端读取文件的正确方法

> ID：15217023
> 
> 赞同：2
> 
> 时间：2013-03-05T06:13:34.723
> 
> 标签：java, rest, jersey, jax-rs, apache-wink

与[这个](https://stackoverflow.com/questions/12239868/whats-the-correct-way-to-send-a-file-from-rest-web-service-to-client)关于如何将二进制文件发送到客户端的问题相关。我正在这样做，实际上是我的方法@Produces("application/zip")，它适用于浏览器客户端。现在我正在尝试使用 Wink 客户端针对其余服务编写一些自动化测试。所以我的问题不是如何将文件发送到客户端，而是如何使用文件，作为 java rest 客户端（在本例中为 Apache Wink）。

我的资源方法如下所示... 一旦我有一个 Wink ClientResponse 对象，我如何从中获取文件以便我可以使用它？

```
 @GET
  @Path("/file")
  @Produces("application/zip")
  public javax.ws.rs.core.Response getFile() {

    filesToZip.put("file.txt", myText);

    ResponseBuilder responseBuilder = null;
    javax.ws.rs.core.Response response = null;
    InputStream in = null;
    try {

      in = new FileInputStream( createZipFile( filesToZip ) );
      responseBuilder = javax.ws.rs.core.Response.ok(in, MediaType.APPLICATION_OCTET_STREAM_TYPE);
      response = responseBuilder.header("content-disposition", "inline;filename="file.zip").build();

    } catch( FileNotFoundException fnfe) {
          fnfe.printStackTrace();
    }

    return response; 
```

实际创建 zip 文件的方法如下所示

```
 private String createZipFile( Map<String,String> zipFiles ) {

    ZipOutputStream zos = null;
    File file = null;

    String createdFileCanonicalPath = null;

    try {

      // create a temp file -- the ZIP Container
      file = File.createTempFile("files", ".zip");
      zos = new ZipOutputStream( new FileOutputStream(file));

      // for each entry in the Map, create an inner zip entry

      for (Iterator<Map.Entry<String, String>> it = zipFiles.entrySet().iterator(); it.hasNext();){

        Map.Entry<String, String> entry = it.next();
        String innerFileName = entry.getKey();
        String textContent = entry.getValue();

        zos.putNextEntry( new ZipEntry(innerFileName) );
        StringBuilder sb = new StringBuilder();
        byte[] contentInBytes = sb.append(textContent).toString().getBytes();
        zos.write(contentInBytes, 0, contentInBytes.length);
        zos.closeEntry();        
      }

      zos.flush();
      zos.close();

      createdFileCanonicalPath = file.getCanonicalPath(); 

    } catch (SecurityException se) {
      se.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    } finally {
      try {
        if (zos != null) {
          zos.close();
        }
      } catch (IOException e) {
        e.printStackTrace();
      }
    }

    return createdFileCanonicalPath;

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:13:14.297

您可以将其简单地用作输入流并用于`ZipInputStream`解压缩它。

这是使用 Apache HTTP 客户端的示例：

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpGet get = new HttpGet(url);
    get.addHeader(new BasicHeader("Accept", "application/zip"));
    HttpResponse response = httpclient.execute(get);
    InputStream is = response.getEntity().getContent();
    ZipInputStream zip = new ZipInputStream(is); 
```

# ruby-on-rails-3 - 在rails中查找上传文件的内容类型

> ID：15217029
> 
> 赞同：3
> 
> 时间：2013-03-05T06:14:05.043
> 
> 标签：ruby-on-rails-3, paperclip, bytearray, mime-types, stringio

我正在研究 ruby​​ on rails。我正在尝试做一个文件附件（图像/音频/视频）。

所以我有一个常用的方法，比如

```
byteArray = StringIO.new(File.open("path").read) 
```

是否可以找到 byteArray 的内容类型来检查上传的文件是否是 ruby​​ 中的图像/音频/视频/pdf。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-23T09:59:14.287

我看到这被标记了`paperclip`，所以我将告诉你我们如何使用回形针：

```
class Attachment < ActiveRecord::Base

        has_attached_file :attachment,
                styles:          lambda { |a| a.instance.is_image? ? {:small => "x200>", :medium => "x300>", :large => "x400>"}  : {:thumb => { :geometry => "100x100#", :format => 'jpg', :time => 10}, :medium => { :geometry => "300x300#", :format => 'jpg', :time => 10}}},
                :processors => lambda { |a| a.is_video? ? [ :ffmpeg ] : [ :thumbnail ] }

        def is_video?
                attachment.instance.attachment_content_type =~ %r(video)
        end

        def is_image?
                attachment.instance.attachment_content_type =~ %r(image)
        end

end 
```

如果您设法将文件放入 Paperclip，它基本上已经将其切成 content_type。这意味着如果您使用 a[`lambda`](http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/)来确定附件 content_type 是否包含`image`或`video`

如果你给我一些关于你想要达到的目标的更多信息，我可以给你一些重构的代码来帮助你解决问题:)

# python-2.7 - Python：总结一个浮点数

> ID：15217036
> 
> 赞同：2
> 
> 时间：2013-03-05T06:14:35.980
> 
> 标签：python-2.7

如果我有一个存储在名为 b_split[1] 的变量中的字符串列表。基本上 b_split 中的第一个位置包含这些纬度值作为字符串。

> ['10.2']
> ['10.4']
> ['10.5']

我希望能够总结它们..

```
for i in text_file:
    latitude = float(b_split[1])
print sum(latitude) 
```

它给了我一个错误，即“浮动”对象不可迭代

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:15:49.320

纬度应该是一个列表

它应该是

```
latitude.append(float(b_split[1])) 
```

最后

```
print sum(latitude) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:17:04.637

如果您不需要结果列表并且只想对项目求和，您可以尝试将您关心的项目直接传递给`sum`函数：

```
In [1]: my_list = ['10.2', '10.4', '10.5']

In [2]: sum(float(item) for item in my_list)
Out[2]: 31.1 
```

这将创建列表中每个项目的[生成器](http://www.network-theory.co.uk/docs/pytut/GeneratorExpressions.html)，并对`float`每个项目求和。正如@avasal 所提到的，你得到错误的原因是因为你实际上是`latitude`在每次迭代中重新分配，你的最终结果是一个浮点数（而不是一个列表/可迭代）：

```
In [3]: for item in my_list:
   ...:     my_var = float(item)
   ...:     

In [4]: print my_var
10.5 
```

因此，当您尝试`sum`它时，您会收到上面看到的错误，因为 sum[对 iterable 的元素](http://docs.python.org/2/library/functions.html#sum)求和。由于您无法遍历 a `float`，因此您会收到`not iterable`错误消息。

# iphone - uitableviewcell 自定义背景问题

> ID：15217037
> 
> 赞同：0
> 
> 时间：2013-03-05T06:14:38.883
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitableview

我有一个分组的表格视图，每个部分都有一行。我将单元格的背景视图设置为我的自定义图像，我希望该行以这种方式呈现：

![在此处输入图像描述](../Images/415331829fd213485d3475f03c0dd3bc.png)

但它是这样渲染的（注意没有阴影，它是平的）：

![在此处输入图像描述](../Images/a724610442d0d3ae4064d19b123850b8.png)

这是 cellforRowAtIndexPath 中的代码：

```
((UIImageView *)cell.backgroundView).image = [UIImage imageNamed:@"BGImage"]; 
```

其中 BGImage 是这篇文章中的第一张图片，带有阴影。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T06:16:56.017

您必须使用以下 UITableView 的委托方法设置您的单元格背景：-

```
- (void)tableView: (UITableView*)tableView
  willDisplayCell: (UITableViewCell*)cell
forRowAtIndexPath: (NSIndexPath*)indexPath
{
            UIImage *img = [UIImage imageNamed:@"yourImage.png"];  // get your background image
            UIColor *backgroundColor = [[UIColor alloc] initWithPatternImage: img];
            cell.backgroundColor = backgroundColor;
            cell.textLabel.backgroundColor = [UIColor clearColor];
            cell.detailTextLabel.backgroundColor = [UIColor clearColor]; 

} 
```

你的问题可能是你的形象`Height` `width`和你的手机`height` `width`不一样

我在我的项目集中使用上述方法，在单元格中设置了波纹管阴影图像：-

![在此处输入图像描述](../Images/716b3167626f3f69358937b91f568735.png)

它在项目中的样子：-

![在此处输入图像描述](../Images/9f0aa320206cca4f5e77093d95212df5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:30:43.930

1.  你的影子必须是你形象的一部分。
2.  您必须正确设置高度和宽度。
3.  我建议您创建一个自定义`UITableViewCell`.
4.  将背景图像添加到您的单元格。它肯定会显示阴影。

# java - String.contains(otherString) 给出“意外类型”

> ID：15217039
> 
> 赞同：-3
> 
> 时间：2013-03-05T06:14:42.503
> 
> 标签：java, string, contains, bluej

```
String doubleSpace = "  ";
String news = "The cat jumped.  The dog did not.";

while (news.contains(doubleSpace) = true)
{
    news=news.replaceAll("  ", " ");
} 
```

以上将无法编译，给出错误“意外类型。必需：变量，找到：值”我不明白为什么，因为 String.contains() 应该返回一个布尔值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:15:41.893

```
while (news.contains(doubleSpace) = true) 
```

应该

```
while (news.contains(doubleSpace) == true) 
```

= 用于分配

== 用于检查条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:20:26.487

字符串上的 .contains() 方法已经返回布尔值，因此您不应应用比较

无论如何，如果您确实应用应用布尔运算符 '==' 而不是 '='

所以你的代码可以是 while (news.contains(doubleSpace) == true)

```
{
    news=news.replaceAll("  ", " ");
} 
```

或更准确地说

```
while (news.contains(doubleSpace))
{
    news=news.replaceAll("  ", " ");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:16:15.200

存在编译错误

```
while (news.contains(doubleSpace) = true) 
```

应该

```
while (news.contains(doubleSpace) == true) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:15:52.867

你的while循环是错误的，如下所示。你是通过使用赋值值进行赋值的，所以你得到了那个错误。也不需要与true比较，因为`contains(...)`函数本身会根据你的需要返回true或false。

```
while (news.contains(doubleSpace))
{
    news=news.replaceAll("  ", " ");
} 
```

# iphone - MapView 加载后从 XML 加载注释

> ID：15217041
> 
> 赞同：0
> 
> 时间：2013-03-05T06:15:04.497
> 
> 标签：iphone, objective-c, xcode4.5

有没有办法加载第`MapView`一个然后用注释填充它？

我问的原因：当我单击首先调用我的 XML 来填充注释的地图时，会出现*延迟*，然后视图才会使用我的`MapView`.

我担心的是，如果 XML 增长，它会进一步延迟或超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:33:05.457

请参阅此代码：

```
#import "MapViewController.h"
#import "MapViewAnnotation.h"

@implementation MapViewController

@synthesize mapView;

// When the view loads
- (void)viewDidLoad
{

    [self performSelector:@selector(addAnnotation) withObject:@"" afterDelay:5.0];
}

//here i am delaying my annotation to 5 second so my map can first display

-(void)addAnnotation
{
    // Set some coordinates for our position (Buckingham Palace!)
    CLLocationCoordinate2D location;
    location.latitude = (double) 51.501468;
    location.longitude = (double) -0.141596;

    // Add the annotation to our map view
    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Buckingham Palace" andCoordinate:location];
    [self.mapView addAnnotation:newAnnotation];
    [newAnnotation release];
}

// When a map annotation point is added, zoom to it (1500 range)
- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views
{
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id <MKAnnotation> mp = [annotationView annotation];
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate], 1500, 1500);
    [mv setRegion:region animated:YES];
    [mv selectAnnotation:mp animated:YES];
}

// Received memory warning
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

// If the view unloads, release the map view
- (void)viewDidUnload {
    [super viewDidUnload];
    [mapView release];
    mapView = nil;
}

// Deallocations
- (void)dealloc {
    [mapView release];
    [super dealloc];
}

@end 
```

# javascript - 位置动画在 IE 上运行缓慢

> ID：15217042
> 
> 赞同：0
> 
> 时间：2013-03-05T06:15:04.887
> 
> 标签：javascript, jquery, html

我正在尝试创建 html 页面，当用户在 textarea 中键入时，笔将在其中移动。为了创建动画，就好像它在写作一样，我正在上下移动笔。动画在 chrome 中运行良好，但在 IE 中滞后。请建议我如何提高动画的速度并使其像用户类型一样编写。虽然 IE8 不如 chrome 或任何其他浏览器，但代码应该可以在 IE8+ 中运行，请帮助

```
 var contentHeight = $("#Typing").textareaHelper('height');
            $("#Typing").height(contentHeight);
            localleft = $("#Typing").textareaHelper('caretPos').left + 280;
            localtop = $("#Typing").textareaHelper('caretPos').top;

            $('#Feather').animate({ left: (($("#Typing").textareaHelper('caretPos').left) + 270) },1,animation2);
            $('#Feather').animate({ top: (($("#Typing").textareaHelper('caretPos').top) - 8) }, 1);
            $('#Feather').animate({ left: (($("#Typing").textareaHelper('caretPos').left) + 280) }, 1);
            $('#Feather').animate({ top: $("#Typing").textareaHelper('caretPos').top }, 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:20:03.727

嗯，我要优化的第一件事就是你一直在搜索 DOM。每次你这样做。

```
$("#Typing") 
```

您正在页面中搜索该元素。最好加载一次然后对其进行操作。

```
var $typing = $("#Typing");
// do your animations with $typing.animate(); 
```

它可能无法解决整个问题，但它是一个开始。

编辑：对 $("#Feather") 做同样的事情

# jquery - 树视图嵌套循环jQuery

> ID：15217044
> 
> 赞同：1
> 
> 时间：2013-03-05T06:15:06.563
> 
> 标签：jquery, html, json

我有一个应用程序，它包含我们所有客户的树状视图。对于每个客户，您可能有多个项目，我有这样的表

```
+--------+----------+-------------------+
|ID      | ParentID | GroupName         |
|--------+----------+-------------------+
| 1      | Null     |    Main Group     |
| 2      | 1        |    Item 1         |
| 3      | 2        |    Item 2         |
| 4      | 2        |    Item 3         |
| 5      | 3        |    Item 2.1       |
| 6      | 2        |    Item 4         |
| 7      | 4        |    Item 3.1       |
| 8      | 7        |    Item 3.1.1     |
| 9      | 2        |    Item 5         |
| 10     | 3        |    Item 2.2       |
+--------+---------+--------------------+ 
```

AND JASON DATA 来自这样的服务器

```
[{"ID":1,"ParentID":null,"GroupName":"Main Group"},{"ID":2,"ParentID":1,"GroupName":"Item 1"},{"ID":3,"ParentID":2,"GroupName":"Item 2"},{"ID":4,"ParentID":2,"GroupName":"Item 3"},{"ID":5,"ParentID":3,"GroupName":"Item 2.1"},{"ID":6,"ParentID":2,"GroupName":"Item 14"},{"ID":7,"ParentID":4,"GroupName":"Item 3.1"},
    {"ID":8,"ParentID":7,"GroupName":"Item 3.1.1"},{"ID":9,"ParentID":2,"GroupName":"Item 5"},{"ID":10,"ParentID":3,"GroupName":"Item 2.2"}] 
```

以及我怎样才能通过 jquery In Html somting 这样

```
<ul>
    <li id="1"><a>Main Group</a>
        <ul>
        <li id="2"><a>Item 1</a></li>
        <li id="3"><a>Item 2</a></li>
           <ul>
           <li id="5"><a>Item 2.1</a></li>
           <li id="10"><a>Item 2.2</a></li>
           </ul>
        <li id="4"><a>Item 3</a></li>
           <ul>
           <li id="7"><a>Item 3.1</a></li>
              <ul>
              <li id="8"><a>Item 3.1.1</a></li>
              </ul>
           </ul>
        <li id="6"><a>Item 4</a></li>
        <li id="9"><a>Item 5</a></li>
        </ul>
    </li>    
</ul> 
```

我尝试使用该代码，但我得到错误的结果

```
$.getJSON('test.json', function(data) {
     var items = [];

      $.each(data, function(key, val) {
        items.push('<li id="' + val.ID + '">' + val.GroupName + '</li>');
      });

      $('<ul/>', {
        html: items.join('')
      }).appendTo('body');
    }); 
```

# php - 如何从 cron 命令传递参数？

> ID：15217045
> 
> 赞同：0
> 
> 时间：2013-03-05T06:15:06.820
> 
> 标签：php, codeigniter, cron, crontab

我正在开发基于 CodeIgniter 的项目。我有如下 cron 命令：

```
0 5 * * * /usr/bin/php /var/www/my-project/index.php 'test/mytest' 
```

这里 test 是控制器， mytest 是函数。现在我想从 cron 命令为 mytest 函数传递一个参数。假设我想传递一个城市名称。

我应该在 cron 命令中进行什么调整以实现我的目标。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:20:49.507

您可以像在应用程序中一样传递参数。

```
test/mytest/cityName 
```

其中 cityName 是城市的任何名称。

您的测试控制器应类似于：

```
class Test extends Controller
{
    .
    .
    .

    function mytest($cityName = '')
    {
        echo $cityName;
    }
} 
```

# maven - 不同配置文件激活方法的结果不同？

> ID：15217048
> 
> 赞同：1
> 
> 时间：2013-03-05T06:15:29.177
> 
> 标签：maven

我已经使用 maven 大约两年了，但我认为我并不完全了解 maven 中的配置文件，尤其是当我遇到以下问题时。

我有一个 maven 项目，包含三个模块，secweb-parent、secweb-service 和 secweb-web，secweb-sevice 依赖于 spring-webmvc，secweb-web 依赖于 secweb-service。

**问题是 ：**

1）当我使用**'mvn clean install -Dinclude'**时，它运行良好，并且 spring-mvc.jar 将在 secweb-web.war 中找到

2）当我使用**'mvn clean install -Pinclude-jar'**时，它不起作用，并且在 secweb-web.war 中找不到 spring-mvc.jar

有人知道为什么吗？使用配置文件时有什么需要注意的吗？

（我知道我可以定义依赖范围，这里这个项目只是为了演示不同配置文件激活方法的不同结果）

* * *

secweb-parent 的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <properties>
        <project.version>1.0.0</project.version>
    </properties>

    <groupId>com.mediatek.dt</groupId>
    <artifactId>secweb-parent</artifactId>
    <version>${project.version}</version>
    <packaging>pom</packaging>

    <modules>
        <module>../secweb-web</module>
        <module>../secweb-service</module>
    </modules>
</project> 
```

用于 secweb 服务的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.mediatek.dt</groupId>
        <artifactId>secweb-parent</artifactId>
        <version>${project.version}</version>
        <relativePath>../secweb-parent</relativePath>
    </parent>

    <artifactId>secweb-service</artifactId>

    <profiles>
        <profile>
            <id>include-jar</id>
            <activation>
                <property>
                    <name>include</name>
                </property>
            </activation>
            <dependencies>
                <dependency>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-webmvc</artifactId>
                    <version>2.5</version>
                </dependency>
            </dependencies>
        </profile>
    </profiles>
</project> 
```

用于 secweb-web 的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.mediatek.dt</groupId>
        <artifactId>secweb-parent</artifactId>
        <version>${project.version}</version>
        <relativePath>../secweb-parent</relativePath>
    </parent>

    <artifactId>secweb-web</artifactId>
    <packaging>war</packaging>

    <dependencies>
        <dependency>
            <groupId>com.mediatek.dt</groupId>
            <artifactId>secweb-service</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T08:00:48.663

您可以使用[Maven 帮助插件](http://maven.apache.org/plugins/maven-help-plugin/active-profiles-mojo.html)检查活动配置文件，如下例所示

```
change directory to the parent
e.g. cd /my/project/secweb-parent
Then execute the following command twice for comparing

mvn help:help:active-profiles

mvn help:help:active-profiles -Pinclude-jar 
```

无论如何，重要的一点是***版本***，您已定义为*1.0.0*。我宁愿使用*1.0.0-SNAPSHOT*代替。

[您可以在此处](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-syntax.html)查看有关 SNAPSHOT 的更多信息。

> 你为什么要用这个？SNAPSHOT 版本用于正在积极开发的项目。如果你的项目依赖于一个正在积极开发的软件组件，*你可以依赖一个 SNAPSHOT 版本，* **当你运行构建时，Maven 会定期尝试从存储库下载最新的快照**。同样，如果您的系统的下一个版本将具有“1.4”版本，那么您的项目将具有“1.4-SNAPSHOT”版本，直到它正式发布。
> 
> 作为默认设置，Maven 不会检查远程存储库上的 SNAPSHOT 版本。要依赖 SNAPSHOT 版本，用户必须明确启用使用 POM 中的存储库或 pluginRepository 元素下载快照的能力。

在我们的 stackoverflow 上还有一个关于快照的有用问题和答案，[这里](https://stackoverflow.com/questions/5901378/what-exactly-is-a-maven-snapshot-and-why-do-we-need-it)也是。

我希望这可能会有所帮助。

# c++ - 将 C++ 插件插入 C 软件的内存管理

> ID：15217051
> 
> 赞同：1
> 
> 时间：2013-03-05T06:15:33.960
> 
> 标签：c++, c, memory-management

假设我有一个 C 程序，它调用一些用 C++ 编写的代码。为了使它更具体一点，这可能类似于以下内容：

```
// C++:
extern "C" void * pluginFunction(void * input) {
    result = (SomeObject *) input;
    if (! result)
        SomeObject * result = new SomeObject();

    // Do something really intelligent here.
    return (void*) result;
} 
```

对于调用 C 程序：

```
int main() {
    void * result;
    while (something) {
        result = pluginFunction(result);
        // some more things
    }

    // Cleanup memory
} 
```

此外，假设 C 程序提供自定义内存管理。因此，C 程序总是知道使用提供的函数 和`custom_alloc`分配了哪些内存。`custom_free``custom_realloc`

在 C++ 端，运算符、`new`和已在标准和版本中全局重载。`new[]``delete``delete[]``throw ()`

现在我的问题：

*   如果 C 部分在调用 期间释放通过自定义函数分配的所有内存`pluginFunction`，它会释放*所有*实际分配的内存，还是有比 的变体提供的内存更多的东西`new`？
*   绕过对适当析构函数的调用会造成什么进一步的伤害？是否可以在 C++ 方面完全避免这种伤害，例如在`pluginFunction`?
*   您是否看到任何潜在的陷阱或副作用？

请注意，我无法访问调用 C 程序，但必须使用提供的接口。因此，我没有其他选择来安排我的记忆，让它得到适当的释放并希望最好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:35:24.323

规则很简单：你必须销毁你分配的内存。所以你的插件接口必须同时提供分配和解除分配功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:03:06.747

1.  C++ 函数还可以调用 malloc() 或任何其他可能调用 malloc() 的标准 C 库，因此覆盖 new 和 delete 可能还不够。您还需要覆盖 malloc、calloc 等。

2.  C++ 代码可能会执行一些其他需要在析构函数中取消初始化的初始化，例如打开硬件、套接字、文件等。所以是的，可能会有副作用。

3.  见 2。

# php - 是否可以将音频文件与 apns 推送消息一起发送

> ID：15217053
> 
> 赞同：1
> 
> 时间：2013-03-05T06:15:42.680
> 
> 标签：php, ios, push-notification, apple-push-notifications

这个问题可能看起来很奇怪，但请原谅。

是否可以发送**带有推送消息的音频文件**？这样每当设备收到推送消息时，就会自动播放音频文件！

我知道有效载荷只接受字符串，但只想知道其他可能性！ [资源](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW1)

到目前为止，我们尝试过这种方式，

推送消息被发送到设备。每当用户选择推送消息时，设备上都会播放警报（iPhone 或 Ipad 中的本地音频文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:37:27.637

You can only send a filename of a sound file that is packaged with your application. That file will be played automatically when the notification arrives. Actually sending a sound file in the payload in not possible. Even if you encode the data somehow in a way that can be included in the json payload of the notification, you are limited to 256 bytes, and there isn't much you can send with that.

APN Guide :

> sound
> 
> The name of a sound file in the application bundle. The sound in this file is played as an alert. If the sound file doesn’t exist or default is specified as the value, the default alert sound is played. The audio must be in one of the audio data formats that are compatible with system sounds; see “Preparing Custom Alert Sounds” for details.

# android - Android外置存储只读一行

> ID：15217060
> 
> 赞同：-2
> 
> 时间：2013-03-05T06:16:11.127
> 
> 标签：android, file, save

我只想阅读 /sdcard/Android/data/com.example/Files/ 中文本文件的第三行。有没有办法做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:24:24.440

```
LineIterator ip = IOUtils.lineIterator( new BufferedReader(FileReader("__.txt"))); for (int lineNumber = 0; it.hasNext(); lineNumber++) { String line = (String) ip.next(); if (lineNumber == 3) { return line; } } 
```

# php - Smarty 不在 tpl 文件中显示数组值

> ID：15217065
> 
> 赞同：0
> 
> 时间：2013-03-05T06:16:26.917
> 
> 标签：php, arrays, smarty

我想通过 smarty 模板创建一个 XML 文件。为此，我将一个数组传递给模板文件。这是我用来生成数组和传递的代码。

```
$correct_answers = explode(",", $answer['answer']);
$smarty->assign('answers', $correct_answers); 
```

数组已成功生成，我使用`print_r()`;检查了它 但我的问题是，它在 tpl 文件中显示为空。如果我检查计数，它显示 0。我无法获取数组值。这是模板文件代码。

```
{assign var = "inc" value="0"}
{section name=answer loop=$answers}
    <simpleChoice identifier="{$answers[answer]}">{$answers[answer]}</simpleChoice>         
    {assign var = "inc" value=$inc+1}
{/section} 
```

我不知道我哪里出错了。

数组结构是，

```
Array
(
    [0] => Alonso
    [1] => Jenson Button
    [2] => Rubens Barrichello
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:20:08.933

试试这个： 而不是`section`使用`foreach`。

```
{foreach from=$answers item=answer}
    <simpleChoice identifier="{$answer}">{$answer}</simpleChoice>         
    {assign var = "inc" value=$inc+1}
{/foreach} 
```

这类似于`foreach`php 中的循环。

参考：[http ://www.smarty.net/docsv2/en/language.function.foreach](http://www.smarty.net/docsv2/en/language.function.foreach)

# google-chrome - 请求执行跨域 XMLHttpRequest 的权限

> ID：15217066
> 
> 赞同：2
> 
> 时间：2013-03-05T06:16:30.503
> 
> 标签：google-chrome, google-chrome-extension

我正在做一个需要跨域请求的项目，但似乎没有任何方法可以在纯网页中允许这样做。

Chrome 扩展程序可以简单地请求他们想要向其发出请求的域的权限，如下例所示。

```
"permissions": [
  "http://www.google.com/",
  "https://www.google.com/"
] 
```

[http://developer.chrome.com/extensions/xhr.html](http://developer.chrome.com/extensions/xhr.html)

我发现[https://developers.google.com/chrome/apps/docs/no_crx](https://developers.google.com/chrome/apps/docs/no_crx)似乎更接近我正在寻找的东西，但唯一允许的权限是“地理位置”、“通知”和“无限存储”。

可以在我想向其发出请求的域上设置 HTTP 标头 Access-Control-Allow-Origin，但它们不受我的控制，因此不实用。

同样的 Content-Security-Policy: connect-src [https://www.google.com](https://www.google.com)；主要用于进一步限制访问而不是开放访问。

[http://www.html5rocks.com/en/tutorials/security/content-security-policy/](http://www.html5rocks.com/en/tutorials/security/content-security-policy/)

我理解安全问题，但快速搜索会显示人们通过制作代理服务器来解决这个问题。允许发出等效请求是否有意义，这意味着没有用户会话/cookie 信息的请求（如隐身模式）？或者页面可以以与扩展相同的方式请求许可的某种机制？似乎有点倒退，要求这样的事情以浏览器特定的方式关闭。

就像 webspeech api（或 getUserMedia）请求访问使用麦克风一样。

有什么想法或者我错过了什么吗？

编辑：我在别处发布了这个并得到：

如果您从受您控制的域发出请求，则可以使用其他选项（如 JSONP）来访问来自另一个域的数据。或者，您可以加载 iframe 并使用 postMessage() 与内容交互 - 有许多工具也强制您尝试与之通信的域愿意共享该数据。

我：

JSONP 看起来像是提供 JSON 的数据源的解决方案，但我不确定这是否能解决我的整体问题。我正在尝试创建一个工具，该工具将从各种来源中提取数据，以显示结果和解释信息以执行操作。一个查询可能是 jsonp 或其他官方方法应该允许的 google 搜索，但这不适用于从其他网页抓取数据。所有发出的请求都不需要用户会话信息，因此代理可以工作，但会增加延迟和维护成本。

postMessage() 接口需要被请求的页面来实现监听器，对吗？

到目前为止，“最佳”解决方案似乎仍然是拥有一个在特权环境中运行的伴随扩展，它可以发出请求并与页面交流结果。该工具可以在网页中执行各种其他工作，因此我宁愿将主要环境保留为网页，并选择运行扩展程序。

# mysql - MySQL REPLACE 在自动递增的行中

> ID：15217067
> 
> 赞同：5
> 
> 时间：2013-03-05T06:16:40.613
> 
> 标签：mysql, replace, innodb

假设我有一个 MySQL 表，其中包含三列：`id`，`a`并且`b`名为的列`id`是一个`AUTO INCREMENT`字段。如果我将如下查询传递给 MySQL，它将正常工作：

```
REPLACE INTO `table` (`id`, `a`, `b`) VALUES (1, 'A', 'B') 
```

但是，如果我跳过该字段`id`，它将不再起作用，这是意料之中的。

`ignore`我想知道查询中的某些字段是否有方法`REPLACE`。所以上面的查询可能是这样的：

```
REPLACE INTO `table` (`a`, `b`) VALUES ('A', 'B') 
```

**为什么我需要这样的东西？**

有时我需要使用查询检查数据库`SELECT`以查看行是否存在。如果它存在，那么我需要`UPDATE`现有的行，否则我需要`INSERT`一个新的行。我想知道是否可以通过单个`REPLACE`查询获得类似的结果（但不相同）。

为什么不能是*同样*的结果？仅仅是因为现有的行和新的行将`REPLACE`丢失*当前*行并增加*自动递增*的值。相反，在查询中，字段将保持不变。`DELETE``INSERT`*`primary key`*`UPDATE``primary key``AI`**

 **MySQL[替换](http://dev.mysql.com/doc/refman/5.0/en/replace.html)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T09:07:30.857

*   这不是您应该使用替换的方式。
*   仅当您知道`primary key`值时才使用替换。

手动的：

> 请注意，除非表具有 PRIMARY KEY 或 UNIQUE 索引，否则使用 REPLACE 语句是没有意义的。它变得等同于 INSERT，因为没有用于确定新行是否与另一行重复的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-03T22:03:39.430

如果您有多个与字段匹配的行怎么办？

考虑添加一个可以匹配和使用的密钥`INSERT IGNORE.. ON DUPLICATE KEY UPDATE`。INSERT IGNORE 的工作方式与 REPLACE 略有不同。

INSERT IGNORE 非常快，但可能会产生一些不可见的副作用。

`INSERT... ON DUPLICATE KEY UPDATE`

它的副作用较少，但可能要慢得多，尤其是对于 MyISAM、繁重的写入负载或重索引的表。

有关副作用的更多详细信息，请参阅： [https ://stackoverflow.com/a/548570/1301627](https://stackoverflow.com/a/548570/1301627)

使用 INSERT IGNORE 似乎非常适合快速查找具有少量列的 MyISAM 表（可能只是一个 VARCHAR 字段）。

例如，

```
create table cities (
    city_id int not null auto_increment,
    city varchar(200) not null,
    primary key (city_id),
    unique key city (city))
    engine=myisam default charset=utf8;

insert ignore into cities (city) values ("Los Angeles"); 
```

在这种情况下，重复重新插入“Los Angeles”根本不会导致对表进行任何实际更改，并且会阻止生成新的 auto_increment ID，这有助于防止 ID 字段耗尽（用完所有可用的 auto_increment 范围在剧烈搅动的桌子上）。

为了更快的速度，在插入之前使用像幽灵哈希这样的小哈希，并将其用于单独的唯一键列，然后 varchar 根本不会被索引。**

# php - 'µg' 字符在 json_encode() 中丢失——php

> ID：15217073
> 
> 赞同：0
> 
> 时间：2013-03-05T06:17:01.093
> 
> 标签：php, json, string, character-encoding

`var_dump($array)`打印`µg`（微克）字符很好。当我使用 打印相同的数组时`echo json_ecode($array);`，`µg`字符被替换为`null`。

如何正确编码字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:19:42.040

您必须使用[`utf8_encode`](http://php.net/utf8-encode)正确编码字符串以在 JSON 中使用。

# javascript - 使用 Backbone.js 创建标签、下拉框

> ID：15217074
> 
> 赞同：0
> 
> 时间：2013-03-05T06:17:04.620
> 
> 标签：javascript, backbone.js

了解backbone.js 创建模型、coll、视图的基础知识。但是如何在模型中为以下脚本创建属性以及如何在模板中查看它？

```
<table>
                <tr>
                    <td>
                       <label>T:</label>
                    </td>
                    <td>
                        <label>F</label>
                    </td>
                </tr>
                <tr>
                    <td>
                       <label>Fi:</label>
                    </td>
                    <td>
                        <input type="text" id="fi" readonly="true"/>
                    </td>
                </tr>             
                <tr>
                    <td>
                       <label>Ba:</label>
                    </td>
                    <td>
                        <select id="ba">
                           <option value="4">1200</option>
                           <option value="5">2400</option>
                           <option value="6">4800</option>
                           <option value="7">9600</option>
                           <option value="8">19200</option>                           
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label>St:</label>
                    </td>
                    <td>
                        <input type="radio" name="st" value="0" checked="checked" > one
                        <input type="radio" name="st" value="1"> two
                    </td>
                </tr></table> 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:28:36.687

您可以将“ba”键值作为 {key:value} 数据存储在模型的一个字段中，如下所示：

```
var mdl = new Backbone.Model({ba:{1:1200, 2:2400}});

var SelectView = Backbone.View.extend({
                             template: _.template($("#mytemplate").text()),
                             render: function() {
                                 this.$el = $(this.el);
                                 this.$el.html(this.template(this.model.attributes));
                                 return this;
                             }
                            });
var view = new SelectView({model: mdl}) 
```

然后，模板

```
<script type="template/html" id="mytemplate">
  <select id="ba">
    <% for (key in ba) { %>
    <option value="<%=key%>"><%=ba[key]%></option>
    <% } %>
  </select>
</script> 
```

我跳过了模板中的其他内容，并展示了一种方法，即如何使用选项创建“选择”。

[您可以在此处](http://backbonejs.org/#View-render)阅读有关 Backbone.View.render的信息

关于模板引擎（来自下划线）[here](http://underscorejs.org/#template)

# javascript - jquery-1.4.1.min.js 不工作

> ID：15217076
> 
> 赞同：0
> 
> 时间：2013-03-05T06:17:05.480
> 
> 标签：javascript, jquery, asp.net, visual-studio-2010, visual-studio-2008

下面的代码在 Visual Studio 2010 中运行良好，但在 Visual Studio 2008 中不起作用，如果我错过了任何其他异常？我还应该检查什么才能知道我错过了什么？

注意*我只能收到警报（开始）但不能收到警报（结束1）和警报（结束2）

最新编辑的评论 - 我发现我的 jquery 文件没有正确加载，我不想使用 url，可以提供我本地的 src 吗？我在解决方案中有几个项目文件，我的 Script 文件夹在我的项目文件之一中，那么我的本地 src 应该是什么样子？

```
<script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>
<script type="text/javascript">
alert("Starting");

var data = {
    btnSaveDraft: "this is save draft button",
    btnSubmit: "this is button submit"       

}

function ShowTooltip() {
    var Tip = $("<div class='dinamictip'></div>");
    $("input").hover(function() {
        Tip.text('');
        var ToolTipID = $(this).attr('id');
        var height = $(this).height() + 10;
        var offset = $(this).offset();
        if (data[ToolTipID].split('<br\>').length - 1) {
            var temp = data[ToolTipID].split('<br\>').length - 1;
            height = temp * 10;
        } else {
            height = 10;
        }

        Tip.html(data[ToolTipID]);

        Tip.css('display', 'inline').css('position', 'absolute').css('background', 'lightyellow').css('border', '1px solid #cccccc').css('color', '#6c6c6c').css('left', offset.left).css('top', offset.top - height).css('border-radius', '15px')

        Tip.appendTo('body');

    },

            function() {
                Tip.remove();
            });

}

   $(function() {
    ShowTooltip();
    alert("End1");
});
alert("End2");
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:26:31.783

尝试在`$(document).ready(function(){ }`. 此外，没有必要像这样链接多个 css() 调用。尝试使用的语法`css({prop1: 'value1', prop2: 'value2'})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:20:59.627

使用 FireBug 控制台检查您的脚本是否已加载。

添加这一行..而不是你的 jquery js 文件

[http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:22:43.520

可能这是错误，请尝试调用`doc ready`：

```
$(function(){
   ShowTooltip();
}); 
```

# arrays - vba 数组操作硬编码语法

> ID：15217080
> 
> 赞同：1
> 
> 时间：2013-03-05T06:17:45.417
> 
> 标签：arrays, excel, vba, syntax

基于 c 的语言中的硬编码数组操作很常见，如下所示：

```
int i[] = new i[2][2];
i = {{1,1},{2,2}}; 
```

如何在 vba 脚本中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:23:43.973

我认为您可以使用该[`Array()`函数](http://msdn.microsoft.com/en-us/library/aa262675%28v=vs.60%29.aspx)来构建一个值数组。

我还没有尝试过，但我怀疑你可以用这个做你想做的事：

```
Dim i as Variant
i = Array(Array(1, 1), Array(2, 2)) 
```

已经有一段时间了，所以我的 VBA 有点生疏了。

# prolog - Prolog 冒号运算符是什么意思？

> ID：15217085
> 
> 赞同：6
> 
> 时间：2013-03-05T06:17:53.993
> 
> 标签：prolog

我发现另一篇讨论冒号的帖子，但表达式看起来不太一样。
我看到这个 X 变量可以作为参数传递，好奇它的作用是什么？

> > X = x:2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T14:08:18.723

如果没有模块， : 是一个中缀函数符号。你可以通过执行来试试这个

```
?- x:2 =.. X.
X = [:, x, 2]. 
```

在 swi 提示符下。

=.. 运算符的一些解释：它是一种关系，其中左侧是任意项“symbol(argument1,argument2,...)”，右侧是列表“[symbol,argument1,argument2, ...]”。

希望能帮助到你！

# php - SQLite 在通过 URL 访问时显示数据

> ID：15217087
> 
> 赞同：2
> 
> 时间：2013-03-05T06:18:04.137
> 
> 标签：php, html, sql, sqlite

我正在创建一个网站，用户可以在其中登录共享图片。问题是，当我输入 domain.com/database.sqlite 时，它​​会显示一堆问号和一些存储在数据库中的数据。我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T04:53:54.320

您可以按照其他人的建议配置您的服务器，但如果您可以将数据库移出公共目录会更好。这样，如果您升级服务器并且您的设置被更改，数据库仍然无法访问。

# ruby-on-rails - 控制器中的 Rails respond_to

> ID：15217092
> 
> 赞同：0
> 
> 时间：2013-03-05T06:18:32.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是来自互联网的代码，我无法理解 response_to、format.html 和 format.js 在控制器中的作用。

```
def create
 @review = Review.create!(params[:review])
 flash[:notice] = "Thank you for reviewing this product"
  respond_to do |format|
   format.html { redirect_to @review.product }
   format.js
 end
end 
```

感谢您的时间。

拉姆亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:21:49.303

respond_to(*types, &block) public 如果没有 Web 服务支持，收集数据以显示人员列表的操作可能如下所示：

```
 def index
    @people = Person.find(:all)
  end 
```

这是相同的操作，其中包含 Web 服务支持：

```
 def index
    @people = Person.find(:all)

    respond_to do |format|
      format.html
      format.xml { render :xml => @people.to_xml }
    end
  end 
```

这就是说，“如果客户想要 HTML 来响应这个动作，就像我们以前一样做出响应，但是如果客户想要 XML，则以 XML 格式返回他们的人员列表。” （Rails 根据客户端提交的 HTTP Accept 标头确定所需的响应格式。）

假设您有一个添加新人的操作，如果该公司尚不存在，则可以选择创建他们的公司（按名称），没有 Web 服务，它可能如下所示：

```
 def create
    @company = Company.find_or_create_by_name(params[:company][:name])
    @person  = @company.people.create(params[:person])

    redirect_to(person_list_url)
  end 
```

这是相同的操作，其中包含 Web 服务支持：

```
 def create
    company  = params[:person].delete(:company)
    @company = Company.find_or_create_by_name(company[:name])
    @person  = @company.people.create(params[:person])

    respond_to do |format|
      format.html { redirect_to(person_list_url) }
      format.js
      format.xml  { render :xml => @person.to_xml(:include => @company) }
    end
  end 
```

如果客户端需要 HTML，我们只需将它们重定向回人员列表。如果他们想要 Javascript (format.js)，那么这是一个 RJS 请求，我们渲染与此操作关联的 RJS 模板。最后，如果客户需要 XML，我们将创建的人员呈现为 XML，但有一点不同：我们还在呈现的 XML 中包含了该人的公司，因此您会得到如下内容：

[http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)

# android - 当软键盘在表面视图上关闭时会出现黑屏，并且还会影响 Fragment 中的 Coverflow

> ID：15217094
> 
> 赞同：2
> 
> 时间：2013-03-05T06:18:34.847
> 
> 标签：android, surfaceview, android-softkeyboard, coverflow

我`Fragment`在我的应用程序中使用视图。除了在顶视图中，我正在使用 Surface 视图。我在单击按钮时打开软键盘。然后无论我要写什么，它都必须显示在表面视图上。一切正常。但问题是当我关闭软键盘时，我的表面视图背景上会显示一个黑屏。

如果我使用`surfaceview.setBackgroundColor(Color.TRANSPRENT)`，那么它将影响我的封面流图像。我的图像不经常更改。打开软键盘时会受到影响。

所以我无法理解如何解决这个问题？有没有其他解决方案可以消除黑屏？

等待回复。

# wpf - WPF列表框选择更改未在项目单击时触发

> ID：15217099
> 
> 赞同：1
> 
> 时间：2013-03-05T06:19:18.437
> 
> 标签：wpf, listbox, wpf-controls, listboxitem

在我的 wpf 应用程序中，当我选择 listboxItem 时，不会触发 listbox 的 SelectionChanged 事件。但是，当我单击外边距时会触发事件。看看下面的快照。

![在此处输入图像描述](../Images/fc2e72632e8d08c46ec1f3e744e1bb9a.png)

所以基本上，当我点击红色边框内的部分（右图）时，选择更改事件不会触发，但是当我点击外边框（白色部分）时，选择更改会触发。

在搜索问题时，我不确定，但我发现它可能是由于事件隧道导致的问题。但是，我对隧道技术只有一点了解。

所以任何人都可以帮助我如何让它工作，以便当我点击 listboxitem（红色部分）时选择会改变

如果我需要进一步明确的问题，请告诉我。我也将列表框代码放在这里

```
<ListBox x:Name="Listbox1" SelectionChanged="listBox1_SelectionChanged">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <ListBoxItem Margin="10" Content="{Binding Name}" Height="25" 
                                             BorderBrush="#FF404040" BorderThickness="0,0.25" />
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox> 
```

感谢期待

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T06:29:54.727

我想不出你为什么想要 a 的`ListBoxItem`内部的`DataTemplate`原因`ItemTemplate`。s 会为的`ListBoxItem`每个元素自动生成，`ListBox`并且您在 DataTemplate 中拥有的任何内容都将用作 that 的*内容*，`ListBoxItem`因此在您的情况下，您最终会拥有 a`ListBoxItem`内部`ListBoxItem`。这可能是原因。

试试这种方式：

```
<ListBox x:Name="Listbox1" SelectionChanged="listBox1_SelectionChanged">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Label Margin="10" 
                   Content="{Binding Name}" 
                   Height="25"
                   BorderBrush="#FF404040" 
                   BorderThickness="0,0.25" />
         </DataTemplate>                        
    </ListBox.ItemTemplate>
</ListBox> 
```

# iphone - 如何缩放以适应从包含 Web 链接的 HTML 文件打开的页面

> ID：15217100
> 
> 赞同：0
> 
> 时间：2013-03-05T06:19:21.257
> 
> 标签：iphone, html, xcode, webview

我有一个正在 Xcode 中开发的应用程序。应用程序区域的一部分加载一个 html 文件。HTML 文件本身有一些指向外部网站的链接。它们可以正常打开，只是它们没有按比例缩放以适合 iPhone。

我将如何确保所有打开的网页都被缩放以适应？.m 文件中的代码如下

```
NSString *fileString = [[NSBundle mainBundle] pathForResource: @"chapter5" ofType: @"html"];

NSURL *newURL = [[NSURL alloc] initFileURLWithPath: fileString];

NSURLRequest *newURLRequest = [[NSURLRequest alloc] initWithURL: newURL];

[webview loadRequest: newURLRequest]; 
```

HTML 文件“chapter5.html”包含指向网站的链接。

我以为我会尝试进入

```
webview.scalesPageToFit = YES 
```

在 .m 文件中希望它适用于打开的任何内容，但这不起作用。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:40:13.790

scalesPageToFit 只有在 webView 加载请求时才会生效。实现 UIWebView [webViewDidFinishLoad:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webViewDidFinishLoad%3a)方法的委托并尝试此代码。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    CGSize defaultSize = webView.frame.size;
    CGSize fittingSize = [tableViewCell.webView sizeThatFits:defaultSize];
    [webView sizeThatFits:fittingSize];

    NSLog(@"Size : %@",NSStringFromCGSize(fittingSize));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:19:48.120

谢谢大家，我将 webview 模式设置为 Aspect-Fit 并将 Scaling 设置为缩放页面以适应这工作，不知道我是如何错过的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:14:10.253

请将 webview 模式设置为 Aspect-Fit

# c# - 如何停止所有 C# 任务在 C# 中的线程内安全运行

> ID：15217103
> 
> 赞同：0
> 
> 时间：2013-03-05T06:19:27.803
> 
> 标签：c#, .net, multithreading, task-parallel-library

我有一个 C# 线程，它在 10 分钟后重复运行，并且从这个线程假设 10 个 C# 4.0 任务正在运行不同的时间量做一些工作。

现在，当我重复线程时，如何确保所有 10 个内部任务都安全停止，然后在该线程再次开始运行时重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:23:53.490

如果您想等到 some`Task`完成，您可以将它们存储在某个地方，然后调用[`Task.WaitAll()`](http://msdn.microsoft.com/en-us/library/dd270695.aspx).

但是如果不了解您的代码，很难说这是否是最好的方法。

# excel - SSIS Excel 源 OpenRowset 来自变量错误 - 0x80040E37

> ID：15217106
> 
> 赞同：0
> 
> 时间：2013-03-05T06:19:44.787
> 
> 标签：excel, ssis, bids

使用`AccessMode`of配置 Excel 数据流组件（源）`OpenRowset from Variable`并设置正确的变量时，尝试配置形状/预览数据时出现以下错误：

> 标题：来自 HRESULT 的 Microsoft Visual Studio 异常：0xC02020E8 合并文件时出错 [Excel 源 [2]]：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E37。合并文件 [Excel 源 [2]] 时出错：打开“[WORKSHEET]”的行集失败。检查对象是否存在于数据库中。

我已检查变量名称是否正确设置为有效工作表的名称。

如何修复此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:19:44.787

您需要在工作表变量的末尾附加一个美元符号，例如 WORKSHEET$

# ios - iOS 上不必要的页面滚动

> ID：15217108
> 
> 赞同：0
> 
> 时间：2013-03-05T06:19:54.113
> 
> 标签：ios, jquery-mobile, cordova

我正在为 iOS 应用程序使用 cordova-2.1.0、JQueryMobile-1.3.0。我的应用程序中的某些页面的内容非常小，页面仍然滚动。我正在 iOS 6 上对其进行测试。如何停止滚动具有小内容的页面。我不想使用preventDefault。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:43:09.010

当我尝试小提琴时，它看起来很正常[http://jsfiddle.net/JEqKh/](http://jsfiddle.net/JEqKh/)

这是我使用的 HTML。尝试导入`<head></head>`标签中的库

```
<div data-role="page" id="menu">
    <div data-theme="b" data-role="header" data-position="fixed">
        <h3>Header</h3>
    </div>
    <div data-role="content">
        <ul data-role="listview" id="mainMenu">
            <li style="height:50px"><a href="menu1.htm" data-transition="slide"><img src="a.png" class="ui-li-icon"/>Menu1</a>
            </li>
            <li style="height:50px"><a href="menu2.htm" data-transition="slide"><img src="b.jpg" class="ui-li-icon"/>Menu2</a>
            </li>
        </ul>
    </div>
</div> 
```

# python - 导入一些常量时Python中的导入错误

> ID：15217112
> 
> 赞同：0
> 
> 时间：2013-03-05T06:20:15.897
> 
> 标签：python

```
#constants.py

TAU = 5.55555

ref_X =  95.047
ref_Y = 100.000
ref_Z = 108.883

def main():
    DTEP = {}
    DTEP['1'] = 1.22222 
```

现在，如果我像这样导入 TAU：

```
from constants import TAU 
```

没有错误，但是如果我通过相同的方法导入 DTEP，它会显示此错误：

```
ImportError: cannot import name DTEP 
```

现在为什么会出现这个错误？要么它应该能够导入所有常量，要么不导入。为什么对 DTEP 有这种偏见？

添加完整代码（我知道这里的名称是 DTEP1）：

```
TAU = 5.55555

import shelve

ref_X =  95.047
ref_Y = 100.000
ref_Z = 108.883
DTEP1 = {}

def main():
    d = shelve.open("tables/DTEP_132758.txt")
    for k in xrange(0,132758):
        DTEP1[str(k)] = rgb_to_cielab(d[str(k)][0], d[str(k)][1], d[str(k)][2])
    print DTEP1['1223']

def rgb_to_xyz(R, G, B):
    '''
    Convert from RGB to XYZ.
    '''
    var_R = ( R / 255.)
    var_G = ( G / 255.)
    var_B = ( B / 255.)

    if var_R > 0.04045:
        var_R = ( ( var_R + 0.055 ) / 1.055 ) ** 2.4
    else:
        var_R /= 12.92

    if var_G > 0.04045:
        var_G = ( ( var_G + 0.055 ) / 1.055 ) ** 2.4
    else:
        var_G /= 12.92
    if var_B > 0.04045:
        var_B = ( ( var_B + 0.055 ) / 1.055 ) ** 2.4
    else:
        var_B /= 12.92

    var_R *= 100
    var_G *= 100
    var_B *= 100

    #Observer. = 2 deg, Illuminant = D65
    X = var_R * 0.4124 + var_G * 0.3576 + var_B * 0.1805
    Y = var_R * 0.2126 + var_G * 0.7152 + var_B * 0.0722
    Z = var_R * 0.0193 + var_G * 0.1192 + var_B * 0.9505

    return X,Y,Z

#-------------------------------------------------#
def xyz_to_cielab(X, Y, Z):
    '''
    Convert from XYZ to CIE-L*a*b*
    '''
    var_X = X / ref_X
    var_Y = Y / ref_Y
    var_Z = Z / ref_Z

    if var_X > 0.008856:
        var_X **= ( 1./3\. )
    else:
        var_X = ( 7.787 * var_X ) + ( 16\. / 116\. )
    if var_Y > 0.008856:
        var_Y **= ( 1./3\. )
    else:
        var_Y = ( 7.787 * var_Y ) + ( 16\. / 116\. )
    if var_Z > 0.008856:
        var_Z **= ( 1./3\. )
    else:
        var_Z = ( 7.787 * var_Z ) + ( 16\. / 116\. )

    CIE_L = ( 116 * var_Y ) - 16.
    CIE_a = 500\. * ( var_X - var_Y )
    CIE_b = 200\. * ( var_Y - var_Z )

    return CIE_L, CIE_a, CIE_b

#-------------------------------------------------#
def rgb_to_cielab(R, G, B):
    '''
    Convert from RGB to CIE-L*a*b*.
    '''
    X,Y,Z = rgb_to_xyz(R,G,B)
    return xyz_to_cielab(X,Y,Z)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T06:21:22.580

`DTEP`是在`main`函数的范围内。只能导入在模块级别定义的变量（如`TAU`和）。`ref_X`

在这种情况下，可以简单地通过将原始定义`DTEP`（但不一定是填充它的行）移出`main`函数来解决问题：

```
DTEP = {}

def main():
    DTEP['1'] = 1.22222

main() 
```

或者，您可以`global`在函数中使用关键字`main`（但请注意，仅当您`main()`在某个时候从模块级别调用时才有效）：

```
def main():
    global DTEP
    DTEP = {}
    DTEP['1'] = 1.22222

main() 
```

也许最好的解决方案就是让所有东西都处于同一水平，摆脱这个`main`功能：

```
TAU = 5.55555

ref_X =  95.047
ref_Y = 100.000
ref_Z = 108.883

DTEP = {}
DTEP['1'] = 1.22222 
```

# c# - 如何将通用集合从一个页面传递到另一个页面？

> ID：15217116
> 
> 赞同：0
> 
> 时间：2013-03-05T06:20:38.627
> 
> 标签：c#, asp.net

我在 Asp.net 工作。

在 Page1.aspx 中，我有

```
protected void Page_Load(object sender, EventArgs e)
    {
        List<Person> lstPerson = new List<Person>();
        lstPerson.Add(new Person { Name = "N1", Age = 20 });
        lstPerson.Add(new Person { Name = "N2", Age = 30 });      

        Response.Redirect("Page2.aspx?Param=" + lstPerson);
    } 
```

在 Page2.aspx 中，我有

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (Request.QueryString["Param"] != null)
            {
                var xx = Request["Param"];
            }
        }
    } 
```

我知道，它返回一个字符串（System.Collections.Generic.List`1[Person] for xx 值）。

如何在 Page2.aspx 中取回对象？

NB~ 我不能使用 Session（这是一个限制）。但是任何其他机制都可以吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:34:35.907

在这种情况下，我们可以将 HttpContext 与 Server.Transfer 一起使用

[http://odetocode.com/articles/111.aspx](http://odetocode.com/articles/111.aspx)

另外，尝试使用跨页回发的视图状态

[http://www.codeproject.com/Articles/37753/Access-ViewState-Across-Pages](http://www.codeproject.com/Articles/37753/Access-ViewState-Across-Pages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:23:38.480

如果你不能使用会话那么，序列化你的对象，存储到一些存储中并在页面加载时反序列化它

参见[对象序列化](http://www.codeproject.com/Articles/1789/Object-Serialization-using-C)

1-在您的数据库中创建一个表，其中至少有 2 列用于 ID（可以自动生成），另一列用于将对象图存储为 BLOB

2- 使用内存流序列化对象图

3- 将对象图保存到步骤 1 中创建的表中

4-获取保存对象的ID

5- 将 ID 作为 QueryString 传递

6- 在其他页面上检索 ID，从 DB 加载对象图并反序列化以取回对象。

如果使用 Application 对象，如果您的工作进程被回收并且如果它可以使用然后使用 Application 对象，则它可能会丢失，但不要忘记在不需要时删除该对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:30:17.467

**编辑：**对不起。我没有读到你问题的结尾。是否可以使用 ViewState？

**老答案：**

您可以使用会话

```
protected void Page_Load(object sender, EventArgs e)
{
    List<Person> lstPerson = new List<Person>();
    lstPerson.Add(new Person { Name = "N1", Age = 20 });
    lstPerson.Add(new Person { Name = "N2", Age = 30 });      

    Response.Redirect("Page2.aspx?Param=" + lstPerson);

    Session["listOfPersons"] = lstPerson;
} 
```

并在 Page2.aspx

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        if (Session["listOfPersons"] != null)
        {
            List<Persons> personList = Session["listOfPersons"] as List<Persons>;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:34:00.730

您可以使用`Application`将列表从一个页面传递到另一个页面

看这个例子：

**第1页.aspx**

```
List<Person> lstPerson = new List<Person>();
lstPerson.Add(new Person { Name = "N1", Age = 20 });
lstPerson.Add(new Person { Name = "N2", Age = 30 });

Application.Add("Persons", lstPerson);

Response.Redirect("Page2.aspx"); 
```

**Page2.aspx**

```
 if (Application["Persons"] != null)
 {
    List<Person> lstPerson = (List<Person>)Application["Persons"];
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T07:32:07.340

我们可以使用 HTTP 上下文作为

在第 1 页

```
protected void Page_Load(object sender, EventArgs e)
        {
            var lstPerson = new List<Person>();
            lstPerson.Add(new Person { Name = "N1", Age = 20 });
            lstPerson.Add(new Person { Name = "N2", Age = 30 });

            Context.Items["WebForm1List"] = lstPerson;

            Server.Transfer("Page2.aspx");

        } 
```

在第 2 页

```
 protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
               var list = Context.Items["WebForm1List"] as List<Person>;

                if (list != null)
                {
                    foreach (Person s in list)
                    {
                        Response.Write(s.Name + "__" + s.Age);
                    }
                }  
            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T14:04:05.243

如果您能够使用`Server.Transfer("Page2.aspx")`代替`Response.Redirect`，那么您可以使用`PreviousPage`第二页上的对象从第一页传输数据。

所以在 Page1.aspx.cs 上，创建`List<Person> lstPerson`一个公共类字段。

然后在 Page2.aspx.cs 中，将此代码的 C# 等效项添加到您的`Page_Load`事件处理程序中（对不起 VB，我不知道 C# 语法）：

```
 If Not IsPostBack Then
            If Not PreviousPage Is Nothing Then
               Dim pp As Page1 = DirectCast(PreviousPage, Page1)
               Dim lstPerson as List (of Person) = pp.lstPerson 
               ' use lstPerson as needed...
            End If
        End If 
```

这种方法的好处是您可以使用任何 .NET 对象而无需序列化。

# android - 按下对话框（确定，取消）按钮获取事件（Android）

> ID：15217118
> 
> 赞同：1
> 
> 时间：2013-03-05T06:20:45.613
> 
> 标签：android, android-preferences, dialog, preferencescreen

在我的 Android 应用程序中，我正在显示包含`edittext`. 此对话框显示使用。`PreferenceCategory`我的`xml`文件看起来像

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory android:title="@string/security_setting_edittext_hint" >
        <EditTextPreference
        android:dialogTitle="@string/security_setting_button"
        android:key="set_password_preference"
        android:summary="@string/set_password_summary"
        android:title="@string/security_setting_button"
        android:inputType="number"
        android:icon="@drawable/lock"
         />
    </PreferenceCategory>

</PreferenceScreen> 
```

我的 Java 文件看起来像

```
public class Settings extends PreferenceActivity {

    Dialog setPasswordDialog;
    EditText setPassword;
    EditTextPreference editPreference;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setTitle("Settings");
        addPreferencesFromResource(R.xml.preference_authentication);
        editPreference=(EditTextPreference)   findPreference("set_password_preference");

} 
```

显示没有问题，`dialog`但现在我希望在按下对话框中的“确定”和“取消”按钮执行某些操作时获取事件。请给我解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:33:25.050

如果我正确地回答了您的问题，您希望处理“确定”和“取消”事件，然后根据响应执行一些操作。

```
// This is using code:
AlertDialog.Builder alert = new AlertDialog.Builder(this);
alert.setTitle("TITLE HERE");
alert.setMessage("MESSAGE");

alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
     //Do something here where "ok" clicked
    }
});
alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
    //So sth here when "cancel" clicked.
    }
});
alert.show(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T08:50:08.177

您需要按如下方式创建自定义编辑文本首选项。

```
public class MyEditTextPreference extends EditTextPreference {

    public MyEditTextPreference(Context context) {
        super(context);
    }
    public MyEditTextPreference(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    public MyEditTextPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void onClick(DialogInterface dialog, int which) {
        switch (which) {
        case DialogInterface.BUTTON_POSITIVE:
        // Put your logic here for Ok button press
        break;

        case DialogInterface.BUTTON_NEGATIVE:
        // Put your logic here for Cancel button press
        break;      
        }
        super.onClick(dialog, which);
    }
} 
```

然后在xml文件中使用如下：

```
<com.package.MyEditTextPreference
android:dialogTitle="@string/security_setting_button"
android:key="set_password_preference"
android:summary="@string/set_password_summary"
android:title="@string/security_setting_button"
android:inputType="number"
android:icon="@drawable/lock"
 /> 
```

其中 com.package 应替换为您在其中创建 MyEditTextPreference 的项目中的实际包

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T06:33:04.347

```
DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
@Override
public void onClick(DialogInterface dialog, int which) {
    switch (which){
    case DialogInterface.BUTTON_POSITIVE:
        //Yes button clicked
        break;

    case DialogInterface.BUTTON_NEGATIVE:
        //No button clicked
        break;
    }
   }

 };

   AlertDialog.Builder builder = new AlertDialog.Builder(this);
   builder.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener)
    .setNegativeButton("No", dialogClickListener).show(); 
```

# android - ICS 键盘返回，主页按钮在覆盖层上打开时没有触摸

> ID：15217119
> 
> 赞同：4
> 
> 时间：2013-03-05T06:20:47.440
> 
> 标签：android, overlay, android-4.0-ice-cream-sandwich, ime

我正在创建一个覆盖屏幕。除了 android 4.0+ 默认键盘的背面（键盘向下）、键盘打开时的主页和最近的应用程序按钮之外，一切都可以完美运行。这些键不被触摸，而是在它上面的键被轻敲。例如，当点击背部时，逗号被点击，当点击回家时，空格键被点击等等。

仅从 4.0 开始的 android 默认键盘会出现此问题，因为具有自己的键盘实现的三星设备在横向模式下默认键盘正常工作但键盘处于全屏模式时也不会显示此问题。

![在此处输入图像描述](../Images/e32f3fccfbae30f60497fce159d98faf.png)

我不确定故障是在键盘实现还是在我的。无论如何，应该找到修复程序，因为大多数用户将使用默认键盘。

对于覆盖屏幕，我使用以下标志：

```
int flags = WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL
            | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
            | WindowManager.LayoutParams.FLAG_LAYOUT_INSET_DECOR;

    params.type = WindowManager.LayoutParams.TYPE_SYSTEM_ERROR;
    params.flags |= flags;
    params.format = PixelFormat.TRANSPARENT; 
```

请让我知道是否需要更多代码片段才能理解我的查询。我已经解决了许多已经提出的问题，但没有找到任何与我的查询匹配的问题。希望能找到一些解决办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:40:21.157

在 4.0 IME 中引入了针对触摸键的错误更正。你能检查一下 LatinIME 来源吗？

# ios - 尝试将 UITextField 格式化为像货币计算器一样仅用于 iOS 中的数字输入

> ID：15217124
> 
> 赞同：12
> 
> 时间：2013-03-05T06:20:58.940
> 
> 标签：ios, uitextfield, currency, nsnumberformatter

我的`UITextField`应用程序中有一个应该只接收来自用户的数字输入。这个数字输入应该代表货币（即只有两位小数），当没有输入任何内容时，默认值为**0.00 。**我还想在最左边有一个**“$”**符号，数字右对齐，这样数字从右到左移动，如下所示：

例如，当输入数字**“1234.56”**时。

**1\. 0.00 美元**。

**2\. 0.01 美元**。

**3\. 0.12 美元**。

**4\. 1.23 美元**。

**5\. 12.34 美元**。

**6\. 123.45 美元**。

**7\. 1,234.56 美元**。

**8.等等……**

我将`UITextField`右对齐，以便它已经将数字从右侧移到左侧。但是，我需要将**“$”**放在**UITextField**中，并且我希望将默认的**0.00**值修改为用户一次输入一位数字的数字。用户不必输入小数点，因为它应该已经在保持其位置的文本字段中。然后，我希望该号码有一个**“，”**，以便自动输入以分隔每三个数字。我希望应用程序**在用户输入数字**时执行此操作，并且在输入所有内容后不进行格式化。我该怎么做？我看到很多人说我要使用`NSNumberFormatter`，但我想知道如何将它与它结合使用`UITextField`，以便动态格式化数字文本，如上所述？

我前段时间在 StackOverflow 上发现了以下问题：

[输入带小数点的数值的最佳方法是什么？](https://stackoverflow.com/questions/276382/what-is-the-best-way-to-enter-numeric-values-with-decimal-points)

但我想知道如何将它作为我的问题的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-21T14:48:09.840

这是一个很好的方法。记得在 viewDidLoad 方法中设置你的 UITextField 为 self 并且你的头文件必须符合 UITextFieldDelegate 协议

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    NSString *cleanCentString = [[textField.text componentsSeparatedByCharactersInSet: [[NSCharacterSet decimalDigitCharacterSet] invertedSet]] componentsJoinedByString:@""];
    NSInteger centValue = [cleanCentString intValue];
    NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
    NSNumber *myNumber = [f numberFromString:cleanCentString];
    NSNumber *result;

    if([textField.text length] < 16){
        if (string.length > 0)
        {
            centValue = centValue * 10 + [string intValue];
            double intermediate = [myNumber doubleValue] * 10 +  [[f numberFromString:string] doubleValue];
           result = [[NSNumber alloc] initWithDouble:intermediate];
        }
        else
        {
            centValue = centValue / 10;
            double intermediate = [myNumber doubleValue]/10;
            result = [[NSNumber alloc] initWithDouble:intermediate];
        }

        myNumber = result;
         NSLog(@"%ld ++++ %@", (long)centValue, myNumber);
            NSNumber *formatedValue;
            formatedValue = [[NSNumber alloc] initWithDouble:[myNumber doubleValue]/ 100.0f];
            NSNumberFormatter *_currencyFormatter = [[NSNumberFormatter alloc] init];
            [_currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
            textField.text = [_currencyFormatter stringFromNumber:formatedValue];
            return NO;
    }else{

        NSNumberFormatter *_currencyFormatter = [[NSNumberFormatter alloc] init];
        [_currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
        textField.text = [_currencyFormatter stringFromNumber:00];

        UIAlertView *alert = [[UIAlertView alloc]initWithTitle: @"Deposit Amount Limit"
                                                       message: @"You've exceeded the deposit amount limit. Kindly re-input amount"
                                                      delegate: self
                                             cancelButtonTitle:@"Cancel"
                                             otherButtonTitles:@"OK",nil];

        [alert show];
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-11T09:53:46.343

**SWIFT 3 的更新答案**

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {

        let formatter = NumberFormatter()
        formatter.minimumFractionDigits = 2
        formatter.maximumFractionDigits = 2

        if string.characters.count > 0 {
            amountTypedString += string
            let decNumber = NSDecimalNumber(string: amountTypedString).multiplying(by: 0.01)
            let newString = "$" + formatter.string(from: decNumber)!
            textField.text = newString
        } else {
            amountTypedString = String(amountTypedString.characters.dropLast())
            if amountTypedString.characters.count > 0 {
                let decNumber = NSDecimalNumber(string: amountTypedString).multiplying(by: 0.01)
                let newString = "$" +  formatter.string(from: decNumber)!
                textField.text = newString
            } else {
                textField.text = "$0.00"
            }

        }
        return false

    }

    func textFieldShouldClear(_ textField: UITextField) -> Bool {
        amountTypedString = ""
        return true
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-14T18:24:28.500

这是我在 Swift 中的解决方案。我的方法是跟踪输入的数字并将其乘以 0.01，并使用 NSNumberFormatter 将结果数字设置为 2 个小数点。请注意，我将文本字段键盘设置为数字键盘。

```
amountTextfield?.keyboardType = UIKeyboardType.NumberPad

var amountTypedString = ""

func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {

    let formatter = NSNumberFormatter()
    formatter.minimumFractionDigits = 2
    formatter.maximumFractionDigits = 2

    if string.characters.count > 0 {
        amountTypedString += string
        let decNumber = NSDecimalNumber(float: Float(amountTypedString)!).decimalNumberByMultiplyingBy(0.01)
        let newString = "$" + formatter.stringFromNumber(decNumber)!
        textfield.text = newString
    } else {
        amountTypedString = String(amountTypedString.characters.dropLast())
        if amountTypedString.characters.count > 0 {
            let decNumber = NSDecimalNumber(float: Float(amountTypedString)!).decimalNumberByMultiplyingBy(0.01)
            let newString = "$" +  formatter.stringFromNumber(decNumber)!
            textfield.text = newString
        } else {
            textfield.text = "$0.00"
        }

    }
    return false

}

func textFieldShouldClear(textField: UITextField) -> Bool {
    amountTypedString = ""
    return true
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T07:41:56.770

您可能需要检查`UITextFieldDelegate`协议。通过将某些东西（通常是您的 ViewController 类）指定为 UITextField 的委托，您将能够从控件接收交互式文本输入事件。尤其：

```
- (BOOL)textField:(UITextField *)textField 
        shouldChangeCharactersInRange:(NSRange)range 
        replacementString:(NSString *)string 
```

通过从该方法返回 NO，您可以防止文本字段应用用户按下的键。

但是，即使您返回 NO，也没有什么可以阻止您使用传递给委托方法的信息来自己操作代码中的文本字段内容。

以伪代码形式：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (string-contains-number) {
        alter textfield.text to be what it should be now, adding the number;
    }
    else {
        string contains something you don't wan the user typing, so ignore it.
    }

    // Tell iOS not to apply the user's change (since you just did by 
    // updating the text yourself:
    return NO;
} 
```

免责声明：我还没有编写实际代码来测试，因此更改此委托方法中的代码可能会导致另一个 shouldChangeCharactersInRange: 消息触发。不过，我不相信情况会如此。我不相信当您更改代码中的文本时会触发委托事件。

这显然不如已经实现了数字文本输入框的所有规则的自定义控件（我现在回想起多年的 Visual Basic 编程......）。但我不知道有人编写和开源的任何此类控制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-27T04:10:54.683

我从 julien 那里得到了答案并对其进行了修改，以便支持具有不同货币格式的其他语言环境。我还存储了数字格式化程序以供​​重复使用，因此不会每次都创建它们，这是一项昂贵的操作。

通过忽略任何会导致存储值溢出的输入来处理溢出。

此解决方案假定仅在文本字段的末尾输入文本，因此无论文本光标在输入之前的位置如何，都只会在末尾操作。

```
let outputFormatter: NSNumberFormatter = {
    let formatter = NSNumberFormatter()
    formatter.numberStyle = .CurrencyStyle
    if formatter.maximumFractionDigits > 0 {
        formatter.multiplier = pow(10, -CGFloat(formatter.maximumFractionDigits))
    }
    return formatter
}()

let inputFormatter: NSNumberFormatter = {
    let formatter = NSNumberFormatter()
    formatter.numberStyle = .DecimalStyle
    return formatter
}()

private var value: UInt = 0

var currencyValue: NSDecimalNumber {
    let exponent = Int16(truncatingBitPattern: outputFormatter.maximumFractionDigits)
    return NSDecimalNumber(mantissa: UInt64(value), exponent: -exponent, isNegative: false)
}

func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {
    if string.isEmpty {
        /* User pressed backspace, shift right one space. */
        value /= 10
    } else if let number = inputFormatter.numberFromString(string)?.unsignedIntegerValue {
        /* User entered a number, shift left one space and add. */
        let shiftedValue = UInt.multiplyWithOverflow(value, 10)
        let addedValue = UInt.addWithOverflow(shiftedValue.0, number)
        if !shiftedValue.overflow && !addedValue.overflow {
            value = addedValue.0
        }
    }

    textField.text = outputFormatter.stringFromNumber(NSDecimalNumber(unsignedInteger: value))
    return false
}

func textFieldShouldClear(textField: UITextField) -> Bool {
    value = 0
    return true
} 
```

在具有各种语言环境的操场上使用它给了我[这些结果](http://i.stack.imgur.com/8euui.png) （抱歉，还不能直接嵌入）。

# .net - 不激活/实例化任何东西时，在 .net 中加载程序集是否安全？

> ID：15217129
> 
> 赞同：0
> 
> 时间：2013-03-05T06:21:03.663
> 
> 标签：.net, security, reflection, .net-assembly

我目前正在为一个能够在应用程序运行时开始时自动加载 .net 程序集文件并允许用户动态添加新程序集的人开发一个 asp.net 应用程序。

我计划制作一个页面，允许授权用户手动加载和查看有关程序集的信息，例如引用的程序集以及其中包含的命名空间和类。如果用户访问此信息并认为它是“安全的”，则程序集将被添加到程序集列表中，以便在应用程序启动时与其他程序集一起加载和处理。在应用程序将程序集添加到受信任列表之后，应用程序将处理程序集的内容。

我需要知道的是，如果没有激活/实例化任何类，是否会说直​​接加载程序集以获取此信息是“**安全的”。**如果不是，什么资源最适合这种评估集会威胁的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:34:09.677

如果您正在寻找更安全的操作，您可以启动一个新的 AppDomain 并从那里加载程序集，或者更简单，您可以在仅反射模式下加载程序集，例如

[http://msdn.microsoft.com/en-us/library/system.reflection.assembly.reflectiononlyloadfrom.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.reflectiononlyloadfrom.aspx)

关于随机程序集可能对 Web 应用程序构成什么威胁，这不是小事，您不应盲目相信来自第三方的程序集。例如，一个程序集可能包含一个标有 prestart 属性的方法，并在您的应用程序启动之前做一些错误的事情。它也可能被恶意编写为包含与其他名称相同的名称空间和类名，因此，意外编写的反射代码可能会从恶意程序集中而不是另一个程序集中获取类。您不想将任何人的程序集加载到您的应用程序中的原因有很多。

# ios - 使用 PanGesture 后 SwipeGestureRecognizer 无法正常工作

> ID：15217137
> 
> 赞同：0
> 
> 时间：2013-03-05T06:21:59.657
> 
> 标签：ios, objective-c, uipangesturerecognizer, uiswipegesturerecognizer

我正在使用**PanGestureRecognizer**到我的`self.view`和`UISwipeGestureRecognizer`我的`UITableView`. 我已`UITableView`在`self.view`. 现在`UISwipeGesture`不工作了。但是如果我禁用 PanGesture `self.view`， SwipeGesture 正在工作。

有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:54:07.677

通过这个stackoverflow问题的答案来了解滑动和平移手势......

[iOS 中的 Pan 和 Swipe 有什么区别？](https://stackoverflow.com/questions/9898627/what-is-the-difference-between-pan-and-swipe-in-ios)

希望这会帮助你...

# ios - I want to increase the thickness of border cell for my UITableVewStyleGrouped for my iPhone app

> ID：15217141
> 
> 赞同：0
> 
> 时间：2013-03-05T06:22:23.943
> 
> 标签：ios, uitableview, ios6, border

I want to increase the thickness of cell border of `UITableVewStyleGrouped` table for my iPhone app.

[http://screencast.com/t/vWf8sg9D6oA](http://screencast.com/t/vWf8sg9D6oA)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T06:51:35.937

```
#import <QuartzCore/QuartzCore.h>

- (void)someAppropriateMethod
{
    [self.myTableViewCell.contentView.layer setBorderColor:[UIColor redColor].CGColor];
    [self.myTableViewCell.contentView.layer setBorderWidth:1.0f];
} 
```

And as an alternate,You can also try this :

You'll need to create an entire tableviewcell with the border you want. that means you'll have to create the pictures of top, bottom and middle cell. There's a little tutorial on [this link](http://www.cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html).

# ldap - LDAP 中的扩展 errno

> ID：15217144
> 
> 赞同：2
> 
> 时间：2013-03-05T06:22:44.003
> 
> 标签：ldap, openldap

以下是我在 C 中的代码行：

```
ldap_bind_s(ld, root_dn, root_pw, auth_method) != LDAP_SUCCESS  

ldap_perror( ld, "ldap_bind" );//to print the EXACT error like 525,52e 
```

执行时

```
Project  ./a.out CN=username,OU=ABC,DC=example,DC=com wrong-pasword
     ldap_bind: Invalid credentials (49)
   additional info: 80090308: LdapErr: DSID-0C090334, comment:  
AcceptSecurityContext      error, data 52e, vece 
```

这里 data 后面的字符串 52e 表示扩展错误。谁能建议我如何直接访问此扩展错误。目前我正在解析字符串以提取此值。通常当我打印 LDAP_OPT_ERROR_NUMBER 它只返回 49(INVALID_CREDENTIALS) 但这对我来说还不够。如何获取扩展错误的代码（仅代码）。
我什至尝试打印 ld->ld_errno 但它不允许我，因为没有为 ld 分配内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:46:39.793

您必须解析错误字符串才能提取错误号，因为您无法从 LDAP 结构中看到错误代码，因为它是并且您只能通过它`opaque datatype`访问元素，才能看到结构的不完整定义。`LDAP structure``routines`

# python - 赋值前引用的局部变量“作者”

> ID：15217145
> 
> 赞同：0
> 
> 时间：2013-03-05T06:22:54.377
> 
> 标签：python, sql, django

我的views.py是

```
def editbook(request,book_id):
    log.debug("test....")
    if request.POST:
        book_name =request.POST['book_name']
        publisher_name =request.POST['publisher_name']
    books=Book.objects.filter(book_id=book_id).update(book_name=book_name, publisher_name=publisher_name)
    first_name = request.POST('first_name')
        last_name = request.POST('last_name')
        email = request.POST('email')
        age = request.POST('age')

    author_info = Author.objects.latest('author_id')
    log.debug("test:%s",author_info.author_id)
    author = Author.objects.filter(author_id=author_info.author_id).update(first_name = first_name,last_name = last_name,email=email,age=age)
        return redirect('/index/')
    else:
        books = Book.objects.get(pk=book_id)
        return render_to_response('editbook.html',{'books':books},{'author':author},context_instance=RequestContext(request)) 
```

我收到一个错误

```
"Traceback (most recent call last):
  File "/usr/local/lib/python2.6/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/root/Samples/DemoApp/DemoApp/views.py", line 70, in editbook
    return render_to_response('editbook.html',{'books':books},{'author':author},context_instance=RequestContext(request))
UnboundLocalError: local variable 'author' referenced before assignment. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:27:32.513

看起来您在 if 子句中分配了 author 值，同时调用它以返回 else 块。该错误只是说您执行了 else 块（例如 request.POST 为 None）。我所需要的就是在 if 语句之前添加默认值或移动分配。例如，您可以执行以下操作：

```
def editbook(request, book_id):
    log.debug("test....")
    author = Author.objects.filter(author_id=author_info.author_id)
    books=Book.objects.filter(book_id=book_id)
    if request.POST:
        book_name =request.POST['book_name']
        publisher_name =request.POST['publisher_name']
        books=Book.objects.filter(book_id=book_id).update(book_name=book_name, publisher_name=publisher_name)
        first_name = request.POST('first_name')
        last_name = request.POST('last_name')
        email = request.POST('email')
        age = request.POST('age')

        author_info = Author.objects.latest('author_id')
        log.debug("test:%s",author_info.author_id)
        author = Author.objects.filter(author_id=author_info.author_id).update(first_name = first_name,last_name = last_name,email=email,age=age)
        return redirect('/index/')
    else:
        books = Book.objects.get(pk=book_id)
        return render_to_response('editbook.html',{'books':books},{'author':author},context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:26:45.737

您的代码格式有点偏离，但似乎只有在语句为真`author`时才分配一个值。`If`如果它是假的，你试图在`author`尚未设置时返回该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:33:42.020

您的问题是，`author`仅在条件为真时才被定义`if`，但您在块中使用它，当条件失败`else`时将运行。`if`它与此相同：

```
def foo(z=None):
    if z:
        i = 'hello'
    else:
        print i

foo() 
```

当您执行上述操作时，因为`z`is `None`，`if`条件失败，并且`i`未分配值。由于`if`条件失败，`else`子句运行，它试图打印`i`尚未定义的内容。

# android - 在具有不同架构的设备上运行的 Android 应用

> ID：15217146
> 
> 赞同：-1
> 
> 时间：2013-03-05T06:23:02.597
> 
> 标签：android, android-ndk

我正在构建一个使用**NDK**执行一些 CPU 密集型操作的 android 应用程序（2.2 及更高版本）。

我们在开发 NDK 应用程序时需要更加小心，因为它在不同的**CPU 架构**上表现不同。

我希望我的应用程序能够在**ARM、ARM-NEON、MIPS 和 x86 架构**上运行。

但[在这里](http://developer.android.com/tools/sdk/ndk/index.html#platform-compat)我读到，

> 如果您将本机库部署到 x86 ，您的应用程序必须面向 Android 2.3 或更高版本。

由于我的目标是**android 2.2 及更高版本**，这有什么问题吗？

我怎样才能让我的应用程序在上述所有架构上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:33:37.587

我不知道这一点，但 Android 开发人员规范似乎很清楚。

```
 [...] your application must target Android 2.3 or later 
```

也许可能有一些扩展使您成为可能，但我想这不是编写 Android 扩展库的最常见领域。尝试谷歌。

编辑：

看看这些链接：

[http://www.nordichardware.com/Operating-systems/android-22-goes-native-x86-in-q3.html](http://www.nordichardware.com/Operating-systems/android-22-goes-native-x86-in-q3.html)

[http://www.android-x86.org/](http://www.android-x86.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:52:25.440

从技术上讲，如果您可以使用 9 级兼容的 NDK 构建并将其打包，它应该可以在 2.2 ARM 设备和 2.3 其他基于架构的设备上运行（除非 2.3 不支持其他架构，因此我们没有任何类似的设备）。

事情是当您为特定架构添加本机库时，您的应用将在[Google Play](http://developer.android.com/google/play/filters.html)中受到过滤。

> > 包含针对特定 CPU 架构（例如 ARM EABI v7 或 x86）的本机库的应用程序仅在支持该架构的设备上可见。

因此，即使您的应用程序也有可能在具有 8 级 api 的 x86 设备上运行，它可能会从市场中被过滤掉，而 x86 设备将无法将其视为可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T07:57:34.313

我有一个针对 Android 1.5 及更高版本的 x86、MIPS 和 ARM 的应用程序，它没有引起任何问题。

请注意，没有 ARM-NEON 架构：armeabiv7a 不保证支持 NEON。

# php - 使用 cakephp 2.3 错误上传和导入 csv 到 mysql

> ID：15217148
> 
> 赞同：0
> 
> 时间：2013-03-05T06:23:28.427
> 
> 标签：php, cakephp-1.3, cakephp-2.3

在使用此功能在 cakephp 1.3 中上传后，我确实将 csv 导入 mysql

```
function uploadCsv(){
    if (!empty($this->data)) {
        $csvFile = $this->Upload->csvUpload('files/assessments/csv', $this->data['Assessment']['csv']);// upload avata and the image path to the form array; ready to be served
       // unset($this->data['Assessment']['csv']);
            if(isset($csvFile['path'])) {
                 $file = $csvFile['path'];
                    $delimiter = ',';
                       if (($handle = fopen($file, "r")) !== FALSE) { 
                        $i = 0; 
                        while (($lineArray = fgetcsv($handle, 4000, $delimiter)) !== FALSE) { 
                            for ($j=0; $j<count($lineArray); $j++) { 
                                $data2DArray[$i][$j] = $lineArray[$j]; 
                                } 
                            $i++; 
                            } 
                            fclose($handle); 
                        } 
                        //return $data2DArray;$i = 0;
                        foreach($data2DArray as $csv){
                            $this->data['Assessment'][$i]['id'] = '';
                            $this->data['Assessment'][$i]['test1'] = $csv[0];
                            $this->data['Assessment'][$i]['test2'] = $csv[1];
                            $this->data['Assessment'][$i]['ass1'] = $csv[2];
                            $this->data['Assessment'][$i]['ass2'] = $csv[3];
                            $this->data['Assessment'][$i]['ass3'] = $csv[4];
                            $this->data['Assessment'][$i]['ca1'] = $csv[5];
                            $this->data['Assessment'][$i]['ca2'] = $csv[6];
                            $this->data['Assessment'][$i]['exams'] = $csv[7];
                            $this->data['Assessment'][$i]['total'] = $csv[8];
                            $this->data['Assessment'][$i]['subject_id'] = $csv[9];
                            $this->data['Assessment'][$i]['student_id'] = $csv[10];
                            $this->data['Assessment'][$i]['my_classes_student_id'] = $csv[11];
                            $i++;
                            }
                    $this->Assessment->create();
                        if ($this->Assessment->saveAll($this->data['Assessment'])) {
                            $this->Session->setFlash(__('The assessment has been saved', true));
                            //$this->redirect(array('action' => 'index'));
                        } else {
                            $this->Session->setFlash(__('The assessment could not be saved. Please, try again.', true));
                        }
            $this->set('data', $this->data['Assessment']);

        }else{

            $this->set('errors', $csvFile['errors']);

            }

    }// end of $thid->data check
} 
```

但我得到了这个错误：

```
Fatal Error
Error: ReflectionClass::getProperties() [<a href='http://php.net/reflectionclass.getproperties'>reflectionclass.getproperties</a>]:
Internal error: Failed to retrieve the reflection object
File: C:\wamp\www\csm\lib\Cake\Utility\Debugger.php
Line: 593

Notice: If you want to customize this error message, create app\View\Errors\fatal_error.ctp 
```

升级到 cakephp 2.3 后

我需要这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:42:46.617

谢谢，虽然我没有答案，但我想有人可能有类似的问题，cakephp 2.3 使用的是 $this->request->data 而不是 $this->data 所以我只是将 $this->data 更改为 $this->request- >数据，它开始工作

```
function uploadCsv(){
    if (!empty($this->data)) {
        $csvFile = $this->Upload->csvUpload('files/assessments/csv', $this->data['Assessment']['csv']);// upload avata and the image path to the form array; ready to be served
       unset($this->request->data['Assessment']['csv']);
            if(isset($csvFile['path'])) {
                 $file = $csvFile['path'];
                    $delimiter = ',';
                       if (($handle = fopen($file, "r")) !== FALSE) { 
                        $i = 0; 
                        while (($lineArray = fgetcsv($handle, 4000, $delimiter)) !== FALSE) { 
                            for ($j=0; $j<count($lineArray); $j++) { 
                                $data2DArray[$i][$j] = $lineArray[$j]; 
                                } 
                            $i++; 
                            } 
                            fclose($handle); 

                        } 
                        //return $data2DArray;
                        $i = 0;
                        foreach($data2DArray as $csv){
                            $this->request->data['Assessment'][$i]['id'] = '';
                            $this->request->data['Assessment'][$i]['test1'] = $csv[0];
                            $this->request->data['Assessment'][$i]['test2'] = $csv[1];
                            $this->request->data['Assessment'][$i]['ass1'] = $csv[2];
                            $this->request->data['Assessment'][$i]['ass2'] = $csv[3];
                            $this->request->data['Assessment'][$i]['ass3'] = $csv[4];
                            $this->request->data['Assessment'][$i]['ca1'] = $csv[5];
                            $this->request->data['Assessment'][$i]['ca2'] = $csv[6];
                            $this->request->data['Assessment'][$i]['exams'] = $csv[7];
                            $this->request->data['Assessment'][$i]['total'] = $csv[8];
                            $this->request->data['Assessment'][$i]['subject_id'] = $csv[9];
                            $this->request->data['Assessment'][$i]['student_id'] = $csv[10];
                            $this->request->data['Assessment'][$i]['my_classes_student_id'] = $csv[11];
                            $i++;
                            }

                $this->Assessment->create();
                        if ($this->Assessment->saveAll($this->data['Assessment'])) {
                            $this->Session->setFlash(__('The assessment has been saved', true));
                            //$this->redirect(array('action' => 'index'));
                        } else {
                            $this->Session->setFlash(__('The assessment could not be saved. Please, try again.', true));
                        }
            $this->set('data', $this->data['Assessment']);

        }else{

            $this->set('errors', $csvFile['errors']);

            }

    }// end of $thid->data check
} 
```

# php - 无论是否在 iframe 中，重定向都应该有效。

> ID：15217149
> 
> 赞同：0
> 
> 时间：2013-03-05T06:23:33.330
> 
> 标签：php, javascript, html

我有一个 login.php 页面，通常在灯箱式 iframe 中查看。用户输入姓名和电子邮件，表单在 iframe 中提交给自身（login.php），如果登录成功，则我使用以下命令将它们重定向到所需页面：

```
echo "
    <script>
        parent.changeURL('{$returnlink}' );
    </script>
";              
exit; 
```

在父页面的`<head>`部分是使这个重定向工作的函数：

```
<script>
    function changeURL( url ) {
        document.location = url;
    }
</script> 
```

但是，如果 login.php 页面是在父窗口本身中加载的，*而不是*在它旨在加载的灯箱样式 iframe 中（不是预期的，但可能发生），那么这个重定向功能会中断，因为在这种情况下没有父级，实际上它应该更改自己的 URL，而不是父级的。

是否有更持久的 php 或 javascript 重定向代码？或者如果它不在 iframe 中，可以将其更改为自我纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:25:58.960

尝试

```
if(parent)parent.window.location=url;
else window.location=url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:26:06.217

```
<script>
  if(parent)
    parent.changeUrl('{$returnlink}');
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:39:38.847

使用@Tapas Pal、@Sumit Bijvanai 和@yourdeveloperfriend 的建议，我现在可行的解决方案是：

```
<script>
    if(parent) {
        parent.window.location='{$returnlink}';
    }
    else {
        window.location='{$returnlink}';
    }       
</script> 
```

# sql - derby jdbc 是否支持“从 A where (a,b) in (select a,b from B)”之类的语法？

> ID：15217154
> 
> 赞同：0
> 
> 时间：2013-03-05T06:23:56.937
> 
> 标签：sql

我曾经在 oracle 中写过类似的查询，当时它有效。现在我试着把它放在 Derby JDBC 的 prepareStatement 中。

```
 SELECT THREADID,THREADID2,SIMILARITY FROM S WHERE     
    (THREADID,THREADID2) IN 
    (
       SELECT T1.ID,T2.ID FROM 
       (
         ( SELECT T.ID FROM T WHERE T.POSTTYPEID = '1' ORDER BY ANSWERCOUNT DESC FETCH FIRST 200 ROWS ONLY ) AS T1 
          JOIN 
         ( SELECT T.ID FROM T WHERE T.POSTTYPEID = '1' ORDER BY ANSWERCOUNT DESC FETCH FIRST 200 ROWS ONLY ) AS T2
       )
    ) 
```

原来我得到的错误如下：

> java.sql.SQLSyntaxErrorException: 语法错误：在第 1 行第 78 列遇到“,”

我检查了代码，这个错误指向 (THREADID,THREADID2) 部分，是不是 JDBC Derby 不支持这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:32:08.590

不

```
 (THREADID,THREADID2) IN 
```

不工作

你必须分开喜欢

```
 WHERE THREADID IN ('your condition') OR THREADID2 IN ('your condition') 
```

# ios - 如何使 NSTimer 无效？

> ID：15217156
> 
> 赞同：1
> 
> 时间：2013-03-05T06:24:13.983
> 
> 标签：ios

```
self.timerProgress=[NSTimer scheduledTimerWithTimeInterval:50.0 target:self selector:@selector(stopProgressView) userInfo:nil repeats:NO];

-(void)stopProgressView
{
    if ([self.timerProgress isValid]) {
        [self.timerProgress invalidate];
        self.timerProgress=nil;
    }  

} 
```

当我试图使 NSTimer 对象无效时单击按钮

```
-(void)cancelTimer
{
       if ([self.timerProgress isValid]) {
            [self.timerProgress invalidate];
            self.timerProgress=nil;
        }   
} 
```

它不会无效。它在 50 间隔后调用一次 stopProgressView。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:28:57.983

```
- (IBAction)stopTimer {
    if ([timerProgress isValid]) {
        [timerProgress invalidate];
    }
} 
```

不要`self.timerProgress`使用仅使用`timerProgress`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T09:45:42.533

最可能的原因是您的计时器安排在与您尝试使其无效的运行循环不同的运行循环上。

定时器必须在与调度它们的运行循环相同的线程/运行循环上失效。

Cocoa touch 不是线程安全的，因此您应该在主线程上运行所有与 UI 相关的活动。如果您在不同的线程上进行 GUI 工作，它可能会起作用，但是您会遇到随机崩溃，并且还会产生类似这样的计时器问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:34:07.533

从您发布的内容看来，它应该可以工作。这就是我在我的应用程序中使用它的方式，它运行良好。

但是，您可以尝试制作一个带有计时器对象的选择器，例如：

```
-(void)stopProgressView:(NSTimer *)timer{
     //do stuff with timer here
} 
```

请注意，这也意味着您应该将@selector(stopProgressView) 更改为@selector(stopProgressView:)。尽管为了记录，我当前的停止计时器功能只使用 [self.timer invalidate] 并且工作正常。

我对调试的另一条建议是使用 NSLogs 来确保每个方法实际上都被调用，并且当方法被调用时，if 子句中的 NSLog 以确保它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:58:57.283

你创建`NSTimer`没有`NSRunLoop`所以你`NSTimer`没有开始，在之后添加这个代码

```
self.timerProgress = [NSTimer scheduledTimerWithTimeInterval:50.0 
                                                      target:self 
                                                    selector:@selector(stopProgressView) 
                                                    userInfo:nil
                                                     repeats:NO];

 //add  

[[NSRunLoop currentRunLoop] addTimer:_tapTimer 
                             forMode:NSDefaultRunLoopMode]; 
```

# c# - 如何获取由 jquery/javascript 更新的隐藏字段值代码

> ID：15217158
> 
> 赞同：1
> 
> 时间：2013-03-05T06:24:42.200
> 
> 标签：c#, javascript, jquery, asp.net

我有一个`<asp:menu/>`控件和一个隐藏字段。现在我正在使用 jQuery 来更改隐藏字段的值。代码是： -

```
$(function() {

    $(".primaryStaticMenu  tr,td").each(function(index) {

        $(this).click(function() {

            if ($(this).attr("title") != "undefined"
                && $(this).attr("title").length > 0) {

                document.getElementById('ctl00_Hidden_Master_Location').value = $(this).attr("title");

                alert(document.getElementById('ctl00_Hidden_Master_Location').value);
                //return false;
            }
        });
    });
}); 
```

获取更新值的服务器端代码是：-

```
string Get_cng_value = Hidden_Master_Location.Value; 
```

但每次都`Hidden_Master_Location.Value`显示。`null`谁能告诉我如何从后面的代码中获取隐藏字段的更新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:52:26.557

假设您的隐藏字段为..

```
<asp:HiddenField ID="Hidden_Master_Location" runat="server"  /> 
```

您可以将 jquery 中隐藏字段的值作为

```
var locationValue= $("#<%= Hidden_Master_Location.ClientID %>").val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:52:29.953

这样做，它对我有用。诀窍是将您的隐藏字段珍贵 id 保存在另一个隐藏输入字段中，然后使用该隐藏值重新构建它。

**标记**

```
<asp:HiddenField ID="HiddenFieldMaster" runat="server" />
   <input type="hidden" id="inputHidden" value='<%= HiddenFieldMaster.ClientID%>' /> 
```

**`Javascript`**

```
 $(function() {

$(".primaryStaticMenu  tr,td").each(function(index) {

    $(this).click(function() {

        if ($(this).attr("title") != "undefined"
            && $(this).attr("title").length > 0) {

           var inputHidden = document.getElementById('inputHidden');
                $("#" + inputHidden.value).val($(this).attr("title"));

            alert(inputHidden.value);
            //return false;
        }
    });
});
 }); 
```

**代码背后**

```
String Get_cng_value = HiddenFieldMaster.Value; 
```

# extjs - 我可以在精灵图像（ExtJS）周围画一个边框吗？

> ID：15217162
> 
> 赞同：1
> 
> 时间：2013-03-05T06:25:03.777
> 
> 标签：extjs, components, border, draw, sprite

我有一个已添加到 drawComponent 实例的精灵图像。单击该精灵时，我想在该图像周围绘制边框。

```
var myImg=surface.add({
            type: "image",
            src: <some path>,
            x:50,
            y:50,
            height:100,
            width:100,            
            draggable:true
        }); 
```

我还尝试使用 addCls() 方法来包含这个 CSS

```
.imgCls
{
border-style:solid;
border-color: black;
border-width: 5px;
 } 
```

但我没有发现它在图像周围绘制任何边框。

请帮忙。谢谢 ！

**更新：**

使用 setStyle() 方法并重新绘制图像。

```
myImg.setStyle('border','5px solid #000000');
myImg.redraw(); 
```

没有绘制边框，也没有报告错误。

# android - 碎片布局充气器问题

> ID：15217169
> 
> 赞同：1
> 
> 时间：2013-03-05T06:25:25.263
> 
> 标签：android, android-layout, android-fragments

大家好..我想在我的碎片中添加两个布局。在第一个布局按钮单击时第二个布局膨胀后，一个布局已经膨胀...好吧，我尝试在第一个布局按钮的按钮单击时删除第一个布局并膨胀第二个布局但是我的按钮点击没有反应任何类型的反应..请帮助我

```
 public static LinearLayout mLL_MyNotes,mLin_myNotes,mLL_UploadNotes;
  public static ViewFlipper mVF_MyNotes,mViewUploadMyNotes;
  public static View mViewMyNotes;

   @Override
     public View onCreateView(final LayoutInflater inflater, final ViewGroup container,    Bundle savedInstanceState) {

     TextView text = new TextView(getActivity());
     text.setGravity(Gravity.CENTER);
     text.setTextSize(20 * getResources().getDisplayMetrics().density);
     text.setPadding(20, 20, 20, 20);

    if(mContent.equalsIgnoreCase("My Notes")){

        mViewMyNotes = inflater.inflate(R.layout.activity_myspace_mynotes_list, container, false);

        mLin_myNotes=(LinearLayout)mViewMyNotes.findViewById(R.id.mainLin_MyNotes);

        mVF_MyNotes = (ViewFlipper) mViewMyNotes.findViewById(R.id.vf_MySpace_MyNotes);

        mbtn_Upload_MyNotes = (Button) mViewMyNotes.findViewById(R.id.btnUpload_MySpace_MyNotes);
        mWV_MyNotes = (WebView) mViewMyNotes.findViewById(R.id.wv_MySpace_MyNotes);

        mLV_MyNotes = (ListView) mViewMyNotes.findViewById(R.id.lv_MySpace_MyNotes);
        mLV_MyNotes.setAdapter(new MySpace_MyNotesAdapter(getActivity(),R.layout.activity_myspace_mynotes_listitem));

        mbtn_Upload_MyNotes.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
        LayoutInflater Newinflater = (LayoutInflater) getActivity().
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

          mViewUploadMyNotes==Newinflater.inflate(R.layout.activity_myspace_mynotes_uploades,null);          
                  mLL_UploadNotes = (LinearLayout) mViewUploadMyNotes.findViewById(R.id.llUpload_MyNotes);

                ((ViewGroup) mLin_myNotes.getParent()).removeView(mViewUploadMyNotes);

                mLin_myNotes.addView(mViewUploadMyNotes);

            }
        });
        return mViewMyNotes; 
```

# c++ - 向量中的指针

> ID：15217179
> 
> 赞同：0
> 
> 时间：2013-03-05T06:26:13.313
> 
> 标签：c++, pointers, vector

```
std::vector<int*> * vec=new std::vector<int*>();
int* p=new int();
int* q=new int();
vec.push_back(p);
vec.push_back(q);
.
.
.
vec.clear(); 
```

我的问题是内存会被释放吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:27:33.990

保存指针的内存，是的。存放指针内容的内存，没有。`delete vec;`此外，您应该通过在程序末尾编写来释放向量本身，但我想这不是您所要求的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:27:50.790

`delete`不，当你使用`new`（而不是使用智能指针）时，你应该使用, 。对于向量的元素 - 不，内存不会被释放，您应该`delete`在向量中的每个元素上使用。就像是

```
std::for_each(vec.begin(), vec.end(), [](const int* p) { delete p; }); 
```

# zend-framework - 需要有关创建移动网站的建议

> ID：15217180
> 
> 赞同：1
> 
> 时间：2013-03-05T06:26:21.747
> 
> 标签：zend-framework, mobile

我的一个新客户要求我们重新创建他们的小型招聘网站。主站点将使用 Zend Framework 1.11 和 mySql 完成。

这是一个由两名顾问招聘人员组成的团队的中/小型网站，其中列出了各种公司的可用职位，并允许候选人上传简历和搜索职位以及显示有关顾问的一般信息。

他们要求我们还使用其主站点的子域创建一个能够在移动设备（iPhone 和 Android）上显示的站点。

我的问题是：是否可以将 mobi.myclientswebsitedomain.com 指向 www.myclientswebsitedomain.com 站点并根据检测到的设备简单地更改使用的布局？

以最少的努力实现这一目标的最佳方法是什么？

非常感谢约翰的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:57:32.460

点你的*手机。**子域到与您的www*相同的 web 文件夹。领域。在您的 ActionController 中编写条件语句，该语句将根据当前子域加载不同的 css 文件。

# android - 将列表的行 ID 传递给另一个活动

> ID：15217182
> 
> 赞同：2
> 
> 时间：2013-03-05T06:26:29.983
> 
> 标签：android, android-listview

我有两个活动。当用户点击列表中的药品名称时，会进入第二个活动，显示药品的详细信息。对于第一个活动，以下是我的代码：

```
public class MedicineView extends Activity implements AdapterView.OnItemClickListener
{
private SQLiteDatabase database;
private ArrayList<String> result = new ArrayList<String>(); 
private ArrayList<Long> idList = new ArrayList<Long>();
private ArrayAdapter<String> adapter;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.medicine_view);
    ListView listContent = (ListView)findViewById(R.id.listView1);

    DBHelper helper = new DBHelper(this);
    database = helper.getWritableDatabase();

    // view data

    try{
        String query = "select * from " + DBHelper.TABLE_MEDICINE;

        Cursor c = database.rawQuery(query, null);

        if(c!=null)
        {
            c.moveToFirst();
            int getIndex = c.getColumnIndex(DBHelper.MED_ID);
            int getNameIndex = c.getColumnIndex(DBHelper.MED_NAME);
            int getDosageIndex = c.getColumnIndex(DBHelper.DOSAGE);
            int getFrequencyIndex = c.getColumnIndex(DBHelper.FREQUENCY);

            if(c.isFirst())
            {
                do{
                    idList.add(c.getLong(getIndex));
                    result.add(c.getString(getNameIndex)+" | " + c.getString(getDosageIndex)
                            +" | " + c.getString(getFrequencyIndex)+"\n" );
                }while(c.moveToNext());
            }
        }

        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,result);
        listContent.setAdapter(adapter);
        listContent.setTextFilterEnabled(true);

        c.close();

    }
    catch(SQLException e){  
    }

    listContent.setOnItemClickListener(this);
}

public void onClickHome(View v){
    startActivity (new Intent(getApplicationContext(), MenuUtama.class));
}

public void onClickAdd(View v){
    startActivity (new Intent(getApplicationContext(), MedicineAdd.class));
}

@Override
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    Intent myIntent = new Intent(v.getContext(), MedicineDetail.class);
    myIntent.putExtra("ID", id);
    startActivity(myIntent);
}
} // end class 
```

这是我的第二个活动

```
public class MedicineDetail extends Activity 
 {
private SQLiteDatabase database;
private ArrayList<Long> idList = new ArrayList<Long>();
ArrayList<String> list = new ArrayList<String>();

Button btnEdit;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.medicine_detail);

    Intent i = getIntent();
    final int id = i.getIntExtra("int", -1);
    //int id = getIntent().getIntExtra("id", 2);

    btnEdit = (Button)findViewById(R.id.imageButton2);

    DBHelper helper = new DBHelper(this);
    database = helper.getWritableDatabase();

    String sql = "select * from " + DBHelper.TABLE_MEDICINE + " WHERE id = " + id;
    Cursor cursor = database.rawQuery(sql, null);

    try{
        if( cursor != null ){
            if (cursor.moveToFirst()) {
               do {
                   idList.add(cursor.getLong(0));
                   list.add(cursor.getString(1));
                   list.add(cursor.getString(2));
                   list.add(cursor.getString(3));
                   list.add(cursor.getString(4));
                   list.add(cursor.getString(5));
                   list.add(cursor.getString(6));
               } while (cursor.moveToNext());
            }
        }
    }
    catch(SQLException e){  
    }

    cursor.moveToFirst();

    TextView StartDate = (TextView) findViewById(R.id.textView8);
    TextView EndDate = (TextView)findViewById(R.id.textView9);
    TextView MedName = (TextView)findViewById(R.id.textView10);
    TextView Dosage = (TextView)findViewById(R.id.textView11);
    TextView Frequency =    (TextView)findViewById(R.id.textView12);
    TextView Instruction =  (TextView)findViewById(R.id.textView13);

    StartDate.setText(cursor.getString(1));
    EndDate.setText(cursor.getString(2));
    MedName.setText(cursor.getString(3));
    Dosage.setText(cursor.getString(4));
    Frequency.setText(cursor.getString(5));
    Instruction.setText(cursor.getString(6));
    cursor.close();

}

public void onClickHome(View v){
    startActivity (new Intent(getApplicationContext(), MedicineView.class));
}

} // end class 
```

这是我的日志猫

```
03-05 08:55:08.985: W/Bundle(2186): Key ID expected Integer but value was a    java.lang.Long.  The default value -1 was returned.
03-05 08:55:09.005: W/Bundle(2186): Attempt to cast generated internal exception:
03-05 08:55:09.005: W/Bundle(2186): java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.Integer
03-05 08:55:09.005: W/Bundle(2186):     at android.os.Bundle.getInt(Bundle.java:933)
03-05 08:55:09.005: W/Bundle(2186):     at android.content.Intent.getIntExtra(Intent.java:3683)
03-05 08:55:09.005: W/Bundle(2186):     at com.android.MyDoc.MedicineDetail.onCreate(MedicineDetail.java:32)
03-05 08:55:09.005: W/Bundle(2186):     at android.app.Activity.performCreate(Activity.java:4465)
03-05 08:55:09.005: W/Bundle(2186):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-05 08:55:09.005: W/Bundle(2186):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
03-05 08:55:09.005: W/Bundle(2186):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
03-05 08:55:09.005: W/Bundle(2186):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
03-05 08:55:09.005: W/Bundle(2186):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
03-05 08:55:09.005: W/Bundle(2186):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 08:55:09.005: W/Bundle(2186):     at android.os.Looper.loop(Looper.java:137)
03-05 08:55:09.005: W/Bundle(2186):     at android.app.ActivityThread.main(ActivityThread.java:4340)
03-05 08:55:09.005: W/Bundle(2186):     at java.lang.reflect.Method.invokeNative(Native Method)
03-05 08:55:09.005: W/Bundle(2186):     at  java.lang.reflect.Method.invoke(Method.java:511)
03-05 08:55:09.005: W/Bundle(2186):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-05 08:55:09.005: W/Bundle(2186):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-05 08:55:09.005: W/Bundle(2186):     at dalvik.system.NativeStart.main(Native Method)
03-05 08:55:09.053: D/AndroidRuntime(2186): Shutting down VM
03-05 08:55:09.053: W/dalvikvm(2186): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
03-05 08:55:09.093: E/AndroidRuntime(2186): FATAL EXCEPTION: main
03-05 08:55:09.093: E/AndroidRuntime(2186): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.MyDoc/com.android.MyDoc.MedicineDetail}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.os.Looper.loop(Looper.java:137)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.app.ActivityThread.main(ActivityThread.java:4340)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at java.lang.reflect.Method.invokeNative(Native Method)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at java.lang.reflect.Method.invoke(Method.java:511)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at dalvik.system.NativeStart.main(Native Method)
03-05 08:55:09.093: E/AndroidRuntime(2186): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.database.AbstractCursor.checkPosition(AbstractCursor.java:434)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at com.android.MyDoc.MedicineDetail.onCreate(MedicineDetail.java:70)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.app.Activity.performCreate(Activity.java:4465)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-05 08:55:09.093: E/AndroidRuntime(2186):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
03-05 08:55:09.093: E/AndroidRuntime(2186):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:32:00.300

在第二个活动中有一个问题

```
in the first activity 

 Intent myIntent = new Intent(v.getContext(), MedicineDetail.class);
    myIntent.putExtra("ID", position);
    startActivity(myIntent);

final int id = i.getIntExtra("int", -1); should be

final int id = i.getIntExtra("ID", -1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:32:52.507

在调用者活动中，您有：`myIntent.putExtra("ID", id);`

在打开的活动中而不是

```
i.getIntExtra("int", -1); 
```

它应该是

```
i.getIntExtra("ID", -1); 
```

请注意，当您尝试从意图中获取额外内容时，它的名称应该相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:43:18.153

在第一个活动中更改`id`为`position`. 就这样。

```
 myIntent.putExtra("ID", position); 
```

并在第二

```
getIntExtra("ID", -1); 
```

或者

```
getExtra("ID", -1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:47:41.277

**编辑**：您得到的是 long 值，但 id 返回 int 所以它会抛出 classcast 异常

而不是这个

```
idList.add(cursor.getLong(0)); 
```

用这个

```
 idList.add(cursor.getInt(0)); 
```

* * *

您的 id 与表中的 rowid 不同。不要弄乱它们，您正在发送列表中位置的 id。所以你需要做的是

创建一个 Hashmap 以将 ids 与全局数据映射

```
Hashmap Idshash=new Hashmap(); 
```

在插入结果列表时将值添加到 hasmap

```
long id=c.getLong(getIndex);
String item=c.getString(getNameIndex)+" | " + c.getString(getDosageIndex)
                            +" | " + c.getString(getFrequencyIndex);
   idList.add(id);
Idshash.put(item,id);
  result.add(item); 
```

在 onitemclick 监听器中这样做

```
@Override
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    String item=((TextView)v).getText();
    long selectedid=Idshash.get(item);
    Intent myIntent = new Intent(v.getContext(), MedicineDetail.class);
    myIntent.putExtra("ID", selectedid);
    startActivity(myIntent);
} 
```

# django - Django 没有返回 HttpResponse 对象

> ID：15217193
> 
> 赞同：3
> 
> 时间：2013-03-05T06:27:15.437
> 
> 标签：django

我做了一个简单的宠物商店应用程序，只是添加了搜索框功能，我收到了这个错误

```
ValueError at /pet/search/
The view mysite.pet.views.search_page didn't return an HttpResponse object. 
```

我试图将 render_to_response 更改为 HttpResponseRedirect 但仍然遇到相同的错误。

在视图中链接回我的 search_page 函数。

```
def search_page(request):
    form = SearchForm()
    if request.method == "POST":
        f = SearchForm(request.POST)
        if f.is_valid():
            Pets = Pet.objects.filter(animal = f.cleaned_data["text"])
            return HttpResponseRedirect("search.html",{"Pets":Pets},{"form":form})
        else:
            return render_to_response("search.html",{"form":form} , context_instance = RequestContext(request)) 
```

我做了一些研究，我知道视图必须在发出 HttpRequest 时返回 HttpResponse 并且 render_to_response 只是一个快捷方式。有人可以帮助解释为什么这个函数不起作用。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T06:31:52.503

您遇到此问题是因为您没有编写`HttpResponse object` if 请求类型不是`POST`

为了在您的观点中克服这个问题，请编写如果请求类型未发布时将处理的内容

```
def search_page(request):
    form = SearchForm()
    if request.method == "POST":
        f = SearchForm(request.POST)
        if f.is_valid():
            Pets = Pet.objects.filter(animal = f.cleaned_data["text"])
            return HttpResponseRedirect("search.html",{"Pets":Pets},{"form":form})

    return render_to_response("search.html",{"form":form} , context_instance = RequestContext(request)) 
```

希望这会帮助你谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:37:18.390

错误是因为调用函数时方法类型不是 POST 并且没有找到对应的 HttpResponse 对象。

```
def search_page(request):
    form = SearchForm()
    if request.method == "POST":
        f = SearchForm(request.POST)
        if f.is_valid():
            Pets = Pet.objects.filter(animal = f.cleaned_data["text"])
            return HttpResponseRedirect("search.html",{"Pets":Pets},{"form":form})
        else:
            return render_to_response("search.html",{"form":form} , context_instance = RequestContext(request))

    return render_to_response("any.html",{} , context_instance = RequestContext(request)) 
```

# android - 无法登录 Android 版 Google+ 平台

> ID：15217195
> 
> 赞同：2
> 
> 时间：2013-03-05T06:27:33.433
> 
> 标签：android, google-plus

这个问题与这个[适用于 Android 的 Google+ Platform - getCurrentPerson](https://stackoverflow.com/q/15136160/1707547)相同，但我在这里没有找到解决方案。

**这是问题所在：**

`plusClient.getCurrentPerson()`总是`returns null`从`onSignedIn(PlusClient plusClient) function`

我使用了`PlusSampleActivity -> SignInActivity`来自 Google Play Services 的。这是一个错误，还是这里的任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:00:28.000

[您是否在 API 控制台 ( https://code.google.com/apis/console](https://code.google.com/apis/console) )中为您的应用程序设置了客户端 ID ？当您的应用程序连接时，其密钥指纹和包名用于从控制台查找项目并检查您是否启用了 Google+ API，以及是否有足够的配额来处理请求。如果未找到，则看起来您的配额为 0，因此请求失败，这将为您提供 null。

您可以在此处查看要遵循的步骤：[https ://developers.google.com/+/mobile/android/getting-started#step_1_enable_the_google_api](https://developers.google.com/+/mobile/android/getting-started#step_1_enable_the_google_api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:23:03.190

正如 Ian 所回答的，您必须在 API 控制台中设置您的应用程序哈希密钥。但请注意，执行此设置后可能需要一些时间（有时几个小时）才能使用它，因此请耐心等待。

# spring-mvc - 对应用程序上下文、url-pattern 和 RequestMapping 的混淆 - 全部在一个项目中

> ID：15217199
> 
> 赞同：0
> 
> 时间：2013-03-05T06:27:40.660
> 
> 标签：spring-mvc

我一直在尝试开发一个使用 Spring 3(.1.1) MVC 的小型测试应用程序，它支持多个 servlet 来处理不同的 URL 模式。

我创建了另一个 bean 以自动装配到第一个 servlet 中，因此我最初将 DAO 的 放入 app-servlet.xml 文件中，因为我希望它仅限于该 servlet。Bu† 当我这样做时，我收到一个关于无法自动装配 bean 的错误。如果我将 dhe 语句移动到 root-context.xml 文件中，那么它就起作用了。

因为我在 web.xml 中有 2 个 DispatcherServlet，所以我将每个的 url-pattern 设置为“/”。虽然我仍然在 app-servlet.xml 文件中有这些语句，但我将第二个 servlet 的 url-pattern 更改为“/add”（也尝试了“/fred”），突然一切都按预期工作了（第二个 servlet 使用 /addperson 调用- 在 servlet 的 RequestMapping 中指定）。

当我将 DAO 的代码放入 root-context.xml 时，我能够将 url-pattern 放回“/”。

* * *

所以在测试这个设置时，我有以下 web.xml：

```
 <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->

<servlet>
    <servlet-name>app</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/app-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet>
    <servlet-name>person</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/person-servlet.xml</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>app</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>person</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

app-servlet.xml：

```
<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:annotation-config />
<context:component-scan base-package="com.hh.builditup.controller" /> 
```

和人-servlet.xml：

```
<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.hh.builditup.controller" /> 
```

根上下文.xml：

```
<!-- Root Context: defines shared resources visible to all other web components -->
<context:annotation-config />
<context:component-scan base-package="com.hh.builditup.dao" /> 
```

'app' servlet 看起来像：@Controller public class HomeController {

```
private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

@Autowired
private MyDAO myDAO;
/**
 * Simply selects the home view to render by returning its name.
 */
@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) { 
```

最后是'person' servlet：

```
@Controller
public class PersonController {

private static final Logger logger = LoggerFactory.getLogger(PersonController.class);

/**
 * Simply selects the home view to render by returning its name.
 */
@RequestMapping(value = "/addperson", method = RequestMethod.GET) 
```

DAO bean 看起来像：

```
@Component("myDAO")
public class MyDAO {

public MyDAO()
{
    System.out.println("created MyDAO object");
} 
```

}

有人可以解释会产生这些结果的 url-pattern 和 RequestMapping 的交互吗？当一个 bean 被限制在一个 servlet 而不是很常见时，为什么必须修改 url 模式？另外为什么更改为 url-pattern 对用于测试 servlet 的 URL 没有影响？

提前感谢您的任何指导。

# java - 如何在自定义位置在 mac 上安装 java 7？

> ID：15217200
> 
> 赞同：9
> 
> 时间：2013-03-05T06:27:46.490
> 
> 标签：java, macos, java-7

我想在 mac 上静默安装 java 7。我找不到任何文档/链接。
我也不希望它在 /Library 中。是否可以在任何自定义位置安装相同的。
我对 mac 很陌生，任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-07-04T01:04:51.190

只是为了使@HawkMage 中的步骤更明确（并说明它们与JDK8 一起使用）：

1.  `jdk-8u5-macosx-x64.dmg`从 Oracle下载二进制文件（例如）
2.  在 Finder 中双击以安装卷。忽略带有“JDK 8 Update x.pkg”的窗口</li>
3.  用于`pkgutil`将包的内容展开到临时目录中：

    ```
    $ pkgutil --expand  /Volumes/JDK\ 8\ Update\ 05/JDK\ 8\ Update\ 05.pkg /tmp/jdkpkg 
    ```

4.  然后，更改到该目录并使用`cpio`展开`Payload`文件：

    ```
    $ cd /tmp/jdkpkg
    $ cpio -i < ./jdk18005.pkg/Payload 
    ```

5.  最后，将`Home`目录移动到您希望`JAVA_HOME`居住的任何地方

    ```
    $ mv Contents/Home /mytools/jdk-1.8.0_05 
    ```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-11T23:08:44.820

不幸的是，OS X 上的“标准”Java 是以非常非标准的方式打包的。

它不像linux那么简单，下载的DMG会给你一个PKG文件，如果你运行它就安装Java。如果您试图保持 OS X 附带的标准 Java 完好无损，这将没有用处。

我所做的是从 Oracle 下载 DMG 文件并打开它，但我没有运行 PKG，而是使用 pkgutil 来提取包的内容。您将找到一个名为 jdk*.pkg 的目录，并在其中看到一个名为 Payload 的文件。这是一个 GZipped CPIO 文件，您可以通过对它进行分类并将其通过管道传输到 cpio -zi 中来提取它。从这里您现在将有一个名为 Contents 的目录，在它下面您将找到一个名为 Home 的目录。这个“主”目录是您通常通过 Linux tar.gz Java 下载获得的目录。您可以将它复制到任何您想要的位置并将 bin 目录放在您的路径中并将 JAVA_HOME 设置为它，您就可以开始了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T08:05:43.843

就像在 Linux 中一样，您几乎可以在 Mac 上任何您喜欢的地方安装 Java。您只需确保将*Java 可执行文件添加到路径*或*创建*java 可执行文件的符号链接并将其放在 /usr/bin/ 目录中，以便可以在任何地方执行。

**要将 Java 添加到路径：**

1）`.bash_profile`在您的主目录中找到修改。

2）添加这一行：`export PATH=/yourjavadir/bin:$PATH`

3) 保存并退出

4）然后`source .bash_profile`重新加载文件。您只需执行一次。

**要创建符号链接：**

```
ln -s /yourjavadir/java /usr/bin/java 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-10T18:35:45.723

我有同样的问题，只是设法解决了。

1.  下载并解压缩自定义目录中的 Java 二进制文件。例如 -

> /Users/myuser/Documents/jre1.8.0_25.jre

2.  使用以下参数更新您的 .bash_profile

`export JAVA_HOME=/Users/a514624/Documents/jre1.8.0_25.jre/Contents/Home export PATH=$PATH:$JAVA_HOME/bin`

3.  关闭终端窗口并再次打开它。或者，您可以键入命令“source .bash_profile”。

在这些步骤之后，如果您在命令提示符下键入 java -version，您会看到它反映了您希望看到的版本 -

`$ java -version java version "1.8.0_25" Java(TM) SE Runtime Environment (build 1.8.0_25-b17) Java HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)`

4.  取消链接现有的 Java 软链接（需要 root/提升权限） `root$ unlink /usr/bin/java`

5.  创建指向新 Java 安装的符号链接 `root$ ln -s /Users/myuser/Documents/jre1.8.0_25.jre/Contents/Home/bin/java /usr/bin/java`

就是这样。之后的生活很美好。希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-23T19:00:45.513

如果您只需要 JRE/Java 运行时版，那么以前的答案是正确的，但如果您需要 JRE 和 JDK（Java 开发工具包），那么只需转到下面的链接并选择 mac 并运行 dmg，它会好得多，而且是迄今为止最简单的。

[http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)

# php - mysql查询需要在变量周围加上引号

> ID：15217203
> 
> 赞同：0
> 
> 时间：2013-03-05T06:27:52.567
> 
> 标签：php, mysql

我正在运行本地 apache 服务器和 mysql 服务器。我的本地网站运行良好。

当我将我的网站上传到 ipage（主机）并将数据库导入他们的 mysql 服务器时，我能够连接到数据库，但查询返回 null。

我检查了上传的数据库，我能看到的唯一区别是本地类型是 innodb，但不知何故 ipage 不支持 innodb，现在类型变成了 MyISam。

现在我做了一些测试：

这是我的 php 代码：

```
$type = mysqli_real_escape_string($connection, $_GET['type']);                      

$sq1 = "SELECT 
      course_id, 
        FROM 
          courses 
        WHERE 
        training_field LIKE '$type'" 
```

这适用于本地，但不适用于远程服务器。现在，当我对 $type 进行硬编码时。IE

```
$sq1 = "SELECT 
      course_id, 
        FROM 
          courses 
        WHERE 
        training_field LIKE 'ENIGNEEING'" 
```

这在任何地方都有效？！

任何的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:45:29.580

```
$type = mysql_real_escape_string($_REQUEST['type']);                        

$sq1 = "SELECT course_id FROM courses WHERE training_field LIKE '$type'" 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:19:49.157

试试这个

```
$sq1 = "SELECT 
  course_id, 
    FROM 
      courses 
    WHERE 
    training_field LIKE '".$type."'" 
```

PHP连接:)

# service - JAX-WS 服务不允许是元素 HTTP 的子元素

> ID：15217205
> 
> 赞同：0
> 
> 时间：2013-03-05T06:28:12.510
> 
> 标签：service, configuration, jax-ws, cxf, mule

我正在尝试在 mule 中创建 JAX-WS 服务我从 [这里做一个示例](http://www.mulesoft.org/documentation/display/current/Building+Web+Services+with+CXF#BuildingWebServiceswithCXF-CreatingaJAX-WSService)

我在配置中遇到错误：元素：JAX-WS 服务不允许成为元素 HTTP 的子元素我安装 mule 3.3.1 但 Mule Studio CE 使用 mule 3.3.0

```
 <http:inbound-endpoint address="http://localhost:63081/hello" exchange-pattern="request-response">
    <cxf:jaxws-service serviceClass="org.example.HelloWorld"/>
</http:inbound-endpoint> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:27:04.147

Studio 曾经在嵌套元素方面遇到一些问题，如本[Jira中所述](http://www.mulesoft.org/jira/browse/STUDIO-2297)

然而，这已在即将发布的[Mule 3.4](http://blogs.mulesoft.org/announcing-mule-3-4-beta/)中得到修复。

# mongodb - 使用 MongoDB/Mongoose 按 ID 查找提交

> ID：15217212
> 
> 赞同：1
> 
> 时间：2013-03-05T06:28:38.560
> 
> 标签：mongodb, database-design, mongoose, database, nosql

所以我习惯于通过 MySQL 的自动增量主 ID 来查找提交，但是在使用 MongoDB ORM 包装器 Mongoose 之后，我发现由于 Mongo 在集合中存储数据的方式不同，实际上并没有任何传统的概念自增 ID。

我现在一直想弄清楚如何获取提交，因为通常我会像这样构建我的 URL：

`submission/34/category/slug-goes-here`.

由于`34`现在使用 Mongo 变成了一个丑陋的基于字符串的 UUID，我不需要在我的 URL 中显示它，但我想要一个唯一的 URL 来查找我的提交。

我正在考虑可能有一个设置方法，当我将提交插入我的数据库时，它会生成某种 6 字符散列，例如`zhXk40`并像这样查找它。

我想知道如果我这样做，性能权衡会是什么。如果我对 slug 进行限制，然后用 slug 查找它们，并验证类别匹配，那会更有效吗？无论哪种方式，我都必须检查类别和 slug 是否匹配，但我不确定在这种情况下是否真的需要 ID。

创建路线+根据该路线从数据库中查找一些数据的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:07:24.843

您应该知道的第一件事是： **该`_id`属性不一定是那个“丑陋”的`ObjectId`字符串。**

实际上，`_id`只需要在它的集合中是唯一的，所以如果你想使用自动递增的 ID，没有问题，但是......

如果你打算在你的数据库中使用分片，那么使用自动递增字段`_id`是矫枉过正的。

**为什么？**在这里阅读接受的答案：[我应该在 MongoDB 中实现自动递增吗？](https://stackoverflow.com/questions/6645277/should-i-implement-auto-incrementing-in-mongodb)

在我的应用程序中，由于我们不打算对其进行分片，因此我们使用索引的数字 ID 只是为了最终用户更容易使用，并且在内部所有引用都是`ObjectId`s。

此外，这是在 MongoDB 中创建自动递增字段的好教程：http: [//docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/](http://docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-05T06:38:15.547

嘘！如果我们能够真正了解这里的最佳实践，我们都会过得更好。会说话的人还在说话，而且会持续一段时间。

我将如何解决这个问题是尽可能漂亮。如果我有一个可用的文本字符串使其具有语义，那将是最好的情况。

如果我不能这样做，我会选择你建议的哈希值。

对于这两种解决方案，挑战将是确保它保持独特性。这意味着在保存之前进行查找。

在性能上，它与 SQL 相同。索引你用来查找的东西。Mongo 在复合索引方面做得很好，所以类别名称和散列会很快查找。

# django - 使用 Grappelli 的 TinyMCE

> ID：15217221
> 
> 赞同：1
> 
> 时间：2013-03-05T06:29:49.000
> 
> 标签：django

我想改变我的 TinyMCE 主题

![大约 1995 年的 tinyMCE](../Images/dfa6290d61fc8844390eb2ae6843557d.png)

进入 Grappelli 的主题，就像在[这里](http://code.google.com/p/django-grappelli/wiki/tinymce)找到的一样。有什么帮助吗？我真的觉得链接中的文档并不完整。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:53:53.950

我刚刚找到了解决方案。

首先`settings.py`，我删除了tinymce，然后添加了

```
class Media:
   js = ['/static/grappelli/tinymce/jscripts/tiny_mce/tiny_mce.js',
   '/static/grappelli/tinymce_setup/tinymce_setup.js',
   ] 
```

在我的`admin.py`

# c# - 如何赋予 DataGridView 单元格智能感知？

> ID：15217222
> 
> 赞同：1
> 
> 时间：2013-03-05T06:29:50.767
> 
> 标签：c#, assemblies, intellisense

我正在尝试使用 CodeDOm 为 SQL 服务器中的表创建实体类。我有一列的 datagridview 给出要添加到类中的命名空间列表。有什么方法可以给 GridView Intellisense 的每个单元格，这样输入命名空间会很容易吗？

编辑：感谢@yeonho，我找到了一种方法来获取gridview的自动完成方法。我使用这段代码来获取 System.dll 的命名空间：

```
 Assembly assembly = Assembly.Load("System.dll");
        Type[] types = assembly.GetTypes(); 
```

但是，有什么方法可以引用 System.dll 而无需将其复制到调试文件夹或提供完整的限定路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:52:26.870

我是这样的。。

```
public List<Type> GetTypesFromAssembly()
        {
            List<Type> listOfAllTypes = new List<Type>();
            Assembly[] allAssembliesInCurrentDomain = AppDomain.CurrentDomain.GetAssemblies();

            foreach (Assembly assembly in allAssembliesInCurrentDomain)
            {
                listOfAllTypes.AddRange(assembly.GetTypes());
            }

            return listOfAllTypes;        
        }

public List<string> GetSystemNamespaces()
        {
            List<string> namespaces = new List<string>();            

            List<Type> types = GetTypesFromAssembly();

            foreach (Type type in types)
            {
                if (type.Namespace != null)
                {
                    namespaces.Add(type.Namespace.ToString());
                    namespaces = namespaces.Distinct().ToList();
                }
            }
            return namespaces;
        } 
```

# java - 如何从 SSLSocket 中提取 X509Certificate[] 的实例？

> ID：15217223
> 
> 赞同：0
> 
> 时间：2013-03-05T06:29:52.813
> 
> 标签：java, ssl, ssl-certificate

假设我有以下代码，它创建了一个 SSL 套接字`google.com`，并且我想查看 Google 的证书。我怎样才能得到一个实例`javax.security.cert.X509Certificate[]`？

```
import java.io.*;
import java.math.*;
import java.net.*;
import java.security.*;

import javax.net.ssl.*;
import javax.net.*;

public class MWE{
    public static void main(String[] args) throws Exception{
        SSLContext sslContext = SSLContext.getDefault();
        SocketFactory clientSocketFactory = sslContext.getSocketFactory();

        String remoteHost = "google.com";
        int remotePort = 443;
        SSLSocket socket = null;
        try {
            //Lookup the "common name" field of the certificate from the remote server:
            socket = (SSLSocket) clientSocketFactory.createSocket(remoteHost, remotePort);
            socket.setEnabledCipherSuites(socket.getSupportedCipherSuites());
            socket.startHandshake();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

    }
} 
```

我查看了所涉及的每个类的文档，但我还没有找到对包含证书的任何数据结构的任何引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:42:29.853

```
X509Certificate[] c = socket.getSession().getPeerCertificateChain(); 
```

# python - 存储和重用 BeautifulSoup 搜索和节点遍历

> ID：15217233
> 
> 赞同：1
> 
> 时间：2013-03-05T06:30:19.807
> 
> 标签：python, beautifulsoup

我正在构建一个实用程序来从一堆不同格式的网站中提取相似的数据（标题和日期），BeautifulSoup 非常有帮助。我还没有找到存储我正在使用的 BeautifulSoup 函数的好方法，这样我就不必为每个站点构建一个新函数。这是一个例子：

```
soup = BeautifulSoup(html)
title = soup.find("h4", "title").text    # extract title
date = soup.find('li', 'when').em.text       # extract date 
```

每个站点将有一组不同的节点来解析。拥有数百个站点，为每个站点构建一个独特的功能是很愚蠢的。有没有办法将 soup.find('x').etc.etc 调用存储在 URL 旁边的表格中，并在一个函数中应用正确的 BeautifulSoup 调用？希望这是有道理的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:32:52.067

嗯，假设我理解你的帖子，这行得通吗？

```
linkInstructions = {
  "url1": {
    "title": lambda n: n.find('h4', 'title').text,
    "date": lambda n: n.find('li', 'when').em.text
  },
  "url2": {
    "title": lambda n: n.find('h3', 'title').text,
    "date": lambda n: n.find('li', 'when').strong.text
  }
  # and so forth
} 

def parseNode(node, url):
  # let 'node' be the result of BeautifulSoup(html)
  # and 'url' be the url of the site    

  result = {}

  for key,func in linkInstructions[url].iteritems():
    result[key] = func(node)

  # would return a dict with the structure {'title': <title>, 'date': <date>}
  return result 
```

编辑：糟糕，枚举不是正确使用的功能。

# windows-8 - 为不同线程编组的 Windows 8 类库

> ID：15217236
> 
> 赞同：0
> 
> 时间：2013-03-05T06:30:36.813
> 
> 标签：windows-8

从 Windows 8 类库中，如果我尝试更新我的 UI，我会收到此错误： `The application called an interface that was marshalled for a different thread.`我无法解决问题，因为`Dispatcher.RunAsync`方法不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:03:25.310

不是从其他线程更新 UI 的好方法。

为什么 Dispacher.RunAsync 不可用？

```
this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
{
  YourMethod();
}); 
```

或尝试用作等待任务：

```
this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
{
  YourMethod()();
}).AsTask().Wait();

**this** is reference to **Window.Current**. 
```

# math - 等式在几何中代表什么（直观地）？

> ID：15217239
> 
> 赞同：1
> 
> 时间：2013-03-05T06:30:39.057
> 
> 标签：math, geometry, computational-geometry, numeric, polynomial-math

我正在写一个双线性插值方法。

该方法可以通过解方程A*x = b来抽象，A是下面的4x4矩阵：

```
1 x1 y1 x1*y1
1 x2 y2 x2*y2 
1 x3 y3 x3*y3
1 x4 y4 x4*y4 
```

这里，(x1, y1), (x2, y2), (x3, y3) 和 (x4, y4) 是包含 dst 插值点的四个点。

我的问题是当 det(A) = 0(then x! = A-1*b) 时，四边形是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:47:34.343

当行或列之一可以表示为其他行或列的线性组合时，行列式变为 0。使用列，对于四个点中的每一个点，该等式必须对某些常数 a、b、c 成立：

```
a*1 + b*x + c*y + xy = 0 
```

这是具有平行于轴的渐近线的[双曲线](http://en.wikipedia.org/wiki/Hyperbola)方程，因此当且仅当四个点落在同一双曲线上时，行列式为零。

例如，如果您选择矩形 (-2, -1), (-1, -2), (1, 2), (2, 1) 行列式将为零，因为这些点落在由 t 定义的双曲线上→ (t, 2/t)。

另一种看待它的方式：您可以自由选择任何 3 个点。这三个点定义了一条独特的双曲线。当且仅当您从该双曲线中选择第四个点时，行列式为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:05:27.933

上面 Joni 的回答是完全正确的，但这是您可能喜欢的物理解释：

将正方形想象成由以下四个点定义的良好四边形：1 = (0,0)、2 = (1,0)、3 = (1, 1) 和 4 = (0, 1)。

如果您通过锚定点 1 和 2 开始倾斜它，但将点 3 向右拉，使边保持相同的长度，但 x 轴与点 2 和 3 之间的线段之间的角度从 90 度改变度到 180 度并且 x 轴与点 1 和 4 之间的线段之间的角度从 90 度变为 0，行列式将随着角度的增加而接近零。当您有点 1 = (0,0)、2 = (1, 0)、3 = (2,0) 和 4 = (1,0) 时，四边形将折叠为线段，行列式将是零。

你可以用你的矩阵运行这个实验，看看我是否正确。

# jsf - inputText 数据不显示在值中

> ID：15217240
> 
> 赞同：0
> 
> 时间：2013-03-05T06:30:39.990
> 
> 标签：jsf

数据表：

```
<h:form>
    <h:panelGroup>
        <h:dataTable id="branch-table" value="#{testController.items}" var="item" border="0" >
            <h:column>
                <f:facet name="header">
                    <h:outputText value="NAME"/>
                </f:facet>
                <h:outputText value="#{item.name}"/>
            </h:column> 
            <h:column>
                <h:inputText value="#{item.name}"/>
            </h:column> 
            <h:column>
                <p:commandButton styleClass="edit" action="#{testController.prepareEdit}" value="" oncomplete="updateForm();"/>
            </h:column>
        </h:dataTable>
    </h:panelGroup>
</h:form> 
```

形式：

```
<div id="test-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <h:form>
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            Details
        </div>
        <div class="modal-body">
            <h:inputText value="#{testController.edit.name}"/>
        </div>
        <div class="modal-footer">
            <p:commandButton action="#{testController.update}" value="#{bundle.CreateBranchSaveLink}"/>
            <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
        </div>
        <p:remoteCommand name="updateForm" update="@form" oncomplete="$('#test-modal').modal('show');"/>
    </h:form>
</div> 
```

准备编辑方法：

```
public void prepareEdit() {
    current = (TestEntity) getItems().getRowData();
    selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
} 
```

编辑方法：

```
public TestEntity getEdit() {
    if (editCurrent == null) {
        editCurrent = new TestEntity();
        selectedItemIndex = -1;
    }
    return editCurrent;
} 
```

表格上的通知`<h:inputText value="#{testController.edit.name}"/>`。不会显示任何数据，但如果我将其更改为`<h:outputText value="#{testController.edit.name}"/>`，将显示正确的数据。

我很困惑为什么会这样。我需要它是 inputText 以便我可以用新值更新它。

*更新

获取项目方法：

```
public DataModel getItems() {
    if (items == null) {
        items = getPagination().createPageDataModel();
    }
    return items;
} 
```

# java - JTable 刷新问题

> ID：15217241
> 
> 赞同：1
> 
> 时间：2013-03-05T06:30:40.993
> 
> 标签：java, swing, user-interface, jtable, tablemodel

我很难`JTable`刷新数据。

我正在实现我自己的`TableModel`，从 扩展`javax.swing.table.AbstractTableModel`，使用接收`java.util.ArrayList<>`并处理它以构建`Object[][]`读取表数据的方法。

逻辑如下：

我正在实现一个带有一些记录键的 JList，当用户选择一个时，会触发一个方法来获取键并查询 MySQL 数据库以获取与该键相关的记录。最终结果是一个 ArrayList<>，我将它传递给 TableModel 以构造数据，然后将其设置到我的表中。

它可以正常工作，但是在几次点击后，它会停止显示表格数据，过了一会儿，它又开始工作了。我不确定刷新表格或整个 GUI 是否有问题。

这是代码的摘录：

建表数据的方法：

```
public void createTableData(java.util.ArrayList<Lote> alLote) {
    //Lote is an entity class modeling the database table.
    TABLE_DATA = new Object[alLote.size()][TABLE_COLUMNS.length];
    //TABLE_DATA is an Object array, TABLE_COLUMNS is a String[] containing the names of the columns.
    int i = 0;
    for (Lote element : alLote) {
        int j = 0;
        TABLE_DATA[i][j++] = element.getFirstColumnValue();
        //and so son
        i++;
    }
    super.fireTableDataChanged();
} 
```

启动 GUI 时，它以一个空的 ArrayList<> 开始：

```
LoteTableModel ltm = new LoteTableModel();
arrayList = new ArrayList<Lote>();
ltm.createTableData(arrayList);
myTable = new JTable();
myTable.setModel(ltm);
scrollPane = new JScrollPane(myTable); 
```

我正在使用 DesignGridLayout btw，当表没有记录时隐藏并在有结果时显示的 RowGroup，以及作为表容器的 JScrollPane。

```
dgl = new DesignGridLayout(panel);
dgl.row().center().group(group).add(scrollPaneContainingTable).fill();
centerPanel.add(panel, BorderLayout.CENTER);
getContentPane().add(centerPanel);
centerPanel.setVisible(true); 
```

然后，每次用户从 JList 中选择一个项目时，我都会查询数据库并获取与所选值相关的记录：

```
public void listSelectionChanged() {
    bloque = alBloque.get(listBloque.getSelectedIndex());
    //bloque is another entity, alBloque is an ArrayList<Bloque> from which the JList (named listBloque) ListModel is constructed.
    try {
        //database query here, omitted
        if (result.getStatus() == SUCCESS) {
            //the query returned a populated ArrayList<Lote>
            alLote = result.getArray();
            ((LoteTableModel) myTable.getModel()).createTableData(alLote);
            myTable.revalidate();
        }
    } catch (Exception e) {}
} 
```

正如我之前所说，它可以正常工作几次，单击列表上的值会在表格中显示它们的相关记录，但是在单击几个之后，它根本停止显示数据。稍等片刻，然后再次单击某个值，将再次显示正确的数据，所以正如我之前所说，我不确定是否更像是一个 GUI 刷新问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:26:42.937

我发现了这个问题，正如我所想，这是一个 GUI 问题，不是刷新，而是滥用 Layout 包:)

正如我所说，我正在使用`DesignGridLayout`，它具有创建一组行的好处，`RowGroup`根据 GUI 的便利性/需要调用并隐藏它或显示它。

我将表放在a中，当数据库中有结果时`RowGroup`调用该方法，表中加载了这些结果，从而显示它；`show()`我`hide()`在没有找到结果时调用了该方法，因此表将为空，因此我将其隐藏。

关键是调用该`hide()`方法是累积的......如果我调用该方法 3 次，我也需要调用 show() 方法 3 次才能显示它，所以，如果我在我`JList`的 with中选择 3 个连续行表的空结果集，我将调用该`hide()`方法 3 次，因此当我选择确实有表结果的行时，我将只调用该`show()`方法一次，因此该表在 3 次尝试之前永远不会按预期显示为表选择带有结果的行。

我已经放置了一个控制字段，它强制应用程序只调用`hide()`一次该方法，因为遗憾的是，该`DesignGridLayout`包不包含`isHide()`测试是否`hide()`已被调用的方法。

非常感谢您的支持。我的神秘问题现在解决了。

# java - 使用 java 组合框只想从 MS Access 记录中删除所选项目而不是整个记录

> ID：15217243
> 
> 赞同：0
> 
> 时间：2013-03-05T06:30:44.150
> 
> 标签：java

我正在使用 java applet GUI 应用程序，并且想要这样做，当我按下删除按钮时，只有在组合框中选择的项目会从 MS Access 中删除，但我下面的代码从 MS Access 中删除了整个记录。

```
code i tried is:

 if(e.getSource()==btn_del)
    {
       try
                {

                    Connection con;

                    DriverManager.registerDriver(new sun.jdbc.odbc.JdbcOdbcDriver());

                    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

                    con = DriverManager.getConnection("jdbc:odbc:dsnproj","","");

                    Statement s=con.createStatement();

                    String q="select * from trans_dest
                                 where                                    
                                 dest='"+cmb_dest.getSelectedItem()+"'";

                    ResultSet r=s.executeQuery(q);

                    while (r.next()) {

                        r1=r.getString(2);

                        System.out.println(r1);

                        r2=r.getString(3);

                        System.out.println(r2);

                        r3=r.getString(4);
                        System.out.println(r3);

                        r4=r.getString(5);
                        System.out.println(r4);

                        String qryd1,qryd2,qryd3,qryd4;

                        qryd1="DELETE route1 from trans_dest where route1='"+r1+"'";
                        qryd2="DELETE route2 from trans_dest where route2='"+r2+"'";
                        qryd3="DELETE route3 from trans_dest where route3='"+r3+"'";
                        qryd4="DELETE route4 from trans_dest where route4='"+r4+"'";

                       if(r1.equals(cmb_route.getSelectedItem()))

                        {

                            System.out.println("in 1st");
                           int executeUpdate= s.executeUpdate(qryd1);
                           System.out.println(executeUpdate);

                        }

                        else if(r2.equals(cmb_route.getSelectedItem()))

                        {

                            System.out.println("in 2nd");

                            int executeUpdate1 = s.executeUpdate(qryd2);
                            System.out.println(executeUpdate1);
                        }

                        else if(r3.equals(cmb_route.getSelectedItem()))

                        {

                            System.out.println("in 3rd");

                            int executeUpdate2 = s.executeUpdate(qryd3);
                            System.out.println(executeUpdate2);
                        }

                        else if(r4.equals(cmb_route.getSelectedItem()))

                        {

                            System.out.println("in 4th");

                            int executeUpdate3 = s.executeUpdate(qryd4);
                            System.out.println(executeUpdate3);
                        }

                 }

              Frame f=new Frame();

               JOptionPane.showMessageDialog(f, "Deleted product Successfully... ");

              System.out.println("deleted...");
       } 
```

}

没有错误，但从我的数据库中删除了整个记录，仅在我选择的字段中插入...

输出是：

```
apple
banana
grapes
null
in 2nd
1
ResultSet is closed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:25:14.547

看看这个例子也许会很有用。

```
import java.awt.BorderLayout;
import javax.swing.*;
import java.awt.event.*;
import java.sql.*;

public class ComboboxTest  extends JFrame implements ActionListener{
    JComboBox  combo ;
    JButton    del;
    public ComboboxTest(){
        combo = new JComboBox(new String[]{"Apple","Orange","Banana"});
        del = new JButton("DELETE");
        del.addActionListener(this);
        this.add(combo, BorderLayout.NORTH);
        this.add(del,BorderLayout.SOUTH);
        this.setSize(300,200);
        this.setVisible(true);
        this.setDefaultCloseOperation(3);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        JButton b = (JButton)e.getSource();
        if(b == del) {
        String query = "update trans_dest set CellName='' where dest = "
            + "'"+combo.getSelectedItem().toString()+"'";
        try{

              Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
              Connection c = DriverManager.getConnection("jdbc:odbc:dsnproj","","");
              Statement s = c.createStatement();
              s.executeUpdate(query);
              System.out.println("Selected Item Removed .");
              s.close();

        }catch(Exception ex){
            System.out.println(ex.getMessage());
        }
        }//end if

    }

    public static void main(String...args){
        new ComboboxTest();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:05:29.243

```
from my database insted of only on field which i selected.. 
```

这意味着您希望只删除选定的行。

根据 DELETE 查询查询，这是不可能的。DELETE 查询将查询满足 where 条件的表中的整个记录​​。

```
qryd2="DELETE route2 from trans_dest where route2='"+r2+"'"; 
```

这将从数据库中删除满足条件的整行。

编辑：

如果要删除列的值，可以使用 将列值设置为空`update query`。

IE`UPDATE trans_dest SET route2= NULL where route2='"+r2+"'"`

# objective-c - 在 iOS6 中访问通讯录

> ID：15217244
> 
> 赞同：0
> 
> 时间：2013-03-05T06:30:46.567
> 
> 标签：objective-c, database, core-data, ios6, abaddressbook

我目前正在访问用户的联系人/通讯录。当我通过 xcode 编译程序并启动 iPhone 模拟器时，它们是数据......因为我进入了 iPhone 模拟器联系人应用程序并自己添加了它们，以查看该应用程序是否真的可以访问联系人数据库。

现在，当我通过我的 iPhone 而不是模拟器部署应用程序时，应用程序显示没有联系人，没有信息。我知道 iOS6 和苹果更改了一些隐私设置会带来一些并发症。

这是我的视图控制器类之一中的函数，我调用该函数

[self getPersonOutOfAddressBook]; 执行该功能。

```
- (void)getPersonOutOfAddressBook
{
    CFErrorRef error = NULL;

    ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, &error);

    if (addressBook != nil)
    {
        NSLog(@"Succesful.");

        NSArray *allContacts = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
        NSLog(@"Number of users: %d ", [allContacts count]);
        NSUInteger i = 0;
        for (i = 0; i < [allContacts count]; i++)
        {
            Person *person = [[Person alloc] init];

            ABRecordRef contactPerson = (__bridge ABRecordRef)allContacts[i];

            NSString *firstName = (__bridge NSString *)ABRecordCopyValue(contactPerson, kABPersonFirstNameProperty);
            NSString *lastName =  (__bridge NSString *)ABRecordCopyValue(contactPerson, kABPersonLastNameProperty);
            NSString *fullName = [NSString stringWithFormat:@"%@ %@", firstName, lastName];

            person.firstName = firstName;
            person.lastName = lastName;
            person.fullName = fullName;

            //email
            ABMultiValueRef emails = ABRecordCopyValue(contactPerson, kABPersonEmailProperty);

            NSUInteger j = 0;
            for (j = 0; j < ABMultiValueGetCount(emails); j++)
            {
                NSString *email = (__bridge_transfer NSString *)ABMultiValueCopyValueAtIndex(emails, j);
                if (j == 0)
                {
                    person.homeEmail = email;
                NSLog(@"person.homeEmail = %@ ", person.homeEmail);

                }

                else if (j==1)
                    person.workEmail = email;
            }

            [self.tableData addObject:person];
        }
    }

    CFRelease(addressBook);
} 
```

我的输出是

```
2013-03-04 22:29:00.094 ourApplication[5562:907] Succesful.
2013-03-04 22:29:00.099 ourApplication[5562:907] Number of users: 0 
```

在我的 IPHONE 上

在我的 Mac 上

```
2013-03-04 22:31:41.799 ourApplication[12591:12b03] Succesful.
2013-03-04 22:31:41.801 ourApplication[12591:12b03] Number of users: 6 
```

等等...

诡异的！！！帮助 ：（

# linux - 允许特定供应商拇指驱动器的 udev 规则是什么？

> ID：15217246
> 
> 赞同：-2
> 
> 时间：2013-03-05T06:30:55.797
> 
> 标签：linux, usb, udev

我需要一个`udev`规则，以便它应该检测 USB pendrive 的供应商，并只允许特定供应商，拒绝所有其他供应商。

1.  这样的规则怎么写？

2.  规则应该放在哪里`/etc/udev/rules.d`或`/lib/udev/rules.d/`

3.  使`udev`规则生效的命令是什么。

紧急请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:55:24.183

我建议查看输出`dmesg`或其中的文件，`/sys`以检测设备的正确供应商和型号。有了这些之后，为设备编写 udev 规则就很简单了。例如，这是我用于 Apple iPod 的规则（写入`/etc/udev/rules.d/60-ipod.rules`）：

```
ATTRS{serial}=="0000000000000000", ATTRS{manufacturer}=="Apple Inc.", ATTRS{product}=="iPod", KERNEL=="sd?1", SYMLINK+="ipod", GROUP="plugdev", MODE="0660" 
```

这将创建一个`/dev/ipod`符号链接到具有已定义序列号的 SCSI 磁盘设备的第一个分区，该设备来自制造商“Apple Inc.”，型号名称为“iPod”。

执行类似`udevadm control --reload-rules`然后`udevadm trigger`（取决于您的平台）应该重新发现并将新规则应用于您的设备。

# windows-8 - 我可以将我的 Windows Phone 和 Windows 8 应用程序从一个帐户转移到另一个帐户吗？

> ID：15217247
> 
> 赞同：5
> 
> 时间：2013-03-05T06:31:02.580
> 
> 标签：windows-8, windows-phone-8, windows-phone

我可以将我的 Windows 8 和 Windows Phone 应用程序从一个开发者帐户转移到另一个帐户吗？

应用程序包括付费和免费版本。我想转移应用程序，稍后我将从旧帐户中删除它。

我的付款选项是否也会根据付费应用的新帐户进行更新？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-01T23:37:37.203

目前，只有 Windows Phone 应用程序可以迁移到其他帐户。您必须向 Microsoft 开具支持票证。它可以通过支持人员的帮助来完成。

1)使用当前拥有您要转移的应用程序的帐户登录[Windows Phone 开发中心](https://dev.windowsphone.com/)或[Windows 应用商店开发中心](http://dev.windows.com)

2) 提交[支持票](http://go.microsoft.com/fwlink/p/?LinkID=293697)

3) 写下您希望将应用程序从一个帐户转移到另一个帐户，并包含所有相关信息

4）这个过程可能需要一周的时间（官方；我的应用程序在几个小时内被移动

5) 就是这样 - 应用程序被移动到另一个帐户：所有统计数据、下载和评论都被保留！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:00:27.677

至少对于 Windows Phone，这似乎暂时不是一个选项 - 您必须从新帐户完全重新发布应用程序 - 请参阅[http://social.msdn.microsoft.com/Forums/en-US /wpregister/thread/97446550-3bdd-4ad5-886d-d27aed1ffca1/](http://social.msdn.microsoft.com/Forums/en-US/wpregister/thread/97446550-3bdd-4ad5-886d-d27aed1ffca1/)和[http://social.msdn.microsoft.com/Forums/en-US/wpregister/thread/5a9db60a-0145-4b42-b9e3-d0a92c5d3608/](http://social.msdn.microsoft.com/Forums/en-US/wpregister/thread/5a9db60a-0145-4b42-b9e3-d0a92c5d3608/)

# ios - 如果 tableView numberOfRowsInSection == 0 则显示警报

> ID：15217250
> 
> 赞同：-1
> 
> 时间：2013-03-05T06:31:23.907
> 
> 标签：ios, objective-c

如果 tableView 中没有结果，我想显示警报。我使用下面的 numberOfRowsInSection，但没有显示警报。我还删除了检查计数的 if 语句，以防万一出现问题。有谁知道为什么不显示警报？任何帮助都会很棒。谢谢！

```
if ([self.listItems count] == 0)

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

if (tableView == self.searchDisplayController.searchResultsTableView) {
    return [self.filteredListItems count];
}

else {
    return [self.listItems count]; 
    if ([self.listItems count] == 0) {

    //CALL ALERT HERE    
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Results" message:@"No 
    results were found" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];

    }    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:33:03.830

它不显示，因为您在显示警报之前返回：

```
else {
    return [self.listItems count]; 
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:33:57.807

看到问题是这条线`return [self.listItems count];` 原因是你的执行没有超出这个范围。将其更改为：

```
else 
{
    if ([self.listItems count] == 0) 
    {
         //CALL ALERT HERE    
         UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Results" message:@"No 
         results were found" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
         [alert show];
         return;
    }
    return [self.listItems count]; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:34:18.650

检查 if 条件后写 return 语句。

```
 if ([self.listItems count] == 0) {

    //CALL ALERT HERE    
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Results" message:@"No 
    results were found" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];

    }  
return [self.listItems count]; 
```

# jquery - 请求中的数组括号编码

> ID：15217251
> 
> 赞同：0
> 
> 时间：2013-03-05T06:31:30.870
> 
> 标签：jquery, ajax

发布数组时，例如：

```
data: {id:[1,2,3]} 
```

jQuery 将数据形成为（取自 firebug）：

```
id%5B%5D=1&id%5B%5D=2&id%5B%5D=3 
```

但是服务器端的解析器无法处理此类数据。

另一方面，如果我发布：

```
data:'id[]=1&id[]=2&id[]=3' 
```

firebug 中的源代码如下所示：

```
id[]=1&id[]=2&id[]=3 
```

并且解析器正确地形成数组。

有没有办法在 POST 请求中禁用括号编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:34:00.387

我假设您正在使用 PHP。

服务器端，在解析数据之前使用[urldecode](http://php.net/manual/fr/function.urldecode.php)

# objective-c - NSComboBox 设置为占位符字符串显示

> ID：15217253
> 
> 赞同：0
> 
> 时间：2013-03-05T06:31:42.690
> 
> 标签：objective-c, macos, nscombobox

当操作失败时，我试图在 NSComboBox 上显示占位符字符串。如何做到这一点？如果我在索引 1 处选择一个项目并且

```
 comboBoxSelectionDidChange:(NSNotification *)notification 
```

叫做。如果条件失败，我想再次显示占位符字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:00:32.410

```
 deselectItemAtIndex:[ *comboBox indexOfSelectedItem] 
```

我在失败的条件下取消选择选定的索引。

# c# - 如何在不更改样式的情况下设置 RichTextBox.SelectionFont FontFamily？

> ID：15217254
> 
> 赞同：0
> 
> 时间：2013-03-05T06:31:43.893
> 
> 标签：c#, vb.net

我想在`RichTextBox.SelectionFont`不更改样式的情况下设置 FontFamily，因为我的字体不支持粗体和常规样式。

```
rtb.SelectionFont = New Font(New FontFamily(nicknamefonttype), nicknamefontsize, 0, GraphicsUnit.Point) 
```

字体不支持粗体和常规字体是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:15:09.250

I am using this in my WPF application to apply a `System.Drawing.FontFamily` to my selected text:

```
rtb.Selection.ApplyPropertyValue(FontFamilyProperty, ((System.Drawing.FontFamily)rbngFonts.SelectedItem).Name); 
```

The rbngFonts is a RibbonGallery, so I suspect you need to adapt it to your application.

# ios6 - 得到错误 Like:malloc: *** 对象 0xa2b6f50 的错误：未分配被释放的指针 *** 在 malloc_error_break 中设置断点以进行调试

> ID：15217258
> 
> 赞同：0
> 
> 时间：2013-03-05T06:31:54.170
> 
> 标签：ios6, malloc, breakpoints

我正在使用启用了 ARC 的 xcode 4.6。我想从服务器向 UItableview 行添加一些图像。我收到如下错误：

malloc：*** 对象 0xa2b6f50 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

这是我的代码：

NSURL *imageURL = [NSURL URLWithString:[templateURL stringByAppendingFormat:@"%@",[[templateArray objectAtIndex:i] objectForKey:@"options_picture"]]];

```
 UIImageView *templateView=[[UIImageView alloc]initWithFrame:CGRectMake(x1, y1, wid, ht)];
        NSLog(@"templeteArray %@",imageURL);

         AsyncronousUIImage *image=[[AsyncronousUIImage alloc]init];
        [image loadImageFromURL:imageURL inImageView:templateView];
        image.delegate=self;
        [templateScroll addSubview:templateView]; 
```

AsyncronousUIImage 类如下：

```
 - (void)loadImageFromURL:(NSURL *)anUrl inImageView:(UIImageView*)imgView{

imageView = imgView;
NSURLRequest *request = [NSURLRequest requestWithURL:anUrl
                                            cachePolicy:NSURLRequestReturnCacheDataElseLoad
                                                                  timeoutInterval:30.0];
connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];}

- (void)connection:(NSURLConnection *)theConnection didReceiveData:(NSData *)incrementalData {

if (data == nil)
 data = [[NSMutableData alloc] initWithCapacity:2048];

[data appendData:incrementalData];

     }

- (void)connectionDidFinishLoading:(NSURLConnection *)theConnection
     {
          [self initWithData:data];
           data = nil;
          connection = nil;
         [self.delegate imageDidLoad:self];
      } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T07:36:33.867

只需在添加此代码的文件中禁用文件 ARC。首先尝试...并为此使用此问题的答案[如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

# jquery - 字段为空时如何操作

> ID：15217264
> 
> 赞同：0
> 
> 时间：2013-03-05T06:32:07.970
> 
> 标签：jquery, validation

再会

我有一个将数据动态填充到 html 表中的表单。

我想检查 tbody 中的 td 标签是否为空。如果没有，我想显示一个新按钮，上面写着：'完成'......或其他

```
 <table class="borderClass">
                <thead>
                <tr>
                    <th class="tdProviderHead">Provider
                    </th>
                    <th class="tdCardNoHead">Card Number
                    </th>
                    <th class="tdCostHead">Cost
                    </th>
                </tr>
                </thead>
                <tbody data-bind="foreach: Data">
                    <tr>
                        <td><span data-bind="text: Provider"></span></td>
                        <td><span data-bind="text: CardNo"></span></td>
                        <td><span data-bind="text: 'R ' + Cost()"></span></td>
                    </tr>
                </tbody>
            </table> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:37:59.743

像这样的东西可能会起作用..

```
jQuery(document).ready(function(){
    var tds = jQuery("table.borderClass > tbody > tr > td");

    var anyEmpty = false;
    tds.each(function(){
        if(jQuery(this).text() == "")
            anyEmpty = true;
    });

    if(anyEmpty == false || tds.length == 0){
        // show button
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:36:09.980

```
$("tbody tr td").length 
```

会给你td的数量。

您可以检查是否存在任何 td 并显示按钮

```
if($("tbody tr td").length == 0){
  // Do something
} 
```

* * *

**编辑：** Activity activity = activityManager.getByCode(activityShortCode);刚刚意识到`td`会出现，但你想检查它们是否为空。我的解决方案在这种情况下不起作用，因为它只检查数量`td`而不是它们的内容。其他人给出了正确的解决方案，你可以试试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T06:41:42.690

尝试使用，

```
$(document).ready(function() {
    $('tbody tr td').each(function(){ // use .each function to iterate between td cells
        if($(this).html()==''){   // check whether any of the td cells are empty
            $(this).html('<input type="button" value="Done"/>'); // place a button to the empty td cell
        }
    });
}); 
```

html代码：

```
<table class="borderClass">
                <thead>
                <tr>
                    <th class="tdProviderHead">Provider
                    </th>
                    <th class="tdCardNoHead">Card Number
                    </th>
                    <th class="tdCostHead">Cost
                    </th>
                </tr>
                </thead>
                <tbody data-bind="foreach: Data">
                    <tr>
                        <td><span data-bind="text: Provider"></span></td>
                        <td><span data-bind="text: CardNo"></span></td>
                        <td><span data-bind="text: 'R ' + Cost()"></span></td>
                        <td></td>
                    </tr>
                </tbody>
            </table> 
```

单击此处查看演示[Jsfiddle](http://jsfiddle.net/swarne27/syTGA/)

否则，如果您想检查其中一个跨度标签是否为空，请在别处显示一个按钮，请使用以下命令

```
$(document).ready(function() {
    var emptySpan = false; // initialize a variable
    $('tbody tr td span').each(function(){
        if($(this).html()==''){
            emptySpan = true; // store the status if you find a empty span tag
        }
    });
    if(emptySpan == true){
    $('#notify').html('<input type="button" value="Done"/>');
    }
}); 
```

让我们在桌子外面或任何你想要的地方有一个 div，

```
<div id="notify"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:40:02.330

你应该试试这个：

```
$('tbody tr').each(function(){
   var txt = $(this).find('td').text();
   (txt == '') ? $(this).find('td').text('Done'): return true
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T06:48:38.370

尝试：

```
$("table tbody tr td").each(function() {
   if(!$(this).text() || !$(this).html()){

   };
}); 
```

或者

```
$.each( $("table tbody tr td"), function() {
   if(!$(this).text() || !$(this).html()){

   };
} 
```

# logic - 使用 Coq 的案例证明

> ID：15217268
> 
> 赞同：3
> 
> 时间：2013-03-05T06:32:17.330
> 
> 标签：logic, coq, theorem-proving

我有一个简单的定理，我想用案例证明来证明。下面给出一个例子。

```
目标 forall ab ：设置，a = b \/ a <> b。
证明
  介绍 a b.
  ...

```

我将如何解决这个问题。而且，我将如何使用相等的两个可能值（真或假）来定义证明？

任何帮助，将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T15:22:27.503

我很确定`Set`s 的相等性在 Coq 中是不可判定的。原因（据我有限的理解）是它不是一个归纳定义的集合（所以，没有案例分析给你......），它也不是一个封闭的集合：每次定义一个新的数据类型时，你创建一个新的居民家庭`Set`。因此，证明您显示的目标的术语需要更新以反映这些新居民。

正如@hardmath 在他的评论中提到的那样，您可以使用`Classical`假设 ( `Axiom classic : forall P:Prop, P \/ ~ P.`) 来证明您的目标。

正如@Robin Green 在此处的评论中提到的那样，您可以证明这种类型的目标是确定相等的类型。为此，您可能希望从该`decide equality`策略中获得帮助。见：[http ://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#@tactic121](http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#@tactic121)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T06:54:49.040

您的问题涉及 Coq 的一个有趣方面：命题（即 的成员`Prop`）和布尔值（即 的成员）之间的区别`bool`。详细解释这种差异有点过于技术性，所以我将尝试专注于您的特定示例。

粗略地说，`Prop`Coq 中的 a 不是像常规布尔值那样计算为`True`or的东西。`False`相反，`Prop`s 具有可以组合来推断事实的*推理规则。*使用这些，我们可以证明一个命题成立，或者证明它是矛盾的。使事情变得微妙的是，还有第三种可能性，即我们既不能证明也不能反驳这个命题。这是因为 Coq 是一个*建设性的逻辑*。最广为人知的结果之一是在 Coq 中无法证明被称为*排中*( ) 的熟悉推理原理：如果您断言，这意味着您可以证明或证明`forall P : Prop, P \/ ~ P``P \/ ~ P``P``~ P`. 在不知道哪一个成立的情况下，您无法断言这一点。

事实证明，对于某些命题，我们可以证明它`P \/ ~ P`成立。例如，不难展示`forall n m : nat, n = m \/ n <> m`。按照上面的说法，这意味着对于每一对自然数，我们都可以证明它们相等或不相等。

另一方面，如果我们更改`nat`为`Set`，就像在您的示例中一样，那么我们将永远无法证明该定理。要了解原因，请考虑`Set` `nat * nat`自然数对。如果我们能够证明你的定理，那么它将遵循`nat = nat * nat \/ nat <> nat * nat`。同样，通过上面的评论，这意味着我们要么能够证明`nat = nat * nat`要么`nat <> nat * nat`。但是，由于两种类型之间存在双射，我们不能说假设是矛盾的`nat = nat * nat`，但是由于类型在语法上不相等，所以假设它们不同也是可以的。从技术上讲，命题的有效性`nat = nat * nat`独立*于*Coq 的逻辑。

如果您确实需要您提到的事实，那么您需要将排中断言为公理 ( `Axiom classical : forall P, P \/ ~ P.`)，这将允许您在`\/`没有任何一方的明确证明的情况下产生证明，并通过案例进行推理。然后你就可以用类似的东西来证明你的示例定理

```
介绍 a b. 破坏（经典（a = b））。
  左边。假设。
  正确的。假设。
```

希望这可以帮助。

# javascript - 在js中不使用Activexobject创建excel表

> ID：15217269
> 
> 赞同：2
> 
> 时间：2013-03-05T06:32:25.723
> 
> 标签：javascript, jquery, excel

我正在尝试解析 xml 并将 xml 的内容放入 excel 表中。我有只能使用 javascript/jquery 的限制，而且应用程序是独立的，为此插件创建。我试过了

```
var excel = new ActiveXObject ( "Excel.Application" );
excel.visible = true;
var book = excel.Workbooks.Add;
book.Worksheets.Add;
book.Worksheets(1).Activate;
book.Worksheets(1).Cells(1,1).value="My First Spreadsheet";
book.Worksheets(1).SaveAs("C:\\excel_file.XLS"); 
```

但这不起作用，因为 Activexobject 仅适用于带有 Windows 的 IE。有没有其他选择来开发它。独立应用程序是在 java 中。

# iphone - 与贝宝集成的 iPhone 中的购物车价值保持不变

> ID：15217270
> 
> 赞同：3
> 
> 时间：2013-03-05T06:32:32.077
> 
> 标签：iphone, paypal

目前我正在开发 iPhone 中的一个商务应用程序。

我将 MECL（用于移动快速结账库的 PayPal 库）集成到我的应用程序中并且它可以工作。

我也得到了`deviceReferenceToken`, `ExpressCheckoutToken`, `TransactionId`& `PayerId`。

我的问题是：如何在我的应用程序中使用这些变量来获得空购物车价值？

我需要网络服务吗？如果是，那么它是什么类型的 Web 服务？

我还使用了 MECL 示例非 Web 项目中的 PayPal 演示项目。

# c - 退格到 C char*

> ID：15217271
> 
> 赞同：0
> 
> 时间：2013-03-05T06:32:39.220
> 
> 标签：c, string, unix, char

我想返回一个以空字符结尾的 char* ，其中包含一个退格字符*而不`malloc`'ing it*。具体来说，我希望字符串是 {backspace-character, space-character, backspace-character, null-character} 而没有别的。

对于“常规”字符串，我知道我可以说

```
char* s = "regular";
return s; 
```

然后`s`可以安全地传递给其他函数，因为它指向 string `regular`，它是在堆栈外部声明的全局变量。但是，我能想到用退格键完成此操作的唯一方法是

```
char* s = {0x08, ' ', 0x08, '\0'};
return s; 
```

但这似乎有问题，因为现在我声明的数组在堆栈上，并且在调用函数中无效。同样，我不想处理`malloc`这个字符串，因为我不想在`free`以后处理它。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:36:09.113

您可以在字符串文字中包含退格，`\b`例如`"\b \b"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:36:04.073

```
char*   s = "\b \b"; 
```

这是你想要的 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:41:53.347

除了根据其他答案使用字符串常量外，您还可以

```
static char s[] = {0x08, ' ', '0x08, '\0'};
return s; 
```

# c++ - 将 std::forward 作为默认参数传递？

> ID：15217272
> 
> 赞同：1
> 
> 时间：2013-03-05T06:32:44.933
> 
> 标签：c++, templates, c++11, function-pointers, forward

考虑以下将函数作为参数的函数。

```
template <class Function = std::plus<int> > 
void apply(Function&& f = Function()); 
```

这`std::plus<int>`是应用的默认函数。`std::plus<int>`是一个函数对象，一切正常。

现在，我想`std::forward<int>`作为默认参数传递。`std::forward<int>`不是函数对象，这是一个函数指针。怎么做 ？

```
template <class Function = /* SOMETHING */ > 
void apply(Function&& f = /* SOMETHING */); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:51:46.270

我认为这会起作用：

```
template <class Function = decltype(&std::forward<int>)> 
void apply(Function&& f = &std::forward<int>); 
```

编辑：实际上，也许不是。你最好只是重载它：

```
void apply() {
  apply(&std::forward);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:02:30.413

函数指针的类型`std::forward<int>`是`int &&(*)(int &)`. 所以你的函数看起来像这样：

```
template<class T = int &&(*)(int &)>
void apply(T &&t = &std::forward<int>); 
```

看看 std::forward 是如何声明的：[http ://en.cppreference.com/w/cpp/utility/forward](http://en.cppreference.com/w/cpp/utility/forward)

# vim - 带有 `:set noesckeys` 的 `ESC` 之后带有 `O` 的新行略有延迟

> ID：15217273
> 
> 赞同：1
> 
> 时间：2013-03-05T06:32:47.057
> 
> 标签：vim

即使在 :set noesckeys 或 :set timeout timeoutlen=1000 ttimeoutlen=100 之后，我仍然有延迟...有什么想法吗？（Cygwin，VIM 源代码编译）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T06:31:26.750

回答我自己的问题...

Mintty 有一个技巧可以解决这个问题：

[http://code.google.com/p/mintty/wiki/Tips#Avoiding_escape_timeout_issues_in_vim](http://code.google.com/p/mintty/wiki/Tips#Avoiding_escape_timeout_issues_in_vim)

基本上将以下内容添加到您的`.vimrc`文件中

```
let &t_ti.="\e[?7727h"
let &t_te.="\e[?7727l"
noremap <Esc>O[ <Esc>
noremap! <Esc>O[ <C-c> 
```

# mpi - 使用 MPISend 和 MPIReceive 时增加主节点上的内存使用

> ID：15217282
> 
> 赞同：0
> 
> 时间：2013-03-05T06:33:27.133
> 
> 标签：mpi

我正在使用 MPI 编写一个程序，其中主节点将任务分配给从节点。每个从节点在本地执行任务并将结果（大小为 100000 的 int 数组）发送到主节点。

虽然我得到了正确的结果，但内存使用并不是线性的。我发现主节点占用 N*m 内存，其中 N 是节点数，m 是从节点通常使用的内存。

任何人都知道为什么会发生这种情况，是否有任何解决方案可以减少主节点上的内存使用。

这是从节点向主节点发送一些数据/结果的示例代码，我想知道为什么主节点使用的内存是 N*m。我使用 Linux 命令 top 检查了内存使用情况。

```
#include<iostream>  
#include <mpi.h>
using namespace std;
int main(int argv, char *argp[256])
{
    int rank,size,master_rank=0,i=0;
    int jc=0,jpt,jobsperthread=0,exjpt=0;;
    int ii=0,index=0,remaining=0,tobesent=0,tobereceived=0;
    int totsendreceivesize=100000,k=0;
    int innodes=11;
    MPI_Status status;
    int *arr_anti_net=(int*)malloc(sizeof(int)*(totsendreceivesize+100));
    MPI_Init (&argv, &argp);
    MPI_Comm_rank (MPI_COMM_WORLD, &rank);
    MPI_Comm_size (MPI_COMM_WORLD, &size);
    for(i=0;i<totsendreceivesize;i++)
       arr_anti_net[i]=i
    if(rank!=master_rank)
    {
       remaining=totsendreceivesize;
       tobesent=256;
       k=0;
       while(remaining!=0)
       {
        if(remaining<256)
            tobesent=remaining;
        MPI_Send(&arr_anti_net[k],tobesent,MPI_INT,0,11,MPI_COMM_WORLD);
        k+=tobesent;
        remaining-=tobesent;
       }
    }
    else
    {
       ii=0;
       index=0;
       for(ii=1;ii<size;ii++)
       {
           jc=0;
           jpt=0;
           jobsperthread=innodes/size;
           jpt=innodes/size;
           exjpt=0;
           if(innodes%size!=0)
           {
            if(ii<innodes%size)
            {
                jobsperthread+=1;
                exjpt=ii;
            }
            else
                exjpt=innodes%size;
           }
           remaining=256;//totsendreceivesize;
           tobereceived=256;
           k=0;
           while(remaining!=0)
           {
            if(remaining<256)
                tobereceived=remaining;
            MPI_Recv(& arr_anti_net[k],tobereceived,MPI_INT,ii,11,MPI_COMM_WORLD,&status);
            k+=tobereceived;
            remaining-=tobereceived;
           }
       }
      }
   MPI_Barrier(MPI_COMM_WORLD);

   MPI_Finalize();
} 
```

非常感谢

# ajax - Drupal 7 AJAX 和“检测到验证码会话重用攻击”。在验证码 7.x-1.x-dev

> ID：15217283
> 
> 赞同：2
> 
> 时间：2013-03-05T06:33:29.583
> 
> 标签：ajax, drupal, captcha

我遇到了`captcha-7.x-1.x-dev`版本问题，如果我在表单中使用了任何 AJAX 处理的字段，在我提交后我会收到错误`CAPTCHA session reuse attack detected.`。如果没有 AJAX 处理的字段意味着它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T15:56:56.270

这是一个已知问题，我正在寻找补丁并找到它。这可能很有用 [https://www.drupal.org/node/1395184](https://www.drupal.org/node/1395184)

[https://drupal.stackexchange.com/questions/27936/captcha-session-reuse-attack-detected-error-message-when-form-is-submitted](https://drupal.stackexchange.com/questions/27936/captcha-session-reuse-attack-detected-error-message-when-form-is-submitted)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T19:10:48.387

在当前 7.x-1.0-beta2 版本的验证码模块中，这仍然是一个问题。但是，[jay.daysand](https://drupal.org/user/799552)[对一个问题发表了评论，](https://drupal.org/node/918856#comment-7302582)称他创建了一个模块来解决这个问题，您可以下载和使用：

> 查看实验性修复模块 [http://drupal.org/sandbox/dansandj/1970786](http://drupal.org/sandbox/dansandj/1970786)，如果它解决了您的问题，请告诉我。我可以轻松添加对更多端点的支持，而不仅仅是“文件/ajax”，请告诉我。

我下载了这个模块，它工作得很好，但必须修改`captcha_ajax_fix_captcha_element_value()`检查 FAPI ajax 调用的方法：

```
 // If this is form is an AJAX submission to "file/ajax", don't process the
  // CAPTCHA element.
  if (arg(0) == 'file' && arg(1) == 'ajax' || arg(0) == 'system' && arg(1) == 'ajax') {
    $element['#processed'] = TRUE;
  } 
```

# grails - 在来自测试程序的 3000 个 http 调用后，我的 grails 应用程序在 cloudfoundry 上失败

> ID：15217287
> 
> 赞同：1
> 
> 时间：2013-03-05T06:33:51.767
> 
> 标签：grails, cloud-foundry

我已经通过在我的台式电脑上运行的 grails 应用程序运行了 80,000 个 http 调用，并且没有失败。在 cloudfoundry 上，相同的应用程序在大约 3000 次 http 调用后内存不足。该应用程序使用 MySql、Mongodb 和 RabbitMQ。在 Cloudfoundry 上，我使用 VMC 命令将内存增加到 1G。在测试程序运行时，我可以使用 VMC stats 命令查看内存使用情况，内存使用情况增加到 1G 并且应用程序失败。我在本地机器上使用 Grails 2.0.1。

什么可能导致这个问题？

可能与此有关：[http](http://burtbeckwith.com/blog/?p=73) ://burtbeckwith.com/blog/?p=73 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:38:13.303

[您可能会从这篇文章](http://naleid.com/blog/2009/10/01/batch-import-performance-with-grails-and-mysql/)中得到一些用处，因为您的测试应用程序可能很像批处理应用程序。

您应该在本地运行时使用 jconsole 来监控您的应用程序，并将分配给 java 的本地内存设置为与 cloudfoundry 相同的值，以查看是否可以重现错误。如果 jconsole 显示您永远不会释放内存，那么您可能有泄漏并且不允许垃圾收集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:11:31.647

对于 Java Web 应用程序，您还需要设置 Xmx：

```
vmc set-env APP JAVA_OPTS="-Xmx1024M" 
```

# asp.net-mvc - Kendo Tabstrip 在 tabselect 上附加 URL（MVC Razor View）

> ID：15217294
> 
> 赞同：1
> 
> 时间：2013-03-05T06:34:12.567
> 
> 标签：asp.net-mvc, razor, tabs, kendo-ui

我有一个这样的剑道标签：

```
@(Html.Kendo().TabStrip()
    .Name("EmployeeTabStrip")
    .Items(tabstrip =>
    {
        tabstrip.Add()
            .Text(Resources.Resources.ItemList)
            .Content(@<text>
                <div id="ListContainer" style=" height: 100%">
                    @Html.Partial("PartialEmployeeList")
                </div>
            </text>);
        tabstrip.Add()
           .Text(Resources.Resources.Edit)
           .Content(@<text>
                <div id="Container" style=" height: 100%">
                    @Html.Partial("PartialEmployeeForm")
                </div>
            </text>);
    })
    .SelectedIndex(0)
) 
```

但是当我选择一个选项卡时，它会在 URL 的末尾附加 tabstrip ID ("# *EmployeeTabStrip-1 ")，如下所示：*

```
http://localhost:36527/Setup/Employee?employeeId=33#EmployeeTabStrip-1 
```

有谁知道为什么会这样？如果它的剑道是内置的，我该如何覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:53:00.597

如果 Kendo 呈现的锚标记（选项卡呈现为锚标记）具有`href`具有该值的属性，则会发生这种情况，即

```
<a class="k-link" href="#EmployeeTabStrip-1">Tab 1</a> 
```

如果您查看生成的 HTML 源代码，我想您会看到类似的内容。据我所知，这不是 Kendo 所做的事情，我没有在我的 TabStrips 上看到它，也没有出现在[此处](http://demos.kendoui.com/web/tabstrip/index.html)的在线网络演示中，该演示演示了与您的示例类似的控件初始化。

这可能是版本问题（尝试更新到最新的 Kendo 版本）或者可能有其他一些因素在起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:25:07.723

更新到最新的内部版本或 Kendo UI Extensions 的 beta 版本。这应该已经修复了。

# android - 如何设置默认打开的 SlidingDrawer

> ID：15217295
> 
> 赞同：0
> 
> 时间：2013-03-05T06:34:14.830
> 
> 标签：android

我在底部的 Activity 中有一个 SlidingDrawer。打开此 SlidingDrawer 的功能是在单击按钮时实现的。我只想打开这个 SlidingDrawer 作为这个的默认状态。即当我的屏幕恢复时，SlidingDrawer 的默认状态是打开的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:40:02.470

只需`open()`调用`oncreate()`.

在此处查看两个答案： [Android Sliding Drawer Open On Create](https://stackoverflow.com/questions/9244387/android-sliding-drawer-open-on-create)

# android - 接收器的屏幕锁定

> ID：15217302
> 
> 赞同：1
> 
> 时间：2013-03-05T06:34:56.480
> 
> 标签：android

我正在尝试锁定和解锁屏幕，

我正在做的事情如下A`Broadcast receiver`检查屏幕是否打开或关闭，如果屏幕打开它将锁定屏幕，如果关闭它将解锁屏幕。

我在中使用的代码`Broadcast receiver`是

```
public void onReceive(Context context, Intent intent) {

        System.out.println("Entered Broadcaste Reciever........");
       context1 = context;
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            // DO WHATEVER YOU NEED TO DO HERE
             mShaker = new ShakeListener(context);
                mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
                  public void onShake()
                  {
                     PowerManager TempPowerManager = (PowerManager) context1.getSystemService(Context.POWER_SERVICE);
                    PowerManager.WakeLock TempWakeLock = TempPowerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP |PowerManager.ON_AFTER_RELEASE, "TempWakeLock");
                    TempWakeLock.acquire();
                    final Vibrator vibe = (Vibrator)context1.getSystemService(Context.VIBRATOR_SERVICE);
                    vibe.vibrate(100);
            System.out.println("LISTENING SHAKE");
                  }
                });

        }
        else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            // AND DO WHATEVER YOU NEED TO DO HERE

             mShaker = new ShakeListener(context);
                mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
                  public void onShake()
                  {

                        mDPM = (DevicePolicyManager)context1.getSystemService(Context.DEVICE_POLICY_SERVICE);

                    ComponentName mAdminName = new ComponentName(context1,LockActivity.class);
                    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON); 
                    filter.addAction(Intent.ACTION_SCREEN_OFF);
                    BroadcastReceiver mReceiver = new ScreenReceiver();
                    context1.registerReceiver(mReceiver, filter);
                    System.out.println("The Device  device admin enabled");
                    Intent  intent = new             Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
  intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mAdminName);
                                           intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,"onEnabled");
                                   mDPM.lockNow();
                                   mDPM.setMaximumTimeToLock(mAdminName,0);
                                   intent.putExtra("force-locked", DeviceAdminInfo.USES_POLICY_FORCE_LOCK);
   //                                           startActivityForResult(intent, 1); 
                  }
                });
        } 
```

问题是它启动正常，最多 5 次摇动它正常工作，之后它进入无限状态，设备卡住..有人帮我找到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:53:35.090

现在，需要记住的是，系统屏幕关闭之前的事件顺序是：

> ExampleActivity.onPause() –> ScreenReceiver.onReceive()

这有点不直观，因为您认为接收器会首先被击中 - 所以当您设置布尔值等时，请注意这个小事实，同样当屏幕打开时，事件的顺序是：

> ExampleActivity.onResume() –> ScreenReceiver.onReceive()

```
 @Override
    protected void onPause() {
        // when the screen is about to turn off
        if (ScreenReceiver.wasScreenOn) {
            // this is the case when onPause() is called by the system due to a screen state change
            System.out.println("SCREEN TURNED OFF");
        } else {
            // this is when onPause() is called when the screen state has not changed
        }
        super.onPause();
    }

    @Override
    protected void onResume() {
        // only when screen turns on
        if (!ScreenReceiver.wasScreenOn) {
            // this is when onResume() is called due to a screen state change
            System.out.println("SCREEN TURNED ON");
        } else {
            // this is when onResume() is called when the screen state has not changed
        }
        super.onResume();
    } 
```

[从这里参考](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)

# jquery - nth-child 只选择第一个元素

> ID：15217303
> 
> 赞同：1
> 
> 时间：2013-03-05T06:35:00.050
> 
> 标签：jquery, css, selector

我有以下代码，我想选择一个特定的`class=title`使用`nth-child`，但它似乎确实有效

```
<div class="block">
   <div class="title"></div> <!-- first title here !-->
   <div class="item"></div>
   <div class="item"></div>
   <div class="item"></div>
   <div class="title"></div> <!-- second title here !-->
   <div class="item"></div>
   <div class="title"></div> <!-- third title here !-->
   <div class="item"></div> 
   <div class="item"></div>
   <div class="item"></div>
</div> 
```

**测试 1**

```
.title:nth-child(3){
   background-color: red;
 } 
```

预期结果`Third title highlighted`，但实际输出是`no highlight is done`

**测试 2**

```
.title:nth-child(1){
   background-color: red;
 } 
```

预期结果`First title highlighted`实际输出为`first title is highlighted`

不知道为什么它不适用于另一个孩子，而它只适用于第一个孩子..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:42:57.083

如果您真的想选择具有类名的**第三个孩子**，那么您必须知道[孩子的索引位置](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)。在这种情况下，它是**七**而不是*三*。因此，您需要执行以下操作：`div.block``.title`

 ***```
 .title:nth-child(7){
     background-color: red;
 } 
```

**[工作小提琴](http://jsbin.com/iyehal/3/edit)**

* * *

简而言之，`title`在 中的位置没有具有班级`3`的孩子`div.block`。

**更新**：

在不知道它是否存在于指定位置或不使用 CSS 的情况下选择子元素是不可能的。但可以使用`jQuery`.

```
$('.title:eq(2)')  //This will search for the third child with the class .title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:43:23.023

计算所有子元素，无论它们是什么，并且仅当`:nth-child(n),`指定的元素与附加到伪类的选择器匹配时才被选中。

仅计算附加到`:eq(n)`伪类的选择器，不限于任何其他元素的子元素，并且选择`(n+1)`第一个（n 是从 0 开始的）。

所以`$('.block .title:eq(2)').css('background-color','Red');`有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T06:43:26.313

选择器`.title:nth-child(3)`并不意味着“具有该`title`属性的元素中的第三个”。相反，它匹配具有该`title`属性并且是其父元素的第三个子元素的元素。

CSS 中没有“同类中的第 n 个”选择器。您可以考虑使用 JavaScript 解决方法。但是使用类名 like`title`表明元素应该真正标记为某种级别的标题，例如，`h2`而不是`div`. 这样做，您可以删除 class 属性并使用选择器，例如`h2:nth-of-type(3)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T06:46:38.497

只有当您具有这样的结构时，您的**测试 1才会起作用：**

```
<div class="title"></div>
<div class="title"></div>
<div class="title"></div>

.title:nth-child(3){
  background-color: red;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T07:01:11.517

用这个`$('.title').siblings(':eq(3)').css('background-color', 'red');`

演示：http: [//jsfiddle.net/8JC7F/](http://jsfiddle.net/8JC7F/)

甚至更好

```
$('.title').siblings('.title:eq(0)').css('background-color', 'red'); 
```

另外，如果您想知道为什么您的选择器不起作用，我引用 w3school

> :nth-child(n) 选择器匹配其父元素的第 n 个子元素，无论其类型如何。
> 
> n 可以是数字、关键字或公式。

所以在你的情况下

```
.title:nth-child(5){
    background-color: red;
} 
```

这将完美地工作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T07:03:32.393

使用 class="title" 突出显示第一个 div：

```
 $('div.title:eq(0)').css('background-color','red'); 
```

使用 class="title" 突出显示第二个 div：

```
 $('div.title:eq(1)').css('background-color','red'); 
```

使用 class="title" 突出显示第三个 div：

```
 $('div.title:eq(2)').css('background-color','red'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T06:36:32.560

您可以使用`.eq()`jQuery 方法。

```
$('.block div.title:eq(0)').css('background-color','red'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-05T06:39:50.780

您可以`:eq(index)`为此使用选择器

```
$('.block .title:eq(2)').css('background-color','Red'); 
```

**[演示](http://jsfiddle.net/VUgn2/)**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-05T06:40:56.780

`.title:nth-child(3)`意味着*`element with class 'title' which is the third child of it's parent`*。不是*`which is the third element with that class`*。

实际上，您不能*`the third element with that class`*使用纯 CSS 进行选择。

您可以使用`jQuery`带有以下选择器的脚本：

```
$('.title:eq(2)') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-29T11:10:45.647

这真有趣。似乎那里有一个序列n + 1。从 1 开始，它将选择所有后续类。干得好。

```
.block .title:nth-child(n+1){
  background-color:red;
}
```

```
<div class="block">
   <div class="title">1</div> <!-- first title here !-->
   <div class="item">2</div>
   <div class="item">3</div>
   <div class="item">4</div>
   <div class="title">5</div> <!-- second title here !-->
   <div class="item">6</div>
   <div class="title">7</div> <!-- third title here !-->
   <div class="item">8</div> 
   <div class="item">9</div>
</div>
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-03-05T06:42:00.070

采用

```
.title:first-of-type{
    color:#478547;

} 
```

和

```
:nth-of-type() 
```

选择标题类***

# http - 如何找到正确的 url 来发送 curl POST 请求？

> ID：15217306
> 
> 赞同：1
> 
> 时间：2013-03-05T06:35:09.557
> 
> 标签：http, post, curl, request

我正在尝试使用 curl 发送带有 json 的 POST 请求。

我使用 Live HTTP Headers 并获取将请求发送到的 url。但是它又回来了“请求被拒绝。您没有访问此页面的权限？”

如何找到正确的网址？

从 Live Http 标头中，我可以看到 json 数据 {"var1":"val1","var2":"val2",...}

所以我使用以下 curl 命令：

curl -H "接受：应用程序/json" -H "内容类型：应用程序/json" -o output.html -L " [http://domain.com/theurl](http://domain.com/theurl) " -d '{"var1":"val1" "var2":"val2",...}'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:05:44.207

您使用实时 HTTP 标头观察到的请求的其他部分可能允许您的浏览器访问该 URL，例如指示您的会话信息或用户凭据的 cookie 值。如果 Live HTTP 标头能够查看这些标头和/或 cookie，您可以获取它们并使用附加参数将它们包含在您的`curl`请求中。`-H 'Header: value'`

也可以使用[HTTP 身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)`curl`，在这种情况下，您应该将您的用户名和密码传递给with `--user name:password`。

# php - 通过 preg_match_all 返回的数组执行 mysql 查询

> ID：15217309
> 
> 赞同：1
> 
> 时间：2013-03-05T06:35:13.223
> 
> 标签：php, mysql, preg-match-all

我正在尝试使用循环从字符串中提取主题标签，`preg_match_all`并使用数组值执行 MySQL 插入。`foreach`但显然它还没有工作，这就是我在这里的原因。

我的代码是这样的：

```
<?php

$text = "this has a #hashtag a  #badhash-tag and a #goodhash_tag";
preg_match_all('/#[^\s]*/i', $text, $matches);

foreach($matches as $value){
    echo $value.'<br>'; // right now, im just trying to see if i can get individual array values and then will have to perform sql query here
}

?> 
```

我知道这有点天真，但我无法弄清楚。请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:38:15.507

使用这个for循环，`$matches`是多维数组

```
 foreach($matches[0] as $value){
      echo $value.'<br>'; // right now, im just trying to see if i can get individual array values and then will have to perform sql query here
 } 
```

工作示例[http://codepad.viper-7.com/iEGvgh](http://codepad.viper-7.com/iEGvgh)

输出：

```
#hashtag
#badhash-tag
#goodhash_tag 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:39:32.460

试试这个：

```
$text = "this has a #hashtag a  #badhash-tag and a #goodhash_tag";
preg_match_all('/#(?P<hash>\w+)/', $text, $matches);

 foreach($matches['hash'] as $val){
    echo $val;
    echo "<br>";
 } 
```

# vim - 如何在vimwiki中转义特殊字符，vim的一个插件

> ID：15217311
> 
> 赞同：3
> 
> 时间：2013-03-05T06:35:23.870
> 
> 标签：vim, escaping

比如我想写如下内容：

> $VAR 可以通过“$VAR”访问

但是当我在 vimwiki 中编写并将其转换为 html 时，它看起来像：

```
\(VAR can be reached by "\)VAR" 
```

因为 $ 是一个特殊的字符！

如何在不使用 {{{ 和 }}} 的情况下转义 w​​imwiki 中的特殊字符。

* * *

我已经读过：

[第62期：如何逃避特殊字符？](https://code.google.com/p/vimwiki/issues/detail?id=62&q=escape)

[代码环境和转义机制](https://code.google.com/p/vimwiki/wiki/NewEscapes)

但它没有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T12:53:41.110

在 autoload\vimwiki 中找到文件“html.vim”

更改（第 323 行）：

```
 return '\('.s:mid(a:value, 1).'\)' 
```

至：

```
 return '$'.s:mid(a:value, 1).'$' 
```

这将破坏内联数学函数，希望对您有所帮助！

# java - 在 Java 中创建和迭代字符串列表

> ID：15217318
> 
> 赞同：0
> 
> 时间：2013-03-05T06:35:57.680
> 
> 标签：java, android, list, arraylist

我正在尝试创建大小动态的数组列表，添加元素并在完成时遍历它们。目前我的代码是：

```
 String activities = "SELECT DISTINCT phoneactivity from ContextTable030313";
    ArrayList<String> myActivities = new ArrayList();

    Cursor cursor2 = db.rawQuery(activities, null);
    // looping through all rows and adding to list
    if (cursor2.moveToFirst()) {
        do {
            myActivities.add(cursor.getString(cursor2.getColumnIndex("ts")));

        } while (cursor2.moveToNext());
    } 
```

然而它无法在 do 循环中运行。我相信我声明不正确，我收到以下警告：

```
- ArrayList is a raw type. References to generic type ArrayList<E> should be parameterized
    - Avoid object allocations during draw/layout operations (preallocate and reuse instead)
    - Type safety: The expression of type ArrayList needs unchecked conversion to conform to 
     ArrayList<String> 
```

但我不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:39:05.287

问题似乎是这样的：

> 类型安全：ArrayList 类型的表达式需要未经检查的转换才能符合 ArrayList

这指出了这行代码：

```
ArrayList<String> myActivities = new ArrayList(); 
```

您应该将该行更改为：

```
ArrayList<String> myActivities = new ArrayList<String>(); 
```

另一方面，您可以替换此代码段：

```
 if (cursor2.moveToFirst()) {
        do {
            myActivities.add(cursor.getString(cursor2.getColumnIndex("ts")));

        } while (cursor2.moveToNext());
    } 
```

有了这个：

```
 while (cursor2.moveToFirst()) {       
        myActivities.add(cursor.getString(cursor2.getColumnIndex("ts")));       
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:38:27.427

更改您的 arrayList 声明，使其在构造函​​数调用期间接受**参数化类型**。

```
ArrayList<String> myActivities = new ArrayList<String>(); 
```

如果您使用 java 7 或更高版本：

```
ArrayList<String> myActivities = new ArrayList<>(); 
```

由于**类型推断**，您不需要在构造函数调用期间声明参数化类型，但您仍然需要声明空<>。

# javascript - 这在 javascript、多维数组访问或对象访问中是有效的

> ID：15217319
> 
> 赞同：1
> 
> 时间：2013-03-05T06:35:59.783
> 
> 标签：javascript

我需要存储股市数据以供操纵。哪个更有效率，

1) 将数据存储为开、高、低、关、日期的多维数组

```
//Data array stored in a array
var tickdata = new Array();
tickdata.push([open,high,low,close,volume,date]) 
```

2）将数据存储为object对象，如下图

```
function dailyData(open, high, low, close,volume,date)
{
   this.open = open;
   this.high = high;
   this.low = low;
   this.close = close;
   this.volume=volume;
   this.date=date;
}
var data = new Array();
data[0] = new dailyData(1017.50,1032.50 ,997.50, 1025.40,4187510,'07-Jan-2005'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:47:44.470

在我看来，第二个更容易维护，因为您可以编辑设置值来改变行为。

第一个选项更难阅读，请考虑以下几点：

```
function sortData(data,index){
  data.sort(function(a,b){
   if(a[index]>b[index]){return 1;}
   if(a[index]<b[index]){return -1;}
   return 0;
  });
}
sortData(data,0);// sorts on open 
```

第二个选项可能更容易阅读：

```
function sortData(data,index){
  data.sort(function(a,b){
   if(a[index]>b[index]){return 1;}
   if(a[index]<b[index]){return -1;}
   return 0;
  });
}
sortData(data,"open");// sorts on open 
```

特别是如果您想对多列进行排序。获取值显然更容易阅读：data[0][0] or data[0]["open"] or data[0].open

格式化输出冷很容易完成：

```
function dailyData(open, high, low, close,volume,date){
   //checking if data is valid comes here, maybe setting the
   // right type for the values (like date as date instead of string)
   this.open = open;
   this.high = high;
   this.low = low;
   this.close = close;
   this.volume=volume;
   this.date=date;
   this._dateYear={
      rerurn this.date.getFullYear();
   }
   this.dateYear=this._dateYear();
} 
```

（不）回答您的问题：我不确定使用选项 2 是否会导致性能损失，但我使用了大型对象数组，即使在较旧的浏览器上也没有问题。

# asp.net-mvc - 如何选择jquery数据表中的所有行

> ID：15217325
> 
> 赞同：0
> 
> 时间：2013-03-05T06:36:21.397
> 
> 标签：asp.net-mvc, jquery, datatables

我的页面中有两个按钮“全选”和“取消全选”。当我单击全选按钮并将 id 列表保存在我的变量中时，我需要选择所有行。单击取消选择 ll 按钮时，应取消选择所有行。我们将如何做到这一点？

```
 [HttpPost]
            public ActionResult Action Name(pssing value)
            {
                DataTable dataTable = new DataTable();

            // my code
                var MyModel = new List<List<string>>();

                foreach (var joblist in Jobs)
                {
                    var sublist = new List<string>();
                    sublist.Add(checked.false);
                    sublist.Add(values));
                    sublist.Add(values));
                    ....etc 

                    baseModel.Add(sublist);
                }

                return new DataTableResult(return);
            } 
```

网页：

```
<table  cellpadding="0" cellspacing="0" border="0" class="display" id="AssignJobsTable" width="100%">
    <thead>
        <tr>
            <th><input type="checkbox" id="selectall"/></th>
            <th>ID</th>
          etc ......
        </tr>
    </thead> 
```

脚本：

```
$(function(){

    // add multiple select / deselect functionality
    $("#selectall").click(function () {
          $('.case').attr('checked', this.checked);
    });

    // if all checkbox are selected, check the selectall checkbox
    // and viceversa
    $(".case").click(function(){

        if($(".case").length == $(".case:checked").length) {
            $("#selectall").attr("checked", "checked");
        } else {
            $("#selectall").removeAttr("checked");
        }

    });
}); 
```

当我单击全选复选框时，它无法绑定控制器的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:41:41.057

尝试这个

```
 $('table#tableId> tbody > tr').addClass('highlight');

 $('table#tableId> tbody > tr').removeClass('highlight')addClass('noHeilight'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:42:49.637

> 样品表

```
<table border="1">
<tr>
    <th><input type="checkbox" id="selectall"/></th>
    <th>Cell phone</th>
    <th>Rating</th>
</tr>
<tr>
    <td align="center"><input type="checkbox" class="case" name="case" value="1"/></td>
    <td>BlackBerry Bold 9650</td>
    <td>2/5</td>
</tr>
<tr>
    <td align="center"><input type="checkbox" class="case" name="case" value="2"/></td>
    <td>Samsung Galaxy</td>
    <td>3.5/5</td>
</tr>

</table> 
```

示例脚本：

```
$(function(){

    // add multiple select / deselect functionality
    $("#selectall").click(function () {
          $('.case').attr('checked', this.checked);
    });

    // if all checkbox are selected, check the selectall checkbox
    // and viceversa
    $(".case").click(function(){

        if($(".case").length == $(".case:checked").length) {
            $("#selectall").attr("checked", "checked");
        } else {
            $("#selectall").removeAttr("checked");
        }

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:26:14.593

您应该为复选框设置 id attr 并将行 id 放入 id attr 并使用以下代码进行选择和取消选择：

$(文档).ready(函数(){

```
$("#selectall").click(function () {

      var isSelect;
      if($(this).is(":checked")) {
        isSelect=true;
      }else{
        isSelect=false;   
      }

      $("table tr td input[type=checkbox]").each(function(){

          if(isSelect) {
            $(this).prop('checked', true);

            SelectedItems+=$(this).val()+":";
          }else{
            $(this).prop('checked', false);
            SelectedItems="";
          } 
          $("#Result").html(SelectedItems);

      });          
}); 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T16:55:08.770

这是我跟踪数据表中所有选定行的方法。

[http://www.datatables.net/release-datatables/examples/plug-ins/plugin_api.html](http://www.datatables.net/release-datatables/examples/plug-ins/plugin_api.html)

这个想法是检查用户所在的当前页面并选择/取消选择当前正在查看的行。您将遍历页面的行并将选定的行存储到一个数组中以供将来参考。

使用这种方法，您将限制选择/取消选择表中所有行所需的时间。

仅根据用户看到的视图显示需要的内容。

不要挂断，因为表格太忙于检查/取消检查每一行。

```
//stored checked box list
var result = [];
var selectAll = false;

var table5 = $('#example5').dataTable({
   'fnDrawCallback':function(oSettings){

     var anNodes = this.oApi._fnGetTrNodes( oSettings );
 var anDisplay = $('tbody tr', oSettings.nTable);

     //write your logic for pagination 
     //example 
     /*
     $('tbody tr td:first-child input[type=checkbox]').on('click', function(){
       if($(this).is(':checked')){
         if($.inArray(....) != -1){push result}
       }else{
         if($.inArray(....) != -1){splice result}
       }
     }
     if(selectAll){
        for(var i = 0; i < anDisplay.length; i++){
          //check if it's in result array 
          //add to the array
        }
     }else{
        for(var i = 0; i < anDisplay.length; i++){
          //check if it's in result array 
          //delete from the array
        }
     }
     */
   }
}) 
```

这将是您跟踪选中行的逻辑。

# ruby-on-rails - Rails - 修改/复制默认的“show”

> ID：15217326
> 
> 赞同：0
> 
> 时间：2013-03-05T06:36:23.123
> 
> 标签：ruby-on-rails, routes

无论如何我可以修改默认“show”的行为吗？

当前，当用户单击主站点的按钮时

```
<%= link_to "ADD TO CART", product, {:class => "btn btn-primary", :target => '_blank', :method => "get"} %> 
```

用户将被自动重定向到包含适当信息的页面。

现在我正在尝试创建一个稍微不同的页面（移动友好），并且我创建了一个 mobile_show 页面，如果我直接访问它就可以工作。

我的问题是我应该如何修改 link_to 以使其指向`/mobile/products/id`而不是 current `products/id`？

更新（额外信息）：

在 products_controller.rb`

```
 # GET /mobile
  # GET /mobile.json
  def mobile
    @products = Product.current

    respond_to do |format|
      format.html # mobile.html.erb
      #format.json { render json: @products }
    end
  end`

  # GET /mobile/products/1
  # GET /mobile/products/1.json
  def mobile_show
    @product = Product.find(params[:id])
    @product.update_attribute(:is_active, false)

    respond_to do |format|
      format.html # mobile_show.html.erb
      #format.json { render json: @product }
    end
  end 
```

在路线.rb

```
 match '/mobile' => 'products#mobile'
  match '/cashback' => 'products#cashback'
  match '/mobile/products/:id' => 'products#mobile_show' 
```

p/s：总的来说，我对 Rails 和 Web 开发很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:57:28.610

根据您现有的路线，您可以将路线更改为

```
match '/mobile/products/:id' => 'products#mobile_show', as: :mobile_product 
```

那么在你看来

```
<%= link_to "ADD TO CART", mobile_product_path(product), {:class => "btn btn-primary", :target => '_blank', :method => "get"} %> 
```

更新：这是一个好习惯吗？

这实际上取决于您想要实现的目标。如果您想为您的应用程序创建移动版本，我建议您查看响应式 ui。如果这是不可能的，处理这个问题的正确方法是创建一组不同的控制器来处理移动请求。这些控制器应放置在不同的命名空间下。

```
namespace :mobile do
  resources :products
end 
```

这将期望您在`app/controllers/mobile/products_controller.rb`这里有一个并处理移动请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:00:56.857

您实际上应该为移动设备创建一个命名空间或控制器，这样它就不会破坏 REST，例如

app/controllers/mobile/products_controller.rb

或者

应用程序/控制器/mobile_products_controller.rb

但是要使用您的方法，您可能需要为您的路线添加一个名称，以便您可以使用它

```
match '/mobile' => 'products#mobile', :as => "mobile" 
```

然后改变你的

```
<%= link_to "ADD TO CART", mobile_path, {:class => "btn btn-primary", :target => '_blank', :method => "get"} %> 
```

# sql-server-2008 - 按日期排序无法正常工作

> ID：15217329
> 
> 赞同：2
> 
> 时间：2013-03-05T06:36:39.290
> 
> 标签：sql-server-2008, sql-order-by

我在用

> Microsoft SQL Server 2008 (RTM) - 10.0.1600.22 (X64) Jul 9 2008 14:17:44 版权所有 (c) 1988-2008 Microsoft Corporation Enterprise Edition (64-bit) o​​n Windows NT 6.1 (Build 7601: Service Pack 1)

当我尝试按日期排序时，它没有给出正确的顺序

```
DECLARE @dd table (ID int,rate numeric(5,2), orderdate smalldatetime)
INSERT INTO @dd
SELECT 1,10,'2013-03-05 10:11:00'
UNION ALL 
SELECT 2,25,'2013-03-05 10:11:00' 
UNION ALL
SELECT 3,30,'2013-03-05 10:10:00'
UNION ALL
SELECT 4,50,'2013-03-05 10:11:00'
UNION ALL
SELECT 5,60,'2013-03-05 10:15:00'

SELECT top 2 * FROM @dd Order by orderdate desc 
```

ID 1,2,4 具有相同的`orderdate`值

它以 id 5 和 2 的顺序显示结果，这是不正确的。它实际上应该显示 orderid 5,4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:11:16.900

针对您的评论，您还需要按`ID`列排序：

```
SELECT top 2 * 
FROM @dd 
Order by orderdate desc, ID desc 
```

结果：

```
ID  rate    orderdate
5   60.00   2013-03-05 10:15:00
4   50.00   2013-03-05 10:11:00 
```

# maven - Tycho 编译器没有拾取生成的源代码

> ID：15217331
> 
> 赞同：4
> 
> 时间：2013-03-05T06:36:51.250
> 
> 标签：maven, tycho, generated-code

我对 maven 和 tycho 的世界还很陌生，所以希望这只是我想念的显而易见的事情。我正在尝试使用 tycho 构建一个插件，但我无法让 tycho-compiler-plugin 识别作为构建过程的一部分生成的源代码。

这是我为演示而整理的测试 pom 的副本：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>rt</groupId>
    <artifactId>rt.webservice</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>eclipse-plugin</packaging>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <tycho-version>0.16.0</tycho-version>
    </properties>

    <build>
        <plugins>

            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>tycho-maven-plugin</artifactId>
                <version>${tycho-version}</version>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>tycho-compiler-plugin</artifactId>
                <version>${tycho-version}</version>
                <configuration>
                    <verbose>true</verbose>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jaxws-maven-plugin</artifactId>
                <version>1.12</version>
                <executions>
                    <execution>
                        <id>generate-ws-code</id>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>wsimport</goal>
                        </goals>
                        <configuration>
                            <wsdlDirectory>${basedir}/wsdl</wsdlDirectory>
                            <verbose>true</verbose>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>

    </build>

</project> 
```

我在 src 文件夹中有一个 java 类，它引用了一些生成的源代码，然后无法编译。

如果我删除 tycho 并使用标准的 maven-compiler-plugin，它会自动获取构建期间生成的代码，并且上面提到的 java 类会按预期编译。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:05:18.730

tycho 编译器插件使用 build.properties 中配置的源目录，您必须确保在 build.properties 中引用了生成的源目录

[http://jax-ws-commons.java.net/jaxws-maven-plugin/wsimport-mojo.html#sourceDestDir](http://jax-ws-commons.java.net/jaxws-maven-plugin/wsimport-mojo.html#sourceDestDir)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-05T08:16:14.683

您必须为生成的源添加额外的源文件夹，在您的情况下是`wsdl`dir。

请参阅[此问题](https://stackoverflow.com/questions/9752972/how-to-add-an-extra-source-directory-for-maven-to-compile-and-include-in-the-bui)以获取帮助。

然后第谷将在编译期间拾取那些额外的目录。

# objective-c - 在目标 C 中传递参考参数

> ID：15217332
> 
> 赞同：-2
> 
> 时间：2013-03-05T06:36:52.577
> 
> 标签：objective-c

我目前正在开发一个与 sqlite 数据库交互的项目。问题是每次我想连接到数据库时，我都必须打开并准备数据库。所以我想让这些步骤更通用，我决定创建一个通用类来为我完成这些步骤。

```
+(void)openAndPrepareDatabase:(sqlite3 *)db andStatement:(sqlite3_stmt *)statement andSql:(const char *)sql
{
@try
{
    if(!sqlite3_open([[self getDatabasePath] UTF8String], &db) == SQLITE_OK)
    {
        NSException *myException = [NSException exceptionWithName:@"Can't open database" reason:@"Can't open database" userInfo:Nil];

        @throw myException;
    }

    if(!sqlite3_prepare(db, sql, -1, &statement, NULL) == SQLITE_OK)
    {
        NSException *myException = [NSException exceptionWithName:@"Can't prepare database" reason:@"Can't prepare database" userInfo:Nil];

        @throw myException;
    }
}
@catch (NSException *exception)
{
    @throw exception;
}
}

+(void)openAndPrepareDatabaseV2:(sqlite3 *)db andStatement:(sqlite3_stmt *)statement andSql:(const char *)sql
{
@try
{
    if(!sqlite3_open([[self getDatabasePath] UTF8String], &db) == SQLITE_OK)
    {
        NSException *myException = [NSException exceptionWithName:@"Can't open database" reason:@"Can't open database" userInfo:Nil];

        @throw myException;
    }

    if(!sqlite3_prepare_v2(db, sql, -1, &statement, NULL) == SQLITE_OK)
    {
        NSException *myException = [NSException exceptionWithName:@"Can't prepare database" reason:@"Can't prepare database" userInfo:Nil];

        @throw myException;
    }
}
@catch (NSException *exception)
{
    @throw exception;
}
} 
```

但是当我尝试在我的对象中调用它时，IE：

```
[Common openAndPrepareDatabase:&db andStatement:&statement andSql:sql]; 
```

我收到警告：

```
"Incompatible pointer types sending 'sqlite3_stmt **' (aka 'struct sqlite3_stmt **')  to parameter of type 'sqlite3_stmt *' (aka 'struct sqlite3_stmt *'); remove &" 
```

有谁知道我的问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:39:00.640

> 有谁知道我的问题的解决方案？

编译器***刚刚向您展示了一个。***

> “不兼容的指针……等等等等；***删除&*** ”

（强调我的）

# javascript - 使用正则表达式在 javascript 中验证传真号码

> ID：15217333
> 
> 赞同：4
> 
> 时间：2013-03-05T06:36:53.050
> 
> 标签：javascript, regex

我有一个要求，我必须使用正则表达式对传真号码进行验证检查。传真号码中接受的字符是 + 。和从 0 到 9 的数字。为此，我编写了以下 javascript 函数

```
function validateFax(checkField) {
    if (checkField.value.length > 0) {
        var faxRegEx = /[\+? *[1-9]+]?[0-9 ]+/;
        if (!checkField.value.match(faxRegEx)) {
            return false;
        }
    }
    return true;
} 
```

但这并不能帮助我检查所有可接受的字符。此外，它只检查 3 到 4 个字符，但我的传真号码可以包含任意数量的字符。我是正则表达式的新手。谁能告诉我如何修改此功能以使其符合我的要求。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T06:50:44.270

```
/^\+?[0-9]+$/ 
```

上面的正则表达式允许`+`在数字的开头有一个符号。那么 0-9 可以出现任意次数（大于等于一）。所以这个正则表达式将允许：`+123456789` `123456789`等。

如果你想限制最小位数，你可以通过以下方式修改正则表达式：

```
/^\+?[0-9]{6,}$/ 
```

这里`{6,}`表示[0-9]必须**至少**出现6次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:40:59.917

这可能会奏效：

```
fax.match(/^\+?[0-9]{7,}$/); 
```

我在这里假设传真号码至少有 7 位数字，并且开头的 + 是可选的。

# android - nexus 7 和 nexus 10 问题中的接入点

> ID：15217334
> 
> 赞同：1
> 
> 时间：2013-03-05T06:36:54.250
> 
> 标签：android, wifi, ip-address, access-point

我正在开发一个需要设备创建接入点的应用程序。我正在 Nexus 7 (Android 4.2.1) 和 Nexus 10 (4.2.2) 上测试代码，我都遇到了同样的问题。我设法启用了接入点，但每个尝试连接的设备都保持“正在获取 IP 地址”。知道为什么吗？我在 Galaxy Tab 10" (Android 4.0.3) 中测试了相同的代码，它运行良好。

```
private void createWifiAccessPoint(String pSSID)
{    
    if(mWifiManager.isWifiEnabled())
    {
        mWifiManager.setWifiEnabled(false);          
    }

    Method[] wmMethods = mWifiManager.getClass().getDeclaredMethods();   
    boolean methodFound=false;
    for(Method method: wmMethods){
        if(method.getName().equals("setWifiApEnabled"))
        {
            methodFound=true;

            WifiConfiguration netConfig = new WifiConfiguration();
            netConfig.SSID = pSSID;

            try {
                boolean apstatus = (Boolean) method.invoke(mWifiManager, netConfig,true);          
                for (Method isWifiApEnabledmethod: wmMethods)
                {
                    if(isWifiApEnabledmethod.getName().equals("isWifiApEnabled"))
                    {
                        while(!(Boolean)isWifiApEnabledmethod.invoke(mWifiManager)){
                        };
                        for(Method method1: wmMethods){
                            if(method1.getName().equals("getWifiApState")){
                                int apstate;
                                apstate=(Integer)method1.invoke(mWifiManager);
                                Toast.makeText(this, netConfig.SSID + String.valueOf(apstate), Toast.LENGTH_LONG).show();
                            }
                        }
                    }
                }
                if(apstatus)
                {
                    System.out.println("success");  
                }else
                {
                    System.out.println("failed");   
                }

            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                e.printStackTrace();
            }
        }      
    }
    if(!methodFound){

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:37:51.073

我怀疑您的问题是您尝试连接的设备预计会从 Nexus 设备中的 DHCP 服务器提供 IP 地址等。您的代码只是创建一个访问点。您可能需要在链路的两端使用静态 IP 地址。也就是说，我不确定应该怎么做，因为我自己或多或少也有同样的问题。

请参阅[无法以编程方式在 Jellybean 平板电脑上创建工作 Wi-Fi 接入点](https://stackoverflow.com/questions/16050143/unable-to-programatically-create-working-wi-fi-access-point-on-jellybean-tablet)

我试图将 IP 地址与接入点相关联，尽管我似乎已经这样做了，但我仍然无法建立连接，所以恐怕我对你的问题只有部分答案。

# android - 从 Android Google Maps API V2 开始

> ID：15217336
> 
> 赞同：2
> 
> 时间：2013-03-05T06:37:02.530
> 
> 标签：android, google-maps, android-fragments, google-maps-android-api-2

我是 Android Google Maps API 的新手，我正在尝试使用该 API 开发一个小应用程序。我使用 Google 文档表单作为参考：[https](https://developers.google.com/maps/documentation/android/) ://developers.google.com/maps/documentation/android/并谨慎执行所有步骤。当我构建它并将其安装到我的设备（Android 2.3.6）时，应用程序崩溃。我按照所有说明签署应用程序并获取此特定应用程序的 API 密钥，多次尝试文档的所有步骤，但没有任何好的结果。请问，有人可以帮我解决这个问题吗？我有什么遗漏吗？谢谢！

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.application.uprm_map"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" />

<permission
    android:name="com.application.uprm_map.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission android:name="com.application.uprm_map.permission.MAPS_RECEIVE"/>
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>   
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.application.uprm_map.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="<my own key>"/>

</application>
</manifest> 
```

活动主.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
     <fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:name="com.google.android.gms.maps.MapFragment"/> 
```

MainActivity.java

```
 package com.application.uprm_map;

  import android.app.Activity;
  import android.os.Bundle;

public class MainActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     }
    } 
```

例外：

```
03-05 02:29:27.645: D/dalvikvm(32056): GC_EXTERNAL_ALLOC freed 42K, 49% free        2748K/5379K, external 0K/0K, paused 21ms
03-05 02:29:27.650: D/AndroidRuntime(32056): Shutting down VM
03-05 02:29:27.650: W/dalvikvm(32056): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
03-05 02:29:27.655: E/AndroidRuntime(32056): FATAL EXCEPTION: main
03-05 02:29:27.655: E/AndroidRuntime(32056): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.application.uprm_map/com.application.uprm_map.MainActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.os.Looper.loop(Looper.java:130)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.app.ActivityThread.main(ActivityThread.java:3691)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at java.lang.reflect.Method.invoke(Method.java:507)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at dalvik.system.NativeStart.main(Native Method)
03-05 02:29:27.655: E/AndroidRuntime(32056): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:234)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.app.Activity.setContentView(Activity.java:1679)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at com.application.uprm_map.MainActivity.onCreate(MainActivity.java:11)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
03-05 02:29:27.655: E/AndroidRuntime(32056):    ... 11 more
03-05 02:29:27.655: E/AndroidRuntime(32056): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.application.uprm_map-1.apk]
03-05 02:29:27.655: E/AndroidRuntime(32056):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
03-05 02:29:27.655: E/AndroidRuntime(32056):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
03-05 02:29:27.655: E/AndroidRuntime(32056):    ... 19 more
03-05 02:29:29.660: I/dalvikvm(32056): threadid=4: reacting to signal 3
03-05 02:29:29.665: I/dalvikvm(32056): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T10:13:27.620

首先，您的 API 级别为 8 或更低，因此您必须在布局文件中使用下面的`SupportMapFragment`代替。`MapFragment`

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>   <fragment xmlns:android="http://schemas.android.com/apk/res/android"
>   android:id="@+id/map"
>   android:layout_width="match_parent"
>   android:layout_height="match_parent"
>   android:name="com.google.android.gms.maps.SupportMapFragment"/> 
> ```

第二件事你必须扩展`FragmentActivity`而不是`Activity`：

> ```
>  public class MainActivity extends FragmentActivity { 
> ```

进行上述更改，然后运行您的应用程序。

# php - 将文件值保留在

> ID：15217337
> 
> 赞同：2
> 
> 时间：2013-03-05T06:37:09.750
> 
> 标签：php, html

这是我的 HTML 代码：

```
<input style="margin-left:10px;" type="file"
name="user_upload_image" class="uploader" id="file" value="<?php
        if(isset($_POST['user_upload_image'])) {
            echo $_POST['user_upload_image'];
        }
?>""> 
```

刷新表单后，此代码不会使图像留在框中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:42:26.800

要设置它的值那么它是不可能的。

无法设置该值的原因是**安全问题**。想象一下，如果你能设置它。页面加载，设置值，然后自动提交表单。我可以在您的计算机上获得任何我想要的文件，我知道它的路径。

[阅读更多](http://support.microsoft.com/kb/266087)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:42:23.773

您不能保留`<input>`of `type="file"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:42:51.707

你不能这样做。将图像上传到服务器，然后在那里显示图像的缩略图。

如果您想在提交表单之前显示图像，请使用 AJAX 并将图像上传到服务器，然后将其显示在您的“浏览”按钮附近。您不能在文件文本框中显示路径

# c++ - C++“函数”未在此范围内声明

> ID：15217338
> 
> 赞同：1
> 
> 时间：2013-03-05T06:37:10.320
> 
> 标签：c++

我在课堂上被分配了一项任务：

> 编写一个程序，通过使用指针来创建和管理数组。您的主程序应仅通过各种函数与指针/数组交互。然后，这些函数会将数组的使用限制为正确处理。例如，这些函数将消除超出数组边界的可能性。

到目前为止，我已经编写了程序并修复了大部分错误，但是无论我尝试什么，我都会不断收到“未在此范围内声明的函数”错误。该程序包括以下文件：`main.cpp` `MyArray.cpp`和`MyArray.h`

### 主文件

```
#include <iostream>
#include "MyArray.h"

using namespace std;

int main(int argc, char * argv[]) {
    int *Array1, *Array2;
    int Array1Size(10), Array2Size(10);
    int Array1Value(0), Array2Value(0);

    cout << "Enter Size and Initial value for Array1: ";

    cin >> Array1Size >> Array1Value;

    cout << "Enter Size and Initial value for Array2: ";

    cin >> Array2Size >> Array2Value;

    CreateArray(Array1, Array1Size);
    InitArray(Array1, Array1Size, Array1Value);

    CreateArray(Array2, Array2Size);
    InitArray(Array2, Array2Size, Array2Value);

    cout << "Printing Array1:" << endl;
    PrintArray(Array1, Array1Size);
    cout << endl;
    cout << "Printing Array2:" << endl;
    PrintArray(Array2, Array2Size);
    cout << endl;

    if(CopyArray(Array1, Array1Size, Array2, Array2Size)) {
        cout << "Copy was successful" << endl;
    } else {
        cout << "Copy was not successful" << endl;
    }

    cout << "Printing Array1:" << endl;

    PrintArray(Array1, Array1Size);

    cout << endl;

    EnterArray(Array1, Array1Size);

    // MergeArray(Array1, Array1Size, Array2, Array2Size);

    cout << "Printing Array1:" << endl;
    PrintArray(Array1, Array1Size);

    cout << endl;

    return 0;
} 
```

### MyArray.h

```
#ifndef _MyArray_h_included_
#define _MyArray_h_included_

class MyArray
{
    public:
        void CreateArray(int *array, int size); 
        /*
        CreateArray(int *array, int size): Will accept a pointer to an array, and the size of the array and will allocate the appropriate amount of memory for the array
        */
        void InitArray(int *array, int size, int value);
        /*
        InitArray(Array1, Array1Size, Array1Value): Will initialize the contents of the arry Array1 to the value Array1Value
        */
        void PrintArray(int *array, int size);
        /*
        PrintArray(Array1, Array1Size): Will print the contest of the Array1
        */
        bool CopyArray(int *arrayOne, int sizeOne, int *arrayTwo, int sizeTwo);
        /*
        CopyArray(Array1, Arrary1Size, Array2, Array2Size): Will copy the contents of Array2 to Array1 iff the two arrays are of equal size. If the copying process is successfully completed, then a value of 1 is returned, otherwise a value of 0 is returned.
        */
        void EnterArray(int *array, int size);
        /*
        EnterArray(Array1, Array1Size): Will populate the Array1 from the stdin by prompting the user to enter all elements of the array.
        */
    };
#endif 
```

### 我的数组.cpp

```
#include <iostream>
#include "MyArray.h"

using namespace std;

void MyArray::CreateArray(int *array, int size) {
    array = new int[size];
}

/*
CreateArray(int *array, int size): Will accept a pointer to an array, and the size of the array and will allocate the appropriate amount of memory for the array
*/
void MyArray::InitArray(int *array, int size, int value) {
    for(int index(0); index < size; index++) {
        array[index] = value;
    }
}

/*
InitArray(Array1, Array1Size, Array1Value): Will initialize the contents of the arry Array1 to the value Array1Value
*/
void MyArray::PrintArray(int *array, int size) {
    for(int index(0); index < size; index++) {
        cout << "Value of index: " << index << " is " << array[index] << endl;
    }
}

/*
PrintArray(Array1, Array1Size): Will print the contest of the Array1
*/
bool MyArray::CopyArray(int *arrayOne, int sizeOne, int *arrayTwo, int sizeTwo) {
    if(sizeOne != sizeTwo) {
        return false;
    } else {
        for(int index(0); index < sizeTwo; index++) {
            arrayOne[index] = arrayTwo[index];
        }

        return true;
    }
}

/*
CopyArray(Array1, Arrary1Size, Array2, Array2Size): Will copy the contents of Array2 to Array1 iff the two arrays are of equal size. If the copying process is successfully completed, then a value of 1 is returned, otherwise a value of 0 is returned.
*/
void MyArray::EnterArray(int *array, int size){
    int index(0);

    while(index < size) {
        int value(0);
        cout << "Enter the value for index: " << index + 1 << endl;
        cin >> value;
        array[index] = value;
    }
}
/*
EnterArray(Array1, Array1Size): Will populate the Array1 from the stdin by prompting the user to enter all elements of the array.
*/ 
```

我得到的错误类似于：（`main.cpp:'LineNumber': error. 'Every Function in MyArray.cpp' was not declared in this scope`我会复制粘贴确切的错误，但如果我编译我的代码，我无法从我用来连接到远程主机的终端复制粘贴）

我一直在尝试解决这个问题几个小时，但我无法弄清楚，我什至查看了其他 Stack 帖子，例如['foo' 未在此范围内声明 c++](https://stackoverflow.com/questions/6283168/foo-was-not-declared-in-this-scope-c)
任何帮助将不胜感激，谢谢。

另外我没有写main.cpp，它是随作业给出的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:42:20.027

在 C++ 中，`foo`一个类的函数`A`可以被`A.foo()`or调用`A_ptr->foo()`，只是 a`foo()`不起作用。

**我认为您在这里不需要课程，只需使用免费功能即可。**

如果您确实想使用一个`MyArray`类，则无需`int *Array1, *Array2;`在 main.cpp 中编写并将其作为 arg 传递。最好将数组存储在`MyArray`类中。

像这样。

主文件

```
#include <iostream>
#include "MyArray.h"

using namespace std;

int main(int argc, char * argv[]) {
    //int *Array1, *Array2;
    MyArray Array1;

    int Array1Size(10);
    int Array1Value(0);

    cout << "Enter Size and Initial value for Array1: ";

    cin >> Array1Size >> Array1Value;

    Array1.CreateArray(Array1Size);
    Array1.InitArray(Array1Size, Array1Value);

    cout << "Printing Array1:" << endl;
    Array1.PrintArray(Array1Size);
    cout << endl;

    return 0;
} 
```

MyArray.h

```
#ifndef _MyArray_h_included_
#define _MyArray_h_included_

class MyArray
{
    public:
        void CreateArray(int size); 

        void InitArray(int size, int value);

        void PrintArray(int size);

    private:
        int *m_array;

    };
#endif 
```

我的数组.cpp

```
#include <iostream>
#include "MyArray.h"

using namespace std;

void MyArray::CreateArray(int size) {
    m_array = new int[size];
}

void MyArray::InitArray(int size, int value) {
    for(int index(0); index < size; index++) {
        m_array[index] = value;
    }
}

void MyArray::PrintArray(int size) {
    for(int index(0); index < size; index++) {
        cout << "Value of index: " << index << " is " << m_array[index] << endl;
    }
} 
```

我忽略了您的解决方案中的一些函数以及您应该使用的析构函数`delete[]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:42:57.373

买一本关于 C++ 的书并学习它。您需要创建一个 MyArray 对象并使用该对象调用函数：

```
MyArray myArr;

myArr.CreateArray(Array1, Array1Size); 
```

ETC

如果给出 main ，您的 createArray 将必须在内部创建数组：

```
MyArray myArr;

void CreateArray(int *array, int size)
{
    return myArr.CreateArray(array, size);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:47:06.447

首先你要明白什么是类。在您的情况下，要调用您的 MyArray 函数，您必须有一个 MyArray 类的实例：

```
MyArray a;
a.CreateArray(...);
... 
```

# ubuntu - 使用 Chef 和 Knife 引导一个 ubuntu ec2 实例

> ID：15217340
> 
> 赞同：0
> 
> 时间：2013-03-05T06:37:21.320
> 
> 标签：ubuntu, amazon-web-services, chef-infra

我正在使用厨师引导一个基于 ec2 ubuntu 的厨师节点，它创建了一个实例，但它说`Failed to authenticate ubuntu - trying password authand` 要求输入密码。但是新创建的 ubuntu ec2 实例不会设置任何类型的密码。引发错误

```
 ERROR: Net::SSH::AuthenticationFailed: ubuntu@ec2-XXX-XXX-XXX-XX.com 
```

如何绕过此事件以及问题所在，我是否必须对配置进行任何更改。

请帮助我，我是厨师的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:54:07.253

据我所知，EC2 实例正在使用 ssl 证书身份验证，您似乎没有将密钥对分配给创建的实例。

# matlab - matlab 中的 Libsvm 用于心跳

> ID：15217342
> 
> 赞同：-1
> 
> 时间：2013-03-05T06:37:35.423
> 
> 标签：matlab, testing, signals, libsvm

我有 3 种不同的心跳，正常、左阻滞和右阻滞。我每个有 20 个节拍。我想对 60 次心跳进行训练，然后测试几个不同的心跳。我想让程序告诉我它是正常的，左块还是右块。我所拥有的只是一个 60 x 300 矩阵，其中前 20 行是正常的，然后是左、右块。

我如何制作训练标签？它们必须采用特殊格式，但我不知道如何为培训创建此格式。

我什至给 libsvm 的创建者发了电子邮件，但我还没有收到回音。

有什么地方可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:42:46.347

假设 1 = 正常，2 = 左，3 = 右，那么标签是

```
labels = [ones(20,1); 2*ones(20,1); 3*ones(20,1)]; 
```

# php - 卷曲不起作用，错误：无法连接到主机

> ID：15217345
> 
> 赞同：0
> 
> 时间：2013-03-05T06:37:48.177
> 
> 标签：php, curl

我正在使用 curl 从特定站点 api.wunderground.com 获取天气信息，但问题是它不起作用。我也尝试过使用 file_get_contents 函数，但它也不起作用。这是我的 curl 代码：

```
function get_web_page($url)
        {
            //echo "curl:url<pre>".$url."</pre><BR>";
        $options = array(
            CURLOPT_RETURNTRANSFER => true,     // return web page
            CURLOPT_HEADER         => false,    // don't return headers
            CURLOPT_FOLLOWLOCATION => true,     // follow redirects
            CURLOPT_ENCODING       => "",       // handle all encodings
            CURLOPT_USERAGENT      => "spider", // who am i
            CURLOPT_AUTOREFERER    => true,     // set referer on redirect
            CURLOPT_CONNECTTIMEOUT => 15,      // timeout on connect
            CURLOPT_TIMEOUT        => 15,      // timeout on response
            CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects
            CURLOPT_PROXY          => null,

        );                  

        $ch         = curl_init($url);
        curl_setopt_array( $ch, $options );
        $content    = curl_exec( $ch );
        $err        = curl_errno( $ch );
        $errmsg     = curl_error( $ch );
        $header     = curl_getinfo( $ch,CURLINFO_EFFECTIVE_URL );
        curl_close( $ch );

        $header['errno']   = $err;
        $header['errmsg']  = $errmsg;

        //change errmsg here to errno
        if ($errmsg)
        {
            echo "CURL:".$errmsg."<BR>";
        }
        return $content;
        }

        $url        =   "http://api.wunderground.com/api/67927f145c532a19/geolookup/conditions/q/uae/dubai.json";

        get_web_page($url); 
```

我检查了我的服务器设置，启用了 curl 并且服务器正在使用端口 80。任何人都可以帮助我解决这个问题，我没有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:42:32.210

你只需要回显输出。

```
echo get_web_page($url); 
```

编辑：

您也可以使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)

```
<?php
$url="http://api.wunderground.com/api/67927f145c532a19/geolookup/conditions/q/uae/dubai.json";
echo file_get_contents($url);
?> 
```

代码更新：

```
<?php
function get_web_page($url)
{    
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 120);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $curl_result = curl_exec($ch);
    curl_close ($ch);
    return $curl_result;
}

$url="http://api.wunderground.com/api/67927f145c532a19/geolookup/conditions/q/uae/dubai.json";
echo get_web_page($url);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T07:35:40.620

也许你通过代理连接到互联网。你可以通过在 curl_setopt 函数中设置代理来获取它。它对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:10:01.690

API 似乎阻止了可疑的用户代理。尝试使用标准浏览器用户代理而不是`spider`.

正常情况下（浏览器的用户代理），API 返回正常响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:50:43.287

我尝试了相同的代码并得到了响应

{“响应”：{“版本”：“0.1”，“termsofService”：“ [http://www.wunderground.com/weather/api/d/terms.html](http://www.wunderground.com/weather/api/d/terms.html) ”，“功能”：{“geolookup”：1 , "条件": 1 }

上面的代码是对的。您只是忘记打印函数返回的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-30T07:15:48.687

只需添加

```
 CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_SSL_VERIFYHOST => false,
        CURLOPT_SSL_VERIFYPEER => false,
        CURLOPT_PROXY => false, 
```

它解决了这个问题

# android - Logcat：列_id不存在（SQL相关）

> ID：15217352
> 
> 赞同：1
> 
> 时间：2013-03-05T06:38:05.143
> 
> 标签：android, sql, database, cursor, logcat

我的应用程序目前遇到一个非常烦人的问题：目标是根据用户单击的按钮从数据库中读取不同的列表视图信息。不幸的是，我的应用程序总是崩溃，我在 stackoverflow 上的类似问题中找不到有效的解决方案（尝试更改数据库版本，添加一些关于光标的行等）。

这是我的代码的相关部分：

**A. DatabaseAdapter 类：**

```
public class DatabaseAdapter {

public static final String DATABASE_TABLE = "Restaurants";

public static final String COL_CAT1 = "cat1";
public static final String KEY_ROWID = "_id";
public static final String COL_CAT2 = "cat2";
public static final String COL_NAME = "name";
public static final String COL_COMMENTS = "comments";

private Context myContext;
private SQLiteDatabase myDatabase;
private DatabaseHelper dbHelper;
private Cursor c;

// Constructor
public DatabaseAdapter(Context context) {
    this.myContext = context;

}

public DatabaseAdapter open() throws SQLException {
    dbHelper = new DatabaseHelper(myContext);
    // TODO: or maybe?
    // database = dbHelper.getWritableDatabase();
    try {
        dbHelper.createDatabase();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    myDatabase = dbHelper.getReadableDatabase();
    return this;
}

public void close() {
    if (c != null) {   
        c.close();
    }
    try {
        dbHelper.close();
        myDatabase.close();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public Cursor findNameInTable(int myVariable) {
    c = myDatabase
            .query(DATABASE_TABLE, new String[] { COL_NAME , COL_COMMENTS }, 
                    COL_CAT1+"=?",
                    new String[] { Integer.toString(myVariable) }, null,
                    null, null);
    return c;
} 
```

}

**B. ResultListViewActivity（结果应该通过这个Activity在ListView中显示）：**

```
public class ResultListViewActivity extends Activity {

private SimpleCursorAdapter cursorAdapter;
private DatabaseAdapter dbHelper;
ListView listview;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_result_list_view);

    dbHelper = new DatabaseAdapter(this); // open() method is in DatabaseAdapter

    dbHelper.open();

    displayListView();
}

private void displayListView() {

    Bundle bundle = getIntent().getExtras();
    int myVariable = bundle.getInt("myVariable");

    Cursor c = dbHelper.findNameInTable(myVariable);
    // the desired columns to be bound
    String[] columns = new String[] { DatabaseAdapter.COL_NAME,
            DatabaseAdapter.COL_COMMENTS, };
    // the XML defined views which the data will be bound to
    int[] to = new int[] { R.id.name, R.id.comments, };
    // create the adapter using the cursor pointing to the desired data
    // as well as the layout information
    cursorAdapter = new SimpleCursorAdapter(this, R.layout.poi_info, c,
            columns, to, 0);

    ListView listView = (ListView) findViewById(R.id.listview);
    // Assign adapter to ListView
    listView.setAdapter(cursorAdapter);
} 
```

**我的数据库图片：如您所见，实际上有一个 _id 列：** ![在此处输入图像描述](../Images/821c7a7d13f2e3548ac127b9c82bce3d.png)

最后，在以下情况下，我的 logcat 的图片：
![在此处输入图像描述](../Images/2ef6b8bd0ad16185bb9b2162a9a68bc4.png)

如果您想查看我的代码的其他部分，请告诉我。提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:39:41.947

每个 ListView 在其选择查询中都需要一个 _id 列。您必须在 List 查询中包含一个 _id 列

将您的查询更改为：

```
c = myDatabase
        .query(DATABASE_TABLE, new String[] { KEY_ROWID,COL_NAME , COL_COMMENTS }, 
                COL_CAT1+"=?",
                new String[] { Integer.toString(myVariable) }, null,
                null, null); 
```

# android - 如何使用html5在window 8、window phone 8、android中构建游戏跨平台？

> ID：15217353
> 
> 赞同：-1
> 
> 时间：2013-03-05T06:38:06.410
> 
> 标签：android, window, windows-phone-8, game-engine

有没有办法在window 8、window phone 8、android使用html5构建游戏跨平台？

我可以将窗口 8 上的 HTML5/Javascript 编写的游戏转换为窗口电话 8 到 android 吗？

我在 Android 上搜索游戏框架 libgdx ( [https://code.google.com/p/libgdx/](https://code.google.com/p/libgdx/) )，我可以在窗口 8 上将它用于 HTML5 游戏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:41:28.600

使用[**电话间隙**](http://phonegap.com/)。

它允许您创建跨平台应用程序。PhoneGap 是一个免费的开源框架，允许您使用标准化 Web API 为您关心的平台创建移动应用程序。

还有其他工具，如[**Titanium**](http://www.appcelerator.com/platform/titanium-sdk/)、[**Snecha**](http://www.sencha.com/)，可让您创建跨平台应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:43:32.370

Sencha touch 就在那里……这是跨平台的……

[http://www.sencha.com/products/touch](http://www.sencha.com/products/touch)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:52:45.937

PhoneGap 是一个免费的开源框架，允许您使用标准化的 Web API 为您关心的平台创建移动应用程序。下载**[Phonegap](http://phonegap.com/download/)**。

请点击此**[链接](https://build.phonegap.com/)**了解更多信息。

# vim - 如何在vim中使光标在不同模式下发生变化？

> ID：15217354
> 
> 赞同：2
> 
> 时间：2013-03-05T06:38:07.083
> 
> 标签：vim, vim-plugin

如何使 Vim 在不同模式下更改光标以满足这些条件：

1.  不使用`gconftool`或这样的工具。我只需要影响 Vim 的一个实例，而不是整个终端。
2.  这必须在`Gnome Terminal`和中工作`GVim`。

**PS**：我已经尝试用 sample in 进行更改`help gcr`，但它仅适用于 GVim，不适用于 Gnome 终端中的 Vim。

**PPS**：我已经测试了[http://vim.wikia.com/wiki/Change_cursor_shape_in_different_modes](http://vim.wikia.com/wiki/Change_cursor_shape_in_different_modes)，但它改变了整个终端的光标。

**PPPS**：玩玩`gcr`是首选。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T09:20:27.973

我以前遇到过同样的问题，并尝试了几个选项。

我先总结一下：

选项 1：更改光标形状。
参考： http: [//vim.wikia.com/wiki/Change_cursor_shape_in_different_modes](http://vim.wikia.com/wiki/Change_cursor_shape_in_different_modes)
结果：这对我不起作用

选项 2：更改光标颜色。
参考： http: [//vim.wikia.com/wiki/Configuring_the_cursor](http://vim.wikia.com/wiki/Configuring_the_cursor)
结果：这可行，但在离开 vim 后会改变终端光标。我不能接受。

选项 3：更改光标线颜色
参考：[如何在插入/正常模式下更改 vim 光标？](https://stackoverflow.com/questions/6488683/how-do-i-change-the-vim-cursor-in-insert-normal-mode)

最终结果：选项 3 最适合我，需要更多代码来定义`Cursor`主题中的颜色。

在*vimrc*中，添加这些：

```
autocmd InsertEnter * set cul
autocmd InsertLeave * set nocul 
```

然后，在您的*主题文件*中，设置`Cursor`为比背景暗一点。例如

```
hi Cursor ctermbg=black
hi Normal ctermbg=darkgray 
```

添加这些设置后，当您进入视觉模式时，线条会变暗，以便您轻松识别。它在 Gvim 中的工作方式有点不同，但对我来说是完全可以接受的。此外，一旦你习惯了终端 vim，你就会完全忘记 Gvim。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T19:08:49.713

您可以使用[togglecursor 插件](https://github.com/jszakmeister/vim-togglecursor)。它完全符合您的要求，并尝试支持尽可能多的终端，包括 gnome 终端。该插件通过发送终端转义序列来更改光标形状而不是使用外部应用程序来工作。光标形状在退出 vim 时恢复。

从[文档](https://github.com/jszakmeister/vim-togglecursor/blob/master/doc/togglecursor.txt#L18)中：

> 当前支持的终端是 Mac 的 iTerm2（需要 1.0.0.20130602 测试版或更高版本）、基于 VTE3 的终端（包括 gnome-terminal）和 KDE 的 Konsole。xterm 控制台也得到部分支持。较旧的 xterm 不支持行光标，因此该插件当前将光标设置为下划线。
> 
> 旧版本的基于 VTE3 的终端（v0.39 之前）不支持通过转义序列更改光标，因此不受支持。在不受支持的终端上，Vim 的默认行为保持不变。
> 
> 该插件还支持 tmux，并且也会在 tmux 会话中更改您的光标。

# boost - 使用 Boost 库分割几何

> ID：15217356
> 
> 赞同：0
> 
> 时间：2013-03-05T06:38:09.127
> 
> 标签：boost, split, boost-geometry

有没有办法使用 Boost 库对几何图形执行拆分操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T16:34:11.603

我不确定你到底在想什么，但你可以检查 Boost.Geometry ( [http://www.boost.org/libs/geometry](http://www.boost.org/libs/geometry) ) 中实现的算法。

我猜你可以使用 intersection() 或 difference() 算法来实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-03T17:39:18.590

你对你的输入是什么以及你对分割它的定义不够具体。

> 有没有办法使用 Boost 库对几何图形执行拆分操作？

下面是我尝试用一​​个快速简单但不一定是最佳的示例来回答您的问题，该示例说明了如何使用 Boost.Geometry 构建块来组合解决方案（许多可能的一种）来分割几何，即给定点的线串。

```
#include <boost/geometry.hpp>
#include <algorithm>
#include <iostream>
#include <vector>
namespace bg = boost::geometry;
using point_2d = bg::model::d2::point_xy<double>;
using linestring_2d = bg::model::linestring<point_2d>;

int main()
{
    point_2d pt(2.5, 0);
    linestring_2d ls({{0, 0}, {1, 0}, {2, 0}, {3, 0}, {4, 0}, {5, 0}});

    auto split_begin = std::find_if(bg::segments_begin(ls), bg::segments_end(ls),
        [&pt](auto const& segment) { return bg::intersects(segment, pt); });

    linestring_2d line1;
    std::for_each(bg::segments_begin(ls), split_begin, [&line1](auto const& s)
    {
        bg::append(line1, s.first);
    });
    bg::append(line1, split_begin->first);
    bg::append(line1, pt);

    linestring_2d line2;
    bg::append(line2, pt);
    bg::append(line2, split_begin->second);
    std::for_each(++split_begin, bg::segments_end(ls), [&line2](auto const& s)
    {
        bg::append(line2, s.second);
    });

    std::cout << "line:        " << bg::dsv(ls) << std::endl;
    std::cout << "split point: " << bg::dsv(pt) << std::endl;
    std::cout << "line1:       " << bg::dsv(line1) << std::endl;
    std::cout << "line2:       " << bg::dsv(line2) << std::endl;
} 
```

输出：

```
line:        ((0, 0), (1, 0), (2, 0), (3, 0), (4, 0), (5, 0))
split point: (2.5, 0)
line1:       ((0, 0), (1, 0), (2, 0), (2.5, 0))
line2:       ((2.5, 0), (3, 0), (4, 0), (5, 0)) 
```

# github - 将 Jekyll 部署到 Github 页面

> ID：15217357
> 
> 赞同：20
> 
> 时间：2013-03-05T06:38:10.760
> 
> 标签：github, jekyll, github-pages

我已经用 Jekyll 在本地建立了一个站点，并将其推送到一个新的主仓库（username.github.com），并且该站点运行良好。我的问题是，如何*仅*将可部署部分（即 _*站点*目录）移动到 gh-pages 分支中？或者更确切地说，该目录的内容是否是最好的部署方式？

我计划使用自定义域。我的工作流程是在 master 分支中工作，也许是一些功能分支，然后将编译后的结果推送（合并）到 gh-pages 分支中。这听起来正确吗？

我很难通过文档来解决这个问题，不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-05T22:41:24.943

根据您问题中的详细信息，您的工作流程听起来不正确。

如果您已将基于 Jekyll 的站点推送到`username.github.io`存储库，则不需要`gh-pages`分支。`gh-pages`只有您希望在同一存储库中拥有代码和网站的存储库才需要分支。GitHub Pages 将为您运行 Jekyll 并在这两种情况下为编译的站点提供服务。

GitHub Pages 确实以非常特定的方式运行 Jekyll，以保证其安全。如果您在 Jekyll 站点中使用自定义插件，那么您需要将编译后的站点（`_site`您提到的目录）存储在 master 分支上，并将源代码存储在不同的分支中。

总而言之，您的工作流程应该在您的本地存储库中工作 - 在`master`分支或功能分支中（根据需要将功能分支合并到本地分支`master`） - 当您准备好发布时，将本地存储库推送到`master`GitHub。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-20T13:57:16.177

试试我的[jgd](https://github.com/yegor256/jekyll-github-deploy)宝石。您需要做的就是安装并运行：

```
gem install jgd
jgd 
```

完毕！您的站点已构建并部署到`gh-pages`. 还`jgd`与 travis-ci 或任何其他 CI 服务器完美集成。

这篇文章详细解释了机制：[http ://www.yegor256.com/2014/06/24/jekyll-github-deploy.html](http://www.yegor256.com/2014/06/24/jekyll-github-deploy.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T08:12:26.140

您希望做的与[Octopress 的](http://octopress.org)工作方式非常相似。让我向您解释如何做这样的事情。

您希望将存在的数据部署`_site`到分支`gh-pages`中。因此，您的第一步是将存储库的默认分支设置为`username.github.com`gh-pages 而不是`master`或`source`（基本上是您想要的）。您现在需要做的是在您的任务中编写`Rakefile`将内容复制`_site`到分支的任务`gh-pages`。完成后，您可以自动执行该`push`过程或手动执行。这样，当`push`您使用默认分支时，GitHub 将不会构建您的网站，而只会为`_site`.

如果你想了解脚本是如何工作的，你应该看看`Rakefile`Octopress 中的 present。它有这两个称为`generate`和的任务`deploy`。当您运行`rake generate`时，它将`jekyll --no-auto`使用参数运行，用于将代码放入名为的目录`_deploy`中，当您运行时`rake deploy`，它将内容复制`_deploy`到分支`gh-pages`并提交。就个人而言，我非常喜欢这个过程，但我还没有在我的 Jekyll 站点中实现它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-01T01:08:45.193

您的工作流程应该是在开发或功能分支中工作，然后仅将构建的文件推送到您的主分支，以供 Github Pages 提供服务。

去做这个：

1.  从您的`development`分支开始，准备好构建并启用所有更改。
2.  在您的开发分支中运行：（`rm -rf _site`这会将旧的构建文件删除到 _site 文件夹）
3.  运行`git clone -b master 'git config remote.origin.url' _site`（这将为您构建的文件创建一个主分支）
4.  运行`jekyll build`（建立您的网站）
5.  `cd _site`
6.  如果您有自定义域，请执行 7-8，否则请跳至步骤 9
7.  `touch CNAME`
8.  将您的自定义域添加到该 CNAME 文件
9.  混帐添加。（你现在应该在 master/_site 分支）
10.  git 提交
11.  git推送

现在，只有您构建的文件应该在`master`，您的工作文件将在您的`development`或功能分支上！

我为此苦苦挣扎了一段时间，所以如果您想使用它，请构建一个脚本：[https ://github.com/andimiya/deploy-jekyll-gh-pages](https://github.com/andimiya/deploy-jekyll-gh-pages)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-23T05:32:33.837

您不想对文件夹中的文件进行任何更改`_site`。`_site`Jekyll 会保存它生成的静态 html 页面。下次 Jekyll 服务器重新生成站点时，它们将被自动覆盖。例如，如果您创建一个新的博客文章，服务器会看到新文件（或更新的文件），然后服务器会重新生成包含新内容的静态页面。这就是您的新博客文章位于页面顶部的方式。

`_site`添加到`.gitignore`文件中被认为是最佳实践。无需将该目录推送到您的存储库，因为一旦它们到达 github 的服务器，它就会被覆盖。

我认为您想要做的是`checkout`一个新分支，进行更改，然后将其合并到`gh-pages`分支中。

# vbscript - 如何在 TestComplete 中使用 VBScript 截取屏幕截图？

> ID：15217362
> 
> 赞同：5
> 
> 时间：2013-03-05T06:38:21.870
> 
> 标签：vbscript, screenshot, testcomplete

我正在使用TestComplete。我需要截取屏幕截图并将其放在特定文件夹中。如何使用 VBScript 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:00:27.753

要捕获桌面屏幕截图，请使用该[`Sys.Desktop.Picture`](http://support.smartbear.com/viewarticle/31232/)方法。要将生成的图像保存到文件中，请使用其[`SaveToFile`](http://support.smartbear.com/viewarticle/31697/)方法：

```
Sys.Desktop.Picture.SaveToFile "E:\screenshot.png" 
```

或者，您可以打开[Test Visualizer](http://support.smartbear.com/viewarticle/28968/)以自动捕获测试操作的屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T07:17:05.683

```
Function CaptureScreenShot(ScreenshotPath )  
  'Generate Name of the Image 
  strimgFileName="Img\Img" & Day(Date)& Month(Date) & Year(Date) & Hour(Now) & Minute(Now) & Second(Now) &".jpg"  
  strImgFile= ScreenshotPath & strimgFileName   
  'Capture failure Screen shot 
  Set objPic = Sys.Desktop.Picture()  
  'Save captured Screen shot 
  ExecutionStatus = objPic.SaveToFile(strImgFile)  
  'Return Captured image name
  CaptureScreenShot=".\" & strimgFileName  
End Function 
```

# xml - 需要根据其子节点属性值提取xml文件的整个节点

> ID：15217365
> 
> 赞同：0
> 
> 时间：2013-03-05T06:38:34.180
> 
> 标签：xml, vb.net

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<Tabel>
<Members>
  <Member>
    <Naam>Cruciatum</Naam>
    <Kills>1000</Kills>
    <Deaths>10</Deaths>
    <KD>100</KD>
  </Member>
  <Member>
    <Naam>Ghostbullet93</Naam>
    <Kills>10</Kills>
    <Deaths>1</Deaths>
    <KD>10</KD>
  </Member>
</Members>
</Tabel> 
```

我的问题是我想提取 KD=10.Plz 帮助我如何做到这一点的整个成员节点。我使用 vb.net 作为编程语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:08:32.290

这是您可以查看的两个示例。如果你真的不想使用 LINQ，那么你需要学习 XPath。

```
Sub Main()

    'This method uses the Xml DOM in the System.Xml namespace with XPath
    Dim xmlDoc = New XmlDocument()

    xmlDoc.Load("c:\test\test.xml")

    Dim membersNode As XmlNode = xmlDoc.DocumentElement.SelectSingleNode("/Tabel/Members")
    If membersNode IsNot Nothing Then
        Dim memberWithKDof10 As XmlNode = membersNode.SelectSingleNode("Member[KD = '10']")
        If memberWithKDof10 IsNot Nothing Then
            Console.WriteLine("Name of player with KD of 10 is {0}", memberWithKDof10.SelectSingleNode("Naam").InnerText)
        Else
            Console.WriteLine("Player not found!")
        End If
    End If

    'This method uses the XDocument classes found in the System.Xml.Linq namespace
    Dim xDoc As XDocument = XDocument.Load("c:\test\test.xml", LoadOptions.None)

    Dim membersElement As XElement = xDoc.Root.Element("Members")
    If membersElement IsNot Nothing Then
        Dim memberWithKDof10 As XElement = membersElement.Descendants("Member").FirstOrDefault(Function(e) e.Element("KD").Value = "10")
        If memberWithKDof10 IsNot Nothing Then
            Console.WriteLine("Name of player with KD of 10 is {0}", memberWithKDof10.Element("Naam").Value)
        Else
            Console.WriteLine("Player not found!")
        End If
    End If

    Console.WriteLine()
    Console.WriteLine("Press ENTER to exit...")
    Console.ReadLine()
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:46:22.803

您可以使用 Linq to XML 和`XDocument`类来做到这一点：

```
Dim xml = XDocument.Load("myFilePath")
' or xml = XDocument.Parse("<Tabel> (...) </Tabel>") '

Dim myMember = xml.Root
                  .Element("Members")
                  .Elements("Member")
                  .First(Function(m) CInt(m.Element("KD")) = 10) 
```

之后，`myMember`将是与 XML 中的元素`XElement`相对应的类实例。`Member`

# php - 使用数据库类、db抽象层和orm有什么区别？

> ID：15217366
> 
> 赞同：0
> 
> 时间：2013-03-05T06:38:36.690
> 
> 标签：php, database, orm

我很久以前就创建了一个数据库类，一直在我的项目中使用它。

像这样的东西：

```
class Database
{
     function query($sqlQuery) {
         $this->prepare($sqlQuery);
     }

     function connect($databaseConnectionValues) { }

     function read() { }

     function prepare() { }

     ...etc
} 
```

像 Laravel 这样的框架以完全不同的方式做到这一点。他们从不执行 SQL。

像这样的东西：

```
$users->find('Demo')->select('email')->get(); 
```

对此我有两个问题。

**问题1：**我相信第二个代码被称为“ORM”，但什么是“数据库抽象层”？另外，数据库有多少层？（当我得到他们的名字时，我可以做进一步的研究。）

**问题 2：**我为什么要使用 ORM，为什么不呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:55:06.303

下面是瘦身：

1.  数据库抽象层 = 一种工具，它采用数据库功能和语法并将它们重新打包以便以编程方式使用。
2.  ORM = Object Relational Mapper，它可能包括一个数据库抽象，更进一步，允许您通过编程对象管理表之间的关系。

这将使该代码片段成为数据库抽象层。

```
$users->find('Demo')->select('email')->get(); 
```

如果它有一些语法，如：

```
$users->join('Friends')->find('Demo')->select('email')->get(); 
```

或者类似的，你手上有一个 ORM。

您唯一会发现 ORM 有用的情况是，如果您必须执行连接查询并希望将多个表的结果很好地预先打包到它们自己的模型中，然后进行适当的组织。例子：

```
$u = $user->join('friends')->where('name', 'mike')->get();

echo $u->name; // would be mike;
echo $u->friends[0]->name; // would be the name of another user who's mike's friend 
```

当然，这都是非常概念性和框架不可知的。在这种情况下，将在加载“friends”属性的模型类中定义与所有作为所选用户朋友的用户的关系。

如果您没有在表上进行连接，请不要担心 ORM 功能，即使您选择的框架有一个。只有在需要时才需要使用它。

# xcode - uibuttons 重叠背景图像点击问题

> ID：15217367
> 
> 赞同：3
> 
> 时间：2013-03-05T06:38:53.753
> 
> 标签：xcode, uibutton, background-image, overlapping

在下面的这张图片中，我有 6 个圆形矩形按钮，每个按钮都有一个彩色区域作为背景

[http://i.stack.imgur.com/uNs0f.png](http://i.stack.imgur.com/uNs0f.png)

问题是一些按钮重叠，导致点击错误的区域。例如，如果我单击西科罗拉多地区，它将选择白色区域而不是浅蓝色区域。西华盛顿和俄勒冈也有同样的问题，我点击那些浅蓝色区域被选中。不，我可以再次切片图像并在重叠的地方添加其他按钮，但我想知道是否有更好的方法让按钮单击区域与图像区域完全匹配。

抱歉没有直接发布图片，我没有足够的声望点

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:25:37.133

[Taylor Abernethy Newman](https://stackoverflow.com/users/2041591/)提到的一种可能的解决方案是使用 UITapGestureRecognizer 而不是 UIButtons。您可以将手势识别器附加到您的 UIImageView，然后使用 `locationInView:' 来确定点击所在的地图区域并执行相应的操作。

# jquery - 使用 jquery 以 UTC 11:30,0 格式获取浏览器 time_zone

> ID：15217373
> 
> 赞同：0
> 
> 时间：2013-03-05T06:39:10.140
> 
> 标签：jquery

任何人都建议我使用 jquery 获取格式为 'UTC +11:30,0' 的浏览器 time_zone ，因为我只想在我的数据库中存储 'UTC +11:30,0'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:44:30.403

**[检查这个...](https://stackoverflow.com/questions/8207655/how-to-get-time-of-specific-timezone-using-javascript)**

```
function calcTime(city, offset) {
    // create Date object for current location
    var d = new Date();

    // convert to msec
    // add local time zone offset
    // get UTC time in msec
    var utc = d.getTime() + (d.getTimezoneOffset() * 60000);

    // create new Date object for different city
    // using supplied offset
    var nd = new Date(utc + (3600000*offset));

    // return time as a string
    return "The local time for city"+ city +" is "+ nd.toLocaleString();
}

alert(calcTime('Bombay', '+5.5')); 
```

# ios - 使用 OpenGL ES2.0 绘制纹理（或如何使用 GPU 进行 YUV -> RGB）

> ID：15217374
> 
> 赞同：0
> 
> 时间：2013-03-05T06:39:14.753
> 
> 标签：ios, opengl-es, glsl, textures, shader

我第一次尝试在 iOS 下使用 OpenGL，试图通过将 YUV 图像转换为 RGB 来渲染它们。我环顾四周，在这里和那里找到了一些示例，并且我计划使用 Apple 的 GLCameraRipple 示例代码中提供的顶点/片段着色器。我了解执行转换所需的数学运算。我无法理解 OpenGL API 以及如何在屏幕上简单地绘制 2D 纹理。

有人可以说明使用 OpenGL 绘制纹理所需的高级步骤吗？如果我理解概念上需要做什么，我希望我能够弄清楚细节。

据我目前了解，顶点着色器在片段着色器之前触发，顶点着色器对顶点进行操作，片段着色器对介于两者之间的所有内容进行操作。可变关键字用于将在顶点之间插值的数据发送到片段着色器。

这会产生一些问题：

*   我是否需要传递一组代表纹理的 2D 帧的顶点？
*   在传递顶点之前，我是否需要将 YUV 数据传递给片段着色器？
*   片段着色器如何使用插值坐标来访问适当的 YUV 样本？
*   如何访问最终结果？
*   将适当的数据传递给着色器后如何触发操作？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:19:00.257

例如，我建议任何基本的 OpenGL 教程[http://www.cs.washington.edu/education/courses/cse557/00wi/projects/impressionist/help.html](http://www.cs.washington.edu/education/courses/cse557/00wi/projects/impressionist/help.html) 。另请查看 Kronos 组的 opengl.org 站点。

在 OpenGL 中将图像绘制到屏幕上的标准方法是绘制两个带纹理的三角形（一个矩形），并将图像编码为纹理。顶点着色器往往是非常标准化的并且不会改变太多（对于 99% 的情况）。您的图像处理，如波纹或颜色空间转换，都将在像素着色器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:07:25.673

我能够绘制纹理。我在 UV 通道正确显示颜色以及方向/镜像问题方面遇到了一些问题，但这些问题超出了这个问题的范围。

> 我是否需要传递一组代表纹理的 2D 帧的顶点？

是的，必须在多边形顶部绘制纹理，并且可以将 2D 区域表示为两个三角形。顶点缓冲区对象 (VBO) 可用于将顶点数组以及包含索引的互补数组传递到顶点数组中。OpenGL 可以使用这些数据来绘制多边形。函数`glGenBuffers`、`glBindBuffer`和`glBufferData`可用于将此信息传递给 OpenGL。

这个页面很好地解释了它：[http ://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)

> 在传递顶点之前，我是否需要将 YUV 数据传递给片段着色器？

不，可以在加载纹理之前将顶点传递到 OpenGL。然而，纹理必须在绘制多边形之前绑定并上传到 OpenGL。

> 片段着色器如何使用插值坐标来访问适当的 YUV 样本？

在我的实现中，对于每个顶点，都会传递一个相应的纹理坐标。这将创建顶点位置到纹理坐标的映射。顶点着色器将此坐标作为`varying`参数输出。使用`varying`关键字允许片段着色器通过插值接收每个像素的坐标值。然后片段着色器使用这个坐标来检索相应的纹理样本。在我的例子中，它使用坐标来检索 YUV 样本。

> 如何访问最终结果？

通常，操作的最终结果被推入帧缓冲区（我不熟悉细节）。在使用 GLKView 的 iOS 5+ 中，我`presentRenderbuffer`在 EAGLContext 实例上发送消息以显示结果。

> 将适当的数据传递给着色器后如何触发操作？

绘图由 OpenGL 绘图函数之一触发。在将顶点/纹理坐标以及纹理数据上传到 OpenGL 并与着色器中的参数相关联后，我使用该`glDrawElements`函数绘制多边形并在顶部渲染纹理。

# javascript - 简单的 javascript 在任何 IE 中都不起作用？

> ID：15217378
> 
> 赞同：11
> 
> 时间：2013-03-05T06:39:38.533
> 
> 标签：javascript, html, css, internet-explorer

我正在用这段代码创建一个轻微的视差效果。除了 IE，一切都很好，除了 IE。我使用的是 IE 9。

[Jsfiddle-javascript](http://jsfiddle.net/MRbWY/1/)

[Jsfiddle-jQuery](http://jsfiddle.net/Nfd2R/)

```
<div id="head"> i </div>
<div id="subHead"> can </div>
<div id="content">  haz </div> 
```

Javascript

```
window.onscroll = function(ev){
  var subHead = document.getElementById('subHead'),
      topHeight = document.getElementById('head').offsetHeight;

  subHead.style.top = (topHeight - document.body.scrollTop / 4) + 'px';
}; 
```

CSS

```
#head, #subHead{
    position: fixed;           
    height: 80px;    
    width: 100%;
    display: block;
    background: #c00;
    left: 0;
    top: 0;
    z-index: 10;
}

#subHead{
    z-index: 4;
    background: #cd0; 
    top: 80px;
}

#content{
    position: relative;
    z-index: 6;
    height: 1000px;
    background: #eee;
    margin-top: 160px;
} 
```

我尝试在谷歌上搜索一些跨浏览器技巧，但徒劳无功...有什么方法可以让它在 IE 中工作吗？非常感谢。

**编辑：**

目的：当用户滚动时，使 1 个 div 的移动速度比另一个慢。

逻辑：通过 css 固定 div 并通过 javascript [http://jsfiddle.net/MRbWY/11/更改其位置](http://jsfiddle.net/MRbWY/11/)

IE 中的错误。javascript 不起作用。因此 div 仅保持固定

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:36:30.823

document.body.scrollTop 总是读零，有点挖掘[这个问题](https://stackoverflow.com/questions/2717252/document-body-scrolltop-is-always-0-in-ie-even-when-scrolling)，你想`document.documentElement.scrollTop`用于 IE。

[更新了你的小提琴](http://jsfiddle.net/rh2Gb/1/)

# ios - 在iOS中单击UIButton时传递字符串值

> ID：15217380
> 
> 赞同：-1
> 
> 时间：2013-03-05T06:39:40.637
> 
> 标签：ios, objective-c, cocoa-touch, uibutton

我已经检查了许多文章，以了解在 ios 中单击 uibutton 时传递的值。但一般来说，人们使用标签属性作为替代。

但我找到了以下解决方案：

```
 UIButton *btnComLike=[[UIButton alloc] init];

 [btnComLike setFrame:CGRectMake(127, 20, 30, 15)];
 [btnComLike addTarget:self action:@selector(btnCommentLike_click:) forControlEvents:UIControlEventTouchUpInside];
 [btnComLike setTitle:@"Like" forState:UIControlStateNormal];
 [btnComLike setTitle:@"my any string value" forState:UIControlStateReserved]; 
```

和处理程序方面：

```
-(void)btnCommentLike_click:(id)sender
{
 NSLog(@"%@",[sender titleForState:UIControlStateReserved]);

} 
```

这是可行的解决方案吗？我认为一个是利用这种状态`UIControlStateReserved`。

或者使用这种技术有什么缺点吗？

如果是，请告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T06:45:05.003

对我来说，这个解决方案就像殴打 MVC 并滥用糟糕的按钮。

您只需将要在 action 方法中使用的对象写入 ivar（实例变量、成员变量）并在那里访问它。

您的解决方案也可能被认为是非法的，来自[文档](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006779-RH2-SW11)：

> `UIControlStateReserved`
> 保留供内部框架使用的控制状态标志。

# json - 如何使用 Play 2.1 和 Scala 将 CharSequence 序列化为 JSON

> ID：15217389
> 
> 赞同：1
> 
> 时间：2013-03-05T06:40:12.957
> 
> 标签：json, scala, serialization, playframework-2.1

我在序列化使用 CharSequence 而不是 String 的类时遇到问题。当我使用字符串时，一切正常。

我有以下课程：

```
case class Word(word: CharSequence,
            meanings: Traversable[CharSequence],
            readings: Traversable[CharSequence]) {
} 
```

当我尝试这样序列化它时：

```
...
val word = new Word("dog", List("Foo", "Goo"), List("Ba", "Fa"))
implicit val wordWrites = Json.writes[Word]
Ok(Json.toJson(word)).as(JSON) 
```

我收到以下错误：

```
error: exception during macro expansion:
scala.reflect.macros.TypecheckException: No implicit Writes for CharSequence, Traversable[CharSequence], Traversable[CharSequence] available.
at scala.reflect.macros.runtime.Typers$class.inferImplicit(Typers.scala:55)
at scala.reflect.macros.runtime.Typers$class.inferImplicitValue(Typers.scala:38)
at scala.reflect.macros.runtime.Context.inferImplicitValue(Context.scala:6)
at scala.reflect.macros.runtime.Context.inferImplicitValue(Context.scala:6)
at play.api.libs.json.JsMacroImpl$$anonfun$15.apply(JsMacroImpl.scala:332)
at play.api.libs.json.JsMacroImpl$$anonfun$15.apply(JsMacroImpl.scala:317)
at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)
at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244)
at scala.collection.immutable.List.foreach(List.scala:309)
at scala.collection.TraversableLike$class.map(TraversableLike.scala:244)
at scala.collection.AbstractTraversable.map(Traversable.scala:105)
at play.api.libs.json.JsMacroImpl$.writesImpl(JsMacroImpl.scala:317)
implicit val wordWrites = Json.writes[Word] 
```

我知道序列化框架的作者可能忘记支持 CharSequence。但是，如何给序列化程序一个合理的默认值，以便在所有 CharSequence 实例上调用 .toString() ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:23:24.323

您可以定义一个 CharSequence 格式：

```
implicit var csFormat = new Format[CharSequence] {
  def writes(c: CharSequence): JsValue = Json.toJson(c.toString)
  def reads(jv: JsValue): JsResult[String] = JsSuccess(Json.stringify(jv))
}

val word = new Word("dog", List("Foo", "Goo"), List("Ba", "Fa"))
implicit val wordWrites = Json.format[Word]
Ok(Json.toJson(word)).as(JSON) 
```

# iphone - 推送后如何更改所选单元格的背景颜色？

> ID：15217393
> 
> 赞同：0
> 
> 时间：2013-03-05T06:40:24.823
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我在其中使用 `cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"cell_gray_with_line.png"]];`. 但是，当我在 didselect 中选择之后执行此操作时，它不会在推动后将我的背景更改回之前的视图

```
if (indexPath != nil) {
    [tableView deselectRowAtIndexPath:indexPath animated:YES];    
} 
```

弹出回此视图控制器时，我需要与正常相同的背景，而无需重新加载表视图。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:47:25.613

您应该为您的`UITableViewCell`.

1.  背景视图
2.  选定的背景视图

此外，您应该设置`cell.selectionStyle`为`UITableViewCellSelectionStyleNone`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:52:29.103

如果 UITableViewControllers 的`clearsSelectionOnViewWillAppear`属性设置为 YES，将取消选择 viewWillAppear 上的选定行。如果您没有使用具有该设置的表视图控制器（我认为默认为 YES），请自己做：

```
- (void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];

    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

实现 did (或 will) 取消选择委托方法并修复您的颜色：

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    // do what you want to the cell
} 
```

顺便说一句，SO 上的其他人建议在单元格的内容视图上设置颜色（不是`cell.backgroundColor`，而是`cell.contentView.backgroundColor`），并在`willDisplayCell:forRowAtIndexPath:`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:50:55.263

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    //First you get the cell you want to change
    UITableViewCell* theCell = [tableView cellForRowAtIndexPath:indexPath];

    //Then you change the properties (label, text, color etc..) in your case, the background color
    theCell.contentView.backgroundColor=[UIColor redColor];

    //Deselect the cell so you can see the color change

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:50:38.263

这应该做，

```
- (void)viewDidAppear:(BOOL)animated
{
 [super viewDidAppear:animated];
 [self.tableView cellForRowAtIndexPath:[self.tableView indexPathForSelectedRow] ].backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"normal.png"]];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-03T09:43:36.873

与@dand 相同的答案，但稍作修改。

```
- (void) viewWillAppear: (BOOL) animated
{
    [super viewWillAppear: animated];

    NSIndexPath *indexPath = [self.tableview indexPathForSelectedRow];
    [self.tableview deselectRowAtIndexPath: indexPath animated: YES];
} 
```

并在您的自定义单元实现中修改此方法。

```
- (void) setSelected: (BOOL) selected animated: (BOOL) animated
{
    [super setSelected: selected animated: animated];
    // Configure the view for the selected state

    if (selected)
    {
        self.backgroundColor = [UIColor redColor];
    }
    else
    {
        self.backgroundColor = [UIColor clearColor];
    }
} 
```

# entity-framework-5 - Entity Framework 5 代码首先具有额外属性的自引用

> ID：15217394
> 
> 赞同：0
> 
> 时间：2013-03-05T06:40:29.250
> 
> 标签：entity-framework-5

嗨，我的问题是，当我运行 Add-Migration 时，我的数据库模型最终会像这样。FK 四次而不是两次。

```
CreateTable(
            "dbo.IntressentIntressent",
            c => new
                {
                    ParentIntressentId = c.Int(nullable: false),
                    ChildIntressentId = c.Int(nullable: false),
                    Aktieantal = c.Int(nullable: false),
                    Agare = c.Boolean(nullable: false),
                    Firmatecknare = c.Boolean(nullable: false),
                    Registreringsanmalan = c.Boolean(nullable: false),
                    FirmatecknareGeneralfullmakt = c.Boolean(nullable: false),
                    Revisor = c.Boolean(nullable: false),
                })
            .PrimaryKey(t => new { t.ParentIntressentId, t.ChildIntressentId })
            .ForeignKey("dbo.Intressent", t => t.ParentIntressentId)
            .ForeignKey("dbo.Intressent", t => t.ChildIntressentId)
            .ForeignKey("dbo.Intressent", t => t.ParentIntressentId)
            .ForeignKey("dbo.Intressent", t => t.ChildIntressentId)
            .Index(t => t.ParentIntressentId)
            .Index(t => t.ChildIntressentId)
            .Index(t => t.ParentIntressentId)
            .Index(t => t.ChildIntressentId); 
```

我的课是这样的。如果我在 onmodelCreating EF 中删除 fk 语句，将为我添加它。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {   
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();
        modelBuilder.Entity<Entity.IntressentIntressent>().HasKey(k => new
       {k.ParentIntressentId, k.ChildIntressentId });

       modelBuilder.Entity<Entity.Intressent>().HasMany(c => c.ParentIntressenter)
                   .WithRequired().HasForeignKey(cp => cp.ParentIntressentId);

       modelBuilder.Entity<Entity.Intressent>().HasMany(p => p.ChildIntressenter)
                   .WithRequired().HasForeignKey(cp => cp.ChildIntressentId);

   } 
```

实体看起来像这样

```
public class Intressent
{

    private ObservableCollection<IntressentIntressent> _parentIntressenter;
    public virtual ObservableCollection<IntressentIntressent> ParentIntressenter
    {
         get { return _parentIntressenter ?? (_parentIntressenter = new  
            ObservableCollection<IntressentIntressent>()); }
        set { _parentIntressenter = value; }
    }
}

public class IntressentIntressent
{
    [DisplayName("ParentIntressentId")]
    [Description("ParentIntressentId")]
    [Key, ForeignKey("ParentIntressent")]
    public int ParentIntressentId { get; set; }
    [DisplayName("ChildIntressentId")]
    [Description("ChildIntressentId")]
    [Key, ForeignKey("ChildIntressent")]
    public int ChildIntressentId { get; set; }

    [ForeignKey("ParentIntressent")]
    public Intressent ParentIntressent { get; set; }
    [ForeignKey("ChildIntressent")]
    public Intressent ChildIntressent { get; set; }

    [Required]
    [DisplayName("Aktieantal")]
    [Description("Aktieantal")]
    public int Aktieantal { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:36:33.147

您已经复制了关系。您`IntressentIntressent`已经使用数据注释来定义导航属性及其相关的外键。然后，您为`Intressent`类定义了流畅的映射，但该映射并未反映关系另一侧的那些数据注释。这导致定义关系两次。用这个替换流利的映射：

```
 modelBuilder.Entity<Entity.Intressent>()
               .HasMany(c => c.ParentIntressenter)
               .WithRequired(i => i.ParentInterssenter)
               .HasForeignKey(cp => cp.ParnetIntressentId);

   modelBuilder.Entity<Entity.Intressent>()
               .HasMany(p => p.ChildIntressenter)
               .WithRequired(i => i.ChildIntressent)
               .HasForeignKey(cp => cp.ChildIntressentId); 
```

通过定义相反，`WithRequired`您将这些导航属性与单个关系配对。

# ios - 可以在模拟器上从 PassBook 检索通行证，但在 iOS 设备上不行

> ID：15217395
> 
> 赞同：2
> 
> 时间：2013-03-05T06:40:30.613
> 
> 标签：ios, passbook

我遇到了一个我无法解决的问题。我们有一个可以存储卡片的应用程序，这些卡片可以添加到 iOS 上的存折中。我们对此没有任何问题。但是，当我们需要更新存折中的卡时，我们无法从存折中检索卡 - 我们总是返回 nil。但是在模拟器上它总是有效的。

这就是我打电话的方式

```
_passLib = [[PKPassLibrary alloc] init];
NSString* serialId = [[NSString alloc] initWithFormat:@"%@", card.serialId];
PKPass *oldPass = [_passLib passWithPassTypeIdentifier:@"pass.com.mydomain.iphone.Product" serialNumber:serialId]; 
```

标识符和序列号 100% 正确。添加卡时，我输出这些值以仔细检查它们是否与上述相同。有没有人有这个或有一些想法可以帮助我解决这个问题？非常感谢

**编辑 1** 只是添加。如果我尝试再次添加通行证 - PKAddPassesViewController 会显示新通行证，但“添加”按钮是灰色的，因为我们已经添加了通行证。所以它就像它知道它在那里，但是方法 containsPass 和 passWithPassTypeIdentifier 都失败了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:39:44.863

好的，终于想通了。我需要在开发中心配置我的 App Id 并启用“通过”。然后我必须生成一个新的配置文件并使用它。

# lua - 电晕，transition.to 从桌子上移除后

> ID：15217401
> 
> 赞同：0
> 
> 时间：2013-03-05T06:41:23.103
> 
> 标签：lua, coronasdk, lua-table

使用 Corona，当我从表中删除对象时，我想移动它。问题是我在每一帧上迭代表格。当 x > WIDTH - 50 时，我希望猴子停止以正弦波形式移动并跳入 removeMonkeys 函数。

我的代码：

```
local function removeMonkeys(obj)
    transition.to(obj, {time = 1500, y = 2*HEIGHT/3, onComplete = obj:removeSelf()})
    numMonkeys = numMonkeys - 1;
end   
function startGame() 
    timer.performWithDelay(500, spawn, maxNumMonkeys)
    local function onEveryFrame( event )
    for i = 1, #monkeySet do
        if(monkeySet[i] ~= nil) then 
            monkeySet[i].x = monkeySet[i].x + 2
            monkeySet[i].y = monkeySet[i].y + math.sin(monkeySet[i].x/monkeySpeed)*Amplitude/5
            if(monkeySet[i].x > WIDTH -50) then
                removeMonkeys(monkeySet[i])
                table.remove(monkeySet, i)
                print(#monkeySet)
            end
        end
    end
end 
Runtime:addEventListener( "enterFrame", onEveryFrame ) 
```

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:46:56.723

不确定您在这里到底要问什么，但是如果您的 transition.to 不起作用，请检查您是否在这样做时杀死了对 monkeySet[i] 的唯一引用

```
table.remove(monkeySet, i) 
```

# c# - 在互操作方法中为“ref struct”参数传递“null”引用

> ID：15217406
> 
> 赞同：6
> 
> 时间：2013-03-05T06:41:59.900
> 
> 标签：c#, null, interop, parameter-passing, value-type

我正在使用 C# 调用 DLL 函数。

```
[DllImport("MyDLL.dll", SetLastError = true)]
public static extern uint GetValue(
        pHandle handle,
        ref somestruct a,
        ref somestruct b); 
```

如何传递`null`参数 3 的引用？

当我尝试时，我收到一个编译时错误：

> *无法将 from 转换`<null>`为 ref somestruct。*

我也试过了`IntPtr.Zero`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T06:58:34.163

你有两个选择：

1.  `somestruct`创建一个类，并将函数签名更改为：

    ```
    [DllImport("MyDLL.dll", SetLastError = true)]
    public static extern uint GetValue(
        pHandle handle, somestruct a, somestruct b); 
    ```

    通常这不能改变任何其他东西，除了你可以传递 a`null`作为`a`and的值`b`。

2.  为函数添加另一个重载，如下所示：

    ```
    [DllImport("MyDLL.dll", SetLastError = true)]
    public static extern uint GetValue(
        pHandle handle, IntPtr a, IntPtr b); 
    ```

    现在您可以使用 调用函数`IntPtr.Zero`，除了 a`ref`类型的对象`somestruct`：

    ```
    GetValue(myHandle, ref myStruct1, ref myStruct2);
    GetValue(myHandle, IntPtr.Zero, IntPtr.Zero); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-17T21:36:58.503

[这个答案](https://stackoverflow.com/a/15217647/240733)建议`SomeStruct`上课。我想展示一个看起来很好用的想法的实现......即使你无法更改的定义`SomeStruct`（例如当它是预定义的类型时`System.Guid`；另请参阅[这个答案](https://stackoverflow.com/a/1910988/240733)）。

1.  定义一个通用包装类：

    ```
    [StructLayout(LayoutKind.Explicit)]
    public sealed class SomeStructRef
    {
        [FieldOffset(0)]
        private SomeStruct value;

        public static implicit operator SomeStructRef(SomeStruct value)
        {
            return new SomeStructRef { value = value };
        }
    } 
    ```

    这里的基本思想与[拳击](https://msdn.microsoft.com/en-us/library/yz2be5wk.aspx "MSDN 参考文章“装箱和拆箱”")相同。

2.  将您的互操作方法定义更改为以下内容：

    ```
    [DllImport("MyDLL.dll", SetLastError = true)]
    public static extern uint GetValue(
        pHandle handle,
        ref SomeStruct a,
        [MarshalAs(UnmanagedType.LPStruct)] SomeStructRef b); 
    ```

然后第三个参数`b`将是“可空的”。由于`SomeStructRef`是引用类型，因此可以传递`null`引用。您还可以传递一个`SomeStruct`值，因为存在隐式转换运算符 from `SomeStruct`to `SomeStructRef`。并且（至少在理论上），由于`[StructLayout]`/`[FieldOffset]`编组指令，任何实例都`SomeStructRef`应该像`SomeStruct`.

如果互操作专家能够验证这种技术的合理性，我会很高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T22:10:47.950

另一个明显的解决方案是诉诸`unsafe`代码并将互操作方法声明更改为：

```
[DllImport("MyDLL.dll", SetLastError = true)]
unsafe public static extern uint GetValue(
        pHandle handle,
        ref somestruct a,
        somestruct* b); 
```

请注意，该方法现在已标记`unsafe`，并且参数已从 更改`ref somestruct`为`somestruct*`。

这具有以下含义：

*   该方法只能从`unsafe`上下文内部调用。例如：

    ```
    somestruct s;
    unsafe { GetValue(…, …, &s);   }  // pass a struct `s`
    unsafe { GetValue(…, …, null); }  // pass null reference 
    ```

*   为了使上述工作有效，`unsafe`项目必须允许代码（在项目设置中或通过`/unsafe`命令行编译器开关）。

*   使用`unsafe`会导致无法验证的 IL 代码。IIRC，这意味着加载此程序集将需要完全信任（在某些情况下可能会出现问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-16T18:12:56.293

由于 .NET 5.0 有[System.CompilerServices.Unsafe.NullRef<T>()](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.unsafe.nullref?view=net-5.0#System_Runtime_CompilerServices_Unsafe_NullRef__1)

```
GetValue(myHandle, ref myStruct1, ref myStruct2);
GetValue(myHandle, ref Unsafe.NullRef<somestruct>(), ref Unsafe.NullRef<somestruct>()); 
```

# matlab - svmtrain 接受复数，而 svmclassify 不接受复数

> ID：15217410
> 
> 赞同：1
> 
> 时间：2013-03-05T06:42:15.707
> 
> 标签：matlab, image-processing, classification, svm, complex-numbers

matalb 中的 svmtrain 函数接受复数进行训练。

但是 svmclassify 函数不接受复数。它是说，

> 下标索引必须是实数正整数或逻辑数。

当我将 svmtrain 函数与整个复数一起使用时，支持向量最小（106 个值中的 7 个）。

当我通过将复数分成两部分来使用 svmtrain 函数时，支持向量很多（106 个值中有 72 个）。真实（a）和想象（a）

如果我使用整个复数，分类率会更高。

但是 svmclassify 函数不适用于复数？

# java - JUnit 中的错误和失败有什么区别？

> ID：15217411
> 
> 赞同：8
> 
> 时间：2013-03-05T06:42:22.693
> 
> 标签：java, unit-testing, junit

我正在学习使用 JUnit。

我的一些测试出现了“错误”，一些出现了“失败”。两者有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T06:43:39.773

**错误**是当某些东西中断并发生异常时，例如 Null 对象引用。

不符合测试标准是**失败**的。即`Assert()`失败时。

[这是一般情况，不仅仅是junit。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T06:44:17.877

简单来说，

**错误**- 意味着在您的测试运行时，有一些未处理/不可预见的异常，因此，您的测试用例基本上在没有完全执行的情况下崩溃。

**失败**- 表示您的测试成功完成，但您的测试标准的测试条件失败（不是您预期的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T06:44:30.640

**失败**是当您的一个断言失败时——也就是说，您的程序做错了什么，而您的 JUnit 测试注意到并报告了这一事实。

**错误**是发生了其他一些异常——您没有测试过并且没有预料到的异常，例如 NullPointerException 或 ArrayIndexOutOfBoundsException。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T06:44:37.910

**失败**- 当测试用例失败时（您断言的条件不成功）

**错误**- 执行测试用例时出现意外情况或错误

# javascript - 如何使用 Jquery 获取 ID？

> ID：15217421
> 
> 赞同：0
> 
> 时间：2013-03-05T06:42:49.150
> 
> 标签：javascript, jquery, html, jquery-ui, youtube-api

下面是 Html 结构。现在我想在单击或使用 Jquery时获取 Div ID `Inner_1_0`、`Inner_1_1`、`Inner_1_2`、`Inner_1_3`等。那我应该怎么找回。`nextButton``prevButton`

更多我给了演示链接..请看演示

```
<div id="Inner_1_0" class="slideItem" style="width: 600px; height: 440px; top: 0px; right: 165px; opacity: 1; z-index: 17; display: block;">
    <a href="#" onclick="loadVideo(&quot;x_elT6zkqN0&quot;);" title="" oh="" jane="" jaana"="" salman="" khan="" full="" song="" |="" pyaar="" kiya="" toh="" darna="" kya"=""><img src="http://img.youtube.com/vi/x_elT6zkqN0/hqdefault.jpg" width="213px" height="141px" style="width: 600px; height: 400px;"></a>
    <div class="shadow" style="width: 600px; z-index: -1; position: absolute; margin: 0px; padding: 0px; border: none; overflow: hidden; left: 0px; bottom: 0px;">
        <div class="shadowLeft" style="position: relative; float: left;"></div>
        <div class="shadowMiddle" style="position: relative; float: left; width: 400px;"></div>
        <div class="shadowRight" style="position: relative; float: left;"></div>
    </div>
</div>
<div id="Inner_1_1" class="slideItem" style="width: 600px; height: 440px; top: 0px; right: 165px; opacity: 1; z-index: 17; display: block;">
    <a href="#" onclick="loadVideo(&quot;x_elT6zkqN0&quot;);" title="" oh="" jane="" jaana"="" salman="" khan="" full="" song="" |="" pyaar="" kiya="" toh="" darna="" kya"=""><img src="http://img.youtube.com/vi/x_elT6zkqN0/hqdefault.jpg" width="213px" height="141px" style="width: 600px; height: 400px;"></a>
    <div class="shadow" style="width: 600px; z-index: -1; position: absolute; margin: 0px; padding: 0px; border: none; overflow: hidden; left: 0px; bottom: 0px;">
        <div class="shadowLeft" style="position: relative; float: left;"></div>
        <div class="shadowMiddle" style="position: relative; float: left; width: 400px;"></div>
        <div class="shadowRight" style="position: relative; float: left;"></div>
    </div>
</div>
<div id="Inner_1_2" class="slideItem" style="width: 600px; height: 440px; top: 0px; right: 165px; opacity: 1; z-index: 17; display: block;">
    <a href="#" onclick="loadVideo(&quot;x_elT6zkqN0&quot;);" title="" oh="" jane="" jaana"="" salman="" khan="" full="" song="" |="" pyaar="" kiya="" toh="" darna="" kya"=""><img src="http://img.youtube.com/vi/x_elT6zkqN0/hqdefault.jpg" width="213px" height="141px" style="width: 600px; height: 400px;"></a>
    <div class="shadow" style="width: 600px; z-index: -1; position: absolute; margin: 0px; padding: 0px; border: none; overflow: hidden; left: 0px; bottom: 0px;">
        <div class="shadowLeft" style="position: relative; float: left;"></div>
        <div class="shadowMiddle" style="position: relative; float: left; width: 400px;"></div>
        <div class="shadowRight" style="position: relative; float: left;"></div>
    </div>
</div>
<div id="Inner_1_3" class="slideItem" style="width: 600px; height: 440px; top: 0px; right: 165px; opacity: 1; z-index: 17; display: block;">
    <a href="#" onclick="loadVideo(&quot;x_elT6zkqN0&quot;);" title="" oh="" jane="" jaana"="" salman="" khan="" full="" song="" |="" pyaar="" kiya="" toh="" darna="" kya"=""><img src="http://img.youtube.com/vi/x_elT6zkqN0/hqdefault.jpg" width="213px" height="141px" style="width: 600px; height: 400px;"></a>
    <div class="shadow" style="width: 600px; z-index: -1; position: absolute; margin: 0px; padding: 0px; border: none; overflow: hidden; left: 0px; bottom: 0px;">
        <div class="shadowLeft" style="position: relative; float: left;"></div>
        <div class="shadowMiddle" style="position: relative; float: left; width: 400px;"></div>
        <div class="shadowRight" style="position: relative; float: left;"></div>
    </div>
</div>

<div class="nextButton"></div>
<div class="prevButton"></div> 
```

[**演示链接。**](http://jsfiddle.net/rushijogle/4HSpH/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:03:37.293

如果您能够获取当前选定的项目，那么我们可以通过以下代码获取下一个和上一个项目

```
//For Next 
          var nextdivId = $(selectedItem).next().attr("id");
//For Prev
          var prevdivId = $(selectedItem).prev().attr("id"); 
```

如果你有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:11:54.870

您可以使用`after`轮播的功能，例如：

```
$('.carousel').carousel({
    carouselWidth: 930,
    carouselHeight: 330,
    directionNav: true,
    shadow: true,
    buttonNav: 'bullets',
    after: function(obj) {
       alert( $("div.slideItem").eq(obj.current).attr("id") );
    }
}); 
```

更新了小提琴[演示](http://jsfiddle.net/4HSpH/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T07:14:03.453

看起来你应该为此使用轮播回调函数（之前/之后）。

```
before: function (carousel) { alert(carousel.current)}, 
```

检查下面的jsfiddle。

[http://jsfiddle.net/4HSpH/10/](http://jsfiddle.net/4HSpH/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:53:56.263

这会设置一个计数器并在按下按钮时提醒幻灯片的 ID：

```
var current_slide = 0;
$(".nextButton").click(function() {
    alert($(".slideItem")[current_slide].id;
    current_slide++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T06:57:50.483

那么你可以使用

```
var ids = $("#container").children().map(function(n, i) {
  return n.id;
}); 
```

或每个（）：

```
var ids = $("#container").children().each(function(n, i) {
  var id = this.id;
  //your code
}); 
```

这里'容器是承载所有这些 div 的 div

# java - java中的螺旋数模式

> ID：15217426
> 
> 赞同：-7
> 
> 时间：2013-03-05T06:42:58.840
> 
> 标签：java

我需要根据用户输入的数字在 java 中创建这些模式：如果用户输入 3，则如下所示：

```
1  2  3   ------------>
8  9  4   |------->   |
7  6  5   <-----------| 
```

如果用户输入 4：

```
 1   2   3  4
12  13  14  5
11  16  15  6
10   9   8  7 
```

如果用户输入 5：

```
 1   2   3   4  5
16  17  18  19  6
15  24  25  20  7
14  23  22  21  8
13  12  11  10  9 
```

等等..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:29:12.333

最后我找到了解决方案。像这样

```
//you can change Input No Here.
    int INPUT = 5;

    //statics for direction type 
    final int LEFT = 1;
    final int DOWN = 2;
    final int RIGHT = 3;
    final int UP = 4;

    //Grid Array
    int[][] patt = new int[INPUT][INPUT];

    //initial position 
    int x = 0;
    int y = 0;

    //initial direction
    int Direction = LEFT;

    //Master Loop
    for (int i = 0; i < INPUT * INPUT; i++) {

        int temp = i + 1;

        //Checking boundaries
        if (y > INPUT - 1) {
            Direction = DOWN;
            x++;
            y--;
            i--;
            continue;
        } else if (x > INPUT - 1) {
            Direction = RIGHT;
            x--;
            y--;
            i--;
            continue;
        } else if (y < 0) {
            Direction = UP;
            y++;
            x--;
            i--;
            continue;
        }else if (x < 0) {
            Direction = LEFT;
            y++;
            x++;
            i--;
            continue;
        }

        if (patt[x][y] == 0) {
            patt[x][y] = temp;
        } else {
            if (Direction == LEFT) {
                Direction = DOWN;
                y--;
            } else if (Direction == DOWN) {
                Direction = RIGHT;
                x--;
            } else if (Direction == RIGHT) {
                Direction = UP;
                y++;
            } else {
                Direction = LEFT;
                x++;
            }
            i--;
        }

        switch (Direction) {
        case LEFT:
            y++;
            break;
        case DOWN:
            x++;
            break;
        case RIGHT:
            y--;
            break;
        case UP:
            x--;
            break;
        }
    }// Master Loop Ends

    // Print Grid Array
    for (int i = 0; i < INPUT; i++) {
        for (int k = 0; k < INPUT; k++)
            if (patt[i][k] <= 9)
                System.out.print(" "+patt[i][k] + " ");
            else
                System.out.print(patt[i][k] + " ");
        System.out.println();
    } 
```

我从@lakshman 的建议中得到了很好的提示。感谢@lakshman。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:59:43.787

您可能会研究的一个方向：

首先创建一个空的二维数组来存储结果

我可以观察到的模式是，例如填充一个维度为5的表格，从左上角开始，向右填充5个数字，然后顺时针改变方向，填充4个数字，然后顺时针改变方向，填充4个数字，改变方向, 填充 3, 改变方向填充 3....

“要填充的位数”具有 n、n-1、n-1、n-2、n-2 ..... 1、1 的模式

（我相信还有其他更容易的模式，但我不认为这很难实现）

另一种方法是，类似于我上面所做的：保留一个变量来表示方向，从左上角开始，继续填充数字，直到你点击 1）边界或 2）一个已经用数字填充的数组条目。然后顺时针转动你的方向。重复直到填满所有数字。

# c# - 如何解决类值初始化每个回发

> ID：15217431
> 
> 赞同：0
> 
> 时间：2013-03-05T06:43:30.343
> 
> 标签：c#, asp.net, postback, webforms

我正在尝试将计算器编写为网站，

我在课堂上设置了 2 个变量来存储数字，

但每次我点击“+”或“-”按钮时，

变量回到初始状态。

这是我的代码：

```
public partial class _Default : System.Web.UI.Page
{
    int choice = 0;
    Boolean caluOrNot = false;
    double before, after;

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Btn1_Click(object sender, EventArgs e)
    {
        if (this.caluOrNot == false)
        {
            if (txtResult.Text.ToString() == "0")
            {
                txtResult.Text = "1";
            }
            else
            {
                txtResult.Text += "1";
            }
        }
        else
        {
            txtResult.Text = "1";
        }
    }

    protected void Btn2_Click(object sender, EventArgs e)  
    protected void Btn3_Click(object sender, EventArgs e)
    protected void Btn4_Click(object sender, EventArgs e)
    protected void Btn5_Click(object sender, EventArgs e)
    protected void Btn6_Click(object sender, EventArgs e)
    protected void Btn7_Click(object sender, EventArgs e)    
    protected void Btn8_Click(object sender, EventArgs e)
    protected void Btn9_Click(object sender, EventArgs e)
    protected void Btn0_Click(object sender, EventArgs e)

    protected void BtnPoint_Click(object sender, EventArgs e)
    {
        txtResult.Text += ".";
    }

    protected void BtnJia_Click(object sender, EventArgs e)
    {
        this.choice = 1;
        this.caluOrNot = true;
        before = Double.Parse(txtResult.Text.ToString());
        txtCalu.Text = before.ToString() + "+";

    }

    protected void BtnJen_Click(object sender, EventArgs e)
    protected void BtnCheng_Click(object sender, EventArgs e)
    protected void BtnChu_Click(object sender, EventArgs e)

    protected void btnClear_Click(object sender, EventArgs e)
    {
        txtResult.Text = "0";
        this.choice = 0;
    }

    protected void btnGo_Click(object sender, EventArgs e)
    {
        double a;
        switch (this.choice)
        {
            case 1:
                a = before + after;
                txtResult.Text = a.ToString();
                break;
            case 2:
                a = before - after;
                txtResult.Text = a.ToString();
                break;
            case 3:
                a = before * after;
                txtResult.Text = a.ToString();
                break;
            case 4:
                a = before / after;
                txtResult.Text = a.ToString();
                break;
            default:
                break;
        }

    }
} 
```

作为代码，每次点击`btnJia`都会触发 onclick 方法`BtnJia_Click`

选择将设置为“1”并设置为 true，但值会在完成`caculOrNot`时变回 0 和 false 。`BtnJia_Click`

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:59:24.340

在 ASP.NET 中，当您单击 BtnJia_Click 时，一切都从头开始。因此，您需要在会话中存储*caculOrNot*和*选择*的值，并在需要时从会话中读取它们。这是一个例子：

```
protected void BtnJia_Click(object sender, EventArgs e)
{
    this.choice = 1;
    this.caluOrNot = true;
    before = Double.Parse(txtResult.Text.ToString());
    txtCalu.Text = before.ToString() + "+";

    //Store them in Session
    Session["choice"] = this.choice;
    Session["caluOrNot"] = this.caluOrNot;
}

protected void btnGo_Click(object sender, EventArgs e)
{
    // Read them from Session when you need
    if(Session["choice"] != null)
    {
        this.choice = Convert.ToInt32(Session["choice"]);
    }

    double a;
    switch (this.choice)
    {
        case 1:
            a = before + after;
            txtResult.Text = a.ToString();
            break;
        case 2:
            a = before - after;
            txtResult.Text = a.ToString();
            break;
        case 3:
            a = before * after;
            txtResult.Text = a.ToString();
            break;
        case 4:
            a = before / after;
            txtResult.Text = a.ToString();
            break;
        default:

            break;
    }

    }
} 
```

[在此处](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)阅读有关会话状态的更多信息。

# xpath - 如何使用 xpath 验证多个值或存储一个值

> ID：15217433
> 
> 赞同：0
> 
> 时间：2013-03-05T06:43:33.323
> 
> 标签：xpath

我的 xpath 表达式如下：

```
//ep:getSwitchListResponse[1]/result[1]/item[position() >1 and position() <= last()]/ipAddress[1]/text() 
```

我想获取的值`position()`并用它来验证 name 。就像是

```
//ep:getSwitchListResponse[1]/result[1]/**item[Position()FromPreviousQuery**)]/name[1]/text() 
```

这可以在一个 xpath 表达式中同时完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:39:37.083

除非您将第一个 XPath 的位置存储在本地某处，否则如果您想重用相同的位置，则必须再次调用 xpath，XPath 不会存储以前遍历的任何内容。

前任）

你的第一个 xpath：

```
//ep:getSwitchListResponse[1]/result[1]/item[position() >1 and position() <= last()]/ipAddress[1]/text() 
```

它的位置：

```
count(//ep:getSwitchListResponse[1]/result[1]/item[position() >1 and position() <= last()]/ipAddress[1]/preceding-sibling::*) 
```

XPath 插入第二个的位置：

```
//ep:getSwitchListResponse[1]/result[1]/**item[count(//ep:getSwitchListResponse[1]/result[1]/item[position() >1 and position() <= last()]/ipAddress[1]/preceding-sibling::*)]/name[1]/text() 
```

# javascript - Javascript 日期数组

> ID：15217434
> 
> 赞同：0
> 
> 时间：2013-03-05T06:43:39.447
> 
> 标签：javascript, arrays

Javascript函数有一些问题。这是我的代码：

```
function date(){
  var d = new Date();
  var day = d.getDay();
  var month = d.getMonth() + 1;
  var date = d.getDate();
  var year = d.getFullYear();
  var days = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");

  document.getElementById("footer").innerHTML = day[days] + " " + month + "/" + date + "/" +  year;
} 
```

此函数返回“undefined 3/5/2013”​​，但应该返回“Tuesday 3/5/2013”​​。我的逻辑有错误吗？谁能帮我找出我的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:46:17.487

你的代码应该是

document.getElementById("footer").innerHTML = days[day] + " " + month + "/" + date + "/" + year;

`days`是数组，其中`day`是星期几变量，你交换了这两个变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:46:21.837

`days`是数组而不是`day`。你在打电话`day[days]`。它应该是`days[day]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T06:46:47.870

使用此代码

```
document.getElementById("footer").innerHTML =days[day] + " " + month + "/" + date + "/" +  year; 
```

你误用了

```
day[days] 
```

代替

```
days[day]

var day = d.getDay(); 
```

此方法将返回您必须在 days[] 数组中用作索引的日期的整数值，例如 days[d.getDay()] 并且您正在执行 d.getDay()[days] 这是不正确的

# android - 来自 imageurl 的图像视图图像给出异常

> ID：15217436
> 
> 赞同：0
> 
> 时间：2013-03-05T06:43:42.877
> 
> 标签：android, bitmap, imageurl

我正在使用 image-URL 来表示 imageView 中的图像，但我的 android 应用程序抛出了以下异常。我正在使用异步任务来获取图像 URL 并将其放在 onpostexecute() 方法中的 imageview 中。

**我的代码**

```
protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            ImageView i=(ImageView)findViewById(R.id.imageView1);
            Bitmap bitmap;
            Drawable d;
            try {
                bitmap = BitmapFactory.decodeStream((InputStream)new URL(logo.get(0)).getContent());
                 i.setImageBitmap(bitmap); 

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

**logcat 异常**

```
03-05 06:34:25.148: E/AndroidRuntime(1653): FATAL EXCEPTION: main
03-05 06:34:25.148: E/AndroidRuntime(1653): android.os.NetworkOnMainThreadException
03-05 06:34:25.148: E/AndroidRuntime(1653):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:81)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at java.net.URLConnection.getContent(URLConnection.java:190)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at java.net.URL.getContent(URL.java:447)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at com.example.slideoutmenu.LayerStack$logo.onPostExecute(LayerStack.java:249)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at com.example.slideoutmenu.LayerStack$logo.onPostExecute(LayerStack.java:1)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at android.os.AsyncTask.finish(AsyncTask.java:631)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at android.os.Looper.loop(Looper.java:137)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at java.lang.reflect.Method.invokeNative(Native Method)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at java.lang.reflect.Method.invoke(Method.java:511)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-05 06:34:25.148: E/AndroidRuntime(1653):     at dalvik.system.NativeStart.main(Native Method) 
```

我如何显示来自 imageurl 的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:47:40.947

`onPostExecute()`方法在 UI 线程上运行。您应该将以下行移至该`doInBackground()`方法。

`bitmap = BitmapFactory.decodeStream((InputStream)new URL(logo.get(0)).getContent());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:00:10.493

尝试以下可有效用于网络任务的代码。

```
class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {
    private final WeakReference<ImageView> imageViewReference;
    private String data;

    public BitmapWorkerTask(ImageView imageView) {
        // Use a WeakReference to ensure the ImageView can be garbage
        // collected
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    // Decode image in background.
    @Override
    protected Bitmap doInBackground(String... params) {
        data = params[0];
        try {
            return BitmapFactory.decodeStream((InputStream) new URL(data)
                    .getContent());
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    // Once complete, see if ImageView is still around and set bitmap.
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (imageViewReference != null && bitmap != null) {
            final ImageView imageView = imageViewReference.get();
            if (imageView != null) {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
} 
```

要使用该类，请使用以下语句。

```
ImageView img = (ImageView) findViewById(R.id.imageView1);
BitmapWorkerTask task = new BitmapWorkerTask(img);
task.execute("your image url"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:44:33.770

> NetworkOnMainThreadException。

您正在对`onPostExecute()`在主线程上运行的此方法进行网络操作。[在这里](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)阅读。

用这个方法做这个网络操作`doInBackground()`。

# c# - 在后面的代码中读取标签值

> ID：15217437
> 
> 赞同：1
> 
> 时间：2013-03-05T06:43:44.813
> 
> 标签：c#, asp.net

我正在使用以下代码使用 javascript 分配标签文本。它运作良好。但我无法阅读后面代码中的标签文本。请帮我解决这个问题。

```
Javascript:
==========

var lbl_total = document.getElementById('<%= lbl_total.ClientID %>');
lbl_total.innerHTML = '500';

c# code behid :
===============

string total = lbl_total.Text; //It always return ""; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:50:42.473

标签的客户端更改不会反映在服务器端，因为它的数据没有发布到服务器。因此解决方案是采用输入隐藏控件并使用标签的更新值设置其值。下面是示例代码：

```
 <script type="text/javascript">
        $(document).ready(function() {
            var total = 0;
            $('#Button1').click(function() {
                total += 150;
                $("span[id$=lbl_TotalCount]").html(total);
                $("input:hidden[id$=MyHidden]").val(total);
            });
        });                
    </script> 
```

html

```
<form id="form1" runat="server">
    <div>
        <input id="Button1" type="button" value="button" />
        <asp:Button ID="btn_saveForm" runat="server" Text="save" CssClass="btnForm" OnClick="btn_saveForm_Click" />
        <asp:Label ID="lbl_TotalCount" Style="color: #00e4ff; font-family: Arial; font-weight: bold;
            text-decoration: underline" runat="server" Text="0">
        </asp:Label>
        <asp:HiddenField ID="MyHidden" runat="server" />
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </div>
    </form> 
```

完整文章：[**在通过 JavaScript/jQuery 更改文本的代码中获取标签值**](http://codeasp.net/blogs/raghav_khunger/microsoft-net/1287/get-label-value-in-code-behind-whose-text-is-changed-via-javascript-jquery)

# java - 在 Java 中计算 Map 中键的出现次数

> ID：15217438
> 
> 赞同：6
> 
> 时间：2013-03-05T06:43:45.990
> 
> 标签：java, dictionary, hashmap

我正在编写一个项目，该项目从 .java 文件中捕获 Java 关键字并使用地图跟踪出现的情况。我过去成功地使用过类似的方法，但我似乎无法将这种方法用于我的预期用途。

```
 Map<String,Integer> map = new TreeMap<String,Integer>();
    Set<String> keywordSet = new HashSet<String>(Arrays.asList(keywords));
    Scanner input = new Scanner(file);
    int counter = 0;
    while (input.hasNext())
    {
        String key = input.next();
        if (key.length() > 0)
        {
            if (keywordSet.contains(key))
            {
                map.put(key, 1);
                counter++;
            }

                if(map.containsKey(key)) <--tried inner loop here, failed
                {
                    int value = map.get(key);
                    value++;
                    map.put(key, value);
                }

        } 
```

这段代码应该将关键字添加到键中，并在每次出现相同键时递增值。到目前为止，它添加了关键字，但未能正确增加值。这是一个示例输出：

```
{assert=2, class=2, continue=2, default=2, else=2, ...} 
```

基本上它会增加地图中的每个值，而不是它应该增加的值。我不确定我是在想这个还是什么。我尝试了一个内部循环，它给了我疯狂的结果。我真的希望我只是想多了。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T06:49:48.293

有一种更简洁（也更容易推理）的方式来实现你想要的：

```
final ConcurrentMap<String, AtomicInteger> map = new ConcurrentHashMap<>();
final Scanner input = new Scanner(file);
while (input.hasNext()) {
  final String key = input.next();
  if (key.length() > 0) {
    map.putIfAbsent(key, new AtomicInteger(0));
    map.get(key).incrementAndGet();
  }
} 
```

让我们分析一下为什么会这样。

每当`Scanner`遇到关键字时，有两种可能的情况：您以前遇到过（即，它是*已知关键字*），或者它是尚未*见过的关键字*。

*   如果它是一个**看不见的关键字**：[`putIfAbsent`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#putIfAbsent(K,V))将在地图中放置一个[`AtomicInteger`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html)值为 0 的值，然后`incrementAndGet()`将其设置为 1，从现在开始，它成为一个*已知的关键字*；
*   如果它是一个**已知的关键字**:`putIfAbsent`将什么都不做，并且[`incrementAndGet()`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet())会增加地图中已经存在的值。

然后，如果您想要密钥集，请执行以下操作：

```
final Set<String> keys = map.keySet(); 
```

要打印所有值，您可以执行以下操作：

```
for (final String k : map.keySet()) {
  System.out.println(k + ": " + map.get(k).get());
} 
```

您不会被迫使用我在上面使用的两个“不同”类，[`ConcurrentMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html)并且`AtomicInteger`. 使用它们更容易，因为它们封装了您尝试自己编写的大部分逻辑（但失败了）。他们封装的逻辑正是所有其他答案所描述的（即，测试该值是否存在，如果不将其设置为 0，则获取存在的任何值，将其递增并将其放回地图中）。

要按字母顺序维护地图的键（我们的单词被计算在内），请使用[`ConcurrentNavigableMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentNavigableMap.html)诸如[`ConcurrentSkipListMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentSkipListMap.html) .

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T06:50:37.173

对于您扫描的每个键，您都会在地图中创建一个新条目（覆盖现有条目）。然后，下一个条件成立，因此您将计数增加 1，达到值 2。

内部应该是这样的：

```
 if (keywordSet.contains(key))
        {
            Integer value = map.get(key);
            if (value == null)
                value = 0;
            value++;
            map.put(key, value);
        } 
```

无论如何，考虑使用某种可变整数来提高效率。您不必覆盖地图中的条目，也不会执行太多整数装箱操作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-07T09:34:21.027

使用更简洁[`Map.merge`](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-)（从 Java 8 开始）：

```
if (keywordSet.contains(key)) {
    map.merge(key, 1, (currentCount, notUsed) -> ++currentCount);
} 
```

这是**计数映射**的通用实现- 一个映射，其值表示其键的计数：

```
public static <K> void count(K key, Map<K, Integer> map) {
    map.merge(key, 1, (currentCount, notUsed) -> ++currentCount);
}

public static void main(String[] args) {
    Map<String, Integer> map = new HashMap<>();
    count("A", map);
    count("B", map);
    count("A", map);
    count("Z", map);
    count("A", map);
    System.out.println(map); // {A=3, B=1, Z=1}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T06:51:03.593

您总是将值设置为 1，然后将其更新为另一个值。您需要更新地图值（而不是再次将其设置为 1）。

代替：

```
map.put(key, 1); 
```

利用：

```
Integer value = map.get(key);
if (value == null){
    value = 0
}
value++;
map.put(key, value); 
```

并放弃第二个如果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T06:56:37.987

```
Map<String, Integer> map = new HashMap<String, Integer>();
Set<String> keywordSet = new HashSet<String>(Arrays.asList(keywords));
Scanner input = new Scanner(file);

while (input.hasNext()){
     String key = input.next();
     if (key.length() > 0)
        if (keywordSet.contains(key)){
           Integer counter = map.get(key);

           if (counter == null)
               map.put(key, 1);
           else
               map.put(key, count + 1);
         }
} 
```

# task - JavaFX - 等待任务完成

> ID：15217442
> 
> 赞同：9
> 
> 时间：2013-03-05T06:44:00.917
> 
> 标签：task, javafx

我有一个 JavaFX 应用程序，它实例化了几个[Task](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)对象。

目前，我的实现（见下文）调用行为**runFactory()**在 Task 对象下执行计算。与此并行，调用**nextFunction()**。有没有办法让**nextFunction()** “等待”直到前一个任务完成？

我理解**thread.join()**一直等到正在运行的线程完成，但是对于 GUI，由于事件调度线程，还有额外的复杂层。事实上，将**thread.join()**添加到下面代码段的末尾只会停止 UI 交互。

如果有任何建议如何让**nextFunction**等到它的前一个函数**runFactory**完成，我将不胜感激。

谢谢，

```
// High-level class to run the Knuth-Morris-Pratt algorithm.
public class AlignmentFactory {
    public void perform() {
        KnuthMorrisPrattFactory factory = new KnuthMorrisPrattFactory();
        factory.runFactory();   // nextFunction invoked w/out runFactory finishing.
        // Code to run once runFactory() is complete.
        nextFunction()   // also invokes a Task.
        ...
    }
}

// Implementation of Knuth-Morris-Pratt given a list of words and a sub-string.
public class KnuthMorrisPratt {
   public void runFactory() throws InterruptedException {
       Thread thread = null;
       Task<Void> task = new Task<Void>() {

           @Override public Void call() throws InterruptedException {
           for (InputSequence seq: getSequences) {
                KnuthMorrisPratt kmp = new KnuthMorrisPratt(seq, substring);
                kmp.align();

            }
            return null; 
        }
    };
    thread = new Thread(task);
    thread.setDaemon(true);
    thread.start();
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-05T17:29:18.703

使用任务时，您需要使用`setOnSucceeded`并可能`setOnFailed`在程序中创建逻辑流，我建议您也`runFactory()`返回任务而不是运行它：

```
// Implementation of Knuth-Morris-Pratt given a list of words and a sub-string.
public class KnuthMorrisPratt {
   public Task<Void> runFactory() throws InterruptedException {
       return new Task<Void>() {

       @Override public Void call() throws InterruptedException {
       for (InputSequence seq: getSequences) {
        KnuthMorrisPratt kmp = new KnuthMorrisPratt(seq, substring);
        kmp.align();

        }
        return null; 
    }
    };
}

// High-level class to run the Knuth-Morris-Pratt algorithm.
public class AlignmentFactory {
    public void perform() {
    KnuthMorrisPrattFactory factory = new KnuthMorrisPrattFactory();
    Task<Void> runFactoryTask = factory.runFactory();
    runFactoryTask.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
        @Override
        public void handle(WorkerStateEvent t)
        {
            // Code to run once runFactory() is completed **successfully**
            nextFunction()   // also invokes a Task.
        }
    });

    runFactoryTask.setOnFailed(new EventHandler<WorkerStateEvent>() {
        @Override
        public void handle(WorkerStateEvent t)
        {
            // Code to run once runFactory() **fails**
        }
    });
    new Thread(runFactoryTask).start();
    }
} 
```

# php - 带有 PHP 变量会话存储的 JavaScript 或 Ajax

> ID：15217450
> 
> 赞同：0
> 
> 时间：2013-03-05T06:44:42.417
> 
> 标签：php, javascript, jquery, ajax

我想为像这个网站这样的定制鞋建立在线网上商店**`http://www.shoesofprey.com/3d/designer?p=20600P4`**

首先，人们选择他们想要的风格，然后他们选择他们想要的颜色。我需要构建一个这样的脚本（不添加到购物车）。

我认为无论他们单击什么都存储为一个会话，然后从该会话中一个 php 脚本选择一个图像。

这是我所做的，但它仍然不起作用：

**在 index.php 中**

```
 <script language='javascript'>
    function getXMLHTTP() { //function to return the xml http object
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1){
                    xmlhttp=false;
                }
            }
        }       
        return xmlhttp;
    }

    function getpic(strURL) {       
        var req = getXMLHTTP();
        if (req) {
            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {                        
                            document.getElementById('getimg').innerHTML=req.responseText;                       
                    } else {
                        alert("There was a problem while using   XMLHTTP:\n" + req.statusText);
                    }
                }               
            }           
            req.open("GET", strURL, true);
            req.send(null);
        }
    }

function createRequestObject() {
     var ro;     
     ro = (window.ActiveXObject) ? new ActiveXObject("Microsoft.XMLHTTP") : new XMLHttpRequest();

     return ro;
}

    var http = createRequestObject();

    function sndReq(action) {
     http.open('get', 'rpc.php?action='+action);
     http.onreadystatechange = handleResponse;
     http.send(null);
}

function handleResponse() {
     if(http.readyState == 4){
          var response = http.responseText;
          var update = new Array();

          if(response.indexOf('|') != -1) {
               update = response.split('|');
               document.getElementById(update[0]).innerHTML = update[1];
          }
     }
}
    </script>
    <table>
    <tr>
        <td>
            <a href="javascript:sndReq('top')">[TOP]</a>
            <a href="javascript:sndReq('bottom')">[BOTTOM]</a>

        </td>
        <td>
            <div id="getimg" style="width:600px;height:450px;border:1px solid #ccc;border-radius:10px;">
                <img src="img/polos.jpg">
            </div>
        </td>
        <td>
            <div id="foo">
            <label><input name="color" type="radio" value="black"> black </label><br/><br/>
            <label><input name="color" type="radio" value="blue"> blue </label><br/><br/>
            <label><input name="color" type="radio" value="brown"> brown </label><br/><br/>
            <label><input name="color" type="radio" value="red"> red </label><br/><br/>
            </div>
        </td>
    </tr>
    </table> 
```

**在 rpc.php**

```
switch($_REQUEST['action']) {
     case 'top':
          /* do something */
          session_start();
          // store session data
          $_SESSION['top']="t";

          echo "foo|"?>
            <label><input name="color" type="radio" value="1" onChange="getpic('http://localhost/distrokl/img.php?tcl='+this.value)"> blue </label><br/><br/>
            <label><input name="color" type="radio" value="2" onChange="getpic('http://localhost/distrokl/img.php?tcl='+this.value)"> brown </label><br/><br/>
            <label><input name="color" type="radio" value="3" onChange="getpic('http://localhost/distrokl/img.php?tcl='+this.value)"> red </label><br/><br/>
          <?;
          break;

    case 'bottom':
          /* do something */
          session_start();
          // store session data
          $_SESSION['bottom']="b";

          echo "foo|"?>
            <label><input name="color" type="radio" value="1" onChange="getpic('http://localhost/distrokl/img.php?bcl='+this.value)"> blue </label><br/><br/>
            <label><input name="color" type="radio" value="2" onChange="getpic('http://localhost/distrokl/img.php?bcl='+this.value)"> brown </label><br/><br/>
            <label><input name="color" type="radio" value="3" onChange="getpic('http://localhost/distrokl/img.php?bcl='+this.value)"> red </label><br/><br/>
          <?;
          break;
}

**and in img.php**

    session_start();
    $tcl = $_REQUEST['tcl'];
    $_SESSION['tcl']=$tcl;

    $bcl = $_REQUEST['bcl'];
    $_SESSION['bcl']=$bcl;

    $top = $_SESSION['top'];
    $bottom = $_SESSION['bottom'];

    $topcl = $_SESSION['tcl'];
    $botcl = $_SESSION['bcl'];

                echo "<img src='img/".$top.$topcl.$bottom.$botcl".jpg'><br/>"; 
```

关于我需要做什么的任何想法？

# python - 有两个变量要使用 python 作为路径连接

> ID：15217451
> 
> 赞同：0
> 
> 时间：2013-03-05T06:44:45.160
> 
> 标签：python, python-3.x

嗨，我有两个变量要作为路径加入，

```
SUITE_DIR = D:/Squish and 
SUITE_NAME = HMI_Remote 
```

现在我想要 DIR_name 作为 D:/Squish/HMI_Remote

当我尝试

```
 os.path.join(SUITE_DIR,SUITE_NAME)
    it gave me D:/Squish\HMI_Remote 
```

为什么会这样？如何正确？

提前致谢

布里耶什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:36:26.803

其中`os.path`有一个函数`normpath`，它可以直接获取输入（并解决相关部分和一些进一步的改进）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:47:51.057

`os.path.join`使用`separator`操作系统的 ，在 Windows 的情况下是`\`. Windows 可以使用其中一个`\`或`/`尽管。

只要改变`SUITE_DIR`，`SUITE_DIR = 'D:\Squish'`你会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:47:59.047

看起来你正在运行这个 python 脚本，`Windows`并且路径分隔符`Windows`是 is`\`和 not `/`。

您应该改为`SUITE_DIR`使用创建字符串[`os.sep`](http://docs.python.org/library/os.html#os.sep)

# javascript - 在javascript中，是否有一种完美的方式来定义类

> ID：15217454
> 
> 赞同：0
> 
> 时间：2013-03-05T06:44:51.890
> 
> 标签：javascript, class, prototype

我正在寻找一种完美的方式来定义类。“完美”在这里意味着：`

1.  创建实例不会创建方法的副本。
2.  公共功能可以轻松（不麻烦）访问私有变量

例如方式一：

```
function Foo1() {
  var private1;
  this.publicMethod1 = function() {//create instance will create copy of this function}
} 
```

将不符合上述第 1 条规则。

另一个例子，方式2：

```
 function Foo2() {
      var private2;

    }
 Foo2.prototype.Method2 = function() {//cannot access private2} 
```

将不符合上述第 2 条规则。

那么是否有可能同时满足这两个规则呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:03:41.223

在 JavaScript 中，它更多的是关于约定。私有属性或方法首先使用下划线定义，例如`_private`. 使用一些助手，您可以轻松地制作课程。我发现这个设置很简单，你只需要一个`inherits`扩展类的助手，而不是使用多个参数，你传入一个对象`props`并简单地在继承的类上调用“super” `arguments`。例如，使用模块模式：

```
Function.prototype.inherits = function(parent) {
  this.prototype = Object.create(parent.prototype);
};

var Person = (function PersonClass() {

  function Person(props) {
    this.name = props.name || 'unnamed';
    this.age = props.age || 0;
  }

  Person.prototype = {
    say: function() {
      return 'My name is '+ this.name +'. I am '+ this.age +' years old.';
    }
  };

  return Person;

}());

var Student = (function StudentClass(_super) {

  Student.inherits(_super);      

  function Student(props) {
    _super.apply(this, arguments);
    this.grade = props.grade || 'untested';
  }

  Student.prototype.say = function() {
    return 'My grade is '+ this.grade +'.'; 
  };

  return Student;

}(Person));

var john = new Student({
  name: 'John',
  age: 25,
  grade: 'A+'
});

console.log(JSON.stringify(john)); //=> {"name":"John","age":25,"grade":"A+"}
console.log(john.say()); //=> "My grade is A+" 
```

关于私有变量“问题”，只需遵守实例属性的约定，并在需要其他所有私有内容时使用闭包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:28:24.560

一个基本的例子如下：

```
Foo = function(id)
{
    // private instances.
    var _id;
    var _self = this;

    // constructor
    _id = id;

    // private method
    function _get()
    {
        return _id;
    };

    // public function
    _self.set = function(id)
    {
        _id = id;
    };
    _self.get = function()
    {
        return _get();
    };
};

var bar = Foo(100);
console.log( bar.get() );
bar.set(1000);
console.log( bar.get() ); 
```

我建议你使用[原型](http://prototypejs.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:51:38.497

长话短说：不，不是。您不能使用可以访问`private`变量的方法来扩展原型。至少如果这些私有变量通过`closure`.

虽然，在 javascript 中使用下划线标记私有字段是一种惯例，例如`_myPrivateField`. 这些仍然是公开的，但我已经看到这个解决方案在许多图书馆中使用，我也更喜欢这种风格来满足你的第一条规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:50:20.763

```
function Foo3() {
    this.private = {};
}

Foo3.prototype.set_x = function (x) {
    this.private.x = x;
}; 
```

# math - 你如何计算整数溢出？

> ID：15217456
> 
> 赞同：0
> 
> 时间：2013-03-05T06:45:08.647
> 
> 标签：math, arithmetic-expressions

我尝试根据给定的参数计算整数溢出。例如，如果我有一个小于 <= 200 的整数，但是当我将它插入到无符号整数时，它将 > 200。实际的算术过程是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:07:00.527

对固定大小整数的运算通常以 2 ^m为模，其中 m 是位数（现在通常为 32 或 64）。

这意味着从结果中添加或减去 2 ^m的倍数以使其保持在类型的范围内，无论是无符号 (0, 2 ^m -1) 还是有符号 (-2 ^(m-1) , 2 ^(m-1) - 1）。

您可能对[计算机整数的数学基础](http://jonisalonen.com/2013/mathematical-foundations-of-computer-integers/)感兴趣。

# php - PHP：如何提取多维数组的值？

> ID：15217457
> 
> 赞同：0
> 
> 时间：2013-03-05T06:45:13.510
> 
> 标签：php, arrays

我有这个多维数组，我只想从中获取`array('13', '11', '12', '10')`。我怎样才能得到这个？

```
array
      0 => 
        array
          'id' => '13' 
      1 => 
        array
          'id' => '11'
      2 => 
        array
          'id' => '12'
      3 => 
        array
          'id' => '10' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:48:07.530

```
 for($i =0 ;$i<count($array);$i++)
 {
     echo $array[$i]['id'];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:59:11.780

尝试

```
$values = array();
foreach($arr as $inner)
{
    $values[] = $inner['id'];
}
// $values should now hold array(13, 11, 12, 10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:49:04.037

试试这个 ：

```
$array  = your array

$result = call_user_func_array('array_merge_recursive', $array);

echo "<pre>";
print_r($result['id']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:11:01.703

试试这个 ：

```
<?php
   $array=Array('0'=>Array('id'=>"1"),'1'=>Array('id'=>"2"),'2'=>Array('id'=>"3"),'4'=>Array('id'=>"4"));

   $arr=Array();
   for($i =0 ;$i<3;$i++)
   {
       $arr[$i]=$array[$i]['id'];
   }

   print_r(implode(',',$arr));
?> 
```

开/关：

```
 1,2,3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T07:49:30.767

```
 $values = array();        
    foreach(new \RecursiveIteratorIterator(new \RecursiveArrayIterator($arr)) as $key => $value) {
        if ($key == 'id') $values[] = $value;
    }
    var_dump($values); 
```

# angularjs - 为什么我无法获取自定义指令的属性值？

> ID：15217461
> 
> 赞同：11
> 
> 时间：2013-03-05T06:45:41.103
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

angularjs代码：

```
app.directive('test', function(){
  return {
    restrict: 'A',
    scope: {
      myId: '@'
    },
    link: function(scope) {
      alert(scope.myId);
    }
  }
}); 
```

你可以看到`scope: { myId: '@' }`指令中有一个。

和html代码：

```
<div test my-id='123'></div> 
```

你可以看到我定义了一个`my-id='123'`.

我希望该指令会发出警报`123`，但它会发出警报`undefined`。我的错误在哪里？

PS：这是一个现场演示：[http ://plnkr.co/edit/sL69NqWC70Qfwav5feP2?p=preview](http://plnkr.co/edit/sL69NqWC70Qfwav5feP2?p=preview)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T11:17:50.903

您需要`$observe`属性（如[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)的“属性”部分所述）来获取插值属性的正确值。

这是一个有效的 plunk：[http ://plnkr.co/edit/NtIHmdoO7IAEwE74ifB5?p=preview](http://plnkr.co/edit/NtIHmdoO7IAEwE74ifB5?p=preview)

这本质上是[angularjs 的重复：指令链接函数中的日志范围属性显示 undefined](https://stackoverflow.com/q/14552024/1418796)。还应该注意的是，最近合并了 PR [https://github.com/angular/angular.js/pull/1555](https://github.com/angular/angular.js/pull/1555)`$observe` ，您的 plunker 应该可以在不使用AngularJS 的未来版本的情况下工作。

--

有问题的演示在最新版本中工作：1.1.3，您可以尝试一下（并将 angularjs url 更改为 1.1.3）。

# android - 从状态栏启动应用程序而无需重新创建

> ID：15217463
> 
> 赞同：0
> 
> 时间：2013-03-05T06:45:45.170
> 
> 标签：android

我正在创建在状态栏中显示通知图标的应用程序。当用户打开状态栏并点击图标时，应启动应用程序。

我正在寻找一种方法来避免在此启动期间重新创建应用程序。我创建了测试应用程序并将日志消息添加到处理程序 onCreate、onRestart、onResume、onStop 和 onDestroy。日志消息说明了问题：

1.  用户启动应用程序 - onCreate、onResume
2.  用户按下 HOME 按钮 - onStop
3.  用户打开应用程序列表并再次启动应用程序 - onRestart、onResume
4.  用户按下 HOME 按钮 - onStop
5.  用户打开最近应用程序列表并选择应用程序 - onRestart、onResume
6.  用户按下 HOME 按钮 - onStop
7.  用户打开状态栏并点击应用程序图标 - onDestroy、onCreate、onResume。

第 7 步的行为与 3) 和 5) 不同 - 这里有 onDestroy。换句话说，应用程序的实例被重新创建。有可能避免这种娱乐吗？

这是我的测试活动的代码：

```
public class MainActivity extends Activity {
    private final String LOG_TAG = "com.example.notificationtest";

    @Override protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        showNotification(this);
        Log.d(LOG_TAG, "NotificationTest: OnCreate");
    }

    @Override protected void onRestart() {
        super.onRestart();
        Log.d(LOG_TAG, "NotificationTest: OnRestart");
    }

    @Override protected void onResume() {
        super.onResume();
        Log.d(LOG_TAG, "NotificationTest: OnResume");
    }

    @Override protected void onDestroy() {
        super.onDestroy();
        Log.d(LOG_TAG, "NotificationTest: OnDestroy");
    }

    @Override protected void onStop() {
        super.onStop();
        Log.d(LOG_TAG, "NotificationTest: OnStop");
    }

    private static final int NOTIF_ID = 91371;

    public static void showNotification(Context context) {
        final Intent result_intent = new Intent(context, MainActivity.class);
        result_intent.setAction(Intent.ACTION_MAIN);
        result_intent.addCategory(Intent.CATEGORY_LAUNCHER);
        //result_intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        //result_intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
        //result_intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);                

        TaskStackBuilder stack_builder = TaskStackBuilder.create(context);
        stack_builder.addParentStack(MainActivity.class);
        stack_builder.addNextIntent(result_intent);

        PendingIntent pending_intent = stack_builder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

        android.support.v4.app.NotificationCompat.Builder builder = new android.support.v4.app.NotificationCompat.Builder(context);

        Resources res = context.getResources();
        builder.setContentIntent(pending_intent)
            .setSmallIcon(R.drawable.ic_launcher)
            .setLargeIcon(BitmapFactory.decodeResource(res, R.drawable.ic_launcher))
            .setTicker("test")
            .setWhen(System.currentTimeMillis())
            .setAutoCancel(false)
            .setContentTitle("title")
            .setContentInfo("cinfo")
            .setContentText("ctext");
        Notification n = builder.build();
        n.flags = Notification.FLAG_ONGOING_EVENT | Notification.FLAG_NO_CLEAR;   

        NotificationManager nm = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
        nm.notify(NOTIF_ID, n);     
    }
} 
```

有一些标志可以设置为 result_intent，例如[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)、[FLAG_ACTIVITY_CLEAR_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TASK) 和[FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)。它们允许指定应在启动时重新启动活动（使用活动启动模式“singleTop”、“singleTask”等）。但是应该设置什么标志以避免重新启动？也许我应该以某种方式配置pending_intent？

任何帮助将不胜感激。

**解决了**

非常感谢各位的解答，问题解决了。

[这里](https://stackoverflow.com/questions/3305088/how-to-make-notification-intent-resume-rather-than-making-a-new-intent)描述了同样的问题。我已经从该主题检查了测试项目，发现与我的代码不同。为了解决这个问题，我的代码应该按以下方式更改：

```
final Intent result_intent = new Intent(context, MainActivity.class);
//result_intent.setAction(Intent.ACTION_MAIN); // (1)
//result_intent.addCategory(Intent.CATEGORY_LAUNCHER); // (2)
result_intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

另一组标志也有效：

```
result_intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK); 
```

要点是注释第 (1) 和 (2) 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:54:04.033

添加这个：

```
result_intent..setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                                    | Intent.FLAG_ACTIVITY_NEW_TASK); 
```

它像

Intent.FLAG_ACTIVITY_REORDER_TO_FRONT

还维护活动堆栈

# mysql - 仅使用 root 密码访问 MySQL 数据库

> ID：15217472
> 
> 赞同：0
> 
> 时间：2013-03-05T06:46:20.553
> 
> 标签：mysql, shell, command-line, passwords, root

所以我进退两难。我正在从另一个开发人员那里接手，并且有一个我只有 root 访问权限的盒子，我需要从中下载 MySQL 数据库。所以我扎根，然后`mysql`在命令行中输入并得到：

```
Access denied for user 'root'@'localhost' (using password: NO) 
```

然后，我尝试`mysql --user=root --password={myrootpassword}`它说：

```
Access denied for user 'root'@'localhost' (using password: YES) 
```

除了root密码，我没有其他信息。显然这应该足够了；如何访问我的数据库？是创建新的 MySQL 用户名的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:49:04.307

MySQL`root`和 server`root`是两个不同的帐户。即使您具有服务器 root 访问权限，它也不一定意味着它与 MySQL 相同`root`。但是，通过服务器 root 访问，您可以更改 MySQL root 密码。根据服务器上安装的管理面板，可以有许多不同的方法来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:50:10.480

`--skip-grant-tables`停止 mysql 守护程序，然后使用该选项重新启动它。启动后，您将能够以 root 身份登录，无需密码。你可以用数据库做所有事情，更改密码，所有这些。

请注意，您*和其他所有人都*无需密码即可登录。您可能想要阻止端口 3306 或将机器完全从互联网上移除，直到您完成您需要做的事情。

一旦您获得数据或更改密码或其他任何内容，请再次停止服务并正常重新启动以重新启用权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:52:29.380

首次以 root 身份登录

```
su root; 
```

然后您可以通过以下方式设置密码

```
root paswd; 
```

它会要求输入密码，你可以设置任何你想要的。然后从他们的用户中注销并以 root 用户名登录

# iphone - 如果设备中安装了 Dropbox 应用程序，则无法使用 DropBoxSDK.framework 链接 Dropbox

> ID：15217476
> 
> 赞同：1
> 
> 时间：2013-03-05T06:46:28.797
> 
> 标签：iphone, ios, dropbox-api

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication 
```

或者

```
-(BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url 
```

当我请求使用链接保管箱时，没有调用 AppDelegate 的这两种方法（如果我的设备中安装了保管箱应用程序）

```
[[DBSession sharedSession] linkFromController:rootViewController]; 
```

给出错误

```
 'The signature method "(null)" is not currently support by MPOAuthConnection' 
```

但如果我从我的设备中删除 Dropbox 应用程序，它几乎可以正常工作。我正在使用 DropBoxSDK.framework。我已经按照 SDK 中给定的示例设置了 urlSchema。

# javascript - onkeydown 调用函数在 IE 中有效，但在其他浏览器中无效

> ID：15217477
> 
> 赞同：0
> 
> 时间：2013-03-05T06:46:31.320
> 
> 标签：javascript, jquery, cross-browser

我在 onKeyDown 事件期间为一个文本框调用一个 JavaScript 函数

```
@onkeydown="javascript:return avoidSpecialCharacters(event)" 
```

JavaScript 函数在 IE 中被调用，但在 chrome、safari 和 mozilla 中没有。我需要做什么才能让它在这些浏览器中工作？

# codeigniter - CodeIgniter 重定向函数中如何使用刷新参数

> ID：15217484
> 
> 赞同：3
> 
> 时间：2013-03-05T06:47:01.173
> 
> 标签：codeigniter, redirect

有人可以告诉我为什么我们需要在 codeigniter 中为重定向功能使用“刷新”参数。

```
redirect('/index.php/it_inventory/get_users', 'refresh'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:10:16.917

如果您熟悉核心 PHP 标头（“Location:url_here”），那么这可能是您所知道的新补充，即在 CI 中使用具有以下语法的标头进行重定向也是可能的。当您传递第二个参数时，刷新因此以下行起作用。并且它是可选的。header("刷新:0;url=".$uri)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:40:12.980

它已经默认设置为“位置”

第二个参数是重定向方法。默认情况下，它设置为位置，但也可以更改为刷新。这对 Windows 服务器很有用，因为它们可能会让您对此大惊小怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:30:00.183

如果您不使用“刷新”或“位置”方法，则默认设置“位置”方法。“位置”方法有时会在 Windows 服务器中产生问题。因此您需要设置“刷新”方法。有关更多详细信息，您可以查看 codeigniter 用户指南，然后查看“redirect()”函数。这是链接：[Codeigniter 的 URL Helper 用户指南](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)。这里描述了redirect() url helper 函数。

# javascript - 使用模板事件触发另一个模板中的响应

> ID：15217491
> 
> 赞同：2
> 
> 时间：2013-03-05T06:47:26.097
> 
> 标签：javascript, meteor

当模板中发生事件时，我想在另一个模板中做一些事情。

这是我的代码：

客户端html：

> ```
>  <body>
>       Navigation:
>       {{> navigation}}
>       =======================================================
>       Body:
>       {{> body}}
>     </body>
> 
>      <template name="navigation">
>       <input type="button" value="MenuBtn" />
>     </template>
>     <template name="body">
>      {{content}}
>     </template> 
> ```

JavaScript：

```
    Template.navigation.events({
        “点击”：功能（e）{    

            // {{body}} 中没有发生任何事情
            Template.body.content = 函数（）{
             // 我想做点什么...比如查询数据库
             // 也许，只是一个例子： return peple.find({"name":e.currenTarget.value});                   
              返回“你好”；       
            };          

        } });

```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:07:49.017

使用把手将数据传递给模板，以便模板系统知道何时重绘 html

客户端JS

```
Template.body.content = function() {
    return Session.get("content") || "Hi there, click the button" 
};

Template.navigation.events({
    'click' : function () {     
        alert("1");// it's normal       
        Session.set("content", "<h1>HELLO!!!! '+ people.findOne({"name":e.currenTarget.value}).name || " unregisterd person" + '</h1>");         
        alert("2");//it's normal
    }
}); 
```

我还假设您将要做一些 HTMLey 并且您不希望它被转义，因此请确保您使用：

```
<template name="body">
    {{{content}}}
</template> 
```

# objective-c - UIImagePickerController 和横向

> ID：15217493
> 
> 赞同：3
> 
> 时间：2013-03-05T06:47:33.897
> 
> 标签：objective-c

我有一个 UIImagePicker 来单击图片并从照片库中选择图像。但我的应用程序必须只支持横向。照片库仅通过 ImagePicker 以纵向模式打开。我尝试将当前代码与 ALAssets 集成，但我不知道 AlAssets 库。我想使用图像选择器并使其在 startMediaBrowserFromViewController: 方法中调用 ALAssets。下面是方法定义。请给我一个解决方案。

```
//pick an image from photo gallery  

- (BOOL) startMediaBrowserFromViewController: (UIViewController*) controller
                               usingDelegate: (id <UIImagePickerControllerDelegate,
                                               UINavigationControllerDelegate>) delegate {

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeSavedPhotosAlbum] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;
    UIImagePickerController *mediaUI = [[UIImagePickerController alloc] init];
    mediaUI.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    //provides access to photo albums in the device.
    mediaUI.mediaTypes=[[[NSArray alloc]initWithObjects:(NSString*)kUTTypeImage,nil]autorelease];
    // Hides the controls for moving & scaling pictures.
    mediaUI.allowsEditing = NO;   
    mediaUI.delegate = delegate;
    [controller presentModalViewController: mediaUI animated: YES];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:34:40.767

我`ELCImagePickerController`用来挑选图像。对我来说，与“正常”相比，它有很多优势`UIImagePickerController`：

*   你可以选择多个图像
*   轻松支持横向模式
*   易于定制
*   ...

我认为默认情况下它不支持横向，但我很容易做到这一点。如果您需要帮助，请发表评论。

在[Gituhub上查看](https://github.com/elc/ELCImagePickerController)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:01:22.093

`UIImagePickerController`仅支持`UIInterfaceOrientationPortrait`方向，因此无论是从横向视图控制器呈现，它都将显示为纵向方向，即使在`UIInterfaceOrientationPortraitUpsideDown`

# .net - 应用程序集名称长度限制

> ID：15217499
> 
> 赞同：-1
> 
> 时间：2013-03-05T06:47:45.317
> 
> 标签：.net, wpf, visual-studio-2010, filenames

谁能说出 WPF 应用程序支持最多 40 个字符作为程序集名称长度的原因。

要重现该问题：

使用默认模板创建一个 WPF 应用程序。现在将程序集名称更改为“WpfApplication12345678912345678912345678”，它可以正常工作。

**我如何更改程序集名称**

1.  右键单击 WPF 项目
2.  选择属性
3.  转到应用程序选项卡
4.  将项目的程序集名称更改为“WpfApplication12345678912345678912345678”

但是，当我在“WpfApplication123456789123456789123456789”上再添加一个字符时，它就会停止工作。

**注意**：我知道以下消息，上述问题与以下问题无关：

> “您正在创建的解决方案、项目或项目的完整路径长度超过了系统允许的最大路径长度。您必须减少名称或位置的长度。”

我的项目是@位置：E:\ConsoleApplication3\WpfApplication1

调试文件夹路径：E:\ConsoleApplication3\WpfApplication1\bin\Debug

Debug 文件夹中的应用程序 Exe：WpfApplication1.exe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:53:54.987

在 Windows 中，路径的最大长度。最大长度为 256。你可以看看[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-05T07:36:03.997

我已将平台目标更改为“任何 CPU”，它解决了问题。

**从Project Properties > Build > General Section > Platform target 下拉菜单中**更改了平台目标。****

 **感谢所有试图帮助我的人。**

# llvm - llvm 将加载的值传递给外部函数

> ID：15217503
> 
> 赞同：-1
> 
> 时间：2013-03-05T06:48:06.367
> 
> 标签：llvm

我正在尝试创建一个将加载的值传递给外部函数的传递。这就是我正在做的

```
cpProfFunc = M.getOrInsertFunction("_Z6cpProfiiiiii",Type::getVoidTy(*Context),Type::getInt8tInt8PtrTy(*Context),NULL); 
if(isa<LoadInst>(&(*BI)) )     //next in block iterator
    std::vector<Value*> a1(1);              
LoadInst *CI = dyn_cast<LoadInst>(BI);
a1[0]=dyn_cast<ConstantExpr>(CI->getPointerOperand());
CallInst* newInst = CallInst::Create(cpProf,a1,"");
BB->getInstList().insert((Instruction*)CI, newInst); 
```

这给了我错误。我不知道我错在哪里。有人，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T09:12:26.727

您写道您收到错误：

```
Stack dump:
0\.  Program arguments: opt -load /home/anshul/llvm/llvm-3.2/Release+Asserts/lib/Ass1Pri.so -anshul_insert
1\.  Running pass 'test function exist' on module '<stdin>'.
./myscript: line 6: 10726 Segmentation fault (core dumped)
opt -load /home/anshul/llvm/llvm-3.2/Release+Asserts/lib/Ass1Pri.so -anshul_insert < a.bc > b1.bc
'main' function not found in module. 
```

因此，似乎一个名为“测试函数存在”的过程正试图实际运行一些位码文件（可能在其上调用 lli），但`main`该文件中缺少一个函数。

# ruby-on-rails-3 - css：如何使用每个循环（rails）在一行中显示两个产品

> ID：15217505
> 
> 赞同：1
> 
> 时间：2013-03-05T06:48:12.447
> 
> 标签：ruby-on-rails-3, css

在css中需要一些帮助。

我有一系列产品，我使用每个循环显示它。我想在每行显示两个产品。你知道怎么做吗？目前我正在使用 50% 的 div 宽度，因此两个产品将进入 div。

还有其他方法吗？

这是代码：

```
<div id="product_list" >
    <% if @products.size <= 0 %>
        <h1/>No products found</h1>
            <% else %>
                <% @products.each do |p| %>
                    <div class="products">

                        <div><%= image_tag p.photos.first.avatar.url(:big) if p.photos.size > 0 %>
                         </div>
                    </div>
                <% end %>
    <% end %>
</div> 
```

div product_list 是主要的 div div 产品是 50%。所以它在main下显示2个div。

但这在基于类别等过滤器时表现得很奇怪。有什么好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:56:13.707

您可以使用

我很多次处理这样的情况，试试它是否适合你。

伪代码：

```
<div id="product_list" >
<% if @products.size <= 0 %>
    <h1/>No products found</h1>
        <% else %>
           <ul><li class="products">
            <% @products.each do |p| %>

                    <%= (count%2==0):'</li><li>':''; %>

                    <div><%= image_tag p.photos.first.avatar.url(:big) if p.photos.size > 0 %>

                </div>
            <% end %>
           </li></ul>
<% end %>
</div> 
```

# mysql - 将表名从小写更改为大写

> ID：15217510
> 
> 赞同：1
> 
> 时间：2013-03-05T06:48:51.063
> 
> 标签：mysql, database

我有一个有 200 多个表的 mysql 数据库。

现在，我必须将这些表转储导入新数据库。

所有的表名都是**小写字母**。

有什么方法可以将所有**小写字母**的表名转换为**大写字母**吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:55:52.350

在 windows 中，编辑 my.cnf 文件

```
lower_case_table_names=2 
```

然后重新启动您的服务器。

# php - require_once 不起作用（相对路径）

> ID：15217520
> 
> 赞同：2
> 
> 时间：2013-03-05T06:49:55.503
> 
> 标签：php, require-once

我有一个文件结构如下：

```
>project
 >admin
 >classes
  >class_main.php
 >templates
  >foot.php 
```

在 class_main.php 中，我试图使用`require_once`相同的文件，这取决于用户在我的类的 __destruct 函数中的位置（即，如果用户在管理目录中，`require_once "../templates/foot.php"`否则）。`require_once "./templates/foot.php"`

我的问题是，无论我尝试什么，我总是收到相同的错误：

> 警告：require_once(C:\wamp\www\project\classes/templates/foot.php) [function.require-once]：无法打开流：C:\wamp\www\project\classes 中没有这样的文件或目录\class_main.php 在第 22 行

我努力了：

*   使用 require_once 作为函数
*   使用`dirname(__FILE__)`和`__DIR__`
*   使用`\`and`\\`代替`/`

我怎样才能做到这一点？

目前 __destruct 函数的完整代码是：

```
 function __destruct()
    {
        if($this->admtrim($_SERVER['PHP_SELF']) == 'admin')
        {
            require_once "../templates/foot.php";
        }
        else
        {
            require_once './templates/foot.php';
        }
    } 
```

澄清一下，这个脚本位于，`C:\wamp\www\project\classes\class_main.php`我试图包含的文件位于`C:\wamp\www\project\templates\foot.php`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:51:32.823

```
C:\wamp\www\project\classes/templates/foot.php 
```

这应该是不言自明的，在一个链接中查看反斜杠和正斜杠。这应该是

```
C:\wamp\www\project\classes\templates\foot.php 
```

尝试在 windows 格式中使用反斜杠

**编辑：**

正如你提到的文件位于`C:\wamp\www\project\templates\foot.php`那么为什么不提供完整的路径

```
require_once("C:\wamp\www\project\templates\foot.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:53:52.317

您的**模板**文件夹位于**类**文件夹之外。但错误显示，它在类文件夹中搜索。

```
C:\wamp\www\project\classes/templates/foot.php 
```

正确地包括它。

# iphone - 如果 tableView 没有结果，则显示警报

> ID：15217522
> 
> 赞同：-4
> 
> 时间：2013-03-05T06:50:01.947
> 
> 标签：iphone, ios, objective-c, xcode

我以前认为我可以用一个简单的数组计数来回答这个问题（我的错误）。我正在尝试向 tableView 没有结果的用户 id 显示警报。我不能简单地将计数放在 viewDidAppear 方法中，因为填充 JSON 和 tableView 的 Web 查询需要几秒钟来填充。我不能简单地把它放在：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell 
forRowAtIndexPath:(NSIndexPath *)indexPath {

    if([indexPath row] == ((NSIndexPath*)[[tableView indexPathsForVisibleRows] 
    lastObject]).row){
    //loading complete
    }
} 
```

因为如果没有结果，则在此方法中不会调用任何内容。有没有人对此有任何建议 - 搜索了 4 个多小时，几乎把我所有的头发都拔了出来。

如果这个问题更适合 SO，请随时取消投票 - 这个问题大量的反对票让我失去了提问的能力......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:51:20.393

```
NSInteger count = [array count]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:21:43.167

NSlog("数组计数：%d",[数组计数];

这将为您提供控制台中的数组计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T10:26:04.473

您无法检查行数，`viewDidAppear`因为异步`NSURLConnection`用于获取填充表视图的 JSON 数据。

正确的方法是`reloadData`在`connectionDidFinishLoading`使用 URL 请求的响应更新数据源之后调用。此时您知道行数是否为零，并且无需*等待*表视图更新完成。

# java - 每个连接的线程与每个请求的线程有什么区别？

> ID：15217524
> 
> 赞同：37
> 
> 时间：2013-03-05T06:50:06.177
> 
> 标签：java, multithreading, http, servlets

您能否解释一下已在各种 servlet 实现中实现的两种方法：

1.  每个连接的线程
2.  每个请求的线程

上述两种策略中哪一种更适合扩展，为什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-05T11:52:11.747

> 上述两种策略中哪一种更适合扩展，为什么？

每个请求的线程比每个连接的线程更好地扩展。

Java 线程相当昂贵，通常每个使用 1Mb 内存段，无论它们是活动的还是空闲的。如果您为每个连接提供自己的线程，则该线程通常会在连接上的连续请求之间处于空闲状态。最终，框架需要停止接受新连接（因为它不能创建更多线程）或开始断开旧连接（如果/当用户醒来时，这会导致连接流失）。

HTTP 连接所需的资源比线程堆栈要少得多，尽管由于 TCP/IP 的工作方式，每个 IP 地址有 64K 个打开连接的限制。

相比之下，在每请求线程模型中，线程仅在处理请求时关联。这通常意味着服务需要更少的线程来处理相同数量的用户。而且由于线程使用大量资源，这意味着服务将更具可扩展性。

（请注意，每个请求的线程并不意味着框架必须关闭 HTTP 请求之间的 TCP 连接......）

* * *

话虽如此，当每个请求的处理过程中存在长时间的停顿时，每个请求的线程模型并不理想。（而且当服务使用涉及长时间保持回复流打开的[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)方法时尤其不理想。）为了支持这一点，Servlet 3.0 规范提供了一种“异步 servlet”机制，它允许 servlet 的请求方法挂起它与当前请求线程的关联。这释放线程去处理另一个请求。

如果 Web 应用程序可以设计为使用“异步”机制，那么它可能比每请求线程或每连接线程更具可扩展性。

* * *

**跟进**

> 让我们假设一个包含 1000 张图片的网页。这会产生 1001 个 HTTP 请求。进一步让我们假设使用了 HTTP 持久连接。使用 TPR 策略，这将导致 1001 个线程池管理操作 (TPMO)。使用 TPC 策略，这将产生 1 个 TPMO……现在，根据单个 TPMO 的实际成本，我可以想象 TPC 可能比 TPR 更好地扩展的场景。

我认为有些事情你没有考虑过：

*   Web 浏览器面临要获取大量 URL 以完成一个页面，很可能会打开多个连接。

*   使用 TPC 和持久连接，线程必须等待客户端接收响应并发送下一个请求。如果网络延迟很高，则此等待时间可能很长。

*   服务器无法知道何时可以关闭给定（持久）连接。如果浏览器不关闭它，它可能会“徘徊”，束缚 TPC 线程，直到服务器超时连接。

*   TPMO 开销并不大，尤其是当您将池开销与上下文切换开销分开时。（您需要这样做，因为 TPC 会在持久连接上引发上下文切换；见上文。）

我的感觉是，这些因素可能会超过每个连接专用一个线程所节省的 TPMO。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T07:01:37.793

`HTTP 1.1`- 支持**持久连接**，这意味着可以使用相同的 HTTP 连接接收/发送多个请求/响应。因此，要并行运行使用相同连接接收到的那些请求，`Thread`会为每个请求创建一个新请求。

`HTTP 1.0`- 在这个版本中，使用连接只收到一个请求，并且在发送响应后连接被关闭。所以只为一个连接创建了一个线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T10:20:55.733

`Thread per connection``HTTP Connection`是从`multiple requests`（[keep-alive](http://en.wikipedia.org/wiki/HTTP_persistent_connection)）重用相同的概念。

`Thread per request``each request`将从.Server创建一个线程，`client`可以创建多个`threads`as per `request`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T10:49:13.373

**每个请求**的线程将为服务器接收的每个 HTTP 请求创建一个线程。

**每个连接的线程**将重用来自多个请求的相同 HTTP 连接（保持活动）。AKA [HTTP 持久连接](http://en.wikipedia.org/wiki/HTTP_persistent_connection) 但请注意，这仅支持`HTTP 1.1`

每个请求的线程更快，因为大多数 Web 容器使用线程池。

您应该在服务器上的核心数上设置的最大并行连接数。更多内核 => 更多并行线程。

请参阅此处如何配置... Tomcat 6：http: [//tomcat.apache.org/tomcat-6.0-doc/config/executor.html](http://tomcat.apache.org/tomcat-6.0-doc/config/executor.html)

Tomcat 7：http: [//tomcat.apache.org/tomcat-7.0-doc/config/executor.html](http://tomcat.apache.org/tomcat-7.0-doc/config/executor.html)

例子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T10:42:57.663

每个请求的线程应该更好，因为它重用线程，而某些客户端可能处于空闲状态。如果您有很多并发用户，则可以使用较少数量的线程为他们提供服务，并且具有相同数量的线程会更昂贵。还有一个考虑因素——我们不知道用户是否仍在使用应用程序，所以我们不知道何时销毁线程。对于每个请求一个线程机制，我们只使用一个线程池。

# git - 使用现有密钥配置 Git

> ID：15217532
> 
> 赞同：1
> 
> 时间：2013-03-05T06:50:30.677
> 
> 标签：git

我已经为 git 配置了公钥和私钥。我将我的公钥发送给服务器人员。然后我格式化了我的电脑并再次安装了 Windows。但是在格式化系统之前，我将两个密钥都保存在了硬盘上。现在我想使用现有的密钥重新配置我的 Git。我怎样才能做到这一点？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:57:11.527

您只需将您的`id_rsa`和`id_rsa.pub`密钥（您之前保存的）复制到（如果目录不存在，则`C:\Users\YourAccount\.ssh`创建目录' '）。`.ssh`

该路径是[`git-cmd.bat`](https://github.com/msysgit/msysgit/blob/master/git-cmd.bat)（在[msysgit](https://github.com/msysgit/msysgit)中）定义的`%HOME%`，并且 ssh 需要在`%HOME%/.ssh`.
请注意，`HOME`由 msysgit 会话（a`cmd`或 a [`git-bash`](https://github.com/msysgit/msysgit/blob/master/share/WinGit/Git%20Bash.vbs)）定义是很重要的，因为 Windows 本身从不定义环境变量`HOME`（而是使用它`USERPROFILE`，ssh 对此一无所知）。

# pointers - C 指针：void 与其他类型

> ID：15217533
> 
> 赞同：0
> 
> 时间：2013-03-05T06:50:31.880
> 
> 标签：pointers

为什么 gcc 允许以下内容：

```
void **p1, **p2;

p1=*p2; 
```

但这会产生“来自不兼容指针类型的赋值”错误？

```
char **p1, **p2;
p1=*p2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:52:43.123

因为`*p2`是 type `void *`，它是*通用*（数据）指针类型。这意味着，您可以将任何数据指针类型分配给 type 的指针`void *`，也可以将 a 分配`void *`给任何类型的数据指针。所以

```
(some void **) = (some void *); 
```

已验证。

但是，`char **`and`char *`是指向不同类型的指针，它们都不是`void *`，所以你不能将一个分配给另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:53:27.190

你需要：

```
char **p1, **p2;
/* Make sure p2 has a valid value (i.e. points to a valid memory location) before the following statement */
p1=p2; 
```

`void**`它在被分配 a之间起作用的原因`void*`是因为 void 指针可以指向任何东西。

# oracle - oracle 9 当不存在时

> ID：15217542
> 
> 赞同：-1
> 
> 时间：2013-03-05T06:50:57.093
> 
> 标签：oracle, null, case

我有这些代码：

```
select case 
     when exists (select 1 
                  from table1
                  where id=608071) 
     then column1 
     else 0
  end as abc
from table1 where id=608071; 
```

和

```
select decode(count(column1), 0, column1) abc
from (select column1
      from table1
      where id=608071) group by column1; 
```

他们都没有返回我没有column1，没有0，没有错误。它给我null，即什么都没有。没有行返回。当特定 id 不存在时，我需要得到 0。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:08:07.657

尝试这个！！

```
select case when exists (select 1 from table1 where id= '608071')  then  (select column1 from table1)  else '0' end as abc from dual 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:11:04.283

假设这是您的要求：“当特定 ID 不存在时，我需要获取 0”

```
select
  nvl(T.COLUMN1, 0) COLUMN1_OR_ZERO
from
  DUAL D left join(
    select
      *
    from
      TABLE1
    where
      id = '608071') T on (1=1) 
```

使用此查询，您只需扫描表一次。

# php - 即使在用户注销后在 PHP 后台运行任务

> ID：15217543
> 
> 赞同：0
> 
> 时间：2013-03-05T06:51:01.850
> 
> 标签：php, javascript, ajax, background

我已经使用 php 完成了一个网站，它基本上完成了在后台从 IP 摄像机录制视频的任务。所以这就是我登录我的帐户然后点击一个记录按钮，该按钮调用后端 ajax 脚本，该脚本执行程序并成功录制视频，并在我刷新或重新加载页面时立即停止。现在我想要的是即使在用户注销后，视频录制脚本也应该在后台继续录制视频。我怎样才能完成这项任务。谁能给我一个简单的想法来做到这一点？

看看我使用 ajax 的视频录制代码。 [点击这里](https://stackoverflow.com/questions/15145751/showing-a-loading-image-when-ajax-start-running-in-background) 视频录制由包含主要逻辑的 start.php 完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:09:28.430

您的 PHP 文件启动了另一个程序，对吗？

我假设在 php 中你使用类似 popen 或 exec 的东西。这是您在没有 PHP 等待它完成的情况下完成它的方法：http: [//php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

```
function execInBackground($cmd) {
    if (substr(php_uname(), 0, 7) == "Windows"){
        pclose(popen("start /B ". $cmd, "r")); 
    }
    else {
        exec($cmd . " > /dev/null &");  
    }
} 
```

不确定用户注销是什么意思，如果您的意思是从网站注销，那么这应该不是问题，因为 PHP 不再关心记录程序。

# c# - 使用它的描述属性获取枚举的值

> ID：15217548
> 
> 赞同：1
> 
> 时间：2013-03-05T06:51:24.607
> 
> 标签：c#, enums

我有一个具有如下描述属性的枚举：

```
public enum MyEnum
{
    Name1 = 1,
    [Description("Here is another")]
    HereIsAnother = 2,
    [Description("Last one")]
    LastOne = 3
} 
```

我的“最后一个”值为 3

返回的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:54:17.757

你可以这样做

```
int lastOneValue = (int) MyEnum.LastOne; 
```

此代码返回值 2 而不是“LastOne”

```
string lastOneString = MyEnum.LastOne.ToString(); 
```

此代码将“LastOne”作为字符串值返回

```
MyEnum mynum = MyEnum.LastOne; 
```

此代码创建新对象`MyEnum`并将其值设置为“LastOne”

# iphone - 如何删除 AQGridView 中的单元格？

> ID：15217549
> 
> 赞同：1
> 
> 时间：2013-03-05T06:51:28.963
> 
> 标签：iphone, gridview, uicollectionview, aqgridview

我正在使用[AQGridView](https://github.com/AlanQuatermain/AQGridView)在 GridView 中显示图像。现在我必须删除在 GridView 中添加的单元格。在表格视图中，我们可以使用`commitEditingStyle`AQGridView 框架中是否有任何方法来删除每个单元格。或者请给我任何在 GridView 中显示的用于插入和删除的替代框架。

我的另一个问题是如果我使用`UIColletionView`它是否支持低于 iOS 6？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:55:08.893

```
[gridArray removeObjectAtIndex:[albumCell displayIndex]];
NSIndexSet* set = [NSIndexSet indexSetWithIndex:[albumCell displayIndex]]; 
[gridView beginUpdates];    
[gridView deleteItemsAtIndices:set  withAnimation:AQGridViewItemAnimationFade];
[gridView endUpdates]; 
```

[还要检查这个链接](https://stackoverflow.com/questions/5320920/how-to-enable-aqgridview-edit-mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T10:58:19.827

[GMGridView](https://www.cocoacontrols.com/controls/gmgridview)是 AQGridView 的替代 gridview 框架

如果想用 AQGridView 实现删除，可以创建自定义单元格。向此单元格添加按钮以删除 AQGridViewDelegate 中的添加委托方法，该方法应在您的类中实现。

# php - 将更新从服务器发送到 iPhone 的最佳方式是什么？

> ID：15217552
> 
> 赞同：0
> 
> 时间：2013-03-05T06:51:36.530
> 
> 标签：php, objective-c, apple-push-notifications

我只是在开发 IOS 应用程序，我可以轻松地将数据从 Iphone 发布到服务器并获取响应。当有人在服务器端更新值（来自网站）时，问题就开始了，现在我必须“发布" 对 iphone 的更改和更新表的更改 - 那里。

有没有办法从服务器通信到 iphone 来传输数据？我想使用推送通知，问题是我不知道我是否可以信任它（如果应用程序没有运行怎么办？我不想通知用户他做了更改，我只是想更新iphone 所以它会调用一个函数来更新它的表..)

服务器语言是 PHP。

希望它足够清楚..

谢谢！

伊兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:27:41.367

您可以实现两件事：

*   让 iPhone 应用程序以一定的间隔请求服务器数据（轮询，例如每 10 秒）。这仅在更新可以以小的延迟转发时才有用。另一个缺点是由于请求很多，您的服务器负载会更高一些
*   在服务器和 iphone 应用程序之间打开一个[套接字。](http://php.net/manual/en/book.sockets.php)您可以为此使用[CocoaASyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)。您可以随时向您的 iPhone 应用程序发送消息。如果 iPhone 应用程序关闭，您可以关闭套接字连接，用户将不会再收到更新

# multithreading - Asio SSL 流线程安全

> ID：15217555
> 
> 赞同：1
> 
> 时间：2013-03-05T06:51:42.447
> 
> 标签：multithreading, ssl, thread-safety, boost-asio

我正在检查有关 Asio 的文档，准确地说是 SSL 部分并遇到 了线程安全声明： 现在我明白 OpenSSL BIO 不允许并发和操作，但我无法找到哪些函数专门用于.[`ssl::stream`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/ssl__stream.html)

`Shared objects: Unsafe. The application must also ensure that all asynchronous operations are performed within the same implicit or explicit strand.`
`SSL_Read``SSL_Write``strand`

*   因为使用`strand.post(async_read)`/`strand.post(async_write)`不应该（据我所知）确保并发`SSL_Read`并且`SSL_Write`不会发生，因为即使这些异步函数不会立即执行，它们也会立即返回，因此不会读取任何数据。
*   也使用`strand`on 处理程序函数（对我来说）似乎也没有什么好处，因为当这些处理程序被调用时，数据已经被读取并复制到用户定义的缓冲区中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:28:28.340

好的，经过更多谷歌搜索后，我找到了我想要的东西。解决方案是在 HTTP Server 3 示例中，它在完成处理程序上使用 strand。即使我仍然不明白它有什么帮助，它确实可以防止并发 SSL 操作，因此不会使我的程序崩溃。

# javascript - d3.js中多折线图中的系列标签

> ID：15217560
> 
> 赞同：1
> 
> 时间：2013-03-05T06:52:19.757
> 
> 标签：javascript, d3.js

我正在尝试做一个多系列折线图，就像这里的例子[http://bl.ocks.org/mbostock/3884955](http://bl.ocks.org/mbostock/3884955)

唯一的区别是我试图在两组数据之间进行转换。过渡效果非常好，但我不知道如何开始让系列标签与每一行对齐，就像该示例中的情况一样。

有没有人对如何去做有任何想法？我的代码的设置方式与上面的示例略有不同，因此我无法严格遵循它。但即使我这样做，数据标签也不会通过......

这是我的代码：

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>    
body {
  font: 10px serif;
}    
.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
    fill: none;
  stroke: #000;
  shape-rendering: crispEdges;

}
    .line {
  fill: none;
  stroke-width: 1.5px;
}
</style>
<body>
<script src="http://d3js.org/d3.v3.js"></script>
<script>

var width = 550;
            var height = 600;
            var padding=60;

var parseDate = d3.time.format("%Y").parse;
var x = d3.time.scale().range([padding, width-padding]);
var y = d3.scale.linear().range([height-padding, padding]);        

var z = d3.scale.category10();

var xAxis = d3.svg.axis().scale(x).orient("bottom");
var yAxis = d3.svg.axis().scale(y).orient("left");

var svg = d3.select("body").append("svg").attr("width", width).attr("height", height)

//load CSV
d3.csv("diverge-nonscaled1950.csv", function(error, data) {

    data.forEach(function(d) {
    d.date = parseDate(d.date);
    d.India=+d.India;
    d.China=+d.China;
      });

  //compute column names
var seriesNames = d3.keys(data[0]).filter(function(d) { return d !== "date"; })
      .sort();

 //this is dataset one: data is scaled to column name INdia
      var series = seriesNames.map(function(series) {
    return data.map(function(d) {
      return {x: d.date, y: ((+d[series]/d.India)*100)};
    });

  });

 //this is dataset two: data is scaled to column name China
      var series1 = seriesNames.map(function(series1) {
    return data.map(function(d) {
      return {x: d.date, y: ((+d[series1]/d.China)*100)};
    });

  });

var line = d3.svg.line()
    .interpolate("basis")
   // .defined(function(d) { return d.country>0; })
    .x(function(d) { return x(d.x); })
    .y(function(d) { return y(d.y); });   

//domains
x.domain(d3.extent(data, function(d) { return d.date; }));
 y.domain([0,2300]);
 z.domain(seriesNames)

//axes
  svg.append("g")
      .attr("class", "x axis")
.attr("transform", "translate(0," + (height-padding) + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(" + padding + ",0)")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("x",0-(height/2.5))
      .attr("y", -50)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .style("font-size",11)
      .text("Relative per Capita Incomes");;

//draw path
svg.selectAll(".line")
    .data(series)
  .enter().append("path")
    .attr("class", "line")
    .attr("d", line)
    .attr("stroke",function(d, i) { return z(i); })

 //first transition from dataset one to two   
d3.select("svg")
               .on("click",file1);

function file1(){
svg.selectAll(".line").data(series1)
    .transition().duration(750)
    .attr("d", line)
    .attr("stroke",function(d, i) { return z(i); })

d3.select("svg")
               .on("click",file2);

  }

 //second transition back to one
function file2(){
svg.selectAll(".line").data(series)
    .transition().duration(750)
    .attr("d", line)
    .attr("stroke",function(d, i) { return z(i); })

d3.select("svg")
               .on("click",file1);

} 

});

</script>
</body> 
```

非常感谢您的任何帮助... Avin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:04:39.417

不久前我也遇到了麻烦。与您发布的示例一样，您必须使用 d3 的[selection.datum()](https://github.com/mbostock/d3/wiki/Selections#wiki-datum)方法，该方法为单个元素获取数据。然后，您将选择每个系列中的最终数据点，`thing[thing.length - 1]`并使用该点的 x 和 y 值对文本执行转换/翻译。代码的相关部分是：

```
 city.append("text")
  .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
  .attr("transform", function(d) { 
      return "translate(" + x(d.value.date) + "," + y(d.value.temperature) + ")";
  }) 
```

然后动画只是更新转换的问题，例如：

```
city.selectAll('text').transition()
    .attr("transform", function(d) { 
        return "translate(" + x(d.value.date) + "," + y(d.value.temperature) + ")"; 
    }) 
```

您还可以查看我不久前制作[的图表](http://bl.ocks.org/nsonnad/4175202)，该图表似乎与您正在尝试做的事情相似。

# c# - 根据动态键获取重复数据

> ID：15217566
> 
> 赞同：3
> 
> 时间：2013-03-05T06:52:54.500
> 
> 标签：c#, linq

我有一个 Person 对象列表：

```
List<PersonData> AllPersons 
```

从这个列表中，我想要所有那些基于某个属性重复的人对象。

例如，此代码根据 Id 给出所有重复项

```
var duplicateKeys = AllPersons.GroupBy(p => p.Id).Select(g => new { g.Key, Count = g.Count() }).Where(x => x.Count > 1).ToList().Select(d => d.Key);
    duplicates =  AllPersons.Where(p => duplicateKeys.Contains(p.Id)).ToList(); 
```

p.Id 部分可以是动态的吗？

这意味着如果用户在配置文件中指定唯一列并且它的读取方式如下：

```
string uniqueColumn = "FirstName"; 
```

如何组合查询以添加该功能？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:03:35.697

您可以使用反射来实现：

```
List<PersonData> AllPersons = new List<PersonData>()
{
    new PersonData { Id = 1, FirstName = "Tom" },
    new PersonData { Id = 2, FirstName = "Jon" },
    new PersonData { Id = 3, FirstName = "Tom" }
};

string uniqueColumn = "FirstName";

var prop = typeof(PersonData).GetProperty(uniqueColumn);

var duplicateKeys = AllPersons.GroupBy(p => prop.GetValue(p, null))
                              .Select(g => new { g.Key, Count = g.Count() })
                              .Where(x => x.Count > 1)
                              .Select(d => d.Key)
                              .ToList();

var duplicates = AllPersons.Where(p => duplicateKeys.Contains(prop.GetValue(p, null))).ToList(); 
```

`duplicates``FirstName == "Tom"`在查询执行后有 2 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:03:53.390

您可能想查看[Dynamic LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)或[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)。

# android - swype 完成后需要 IME 组合文本提交

> ID：15217567
> 
> 赞同：0
> 
> 时间：2013-03-05T06:52:58.343
> 
> 标签：android, input, android-softkeyboard

感谢您的任何帮助。我会提前承认我的 Java 仍然不成熟，所以我觉得我在我的头上。我几乎整天都在寻找这个答案，并尝试了各种方法都无济于事。

我正在使用一个商业游戏引擎，它将游戏导出到具有 GLSurfaceView 类实现的 Eclipse 项目。他们有一个钩子可以将单键代码发送到游戏引擎中，用于按键和按键事件，我想使用这些钩子从 Android 键盘（软键盘或硬键盘）发送按键。

覆盖 view.onKeyUp、onKeyDown 和 onKeyMultiple 接口可以让我得到我想要做的几乎所有事情，但是当使用像 Swype 这样的 IME 时，我还有一个问题。

当我 swype 这个词时，它会出现在浮动窗口中（我相信 swype 正在绘制这个），但它不会在 onKeyUp、onKeyDown 或 onKeyMultiple 回调中出现。如果我在键盘上敲击空格或任何其他字母，我会得到 onKeyMultiple 回调，它会发送我之前输入的字符串。

我以为我可以在自己的 InputConnection 中调用 finishComposingText()，所以我覆盖了 GLSurfaceView 类中的 View.onCreateInputConnection 方法，然后在游戏引擎的 DrawFrame() 方法中调用了 finishComposingText()，它有点工作。它实际上立即通过 onKeyMultiple 回调发送了文本，但是如果我按下一个键，它会再次发送相同的文本，将其复制到我的“3D 编辑框”中。我也不喜欢每帧都调用它的想法。

我完全不知道应该采取什么方法来让 swype 结果在我 swype 后立即显示而无需按键。游戏引擎没有使用 TextView 或类似的 Android 小部件，所以我也尝试了以下操作，但没有运气：

```
public InputConnection onCreateInputConnection ( EditorInfo outAttrs )
{
    outAttrs.imeOptions = EditorInfo.IME_ACTION_DONE ;
    outAttrs.inputType = InputType.TYPE_NULL;
    oInputC = new BaseInputConnection ( this, false ) ;
    return oInputC;
} 
```

oInputC 只是一个静态变量，我可以用来调用 finishComposingText() 方法。

任何人都可以提出一种方法或参考吗？我只发现了其他几个类似的问题，而且都没有得到回答。似乎没有多少人在创建自己的文本编辑框并且需要为他们实现后端，但这基本上是我需要做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T10:47:19.813

我面临同样的问题，但我想我已经找到了解决方案。我正在检查 TextView 和 EditableInputConnection 的 android 源代码，看看它们是如何做的：事实证明这并不容易。

我想我设法用我的自定义编辑器让它正常工作。这就是我的输入连接的样子。

```
 @Override
    public InputConnection onCreateInputConnection(EditorInfo outAttrs)
    {
        outAttrs.actionLabel = "";
        outAttrs.hintText = "";
        outAttrs.initialCapsMode = 0;
        outAttrs.initialSelEnd = outAttrs.initialSelStart = -1;
        outAttrs.label = "";
        outAttrs.imeOptions = EditorInfo.IME_ACTION_UNSPECIFIED | EditorInfo.IME_FLAG_NO_EXTRACT_UI;        
        outAttrs.inputType = InputType.TYPE_CLASS_TEXT;        
        final InputConnection in = new BaseInputConnection(this, false){
        private HudInputElement getInputElement(){...}
            @Override
        public boolean setComposingText(CharSequence text,
                int newCursorPosition) {
            B2DEngine.getLogger().info("composing text: "+text+","+newCursorPosition);
            HudInputElement input = getInputElement();
            if(input!=null){
                input.setComposingText(text.toString());
            }
            return super.setComposingText(text, newCursorPosition);
        }

        @Override
        public boolean finishComposingText() {
            HudInputElement input = getInputElement();
            if(input!=null){
                input.doneComposing();
            }
            return super.finishComposingText();
        }
        @Override
        public boolean commitText(CharSequence text, int newCursorPosition) {
            B2DEngine.getLogger().info("commit:"+text.toString()+","+this.getEditable().toString());
            HudInputElement input = getInputElement();
            if(input!=null){
                input.doneComposing();
            }
            return super.commitText(text, newCursorPosition);
        }           
        };       

        return in;
    } 
```

由于软输入键盘支持各种自动完成文本的方式，因此当前输入的单词会被区别对待。您必须确保在调用 setComposingText 时，您必须替换之前收到的文本。仅`flag`当用户按下按钮或调用 finishComposingText 或 commitText 时才清除它。

PS不要忘记测试市场上的其他键盘。

# yii - 使用 YII 完全自定义路径？

> ID：15217568
> 
> 赞同：0
> 
> 时间：2013-03-05T06:53:04.953
> 
> 标签：yii

我有各种具有自己设定路径的产品。例如：

1.  电子产品/mp3 播放器/sony-hg122
2.  健身/设备/健身房

如果希望能够访问这种格式的 URL。例如：

```
http://www.mysite.com/fitness/devices/gymboss
http://www.mysite.com/electronics/mp3-players/sony-hg122 
```

我的策略是重写 SiteController 的“init”函数，以便捕获路径，然后将其定向到我自己的渲染函数实现。但是，这不允许我赶上这条路。

我是不是走错了路？这样做的正确策略是什么？

** 编辑 **

我想我必须使用[URL manager](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)。但是，如果它们在数据库中都是自定义的，我该如何动态添加路径格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:11:52.987

Eskimo 的设置对于大多数 Yii 系统来说是一个很好的可靠方法。但是，对于您的，我建议创建一个自定义 UrlRule 来查询您的数据库： [http ://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes)

注意：每个 Yii 请求都会解析 URL 规则，所以要小心。如果您的效率不高，您可能会迅速降低您的网站速度。默认情况下，规则是缓存的（如果您有缓存设置），但我不知道这是否适用于动态数据库规则（我认为不会）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:57:16.270

在您的 URL 管理器 ( *protected/config/main.php* ) 中，设置`urlFormat`为`path`（并且顶部设置`showScriptName`为`false`（这会隐藏 URL 的 index.php 部分））

```
'urlManager' => array(
    'urlFormat' => 'path',
    'showScriptName'=>false, 
```

接下来，在您的规则中，您可以设置如下内容：

```
catalogue/<category_url:.+>/<product_url:.+> => product/view, 
```

因此，它的作用是使用*目录/电子产品/* ipods 之类的结构向*ProductController actionView*路由和请求。然后，您可以像这样访问 URL 的`category_url`和`product_url`部分：

```
$_GET['category_url'];
$_GET['product_url']; 
```

此规则的工作原理是，任何以单词 catalog（紧跟在您的域名之后）、后跟另一个单词 ( `category_url`) 和另一个单词 ( `product_url`) 的 URL 都将被定向到该控制器/操作。

您会注意到，在我的示例中，我在类别和产品前面加上了目录一词。显然，您可以将其替换为您喜欢的任何内容，或者将其全部省略。我将其放入的原因是，请考虑以下 URL：

```
http://mywebsite.com/site/about 
```

如果您遗漏了 URL 的“目录”部分并将您的规则定义为：

```
<category_url:.+>/<product_url:.+> => product/view, 
```

URL 管理器会将 URL 的站点部分视为`category_url`值，将 about 部分视为`product_url`. 为了防止这种情况，您可以使用 URL 的目录部分，或者为非目录页面定义规则（即；为*site/about*定义规则）

规则从上到下解释，并且只有第一个规则匹配。显然，您可以根据需要为尽可能多的不同 URL 结构添加尽可能多的规则。

我希望这能让您走上正确的道路，请随时对您需要的任何问题或说明发表评论

# c++ - 跨子对象边界的指针算法

> ID：15217572
> 
> 赞同：24
> 
> 时间：2013-03-05T06:53:30.393
> 
> 标签：c++, pointers, c++11, language-lawyer, pointer-arithmetic

以下代码（跨子对象边界执行指针算术）是否`T`对其编译的类型（在 C++11[中不一定必须是 POD](http://en.wikipedia.org/wiki/C%2B%2B11#Unrestricted_unions)）或其任何子集具有明确定义的行为？

```
#include <cassert>
#include <cstddef>

template<typename T>
struct Base
{
    // ensure alignment
    union
    {
        T initial;
        char begin;
    };
};

template<typename T, size_t N>
struct Derived : public Base<T>
{
    T rest[N - 1];
    char end;
};

int main()
{
    Derived<float, 10> d;
    assert(&d.rest[9] - &d.initial == 10);
    assert(&d.end - &d.begin == sizeof(float) * 10);
    return 0;
} 
```

LLVM 在内部向量类型的实现中使用了上述技术的变体，该向量类型经过优化，最初将堆栈用于小型数组，但一旦超过初始容量，就会切换到堆分配的缓冲区。（从这个例子中并不清楚这样做的原因，但显然是为了减少模板代码膨胀；如果你看一下代码，这会更清楚[。](http://llvm.org/docs/doxygen/html/SmallVector_8h_source.html)）

**注意：**在任何人抱怨之前，这并不是他们正在做的事情，可能他们的方法比我在这里给出的更符合标准，但我想问一下一般情况。

显然，它在实践中有效，但我很好奇标准中的任何内容是否可以保证这种情况。*鉴于N3242/expr.add*，我倾向于说不：

> 当两个指向同一个数组对象的元素的指针相减时，结果是两个数组元素的下标之差……此外，如果表达式 P 指向数组对象的一个​​元素，或者指向最后一个元素之后的一个元素一个数组对象，并且表达式 Q 指向同一个数组对象的最后一个元素，表达式 ((Q)+1)-(P) 与 ((Q)-(P))+1 具有相同的值并且为 -((P)-((Q)+1))，如果表达式 P 指向数组对象的最后一个元素后一个，则值为零，即使表达式 (Q)+1 不指向数组对象的元素。...除非两个指针都指向同一个数组对象的元素，或者指向数组对象的最后一个元素，否则行为是未定义的。

但理论上，上述引用的中间部分，结合类布局和对齐保证，可能允许以下（次要）调整有效：

```
#include <cassert>
#include <cstddef>

template<typename T>
struct Base
{
    T initial[1];
};

template<typename T, size_t N>
struct Derived : public Base<T>
{
    T rest[N - 1];
};

int main()
{
    Derived<float, 10> d;
    assert(&d.rest[9] - &d.rest[0] == 9);
    assert(&d.rest[0] == &d.initial[1]);
    assert(&d.rest[0] - &d.initial[0] == 1);
    return 0;
} 
```

结合有关`union`布局、与 的可转换性等的各种其他规定`char *`，可以说原始代码也有效。（主要问题是上面给出的指针算术定义缺乏传递性。）

有谁肯定知道吗？*N3242/expr.add*似乎明确指出，指针必须属于同一个“数组对象”才能对其进行定义，但*假设*标准中的其他保证在组合在一起时可能需要定义这种情况是为了保持逻辑上的自洽。（我不赌它，但我认为它至少是可以想象的。）

**编辑**：@MatthieuM 提出了这个类不是标准布局的反对意见，因此可能不能保证在基本子对象和派生的第一个成员之间不包含任何填充，即使两者都对齐到`alignof(T)`. 我不确定这是多么真实，但这会引发以下变体问题：

*   如果继承被删除，这能保证工作吗？

*   `&d.end - &d.begin >= sizeof(float) * 10`即使`&d.end - &d.begin == sizeof(float) * 10`没有也能保证？

**最后编辑**@ArneMertz 主张对*N3242/expr.add*进行非常仔细的阅读（是的，我知道我正在阅读草稿，但它已经足够接近了），但标准是否真的暗示以下内容具有未定义的行为，那么如果交换行被删除？（与上述相同的类定义）

```
int main()
{
    Derived<float, 10> d;
    bool aligned;
    float * p = &d.initial[0], * q = &d.rest[0];

    ++p;
    if((aligned = (p == q)))
    {
        std::swap(p, q); // does it matter if this line is removed?
        *++p = 1.0;
    }

    assert(!aligned || d.rest[1] == 1.0);

    return 0;
} 
```

另外，如果`==`不够强，如果我们利用`std::less`指针上的全序这一事实，并将上面的条件更改为：

```
 if((aligned = (!std::less<float *>()(p, q) && !std::less<float *>()(q, p)))) 
```

根据严格阅读标准，假设两个相等指针指向同一个数组对象的代码是否真的被破坏了？

**编辑**抱歉，只想再添加一个示例，以消除标准布局问题：

```
#include <cassert>
#include <cstddef>
#include <utility>
#include <functional>

// standard layout
struct Base
{
    float initial[1];
    float rest[9];
};

int main()
{
    Base b;
    bool aligned;
    float * p = &b.initial[0], * q = &b.rest[0];

    ++p;
    if((aligned = (p == q)))
    {
        std::swap(p, q); // does it matter if this line is removed?
        *++p = 1.0;
        q = &b.rest[1];
        // std::swap(p, q); // does it matter if this line is added?
        p -= 2; // is this UB?
    }
    assert(!aligned || b.rest[1] == 1.0);
    assert(p == &b.initial[0]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T10:30:42.490

**更新：**这个答案起初错过了一些信息，因此导致错误的结论。

在您的示例中，`initial`并且`rest`显然是不同的（数组）对象，因此将指向`initial`（或其元素）的指针与指向`rest`（或其元素）的指针进行比较是

*   UB，如果您使用指针的差异。（§5.7,6）
*   未指定，如果您使用关系运算符（§5.9,2）
*   定义明确`==`（所以第二次剪断很好，见下文）

# 第一个片段：

对于您提供的报价（**§5.7,6**），在第一个片段中建立差异是未定义的行为：

> 除非两个指针都指向同一个数组对象的元素，或者指向数组对象的最后一个元素，否则行为是未定义的。

澄清第一个示例代码的 UB 部分：

```
//first example
int main()
{
    Derived<float, 10> d;
    assert(&d.rest[9] - &d.initial == 10);            //!!! UB !!!
    assert(&d.end - &d.begin == sizeof(float) * 10);  //!!! UB !!! (*)
    return 0;
} 
```

标有 的行`(*)`很有趣：`d.begin`并且`d.end`不是同一数组的元素，因此操作结果为 UB。尽管事实上您可能`reinterpret_cast<char*>(&d)`在结果数组中同时拥有它们的地址，但还是会这样做。但是由于该数组是*所有*的表示，`d`因此不能将其视为*对*. `d`因此，尽管该操作可能会起作用并在任何人可以梦想的实现中给出预期的结果，但它仍然是 UB - 作为定义问题。

# 第二个片段：

这实际上是定义明确的行为，但实现定义的结果：

```
int main()
{
    Derived<float, 10> d;
    assert(&d.rest[9] - &d.rest[0] == 9);
    assert(&d.rest[0] == &d.initial[1]);         //(!)
    assert(&d.initial[1] - &d.initial[0] == 1);
    return 0;
} 
```

标有的行*不是*`(!)`ub ，但其结果是*implementation defined*，因为填充、对齐和提到的工具可能会起作用。但是*，如果*该断言成立，**您可以像使用一个数组一样使用两个对象部分**。

 *****你会知道那`rest[0]`会立即`initial[0]`留在记忆中。*乍一看*，你不能轻易使用等式：

*   `initial[1]`将指向 的末尾`initial`，取消引用它是 UB。
*   `rest[-1]`显然是越界了。

但进入**§3.9.2,3**：

> 如果一个类型的对象`T`位于一个地址，那么一个值为地址的*cv*`A`类型的指针被称为指向该对象，而不管该值是如何获得的。[注意：例如，数组末尾的地址（5.7）将被认为指向可能位于该地址的数组元素类型的不相关对象。 *`T*``A`*

 *因此`&initial[1] == &rest[0]`，如果它是二进制的，就好像只有一个数组一样，一切都会好的。

您可以遍历两个数组，因为您可以在边界处应用一些“指针上下文切换”。所以对于你的最后一个片段：`swap`不需要！

但是，有一些警告：`rest[-1]`是 UB，因此也是`initial[2]`，因为**§5.7,5**：

> 如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则计算不应产生溢出；**否则，行为是 undefined**。

（强调我的）。那么这两者是如何结合在一起的呢？

*   “好路径”：没问题`&initial[1]`，因为`&initial[1] == &rest[0]`您可以获取该地址并继续增加指针以访问 的其他元素`rest`，因为 §3.9.2,3
*   "Bad path": `initial[2]`is `*(initial + 2)`，但由于 §5.7,5`initial +2`已经是 UB，您永远无法在此处使用 §3.9.2,3。

一起：您必须在边界处停下来，稍作休息以检查地址是否相等，然后您可以继续前进。******

# ruby-on-rails - 网站无法在所有浏览器上运行

> ID：15217573
> 
> 赞同：0
> 
> 时间：2013-03-05T06:53:33.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internet-explorer, twitter-bootstrap

我的网站在我的 mac 和 iphone 上运行良好，但在 IE 中却不行。在 IE 中，一些导航栏功能不正确（即布局不正确，搜索框没有占位符文本，导航栏元素之一（收藏夹）看起来完全不同）。我不确定问题出在哪里

布局/application.html.erb 是

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <%= analytics_init if Rails.env.production? %>
  <title>Guidelines for Me</title>

  <%= stylesheet_link_tag    "application", :media => "all" %>

  <%= javascript_include_tag "application" %>
  <link href="../assets/bootstrap-responsive.css" rel="stylesheet">
  <%= csrf_meta_tags %>

  <script type="text/javascript">
function clearDefault(el) {
if (el.defaultValue==el.value) el.value = ""
}
function clearText(){
    search = $('.search-query');
    if (search.defaultValue==search.value)
    search.value = ""
}
type="text/javascript">
$(document).ready(function() {
    $('.collapse').collapse();
}); 

</script>
</head>
<body>

    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </a>

                <% if Guideline.count % 100 ==0 %>
                    <%= link_to "#{Guideline.count}" " guidelinesforme - yay!", guidelines_path, :class => 'brand' %>
                <% else %>

                    <%= link_to "#{Guideline.count}" " guidelinesforme!", guidelines_path, :class => 'brand' %>
                <% end %>

            <div class="nav-collapse in collapse">
                <ul class="nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        List by...
                        <b class="caret"></b>
                        </a>

                    <ul class="dropdown-menu">
                        <li><%= link_to "...Topic", topics_path %></li>
                        <li><%= link_to "...Organisation", hospitals_path %></li>
                        <li><%= link_to "...Specialty", specialties_path %></li>
                        </li>   
                    </ul>

                    <% if user_signed_in? %>
                        <li><%= link_to "Favourites", favourites_path %></li>
                    <% else %>  
                        <li><%= link_to "Favourites", register_path %></li>
                    <% end %>
                </ul>

                <ul class="nav pull-right">
                <li class="dropdown">
                     <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    <% if user_signed_in? %>
                        <%= current_user.first_name %>
                    <% else %>
                        Log in or Sign up
                    <% end %>
                    <b class="caret"></b>
                    </a>

                <ul class="dropdown-menu">

                    <% if user_signed_in? %>
                        <li ><%= link_to "Edit profile", edit_path %></li>
                        <li> <%= link_to "Log out", logout_path %></li>
                    <% else %>
                        <li><%= link_to "Log in", login_path %></li>
                        <li><%= link_to "Sign Up", register_path %></li>
                    <% end %>

                    <li><%= link_to "About us", about_path %></li>
                    </li>
                </ul>

                </li>

                    <li >
                    <%= form_tag guidelines_path, :class => 'navbar-search', :onSubmit=>"clearText(this)",:method => :get do %>  

                    <%= text_field_tag :search, params[:search], :class => 'search-query input-small', :placeholder=>"Search", :ONFOCUS=>"clearDefault(this)" %> <% end %>
                    </li>

                </ul>
            </div>
            </div>
        </div>
    </div>

    <div class="container">

        <% flash.each do |type, message| %>

            <div class="alert <%= flash_class type %>">
                <button class="close" data-dismiss="alert">x</button>
                <%= message %>
            </div>
        <% end %>
    </div>

    <div class="container"> 
        <%= yield %>
    </div>

</body>

</html> 
```

我用过推特引导程序。

我确实添加了

```
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

在我之前，但似乎没有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:59:09.227

首先，直到 IE9 才支持占位符。但是您可以使用 javascript pollyfills 来启用占位符支持， 为此目的使用[http://www.modernizr.com/ 。](http://www.modernizr.com/)

# javascript - RequireJS + Backbone：导入视图模块以某种方式与模型模块冲突

> ID：15217578
> 
> 赞同：0
> 
> 时间：2013-03-05T06:53:43.033
> 
> 标签：javascript, backbone.js, requirejs

我对 Backbone 有点陌生，在下面的代码中，当我使用 RequireJS`AceModel`加载时，我无法调用构造函数。`AceView`也就是说，如果我删除了`AceView`回调函数中的参数传递`snap.js`，我可以调用`new AceModel()`它并且它可以工作，但是如果我有，`AceView`那么构造函数会失败并出现错误：`TypeError: Cannot call method 'get' of undefined`。

这里发生了什么？

查看/snap.js

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/Panel',
    'models/ace',
    'views/ace',
    'views/panel'
], function ($, _, Backbone, Panel, AceView, AceModel, PanelView) {
    'use strict';

    var SnapView = Backbone.View.extend({

        initialize: function () {
            this.el = '#snap';
            this.$el = $(this.el);
            this.$elLoadSbml = this.$el.children().find('div#loadSbml');
            this.loadSbmlView = new AceView({
                el: this.$elLoadSbml[0],
                model: new AceModel({mode: 'monokai'})
            });
        },

    });

    return SnapView;
}); 
```

意见/ace.js

```
define([
    'jquery',
    'underscore',
    'backbone'
],
    function($, _, Backbone) {
        'use strict';

        var AceView = Backbone.View.extend({
            initialize: function () {
                this.editor = ace.edit(this.el);
                this.editor.setTheme("ace/theme/" + this.model.get('theme'));
                this.editor.getSession().setMode("ace/mode/" + this.model.get('mode'));
                this.render();
            },

            render: function () {
                $(this.el).height(this.model.get('height'));
                $(this.el).width(this.model.get('width'));
                this.editor.resize();
            }
        });
        return AceView;
    }); 
```

模型/ace.js

```
define([
    'jquery',
    'underscore',
    'backbone'
], function ($, _, Backbone) {
    'use strict';

    var AceModel = Backbone.Model.extend({
        defaults: {
            height: 800,
            width: 400,
            theme: 'github',
            mode: 'xml'
        }
    });

    return AceModel;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:15:54.883

似乎您的导入顺序有一个小错误：

```
'jquery', -> $,
'underscore', -> _
'backbone', -> Backbone
'models/Panel', -> Panel
'models/ace', -> AceView
'views/ace', -> AceModel
'views/panel -> PanelView 
```

您已交换`models/ace`并`views/ace`

# java - 我们可以在java中检测USB Pen Drive的唯一序列号吗？

> ID：15217584
> 
> 赞同：6
> 
> 时间：2013-03-05T06:54:01.173
> 
> 标签：java, usb-drive

我用谷歌搜索了很多，但很少有例子可以找到使用 C++ 的 USB 驱动器的序列号。我想在java中找出USB闪存驱动器的唯一ID？或任何其他 ID，以便我可以唯一识别 USB 闪存驱动器。

提前致谢。

# armv7 - 在 armv7 armv7s 架构上安装 monkeytalk 得到错误 Command /bin/sh failed with exit code 1

> ID：15217591
> 
> 赞同：1
> 
> 时间：2013-03-05T06:54:19.503
> 
> 标签：armv7, monkeytalk

我正在通过[此链接](https://www.gorillalogic.com/monkeytalk-documentation/monkeytalk-getting-started/install-agent/ios)执行所有步骤，并在完成时出现此错误*"Command /bin/sh failed with exit code 1"*。

这个项目的架构是**armv7 armv7s**。有人有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:41:37.503

目前尚不清楚您的确切问题是什么，但我遇到了同样的错误，我像下面这样解决了它。

您是否尝试在从 shell 脚本构建后在模拟器上执行 monkeytalk 测试，如果是这样，您必须为模拟器 "i386" 添加架构。这是一个对我有用的命令

```
/usr/bin/xcodebuild -target FuncTest CODE_SIGN_IDENTITY="iPhone Distribution: xxxxxxx xxxxxxxxx" PROVISIONING_PROFILE="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXXX" OTHER_LDFLAGS="-lxml2 -all_load -lstdc++" DSTROOT="build" VALID_ARCHS="armv7 armv7s i386" -arch i386 -sdk iphonesimulator6.0 -configuration Release clean build install; 
```

注意：此命令应在包含 xcode 项目文件的目录中的 shell 中执行。

# windows-store-apps - 如何将选项传递给 WinJS 设置页面

> ID：15217593
> 
> 赞同：0
> 
> 时间：2013-03-05T06:54:21.460
> 
> 标签：windows-store-apps, winjs

通过选项将选项传递给常规 PageControl 很好，但是如何将选项传递给设置页面？

ie 使用 SettingsFlyout 的设置页面仍然有 " `ready: function (element, options)`" 事件，但是你如何设置选项呢？导航是在应用程序激活事件中设置的，但似乎没有机会设置选项...

```
 WinJS.Application.onsettings = function ( e )
         {
            e.detail.applicationcommands =
                {
                    "about": { href: "/settings/about/about.html", title: "About" },
                };

            WinJS.UI.SettingsFlyout.populateSettings( e );
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:26:36.093

就像@devhammer 所说，您没有导航到设置页面。事实上，它只是显示在您当前页面上的 SettingsFlyout。但是实际上不需要传递任何东西，因为 SettingsFlyout 将可以访问您页面的状态。您可以在主页中定义一个变量，然后在设置页面上访问它。如果您有应用程序级别的数据，您可以在应用程序对象上添加一些状态。我所做的是将`var app = WinJS.Application`默认情况下位于 default.js 中的行移动到全局范围内，以便我可以从任何地方访问它，然后在需要的地方使用它。顺便说一句，不要听那些告诉你全局范围是邪恶的人。只要您知道要在全局范围内放置什么以及原因，就可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:18:40.263

鉴于您没有使用普通的 WinJS.Navigation.navigate 方法导航到页面，我不确定您是否可以为要添加的设置页面传递除标题和 URI 之外的任何状态。

因此，设置页面上的选项参数将始终未定义。

# python - Python删除特定标签下的文本

> ID：15217594
> 
> 赞同：0
> 
> 时间：2013-03-05T06:54:30.627
> 
> 标签：python, html

我想删除 HTML 中特定标签下的某些文本。我想删除下的最后一个`<TEXT>`。

我想当有 时`<TYPE>GRAPHIC`，`<TEXT>`有一些有线内容。我只是想删除的内容`<TEXT>`

请帮我。谢谢你

```
</DIV>

<DIV align="left" style="font-size: 10pt; margin-top: 6pt">In connection with the Annual Report on Form 20-F of SearchMedia Holdings Limited (the &#147;Company&#148;)for the fiscal year ended December&nbsp;31, 2010, as filed with the Securities and Exchange Commissionon the date hereof (the &#147;Report&#148;), I, Wilfred Chow, Chief Financial Officer of the Company, hereby certify, pursuant to 18 U.S.C. &#167;1350, as adopted pursuant to Section&nbsp;906 of the Sarbanes-Oxley Actof 2002, that, to my knowledge:
</DIV>

</BODY>
</HTML>
</TEXT>
</DOCUMENT>
<DOCUMENT>
<TYPE>GRAPHIC
<SEQUENCE>7
<FILENAME>g27632g2763201.gif
<DESCRIPTION>GRAPHIC
<TEXT>
begin 644 g27632g2763201.gif
M1TE&.#EA50)Q`^8``'EV=1D6%M73T8J(B)"-BD5#1*FFI=W;VOO[^H."@CDW
M-I>4D\'`P,C&Q\_+R$Q*2@@&!RTI*+6SLKV[NO;V]:6CH:VKJ>7DXVMH9X&4
MC?+R\9V;F5514>[M["0E)%E6565B8>KIZ%%-3%U:66UJ:N+AX.?EXZ_,PM#.
MS;"MK+BVM7!M;,;$Q)B6E:"=G(>%A;^]O,3"P=?6U<K)R&AE9)&JHV!=7-_>
MW>3BXF]_>G]\?.SKZDA%1>CFY<_-S+*PK\*_OC`M+.'@W^WLZS\\/"@E)9>P
MJ;JXM^CGYJ*@G]K8UX.`?\W+RLO(Q9J8EW.$?JNGI1\<').0C_7T\]+0SW-Q
M<+75RXR(AV-@7^_O[O/S\EM85Z&[LV-S;\;#P@X+#*;#NDQ(1T-`/U-04#0Q
M,+K;T2LH)R0@($E'1XRBFHF'A[#.Q!01Q54BHG)R(?'SM"0%)=6?W]_45-
M2OCX]_'P[T%'0VEG9U)/3Y&.CS(O+[[@UHJ@F%AC7\#BV/___R'Y!```````
M+`````!5`G$#``?_@'^"@X2%AH>(B8J+C(V.CY"1DI.4E9:7F)F:FYR=GI^@
MH:*CI*6FE7@/JJNLK:ZOL+&RL[2UMK>XN;J[O+V^O[``I\/$Q<;'R)%?57G-
MSL_0T=+3U-76U]C9VMO<W=[?X.'BT1\%R>?HZ>KKE%\-[/#Q\O.,"^;T^/GZ
M^X_N_/\``W*R)["@P8/$_"%<R-`@P880(TIDI'"BQ8O)'F+<R%%@Q8X@0V[2
M*+*DR7,?3ZI<B8@DRY<P.:4T5&()A@4A-G5PLJ.0A#Q*",W(<X`1$PM_8$A@ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:57:58.510

你可以试试`lxml`，或者`pyquery`。使用它可以很容易地操作 HTML / XML 文档

# coldfusion - Cfm 页面被下载而不是在浏览器中呈现

> ID：15217595
> 
> 赞同：2
> 
> 时间：2013-03-05T06:54:34.743
> 
> 标签：coldfusion, cfml, coldfusion-6

我已经完成了coldfusion-61的设置。当我尝试点击cfm页面的URL时，会弹出一个下载窗口，询问我是否要保存文件。这发生在 Internet Explorer 中。在 Mozilla 中，它只显示写在 cfm 文件中的代码。我在网上查了一下，大多数人建议重新安装，但问题仍然存在。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:26:38.223

由于您使用端口 8500，我假设您使用的是内部服务器并且 bot 是否安装了 iis？您确定在安装过程中选择了 rhis 选项吗？您还检查过服务是否实际运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:38:50.680

我在 CF10 上遇到了这个问题，最后是应用程序池的问题。我必须重新创建池，然后才能继续处理其他问题。

# ios - 在方向更改时加载纵向和横向笔尖的方法？

> ID：15217603
> 
> 赞同：0
> 
> 时间：2013-03-05T06:55:06.677
> 
> 标签：ios, orientation, nib

有没有办法指定笔尖名称，以便应用程序在方向发生变化时自动拾取横向或纵向的相应笔尖。就像 iphone 4 和 iphone 5 有 Default@2x.png 和 Default-568h@2x.png 之类的那。如果不是？，我正在尝试在应用程序委托方法中添加观察者以更改方向，它工作正常，但是在orientationChanged方法中更改笔尖时会导致应用程序崩溃并产生错误，如下所示：

```
 *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<FRAppDelegate 0xa18bf20> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key __mapView.' 
```

我的代码如下：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    self.viewController = [[FRViewController alloc] initWithNibName:@"FRViewController" bundle:nil];

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter]
     addObserver:self selector:@selector(orientationChanged:)
     name:UIDeviceOrientationDidChangeNotification
     object:[UIDevice currentDevice]];

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void) orientationChanged:(NSNotification *)note
{
    UIDevice * device = note.object;
    switch(device.orientation)
    {
        case UIDeviceOrientationPortrait:
        case UIDeviceOrientationPortraitUpsideDown:
        {
           NSArray *nibArray=[[NSBundle mainBundle] loadNibNamed:@"FRViewController" owner:self options:nil];
           [self.viewController setView:[nibArray objectAtIndex:0]];
            NSLog(@"device orientation comes to portrait mode ");
            /* start special animation */
        }
            break;

        case UIDeviceOrientationLandscapeRight:
        case UIDeviceOrientationLandscapeLeft:
        {
            NSArray *nibArray=[[NSBundle mainBundle] loadNibNamed:@"FRViewControllerLand" owner:self options:nil];
            [self.viewController setView:[nibArray objectAtIndex:0]];
            NSLog(@"device orientatino comes to Landscape mode");
            /* start special animation */
        }
            break;

        default:
            break;
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:58:36.410

1.  如果你真的想加载一个不同的笔尖，你可以使用：

    > ```
    > [[NSBundle mainBundle] loadNibNamed:@"PageView_iPhone" owner:self options:nil];
    > NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"PageView_iPhone"
    >                                               owner:self
    >                                             options:nil];
    > PageView_iPhone* myView = [nibViews objectAtIndex:0]; 
    > ```

然后在某些地方将您的视图与新视图交换

像

```
self.view = myView; 
```

1.  或者您可以使用 @Javy 引用的

> 在初始化期间，我设置我的视图（以编程方式创建它们）并为视图控制器中的每个视图的中心位置创建额外的 CGPoint 或为框架创建 CGRect。
> 
> 在 init 中创建视图后，我调用名为 layoutViewsForOrientation 的方法来设置初始位置，并传入当前状态栏方向。当方向改变时，我使用以下代码：
> 
> ```
> - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
> {
>     BOOL result = NO;
>     if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
>         result = (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
>     } else {
>         result = YES;
>     }
>     if( result == YES ) [self layoutViewsForOrientation:interfaceOrientation];
>     return result;
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:19:06.737

虽然这不是加载笔尖的直接解决方案，但我认为您遇到了该错误，因为您的第二个笔尖没有`__mapView`正确设置 UI 对象的出口（即）。即，无论您从 xib 连接到 __mapView 的何处，该类中都不再存在 IBOutlet。

**更新：** 发生这种情况是因为您正在加载保持`FRAppDelegate`为`owner`( 您指定`self`为`owner`.) 的笔尖。如果您将其更改为`self.viewController`，那么您的异常应该会消失。

IE ; 代替 ：

```
NSArray *nibArray=[[NSBundle mainBundle] loadNibNamed:@"FRViewController" owner:self options:nil]; 
NSArray *nibArray=[[NSBundle mainBundle] loadNibNamed:@"FRViewControllerLand" owner:self options:nil]; 
```

采用

```
NSArray *nibArray=[[NSBundle mainBundle] loadNibNamed:@"FRViewController" owner:self.viewController options:nil];
NSArray *nibArray=[[NSBundle mainBundle] loadNibNamed:@"FRViewControllerLand" owner:self.viewController options:nil]; 
```

# apache - 使用 .htaccess 从 www 重定向到非 www url

> ID：15217605
> 
> 赞同：1
> 
> 时间：2013-03-05T06:55:15.157
> 
> 标签：apache, .htaccess

我在我的 .htaccess 文件中使用以下代码重定向应用程序，该页面应该执行以下操作：

1.  用 .html 替换 .php 扩展名
2.  从http重定向到https
3.  从 www 重定向到非 www url

扩展名 .html 工作正常，它从 http 重定向到 https，但问题是从 www 重定向到非 www，它在主 url 上正常工作，但是当引用文件时它不工作。

说当我写 www.ntestechnologies.com 时，我得到了我想要的 URL，即[https://ntestechnologies.com](https://ntestechnologies.com)，但是当我写 www.ntestechnologies.com/index.html 时，我得到了这个[https://www.ntestechnologies.com/index .html](https://www.ntestechnologies.com/index.html)我也不需要这个网址中的 www 请指导我，这是 htaccess 文件中的代码：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

RewriteEngine on

RewriteCond %{HTTP_HOST} ^www\.ntestechnologies\.com$
RewriteRule ^/?$ "https\:\/\/ntestechnologies\.com\/$1" [R=301,L]

RewriteRule ^(.*)\.html$ $1.php [nc] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:50:48.577

你只需要一个`RewriteEngine On`。

您不能`HTTP_HOST`在`REQUEST_URI`. `RewriteRule`如果您需要捕获这些值，则必须在[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)

```
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^(?:www\.)(.+)
RewriteRule .* https://%1/$0 [R,L]

RewriteCond %{HTTP_HOST} ^www\.(.+)
RewriteRule .* https://%1/$0 [R,L] 
```

这将删除前导`www`（如果存在）。同时，它重定向到 HTTPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:13:11.783

```
RewriteEngine On

# Redirects from HTTP to HTTPS. We use %{SERVER_PORT} as it's more reliable than %{HTTPS}
RewriteCond %{SERVER_PORT} !^443$
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R,L]

# Redirects www.example.com/... to example.com/...
RewriteCond %{HTTP_HOST} ^www\.(.+)
RewriteRule .* https://%1%{REQUEST_URI} [R,L]

RewriteRule ^(.*)\.html$ $1.php [nc] 
```

# jquery-mobile - jQueryMobile：如何动态地将内容添加到可折叠 Div

> ID：15217609
> 
> 赞同：0
> 
> 时间：2013-03-05T06:55:50.173
> 
> 标签：jquery-mobile

我有一个可折叠的 div 和那 2 个可折叠的 div。

当单击加号按钮时，我必须动态地将元素添加到这些可折叠的 div 中。我尝试了很多代码，但没有奏效。你能告诉我该怎么做吗？

## HTML 代码

```
<div data-role="content">
 <div data-role="collapsible-set" id="setAllCategory">
     <div data-role="collapsible" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u" id="setCategory1">
        <h1 ><label>Food</label>
        <a data-role="button" id="btnAddSubCat1" name="btnAddSubCat1"  data-rel="popup"  href="#" data-icon="plus" data-iconpos="notext" style="float:right;" ><a/></h1>
     </div>

     <div data-role="collapsible" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u" id="setCategory2">
        <h1 ><label>Dress</label>
        <a data-role="button" id="btnAddSubCat2" name="btnAddSubCat2"  data-rel="popup"  href="#" data-icon="plus" data-iconpos="notext" style="float:right;" ><a/></h1>
     </div>
 </div>
</div> 
```

JavaScript

* * *

```
var subCatObject = "<div class='ui-grid-b'>"
subCatObject        +="<div class='ui-block-a'><label>Hi</label></div>"
subCatObject        +="<div class='ui-block-b'><a href='#' data-role='button' data-iconpos='notext' data-icon='edit'></a></div>"
subCatObject        +="<div class='ui-block-c'><a href='#' data-role='button' data-iconpos='notext' data-icon='delete'></a></div>"
subCatObject        +="</div>";

    $('#btnAddSubCat1').click(function (){
           var temp = $(subCatObject);
           $(temp).appendTo('#setCategory1').page();
           $("#setCategory1").collapsibleset('refresh');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:14:37.653

我改变了你的HTML如下

```
<div data-role="page" id="home">
    <div data-role="content">
        <div data-role="collapsible-set" id="setAllCategory" data-content-theme="d">
            <div data-role="collapsible" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u"
            id="setCategory1">
                 <h1><label>Food</label>
        <a data-role="button" id="btnAddSubCat1" name="btnAddSubCat1"  data-rel="popup"  href="#" data-icon="plus" data-iconpos="notext" style="float:right;" ><a/></h1>

                <div id="setCategoryContent1"></div>
            </div>
            <div data-role="collapsible" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u"
            id="setCategory2">
                 <h1><label>Dress</label>
        <a data-role="button" id="btnAddSubCat2" name="btnAddSubCat2"  data-rel="popup"  href="#" data-icon="plus" data-iconpos="notext" style="float:right;" ><a/></h1>

            </div>
        </div>
    </div>
</div> 
```

和你的javascript如下

```
var subCatObject = "<div class='ui-grid-b'>"
subCatObject += "<div class='ui-block-a'><label>Hi</label></div>"
subCatObject += "<div class='ui-block-b'><a href='#' data-role='button' data-iconpos='notext' data-icon='edit'></a></div>"
subCatObject += "<div class='ui-block-c'><a href='#' data-role='button' data-iconpos='notext' data-icon='delete'></a></div>"
subCatObject += "</div>";

$('#btnAddSubCat1').bind('click', function () {
 $("#setCategoryContent1").html(subCatObject);
 $('#home').trigger('create');
}); 
```

我希望你能从这里开始。

在这里查看工作小提琴[http://jsfiddle.net/PKeSB/2/](http://jsfiddle.net/PKeSB/2/)

# php - 在 Symfony 2 中创建 2 个具有相同形式的不同实体

> ID：15217610
> 
> 赞同：3
> 
> 时间：2013-03-05T06:55:51.927
> 
> 标签：php, forms, symfony-2.1, symfony-forms

是否可以创建 2 个具有相同形式和操作的相关实体？如果是，如何？

我想在 1step 注册中创建一个新用户及其相关问卷。

谢谢，卢卡

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T09:43:53.633

您可以为相关实体（问卷）创建表单类型，并将其用作用户表单类型中的字段类型。这称为表单嵌套。

```
// src/Acme/DemoBundle/Form/Type/QuestionnaireType.php
namespace Acme\DemoBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class QuestionnaireType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        // create your form
    }

    public function getName()
    {
        return 'questionnaire';
    }
}

// src/Acme/DemoBundle/Form/Type/UserType.php
namespace Acme\DemoBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class UserType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        // ...
        $builder->add('questionnaire', new QuestionnaireType());
    }

    public function getName()
    {
        return 'user';
    }
} 
```

# facebook-graph-api - Facebook API - 页面国家限制设置为特定国家获取错误 - 不支持的获取请求

> ID：15217613
> 
> 赞同：2
> 
> 时间：2013-03-05T06:55:59.423
> 
> 标签：facebook-graph-api, access-token, facebook-access-token

我的 Facebook 页面国家限制设置为特定国家。所以，当我使用具有以下 API 的应用程序访问令牌来下载上述 pageid 的 json 时 -

[https://graph.facebook.com/PageId?access_token=xxxxx&method=GET&metadata=true&format=json](https://graph.facebook.com/PageId?access_token=xxxxx&method=GET&metadata=true&format=json)

出现以下错误：-

{"error":{"message":"不支持的获取请求。","type":"GraphMethodException","code":100}}。

请任何人知道我们如何解决这个问题？

# c++ - 使用通用 COM dll 在线程内共享数据

> ID：15217618
> 
> 赞同：0
> 
> 时间：2013-03-05T06:56:29.213
> 
> 标签：c++, com

我对 COM 相当陌生，因此我会很感激我能得到的任何帮助：

我有两个线程 A 和 B。线程 A 调用 COM dll 进行一些处理，最后 dll 将结果存储在哈希映射中并将其写入文件。我需要知道如何将此哈希映射发送到线程 B。据我了解，COM udt 不支持哈希映射。在某些情况下，哈希映射最多可以存储 20000 个值，因此我正在寻找一种不会影响性能的解决方案。

主程序是用 C++ 编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:11:52.690

由于 COM dll 创建文件，您可以简单地返回文件名或在更复杂的场景中 - 打开的文件句柄

# entity-framework-5 - DbContext.SaveChanges 无法保存有效实体

> ID：15217619
> 
> 赞同：0
> 
> 时间：2013-03-05T06:56:36.523
> 
> 标签：entity-framework-5, dbcontext, savechanges

我将 EF 5 与 Code First POCO 一起使用。

这是存储库的 SaveChanges 实现：

```
 public virtual List<DbEntityValidationResult> SaveChanges()
    {
        var errors = new List<DbEntityValidationResult>();
        try
        {
            DbContext.SaveChanges();
        }
        catch (DbEntityValidationException ex)
        {
            errors.AddRange(ex.EntityValidationErrors);
        }

        return errors;
    } 
```

单个验证错误会导致没有实体被写入数据库。我曾期望写出有效实体并收到无效实体的错误。

这就是EF应该采取的行动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:03:47.243

这就是EF的工作方式。

`SaveChanges()`创建一个事务并尝试保存上下文中的所有更改。

如果任何写入因任何原因失败，则整个事务将回滚并且不会保留任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T22:51:38.740

我做了更多的挖掘。EEF 不会尝试写入实体。它首先从对象上下文调用验证。如果任何实体失败，则将它们添加到 DbValidationResult 并取消保存。

对于批量交易，您可以删除这些实体并处理任何错误，然后重新保存。

一旦所有实体都通过验证，EF 会根据需要将更改写入数据库。

# spring - 如果您打算在多个方法中处理相同的路径 Spring

> ID：15217623
> 
> 赞同：1
> 
> 时间：2013-03-05T06:56:47.207
> 
> 标签：spring, model-view-controller

我正在使用弹簧 MVC。

我的控制器是：

```
@RequestMapping(value = "/approval/pendingescort", method = RequestMethod.GET)
public String getPendingEscort(Model model) {

    log.debug("Received request to show Pending Escorts");

// Retrieve all pending escort details by delegating the call to Servicelayer
    List<EscortRegistration> pendingEscortdetails = approvalService.getAllPendingEscort();

// Attach zones to the Model
     model.addAttribute("pendingEscortdetails", pendingEscortdetails);

// This will resolve to /WEB-INF/jsp/pendingescort.jsp
    return "pendingescort";
}

@RequestMapping(value = "/approval/pendingescort/success", method = RequestMethod.GET)
public String addEscort(@RequestParam(value="mobileno", required=true) String mobileno,Model model) {

    log.debug("Received request to Accept Escort Request");

        // Call ZonedetailsService to do the actual Updating
        approvalService.approveEscortRequest(mobileno);

        // Add mobile reference to Model
        model.addAttribute("mobileno", mobileno);

        // This will resolve to /WEB-INF/jsp/addedescortpage.jsp
        return "pendingescort";
} 
```

我的 JSP 是：

```
<tbody>
                    <c:forEach items="${pendingEscortdetails}" var="escort">
                    <c:url var="editUrl" value="/efmfm/main/approval/pendingescort/success?mobileno=${escort.mobilenumber}" />
                    <c:url var="deleteUrl" value="/efmfm/main/approval/pendingescort/delete?mobileno=${escort.mobilenumber}" />
                    <tr>
                    <td><c:out value="${escort.mobilenumber}" /></td>
                    <td><c:out value="${escort.imei}" /></td>
                <td>    <a href="${editUrl}" class="approv">Approve</a> 

                    <!--  <td>Approve</td> -->
                    <a href="${deleteUrl}" class="approv">Reject</a>
                    </td>
                    </tr>
                    </c:forEach>
                </tbody 
```

当我单击以批准其发送到成功页面时。我想通过刷新将其带到上一页。任何人都可以解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:30:32.927

采用

```
return "redirect:../../../approval/pendingescort"; 
```

代替

```
return "pendingescort"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:35:41.240

第一：我猜你需要使用`"../.."`

```
return "redirect:../../../approval/pendingescort"; 
```

还有一个疑问。你用瓷砖吗？？

# mysql - MySQL `INNER JOIN` 同一张表的倍数

> ID：15217624
> 
> 赞同：0
> 
> 时间：2013-03-05T06:56:47.270
> 
> 标签：mysql, sql, join, left-join

是否可以`INNER JOIN`通过 MySQL 查询来实现此结果？

我有一张包含策略的表格和一张包含成员的表格。Strategy 表包含与 Member 表中的 ID 对应的作者 ID，以及更新现有作者作品的作者 ID。是否可以同时获取对这两个人的引用？类似于以下内容，它不返回错误，但也没有结果......

```
SELECT * FROM Strategies 
INNER JOIN Members AS a 
INNER JOIN Members AS b 
WHERE Strategies.ID='2' 
AND Strategies.AuthorID = a.ID 
AND Strategies.UpdateAuthorID = b.ID 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T06:59:34.897

使用`LEFT JOIN`：

```
SELECT 
  s.*,
  a.Name AS MemberName,
  b.Name AS UpdatedMemberName
FROM Strategies  AS s
LEFT JOIN Members AS a ON s.AuthorID = a.ID AND s.ID = 2 
LEFT JOIN Members AS b ON s.UpdateAuthorID = b.ID AND s.ID = 2 ; 
```

如果您希望它们在一列中使用`COALESCE`：

```
SELECT 
  s.*,
  COALESCE(a.Name, b.Name) AS MemberName
FROM Strategies  AS s
LEFT JOIN Members AS a ON s.AuthorID = a.ID AND s.ID = 2 
LEFT JOIN Members AS b ON s.UpdateAuthorID = b.ID AND s.ID = 2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T06:59:49.557

```
SELECT toD.dom_url AS ToURL, 
    fromD.dom_url AS FromUrl, 
    rvw.*

FROM reviews AS rvw

LEFT JOIN domain AS toD 
    ON toD.Dom_ID = rvw.rev_dom_for

LEFT JOIN domain AS fromD 
    ON fromD.Dom_ID = rvw.rev_dom_from 
```

如果域是表名

# ios - 从 xpath 表达式返回的乱码

> ID：15217626
> 
> 赞同：0
> 
> 时间：2013-03-05T06:56:54.553
> 
> 标签：ios, xpath

我正在使用 thpple 从该站点 [http://www.ehp.qld.gov.au/coastal/monitoring/waves/site.php?siteid=64](http://www.ehp.qld.gov.au/coastal/monitoring/waves/site.php?siteid=64)捕获波高和波向数据以在 IOS 应用程序中使用我正在开发。它们都包含在强标签中，我想知道这些是否会导致返回的乱码文本。

波高为`‰X#å`。

波的方向是`‰X#å`。

我使用的 xpath 表达式是：

```
/html/body/div[4]/div[1]/div[2]/div[2]//p//strong 
```

提前致谢。

# java - 在 Android 上创建一个轻量级的 openvpn 客户端（已经配置了服务器）

> ID：15217627
> 
> 赞同：6
> 
> 时间：2013-03-05T06:57:03.517
> 
> 标签：java, android, client, vpn, openvpn

我有一台安装 openvpn 的服务器。我已经配置了一些客户端，现在我想创建一个 openvpn 客户端以使用我创建的客户端配置连接到它。

我知道市场上有一个 OpenVpn 客户端。但是，我怎么能用VPN API（VpnService，...）做我自己的客户端因为我想为应用程序提供客户端配置，所以客户端只会连接android系统

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T12:11:41.940

OpenVPN for Android 客户端的源代码可在[http://github.com/schwabe/ics-openvpn/](http://github.com/schwabe/ics-openvpn/)下找到。拥有一个正常工作的 Android OpenVPN 核心所需的文件子集相对较小，因为客户端具有相对较好的控制和 UI 分离。

Play 上已经有许多客户端使用 ics-openvpn 项目作为基础（通常没有适当的版权归属，也没有按照 GPL 的要求提供源代码）

# android - android在布局中安排文本视图

> ID：15217628
> 
> 赞同：4
> 
> 时间：2013-03-05T06:57:05.397
> 
> 标签：android, android-layout

我需要在布局中有 3 个文本。中间`textView`是红色的，另外两个是黑色的。所以我将它添加到 a`relativelayout`并将 textView2 设置`layout`为 textView1 的右侧，将 textView3设置为 textView2 的右侧

![这就是我所做的](../Images/59bdf089b21d36f70128a12639080a64.png)

但是当第三个文本视图中的文本更大时，它应该是文本视图之一。我明白了。

![当第三个文本更长时，我得到了这个](../Images/78191341714f62fbe11a6029545d4401.png)

现在我该怎么做才能得到这样的东西？

![这就是我需要的](../Images/eb020329a161ff6f11fe20c09ebc9efe.png)

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/rel_lay"
        android:background="#DFDFDF"
        android:padding="2dip" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dip"
            android:text="TextView"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/textView1"
            android:text="TextView"
            android:textColor="#FF0000" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="false"
            android:layout_toRightOf="@+id/textView2"
            android:text="TextView when the third text is longer"
            android:textColor="#000000" />

    </RelativeLayout> 
```

这是具有 3 个 textView 的相对布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:01:34.813

使用[Spanned](http://developer.android.com/reference/android/text/Spanned.html)类和一个 TextView 可能会更好。您尝试实现它的方式，TextView #3 必须在宽度上填充_parent，*并且*能够知道 TextView #2 的结束位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:17:05.877

只需使用一个`TextView`并根据需要设置文本。您知道要为**红色**设置哪些文本。所以你需要的是开始文本和*结束文本的**索引*。

 *使用以下代码。

```
SpannableString spanText = new SpannableString("My Name is Chintan Rathod");
spanText.setSpan(new ForegroundColorSpan(Color.parseColor("#FF0000")), 5 /*start index*/, 10 /*end index*/, 0);
textView.setText(spanText); 
```

在这里，我传递了**5**和**10**，但您可以传递自己的索引。但请确保*索引*在不会触发**IndexOutOfBoundException的范围内***

# python - 使用 blobstore 处理程序获取上传文件的链接

> ID：15217633
> 
> 赞同：1
> 
> 时间：2013-03-05T06:57:33.813
> 
> 标签：python, file, google-app-engine, blobstore

我可以在 python 中使用 uploadhandler 上传文件。当我试图获取文件的 url 时，我收到错误，因为“Assertionerror 图像服务没有 CreateRbc 方法（）请帮助我

```
class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, blob_info):
    blob_info = images.get_serving_url(blob_info)
    self.get_serving_url(blob_info) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:03:21.280

据我了解，您对什么是什么有点困惑。

它[`get_serving_url()`](https://developers.google.com/appengine/docs/python/images/functions#Image_get_serving_url)作为参数 a`blob_key`而不是 a`blob_info`并返回一个字符串，这是一个特定图像的 URL，您可以在该 URL 的末尾添加一些额外的好东西（=s512-c 或 =s256）。

您在代码段中的`ServeHandler`内容是尝试为我猜想的任何 Blob 创建通用服务处理程序，但从很多方面仍然完全被破坏。我强烈建议您先阅读[概述](https://developers.google.com/appengine/docs/python/blobstore/overview)，您可以在其中看到有关如何使用 Google App Engine 上传和提供文件的完整示例。

# codeigniter - 如何在 codeigniter 会话中删除一些值数组

> ID：15217640
> 
> 赞同：0
> 
> 时间：2013-03-05T06:58:05.023
> 
> 标签：codeigniter, session

这些我的函数//将数组数据存储到会话

```
function justSession($code)
{
    $data = $this->session->userdata('code');
    $data[] = $code;
    $this->session->set_userdata('code',$data);
} 
```

然后这些函数到 print_r 会话

```
function printSession()
{
    print_r($this->session->userdata('code'));
} 
```

然后 printSession() 的输出是`Array([0]=>KG001[1]=>KG002[2]=>KG003)`

现在，如何删除具有指定值的会话“代码”？我会在会话中删除 KG001 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:08:12.223

```
if($this->session->userdata($code) == 'KG001')
{
    $this->session->unset_userdata($code);
} 
```

我理解你的问题吗？

# javascript - 在基于 webkit 的混合应用程序中，可以在本机手机浏览器中打开链接吗？

> ID：15217644
> 
> 赞同：-2
> 
> 时间：2013-03-05T06:58:23.943
> 
> 标签：javascript, sencha-touch, hybrid-mobile-app, hybrid

在混合应用程序中单击时，如何在本机手机浏览器中打开链接？我用 Sencha Touch 构建了混合应用程序。

像`<a href="www.example.com"> view me in a browser </a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:01:24.707

> 有没有办法调用另一个浏览器？

**是**的，有。您可以使用`window.open()`函数来执行此操作。但是，您可以阅读以下说明，了解为什么不使用它。

请**不要强行**在新窗口中打开链接。

反对的理由：

*   它违反了最小惊讶规则。
*   后退按钮不起作用，用户可能不知道原因。
*   选项卡式浏览器会发生什么？新标签还是新窗口？无论发生什么情况，如果您混合选项卡和窗口，这是您想要的吗？

我总是听到支持打开新窗口的原因是用户不会离开网站。但可以肯定的是，我永远不会回到让我烦恼的网站。如果该网站夺走了我的控制权，那将是一个很大的烦恼。

一种方法可能是，您提供两个链接，一个是正常的，另一个在新窗口中打开它。在正常链接之后添加带有小符号的第二个。这样，您网站的用户就可以控制他们想要点击的链接。

**编辑：**

OP的问题是打开一个新浏览器而不是浏览器的新窗口。所以我保留这个答案，因为它解释了为什么我们不应该强制创建新窗口。

# ruby-on-rails - 在 Rails 中发布参数未达到 ActiveModel，无法从 UI 将数据发布到 SQLite，但它可以在 Rails 控制台中使用

> ID：15217645
> 
> 赞同：0
> 
> 时间：2013-03-05T06:58:33.733
> 
> 标签：ruby-on-rails, sqlite

我正在关注 Michael Martl 的 Ruby on Rails 教程，无论出于何种原因，我都无法从 UI/页面将用户添加到数据库 (sqlite3)。参数传递没有错误，我在服务器日志中看到参数，但数据没有完整地到达数据库：

```
Started POST "/users" for 192.168.1.100 at 2013-03-05 01:20:39 -0500
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"\u2713", "authenticity_token"=>"7VZ7HobCW9YrVBf/LadINF35c9ZThTYb2vBsA+02180=", "user"=>{"name"=>"smith", "email"=>"smith@dev.com"}, "commit"=>"Create my account"}
   (0.1ms)  begin transaction
   (0.1ms)  rollback transaction
  Rendered shared/_error_messages.html.erb (4.1ms)
  Rendered users/new.html.erb within layouts/application (7.1ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.8ms)
#<ActiveModel::Errors:0xa8e2934 @base=#<User id: nil, name: nil, email: nil, created_at: nil, updated_at: nil>, @messages={:name=>["can't be blank"], :email=>["can't be blank"]}>
Completed 200 OK in 89ms (Views: 77.4ms | ActiveRecord: 0.8ms) 
```

当我从 Rails 控制台将相同的参数传递给数据库时，它工作正常；用户被添加/保存没有问题。数据仅在 UI 中丢失。

这是我的架构信息和用户模型文件：

```
# == Schema Information
#
# Table name: users
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  email      :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

   class User < ActiveRecord::Base
      attr_accessible :name, :email
      #has_many :microposts
      before_save { email.downcase! }

      validates :name, presence: true
      validates :email, presence: true
    end 
```

我的控制器：

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def show
    @user = User.find(params[:id])
  end

  def create
    @user = User.new(params[:id])
    if @user.save
      redirect_to @user
    else
      render 'new'
      Rails.logger.info(@user.errors.inspect) 
    end
  end
end 
```

我一直在盯着这段代码一段时间，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:10:12.300

**首先**，您的验证应该是模型中的第一个语句。如果您将它们放在`before_save`回调之后，则无需编写它们，因为它们将在值保存到数据库后执行。

所以首先执行以下操作 -

```
class User < ActiveRecord::Base
  attr_accessible :name, :email

  validates :name, presence: true
  validates :email, presence: true

  before_save { email.downcase! }
end 
```

**二**、

您的 create 操作应该必须`params[:user]`通过而不是`params[:id]`.

做这个-

```
def create
  @user = User.new(params[:user])

  if @user.save
    redirect_to @user
  else
    render 'new'
    Rails.logger.info(@user.errors.inspect) 
  end
end 
```

现在，运行应用程序并检查。您将看到您在数据库中获得了新用户。

# perl - 比较文件，然后在 perl 脚本中输入坐标，然后使用预先编写的命令和坐标运行 perl 脚本

> ID：15217646
> 
> 赞同：-5
> 
> 时间：2013-03-05T06:58:33.963
> 
> 标签：perl, batch-file, perl-module, mod-perl

我想要一个批处理来读取一个名为 ship.txt 的文件，然后从该文件中获取条目（每个条目都在一行上）并将它们与文件扩展名为 *.map 的文件（比如 test.map）进行比较，寻找匹配，它总是在一行的末尾。然后获取这些坐标（它们将是一对实际上以米为单位的长和纬度的数字）并将这些坐标插入到 perl 脚本中，该脚本会生成一个文件。然后我想读取由 perl 脚本生成的文件，并使用来自 perl 脚本副产品的信息删除在另一个文件中找到的条目。

让我们从头开始。一步一步 第一步：

1.  我想要一个比较“test.map”和“ships.txt”的批次。如果它找到匹配项，并且匹配项将始终位于 test.map 中的行尾，我希望它能够获取地图坐标。

这就是 test.map 的样子：

代码：

```
 Pt0=14497903.00,-813490.00,0.00,Mark 1
 Pt1=14417253.00,-812258.00,0.00,Mark 2
 etc... 
```

ship.txt 看起来像这样：

```
 Mark 1
 Mark 3
 etc... 
```

所以我希望批次读取 ship.txt 并寻找条目“Mark 1”或“Mark 2”等......，如果在 test.map 中找到它，则在“ ,0.00,Mark #" 注意坐标有两位小数，也可以是负数。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:08:07.883

这是如何做到的。

以下是如何在 perl 中[打开](http://perldoc.perl.org/functions/open.html)文件以进行读取或写入。然后你必须逐行[阅读文件。](http://perl.about.com/od/perltutorials/a/readwritefiles.htm)也许最好使用[text::csv](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm)来读取文件。

使用 split 或 text::csv 从第一个文件行创建数组，并将其存储在哈希中，键应该是该文件的最后一个字段。

当您遍历第二个文件时，您可以使用此哈希来检查它是否在第一个文件中。

然后将结果写入文件。

尝试编写你的代码，如果你有一个特定的问题，你可以创建一个新的。

或者你可以雇人为你做这件事。

问候

# php - Chrome 不会按标签搜索数据列表

> ID：15217654
> 
> 赞同：1
> 
> 时间：2013-03-05T06:58:55.363
> 
> 标签：php, javascript, search, input

我的站点中有以下输入框，我想通过给定标签提供建议，并在选择时将值传递给 SQL 数据库。

```
<input type="text" name="Search" size="45px" placeholder="&nbsp;Search student records." list="StudentList">
<datalist  id="StudentList">
    <option value="145" label="Jake">
</datalist> 
```

我希望建议基于标签而不是值出现，就像在 Firefox 中一样。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:03:53.767

```
var studentList = document.getElementById('StudentList');
var selectedLabel = studentList.options[studentList.selectedIndex].getAttribute('label'); 
```

编辑：

html:

```
<input type="text" name="Search" size="45px" placeholder="&nbsp;Search student records." list="StudentList">
<datalist  id="StudentList">
    <option value="Jake" data-id="145">
</datalist> 
```

js：

```
var search = document.getElementsByName('Search')[0];
var datalist = document.getElementById('StudentList')[0];
search.addEventListener('change', function(){
    var id;
    for(var i = 0; i < datalist.options.length; i++){
        if(datalist.options[i].value === this.value)
            id = datalist.options[i].getAttribute('data-id');
    }
    // Use id here to search
}); 
```

# django - django - 刷新一个表单而不清除另一个

> ID：15217667
> 
> 赞同：1
> 
> 时间：2013-03-05T06:59:49.810
> 
> 标签：django, django-forms, django-crispy-forms

我有一个 django 页面，有两种形式：

```
class FooForm(forms.Form):
    number = forms.CharField(
        label = "Number",
    )
    num_forms = forms.CharField(
        label = "Num Forms"
    )
...

class BarForm(forms.Form):
    name = forms.CharField(
        label = "Name",
    )
... 
```

一个是显示为单个表单，另一个显示为表单集：

```
def myview(request):
        ...
        num_forms = request.GET['num_forms'])
        formsetFactory = formset_factory(BarForm, extra = num_forms)
        formset = formsetFactory()
        return render(request, 'template.html', {'form': FooForm(user), 'formset':formset, 'num_forms':num_forms) 
```

我正在使用[django-crispy-forms](https://django-crispy-forms.readthedocs.org/)设置布局并在 template.html 中呈现它们，如下所示：

```
<form action="{% url myview %}" class="form-horizontal" method="post">
        {% crispy form %}
        {% if num_forms and num_forms > 0 %}
            {% crispy formset formset.form.helper %}
        {% endif %}
 </form> 
```

我想要的行为：一个字段`form`指定要显示的表单数量`formset`，因此在更新该字段`formset`时会重新加载显示的表单数量。`form`不应清除或修改中的其他字段数据。可以运行验证，但我希望选择控制何时发生这种情况。

有人可以指导我如何实现我的视图和/或模板以使其工作吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:29:01.973

您可以通过在响应呈现时传回 FooForm 来重新加载值：

```
form = FooForm(request.POST)
...
return render(request, 'template.html', {'form': form}) 
```

不知道如何在不验证的情况下传回（或在返回之前清除验证），但

# android - 获取被点击的Imageview数量的方法

> ID：15217668
> 
> 赞同：2
> 
> 时间：2013-03-05T06:59:57.043
> 
> 标签：android, imageview

我有很多 imageview 。假设我有 50 个 ImageViews 。这些将在一个屏幕上。水平和垂直滚动将可用。

```
for(int j = 0; j < numCol; j++)
{
    imageView[i*5+j] = new  ImageView(this);
    imageView[i*5+j].setImageResource(R.drawable.icon);
    imageView[i*5+j].setMaxHeight(80);
    imageView[i*5+j].setMinimumHeight(80);
    imageView[i*5+j].setMaxWidth(90);
    imageView[i*5+j].setMinimumWidth(90);
    tblRow.addView(imageView[i*5+j],j); 
    imageView[i*5+j].setOnClickListener(this);

 } 
```

假设用户将点击 imageview[25] 。有没有什么直接的方法可以捕捉到 imageview[25] 被点击了？否则我将不得不遍历所有 imageview 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:02:58.103

```
imageView[i*5+j].setOnClickListener( new OnClickListener() {
   @Override
   public void onClick(View v) {
       someMethod((ImageView) v);
   }
});

private someMethod(ImageView currentView) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:06:03.373

您可以使用

```
imageView[i*5+j].setTag(new Integer(j)); 
```

然后在 OnClockListener

```
public void onClick(View v) {
    Integer i = (Integer)v.getTag();
} 
```

# jenkins - SCP 在 Jenkins 中不起作用

> ID：15217673
> 
> 赞同：1
> 
> 时间：2013-03-05T07:00:14.607
> 
> 标签：jenkins, scp, jenkins-plugins

当我在 中使用以下代码时`terminal`，它运行良好。

```
#!/usr/bin/expect -f
spawn scp /Users/Shared/Jenkins/workspace/testslave/XXXXXX aaa@10.XXX.XXX.XX:/tmp/XXXX
expect "*assword:"
send "password\r"
interact 
```

但是当我将内容复制到时`Jenkins`，詹金斯没有将文件复制到`destination`，并且没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:23:22.367

一种更简洁的方法是生成一个没有密码的公钥/私钥，并将其用作身份验证方法。

步骤是：

1.  通过执行 ssh-keygen 生成密钥
2.  将公钥（通常为 id_rsa.pub）复制到目标主机中用户的 .ssh 文件夹中。在您的情况下，它似乎是 /Users/Shared/Jenkins/.ssh
3.  执行：`scp -i id_rsa /Users/Shared/Jenkins/workspace/testslave/XXXXXX aaa@10.XXX.XXX.XX:/tmp/XXXX`

# .net - 允许用户在 WPF 应用程序中编辑 CAD 文件

> ID：15217675
> 
> 赞同：2
> 
> 时间：2013-03-05T07:00:27.593
> 
> 标签：.net, wpf, pixelsense, autocad, cad

用于 AutoCAD 编程的资源是百万分之一；我在试图弄清楚如何做到这一点时遇到了一些麻烦。我*真正*需要的（整个工作流程）是允许用户导入 .DWG/.DXF 文件，将其显示在屏幕上，允许用户对文件进行更改，然后允许用户保存/共享它其他用户。您可以说这接近于构建另一个 AutoCAD 应用程序，但我目前正在研究一个非常基本的实现。

我知道有许多可用的库，但我不确定哪一个最适合我。我期待有一个简单的实现（因为我不熟悉矢量、坐标几何和所有的东西），它可以使用付费使用的 AutoCAD 库、AutoCAD 编程 API、COM 互操作、ActiveX控制，*任何东西*。不管你觉得行得通，我都会试一试。

如果可能的话，我想进一步将此问题专门扩展到 Microsoft PixelSense，因为最终这就是我要开发的目标。不过，不用担心，只是提出您的建议，我会尝试每一个......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:26:23.540

对于 .dwg 文件，请访问 www.opendesign.com。他们的 Teigha 库下载有示例项目。它们支持 C++、.NET 和 ActiveX。

我不知道任何库，包括 Autodesk 自己的 API，可以让您“轻松实现”。

# xml - 使用 XSLT 比较两个日期之间的日期

> ID：15217677
> 
> 赞同：2
> 
> 时间：2013-03-05T07:00:36.070
> 
> 标签：xml, xslt

这是我的xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>

<products>
    <product_id value=" 1 ">
        <tab_id value=" 51 ">
            <tab_name value=" test1 "/>
            <status value=" 2 "/>
            <log value=" 5748 , 5749 , 128 "/>
            <born_from value=" 1980-08-01 , 1989-02-01 "/>
            <born_to value=" 1985-08-01 , 1998-02-01 "/>
            <sex value=" 2 , 1 "/>
            <link value=" www.google.com "/>
        </tab_id>
    </product_id>
    <product_id value=" 2 ">
        <tab_id value=" 52 ">
            <tab_name value=" test2 "/>
            <status value=" 3 "/>
            <log value=" 458 , 912 , 333 "/>
            <registration value=" 2013-01-01 "/>
            <born_from value=" 1995-01-25 , 1993-08-03 "/>
            <born_to value=" 2000-01-25 , 2002-10-25 "/>
            <sex value=" 1 , 1 "/>
            <link value=" www.yahoo.com "/>
            <label value=" open "/>
        </tab_id>
    </product_id>
    <product_id value=" 3 ">
        <tab_id value=" 54 ">
            <tab_name value=" test3 "/>
            <status value=" start "/>
            <venue value=" US "/>
            <born_from value=" 2000-01-01 , 2002-02-01 "/>
            <born_to value=" 2005-01-01 , 2003-01-01 "/>
            <sex value=" 1 , 2 "/>
            <link value=" www.facebook.com "/>
        </tab_id>
    </product_id>
 </products> 
```

我已经编写了这个 XSLT 代码来显示产品的所有数据，其中`my_date`变量将与 Born_from 和 Born_to 的日期进行比较，并给出产品 1 和 2 的输出数据

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" indent="yes"/>
    <xsl:param name="my_date" select="'1992-01-01'"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/products" priority="1">
        <html>
            <body>
                <table border="1">
                    <tr>
                        <th>Product ID</th>
                        <th colspan="2">Product DATA</th>
                    </tr>
                    <xsl:apply-templates select="product_id/tab_id/born_from[@value &gt; $my_date] | product_id/tab_id/born_to[@value &lt; $my_date]"/>
                </table>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="product_id/tab_id">
        <tr>
            <td>
                <xsl:value-of select="product_id"/>
            </td>
            <td><xsl:value-of select="name(*[1])"/> --></td> 
            <td><xsl:value-of select="*[1]/*[1]"/></td>
        </tr>
        <xsl:apply-templates select="*[not(self::product_id)]"/>
    </xsl:template>

    <!--These 2 templates will handle the data on the same
    row as the tab name.-->
    <xsl:template match="product_id/tab_id/*[1]" priority="1">
        <xsl:apply-templates mode="newrow"/>
    </xsl:template>
    <xsl:template match="product_id/tab_id/*[1]/*[1]" mode="newrow"/>

    <xsl:template match="*" mode="newrow">
        <xsl:call-template name="dataRow"/>
    </xsl:template>

    <xsl:template match="product_id/tab_id/*/*[not(position()=1)]">
        <xsl:call-template name="dataRow"/>
    </xsl:template>

    <xsl:template name="dataRow">
        <tr>
            <td/>
            <td/>
            <td><xsl:value-of select="."/></td>
        </tr>       
    </xsl:template>

    <xsl:template match="*[not(self::node)]">
        <tr>
            <td/>
            <td><xsl:value-of select="name()"/> --></td>
            <td><xsl:apply-templates/></td>
        </tr>
    </xsl:template>

</xsl:stylesheet> 
```

我是初学者到日期比较有问题

只是`my_date`会像这样比较

```
 for product 1
1980-08-01 > my_date && my_date < 1985-08-01
1989-02-01 > my_date && my_date < 1998-02-01

 for product 2 
1995-01-25 > my_date && my_date < 2000-01-25
1993-08-03 > my_date && my_date < 2002-10-25

same for product 3 
```

这里`my_date`比较第一个值然后是第二个等等..我认为这里的问题是逗号分隔值

我想要这样的输出

```
Product ID  |   Product DATA
--------------------------------
1           |product_id  => 1
            |tab_id      => 51
            |tab_name    => test1
            |status      => 2
            |log         => 72
            |               19
            |               79
            |born_from   => 1980-08-01
            |               1989-02-01
            |born_to     => 1985-08-01
            |               1998-02-01
            |sex         => 2
            |               1
            |link        => www.google.com 
```

与产品 2 相同，其价值在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:56:50.017

在谈论日期之前，应该注意您的**xsl:apply-templates存在另一个问题**

```
<xsl:apply-templates select="product_id/tab_id/born_from[@value &gt; $my_date]" /> 
```

这将选择**Born_from**元素，但从查看匹配的模板来看，您似乎想要实际选择**tab_id**元素，因此您必须像这样重新编写它：

```
<xsl:apply-templates select="product_id/tab_id[born_from/@value &gt; $my_date]" /> 
```

但是，正如评论中提到的，XSLT 1.0 中没有对日期的内置支持。您必须使用扩展功能或升级才能使用 XSLT 2.0。

但是，如果您的日期始终采用 YYYY-MM-DD 格式，您可以通过删除连字符并将它们视为 8 位数字来进行简单的数字比较。

首先，创建一个变量以将您的**my_date**参数转换为格式为 YYYYMMDD 的数字

```
<xsl:variable name="comp_date" select="translate($my_date, '- ', '')" /> 
```

然后，尝试将后续的**xsl:apply-templates**更改为此。

```
<xsl:apply-templates select="
product_id/tab_id[translate(substring-before(born_from/@value, ','), '- ', '') &gt; $comp_date]| 
product_id/tab_id[translate(substring-before(born_to/@value, ','), '- ', '') &lt; $comp_date]"/> 
```

请注意使用**substring-before仅提取****@value**属性中逗号之前的第一个日期。如果您还想检查逗号后的日期，请使用**substring-after**。

# hibernate - 删除父级时如何更新子级

> ID：15217678
> 
> 赞同：1
> 
> 时间：2013-03-05T07:00:37.277
> 
> 标签：hibernate, hibernate-mapping, hibernate-annotations

我的要求是当我删除父级时，不应该删除子级，而是删除子级，`department_ID`作为外键的子列之一必须更新一些值，比如一个部门（父表）包含许多员工和员工（子表）表`Department_ID`作为外键列。当我删除父表时，我面临的问题没有任何反映在子表上，因为`updatable=false`如果我将使其变为真然后在删除父表时，子列设置为空或者我更新然后父级也将子`Department_Id`列设置为null，这违反了要求，所以这就是为什么我将其设为false。我不希望在父级进行任何更改时更新子级，只有更改应该反映在删除操作上，仅反映在一列上。请帮帮我我该怎么办？谢谢

这是我的父表部门代码

```
 @Id
  @Column(name = "DEPARTMENT_ID")
  private String departmentId;

  @OneToMany(fetch = FetchType.EAGER)
  @JoinColumn(name = "DEPARTMENT_ID",insertable=false,updatable=false)
  Collection<Employee> employeeList; 
```

这是我的孩子 Table 员工

```
 @Id
    @Column(name = "EMPLOYEE_NUMBER")
    private int employeeNumber;
    @Column(name = "FIRST_NAME")
    private String firstName;
    @Column(name = "LAST_NAME")
    private String lastName;

    @Column(name = "DEPARTMENT_ID")
    private String departmentId; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:18:33.627

让children-side维护一对多的关系，所以你需要给@OneToMany添加***mappedBy***属性。

```
@Id
@Column(name = "DEPARTMENT_ID")
private String departmentId;

@OneToMany(fetch = FetchType.EAGER, mappedBy="departmentId")
@JoinColumn(name = "DEPARTMENT_ID",insertable=false,updatable=false)
Collection<Employee> employeeList; 
```

保持如下关系：

```
employee.departmentId = newDepartmentId; //or set it null to detach from the old dept 
```

# websphere - 从 OSGi 包中的 WAS 共享库加载类

> ID：15217680
> 
> 赞同：0
> 
> 时间：2013-03-05T07:00:43.127
> 
> 标签：websphere, osgi, shared-libraries

是否可以从 OSGi 包中使用 websphere 应用程序服务器共享库中的类？

我做了一些研究，发现这个[http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/topic/com.ibm.iea.was_v8/was/8.5/ProgrammingModel/WAS85_LP_Class_Loading.pdf](http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/topic/com.ibm.iea.was_v8/was/8.5/ProgrammingModel/WAS85_LP_Class_Loading.pdf)这表明它是可能的从标准 java 加载 OSGi 类，但是，没有迹象表明相反的情况是否可行。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:56:08.760

不，不能从 OSGi 应用程序使用 Java EE 共享库，但您可以使用[捆绑存储库](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.osgifep.multiplatform.doc/topics/ta_admin_obr.html)在 OSGi 应用程序之间共享二进制文件。

您链接的文档主要讨论 Liberty Profile 运行时中的 Java EE 应用程序：

> 类加载器配置仅对 Java EE 应用程序有效。如果它是为 OSGi 应用程序提供的，则会被忽略。

...

> 由于 OSGi 允许应用程序指定要导入的包的版本，因此只有 Java EE 应用程序才需要这种更粗略的控制级别。

任何提及 OSGi 类加载都指出 Java EE 应用程序可以看到由 OSGi 运行时加载的*产品类。*简要提到了 OSGi 应用程序的捆绑存储库：

> 请注意，此库定义供 Java EE 应用程序使用。有一个称为捆绑存储库的单独工具，用于配置要由 OSGi 应用程序使用的附加捆绑包。

# android - Imageview 方法 setImageDrawable(Drawable d) 不会用动画改变图像

> ID：15217681
> 
> 赞同：0
> 
> 时间：2013-03-05T07:00:46.350
> 
> 标签：android, imageview, android-animation, android-imageview, android-drawable

我想在单击按钮时更改 ImageView 中的图像。我也在这个 imageView 上做动画。为了更改图像，我`setImageDrawable()`在 imageView 上使用方法。问题是有时这种方法不适用于每个图像。有时它会更改图像并为 ImageView 设置新图像，但有时它不会更改图像并且什么也不显示。如果我调试我的代码，那么它会显示所有图像。我不知道为什么会这样，因为代码也没有抛出任何错误。我是否因为内存而面临这个问题？

这是我的代码：

```
public class AnimalsActivity extends Activity {

    private Animation animalTranslate;
    private ImageView animalImg;
    private static int cnt = 0;
    private ImageButton btnNext, btnPrev;

};

    private int[] animalImages = { R.drawable.antelope, R.drawable.bull,
            R.drawable.camel, R.drawable.deer, R.drawable.animal_elephant,
            R.drawable.fox, R.drawable.giraffe, R.drawable.animal_horse,
            R.drawable.iguana, R.drawable.jaguar, R.drawable.koala,
            R.drawable.animal_lion, R.drawable.monkey, R.drawable.nyala,
            R.drawable.orca, R.drawable.panda, R.drawable.quoll,
            R.drawable.animal_rabbit, R.drawable.snake, R.drawable.tiger,
            R.drawable.urial, R.drawable.vole, R.drawable.wolf,
            R.drawable.xerus, R.drawable.yak, R.drawable.animal_zebra };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.animal_screen);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        btnNext = (ImageButton) findViewById(R.id.btn_animalNext);
        btnPrev = (ImageButton) findViewById(R.id.btn_animalPrev);
        animalImg = (ImageView) findViewById(R.id.animalImage);

        StartAnimations(cnt);
        btnNext.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                cnt++;
                if (cnt > 25) {
                    cnt = 0;
                }

                StartAnimations(cnt);
            }
        });

        btnPrev.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                cnt--;
                if (cnt < 0) {
                    cnt = 25;
                }

                StartAnimations(cnt);
            }
        });

    }

    private void StartAnimations(int count) {
            animalImg.setImageResource(animalImages[cnt]);
        animalTranslate = AnimationUtils.loadAnimation(AnimalsActivity.this,
                R.drawable.letters_translate);
        animalImg.startAnimation(animalTranslate);
    }

    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        super.onBackPressed();
        cnt = 0;
        Intent readActivity = new Intent(AnimalsActivity.this,
                HomeScreenActivity.class);
        readActivity.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(readActivity);
    }
} 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/lyt_animal"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/forest"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/animalImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/txt_animal"
        android:layout_centerHorizontal="true"
        android:scaleType="fitXY" />

    <ImageButton
        android:id="@+id/btn_animalPrev"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="@drawable/animal_prev" />

    <ImageButton
        android:id="@+id/btn_animalNext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="@drawable/animal_next" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:31:46.847

从 onCreate 开始动画不是一个好方法。[阅读本文，它可能对您有所帮助。](http://damianflannery.wordpress.com/2011/06/08/start-animation-in-oncreate-or-onresume-on-android/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-05T10:45:39.767

我编辑了我的代码，现在它可以工作了。我想，错误是由于内存不足，因为我在模拟器中测试了我的应用程序。我在设备中测试了应用程序，它运行良好。

# codeigniter - Codeigniter - 以 DOC 格式导出数据库数据

> ID：15217685
> 
> 赞同：2
> 
> 时间：2013-03-05T07:01:08.963
> 
> 标签：codeigniter, ms-word, doc

我想使用 Codeigniter 将 MYSQL 数据库中的数据导出到 DOC 文件中。我的代码如下：

名为“profile_top_view.php”的视图，其中锚点声明为：

```
<?php echo anchor('welcome/todoc','Export Posts to DOC File') ?> 
```

名为“welcome.php”的控制器具有以下功能：

```
 public function todoc() {
    $id = $this->tank_auth->get_user_id();
    $this->mpdf->useOnlyCoreFonts = true;
    $filename = "POSTS";
    $data['member'] = $this->s_model->alldata($id);
    $this->load->view('export_posts_doc_view', $data, true);
    $this->index();
} 
```

一个名为“export_posts_doc_view.php”的视图，其中将为 DOC 文件创建一个表：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Exported Posts in PDF File</title>
    </head>
    <body>
        <?php
        header("Content-Type: application/vnd.ms-word");
        header("Expires: 0");
        header("Cache-Control:  must-revalidate, post-check=0, pre-check=0");
        header("Content-disposition: attachment; filename=\"posts.doc\"");
        ?>

        <div id="container">
            <h4>Posts</h4>
            <table border="1">
                <tr>
                    <th>title</th>
                    <th>content</th>
                    <th>group</th>
                    <th>video_url</th>
                    <th>pic_path</th>
                    <th>name</th>
                    <th>phone</th>
                    <th>email</th>
                    <th>yes_no</th>
                    <th>single-line-text</th>
                    <th>para_text</th>
                    <th>pdf_file_name</th>
                    <th>add_photo_name</th>
                </tr>
<?php
foreach ($member as $rows) {
    ?>
                    <tr>
                        <td><?php echo $rows['title'] ?></td>
                        <td><?php echo $rows['content'] ?></td>
                        <td><?php echo $rows['group'] ?></td>
                        <td><?php echo $rows['video_url'] ?></td>
                        <td><?php echo $rows['pic_path'] ?></td>
                        <td><?php echo $rows['name'] ?></td>
                        <td><?php echo $rows['phone'] ?></td>
                        <td><?php echo $rows['email'] ?></td>
                        <td><?php echo $rows['yes_no'] ?></td>
                        <td><?php echo $rows['single-line-text'] ?></td>
                        <td><?php echo $rows['para_text'] ?></td>
                        <td><?php echo $rows['pdf_file_name'] ?></td>
                        <td><?php echo $rows['add_photo_name'] ?></td>
                    </tr>
    <?php
}
?>
            </table>

            <br> <br>

        </div>
    </body>
</html> 
```

还有一个名为“s_model.php”的模型，具有以下功能：

```
 function alldata($id)
    {
        $this->db->select('');
        $this->db->from('posts');
            $this->db->where('user-id',$id);
        $getData = $this->db->get();
        if($getData->num_rows() > 0)
        return $getData->result_array();
        else return null;
    } 
```

如果我将那个标题保留在那里，那么它会显示错误：

> 没有找到该网址的网页： [http ://www.my_ip.com/project/welcome/todoc](http://www.my_ip.com/project/welcome/todoc)

但是，如果我删除相同的标题，它会显示控制器中回显的内容。我从以下 URL 获得了该标题： [exporting MS word documents using codeigniter?](https://stackoverflow.com/questions/6172461/exporting-ms-word-documents-using-codeigniter)

谁能让我知道我该怎么办？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:30:48.937

得到了答案，

我在控制器“welcome.php”中做了一些更改：

```
public function todoc() {
        $id = $this->tank_auth->get_user_id();
        $this->mpdf->useOnlyCoreFonts = true;
        $filename = "POSTS";
        $data['member'] = $this->s_model->alldata($id);      
        $this->load->view('export_posts_doc_view', $data);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T11:55:33.733

请参阅下面的代码我希望我会为你工作

```
 function exportexcel()
    {
    header("Content-type: application/vnd.ms-excel"); 

   /* change the content-type depends upon our requerment */

        header("Content-Disposition: attachment; filename=Sadhak.xls");

        header("Pragma: no-cache");

        header("Expires: 0");

    $table = "your content goes here";

    echo  $table;
    } 
```

# c# - 使用升 C 计算百分比统计数据？

> ID：15217686
> 
> 赞同：0
> 
> 时间：2013-03-05T07:01:10.923
> 
> 标签：c#

我想找到将计算百分比并以以下格式给出结果的统计数据：WX GSA 搜索 % = GSA 出现次数 / GSA 出现次数 + 搜索出现次数 + ADVSearch 出现次数 * 100 即在这种情况下它应该给出：3 / 3 + 2 + 2 * 100 = 42.8

我已经尝试过会出现每次搜索的代码：

我的代码在这里：

```
 class Program
{
    static void Main()
    {
        System.IO.StreamReader myFile =
        new System.IO.StreamReader(@"C:\Users\karansha\Desktop\sample log.txt");
        string myString = myFile.ReadToEnd();
        Console.WriteLine(TextTool.CountStringOccurrences(myString, "WX Search"));   // WX Rule Based Search.
        Console.WriteLine(TextTool.CountStringOccurrences(myString, "WX GSA Search"));  // WX GSA Search.
        Console.WriteLine(TextTool.CountStringOccurrences(myString, "WX ADVSearch"));   //WX Form Based Search.
        // keep screen from going away
        // when run from VS.NET
        Console.ReadLine();
    }
}
public static class TextTool
{
    public static int CountStringOccurrences(string text, string pattern)
    {
        int count = 0;
        int i = 0;
        while ((i = text.IndexOf(pattern, i)) != -1)
        {
            i += pattern.Length;
            count++;
        }
        return count;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:09:39.077

[您可以使用String.Format](http://msdn.microsoft.com/en-us/library/xh1dzhdx.aspx)方法在 .NET 中格式化字符串。

```
int score = 50;
string formattedString = String.Format("My Score : {0}", score);
Console.WriteLine(formattedString); 
//My Score : 50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:26:05.743

我真的不明白这个问题。您只是想计算公式并将其显示在控制台屏幕上吗？如果你的意思是这里是你需要的代码：

```
static void Main()
{
    System.IO.StreamReader myFile =
    new System.IO.StreamReader(@"C:\Users\karansha\Desktop\sample log.txt");
    string myString = myFile.ReadToEnd();
    int wxSearchCount = TextTool.CountStringOccurrences(myString, "WX Search");   // WX Rule Based Search.
    int wxGsaSearchCount = TextTool.CountStringOccurrences(myString, "WX GSA Search");  // WX GSA Search.
    int wxAdvSearchCount = TextTool.CountStringOccurrences(myString, "WX ADVSearch");   //WX Form Based Search.

            double result = Convert.ToDouble(wxGsaSearchCount * 100) / Convert.ToDouble((wxGsaSearchCount + wxSearchCount + wxAdvSearchCount));

            Console.WriteLine("WX Search: {0}\nWX GSA Search: {1}\nWX ADVSearch: {2}\nResult: {3}",
                                wxSearchCount, wxGsaSearchCount, wxAdvSearchCount, result.ToString("0.00"));

    Console.ReadLine();
} 
```

# java - 无法使用新值重新加载 JGrid

> ID：15217694
> 
> 赞同：2
> 
> 时间：2013-03-05T07:01:47.150
> 
> 标签：java, javascript, jqgrid

我在 java 中使用 JQuery 和 JGrid。我有一个网格

```
 <script>
     jQuery("#table1").jqGrid({
     .............. 
     ............ 
     }); 
```

我有另一个网格

```
 function abc {
      var id = firstgridid;
      if(number>0) {
      // working but with the old value
      $("#table2").jqGrid('setGridParam', { url: 'JGridA?action=abc&hidden='+id,page:1}).trigger("reloadGrid");

      JQuery("#table2").jqGrid({
      url:'JGridServlet?action=comm&hidden='+id,
      .............
      });
      }
      </script> 
```

在第二个网格中，我将在第一个网格中选择的 id 的值作为 url 传递。每次从第一个网格中选择一行时，单击“显示详细信息”按钮后，函数 abc() 将执行，应传递 id 并在第二个网格中显示相应的行（id 信息）。

我能够获取所选行的 id，并且能够重新加载第二个网格，但是与第二个网格相关的查询正在使用第一次选择的 id。但我需要当前选择的 id。

请帮忙.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:29:34.123

`abc`在函数代码中至少可以看到两个重要的问题。

第一个是使用`setGridParam` *before* `JQuery("#table2").jqGrid({...});` which*创建*网格。你不能`setGridParam`在`<table>`. 调用 like将用于显示网格的相对复杂的潜水和表格结构中的`JQuery("#table2").jqGrid({...});`空元素转换。`<table id="table2"></table>`因此，您应该*首先创建网格*（对网格隐蔽为空`<table>`），然后才能使用`setGridParam`或`.trigger("reloadGrid")`刷新网格内容。

第二个问题是您*多次*`JQuery("#table2").jqGrid({...});`调用的函数内部的使用。正如我之前所描述的那样，调用将空白转换为网格。所以一个人只能打*一次*这样的电话。对于网格的第二次加载，您应该只使用并刷新网格内容。`abc`*`JQuery("#table2").jqGrid({...});``<table>`*`setGridParam``.trigger("reloadGrid")`**

 ****更新**：如果您想实现主/详细信息方案，您可以执行以下操作：

```
// create master grid
$("#table1").jqGrid({
    datatype: "json",
    url: "masterGridUrl",
    onSelectRow: function (rowid, state) {
        if (state) { // if not the same row was previously selected
            // refresh detail grid
            $("#table2").jqGrid("setGridParam", { datatype: "json"})
                .trigger("reloadGrid", [{page: 1}]);
        }
    },
    ... // another options
});

// create details grid without filling the data initially
$("#table2").jqGrid({
    datatype: "json", // we use "local" instead of "json" to have to request to the server
    url: "JGridA",
    postData: {
        action: "abc",
        hidden: function () {
            // id of currently selected row
            return $("#table1").jqGrid("getGridParam", "selrow");
        }
    },
    ... // other options
}); 
```

它将创建主网格“#table1”和空的详细网格“#table2”。在主网格中选择行后，将重新加载详细网格的主体。详细网格向服务器发送两个附加参数：一个静态参数`action=abc`和另一个参数`hidden`，其值为主网格的 rowid。

如果您`navGrid`在主网格中使用，您可以添加`beforeRefresh`回调（参见代码示例[的答案](https://stackoverflow.com/a/3772720/315935)）。在`beforeRefresh`主网格的回调中，您可以调用`clearGridData`细节网格。因此，如果您要刷新主网格，则在选择主网格中的行之前，详细网格将为空。**

# regex - 使用正则表达式捕获电子邮件的特定用户名

> ID：15217697
> 
> 赞同：0
> 
> 时间：2013-03-05T07:01:52.723
> 
> 标签：regex

我被困在验证正则表达式

[http://regexone.com/example/2](http://regexone.com/example/2)？

我面临的问题是我必须在提供的电子邮件地址中捕获特定的用户名。下面是电子邮件列表，以及要使用正则表达式捕获的文本：

电子邮件

1.  tom@hogwarts.com

2.  tom.riddle@hogwarts.com

3.  tom.riddle+regexone@hogwarts.com

4.  tom@hogwarts.eu.com

5.  potter@hogwarts.com

6.  harry@hogwarts.com

7.  赫敏+regexone@hogwarts.com

在每个电子邮件地址中捕获的文本：

1.  汤姆

2.  汤姆谜语

3.  汤姆谜语

4.  汤姆

5.  波特

6.  哈利

7.  赫敏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:15:42.340

这个简单的正则表达式捕获了“单词字符或点”的第一个完整序列：

```
^[\w.]+ 
```

这个正则表达式的细分是：

*   `^`输入开始
*   `[`开一个人物班
*   `\w`“字字符”与`[a-zA-Z0-9_]`
*   `.`文字点（在字符类中时）
*   `]`关闭字符类
*   `+`一个或多个前面的表达式

请注意，（大多数）字符在字符类中失去了它们的特殊含义，因此无需转义点。

我在链接的站点上对其进行了测试，并且有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:09:06.430

您可以使用此正则表达式：

```
([a-z\.]+) 
```

这意味着捕获所有小写字母和一个点字符。

注意：对于正确的电子邮件验证，它需要更多的东西，但这将通过您链接的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:24:13.673

请试试这个

([0-9a-zA-Z._]+)+?\S*@

如果我们有它，它将捕获 + 之前的所有符号，如果我们这里没有任何加号，它将捕获 @ 符号之前的所有符号。

# c# - 在asp.net c#中与主线程并行处理Timer Tick事件

> ID：15217699
> 
> 赞同：0
> 
> 时间：2013-03-05T07:01:56.357
> 
> 标签：c#, asp.net, performance, timer

我有这个功能，我试图将计时器事件作为单独的线程调用，但是当我单击页面中的任何按钮或在 asp.net 页面中执行任何操作时，计时器会停止一秒钟。

请帮助如何在页面中不受另一个控件影响的情况下并行运行它，因为计时器应该每秒钟运行一次，并且它不应该在 ui 中停止。

```
Thread obj = new Thread(new ThreadStart(timer));
obj.Start();
obj.IsBackground = true;

protected void timer()
{
    Timer1.Interval = 1000;
    Timer1.Tick += new EventHandler<EventArgs>(Timer1_Tick);
    Timer1.Enabled = true;
}

public void TimerProc(object state)
        {
            fromTime = DateTime.Parse(FromTimeTextBox1.Text);
            tillTime = DateTime.Parse(TillTimeTextBox1.Text);
            DateTime currDateTime = System.DateTime.Now;
            TimeSpan interval = tillTime - currDateTime;
            if (tillTime <= currDateTime)
            {
                ExamOverPanel1.Visible = true;
                QuestionPanel.Visible = false;
                ListBox2.Visible = false;
                StatusPanel1.Visible = false;
                VisitLaterLabel.Visible = false;
            }
            else
            {
                minLabel.Text = string.Format("{0:00}:{1:00}:{2:00}", (int)interval.TotalHours, interval.Minutes, interval.Seconds);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:39:40.597

您的 Timer1 对象是什么类？

是吗

```
System.Threading.Timer 
```

或者

```
System.Timers.Timer 
```

或者

```
System.Windows.Forms.Timer 
```

或者

```
System.Web.UI.Timer 
```

? 最后两个不是真正合适的计时器，而是到达您的消息队列....

所以我建议你检查你的命名空间引用 - 我在你的场景中的建议是使用 System.Threading.Timer 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:15:13.823

我猜你正在使用[`System.Web.UI.Timer`](http://msdn.microsoft.com/en-us/library/system.web.ui.timer.aspx)类，它用于[`UpdatePanel`](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx)定期更新一个或整个页面。这个计时器不太准确，因为它完全在客户端浏览器上运行（使用 JavaScript`window.setTimeout`函数）并向服务器发送 ajax 请求。如果您想在服务器上定期执行一些操作，您可以使用`System.Threading.Timer`在服务器上自己的线程中调用的对象：

```
public void InitTimer()
{
    System.Threading.Timer timer = new System.Threading.Timer(TimerProc);
    timer.Change(1000, 1000); // Start after 1 second, repeat every 1 seconds
}

public void TimerProc(object state)
{
    // perform the operation
} 
```

但是如果你想在服务器上执行一些操作后更新页面，你仍然应该使用[`System.Web.UI.Timer`](http://msdn.microsoft.com/en-us/library/system.web.ui.timer.aspx). 您也可以将两者混合使用，使用线程计时器以高精度执行工作，并使用 Web 计时器更新页面。

[`System.Web.UI.Timer`请参阅类](http://msdn.microsoft.com/en-us/library/system.web.ui.timer.aspx)的示例部分以获取示例用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:23:06.677

我发现最好的方法是使用 Javascript 进行时间显示。并在后台运行不会更新 UI 的 C# 计时器。

```
<script type="text/javascript">

        var serverDateTime = new Date('<%= DateTime.Now.ToString() %>');
        // var dif = serverDateTime - new Date();

        function updateTime() {
            var label = document.getElementById("timelabel");
            if (label) {

                var time = (new Date());
                label.innerHTML = time;
            }
        }
        updateTime();
        window.setInterval(updateTime, 1000);
</script>

 <script type="text/javascript">
    window.onload = WindowLoad;
    function WindowLoad(event) {

        ActivateCountDown("CountDownPanel", <%=GetTotalSec() %>);
    }
//GetTotalSec() is c# function which return some value
    </script>

<span id="CountDownPanel"></span> //div to display time 
```

无论用户界面如何，所有其他事情都将在 timer1_tick 函数上工作。

# sql - SQL 查询中的 (+) 符号

> ID：15217701
> 
> 赞同：1
> 
> 时间：2013-03-05T07:02:00.770
> 
> 标签：sql, oracle, stored-procedures, join

只是我在一个存储过程中遇到了一个 SQL 查询，如下所示：

```
SELECT 
    * 
FROM 
    account a, 
    performance p,
    customer c, 
    override o
WHERE 
    a.account_id = p.account_id (+)
    AND a.account_id = c.account_id (+)
    AND o.override_type(+) = 'O' 
```

你能解释一下这个`(+)`符号在这里的作用是什么吗？以及使用左侧和右侧的区别。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:03:26.760

这是`OUTER JOIN`Oracle 中的旧语法（我不知道是否有其他 RDBMS 使用相同的旧语法）。

**更好的是：**使用或代替符号使用显式的 ANSI-92`OUTER JOIN`语法。`LEFT OUTER JOIN``RIGHT OUTER JOIN``+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:36:14.450

`(+)`是 oracle（8 和更早版本）中的旧外连接语法。**它非常严格，并且处理了许多错误的情况。**不要再使用它了。Oracle`left outer join`从版本 9 开始支持 ansi 连接（例如）。

# c# - 异常详细信息：System.Web.HttpException：超出最大请求长度

> ID：15217702
> 
> 赞同：5
> 
> 时间：2013-03-05T07:02:02.083
> 
> 标签：c#, asp.net, ado.net

我正在尝试使用下面的代码将 Excel 文件中的数据读入 ADO.NET 数据集。在 windows 窗体应用程序中它可以工作，但在 asp.net 应用程序中它会失败。

```
 public static DataTable ArchiveData(string fileName)
{
    FileStream stream = File.Open(fileName, FileMode.Open, FileAccess.Read);

    //Reading from a OpenXml Excel file (2007 format; *.xlsx)
    IExcelDataReader excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);
    excelReader.IsFirstRowAsColumnNames = true;

    DataSet result = excelReader.AsDataSet();

    //Free resources (IExcelDataReader is IDisposable)
    excelReader.Close();
    return result.Tables["Archive data"];
} 
```

堆栈跟踪：

```
[HttpException (0x80004005): Maximum request length exceeded.]
   System.Web.HttpRequest.GetEntireRawContent() +8793522
   System.Web.HttpRequest.GetMultipartContent() +62
   System.Web.HttpRequest.FillInFormCollection() +236
   System.Web.HttpRequest.get_Form() +68
   System.Web.HttpRequest.get_HasForm() +8745879
   System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull) +97
   System.Web.UI.Page.DeterminePostBackMode() +63
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +133 
```

或者有没有更好的方法将 Excel 文件从客户端机器读入 ASP.NET 中的 ADO.NET DataTable

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-05T07:04:15.973

在您的 web.config 文件中添加以下标签并检查它是否有效

```
<httpRuntime maxRequestLength="350000" enableVersionHeader="false" maxQueryStringLength="3584" executionTimeout="600"/> 
```

# java - 比较使用 Selenium WebDriver 填充的年龄

> ID：15217703
> 
> 赞同：0
> 
> 时间：2013-03-05T07:02:05.967
> 
> 标签：java, selenium, selenium-webdriver

我正在使用 Selenium Webdriver 进行自动化，需要检索一个人的当前年龄以将其与应用程序中填充的年龄进行比较。

我的代码如下：

```
String DOB = driver.findElement(By.id("")).getAttribute("value");
SimpleDateFormat dateFormat = new SimpleDateFormat("MM-dd-yyyy"); 
Date convertedDate = dateFormat.parse(DOB);

Calendar currentDate = Calendar.getInstance();
SimpleDateFormat formatter = new SimpleDateFormat("MM-dd-yyyy");
Date currentNow = currentDate.getTime();

System.out.println("Sys date: " + currentNow);
System.out.println("DOB Date: " + convertedDate); 
```

输出：

```
Sys date: Tue Mar 05 12:25:19 IST 2013
DOB Date: Wed Mar 15 00:00:00 IST 1967 
```

如何检索正确的年龄，以便将其与自动填充的应用程序年龄进行比较。目前，当我们使用`.getYear()`它进行减法时，假设是从 1 月 1 日开始的一年中的日期，因此不计算正确的年龄。

请帮助我，以便我可以成功计算出正确的年龄。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:38:53.837

如果您已经在比较年份，为什么不将月/日与当前比较呢？日历可以通过一点点哄骗为您做到这一点。

```
 //Retrieve date from application
    String DOB = driver.findElement(By.id("")).getAttribute("value");

    //Define the date format & create a Calendar for this date
    SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy");
    Calendar birthday = Calendar.getInstance();
    birthday.setTime(sdf.parse(DOB)); 

    //Create a Calendar object with the current date
    Calendar now = Calendar.getInstance();

    //Subtract the years to get a general age.
    int diffYears = now.get(Calendar.YEAR) - birthday.get(Calendar.YEAR);

    //Set the birthday for this year & compare
    birthday.set(Calendar.YEAR, now.get(Calendar.YEAR));
    if (birthday.after(now)){
        //If birthday hasn't passed yet this year, subtract a year
        diffYears--;
    } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:02:49.097

请检查这是否对您有帮助。这种方法将给出确切的年份数字。

```
public static int getDiffYears(Date first, Date last) {
    Calendar a = getCalendar(first);
    Calendar b = getCalendar(last);
    int diff = b.get(YEAR) - a.get(YEAR);
    if (a.get(MONTH) > b.get(MONTH) || 
        (a.get(MONTH) == b.get(MONTH) && a.get(DATE) > b.get(DATE))) {
        diff--;
    }
    return diff;
} 
```

# javascript - Passing a string from JavaScript of popup window to parent window

> ID：15217704
> 
> 赞同：-2
> 
> 时间：2013-03-05T07:02:11.210
> 
> 标签：javascript, asp.net

I have a JavaScript function that looks like this. I need help passing these values from JavaScript of the pop up window to the parent window. I know that I have to use

```
window.opener.document.getelementbyD("ID Of TextBox"); 
```

method in my child aspx page but the `textbox` is inside another user control. How do I do it?

```
function(PersonName, EmailID){
    //assign these values to text boxes of  a parent window 
    //the text boxes of parent window are inside of  control
} 
```

Regards
-Vishu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:56:05.690

You could write two plain JS-functions. One (setValues) in your "parent" Window which will be called by your pop up. And one in your pop up (setValuesToParent) collecting the values and calling function in your parent window. Please dont forget that this example is written in plain JavaScript and does not use any asp.net stuff.

```
// in your pop up 
function setValuesToParent() {
    var PersonName= document.getElementById('PersonNameInPopUp').value;
    var EmailID = document.getElementById('EmailIDInPopUp').value;
    window.opener.setValues(PersonName, EmailID); // this is the important line
}

// in your parent window
function setValues(PersonName, EmailID) {
    document.getElementById('PersonName').value = PersonName;
    document.getElementById('EmailID').value = EmailID;
} 
```

# iphone - 按钮值复制到其他按钮

> ID：15217705
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:02:11.503
> 
> 标签：iphone, ios, uibutton

如何获取按下的按钮标题文本值并在按下时显示为其他按下的按钮？我使用以下代码从按钮获取标题文本

```
 - (IBAction) checkIt:(id)sender
{
UIButton *button = (UIButton *)sender;

NSLog(@"Button text value %@", button.titleLabel.text);
} 
```

如果我按下，如何将按钮文本显示到其他按钮中？请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:19:22.317

这样做，

```
- (IBAction) checkIt:(id)sender
{
UIButton *button = (UIButton *)sender;

[your_other_button setTitle:button.titleLabel.text forState:UIControlStateNormal];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:10:14.757

你可以让它指向标签或只是制作一个可变按钮并将其添加到你的按钮。并获取 btn 文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:10:15.450

您需要在您的应用程序委托中创建 Globle 变量，例如：-

**yourAppdelegate.h**

```
@property (strong, nonatomic) NSString *buttonTitleCopy; 
```

**yourAppdelegate.m**

```
@synthesize buttonTitleCopy; 
```

现在您只需在特定类中获取此变量，例如：-

**你的类.h**

```
#import "yourAppdelegate.h"

//create Object of your Delegate Class

 yourAppdelegate *objAppdelegate; 
```

**你的班级.m**

```
- (void)viewDidLoad
{

    objAppdelegate = (REMAppDelegate *) [[UIApplication sharedApplication]delegate];

    [super viewDidLoad];

} 
```

现在在您的方法中：-

```
 - (IBAction) checkIt:(id)sender
{
UIButton *button = (UIButton *)sender;

objAppdelegate.buttonTitleCopy=button.titleLabel.text
NSLog(@"Button text value %@", delegate.buttonTitleCopy);
} 
```

现在您可以`buttonTitleCopy`在您的项目中使用 app-delegate 类 Object 的任何变量。希望你得到这个并解决你的问题。

**注意： -**只需将您的 OtherButton Title 设置为

`otherButton.titleLabel.text=objAppdelegate.buttonTitleCopy;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:08:05.957

你可以试试这个方法

```
- (IBAction) checkIt:(id)sender
{

    otherButton.titleLabel.text=sender.titleLabel.text;

} 
```

# c++ - 初学者 - 通过 XML 或文本文件存储数据

> ID：15217706
> 
> 赞同：0
> 
> 时间：2013-03-05T07:02:14.020
> 
> 标签：c++, xml, database, text, storage

我是 Visual Studio 的初学者，在命令行设置中只有 C 和 C++ 代码。目前，我正在学习一个模块（软件开发），它需要我想出一个费用跟踪器——一个帮助用户跟踪他/她的日常开支的程序。因此，在每一天结束时，或者在用户使用完程序后，我们必须执行数据存储以将所有信息存储在一个地方，以便在下次使用时将其导出。

我的限制包括不使用任何关系数据库（虽然我不知道它是什么：（）。数据存储必须使用 XML 或文本文件完成。在此之后，我有几个关于数据存储的问题：

1）如果数据存储成功，是不是每次启动程序都要导出？并且每次用户关闭程序后，我们都会覆盖现有的数据文件，然后相应地存储它？

2) 我从一些人那里听说使用文本文件可能更容易。在 Internet 和图书馆上搜索只能为我提供有关 XML 的信息，而不是文本。有人能帮我吗？像教程链接和东西？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:10:48.680

文件写入/处理的工作方式类似于 c++ 中的所有其他缓冲区。

您可以使用 fstream 标头启用文件处理。您可以创建一个文件，在每次程序运行时对其进行写入和覆盖，或者甚至可以在程序第一次运行时创建一个文件，然后每次程序运行时附加到该文件。

我只做过文本文件，从未尝试过 XML，但我猜它们是相似的。

[http://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/)应该给你你需要知道的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:16:48.237

您选择 XML 还是纯文本取决于您要存储的数据类型。您只能在 Internet 上找到 XML 库的原因是因为 XML 比纯文本复杂得多。如果您不知道 XML 是什么，或者您存储的数据不是很复杂，那么我建议您使用纯文本。

例如，要跟踪费用，您可以存储如下文件：

```
sandwich 5.00
coffee 2.30
soft drink 1.50
... 
```

在 C++ 文件中读取/写入这样的行非常容易。

# sql-server - SQL Server 查询拆分表

> ID：15217710
> 
> 赞同：1
> 
> 时间：2013-03-05T07:02:32.640
> 
> 标签：sql-server

不知道它是如何调用的，我需要这样做：

```
+---------------+
| param | value |
|   1   |   3   |
|   1   |   3   |
|   2   |   4   |
|   2   |   4   |
+-------+-------+ 
```

到

```
+-----------------+
| param1 | param2 |
|    3   |    4   |
|    3   |    4   |
+-------+---------+ 
```

没有可能`INNER JOIN`吗？

我的错误在哪里？

```
SELECT TOP 10 
    dbo.RW_ReceivedData.[Value] AS Value1, 
    dbo.RW_ReceivedData.[Value] AS Value2
FROM 
    RW_ReceivedData
WHERE 
    dbo.RW_ReceivedData.LogicalName = CAST(0x01000F0800FF AS varbinary(8000)),  
    dbo.RW_ReceivedData.LogicalName = CAST(0x01000F0800FF AS varbinary(8000)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:34:59.600

这应该有效：

```
DECLARE @cols NVARCHAR(4000) 
= STUFF(
    (
        SELECT  DISTINCT ',[' + CAST(param AS VARCHAR(10)) + ']'
        FROM    tbl
        FOR XML PATH('')
    ),1,1,'')

DECLARE @colNames NVARCHAR(4000) 
= STUFF(
    (
        SELECT  DISTINCT ',[' + CAST(param AS VARCHAR(10)) + '] AS param' + CAST(param AS VARCHAR(10))
        FROM    tbl
        FOR XML PATH('')
    ),1,1,'')

DECLARE @sql NVARCHAR(4000) = 
'
SELECT  '+@colNames+'
FROM    
(
    SELECT  *, ROW_NUMBER() OVER (PARTITION BY param ORDER BY param) n
    FROM    tbl
) t
PIVOT   
(
    MIN(value) FOR param IN ('+@cols+')
) pvt'

EXEC(@sql) 
```

这是**[SQL 小提琴](http://sqlfiddle.com/#!3/2967f/1/0)**

这种方法使用动态`PIVOT`. 为了获得预期的结果`ROW_NUMBER()`，使用了分区，因为`param`列中的值不是唯一的。

**更新**

您也可以像这样尝试，但您必须手动将列添加到查询中：

```
SELECT  SUM(CASE WHEN param = 1 THEN value ELSE 0 END) param1
        , SUM(CASE WHEN param = 2 THEN value ELSE 0 END) param2
        , SUM(CASE WHEN param = 3 THEN value ELSE 0 END) param3
FROM
    (
        SELECT  *
                , ROW_NUMBER() OVER (PARTITION BY param ORDER BY param) num
        FROM    tbl
    ) t
GROUP BY
        num 
```

**[SQL小提琴](http://sqlfiddle.com/#!3/9581d/1/0)**

如果您不希望自动处理列，则可以使用 static `PIVOT`：

```
SELECT  [1] AS param1
        ,[2] AS param2  
FROM    (      
    SELECT  *
            , ROW_NUMBER() OVER (PARTITION BY param ORDER BY param) n      
    FROM    tbl) t  
PIVOT   (      
    MIN(value) FOR param IN ([1],[2])  
) pvt 
```

# c# - 如何从 SQL Server 2008 错误代码中识别主键重复？

> ID：15217711
> 
> 赞同：26
> 
> 时间：2013-03-05T07:02:43.917
> 
> 标签：c#, sql-server, entity-framework

我想知道我们如何从 C# 中的 SQL Server 错误代码中识别主键重复错误。

例如，我有一个 C# 表单将数据输入 SQL Server 数据库，当数据输入时发生错误时，如何从异常中识别错误原因？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-05T07:06:23.237

如果您捕获[SqlException](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.aspx)然后查看它的编号，该编号`2627`将意味着违反唯一约束（包括主键）。

```
try
{
    // insertion code
}
catch (SqlException ex)
{
    if (ex.Number == 2627)
    {
        //Violation of primary key. Handle Exception
    }
    else throw;
} 
```

[MSSQL_ENG002627](http://msdn.microsoft.com/en-us/library/ms151757(v=sql.100).aspx)

> 这是一个无论是否复制数据库都可能引发的一般错误。在复制的数据库中， **通常会引发错误，因为没有**在拓扑中适当地管理主键。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-09-12T19:03:56.660

这是一个旧线程，但我想值得注意的是，从 C#6 开始，您可以：

```
try
{
    await command.ExecuteNonQueryAsync(cancellation);
}
catch (SqlException ex) when (ex.Number == 2627)
{
    // Handle unique key violation
} 
```

并使用 C#7 和包装异常（如 Entity Framework Core）：

```
try
{
    await _context.SaveChangesAsync(cancellation);
}
catch (DbUpdateException ex) 
   when ((ex.InnerException as SqlException)?.Number == 2627)
{
    // Handle unique key violation
} 
```

与公认的答案相比，这种方法的最大优势是：

如果错误号**不**等于 2627，因此它不是唯一键违规，则不会捕获异常。

如果没有异常过滤器 ( `when`)，您最好记住重新抛出该异常，以防您无法处理它。理想情况下不要忘记使用`ExceptionDispatchInfo`，以免丢失原始堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-16T21:36:16.030

在实体框架的情况下，接受的答案将不起作用，错误最终不会被捕获。这是一个测试代码，只有实体 catch 语句会被命中，或者如果实体语句被删除，当然会出现通用异常：

```
try
{
    db.InsertProcedureCall(id);
}
catch (SqlException e0)
{
   // Won't catch
}
catch (EntityCommandExecutionException e1)
{
    // Will catch
    var se = e1.InnerException as SqlException;
    var code = se.Number;
}
catch (Exception e2)
{
   // if the Entity catch is removed, this will work too
    var se = e2.InnerException as SqlException;
    var code = se.Number;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-09T09:31:54.370

过滤器的工作代码仅重复主键破坏异常

```
using System.Data.Entity.Infrastructure;
using System.Data.SqlClient;
.........

 try{
    abc...
    }
    catch (DbUpdateException ex)
                {
                    if (ex.InnerException.InnerException is SqlException sqlEx && sqlEx.Number == 2601)
                    {
                        return ex.ToString();
                    }
                    else
                    {
                        throw;
                    }
                } 
```

注意细节：- ex.InnerException.InnerException 不是 ex.InnerException

# .net - 服务与 Windows 应用程序的通信

> ID：15217714
> 
> 赞同：1
> 
> 时间：2013-03-05T07:02:53.170
> 
> 标签：.net

我在机器上运行了一个 Windows 服务，在同一台机器上我运行了 Windows 应用程序。我的要求是：

1.  windows 应用程序应该向 windows 服务发送一个输入，基于 windows 应用程序给出的输入，windows 服务会做一些计算并返回一个输入。

2.  windows应用程序给服务的输入主要是“字符串”类型。windows服务对windows应用程序的响应将是对象类型。

有人建议远程处理可以完成我的工作。请用一些代码给我建议（比如windows应用程序调用的方法是demo_service（windows服务）。

点网版本：2.0 Studio 版本：2005

# android - 如何从 Android 应用程序发送短信而不在设备短信视图中记录？

> ID：15217715
> 
> 赞同：9
> 
> 时间：2013-03-05T07:02:53.923
> 
> 标签：android, sms

我想从我的 android 应用程序发送短信。但我不希望它的记录存在于设备消息视图中。我目前正在使用以下代码。

```
sendSMS(etsendernumber.getText().toString(), etmessagebody.getText().toString()); 
sendintent = new Intent(Intent.ACTION_VIEW);
sendintent.putExtra("sms_body","");
sendintent.setType("vnd.android-dir/mms-sms");
startActivity(sendintent); 
```

但它正在设备的消息视图中记录发送的短信。我们可以从 Android 应用程序发送秘密短信吗？

请指教。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T07:16:39.117

是的，您尝试发送 SMS 的方式是使用随附的消息传递应用程序。所以它会一直记录发送的消息。您必须使用 SmsManager 来发送 SMS。

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(phoneNumber, null, message, null, null); 
```

这样，您的短信就不会被插入到列表中。

还记得在你的清单中添加这个

```
<uses-permission android:name="android.permission.SEND_SMS" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:18:29.543

如果您使用 android SMS 应用程序发送消息，那么它将将该消息保存在发件箱中或发送。您可以做的是从 sms 数据库中删除该消息。发送短信后使用以下命令删除该消息：

```
getContentResolver().delete(Uri.parse("content://sms/outbox"), "address = ? and body = ?", new String[] {etsendernumber.getText().toString(),etmessagebody.getText().toString()}); 
```

如果味精在外箱

或者

```
getContentResolver().delete(Uri.parse("content://sms/sent"), "address = ? and body = ?", new String[] {etsendernumber.getText().toString(),etmessagebody.getText().toString()}); 
```

如果消息在已发送的项目中。

# android - 如何从一个 JSONObject 获取值到另一个 JSONObject

> ID：15217716
> 
> 赞同：3
> 
> 时间：2013-03-05T07:02:56.823
> 
> 标签：android, json, getjson

我想从 Andother 中的一个`JSONObject`中检索数据`JSONObject` 谁能告诉我如何检索它们

我`JSONObject`的是这样的

```
{"udetail":{"ID":238597,"Reference":"AGT-ALIWF_TEST","Provider":"TAL","DropDate":"2012-12-29T13:06:00","abc":"South","def":"2013-01-06T13:06:00","ghi":"North"},"jkl":{"Title":"Mr","FirstName":"LastName_TEST","LastName":"FirstName_TEST LastName_TEST"},"mydetail":{"my":"Model_TESTMake_TEST","hi":"Colour_TEST","tget":"A123 XYZ"}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:21:45.140

You should specify in more detail what you want to achieve and what you have tried. If what you've posted is actually a `JSONObject` and not a `String` containing some JSON, you should be able to simply fetch e.g. the `OrderDetails` object using

```
JSONObject details = <Your JSONObject>.getJSONObject("OrderDetails"); 
```

If what you have is just a string with some JSON, create a `JSONObject` of it first:

```
JSONObject jo = new JSONObject("{"OrderDetails":{"ID":238 ... }}
JSONObject details = <Your JSONObject>.getJSONObject("OrderDetails"); 
```

Also see:

*   [http://developer.android.com/reference/org/json/JSONObject.html#getJSONObject(java.lang.String)](http://developer.android.com/reference/org/json/JSONObject.html#getJSONObject(java.lang.String))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:11:42.580

试试这个，要获取订单详情，

```
 JsonObject jobj = new JsonObject(Response);
  String str = jobj.getJSONObject("OrderDetails").getString("ID"); 
```

客户详细信息之类的

```
 String str1 = jobj.getJSONObject("CustomerDetails").getString("Title"); 
```

汽车细节，

```
 String str2 = jobj.getJSONObject("CarDetails").getString("Make"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:07:07.157

```
 String s= "{
    "OrderDetails": {
        "ID": 238597,
        "Reference": "AGT-    ALIWF_TEST",
        "Provider": "TAL",
        "DropDate": "2012-12-    29T13:06:00",
        "DropTerminal": "South",
        "ReturnDate": "2013-01-    06T13:06:00",
        "ReturnTerminal": "North"
    },
    "CustomerDetails": {
        "Title": "Mr",
        "FirstName": "LastName_TEST",
        "LastName": "FirstName_TEST     LastName_TEST"
    },
    "CarDetails": {
        "Make": "Model_TESTMake_TEST",
        "Colour": "Colour_TEST",
        "Registration": "A123 XYZ"
    }
}"; 
```

尝试这个

```
JSONObject obj=new JSONObject(s);
String orderDetails=obj.getString("OrderDetails");
JSONObject orderjson=new JSONObject(orderDetails);
String Reference=orderjson.getString("Reference"); 
```

CarDetails 和 customer Details 相同

# actionscript-3 - 在 Flex AS3 中迭代模型列表

> ID：15217720
> 
> 赞同：3
> 
> 时间：2013-03-05T07:03:12.537
> 
> 标签：actionscript-3, apache-flex, iterator, flex3

如何在 flex as3 中迭代模型列表我的代码：

```
var list:ArrayList=new ArrayList();
var per:Person=new Person();                
per.person_id=1;                
per.fname="james";
per.userid="12";
list.addItem(per);  

 for each (var p:Person in list)
   {
    trace("name----------"+p.fname);
   } 
```

但上面的迭代器不起作用......如何迭代这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:07:56.637

而不是`for each`你可以尝试正常`for`循环

```
for(var i=0; i<list.length; i++)
{
 var p:Person = Person (list.getitemAt(i));
 trace(p.fname);
} 
```

这将工作正常...

# android - Android 日历事件的 BroadcastReceiver

> ID：15217723
> 
> 赞同：15
> 
> 时间：2013-03-05T07:03:30.147
> 
> 标签：android, broadcastreceiver, android-calendar

我正在尝试编写一个 BroadcastReceiver 来侦听诸如插入、编辑、删除本机 android 日历（ICS 及更高版本）之类的事件。因此，每当这些事件之一发生时，应用程序至少应该能够知道这些事件发生了。

任何人都有想法，如何做到这一点或任何参考链接。

我已经编写了自己的广播接收器类，它从广播接收器扩展而来。无法弄清楚清单中的值，例如，目前我有这个不起作用：

```
 <receiver
    android:name=".NativeEventChangeReceiver">
     <intent-filter>
        <action android:name="android.intent.action.EDIT"/>
        <action android:name="android.intent.action.INSERT"/>
        <action android:name="android.intent.action.DELETE"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <data android:mimeType="vnd.android.cursor.dir/event"/>
     </intent-filter>
  </receiver> 
```

干杯，

编辑1：有人知道数据标签的正确字符串吗？我认​​为这在意图过滤器中也是必需的。

编辑 2：关于使用 ContentObserver 的任何提示？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-06T01:25:44.947

经过大量阅读终于找到了解决方案，这可能有助于其他人找到类似的解决方案。

在 Manifest 中，您需要编写这些行才能捕获更改：

```
<receiver
   android:name=".NativeEventChangeReceiver">
        <intent-filter>
            <action android:name="android.intent.action.PROVIDER_CHANGED"/>
            <data android:scheme="content"/>
            <data android:host="com.android.calendar"/>
        </intent-filter>
</receiver> 
```

干杯，

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-04T00:23:22.780

## 除了接受的答案：

当对日历数据进行任何更改时，将发送此代码广播的意图：

```
<receiver
   android:name=".NativeEventChangeReceiver">
        <intent-filter>
            <action android:name="android.intent.action.PROVIDER_CHANGED"/>
            <data android:scheme="content"/>
            <data android:host="com.android.calendar"/>
        </intent-filter>
</receiver> 
```

不幸的是，它也会在设备启动时广播，或者在创建提供程序并且没有额外的内容可以读取时广播。

**要使您的应用程序仅处理事件实例的插入/删除：**

跟踪事件实例的总数（正如 SagiLow 指出的那样，这仅适用于添加/删除，不考虑更新）。如果更改，请根据用户日历重新验证您的数据：

```
public class CalendarChangedReceiver extends BroadcastReceiver
{
    private static final String TAG = "CalendarChangedReceiver";
    @Override
    public void onReceive(Context context, Intent intent) {
        //Check number of instances
        final SharedPreferences prefs = context.getSharedPreferences(Enums.Config.USER_CONSTANTS, Context.MODE_PRIVATE);`enter code here`
        long lastTimeValidated =  prefs.getLong(AppData.LONG_LAST_TIME_VALIDATED, 0);

      int numRowsLastTimeValidated =  prefs.getInt(AppData.INT_NUM_ROWS_LAST_TIME_VALIDATED, 0);
        int numberOfInstances = getNumberOfInstances(lastTimeValidated, context);
        if(numberOfInstances != numRowsLastTimeValidated) {                    

            /* Do somethng here, for instance:
            Intent serviceIntent = new Intent(context, ValidateCalendarEventsService.class);
            context.startService(serviceIntent);    
            */

        }
    }

    private int getNumberOfInstances(long lastTimeValidated, Context context) {
        Calendar beginTime = Calendar.getInstance();

   beginTime.setTimeInMillis(lastTimeValidated);
        Calendar endTime = Calendar.getInstance();
        endTime.add(Calendar.YEAR, 1);
        endTime.add(Calendar.DAY_OF_MONTH, 1);//now + 366
        long startMillis = beginTime.getTimeInMillis();
        long endMillis = endTime.getTimeInMillis();
        Cursor cur = null;
        ContentResolver cr = context.getContentResolver();
        // Construct the query with the desired date range.
        Uri.Builder builder = CalendarContract.Instances.CONTENT_URI.buildUpon();
        ContentUris.appendId(builder, startMillis);
        ContentUris.appendId(builder, endMillis);
        // Submit the query
        cur = cr.query(builder.build(), null, null, null, null);
        //handle results
        return cur.getCount();
    }
} 
```

# c# - WebBrowser 在新的 TabPage 上设置 cookie 或会话

> ID：15217731
> 
> 赞同：4
> 
> 时间：2013-03-05T07:03:42.050
> 
> 标签：c#, .net, session, cookies, browser

我想重新创建一个具有选项卡功能、弹出块和重定向到新选项卡的 Web 浏览器。这是我能够达到的：

```
firstTabWebBrowser.Navigate("www.site-with-popup.com"); //inizializa my broeser navigation

//...

(firstTabWebBrowser.ActiveXInstance as SHDocVw.WebBrowser).NewWindow3 += new SHDocVw.DWebBrowserEvents2_NewWindow3EventHandler(Browser_NewWindow3); //new window 3 event    

//...

private void Browser_NewWindow3(ref object ppDisp, ref bool Cancel, uint dwFlags, string bstrUrlContext, string bstrUrl)
{

Cancel = true; //block a new IE window to be opened

TabPage addedTabPage = new TabPage("redirected tab"); //create new tab
tabControl_webBrowsers.TabPages.Add(addedTabPage); //add new tab to the TabControl
System.Windows.Forms.WebBrowser newTabWebBrowser = new System.Windows.Forms.WebBrowser() //create new WebBrowser inside the new tab
{
   Parent = addedTabPage,
   Dock = DockStyle.Fill
};

System.Windows.Forms.WebBrowser actualWebBrowser = (System.Windows.Forms.WebBrowser)tabControl_webBrowsers.SelectedTab.GetChildAtPoint(new Point(10, 10)); //the only way I've found to select the actual webBrowser
ppDisp = actualWebBrowser.ActiveXInstance; //try to pass actual browser reference to the new browser, but I can't notice any difference without this line

newTabWebBrowser.Navigate(bstrUrl); //navigate to the popup destination url

(newTabWebBrowser.ActiveXInstance as SHDocVw.WebBrowser).NewWindow3 += new SHDocVw.DWebBrowserEvents2_NewWindow3EventHandler(Browser_NewWindow3); //attach this function to the new browser            

} 
```

* * *

**尝试**

我已经在一些网站上对其进行了测试，并且新选项卡上的弹出重定向有效，但新生成的 webBrowser 似乎丢失了会话身份验证。我发现[这个](https://stackoverflow.com/questions/9627776/webbrowser-control-and-cookies)以前的问题似乎与我的很接近，但在回答之后问题仍然存在。因此，我想这可能是由于原始 webBrowser 的 cookie，我可以通过 actualWebBrowser.Document.Cookie 访问，但我无法转移到新浏览器。

*   我已经尝试过`newTabWebBrowser.ActiveXInstance = actualWebBrowser.ActiveXInstance;`，而不是`ppDisp = actualWebBrowser.ActiveXInstance;`听起来很糟糕并且无法编译，因为 newTabWebBrowser.ActiveXInstance 是只读的。
*   虽然`newTabWebBrowser.Document.Cookie = actualWebBrowser.Document.Cookie;`生成一个不会阻止应用程序但跳过我的`Browser_NewWindow3()`功能的错误。
*   我还发现`InternetSetCookie(url, cookie);`哪些必须声明`[DllImport("wininet.dll", CharSet = CharSet.Auto, SetLastError = true)] static extern bool InternetSetCookie(string Url, string Cookie);`不幸的是我无法使用这些，也许我错过了一些陈述。

* * *

**问题**

如何强制我的新浏览器（在新选项卡内）记住其“父级”会话/登录信息？

（*甚至没有人试图回答。请注意我是否以不正确的方式发布了这个问题，或者是否存在另一个我可以发布我的问题的 c# 专用论坛*）

* * *

**方案：**

![在此处输入图像描述](../Images/449f64013535a833395f4474b3d731d2.png)

# android - 在 Android 应用程序存储库中管理依赖项的最简单方法是什么？

> ID：15217734
> 
> 赞同：1
> 
> 时间：2013-03-05T07:03:45.807
> 
> 标签：android, eclipse, maven, ant

我想制作一个依赖于其他 3rd 方库的 Android 应用程序，即[ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)，并使用 Git 在源代码控制中跟踪应用程序的开发。我还想让其他开发人员更容易地帮助我开发应用程序。开发人员应该能够通过一两个简单的步骤构建应用程序。

我想在最简单的环境中开发应用程序。我尝试使用[Android Maven Plugin](https://code.google.com/p/maven-android-plugin/)，并尝试在 Eclipse 中设置 Maven 集成。我发现这个过程非常不直观且不必要地复杂。

是否可以使用 Git 子模块管理项目依赖项，并使用一个非常简单的构建系统（可能基于 Ant）来链接任何依赖项、调试、安装和签名/部署`.apk`？

理想情况下，我想做以下事情：

```
$ git clone git@github.com:me/myapp.git # clone the repo
$ cd myapp # enter the app directory
$ git submodule init && git submodule update # initialize dependencies
$ ant debug install # build & run app 
```

此外，我希望能够在 IDE 中开发应用程序。IDE 应该具有智能感知和自动完成功能（Vim 可以工作，但我喜欢类似于 Eclipse 如何自动添加在创建派生类时必须重写的方法）。从 IDE 构建和运行应用程序应该只执行适当的 Ant 命令。

实现上述设置的最简单方法是什么？即：

1.  作为子模块（或类似）管理的依赖项
2.  简单的构建工具
3.  IDE 与构建工具和自动完成/智能感知集成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:53:19.563

我认为管理依赖项的最简单方法是Android SDK 提供的*默认方法。*我同意 Maven 非常不直观且不必要地复杂。此外，Android 团队不正式支持 Maven。

你只需要一个好的 VCS，比如 Git 或 Mercurial。

*   将所有`*.jar`文件放在子文件夹中`/libs`；
*   在 Eclipse 中，右键单击项目，然后选择`Refresh`；

要使用命令行在模式下部署 APK `release`，您只需要`ant.properties`类似：

```
key.store=/path-to-key-store
key.alias=alias-name
key.store.password=password
key.alias.password=alias-password 
```

和：

```
$ ant clean release 
```

或者，

```
$ ant clean release install 
```

* * *

*编辑*

对不起，我忘记了 Git 子模块。我以前从未使用过 Git，但只是[在这里阅读了一些信息](http://git-scm.com/book/en/Git-Tools-Submodules)。我认为子模块就像带有源代码的子项目。如果是这样，事情也很容易。例如，您有一个宿主项目`A`和一个子项目`B`（这是一个库）：

```
A
|__ submodules
    |__ B 
```

要包含 library `B`，请打开`A/project.properties`并添加以下行：

```
android.library.reference.1=submodules/B 
```

或者您可以让 Eclipse 管理它，方法是右键单击`A`、选择`Properties`、选择`Android`选项卡，然后添加`B`到`Library`框。

# ios - GCDAsyncUdpSocket + Bonjour？(bynamic udp 端口 )

> ID：15217740
> 
> 赞同：0
> 
> 时间：2013-03-05T07:03:59.080
> 
> 标签：ios, bonjour, gcdasyncsocket

我正在`GCDAsyncUdpSocket`用于我的项目，我可以通过这种方式绑定端口，**（服务器部分）**

```
[udpSocket bindToPort:45678 error:&error]; 
```

但我不想为此提供静态端口号。如何为 UDP 通信获取可用的空闲端口？我要使用 Bonjour 将它作为服务发布？我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:53:15.437

看看这个做得好的教程——因为这个教程，我在商店里有一个使用 Bonjour 的产品！

[教程：iPhone 上的网络和 Bonjour](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/ "教程：iPhone 上的网络和 Bonjour")

# java - 构造函数集/获取。如何不设置小于 0 的值返回？

> ID：15217741
> 
> 赞同：0
> 
> 时间：2013-03-05T07:04:04.050
> 
> 标签：java

为每个实例变量提供一个 set 和一个 get 方法。如果月薪不是正数，不要设置它的值。

我遇到的问题是“未设置值”这是我的代码：

*主类*

```
public class Main {

public static void main(String[] args) {

Employee myEmp  = new Employee("William", "Russell", 30000);
Employee myEmp2  = new Employee("Yevgeniya", "Pakhom", -1);
myEmp.displayMessage();
myEmp2.displayMessage();
}
}

Employee.class

public class Employee {

    private String fName;
    private String lName;
    private double ySalary;

public Employee (String firstName, String lastName, double yearSalary)
    {
        fName = firstName;
        lName = lastName;
        ySalary = yearSalary;
    }
// Set First Name
    public void setFName (String firstName)
        {
        fName = firstName;
        }
// Get First Name
    public String getFName()
        {
        return fName;
        } 

   // Set Last Name
    public void setLName (String lastName)
        {
        lName = lastName;
        }
  //  Get Last Name
    public  String getLName()
        {
        return lName;
        } 

 // Set Salary
    public void setSalary (double yearSalary)
        {

            ySalary = yearSalary;

        }
// Get Salary
    public double getYearSalary()
        {

        return ySalary;

        }
// Display method
        public void displayMessage()
        {
            if (ySalary < 0)
                 System.out.printf("Hello %s %s, \nI see you're       currently making: %.2f\n", getFName(), getLName(),getYearSalary() );

 }
} 
```

我在 displayMessage() 方法中添加了 if 语句。但我猜这不是“将其设置为空”。

我的妻子遇到了类似的问题，她将其设置在“获取”下，但我的工作方式不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:08:19.240

将 setSalary 更改为

```
public void setSalary (double yearSalary)
        {
            if (yearSalary <= 0) {
                 throw new IllegalArgumentException("yearSalary: " + yearSalary);
            }
            ySalary = yearSalary;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:05:46.947

你不应该在你的`setSalary()`方法中设置它。那是你`setter`的`salary`。

在你的情况下，里面`Constructor`就足够了。

```
public Employee (String firstName, String lastName, double yearSalary)
{
        fName = firstName;
        lName = lastName;
        if(yearSalary >= 0){
            ySalary = yearSalary;
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:06:51.613

您需要在构造函数中调用此函数。或者只是`if`在构造函数中放置一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:07:44.277

您应该检查 setSalary 方法中的先决条件，并且可以选择抛出异常（如 IllegalArgumentException）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T07:10:07.217

```
class Employee{

   //Use factory method instead to check for pre conditions
   public static Employee newEmployee(String firstName, String lastName, double salary){
       if(salary < 0){
          throw new IllegalArgumentException("Salary cannot be negetive");
       }

      return new Employee(firstName, lastName, salary);
   }

} 
```

如果您还有一个 setter 方法，那么还应该在那里检查否定的条件以抛出非法参数异常。

**为什么使用工厂方法：**由于在构造函数中工作不是一个好习惯，所以在工厂方法或实际工厂中进行前置条件检查是最好的做法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T07:11:07.730

在 setSalary() 中，您可以检查薪水是否<0，如果是则不设置

```
public void setSalary (double yearSalary)
        {
            if(yearSalary >0 ){
                 ySalary = yearSalary;
           }
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T07:12:22.780

您正在通过和构造函数设置薪水，并且根本不使用 setter。如果需要，在构造函数中添加验证。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-05T07:14:32.750

我修改了代码以使用 Double。希望这可以帮助您设置空值。

```
public class JavaMainTest {

public static void main(String[] args) {

Employee myEmp  = new Employee("William", "Russell", 30000d);
Employee myEmp2  = new Employee("Yevgeniya", "Pakhom", null);
Employee myEmp3  = new Employee("Sernea", "Monsen", -1d);
myEmp.displayMessage();
myEmp2.displayMessage();
myEmp3.displayMessage();
}
}

 class Employee {

    private String fName;
    private String lName;
    private Double ySalary;

public Employee (String firstName, String lastName, Double yearSalary)
    {
        fName = firstName;
        lName = lastName;
        if (yearSalary!=null)
        ySalary = yearSalary;
    }
// Set First Name
    public void setFName (String firstName)
        {
        fName = firstName;
        }
// Get First Name
    public String getFName()
        {
        return fName;
        } 

   // Set Last Name
    public void setLName (String lastName)
        {
        lName = lastName;
        }
  //  Get Last Name
    public  String getLName()
        {
        return lName;
        } 

 // Set Salary
    public void setSalary (Double yearSalary)
        {

            ySalary = yearSalary;

        }
// Get Salary
    public Double getYearSalary()
        {

        return ySalary;

        }
// Display method
        public void displayMessage()
        {
            if (ySalary == null)
                 System.out.printf("Hello %s %s, \nI see you're       currently making: %.6f\n", getFName(), getLName(),getYearSalary() );
            else if (ySalary < 0)
                 System.out.printf("Hello %s %s, \nI see you're       currently making: %.2f\n", getFName(), getLName(),getYearSalary() );

 }
} 
```

# javascript - 在 MVC 视图中检索 json 值的可能方法是什么？

> ID：15217742
> 
> 赞同：2
> 
> 时间：2013-03-05T07:04:04.743
> 
> 标签：javascript, json, model-view-controller, nvd3.js

我在我的视图中使用以下代码，它提供了一个警告框作为 json 值。相反，我需要将这些 json 值放在我下面提到的代码中。

```
 var option = @Html.Raw(Json.Encode(ViewData["choice"]));
    alert(JSON.stringify(option.Data)); 

    var data = [

        {

            values:/* here i need data*/

        }];

    var chart; 
```

它是一个 nvd3 条形图应用程序，请帮助我，或者给我一些方法来转换并从 mVC 控制器传递 json 以查看。

这是我的代码，我无法弄清楚这段代码有什么问题，

```
 <script type="text/javascript">

  var option = @Html.Raw(Json.Encode(ViewData["choice"]));

   var chart;
   var data=[{
    values: [

     @foreach(var item in option)
        {  
            <text>
            { 
                   "FullName": "@item.myfield1" ,
                   "ID": @item.myfield2
            } ,
            </text>
        }
       ]
      }];
    nv.addGraph(function () {
    var chart = nv.models.multiBarHorizontalChart()
      .x(function (d) { return d.FullName })
     .y(function (d) { return d.ID })
     .margin({ top: 30, right: 10, bottom: 50, left: 500 })
     .showValues(true)
      .tooltips(false)
          .showControls(false);

    chart.yAxis
   .tickFormat(d3.format(','));

    d3.select('#chart svg')
   .datum(data)
   .transition().duration(500)
   .call(chart);

    nv.utils.windowResize(chart.update);
    return chart;
    });

   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:26:04.827

只需您可以执行以下操作。

```
<script type="text/javascript">
...
var option = @Html.Raw(Json.Encode(ViewData["choice"]));
var chart;
var data=[
{
    values: option
 }];
...
</script> 
```

在您的控制器中，您必须这样做才能检索 JSON 数据。

```
ViewData["choice"] = Json(listData).Data; 
```

*listData 是包含您的数据的列表的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:25:19.597

我假设你想做这样的[事情](http://nvd3.org/ghpages/discreteBar.html)。

```
<script>
    .....
    var data=[{
    key:"My Key for Chart", 
     values: [
    @foreach(var item in option)
    {
    <text>
    { 
               "label" : "@item.myfield1" ,
               "value" : @item.myfield2
    } ,
    </text>
    }
    ]

    }];

    .....
</script> 
```

希望这可以帮助。

# sql - MySQL 和 AJAX 预测搜索实施选项

> ID：15217743
> 
> 赞同：2
> 
> 时间：2013-03-05T07:04:05.720
> 
> 标签：sql, ajax, jquery, sql-like

我在 MySQL 数据库的“地址”表中有地址。该表包含地址 ID 列和地址相关列的常见分类 - 名称、第 1 行、第 2 行、郊区、州、邮政编码等。许多字段允许 NULL。

这用于客户端基于 Web 的界面 - 用户可以通过在文本框中键入地址的任何部分来从表中查找和选择地址。匹配被显示并且用户可以选择一个。

![该机场因澳大利亚的“str”而被列出](../Images/772acbb07a1b3dd70cfcdda18a69376e.png)

文本框中的术语被视为以空格分隔的一系列搜索术语，并且每个术语都必须出现在任何地址字段中才能显示以供选择。

![现在有两个搜索词要匹配...](../Images/bb658457e613eac625af03fc11e537ac.png)

为此，我在几种实现方法之间纠结：

目前的方法：

1.  在页面加载时，异步 HTTP 请求（“AJAX”）用于检索格式良好的列表中的所有地址（所有字段组合成一行，占空白字段）。
2.  每当文本框接收到输入时，jQuery 用于在此列表中查找和显示匹配项。

这种方法的好处是只需要发送一个简单的查询，并且在输入搜索字段和查看响应之间没有延迟，因为搜索是在客户端完成的（尽管这可能无法很好地扩展 - 见下文） . 它还避免了对复杂 SQL 搜索的需要（我并不反对，我只是想实现一些东西作为概念证明，而且这种方法更快）。

缺点当然是页面加载时必须检索每个地址，并且数据库最终可能会存储数千个地址。

另一种方法是每当用户在文本框中键入时发送 HTTP 请求，这将返回与使用 SQL 搜索表匹配的地址。需要更多的请求和更大的延迟，但每次只需要检索和传输一个地址子集。我可以根据需要轻松调整最小任期长度和轮询频率。

我想知道实现此 SQL 方面的最佳方法...

我最好创建一个连接所有可搜索地址列的视图，并使用带有 WHERE 子句的查询，如“concatcolumn LIKE '%term1%' AND concatcolumn LIKE '%term2%' AND concatcolumn LIKE '%termN%' “？

任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:13:24.263

我已经找到了一个我相当满意的解决方案。

首先创建了一个包含连接的可搜索地址字段的视图：

```
CREATE VIEW address_concat AS
SELECT address_id, CONCAT_WS(' ', address_name, address_line_1, address_line_2, suburb, postcode, state, country) AS full_address
FROM address 
```

当接收到带有搜索字符串的请求时，我在 PHP 中对其进行解析并使用视图来查找匹配项（以下代码已被清理并删除了不相关的内容 - 数据已被清理，等等）：

```
$terms = explode(' ', preg_replace('/\s+/', ' ', $_GET['find_address'])); //get array of terms  
$where = " WHERE full_address LIKE '%".implode("%' AND full_address LIKE '%", $terms)."%' "; //turn array into WHERE clause

//query database to find matches
$result = $db->query("SELECT a.* FROM address a JOIN address_concat ac ON a.address_id = ac.address_id ".$where." ORDER BY IFNULL(IF(address_name = '', NULL, address_name), address_line_1)");

if ($result->num_rows > 0)
{       
    //construct output
    $output = '<ul>';

    while ($row = $result->fetch_assoc())
        $output .= '<li val_id="'.$row['address_id'].'">'.make_address(...).'</li>';

    $output .= '</ul>';
}
else
    $output = '<p>No matches found.</p>'; 
```

在客户端，我从[其他](https://stackoverflow.com/questions/4220126/run-javascript-function-when-user-finishes-typing-instead-of-on-key-up) [问题](https://stackoverflow.com/questions/14042193/how-to-trigger-an-event-in-input-text-after-i-stop-typing-writting)中汲取了一些智慧，使其仅在输入暂停后才进行查询。

```
var typingTimer;

$('input#filterbox').bind('input', function () 
{
    var textfield = $(this);

    //code to hide/show "clear text field" box eliminated, etc

    clearTimeout(typingTimer);
    typingTimer = setTimeout(function () {doFilterUpdate(textfield);}, 750);

});

function doFilterUpdate (target)
{
    if (target.val().length >= 3)
        $('div#resultlist').load('inc/ajax.php?find_address=' + encodeURIComponent(target.val()));
    else
        $('div#resultlist').html('');
} 
```

我仍然不确定创建视图是否比仅在 WHERE 子句中使用 CONCAT_WS 的地址表上编写查询是否必要/更有效......它确实使查询更简单，尽管：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:21:21.153

绝对不要在搜索之前带回地址，用户不会介意返回结果所需的第二秒，使用加载 gif 来显示在您的 ajax 调用期间正在发生的事情。

执行以下操作：

```
SELECT columns
FROM   table
WHERE     searchterm LIKE '%' + column1 + '%'
       OR searchterm LIKE '%' + column2 + '%'
       OR searchterm LIKE '%' + column3 + '%' 
```

我也很想使用该`REPLACE`功能来删除空格、逗号和句号

```
REPLACE(REPLACE(REPLACE(searchterm,' ',''),',',''),'.','') LIKE '%' + column1 + '%' 
```

我也很想限制在查询结束后使用关键字[LIMIT返回的结果数量。](http://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html)

# c++ - 向量下标超出范围 C++

> ID：15217744
> 
> 赞同：-4
> 
> 时间：2013-03-05T07:04:07.480
> 
> 标签：c++, vector

我正在尝试编写一个程序来洗牌并处理一副纸牌，不幸的是，我不断收到“矢量下标超出范围”错误。我相信它在 DeckOfCards.cpp 文件中，但我似乎不太明白它为什么会抛出这个错误或如何纠正它。无论如何，这里是代码：

卡片.h

```
#ifndef CARD_H
#define CARD_H
#include <string>
using namespace std;

class Card
{
    public:
        static const int totalFaces = 13; // total number of faces
        static const int totalSuits = 4; // total number of suits
        Card( int cardFace = 0, int cardSuit = 0 ); // initialize face and suit
        string toString() const; // returns a string representation of a Card

        // get the card's face
        int getFace() const
        {
            return face;
        } // end function getFace

        // get the card's suit
        int getSuit() const
        {
            return suit;
        } // end function getSuit

    private:
        int face;
        int suit;
        static const string faceNames[ totalFaces ];
        static const string suitNames[ totalSuits ];
}; // end class Card
#endif 
```

卡片.cpp

```
#include <iostream>
#include "Card.h"
#include "DeckOfCards.h"
using namespace std;

const std::string Card::faceNames[ totalFaces ] = {"Ace", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King"};
const std::string Card::suitNames[ totalSuits ] = {"Hearts", "Clubs", "Diamonds", "Spades"};

Card::Card( int cardFace, int cardSuit )
{
    face = cardFace;
    suit = cardSuit;
}

string Card::toString() const
{
    return faceNames[ face ] + " of " + suitNames[ suit ];
} 
```

DeckOfCards.h

```
#ifndef DECK_OF_CARDS_H
#define DECK_OF_CARDS_H
#include <vector>
#include "Card.h"
using namespace std;

// DeckOfCards class definition
class DeckOfCards
{
    public:
        DeckOfCards(); // constructor initializes deck
        void shuffle(); // shuffles cards in deck
        Card dealCard(); // deals cards in deck
        bool moreCards() const; // are there any more cards left

    private:
        vector< Card > deck; // represents deck of cards
        unsigned currentCard; // index of next card to be dealt
}; // end class DeckOfCards
#endif 
```

DeckOfCards.cpp

```
#include <iostream>
#include <cstdlib>
#include <ctime>
#include "DeckOfCards.h"
#include "Card.h"
using namespace std;

// DeckOfCards default constructor initialized deck
DeckOfCards::DeckOfCards()
{
    vector <Card> newDeck (52);
    currentCard = 0;

    for (int i = 0; i < Card::totalFaces; i++)
    {
        for (int j = 0; j < Card::totalSuits; j++)
        {
            newDeck.push_back(newDeck[currentCard] = Card(i,j));
            currentCard++;
        }
    } 
}

void DeckOfCards::shuffle() // shuffles cards in deck
{
    for (int i = 0; i < 52; i++)
    {
        int randCard = rand() % 52;

        // swaps card with random card
        Card swap = deck[i];
        deck[i] = deck[randCard];
        deck[randCard] = swap;
    }
}

Card DeckOfCards::dealCard() // deals cards in deck
{
    return deck[currentCard++];
} 

bool DeckOfCards::moreCards() const // checks if the current card is out of bounds, if so, no more cards
{
    if(currentCard<=52)
        return true;
    else
        return false;
} 
```

主文件

```
#include <iostream>
#include <iomanip>
#include "DeckOfCards.h" // DeckOfCards class definition
using namespace std;

int main()
{
    DeckOfCards myDeckOfCards;
    myDeckOfCards.shuffle(); // place Cards in random order

    // print all 52 Cards in the order in which they are dealt
    for ( int i = 1; myDeckOfCards.moreCards(); ++i )
    {
        // deal and display a Card
        cout << left << setw( 19 ) << myDeckOfCards.dealCard().toString();
        if ( i % 4 == 0 ) // output newline every 4 cards
            cout << endl;
    } // end for
} // end main 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:10:12.533

问题是在`DeckOfCards`类中，`deck`向量永远不会被添加，所以它是空的。

在构造函数中，分配`newDeck`给`deck`：

```
deck = newDeck; 
```

* * *

构造函数中还有另一个问题：您声明`newDeck`包含 52 个条目，但随后您使用`push_back`向向量添加新条目。这*会增加*向量的大小，因为这些条目是在您声明它最初拥有的 52 个条目*之后添加的。*

只需使用下标运算符来设置这些条目。

# javascript - 如何将 JSON 转换为 javascript 数组？

> ID：15217746
> 
> 赞同：2
> 
> 时间：2013-03-05T07:04:10.923
> 
> 标签：javascript, arrays, hashmap, timestamp, flot

我已将 Java HashMap 作为 JSON 传递给客户端。生成的 JSON 如下：

```
{
  "2013-02-27T07:25:35.000+0000": 40,
  "2013-03-01T07:25:35.000+0000": 33,
  "2013-02-26T07:25:35.000+0000": 25,
  "2013-02-23T07:25:35.000+0000": 54,
  "2013-03-03T10:12:59.000+0000": 26,
  "2013-03-02T07:12:59.000+0000": 25
} 
```

但要绘制到 Flot 图表上，我需要以下格式的输入：

```
[
[1328983200000, 40],
[1328983200000, 33], 
[1328983200000, 25],
[1328983200000, 54],
[1328983200000, 26], 
[1328983200000, 25]
]; 
```

其中第一个值是 Unix Timestamp X 1000

*（Flot 中的时间序列支持基于 Javascript 时间戳，即在预期或移交时间值的任何地方，都使用 Javascript 时间戳编号。这是一个数字，而不是 Date 对象。Javascript 时间戳是自以来的毫秒数1970 年 1 月 1 日 00:00:00 UTC。这与 Unix 时间戳几乎相同，只是以毫秒为单位，所以记得乘以 1000！）*

我怎样才能转换它？任何人都可以指导。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:15:52.853

```
var list = {
    "2013-02-27T07:25:35.000+0000": 40,
    "2013-03-01T07:25:35.000+0000": 33,
    "2013-02-26T07:25:35.000+0000": 25,
    "2013-02-23T07:25:35.000+0000": 54,
    "2013-03-03T10:12:59.000+0000": 26,
    "2013-03-02T07:12:59.000+0000": 25
}, arr = [];

for (var key in list) {
    arr.push([+new Date(key)*100, list[key]]);  //One simple line of code
}                                               //Keep trying!

console.log(arr); 
```

[http://jsfiddle.net/DerekL/F4tst/](http://jsfiddle.net/DerekL/F4tst/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:13:30.277

您可以做的是遍历对象，在您拥有的日期之外创建一个 Date 对象，使用 getTime() 方法以毫秒为单位获取时间戳，创建一个新数组，然后将其推送到您的主数组上。这可能不是最好的解决方案，但它会起作用。

假设您的 JSON 对象名为 obj；

```
var mainArray = [];
for (var x in obj) {
    var tmpDate = (new Date(x)).getTime();
    var smallArray = [tmpDate, obj[x]];
    mainArray.push(smallArray);
} 
```

# php - 在某个时间点后停止从数据库中获取数据

> ID：15217751
> 
> 赞同：1
> 
> 时间：2013-03-05T07:04:39.540
> 
> 标签：php, mysql

我想从数据库中获取数据，直到满足某个条件。如果满足此条件，我想在那之后停止获取。

```
while($row=mysql_fetch_array($result1)){
$a1=$row['Count']
if($a1<100){
$w1=$a1
//Now I want to stop fetching data after this point and take the variable "$w1" out
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:05:54.223

您可以使用`break`：

```
while ($row = mysql_fetch_array($result1)) {
    $a1 = $row['Count'];

    if ($a1 < 100) {
        $w1 = $a1;
        break;
    }
} 
```

或者`return`它超出了一个功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T07:06:44.910

最好的选择是在您的查询中给出`limits`和条件`where`

这样查询执行会很快（您需要获取更少的数据）。

不是先获取整个数据并过滤它，而是先过滤数据并获取它。

在您的情况下：如果您想获取前 100 条记录：

```
$sql = "SELECT * FROM table LIMIT 0,100"; 
```

如果你有任何条件，

```
$sql = "SELECT * FROM table WHERE field = '".$var."' LIMIT 0,100"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:08:20.907

使用中断；或者更好，您可以在查询中使用限制和位置条件

```
while($row=mysql_fetch_array($result1))
{
  $a1=$row['Count'];
  if($a1<100)
  {
     $w1=$a1; break;         
  }
} 
```

# php - 就地编辑并将值更改为数据库？

> ID：15217752
> 
> 赞同：1
> 
> 时间：2013-03-05T07:04:51.007
> 
> 标签：php, jquery, mysql

我正在使用[可编辑](http://www.arashkarimzadeh.com/jquery/7-editable-jquery-plugin.html)插件进行就地编辑。我可以在网页上执行此操作，但我也想将此值更改为数据库。

这是 php/html 代码：

```
while($row = mysql_fetch_assoc($result))
    {

                echo "<tr class='highlighter'><td class='editable-1'>".$row['subcategory_name']."</td>";

             echo  "</tr>";

    } 
```

jquery代码如下：

```
$(document).ready(function() 
    { 
        $('.editable-1').editable({onEdit:begin});
        function begin(){
            this.append('Click somewhere else to submit');

        }
    } 
); 
```

我正在尝试使用**ajax**，但在文本框中更新时没有获得值。

这是我想要做的

```
$.ajax({
url:'change_subcat.php',
data:'NOT AVAILABLE'
}); 
```

请告诉我如何在数据库中进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:15:33.290

您将需要通过 ajax 将数据提交到服务器，您需要一个脚本来处理数据并将其保存到您的数据库中。

看起来在这个插件中，您可以将一个侦听器附加到`onEdit`将提交您的数据的事件，可能是这样的：

```
$('.editable-1').editable({onEdit: submitData});
function submitData (content) {
    $.post('/save_to_db.php', { data: content.current });
 } 
```

从这个插件的文档来看，回调似乎是用一个具有和属性的参数（`content`在这种情况下）的对象调用的。您应该能够使用 获取可编辑字段的新值。`previous``current``content.current`

# html - 在html中制作圆形导航器

> ID：15217755
> 
> 赞同：1
> 
> 时间：2013-03-05T07:05:05.413
> 
> 标签：html, css

是否可以制作圆形导航器？例如一个圆圈分成4个，每个分区上都有不同的链接？

如果可能的话，我可以在鼠标悬停时在它们上面放置动画或颜色变化吗？天...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:11:02.450

利用`border-radius`

**HTML**

```
<div id="circle-container">
<div class="quarter top-left"><a href="#">link 1</a></div>
<div class="quarter top-right"><a href="#">link 2</a></div>
<div class="quarter bottom-left"><a href="#">link 3</a></div>
<div class="quarter bottom-right"><a href="#">link 4</a></div>
</div> 
```

**CSS**

```
#circle-container{width:100px;height:100px}
.quarter{width:50px;height:50px}
.top-left{border-top-left-radius:50px;background:#e3f9d1;float:left}
.top-right{border-top-right-radius:50px;background:#c0f7f7;float:right}
.bottom-left{border-bottom-left-radius:50px;background:#fc92f5;float:left}
.bottom-right{border-bottom-right-radius:50px;background:#333;float:right}
a{
 text-decoration:none;
    color:red;
    width:50px;
    line-height:50px;
    display:block;
    text-align:center
} 
```

**[演示](http://jsfiddle.net/9zdHw/1/)**

# android - 当android中的web上有大量数据时，如何减少解析和插入数据库的时间？

> ID：15217757
> 
> 赞同：-6
> 
> 时间：2013-03-05T07:05:10.473
> 
> 标签：android, database, parsing

我正在使用 android 中的圣经项目并在 web 上有更多 30000 文本行。我想使用 dom 解析来解析该数据并插入到数据库中。这里的问题是它需要超过 15 分钟才能得到响应，然后解析然后填入数据库。填入数据库后。我使用查询方法显示数据。所以用户被阻塞了 15 分钟，这是非常糟糕的印象。如何减少解析和插入数据库的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:23:03.670

If you really want to parse and store into the database so better way is to load in some range like 0-50-100-150 or 0-100-200.

So You can achieve this by using ListView with load Button. You can make it like it will load automatically while scrolling to position say 50 or 100 what ever its up to you.

Or else you while scrolling the a footer will be added to the ListView at the end i.e say 50 0r 100.

For reference go through the following link.

[https://github.com/shontauro/android-pulltorefresh-and-loadmore](https://github.com/shontauro/android-pulltorefresh-and-loadmore)

[http://www.androidhive.info/2012/03/android-listview-with-load-more-button/](http://www.androidhive.info/2012/03/android-listview-with-load-more-button/)

Hope this will help you to achieve your requirement.

Many Thanks.

# r - 在没有 Rprofile.site 的情况下从 .libPaths() 中永久删除一个库

> ID：15217758
> 
> 赞同：35
> 
> 时间：2013-03-05T07:05:14.877
> 
> 标签：r

# 如何永久删除 R 中的库？

```
.libPaths()
[1] "\\\\per-homedrive1.corp.riotinto.org/homedrive$/Tommy.O'Dell/R/win-library/2.15"
[2] "C:/Program Files/R/R-2.15.2/library"                                            
[3] "C:/Program Files/RStudio/R/library" 
```

第一项是我的公司“我的文档”文件夹，我姓氏的路径中的撇号在我正在制作的包上使用时会引起各种悲伤`R CMD INSTALL --build`，更不用说在我离线时使用安装在那里的包的问题从网络。

我想改为使用`C:/Program Files/R/R-2.15.2/library`默认值，但我不想依赖`Rprofile.site`.

## 我试过的

```
> .libPaths(.libPaths()[2:3])
> .libPaths()
[1] "C:/Program Files/R/R-2.15.2/library" "C:/Program Files/RStudio/R/library" 
```

这似乎可行，但直到我重新启动我的 R 会话，然后我回到原来的 .libPaths() 输出......

```
Restarting R session...

> .libPaths()
[1] "\\\\per-homedrive1.corp.riotinto.org/homedrive$/Tommy.O'Dell/R/win-library/2.15"
[2] "C:/Program Files/R/R-2.15.2/library"                                            
[3] "C:/Program Files/RStudio/R/library" 
```

我想也许`.libPaths()`正在使用`R_LIBS_USER`

```
> Sys.getenv("R_LIBS_USER")
[1] "//per-homedrive1.corp.riotinto.org/homedrive$/Tommy.O'Dell/R/win-library/2.15" 
```

所以我尝试使用它来取消它，`Sys.unsetenv("R_LIBS_USER")`但它不会在会话之间持续存在。

## 附加信息

如果重要的话，这里有一些可能相关的环境变量......

```
> Sys.getenv("R_HOME")
[1] "C:/PROGRA~1/R/R-215~1.2"
> Sys.getenv("R_HOME")
[1] "C:/PROGRA~1/R/R-215~1.2"
> Sys.getenv("R_USER")
[1] "//per-homedrive1.corp.riotinto.org/homedrive$/Tommy.O'Dell"
> Sys.getenv("R_LIBS_USER")
[1] "//per-homedrive1.corp.riotinto.org/homedrive$/Tommy.O'Dell/R/win-library/2.15"
> Sys.getenv("R_LIBS_SITE")
[1] "" 
```

我已经尝试过`Sys.unsetenv("R_LIBS_USER")`，但这也不会在会话之间停留

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-05T07:42:49.537

Just set the environment variable `R_LIBS` in Windows to something like

```
R_LIBS=C:/Program Files/R/R-2.15.2/library 
```

Restart R.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-11-14T20:46:28.190

这对这个问题的回答有点晚，但可能对其他人有用。我命令设置自己的路径（并删除原始路径之一）我有：

*   `.libPaths()`在**R**中用于检查*当前库路径*；
*   确定要保留的路径。就我而言，它保留了**R**的原始库，但删除了指向我的文档的链接。
*   使用or找到**R-Home**路径； `R.home()``Sys.getenv("R_HOME")`
    *   `R-Home\R-3.2.2\etc\Rprofile.site`**每次 R 内核启动时**都会读取。因此，**任何修改都将持续到 R 的每次运行**。
*   `Rprofile.site`通过添加以下内容进行编辑，

`.libPaths(.libPaths()[2]) .libPaths("d:/tmp/R/win-library/3.2")`

**这个怎么运作？**

*   第一行删除除了一个路径（原始列表中的第二个）之外的所有路径，第二行添加了一个附加路径。我们最终有两条路。
*   请注意，尽管使用 Windows，但我使用 Unix 路径表示法。R 始终使用 Unix 表示法，无论操作系统如何
*   重新启动 R（使用`Ctr+Shift+F10`）

现在每次都可以使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-01-31T19:29:02.653

在`.Rprofile`

```
set_lib_paths <- function(lib_vec) {
  lib_vec <- normalizePath(lib_vec, mustWork = TRUE)
  shim_fun <- .libPaths
  shim_env <- new.env(parent = environment(shim_fun))
  shim_env$.Library <- character()
  shim_env$.Library.site <- character()
  environment(shim_fun) <- shim_env
  shim_fun(lib_vec)
}
set_lib_paths("~/code/library") # where "~/code/library" is your package directory 
```

原始来源：[https ://milesmcbain.xyz/hacking-r-library-paths/](https://milesmcbain.xyz/hacking-r-library-paths/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-27T20:12:50.610

我已将`Sys.unsetenv("R_LIBS_USER")`命令`.Rprofile`放在我的 windows`"own documents"`文件夹中的一个文件中。似乎有帮助。`R`我的问题是，当通过 vpn 连接时，处于活动目录环境中的新贵和包加载速度非常慢。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-05T06:40:45.727

如果您想在`RProfile`文件 (@ `library/base/R/`) 中执行此操作，您可以搜索`R_LIBS_*`设置环境变量的行（例如`Sys.setenv(R_LIBS_SITE=....)`和`Sys.setenv(R_LIBS_USER=.....)`）。您还可以搜索`.libPaths()`设置库树的代码。因此，您可以根据需要在调用`R_LIBS`前通过评论、取消设置和设置变量来实现您的目标。`.libPaths()`例如像这样的东西：

```
Sys.unsetenv("R_LIBS")
Sys.unsetenv("R_LIBS_USER")
Sys.setenv(R_LIBS_SITE = "D:/R/libs/site")
Sys.setenv(R_LIBS_USER = "D:/R/libs/user")
Sys.setenv(R_LIBS = "D:/R/libs") 
```

# java - 将 Java Double 格式化为 7 个字符

> ID：15217759
> 
> 赞同：0
> 
> 时间：2013-03-05T07:05:24.060
> 
> 标签：java, format, double

我有很多 Java 双打。为了在 GUI 上正确显示，它们只能是 7 个字符长，包括 -negative sign 和 .period

所以让我们说它就像：

```
12345.7890
1.34567890
-23.567890 
```

我想

```
12345.7
1.34567
-23.567 
```

在极少数情况下，它在小数点前超过 7 个字符，只需保留 1 个小数位。适当舍入的首选。

我并不精通 Java 中的所有字符串/双精度操作来有效地做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:20:36.687

try

```
 double d = -23.5678900;
    int precision = d < 0 ? 5 : 6;
    BigDecimal bd = new BigDecimal(d, new MathContext(precision)); 
```

it also provides rounding. Maybe it makes sense to add a check for overflow

```
 if (d > 9999999 | d < -999999) {
        System.out.println("#######");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:32:12.007

那么标准的方法是使用[DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)

```
Double d = 12345.7890d;

NumberFormat decimalFormat = new DecimalFormat("-#####.##");

System.out.println(decimalFormat.format(d)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T07:25:15.933

如果您只想用于显示目的，请使用此方法...

```
 Double d = -1.151266662625;
    String str = d.toString();
    String result = Str.substring(0,7);

if(result.contains("."){
// it is according to your need
}else{
// iF dot is not present do what ever you want to do. Either again truncte the string upto 5 place and add ".0" in end of the string

} 
```

# c# - 对 URL 字符串中的 QueryString 键进行计数

> ID：15217760
> 
> 赞同：1
> 
> 时间：2013-03-05T07:05:25.733
> 
> 标签：c#

我想计算一个 URL 字符串中出现了多少个查询字符串键。这里的 URL 是一个字符串，所以我不能使用 Request.QueryString.AllKeys 来计算 url 中有多少键。目前，我通过分析 url 字符串的结构并在字符串中使用 count 字符串来计算 url 字符串中的查询字符串键来解决此问题。大家可以看清楚我的代码示例：

```
public int CountQueryStringKey(string urlString)
{
    string urlWithoutKey = urlString.Substring(0, urlString.IndexOf("?"));
    string allKeyString = urlString.Substring(urlString.IndexOf("?") + 1);
    string[] allKeyAndValue = allKeyString.Split('&');
    return allKeyAndValue.Length;
} 
```

这很简单，但还不够。如果 url 的字符串中没有查询字符串键会发生什么，并且总是有不同类型的 url，我不确定它的结构。

我需要一些帮助才能在这个问题上找到一个好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:13:24.363

虽然重复（[从 Uri 获取单个查询参数](https://stackoverflow.com/questions/2884551/get-individual-query-parameters-from-uri)）提供了足够好的答案，但我建议使用[Uri.Query](http://msdn.microsoft.com/en-us/library/system.uri.query.aspx)来提取 URL 的查询部分。然后按照其他问题中的建议继续使用[HttpUtility.ParseQueryString 。](http://msdn.microsoft.com/en-us/library/system.web.httputility.parsequerystring.aspx)比[NameValueCollection.Count](http://msdn.microsoft.com/en-us/library/system.collections.specialized.nameobjectcollectionbase.count.aspx)获取查询参数的数量。

```
var queryParameters = HttpUtility.ParseQueryString(new Uri(urlString).Query);
var numberOfParameter = queryParameters.Count; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:13:58.207

看看这个帖子。这里可以使用HttpUtility从普通字符串中获取查询字符串参数

[HttpUtility](http://dnohr.dk/aspnet/how-to-get-url-querystring-variables-from-a-string-url-with-csharp)

# javascript - 如何在 Chrome 扩展图标顶部设置文本

> ID：15217763
> 
> 赞同：0
> 
> 时间：2013-03-05T07:05:39.037
> 
> 标签：javascript, google-chrome-extension, crx

我需要在图标顶部设置一个文本，但现在下降了。我在 chrome 扩展中使用 setbadgetext 如下

```
chrome.tabs.executeScript(tabId, {code: chrome.browserAction.setBadgeText ( { text: 'hi' } )}, function() {
}); 
```

所以文本 hi 出现在扩展图标的右下角。我希望它在顶部。

请建议。欢迎任何 js hack 或 chrome 添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:09:53.343

您无法调整徽章中文本的位置。

您将需要在适当的位置动态绘制一个图标（画布）并动态设置它。

来自[chrome.browserAction 文档](http://developer.chrome.com/extensions/browserAction.html#type-ImageDataType)：

> 图像数据类型
> 
> ( imagedata ) 图像的像素数据。必须是 ImageData 对象（例如，来自画布元素）。

[来自动态 Chrome 扩展图标](http://smus.com/dynamic-icons-chrome-extensions/)的示例：

```
var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');
// ...draw to the canvas...
var imageData = context.getImageData(0, 0, 19, 19);
chrome.browserAction.setIcon({
  imageData: imageData
}); 
```

另请参阅[使用画布绘制文本](https://developer.mozilla.org/en-US/docs/Drawing_text_using_a_canvas)

# java - Web 服务端点的 URL 标准？

> ID：15217770
> 
> 赞同：3
> 
> 时间：2013-03-05T07:05:59.820
> 
> 标签：java, soap, wsdl

我正在开发一个应用程序来使用在端点公开的 SOAP Web 服务，该服务`http://${host}/sample/gotowork`由`TIBCO`

在我工作过的大多数项目中，WSDL 都可以在`http://url?wsdl`.

**所以我的问题是**

1）它是一个好的标准，不为端点公开暴露的WSDL文件。如果它不是强制性的，那么每当在 Web 服务中推送更改时，您不认为 WSDL 文件会在使用该服务的团队周围手动传递吗？

2) 是否有任何特定的 URL 标准必须遵循，例如 WSDL 文件应该可用`http://url?wsdl`而不是 可用`http://url?web_descriptor_file`？

如果有人可以为我指出上述几点的官方文档，那就太好了。

我在互联网上进行了查找，但在 URL 格式上一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:26:56.990

**问题一：**

IMO，您应该让 WSDL 文件可通过端点下载。这样您就可以避免将其分发到使用它的系统。

**问题2**

至于如何公开 wsdl 文件的 URL 格式。我还没有找到任何官方文档，但是在我从事过的大多数 java webservice 项目（例如 Axis、Spring ws）中，我们将 wsdl 暴露在`http://url?wsdl`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:39:50.580

**问题1：**

WSDL 文件描述您的服务，其基本 URL 与服务的基本 URL 相同。现在来回答你的问题；当有变化时手动传递它。

您可以简单地与利益相关者沟通，通过共享 URL 修改服务，而不是传递文件。传递 URL 比传递文件要容易得多。WSDL url 是清晰描述服务的单一来源。

**问题 2**

AFAIK; 它的基本 url 与服务的基本 url 相同。

# arrays - phpactiverecord 检索记录

> ID：15217771
> 
> 赞同：0
> 
> 时间：2013-03-05T07:06:02.237
> 
> 标签：arrays, object, phpactiverecord

简而言之，我将一个用户 ID 传递给一个函数并尝试获取该用户的所有属性：

`$user = \Sitename\UsrManager::getUserById($user_id);`

然后我`print_r($user)`得到一堆数据：

```
Sitename\User Object ( [model:protected] => User Object ( [errors] => [attributes:ActiveRecord\Model:private] => Array ( [user_id] => 18 [company_name] => ABC Ltd [company_logo] => logo.png [brief] => Sample text [profile] => Some Profile ) [__dirty:ActiveRecord\Model:private] => Array ( ) [__readonly:ActiveRecord\Model:private] => [__relationships:ActiveRecord\Model:private] => Array ( ) [__new_record:ActiveRecord\Model:private] => ) [_password_updated:Sitename\User:private] => [template:protected] => 
```

如果我想获取特定属性，例如**Company Name**，我尝试将公司名称回显为`$user->company_name`，但没有什么可显示的，在我的示例中调用 data(object?) 的正确方法是什么？这就像调用必要数据的旧方法一样`$row['company_name']`。

# java - 需要帮助使用 AND 运算符组合两个正则表达式条件

> ID：15217778
> 
> 赞同：1
> 
> 时间：2013-03-05T07:06:36.673
> 
> 标签：java, regex

我的正则表达式中有两个条件。说，

1.  `(.*text.*)` ---> 它将检查输入字符串中是否包含子字符串“text”。
2.  `(^((?!query).)*$)` ----> 其中会检查输入的字符串是否不包含单词“query” int 呢。

两者对我来说都很好。

但是我想要一个正则表达式来使用运算符之类的东西来检查这两个条件`AND`。

我想要一个正则表达式，它只有在输入字符串包含子字符串“text”并且不包含“query”时才返回 true。

我得到了正则表达式不支持`AND`运算符的信息。因此，我尝试执行以下操作：

```
NOT(NOT(expression 1)|(NOT(expression 2))) 
```

例如：-`(!(.*query.*)|(^((?!text).)*$))`

但即使这对我也不起作用..

任何人都请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:15:55.017

使用非消耗正则表达式。

典型的符号是：

`(?=expr)`

这意味着*匹配 expr*，但之后在原始匹配点继续匹配。

你可以随心所欲地做这些，这将是一个“**和**”。

**语法例如：**

`(?=match this expression)(?=match this too)(?=oh, and this)`

**更新：-**

需要添加`.*`incase`matches()`以便正则表达式匹配整个字符串。

你的正则表达式将是`str.matches("(?=(.*text.*))(?=(^((?!query).)*$)).*")`

# jquery - jQuery 更新后弹出窗口停止工作

> ID：15217779
> 
> 赞同：0
> 
> 时间：2013-03-05T07:06:36.877
> 
> 标签：jquery, popup

我已经使用这个脚本有一段时间了（最初由 Soh Tanaka 编写，但源网站已经消失） - 它会在变暗的页面上弹出一个窗口，并带有一个关闭按钮，可以将其关闭并取消页面显示。在我将 jquery 更新到最新的 1.9.1 以实现一些新东西之前，它运行良好。现在它会弹出窗口，但单击关闭按钮不会再将其删除 - 它只是将背景中的页面分流到顶部，并且似乎在背景中添加了另一层黑暗。

错误控制台消息：**TypeError: 'undefined' is not a function (evalating '$('a.close, #fade').live')**引用脚本的最后一段：//Close Popups..."

任何人都可以帮我解决这个问题吗？对这个很菜鸟，更多的是一个剪切和粘贴的人！谢谢:)

```
<script  type="text/javascript">
    $("document").ready(function() {

        $('a.poplight[href^=#]').click(function() {
        var popID = $(this).attr('rel'); //Get Popup Name
        var popURL = $(this).attr('href'); //Get Popup href to define size

        //Pull Query & Variables from href URL
        var query= popURL.split('?');
        var dim= query[1].split('&');
        var popWidth = dim[0].split('=')[1]; //Gets the first query string value

        //Fade in the Popup and add close button
        $('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('<a href="#" class="close"></a>');

        //Define margin for center alignment (vertical   horizontal) - we add 80px to the height/width to accomodate for the padding  and border width defined in the css
        var popMargTop = ($('#' + popID).height() + 80) / 2;
        var popMargLeft = ($('#' + popID).width() + 80) / 2;

        //Apply Margin to Popup
        $('#' + popID).css({
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        //Fade in Background
        $('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
        $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer - .css({'filter' : 'alpha(opacity=80)'}) is used to fix the IE Bug on fading transparencies 

        return false;
    });

    //Close Popups and Fade Layer
    $('a.close, #fade').live('click', function() { //When clicking on the close or fade layer...
        $('#fade , .popup_block').fadeOut(function() {
            $('#fade, a.close').remove();  //fade them both out
        });
        return false;
    });

        });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:09:58.283

您可以添加[迁移插件](https://github.com/jquery/jquery-migrate/)来解决此问题。

在[jQuery 1.9](http://jquery.com/upgrade-guide/1.9)中删除了很多不推荐使用的方法。[jQuery.live](http://api.jquery.com/live/)是被移除的方法之一，你可以使用[jQuery.on](http://api.jquery.com/on/)作为`live`.

但是，如果您有其他依赖库使用这些已弃用的功能，那么您可以使用 jQuery[迁移插件](https://github.com/jquery/jquery-migrate/)来实现向后兼容性。它将几乎所有已删除的功能添加回 jQuery。

在您的代码中，`live()`事件注册可以更改如下

```
$(document).on('click', 'a.close, #fade', function() { //When clicking on the close or fade layer...
    $('#fade , .popup_block').fadeOut(function() {
        $('#fade, a.close').remove();  //fade them both out
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:08:54.830

`.live`已从 1.9 中删除。您可以替换此语法：

```
$('selector').live('event', function(e) { 
```

和：

```
$(document).on('event', 'selector', function(e) { 
```

# python - 带有分组的正则表达式，如何终止组？

> ID：15217787
> 
> 赞同：0
> 
> 时间：2013-03-05T07:07:04.767
> 
> 标签：python, regex

我需要将以下内容与正则表达式匹配，并希望访问结果组。

**要搜索的字符串：**

```
Products in these categories Nr 24432 in Kitchen ( Bestsellers ) Nr 11 in Home Improvement > Garden Nr 25 in Hobby > Gärtnerei 
```

**预期成绩：**

```
"Kitchen","Home Improvement > Garden", "Hobby > Gärtnerei" 
```

这是我到目前为止想出的正则表达式，但它只匹配第一次出现。有任何想法吗？

```
Nr [0-9]{1,} in ([0-9A-z >&äÄüÜöÖ]{1,}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:33:11.817

不确定您当前如何尝试匹配它们，但这应该可以：

```
text = "Products in these categories Nr 24432 in Kitchen ( Bestsellers ) Nr 11 in Home Improvement > Garden Nr 25 in Hobby > Gärtnerei "
for m in re.finditer(r"Nr [0-9]{1,} in ([0-9A-z >&äÄüÜöÖ]{1,})", text):
  print m.group(1) 
```

[参考](http://docs.python.org/2/library/re.html#examples)。

此外，您的第二场比赛将匹配整个其余的字符串。

我建议将其更改为：

```
Nr [0-9]+ in (.+?)(?=[^0-9A-z >&äÄüÜöÖ]|$| Nr ) 
```

`+`表示相同`{1,}`
`.+?`表示一个或多个通配符（非贪婪）
`?=`表示先行，因此它检查下一个字符是否为无效字符、行尾或`" Nr "`- 下一个匹配的开始。

# css - Facebook“喜欢”不会出现在 Internet Explorer 和 Firefox 中

> ID：15217792
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:07:17.000
> 
> 标签：css, facebook, facebook-like

有时 Facebook 的“点赞”按钮会以 0 像素的高度和重量呈现。这只发生在 Internet Explorer 和 Firefox 中，但在 Chrome 中它可以正常工作并完美呈现。

为什么会这样？有什么具体原因吗？

我正在使用没有任何自定义 CSS 样式的 XFBML 版本。我正在使用 xslt 文件来渲染它

```
<ul class="gateway-share">
  <li>
    <xsl:text disable-output-escaping="yes">&lt;fb:like href="</xsl:text>
    <xsl:value-of select="$FacebookLikeUrl"/>
    <xsl:text disable-output-escaping="yes">" layout="button_count" show_faces="false" width="73"&gt;&lt;/fb:like&gt;</xsl:text>
  </li>

  <li>
    <xsl:text disable-output-escaping="yes">&lt;fb:send href="</xsl:text>
    <xsl:value-of select="$shareUrlWithDomain"/>
    <xsl:text disable-output-escaping="yes">"&gt;&lt;/fb:send&gt;</xsl:text>
  </li>

  <li>
    <xsl:text disable-output-escaping="yes">&lt;a href="https://twitter.com/share" class="twitter-share-button" data-url="</xsl:text><xsl:value-of select="$shareUrlWithDomain"/>"<xsl:text disable-output-escaping="yes">&gt;Tweet&lt;/a&gt;</xsl:text>
  </li>

  <li onclick="PinTracking();" title="Send to Pinterest">
    <a id="lnkpinterest" href="{$PinterestShareUrl}" class="pin-it-button" count-layout="none">
      <img border="0" src="http://assets.pinterest.com/images/PinExt.png"/>
    </a>
  </li>
</ul>

/* css styles for the list */
ul.gateway-share {
  float: left;
  height: auto;
  list-style: none outside none;
  margin: 0 6px 0 10px;
  padding: 0;
  width: auto;
}
ul.gateway-share li {
  border: 0 none;
  float: left;
  margin: 0 10px 0 0;
  padding: 0;
  width: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:04:38.703

查看您的喜欢按钮所在的渲染 html 标记或类

给他们 `min-height`和`min-width`

# c - /proc/interrupts 如何更新？

> ID：15217793
> 
> 赞同：5
> 
> 时间：2013-03-05T07:07:22.060
> 
> 标签：c, linux, linux-kernel, irq

我想知道如何 `/proc/interrupts`保持最新状态？

是只`irq`探测了驱动程序还是包含`irqs`系统中所有可能的驱动程序的列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T10:20:48.323

正如您在内核源代码中看到的，它显示了系统所有可能的 irq。
在[source/fs/proc/interrupts.c:39](https://elixir.bootlin.com/linux/v5.5.6/source/fs/proc/interrupts.c#L39)中，一个序列操作被初始化为返回与系统中存在的中断一样多的元素`/proc/interrupts`。

在[source/kernel/irq/proc.c:479](https://elixir.bootlin.com/linux/v5.5.6/source/kernel/irq/proc.c#L479)中，我们可以看到每个中断的计数器都是通过`kstat_irqs_cpu(irq, cpu)`.
这意味着中断计数信息在不同的计数器中更新，每个 cpu 一个。计数器在读取 proc 文件时求和。这是内核中的常见模式。它可以防止对全局计数器的争用。

有关 per-cpu 变量的更多信息，您可以[在此处](https://lwn.net/Articles/258238/)阅读。更多关于 linux 中断的信息，你可以在[这里找到](https://lwn.net/Articles/255529/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T10:44:22.723

/proc 下的所有文件都是伪文件，这意味着其中不存在实际数据。

当您访问 proc fs 下的任何文件时，将调用与该特定 proc 文件链接的 proc 方法，并且 proc 方法访问某些相关的内核数据结构并动态生成数据，这些数据可以读取和显示。proc 文件中的数据通常用于显示系统的状态信息，或设备驱动程序的状态。

proc fs一般是作为驱动的一部分实现的，在驱动代码中加入proc和seq fs层，不过proc也被内核使用，一般用来显示系统的状态信息。由于没有通用proc 文件之间的层次结构或分类，与较新的 sysfs 文件系统相比，它们很少使用。

要知道信息是如何产生的，你必须研究实现的proc层。`fs/proc/interrupts.c`

本[网站](http://www.crashcourse.ca/wiki/index.php/Proc_interrupts)简要介绍了其中一些方法。

# c# - 如何从数据库中读取图像

> ID：15217794
> 
> 赞同：2
> 
> 时间：2013-03-05T07:07:27.397
> 
> 标签：c#, sql

```
OleDbCommand and = new OleDbCommand();
c.Open();
and.Connection = c;
and.CommandText = "SELECT * FROM MaleShoes WHERE IDhere=ID ";
OleDbDataReader read = and.ExecuteReader();
while (read.Read())
{
    label6.Text = (read[1].ToString());
    textBox1.Text = (read[2].ToString());
    pictureBox1.Image = (read[3].ToString());  
}

c.Close(); 
```

我收到了这个错误：

> 错误 1 ​​无法将类型“字符串”隐式转换为“System.Drawing.Image”

我应该如何解决它？

我的图片在我的数据库中的第三列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:14:02.980

如果您的数据库列包含图像文件的路径，您应该编写：

```
pictureBox1.Image = Image.FromFile((string)read[3]); 
```

如果是图像数据（二进制），你应该写：

```
var bytes = (byte[])read[3];
using(MemoryStream ms = new MemoryStream(bytes))
{
    pictureBox1.Image = Image.FromStream(ms);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T07:13:29.473

希望这能有所帮助（如果您正在存储二进制文件）：

```
pictureBox1.Image = byteArrayToImage((byte[])read[3]); 
```

还有你的方法

```
public Image byteArrayToImage(byte[] byteArrayIn)
{
     MemoryStream ms = new MemoryStream(byteArrayIn);
     Image returnImage = Image.FromStream(ms);
     return returnImage;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T07:27:16.817

你也可以用这个

```
 byte[] imagebyte = (byte[])read[3].ToString();

  MemoryStream ms = new MemoryStream();
  ms.Write(imagebyte, 0, imagebyte.Length);
  Bitmap bmp = new Bitmap(ms);
  pictureBox1.Image = bmp; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:23:28.433

你可以试试这个：

```
MemoryStream ms = new MemoryStream((byte[])read[1]);

pictureBox1.Image = Image.FromStream(ms); 
```

# php - 在joomla 2.5的自定义组件中添加模式以上传图像

> ID：15217796
> 
> 赞同：1
> 
> 时间：2013-03-05T07:07:42.190
> 
> 标签：php, forms, modal-dialog, joomla2.5, image-uploading

我正在尝试构建我的自定义组件，我想在其中从管理员上传图像。对于上传图像，我想使用媒体管理器模式，这应该在我的文本框中返回图像 url。我在 popup-imagemanager.js 中做了以下更改：

```
this.editor = decodeURIComponent(q.get('e_name')); //after this
//I added
this.return_url = decodeURIComponent(q.get('return_url')); 
```

和

```
//window.parent.jInsertEditorText(tag, this.editor);

//removed above line and added the following

if ( this.return_url == 1 ) 
{ 
 window.parent.document.getElementById(this.editor).value=url; 
} 
else 
{ 
 window.parent.jInsertEditorText(tag, this.editor); 
} 
```

我的表格中的代码如下：

```
<input class="text_area" type="text" name="imageurl" id="imageurl" size="50" maxlength="250" value="<?php echo $this->image->image;?>" /> 

 <div class="button2-left"> 
  <div class="image"> 
   <a rel="{handler: 'iframe', size: {x: 570, y: 400}}" href="index.php?      option=com_media&view=images&tmpl=component&e_name=imageurl&return_url=1"
   title="Image" class="modal-button">Select</a> 
  </div> 
</div> 
```

在模式中选择图像后单击插入按钮时，出现错误：
window.parent.document.getElementById(this.editor) is null

我搜索了它，但无法解决它。请告诉我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:50:16.967

如果我正确理解您的问题，您想将媒体管理器使用到您的自定义组件中以进行浏览映像，然后选择图像的一个，则将其显示到您的输入字段。所以你可以通过以下方法来做到这一点：

在您的组件中打开`models->forms-> open the .xml file`并将字段类型添加为要保存图像的**媒体。**

**例如**：*Test.xml*

```
<field id="image"
  name="enter field name"
  type="media"
  label="Select Image"
  description=""
  class="inputbox"
  directory="Enter the image path here" 
/> 
```

就是这样。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-13T19:39:54.850

标记中的类必须是“模态的”。

```
JHTML::_('behavior.modal');

<a rel="{handler: 'iframe', size: {x: 570, y: 400}}" href="index.php?option=com_media&view=images&tmpl=component&e_name=imageurl&return_url=1"
   title="Image" class="modal">Select</a> 
```

# jquery - 如何将类或方法带入不同文件Jquery中的范围

> ID：15217801
> 
> 赞同：0
> 
> 时间：2013-03-05T07:07:57.840
> 
> 标签：jquery

我有以下代码在运行时更改验证类

```
$("#txtNewAttributes").focusout(function () {
        var attributeTextBox = $("#txtNewAttributes").val()
        if ($.trim(attributeTextBox) == "Height")
            $(txtNewValues).removeClass('alphaonly').addClass('numbersonly');
        if ($.trim(attributeTextBox) == "IATA" || $.trim(attributeTextBox) == "IACA")
            $(txtNewValues).removeClass('numbersonly').addClass('alphaonly');
    }); 
```

正如我在萤火虫中看到的，预期的类名会发生变化。但是没有应用**Numberonly**类，并且该函数无法正常工作，因为它超出了 SCope 我认为它在 diff 文件中作为下面的函数

```
function AllowOnlyNumbers() {
    $('.numbersonly').each(function (e) {
        $(this).keydown(function (e) {
            var key = e.charCode || e.keyCode || 0;
            return (key == 8 || key == 9 || key == 46 || (key >= 37 && key <= 40) ||
                     (key >= 48 && key <= 57) || (key >= 96 && key <= 105));
        });
    });
} 
```

如何在 Jquery 的**focusout** Func 中访问上述函数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:13:20.243

如果我理解正确，您首先注册`keydown`处理程序，然后根据输入的值`txtNewAttributes`设置`txtNewValues`. 这确实不起作用，因为`keydown`处理程序只会在您注册时应用于与您的选择器匹配的元素。

要*为现在和将来匹配当前选择器的所有元素附加事件处理程序*，请使用[`jQuery.live()`](http://api.jquery.com/live/).

```
$('.numbersonly').live('keydown', function (e) {
    var key = e.charCode || e.keyCode || 0;
    return (key == 8 || key == 9 || key == 46 || (key >= 37 && key <= 40) ||
           (key >= 48 && key <= 57) || (key >= 96 && key <= 105));
}); 
```

# c++ - C++ 局部变量和线程（不是 thread_local）

> ID：15217807
> 
> 赞同：6
> 
> 时间：2013-03-05T07:08:09.983
> 
> 标签：c++, multithreading, parallel-processing, thread-safety, local-variables

用于本地数组和与线程交互的 C++98 和 C++11 内存模型是什么？

我**不是**指 C++11 **thread_local**关键字，它与全局和静态变量有关。

相反，我想找出在编译时分配的数组的线程保证行为是什么。*编译时我的意思是“int array[100]”，这与使用new[]*关键字的分配不同。我不是指*静态*变量。

例如，假设我有以下结构/类：

```
struct xyz { int array[100]; }; 
```

和以下功能：

```
void fn(int x) {
  xyz dog;
  for(int i=0; i<100; ++i)  { dog.array[i] = x; }
  // do something else with dog.array, eg. call another function with dog as parameter
  } 
```

从多个线程调用*fn()是否安全？*看来C++内存模型是：所有局部非静态变量和数组都分配在栈上，每个线程都有自己的栈。这是真的吗（即这是标准的正式一部分）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T07:10:17.020

这样的变量是在栈上分配的，因为每个线程都有自己的栈，所以使用本地数组是完全安全的。它们与例如 local `int`s 没有什么不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T07:21:23.380

C++98 没有提到线程。用 C++98 编写但使用线程的程序没有 C++98 定义的含义。当然，线程扩展为线程提供稳定的、私有的局部变量是明智的，而且它们通常会这样做。但是可能存在不是这种情况的线程：例如，`vfork`在某些 Unix 系统上创建的进程，父子进程将在同一个堆栈帧中执行，因为`v`in`vfork`意味着不克隆地址空间，并且`vfork`不将新进程重定向到不同的函数。

在 C++11 中，有线程支持。单独 C++11 线程中单独激活链中的局部变量不会干扰。但是，如果您跳出该语言并抽出`vfork`或类似的东西，那么所有赌注都将像以前一样。

但这里有一些东西。C++ 现在有闭包。如果两个线程都调用同一个闭包怎么办？然后你有两个线程共享相同的局部变量。闭包就像一个对象，它捕获的局部变量就像成员。如果两个或多个线程调用同一个闭包，那么你就有一个事实上的多线程对象，其成员（即捕获的词法变量）是共享的。

一个线程也可以简单地将其局部变量的地址传递给另一个线程，从而使它们成为共享的。

# jquery - 隐藏从另一个加载的元素加载的元素

> ID：15217814
> 
> 赞同：0
> 
> 时间：2013-03-05T07:08:51.437
> 
> 标签：jquery

在我的主页中，我有一个“音乐”按钮，它加载了 music.txt

脚本.js

```
$("#music").load("music.txt");
$(document).on('click', '.song',  function (){ 
    var songDetails= $(this).closest('li').attr('id');
    $(this).load(songDetails+'.txt'); 
}); 
```

音乐.txt：

```
<span class="song"> bl </span> 
```

所以**music.txt**加载歌曲列表。并且每首歌曲都被列为`<li>`.

例如，在**hotelcalifornia.txt**中：

```
<div class="details">
Eagles, 4:30, Sony Music
<span class="minimize"> Minimize </span> 
</div> 
```

现在，当我点击时，我会得到歌曲的详细信息。但我不能最小化/消失它。

```
$(document).on('click', '.minimize',  function () { $('.details').hide(); }); 
```

不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:18:25.033

替换这个：

```
$('.details').hide(); 
```

在您发布的当前代码中使用此代码：

```
$(this).parent().hide(); 
```

# eclipse - Changing internal browser of eclipse

> ID：15217816
> 
> 赞同：0
> 
> 时间：2013-03-05T07:08:55.217
> 
> 标签：eclipse, browser, eclipse-plugin, ide

I am developing an jQuery mobile application. As it consists of web pages I want some debugging feature like **FireBug** which is not provided by eclipse internal browser.

I have searched on net but not able to find anything helpful

So If someone gone through this situation Please help me.

Are there any browsers plugin available for eclipse

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:10:26.853

In Window-> Preferences -> General -> Web Browser, there is USe Internal Web Browswer. And you can check "FireFox".![enter image description here](../Images/efa41ed4b43fcb21e49652ef9fb8570e.png)

# ios - 在 IB 中创建的自定义按钮不允许访问自定义方法

> ID：15217823
> 
> 赞同：0
> 
> 时间：2013-03-05T07:09:11.363
> 
> 标签：ios, objective-c, uibutton

我有一个带有多个 ViewController 的 iOS 应用程序。每个视图都有许多 IB 生成的 UIButton，每个都设置为自定义。我需要在正常和突出显示状态下更改背景颜色。此外，我需要根据用户交互将颜色更改为 RGB 值。因此，我不能使用图像文件。

我找到了一个从 UIButton 派生的自定义类的示例，它实现了颜色更改和单击方法以根据需要更改颜色。我创建了一个测试按钮并将其 IB 自定义类更改为我的新类。

我的 IB 创建按钮有一个插座属性。

当我尝试访问我的类中的自定义方法时，我遇到的问题是在 viewcontroller.m 文件中，xcode 看不到这些方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:55:04.820

*   `IBAction`用作该方法的返回类型

*   `.h`在文件中声明该特定方法

# javascript - 用点击事件替换 superfish 悬停事件

> ID：15217824
> 
> 赞同：0
> 
> 时间：2013-03-05T07:09:24.967
> 
> 标签：javascript, jquery, drupal, drupal-7, superfish

我使用了 superfish 模块来增加我网站的风格。它工作正常，但我想从主菜单链接中删除鼠标悬停效果。单击主菜单后，我只想显示子菜单链接。

我的网站链接是[http://devel.studiesweekly.com](http://devel.studiesweekly.com)

当您将鼠标悬停在主红色按钮菜单链接上时，它会立即显示下面的子菜单栏。我只想在单击主菜单后显示。

我怎样才能做到这一点？我用过drupal 7.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:35:28.587

您可以将 superfish 库中的事件从 更改`hover`为`click`。

[用此答案](https://stackoverflow.com/a/7489778/863380)中提供的代码替换您当前的 superfish 库代码。

# android-widget - 如何从 Android Activity 安装 Android 小部件？

> ID：15217828
> 
> 赞同：0
> 
> 时间：2013-03-05T07:09:42.093
> 
> 标签：android-widget

我想从 Android Activity 安装小部件。完成此操作后，该小部件应与其他先前安装的小部件列表一起可用。为此，我创建了一个自定义小部件。但不知道如何从 Activity 安装小部件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:24:28.590

我得到了解决方案。我们不得不提到清单文件中的 Widget 作为接收器。然后它将创建小部件。我们可以通过在主屏幕上长按来使用小部件，然后点击小部件放置在主屏幕上。经过大量搜索，我得到了答案。用法是，

```
<receiver
        android:name="MyWidgetProvider"
        android:icon="@drawable/widic"
        android:label="Example Widget" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_info" />
    </receiver> 
```

# android - Android 中的谷歌地图 API

> ID：15217831
> 
> 赞同：1
> 
> 时间：2013-03-05T07:09:48.183
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在尝试实现一个功能，这样当用户在文本字段中输入地址并单击按钮时，该地址应复制到 Google 地图的目标字段中，并且用户位置应设置为“我的位置”（他现在的位置）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:23:07.583

您可以通过以下方式打开谷歌地图：

```
String CURRENT_LOCATION = "current_location_latitude, current_location_longitude";
String DESTINATION_LOCATION = "address_from_your_text_view";

Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
Uri.parse("http://maps.google.com/maps?saddr="+ CURRENT_LOCATION +" daddr="+DESTINATION_LOCATION));
startActivity(intent); 
```

注意：您应该从 LocationManager 获取设备/用户当前位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:13:38.420

为了在谷歌地图上显示路线，只需调用一个通过当前和目的地纬度和经度的意图。如果不知道经纬度，您也可以在任何情况下传递地址。这样做之后，它的谷歌地图的工作就是显示位置。您还可以显示街景。

在下面的代码中，有三个参数：`current_lat, current_longi, dest_address`

```
 final Intent intent = new Intent(Intent.ACTION_VIEW,
Uri.parse("http://maps.google.com/maps?" 
+ "saddr="+ current_lat+","+current_longi + "&daddr="+dest_address ));

intent.setClassName("com.google.android.apps.maps","com.google.android.maps.MapsActivity");

startActivity(intent); 
```

如果你有当前地址和目标地址，那么你可以这样写：

```
Uri.parse("http://maps.google.com/maps?" 
+ "saddr="+curr_address+ "&daddr="+dest_address )); 
```

如果你有当前和目的地的纬度和经度，那么你可以这样写：

```
Uri.parse("http://maps.google.com/maps?" 
+ "saddr="+ current_lat+","+current_longi + "&daddr="+ destt_lat+","+dest_longi  )); 
```

当你调用这个意图时，谷歌地图会显示选择是通过公共汽车还是步行来绘制路线。

# xcode - 将导航栏按钮连接到 xcode 中的查看控制器？

> ID：15217842
> 
> 赞同：0
> 
> 时间：2013-03-05T07:10:23.923
> 
> 标签：xcode, ios5, uiviewcontroller

我已经制作了选项卡栏应用程序。然后我在一个选项卡视图上放置了一个导航栏 + 栏按钮。然后我在我的故事板上放置了一个单独的视图控制器。现在我想在单击该栏按钮时打开那个单独的视图。我试过了这是通过将按钮连接到带有推送选项的视图控制器来实现的。但它不起作用。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:24:06.330

> 然后我在一个标签视图上放了一个导航栏+栏按钮。

似乎您尝试自己添加 UINavigationBar ，结果（我猜）您在选项卡视图上没有 UINavigationController 。在这种情况下，您的 push segue 将不起作用。只需将 UINavigationController 放在第一个选项卡上。将您的栏按钮放在由 navigationController 拥有的 navigationBar 上。该图像将帮助您理解我所说的。 ![在此处输入图像描述](../Images/54273f68425ac2f0c8246a27a3b13379.png)

# iphone - 将 TextView 添加到 UIAlertView

> ID：15217843
> 
> 赞同：4
> 
> 时间：2013-03-05T07:10:26.510
> 
> 标签：iphone, uialertview

当我在alertview上添加textview时，scollview显示在它的顶部和后面，文本被绘制，如何克服这个问题。这是代码

问题更新：

如果设置 textView.editable = NO; 它工作得很好，但在我的情况下，我需要在 textview 中输入文本。

```
 UITextView *textView = [[UITextView alloc]initWithFrame:CGRectMake(12, 50, 260, 50)];

    [textView setText:@"lashdasjh asdasjdas asdlajsdl adsjajadsd aslj daj sdjasdjasjdlasjd as dlasj d"];

    UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Type Your Message" message:@"\n\n\n\n\n\n" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Send",nil];

    av.alertViewStyle = UIAlertViewStyleDefault;

    [av addSubview:textView];

    [av show]; 
```

![在此处输入图像描述](../Images/8f073c725ee5d88bf5d1c3bdc0284f18.png) ![在此处输入图像描述](../Images/684ecdb1f1060bef8a9435492d53a9f4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:40:05.617

解决了我的自我。删除`@"\n\n\n\n\n\n"`in 消息并添加`@"\n\n\n\n\n\n"`标题

![在此处输入图像描述](../Images/56920b8c2f38d3fa4549bbfc87474398.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T23:43:54.080

这在 IOS7 上不再适用，但使用[https://github.com/wimagguc/ios-custom-alertview](https://github.com/wimagguc/ios-custom-alertview)将帮助您很好地完成它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-10T06:44:13.177

用此代码替换您的代码，它的工作正常。

```
UITextView *textView = [[UITextView alloc]initWithFrame:CGRectMake(12, 50, 260, 100)];

UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Type Your Message" message:@"\n\n\n\n\n" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Send",nil];

av.alertViewStyle = UIAlertViewStyleDefault;

[av addSubview:textView];

[av show]; 
```

# python - 递归访问未知维度的Python字典中的项目

> ID：15217848
> 
> 赞同：0
> 
> 时间：2013-03-05T07:10:54.907
> 
> 标签：python, recursion, dictionary

我正在尝试获取对象列表并根据对象的“键”将它们重新排列到嵌套字典的字典中。每个键以已知模式包含其父字典的键。我遇到的问题是能够访问像......

```
hier_data['1']['Assets']['1.2']['Assets']['1.2.3']['Assets']['1.2.3.4']['Assets'] 
```

...动态地添加到它。有没有办法构建某种递归函数，该函数将根据键遍历字典？例如，如果我需要使用键“1.2.3.4.5”添加对象，有没有办法...

```
hier_data['1']['Assets']['1.2']['Assets']['1.2.3']['Assets']['1.2.3.4']['Assets']['1.2.3.4.5'] = {...} 
```

...动态和递归？

我应该注意，我开始的列表是按键排序的，因此我应该始终拥有当前对象的父级“资产”字典可用于添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:14:55.917

您可以使用递归`defaultdict`：

```
>>> from collections import defaultdict
>>> l = lambda: defaultdict(l)
>>> d = defaultdict(l)
>>> d['123']['4234']['asd']['dsaf'] = 4
>>> d
    defaultdict(<function <lambda> at 0x15f9578>, {'123': defaultdict(<function <lambda> at 0x15f9578>, {'4234': defaultdict(<function <lambda> at 0x15f9578>, {'asd': defaultdict(<function <lambda> at 0x15f9578>, {'dsaf': 4})})})}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:58:08.213

原来我遇到的麻烦比我想象的要简单。我需要做的就是这样的：

```
hier_data = {}
for id in sorted(data.iterkeys()):
  key = id.split('.')
  data[id]['Assets'] = {}
  insert_point = hier_data
  for i in range(len(key)/2-1):
    insert_point = insert_point['.'.join(key[0:2*i+2])]['Assets']
  insert_point[id] = data[id]
return hier_data 
```

我认为从字典中获取键（例如`hier_data[...]`）会在字典中返回对象的副本，而不是指向对象的指针。事实证明，我需要的只是遍历我的分解键，将`insert_point`光标移动到正确的位置以添加到我的对象中。

# gwt - 当我在 netbeans 中运行 GWT 时发生错误

> ID：15217853
> 
> 赞同：0
> 
> 时间：2013-03-05T07:11:12.013
> 
> 标签：gwt, ant, netbeans-7

undeploy-clean:
**C:\Users\ashfaque\Documents\NetBeansProjects\webapp\nbproject\build-impl.xml:1405：问题：**
无法创建任务或键入 nbundeploy 原因：名称未定义。
行动：检查拼写。
行动：检查是否已声明任何自定义任务/类型。
行动：检查任何/声明已经发生。
构建失败（总时间：0 秒）

# javascript - 在百分比堆叠列高图中禁用 legendItemClick 上的百分比堆叠

> ID：15217861
> 
> 赞同：2
> 
> 时间：2013-03-05T07:12:05.153
> 
> 标签：javascript, jquery, highcharts, highstock

我有一个来自 highcharts 的百分比堆积柱形图。在图例项单击时，默认情况下该系列应该隐藏。但是除了隐藏该系列之外，它还通过将另一个系列设为 100% 来重绘图表，理想情况下它不应该影响其他系列的 y 值并使用其原始 y 值而不是 100% 重绘。这里的演示链接：http: [//jsfiddle.net/kanz3/](http://jsfiddle.net/kanz3/)

```
plotOptions: {
    series: {
        events: {
            legendItemClick: function(event) {
            var visibility = this.visible ? 'visible' : 'hidden';     
            //chart.series.stacking='normal'
            }
        },
        stacking: 'percent'
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:49:16.377

一种方法是将您的系列数据重新计算为百分比，然后使用 stacking:stacking. 有点痛苦，但计算每对的百分比应该不会太难。

```
 plotOptions: {
        series: {
            events: {
                legendItemClick: function(event) {
                    //console.log(this);
                    var visibility = this.visible ? 'visible' : 'hidden';
                    //this.stacking= 'normal'
                    //chart.series.yaxis.max = 70;
                 // console.log(chart);
                    //chart.redraw = false;          
                 //chart.series.stacking='normal'
                   // chart.type='line'
                }
            },
            stacking: 'stacked'
        }
    },

    series: [{
        data: [50,50,50,50]        
    },
            {
        data: [50,50,50,50]        
    }] 
```

[http://jsfiddle.net/2bWMC/](http://jsfiddle.net/2bWMC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:24:44.793

您可以通过翻译功能和保留组/系列位置的附加参数来实现它。[http://jsfiddle.net/kanz3/1/](http://jsfiddle.net/kanz3/1/)

```
 plotOptions: {
        series: {
            events: {
                legendItemClick: function (event) {

                    if(!this.options.hidden)
                    {
                        this.options.groupXY.x = this.group.translateX;
                        this.options.groupXY.y = this.group.translateX;
                        this.group.translate(1000,1000);
                        this.options.hidden = true;
                    }
                    else
                    {
                        this.group.translate(this.options.groupXY.x, this.options.groupXY.y);
                         this.options.hidden = false;
                    }

                    return false;

                }
            },
            stacking: 'percent'
        }
    },

    series: [{
        groupXY: {
            hidden:false,
            x: 0,
            y: 0
        },
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }, {
        groupXY: {
            hidden:false,
            x: 0,
            y: 0
        },
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }] 
```

# .htaccess - codeigniter 应用程序适用于 hostgator，但不适用于其他网络主机

> ID：15217862
> 
> 赞同：0
> 
> 时间：2013-03-05T07:12:06.587
> 
> 标签：.htaccess, codeigniter

我有一个在我的 hostgator 托管域上完美运行的 codeigniter 应用程序。

我已配置 .htaccess 和 config.php 以从 URL 中删除 index.php。如前所述，这是 100% 工作的。我现在需要使用 Afrihost 将应用程序从我的 hostgator 服务器移动到南非的本地服务器。

修改后的 htaccess 和配置文件如下所示：

**我的 htaccess 文件是：**

```
RewriteEngine on
RewriteBase /

# Prevent CI index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 

# Prevent user access to the CI system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L] 

# Prevent user access to the CI application folder
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

我的 config.php 文件是：

```
$config['base_url'] = 'http://logicoportal.co.za';
$config['index_page'] = '';
// let me know if you need to see any other setting 
```

当我尝试浏览域[http://www.logicoportal.co.za](http://www.logicoportal.co.za)时出现错误`This page can't be displayed`。

如果我浏览到我的 ion auth 控制器， http: [//logicoportal.co.za/auth/login](http://logicoportal.co.za/auth/login)我得到 404 error `The webpage cannot be found`。

如果我浏览到完整的 codeigniter 默认路径[http://logicoportal.co.za/index.php/auth/login](http://logicoportal.co.za/index.php/auth/login)我会收到错误`This page can't be displayed`

我假设这是一个 htaccess 配置错误，但我不知道如何纠正这个问题。读了很多没有运气的文章。或者，codeigniter 中是否有另一个配置设置来支持这一点？

我已经与新的托管公司 Afrihost 进行了交谈，他们说在这方面他们无能为力。

任何建议/方向将不胜感激。

一如既往地感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T06:48:03.600

工作解决方案：在共享托管服务器上删除 index.php 的 htaccess 文件

```
DirectoryIndex index.php
RewriteEngine on

RewriteCond %{REQUEST_URI} !^(index\.php|\.swf|forums|images|css|downloads|js|robots\.txt|favicon\.ico)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) ./index.php [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:58:44.377

尝试删除`?`in：

```
RewriteRule ^(.*)$ /index.php?/$1 
```

所以这是：

```
RewriteRule ^(.*)$ /index.php/$1 
```

# php - 我正在使用转换命令将 PDF 提取为 png，并希望根据 PDF 名称将提取的图像存储到动态创建的文件夹中

> ID：15217868
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:12:28.930
> 
> 标签：php, cakephp, imagemagick, imagemagick-convert

```
 $ha=opendir($LOCAL_SERVER_DIR);

  while (($filelocal = readdir($ha))!==false)             
  {                             

   if(!is_dir($filelocal))  
   {  
     $fa[]=$filelocal;                                                          

   }
   sort($fa);
  }

  for($i=0;$i<sizeOf($fa);$i++)
  {    
       $pdfname=substr($fa[$i], 0, strpos($fa[$i], '.pdf')); 

       exec("convert -scale  1500x1000".$fa[$i]."D:/Images/ExtractFromFTP/img%d_".$pdfname.".png");

  } 
```

在我的代码中，我正在提取多个 PDF，将所有提取的图像存储到`D:/Images/ExtractFromFTP/`以下路径中。所以很难根据它的pdf名称对图像进行排序。这就是为什么我想根据它们的pdf名称将提取的图像存储到不同的不同文件夹中（所以这意味着我需要在运行时创建文件夹）但我找不到安排顺序的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:54:04.970

我不明白你的问题是什么。你有没有试过用谷歌搜索你模糊的问题？

> [如何创建文件](http://www.youtube.com/watch?v=ssNdkdDaFXI)
> 
> [链接编号 2](http://www.hotscripts.com/forums/php/25915-solved-check-if-directory-exists-if-not-create.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:03:07.833

您可以使用 mkdir 创建目录

```
$pdfname=substr($fa[$i], 0, strpos($fa[$i], '.pdf')); 
//you can also do this: 
$pdfname =  substr($fa[$i],0,-4); //this will cut off last for chars, eg '.pdf';

$dirname = "D:/Images/ExtractFromFTP/" . $pdfname;
if (mkdir($dirname)) {
    exec("convert -scale  1500x1000 " . escapeshellarg($fa[$i]) . escapeshellarg("D:/Images/ExtractFromFTP/${dirname}/img%d_".$pdfname.".png"));
} else {
     echo 'Could not create dir!';
} 
```

所以，你唯一需要做的就是 mkdir($directory); 但是，请注意为转义 pdf 名称和目标 png 名称而调用的 escapeshellarg 函数。这需要确保带有空格的文件名被视为一个参数而不是两个参数，并在名称无效时保护自己。

# model-checking - 使用 Spin 和 Promela 语法检查 LTL 模型

> ID：15217870
> 
> 赞同：5
> 
> 时间：2013-03-05T01:55:12.513
> 
> 标签：model-checking, spin, promela

我正在尝试重现 Dijkstra 在题为“协作顺序进程”的论文中编写的 ALGOL 60 代码，该代码是解决互斥锁问题的第一次尝试，语法如下：

```
begin integer turn; turn:= 1;
      parbegin
      process 1: begin Ll: if turn = 2 then goto Ll;
                           critical section 1;
                           turn:= 2;
                           remainder of cycle 1; goto L1
                 end;
      process 2: begin L2: if turn = 1 then goto L2;
                           critical section 2;
                           turn:= 1;
                           remainder of cycle 2; goto L2
                  end
      parend
end 
```

所以我试图在 Promela 中重现上面的代码，这是我的代码：

```
#define true    1
#define Aturn true
#define Bturn false

bool turn, status;

active proctype A()
{   
    L1: (turn == 1); 
    status = Aturn;
    goto L1;
    /* critical section */
    turn = 1;

}

active proctype B()
{   
    L2: (turn == 2); 
    status = Bturn;
    goto L2;
    /* critical section */
    turn = 2;
}

never{ /* ![]p */ 
    if
    :: (!status) -> skip
    fi;
}

init
{   turn = 1;
    run A(); run B();
} 
```

我要做的是，验证公平属性永远不会成立，因为标签 L1 无限运行。

这里的问题是我的 never claim 块没有产生任何错误，我得到的输出只是说我的语句从未到达..

这是 iSpin 的实际输出

```
spin -a  dekker.pml
gcc -DMEMLIM=1024 -O2 -DXUSAFE -DSAFETY -DNOCLAIM -w -o pan pan.c
./pan -m10000 
Pid: 46025

(Spin Version 6.2.3 -- 24 October 2012)
    + Partial Order Reduction

Full statespace search for:
    never claim             - (not selected)
    assertion violations    +
    cycle checks        - (disabled by -DSAFETY)
    invalid end states  +

State-vector 44 byte, depth reached 8, errors: 0
       11 states, stored
        9 states, matched
       20 transitions (= stored+matched)
        0 atomic steps
hash conflicts:         0 (resolved)

Stats on memory usage (in Megabytes):
    0.001   equivalent memory usage for states (stored*(State-vector + overhead))
    0.291   actual memory usage for states
  128.000   memory used for hash table (-w24)
    0.534   memory used for DFS stack (-m10000)
  128.730   total actual memory usage

unreached in proctype A
    dekker.pml:13, state 4, "turn = 1"
    dekker.pml:15, state 5, "-end-"
    (2 of 5 states)
unreached in proctype B
    dekker.pml:20, state 2, "status = 0"
    dekker.pml:23, state 4, "turn = 2"
    dekker.pml:24, state 5, "-end-"
    (3 of 5 states)
unreached in claim never_0
    dekker.pml:30, state 5, "-end-"
    (1 of 5 states)
unreached in init
    (0 of 4 states)

pan: elapsed time 0 seconds
No errors found -- did you verify all claims? 
```

我已经阅读了有关`never{..}`块旋转的所有文档，但找不到我的答案（这里是[链接](http://www.cse.msu.edu/~cse470/PromelaManual/never.html)），我也尝试过使用`ltl{..}`块（[链接](http://spinroot.com/spin/Man/ltl.html)）但这只是给了我语法错误，即使它明确在文档中提到它可以在`init`and之外`proctypes`，有人可以帮我更正这段代码吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:38:01.740

您重新定义了“真实”，这不可能是好的。我取消了重新定义，并且从未声明失败。但是，失败对您的目标无关紧要——“状态”的初始状态是“错误”，因此永不声明退出，这是一个失败。

此外，将 1 或 0 分配给 bool 是一种稍微不好的形式；改为分配 true 或 false - 或使用位。为什么不更密切地遵循 Dijkstra 代码 - 使用“int”或“byte”。在这个问题中，性能并不是一个问题。

如果您要调用“运行”，则不需要“活动” - 只需一个或另一个。

我对“流程 1”的翻译是：

```
proctype A ()
{
L1: turn !=2 ->
  /* critical section */
  status = Aturn;
  turn = 2
  /* remainder of cycle 1 */
  goto L1;
} 
```

但我可能是错的。

# drupal - 如何在与drupal结合使用的第三方电子商务网站中识别谷歌分析中的流量来源？

> ID：15217873
> 
> 赞同：0
> 
> 时间：2013-03-05T07:13:06.417
> 
> 标签：drupal, google-analytics

我在 Drupal 站点中安装了 Google Analytics 模块。这会跟踪任何自然的流量来源（来自谷歌搜索）。但是，我们正在使用第三方电子商务平台来处理预订信息。这会跟踪交易但不跟踪流量来源——如果原始网站有自然或付费流量来源，第三方网站只会认为流量是来自原始网站的引荐。

这是原始网站中的 GA 代码 - callawaygardens.com

```
var _gaq = _gaq || [];_
gaq.push(["_setAccount", "UA-1162555-1"]);_
gaq.push(["_setDomainName", "none"]);
_gaq.push(["_setAllowLinker", true]);
_gaq.push(['_setDomainName', 'callawaygardens.com']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(["_trackPageview"]);

(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;
ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})(); 
```

这是第三方预订网站中的代码：var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-1162555-1']); _gaq.push(['_setDomainName', '.synxis.com']); _gaq.push(['_setAllowLinker', true]); _gaq.push(['_trackPageview', '确认']); _gaq.push(['_addTrans', '18174SB007366', // 订单 ID - 需要 'Callaway Gardens Resort', // 附属机构或商店名称 '119.00', // 总计 - 需要 '15.47', // 税 '', // shipping 'New York', // 城市 'NY', // 州或省 'US' // country ]);

```
 // add item might be called for every item in the shopping cart
   // where your ecommerce engine loops through each item in the cart and
   // prints out _addItem for each
  _gaq.push(['_addItem',
    '18174SB007366',                     // order ID - required
    'IMND - BA12',      // SKU/code - required
    'Mountain Creek Inn Double ',                      // product name
    'Best Available Rate',                      // category or variation
    '119.00',                     // unit price - required
    '1'                  // quantity - required
  ]);
  _gaq.push(['_trackTrans']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:46:32.093

由于您没有提及它们，您可能忘记使用 _link 或 _linkByPost 函数。仅仅允许 GA 代码中的链接是不够的，您必须明确地将 cookie 数据发送到其他域。

文档在这里： [https ://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._linkByPost](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._linkByPost)

**更新添加：**

至于 Drupal 模块——我已经有一段时间没有使用 Drupal，所以我不确定。但从代码来看，_link 方法（适用于指向其他域的链接）似乎是自动附加的，而 _linkByPost-Data（适用于表单）根本没有实现。因此，如果您通过表单将访问者发送到其他域，这将不起作用。

其他想法：您的网站和其他域之间可能存在重定向？在这种情况下，您必须确保重定向不会丢失通过链接器方法添加的数据。

# oracle - oracle空间sdo_nn函数的问题

> ID：15217881
> 
> 赞同：1
> 
> 时间：2013-03-05T07:13:36.570
> 
> 标签：oracle, spatial

```
SELECT P.ID, P.LOC,P.GEOM.GET_WKT() WKT FROM MY_TEST P;

id     loc          wkt
----------------------------------------------
1   thalassery  POINT (75.489292 11.753003)
2   pilakool    POINT (75.495129 11.743255)
3   gopalapet   POINT (75.502338 11.736532)
4   mahe        POINT (75.536327 11.700562)
5   vadakara    POINT (75.598297 11.621928)
6   kannur      POINT (75.38475 11.873712)

 SELECT
     C.LOC loc1, 
     D.LOC loc2,
     SDO_GEOM.SDO_DISTANCE(C.GEOM, D.GEOM, .005,'unit=km') AS SDO_DISTANCE
FROM MY_TEST C,
     MY_TEST D
ORDER BY 1, 2;  --which results 18.7476695068002 as the distance between id 1 and id 5 
```

![在此处输入图像描述](../Images/d54800d5165593e680ba15472340493a.png)

但是我在使用 sdo_nn 函数时得到了不同的输出：

```
SELECT 
     C.LOC,
     D.LOC,
     SDO_NN_DISTANCE(1) AS SDO_NN_DISTANCE
FROM MY_TEST C,
     MY_TEST D
WHERE 
 sdo_nn(c.geom, d.geom,1)='TRUE'-- getting only 0 result sets on using 'UNIT=KM' parameter.
ORDER BY 1,2; 
```

![在此处输入图像描述](../Images/3cf186fbf9a9f135e6c35090e861a792.png)

谢谢你的帮助：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-13T11:40:28.390

您必须指定单位“UNIT=KM”：

```
SELECT 
     C.LOC,
     D.LOC,
     SDO_NN_DISTANCE(1) AS SDO_NN_DISTANCE
FROM MY_TEST C,
     MY_TEST D
WHERE 
 sdo_nn(c.geom, d.geom,'UNIT=KM',1)='TRUE'
ORDER BY 1,2; 
```

# django - Django 和 Oracle 嵌套表支持

> ID：15217883
> 
> 赞同：2
> 
> 时间：2013-03-05T07:13:40.063
> 
> 标签：django, oracle, nested

Django 能否以某种方式支持 Oracle 嵌套表或可变数组或集合？只要求完整性，因为我们的项目正在重新设计数据模型，试图摆脱 EAV 组织，但我不喜欢为每个主要实体创建大量依赖支持表的桶负载。

例如（不是正确的 Oracle 语法，但可以理解）

事件
  eventid
  report_id
  result_tuple (result_type_id, result_value)
  anomaly_tuple(anomaly_type_id, anomaly_value) compatible_factors_tuple(
  cf_type_id, cf_value)
  等，

其中可以是一个 eventid 的多行元组

当然，这些元组中的每一个都可以作为单独的表存在，但这似乎更简洁。如果这是 Django 不能做的事情，或者我不能修改模型类来轻松完成，那么也许让 django 创建额外的表是可行的方法。

- 编辑 -

我注意到[django-hstore](https://github.com/jordanm/django-hstore)正在做一些与我想做的非常相似的事情，但是使用了 postgresql 的 hstore 功能。也许我可以将其分支用于 Oracle 嵌套表实现。我不知道...我对 python 和 django 很陌生，所以在这种情况下，我的范围可能超出我的掌握。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-04T02:26:47.673

查询嵌套表为您提供了一个游标来遍历元组，其中一个成员是另一个游标，因此您可以从嵌套表中获取行。

# jsf-2 - jsf 2.2 使用 EL 而不是 javascript 启用禁用按钮

> ID：15217885
> 
> 赞同：0
> 
> 时间：2013-03-05T07:13:45.307
> 
> 标签：jsf-2, jsf-2.2

是否可以使用 EL 启用/禁用按钮？我想使用提交按钮来切换（启用/禁用）登录按钮。complex.process 方法被调用。

此外，进度条并没有真正显示任何有意义的指示，尽管我看到填写姓名、电话、通过电子邮件将其发布到服务器。

我在 win 7 上使用 firefox 19、jsf 2.2m09、tomcat 7.0.35。

片段：

```
<form>
...
<input jsf:id="submit" type="submit" value="submit">
  <f:ajax execute="@this" render="status" event="click" listener="#{complex.process}" />
</input>            
<label jsf:id="status">#{complex.status}</label>
<button jsf:id="login" disabled="#{complex.status}">Login</button>
</form> 
```

完整的代码如下所示，它显示了正确的数据正在呈现但按钮保持禁用状态。

小面：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:jsf="http://java.sun.com/jsf" 
     xmlns:f="http://java.sun.com/jsf/core">
    <head jsf:id="head">
        <title>Putting it all together </title>
        <!-- script jsf:target="body" jsf:name="js.js"/>
        <link jsf:name="css.css" rel="stylesheet" type="text/css" /-->
    </head>
    <body jsf:id="body">
        <form jsf:id="form" jsf:prependId="false">
            <label jsf:for="name">Name </label>
            <input jsf:id="name" type="text" jsf:value="#{complex.name}">
                <f:ajax execute="@this" render="progress"/>
            </input>
            <label jsf:for="tel">Tel </label>
            <input jsf:id="tel" type="tel" jsf:value="#{complex.tel}">
                <f:ajax execute="@this" render="progress"/>
            </input>

            <label jsf:for="email">Email </label>
            <input jsf:id="email" type="email" jsf:value="#{complex.email}">
                <f:ajax execute="@this" render="progress"/>
            </input>

            <label for="progress">Progress </label>
            <progress jsf:id="progress" max="3">#{complex.progress} of 3 </progress>

            <input jsf:id="submit" type="submit" value="submit">
                <f:ajax execute="@this" render="status" event="click" listener="#{complex.process}" />
            </input>

            <label jsf:id="status">#{complex.status}</label>
            <button jsf:id="login" disabled="#{complex.status}">Login</button>
        </form>
    </body>
</html> 
```

托管豆：

```
package com.myco.bean;

import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.AjaxBehaviorEvent;

@ManagedBean
@SessionScoped
public class Complex implements Serializable {
    public Complex() {}

    private String name;
    private String tel;
    private String email;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getTel() {
        return tel;
    }
    public void setTel(String tel) {
        this.tel = tel;
    }
    public String getEmail() {
        return email;
    }
    public void setEmail(String email) {
        this.email = email;
    }
    private String status = "disabled";

    public void process(AjaxBehaviorEvent event) {
        System.out.println("listener process called");
        boolean s = false;
        status = (status == "disabled" ? "" : "disabled");
        if(status == "") s = false; else s = true; 
        //FacesContext.getCurrentInstance().getViewRoot().findComponent("form").findComponent("login").getAttributes().put("disabled", s);
    }

    public String isStatus() {
        return status;
    }

    public String getStatus() {
        System.out.println("getStatus:" + status);
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

    public String getProgress() {
        int progress = 0;
        if(name != null) {
            progress++;
        }
        if(tel != null) {
            progress++;
        }
        if(email != null) {
            progress++;
        }
        return progress + "";
    }

} 
```

一些tomcat日志输出：

```
START PHASE RESTORE_VIEW 1
END PHASE RESTORE_VIEW 1
START PHASE APPLY_REQUEST_VALUES 2
END PHASE APPLY_REQUEST_VALUES 2
START PHASE PROCESS_VALIDATIONS 3
END PHASE PROCESS_VALIDATIONS 3
START PHASE UPDATE_MODEL_VALUES 4
END PHASE UPDATE_MODEL_VALUES 4
START PHASE INVOKE_APPLICATION 5
listener process called
END PHASE INVOKE_APPLICATION 5
START PHASE RENDER_RESPONSE 6
getStatus:disabled
END PHASE RENDER_RESPONSE 6 
```

# node.js - 在 OpenShift NodeJS 模板上找不到 EJS 模块

> ID：15217886
> 
> 赞同：2
> 
> 时间：2013-03-05T07:13:49.033
> 
> 标签：node.js, ejs, openshift

我无法在 NodeJS 上使用 EJS 作为我的视图渲染引擎。

我发现了几个类似的问题，但都说明了安装真正适用于其他人的 EJS。这对我来说不一样，可能是因为我无法为安装选择正确的目录（在 OpenShift 存储库中的许多重复项中）。

我有 OpenShift 模板创建的 NodeJS 默认应用程序。在安装 EJS 依赖项时，我以某种方式搞砸了它，我收到以下错误（不可用模块的标准 NodeJS 错误）：

```
错误：找不到模块“ejs”
    在 Function._resolveFilename (module.js:337:11)
    在 Function._load (module.js:279:25)
    在 Module.require (module.js:359:17)
    在需要（module.js:375:17）
    在 View.templateEngine (/usr/lib/node_modules/express/lib/view/view.js:134:38)
    在 Function.compile (/usr/lib/node_modules/express/lib/view.js:68:17)
    在 ServerResponse._render (/usr/lib/node_modules/express/lib/view.js:417:18)
    在 ServerResponse.render (/usr/lib/node_modules/express/lib/view.js:318:17)
    在 /var/lib/openshift/5123c2494382ec16ca000222/app-root/runtime/repo/server.js:114:17
    在回调（/usr/lib/node_modules/express/lib/router/index.js:272:11）

```

除了在 package.json 中提到之外，我还尝试通过终端在 app-root、runtime 和 nodejs-0.6 级别安装 ejs（并重新启动应用程序），但没有用。

我的目录结构是：

```
-应用程序根
- -数据
---回购
-----node_modules（有ejs）
-----server.js
-----package.json ("依赖": {"ejs" : ">=0.8.3"},)
-----观看次数
--------defaultError.ejs
- -运行
-  - -数据
-----node_modules（空）
-----repo（与 app-root/repo 相同）
-------node_modules（有ejs）
-nodejs-0.6
- -数据
---repo（与 app-root/repo 相同）
-----node_modules（有ejs）
- -运行
-----node_modules（空）
-----回购（相同）
-------node_modules（有ejs）

```

defaultError.ejs 只是普通的 html。server.js 有以下内容：

 `````
self.createRoutes = function() {
        self.routes = { };

        //...
        self.routes['/'] = function(req, res) {
            res.setHeader('Content-Type', 'text/html');
            res.send(self.cache_get('index.html') );
        };

        self.routes['/helloejs'] = function(req, res){
            res.render('defaultError', { layout:false } );
        };
    };

self.initializeServer = function() {
        self.createRoutes();
        self.app = express.createServer();

        self.app.set('view engine', 'ejs');
        //  Add handlers for the app (from the routes).
        for (var r in self.routes) {
            self.app.get(r, self.routes[r]);
        }
    }; 
````  `希望这篇长篇文章能让我的问题清楚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:07:58.233

该错误是由于使用了不正确的目录。您必须从项目目录安装软件包并运行您的应用程序。这是我用作项目的文件夹的目录结构。

```
.
├── app.js
├── node_modules
│   ├── express
│   ├── jade
│   └── socket.io
├── package.json
├── public
│   ├── images
│   ├── javascripts
│   └── stylesheets
├── routes
│   ├── index.js
├── server.js
└── views
    └── layout.jade 
```

`npm install`从此文件夹中使用会在 node_modules 子文件夹中添加包文件夹（如`express`, `socket.io`）。您应该`node`从该位置使用，因为所有本地安装的模块仅在该文件夹中可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T18:32:00.473

我的情况是，我只是在**package.json**中手动添加了 ejs ：

```
 {
   "name": "myApp"
   "dependencies": {
     "express": "^4.12.2",
     "ejs": "^1.0.0"
   }
 } 
```

并运行**npm install**（可能你需要用**sudo**运行它）请注意，默认情况下 ejs 看起来是视图目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-16T16:13:25.420

安装 ejs 时必须使用选项 --save：

```
npm install ejs --save 
```

并创建 .gitignore 文件：

```
node_modules 
`````

# android - 您如何配置 IBM Worklight Studio 以构建 ARM 和 MIPS 设备？

> ID：15217887
> 
> 赞同：1
> 
> 时间：2013-03-05T07:13:48.093
> 
> 标签：android, arm, mips, ibm-mobilefirst, abi

我正在使用适用于 Eclipse IDE Juno JAVA EE 的 Worklight Studio Developer Edition 插件来测试构建混合应用程序，并且我正在尝试构建并部署到基于 Android MIPS 的设备。ARM 设备和仿真器工作正常，但无法安装 MIPS 设备。

我从控制台和 logcat 收到以下错误。

[2013-03-05 00:27:36 - Project1App1Android] 由于 APK 文件无效，安装失败！[2013-03-05 00:27:36 - Project1App1Android] 请检查 logcat 输出以获取更多详细信息。[2013-03-05 00:27:36 - Project1App1Android] 发布取消！

03-05 00:28:18.607：W/PackageManager(90)：包文件中的本机 ABI 不匹配

我认为问题在于构建不包括对旧设备 SDK 的 MIPS 支持，例如我遇到问题的设备上的 Froyo 2.2.1。如何配置 Worklight 以针对 ARM 和旧版 MIPS 构建？我还安装了用于 PhoneGap 的 MDS Eclipse 插件，它可以毫无问题地构建和部署到同一个 MIPS 设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:57:19.463

Android 应用程序是在 Android 开发工具的帮助下构建和运行的。Android SDK 第 21 版中包含对所有处理器架构的统一支持。您可以在此处阅读公告：[官方 Android SDK](http://developer.mips.com/2012/11/01/official-android-sdk-now-with-full-mips-support/)，[安装说明](http://developer.mips.com/android/download-android-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:52:14.727

这超出了 Worklight 范围。您应该打开 Android SDK 管理器，并确保安装 Google 提供的与 MIPS 和/或 ARM 相关的任何支持。

生成的 .apk 是通过 Google 的 Android 开发者工具生成的。

# java - 按下下一个按钮时显示数据库中的下一行详细信息

> ID：15217888
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:13:54.900
> 
> 标签：java, database

我正在一个名为员工考勤管理系统的项目中工作。为此，我创建了一个 java 表单。该表单包含员工 ID、员工姓名字段、下一步按钮。如果我按下下一个按钮，则必须在上述两个字段中显示下一个员工详细信息。为此，我使用了 for 循环，出现的问题是它正在显示数据库中的最后一个员工详细信息。我的代码是：

```
 int i=1;
           try {
           ResultSet rs;
           Connection con;
           Statement st;

          Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
          con = DriverManager.getConnection("jdbc:odbc:vasu");
           st = con.createStatement();
           for(i=1;i<=5;++i){
        rs = st.executeQuery("select ID,EName from attendence where ID="+(i));
        while(rs.next()) {
          t1.setText(rs.getString("ID"));
          t2.setText(rs.getString("EName"));
          } 
        }
      }

     catch (Exception e) {

    } 
```

对不起我糟糕的英语。任何人都可以帮助我.. 提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:17:47.547

每次调用循环时`t1`，这些值都会被覆盖。`t2`这就是显示最后一个记录值的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:22:04.560

这个循环有问题

```
while(rs.next()) {
          t1.setText(rs.getString("ID"));
          t2.setText(rs.getString("EName"));
          } 
```

您需要将数据库中的值存储在一个数组中，然后使用您的 (prev,next) 按钮对其进行迭代，例如

```
i=0;
while(rs.next()) {
          dataset["id"][i]=(rs.getString("ID");
          dataset["EName"][i]=rs.getString("EName");
   i++
          } 
```

要显示信息，您可以使用数据集数组，例如

```
 t1.setText(dataset["id"][i]); 
```

我没有检查语法，但逻辑是正确的。

# iphone - Info.plist Upload 中的 CFBundleVersion 显示错误

> ID：15217891
> 
> 赞同：1
> 
> 时间：2013-03-05T07:13:59.707
> 
> 标签：iphone, ios, xcode, ipad, info.plist

我开发了 iPhone 应用程序，

几天前我在商店成功上传了我的应用程序的第一个版本，然后我在我的应用程序中进行了更改，现在我想上传我的应用程序的第二个版本，我使用 制作了第一个版本的应用程序`Bundle version 1.0`，并且在我更新的应用程序中我更改了我的`Bundle version to 2.0`.

最后，当我尝试从**Xcode 验证我的应用程序时 - 组织者**它向我显示了这个错误..

![](../Images/5afae347722ebe3c4ea916ca746f8ca0.png) 这是我的`appName-info.plist`文件的截图

![](../Images/cb46c3d51c1d1f190b34bf85dcce388e.png) ***请帮忙，我是iOS新手..***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:27:06.003

在 info plist 中再添加一行“捆绑版本”。并设置在这里 2.0

# apache - .htaccess - 重定向到页面/目录，而所有页面/目录在内部被解析为查询字符串参数

> ID：15217894
> 
> 赞同：1
> 
> 时间：2013-03-05T07:14:07.143
> 
> 标签：apache, .htaccess, mod-rewrite, apache2, query-string

**设想：**

我有一个处理大量重写的 .htaccess 文件（我知道它在 PHP 中可能/更容易）

一切正常都 `/some/fake/dir/foobar`在内部重写为

`/index.php?some=fake&dir=foobar`

并且任何包含查询字符串的 url 都被剥离了

所以我想为任何不符合声明条件的 IP 创建一个“即将推出的页面”或“维护中的页面”

**我尝试过的示例：**

我尝试了这样的事情，以及其他一些变化。

```
# IF not from DEV address
RewriteCond %{REMOTE_ADDR} !^123\.123\.123\.123$
# AND not for comingsoon page or other assets
RewriteCond %{THE_REQUEST} !\?comingsoon [OR]
RewriteCond %{REQUEST_URI} !^/comingsoon
# THEN send them to comingsoon page
RewriteRule ^ /comingsoon [R,L] 
```

我已经在 .htaccess 文件的所有潜在区域进行了尝试以满足条件。

似乎问题在于获得重定向循环。apache 日志显示它请求`/comingsoon`页面然后重定向到根目录`/`。我假设是因为 to 的内部`/foo/bar`转换`/?foo=bar`。但我似乎不知道如何弄清楚`/`重定向到“幽灵”页面的位置`/comingsoon`

**下面是.htaccess文件的布局：（**为了节省时间理解问题省略了代码）

```
Options -Indexes
RewriteEngine on 

RewriteBase /

# Forced https (should not effect the problem)
[...]
# To externally redirect /dir/index.php to /dir/
[...]
# To externally redirect /dir/foo.php to /dir/foo
[...]
# To internally redirect /dir/foo to /dir/foo.php
[...]
# Prevent Rewrite on existing directories, files, and links
[...]
# Remove query string
[...]
# To internally rewrite directories as query string
[...]
# Custom error documents 
```

如果需要完整的 .htaccess 来解决，请发表评论。谢谢！

**/编辑：**

请注意，我已经让它与“真实”文件一起正常工作，因为我的脚本可以防止对请求的现有文件进行重写。这不是我正在寻找的解决方案。我的主索引文件根据 request_uri 通过查询字符串重写的内容来提供动态内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:37:35.683

好吧，我想我解决了。必须检查隐藏查询字符串的 %{THE_REQUEST} HEADERS`?comingsoon`

如果有人也遇到此问题，您可以查看我添加的文件或目录的白名单 :)

```
# IF not from DEV address
RewriteCond %{REMOTE_ADDR} !^127\.0\.5\.1$
# AND not for comingsoon page or other assets
RewriteCond %{THE_REQUEST} !^GET\s(?:/\?comingsoon|/comingsoon|/assets/|/favicon\.ico|/google[A-Za-z0-9]+\.html) [NC]
# THEN send them to comingsoon page
RewriteRule ^ /comingsoon [R,L] 
```

# php - 使用不带分享按钮的图形 api 在 facebook 页面墙上发布视频

> ID：15217900
> 
> 赞同：2
> 
> 时间：2013-03-05T07:14:34.570
> 
> 标签：php, facebook, api, facebook-graph-api

我之前尝试使用没有共享按钮或链接的 Graph API 在 Facebook 页面上发布视频

**旧代码：**

```
$data   =   array(
    'name'         =>   'name',
    'caption'      =>   'caption,
    'link'         =>   'http://link.com',
    'description'  =>   'description,
    'picture'   =>  '[picture url]',
    'source'    =>  '[video source]'                    
);

$result = $facebook->api('https://graph.facebook.com/[page_id]/feed?access_token=[page access token]',$data); 
```

上述出版物之前被视为包含视频的帖子，但现在它只是被视为链接，源视频不会在其中播放。同样，我们也有“分享”链接。

目前我要求将出版物视为视频+无共享链接。

我无法给出空的“动作”，而如果我给出“动作”，则帖子会内联播放视频。

我想知道，如何在没有分享按钮的页面墙上发布视频？

# javascript - 红圈的点击事件在IE8中被调用了两次

> ID：15217901
> 
> 赞同：0
> 
> 时间：2013-03-05T07:14:35.070
> 
> 标签：javascript, jquery, internet-explorer-8, raphael, vml

当我点击红色圆圈时，窗口会弹出一次警报。它在 Firefox 和 chrome 中运行良好，但在 ie8 中，它会弹出两次警报。我该如何解决？请在下面查看我的代码：

```
Raphael("world", 1000, 400, function () {
        var r = this;
        r.rect(0, 0, 1000, 400, 0).attr({
                stroke: "none",
                fill: "0-#9bb7cb-#adc8da"
        });
        var click = function(){
                alert(this.type);    
        };

        r.setStart();
        var hue = Math.random();
        for (var country in worldmap.shapes) {
                r.path(worldmap.shapes[country]).attr({stroke: "#ccc6ae", fill: "#f0efeb", "stroke-opacity": 0.25});
        }

        var dot = r.circle(772.9870633333333, 166.90446666666668).attr({
                title: "Point",
                fill: "red", 
                stroke: "#fff", 
                "stroke-width": 2, 
                r: 5
        });
        var world = r.setFinish();
        world.click(click);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:41:38.917

我有几次遇到这个问题。通过使用鼠标向上事件而不是单击事件来解决它。IE很烂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:15:19.210

我找到了解决此问题的方法，将 Raphael Set 对象替换为数组对象以推送所有 Rahpael 元素对象，然后循环数组以为每个元素添加点击事件。看下面的代码：

```
 var set = [];
//  r.setStart();
    for (var country in worldmap.shapes) {
        var element = r.path(worldmap.shapes[country]).attr({stroke: "#ccc6ae", fill: "#f0efeb", "stroke-opacity": 0.25});
        set.push(element);
    }

    var dot = r.circle(772.9870633333333, 160.90446666666668 , 5).attr({
            title: "Point",
            fill: "red", 
            stroke: "#fff", 
            "stroke-width": 2
    });

    set.push(dot);
    for(var i = 0; i < set.length; i++){
        var element = set[i];
        element.click(click);
    }
//  var world = r.setFinish();
//  world.click(click); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:20:40.457

我在 Firefox 中遇到了类似的问题，尽管我所做的完全不同。

我解决它的方法是防止事件在太短的时间间隔内触发两次。

我会使用这个功能：

```
function rateLimit(func) {
    var lastcall = func.lastcall || 0,
        now = new Date().getTime();
    if( now-lastcall < 250) return false;
    func.lastcall = now;
    return true;
} 
```

然后在我想限制频繁触发的功能中，我可以这样做：

```
if( !rateLimit(arguments.callee)) return false; 
```

但是，如果您使用 ，您可能会遇到一个小问题`alert()`，因为这将完全阻止执行并且第二次运行仍然会触发。我强烈建议使用`console.log()`而不是`alert()`来跟踪值，因为这将避免中断程序的流程（尤其是当你进入异步的东西时，如果你用 停止事情，你会得到真正的谜团`alert`）

希望这可以帮助！

# date - Access 2010 - 限制日期选择器中的日期范围

> ID：15217911
> 
> 赞同：0
> 
> 时间：2013-03-05T07:15:27.317
> 
> 标签：date, ms-access, picker

我在 Win 7 pro 上使用 Access 2010。

我正在尝试限制与访问表单上的文本框相关联的日期选择器中返回的日期。

我创建了文本框，将其格式设置为短日期，并在显示日期选择器属性中选择日期。到目前为止一切顺利，当它具有预期的焦点并且日期选择器正在工作时，我看到字段旁边的日期选择器图标。

我遇到的问题是将日期选择器中显示的日期限制为仅最近两周，这是由于业务规则所必需的。我可以在 afterupdate 事件中引发错误，但它并不漂亮，我更愿意将用户限制在指定范围内。我在网上找到了很多关于如何使用日历活动 x 控件和以前版本中的 activex 日期选择器完成此操作的参考资料。执行此操作的代码不是问题，我只是找不到任何地方来限制日期选择器显示的内容。

非常感谢任何帮助

PK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:34:31.170

您是否尝试过属性数据方面的验证规则？

在那里您可以设置有效值。

每个示例 [field1] > '2012-01-01' 和 [field1] < '2014-01-01'

# android - Android：带有TextChangedListener问题的edittext

> ID：15217914
> 
> 赞同：0
> 
> 时间：2013-03-05T07:15:34.850
> 
> 标签：android, android-edittext, textchanged

我正在将电话联系人加载到列表中并在edittext上实现TextChangedListener，如下所示

```
editTxt.addTextChangedListener(new TextWatcher() {

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            public void afterTextChanged(Editable s) {
                final TextView noDataFound = (TextView) findViewById(R.id.norecords);
                inputName = s.toString();
                if(inputName!=null&&!inputName.trim().equals("")){

                Log.d(TAG, "LoadMoreEntries --> Constants.loadEntries : "
                        + Constants.loadEntries);

                    if (Constants.loadEntries != null) {
                        Constants.loadEntries.cancel(true);
                    }

                Constants.loadEntries = new LoadEntries();
                Constants.loadEntries.execute();
            }
                Button closesearch = (Button) findViewById(R.id.closesearch);

                if (inputName != null && !inputName.trim().equals("")) {
                    closesearch.setVisibility(View.VISIBLE);
                } else {
                    closesearch.setVisibility(View.GONE);
                }

                closesearch.setOnTouchListener(new OnTouchListener() {
                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        if (Constants.loadEntries != null) {
                            Constants.loadEntries.cancel(true);
                Constants.loadEntries = new LoadEntries();
                Constants.loadEntries.execute();
                        }else {

            }
                        return false;
                    }
                }); 

            }
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {

            }
        }); 
```

在这里，当用户输入正确的名称时，它会给出名称，而当他输入错误的名称时，它不会显示任何数据。我的问题是当我输入正确的名称并擦除时，整个列表已加载，但是当我输入错误的名称且不显示任何数据并且在擦除名称时，列表没有更新。在输入名称并单击该按钮后，我也有“ x ”按钮，这应该会恢复我的所有列表。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:45:11.200

使用[Google Places AutoComplete API](https://developers.google.com/places/training/autocomplete-android)而不是实现 Textwatcher。当您开始输入并暂停时，Google Places AutoComplete API 非常有效，然后它会显示下拉列表，并且下拉列表会在每个字符处更新。

使用它，您可以轻松更新自动完成的下拉列表。

这是对此的解释。

```
editTxt.setAdapter(new PlacesAutoCompleteAdapter(this,R.layout.yourlayout)); 
```

这是 PlacesAutoCompleteAdapter 类，它是过滤结果并返回过滤结果。

```
private class PlacesAutoCompleteAdapter extends ArrayAdapter<String> implements Filterable {
    private ArrayList<String> resultList;
    private String[] myArray;

    public PlacesAutoCompleteAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    @Override
    public int getCount() {
        return myArray.length;
    }

    @Override
    public String getItem(int index) {
        return myArray[index];
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Retrieve the autocomplete results.
                    myArray = autocomplete(constraint.toString());  // here we are calling myAutocomplete method.                    
                    // Assign the data to the FilterResults
                    filterResults.values = myArray;
                    filterResults.count = myArray.length;
                }
                return filterResults;
            }

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                if (results != null && results.count > 0) {
                    notifyDataSetChanged();
                }
                else {
                    notifyDataSetInvalidated();
                }
            }};
        return filter;
    }
}   

private String[] autocomplete(String dropdownString) {
    ArrayList<String> resultList = null;
    StringBuilder jsonResults = new StringBuilder();
    String term;

    try {
        term=URLEncoder.encode(dropdownString, "utf8");
    } catch (Exception e) {
        e.printStackTrace();
        term = dropdownString;
    }

    StringBuilder sb = new StringBuilder(PLACES_API_BASE + TYPE_AUTOCOMPLETE);  
    sb.append("?param="+param1+"); // this is parameter if your getting data from server.        
    sb.append("&term="+term); // this term which you typing in edittext.  
    String url = sb.toString();

        // you can do here anything with your list. get it and populate it.   

    return myArray;
} 
```

PLACES_API_BASE：- `here is url if you are getting data from Web(in my example www.myurl/myapp)`。
TYPE_AUTOCOMPLETE：- `file name or exact location from where are you getting data(in my example abc.php)`。
如果您有任何疑问问我。不要犹豫。

# string - 延迟输出以使其显示为打字？（爪哇）

> ID：15217917
> 
> 赞同：0
> 
> 时间：2013-03-05T07:15:45.647
> 
> 标签：string, console, delay, output, typing

我希望我能恰当地用这个词。

我想知道是否可以延迟字符串中字母的输出，使其看起来好像有人在打字？

我目前正在使用 JCreator 并输出到控制台。

我使用了thread.sleep，但这会延迟完整字符串的输出。

有任何想法吗？让我知道是否需要更改措辞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:42:13.087

您需要对字符串进行切片并将每个字符推送到数组中。然后，使用 for 循环将函数应用于数组中的每个元素。

这是我使用 AS3 制作的示例函数：

```
function splitString(str:String):Array{
    var arr = [];
    for(var i=0;i<str.length;i++){
        arr.push(str.substr(i,1));
    }
    return arr;
} 
```

申请：

```
for(var a=0;a<str_split.length;a++){
     //trace(str_split[a]);
     //apply here your function    
} 
```

# iphone - 如何从带有标签和颜色对象的方法中选择随机颜色？

> ID：15217921
> 
> 赞同：1
> 
> 时间：2013-03-05T07:15:57.517
> 
> 标签：iphone, ios, objective-c, uilabel, uicolor

尝试从三个定义的颜色属性中运行随机颜色，

```
int num1 = rand() %3;
color1= [UIColor colorWithRed:0.5/num1 green:0.7/num1 blue:0.5/num1 alpha:1.0];
[self setColor:color1 setLabel:label1];

int num2 = rand() %3;
color2 = [UIColor colorWithRed:0.5/num2 green:0.7/num2 blue:0.5/num2 alpha:1.0];
[self setColor:color2 setLabel:label2];

int num3 = rand() %3;
color3= [UIColor colorWithRed:0.5/num3 green:0.7/num3 blue:0.5/num3 alpha:1.0];
[self setColor:color3 setLabel:label3]; 
```

试图从颜色对象、标签对象生成随机颜色。

想要将 random() 用于整个颜色变量，而不仅仅是用于属性。我怎样才能做到这一点。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:33:42.047

编辑：（对于 ios）

```
-(NSDictionary *)randomColorAndLabel{
    UIColor *color1= [UIColor colorWithRed:0.2 green:0.4 blue:0.3 alpha:1.0];
    UIColor *color2= [UIColor colorWithRed:0.3 green:0.4 blue:0.3 alpha:1.0];
    UIColor *color3= [UIColor colorWithRed:0.4 green:0.4 blue:0.3 alpha:1.0];

    NSDictionary *colorDict1=@{@"color1" : color1};
    NSDictionary *colorDict2=@{@"color2" : color2};
    NSDictionary *colorDict3=@{@"color3" : color3};

    NSArray *colors=@[colorDict1, colorDict2, colorDict3];

    NSInteger randomNumber=arc4random()%3;

    return colors[randomNumber];
} 
```

它返回带有颜色和名称的字典，可用于标签。

* * *

较早解决了 OSX

我解决了 OSX，使用 NSColor 而不是 UIColor 并且方法名称更改为

`colorWithRed:randomRed green:randomGreen blue:randomBlue alpha:1.0];`

```
-(NSDictionary *)randomColorAndLabel{
    NSColor *color1= [NSColor colorWithCalibratedRed:0.2 green:0.4 blue:0.3 alpha:1.0];
    NSColor *color2 = [NSColor colorWithCalibratedRed:0.3 green:0.4 blue:0.3 alpha:1.0];
    NSColor *color3= [NSColor colorWithCalibratedRed:0.4 green:0.4 blue:0.3 alpha:1.0];

    NSDictionary *colorDict1=@{@"color1" : color1};
    NSDictionary *colorDict2=@{@"color2" : color2};
    NSDictionary *colorDict3=@{@"color3" : color3};

    NSArray *colors=@[colorDict1, colorDict2, colorDict3];

    NSInteger randomNumber=arc4random()%3;

    return colors[randomNumber];
} 
```

这将返回带有名称和颜色的字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:25:52.507

您应该随机更改 rgb 值....

```
color1= [self getRandomColor];                
[self setColor:color1 setLabel:firstColorObject];
color2 = [self getRandomColor];;
[self setColor:color2 setLabel:secondColorObject];
color3= [self getRandomColor];
[self setColor:color3 setLabel:thirdColorObject]; 
```

方法定义：

```
-(UIColor *)getRandomColor{
    UIColor *color;
    float randomRed = rand()%3;//3:you can write any number as you wish...
    float randomGreen =rand()%2;//2:you can write any number as you wish...
    float randomBlue =rand()%4;//4:you can write any number as you wish...
    color= [UIColor colorWithRed:randomRed green:randomGreen blue:randomBlue alpha:1.0];
    return color;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-03T15:03:55.510

```
-(UIColor*) randomColor {
    CGFloat r = (float)(arc4random()%256) / 255.f;
    CGFloat g = (float)(arc4random()%256) / 255.f;
    CGFloat b = (float)(arc4random()%256) / 255.f;

    return [UIColor colorWithRed:r green:g blue:b alpha:1.f];

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-01T10:16:05.450

Finlay 我找到了随机颜色的解决方案

只需使用以下代码

```
- (UIColor *)getRandomColor {

    srand48(arc4random());

    float red = 0.0;
    while (red < 0.1 || red > 0.84) {
        red = drand48();
    }

    float green = 0.0;
    while (green < 0.1 || green > 0.84) {
        green = drand48();
    }

    float blue = 0.0;
    while (blue < 0.1 || blue > 0.84) {
        blue = drand48();
    }

    return [UIColor colorWithRed:red green:green blue:blue alpha:1.0f];
} 
```

请检查颜色参考 [![在此处输入图像描述](../Images/1d6223cc578fe7c48005327613e5b2d1.png)](https://i.stack.imgur.com/PJu7f.png)

# c++ - 基于 Sparkle 的 C++ 应用程序更新程序 [OS X]

> ID：15217923
> 
> 赞同：1
> 
> 时间：2013-03-05T07:16:07.703
> 
> 标签：c++, macos, sparkle

我正在尝试为我用 C++/Qt 编写的应用程序实现自动更新程序。它应该可以在 Mac OS X 上运行。我在网上搜索过，发现 Sparkle 框架应该适合我的需要。我将 Sparkle 框架 1.5 b6 添加到我的 xcode 项目中，还添加了头文件：

```
#include <Sparkle/Sparkle.h> 
```

现在，当我尝试构建项目时，编译器在 SUVersionComparisonProtocol.h 和 SUUpdater.h 中给了我很多错误：

```
Expected unqualified-id: @protocol SUVersionComparison
Expected unqualified-id: @end
Expected unqualified-id: @interface SUUpdater: NSObject { 
```

等等等等

我看到这些头文件是用 Objective-C 编写的，所以看起来 C++ 编译器根本无法处理它们。但是，我知道使用 Sparkle 的 C++ 应用程序。那么有人可以告诉我应该如何在 C++ 应用程序中使用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:00:30.583

实际上，您需要混合使用 C++ 和 Objective-C。

这是一个很好的解释，以及一个实现示例：[http ://el-tramo.be/blog/mixing-cocoa-and-qt/](http://el-tramo.be/blog/mixing-cocoa-and-qt/)

这是一个 C++/Qt 项目，它为 Sparkle 构建了一个 Qt 可用的 dylib 包装器：[https ://github.com/Roxee/qt-roxeemegaup/](https://github.com/Roxee/qt-roxeemegaup/)

# android - Fragment的onActivityCreated()在Activity的onDestroy()之后被调用

> ID：15217926
> 
> 赞同：8
> 
> 时间：2013-03-05T07:16:21.357
> 
> 标签：android, android-fragments, android-ui

今天我注意到我的应用程序中有一个奇怪的行为。

当我使用 Eclipse 中的设备视图停止我的应用程序时，就会发生这种情况。有人可以解释一下吗？

即使已经被破坏 ，为什么还要调用`onActivityCreated()`of ？包含两个s 并为两者生成类似的日志。`Fragment``Activity``MyHomeActivity``Fragment`

在这里，我正在为一个粘贴日志`Fragment`。 `NullPointerException`是次要问题。

我很惊讶为什么从of`onActivityCreated()`启动调用堆栈时会调用它？`onDestroy()``MyHomeActivity`

```
03-05 12:31:21.414: W/System.err(5638): java.lang.NullPointerException
03-05 12:31:21.421: W/System.err(5638):     at **MyListViewFrag.onActivityCreated**(BuddyListViewFrag.java:85)
03-05 12:31:21.421: W/System.err(5638):     at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1468)
03-05 12:31:21.421: W/System.err(5638):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
03-05 12:31:21.421: W/System.err(5638):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
03-05 12:31:21.421: W/System.err(5638):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
03-05 12:31:21.421: W/System.err(5638):     at android.support.v4.app.FragmentManagerImpl.dispatchReallyStop(FragmentManager.java:1888)
03-05 12:31:21.421: W/System.err(5638):     at android.support.v4.app.FragmentActivity.onReallyStop(FragmentActivity.java:787)
03-05 12:31:21.421: W/System.err(5638):     at android.support.v4.app.FragmentActivity.doReallyStop(FragmentActivity.java:764)
03-05 12:31:21.421: W/System.err(5638):     at android.support.v4.app.FragmentActivity.onDestroy(FragmentActivity.java:322)
03-05 12:31:21.421: W/System.err(5638):     at MyFragmentActivity.onDestroy(RbrFragmentActivity.java:57)
03-05 12:31:21.421: W/System.err(5638):     at **MyHomeActivity.onDestroy**(MyHomeActivity.java:254)
03-05 12:31:21.421: W/System.err(5638):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:2663)
03-05 12:31:21.421: W/System.err(5638):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:2694)
03-05 12:31:21.421: W/System.err(5638):     at android.app.ActivityThread.access$2100(ActivityThread.java:117)
03-05 12:31:21.421: W/System.err(5638):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
03-05 12:31:21.421: W/System.err(5638):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 12:31:21.421: W/System.err(5638):     at android.os.Looper.loop(Looper.java:130)
03-05 12:31:21.421: W/System.err(5638):     at android.app.ActivityThread.main(ActivityThread.java:3687)
03-05 12:31:21.429: W/System.err(5638):     at java.lang.reflect.Method.invokeNative(Native Method)
03-05 12:31:21.429: W/System.err(5638):     at java.lang.reflect.Method.invoke(Method.java:507)
03-05 12:31:21.429: W/System.err(5638):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-05 12:31:21.429: W/System.err(5638):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-05 12:31:21.429: W/System.err(5638):     at dalvik.system.NativeStart.main(Native Method) 
```

我正在使用支持库来为`Fragment`pre-HoneyComb 设备提供 s，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T20:23:48.927

经过一些测试和审查[FragmentManager.moveToState](http://www.grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/support/v4/app/FragmentManager.java?av=f)，我相信当`Fragment`由 a 处理时`FragmentPagerAdapter`，之前合并为 savedState 的 a 是不可避免的`Fragment`（作为在从 DDMS 选项卡中终止进程之前停止应用程序的过程的一部分在 Eclipse 中），必须首先“创建”（用 的术语`FragmentManager`）才能将其销毁。

这实际上可能是从保存状态重建片段的过程的意外结果。当`FragmentActivity`正在执行`onCreate`并被`finish()`调用时，目的是`FragmentActivity`停止设置并退出。视觉体验是这种情况发生了，但似乎`FragmentManager`它自己继续以前存在`Fragment`的 s 的生命周期，尽管有一些捷径。这个过程似乎执行生命周期方法`onActivityCreated`，然后执行`onDestroy`and `onDetach`，跳过中间的那些。

处理此问题的最佳方法似乎是解决此启动引起的次要问题（在本例中为您的 NPE）。似乎在`Fragment`生命周期之外还有优化的空间，但是对于 r12 支持库，这种情况似乎是设计的结果。

# matlab - 我怎样才能矢量化这个for循环（matlab）

> ID：15217927
> 
> 赞同：3
> 
> 时间：2013-03-05T07:16:22.010
> 
> 标签：matlab, for-loop, vectorization

我感谢有关如何矢量化以下 for 循环（matlab）的建议：

```
 summ=0;
    for i=1:lasti
         summ=summ+abs(newTS(m+i*k)-newTS(m+(i-1)*k));
    end 
```

向量化是指使用矩阵运算而不是 for 循环。我听说矢量化通常比 for 循环更有效、更快。

编辑：实际上我真正想要矢量化的内容如下。我把它包括在内，以防一些勇敢的灵魂想试一试……

```
 for j=1:length(kvec)
       k=kvec(j);
       for m=1:k
           lasti=floor((N-m)/k);
           Nfact=(N-1)/(lasti*k);
           summ=0;
           for i=1:lasti
                summ=summ+abs(newTS(m+i*k)-newTS(m+(i-1)*k));
           end
           L(m,j)=(summ*Nfact)/k;
           %Avg over m
           AvgL(j)=mean(L(:,j));
        end
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:26:26.850

基本上你想总结和之间的所有距离`newTS(m+i*k)`，`newTS(m+(i-1)*k)`所以你可以做这样的事情

```
summ = sum(abs(diff(newTS(m:k:m+lasti*k)))) 
```

我同意你的观点，根据我使用 Matlab 的经验，矩阵运算通常比`for`循环快得多。我尽量避免它们。

编辑：我认为更换内`i`循环对你来说应该足够好了。也许您可以`m`通过重塑`newTS`为矩阵来替换循环，但由于`lasti`each 不同`m`，因此在您的情况下可能会很棘手。

# spring - 使用数据库的spring安全认证和授权

> ID：15217928
> 
> 赞同：1
> 
> 时间：2013-03-05T07:16:22.760
> 
> 标签：spring, spring-security

我的 Web 应用程序使用 Spring Security 进行基于数据库的身份验证和授权。我的配置如下： 这是我的 web.xml 文件，我介绍了 applicationContext.xml 和 applicationContext-security.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee  http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5">

    <display-name>Struts2Example14</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/applicationContext-security.xml
        </param-value>
    </context-param>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

这是我的 applicationContextSecurity.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:sec="http://www.springframework.org/schema/security"
       xmlns:beans="http://www.springframework.org/schema/mvc"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
        <property name="url" value="jdbc:oracle:thin:@10.60.2.4:1521:agribase"/>
        <property name="username" value="sabka"/>
        <property name="password" value="sabka"/>
    </bean>

    <sec:http use-expressions="true">
        <sec:intercept-url pattern="/secured/**" access="ROLE_USER"/>
        <sec:intercept-url pattern="/admin/*" access="ROLE_ADMIN"/>
        <sec:form-login login-page="/jsp/homePage.jsp"
                        authentication-failure-url="/jsp/homePage.jsp"
                        default-target-url="/jsp/homePage.jsp"/>
    </sec:http>

    <sec:authentication-manager>
        <sec:authentication-provider>
            <sec:jdbc-user-service
                data-source-ref="dataSource"
                users-by-username-query="
                    SELECT username,password, enabled FROM users WHERE username=?"
                authorities-by-username-query="
                    SELECT u.username, ur.authority
                    FROM users u, user_roles ur WHERE u.user_id = ur.user_id AND u.username=?"/>
        </sec:authentication-provider>
    </sec:authentication-manager>
</beans> 
```

当我运行它时，它会出现这个错误：

```
Unexpected exception parsing XML document from ServletContext resource [/WEB-    INF/applicationContext-security.xml];  

nested exception is org.springframework.beans.BeanInstantiationException:Could not instantiate bean class
[org.springframework.security.config.SecurityNamespaceHandler]:Constructor threw   exception;  

nested exception is java.lang.NoClassDefFoundError:  org/springframework/aop/config/AbstractInterceptorDrivenBeanDefinitionDecorator 
```

这是我的类路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
<classpathentry kind="src" path="src"/>
<classpathentry kind="src" path="WebContent/WEB-INF"/>
<classpathentry exported="true" kind="con"  path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.St andardVMType/jre6">
<attributes>
<attribute name="owner.project.facets" value="java"/>
</attributes>
</classpathentry>
<classpathentry exported="true" kind="con" path="org.eclipse.jst.server.core.container/org.eclipse.jst.server.tomcat.runtimeTarget/Apache Tomcat v6.0">
<attributes>
<attribute name="owner.project.facets" value="jst.web"/>
</attributes>
</classpathentry>
<classpathentry exported="true" kind="con" path="org.eclipse.jst.j2ee.internal.web.container"/>
<classpathentry exported="true" kind="con" path="org.eclipse.jst.j2ee.internal.module.container"/>
<classpathentry exported="true" kind="lib" path="//10.60.2.7/Sabka/lib/ojdbc14.jar"/>
<classpathentry exported="true" kind="lib" path="//10.60.2.7/Sabka/lib/ojdbc14dms.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/antlr-runtime-3.0.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/commons-fileupload-1.2.1.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/commons-io-1.3.2.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/commons-logging-1.1.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/freemarker-2.3.13.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/junit-3.8.1.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/ognl-2.6.11.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/org.springframework.asm-3.0.0.M3.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/org.springframework.beans-3.0.0.M3.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/org.springframework.context-3.0.0.M3.jar"/>
<classpathentry exported="true" kind="lib" path="D:/SpringWS/SpringStruts2/WebContent/WEB-INF/lib/org.springframework.core-3.0.0.M3.jar"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T11:53:14.453

此示例将演示 Spring 3.2 与 Spring Security 3.1 和 Hibernate 4.1.9 的使用。

在您的 pom.xml 中包含以下依赖项

```
 <!-- spring dependency-->
           <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
         <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
         <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <!-- START: Spring security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>${spring.security.version}</version>
        </dependency>
        <!-- END: Spring security --> 
```

在 web.xml 中

```
 <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/root-context.xml,/WEB-INF/spring/spring-security.xml</param-value>
    </context-param>

        <!-- START: Spring Security -->
        <filter>
            <filter-name>springSecurityFilterChain</filter-name>
            <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
        </filter>
        <filter-mapping>
            <filter-name>springSecurityFilterChain</filter-name>
            <url-pattern>/*</url-pattern>
        </filter-mapping>
        <!-- END: Spring Security --> 
```

弹簧安全.xml

```
<http auto-config="true" access-denied-page="/denied">
        <intercept-url pattern="/role1/*" access="ROLE1" />
        <intercept-url pattern="/role2/*" access="ROLE2" />
        <intercept-url pattern="/role3/*" access="ROLE3" />
         <intercept-url pattern="/home" access="ROLE1,ROLE2,ROLE3"/>        
        <form-login login-page="/login" default-target-url="/home"
            authentication-failure-url="/loginfailed" />
          <logout
            invalidate-session="true"
            delete-cookies="SPRING_SECURITY_REMEMBER_ME_COOKIE"
            logout-success-url="/index"></logout>
    </http>
<beans:bean class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler"/>
    <authentication-manager >
    <authentication-provider ref="authProvider"></authentication-provider>  
    </authentication-manager>
<beans:bean id="authProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
  <beans:property name="userDetailsService" ref="userDetailsServiceImpl" />
  <beans:property name="passwordEncoder" ref="encoder" />
</beans:bean>
<!-- For hashing and salting user passwords -->
    <beans:bean id="encoder" class="org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder"/> 
```

在 mvc.xml 中

```
 <security:global-method-security secured-annotations="enabled"/>
    <bean id="userDetailsServiceImpl" class="com.service.UserDetailsServiceImpl">
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean> 
```

在 UserDetailsS​​erviceImpl

```
 @Service
@Transactional(readOnly = true)
public class UserDetailsServiceImpl implements UserDetailsService {

    UserDao userDAO = new UserDaoImpl();

    public UserDetails loadUserByUsername(String userName)
            throws UsernameNotFoundException {

        Users domainUser = userDAO.getUser(userName);
        Roles role = domainUser.getRoles();
        boolean enabled = true;
        boolean accountNonExpired = true;
        boolean credentialsNonExpired = true;
        boolean accountNonLocked = true;

        return new User(domainUser.getUsername(),
                domainUser.getUsersPassword(), enabled, accountNonExpired,
                credentialsNonExpired, accountNonLocked,
                getAuthorities(role.getRoleName()));
    }

    public Collection<? extends GrantedAuthority> getAuthorities(String role) {
        List<GrantedAuthority> authList = getGrantedAuthorities(getRoles(role));
        return authList;
    }

    public List<String> getRoles(String role) {

        List<String> roles = new ArrayList<String>();
        if ("ROLE1".equals(role)) {
            roles.add("ROLE1");
        } else if ("ROLE2".equals(role)) {
            roles.add("ROLE2");
        }
        else if ("ROLE3".equals(role)) {
            roles.add("ROLE3");
        }
        return roles;
    }

    public static List<GrantedAuthority> getGrantedAuthorities(
            List<String> roles) {
        List<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();

        for (String role : roles) {
            authorities.add(new SimpleGrantedAuthority(role));
        }
        return authorities;
    } 
```

现在您需要在 dao 中创建一种方法来根据用户名获取用户 pojo。然后它会正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:30:08.500

您是否在类路径中包含了 spring aop jar 文件？

# sql - SQL Server 连接多个表

> ID：15217929
> 
> 赞同：1
> 
> 时间：2013-03-05T07:16:26.193
> 
> 标签：sql, sql-server-2008

我有 6 个包含学生信息的表。它们都共享相同的列名，但具有不同的数据。那么，问题是如何通过学术学院按学期制作涵盖六年期间的学生人口统计报告？你会为这类问题使用左连接吗？我尝试使用内部连接，但它不起作用。实际上，这就是我所做的：

```
SELECT DOB, SEX, RACE, MAJORCOLLEGE

FROM MasterFile2006

Join MasterFile2007 ON MasterFile2006.HOMEID = MasterFile2007.HOMEID

Join MasterFile2008 ON MasterFile2006.HOMEID = MasterFile2008.HOMEID

Join MasterFile2009 ON MasterFile2006.HOMEID = MasterFile2009.HOMEID

Join MasterFile2010 ON MasterFile2006.HOMEID = MasterFile2010.HOMEID

Join MasterFile2011 ON MasterFile2006.HOMEID = MasterFile2011.HOMEID 
```

我将衷心感谢您的帮助！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:18:20.543

使用`UNION`：

```
SELECT DOB, SEX, RACE, MAJORCOLLEGE, '2006' as [Year] FROM MasterFile2006
UNION ALL
SELECT DOB, SEX, RACE, MAJORCOLLEGE, '2007' as [Year] FROM MasterFile2007
UNION ALL
SELECT DOB, SEX, RACE, MAJORCOLLEGE, '2008' as [Year] FROM MasterFile2008
UNION ALL
SELECT DOB, SEX, RACE, MAJORCOLLEGE, '2009' as [Year] FROM MasterFile2009
UNION ALL
SELECT DOB, SEX, RACE, MAJORCOLLEGE, '2010' as [Year] FROM MasterFile2010
UNION ALL
SELECT DOB, SEX, RACE, MAJORCOLLEGE, '2011' as [Year] FROM MasterFile2011 
```

注意：`UNION ALL`不丢弃重复项（也不应该有），`UNION`执行 a`DISTINCT`并丢弃重复的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:23:22.903

> 您需要使用`UNION ALL`或`UNION`。`UNION`如果您需要`DISTINCT`记录，请使用。

```
SELECT DOB, SEX, RACE, MAJORCOLLEGE FROM MasterFile2006
UNION
SELECT DOB, SEX, RACE, MAJORCOLLEGE FROM MasterFile2007
UNION
SELECT DOB, SEX, RACE, MAJORCOLLEGE FROM MasterFile2008
UNION
SELECT DOB, SEX, RACE, MAJORCOLLEGE FROM MasterFile2009
UNION
SELECT DOB, SEX, RACE, MAJORCOLLEGE FROM MasterFile2010
UNION
SELECT DOB, SEX, RACE, MAJORCOLLEGE FROM MasterFile2011 
```

# javascript - jquery mobile中的轮播图片库

> ID：15217931
> 
> 赞同：1
> 
> 时间：2013-03-05T07:16:36.910
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用左右滑动选项创建一个轮播图片库。目前我有更改页面的 javascript 代码

```
<!DOCTYPE html>
<head>
      <title>Share QR</title>
        <meta name="viewport" content="width=device-width,height=device-height,minimum-scale=1,maximum-scale=1"/>
     <link rel="stylesheet" type="text/css" href="Css/style.css" />
            <link rel="stylesheet" type="text/css" href="Css/Jstyle.css" />
            <link rel="stylesheet" type="text/css" href="Css/jquery.mobile.theme-1.2.0.css" />
             <script type="text/javascript" src="css/jq1.6.2.js"></script>
             <script type="text/javascript" src="Javascript/jquery1.js"></script>
            <script type="text/javascript" src="Javascript/jquery2.js"></script>
    </head>

    <body>
    <script type="text/javascript">
    $(document).on('swipeleft', 'article', function(event){    
        if(event.handled !== true) // This will prevent event triggering more then once
        {    
            var nextpage = $(this).next('article[data-role="page"]');
            // swipe using id of next page if exists
            if (nextpage.length > 0) {
                $.mobile.changePage(nextpage, {transition: "slide", reverse: false}, true, true);
            }
            event.handled = true;
        }
        return false;         
    });

    $(document).on('swiperight', 'article', function(event){   
        if(event.handled !== true) // This will prevent event triggering more then once
        {      
            var prevpage = $(this).prev('article[data-role="page"]');
            if (prevpage.length > 0) {
                $.mobile.changePage(prevpage, {transition: "slide", reverse: true}, true, true);
            }
            event.handled = true;
        }
        return false;            
    });

    </script>
      <article data-role="page" id="article1">
        <div data-role="header" data-theme="b" data-position="fixed" data-id="footer">
          <h1>Articles</h1>
        </div>
        <div data-role="content">
          <img src="images/product_1.png"/>
        </div>
        <div data-role="footer" data-theme="b" data-position="fixed" data-id="footer">
          <h1>Footer</h1>    
        </div>
      </article>

      <article data-role="page" id="article2">
        <div data-role="header" data-theme="b" data-position="fixed" data-id="footer">
          <a href="#article1" data-icon="home" data-iconpos="notext">Home</a>
          <h1>Articles</h1>
        </div>
        <div data-role="content">
         <img src="images/product_2.png"/>
        </div>
        <div data-role="footer" data-theme="b" data-position="fixed" data-id="footer">
          <h1>Footer</h1>
        </div>
      </article>

      <article data-role="page" id="article3">
        <div data-role="header" data-theme="b" data-position="fixed" data-id="footer">
          <a href="#article1" data-icon="home" data-iconpos="notext">Home</a>
          <h1>Articles</h1>
        </div>
        <div data-role="content">
         <img src="images/ad.png"/>
        </div>
        <div data-role="footer" data-theme="b" data-position="fixed" data-id="footer">
          <h1>Footer</h1>
        </div>
      </article>

    </body>
    </html> 
```

但我只需要更改图像而不是整个页面。在 Jquery mobile 中是否有任何选项可以做同样的事情？请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:18:30.533

我已经为在同一页面内实现的图像轮播示例编写了最简单的示例。

HTML页面如下

```
<div data-role="page" id="myImagePage">
    <div data-role="header">
         <h1>Header </h1>

    </div>
    <div id="content">
        <div id="ImageDiv"></div>
    </div>
</div> 
```

和JavaScript将如下

```
var i = 0;
var imgURL = [];

imgURL.push('http://jquerymobile.com/wp-content/uploads/2013/02/devices.png');
imgURL.push('http://asset1.cbsistatic.com/cnwk.1d/i/tim/2013/02/20/35536085_620x433.jpg');
imgURL.push('http://ctim.saltsidecdn.net/ikman/large/7004d606-4fd0-11e2-8ea2-22000a270a3d.jpg');

$("#myImagePage").swiperight(function () {
    if (i < (imgURL.length - 1)) {
        i++
    } else {
        i = 0;
    }
    var imgStr = "<img src=" + imgURL[i] + " style='width:100%'>";
    $('#ImageDiv').html(imgStr);   
});
$("#myImagePage").swipeleft(function () {
    if (i > 0) {
        i--
    } else {
        i = (imgURL.length - 1);
    }
    var imgStr = "<img src=" + imgURL[i] + " style='width:100%'>";
    $('#ImageDiv').html(imgStr);
}); 
```

基本上我有一个数组中的图像url，并在用户左右滑动时使用数组并显示图像。

希望这会给你一个良好的开端。

在这里检查一个工作小提琴[http://jsfiddle.net/R3bZ8/13/](http://jsfiddle.net/R3bZ8/13/)

# sql - PHP SQL UDP 服务器处理多个客户端创建动态表

> ID：15217935
> 
> 赞同：0
> 
> 时间：2013-03-05T07:16:50.927
> 
> 标签：sql, database, multithreading, sockets, database-table

我正在尝试在 XAMPP 中创建具有多个客户端的动态 SQL 表。我已经运行了服务器代码来处理多个客户端。下面是我的多客户端代码，它通过不断监听传入客户端并根据需要打开套接字连接来完全工作。

问题：建立连接后，我需要为每个客户端创建一个单独的 SQL 数据库。

前任。我有一个值的 SQL 表：温度值时间

**客户端 1 发送消息：84 摄氏度 11:43:01**

*假设另一个客户随机加入*

**客户端 2 发送消息：88 Farenheit 11:43:01**

除非有更好的方法，否则我这样做是为了有一个带有下拉菜单的状态页面，其中包含每个客户端的选择，并且由于明显的冲突，数据不能存储在同一个表中。如果没有，有人能指出我正确的方向吗？

谢谢！

```
<?php
error_reporting(1);
ini_set(‘display_errors’, ’1');
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
$max_clients = 10;

socket_set_option($socket, SOL_SOCKET, SO_REUSEADDR, 1);
socket_bind($socket, 0, 10000);
socket_listen($socket, $max_clients);

$clients = array(’0' => array(‘socket’ => $socket));

while(TRUE)
{
$read[0] = $socket;

for($i=1; $i<count($clients)+1; ++$i)
{
if($clients[$i] != NULL)
{
$read[$i+1] = $clients[$i]['socket'];
}
}

$ready = socket_select($read, $write = NULL, $except = NULL, $tv_sec = NULL);

if(in_array($socket, $read))
{
for($i=1; $i < $max_clients+1; ++$i)
{
if(!isset($clients[$i]))
{
$clients[$i]['socket'] = socket_accept($socket);

socket_getpeername($clients[$i]['socket'],$ip);

$clients[$i]['ipaddy'] = $ip;

socket_write($clients[$i]['socket'], ‘Welcome to my Custom Socket Server’."\r\n");
socket_write($clients[$i]['socket'], ‘There are ‘.(count($clients) – 1).’ client(s) connected to this server.’."\r\n");

echo ‘New client connected: ‘ . $clients[$i]['ipaddy'] .’ ‘;
break;
}
elseif($i == $max_clients – 1)
{
echo ‘To many Clients connected!’."\r\n";
}

if($ready < 1)
{
continue;
}
}
}

for($i=1; $i<$max_clients+1; ++$i)
{
if(in_array($clients[$i]['socket'], $read))
{
$data = @socket_read($clients[$i]['socket'], 1024, PHP_NORMAL_READ);

if($data === FALSE)
{
unset($clients[$i]);
echo ‘Client disconnected!’,"\r\n";
continue;
}

$data = trim($data);

if(!empty($data))
  {
if($data == ‘exit’)
{
socket_write($clients[$i]['socket'], ‘Thanks for trying my Custom Socket Server,     goodbye.’."\n");
echo ‘Client ‘,$i,’ is exiting.’,"\n";
unset($clients[$i]);
continue;
}

for($j=1; $j<$max_clients+1; ++$j)
{
if(isset($clients[$j]['socket']))
{
if(($clients[$j]['socket'] != $clients[$i]['socket']) && ($clients[$j]['socket'] !=    $socket))
{
echo($clients[$i]['ipaddy'] . ‘ is sending a message!’."\r\n");
socket_write($clients[$j]['socket'], ‘[' . $clients[$i]['ipaddy'] . ‘] says: ‘ . $data . "\r\n");
}
}
}
break;
}
}
}
}
?> 
```

# c++ - cmath 重载函数 C++ 的问题

> ID：15217936
> 
> 赞同：2
> 
> 时间：2013-03-05T07:17:04.807
> 
> 标签：c++, math, overloading

我需要使用 cmath 的 abs() 函数，但 Visual Studio 说它超载了，我什至不能使用这样的东西：

```
unsigned a = 5, b = 10, c;
c = abs(a-b); 
```

我不知道如何正确使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:19:55.623

中的[版本适用`<cmath>`](http://en.cppreference.com/w/cpp/numeric/math/fabs)于浮点类型，因此没有明确的最佳匹配。整数类型的重载是 in [`<cstdlib>`](http://en.cppreference.com/w/cpp/numeric/math/abs)，因此其中之一将产生良好的匹配。如果你`abs`在不同的类型上使用，你可以同时使用包含并让重载解析来完成它的工作。

```
#include <cmath>
#include <cstdlib>
#include <iostream>

int main()
{
  unsigned int a = 5, b = 10, c;
  c = std::abs(a-b);      
  std::cout << c << "\n"; // Ooops! Probably not what we expected.
} 
```

另一方面，这不会产生正确的代码，因为表达式`a-b`不调用[整数提升](http://en.cppreference.com/w/cpp/language/implicit_cast#Integral_promotion)，所以结果是一个`unsigned int`. 真正的解决方案是使用有符号整数类型来处理差异，以及整数类型`std::abs`重载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:25:08.223

正如您[在此处](http://en.cppreference.com/w/cpp/numeric/math/abs)看到的，没有 cmath 函数`abs`采用无符号整数。这是因为无符号整数永远不会是负数。请尝试执行以下操作：

```
int a = 5, b = 10;
int c = abs(a-b); 
```

在这种情况下，`c = 5`正如预期的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:07:12.577

您可以使用三元运算符：

```
c = (a > b) ? a - b : b - a; 
```

# c++ - 从另一个dll中的dll获取字符串

> ID：15217938
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:17:10.613
> 
> 标签：c++, c, string, loadlibrary

情况如下：

我制作了一个带有function1的dll，如下所示：

```
int function1( char *inVal, char *outVal)
{
....
strcpy(outVal,dn.commonname.c_str());
} 
```

在最后一行 outVal 指向 dn.commonname ，它是一个字符串。

我使用 LoadLibrary 成功将此 dll 加载到另一个 dll 中。在第二个 dll 中，我有：

```
int function1(string inval, string &outVal)
{   
    typedef int (WINAPI *func1Ptr)(char *, char *);

        char outValPtr[128] = {0};
        int retVal = func1Lnk((char *)inVal.c_str(), outValPtr);
        string outVal = outValPtr;  
 } 
```

现在，我在代码中加载第二个 dll 并调用 fnuction1，但是当我检查函数的第二个参数时，我得到 NULL。

任何人都可以阐明这一点吗？

**编辑-1**

我将代码更改为：

```
int function1(string inVal, string &outVal)
{   
    typedef int (WINAPI *func1Ptr)(char *, char *);

        char outValPtr[128] = {0};
        int retVal = func1Lnk((char *)inVal.c_str(), outValPtr);
        outVal = outValPtr;  
 } 
```

但问题并没有解决。任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:19:46.763

You declare a local variable shadowing the argument:

```
string outVal = outValPtr; 
```

Well, it's *almost* shadowing the argument, because the spelling of the names are different. A variable named `outVal` is not the same variable as one named `outval`. Names in C++ are case-dependent.

# c# - 在 C# 中传递 IntPtr 指针后，在非托管 C++ 代码中分配数组，编组类型

> ID：15217939
> 
> 赞同：0
> 
> 时间：2013-03-05T07:17:15.183
> 
> 标签：c#, c++, marshalling, unmanaged, managed

我正在尝试实现一些涉及托管 C# 和非托管 C++ 代码之间的编组数组的项目。我面临一个问题，我在网上找到的解决方案似乎都不起作用。对于这方面的任何评论，我将不胜感激。

我没有提供完整的代码，而是显示问题的非常简化的部分。虽然它看起来像一个大块 - 它非常简单 - 只是概念性的。只是想提供尽可能多的全貌。

**C++部分：**

*对象.h*

```
class cObject
{
public:
    //...constructor, destructor...
    int Method_Known_Size(double* array, int size);
    int Method_Unknown_Size(double* array);
    ...
    void FreeArray(double* p);
} 
```

*对象.cpp*

```
int Method_Known_Size(double* array, int size)
{
    //modify array somehow..
    for(int i=0; i<size; i++) array[i] = i;

}

int method_Unknown_Size(double* array)
{
    int size = 9;
    array = new double[size];
    for(int i=0; i<size; i++) array[i] = i;
} 
```

（跳过 Caller.h） *Caller.cpp*

```
//...callers for constructor, destructor, for releasing unmanaged memory...
extern "C" int __stdcall Run_Known_Size(cObject* pObject, double* array, int size)
{
     return cObject->Method_Known_Size(array, size);
}

extern "C" int __stdcall Run_Unknown_Size(cObject* pObject, double* array)
{
     return cObject->Method_Unknown_Size(array);
}

extern "C" void __stdcall Release(cObject* cObject, double* array)
{
     if(cObject != NULL) cObject->FreeArray(array);
} 
```

因此，基本上`Run_Known_Size`方法只是修改已由 C# 分配的内存，并`Run_Unknown_Size`创建数组并修改它。

**C#部分**

```
public class DllWrapper: IDisposable
{       
    /* Creating an object, disposing,...
    [DllImport("cObject.dll")]
    CreateObject();...DisposeObject(IntPtr pObject);
    ...CallFreeArray(IntPtr pArray);*/

    [DllImport("cObject.dll")]
    private static extern int CallRun_Known_Size(IntPtr pObject, 
           [Out] double [] arr_allocated, int size);

    [DllImport("cObject.dll")]
    private static extern int CallRun_Unknown_Size(IntPtr pObject, 
           [Out] IntPtr arr_not_allocated);                         

    private IntPtr m_pNativeObject;

    public DllWrapper()
    {
        this.m_pNativeObject = CreateObject();
    }

    public void Dispose()
    {
        Dispose(true);
    }

    protected virtual void Dispose(bool bDisposing)
    {
        if (this.m_pNativeObject != IntPtr.Zero)
        {
            DisposeObject(this.m_pNativeObject);
            this.m_pNativeObject = IntPtr.Zero;
        }

        if (bDisposing)
        {
            GC.SuppressFinalize(this);
        }
    }

    ~DllWrapper()
    {
        Dispose(false);
    }

    public void ReleaseUnmanAraray(IntPtr pArr)
    {
        CallFreeArray(pArr);
    }

    public int Run_Known_Size(double[] arr_allocated, int size)
    {
        return CallRun_Known_Size(this.m_pNativeObject, arr_allocated, size);
    }

    public int Run_Unknown_Size(IntPtr arr_not_allocated)
    {
        return CallRun_Known_Size(this.m_pNativeObject, arr_not_allocated);
    }
}

static void Main(string[] args)
{
    double[] alloc_arr = new double[] { 1, 5, 3, 3, 5, 5, 8, 9,1 };
    int size = 9;            

    double[] Arr_for_Copy = new double[size];

    IntPtr pArr = new IntPtr();

    DllWrapper wrapper = new DllWrapper();

    int res1 = Run_Known_Size(alloc_arr, size);
    int res2 = Run_Unknown_size(pArr);

    if (pArr != IntPtr.Zero) // pArr IS ZERO ALWAYS!!!!!!
    {
        Marshal.Copy(pArr, Arr_for_Copy, 0, size);
    }
    else
    {
        Console.WriteLine("Pointer was zero again");
    }

    wrapper.ReleaseUnmanAraray(pScores);
    wrapper.Dispose();

    Console.ReadLine();
} 
```

在 C# 中分配的数组一切正常——它们是从 C++ 修改而来的，没有错误。但是如果我不知道数组的大小，因此无法预分配数组，我找到的唯一解决方案是传递 [Out] IntPtr 并让 C++ 管理内存，分配和修改数组。然后返回的 IntPtr 可以编组到 C# 的 double[] 数组，因为我们已经知道大小（为简化起见，我只是将数字 4 作为大小，但我通过 int* size 来确定大小）。

在传递 IntPtr 并基于此指针在 C++ 中创建数组后，我所有的试验都以零指针（没有错误）结束。

我见过涉及 COM 对象的解决方案，但由于可移植性问题，我必须避免使用它。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:42:10.137

The parameter of `Method_Unknown_Size` is `double*` and you are changing the parameter *itself*. If you want to change the original value send by the caller, you should define the parameter as a *pointer to an array* which means *pointer to pointer of double* or *reference to pointer of double*

You should also in some way, tell the caller the size of the array (I guess you managed that already).

C++:

```
int method_Unknown_Size(double *&array)
{
    int size = 9;
    array = new double[size];
    for(int i=0; i<size; i++) array[i] = i;
    return size;
}

void FreeArray(double *&p)
{
    delete[] p;
    p = NULL;
}

extern "C" int __stdcall Run_Unknown_Size(cObject *pObject, double *&array)
{
     return cObject->Method_Unknown_Size(array);
}

extern "C" void __stdcall Release(cObject *cObject, double *&array)
{
     if(cObject != NULL) cObject->FreeArray(array);
} 
```

C#:

```
[DllImport("cObject.dll")]
private static extern int Run_Unknown_Size(IntPtr pObject, 
       out IntPtr arr_not_allocated);

[DllImport("cObject.dll")]
private static extern int Release(IntPtr pObject,
       ref IntPtr arr_not_allocated);

// to allocate the array:
IntPtr pArr;
int res2 = Run_Unknown_size(m_pNativeObject, out pArr);

// to free the array:
Release(m_pNativeObject, ref pArr); 
```

This absolutely works! Tell me if it didn't!

# c# - 如何解决：无法识别 URI 前缀

> ID：15217940
> 
> 赞同：9
> 
> 时间：2013-03-05T07:17:16.050
> 
> 标签：c#, asp.net, httpwebrequest

当我要添加一些网站时`http://www.nirmauni.ac.in/`，它会显示上述错误。那么，如何解决这个问题呢？我已经给出了我的代码。只需通过并说出应该在哪里进行更改。

```
bool IsLinkWorking(string url)
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);

    //You can set some parameters in the "request" object...
    request.AllowAutoRedirect = true;
    ServicePointManager.ServerCertificateValidationCallback = (s, cert, chain, ssl) => true;

    try
    {
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        return true;
    }
    catch
    { 
        //TODO: Check for the right exception here
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T07:25:19.170

从您的错误看来，您正在创建一个带有错误 URL 的 Web 请求。

请确保`(HttpWebRequest)HttpWebRequest.Create(url);`url 中的字符串必须以正确的协议开头，例如（http、https 等）

# android - 如何在android的通知栏上禁用短信通知图标？

> ID：15217942
> 
> 赞同：0
> 
> 时间：2013-03-05T07:17:27.360
> 
> 标签：android, sms

我想做一个短信主题。我建立了它，但还有一个问题。当我收到一条短信时，默认的短信主题通知和我的应用程序的短信通知都会被调用并显示在通知栏上。我想禁用默认短信通知。

我怎样才能禁用它。

我发现以下代码阻止它的一些地方。

```
abortBroadcast(); 
```

但这会禁用未保存到默认数据库的 SMS 数据。换句话说，我只想删除通知图标——而不是删除短信。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:26:42.433

AFAIK，这是不可能的。用户可以关闭他们使用的任何 SMS 应用程序的通知。我使用了默认的 ChompSMS 和 HandcentSMS...

Chomp 和 Handcent 都告诉您转到默认应用程序并在设置中关闭通知，这样您就不会收到重复的通知。

即使您可以以编程方式关闭默认应用程序的通知，您也必须找到一种方法来关闭所有 3rd 方应用程序的通知......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:25:46.070

也许你可以做的（未经测试）是`abortBroadcast();`

然后将短信写回内容提供商

有点像[这个答案写入收件箱的方式](https://stackoverflow.com/questions/642076/how-to-save-sms-to-inbox-in-android)

`content://sms/sent`和`content://sms/inbox`

尽管 sms 的内容提供者没有记录并且跨设备不可靠。

# android - Android中的webview重新加载问题

> ID：15217946
> 
> 赞同：0
> 
> 时间：2013-03-05T07:17:46.003
> 
> 标签：android, android-webview

我有一个带有登录凭据的 Web 应用程序。我正在 Android 中加载此 Web 应用程序`WebView`。它工作正常。问题是，在应用程序关闭并单击选项卡中的应用程序启动器图标后，它总是显示登录页面。但是我不想登录页面，一旦我登录并关闭我的应用程序并单击启动器图标，我想在登录页面后直接打开。

## 这是我的代码：

公共类 MyActivity 扩展 Activity {

```
@Override

public void onCreate(Bundle savedInstanceState) {

    try {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        WebView webview = (WebView)findViewById(R.id.webview);

        WebSettings settings = webview.getSettings();  
        settings.setSupportMultipleWindows(true);
        settings.setJavaScriptCanOpenWindowsAutomatically(true);

        webview.getSettings().setJavaScriptEnabled(true);
        webview.setWebViewClient(new WebViewClient() {

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        });

        webview.loadUrl("http://192.1xx.x.xxx:8280/login.jsp");
    } catch(Exception e) {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:49:59.337

做一件事，当您第一次加载应用程序时将第二页（**登录后的页面**）保存在前面，并将登录状态保存在前面，然后第二次您可以检查状态，如果是，然后调用页面如果没有打开登录页面，您已经保存到 prefrance。

这是保存页面的代码：

```
WebViewClient yourWebClient = new WebViewClient()
            {    
                /* Override page so it's load on my view only */
                @Override
                public boolean shouldOverrideUrlLoading(WebView  view, String  url)
                {
return true;

                } 
```

# python - 如何使用来自 github 的应用程序

> ID：15217948
> 
> 赞同：-2
> 
> 时间：2013-03-05T07:17:52.097
> 
> 标签：python, django, github

我有一个来自 Github 的应用程序。
我即将包含该应用程序并将其用于练习

这是我安装的应用程序，我已经从命令提示符运行它。我已经添加了

```
app "shop_simplevariations"
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.admin',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'jhapp',
    'shop_simplevariations', 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:35:18.053

从[github 页面](https://github.com/chrisglass/django-shop-simplevariations)：

> 这需要 django SHOP 才能工作（[https://github.com/chrisglass/django-shop](https://github.com/chrisglass/django-shop)）

你没有`django-shop`安装。下载并将其添加到您的. 文件`INSTALLED_APPS`后，请确保您运行`python manage.py syncdb`以加载表格/夹具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:08:01.873

我认为您忘记在设置和 urlconf 中安装该应用程序。别忘了检查是否有 init.py

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:23:37.943

请参考 github 文档。

他们为每个项目或应用程序提供一个只读的 url。

在您的系统上克隆它

你应该试试`clone`命令

```
git clone https://yoururlorepository 
```

希望对你有帮助

如果您在 windows 上使用 .

安装`git`windows 和 Git cli 你可以尝试使用上面的命令

**更新**

从您的回溯来看，您似乎正在尝试使用尚未安装在您的应用程序中的应用程序。

要检查的东西。

1.  检查您是否有应用程序名称`INSTALLED_APPS`。

不过，如果您遇到问题，请分享 repo url。

# iphone - 以编程方式打开设置 iOS 6

> ID：15217949
> 
> 赞同：4
> 
> 时间：2013-03-05T07:17:57.980
> 
> 标签：iphone, objective-c, ios5, ios6

我正在制作一个需要以编程方式打开设备设置的应用程序。以前我们可以使用以下代码打开它

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

但我知道它已被 iOS 5.1 弃用。请让我知道是否有其他方法可以打开它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T07:36:44.213

Apple 不提供用于实现此目的的 URL 架构。

# android - 一段时间后取消未接电话

> ID：15217961
> 
> 赞同：1
> 
> 时间：2013-03-05T07:19:16.703
> 
> 标签：android

在 Android 中，我在没有任何用户交互的情况下拨打电话。如果在特定时间内没有接听电话，我想取消通话。我找不到取消通话的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:23:14.077

`telephonyService.endCall();` if you're using this, which I believe is the case. If not, please paste your code here.

Cheers

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:28:31.887

这是挂断来电的代码，您将收到有关电话状态的通知，然后请说明是否接听电话并在[此处挂断电话](http://androidsourcecode.blogspot.in/2010/10/blocking-incoming-call-android.html)

在广播接收器内部使用 Timer 来监控最小间隔，然后在间隔过去后检查调用是否被拾取并采取相应的行动。使用 timer 或 Executor 或 Handler 来实现延迟。

# ruby-on-rails - 如何跨代码生命周期配置独立的 rvmrc 文件

> ID：15217963
> 
> 赞同：0
> 
> 时间：2013-03-05T07:19:17.313
> 
> 标签：ruby-on-rails, rvm, rvmrc

我们有多个开发人员为源代码做出贡献，因此最好`.rvmrc`为每个开发人员提供多个文件。我应该如何自动化这个？

例如

```
dev1 uses rvm use 1.9.3@app-dev1
dev2 uses rvm use 1.9.3@app-dev2
dev3 uses rvm use 1.9.3@app-dev3 
```

如何为个人开发人员维护和修改 .rvmrc。该文件是否应该在源代码存储库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:26:38.273

rvmrc 文件可以是 bash 脚本，因此您可以使用其中的`USER`环境变量来选择要使用的 gemset。

您可以使用以下命令创建示例 rvmrc：

```
rvm rvmrc create @app-dev 
```

然后您可以轻松地修改`environment_id`生成`.rvmrc`文件中的 以实现所需的行为：

```
environment_id="ruby-1.9.3@app-dev-${USER}" 
```

因此，每个开发人员只能拥有一个 rvmrc，它会选择正确的 gemset。

# android - 使 EditText 只接受 alpha 作为第一个字符

> ID：15217969
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:19:28.903
> 
> 标签：android, textwatcher

在我的`EditText`我想输入第一个字符作为 alpha 和其余的是什么。我在`TextWatcher`. 但现在我的问题是，如果我输入了错误的内容（如数字、特殊字符）作为我的第一个字符，那么我`EditText`不应该接受剩余的字符。如果我纠正我的第一个字符，那么只有我`EditText`应该接受。他们有没有可能实现这个朋友？如果是的话，请朋友们指导我。

我的 textWatcher 代码是

```
edittext.addTextChangedListener(new TextWatcher() {
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {

    }

    public void afterTextChanged(Editable s) {          
        if (s.length() > 0) {
            String str = edittext.getText().toString();
            char t = str.charAt(0);
            if (!Character.isLetter(t)) {
                Toast.makeText(getApplicationContext(),
                        "please enter your first charecter as alpha",
                        Toast.LENGTH_LONG).show();
            }
        }
    }
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:29:21.550

试试下面的代码

```
editText.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start,
                int before, int count) {

        }

        public void beforeTextChanged(CharSequence s, int start,
                int count, int after) {
        }

        public void afterTextChanged(Editable s) {

            Character cr = s.toString().charAt(0);
     if(Character.isLetter(cr))
      {
        // do stuff here  
      }
             else
             {
                // do stuff here
             }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:25:58.923

```
editText.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence s, int start,
                    int before, int count) {
                            //check if 's' starts with an alphabet
                            if(Character.isLetter(s.toString().charAt(0)))
                            {
                                  //success
                            } else {
                                  //fail
                            }
            }

            public void beforeTextChanged(CharSequence s, int start,
                    int count, int after) {
            }

            public void afterTextChanged(Editable s) {
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:29:46.873

您可以使用方法 chatAt(int index) 获取指定位置的字符值，在您的情况下为 0。

那么你应该使用 isLetter() 来验证获取的字符是字母。

例如。isLetter(chatAt(0))

# javascript - 是否可以使用其中一个字段动态更改 html 表单的操作标记值？

> ID：15217971
> 
> 赞同：2
> 
> 时间：2013-03-05T07:19:41.213
> 
> 标签：javascript, html

我搜索了很多（SO & GOOGLE），但找不到任何更仔细的方法来解决我的问题。

我有一个简单的 html5 表单，有 9-10 个输入，并使用“mailto:abc@xyz.com”标签来撰写一封电子邮件，其中包含通过输入输入的所有数据。到这里我很好，但现在我需要用其输入字段之一更改“abc@xyz.com”值。

例如

```
 <form method="post" action="now it should have what is value of 1." enctype="text/plain">

  1\. <input type="Email" name="ToEmail" id="ToEmail" value="" required placeholder="Target Email Address.."/>
  2\. 
  3.
   .
   .
  <button type="submit">Submit</button></div>
 </form> 
```

我自己尝试的：创建了一个javascript函数
function actionValue()

```
 {
        var email = document.getElementById('ToEmail').value;
        var action = "mailto:"+email+"?subject=Test"
        return action;
        } 
```

并像这样调用这个函数

```
 <form method="post" action="javascript:actionValue();" enctype="text/plain"> 
```

我怀疑我的逻辑或我使用 javascript 的方式有问题。任何帮助将不胜感激。

谢谢，ps：我对js不太好..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:23:21.640

您应该能够按照以下方式做一些事情：

```
<form method="post" action="javascript:;" onSubmit="this.action='mailto:'+document.getElementById('ToEmail').value;" enctype...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:44:42.843

我已从您的 HTML 中删除了内联内容：

```
(function() {
  var theForm = document.querySelector('form');
  theForm.addEventListener('submit', function(e) {
    theForm.action = document.getElementById('ToEmail').value;
  });
}()); 
```

演示：http: [//jsbin.com/odihew/1](http://jsbin.com/odihew/1)

# arrays - Haskell：Dijkstra算法的文件到数组

> ID：15217972
> 
> 赞同：1
> 
> 时间：2013-03-05T07:19:42.730
> 
> 标签：arrays, haskell, io, functional-programming, haskell-platform

我正在构建一个图来实现 Dijkstra 的算法，并且我正在读取一个包含

1 3 5
1 2 6

我将如何读取每一行并将其存储为 [(a,a,float)]。我需要这个才能使用：

```
buildGraph :: Ord a => [(a, a, Float)] -> Map a [(a, Float)] 
```

这是我构建图表的方式：

```
let g =  buildGraph [('a','c',2), ('a','d',6), ('b','a',3)
                         ,('b','d',8), ('c','d',7), ('c','e',5)
                         ,('d','e',10)] 
```

目前我可以读取文件并将所有内容存储在数组中。

```
main = do
    contents <- readFile "input.txt"

     print . map readInt . words $ contents

readInt :: String -> Int
readInt = read 
```

我希望能够访问每个文件并附加到一个像这样的数组（'1'，'4'，5），这与（a，a，float）相同。在数组准备好发送到 buildGraph 之后

```
Type Edge = (Char, Char, Float)
readGraphFile :: FilePath -> IO Edge
readGraphFile path = do
                    alldata <- readFile path
                    return (Char,Char,Float) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:11:52.573

这是基于您提供的代码的内容：

```
import qualified Data.Char as Char -- good practice to import modules qualified

main = do contents <- readFile "input.txt"
          print . map (f . words) $ lines contents
        where
          -- this will break if your input file is badly formed!
          f [a,b,c] = (readChar a, readChar b, readFloat c)

readChar :: String -> Char
readChar c = Char.chr (64 + read c)

readFloat :: String -> Float
readFloat = read 
```

该`readChar`函数读取一个类似`"1"`int 的字符串，然后添加 64（将其带入 ascii 字母数字范围）并使用该函数`Char.chr`将其转换为字符。

您可以将类型更改`readChar`为例如`readOrd :: (Read a, Ord a) => String -> a`以阅读更通用的内容。

当然，除了打印它们（例如将它们发送到`buildGraph`）之外，您还必须对这些值做一些事情，否则运行时将无法推断出`Read ∩ Ord`您想要哪个交集实例。

这将读取文件`input.txt`，如下所示：

```
1 2 4.5
1 3 6.0
3 2 1.2 
```

并输出

```
ghci> main
[('A','B',4.5), ('A','C',6.0), ('C','B',1.2)] 
```

# matlab - Unable to compile mex file

> ID：15217983
> 
> 赞同：3
> 
> 时间：2013-03-05T07:21:08.473
> 
> 标签：matlab, kinect-sdk

I am using cpp files in matlab to get images from Kinect. It gives the following error:

> Error using mex (line 206)
> Unable to complete successfully.
> 
> Error in compile_cpp_files (line 47)
> mex('-v',['-L' MicrosoftSDKPathLib],'-lMSRKinectNUI',['-I'
> MicrosoftSDKPathInclude],Filename);

I don't know about this error and please let me know how to solve this error?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:38:00.923

首先，您需要使用配置您的 mex 编译器

```
>> mex -setup 
```

Matlab 将扫描您的 PC 以查找已安装的编译器并建议您使用哪一个。
我强烈建议你使用 Visual Studio 编译器（你得到的最新版本）。

然后尝试重新运行`compile_cpp_files`脚本。

# hibernate - Alternative of deprecated hibernate getSession().connection()

> ID：15217984
> 
> 赞同：4
> 
> 时间：2013-03-05T07:21:19.553
> 
> 标签：hibernate

When using HibernateDaoSupport class,I found that getSession().connection(); is deprecated.

What is another method,please,instead of this

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:45:28.347

现在我们必须使用 [session.doWork()](http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/Session.html#doWork%28org.hibernate.jdbc.Work%29) API：

```
session.doWork(
        new Work() {
            public void execute(Connection connection) throws SQLException 
            { 
                doSomething(connection); 
            }
        }
    ); 
```

另请参阅：[在 Hibernate 上不推荐使用 session.connection()？](https://stackoverflow.com/questions/3526556/session-connection-deprecated-on-hibernate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T09:10:15.487

我找到了以下解决方法来获取 Session 的连接而没有任何弃用。我很确定 Hibernate 的人不会允许这样做。

```
private static class WorkAround implements org.hibernate.jdbc.Work {
    private Connection conn = null;

    @Override
    public void execute(Connection conn) throws SQLException {
        this.conn = conn;
    }

    public Connection getConnection() {
        return conn;
    }

}

public static Connection getConnection(Session session) {
    WorkAround wrk = new WorkAround();
    session.doWork(wrk);
    return wrk.getConnection();
} 
```

我想在这里发布这个答案：[session.connection() deprecated on Hibernate?](https://stackoverflow.com/questions/3526556/session-connection-deprecated-on-hibernate) ，但我看到我不允许这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-01T05:55:07.713

您可以使用 org.hibernate.internal.SessionImpl；

```
import org.hibernate.internal.SessionImpl;
public static class WorkAround {
    public Connection getConnection(Session session){
            SessionImpl sessionImpl = (SessionImpl) session;
            return session.connection()
    }
} 
```

# sql-server-2008-r2 - Sharing temp table to other connection in the same stored procedure

> ID：15217986
> 
> 赞同：0
> 
> 时间：2013-03-05T07:21:22.863
> 
> 标签：sql-server-2008-r2

I have a stored procedure which does the following:

1.  Create a temporary table (`#tmp1`) from a `SELECT.. INTO.. FROM..` syntax.

2.  Build a querystring and execute it using `EXEC(@STR1)`. The querystring also do a query to `#tmp1`.

The reason why the querystring is built on a string variable is because there are some condition in forming the query.

The problem now is because the 2nd query can't access `#tmp1` since it's on different connection. I can create a global temporary table and drop it upon completion but am concerned on the implication when multiple users are triggering the stored procedure at the same time.

Appreciate ideas or workaround for this issue. Thank you in advance.

# iphone - iOS 4 中的 UITabBar 自定义

> ID：15217989
> 
> 赞同：1
> 
> 时间：2013-03-05T07:21:41.300
> 
> 标签：iphone, ios4, uitabbarcontroller, uitabbar, uitabbaritem

嗨，我正在自定义标签栏中开发，我的部署目标是 iOS4

![在此处输入图像描述](../Images/60d0f0ea46fc1c32c001881516ec58bf.png)

在 iOS5 明智的一切都很好。

在 iOS4 明智地不工作

代码片段

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tabBack.png"]];

if ([[[UIDevice currentDevice] systemVersion] floatValue] > 4.9) {
    //iOS 5
    [self.tabBarController.tabBar insertSubview:imageView atIndex:1];
   self.tabBarController.tabBar.selectionIndicatorImage =[UIImage     imageNamed:@"red_Back.png"];
    [[UITabBar appearance] setSelectedImageTintColor:[UIColor whiteColor]];

}
else {
    //iOS 4
    [self.tabBarController.tabBar insertSubview:imageView atIndex:0];
} 
```

我尝试了一些代码

1) [有没有办法为 UITabBarItem 使用自定义选择的图像？](https://stackoverflow.com/questions/3461867/is-there-a-way-to-use-a-custom-selected-image-for-uitabbaritem)

2) [为 iPhone 应用程序创建自定义 UITabBar 真的很酷吗？](https://stackoverflow.com/questions/4640588/really-cool-way-to-create-custom-uitabbar-for-iphone-app)

对那些代码示例没有影响

我尝试了很多，有什么方法可以在 iOS4 中完成这项任务？

有什么捷径吗？

任何教程或示例请

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:25:36.133

**最初检查屏幕尺寸**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    NSInteger tabbarHeight;
    CGRect Bounds = [[UIScreen mainScreen] bounds];
    if (Bounds.size.height == 568) {
        // code for 4-inch screen
        tabbarHeight = 519;
              } else {
        // code for 3.5-inch screen
        tabbarHeight = 431;
     }

    UITabBarController *tabBarController = [[UITabBarController alloc]init];
    tabBarController.selectedIndex=0;
    tabBarController.delegate=self;
    img = [[UIImageView alloc]init];
    img.image=[UIImage imageNamed:@"Tabimage.png"];
    img.frame=CGRectMake(0,tabbarHeight, 320, 49);         
    [self.tabBarController.view addSubview:img];    
    tabBarController.viewControllers = @[homeNavigationController,profileNavigationControler,notificationNavigationController,newsNavigationController,aboutUsNavigationController];
     self.window.rootViewController = self.tabBarController;    
    [self.window makeKeyAndVisible];
    return YES;
 }

- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    NSUInteger index=[[tabBarController viewControllers] indexOfObject:viewController];
    switch (index) {
        case 0:
            self.img.image=[UIImage imageNamed:@"Tabone.png"];
            break;
        case 1:
            self.img.image=[UIImage imageNamed:@"Tabtwo.png"];
            break;
        case 2:
            self.img.image=[UIImage imageNamed:@"Tabthree.png"];
            break;
        case 3:
            self.img.image=[UIImage imageNamed:@"Tabfour.png"];
            break;
        case 4:
            self.img.image=[UIImage imageNamed:@"Tabfive.png"];
            break;
        default:
            break;
    }
    return YES;
 } 
```

# jenkins - how to let the slave to upload the build file to another remote server?

> ID：15217990
> 
> 赞同：1
> 
> 时间：2013-03-05T07:21:43.193
> 
> 标签：jenkins, scp, jenkins-plugins

I use Jenkins to trigger a slave to make a build,after the build finished,I want the slave to copy the build file to a master machine.I know there are scp plugin in the Jenkins,but is it work for the slave? how to configure it? if this plugin doesn't work,is there any other solution?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:58:34.207

如果您将文件标记为要在构建后步骤中存档的工件，那么它将被流式传输回主服务器。

# eclipse - Eclispe启动服务器成功，但是在Tomcat的Webapps中找不到项目

> ID：15217993
> 
> 赞同：0
> 
> 时间：2013-03-05T07:21:50.670
> 
> 标签：eclipse, web-applications, tomcat7

我想使用 Tomcat 7.0 和 Eclipse 4.X 进行一些编码，但遇到了一些麻烦。当我将项目添加到 tomcat 时，它会成功启动，但是我发现 Tomcat 的 Web 应用程序甚至对我刚刚启动的项目也没有显示任何内容。

当我在浏览器中输入 URL 以访问它时，该页面似乎运行正常。

我非常确定 Tomcat 路径配置没有问题。它 Windows->preferences->Tomcat(坐tomcae home和配置文件，tomcat home作为你的tomcat安装路径)

现在我想查看我在 tomcat 的 Web 应用程序中启动的所有项目，如何配置 Eclipse 或 Tomcat 来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:34:54.683

你看不到你创建的项目，你看不到你是否没有提供正确的**tomcat** 路径，

实际上，当 Eclipse 开始时，它通常会询问路径，在您选择的任何文件夹中，项目都将部署在那里，

Tomcat 是一个服务器只有 eclipse 添加它来运行项目，除了它在**eclipse**和**tomcat**之间**没有连接**。

 ****如果您想使用 tomcat **Web 应用程序**部署您的项目，您可以使用**命令提示符**本身。****

# jquery - 在单个元素中具有多个类的 jQuery 复杂选择器

> ID：15217994
> 
> 赞同：1
> 
> 时间：2013-03-05T07:21:53.453
> 
> 标签：jquery

我在使用 jquery 将块包裹在标签周围时遇到了一些问题，我认为我遇到的最大问题是 jquery 选择器，但我对 jquery 很陌生，所以我不确定问题到底出在哪里。

我有以下html

```
<section class="flexslider shop">
    <ul class="flex-direction-nav">
        <li>
            <a href="#" class="flex-prev">Previous</a>
        </li>
        <li>
            <a href="#" class="flex-next">Next</a>
        </li>
    </ul>
</section> 
```

我需要使用 jquery 在每个标签周围包装一个标签，并在两个现有标签之间插入一个新的 li 元素，jquery 进行修改后的最终结果应该如下：

```
<section class="flexslider shop">
    <ul class="flex-direction-nav">
        <li>
            <i class="icon-circle-arrow-left">
                <a href="#" class="flex-prev">Previous</a>
            </i>
        </li>
        <li>
            <i class="icon-zoom-in">
                <a href="#" id="nav-zoom-in"></a>
            </i>
        </li>
        <li>
            <i class="icon-circle-arrow-right">
                <a href="#" class="flex-next">Next</a>
            </i>
        </li>
    </ul>
</section> 
```

非常感谢您提供的任何帮助。我搜索了几个小时，但无法弄清楚如何让这种复杂性的 jquery 工作。此外，所有这些都需要在页面完全加载后发生，但除此之外没有其他触发器。

* * *

更新

我现在在你们中的一些人的帮助下让它半工作，这是我到目前为止所拥有的，它应该可以工作，问题是 jquery 中的选择器不够具体，我无法修改 html是由一个 jquery 插件生成的，所以我试图通过使用这个你们都在帮助我的小脚本来修改那个插件，到目前为止我所拥有的如下：

有问题的脚本生成以下 html：

```
 <ul class="flex-direction-nav">
     <li>
         <a href="#" class="flex-prev">Previous</a>
     </li>
     <li>
         <a href="#" class="flex-next">Next</a>
     </li>
 </ul> 
```

我添加了一个带有类的标签，以便通过 jquery 定位它，所以 html 现在看起来如下：

```
<section class="flexslider shop">
    <ul class="flex-direction-nav">
        <li>
            <a href="#" class="flex-prev">Previous</a>
        </li>
        <li>
            <a href="#" class="flex-next">Next</a>
        </li>
    </ul>
</section> 
```

我现在使用的 jquery 如下，它根据需要执行，但不够具体，因为我在页面上有多个滑块。

```
$(window).load(function() {
    $(".flex-direction-nav li:last").before('<li><i class="icon-zoom-in"><a href="#" id="nav-zoom-in"></a></i></li>');
    $(".flex-prev").wrap('<i class="icon-circle-arrow-left" />');
    $(".flex-next").wrap('<i class="icon-circle-arrow-right" />');
}); 
```

这现在正在生成正确的 html 输出并按预期工作，但是我需要它专门针对 section class="flexslider shop" 内部的 ul class="flex-direction-nav" 因为还有更多页面上超过一个 ul class="flex-direction-nav"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:49:54.977

对于初学者，我不建议使用`<i>`标签。它告诉浏览器某些东西*应该是什么样子*，而不是它*是*什么。`<i>`是表象的，不是语义的。`<em>`标签（强调）更好（语义），但在您的情况下，您可能应该只添加到`.flexslider li a{font-style: italic}`您的 CSS 中。

但是让我们假设额外的标签是必要的，这样元素就可以被无法更改源代码的插件找到。

* * *

> 我需要它专门针对部分 class="flexslider shop" 内部的 ul class="flex-direction-nav"

这应该可以从您的示例中获得所需的输出：

```
$("section.flexslider.shop ul.flex-direction-nav").each(function(){
  $(".flex-prev", this).wrap('<i class="icon-circle-arrow-left">')
  $(".flex-next", this).wrap('<i class="icon-circle-arrow-right">')
  .before(
    '<li><i class="icon-zoom-in"><a href="#" id="nav-zoom-in"></a></i></li>
  ')
)}; 
```

我已经使用`each`了这样选择器`section.flexslider.shop ul.flex-direction-nav`只被查询一次。这减少了所需的代码量，并且（希望）提高了性能。作为第二个参数传递`this`给 jQuery 会限制前一个选择器的范围。

另一种方法是直接使用`section.flexslider.shop ul.flex-direction-nav .flex-prev`和`section.flexslider.shop ul.flex-direction-nav .flex-next`作为两个选择器，而不是`section.flexslider.shop ul.flex-direction-nav`先选择。但是，请注意所需的代码量。还要注意一个不太具体的选择器（比如，`.flex-direction-nav ...`）可能就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:38:32.767

请检查 [http://api.jquery.com/insertBefore/](http://api.jquery.com/insertBefore/) & [http://api.jquery.com/insertAfter/](http://api.jquery.com/insertAfter/)

```
$('<li><i class="icon-zoom-in"><a href="#" id="nav-zoom-in"></a></i></li>').insertBefore('.flex-next').parent();

$('<i class="icon-circle-arrow-left">').insertBefore('.flex-prev');

$('</i>').insertAfter('.flex-prev');

$('<i class="icon-circle-arrow-right">').insertBefore('.flex-next');$('</i>').insertAfter('.flex-next'); 
```

它会解决你的问题。

但是必须考虑一件事，您可以通过使用 addClass 和 removeClass 来实现这个目标。这取决于您的选择。希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:41:19.520

你在寻找这样的东西吗？

```
var zoom = $('<li><i class="icon-zoom-in"><a href="#" id="nav-zoom-in"></a></i></li>');

$('.flex-next').wrap('<i class="icon-circle-arrow-right" />');
$('.flex-prev').wrap('<i class="icon-circle-arrow-left" />').parents('li').after(zoom); 
```

[现场演示](http://jsfiddle.net/duukU/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:49:45.920

这样做：

```
$(document).ready(function(){
    $(".flexslider .flex-direction-nav li:last").before('<li><i class="icon-zoom-in"><a href="#" id="nav-zoom-in"></a></i></li>');
    $(".flexslider .flex-direction-nav li a.flex-prev").wrap('<i class="icon-circle-arrow-left" />');
    $(".flexslider .flex-direction-nav li a.flex-next").wrap('<i class="icon-circle-arrow-right" />');
}); 
```

# jquery - Multiple declarations together in Jquery

> ID：15217995
> 
> 赞同：0
> 
> 时间：2013-03-05T07:22:01.320
> 
> 标签：jquery, jquery-ui

I am not familiar with jQuery so very much possible that I am overlooking something simple.

Is there a way to define these objects together, instead of 3 different instances?

```
 $( "#accordion") .accordion({
          active: false,
          collapsible: true,
          icons: icons,
          autoHeight: false,
          heightStyle: "content"
      });

      $( "#accordion_fulfillment") .accordion({
          active: false,
          collapsible: true,
          icons: icons,
          autoHeight: false,
          heightStyle: "content"
      });

      $( "#accordion_warehouse") .accordion({
          active: false,
          collapsible: true,
          icons: icons,
          autoHeight: false,
          heightStyle: "content"
      }); 
```

I have tried doing the obvious but it's not working $( "#accordion", "#accordion_fulfillment", "#accordion_warehouse") .accordion({....})

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:29:35.647

您可以使用选择器尝试这种方式`attribute`：

```
$( "[id^='accordion']") .accordion({ // <----this selects all ids which starts 
      active: false,                 //      with accordion
      collapsible: true,
      icons: icons,
      autoHeight: false,
      heightStyle: "content"
  }); 
```

在这里阅读更多[**jQuery("[attribute^='value']")**](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:25:46.187

关！

```
$( "#accordion, #accordion_fulfillment, #accordion_warehouse") .accordion({....}) 
```

# jquery - Radiobutton group not working in DataTable Jquery

> ID：15217996
> 
> 赞同：1
> 
> 时间：2013-03-05T07:22:02.937
> 
> 标签：jquery, jquery-ui

I generate 20rows dynamically, while using datatable jquery for pagination , sorting and searching.

My Issue : I have a radiobutton on each row with same name (Radio button group). If i select one radiobutton on page1 and navigate to second page And also i select one radiobutton on second page and back to page1\. The selection is still available. But as per the radiobutton group only one button should be enable on those two pages... right?

# iphone - 想要在某个位置创建一个来自上部的视图

> ID：15217998
> 
> 赞同：0
> 
> 时间：2013-03-05T07:22:06.183
> 
> 标签：iphone, ios, uiview

我创建了在 position 显示的 View `(0, 0, 320, 100)`。现在我想让这个视图来自上部并设置在给定的位置，我已经尝试过了。

```
CATransition *transition = [CATransition animation];
     transition.duration = 1.0;
     transition.type = kCATransitionFromTop; //choose your animation
     [bGView.layer addAnimation:transition forKey:nil];
     [self.view addSubview:bGView]; 
```

但这对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:28:12.420

您可以在动画块中调整视图的帧首先将视图添加为子视图

```
 [self.view addSubview:bGView]; 
```

并在可见屏幕区域之外给它一个框架

```
 bGView.frame = CGRectMake(0,-150,320,100); 
```

然后触发动画以使其从上方

```
[UIView animateWithDuration:2.0
                animations:^{ 
                    bGView.frame = CGRectMake(0,0,320,100);
                } 
                completion:^(BOOL finished){
                    ;
                }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:28:38.753

一切都好。除了应该在超级视图中添加动画之外，它应该是这样的：

```
[self.view.layer addAnimation:transition forKey:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:29:40.003

您可以尝试查看块动画

```
[UIView animateWithDuration:0.7f animations:^{

        bGView.frame = CGRectMake(0.0f, 200.0f, 320.0f, 100.0f);//Some frame

}]; 
```