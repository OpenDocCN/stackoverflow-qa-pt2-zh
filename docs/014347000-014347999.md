# StackOverflow 问答 14347000-14347999

# android - java.lang.NoSuchMethodError: java.lang.String.isEmpty

> ID：14347001
> 
> 赞同：3
> 
> 时间：2013-01-15T21:11:22.560
> 
> 标签：android, supercsv

我正在使用一个名为 superCSV 的外部库，而这个库显然使用了 isEmpty。在 SO 上搜索后，我发现这个方法是在 2.3 中引入的，确实我得到的崩溃是从 2.2

无论如何我可以在仍然使用库的同时修复它吗？也许提供 isEmpty 的实现？或者以某种方式让它不崩溃？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:28:09.517

您使用的是最新版本的 SuperCSV 吗？[SuperCSV 2.0.1（及更高版本）通过恢复 Java 5 兼容性](http://sourceforge.net/p/supercsv/discussion/718794/thread/18386739/)
已修复此问题。

你可以在这里看到相关的提交：http: [//sourceforge.net/p/supercsv/code/264/](http://sourceforge.net/p/supercsv/code/264/)

现在不是调用`java.lang.String.isEmpty()`库，而是对`String.length() == 0`. 那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:16:10.220

如果您有库的源代码，请将调用从 isEmpty() 更改为 equals("")。

如果您没有库的来源，则不是。

# r - 我可以在 R 中为 Cox 比例风险模型执行所有子集变量选择吗？

> ID：14347004
> 
> 赞同：5
> 
> 时间：2013-01-15T21:11:40.563
> 
> 标签：r, survival-analysis, cox-regression

在为我的数据选择顶级 Cox 比例危险模型时，我正在尝试使用类似于（如果不是实际上）程序 R 中的 jumps 包中的 regsubsets 的函数。这可能吗？如果是这样，功能是否已经存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:43:01.260

我猜您已经熟悉以下内容...如果您使用[AIC](http://en.wikipedia.org/wiki/Akaike_information_criterion)作为“顶级模特”的标准，那么这将是一个合理的起点：

```
library(survival)
data(colon)
c1 <- coxph(Surv(time=time, event=status) ~
     as.factor(extent) + age + sex, data=colon)
step(c1) 
```

如果您有缺失值 ( `NA`)，请注意这一点。当然，这种方法可能找不到更好的模型，但是如果有少量的潜在预测变量，您就不太可能错过它。上述注意事项（感谢@DWin）关于使用数值方法，其中知情意见可能更可靠。

# php - 在 DDD 中，为什么不使用数组来存储实体集合呢？

> ID：14347005
> 
> 赞同：2
> 
> 时间：2013-01-15T21:11:46.960
> 
> 标签：php, domain-driven-design

我在所有 DDD 示例中都看到，集合是作为类实现的，例如在 PHPMaster 网站上：

```
<?php
namespace Model\Collection;
use Mapper\UserCollectionInterface,
    Model\UserInterface;

class UserCollection implements UserCollectionInterface
{
    protected $users = array();

    public function add(UserInterface $user) {
        $this->offsetSet($user);
    }

    public function remove(UserInterface $user) {
        $this->offsetUnset($user);
    }

    public function get($key) {
        return $this->offsetGet($key);
    }

    public function exists($key) {
        return $this->offsetExists($key);
    }

    public function clear() {
        $this->users = array();
    }

    public function toArray() {
        return $this->users;
    }

    public function count() {
        return count($this->users);
    }

    public function offsetSet($key, $value) {
        if (!$value instanceof UserInterface) {
            throw new \InvalidArgumentException(
                "Could not add the user to the collection.");
        }
        if (!isset($key)) {
            $this->users[] = $value;
        }
        else {
            $this->users[$key] = $value;
        }
    }

    public function offsetUnset($key) {
        if ($key instanceof UserInterface) {
            $this->users = array_filter($this->users,
                function ($v) use ($key) {
                    return $v !== $key;
                });
        }
        else if (isset($this->users[$key])) {
            unset($this->users[$key]);
        }
    }

    public function offsetGet($key) {
        if (isset($this->users[$key])) {
            return $this->users[$key];
        }
    }

    public function offsetExists($key) {
        return ($key instanceof UserInterface)
            ? array_search($key, $this->users)
            : isset($this->users[$key]);
    }

    public function getIterator() {
        return new \ArrayIterator($this->users);
    }
} 
```

和界面：

```
<?php
namespace Mapper;
use Model\UserInterface;

interface UserCollectionInterface extends \Countable, \ArrayAccess, \IteratorAggregate 
{
    public function add(UserInterface $user);
    public function remove(UserInterface $user);
    public function get($key);
    public function exists($key);
    public function clear();
    public function toArray();
} 
```

他们为什么不只使用一个简单的数组？使用给定的实现有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:40:33.127

> 使用给定的实现有什么好处？

您可以通过其他行为轻松地增强 UserCollection，例如在添加或删除新用户时做出反应（例如观察者模式）。使用数组，必须将这样的逻辑分散到各处，而使用类时，您可以将这个逻辑放在一个地方并在那里控制它。它也更具可测试性。

您还可以包含一些不变量检查代码，以确保 UserCollection 概念始终遵守域约束。

即使似乎没有立即需要约束或额外的行为，这些可能会在项目生命的后期出现，并且在不是为可扩展性而设计的代码库中实现它们会有些困难。

# android - 单击按钮停止记录加速度计数据

> ID：14347007
> 
> 赞同：1
> 
> 时间：2013-01-15T21:11:51.497
> 
> 标签：android, accelerometer

我编写了以下几行，通过单击按钮将加速度计数据记录在文件中

```
startButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            final SensorEventListener mySensorEventListener = new SensorEventListener() { 
                public void onSensorChanged(SensorEvent sensorEvent) {
                if (sensorEvent.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {

                xAxis_lateralA = sensorEvent.values[0]; 
                yAxis_longitudinalA = sensorEvent.values[1]; 
                zAxis_verticalA = sensorEvent.values[2]; // TODO apply the acceleration changes to your application.
                textView.append("\nACC_x = "+ xAxis_lateralA + ", ACC_y = "+yAxis_longitudinalA+ ", ACC_z = " + zAxis_verticalA);
                acc+="\n"+xAxis_lateralA + ", "+ yAxis_longitudinalA+", "+zAxis_verticalA;

                try {
                    File myFile = new File("/sdcard/acc.txt");
                    myFile.createNewFile();
                    FileOutputStream fOut = new FileOutputStream(myFile);
                    OutputStreamWriter myOutWriter = 
                                            new OutputStreamWriter(fOut);
                    myOutWriter.append(acc);
                    myOutWriter.close();
                    fOut.close();
                    Toast.makeText(getBaseContext(),
                            "Done writing SD 'acc.txt'",
                            Toast.LENGTH_SHORT).show();
                } catch (Exception e) {
                    Toast.makeText(getBaseContext(), e.getMessage(),
                            Toast.LENGTH_SHORT).show();
                }

                }
            }
                @Override
                public void onAccuracyChanged(Sensor sensor, int accuracy) {
                    // TODO Auto-generated method stub

                }
            };
            // write on SD card file data in the text box
            sm = (SensorManager)getSystemService(Context.SENSOR_SERVICE); 
            int sensorType = Sensor.TYPE_ACCELEROMETER; 
            sm.registerListener(mySensorEventListener,sm.getDefaultSensor(sensorType), SensorManager.SENSOR_DELAY_NORMAL);

        }// onClick
        }); 
```

现在我希望它通过单击另一个按钮来停止记录数据。例如 -

```
stopButton.setOnClickListener(new OnClickListener() {

     public void onClick(View v) {
        int sensorType = Sensor.TYPE_ACCELEROMETER; 
        sm.unregisterListener(listener, sensor)
     }// onClick
  }); // btnstopButton
} 
```

想使用`unregisterListener`，但大多数时候它说不推荐使用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:16:02.917

该[文档](http://developer.android.com/reference/android/hardware/SensorManager.html#unregisterListener%28android.hardware.SensorListener%29)说，`SensorListener`不推荐使用与关联的方法，`SensorEventListener`而是使用。您的代码片段不应引发弃用警告，但如果您使用`SensorListener`，它会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:22:30.937

我想你想在 onClick() 方法之外声明你的 SensorEventListener 对象，这样你就可以在另一个 onClick() 方法中取消注册它：

```
sm.unregisterListener(mySensorEventListener, sensorType); 
```

这就是您要根据[文档](http://developer.android.com/reference/android/hardware/SensorManager.html#unregisterListener%28android.hardware.SensorListener,%20int%29)使用的方法签名。

# vb.net - ReportViewer 中的 IIF 语句返回 False

> ID：14347014
> 
> 赞同：0
> 
> 时间：2013-01-15T21:12:23.080
> 
> 标签：vb.net, report-viewer2010

好的，所以我试图在reportviewer 的这个IIF 语句中做数学运算。但是，它所做的只是在我的字段中返回 FALSE。我可以用 IIF 语句或什么来做数学吗？

```
=IIF(
     UCase(Fields!Tax.Value) = "YES", 
     Variables!DeptTotal.Value =+(Fields!TotalPriceWithoutTax.Value * (1 + Parameters!Tax.Value)), 
     Variables!DeptTotal.Value =+ (Fields!TotalPriceWithoutTax.Value)
     ) 
```

有任何想法吗？提前致谢。

编辑：

好的伙计们，

我什至做了一个自定义代码，它仍然返回错误。

```
Public Function Taxable(Answer AS String, DepartTotal AS Decimal, TotalWithoutTax AS Decimal, Tax AS Decimal) AS Decimal

    If UCase(Answer) = "YES" Then

         DepartTotal += TotalWithoutTax * Tax 

    Else

       DepartTotal +=  TotalWithoutTax

    End If

    Return DepartTotal

End Function 
```

还有其他建议吗？

再次感谢。

编辑：

这是我的应税函数调用：

```
=Code.Taxable(Tax, DepartTotal, TotalWithoutTax, txtTax.value) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:17:46.480

UCase(Fields!Tax.Value) = "YES", Tax.value 可能返回 false 和 true 或 0 和 1 ，再次测试，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:22:14.763

试试这个：更改`=+`为`+=`

改变

```
Variables!DeptTotal.Value =+(Fields!TotalPriceWithoutTax.Value * (1 + Parameters!Tax.Value)) 
```

到

```
Variables!DeptTotal.Value += (Fields!TotalPriceWithoutTax.Value * (1 + Parameters!Tax.Value)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:28:04.107

这是修复：

功能：

```
Public Function Taxable(Answer AS String, TotalWithoutTax AS Decimal, Tax AS Decimal) AS Decimal

       Dim total AS Decimal = 0

       If UCase(Answer) = "YES" Then

             total = TotalWithoutTax *  (1 + Tax)

        Else
             total = TotalWithoutTax

        End If

        Return total

End Function 
```

电话：

```
Code.Taxable(Fields!Tax.Value, Sum(Fields!TotalPriceWithoutTax.Value), Parameters!Tax.Value) 
```

# c# - 外来字符；语言翻译代理应用程序

> ID：14347015
> 
> 赞同：0
> 
> 时间：2013-01-15T21:12:30.593
> 
> 标签：c#

我正在开发一个 C# 应用程序，该应用程序将 http 请求发送到将挪威语转换为英语的语言翻译服务器，反之亦然。我得到的翻译结果表明某些挪威字符（如“Ø”）存在乱码。单步执行代码，我发现这个字符在 HttpWebRequest 类的 URI 成员中出现乱码，所以我明确指定了 URI（而不是仅仅依靠 HTTPWebRequest 类来为我做这件事）。但是我的翻译结果仍然是乱码。我怀疑 StreamReader 现在是罪魁祸首，并在挪威机器上尝试了 UTF8、Unicode、ASCII 编码，但无济于事。请指教。先感谢您。该函数的代码粘贴在下面。

其他细节：输入内容示例：følger;
翻译结果示例： ? 格;
输入和输出在 unicode 文本文件中。

```
 public string Translate(string requestquery)
    {
        string translatedresult = "";
        Uri uri = new Uri(requestquery, true); //this appears to have solved the garbled URI

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        string charSet = response.CharacterSet;

        Stream ReceiveStream = response.GetResponseStream(); 

        //I've tried all sorts of encoding here and even changing the machine locale
        string contentEncoding = response.ContentEncoding; 
        StreamReader sr = new StreamReader(ReceiveStream, Encoding.UTF8, false);

        translatedresult = sr.ReadToEnd();
        sr.Close();

        return translatedresult;
    } 
```

# ios - 如何旋转 CGImageRef？

> ID：14347019
> 
> 赞同：0
> 
> 时间：2013-01-15T21:12:45.403
> 
> 标签：ios, objective-c

当我的 iPad 纵向放置时，我有一个`UIImage`看起来方向正确的东西，但是当我得到`CGImageRef`与之关联的时候，它`CGImageRef`逆时针旋转了 90 度。经过一番谷歌搜索，我了解到这是`CGImageRef`因为`UIImage`. 我需要查看和修改 中的一些像素`CGImageRef`，我目前正在通过直接访问 rawData 变量（图像是 UIImage*）来执行此操作：

```
CGImageRef imageRef = [image CGImage];

CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB(); //maybe make ...Gray();
unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
CGContextRef context = CGBitmapContextCreate(rawData, width, height, bitsPerComponent, bytesPerRow, colorSpaceRef, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef); 
```

但是，为了让我正确修改存储在 rawData 中的像素数据，我需要 CGImageRef 处于正确的方向。如何`CGImageRef`顺时针旋转 90 度然后访问 rawData（像素信息）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:32:17.920

尝试这个 ：

```
CGImageRef imageRef = [sourceImage CGImage];
CGColorSpaceRef colorSpaceInfo = CGImageGetColorSpace(imageRef);

CGContextRef bitmap;

if (sourceImage.imageOrientation == UIImageOrientationUp || sourceImage.imageOrientation == UIImageOrientationDown) {
    bitmap = CGBitmapContextCreate(NULL, targetWidth, targetHeight, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, bitmapInfo);

} else {
    bitmap = CGBitmapContextCreate(NULL, targetHeight, targetWidth, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, bitmapInfo);

}   

if (sourceImage.imageOrientation == UIImageOrientationLeft) {
    CGContextRotateCTM (bitmap, radians(90));
    CGContextTranslateCTM (bitmap, 0, -targetHeight);

} else if (sourceImage.imageOrientation == UIImageOrientationRight) {
    CGContextRotateCTM (bitmap, radians(-90));
    CGContextTranslateCTM (bitmap, -targetWidth, 0);

} else if (sourceImage.imageOrientation == UIImageOrientationUp) {
    // NOTHING
} else if (sourceImage.imageOrientation == UIImageOrientationDown) {
    CGContextTranslateCTM (bitmap, targetWidth, targetHeight);
    CGContextRotateCTM (bitmap, radians(-180.));
}

CGContextDrawImage(bitmap, CGRectMake(0, 0, targetWidth, targetHeight), imageRef);
CGImageRef ref = CGBitmapContextCreateImage(bitmap); 
```

# r - 将因子级别转换为列表以用于 R Shiny 中的动态输入

> ID：14347020
> 
> 赞同：3
> 
> 时间：2013-01-15T21:12:46.730
> 
> 标签：r, shiny

我正在尝试将因子级别输出转换为列表，以便可以为 R Shiny 中的 SelectInput 函数创建动态输入。

基本上，我导入了一个 CSV 文件，并希望通过使用 CSV 文件第一列中的“类别”（级别）在 SelectInput 中创建下拉列表。

所以，在 UI.RI 中有：

```
uiOutput("categoryPicker") 
```

在 server.RI 中有：

```
datatwo <- read.csv(file="data2.csv",head=TRUE,sep=",") 
```

然后，在“shinyServer(function(input, output)”部分（顺便说一下，“category”是 CSV 文件中的标题）：

```
output$categoryPicker <- reactiveUI(function() {
categories <- levels(datatwo$category)
selectInput("category", "Category:", categories)
}) 
```

这不起作用，给我以下错误：

> 选择错误[[choiceName]]：下标越界

str(categories) 输出如下：

> 字符 [1:22] “” “Cat1” “Cat2” “Cat3” “Cat4” “Cat5” ...

如果我执行“list(levels(datatwo$category)”，它只会给我一个下拉列表，即整个 str(categories) 输出：

> 1 $ 列表：chr [1:22] "" "Cat1" "Cat2" "Cat3" ...

我试图以以下形式得到它（这样当 str(x) 完成时，输出将是）：

> X 列表
> $ Cat1: chr "Cat1"
> $ Cat2: chr "Cat2"
> $ Cat3: chr "Cat3"
> ...

但我不知道该怎么做。我也不确定为什么第一项是“”[空字符串]。我对 R 和 Shiny 很陌生，所以请原谅我的无知，但我们将不胜感激任何帮助。

顺便说一句，我一直在学习本教程： [http ://rstudio.github.com/shiny/tutorial/#dynamic-ui](http://rstudio.github.com/shiny/tutorial/#dynamic-ui)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:45:55.913

我不知道列表中的名字是否重要，但这应该会给你你想要的：

```
setNames(as.list(categories), categories) 
```

# asp.net - 使用 Linq 检索从数据表中提取的行的行索引

> ID：14347022
> 
> 赞同：0
> 
> 时间：2013-01-15T21:12:50.490
> 
> 标签：asp.net, vb.net, linq

我正在使用以下查询从内存中的数据表中提取一行。

```
Dim results = _
   From myRow In exceldt.AsEnumerable() _
   Where myRow.Field(Of String)("Serial Number") = Row.Item("Serial Number") _
   Select myRow

resultrow = results.CopyToDataTable.Rows(0) 
```

当它是 exceldt 的一部分时，我需要获取结果行的索引。我似乎在这方面找不到任何东西。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:24:01.460

我不在 VB.net 中工作，所以请原谅我的代码，但您可以通过以下方式获得投影的索引：

```
Dim result = exceldt.AsEnumerable() .Select (Function(item, index) _
  New With { .Index = index, .SerialNumber = item }).ToList 
```

我无法在 VB 中提供更多信息，但这个快速示例确实可以作为控制台应用程序使用。您可以看到选择/投影如何捕获索引和项目。在过滤（在哪里）您的初始枚举之前，您需要合并类似的逻辑。

```
Dim names = {"Andy", "Tom", "Fred", "Sally"}

Dim results = names _
    .Select(Function(item, index) New With {.Index = index, .Name = item}) _
    .OrderBy(Function(item) item.Name)

For Each item In results
    Console.WriteLine("{0} - {1}", item.Index, item.Name)
Next 
```

结果

```
0 - Andy
2 - Fred
3 - Sally
1 - Tom 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:17:36.863

这应该可以解决问题

```
int index = exceldt.Rows.IndexOf(results); 
```

# google-app-engine - 数据建模 Appengine

> ID：14347023
> 
> 赞同：0
> 
> 时间：2013-01-15T21:13:02.627
> 
> 标签：google-app-engine, data-modeling

目前我有 3 个数据存储类

用户活动研讨会

每个研讨会都引用一个事件，每个事件只有四个研讨会

在用户类中，我有一个列表属性，我在其中引用每个用户所属的研讨会的键。

我希望每个用户只参加一个研讨会活动。

```
@classmethod
def event_attendance(self, user):
    workshop1 = self.workshops.filter('workshop_number =', 1).get(keys_only = True)
    users1 = User.all().filter('attendance =', workshop1.key()).fetch(149)
    if user in users1:
        return True
    else:
        workshop2 = self.workshops.filter('workshop_number =', 2).get(keys_only = True)
        users2 = User.all().filter('attendance =', workshop2.key()).fetch(149)
        if user in users2:
            return True
        else:
            workshop3 = self.workshops.filter('workshop_number =', 3).get(keys_only = True)
            users3 = User.all().filter('attendance =', workshop3.key()).fetch(149)
            if user in users3:
               return True
            else:
                workshop4 = self.workshops.filter('workshop_number =', 4).get(keys_only = True)
                users4 = User.all().filter('attendance =', workshop4.key()).fetch(149)
                if user in users4:
                    return True
                else:
                    return False 
```

在这里，我查看了一个活动，看看用户是否参加了任何一个研讨会，并使用下面的方法找出他们是否参加了这个活动的研讨会，以找到哪个。

```
@classmethod
def My_Event(self, user):
    workshop1 = self.workshops.filter('workshop_number =', 1).get(keys_only = True)
    users1 = User.all().filter('attendance =', workshop1.key()).fetch(149)
    if user in users1:
        return workshop1
    else:
        workshop2 = self.workshops.filter('workshop_number =', 2).get(keys_only = True)
        users2 = User.all().filter('attendance =', workshop2.key()).fetch(149)
        if user in users2:
            return workshop2
        else:
            workshop3 = self.workshops.filter('workshop_number =', 3).get(keys_only = True)
            users3 = User.all().filter('attendance =', workshop3.key()).fetch(149)
            if user in users3:
               return workshop3
            else:
                workshop4 = self.workshops.filter('workshop_number =', 4).get(keys_only = True)
                users4 = User.all().filter('attendance =', workshop4.key()).fetch(149)
                if user in users4:
                    return workshop4 
```

我对 appengine 很陌生，实际上对编程很陌生（主要是自学）

考虑到我必须以这种方式检查每个事件以查看是否附加了用户，这感觉非常昂贵，有没有办法用我当前的数据建模结构更有效地做到这一点，或者我应该改变它吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:30:14.360

首先，您使用@classmethod。确保这是您想要的（在这种情况下这看起来很奇怪）。其余的：在这两个函数中，你都有你的用户对象。为什么不直接获取该用户，检查其出席属性，然后只获取那里列出的研讨会？（如果根本需要获取研讨会，“def event_attendance”检查用户是否有一个非空的出席列表可能会起作用）

# forms - Angular 表单验证：当至少一个输入为 ng-invalid 和 ng-dirty 时 ng-show

> ID：14347024
> 
> 赞同：7
> 
> 时间：2013-01-15T21:13:06.993
> 
> 标签：forms, validation, angularjs

我在 Angular 部分中具有以下形式：

```
<form name="submit_entry_form" id="submit_entry_form" ng-submit="submit()" ng-controller="SubmitEntryFormCtrl" novalidate >
    <input type="text" name="first_name" ng-model="first_name" placeholder="First Name" required/><br />
    <input type="text" name="last_name" ng-model="last_name" placeholder="Last Name" required/><br />
    <input type="text" name="email" ng-model="email" placeholder="Email Address" required/><br />
    <input type="text" name="confirm_email" ng-model="confirm_email" placeholder="Confirm Email Address" required/><br />
    <span ng-show="submit_entry_form.$invalid">Error!</span>
    <input type="submit" id="submit" value="Submit" />
</form> 
```

我遇到的麻烦是底部的跨度显示“错误！”。我希望仅当输入之一是“ng-dirty”和“ng-invalid”时才显示。如上所述，错误将一直显示，直到表单完全有效。长期的解决方案是执行以下操作：

```
<span ng-show="submit_entry_form.first_name.$dirty && submit_entry_form.first_name.$invalid || submit_entry_form.last_name.$dirty && submit_entry_form.last_name.$invalid || submit_entry_form.email.$dirty && submit_entry_form.email.$invalid || submit_entry_form.confirm_email.$dirty && submit_entry_form.confirm_email.$invalid">Error!</span> 
```

这是丑陋的。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-15T21:16:14.173

### 方法 1：使用控制器设置的 $scope 上的函数。

因此，为了更好地了解您的问题，您希望*在表单上的任何字段同时为 $invalid 和 $dirty*时显示一条消息...

添加控制器方法：

```
app.controller('MainCtrl', function($scope) {

  $scope.anyDirtyAndInvalid = function (form){
    for(var prop in form) {
      if(form.hasOwnProperty(prop)) {
         if(form[prop].$dirty && form[prop].$invalid) {
           return true;
         }
      }
    }
    return false;
  };
}); 
```

并在您的 HTML 中：

```
<span ng-show="anyDirtyAndInvalid(submit_entry_form);">Error!</span> 
```

[这是一个演示它的plunker](http://plnkr.co/edit/j1xT4NUBhPZCgkyd0dBl)

综上所述，如果有人在您的表单中输入了数据，但数据不完整，那么表单本身*就是*无效的。所以我不确定这是最好的可用性。但它应该工作。

* * *

# 方法2：使用过滤器！（推荐的）

我现在推荐一个过滤器来处理这种事情......

以下过滤器与上面的过滤器相同，但对于 Angular、IMO 来说它是更好的做法。[也是个笨蛋。](http://plnkr.co/edit/53W89Qlgpa9hALcUIuSj?p=preview)

```
app.filter('anyInvalidDirtyFields', function () {
  return function(form) {
    for(var prop in form) {
      if(form.hasOwnProperty(prop)) {
        if(form[prop].$invalid && form[prop].$dirty) {
          return true; 
        }
      }
    }
    return false;
  };
}); 
```

```
<span ng-show="submit_entry_form | anyInvalidDirtyFields">Error!</span> 
```

# sharepoint - SharePoint：SP2013 Webpart 中的 DateTimeControl 崩溃

> ID：14347026
> 
> 赞同：0
> 
> 时间：2013-01-15T21:13:15.653
> 
> 标签：sharepoint, web-parts, sharepoint-2013

我在一个非常简单的 webpart 中实现了 SharePoint:DateTimeControl

```
<SharePoint:DateTimeControl ID="dtStartdate" runat="server" DateOnly="true" /> 
```

问题是当我单击控件时它会呈现异常

```
“/”应用程序中的服务器错误。
你调用的对象是空的。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

源错误：
在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：
[NullReferenceException：对象引用未设置为对象的实例。]
   Microsoft.SharePoint.Utilities.SPUtility.GetThemedImageUrl（字符串 originalUrl，字符串主题键）+199
   Microsoft.SharePoint.WebControls.DatePicker..ctor() +1460
   Microsoft.SharePoint.WebControls.SPDatePickerControl.InitDatePicker() +44
   Microsoft.SharePoint.WebControls.SPDatePickerControl.set_MinJDay（Int32 值）+25
   Microsoft.SharePoint.ApplicationPages.DatePickerFrame.Page_Load（对象发送者，EventArgs e）+1708
   System.EventHandler.Invoke（对象发送者，EventArgs e）+0
   System.Web.UI.Control.LoadRecursive() +94
   System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+2935

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929
```

![在此处输入图像描述](../Images/e6db6e30e9c746a1f3391a618baf8f50.png)

非常感谢任何解决此问题的建议或帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T13:27:17.317

我知道你问这个问题已经有一段时间了，但刚刚解决了一些非常相似的问题，我想我会分享我的（简单）解决方案。

**确保在 Web 应用程序的根目录下创建了网站集。**

我正在 http://webapp/sites/mysitecollection 中处理 Web 部件并出现上述错误。看着 http://webapp 给了我一个 404，所以我创建了一个根站点集合，现在我的站点集合中的日期选择器工作正常。

# struts2 - struts2中struts.xml中动态设置请求参数

> ID：14347028
> 
> 赞同：3
> 
> 时间：2013-01-15T21:13:24.383
> 
> 标签：struts2

我的动作课中有一些变量。

现在我想通过将这些变量值设置为请求参数来重定向到另一个操作。我怎么能做到这一点？

我正在尝试这样做：

```
<result type="redirect">myProfileShow?param1=${value}&param2={value2}</result> 
```

它不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-21T11:34:53.680

```
<result type="redirectAction">
    <param name="actionName">myProfileShow</action>
    <param name="param1">${value}</param>
    <param name="param2">${value2}</param>
</result> 
```

应在 Action 类中声明的位置`value`和位置。`value2`您还可以为`value`&设置硬编码值`value2`。

```
 <param name="param1">10</param>   <!--  param1 will be 10 --!>
    <param name="param2">15</param>   <!--  param2 will be 15 --!> 
```

# c++ - 读取一系列单词以将它们添加到向量中

> ID：14347033
> 
> 赞同：3
> 
> 时间：2013-01-15T21:13:39.460
> 
> 标签：c++, vector, cin

我最近买了一本[C++ Primer](https://rads.stackoverflow.com/amzn/click/com/0321714113)，但遇到了一个问题。我必须使用读取一系列单词`cin`并将值存储在`vector`. 在遇到异常问题后，我发现`while(cin >> words)`如果您期望无效输入会引发问题（如无限循环）：[Using cin to get user input](http://www.cplusplus.com/forum/articles/6046/)

```
int main()
{
    string words;
    vector<string> v;
    cout << "Enter words" << endl;
    while (cin >> words)
    {
        v.push_back(words);
    }
    for(auto b : v)
        cout << b << "  ";
    cout << endl;
    return 0;
} 
```

因此，我正在尝试找到解决此问题的方法。帮助 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:29:26.003

您提供的有关输入问题的链接有些不同。它指的是您何时期望用户输入特定值，但您可能无法读取该值（假设它是一个整数），因为输入了其他内容。在这种情况下，最好使用`getline`检索一整行输入然后将值解析出来。

在你的情况下，你只是在说话。当您从流中读取字符串时，它将为您提供所有连续的非空白字符。而且，暂时忽略标点符号，您可以将其称为“单词”。因此，当您谈论“无效输入”时，我不明白您的意思。循环将继续为您提供“单词”，直到流中没有任何单词，此时它将出错：

```
vector<string> words;
string word;
while( cin >> word ) words.push_back(word); 
```

但是，如果您希望用户在一行中输入所有单词并按回车键完成，那么您需要使用 getline：

```
// Get all words on one line
cout << "Enter words: " << flush;
string allwords;
getline( cin, allwords );

// Parse words into a vector
vector<string> words;
string word;
istringstream iss(allwords);
while( iss >> word ) words.push_back(word); 
```

或者你可以这样做：

```
cout << "Enter words, one per line (leave an empty line when done)\n";

vector<string> words;
string line;
while( getline(cin, line) )
{
    // Because of the word check that follows, you don't really need this...
    if( line.size() == 0 ) break;

    // Make sure it's actually a word.
    istringstream iss(line);
    string word;
    if( !(iss >> word) ) break;

    // If you want, you can check the characters and complain about non-alphabet
    // characters here...  But that's up to you.

    // Add word to vector
    words.push_back(word);
} 
```

# matlab - Matlab MATPOWER 长格式输出

> ID：14347037
> 
> 赞同：0
> 
> 时间：2013-01-15T21:13:49.070
> 
> 标签：matlab, long-integer, matpower

我一直在尝试使用 MATPOWER 对我拥有的网络进行潮流分析，但所有输出都只有 2 位小数。有没有办法将输出配置为长格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-30T16:01:46.393

# 特洛塔，

您可以修改屏幕上打印的小数位数或转发到输出文本文件。如果您浏览 printpf.m 文件，只需将所需的 %9.xf 更改为所需的小数位数，其中 x 是小数点后的位数。对于总线数据，可以在第 412 行以后找到这些数据。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T14:51:35.527

您无法更改 MATPOWER 漂亮打印输出中使用的小数位数，但所有结果都可以在 runpf() 或 runopf() 返回的结果结构中以全精度获得。您可以使用标准 Matlab 命令（例如 disp() 或 fprintf()）以您选择的任何精度显示这些结果。

# windows - 为什么我的设置命令没有存储任何内容？

> ID：14347038
> 
> 赞同：17
> 
> 时间：2013-01-15T21:13:50.570
> 
> 标签：windows, batch-file, cmd, delayedvariableexpansion

我稍后尝试访问 TOMCAT_VER 的值，但它显示为空字符串。

```
if exist "%_REALPATH%\tomcat-%TOMCAT_VER2%" (
  set CATALINA_HOME=%_REALPATH%\tomcat-%TOMCAT_VER2%
  set TOMCAT_VER=%TOMCAT_VER2%
  echo "%TOMCAT_VER%"
) else if exist "%TOMCAT_VER2%" (
  set CATALINA_HOME="%TOMCAT_VER2%"
  set TOMCAT_VER="%TOMCAT_VER2%"
  echo "%TOMCAT_VER%"
) 
```

为了进一步调试，我在设置位置的正下方插入了一个 echo 语句，但它似乎不起作用。禁用回显后，我可以看到显示这些变量的语句已设置，但我似乎无法将它们打印出来。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-15T21:19:35.877

您找到了 bbb （批量初学者错误），但不是变量为空，而是扩展没有按预期工作。

当解析一行或一个完整的括号块时，在执行代码之前完成百分比扩展。
但是要解决这个问题，您可以使用**延迟扩展**，这不会在解析时扩展，它只会在执行时扩展。

EnableDelayedExpansion**添加了一个额外的语法**来扩展变量：`!var!`.
百分比扩展`%var%`仍然可用，并且不会因延迟扩展而改变。
的延迟扩展`!var!`是**在执行表达式时**完成的，尽管**在解析的时刻**（完整的代码块）会在执行块中的任何命令之前`%var%`进行扩展。

 **```
setlocal EnableDelayedExpansion

if exist "!_REALPATH!\tomcat-!TOMCAT_VER2!" (
  set "CATALINA_HOME=!_REALPATH!\tomcat-!TOMCAT_VER2!"
  set "TOMCAT_VER=!TOMCAT_VER2!"
  echo !TOMCAT_VER!
) else if exist "!TOMCAT_VER2!" (
  set "CATALINA_HOME=!TOMCAT_VER2!"
  set "TOMCAT_VER=!TOMCAT_VER2!"
  echo !TOMCAT_VER!
) 
```**

# javascript - 防止引用 Object 的内置成员

> ID：14347039
> 
> 赞同：3
> 
> 时间：2013-01-15T21:13:50.473
> 
> 标签：javascript, firefox

创建新对象时，您可以引用[对象类](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)的任何成员。例如：

```
var obj = new Object();
obj["watch"];  //returns the watch() function of Object 
```

有没有办法覆盖这个默认行为，以便 obj["watch"] 返回 undefined ？请注意，我只在 Firefox 中看到这种行为

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:16:18.777

[从 EcmaScript 5.1 开始，您可以通过以下方式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)生成没有原型（也没有原型`Object.protoype`）的对象：

```
var empty = Object.create(null);
empty.watch; // undefined 
```

您将需要本机功能，使用的简单 polyfill`new`无法做到这一点。另请参阅[es5-shim 的此文档部分](https://github.com/kriskowal/es5-shim#shams)。

> 请注意，我只在 Firefox 中看到这种行为

那是因为[`watch`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/watch)是一个非标准的 FF 扩展。不过，您也应该能够在其他浏览器中获得[标准属性。](http://es5.github.com/#x15.2.4)

# c++ - Qt Signals：将动态分配参数的所有权传递给插槽？

> ID：14347041
> 
> 赞同：0
> 
> 时间：2013-01-15T21:13:52.230
> 
> 标签：c++, qt, lifecycle, signals-slots

我不知道如何准确地命名这个问题，所以这里是解释：

我有一个自定义小部件，它在完成编辑后使用从用户输入构建的自定义对象发出信号，例如

```
void GGActionEditor::finishEditing() {
  GGAction act;
  // Set up according to user input
  emit actionChanged(act);
} 
```

在这段代码中，连接到信号的接收器可以存储该对象的副本或以任何合适的方式处理它，而小部件可以忘记它。

但是当小部件可以从类层次结构中构建*不同类型*的对象时，如何处理这种情况呢？喜欢：

```
void GGActionEditor::finishEditing() {
  GGAction *pAct;
  // Create and set up according to user input, e.g.
  if (...) pAct = new GGSpecialAction;
  else pAct = new SimpleAction;
  emit actionChanged(pAct);
} 
```

处理对象生命周期这种情况的最佳解决方案是什么？小部件无法知道是否有任何接收者接管了 Action 对象。此外，如果连接了多个接收器，则它们都不知道是否有另一个对象接管了参数……
在“最佳”情况下，这可能会导致泄漏；但也可能导致参数被多次删除。

**更新：**
有关我的实际情况的更多信息，但是，我也对一般解决方案感兴趣：

传递的对象将由接收者存储并保存在应用程序的域模型中。该模型将负责稍后将其删除。
简单的解决方案是像上面描述的“简单”按值情况一样处理这种情况。但是，如果根本没有连接接收器，对象就会泄漏；并且不能 100% 保证只有 1 个接收器会这样做（在我的实际应用程序逻辑中，情况就是这样，但不能以这种方式检查或强制执行）。

我想出了一些可能的解决方案，并对任何评论或补充感兴趣：

1.  *只是希望它会成功*：
    假设将有 1 个接收器接管参数。这可能适用于我的应用程序，但我对此并不满意
2.  *使用共享指针*：
    正如 Eugene 在回答中所说，shared_ptr（或 QSharedPointer）会简化这一点。任何接收者和发送者都将使用共享指针，因此生命周期是自动管理的。但这迫使我的域模型也为每个拥有此类 Action 对象的类使用共享指针。这不适合我的模型，因为这些类应该聚合动作。共享指针不适合持有对“属于”对象的对象的引用......
3.  *添加指示超车的参数*：在信号中
    添加一个`bool*`，指示是否某个接收器已经接管了该动作。如果该值为真，接收者就知道它不能再超越它了。如果没有接收者拿走它，发送者也知道它是否应该删除该对象。但是哪个接收者会以先到先得的方式接收对象是完全随机的。它污染了界面......
4.  *对不同的具体类使用不同的信号*：
    在这种情况下，接收者的槽可以*知道*使用了哪个具体子类并制作对象的副本。但这为使用类层次结构可以很好地完成的事情增加了额外的信号/插槽......此外，每个子类都必须有一个copy-c'tor。
5.  *向类添加`clone`方法*：
    与上面类似，但只有 1 个信号。多态`clone`将创建具体子类的副本。
6.  *使用专用接口而不是信号/插槽*：
    创建一个`GGIActionReceiver`类，并在`GGActionEditor`. 此实例是接管 Action 对象的唯一合格对象。其他人仍然可以发出信号，但他们不能超过指针。这样，发送者也知道是否必须删除对象（没有设置接收者）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:45:11.837

这里的一种选择是通过 std::shared_ptr<> 或其他一些引用计数机制使用共享所有权。这样，只要有人需要，对象就会一直存在。

Qt 的正常所有权模型不太适用，因为您无法确定有多少信号用户想要拥有同一个对象的所有权。

根据您的逻辑，共享所有权可能会导致闭环并打破这些闭环，您可能会被迫在一两个抽象中打孔。

确保不要将 Qt 所有权与 shared_ptr 混合在一起——你的 QObjects 不能有父母。

# python - Python中json加载中的单引号和双引号

> ID：14347047
> 
> 赞同：13
> 
> 时间：2013-01-15T21:14:11.433
> 
> 标签：python, json, simplejson

我注意到单引号导致`simplejson`' 的`loads`功能失败：

```
>>> import simplejson as json
>>> json.loads("\"foo\"")
'foo'
>>> json.loads("\'foo\'")
Traceback (most recent call last):
...
ValueError: No JSON object could be decoded 
```

我正在解析以下内容：`foo = ["a", "b", "c"]`从文本文件到 Python 中的列表，并且还想接受`foo = ['a', 'b', 'c']`. `simplejson`方便`foo`自动制作成列表。

我怎样才能`loads`接受单引号，或者在不破坏输入的情况下自动用双引号代替单引号？谢谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-15T21:22:15.927

使用适当的工具来完成这项工作，您解析的不是 JSON 而是 Python，因此请[`ast.literal_eval()`](http://docs.python.org/2/library/ast.html#ast.literal_eval)改用：

```
>>> import ast
>>> ast.literal_eval('["a", "b", "c"]')
['a', 'b', 'c']
>>> ast.literal_eval("['a', 'b', 'c']")
['a', 'b', 'c']
>>> ast.literal_eval('["mixed", \'quoting\', """styles"""]')
['mixed', 'quoting', 'styles'] 
```

*   JSON 文档总是对字符串使用双引号，对`\uhhhh`十六进制转义语法使用 UTF-16，具有`{...}`键值对的对象，键总是字符串，序列总是`[...]`列表，使用`null`,`true`和`false`值；注意小写的布尔值。数字有整数和浮点数形式。

*   在 Python 中，字符串表示可以使用单引号和双引号，Unicode 转义使用`\uhhhh`和`\Uhhhhhhhh`形式（没有 UTF-16 代理对），具有显示语法的字典`{...}`可以有许多不同类型的键，而不仅仅是字符串，序列可以是列表（`[...]`）但可以也可以使用元组 ( `(...)`)，或者您仍然可以使用其他容器类型。Python 有`None`,`True`和`False`(Titlecase!) 和数字有整数、浮点数和复数形式。

当解码成功但数据被错误解释时，将一个与另一个混淆可能会导致解析错误或微妙的问题，例如转义的非 BMP 代码点，如表情符号。确保使用正确的方法来解码它们！在大多数情况下，当你确实有 Python 语法数据时，实际上有人使用了错误的编码方法，只是意外地产生了 Python 表示。在这种情况下查看源是否需要修复；通常输出是通过使用`str(object)`where`json.dumps(obj)`应该被使用来产生的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-05T03:19:43.610

当我想自己解决这个问题时，我从这个 StackOverflow 问题开始。

使用的解决方案`ast.literal_eval()`不适用于我的所有情况，因为文本有时也有布尔常量 true/false，它们不被识别为 Python 标记（大写。）

为了自己解决这个问题，我编写了一个[自定义 JSONDecoder](http://github.com/jpz/tolerantjsondecoder.git)，它插入到标准 json Python 包中。

`pip install git+https://github.com/jpz/tolerantjsondecoder.git`

也许这可能对下一个人有用。

另外，需要注意的是，在我完成这个之后，我后来发现了[demjson](http://deron.meranda.us/python/demjson/)库，这似乎是一个更完整的解决方案，但是我没有评估它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-19T07:44:00.330

Demjson 可以完成你的工作，但它非常慢，我的意思是与 simplejson 相比非常慢。我不推荐它用于生产环境。

ast.literal_eval() 和 yaml 也不适用于所有 json，因此您需要更稳定的解决方案，例如 simplejson。

如果你稍微调整一下 simplejson，它就可以完成你的工作。我自己已经完成并分享了这段代码。

我分两点说

1) 从 github 下载 simplejson 并将其添加到您的项目中。2）现在simplejson有decoder.py python文件。用此代码替换该文件代码

```
"""Implementation of JSONDecoder
"""
from __future__ import absolute_import
import re
import sys
import struct
from .compat import u, text_type, binary_type, PY3, unichr
from .scanner import make_scanner, JSONDecodeError

def _import_c_scanstring():
    try:
        from ._speedups import scanstring
        return scanstring
    except ImportError:
        return None
c_scanstring = _import_c_scanstring()

# NOTE (3.1.0): JSONDecodeError may still be imported from this module for
# compatibility, but it was never in the __all__
__all__ = ['JSONDecoder']

FLAGS = re.VERBOSE | re.MULTILINE | re.DOTALL

def _floatconstants():
    if sys.version_info < (2, 6):
        _BYTES = '7FF80000000000007FF0000000000000'.decode('hex')
        nan, inf = struct.unpack('>dd', _BYTES)
    else:
        nan = float('nan')
        inf = float('inf')
    return nan, inf, -inf

NaN, PosInf, NegInf = _floatconstants()

_CONSTANTS = {
    '-Infinity': NegInf,
    'Infinity': PosInf,
    'NaN': NaN,
}

STRINGCHUNK = re.compile(r'(.*?)(["\\\x00-\x1f])', FLAGS)

# Changed Code Here. Added These Two Lines

STRINGCHUNKUNQUOTED = re.compile(r'(.*?)([:\\\x00-\x1f])', FLAGS)
STRINGCHUNKSINGLEQUOTED = re.compile(r"(.*?)(['\\\x00-\x1f])", FLAGS)

BACKSLASH = {
    '"': u('"'), '\\': u('\u005c'), '/': u('/'),
    'b': u('\b'), 'f': u('\f'), 'n': u('\n'), 'r': u('\r'), 't': u('\t'),
}
# Changed Code Here.
SINGLE_QUOTE_BACKSLASH = {
    "'": u("'"), '\\': u('\u005c'), '/': u('/'),
    'b': u('\b'), 'f': u('\f'), 'n': u('\n'), 'r': u('\r'), 't': u('\t'),
}

DEFAULT_ENCODING = "utf-8"

# Changed Code Here.
def parse_single_quoted_string(s, end, encoding=None, strict=True):
    return py_scanstring(s, end, encoding, strict, SINGLE_QUOTE_BACKSLASH, STRINGCHUNKSINGLEQUOTED.match)

def py_scanstring(s, end, encoding=None, strict=True,
        _b=BACKSLASH, _m=STRINGCHUNK.match, _join=u('').join,
        _PY3=PY3, _maxunicode=sys.maxunicode):
    """Scan the string s for a JSON string. End is the index of the
    character in s after the quote that started the JSON string.
    Unescapes all valid JSON string escape sequences and raises ValueError
    on attempt to decode an invalid string. If strict is False then literal
    control characters are allowed in the string.

    Returns a tuple of the decoded string and the index of the character in s
    after the end quote."""
    if encoding is None:
        encoding = DEFAULT_ENCODING
    chunks = []
    _append = chunks.append
    begin = end - 1
    while 1:
        chunk = _m(s, end)
        if chunk is None:
            raise JSONDecodeError(
                "Unterminated string starting at", s, begin)
        end = chunk.end()
        content, terminator = chunk.groups()
        # Content is contains zero or more unescaped string characters
        if content:
            if not _PY3 and not isinstance(content, text_type):
                content = text_type(content, encoding)
            _append(content)
        # Terminator is the end of string, a literal control character,
        # or a backslash denoting that an escape sequence follows

        # Changed Code Here.

        if not is_not_quote(terminator):
            break
        elif terminator != '\\':
            if strict:
                msg = "Invalid control character %r at"
                raise JSONDecodeError(msg, s, end)
            else:
                _append(terminator)
                continue
        try:
            esc = s[end]
        except IndexError:
            raise JSONDecodeError(
                "Unterminated string starting at", s, begin)
        # If not a unicode escape sequence, must be in the lookup table
        if esc != 'u':
            try:
                char = _b[esc]
            except KeyError:
                msg = "Invalid \\X escape sequence %r"
                raise JSONDecodeError(msg, s, end)
            end += 1
        else:
            # Unicode escape sequence
            msg = "Invalid \\uXXXX escape sequence"
            esc = s[end + 1:end + 5]
            escX = esc[1:2]
            if len(esc) != 4 or escX == 'x' or escX == 'X':
                raise JSONDecodeError(msg, s, end - 1)
            try:
                uni = int(esc, 16)
            except ValueError:
                raise JSONDecodeError(msg, s, end - 1)
            end += 5
            # Check for surrogate pair on UCS-4 systems
            # Note that this will join high/low surrogate pairs
            # but will also pass unpaired surrogates through
            if (_maxunicode > 65535 and
                uni & 0xfc00 == 0xd800 and
                s[end:end + 2] == '\\u'):
                esc2 = s[end + 2:end + 6]
                escX = esc2[1:2]
                if len(esc2) == 4 and not (escX == 'x' or escX == 'X'):
                    try:
                        uni2 = int(esc2, 16)
                    except ValueError:
                        raise JSONDecodeError(msg, s, end)
                    if uni2 & 0xfc00 == 0xdc00:
                        uni = 0x10000 + (((uni - 0xd800) << 10) |
                                         (uni2 - 0xdc00))
                        end += 6
            char = unichr(uni)
        # Append the unescaped character
        _append(char)
    return _join(chunks), end

# Use speedup if available
scanstring = c_scanstring or py_scanstring

WHITESPACE = re.compile(r'[ \t\n\r]*', FLAGS)
WHITESPACE_STR = ' \t\n\r'

# Changed Code Here.
UNQUOTEDDICT = {'/': '/', '\\': '\\', ';': ';', '#': '#',
            '=': '=', '{': '{', '}': '}', '[': '[', ']': ']',
            ':': ':', ',': ',', ' ': ' ', '\t': '\t',
            '\f': '\f', '\r': '\r', '\n': '\n'}

# Changed Code Here.
QUOTE_DICT = {'"': '"', "'": "'"}

# Changed Code Here.
def is_literal(char):
    return not UNQUOTEDDICT.get(char, None)

# Changed Code Here.
def is_not_quote(char):
    return not QUOTE_DICT.get(char, None)

# Changed Code Here.
def nexUnquotedKey(s, end):
    chunk = STRINGCHUNKUNQUOTED.match(s,end)
    for i in range(chunk.end()):
        index = i+end
        if not is_literal(s[index]):
            return s[end:index], index

def JSONObject(state, encoding, strict, scan_once, object_hook,
        object_pairs_hook, memo=None,
        _w=WHITESPACE.match, _ws=WHITESPACE_STR):
    (s, end) = state
    # Backwards compatibility
    if memo is None:
        memo = {}
    memo_get = memo.setdefault
    pairs = []
    # Use a slice to prevent IndexError from being raised, the following
    # check will raise a more specific ValueError if the string is empty
    nextchar = s[end:end + 1]
    # Normally we expect nextchar == '"'

    literal_check = False

    # Changed Code Here.
    if is_not_quote(nextchar):
        if nextchar in _ws:
            end = _w(s, end).end()
            nextchar = s[end:end + 1]
        # Trivial empty object
        literal_check = is_literal(nextchar)
        if nextchar == '}':
            if object_pairs_hook is not None:
                result = object_pairs_hook(pairs)
                return result, end + 1
            pairs = {}
            if object_hook is not None:
                pairs = object_hook(pairs)
            return pairs, end + 1
        elif nextchar != '"' and not literal_check:  # Changed Code Here.
            raise JSONDecodeError(
                "Expecting property name enclosed in double quotes",
                s, end)

    # Changed Code Here.
    if not literal_check:
        end += 1

    while True:
        if literal_check:
            key, end = nexUnquotedKey(s,end)
        else:
            # Changed Code Here.
            if nextchar == "'":
                key, end = scanstring(s, end, encoding, strict, SINGLE_QUOTE_BACKSLASH, STRINGCHUNKSINGLEQUOTED.match)
            else:
                key, end = scanstring(s, end, encoding, strict)

        key = memo_get(key, key)

        # To skip some function call overhead we optimize the fast paths where
        # the JSON key separator is ": " or just ":".
        if s[end:end + 1] != ':':
            end = _w(s, end).end()
            if s[end:end + 1] != ':':
                raise JSONDecodeError("Expecting ':' delimiter", s, end)

        end += 1

        try:
            if s[end] in _ws:
                end += 1
                if s[end] in _ws:
                    end = _w(s, end + 1).end()
        except IndexError:
            pass

        value, end = scan_once(s, end)
        pairs.append((key, value))

        try:
            nextchar = s[end]
            if nextchar in _ws:
                end = _w(s, end + 1).end()
                nextchar = s[end]
        except IndexError:
            nextchar = ''
        end += 1

        if nextchar == '}':
            break
        elif nextchar != ',':
            raise JSONDecodeError("Expecting ',' delimiter or '}'", s, end - 1)

        try:
            nextchar = s[end]
            if nextchar in _ws:
                end += 1
                nextchar = s[end]
                if nextchar in _ws:
                    end = _w(s, end + 1).end()
                    nextchar = s[end]
        except IndexError:
            nextchar = ''

        # Changed Code Here.
        if not literal_check:
            end += 1
            # Changed Code Here.
            if is_not_quote(nextchar):
                raise JSONDecodeError(
                    "Expecting property name enclosed in double quotes",
                    s, end - 1)

    if object_pairs_hook is not None:
        result = object_pairs_hook(pairs)
        return result, end
    pairs = dict(pairs)
    if object_hook is not None:
        pairs = object_hook(pairs)
    return pairs, end

def JSONArray(state, scan_once, _w=WHITESPACE.match, _ws=WHITESPACE_STR):
    (s, end) = state
    values = []
    nextchar = s[end:end + 1]
    if nextchar in _ws:
        end = _w(s, end + 1).end()
        nextchar = s[end:end + 1]
    # Look-ahead for trivial empty array
    if nextchar == ']':
        return values, end + 1
    elif nextchar == '':
        raise JSONDecodeError("Expecting value or ']'", s, end)
    _append = values.append
    while True:
        value, end = scan_once(s, end)
        _append(value)
        nextchar = s[end:end + 1]
        if nextchar in _ws:
            end = _w(s, end + 1).end()
            nextchar = s[end:end + 1]
        end += 1
        if nextchar == ']':
            break
        elif nextchar != ',':
            raise JSONDecodeError("Expecting ',' delimiter or ']'", s, end - 1)

        try:
            if s[end] in _ws:
                end += 1
                if s[end] in _ws:
                    end = _w(s, end + 1).end()
        except IndexError:
            pass

    return values, end

class JSONDecoder(object):
    """Simple JSON <http://json.org> decoder

    Performs the following translations in decoding by default:

    +---------------+-------------------+
    | JSON          | Python            |
    +===============+===================+
    | object        | dict              |
    +---------------+-------------------+
    | array         | list              |
    +---------------+-------------------+
    | string        | str, unicode      |
    +---------------+-------------------+
    | number (int)  | int, long         |
    +---------------+-------------------+
    | number (real) | float             |
    +---------------+-------------------+
    | true          | True              |
    +---------------+-------------------+
    | false         | False             |
    +---------------+-------------------+
    | null          | None              |
    +---------------+-------------------+

    It also understands ``NaN``, ``Infinity``, and ``-Infinity`` as
    their corresponding ``float`` values, which is outside the JSON spec.

    """

    def __init__(self, encoding=None, object_hook=None, parse_float=None,
            parse_int=None, parse_constant=None, strict=True,
            object_pairs_hook=None):
        """
        *encoding* determines the encoding used to interpret any
        :class:`str` objects decoded by this instance (``'utf-8'`` by
        default).  It has no effect when decoding :class:`unicode` objects.

        Note that currently only encodings that are a superset of ASCII work,
        strings of other encodings should be passed in as :class:`unicode`.

        *object_hook*, if specified, will be called with the result of every
        JSON object decoded and its return value will be used in place of the
        given :class:`dict`.  This can be used to provide custom
        deserializations (e.g. to support JSON-RPC class hinting).

        *object_pairs_hook* is an optional function that will be called with
        the result of any object literal decode with an ordered list of pairs.
        The return value of *object_pairs_hook* will be used instead of the
        :class:`dict`.  This feature can be used to implement custom decoders
        that rely on the order that the key and value pairs are decoded (for
        example, :func:`collections.OrderedDict` will remember the order of
        insertion). If *object_hook* is also defined, the *object_pairs_hook*
        takes priority.

        *parse_float*, if specified, will be called with the string of every
        JSON float to be decoded.  By default, this is equivalent to
        ``float(num_str)``. This can be used to use another datatype or parser
        for JSON floats (e.g. :class:`decimal.Decimal`).

        *parse_int*, if specified, will be called with the string of every
        JSON int to be decoded.  By default, this is equivalent to
        ``int(num_str)``.  This can be used to use another datatype or parser
        for JSON integers (e.g. :class:`float`).

        *parse_constant*, if specified, will be called with one of the
        following strings: ``'-Infinity'``, ``'Infinity'``, ``'NaN'``.  This
        can be used to raise an exception if invalid JSON numbers are
        encountered.

        *strict* controls the parser's behavior when it encounters an
        invalid control character in a string. The default setting of
        ``True`` means that unescaped control characters are parse errors, if
        ``False`` then control characters will be allowed in strings.

        """
        if encoding is None:
            encoding = DEFAULT_ENCODING
        self.encoding = encoding
        self.object_hook = object_hook
        self.object_pairs_hook = object_pairs_hook
        self.parse_float = parse_float or float
        self.parse_int = parse_int or int
        self.parse_constant = parse_constant or _CONSTANTS.__getitem__
        self.strict = strict
        self.parse_object = JSONObject
        self.parse_array = JSONArray
        self.parse_string = scanstring
        self.parse_single_quoted_string = parse_single_quoted_string  # Changed Code Here.
        self.memo = {}
        self.scan_once = make_scanner(self)

    def decode(self, s, _w=WHITESPACE.match, _PY3=PY3):
        """Return the Python representation of ``s`` (a ``str`` or ``unicode``
        instance containing a JSON document)

        """
        if _PY3 and isinstance(s, binary_type):
            s = s.decode(self.encoding)
        obj, end = self.raw_decode(s)
        end = _w(s, end).end()
        if end != len(s):
            raise JSONDecodeError("Extra data", s, end, len(s))
        return obj

    def raw_decode(self, s, idx=0, _w=WHITESPACE.match, _PY3=PY3):
        """Decode a JSON document from ``s`` (a ``str`` or ``unicode``
        beginning with a JSON document) and return a 2-tuple of the Python
        representation and the index in ``s`` where the document ended.
        Optionally, ``idx`` can be used to specify an offset in ``s`` where
        the JSON document begins.

        This can be used to decode a JSON document from a string that may
        have extraneous data at the end.

        """
        if idx < 0:
            # Ensure that raw_decode bails on negative indexes, the regex
            # would otherwise mask this behavior. #98
            raise JSONDecodeError('Expecting value', s, idx)
        if _PY3 and not isinstance(s, text_type):
            raise TypeError("Input string must be text, not bytes")
        # strip UTF-8 bom
        if len(s) > idx:
            ord0 = ord(s[idx])
            if ord0 == 0xfeff:
                idx += 1
            elif ord0 == 0xef and s[idx:idx + 3] == '\xef\xbb\xbf':
                idx += 3
        return self.scan_once(s, idx=_w(s, idx).end()) 
```

2) simplejson 有scanner.py python 文件。用此代码替换该文件代码

```
 """JSON token scanner
"""
import re
from .errors import JSONDecodeError
def _import_c_make_scanner():
    try:
        from ._speedups import make_scanner
        return make_scanner
    except ImportError:
        return None
c_make_scanner = _import_c_make_scanner()

__all__ = ['make_scanner', 'JSONDecodeError']

NUMBER_RE = re.compile(
    r'(-?(?:0|[1-9]\d*))(\.\d+)?([eE][-+]?\d+)?',
    (re.VERBOSE | re.MULTILINE | re.DOTALL))

def py_make_scanner(context):
    parse_object = context.parse_object
    parse_array = context.parse_array
    parse_string = context.parse_string
    parse_single_quoted_string = context.parse_single_quoted_string  # Changed Code Here.
    match_number = NUMBER_RE.match
    encoding = context.encoding
    strict = context.strict
    parse_float = context.parse_float
    parse_int = context.parse_int
    parse_constant = context.parse_constant
    object_hook = context.object_hook
    object_pairs_hook = context.object_pairs_hook
    memo = context.memo

    def _scan_once(string, idx):
        errmsg = 'Expecting value'
        try:
            nextchar = string[idx]
        except IndexError:
            raise JSONDecodeError(errmsg, string, idx)

        if nextchar == '"':
            return parse_string(string, idx + 1, encoding, strict)
        elif nextchar == "'":
            return parse_single_quoted_string(string, idx + 1, encoding, strict)  # Changed Code Here.
        elif nextchar == '{':
            return parse_object((string, idx + 1), encoding, strict,
                _scan_once, object_hook, object_pairs_hook, memo)
        elif nextchar == '[':
            return parse_array((string, idx + 1), _scan_once)
        elif nextchar == 'n' and string[idx:idx + 4] == 'null':
            return None, idx + 4
        elif nextchar == 't' and string[idx:idx + 4] == 'true':
            return True, idx + 4
        elif nextchar == 'f' and string[idx:idx + 5] == 'false':
            return False, idx + 5

        m = match_number(string, idx)
        if m is not None:
            integer, frac, exp = m.groups()
            if frac or exp:
                res = parse_float(integer + (frac or '') + (exp or ''))
            else:
                res = parse_int(integer)
            return res, m.end()
        elif nextchar == 'N' and string[idx:idx + 3] == 'NaN':
            return parse_constant('NaN'), idx + 3
        elif nextchar == 'I' and string[idx:idx + 8] == 'Infinity':
            return parse_constant('Infinity'), idx + 8
        elif nextchar == '-' and string[idx:idx + 9] == '-Infinity':
            return parse_constant('-Infinity'), idx + 9
        else:
            raise JSONDecodeError(errmsg, string, idx)

    def scan_once(string, idx):
        if idx < 0:
            # Ensure the same behavior as the C speedup, otherwise
            # this would work for *some* negative string indices due
            # to the behavior of __getitem__ for strings. #98
            raise JSONDecodeError('Expecting value', string, idx)
        try:
            return _scan_once(string, idx)
        finally:
            memo.clear()

    return scan_once

make_scanner = c_make_scanner or py_make_scanner 
```

现在你们都准备好了。Simplejson 是我用过的最快、最稳定的库。

我在 simplejson 中更改了几行代码，现在这个很棒的库适用于

*   **不带引号的 json 键和单引号 json 字符串和键**

我只更改了 python 代码。因此，如果您使用 C 扩展来加速提升，那么此代码将不起作用。

无论我在哪里进行更改，我都在此处添加了注释 # 更改代码

我以前错误地以访客用户的身份回答，现在我无法登录编辑该答案，所以我在新线程中发布。

# c - 使用 VS2010 的 libsndfile 奇怪行为

> ID：14347051
> 
> 赞同：0
> 
> 时间：2013-01-15T21:14:28.367
> 
> 标签：c, visual-c++, libsndfile

我正在制作一个从麦克风录制的程序，然后使用 libsndfile 将其编码为 OGG 文件。

大约一个月前，我制作了这个程序的控制台版本，以确保录制和编码功能良好。现在，当我开始将这个程序作为一个窗口应用程序时，我发现唯一错误的是编码为 ogg 的函数。

这不是编译器或链接器错误，而是运行时错误。当我调用`sf_format_check`函数时，它返回 false，因此输出文件的参数有问题。所以我开始手动检查它是否`sf_format_check`正常工作并且一切都正确。但是当我编译旧的控制台版本时，它一切正常。

所以这是我的问题，这种行为的原因是什么？

这是我的功能。

```
static void encodeOgg (const char *infilename, const char *outfilename, int filetype)
{   
  static short buffer [BUFFER_LEN] ;

  SNDFILE       *infile, *outfile ;
  SF_INFO       sfinfo,sf_in ;
  int           readcount ;

  fflush (stdout) ;
  sf_in.samplerate=SAMPLE_RATE;//44100
  sf_in.channels=NUM_CHANNELS;//1
  sf_in.format=SF_FORMAT_RAW | SF_FORMAT_PCM_16 ;
  if (! (infile = sf_open (infilename, SFM_READ, &sf_in))){
    error("Could not open output file") ;
    exit (1) ;
  }
  sfinfo = sf_in;
  sfinfo.format = filetype ;//SF_FORMAT_OGG | SF_FORMAT_VORBIS

  if (! sf_format_check (&sfinfo)){ //Here's the place where function exits
    sf_close (infile) ;
    error("Invalid encoding\n") ;
    exit (1) ;
  }

  if (! (outfile = sf_open (outfilename, SFM_WRITE, &sfinfo))){
    error("Error : could not open output file") ;
    exit (1) ;
  }

  while ((readcount = sf_read_short (infile, buffer, BUFFER_LEN)) > 0)
  {
    sf_write_short (outfile, buffer, readcount) ;
  }
  sf_close (infile) ;
  sf_close (outfile) ;
  return ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:11:52.517

将 sf_in 中的每个值分配给 sfinfo，而不是使用结构的直接分配 (sfinfo=sf_in;)

```
sfinfo.sf_count_t=sf_in.sf_count_t;
...
sfinfo.seekable=sf_in.seekable;

typedef struct
      {    sf_count_t  frames ;     /* Used to be called samples. */
           int         samplerate ;
           int         channels ;
           int         format ;
           int         sections ;
           int         seekable ;
       } SF_INFO ; 
```

# sql - Ruby on Rails / SQL 查询

> ID：14347053
> 
> 赞同：2
> 
> 时间：2013-01-15T21:14:39.483
> 
> 标签：sql, ruby, ruby-on-rails-3

我以下型号

```
class Company < ActiveRecord::Base
    attr_accessible :name, address, ........

     has_many :employees
end

class Employee < ActiveRecord::Base
    attr_accessible :firstname, :lastname, :company_id, .............

    belongs_to :company

end 
```

我有一个字符串 q 并且想选择所有名字姓氏或 company.name 像 q 的员工，沿着这个查询非工作查询的行

```
Employee.where("firstname like ? or lastname like ? or company.name like ?", q,q,q) 
```

用 Rails 实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:17:09.643

试试这个：

```
Employee.joins(:company).where("employees.firstname like ? or employees.lastname like ? or companies.name like ?", '%q%', '%q%', '%q%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:27:13.883

[正如这个很好的答案中提到的，](https://stackoverflow.com/a/4027474/690866)这里的方法是使用搜索 gem 而不是 SQL。

领先的候选人是[Thinking Sphinx](http://pat.github.com/ts/en/searching.html)。

来自同一个线程的另一个有用的答案是： [https](https://stackoverflow.com/a/4037835/690866) ://stackoverflow.com/a/4037835/690866 如果我理解正确的话，他在那里展示了你想要实现的目标..

希望能帮助到你。

# php - 从 php 传递到 AJAX

> ID：14347055
> 
> 赞同：1
> 
> 时间：2013-01-15T21:14:51.583
> 
> 标签：php, ajax, jquery

是否可以将两个变量从 PHP 传递到 AJAX 并单独使用它们，例如：

获取这个：

```
echo $row['route'] + $row['Distance'] ; 
```

然后我可以：

```
$.getJSON("DisplayIndividualMySQLi.php", function(data) { 
    // alert(route);
    // alert(distance);
     } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:17:20.100

当您使用 getJSON 从 php 获取数据时，您的 php 响应需要在 json 中

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## PHP

```
// DB Query to set $row[ 'route' ] and $row[ 'Distance' ]
$sql = "SELECT route, Distance, UserID, RandomField, Etc FROM foo where bar = 'baz' LIMIT 1";
$row = $db->query( $sql )->fetch_assoc();
//...

$array = array( 
    'route' => $row[ 'route' ],
    'distance' => $row[ 'Distance' ],
    'UserID' => $row[ 'UserID' ]
);
// returns { "route": "foo", "Distance": "bar", "UserID": "User" }
echo json_encode( $array ); 
```

* * *

## JS

```
// Case is important on things in the data object!
$.getJSON( "DisplayIndividualMySQLi.php", function( data ) {
   console.log( data ); // Object
   console.log( data.route ); // shows php's $row[ 'route' ]
   console.log( data.Distance ); // shows php's $row[ 'Distance' ]
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:20:05.213

您可以将它们放在一个数组中，然后将其 json-encode() 并回显。

```
$array = array(
   "route" => $row['route'],
   "distance" => $row['Distance'],
);
echo json_encode( $array); 
```

或者如果你想发送整个 $row 你可以：

```
echo json_encode( $row); 
```

（但只发送您需要进行良好实践的数据。）

之后，您可以以 data.route 的形式访问数据，例如：

```
console.log( data.route ); 
```

# eclipse - AspectJ 在我的 webapp (Eclipse) 中无法与 Maven 一起使用

> ID：14347057
> 
> 赞同：0
> 
> 时间：2013-01-15T21:14:56.533
> 
> 标签：eclipse, web-services, maven-2, aspectj

我有一个在 Websphere 8.0 上运行的 Webservice Maven 项目，我试图在其中使用 Aspectj 实现 AOP，但没有任何结果。

方面类定义没问题（我可以说是因为在我看到的每个示例中都相同），并且我可以告诉 pom 它也很好。我将添加代码以确保：

```
<dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.7.0</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjtools</artifactId>
        <version>1.6.11</version>
    </dependency> 
```

和插件

```
<plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <version>1.4</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <configuration>
                            <source>1.5</source>
                            <target>1.5</target>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

因此，当我使用带有方法注释的服务时，什么也没有发生，没有错误，没有日志，什么都没有！我不知道它是否没有编织这个项目或者它正在发生什么。

如果你们需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:40:05.987

如果您的方面定义在另一个项目中，那么您需要将它们包含到正在使用它们的项目中，如下所示：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <configuration>
                <outxml>true</outxml>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
                <source>${java.version}</source>
                <target>${java.version}</target>
            </configuration>
        </plugin> 
```

注意：将 spring-aspects 更改为您的项目工件

# arrays - 二维数组邻域算法

> ID：14347065
> 
> 赞同：2
> 
> 时间：2013-01-15T21:15:13.987
> 
> 标签：arrays, algorithm, multidimensional-array

我有一个像这样的二维数组：

```
0,1,0,0,1
1,0,1,0,1
0,1,1,0,1
0,1,0,1,1
1,1,0,0,1 
```

如果我们提取所有 1 的坐标，我们得到：

```
(height,width)
1,2
1,5
2,1
... 
```

所以现在我想找到由相邻的 1（不是对角线）创建的区域。为了做到这一点，我需要找到一种方法来检查邻居的邻居。我一直在考虑使用两个数组并将一个邻居的邻居交换到另一个，但这不是一种非常有效的方法，尤其是在处理大数组时。这个问题有更好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T02:56:50.573

有很多这样的方法，它们被称为连通分量标记。以下是其中一些不太老的（不分先后）：

1.  [RISC架构的光速标签](http://www.ief.u-psud.fr/~lacas/Publications/ICIP09_LSL.pdf), 2009
2.  [优化两遍连通分量标记算法](http://link.springer.com/article/10.1007%2Fs10044-008-0109-y), 2009
3.  [使用轮廓跟踪技术的线性时间组件标记算法](http://www.iis.sinica.edu.tw/papers/fchang/1362-F.pdf)，2004

第二种方法在文献中被称为“Wu's algorithm”（它们实际上是指较旧的论文，但那里提出的算法相同），被认为是该任务最快的方法之一。使用洪水填充当然是您想要使用的最后一种方法，因为与其中任何一种方法相比，它都非常慢。该 Wu 算法是一种基于路径压缩的 union-find 数据结构的二次标注，相对容易实现。由于本文涉及 8 连接，因此我将包含用于处理 4 连接的示例代码（您的问题与此有关）。

union-find 结构的代码取自论文中的原样，但您会在您阅读的有关此数据结构的每篇文章中找到类似的代码。

```
def set_root(e, index, root):
    # Set all nodes to point to a new root.
    while e[index] < index:
        e[index], index = root, e[index]
    e[index] = root

def find_root(e, index):
    # Find the root of the tree from node index.
    root = index
    while e[root] < root:
        root = e[root]
    return root

def union(e, i, j):
    # Combine two trees containing node i and j.
    # Return the root of the union.
    root = find_root(e, i)
    if i != j:
        root_j = find_root(e, j)
        if root > root_j:
            root = root_j
        set_root(e, j, root)
    set_root(e, i, root)
    return root

def flatten_label(e):
    # Flatten the Union-Find tree and relabel the components.
    label = 1
    for i in xrange(1, len(e)):
        if e[i] < i:
            e[i] = e[e[i]]
        else:
            e[i] = label
            label += 1 
```

为简单起见，我假设数组在顶部和左侧填充了零。

```
def scan(a, width, height): # 4-connected
    l = [[0 for _ in xrange(width)] for _ in xrange(height)]

    p = [0] # Parent array.
    label = 1
    # Assumption: 'a' has been padded with zeroes (bottom and right parts
    # does not require padding).
    for y in xrange(1, height):
        for x in xrange(1, width):
            if a[y][x] == 0:
                continue

            # Decision tree for 4-connectivity.
            if a[y - 1][x]: # b
                if a[y][x - 1]: # d
                    l[y][x] = union(p, l[y - 1][x], l[y][x - 1])
                else:
                    l[y][x] = l[y - 1][x]
            elif a[y][x - 1]: # d
                l[y][x] = l[y][x - 1]
            else:
                # new label
                l[y][x] = label
                p.append(label)
                label += 1

    return l, p 
```

`a`所以最初你有一个传递给这个函数的数组`scan`。这是第一次贴标签。要解析标签，您只需调用`flatten_label(p)`. 然后第二个标签传递是微不足道的：

```
for y in xrange(height):
    for x in xrange(width):
        l[y][x] = p[l[y][x]] 
```

现在您的 4 连接组件已被标记，并`max(p)`给出了您拥有的组件数量。如果您按照此代码阅读本文，您应该可以轻松理解它。语法来自 Python，如果您对它的含义有任何疑问，请随时提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:17:38.220

如果我对您的问题的理解是正确的，您可以使用[Floodfill](http://en.wikipedia.org/wiki/Floodfill)来解决问题。

# c# - 以编程方式将内容添加到滚动查看器，滚动条停止工作

> ID：14347066
> 
> 赞同：3
> 
> 时间：2013-01-15T21:15:14.380
> 
> 标签：c#, wpf, scrollviewer

好的，所以我对强大的 WPF 并不那么精通，但我尝试了一个有趣的项目来参与其中。我制作了一个简单的 RSS/ATOM 提要查看器，可以将 HTML 从 RRS 或 ATOM 提要中提取出来，并将其粘贴在浏览器控件中，该浏览器控件添加到堆栈面板中……这是 ScrollViewer 的内容。唷。无论如何，问题是，我在后面的代码中做这一切，发现 ScrollViewer 不起作用，或者无法识别内容的大小，所以没有滚动。我尝试设置查看器和内容的大小，并尝试了最小和最大尺寸。

我在这里想念什么？内容就在那里，如果我在加载 WPF 之前加载它，它可以工作，但是一旦我尝试更改或从控件“清除”子项，滚动查看器就会停止正常工作。

```
<Window x:Class="Heine.Syndication.xkcd.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Feed Viewer" Height="600" Width="800">
<StackPanel>
    <ToolBarPanel >
        <ToolBar>
            <ComboBox Margin="0" Width="100" Name="cbController">
                <MenuItem Header="xkcd" Name="xkcdMI"/>
                <MenuItem Header="9Gag" Name="nineGagMI"/>
                <MenuItem Header="reddit" Name="redditMI"/>
            </ComboBox>
        </ToolBar>
    </ToolBarPanel>
    <Grid Name="svMain">

    </Grid>
</StackPanel>
</Window>

    public MainWindow()
    {
        InitializeComponent();

        cbController.SelectedIndex = 0;

        xkcdMI.Click += xkcdMI_Click;
        nineGagMI.Click += nineGagMI_Click;
        redditMI.Click += redditMI_Click;

        Load("http://xkcd.com/atom.xml");
    }

    private void Load(string feedUrl)
    {
        var reader = XmlReader.Create(feedUrl);
        var feed = SyndicationFeed.Load<SyndicationFeed>(reader);
        svMain.Children.Clear();

        var tmpStack = new StackPanel();

        foreach (var item in feed.Items)
        {
            var browser = new WebBrowser();

            GetHTML(ref browser, item);

            tmpStack.Children.Add(browser);
        }

        svMain.Children.Add(new ScrollViewer()
        {
            Content = tmpStack,
            Height = svMain.Height
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:12:39.603

好的，不幸的是，我正在回答我自己的问题，而不是发疯并重写一堆东西。因此，在我的研究中，事实证明，在 .NET 4.0 和 4.5 中，StackPanel 与 ScrollView 配合得很好……只要您知道自己在做什么！我同意留下的评论，即 MVVM 是在后台发生的事情，我的代码实际上反映了我必须对其进行更改以尝试使其正常工作，即使我有适当的模型、视图、侦听器/处理程序等（其中都内置在框架中）。

因此，鉴于上述内容，我的问题的答案和[这个链接](https://stackoverflow.com/questions/802821/how-can-i-get-scrollviewer-to-work-inside-a-stackpanel)我发现设置我的网格的大小，其中包含滚动视图和其他类似的乐趣，使它像宣传的那样工作。问题显然是 Grid 向滚动视图报告它的大小无法定义，因此滚动视图也可能如此。所以......对于我上面的代码，我需要在调整整个表单的大小并相应地设置网格的高度时进行处理。

```
<Grid Name="svMain" Height="550">

</Grid> 
```

[如何让 ScrollViewer 在 StackPanel 中工作？](https://stackoverflow.com/questions/802821/how-can-i-get-scrollviewer-to-work-inside-a-stackpanel)

# javascript - 在 jQuery datepicker 中禁用月份选择

> ID：14347068
> 
> 赞同：0
> 
> 时间：2013-01-15T21:15:21.960
> 
> 标签：javascript, jquery, calendar, datepicker

如何在 jQuery datepicker 中删除按钮以选择过去或下个月？

我在 SO 上发现了同样的问题，但它对我不起作用。

我试过这个，但没有成功：

```
$("#date").datepicker({
  changeMonth: false,
  changeYear: false,
  dateFormat: 'dd/mm/yy',
  duration: 'fast'
}).focus(function() {
  $(".ui-datepicker-prev, .ui-datepicker-next").remove();
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:19:53.783

看起来你需要做 minDate 和 maxDate 来做到这一点。changeMonth 选项仅设置是否允许在下拉菜单中更改月份。

[http://api.jqueryui.com/datepicker/](http://api.jqueryui.com/datepicker/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:35:39.283

这段代码成功了:)

```
$('#datepicker').find('.ui-datepicker-next').remove();
$('#datepicker').find('.ui-datepicker-prev').remove(); 
```

# php - 使用 PHP 实现 PayPal Pro 支付

> ID：14347076
> 
> 赞同：0
> 
> 时间：2013-01-15T21:15:48.480
> 
> 标签：php, paypal

我在输入正确的凭据时仔细遵循[了本教程](http://net.tutsplus.com/tutorials/php/how-to-process-credit-cards-with-paypal-payments-pro-using-php/)，但是我总是收到此错误消息：«由于商家配置无效，无法处理此交易»。

有谁知道这是为什么？

# .net - 可以在浏览器窗口中查看网页，但在 PowerShell 2.0 中下载它不会返回任何内容

> ID：14347078
> 
> 赞同：0
> 
> 时间：2013-01-15T21:15:52.957
> 
> 标签：.net, web-services, powershell, windows-7, powershell-2.0

我正在尝试使用 PowerShell v2.0 从自定义 PHP Web 服务下载内容。内容是一个短字符串（即“[123]”），可以通过Internet Explorer访问，但调用System.Net.Webclient.DownloadString()时不返回内容，也不产生任何错误。这是被调用的代码：

```
$url = "https://localserver/servicename.php?param1=x&param2=y"
$wc = New-Object System.Net.Webclient
$content = $wc.DownloadString($url) 
```

调用此代码后，$content 包含一个空字符串。使用其他 URL，此代码返回有效内容。PowerShell 2.0 中是否有另一种方法可以完全按照在浏览器中查看的内容下载内容，而不管 Web 服务可能设置或不设置标头如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:21:01.280

问题已解决（有点）。问题是该页面需要在单独的网页上进行非基本身份验证。我通过在服务器上编辑代码绕过它，但无法从 powershell 中解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:55:06.547

您是否尝试过发送与浏览器相同的用户代理字符串？

`$wc.Headers.Add('user-agent', '...')`

# file - java中的文件资源管理器

> ID：14347081
> 
> 赞同：0
> 
> 时间：2013-01-15T21:16:03.317
> 
> 标签：file, tabs, directory

我想写一个简短的应用程序。它必须浏览文件以查找文件夹。如果它找到一个文件夹，它会在控制台上写入文件夹的名称并写入文件夹。接下来写入文件夹中包含的 txt 文件的控制台名称。

我的代码：

```
import java.io.File;

public class test {
    public static void search(File f) {

        File[] tab = f.listFiles();
        for (File file1 : tab) {
            if (file1.isDirectory()) {
                search(file1);
            } else {
                if (Txt(file1)) {
                    System.out.println("+ " + file1);
                }
            }
        }
    }

    public static boolean Txt(File f) {
        return f.getName().substring(f.getName().length() - 4).equals(".txt");
    }

    public static void main(String[] args) {
        try {
            File f = new File("/home/mati/Pulpit");
            search(f);
        } catch (Exception e) {
        }

    }
} 
```

代码结果：

```
+ New Folder
    - aaa.txt
    - abc.txt
    - abf.txt
+ New Folder2
    - abgh.txt 
```

我的程序只写txt文件，我不知道如何修复它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:46:55.807

两件事：首先，要显示文件夹名称，您需要在带有“if (file1.isDirectory())”条件的代码分支中添加 System.out。您已经在“else”部分中有一个 System.out，这就是显示文件名的原因。

其次，如果您在文件夹中有文件夹，这可能不会按您希望的方式工作。所有文件夹都将以一种缩进级别显示，所有文件都将以另一种缩进级别显示。但是您将无法看到哪些文件夹嵌套在其他文件夹中。

# c# - Visual Studio 2010 Express 可以自动注册 64 位 DLL 吗？

> ID：14347082
> 
> 赞同：1
> 
> 时间：2013-01-15T21:16:05.157
> 
> 标签：c#, visual-studio-2010, com

我一直在关注[Angel Six](http://www.angelsix.com/cms/products/tutorials/64-solidworks/67-creating-a-solidworks-add-in-from-scratch "天使六号")构建 SW 插件的初学者教程。我试图让 Visual Studio 自动注册 DLL，但我在 64 位机器上使用 64 位 SolidWorks，它似乎不想自动注册。我已经执行了本教程中描述的两个步骤（使程序集 COM 可见并注册 COM 互操作）。

当我构建时，我没有收到任何类型的错误，只是当我使用 regedit 检查注册表时，我没有在 SOFTWARE/SolidWorks/Addins 中看到我的插件，我似乎也无法在任何地方找到它（例如，我看了在 HKEY_CURRENT_USER 和 HKEY_LOCAL_MACHINE 下）。

就像我说的，我很好奇 Visual Studio 是否可以自动注册 64 位 DLL；我使用 64 位 regasm.exe 完成了手动注册过程，效果很好。

我在安装了 SolidWorks 2012 x64 Student Edition 的 Windows 7 机器上运行 VS 2010 Express。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:54:56.957

Visual Studio 2010 Express 中的“注册 COM 互操作”选项仅适用于 32 位 COM 服务器（如上面的 Hans Passat 所述）。要使 DLL 正确注册到 COM for SolidWorks，您可以运行 cmd AS ADMINISTRATOR，然后执行以下操作

```
cd C:\Windows\Microsoft.NET\Framework64\v4.0.30319
regasm.exe "C:\full\path\to\your.dll" /codebase 
```

这可以作为 VS 2010 express 中的构建后操作运行，只需转到项目的属性，单击构建选项卡，然后将上面的这两行添加到您可能已经拥有的任何命令中。

然后该插件应成功注册并与 64 位 SolidWorks 一起使用。

# python - 如何使用 Python2.7 在网页上显示所有 ID 的值？

> ID：14347086
> 
> 赞同：0
> 
> 时间：2013-01-15T21:16:17.153
> 
> 标签：python, python-2.7

我需要显示给定网站上所有 ID 的值。是否有一个函数`urllib`可以`urllib2`让我阅读该站点，然后只打印“id =”之后的值？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:00:26.753

我会使用 BeautifulSoup 和请求来做到这一点。我使用这个页面整理了一个简单的示例，并将其发布在[Github](https://github.com/lyndsysimon/snippets/blob/master/scraping/get_all_ids_on_page.py)上。

请注意，这里的真正工作是在 return 语句中——其中大部分是样板文件。

```
from bs4 import BeautifulSoup as BS
import requests as r

def get_ids_from_page(page):
    response = r.get(page)
    soup = BS(response.content).body

    return sorted([x.get('id') for x in soup.find_all() if x.get('id') is not None])

if __name__ == '__main__':
    # In response to the question at the URL below - in short "How do I get the
    #   ids from all objects on a page in Python?"
    ids = get_ids_from_page('http://stackoverflow.com/questions/14347086/')

    for val in ids:
        print val 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:32:35.393

您可以使用正则表达式：

```
import re

id_list = re.findall('id="(.*?)"', html_text) 
```

或者更复杂一点（以确保您仅从 HTML 标记中解析出来）：

```
id_list = re.findall('<[^>]*? id="(.*?)"', html_text) 
```

这样就可以很容易地只解析特定类型的 ID（匹配一些特殊模式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:51:42.403

有一个明显（但丑陋）的[正则表达式](http://docs.python.org/2/library/re.html)解决方案，您可以在其中使用[urllib](http://docs.python.org/2/library/urllib.html)或[urllib2](http://docs.python.org/2/library/urllib2.html)获取页面，或者更方便的[请求库](http://docs.python-requests.org/en/latest/)，然后应用正则表达式，但我会推荐[pyquery](http://packages.python.org/pyquery/)包。它就像[jquery](http://api.jquery.com/)，但对于 python，使用 css 选择器来获取节点。

对于您的问题：

```
from pyquery import PyQuery

page = """
<html>
  <body id='test'>
    <p id='test2'>some text</p>
  </body>
</html>
"""

doc = PyQuery(page)
for node in doc("*[id]").items():
    print(node.attr.id) 
```

将产生：

```
test
test2 
```

并下载页面：

```
import requests
page = requests.get("http://www.google.fr").text 
```

`pyquery`甚至[可以打开网址](http://packages.python.org/pyquery/scrap.html)，使用`urllib`或`requests`。

# coldfusion - 使用 CFLocation 重定向到新选项卡 - CF9

> ID：14347092
> 
> 赞同：3
> 
> 时间：2013-01-15T21:17:14.530
> 
> 标签：coldfusion, coldfusion-9, cflocation

有没有办法使用 CFLocation 将用户重定向到新窗口？据我所知，您不能`target=_blank`在 CFLocation 中使用。还有另一种方法吗？

这是我的代码：

```
 <cfif cgi.PATH_INFO eq "/procedure-page.cfm">
       <cflocation url="http://www.example.com/example/example.cfm?id=XXXXXX&contactid=#returnStruct.contactID#&doctorid=#officeLocation#" addtoken="no" >
    <cfelse>
       <cflocation url="http://www.example.com/example/example.cfm?id=#example#&contactid=#returnStruct.contactID#&doctorid=#officeLocation#" addtoken="no" >
    </cfif> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T21:37:07.330

`<cflocation>`执行客户端重定向，但它是在服务器端启动的（它发送一个在标头中带有重定向的请求），因此它对作为浏览器的“选项卡”一无所知。CF 对浏览器中发生的事情一无所知。

要在客户端站点上做你想做的事情，你需要用 Javascript 做浏览器的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T09:39:36.690

这可能不是最干净的方法，但它应该可以工作。

```
<cfoutput>
<cfif cgi.PATH_INFO eq "/procedure-page.cfm">
    <script type="text/javascript">
        window.open("http://www.example.com/example/example.cfm?id=XXXXXX&contactid=#returnStruct.contactID#&doctorid=#officeLocation#", '_blank');
    </script>
<cfelse>
    <script type="text/javascript">
        window.open("http://www.example.com/example/example.cfm?id=#example#&contactid=#returnStruct.contactID#&doctorid=#officeLocation#", '_blank');
    </script>
</cfif>
</cfoutput> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:49:21.487

我相信亚当是正确的，因为`CFLocation`它不能要求浏览器在新窗口（或标签）中打开。然而，您可能感兴趣的是`CFWindow`标签。 [请参阅此处的文档。](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-79e6.html) *请注意，`CFWindow`它也不会打开新的浏览器窗口，而是创建一个`<div>`来模拟弹出窗口。* 无论如何，它有几个选项，我认为它可能值得你看看。也许它可以处理你需要的东西。

# android - 带有回调的通用 asyncTask（用于 Web 服务）

> ID：14347093
> 
> 赞同：3
> 
> 时间：2013-01-15T21:17:18.323
> 
> 标签：android, web-services, android-asynctask

我已经开发了许多发出 Web 服务请求的 Android 应用程序，总是使用以下方法：

在每个需要发出 Web 服务请求的活动中，我定义了一个`AsyncTask`显示`ProgressDialog`in的内部，在 中`onPreExecute()`进行 Web 服务调用`doInBackground`，并关闭 progressDialog 并从 更新 UI 中的结果`onPostExecute()`。

我担心的是：有更好（更短）的方法吗？在每个活动中重复所有这些代码是否有意义？我一直在谷歌搜索，但我什么也没找到。

我的问题是：我不能定义一个回调接口吗？例如这个：

```
public interface RequestCallback {
    public void onSuccess(Whatever whatever);
    public void onError(ErrorCode errorCode, String message);
} 
```

...然后定义一个外部类，例如`AsyncRequest`，包装 AsyncTask 定义和 ProgressDialog`show()`和`dismiss()`语句。因此，所有活动只需要实例化该类，并传入以下参数：

1）Web服务运行的方法

2) 一个包含该 Web 服务方法的所有参数的 Bundle

3) 一个 RequestCallback 实例（可能是一个匿名的内联实例，我可以从中更新 UI `onSuccess()`）

4）活动的上下文（必须显示 ProgressDialog()，所以我仍然需要一种方法来防止配置更改异常等等......），

你觉得这是个好设计吗？它可以节省数百行代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:33:08.167

你的方法就是我在我的项目中所做的。正如你所说，它节省了很多代码，我对此没有任何抱怨。但这里有一些问题我想告诉你：

1.  `AsyncTask`您应该在每次执行后台线程时创建新实例以避免堆积回调。
2.  对于进度对话框，我将其用作`Singleton`，因为您不会同时显示许多对话框。该对话框将在您调用后台作业时显示，并将在回调中关闭。这是我所做的：

    ```
    private void showProgressDialog(String strMess){
        if(null == progressDialog){
          progressDialog = new ProgressDialog(MainActivity.this);           
        }
        if(!progressDialog.isShowing()){
          progressDialog.setMessage(strMess);           
          progressDialog.show();
        }
    }

    private void hideProgressDialog(){
      if(null != progressDialog && progressDialog.isShowing()){
        progressDialog.dismiss();
      }
     }

    void someMethod(){
     showProgressDialog("Loading...");
     doBackgroundJob(param, new RequestCallBack() {

     public void onRequestCompleted(String message, boolean isSuccess) {
                hideProgressDialog();
                if(isSuccess){

                }else{
                    //do something on error
                }
            }
        });

      } 
    ```

3.  这是一个可选的，我定义了一个接口来通知而不是特定的类，对于每个响应我使用一个类，所以在基类中，我不在乎响应是什么。就这个：

    ```
    public interface OnRequestCompleted<TResponse>  {
       void requestCompleted(TResponse response);
    }

    public abstract class BaseRequest<TResponse> implements IRequest{
          protected OnRequestCompleted<TResponse> delegate;
          protected Class<TResponse> responseClass;

          @Override
          public void send() {
             new HttpTask().execute();
          }

          private class HttpTask extends AsyncTask<Void, Void, String> {
          //...

          @Override
          protected void onPostExecute(String result) {
              if (null != response && null != delegate) {
              delegate.requestCompleted(response);
          }
         }
       }

      // the response example
      public class GroupResponse {
      public static class Clip {
              public int clipId;
          public String detail;
      }

      public static class Movie {       
      public int movieId;
              public String detail;
      }  

     } 
    ```

    在 的子类中`BaseRequest`，我会确切地告诉它响应类是什么（电影，剪辑......）
    希望有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:26:34.867

如果您已经使用它并且它对您有用，那么将其通用化并节省数十次重新实现同一事物的时间（和错误）是有意义的。如果您发现自己复制粘贴了几乎没有差异的大段代码，您应该将其转换为某种库函数或类。否则，如果您以后发现问题，您将不得不在十几个地方修复它。即使您以后想出更好的方法来做事也没关系-在一个地方更改它比十几个地方更容易。

我对您的解决方案唯一真正的问题是我不会向它添加进度条 - 我会在调用代码和 onSuccess/onError 实现中处理它。这样，您还可以将它重用于不需要设置 UI 的后台调用。我尽量让我的 UI 决策远离数据抓取代码，MVC 模式很好。

# xml - XSLT 如果属性存在/否则

> ID：14347094
> 
> 赞同：7
> 
> 时间：2013-01-15T21:17:18.473
> 
> 标签：xml, xslt, xpath

我对 XSLT 很陌生，因此我想知道检查属性是否存在的最佳实践是什么。我的 XML 看起来像这样：

```
<root>
    <languages>
        <lang id="EN">English<lang>
        <lang id="FR">French<lang>
        <lang id="DE">German</lang>
    </languages>
    <items>
        <item lang="EN">test 1</item>
        <item>test 2</item>
        <item lang="FR">item 3</item>
    </items>
</root> 
```

请注意，“item”元素的“lang”属性是可选的。

现在我想使用 -loop 遍历这些项目，同时检查它是否具有“lang”属性。如果是这样，我想使用 ID 获取整个字符串（例如 EN -> 'English'）。如果未设置属性，我希望它写“无语言集”或类似的东西。

现在我使用以下代码，但我在质疑自己是否不能以更有效的方式完成。

```
<xsl:for-each select="//root/items/item">
    <xsl:variable name="cur_lang" select="@lang" /> <!-- first I store the attr lang in a variable -->
    <xsl:choose>
        <xsl:when test="@lang"> <!-- then i test if the attr exists -->
            <xsl:value-of select="//root/languages/lang[@id=$cur_lang]" /> <!-- if so, parse the element value -->
        </xsl:when>
        <xsl:otherwise>
            No language set <!-- else -->
        </xsl:otherwise>
    </xsl:choose>
</xsl:for-each> 
```

有什么建议/提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T21:21:37.240

使用密钥可能更有效。您使用模板外部的顶级元素定义键

```
<xsl:key name="langByCode" match="lang" use="@id" /> 
```

然后在循环中你可以简单地说

```
<xsl:when test="@lang"> <!-- then i test if the attr exists -->
   <xsl:value-of select="key('langByCode', @lang)" />
</xsl:when> 
```

但一般来说，对整个事情更自然的 XSLT 方法是使用模板匹配而不是`for-each`and `if`：

```
<xsl:template match="item[@lang]">
  <xsl:value-of select="key('langByCode', @lang)" />
</xsl:template>

<xsl:template match="item">
  <xsl:text>No language set</xsl:text>
</xsl:template> 
```

有了这些模板，您就可以这样做`<xsl:apply-templates select="/root/items/item" />`，它会自动为每个项目选择适当的模板。规则是它将使用最具体的模板，因此`item[@lang]`对于那些具有属性的项目使用一个模板，而对于那些没有`lang`属性的项目则使用普通模板`item`。

第三种可能性是我在 SO 上学到的一个小技巧，将整个 if/else 检查放入单个 XPath 表达式

```
<xsl:value-of select="
  substring(
    concat('No language set', key('langByCode', @lang)),
    1 + (15 * boolean(@lang))
  )" /> 
```

这里的技巧是，`boolean(@lang)`当被视为一个数字`1`时，是否存在 lang 属性，`0`如果不存在。如果有一个`lang="EN"`，比如说，那么我们构造一个字符串`"No language setEnglish"`，然后取从第 16 个字符开始的子字符串，即`"English"`。如果*没有*lang 属性，我们构造字符串`"No language set"`（因为空节点集的字符串值是空字符串）并取从第一个字符开始的子字符串（即整个字符串）。

您可以对其他属性使用相同的技巧，例如，假设我们有一个可选的颜色属性并且想要说明`"No color specified"`它是否不存在，您可以使用

```
<xsl:value-of select="substring(
   concat('No color specified', @color),
   1 + (18 * boolean(@color))
 )" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:07:52.617

如果您能够使用 XSLT 3.0，另一种选择是[地图](http://www.w3.org/TR/xslt-30/#map)（另一个有用的链接：[地图](http://dev.saxonica.com/blog/mike/2012/01/#000188)）。

**XML 输入**（固定为格式正确）

```
<root>
    <languages>
        <lang id="EN">English</lang>
        <lang id="FR">French</lang>
        <lang id="DE">German</lang>
    </languages>
    <items>
        <item lang="EN">test 1</item>
        <item>test 2</item>
        <item lang="FR">item 3</item>
    </items>
</root> 
```

**XSLT 3.0**

```
<xsl:stylesheet version="3.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:map="http://www.w3.org/2005/xpath-functions/map"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" extension-element-prefixes="xs map">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:variable name="lang-map" as="map(xs:string, xs:string)" 
        select="map:new(
        for $lang in /*/languages/lang 
        return 
            map{$lang/@id := $lang/string()}
        )"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="languages"/>

    <xsl:template match="item[@lang and map:contains($lang-map,@lang)]">
        <item><xsl:value-of select="$lang-map(current()/@lang)"/></item>
    </xsl:template>

    <xsl:template match="item">
        <item>No language found.</item>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<root>
   <items>
      <item>English</item>
      <item>No language found.</item>
      <item>French</item>
   </items>
</root> 
```

# java - BIRT 以编程方式从 CSV 数据源获取数据

> ID：14347095
> 
> 赞同：2
> 
> 时间：2013-01-15T21:17:18.557
> 
> 标签：java, csv, report, birt

我有使用 BIRT 2.6.1 运行时从 JDBC 数据源获取数据的代码，它工作正常。但我想将其更改为使用 CSV 文件。实现这一目标的代码是什么？

我有以下内容：

```
 OdaDataSourceHandle dsHandle = designFactory.newOdaDataSource(
            this.dataSourceName, "org.eclipse.birt.report.data.oda.jdbc" ); 
```

所以我正在寻找的是 csv 类型的第二个参数“extension id”。GUI中支持平面文件..所以它应该通过api公开。虽然我看到的唯一数据包是 jdbc 和 xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:35:24.783

知道了。“org.eclipse.datatools.connectivity.oda.flatfile”是 extensionId。我通过在设计模式下运行 birt 并检查 XML 获得。

# mysql - 在 MySQL 中加入两个表并按行 ID 添加值

> ID：14347103
> 
> 赞同：0
> 
> 时间：2013-01-15T21:17:43.660
> 
> 标签：mysql, join

给出了两个具有共同 id 和整数值的表：

```
table1:            table2:
| id   | val  |    | id   | val  |
+------+------+    +------+------+
| 1    |   0  |    | 1    |   1  |
| 2    |   1  |    | 1    |   1  |
| 3    |   1  |    |  2   |   2  |
| 4    |   2  |    |  2   |   2  |
| 5    |   2  |    |   3  |   2  |
                   |   3  |   2  |
                   |   3  |   2  |
                   |    4 |   6  |  <id shifted for readability> 
```

如何在一个查询中归档此结果：

```
result-table:
| id   | val  |
+------+------+
| 1    |   2  |
| 2    |   5  |
| 3    |   7  |
| 4    |   8  |
| 5    |   2  | 
```

**编辑：**

按照我得到的一些答案：

```
SELECT t1.id, t1.val + SUM(t2.val) AS val
FROM table1 t1
LEFT JOIN table2 t2 ON (t1.id = t2.id)
GROUP BY t1.id 
```

什么给了我：

```
id  val
1   2
2   5
3   7
4   8
5   NULL 
```

但又`2 plus nothing = 2`不是`NULL`。有不同的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:19:19.003

你忘了`group by`：

```
SELECT t1.id, t1.val - SUM(t2.val) AS val
FROM t1
JOIN table2 t2 ON (t1.id = t2.id)
GROUP BY t1.id 
```

当然，我不确定您为什么要尝试减去示例查询中的值。也许你的意思是`+`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:23:03.490

使用联合而不是加入：

```
 select id, sum(val)
     (
       SELECT t1.id, t1.val  as val 
       FROM table1 t1 
       union all # note this change to include all the value from 2 table  
       select t2.id, t2.val as val 
       from  table2 t2
      ) as unionTable
     groupby id; 
```

# css - 链接上的 CSS（格式为按钮）在 Safari 中显示不同

> ID：14347104
> 
> 赞同：1
> 
> 时间：2013-01-15T21:17:44.007
> 
> 标签：css, safari, hyperlink

我使用以下方式将一些链接设置为看起来像按钮：

a:link, a:visited, a:hover, a:active

但是我发现 a:active 样式在 Safari（PC 或 iPad 上）中不起作用。

我注意到 stackoverflow 按钮（问题、标签、用户等）在资源管理器和 Safari 中的工作方式相同。有谁知道使用什么 CSS 代码来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:28:59.670

如果你想检查 CSS，你可以使用浏览器工具来检查你的元素。只需右键单击一个元素并选择“检查元素”（措辞可能略有偏差）。这肯定适用于 FireFox、Chrome 和 Safari（我想也适用于其他现代浏览器）。这些将向您展示元素的源代码以及在其上应用的 CSS。您还可以搜索附加组件以提供更多功能。

回到你的问题。单击并按住链接时，我个人在 StackOverflow 上看不到任何特殊的 a:active 样式。您确定您没有将 a:active （单击/按住时链接的状态）与指向当前页面的链接样式混淆吗？

# g++ - 如何使用 cmake 将编译器命令行参数放在特定位置

> ID：14347107
> 
> 赞同：9
> 
> 时间：2013-01-15T21:17:52.317
> 
> 标签：g++, cmake, gnu, ld

所以我正在用两个静态库构建一个共享库。

[这个答案](https://stackoverflow.com/a/2649792/602340)说这样做的方法是`-Wl,--whole-archive`在我的静态库之前插入，`-Wl,--no-whole-archive`在它们之后。

因此，我目前在 cmake 中为共享库提供的是：

```
add_library(wittyPlus SHARED empty.cpp)
target_link_libraries(wittyPlus 
    ${wtdbosqlite}
    ${WT_LIBRARIES}
    ${DB_LIBRARIES}
    ${Boost_LIBRARIES}
    app models
) 
```

所以我需要的是它添加`-Wl,--whole-archive`之前`app`和`models`，然后`-Wl,--no-whole-archive`在它们之后（这样标准库导入不会被共享库导出）。

在 CMake 中最简单的方法是什么？

* * *

**补充：**所以我想尽可能多地使用标准的 cmake 东西，这样我就不必为 windows 构建做任何额外的工作，因为 CMake 友好地删除了平台上不支持的编译器定义。建成。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T21:43:24.577

好吧，这比我想象的要容易得多。

所以根据[cmake docs](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:target_link_libraries)：

> 以“-”开头的项目名称，但不是“-l”或“-framework”，被视为链接器标志。

所以修复只是为了：

```
add_library(wittyPlus SHARED empty.cpp)
target_link_libraries(wittyPlus 
    ${wtdbosqlite}
    ${WT_LIBRARIES}
    ${DB_LIBRARIES}
    ${Boost_LIBRARIES}
    "-Wl,--whole-archive"
    app models
    "-Wl,--no-whole-archive"
) 
```

我不知道它是否可以在 Windows 上运行，我希望它会因为 cmake 非常聪明。

用 objdump 查看结果，它似乎确实在导出中有很多提升的东西，所以我可能做错了什么。

```
objdump -C -t wittyPlus/libwittyPlus.so | grep -i boost 
```

但它确实有我需要链接的东西，所以这是向前迈出的一步。

任何其他答案仍然值得赞赏。基本上我想做的和这个问题一样：

[CMake：如何从子项目的所有静态库中创建一个共享库？](https://stackoverflow.com/questions/11429055/cmake-how-create-a-single-shared-library-from-all-static-libraries-of-subprojec)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-19T19:02:04.867

如果您自己构建静态库，则可以使用此方法：[https](https://stackoverflow.com/a/29824424/4069571) ://stackoverflow.com/a/29824424/4069571即首先将它们构建为对象库，然后将它们链接到各自的共享库和静态库中。

# c# - 类似于 c# 中的自定义集合的数据表

> ID：14347108
> 
> 赞同：0
> 
> 时间：2013-01-15T21:18:04.750
> 
> 标签：c#, data-binding, collections

理论上我将如何做到这一点。

简短：使用自定义集合像数据表一样存储数据，具有可变数量的字段和列......只要行是一致的。

长风：

2 或 3 类：字段、行，可选：表

通常我会做类似的事情，`List<Person> myList = new List<Person>;` 然后该列表可以绑定到 datagridview 并且列将基于 Person 类的属性。

要查看的代码：

```
List<row> table = new List<row>;
List<field> row0 = new List<field>;
row0.Add(new field(col1,"value1"));
row0.Add(new field(col2,"value2"));
row0.add(new field(col3,"value3"));
table.Add(row0);

dataGridView1.DataSource = table; 
```

理论输出：

```
|    |col 1 | col 2| col 3|
___________________________
|row0|value1|value2|value3|

public class cField
{
    public string Name { get; set; }
    public string Content { get; set; }
    public cField()
    {
    }

    public cField(string name, string content)
    {
        Name = name;
        Content = content;
    }
}

public class cRow:BindingList<cField>
{
    public cRow()
    {
    }
}
public class tables:BindingList<cRow>
{

    public tables()
    {
        fillTestData();
    }

    private void fillTestData()
    {
        for (Int32 i = 0; i < 10; i++)
        {
            cRow tRow = new cRow();

                for (Int32 x=0; x < 3; x++)
                {
                    cField f1 = new cField("ColumnName" + x.ToString(), "content" + x.ToString());
                    tRow.Add(f1);
                }
                base.Items.Add(tRow);
        }                        
    }
}

//example class which shows the output of what I'd like.
public class eField
{
    public string ColumnName0 { get; set; }
    public string ColumnName1 { get; set; }
    public string ColumnName2 { get; set; }

    public eField(string colName0, string colName1, string colName2)
    {
        ColumnName0 = colName0;
        ColumnName1 = colName1;
        ColumnName2 = colName2;
    }
}

public class eTable : BindingList<eField>
{
    public eTable()
    {
        base.Add (new eField ("content","content", "content"));
        base.Add(new eField("content", "content", "content"));
        base.Add(new eField("content", "content", "content"));
    }
} 
```

现在这是表单的代码。

```
public partial class Form1 : Form
{

    tables t;

    public Form1()
    {
        InitializeComponent();

    }

    private void Form1_Load(object sender, EventArgs e)
    {
        t = new tables ();

        dataGridView1.DataSource = t;

        dataGridView2.DataSource = t[0];

        eTable table3 = new eTable ();

        dataGridView3.DataSource = table3;

    }
} 
```

如果您将该代码放入项目中...您将看到第一个绑定...将一些内置内容从绑定列表中拉入grid1。当我希望它们水平时，Grid2 会垂直列出我的字段。

网格 3 准确地显示了我希望我的输出如何......但是我无法使用要模仿数据表的集合结构来实现它......（在代码中提供）

免责声明：我缺少研究此问题所需的关键字。我没有找到太多。我发现的最接近的东西与 linq 和 pivots 有关。但他们的输出似乎都不像我描述的那样。

我到处都使用自定义集合，所以我想保持我的代码非常相似，而不是使用数据表。这是我第一次需要我的收藏品以这种方式表现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:55:38.013

从数据库加载数据后，听起来您正在寻找要在内存中使用的对象集合。可以对内置的 System.Data 对象进行计算等，但是比较繁琐，数据量大时效果不佳。

我们大量使用 System.Data 对象来呈现数据。我们稍后会尝试在数据库中进行计算并将结果呈现为 DataSet，因此客户端不必进行任何数据操作。

我们的一些模块需要更复杂的数据处理。在一个案例中，我们使用了一组对象，这些对象代表了要动态处理的大量数据。列是固定的，因此它们很容易作为每个对象的属性来实现。当应用程序呈现这些数据时，它会生成一个小的摘要数据集以显示在网格中。

我们有另一个模块，其中有可以有值的字段，或者它们也可以基于其他字段进行计算。对于这个模型，我们选择使用依赖于其他对象的对象，这些对象构成了一种计算网络。更改一个值，ValueChanged 事件会通知任何需要计算它们的依赖字段，这会更改这些值等。（这是一个粗略的简化。）

如果我必须呈现可变数量的列，我会认真考虑坚持使用 System.Data.DataSet。如果这真的不适合您，您可能会考虑将列名映射到该列的行值集合的哈希表。我相信这就是 System.Data.DataTable 的实现方式；它按列而不是按行存储值。然后行对象将知道它的行索引以及如何从列集合中获取值。

# javascript - Onmouseover/out

> ID：14347109
> 
> 赞同：0
> 
> 时间：2013-01-15T21:18:11.257
> 
> 标签：javascript, onmouseout

我有两个问题。

1.  鼠标悬停功能非常快，而且肯定不能正常工作。我为 onmouseout 状态创建了一个单独的函数，但它没有帮助。
2.  类正确更改，但它保持更改并且不会回到原来的类。这取决于链接是否在所选页面上。任何帮助将不胜感激

JAVASCRIPT：

```
function changeRollover(rollover) {
    var rollItems = document.getElementById(rollover);
    var rollLinks = rollItems.getElementsByTagName('a');
    var noOfLinks = rollLinks.length;
    for (var r = 0; r < noOfLinks; r++) {
        var normalText = rollLinks[r].innerHTML;
        var rolloverText = rollLinks[r].title;
        var rolloverItem = document.getElementById(rollover);
        rolloverItem.innerHTML = "<a href='#' title='" + normalText + "'>" + rolloverText + "</a>";
        rolloverItem.class = rollover + "rollover";    
    }
} 
```

HTML：

```
<div class="nav">
    <ul id="NavItems">
        <li id="item0" class="selected"  onClick="changeClass(this.id)" 
                       onmouseover="changeRollover(this.id)">
            <a href="#" title="Shop Trends">Collections</a>
        </li>
        <li id="item1" onClick="changeClass(this.id)" 
                       onmouseover="changeRollover(this.id)">
            <a href="#" title="Shop Everything" >All Jewlery</a>
        </li>
        <li id="item2" onmouseover="changeRollover(this.id)" 
                       onClick="changeClass(this.id)">
            <a href="#" title="Shop Press">As Seen On</a>
        </li>
        <li id="item3" onmouseover="changeRollover(this.id)" 
                       onClick="changeClass(this.id)">
            <a href="#" title="fashion + shop">Collaborations</a>
        </li>
        <li id="item4" onmouseover="changeRollover(this.id)" 
                       onClick="changeClass(this.id)">
            <a href="#" title="Shop Designer">Designer Pop Ups</a>
        </li>
    </ul>
    <div class="shipping">
        <a href="#">start your free orders today<br>
        *** click here for more information ***</a>
    </div>
</div>
<!-- .nav --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:40:05.137

使用一些简单的 CSS 可以更好地实现您想要的效果（从可用性的角度来看是可疑的，但除此之外）：

```
#NavItems .hover {
  display: none;
}
#NavItems:hover .hover {
  display: inline;
}
#NavItems:hover .normal {
  display: none;
} 
```

这需要这样的标记：

```
<ul id="NavItems">
  <li id="item0">
    <a href="#">
      <span class="normal">Collections</span><span class="hover">Shop Trends</span>
    </a>
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:35:04.050

根据您的浏览器兼容性要求，我建议您使用 onmouseenter 作为函数的触发器。

[DOM 事件 - 浏览器兼容性](http://www.quirksmode.org/dom/events/index.html)

但一方面，您缺少一个可以为您重置课程的 onmouseout 功能。将类附加到元素后，如果您希望它消失，也必须手动将其删除，具体取决于用户的操作。因此，创建一个类似于 resetRollover 函数的东西，如下所示，并附加一个触发该函数的 onmouseout DOM 侦听器：

```
function resetRollover(rollover) {
  var className = document.getElementById(rollover).className;

  document.getElementById(rollover).className = className.substring(0, indexOf(' rollover'));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:43:05.670

问题是您的`onmouseover`处理程序在`li`s. 当鼠标悬停在`<a>`s 中的 s 上时，再次触发s 的`<li>`“重新进入” 。`onmouseover``<li>`

[此处](http://jsfiddle.net/nivas/SNfAx/)的示例：这与您的代码相同，我添加了一些颜色。如果您仅在黑色部分 (the `<li>`) 上移动鼠标，则会根据需要进行翻转。但是当你在绿色部分（`<a>`s）上移动鼠标时。

作为一种解决方案，您可以处理`<a>`s 上的翻转或更改您的基本设计（请参阅@Thomas 的回答）

# jquery - 鸟舍照片编辑器黑客

> ID：14347110
> 
> 赞同：3
> 
> 时间：2013-01-15T21:18:11.600
> 
> 标签：jquery, aviary

我正在使用 Aviary 照片编辑器，我希望用户无需编写 PHP 即可使用自己的照片。所以我创建了一个代码，以便用户放置图像的 url，然后他们可以在那里编辑它，代码是

```
$(function() {
 $('#imgsrc').hide();
  $('#edit').hide();
$('#sub_img').click(function(e) {
  e.preventDefault();
     var grant= $('#photo_url').val();
   $('#imgsrc').attr('src', grant).show();
   $('#edit').show();
 });
}); 
```

虽然我收到了这个错误

`There was a problem loading your image provided by URI to the`网址`config key. Either you typed the address wrong, it's not reachable by the public (and our service at http://featherservices.aviary.com/), or it doesn't really exist. Or maybe YOU don't and this is all just a dream. WAKE UP!`

鸟舍的代码是

```
<div id="photo_edit">
 <!-- Load Feather code -->
  <script type="text/javascript" src="http://feather.aviary.com/js/feather.js"></script>
 <div id='injection_site'></div>

  <input type="text" id="photo_url" placeholder="URL of Image"/>
     <button id="sub_img">Submit Image</button>

    <img id="imgsrc" src=""/>
      <!-- Instantiate Feather -->
 <script type="text/javascript">
   var featherEditor = new Aviary.Feather({
   apiKey: 'LuucZHMFU0yLQSnGBgAqsg',
   apiVersion: 2,
   tools: 'enhance,resize,crop,contrast,sharpness,text,whiten,effects,orientation,warmth,brightness,saturation,draw,redeye,blemish',
   appendTo: '',
   onSave: function(imageID, newURL) {
       var img = document.getElementById(imageID);
       img.src = newURL;
   },
   onError: function(errorObj) {
       alert(errorObj.message);
   }
   });
   function launchEditor(id, src) {
   featherEditor.launch({
       image: id,
       url: src
   });
  return false;
   }
 </script>

 <!-- Add an edit button, passing the HTML id of the image and the public URL ot the image -->
 <p><input id="edit" type='image' src='http://images.aviary.com/images/edit-photo.png' value='Edit photo' onclick="return launchEditor('imgsrc', 'onImageLoad');" /></p>
         </div> 
```

以前有人用过这个程序吗？这只是假设是一个 hack，我不想将 PHP 用于主机映像。如果可能的话，它应该只是使用 url 充当图像编辑器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:22:07.610

如果您允许用户从各种网络资源上传文件。

您可以尝试使用 Filepicker.io 插件来实现上传功能。

[https://developers.filepicker.io/docs/web/](https://developers.filepicker.io/docs/web/)

# javascript - 如何更改屏幕中的窗口

> ID：14347115
> 
> 赞同：0
> 
> 时间：2013-01-15T21:18:25.793
> 
> 标签：javascript, jquery

好吧，这个问题真的很模糊。请原谅我。我的要求是这样的

用户将在第一个屏幕上输入一些个人数据（如出生日期、性别）。在下一个屏幕上，他将回答一些筛选问题（总共 8 个问题）。因此，我不想在一个屏幕上显示所有问题，而是创建一个小窗口/框架，我将在其中显示第一个问题，一旦用户回答该问题并单击“下一步”，他将转到包含第二个问题的下一个窗口（但是屏幕是一样的）。我只想更改屏幕的中间部分。

我真的无法以正确的方式提出这个问题。但是请尽可能多地提出问题，如果您有一些信息，请分享。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:23:35.407

您可以查看任何自定义 UI 小部件，例如 jqxTabs，例如：[http ://www.jqwidgets.com/jquery-widgets-demo/demos/jqxtabs/wizard.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxtabs/wizard.htm)

在上面的示例中，有一个使用选项卡 UI 组件创建的向导。

如您所见，当您在第一部分插入有效信息时，向导允许您转到下一个部分，依此类推。

有不同的免费小部件也非常适合。例如[jQuery UI 选项卡](http://jqueryui.com/tabs/)就是这样的小部件。

# wpf - 后台工作程序运行时未调用计时器

> ID：14347118
> 
> 赞同：1
> 
> 时间：2013-01-15T21:18:39.423
> 
> 标签：wpf, multithreading, user-interface, timer, backgroundworker

我有一个带有按钮的 WPF 窗口，它产生一个 BackgroundWorker 线程来创建和发送电子邮件。在此 BackgroundWorker 运行时，我想显示一个用户控件，该控件显示一些消息，后跟动画“...”。该动画由用户控件内的计时器运行。

即使我的邮件发送代码在 BackgroundWorker 上，用户控件中的计时器也永远不会被调用（嗯，它会，但只有在 Backgroundworker 完成时才会调用，这有点违背了目的......）。

WPF窗口中的相关代码：

```
private void button_Send_Click(object sender, RoutedEventArgs e)
{
    busyLabel.Show(); // this should start the animation timer inside the user control

    BackgroundWorker worker = new BackgroundWorker();
    worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
    worker.DoWork += new DoWorkEventHandler(worker_DoWork);
    worker.RunWorkerAsync();      
}

void worker_DoWork(object sender, DoWorkEventArgs e)
{
    this.Dispatcher.Invoke((Action)(() =>
    {      
        string body = textBox_Details.Text;
        body += "User-added addtional information:" + textBox_AdditionalInfo.Text; 

        var smtp = new SmtpClient
        {
            ...
        };

        using (var message = new MailMessage(fromAddress, toAddress)
        {
            Subject = subject,
            Body = body
        })
        {
            smtp.Send(message);
        }
    }));

} 
```

用户控件（“BusyLabel”）中的相关代码：

```
public void Show()
{
    tb_Message.Text = Message;
    mTimer = new System.Timers.Timer();
    mTimer.Interval = Interval;
    mTimer.Elapsed += new ElapsedEventHandler(mTimer_Elapsed);
    mTimer.Start();
}

void mTimer_Elapsed(object sender, ElapsedEventArgs e)
{
    this.Dispatcher.Invoke((Action)(() =>
    { 

        int numPeriods = tb_Message.Text.Count(f => f == '.');
        if (numPeriods >= NumPeriods)
        {
            tb_Message.Text = Message;
        }
        else
        {
            tb_Message.Text += '.';
        }         
    }));
}

public void Hide()
{
    mTimer.Stop();
} 
```

任何想法为什么它被锁定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:22:34.717

`Dispatcher.Invoke`在您的方法中使用`worker_DoWork`是将执行放回 UI 线程，因此您并没有真正异步地完成工作。

根据您显示的代码，您应该能够删除它。

如果在工作完成后需要显示结果值，请将其放入处理程序的事件参数中`DoWorkEventArgs`，您将能够（在 UI 线程上）访问它。`worker_RunWorkerCompleted`

使用的一个主要原因`BackgroundWorker`是编组是在幕后处理的，所以你不应该使用`Dispatcher.Invoke`.

# vb.net - 为 ARM 和 Windows RT 编译我的 VB.NET WinForms 应用程序

> ID：14347120
> 
> 赞同：4
> 
> 时间：2013-01-15T21:18:59.447
> 
> 标签：vb.net, winforms, windows-8, visual-studio-2012, arm

现在[Windows RT 已经越狱了](http://forum.xda-developers.com/showthread.php?t=2092158)，我想将我的 VB 应用程序移植到 Windows RT。如何为 ARM 编译我的 VB.NET WinForms 应用程序？可以在 VS Express 中完成吗？我有“适用于 Windows 8 的 VS Express”和“适用于桌面的 VS Express”。我的应用程序不使用自定义库或控件，因此只要可以为 ARM 编译它就不会成为问题。是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:25:36.503

您只需要按原样使用应用程序的构建输出。要记住的一个重要因素是，如果不移植这些非托管库，任何 P/Invokes 或对非托管代码的依赖项很可能*无法*在 Windows RT 上运行。只要您的项目是 AnyCPU，它就应该可以工作。

CLR（公共语言运行时）将为您对 ARM 处理器指令进行实际的 JIT（即时）编译。无需重新编译。

# debian - Debian Squeeze 上不支持使用 Kerberos 的 NFSv4 加密类型

> ID：14347125
> 
> 赞同：0
> 
> 时间：2013-01-15T21:19:21.437
> 
> 标签：debian, kerberos, nfs

我要使用 Kerberos 为 NFSv4 设置测试安装。

机器从 LDAP 获取用户信息，从 Kerberos 获取凭据。我可以使用 kerberized 帐户登录机器，即包括 PAM 在内的基本 Kerberos 设置正在运行。我可以使用基于主机的访问设置 NFSv4，它也运行良好。

因此，下一步我将子网掩码更改为“krb5”。

```
mount -t nfs4 -o sec=krb5 nfs4.mgr:/test mnt
mount.nfs4: access denied by server while mounting nfs4.mgr:/test 
```

给 gssd 几个 -v 开关，我在日志中看到以下内容：

```
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: handling gssd upcall (/var/lib/nfs/rpc_pipefs/nfs/clntc)
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: handle_gssd_upcall: 'mech=krb5 uid=0 '
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: handling krb5 upcall (/var/lib/nfs/rpc_pipefs/nfs/clntc)
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: process_krb5_upcall: service is '<null>'
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: Full hostname for 'nfs4.mgr' is 'nfs4.mgr'
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: Full hostname for 'nfs4.mgr' is 'nfs4.mgr'
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: Key table entry not found while getting keytab entry for 'root/nfs4.mgr@MGR'
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: Success getting keytab entry for 'nfs/nfs4.mgr@MGR'
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: INFO: Credentials in CC 'FILE:/tmp/krb5cc_machine_MGR' are good until 1358369976
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: INFO: Credentials in CC 'FILE:/tmp/krb5cc_machine_MGR' are good until 1358369976
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: using FILE:/tmp/krb5cc_machine_MGR as credentials cache for machine creds
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: using environment variable to select krb5 ccache FILE:/tmp/krb5cc_machine_MGR
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: creating context using fsuid 0 (save_uid 0)
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: creating tcp client for server nfs4.mgr
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: DEBUG: port already set to 2049
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: creating context with server nfs@nfs4.mgr
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: in authgss_create_default()
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: in authgss_create()
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: authgss_create: name is 0x1bbee10
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: authgss_create: gd->name is 0x1bb46e0
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: in authgss_refresh()
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: struct rpc_gss_sec:
Jan 15 22:00:11 nfs4 rpc.gssd[8116]:      mechanism_OID: { 1 2 134 72 134 247 18 1 2 2 }
Jan 15 22:00:11 nfs4 rpc.gssd[8116]:      qop: 0
Jan 15 22:00:11 nfs4 rpc.gssd[8116]:      service: 1
Jan 15 22:00:11 nfs4 rpc.gssd[8116]:      cred: 0x1bb9ae0
Jan 15 22:00:11 nfs4 rpc.gssd[8116]:      req_flags: 00000002
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: rpcsec_gss: gss_init_sec_context: (major) Unspecified GSS failure.  Minor code may provide more information - (minor) No supported encryption types (config file error?)
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: in authgss_destroy()
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: in authgss_destroy_context()
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: authgss_destroy: freeing name 0x1bb46e0
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: authgss_create_default: freeing name 0x1bbee10
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: WARNING: Failed to create krb5 context for user with uid 0 for server nfs4.mgr
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: WARNING: Failed to create machine krb5 context with credentials cache FILE:/tmp/krb5cc_machine_MGR for server nfs4.mgr
Jan 15 22:00:11 nfs4 rpc.gssd[8116]: WARNING: Machine cache is prematurely expired or corrupted trying to recreate cache for server nfs4.mgr 
```

每次挂载调用都会发生两次。任何想法这意味着什么？它可能引用哪个配置文件？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:09:10.360

我相信 Debian Squeeze 中的 NFSv4 实现仍然是 DES-only。（很长一段时间以来，NFSv4 实现一直存在这个问题。）但是，所有现代 Kerberos 实现都不再默认允许 DES，因为它对于良好的安全实践来说太弱了。

至少，您可能需要添加：

```
allow_weak_crypto     = true 
```

到客户端的`[libdefaults]`部分`/etc/krb5.conf`。您的 KDC 还需要支持 DES 服务票证请求。您需要确保 NFSv4 服务器使用的 Kerberos 主体只有 DES 加密类型；如果它有任何其他 enctype，客户端会更喜欢它们（因为它们更强大），但是服务器将无法理解身份验证。

# android - Android OJDBC 幻象异常

> ID：14347129
> 
> 赞同：1
> 
> 时间：2013-01-15T21:19:26.150
> 
> 标签：android, exception, ojdbc

我正在尝试将我的 android 应用程序连接到我的 oracle 10g DB，我正在使用 JDK 1.6、OJDBC14.jar 并使用 4.+ 应用程序。我曾经对驱动程序有一些问题，但这是最好的一个：在执行此代码后：

```
String url="jdbc:oracle:thin:usr/pwd@r2d2.iut-orsay.u-psud.fr:1521:etudom";
Connection co = null;

try {
    Class.forName("oracle.jdbc.OracleDriver");
    popUp("Driver Ok");
}
// Should never happend
catch (ClassNotFoundException e){
    popUp("ERROR: Driver's missing");
    //System.exit(1);
}
// Unknow problem
catch (Exception e){
    popUp("ERROR : " + e.getMessage() + "\nFrom: " + e.getCause());
}

try {
    co = DriverManager.getConnection(url);
    popUp("Connection ok");
}
// In case of internet problem
catch (SQLException e) {
    popUp("Throw from SQLException\nERROR : " + e.getMessage());
    //System.exit(1);
}
// unknown problem
catch (Exception e){
    popUp("ERROR from getConnection :\nMessage: " + e.getMessage() + "\nFrom: " + e.getCause() + "\nMessage extra: "+e.getLocalizedMessage());
} 
```

我有一个这样的弹出窗口：

> 来自 getConnection 的错误：消息：null 来自：null 额外消息：null

日志或控制台中没有输出。

我真的迷路*了*

任何帮助都会很棒！

Ps：对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:54:18.390

您无法将设备连接到 Oracle DB 的原因是，移动设备不具备执行此类操作的能力，因为它们没有为现有的大量数据库构建驱动程序。但是，为了将您的应用程序连接到 Oracle DB，您必须创建所谓的 a**`Web Service`**或 an**`API`**来完成工作。查看这些教程，它们应该可以帮助您滚动：

*   [如何连接Android和PHP、MySQL](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)（这里的概念是一样的，用你的Oracle DB代替）
*   [Oracle 移动数据库服务器](http://www.oracle.com/technetwork/products/database-mobile-server/overview/index.html?origref=https://stackoverflow.com/questions/8894665/what-is-the-best-way-to-connect-between-android-and-oracle-database)
*   [通过 java 连接 Android 到 Oracle](http://androracle.blogspot.in/2012/07/java-class-as-server-for-client-with.html)

# actionscript-3 - NotificationType.CRITICAL 仅在加载的文件是新文件时才需要触发

> ID：14347130
> 
> 赞同：0
> 
> 时间：2013-01-15T21:19:34.260
> 
> 标签：actionscript-3, air, flash-cs5

我有一个内置于 Flash cs5 中的 Adob​​e Air 桌面留言板应用程序，它在动态文本字段中加载一个外部“.txt”文件，并每 2 分钟检查一次新文件。我需要它来通知用户（NotificationType.CRITICAL），只有当文件是新的，而不是每次加载它时。是否可以？

应用程序中的所有代码：

```
NativeApplication.nativeApplication.startAtLogin=true

stage.nativeWindow.alwaysInFront=true;

//external text file load and recheck every 2 minutes

var myInterval:uint  = setInterval (loadUrl, 120000);
var loader:URLLoader = new URLLoader(new URLRequest("https://my_text_file.txt"));
loader.addEventListener(Event.COMPLETE, completeHandler);

function completeHandler(event:Event):void {
  var loadedText:URLLoader = URLLoader(event.target);
if(myText_txt.htmlText!=loadedText.data){
   myText_txt.htmlText = loadedText.data;
     stage.nativeWindow.notifyUser(NotificationType.CRITICAL) 
}else {
  //do nothing
   }
}

function loadUrl():void {
    loader = new URLLoader(new URLRequest("https:///my_text_file.txt"));
loader.addEventListener(Event.COMPLETE, completeHandler);
}

 // button control

Minimize_BTN.addEventListener(MouseEvent.CLICK, minimize);
function minimize(e:MouseEvent){
stage.nativeWindow.minimize();

}

drag_BTN.addEventListener(MouseEvent.MOUSE_DOWN, drag);
function drag(e:MouseEvent){
stage.nativeWindow.startMove();

}

stop(); //Stop on the frame you want 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:56:27.513

您为什么不使用[FileReference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html)对象来了解一些属性，例如[modifyDate](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#modificationDate)并基于此验证文件是否不同，您还可以测试它的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:38:46.157

*如果 myText_txt 字段正在修改加载的文本（例如，如果 myText_txt 的condenseWhite*属性设置为 true），您的代码可能不起作用。确定文本是否已更改的更准确方法是将其存储在名为 oldText 的字符串变量中，*然后*将*oldText*与新加载的文本进行比较。

这是您重新编写的部分代码以包含*oldText*变量。这段代码也更高效，因为它只实例化一些变量一次，并且避免了重复一些代码：

```
import flash.net.URLRequest;

function completeHandler(event:Event):void
{
    var newText:String = loader.data;
    if(newText != oldText)
    {
            myText_txt.htmlText = newText;
            stage.nativeWindow.notifyUser(NotificationType.CRITICAL);
            oldText = newText;
    }
}

function loadUrl():void
{
    loader.load(req);
}

// Initialize your variables and event handlers only one time
var req:URLRequest = new URLRequest("https:///my_text_file.txt");

// Set cacheResponse to false to prevent a successful response
// from being cached.
req.cacheResponse = false;

// And don't bother checking the cache, either. 
// Not necessary, but the request will execute a little faster.
req.useCache = false;

var loader:URLLoader = new URLLoader();
loader.addEventListener(Event.COMPLETE, completeHandler);

// Use oldText inside completeHandler() to determine 
// whether the file's text has changed
var oldText:String = "";

var myInterval:uint = setInterval(loadUrl, 120000);

// Start loading the text right away
loadUrl(); 
```

# ssas - 构建事实表以在 SSAS 中得出度量

> ID：14347137
> 
> 赞同：0
> 
> 时间：2013-01-15T21:19:57.770
> 
> 标签：ssas, mdx, measure

我的目标是构建一个事实表，用于在 SSAS 中得出度量。我正在建立的衡量标准是“平均就业年限”。该度量将部署在仪表板中，用户将能够选择一个日历周期并向下钻取到月、周和天。

这是事务数据的样子：

```
DeptID     EmployeeID   StartDate   EndDate
--------------------------------------------
001        123           20100101   20120101   
001        124           20100505   20130101 
```

我的事实表应该有哪些字段？我应该在哪些字段上进行聚合？怎么平均呢？任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T00:18:43.900

每当您设计事实表时，首先要问自己的问题是：

1.  您正在分析的业务流程是什么？
2.  相关事实是什么？
3.  您想通过哪些维度来分析事实？
4.  事实表中最低（最少聚合）的详细程度代表什么，即事实表的*粒度*是什么？

该过程似乎是人力资源（HR）。

您已经知道工作年限这一事实，您可以轻松计算：`EndDate - StartDate`. 显而易见的维度是部门、员工、日期（开始和结束的两个角色扮演维度）。

在这种情况下，由于您正在寻找“平均工作年限”作为衡量标准，因此粒度似乎应该是按部门划分的单个员工（当员工转移时，您的交易数据可能会在`EmployeeID`不同的列表下列出）。`DeptID`

然后，您的星型模式将如下所示：

```
Fact_HR
DeptKey   EmployeeKey   StartDateKey   EndDateKey  EmploymentLengthInDays
-------------------------------------------------------------------------
10001     000321         20100101       20120101    730
10001     000421         20100505       20130101    972

Dim_Department
DeptKey   DeptID   Name   ... (other suitable columns)
------------------------- ...
10001     001      Sales  ...

Dim_Employee
EmployeeKey   EmployeeID  FirstName  LastName  ... (other suitable columns)
---------------------------------------------- ...
000321        123         Alison     Smith     ...
000421        124         Anakin     Skywalker ...

Dim_Date
DateKey    DateValue  Year  Quarter Month Day ... (other suitable columns)
00000000   N/A        0     0       0     0   ...
20100101   2010-01-01 2010  1       1     1   ...
20100102   2010-01-02 2010  1       1     2   ...
...        ...              ...     ...   ... ... 
(so on for every date you want to represent) 
```

以结尾的每一列`Key`都是代理键。您感兴趣的事实是`EmploymentLengthInDays`，您可以得出一个度量值`Avg. Employment Length`，并使用所有维度的平均值进行聚合。

现在您可以提出以下问题：

*   按部门划分的平均就业时间。
*   从 2011 年开始或到 2010 年 9 月结束的员工的平均就业年限。
*   给定员工的平均就业时间（跨他/她工作的每个部门）。

**奖励**：您还可以向使用同一列的多维数据集添加另一个度量，但有一个 SUM 聚合器，这可能被称为`Total Employment Length`. 对于给定的员工，这将告诉您该员工为公司工作了多长时间，但在一个部门中，它将告诉您该部门可用的总工日。只是一个单一事实如何变成多个衡量标准的例子。

# c# - Does WebClient.DownloadFileAsync overwrite the file if it already exists on disk?

> ID：14347139
> 
> 赞同：11
> 
> 时间：2013-01-15T21:20:02.927
> 
> 标签：c#, asynchronous, webclient

I can't find any information on my question. Please excuse me if my search efforts have not been good enough to find the answer. I just want to avoid spinning my wheels.

Thanks!

Follow up: If it doesn't overwrite, how can I get it to (if possible)?

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-15T21:28:41.167

A 30 second test confirms that it does overwrite

Test:

```
using (WebClient client = new WebClient())
{
    client.DownloadFileAsync(new Uri("http://download.microsoft.com/download/8/4/A/84A35BF1-DAFE-4AE8-82AF-AD2AE20B6B14/directx_Jun2010_redist.exe"), @"C:\Test.exe");
} 
```

Test.exe is overwitten if downlaoded again

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T21:49:39.680

The `WebClient` class is obviously designed to suppress a lot of detail and control. You can write your own method to asynchronously download a file very easily and control how the downloaded data is written to disc.

I know for sure that [this solution](http://www.codeproject.com/Articles/265751/Application-Auto-update-via-Online-Files-in-Csharp) at codeproject contains a class which downloads a file using `WebRequest` and `WebResponse` which allows for much more control. See the class contained named `webdata`. The code you can need to pay attention too:

```
FileStream newFile = new FileStream(targetFolder + file, FileMode.Create);
newFile.Write(downloadedData, 0, downloadedData.Length);
newFile.Close(); 
```

The [`FileMode Enumeration`](http://msdn.microsoft.com/en-us/library/system.io.filemode.aspx) contains a series of members that dictate the behaviour of saving a file `FileMode.CreateNew` will throw an `IOException` if a file already exists. As where `FileMode.Create` will overwrite files if possible.

If you insist on using `WebClient.DownloadFileAsync` then, as the other fellas have already mentioned: you can just inform the user that an existing file will be overwritten by means of an `OpenFileDialog` but some downloads can be time consuming and there's nothing to say that the user has not created another file during the download.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:34:09.217

If the file exists, yes.

If you are renaming it, or if you have it hooked into an `OpenFileDialogue()`, that's your discretion.

# c# - 如何在不循环且不发送文本的情况下将文本从一个文本框传输到另一个文本框？

> ID：14347144
> 
> 赞同：1
> 
> 时间：2013-01-15T21:20:13.970
> 
> 标签：c#

我已经搜索了我对您的要求，但我的措辞可能有误，所以我希望我输入的内容易于理解。

我正在使用两个文本框创建一个 Css 格式化程序`WinForms`

我希望它在第一个中采用 css 长格式代码，`textBoxLongFormat`然后在第二个中出现`textboxShortFormat`，作为 css 短代码。

我有一些用于文本框的代码和一个单独的其他代码类，用于在幕后更改格式。

该课程有效，但我遇到了问题，`textBoxLongFormat`我猜它会反过来发生，代码在自身循环而不是关闭，所以它没有发送格式，`textBoxShortFormat`所以什么也没有发生。

我知道我做错了什么，但我看不到它。我做错了什么？有你的帮助会很棒。

如果有帮助，这是文本框的代码。

我需要添加什么或使它起作用？

```
 private void textBoxLongFormat_TextChanged(object sender, EventArgs e)
    {
        CssFormatConverter cssLongFormatConverter = new CssFormatConverter();
        string longFormatCss = textBoxLongFormat.Text;
        string shortFormatCss = cssLongFormatConverter.ToShortFormat(longFormatCss);
        textBoxShortFormat.Text = shortFormatCss;
    }

    private void textBoxShortFormat_TextChanged(object sender, EventArgs e)
    {
        CssFormatConverter cssShortFormatConverter = new CssFormatConverter();
        string shortFormatCss = textBoxShortFormat.Text;
        string longFormatCss = cssShortFormatConverter.ToLongFormat(shortFormatCss);
        textBoxLongFormat.Text = longFormatCss;
    } 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:24:28.277

添加一个布尔检查，指示另一个文本框正在更新。

```
bool isUpdating = false;
private void textBoxLongFormat_TextChanged(object sender, EventArgs e)
{
    if (!isUpdating)
    {
        isUpdating = true;
        CssFormatConverter cssLongFormatConverter = new CssFormatConverter();
        string longFormatCss = textBoxLongFormat.Text;
        string shortFormatCss = cssLongFormatConverter.ToShortFormat(longFormatCss);
        textBoxShortFormat.Text = shortFormatCss;
        isUpdating = false;
    }
}

private void textBoxShortFormat_TextChanged(object sender, EventArgs e)
{
    if (!isUpdating)
    {
        isUpdating = true;
        CssFormatConverter cssShortFormatConverter = new CssFormatConverter();
        string shortFormatCss = textBoxShortFormat.Text;
        string longFormatCss = cssShortFormatConverter.ToLongFormat(shortFormatCss);
        textBoxLongFormat.Text = longFormatCss;
        isUpdating = false;
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:33:55.777

在更新 TextBox 之前，取消订阅它的`TextChanged`事件。然后更新。然后重新订阅。

在第一个中，那将是：

```
textBoxShortFormat.TextChanged -= textBoxShortFormat_TextChanged;
textBoxShortFormat.Text = shortFormatCss;
textBoxShortFormat.TextChanged += textBoxShortFormat_TextChanged; 
```

# java - 为什么我在这里得到 NullPointerException？

> ID：14347146
> 
> 赞同：1
> 
> 时间：2013-01-15T21:20:29.003
> 
> 标签：java, android, nullpointerexception

我在我的一项活动的 onCreate 方法中有此代码

```
 GetNews newsReporter = new GetNews(getApplicationContext());
    try{
        News[] allNews = newsReporter.getAllNews();
        Log.d("News Count", String.valueOf(allNews.length));
        String[] timestamps = new String[allNews.length];
        String[] texts = new String[allNews.length];

        for(int i=0;i<allNews.length;i++)
        {
//          timestamps[i] = allNews[i].getNewsTime();
            texts[i] = allNews[i].getNewsText();
//          Log.d("TimeStamp", timestamps[i]);
            Log.d("Text", texts[i]);
        }
    }catch(Exception e){
        Log.e("Error News", e.toString());
    } 
```

News Count 在 Logcat 中显示 6，这意味着 News[] 不为空。

但是我在 Line texts[i] = allNews[i].getNewsTime(); 上收到 NullPointerException

这是我的新闻课

```
 public class News {

    private int id;
    private String timestamp;
    private String text;

    public News(int i,String t, String ti)
    {   
        this.id=i;
        this.text = t;
        this.timestamp = ti;
    }

    public String getNewsTime()
    {
        return this.timestamp;
    }

    public String getNewsText()
    {
        return this.text;
    }
} 
```

PS News 存储在 SQLitedatabase 中，当我从 DDMS 中提取数据库时，它包含所有 6 行的有效值，其中没有一个为空。

编辑：这是我的 GetAllNews 方法

```
public News[] getAllNews(){

        SQLiteDatabase db = ConMan.OpenDBConnection();
        try{
            Cursor cursor = db.query(News_Table, Columns, null, null, null, null, null);
            if(cursor!=null)
            {
                cursor.moveToFirst();
            }

            News[] allNews = new News[cursor.getCount()];
            int i =0;
            while(cursor.isLast()){

                allNews[i] =  new News(Integer.parseInt(cursor.getString(0)),
                    cursor.getString(1),cursor.getString(2));
                cursor.moveToNext();
                i++;

            }

            db.close();
            ConMan.close();

            return allNews;

        }catch(Exception e)
        {
            Log.e("News DB Errors", e.getMessage());
        }

        return null;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:25:53.137

问题出在 newsReporter.getAllNews() 方法中。看起来它正在返回没有初始化值的数组。

```
News[] allNews = newsReporter.getAllNews(); 
```

意义，

**allNews.length**可能会为您带来一些价值。但是在每个索引处，您都缺少值，或者至少一个或多个索引缺少数组中的值。

像下面这样打印，看看你是否有值

```
for (News news : allNews)
    System.out.println(news); 
```

看起来它根本不会进入下一个块。

```
while(cursor.isLast()){
   allNews[i] =  new News(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1),cursor.getString(2));
   cursor.moveToNext();
   i++;
} 
```

检查**cursor.isLast()**方法是否返回 true 以进入此循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:25:43.640

```
 texts[i] = allNews[i].getNewsText(); 
```

最有可能的是，allNews[someIndex] 为空。当在 null 上调用 getnewsText() 时会抛出 NPE。最好的测试是输出 allNews[i] 或检查它是否为空。

```
 System.out.println(allNews[i]==null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:25:23.727

`size` **6 个**数组可以有**6 个** `null`引用。打印您的每个`News`对象`allNews`，我打赌 10 个奥巴马，至少在数组中的一个位置是`null`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T21:30:07.813

你是说 allNews[] 不为空，所以肯定是 News[] 包含空，所以 allNews[i].getNewsText() 会抛出异常。

# android - 当活动可见时调用 PreferenceActivity、Headers 和 onDestroy

> ID：14347148
> 
> 赞同：0
> 
> 时间：2013-01-15T21:20:51.403
> 
> 标签：android

我遇到了一些问题。

我有一个带有标题列表的 PreferenceActivity，每个标题都指向一个片段。这些片段显示为单个窗格（小显示）。

为了退出标题片段并返回 PreferenceActivity 本身的标题列表，我按下后退按钮（作为用户），或者`getActivity().onBackPressed()`在用户按下按钮后调用返回列表用户界面。

这让我回到了标题列表 PreferenceActivity，但它也调用了`onDestroy()`该活动的方法。

### 这是我不明白的：

为什么它`onDestroy()`在活动本身清晰可见时调用？既然活动是可见的，为什么它不调用`onCreate()`之后呢？

这也有一个副作用，即调用`onReset()`我用来创建首先生成标题的数据列表的加载器。这反过来又使它看起来像标题列表没有改变，即使我从列表中删除了一个项目，从而减少了标题的数量。如果我真的关闭并重新打开 PreferenceActivity，标题列表将是正确的，这表明加载程序本身正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:07:46.847

如果没有代码，我不完全理解这里发生了什么。但是从它的声音来看，您正在调用`onBackPressed()`该活动，因此无论片段如何都会发生。尝试`onBackPressed()`在活动中覆盖并在那里处理您的片段事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T14:34:14.980

标题以单窗格模式启动新活动。这可能就是您看到 onDestroy() 用于同一个命名活动的原因，因为它以不同的意图启动相同的活动。

对于未来的读者。

# yii - 别名“bootstrap.components.Bootstrap”无效

> ID：14347149
> 
> 赞同：2
> 
> 时间：2013-01-15T21:20:56.497
> 
> 标签：yii, yii-extensions

我已将引导扩展添加到我的 yii webapp 并按照安装指南中的说明进行安装。扩展文件夹中的所有文件夹都是 rwrwrw 但我收到上面写的错误。可能是什么原因？我已经从 yii::Import 中转储了路径，并且该路径是正确的。

谢谢！

**用代码编辑**

这是我的配置：

```
Yii::setPathOfAlias('bootstrap', dirname(__FILE__).'/../extensions/bootstrap');
//Yii::setPathOfAlias('bootstrap',     '/Users/gerritlober/Sites/yii/webapp/protected/extensions/bootstrap');

// This is the main Web application configuration. Any writable
// CWebApplication properties can be configured here.
return array(
'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..',
'name'=>'My Carpool',
'theme' => 'bootstrap',

// preloading 'log' component
'preload'=>array('log'),

// autoloading model and component classes
'import'=>array(
    'application.models.*',
    'application.components.*',
),

'modules'=>array(
    // uncomment the following to enable the Gii tool
    'gii'=>array(
        'class'=>'system.gii.GiiModule',
        'password'=>'xxx',
        // If removed, Gii defaults to localhost only. Edit carefully to taste.
        'ipFilters'=>array('127.0.0.1','::1'),
        'generatorPaths'=>array(
            'bootstrap.gii',
        ),
    ),
),

// application components
'components'=>array(
    'user'=>array(
        // enable cookie-based authentication
        'allowAutoLogin'=>true,
    ),
    // uncomment the following to enable URLs in path-format

    'urlManager'=>array(
        'urlFormat'=>'path',
        'rules'=>array(
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
    ),
    /*
    'db'=>array(
        'connectionString' => 'sqlite:'.dirname(__FILE__).'/../data/testdrive.db',
    ),*/
    // uncomment the following to use a MySQL database
    'db'=>array(
        'connectionString' => 'mysql:host=localhost;dbname=carpool_dev',
        'emulatePrepare' => true,
        'username' => 'root',
        'password' => '',
        'charset' => 'utf8',
        'enableProfiling' => true,
    ),
    'authManager'=>array(
        'class'=>'CDbAuthManager',
        'connectionID'=>'db',
    ),
    'errorHandler'=>array(
        // use 'site/error' action to display errors
        'errorAction'=>'site/error',
    ),
    'log'=>array(
        'class'=>'CLogRouter',
        'routes'=>array(
            array(
                'class'=>'CFileLogRoute',
                'levels'=>'error, warning',
            ),
            // uncomment the following to show log messages on web pages
            array(
                'class'=>'CWebLogRoute',
                'categories' => 'system.db.*,GLWeb.*,application.*'
            ),
        ),
    ),
    'bootstrap'=>array(
        'class'=>'bootstrap.components.Bootstrap',
    ),
),

// application-level parameters that can be accessed
// using Yii::app()->params['paramName']
'params'=>array(
    // this is used in contact page
    'adminEmail'=>'webmaster@example.com',
), 
```

);

我的引导扩展位于 ./protected/extensions/bootstrap

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-11T08:11:50.540

我遇到了同样的问题。我授予该文件夹的完全（777）权限。

试试看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-18T16:35:15.120

`ext.bootstrap.src.components.Bootstrap'`通过:更新组件

EG：如果你是在扩展名下提取的，那么按照上面的命令：

句法：`ext.path_to.Bootstrap`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:36:07.330

你有两个选择。一，在您的`config/main.php`文件或等效文件中，添加以下行：

```
Yii::setPathOfAlias('bootstrap', dirname(__FILE__).'/../extensions/yii-bootstrap'); 
```

您需要`yii-bootstrap`用实际调用的引导文件夹替换的位置。

或者二，你可以简单地首先正确地引用那个引导文件夹。如果你的 bootstrap 安装是像我的一样安装在 /extensions/yii-bootstrap 中，那么使用这个别名来加载组件：

```
ext.yii-bootstrap.components.Bootstrap 
```

简而言之，您的问题可能是您没有正确定义安装路径。使用上述两种解决方案之一，以解决该问题。

# android - 如何在 Unity 中制作 2D 动画

> ID：14347151
> 
> 赞同：4
> 
> 时间：2013-01-15T21:21:02.387
> 
> 标签：android, ios, animation, unity3d

所以我在 Unity 中为 Android 和 iOS 的儿童制作 3D 游戏，但我是游戏开发的新手，规划资产真的很困难。

我们需要创建 2D 动画（像纸一样的角色），并且角色必须非常详细，并带有出色的动画。

我们一直在考虑几个选项：

我们可以逐帧创建动画，但我们的设计师说每秒必须至少有 24 张图像（因为每秒 24 fps），这样应用程序将非常大。

另一种选择是在 Blender 中创建 2D 模型并在那里制作动画，但这需要大量工作并且可能需要很多时间。

最后一个选项是让模型的各个部分在整个代码中对其进行动画处理，但这需要大量工作，而且我相信动画的质量会很低。

在 Unity 中创建 2D 动画的更好方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:45:52.223

您是否探索过 Unity 中可用的 2D 精灵引擎？谁说“Unity 并不是真正设计用于处理 2D 东西的引擎”，那是在胡说八道。我刚刚开始开发一个爱好 2D 游戏，并且正在使用一个名为 Orthello 的 Unity 插件（[有关信息，请参见 WyrmTale 网站](http://www.wyrmtale.com/products/unity3d-components/orthello)）。它可以处理精灵表、动画、碰撞检测等，而无需您编写大量代码来执行此操作。学习曲线有点陡峭，他们网站上的示例并不是最好的，但我发现复制下载附带的示例解决方案是获得工作的最佳方式。

还有一个类似的工具叫做 Sprite Manager 2，但你必须为此付费（我认为）。查看资产商店以获取更多信息。

我真的很想知道 Orthello 是否是您正在寻找的东西以及您如何使用它 -如果可以的话，请通过[http://markp3rry.wordpress.com告诉我。](http://markp3rry.wordpress.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:10:21.790

仅仅因为应用程序以 24fps 运行并不意味着您不能只显示主循环的一帧以上的动画。它可能并不流畅，但是再看看像超级街头霸王这样的游戏的精灵表，它们看起来并不接近 24fps（SF3 Alpha 中 Dhalism 的精灵表是一个 210kb 的 .gif 文件我的电脑，只有不到 252 帧的动画。同样，Dustforce 中每个角色精灵占用的总存储空间只有 7mb，虽然这些精灵只有 192x192，对你来说可能分辨率太低了。他们虽然看起来像纸）。我怀疑任何涉及搅拌机的事情都会比手工制作动画花费更长的时间——搅拌机会为你做关键帧。

# php - mysql php评论系统：新数据库或循环ID？

> ID：14347152
> 
> 赞同：0
> 
> 时间：2013-01-15T21:21:19.117
> 
> 标签：php, mysql, system, comments, picturegallery

我想为每张图片制作一个带有mysql php评论系统的图片网站。现在，我可以做两件事：1）为每张图片使用一个新数据库或 2）为每张图片使用一个数据库 + 一个 id。后者的问题是每次我想查找图片的评论时都需要循环整个数据库。处理这个最明显的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:23:38.090

除了极少数例外，您会将所有内容放在一个*数据库*中。使用多个数据库的唯一原因是极端扩展。

如果您的表被正确索引，您将不必“循环”通过数据库。您可以像这样获取记录：

```
SELECT * FROM images WHERE id=192 
```

如果存在，这将检索一条记录。

如果您对 SQL 有点不满意，那么您要么需要阅读它，要么使用不需要它的文档存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:24:01.443

我不知道你为什么认为你需要一个新的数据库。您可能只需要两张表，一张用于图片，一张用于图片评论，其中包含图片表的外键。

当您需要根据图片 ID 查找评论时，您只需执行类似的操作

```
SELECT * FROM picture_comments WHERE picture_id = ? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:23:48.737

对逻辑上适合的所有内容使用一个具有多个表的数据库，并使用查询从数据库中获取所需的数据，如果您创建了良好的查询，则不需要每次都遍历整个数据库。为每个项目使用单独的数据库会完全失去数据库的意义。获取有关什么是数据库以及它们如何运行的一些信息。

# soap - 使用 SOAP 与 WSDL 通信，我不知道如何正确形成我的 SOAP 以与远程服务器中的 WSDL 交互

> ID：14347161
> 
> 赞同：2
> 
> 时间：2013-01-15T21:21:46.677
> 
> 标签：soap, wsdl, axis2

我必须向使用 Axis2 的 Web 服务发出请求，我离它工作太近了，但我不断收到错误消息，我确信它在我的 SOAP XML 的构造中。这是 SOAP：

```
<?xml version="1.0" encoding="UTF-8"?>
    <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" soap:encodingStyle="http://www.w3.org/2001/12/soap-encoding">
        <soap:Header>
            <RequestsoapHeader>
                <spId>SPID</spId>
                <spPassword>RandomPass</spPassword>
                <timeStamp>20130115160251</timeStamp>
            </RequestsoapHeader>
        </soap:Header>
        <soap:Body>
            <operation>
                <name>getSPToken</name>
                <input>http://zzz.zzz.zzz.zzz/my/redirection/url/</input>
            </operation>
        </soap:Body>
    </soap:Envelope> 
```

更新！！！！现在肥皂是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
    <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" soap:encodingStyle="http://www.w3.org/2001/12/soap-encoding">
        <soap:Header>
            <RequestsoapHeader>
                <spId>SPID</spId>
                <spPassword>RandomPass</spPassword>
                <timeStamp>20130115160251</timeStamp>
            </RequestsoapHeader>
        </soap:Header>
        <soap:Body>
            <getSPTokenRequest>
                <SPredirectURL>http://zzz.zzz.zzz.zzz/my/redirection/url/</SPredirectURL>
            </getSPTokenRequest>
        </soap:Body>
    </soap:Envelope> 
```

我无法修复的部分是 Body，我尝试以不同的方式调用操作，例如代替`<operation>`i used `<operation name="getSPToken">`，我也尝试不使用 operation 并创建了一个名称为: 的标签`<getSPToken>`，但没有任何效果。

这是描述我试图在 Web 服务中调用的操作的 WSDL 部分：

```
 <wsdl:operation name="getSPToken">
        <soap:operation soapAction="" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
        <wsdl:fault name="ServiceException">
            <soap:fault name="ServiceException" use="literal"/>
        </wsdl:fault>
        <wsdl:fault name="PolicyException">
            <soap:fault name="PolicyException" use="literal"/>
        </wsdl:fault>
    </wsdl:operation> 
```

更新！！！这是我之前没有发布的接口 XML（WSDL 的一部分）：

```
<wsdl:types>
    <xsd:schema elementFormDefault="qualified" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
        targetNamespace="http://www.csapi.org/schema/parlayx/sicoweb/v1_0/local">
        <xsd:element name="getSPTokenRequest" type="osg_sicoweb_local_xsd:getSPTokenRequest"/>
        <xsd:complexType name="getSPTokenRequest">
            <xsd:sequence>
                <xsd:element name="SPredirectURL"
                    type="xsd:string" maxOccurs="1" minOccurs="1">
                    <xsd:annotation>
                        <xsd:documentation></xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>

        <xsd:element name="getSPTokenResponse" type="osg_sicoweb_local_xsd:getSPTokenResponse"/>
        <xsd:complexType name="getSPTokenResponse">
            <xsd:sequence>
                <xsd:element name="SPToken" type="xsd:string"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:schema>
</wsdl:types> 
```

这是我得到的回应：

```
HTTP/1.1 500 Internal Server Error
Server: Apache-Coyote/1.1
Content-Type: text/xml;charset=UTF-8
Date: Tue, 15 Jan 2013 21:10:49 GMT
Connection: close
<?xml version='1.0' encoding='UTF-8'?>
    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
        <soapenv:Body>
            <soapenv:Fault xmlns:axis2ns73="http://schemas.xmlsoap.org/soap/envelope/">
                <faultcode>axis2ns73:Client</faultcode>
                <faultstring>The endpoint reference (EPR) for the Operation not found is http://xxx.xxx.xxx.xxx:xxx/path/to/service/ and the WSA Action = </faultstring>
                <detail />
            </soapenv:Fault>
        </soapenv:Body>
    </soapenv:Envelope> 
```

更新！！！！随着新的变化，我得到的回应是这样的：

```
<?xml version='1.0' encoding='UTF-8'?>
    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
        <soapenv:Body>
            <soapenv:Fault>
                <faultcode>soapenv:Server</faultcode>
                <faultstring>org.apache.axis2.databinding.ADBException: Unexpected subelement getSPTokenRequest</faultstring>
                <detail />
            </soapenv:Fault>
        </soapenv:Body>
    </soapenv:Envelope> 
```

该操作`getSPToken`接收一个名为 的参数`SPredirectURL`，其中包含重定向的URL，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:35:33.573

尝试以下其中一项作为您的身体：

```
<soap:Body>
  <SPredirectURL>http://zzz.zzz.zzz.zzz/my/redirection/url/</SPredirectURL>
</soap:Body>

<soap:Body>
  <getSPTokenRequest xmlns="http://www.csapi.org/schema/parlayx/sicoweb/v1_0/local">
    <SPredirectURL>http://zzz.zzz.zzz.zzz/my/redirection/url/</SPredirectURL>
  </getSPTokenRequest>
</soap:Body> 
```

基于 WSDL 片段，Web 服务端点对消息使用文档/文字约定，但如果没有 WSDL 消息声明，则不清楚是“裸”（第一个示例）还是“包装”（第二个示例）版本。此地址 (http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/) 上的帖子很好地了解了 WSDL 描述的各种方言。

更新：基于 wsdl:types 部分中的模式，服务预期的元素的完全限定名称（基于模式元素的声明的 targetNamespace 属性）是[http://www.csapi.org/schema/ parlayx/sicoweb/v1_0/local](http://www.csapi.org/schema/parlayx/sicoweb/v1_0/local) {getSPTokenRequest}

建立该名称的一种方法（内联命名空间声明）显示在上面更新的第二个正文中。

与下一次迭代一起发回。

# python - PyQt 不规则形状的窗口（例如没有边框/装饰的圆形）

> ID：14347163
> 
> 赞同：5
> 
> 时间：2013-01-15T21:22:01.947
> 
> 标签：python, pyqt

如何在 PyQt 中创建一个不规则形状的窗口？

我找到[了这个 C++ 解决方案](https://stackoverflow.com/questions/1333610/displaying-translucent-irregular-shaped-windows-with-qt)，但是我不确定如何在 Python 中做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T22:42:42.720

干得好：

```
from PyQt4 import QtGui, QtWebKit
from PyQt4.QtCore import Qt, QSize

class RoundWindow(QtWebKit.QWebView):
    def __init__(self):
        super(RoundWindow, self).__init__()
        self.initUI()

    def initUI(self):
        self.setWindowFlags(Qt.FramelessWindowHint)
        self.setAttribute(Qt.WA_TranslucentBackground)

    def sizeHint(self):
        return QSize(300,300)

    def paintEvent(self, event):
        qp = QtGui.QPainter()
        qp.begin(self)
        qp.setRenderHint(QtGui.QPainter.Antialiasing);
        qp.setPen(Qt.NoPen);
        qp.setBrush(QtGui.QColor(255, 0, 0, 127));
        qp.drawEllipse(0, 0, 300, 300);
        qp.end()

a = QtGui.QApplication([])
rw = RoundWindow()
rw.show()
a.exec_() 
```

[截屏](http://i.stack.imgur.com/E21YG.png)

我一生中从未编写过 C++，但阅读该代码示例并不难。您会发现大多数在线 Qt 文档都是用 C++ 编写的，因此至少能够阅读是很有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-23T03:16:59.817

这是一个 PyQT5 示例，它创建无框、可移动的 QWidget，使用透明 png 掩码生成不规则形状的 Window：

```
from PyQt5 import QtGui, QtWidgets
from PyQt5.QtCore import Qt, QPoint

class IrregularWindow(QtWidgets.QWidget):
    def __init__(self):
        super(IrregularWindow, self).__init__()
        self.initUI()

    def initUI(self):
        self.setWindowFlags(Qt.FramelessWindowHint)
        self.setAttribute(Qt.WA_TranslucentBackground)

    def sizeHint(self):
        return QSize(107, 41) # Set this to the exact image resolution

    def paintEvent(self, event):
        qp = QtGui.QPainter()
        qp.begin(self)    
        pixmap = QtGui.QPixmap()
        pixmap.load('image_with_transparency.png')
        qp.drawPixmap(QPoint(0, 0), pixmap)    
        qp.end()

    def mousePressEvent(self, event):
        self.oldPos = event.globalPos()

    def mouseMoveEvent(self, event):
        delta = QPoint(event.globalPos() - self.oldPos)
        self.move(self.x() + delta.x(), self.y() + delta.y())
        self.oldPos = event.globalPos()

a = QtWidgets.QApplication([])
rw = IrregularWindow()
rw.show()
a.exec_() 
```

# asp.net - Asp.net Response.write 仅适用于本地请求

> ID：14347164
> 
> 赞同：1
> 
> 时间：2013-01-15T21:22:04.273
> 
> 标签：asp.net, asp.net-mvc, global-asax

在我的 Global.asax 文件中，我有以下显示应用程序异常的 javascript 警报消息：

```
Response.Write("<script language='javascript' type='text/javascript'>alert('" + FixJQuotes(ex.Message) + "');</script>");
Response.Write("<script language='javascript' type='text/javascript'>history.back()</script>");
Server.ClearError(); 
```

如果我通过访问该站点`http://localhost/`并生成一个特意制造的错误（命中数据库中的唯一索引），则应用程序按预期运行，浏览器会显示一个 javascript 警报，然后返回一个页面以显示编辑页面。

但是，如果我访问完全相同的服务器，但来自不同的机器，则在`http://192.168.1.x/`遇到相同的异常时访问只会导致我的自定义错误页面显示，而没有任何错误的线索

我做错了什么/遗漏了一些明显的东西？

谢谢，安德鲁

# javascript - Magento 单页结帐步骤未扩展

> ID：14347170
> 
> 赞同：1
> 
> 时间：2013-01-15T21:22:22.637
> 
> 标签：javascript, jquery, magento, checkout

我的单页结帐存在某种 javascript 或 jquery 冲突。没有一个步骤正在扩展。请在这里查看我的网站`http://50.87.6.244/~storeupp/index.php/checkout/onepage/`。

对导致此问题的任何帮助都会很棒！我不知道从哪里开始调试脚本问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:30:45.550

我的预感是这*确实是*一个 jquery - 原型冲突，请尽可能尝试使用 jquery.noConflict() 。我总是做的是我订购 js 文件。首先我导入所有原型文件，放置一个 noConflict 文件，然后我导入所有 jquery 文件，反之亦然。这样可以避免很多问题...如果之后问题没有解决，您可以排除冲突并开始调试...

# php - 检测到错误时重新启动 while 循环的当前操作

> ID：14347171
> 
> 赞同：2
> 
> 时间：2013-01-15T21:22:25.380
> 
> 标签：php, while-loop

我在下面有一个 PHP 循环，它可以正常工作，但是有时 CURL 请求会返回一个错误页面，我怎样才能只重新启动当前页面的操作而不重新启动整个循环？

```
while ($daytofetch <= $lastdaytofetch) {

//Do all my stuff and run curl request here 

$daytofetch++

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:24:02.303

我可能会做这样的事情：

```
while ($daytofetch <= $lastdaytofetch) {
    $error = false;

    //Do all my stuff and run curl request here
    //if there is an error, then set $error = true;

    if (!$error)
        $daytofetch++
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:24:26.723

```
while ($daytofetch <= $lastdaytofetch) {

    // Do all my stuff and run curl request here

    if ($error_detected) {
        // This will resume the loop without incrementing
        // $daystofetch
        continue;
    }

    $daytofetch++
} 
```

# javascript - rails 复选框隐藏字段类

> ID：14347172
> 
> 赞同：2
> 
> 时间：2013-01-15T21:22:29.420
> 
> 标签：javascript, ruby-on-rails, view, checkbox, hidden-field

我一直想知道如何将一个类添加到使用视图助手 f.check_box 生成的隐藏字段中？目的是在以后使用 javascript 管理这些字段。我没有在任何地方找到任何谈论它的文档。

更新：

唯一的解决方案似乎是带有 check_box_tag 的 DIY，例如：

`<input name="customs_info[0][hs_code_save]" class="hs_code_save_hidden" type="hidden" value="0">
<%= check_box_tag "customs_info[0][hs_code_save]", "", false, class:"hs_code_save", style:"width:60px" %>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:49:26.850

现在你不能用 rails 的`check_box`助手来做，但你绝对可以通过查询它`input[name=your-input-name][type=hidden]`或其他东西来获取这个隐藏字段

# breeze - SPA，坏事？

> ID：14347175
> 
> 赞同：5
> 
> 时间：2013-01-15T21:22:41.830
> 
> 标签：breeze, single-page-application

我最近一直在阅读有关 SPA 的内容以及它有多好.. 我想知道是否有人可以告诉我什么时候应该使用甚至更好的时候我什么时候不应该使用 SPA 与常规 MVC 一起使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T22:30:37.570

MVC（Rails、MVC4）的工具要成熟得多。有更多的文档专注于传统 MVC 站点的开发。单页应用程序开发是困难的。JavaScript 密集型应用程序难以编写，并且极难调试。

如果您想进入 SPA，请查看Pluralsight.com 上[John Papa 的视频培训系列](http://pluralsight.com/training/Courses/TableOfContents/spa)- 据我所知，它为开发 SPA 应用程序提供了最佳起点。或者研究 Backbone，但这根本不适合胆小的人（假装？）。

还有一个建议：如果您是 ASP.Net 开发人员，请查看 BreezeJS ( [http://www.breezejs.com](http://www.breezejs.com) ) 进行数据管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:47:19.213

这篇[博](http://blog.hasith.net/2012/11/how-much-multi-page-single-page.html)文很好地概述了 SPA 的一些潜在问题，以及一些解决方法的建议。

潜在问题包括：

> *   浏览器不是内存处理和垃圾收集的最佳物种。特别是在 DOM 处理方面。例如，从 DOM 中删除的元素仍然保存在内存中。如果我们让用户在不刷新的情况下长时间使用 DOM，浏览器可能难以解决内存问题
>     
>     
> *   理想情况下，我们应该尽可能多地重用 DOM 元素而不进行处置。但即使采用这种方法，如果用户在使用应用程序时创建了数千个可重用的 DOM 元素，浏览器也可能难以应对。另一方面，糟糕的编码实践造成的内存泄漏也会堆积在长期存在的 DOM 中。
>     
>     
> *   如果我们需要将完整的产品套件功能作为单页应用程序提供，那么一次加载的 JS/CSS 代码可能会影响初始加载时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T14:03:15.207

> 我最近一直在阅读有关 SPA 以及它有多好..

SPA 只是颠倒了浏览器客户端的职责。传统的服务器端应用程序在后端完成大部分工作。SPA 在前端完成大部分工作。

好消息是，在客户端生成视图意味着前端开发人员可以在浏览器中完成所有设计，而不必担心接触后端。

将视图与模型分离（即控制器存在于两端）意味着数据可以作为 REST API 在服务器上公开，并重新用于针对其他平台（例如移动设备、平板电脑、智能电视）的客户端。

无需在每次加载页面时都刷新，从而获得更好的用户体验。

> 我想知道是否有人可以告诉我什么时候应该使用甚至更好的时候我不应该使用 SPA 与常规 MVC 一样

对于某些人来说，从服务器端 MVC 架构切换到构建 SPA 可能非常具有挑战性。许多专门使用服务器端语言的开发人员可能只是讨厌处理 Javascript（尤其是专门使用静态类型语言编程的开发人员）。

进行 SPA 的工作需要一些 url 重写和重定向解决方法。对于那些对服务器没有较低层次了解的人来说，这可能是一个非常令人困惑/痛苦的经历。

默认情况下关闭 Javascript 的用户将无法加载该站点。

SPA 在客户端上引入了更多负载，所有内容都在主上下文中运行，这可能会使 UI 变慢/无响应。在较新的 SPA 框架中有解决此问题的解决方法，但最好记住这一点。

为浏览器编写代码与为服务器编写代码有很大不同。浏览器中有很多复杂性（例如 DOM）。

用于前端开发的工具链与您发现用于开发大多数服务器端语言的工具链截然不同。一些程序员因他们的 IDE 而生死存亡。

对于某些人来说，起初通过 Ajax 动态获取数据可能非常困难。特别是对 HTTP 没有深入了解的开发人员。

* * *

真的，归结为一个问题。您想花时间学习如何构建 SPA 吗？

# vb.net - 通过循环 DataGridViewCheckBoxColumn 添加 DataColumns

> ID：14347176
> 
> 赞同：1
> 
> 时间：2013-01-15T21:22:53.183
> 
> 标签：vb.net, loops, datagridview, checkbox, datagridviewcolumn

我的项目中有两种形式。它们被命名为“标准”和“屏幕”。标准表单包含`DataGridViewCriteria`. 屏幕表单包含`DataGridViewScreen`.

`DataGridViewCriteria`的第一列是`CheckBoxColumn`. DataGridViewCriteria 的第二列包含特定于每一行的描述。我需要遍历 CheckBoxColumn，并且对于每个`CheckBox`被检查的内容，我都需要`DataColumn`向 DataGridViewScreen 添加一个。我需要每个添加到 DataGridViewScreen 的标题`DataColumn`等于在`CheckBox`DataGridViewCriteria 上与其各自相邻的描述。

到目前为止，我的代码是：

```
For Each row As DataGridViewRow In Criteria.DataGridViewCriteria.Rows
        If row.Cells(0).Value = True Then
            Dim col As New DataColumn(row.Cells(1).Value, Type.GetType("System.String"))
            dt.Columns.Add(row.Cells(1).Value)
        End If
    Next 
```

有什么建议么？非常感谢！

# jquery - 如何验证 max 字段是否大于 min 字段？

> ID：14347177
> 
> 赞同：10
> 
> 时间：2013-01-15T21:22:56.783
> 
> 标签：jquery, jquery-validate

我在表单中有几组最小和最大字段，用户可以通过填写最小值和最大值来指定范围。我正在使用 jQuery 的 Validate 插件进行表单验证。我想设置一个验证规则，强制最大字段大于最小值。每当更改最大*或*最小字段值时都会调用它。

我知道我可以设置某种基本的自定义验证方法，如下所示：

```
$.validator.addMethod("greaterThan",
    function(value, max, min){
        return parseInt(value) > parseInt($(min).val());
    }, "Max must be greater than min"
); 
```

然后为最大元素添加一条规则：

```
rules: {
    maxTruck: {greaterThan: '#minTruck'}
} 
```

但这有点复杂，因为这只适用于更改最大字段时，而不是最小值。有什么简单的方法可以做到这一点，而不必编写 lessThan 方法并将其应用于 min 字段？

然后我想解决的另一件事-有什么简单的方法可以通用地应用它，而不必枚举每个最大字段以及它映射到哪个最小值？这样我就可以有一个最小和最大类并调用类似的东西：

```
$(".max").rules('add', { greaterThan: ".min" }); 
```

并以某种方式设置方法以能够确定（可能基于共享属性？） max 字段与哪个最小值配对？

**更新：**

我在这篇文章中提到的基本逻辑可以在[这个 jsfiddle](http://jsfiddle.net/tUPQc/)中看到。但是，我并没有真正做这么多工作——我正在寻找按照我描述的方式基本上链接最小和最大字段集的逻辑。而且我不知道这是否是最好的方法——正如我所提到的，我希望能够通用地做到这一点，这样我就不必通过 id 来引用 min 和 max 字段。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T00:46:21.743

好的，这是应该工作的东西。该规则基于内置[`equalTo`](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L1150)方法：

```
$.validator.addMethod("greaterThan", function (value, element, param) {
    var $min = $(param);

    if (this.settings.onfocusout) {
        $min.off(".validate-greaterThan").on("blur.validate-greaterThan", function () {
            $(element).valid();
        });
    }

    return parseInt(value) > parseInt($min.val());
}, "Max must be greater than min"); 
```

**示例：http:** [//jsfiddle.net/tUPQc/2/](http://jsfiddle.net/tUPQc/2/)

* * *

为了使规则更通用，您必须使用`addClassRules`：

```
$.validator.addMethod("greaterThan", function (value, element, param) {
    var $element = $(element)
        , $min;

    if (typeof(param) === "string") {
        $min = $(param);
    } else {
        $min = $("#" + $element.data("min"));
    }

    if (this.settings.onfocusout) {
        $min.off(".validate-greaterThan").on("blur.validate-greaterThan", function () {
            $element.valid();
        });
    }
    return parseInt(value) > parseInt($min.val());
}, "Max must be greater than min");

$.validator.addClassRules({
    greaterThan: {
        greaterThan: true
    }
}); 
```

然后在您的 HTML 中：

```
<input id="maxTruck" name="maxTruck" type="text" class="number greaterThan" data-min="minTruck" /> 
```

**示例：http:** [//jsfiddle.net/tUPQc/3/](http://jsfiddle.net/tUPQc/3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-30T12:00:32.960

使用addmethod的简单好方法

```
$.validator.addMethod("greaterThan",

function (value, element, param) {
  var $min = $(param);
  if (this.settings.onfocusout) {
    $min.off(".validate-greaterThan").on("blur.validate-greaterThan", function () {
      $(element).valid();
    });
  }
  return parseInt(value) > parseInt($min.val());
}, "Must be greater than to field 1"); 
```

验证码

```
filed2_name: {

            greaterThan: '#filed1_id'
        }, 
```

第二个我更喜欢第一个

```
$.validator.addMethod('le', function(value, element, param) {
      return this.optional(element) || value <= $(param).val();
}, 'Invalid value');
$.validator.addMethod('ge', function(value, element, param) {
      return this.optional(element) || value >= $(param).val();
}, 'Invalid value');

$('form').validate({rules: {
            fieldName1: {le: '#fieldID2'},
            fieldName2: {ge: '#fieldID1'},
             ...
      },
      messages: {
            fieldName1: {le: 'Must be less than or equal to field 2'},
            fieldName2: {ge: 'Must be greater than or equal to field 1'},
            ...
      }
}); 
```

# python - 我可以使用 for 循环而不是 while 循环吗？

> ID：14347179
> 
> 赞同：3
> 
> 时间：2013-01-15T21:23:09.427
> 
> 标签：python

我有一个关于循环的非常基本的问题。我正在尝试进入编程领域，目前正在阅读“Learn Python The Hard Way”一书，并被困在 ex 33 上的第 5 次学习练习中：http: [//learnpythonthehardway.org/book/ex33.html](http://learnpythonthehardway.org/book/ex33.html)

这就是我的代码的样子：

```
i = 0
numbers = []

def main(i, numbers):
    userloop = int(raw_input("Type in max value for the loop > "))
    while i < userloop:

        print "At the top i is %d" % i
        numbers.append(i)
        userincrease = int(raw_input("Increase > "))
        i += userincrease

        print "Numbers now: ", numbers
        print "At the bottom i is %d" % i

    print "The numbers: "
    print numbers
    for num in numbers:
    print num       

main(i, numbers) 
```

问题是我想使用 for 循环而不是 while 循环。这甚至可能，然后，我该怎么做？我试过简单地交换

```
while i < userloop: 
```

和

```
for i in range(userloop) 
```

但是，每次到达循环的“顶部”时， i 值都会重置。

由于我对此非常陌生，如果我错过了一些明显的东西，请不要太刻薄。

顺便问一下，有没有人知道这本书是不是很好，还是我在浪费时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:27:54.773

python 中的`for`循环遍历表达式 after 提供的一系列值`in`。在 Python 中，我们使用这个术语`iterable`来表示任何可以产生这样一个系列的东西。这可以是 a `range()`，但它可以是任何可以迭代（循环）的东西。循环变量`i`在每次迭代中接收下一个值，无论之前的值是什么。

因此，以下内容是合法的：

```
for i in ('foo', 'bar', 'baz'):
    print i
    i = 'spam' 
```

但`i = 'spam'`基本上什么都不做。

您必须以不同的方式处理它；*跳过*这些值：

```
print_at = 0
for i in range(userloop):
    if i >= print_at:
        print "At the top i is %d" % i
        numbers.append(i)
        userincrease = int(raw_input("Increase > "))
        print_at = i + userincrease

        print "Numbers now: ", numbers
        print "At the bottom i is %d" % i 
```

每次您要求用户增加时，我们将值更新为`print_at`当前值的总和`i`加上增加的值，然后继续忽略大部分循环体，直到`i`赶上`print_at`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:31:06.453

for 循环和 while 循环之间有一个关键的区别。

**for 循环：**执行循环体固定次数，计算迭代次数。

**while 循环：**只要循环的条件为真，就重复执行循环体。

通常，当从零开始并停在特定数字（例如`userloop`）时，意味着 for 循环是最合适的。然而，这个程序并不是说“我要从 0 数到 userloop 并每次都做这些事情”；它的意思是“我从零开始，我将做这些事情，根据用户输入更改一个值，直到该值满足条件（> userloop）”。

用户可以多次输入 0，或者输入负数，你可能永远不会退出循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T02:05:43.703

所以我检查了你链接到的 Python the Hard Way 网站上的问题......我认为他实际上只是要求你使用 for 循环和范围重写他的原始脚本，在这种情况下你可以做这样的事情：

```
numbers = []

for i in range(6):
    print "at the top i is", i
    numbers.append(i)
    print "numbers now", numbers

print "finally numbers is:"
for num in numbers:
    print num 
```

如果你运行它，你会得到这样的输出：

```
$ python loops.py 
at the top i is 0
numbers now [0]
at the top i is 1
numbers now [0, 1]
at the top i is 2
numbers now [0, 1, 2]
at the top i is 3
numbers now [0, 1, 2, 3]
at the top i is 4
numbers now [0, 1, 2, 3, 4]
at the top i is 5
numbers now [0, 1, 2, 3, 4, 5]
finally numbers is:
0
1
2
3
4
5 
```

要回答有关增量语句的问题，如果有必要，请尝试以下操作：

```
for i in range(6):
    print "at the top i is", i
    numbers.append(i)

    i += 2
    print "numbers now", numbers
    print "at the bottom i is", i

print "finally numbers is:"
for num in numbers:
    print num 
```

你会得到这样的输出：

```
$ python loops.py
at the top i is 0
numbers now [0]
at the bottom i is 2
at the top i is 1
numbers now [0, 1]
at the bottom i is 3
at the top i is 2
numbers now [0, 1, 2]
at the bottom i is 4
at the top i is 3
numbers now [0, 1, 2, 3]
at the bottom i is 5
at the top i is 4
numbers now [0, 1, 2, 3, 4]
at the bottom i is 6
at the top i is 5
numbers now [0, 1, 2, 3, 4, 5]
at the bottom i is 7
finally numbers is:
0
1
2
3
4
5 
```

你看到这里发生了什么吗？请记住，range 函数会生成这样的列表：
range(6) -> [0, 1, 2, 3, 4, 5]。
这是 Python 的 for 语句知道如何迭代的东西（他们称这些类型的东西为可迭代的）。无论如何，变量 i 每次迭代都绑定到 range(6) 中的一项（即列表 [0, 1, 2, 3, 4, 5]）。即使你在 for 循环中对 i 做了什么，它也会被反弹到可迭代的下一个项目。所以这个增量语句绝对没有必要。在这种情况下，它只是将 2 添加到 i 中，但无论如何它都会像正常的每次迭代一样反弹。

好吧，毕竟，这是我在更改您的特定代码时使用的选项，每次将迭代器从使用 while 循环更改为使用带范围的 for 循环。

我认为您通过浏览您链接到的在线书籍的前几章已经涵盖了函数，但是如果您之前没有看过递归，它可能会有点令人困惑。再次调用函数之前的 if 语句是为了防止当前值超过范围内的值，这会给你一个关于超出最大递归深度的错误（python 这样做是为了防止堆栈溢出错误我很确定）。

最后一点，你可以用 range:
range(0, 10, 2) -> [0, 2, 4, 6, 8]来做这样的事情
，我在下面使用它：

```
def my_loop(max, current=0, increment=1, numbers=[]):
    for x in range(current, max, increment):
        print "at the top, current is %d" % current
        numbers.append(current)

        increment = int(raw_input("Increase > "))
        current += increment

        print "numbers is now: ", numbers
        print "at the bottom current is %d" % current
        break

    if current < max:
        my_loop(max, current, increment, numbers)
    else:
        print "no more iterating!"

max = int(raw_input("Type in max value for the loop > "))    

my_loop(max) 
```

我不认为我会真的这样做，但至少这是一个有趣的尝试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-02T04:48:18.553

我是使用这段代码完成的，其中 p 是您在函数调用 numba(p) 中设置的参数

```
i = 0
elements = [ ]

def numba(p):
    for i in range(0, p):
        print "At the top i is %r" % i
        elements.append(i)
        print "Numbers now: ", elements
        print "At the bottom i is %r" % (i + 1)

numba(3) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T22:16:34.787

好吧，我想你可以尝试挖掘动态控制循环的[生成器的方向](http://docs.python.org/2/tutorial/classes.html#generators)`for`

# winapi - 如何防止我的应用程序导致 Windows 8 从“开始”屏幕切换？

> ID：14347180
> 
> 赞同：1
> 
> 时间：2013-01-15T21:23:10.390
> 
> 标签：winapi, windows-8

我的应用程序在 Windows 8 上导致以下奇怪行为：

条件：

1.  我的本机 WinAPI 应用程序在 Windows 8 启动时自动启动。
2.  Windows 在启动后立即停留在“开始”屏幕。

当我的应用程序创建一个窗口时，Windows 会从开始屏幕切换到桌面。创建的窗口是工具栏窗口，它不窃取用户焦点，用作状态显示。

这只发生在窗口不是在启动后立即创建，而是在几秒钟后创建时。

**我的问题：**当我的窗口出现时，如何防止 Windows 切换到桌面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:35:11.590

好吧，您可以管理启动应用程序。为您的应用程序关闭它。它应该工作。

# wpf - 如何解决：此处不允许使用 XAML2009 语言构造？

> ID：14347181
> 
> 赞同：9
> 
> 时间：2013-01-15T21:23:30.067
> 
> 标签：wpf, xaml, visual-studio-2012

在我的 App.xaml 代码中，我有以下代码：

```
<Application x:Class="PcgTools.App"
    ...
    <Application.Resources>
        <ResourceDictionary>
             ...
            <res:Strings x:FactoryMethod="res:StringResourceHelper.GetStringResources" 
             x:Key="LocStrings"/>
        </ResourceDictionary> 
    </Application.Resources>
</Application> 
```

在使用 FactoryMethod 或 Attribute 构造之前，我从 VS2012 编译器得到一个错误。但现在我得到了错误：这里不允许使用 Xaml2009 语言构造。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-16T04:33:09.043

不幸的是，由于缺乏编译器支持，XAML 2009 毫无用处（尽管 VS 出于某些愚蠢的原因识别它）。

请参阅： [关于 XAML 2009 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ee792007.aspx#xaml_2009_support_in_wpf_and_visual_studio)

基本上没有当前的编译器（WPF、SL、WinRT）实际上支持它。据我所知，唯一支持 XAML 2009 的是“loose xaml”，其中您有一个由浏览器直接打开的独立 xaml 文件（基本上没用）。

我不知道微软有什么解释说明为什么它不被支持。:-(

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T22:40:48.617

XAML 2009 不允许在已编译的 XAML 中使用（至少在 WPF 4.0 中不允许），请尝试将使用 2009 构造的内容移动到单独的资源字典文件中。

# c++ - c++成员函数和类大小

> ID：14347184
> 
> 赞同：4
> 
> 时间：2013-01-15T21:23:44.283
> 
> 标签：c++

> **可能重复：**
> [为什么类大小仅取决于数据成员而不取决于成员函数？](https://stackoverflow.com/questions/9451471/why-class-size-depends-only-on-data-members-and-not-on-member-functions)

当我第一次了解继承时，我的老师说与数据成员相反，成员函数不会改变类的大小。也就是说，如果类 B 继承自类 A，那么当且仅当至少添加一个数据成员时，B 的大小才会大于 A 的大小，并且不会根据函数成员的数量而改变。这是对的吗？如果是这样，这个机制是如何工作的？似乎两个成员都应该放在堆中，因此会增加大小。

谢谢你，盖伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:25:54.710

成员变量存储为每个类实例的一部分。但成员函数不是。

类的每个实例都必须具有每个成员变量的单独副本。这使每个对象保持唯一。

但是成员函数是代码。而且无论你有多少特定类的实例，绝对没有理由拥有多个代码副本。相同的代码只是对实例数据进行操作。

由于代码不同，因此代码不是类实例大小的一部分。并且`sizeof(myClass)`不会包括代码占用的字节数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:30:16.067

您可以想象调用成员函数`myClass.myMethod(x)`类似于`myMethod(myClass, x)`. 每个类的每个实例都不需要该函数。您可以使用关键字访问此“隐藏”的第一个参数`this`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:27:15.553

> 如果类 B 继承自类 A，则当且仅当添加至少一个数据成员时，B 的大小将大于 A 的大小，并且不会根据函数成员的数量进行更改。

是的，它是正确的。（如果 B 没有实现其他方法）。每个类实例都有一个数据成员的副本和一个指向实际存储它们的成员函数表的指针。

成员函数的代码在同一类的不同实例之间共享。如果 B 不覆盖基类 A 的任何成员函数，则 A 和 B 可以共享相同的方法。当您覆盖子类中的成员函数时，基本上您正在更改此机制，创建被覆盖成员函数的新定义，仅适用于您定义它的子类（es.B）。

通常，成员函数在编译时绑定。因此，如果您有一个通过指向基类 A 的指针引用的子类 B 的实例，并且您调用在两个类中定义的成员函数 foo()，则调用的函数将是在基类中实现的函数。您可以在运行时强制绑定成员函数，将其声明为虚拟（调用的成员函数将是通过基指针指向的类的实际类型之一）。这将导致一个额外的表（虚拟方法表，[vtable](http://en.wikipedia.org/wiki/Virtual_method_table)）用于存储虚拟方法，以及每次调用的双指针间接。

# python - 按多列对数据进行排序

> ID：14347185
> 
> 赞同：1
> 
> 时间：2013-01-15T21:23:47.840
> 
> 标签：python, perl

我有一个关于按多列对数据进行排序的问题。我绝对是这方面的初学者，我想知道如何按一列排序，然后再按另一列排序，而不会丢失第一列的顺序。我有一个由三列组成的制表符分隔数据文件。大多数数据不是配对的（一个 id、第一列、位置开始和结束、第二和第三列）。但是，有时，同一个 ID 有多个条目（第一列）。这些需要保持组合在一起（没有空格将它们与下一个条目分开，除非它具有不同的 ID）。数据实际上已经相对于第一列进行了排序，但是我需要根据起始位置（第二列）对其进行数字排序，同时保留原始排序。像这样：

当前格式：

```
PITG_00129  606 1436

PITG_00130  1   987

PITG_00132  2   1321

PITG_00133 4464 11708
PITG_00133 1 2946
PITG_00133 4081 4515 
```

所需格式：

```
PITG_00129  606 1436

PITG_00130  1   987

PITG_00132  2   1321

PITG_00133 1 2946
PITG_00133 4081 4515
PITG_00133 4464 11708 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:29:45.160

你可以在 python 中很容易地做到这一点。首先，您需要以正确的格式读取数据：

```
def line_to_tuple(line):
    data = line.split()
    return (data[0],int(data[1]),int(data[2])) 
```

这会将每一行变成一个按字典顺序排序的元组。由于您的字符串（第一列）以易于排序的方式设置，因此我们无需担心它们。第二列和第三列只需要转换为整数即可使其正确排序。

```
with open(inputfile) as fin, open(outputfile,'w') as fout:
    non_blank_lines = (line for line in fin if line.strip())
    sorted_lines = sorted(non_blank_lines,key=line_to_tuple)
    fout.writelines(sorted_lines) 
```

这是另一种在字段之间保留空白行的实现：

```
import itertools
def field1(line):
    data = line.split()
    try:
        return data[0]
    except IndexError:
        return None

def fields(line):
    data = line.split()
    return data[0],int(data[1]),int(data[2])

with open('test.dat') as fin, open('output.dat','w') as fout:
    for k,v in itertools.groupby(fin,key=field1):
        if k is None:
            fout.write('\n')
        else:
            fout.writelines(sorted(v,key=fields)) 
```

这使用 itertools 根据空行将文件分块，并在将它们写回之前单独对这些组进行排序。

这是输出：

```
temp $ cat output.dat 
PITG_00129  606 1436

PITG_00130  1   987

PITG_00132  2   1321

PITG_00133 1 2946
PITG_00133 4081 4515
PITG_00133 4464 11708 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T22:48:00.850

这在 perl 中非常简单，并且总是使用 perl、TIMTOWDI（有不止一种方法可以做到这一点。）下面的两个示例产生了相同的结果。

**选项 1** - 在排序中使用或比较运算符。这个例子有一个对象数组。它将首先按last_name 排序，如果它们相等，它将检查first_name。如果您不打算通过不同的变量一遍又一遍地使用数据，这很好。

```
my @records = (...);

my @sorted = sort { $a->last_name cmp $b->last_name ||
                    $a->first_name cmp $b->first_name } @records; 
```

**选项 2** - 使用 sort pragma。Perl 的排序默认情况下是不稳定的，但你可以使用 sort pragma 使其稳定。如果您将通过不同的变量多次使用相同的数据并希望保持上次排序的顺序不变，这是更好的选择。

```
use sort 'stable';

@records = sort { $a->first_name cmp $b->first_name } @records;

@records = sort { $a->last_name cmp $b->last_name } @records; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T21:28:52.917

如果你一个接一个地执行排序，并且排序是稳定的，那么第一个排序的顺序将被保留给第二个排序的相等键。我相信[Python 的排序功能是稳定的](https://stackoverflow.com/questions/1915376/is-pythons-sorted-function-guaranteed-to-be-stable)，不确定 Perl。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T21:32:48.090

算法

```
 1\.  Get the unique first column values
 2\.  for each first column value grep the origiginal file and redirect to temp file
       you will get the partial output in temp file for each unique value.  you can use sort command to sort by 2nd column on the temp file and redirect the output (append) to output file. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T21:31:40.803

要按第一列和第二列对逗号分隔值列表进行排序，请运行以下命令：

```
csvfix sort -f 1,2 data.csv 
```

[http://csvfix.byethost5.com/csvfix15/csvfix.html](http://csvfix.byethost5.com/csvfix15/csvfix.html)

您首先需要查找并替换逗号的选项卡。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-15T22:47:35.303

这是一个 Perl 选项，它使用[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)对第一个数值上的聚类线进行排序。转换使用可以轻松排序的键标记要排序的事物。在示例中，`map`标记所有行。然后该`sort`块指定如何对这些标记值进行排序：按它们的第二个元素。然后`print`编辑未标记的值。

```
use strict;
use warnings;

local $/ = ''; #paragraph mode

while (<>) {
    print $_->[0], "\n"
      for sort { $a->[1] <=> $b->[1] }
          map  { [ $_, (split)[1] ] }
               split /\n/;

    print "\n";
} 
```

调用：`$ perl script.pl data.txt > data_sorted.txt`

作为单行（perl 5.10 或更高版本）：

```
perl -nE'BEGIN{$/=""}say$$_[0]for sort{$$a[1]<=>$$b[1]}map[$_,(split)[1]],split/\n/;say""' data.txt >data_sorted.txt 
```

数据.txt：

```
PITG_00129  606 1436

PITG_00130  417   987
PITG_00130  1   987

PITG_00132  2   1321

PITG_00133 4464 11708
PITG_00133 1 2946
PITG_00133 4081 4515

PITG_00134 446 1170
PITG_00134 41 294
PITG_00134 17 451 
```

data_sorted.txt：

```
PITG_00129  606 1436

PITG_00130  1   987
PITG_00130  417   987

PITG_00132  2   1321

PITG_00133 1 2946
PITG_00133 4081 4515
PITG_00133 4464 11708

PITG_00134 17 451
PITG_00134 41 294
PITG_00134 446 1170 
```

# android - HTTP 请求应该返回一个字符串

> ID：14347188
> 
> 赞同：0
> 
> 时间：2013-01-15T21:23:53.690
> 
> 标签：android, http, request

编辑：“你好”已被删除。所以，你好。

通过到达一个 URL，我应该得到一个字符串作为响应。所以我在这个网站上借了一部分代码，并用一种​​方法把我的字符串变成了一个变量。不幸的是，跳过了“Try”块，返回的字符串是“ *** ”。我对这个脚本有什么误解？

变量“响应”是我应该得到的响应，还是其他？

提前致谢。

```
 private String getMessages() {
    String response = "***";
    try {
        HttpClient client = new DefaultHttpClient();  
        String getURL = "http://***.com/message/";
        HttpGet get = new HttpGet(getURL);
        HttpResponse responseGet = client.execute(get);  
        HttpEntity resEntityGet = responseGet.getEntity();  
        if (resEntityGet != null) {  
            // do something with the response
            response = EntityUtils.toString(resEntityGet);
            Log.i("GET RESPONSE", response);
        }
    } catch (Exception e) {
        e.printStackTrace();

    }

    return response;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:26:51.217

这是我通常使用的（post而不是你的get，但应该是一样的）。

```
public String getMessage(){
InputStream is = null;      
String result = "";
    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(<url>);
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
            nameValuePairs.add(new BasicNameValuePair("var1", var1));   

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }
    //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }
    Log.i("result string", result);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:09:05.813

我想你是从 UI 线程调用它，而 Android 抛出一个异常，说你不能在主线程上进行网络 I/O。您可能没有看到这一点，因为您的 catch 块忽略了异常并且`e.printStrackTrace()`不会将异常转储到 logcat（您必须调用`Log.e("tag", "boom", e);`才能在日志中实际看到它。

首先确认您遇到了异常（修复日志记录，和/或重新抛出异常），如果是这样，那么您需要从另一个线程调用它，例如通过移动到 AsyncTask。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T02:26:56.907

这是我们在应用程序中使用的，在获取 JSON 字符串时非常有用

```
 String response = "";
    try {
        HttpClient httpClientpost = new DefaultHttpClient();
        String postURL = "http://somepostaddress.com";
        HttpPost post = new HttpPost(postURL);
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("postName1", "value1"));
        params.add(new BasicNameValuePair("postName2", "value2"));
        params.add(new BasicNameValuePair("postName3", "value3"));
        //And So On

        UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params);
        post.setEntity(ent);
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        HttpResponse responsePOST = httpClientpost.execute(post);
        HttpEntity resEntity = responsePOST.getEntity();

        //Server Response
        response = EntityUtils.toString(resEntity);
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T21:36:16.577

我不知道这是否正常工作，但这是你必须做的基本想法

```
StringBuilder builder = new StringBuilder();
InputStream content = entity.getContent();
                    BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                    String line;
                    while ((line = reader.readLine()) != null) {
                        builder.append(line);
                    }
String response = builder.toString(); 
```

**更新：**

这是我的代码的简短片段，它可以正常工作：

```
int statusCode = mResponse.getStatusLine().getStatusCode();
                    InputStream is = null;
                    StringBuilder stringBuilder = new StringBuilder();
                    if (statusCode == HttpStatus.SC_OK) {
                        HttpEntity entity = mResponse.getEntity();
                        if (entity != null) {
                            try {
                                is = entity.getContent();
                            } catch (IllegalStateException e) {
                                e.printStackTrace();
                            } catch (IOException e) {
                                e.printStackTrace();
                            }
                            byte[] buffer = new byte[1024];
                            int length;
                            try {
                                while ((length = is.read(buffer)) > 0) {
                                    stringBuilder.append(new String(buffer, 0, length));
                                }
                            } catch (IOException e) {
                                e.printStackTrace();
                            }
                        }
                    } 
```

顺便说一句，缓冲读数是您可以选择的最佳解决方案，但我真的不认为那是您的问题，因为我之前已经注意到 HTTPEntity**不能为 null**，所以我认为 HTTPRequest 有问题，也许尝试检查使用提琴手的请求结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T19:50:41.727

我只是想在 Activity 而不是 AnsyncTask 中执行此操作。现在在 doInBackground 中效果更好。

谢谢你们。

# cmd - CMD 删除文件扩展名 *.hmtl.deploy 到 *.html

> ID：14347193
> 
> 赞同：0
> 
> 时间：2013-01-15T21:24:16.277
> 
> 标签：cmd, file-extension, removeall

我在目录中有几百个文件 .deploy 有些是 .html 其他是 .js 或 .css

我想要做的是从 directoryX 和子目录中的所有文件中删除 .deploy 。我曾尝试使用 ren *.html.deploy *.html，输出为 .html.html。

我不经常使用 cmd，所以我不太熟悉命令或我应该在 google 中使用哪些术语。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:27:31.127

你有没有尝试过：

```
for /r %x in (*.deploy) do ren "%x" *. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T22:39:32.653

怎么样：

```
ren *.deploy *. 
```

这个对我有用。不需要复杂的 for 循环。

# ruby-on-rails - Rails - 控制器中的 Redirect_to 错误 - “页面未正确重定向” “

> ID：14347194
> 
> 赞同：0
> 
> 时间：2013-01-15T21:24:16.270
> 
> 标签：ruby-on-rails, redirect, controller

在学习 Rails 的过程中，请原谅我的菜鸟问题。

我想要做什么：有一个 text_field_tag 允许用户输入项目 ID。然后我想获取该值并将其用作 url 中的参数。前任。用户在文本框中键入“4Qe6”并单击提交。然后页面导航到'trckr.net/tracker/track/4Qe6'

这是我的表单的代码：

```
<h1>Tracker#index</h1>
<p>This is the landing page</p>
<p>
  <u> Track an item: </u>
  <%= form_tag(:action => 'track') do %>
    Item ID: <%= text_field_tag(:id) %>

    <%= submit_tag('Track Item') %>
  <% end %>
</p> 
```

在 TrackerController 中：

```
class TrackerController < ApplicationController
  def index
  end

  def track
    puts "navigating to track view"
    @id = params[:id]
    redirect_to "/tracker/track/#{@id}" 
  end
end 
```

但我收到错误消息：页面未正确重定向 - Firefox 检测到服务器正在以永远不会完成的方式重定向此地址的请求。

但是，如果我直接链接到这样的页面：

```
<%= link_to("Track item 2", {:action => 'track', :id => '6969'}) %> 
```

它工作正常。这是我运行时的输出`rake routes`：

```
Calvins-Air:trckr Calvino$ rake routes
root  /                                      tracker#index
      /:controller(/:action(/:id))(.:format) :controller#:action 
```

如果我使用不同的操作，我将无法使用我在控制器中设置的实例变量。

新控制器代码：

```
 def track
    puts "navigating to track view"
  end

  #redirects to track after retrieving the url parameters
  #want a url parameter so users can link to the page
  def track_helper
    @id = params[:id]
    redirect_to "/tracker/track/#{@id}"
  end 
```

但随后跟踪视图，@id 无法访问：

```
<h1>Tracker#track</h1>
<p>This page will be used to view an items details</p>
<p><b>Item id: <%= @id %> </b></p>

<%= link_to("Back to index" , {:action => 'index'}) %> 
```

编辑：通过在跟踪操作中声明 @id 变量来修复最后一个错误。固定代码：

```
 def track
    puts "navigating to track view"
    @id = params[:id]
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:39:58.623

我想这是因为您的重定向路径是由您发送此请求的同一操作（和控制器）处理的。您可以为其创建一个新操作，也可以将其路由到不同的处理程序。

# count - 按 id 计算变量的重复值

> ID：14347199
> 
> 赞同：0
> 
> 时间：2013-01-15T21:24:27.440
> 
> 标签：count, sas

我是 SAS 的第一步，我遇到了以下我无法解决的问题。

假设我的数据集是：

```
data dat;
  input id score gender;
  cards;
  1 10 1
  1 10 1
  1 9 1
  1 9 1
  1 9 1
  1 8 1
  2 9 2
  2 8 2
  2 9 2
  2 9 2
  2 10 2
  ;
run; 
```

我需要做的是计算`score`变量按 id 取值 8、9 和 10 的次数。然后创建新的 variables `count8`，`count9`这样`count10`我就可以获得以下输出：

```
 id     gender    count8    count9    count10
   1        1         1          3        2
   2        2         1          3        1 
```

你会建议如何进行？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:48:57.973

有很多方法可以做到这一点。这是一种简单的单数据步骤方法。

```
data want;
set dat;
by id;
if first.id then do;
  count8=0;
  count9=0;
  count10=0;
end;
select(score);
  when(8) count8+1;
  when(9) count9+1;
  when(10) count10+1;
  otherwise;
end;
if last.id then output;
keep id count8 count9 count10;
run; 
```

SELECT...WHEN 基本上是一堆 IF 语句的缩写（就像其他语言中的 CASE..WHEN 一样）。

顺便说一句，性别应该被删除，除非它总是通过 ID 相同（或者除非你打算用它来计算。）

比这更灵活的方法是使用 PROC FREQ（或 PROC MEANS 或 ...）并将其转置：

```
proc freq data=dat noprint;
tables id*score/out=want_pre;
run;

proc transpose data=want_pre out=want prefix=count;
by id;
id score;
var count;
run; 
```

如果您真的只想要 8、9、10 并且想要删除少于 8 条的记录，请在 PROC FREQ 的 data=dat 部分执行此操作：

```
proc freq data=dat(where=(score ge 8)) noprint; 
```

# arrays - 我无法访问哈希值

> ID：14347201
> 
> 赞同：0
> 
> 时间：2013-01-15T21:24:30.157
> 
> 标签：arrays, perl, hash, bioinformatics, fasta

我有一个程序可以在解析 FASTA 文件时创建一个哈希数组。这是我的代码

```
use strict;
use warnings;

my $docName = "A_gen.txt";
my $alleleCount = 0;
my $flag = 1;

my $tempSequence;
my @tempHeader;
my @arrayOfHashes = ();

my $fastaDoc = open(my $FH, '<', $docName);
my @fileArray = <$FH>;

for (my $i = 0; $i <= $#fileArray; $i++) {
    if ($fileArray[$i] =~ m/>/) { # creates a header for the hashes
    $flag = 0;
    $fileArray[$i] =~ s/>//;
    $alleleCount++;
    @tempHeader = split / /, $fileArray[$i];
    pop(@tempHeader); # removes the pointless bp
    for (my $j = 0; $j <= scalar(@tempHeader)-1; $j++) {
        print $tempHeader[$j];
        if ($j < scalar(@tempHeader)-1) {
            print " : "};
            if ($j == scalar(@tempHeader) - 1) {
                print "\n";
            };
        }
    }
    # push(@arrayOfHashes, "$i");

    if ($fileArray[$i++] =~ m/>/) { # goes to next line
        push(@arrayOfHashes, {
            id => $tempHeader[0],
            hla => $tempHeader[1], 
            bpCount => $tempHeader[2],
            sequence => $tempSequence
        });
        print $arrayOfHashes[0]{id};
        @tempHeader = ();
        $tempSequence = "";
    }
    $i--; # puts i back to the current line

    if ($flag == 1) {
        $tempSequence = $tempSequence.$fileArray[$i];
    }
}

print $arrayOfHashes[0]{id};
print "\n";

print $alleleCount."\n";
print $#fileArray +1; 
```

我的问题是当线路

> 打印 $arrayOfHashes[0]{id};

被调用，我收到一条错误消息

> 在 fasta_tie.pl 第 47 行第 6670 行的打印中使用未初始化的值。

你会在上面的代码中看到我注释掉了一行，上面写着

> 推（@arrayOfHashes，“$i”）；

因为我想确保哈希有效。此外，数据以所需的格式正确打印。看起来像这样

> HLA:HLA00127：A*74:01：2918

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:47:28.600

尝试添加

```
print "Array length:" . scalar(@arrayOfHashes) . "\n"; 
```

前

```
print $arrayOfHashes[0]{id}; 
```

所以你可以看到，如果你的变量中有一些内容。您还可以使用模块[Data::Dumper](https://metacpan.org/module/Data%3a%3aDumper)来查看内容。

```
use Data::Dumper;
print Dumper(\@arrayOfHashes); 
```

注意数组前的'\'！

输出将类似于：

> $VAR1 = [ { 'sequence' => 'tempSequence', 'hla' => 'hla', 'bpCount' => 'bpCount', 'id' => 'id' } ];

**但如果有 Fasta 的模块，请尝试使用它。您不必每次都重新发明轮子；）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:49:50.803

首先你这样做：

```
 $fileArray[$i] =~ s/>//; 
```

然后稍后您尝试像这样匹配：

```
$fileArray[$i++] =~ m/>/ 
```

您逐步浏览文件数组，删除每行中的第一个“大于”符号。然后你想用同一个字符匹配当前行。如果您只想在*第二个*“大于”的情况下推送该行，那将是可以的，但是如果您只期望 1，或者结果只有一个，您将永远不会将任何内容推送到数组中。

*   您的评论“将 i 放回当前行”显示了您要执行的操作，但是如果您只使用一次，为什么不使用该表达式`$i + 1`？

*   另外，因为您在*修复后*增加它并且没有将它用于任何事情，所以您的增量*没有效果*。如果`$i==0`之前，则`$fileArray[$i++]` *仍然*访问`$fileArray[0]`，仅`$i==1`在对表达式求值之后 - 并且没有效果 - 直到后来被递减。

如果你想*向前看*，那么最好使用前缀增量：

```
if ($fileArray[++$i] =~ m/>/) ... 
```

# java - 如何检测java中的换行符

> ID：14347202
> 
> 赞同：8
> 
> 时间：2013-01-15T21:24:30.437
> 
> 标签：java, text, newline

是的，我已经阅读了其他一些关于换行符的帖子，但它们对我没有帮助。

我的 Java 程序应该读取一个 .PHP 文件并将源代码拆分为逐行格式。问题是我似乎无法真正区分一个换行符和另一个换行符。

我尝试使用 /n 没用....我尝试使用 /r/n 没用.....

这是一个例子

```
step_B = step_A.replaceAll("\n", "XXX"); 
```

我试图用 XXX 替换换行符，但没有用。

这是我想拆分的 php 示例，我设法使用分隔线；作为分隔符，但我现在必须对其进行更多改进。

```
$ALL_AUTH = mysql_fetch_row($author_lookup);
    //preparing to display the output in the table
    echo "<tr>"; 
```

我希望它输出这样的东西

```
INFO:  $ALL_AUTH = mysql_fetch_row($author_lookup)

INFO:  //preparing to display the output in the table 

INFO:  echo "<tr>" 
```

但相反我得到了这个

```
INFO:  $ALL_AUTH = mysql_fetch_row($author_lookup)

INFO:  //preparing to display the output in the table  echo "<tr>" 
```

该应用程序似乎无法检测到评论以“table”一词结尾后有换行符。有没有办法做到这一点 ？最好不要对单词表或类似的东西进行硬编码。

哦，我发现了错误，我在早期阶段通过一些正则表达式对代码块进行了转换，这弄乱了换行符....代码块变成了一大行文本！因此没有换行符感谢您的时间！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-15T21:27:48.813

如果字符串中已有数据：

```
String[] lines = string.split("\r\n|\n|\r");
for (String line : lines) {
    System.out.println(line);
} 
```

或者直接从文件中读取行：

```
BufferedReader br = new BufferedReader(new FileReader("myfilename"));
String line = null;
while ((line = br.readLine()) != null) {
    System.out.println(line);
} 
```

Java 7+ 有一种直接从文件系统读取行的便捷方法：

```
Path path = FileSystems.getDefault().getPath("myfilename");
List<String> lines = Files.readAllLines(path, Charset.defaultCharset());
for (String line : lines) {
    System.out.println(line);
} 
```

Java 不做自动字符集检测，所以你有责任在读取文本文件时正确设置字符集；否则可能无法正确读取字符。不要忘记保持整洁： .close() 您的文件句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:27:29.660

我相信我有一个解决方案。你是对的， /n 什么都不做。但是，java 使用`\n`. 注意反斜杠而不是斜杠。

尝试使用`\n`而不是`/n`

编辑

实际上，我只是重新阅读了您的代码。据此，您做得正确。只要确保你的实际代码是这样的。否则，此答案对您没有帮助，但可能对其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:28:31.093

根据您用于读取 PHP 的 Java 类，使用类似[BufferedReader.readLine](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)的东西。它会为您抓取一行文字，而您不必担心`\n`或`\r\n`发疯。

# javascript - 我可以在 .append() 中获得一个 forloop，它已经在一个 forloop 中吗？

> ID：14347204
> 
> 赞同：-1
> 
> 时间：2013-01-15T21:24:35.983
> 
> 标签：javascript, jquery

我正在尝试创建一个基于“宽度”（列）和“高度”（行）的表格，但我无法做到正确。那么我的代码有问题吗？

代码：

```
for(var i=0;i<width;i++){
        $('#map').append(
            '<tr>'+
                for(var e=0;e<height;e++){

                }
            +'</tr>'
        );
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:28:26.077

您的代码无效，那里不能有 for 循环。尝试重新排列一下。

```
var html;
for(var i=0;i<width;i++){
    html = '<tr>';
    for(var e=0;e<height;e++){
        html += "<td>foo"+e+"</td>";
    }
    html +='</tr>'
    $('#map').append(html);
}; 
```

甚至更好：

```
var html = "";
for(var i=0;i<width;i++){
    html += '<tr>';
    for(var e=0;e<height;e++){
        html += "<td>foo"+e+"</td>";
    }
    html +='</tr>';
};
$('#map').append(html); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:27:16.773

以编程方式创建`<tr>`元素并将`<td>`元素附加到它。

```
var table = [];
for(var i = 0, $tr; i < height; i++){
  $tr = $("<tr/>");
  for(var j = 0; j < width; j++){
    $tr.append("<td/>");
  )
  table.push($tr);
}
$map.append(table); 
```

**更新：**针对 DOM 访问进行了优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:31:30.633

你可以这样：

```
for(var i=0; i < height; i++){
  var row = "<tr>";
  for(var j=0; j < width; j++){
    row += "<td>Something data</td>";
  }
  row += "</tr>";
  $('#map').append(row)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T21:33:14.270

做你正在做的事情的jQuery方法是这样的：

```
var $table = $('<tbody />');

for(var i = 0; i < width; i++){
  $tr = $("<tr/>");
  for(var e = 0; e < height; e++){
    $tr.append("<td/>");
  );
  $table.append($tr);
};

$('#map').append($table); 
```

这样你就只能访问 DOM**一次**。

# memory-management - 虚拟内存和物理内存有什么区别？

> ID：14347206
> 
> 赞同：125
> 
> 时间：2013-01-15T21:24:44.640
> 
> 标签：memory-management, operating-system, virtualization, ram, virtual-memory

我经常对操作系统中的虚拟化概念感到困惑。将 RAM 视为物理内存，为什么我们需要虚拟内存来执行进程？

当外部硬盘驱动器的进程（程序）被带到主内存（物理内存）执行时，这个虚拟内存在哪里。

谁负责虚拟内存，虚拟内存的大小是多少？

假设 RAM 的大小为 4GB（即 2^32-1 个地址空间），虚拟内存的大小是多少？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2018-02-16T22:15:14.833

软件在操作系统上运行的前提非常简单——它们需要内存。设备操作系统以 RAM 的形式提供它。所需的内存量可能会有所不同 - 有些软件需要巨大的内存，有些需要微不足道的内存。大多数（如果不是全部）用户同时在操作系统上运行多个应用程序，并且考虑到内存很昂贵（并且设备大小是有限的），可用的内存量总是有限的。因此，鉴于所有软件都需要一定数量的 RAM，并且所有软件都可以同时运行，操作系统必须处理两件事：

1.  该软件*始终*运行直到用户中止它，即它不应该自动中止，因为操作系统已耗尽内存。
2.  上述活动，同时保持软件运行的可观性能。

现在主要问题归结为如何管理内存。究竟是什么决定了属于给定软件的数据将驻留在内存中的哪个位置？

> **可能的解决方案 1**：让各个软件明确指定它们将在设备中使用的内存地址。假设**Photoshop**声明它将始终使用范围从`0`到的内存地址`1023`（将内存想象为字节的线性数组，因此第一个字节在 location `0`，第一个`1024`字节在 location `1023`）——即占用`1 GB`内存。同样，**VLC**声明它将占用内存范围`1244`to`1876`等。

好处：

1.  每个应用程序都预先分配了一个内存插槽，因此当它安装和执行时，它只是将其数据存储在该内存区域中，一切正常。

缺点：

1.  这不成比例。从理论上讲，应用程序在执行非常繁重的任务时可能需要大量内存。因此，为了确保它永远不会耗尽内存，分配给它的内存区域必须始终大于或等于该内存量。如果一个软件的最大理论内存使用量是`2 GB`（因此需要`2 GB`从 RAM 分配内存），安装在只有`1 GB`内存的机器上怎么办？软件是否应该在启动时中止，说可用 RAM 小于`2 GB`？或者它应该继续，并且当所需的内存超过`2 GB`时，只是中止并使用没有足够内存可用的消息退出？

2.  无法防止内存损坏。那里有数以百万计的软件，即使每个软件都只分配`1 kB`内存，所需的总内存也会超过`16 GB`，这比大多数设备提供的要多。那么，如何为不同的软件分配内存插槽，而不会侵占彼此的区域呢？首先，没有一个集中的软件市场可以规定当一个新软件发布时，它必须从*这个尚未被占用的区域分配给自己这么多的内存*，其次，即使有，也不可能这样做，因为没有。软件的数量实际上是无限的（因此需要无限的内存来容纳所有这些），并且任何设备上可用的总 RAM 甚至不足以容纳所需的一小部分，因此不可避免地会侵犯一个软件的内存边界根据另一个。那么当**Photoshop**被分配内存位置并且**VLC**被分配`1`给时会发生什么？如果**Photoshop**在 location 存储一些数据，然后**VLC**会用自己的数据覆盖它，然后**Photoshop**`1023`**`1000``1676`**`1008`****访问它时认为它与以前存储的数据相同？可以想象，不好的事情会发生。********

 ******很明显，正如你所看到的，这个想法相当幼稚。

> **可能的解决方案 2**：让我们尝试另一种方案 - 操作系统将执行大部分内存管理。软件，只要它们需要任何内存，就会请求操作系统，操作系统会相应地适应。假设 OS 确保每当一个新进程请求内存时，它将从可能的最低字节地址分配内存（如前所述，RAM 可以想象为字节的线性数组，因此对于`4 GB`RAM，地址范围为字节从`0`到`2^32-1`) 如果进程正在启动，否则如果它是正在运行的进程请求内存，它将从该进程仍然驻留的最后一个内存位置进行分配。由于软件将发出地址而不考虑实际内存地址将是存储数据的位置，因此操作系统必须维护每个软件发出的地址到实际物理地址的映射（注意：这就是我们称之为这个概念的两个原因之一**`Virtual Memory`**。软件并不关心存储数据的真实内存地址，它们只是动态地吐出地址，操作系统会找到合适的位置来放置它并找到它以后如果需要）。

假设设备刚刚打开，操作系统刚刚启动，现在没有其他进程在运行（忽略操作系统，这也是一个进程！），你决定启动**VLC**。因此，**VLC**从最低字节地址开始分配 RAM 的一部分。好的。现在，当视频运行时，您需要启动浏览器来查看一些网页。然后你需要启动**记事**本来写一些文字。然后**Eclipse**做一些编码。很快你的内存`4 GB`就用完了，RAM 看起来像这样：

                                   [![在此处输入图像描述](../Images/67ff0ce29a6a1ad054035f2ae006ec6a.png)](https://i.stack.imgur.com/Z4rwA.png)

> **问题 1：现在您无法启动任何其他进程，因为所有 RAM 都已用完。因此，编写程序时必须牢记最大可用内存（实际上可用内存更少，因为其他软件也将并行运行！）。换句话说，您无法在摇摇欲坠的`1 GB`PC 中运行高内存消耗的应用程序。**

好的，所以现在您决定不再需要让**Eclipse**和**Chrome**保持打开状态，您可以关闭它们以释放一些内存。这些进程在 RAM 中占用的空间被操作系统回收，现在看起来像这样：

                                    [![在此处输入图像描述](../Images/1bb80b170f9627fa857c72b2cf7dbd4e.png)](https://i.stack.imgur.com/3Xi5I.png)

假设关闭这两个释放`700 MB`空间 - ( `400`+ `300`) MB。现在您需要启动**Opera**，这将占用`450 MB`空间。嗯，你确实有超过`450 MB`可用空间，但是......它不是连续的，它被分成单独的块，没有一个大到足以容纳`450 MB`. 所以你想到了一个绝妙的主意，让我们将下面的所有进程尽可能地移到上面，这将`700 MB`在底部留下一块空白空间。这就是所谓的**`compaction`**. 太好了，除了……所有的进程都在运行。移动它们将意味着移动它们所有内容的地址（请记住，操作系统维护软件吐出的内存到实际内存地址的映射。想象一下软件吐出了一个`45`带有数据的地址`123`，而操作系统将其存储在位置`2012`并在地图中创建了一个条目，映射`45`到`2012`。如果现在将软件移动到内存中，则以前的位置`2012`将不再位于`2012`，而是在新位置，并且操作系统必须相应地更新地图以映射`45`到新地址，以便软件`123`在查询内存位置时可以得到预期的数据（）`45`。对软件而言，它只知道那个地址`45`包含数据`123`！）！想象一个引用局部变量的进程**`i`**。再次访问时，它的地址已经改变，再也找不到了。这同样适用于所有函数、对象、变量，基本上所有东西都有一个地址，移动一个进程将意味着改变所有它们的地址。这导致我们：

> **问题 2：您无法移动进程。该进程中的所有变量、函数和对象的值都具有编译器在编译期间吐出的硬编码值，该进程依赖于它们在其生命周期内位于同一位置，并且更改它们的成本很高。结果，进程在`holes`退出时会留下大的“”。这被称为 `External Fragmentation`。**

美好的。假设不知何故，通过某种神奇的方式，您确实设法将流程向上移动。现在`700 MB`底部有空闲空间：

                        [![在此处输入图像描述](../Images/29ba620bb7f95171663fb062d8dd7c93.png)](https://i.stack.imgur.com/4AZI2.png)

**Opera**在底部很流畅。现在你的 RAM 看起来像这样：

                                    [![在此处输入图像描述](../Images/6ce9758ccbbd144e97d68327dcd3f7b2.png)](https://i.stack.imgur.com/3Bk2c.png)

好的。一切看起来都很好。但是，剩下的空间不多了，现在您需要再次启动**Chrome**，这是众所周知的内存占用者！它需要大量内存才能启动，而您几乎没有剩余内存...除了...您现在注意到一些最初占用大量空间的进程现在不需要太多空间。**可能是您在VLC**中停止了视频，因此它仍然占用一些空间，但没有运行高分辨率视频所需的那么多。记事**本**和**照片**也是如此。您的 RAM 现在看起来像这样：

                                        [![在此处输入图像描述](../Images/99d9f75add0697874ed497f48b0f1f1e.png)](https://i.stack.imgur.com/u4ZSP.png)

**`Holes`**， 再来一次！回到原点！除了以前，由于进程终止而出现漏洞，现在是由于进程需要的空间比以前少！你又遇到了同样的问题，**`holes`**合并后的空间比需要的多，但它们分散在周围，孤立地用处不大。因此，您必须再次移动这些流程，这是一项昂贵的操作，而且是非常频繁的操作，因为流程在其生命周期内会经常缩小规模。

> **问题 3：进程在其生命周期内可能会缩小尺寸，留下未使用的空间，如果需要使用这些空间，将需要移动许多进程的昂贵操作。这被称为 `Internal Fragmentation`。**

好的，所以现在，您的操作系统执行所需的操作，移动进程并启动**Chrome**，一段时间后，您的 RAM 看起来像这样：

[![在此处输入图像描述](../Images/6689256052bfd5786fe87f63be33d9d8.png)](https://i.stack.imgur.com/bNvn6.png)

凉爽的。现在假设您再次在**VLC**中继续观看*Avatar*。它的内存需求会猛增！但是......没有空间让它成长，因为**记事本**依偎在它的底部。所以，再一次，所有进程都必须移动到下面，直到**VLC**找到足够的空间！

 ******> **问题 4：如果进程需要增长，这将是一项非常昂贵的操作**

美好的。现在假设，**照片**被用于从外部硬盘加载一些照片。访问硬盘会将您从缓存和 RAM 领域带到磁盘领域，后者的速度要慢几个数量级。痛苦地、不可逆转地、超然地缓慢。这是一个 I/O 操作，这意味着它不受 CPU 限制（恰恰相反），这意味着它现在不需要占用 RAM。但是，它仍然顽固地占用RAM。如果您想同时启动**Firefox**，则不能，因为可用内存不多，而如果**照片**在其 I/O 绑定活动期间内存不足，它会释放大量内存，然后是（昂贵的）压缩，然后是**Firefox**适应。

> **问题 5：I/O 绑定的作业不断占用 RAM，导致 RAM 的利用率不足，而这本来可以被 CPU 绑定的作业使用。**

因此，正如我们所看到的，即使使用虚拟内存的方法，我们也会遇到很多问题。

* * *

有两种方法可以解决这些问题 -**`paging`**和**`segmentation`**. 让我们讨论一下**`paging`**。在这种方法中，进程的虚拟地址空间以块的形式映射到物理内存——称为**`pages`**. 一个典型的**`page`**尺寸是`4 kB`. 映射由称为 a 的东西维护**`page table`**，给定一个虚拟地址，现在我们要做的就是找出**`page`**该地址属于哪个地址，然后从 中**`page table`**找到该地址在实际物理内存中的对应位置**`page`**（称为**`frame`**），并给出如果 和 中的虚拟地址的偏移量**`page`**相同，则**`page`**通过**`frame`**将该偏移量添加到 . 返回的地址来找出实际地址**`page table`**。例如：

[![在此处输入图像描述](../Images/c17ab2982bac6a722b4fe6421d6aa07a.png)](https://i.stack.imgur.com/ic15A.png)

左边是进程的虚拟地址空间。假设虚拟地址空间需要 40 个内存单位。如果物理地址空间（右侧）也有 40 个内存单元，则可以将左侧的所有位置映射到右侧的位置，我们会非常高兴。但不幸的是，不仅物理内存可用的内存单元更少（这里是 24 个），而且还必须在多个进程之间共享！好吧，让我们看看我们如何处理它。

当该过程开始时，假设对位置进行了内存访问请求`35`。这里的页面大小是`8`（每个都**`page`**包含`8`位置，因此位置的整个虚拟地址空间`40`包含`5`页面）。所以这个位置属于页码。`4`( `35/8`)。在 this**`page`**中，此位置的偏移量为`3`( `35%8`)。所以这个位置可以由元组`(pageIndex, offset)`=指定`(4,3)`。这只是一个开始，因此还没有将过程的任何部分存储在实际的物理内存中。所以**`page table`**，它维护了左侧页面到右侧实际页面的映射（它们被称为**`frames`**) 目前为空。因此操作系统放弃了 CPU，让设备驱动程序访问磁盘并获取页码。`4`对于这个进程（基本上是来自磁盘上程序的内存块，其地址范围从`32`到`39`）。当它到达时，操作系统将页面分配到 RAM 中的某个位置，例如第一帧本身，并且**`page table`**对于此过程，请注意页面`4`映射到`0`RAM 中的帧。现在数据终于在物理内存中了。操作系统再次查询 tuple 的页表`(4,3)`，这一次，页表表明该页`4`已映射到`0`RAM 中的帧。所以操作系统只是进入`0`RAM 中的第 th 帧，访问该帧中偏移量的数据`3`（花点时间理解这一点。整个**`page`**，从磁盘中取出，移动到**`frame`**. 因此，无论页面中单个内存位置的偏移量是多少，它在帧中也将是相同的，因为在**`page`**/内**`frame`**，内存单元仍然相对位于同一位置！），并返回数据！因为数据在第一次查询时没有在内存中找到，而是必须从磁盘中取出来加载到内存中，所以它构成了一次未**命中**。

美好的。现在假设，对位置进行了内存访问`28`。归结为`(3,4)`. **`Page table`**现在只有一个条目，将 page 映射`4`到 frame `0`。所以这又是一次未**命中**，进程放弃 CPU，设备驱动程序从磁盘获取页面，进程再次重新获得对 CPU 的控制权，并对其**`page table`**进行更新。现在说页面`3`映射到`1`RAM 中的帧。因此`(3,4)`变成`(1,4)`，并返回 RAM 中该位置的数据。好的。这样，假设下一次内存访问是针对 location `8`，它转换为`(1,0)`。页面`1`尚未在内存中，重复相同的过程，并**`page`**在帧分配`2`在内存中。现在 RAM 进程映射如上图所示。此时，只有 24 个可用内存单元的 RAM 已被填满。假设该进程的下一个内存访问请求来自 address `30`。它映射到`(3,6)`，并**`page table`**说该页面`3`在 RAM 中，它映射到 frame `1`。耶！所以数据是从 RAM 位置获取`(1,6)`并返回的。这构成了一次**命中**，因为所需的数据可以直接从 RAM 中获取，因此速度非常快。类似地，接下来的几个访问请求，比如位置`11`、`32`、`26`，`27`都是**命中**，即进程请求的数据直接在 RAM 中找到，而无需查找其他地方。

现在假设来了一个对位置的内存访问请求`3`。它转换为`(0,3)`, 和**`page table`**对于这个进程，它当前有 3 个条目，对于 pages `1`，`3`并且`4`说这个页面不在内存中。像以前的情况一样，它是从磁盘中获取的，但是，与以前的情况不同的是，RAM 被填满了！那么现在该怎么办呢？这就是虚拟内存的美妙之处，RAM 中的一帧被逐出！（各种因素决定要驱逐哪个帧。它可能是**`LRU`**基于，其中最近最少访问进程的帧将被驱逐。它可能是**`first-come-first-evicted`**基础，其中最早分配的帧被驱逐，等等.) 所以有些框架被驱逐了。说第 1 帧（只是随机选择它）。然而，这**`frame`**映射到一些**`page`**！（目前，它是由页表映射到`3`我们唯一一个进程的页）。所以这个过程必须被告知这个悲惨的消息，那个**`frame`**不幸属于你的人将被从 RAM 中逐出，以便为另一个人腾出空间**`pages`**。进程必须确保它**`page table`**使用此信息更新它，即删除该页框二重奏的条目，以便下一次对此发出请求时**`page`**，它正确地告诉进程这**`page`**不再在内存中，并且必须从磁盘中获取。好的。所以框架`1`被驱逐，页面`0`被引入并放置在RAM中，页面的条目`3`被删除，并被页面`0`映射到同一框架替换`1`. **`frame`**所以现在我们的映射看起来像这样（注意右边第二个的颜色变化）：

[![在此处输入图像描述](../Images/8383c58b3834e9134ae8654011dbe911.png)](https://i.stack.imgur.com/D0UCl.png)

看到刚刚发生了什么？进程必须增长，它需要比可用 RAM 更多的空间，但与我们之前的场景不同，即 RAM 中的每个进程都必须移动以适应不断增长的进程​​，这里只发生了一个**`page`**替换！这是因为一个进程的内存不再需要是连续的，它可以以块的形式驻留在不同的位置，操作系统维护关于它们在哪里的信息，并且在需要时，它们被适当地查询。注意：你可能会想，嗯，如果大多数时候它是 a **`miss`**，并且数据必须不断地从磁盘加载到内存中怎么办？是的，理论上是可以的，但是大多数编译器的设计方式如下*`locality of reference`*，即如果使用来自某个内存位置的数据，则需要的下一个数据将位于非常接近的某个地方，可能来自刚刚加载到内存中**`page`**的同一个 。**`page`**结果，下一次未命中将在相当长的一段时间后发生，即将到来的大部分内存需求将由刚刚引入的页面或最近使用的已在内存中的页面来满足。完全相同的原则也允许我们驱逐最近最少使用**`page`**的内容，其逻辑是一段时间未使用的内容也不太可能在一段时间内使用。但是，并非总是如此，在特殊情况下，是的，性能可能会受到影响。稍后再详细介绍。

> **问题4的解决方案：进程现在可以轻松增长，如果遇到空间问题，只需要进行简单的`page`替换，而不需要移动任何其他进程。**

* * *

> **问题1的解决方案：一个进程可以访问无限的内存。当需要的内存多于可用内存时，将磁盘用作备份，所需的新数据从磁盘加载到内存中，并将最近最少使用的数据`frame`（或`page`）移动到磁盘。这可以无限进行，而且由于磁盘空间便宜且几乎无限，它给人一种内存无限的错觉。这个名字的另一个原因`Virtual Memory`，它给你的记忆是不可用的错觉！**

凉爽的。早些时候我们遇到了一个问题，即使一个进程的大小减小了，其他进程也很难回收空的空间（因为它需要昂贵的压缩）。现在很容易，当一个进程变得更小，它的许多**`pages`**不再被使用，所以当其他进程需要更多内存时，一个简单**`LRU`**的基于逐出自动**`pages`**从 RAM 中逐出那些较少使用的，并用新页面替换它们其他进程（当然还有更新**`page tables`**所有这些进程以及现在需要更少空间的原始进程），所有这些都没有任何昂贵的压缩操作！

> **问题 3 的解决方案：每当进程缩小时，其`frames`in RAM 的使用就会减少，因此基于简单`LRU`的逐出可以逐出这些页面并替换`pages`为新进程所需的页面，从而避免`Internal Fragmentation`不需要`compaction`.**

至于问题2，花点时间理解一下，场景本身就完全去掉了！没有必要移动进程来适应新进程，因为现在整个进程不需要立即适应，只有它的某些页面需要临时适应，这是通过**`frames`**从 RAM 中逐出来实现的。一切都以 为单位发生**`pages`**，因此没有现在的概念**`hole`**，因此没有任何移动的问题！**`pages`**由于这项新要求，可能有 10 个必须被移动，其中有数千个**`pages`**未被触及。而之前，所有进程（每一个进程）都必须移动！

> **问题 2 的解决方案：为了适应一个新进程，来自其他进程的最近较少使用的部分的数据必须根据需要被逐出，这发生在称为`pages`. 因此，没有这个系统的可能性，也没有`hole`这个`External Fragmentation`系统的可能性。**

现在当进程需要做一些 I/O 操作时，它可以轻松放弃 CPU！操作系统只是将其全部**`pages`**从 RAM 中逐出（可能将其存储在某个缓存中），同时新进程会占用 RAM。当 I/O 操作完成时，OS 只是将它们恢复**`pages`**到 RAM（当然通过替换**`pages`**其他一些进程，可能来自替换原始进程的那些，或者可能来自一些他们自己需要执行 I/哦，现在，因此可以放弃记忆！）

> **问题5的解决方案：当一个进程在做I/O操作时，它很容易放弃RAM的使用，这可以被其他进程使用。这导致正确利用 RAM。**

当然，现在没有进程直接访问 RAM。每个进程都在访问一个虚拟内存位置，该位置映射到一个物理 RAM 地址并由该**`page-table`**进程维护。映射是由操作系统支持的，操作系统让进程知道哪个框架是空的，以便可以在那里安装一个进程的新页面。由于这种内存分配由操作系统本身监督，它可以很容易地确保没有进程通过仅分配 RAM 中的空帧来侵犯另一个进程的内容，或者在侵犯 RAM 中另一个进程的内容时，与该进程通信更新它**`page-table`**。

> **原始问题的解决方案：一个进程不可能访问另一个进程的内容，因为整个分配由操作系统本身管理，每个进程都在自己的沙盒虚拟地址空间中运行。**

因此**`paging`**（在其他技术中），结合虚拟内存，是当今在 OS-es 上运行的软件的动力！这让软件开发人员不必担心用户设备上有多少可用内存、数据存储在哪里、如何防止其他进程破坏他们的软件数据等。但是，这当然不是万无一失的。有以下缺陷：

1.  **`Paging`**最终，通过使用磁盘作为辅助备份，给用户带来无限内存的错觉。从辅助存储中检索数据以放入内存（称为**`page swap`**，并且在 RAM 中找不到所需页面的事件称为**`page fault`**）是昂贵的，因为它是一个 IO 操作。这会减慢该过程。几个这样的页面交换连续发生，这个过程变得非常缓慢。有没有见过您的软件运行良好且花花公子，突然变得如此缓慢以至于几乎挂起，或者让您无法重新启动它？可能发生了太多的页面交换，使其变慢（称为**`thrashing`**）。

所以回到OP，

**为什么我们需要虚拟内存来执行进程？**- 正如答案详细解释的那样，给软件一种设备/操作系统具有无限内存的错觉，以便任何软件，无论大小，都可以运行，而不用担心内存分配或其他进程破坏其数据，即使在并行运行。它是一个概念，通过各种技术在实践中实现，如这里所述，其中一种技术是**Paging**。也可能是**Segmentation**。

**当外部硬盘驱动器的进程（程序）被带到主内存（物理内存）执行时，这个虚拟内存在哪里？**- 虚拟内存本身并不存在于任何地方，它是一种抽象，始终存在，当软件/进程/程序启动时，会为它创建一个新的页表，它包含来自该地址的映射处理到 RAM 中的实际物理地址。由于进程吐出的地址不是真正的地址，因此在某种意义上，它们实际上就是你可以说的，*`the virtual memory`*.

**谁负责虚拟内存，虚拟内存的大小是多少？**- 它由操作系统和软件协同处理。想象一下您的代码中的一个函数（最终编译并制成生成该进程的可执行文件），其中包含一个局部变量 - 一个**`int i`**. 当代码执行时，**`i`**获取函数堆栈内的内存地址。该函数本身作为对象存储在其他地方。这些地址是编译器生成的（将您的代码编译成可执行文件的编译器） - 虚拟地址。执行时，**`i`**必须至少在该函数的持续时间内驻留在实际物理地址的某个位置（除非它是静态变量！），因此操作系统映射编译器生成的虚拟地址**`i`**转换为实际的物理地址，这样每当在该函数中，某些代码需要 的值时**`i`**，该进程就可以向操作系统查询该虚拟地址，而操作系统反过来可以查询物理地址以获取存储的值，并返回它。

**假设 RAM 的大小为 4GB（即 2^32-1 个地址空间），虚拟内存的大小是多少？**- RAM 的大小与虚拟内存的大小无关，它取决于操作系统。例如，在 32 位 Windows 上，它是`16 TB`，在 64 位 Windows 上，它是`256 TB`. 当然，它也受到磁盘大小的限制，因为这是备份内存的地方。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2013-01-15T21:30:23.107

除其他外，虚拟内存是一种抽象，它给程序员一种在他们的系统上拥有无限可用内存的错觉。

虚拟内存映射对应于实际物理地址。**操作系统**创建并处理这些映射——利用页表以及其他数据结构来维护映射。虚拟内存映射总是在页表或一些类似的数据结构中找到（在虚拟内存的其他实现的情况下，我们可能不应该将其称为“页表”）。页表也在物理内存中——通常在内核保留的空间中，用户程序无法覆盖。

虚拟内存通常比物理内存大 - 如果虚拟内存和物理内存大小相同，则没有太多理由进行虚拟内存映射。

通常，只有程序所需的部分驻留在内存中 - 这是一个称为“分页”的主题。虚拟内存和分页密切相关，但**不是**同一个主题。虚拟内存还有其他实现，例如分段。

我可能在这里假设错误，但我敢打赌，您发现难以理解的事情与虚拟内存的特定实现有关，很可能是分页。没有**一种方法**可以进行分页 - 有很多实现，你的教科书描述的可能与 Linux/Windows 等真实操作系统中出现的不同 - 可能存在细微差别。

我可以写一千个关于分页的段落......但我认为最好留给一个专门针对该主题的不同问题。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-02-12T17:54:53.697

我正在无耻地复制顶部手册页的摘录

> VIRT -- 虚拟映像 (kb) 任务使用的虚拟内存总量。它包括所有代码、数据和共享库以及已换出的页面和已映射但未使用的页面。
> 
> SWAP -- 交换大小 (kb) 不驻留但存在于任务中的内存。这是已换出的内存，但可能包含额外的非常驻内存。此列是通过**从虚拟内存中减去物理内存计算得出的**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-12-07T02:14:01.503

请参阅此处： [物理与虚拟内存](https://www.techwalla.com/articles/difference-virtual-memory-physical-memory_)

虚拟内存存储在硬盘驱动器上，并在 RAM 被填满时使用。物理内存受限于计算机中安装的 RAM 芯片的大小。虚拟内存受硬盘大小的限制，因此虚拟内存具有更大存储空间的能力。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-28T21:12:20.063

**物理内存**：物理内存是指计算机中的 RAM 或主内存。物理内存是易失性内存。因此，它需要持续的电力流动来保留数据。

**虚拟内存**是逻辑内存。换句话说，它是一种由操作系统执行的内存管理技术。虚拟内存允许程序员为程序使用比可用物理内存更多的内存。如果物理内存为 4GB，虚拟内存为 16GB，则程序员可以使用 16GB 的虚拟内存来执行程序。使用虚拟内存，他可以执行比物理内存需要更多内存的复杂程序。

物理内存和虚拟内存的主要区别在于，物理内存是指连接到主板的系统的实际 RAM，但虚拟内存是一种内存管理技术，允许用户执行比实际物理内存更大的程序。************

# java - Java EJB 嵌套 @Asynchronous 调用

> ID：14347207
> 
> 赞同：2
> 
> 时间：2013-01-15T21:24:45.710
> 
> 标签：java, asynchronous, ejb, deadlock

假设我们有两个异步调用的方法。methodA() 被调用了几千次，并且在某个地方 methodA() 调用了 methodB()。methodB() 的调用者在继续之前需要使用 Future/AsyncResult 的结果。

@异步方法A()

@异步方法B()

问题是它们使用相同的线程池，一旦所有的 methodA() 调用都排队，就没有更多的线程可用于 methodB()。因此，所有正在运行的 methodA() 调用都在等待 methodB() 并且我们遇到了死锁。

有没有办法解决？不应该有一种方法来指定在 @Asynchronous 方法中使用哪个线程池吗？我们正在使用 glassfish 3.1.2.2。

堆栈跟踪有很多这样的线程：

```
 java.lang.Thread.State: WAITING (parking)
at sun.misc.Unsafe.park(Native Method)
- parking to wait for  <0x00000007e1a4b010> (a java.util.concurrent.FutureTask$Sync)
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:969)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1281)
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:218)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at com.sun.ejb.containers.EjbFutureTask.get(EjbFutureTask.java:106) 
```

# wcf - OData 与 WCF 数据服务/实体框架

> ID：14347210
> 
> 赞同：0
> 
> 时间：2013-01-15T21:25:04.907
> 
> 标签：wcf, entity, odata, asp.net-web-api, user-defined

提前道歉，这是一个很长的问题。

*（TL；DR：是否有人对使用 EF 和使用 WCF 数据服务/OData 公开的动态字段有任何建议）*

我在使用 WCF 数据服务和 EF 时遇到了一些概念问题，特别是与将某些数据公开为 OData 服务有关。

基本上我的问题是这个。我公开的数据库允许用户动态添加字段（用户定义的字段），它使用一个系统，这些字段直接添加到基础 SQL 表中。此外，当您想向无法使用直接 SQL 的表添加数据时，您必须通过它们提供的 API。（它是 SAP Business One，fwiw）。

我已经成功构建了一个系统，该系统通过 XML 公开各种对象，并允许客户端通过发送 XML 消息来更新或添加新实体到 SBO，虽然它运行良好，但它并不真正适合移动应用程序，因为它非常重 XML 并且入口点是一个老式的 asmx 网络服务。我想尝试将其用于移动开发，并将 Odata 与 WCF 或 Web API 一起使用。*（我知道我可以更改为 WCF 服务，允许处理 JSON 格式的请求，并开始返回 JSON 数据，但似乎必须有一个更...本地的...方式）*

最初我不考虑为此使用 EF 的可能性，因为 a）动态字段和 b）EF 只能是只读的；必须拦截添加/更新实体并将其路由到 SBO DI 服务器。但是，我正在回过头来考虑它，并正在寻找一些关于如何处理的建议（否定的或其他的！）。

我基本上想做的是这个

*   将 SBO 的基表（除非它们自己发布补丁，否则不会更改）公开为 EF 实体，具有所有通常的关系优点。事实上，我实际上不会直接公开表，我将使用一组过滤的 SQL 视图作为数据源，因为这与我们所做的各种其他事情相关联，以便仅将某些数据公开给第三方。

*   将特定用户添加的任何 UDF 公开为每个实体的某种 EAV 子集合。

*   拦截任何添加或更新对象的请求，并通过我拥有的现有引擎路由这些请求，以便与 SAP 数据导入服务交互。

我想我的主要问题是这个；假设我实现了一个表示销售订单的 EF 实体，该实体包含一个 Header 和 Details 集合。对于这些类中的每一个，我坚持使用用户定义字段和值的 EAV 类型集合。允许 OData 过滤系统直接在 EAV 集合上工作涉及多少工作（*例如，客户端能够请求**Service/Orders/$filter=SomeUdfField eq SomeValue**，其中该请求必须向下传递到 EAV Order 标头实体的集合*）

或者，例如，是否有可能从某种元数据动态生成 EF 模型（我不介意如何 - 代码生成或模型构建库），这意味着我可以公开每个实体，包括动态字段，作为一个合适的 EF 模型？如果您读到这里，请提前非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:41:20.723

对于现有 EF 上下文的基本内容，WCF 数据服务效果很好。如上所述，只要您想添加一些自定义功能，就需要做更多的工作。

您所描述的内容是可能的，但您需要构建自己的[自定义数据提供程序](http://msdn.microsoft.com/en-us/library/ee960143.aspx)来处理元数据的动态生成以及添加/更新/删除的自定义挂钩。

可能值得研究[WCF Data Services Toolkit](http://wcfdstoolkit.codeplex.com/)，它是一个自定义提供程序，它在 WCF Data Services 上使用存储库模式以方便使用，但它不提供自定义元数据生成。

# php - 使用 php 创建 .xls 文件

> ID：14347211
> 
> 赞同：1
> 
> 时间：2013-01-15T21:25:17.597
> 
> 标签：php, excel, export, fwrite

这就是我所拥有的：

```
 $sep = "\t";        //tabbed character
    $fp = fopen('registrars.xls', "w");

$schema_insert_rows = "";
//printing column names 

        $schema_insert_rows.="#" . $sep;
        $schema_insert_rows.="Registrar" . $sep;
        $schema_insert_rows.="Country" . $sep;
        $schema_insert_rows.="Website" . $sep;
        //$schema_insert_rows.="Postal Address" . $sep;
        //$schema_insert_rows.="Contact Number" . $sep;
        $schema_insert_rows.="Email Address" . $sep;

        $schema_insert_rows.="\n";
        fwrite($fp, $schema_insert_rows);

// printing data:
    $row = 0; $i = 0; $schema_insert_rows = "";

        $schema_insert_rows .= (++$row) . "" . $sep;
        $schema_insert_rows .= $registrarArr[$i] . "" . $sep;
        $schema_insert_rows .= $registrarArr[$i+1] . "" . $sep;
        $schema_insert_rows .= $linkArr[$i] . "" . $sep;
        $schema_insert_rows .= (string)(strip_tags($address)) . "" . $sep;
        $schema_insert_rows .= (string)(strip_tags($phone)). "" . $sep;
        $schema_insert_rows .= "email test";

        $schema_insert_rows .= "\n";

fwrite($fp, $schema_insert_rows);

fclose($fp); 
```

另一列工作正常，但我注释掉的那些不起作用[用于邮政地址和电子邮件地址]。我删除了评论，数据将转到下一行，尽管它应该与其他.. 我通过 var_dump 检查是否有 <br> 但没有.. 这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:32:31.010

我在一个客户端项目上使用了[PHPExcel ，效果很好。](https://github.com/PHPOffice/PHPExcel)它可以生成 Microsoft Excel、Open Excel 和 PDF 文档。

您可能会发现 CSV 文件格式受到限制。

较新但尚不稳定的项目是[PhpSpreadsheet](https://github.com/PHPOffice/PhpSpreadsheet)。它还支持更多格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:28:31.917

看起来您要创建的是一个以制表符作为分隔符的 CSV 文件（逗号分隔值）。

您可以使用 PHP 的函数[fputscsv](http://php.net/manual/en/function.fputcsv.php)函数来完成相同的任务。

代码示例（来自 PHP 手册）：

```
$list = array (
    array('#', 'Registrar', 'Country', 'Website', 'Email Address'),
    array('123', '456', '789', 'aaa', 'bbb'),
    array('123', '456', '789', 'aaa', 'bbb'),
);

$fp = fopen('registrars.xls', 'w');

foreach ($list as $fields) {
    fputcsv($fp, $fields, "\t", '"');
}

fclose($fp); 
```

# jquery - jquery结合2个脚本

> ID：14347213
> 
> 赞同：1
> 
> 时间：2013-01-15T21:25:22.800
> 
> 标签：jquery, hover, mousemove

jquery的新手在这里...

我有 2 个附加到 1 个 div 的 jquery 脚本。

1- 基于 mousemove 在 div 内滚动（溢出）

```
 $("#navwrapper").mousemove(function(e){} 
```

2-根据悬停将整个东西滑入或滑出。

```
 $(function() { $('#navwrapper').hover( function () {} 
```

如果有人愿意向我描述它，我也不理解不同的调用方法......

独立地，（一个或另一个 js 注释掉）它们都可以工作。总之，获胜的代码中的任何一个都是第一位的。

有没有办法将这两个功能或调用结合起来？我已经阅读了有关绑定的信息，但不确定这是我需要在这里做的。

两者都在单个 $(document).ready(function() { } 以及一堆其他代码（已删除以进行测试）中。

这两个都是我在网上找到的东西的一部分，我已经破解了一些东西来为我想要的东西工作。我很感激任何帮助。

谢谢

小提琴链接：http: [//jsfiddle.net/briansol/Y6hcs/](http://jsfiddle.net/briansol/Y6hcs/)

由于它出现的定位元素（即框架内的负边距关闭），它在小提琴中的表现并不完美，因此您可能希望将其拉出到页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:30:15.597

您可以像这样轻松地将这些项目链接在一起：

```
$(function() {
    $('#navwrapper').hover( function () {
        // do something on hover
    }, function () {
        // do something on loss of hover
    }).mousemove(function (e) {
        // do something else
    });
}); 
```

触发处理程序的顺序取决于事件发生的实际顺序。

# jquery - 如何在视图中使用 JSON 数据？

> ID：14347216
> 
> 赞同：0
> 
> 时间：2013-01-15T21:25:27.400
> 
> 标签：jquery, razor, asp.net-mvc-4

我现在在 flexigrid 的编辑按钮中使用以下代码：

```
var url = '/Client/Details/' + id ;
$.getJSON(url, function (data) {
    //  setFormControls(data.Id, data.Role, data.Location, data.JobType, data.Description);
    alert(data);
});
//location.replace(url);
RunModalDialog("Edit Client: " + ClientName); 
```

我的表格有点像这样的复杂视图

```
@model CardNumbers.Models.ClientViewModel
 @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "sform", title = "Client Info" }))

 {    
  <fieldset>
    <legend>Client Info</legend>

    @Html.ValidationSummary(true)

    @Html.HiddenFor(m => m.ClientId)
    @Html.EditorFor(m => m.Number, EditorTemplate.TextBox)

    @Html.EditorFor(m => m.Name, EditorTemplate.TextBox)

    @Html.EditorFor(m => m.Client.Address, EditorTemplate.EditBox)

... 
```

其中 EditorFor 是自定义 EditorFor。因此，手动将返回的 json 数据转换为表单属性会有点困难。我想知道是否有一些简单的方法可以进行这种翻译？我查看了 knockout.js，但我还没有在我的项目中使用它，所以我想知道是否还有其他内容？

提前感谢您的帮助。

更新。为了让我的问题更清楚，我添加了更多信息。

我的主要观点是：

```
@model CardNumbers.Models.ClientViewModel

   @section scripts {
    <script src="@Url.Content("~/Scripts/Clients.js")" type="text/javascript" ></script>
    }

   <form id="frmClientsSearch">
    <label for="clientNo">Client No: </label>
    <input type="number" name="searchClientNo" class="numericOnly" /><br />
    <label for="clientName">Client Name: </label>
    <input type="search" size="25" value="Please enter the search value"      class="SelectOnEntry"
        name="searchClientName" />

       <input type="button" id="btnClientsSearch" value="Find / Refresh" />
    </form>
    <div style="padding-left: 150px; padding-top: 50px; padding-bottom: 50px;"    id="ClientsResults">
    <table id="flexClients" style="display: none">
       </table>
    </div>

    <div id="editor" style="visibility:hidden">
       @Html.Partial("_ClientForm", Model);
    </div> 
```

我的 js 文件有以下内容：

```
 var $dlg = $("#sform").dialog({
    autoOpen: false,
    show: "blind",
    closeOnEscape: true,
    resizable: true,
    width: 1200,
    height: 750,
    minHeight: 600,
    minWidth: 950
    });

    function RunModalDialog(title, url)
{    
    if (title)
        $dlg.dialog("option", {"title": title });

    if (url)
    {        
        $dlg.load(url).dialog("option", { "title": title }).dialog("open");
    }
        //$dlg.load(url, function () {
        //    var validator = $("#sform").validate();
        //    if (validator)
        //         validator.resetForm();
        //    $dlg.dialog("option", { "title": title }).dialog("open");
        //});
    else {
        var validator = $("#sform").validate();
        if (validator)
            validator.resetForm();
        $dlg.dialog("open");
       }
    }

    function add(com, grid) {
    $('#fntype').val('Add');
    var url = '/Client/Add/'
    //location.replace(url);
    RunModalDialog("Create New Client");

   // clearForm();

   }

     function edit(com, grid)
      {
        $('.trSelected', grid).each(function () {

                var id = $(this).attr('id');
                id = id.substring(id.lastIndexOf('row') + 3);
                currentId = id;
                $('#fntype').val('Edit');
                var ClientName;
                ClientName =$('.trSelected td:eq(2)').text();
                var url = '/Client/Edit/' + id ;

                $.getJSON(url, function (html) {
                    //  setFormControls(data.Id, data.Role, data.Location, data.JobType, data.Description);
                    // alert(data);
                    $('#editor').html(html);
                });
               //location.replace(url);
               RunModalDialog("Edit Client: " + ClientName);
        });

    } 
```

现在我看到添加和编辑的行为相同，例如编辑不显示数据。 [我现在看到的 http://www.universalthread.com/Thread%20photos/2013/01562893.jpg](http://www.universalthread.com/Thread%20photos/2013/01562893.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:51:13.350

如果您想让它变得更简单，只需将您显示的代码放在局部视图中，然后让 Details 控制器操作返回此局部视图。现在，当您使用 AJAX 调用此操作时，它将返回您可以直接在 DOM 中替换的部分更新内容。这样您就不必费心将 JSON 值绑定到表单元素。

```
public ActionResult Details(int id)
{
    ClientViewModel model = ...
    return PartialView(model);
} 
```

进而：

```
var url = '/Client/Details/' + id ;
$.getJSON(url, function (html) {
    $('#someContainerDiv').html(html);
}); 
```

`#someContainerDiv`我的示例中使用的显然将在您的主视图中定义：

```
<div id="someContainerDiv">
    @Html.Partial("Details", Model)
</div> 
```

然后，部分将包含您在问题中显示的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:59:15.353

在 Jazzen Chen 的帮助下，我们解决了这个问题。我需要更改的只是在上面使用 get 而不是 getJSON。现在我的表单正确显示了数据。

# php - 如何在一个查询中更新两个表？

> ID：14347217
> 
> 赞同：0
> 
> 时间：2013-01-15T21:25:31.340
> 
> 标签：php, mysql, sql, database, joomla1.5

有什么方法可以在一个查询中更新两个表？下面是我的代码示例。如何将这两个更新查询合二为一？先感谢您！

```
 <?php
// DATABASE UPDATE
   if (isset($_POST['submit']) or isset($_GET['submit'])){

// 1st QUERY
   $db =& JFactory::getDBO();
   $query_1 = "UPDATE table_1
                  SET name     = '".$_POST["name"]."',
                      surename = '".$_POST["surename"]."'
               WHERE id=1";
   $db->setQuery($query_1);
   $db->query();

// 2nd QUERY
   $db =& JFactory::getDBO();
   $query_2 = "UPDATE table_2
                  SET team_id   = '".$_POST["team_id"]."',
                  SET team_name = '".$_POST["team_name"]."'
                  ";
   $db->setQuery($query_2);
   $db->query(); } ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:36:28.113

MySQL 确实允许在单个查询中更新多个表（尽管您的应用程序一次执行一个通常是有意义的）。

```
UPDATE table_1, table_2
SET table_1.field = <some value>, table_2.field = <some value>
WHERE table_1.field2 = table_2.field_2 
AND table_1.field_3 = <some other value> 
```

见：[http ://dev.mysql.com/doc/refman/5.1/en/update.html](http://dev.mysql.com/doc/refman/5.1/en/update.html)

正如其他人所说，您应该考虑使用准备好的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:36:52.550

使用事务，只有 InnoDB 引擎支持。

mysql>开始事务；查询正常，0 行受影响（0.00 秒）

{首先插入这里}

{第二次插入这里}

mysql>提交；查询正常，0 行受影响（0.00 秒）

请注意，您必须编写提交，因为如果您不这样做，它不会将其刷新到数据库中。

# jquery - 如何使用 instagram.js 获取照片以显示最新到最旧的照片？

> ID：14347219
> 
> 赞同：0
> 
> 时间：2013-01-15T21:25:37.270
> 
> 标签：jquery, instagram

我在我的网站上使用[instagram.js 。](https://github.com/potomak/jquery-instagram)图像当前被拉入队列底部显示最新照片的位置。我想颠倒顺序，让最新的图像显示在顶部，旧的图像显示在底部。

这是我正在使用的脚本：

```
(function ($){
  $.fn.instagram = function (options) {
    var that = this,
        apiEndpoint = "https://api.instagram.com/v1",
        settings = {
            hash: null
          , userId: null
          , locationId: null
          , search: null
          , accessToken: null
          , clientId: null
          , show: null
          , onLoad: null
          , onComplete: null
          , maxId: null
          , minId: null
          , next_url: null
          , image_size: null
          , photoLink: true
        };

    options && $.extend(settings, options);

    function createPhotoElement(photo) {
      var image_url = photo.images.thumbnail.url;

      if (settings.image_size == 'low_resolution') {
        image_url = photo.images.low_resolution.url;
      }
      else if (settings.image_size == 'thumbnail') {
        image_url = photo.images.thumbnail.url;
      }
      else if (settings.image_size == 'standard_resolution') {
        image_url = photo.images.standard_resolution.url;
      }

      var innerHtml = $('<img>')
        .addClass('instagram-image')
        .attr('src', image_url);

      if (settings.photoLink) {
        innerHtml = $('<a>')
          .attr('target', '_blank')
          .attr('href', photo.link)
          .append(innerHtml);
      }

      return $('<div>')
        .addClass('instagram-placeholder')
        .attr('id', photo.id)
        .append(innerHtml);
    }

    function createEmptyElement() {
      return $('<div>')
        .addClass('instagram-placeholder')
        .attr('id', 'empty')
        .append($('<p>').html('No photos for this query'));
    }

    function composeRequestURL() {

      var url = apiEndpoint,
          params = {};

      if (settings.next_url != null) {
        return settings.next_url;
      }

      if (settings.hash != null) {
        url += "/tags/" + settings.hash + "/media/recent";
      }
      else if (settings.search != null) {
        url += "/media/search";
        params.lat = settings.search.lat;
        params.lng = settings.search.lng;
        settings.search.max_timestamp != null && (params.max_timestamp = settings.search.max_timestamp);
        settings.search.min_timestamp != null && (params.min_timestamp = settings.search.min_timestamp);
        settings.search.distance != null && (params.distance = settings.search.distance);
      }
      else if (settings.userId != null) {
        url += "/users/" + settings.userId + "/media/recent";
      }
      else if (settings.locationId != null) {
        url += "/locations/" + settings.locationId + "/media/recent";
      }
      else {
        url += "/media/popular";
      }

      settings.accessToken != null && (params.access_token = settings.accessToken);
      settings.clientId != null && (params.client_id = settings.clientId);
      settings.minId != null && (params.min_id = settings.minId);
      settings.maxId != null && (params.max_id = settings.maxId);
      settings.show != null && (params.count = settings.show);

      url += "?" + $.param(params)

      return url;
    }

    settings.onLoad != null && typeof settings.onLoad == 'function' && settings.onLoad();

    $.ajax({
      type: "GET",
      dataType: "jsonp",
      cache: false,
      url: composeRequestURL(),
      success: function (res) {
        var length = typeof res.data != 'undefined' ? res.data.length : 0;
        var limit = settings.show != null && settings.show < length ? settings.show : length;

        if (limit > 0) {
          for (var i = 0; i < limit; i++) {
            that.append(createPhotoElement(res.data[i]));
          }
        }
        else {
          that.append(createEmptyElement());
        }

        settings.onComplete != null && typeof settings.onComplete == 'function' && settings.onComplete(res.data, res);
      }
    });

    return this;
  };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:50:19.050

应该能够像这样使用你的“长度”变量：

```
 if (limit > 0) {
          for (var i = length; i > length-limit; i--) {
            that.append(createPhotoElement(res.data[i]));
          }
        } 
```

或者，您可以将所有图像放在一个数组中并使用 reverse()。

# bash - 将带有 ImageMagick 指令的 Bash 脚本拆分成更小的部分？

> ID：14347220
> 
> 赞同：2
> 
> 时间：2013-01-15T21:25:39.710
> 
> 标签：bash, imagemagick, xargs

我有这个 bash 脚本，将绘图信息输入 ImageMagick，它的开头是这样的：

```
#!/bin/bash 
convert -size 2200x2200 xc:white \
-fill '#FFFEFF' -draw 'point 1112,1111' \
-fill '#FFFEFE' -draw 'point 1112,1112' \
-fill '#FFFEFE' -draw 'point 1111,1112' \
-fill '#FFFEFE' -draw 'point 1110,1112' \
-fill '#FFFEFE' -draw 'point 1110,1111' \
******ON & ON 4.2 MILLION LINES MORE*******
spectrumspiral.png; 
```

我的问题是我不断收到关于参数列表的警告太长，终端说“Killed”，警告“fork：无法分配内存等”。

我尝试调整`ulimit -s`到更高的值无济于事。真想做这个形象。知道如何一次提供该脚本的终端块吗？或为此目的的东西。

我听说 xargs 可以用于这样的事情，但我一直无法找到适合这个问题性质的具体实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-15T17:32:15.907

如果您创建一个包含 4 个像素（1 个红色、1 个白色、1 个蓝色和 1 个黑色）的图像，您可以告诉 ImageMagick 将生成的图像输出为文本文件，如下所示：

```
convert -size 1x1 xc:red xc:white xc:blue xc:black +append -depth 8 -colorspace RGB image.txt

# ImageMagick pixel enumeration: 4,1,255,rgb
0,0: (255,0,0)  #FF0000  rgb(255,0,0)
1,0: (255,255,255)  #FFFFFF  rgb(255,255,255)
2,0: (0,0,255)  #0000FF  rgb(0,0,255)
3,0: (0,0,0)  #000000  rgb(0,0,0) 
```

出于同样的原因，如果您将该文本文件输入 ImageMagick，它可以重新创建图像：

```
cat image.txt | convert txt:- output.img 
```

因此，我们需要做的就是将您的`-fill`命令转换为 ImageMagick 喜欢的格式的文本文件。所以我们可以这样做`yourFile`

```
sed -E 's/.*(#[0-9A-F]+).* ([0-9]+)\,([0-9]+).*/\2,\3:\1/g' yourFile 
```

我们会得到这样的东西：

```
0,0:#3C4AD8
0,1:#269531
0,2:#CF2C7C
...
... 
```

然后我们可以通过管道`awk`重新排列 ImageMagick 的喜好：

```
awk -F: '
 BEGIN{print "# ImageMagick pixel enumeration: 2200,2200,255,rgb"}
 {
    coords=$1;colour=$2
    rh="0x" substr(colour,2,2);
    gh="0x" substr(colour,4,2);
    bh="0x" substr(colour,6,2);
    r=strtonum(rh);
    g=strtonum(gh);
    b=strtonum(bh);
    printf "%s: (%d,%d,%d) %s\n",coords,r,g,b,colour;
 }' 
```

因此，如果我们将所有这些放在一起，以下脚本应该能够将您心爱的图像创建到文件中`spectrumspiral.png`：

```
#!/bin/bash
sed -E 's/.*(#[0-9A-F]+).* ([0-9]+)\,([0-9]+).*/\2,\3:\1/g' yourFile | awk -F: '
 BEGIN{print "# ImageMagick pixel enumeration: 2200,2200,255,rgb"}
 {
    coords=$1;colour=$2
    rh="0x" substr(colour,2,2);
    gh="0x" substr(colour,4,2);
    bh="0x" substr(colour,6,2);
    r=strtonum(rh);
    g=strtonum(gh);
    b=strtonum(bh);
    printf "%s: (%d,%d,%d) %s\n",coords,r,g,b,colour;
 }' | convert txt:- spectrumspiral.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:13:59.213

尝试使用 shell 的 here-document

```
#!/bin/bash 

convert - <<EOS spectrumspiral.png
-size 2200x2200 xc:white  
-fill '#FFFEFF' -draw point '1112,1111'
-fill '#FFFEFE' -draw 'point 1112,1112'
-fill '#FFFEFE' -draw 'point 1111,1112'
-fill '#FFFEFE' -draw 'point 1110,1112'
-fill '#FFFEFE' -draw 'point 1110,1111'
# ******ON & ON 4.2 MILLION LINES MORE*****
EOS 
```

我的系统没有，`convert`所以我可以测试它是否有效。

大多数 linux 程序（包括`convert`）可以接受来自 StdIn 的输入，在上面的 cmd-line 中由`-`char 表示。告诉命令期待输入，而`-`不是来自文件，而是好像它是在键盘上键入的，即 StdIn。这`<<EOS .... EOS`是here-doc，它表示将所有文本中的bash“键入”到命令stdIn输入中。

你可能需要也可能不需要所有的引用，如果你已经有了，我认为它不会受到伤害。如果这不起作用，请使用一个小的输入示例文件（如上）并测试各种场景，直到它为您创建一个文件。

IHTH

# asp.net - 我可以用图像替换 asp:GridView 值吗？

> ID：14347226
> 
> 赞同：0
> 
> 时间：2013-01-15T21:25:54.700
> 
> 标签：asp.net, gridview, boundfield

我有一个包含许多 BoundField 的 asp:GridView。其中一个名为“status”的字段显示的值为 1、2 或 3（显然是从数据库中的列中获得的）。

有没有办法可以用图像代替这些数字？

IE

```
1 = <img src="img1.png" />
2 = <img src="img2.png" />
3 = <img src="img3.png" /> 
```

![将值更改为图像](../Images/666b5d18fd1b2650178d588cd8c1aa12.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:30:37.030

是的，使用模板字段，您可以执行以下操作：

```
<asp:TemplateField HeaderText="Image" >
  <ItemTemplate >            
  <asp:Image ID="Image1" runat="server" ImageUrl='<%# "~/images/img" &  Eval("Status") & ".png" %>'
  </ItemTemplate>
</asp:TemplateField> 
```

# linq - 我如何从一个表中选择项目，但从另一个表中禁止某些项目？

> ID：14347228
> 
> 赞同：1
> 
> 时间：2013-01-15T21:25:58.330
> 
> 标签：linq, entity-framework

我有两张表，一张包含其他实体日志。

我的实体：

```
id, lat, lon 
```

一个实体在世界上有一个位置。

我的实体日志：

```
id, otherid, otherlat, otherlon 
```

具有id的实体在otherid的经纬度上与otherid进行了交互。

例如，我有以下实体：

```
1, 4.456, 2.234
2, 3.344, 6.453
3, 6.234, 9.324 
```

（不是很准确，但可以达到目的）。

现在，如果实体 1 与 2 交互，则日志表上的结果将如下所示：

```
1, 2, 3.344, 6.453 
```

所以我的问题是，我怎样才能列出实体 1 的可用交互而不包括日志表中的交互？

列出实体 1 的可用交互的结果应该只是实体 3，因为它已经与 2 进行了交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:13:39.333

首先列出与`id`交互的 s `entity 1`：

```
var id1 = 1;
var excluded = from l in db.EntityLogs
               where l.id == id1
               select l.otherid; 
```

然后找到`id`在此列表中没有或等于的条目`id1`：

```
var logs= from l in db.EntityLogs
               where !excluded.Contains(l.id) && l.id != id1
               select l; 
```

请注意，linq 将推迟执行`excluded`并将其合并到`logs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:55:01.727

不确定我是否理解您的问题，我想我需要更多详细信息，但是如果您想列出日志表中没有条目的实体，一种解决方案将是这样的，假设 myEntities 是 MyEntity 的集合，而 myEntityLogs 是MyEntityLog 的集合

```
var firstList = myEntities.Join(myEntityLogs, a => a.Id, b => b.Id, (a, b) => a).Distinct();
var secondList = myEntities.Join(myEntityLogs, a => a.Id, b => b.OtherId, (a, b) => a).Distinct();

var result = myEntities.Except(firstList.Concat(secondList)).ToList(); 
```

# java - 如何链接 2 个类以共享文本字段及其属性

> ID：14347230
> 
> 赞同：2
> 
> 时间：2013-01-15T21:26:05.833
> 
> 标签：java, swing

我正在尝试在 Java Netbeans IDE 中为我的桌面应用程序运行数据代码的修改，但问题是在某人有权修改数据之前，我想通过在另一个中提供用户名和密码来确保该人已获得授权JFrame 形式。如果验证了用户名和密码，那么只有修改任务才会成功；否则用户将收到身份验证不成功的错误。我试图在我的主表单中编写代码，但是当我想在身份验证表单的 button_click 事件中编写代码时，可以吗？我试过了，但它说你需要在这个类中声明那个类的变量，请帮忙..??

这是登录表单，我想验证用户是否在验证用户后修改数据我想允许他运行修改部分....

```
 private void loginActionPerformed(java.awt.event.ActionEvent evt) {
   if(evt.getSource()==login){
       if((tb_uid.getText().equals(""))||(tb_pwd.getText().equals(""))){
           JOptionPane.showMessageDialog(rootPane, "Please Enter Valid UserName and Password!");

       }else{
            DBUtil util = new DBUtil();
            String user1 = "";
            String pass1 = "";
            try {

                Connection con = util.getConnection();
                PreparedStatement stmt = con.prepareStatement("SELECT * FROM login where username=?");
                ResultSet res;
                String value1 = tb_uid.getText();
                String value2 = tb_pwd.getText();
                stmt.setString(1, "" + (value1));
                res = stmt.executeQuery();
                while (res.next()) {
                    user1 = res.getString("username");
                    pass1 = res.getString("password");
                }
                if (value1.equals(user1) && value2.equals(pass1)) {
                    JOptionPane.showMessageDialog(null, "AUTHENTICATION SUCCESSFUL!");

                     try {
                Connection con = util.getConnection();
                PreparedStatement stmtn = con.prepareStatement("update soil_det set[weight]=?,[note_state]=?,[dm_state]=?,[1]=?,[2]=?,[5]=?,[10]=?,[20]=?,[50]=?,[100]=?,[500]=?,[1000]=? FROM [CNV].[dbo].[soil_det] where rm_id=? and box_no =?");

                String rmn = (tf_rm_id.getText() == null || tf_rm_id.getText().equals("")) ? "0" : tf_rm_id.getText();
                String an = (txtRe1.getText().trim() == null || txtRe1.getText().equals("")) ? "0" : txtRe1.getText();
                String bn = (txtRs2.getText().trim() == null || txtRs2.getText().equals("")) ? "0" : txtRs2.getText();
                String cn = (txtRs5.getText().trim() == null || txtRs5.getText().equals("")) ? "0" : txtRs5.getText();
                String dn = (txtRs10.getText().trim() == null || txtRs10.getText().equals("")) ? "0" : txtRs10.getText();
                String en = (txtRs20.getText().trim() == null || txtRs20.getText().equals("")) ? "0" : txtRs20.getText();
                String fn = (txtRs50.getText().trim() == null || txtRs50.getText().equals("")) ? "0" : txtRs50.getText();
                String gn = (txtRs100.getText().trim() == null || txtRs100.getText().equals("")) ? "0" : txtRs100.getText();
                String hn = (txtRs500.getText().trim() == null || txtRs500.getText().equals("")) ? "0" : txtRs500.getText();
                String in = (txtRs1000.getText().trim() == null || txtRs1000.getText().equals("")) ? "0" : txtRs1000.getText();
                String bnn = (txtboxno.getText().trim() == null || txtboxno.getText().equals("")) ? "0" : txtboxno.getText();
                String bwn = (txtboxwgt.getText().trim() == null || txtboxwgt.getText().equals("")) ? "0" : txtboxwgt.getText();
                Object nsn = (cbnotstat.getSelectedItem() == null || cbnotstat.getSelectedItem().equals("")) ? "0" : cbnotstat.getSelectedItem();
                Object dsn = (cbdmnstat.getSelectedItem() == null || cbdmnstat.getSelectedItem().equals("")) ? "0" : cbdmnstat.getSelectedItem();

                stmtn.setString(1, "" + (bwn));
                stmtn.setString(2, "" + nsn);
                stmtn.setString(3, "" + dsn);
                stmtn.setInt(4, Integer.parseInt(an));
                stmtn.setInt(5, Integer.parseInt(bn));
                stmtn.setInt(6, Integer.parseInt(cn));
                stmtn.setInt(7, Integer.parseInt(dn));
                stmtn.setInt(8, Integer.parseInt(en));
                stmtn.setInt(9, Integer.parseInt(fn));
                stmtn.setInt(10, Integer.parseInt(gn));
                stmtn.setInt(11, Integer.parseInt(hn));
                stmtn.setInt(12, Integer.parseInt(in));
                stmtn.setString(13, "" + (rmn));
                stmtn.setInt(14, Integer.parseInt(bnn));
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, ex.getMessage());
            }

                        } 
                else {
                    JOptionPane.showMessageDialog(this, "AUTHERNTICATION UNSUCCESSFUL", "Error", JOptionPane.ERROR_MESSAGE);
                }

    } catch (Exception ex) {
        JOptionPane.showMessageDialog(null, ex.getMessage());

    }
    this.dispose();
    }
   }
} 
```

但主要问题是来自另一种形式的修改部分..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T05:02:26.580

这是一个 SSCCE，您可以对其进行测试，看看这是否是您想要做的。我首先创建您的登录 JFrame，要求用户输入他们的凭据。然后将该信息传递给另一个类，我将 Login 类的整个实例传递给新类（OtherClass）。我在 Login 中有访问器方法，这些方法将在 OtherClass 中用于检索已存储在字符串中的 JTextField 信息。如果您不传递整个 Login 类，即使您使用 getText() 将 JTextField 内容存储在字符串中，也无法使用访问器方法访问该信息。

```
import javax.swing.JTextField;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JLabel;
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.SwingUtilities;

public class Login extends JFrame
{
    private static final int FRAME_WIDTH = 250;
    private static final int FRAME_HEIGHT = 100;

    private JPanel labelPanel;
    private JPanel textPanel;

    private JTextField userName;
    private JTextField userPassword;

    private JButton loginButton;

    private String userNameString;
    private String userPasswordString;

    public Login()
    {
        super("Please Login");
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        labelPanel = new JPanel();
        labelPanel.setLayout(new GridLayout(2, 1));
        add(labelPanel, BorderLayout.WEST);
        JLabel userLabel = new JLabel("User Name: ");
        labelPanel.add(userLabel);
        JLabel passwordLabel = new JLabel("Password: ");
        labelPanel.add(passwordLabel);

        textPanel = new JPanel();
        textPanel.setLayout(new GridLayout(2, 1));
        add(textPanel, BorderLayout.CENTER);
        userName = new JTextField(30);
        userPassword = new JTextField(30);
        textPanel.add(userName);
        textPanel.add(userPassword);

        loginButton = new JButton("Login");
        FrameListener loginListener = new FrameListener();
        loginButton.addActionListener(loginListener);
        add(loginButton, BorderLayout.SOUTH);        
    }

    private class FrameListener implements ActionListener
    {
        @Override
        public void actionPerformed(ActionEvent e)
        {
            String actionCommand = e.getActionCommand();

            if(actionCommand.equals("Login"))
            {
                if(!(userName.getText().equals("")) && !(userPassword.getText().equals("")))
                {
                    userNameString = userName.getText();
                    userPasswordString = userPassword.getText();

                    //Access your database of credentials here

                    SwingUtilities.invokeLater(new Runnable() 
                    {
                        @Override
                        public void run() 
                        {
                            OtherClass mainProgram = new OtherClass(Login.this);
                            mainProgram.setVisible(true);
                        }
                    });
                    dispose();
                }
            }
        }
    }

    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable() 
        {
            @Override
            public void run() 
            {
                Login loginFrame = new Login();
                loginFrame.setVisible(true);
            }
        });
    }

    public String getUserName()
    { 
        return userNameString;
    }

    public String getUserPassword()
    {
        return userPasswordString;
    }
} 
```

获取此信息的类需要：

```
import javax.swing.JFrame;

public class OtherClass extends JFrame
{
    final Login loginClass;

    private String userName;
    private String userPassword;

    public OtherClass(Login e)
    {
        loginClass = e;
        userName = loginClass.getUserName();
        userPassword = loginClass.getUserPassword();

        System.out.println("Your User Name is: " + userName);
        System.out.println("Your Password is: " + userPassword);
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:53:58.973

如果您只有几个 JTextField 可以传递（如在您的登录情况下），您也可以将每个值作为字符串传递给新的 JFrame 类的构造函数。这使得您不必使用访问器方法。如果你有很多字段要传递，它也会使构造函数的参数变得非常混乱。

```
import javax.swing.JTextField;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JLabel;
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.SwingUtilities;

public class Login extends JFrame
{
    private static final int FRAME_WIDTH = 250;
    private static final int FRAME_HEIGHT = 100;

    private JPanel labelPanel;
    private JPanel textPanel;

    private JTextField userName;
    private JTextField userPassword;

    private JButton loginButton;

    private String userNameString;
    private String userPasswordString;

    public Login()
    {
        super("Please Login");
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        labelPanel = new JPanel();
        labelPanel.setLayout(new GridLayout(2, 1));
        add(labelPanel, BorderLayout.WEST);
        JLabel userLabel = new JLabel("User Name: ");
        labelPanel.add(userLabel);
        JLabel passwordLabel = new JLabel("Password: ");
        labelPanel.add(passwordLabel);

        textPanel = new JPanel();
        textPanel.setLayout(new GridLayout(2, 1));
        add(textPanel, BorderLayout.CENTER);
        userName = new JTextField(30);
        userPassword = new JTextField(30);
        textPanel.add(userName);
        textPanel.add(userPassword);

        loginButton = new JButton("Login");
        FrameListener loginListener = new FrameListener();
        loginButton.addActionListener(loginListener);
        add(loginButton, BorderLayout.SOUTH);        
    }

    private class FrameListener implements ActionListener
    {
        @Override
        public void actionPerformed(ActionEvent e)
        {
            String actionCommand = e.getActionCommand();

            if(actionCommand.equals("Login"))
            {
                if(!(userName.getText().equals("")) && !(userPassword.getText().equals("")))
                {
                    userNameString = userName.getText();
                    userPasswordString = userPassword.getText();

                    //Access your database of credentials here

                    SwingUtilities.invokeLater(new Runnable() 
                    {
                        @Override
                        public void run() 
                        {
                            OtherClass mainProgram = new OtherClass(userNameString, userPasswordString); //Here we pass the String values instead of the whole class
                            mainProgram.setVisible(true);
                        }
                    });
                    dispose();
                }
            }
        }
    }

    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable() 
        {
            @Override
            public void run() 
            {
                Login loginFrame = new Login();
                loginFrame.setVisible(true);
            }
        });
    }
    //Note we no longer need accessor methods
} 
```

而现在在构造函数中具有 String 参数的 OtherClass ：

```
import javax.swing.JFrame;

public class OtherClass extends JFrame
{
    private String userName;
    private String userPassword;

    public OtherClass(String n, String p)
    {
        userName = n;
        userPassword = p;

        System.out.println("Your User Name is: " + userName);
        System.out.println("Your Password is: " + userPassword);
    }   
} 
```

请记住，最好传递通过 if-else 控制结构的字符串值，而不是传递使用 userName.getText(); 获得的字符串值；检查仍将完成，但我认为传递检查的字符串是一个更好的主意。

# php - 将 XML 转换为 CSV Xpath 没有得到任何东西

> ID：14347233
> 
> 赞同：0
> 
> 时间：2013-01-15T21:26:33.900
> 
> 标签：php, xml, xpath

我做错了什么让 xpath 没有收到任何东西？此函数在另一个深度稍差的 xml 文件上运行良好。

```
function xml2csv($xmlFile, $xPath) {
    $xml = simplexml_load_file($xmlFile);
    $path = $xml->xpath($xPath);
    $csvData = '';
    foreach($path as $item) {
        foreach($item as $key => $value) {
            $csvData .= '"' . trim($value) . '"' . ',';
        }
        $csvData = trim($csvData, ',');
        $csvData .= "\n";

    }
    return $csvData;
} 
```

**正在使用的 XML**

```
<?xml version='1.0'?>
<bl>
    <section>
        <grade gradeLevel="1">
            <level dirname="The folder of pdfs">
                <file filename="hello_world.pdf">Hello world</file>
                <file filename="the_avengers.pdf">The Avengers</file>
                <file filename="batman.pdf">Batman</file>
            </level>
        </grade>
    </section>
</bl> 
```

当调用`xml2csv('test.xml', 'bl');`什么都不返回时，与它之后的任何东西一样`bl/section/grade/*`等等，也尝试了单一目标。我希望至少输出文件名..

**似乎工作得很好的 XML**我可以使用上面相同的方法来定位下面的 xml`xml2csv('cars.xml', 'car');`

```
<?xml version='1.0'?>
<cars>
    <car>
        <color>blue</color>
        <price>2000</price>
    </car>
    <car>
        <color>red</color>
        <price>10000</price>
    </car> 
    <car>
        <color>black</color>
        <price>5000</price>
    </car>
</cars> 
```

**汽车 XML 输出**

```
"blue","2000"
"red","10000"
"black","5000" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:36:16.173

必须修改原始 xml2csv 函数才能关联。有针对性地使用`section/grade`.

**更新功能**仍在进行中

```
function xml2csv($xmlFile, $xPath) {
    $xml = simplexml_load_file($xmlFile);
    $path = $xml->xpath($xPath);
    $csvData = '';
    foreach($path as $item) {
        $attributes = $item->attributes();
        $gradeLevel = $attributes['gradeLevel'];
        foreach ($item->level as $level) {
            foreach ($level->file as $file) {
                $csvData .= '"' . trim($gradeLevel) . '"' . ',';
                $csvData .= '"' . trim($level->attributes()->dirname) . '"' . ',';
                $csvData .= '"' . trim($file->attributes()->filename) . '"' . ',';
                $csvData .= '"' . trim($file) . '"' . ',';
                $csvData .= "\n";

            }

        }
        $csvData = trim($csvData, ',');
        $csvData .= "\n";
    }
    return $csvData;
} 
```

# java - 使用 Spring 3 生成在 Postgres 中使用游标的 sql

> ID：14347236
> 
> 赞同：0
> 
> 时间：2013-01-15T21:26:44.663
> 
> 标签：java, spring, hibernate, postgresql

我有从 spring 2.5.x 升级到 spring 3.x 的 java webapp。

除了数据库负载增加并且查询花费更长的时间之外，升级后的所有内容都可以正常工作。堆栈是 Hibernate 3.6.10、Postgres 9.1 和 Spring 2.5.4 / 3.0。升级前/升级后唯一不同的是 spring jars 和 deps。

我发现在较旧（较快）的 spring 2 设置下生成的查询使用游标返回结果，而较新（较慢）的 spring 3 设置生成的查询不会。

**例如：**

## 快速地

```
LOG:  statement: DECLARE JDBC_CURS_660 CURSOR FOR select distinct virtualfle0_.VIRTUAL_FLEET_ID as VIRTUAL1_58_, virtualfle0_.CSO_ID as CSO2_58_, virtualfle0_.VIRTUAL_FLEET_NAME as VIRTUAL3_58_, virtualfle0_.SCHEDULE_ID as SCHEDULE4_58_ from EG_VIRTUAL_FLEET virtualfle0_ where (virtualfle0_.CSO_ID=2 ) limit 40; FETCH FORWARD 100 FROM JDBC_CURS_660 
```

## 慢的

```
LOG:  execute S_158/C_159: select distinct virtualfle0_.VIRTUAL_FLEET_ID as VIRTUAL1_58_, virtualfle0_.CSO_ID as CSO2_58_, virtualfle0_.VIRTUAL_FLEET_NAME as VIRTUAL3_58_, virtualfle0_.SCHEDULE_ID as SCHEDULE4_58_ from EG_VIRTUAL_FLEET virtualfle0_ where (virtualfle0_.CSO_ID=$1 ) limit $2
DETAIL:  parameters: $1 = '2', $2 = '40' 
```

生成这些查询的代码来自休眠条件，并且作为 Spring 升级的一部分，该代码没有更改。

在我的休眠配置中是这样的：

```
<property name="hibernate.jdbc.fetch_size">100</property>
<property name="hibernate.jdbc.batch_size">100</property> 
```

所以我的问题是，如何让 spring 3 生成使用游标的正确 sql？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:43:06.747

嗯，好的。事实证明，作为升级的一部分，我删除了一个 jar，其中包含一些 postgres 驱动程序（以及其他特定于项目的垃圾）。

它可能包含对标准驱动程序的自定义扩展，用于将这些选择中的每一个包装在游标中，尽管很难说没有源:( 在任何情况下，将该 jar 放回类路径会使其返回所需的行为。

# xml - 指向 XML 文件的相对位置而不将其嵌入 SWF

> ID：14347237
> 
> 赞同：1
> 
> 时间：2013-01-15T21:26:53.233
> 
> 标签：xml, apache-flex

我的 Flex 应用程序对其大部分文本内容使用 XML 配置文件。文本会随着时间而改变，所以我希望能够在不重建应用程序的情况下对其进行编辑。

最初，我使用了语法

```
<fx:Model id="xmlFile" source="projects.xml"/> 
```

但这会将 xml 文件嵌入到 SWF 文件中。这种语法

```
<fx:Model id="xmlFile" source="http://mywebpage.com/projects.xml"/> 
```

会起作用，但是当 URL 更改时（例如，从开发服务器移动到生产服务器），我将不得不更改 URL 并重新构建应用程序。

相对于应用程序的 SWF 文件 (http://mywebpage.com/myapp.swf)，此文件将始终位于同一位置。有没有办法在源属性中使用相对位置而不使用特定的 URL，给我一个未嵌入 SWF 的 XML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:49:51.043

您将不得不在运行时使用[HTTPService](http://livedocs.adobe.com/flex/3/html/help.html?content=data_access_2.html)或[URLLoader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)加载它——对于 Web 应用程序——或者对于 AIR 或移动应用程序的[File](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)类。

如果您愿意假设您的 XML 文件总是从与 SWF 相同的服务器加载，您可以使用相对链接而不是绝对链接来加载它。

对于我为客户端构建的应用程序，我们使用外部 XML 文件来保存包含我们服务的服务器的详细信息。当然，该配置文件位于为 SWF 提供服务的同一台服务器上的特定位置。

# jquery - 如何将此 jquery 菜单移动到我想要的位置？

> ID：14347238
> 
> 赞同：0
> 
> 时间：2013-01-15T21:27:01.760
> 
> 标签：jquery, html, css, menu

我试图将这个菜单定位到顶部并居中我尝试调整了很多 CSS，但仍然没有

这是我的 jsbin

[http://jsbin.com/welcome/74921/](http://jsbin.com/welcome/74921/)

```
body{
            background:#333 url(bg.jpg) repeat top left;
            font-family:Arial;
        }
        span.reference{
            position:fixed;
            left:10px;
            bottom:10px;
            font-size:12px;
        }
        span.reference a{
            color:#aaa;
            text-transform:uppercase;
            text-decoration:none;
            text-shadow:1px 1px 1px #000;
            margin-right:30px;
        }
        span.reference a:hover{
            color:#ddd;
        }
        ul.sdt_menu{
            margin-top:50px;
        }
        h1.title{
            text-indent:-9000px;
            background:transparent url(title.png) no-repeat top left;
            width:633px;
            height:69px;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:30:34.453

```
ul.sdt_menu {
    margin-top: 150px; <--- get rid of this
    margin-left:auto; <-- add this
    margin-right:auto;  <-- add this
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:37:23.087

```
ul.sdt_menu {
  margin: YOURTOPVALUEHERE auto 0 auto;
  display: table;
  width: auto; /* or remove your width value (better) */
} 
```

# python - 如何为我的博客中的帖子实施“投票”系统？

> ID：14347244
> 
> 赞同：4
> 
> 时间：2013-01-15T21:27:18.537
> 
> 标签：python, mysql, google-app-engine, jinja2

我在谷歌应用引擎中使用 Python 编写了一个简单的博客。我想为我的每个帖子实施一个投票系统。我的帖子存储在 SQL 数据库中，并且我有一列表示没有收到的选票。有人可以帮我为个别帖子设置投票按钮吗？我使用 Jinja2 作为模板引擎。

如何确保投票安全？当有人单击投票按钮时，我正在考虑发送 POST/GET，然后我的 python 脚本将读取并相应地更新数据库。但后来我意识到这是不安全的。欢迎所有建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T23:53:15.047

首先，请记住，没有“安全”之类的东西，只有“对 X 来说足够安全”。总有一个权衡——更安全意味着对您的合法用户来说更烦人，对您来说更昂贵。

超越这些一般性，想想你的具体情况。没有什么与用户有一对一的关系。IP地址或计算机通常由多个人共享，同时人们通常拥有多个地址或计算机。有时，这样的事情“足够好”，但从你的问题来看，这听起来不像。

但是，对于用户帐户，唯一的误报来自人们故意创建多个帐户或入侵他人的帐户，并且没有误报。在烦恼/成本与安全性的权衡中，有一条非常线性的曲线，从“请不要创建袜子木偶”到验证码，再到信用卡检查，再到信任/声誉评分网络，再到询问现实生活中的信息。并聘请调查员进行检查。

在现实生活中，通常需要在这两个方面*进行权衡。*例如，如果你愿意接受更多的作弊，因为这直接意味着你有更多的钱，你可以向人们收取真钱投票（就像许多电视节目使用的 1-900 行一样）。

* * *

> Reddit 和 Digg 如何检查单个注册用户的多次投票？

我不知道 Reddit 或 Digg 是如何做事的，但总体思路很简单：跟踪个人投票。

通常，您将用户存储在某种 SQL RDBMS 中。因此，您只需添加一个`Votes`包含用户 ID、问题 ID 和答案列的表。（如果您使用某种 NoSQL 解决方案，它应该很容易进行适当的翻译。例如，可能每个问题都有一个文档，该文档是一个字典，将用户 ID 映射到答案。）当用户投票时，只需`INSERT`一行进入数据库。

在组合投票接口时，无论是通过服务器端模板还是客户端 AJAX，都调用一个检查现有投票的函数。如果有一个，而不是显示投票控件，显示“你已经投了赞成票”的一些表示。您还想在投票记录时再次检查，以确保没有人通过打开 200 个页面副本来入侵系统，所有这些副本都允许投票（因为用户尚未投票），然后提交 200是的投票，但是使用 SQL 数据库，这就像制作`Question, User`多列唯一键一样简单。

如果您想允许更改或撤消投票，只需在界面中添加更多控件，并使用`UPDATE`和`DELETE`调用来处理它们。如果你想变得非常花哨——比如这个网站，如果你有足够的代表，如果你的原始投票是在过去 5 分钟内进行的，或者在你投票后答案已经被编辑（或类似的东西），你可以撤消必须保留一些额外的信息，例如为每个投票操作记录一行，并带有时间戳，而不仅仅是每个用户的单个答案。

这种设计还意味着，您无需在某处进行计数，而是通过例如`SELECT COUNT(*) FROM Votes WHERE Question=? GROUP BY Answer`. 但是，像往常一样，如果这太慢了，您总是可以通过非规范化进行优化，并将总数与实际投票保持一致。同样，如果您的用户群很大，您可能希望对旧问题的投票存档并将它们从操作数据库中取出。等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:31:57.107

如果投票仅针对订阅用户，则在会员登录您的站点后启用投票。如果没有，那么您可以跟踪用户的 IP 地址，以便一个 IP 地址可以在一天内为一篇文章投票一次。

顺便问一下，你需要什么样的安全措施？

# ios - 触摸我的固定装置失败

> ID：14347245
> 
> 赞同：0
> 
> 时间：2013-01-15T21:27:18.983
> 
> 标签：ios, cocos2d-iphone, box2d

我试图在我的 Cocos2d/Box2d 应用程序中点击一个坠落的物体。

这是我的 touchesBegan 代码：

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];
    b2Vec2 locationWorld = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);

    for(b2Body *b = world->GetBodyList(); b; b=b->GetNext()) {
        b2Vec2 bPos = b->GetPosition();
        for (b2Fixture *f = b->GetFixtureList(); f; f=f->GetNext()) {

            if (f->TestPoint(locationWorld)) {
                NSLog(@"hit it!");
            }

        }
    } 
```

我的世界中有两个物体，地面和坠落物体。我的重力真的很慢，所以触摸它应该不是问题。奇怪的是，我的位置似乎偏离了很多！

在上次运行 locationWorld （我点击的地方）是：

```
Printing description of locationWorld:
(b2Vec2) locationWorld = {
  x = 7.90625
  y = 9.875
} 
```

我经历了两次外循环，每个身体一次，得到：

```
Printing description of bPos:
(b2Vec2) bPos = {
  x = 3.03125
  y = 19.6643
}
Printing description of bPos:
(b2Vec2) bPos = {
  x = 8.59375
  y = 17.4969
} 
```

奇怪的是，在 (8.59, 17.49) 报告的第二个物体应该是坠落的物体，但 Y 坐标偏离了。

这是我的第一个 cocos2d/box2d 应用程序，所以我确定我遗漏了一些明显的东西。我已经在谷歌上搜索了一段时间，这似乎应该可以工作。

谢谢你的帮助。

**请参阅下面的答案，我的代码是正确的，我设置的设备不正确。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:50:08.880

好的，这现在有点工作，但我相信我会有另一个问题。

当我在上面运行它时，我创建了一个相当小的动态框，因此这些物品会堆积在地面上，彼此重叠。

> 动态框.SetAsBox(.25f, .25f)

这就是原因。当我打开这个更大的东西时，说：

> dynamicBox.SetAsBox((spriteSize.width/PTM_RATIO)/4, (spriteSize.height/PTM_RATIO)/4);

然后可以使用上面的代码触摸身体。（所以我的问题需要重新表述，因为我确实希望对象堆积起来，相互重叠。

我也不知道为什么我需要将大小除以 4 以使项目彼此靠近，这让我很困扰。

# c - 带有函数指针的 C 通用 ADT

> ID：14347247
> 
> 赞同：1
> 
> 时间：2013-01-15T21:27:26.923
> 
> 标签：c, list, generics, adt, void-pointers

我正在编写一个通用列表 adt，这就是我目前在标题中的内容。据我所知，这通常是如何完成的。

```
typedef struct _node {
    void *data;
    struct _node *next;
} Node;

typedef struct {
    Node *dummy;
    int (*comparePtr) (void *d1, void *d2);
    void (*destroyPtr) (void *data);
} List;

List *ListCreate (int (*comparePtr) (void *d1, void *d2), void (*destroyPtr) (void *data));
void ListDestroy (List *node);
void ListAddToTail (List *list, void *data);
int ListContains (List *list, void *data);
void *ListGetFromIndex (List *list, int index); 
```

它在实施方面工作正常。我注意到的是，为了使用这个 adt 来存储整数，我必须以这种方式进行调用

```
int a = 5;
ListAddToTail (list, &a); 
```

而在一个完美的世界里，我可以做到这一点

```
ListAddToTail (list, 55); 
```

所以问题是是否可以修改它以允许我传入任何类型的数据，指针或非指针，非指针主要是原始类型，如整数和字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:32:45.733

没有干净，完全好的方法来解决这个问题。你有几个选择：

*   在大多数平台上，您可以简单地将整数填充到`void *`. 它很乱，但效果很好，尤其是当您使警告静音时

*   定义您自己的分配所需空间并返回指针的装箱函数/宏。您可能可以使用`typeof`技巧制作一个非常好的宏。但是你必须记住释放那个空间

主要问题应该是统一性。您的列表允许人们存储指针。您应该让他们处理诸如“我如何获得指向我的数据的指针”之类的问题。

* * *

### 编辑

我刚刚做了一个原始的“盒子”宏：

```
#define box(value)                              \
({                                              \
    typeof(value) *ptr = malloc(sizeof *ptr);   \
    *ptr = value;                               \
    ptr;                                        \
}) 
```

# javascript - 如何将隐藏变量添加到输入字段

> ID：14347258
> 
> 赞同：0
> 
> 时间：2013-01-15T21:28:05.707
> 
> 标签：javascript

我有一个工作脚本，但如果用户愿意，我需要允许他们更改隐藏变量。

```
 <strong>Select</strong><br>
          <select class="inputClass" size="1" id="f1a" name="Board">
            <option value="Selected">Use</option>
            <option value="Selected">--------------------------</option>
            <option value="6">Floor Joist</option>
            <option value="4">Wall</option>
            <option value="8">Header</option>
            <option value="4">Rafter</option>
          </select> 
```

所以我添加了一个输入字段。

```
<br>

           <strong>Board Use</strong> <br>

          <input class="inputClass" type="text"  id="f1" value="" size="12" name="Board Use"> 
```

在过去的两周里，我一直在尝试不同的代码来将 f1a.value 放入 f1 输入字段。然后用户可以选择留下我的值或者放入自己的值。

有什么建议么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:32:22.117

您只需要在选择上执行一个简单的 onchange 事件：

```
var f1a = document.getElementById("f1a");
var f1 = document.getElementById("f1");
f1a.onchange = function() {
  f1.value = f1a.value;
}; 
```

这将在用户在选择中选择新值时调用 onchange 函数。输入可以随时被覆盖。

[http://jsfiddle.net/G3PGY/](http://jsfiddle.net/G3PGY/)

[https://developer.mozilla.org/en-US/docs/DOM/element.onchange](https://developer.mozilla.org/en-US/docs/DOM/element.onchange)

# php - 使用 PHP 从 HTML 页面返回结果

> ID：14347260
> 
> 赞同：-1
> 
> 时间：2013-01-15T21:28:12.877
> 
> 标签：php, html

如果我有以下 HTML 代码：

```
<ul>
  <li>
    <a href="/link1/">link 1</a>
  </li>
  <li>
    <a href="/link2/">link 2</a>
  </li>
...
</ul> 
```

如何使用 PHP 返回一个包含所有 href 内容的数组？

前任：

```
$array[0]="/link1/";
$array[1]="/link2/"; 
```

等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:33:15.623

您可以使用[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)with [`DOMXpath`](http://php.net/manual/en/class.domxpath.php)（加上[此参考](http://msdn.microsoft.com/en-us/library/ms256471.aspx)或[此图表](http://msdn.microsoft.com/en-us/library/ms256086.aspx)）从 HTML 中提取几乎任何内容：

```
$dom = new DOMDocument;
$dom->loadHTML('<ul>
  <li><a href="/link1/">link 1</a></li>
  <li><a href="/link2/">link 2</a></li>
</ul>');
$xpath = new DOMXpath($dom);
$links = array();
foreach($xpath->query("//ul//a[@href]") as $a) {
    $links[] = $a->getAttribute("href");
}
var_dump($links);

// array(2) {
//   [0]=>
//   string(7) "/link1/"
//   [1]=>
//   string(7) "/link2/"
// } 
```

更改`loadHTML($string)`为`loadHTMLFile($path_or_url)`从文件加载内容。

# javascript - jQueryMobile 路由不适用于 AngularJS

> ID：14347270
> 
> 赞同：0
> 
> 时间：2013-01-15T21:28:58.583
> 
> 标签：javascript, android, jquery-mobile, angularjs

我正在使用 jQueryMobile 编写一个移动 Web 应用程序，并放入 AngularJS 来处理数据绑定。但这会在移动设备上引入路由问题。以下是我可以编写的重现问题的最少代码。在桌面上的 Chrome 上一切正常，但是当我从我的 android 设备尝试相同的页面时，我得到了令人讨厌的“错误加载页面”。可以通过使用 data-url 进行导航来解决问题，但有问题。我还需要用电话间隙把它打包起来。这意味着 html 由 file:// 加载，直接导航（data-url）不起作用（我试过）

```
<!DOCTYPE html>
<html ng-app>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>

        <script src="https://raw.github.com/tigbro/jquery-mobile-angular-adapter/master/compiled/jquery-mobile-angular-adapter-1.2.0.js"></script>        
    </head>

    <body>
        <div data-role="page" id="main">
            <a data-role="button" href="#sub">sub</a>
        </div>

        <div data-role="page" id="sub">
            <p>sub page</p>
        </div>
    </body>

</html> 
```

单击“sub”按钮后，用户应该被定向到 hostname/#sub 并且它在 Chrome 上，但是在 android 上发生了奇怪的事情并且浏览器被路由到 hostname/#!/%23sub 我猜这是 URL 编码的？

另外我应该指出，通过仅删除 angular 和 JQM-angular 适配器的两个脚本引用，一切正常（当然没有数据绑定）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:28:17.197

我尝试删除 angular-jquery 适配器，一切都像魔术一样工作。角度和jquery冲突也没有问题。

# c# - 通过 XPath 搜索带符号的文本

> ID：14347274
> 
> 赞同：0
> 
> 时间：2013-01-15T21:29:16.580
> 
> 标签：c#, xpath, selenium

一段时间以来，我一直在运行构建之外的自动化测试，并且围绕电子邮件验证的一系列测试一直失败。我发现的问题是由于引发的 javascript 错误导致 Selenium 无法在 XPath 中的文本中搜索“@”。

我遇到了这个[SO Question](https://stackoverflow.com/questions/247135/using-xpath-to-search-text-containing)，它很好地向我证实了无法通过 Selenium 中的 XPath 作为标准在文本中搜索字符。

**我的问题是，有没有人找到解决这个问题的方法？**

例如，我希望能够找到具有以下文本字段的元素：

```
<h1>"personA@email.com.au.personB@email.com.au - The separator '@' is either in an invalid position or is missing from the address."</h1> 
```

而我当前引发javascript错误的XPath（显然不适用于符号的存在）是（其中errorText只是上面的字符串）：

```
"//*[contains(text(), '" + errorText + "')]" 
```

只是为了好玩，如果 javascript 错误有帮助：

```
[14/01/2013 -  14:35:00.1820111]    :    InvalidSelectorError: Unable to locate an element with the xpath expression //*[contains(text(), 'personA@email.com.au.personB@email.com.au - The separator '@' is either in an invalid position or is missing from the address.')] because of the following error:
Error: Bad token: @ 
```

[编辑]

我已经研究了建议我需要用双引号将输入文本括起来的[SO Question ，但是这样做仍然会导致上述 javascript 错误抛出。](https://stackoverflow.com/questions/1341847/special-character-in-xpath-query)我仍然认为@符号是这里的问题，并且看不到通过包含它的文本进行搜索的明显方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:59:14.880

您的问题绝对与@无关，而是与“如何在 XPAth 中转义单引号/双引号”有关。

您的 XPath 看起来像`...contains(text(),'foo'@'bar')...`. 可以很容易地看到要搜索的字符串是无效的，因为它由 2 部分组成，中间加上 @，这在 XPath 中没有意义。

修复：在使用字符串连接构建 XPath 时，正确转义所有字符以避免相当于“SQL 注入” - [XPATH 查询中的特殊字符中](https://stackoverflow.com/questions/1341847/special-character-in-xpath-query)涵盖。在您的情况下，外部双引号就足够了（因为示例字符串不包含单引号和双引号。否则 - 查看链接问题中的示例并使用`concat`函数构建完整的搜索字符串：

```
"...contains(text(), \"'foo'@'bar'\")... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:43:27.103

@ 符号不是这里的问题。这是一条红鲱鱼。问题是您的`errorText`值包含单引号，因此在连接后生成的 XPath 是（为清楚起见缩写）：

```
//*[contains(text(), 'personA@Email ... separator '@' is ... address.') 
```

正如你所看到的，`'`前面`@`是结束字符串文字，而后面的下一个字符是`@`，这就是为什么错误抱怨`@`它不应该出现在哪里。如果`errorMessage`改为包含`'hello'`，则错误消息可能会抱怨`h`.

一个可能的解决方法是用其他字符替换 text() 和源值中的所有单引号，或者在比较期间将它们删除。用双引号替换它们可能是一个明智的选择：

```
"//*[contains(translate(text(), \"'\", '\"'), '" + errorText.replace("'", '"') + "')]" 
```

或者在比较期间删除单引号：

```
"//*[contains(translate(text(), \"'\", ''), '" + errorText.replace("'", '') + "')]" 
```

你能试试吗？

# ios - 如何在我的 NSFIleHandle 处理中捕获 EPIPE？

> ID：14347276
> 
> 赞同：1
> 
> 时间：2013-01-15T21:29:20.730
> 
> 标签：ios, nsfilehandle

我在我的 iOS 应用程序中遇到了 EPIPE 问题，并且它没有被 @try/@catch/@finally 块捕获。我怎样才能捕捉到这个信号（SIGPIPE，可能）......

我在我的应用程序中构建了一个“网络代理”，它将处理某些类型的 URL - 在这种错误情况下，似乎远程端（也在我的应用程序中，但隐藏在 iOS 库中）关闭了它的套接字端. 我没有收到通知（我应该吗？有什么我应该在 NSFileHandle 注册的东西可能对这里有帮助吗？）。

我已经将此代理基于 Matt Gallagher 放在一起的 HTTPServer（可[在此处](http://www.cocoawithlove.com/2009/07/simple-extensible-http-server-in-cocoa.html)获得），问题出在`HTTPRequestHandler`他放在一起的类的子类中。这是代码（此代码等效`startResponse`于基类中的方法）：

```
-(void)proxyTS:(SSProxyTSResource *)proxyTS didReceiveResource:(NSData *)resource
{
    NSLog(@"[%@ %@]", NSStringFromClass([self class]), NSStringFromSelector(_cmd));

CFHTTPMessageRef response =
    CFHTTPMessageCreateResponse(kCFAllocatorDefault, 200, NULL, kCFHTTPVersion1_1);
    CFHTTPMessageSetHeaderFieldValue(response, 
                                    (CFStringRef)@"Content-Type", 
                                    (__bridge CFStringRef)s_MIMEtype);
    CFHTTPMessageSetHeaderFieldValue(response,
                                    (CFStringRef)@"Connection",
                                    (CFStringRef)@"close");
    CFHTTPMessageSetBody(response,
                        (__bridge CFDataRef)resource);

    CFDataRef headerData = CFHTTPMessageCopySerializedMessage(response);
    @try
    {
        NSLog(@" -> writing %u bytes to filehandle...",[((__bridge NSData *)headerData) length]);
        [self.fileHandle writeData:(__bridge NSData *)headerData];
    }
    @catch (NSException *exception)
    {
        // Ignore the exception, it normally just means the client
        // closed the connection from the other end.
    }
    @finally
    {
        NSLog(@" *ding*");
        CFRelease(headerData);
        CFRelease(response);
        [self.server closeHandler:self];
    }
} 
```

这是崩溃时控制台日志中显示的内容：

```
Jan 15 14:55:10 AWT-NoTouch-iPhone-1 Streamer[1788] <Warning>: [SSProxyTSResponseHandler proxyTS:didReceiveResource:]
Jan 15 14:55:10 iPhone-1 Streamer[1788] <Warning>:  -> writing 261760 bytes to filehandle...
Jan 15 14:55:11 iPhone-1 com.apple.launchd[1] (UIKitApplication:com.XXX.Streamer[0xf58][1788]) <Warning>: (UIKitApplication:com.XXX.Streamer[0xf58]) Exited abnormally: Broken pipe: 13 
```

似乎因为另一端关闭了管道`write()`失败了，所以如果有人能指出我如何发现它已经关闭而不尝试向它写入数据，或者任何使它不会崩溃的程序，那将是非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:53:24.983

SIGPIPE 崩溃的直接问题得到了解决。我对这个解决方案并不完全傻笑，但至少应用程序不会崩溃。目前尚不清楚它是否 100% 正确工作，但它的表现似乎要好一些。

我通过进一步检查正在发生的事情解决了这个问题。在做一些研究时，我发现也许我应该使用 NSFileHandle 的`writeabilityHandler`属性来安装一个块来进行写作。我并没有完全接受这种方法（这让我感到很困惑），但它可能会有所帮助。

### 可写处理程序解决方案：

在进行一些网络搜索时`writeabilityHandler`，我偶然发现了[Bert Leung 的博客文章](http://bertleung.blogspot.com/2012/06/using-nsfilehandlewriteabilityhandler.html)，其中提到了他在类似领域遇到的一些问题。我拿了他的代码并修改如下，`@try/@catch/@finally`用这段代码替换上面的代码块：

```
self.pendingData = [NSMutableData dataWithData:(__bridge NSData *)(headerData)];

CFRelease(headerData);
CFRelease(response);

self.fileHandle.writeabilityHandler = ^(NSFileHandle* thisFileHandle)
    {
        int amountSent = send([thisFileHandle fileDescriptor],
                              [self.pendingData bytes],
                              [self.pendingData length],
                              MSG_DONTWAIT);
        if (amountSent < 0) {
            // errno is provided by system
            NSLog(@"[%@ %@] Error while sending response: %d", NSStringFromClass([self class]), NSStringFromSelector(_cmd), errno);
            // Setting the length to 0 will cause this handler to complete processing.
            self.pendingData.length = 0;
        } else {
            [self.pendingData replaceBytesInRange:NSMakeRange(0, amountSent)
                                   withBytes:NULL
                                      length:0];
        }

        if ([self.pendingData length] == 0) {
            thisFileHandle.writeabilityHandler = nil;
            // Hack to avoid ARC cycle with self. I don't like this, but...
            [[NSNotificationCenter defaultCenter] postNotification:self.myNotification];
        }
    }; 
```

这工作得很好*，但*它并没有解决问题。我仍然得到 SIGPIPE/EPIPE。

### SIGPIPE 不见了！

确切地说，这并不奇怪，因为这与前者`writeData:`所做的几乎相同，但它使用了它`send()`。关键区别在于 using`send()`允许`errno`设置。实际上，这很有帮助 - 我收到了几个错误代码（在 errno 中），例如 54（对等连接重置）和 32（断管）。54 的很好，但 32 的结果是 SIGPIPE/EPIPE。然后我恍然大悟——也许我应该忽略 SIGPIPE。

考虑到这个想法，我在我`UIApplicationDelegate`的 in 中添加了几个钩子`application:didFinishLaunchingWithOptions:`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    [self installSignalHandlers];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {

    ... 
```

和`applicationWillTerminate:`：

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    // Saves changes in the application's managed object context before the application terminates.

    [self removeSignalHandlers];

    [self saveContext];
}

-(void)installSignalHandlers
{
    signal(SIGPIPE,SIG_IGN);
}

-(void)removeSignalHandlers
{
    signal(SIGPIPE, SIG_DFL);
} 
```

现在至少应用程序不会崩溃。目前尚不清楚它是否 100% 正确工作，但它似乎确实表现良好。

我也切换回`@try/@catch/@finally`结构，因为它更直接。此外，在忽略 SIGPIPE 之后，该`@catch`块确实会被触发。现在，我正在记录异常，但只有这样我才能看到它正在工作。在发布的代码中，该日志将被禁用。

# iphone - 在 iPad 中查看时，使用 Storyboard 和 iOS6 将标签添加到静态表视图会产生超出范围的标签

> ID：14347277
> 
> 赞同：0
> 
> 时间：2013-01-15T21:29:21.967
> 
> 标签：iphone, ipad, ios6, tableview, uistoryboard

我在静态视图中为单元格添加了一个标签，它看起来像这样： ![添加标签](../Images/8dc4e67c10b0085817f6fa21f1aad18b.png)

在 iPhone 模拟器下运行时，运行正常： ![苹果手机](../Images/1c1e2d1917f9df121fcf9136503d7fd4.png)

但是在 iPad Simulator 下运行时，标签会超出范围： ![iPad](../Images/01ec9a88e2f2e685e237dd8be897ac4b.png)

我做错了什么？似乎 iPad 下的 Grouped 选项会产生更大的边距，但在放置标签时并未将其考虑在内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:03:35.477

这听起来像是界面构建器中的错误，其中单元格中的约束是针对单元格而不是其内容视图创建的。

[此处](https://stackoverflow.com/questions/12600214/contentview-not-indenting-in-ios-6-uitableviewcell-prototype-cell/13022753#13022753)详细讨论了这个问题。

如果您不需要 Autolayout，您可以将其关闭，或者您可以只使用标准单元 - 这有一个完全可用的标签，无需创建您自己的标签。

# c# - 我的 Dropbox 上的嵌入式 Raven DataDirectory 无法 100% 工作？

> ID：14347280
> 
> 赞同：1
> 
> 时间：2013-01-15T21:29:34.477
> 
> 标签：c#, ravendb

我的 Dropbox 文件夹中有我的项目文件，所以我也可以在办公室玩弄我的文件。

我的项目包含一个`EmbeddableDocumentStore`with`UseEmbeddedHttpServer`设置为`true`.

```
const int ravenPort = 8181;
NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(ravenPort);
var ds = new EmbeddableDocumentStore { 
    DataDirectory = "Data", 
    UseEmbeddedHttpServer = true, 
    Configuration = { Port = ravenPort } 
}; 
```

现在，当我在办公室电脑上开始我的项目时，我看到了这条消息：`Could not open transactional storage: D:\Dropbox\...\Data`

由于它处于我开发阶段的早期，我删除了我的 Dropbox 上的数据文件夹，项目完美地开始了。现在我回到家我遇到了同样的问题！我当然不想每次都删除这个文件夹。

我不能将我的开发数据存储在我的 Dropbox 上吗？我应该绕过一些东西来让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:27:05.013

将数据目录设置为本地计算机上的物理磁盘卷。您将无法使用任何类型的映射驱动器、网络共享、UNC 路径、保管箱或 skydrive 作为数据目录。仅仅因为你有一个驱动器号并不意味着你有一个物理磁盘。

唯一有意义的非物理存储类型是通过 iSCSI 或 FibreChannel 从 SAN 连接的 LUN，或者在虚拟化或云环境中连接的 VHD。它们都将作为物理磁盘呈现给操作系统。

几乎任何数据访问环境都是如此。如果您不相信我，请尝试使用 SQL Server。在 RavenDB 的案例中，它使用 ESENT 作为其数据存储，这需要直接访问文件系统。

**更新**

澄清一下，即使您存储在物理磁盘上，也不能依赖任何类型的同步技术，例如 DropBox 或 SkyDrive。为什么？因为他们将对文件进行共享读取锁定以监视更改。像 ESENT（RavenDB 所基于）这样的技术需要对文件进行*排他锁*。

SQL Server 和 Windows 虚拟机等其他技术也在其数据存储上采用排他锁。为什么？因为它们以随机访问的方式不断地读写数据位到文件中。您真的希望 DropBox 尝试对每一位数据更改执行同步操作吗？这将是非常低效和有问题的。

使用共享锁的应用程序没有这个问题。例如，当您处理 MS Word 文档时，这一切都是在内存中完成的。当您保存文件时，DropBox 可以读取整个文件并将其同步到云端。它可以通过仅发送已更改的位来进行优化，但它仍然需要能够读取文件才能这样做。

因此，如果 DropBox 对 ESENT 文件具有共享读锁，那么当 RavenDB 尝试以独占方式打开它时，它会出现错误并引发您所看到的异常。

# ruby-on-rails - 设计返回 URL

> ID：14347281
> 
> 赞同：0
> 
> 时间：2013-01-15T21:29:35.403
> 
> 标签：ruby-on-rails, ruby, devise

在我的应用程序控制器中，我有

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :save_location
  def save_location
    session[:user_return_to] = request.url unless request.url =~ %r{/}
  end
end 
```

...保存位置，因此当用户登录时，它会返回到该 URL。当用户退出时是否可以做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:20:25.347

您可以在 ApplicationController 上定义 Devise 的内置**after_sign_out_path_for**方法，如他们的 wiki 中所述：[https ://github.com/plataformatec/devise/wiki/How-To:-Change-the-redirect-path-after-destroying-会话即退出](https://github.com/plataformatec/devise/wiki/How-To:-Change-the-redirect-path-after-destroying-a-session-i.e.-signing-out)

# javafx-2 - 创建固体分隔符

> ID：14347282
> 
> 赞同：6
> 
> 时间：2013-01-15T21:29:37.457
> 
> 标签：javafx-2, scenebuilder

我环顾四周，找不到解决方案。

我在`SceneBuilder`. 这很简单。现在我希望这个分隔符成为一条`solid`线。

这是我遇到的问题。我努力了 ：

```
-fx-border-style: solid;
-fx-border-width: 1px; 
```

但这似乎不起作用或任何组合。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T00:15:44.010

我认为您错过了以下 CSS 中的行部分

```
.separator *.line { 
-fx-border-style: solid;
-fx-border-width: 1px;

} 
```

边框宽度 5px

![在此处输入图像描述](../Images/f7f55a46f61e829f12820b6e37181da3.png)

**提示**：使用**CSS Analayzer**了解节点特定部分的 css 类/选择器，您可以在**scenebuilder 1.1** `view -> Show css Analyzer`中找到 css 分析器或`ctrl+6`在 windows 中找到快捷方式。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-04T05:08:41.830

它解决了您的问题，这也是我的问题：

```
.separator *.line {
    -fx-border-style: solid;
    -fx-border-width: 0 0 1 0; /* its make really one-pixel-border */
    -fx-border-color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-05T20:04:41.097

其他答案都不适合我。我终于给了它一个负填充，因为我注意到分隔线形成了一个矩形，它就像一个魅力。

```
.separator *.line{
    -fx-border-style: solid;
    -fx-padding: 0 -50 0 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-08T12:19:18.187

我不想改变我*所有*的分隔符，只是那个，所以我需要它作为一个自定义类（`"blackSeparator"`在这里选择）。此外，我发现我不需要`*`通配符，并且像素宽度需要`0.5px`得到 1 像素宽度。

解决方案：

```
 .blackSeparator.separator .line {
        -fx-border-width: 0.5px;
        -fx-border-color: black;
    } 
```

# css - 将鼠标悬停在子菜单上时，顶部菜单 li 处于活动状态

> ID：14347284
> 
> 赞同：-1
> 
> 时间：2013-01-15T21:29:39.217
> 
> 标签：css

我遇到了这个网站[http://northerly.com.au/](http://northerly.com.au/)，我想知道如何在将鼠标悬停在其子菜单上时激活顶部菜单。在这种情况下，似乎没有 js 脚本来添加活动类。那它是怎么做的呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:39:00.157

实际上，当您将鼠标悬停在子菜单上时，这不是处于活动状态的顶部菜单 li。在子菜单元素之前有一个兄弟 SPAN，由于悬停到子菜单，您也悬停了容器 li 元素。

top li 有两个元素： SPAN 有顶部菜单标题和子菜单

使用这样的 CSS 选择器：

```
li:hover span {/*span is active!*/ } 
```

[在这里查看一个简单的演示。](http://jsfiddle.net/trkaplan/utSb2/1/)

# c++ - 无头 QT4 OpenGL 应用程序

> ID：14347286
> 
> 赞同：2
> 
> 时间：2013-01-15T21:29:45.537
> 
> 标签：c++, qt, opengl

我正在努力在 QT4 中创建一个无头控制台应用程序，该应用程序执行一些 OpenGL 渲染，然后通过 websocket 将结果通过网络发送出去。我运行了所有的渲染和网络代码（假设我有一个 GUI），但是我在转换到无头应用程序时遇到了一些麻烦。是否可以在没有窗口的情况下创建 QGLContext？

在网上阅读的次数不多，但从我收集到的内容中，您可以创建一个 QGLPixelBuffer，它是一个有效的 QPaintDevice。它似乎创建了自己的私有 QGLContext 用于硬件加速绘图。我在这条路线上遇到的问题是我需要访问它的底层 QGLContext 以便我可以与另一个线程共享它（用于将 DMA 纹理快速传输出渲染场景的网络线程）。下面包括一个小型原型。有任何想法吗？

应用程序.h

```
/**
@file
@author     Nikolaus Karpinsky
*/

#ifndef _APPLICATION_H_
#define _APPLICATION_H_

#include <QCoreApplication>
#include <QTimer>

#include "MainController.h"

#endif  // _APPLICATION_H_ 
```

应用程序.cpp

```
#include "Application.h"

int main(int argc, char **argv)
{
//  Setup our console application with an event loop
QCoreApplication app(argc, argv);

//  Create and initialize our controller
MainController controller;
controller.Init();
QObject::connect(&controller, SIGNAL( Finished() ), &app, SLOT( quit() ), Qt::QueuedConnection);

//  This will put start on top of the event loop
QTimer::singleShot(0, &controller, SLOT( Start() ));

// Finally start up the event loop
return app.exec(); 
} 
```

主控制器.h

```
/**
 @file
 @author        Nikolaus Karpinsky
 */

#ifndef _MAIN_CONTROLLER_H_
#define _MAIN_CONTROLLER_H_

#include <QObject>
#include <QGLWidget>
#include <QGLPixelBuffer>
#include <QGLFramebufferObject>
#include <memory>

using namespace std;

class MainController : public QObject
{
  Q_OBJECT

private:
  unqiue_ptr<QGLPixelBuffer> m_mainBuffer;
  //unique_ptr<QGLContext> m_mainContext;

public:
  MainController();
  void Init(void);

public slots:
  void Start(void);
  void Close(void);

signals:
  void Finished(void);
};

#endif  // _MAIN_CONTROLLER_H_ 
```

主控制器.cpp

```
#include "MainController.h"

MainController::MainController() : QObject()
{ }

void MainController::Init(void)
{
  m_mainBuffer = unique_ptr<QGLPixelBuffer>(new QGLPixelBuffer(800, 600));
  bool has      = buffer->hasOpenGLPbuffers();
  bool current  = buffer->makeCurrent();
  bool valid    = buffer->isValid();

  //  Now I need to get access to the context to share it with additional threads
  // m_mainContext = unique_ptr<QGLContext>(new QGLContext(buffer.getContext()));
}

void MainController::Start(void)
{
}

void MainController::Close(void)
{
  //  This will tell the event loop that we are done and close the app
  emit( Finished() );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:36:40.770

> 是否可以在没有窗口的情况下创建 QGLContext？

是的，但有一个问题……</p>

> 在网上阅读的次数不多，但从我收集到的内容中，您可以创建一个 QGLPixelBuffer，它是一个有效的 QPaintDevice。

是的，但是 PBuffer 仍然需要与 GPU 通信。在 Linux 中，与 GPU 通信的常用方式是通过 X 服务器。所以你实际上需要一个 X 服务器，使用 GPU 驱动程序，启动**和**活动 VT，以便 PBuffer 可以在 GPU 上工作。

希望很快会有一个新的 GPU 的 ABI/API，它允许您在 GPU 上创建屏幕外渲染上下文，而无需 X 服务器。

> 我在这条路线上遇到的问题是我需要访问它的底层 QGLContext 以便我可以与另一个线程共享它（用于将 DMA 纹理快速传输出渲染场景的网络线程）。

不幸的是，Qt 开发人员对 OpenGL 的了解似乎很有限。一些使用 OpenGL 完全可能的事情并且明确指定的事情在 Qt 中是不可能的，没有明显的原因。例如，您可以使用单个可绘制对象拥有任意数量的上下文。但是您也可以通过重新绑定在任意数量的（兼容的）drawable 上使用单个上下文。Qt 和明显的设计缺陷都不支持。我自己现在也在为此苦苦挣扎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T21:03:58.080

好的，所以在玩了一些之后，我找到了一个足够好的解决方案。目前我正在将我的应用程序作为 QApplication 与 QCoreApplication 运行。从这里我在 GUI 线程上创建一个 QGLWidget，然后立即在创建和初始化 OpenGL 上下文的小部件上调用 updateGL()。假设我从来没有让应用程序可见，它运行“无头”但仍然从 X 或资源管理器获得 QT 所需的窗口句柄。

再深入一点，我还需要在其他线程上共享 QGLContexts。要从 QGLWidget 复制上下文，我只需使用已弃用的构造函数创建一个 QGLWidget，您可以在其中指定画家 (QGLWidget)，然后使用 QGLWidgets 上下文创建。我在下面发布了一个示例来显示。使用它，我可以在一个线程中编写纹理并在另一个线程中处理，同时保持应用程序“无头”。感谢 datenwolf 的帮助。

```
shared_ptr<QGLContext> MainController::MakeSharedContext(void)
{
  shared_ptr<QGLContext> sharedContext(nullptr);

  if(nullptr != m_mainContext)
  {
    // m_mainContext is: shared_ptr<QGLWidget>
    sharedContext = shared_ptr<QGLContext>( new QGLContext(m_mainContext->format(), m_mainContext.get( ) ) );
    bool created = sharedContext->create( m_mainContext->context( ) );
    Utils::AssertOrThrowIfFalse(created, "Unable to create a shared OpenGL context" );
  }

  return sharedContext;
} 
```

# html - 左对齐列表编号和文本

> ID：14347290
> 
> 赞同：16
> 
> 时间：2013-01-15T21:29:54.677
> 
> 标签：html, css, alignment, html-lists

我想左对齐我的数字和文本`<ol>`。这就是我想要完成的事情：

![在此处输入图像描述](../Images/161e3f24a73b16f95e6898215567fe91.png)

目前，每个都`<li>`包含一个`<a>`，但这可以改变。到目前为止，我尝试在`<a>`.

这是我现在的代码。

HTML：

```
<ol class="dinosaurs">
    <li><a>Dinosaur</a></li>
    <li><a>Tyrannosaurus</a></li>
    <li><a>Camptosaurus</a></li>
</ol> 
```

CSS：

```
.dinosaurs{
    list-style-position: inside;
} 
```

注意：我正在 Windows 7 上的 Chrome 23 中查看网页。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-15T21:48:50.287

这似乎有效：

```
.dinosaurs { counter-reset: item }
.dinosaurs li { display: block }
.dinosaurs li:before { 
  content: counter(item) ". ";
  counter-increment: item;
  width: 2em;
  display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-15T21:44:46.147

您可以像这样定位列表元素：

```
 .dinosaurs {
  list-style-position: inside;
}

.dinosaurs li{
  position: relative;
}
.dinosaurs li a {
  position: absolute;
  left: 30px;
} 
```

这将产生[http://jsfiddle.net/wBjud/2/](http://jsfiddle.net/wBjud/2/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-09T16:19:38.307

现有的答案都不适合我，但通过组合和构建它们，我发现了类似的方法，包括多行条目，不需要列表项内的任何标签：

```
ol {
    counter-reset: item;
}
li {
    display: block;
    margin-left: 1.7em;
}
li:before {
    content: counter(item) ". ";
    counter-increment: item;
    position: absolute;
    margin-left: -1.7em;
} 
```

看起来像这样：[https ://jsfiddle.net/b3dayLzo/](https://jsfiddle.net/b3dayLzo/)

我认为它可以通过`li:before`将`li`.

你可能想要一个不同的`margin-left`.

没有类，`ol`因为在我的情况下，它出现在容器的样式中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T21:36:39.433

尝试添加`padding-left: 0;`您的风格，并在必要时更改`list-style-position:`为。`outside`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T21:45:59.320

您可以使用定位、填充和边距来伪造它。

**[jsFiddle 示例](http://jsfiddle.net/j08691/LRV5x/3/)**

```
.dinosaurs {
  list-style-position: inside;
  position:relative;
  margin-left: -20px;
}
a {
  position:absolute;
  left:70px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-30T15:38:01.530

如果使用`list-style-position: inside;`数字则放置在文本块内。要调整数字的位置并保持文本的标识，请使用此 css。

```
ol {
  list-style: none;
  counter-reset: step-counter;
  padding-inline-start: 25px;
}
ol > li {
  counter-increment: step-counter;
}
ol > li:before {
  content: counter(step-counter)".";
  display: inline-block;
  position: absolute;
  margin-left: -25px;
} 
```

为了让你的子弹也保持在左边

```
ul {
  list-style: none;
  padding-inline-start: 25px;
}
ul > li:before {
  content: '\25cf';
  position: absolute;
  margin-left: -25px;
} 
```

# c# - 使用并行编程评估第一个执行方法的结果

> ID：14347294
> 
> 赞同：0
> 
> 时间：2013-01-15T21:30:14.760
> 
> 标签：c#, .net, parallel-processing, task-parallel-library

给定以下数组`Func<int>[] funcs`并使用 TPL（任务并行库 .NET），我如何评估调用`funcs`.

这里的主要约束是并行运行所有方法并在第一个返回时停止。

方法定义是这样的：

```
public static int EvalFirstResult(Func<int>[] funcs); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:37:50.107

所以，首先我们需要把每个函数变成一个`Task`. 这是用`Select`and完成的`Task.Run`。然后，一旦我们有了它，我们就可以使用`Task.WaitAny`来获得第一个任务的结果来完成。

```
var tasks = funcs.Select(function => Task.Run(function)).ToArray();
int result = Task.WaitAny(tasks); 
```

请注意，其余任务仍将完成；我们没有*阻止*他们，我们只是忽略了他们的结果。

# java - 如何在 glassfish 3.1.2 服务器中从 Java 获取免费请求线程的数量？

> ID：14347296
> 
> 赞同：1
> 
> 时间：2013-01-15T21:30:15.773
> 
> 标签：java, glassfish, glassfish-3

我正在寻找一种 java api 方式来执行此操作，而不是 asadmin / CLI 命令。虽然我在这里环顾四周：http: [//glassfish.java.net/nonav/docs/v3/api/](http://glassfish.java.net/nonav/docs/v3/api/) 我还没有看到它。

此配置 com.sun.grizzly.http.StatsThreadPool 是如何配置最小和最大线程数（您可以在 admin/console/web 页面中查看）。但是，我想要实时“读取”当前的空闲线程数（我愿意计算最大值 - 当前使用）

我的目标是根据请求线程的使用情况创建一个实现[这种“我太忙”算法的过滤器。](https://hacks.mozilla.org/2013/01/building-a-node-js-server-that-wont-melt-a-node-js-holiday-season-part-5/)

当然，您还可以使用其他措施，但此措施适用于我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:14:42.980

我建议使用 AMX 监控 GlassFish。

> AMX 是一个 API，它将所有 Enterprise Server 配置、监控和 JSR 77 MBean 公开为实现 AMX 接口的易于使用的客户端动态代理。

您可以使用此 API 查询 Monitoring MBean。请参阅[http://docs.oracle.com/cd/E19575-01/821-0181/beapd/index.html](http://docs.oracle.com/cd/E19575-01/821-0181/beapd/index.html)

# php - bind_param 失败但回显 bind_results 返回我想要的？

> ID：14347300
> 
> 赞同：-1
> 
> 时间：2013-01-15T21:30:30.227
> 
> 标签：php, mysqli

存在错误消息：

> 致命错误：在第 22 行的 /var/www/New/API/Constants.php 中的非对象上调用成员函数 bind_param()

**更新了整个 constants.php** 这是我在 constants.php 上的代码：

```
session_start();
if (isset($_SESSION['real_name']))
{
    $username = $_SESSION['real_name'];

    $InnerJoinQuery = $STD->prepare("
    SELECT Users.ID, Users.Password, UserInformation.LastName, UserInformation.Firstname, UserInformation.DOB
    FROM Users
    INNER JOIN UserInformation
    ON Users.ID = UserInformation.UserID WHERE Users.Username = ?");
    $InnerJoinQuery->bind_param("s", $username);
    $InnerJoinQuery->execute();
    $InnerJoinQuery->bind_result($UID, $Password, $LastName, $Firstname, $DOB);
    $InnerJoinQuery->fetch();

    $_SESSION['UID'] = $UID;
    $_SESSION['Password'] = $Password;
    $_SESSION['Firstname'] = $LastName;
    $_SESSION['LastName'] = $Firstname;
    $_SESSION['DOB'] = $DOB;
}

    echo $UID."<br>".$Password."<br>".$LastName."<br>".$Firstname."<br>".$DOB; 
```

但：

```
echo $UID."<br>".$Password."<br>".$LastName."<br>".$Firstname."<br>".$DOB; 
```

*退货；*

> 5 xxx 吉尔达里尔 211094

*还：*

```
print_r($_SESSION); 
```

> 数组（[real_name] => InhumaneSlayer [Password] => xxx [UID] => 5 [Firstname] => Gill [LastName] => Daryl [DOB] => 211094）

以上是预期输出

哪个是预期的？所以 bind_param 失败但 bind_results 正在收集正确的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:42:15.690

做这个：

```
 @session_start();
$username = $_SESSION['real_name'];

if (isset($username))
{ 
```

对此：

```
session_start();
if (isset($_SESSION['real_name']))
{
    $username = $_SESSION['real_name']; 
```

…………

```
$InnerJoinQuery->bind_param("s", $username); 
```

您是否检查过会话以确保已设置。我认为你的名字和姓氏是倒着的：

```
$_SESSION['UID'] = $UID;
$_SESSION['Password'] = $Password;
$_SESSION['Firstname'] = $LastName;
$_SESSION['LastName'] = $Firstname;
$_SESSION['DOB'] = $DOB; 
```

尝试回应：

```
echo $_SESSION['UID']."<br/>" ;
echo $_SESSION['Password']."<br/>" ;
echo $_SESSION['Firstname']."<br/>" ;
echo $_SESSION['LastName'] ."<br/>" ;
echo $_SESSION['DOB'] ."<br/>" ;
echo $_SESSION['real_name']."<br/>" ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:53:36.710

如果这是您的完整页面，您将如何获得`$STD`我认为是您的连接变量的信息。

如果您要包括数据库和来自不同页面的此页面....**包括您的数据库文件。**

改变：

```
session_start();
if (isset($_SESSION['real_name']))
{ 
```

到：

```
include "YourFile";
session_start();
if (isset($_SESSION['real_name']))
{ 
```

# java - 适用于 Java 应用程序的 Heroku New Relic 插件无法打开 newrelic.jar

> ID：14347301
> 
> 赞同：0
> 
> 时间：2013-01-15T21:30:32.103
> 
> 标签：java, heroku, newrelic

我[下载](http://download.newrelic.com/newrelic/java-agent/newrelic-api/)了 New Relic 2.12.0 并根据 Heroku [java 配置](https://devcenter.heroku.com/articles/newrelic#java-configuration)文档进行了配置。

我将包内容解压缩到我的 spring mvc 应用程序目录的根目录，如下图所示

![在此处输入图像描述](../Images/a593ce595265e0e79bdce9b3062c5d34.png)

接下来，我将新文件推送到 Heroku：

```
$ git add newrelic
$ git commit -m 'add newrelic'
$ git push heroku master 
```

最后，我引导了新的遗物代理：

```
$ heroku config:add JAVA_OPTS='-Xmx384m -Xss512k -XX:+UseCompressedOops -javaagent:newrelic/newrelic.jar' 
```

之后，我的应用程序因以下错误而失败，并且似乎无法找到 newrelic.jar 文件。

新的 relic 文档说 JVM 参数（例如 -javaagent:newrelic/newrelic.jar）应该包含 newrelic.jar 文件的完整路径，但根据 Heroku 文档，-javaagent:newrelic/newrelic.jar 就是所有需要的.

```
2013-01-15T19:41:11+00:00 heroku[web.1]: Starting process with command `java -Xmx384m -Xss512k -XX:+UseCompressedOops -javaagent:newrelic/newrelic.jar -Dspring.profiles.active=prod -jar target/dependency/webapp-runner.jar --port 47412 target/*.war`
2013-01-15T19:41:11+00:00 app[web.1]: agent library failed to init: instrument
2013-01-15T19:41:11+00:00 app[web.1]: Error occurred during initialization of VM
2013-01-15T19:41:11+00:00 app[web.1]: Error opening zip file or JAR manifest missing : newrelic/newrelic.jar
2013-01-15T19:41:12+00:00 heroku[web.1]: Process exited with status 1
2013-01-15T19:41:12+00:00 heroku[web.1]: State changed from starting to crashed 
```

**更新**

在我的网络测功机上检查了 newrelic 目录后，我注意到 jar 文件丢失了。现在我正在调查丢失 jar 文件的原因。

![在此处输入图像描述](../Images/0ba396ee359a948beb75a0b426eb0df1.png)

**更新**

我的应用程序目录根目录中的 .gitignore 文件不包括 jar 文件，这会阻止部署 newrelic.jar 文件。

```
<<<<<<< HEAD
/target
/.classpath
/.project
/.settings
/tomcat.*
/.idea
/*.iml
=======
*.class

# Package Files #
*.jar
*.war
*.ear 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:21:17.833

您是否可能在`.gitignore`文件中留下了忽略 jar 的内容？如果你`heroku run bash`然后`ls newrelic`你看到那里的罐子吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T19:11:02.010

目标/依赖文件夹中缺少的 jar 文件也有同样的问题。

对我来说，问题是 pom 文件（由 Heroku 示例提供）

这是我的工作POM：

```
 <executions>
                 <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>org.eclipse.jetty</groupId>
                                <artifactId>jetty-runner</artifactId>
                                <version>9.2.3.v20140905</version>
                                <destFileName>jetty-runner.jar</destFileName>
                            </artifactItem>
                            <artifactItem>
                                <groupId>com.newrelic.agent.java</groupId>
                                <artifactId>newrelic-agent</artifactId>
                                <version>3.12.0</version>
                                <destFileName>newrelic-agent.jar</destFileName>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                  </execution>
                </executions> 
```

并且肯定还会添加 New Relic 作为依赖项...

```
 <dependency>
           <groupId>com.newrelic.agent.java</groupId>
           <artifactId>newrelic-api</artifactId>
           <version>3.12.0</version>
        </dependency> 
```

# git - 无法将提交推送到分叉的仓库

> ID：14347302
> 
> 赞同：1
> 
> 时间：2013-01-15T21:30:32.460
> 
> 标签：git, github

我分叉然后克隆了一个 github 存储库，我对其进行了一些更改，提交了它们，然后尝试推送：

```
Nates-MacBook-Pro-2:ReReplay nate$ git push origin master
fatal: remote error: 
  You can't push to git://github.com/natereed/ReReplay.git
  Use git@github.com:natereed/ReReplay.git
Nates-MacBook-Pro-2:ReReplay nate$ 
```

错误信息是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T21:36:34.413

该错误似乎提出了一个解决方案：

```
You can't push to git://github.com/natereed/ReReplay.git 
Use git@github.com:natereed/ReReplay.git 
```

这意味着`git://`URL 通常是“匿名的”——它们不支持身份验证，因此在 Github 上你不能给它们写信。为了写入存储库，您需要使用`ssh`( `git@github.com:...`) 或 http 访问它。

当然，这假设您的 GitHub 帐户已被授予对存储库的写入权限。

您可以重新配置存储库的本地副本以使用 ssh URL，如下所示：

```
git remote set-url origin git@github.com:natereed/ReReplay.git 
```

# shopify - OAuth 发布请求失败

> ID：14347304
> 
> 赞同：1
> 
> 时间：2013-01-15T21:30:34.770
> 
> 标签：shopify

在您请求实际令牌的 OAuth 流程的第 2 步之前，我已经完成了所有工作。我正在使用一个非常简单的 jQuery Post 请求并且不断收到`Access Control Origin`错误。我试过`contentType: 'application/json'`了，我知道的一切都可以尝试。

它只是不起作用，我不确定问题所在。我已经确认所有变量在请求之前都已正确设置。简单的发帖请求...

```
var url = 'https://[STORENAMEVARIABLE].myshopify.com/admin/oauth/access_token';    
var data = JSON.stringify({ client_id: apiKey, client_secret: secret, code: code });

$.ajax({
    type: 'POST',
    url: url,
    data: data,
    success: function(data) {
        debugger;
    },
    error: function(data) {
        debugger;
    }
}); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:35:51.403

您需要从服务器发出 OAuth 请求。这是 Javascript 跨域安全的开始。

如果您使用的是 Rails，您可以使用 omniAuth，它会为您处理整个 OAuth 舞蹈。否则，您将不得不四处搜索，但大多数流行的语言都有一个 OAuth 库，您只需插入即可。

# java - 启动 GUI beanshell 但应用程序冻结

> ID：14347313
> 
> 赞同：1
> 
> 时间：2013-01-15T21:31:29.137
> 
> 标签：java, jar, beanshell

我从命令提示符成功运行了 jar 文件，我看到 beanshell 2.0 正在加载一个带有果冻豆面的小窗口。然后它似乎在加载时冻结了。

我错过了什么吗，这是来自[这里的最新 beta 稳定 jar 文件](http://www.beanshell.org/download.html)

![加载冻结的图像](../Images/153c9ccf487cf491898edc9068a4b93a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T00:04:59.117

从 Chrome 启动 Beanstalk 后，我在 Windows 10 上安装了这个。我找不到要终止的进程，但我只是再次运行 bsh-2.0b4.jar 文件并且它可以工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:29:43.423

运行`C:\>java -jar C:\Java\jdk1.6.0_26-32\jre\lib\ext\bsh-2.0b4.jar`大约 20 次后，启动页面停止冻结，并启动 GUI 控制台。打开一个新的命令提示符并运行该命令似乎并不能保证 GUI 控制台会再次运行。

否则，我发现`java -Xrs -Xverify:none -cp bsh-2.0b4.jar bsh.Interpreter`在命令提示符下运行更有效，并且一直有效。

# xcode - xcode IBAction无法识别的选择器发送到实例

> ID：14347316
> 
> 赞同：0
> 
> 时间：2013-01-15T21:31:31.290
> 
> 标签：xcode, uitableview, ibaction

我的代码中有 IBAction 的问题。每次我单击按钮时，都会出现此异常：

```
2013-01-15 22:25:00.798 FitnessApp[3478:c07] -[__NSCFString cancel:]: unrecognized     selector sent to instance 0x93a7e50
2013-01-15 22:25:00.800 FitnessApp[3478:c07] *** Terminating app due to uncaught exception     'NSInvalidArgumentException', reason: '-[__NSCFString cancel:]: unrecognized selector sent to    instance 0x93a7e50' 
```

我已经搜索过这个错误。但是stackoverflow上的解决方案不起作用。我的连接都设置正确。没有重复的连接或类似的东西。

我的代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [self setTitle:NSLocalizedString(@"Placeholder_Description", nil)];
    [self.navigationController setToolbarHidden:NO];
    [self.navigationController.toolbar setTintColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:1]];
    [self.buttonCancel setTarget:NSLocalizedString(@"Cancel_Button", nil)];
    [self.buttonSave setTarget:NSLocalizedString(@"Save_Button", nil)];
    [self.textViewDescription.layer setBorderColor:[[UIColor grayColor] CGColor]];
    [self.textViewDescription.layer setBorderWidth:1.0];
    [self.textViewDescription.layer setCornerRadius:8.0f];
    [self.textViewDescription.layer setMasksToBounds:YES];
    [self.textViewDescription setText:[self textViewDescriptionText]];
}

- (IBAction)cancel:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (IBAction)save:(id)sender {
    [self.delegate doSaveDescription:self withDescription:[self.textViewDescription text]];

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

我做了一些 NSLogs 来发现 IBAction 是问题所在，因为单击按钮后从来没有输出，只是例外。那么，如果连接设置正确，我该怎么办？

# jquery - 全宽固定高度图片

> ID：14347320
> 
> 赞同：1
> 
> 时间：2013-01-15T21:31:47.467
> 
> 标签：jquery, css, image, responsive-design

无论屏幕的宽度如何，如何确保图像以一定的固定高度全宽显示（或水平完全覆盖屏幕）。如果我要设置`width: 100%;`，`height: auto;`显然高度会随着屏幕的宽度而波动。如果屏幕较窄，图像是否仅部分显示并不重要。有任何想法吗？

编辑：这是一个很好的例子：[http ://www.teamnine.ch](http://www.teamnine.ch)

尝试重新调整浏览器窗口的大小以了解我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:30:24.217

从源网站，很明显他们有一个`min-height`属性集。因此，您会得到这样的结果。`img`在您想要的页面上，为您的标签尝试以下 CSS 。

```
img {
    min-height: 100%;
    min-width: 1400px;
    width: 100%;
    height: auto;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-02T18:47:03.597

我认为上述（链接）网站使用的高度为**100vh**而不是 100%。

100vh 将占据窗口的整个高度而不拉伸图像。如果添加（例如 50vh），图像将占据窗口的一半。这有点像使用百分比，但我认为，在这里使用 vh 是正确的方法。

如果你想让你的标题像这样，试试这个，

```
header {
   background-image: (image.jpg); 
   height: 100vh; 
   background-size: cover;
} 
```

以下是如何将标题内的所有元素居中居中（如有问题的链接），

```
header {
    background-image: (image.jpg); 
    height :100vh; 
    background-size: cover; 
    display: flex; 
    flex-direction: column; 
    justify-content: centre; 
    alighn-items: centre; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:42:50.750

您可以将图像包装在 div 中：

CSS：

```
<style type="text/css">
div.outer {
    width:100%;
    height:125px;
    overflow:hidden;
}
img {
    width:100%;
    height:auto;
}
</style> 
```

HTML：

```
<div class="outer">
    <img src="inner.jpg">
</div> 
```

# haskell - foldl 和 IO 值

> ID：14347323
> 
> 赞同：5
> 
> 时间：2013-01-15T21:31:48.280
> 
> 标签：haskell, io, fold

我有这样的代码：

```
foldl (\a x -> a ++ (f x)) [] list 
```

一切似乎都很好，但是`(f x) :: IO [String]`，并`(++)`给出了一个错误（[String]！= IO [String]）。

如何定义空 IO[String] 列表？我无法清洁（fx）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T21:44:19.350

您在这里想要的组合器可能是

```
Prelude Control.Monad> :t foldM
foldM :: Monad m => (a -> b -> m a) -> a -> [b] -> m a 
```

和那个

```
foldM (\a x -> fmap (a++) (f x)) [] list 
```

依次运行动作`f x`并累积`[String]`它们产生的 s。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T03:14:47.983

在：

```
foldl (\a x -> a ++ (f x)) [] list 
```

你正在尝试做`a ++ f x`但是`f x :: IO [String]`，所以它不起作用。让我们看看我们是否可以弄清楚发生了什么。

您的意思是 for`x`来自您的`list`，因此您将`f`依次应用于列表的每个元素，并且它们每个都给您 a`[String]`并且您希望在进行过程中将它们连接在一起。

我们将使用`mapM :: Monad m => (a -> m b) -> [a] -> m [b]`，它将一个函数映射到一个列表上，然后将 monad 操作组合成一个，将输出组合成一个列表。

```
concatMapM :: (a -> IO [String]) -> [a] -> IO [String]
concatMapM f list = fmap concat (mapM f list) 
```

这里我习惯于`fmap`将纯函数`concat`应用于 IO 操作的结果。

你可以使用它来测试它

```
fileLines :: FilePath -> IO [String]
fileLines filename = fmap lines (readFile filename) 
```

```
*Main> concatMapM fileLines ["test1.txt","test2.txt"]
["This is test1.txt","It has two lines.","This is test2.txt","It has two lines too."] 
```

这种方式比尝试 foldl 更好，因为`concat`比`foldl (++)`. 要自己检查一下，请比较以下速度：

```
*Main> writeFile "test3.txt" $ foldl (++) [] (map show [1..10000])
*Main> writeFile "test3.txt" $ foldr (++) [] (map show [1..10000]) 
```

问题是这样`foldl`做会`(((a++b)++c)++d)++e`遍历列表`a`四次-它首先在添加时遍历列表，`b`然后在添加时遍历列表，`a`然后在添加时遍历所有四个列表。补充道。这是一个很大的努力。`b``c``a``b``c``d``e`

`foldr`这样`a ++ (b ++ (c ++ (d ++ e)))`做会遍历每个列表一次 -`d`然后`c`然后`b`然后`a`。`concat`是 a `foldr`，这对于这个列表操作要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:53:01.650

假设您有以下内容：

```
list :: [a]
f :: a -> IO b 
```

我假设您想获得 type 的最终值`IO [b]`。如果你映射`f`过来`list`，你会得到一个类型的列表`[IO b]`。您可以使用以下方式将 IO 从内部“移动到外部” `sequence :: Monad m => [m a] -> m [a]`：

```
sequence (map f list) :: IO [b] 
```

可以这样想：在排序之前，您有一个用于生成 type 值的指令列表`b`。现在你有一条指令来制作`b`'s 列表。

# c++ - c++ 在 lambda 函数中 - 错误：tbb::parallel_for 中的类型参数无效

> ID：14347325
> 
> 赞同：0
> 
> 时间：2013-01-15T21:32:09.277
> 
> 标签：c++, gcc, c++11, lambda

c++ 中 tbb 和 lambdas 的新手，并且在以下代码中存在编译器错误：

```
template <class ObjT, class Stepper>
class GroupStepper 
    : public Stepper {

public:
    typedef boost::shared_ptr<ObjT> obj_ptr;

    void step () {

        tbb::parallel_for (blocked_range<int> (0, objs_.size ()),
                     [this] (const blocked_range<int>& r) {
        for (int i=r.begin (), e=r.end (); i<e; ++i) {
            Stepper::step (objs_[i], h_);
        }
        });
    };

private:

    std::vector<obj_ptr>&   objs_;
    scalar                  h_;
}; 
```

使用 gcc v. 4.5.1 编译时出现以下错误：

```
In lambda function:

... error: invalid type argument

... error: invalid type argument 
```

两者都指的是 Stepper::step 的输入参数。我猜这个模板继承有些东西不能很好地与 lambda 配合使用？

任何帮助处理这些东西都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:52:07.293

我认为 lambda 介绍器（又名捕获子句）是不正确的。我不太明白你想用“[this]”表达什么。请查看以下文章以了解正确的语法：http: [//msdn.microsoft.com/en-us/library/dd293603.aspx](http://msdn.microsoft.com/en-us/library/dd293603.aspx) 希望这会有所帮助！:)

# c - 使用#define在C中创建一个数组

> ID：14347326
> 
> 赞同：0
> 
> 时间：2013-01-15T21:32:10.103
> 
> 标签：c, c-preprocessor, pic, pragma

我有一个头文件声明：

```
 #pragma char PORTC   @ 0x07
  #pragma char PORTD   @ 0x08
  #pragma char PORTE   @ 0x09 
```

我通过编写 PORTC.0、PORTC.1...PORTC.7 来访问 PIC 处理器上的端口。

我想用这些端口制作一个数组，我在想这样的事情：

```
#define ARRAY { {PORTC.5, PORTD.2, PORDC.0}, {PORTE.1, PORTD.3, PORTC.6}.... }

int main ( void )
{
   *type* somestuff[3][9] = ARRAY;
   ...
} 
```

我希望能够以简单的方式循环通过端口。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:20:35.357

pragma 显然是某种特定于编译器的语言扩展，但您的代码看起来可能正常工作。

此示例仅使用常规 C 语法作为示例来说明*通常*如何完成此操作（并且显然不会对您的设备做任何特别的事情）。你应该做出明显的替换，看看它是否有效。

```
char PORTC_0 = 1;
....
char PORTE_6 = 42;

int main (void)
{
  struct {char port[3];} dev[3][9] = {{{PORTC_5, PORTD_2, PORDC_0},
                                       {PORTE_1, PORTD_3, PORTC_6},
                                       ....},
                                      {...},
                                      ....};
  int i, j;
  for (i = 0; i < 3; i++)
    {
      for (j = 0; j < 9; j++)
        {
           do_stuff (dev[i][j].port[0], dev[i][j].port[1], dev[i][j].port[2]);
        }
    }

  return 0;
} 
```

# css - 绘制类 webkit 圆角边框的数学公式

> ID：14347331
> 
> 赞同：1
> 
> 时间：2013-01-15T21:32:23.083
> 
> 标签：css, math, canvas, border

在画布中，我想以与基于 webkit（谷歌浏览器）浏览器相同的方式绘制圆角。例如在 css 中，我可以这样定义 div：

```
div {
  background-color: red;
  width: 100px;
  height: 100px;
  margin: 20px;
  border-radius: 30px;
  border-top: 5px solid blue;
  border-left: 20px solid green;
} 
```

现场示例在这里：http: [//jsfiddle.net/fHmt9/](http://jsfiddle.net/fHmt9/)

如何在画布中从此示例中绘制绿色边框？这个的数学公式是什么？

# cmake - 没有规则来制作目标 /usr/lib/someLib.so

> ID：14347334
> 
> 赞同：13
> 
> 时间：2013-01-15T21:32:36.607
> 
> 标签：cmake

用于在 buntu 11.04 中工作的构建，现在在 12.04 中没有。

位置有冲突`someLib.so`。也就是说，它正在寻找错误的位置。 `/usr/lib/here/someLib.so`是正确的位置。

当我在 ccmake 中运行 'c' 配置 cmd 时，它注意到了冲突，.. 一次。现在 ccmake 不再抱怨，但错误仍然存​​在。 `runtime library [someLib.so] in /usr/lib may be hidden by files in: /usr/lib/here`

CMakeLists.txt 中导致构建错误的行是：

```
ADD_EXECUTABLE(test main.cpp)
TARGET_LINK_LIBRARIES(test moreStuff evenMoreStuff) 
```

`build.make`我在文件中看到了问题。这是由ccmake生成的。我不知道 ccmake 从哪里得到的想法`someLib.so`是 at `/usr/lib/`，而不是 @ `/usr/lib/here/`。我认为这将是`SET()`某处的声明。我没有找到它。

1）配置文件（ccmake 'c' cmd）叫什么？它会在哪里（相同的目录？）？我想如果我删除它，我将能够再次看到错误。（更改 CMakeFile.txt 似乎没有这样做。）
2）我怎样才能找出设置位置的位置`someLib.so`？（我在找什么？）

我讨厌CCMAKE。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:40:16.523

我会说这是 find_library 调用之一的问题。如果我没记错的话，这是在您的环境指向两个不同的位置时发生的，这两个位置都包含同名的库文件。

您可以通过更改您的环境使其不指向两个位置或使用 NO_*_PATH 之一和 find_library 调用来防止这种情况发生，以防止 cmake 找到这两个位置（例如，您可以为此 find_library 定义自己的路径和使用 NO_DEFAULT_PATH 防止 cmake 使用环境路径 - 请参阅文档：[http](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_library) ://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:find_library ）

find_library(someLib_location NAMES someLib PATHS /usr/lib/here/ NO_DEFAULT_PATH)

关于 1）我认为它们被称为 CMakeCache 文件，但最安全的方法是简单地删除整个构建结构（如果你是从源代码构建的，这不是问题）

关于 2）我会按库名称搜索 CMakeList.txt 文件（没有 .so 后缀和 lib 前缀，因为它们可能是由 CMAKE_FIND_LIBRARY_PREFIXES 和 CMAKE_FIND_LIBRARY_SUFFIXES 变量添加的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-15T11:07:01.187

首先，我建议使用以下命令检查软件包是否已安装：

```
dpkg -L SomeLib 
```

如果未安装，请使用 apt-get 或任何其他方法安装，然后重试。如果它已安装但位于错误的位置，请使用链接命令创建正确的位置，如下所示：

```
sudo ln -s locationOfLibFromAboveCommand locationItShouldBe 
```

我希望它有所帮助。

# java - 在当前线程中找不到 OpenGL 上下文，我该如何解决这个错误？

> ID：14347340
> 
> 赞同：10
> 
> 时间：2013-01-15T21:32:51.677
> 
> 标签：java, opengl, lwjgl, slick2d

我正在做一个纸牌游戏，目前有一个很好的基础，但是当我在eclipse中运行它时遇到了一个错误。我也在使用光滑的 2d。

这是来自控制台的错误。

> 线程“主”java.lang.RuntimeException 中的异常：在当前线程中找不到 OpenGL 上下文。在 org.lwjgl.opengl.GLContext.getCapabilities(GLContext.java:124) 在 org.lwjgl.opengl.GL11.glGetError(GL11.java:1277) 在 org.newdawn.slick.opengl.renderer.ImmediateModeOGLRenderer.glGetError(ImmediateModeOGLRenderer .java:387) 在 org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.java:275) 在 org.newdawn.slick.org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.java:337)。 Image.(Image.java:270) at org.newdawn.slick.Image.(Image.java:244) at org.newdawn.slick.Image.(Image.java:232) at org.newdawn.slick.Image。 (Image.java:198) 在 Cards.Card.(Card.java:18)

我认为发生错误的来源的代码（卡类）

```
package Cards;
import org.newdawn.slick.Image;
import org.newdawn.slick.SlickException;
public class Card
{
    final int numCards = 52;
    Image[] card = new Image [numCards];
    Card (int c)
    {
        String fileLocation = new String ();
        for (int i = 1 ; i <= 52 ; i++)
        {
            fileLocation = "res/cards/" + i + ".png";
            try 
            {

                card [i] = new Image (fileLocation); //line
            }
            catch (SlickException e)
            {
                e.printStackTrace ();
            }
        }
    }
    public Image getImage (int cardlocation)
    {
        return card [cardlocation];
    }
} 
```

*以前有人见过这种问题吗？我该如何解决？*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T22:16:17.007

这种错误在 LWJGL 启动器中很常见。OpenGL 上下文在创建时被绑定到线程。所以你只能从同一个线程访问这个上下文。

由于看起来您不是在使用不同的线程，因此可能还有另一个原因。Slick2D 似乎需要为其`Image`类提供有效的 OpenGL 上下文。

所以我的第一次尝试是在初始化你的卡片图像之前初始化一个 OpenGL 上下文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T02:28:06.203

这发生在我身上一次，直到我意识到我在 OpenGL 初始化之前调用了图像加载器，我才知道该怎么做。确保在 OpenGL 初始化（我所做的）之前，您没有在构造函数（或任何其他调用的方法）中使用图像加载器定义任何变量。

`Card`您是否在初始化 OpenGL 之前定义了一个类？

希望这可以帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-25T05:23:03.037

在 lwjgl 3.x 及更高版本中，您可以尝试： `GLContext.createFromCurrent();`

如果您使用的是 libgdx，还需要在渲染线程上`Gdx.app.postRunnable(...)`发布一个。`Runnable`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-16T01:12:52.717

好吧，我发现您需要在设置 OpenGL 环境之前初始化 Display :)...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-10T17:02:57.383

一个旧线程，但它可能会帮助某人。根据您使用的 LWJGL，初始化您的显示：

**LWJGL 3** *（使用 GLFW）*：

```
if (!glfwInit()) {
   throw new IllegalStateException("Can't init GLFW");
} 
```

**LWJGL 2**：

```
try {
   Display.setDisplayMode(new DisplayMode(800, 600));
   Display.create();
} catch (LWJGLException ex) {
   Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
} 
```

我主要忘记了**Display.create()** :)

# excel - 如何检查单元格是否格式化为货币？

> ID：14347341
> 
> 赞同：1
> 
> 时间：2013-01-15T21:32:53.303
> 
> 标签：excel, vba, excel-2010

我正在做一个项目，需要检查大量单元格是否满足许多标准。

我已经能够使用下面的代码来检查单元格是否包含数字格式的值。但是，我还需要一种方法来检查单元格是否包含格式化为美国货币的值。

```
If Not Application.WorksheetFunction.IsNumber(Range(StringColumn & StringRow).Value) Then  
    MsgBox "Test Failed at " & StringColumn & StringRow  
    Exit Sub  
Else: MsgBox "Valid format for cell " & StringColumn & StringRow  
End If 
```

StringColumn 和 StringRow 是提供单元格引用的变量。

感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:38:10.533

您还可以使用与以货币或会计格式 开头的公式等效的 [vba](/questions/tagged/vba "显示标记为“vba”的问题")`=CELL("format",A1)``C`

```
MsgBox Left$(Evaluate("CELL(""Format"",A1)"), 1) = "C" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:48:17.867

假设您使用`$`的是您的货币，您可以试试这个：

```
Dim strFormat as String

strFormat = Range(StringColumn & StringRow).NumberFormat

If InStr(1,strFormat,"$") = 0 Then  'not a currency format

    MsgBox "Test Failed at " & StringColumn & StringRow  
    Exit Sub  

Else: MsgBox "Valid format for cell " & StringColumn & StringRow  

End If 
```

如果您有其他货币，请将 替换为`$`您的货币符号。

# php - 自动生成“JSON 模式文档”

> ID：14347342
> 
> 赞同：2
> 
> 时间：2013-01-15T21:32:58.827
> 
> 标签：php, documentation, automation

所以，我在开发 PHP 应用程序时使用了很多 JSON。并且一个函数返回 json 字符串或任何很难知道它们包含什么的东西，并且*保持文档更新非常耗时，尤其是在它发生很大变化的情况下。*

实现这样的东西是个好主意吗：

而不是使用`return $x`我会实现一个名为的函数`_return`，它类似于：

```
function _return($obj)
{
    var_dump(debug_backtrace());
    return $obj;
} 
```

它会做更多的事情，它会在堆栈跟踪中查找函数的名称，然后我可以让这段代码将 $obj 类型保存到适当的文件中，它们可以用来创建自动更新的文档！

这是个好主意吗？每次返回时执行 debug_backtrace() 可能会很耗时？

我会像这样使用它：

```
class T
{
    public function __constructor()
    {
    }

    public function first()
    {
        return $this->second();
    }

    public function second()
    {
        $array = array('david' => 'value', 'test' => 'oj');
        return _return($array);
    }

}

function _return($obj)
{
    var_dump(debug_backtrace());
    return $obj;
}

$t = new T();
$t->first(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:46:07.747

您的代码有几个缺点。

首先，回溯可以变得巨大——这就是函数存在的原因`debug_print_backtrace()`。如果您接近内存限制，则将回溯推入一个变量然后被转储可以取消脚本。

第二：备注：你为什么不在你`_return`的“第一个”方法中？

第三：如果你 var_dump 东西，你会破坏任何可能被最近的 javascript 库使用和解析的 JSON 输出。

第四：如果您不知道当您收到对某个 URL 的请求时调用了哪些函数，则不应归咎于文档，而应归咎于从 URL 到已执行函数的非明显映射系统。

第五：调试日志记录。

第六：输出净化（它是输入验证的对应物）。

第七：有 JSON Schema 验证之类的东西。例如，看看[http://davidwalsh.name/json-validation](http://davidwalsh.name/json-validation)。这通过定义数据结构反过来起作用，但是如果您可以将现实与目标结果进行比较并检测到任何差异，那么至少您知道在哪里更新某些内容。

# java - 禁止 Java URL 获取本地文件？

> ID：14347343
> 
> 赞同：1
> 
> 时间：2013-01-15T21:33:01.727
> 
> 标签：java, url, security

[我有一个 Java Web 应用程序，它具有使用URL](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)获取远程文件的功能。

在测试代​​码时，我发现匿名用户可以通过修改文件的路径来读取[本地](http://en.wikipedia.org/wiki/File_URI_scheme)`/etc/passwd`文件：`file:///etc/passwd`

```
String remoteUrl = "file:///etc/passwd"; // some url we got from anonymous user
URL url = new URL(remoteUrl);
byte data[] = new byte[1024];
int length;

BufferedInputStream inputStream = new BufferedInputStream(url.openStream());

ServletOutputStream outputStream = response.getOutputStream();
// OR PrintStream outputStream = System.out;

while( (length = inputStream.read(data, 0, 1024)) >= 0 ) {
    outputStream.write(data, 0, length);
} 
```

有关解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:50:22.397

如果您使用 URL，则可以从中获取协议。在这种情况下，如果协议是“文件”（或者不是“http”，具体取决于您想要的限制程度），您可以抛出异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:36:42.553

在对某些文件夹具有受限访问权限的用户下执行此过程。这将在操作系统级别处理，并且操作系统将通过定义的权限允许该进程。

# c# - 原生 C/C++ 和 C# (.NET) 之间最轻量的 IPC 解决方案是什么？

> ID：14347344
> 
> 赞同：5
> 
> 时间：2013-01-15T21:33:02.743
> 
> 标签：c#, .net, visual-c++, ipc

我有一个本机 C++ Visual Studio 2010 解决方案，我想将数据发送到 .NET 应用程序 (C# WPF) 有没有办法用几行 C/C++ 代码来做到这一点？我不想在 C/C++ 端使用外部依赖项。有没有关于这个的示例代码？

更多信息：C/C++ 本机应用程序实际上是一个加载到 chrome.exe 进程中的 npapi dll。我不认为这很重要，请确认。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:38:19.843

听起来您可以使用[命名管道](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365590(v=vs.85).aspx)在进程之间进行通信。

[这个问题](https://stackoverflow.com/q/2998672/180043)应该有助于为您指明正确的方向。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T21:38:54.660

我推荐命名管道；[这](http://msdn.microsoft.com/en-us/library/bb546085.aspx)是 C# 和 C++ 之间命名管道实现的一个很好的例子。您还可以实现[COM Interop](http://www.codeproject.com/Articles/12673/Calling-Managed-NET-C-COM-Objects-from-Unmanaged-C)。另一种选择是使用 WM_COPYDATA 消息（要捕获它们，您需要覆盖 WndProc），但是，这些消息非常受限：

```
public static class CopyDataHelper
{
    [StructLayout(LayoutKind.Sequential, Pack=1)]
    public struct COPYDATASTRUCT
    {
        private Int32 _dwData;
        private Int32 _cbData;
        private IntPtr _lpData;

        public Int32 DataId
        {
            get { return _dwData; }
            set { _dwData = value; }
        }

        public Int32 DataSize
        {
            get { return _cbData; }
        }

        public IntPtr Data
        {
            get { return _lpData; }
        }

        public T GetData<T>() where T : struct
        {
            return (T)Marshal.PtrToStructure(_lpData, typeof(T));
        }

        public void SetData<T>(T data) where T : struct
        {
            Int32 size = Marshal.SizeOf(typeof(T));
            IntPtr ptr = Marshal.AllocHGlobal(size);
            Marshal.StructureToPtr(data, ptr, true);

            _cbData = size;
            _lpData = ptr;
        }
    }

    [DllImport("User32.dll", CharSet=CharSet.Unicode, ExactSpelling=true, SetLastError=true)]
    [return:  MarshalAs(UnmanagedType.Bool)]
    internal static extern Boolean SendMessage([In] IntPtr hWnd, [In] UInt32 msg, [In] IntPtr wParam, [In, Out] ref COPYDATASTRUCT lParam);

    public const Int32 WM_COPYDATA = 0x004A;

    public static Boolean Send<T>(IntPtr fromHwnd, IntPtr toHwnd, Int32 dataId, T data) where T : struct
    {
        IntPtr ptr = IntPtr.Zero;

        try
        {
            COPYDATASTRUCT cds = new COPYDATASTRUCT();
            cds.DataId = dataId;
            cds.SetData(data);
            return SendMessage(toHwnd, WM_COPYDATA, fromHwnd, ref cds);
        }
        finally
        {
            if (ptr != IntPtr.Zero)
                Marshal.FreeHGlobal(ptr);
        }
    }

    public static COPYDATASTRUCT Receive(Message msg)
    {
        if (msg.Msg != WM_COPYDATA)
            throw new ArgumentException("This is not a WM_COPYDATA message!");

        return (COPYDATASTRUCT)msg.GetLParam(typeof(COPYDATASTRUCT));
    }   
}

// Override

protected override void WndProc(ref Message msg)
{
    if (msg.Msg == CopyDataHelper.WM_COPYDATA)
    {
        CopyDataHelper.COPYDATASTRUCT cds = CopyDataHelper.Receive(msg);

        if (cds.DataId == myDataId)
        {
            MyData data = cds.GetData<MyData>();
            msg.Result = DoSomething(data);
            return;
        }
    }

    base.WndProc(ref msg);
} 
```

最后的机会是使用 Google 的 Protocol Buffers：最初的实现只支持 C++、Java 和 Python……但对于 .NET，有[protobuf-net](http://code.google.com/p/protobuf-net/)。

# android - android 的自定义列表视图适配器 - 如何在 getView() 中获得正确的视图？

> ID：14347346
> 
> 赞同：3
> 
> 时间：2013-01-15T21:33:12.833
> 
> 标签：android, android-layout, android-adapter

我正在尝试编写一个自定义适配器来将一个简单的类适应到 ListView 中。该类用于 SMS 消息，它包含简单的字段，如正文、发件人地址等。下面，请参阅我的适配器布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <ImageView
    android:id="@+id/imgContactPhoto"
    android:contentDescription="Contact photo"
    android:layout_width="90sp"
    android:layout_height="90sp" />

    <TextView
    android:id="@+id/lblMsg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/imgContactPhoto" 
    android:paddingLeft="10sp" />

</RelativeLayout> 
```

还有我的自定义适配器类：

```
public class SmsListAdapter extends ArrayAdapter{

  private int resource;
  private LayoutInflater inflater;
  private Context context;

  @SuppressWarnings("unchecked")
  public SmsListAdapter(Context ctx, int resourceId, List objects) {
      super(ctx, resourceId, objects);
      resource = resourceId;
      inflater = LayoutInflater.from( ctx );
      context=ctx;
  }

  @Override
  public View getView (int position, View convertView, ViewGroup parent) {
        //create a new view of the layout and inflate it in the row
        convertView = ( RelativeLayout ) inflater.inflate( resource, null );

        // Extract the object to show 
        Sms msg = (Sms) getItem(position);

        // Take the TextView from layout and set the message
        TextView lblMsg = (TextView) convertView.findViewById(R.id.lblMsg);
        lblMsg.setText(msg.getBody());

        //Take the ImageView from layout and set the contact image
        long contactId = fetchContactId(msg.getSenderNum());
        String uriContactImg = getPhotoUri(contactId).toString();
        ImageView imgContactPhoto = (ImageView) convertView.findViewById(R.id.imgContactPhoto);
        int imageResource = context.getResources().getIdentifier(uriContactImg, null, context.getPackageName());
        Drawable image = context.getResources().getDrawable(imageResource);
        imgContactPhoto.setImageDrawable(image);
        return convertView;
  }
} 
```

当我尝试激活适配器时，我在 getView() 的第一行收到错误消息，指出无法将 TextView 强制转换为 RelativeLayout。

我不清楚的是为什么这首先是一个 TextView 。我的列表项布局设置为RelativeLayout，这就是应该被夸大的，除非我弄错了。谁能帮我调试一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:42:18.353

在这条线上：

```
 convertView = ( RelativeLayout ) inflater.inflate( resource, null ); 
```

而不是资源，尝试使用布局的完整 ID - R.layout.whatever

此外，您应该只在传入视图为空时膨胀布局。否则视图已经膨胀，你应该覆盖它的所有值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:57:11.433

使用 BaseAdapter 创建您的自定义适配器。这从一开始就有点难以管理，但可以让您以后的工作更轻松。

```
public class GeneralAdapter extends BaseAdapter{

private LayoutInflater mInflater    = null;
private ArrayList<String> info      = null;

public GeneralAdapter( ArrayList<String> info ) {
    this.info = info;
}

@Override
public int getCount() {
    return info.size();
}

@Override
public Object getItem(int position) {
    return info.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.YOURLAYOUT, null);

        holder                  = new ViewHolder();
        holder.generalTV        = (TextView) convertView.findViewById(R.id.lblMsg);
        holder.generalIV        = (ImageView) convertView.findViewById(R.id.imgContactPhoto);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.generalTV.setText(info.getBody());
    holder.generalIV.setBackgroundResource(R.id.YOURIMAGE);

    return null;
}

private class ViewHolder {
    TextView generalTV;
    ImageView generalIV;
}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:56:08.397

删除 to 的显式`convertView`转换`RelativeLayout`应该会有所帮助。

# delphi - 我的 TComponent 如何拦截 ESC 键并进行处理？

> ID：14347351
> 
> 赞同：8
> 
> 时间：2013-01-15T21:33:33.483
> 
> 标签：delphi, delphi-7

在我的`TComponent`中，有一点我想监听键事件并拦截`ESC`键并在我的组件中处理它，消耗/“吃”击键，例如，所有者表单不会在那个阶段处理它。就像在`TDragObject`您开始时按 拖动并取消它一样`ESC`。

问题是`TDragObject`它`AllocateHWnd`的所有者表单通知了`CN_KEYDOWN`. 但是没有人通知我的组件。

我需要`WindowProc`用我自己的表格替换吗？如果是，那么可以这么说如何正确地“按书”？

* * *

只是为了 100% 清楚：

```
TMyComponent = class(TComponent) 
```

* * *

我做了一个小测试，它似乎工作：

```
TMyComponent = class(TComponent)
  private
    FOldWindowProc: TWndMethod;
    FParentForm: TCustomForm;
    procedure FormWindowProc(var Message: TMessage);
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;    
end;

...

constructor TMyComponent.Create(AOwner: TComponent);
begin
  if not (AOwner is TWinControl) then
    raise Exception.Create('TMyComponent.Create: Owner must be a TWinControl');
  inherited Create(AOwner);
  // hook parent form
  FParentForm := GetParentForm(TWinControl(Owner));
  if Assigned(FParentForm) then
  begin
    FOldWindowProc := FParentForm.WindowProc;
    FParentForm.WindowProc := FormWindowProc;
  end;
end;

destructor TMyComponent.Destroy;
begin
  // unhook parent form
  if Assigned(FParentForm) then
    FParentForm.WindowProc := FOldWindowProc;
  inherited;
end;

procedure TMyComponent.FormWindowProc(var Message: TMessage);
begin
  FOldWindowProc(Message);
  if Message.Msg = CM_CHILDKEY then // CM_CHILDKEY -> CM_DIALOGKEY -> CM_DIALOGCHAR
  begin
    OutputDebugString('CM_CHILDKEY');
    if Message.WParam = VK_ESCAPE then
    begin
      Beep;
      // do my stuff...
      Message.Result := 1; // consume keystroke
    end;
  end;
end; 
```

我想知道这是否是正确/唯一的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T01:42:53.643

一种方法可能是`TApplicationEvents`在组件内部创建一个对象，然后`OnMessage`在 VCL 的其余部分处理它们之前，使用它的事件来查看来自主线程消息队列的消息，例如击键。

# php - 通过更改当前页面/类别的查询。落下

> ID：14347354
> 
> 赞同：0
> 
> 时间：2013-01-15T21:33:54.263
> 
> 标签：php, wordpress, loops

我正在尝试设置一个下拉菜单，允许用户通过三个/四个不同的查询进行选择，然后当他们选择一个时，他们所在的当前页面会根据他们单击的任何查询而变化。现在我有一个基本的 html 选择下拉菜单，点击时会发生变化，我还设置了我的 PHP 查询代码。我不知道如何链接这两者，所以它会得到你所在的任何页面，然后显示相应的帖子对于您选择的任何查询.. 但尽管如此，这就是我到目前为止所得到的。

HTML：

```
<form method="get" name="QueryChange"> 
<select name="query" onChange="this.form.submit()">
    <option value="0">Select Query</option>
    <option value="1">Query 1</option>
    <option value="2">Query 2</option>
</select>
</form> 
```

PHP：

```
<?php

$query = '';

switch( $_POST['query'] ) {
    case '2':
        $query = 'gdsr_sort=rating2'; // your second query
        break;
    case '1':
        $query = 'gdsr_sort=rating'; // your first query
    break;
    default:
    case '0':
        $query = '';
        break;
}

// The Query
query_posts( $query );

// The Loop
while ( have_posts() ) : the_post();
?>
<?php get_template_part( 'content', get_post_format() ); ?>
<?php 
endwhile;

// Reset Query
wp_reset_query();
?> 
```

现在，当您通过下拉菜单选择一个选项时，它会刷新页面但无法成功查询帖子。如果我将默认大小写“0”设置为，`'gdsr-Sort=rating'`则默认情况下会成功查询帖子。但是下拉菜单实际上并没有查询任何帖子。那么，如何使此下拉列表成功查询用户所在页面/类别的帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:37:39.333

您正在通过 GET ( `<form method="get">`) 提交表单，但您正在签`$_POST['query']`入您的脚本。请尝试检查`$_GET['query']`。

# javascript - 节点应用程序在收到 JSON 后崩溃，但在发送之前没有。

> ID：14347356
> 
> 赞同：1
> 
> 时间：2013-01-15T21:33:58.357
> 
> 标签：javascript, node.js

所以我有一个我正在尝试创建的 node.js 应用程序，其中一部分是访问 reddit 的 api 并从 url 获取 JSON，将其存储在 URL 中并发送它收集的内容。它完成了所有这些，但是在发送它找到的对象数组之后，应用程序崩溃并出现错误

```
 TypeError: Cannot read property 'children' of undefined 
```

这对我来说没有意义，因为它已经找到了这些值并将它们用于输出。知道有什么问题吗？

```
var express = require("express"),
restler = require("restler");

var app = express.createServer();

app.all('/:subreddit', function(req, res){
    restler.get("http://www.reddit.com/r/"+ req.params.subreddit + ".json").on('complete', function(reddit){
    var reddit_data = reddit.data.children;
    var titles = new Array();
    var i = 0;
    while (i<5){

        titles[i] = i+": " + reddit_data[i].data.title;
        i++
    }
    res.send(titles);
});
});

app.listen(14042);
console.log("redSMS listening on 14042"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:56:18.073

问题是您接受*每个*请求并将其传递给 Reddit。

如果浏览器转到，比如说`http://localhost/bmw`，express 会将它传递给 reddit 并显示`http://www.reddit.com/r/bmw.json`. 到目前为止，一切都很好。

然后浏览器做它一直做的事情，将`http://localhost/favicon.ico`它传递给 Reddit as `http://www.reddit.com/r/favicon.ico.json`，给出 404 并且没有结果。当您尝试访问`children`该结果时，您会遇到崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:36:27.017

对“完成”事件处理程序的回调传递了 2 个参数，而不是一个。第一个是“结果”，第二个是“响应”对象。

# html - 不能并排放置没有边距的表格图像

> ID：14347357
> 
> 赞同：0
> 
> 时间：2013-01-15T21:34:06.017
> 
> 标签：html, css, image

我有必须在 HTML 页面上添加的 Excel 表格的图像。我有 6 张图片，其中前四张不需要并排（但它们之间不需要有空格），但最后两张必须并排（它们之间没有边距），因为那张桌子是最初是横向模式。我尝试了不同的方法，但都没有奏效。我正在使用 HTML 和 CSS。代码如下。任何帮助将不胜感激。我正在使用 Eclipse Juno 进行开发。

```
 //***Html file

 <div class="crop">
   <img src ="QATables/image1.png">
   <img src ="QATables/image2.png">
   <img src ="QATables/image3.png">
   <img src ="QATables/image4.png">     
   <img src ="QATables/image5.png" border="0"><img src ="QATables/image6.png" border="0"/>

 </div> 

  //*****CSS file

  .crop img {width:850px; height:791px; margin: 0px;border-bottom:0} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:37:46.190

添加两个可用于样式的类，一个用于不应该并排的类，一个用于应该并排的类。

```
<div class="crop">
   <img src ="QATables/image1.png" class="vertical">
   <img src ="QATables/image2.png" class="vertical">
   <img src ="QATables/image3.png" class="vertical">
   <img src ="QATables/image4.png" class="vertical">     
   <img src ="QATables/image5.png" class="horizontal">
   <img src ="QATables/image6.png" class="horizontal">
</div> 
```

然后你做这样的事情：

```
.vertical {
    margin-bottom: 10px;
    display: block; /* Force images to be shown vertically */
}

.horizontal {
    float: left;
} 
```

[**演示**](http://jsfiddle.net/ubWu6/1/)

# vb.net - 将数组保存在文本文件中

> ID：14347361
> 
> 赞同：0
> 
> 时间：2013-01-15T21:34:32.880
> 
> 标签：vb.net

我在 VB 中有一个带有数字的数组。如何将其保存在 txt 文件中？

例如，在 R 中，我这样做：“write.matrix(A,file=name)”。所以带有“名称”的数组也存储在 VB 中，我想在这里做同样的事情。

问候，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:38:09.543

您可以将其写入 csv 文件，fe 管道分隔（因为数字可以包含逗号）：

```
File.WriteAllText(filePath, String.Join("|", numbers)) 
```

[`File.WriteAllText`方法](http://msdn.microsoft.com/en-us/library/ms143375.aspx)

您可以稍后以这种方式加载数组：

```
Dim split = From str In File.ReadAllText(filePath).Split("|"c)
            Select Double.Parse(str)
Dim numbers As Double() = split.ToArray() 
```

# r - R pch 在 illustator 中绘制为“q”

> ID：14347362
> 
> 赞同：11
> 
> 时间：2013-01-15T21:34:33.380
> 
> 标签：r, lattice, adobe-illustrator, inkscape

每次我使用 pch=21 用格子在 R 中绘图时，我的绘图通常在 R 绘图窗口和 pdf 中绘图（带边框的圆圈）；但是，当我在 Adob​​e Illustrator 或 Inkscape 中打开保存的 pdf 版本的绘图时，这些点奇怪地转换为“q”。谁能解释一下？这很令人沮丧，因为我想在 Illustrator 或 Inkscape 中编辑我的情节。

![在此处输入图像描述](../Images/39301a779b1a4d8fc9017dccfcf65317.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-15T21:35:52.450

我想你可能想使用：

```
 useDingbats = FALSE 
```

如：

```
pdf("myplot.pdf", useDingbats=FALSE)
plot()
dev.off() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-15T21:55:55.373

`?pdf`拥有：

```
 On some systems the default plotting character ‘pch = 1’ is
 displayed in some PDF viewers incorrectly as a ‘"q"’ character.
 (These seem to be viewers based on the ‘poppler’ PDF rendering
 library).  This may be due to incorrect or incomplete mapping of
 font names to those used by the system.  Adding the following
 lines to ‘~/.fonts.conf’ or ‘/etc/fonts/local.conf’ may circumvent
 this problem.

 <fontconfig>    
 <alias binding="same">
   <family>ZapfDingbats</family>
   <accept><family>Dingbats</family></accept>
 </alias>
 </fontconfig>  

 Some further workarounds for problems with symbol fonts on viewers
 using ‘fontconfig’ are given in the ‘Cairo Fonts’ section of the
 help for ‘X11’. 
```

该 fontconfig 声明过去（现在仍然）在我的 Linux 机器上对我有用。我建议您设置它或阅读最后引用的句子中指示的其他页面，看看这些是否解决了您所看到的问题。

# java - Java 6：如何设置 UndoManager 以使用画布？

> ID：14347363
> 
> 赞同：1
> 
> 时间：2013-01-15T21:34:39.060
> 
> 标签：java, swing, canvas, jpanel, undo

我正在尝试设置`UndoManager`一个类似绘画的程序，但不幸地失败了。我一直在看的示例程序是文本编辑器（[Example](http://www.example8.com/node/view/id/18933)），它们调用`addUndoableEditListener`class的方法`JTextComponent`。

我应该如何设置 UndoManager 以使用画布？

```
public class Pisi extends JFrame implements MouseMotionListener, MouseListener,
    UndoableEditListener {
ArrayList<ArrayList<Point>> store = new ArrayList<ArrayList<Point>>();
ArrayList<Point> pts = new ArrayList<Point>();
ArrayList<Point> newRed;
ArrayList<Point> currentRed = new ArrayList<Point>();
JPanel panel;
Point start;
static int xsize = 500;
static int ysize = 350;
int listNumber = 0;
int lastPointed = -1;
int pointed = -1;
int clicked = -1;
UndoManager undoManager = new UndoManager();
UndoAction undoAction = new UndoAction();
RedoAction redoAction = new RedoAction();
protected MyUndoableEditListener l = new MyUndoableEditListener();

public Pisi() {
    panel = new JPanel() {
        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
        }
    };
    setSize(xsize, ysize);
    setResizable(false);
    getContentPane().setLayout(null);
    getContentPane().add(panel);
    setLocationRelativeTo(null);
    setVisible(true);
    panel.setLocation(0, -11);
    this.addMouseMotionListener(this);
    this.addMouseListener(this);
    **this.addUndoableEditListener(this);**
}

public static void main(String[] args) {
    Pisi d = new Pisi();
}

*... more code...*
} 
```

所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:25:51.913

您需要为所有应该可撤消/可重做的用户操作创建编辑类。这些类必须实现[UndoableEdit](http://docs.oracle.com/javase/6/docs/api/javax/swing/undo/UndoableEdit.html)（最好通过继承[AbstractUndoableEdit](http://docs.oracle.com/javase/6/docs/api/javax/swing/undo/AbstractUndoableEdit.html)）。然后，您可以将这些编辑类与[UndoManager](http://docs.oracle.com/javase/6/docs/api/javax/swing/undo/UndoManager.html)和[UndoableEditSupport](http://docs.oracle.com/javase/6/docs/api/javax/swing/undo/UndoableEditSupport.html)的实例一起使用。

您可以将 UndoableEdit 对象直接添加到 UndoManager（它有一个 addEdit 方法）。如果你想管理 UndoableEditListener 对象（例如通知菜单项或按钮），你可以使用 UndoableEditSupport - 它有你正在寻找的 addUndoableEditListener。

# pointers - 在链表元素中投射指针 - 为什么？

> ID：14347364
> 
> 赞同：1
> 
> 时间：2013-01-15T21:34:40.407
> 
> 标签：pointers, casting, struct

假设我有以下结构：

```
typedef struct elementT {
  int value;
  struct element *next;
} element; 
```

这样做有什么区别：

```
element *newElem;
newElem = malloc(sizeof(element)) 
```

这样做：

```
element *newElem;
newElem = (element *) malloc(sizeof(element)) 
```

从我的角度来看，在第一种情况下，我们正在做：

`element *newElem;`-> 为包含元素类型的地址创建一个指针。 `newElem = malloc(sizeof(element))`-> 使该指针指向 malloc 的结果。

为什么我们需要做 (element *)，或者它为什么有用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:36:25.877

它来自旧式 C，其中`void *`并没有真正被允许，所以一切都返回`char *`，这将导致编译器生成一个警告，指出您正在分配不兼容的指针类型，而强制转换只是摆脱这个警告的一种方法。较新的编译器知道您要做什么，因此不需要强制转换（在某些情况下，例如 Linux 内核 vmalloc 函数除外）。

# excel - Excel过滤列中的重复项和总和值

> ID：14347368
> 
> 赞同：0
> 
> 时间：2013-01-15T21:35:07.513
> 
> 标签：excel

例如：

```
|Apples|2|
|Apples|3|
|Pears |4|
|Pears |2| 
```

会导致：

```
|Apples|5|
|Pears |6| 
```

但它们不是这样分组的。

我被要求为一个朋友做这个，我是一个 Linux 用户，我通常会在 Python 中做这种事情，但他们需要在他们的 Excel 电子表格中。我希望 VB 宏会是这样做的方式，但任何方法都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:38:46.857

不需要**VBA**。

这将工作得很好：

```
=SUMIF($A:$A,C1,$B:$B) 
```

假设您的原始数据在 A、B 列中，并且您的单个水果项目在 C 列中，而您的公式在 D 列中。然后您可以针对 C 列中的单个项目填写该列的公式。您还可以附加行限制到`A:A`and`B:B`范围，如果你愿意的话。

另一个简单的解决方案是使用 a`pivot table`按组对数据求和。

# jquery - jQuery：切碎 ajax'ed HTML 然后将其注入 DOM

> ID：14347371
> 
> 赞同：1
> 
> 时间：2013-01-15T21:35:19.767
> 
> 标签：jquery

我正在通过 jQuery $.ajax() 方法从远程源加载一些 html。

在将 html 插入 DOM 之前，我想将它分成三部分并将每个单独的部分插入到我的 DOM 的特定区域中。

例如，假设我通过 $.ajax() 函数加载以下内容：

```
<div class='first'>First</div>
<div class='second'>Second</div>
<div class='third'>Third</div> 
```

并希望将其插入到连接到 DOM 的此页面中：

```
<div class='firstHome'>Some content I want replaced.</div>
<div class='secondHome'>More content to replace.</div>
<div class='thirdHome'>Final location for content.</div> 
```

这将导致：

```
<div class='firstHome'><div class='first'>First</div></div>
<div class='secondHome'><div class='second'>Second</div></div>
<div class='thirdHome'><div class='third'>Third</div></div> 
```

如何使用 jQuery 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:38:31.920

从返回的 html 中选择内容并附加它。

```
var $frag = $(returnedhtml);

$(".firstHome").html($frag.find(".first").addBack(".first"));
$(".secondHome").html($frag.find(".second").addBack(".second"));
$(".thirdHome").html($frag.find(".third").addBack(".third")); 
```

上面的代码只适用于 jQuery 1.9+，对于以前的版本，使用这个：

```
var $frag = $(returnedhtml);

$(".firstHome").html($frag.find(".first").andSelf().filter(".first"));
$(".secondHome").html($frag.find(".second").andSelf().filter(".second"));
$(".thirdHome").html($frag.find(".third").andSelf().filter(".third")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:40:32.550

一个简单的[each()](http://api.jquery.com/each/)循环应该可以完成工作：

```
$(yourContent).each(function() {
    $("." + this.className + "Home").empty().append(this);
}); 
```

# python - sqlalchemy：如何组织制作新的类实例？

> ID：14347372
> 
> 赞同：0
> 
> 时间：2013-01-15T21:35:22.660
> 
> 标签：python, sqlalchemy, flask, relationship

我有一个运行 sqlalachemy 的 Flask 应用程序。我对 sqlalchemy 很陌生，所以我真的很困惑。我做了一堆课程：

用户课程讲义队列资产

都有关系——用户有很多课程，课程有很多用户，用户有很多讲座，讲座有很多用户，用户有很多笔记，笔记有很多用户，课程有很多讲座，讲座有很多笔记，课程有很多笔记，讲座有一个1对1的队列，一个用户可以有很多队列，一个队列需要很多用户，等等

所以每当我创建一个讲座时，我是否也必须在与之相关的所有其他事情中实例化它？

例如，这是我为制作新讲座而编写的代码

```
def createLecture(user, course):
    # user and course are existing objects fetched from the db already
    # create new lecture
    newLecture = Lecture()
    db.session.add(newLecture)

    # add lecture to course, add new queue to lecture, add user to queue, add user to lecture
    course.lectures.append(newLecture)
    lecture.users.append(user)
    newQueue = Queue()
    db.session.add(newQueue)
    newQueue.users.append(user)
    newQueue.lecture = newLecture
    db.session.commit()

    return newLecture 
```

这让我觉得非常复杂和令人困惑。除了令人困惑之外，我什至不知道我是否涵盖了我应该建立的所有关系（很容易忘记有这么多的关系）。

当新对象与具有各种关系的许多其他对象相关联时，必须有一些更好的方法来添加新对象。

我怎样才能更有条理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:18:37.343

由于这是一个复杂的数据库模式，我仔细检查了每一个关系并确保它被正确指定。

**在检查我的模式时，我认为当对象被实例化时**可以实现一些关系，这是减少代码混乱的最好方法。

所以我上面的例子写成：

```
def createLecture(user, course):
# create new lecture
now = datetime.now()
dt = now.strftime("%Y-%m-%d-%H-%M")
newLecture = Lecture(dt, course)
db.session.add(newLecture)

# add lecture to course, add new queue to lecture, add user to queue, add new user to lecture
newQueue = Queue(newLecture)
db.session.add(newQueue)
newLecture.users.append(user)
newQueue.users.append(user)
newLecture.groupID = pad.createGroupIfNotExistsFor(newLecture.course.name+dt)['groupID']

db.session.commit()
return newLecture 
```

# java - 由于网络原因，Android App 意外关闭

> ID：14347378
> 
> 赞同：0
> 
> 时间：2013-01-15T21:35:52.443
> 
> 标签：java, android, sockets, connect

我正在开发我的第一个 android 应用程序。到目前为止，我的笔记本电脑上运行着一个小型服务器，并从 eclipse android 工具包（4.0.3）的示例中获取了“Skeleton App”示例。我试图加入一个基本的 Socket 连接，最终发送字符串。该应用程序曾经抛出一个 IO premission denied 异常，但是一旦我添加了以下行：

`<uses-permission android:name="android.permission.INTERNET"/>`

该应用程序只是意外关闭。如果该行不存在，则应用程序不会关闭，但是我当然会遇到该异常。

这是我的代码：

服务器：

```
public class net {
    public static void main(String [] args){
            ServerSocket ss;
            try {
                    ss = new ServerSocket(10017);
                    System.out.println("waiting");
                    Socket newSock = ss.accept();
                    System.out.println("success!");
            } catch (IOException e) {
                    System.out.println("FAIL");
                    e.printStackTrace();
            }
    } 
```

}

客户（我添加并调用了 buildNet() 方法）：

```
public class SkeletonActivity extends Activity {

static final private int BACK_ID = Menu.FIRST;
static final private int CLEAR_ID = Menu.FIRST + 1;
static private int port = 10013;
static private String address;
static Socket sock;

private EditText mEditor;

public SkeletonActivity() {
}

/** Called with the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Inflate our UI from its XML layout description.
    setContentView(R.layout.skeleton_activity);

    // Find the text editor view inside the layout, because we
    // want to do various programmatic things with it.
    mEditor = (EditText) findViewById(R.id.editor);

    // Hook up button presses to the appropriate event handler.
    ((Button) findViewById(R.id.back)).setOnClickListener(mBackListener);
    ((Button) findViewById(R.id.clear)).setOnClickListener(mClearListener);

    //
    //THIS IS WHERE BUILD NET IS CALLED. ITS RESULT IS RETURNED AND PRINTED TO THE
    //SCREEN OF THE APP
    //
    mEditor.setText(buildNet());
}

/**
 * Called when the activity is about to start interacting with the user.
 */
@Override
protected void onResume() {
    super.onResume();
}

public String buildNet(){
    FileWriter fstream= null;
    BufferedWriter out = null;

    try {
        address = "192.168.1.122";
        sock = new Socket(address, port);
        return "YES";
    } catch (UnknownHostException e) {
        return "UNKNOWN HOST";
    } catch (IOException e) {
        return e.getMessage();
    }
}

/**
 * Called when your activity's options menu needs to be created.
 */
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    // We are going to create two menus. Note that we assign them
    // unique integer IDs, labels from our string resources, and
    // given them shortcuts.
    menu.add(0, BACK_ID, 0, R.string.back).setShortcut('0', 'b');
    menu.add(0, CLEAR_ID, 0, R.string.clear).setShortcut('1', 'c');

    return true;
}

/**
 * Called right before your activity's option menu is displayed.
 */
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);

    // Before showing the menu, we need to decide whether the clear
    // item is enabled depending on whether there is text to clear.
    menu.findItem(CLEAR_ID).setVisible(mEditor.getText().length() > 0);

    return true;
}

/**
 * Called when a menu item is selected.
 */
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case BACK_ID:
        finish();
        return true;
    case CLEAR_ID:
        mEditor.setText("");
        return true;
    }

    return super.onOptionsItemSelected(item);
}

/**
 * A call-back for when the user presses the back button.
 */
OnClickListener mBackListener = new OnClickListener() {
    public void onClick(View v) {
        finish();
    }
};

/**
 * A call-back for when the user presses the clear button.
 */
OnClickListener mClearListener = new OnClickListener() {
    public void onClick(View v) {
        mEditor.setText("");
    }
}; 
```

}

清单.XML：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2007 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<!-- This file describes the code in the SkeletonApp package, which is
     used by the system to determine how to start your application and
     integrate it with the rest of the system.  -->

<!-- Declare the contents of this Android application.  The namespace
     attribute brings in the Android platform namespace, and the package
     supplies a unique name for the application.  When writing your
     own application, the package name must be changed from "com.example.*"
     to come from a domain that you own or have control over. -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.skeletonapp">

<uses-permission android:name="android.permission.INTERNET"/>

<uses-sdk android:targetSdkVersion="11"/>
<!-- This package contains an application...  The 'label' is the name
     to display to the user for the overall application, and provides
     a default label for all following components.  The syntax here is a
     reference to one of our string resources.-->
<application android:label="@string/skeleton_app">

    <!-- An Activity in the application - this is something the user
         can launch and interact with.  The "name" attribute is the
         name of the class within your package that implements this
         activity. -->
    <activity android:name="SkeletonActivity">

        <!-- An IntentFilter tells the system when it should use your
             activity.  This allows the user to get to your activity
             without someone having to explicitly know to launch your
             class "com.examplel.android.skeletonapp.SkeletonActivity". -->
        <intent-filter>
            <!-- The MAIN action describes a main entry point into an
                 activity, without any associated data. -->
            <action android:name="android.intent.action.MAIN" />

            <!-- This places this activity into the main app list. -->
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>

</application> </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:47:58.910

你很可能得到一个`NetworkOnMainThreadException`. 你应该把你的电话`buildNet()`放在 an`AsyncTask`和 in 中`onPostExecute`，返回结果（`String`在你的情况下是 a ），并将其设置为`TextView`.

[这是](http://developer.android.com/reference/android/os/AsyncTask.html)使用`AsyncTask`.

# android - 使用 AChartEngine，左轴网格的颜色可以与右轴网格不同吗？

> ID：14347379
> 
> 赞同：2
> 
> 时间：2013-01-15T21:35:56.017
> 
> 标签：android, achartengine

我正在使用 AChartEngine 有两个 Y 轴。我遇到的问题是两个轴不对齐，并且什么轴对应什么线非常令人困惑。0分甚至不排队。

```
 renderer.setApplyBackgroundColor(true);
    renderer.setBackgroundColor(Color.BLACK);

    renderer.setAxesColor(Color.LTGRAY);
    renderer.setPointSize(14);

    renderer.setChartTitle( "Waves" );

    renderer.setShowGrid(true);
    renderer.setXLabels( 10 );
    renderer.setYLabels( 10 );
    renderer.setXLabelsAlign(Align.RIGHT);
    renderer.setYLabelsAlign(Align.RIGHT, 0);
    renderer.setZoomButtonsVisible(true);
    renderer.setPanLimits(new double[] { vdiMin, vdiMax, netMin, netMax });
    renderer.setZoomLimits(new double[] { vdiMin, vdiMax, netMin, netMax });
    renderer.setZoomRate(1.05f);

    renderer.setLabelsColor(Color.WHITE);
    renderer.setXLabelsColor(Color.WHITE);
    renderer.setYLabelsColor(0, Color.WHITE);
    renderer.setYLabelsColor(1, Color.WHITE);

    if( spinnerChoice == 0 ) {
        renderer.setYTitle("Diff Volts", 1);
    } else {
        renderer.setYTitle( "Current", 1 );
    }
    renderer.setYTitle( "Net Volts", 0 );
    renderer.setYAxisAlign(Align.RIGHT, 1);
    renderer.setYLabelsAlign(Align.LEFT, 1); 
```

有谁知道将两个轴对齐为 0 或绘制不同颜色的网格线的方法？

使用`renderer.setAxesColor( Color.LTGRAY )`，我尝试调整它以使用缩放数字，但它不起作用。

```
renderer.setAxesColor( Color.LTGRAY, 1 );
    or
renderer.setAxesColor( 1, Color.LTGRAY ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:18:41.427

到目前为止，还没有办法让单独的 Y 轴有不同颜色的网格线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:17:38.423

您可以为两者设置一些 Y 固定范围，例如它们对齐。例如：

```
renderer.setYAxisMin(0, 0);
renderer.setYAxisMax(10, 0);
renderer.setYAxisMin(0, 1);
renderer.setYAxisMax(100, 1); 
```

要设置网格颜色，您需要调用`renderer.setGridColor(color)`，但这还不支持多个比例。

# sql-server - 部署问题 - 可以通过编辑 XML 覆盖 EncryptSensitivewithUSERKEY 默认值吗？

> ID：14347383
> 
> 赞同：-1
> 
> 时间：2013-01-15T21:36:21.263
> 
> 标签：sql-server, ssis

我们将在我的机器上运行良好的 SSIS 包移动到不同的环境

我们收到错误消息无法解密受保护的 XML 节点“DTS:Password”，错误为 0x8009000B。因此，我们尝试通过 XML 编辑器将所有包中的保护级别更改为 0，但我们仍然收到相同的消息。

如果我们使用 DontSaveSensitive 重新保存我机器上的所有包并将它们部署到其他环境，我们是否肯定会摆脱该消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:52:24.560

1.  当您将软件包保存在服务器上时，它默认加密敏感部分到您的登录名。
2.  当您将 xml 中的保护级别更改为 0 时，您并没有导致它自己解密，它仍然是加密的，只是不再知道它是如何加密的。
3.  是的，如果您使用 Don't Save Sensitive 从源重新保存包，则生成的文件将不会被加密，并且将在具有相同 SSIS 版本级别的任何计算机上正常运行（假设它们没有其他问题）。
4.  请参阅上面我的评论中 billinkc 对另一个问题的回答。它很好地概述了保护级别在 SSIS 中的工作方式。

# java - 爪哇。GUI WindowBuilder 通过单击按钮将文本从 JTextField 打印到面板

> ID：14347389
> 
> 赞同：0
> 
> 时间：2013-01-15T21:36:32.117
> 
> 标签：java, swing, user-interface, jbutton, jtextfield

> **可能的重复：**
> [Java。GUI WindowBuilder 通过单击按钮从 JTextField 读取](https://stackoverflow.com/questions/14345854/java-gui-windowbuilder-read-from-jtextfield-by-clicking-button)

我想问如何通过单击按钮将文本从 JTextField 打印到面板？请问你能帮帮我吗？

这是我的程序的图像：

![在此处输入图像描述](../Images/41459ee5664aa79994373629ec3b2271.png)

**JTextField** - 我输入要打印的文本的字段。

**打印按钮**- 当我单击它时，我的文本将在面板上发布。

**Text text text** ... - 我想查看输入到 JTextField 的打印文本的地方。

这是我的完整代码：

```
import java.awt.EventQueue;    
import javax.swing.JFrame;
import javax.swing.JPanel;
import java.awt.BorderLayout;
import javax.swing.JTextPane;
import javax.swing.DropMode;
import javax.swing.JFormattedTextField;
import java.awt.Component;
import javax.swing.Box;
import java.awt.Dimension;
import javax.swing.JTextField;
import javax.swing.JTextArea;
import javax.swing.UIManager;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.Toolkit;
import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JMenuItem;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.ImageIcon;
import javax.swing.JDesktopPane;
import java.awt.SystemColor;
import java.awt.Font;
import javax.swing.border.BevelBorder;
import javax.swing.border.EtchedBorder;
import javax.swing.JScrollBar;
import java.awt.Color;
import javax.swing.JLabel;
import javax.swing.JToolBar;

public class KDVizualizuotas {

    private JFrame frmInformacijaApieMuzikos;
    private JTextField txtStilius;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    KDVizualizuotas window = new KDVizualizuotas();
                    window.frmInformacijaApieMuzikos.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public KDVizualizuotas() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frmInformacijaApieMuzikos = new JFrame();
        frmInformacijaApieMuzikos.setResizable(false);
        frmInformacijaApieMuzikos.setIconImage(Toolkit.getDefaultToolkit().getImage(KDVizualizuotas.class.getResource("/lt/kvk/i3_2/kalasnikovas_stanislovas/resources/Sidebar-Music-Blue-icon.png")));
        frmInformacijaApieMuzikos.setTitle("Muzikos stiliai");
        frmInformacijaApieMuzikos.setBounds(100, 100, 262, 368);
        frmInformacijaApieMuzikos.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        txtStilius = new JTextField();
        txtStilius.setBounds(10, 34, 128, 20);
        txtStilius.setColumns(10);

        JButton btnIekoti = new JButton("Ie\u0161koti");
        btnIekoti.setBounds(146, 36, 89, 19);
        btnIekoti.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

            }
        });

        JPanel panel = new JPanel();
        panel.setBounds(10, 65, 224, 243);
        panel.setBorder(new EtchedBorder(EtchedBorder.LOWERED, null, null));
        panel.setBackground(SystemColor.text);

        JLabel lblveskiteMuzikosStili = new JLabel("\u012Eveskite muzikos stili\u0173:");
        lblveskiteMuzikosStili.setBounds(10, 14, 222, 14);
        frmInformacijaApieMuzikos.getContentPane().setLayout(null);
        panel.setLayout(null);

        JScrollBar scrollBar = new JScrollBar();
        scrollBar.setBounds(205, 1, 17, 242);
        panel.add(scrollBar);

        JPanel panelStiliuTekstas = new JPanel();
        panelStiliuTekstas.setBackground(Color.WHITE);
        panelStiliuTekstas.setBounds(1, 22, 202, 221);
        panel.add(panelStiliuTekstas);
        panelStiliuTekstas.setLayout(null);
        frmInformacijaApieMuzikos.getContentPane().add(panel);

        JLabel lblInformacijaApieMuzikos = new JLabel("Informacija apie muzikos stili\u0173:");
        lblInformacijaApieMuzikos.setBounds(12, 3, 190, 14);
        panel.add(lblInformacijaApieMuzikos);
        frmInformacijaApieMuzikos.getContentPane().add(txtStilius);
        frmInformacijaApieMuzikos.getContentPane().add(btnIekoti);
        frmInformacijaApieMuzikos.getContentPane().add(lblveskiteMuzikosStili);

        JMenuBar menuBar = new JMenuBar();
        frmInformacijaApieMuzikos.setJMenuBar(menuBar);

        JMenu mnFile = new JMenu("File");
        menuBar.add(mnFile);

        JMenuItem mntmExit = new JMenuItem("Exit");
        mntmExit.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                System.exit(0);             
            }

        });
        mntmExit.setIcon(new ImageIcon(KDVizualizuotas.class.getResource("/lt/kvk/i3_2/kalasnikovas_stanislovas/resources/exitas.png")));
        mnFile.add(mntmExit);

        JMenu mnEdit = new JMenu("Edit");
        menuBar.add(mnEdit);

        JMenu mnHelp = new JMenu("Help");
        menuBar.add(mnHelp);

        JMenuItem mntmHelp = new JMenuItem("Help");
        mnHelp.add(mntmHelp);

        JMenu mnAbout = new JMenu("About");
        menuBar.add(mnAbout);

        JMenuItem mntmAbout = new JMenuItem("About");
        mntmAbout.setIcon(new ImageIcon(KDVizualizuotas.class.getResource("/lt/kvk/i3_2/kalasnikovas_stanislovas/resources/questionmark.png")));
        mnAbout.add(mntmAbout);
    }
} 
```

我认为这是我的代码的有用块。：

```
private void initialize() {
frmInformacijaApieMuzikos = new JFrame();
frmInformacijaApieMuzikos.setResizable(false);
frmInformacijaApieMuzikos.setIconImage(Toolkit.getDefaultToolkit().getImage(KDVizualizuotas.class.getResource("/lt/kvk/i3_2/kalasnikovas_stanislovas/resources/Sidebar-Music-Blue-icon.png")));
frmInformacijaApieMuzikos.setTitle("Muzikos stiliai");
frmInformacijaApieMuzikos.setBounds(100, 100, 262, 368);
frmInformacijaApieMuzikos.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

txtStilius = new JTextField();
txtStilius.setBounds(10, 34, 128, 20);
txtStilius.setColumns(10);

JButton btnIekoti = new JButton("Ie\u0161koti");
btnIekoti.setBounds(146, 36, 89, 19);
btnIekoti.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:53:38.873

您将文本打印到[`JTextArea`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html)而非 JPanel 的示例屏幕截图。如果您单击我刚刚给出的链接，您应该能够找到一种将文本打印到 JTextArea 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:06:02.577

在您的 Button 操作中添加以下行：

`jTextArea1.append(txtStilius.getText()+"\n");`

其中**jTextArea1**是您要查看输入到 JTextField 的打印文本的位置

# ruby-on-rails - YouTube API v3 为所有频道返回 0 个订阅者

> ID：14347391
> 
> 赞同：2
> 
> 时间：2013-01-15T21:36:34.987
> 
> 标签：ruby-on-rails, ruby, youtube, youtube-api

当设置参数 mySubscribers=true 时，YouTube API v3 会为所有频道列表查询返回 0 的订阅者计数值。如果我使用替代的“channelId”或“mine”参数，subscriberCount 是准确的。

以下是对文档的参考： [https ://developers.google.com/youtube/v3/docs/channels/list](https://developers.google.com/youtube/v3/docs/channels/list)

为了简单起见，我将部分设置为 id 和 statistics 以获取频道信息。这是（测试版）API 的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:57:19.490

I has the same problem, right now for this metric you can use YouTube Data API v2, like this:

```
http://gdata.youtube.com/feeds/api/users/{USER-ID-OR-USERNAME}?v=2&alt=json 
```

And get this metric from yt$statistics->subscriberCount

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:48:50.457

它对我有用。你在认证吗？如果你设置了 mySubscribers=true 而没有设置 mine=true（如果两者都设置为 true，你会得到一个错误），你应该得到一个列表。在该列表中应该是 pageInfo -> totalResults，它应该告诉您数字。

[以下是来自 API Explorer ( https://developers.google.com/youtube/v3/docs/channels/list#try-it](https://developers.google.com/youtube/v3/docs/channels/list#try-it) )的正确调用示例：

获取[https://www.googleapis.com/youtube/v3/channels?part=id%2Cstatistics&mySubscribers=true&key=](https://www.googleapis.com/youtube/v3/channels?part=id%2Cstatistics&mySubscribers=true&key=) {YOUR_API_KEY}

授权：承载 ya29.blahblah X-JavaScript-User-Agent：Google APIs Explorer

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-22T12:21:06.727

```
Get Subscribers count by following way using V3 api     
    URLString =[NSString stringWithFormat:@"https://www.googleapis.com/youtube/v3/channels?part=id&mySubscribers=true&access_token=%@",accessToken]    

        Response

         etag = "\"sGDdEsjSJ_SnACpEvVQ6MtTzkrI/0_NpYsUUR0M4UrddABQ5GlAx0aA\"";
                items =     (
                            {
                        etag = "\"sGDdEsjSJ_SnACpEvVQ6MtTzkrI/I5mDLVKzrHCsmda5ZyJOe_6dhQ0\"";
                        id = uhjUCDMMDlm9PwDGiMdfV7QeIRgasd;
                        kind = "youtube#channel";
                    },
                            {
                        etag = "\"sGDdEsjSJ_SnACpEvVQ6MtTzkrI/kUNuk7bhfC8iuWaAUvnBzbv3ZdM\"";
                        id = hjvhUCdMacPC0kNs1h3O1amJ2Mdwnv;
                        kind = "youtube#channel";
                    }
                );
                kind = "youtube#channelListResponse";
                pageInfo =     {
                    resultsPerPage = 5;
                    totalResults = 3;   ////// Subscribers Count
                };
            } 
```

# php - 上传文件到站点，就像 API

> ID：14347398
> 
> 赞同：-3
> 
> 时间：2013-01-15T21:37:02.620
> 
> 标签：php, curl, compilation, java

我有一个很难或可能很简单的问题要问你们你们中是否有人知道如何做以下事情：

我找到了一个网站 [http://www.innovation.ch/java/java_compile.html](http://www.innovation.ch/java/java_compile.html)

我想将它用于我自己的网站

因此，当我将文件放在目录中时，它会自动将其上传到该站点例如“源文件 1”和“Jar 文件 1”中的另一个文件

之后，它必须按下 1.7.0 选项，然后必须单击编译。

如果这样做了，则必须在执行编译命令时下载 allclasses.zip 文件

我不确定这是否可能，但我很好奇？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:41:21.817

您可以很容易地编写与 Web 交互的脚本，例如考虑 Perl 或 Ruby 的 Mechanize、[http://metacpan.org/pod/WWW::Mechanize、http](http://metacpan.org/pod/WWW::Mechanize) : [//mechanize.rubyforge.org/](http://mechanize.rubyforge.org/)，或者使用 Selenium ：[http](http://seleniumhq.org/) ://seleniumhq.org/ 。

# windows - ZIP 和库上下文菜单问题

> ID：14347399
> 
> 赞同：0
> 
> 时间：2013-01-15T21:37:03.563
> 
> 标签：windows, menu, registry

我正在为 Windows（当前为 7）开发一个基于上下文菜单的实用程序，但我遇到了一些问题。

您可能知道，要为文件和/或文件夹创建上下文菜单，您必须分别在以下位置创建键：

1.  `HKCR\*\Shell\`
    和
2.  `HKCR\Directory\Shell\`

## 问题

1.  右键单击`ZIP`文件时，会出现文件夹上下文菜单，而我想要文件上下文菜单。
2.  文件的文件上下文菜单`URL`仅在与库中交互时出现，如您在此处看到的：

    非图书馆互动 ![在此处输入图像描述](../Images/bc02c0e49dc7ecb158893ccf73bd885a.png)

    图书馆互动 ![在此处输入图像描述](../Images/50a310485fbd4f4b833741fb76d1685b.png)

3.  文件的上下文菜单命令`LNK`仅在与库中交互时执行

# node.js - 使用socket io同时为多个用户服务的实际方法是什么？

> ID：14347406
> 
> 赞同：0
> 
> 时间：2013-01-15T21:37:29.037
> 
> 标签：node.js, webserver, express, websocket, socket.io

我想在许多用户组之间建立实时连接，而且我是服务器端脚本的新手............我想向某些用户发送某些消息（数据），现在我的问题是如何是否要为所有用户使用相同的套接字，或者为不同的用户或不同的任务使用不同的套接字连接..？

目前我只是使用单个套接字并以这种方式为用户提供服务。这不是实际的应用程序，它只是我将要做的事情的原型：

```
var io = require('socket.io').listen(server);
server.listen(http_port);

var allUsers=[];
var num=1;
io.sockets.on('connection', function (socket) {    
var user = 'user#'+num++;
allUsers[user] = socket;
socket.on('message',function(data){
    if(data.to)
        allUsers[data.to].emit("message",{msg:data.msg,by:data.by});
    });
}); 
```

客户端：

```
 socket.emit('message',{to:'user#1',from:'talha',msg:'hello'}); 
```

也许，我采用了错误的方法，因为稍后我将查询数据库将这些结果发送给特定的客户，我该如何管理。请提供一些代码详细信息以及您的答案.. 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:51:48.763

不，你只有一个监听套接字。在每个连接上（从 中可以看出`io.sockets.on('connection', function(socket){..`），您的`function(socket){....}`被调用并且该函数中的套接字与每个连接/用户相同。事件的函数回调`"connection"`是单独的，每个用户都有一个。

**编辑：** 对于用户分离用户，您可以执行以下操作：

```
var users = [];
io.sockets.on("connection", function(socket){
   socket.on("message", function(data){
        // Handle if it is a valid user, make some authentication and have a username..
        users[username] = socket;
        // on another message, if you want to send message  
        users["myuser"].send(...)
   }

}); 
```

# background-color - TableLayout 中的颜色显示不正确

> ID：14347408
> 
> 赞同：0
> 
> 时间：2013-01-15T21:37:37.907
> 
> 标签：background-color, tablelayout, textcolor

我以编程方式创建了一个 TableLayout。一切运作良好。除了背景颜色和文本颜色。我希望 TableLayout 的背景颜色为黑色，每个 TextView 的文本颜色应为白色。现在我在我的colors.xml 中设置了两种颜色（#fffff 和#000000），并将我的表格的BackgroundResource 设置为黑色，并将我的所有TextViews 的TextColor 设置为白色。但唯一显示的是黑屏，其中没有任何白色文字。我在我的代码中看不到任何错误。也许你可以 ;-）

```
public class ShowTableActivity extends Activity {

TableLayout t1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    t1 = createTable();
    fillTable();

    setContentView(t1);

}

public TableLayout createTable() {
    /** create table */
    TableLayout table = new TableLayout(this);
    table.setStretchAllColumns(true);
    table.setBackgroundResource(R.color.black);
    table.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));

    /** title column/row */
    TableRow rowTitle = new TableRow(this);
    rowTitle.setGravity(Gravity.CENTER_HORIZONTAL);

    TextView title = new TextView(this);
    title.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    title.setGravity(Gravity.CENTER_HORIZONTAL);
    title.setText("Liganame");
    title.setTextSize(20);
    title.setTextColor(R.color.white);
    TableRow.LayoutParams params = new TableRow.LayoutParams();
    params.span = 9;
    rowTitle.addView(title, params);

    /** header row */
    TableRow rowHeader = new TableRow(this);
    rowHeader.setGravity(Gravity.CENTER_HORIZONTAL);
    TableRow.LayoutParams params1 = new TableRow.LayoutParams();
    params1.setMargins(5, 5, 5, 5);

    TextView rangHeader = new TextView(this);
    rangHeader.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));

    TextView mannschaftsnameHeader = new TextView(this);
    mannschaftsnameHeader.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    TextView spieleHeader = new TextView(this);
    spieleHeader.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    spieleHeader.setGravity(Gravity.CENTER_HORIZONTAL);
    spieleHeader.setText("Sp");
    spieleHeader.setTextSize(16);
    spieleHeader.setTextColor(R.color.white);

    TextView siegeHeader = new TextView(this);
    siegeHeader.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    siegeHeader.setGravity(Gravity.CENTER_HORIZONTAL);
    siegeHeader.setText("S");
    siegeHeader.setTextSize(16);
    siegeHeader.setTextColor(R.color.white);

    TextView unentschiedenHeader = new TextView(this);
    unentschiedenHeader.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    unentschiedenHeader.setGravity(Gravity.CENTER_HORIZONTAL);
    unentschiedenHeader.setText("U");
    unentschiedenHeader.setTextSize(16);
    unentschiedenHeader.setTextColor(R.color.white);

    TextView niederlagenHeader = new TextView(this);
    niederlagenHeader.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    niederlagenHeader.setGravity(Gravity.CENTER_HORIZONTAL);
    niederlagenHeader.setText("N");
    niederlagenHeader.setTextSize(16);
    niederlagenHeader.setTextColor(R.color.white);

    TextView toreHeader = new TextView(this);
    toreHeader.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    toreHeader.setGravity(Gravity.CENTER_HORIZONTAL);
    toreHeader.setText("Tore");
    toreHeader.setTextSize(16);
    toreHeader.setTextColor(R.color.white);
    TableRow.LayoutParams params2 = new TableRow.LayoutParams();
    params2.span = 3;

    TextView differenzHeader = new TextView(this);
    differenzHeader.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    differenzHeader.setGravity(Gravity.CENTER_HORIZONTAL);
    differenzHeader.setText("Diff");
    differenzHeader.setTextSize(16);
    differenzHeader.setTextColor(R.color.white);

    TextView punkteHeader = new TextView(this);
    punkteHeader.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    punkteHeader.setGravity(Gravity.CENTER_HORIZONTAL);
    punkteHeader.setText("Pkt");
    punkteHeader.setTextSize(16);
    punkteHeader.setTextColor(R.color.white);

    rowHeader.addView(rangHeader, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    rowHeader.addView(mannschaftsnameHeader, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    rowHeader.addView(spieleHeader, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    rowHeader.addView(siegeHeader, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    rowHeader.addView(unentschiedenHeader, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    rowHeader.addView(niederlagenHeader, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    rowHeader.addView(toreHeader, params2);
    rowHeader.addView(differenzHeader, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    rowHeader.addView(punkteHeader, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    table.addView(rowTitle);
    table.addView(rowHeader, params1);

    return table;
}

public void fillTable() {

    TableRow tr = new TableRow(this);

    TextView rang = new TextView(this);
    TextView mannschaftsname = new TextView(this);
    TextView spiele = new TextView(this);
    TextView siege = new TextView(this);
    TextView unentschieden = new TextView(this);
    TextView niederlagen = new TextView(this);
    TextView tore = new TextView(this);
    TextView doppelpunkt = new TextView(this);
    TextView gegentore = new TextView(this);
    TextView differenz = new TextView(this);
    TextView punkte = new TextView(this);

    rang.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    rang.setGravity(Gravity.CENTER_HORIZONTAL);
    rang.setText("0");
    rang.setTextColor(R.color.white);

    mannschaftsname.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    mannschaftsname.setGravity(Gravity.CENTER_HORIZONTAL);
    mannschaftsname.setText("BBBBBBBBBB");
    mannschaftsname.setTextColor(R.color.white);

    spiele.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    spiele.setGravity(Gravity.CENTER_HORIZONTAL);
    spiele.setText("0");
    spiele.setTextColor(R.color.white);

    siege.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    siege.setGravity(Gravity.CENTER_HORIZONTAL);
    siege.setText("0");
    siege.setTextColor(R.color.white);

    unentschieden.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    unentschieden.setGravity(Gravity.CENTER_HORIZONTAL);
    unentschieden.setText("0");
    unentschieden.setTextColor(R.color.white);

    niederlagen.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    niederlagen.setGravity(Gravity.CENTER_HORIZONTAL);
    niederlagen.setText("0");
    niederlagen.setTextColor(R.color.white);

    tore.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    tore.setGravity(Gravity.CENTER_HORIZONTAL);
    tore.setText("0");
    tore.setTextColor(R.color.white);

    doppelpunkt.setLayoutParams(new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    doppelpunkt.setGravity(Gravity.CENTER_HORIZONTAL);
    doppelpunkt.setText(":");
    doppelpunkt.setTextColor(R.color.white);

    gegentore.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    gegentore.setGravity(Gravity.CENTER_HORIZONTAL);
    gegentore.setText("0");
    gegentore.setTextColor(R.color.white);

    differenz.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    differenz.setGravity(Gravity.CENTER_HORIZONTAL);
    differenz.setText("0");
    differenz.setTextColor(R.color.white);

    punkte.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    punkte.setGravity(Gravity.CENTER_HORIZONTAL);
    punkte.setText("0");
    punkte.setTextColor(R.color.white);

    tr.addView(rang, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    tr.addView(mannschaftsname, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    tr.addView(spiele, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    tr.addView(siege, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    tr.addView(unentschieden, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    tr.addView(niederlagen, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    tr.addView(tore, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    tr.addView(doppelpunkt, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    tr.addView(gegentore, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    tr.addView(differenz, new TableRow.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    tr.addView(punkte, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));

    t1.addView(tr, new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:40:12.710

经过大量研究解决了我的问题：

您必须输入 0xff000000（黑色）和 0xffffffff（白色），而不是使用 R.color.white 和 R.color.black。在第一个 2 ff 之后，颜色代码开始，所以你可以选择任何你想要的。

不要问我为什么要这样做。也许其他人可以在某个时候在这里解释一下。

# c++ - 为什么将 wcout/wcerr 重定向到 /dev/null 会导致程序崩溃？

> ID：14347413
> 
> 赞同：0
> 
> 时间：2013-01-15T21:38:01.333
> 
> 标签：c++, redirect, wofstream

考虑我的日志记录类

```
void LogWriter::InitLogWriter(void)
{
    wcout.flush();
    wcerr.flush();
    COUT_BACKUP = wcout.rdbuf(); // save original cout buffer
    CERR_BACKUP = wcerr.rdbuf(); //save original cerr buffer
    FileStreamOpen = false;
    switch(m_nTraceLvl)
    {
    case OffLevel:
        StopOutput();
        break;
    case ErrorLevel:
        OutputErrorsToFile(s_TraceFile);
        break;
    case DetailLevel:
        OutputAllToFile(s_TraceFile);
        break;
    default:
        StopOutput();
        break;
    }
    wcout << "Initialize Log Writer" << endl;
}
void LogWriter::OutputAllToFile(TCHAR* fileName)
{
    wstreambuf* fb = GetFileBufferStream(fileName);

    wcout.rdbuf(fb); // push wcout buffer to file
    wcerr.rdbuf(fb); // push cerr buffer to file

    FileStreamOpen = true;
}
void LogWriter::OutputErrorsToFile(TCHAR* fileName)
{
    wstreambuf* fb = GetFileBufferStream(fileName);
    wcerr.rdbuf(fb);
    FileStreamOpen = true;
    wofstream fout("/dev/null");
    wcout.rdbuf(fout.rdbuf()); // redirect 'cout' to a 'fout'
}
void LogWriter::StopOutput(void)
{
    wofstream fout("/dev/null");

    wcout.rdbuf(fout.rdbuf()); // redirect 'cout' to a 'fout'
    wcerr.rdbuf(fout.rdbuf()); // redirect cerr to fout
}
wstreambuf* LogWriter::GetFileBufferStream(TCHAR* fileName)
{
    filestr.open(fileName);
    return filestr.rdbuf();   // get file's streambuf
}
void LogWriter::Dispose()
{
    wcout << "Kill Log Writer" << endl;
    wcout.rdbuf(COUT_BACKUP); // restore the original stream buffer
    wcerr.rdbuf(CERR_BACKUP);

    if(FileStreamOpen)
    {
        filestr.close();
    }
} 
```

现在，如果我将 Tracing 设置为 DetailLevel (2)，一切都很好。我所有的日志记录都到文件中。但是如果我选择 OffLevel 或 ErrorLevel 我的程序崩溃.. 我的调试器没有打开所以我添加了 cout << "." 在每一行（我讨厌这样做，但它有效），它指向我

```
wcout.rdbuf(fout.rdbuf()); // redirect 'cout' to a 'fout' 
```

作为我的罪魁祸首......我首先转向重定向 wcout 并重定向 wcerr 并且它有效（但尚未调用 wcerr）

所以这是我的问题？我应该先处理 wcout 吗？我先尝试冲洗..那没有用..所以我不知道。我究竟做错了什么？

另外作为奖励..为什么在我关闭我的 LogWriter 之前我的所有输出都不会进入文件？IE LogWriter::Dispose()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:57:19.113

您崩溃是因为`wofstream fout("/dev/null");`它是在堆栈上创建的，并且在您退出函数后立即被销毁。

像对待文件一样对待“/dev/null”。也就是说，调用`OutputErrorsToFile("/dev/null")`inside `StopOutput()`。事实上，您甚至不需要 /dev/null，只需使用`wcout.rdbuf(NULL)`，也应该更快。

要立即写入文件，请调用 flush 或使用 std::flush 操纵器。

# http - 当 REST API 用户尝试访问对象并且出现错误时，使用哪个 HTTP 状态代码？

> ID：14347414
> 
> 赞同：7
> 
> 时间：2013-01-15T21:38:07.763
> 
> 标签：http, mongodb, rest, http-status-codes

我正在尝试找到要返回的正确状态代码，这是我目前所想到的：

1.  `GET /api/documents/1`- 文档存在，用户有权访问 - 200 OK
2.  `GET /api/documents/2`- 文档存在，用户无权访问 - 403 Forbidden
3.  `GET /api/documents/3`- 文档不存在（无法检查是否有访问权限） - 404 Not Found？403禁止？
4.  `GET /api/documents/a`- id 无效（应该是数字） - 400 Bad Request？404 未找到？403禁止？

目前我的后端（使用 MongoDB）的问题是，我要做的第一件事是检查用户是否有权访问文档，方法是对照他有权访问的文档 ID 列表检查该文档。如果在列表中没有找到document_id，则自动返回403 Forbidden。这有助于我避免首先从数据库中获取文档以查看用户是否可以访问它。

我不确定这里的最佳做法是什么——我应该追求更好的 HTTP 状态代码（从而创建额外的数据库请求）还是 403 Forbidden 也适用于最后两种情况（3 和 4）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T23:11:26.857

我建议#3 和 #4 都使用**404**。

> 1\. GET /api/documents/1 - 文档存在，用户有权访问 - 200 OK

**200**是合适的。

> 2\. GET /api/documents/2 - 文档存在，用户无权访问 - 403 Forbidden

**403**是合适的。

> 3\. GET /api/documents/3 - 文档不存在（无法检查是否有访问权限） - 404 Not Found？403禁止？

**[404](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5)**在这里是合适的，因为文档在指定的 URI 中不存在。

> 4\. GET /api/documents/a - id 无效（应该是数字） - 400 Bad Request？404 未找到？403禁止？

**[404](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5)**在这里仍然适用，因为在指定的 URI 上不存在资源。作为参考， **[400](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1)**指*的是格式错误的语法*，但 URI 和请求在语法上是完全有效的；只是您的服务器上没有相应的资源可用。

一般来说，您应该首先考虑 API 并遵循标准 HTTP 方法。这是否需要另一个内部数据库请求是一个实现细节。我建议避免过早的优化，尤其是那些会对您的客户产生如此直接影响的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:40:21.770

我会说使用用于场景 #3 的 HTTP 代码，使用 404（因为找不到资源，但如果找到的话，用户将拥有访问权限），对于场景 #4 使用 400（因为它确实是一个错误的请求）。

这口井可以帮助您的实施客户了解到底出了什么问题。特别是对于 404，它在许多系统中会在正常操作中出现（即查询登录凭据或类似的东西），客户端可能需要了解他们的请求未满足的确切原因。

我看不到返回正确的状态代码会如何导致更多的数据库请求。您仍然可以为合法的 403 用例返回 403。

# ios - MFMailComposeViewController 没有 html 的文本对齐 - 可能吗？

> ID：14347415
> 
> 赞同：0
> 
> 时间：2013-01-15T21:38:07.750
> 
> 标签：ios, objective-c, cocoa-touch

我想在我的应用程序中按一个按钮来创建一封电子邮件。代码工作正常，但我希望文本向右对齐。有可能吗？（找不到任何文档来支持这一点）

# javascript - 点击时让 Highcharts 工具提示消失

> ID：14347426
> 
> 赞同：1
> 
> 时间：2013-01-15T21:38:54.427
> 
> 标签：javascript, events, tooltip, highcharts, highstock

这是我的代码示例

[http://jsfiddle.net/pradeepbhat92/42uUG/](http://jsfiddle.net/pradeepbhat92/42uUG/)

我想要做的是让工具提示保持在标志上，直到用户转到另一个标志或单击工具提示/标志之外。高图表可以做到这一点吗？

到目前为止我发现的唯一线索是这条线

```
chart.tooltip.hide=function(){}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T23:48:18.650

**第一的**

`display: block`从你的 CSS 中删除。

**第二**

Revome`series`里面`plotOptions`，合并它`flags`。

**第三**

您必须`trigger chart.tooltip.hide()`在`chart`点击事件上而不是在`flag`.

```
chart: {
    renderTo: 'container',
    events: {
        click: function() {
            this.tooltip.hide();
        }
    }
} 
```

**第四**

为了防止其他系列上的工具提示，您必须检查系列，如果它是您想要阻止的系列，您可以简单地返回`false`。
因此，要在工具提示格式化程序中添加以下 if 语句。

```
if( this.points && this.points[0].series.options.id == 'dataseries' ) {
    return false;
} 
```

[**工作演示**](http://jsfiddle.net/ricardolohmann/8JpT3/)

# c++ - 带有标头的 C++ 委托构造函数

> ID：14347428
> 
> 赞同：2
> 
> 时间：2013-01-15T21:38:54.400
> 
> 标签：c++, visual-c++, c++11, constructor, visual-studio-2012

**委托构建问题：** 编译器错误 C2039：“{ctor}”不是 Logging::LogManager 的成员

我正在使用 Microsoft 的*C++ 2012 年 11 月 CTP 编译器*，而不是 Visual Studio 2012 中的默认编译器，因此我可以访问新的 C++ 功能（可变参数模板等）。

我正在尝试使用命名空间和头文件让委托构造工作......我不确定这是否属于尚未在 Visual Studio 2012 中实现的基本构造函数继承功能；所以，我可能不应该期望这会起作用：

你如何在 C++ 11 中做到这一点？

```
// LogManager.h extract

namespace Logging {
    class LogManager
    { 
private:
            static std::wstring defaultFileName;
            explicit LogManager(std::wstring logFileName);
            explicit LogManager();
          ~LogManager(void);
}

// LogManager.cpp extract
/********************************************************************
*****/
Logging::LogManager::LogManager(std::wstring fileName)
{}

/********************************************************************
*****/
Logging::LogManager::LogManager()
    : LogManager(defaultFileName) // Yields C2664     
 // : Logging::LogManager::LogManager(defaultFileName) // Yields C2039
 // : Logging::LogManager(defaultFileName) // Yields C2614 

{} 
```

错误 C2039：“{ctor}”：不是“Logging::LogManager”的成员

错误 C2614：“Logging::LogManager”：非法成员初始化：“LogManager”不是基础或成员

错误 C2664：“Logging::LogManager::LogManager(const Logging::LogManager &)”：无法将参数 2 从“std::wstring”转换为“const Logging::LogManager &”

**回答::** 根据 Microsoft 已知的已知错误，不能在头文件中使用显式关键字。

只有构造函数的第一个签名才能使用这个.. 解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:44:42.843

这似乎是 CTP 中的一个错误。它也出现在Stephan T. Lavavej 的[演讲](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/STLCCSeries6)中（见分钟 38:45）。

唯一可能的解决方法是删除`explicit`限定符，如果这在您的项目中是可以接受的。否则，只需避免委托给显式构造函数。

特别是，这与继承的构造函数*无关*，这是一个不同的功能，CTP 不支持（正如 Stephan T. Lavavej 在我链接的同一个演示文稿中所说 - 就在错误发生几分钟后）。

# ajax - 百里香 ajax 磁贴中的 Spring *{} 字段

> ID：14347431
> 
> 赞同：4
> 
> 时间：2013-01-15T21:38:57.247
> 
> 标签：ajax, tiles, spring-webflow-2, thymeleaf

我想知道是否有人可以提供帮助。

我正在开发一个 Spring/Webflow/Tiles/Thymeleaf 项目。一切进展顺利。我们有代表数据输入表单的图块，通常如下所示：

```
<form th:object="${questionnaire}">
    .... 
    <select th:field="*{title}>
        <option ..... 
    </select>
    .... 
    <input th:field="*{fname}" />
    <input th:field="*{lastname}" />
    .... 
</form> 
```

这运作良好。但是现在我们正在尝试为表单添加一些 ajax 魔法。基本上这个想法是，当一个按钮被按下时，它会触发一个 webflow 转换，它将在一个 tile 中呈现它的响应。这一切都很好......期待片段图块的内容。这个想法是新片段将是一些额外的表单字段。像这样的东西：

```
<div tiles:fragment="moreDetails">
    .... 
    <input th:field="*{phone}" />
    <input th:field="*{email}" />
    .... 
</div> 
```

webflow 和 tiles 部分正在工作，但是当 thymeleaf 尝试渲染 tile 时，它​​抱怨表单字段使用 *{} 语法引用属性，但没有包含在带有 th:object 的表单标签中

到目前为止，我们只提出了 2 个解决方法。我们可以将带有 th:object 的表单标签放在片段拼贴中，但这意味着我们在结果页面中有一个嵌套表单:( 我们发现我们可以做的另一件事是简单地在框架中写入输入字段name 属性而不是 th:field 两个“解决方案”都感觉不对

有谁知道是否有更好、对百里香叶更友好的方式来做到这一点？

干杯

弥敦道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:24:34.700

我在百里香论坛上发布了同样的问题，百里香的作者丹尼尔回答：http: [//forum.thymeleaf.org/Spring-fields-in-an-ajax-tile-td4025527.html](http://forum.thymeleaf.org/Spring-fields-in-an-ajax-tile-td4025527.html)

> “th:field”实际上是一种为输入的“name”、“id”和“value”赋予值的宏。因此，如果您不能直接使用 th:field，您可以将“name”和“id”分配给一个固定值，然后将“th:value”分配为：
> 
> ```
> <input id="phone" name="phone" th:value="${questionnaire.phone}" /> 
> ```
> 
> 问候，丹尼尔。

基本上，我已经提到的两种解决方法是实现这一目标的唯一方法。不理想（恕我直言），但至少我们有一个答案。

# css - 响应式网页设计 - 使用 px 值

> ID：14347432
> 
> 赞同：0
> 
> 时间：2013-01-15T21:39:01.147
> 
> 标签：css, mobile, responsive-design

在创建响应式网站时，我对大多数`width`和`height`声明使用百分比值。
怎么样`padding`-`margin`可以在那里使用`px`值还是我也应该使用百分比？

这两种方法都很清楚，我只是担心手机的一些奇怪行为（自动缩放或其他，我不知道）会搞砸一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:42:48.310

`px`几乎从来都不是最好的答案。如果你的意思是“百分比” `.5em`，是的，这通常是最好的。

但是设备制造商已经开始对浏览器撒谎，所以没有**什么**可以代替对实际设备的测试。照常。

（例如：iPad Mini 的屏幕比 iPad 小，因此您想使用更大的字体；但是您的代码无法检测到它是 Mini。叹息。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:01:20.537

但是，您可以通过按照 W3C 标准工作来防止很多问题。大多数浏览器都遵循它们并将防止奇怪的行为。还可以尝试在 CS 中使用媒体查询。它们允许您为较小或不同的设备创建不同的边距

# python - python ctypes 挂起

> ID：14347433
> 
> 赞同：1
> 
> 时间：2013-01-15T21:39:06.890
> 
> 标签：python, c, ctypes, shared-libraries

我在从 python 调用共享 c 库时遇到问题。该库加载良好，公开的 3 个函数之一是可调用的，并且可以按预期工作；但是，当向库中添加另一个函数时，我发现另外两个不起作用。发生的事情是 python 挂在实际的函数调用上，只是在什么都不做的情况下旋转。python 端和c 端都有详细的日志记录，我可以看出库中的函数甚至没有启动，因为没有编写任何调试文件。

以下是相关代码的一小段：

这是失败的 c 代码示例函数：

```
 int genTest(char* filePath)
    {
       infoPrint(filePath, 2);
       return EXIT_SUCCESS;
    } 
```

这是我调用它的python：

```
 import ctypes as C

    lg.create_log_entry('loading dll... from ' + str(lib_path) + str(lib_name))
    myclib = C.CDLL(lib_path + lib_name)

    lg.create_log_entry('loaded')

    genTest = myclib.genTest

    genTest.argtypes = [C.c_char_p]
    genTest.restype = C.c_int

    lg.create_log_entry('test start')
    res = genTest(C.c_char_p(str(source_as_image)))
    certirxlogging.create_log_entry('test successful') 
```

此代码开始编写“测试开始”并挂起。就像我说的那样，这在 python 代码中其他地方的库中的另一个函数上运行良好，并且 python 没有给我任何错误，所以，我无法调试任何东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:07:38.183

所以，我弄清楚了为什么它失败了。对我的 infoPrint 函数的调用中的某些内容引发了段错误。

导致我的程序挂起的原因是我使用 python 的 Multiprocessing 库在单独的进程中运行此函数并通过管道与其通信。父进程使用超时轮询管道以获取由于突然崩溃而从未出现的返回值。

感谢您帮助克服这个小问题，现在我可以（希望）找出 c 代码出了什么问题。

# ruby-on-rails - Ajax Unobtrusive 渲染部分错误不显示

> ID：14347435
> 
> 赞同：0
> 
> 时间：2013-01-15T21:39:23.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我尝试在一个 div 中渲染一个部分，但这不是渲染，错误是这样的：

```
Started GET "/user/1/edit" for 127.0.0.1 at Tue Jan 15 19:33:17 -0200 2013
  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.4ms) 
```

我不知道出了什么问题，我尝试使用这个：

*   <%= link_to "Editar perfil", edit_user_path(current_user), :remote => true %>

    当我点击时问题没有改变，我做了

    编辑.js.erb

    ```
    $("#adm_content").html("<%= render :partial =>'users/edit' %>"); 
    ```

    但没有发生我看到路线并且是正确的：

    ```
     new_user GET    /user/new(.:format)                         user#new
    edit_user GET    /user/:id/edit(.:format)                    user#edit
         user GET    /user/:id(.:format)                         user#show 
    ```

    当我单击出现错误时出现什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:21:22.760

谢谢我同意将单数的路线名称更改为复数，：用户到：用户，谢谢。

# c# - Oracle 实体框架 C#

> ID：14347439
> 
> 赞同：1
> 
> 时间：2013-01-15T21:39:59.093
> 
> 标签：c#, asp.net, entity-framework

我正在使用带有 ADO.NET 实体数据模型的 Oracle 11g 数据库。我时不时地遇到这个错误，我不知道是什么原因造成的。我假设它在 EDMX 文件或设计器文件中，但我似乎无法弄清楚。我已经多次删除模型、添加模型、更新模型等，但无法找出问题所在。它适用于其他页面，但这似乎是一个问题。

这种情况以前发生过，但只需删除并重新添加表格即可。有想法该怎么解决这个吗？

```
 using (ODSData.Entities entities = new Entities())
        {
            var info = from item in entities.ODS_VALIDATIONRULE
                       select item;

            newPK = Convert.ToInt32(info.Max(p => p.VALIDATIONRULEID)) + 1;

            try
            {
                ODS_VALIDATIONRULE newRule = new ODS_VALIDATIONRULE();

                newRule.ALLOWNULLIND = isNull;
                newRule.CREATEDATE = DateTime.Now;
                newRule.FAILIND = isFail;
                newRule.MAXVALUEFACTOR = max;
                newRule.MINVALUEFACTOR = min;
                newRule.RULEDESCRIPTION = description;
                newRule.SOURCESYSTEM = source;
                newRule.TABLENAME = table;
                newRule.COLUMNNAME = column;
                newRule.DATATYPE = datatype;
                newRule.VALIDVALUELIST = valid;
                newRule.VALIDATIONRULEID = newPK;
                entities.AddToODS_VALIDATIONRULE(newRule);
                entities.SaveChanges();
                insertAccepted = true;

            }
            catch
            {
                // Log Error
            } 
```

我得到的错误是：“准备命令定义时发生错误。有关详细信息，请参阅内部异常。”

内部异常：“由于对象的当前状态，操作无效。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:41:10.013

显然，这里的问题出在 EDMX 文件的某处以及它从 Oracle 读取的方式中。我删除了该表并在数据库和 EDMX 中重新创建它，然后将其添加回来。那时它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:07:42.393

我看到的唯一一件奇怪的事情是你没有为你的 Pk 值使用序列。您可以尝试创建一个，看看是否有帮助。

# javascript - 在 Javascript 中添加或减去 64 位整数

> ID：14347441
> 
> 赞同：3
> 
> 时间：2013-01-15T21:40:05.100
> 
> 标签：javascript, 64-bit

有没有一种简单的方法（希望是一个小函数，而不是一个库）在 JavaScript 中从 64 位整数中加减？

示例 64 位整数：291270990346989568

背景：我正在使用具有 64 位推文 ID 的 Twitter API。我想从这些 ID 中添加或减去一个，以操纵我从 Twitter 返回的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:41:48.767

以下代码执行您所描述的操作。

> 拆分，加减，然后重新加入......

此代码具有递增和递减函数，以及带有一些边缘情况的测试函数。在拆分数字字符串并对它们进行数学运算时，您需要考虑“前导零”会发生什么，因此有一个填充函数。

感谢 Justin 提供了[带有此解决方案的 JSFiddle](http://jsfiddle.net/bwmNU/2/)。

```
/*
 * Prepend zeros to expand a given string to given length
 *
 * @var {String} numStr Number
 * @var {Number} len    Length to pad out to
 *
 * @returns {String}
 */
function pad0 (numStr,len) {
  while (numStr.length < len) {
    numStr = "0" + numStr;
  }
  return numStr
}

/*
 * Decrement the given (64 bit) integer.
 *
 * @var {String} int64  Postive non-zero integer, as a string
 *
 * @returns {String}
 */
function decrInt64 (int64) {
  var result = "";
  var midpt = Math.floor(int64.length/2);
  var upper = int64.substring(0,midpt);
  var lower = int64.substring(midpt);
  var upperVal = new Number(upper);
  var lowerVal = new Number(lower);

  if (lowerVal == 0) {
    if (upperVal == 0) {
      // We don't support negative numbers
      result = "*ERROR*"
    }
    else {
      // borrow 1
      result = pad0((--upperVal).toString(),upper.length) +
               (new Number("1"+lower) - 1).toString();
    }
  }
  else {
    var newLower = (lowerVal - 1).toString();
    result = upper + pad0(newLower,lower.length);
  }
  alert(result);
}

/*
 * Increment the given (64 bit) integer.
 *
 * @var {String} int64  Postive, as a string
 *
 * @returns {String}
 */
function incrInt64 (int64) {
  var result = "";
  var midpt = Math.floor(int64.length/2);
  var upper = int64.substring(0,midpt);
  var lower = int64.substring(midpt);
  var upperVal = new Number(upper);
  var lowerVal = new Number(lower);

  var newLower = (++lowerVal).toString();
  // Did we overflow?
  if (lower.length < newLower.length) {
    // Yes, carry the 1
    result = (++upperVal).toString() + newLower.substring(1);
  }
  else {
    result = upper + pad0(newLower,lower.length);
  }
  alert(result);
}

// Test function
window.displaymessage= function ()
{
  decrInt64("291270990046989568");
  incrInt64("291270990046989568");
  decrInt64("000000000000000000");
  incrInt64("000000000000000000");
  decrInt64("000000001000000000");
  incrInt64("000000001000000000");
  decrInt64("099999999999999999");
  incrInt64("099999999999999999");
  decrInt64("999999999999999999");
  incrInt64("999999999999999999");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:10:00.103

添加**不定长度的***整数格式字符串*（以 10 为底）可以通过将字符串拆分为 9 个字符的段来完成，计算或然后移动到前面的 9 个字符。这是因为最大的 9 个字符数是 32 位安全的（就像我在减法中使用的那样）。**`+``-``999999999``1999999999`**

 **以下代码有 3 个函数，并且假定整数一词表示*整数**格式的字符串*。

*   `addAsString`, 接受两个**非负**整数`x`和`y`, 返回`x + y`
*   `subtractAsString`, 接受两个**非负**整数`x`并且`y`, `|x| >= |y|`, 返回`x - y`
*   `addORsub`, 接受**任意**两个整数`x`和`y`, 返回`x + y`

我试图通过代码中的注释来解释发生了什么

```
// Indefinate length addition
function addAsString(x, y) { // x, y strings
    var s = '';
    if (y.length > x.length) { // always have x longer
        s = x;
        x = y;
        y = s;
    }
    s = (parseInt(x.slice(-9),10) + parseInt(y.slice(-9),10)).toString(); // add last 9 digits
    x = x.slice(0,-9); // cut off last 9 digits
    y = y.slice(0,-9);
    if (s.length > 9) { // if >= 10, add in the 1
        if (x === '') return s; // special case (e.g. 9+9=18)
        x = addAsString(x, '1');
        s = s.slice(1);
    } else if (x.length) { // if more recursions to go
        while (s.length < 9) { // make sure to pad with 0s
            s = '0' + s;
        }
    }
    if (y === '') return x + s; // if no more chars then done, return
    return addAsString(x, y) + s; // else recurse, next digit
}

// Indefinate length subtraction (x - y, |x| >= |y|)
function subtractAsString(x, y) {
    var s;
    s = (parseInt('1'+x.slice(-9),10) - parseInt(y.slice(-9),10)).toString(); // subtract last 9 digits
    x = x.slice(0,-9); // cut off last 9 digits
    y = y.slice(0,-9);
    if (s.length === 10 || x === '') { // didn't need to go mod 1000000000
        s = s.slice(1);
    } else { // went mod 1000000000, inc y
        if (y.length) { // only add if makes sense
            y = addAsString(y, '1');
        } else { // else set
            y = '1';
        }
        if (x.length) {
            while (s.length < 9) { // pad s
                s = '0' + s;
            }
        }
    }
    if (y === '') { // finished
        s = (x + s).replace(/^0+/,''); // dont return all 0s
        return s;
    }
    return subtractAsString(x, y) + s;
}

// Indefinate length addition or subtraction (via above)
function addORsub(x, y) {
    var s = '';
    x = x.replace(/^(-)?0+/,'$1').replace(/^-?$/,'0'); // -000001 = -1
    y = y.replace(/^(-)?0+/,'$1').replace(/^-?$/,'0'); // -000000 =  0
    if (x[0] === '-') { // x negative
        if (y[0] === '-') { // if y negative too
            return '-' + addAsString(x.slice(1), y.slice(1)); // return -(|x|+|y|)
        }
        return addORsub(y, x); // else swap
    }
    if (y[0] === '-') { // x positive, y negative
        s = y.slice(1);
        if (s.length < x.length || (s.length === x.length && s < x)) return subtractAsString(x, s) || '0'; // if |x|>|y|, return x-y
        if (s === x) return '0'; // equal then 0
        s = subtractAsString(s, x); // else |x|<|y|
        s = (s && '-' + s) || '0';
        return s; // return -(|y|-x)
    }
    return addAsString(x, y); // x, y positive, return x+y
} 
```

* * *

示例用法（[**小提琴**](http://jsfiddle.net/GbQe3/1/)）

```
var i = addORsub('291270990346989568', '1'); // add
i === '291270990346989569';

i = addORsub('291270990346989568', '-1'); // subtract
i === '291270990346989567'; 
```**

# sql - 在 SQL Server 2008 中使用 CASE 更新多列

> ID：14347443
> 
> 赞同：0
> 
> 时间：2013-01-15T21:40:07.637
> 
> 标签：sql, sql-server-2008

我有以下 SQL 语句：

```
 update data 
  set [sub_st_pc]= 
    case 
          when [R 6] is not null  then [R 6] 
      when [R 5] is not null  then [R 5]
      when [R 4] is not null  then [R 4]
      when [R 3] is not null  then [R 3]
      when [R 2] is not null  then [R 2]
      else sub_st_pc
    end 
```

但我需要根据每个时间更新另一列，如下所示：

```
 when [R 6] is not null  then [R 6], [temp] = 6
 when [R 5] is not null  then [R 5], [temp] = 5 
```

我知道这是错误的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:46:32.810

您可以使用[COALESCE](http://www.sqlbook.com/SQL/SQL-Coalesce-28.aspx)来更轻松地设置第一列。你需要一个单独的 CASE 语句来设置`[temp]`，而 COALESCE 不会帮助你。

```
update data 
set [sub_st_pc]= COALESCE([R 6], [R 5], [R 4], [R 3], [R 2], [sub_st_pc]),
    [temp] = case 
               when [R 6] is not null  then 6 
               when [R 5] is not null  then 5
               when [R 4] is not null  then 4
               when [R 3] is not null  then 3
               when [R 2] is not null  then 2
               else NULL
             end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:45:08.027

```
update data 
  set [col1]= case when [R1] is not null  then [R1] else [col1] end,
      [col2]= case when [R2] is not null  then [R2] else [col2] end,
       ..... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:46:22.163

你的问题不清楚。只需编写类似于您为一列编写的更新语句，但对于许多列，例如

```
update Data
set Col1 = case when Col2 is not null then col2 else Col1 end,
Col2 = case when Col3 is not null then Col3 else Col2 end 
```

# c# - 访问我的类并在表示层上展示输出

> ID：14347445
> 
> 赞同：1
> 
> 时间：2013-01-15T21:40:10.910
> 
> 标签：c#, .net, vb.net, arraylist, datareader

我编写了一个类来运行存储过程，启动数据读取器并将内容放入数组列表中。

## 班级代码

```
public class GHPSlider
{
    private clsDbAccess _db;
    private clsDbAccess _tmpDb;

    public ArrayList getBanners(int thisBannerType)
    {
        ArrayList HeroBanners = new ArrayList();
        SqlDataReader _dr = null;
        SqlCommand cmd = _db.Command;
        if (_db.Connection.State == ConnectionState.Closed)
        {
            _db.Connection.Open();
        }
        cmd = _db.Command;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "GetGHPSlides";
        cmd.Parameters.Clear();
        cmd.Parameters.AddWithValue("@ID", thisBannerType);
        _dr = cmd.ExecuteReader(CommandBehavior.CloseConnection);
        if (_dr.HasRows)
        {
            while (_dr.Read())
            {
                object[] values = new object[_dr.FieldCount];
                _dr.GetValues(values);
                HeroBanners.Add(values);
            }
        }
        _dr.Close();

        return HeroBanners;
    }
} 
```

在我的代码隐藏中，我试图访问 ArrayList 以便我可以遍历它并将代码输出到表示层。我对 n 层编程方式相当陌生，可以使用一些帮助来让我朝着正确的方向前进。

## 代码隐藏代码

```
Public Function GetHeros() As String

    Dim thisTestSubject As ArrayList = New GHPSlider.getBanners(1)
    'Loop through thisTestSubject ArrayList and place into HTML string to pass to literal or label
    thisBannerSlideBuilderHTML = "<div style='z-index:0;background-color:#FFF;'><a href='" + thisBannerSlideURL.ToString() + "' onclick='RecordBannerClick(this, 'Hero', 'GHP', '" + thisBannerSlideTitle.ToString() + "');'><img alt='" + thisBannerSlideTitle.ToString() + "' src='" + thisBannerSlideImagePath.ToString() + "' /></a></div>";
    'Place Inside Literal or Label to display to presentation layer

End Function 
```

如果有人可以帮助我指出正确的方向，那就太好了！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:50:48.207

如果您无法访问您拥有的类，您将需要实例化它。例如，

```
GHPSlider slider = new GHPSlider(); 
```

从那里，您将能够访问属性和方法

```
slider.getBanners(); 
```

您当前使用的代码非常神秘，我不确定您使用它的目的是什么，所以它可能是可行的。但是，您可能想阅读一些有关分层程序的信息，它会帮助您在精神上组织这些东西。我知道您实际上并没有数据层，但阅读有关数据访问层的内容可能会帮助您了解其背后的架构。

* * *

我只能从 C# 的角度真正提供帮助，但您也许可以将其移植过来。

对于遍历数组的值，它实际上取决于目的。在简单的编码中，假设您有一个包含十个值的数组。使用循环遍历它们`for`将让您通过将每个值传递给另一个命令来获取每个值。

```
int[] array = new int[p];

        for (int i = 0; i < p; i++)
        {
            array[i] = i;
            Console.WriteLine(array[i]);
        } 
```

其输出是从 0 到 9 的计数。

[帮助数组！](http://www.dotnetperls.com/array)

现在，更具体地说，[ArrayList](http://www.dotnetperls.com/arraylist)

我知道您使用的是较旧的代码，因此，`ArrayList`但是使用循环的值迭代`for`可能是您最好的选择。

# spotify - Spotify 原始输出在解释为 PCM 时会出现乱码

> ID：14347450
> 
> 赞同：2
> 
> 时间：2013-01-15T21:40:39.803
> 
> 标签：spotify, pcm

回调的输出`music_delivery`，当解释为小端序 16 位有符号整数 PCM 时，具有与对象中的音频样本相同的采样率 (44100Hz) 和通道数 (2) `sp_audioformat`，听起来可识别，但非常乱码，此外还有是随机的噪音爆发。

Spotify 是否使用与标准交错 PCM 不同的 PCM 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:36:23.203

我误解了回调`frames`文档上下文中的含义。`music_delivery`

要找出传递回调中有多少样本可用，您必须将帧数乘以通道数。

现在听起来很棒！

# c# - 如何在 .Net 中同时使用 Ruby 和 C#？

> ID：14347452
> 
> 赞同：0
> 
> 时间：2013-01-15T21:40:43.237
> 
> 标签：c#, ruby

到目前为止，这是我所做的，我不确定它是否有效，但是，尝试一些东西总比什么都不做要好。我在我的 Winform 项目中添加了一个 Ruby 类，它看起来像这样：

```
 class My_Ruby_Class
        def initialize(number)
            @number = number
            change_number()
        end

        def change_number
            @number*= 2
        end

        def get_number
            return @number
        end
    end 
```

所以稍后在我的 c# MainForm.cs 中输入：

```
namespace ruby_in_dotNet_test_01
{

    public partial class MainForm : Form
    {
        public MainForm()
        {
            InitializeComponent();

            int number = 2;

            My_Ruby_Class test = new My_Ruby_Class(number);

            int number2 = test.get_number();

        }
    }
} 
```

非常有趣的是，智能感知似乎可以检测到我的 ruby​​ 类，甚至可以帮助我在输入时填充区域，所以在我看来，我走在正确的道路上。但是它不编译。编译器错误似乎与缺少类型或命名空间有关。我试图在“模块 ruby​​_in_dotNet_test_01”块之间包围我的 ruby​​ 类，但没有成功。

我很困惑，也许只有一个小细节我做得不好，或者这种方法根本不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:46:44.720

基本上你正在尝试做的事情不会开箱即用（在文件中定义 ruby​​ 代码并直接从 C# 使用它，并且仍然可以获得强类型和 Intellisense）。您是否忘记了 Ruby 是一种弱类型语言？

您可以使用 IronRuby 从 C# 调用 ruby​​ 代码。这是一个[`step-by-step article`](http://thatextramile.be/blog/2010/09/using-ruby-classes-in-c-with-ironruby/)说明过程。这是一个[`screencast`](http://www.youtube.com/watch?v=P7DyIU3wzdY)你可以看的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:29:12.910

除了 Darin Dimitrov 写的另一个答案之外，我刚刚找到了这篇[分步文章](http://www.blossomsoft.com/gamezopher/2013/01/hello-world-program-using-ironruby/)，它以非常友好的方式解释了如何从 C# 调用 ruby​​ 代码。

# c# - 如何将数据绑定到winforms中的图表并刷新图表？

> ID：14347454
> 
> 赞同：7
> 
> 时间：2013-01-15T21:41:20.527
> 
> 标签：c#, winforms, charts, controls

我试图将图表绑定到`generatedSequence`type `List<float>`。绑定后如何更新图表控件？

我试过这个但没有运气：

```
chart1.DataSource = new BindingList<float>(chartSequence);
chart1.DataBind();

chart1.Update(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T22:17:20.367

不要忘记在图表属性中设置 Series 的 DataSource 属性。

![在此处输入图像描述](../Images/9db41c248a2c0c4829444f16583f1528.png)

设置`XValueMember`和`YValueMembers`来自代码：

```
chart1.Series.First().XValueMember = "X";
chart1.Series.First().YValueMembers = "Y"; 
```

[教程：创建基本图表](http://msdn.microsoft.com/en-us/library/dd489237.aspx)

# matlab - MATLAB vpa() 不计算指数表达式的变量点数？

> ID：14347457
> 
> 赞同：2
> 
> 时间：2013-01-15T21:41:27.033
> 
> 标签：matlab, symbolic-math, double-precision, rational-numbers

尝试使用 vpa() 为指数中的有理表达式计算变量点数：

```
syms x;
ans1 = x^(12345/67890)
ans2 = vpa(x^(12345/67890),3)
ans2_5 = vpa((12345/67890),3)
ans3 = vpa(x*(12345/67890),3) 
```

上面显示了这个问题。ans1 显示表达式的默认输出。ans2 表明 vpa() 没有计算表达式的变量点数。ans 2_5 显示了它应该计算的内容。我正在寻找的结果是`x^0.182`.

ans3 只是表明当函数是乘法时 vpa() 会产生预期的结果——它是指数中的一些东西，它把它绊倒了。

如何请求 vpa 评估指数？

[编辑]

也许我可以更清楚地说明这一点。我真正需要的是指数表达式的指数的访问器或索引。因此，如果我的表达是 `y = x^a` 我需要能够在`x`该返回上有一些访问器`a`。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:16:11.887

+1 发现这个有趣的错误。这为我解决了您的问题：

```
digits(3)
p=vpa(12345/67890,3)
ans1 = x^p

ans1 =
       x^0.182 
```

# iis - VS2012 Web Deploy Package 创建应用程序池

> ID：14347459
> 
> 赞同：6
> 
> 时间：2013-01-15T21:41:29.273
> 
> 标签：iis, visual-studio-2012, msdeploy

我在 VS2012 中有一个 Web 应用程序项目，我正在使用“Web 部署包”发布它。我希望这个包包含应用程序池设置，特别是*创建*一个 IIS 应用程序池并将新创建的应用程序分配给它。

我熟悉当项目配置为使用 IIS 实例（不是 IIS Express）时可用的选项“包括此 Web 项目使用的应用程序池设置”，但 IIS 配置**不是**项目文件的一部分，因此不是源受控。当有人在没有精心配置 IIS 的机器上构建部署包时会发生什么？不理想。

那么，我还能如何将 AppPool 设置放入我的 Web 部署包中？我知道 appPoolConfig 提供程序仅是 IIS7+，我对这个限制很好。过去我一直在努力解决这个问题，但从未找到解决方案。18 个月后，我们有了一个新的 VisualStudio 版本和一个新的网络发布管道，是否有新的选项来解决这个问题？或者当我第一次解决这个问题时我错过了什么？

**编辑**

好的，我看到以下选项：

1.  将我的项目配置为从 IIS 实例同步设置。如前所述，我不喜欢这个，因为它将设置放在项目*之外*，这意味着必须精心配置环境以构建 + 发布。此外，它还会拖累我不想包含的其他 IIS 设置。
2.  在 web-publishing-pipeline (WPP) 中注入一些东西来修改 archive.xml。我过去曾玩弄过这个并且取得了有限的成功。一个问题是管道与直接处理 archive.xml 文件不完全合作，另一个问题是涉及一些更神秘的属性，比如`MSDeploy.MSDeployProviderOptions`似乎有一些 Base64 编码的二进制文件？不知道该放什么。
3.  找到可以做我想做的现有“提供者”。我可能在这里不走运，`appPoolConfig`提供者似乎只想读/写 IIS，而不是设置的 XML 文件。有人知道吗？
4.  编写我自己的“提供程序”来生成清单输出条目。我不确定，是否可以编写一个自定义提供程序，使用现有提供程序的名称写入清单？如，`MyCustomPoolProvider`将`appPoolConfig`部分写入清单？这听起来像是一种可能会或可能不会起作用的潜在痛苦练习。我还需要弄清楚任何内容的编码`MSDeploy.MSDeployProviderOptions`吗？

我觉得 Web Deploy 的基本障碍是我想要完成的工作，它是多么严格地依赖“提供者”。预先存在的提供程序主要是为 IIS 同步设计的，**而不是**主要的开发和发布。碰巧的是，其中一些提供程序可以*相对*容易地通过 MSBuild 挂钩，但大多数人坚持从 IIS 中提取数据，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:49:42.580

您对`appPoolConfig`提供者的理解是正确的，因为它只能在 App Pool 之间同步，不能直接提供配置。您可能会做的是将有问题的 appPool 的副本保留在`package`表单中（即 . `msdeploy -verb:sync -source:appPoolConfig=PoolName -dest:package=apppool.zip`）并尝试劫持管道，以便 MSDeploy 调用将应用程序内容添加到包中，而将现有内容留在那里。

或者，您可以始终将包分开，并通过对 MSDeploy 的不同调用来部署它们。

仅供参考，`MSDeploy.MSDeployProviderOptions`只是打包时提供给提供者的参数的编码版本。例如，`-source:dirPath=c:\,ignoreErrors=0x10293847 -dest:package=package.zip`将包装`ignoreErrors`价值。

# php - 使用标题标签的php回显文件url

> ID：14347461
> 
> 赞同：-2
> 
> 时间：2013-01-15T21:41:35.280
> 
> 标签：php, arrays, shuffle

我有一个 php 脚本，它将回显文件夹中的文件列表并在我的页面上随机显示它们。

目前它显示文件的网址，**例如：** what-c​​an-cause-tooth-decay.php

我希望它显示页面标题`<title>What can cause tooth decay</title>`。

当前代码：

```
<?php 

if ($handle = opendir('health')) {
    $fileTab = array();
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            $fileTab[] = $file; 
        }
    }
    closedir($handle);
    shuffle($fileTab);
    foreach($fileTab as $file) {
        $thelist .= '<p><a href="../health/'.$file.'">'.$file.'</a></p>';
    }
}
?>
<?=$thelist?> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:48:02.877

我看到了几种可能的方法：

*   你可以解析文件。应该可以通过对`file_get_contents`.
*   在某处放置一些文本文件，将文件名映射到标题。将其加载到内存中并使用它来填充可用于映射文件名的数组。让它`file_name.html Title`在每一行都有，或者类似的东西。
*   使用命名约定，因此可以从文件名中推断出标题。像“capizalize第一个字母，把'_'变成空格”

第二种和第三种方法的缺点：您必须使其与`title`文件中的实际 -elements 保持一致。第一种方法的问题：您必须将每个文件读入内存 - 可能是许多/大文件的性能问题。为了解决这个问题，我可以想象编写一个脚本来查看所有文件并生成查找文本文件。每当您更改文件中的标题或添加/删除文件时，您只需要重新运行该脚本。

# javascript - 在 contenteditable div 中设置插入符号位置

> ID：14347462
> 
> 赞同：1
> 
> 时间：2013-01-15T21:41:39.710
> 
> 标签：javascript, contenteditable, caret, cursor-position

## 介绍

在编辑 contenteditable DOM 对象的内容时，不同的浏览器有不同的行为。例如，Firefox 18.0 在某些情况下会创建一个新段落 ( `<p>`) 或换行符`<br/>`，而 Chrome 24 会创建一个`<div>`.

为了解决这个问题，我正在监听`DOMNodeInserted`事件并用 p 标签替换新插入的节点。

* * *

## 问题

问题是将插入符号放置到位。**我已经阅读了 SO 中关于同一主题的大量帖子，但所提供的答案都没有奏效**，至少在 Chrome 24 中是这样。

* * *

## 代码

[**JSFiddle**](http://jsfiddle.net/tivie/kmkcJ/)

```
obj.addEventListener("DOMNodeInserted", onNodeInsert, false);

function onNodeInsert(e) {
    var range    = document.createRange(),
        sel      = window.getSelection(),
        newNode  = e.target,
        tagName  = newNode.tagName.toLowerCase(),
        lnbrNode = document.createElement('br'),
        pNode    = document.createElement('p');

    if (tagName === 'div' && newNode.getAttribute("id") === null) {
        // First we remove the event listener so that it doesn't get triggered again
        this.removeEventListener('DOMNodeInserted', onNodeInsert, false);

        // Creates a p node and removes the div
        newNode.parentNode.replaceChild(pNode, newNode);
        pNode.appendChild(lnbrNode);

        // Places the caret where it belongs
        range.setStart(pNode, 0);
        sel.removeAllRanges();
        sel.addRange(range);    

        //We can restore the event listener now
        this.addEventListener("DOMNodeInserted", onNodeInsert, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:46:45.223

对于那些可能遇到与我相同的问题的人，这是我的肮脏修复...

* * *

## 相关代码

[**JSFiddle**](http://jsfiddle.net/tivie/kmkcJ/)

```
obj.addEventListener("DOMNodeInserted", onNodeInsert, false);

function onNodeInsert(e) {
    var range    = document.createRange(),
        sel      = window.getSelection(),
        newNode  = e.target,
        tagName  = newNode.tagName.toLowerCase(),
        lnbrNode = document.createElement('br'),
        pNode    = document.createElement('p');

    if (tagName === 'div' && newNode.getAttribute("id") === null) {
        // First we remove the event listener so that it doesn't get triggered again
        this.removeEventListener('DOMNodeInserted', onNodeInsert, false);

        // Creates a p node and removes the div
        newNode.parentNode.replaceChild(pNode, newNode);
        pNode.appendChild(lnbrNode);

        // Places the caret where it belongs
        var placeCursor = function () {
            range.setStart(pNode, 0);
            sel.removeAllRanges();
            sel.addRange(range);    
        }

        //placeCursor(); // DOES NOT WORK (cursor disappears)
        setTimeout(placeCursor,1); // WORKS

        //We can restore the event listener now
        this.addEventListener("DOMNodeInserted", onNodeInsert, false);
    }
} 
```

# javascript - Iframe src 使用 Javascript 更改不起作用

> ID：14347465
> 
> 赞同：0
> 
> 时间：2013-01-15T21:41:49.217
> 
> 标签：javascript, iframe, src

我目前有一些看起来像这样的 Javascript：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
function changeSource(newSource) {
  document.getElementById('preview').src = newSource;
}
});
</script> 
```

然后我有一些看起来像这样的 HTML：

```
<table border=0 class="colors">
  <tbody>
    <tr>
      <td><a onclick="changeSource('http://www.test.com')"><img width="40" src="test.png"/></a></td>
    </tr>
  </tbody>
</table> 
```

然后是 iframe 部分：

```
<table border=0>
  <tbody>
    <tr>
      <td><iframe id="preview" width="125" height="303" src="test.php" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" hspace="0" vspace="0"></iframe></td>
    </tr>
  </tbody>
</table> 
```

但是，点击标签中的图像，Iframe 的来源不会改变。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:43:33.623

您收到一个错误，因为该函数是一个本地方法，因为您将它隐藏在 onready 函数中。该示例不需要 onready 调用。

```
<script>
$(document).ready(function(){
function changeSource(newSource) {
  document.getElementById('preview').src = newSource;
}
});
</script> 
```

需要是

```
<script>
  function changeSource(newSource) {
      document.getElementById('preview').src = newSource;
  }
</script> 
```

更好的是，不需要 JavaScript！使用应该使用的 HTML。使用目标属性。

```
<td><a href="http://www.example.com" target="preview"><img width="40" src="test.png"/></a></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T04:51:11.060

您正在使用 jquery。更好地利用。

```
$(文档).ready(函数(){
    // 为具有类颜色的表选择锚标记
    $("table.colors a").click(function(e){
        e.preventDefault();
        var newSource = $(this).attr("href");
        $("#preview").attr({"src" : newSource});
    });
});

```

无需通过添加**onclick**属性或 target 属性来弄乱 html。但是 html 的**target**属性是最可取的。

```
<table border=0 class="colors">
  <tbody>
    <tr>
      <td><a href="http://www.test.com"><img width="40" src="test.png"/></a></td>
    </tr>
  </tbody>
</table> 
```

# android - 从 Back Stack 获取活动保持历史记录，而不是创建新的

> ID：14347468
> 
> 赞同：2
> 
> 时间：2013-01-15T21:41:58.157
> 
> 标签：android, android-activity, back-stack

我正在尝试做这样的事情：

我有一些任务活动：

A->B->C

从 C 我想从堆栈中调用 B 的实例并保留当前历史记录。所以奇怪的结果是这样的：

A->B->C->B

其中 B 和 B 是相同的实例，但可以使用“后退”按钮向后导航。

可能吗？

可能被骗： [Android任务历史堆栈：可以有“重复活动”？](https://stackoverflow.com/questions/9641072/android-task-history-stack-can-have-duplicate-activities)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:28:50.847

我通过实现自己的 Back Stack 解决了我的问题。主要思想是使用 FLAG_ACTIVITY_BRING_TO_TOP 来指示我的单身活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:00:23.467

据我所知，Android 不支持这种情况。

你可以有：

A->B->C->B（其中 B 都是同一个类的活动，但它们是两个不同的对象）

公关

A->C->B（将 B 放在前面）。

但是，我认为您可以自己构建一些东西。如果您将在 onPause() 上序列化 B 的状态并在 onCreate() 和 onResume() 上对其进行反序列化，则堆栈中可能有两个 B（它们将是单独的对象），但它们仍然具有相同的状态（例如所有成员）。

# c# - 如何设置调用用户控件链接的方法

> ID：14347469
> 
> 赞同：0
> 
> 时间：2013-01-15T21:41:59.227
> 
> 标签：c#, asp.net, user-controls

我创建了一个用户控件，在我网站的每个页面上显示标题（不是 <head>，我的意思是标题、创建日期时间页面等等）。在该用户控件中，我也有一个链接。将在页面上显示的链接`IF (user = admin)`。

目前这个链接是一个纯链接，我没有问题将“navigateUrl”更改为每个页面的正确值。（每个页面都包含这个用户控件，并且我从每个页面设置了 navigateUrl 的值。）

但！

在我的一些页面上，我使用链接按钮而不是超链接。但是我必须从 page.aspx 而不是 usercontrol.ascx 添加那个链接按钮

我的问题是，我想将用户控件中的超链接更改为链接按钮，以便可以使用该链接调用方法。（方法在 page.aspx 上，不在用户控件内）。

调用什么方法因页面而异，所以我想设置每次包含用户控件时调用哪个方法。

如果我有我的用户控制

```
<asp:LinkButton ID="LinkButton1" runat="server">LinkButton</asp:LinkButton> 
```

现在我通过以下方式在用户控件中设置值：

```
 mainPageHeader1.headTitle = "text"; 
```

如何设置调用链接按钮的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:05:59.803

**更新**

在 UserControl 的标记中，指定单击事件的处理程序

```
<asp:LinkButton OnClick="LinkButton1_Clicked" runat="server" ID="LinkButton1" /> 
```

在你的用户控件中声明一个自定义事件

```
public class MyUserControl
{
   public event System.EventHandler LinkButtonClicked;

   //add handler for your LinkButton
   protected void LinkButton1_Clicked(object sender, EventArgs e)
   {
      //Raise your custom event here that can be handled in any page that use your control
      LinkButtonClicked(sender, e);
   }
} 
```

在您的 page.aspx 中，为您的自定义事件添加处理程序

```
protected void MyUserControl2_LinkButtonClicked(object sender, EventArgs e)
{
   //handle the event here
} 
```

**更新**

在您添加控件的页面中，

```
<custom:MyUserControl ID="MyUserControl2" runat="server"     
                      LinkButtonClicked="MyUserControl_LinkButtonClicked" /> 
```

就这样

**更新**

在代码隐藏中订阅事件完成了这项工作。我还没有弄清楚为什么它不能从标记中工作。

从 UserControl 所在页面的 Page_Load 中，执行此操作

```
 MyUserControl2.LinkButtonClicked += new EventHandler(MyUserControl_LinkButtonClicked); 
```

它应该可以工作。

检查事件是否已经订阅了代码隐藏（`eventhandler += EventHandler(sender, e)`或 aspx 标记`OnClick="EventHandlerMethodName"`） -[如果它没有订阅到某个地方，这将是 null](http://forums.asp.net/t/1543851.aspx)

# c# - 同时遍历两个列表

> ID：14347472
> 
> 赞同：0
> 
> 时间：2013-01-15T21:42:16.903
> 
> 标签：c#, iteration

我正在做这个。

```
List<Type1> t1 = ...
List<Type2> t2 = ...
List<Type3> t3 = new List<Type3>();

for(int i = 0; i < t1.Count; i++)
  t3.AddRange(new Type3(t1[i], t2[i])); 
```

我尝试`foreach`通过部署它来使用它。

```
IEnumerable<Type1> t1 = ...
IEnumerable<Type2> t2 = ...
IEnumerable<Object> t12 = t1.Zip(t2, (outer, inner)
  => new{ Outer = outer, Inner = inner});
List<Type3> t3 = new List<Type3>();

foreach(Object element in t12)
  t3.Add(new Type3(element.Outer, element.Inner)); 
```

这不会飞，因为`Object`不识别`Outer`and`Inner`属性。我也不能`as`，因为它是匿名类型。我能做些什么？

我也不想使用`Object`or`var`而是 a `Tuple`or 说“这是一种`<Type1,Type2>`组合的东西”的东西。

*注意。有[这个](https://stackoverflow.com/questions/2721939/how-to-iterate-through-two-ienumerables-simultaneously)讨论，但这并没有真正回答我的问题。而在[这个](https://stackoverflow.com/questions/1955766/iterate-two-lists-or-arrays-with-one-foreach-statment-in-c-sharp)我只是无法获得这些领域。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:45:28.180

您应该能够通过在循环中使用`var`而不是正确地使用匿名类型。推断类型，并允许您按预期使用匿名对象。`object``var`

```
IEnumerable<Type1> t1 = ...
IEnumerable<Type2> t2 = ...
var t12 = t1.Zip(t2, (outer, inner)
  => new{ Outer = outer, Inner = inner});
List<Type3> t3 = new List<Type3>();

foreach(var element in t12)
  t3.Add(new Type3(element.Outer, element.Inner)); 
```

如果您想使用`Tuple`，可以执行以下操作：

```
IEnumerable<string> t1 = new[] { "test" };
IEnumerable<int> t2 = new[] { 1 };
IEnumerable<Tuple<string, int>> t3 = t1.Zip(t2, (outer, inner) => Tuple.Create(outer, inner)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:56:36.870

也许是这样的：

```
IEnumerable<int> t1 = new List<int> { 1, 2, 3 };
IEnumerable<int> t2 = new List<int> { 1, 2, 3 };
var t12 = t1.Zip(t2, (outer, inner) => new { Outer = outer, Inner = inner });
var t3 = t12.Select(t => new { O = t.GetPropValue("Outer"), 
                               I = t.GetPropValue("Inner") }); 
```

# windows-phone-7 - 在两行文本块内显示长文本

> ID：14347474
> 
> 赞同：0
> 
> 时间：2013-01-15T21:42:20.100
> 
> 标签：windows-phone-7, xaml, textblock

我有一个包含文本块和图像的列表框。如果文本太长，我想要它转到第二行。目前只有文本是可见的。这是我的 XAML

```
 <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Image Source="{Binding imgurl}" MaxHeight="120" MaxWidth="120" Margin="0,10,0,0" />
                            <TextBlock Text="{Binding title}" Margin="50,0,12,0" />
                        </StackPanel>
                    </DataTemplate>
  </ListBox.ItemTemplate> 
```

有人可以帮助我吗？

**截屏** ![在此处输入图像描述](../Images/1c288b0a6bdb9c0ae86ee13b9fb6e552.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:53:55.070

啊，是的，所以我想它看起来很简单。您只需要限制文本所在位置的宽度并调用`TextWrapping`即可，您有多种选择来完成此操作。这里有几种可能性...

```
 <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Image Source="{Binding imgurl}" MaxHeight="120" MaxWidth="120" Margin="0,10,0,0" />
                            <TextBlock Text="{Binding title}" Margin="50,0,12,0" TextWrapping="Wrap" MaxWidth="{Binding ActualWidth, ElementName=Self}"/>
                        </StackPanel>
                    </DataTemplate>
  </ListBox.ItemTemplate> 
```

或者你可以让一个面板做它应该受到它的父母的限制......

```
<ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                               <ColumnDefinition/>
                               <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Image Source="{Binding imgurl}" MaxHeight="120" MaxWidth="120" />
                            <TextBlock Grid.Column="1" Text="{Binding title}" TextWrapping="Wrap" Margin="50,0,2,0" />
                        </Grid>
                    </DataTemplate>
  </ListBox.ItemTemplate> 
```

或者取决于这个 ListBox 作为一个孩子是如何布局的，它甚至可能像添加`TextWrapping="Wrap"`到 TextBlock 然后`MaxWidth`在 ListBox 本身上设置一样简单。无论哪种方式，希望这会有所帮助...... :)

# android - Android 中的 Google+：分享时安装应用

> ID：14347475
> 
> 赞同：1
> 
> 时间：2013-01-15T21:42:29.800
> 
> 标签：android, api, android-intent, google-plus, sharing

我正在尝试让我的应用程序在 Google+ 中共享某些代码，并且当用户安装了官方 Google+ 应用程序时它可以正常工作。然而，根据文档，当它没有安装时，应该有一个弹出窗口告诉用户他/她没有安装应用程序，当点击按钮时，应用程序应该被重定向到 Google Play 以下载它..但是当点击按钮时，什么也没有发生。

请问有什么想法吗？这是我的按钮代码：

```
plus.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                shareDialog.dismiss();
                // Launch the Google+ share dialog with attribution to your app.
                Intent shareIntent = ShareCompat.IntentBuilder.from(getActivity()).setType("text/plain").setText("Welcome to the Google+ platform. https://developers.google.com/+").getIntent()
                        .setPackage("com.google.android.apps.plus");

                int errorCode = GooglePlusUtil.checkGooglePlusApp(getActivity());
                if (errorCode != GooglePlusUtil.SUCCESS) {
                    GooglePlusUtil.getErrorDialog(errorCode, getActivity(), 1).show();
                } else {
                    startActivity(shareIntent);
                }
            }
        }); 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:12:01.877

新手错误：而不是`GooglePlusUtil.getErrorDialog(errorCode, getActivity(), 1).show();`使用`GooglePlusUtil.getErrorDialog(errorCode, getActivity(), GooglePlusUtil.APP_MISSING).show();`

# python - sqlalchemy：ObjectdereferencedError

> ID：14347476
> 
> 赞同：4
> 
> 时间：2013-01-15T21:42:40.743
> 
> 标签：python, database, sqlalchemy, flask

我有一个烧瓶应用程序，我在其中创建了一堆相互关联的类：

用户课程讲义队列资产

所以我正在尝试做一个新的讲座和笔记，我为每一件事定义了一个方法。

## 创建注释

```
def createPad(user,course,lecture):
    lecture.queues.first().users.append(user)
    # make new etherpad for user to wait in
    newNote = Note(dt) # init also creates a new pad at /p/groupID$noteID
    db.session.add(newNote)
    #db.session.commit()

    # add note to user, course, and lecture
    user.notes.append(newNote)
    course.notes.append(newNote)
    lecture.notes.append(newNote)
    db.session.commit()

return newNote 
```

## 创建讲座

```
def createLecture(user, course):
    # create new lecture
    now = datetime.now()
    dt = now.strftime("%Y-%m-%d-%H-%M")
    newLecture = Lecture(dt)
    db.session.add(newLecture)

    # add lecture to course, add new queue to lecture, add user to queue, add new user to lecture
    course.lectures.append(newLecture)
    newQueue = MatchQueue('neutral')
    db.session.add(newQueue)
    newLecture.users.append(user)

    # hook up the new queue to the user, lecture
    newQueue.users.append(user)
    newQueue.lecture = newLecture
    # put new lecture in correct course
    db.session.commit()

    newLecture.groupID = pad.createGroupIfNotExistsFor(newLecture.course.name+dt)['groupID']

    db.session.commit()
    return newLecture 
```

这都是从一些控制器逻辑调用的

```
newlec = createLecture(user, courseobj)

# make new pad
newNote = createPad(user,courseobj,newlec)

# make lecture live
newLecture.live = True
db.session.commit()

redirect(somewhere) 
```

这最终会引发此错误：

ObjectDereferencedError：无法为属性“Queue.users”发出更改事件 - 类型的父对象已被垃圾收集。

在. `lecture.queues.first().users.append(user)`_`createPad`

我不知道这意味着什么。我想我在这里缺乏一些关于 sqlalchemy 的基本知识（我是 sqlalchemy 菜鸟）。这是怎么回事？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T14:32:21.120

```
lecture.queues.first().users.append(user) 
```

它的意思是：

first() 方法访问数据库并生成一个对象，我没有关注您的映射，但我猜它是一个 Queue 对象。

然后，您访问队列上的“用户”集合。

此时，Python 本身会**垃圾收集**Queue - 一旦返回“用户”，它就不会在任何地方引用。这就是[引用计数](http://docs.python.org/2/extending/extending.html#reference-counts)垃圾回收的工作原理。

然后您尝试将“用户”附加到“用户”。SQLAlchemy 必须跟踪对所有映射属性的更改，如果您说`Queue.name = "some name"`，SQLAlchemy 需要将其注册到父`Queue`对象，以便它知道刷新它。如果你说`Queue.users.append(someuser)`，同样的想法，它需要向父级注册更改事件。

SQLAlchemy 不能这样做，因为它`Queue`已经消失了。因此，该消息被提出。SQLAlchemy 在这里对父级有一个[弱引用](http://docs.python.org/2/library/weakref.html#weakref.ref)，因此它确切地知道发生了什么（我们无法阻止它，因为当我们在他们的对象模型中创建不必要的[引用循环时人们会非常沮丧）。](http://en.wikipedia.org/wiki/Reference_counting#Dealing_with_reference_cycles)

该解决方案非常简单且易于阅读，即将查询结果分配给变量：

```
queue = lecture.queues.first()
queue.users.append(user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:20:50.150

我做了一堆重构，在实例化的时候放入了一些对象对应的对象，这让事情变得整洁了很多。不知何故，问题消失了。

我做的不同的一件事是在我的多对多关系中，我将 backref 更改为 db.backref()：

```
courses = db.relationship('Course', secondary=courseTable, backref=db.backref('users', lazy='dynamic'))
lectures = db.relationship('Lecture', secondary=lectureTable, backref=db.backref('users', lazy='dynamic'))
notes = db.relationship('Note', secondary=noteTable, backref=db.backref('users', lazy='dynamic'))
queues = db.relationship('Queue', secondary=queueTable, backref=db.backref('users', lazy='dynamic')) 
```

# intuit-partner-platform - 将 QuickBooks Anywhere 连接到 QuickBooks Desktop

> ID：14347477
> 
> 赞同：0
> 
> 时间：2013-01-15T21:42:41.267
> 
> 标签：intuit-partner-platform

我正在尝试从任何地方的 QuickBooks 连接到 QuickBooks 桌面，但是，我看不到我的 QuickBooks 桌面实例，Joe's Test Company。我只看到我的 QuickBooks Online 实例。

我相信问题是我的网址：

[https://qbo.intuit.com/qbo1/rest/user/v2/](https://qbo.intuit.com/qbo1/rest/user/v2/)

QuickBooks Desktop 的基本 URL 是什么？

这是我的代码：

```
 public void GetAccessTokenAndSecret()
    {
        string oauth_callback_url = HttpContext.Current.Request.RawUrl;
        oauth_callback_url = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority) + oauth_callback_url;
        string consumerKey = _qboSettings.ConsumerKey;
        string consumerSecret = _qboSettings.ConsumerKeySecret;
        var oauthLink = Constants.OauthEndPoints.IdFedOAuthBaseUrl;
        IToken token = (IToken)HttpContext.Current.Session["requestToken"];
        IOAuthSession session = CreateSession();
        IToken requestToken = session.GetRequestToken();
        HttpContext.Current.Session["requestToken"] = requestToken;
        string RequestToken = requestToken.Token;
        string TokenSecret = requestToken.TokenSecret;
        oauthLink = Constants.OauthEndPoints.AuthorizeUrl + "?oauth_token=" + RequestToken + "&oauth_callback=" + UriUtility.UrlEncode(oauth_callback_url);
        HttpContext.Current.Response.Redirect(oauthLink);

    }

    /// <summary>
    /// Creates Session
    /// </summary>
    /// <returns>Returns OAuth Session</returns>
    protected IOAuthSession CreateSession()
    {
        OAuthConsumerContext consumerContext = new OAuthConsumerContext
        {
            ConsumerKey = _qboSettings.ConsumerKey,
            ConsumerSecret = _qboSettings.ConsumerKeySecret,
            SignatureMethod = SignatureMethod.HmacSha1
        };
        return new OAuthSession(consumerContext,
                                        Constants.OauthEndPoints.IdFedOAuthBaseUrl + Constants.OauthEndPoints.UrlRequestToken,
                                        Constants.OauthEndPoints.IdFedOAuthBaseUrl,
                                        Constants.OauthEndPoints.IdFedOAuthBaseUrl + Constants.OauthEndPoints.UrlAccessToken);
    } 
```

这是我的常数：

```
using System.Globalization;

namespace HelloIntuitAnywhere.Utilities
{
using System.Configuration;
using System.Web;

/// <summary>
/// Contains Constants.
/// </summary>
internal class Constants
{

    static string Url_Request_Token = "/get_request_token";
    static string Url_Access_Token = "/get_access_token";
    static string Intuit_OAuth_BaseUrl ="https://oauth.intuit.com/oauth/v1";
    static string Intuit_Workplace_AuthorizeUrl = "https://workplace.intuit.com/Connect/Begin";
    static string BlueDot_AppMenuUrl = "https://workplace.intuit.com/api/v1/Account/AppMenu";
    static string DisconnectUr = "https://appcenter.intuit.com/api/v1/Connection/Disconnect";
    static string oauth_callback_url = HttpContext.Current.Request.RawUrl.Replace("Configure", "OAuthHandler");
    static string menuProxy = "MenuProxy.aspx";
    static string grantUrl = "OauthGrant.aspx";
    static string qbo_base_url = "https://qbo.intuit.com/qbo1/rest/user/v2/";
    static string openid_identifier = "https://openid.intuit.com/Identity-YourAppName";

    /// <summary>
    /// OAuth EndPoints.
    /// </summary>
    internal class OauthEndPoints
    {
        /// <summary>
        /// Url Request Token
        /// </summary>
        internal static string UrlRequestToken = Url_Request_Token != null ?
            Url_Request_Token.ToString(CultureInfo.InvariantCulture) : "/get_request_token";

        /// <summary>
        /// Url Access Token
        /// </summary>
        internal static string UrlAccessToken = Url_Access_Token != null ?
            Url_Access_Token.ToString(CultureInfo.InvariantCulture) : "/get_access_token";

        /// <summary>
        /// Federation base url.
        /// </summary>
        internal static string IdFedOAuthBaseUrl = Intuit_OAuth_BaseUrl != null ?
            Intuit_OAuth_BaseUrl.ToString(CultureInfo.InvariantCulture) : "https://oauth.intuit.com/oauth/v1";

        /// <summary>
        /// Authorize url.
        /// </summary>
        internal static string AuthorizeUrl = Intuit_Workplace_AuthorizeUrl != null ?
            Intuit_Workplace_AuthorizeUrl.ToString(CultureInfo.InvariantCulture) : "https://workplace.intuit.com/Connect/Begin";
    }

    /// <summary>
    /// Intuit Anywhere Endpoints.
    /// </summary>
    internal class IaEndPoints
    {
        /// <summary>
        /// BlueDot Menu Url.
        /// </summary>
        internal static string BlueDotAppMenuUrl = BlueDot_AppMenuUrl != null ?
            BlueDot_AppMenuUrl.ToString(CultureInfo.InvariantCulture) : "https://workplace.intuit.com/api/v1/Account/AppMenu";

        /// <summary>
        /// Disconnect url.
        /// </summary>
        internal static string DisconnectUrl = DisconnectUrl != null ?
            DisconnectUrl.ToString(CultureInfo.InvariantCulture) : "https://appcenter.intuit.com/api/v1/Connection/Disconnect";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:24:02.823

> QuickBooks Desktop 的基本 URL 是什么？

根据[文档](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0100_Calling_Data_Services/0011_Creating_an_Object)，QuickBooks 桌面版 IDS 的 URL 遵循以下格式：

```
https://services.intuit.com/sb/<objectName>/v2/<realmID> 
```

但是，您遇到的问题：

> 我只看到我的 QuickBooks Online 实例。

听起来与基本 URL 无关。这听起来更像是您没有设置同步管理器，或者您的应用程序设置没有勾选 QuickBooks 桌面选项以允许 QuickBooks 的桌面版本连接到您的应用程序。

# dart - 在飞镖中进行系统调用？

> ID：14347483
> 
> 赞同：10
> 
> 时间：2013-01-15T21:43:13.750
> 
> 标签：dart

我想从 dart 内部执行 python 或 java 类。

以下是我从 stackoverflow 问题 Java 中使用的片段

```
Runtime currentRuntime = Runtime.getRuntime();
Process executeProcess = currentRuntime.exec("cmd /c c:\\somepath\\pythonprogram.py"); 
```

我想知道如何在 dart 中进行此类调用。

基本上我有一个 UI，用户在其中上传 java 和 python 中的代码。我想从 dart 环境中执行上传的代码，而不是在上传代码的文件夹上用 java 或 python 创建例程。

我个人不知道这是否可能，因为 dart 纯粹是在 VM 中。

我想执行以下命令

```
java abc 
```

从飞镖内部。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-15T21:58:42.637

您可以简单地使用[Process.run](http://api.dartlang.org/docs/bleeding_edge/dart_io/Process.html#run)。

```
import 'dart:io';

main() {
  Process.run('java', ['abd']);
} 
```

您还可以访问并通过生成`stdout`的[ProcessResult](http://api.dartlang.org/docs/bleeding_edge/dart_io/ProcessResult.html)：`stderr``exitCode`

```
import 'dart:io';

main() {
  Process.run('java', ['abd']).then((ProcessResult pr){
    print(pr.exitCode);
    print(pr.stdout);
    print(pr.stderr);
  });
} 
```

# javascript - 返回假；不会阻止 Javascript 警报刷新页面

> ID：14347486
> 
> 赞同：1
> 
> 时间：2013-01-15T21:43:23.140
> 
> 标签：javascript, alert

我的代码看起来有点像这样：

```
...
if (reason.options[reason.selectedIndex].value == "0") {
    alert("You must pick a reason for selecting this carrier");
    return false;
}
... 
```

我正在检查他们是否未触及下拉列表（值 =“0”），如果是，我会发出警报。return false 应该阻止警报刷新/回发，但它似乎仍然清除了所有内容。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:45:21.270

仅当`return false`它是顶级函数时才会停止操作。

```
element.onclick = function() {return false}; 
```

这样可行。这不会：

```
function handle() {return false;}
<a href="somepage.html" onclick="handle()">Click</a> 
```

您需要确保“传递”返回值，例如：

```
<a href="somepage.html" onclick="return handle();">Click</a> 
```

# php - 使用 $stmt -> fetch() 之前检查结果

> ID：14347493
> 
> 赞同：3
> 
> 时间：2013-01-15T21:44:18.167
> 
> 标签：php, mysql, mysqli

可能是一个愚蠢的问题。我有以下代码：

```
while ($stmt -> fetch()) {
    echo "<p><strong>" .$name. "</strong><br />" .$comment. "</p>";
} 
```

我只想在 $stmt -> fetch() 返回至少一行（这是一个 SELECT 查询）时执行 while .. 但如果我这样做

```
if ($stmt -> fetch()) 
```

它已经执行了一次，我想避免这种情况。有什么线索吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T21:46:08.327

[http://php.net/manual/en/mysqli-stmt.num-rows.php](http://php.net/manual/en/mysqli-stmt.num-rows.php)

尝试使用`$stmt->num_rows > 0`

```
$stmt->store_result();
if( $stmt->num_rows > 0 )
{
    while( $stmt->fetch() ) {
        echo "<p><strong>" .$name. "</strong><br />" .$comment. "</p>";
    }
} 
```

为什么`mysqli_result`有一个`fetchAll`功能而`mysqli_stmt`不是....我不知道。

* * *

更长，但可能有效

```
$result = $stmt->fetch();
if( !empty( $result )
{
    do
    {
        echo "<p><strong>" .$name. "</strong><br />" .$comment. "</p>";
    } while( $result = $stmt->fetch() ); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:49:52.063

我认为您必须至少查询一次数据库才能获得计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:53:24.943

通过调用

```
while( $stmt->fetch() ) {
    // do stuff
} 
```

您已经进行了正确的检查，并且`do stuff`只有在有多个结果时才会出现该部分。所以你已经在做你需要做的一切。

即你`echo`只会发生`numRows`大于0。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-09-20T08:08:22.320

`rowCount()`返回受 DELETE、INSERT 或 UPDATE 语句影响的行数。

```
<?php
/* Delete all rows from the FRUIT table */
$stmt= $dbh->prepare('DELETE FROM fruit');
$stmt->execute();

/* Return number of rows that were deleted */
$count = $stmt->rowCount();
print("Deleted $count rows.\n");
?> 
```

上面的示例将输出：

```
 Deleted 9 rows. 
```

# c# - 上传图片 windows phone 和 WCF

> ID：14347494
> 
> 赞同：0
> 
> 时间：2013-01-15T21:44:19.110
> 
> 标签：c#, .net, wcf, windows-phone-7, file-upload

我正在创建一个 Windows 手机应用程序，并且该应用程序连接到 WCF 服务器。我现在遇到的问题是图片上传功能。我需要使用哪个功能？我找不到我的问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:00:27.907

所以你需要在你的 WCF 端有一个简单的字节函数

```
 [OperationContract]
    public void ReceiveByteArray(byte[] byteArray) { ... } 
```

并将您的图像转换为字节

```
public byte[] BufferFromImage(BitmapImage imageSource)
{        
    Stream stream = imageSource.StreamSource;
    byte[] buffer = null;

    if (stream != null && stream.Length > 0)
    {
        using (BinaryReader br = new BinaryReader(stream))
        {
            buffer = br.ReadBytes((Int32)stream.Length);
        }
    }

    return buffer;
} 
```

然后发送你的图片

```
byte[] image=BufferFromImage(imageSource);
ReceiveByteArray(image) 
```

# android - 长按列表视图和删除对话框

> ID：14347497
> 
> 赞同：2
> 
> 时间：2013-01-15T21:44:27.790
> 
> 标签：android, android-alertdialog

我正在使用`onlongitemclick`并且可以生成一个对话框来确认删除，但我无法获得`listitem`位置或文本。

编辑：我无法在 public void onClick(DialogInterface dialog, int which) 函数中获取 selectedValue 字符串值。

`lv`是我的`listview`对象

```
 lv.setOnItemLongClickListener(new OnItemLongClickListener() 
    {
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
        {
             ListView list1 = (ListView) findViewById(android.R.id.list);
              final String selectedValue = (String) list1.getItemAtPosition(arg2);
                AlertDialog.Builder alertDialog = new  AlertDialog.Builder(RecipeList.this);
                alertDialog.setTitle("Delete");
                alertDialog.setMessage(selectedValue);     
                alertDialog.setNegativeButton("Delete", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int which) {

                                obj Recipe = new obj(selectedValue, RecipeList.this);

                                Recipe.remove(<I need the listview item to create the object and then delete some listing in the DB, seletecValue should do this, but it does not>)
                                Intent intent2 = new Intent(RecipeList.this, RecipeList.class); //go to recipe list
                                startActivity(intent2);

                   } }); 
                   alertDialog.setPositiveButton("Keep", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int which) {
                          // alertDialog.dismiss();
                   } }); 

                   alertDialog.show();
                return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:48:49.680

`arg1`是您的视图，您应该能够从视图中获取文本。

`arg2`是位置。

请参阅：http: [//developer.android.com/reference/android/widget/AdapterView.OnItemLongClickListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemLongClickListener.html)

# ios - 按字符串对对象数组进行排序

> ID：14347503
> 
> 赞同：0
> 
> 时间：2013-01-15T21:44:52.947
> 
> 标签：ios, nsmanagedobject, nssortdescriptor

我有一个托管对象数组。每个都有一个标题（名称）。我想不按字母顺序对这些进行排序，而是按与某个字符串最接近的字符串（搜索查询）进行排序

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:52:55.337

如果您定义“最接近”匹配函数并简单地将接近值分配给这些对象（与搜索查询相比）并按此排序，这可能是最好的。

# iphone - 带有按钮的自定义注释。didSelectAnotaionView 似乎没有被调用

> ID：14347507
> 
> 赞同：1
> 
> 时间：2013-01-15T21:45:11.550
> 
> 标签：iphone, ios, objective-c, xcode, ipad

当我使用自定义注释视图时，我的 didSelectAnnotationView 被调用时遇到问题。我希望有人能够看看并帮助我解决我所缺少的东西。

我实际上希望在用户触摸我的自定义注释屏幕截图中显示的按钮时调用一个方法，如下所示。我试图制作 calloutAccessoryView，但我做错了什么。如果有人完成了用户可以点击的自定义注释视图，请查看您是否可以提供帮助！这真让我抓狂。我想我已经在这里发布了相关信息，如果不问，我会编辑我的帖子。

**我正在添加这样的自定义注释：**

```
LocationObject * obj = [m_MyObject.marLocations objectAtIndex:page];
obj.title =@"A";
[mvMapView addAnnotation:obj]; 
```

**上面使用的我的 Location 对象定义如下：**

```
// Location Object
@interface LocationObject : NSObject <MKAnnotation>

@property (nonatomic, retain) NSString * practicename;
@property (nonatomic, retain) NSString * address1;
@property (nonatomic, retain) NSString * mapaddress1;
@property (nonatomic, retain) NSString * address2;
@property (nonatomic, retain) NSString * city;
@property (nonatomic, retain) NSString * state;
@property (nonatomic, retain) NSString * zip;
@property (nonatomic, retain) NSString * phone;
@property (nonatomic, retain) NSString * fax;
@property (nonatomic, retain) NSString * email;
@property (nonatomic, retain) NSString * longitude;
@property (nonatomic, retain) NSString * latitude;
@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

@end // End Location Object 
```

**我的 viewForAnnotation 这样做：**

```
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
    {
        [map.userLocation setTitle:@"I am here"];
        return nil;
    }

    static NSString* AnnotationIdentifier = @"annotationViewID";
    ViewDirectionsAnnotationView * annotationView = [[ViewDirectionsAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
    int page = floor((svOfficesScrollView.contentOffset.x - svOfficesScrollView.frame.size.width / 2) / svOfficesScrollView.frame.size.width) + 1;
    LocationObject * obj = [m_DentistObject.marLocations objectAtIndex:page];
    double dLatitude = [obj.latitude doubleValue];
    double dLongitude = [obj.longitude doubleValue];
    CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(dLatitude, dLongitude);
    ((LocationObject*)annotation).coordinate = coordinate;
    annotationView.lbPracticeName.text = obj.practicename;
    annotationView.lbStreet.text = obj.address1;
    NSString * sCityStateZip = [NSString stringWithFormat:@"%@, %@ %@", obj.city, obj.state, obj.zip];
    annotationView.lbCityStateZip.text = sCityStateZip;
    annotationView.lbPhoneNumber.text = obj.phone;
    annotationView.canShowCallout = YES;
    annotationView.annotation = annotation;
    annotationView.rightCalloutAccessoryView = (UIButton *)[annotationView viewWithTag:1]; //[UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    return annotationView;
} 
```

**我的注释视图是这样的：**

```
@interface ViewDirectionsAnnotationView : MKAnnotationView
{
    CLLocationCoordinate2D    coordinate;
    NSString        * title;
    NSString        * subtitle;
}

@property (nonatomic, retain) IBOutlet UIView * loadedView;
@property (weak, nonatomic) IBOutlet UILabel  * lbPracticeName;
@property (weak, nonatomic) IBOutlet UILabel  * lbStreet;
@property (weak, nonatomic) IBOutlet UILabel  * lbCityStateZip;
@property (weak, nonatomic) IBOutlet UILabel  * lbPhoneNumber;

@end 
```

上述视图的 xib 如下所示：

![在此处输入图像描述](../Images/1e79424377d5c61649dce87a4483c910.png)

但是，我的 didSelectAnnotationView 永远不会被调用。谁能解释我错过了什么？

请，感谢任何帮助，这让我发疯了。我可能完全错了，但自定义视图确实出现了，所以我认为我很接近。

谢谢您的帮助！！

更新：

我忘了提到代表。我已经多次检查了代表，并相信我是对的。在 mapView 所在的 ViewController .h 文件中，我设置了 [mapView setDelegate:self] 在同一个 .m 文件中，我实现了 viewForAnnotation 方法和 didSelectAnnotationView。viewForAnnotation 被调用，但不是另一个。

一条更有趣的信息是，如果我在自定义注释下方单击（触摸），则会调用 didSelectAnnotationView。我想我现在更困惑了！！

更新#2：

我的 xib 是这样加载的：

在我看来ForAnnotation 我称之为initWithAnnotation。该方法如下：

```
- (id)initWithAnnotation:(id <MKAnnotation>)annotation reuseIdentifier:(NSString*)reuseIdentifier
{
    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
    if (self != nil)
    {
        [[NSBundle mainBundle] loadNibNamed:@"DirectionsAnnotation" owner:self options:nil];
        if (loadedView)
        {
            [loadedView setFrame:CGRectMake(-(loadedView.frame.size.width/2), -(loadedView.frame.size.height), loadedView.frame.size.width, loadedView.frame.size.height)];
            [self addSubview:loadedView];
        }
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:30:22.807

显示您的 MapView 的视图需要设置为您的委托。

你的 didSelectAnnotationView 在哪里？确保它实现了委托协议。例如

```
@interface MyView : UIViewController <MKMapViewDelegate>
...
@end 
```

然后在别的地方...

```
[mapView setDelegate:myView]; 
```

# c# - 如何在将文件上传到服务器之前检测 Word 文档是否受密码保护？

> ID：14347513
> 
> 赞同：1
> 
> 时间：2013-01-15T21:45:35.940
> 
> 标签：c#, .net, webforms

我正在开发一个网站，该网站允许用户上传不同的文件格式。我们需要限制用户上传受密码保护的文件。

有没有办法在上传文件之前确定 Microsoft Office 文件（Word、Powerpoint 和 Excel）是否受密码保护？根据[http://social.msdn.microsoft.com/Forums/en/oxmlsdk/thread/34701a34-f1d4-4802-9ce4-133f15039c69](http://social.msdn.microsoft.com/Forums/en/oxmlsdk/thread/34701a34-f1d4-4802-9ce4-133f15039c69)，我已经实现了以下内容，但它抛出了一个错误，说“文件包含损坏的数据” ，同时尝试打开受密码保护的文件。

```
 using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(mem, false))
 {
     DocumentProtection dp =
         wordDoc.MainDocumentPart.DocumentSettingsPart.Settings.GetFirstChild<DocumentProtection>();
     if (dp != null && dp.Enforcement == DocumentFormat.OpenXml.OnOffValue.FromBoolean(true))
     {
         return true;
     }
 } 
```

还有其他方法可以确定吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T22:01:12.353

试试这个代码：

```
public static Boolean IsProtected(String file)
{
    Byte[] bytes = File.ReadAllBytes(file);

    String prefix = Encoding.Default.GetString(bytes.Take(2).ToArray());

    // Zip and not password protected.
    if (prefix == "PK")
        return false;

    // Office format.
    if (prefix == "ÐÏ")
    {
        // XLS 2003
        if (bytes.Skip(0x208).Take(1).ToArray()[0] == 0xFE)
            return true;

        // XLS 2005
        if (bytes.Skip(0x214).Take(1).ToArray()[0] == 0x2F)
            return true;

        // DOC 2005
        if (bytes.Skip(0x20B).Take(1).ToArray()[0] == 0x13)
            return true;

        // Guessing
        if (bytes.Length < 2000)
            return false;

        // DOC/XLS 2007+
        String start = Encoding.Default.GetString(bytes.Take(2000).ToArray()).Replace("\0", " ");

        if (start.Contains("E n c r y p t e d P a c k a g e"))
            return true;

        return false;
    }

    // Unknown format.
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-07T11:31:06.273

抱歉，我在这里聚会有点晚了。由于我还没有 50 名声望，所以我无法评论 Tomasso Belluzo 的回答，但是当我实施它时，我发现了以下内容：

1.  要获取前缀，我使用 Encoding.UTF7.GetString
2.  要检查“EncryptedPackage”，我使用 Encoding.Unicode.GetString 消除了删除所有 \0s 的需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:08:09.600

要回答这个问题：

为了判断文件是否受密码保护，您需要*在浏览器*中打开该文件并进行处理。目前，打开文件客户端的唯一机制是通过 HTML5 的 FileAPI，这不是普遍支持的。这意味着没有*可靠*的方法可以做到这一点。

现在，您可以*在服务器上*测试文件以确定它是否受密码保护，然后根据您的规则将其丢弃或保存。

顺便说一句，您提供的代码是服务器端代码。只需对其进行修改以捕获损坏的异常并向用户显示有关文件如何损坏或密码保护的消息，并附上有关您如何不允许上传受密码保护的文件的注释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T23:36:55.170

**以下是在 .aspx 源文件中**

```
 Page Language="C#" AutoEventWireup="true" CodeBehind="TestForm.aspx.cs" Inherits="TestApp.TestForm"

 !DOCTYPE html PUBLIC
 Reference Page ="~/TestForm.aspx" // Note: Removed all HTML tags 
```

```
    protected void Upload_Click(object sender, EventArgs e)
    {
        字符串 noPW = "C:\\Users\\David\\Desktop\\Doc1.docx";
        String pwProtected = "C:\\Users\\David\\Desktop\\Test.docx";
    // if (isProtected(pwProtected))
    // 结果.Text = ("文档受密码保护");
    // 别的
    // 结果.Text = ("文档不受密码保护");

        if (isProtected(noPW))
            结果.Text = ("文档受密码保护");
        别的
            结果.Text = ("文档不受密码保护");
    }

```

**以下是 .aspx.cs 代码隐藏文件**

```
    使用系统；
    使用 System.Collections.Generic；
    使用 System.Linq；
    使用 System.Web；
    使用 System.Web.UI；
    使用 System.Web.UI.WebControls；
    使用 Microsoft.Office.Interop.Word；
    使用 System.Runtime.InteropServices；
    使用 Microsoft.Office.Interop.Word；

    命名空间 TestApp
    {
        公共部分类 TestForm : System.Web.UI.Page
        {

            protected void Page_Load(object sender, EventArgs e)
            {

            }
            公共静态布尔 isProtected（对象文件路径）
            {
                应用程序 myapp = new Application();

                对象 pw = "这个密码";
                尝试
                {

                    // 对 Word 文档试试这个
                    myapp.Documents.Open(ref filePath, PasswordDocument: ref pw); // 尝试打开
                    myapp.Documents[参考文件路径].Close(); // 如果打开就关闭    
                }
                捕捉（COMException ex）
                {
                    if (ex.HResult == -2146822880) // 因密码无效而无法打开文档
                        返回真；
                    别的
                        Console.WriteLine(ex.Message + " " + ex.HResult); // 调试用，只测试过这一份文件。
                }
                返回假；
            }
        }

    }

```

至少在我的计算机上，我得到了两个文件的预期输出，但这并不是你所说的对代码的详尽测试。此外，我尝试使用 FileUpload 控件上传文件，但我收到 COM 错误“找不到 C:\Windows\System\fileName.docx”，这让我很困惑，因为上传的文件来自我的桌面，但是你可能知道为什么会发生这种情况，因为您比我更熟悉 ASP.NET。无论哪种方式，这段代码都是值得尝试的，希望对您有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-08T15:39:30.520

像[notme](https://stackoverflow.com/users/2424)一样，我不知道有一种方法可以在上传文件的一部分*之前*判断文件是否受密码保护，但是这个问题的公认答案虽然在技术上很好，但有点矫枉过正。

有关测试文件是否受密码保护的更简单、更快捷的方法，请参阅[检测受密码保护的 word 文件。](https://stackoverflow.com/questions/26235417/detect-password-protected-word-file)

此外，对于那些在 VBA/S 中寻找解决方案的人来说，以下是前者的版本，它很容易适应后者。www.ozgrid.com/forum/showthread.php?t=148962。尽管我建议检查 err.number = 5408 （在受保护时会使用错误的密码抛出什么），而不是使用任何 err.number 来确定该文件是否受密码保护。

# logging - 是否可以在没有换行符的情况下使用 SLF4j 登录到文件？

> ID：14347514
> 
> 赞同：2
> 
> 时间：2013-01-15T21:45:46.250
> 
> 标签：logging, log4j, slf4j

是否可以在没有换行符的情况下使用 SLF4j 登录到文件？

基本上，我有一个打印“。”的 waitTimer() 方法。每秒一次，我希望所有点都出现在日志文件的一行上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:58:43.263

从此[，](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)如果您的 log4j 布局中有 %n ，则会在每条消息中自动附加行分隔符，例如“\n”。删除它将使所有消息出现在一行中。但是如果你还想用换行符保留其他消息，你最好定义两个appender。

# php - PHP Post - 请求实体太大

> ID：14347517
> 
> 赞同：0
> 
> 时间：2013-01-15T21:46:05.957
> 
> 标签：php, xml, post, curl

> **可能重复：**
> [我正在尝试使用 Curl 向 URL 发出 POST 请求，但出现此错误？](https://stackoverflow.com/questions/5091151/i-am-trying-to-make-a-post-request-to-a-url-using-curl-but-getting-this-error)

我正在尝试使用包含一些 XML 的 curl 向服务器发出 POST 请求，但我收到错误“请求实体太长”有人能指出我做错了什么吗？谢谢！:)

```
$url = 'http://web1.trueship.com/readyreturns/company/api.php/orders?key=xxxxxxxxxxxxxxxxxx&overwrite=true';

$curl = curl_init(); 
    curl_setopt($curl, CURLOPT_HTTPHEADER, Array("&xml=".$encodedXml)); 
    curl_setopt ($curl, CURLOPT_URL, $url); 
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);     
    curl_setopt($curl, CURLOPT_POST, TRUE); 
    $result = curl_exec ($curl); 
    curl_close ($curl); 
    print $result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:53:25.053

在我看来，这条消息意味着您尝试处理的请求大于服务器愿意或能够处理的请求。您可能需要配置您的 php.ini 文件。ini 不同

您要查找的设置值是“post_max_size”

如果您想查看此值但无权访问您的 php 设置，请编写一个带有`<? phpinfo() ?>` 标签的简单 php 页面，它将显示您当前配置的 php.ini 值。然后，您可以联系您的管理员进行修改

# android - 对话框在 HoloEverywhere 中不可见

> ID：14347519
> 
> 赞同：1
> 
> 时间：2013-01-15T21:46:08.147
> 
> 标签：android, android-holo-everywhere

我正在尝试使用 HoloEverywhere 实现 DialogFragment。但是对话框的边框是不可见的，如下图所示

![在此处输入图像描述](../Images/0089c0160a9ca57aa7efe0caf98a01e4.png)

**DialogsDialogFragment**

```
import org.holoeverywhere.LayoutInflater;
import org.holoeverywhere.app.DialogFragment;

import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;

public class DialogsDialogFragment extends DialogFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.dialog_content);
    }
} 
```

**ABSHoloChk**

```
public void onCreate(Bundle savedInstanceState) {
        Holo config = Holo.defaultConfig();
        init(config);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button button = (Button) findViewById(R.id.voicerecorder_send);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                FragmentManager fm = getSupportFragmentManager();
                DialogsDialogFragment dialog = new DialogsDialogFragment();
                fm.beginTransaction()
                        .add(R.id.dialog_fragment, dialog)
                        .commit();

            }
        }); 
```

**我的应用程序**

```
public class MyApplication extends Application {

    static {
        ThemeManager.setDefaultTheme(ThemeManager.DARK);
    }
} 
```

无法弄清楚问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:57:23.277

DialogFragment 需要与其他 Fragment 区别对待。[我已经从这里](http://developer.android.com/reference/android/app/DialogFragment.html)的 Android 开发者网站链接复制了以下代码，它工作正常。

**ABSHoloChk**

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    showDialog();
}
public void showDialog() {
    DialogFragment newFragment = DialogsDialogFragment.newInstance("Alert Dialog Two Button Title");
    newFragment.show(getSupportFragmentManager(), "dialog");
} 
```

**DialogsDialogFragment**

公共类 DialogsDialogFragment 扩展 DialogFragment {

```
public static DialogsDialogFragment newInstance(String title) {
    DialogsDialogFragment frag = new DialogsDialogFragment();
    Bundle args = new Bundle();
    args.putString("title", title);
    frag.setArguments(args);
    return frag;
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    String title = getArguments().getString("title");

    return new AlertDialog.Builder(getActivity())
            .setTitle(title)
            .setIcon(R.drawable.ic_action_refresh)
            .setMessage("A new version of the App is available, please download it!!")
            .setPositiveButton("Ok",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            ((ABSHoloChk)getActivity()).doPositiveClick();
                        }
                    }
            )
            .setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            ((ABSHoloChk)getActivity()).doNegativeClick();
                        }
                    }
            )
            .create();
} 
```

}

# ios - 仅使用时间按日期对数组进行排序？

> ID：14347532
> 
> 赞同：3
> 
> 时间：2013-01-15T21:47:51.220
> 
> 标签：ios, objective-c, cocoa-touch, sorting, nsdate

我目前正在对具有属性的对象数组进行排序，`startTime`但是我意识到它是按日期和时间排序的。

因此，如果我添加一个对象并将时间设置为比预制对象更早的时间，如果它在一天之后制造，它将始终排在另一个之后。有道理？

所以假设我的 NSDate 是星期二 25 日下午 6:02。我想从 26 号星期二开始，只按时间排序，这一天对我来说并不重要。我怎样才能做到这一点？

谢谢。

PS这就是我目前对我的对象进行排序的方式：

```
NSSet *tasks = [self.routine task];
    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"startTime" ascending:YES];
    NSArray *sorted = [[tasks allObjects] sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort]]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T22:56:38.963

创建一个类别`NSDate`，返回当前日历和时区从一天开始以来的时间间隔，然后使用该时间间隔进行排序。

```
@interface NSDate (CBVAdditions)

- (NSTimeInterval)cbvTimeIntervalSinceStartOfDay;

@end

@implementation NSDate (CBVAdditions)

- (NSTimeInterval)cbvTimeIntervalSinceStartOfDay
{
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSTimeZone *timeZone = [NSTimeZone defaultTimeZone];
    NSDateComponents *dateComponents = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:self];
    [dateComponents setCalendar:calendar];
    [dateComponents setTimeZone:timeZone];
    NSInteger hoursComponent = dateComponents.hour * 3600;
    NSInteger minutesComponent = dateComponents.minute * 60;
    double secondsComponent = dateComponents.second;
    NSTimeInterval toReturn = hoursComponent + minutesComponent + secondsComponent;
    return toReturn;
}

@end 
```

然后，你可以用`NSSortDescriptor`一个键`@"dateProperty.cbvTimeIntervalSinceStartOfDay"`来做实际的排序。例如，我展示了`Event`类和一些完成排序的代码。

```
@interface Event : NSObject

@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSDate *eventDate;

@end

@implementation Event

- (NSString *)description
{
    NSString *desc = [NSString stringWithFormat:@"%@, name = %@, eventDate = %@",[super description], self.name, [self.eventDate descriptionWithLocale:[NSLocale currentLocale]]];
    return desc;
}
@end

...

Event *e1 = [Event new];
e1.eventDate = [NSDate date];
e1.name = @"e1";
Event *e2 = [Event new];
e2.eventDate = [NSDate dateWithTimeIntervalSinceNow:(-1 * 22 * 3600)];
e2.name = @"e2";
Event *e3 = [Event new];
e3.eventDate = [NSDate dateWithTimeIntervalSinceNow:3600];
e3.name = @"e3";

NSArray *events = @[e1,e2,e3];
NSLog(@"Events = %@", events);
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"eventDate.cbvTimeIntervalSinceStartOfDay" ascending:YES];
NSArray *sortedEvents = [events sortedArrayUsingDescriptors:@[sortDescriptor]];
NSLog(@"Sorted Events = %@", sortedEvents); 
```

执行此代码显示以下输出：

```
2013-01-15 15:50:54.221 DateSortingFun[67319:c07] Events = (
    "<Event: 0x717b050>, name = e1, eventDate = Tuesday, January 15, 2013, 3:50:54 PM Mountain Standard Time",
    "<Event: 0x717b620>, name = e2, eventDate = Monday, January 14, 2013, 5:50:54 PM Mountain Standard Time",
    "<Event: 0x717b650>, name = e3, eventDate = Tuesday, January 15, 2013, 4:50:54 PM Mountain Standard Time" ) 

2013-01-15 15:50:54.222 DateSortingFun[67319:c07] Sorted Events = (
    "<Event: 0x717b050>, name = e1, eventDate = Tuesday, January 15, 2013, 3:50:54 PM Mountain Standard Time",
    "<Event: 0x717b650>, name = e3, eventDate = Tuesday, January 15, 2013, 4:50:54 PM Mountain Standard Time",
    "<Event: 0x717b620>, name = e2, eventDate = Monday, January 14, 2013, 5:50:54 PM Mountain Standard Time" ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T22:55:32.420

使用比较块。并在块中创建一个新数据，将年、月和日期设置为同一天。在这些日期进行正常比较。

```
 NSDateComponents *comps = [[NSDateComponents alloc] init];
    comps.year = 2007;
    comps.month = 12;
    comps.day = 3;
    comps.hour = 12;
    comps.minute = 3;

    NSDate *date1 = [[NSCalendar currentCalendar] dateFromComponents:comps];

    comps.year = 2012;
    comps.month = 9;
    comps.day = 7;
    comps.hour = 11;
    comps.minute = 13;

    NSDate *date2 = [[NSCalendar currentCalendar] dateFromComponents:comps];

    comps.year = 2021;
    comps.month = 12;
    comps.day = 3;
    comps.hour = 12;
    comps.minute = 5;

    NSDate *date3 = [[NSCalendar currentCalendar] dateFromComponents:comps];

    comps.year = 2021;
    comps.month = 12;
    comps.day = 3;
    comps.hour = 13;
    comps.minute = 5;

    NSDate *date4 = [[NSCalendar currentCalendar] dateFromComponents:comps];

    NSArray *dates = @[date1, date2, date3, date4];

    NSArray *oderedByTimeOnlyDates = [dates sortedArrayUsingComparator:^NSComparisonResult(NSDate *d1, NSDate *d2) {
        NSDateComponents *comps1 = [[NSCalendar currentCalendar] components:(NSHourCalendarUnit| NSMinuteCalendarUnit | NSSecondCalendarUnit)
                                                                  fromDate:d1];
        NSDateComponents *comps2 = [[NSCalendar currentCalendar] components:(NSHourCalendarUnit| NSMinuteCalendarUnit | NSSecondCalendarUnit)
                                                                   fromDate:d2];

        NSDate *date1 = [[NSCalendar currentCalendar] dateFromComponents:comps1];
        NSDate *date2 = [[NSCalendar currentCalendar] dateFromComponents:comps2];
        return [date1 compare:date2];
    }];

    NSLog(@"%@", oderedByTimeOnlyDates); 
```

输出：

```
(
    "2012-09-07 09:13:00 +0000",
    "2007-12-03 11:03:00 +0000",
    "2021-12-03 11:05:00 +0000",
    "2021-12-03 12:05:00 +0000"
) 
```

输出采用 UTC 时间，而它们是在 UTC+1 中创建的。

# vb.net - 关闭从函数内打开的 OLE DB 连接

> ID：14347533
> 
> 赞同：1
> 
> 时间：2013-01-15T21:47:55.523
> 
> 标签：vb.net, ole, oledbcommand

把自己撑在一个角落里......

使用了我在网上找到的一段代码，但无法弄清楚如何关闭此连接。返回的 OleDbcommand objCommand 在处理后保持打开状态。我需要将其关闭，以便在从中提取数据后删除该文件。（不希望他们在服务器上闲逛。）

这必须比我尝试执行的 100 行代码更容易。该函数打开连接。

```
Protected Function ExcelConnection() As OleDbCommand
    Dim fileName As String = Session("newUploadedFile")

    ' Connect to the Excel Spreadsheet
    Dim xConnStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;" & _
          "Data Source=" & Server.MapPath(String.Format("~/Upload/{0}", fileName)) & ";" & _
          "Extended Properties=Excel 8.0;"

    ' create your excel connection object using the connection string
    Dim objXConn As New OleDbConnection(xConnStr)
    objXConn.Open()
    ' use a SQL Select command to retrieve the data from the Excel Spreadsheet
    ' the "table name" is the name of the worksheet within the spreadsheet
    ' in this case, the worksheet name is "Sheet1" and is expressed as: [Sheet1$]

    Dim objCommand As New OleDbCommand("SELECT Name FROM [Sheet1$]", objXConn)

    Return objCommand
End Function 
```

我试过了...

```
 ExcelConnection.connection.close() 
```

以及大约 40 次其他尝试重新创建命令然后关闭它。

真的可以在这方面使用一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:51:05.150

这可能不是最好的方法，但如果您真的必须这样做，请考虑在调用例程中定义和打开连接，并将其作为参数传递给该例程。然后可以在调用路由中关闭它，因此......

```
Sub Main()

    Dim xConnStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;" & _
        "Data Source=" & Server.MapPath(String.Format("~/Upload/{0}", fileName)) & ";" & _
        "Extended Properties=Excel 8.0;"

    Dim objXConn As New OleDbConnection(xConnStr)
    objXConn.Open()
    Dim ObjCommand As New OleDbCommand = ExcelConnection(objXConn)

    'Whatever other operations you want to do with your returned OleDbCommand
    ...

    objXConn.Close()

End Sub

Function ExcelConnection(PassedConnection As OleDbConnection) As OleDbCommand
    Dim fileName As String = Session("newUploadedFile")
    Dim objCommand As New OleDbCommand("SELECT Name FROM [Sheet1$]", PassedConnection)
    Return objCommand
End Function 
```

我在这里发布了与此类似的内容...[阅读 Excel 工作表的最快方法](https://stackoverflow.com/questions/14261655/best-fastest-way-to-read-an-excel-sheet-into-a-datatable)

# javascript - Blob 构造函数在 Safari/Opera 中不起作用？

> ID：14347534
> 
> 赞同：4
> 
> 时间：2013-01-15T21:47:55.540
> 
> 标签：javascript

我正在尝试从原始来自二进制字符串的数组缓冲区构造一个 Blob。它在 Firefox 和 Chrome 中运行良好，但我不知道 Safari 和 Opera 有什么问题

这是我的问题的简化版本： [http ://plnkr.co/edit/sfEEHf?p=preview](http://plnkr.co/edit/sfEEHf?p=preview)

```
// 1x1 red PNG pixle
base64 = "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2P8z8DwHwAFBQIAHl6u2QAAAABJRU5ErkJggg==";
byteString = atob(base64);

// convert binary to array buff so we can construct a blob later
arrayBuffer = new ArrayBuffer(byteString.length);
intArray = new Uint8Array(arrayBuffer);

for (i = 0; i < byteString.length; i += 1) {
  intArray[i] = byteString.charCodeAt(i);
}

// construct blob
blob = new Blob([intArray], {type: "image/png"});
console.log(blob.size); // suppose to be 70 (its 19 in safari) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-03T02:03:36.323

在 Safari 中，您需要使用 TypedArray 上的“缓冲区”属性，即：

```
blob = new Blob([intArray.buffer], {type: "image/png"}); 
```

它会起作用的。

# javascript - window.scrollTo(...) 错误：Microsoft JScript 运行时错误：预期对象

> ID：14347537
> 
> 赞同：0
> 
> 时间：2013-01-15T21:48:00.007
> 
> 标签：javascript, vb.net, scroll, object-expected

我知道有很多关于此的帖子，但我整天都在寻找这样做。我在这里尝试实现的是单击 GridView 中的一行，然后将页面滚动到该位置，就像 html 中的锚点一样。

这是我用来滚动的链接。我在我的 js 文件中调用了一个函数。这是在我的 GridView 中。

```
<asp:LinkButton runat="server" OnClientClick="window.scrollTo(0, GetPosition(this))" CommandName="select" ID="InkSelect" Text="SELECT" /> 
```

然后，我在我的 js 文件中调用这个函数，像这样链接，以防万一：

```
<script type="text/javascript" src="~js/monjs.js"></script> 
```

在 monjs.js 中，函数如下：

```
function GetPosition(element) {
var top = 0;
var e = document.getElementById(element);
while (e.offsetParent != undefined && e.offsetParent != null) {
    top += e.offsetTop + (e.clientTop != null ? e.clientTop : 0);
    e = e.offsetParent;
}
return top;} 
```

而 Visual Studio 突出显示了这一行：

```
...... <a onclick="window.scrollTo(0, GetPosition(this));" ..... 
```

我尝试了许多其他方法来做到这一点，在 vb 文件中注册一个脚本，在 onclick 属性中硬编码 window.scrollTo(0,100)，我没有想法。我试过row.focus，不要提这个。谢谢。 ![在此处输入图像描述](../Images/8faf46da89c61cf74d262599ce49f449.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:49:43.160

```
 <a onclick="window.scrollTo(0, GetPosition(this));" 
                                              ^
                                              |
                                            An Object    
function GetPosition(element) {
    var top = 0;
    var e = document.getElementById(element);
                                      ^
                                      |
                                Expecting a string 
```

您正在传递一个对象并表现得像一个字符串。

```
var e = document.getElementById(element); 
```

需要是

```
var e = element; 
```

如果您的函数需要同时处理对象或字符串，您可以使用`this.id`onclick 处理程序传入

```
OnClientClick="window.scrollTo(0, GetPosition(this.id))" 
```

或进行类型检查。

```
 var e = typpeof element === "string" ? document.getElementById(element) : element; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:52:02.923

好的，我设法做某事。经过多次尝试......我在我的 aspx 文件中使用了这个：

```
<asp:LinkButton runat="server" OnClientClick="return Move(this);" CommandName="select" ID="_row" Text="SELECT" /> 
```

在我的 aspx.vb 文件中，我在页面加载功能中使用了它：

```
Dim myScriptName As String = "MovePageScript"
    If (Not ClientScript.IsClientScriptBlockRegistered(Page.GetType(), myScriptName)) Then
        Dim myScript As New StringBuilder()
        myScript.Append("<script type=""text/javascript""> function Move(element) {")
        myScript.Append("var top = 0;")
        myScript.Append("var e = typeof element === 'string' ? document.getElementById(element) : element;")
        myScript.Append("while (e.offsetParent != undefined && e.offsetParent != null) {")
        myScript.Append("top += e.offsetTop + (e.clientTop != null ? e.clientTop : 0);")
        myScript.Append("e = e.offsetParent; }")
        myScript.Append("window.scrollTo(0, top);")
        myScript.Append("return false;")
        myScript.Append("} </script>")
        ClientScript.RegisterClientScriptBlock(Page.GetType(), myScriptName, myScript.ToString(), False)
    End If 
```

并在我的 web.config 文件中使用它：

```
<pages maintainScrollPositionOnPostBack="true"> 
```

它取消了对行的选择，但至少它可以工作......我现在必须检查是否可以让它与 Telerik 的 Ragrid XD 一起使用

# cookies - Cookie 和 Redis 会话存储有什么区别？

> ID：14347540
> 
> 赞同：8
> 
> 时间：2013-01-15T21:48:05.620
> 
> 标签：cookies, redis, session-cookies, session-state, rack

我想在不同节点上的 2 个应用程序之间共享会话；但是，我很困惑 Cookie 和 Redis 会话存储之间的区别是什么；例如，一个 cookie 会话可能如下所示：

```
rack.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFRiJFN2YxZDMxMGE5YTNhZjc2NGM1NDBk%0AMzdiODQ0MjcyMzk5MzAxY2YyYzdhNDMwOWVkMzhiNWVlMmY2N2QwYzExNg%3D%3D%0A--ec4ec7b5a807c806e02e2811f4a11d05877a7698 
```

在 Redis 中，会话存储可能如下所示：

```
rack:session:eb23c0a055e9e6de3b8ad51efd9g6260d647b2e61326e35f5ff59cd490bfb405" 
```

但是，我很困惑如何共享这些会话。而在 cookie 方法中，请求携带会话的状态，我看不到 Redis 中的会话实际上如何与 2 个应用程序之间的状态匹配。有什么建议如何在 2 个机架应用程序之间使用 Redis / 共享会话状态？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-16T01:54:42.650

Redis 会话存储仍然使用 cookie 来跟踪客户端的会话 ID。不同之处在于存储在会话中的实际数据的位置。使用 cookie 存储，它被填充到 cookie 中，并随着每个请求来回发送。使用 redis-store，只有 session id 被传递到 cookie 中，实际的 session 数据是使用 cookie 中的 session id 从 Redis 检索的。这是对不同会话存储的各种[权衡](https://gist.github.com/1210255)的很好描述。

共享会话可以与 Cookie 和 Redis 会话存储一起使用。查看这两个问题以了解详细信息：

*   [Rails Checkout SSL heroku](https://stackoverflow.com/questions/4606041/rails-checkout-ssl-heroku)
*   [在有/没有自定义域的 Heroku 上，子域会话在 Rails 2.3 和 Rails 3 中不起作用？](https://stackoverflow.com/questions/5340989/subdomain-session-not-working-in-rails-2-3-and-rails-3-on-heroku-with-without-a)

# php - PHP 多维数组 - foreach 循环

> ID：14347546
> 
> 赞同：0
> 
> 时间：2013-01-15T21:48:35.233
> 
> 标签：php, arrays, foreach

我无法通过 foreach 函数更深入地获取数组值“lat”和“long”。大批：

```
array(1) {
  ["Berlin, Germany(All airports)"]=>
  array(1) {
    ["Berlin Brandenburg Willy Brandt(BER)"]=>
    array(2) {
      ["lat"]=>
      string(9) "52.366667"
      ["lon"]=>
      string(9) "13.503333"
    }
  } 
```

}

功能：

```
foreach($results as $key => $val){  
  //here i want to reach lat and long without additional foreach loop
} 
```

谢谢大家的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:50:08.760

```
foreach($results as $key => $val){  
  $temp = current($val); # fetch first value, which is array in your example
  echo $temp['lat'];
} 
```

# node.js - Express.js 为什么要从 2.x 升级到 3.x

> ID：14347548
> 
> 赞同：0
> 
> 时间：2013-01-15T21:48:46.963
> 
> 标签：node.js, express

试图找到升级的理由，而不是在 express 网站上与 API 文档保持同步。令我惊讶的是，我在这个主题上找不到任何东西。任何个人经验为什么 3.x 比 2.x 更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:50:27.000

[Express.js 3.x 中有新功能。](https://github.com/visionmedia/express/wiki/New-features-in-3.x)你想要他们吗？然后升级。

# iphone - 响应式设计 - Iphone 不接收媒体查询...在浏览器中工作

> ID：14347563
> 
> 赞同：0
> 
> 时间：2013-01-15T21:49:50.970
> 
> 标签：iphone, mobile, media-queries

在这个网站上工作：http: [//thegoodgood.com/gus_2](http://thegoodgood.com/gus_2) 响应式查询正在浏览器中工作，但是当我去 iphone 时，它​​没有使用查询......你可以在这里看到它： [http://www.we-are- gurus.com/tools/responsive-design-tester.php?url=http%3A%2F%2Fthegoodgood.com%2Fgus_2%2F&d=320x480&scroll=off#](http://www.we-are-gurus.com/tools/responsive-design-tester.php?url=http%3A%2F%2Fthegoodgood.com%2Fgus_2%2F&d=320x480&scroll=off#)

我已确保这包含在标题中：

有点难过？？？？

这是我使用的查询：@media screen and (max-width: 540px) {

（我已经在网上搜索并尝试了一堆不同的查询来尝试定位宽度但没有......）

感谢您的任何想法/帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:49:35.040

如果您在 Safari 或 Chrome 中打开该站点，您会注意到媒体查询也不起作用。这是因为它们比 Firefox 对右括号更严格，您的 900px 媒体查询或 740px 媒体查询没有右括号。添加这 2 个支架，iPhone 应该会正确更改。

如果您想支持 Internet Explorer，您可能还想在该浏览器上检查您的网站。

# java - xml文件有一些麻烦。安卓。蚀。错误：无效的开始标签 PreferenceScreen

> ID：14347565
> 
> 赞同：5
> 
> 时间：2013-01-15T21:49:53.217
> 
> 标签：java, android, xml

xml文件有一些麻烦。安卓。蚀。请帮助）错误：错误：无效的开始标签PreferenceScreen

第二行的错误通知

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
    xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory
        android:title="Работа с файлами">
        <CheckBoxPreference
            android:key="@string/pref_openmode"
            android:title="Открыть файл"
            android:summary="Открывать файл при запуске приложения" />
    </PreferenceCategory> 
```

（它只是一小部分......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T22:37:00.527

我认为您的文件位于错误的目录中。

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory
        android:title="Работа с файлами">
        <CheckBoxPreference
            android:key="@string/pref_openmode"
            android:title="Открыть файл"
            android:summary="Открывать файл при запуске приложения" />
    </PreferenceCategory>
</PreferenceScreen> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T09:41:05.920

```
 <?xml version="1.0" encoding="utf-8"?>
      <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
      <PreferenceCategory
    android:title="Работа с файлами">
    <CheckBoxPreference
        android:key="@string/pref_openmode"
        android:title="Открыть файл"
        android:summary="Открывать файл при запуске приложения" />
    </PreferenceCategory>
       </PreferenceScreen> 
```

The above is correct u should place this xml file in the values which is under res folder.

# asp.net - Asp.Net MVC4：Jquery Bundle 是空白的

> ID：14347567
> 
> 赞同：2
> 
> 时间：2013-01-15T21:50:03.437
> 
> 标签：asp.net, asp.net-mvc-4

我有一个包含这两个捆绑包的简单项目：

```
 bundles.Add(new ScriptBundle("~/Scripts/jquery").Include(
                    "~/Scripts/jquery/jquery-{version}.js",
                    "~/Scripts/jquery/jquery-ui-{version}.js",
                    "~/Scripts/jquery/jquery.unobtrusive*",
                    "~/Scripts/jquery/jquery.validate*"));

        bundles.Add(new StyleBundle("~/Styles/jquery").Include(
                    "~/Styles/jquery/jquery-ui-1.8.22.custom.css")); 
```

这似乎在本地工作正常（调试模式，因此它们没有被捆绑）；但是，一旦我将文件发布到我的文件系统，并将它们移到服务器上，它就不再正常运行：

我可以看到两个（捆绑的）文件引用都在页面上；但是，如果您查看服务器实际发送的内容，两个文件都是空白的。

什么会导致服务器为这两个包发送空白文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:42:04.503

做更多的研究，我可以看到对于这两个文件，服务器实际上正在向不同的生成文件发送 301 重定向响应，而这些生成的文件是我收到的空白文件。

由于该服务器上运行了多个应用程序和站点（一些 mvc），我认为这可能是捆绑系统的一些奇怪错误，并将我的捆绑包从“jquery”重命名为“jq”，因为其他应用程序可能正在使用这些名字，这确实解决了问题

# instagram - Instagram API 根据搜索查询检索图像

> ID：14347572
> 
> 赞同：2
> 
> 时间：2013-01-15T21:50:25.320
> 
> 标签：instagram

是否有基于搜索查询检索 Instagram 图像的 API，调用此 API 是否有任何限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:30:26.653

您有 2 个使用 API 搜索 Instagram 的选项：

1.  按标签搜索（仅限单个标签）： [https ://www.instagram.com/developer/endpoints/tags/#get_tags_search](https://www.instagram.com/developer/endpoints/tags/#get_tags_search)

2.  在给定位置搜索媒体：http: [//instagram.com/developer/endpoints/media/#get_media_search](http://instagram.com/developer/endpoints/media/#get_media_search)

API 将限制您对单个 Client_ID 每小时 5000 个请求或对需要用户进行身份验证的单个 Access_Tokens 每小时 5000 个请求。由于分页，每个请求您也只能检索大约 20-30 张图像。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T09:43:32.257

首先，注册为开发者。然后使用这个网址： [https ://api.instagram.com/v1/tags/YOURTAG/media/recent?access_token=YOURACCESSTOKEN](https://api.instagram.com/v1/tags/YOURTAG/media/recent?access_token=YOURACCESSTOKEN)

在替换为您的访问令牌和您的搜索词之后。最多 30 次通话/小时，所以请调节 :)

# mysql - MySQL 字符串中的第二个（或第三个）索引

> ID：14347581
> 
> 赞同：25
> 
> 时间：2013-01-15T21:51:01.217
> 
> 标签：mysql, indexof

在字符串中定位第三个空格的索引的最简单方法是什么。

我的目标是`CCC`摆脱这个以空格分隔的列表：`AAAA BBBB CCCC DDDD EEE`. 其中 A 和 B 和 D 是固定长度，C 是可变长度，EFG 是可选的。

在Java中我会使用indexof，起点为10，这会给我第三个空格，但似乎我不能在MySQL中做到这一点，所以我想也许我可以找到一个“第三个索引”函数？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-15T21:55:44.673

你会想使用这样的`SUBSTRING_INDEX`功能

```
SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(field, ' ', 3), ' ', -1)
FROM table 
```

内部函数调用将让您到达，`AAAA BBBB CCCC`而外部函数调用会将其缩减为`CCCC`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T21:53:17.970

你可以使用[`SUBSTRING_INDEX`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-04T11:56:24.720

通常，您可以使用以下方法选择`nth`字符串中的单词：

```
SET @N = 3; -- 3rd word
SET @delimiter = ' ';
SELECT
  SUBSTRING_INDEX(SUBSTRING_INDEX(words, @delimiter, @N), @delimiter, -1)
FROM
  my_table 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-12T16:45:01.770

```
 DROP FUNCTION IF EXISTS `Find_string_by_position`$$

CREATE DEFINER=`root`@`localhost` FUNCTION
`Find_string_by_position`(str VARCHAR(255), delimeter VARCHAR(255),pos INT(2)) RETURNS VARCHAR(255) CHARSET utf8mb4 BEGIN
       DECLARE s VARCHAR(255);  
       DECLARE d VARCHAR(255); 
       DECLARE p INT DEFAULT 1;
       DECLARE val VARCHAR(255);

       SET s = LCASE(str); 
       SET d = delimeter;
       SET p = pos;
       SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(s,d,p),d,-1) INTO @val; 

       RETURN @val;  

   END$$

DELIMITER ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-12T17:00:10.447

使用以下查询在分组后从表中查找任何随机 id。这里 id 是 autoincrement_id。

`SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(GROUP_CONCAT(id),",",FLOOR(RAND()*COUNT(DISTINCT id))+1),",",-1) AS random_id FROM tableName GROUP BY groupbyColumn`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-09T05:45:40.200

| ID | 姓名 | 部门 |
| --- | --- | --- |
| 1 | 阿米特·库马尔·夏尔马 | 计算机科学 |

*您可以通过简单的查询提取第三个字符串

询问 ：-

```
SELECT SUBSTRING_INDEX(Name, ' ', -1) as last_name FROM table_name 
```

输出：- 夏尔马

# c# - 将进度条添加到状态栏会导致其他面板变黑

> ID：14347582
> 
> 赞同：0
> 
> 时间：2013-01-15T21:51:02.813
> 
> 标签：c#, winforms, progress-bar, statusbar, toolstripstatuslabel

我有一个应用程序，我在状态栏中添加了一个进度条。我开始注意到，当我启动应用程序并同时激活其他窗口时，覆盖了我的应用程序将出现的区域，并保持焦点，这样当我的应用程序启动时，它将在这个窗口后面，所有状态栏窗格（工具条标签）都会变黑并拒绝刷新......同时它们的背景属性保持“控制”。如果我从状态栏中删除进度并重复所有步骤，窗格将正常。

任何想法如何解决这个问题？

谢谢

# wcf - 重新启动服务后 WCF 终结点失败

> ID：14347583
> 
> 赞同：0
> 
> 时间：2013-01-15T21:51:04.323
> 
> 标签：wcf, web-services, crud

我是使用 WCF 的新手，到目前为止，我了解使用它创建 Web 服务的基本知识，但是我的一些方法有问题。

我的服务定义如下**[链接](http://pastebin.com/3U1dgZWC)**，我的 web.config 是这样**[的](http://pastebin.com/dTnNJDj6)**。我的模型有 5 个实体，其中一个暂时与其余的无关，其他四个相互关联，我的模型看起来像[**这样**](http://i.stack.imgur.com/466mb.png)。我有执行常规 CRUD 操作的端点，插入、更新或删除没有问题，但是当我尝试获取 Eventos、Regions、Clusters 和 Dispositivos 的列表时，该方法失败并且不返回任何内容。

有趣的是，如果我再次从我的模型生成数据库，重新启动服务并再次重新插入数据，我可以毫无问题地从端点获取数据。但是，如果我停止服务并重新启动它，那么它会再次失败。

这只发生在相关的四个实体上，Usuarios 的所有端点都可以正常工作，但对于其他 4 个，端点仅在我尝试检索所有条目或仅检索实体的一个条目时才会失败。如果我尝试从这些实体中的任何一个中插入、更新或删除条目，则没有问题，仅当我尝试获取条目列表或仅一个条目时才会出现问题。

例如，如果我尝试访问 url **127.0.0.1:81/SismosService.svc/region/index它在 Google Chrome 错误 324 (net::ERR_EMPTY_RESPONSE) 中返回，但****127.0.0.1:81/SismosService**不会发生这种情况**.svc/usuario/index**，该网址返回我期望的正确 JSON 对象，如下所示：

{"Meta":{"Method":"GetUsuarios","Status":"ok"},"Response":[{"ApellidoM":"Mendoza","ApellidoP":"Arvizu","CreatedDateTime":" /Date(1357947261710-0600)/","Nombre":"Uriel","密码":"uriel88","UpdatedDateTime":"/Date(1357947261710-0600)/","用户名":"uriel88"," UsuarioId":1},{"ApellidoM":"Mendoza2","ApellidoP":"Arvizu2","CreatedDateTime":"/Date(1357947273070-0600)/","Nombre":"Uriel2","Password": "auam","UpdatedDateTime":"/Date(1357947273070-0600)/","用户名":"auam","UsuarioId":2}]}

为什么这些端点会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:45:09.353

这是由于尝试发送具有循环引用的对象引起的，因为 EF 为确定的实体创建对象，例如，如果您要发送 EntityA 类型的对象*foo*，该对象具有 EntityB 类型的属性，则该属性将具有一个属性EntityA 类型引用原始对象*foo*，这会创建一个循环引用，服务无法将其解析为 JSON。

我所做的如下：创建一个 EntityA 类型的新实例，并为它的每个属性分配您对*foo*对象感兴趣的值，将创建循环引用的对象保留为空。

# android - 何时调用 super.onPause()？

> ID：14347587
> 
> 赞同：10
> 
> 时间：2013-01-15T21:51:13.327
> 
> 标签：android, android-lifecycle

我正在我的 android 应用程序中实现分析，我想知道何时调用`super.onPause()`

```
if (mAnalyticsSession != null) {
    mAnalyticsSession.close();
    mAnalyticsSession.upload();
}

super.onPause(); 
```

`super.onPause()`在进行上传操作之后调用与之前相比有什么效果？

一般来说，什么时候应该打电话`super.onPause()`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-10-26T11:02:51.663

选择的答案不正确，（我知道这是一个老问题，但对于新读者来说，这里是正确的方法：**在 Super.onPause 或 Super.OnStart 之后添加您的代码，...** 这是您问题的 Android 参考（直接链接在评论中）：

> Quote from Activities: Your implementation of these life-cycle methods must always call the superclass implementation before doing any work.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:53:48.897

你只调用`super.onPause()`你自己的`Activity.onPause()`覆盖。

```
public class YourActivity extends Activity {

    @Override
    public void onPause() {
        super.onPause();
        // Do your stuff, e.g. save your application state
    }

} 
```

请注意，如果您不需要它，则不需要覆盖它。如果您要覆盖它，请不要在此处进行缓慢的处理，否则您可能会遇到 ANR。

# android - 在android中显示隐藏片段

> ID：14347588
> 
> 赞同：114
> 
> 时间：2013-01-15T21:51:17.693
> 
> 标签：android, android-fragments, show-hide

我正在开发包含 2 个片段的应用程序，我想根据需要显示隐藏。以下代码有我的问题的简单示例。这个简单的 Fragmentactivity 包含 1 个按钮和一个 listfragment。

这个简单的例子完美无缺。但我对显示隐藏片段不满意。如果你删除 layout.setVisibility(View.GONE); 从代码然后 ft.hide(f); 不会隐藏片段。事实上，我们不是在隐藏片段，而是在隐藏容器。

我的问题是，这是一种显示隐藏片段的方式吗？如果没有，请用经过测试的示例解释如何隐藏和显示片段，因为很多人都面临这个问题。

```
 public class MainActivity extends FragmentActivity implements OnClickListener {

        Fragment1 f;
        Button b;
        LinearLayout layout;
        Fragment myf;
        @Override
        public void onCreate(Bundle savedInstanceState){
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            b = (Button) findViewById(R.id.button1);
            layout = (LinearLayout) findViewById(R.id.ll);
            f = new Fragment1();
        }

        @Override
        public void onClick(View v) {

            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
            ft.setCustomAnimations(android.R.animator.fade_in, android.R.animator.fade_out);

            if (f.isHidden()) {
                ft.show(f);
                layout.setVisibility(View.VISIBLE);
                b.setText("Hide");
            } else {
                ft.hide(f);
                b.setText("Show");
                layout.setVisibility(View.GONE);
            }
            ft.commit();
            // TODO Auto-generated method stub
        } 
```

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-05-10T20:29:38.353

不要弄乱容器的可见性标志 - FragmentTransaction.hide/show 在内部为您执行此操作。

所以正确的做法是：

```
FragmentManager fm = getFragmentManager();
fm.beginTransaction()
          .setCustomAnimations(android.R.animator.fade_in, android.R.animator.fade_out)
          .show(somefrag)
          .commit(); 
```

* * *

**或者，如果您使用的是 android.support.v4.app.Fragment**

```
 FragmentManager fm = getSupportFragmentManager();
 fm.beginTransaction()
          .setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out)
          .show(somefrag)
          .commit(); 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-01-28T10:43:53.810

此外，您可以在 Fragment 中执行以下操作（例如，当获取服务器数据失败时）：

```
 getView().setVisibility(View.GONE); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-07-03T03:22:09.237

您好，您使用这种方法进行操作，一旦最初添加，所有片段都将保留在容器中，然后我们只是显示所需的片段并将其他片段隐藏在容器中。

```
// Within an activity
private FragmentA fragmentA;
private FragmentB fragmentB;
private FragmentC fragmentC;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    if (savedInstanceState == null) {
        fragmentA = FragmentA.newInstance("foo");
        fragmentB = FragmentB.newInstance("bar");
        fragmentC = FragmentC.newInstance("baz");
    }
}

// Replace the switch method
protected void displayFragmentA() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    if (fragmentA.isAdded()) { // if the fragment is already in container
        ft.show(fragmentA);
    } else { // fragment needs to be added to frame container
        ft.add(R.id.flContainer, fragmentA, "A");
    }
    // Hide fragment B
    if (fragmentB.isAdded()) { ft.hide(fragmentB); }
    // Hide fragment C
    if (fragmentC.isAdded()) { ft.hide(fragmentC); }
    // Commit changes
    ft.commit();
} 
```

请参阅[https://github.com/codepath/android_guides/wiki/Creating-and-Using-Fragments](https://github.com/codepath/android_guides/wiki/Creating-and-Using-Fragments)了解更多信息。我希望我能帮助任何人。即使这是一个老问题。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-03-24T10:33:17.113

```
public void showHideFragment(final Fragment fragment){

    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.setCustomAnimations(android.R.animator.fade_in,
                    android.R.animator.fade_out);

    if (fragment.isHidden()) {
        ft.show(fragment);
        Log.d("hidden","Show");
    } else {
        ft.hide(fragment);
        Log.d("Shown","Hide");                        
    }

    ft.commit();
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-02-06T21:34:39.643

试试这个：

```
MapFragment mapFragment = (MapFragment)getFragmentManager().findFragmentById(R.id.mapview);
mapFragment.getView().setVisibility(View.GONE); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-04-20T16:06:03.487

我可能为时已晚，但它可以帮助将来的人。[这个答案是对答案](https://stackoverflow.com/a/31197906/6628335)
的修改， 我只添加了一个 for 循环以避免重复并在没有样板代码的情况下轻松添加更多片段。 `mangu23`

我们首先需要一个应该显示 **的片段列表**

```
public class MainActivity extends AppCompatActivity{
    //...
    List<Fragment> fragmentList = new ArrayList<>();
} 
```

然后我们需要用我们的片段填充它

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    //...
    HomeFragment homeFragment = new HomeFragment();
    MessagesFragment messagesFragment = new MessagesFragment();
    UserFragment userFragment = new UserFragment();
    FavoriteFragment favoriteFragment = new FavoriteFragment();
    MapFragment mapFragment = new MapFragment();

    fragmentList.add(homeFragment);
    fragmentList.add(messagesFragment);
    fragmentList.add(userFragment);
    fragmentList.add(favoriteFragment);
    fragmentList.add(mapFragment);
} 
```

我们需要一种方法来知道从列表中选择了哪个片段，所以我们需要`getFragmentIndex`函数

```
private int getFragmentIndex(Fragment fragment) {
    int index = -1;
    for (int i = 0; i < fragmentList.size(); i++) {
        if (fragment.hashCode() == fragmentList.get(i).hashCode()){
            return i;
        }
    }
    return index;
} 
```

最后，该`displayFragment`方法将如下所示：

```
private void displayFragment(Fragment fragment) {
        int index = getFragmentIndex(fragment);
        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
        if (fragment.isAdded()) { // if the fragment is already in container
            transaction.show(fragment);
        } else { // fragment needs to be added to frame container
            transaction.add(R.id.placeholder, fragment);
        }
        // hiding the other fragments
        for (int i = 0; i < fragmentList.size(); i++) {
            if (fragmentList.get(i).isAdded() && i != index) {
                transaction.hide(fragmentList.get(i));
            }
        }
        transaction.commit();
    } 
```

这样，我们就可以调用`displayFragment(homeFragment)`例如。
这将自动显示`HomeFragment`并隐藏列表中的任何其他片段。
此解决方案允许您将更多片段附加到 ，`fragmentList`而无需重复`if`旧`displayFragment`版本中的语句。
我希望有人会发现这很有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-23T05:37:54.650

从我的代码中，与上面的解决方案相比，最简单的方法是定义一个包含片段的布局，然后您可以通过控制与一般视图方式对齐的布局属性来隐藏或取消隐藏片段。在这种情况下不需要额外的代码，并且片段的额外部署属性可以移动到外部布局。

```
<LinearLayout style="@style/StHorizontalLinearView"
    >

    <fragment
        android:layout_width="match_parent"
        android:layout_height="390dp"
        android:layout_alignParentTop="true"
        />

</LinearLayout> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-02-13T20:26:38.850

```
final Fragment fragment1 = new fragment1();
final Fragment fragment2 = new fragment2();
final FragmentManager fm = getSupportFragmentManager();
Fragment active = fragment1; 
```

在 onCreate 中，在 setContentView 之后，我隐藏了两个片段并将它们提交给片段管理器，但我没有隐藏将作为 home 的第一个片段。

```
fm.beginTransaction().add(R.id.main_container, fragment2, "2").hide(fragment2).commit();
fm.beginTransaction().add(R.id.main_container,fragment1, "1").commit();
 @Override
    public void onClick(View v) {
        Fragment another = fragment1;
         if(active==fragment1){
          another = fragment2;
         }
            fm.beginTransaction().hide(active).show(another).commit();
            active = another;
} 
```

参考：[https ://medium.com/@oluwabukunmi.aluko/bottom-navigation-view-with-fragments-a074bfd08711](https://medium.com/@oluwabukunmi.aluko/bottom-navigation-view-with-fragments-a074bfd08711)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-14T12:27:30.073

这对我有用

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        if(tag.equalsIgnoreCase("dashboard")){

            DashboardFragment dashboardFragment = (DashboardFragment)
                    fragmentManager.findFragmentByTag("dashboard");
            if(dashboardFragment!=null) ft.show(dashboardFragment);

            ShowcaseFragment showcaseFragment = (ShowcaseFragment)
                    fragmentManager.findFragmentByTag("showcase");
            if(showcaseFragment!=null) ft.hide(showcaseFragment);

        } else if(tag.equalsIgnoreCase("showcase")){
            DashboardFragment dashboardFragment = (DashboardFragment)
                    fragmentManager.findFragmentByTag("dashboard");
            if(dashboardFragment!=null) ft.hide(dashboardFragment);

            ShowcaseFragment showcaseFragment = (ShowcaseFragment)
                    fragmentManager.findFragmentByTag("showcase");
            if(showcaseFragment!=null) ft.show(showcaseFragment);
        }

        ft.commit(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-09T23:49:04.127

这里的答案是正确的，我喜欢@Jyo Whiff 的显示和隐藏片段实现的想法，除了他目前拥有它的方式会在第一次运行时隐藏片段，所以我添加了一个轻微的变化，我添加了 isAdded 检查和显示片段（如果还没有）

```
public void showHideCardPreview(int id) {
    FragmentManager fm = getSupportFragmentManager();
    Bundle b = new Bundle();
    b.putInt(Constants.CARD, id);
    cardPreviewFragment.setArguments(b);
    FragmentTransaction ft = fm.beginTransaction()
        .setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out);
    if (!cardPreviewFragment.isAdded()){
        ft.add(R.id.full_screen_container, cardPreviewFragment);
        ft.show(cardPreviewFragment);
    } else {
        if (cardPreviewFragment.isHidden()) {
            Log.d(TAG,"++++++++++++++++++++ show");
            ft.show(cardPreviewFragment);
        } else {
            Log.d(TAG,"++++++++++++++++++++ hide");
            ft.hide(cardPreviewFragment);
        }
    }

    ft.commit();
} 
```

# java - Java 小程序不显示任何内容

> ID：14347590
> 
> 赞同：5
> 
> 时间：2013-01-15T21:51:26.397
> 
> 标签：java, html, applet, paint, appletviewer

有谁知道为什么我的 Java 小程序不显示任何内容？

这是我的第一个 Java 小程序，所以我是新手。我研究了这个问题，并没有找到特定于当前问题的答案。

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Font;
import java.awt.Color;

public class JavaRocksApplet extends Applet
{
public void paint( Graphics screen )
{
    Font f = new Font( "TimesRoman", Font.ITALIC, 36 );
    screen.setFont( f );
    Color c = new Color( 40, 80, 120 );
    screen.setColor( c );
    screen.drawString( "Java Rocks!!", 100, 60 );
}
} 
```

在命令模块或 html 页面中使用 appletviewer 都没有关系。

```
<html>
<head>
<title>JavaRocksApplet</title>
</head>
<body>
    <applet code = "JavaRocksApplet.class" width = 400 height = 200> </applet>
</body>
</html> 
```

编译Java程序时没有错误，所以我有点困惑为什么它不起作用。

另外，我正在使用运行 OSX 10.8.2 Mountain Lion 和 Java SE 6 的 MacBook Pro

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:35:59.180

这是此工作代码的屏幕截图。除了从指定的小程序高度缩短。

![JavaRocksApplet](../Images/48ede0967b54976ae54a9c8c132e0fa5.png)

因此，正如 Neet 在评论中指出的那样。“在这里有效。”

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Font;
import java.awt.Color;

/*
<applet code = "JavaRocksApplet.class" width = 400 height = 200> </applet>
*/
public class JavaRocksApplet extends Applet
{
    public void paint( Graphics screen )
    {
        Font f = new Font( "TimesRoman", Font.ITALIC, 36 );
        screen.setFont( f );
        Color c = new Color( 40, 80, 120 );
        screen.setColor( c );
        screen.drawString( "Java Rocks!!", 100, 60 );
    }
} 
```

通过查看控制台可以找到有关问题实际原因的更多详细信息。请参阅[如何启用和查看 Java 控制台？](http://www.java.com/en/download/help/javaconsole.xml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T22:09:52.443

小程序和 HTML 页面都显示正确，因此问题可能是由于服务器端配置错误或浏览器 Java 插件的状态造成的。我需要更多地了解您的情况才能完全诊断。[我使用 1.7.0.11 插件在 Google Chrome 中对此进行了测试，它按预期工作]

在服务器端，确保您已将类文件和 HTML 文件部署到服务器上的同一位置（或本地目录，如果您以这种方式加载它）

此外，您使用的浏览器可能没有安装 Java 或具有不兼容的 Java 版本。这是我要检查的下一件事。常见问题包括针对 1.7 API 编译小程序，但尝试将其加载到具有较旧 Java 插件的浏览器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T22:09:42.117

通常，您定义一个 init() 方法并在其中添加一些 GUI 组件的初始化。我不会覆盖paint()。我不确定那到底会做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T22:10:12.427

将其放入您的代码中的任何行之前`paint`

```
super.paint(screen); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-04T13:47:41.503

我的小程序也有同样的问题。添加评论

```
<applet code = "JavaRocksApplet.class" width = 400 height = 200> </applet> 
```

在 JavaRocksApplet 中为我工作。

# jquery - 创建通过 css 传递多个选择器的过滤器

> ID：14347594
> 
> 赞同：0
> 
> 时间：2013-01-15T21:51:44.467
> 
> 标签：jquery, shopify

**问题：Javascript 代码和过滤功能不起作用。我的 Javascript 中有什么不正确的地方？**

我正在基于 Isotope jQuery 插件 ( [http://isotope.metafizzy.co/index.html](http://isotope.metafizzy.co/index.html) ) 为购物车产品实现过滤和排序用户体验。该系统正在 Shopify 平台上实施（演示链接：[http](http://isotope.metafizzy.co/index.html) ://cushionbrilliant.myshopify.com ）。

在此链接 ( [http://isotope.metafizzy.co/demos/combination-filters.html](http://isotope.metafizzy.co/demos/combination-filters.html) ) 中，Isotope 的开发人员解释了如何通过传递组合的选择器来组合多个过滤器。做一些研究，我找到了实现这个的代码，但它不能正常工作。

这是示例代码的 jsfiddle 链接：http: [//jsfiddle.net/jeremyccrane/pJ6W8/22/](http://jsfiddle.net/jeremyccrane/pJ6W8/22/)

这是我一直在尝试运行的 Javascript 代码：

```
var $container = $('#container');
    // initialize isotope
    $container.isotope({
      // options...
      animationOptions: { duration: 300, easing: 'linear', queue: false },
      getSortData : { 
      price : function ( $elem ) { return parseFloat( $elem.find('.price').text() ); }
      size : function ( $elem ) { return parseFloat( $elem.find('.size').text() ); }
      }
    });

// sorting button
$('a.pricelow').click(function(){
  $('#container').isotope({ sortBy : 'price' });
  return false;
});
$('a.pricehigh').click(function(){
  $('#container').isotope({ sortBy : 'price',sortAscending : false });
  return false;
});
$('a.sizelow').click(function(){
  $('#container').isotope({ sortBy : 'size' });
  return false;
});
$('a.sizehigh').click(function(){
  $('#container').isotope({ sortBy : 'size',sortAscending : false });
  return false;
});

// filter buttons
    $('.filters a').click(function(){
      //$(this).addClass('.selected');
      var $this = $(this);
      // don't proceed if already selected
      if ( $this.hasClass('selected') ) {
        return;
      }

      var $optionSet = $this.parents('.option-set');
      // change selected class
      $optionSet.find('.selected').removeClass('selected');
      $this.addClass('selected');

      // store filter value in object
      // i.e. filters.color = 'red'
      var group = $optionSet.attr('data-filter-group');
      filters[ group ] = $this.attr('data-filter-value');
      // convert object into array
      var isoFilters = [];
      for ( var prop in filters ) {
        isoFilters.push( filters[ prop ] )
      }
      var selector = isoFilters.join('');
      $container.isotope({ filter: selector });

      return false;
    }); 
```

以下是选择器的 HTML 代码：

```
<ul id="filters">
  <li><a href="#">Type</a>
        <ul data-filter-group="diamond" class="filters option-set">
      <li><a href="#" data-filter="*">Show All</a></li>
      <li><a href="#" data-filter=".One">One</a></li>
      <li><a href="#" data-filter=".Two">Two</a></li>
      <li><a href="#" data-filter=".Three">Three</a></li>
    </ul>
  </li>
  <li><a href="#">Price</a>
        <ul data-filter-group="price" class="filters option-set">
      <li><a href="#" data-filter="*">Show All</a></li>
      <li><a href="#" data-filter=".Under5k">Under $5k</a></li>
      <li><a href="#" data-filter=".Under10k">Under $10k</a></li>
      <li><a href="#" data-filter=".Over10k">Over $10k</a></li>
    </ul>
  </li>
</ul>
<ul id="sorting">
  <li><a href="#pricelow" class="pricelow">Price Low to High</a></li>
  <li><a href="#pricehigh" class="pricehigh">Price High to Low</a></li>
  <li><a href="#sizelow" class="sizelow">Size Low to High</a></li>
  <li><a href="#sizehigh" class="sizehigh">Size High to Low</a></li>
</ul> 
```

以下是示例框的 HTML 代码：

```
<div id="container">
  <div class="box One Under5k">Box Category 1 <div class="price">2500</div><div class="size">1.5</div></div>
  <div class="box Two Under5k">Box Category 2 <div class="price">2500</div><div class="size">2.0</div></div>
  <div class="box Three Under5k">Box Category 3 <div class="price">2500</div><div class="size">2.5</div></div>
  <div class="box One Under10k">Box Category 1 <div class="price">7500</div><div class="size">3.0</div></div>
  <div class="box Two Under10k">Box Category 2 <div class="price">7500</div><div class="size">3.5</div></div>
  <div class="box Three Under10k">Box Category 3 <div class="price">7500</div><div class="size">4.0</div></div>
  <div class="box One Over10k">Box Category 1 <div class="price">12500</div><div class="size">4.5</div></div>
  <div class="box Two Over10k">Box Category 2 <div class="price">12500</div><div class="size">5.0</div></div>
  <div class="box Three Over10k">Box Category 3 <div class="price">12500</div><div class="size">5.5</div></div>
</div> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:23:33.660

见[http://jsfiddle.net/desandro/pJ6W8/31/](http://jsfiddle.net/desandro/pJ6W8/31/)

1.  里面少了一个逗号`getSortData`。

2.  你的 JS 不见了`var filters = {}`。如果没有此语句，您将使用浏览器作为元素提供的全局`filters`变量。`#filters`

3.  更改`filters[ group ] = $this.attr('data-filter-value');`为 filters[ group ] = $this.attr('data-filter');` 以匹配您的 HTML

4.  添加`,sortAscending : true`了排序点击事件所需的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T07:09:31.937

很棒的输入！我想对这个讨论做的一个补充是记住`event.preventDefault;`点击事件。否则，当用户单击已激活的过滤器值时，您将重新加载页面。

```
$('.filters a').click(function(){
  event.preventDefault();
  //$(this).addClass('.selected');
  var $this = $(this);
  // don't proceed if already selected
  if ( $this.hasClass('selected') ) {
    return;
  } 
```

# ios - fmdb 路径并第二次从另一个 viewController 使用 db

> ID：14347599
> 
> 赞同：0
> 
> 时间：2013-01-15T21:52:24.060
> 
> 标签：ios, ios6, fmdb

我正在使用下面的代码在一个类中创建 db 并在 viewController 中使用它，并在 newViewController 的另一个类中再次使用相同的代码。
这是正确的吗 ？或者如果存在现有数据库，它是否会在其位置创建新数据库或使用？

还是我只需要使用路径？

当我在下面的示例中尝试`extern NSString *path`时，我收到了中文信件并且无法打开它。

基本上在第二个控制器中，我只读取数据。
所以我试图通过路径访问数据库，打开路径和数据库的数据库。

如果我使用下面的代码创建它并且我想从另一个视图控制器第二次打开它，该怎么做。
请帮忙。
提前致谢。

在第一个控制器中：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsPath = [paths objectAtIndex:0];
NSString *path = [docsPath stringByAppendingPathComponent:@"test.db"];

FMDatabase *database;
database = [FMDatabase databaseWithPath:path];
[database open];

    [database executeUpdate:@"DROP TABLE IF EXISTS **"];

    [database executeUpdate:@"CREATE  TABLE "];

    //Select query for single row
    FMResultSet *s = [database executeQuery:@"SELECT COUNT(*) FROM table"];
    if ([s next]) {
        int Count = [s intForColumnIndex:0];

    }

 //DO Something

[database close]; 
```

上面的代码在 viewcontroller 1 中运行良好。

我在视图控制器 2 中尝试过的东西。它仍然没有用。

```
extern NSString *path;

    FMDatabase *database;
    database = [FMDatabase databaseWithPath:path];
    [database open]; 
```

我在这里得到一个错误，因为路径是看起来像中文的。

错误是`EXC_BAD_ACCESS code`。

还通过以下方式尝试了全球数据库：

```
extern FMDatabase *database; 
```

并将其用作

```
[database open]; 
```

我仍然得到同样的错误。

**最后，它在第二个控制器中使用了以下代码。
我只是想看看这是否是正确的方法，或者我可以使用一些东西作为 db open 。**

但我试过了，但它不起作用。另外我没有使用任何错误处理程序，因为我不知道如何在 FMDB 中执行此操作。
提前致谢。

请让我知道以下实现是否正确？：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
         NSString *docsPath = [paths objectAtIndex:0];
        NSString *newpath = [docsPath stringByAppendingPathComponent:@"test.db"];

          FMDatabase *database2 ;
         database2 = [FMDatabase databaseWithPath:newpath];

         [database2 open];

//DO Something

[database2 close]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:33:54.177

作为您应该如何检查 FMDB 方法是否成功的示例，下面是一个示例：

```
#import "FMDatabase.h"
#import "FMDatabaseAdditions.h"

- (void)performDatabaseDemonstration
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsPath = [paths objectAtIndex:0];
    NSString *path = [docsPath stringByAppendingPathComponent:@"test.db"];

    // open db

    FMDatabase *database = [FMDatabase databaseWithPath:path];
    FMResultSet *rs;

    if ([database open])
    {
        // drop table

        if (![database executeUpdate:@"DROP TABLE IF EXISTS test"])
            NSLog(@"%s: drop error: %@", __FUNCTION__, [database lastErrorMessage]);

        // create table

        if (![database executeUpdate:@"CREATE TABLE test(col1 INTEGER, col2 TEXT)"])
            NSLog(@"%s: create error: %@", __FUNCTION__, [database lastErrorMessage]);

        // insert a row of data

        if (![database executeUpdate:@"INSERT INTO test VALUES(1, 'Rob')"])
            NSLog(@"%s: insert 1 error: %@", __FUNCTION__, [database lastErrorMessage]);

        // insert another row of data

        if (![database executeUpdate:@"INSERT INTO test VALUES(2, 'Rachel')"])
            NSLog(@"%s: insert 2 error: %@", __FUNCTION__, [database lastErrorMessage]);

        // Select query for single row

        if (!(rs = [database executeQuery:@"SELECT count(*) FROM test"]))
            NSLog(@"%s: select error: %@", __FUNCTION__, [database lastErrorMessage]);

        if ([rs next]) {
            int count = [rs intForColumnIndex:0];

            NSLog(@"%s: count = %d", __FUNCTION__, count);
        }

        [rs close];

        // if getting single value from single row, you can use FMDatabaseAdditions.h methods:

        NSInteger count2 = [database intForQuery:@"SELECT col1, col2 FROM test"];
        NSLog(@"%s: count2 = %d", __FUNCTION__, count2);

        // let's actually retrieve data

        if (!(rs = [database executeQuery:@"SELECT col1, col2 FROM test"]))
            NSLog(@"%s: select error: %@", __FUNCTION__, [database lastErrorMessage]);

        while ([rs next]) {
            NSLog(@"%s: col1 = %@; col2 = %@", __FUNCTION__, [rs objectForColumnIndex:0], [rs objectForColumnIndex:1]);
        }

        [rs close];

        //close

        [database close];
    }
    else
    {
        NSLog(@"%s: open error: %@", __FUNCTION__, [database lastErrorMessage]);
    }
} 
```

* * *

关于如何从不同的控制器打开数据库，有很多选择。但我可能会建议，除了从两个控制器中检索一些共享路径/文件名变量之外，您可能还希望将文件名以及共享 FMDB 代码实际封装在一个对象中。

就个人而言，每当我发现自己在两个不同的控制器中编写相同或相似的代码时，我都会问自己是否要将该代码抽象到它自己的类中。在这种情况下，例如，与其争论这两个类如何访问数据库文件名，我会创建自己的模型对象（一个`NSObject`子类），它封装您的 SQL，打开数据库等。然后我可以我的两个视图控制器从该方法对象调用方法，并且真正减少了文件名中的冗余，而且代码本身也是如此。比如创建数据库路径、打开数据库、检查打开是否成功等都是相同的。那么为什么不在某个模型对象中使用一种方法，它可以为您完成所有这些工作。

要使两个控制器都可以访问此模型对象，您有很多选择：

*   使其成为您的第一个视图控制器的属性，并在 ; 期间将其传递给您的第二个控制器`prepareForSegue`。

*   为它创建一个单例对象；或者

*   将其作为您的应用程序委托的属性，您的两个控制器都可以从那里获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:38:10.027

你应该把数据库路径定义为全局变量，第一次使用关闭操作，第二次使用打开的时候，打开数据库，会自动判断是否有数据库，如果没有会自动创建。如果目前，它会直接打开。用你判断数据库是否打开成功： `if (! [db open]) { / / error return; } / / some operation / /... [db close];`

# ruby-on-rails - 片段缓存无法修改冻结对象错误 rails 3

> ID：14347602
> 
> 赞同：2
> 
> 时间：2013-01-15T21:52:36.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, dalli

我正在尝试在`Rails 3.0.19`应用程序中实现片段缓存并`dalli`用作缓存存储。这是我的缓存片段脚本：

```
- @presentations.each do |p|
  - cache "presentation", p do
    = render_presentation_object p 
```

`render_presetnation_object`根据某些条件实际渲染出特定的部分。我还在控制器中添加了一个清扫器。

```
cache_sweeper :presentation_sweeper, :only => [:create, :update, :destroy]
caches_action :update 
```

这是扫地机的代码：

```
class PresentationSweeper < ActionController::Caching::Sweeper
  observe Presentation

  def after_save(presentation)
    expire_cache(presentation)
  end

  def after_update(presentation)
    expire_cache(presentation)
  end

  def after_destroy(presentation)
    expire_cache(presentation)
  end

  def expire_cache(presentation)
    expire_fragment "presentation", presentation
  end
end 
```

当我尝试使用此代码从控制器更新任何东西时`@presentation.update_attributes(params[:presentation])`，它给出了一个错误`ActiveRecord::StatementInvalid (RuntimeError: can't modify frozen object:`

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T10:55:44.037

gem **rack-mini-profiler** [http://miniprofiler.com/](http://miniprofiler.com/)正在对导致问题的 AR 进行一些运行时更改。移除那个宝石解决了这个问题，现在一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T10:09:14.287

进一步 Nazar Hussain 的回答。通过将 ?pp=disable 添加到您的网站 URL 的末尾，这将禁用 miniprofiler，这可能允许您测试是否是 Miniprofiler 导致问题

# css - 一个 div 中的 CSS 布局 2 列，文本流入另一列

> ID：14347603
> 
> 赞同：3
> 
> 时间：2013-01-15T21:52:46.753
> 
> 标签：css

在 microsoft word 中，您可以在文档中创建两列，当您到达一列的底部时，它会自动继续到旁边另一列的顶部。我想知道这种行为在css中是否也可能发生？

当我用谷歌搜索它时，我发现很多制作两列网页布局，但这不是我想要的。我希望文本流自动继续进入另一列。

所以如果你有这个：

```
<div class="twocolumns">lorem ipsum dolor est.........</div> 
```

你得到

```
Lorem ipsum dolor sit amet,        ea commodo consequat.
consectetur adipisicing elit,      Duis aute irure dolor 
sed do eiusmod tempor incididunt   in reprehenderit in voluptate
ut labore et dolore magna aliqua.  velit esse cillum dolore
Ut enim ad minim veniam, quis      eu fugiat nulla pariatur.
nostrud exercitation ullamco 
laboris nisi ut aliquip ex 
```

这甚至可以单独使用 css 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:59:35.850

你完全可以用 CSS3 做到这一点。不幸的是，我不确定 IE 处理这个问题的能力如何，但一个 shim 或其他东西可能会有所帮助。

HTML

```
<div class="twocolumns">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur eu mauris nec nisi tristique condimentum vitae sed orci. Vestibulum luctus hendrerit sem, ut sodales nibh rhoncus a. Mauris a diam mollis ante auctor aliquam. Sed cursus interdum nisl at condimentum. Cras gravida nulla sit amet nisi fringilla bibendum. Suspendisse blandit scelerisque arcu euismod facilisis. Sed ultrices tincidunt commodo. Phasellus sed justo libero. Donec venenatis sapien eu arcu feugiat vulputate. Praesent tortor mauris, tincidunt non venenatis sit amet, ultricies ac lacus. Praesent fermentum pharetra posuere. Quisque eget blandit lacus. Suspendisse eget diam justo. Donec eu urna nec metus consequat pellentesque id nec leo. Nam sodales sapien id tellus rhoncus pellentesque. Ut fringilla imperdiet rhoncus.</div> 
```

CSS

```
.twocolumns {
 padding:10px;
  width:80%;
  -moz-column-count: 2;
  -moz-column-gap: 10px;
  -webkit-column-count: 2;
  -webkit-column-gap: 10px;
  column-count: 2;
  column-gap: 10px;
} 
```

[jsFiddle](http://jsfiddle.net/rAnmw/)

# ios - Xcode：使用 viewWithTag 定位动态创建的按钮时遇到问题

> ID：14347604
> 
> 赞同：0
> 
> 时间：2013-01-15T21:52:49.660
> 
> 标签：ios, objective-c, xcode, oop

我正在做一个由几个部分组成的大型项目，每个部分都有不同数量的幻灯片。

我正在尝试动态创建一个导航栏，其中按钮的数量与加载的部分的幻灯片相对应。我遇到的问题是在每张幻灯片加载时设置按钮的开/关外观。

我在创建该部分时创建导航栏，并且每个按钮的外观都应在加载每张幻灯片时更新。我正在尝试使用`viewWithTag`. 当该部分的第一张幻灯片加载时，外观很好，但是当我点击下一个按钮时，一切都消失了。奇怪的是，当单击返回第一张幻灯片时，一切都按原样显示。

加载一个部分时，会创建一个包含必要幻灯片信息的字典对象的可变数组。我有一个`- (void) newbutton:(NSString *) title withIndex:(int) index atPosition:(int) Xpos`从主视图调用的类方法 ( )，它通过 for 循环创建自定义“ON”和“OFF”按钮，从 plist 文件传递​​标题和索引参数。之后，加载索引 0 处的幻灯片。

主视图

```
- (void) findStory:(NSString *) presentation
{

    [model loadStory:presentation];

    int storyCount = model.currentStory.count;
    if (storyCount > 1) {
        int distribution = 700 / (storyCount - 1); // 700 = width of Navigation Rule
        int Xpos = 89; // 89 = X position of Navigation Rule

        // Build Navidation trail
        for (int i = 0; i < model.currentStory.count; i++) {

            NSLog(@"findStory(): Item Title: %@", [model.currentStory[i] objectForKey:@"name"]);

            [nav newbutton:[model.currentStory[i] objectForKey:@"name"] withIndex:i atPosition:Xpos];
            navButton = nav.button;
            navDot = nav.buttonDot;
            [self.navHolder addSubview:navDot];
            [self.navHolder addSubview:navButton];
            Xpos += distribution;
        }
    }

    [self newPage:model.pageIndex];
}

- (void)newPage:(int) index
{
    NSLog(@"newPage(): Requested page Index is %i", model.pageIndex);
    // Code that finds and loads the slide  

    // At the end the navigation appearance is set
    [self setNavAppearance:index];
}

- (void) setNavAppearance:(int) index
{
    NSLog(@"setNavAppearance(): Setting navigation appearance...");
    int storyCount = model.currentStory.count;

    if (storyCount > 1) {
        for (int i = 0; i < storyCount; i++) {
            int pressedIndex = i + 20;
            int viewTag = i;
            UIButton *onButton = (UIButton *)[self.navHolder viewWithTag:viewTag];
            if (i != index) {
                onButton.hidden = YES;
            } else {
                onButton.hidden = NO;
            }

            UIButton *offButton = (UIButton *)[self.navHolder viewWithTag:pressedIndex];
            offButton.hidden = NO;

        }
    }

    NSLog(@"setNavAppearance(): navigation appearance set.");
} 
```

导航类方法

```
- (void) newbutton:(NSString *) title withIndex:(int) index atPosition:(int) Xpos
{
    buttonIndex = index;

    button = [[UIButton alloc] init];

    int labelXPosition = (Xpos - 75);
    int dotXposition = (Xpos - 10);

    // ON Button
    buttonLabel = [[UILabel alloc] initWithFrame:CGRectMake(labelXPosition, 637, 150, 55)];
    buttonLabel.textColor = [UIColor blackColor];
    buttonLabel.font = [UIFont fontWithName:@"HelveticaNeue-CondensedBold" size:12];
    buttonLabel.textAlignment = NSTextAlignmentCenter;
    buttonLabel.lineBreakMode = NSLineBreakByWordWrapping;
    buttonLabel.numberOfLines = 2;
    buttonLabel.text = title;
    buttonLabel.backgroundColor = [UIColor clearColor];
    buttonLabel.textColor = [UIColor colorWithRed:0.047f green:0.337f blue:0.494f alpha:1.0f];
    [self.button addSubview:buttonLabel];

    dot = [[UIImageView alloc] initWithFrame:CGRectMake(dotXposition, 702, 20, 20)];
    [dot setImage:[UIImage imageNamed:@"buttonPressed.png"]];
    [self.button addSubview:dot];

    button.tag = buttonIndex;

    // OFF Button
    buttonDot = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    buttonDot.frame = CGRectMake(dotXposition, 702, 20, 20);
    buttonDot.backgroundColor = [UIColor clearColor];
    UIImage *dotImage = [UIImage imageNamed:@"button.png"];
    [buttonDot setBackgroundImage:dotImage forState:UIControlStateNormal];
    UIImage *dotImagePress = [UIImage imageNamed:@"buttonPressed"];
    [buttonDot setBackgroundImage:dotImagePress forState:UIControlStateHighlighted];

    int dotIndex = buttonIndex + 20;
    buttonDot.tag = dotIndex;

} 
```

我不确定发生了什么事。该`-(void) setNavAppearance`方法在每次加载新页面时运行，理论上应该设置所需的外观。

任何人都可以提供任何帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:18:42.573

正如我在评论中已经指出的那样；

使用标记设置为 0 时要小心。如果没有明确定义标记，则使用零。因此，任何没有定义标签的东西都将匹配零。

# xaml - 在 Windows 应用商店应用的 XAML 中对 ListView 项目进行分组

> ID：14347606
> 
> 赞同：3
> 
> 时间：2013-01-15T21:52:56.783
> 
> 标签：xaml, windows-store-apps, collectionviewsource

有没有办法在 Windows 商店应用程序的 XAML 代码中对集合项进行分组。在 WPF 中，您可以使用`CollectionViewSource`and 而不是使用它的属性`CollectionViewSource.GroupDescriptions`或类似的东西，但对于 Windows Store 应用程序它不起作用。我知道我可以在后面的代码中使用 Linq 查询，但是是否有替代方法可以与 XAML 中声明的代码进行分组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T19:05:07.960

您可能不再需要答案了，但我在寻找类似内容时发现了这个问题，并且最近还偶然发现了一篇可能完美回答您问题的文章。这可能对以后的其他人有所帮助。

[如何对列表或网格中的项目进行分组（使用 C#/VB/C++ 和 XAML 的 Windows 应用商店应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh780627.aspx)

ListView 分组并使用 LINQ 进行查询，这正是您所要求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T14:44:15.580

在 WPF 中，可以使用`CollectionViewSource`的`GroupDescriptions`属性和`Filter`事件在 XAML 中进行分组和过滤。另一方面，在 Windows 应用商店应用程序中，`CollectionViewSource`没有此属性和事件。然而，一切并没有丢失。仍然支持过滤和分组，但只能通过提供您的`ItemsControl`（例如`GridView`）已经分组或过滤的集合。MSDN 文档提供了有关如何完成此[操作的分步说明。](http://msdn.microsoft.com/en-us/library/windows/apps/hh780627.aspx)

# java - tomcat：目录资源安全

> ID：14347609
> 
> 赞同：2
> 
> 时间：2013-01-15T21:53:15.487
> 
> 标签：java, tomcat, ldap, jndi

我有这个小问题：

Tomcat在windows server 2008上运行。有一个本地目录：D:\archive。该目录包含大约 40000 个 pdf 文件。

该应用程序是一个搜索实用程序，旨在提供此目录中的任何 pdf 作为下载文件。Tomcat 绑定到活动目录 (JNDIRealm)。该目录在 server.xml 中使用：

```
<Context docBase="D:\archive" path="/archive"></Context> 
```

应用程序本身部署为 /PDFDownload，受 BASIC 身份验证保护。

如何使用相同的 ldap 绑定保护 /archive ？我已经用谷歌搜索了很多，我能找到的只是关于应用程序上下文安全或在 tomcat 前面使用 apache 的示例（如果这是一个选项，我将如何将 apache 绑定到活动目录？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:26:40.320

编写一个简单的 DownloadServlet，它可以从中读取文件`D:\archive`并以 PDF 文件的形式提供下载。

看看这个问题：[实现一个简单的文件下载 servlet](https://stackoverflow.com/questions/1442893/file-download-servlet)

更多示例代码[http://www.coderanch.com/t/366358/Servlets/java/File-download-servlet](http://www.coderanch.com/t/366358/Servlets/java/File-download-servlet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:26:22.473

我们通过将 WEB-INF 目录添加到 D:\archive 并在其中复制默认的 web.xml 来解决它。然后我们将安全约束添加到复制的 web.xml 中，现在该目录受到保护。感谢所有花时间阅读和解决这个问题的人。

# javascript - jQuery + 客户端模板 =“语法错误，无法识别的表达式”

> ID：14347611
> 
> 赞同：59
> 
> 时间：2013-01-15T21:53:22.213
> 
> 标签：javascript, jquery, mustache

我刚刚将 jQuery 从 1.8.3 更新到 1.9，它突然开始崩溃。

这是我的模板：

```
<script type="text/template" id="modal_template">
    <div>hello</div>
</script> 
```

我是这样读的：

```
modal_template_html = $("#modal_template").html(); 
```

这就是我将其转换为 jQuery 对象的方式（我需要在其上使用 jQuery 方法）：

```
template = $(modal_template_html); 
```

... 和 jQuery 崩溃！

错误：语法错误，无法识别的表达式：<div>hello</div>

slice.call(docElem.childNodes, 0)[0].nodeType;

jquery-1.9.0.js（第 3811 行）

但是，如果我将模板声明为纯文本变量，它会再次开始工作：

```
var modal_template_html = '<div>hello</div>'; 
```

谁能帮我解决这个问题？

**更新**：Jquery 团队在 1.10 中听到并将[事情](http://blog.jquery.com/2013/05/09/jquery-1-10-beta-1-released/)恢复正常：

> 您可能会看到的最大变化是我们放宽了 $() 中 HTML 处理的标准，允许使用前导空格和换行符，就像我们在 1.9 版之前所做的那样

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-15T23:47:57.590

在 jQuery 1.9 中，以换行符（或“<”以外的任何内容）开头的字符串不被视为 HTML 字符串

[http://stage.jquery.com/upgrade-guide/1.9/#jquery-htmlstring-versus-jquery-selectorstring](http://stage.jquery.com/upgrade-guide/1.9/#jquery-htmlstring-versus-jquery-selectorstring)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-16T10:40:14.927

我猜你的模板是以空格或制表符开头的。

你可以像这样使用 jQuery：

```
$($.parseHtml(modal_template_html)[1]); 
```

或解析字符串以删除开头的空格：

```
$(modal_template_html.replace(/^[ \t]+/gm, '')); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-17T18:17:54.260

EugeneXa 在评论中提到了它，但它应该是一个答案：

```
var template = $("#modal_template").html().trim(); 
```

这会从字符串的开头修剪有问题的空格。我将它与 Mustache 一起使用，如下所示：

```
var markup = Mustache.render(template, data);
$(markup).appendTo(container); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-15T14:30:40.130

您可以使用

```
var modal_template_html = $.trim($('#modal_template').html());
var template = $(modal_template_html); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-06T07:50:50.387

如官方文档：从 1.9 开始，只有以小于（“<”）字符开头的字符串才被认为是 HTML。Migrate 插件可用于恢复 1.9 之前的行为。

如果已知字符串是 HTML，但可能以非 HTML 标记的任意文本开头，则将其传递给 jQuery.parseHTML()，它将返回代表标记的 DOM 节点数组。可以由此创建一个 jQuery 集合，例如：`$($.parseHTML(htmlString))`. 例如，在处理 HTML 模板时，这将被视为最佳实践。诸如文字字符串的简单使用`$("<p>Testing</p>").appendTo("body")`不受此更改的影响。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-20T08:52:03.103

我有同样的错误：
“语法错误，无法识别的表达式：//”
这是JQuery的已知错误，所以我需要考虑解决方法，
我所做的是：
我将“脚本”标签更改为“div”
并添加到角度这个代码
，错误消失了......

```
app.run(['$templateCache', function($templateCache) {
    var url = "survey-input.html";
    content = angular.element(document.getElementById(url)).html()
    $templateCache.put(url, content);
}]); 
```

# axapta - 缺少数据完整性导致孤立记录

> ID：14347614
> 
> 赞同：1
> 
> 时间：2013-01-15T21:53:32.960
> 
> 标签：axapta, dynamics-ax-2009

到目前为止，我在基表中看到了几个孤立记录的示例，例如：

`ProdUnitTable`has `InventSiteID`, not exist in `InventSite`( any more ), 或 `ProdRoute`has `WrkCtrId`, not exist in `WrkCtrTable`( any more ) 导致意外行为。

这只是错误，还是有什么方法可以检查基表中当前数据的完整性？其中一些错误似乎存在于 Contoso-Demo-Data 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:40:30.913

有一种方法可以检查数据的完整性。它是在基本 -> 定期 -> 一致性检查中找到的一致性检查工具。

选择要检查的模块，确保选中“检查”，然后单击“确定”。一致性检查将运行 validate 方法来检查与您选择的模块相关的 EDT 和表。结果将是一个警告信息日志，向您显示哪些数据不一致。它将找到可能与您在问题中提到的情况有关的每条记录。

请注意：如果您选择“修复”选项，它将修复不一致之处。但是，这可能会导致您的数据出现其他问题。我建议只运行“检查”，然后通过代码或手动更改自己解决问题。

# activerecord - 基于关联的 Active Record 排序

> ID：14347619
> 
> 赞同：0
> 
> 时间：2013-01-15T21:53:51.010
> 
> 标签：activerecord, ruby-on-rails-3.2

所以我有三个模型。用户、患者和日历日。用户并拥有许多患者，患者可以拥有许多日历日。

我想做的是为一个用户拉病人，并在日历日内按列排序。

db 中的表通常设置为如何在 Rails 中使用 ActiveRecord 用于在模型中关联的 id 进行设置（并且关联设置正确）。

示例：用户 bob@example.com 有 4 位患者（Tom、John、Sally 和 Jane）。每个患者都有今天和昨天的日历日（每个日期的日历日都是唯一的）。

我想把四个病人都拉出来，按今天的 created_by 日期排序（日期列实际上是一个日期时间字段，实际上是按今天的时间排序）。

我一直在尝试像@patients = user.patients.order(.join(:calendar_days).order("date DESC")) 之类的东西，但我不确定如何创建高级的 ActiveRecord 查询。

我认为我以前从未设置过这样的复杂查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:51:40.303

@jizak 几乎拥有它，但您想将其限制为使用当前日历日期。您可以使用类方法使这更容易：

```
class Patient < ActiveRecord::Base
  has_many :calendar_days

  def self.for_date(date)
    joins(:calendar_days).where('DATE(calendar_days.created_at) = ?', date) 
  end
end

user.patients.for_date(Date.today).order('calendar_days.created_at DESC') 
```

请注意，条件中`'DATE(...)'`使用的函数`where`是 MySQL 和 SQLite 特定的，不适用于 PostgreSQL 或 Oracle - 他们有其他方法可以做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:13:32.577

你可以这样做

```
u.patients.joins(:calendar_days).order('calendar_days.created_at DESC') 
```

或者您可以将 .select 添加到特定字段

```
u.patients.joins(:days).select('patients.*, days.name as days_name').order('days.created_at ASC') 
```

# html - 将一个表格单元格居中对齐在另外两个下方

> ID：14347620
> 
> 赞同：0
> 
> 时间：2013-01-15T21:53:58.747
> 
> 标签：html, css, alignment, center, css-tables

这就是我想要完成的：

```
|---------| |----------|
| TableC1 | | TableC2  |
|---------| |----------|
     |------------|
     | TableC3    |
     |------------| 
```

您可以在上面看到的是我想要完成的。TableCell1 和 TableCell2 在表格的中心很好地对齐，但是由于我只想在它们下面有一个表格单元格，所以 TableCell3 只是转到一侧，左侧或右侧并不重要。

这是我编写它的一个片段：

HTML：

```
<table id = "some-boxes">

<tr>
<td id = "first-box">
SOME TEXT101
</td>

<td id = "second-box">
SOME TEXT202
</td>
</tr>

<td id = "third-box">
SOME TEXT303
</td>
</table 
```

CSS：

```
#first-box{
   width: 100px;
}
#second-box{
   width: 100px;
}
#third-box{
   width: 200px;
   text-align: center;
   margin-left: 50%;
   margin-left: 50%;
} 
```

希望有人能解答我的这个谜团。致谢:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:56:27.340

用于指定您希望标签占用`colspan`多少列。`<td>`

```
<td id = "third-box" colspan="2">
SOME TEXT303
</td> 
```

这是一个视觉示例。我刚刚启用了边框来演示： [http ://codepen.io/AlienHoboken/pen/uFlIC](http://codepen.io/AlienHoboken/pen/uFlIC)

此外，您可以摆脱保证金规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:11:33.000

如果您处于无法修改标记的位置，这将起作用：

[http://jsfiddle.net/Aam6T/](http://jsfiddle.net/Aam6T/)

```
table#some-boxes, table#some-boxes tr {
  display: block;
  text-align: center;
}

table#some-boxes td {
  display: inline-block;
  border: 1px solid;
} 
```

但是，前几行中的单元格将不再排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:15:05.537

首先，您应该通过`<tr></tr>`在`<td id="third-box">...</td>`. 那么你应该`colspan`在`#third-box`.

```
<table id="some-boxes">
    <tr>
        <td id="first-box">
            SOME TEXT101
        </td>
        <td id="second-box">
            SOME TEXT202
        </td>
    </tr>
    <tr>
        <td id="third-box" colspan="2">
            SOME TEXT303
        </td>
    </tr>
</table> 
```

以上将为您在第二行提供全表宽度的第三个单元格。但是，如果您想在“绘图”中生成精确的表格（第三个单元格具有相同的大小并以第二行为中心）：

```
<table id="some-boxes">
    <tr>
        <td id="first-box">
            SOME TEXT101
        </td>
        <td id="second-box">
            SOME TEXT202
        </td>
    </tr>
    <tr>
        <td id="third-box" colspan="2">
            <div id="third-box-inner">
                SOME TEXT303
            </div>
        </td>
    </tr>
</table> 
```

使用额外的 CSS 声明：

```
div#third-box-inner
{
    width: 100px;
    text-align: center;
    margin-left: 50px;
} 
```

还有一个建议：在设置 HTML 属性时，我不会在等号前后使用空格。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T21:57:24.693

表格单元格不遵守边距或对象对齐规则。他们在表格中定义了位置。第 2 行中的第一个单元格将始终从第 1 行中的第一个单元格下方开始。您可以使用 使单元格跨越两列`colspan=2`，但它不能部分重叠另一个单元格，除非您玩跨列的数学游戏。您最好在`div`项目上使用 CSS 定位。

# bazaar - Bazaar 启动板登录问题

> ID：14347621
> 
> 赞同：1
> 
> 时间：2013-01-15T21:54:02.617
> 
> 标签：bazaar, launchpad

我已经在启动板网站上注册，但每次我尝试执行

```
bzr launchpad-login username@email.com 
```

它给了我这个错误

> bzr：错误：用户名 username@email.com 未在 Launchpad 上注册。

除了在启动板上注册之外，还有人做过其他事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:18:57.367

尝试使用您的**启动板用户 ID**而不是电子邮件：

查看此功能的文档：http: [//doc.bazaar.canonical.com/plugins/en/launchpad-plugin.html](http://doc.bazaar.canonical.com/plugins/en/launchpad-plugin.html)

# java - 在 Jboss 7.1 上部署 datasource.xml

> ID：14347625
> 
> 赞同：6
> 
> 时间：2013-01-15T21:54:23.280
> 
> 标签：java, deployment, jboss, datasource, jboss7.x

我正在尝试将名为 的数据源 xml 文件添加`oracle-ds.xml`到我的 JBoss 7.1 文件夹中，以便我在该服务器上部署的项目可以使用该数据源。

正如[jboss.org](https://community.jboss.org/en/tools/blog/2012/02/28/excited-about-jboss-as-71-part-i-deployable-datasources)上解释的那样，我需要将该文件放在部署文件夹中。

这就是我所做的。但与他们在上面的链接中所说的不同，我在本地 maven 存储库中有我的 Orcale 驱动程序 jar。无论如何，maven 能够构建项目。

现在当我重新启动Jboss时，它似乎`oracle-ds.xml`是一个需要部署的项目（jar），而不是一个xml设置文件......

以下是 Jboss 重启期间的一些控制台输出：

```
15:58:16,666 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015876: Starting deployment of "oracle-ds.xml"
15:58:16,728 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC00001: Failed to start service jboss.deployment.unit."oracle-ds.xml".PARSE: org.jboss.msc.se
rvice.StartException in service jboss.deployment.unit."oracle-ds.xml".PARSE: Failed to process phase PARSE of deployment "oracle-ds.xml"
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_29]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_29]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_29]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: IJ010061: Unexpected element: local-tx-datasource
        at org.jboss.as.connector.deployers.processors.DsXmlDeploymentParsingProcessor.deploy(DsXmlDeploymentParsingProcessor.java:85)
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
        ... 5 more
Caused by: org.jboss.jca.common.metadata.ParserException: IJ010061: Unexpected element: local-tx-datasource
        at org.jboss.jca.common.metadata.ds.DsParser.parseDataSources(DsParser.java:183)
        at org.jboss.jca.common.metadata.ds.DsParser.parse(DsParser.java:119)
        at org.jboss.jca.common.metadata.ds.DsParser.parse(DsParser.java:82)
        at org.jboss.as.connector.deployers.processors.DsXmlDeploymentParsingProcessor.deploy(DsXmlDeploymentParsingProcessor.java:80)
        ... 6 more 
```

为什么会发生这种情况，我应该怎么做才能纠正这种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T16:58:38.080

复制`oracle-ds.xml`到`standalone\deployments`文件夹是部署它的正确方法。虽然我建议在standalone.xml 或管理控制台或CLI 中定义数据源，而不是在单独的xml 文件中。

这里的问题是`oracle-ds.xml`XSD 验证失败。如果您查看数据源 xml 的[XSD](http://www.ironjacamar.org/doc/schema/datasources_1_2.xsd)，您会发现 XSD 中没有`local-tx-datasource`元素。

要解决此问题，您需要确保您的 XML 文件通过 XSD 验证。或者，您可以在管理控制台或通过 CLI 定义数据源，以避免手动创建它并遇到这些类型的问题。

# c++ - 如何定义具有 2 个输入的块？

> ID：14347626
> 
> 赞同：0
> 
> 时间：2013-01-15T21:54:33.887
> 
> 标签：c++, gnuradio

我是 C++ 的新手，所以我不确定将向量的定义和“input_sizes.push_back”放在 .cc 文件中的什么位置。（de include 之后？在 sptr 之后？在 sptr 的定义之后？在一个新的方法中？）。这是“官方”示例：

-- 具有 2 个输入（浮点和双精度）和 1 个输出的块 --

```
std::vector<int> input_sizes;
input_sizes.push_back(sizeof(float));
input_sizes.push_back(sizeof(double));

gnuradio::block("my block",
gr_make_io_signaturev(2, 2, input_sizes),
gr_make_io_signature(1, 1, sizeof(float))) 
```

该示例可以在[1](https://github.com/guruofquality/grextras/wiki/Blocks-Coding-Guide#wiki-id4/)中找到：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:09:45.740

Discuss-gnuradio@gnu.org 邮件列表中的一些人回答了我。最简单的答案（也是我使用的答案）是： `gr_make_io_signature2 (2, 2, sizeof(float), sizeof(double))`

:) :)

# mysql - 在我的 SQL 中遇到 WHERE DATEDIFF 问题

> ID：14347627
> 
> 赞同：1
> 
> 时间：2013-01-15T21:54:38.637
> 
> 标签：mysql, sql, datetime

我想我要解决这个问题了。我想用 PHP 提取数据库中不到一天的行。我正在使用 Laravel，但这不相关。这是我所拥有的：

```
if ($day == 'today') {
    $date = date('Y-m-d H:i:s');
} elseif ($day == 'yesterday') {
    $date = date('Y-m-d H:i:s', strtotime('yesterday'));
} else {
    ...
}

$sql = "SELECT * FROM all_forms_main_contact WHERE DATEDIFF(timestamp, '" . $date . "') <= 1";
$mc = DB::select($sql);
return json_encode($mc); 
```

但是，这不会返回正确的结果。它的返回结果早于一天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:15:12.577

这实际上取决于您如何定义“不到一天”。

MySQL`DATEDIFF`函数仅考虑日期时间值的日期部分，并返回整数天数差。下面的两个查询都会返回一个值1，代表“1天”，其中一个是相差8小时，另一个是相差46小时：

```
SELECT DATEDIFF('2013-01-15 07:00','2013-01-14 23:00') AS 8_hrs
SELECT DATEDIFF('2013-01-15 23:00','2013-01-14 01:00') AS 46_hrs 
```

因此，完全有可能并且预期您的查询可能会返回“早于”24 小时的行。

（`hh:mi:ss`作为参数提供给 DATEDIFF 函数的文字的时间部分将被忽略，时间戳值的时间部分将被忽略。仅提供该`YYYY-MM-DD`值将获得相同的结果。）

* * *

另请注意，DATEDIFF 函数上的谓词是不可搜索的，也就是说，MySQL 无法对索引进行范围扫描以满足该谓词。

为了获得最佳性能，我们通常更喜欢裸列上的等效谓词，例如

```
WHERE `timestamp` >= expr 
```

这使优化器至少可以考虑对`timestamp`列上的索引使用范围扫描。

如果您正在寻找不到 1 天的行（意味着不到 24 小时或不到 86400 秒），分辨率高达一秒，您可以使用如下谓词之一：

```
WHERE `timestamp` >= '2013-01-15 16:10' + INTERVAL -1 DAY
WHERE `timestamp` >= '2013-01-15 16:10' + INTERVAL -24 HOUR
WHERE `timestamp` >= '2013-01-15 16:10' + INTERVAL -86400 SECOND 
```

DATE_ADD 函数是等效的：

```
WHERE `timestamp` >= DATE_ADD('2013-01-15 16:10',INTERVAL -1 DAY) 
```

另请注意，不必在 SQL 文本中将当前日期值作为文字传递；MySQL 提供了从 MySQL 服务器返回当前日期和时间的内置函数，例如`NOW()`,`CURRENT_DATE()`和`SYSDATE()`.

对于分别小于 24 小时或 48 小时的行：

```
WHERE `timestamp` >= DATE_ADD(NOW(),INTERVAL -1 DAY)
WHERE `timestamp` >= DATE_ADD(NOW(),INTERVAL -2 DAY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:02:30.587

此查询选择比 -24 小时新的行。
例如，如果是 04:00 AM，则返回所有行 >=昨天 04:00 AM：

```
SELECT * FROM `tbl` WHERE `datetime` >= NOW() - INTERVAL 1 DAY 
```

同样适用于 -48 小时以上。
例如，如果它是 04:00 AM，则返回所有行 >= 前天 04:00 AM：

```
SELECT * FROM `tbl` WHERE `datetime` >= NOW() - INTERVAL 2 DAY 
```

此查询选择今天的行。
例如，如果是 04:00 AM，则返回所有行 >= 今天 00:00 AM：

```
SELECT * FROM `tbl` WHERE `datetime` >= CURDATE() 
```

同样，此查询仅选择昨天的行。
例如，如果是 04:00 AM，则返回昨天 00:00 AM 到（但不包括）今天 00:00 AM 之间的所有行：

```
SELECT * FROM `tbl` WHERE `datetime` >= CURDATE() - INTERVAL 1 DAY AND `datetime` < CURDATE() 
```

[我将上述语法用于日期查询，我认为它比日期添加/子函数更具可读性。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:02:45.373

您通常会像这样简单地对其进行编码：

```
...
where timestamp > subdate(now(), 1) 
```

请注意，它的便捷版本[`subdate()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_subdate)允许将天数指定为简单整数（即默认间隔类型为`DAY`）。此外，如果第一个参数是 Daretine，则 subdate 返回日期时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T21:58:46.553

为什么不这样做：

```
SELECT ... WHERE timestamp BETWEEN DATE_SUB(NOW(), INTERVAL 1 DAY) AND NOW() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-15T10:50:23.047

而 DATEDIFF 忽略时间组件（请参阅[DATEDIFF - MariaDB Knowledge](https://mariadb.com/kb/en/datediff/)）， TIMESTAMPDIFF 没有。所以这会起作用：

```
SELECT ... WHERE TIMESTAMPDIFF(DAY, NOW(), `timestamp`) = '0' 
```

例如，如果 NOW() = '2020-01-02 00:00:01' 并且`timestamp`是 '2020-01-01 01:00:00'，则上述代码将准确返回 0 天，但 DATEDIFF 将错误地返回 1 天（因为它忽略了时间分量。

# perl - 使用 perl 的 reduce 计算点积

> ID：14347628
> 
> 赞同：3
> 
> 时间：2013-01-15T21:54:43.973
> 
> 标签：perl, dot-product

假设我的`perl`程序中有以下两个大小相等的数组：

```
my @arr1 = 1..5;
my @arr2 = 6..10; 
```

我正在尝试使用核心模块`reduce`中定义的函数来获取他们的点积，`List::Util`但以下内容对我不起作用：

```
my $dot_prod = reduce { $arr1[$a] * $arr2[$a] + $arr1[$b] * $arr2[$b] }0..$#arr1; 
```

我得到**50**作为我的输出，而不是预期的**130**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:54:43.973

该[文档](http://perldoc.perl.org/List/Util.html)描述了`reduce`如下行为：

> 第一次调用将 $a 和 $b 设置为列表的前两个元素，后续调用将通过将 $a 设置为上一次调用的结果并将 $b 设置为列表中的下一个元素来完成。

因此，在这种情况下，第一次迭代`reduce`将设置`$a = 0`and `$b = 1`，因此，执行

```
$arr1[0] * $arr2[0] + $arr1[1] * $arr2[1] 
```

这个临时结果恰好是**20**。

现在，对于第二次迭代，`$a`将其设置为前一次迭代的结果等`$a = 20`和`$b = 2`。因此，将执行以下操作

```
$arr1[20] * $arr2[20] + $arr1[2] * $arr2[2] 
```

这**不是**我们想要的。

**一种可能的解决方法：**

`0`在作为输入提供的列表前面添加一个首字母，`reduce`如下所示：

```
my $dot_prod = reduce { $a + $arr1[$b] * $arr2[$b] } 0, 0..$#arr1; 
```

从第一次迭代开始，这给了我们想要的结果`$a = $b = 0`，我们将计算

```
0 + $arr[0] * $arr[0] 
```

其结果将是**6**。

然后在第二次迭代中，我们将有`$a = 6` `$b = 1`，所以我们将计算

```
6 + $arr1[1] * $arr2[1] 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-09T01:07:17.270

```
my @arr1 = 1..3;
my @arr2 = 6..8;

use List::Util qw(reduce sum) ;

my $dot_prod0 = reduce { $a + $arr1[$b] * $arr2[$b] } 0,0..$#arr1;       #reduce

print "Dot product0 = ".$dot_prod0."\n";
my $dot_prod1 = sum map  { $arr1[$_]*$arr2[$_] } 0..$#arr1;              #sum map
print "Dot product1 = ".$dot_prod1."\n";
my $dot_prod2 = reduce { $a+$b } map { $arr1[$_]*$arr2[$_] } 0..$#arr1;  #reduce map
print "Dot product2 = ".$dot_prod2."\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:04:14.687

诚实地，

```
my $dot_prod = reduce { $a + $arr1[$b] * $arr2[$b] } 0, 0..$#arr1; 
```

不是最易读的。有这个：

```
my $dot_prod = sum map { $arr1[$_]*$arr2[$_] } 0..$#arr1; 
```

但这不使用`reduce`. 好吧，我们可以简单地实现`sum`而`reduce`不是使用 List::Util's，甚至可以内联它：

```
my $dot_prod = reduce { $a+$b } map { $arr1[$_]*$arr2[$_] } 0..$#arr1; 
```

不过，这三种解决方案都不是纯粹的功能性解决方案。

# python - 在 for 循环中使用带有 matplotlib 的事件

> ID：14347630
> 
> 赞同：0
> 
> 时间：2013-01-15T21:54:48.100
> 
> 标签：python, matplotlib

我很抱歉，因为我之前就相关主题打开了另一张票。感谢我现在得到的答案，我可以更具体。我也收到了一些基于 Tkinter 的解决方案，但我想用事件和循环来解决我的问题。

我正在处理的特殊情况如下：我有一个数组数组。我希望 matplotlib 绘制它的第一个元素，允许我按一个键（带有关联事件），然后程序绘制第二个数组，相同的行为，等等。

举个简单的例子：

```
import matplotlib.pyplot as plt
import numpy as np

# Define the event
def ontype(event):
    if event.key == '1':
        print 'It is working'
        plt.clf()

# Create figure an connect the event to it
fig=plt.figure(figsize=(16,8))
plt.gcf().canvas.mpl_connect('key_press_event',ontype)

# Loop
for element in xrange(10):
    #This mimicks the "array of arrays" generating a random array in each loop
    vector = np.random.random(10)  
    plt.plot(vector)
    plt.show() 
```

我希望得到第一个图（循环第一次运行），并且在我按 1 之前它一直保持打开状态。但是，我得到的是一个绘制了十个向量的图，当我按 1 时，这个图是清除并通过终端显示“它正在工作”。我需要程序来绘制第一个元素，并在按下一个键后移至下一个元素。对此有任何提示吗？我究竟做错了什么？

感谢你们！

**编辑：**

请记住，原则上，程序的结构不能改变，并且在绘制任何东西之前需要 for 循环来计算不同的东西。因此，该程序应该去

```
def ontype(event):
     define event

Some stuff
elements = array of arrays
for element in elements:
    do more stuff
    plot element and "stay" in this plot untill any event key is pressed. And then, go to the next element in elements and do the same 
```

**编辑2：**

我认为我没有正确解释自己，并且可能会误解这种数据。就我而言，我正在阅读一个巨大的数据表，每一行都是不同的来源。我试图绘制的是列的信息。我是一名物理学家，所以我对时尚编程或任何东西知之甚少。问题是......如果没有办法用 for 循环做到这一点，谁能解释我如何在没有它的情况下完成这种工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T05:41:27.583

下一个块就是你想要的`for`循环。

```
def ugly_math():
    print 'you will hit this once'
    for j in range(10):
        print 'loop ', j
        # insert math here
        yield  np.random.random(10) * j 
```

您的`for`循环进入函数`ugly_math`，而您想要绘制的是后面的内容`yield`。请参阅[Python 中的“yield”关键字有什么作用？](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained/231855#231855). 简而言之，`yield`将带有循环的函数变成生成器工厂。

```
fun = ugly_math() 
```

然后是生成器。当您调用`fun.next()`它时，它将运行该函数`ugly_math`，直到它到达`yield`. 然后它将返回产生的值（在本例中为`np.random.random`）。下次您调用`fun.next()`它时，它将从循环中停止的地方开始并运行，直到`yield`再次命中。因此，它完全符合您的要求。

然后从 Holger 那里大量借用：

```
fun = ugly_math()
cid_dict = {}
# Define the event
def ontype(event):
    if event.key == '1':
        print 'It is working'
        try:
            vector = fun.next()
            plt.plot(vector)
            fig.canvas.draw()
        except StopIteration:
            plt.gcf().canvas.mpl_disconnect(cid_dict['cid'])
            del cid_dict['cid']

# Create figure an connect the event to it
fig=plt.figure(figsize=(16,8))
cid_dict['cid'] = plt.gcf().canvas.mpl_connect('key_press_event',ontype)

vector = np.random.random(10)  
plt.plot(vector)
plt.show() 
```

在`cid_dict`那里，我们可以在我们用尽生成器后删除回调。

我们可以将这一切包装成一个类

```
class push_to_advance(object):
    def __init__(self):
        self.fig = plt.figure()
        self.ax = self.fig.gca()
        self.bound_keys = []
        self.bound_cid = {}

    def add_step_through(self, gen, key):
        key = key[0] # make a single char
        if key in self.bound_keys:
            raise RuntimeError("key %s already bound"%key)
        first_data = gen.next()
        self.ax.plot(first_data)
        self.fig.canvas.draw()
        self.bound_keys.append(key)
        def ontype(event):
            if event.key == key:
                try:
                    self.ax.plot(gen.next())
                    self.fig.canvas.draw()
                except StopIteration:
                    self.fig.canvas.mpl_disconnect(self.bound_cid[key])
                    del self.bound_cid[key]
                    self.bound_keys.remove(key)

        self.bound_cid[key] = self.fig.canvas.mpl_connect('key_press_event', ontype) 
```

这是这样使用的：

```
 pta = push_to_advance()
 gen = ugly_math()
 pta.add_step_through(gen,'a') 
```

任何可迭代的都需要一些技巧：

```
 test_array = np.arange(100).reshape(10,10)
 pta.add_step_through(test_array.__iter__(), 'b') 
```

这让我很开心，我把它保存为[要点](https://gist.github.com/4545013)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:22:00.983

您不需要循环。`ontype`使用命令重新绘制事件函数中的新图`fig.canvas.draw()`。

```
import matplotlib.pyplot as plt
import numpy as np

# Define the event
def ontype(event):
    if event.key == '1':
        print 'It is working'
        vector = np.random.random(10)  
        plt.plot(vector)
        fig.canvas.draw()

# Create figure an connect the event to it
fig=plt.figure(figsize=(16,8))
plt.gcf().canvas.mpl_connect('key_press_event',ontype)

vector = np.random.random(10)  
plt.plot(vector)
plt.show() 
```

# uitextfield - 如何使用 UICollectionView 提供 Search-As-You-Type 过滤？

> ID：14347631
> 
> 赞同：3
> 
> 时间：2013-01-15T21:54:48.310
> 
> 标签：uitextfield, uisearchbar, uicollectionview

我将 UICollectionView 添加到 ViewController。UICollectionView 在每个单元格上显示带有人名的项目网格。我想在您键入功能时添加搜索功能，该功能将在用户将其名称输入到 ViewController 上的搜索栏或 UITextField 时过滤 UICollectionView，以便它不会随着 UICollectionView 中的内容滚动。

尽管我在一些地方读到 UICollectionView 与 UITableView 相似，但我没有看到在 UICollectionView 中实现此过滤器/搜索功能与在 UITableView 中实现此过滤器/搜索功能相同，并且需要一些帮助。

当您使用 UICollectionView 键入功能时，有没有人有一个很好的例子来做这个搜索/过滤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T15:59:13.060

我通过执行以下操作解决了它（希望它可以帮助其他人）：

我将 CoreData 中的 UICollectionView 填充到 NSArray 中：

```
self.allCVData = [context executeFetchRequest:fetchRequest error:&error]; 
```

然后将我的 NSArray 添加到 NSMutableArray 中，以便我可以使用它来过滤 UICollection：

```
self.filteredCVData =  [[NSMutableArray alloc] initWithArray:allCVData]; 
```

添加了一个 UITextField 并将其命名为 searchField。

在 viewDidLoad 中添加了一个选择器：

```
[mytextfield addTarget:self action:@selector(textDidChange:) forControlEvents:UIControlEventEditingChanged]; 
```

添加了一种方法来接受 UITextField 中的更改：

```
-(void) textDidChange:(id)sender
{

    UITextField* searchField = (UITextField *) sender;

    if(searchField.text.length == 0)
    {
        self.isFiltered = FALSE;
        [self.filteredCVData removeAllObjects];
        [self.filteredCVData addObjectsFromArray:self.allCVData];
    }
    else
    {
        self.isFiltered = true;
        [self.filteredCVData removeAllObjects];
        self.filteredCVData = [[NSMutableArray alloc] init];

        LogInfo(@"Before Looping in allCVData Array.");
        for (OLPerson* person in allCVData)
        {
            NSRange firstnameRange = [person.firstname rangeOfString:searchField.text options:NSCaseInsensitiveSearch];
            NSRange surnameRange = [person.surname rangeOfString:searchField.text options:NSCaseInsensitiveSearch];
            if(firstnameRange.location != NSNotFound || surnameRange.location != NSNotFound)
            {
                [self.filteredCVData addObject:person];
            }
        }
    }

    [self.collectionView reloadData];

} 
```

# php - jquery if语句和hasClass？

> ID：14347632
> 
> 赞同：0
> 
> 时间：2013-01-15T21:54:52.413
> 
> 标签：php, javascript, jquery

我正在使用 wordpress 和一个名为高级 ajax 页面加载器的插件。 [http://wordpress.org/extend/plugins/advanced-ajax-page-loader/](http://wordpress.org/extend/plugins/advanced-ajax-page-loader/)

我对 php、javascript 和 jquery 有点熟悉，但无论如何都不是专家。我有以下代码块将某些页面排除在 ajax 加载之外，它工作得很好。

```
jQuery(scope + "a").click(function(event){
    //if its not an admin url, or doesnt contain #
    if (  this.href.indexOf(AAPLhome) >= 0 && this.href.indexOf('/wp-') < 0 && this.href.indexOf('#') < 0 && this.href.indexOf('/search') < 0 && this.href.indexOf('/2013') < 0 && this.href.indexOf('/2012') < 0 && this.href.indexOf('/2011') < 0 && this.href.indexOf('/feed') < 0 && this.href.indexOf('/portfolio') < 0 && this.href.indexOf('/store') < 0 ){
        // stop default behaviour
        event.preventDefault();
}); 
```

如您所见，我正在排除其网址中包含某些字符串的页面。

但是，我需要定位主页链接，并通过这种方式插入主页 url，所有页面都包含主页 url，因此它们都被排除在外。我希望能够在这段代码中插入一个 hasClass 语句，这样我就可以排除一个具有“homelink”类的链接。

以下给了我 this.hasClass is not a function 的错误。

```
this.hasClass('homelink') 
```

所以我一定是做错了什么，但如果我知道是什么，我真该​​死。

我试过查看这些链接，但没有从中得到太多。

[Jquery hasClass + If 语句](https://stackoverflow.com/questions/6051373/jquery-hasclass-if-statement)

[jQuery — if 语句中的 hasClass 不能正常播放](https://stackoverflow.com/questions/5345374/jquery-hasclass-in-if-statement-not-playing-nicely)

[http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:55:51.283

你需要`this`包裹`$()`

```
$(this).hasClass('homelink'); 
```

`this`在这种情况下是 DOMElement 并且 dom 元素没有`hasClass`方法。通过传递`this`给`$()`，它变成了一个具有该`hasClass`方法的 jQuery 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T20:25:50.710

选择器的另一种方法`:not()`：

```
jQuery(scope + "a:not(.homelink)").click(function(event){ 
```

# c# - C# 中的 XmlElement

> ID：14347635
> 
> 赞同：4
> 
> 时间：2013-01-15T21:55:03.737
> 
> 标签：c#, xmlserializer

我在 C# 中有一个简单的类，我已经设置为使用 XmlSerializer 类将其序列化为 XML。

```
[Serializable, XmlRoot("dc", Namespace= dc.NS_DC)]
public class DCItem {

    // books??

    [XmlElement("title")]
    public string Title { get; set; }

} 
```

DCItem 序列化很好，因为现在设置了代码（如上所示）；但是，我想更改属性“标题”，使其包含在“书籍”节点中。例如：

```
<dc>
  <books>
    <title>Joe's Place</title>
  </books>
</dc> 
```

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:58:19.420

您可以定义一个 Books 类：

```
public class Books
{
    [XmlElement("title")]
    public string Title { get; set; }
} 
```

接着：

```
[XmlRoot("dc", Namespace= dc.NS_DC)]
public class DCItem 
{
    [XmlElement("books")]
    public Books Books { get; set; }
} 
```

另请注意，我已经摆脱了二进制序列化程序使用的 Serializable 属性，而 XmlSerializer 类完全忽略了该属性。

现在因为我怀疑你可能有多本书：

```
<dc>
  <books>
    <title>Joe's Place</title>
    <title>second book</title>
    <title>third book</title>
  </books>
</dc> 
```

您可以调整您的对象模型以匹配此结构：

```
[XmlRoot("dc", Namespace= dc.NS_DC)]
public class DCItem
{
    [XmlElement("books")]
    public Books Books { get; set; }
}

public class Books
{
    [XmlElement("title")]
    public Book[] Items { get; set; }
}

public class Book
{
    [XmlText]
    public string Title { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T21:59:18.860

我假设你想要几个`<title>`在`<books>`. 那么这是一种方法：

```
[XmlType("title")]
public class Title 
{
    [XmlText]
    public string Text { get; set; }
}

[XmlRoot("dc")]
public class DCItem 
{
    [XmlArray("books")]
    public List<Title> Books { get; set; }
} 
```

不过，您可能希望有一个`<book>`元素，并将标题作为属性或元素放在`<book>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:58:47.223

最简单的方法是创建一个包含标题属性的书籍类。

```
public class booksType
{
    public string title {get;set;}
} 
```

并将其用作主类中书籍属性的类型。

```
public booksType books {get;set;} 
```

# javascript - 相对 DIV / 画布内的 Y 位置在 IE 中表现不稳定

> ID：14347641
> 
> 赞同：0
> 
> 时间：2013-01-15T21:55:36.933
> 
> 标签：javascript, internet-explorer, html5-canvas

为简单起见，以下 javascript 和 css 在 Chrome 和 Firefox 中运行良好。一旦我在 IE 中对其进行了测试，在我触发了与鼠标位置相关的任何代码（例如更改鼠标指针）后，Y 值就会变得非常糟糕。它增加了90个像素或几乎翻倍等。代码和样式如下：

```
<style>
    #miContenedor{
        width:780px;
        height:1600px;
        margin:auto;
        margin-top:185px;
        position:relative;
        border: 4px solid black;
    }
    #miCanvas{
        background-image:url(Images/mat06pag34.png);
        background-repeat:no-repeat;
    }
</style>
<script>
canvas.addEventListener('click',ProcessClick,false);
function ProcessClick(toi){
    var posx = toi.layerX;
    var posy = toi.layerY;
    if(toi.layerX == undefined || toi.layerY == undefined){
        posx = toi.offsetX;
        posy = toi.offsetY;
    }
}//ProcessClick

canvas.onmousemove = function(tamos){
    var posxX = tamos.layerX;
    var posyY = tamos.layerY;
    if(tamos.layerX == undefined || tamos.layerY == undefined){
        posxX = tamos.offsetX;
        posyY = tamos.offsetY;
    }
    var coords = posxX + "," + posyY; ctx.clearRect(700, 300, 80, 40); ctx.fillText(coords, 700, 320);
    if(posxX>=30 && posxX<=420 && posyY>=380 && posyY<=400){
        canvas.style.cursor = "help";
    }
    else{
        canvas.style.cursor = "default";
    }
}//onmousemove
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:46:49.143

发现是页面的滚动弄乱了我的坐标。尝试了*scrollLeft*和*scrollTop*但最终找到了一个更简单的解决方案：首先尝试 offsetX / offsetY，然后是 layerX / layerY。

```
canvas.addEventListener('click',ProcessClick,false);
function ProcessClick(toi){
    var posx = toi.offsetX;
    var posy = toi.offsetY;
    if(toi.offsetX == undefined || toi.offsetY == undefined){
        posx = toi.layerX;
        posy = toi.layerY;
    }
    var coord = "Click en: " + posx + "," + posy;
    if(posx>=100 && posx<=200 && posy>=100 && posy<=200){
        ctx.clearRect(250, 235, 500, 30);
        ctx.fillText(coord, 250, 250);
    }
}//ProcessClick

canvas.onmousemove = function(tamos){
    var posxX = tamos.offsetX;
    var posyY = tamos.offsetY;
    if(tamos.offsetX == undefined || tamos.offsetY == undefined){
        posxX = tamos.layerX;
        posyY = tamos.layerY;
    }
    var coords = posxX + "," + posyY; ctx.clearRect(250, 335, 500, 30); ctx.fillText(coords, 250, 350);
    if(posxX>=100 && posxX<=200 && posyY>=100 && posyY<=200){
        canvas.style.cursor = "pointer";
    }
    else{
        canvas.style.cursor = "default";
    }
}//onmousemove 
```

# java - 将字符串小数 (2.9) 更改为 Int 或 Long 问题

> ID：14347642
> 
> 赞同：4
> 
> 时间：2013-01-15T21:55:37.683
> 
> 标签：java

好的，我对 java 还很陌生，但我学得很快（希望如此）。所以无论如何这是我的问题：

我有一个字符串（例如我们将使用 2.9），我需要将其更改为 int 或 long 或类似的东西，以便与另一个数字进行比较。

据我所知 int 不支持小数，我不确定 long 是否也支持？如果不是，我需要知道什么支持小数。

这是错误：`java.lang.NumberFormatException: For input string: "2.9"`同时使用 Interger.parseInt 和 Long.parseLong

所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:57:51.930

您不能直接从小数点值中获取`int`（或） 。`long`

一种方法是：

首先得到一个双精度值，然后得到 int（或）long。

例子：

```
int temp =  Double.valueOf("20.2").intValue();
System.out.println(temp); 
```

输出：

```
20 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T21:58:28.630

`int`并且`long`都是整数数据类型，分别是 32 位和 64 位。您可以使用`float`or`double`来表示浮点数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T21:58:18.800

该字符串 (2.9) 既不是`integer`也不是`long`。您应该使用一些小数点类型，例如`float`or `double`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T22:00:38.490

两者`int`和`long`都是整数值（`long`表示*长整数*，它是具有更高容量的整数）。解析失败，因为这些类型不支持小数部分。

如果您要使用它们并强制进行强制转换，您将放弃数字的小数部分。

```
double iAmADouble = 100 / 3;
int iWasADouble = (int)iAmADouble; //This number turns out to be 33 
```

使用`double`或`float`代替。

# java - 并发更新问题

> ID：14347650
> 
> 赞同：1
> 
> 时间：2013-01-15T21:56:10.760
> 
> 标签：java, hibernate, concurrency, transactions

我有一个使用休眠实现的乐观版本控制表。此表中的一行可以同时被多个事务更新，并且此更新方法是在无状态会话 bean 中。这里的问题是当用户在高峰时间处理应用程序时，三到四个事务试图更新同一行并且数据库允许更新第一个事务和其他事务得到版本控制错误（这根据实现工作）。由于这个用户的操作被延迟，他们必须重复相同的过程，直到数据库允许更新。

无论如何，是否允许使用乐观版本控制从多个事务进行更新？

# c# - MSTest 测试框架中的 Program_Accessor 是什么？

> ID：14347666
> 
> 赞同：1
> 
> 时间：2013-01-15T21:57:27.133
> 
> 标签：c#, visual-studio-2010, mstest

我曾尝试在谷歌上搜索答案，但无法找到有关此主题的任何内容。

Visual Studio 创建的单元测试中的 Program_Accessor 是什么？我在哪里可以了解更多关于它的用途以及如何使用它的信息？

我主要专注于测试，尤其是 Visual Studio 和 C# 中的单元测试。在哪里可以了解有关 Visual Studio 中单元测试的更多信息？

即使我没有得到直接的答案，如果有人能指出我可以了解它的资源（书籍、网络文章等），我将非常感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:04:46.680

在`MsTest`尝试测试`private`类的成员时，它会生成带有 `_Accessor`后缀的文件。这些被称为私有访问器，并允许测试挂钩来调用您正在测试的类中的私有成员。

[这是有关该主题的一些 msdn 帮助](http://msdn.microsoft.com/en-us/library/ms184796%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:26:48.623

在我看来，最好的书之一是 Roy Osherove 的“单元测试的艺术”。

它不专注于 Visual Studio 中的测试，但它会让你很好地理解如何编写好的单元测试以及如何编写可测试的代码。

# javascript - Windows Phone 8 HTML5 应用程序中的 Webfont

> ID：14347667
> 
> 赞同：1
> 
> 时间：2013-01-15T21:57:28.880
> 
> 标签：javascript, css, html, windows-phone-8, windows-phone

我无法在我的 Windows Phone 8 HTML5 应用程序中使用任何网络字体。

我执行以下操作：

1.  创建一个新的 Windows Phone HTML5 应用项目
2.  将我的 WOFF 字体（尽管我也尝试过 eot 和 ttf）复制到项目根目录，并将其作为现有项目添加到项目中
3.  [将此 CSS](http://pastebin.com/kWHazerA)添加到 index.html 文件中

如果有人可以使用简单的本地 Web 字体创建模板 Windows Phone 8 项目，我将不胜感激。这让我真的陷入了困境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:09:46.463

Windows 手机支持网络字体。但是，如果它们嵌入在 XAP 中，它们将无法工作。

工程响应：这是一个已知问题，我们知道的唯一解决方法是将字体托管在远程服务器上（确保绕过单一来源策略问题），并可能使用 AppCache 将字体文件保存在设备本地。

谢谢，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T19:27:10.820

显然这是一个已知问题，作为一种解决方法，您需要将字体托管在远程服务器中，直到 Microsoft 解决此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-13T19:20:03.507

我已经能够在 Windows Phone 8 HTML 应用程序中毫无问题地使用本地 truetype 网络字体。您必须确保使用[TTFEdit](http://sourceforge.net/projects/ttfedit/)等软件将字体中的可嵌入标志设置为 0 。

在这里查看我对类似 stackoverflow 问题给出[的完整答案。](https://stackoverflow.com/a/20573678/2453048)

我认为这可能比接受的答案更好，但我是一个 n00b，所以我还不能对此添加评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T21:59:41.793

我已经搜索并找到了以下帖子。可能是相关的。

[Phonegap Windows Phone 7 动态 HTML 加载和使用 jQuery 的跨域调用](https://stackoverflow.com/questions/13038573/phonegap-windows-phone-7-dynamic-html-loading-and-cross-domain-calls-using-jquer)

“如果 Cordova 未初始化（即设备就绪尚未触发），浏览器控件会将其视为远程获取，并将您置于通常的跨域问题并拒绝”这可能是 CSS 的情况。也许您可以尝试在 deviceready 事件之后动态加载 CSS 并看看会发生什么。

注意：我在[Windows Phone 8 上发布了相同的答案 Phonegap/Cordova web-fonts](https://stackoverflow.com/questions/14357737/phonegap-cordova-web-fonts-with-windows-phone-8/14447907#14447907)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T23:28:39.413

我刚刚在这个视频中注意到了。[http://channel9.msdn.com/Blogs/Interoperability/Getting-started-with-Windows-Phone-8-and-Cordova](http://channel9.msdn.com/Blogs/Interoperability/Getting-started-with-Windows-Phone-8-and-Cordova)在 4:12 左右，它提到构建操作必须设置为“内容”以便查看文件。不确定这是否有帮助，因为我们已经收到了有关错误的报告。:p 但我希望无论如何都值得分享。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-21T19:09:58.990

我使用 Cufon [http://cufon.shoqolate.com/](http://cufon.shoqolate.com/)解决了这个问题。Cufon 渲染图像而不是文本，这就是它在 Windows Phone 上工作的原因。

这是文档和用法：[https](https://github.com/sorccu/cufon/wiki) ://github.com/sorccu/cufon/wiki 。我希望这有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-21T13:50:13.280

看起来如果您将字体编码为 base64 并将其直接放在 css 文件中，那么它也可以在 WP8 应用程序中使用。

[使用Icomoon](http://icomoon.io/app/)或[Fontsquirrel](http://www.fontsquirrel.com/tools/webfont-generator)等 Web 应用程序，您可以轻松生成包含 base64 字符串的 css。

# jsf - IceFaces 1.8.2a

> ID：14347670
> 
> 赞同：0
> 
> 时间：2013-01-15T21:57:47.103
> 
> 标签：jsf, icefaces

有人对在 Glassfish 3 中运行 icefaces 1.8.2 有任何见解吗？我已经读过可以使用的 Glassfish 版本（1.8.2a），但我找不到它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:12:39.177

至少，您必须将 JSF 库从 JSF 2（作为 GF3 的一部分提供）换成 JSF 1.2（ICEfaces 1.8 使用的）。这可能有点繁琐。

看起来你需要 1.8.2a 版本，它也有一些修复来启用它。它看起来也不能免费下载。如果您订阅了 ICEfacesEE，您可以获得它，但它不是开源的。除非这已经改变。ICEfaces 1.8 版现在已经相当老了，他们的页面上没有列出 v2 之前的任何内容。

祝你好运

# jquery - .toggle() 示例不适用于 jQuery 1.9

> ID：14347672
> 
> 赞同：3
> 
> 时间：2013-01-15T21:57:59.877
> 
> 标签：jquery, twitter-bootstrap

请看[这个小提琴](http://jsfiddle.net/MgcDU/1334/)。它有一个悬停时显示的按钮。

现在尝试更改为 jQuery 1.9.0，并注意 Fiddle 中断。

我用错了`toggle()`吗？这是我的错，还是 jQuery 的错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T22:01:31.570

`hover`伪事件不再存在，请改用 mouseenter 和 mouseleave 。

```
$('#user-rows').on('mouseenter mouseleave', '.user-row', function () {
  $(this).find('.edit').toggle();
}); 
```

[http://jsfiddle.net/MgcDU/1337/](http://jsfiddle.net/MgcDU/1337/)

[http://jquery.com/upgrade-guide/1.9/#hover-pseudo-event](http://jquery.com/upgrade-guide/1.9/#hover-pseudo-event)

# c# - ASP.NET 配置文件属性 - 使用 C# MVC

> ID：14347679
> 
> 赞同：0
> 
> 时间：2013-01-15T21:58:33.527
> 
> 标签：c#

我正在使用 .NET 4.0 使用 C# MVC

我正在尝试实现看到的 ASP.NET 配置文件属性

[http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)

首先，我在 web.config 文件中添加了以下内容。请注意，我正在尝试存储给定用户的位置：

```
 <profile>
     <properties>
      <add name="Location" />
     </properties>
     <providers>
      <clear />
      <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
     </providers>
    </profile> 
```

在我的代码中，我使用了以下内容：

发布后，我在控制器中使用了以下内容：

```
 Profile.Location = model.Location; 
```

我收到一个错误，无法解析“个人资料”。有没有人使用可以提供任何帮助的 Profile 属性？请注意，我什至找不到文章中提到的类。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:02:03.930

配置文件必须属于用户/成员，因此您必须在向其添加任何配置文件属性之前加载或创建新用户。

[有关类似问题，请参阅此 SO 帖子](https://stackoverflow.com/questions/426609/how-to-assign-profile-values)

# xml - 从 Android 向 Rails 服务器发送 HTTP 请求

> ID：14347681
> 
> 赞同：1
> 
> 时间：2013-01-15T21:58:34.777
> 
> 标签：xml, ruby-on-rails-3, http-get

我尝试在android中将带有http的xml文件发送到rails服务器。

我的android发送代码：

```
 String link = "http://10.0.2.2:3000/export";

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(link);

    try {
        String xmlFile = createXml(locationList);
        StringEntity entity = new StringEntity(xmlFile, "UTF-8");
        httppost.setEntity(entity);
        httppost.addHeader("Content-Type", "application/xml");
        HttpResponse response = httpclient.execute(httppost);
        Log.d("response reason phrase", ""
                + response.getStatusLine().getReasonPhrase());
        Log.d("response content", ""
                + response.getStatusLine().getStatusCode());
    } catch (ClientProtocolException e) {
        Log.d("exception", e.getMessage());
    } catch (IOException e) {
        Log.d("exception", e.getMessage());
    } 
```

在 Rails 中，我创建了一个控制器方法来监听导出链接：

```
def export

begin
  result = Net::HTTP.get(URI.parse("http://localhost:3000/export"))
  MyLog.debug "#{result}"
  xml_doc = Nokogiri::XML(result)

  locations = xml_doc.xpath("//location")

  if locations.count > 0
    training = Training.create!

    locations.each do |xml_location|
      location = Location.new
      location.latitude = xml_location.xpath("latitude").text
      location.longitude = xml_location.xpath("longitude").text
      location.training_id = training.id
      location.save!
    end
  end
    # end
rescue TimeoutError => e
  MyLog.debug "timeout #{e}"
end
end 
```

我被迫创建了一个 export.html.erb，其中包含以下内容：

```
没什么可看的
```

我的 routes.rb 包含以下内容：

```
 match 'export' => 'Trainings#export', as: "export", :via => [:get, :post] 
```

但是，如果我现在通过我的应用程序向服务器发送一个请求，我会在我的 cmd 中看到以下内容：

```
 Started POST "/export" for 127.0.0.1 at 2013-01-15 22:47:59 +0100
    Connecting to database specified by database.yml
    Processing by TrainingsController#export as HTML
    Parameters: {"training"=>{"location"=>[{"longitude"=>"60.0", 
    "latitude"=>"60.0"}, {"longitude"=>"59.9999", "latitude"=>"60.0"},
    {"longitude"=>"59.99995", "latitude"=>"59.9999"}]}}
    WARNING: Can't verify CSRF token authenticity
    Rendered trainings/export.html.erb within layouts/application (25.0ms)
    Completed 200 OK in 61633ms (Views: 576.0ms | ActiveRecord: 0.0ms) 
```

在此之后，就不可能再访问我的服务器了，我会在控制台中看到以下内容：

```
 Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-01-15 22:53:00 +0100
     Served asset /jquery.js - 200 OK (76ms)
     [2013-01-15 22:53:00] ERROR Errno::ECONNABORTED: Eine bestehende Verbindung wurd
     e softwaregesteuertdurch den Hostcomputer abgebrochen.
     C:/Ruby/Ruby193/lib/ruby/1.9.1/webrick/httpresponse.rb:396:in `write'
     C:/Ruby/Ruby193/lib/ruby/1.9.1/webrick/httpresponse.rb:396:in `<<'
     C:/Ruby/Ruby193/lib/ruby/1.9.1/webrick/httpresponse.rb:396:in `_write_data'
     C:/Ruby/Ruby193/lib/ruby/1.9.1/webrick/httpresponse.rb:368:in `send_body_string'
     C:/Ruby/Ruby193/lib/ruby/1.9.1/webrick/httpresponse.rb:249:in `send_body'
     C:/Ruby/Ruby193/lib/ruby/1.9.1/webrick/httpresponse.rb:152:in `send_response'
     C:/Ruby/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:110:in `run'
     C:/Ruby/Ruby193/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

幸运的是，我的 xml 解析工作正常，因为我已经通过在该方法中复制创建的 xml 文件对其进行了测试，但希望您能帮助我理解我的问题 :)。我已经搜索了很多小时，但我没有任何东西，这帮助我解决了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:54:48.663

幸运的是，我通过朋友的提示解决了这个问题。

我的误解是控制器方法通常会听导出链接，所以我听了两次。

所以解决方案是删除http get：

```
 result = Net::HTTP.get(URI.parse("http://localhost:3000/export")) 
```

然后我不得不删除 xml 解析，因为我得到了散列中的信息

# javascript - D3和鼠标事件，点击测试不起作用

> ID：14347685
> 
> 赞同：1
> 
> 时间：2013-01-15T21:58:47.693
> 
> 标签：javascript, onclick, d3.js

我不确定为什么我的点击方法不起作用。在这个测试中，我希望能够单击图表上的一个圆形节点并显示其编号。悬停在作品上。

我使用的是什么库的点击事件，D3？jQuery？普通的JS？

最终我想在我将鼠标悬停在节点上时做工具提示，并在我将鼠标移开时让它们消失

[http://jsfiddle.net/ericps/b5v4R/](http://jsfiddle.net/ericps/b5v4R/)

```
dots.enter()
    .append("circle")
    //.append("svg:circle")
    .attr("class", "dot")
    .attr("cx", complete_line.x())
    .attr("cy", complete_line.y())
    .attr("r",3.5)
    .append("title")
    .text(function(d){ return d.completed;})
    .on("click", function(d) { alert("hello"); }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T22:07:16.637

您已将事件处理程序附加到 svg:text 元素。我认为您想将其附加到 svg:circle 元素：

```
dots.enter().append("circle")
    .attr("class", "dot")
    .attr("cx", complete_line.x())
    .attr("cy", complete_line.y())
    .attr("r",3.5)
    .on("click", function(d) { alert("hello"); })
  .append("title")
    .text(function(d){ return d.completed; }); 
```

# mysql - Git：如何对 MySQL 进行版本控制？

> ID：14347691
> 
> 赞同：2
> 
> 时间：2013-01-15T21:59:02.030
> 
> 标签：mysql, git

我正在使用 MODx CMS 并想使用 git 进行合作。但是，如您所知，MODx 将一些代码位置存储在数据库中。所以，我想知道，除了倾销之外，如何对 MySQL 进行联合工作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:16:18.643

听起来您可能在谈论存储过程和/或用户定义的函数？

无论如何，最好的方法是 mysqldump - 大概，您不需要数据，只需要存储的过程、用户定义的函数，也许还有表结构。mysqldump 有一些选项可以控制输出的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:29:51.237

您需要以某种格式存储数据库，并且它不能是 SQL，因为您不能只告诉实时数据库使用 SQL 文件更新架构。

基本上，您必须存储一组更新数据库的增量命令。在这种情况下，Git 不会真正帮助您，您将不得不使用自己的系统。

实现这一点的最简单方法是仅对数据库版本进行编号并仅将更改存储在您最喜欢的编程语言中。

* * *

第 1 步：将当前数据库版本存储在某处。

第 2 步：将数据库的所有更新存储在文件中。

```
update/mysql_1_to_2.py
update/mysql_2_to_3.py
# etc 
```

第三步：创建初始数据库

```
update/mysql_0_to_1.py 
```

* * *

如果您使用该系统，您需要做的就是跟踪当前使用的版本和代码中最新的版本。当您需要更新时，只需运行所有`mysql_x_to_y`脚本即可完成版本控制。`mysql_0_to_1`可以进行初始引导，如果您设法达到 1000 次修订，只需使用`mysql_0_to_1000`走捷径。

我上面概述的系统应该非常适用于线性存储库，但可能有点难以用于树（分支、多个开发人员等）。我相信你可以想出一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T23:26:31.463

如果你想将数据库的版本控制添加到代码的版本控制中，你必须在 Liquibase 看到。为避免再次重复所有内容，我较早的[有关主题的完整答案](https://stackoverflow.com/a/14160141/960558)

# c# - 表达 > 仅有效内联而不是通过 Moq 的 Setup() 中的绑定 lambda？

> ID：14347704
> 
> 赞同：4
> 
> 时间：2013-01-15T21:59:45.320
> 
> 标签：c#, recursion, lambda, moq, expression-trees

模拟库[Moq](http://code.google.com/p/moq/)有一个带有签名的 Setup() 方法：

```
public ISetup<T, TResult> Setup<TResult>(Expression<Func<T, TResult>> expression) 
```

所以我可以做这样的事情就好了（使用库的递归模拟）：

```
Mock<Thing> _thing = new Mock<Thing>();
_thing.Setup((Thing t) => t.PropA.SubPropB).Returns(string.Empty); 
```

但这失败了：

```
Expression<Func<Thing, object>> test = (Thing t) => t.PropA.SubPropB;
_thing.Setup(test).Returns(string.Empty); 
```

出现错误：

```
Expression is not a method invocation: t => (Object)t.PropA.SubPropB 
```

内联 lambda 和首先分配给变量的 lambda 有什么区别？不是两个*表达式树*都还没有编译（Moq 解析树）？

编辑 - 看起来问题出在`Func<Thing, object>`打字上。例如，为什么`string`可以接受，但`object`不能接受？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:00:59.933

> 例如，为什么字符串可以接受，而对象不可以？

因为函数声明`moq`不是由泛型类型协变的。尝试以下一种方式设置最小起订量

```
 _thing.Setup(test).Returns((object)string.Empty); 
```

因为你有下一个签名`Expression<Func<Thing, object>>`并且它不是协变的`object`

或者将您的签名更改为`string`这样（假设`t.PropA.SubPropB`返回字符串）：

```
Expression<Func<Thing, string>> test = (Thing t) => t.PropA.SubPropB;
                        //^here should be string 
```

**真实案例** 我创建了一个带有`Expression`局部变量的测试项目，它与`string`and一起工作正常`object`。如果我遗漏了什么，请检查我的配置。最小起订量 - **4.0.10827v**

```
[TestFixture]
public class Class1
{
    [Test]
    public void TestMethod()
    {
        Mock<Thing> _thing = new Mock<Thing>();

        Expression<Func<Thing, string>> setup = t => t.PropA.SubPropB;
//                               ^ works with string and object
        _thing.Setup(setup).Returns(string.Empty);

        Assert.IsEmpty(_thing.Object.PropA.SubPropB);

    }
}

public class Thing
{
    public virtual Thingy PropA { get; set; }
}

public class Thingy
{
    public virtual string SubPropB { get; set; }
} 
```

# java - 为搜索引擎项目编写单元测试

> ID：14347706
> 
> 赞同：0
> 
> 时间：2013-01-15T21:59:46.880
> 
> 标签：java, unit-testing

对于我正在学习的课程，我将编写一个非常强大的文本搜索引擎。

我正在考虑使用测试驱动开发来促进开发。

我的问题是我以前从未编写过单元测试，所以我不确定我应该测试什么。

例如运行期望特定已知结果的特定查询的测试将是一个很好的测试（即运行查询“医学”，如果它不返回 5000 个结果则抛出错误）是一个很好的候选者，或者我的测试应该更小，测试代码的较小部分而不是整个程序？

如果是这样的话，搜索引擎应用程序中的单元测试有哪些好的示例？

什么是开始测试驱动开发思维的好资源？

# c++ - 在完成端口中调用 WSASend()？

> ID：14347708
> 
> 赞同：5
> 
> 时间：2013-01-15T21:59:55.943
> 
> 标签：c++, sockets, networking, io, winsock

你们中的许多人都知道原始的“send()”不会将您要求的字节数写入线路。您可以轻松地使用指针和循环来确保您的数据已全部发送。

但是，在这种情况下，我看不到 WSASend() 和完成端口如何工作。它立即返回，您无法控制发送了多少（除了您可以在例程中访问的 lpLength ）。如何解决？

您是否必须在例程中多次调用 WSASend() 才能获取所有数据？这似乎不是一个很大的缺点，特别是如果您希望以特定顺序输出数据并且多个线程访问例程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T09:18:31.840

当您使用与一个和一个结构`WSASend`相关联的套接字进行调用时，您可以有效地将数据传递给网络堆栈以进行发送。一旦网络堆栈不再需要您使用的数据缓冲区，网络堆栈将为您提供“完成”。此时，您可以自由地重用或释放用于数据缓冲区的内存。`IOCP``OVERLAPPED`

请注意，数据不太可能在生成完成时到达对等方，并且完成的生成意味着网络堆栈已获得缓冲区内容的所有权。

这与`send`操作方式不同。在`send`阻塞模式下，调用`send`将阻塞，直到网络堆栈使用了您提供的所有数据。对于`send`在非阻塞模式下的调用，网络堆栈从缓冲区中获取尽可能多的数据，然后返回给您使用的详细信息；这意味着您的某些数据已被使用。`WSASend`通常，在您收到通知之前，您的所有数据都会被使用。

`WSASend`由于资源限制或网络错误，重叠可能会失败。出现表明某些数据已发送但不是全部的失败是不常见的。通常它都发送好或根本没有发送。但是，可能会出现错误，这表明某些数据已被使用但不是全部。从这一点开始的方式取决于错误（临时资源限制或硬网络故障）以及`WSASend`您在该套接字上挂起的其他 s 数量（零或非零）。如果您有临时资源错误并且没有其他未解决的问题，您只能尝试发送其余数据`WSASend`调用此套接字；而且由于您不知道临时资源限制情况何时会过去，这使情况变得更加复杂......如果您曾经有临时资源限制导致部分发送并且您确实有其他`WSASend`呼叫未决，那么您可能应该中止连接，因为您可能通过从该调用发送部分缓冲区`WSASend`，然后发送后续`WSASend`调用的全部（或部分）而使您的数据流出现乱码。

请注意，`WSASend`在一个套接字上处理多个未完成的调用是 a) 有用且 b) 高效的。这是保持连接充分利用的唯一方法。但是，您应该注意`WSASend`一次挂起多个重叠调用的内存和资源使用影响（请参阅[此处](http://www.serverframework.com/asynchronousevents/2011/06/tcp-flow-control-and-asynchronous-writes.html)），因为您正在有效地控制缓冲区的生命周期（以及您的内存和资源量）由于 TCP 流控制问题，代码使用）到对等方）。看看`SIO_IDEAL_SEND_BACKLOG_QUERY`，`SIO_IDEAL_SEND_BACKLOG_CHANGE`如果你想变得非常聪明......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T01:54:12.500

`WSASend()`在套接字接受所有请求的数据或发生错误之前，完成端口上不会通知您，以先发生者为准。它一直在后台工作，直到所有数据都被接受（或出错）。`WSASend()`在它通知您之前，该缓冲区必须在内存中保持活动状态，但是您的代码可以在忙碌时继续执行其他操作。数据实际传输到对等方时没有通知。如果您需要，那么您必须在数据协议中实现 ACK，以便对等方在收到数据时通知您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:26:09.243

首先关于`send`. 实际上可能会发生两种不同的事情，具体取决于套接字的配置方式。

如果套接字处于所谓的阻塞模式（默认） - 调用`send`将**阻塞**调用线程，直到底层网络驱动程序消耗所有输入缓冲区。（请注意，这并不意味着数据已经到达对等方）。

如果套接字被转移到非阻塞模式 -如果底层驱动程序可能不会立即消耗所有输入，则调用`send`将**失败。**在这种情况下的`GetLastError`回报。`WSAEWOULDBLOCK`应用程序应该等到它可以重试发送。应用程序应该从系统获取有关套接字状态更改的通知，而不是循环调用`send`。诸如`WSAEventSelect`或之类的函数`WSAAsyncSelect`可用于此（以及 legacy `select`）。

现在，有了 I/O 完成端口，`WSASend`情况就有些不同了。当套接字与完成端口相关联时 - 它会自动转换为非阻塞模式。

如果调用`WSASend`不能立即完成（即网络驱动程序不能消耗所有输入） -`WSASend`返回错误并`GetLastError`返回`STATUS_PENDING`. 这实际上意味着异步操作已**开始**但尚未完成**。

也就是说，您不应该`WSASend`重复调用，因为发送操作已经在进行中。当它完成时（无论成功与否），您都会在 I/O 完成端口上收到通知，但同时调用线程可以自由地做其他事情。

# mysql - Symfony+Propel：设置连接排序规则

> ID：14347709
> 
> 赞同：1
> 
> 时间：2013-01-15T22:00:08.297
> 
> 标签：mysql, symfony, pdo, propel, collation

我正在通过 MySQL 服务器 5.5.28 使用与 Propel 1.6.7 集成的 Symfony 2.1.6 框架作为数据库 ORM，我在将数据库排序规则设置为`utf8_unicode_ci`.

我的*app/config/config.yml*：

```
...
propel:
    dbal:
        driver:               %database_driver%
        user:                 %database_user%
        password:             %database_password%
        dsn:                  "%database_driver%:host=%database_host%;dbname=%database_name%;charset=%database_charset%"
        options:
            MYSQL_ATTR_INIT_COMMAND: "SET NAMES utf8 COLLATE utf8_unicode_ci"
        attributes:           {} 
```

（参数已经在*app/config/parameters.yml*中定义）

没有`options`它可以工作，但会出现字符集问题（MySQL 默认为`utf8_general_ci`排序规则，但数据库模式是用 定义的`utf8_unicode_ci`）。如果我`options`像上面那样使用 Propel/Symfony 会引发一堆异常：

```
in /var/www/vendor/propel/propel1/runtime/lib/Propel.php at line 725  -+
at ErrorHandler ->handle ('2', 'Illegal string offset 'value'', '/var/www/vendor/propel/propel1/runtime/lib/Propel.php', '725', array('source' => array('MYSQL_ATTR_INIT_COMMAND' => 'SET NAMES utf8 COLLATE utf8_unicode_ci'), 'write_to' => array(), 'option' => 'MYSQL_ATTR_INIT_COMMAND', 'optiondata' => 'SET NAMES utf8 COLLATE utf8_unicode_ci', 'key' => '1002'))
in /var/www/vendor/propel/propel1/runtime/lib/Propel.php at line 725  -+
at Propel ::processDriverOptions (array('MYSQL_ATTR_INIT_COMMAND' => 'SET NAMES utf8 COLLATE utf8_unicode_ci'), array())
in /var/www/vendor/propel/propel1/runtime/lib/Propel.php at line 668  -+
at Propel ::initConnection (array('dsn' => 'mysql:host=127.0.0.1;dbname=symfony;charset=utf8', 'user' => 'root', 'password' => '********', 'classname' => 'DebugPDO', 'options' => array('MYSQL_ATTR_INIT_COMMAND' => 'SET NAMES utf8 COLLATE utf8_unicode_ci'), 'attributes' => array(), 'settings' => array()), 'default')
in /var/www/vendor/propel/propel1/runtime/lib/Propel.php at line 576  -+
at Propel ::getMasterConnection ('default')
in /var/www/vendor/propel/propel1/runtime/lib/Propel.php at line 602  -+
at Propel ::getSlaveConnection ('default')
in /var/www/vendor/propel/propel1/runtime/lib/Propel.php at line 552  -+
at Propel ::getConnection ('default', 'read')
in /var/www/vendor/propel/propel1/runtime/lib/query/ModelCriteria.php at line 1160  -+
at ModelCriteria ->find ()
in /var/www/src/Acme/AppBundle/Controller/DefaultController.php at line 20  -+
at DefaultController ->fooAction ()
at call_user_func_array (array(object(DefaultController), 'fooAction'), array())
in kernel.root_dir/bootstrap.php.cache at line 1426  -+
at HttpKernel ->handleRaw (object(Request), '1')
in kernel.root_dir/bootstrap.php.cache at line 1390  -+
at HttpKernel ->handle (object(Request), '1', true)
in kernel.root_dir/bootstrap.php.cache at line 1566  -+
at HttpKernel ->handle (object(Request), '1', true)
in kernel.root_dir/bootstrap.php.cache at line 617  -+
at Kernel ->handle (object(Request))
in /var/www/web/app_dev.php at line 25  -+ 
```

我知道我可以更改*my.cnf*以直接从服务器配置定义 MySQL 默认排序规则，但我需要在运行时设置它......我错过了什么吗？我应该如何`MYSQL_ATTR_INIT_COMMAND`在*app/config/config.yml*中设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:08:10.620

如果你[在这里](https://github.com/propelorm/Propel/blob/1.6.7/runtime/lib/Propel.php#L725)看到源代码，

```
$value = $optiondata['value']; // this is line no 275
if (is_string($value) && strpos($value, '::') !== false) {
    if (!defined($value)) {
       throw new PropelException("Invalid PDO option/attribute value specified: ".$value);
    }
    $value = constant($value);
} 
```

它期望选项数据中有一个“值”键，所以试试这个

```
propel:
    dbal:
        driver:               %database_driver%
        user:                 %database_user%
        password:             %database_password%
        dsn:                  "%database_driver%:host=%database_host%;dbname=%database_name%;charset=%database_charset%"
        options:
            MYSQL_ATTR_INIT_COMMAND: { value: "SET NAMES utf8 COLLATE utf8_unicode_ci" }
        attributes:           {} 
```

或者

您还可以定义必须在连接打开后立即执行的查询

```
propel:
    dbal:
        default_connection:         default
        connections:
            default:
                # ...
                options:
                    ATTR_PERSISTENT: false
                attributes:
                    ATTR_EMULATE_PREPARES: true
                settings:
                    charset:        { value: UTF8 }
                    queries:        { query: 'INSERT INTO BAR ('hey', 'there')' } 
```

仅供参考：[https ://github.com/propelorm/PropelBundle/blob/1.1/Resources/doc/configuration.markdown](https://github.com/propelorm/PropelBundle/blob/1.1/Resources/doc/configuration.markdown)

[推进运行时配置文件](http://propelorm.org/reference/runtime-configuration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:46:05.167

关于您更改 my.cnf 的观点，如果仅您要使用的数据库需要特定的排序规则设置，那么我认为最好在创建数据库时使用命令“ **create database db_name CHARACTER SET utf8 ”覆盖排序规则设置COLLATE utf8_unicode_ci** " 而不是通过编辑 my.cnf 来全局更改它

# login - Facebook SDK 3.0 Android登录自定义标题栏消失

> ID：14347710
> 
> 赞同：0
> 
> 时间：2013-01-15T22:00:08.797
> 
> 标签：login, android-activity, authorization, facebook-android-sdk, titlebar

当我使用 openSession 方法启动登录/注册 Facebook 活动时，应用程序标题栏（我们正在使用自定义标题栏）消失并出现另一个标题栏。有没有办法为新活动设置自定义栏？

我调用 Facebook 授权的方式：

```
 fb.openSession(this, new Session.StatusCallback() {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            Logger.d(LOGTAG, "Session moved to state " + state.name());
            if (null == exception) {
                mFacebookSession = session;
                switch (state) {
                case CLOSED:
                case CLOSED_LOGIN_FAILED:
                    mLoginProgressDialog.dismiss();
                    Toast.makeText(FacebookLoginActivity.this, "Login failed. Verify login and password",
                            Toast.LENGTH_LONG).show();
                    break;
                case OPENED:
                case OPENED_TOKEN_UPDATED:
                    mFacebookSession.removeCallback(this);
                    FacebookServer.getInstance(getApplicationContext()).setSession(mFacebookSession);
                    FacebookServer.getInstance(getApplicationContext()).getUserFacebookId(
                            new FacebookLoginActivityUserIDCallback());
                    break;
                case OPENING:
                    break;
                default:
                    mLoginProgressDialog.dismiss();
                    break;
                }
            } else {
                exception.printStackTrace();
            }

        }
    }); 
```

我们在调用上述方法的Activity的onCreate()方法中设置自定义标题栏：

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
setContentView(R.layout.facebook_login_activity);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.app_title_bar); 
```

下图显示了问题所在：

![自定义标题栏](../Images/af6e54a3a9d04d13fec4f02d674e5119.png) ![启动FB授权后的简单标题栏](../Images/f1615f6b91cb29e1a82772dbac17ee65.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:25:29.287

最后，我只是将这些行添加到 Facebook 包中的 LoginActivity.java 中：

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.app_title_bar); 
```

它影响了 FB 在执行操作时正在启动的活动的布局，并且外观现在是一致的。

# java - Hadoop - MultipleOutputs.write - OutofMemory - Java 堆空间

> ID：14347712
> 
> 赞同：1
> 
> 时间：2013-01-15T22:00:13.290
> 
> 标签：java, hadoop, out-of-memory

我正在编写一个处理许多文件并从每个文件创建多个文件的 hadoop 作业。我正在使用“MultipleOutputs”来编写它们。它适用于较少数量的文件，但对于大量文件我收到以下错误。在 MultipleOutputs.write(key, value, outputPath); 上引发异常 我尝试增加 ulimit 和 -Xmx 但无济于事。

```
2013-01-15 13:44:05,154 FATAL org.apache.hadoop.mapred.Child: Error running child : java.lang.OutOfMemoryError: Java heap space
    at org.apache.hadoop.hdfs.DFSOutputStream$Packet.<init>(DFSOutputStream.java:201)
    at org.apache.hadoop.hdfs.DFSOutputStream.writeChunk(DFSOutputStream.java:1423)
    at org.apache.hadoop.fs.FSOutputSummer.writeChecksumChunk(FSOutputSummer.java:161)
    at org.apache.hadoop.fs.FSOutputSummer.flushBuffer(FSOutputSummer.java:136)
    at org.apache.hadoop.fs.FSOutputSummer.flushBuffer(FSOutputSummer.java:125)
    at org.apache.hadoop.fs.FSOutputSummer.write1(FSOutputSummer.java:116)
    at org.apache.hadoop.fs.FSOutputSummer.write(FSOutputSummer.java:90)
    at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:54)
    at java.io.DataOutputStream.write(DataOutputStream.java:90)
    at org.apache.hadoop.mapreduce.lib.output.TextOutputFormat$LineRecordWriter. writeObject( TextOutputFormat.java:78)
    at org.apache.hadoop.mapreduce.lib.output.TextOutputFormat$LineRecordWriter. write(TextOutputFormat.java:99)
    **at org.apache.hadoop.mapreduce.lib.output.MultipleOutputs.write( MultipleOutputs.java:386)
    at com.demoapp.collector.MPReducer.reduce(MPReducer.java:298)
    at com.demoapp.collector.MPReducer.reduce(MPReducer.java:28)**
    at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:164)
    at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:595)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:433)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:268)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)
    at org.apache.hadoop.mapred.Child.main(Child.java:262) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:41:42.147

如果它不适用于大量文件，可能是因为您已经达到了数据节点可以提供的最大文件数。这可以通过`dfs.datanode.max.xcievers`在 hdfs-site.xml 中调用的属性来控制。

按照[这里](https://issues.apache.org/jira/browse/HDFS-1861)的建议，您应该将其值提高到可以让您的工作正常运行的值，他们推荐 4096：

```
<property>
    <name>dfs.datanode.max.xcievers</name>
    <value>4096</value>
</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:57:39.900

我将reduce任务的数量从1增加到8，并将io.sort.mb的值增加到和mapred.task.timeout。

[细节](http://rowsandcolumns.blogspot.com/2013/01/hadoop-outofmemoryerror-java-heap-space.html)

此链接很有帮助- [Cloudera 博客](http://blog.cloudera.com/blog/2009/12/7-tips-for-improving-mapreduce-performance/)

# c# - 使用字符串确定要查询的表

> ID：14347717
> 
> 赞同：0
> 
> 时间：2013-01-15T22:00:31.427
> 
> 标签：c#, wpf, visual-studio, entity-framework

我正在尝试使用字符串来确定我正在执行查询的表。但是我找不到任何方法来做到这一点。这是我的代码：

```
ADVENTUREWORKSSUPEREntities context = new ADVENTUREWORKSSUPEREntities();
string table = "Addresses" //this is set elsewhere in the code but I put it here for clarity

            if (table == "Addresses")
            {
                results.ItemsSource = context.Addresses.Where(condition).ToList();
            }
            else if (table == "Customers")
            {
               results.ItemsSource = context.Customers.Where(condition).ToList();
            }
              ...
              ...
              ...
            else if (table == "SalesOrderHeaders")
            {
                results.ItemsSource = context.SalesOrderHeaders.Where(condition).ToList();
            } 
```

是否可以更换

```
results.ItemsSource = context.Addresses.Where(condition).ToList(); 
```

有一行使用我的表字符串而不是地址？因此它将是

```
results.ItemsSource = context.[table].Where(condition).ToList(); 
```

编辑：

我这样做是为了学习 wpf/entity 框架/C#。当我在 puralsight 上观看视频时，我正在考虑尝试将其添加到该程序中的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:51:41.130

这是我想出的解决方案。

```
dynamic test = t.InvokeMember(table,
                        BindingFlags.DeclaredOnly |
                        BindingFlags.Public | BindingFlags.NonPublic |
                        BindingFlags.Instance | BindingFlags.GetProperty, null, context, new object[0]);

            ((IQueryable)test).AsQueryable().Where(condition).Load();
            results.ItemsSource = test.Local; 
```

感谢所有评论/回答所有帮助并为我指明正确方向的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:23:26.300

我的类的版本（.Net 4.0）`System.Data.Objects.ObjectContext`包含以下公共方法：

`public ObjectSet<TEntity> CreateObjectSet<TEntity>(string entitySetName) where TEntity : class;`

如果你愿意，你可以使用它，但是，我非常怀疑（而且我认为很多人也会同意我的观点）这是一件好事。请提供更多有关您要实现的目标的背景知识，因为很可能有更好的方法可以做到这一点，而不必求助于“魔术弦”。

# facebook - Like 按钮在现场无法正常工作，一直郁闷

> ID：14347718
> 
> 赞同：1
> 
> 时间：2013-01-15T22:00:32.363
> 
> 标签：facebook, button, facebook-like, blogger

在**[我的博客上](http://www.basesandbaskets.com)**，我在帖子末尾添加了点赞按钮。我已经安装了大约七个月了，但它仍然无法正常工作。我添加了 Javascript SDK，然后在我的 Blogger 模板 (develops.facebook.com) 中添加了适当的代码，虽然它出现在博客上，但它不能正常工作。

基本上，如果您在任何帖子的末尾单击“喜欢”，它将出现在该人的新闻源中，但不会作为单个帖子出现。相反，“基地和篮子”的通用主页出现在新闻源中。有趣的是，即使出现了通用徽标和博主描述，如果您单击链接本身，它也会将您直接发送到相应的页面。不知道为什么......但正如你想象的那样，我希望它能够正常工作并显示文章。另外，我希望出现在帖子开头的图片，而不是我的 Facebook 页面的个人资料图片（您可以[在此处查看](http://www.facebook.com/basesandbaskets)）。

这不仅是一个问题，而且如果您在任何一篇文章的末尾单击“赞”，那么对于网站上的所有帖子，赞按钮都会保持按下状态。例如，如果一个人“喜欢”文章 A，并冒险阅读文章 B，则文章 B 末尾的“喜欢”按钮被按下。此外，所有文章末尾的“喜欢”计数完全相同（~615）。

我可以附上几张希望能有所帮助的图片。

正如你所想象的那样，这非常令人沮丧，当我最近创建了一个新博客《左海岸纪事》并且一切正常时，情况变得更加令人沮丧！如果有人能帮我解决这个问题，如果你需要的话，我会给你我必须帮助的所有信息（电子邮件地址、聊天信息、我博客的完整 HTML 模板）。

太感谢了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:09:50.583

首先：天啊...这个页面是**巨大**的加载！

其次：您错过了点赞按钮中的一个重要参数：**href**属性。

你的脚本：

```
<fb:like font='' href='' layout='button_count' send='false' show_faces='false' width='450'></fb:like> 
```

解决方案：

```
<fb:like href='LINK_TO_BLOG_POST' layout='button_count' send='false' show_faces='false' width='450'></fb:like> 
```

否则，like 按钮会喜欢它所在的当前站点（这是 - 你猜对了 - 主页`http://www.basesandbaskets.com/`）

第三：你有`<div id='fb-root'></div>`每个喜欢按钮之前。请仅使用**一次**！

希望这可以帮助。

# android - 在 Android Market 上的列表中隐藏应用程序

> ID：14347721
> 
> 赞同：1
> 
> 时间：2013-01-15T22:00:41.870
> 
> 标签：android, google-play

我在市场上有一个 android 应用程序，我有一些专利问题，所以我需要暂时从 android 市场中删除。我取消发布我的应用程序，但它显示在热门免费列表中。

在我对专利问题进行更改之前，任何人都知道如何从列表中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:53:34.403

它在一个小时内自行消失。所以只需要一些时间。

# linux - 如何 grep 精确的文字字符串（无正则表达式）

> ID：14347722
> 
> 赞同：43
> 
> 时间：2013-01-15T22:00:46.753
> 
> 标签：linux, shell, unix, command-line, grep

有没有办法`grep`（或使用另一个命令）使用无正则表达式来查找确切的字符串？

例如，如果我想搜索（字面意思）：

```
/some/file"that/has'lots\of"invalid"chars/and.triggers$(#2)[*~.old][3].html 
```

我不想经历和逃避每一个“可以逃脱的”。本质上，我想通过它，就像我一样`echo`：

```
$ echo "/some/file\"that/has'lots\of\"invalid\"chars/and.triggers$(#2)[*~.old][3].html"
/some/file"that/has'lots\of"invalid"chars/and.triggers$(#2)[*~.old][3].html 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-16T02:59:04.457

使用`fgrep`, 与`grep -F`(匹配固定字符串) 相同。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-15T22:05:02.043

好吧，您可以将要匹配的信息放在一行中，然后使用`grep`：

```
grep -F -f patterns.txt file.txt 
```

注意 flag 的使用`-F`，这导致将文件*patterns.txt*`grep`的每一行视为要在*file.txt*中搜索的a 。*`fixed-string`*

# http - 在 JBoss AS 7 中自定义 HTTP 代码和错误消息

> ID：14347723
> 
> 赞同：2
> 
> 时间：2013-01-15T22:00:47.740
> 
> 标签：http, tomcat, jboss, status

谁能告诉我如何在 JBoss AS 7 中自定义 http 代码和原因短语？

基本上我有一个 REST Web 服务，它返回一个非标准状态代码“499”，原因是“应用程序错误”

在`standalone.xml`中，我将 设置`org.apache.coyote.Constants.USE_CUSTOM_STATUS_MSG_IN_HEADER`为`true`under `systemproperties`，但 AS 仍然会覆盖 HTTP 错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T12:17:23.670

JBoss 文档中似乎有一个错误，正确的属性名称是：

```
org.apache.coyote.USE_CUSTOM_STATUS_MSG_IN_HEADER 
```

所以在独立版中你应该有这样的东西：

```
<system-properties>
    <property name="org.apache.coyote.USE_CUSTOM_STATUS_MSG_IN_HEADER" value="true"/>
</system-properties> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T05:26:34.350

我假设使用 RestEasy 解释 REST 服务。

这提供了一个很好的特性，即使用[@Context](http://docs.jboss.org/resteasy/docs/3.0.1.Final/userguide/html_single/#_Context)注入 HTTP 响应对象：

> @Context 注释允许您注入 javax.ws.rs.core.HttpHeaders、javax.ws.rs.core.UriInfo、javax.ws.rs.core.Request、javax.servlet.HttpServletRequest、javax.servlet 的实例。 HttpServletResponse、javax.servlet.ServletConfig、javax.servlet.ServletContext 和 javax.ws.rs.core.SecurityContext 对象。

```
@Path("/")
public class MyService {
    @Context org.jboss.resteasy.spi.HttpResponse response;

    @GET @Path("/") public void myMethod(){
        response.sendError(499, "The file was censored by NSA.") 
    }
} 
```

但也许您应该考虑使用专有的 HTTP 标头：

```
 response.getOutputHeaders().putSingle("X-MyApp-Error", 
              "499 Our server is down and admin is on holiday. Mañana."); 
```

# delphi - 如何等到异步 CopyHere（Shell API 命令）完成 ZIP 压缩？

> ID：14347732
> 
> 赞同：2
> 
> 时间：2013-01-15T22:01:19.373
> 
> 标签：delphi, winapi, asynchronous, process, zipfile

我需要在不使用 3rd 方组件的情况下在 Delphi 中压缩和解压缩文件。如何等到异步 CopyHere 完成 ZIP 压缩？

**以下代码无法完美运行。**

使用 ShellAPI 压缩文件的代码

```
procedure TShellZip.ZipFolder(const SourceFolder: WideString);
var
  SrcFldr, DestFldr: OleVariant;
  ShellFldrItems: Olevariant;
  NumT: Integer;
begin
  if not FileExists(ZipFile) then
  begin
    CreateEmptyZip;
  end;

  NumT := NumProcessThreads;
  ShellObj := CreateOleObject('Shell.Application');
  SrcFldr := GetNameSpaceObj(SourceFolder);

  if not IsValidDispatch(SrcFldr) then
  begin
    raise EInvalidOperation.CreateFmt('<%s> Local de origem inválido.', [SourceFolder]);
  end;

  DestFldr := GetNameSpaceObj_ZipFile;
  ShellFldrItems := SrcFldr.Items;

  if (Filter <> '') then
  begin
    ShellFldrItems.Filter(SHCONTF_INCLUDEHIDDEN or SHCONTF_NONFOLDERS or SHCONTF_FOLDERS, Filter);
  end;

  DestFldr.CopyHere(ShellFldrItems, SHCONTCH_NOPROGRESSBOX or SHCONTCH_RESPONDYESTOALL);

  //wailt async processes
  while NumProcessThreads <> NumT do
  begin
    Sleep(100);
  end;
end; 
```

计算进程的代码

```
function NumProcessThreads: Integer;
var
  HSnapShot: THandle;
  Te32: TThreadEntry32;
  Proch: DWORD;
  ProcThreads: Integer;
begin
  ProcThreads := 0;
  Proch := GetCurrentProcessID;
  HSnapShot := CreateToolhelp32Snapshot(TH32CS_SNAPTHREAD, 0);
  Te32.dwSize := SizeOf(TTHREADENTRY32);
  if Thread32First(HSnapShot, Te32) then
  begin
    if Te32.th32OwnerProcessID = Proch then
      Inc(ProcThreads);

    while Thread32Next(hSnapShot, Te32) do
    begin
      if Te32.th32OwnerProcessID = Proch then
        Inc(ProcThreads);
    end;
  end;
  CloseHandle (HSnapShot);
  Result := ProcThreads;
end; 
```

创建空 zip 流的代码

```
procedure TShellZip.CreateEmptyZip;
const
  EmptyZip: array[0..23] of Byte  = (80, 75, 5, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
var
  Ms: TMemoryStream;
begin
  //criar um arquivo zip vazio
  Ms := TMemoryStream.Create;
  try
    Ms.WriteBuffer(EmptyZip, SizeOf(EmptyZip));
    Ms.SaveToFile(ZipFile);
  finally
    Ms.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T22:04:03.797

您不需要自动化外壳来执行此操作。正如您所发现的那样，干净利落地做到这一点并不容易。

您可以使用 Delphi 附带的 ZIP 组件[TZipFile](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Zip.TZipFile)。如果您有较旧版本的 Delphi，其中不包含此组件，那么您应该使用第三方组件，例如[Abbrevia](http://sourceforge.net/projects/tpabbrevia/)。

# java - UnsatisfiedLinkError + JNLP + Applet + DLL

> ID：14347743
> 
> 赞同：1
> 
> 时间：2013-01-15T22:01:51.400
> 
> 标签：java, dll, applet, jnlp, unsatisfiedlinkerror

我创建了一个 JNLP 来加载小程序和一些本机 DLL 文件。以下是每个组件的代码

# JNLP

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- href attribute contains relative path;
     codebase attribute not specified -->
<jnlp href="myKad.jnlp">
    <information>
        <title>MyKad Reader Applet</title>
        <vendor>MyKad</vendor>
    </information>
    <security>
        <all-permissions/>
    </security>
    <resources>
        <!-- Application Resources -->
        <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se" />
        <jar href="HLB_Mykad-0.0.1-SNAPSHOT.jar" main="true"/>
        <nativelib href="HLB_Mykad-0.0.1-SNAPSHOT.jar" download="eager"/>
    </resources>
    <applet-desc
            name="MyKad Applet"
            main-class="com.glexim.applet.GleximApplet"
            width="1"
            height="1">
    </applet-desc>
    <update check="background"/>
</jnlp> 
```

# JAR (HLB_Mykad-0.0.1-SNAPSHOT.jar) 结构（JAR 封装在顶层）

```
com.glexim.applet.GleximApplet
META-INF
Sample.dll 
```

# HTML 代码

```
<applet jnlp_href="./applet/myKad.jnlp"
code="com.glexim.applet.GleximApplet" id="gleximApplet"
mayscript="true" width="0px" style="" /> 
```

# **加载小程序时，我在小程序控制台中遇到以下异常：**

```
java.lang.RuntimeException: java.lang.UnsatisfiedLinkError: no Sample in java.library.path
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.UnsatisfiedLinkError: no Sample in java.library.path
at java.lang.ClassLoader.loadLibrary(Unknown Source)
at java.lang.Runtime.loadLibrary0(Unknown Source)
at java.lang.System.loadLibrary(Unknown Source)
at com.glexim.zf1.MyKad$1.run(MyKad.java:19)
at java.security.AccessController.doPrivileged(Native Method)
at com.glexim.zf1.MyKad.<clinit>(MyKad.java:13)
at com.glexim.applet.GleximApplet.<init>(GleximApplet.java:43)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$12.run(Unknown Source)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$400(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
Exception: java.lang.RuntimeException: java.lang.UnsatisfiedLinkError: no Sample in java.library.path 
```

**我的小程序是签名的小程序，小程序内的所有 DLL 文件也使用相同的签名进行签名。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:25:42.593

在您的 JNLP 文件中创建描述本机资源的其他部分：

```
<resources os="Windows" arch="x86">
    <nativelib href="jar-with-nativelibs.jar"/>
</resources> 
```

（您不必为每个支持的操作系统和架构使用一个 jar，但建议使用）

之后，定义`java.library.path`属性：

```
<property key="java.library.path" value="." /> 
```

你可以走了。

# android - Mifare Classic 1k - 错误函数 ReadBlock

> ID：14347745
> 
> 赞同：1
> 
> 时间：2013-01-15T22:01:58.270
> 
> 标签：android, nfc, mifare

我正在创建一个允许我读取不同标签中的数据的应用程序。我目前正在使用标签`Mifare Classic 1k`。

为了验证我的数据读取是否正确，我使用了官方的应用程序`NXP`，发现数据的解释存在一些差异。

在我的代码中，我使用`ReadBlock`. 所有数据都在每个扇区的第 3 个块中正确读取。事实上，根据`NXP`它应该看起来像这样：`ffffffffffffff078069ffffffffffff`，但我的应用程序读取以下块：`0000000000000000078069ffffffffffff`。我不知道是`Nxp`应用程序错误还是什么，但是当我阅读该块时，我使用了一个已经存在且不是由我创建的函数。

谁能给我澄清一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:35:09.147

当您读取扇区尾部（即扇区的最后一个块）时，密钥 A 的内容将始终作为全零返回。当密钥 B 设置为不可读时，这同样适用。（但是，由于您能够读取该块，因此您知道密钥，因此您可以推导出实际存储在芯片中的内容。）

# php - 发送电子邮件不起作用

> ID：14347747
> 
> 赞同：-1
> 
> 时间：2013-01-15T22:02:24.900
> 
> 标签：php

嗨，我正在尝试在用户输入一些联系数据后发送电子邮件，但似乎电子邮件没有按预期发送。我不经常使用 php，所以我可能错过了一些东西。这是我的代码：

```
function sendEmail($data){
      $to      = 'alexandru.nistor.89@gmail.com';
      $subject = 'From My Portfolio Website!';
      $message = $data[3]['value'];
      $headers = 'From: ' . $data[0]['value'] . " " . $data[1]['value'] . "\r\n" .
    ' Reply-To: '. $data[2]['value']  . "\r\n";

      mail($to, $subject, $message, $headers);
} 
```

现在，在您要求调用该函数之前，我已经使用调试器进行了检查，并且数据已正确添加到变量中，唯一的问题是邮件没有到达目的地。我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:20:51.793

检查什么函数`mail()`返回。如果返回`false`它意味着它在 php.ini 中是错误的。如果它返回`true`，则意味着它被接受交付，但没有必要到达目的地。在这种情况下，它与网络更相关。

文档中的更多信息：http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# django - 带有选择字段的Django表单保存或模型保存？

> ID：14347750
> 
> 赞同：1
> 
> 时间：2013-01-15T22:02:36.107
> 
> 标签：django, django-models, django-forms

所以我对 Django 还是很陌生。我的表单中有一个字段。我只是想知道我是否需要表单保存功能或模型保存功能？什么时候适合使用 or ？

例如：我的表格：

```
class OpinionStatusForm(forms.Form):
    choices = (('0', "Your Status"), ('1', "This"), ('2', "That"), ('3', "The Other"))
    status = forms.CharField(max_length=2, widget=forms.Select(choices=choices, attrs={'class':'status_dropdown','onchange': 'this.form.submit();'}), required=False)

    def save(self, opinion_status):
        opinion_status.status = self.cleaned_data['status'] 
```

我的模型：

```
class OptionStatus(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)
    status = models.CharField(max_length=2, choices=opinion_statuses)
    opinion = models.ForeignKey(Opinion, null=True, blank=True)

    def __unicode__(self):
        return self.status

    def save(self, *args, **kwargs):
        super(OpinionStatus, self).save(*args, **kwargs) 
```

我将要对表单进行 ajax 处理。我不知道这是否有区别。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:31:43.617

您真正需要的是一个 ModelForm。在您的示例中，您正在使用标准 forms.Form。这不绑定到模型实例。因此，也不需要保存方法。最好的例子确实在 Django 文档中给出：

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

一步一步看代码示例，你就会明白。在一个 Stackoverflow 答案中解释这一切太过分了——而且 Django 文档非常详尽。

# php - 我是否使用新的 pdo 刚刚转换的代码在帖子中免受“html 表单”的影响？

> ID：14347752
> 
> 赞同：0
> 
> 时间：2013-01-15T22:02:42.970
> 
> 标签：php, sql, security, pdo

我认为，我的代码中缺少一些漏洞。点亮我，我刚刚在 PDO 中转换了我的脚本，这是为了安全，而不仅仅是！

```
<?PHP
require_once("./include/membersite_config.php");

if(!$fgmembersite->CheckLogin())
{
$fgmembersite->RedirectToURL("login.php");
exit;
}

?>
<?php $utilizator = $fgmembersite->UserFullName() ?>

<?php require ("../SQL.php");

### De aici am setat creearea directoarelor pentru poze ###
$model         = mysql_real_escape_string("$_POST[model]");
$marca         = mysql_real_escape_string("$_POST[marca]");

 mkdir ("\\server\\htdocs\\panou\\poze\\{$marca}/{$model}", 0777, true);
$director_poza = ("poze/{$marca}/{$model}/");    
$numetmp_poza  = $_FILES['numepoza1']['name'];
$numepoza1     = $director_poza.$numetmp_poza;
$numetmp_poza  = $_FILES['numepoza2']['name'];
$numepoza2     = $director_poza.$numetmp_poza;
$numetmp_poza  = $_FILES['numepoza3']['name'];
$numepoza3     = $director_poza.$numetmp_poza;
if(move_uploaded_file($_FILES['numepoza1']['tmp_name'], $numepoza1))
if(move_uploaded_file($_FILES['numepoza2']['tmp_name'], $numepoza2))
if(move_uploaded_file($_FILES['numepoza3']['tmp_name'], $numepoza3))
{
list($width,$height,$type,$attr)= getimagesize($numepoza1);
switch($type)
{
case 1:
$ext = ".gif"; break;
case 2:
$ext = ".jpg"; break;
case 3:
$ext = ".png"; break;
default:
echo "Format foto neacceptat";
} }### Gata creeare director si upload poze ###

$insertie = "INSERT INTO modele 
(id, marca, model, utilizator, despre, data, data_luna, data_zi, img1, img2, img3, doi_g, trei_g, patru_g, info_ecran, rezolutie_ecran, multitouch_ecran, protectie_ecran, sunet_sonerii, sunet_mainilibere, sunet_mufa_jack, memorie_card, mcard_tip,   mcard_capacitate,intern_memorie, date_gprs, date_edge, date_viteze, date_wifi, date_bt,   date_nfc, date_usb, camera_spate, camera_fata, camera_tehnologii, camera_video,   performanta_os,performanta_chipset, performanta_cpu, performanta_cpu_core, performanta_cpu_tip, performanta_rami, performanta_gpu, performanta_senzori, performanta_gps, performanta_java, altele_radio, altele_mesajerie, altele_filme,  baterie_autonomie, baterie_mAh, baterie_convorbire, SEO_cuvinte_cheie)
  VALUES
  ('',        '$_POST[marca]','$_POST[model]','$utilizator','$_POST[despre]','$_POST[data]','$_POST[data_luna]','$_POST[data_zi]',
'$numepoza1','$numepoza2','$numepoza3','$_POST[doi_g]',
'$_POST[trei_g]',
'$_POST[patru_g]',
'$_POST[info_ecran]',
'$_POST[rezolutie_ecran]',
'$_POST[multitouch_ecran]',
'$_POST[protectie_ecran]',
'$_POST[sunet_sonerii]',
'$_POST[sunet_mainilibere]',
'$_POST[sunet_mufa_jack]',
'$_POST[memorie_card]',
'$_POST[mcard_tip]',
'$_POST[mcard_capacitate]',
'$_POST[intern_memorie]',
'$_POST[date_gprs]',
'$_POST[date_edge]',
'$_POST[date_viteze]',
'$_POST[date_wifi]',
'$_POST[d ate_bt]',
'$_POST[date_nfc]',
'$_POST[date_usb]',
'$_POST[camera_spate]',
'$_POST[camera_fata]',
'$_POST[camera_tehnologii]',
'$_POST[camera_video]',
'$_POST[performanta_os]',
'$_POST[performanta_chipset]',
'$_POST[performanta_cpu]',
'$_POST[pe rformanta_cpu_core]',
'$_POST[performanta_cpu_tip]',
'$_POST[performanta_rami]',
'$_POST[perfo rmanta_gpu]',
'$_POST[performanta_senzori]',
'$_POST[performanta_gps]',
'$_POST[performanta_java]',
'$_POST[altele_radio]',
'$_POST[altele_mesajerie]',
'$_POST[altele_filme]',
'$_POST[baterie_autonomie]',
'$_POST[baterie_mAh]',
'$_POST[baterie_convorbire]',
'$_POST[SEO_cuvinte_cheie]')"; 

if ($dbh->query($insertie)) 
{
print '<center><h1>Telefonul/Tableta a fost publicat(a) cu succes!</h1><br />
Vei fi redirectionat in cateva momente inspre adaugarea unui nou model de tableta sau         telefon!</center>
  <meta http-equiv="refresh" content="5; URL=adauga-tableta-tel.php"/>'; 
}
 else(mysql_error())     
?> 
```

请提供一些帮助而不是阅读链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:04:50.643

好吧，你应该使用 pdo 的`prepare`语句

[http://php.net/manual/en/pdo.prepare.php](http://php.net/manual/en/pdo.prepare.php)

我不会为你重写所有代码，但这是一个很好的起点。

就安全而言，IIRC，pdo 一次只允许您执行一个查询，因此 sql 注入有点困难。但是我仍然会继续准备，因为您正在从帖子中提取所有数据

例如，从上面的 url

```
/* Execute a prepared statement by passing an array of values */
$sth = $dbh->prepare('SELECT name, color, calories
    FROM fruit
    WHERE calories < ? AND color = ?');
$sth->execute(array(150, 'red'));
$red = $sth->fetchAll(); 
```

# c# - 反转字符串中单个字符的字母值

> ID：14347754
> 
> 赞同：2
> 
> 时间：2013-01-15T22:02:47.547
> 
> 标签：c#

我想知道如何反转字符串中的单个字符，而不是从字面上反转整个字符串。我使用了下面显示的代码并得到了以下结果。我还将展示结果应该是什么。

*   输入：a29z3
*   输出：a20a3
*   应该是什么：z70a6

正如你所看到的，我没有得到我一开始所期望的结果。每个单独的字符都应该颠倒，但我很好奇如何做到这一点。上面的结果是我使用以下代码得到的结果：

```
static void Main()
    {
        string input = "a29z3";

        //Reverse Letters
        input = input.Replace("a", "z");
        input = input.Replace("b", "y");
        input = input.Replace("c", "x");
        input = input.Replace("d", "w");
        input = input.Replace("e", "v");
        input = input.Replace("f", "u");
        input = input.Replace("g", "t");
        input = input.Replace("h", "s");
        input = input.Replace("i", "r");
        input = input.Replace("j", "q");
        input = input.Replace("k", "p");
        input = input.Replace("l", "o");
        input = input.Replace("m", "n");
        input = input.Replace("n", "m");
        input = input.Replace("o", "l");
        input = input.Replace("p", "k");
        input = input.Replace("q", "j");
        input = input.Replace("r", "i");
        input = input.Replace("s", "h");
        input = input.Replace("t", "g");
        input = input.Replace("u", "f");
        input = input.Replace("v", "e");
        input = input.Replace("w", "d");
        input = input.Replace("x", "c");
        input = input.Replace("y", "b");
        input = input.Replace("z", "a");

        //Reverse numbers
        input = input.Replace("0", "9");
        input = input.Replace("1", "8");
        input = input.Replace("2", "7");
        input = input.Replace("3", "6");
        input = input.Replace("4", "5");
        input = input.Replace("5", "4");
        input = input.Replace("6", "3");
        input = input.Replace("7", "2");
        input = input.Replace("8", "1");
        input = input.Replace("9", "0");

        Console.WriteLine(input);
    } 
```

建议和/或示例将非常受欢迎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:10:18.620

您遇到的问题是您正在对已经被替换的字符进行替换。您替换`a`为`z`，然后您稍后替换`z`为`a`.

我会使用字典来查找值并遍历字符，构建一个新字符串：

```
 Dictionary<string, string> ReplaceDict = new Dictionary<string, string>();
    private void Form1_Load(object sender, EventArgs e)
    {
        //Reverse Letters
        ReplaceDict.Add("a", "z");
        ReplaceDict.Add("b", "y");
        ReplaceDict.Add("c", "x");
        ReplaceDict.Add("d", "w");
        ReplaceDict.Add("e", "v");
        ReplaceDict.Add("f", "u");
        ReplaceDict.Add("g", "t");
        ReplaceDict.Add("h", "s");
        ReplaceDict.Add("i", "r");
        ReplaceDict.Add("j", "q");
        ReplaceDict.Add("k", "p");
        ReplaceDict.Add("l", "o");
        ReplaceDict.Add("m", "n");
        ReplaceDict.Add("n", "m");
        ReplaceDict.Add("o", "l");
        ReplaceDict.Add("p", "k");
        ReplaceDict.Add("q", "j");
        ReplaceDict.Add("r", "i");
        ReplaceDict.Add("s", "h");
        ReplaceDict.Add("t", "g");
        ReplaceDict.Add("u", "f");
        ReplaceDict.Add("v", "e");
        ReplaceDict.Add("w", "d");
        ReplaceDict.Add("x", "c");
        ReplaceDict.Add("y", "b");
        ReplaceDict.Add("z", "a");

        //Reverse numbers
        ReplaceDict.Add("0", "9");
        ReplaceDict.Add("1", "8");
        ReplaceDict.Add("2", "7");
        ReplaceDict.Add("3", "6");
        ReplaceDict.Add("4", "5");
        ReplaceDict.Add("5", "4");
        ReplaceDict.Add("6", "3");
        ReplaceDict.Add("7", "2");
        ReplaceDict.Add("8", "1");
        ReplaceDict.Add("9", "0");
    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        StringBuilder output = new StringBuilder();
        string input = "a29z3";

        foreach (var c in input.ToCharArray())
        {
            output.Append(ReplaceDict[c.ToString()]);
        }

        MessageBox.Show(output.ToString()); 
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T22:17:20.143

正如您的评论者所发布的那样，您正在更改已经更改的字符。

在您给定的示例中，这将是您的代码的流程：

```
a29z3
z29z3 -> a 到 z
a29a3 -> z 到 a
a79a3 -> 2 到 7
a79a6 -> 3 到 6
a79a3 -> 6 到 3
a29a3 -> 7 到 2
a20a3 -> 9 到 0

```

此方法将遍历给定的字符串。

```
// build the map; there's most likely a better way
var alpha = "abcdefghijklmnopqrstuvwxyz";
var digits = "0123456789";

var alphaMap = alpha.Zip(alpha.Reverse(), (k, v) => new {Key = k, Value = v});
var digitMap = digits.Zip(digits.Reverse(), (k, v) => new { Key = k, Value = v });

var map = alphaMap.Concat(digitMap)
                  .ToDictionary(kvp => kvp.Key, kvp => kvp.Value);

// execute
var given = "a29z3";
Debug.WriteLine(new string(given.Select(c => map[c]).ToArray()));
// yields:  z70a6 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T22:11:09.307

发生的事情是这样的：

1.  让我们说`input = "a"`
2.  `input = input.Replace("a", "z");`执行，现在`input = "z"`
3.  几行之后`input = input.Replace("a", "z");`执行，现在`input = "a"`

您需要做的不是替换您*构建*一个新字符串。因此，您遍历字符串中的字符，找到相反的内容，并将其附加到新字符串中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T22:05:16.137

问题是您要替换相同的字母两次。您需要一次遍历字符串一项并替换每个字符，而不是在整个字符串上重复运行替换。

例如，像这样：

```
 static void Main(string[] args) {

    string input = "a29z3";
    string output = string.Empty;

    foreach (char letter in input.ToCharArray()) {
        output += replacementChar(letter);
    }

    Console.WriteLine(output);

    }

    static char replacementChar(char c) {

        switch (c) {
            case 'a': return 'z'; 
            case 'b': return 'y'; 
            // and so on

            default: return c;
        }

    } 
```

我还建议使用对 ASCII 值的计算来进行交换，而不是单独列出一长串替换。会更干净。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T22:16:13.943

这假设您的字符都在预期范围内，但您可以这样做：

```
public static char Reverse(char c)
{
    if (Char.IsDigit(c))
    {
        return (char)((int)'9' - (int)c + (int)'0');
    }
    else
    {
        return (char)((int)'z' - (int)c + (int)'a');
    }
} 
```

然后`Select`用来做映射：

```
string output = new string(input.Select(Reverse).ToArray()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T22:40:52.367

单线（代码打高尔夫球）：

```
input = input.Aggregate(string.Empty, (s, c) => s + ((c >= 'a') && (c <= 'z') ? (char)('z' - c + 'a') : (c >= '0') && (c <= '9') ? (char)('9' - c + '0') : c)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T22:56:47.610

其他人已经发现了这个问题：你用另一个字符替换了一个字符，但在某些情况下又用它的原始值替换了那个字符。

为了更好地编写代码，让我们重述问题：您有两个连续字符范围（az 和 0-9），并且您希望反转每个范围内的字符。

因此，对于单个字符，我们测试它是否在每个范围内，如果是，我们将其反转：

```
private static readonly Tuple<char, char>[] Ranges =
    new[] { Tuple.Create('a', 'z'), Tuple.Create('0', '9') };

static char Reverse(char c)
{
    foreach (var range in Ranges)
    {
        var first = range.Item1;
        var last = range.Item2;

        if (c >= first && c <= last)
        {
            int index = c - first;
            int reverseIndex = (last - first) - index;
            return (char)(first + reverseIndex);
        }
    }
    return c;
} 
```

这样，例如添加 AZ 范围将是一个非常简单的代码更改。

（我`Tuple`在这里使用，因为它很简单。如果您使用更多的字符范围，为它创建自定义类型会很有意义。）

现在，反转字符串意味着反转每个字符，这正是`Select()`它的用途。但是结果是`IEnumerable`，所以我们需要把它转回一个字符串：

```
static string Reverse(string s)
{
    return string.Concat(s.Select(Reverse));
} 
```

# css - Rails 3.2 中的奇怪页面加载有时可能是 CSS？

> ID：14347755
> 
> 赞同：0
> 
> 时间：2013-01-15T22:02:54.203
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline

我只编程了大约 20 周，所以我遇到的每一个问题对我来说都是新的......

我不太确定，但我怀疑有时我的页面会在所有 CSS 文件加载之前加载，因为我会在短时间内看到页面内容，然后突然 CSS 接管并呈现页面。

关于我可以做些什么来解决这个问题的任何想法？如果这有点难以想象，我的网站是[http://www.instamap.it](http://www.instamap.it)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:08:46.517

是的，查看您的源代码，您应该将 CSS 的链接移动到应用程序布局的头部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:09:06.517

这是因为您的 CSS 链接在文档的末尾而不是开头，因此页面首先加载其他所有内容。

这一行（169）：

```
<link href="/assets/application-9541dd7ae253c39af6731980dce6e296.css" media="all" rel="stylesheet" type="text/css" /> 
```

应该在文档的头部。这样，CSS 将在其他所有内容之前加载。

# asp.net-mvc-3 - 在 MVC3 中调用存储过程时用 ADO.net 替换 EF4.1？

> ID：14347756
> 
> 赞同：0
> 
> 时间：2013-01-15T22:03:10.523
> 
> 标签：asp.net-mvc-3, stored-procedures, ado.net

我需要用 ADO.NET 替换 EF4.1。我们应用程序中的数据仅由存储过程返回。我需要帮助重写如下调用（以便为应用程序编写 DAL）：

**EF调用存储过程：**

```
using (var db = new NexGenContext())
{
   SqlParameter param = new SqlParameter("@ReviewID", Id);
   var issues = db.Database.SqlQuery<QuestionIssue>(
        "SP_GetQuestionIssues @ReviewID", param).ToList();

   return View(issues);
} 
```

ADO.NET 中的等价物是什么？从数据库中获取数据并映射到我的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:48:05.800

最接近 ADO.NET 的技术是数据集，而无需实际越界。数据集的行为与 ORM 非常相似，您可以直接从表中访问数据，而无需遍历游标。数据集直接返回列表，可以跟踪新数据与旧数据。

这个链接是一个很好的概述： [http ://www.c-sharpcorner.com/UploadFile/718fc8/working-with-dataset-in-ado-net/](http://www.c-sharpcorner.com/UploadFile/718fc8/working-with-dataset-in-ado-net/)

这个[带有 viewbags](https://stackoverflow.com/questions/9824531/mvc-datasets-with-viewbags)堆栈线程的 MVC 数据集专门使用模型中的数据集来解决。

# php - 从特定区域选择和爬取内容

> ID：14347757
> 
> 赞同：1
> 
> 时间：2013-01-15T22:03:13.720
> 
> 标签：php

这不是我没有代码的问题，而只是一个基本问题。我知道很多 PHP 并且已经开始为某些项目编写网络爬虫，并且想知道是否有一种方法可以只爬取某个区域的数据。

我正在考虑创建一个体育比分类型的网络应用程序，我知道一些网站将分数保存在右侧的框中，有没有办法可以只从该特定区域而不是整个网页爬取数据?

这只是一个问题

# php - php url验证器显示有效地址无效

> ID：14347759
> 
> 赞同：0
> 
> 时间：2013-01-15T22:03:25.730
> 
> 标签：php, url-validation

```
if (!filter_var($site, FILTER_VALIDATE_URL, FILTER_FLAG_HOST_REQUIRED))... 
```

此验证器显示：
[https://www.g](https://www.g) - 作为有效地址！
www.google.com - 无效地址！

如果您在地址栏中键入一些地址，并且您看到它有效 - 它应该是一个有效的地址。反之亦然。我需要这样一个验证器。或者 - 我在上面的代码中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:05:50.313

`www.google.com`不是有效的网址。它需要一个协议才能有效，即`http://www.google.com`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T22:11:28.990

[php.net](http://de2.php.net/manual/en/filter.filters.flags.php)上的用户评论指出：

“请注意 FILTER_FLAG_HOST_REQUIRED 和 FILTER_FLAG_SCHEME_REQUIRED 已经消失。它们之前在常量页面中提到过，但现在 validate_url 过滤器默认需要主机和方案。”

似乎该协议对于最近的 PHP 版本是必须的，并且不能被禁用。

# android - 来自同一代码库的 Android 多个 APK

> ID：14347763
> 
> 赞同：0
> 
> 时间：2013-01-15T22:03:48.593
> 
> 标签：android, aapt

我的目标是创建多个 android APK。唯一不同的是包名，我手动覆盖了 res 文件夹中的一些内容。

我知道你可以做一个图书馆项目。问题是我们必须管理多个清单文件和版本。那不是我想做的。

我正在研究 aapt 以创建新的包名称和共享 res 文件夹。问题是我不知道从哪里开始。我看到很多示例，例如： [用于重命名清单包的自定义 Android build.xml](https://stackoverflow.com/questions/3360349/custom-android-build-xml-for-rename-manifest-package) 也正是我想要做的：http: [//blog.uncommons.org/2010/07/19/building-two-versions-of-相同的安卓应用程序/](http://blog.uncommons.org/2010/07/19/building-two-versions-of-the-same-android-app/)

任何人都可以提供从哪里开始的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:14:29.767

最好的方法是创建一个库项目，然后为您想要的每个 APK 创建单独的项目。每个 APK 项目都可以拥有自己的 Manifest 并引用 Library Project。当我告诉你这比在构建/编译期间重命名包要容易得多时，请相信我。只要您在单个 APK 的清单文件中使用完全限定名称，您就可以轻松调用在库包中共享的活动。

[http://developer.android.com/tools/projects/projects-eclipse.html](http://developer.android.com/tools/projects/projects-eclipse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:16:58.693

我之前遇到过同样的问题，并制作了一个批处理文件来将图像、mp3 文件等文件复制到我的应用程序文件夹所在的工作区文件夹中。如果您不想使用库项目，则必须使所有内容都动态化。我希望这会有所帮助，否则你可以问我任何你想要的。

# c - Visual Studio 中的“跨步”和“步入”

> ID：14347770
> 
> 赞同：4
> 
> 时间：2013-01-15T22:04:27.970
> 
> 标签：c, visual-studio

我注意到在 VS 中使用 F10 - Step Over 会自动跳过我的功能。这是为什么？我确实注意到 F11- Step Into 确实输入了我的函数，但是它输入了我从各种 C 库中使用的函数的实现代码，这真的很烦人。

有什么方法可以在我的函数中逐步运行而不输入包含库的实现代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T22:37:19.003

这很烦人，特别是如果您碰巧调用几个函数只是为了将参数输入您的函数。您可以使用 step out (Shift+F11) 快速退出无趣的代码。（然后按 F11 进入下一个）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T22:08:25.740

是的，有一个未记录的功能允许您不进入您指定的任何功能列表。有关如何设置的示例，请参阅[此博客文章。](http://blogs.msdn.com/b/andypennell/archive/2004/02/06/69004.aspx)但同样，由于它是一个未记录的功能，它可能会与 Visual Studio 的未来版本中断，并且它可能并不总是可靠地运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T22:07:06.443

您可以单**步**执行您的函数，然后**单步**执行函数中的指令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T00:13:02.597

如果问题是您有多个函数调用属于同一表达式的一部分，并且您只对单步执行其中一个感兴趣，那么 VC++ 2008 中添加的“单步执行”功能可能会有所帮助。

只需右键单击该行并选择“Step into specific” - 您将获得表达式中涉及的函数列表，并且可以选择要进入的函数。

在我的机器上，它也绑定到按键 Shift-Alt-F11。

# php - 是否可以将 iframe 转换为 html？

> ID：14347771
> 
> 赞同：-5
> 
> 时间：2013-01-15T22:04:34.520
> 
> 标签：php, html, iframe, seo

是否可以使用 PHP 将 iFrame 转换为页面 HTML（如果有任何意义），以便内容可以被搜索引擎索引？我在这里使用电子表格：

[http://www.landedhouses.co.uk/offers/](http://www.landedhouses.co.uk/offers/)

```
<p><iframe width='700' height='1200' frameborder='0' src='https://docs.google.com/spreadsheet/pub?key=0Ai0rAM-RzQC4dE1hQ2FpdmFoU29POGFUR1NMQUl2RWc&#038;single=true&#038;gid=1&#038;output=html&#038;widget=true'></iframe></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:25:23.693

要使用 PHP 拉取 HTML，您可以使用以下[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)函数：

```
$html = file_get_contents('https://docs.google.com/spreadsheet/pub?key=0Ai0rAM-RzQC4dE1‌​hQ2FpdmFoU29POGFUR1NMQUl2RWc&#038;single=true&#038;gid=1&#038;output=html&#038;wi‌​dget=true'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:15:58.143

搜索引擎将遵循 IFrame 中的 URL，除非 robots.txt 或元标记禁止。

很难将 HTML 包含到现有页面中，因为至少必须删除`<head>`和 部分，并且可能修复样式表。`<body>`

# animation - JavaFX：使用 PathTransition 作为绘图笔的动画

> ID：14347778
> 
> 赞同：3
> 
> 时间：2013-01-15T22:05:17.163
> 
> 标签：animation, javafx-2, javafx

示例代码

```
//node 
Rectangle rect = new Rectangle (0, 0, 20, 20);

//path
Text text = TextBuilder.create()
                       .text("J a v a F X   R o c k s")
                        .font(new Font(50))
                        .x(65)
                        .y(100)
                        .build();
// path transition
 pathTransition = PathTransitionBuilder.create()
                .duration(Duration.seconds(15))
                .path(text)
                .node(rect)
                .orientation(OrientationType.ORTHOGONAL_TO_TANGENT)
                .cycleCount(Timeline.INDEFINITE)
                .autoReverse(true)
                .build(); 
```

![在此处输入图像描述](../Images/ddd69cb9ad3b364cfdb8bbe4e3d36ca9.png)

我想显示 rect 节点经过的部分文本（路径）。上图中的意思是矩形节点一直移动到java，我想只在那个时间点显示那个部分..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:07:00.427

您可以尝试为 Text 分配一个剪辑区域并在动画期间对其进行更新：

```
public void start(Stage primaryStage) {
    final Rectangle pen = new Rectangle(0, 0, 20, 20);

    // this pane this contain clipping
    final Pane clip = new Pane();

    // listener to update clipping area
    ChangeListener changeListener = new ChangeListener() {
        @Override
        public void changed(ObservableValue ov, Object t, Object t1) {
            Rectangle newrect = new Rectangle(pen.getTranslateX(), pen.getTranslateY(), pen.getWidth(), pen.getHeight());
            newrect.setRotate(pen.getRotate());
            clip.getChildren().add(newrect);
        }
    };

    // rect coordinates will be changed during animation, so we will listen to them
    pen.translateXProperty().addListener(changeListener);
    pen.translateYProperty().addListener(changeListener);
    pen.rotateProperty().addListener(changeListener);

    final Text text = TextBuilder.create()
            .text("J a v a F X   R o c k s")
            .font(new Font(50))
            .clip(clip)
            .x(65)
            .y(100)
            .build();

    PathTransition pathTransition = PathTransitionBuilder.create()
            .duration(Duration.seconds(15))
            .path(text)
            .node(pen)
            .orientation(OrientationType.ORTHOGONAL_TO_TANGENT)
            .build();

    // once we done we don't want to store thousands of rectangles used to clip
    pathTransition.setOnFinished(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent t) {
            text.setClip(null);
            clip.getChildren().clear();
        }
    });

    Pane root = new Pane();
    root.getChildren().addAll(text, pen);

    primaryStage.setScene(new Scene(root, 600, 200));
    primaryStage.show();
    pathTransition.play();
} 
```

存储剪切区域的更有效的方法可以是`Canvas`对象，但它需要一些数学才能在画布上绘制带有旋转的矩形，所以这是你的电话。

# twitter-bootstrap - 通过引用包含 Twitter Bootstrap

> ID：14347779
> 
> 赞同：0
> 
> 时间：2013-01-15T22:05:29.797
> 
> 标签：twitter-bootstrap

是否有一个 URL 可以用来包含我喜欢的任何 Twitter Bootstrap 文件、css 或 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T14:32:12.043

试试[这个](http://getbootstrap.com/getting-started/)或官方 github 存储库。

# android - RelativeLayout 项目不是相对的

> ID：14347781
> 
> 赞同：0
> 
> 时间：2013-01-15T22:05:39.610
> 
> 标签：android

我将把它切换为使用 Table 而不是 ListView，但我担心这些项目不是相对的，因为它们应该被赋予提供的 XML。

是否有关于在 Linear 内部的 RelativeLayout 是否会导致问题？

![在此处输入图像描述](../Images/72539b5791f74ffafd094d392bc7e629.png)

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">

    <ViewSwitcher
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/dashboardViewSwitcher" android:layout_gravity="center">
        <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
            <include
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    layout="@layout/loading" />
        </RelativeLayout>
        <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

            <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/dashboardActivity_Header"
                    android:id="@+id/dashboardActivityHeader"/>
            <ListView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/dashboardActivityList"/>

            <TextView android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:text="@string/dashboardNews_Header"
                      android:id="@+id/dasboardNewsHeader"/>
            <ListView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/dashboardNewsList"/>
        </RelativeLayout>
    </ViewSwitcher>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:06:44.087

您应该使用 , 等声明组件在布局中的**相对关系。**`android:layout_below``android:layout_toLeftOf`

例如：

```
 <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/dashboardActivity_Header"
                android:id="@+id/dashboardActivityHeader"/>
        <ListView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/dashboardActivityHeader"
                android:id="@+id/dashboardActivityList"/>

       </RelativeLayout> 
```

# java - Android：下载大量文件并将其保存在 SD 卡上

> ID：14347783
> 
> 赞同：1
> 
> 时间：2013-01-15T22:05:46.573
> 
> 标签：java, android, download, download-manager

我需要创建某种下载管理器来通过 URL 加载大量文件并将它们保存在 SD 卡上。我在 android sdk 中发现了两个类，我认为在这种情况下可以帮助我：

1.  [android.app.DownloadManager](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/DownloadManager.java#DownloadManager)
2.  [android.net.Downloads](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/net/Downloads.java#Downloads)

也许有人使用它们并可以分享他的经验，什么更好，或者有更好的外部解决方案？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:37:07.100

您也可以使用系统的[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)。

```
 DownloadManager mgr = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE); 
```

向此服务发布 DownloadManager.Request 会导致下载出现在通知区域中。

# iphone - PDF阅读器的缓存问题

> ID：14347784
> 
> 赞同：5
> 
> 时间：2013-01-15T22:05:48.110
> 
> 标签：iphone, ipad, ios5, pdf, pdf-viewer

我使用**schwa/iOS-PDF-Reader API**开发了一个 pdf 阅读器。我遇到了缓存问题，我将我的文件路径动态地提供给 API，但无论提供的文件路径如何，阅读器总是会调出第一个 pdf 文件。

请帮帮我。。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T07:06:42.813

您可以将所有 pdf 路径放入一个数组中，然后将数组索引路径传递给您的 API。

试试吧，我希望它对你有帮助。

# php - php上数据通用树可视化的Json解析

> ID：14347785
> 
> 赞同：0
> 
> 时间：2013-01-15T22:05:50.127
> 
> 标签：php, json, visualization

最近我发现了一个很棒的 javascript 可视化库，我想将它集成到我的实际 web 应用程序中。我以这种格式从 facebook API 获取数据：

```
Array
(
    [data] => Array
        (
            [0] => Array
                (
                    [category] => Community
                    [name] => Different Solutions
                    [id] => 271915499553486
                    [created_time] => 2012-09-23T17:17:23+0000
                )

            [1] => Array
                (
                    [category] => Non-profit organization
                    [name] => Indigeni Digitali
                    [id] => 295601322240
                    [created_time] => 2012-01-23T19:32:13+0000
                )

            [2] => Array
                (
                    [category] => Cause
                    [name] => StartupVisa
                    [id] => 10150111295350167
                    [created_time] => 2011-12-11T19:12:51+0000
                )

            [3] => Array
                (
                    [category] => Business services
                    [name] => H-FARM Ventures
                    [id] => 84021019572
                    [created_time] => 2011-04-02T02:30:26+0000
                )

            [4] => Array
                (
                    [category] => News/media website
                    [name] => iSpazio
                    [id] => 179295038271
                    [created_time] => 2010-05-28T21:12:28+0000
                )

            [5] => Array
                (
                    [category] => Website
                    [name] => Hot Pin Venezuela
                    [id] => 110628642307976
                    [created_time] => 2010-04-20T18:45:08+0000
                )

            [6] => Array
                (
                    [category] => Website
                    [name] => El Chiguire Bipolar
                    [id] => 14588159235
                    [created_time] => 2008-11-07T02:27:12+0000
                )

        )

    [paging] => Array
        (
            [next] => https://graph.facebook.com/1125405534/likes?limit=5000&offset=5000&__after_id=14588159235
        )

) 
```

从我获取**类别**和**名称的****数据**数组中，不幸的是，信息没有按类别分类，我的想法是如果在树的中心我有用户名，那么从这一点开始，每个分支都进入一个类别，每个类别都有一个从每个名称分支。[例子](http://infoabout.me/punctis/Jit/Examples/RGraph/example4.html)。[这是](http://infoabout.me/punctis/Jit/Examples/RGraph/example4.js)我需要安排的方式，请看一下**json** var。

 ******我可以使用 php 字符串函数来构建该格式，就像我为谷歌图表 api 所需的其他格式所做的那样：

```
 foreach($user_likes['data'] as $category) {
        if(isset($norm_interests[$category['category']])) { 
            $norm_interests[$category['category']] += 1; } 
        else { 
            $norm_interests[$category['category']] = 1; }
    }

    echo "data.addRows([";
    while ($category = current($norm_interests)) {
        if(key($norm_interests) <> 'Website') { 
        echo "['" . key($norm_interests) . "', " . $category . "],"; 
        }
        next($norm_interests);
    }
    echo "]);"; 
```

但是由于这种新格式是 JSON（而且我是 json 上的菜鸟），我很确定有一种更好的方法可以使用 php 的 json 功能来构建我需要的新 var。这个想法是在 php 中生成 json var，然后我回应 JS 的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:11:50.053

```
foreach($user_likes['data'] as $category) {
    if(isset($norm_interests[$category['category']])) { 
        $norm_interests[$category['category']] += 1; } 
    else { 
        $norm_interests[$category['category']] = 1; }
    }

    $data = json_encode( $norm_interests );
    echo "data.addRows(" . $data . ");";
} 
```******

# matlab - matlab中矩阵的图像

> ID：14347792
> 
> 赞同：0
> 
> 时间：2013-01-15T22:06:10.467
> 
> 标签：matlab, matrix

我编写了一个 matlab 代码，它将加载写入文本文件中的矩阵，然后我想将其显示为图像。文本文件以随机方式包含从 0 到 2 的整数，我想用不同的颜色表示每个整数，例如白色的 0、某种颜色的 1 和不同颜色的 2。我将在下面提供 matlab 代码：

```
clc;
clear all;

for i=1:10
 k=num2str(i);
 f = strcat('test_file_num_',k,'.txt');
 a{i} = fileread(f);

 [m,n] = size(a{i});

 a{i} = reshape(a{i},12,10);
 a{i} = a{i}';
 a{i} = a{i}(:,1:10);

end 
```

文件夹中有 10 个文本文件，每个文件都包含一个包含整数 0 到 2 的随机矩阵，每个文本文件的名称以“test_file_num_”开头，在{i}中我有一个 10x10 矩阵的矩阵。现在我想将 a{i} 矩阵表示为图像或图形或其他任何东西，但要拥有可以以不同颜色显示矩阵内容的东西。感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:08:45.553

您正在寻找该`imagesc`功能。

但是您需要使用`str2num`before 因为您将数字读取为字符。

IE：

```
imagesc(str2num(a{i}); 
```

如果您想立即以数字形式读取文件，您应该这样做：

```
fid = fopen(f);
a{i} = fscanf(fid,'%u',inf);
fclose(fid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:16:54.370

如果文件中的数据是结构化的，则意味着数字之间有制表符或空格，您可以直接使用它`importdata`来将数据加载到矩阵中。之后，您可以使用`imagesc`生成图像。要分配颜色，您可以使用该`colormap`功能更改颜色图。所以你的代码看起来像这样：

```
% Example data
A = floor(3*rand(10)); 
% Change colormap with just 3 colors (Red,Green,Blue)
cmap = [1 0 0;0 1 0;0 0 1];
figure; imagesc(A); colormap(cmap); colorbar; 
```

希望有帮助！

# asp.net - 如何在 Telerik ListView 模板中将数据绑定为 routeValue

> ID：14347794
> 
> 赞同：0
> 
> 时间：2013-01-15T22:06:21.787
> 
> 标签：asp.net, asp.net-mvc, kendo-ui

我的模板从 MvcMusicStore tutroial 修改：

```
<script type="text/x-kendo-tmpl" id="template">
    <div class="product">
    <a href="@Url.Action("Details", "Store", new {id = ${ProductSubCategoryId} })">
         <img src="@Url.Content("${AlbumArtUrl}")" alt="${Title} image" />
             </a>
        <span><h3>${Title}</h3></span>

        <p>${kendo.toString(Price, "c")}</p>
    </div>
</script> 
```

但 Url.Action 方法有错误：意外符号'$'。

更新1：我不能使用

```
@Model.First(d => d.ProductCategoryId.Equals(Convert.ToInt32("${ProductSubCategoryId}"))).ProductCategory.Name 
```

但相同的代码

```
@Url.Content("${AlbumArtUrl}") 
```

工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:02:02.447

`new {id = ${ProductSubCategoryId} }`

这是匿名对象的 C# 代码，而 C# 对 JS 模板一无所知。因此，错误告诉您它不知道 $ 在那里做什么。通常你会从你的 View 模型中传递一些东西，它只在服务器端可用：

`new {id = Model.ProductSubCategoryId }`

与其使用 URL 助手，不如只使用一个字符串`href="Store/Details/${ProductSubCategoryId}"`。这可能不是您所需要的，但我对路由和您的模板知之甚少，无法知道这是否是您想要的，或者 ProductSubCategoryId 实际上是您模型的属性。

关于您更新的示例：

`Url.Content(`之所以有效，是因为该函数在服务器上呈现页面时采用参数，并且在 HTML 中几乎按原样吐出字符串“${AlbumArtUrl}”，并且 HTML 将包含字符串“${AlbumArtUrl }" 以便稍后在客户端解析 JS 模板时，它可以解释该变量。所以在这种情况下，C# 函数`.Content(`不需要理解那个模板变量，因为对它来说，它只是一个嵌入在 HTML 中的字符串。我建议在 Chrome 中使用 F12 在网络选项卡中查看 GET 响应，这样您就可以看到从操作返回的 HTML 源代码，这样您就可以更好地了解每一步到底发生了什么过程。您将能够看到在您返回的 HTML 中，没有像 Url.Content 这样的 C# 代码，但是您会看到像“${AlbumArtUrl}”这样的 javascript 模板内容，因为这些值不会在服务器端呈现。

另一方面`Convert.ToInt32("${ProductSubCategoryId}")`失败，因为这个函数期望它被传递的字符串是一个整数，例如`Convert.ToInt32("2134")`. 就 ToInt32 而言，它说，好的，我看到“某物”是一个字符串，现在我将尝试将该字符串解释为一个数字，这意味着我希望它包含一些数字，例如“456457”但你给了我一堆字母和符号对我来说毫无意义，我无法将其转换为整数。同样，这是在生成页面时在服务器上运行的 C# 函数，并且“${ProductSubCategoryId}”对 C# 没有任何意义，因为它是一个 javascript 模板变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:37:40.780

您将服务器端代码与客户端代码混合在一起。这是无效的 C# 代码：

```
@Url.Content("${AlbumArtUrl}") 
```

您不能使用 helper 以这种方式生成 URL。我建议您在不使用 Url 帮助器的情况下采用正常方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T15:39:34.063

如果你确定要使用 Url.Action，那么这里有一个方法。这是一个黑客，但你可以这样做：

```
<a href="@Url.Action("Details", "Store")?id=${ProductSubCategoryId}"> 
```

# python - 使用 bottle.py 返回排序后的 JSON

> ID：14347795
> 
> 赞同：1
> 
> 时间：2013-01-15T22:06:37.880
> 
> 标签：python, json, bottle

我正在使用bottle.py 构建一个API，并希望返回按键排序的json。这是代码：

```
@route('/test', method='GET')
def sorted():
  return {'z': 'should be last', 'm': 'should be second', 'a': 'should be first'} 
```

不幸的是它回来了

```
{"a": "should be first", "z": "should be last", "m": "should be second"} 
```

我希望返回的是

```
{"a": "should be first", "m": "should be second", "z": "should be last"} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:21:57.417

IIRC，一个瓶子函数可以返回一个字典*或*一个字符串。所以只需返回一个 json 字符串，然后`json.dumps`为您进行排序：

```
@route('/test')
def sorted():
  d = {'z': 'should be last', 'm': 'should be second', 'a': 'should be first'}
  response.headers['Content-Type'] = 'application/json'
  return json.dumps(d, sort_keys=True) 
```

niko246，您在对自己问题的评论中提到了这个答案，但我想您可能不知道您可以返回一个字符串。

# c# - 如何创建一个包含代理对的字符串？

> ID：14347799
> 
> 赞同：14
> 
> 时间：2013-01-15T22:06:54.820
> 
> 标签：c#, string, utf-16, utf-32, surrogate-pairs

我在 Jon Skeet 的博客上看到了[这篇文章](http://blogs.msmvps.com/jonskeet/2009/11/02/omg-ponies-aka-humanity-epic-fail/)，他谈到了字符串反转。我想尝试他向自己展示的示例，但它似乎有效......这让我相信我不知道如何创建一个包含代理对的字符串，这实际上会导致字符串反转失败。实际上如何创建一个带有代理对的字符串，以便我自己可以看到失败？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T22:43:38.913

最简单的方法是使用`\U########`where`U`是大写字母，而 the`#`正好表示八个十六进制数字。如果值超过`0000FFFF`十六进制，则需要一个代理对：

```
string myString = "In the game of mahjong \U0001F01C denotes the Four of circles"; 
```

您可以检查`myString.Length`一个 Unicode 字符是否占用两个 .NET`Char`值。请注意，该`char`类型有几个`static`方法可以帮助您确定 a`char`是否是代理对的一部分。

如果您使用没有`\U########`转义序列之类的 .NET 语言，则可以使用 method `ConvertFromUtf32`，例如：

```
string fourCircles = char.ConvertFromUtf32(0x1F01C); 
```

*另外：*如果您的 C# 源文件具有允许所有 Unicode 字符的编码，例如 UTF-8，您可以直接将字符放入文件中（通过复制粘贴）。例如：

```
string myString = "In the game of mahjong  denotes the Four of circles"; 
```

该字符在源文件（在我的示例中）中是 UTF-8 编码的，但是当应用程序运行并且字符串在内存中时，它将是 UTF-16 编码（代理对）。

（不确定 Stack Overflow 软件是否正确处理了我的麻将字符。如果“有趣”字符不在这里，请尝试单击此答案的“编辑”并从那里的文本中复制粘贴。）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-15T22:23:15.303

术语“代理对”是指在`UTF-16`编码方案中使用高代码点对 Unicode 字符进行编码的一种方式（有关更多信息，请参见此[页面](http://en.wikipedia.org/wiki/UTF-16/UCS-2#Code_points_U.2B10000..U.2B10FFFF)）；

在`Unicode`字符编码中，字符映射到 和 之间的`0x000000`值`0x10FFFF`。在内部，`UTF-16`编码方案用于存储考虑`Unicode`到两字节 ( `16-bit`) 代码序列的文本字符串。由于两个字节只能包含从`0x0000`to的字符范围`0xFFFF`，因此使用一些额外的复杂性来存储超出此范围 ( `0x010000`to `0x10FFFF`) 的值。

这是使用称为代理的代码点对完成的。代理字符分为两个不同的范围，称为`low surrogates`和`high surrogates`，这取决于它们是否被允许在两个代码序列的开头或结尾。

自己试试这个：

```
String surrogate = "abc" + Char.ConvertFromUtf32(Int32.Parse("2A601", NumberStyles.HexNumber)) + "def";

Char[] surrogateArray = surrogate.ToCharArray();
Array.Reverse(surrogateArray);

String surrogateReversed = new String(surrogateArray); 
```

或者这个，如果你想坚持博客示例：

```
String surrogate = "Les Mise" + Char.ConvertFromUtf32(Int32.Parse("0301", NumberStyles.HexNumber)) + "rables";

Char[] surrogateArray = surrogate.ToCharArray();
Array.Reverse(surrogateArray);

String surrogateReversed = new String(surrogateArray); 
```

nnd 然后使用调试器检查字符串值。Jon Skeet 说得对……字符串和日期看起来很简单，但绝对不是。

# c - 为什么我可以在 Ubuntu 中构建这个包（aspectC），而不是 Cygwin？

> ID：14347801
> 
> 赞同：0
> 
> 时间：2013-01-15T22:06:58.533
> 
> 标签：c, makefile, cygwin

我正在尝试开始使用[这个](https://sites.google.com/a/gapp.msrg.utoronto.ca/aspectc/download)库并按照该页面上的说明进行操作，Cygwin 会返回[this](http://pastebin.com/xWyc7zYq)，尽管该项目的页面声称支持 Cygwin。

Makefile 在新的 Ubuntu VM 中运行良好，我运行 Cygwin 的 setup.exe 以包含 Devel、Interpreters、Perl 等，我认为它们可能修复了损坏的依赖项，但在安装所有相关包。

有没有人遇到过这样的问题？你有什么建议吗？

**更新**：之前的输出是我尝试 0.8 的结果。我重新运行了 0.9RC Makefile，问题似乎是：

```
/usr/local/bin/ACC/src/.acc_dir/matchaa_ac.c:63:1: error: expected specifier-qualifier-list before ‘__ac__type__insert’
/usr/local/bin/ACC/src/.acc_dir/matchaa_ac.c:63:1: error: stray ‘@’ in program 
```

我想不出为什么 Cygwin 对“@”字符感到窒息。谷歌没用，因为它不解析特殊字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:14:18.107

第一个错误是：

```
/usr/local/bin/ACC/src/.acc_dir/matchinfo_ac.c:180:39: error: expected specifier-qualifier-list before ‘PointcutType’ 
```

我会看一下第 180 行字符 39 的`matchinfo_ac.c`线索，以了解您的两个构建环境之间有什么不同。由于错误是由 输出的`tacc`，也许您需要更高版本的`tacc`来构建`tacc`？语法变化？v0.9 RC 起（注意是开发版）

```
struct _IO_FILE_plus ; 
```

但一定要检查你自己的副本。无论如何，这一行没有 39 个字符。

祝你好运。

# c++ - Linux c++如何打开一个程序

> ID：14347802
> 
> 赞同：-7
> 
> 时间：2013-01-15T22:06:59.007
> 
> 标签：c++, linux

如何让一个 c++ 程序在 Linux 中打开另一个程序？它类似于在 Windows 中使用 shell 命令吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:12:06.573

有一个标准的 C 函数，`system()`它运行一个命令并等待它完成。

有一个标准的 POSIX 函数，`popen()`它在新进程中运行命令并返回连接到新进程的管道。管道通常是单向的，它既可以读也可以写（一些平台，例如 BSD 允许双向管道）

或者您可以手动执行此操作，方法是使用 POSIX 函数`fork()`派生一个新进程，然后使用其中一个`exec()`家族来用不同的程序替换进程映像。

我认为迄今为止最简单的首选方法是使用我的[Pstreams](http://pstreams.sf.net/)库。这会在新进程中运行命令，并使用与 iostreams 兼容的接口将管道连接到它的任何`stdin`,和 。与 &相比，这为您提供了更少的控制（但更简单），但比.`stdout``stderr``fork``exec``popen`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:11:01.863

您可以使用**exec**函数之一：http: [//www.kernel.org/doc/man-pages/online/pages/man3/exec.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/exec.3.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:10:34.207

您可以使用`system()`标准库调用，它与 Windows Shell 命令非常相似。要获得更多控制，您可以使用`exec()`及其变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T22:14:53.870

使用`execl()`功能。它适用于 C 语言，但应该可以正常工作。有关铁道部信息和一些示例，请查看以下内容： http: [//www.gidforums.com/t-3369.html](http://www.gidforums.com/t-3369.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T22:17:50.063

通常，您首先使用功能*fork*启动另一个进程，然后*exec*将新进程正在运行的程序（即要启动另一个程序的程序）与您要启动的程序交换。代码大致如下所示：

```
pid_t pid = fork();
switch(pid) {
   case 0: // we are the child process
      exec( name of exectuable ); //exact signautre differs
      break;
   case -1: //An error ocurred
      std::cout << "error\n";
} 
```

Fork 克隆您正在运行的进程。它们绝对相同，甚至运行相同的程序。唯一的区别是返回的 pid。调用进程获取孩子的pid，孩子得到零。switch 语句决定了其中的哪一个。Exec 将进程正在运行的程序替换为另一个程序。据我所知，它只保留文件描述符。Exec 有几个关于参数和搜索路径的变体，在手册页中查找它们。

# matlab - MATLAB GUI 停止按钮问题

> ID：14347803
> 
> 赞同：1
> 
> 时间：2013-01-15T22:06:59.530
> 
> 标签：matlab, user-interface, matlab-guide

编辑：我重新表述了我的问题，因为我现在对这个问题有了更好的理解，而且初稿中有很多不必要的信息。

我正在创建一个独立的 MATLAB 应用程序，它需要一个可以启动和停止循环脚本的切换按钮。

基于这个[有用的视频](http://blogs.mathworks.com/videos/2010/12/03/how-to-loop-until-a-button-is-pushed-in-matlab/)，我能够在我的 gui.m 文件中实现这个想法：

```
function startBtn_Callback(hObject, eventdata, handles)

    if get(handles.startBtn,'Value')
        set(handles.startBtn,'String','Stop Recording');
    else
        set(handles.startBtn,'String','Start Recording');
    end

    while get(handles.startBtn,'Value');
        disp('looping..');
        pause(.5);
    end 
```

该脚本按预期工作，但是当我将 while 循环的内容替换为我想要循环的函数时，按钮停止工作。当我按下它时它仍然会切换，但只有在第一次按下按钮时才会调用回调。这是我的最终代码的样子：

```
function startBtn_Callback(hObject, eventdata, handles)

    if get(handles.startBtn,'Value')
        set(handles.startBtn,'String','Stop Recording');
        pause(.1);
    else
        set(handles.startBtn,'String','Start Recording');
        disp('Recording Stopped')
    end

    while get(handles.startBtn,'Value');
        myFunction();
    end 
```

当我按下开始按钮时，此回调运行并开始循环。需要更改文本 -如果`pause(.1)`我不包含暂停，则循环启动，但按钮上的文本不会更改。

在此之后，没有后续的按钮按下做任何事情。该按钮在 GUI 上切换，但从`startBtn_Callback`未被调用并且循环无限期地运行。这是一个问题，因为我的最终用户将无法访问 MATLAB 控制台。

提供有关我的功能的更多信息：它是一种记录音频 5 秒，进行一些处理，然后输出一些图表的方法。我希望这个循环无限期地重复，直到用户按下停止。

我认为问题在于 MATLAB 似乎一次只能运行一个函数，所以在`myFunction()`运行时，无法启动回调。它在第一个示例中起作用的原因是循环调用之间存在暂停。我不能有这种停顿，因为项目的要求是记录每一秒。

我怎样才能为这个过程制作一个可靠的停止按钮？

我正在运行 MATLAB R2012b 32 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:59:48.333

在您的代码片段中

```
a=get(handles.startBtn,'Value')
while a
    myFunction();
end 
```

的值`a`被赋值一次，之后永远不会改变。因此，`while`-loop 要么永远不会运行，要么永远循环。

```
while get(handles.startBtn,'Value')
    myFunction();
end 
```

将在每次迭代时查询按钮的值，但是，特别是如果`myFunction`执行时间不长，将会有很多 Java 请求可能会使您的 GUI 迟缓。

这就是您遵循的示例使用该`pause`行的原因，因此循环仅每 0.5 秒左右执行一次。

如果您不想在`while`-line 中包含查询，您也可以编写

```
%# read inital value of a
a=get(handles.startBtn,'Value');
while a
    myFunction();
    %# update a
    a=get(handles.startBtn,'Value');
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:30:21.917

drawow() 是我正在寻找的函数。把它放在 myFunction() 之后会强制 Matlab 在继续循环之前处理任何堆积的 GUI 调用。

此代码为不确定和连续的过程创建了一个可靠的启动/停止切换按钮：

```
function startBtn_Callback(hObject, eventdata, handles)

  if get(handles.startBtn,'Value')
      set(handles.startBtn,'String','Stop');
      drawnow();
  else
      set(handles.startBtn,'String','Start');
  end
  while get(handles.startBtn,'Value');
      myFunction();
      drawnow()
  end 
```

# javascript - 如何使一个div不移动另一个

> ID：14347809
> 
> 赞同：0
> 
> 时间：2013-01-15T22:07:40.350
> 
> 标签：javascript, jquery, html, css, jquery-ui

大约一周前我问了一个类似的问题，但现在我遇到了一个不同的问题。
以前，我试图让动态 jQuery 选项卡出现在我网站的导航栏前面。动态选项卡包含用户对象，例如：“用户控制面板”和“快速链接”。

无论如何，使用 CSS 中可用的“z”坐标，我能够将选项卡（最小化前后）放置在导航菜单（以及网站的其余部分）的前面。但是，我现在遇到了不同的问题。选项卡在网页一侧的一行中，如下所示：

```
 T
                                                                             A
                                                                             B
                                                                             1

                                                                             T
                                                                             A
                                                                             B
                                                                             2

                                                                             T
                                                                             A
                                                                             B
                                                                             3

                                                                             T
                                                                             A
                                                                             B
                                                                             4 
```

一切正常，除了当我单击其中一个选项卡时，带有数据的框会从侧面板中出来（应该如此）并占用侧面的空间并将其他选项卡向下推。我想让标签保持在原位，无论如何都要让盒子出来。这就是它现在所做的：

```
 T
                                                                             A                                                                                                     
                                                                             B
                                                                             1
_____________________________________________________________________________
|
|
|
|
|
|
|
|
|
|
|
|
|
|
----------------------------------------------------------------------------
                                                                             T
                                                                             A
                                                                             B
                                                                             2

                                                                             T
                                                                             A
                                                                             B
                                                                             3

                                                                             T
                                                                             A
                                                                             B
                                                                             4 
```

代码：http: [//jsfiddle.net/hLLPL/](http://jsfiddle.net/hLLPL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:26:50.583

正如我在[评论](https://stackoverflow.com/questions/14347809/how-to-make-one-div-not-move-another#comment19946182_14347809)中所建议的，这里是更新[小提琴](http://jsfiddle.net/hLLPL/1/embedded/result/)的工作示例。

## 我做了什么

1.  把所有的静态类`div`放在一个父类中`div`。（PS 我改变了类以适应我自己的编码范式。

    ```
    <div class="static">
      <div style="background:url('assets/img/tab_ucp.png');" id="static1" class="stat"></div>
      <div style="background:url('assets/img/tab_aqa.png');" id="static2" class="stat"></div>
      <div style="background:url('assets/img/tab_cr.png');" id="static3" class="stat"></div>
      <div style="background:url('assets/img/tab_ql.png');" id="static4" class="stat"></div>
    </div> 
    ```

2.  将此 CSS 分配给 parent `div`。

    ```
    .static {
      position: absolute;
      top: 0px;
      right: 0px;
    } 
    ```

# c# - 选择组中的下一个单选按钮

> ID：14347816
> 
> 赞同：1
> 
> 时间：2013-01-15T22:08:01.933
> 
> 标签：c#, radio-button

是否有一种标准方法可以以编程方式选择/检查一组单选按钮中的下一个单选按钮？我正在寻找的行为类似于分组在容器中的单选按钮的默认箭头键按下事件：当我按下箭头键时，会自动选择并检查下一个（或上一个）单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:58:44.520

我是这样做的：

```
 var rads = panel1.Controls.OfType<RadioButton>(); // Get all radioButtons of desired panel

    rads.OrderBy(r => r.Top); // sort them. Please specify what you mean "next" here. I assume that you need next one at the bottom

    // find first checked and set checked for next one
    for (int i = 0; i < rads.Count()-1; i++) 
    {
        if (rads.ElementAt(i).Checked)
        {
            rads.ElementAt(i + 1).Checked = true; 
            return;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:35:02.373

最快的解决方案：（如果您的应用程序有焦点......）

```
//assuming you are at the first radio button
SendKeys({DOWN}); 
```

更困难的解决方案：http: [//msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.findall.aspx](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.findall.aspx)

```
//Write method to get window element for the window you wish to manipulate
//Open an instance of notepad and the WindowTitle is: "Untitled - Notepad"
//you could use other means of getting to the Window element ...
AutomationElement windowElement = getWindowElement("Untitled - Notepad");

//Use System.Windows.Automation to find all radio buttons in the WindowElement
//pass the window element into this method
//This method will return all of the radio buttons in the element that is passed in
//however, if you have a Pane inside of the WIndow and then, the buttons are contained
//in the pane, you will have to get to the pane and then pass the pane into the findradiobuttons method
AutomationElementCollection radioButtons = FindRadioButtons(windowElement);

//could iterate through the radioButtons to determine which is selected...
//then select the next index etc.    

//then programmatically select the radio button
//pass the selected radioButton AutomationElement into a method that Invokes the Click etc.
clickButtonUsingUIAutomation(radioButtons[0]);

/// <summary> 
/// Finds all enabled buttons in the specified window element. 
/// </summary> 
/// <param name="elementWindowElement">An application or dialog window.</param>
/// <returns>A collection of elements that meet the conditions.</returns>
AutomationElementCollection FindRadioButtons(AutomationElement elementWindowElement)
{
    if (elementWindowElement == null)
    {
        throw new ArgumentException();
    }
    Condition conditions = new AndCondition(
      new PropertyCondition(AutomationElement.IsEnabledProperty, true),
      new PropertyCondition(AutomationElement.ControlTypeProperty, 
          ControlType.RadioButton)
      );

    // Find all children that match the specified conditions.
    AutomationElementCollection elementCollection = 
    elementWindowElement.FindAll(TreeScope.Children, conditions);
    return elementCollection;
}

    private AutomationElement getWindowElement(string windowTitle)
    {
        AutomationElement root = AutomationElement.RootElement;
        AutomationElement result = null;
        foreach (AutomationElement window in root.FindAll(TreeScope.Children, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.Window)))
        {
            try
            {
                if (window.Current.Name.Contains(windowTitle) && window.Current.IsKeyboardFocusable)
                {
                    result = window;
                    break;
                }
            }
            catch (Exception e)
            {
                throw;
            }
        }

        return result;
    }

    private void ClickButtonUsingUIAutomation(AutomationElement control)
    {
        // Test for the control patterns of interest for this sample. 
        object objPattern;
        ExpandCollapsePattern expcolPattern;

        if (true == control.TryGetCurrentPattern(ExpandCollapsePattern.Pattern, out objPattern))
        {
            expcolPattern = objPattern as ExpandCollapsePattern;
            if (expcolPattern.Current.ExpandCollapseState != ExpandCollapseState.LeafNode)
            {
                Button expcolButton = new Button();
                //expcolButton.Margin = new Thickness(0, 0, 0, 5);
                expcolButton.Height = 20;
                expcolButton.Width = 100;
                //expcolButton.Content = "ExpandCollapse";
                expcolButton.Tag = expcolPattern;
                expcolPattern.Expand();
                //SelectListItem(control, "ProcessMethods");
                //expcolButton.Click += new RoutedEventHandler(ExpandCollapse_Click);
                //clientTreeViews[treeviewIndex].Children.Add(expcolButton);
            }
        }
        TogglePattern togPattern;
        if (true == control.TryGetCurrentPattern(TogglePattern.Pattern, out objPattern))
        {
            togPattern = objPattern as TogglePattern;
            Button togButton = new Button();
            //togButton.Margin = new Thickness(0, 0, 0, 5);
            togButton.Height = 20;
            togButton.Width = 100;
            //togButton.Content = "Toggle";
            togButton.Tag = togPattern;
            togPattern.Toggle();
            //togButton.Click += new RoutedEventHandler(Toggle_Click);
            //clientTreeViews[treeviewIndex].Children.Add(togButton);
        }
        InvokePattern invPattern;
        if (true == control.TryGetCurrentPattern(InvokePattern.Pattern, out objPattern))
        {
            invPattern = objPattern as InvokePattern;
            Button invButton = new Button();
            //invButton.Margin = new Thickness(0);
            invButton.Height = 20;
            invButton.Width = 100;
            //invButton.Content = "Invoke";
            invButton.Tag = invPattern;
            //invButton.Click += new EventHandler(Invoke_Click);
            invPattern.Invoke();

            //clientTreeViews[treeviewIndex].Children.Add(invButton);
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:16:26.503

所以，似乎没有标准的方法来处理这个问题。我最终从 Andrey 的解决方案中获得灵感，并编写了一个可以从一组 RadioButton 中的任何特定 RadioButton 调用的扩展方法。

```
public static void CheckNextInGroup(this RadioButton radioButton, bool forward) {
    var parent = radioButton.Parent;
    var radioButtons = parent.Controls.OfType<RadioButton>();  //get all RadioButtons in the relevant container
    var ordered = radioButtons.OrderBy(i => i.TabIndex).ThenBy(i => parent.Controls.GetChildIndex(i)).ToList();  //Sort them like Windows does
    var indexChecked = ordered.IndexOf(radioButtons.Single(i => i.Checked)); //Find the index of the one currently checked
    var indexDesired = (indexChecked + (forward ? 1 : -1)) % ordered.Count;  //This allows you to step forward and loop back to the first RadioButton
    if (indexDesired < 0) indexDesired += ordered.Count;  //Allows you to step backwards to loop to the last RadioButton
    ordered[indexDesired].Checked = true;
} 
```

然后，从可以访问您的特定 RadioButton 的任何地方，您可以检查其集合中的下一个或上一个 RadioButton。像这样：

```
radioButton1.CheckNextInGroup(true); //Checks the next one in the collection
radioButton1.CheckNextInGroup(false); //Checks the previous one in the collection 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T22:20:47.577

`RadioButton`每个容器只能检查一个。这就是单选按钮的意义所在。如果您想使用 a`CheckBox`代替，您可以使用以下代码：

```
foreach (CheckBox control in Controls.OfType<CheckBox>())
{
    control.Checked = true;
} 
```

如果你想按顺序检查控件，你可以这样做

```
new Thread(() =>
{
    foreach (CheckBox control in Controls.OfType<CheckBox>())
    {
        control.BeginInvoke((MethodInvoker) (() => control.Checked = true));
        Thread.Sleep(500);
    }
}).Start(); 
```

再次阅读您的原始帖子，我正在努力理解您的意思。您能否详细说明，以便我更新我的回复？

# matlab - 带空格的 Matlab 路径名...解决方法？

> ID：14347817
> 
> 赞同：6
> 
> 时间：2013-01-15T22:08:07.597
> 
> 标签：matlab

我有很多带有空格的文件夹名称，即“red dog”->“c:\red dog\”

```
files = dir
str = ['cd ', files(3).name]
eval(str) 
```

执行返回错误do到空间：

```
>> eval(str)
Error using cd
Too many input arguments. 
```

* * *

解决方法是什么？... thx

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T22:30:02.293

你有使用的理由`eval`吗？试一试

```
cd(files(3).name); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T22:35:16.673

尝试使用`cd(files(3).name)`而不是`cd files(3).name`（这是，`cd`使用括号调用函数）。

如果出于某种原因您想`cd`用作命令而不是函数（`cd myPath`而不是`cd(myPath)`），则必须将字符串括在单引号中。这样，您的示例将如下所示：

```
str = ['cd ''', files(3).name '''']
eval(str) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:13:59.300

不确定 matlab，但您是否尝试在文件名周围加上引号？

```
files = dir
str = ['cd ''', files(3).name, '''']
eval(str) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T22:30:02.377

如果您安装了 RTW，则可以使用

```
cd( rtw_alt_pathname( files(3).name ) ) 
```

`rtw_alt_pathname`以 8.3 格式返回路径

# android - Android 通讯录提供商帐户干扰其他帐户

> ID：14347823
> 
> 赞同：0
> 
> 时间：2013-01-15T22:08:41.947
> 
> 标签：android, contacts, android-contacts, contactscontract, android-syncadapter

我已经建立了一个联系人提供程序，它正在从我们的私人服务器同步联系人。在我删除帐户之前一切正常。这就是问题发生的地方。例如：如果从我的联系人提供商帐户中添加了一个包含 Google 邮件的联系人，并且如果我删除了该帐户，则该联系人仍然只包含电子邮件，并且它现在与我的 Google 帐户同步。当我删除我的帐户时，为什么会发生这种情况以及如何解决它，它添加的每个联系人都会被完全删除。

**编辑：** Google 帐户不会发生这种情况。WhatsApp帐户正在发生这种情况。

# hadoop - Hadoop任务日志问题

> ID：14347827
> 
> 赞同：0
> 
> 时间：2013-01-15T22:08:55.507
> 
> 标签：hadoop

我想使用 Hadoop Web 界面浏览任务日志。我可以导航到提供“最后 4KB、最后 8KB、全部”选项的位置。但是，如果我单击其中之一，URL 会变得混乱，并且运行 hadoop 的机器的主机名将替换为“localhost”

具体来说，URL 如下所示：

```
http://localhost:50060/tasklog?attemptid=attempt_201301152149_0001_m_000000_0&start=-4097 
```

但它应该是这样的：

```
http://my.machine.com:50060/tasklog?attemptid=attempt_201301152149_0001_m_000000_0&start=-4097 
```

请注意，如果我使用 my.machine.com 在 localhost 上手动键入，则可以按预期浏览任务日志。

我查看了我所有的配置文件，无法弄清楚为什么这件事不能正常工作。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T08:35:47.343

要通过单击“4KB”、“8KB”或“All”通过 Web UI 浏览任务日志，您必须将相应的机器添加到 /etc/hosts 文件中。要浏览“my.machine.com”的任务日志，您必须将“my.machine.com”添加到/etc/hosts 文件中。

# ruby-on-rails-3 - has_many :through NameError: uninitialized constant

> ID：14347828
> 
> 赞同：10
> 
> 时间：2013-01-15T22:08:57.703
> 
> 标签：ruby-on-rails-3, console, has-many-through

我只想制作一个小连接表，最终存储关于该连接的额外信息（这就是我不使用 HABTM 的原因）。从关联的 Rails 文档中，我创建了以下模型：

```
class Physician < ActiveRecord::Base
  has_many :appointments
  has_many :patients, :through => :appointments
end

class Patient < ActiveRecord::Base
  has_many :appointments
  has_many :physicians, :through => :appointments
end

class Appointment < ActiveRecord::Base
  belongs_to :physicians
  belongs_to :patients
end 
```

我的架构如下所示：

```
ActiveRecord::Schema.define(:version => 20130115211859) do

  create_table "appointments", :force => true do |t|
    t.datetime "date"
    t.datetime "created_at",   :null => false
    t.datetime "updated_at",   :null => false
    t.integer  "patient_id"
    t.integer  "physician_id"
  end

  create_table "patients", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "physicians", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

end 
```

当我在控制台中并创建一个医生和患者实例时：

```
@patient = Patient.create!
@physician = Physician.create! 
```

并尝试将一个与另一个相关联

```
@physician.patients << @patient 
```

我明白了

```
NameError: uninitialized constant Physician::Patients 
```

之前有人问过有关此示例的问题，但没有一个问题能解决我的情况。有任何想法吗？

谢谢，尼尔，Rails 新手。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T22:24:52.180

模型中的`belongs_to`调用`Appointment`应该采用单数形式，而不是复数形式：

```
class Appointment < ActiveRecord::Base
  belongs_to :physician
  belongs_to :patient
end 
```

# git - 如何使用 Git 迁移多个版本的代码？

> ID：14347831
> 
> 赞同：0
> 
> 时间：2013-01-15T22:09:31.663
> 
> 标签：git, github, bitbucket

由于缺乏相关知识，我没有使用任何类型的版本控制，但刚开始使用 Git，所以我知道`git add {filename}, git commit -u {filename}, git push origin master`.

作为在 Git 之前跟踪更改的一种方式，我为我处理的每个文件制作了多个副本，例如原始文件可能已命名为 abc.php，第一个更改可能已命名为 abc_20130101.php，第二个更改可能命名为 abc_20130102。 php等

看到这些是一段时间内的变化并且我有多个文件，将这些迁移到托管服务的最佳方法是 GitHub、BitBucket 等。

我是否创建单个存储库并克隆存储库？那么我想避免将文件作为单个推送提交，因为它们实际上是不同的版本？最好的方法是什么？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:44:59.687

David Culp 的回答很棒，而且我打字的速度有点慢。无论如何，我会把我的留在这里。

我的建议是保留旧文件原样，并将它们保存为档案。从今天开始使用 Git，让它跟踪您的文件的新更改。

如果您真的想将您的开发历史记录到 Git 中，我会使用全新的存储库执行以下操作：

*   将您最旧版本的 abc.php 复制到存储库中，确保它被命名为 abc.php（即从文件名中删除日期），并且对于具有相同日期的任何其他文件也是如此。
*   做一个`git add .`
*   做一个`git commit -m "Files from 2013-01-01"`
*   按时间顺序对每个版本重复
*   推送到 GitHub/BitBucket

请务必最后添加当前版本。

注意：如果您是自己工作，则不需要 GitHub / BitBucket 等在线服务。Git 可以很好地与您 PC 上的独立存储库配合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:27:46.300

如果您希望 git 存储库反映项目的历史，则需要付出一些努力。

基本步骤是获取所有具有日期的文件（存档文件）的列表。使用它来创建“修订”列表，然后执行以下操作：

```
for each revision
    recreate the project as it was in that state (renaming files so they don't have dates)
    copy the files to the repository
    add files to index
    commit files to repository 
```

最后你会得到一系列代表项目开发的提交。这可能需要大量工作，具体取决于您最终进行了多少次修订。

您可能能够编写大部分工作的脚本，但最终可能更容易手动完成。

但是，这将导致存储库在文件更改的每个日期都有提交。通过组合与单个项目功能相关的“修订”，可以减少提交的数量。

# java - Java Web 应用程序中的动态/通用/自定义表单

> ID：14347832
> 
> 赞同：1
> 
> 时间：2013-01-15T22:09:32.397
> 
> 标签：java, struts

在我们的制造过程中，我们有许多不同的表格需要工人填写。我们正在尝试使它们自动化。我不想编写每个表单，而是希望它让工作人员定义所有这些表单，然后我们在现有的 Web 应用程序中根据需要显示/渲染它们。我可以自己编写所有代码，但我不介意找到一些已经这样做的库。这是一个使用 Struts 的 Java Web 应用程序。有什么建议么？

# python - 打印语句正确吗？

> ID：14347836
> 
> 赞同：0
> 
> 时间：2013-01-15T22:09:46.470
> 
> 标签：python, python-2.7

我必须添加 str(iterMul(a,b)) 才能获得我想要的。这是正确的方法吗？

```
def iterMul(a,b):
    result = 0
    while b > 0:
        result += a
        b -=1
    return result
a=int(raw_input('Enter an integer: '))
print('')
b=int(raw_input('Enter an integer: '))
print('')
print (str(a) + ' times '+str(b)+' is equal to '+ str(iterMul(a,b))) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:11:20.833

改用[字符串格式](http://docs.python.org/2/library/string.html#format-string-syntax)：

```
print '{0} times {1} is equal to {2}'.format(a, b, iterMul(a,b)) 
```

字符串格式在插入值时会自动将整数转换为字符串，并且比`print value, ' some text ', othervalue, ' more text and ', thirdvalue`.

# javascript - 在 jwplayer 5 中单击播放按钮时如何获取警报消息？

> ID：14347839
> 
> 赞同：0
> 
> 时间：2013-01-15T22:09:58.670
> 
> 标签：javascript, jwplayer

我正在研究要放置用于客户视频跟踪的omniture站点催化剂变量。我的问题是，当我们点击 jwplayer 播放按钮时，我想发出警告消息。任何人都可以请告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:23:54.197

这是一个快速示例！

```
<html>
<head>
<title>Test Page</title>
</head>
<body>
<script type="text/javascript" src="http://player.longtailvideo.com/jwplayer.js"></script>
<div id="player"></div>
<script type="text/javascript">
    jwplayer("player").setup({
            file: "http://www.longtailvideo.com/jw/upload/bunny.mp4",
            image: "http://www.longtailvideo.com/jw/upload/bunny.jpg",
            flashplayer: "http://player.longtailvideo.com/player.swf",
            height: 300,
            width: 465,
            events:{
                onPlay: function(event) {
                    alert('Playing!');
                }
            }
    });
</script>
</body>
</html> 
```

# ruby - 是否有解压缩 CSS 的 Ruby Gem？

> ID：14347844
> 
> 赞同：2
> 
> 时间：2013-01-15T22:10:14.207
> 
> 标签：ruby, gem, minify, compression

发现自己处于需要通过中间件解压缩 CSS 的情况..(IE *cough *cough)

我用谷歌搜索过，RubyGem'd，Github'd 并没有找到任何东西

似乎解决方案是单程票。他们**压缩**（缩小）但**不解压缩**（取消缩小）

我希望我错了，有什么可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:52:10.063

您不太可能真的想在每个 IE 请求上解压缩资产。*想象一下为每个*请求启动一个 JS 运行时只是为了减少编译。相反，请考虑存储未压缩且可以静态提供的资产的第二个副本。

您可能想确定编译资产会导致 IE 出现问题的原因。这可能是压缩软件中的错误，或者您可能需要更改设置或更改为不同的压缩器。或者更好的是，这可能表明您的 CSS 中有语法错误，其他浏览器在压缩时会原谅您，而 IE 则不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:47:00.343

可能值得解释一下您在 IE 上遇到的具体问题，然后再讨论解决该问题。

# twitter-bootstrap - bootstrap scrollspy 可以与 btn-group 一起使用吗？

> ID：14347848
> 
> 赞同：0
> 
> 时间：2013-01-15T22:10:21.213
> 
> 标签：twitter-bootstrap

我想在 Bootstrap 中使用 scrollspy 功能，但我宁愿使用按钮和 btn-group 按钮，也不愿使用导航栏。是的，我可能会重新设置导航栏的样式，使其看起来像一个按钮组，但是，在我这样做之前，似乎值得检查一下 scrollspy 是否可以与按钮组一起使用。（我试过了，但没有成功，但这并不意味着我有正确的方法。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:42:16.783

这里有一些让你开始的东西：http: [//jsfiddle.net/panchroma/fcn78/](http://jsfiddle.net/panchroma/fcn78/)

我采用了一个标准的 btn 组，并添加了这些额外的属性：

```
 <div class="btn-group affix-top"  data-spy="affix" data-offset-top="10"> 
```

其中 data-offset-top 是在附加按钮组之前需要滚动的距离。

希望这可以帮助。

# objective-c - 学习 Objective-C 作为第一语言

> ID：14347849
> 
> 赞同：-1
> 
> 时间：2013-01-15T22:10:26.957
> 
> 标签：objective-c

您认为将 Objective-C 作为第一语言/库学习是一种好习惯，还是我应该稍微退后一步，开始学习另一种 C 类型语言？

我已经自学了大约 4 个月的 Objective-C。我非常喜欢它，我的朋友和家人也支持它。

那么，这里的人们如何看待 Objective-C 作为第一门学习语言呢？继续我的 Objective-C 工作值得吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:20:38.603

我认为 Objective-C 可以成为很好的第一语言，特别是如果你对做移动编程感兴趣的话。我不一定建议切换到学习不同的语言，但如果你真的想学习如何编程，我建议你学习尽可能多的语言。许多不同的语言对问题、不同的好处和不同的文化有不同的思考方式，并且让自己接触其他语言的不同做事方式将使你在长期使用任何语言时变得更好。

# c# - 返回一个只读并发列表

> ID：14347852
> 
> 赞同：5
> 
> 时间：2013-01-15T22:10:35.893
> 
> 标签：c#, .net

我想知道，假设我有一个 ConcurrentBag 封装在这样的对象中

```
class Package
{
   private ConcurrentBag<string> myList;
   public string title {get; private set;}
   public string description {get; private set;}

   public Package(string title,string description)
   {
       myList = new ConcurrentBag<string>();
       this.title = title;
       this.description = description;
   }

   public override string ToString()
   {
       return title + " " + description;
   }
} 
```

我将如何返回我的 ConcurrentBag 的只读版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:48:40.320

你为什么不返回一个克隆？我知道这并不理想，否则您将不得不自己定制`ConcurentBagReadOnly`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-15T22:26:18.367

由于您正在寻找接近仅提供属性的[IReadOnlyCollection](http://msdn.microsoft.com/en-us/library/hh881542.aspx)`Count`的功能，因此我会将其公开为`IEnumerable<string>`并依赖 LINQ 扩展来查询它。

# java - 按空格、连字符和“ab cd”分割字符串

> ID：14347853
> 
> 赞同：2
> 
> 时间：2013-01-15T22:10:42.510
> 
> 标签：java, regex, split, whitespace, hyphen

```
c = "abc ab cd-abc-abc";

 String[] cinput = c.split("(?<=[ ])|(-)|(?<=ab cd)|(?=ab cd)"); 
```

我想像这样拆分字符串 c （顺序也很重要）：

```
 cinput[0] = "abc " (notice the space)
 cinput[1] = "ab cd"
 cinput[2] = "abc"
 cinput[3] = "abc" 
```

另一个例子：

c = "abc-abc abc ab cd-ab-cd";

```
 cinput[0] = "abc" 
 cinput[1] = "abc "
 cinput[2] = "abc "
 cinput[3] = "ab cd"
 cinput[4] = "ab"
 cinput[5] = "cd" 
```

分隔符“”、“-”和“ab cd”。我这样做的方式“ab cd”变成了两个数组元素“ab”和“cd”，但我希望它们在一个元素中在一起。

关于如何解决这个问题以及我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:33:38.760

由于您的分隔符文本中有一个空格，以及作为分隔符之一的空格，您可能需要使用额外的逻辑分多个步骤进行拆分

1）拆分“-”将产生：{“abc ab cd”，“adc”，“abc”}
2）检查您的文本字段
如果（text[].contains（“ab cd”））
- 删除“ ab cd" 从文本中保存
=> {"abc", "abc", "abc"} 和 {"ab cd"}

3）在空白处拆分未保存的文本并组合您的两组

# chromium-embedded - CEF 禁用地址栏

> ID：14347855
> 
> 赞同：1
> 
> 时间：2013-01-15T22:10:59.057
> 
> 标签：chromium-embedded

我正在使用 CEF3 并且想要硬编码并禁用浏览器的地址栏。我没有在代码库中找到合适的位置来做同样的事情。任何指针都会有很大帮助。通过 C++ 或 Javascript 方法都会有所帮助。

谢谢，阿什温

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T06:40:47.403

您可以使用二进制文件构建 CEF 应用程序，就像 WIKI 一样。请参阅 github 项目以获取参考 [https://github.com/acristoffers/CEF3SimpleSample](https://github.com/acristoffers/CEF3SimpleSample)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:09:23.597

你在用[cefclient](http://code.google.com/p/chromiumembedded/source/browse/#svn%2Ftrunk%2Fcef3%2Ftests%2Fcefclient)吗？我认为在标准版本的cefclient 中没有一种干净的方法可以将其关闭。

但是，在[cefclient 的括号外壳分支中，](https://github.com/adobe/brackets-shell/tree/master/appshell)您`#define`可以使用它来干净地打开/关闭它。只需搜索对`SHOW_TOOLBAR_UI`（仅在四个文件中使用）的引用。我猜想手动将这些差异应用回 cefclient 的干净副本不会太难（您可能不想按原样使用括号外壳分叉 - 它不是很通用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T17:54:42.733

我意识到这个问题很老，但我有同样的问题并找到了解决方案。

在`cefclient`示例中，地址栏是在函数内绘制的`RootWindowGtk::CreateRootWindow`。

删除`gtk_container_add`添加地址栏对应的函数调用，`GtkToolItem*`地址栏就消失了。

# javascript - jQuery setInterval 不循环

> ID：14347858
> 
> 赞同：0
> 
> 时间：2013-01-15T22:11:09.357
> 
> 标签：javascript, jquery, loops, setinterval

我有一个要循环的函数。我发现最简单的方法是使用 setInterval。当我尝试这个时，该功能只运行一次。请告知我哪里出错了。干杯

```
function empMove() { $('.emp-wrap').css('margin-top', '-100px')};

setInterval(empMove, 2000); 
```

我有一个包含多行的 div，我想一次只显示一个，因此我每次都在减少 margin-top。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T22:13:51.670

当前代码将上边距设置为 -100px。尝试

`function empMove() { $('.emp-wrap').css('margin-top', '`**`-=100`**`')};`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:22:43.953

我强烈推荐**jQuery 计时插件 (2KB)** ( [GitHub Repository](https://github.com/creativecouple/jquery-timing) , [Docs](http://creativecouple.github.com/jquery-timing/) )。

它提供了易于使用的循环动画等等。看一看：

```
function empMove() { 

    $('.emp-wrap').css('margin-top', '-=100px').repeat().wait(2000);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:40:36.713

```
function displayOnly() {
    var initHeight = $('.wrapper').height();
    $('.wrapper').height(initHeight);
    $('p').not('.read').fadeOut(2000, function () {
        if ($(this).is(':last-child')) {
            $('.wrapper').animate({
                height: $('.inner').height()
            }, 2000);
        }
    });
}

$("button").click(displayOnly); 
```

[在小提琴上](http://jsfiddle.net/hugolpz/7gW5w/4/)行动

# java - 解析 XML 时出错：文档元素后出现垃圾 - 文档中根元素之后的标记必须格式正确

> ID：14347859
> 
> 赞同：2
> 
> 时间：2013-01-15T22:11:12.677
> 
> 标签：java, android, xml, avd

错误：在此行发现多个注释： - 错误：解析 XML 时出错：文档元素后出现垃圾 - 文档中根元素之后的标记必须格式正确。

```
<?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android"></menu>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <EditText
            android:id="@+id/editText"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:inputType="text|textMultiLine"
            android:gravity="top|left">
        </EditText>
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:14:56.647

您有多个根元素：两者`<menu>`和`<LinearLayout>`在文档中都是松散的，并且不包含在其他一些 elelement 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:16:31.397

摆脱空菜单标签：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <EditText
            android:id="@+id/editText"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:inputType="text|textMultiLine"
            android:gravity="top|left">
        </EditText>
    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-15T22:18:51.013

所以你不能将它与Linearlayout一起使用。

# android - 使用带有嵌入式主机控制器的 USB 加密狗进行蓝牙配对

> ID：14347860
> 
> 赞同：3
> 
> 时间：2013-01-15T22:11:14.733
> 
> 标签：android, bluetooth, bluetooth-lowenergy

我正在尝试创建一个 Android 和 iOS 应用程序，该应用程序利用蓝牙来检测与对象的接近程度并让应用程序执行一些操作。我唯一需要做的就是配对，这样我的应用程序就可以知道你在源附近，而不是实际执行任何额外的通信或让蓝牙接收器与任何硬件通信。

当插入到香烟 USB 车载适配器时，我能够闪烁 BLED112 USB 加密狗 (BLE) 并使其与 iOS SDK 一起工作，但找不到允许相同功能的等效经典蓝牙加密狗。有谁知道一个小型经典加密狗，它要么包含一个虚拟主机控制器，要么允许您在没有主机控制器的情况下配对，从而实现我想要实现的功能？我需要支持许多 Android 手机的经典蓝牙才能工作，因为 BLE 在 Android 上没有得到很好的支持。

先感谢您

# ios - iOS是否有“公平”的同步机制

> ID：14347862
> 
> 赞同：1
> 
> 时间：2013-01-15T22:11:23.003
> 
> 标签：ios, synchronization

我有一个应用程序倾向于在后台线程中执行大量数据库活动（下载大型数据库更新），而且这个过程经常“饿死” UI 线程——我知道数据库是不定期发布的，但是`@synchronized`使用的机制不是“公平的”，并且允许后台线程立即重新获取锁。

是否有另一种相当有效且得到良好支持（并且不太难改造）（并且“公平”）的机制可以代替使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:37:25.283

我无法重现您的问题。在这里，我有一个简单的程序（尽管在 mac 上运行），基于`@synchronized`pthreads，它清楚地表明它`@synchronized`按预期工作，假设你释放你的锁：

```
void *backgroundThread(void *data)
{
    while (true)
    {
        @synchronized (globalMutex)
        {
            usleep(USEC_PER_SEC / 3);
        }
    }

    return NULL;
}

int main()
{
    pthread_t bgThread = NULL;
    globalMutex = [NSObject new];

    pthread_create(&bgThread, NULL, &backgroundThread, NULL);

    NSTimeInterval lastTime = [[NSDate date] timeIntervalSinceReferenceDate];
    while (true)
    {
        @synchronized (globalMutex)
        {
            NSTimeInterval elapsed = [[NSDate date] timeIntervalSinceReferenceDate] - lastTime;
            NSLog(@"Main Thread 'came up for air' after %lf seconds", elapsed);

            lastTime += elapsed;
        }
    }
} 
```

输出：

```
TestProj[1494:303] 主线程在 0.000015 秒后“出现”
TestProj[1494:303] 主线程在 0.003136 秒后“出现”
TestProj[1494:303] 主线程在 0.000637 秒后“出现”
TestProj[1494:303] 主线程在 0.000610 秒后“出现”
TestProj[1494:303] 主线程在 0.000697 秒后“出现”
TestProj[1494:303] 主线程在 0.000576 秒后“出现”
TestProj[1494:303] 主线程在 0.000571 秒后“出现”
TestProj[1494:303] 主线程在 0.337343 秒后“出现”
TestProj[1494:303] 主线程在 0.335533 秒后“出现”
TestProj[1494:303] 主线程在 0.335253 秒后“出现”
TestProj[1494:303] 主线程在 0.335309 秒后“出现”
TestProj[1494:303] 主线程在 0.335367 秒后“出现”
TestProj[1494:303] 主线程在 0.335223 秒后“出现”
TestProj[1494:303] 主线程在 0.335754 秒后“出现”
TestProj[1494:303] 主线程在 0.335271 秒后“出现”
TestProj[1494:303] 主线程在 0.335211 秒后“出现”
TestProj[1494:303] 主线程在 0.334555 秒后“出现”
TestProj[1494:303] 主线程在 0.335245 秒后“出现”
TestProj[1494:303] 主线程在 0.335203 秒后“出现”
TestProj[1494:303] 主线程在 0.335262 秒后“出现”
TestProj[1494:303] 主线程在 0.335252 秒后“出现”
TestProj[1494:303] 主线程在 0.335667 秒后“出现”
TestProj[1494:303] 主线程在 0.335278 秒后“出现”
TestProj[1494:303] 主线程在 0.335309 秒后“出现”

```

因此，除非您没有正确释放锁，否则这`@synchronized`正是您在这种情况下所需要的。请详细说明您的同步代码实际上是什么样的，以便我们为您提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:16:43.107

据我了解，@synchronized 是 [一种创建互斥锁的便捷方式](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html#//apple_ref/doc/uid/10000057i-CH8-SW16)。它不必是“公平的”。

我建议阅读有关[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)的信息。它有很多有趣的东西可以将所有需要完成的工作放在队列中（这应该提供更好的资源共享）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:28:53.973

如果您担心阻塞您的 UI 线程，您可以为您的数据库操作创建一个串行调度队列。这将使您能够从 UI 线程排队一些 DB 操作，而不会阻塞它（工作块将被复制到堆中，存储到轮到它处理为止）。

例如，从 UI 线程，您可以：

```
database_queue = dispatch_queue_create("com.example.queue", NULL);

dispatch_async(database_queue, ^{
    // Operations on the DB here
});
// The UI will continue responding immediately after here... 
```

队列将一次处理每个块，提供您需要的同步 - 您只需要确保所有数据库操作都从该队列完成。

如果您确实需要等到工作确实完成，您可以在这些特定情况下将异步调用换成同步调用：

```
dispatch_sync(database_queue, ^{
    ....
    .... 
```

# php - 绕过 Youtube 对在第三方网站上嵌入受版权保护的视频的限制

> ID：14347863
> 
> 赞同：-5
> 
> 时间：2013-01-15T22:11:28.103
> 
> 标签：php, javascript, youtube, youtube-api

将 Youtube 视频嵌入到我的网站时，我有时会遇到此错误：“此视频包含来自 UMG 的内容。它仅限于在某些网站上播放。”

我想绕过这个限制。[http://listentoyoutube.com](http://listentoyoutube.com)之类的网站是如何绕过这些限制的？另外，我将如何将我的网站添加到“在某些网站上播放”的 Youtube 列表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:18:48.377

那些特定的网站将成为 UMG 喜欢的网站——很可能是他们自己的营销和新闻网站。你不会进入那些名单。

如果像 listentoyoutube.com 这样的网站绕过了限制，很可能是通过伪装成普通的 YouTube.com 访问者。这几乎可以肯定违反了 YouTube TOS，我想他们会经常被屏蔽。

# c# - Winforms GUI 控件分布

> ID：14347864
> 
> 赞同：0
> 
> 时间：2013-01-15T22:11:28.107
> 
> 标签：c#, .net, winforms, design-patterns, user-interface

我有一个 winforms 选项卡控件，它有几个选项卡页。在每个标签页控件（文本框、单选按钮等）中都被分组到组框中。这些组框是从上到下排列的，但在某些情况下，一些组框需要可见，而另一些则需要隐藏。每个组框内的控件有时（取决于场景）需要可见，有时需要隐藏。所以我想知道是否有人知道这样做的好方法，如果有的话，也许是某种模式。此外，最好实现一个通用的解决方案来做到这一点。任何 GUI 专家都可以指导我正确的方向吗？

使用 C# 和 dot NET Framework 4.0，WinForms。这是一个桌面应用程序，不是基于 Web 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:32:41.163

您可以在一个类中定义场景，然后添加另一个类，该类将通过读取场景并根据场景放置元素来管理布局。我没有提供详细信息，因为它取决于您想要的具体程度以及您想要实现的行为。最好将小部件放在用户控件中，并让该用户控件与布局管理器进行通信。您可以使用调解器模式或其变体在小部件之间进行协调。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:15:47.323

我通常尝试将相关控件分组到 UserControls 中（即使这意味着在某些控件上加倍）并根据需要将它们添加到表单中或从表单中删除它们。这方面的一个例子可能是支付方式——当用户选择特定的支付方式（信用卡、现金、支票等）时，带有正确元素的 UserControl 将显示在表单的面板中。

管理此类设置时使用的一个很好的模式是[Model-View-Presenter](http://en.wikipedia.org/wiki/Model-view-presenter)，在示例中，所有 UserControl 都可能实现 IPaymentMethod 视图接口并提供更新相应模型的方法。

# vim - 如何在 Vim 命令中使用函数的返回值？

> ID：14347867
> 
> 赞同：10
> 
> 时间：2013-01-15T22:11:35.783
> 
> 标签：vim

我正在尝试做一些听起来超级简单的事情，但由于某种原因它不起作用。命令：

```
:m 10 
```

将当前行移动到第 10 行的正下方，并且

```
:echo line(".") - 2 
```

打印出光标前两行的行号。阅读文档后，我编写了以下命令：

```
:m line(".") - 2 
```

它导致了这个错误：

> M14：地址无效

所以我认为除非我使用`=`符号，否则不会评估函数，所以我尝试了：

```
:m =line(".") - 2 
```

这给了我同样的错误。为了确保空格不是原因，我尝试了：

```
:m =line(".") 
```

这仍然给了我同样的错误！**我在这里做错了什么？**

* * *

我确保它`:m`接受整数并`line()`返回整数。

```
:echo type(5)
0
:echo type(line("."))
0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T22:35:17.137

为了评估表达式并将其传递给 ex-mode 命令，您需要使用该`execute`命令。在您的情况下，这有效：

```
:execute "m" line(".") - 2 
```

您可以将其`execute`视为采用单个变量的函数`"m" line(".") - 2`。该变量被评估，然后在 ex-mode 中作为字符串执行。

如需更多帮助，请参阅`:help execute`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T22:39:46.240

我建议你使用这样的相对地址：

```
:m-2 
```

如需更多帮助，请参阅：

```
:h range 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T23:37:07.747

实际上，您的原始答案几乎是正确的：

```
:m <C-R>=line(".") - 2 
```

本来可以的。其他解决方案也是正确的，但是您应该查看有关表达式寄存器 ( `:h quote_=`) 的 vim 文档，我相信您会发现一些有趣的东西！

# c - 空闲哈希表内存

> ID：14347874
> 
> 赞同：0
> 
> 时间：2013-01-15T22:12:15.403
> 
> 标签：c, xcode, memory-management, malloc

我试图在我的程序退出之前释放我的哈希表使用的内存，但是我收到了这个错误：

```
anagram(14510) malloc: *** error for object 0x100103be0: pointer being freed was not allocated 
```

以下是我用来释放表的代码：

```
for(temp=0; temp<NHASH; temp++){

    sp=statetab[temp];

    while (sp!=NULL) {
        test=sp;
        sp=sp->next;
        free(test->word);
        free(test);
    }
} 
```

我不确定为什么会这样，因为它确实正确地释放了这个词。有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-20T03:38:25.657

您的程序要求的大多数资源（当然是数据的内存空间）将在程序退出时自动释放。除非您需要程序中的空间（或者它会在不再需要哈希表后运行很长时间），否则请不要担心。

# ruby-on-rails - Rails - 在对 OpenLDAP 服务器进行身份验证后确定组成员身份

> ID：14347875
> 
> 赞同：3
> 
> 时间：2013-01-15T22:12:31.800
> 
> 标签：ruby-on-rails, authentication, devise, authorization, openldap

我正在维护一个使用 Devise LDAP 进行身份验证的 Rails 应用程序。我正在从 Active Directory 迁移到 OpenLDAP，我已经设置了相同的结构。OpenLdap 是使用`apt-get`软件包安装的，`slapd`并`ldap-utils`安装了 Ubuntu Client 12.04 64 位。

我可以针对 OpenLdap 进行身份验证，但是当我调用

```
Devise::LdapAdapter.get_ldap_entry(email)["memberOf"] 
```

我正在返回一个空数组。在 rails 控制台中，我可以看到返回的 ldap 条目没有“ `memberOf`”条目。

当我从终端查询 ldap 服务器时，我收到以下输出：

```
ldapsearch -H ldapi:/// -x -b "cn=people,dc=example,dc=local" memberOf 

...

# fred fred, people, example.local
dn: cn=fred fred,cn=people,dc=example,dc=local
memberOf: cn=Authorisers,ou=example,dc=example,dc=local
... 
```

有人知道为什么`ldapsearch`可能会向 Devise 返回不同的结果吗？有人知道如何返回 memberOf 属性吗？

提前致谢

与 ldap 身份验证相关的 gem 是（来自 Bundle 的输出）

```
Using devise (2.1.2) 
Using net-ldap (0.2.2) 
Using devise_ldap_authenticatable (0.6.1) 
Using activesupport (3.2.9) 
Using activemodel (3.2.9)  
Using sprockets (2.2.2) 
Using mail (2.4.4)  
Using activerecord (3.2.9) 
Using activeresource (3.2.9) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:17:07.667

a) 您是否尝试使用

设计::LdapAdapter.get_groups（电子邮件）

b) 你看过 /config/ldap.yml

那里有一些配置参数（如 required_groups、require_attribute、check_group_membership）。可能只是配置为忽略 memberOf

您可以在[这里查看](https://github.com/cschiewek/devise_ldap_authenticatable/blob/master/lib/devise_ldap_authenticatable/ldap_adapter.rb)它们是如何使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T06:13:35.827

如果您使用的是设计 ldap 插件，请使用此插件

connection = Devise::LDAP::Connection.new({:login=>"user1"}) connection.in_group?('cn=grp1,--')

如果 user1 存在于 grp1 中，则返回 true

# javascript - Twitter-Bootstrap Scrollspy

> ID：14347878
> 
> 赞同：4
> 
> 时间：2013-01-15T22:12:40.967
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我想在菜单上实现 Twitter-Bootstrap Scrollspy，这样当用户滚动到页面的一部分时，css 类就会改变。这被证明是令人沮丧的。我已经在使用代码中的附加代码，效果很好。

因此，当用户滚动到`#ScrollSpyContent`我想将类更改为的 LI 元素时，从下面的代码`.product_submenu_image`中`.product_submenu_active`。

我怎样才能做到这一点？

（我正在使用jsp，`java`所以它们可能是这里的一些java代码。我试图去掉大部分。）

谢谢。

**HTML：**

```
<!DOCTYPE html>
<html lang="en">   
 <head>
     <link rel="stylesheet" href="/css/bootstrap.css"/>
     <link rel="stylesheet" href="/css/bootstrap-responsive.css"/>
     <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
</head>

    <body> 
        <header></header>
        <div class="row-fluid product_submenu">
            <nav class="span10 offset1">
                <ul class="productmenus">
                    <li><a href="#product_features"><div class="product_submenu_image"><img src="../img/product_computer.png" alt=""/>&nbsp;Product Features</div></a></li>
                    <li><a href="#gettingstarted"><div class="product_submenu_image product_submenu_border"><img src="../img/product_people.png" alt=""/>&nbsp;Getting Started</div></a></li>
                    <li><a href="#product_support"><div class="product_submenu_image product_submenu_border"><img src="../img/product_phone.png" alt=""/>&nbsp;Product Support</div></a></li>
                </ul>
            </nav>  
        </div>
        <div class="container-fluid">
            <nav class="row-fluid" >      
                <ul class="span10 offset1" data-spy="scroll">       
                    <li class="row-fluid" id="product_features"></li> <!-- End Product Features -->
                    <li class="row-fluid" id="gettingstarted"></li> <!-- End Getting Started  -->
                    <li class="row-fluid" id="product_support"></li><!-- End Product support  -->
                </ul>
            </nav>
        </div>        
        <footer></footer>
        <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script src="/js/bootstrap.js"></script>
        <script>
        $(function() {
          var $spy = $('.productmenus');
          $spy.scrollspy({offset: 20});
          $spy.bind("activate", function(e) {
            //e.target is the current <li> element
            var header = $(e.target).find(".product_submenu_image");
            $(header).addClass('active');
          });
        });    
        </script>
     </body>
</html> 
```

**CSS：**

```
.product_submenu_image
{
    background: url('../img/product_tab_default.gif');
    max-height: 100%;
    padding: 18% 0 18% 0;
    border: none;
}

.product_submenu_image.active
{
    background: blue;
    /*background: url('../img/product_tab_selected.gif');*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:16:28.160

所以你需要使用`activate`这里描述的滚动间谍事件：http: [//twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

基本上你需要一些像这样的代码：

```
$(function() {
  var $spy = $('.nav.nav-pills');
  $spy.scrollspy({offset: 20});
  $spy.bind("activate", function(e) {
    // do stuff here when a new section is in view
  });
}); 
```

这是一个工作示例：http: [//jsfiddle.net/hajpoj/f2z6u/3/](http://jsfiddle.net/hajpoj/f2z6u/3/)

请忽略它从底部开始的事实......不确定这是一个无关或相关的错误，但重点是你可以看到激活事件是如何工作的

# r - 使用 R 从 csv 文件创建和合并动物园对象时间序列

> ID：14347880
> 
> 赞同：1
> 
> 时间：2013-01-15T22:12:48.537
> 
> 标签：r, csv, merge, zoo

我在单个目录中有大量 csv 文件。这些文件包含两列，`Date`和`Price`. `filename`of`filename.csv`包含数据系列的唯一标识符。我知道当这些时间序列数据是动物园对象时，可以处理合并数据序列的缺失值。我也明白，在使用 时`na.locf(merge() function`，我可以用最近的观察来填充缺失的值。

我想自动化的过程。

1.  将文件列式日期和价格数据加载`*.csv`到 R 数据框中。
2.  在合并的动物园“时间序列组合”对象中建立每个不同的时间序列，其标识等于它们的每个 s。
3.  使用 . 合并这些动物园对象时间序列`MergedData <- na.locf(merge( ))`。

当然，最终目标是使用该`fPortfolio`软件包。

我使用以下语句创建了`Date,Price`对的数据框。这种方法的问题是我`<filename>`从文件中丢失了时间序列数据的标识符。

```
 result <- lapply(files, function(x) x <- read.csv(x) ) 
```

我知道我可以编写代码来生成执行所有这些步骤所需的 R 语句。我想知道是否有某种方法不需要我这样做。我很难相信其他人不想执行同样的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:51:42.217

试试这个：

```
z <- read.zoo(files, header = TRUE, sep = ",")
z <- na.locf(z) 
```

我假设有一个标题行和类似的行`2000-01-31,23.40`。使用任何`read.zoo`必要的参数来适应您拥有的任何格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:32:52.570

您可以使用`sapply`（保留文件名）进行更好的格式化。这里我会保留`lapply`。

1.  假设您所有的文件都在同一个目录中，您可以使用`list.files`. 对于这样的工作流程非常方便。
2.  我会`read.zoo`用来直接获取动物园对象（避免以后强制）

例如：

```
zoo.objs <- lapply(list.files(path=MY_FILES_DIRECTORY,
                              pattern='^zoo_*.csv',    ## I look for csv files, 
                                                       ##   which names start with zoo_
                              full.names=T),           ## to get full names path+filename
                   read.zoo) 
```

我现在`list.files`再次使用来重命名我的结果

```
 names(zoo.objs) <- list.files(path=MY_FILES_DIRECTORY,
                          pattern='^zoo_*.csv') 
```

# jquery - 隐藏时显示Jquery

> ID：14347885
> 
> 赞同：1
> 
> 时间：2013-01-15T22:13:05.097
> 
> 标签：jquery

我有这个问题正在杀死我;(

我有以下 HTML，所有文本都被 css 隐藏

```
<p><b><a class="titulo" href="#">Title</a></b></p>
<div class='texto'><p>Some text</p></div>

<p><b><a class="titulo" href="#">Title</a></b></p>
<div class='texto'><p>Some text</p></div>

<p><b><a class="titulo" href="#">Title</a></b></p>
<div class='texto'><p>Some text</p></div>

<div class='callToAtion bottomline'>
<a class="btnMeInteresa" href="#">Me interesa</a>
<a href="#">No, gracias</a> 
</div> 
```

我希望仅在隐藏所有 texto 时才显示底线类。我有以下 jquery，但不起作用：

```
$(document).ready(function(){
    $('.titulo').click(function(){
        $($(this).closest('p').next()).slideToggle();

        if ($('.texto:visible').length === 0){
            $('.bottomline').show();
        }
        else {
            $('.bottomline').hide();
        }
        return false;
    })
}); 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:16:50.120

`slideToggle`是一个动画，因此您必须等待它结束才能确定是否可见：

```
$(document).ready(function(){
  $('.titulo').click(function(){
    $(this).closest('p').next().slideToggle(function() {
      if ( $('.texto:visible').length === 0)
      {
          $('.bottomline').show();
      }
      else
      {
          $('.bottomline').hide();
      }
    });     
    return false;
  });
}); 
```

[实例](http://jsbin.com/icezif/1)| [资源](http://jsbin.com/icezif/1/edit)

或者，提前检查：

```
$(document).ready(function(){
  $('.titulo').click(function(){
    var texto = $(this).closest('p').next();
    var targetCount = texto.is(":visible") ? 1 : 0;
    var last = $('.texto:visible').length === targetCount;
    texto.slideToggle();
    if (last)
    {
        $('.bottomline').show();
    }
    else
    {
        $('.bottomline').hide();
    }
    return false;
  });
}); 
```

[实例](http://jsbin.com/icezif/2)| [资源](http://jsbin.com/icezif/2/edit)

从[JohnFx](https://stackoverflow.com/users/30018/johnfx)对这个问题的评论中获得灵感：

示例 1 更新：

```
$(document).ready(function(){
  $('.titulo').click(function(){
    $(this).closest('p').next().slideToggle(function() {
      $('.bottomline').toggle(!$('.texto').is(':visible'));
    });     
    return false;
  });
}); 
```

[实例](http://jsbin.com/icezif/3)| [资源](http://jsbin.com/icezif/3/edit)

示例 2 更新：

```
$(document).ready(function(){
  $('.titulo').click(function(){
    var texto = $(this).closest('p').next();
    var targetCount = texto.is(":visible") ? 1 : 0;
    var last = $('.texto:visible').length === targetCount;
    texto.slideToggle();
    $('.bottomline').toggle(last);
    return false;
  });
}); 
```

[实例](http://jsbin.com/icezif/4)| [资源](http://jsbin.com/icezif/4/edit)

# android - 使用 MergeAdapter 和 BaseAdapter

> ID：14347886
> 
> 赞同：1
> 
> 时间：2013-01-15T22:13:14.183
> 
> 标签：android, baseadapter, commonsware-cwac

我已经使用过 MergeAdapter 并且与 ArrayAdapter 一起工作得非常好，但是当我使用 with 时`LazyAdapter extends BaseAdapter`，它不会在 Logcat 上显示任何错误，并且模拟器不会显示任何 LazyAdapter 内容。

**问题：**

那么可以使用 BaseAdapter 和 MergeAdapter 吗？如果不是，它是我的代码，我应该怎么做？

**列表片段：**

```
public class HomeFragment extends ListFragment{

    private static final String TAG = "URL";
    private MergeAdapter adapter = null;
    private ImageView [] imageView;
    private ViewFlipper flippy;
    private ArrayList<HashMap<String, String>> newsList = new ArrayList<HashMap<String, String>>();
    private NoticiaAdapter nAdapter = null;
    // XML node keys
        static final String KEY_SONG = "news"; // parent node
        static final String KEY_ID = "id";
        static final String KEY_TITLE = "title";
        static final String KEY_TEXT = "text";
        static final String KEY_HOUR = "hour";
        static final String KEY_THUMB_URL = "thumb_url";

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onViewCreated(view, savedInstanceState);

        setRetainInstance(true);

        String[] Url = create();
        new MyAsyncTask(Url).execute();
        nAdapter = new NoticiaAdapter(getActivity(), newsList);
        adapter = new MergeAdapter();
        adapter.addView(buildlabel1());
        adapter.addAdapter(nAdapter);

        setListAdapter(adapter);
        //mergeadapter
    } 
```

**懒惰适配器：**

```
public class NoticiaAdapter extends BaseAdapter {   

    private FragmentActivity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 
    ViewHolder holder = null;

    public final class ViewHolder {
        public TextView title;
        public TextView text;
        public TextView hour;
        public ImageView thumb_image;
        // public Button save_btn;

    }

     public NoticiaAdapter(FragmentActivity fragmentActivity, ArrayList<HashMap<String, String>> d) {
            super();
            this.activity = fragmentActivity;
            this.data = d;
            inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            imageLoader=new ImageLoader(activity.getApplicationContext());
        }

     public int getCount() {       
       return data.size();   
     }   

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return data.get(position);
        }

     public long getItemId(int position) {       
      return position;   
     }   

     @Override
        public void notifyDataSetChanged() {
            super.notifyDataSetChanged();
        }

     public View getView(int position, View convertView, ViewGroup parent) {  
         View vi=convertView;
            if(convertView==null) 

                vi = inflater.inflate(R.layout.news_list_row, null);
            holder = new ViewHolder();
            holder.title = (TextView)vi.findViewById(R.id.txtTitle); // title
            holder.text = (TextView)vi.findViewById(R.id.txtDescription); // artist name
            holder.hour = (TextView)vi.findViewById(R.id.txtHour); // duration
            holder.thumb_image=(ImageView)vi.findViewById(R.id.img_news); // thumb image

            HashMap<String, String> news = new HashMap<String, String>();
            news = data.get(position);

            holder.title.setText(news.get(HomeFragment.KEY_TITLE));
            holder.text.setText(news.get(HomeFragment.KEY_TEXT));
            holder.hour.setText(news.get(HomeFragment.KEY_HOUR));
            imageLoader.DisplayImage(news.get(HomeFragment.KEY_THUMB_URL), holder.thumb_image);

      return vi;   
     }

     public void add(HashMap<String, String> map) {
            // TODO Auto-generated method stub
            data.add(map);
            notifyDataSetChanged();

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:37:28.977

只是为了回答这个问题，我犯了一个错误，我服务器中的 xml 文件拼写错误，所以是的 MergeAdapter 与 BaseAdapter 一起使用。

所以这可能是谁想要使用的示例代码。

感谢 Commonsware 的帮助。

# css - CSS nth-child 用于下拉菜单列表

> ID：14347888
> 
> 赞同：1
> 
> 时间：2013-01-15T22:13:28.473
> 
> 标签：css, html-lists, css-selectors

我有一个带有两个按钮的简单菜单，每个按钮都是一个下拉菜单；每个显示两个子按钮。我希望每个子项都具有不同的背景颜色，正如您从下面的 CSS 中看到的那样。

```
#nav:first-child > li li:first-child {background: yellow;}
#nav:first-child > li li:nth-child(2) {background: red;}
#nav:nth-child(2) > li li:first-child {background: green;}
#nav:nth-child(2) > li li:nth-child(2) {background: blue;} 
```

到目前为止，我的 CSS 仅适用于第一个子按钮；子按钮一为黄色，子按钮二为红色。不幸的是，子按钮三是黄色而不是绿色，子按钮四是红色而不是蓝色。如何更改我的最后两行代码以达到预期的结果？

**请记住，下拉列表是一个嵌套列表。下面的 HTML 示例：

```
<div id="nav">
   <ul>
      <li>link 1
          <ul>
             <li>SUB link 1</li>
             <li>SUB link 2</li>
         </ul>
      </li>
      <li>link 2
         <ul>
             <li>SUB link 3</li>
             <li>SUB link 4</li>
         </ul>
      </li>
   </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:56:04.440

## IE7-8 支持

您最初使用`:nth-child`的是那些浏览器不支持的，所以我可以理解为什么回答的人不关心支持，因为看起来您似乎不关心这种支持。但是，可以使选择器适用于那些。将相邻的兄弟组合器`+`与`:first-child`in 关键点一起使用会产生与`:nth-child(2)`

[**见小提琴。**](http://jsfiddle.net/JDp3j/2/)

```
ul li:first-child > ul li:first-child {background: yellow;}
ul li:first-child > ul li + li {background: red;}
ul li:first-child + li > ul li:first-child {background: green;}
ul li:first-child + li > ul li + li {background: blue;} 
```

## IE6

**如果没有 javascript 或直接在每个元素上放置类，**则无法获得 IE6 支持**`li`，因为 IE6 不支持`:first-child`或`+`. 就个人而言，对于颜色变化，您应该放开 IE6。如果您坚持，并且不想使用 javascript 来获取选择器功能，那么您决定更改 html：**

 **```
<div id="nav">
   <ul>
      <li>link 1
          <ul>
             <li class="one">SUB link 1</li>
             <li class="two">SUB link 2</li>
         </ul>
      </li>
      <li>link 2
         <ul>
             <li class="three">SUB link 3</li>
             <li class="four">SUB link 4</li>
         </ul>
      </li>
   </ul>
</div> 
```

有了这个

```
.one {background: yellow;}
.two {background: red;}
.three {background: green;}
.four {background: blue;} 
```

当然，这适用于*任何*支持 CSS 的浏览器。但这*也不*是我怀疑你想要做的。因此，再次将 IE6 留给它自己，忘记在其上适应颜色变化或使用 javascript（可能通过[Modernizr](http://modernizr.com/)、[Jquery](http://jquery.com/)、[MooTools](http://mootools.net/)等）来做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T22:35:48.403

`first-child`和`nth-child`应该应用于作为 SUB 链接的标签`li`。

```
ul li:first-child > ul li:first-child {background: yellow;}
ul li:first-child > ul li:nth-child(2) {background: red;}
ul li:nth-child(2) > ul li:first-child {background: green;}
ul li:nth-child(2) > ul li:nth-child(2) {background: blue;} 
```

这将产生预期的结果：

[http://jsfiddle.net/JDp3j/](http://jsfiddle.net/JDp3j/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:30:52.640

哦..这是..好东西.. [http://selectivizr.com/](http://selectivizr.com/)**

# datetime - 如何在 Salesforce Visualforce、Apex 中解析时间？

> ID：14347890
> 
> 赞同：0
> 
> 时间：2013-01-15T22:13:39.660
> 
> 标签：datetime, salesforce, visualforce

我对visualforce / apex编程很陌生，并且有点卡在apex中解析~~当前~~时间和时间函数。

基本上我想弄清楚当前时间是否在我给定的时间范围内。我如何用顶级语言写这个？

```
public String isWorkhours;
public String getIsWorkhours() { 
    Datetime current_time = *(get current time)*
    Datetime start_time = *(7:00 am)*
    Datetime end_time = *(7:00 pm)*

    if ((current_time >= start_time) && (current_time <= end_time)) {
        isWorkhours= 'yes';
    } else {
        isWorkhours= 'no';
    }
    return isWorkhours;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:09:45.007

首先 - 检查您是否可以使用营业时间（标准对象）来配置 SF，而不是手动编写类似的功能。只需查看您的在线帮助即可。

2 个日期时间对象的比较示例：http: [//www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_businesshours.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_businesshours.htm)

其次 - 阅读[Time 类的参考](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_time.htm)。像这样的东西？

```
Time start = Time.newInstance(7,0,0,0), stop = Time.newInstance(19,0,0,0);

DateTime now = System.now(); // or DateTime.now();

System.debug(now.time() > start && now.time() < stop); 
```

# c++ - 在 C++ 中的类型转换期间自动舍入 a

> ID：14347891
> 
> 赞同：1
> 
> 时间：2013-01-15T22:13:40.267
> 
> 标签：c++, casting, type-conversion

我做了这样的事情

```
long double n;

cin >> n;

n = n * 10000;

long long int temp = (long long) n; 
```

现在当我尝试打印 temp 时，在某些测试用例（如 2.36）中会出现问题

对于 2.36，temp 的值应该是 23600，但是 temp 的值是 23599

请有人帮我解决这个问题已经有4个错误的答案了..小问题

为了简化..我的代码是这样的

```
int main()

{

int t;

for(scanf("%d", &t); t-- ;) {

    float n;
    scanf("%f", &n);
    n *= 10000;
    long int as = (long int) n;
   cout << "\nas : " << as << " n : " << n << endl;
    long  a, b;
    a = as;
    b = 10000;
    while(a%b != 0) {
        long  temp = a % b;
        a = b;
        b = temp;
    }
    long  factor = b;
    cout << (10000/factor) << endl;
}
return 0; 
```

}

这个程序的目的是……我得到了一个小数点后最多 4 位的数字。那是击球手的平均得分，所以我们必须找到他应该打的最少比赛数才能得到这个分数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:20:14.047

这是因为浮点数在内部表示的方式。您应该在执行截断之前将它们**四舍五入。**

执行 a`floor(n+0.5)`或 a`ceil(x-0.5)`将正确地舍入数字。

**编辑：**

由于您的截断步骤本身就是一个 floor(..) 操作，因此您应该`n = n * 10000 + 0.5`按照@Mooing Duck 的说明进行操作。

（[**例**](http://ideone.com/vBnXO7)）

# php - 使用 PHP 更改 Jquery 菜单颜色

> ID：14347893
> 
> 赞同：-3
> 
> 时间：2013-01-15T22:13:50.003
> 
> 标签：php, jquery, menu, colors

我想在每次按下链接时应用一种新颜色的效果...我相信这可以使用 jquery 函数来完成，但是我的链接没有链接到任何只是 som PHP 所以我不能让它工作但在这里是我想做的：

```
Make this: http://jsfiddle.net/wD6C6/

Like this: http://jsfiddle.net/cnMdb/31/ 
```

每次我按下链接时，它们都会将颜色更改为例如蓝色。

希望你们能帮助我解决这个棘手的问题，因为我的链接是一些 php 而不仅仅是一些 # :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T05:45:11.087

不确定我是否理解您的问题，但是...

基于：

```
<div id="foo">
   <a href="http://www.google.com" target="_blank">Click</a>
   <a href="http://www.stackoverflow.com"  target="_blank">Click</a>
</div> 
```

并且链接是否指向php或由php创建应该有所不同，您可以这样做：

```
$(function(){
  $("#foo a").click(function(){
    var r=Math.floor(Math.random()*256-1);
    var g=Math.floor(Math.random()*256-1);
    var b=Math.floor(Math.random()*256-1);
    rgb = "rgb(" + [r,b,g].toString() + ")";
    $(this).css("color", rgb);
  });
}); 
```

这是一个可以玩的[小提琴。](http://jsfiddle.net/kentcoast/6LYZx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:22:11.263

您应该`onclick`向链接添加一个事件，以调用 javascript 函数来更改链接的背景颜色，并`target="_blank"`在新选项卡中打开链接，以便用户可以看到单击链接的更改的背景颜色。

或者您可以使用 Ajax 调用 php 页面（我猜您的意思是说“我的链接是指向一些 php 而不仅仅是一些 #”），然后将其加载`responseText`到当前页面的一部分，以便您在总体设计可见。

但是，如果这不是您要寻找的答案，那么您的问题确实需要更多解释。

# sql - How can define linked server to be accessible from every username?

> ID：14347901
> 
> 赞同：0
> 
> 时间：2013-01-15T22:14:26.677
> 
> 标签：sql, sql-server, sql-server-2008, tsql, linked-server

I have a view in sql server 2008 that selects from a linked server.

I am able to select from the view only if I open SSMS `as administrator` .

If I do not open SSMS as admin and try to select from the view, I get the error `unspecified error`

Here's my linked server:

```
use master
go
EXEC sp_AddLinkedServer @server     = 'SectionA', 
                        @srvproduct = '',
                        @provider   = 'Microsoft.ACE.OLEDB.12.0', 
                        @datasrc    = 'C:\SectionAReport\', 
                        @provstr    = 'Text' 
```

How can I allow ALL USERS to select from this view?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:00:05.643

With "[sp_addlinkedsrvlogin](http://msdn.microsoft.com/en-gb/library/ms189811.aspx)" you should be able to set the remote permissions.

Specifically, try this

```
EXEC sp_addlinkedsrvlogin @rmtsrvname = 'SectionA'
     , @useself = 'FALSE'
     , @locallogin = NULL -- all local users
     , @rmtuser = 'whatevername'
     , @rmtpassword = 'whateverpassword' 
```

# facebook - 似乎无法为现有的 facebook 粉丝页面获取有效的 RSS 提要

> ID：14347903
> 
> 赞同：0
> 
> 时间：2013-01-15T22:14:46.553
> 
> 标签：facebook, rss

我需要做一些额外的事情来获取“粉丝页面”的 RSS 吗？重复一遍，这不是个人页面，它是一个“页面”，类似于 [example] [https://www.facebook.com/georgehtakei](https://www.facebook.com/georgehtakei)是一个页面而不是个人登录。

我正在关注数以千计的示例来获取 facebook 粉丝页面的 RSS url，即使使用正确的 ID，我也会收到以下错误....（出于隐私目的，我已经审查了各种 id）

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:activity="http://activitystrea.ms/spec/1.0/" xmlns:fb="http://www.facebook.com" xmlns:access="http://www.bloglines.com/about/specs/fac-1.0">
  <access:restriction relationship="allow" />
  <id>http://www.facebook.com/feeds/syndication_error.php#8fda6ce86f0e4d375d0eb33d8df4c50e</id>
  <generator uri="http://www.facebook.com/">Facebook Syndication</generator>
  <!-- SUDA was here.  [Censored] -->
  <title></title>
  <link href="" />
  <link rel="self" href="https://www.facebook.com/feeds/page.php?format=atom10&amp;id=[censored]" />
  <updated>2013-01-15T13:57:30-08:00</updated>
  <icon>http://www.facebook.com/favicon.ico</icon>
  <logo>https://fbstatic-a.akamaihd.net/rsrc.php/v2/yk/r/GcJ2sQocxsN.png</logo>
  <entry>
    <title><![CDATA[Facebook Syndication Error]]></title>
    <id>http://www.facebook.com/feeds/syndication_error.php#8fda6ce86f0e4d375d0eb33d8df4c50e_</id>
    <link rel="alternate" type="text/html" href="http://www.facebook.com/feeds/syndication_error.php#8fda6ce86f0e4d375d0eb33d8df4c50e_" />
    <published>2013-01-15T13:57:30-08:00</published>
    <updated>2013-01-15T13:57:30-08:00</updated>
    <author>
      <name>Facebook.com</name>
      <uri>http://www.facebook.com</uri>
    </author>
    <summary>This feed URL is no longer valid. Visit this page to find the new URL, if you have access: &amp;lt;a href=&amp;quot;https://www.facebook.com/profile.php?id=[censored]&amp;quot;&amp;gt;https://www.facebook.com/profile.php?id=[censored]&amp;lt;/a&amp;gt;</summary>
    <content type="html"><![CDATA[This feed URL is no longer valid. Visit this page to find the new URL, if you have access: &lt;a href=&quot;https://www.facebook.com/profile.php?id=[censored]&quot;&gt;https://www.facebook.com/profile.php?id=[censored]&lt;/a&gt;]]></content>
  </entry>
</feed> 
```

即使使用 http://graph.facebook.com/[url] 也不起作用。我收到以下错误。

```
{
   "error": {
      "message": "Unsupported get request.",
      "type": "GraphMethodException",
      "code": 100
   }
} 
```

# ios - 在 iOS 5.x 中使用 MGSplitViewController 自动旋转时，模态视图被移到后面

> ID：14347907
> 
> 赞同：0
> 
> 时间：2013-01-15T22:14:55.067
> 
> 标签：ios, ios5, modal-dialog, uisplitviewcontroller, autorotate

我已经在我的应用程序中成功实现了 MGSplitViewController，它似乎工作得很好，但在 iOS 5.x 中，它有这个奇怪的问题。

1.  我以 MGSplitViewController 作为 Portrait 中的根视图控制器来启动我的应用程序。
2.  触发我的全屏模式视图控制器，该控制器成功显示在顶部。
3.  将设备旋转到横向，视图消失，但仍有一部分通过拆分视图滑块显示。

![模态视图显示](../Images/b063eba107269b8ab6d08356c860967b.png)

![旋转后的Splitview](../Images/9339a9a4251e725fa65a8d705b7af322.png)

有没有人看到这个和/或修复它？它在 iOS 6 中运行良好。

如果我将视图旋转回来或尝试打开其他模态视图，则不会发生任何事情。就像模态视图被卡在后面一样。

注意：这就是我设置 MGSplitViewController 的方式：[为 iOS5 和 Storyboard 更新 MGSplitViewController 的已知努力？](https://stackoverflow.com/questions/10704609/known-effort-to-update-mgsplitviewcontroller-for-ios5-and-storyboards/14348245#14348245)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:32:49.020

好吧，我弄清楚了问题所在。

我从选项卡控制器或详细视图控制器呈现我的模态视图（和 segues），而需要从 MGSplitViewController 呈现模态视图（和全局模态 segues）。

当我使用 UISplitviewController 时，我已经能够从该控制器呈现模态视图/转场，但是当我切换到 MGSplitViewController 时，它没有在情节提要中表示，所以我尝试将全局模态转场（例如登录）设置到选项卡栏控制器是主控制器。这似乎导致了这个问题。

对于模态视图，我最终从 MGSplitViewController 中呈现它们，我不得不删除我拥有的 segue，并简单地呈现我之前直接从 MGSplitViewController 中分离出来的任何模态视图控制器。

# java - Java 8 编译器错误 - 如何获取更多信息？

> ID：14347908
> 
> 赞同：10
> 
> 时间：2013-01-15T22:14:56.317
> 
> 标签：java, compiler-errors, javac, java-8

我玩过 Java 8 ea b72，但出现编译器错误。有没有办法从 javac 获取更多信息，例如它当前正在处理的文件列表？如果我有一个大致的想法，我可能会找到解决方法，直到问题得到解决。

只是为了记录，这里是堆栈跟踪（如果在 IntelliJ IDEA 之外编译，它看起来很相似，顺便说一句）：

```
An exception has occurred in the compiler (1.8.0-ea). Please file a bug at the Java Developer Connection (http://java.sun.com/webapps/bugreport)  after checking the Bug Parade for duplicates. Include your program and the following diagnostic in your report.  Thank you.
java.lang.AssertionError: arraycode A
    at com.sun.tools.javac.jvm.Code.arraycode(Code.java:297)
    at com.sun.tools.javac.jvm.Gen.makeNewArray(Gen.java:1827)
    at com.sun.tools.javac.jvm.Gen.visitNewArray(Gen.java:1800)
    at com.sun.tools.javac.tree.JCTree$JCNewArray.accept(JCTree.java:1482)
    at com.sun.tools.javac.jvm.Gen.genExpr(Gen.java:893)
    at com.sun.tools.javac.jvm.Gen.genArgs(Gen.java:912)
    at com.sun.tools.javac.jvm.Gen.visitApply(Gen.java:1746)
    at com.sun.tools.javac.tree.JCTree$JCMethodInvocation.accept(JCTree.java:1391)
    at com.sun.tools.javac.jvm.Gen.genExpr(Gen.java:893)
    at com.sun.tools.javac.jvm.Gen.visitReturn(Gen.java:1715)
    at com.sun.tools.javac.tree.JCTree$JCReturn.accept(JCTree.java:1310)
    at com.sun.tools.javac.jvm.Gen.genDef(Gen.java:683)
    at com.sun.tools.javac.jvm.Gen.genStat(Gen.java:718)
    at com.sun.tools.javac.jvm.Gen.genStat(Gen.java:704)
    at com.sun.tools.javac.jvm.Gen.genStats(Gen.java:755)
    at com.sun.tools.javac.jvm.Gen.visitBlock(Gen.java:1090)
    at com.sun.tools.javac.tree.JCTree$JCBlock.accept(JCTree.java:835)
    at com.sun.tools.javac.jvm.Gen.genDef(Gen.java:683)
    at com.sun.tools.javac.jvm.Gen.genStat(Gen.java:718)
    at com.sun.tools.javac.jvm.Gen.genMethod(Gen.java:968)
    at com.sun.tools.javac.jvm.Gen.visitMethodDef(Gen.java:941)
    at com.sun.tools.javac.tree.JCTree$JCMethodDecl.accept(JCTree.java:723)
    at com.sun.tools.javac.jvm.Gen.genDef(Gen.java:683)
    at com.sun.tools.javac.jvm.Gen.genClass(Gen.java:2310)
    at com.sun.tools.javac.main.JavaCompiler.genCode(JavaCompiler.java:751)
    at com.sun.tools.javac.main.JavaCompiler.generate(JavaCompiler.java:1545)
    at com.sun.tools.javac.main.JavaCompiler.generate(JavaCompiler.java:1509)
    at com.sun.tools.javac.main.JavaCompiler.compile2(JavaCompiler.java:907)
    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:866)
    at com.sun.tools.javac.main.Main.compile(Main.java:506)
    at com.sun.tools.javac.main.Main.compile(Main.java:365)
    at com.sun.tools.javac.main.Main.compile(Main.java:354)
    at com.sun.tools.javac.main.Main.compile(Main.java:345)
    at com.sun.tools.javac.Main.compile(Main.java:94)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:477)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.compileInProcess0(JavacCompiler.java:551)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.compileInProcess(JavacCompiler.java:526)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.compile(JavacCompiler.java:167)
    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:678)
    at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:477)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:477)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:477)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:477)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:29:09.763

这是最后的手段，但您可以尝试使用`strace`它来监视`javac`正在打开的文件。`strace [your javac invocation] | grep '/directory/you/are/interested/in/`可能会给你一些线索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T05:05:04.927

你试过javac的`-verbose`flag吗？如下所示的简单 ant 脚本可用于启用详细的编译器输出，

```
<project name="verbose_compile" default="compile" basedir=".">
  ...
  <target name="compile">
      <javac srcdir="${src.dir}" 
         destdir="${build.dir}"
         executable="${java8.home}/bin/javac" 
         classpath="..."
         fork="true" 
         verbose="true" />
  </target>
</project> 
```

（看起来用户属性会在[maven](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#verbose)`maven.compiler.verbose`中完成同样的事情。）

我刚刚遇到了类似的情况。在 Windows 上，详细的输出向我显示了在错误之前正在编译的类。希望这将帮助您缩小问题的范围以找到解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T06:27:08.833

这不是您的问题的解决方案。也许你可以弄清楚这可能出了什么问题。

下面是抛出“AssertionError”的方法。

```
/** Given a type, return its code for allocating arrays of that type.
*/
public static int arraycode(Type type)
{
    switch (type.tag)
    {
        case BYTE: return 8;
        case BOOLEAN: return 4;
        case SHORT: return 9;
        case CHAR: return 5;
        case INT: return 10;
        case LONG: return 11;
        case FLOAT: return 6;
        case DOUBLE: return 7;
        case CLASS: return 0;
        case ARRAY: return 1;
        default: throw new AssertionError("arraycode " + type);
    }
} 
```

您可以在[此处找到](http://www.javadocexamples.com/java_source/com/sun/tools/javac/jvm/Code.java.html)**com.sun.tools.javac.jvm.Code**类实现（尽管我找不到此类的正确版本，因为此类错误在第 298 行抛出，而在您的情况下为 297） . 它可能会有所帮助。

我找到了链接，[Bug ID = 4901611](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4901611)，在以前的 Java 版本中显示了类似的错误。版本是 Java 1.5。在此链接中，您会发现当“带有 vararg 的通用方法”获得意外输入导致 AssertionError 时，会发生这种错误。没有给出解决方法，它已在下次更新中修复:(

# java - 从（大）TextFile 填充 JComboBox

> ID：14347911
> 
> 赞同：1
> 
> 时间：2013-01-15T22:15:02.233
> 
> 标签：java, swing, jcombobox, bufferedreader, event-dispatch-thread

我正在创建一个个人电影数据库，我想用来自 IMDB 的电影标题填充一个组合框，IMDB 在文本文件中发布此信息，所以我试图从这些文本文件中填充它。我已经让它工作了，但是由于文本文件非常大，几乎有 80 000 行，每行都有一个标题......加载需要很长时间。

这可能是这样做的错误方法，有人知道如何解决它或我应该做什么？

读取文件并返回组合框的字符串 [] 的代码

```
public String [] getMoviesFromFile() throws IOException{

    BufferedReader input = new BufferedReader(new FileReader(filePath));
    try {
        String line = null;
        while (( line = input.readLine()) != null){
            strings.add(line);

                }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finally {
        input.close();
    }

    String[] lineArray = strings.toArray(new String[]{});
    return lineArray;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:39:14.083

您遇到的问题是您阻塞了事件调度线程，这将使您的应用程序在开始读取文件时停止。您不应在 EDT 中执行耗时或阻塞的操作。

您需要将加载卸载到后台线程并在那里加载列表，然后将值重新同步回 EDT（您不应在 EDT 之外创建或修改任何 UI 元素）

看看[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。在您的情况下，我建议您查看[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，因为它旨在满足您的实际需求。

文件 I/O 可能会因您的需要而变慢，我可能建议您考虑将文本文件加载到 SQL 样式数据库中，这可能会产生更快的结果。

我建议查看[HyperSQL](http://hsqldb.org/)或[H2](http://www.h2database.com/html/main.html)，它们都是纯 Java SQL 数据库，设计小巧轻便，但也可以在单用户模式下运行，这意味着您无需安装成熟的 SQL 服务器即可使用它们

# sql-server - 跟踪用户活动的可扩展方式

> ID：14347916
> 
> 赞同：3
> 
> 时间：2013-01-15T22:15:17.440
> 
> 标签：sql-server, asp.net-mvc, scalability

我正在开发一个人力资源系统，我需要跟踪用户个人资料上的所有视图，因为每个招聘人员对候选人个人资料的视图都是有限的。我主要关心的是我的方法的可扩展性，如下所示：我目前创建了一个包含 2 列的表，即被查看的候选人的 id 和查看候选人的招聘人员的 id，每个视图只计算一次，所以如果您再次看到相同的候选人，不会插入任何记录。

根据数据库中招聘人员和候选人的数量，我可以肯定地说我的表格会增长得非常快，更糟糕的是，我必须在每次请求时查询我的表格，因为我必须在 UI 中显示候选人的数量招聘人员查看过。考虑到可扩展性，哪种方法最好？

* * *

我将再解释一下这个案例：我们有公司，每家公司都有很多招聘人员。

**ViewsAssigner_Identifier 表**

*   编号：int PK
*   Company_Id：int FK 非集群
*   Views_Assigned: int 非集群
*   日期：日期非集群

**CandidateViewCounts 表**

*   编号：int PK
*   Recruiter_id: int FK NON-CLUSTERED ?
*   Candidate_id: int FK NON-Clustered ?
*   ViewsAssigner_Identifier_Id: int FK NON-CLUSTERED ?
*   DateViewed：日期非聚集

**我将通过 [ViewsAssigner_Identifier_id] 查询所有 [Candidate_id] 的 Select**

我们想按公司而不是招聘人员进行搜索，因为同一公司中的所有招聘人员都对公司使用了相同的 [Views_Assigned]。换句话说，查看候选人的第一个 Recuiter 将存储在“CandidateViewCounts”表中，而查看同一候选人的后续 Recruiter 将不会被存储。

**结果：** 我需要通过 [ViewsAssigner_Identifier_id] 检索所有 [Candidate_Id] 的列表，然后我可以对所有这些候选人 ID 求和。

**查询示例：**

从 [dbo].[CandidateViewCounts] 中选择 [Candidate_Id]，其中 [ViewsAssigner_Identifier_id] = 1

**有什么建议吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:40:38.720

如果您认为每个招聘人员可能会查看每个候选人一次，那么您所谈论的最多为 60,000 * 2,000,000 行。这是一个很大的数字，但它们不是很宽的行；正如 ErikE 解释的那样，您将能够在每个页面上获得许多行，因此即使是表扫描，总 I/O 也不会像听起来那么糟糕。

也就是说，出于维护原因，只要您不按 CandidateID 进行搜索，您可能希望在 RecruiterID 上对该表进行分区。例如，您的分区方案可能有一个用于 1 到 2000 之间的 RecruiterID 的分区，一个用于 2001 -> 4000 的分区，等等。这样您就可以最大限度地增加每个分区的行数，并可以相应地规划文件空间（您可以将每个分区在它自己的文件组上，分隔 I/O）。

另一点是：如果您要运行诸如“对该候选人有多少意见（我们不在乎哪些招聘人员）之类的查询？” 或者“这个招聘人员查看了多少候选人（我们不在乎哪些候选人）？” 那么你可以考虑索引视图。例如

```
CREATE VIEW dbo.RecruiterViewCounts
WITH SCHEMABINDING
AS
  SELECT RecruiterID, COUNT_BIG(*)
    FROM dbo.tablename;
GO
CREATE UNIQUE CLUSTERED INDEX pk_rvc ON dbo.RecruiterViewCounts(RecruiterID);
GO

CREATE VIEW dbo.CandidateViewCounts
WITH SCHEMABINDING
AS
  SELECT CandidateID, COUNT_BIG(*)
    FROM dbo.tablename;
GO
CREATE UNIQUE CLUSTERED INDEX pk_cvc ON dbo.CandidateViewCounts(CandidateID);
GO 
```

现在，这些聚集索引的维护成本很高，因此您需要针对它们测试写入工作负载。但是他们应该非常、非常快地进行这两个查询，而不必寻找您的大表并可能为非常忙碌的招聘人员或非常受欢迎的候选人阅读多个页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:22:20.437

如果您的表聚集在 上，`RecruiterID`您将有一个非常快速的搜索，并且在我看来根本没有性能问题。

在您所描述的如此狭窄的表格中，查找为任何一位招聘人员查看的个人资料应该需要一次阅读 99+% 的时间。（假设填充因子 = 80，页面拆分最少；行宽假设两`int`列 = 16 字节 + 开销，称其为 20 字节；每页 8040 字节左右；假设每个招聘人员平均获得 4 次查看 2.5 行 = 每个数据大约 128 个招聘人员页）。表中的总行数无关紧要，因为它可以查找聚集索引。是的，它必须遍历树，但它仍然会非常快。只要每个候选人必须计算一次意见，就没有更好的方法了。如果它只是总观看次数，您可以改为计数。

我觉得你不用担心太多。如果您担心系统可能会增长到每秒数万个请求，并且您将获得某种限制活动热点，只要在任何一个时间点访问的招聘人员不会巧合地分配有顺序 ID 到他们，你会没事的。

这里的大原则是您要避免任何必须从上到下扫描表格的事情。只要您始终按`RecruiterID`或搜索，就可以避免这种情况`RecruiterID, CandidateID`。当您想`CandidateID`单独搜索时，如果没有额外的索引，您将遇到麻烦。添加非聚集索引`CandidateID`将使您的表占用的空间增加一倍（一半用于聚集，一半用于非聚集），但这没什么大不了的。然后搜索`CandidateID`将同样快，因为非聚集索引将正确覆盖查询，并且不需要书签查找。

**更新**

这是对您在问题更新中提供的大量新信息的回应。

首先，您的`CandidateViewCounts`表命名不正确。它更像是`CandidateFirstViewedByRecruiterAtCompany`。它只能间接回答您的问题，即关于公司而不是招聘人员的问题，所以在我看来，您所描述的场景确实需要一张`CompanyCandidateViewed`桌子：

```
CompanyID int FK
CandidateID int FK
PRIMARY KEY CLUSTERED (CompanyID, CandidateID) 
```

存储查看候选人的招聘人员的 CompanyID 和 CandidateID。简单的！现在我原来的答案仍然适用于你，只需`RecruiterID`用`CompanyID`.

如果您确实想跟踪哪些招聘人员查看了哪些候选人，请在`RecruiterCandidateViewed`表格中执行此操作（并存储所有招聘人员->候选人视图）。这可以稍后或在数据仓库中查询。但是您的实时 OLTP 需求将通过上述表格得到满足。

另外，我想提一下，您有可能将标识列放在不需要它们的表中。您应该避免使用标识列，除非该列将用作另一个表中的 FK（即使那样也不总是，因为有时在正确的数据建模中为了防止可能的非规范化，您必须在 FK 中使用复合键）。例如，在`ViewsAssigner_Identifier`我看来，您的桌子需要一些帮助（当然，我没有这里的所有信息并且可能不在基地）。如果 the`Company`和 the`Date`是该表最重要的部分，请将它们放在一起成为聚集的 PK 并尽可能摆脱标识列。

# java - 如何使输出具有多个字符串（Java）

> ID：14347918
> 
> 赞同：2
> 
> 时间：2013-01-15T22:15:28.923
> 
> 标签：java

我在使用 Java 的 I/O 之前问过一个类似的问题。

我正在尝试将字符串列表复制到另一个文件中。

```
package file;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class File {

    public static void main(String[] args) {

                FileWrite fW = new FileWrite();

                try (BufferedReader br = new BufferedReader(new FileReader("B:\\inLarge.dat")))
        {

            String stCurrent;

            while ((stCurrent = br.readLine()) != null) {
                System.out.println(stCurrent);
                                fW.serializeAddress(stCurrent, stCurrent);
            }

        } catch (IOException e) {
            e.printStackTrace();
        } 

                //fW.serializeAddress("Boston", "Canada");
    }
} 
```

和

```
package file;

import java.io.BufferedWriter;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.ObjectOutputStream;
import java.io.PrintStream;
import java.io.Serializable;
import java.io.File;
import java.io.IOException;

public class FileWrite {

   public void serializeAddress(String city, String country){

       try
           {

               File file = new File("B:\\outLarge.txt");

               if (!file.exists()) 
                        {
                file.createNewFile();
            }

               FileWriter fw = new FileWriter(file.getAbsoluteFile());
               BufferedWriter bw = new BufferedWriter(fw);
               bw.write(city + " " + country);
               bw.close();

            System.out.println("Done");

       }
           catch(Exception ex)
           {
           ex.printStackTrace();
       }
   }
} 
```

但是结束输出文件只有一个结果，我如何让它复制所有内容？我在想缓冲写入器需要以某种方式进入循环以在现有写入之上写入新写入？但不确定如何实现。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:17:40.853

每次调用 serialize 方法时，您都会覆盖文件内容，因为您没有以附加模式打开文件。为防止覆盖，请以以下模式打开文件`append`：

```
FileWriter fw = new FileWriter(file.getAbsoluteFile(), true); 
```

但是，这是解决方案可能过度设计的一种情况。为了提高效率，您真的应该只打开一次文件。这是一个例子：

```
public static void main(final String[] args) {
    try {
        final BufferedReader reader = new BufferedReader(new FileReader("infile.txt"));
        final PrintWriter writer = new PrintWriter(new File("outfile.txt"));

        String inputLine;

        while((inputLine = reader.readLine()) != null) {
            writer.println(inputLine);
        }

        reader.close();
        writer.close();
    } catch(final Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T22:17:45.563

每次打开它时都会覆盖现有文件。而是[附加](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)到它。改变

```
FileWriter fw = new FileWriter(file.getAbsoluteFile()); 
```

到

```
FileWriter fw = new FileWriter(file.getAbsoluteFile(), true); 
```

# python - 从正则表达式中提取数字和以下字母

> ID：14347924
> 
> 赞同：0
> 
> 时间：2013-01-15T22:16:00.997
> 
> 标签：python, regex

我有许多涉及货币值的字符串，例如`$15K`, `USD20M`,`€1.8k`等 现在我需要提取数字和乘数（K、k、M 或 m）以处理数据。

我想出了以下正则表达式：

```
[\${1}|€{1}][0-9]+(?:\.[0-9]*)?[M|K|k|m] 
```

但是我不确定如何提取表达式的每个子部分并将它们作为变量返回到我的 Python 代码中，所以对于`$15K`，我想要：

```
currency='$'
ammount=15
multiplier='K' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:20:12.580

像这样？

```
In [1]: import re 

In [2]: re.match(r'(?P<currency>\D+)(?P<amount>\d+(\.\d+)?)(?P<multiplier>[mMkK])', '$15k').groupdict()
Out[2]: {'amount': '15', 'currency': '$', 'multiplier': 'k'} 
```

但是，在 Python 中并不是真的有必要，当你可以做的时候

```
currency, amount, _, multiplier =  re.match(r'(\D+)(\d+(\.\d+)?)([mMkK])', '$1.5k').groups() 
```

甚至更简单

```
currency, amount, multiplier = re.match(r'(\D+)(\d+(?:\.\d+)?)([mMkK])', '$1.5k').groups() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:33:06.080

像这样的东西：

```
In [68]: lis= ["$15K", "USD20","$1.5K"]

In [69]: l=lambda x:re.findall(r"(\$|USD)(\d*\.\d+|\d+)([MKkm])?",x)
                                    |          |           |     
                                    ^          ^           ^
                                   currency   amt          multiplier
In [70]: map(l,lis)
Out[70]: [[('$', '15', 'K')], [('USD', '20', '')], [('$', '1.5', 'K')]] 
```

# android - ListFragment - 如何添加菜单？

> ID：14347927
> 
> 赞同：2
> 
> 时间：2013-01-15T22:16:04.600
> 
> 标签：android, android-layout, android-fragments, android-listfragment

我有一个 ListFragment，我必须添加一个菜单。这是我的代码：listuser_menu：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:id="@+id/any_option"
    android:title="In Context Menu" />
</menu> 
```

我的列表片段：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    View mFooterView;
    // We need to use a different list item layout for devices older than Honeycomb
    int layout = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
    android.R.layout.simple_list_item_activated_1:android.R.layout.simple_list_item_1;
    if(getListAdapter()==null){
        // init adapter
        adapter=new UserArrayAdapter(getActivity(),
                MOBILE_OS);
    }
    else{
            adapter.notifyDataSetChanged(); 
        } 

    // set adapter
    registerForContextMenu(getListView());
    setListAdapter(adapter);

}
@Override
public void onCreateContextMenu(final ContextMenu menu, final View v,
final ContextMenuInfo menuInfo){
    menu.clear();
    super.onCreateContextMenu(menu, v, menuInfo);   
    final MenuInflater inflater = getActivity().getMenuInflater();
    inflater.inflate(R.menu.listuser_menu, menu);   
} 
```

但是我看不到我的菜单..为什么？如何注册选项菜单选择？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T15:17:25.383

可以向片段添加菜单，请在片段中使用以下代码：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
setHasOptionsMenu(true); 
```

}

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
super.onCreateOptionsMenu(menu, inflater);
inflater.inflate(R.menu.listuser_menu, menu);
} 
```

使用 setHasOptionsMenu 将允许您的片段显示菜单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T13:59:39.420

在 MainActivity 中使用此示例代码。

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        SubMenu subMenu1 = menu.addSubMenu("Action Item");
        subMenu1.add(0, 1, 0, "Sample");
        subMenu1.add(0, 2, 0, "Menu");
        subMenu1.add(0, 3, 0, "Sair");

        MenuItem subMenu1Item = subMenu1.getItem();
        subMenu1Item.setIcon(R.drawable.ic_title_share_default);
        subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        return true;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T05:01:39.967

是的，您可以将菜单添加到 ListFragment，将以下代码添加到您的**ListFragment**

```
 @Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setHasOptionsMenu(true);
} 
```

然后添加片段版本 onCreateOptionsMenu() 方法，如下所示

```
 @Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {     
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.menu_xml, menu);
} 
```

@Sherlock Yiu 忘记在**onActivityCreated()方法中添加“** **super.onActivityCreated(savedInstanceState);** ” ，其余相同。

 **也不要忘记将“ **android-support-v4.jar** ”添加到项目库中。

上面的代码片段对我有用。**

# javascript - getElementsByTagName：如何选择一种以上的标签？

> ID：14347931
> 
> 赞同：3
> 
> 时间：2013-01-15T22:16:19.673
> 
> 标签：javascript

我有一个 for 循环，我在其中检查当前被迭代的元素是否有任何`a`标签或`form`标签，如果有，我会对它们做一些事情。无论如何，我可以检查或喜欢这样：

```
var form_or_a_tag = elem[i].getElementsByTagName('a');
var form_or_a_tag = elem[i].getElementsByTagName('form'); 
```

但是我怎样才能将它们结合起来呢？

这些都失败了：

```
var form_or_a_tag = elem[i].getElementsByTagName('a form');
var form_or_a_tag = elem[i].getElementsByTagName('a, form');
var form_or_a_tag = elem[i].getElementsByTagName('a') || elem[i].getElementsByTagName('form'); 
```

基本上，我想将驻留在当前正在迭代的元素中的`form_or_a_tag`所有`form`或标签存储在变量中。`a`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T22:19:12.923

您可以使用`querySelectorAll`.

```
var form_or_a_tag = elem[i].querySelectorAll('a, form'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T22:30:35.583

这可能有效：

```
var nodelist_a    = elem[i].getElementsByTagName('a');         // NodeList
var nodelist_form = elem[i].getElementsByTagName('form');      // NodeList

var array_a       = Array.prototype.slice.call(nodelist_a);    // Array
var array_form    = Array.prototype.slice.call(nodelist_form); // Array

var array_both    = array_a.concat(array_form);                // Array 
```

请注意，结果不再是[NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList)而是 Array；但是每个项目都是一个[Node](https://developer.mozilla.org/en-US/docs/DOM/Node)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:22:01.380

我不认为这个功能支持这个功能。AFAIK 您只能使用 getElementsByTagName("*") 通配符来选择所有节点。您可以尝试使用 Sizzle 之类的库来使用 CSS 选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T21:18:00.393

如果节点序列很重要，这里是纯 Javascript 解决方案：

```
var getNodesInTreeByNodeName = function (node, /*Array of Strings*/ allowed_node_names)
{
    var childCollection = [];
    var getTreeNodes = function (tree_root)
    {
        if (allowed_node_names.indexOf(tree_root.nodeName) > -1)
            childCollection.push(tree_root);
        var childs = tree_root.childNodes;
        if (childs)
            for (var i=0, childs_length=childs.length ; i<childs_length ; i++)
                getTreeNodes(childs[i]);
    };
    getTreeNodes(node);
    return childCollection;
}; 
```

使用示例：

```
 var node_types = ["A","FORM"];
    var nodes = getNodesInTreeByNodeName(window.document, wanted_nodes); 
```

# bash - 打印标准时间 - 例如 04:52:06 PM - Bash

> ID：14347945
> 
> 赞同：3
> 
> 时间：2013-01-15T22:17:50.510
> 
> 标签：bash, shell, unix

我有

```
$ date +"%c" 
```

命令

显示日期和时间，但我只想显示完整的非军事时间，例如：04:52:06 PM

我试过了

```
date +"%T" 
```

但是，这会返回军事日期，而不是标准。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:22:06.100

尝试使用所有选项一起“从头开始”制作它。您可以拥有任意数量的格式。

```
]$ date +"%I:%M:%S %p"
05:26:22 PM 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T22:33:59.863

您的系统可能会接受`date +%r`这是一个“别名”`"%I:%M:%S %p"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T22:22:57.940

我会以这种方式显示它：

`date +"%I:%M:%S %p"`

# c# - 数据包中继桥接两个网络（C#）

> ID：14347949
> 
> 赞同：0
> 
> 时间：2013-01-15T22:18:14.050
> 
> 标签：c#, .net, sockets, c#-4.0, winsock

我有两台电脑和一台服务器。

*   计算机 1 的 IP 地址为 10.0.0.1
*   计算机 2 的 IP 地址为 10.0.1.1

他们都在不同的网络上。

服务器连接到两个网络。

*   LAN1 IP 为 10.0.0.253
*   LAN2 IP 为 10.0.1.253

我想从 10.0.0.1 发送一个数据包到 10.0.0.253 并通过 10.0.1.253 将该数据包中继到 10.0.1.1

如何在 C# 中实现这一点？

谢谢

# virtual-machine - 有没有办法在虚拟机中找到虚拟机的主机名？

> ID：14347950
> 
> 赞同：0
> 
> 时间：2013-01-15T22:18:23.740
> 
> 标签：virtual-machine

我正在使用EL5。从主机 virsh list 可以列出该机器上运行的虚拟机，但如何知道反之亦然？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:52:01.380

这一切都取决于虚拟机是什么操作系统。如果 VM 是 linux，那么，在 VM 内部，您可以`hostname`在命令行中键入以获取主机名。在 Windows 中，开始 > 运行 > “sysdm.cpl”将通过 GUI 告诉您计算机名称。因此，实际上没有办法给出一刀切的答案，因为每个操作系统的做法都不同。

# javascript - 如何等待 webfonts 加载？

> ID：14347951
> 
> 赞同：4
> 
> 时间：2013-01-15T22:18:34.357
> 
> 标签：javascript, fonts, webfonts, google-webfonts

我有一个使用 webfonts 的画布元素。即使我使用 jquery 的 onload 方法`($(function () {});)`，运行 onload 时字体似乎仍然不可用——有时我的画布不呈现任何文本，而在其他时候它工作得很好。

无论如何，我可以在所有字体加载后将某种回调传递给 google webfonts 以运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T23:00:22.050

如果您通过“WebFont Loader”（由 Google 和 Typekit 使用）嵌入字体，则可以订阅该`active`事件。一旦加载了所有字体，它将被触发。

看看文档：[https ://developers.google.com/webfonts/docs/webfont_loader#Events](https://developers.google.com/webfonts/docs/webfont_loader#Events)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-15T22:30:07.787

尝试使用窗口加载侦听器。它会在图形、css、webfonts 等被加载后触发。

[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

> 当页面完全加载时运行一个函数，包括图形。

```
$(window).load(function() {
    //do something
}); 
```

[http://jsfiddle.net/kwLf9/1/](http://jsfiddle.net/kwLf9/1/)

# javascript - 为什么未选中单选按钮时 jquery 不检测？

> ID：14347952
> 
> 赞同：11
> 
> 时间：2013-01-15T22:18:39.020
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [JQuery $(#radioButton).change(...) 在取消选择期间未触发](https://stackoverflow.com/questions/5176803/jquery-radiobutton-change-not-firing-during-de-selection)

我有以下 HTML/jQuery：

```
<input id="rb1" type="radio" name="rb" checked="true">
<input id="rb2" type="radio" name="rb">

$("#rb2").change(function () {
    if ($(this).is(":checked")) {
         alert('checked');
    }
    else {
        alert('unchecked');
    }
}); 
```

当`rb2`通过选择 rb1 取消选择我的单选按钮时，不会触发更改事件。为什么是这样？是否可以在不更改我的选择器以匹配两个输入然后查看 ID 的情况下使其工作？

小提琴：http: [//jsfiddle.net/4uRWR/](http://jsfiddle.net/4uRWR/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T22:22:33.637

只有在您实际修改项目本身时才会发送更改事件。当您单击另一个收音机时，您并没有修改它。一个修复方法是在每个 input:radio 上观看更改事件，然后只需检查相关单选按钮的状态：

```
$("input:radio").change(function () {
if ($("#rb2").is(":checked")) {
             alert('checked');
    }
    else {
        alert('unchecked');
    }
}); 
```

[http://codepen.io/AlienHoboken/pen/akwjB](http://codepen.io/AlienHoboken/pen/akwjB)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T22:22:48.620

Listen for change on every input related to your group of radios and then check if a specific one is selected.

```
$("input[name=rb]").change(function () {
    if ($('#rb2').is(":checked")) {
        alert('checked');
    } else {
        alert('unchecked');
    }
}); 
```

[http://jsfiddle.net/4uRWR/2/](http://jsfiddle.net/4uRWR/2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T23:41:31.877

You can artificially trigger a "change" on radio buttons from the same group so that the original bound handler would get picked up and output "unchecked". The trick is to avoid being stuck in an infinite loop by recursively re-triggering the event, we can avoid that by ignoring artificial events that lack the `originalEvent` property:

```
$("input[type=radio]").on("change", function (e) {
  var $this = $(this);

  //all inputs with the same name
  var $targetInputSelector = $("input[name=" + $this.attr("name") + "]");

  //check if the handler was fired "naturally"
  //if yes, trigger the change handler "artificially" for inputs with the same name
  if (e.hasOwnProperty('originalEvent')) {
    //exclude the element that was changed "naturally"
    //from the subset of all the elements with the same name
    $targetInputSelector.not($this).triggerHandler("change");
  }
}); 
```

This code works when added on top of your current handler and satisfies the *without changing my selector to match both inputs and then looking at the ID* criteria ;)

[http://jsfiddle.net/a73tn/24/](http://jsfiddle.net/a73tn/24/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T22:29:25.523

I sorta ran into this issue a few days ago. Instead of listening for an individual click on a radio button, I listen for a click on the `<ul>` I have them in and then call this function to check if one has been selected.

```
// Iterate over the radio group and determine if one of them is selected
function loopRadBtns(btnGroup)
{
    var isChecked = false;

    btnGroup.find('input[type="radio"]').each(function()
    {
        if($(this).attr('checked'))
        {
            isChecked = true;
        }
    });
    return isChecked;
} 
```

# php - PHP（Wordpress） - 选择多个 - 显示“选定”状态不起作用

> ID：14347953
> 
> 赞同：4
> 
> 时间：2013-01-15T22:18:42.480
> 
> 标签：php, forms, wordpress, multiple-select

保存或刷新时，我似乎无法获得多项选择来显示`selected = "selected"`属性。

一切正常（数据库插入正常，结果输出正常），但我无法在刷新后显示所选值。

我正在尝试使用wp 核心中的[selected()函数..](http://codex.wordpress.org/Function_Reference/selected)

代码（它在一个小部件类中，用于一个相当简单的小部件）：

```
<!-- List Custom Fields Hide Underscore (hide=no) -->
 <p>
  <?php $keys_no = $this->k99_cfsw_get_all_cf_array('no');?>
   <?php if ( $keys_no ) { ?>

  <label for="<?php echo $this->get_field_id('cfl2'); ?>"><?php _e('Select your custom field','k99_gelosa_domain'); ?></label> 

    <select multiple="multiple" class="chzn-select" style="width:150px;height:29px;" size="5" id="<?php echo $this->get_field_id('cfl2'); ?>" name="<?php echo $this->get_field_name('cfl2'); ?>[]" value="<?php $instance['cfl2'] ?>">
    <option  value="<?php isset($instance['cfl2']) ? _e($instance['cfl2']) : _e('#NONE#'); ?>"><?php isset($instance['cfl2']) ? _e('multiple') /*_e($instance['cfl2'])*/ : _e('#NONE#'); ?></option>

    <!--<option value="#NONE#"><?php //echo $cfl; ?></option>-->

    <!--<option value="------">-------</option>-->
    <?php
        foreach ( $keys_no as $key ) {
            echo "\n<option value='" .esc_attr($key) . "'". selected( $instance['cfl2'],esc_attr($key) ,FALSE).">". esc_html($key) . "</option>";
        }
    ?>
    </select>
    <?php

} ?>
</p> 
```

作为一个附注和一个额外的问题 - ，我也在使用[选择的 JS](http://harvesthq.github.com/chosen/) - 它也可以正常工作，（除了它不显示所选项目..）但还有一个小错误，它不会在小部件已关闭-仅在保存为打开状态后...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T23:18:12.170

没关系，找到了，答案是：

```
 selected(true, in_array($key, $instance['cfl2']), false) 
```

# ruby - Ruby：获取 mach-o 的进程加载地址？

> ID：14347957
> 
> 赞同：0
> 
> 时间：2013-01-15T22:18:52.630
> 
> 标签：ruby, debugging

有谁知道是否有一个库可以提供获取进程基址/加载地址的功能？我想使用 Ragweed 以编程方式添加断点，但是我只有从 IDA 导出的断点偏移量。我唯一能找到的是：

[在 Mac OSX 中获取进程基地址](https://stackoverflow.com/questions/10301542/getting-process-base-address-in-mac-osx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:11:49.570

通过豚草 (https://github.com/tduehr/ragweed)

```
x = Ragweed::Debuggerosx.new(pid)
x.attach
puts x.region_info(0).base_address 
```

# c# - 线性函数的正则表达式模式

> ID：14347961
> 
> 赞同：1
> 
> 时间：2013-01-15T22:19:10.657
> 
> 标签：c#, regex

我正在用 C# 创建一个科学计算器，并且我有一组用户可以添加条目的线性函数。我需要预先解析一个数学表达式来检查这些函数以及其他数学函数的使用情况，跟踪函数的名称和 中的内容`(...)`，并用它们的评估结果替换它们。

以这个表达式为例：

```
Ans1+(x*2)-(y^3)+abs(z)-avg(x, 5, Ans2)-my2ndFunc(y - (x * 2)) 
```

我写了我自己的正则表达式，我需要在等式中匹配这些：

`abs(z)` `avg(x, 5, Ans2)` `my2ndFunc(y - (x * 2))`

我使用[Regex Tester v1.5.3](http://www.regextester.com/ "正则表达式测试器 v1.5.3")对其进行了测试，但它根本不匹配任何项目。这是我使用的正则表达式：

```
\b([a-z][a-z0-9]*)\((..*)\)\b 
```

什么正则表达式会匹配这些函数并存储函数名和参数内容？此外，如果有人提供有关如何进行匹配和获取捕获组内容的示例代码，那会很酷，但这不是必需的。

**编辑** 我不需要实际的数学解析器，我有实现调车场算法的[muParser](http://muparser.beltoforion.de/ "解析器")。我只需要做一个简单的搜索和替换，数学解析器负责实际的数学运算，我只需要正则表达式来查找要评估的部分。

**我只需要一个简单的正则表达式来匹配：** `myfuncname(any content here)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:24:08.503

> 我写了自己的正则表达式

恐怕你不会用正则表达式走得很远。一位智者曾经说过：

> 有些人在遇到问题时会想
> 
> *我知道，我会使用正则表达式。*
> 
> 现在他们有两个问题。

[`NCalc`](http://ncalc.codeplex.com/)而是结帐。如果您想了解更多关于解析表达式所涉及的内容，您可以查看[`following article`](http://www.codeproject.com/Articles/7335/An-extensible-math-expression-parser-with-plug-ins).

如果您想自己实现它，请查看[`Shunting-yard algorithm`](http://en.wikipedia.org/wiki/Shunting-yard_algorithm).

* * *

更新：

对不起，我没有仔细阅读你的问题。您正在寻找一个正则表达式来仅解析输入，例如

```
abs(z) 
avg(x, 5, Ans2) 
my2ndFunc(y - (x * 2)) 
```

您可以使用以下内容：

```
([a-z][a-z0-9]*)\((.+)\) 
```

# forth - 在 Gforth 中将整数值添加到浮点值

> ID：14347964
> 
> 赞同：7
> 
> 时间：2013-01-15T22:19:19.427
> 
> 标签：forth, gforth

在[Gforth](http://en.wikipedia.org/wiki/Gforth)中，有没有办法将整数值添加到浮点值？

像`1 + 2.1`什么？如果我这样做，`1 2.1e f+`我会得到一个错误，我猜是因为这些值不在同一个堆栈上。我知道我可以做到`1.0e 2.1e f+`，但这不是我想要弄清楚的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T22:28:26.970

Gforth 具有将 int （分别为单单元格`s>f`和`d>f`双单元格）转换为双精度的单词 - Gforth 浮点函数文档在[这里](http://www.complang.tuwien.ac.at/forth/gforth/Docs-html/Floating-Point.html)

```
1 s>f 2.1e f+ 
```

在这种情况下应该做的伎俩。

# php - 评估存储在数据库中的 php 代码

> ID：14347967
> 
> 赞同：0
> 
> 时间：2013-01-15T22:19:49.210
> 
> 标签：php, eval

我有几个字符串存储在数据库中（是的，我知道这不是最佳实践，但我正在使用其他人设计的系统，我无法更改它。）

例如，在我的名为 specialDates 的表中，我有一个包含以下内容的 computedDate 列：

```
 date('d', strtotime("thursday, november ".date("Y")." + 3 weeks")) 
```

这被拉入我的代码并存储在一个名为`$request['order_date']`.

这在标准 PHP 代码中使用时，返回感恩节在当年的日期。我需要将这个的评估值（今年 - 2013 年 - 值为 28）传递给另一个查询。但我似乎无法获得评估的价值。

```
$query = 'SELECT count(orderID) as numberOfOrders FROM customer_orders WHERE customerID = ? AND orderDate = ?';
$param = array($request['customer_id'], eval($request['order_date'])); 
```

不起作用。当我尝试将值回显到屏幕时，执行以下操作：

```
echo eval($request['order_date']); 
```

或这个：

```
echo eval(" return \$request['order_date']; "); 
```

只是打印出字符串的文字值（即`date('d' etc.)`而不是预期的评估值。

我究竟做错了什么？

**更新** 我在下面尝试了 AScherer 的答案，尽管当我将值回显到屏幕时它确实有效：

```
echo eval(" return {$request['order_date']}; "); 
```

当我尝试在我的数组中使用 eval 时它不起作用：

```
$param = array($request['customer_id'], eval("return {$request['order_date']}")); 
```

我怎样才能让它工作，以便我在数组中传递的值是 28 的实际值，而不是字符串 pre-eval？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:22:07.177

您在返回部分中逃避了 $request，这是您不想做的。这种方法应该可以工作，但我建议添加返回数据库中的行，这样你就不必修改 eval

```
$sql = "SELECT customer_id, CONCAT( 'return ', order_date, ';' ) as function from customer_orders WHERE customerID = ? AND orderDate = ?";
$param = array( $request[ 'customer_id' ], eval( $request[ 'function '] ) );

---
OR
---

$evalData = eval(" return {$request['order_date']}; ");
$param = array($request['customer_id'], $evalData ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T22:27:37.993

是的，你可以改变它。如果不是一个明智的结果，那么仍然是一个有用的结果。

您的输入数据是一个字符串：

```
date('d', strtotime("thursday, november ".date("Y")." + 3 weeks")) 
```

这是“计算今年的感恩节”的信息。您可以设置一个查找表来检测此字符串和执行所需的函数：

```
$dateCalculations = array(
    'date(\'d\', strtotime("thursday, november ".date("Y")." + 3 weeks"))' => function() 
        {
            return date('d', strtotime("thursday, november ".date("Y")." + 3 weeks"));
        }
    'date(\'...whatever else is in the system...' => function(){}

    // alias names also work
    'thanksgiving' => function()
        {
            return date('d', strtotime("thursday, november ".date("Y")." + 3 weeks"));
        }
); 
```

然后，您可以尝试从数组中的数据库中查找字符串，并立即获得您需要调用的函数：

```
$thanksgiving = $dateCalculations[$dbvalue](); 
```

从这里你可以去任何地方。请注意，这也适用于别名“thanksgiving”，因此如果您知道在其他地方还使用了这种脑残方法，那么您可以在数据库中替换它……如果没有，至少您已尽力而为。

# java - Java - SaxParser / DocumentBuilder“未能”获得正确的标签主体

> ID：14347968
> 
> 赞同：1
> 
> 时间：2013-01-15T22:20:04.297
> 
> 标签：java, xml-parsing, saxparser

我有一种情况，我需要读取多个 xml 文件并从中构建一个模型。可悲的是，这些文件是由我绝对无法更改的遗留系统生成的。

给我带来麻烦的 XML 文件之一看起来或多或少像这样（更改为删除专有数据）：

```
<resource lang="en" dataId="900">
 numbered content here, 900-919 ...

    <string name="920-name">Document Shredder</string>
    <string name="920-desc">A machine ideal for destroying documents that deserve it. It can cross-shred anything from tissue paper to small netbooks with minimal noise. Remember, hackers can't access the documents if you've shredded the drives.</string>
    <string name="920-cat">office,appliance</string>
    <string name="921-name">Plastic Ladle</string>
    <string name="921-desc">This is a big plastic ladle, ideal for soups and sauces.</string>
    <string name="921-cat">kitchen,utensils</string>

... similar numbered content here, 922-934 ...

    <string name="935-name">Green Laser Pointer</string>
    <string name="935-desc">A High-Powered green laser pointer, ideal for irritating cats.</string>
    <string name="935-cat">office,tool</string>
    <string name="936-name">Black Metal Filing Cabinet</string>
    <string name="936-desc">A large, metal cabinet (black) built to store hanging file folders.</string>
    <string name="936-cat">office,storage</string>

... similar numbered content here, 937-994
</resource> 
```

我将其解析为 a `List<CString>`，其中`CString.java`是：

```
public class CString {
    public String name;
    public String desc;

    @Override
    public String toString() {
        return "CString {!name: " + name + " !body: " + body + "}\n";
    }
} 
```

我试过使用`DocumentBuilder`, 并且，当它不能正常工作时，只是一个普通的`SaxParser`. 但是，无论我怎么做，当我回顾我`CString`的 s 时，我有一些正文实际上包含文档不同部分的未解析标签。例如，打印出我前面提到的`List<CString>`可能会产生类似的结果：

```
[ CStrings for 900-919 ...

, CString {!name: 920-name !body: Document Shredder}
, CString {!name: 920-desc !body: irritating cats.</string>
    <string name="935-cat">office,tool</string>
    <string name="936-name">Black Metal Filing Cabinet</e. Remember, hackers can't access the documents if you've shredded the drives.}
, CString {!name: 920-cat !body: office,appliance}
, CString {!name: 921-name !body: Plastic Ladle}
, CString {!name: 921-desc !body: This is a big plastic ladle, ideal for soups and sauces.}
, CString {!name: 921-cat !body: kitchen,utensils}

... CStrings for 922-934 ... 

, CString {!name: 935-name !body: Green Laser Pointer}
, CString {!name: 935-desc !body: A High-Powered green laser pointer, ideal for irritating cats.}
, CString {!name: 935-cat !body: office,tool}
, CString {!name: 936-name !body: Black Metal Filing Cabinet}
, CString {!name: 936-desc !body: A large, metal cabinet (black) built to store hanging file folders.}
, CString {!name: 936-cat !body: office,storage}

... CStrings for 937-994
] 
```

在`SaxParser`我的代码版本中，我有以下`characters`方法`DefaultHandler`：

```
public void characters(char ch[], int start, int length) throws SAXException {
    String value = new String(ch, start, length).trim();
    switch(currentQName.toString()) { // currentQName is a StringBuilder that holds just the current xml element's name
        case "string":
            if (value.contains("</string")) {
                System.err.println("!!! Parse Error !!! " + value);
            }
} 
```

正如您可能已经猜到的那样，这会产生：

```
!!! Parse Error !!! irritating cats.</string>
        <string name="935-cat">office,tool</string>
        <string name="936-name">Black Metal Filing Cabinet</e. Remember, hackers can't access the documents if you've shredded the drives. 
```

我通常不会问这个深奥的问题，尤其是当我无法提供具体的数据和代码时，但谷歌搜索似乎没有产生任何我能够确定的东西，当然代码不是抛出（或抑制）任何异常。

我注意到的一件事是，当有错误的数据时，如上面针对 920-desc 的 CString 所示，在这种情况下，错误数据的长度为 138 个字符，而且并非巧合的是，好的数据恰好将 139 个字符提取到它的内容中应该。这让我觉得这是某种缓冲问题。但是，无论我是让`DocumentBuilder`管理缓冲区，还是尝试使用直接更手动地管理它们，每次`SaxParser`我仍然会在相同的地方得到完全相同的错误文本。最后，在处理较短的字符串、name 和 cat 时，我从未注意到任何错误的文本，我认为这也指向 char 缓冲区问题。

任何想法都会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:27:57.583

我在代码中发现了一个特殊字符被不必要地清理的地方（我想是为了解决以前的源代码格式不佳的问题）。

这是之前进行所有剥离的方法：

```
private static InputSource getCleanSource(File file) {
    InputSource source = null;
    try {
        InputStream stream = new FileInputStream(file);
        String fileText = readFile(stream); // Gets file content as text from InputStream

        CharsetDecoder utf8Decoder = Charset.forName("UTF-8").newDecoder();
        utf8Decoder.onMalformedInput(CodingErrorAction.IGNORE);
        utf8Decoder.onUnmappableCharacter(CodingErrorAction.IGNORE);
        CharBuffer parsed = utf8Decoder.decode(ByteBuffer.wrap(readFile(stream).getBytes()));

        fileText = "<?xml version=\"1.1\" encoding=\"UTF-8\" ?>\n" + // put a good header
                parsed
                .replaceAll("<\\?.*?\\?>", "") // remove bad <?xml> tags
                .replaceAll("--+","--") // can't have <!--- text --->
                .replaceFirst("(?s)^.+?<\\?", "<?") // remove bad stuff before <?xml> tag
                .replaceAll("[^\\x20-\\x7e\\x0A]", "") // remove bad characters
                .replaceAll("[\\x0A]", " ") // remove line breaks
                ;
        Reader reader = new StringReader(fileText);
        source = new InputSource(reader);
    } catch (Throwable t) {
        System.err.println("Unknown trouble parsing: " + file.getName());
        t.printStackTrace();
    }

    return source;
} 
```

经过审查和调整后，如果我将此方法更改为：

```
private static InputSource getCleanSource(File file) {
    InputSource source = null;
    try {
        InputStream stream = new FileInputStream(file);
        String fileText = readFile(stream) // Gets file content as text from InputStream
                .replaceAll("--+","--") // can't have <!--- text --->
                .replaceFirst("(?s)^.+?<\\?", "<?") // remove bad stuff before <?xml> tag
                ;
        Reader reader = new StringReader(fileText);
        source = new InputSource(reader);
    } catch (Throwable t) {
        System.err.println("Unknown trouble parsing: " + file.getName());
        t.printStackTrace();
    }

    return source;
} 
```

我还没有时间回去尝试弄清楚清洁过程中吞噬了哪些神秘字符或标签。我不得不假设源系统最初提供的有效 xml 比现在需要如此积极的清理要少得多，但我认为我永远无法确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:47:24.913

几乎可以肯定，您没有格式良好的 XML（您关于绝对不允许更改源系统的评论是不祥之兆，但您并不是唯一一个陷入这种困境的人。）

看看这个问题[如何在 Java 中解析格式错误的 XML？](https://stackoverflow.com/q/920344/116509)

如果我是你，我会使用原始字符串操作和/或正则表达式来直接提取数据或将其修复为格式良好的 XML。顺便说一句，JAXB 在处理 Java 中的 XML 方面要好得多（但仍然需要格式良好）

# r - 在 R 中拆分字符串并从列表中提取信息

> ID：14347970
> 
> 赞同：3
> 
> 时间：2013-01-15T22:05:56.870
> 
> 标签：r

我的数据中有以下行名：

```
column_01.1
column_01.2
column_01.3
column_02.1
column_02.2 
```

我可以使用以下命令拆分这些行名：

```
strsplit(rownames(my_data),split= "\\.") 
```

并获取列表：

```
[[1]]
[1] "column_01" "1"   

[[2]]
[1] "column_01" "2"   

[[3]]
[1] "column_01" "3"

... 
```

但是因为我想要第一部分中的字符并完全丢弃第二部分，如下所示：

```
column_01
column_01
column_01
column_02
column_02 
```

我已经用尽了仅提取这部分信息的技巧。我用 unlist() 和 as.data.frame() 尝试了一些选项，但没有运气。或者有没有更简单的方法来分割字符串？我不想使用`as.character(substring(rownames(my_data),1,9))`“。”作为位置。可以改变（虽然它适用于这个例子）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T22:22:47.677

您可以映射`[`以获取第一个元素：

```
sapply(strsplit(rownames(my_data),split= "\\."),'[',1) 
```

...或（更好）使用正则表达式：

```
gsub('\\..*$','',rownames(my_data)) 
```

（翻译：查找（点字符，某物，字符串结尾）的所有匹配项并替换为空字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:47:34.063

因为我喜欢这个`stringr`包裹，我想我会把它扔在那里：

```
str_replace(rownames(my_data), "(^column_.+)\\.\\d+", "\\1") 
```

（我对正则表达式不是很好，所以`^`括号外可能会更好）

# c++ - 在 C++ 中定义与机器无关的数据类型

> ID：14347971
> 
> 赞同：0
> 
> 时间：2013-01-15T22:20:13.780
> 
> 标签：c++

有没有办法做到这一点？

```
#if sizeof(int) == 4
typedef unsigned int Integer32;
#else
typedef unsigned long Integer32;
#endif 
```

还是您必须只#define 整数大小并编译不同的标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:26:30.997

如果您需要**精确的**尺寸，您可以使用`intXX_t`and`uintXX_t`变体，其中 XX 是 8、16、32 或 64。

如果您需要**至少有**一定大小的类型，请使用`int_leastXX_t`and `uint_leastXX_t`;

如果您需要**快速**，请使用`int_fastXX_t`and `uint_fastXX_t`。

`<stdint.h>`你可以从C99 中获得这些。如果你没有C99，那就有点难了。您不能使用`sizeof(int)`，因为预处理器不知道类型。因此，使用`INT_MAX`(from`<limits.h>`等) 来确定特定类型是否足够大以满足您的需要。

# objective-c - 如何创建具有透明中间条和自定义旋钮大小的自定义 NSSlider

> ID：14347973
> 
> 赞同：0
> 
> 时间：2013-01-15T22:20:22.187
> 
> 标签：objective-c, macos, cocoa, nsslider

我已经搜索了一些代码，`NSSliderCell`但我找不到一种方法来做我正在寻找的东西。
我想创建这样的东西（白线是滑块旋钮，1像素宽度）：
![在此处输入图像描述](../Images/94e48b36c3fb85814c04369ad9cad3b9.png)

我将把它用于音乐曲目的时间栏，所以它会每秒移动一次（这就是为什么我想使用 a`NSSlider`来让事情变得简单）。
我需要做什么才能制作一个带有透明中间条的滑块，类似于上图？

PS：它不会是可触摸的，它只是为了展示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:15:31.890

您可以只是 override `drawRect:`，就像子类化时一样`NSView`，除了在您的实现中，用于`[self doubleValue]`确定在哪里画线。`NSSlider`但是，在这种情况下，我看不到子类化的意义。自定义`NSView`可以有一个属性来确定在哪里画线，然后其他代码可以设置该属性或绑定到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:16:43.633

对我来说，这看起来像是一个带有 1 像素宽分隔线的垂直拆分视图。你可以试试。有一种方法可以设置分隔线的位置，因此可以根据需要轻松移动。您可以通过创建 NSSplitview 的子类并覆盖 dividerThickness 方法以返回 1 来使分隔符变为 1 像素。然后您只需将 2 个子视图的背景设置为黑色即可。这很容易尝试，所以也许它对你有用。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:40:11.170

我终于明白了：

*   我创建了一个`NSSliderCell`带有属性的子类`@property float x`；
*   我覆盖了该`drawKnob`方法，并在其中写道：

> -(void)drawKnob:(NSRect)knobRect{ self.x =knobRect.origin.x; }

*   我将 a`NSSlider`拖到我的窗口中（使其变小，将其宽度更改为窗口的宽度）并将其单元格类更改为我创建的那个；
*   然后当音乐播放时，每过一秒我都会这样做：

> ```
> [_timeBarSlider setMinValue:0];
> [_timeBarSlider setMaxValue:myTrack.duration];
> [_timeBarSlider setDoubleValue:myPlayer.currentPosition];
> [[_timeBarImageView animator] setFrame:NSMakeRect(_timeBarSliderCell.x, yourYCoordinate, yourWidth, yourHeight)]; 
> ```

`_timerBarSlider`是我在 IB 中的 NSSlider /`_timerBarImageView`是包含垂直图像线的图像视图 /`_timerBarSlderCell`是 NSSlider 的单元格（子类）

PS：NSSlider 在该窗口中的每个对象后面，因此用户看不到它。您不能`setHidden:YES`使用它，因为`drawKnob`不会调用该方法。

# plugins - CRM 2011 - CloseIncidentRequest - 在创建案例发布事件上注册时引发异常

> ID：14347977
> 
> 赞同：1
> 
> 时间：2013-01-15T22:20:44.777
> 
> 标签：plugins, registration, crm

我正在尝试在案例（“事件”）上注册一个插件，创建同步后事件以成功调用 CloseIncidentRequest。我让 CloseIncidentRequest 在案例更新发布事件上成功运行，但在创建时我不断收到“需要在提交之前启动事务”异常。

有谁知道这是否是一个已知问题，或者是否有人在案例创建发布事件中运行此问题？我已经看到有关从同步更改为异步的帖子-如果我将插件更改为运行异步，那确实有效-但理想情况下，我希望它同步运行，以便用户可以在按下保存时看到案例已解决.

```
private const int IncidentResolutionStatus_Closed = 2;
private const int IncidentStatusCode_ProblemSolved = 5;

Entity resolution = new Entity("incidentresolution");
resolution["subject"] = "Case Resolved";
resolution["incidentid"] = new EntityReference("incident", IncidentId);
resolution["timespent"] = timespent;
resolution["statuscode"] = new OptionSetValue(IncidentResolutionStatus_Closed);

CloseIncidentRequest closeincidentRequest = new CloseIncidentRequest() 
{ 
  IncidentResolution = resolution, 
  Status = new OptionSetValue((int)IncidentStatusCode_ProblemSolved) 
};

service.Execute(closeincidentRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T20:13:12.593

尝试手动解决案例（通过 CRM 界面），您可能会遇到相同的错误（如我）。

如果是这样，它与您的插件代码（或 SDK）无关，而是与您创建案例时缺少的一些信息有关。

检查您尝试解决的案例是否没有缺少必填字段。在我的情况下，错误是客户端名称为空（有一个客户端记录，但它的名称为空）并且它导致了错误。

# servicestack - What versions of MVC does ServiceStack work with?

> ID：14347980
> 
> 赞同：2
> 
> 时间：2013-01-15T22:20:48.883
> 
> 标签：servicestack

Was curious if it will work with MVC 1.0? Looks like the mvc powerpack works with MVC 3 and 4.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:41:06.090

ServiceStack hasn't been tested with MVC v1.0 (and wont be supported). The recommended versions are MVC 3/4+. If you need something more lightweight than this, consider using servicestack on its own e.g. [razor.servicestack.net](http://razor.servicestack.net).

# javascript - JavaScript 中的表达式和语句

> ID：14347984
> 
> 赞同：4
> 
> 时间：2013-01-15T22:20:55.650
> 
> 标签：javascript, expression, statements

我刚开始通过“Eloquent JavaScript”一书学习 JavaScript，该书可在 eloquentjavascript.net 免费访问。到目前为止，我真的很喜欢这本书，只有一个部分我不明白。这是关于表达式和语句的：

[http://eloquentjavascript.net/chapter2.html#p65af5913](http://eloquentjavascript.net/chapter2.html#p65af5913)

我知道之前在 StackOverflow 上已经提到过这个话题，但是，这些是更具体的问题，而且我 - 坦率地说 - 并没有得到全部内容。

在段落的开头，作者解释了什么是表达式：如果我理解正确的话，像 42 或“23”这样的原子值被认为是表达式。如果将这些值应用于运算符（如 42 - 19），这也将被视为表达式。（我猜是因为它显然是 23，这又是一个原子值。）我这样解释：**每个值——无论是直接输入还是尚未计算——都被称为表达式. 那是对的吗？**

然后作者说：*“存在一个比表达式更大的单元。它被称为语句。[...] 大多数语句以分号 (;) 结尾。最简单的语句是带有后面的分号。”* 作为一个例子，他提到

```
！错误的;
```

作为示例语句。我的问题是**“是什么让这成为一个声明？只是最后的分号？”** 当我使用 JavaScript 控制台时，无论是否输入分号，都完全没有区别。它总是返回 true。然而，作者说*“[A] 声明只有在它以某种方式改变了世界的情况下才有意义。”* **因此，给定的示例甚至不是一个语句，因为它*“只是产生 [s] 值 [...] true，然后立即将 [s it] 扔到位桶中”*？**我现在真的很困惑......如果我没有完全把它搞砸，那么一个语句必须有一些*“副作用”*（比如一个变量的声明），对吧？

但是，如果有人可以解释什么是声明，我会很高兴。如果有人能举例说明这些术语的区别实际上是有用的，那也将非常有帮助，因为现在我什至无法想象作者为什么还要费心介绍这些词汇表。非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:46:52.683

一个简单但模糊的类比是自然语言中的文本，由组合成句子的短语组成。一个短语，比如“下雨了”，可以自己组成一个句子，比如“我不会出去。下雨了。” 或者成为更大句子的一部分，例如“可怕的天气，一直在下雨”。

也就是说，表达式和语句之间的区别在 javascript 中非常模糊。与其他类似 C 的语言不同，您不仅可以在语句中使用表达式，还可以在表达式中使用语句：

```
a = 1 + function(x) { if(x > 1) return 10 } (20) 
```

一些现代 javascript 程序，例如 Jquery，使用声明技术，基本上使它们成为一个单一的表达式。

这种模糊的区别（并不是说混淆）来自这样一个事实，即 Javascript 作为一种类似 C/pascal/algol 的命令式语言，同时受到像 Lisp 这样的函数式语言的严重影响，这些语言没有“声明”。在函数式语言中，一切都是表达式。

为了使事情更有趣，语句之间的分号（有时）是可选的，因此没有简单的方法来判断两个表达式是属于一个语句还是形成两个不同的语句。考虑：

```
 a = 1  // two
 !2     // statements

 a = 1  // one
 +2     // statement 
```

# xcode - 如何向我的 Xcode 项目添加图标？

> ID：14347985
> 
> 赞同：5
> 
> 时间：2013-01-15T22:21:02.493
> 
> 标签：xcode, macos, icons

我有一个 Mac OSX 的 Xcode 项目，我想在我的项目中添加一个图标文件 (.icns) 并将其设置为 App Icon。我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T20:44:13.600

这里的关键是您需要一个 ICNS（图标集）文件。

[人机界面指南](https://developer.apple.com/library/mac/#documentation/userexperience/Conceptual/AppleHIGuidelines/Intro/Intro.html)中描述了创建它的正确方法，详细信息在 Apple 的曲折小文档迷宫中的各种用户指南和参考指南中进行了介绍，但我将在此进行总结。

有第三方工具可以做到这一点，还有 Photoshop、GIMP、Illustrator 等插件，可以输出正确的 .icns 文件。但是请确保，如果你使用这样的东西，它是最新的，因为苹果一直在改变规则。

如果您需要手动执行此操作，请执行以下操作：

首先，创建一组不同大小的 PNG 文件。您需要的确切清单会随着时间的推移而变化。如果该链接持续时间超过当前列表，请参阅[提供正确的资源并让 OS X 完成工作；](https://developer.apple.com/library/mac/#documentation/userexperience/Conceptual/AppleHIGuidelines/IconsImages/IconsImages.html#//apple_ref/doc/uid/20000967-TP6)否则，请自行在[http://developer.apple.com](http://developer.apple.com)上搜索。但是，截至 2013 年初，它是 512x512、256x256、128x128、32x32、16x16 和 @2x 版本。所有这些都应该嵌入 sRGB 颜色配置文件。它们应该命名为`icon_512x512@2x.png`,`icon_512x512.png`等，或`MyApp_512x512@2x.png`,`MyApp_512x512.png`等。将它们全部放在一个名为的目录中，例如`MyApp.iconset`.

“但是等等！我只想要一个图标，我不想要所有这些尺寸！” 好吧，你真的*想要*所有这些尺寸。当缩小到 32x32 时，您的 512x512 图标看起来会很糟糕。在 Retina Mac 上，当你的图标放大到双倍分辨率时，它只会变得锯齿状，而不是变得更清晰。另外，如果你想进入 App Store，如果你没有，Apple 会拒绝你。但是，如果您坚持，您只需放入文件夹即可逃脱`icon-512x512.png`，然后按照其余步骤操作，它会起作用。

从终端，cd 进入父目录，然后键入`iconutil -c icns MyApp.iconset`. 您将获得一个名为`MyApp.icns`.

现在您可以按照 Douglas 建议的步骤进行操作，并且它确实有效。在 Xcode 中，在 Project Navigator 中选择您的项目，在项目侧边栏中选择您的应用程序目标，选择 Summary 选项卡，然后`MyApp.icns`从 Finder 拖动到 App Icon 框。

这在 GUI 中可能没有任何可见的效果，除了添加`MyApp.icns`到项目导航器中。换句话说，您可能仍会看到“？” 图标。这似乎是 Xcode 4.5 中的一个错误。如果你遵循 HIG 两个版本之前的过时建议，Xcode 总是显示图标，但如果你遵循当前的 HIG，它不会。去搞清楚。希望苹果有一天能解决这个问题。

但就目前而言，这并不重要。构建项目，然后查看`MyApp.app`，它会在 Finder、Dock 等中显示您的图标。

现在，我知道你不想用 10 种不同的变化来画同一张图片，你只想要一些简单的东西。只要您不想进入 App Store，就可以通过两种方式避免作弊：

*   使用您喜欢的工具将 512x512（1024x1024 像素“512x512@2x”，如果支持高分辨率）图像缩放到所有其他尺寸。
*   在图标集中创建一个只有 512x512 图像的 .icns。

第二个更简单，更少作弊，最终 Finder 可能会像你一样缩放你的 512x512 图像。

最后，如果您手动编辑`Info.plist`或更改了构建设置（或者您正在使用从更简单的 Xcode 版本导入的项目），则仅拖动图像可能还不够。如果您需要手动执行相同的步骤，它们是：

*   `MyApp.icns`必须在项目导航器中作为项目中的文件。（您可以从 Finder 将其拖到此处。）
*   在构建阶段，复制捆绑资源应包括`MyApp.icns`. （您可以从 Project Navigator 将它拖到此处。）（如果由于某种原因您没有使用正常的构建阶段，您需要一些其他方法`Contents/Resources/MyApp.icns`在构建时将其复制到。）
*   您的 Info.plist 应该有一个名为的`Icon file`（原始名称`CFBundleIconFile`）`MyApp`，没有扩展名。

这里的所有都是它的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T03:34:08.670

1.  在项目导航器中，选择一个资产目录。

2.  选择编辑器 > 添加资产 > 应用程序图标和启动图像 > 新 OS X 图标。

3.  创建了一个空的 OS X 图标集，其中每个图像表示都有一个图像井。

4.  将图标文件从 Finder 拖到集合查看器中的相应图像井中。

或者，您可以通过选择资产目录并选择编辑器 > 添加资产 > 导入来添加图像。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-15T22:45:57.380

我很确定您必须将图标放入项目中，然后重新编译。让我们知道怎么回事。

# c# - 流畅的 NHibernate 列表 课内

> ID：14347986
> 
> 赞同：0
> 
> 时间：2013-01-15T22:21:18.837
> 
> 标签：c#, orm, fluent-nhibernate, mapping

我正在尝试获取 a`List<User>`其中包含 a `List<Article>`for each `User`，但是在查询时我得到 the `List<User>`and every `User`(the only `User`) has a`List<Article>`但它不包含任何内容。

我检查了我的数据库并且密钥匹配，所以我的猜测（嗯，猜测不多）是我的映射存在一些问题。我搜索了一对多（HasMany）的示例并尝试了它们，但没有任何效果。有谁知道可能出了什么问题？

课程

```
 public class User
    {
        public virtual int UserId { get; set; }
        public virtual string Name { get; set; }
        public virtual string Password { get; set; }
        public virtual IList<Article> Articles { get; set; }

        public User()
        {
            Articles = new List<Article>();
        }
    }

public class Article
{
    public virtual int ArticleId { get; set; }
    public virtual string Title { get; set; }
    public virtual string Ingress { get; set; }
    public virtual DateTime Created { get; set; }
    public virtual string ArticleText { get; set; }
    public virtual User Author { get; set; }
} 
```

这些是我的映射

```
 public class UserMap : ClassMap<User>
    {
        public UserMap()
        {
            Id(x => x.UserId);
            Map(x => x.Name);
            Map(x => x.Password);
            HasMany(x => x.Articles).KeyColumn("UserId").LazyLoad();
        }
    }

    public class ArticleMap : ClassMap<Article>
    {
        public ArticleMap()
        {
            Id(x => x.ArticleId);
            Map(x => x.Title);
            Map(x => x.Ingress);
            Map(x => x.Created);
            References(x => x.Author).Column("UserId").LazyLoad();
            Map(x => x.ArticleText).Length(4001);
        }
    } 
```

这是我插入/选择的电话

```
 List<User> usr = new List<User>();
        using (var session = SessionFactoryHelper.OpenSession())
        {
            using (var transaction = session.BeginTransaction())
            {

               User u = new User
               {
                   Name = "Mohindra",
                   Password = "Corn"
               };

               Article a = new Article
               {
                   Title = "Doh!",
                   Ingress = "yada yada",
                   ArticleText = "why dammit! whyyy?!11!!",
                   Created = DateTime.Now,
                   Author = u
               };

               session.Save(u);
               session.Save(a);

               usr = session.Query<User>().ToList();
               transaction.Begin();

               transaction.Commit();
            }
        } 
```

这可能是最简单的新手错误，但我对使用 O/RM 非常陌生，所以我不知道这里可能出现什么问题。

![图片](../Images/ced7ae237063abf3a102ef1a5f60472d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:43:25.733

用过， `HasMany(x => x.Articles).Table("Article").KeyColumn("UserId").LazyLoad();` 然后我独立保存了我的对象。

当我应该使用时， `HasMany(x => x.Articles).Table("Article").KeyColumn("UserId").Cascade.All();`

^ 在这种情况下，`Article`继承的我`User`和我可以将它们与关系一起保存。

# jsf - PrettyFaces 错误：为 MappingId [...] 构建 URL 时发生异常，所需值 [...] 为 null

> ID：14347987
> 
> 赞同：1
> 
> 时间：2013-01-15T22:21:41.950
> 
> 标签：jsf, jsf-2, prettyfaces

我的 JSF 项目中依赖 PrettyFaces 进行 URL 重写的页面突然给了我以下错误，尽管我没有更改任何与 PrettyFaces 直接相关的内容。是什么赋予了？

```
PrettyFaces: Exception occurred while building URL for MappingId < my-page >, Required value  < #{myVar} > was null 
```

* * *

这是完整的堆栈跟踪：

```
javax.enterprise.event.ObserverException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at org.jboss.weld.util.reflection.SecureReflections$16.work(SecureReflections.java:343)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInstantiation(SecureReflectionAccess.java:173)
    at org.jboss.weld.util.reflection.SecureReflections.newInstance(SecureReflections.java:340)
    at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:33)
    at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:73)
    at org.jboss.weld.injection.MethodInjectionPoint.invokeOnInstanceWithSpecialValue(MethodInjectionPoint.java:162)
    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:241)
    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:229)
    at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:207)
    at org.jboss.weld.manager.BeanManagerImpl.notifyObservers(BeanManagerImpl.java:569)
    at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:559)
    at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:554)
    at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:74)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.jboss.solder.servlet.event.ServletEventBridgeFilter.doFilter(ServletEventBridgeFilter.java:74)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:161)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.servlet.ServletException: PrettyFaces: Exception occurred while building URL for MappingId < my-page >, Required value  < #{myVar} > was null
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:807)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:671)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:505)
    at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:476)
    at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:355)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:305)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:137)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:65)
    ... 30 more
Caused by: com.ocpsoft.pretty.PrettyException: PrettyFaces: Exception occurred while building URL for MappingId < my-page >, Required value  < #{myVar} > was null
    at com.ocpsoft.pretty.faces.beans.ExtractedValuesURLBuilder.buildURL(ExtractedValuesURLBuilder.java:69)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.getActionURL(PrettyViewHandler.java:128)
    at javax.faces.application.ViewHandlerWrapper.getActionURL(ViewHandlerWrapper.java:185)
    at org.jboss.weld.jsf.ConversationAwareViewHandler.getActionURL(ConversationAwareViewHandler.java:100)
    at javax.faces.application.ViewHandlerWrapper.getActionURL(ViewHandlerWrapper.java:185)
    at com.sun.faces.renderkit.html_basic.FormRenderer.getActionStr(FormRenderer.java:232)
    at com.sun.faces.renderkit.html_basic.FormRenderer.encodeBegin(FormRenderer.java:135)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:302)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at com.sun.faces.renderkit.html_basic.CompositeRenderer.encodeChildren(CompositeRenderer.java:78)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:163)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    ... 46 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:21:41.950

这是由于,`Converter`带有`@FacesConverter`注释，但*没有*`value`参数。该项目仍然部署得很好，并且有问题的 PrettyFaces 映射页面没有使用这个（损坏的）转换器，但是这个神秘的错误仍然出现。换句话说，我不小心有：

```
@RequestScoped
@FacesConverter
public class MyConverter implements Converter {
//... 
```

我将其替换为：

```
@RequestScoped
@FacesConverter("myConverter")
public class MyConverter implements Converter {
//... 
```

它奏效了。我希望这对其他人有帮助！

# php - Eclipse Juno - 如何让它知道远程项目中的类和功能？

> ID：14347991
> 
> 赞同：2
> 
> 时间：2013-01-15T22:21:47.893
> 
> 标签：php, eclipse, remote-access

我在远程系统资源管理器透视图中的 Eclipse 中创建了一个连接。

我可以访问服务器上的文件。

不幸的是，自动完成似乎不起作用，并且 IDE 不知道驻留在项目文件中的类和函数。

我如何处理这类项目（远程）以获得上述（自动完成、类、函数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:00:56.457

请在此处查看“**使用远程系统资源管理器修复 PHP 自动完成**”：http: [//www.patrickjwaters.com/blog/2011-07-24/how-setup-eclipse-php-pdt-remote-system-explorer-主题管理器和 Drupal 插件/35](http://www.patrickjwaters.com/blog/2011-07-24/how-setup-eclipse-php-pdt-remote-system-explorer-theme-manager-and-drupal-plugins/35)

# css - CSS图像不以无线电输入为中心

> ID：14347992
> 
> 赞同：0
> 
> 时间：2013-01-15T22:21:49.450
> 
> 标签：css, centering, clearfix

我只是试图内联`CSS`来解决这个问题，并在完成后将其移动到我的“样式”文件中。我正在尝试的应该使所有图像和单选按钮内嵌在周围`DIV`。我不能做的是让他们在高度方面居中。如您所见，我在第一个单选按钮上尝试了 margin-bottom ，但它没有做任何事情。我究竟做错了什么？我可能在某个地方需要一个clearfix吗？

```
<div style="height:30px;">

            <input type="radio" name="pay_type" checked="checked" style="margin-bottom:10px;">&nbsp;&nbsp;&nbsp;<img src="/images/cards.png" style="margin-right:40px;">
            <input type="radio" name="pay_type">&nbsp;&nbsp;&nbsp;<img src="/images/pay-pal.png" style="margin-right:40px;">
            <input type="radio" name="pay_type">&nbsp;&nbsp;&nbsp;<img src="/images/amazon-payments.png">

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:59:53.097

我希望这就是你要找的 [JSFIDDLE](http://jsfiddle.net/SsPdJ/1/)

我包括另一个`<div>`包含`input`元素并尝试`vertical-align` 在 parent 中进行此操作`<div>`。我给父 div 的高度是 600px，你可以更改它并检查。

但是我仍然有内联样式。一旦它适合你，就改变它。

# c++ - 删除派生对象时的行为

> ID：14347993
> 
> 赞同：2
> 
> 时间：2013-01-15T22:21:57.630
> 
> 标签：c++, inheritance, destructor

这是一个基于真实问题的虚构场景。如果我有一个基类：

```
class Vehicle
{
public:
     void run() { incrementStuff(); }
     virtual void incrementStuff() { } 
}; 
```

和一个派生类：

```
class Car : public Vehicle
{
public:
     Car() : Vehicle() { stuff = new StuffClass(); }
     ~Car()  { delete stuff; stuff = NULL; }

     virtual void incrementStuff() { if (stuff != NULL) stuff->increment(); } 

protected:
     StuffClass* stuff;
}; 
```

然后说我有一个线程定期调用 Vehicle::run() 。我有另一个线程最终删除了指向汽车的指针。销毁顺序将导致汽车先被删除，然后是车辆。

如果线程（位于 Vehicle 对象中）在析构函数在 car 中运行之后（但显然在车辆被破坏之前）调用 incrementStuff 函数会发生什么？是否会执行 Car::incrementStuff 并尝试取消引用已删除的指针？还是会调用 Vehicle::incrementStuff ，它是安全的并且什么都不做？

假设当 Car::~Car() 正在运行时线程不能调用 Car::incrementStuff（这是由互斥锁阻止的）。

这段代码已被重构以避免这种情况，但我只是想知道是否有人可以阐明它是如何工作的，或者它是否只是简单的未定义行为？

更一般地说，如果我在 Car 被销毁但在 Vehicle 被销毁之前尝试调用 Car::incrementStuff 会发生什么？NULL 检查会起作用，还是该内存已经被释放并且现在可以被任何东西使用？或者，在基础对象被破坏之前，该内存不会“释放”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T22:31:51.467

如果您已删除该`Car`对象，则后续调用`incrementStuff()`是未定义的行为。

顺便说一句，您可能应该在您的`Vehicle`class中创建析构函数`virtual`。请参阅：[何时使用虚拟析构函数？](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T22:26:14.423

你想多了。如果你取消引用一个已经被`delete`编辑的指针，你会调用未定义的行为。这就是你真正需要知道的。只要你打电话`delete ptr;` `ptr`无效。

同步访问此对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T22:36:35.380

一个线程正在读取一个值，而另一个线程正在写入它。这是一场数据竞赛。如果两个动作未正确同步，则行为未定义。

# mysql - 嵌套while循环mysql_fetch_array

> ID：14347994
> 
> 赞同：0
> 
> 时间：2013-01-15T22:22:00.140
> 
> 标签：mysql, while-loop

我有一组嵌套的 while 循环来与 mysql 查询进行比较。这是代码：

```
while($row = mysql_fetch_array($resultbat))
{
    $drafted = 0;

while($crossedRow = mysql_fetch_array($crossedAnswer))
{

    if($row['NAME'] == $crossedRow['name'])
    {
        $drafted = 1;
    }
    else
    {
        $drafted = 0;
    }
}
if ($drafted == 1)
{
    echo "<tr class='drafted' id='" . $row['NAME'] . "'>";
}
else if($n&1)
{
    echo "<tr id='" . $row['NAME'] . "'>";
}else
{
    echo "<tr class='alt' id='" . $row['NAME'] . "'>";
}

...} 
```

$resultbat 中是所有玩家的列表，$crossedAnswer 中是应该标记的几个玩家的列表。对于每个玩家，我想查看他们是否在 $crossedAnswer 玩家列表中。如果是，我想将该 html 元素的类标记为草稿。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:35:49.143

我认为您要么需要：

*   `$crossedAnswer`为每一行打开游标`$resultbat`（在每个循环开始时打开它，并在结束时关闭它，这有效地为每个 for in 运行该查询`resultbat`），或者

*   将结果集中的所有行提取`$crossedAnswer`到一个结构中，并从 中查看每一行的结构`$resultbat`（以避免对数据库多次运行相同的查询），或者

*   确保 $resultbat 和 $crossedAnswer 都按键值排序，并且只执行一个循环；打开两个游标，从每个游标中获取一行，然后比较键值以确定哪个结果集“落后”，以及从哪个结果集获取（这更有效，但编写和测试的代码更复杂），或者

*   如果这些结果集来自同一个 MySQL 服务器，则将其重写为单个查询，并让 MySQL 完成将行连接在一起的工作，并只处理单个结果集。

* * *

就个人而言，我会选择最后一个。我会让 MySQL 进行连接，返回一个结果集和一个循环。

获取结果集的查询将采用以下形式：

```
SELECT b.*
     , IF(a.name IS NOT NULL,1,0) AS drafted
  FROM (
         query_for_$resultbat
       ) b
  LEFT
  JOIN (
         query_for_$crossedAnswer
       ) a
    ON b.name = a.name 
```

请注意，如果在 中找到匹配行`a`，则该`drafted`列将返回 1，否则，它将返回 0。

* * *

基于原始代码处理此结果集的代码可能如下所示：

```
while($row = mysql_fetch_array($result))
{
    $class = "";
    if($row['drafted'] == 1
    {
        $class = "class='drafted' ";
    }
    else if($n&1)
    {
        $class = "";
    }
    else
    {
        $class = "class='alt' ";
    }

    echo "<tr " . $class . " id='" . $row['NAME'] . "'>";
    ...
} 
```