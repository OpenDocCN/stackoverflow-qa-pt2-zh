# StackOverflow 问答 12998000-12998999

# asynchronous - 如何从异步函数设置全局变量

> ID：12998003
> 
> 赞同：3
> 
> 时间：2012-10-21T12:57:21.647
> 
> 标签：asynchronous, google-chrome-extension, callback

我被困在这个异步函数问题上。我需要使用从回调函数获得的数据设置一个全局变量。我怎样才能做到这一点？

```
var soundId;

soundcheck(soundId, function (num){getSound(soundId, num)});
//callback 
function getSound (soundId, result) {
var res = result;
if (!soundId) {
    soundId = res;
    }
    console.log(soundId);
};

function soundcheck(soundId, callback) {
    var lpid = $("a#entered_user_link").attr('href').substring(6);
        chrome.extension.sendMessage({lpid: lpid}, function(response) {
        if (response.resp) {
            check = response.resp;
            callback(check);
        }
    });
};

// i need to put response in this variable to use it in future
console.log(soundId); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:28:47.713

您可能希望保持简单，特别是不要隐藏变量。

```
var soundId; 
```

```
soundCheck(function(result) {
  if(result) { 
    soundId = result;
  };
}); 
```

```
var soundCheck = function(callback) {
  var lpid = $("a#entered_user_link").attr('href').substring(6);
  chrome.extension.sendMessage({lpid: lpid}, function(response) {
    callback(response.resp);
  });
}; 
```

`soundId`毕竟没有理由四处走动。

# java - 用手指在安卓屏幕上画画

> ID：12998006
> 
> 赞同：1
> 
> 时间：2012-10-21T12:58:04.550
> 
> 标签：java, android, android-canvas, android-view

我正在尝试使用触摸事件在屏幕上创建绘图。我也成功地做到了。这是我使用的代码

```
public class DrawView extends View implements OnTouchListener {
    private static final String TAG = "DrawView";

    List<Point> points = new ArrayList<Point>();
    Paint paint = new Paint();

    public DrawView(Context context) {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);

        this.setOnTouchListener(this);

        paint.setColor(Color.BLACK);
        paint.setAntiAlias(true);
    }

    @Override
    public void onDraw(Canvas canvas) {
        for (Point point : points) {

            canvas.drawCircle(point.x, point.y, 8, paint);
            // Log.d(TAG, "Painting: "+point);
        }
    }

    public boolean onTouch(View view, MotionEvent event) {
        // if(event.getAction() != MotionEvent.ACTION_DOWN)
        // return super.onTouchEvent(event);
        Point point = new Point();
        point.x = event.getX();
        point.y = event.getY();
        points.add(point);
        invalidate();
        Log.d(TAG, "point: " + point);
        return true;
    }
}

class Point {
    float x, y;

    @Override
    public String toString() {
        return x + ", " + y;
    }
} 
```

如您所见，我在用户触摸的每个点上都画了一个圆圈。当用户缓慢移动手指时，我得到一条连续的线/曲线。但是如果用户快速移动他的手指，我不会得到连续的绘图。取而代之的是手指移动路径上的分隔点列表。

我怎样才能正确地做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:11:35.750

您应该绘制一条路径而不是点本身。在此处查看信息：http: [//developer.android.com/reference/android/graphics/Path.html](http://developer.android.com/reference/android/graphics/Path.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:19:36.093

我已经回答了一个类似的问题，在这篇文章中手绘地图视图：[手绘地图视图](https://stackoverflow.com/questions/12971866/android-how-to-draw-paint-in-free-hand-in-mapview-using-overlay/12987562#12987562)

您可以使用相同的代码，替换`GeoPoint`并`Point`删除 Geopoints 和 Points 之间的转换。

# asp.net - 绘制图形时在文本中输入回车

> ID：12998019
> 
> 赞同：0
> 
> 时间：2012-10-21T12:59:41.723
> 
> 标签：asp.net

当试图在使用 System.Drawing 命名空间中的工具创建的位图上放置文本时，如何在文本中放置回车符？

```
var text = "First Floor";
var font = new Font("Verdana", 42);
var textbrush = Brushes.Black;
var point = new PointF(plusC(60), plusC(20));
Graphics.FromImage(bmp).DrawString(text, font, textbrush, point); 
```

我怎样才能让一楼有回车？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:03:01.177

尝试这个

```
var text = "First Floor\n"; 
```

那可能行不通。根据我绘制图形的经验，无法指定换行符或回车符。每张图纸都取决于您放置它们的方式和位置

如果我有

```
 DrawString("First sentence", x, y); 
```

为了实现新线，我必须在 y 下面绘制下一个对象

```
 DrawString("Second sentence", x, y + 20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:04:10.627

你试过这样吗：

```
var text = "First Floor\r"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:12:00.973

谢谢您的帮助。

\r\n 成功了。

# android - 模拟器索尼 xperia S 和三星 Galaxy s3 (android)

> ID：12998021
> 
> 赞同：-1
> 
> 时间：2012-10-21T12:59:52.720
> 
> 标签：android, emulation, skins

我在android中开发了一个应用程序，我需要在三星galaxy S3，xperia S上测试该应用程序，我该如何下载模拟器。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:09:39.293

您将需要自己创建模拟器图像。这些图像称为 Android 虚拟设备 (AVD)。

有很多教程，但基本上，您需要根据您希望模拟的设备的特定要求创建模拟器图像 (AVD)（在大多数情况下，屏幕尺寸将是您想要测试的最重要的东西） .

这是官方文档的链接：http: [//developer.android.com/tools/devices/index.html](http://developer.android.com/tools/devices/index.html)

# ruby - 创建哈希时出现意外的语法错误“，”

> ID：12998026
> 
> 赞同：0
> 
> 时间：2012-10-21T13:00:15.447
> 
> 标签：ruby

我在这一行有一个语法错误：

```
credit_card = {
  :user => :credit_card_number,
  "credit_card_date(2i)",
  "credit_card_date(1i)",
  :credit_card_name,
  :credit_card_surname,
  :credit_card_ccv
}} 
```

使用 1.8.7-p370 我收到此错误：

> 语法错误意外'，'

尽管如此，我的应用程序可以正常工作，但我无法修复此错误。我错过了什么？我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:59:45.667

您尝试制作的哈希格式非常糟糕，您要么缺少键，要么您想要的结构（嵌套？）以某种方式混淆了。

你能说明你想要什么最终结果吗？

如果它只是一个平面哈希，它需要更像这样：

```
credit_card = {   
  :user => :credit_card_number,
  :missing_hash_key => "credit_card_date(2i)",
  :missing_hash_key_2 => "credit_card_date(1i)",
  :missing_hash_key_3 => :credit_card_name,
  :missing_hash_key_4 => :credit_card_surname,
  :missing_hash_key_5 => :credit_card_ccv } # you also had an extra end bracket here '}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T13:04:30.433

你应该这样做：

```
credit_card = {:user => {:credit_card=>'Your credit card info'}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T13:55:01.643

你得到的错误是因为你的 Hash 语法是错误的，你又写了一个额外的结束花括号，它没有对应的左花括号。哈希总是应该有键值对。所以你可以这样写。

```
user = {:credit_card => { :credit_card_number => "some_numb", 
        :credit_card_date_2i => "some_string"}, ...} 
```

# android - Android应用程序的奇怪重启

> ID：12998032
> 
> 赞同：2
> 
> 时间：2012-10-21T13:01:09.533
> 
> 标签：android, savestate

可能是我误解了它应该如何工作，但发生了一些奇怪的事情。

我们的主要活动是“MainMenuActivity”，我们称之为子菜单。用户从那里选择一个选项并获取一些数据，然后可以放大该数据。

如此有效地，我们有一个 A -> B -> C -> D 链

然后我通过拨打电话强制应用程序完成。logcat 清楚地表明应用程序死了。然后，当它重新启动时，我会在活动上超时。这就是 logcat 的样子：

```
 10-21 14:42:06.018: I/ActivityManager(1156): Starting: Intent { cmp=com.applicat.meuchedet/.MenuScreenActivity (has extras) } from pid 22170
10-21 14:42:06.558: I/ActivityManager(1156): Displayed com.applicat.meuchedet/.MenuScreenActivity: +469ms
10-21 14:42:10.728: I/ActivityManager(1156): Starting: Intent { cmp=com.applicat.meuchedet/.PrescriptionsListScreen } from pid 22170
10-21 14:42:11.368: I/ActivityManager(1156): Displayed com.applicat.meuchedet/.PrescriptionsListScreen: +591ms
10-21 14:42:26.068: I/ActivityManager(1156): Starting: Intent { cmp=com.applicat.meuchedet/.MedicinePurchasesListScreen (has extras) } from pid 22170
10-21 14:42:26.758: I/ActivityManager(1156): Displayed com.applicat.meuchedet/.MedicinePurchasesListScreen: +624ms
10-21 14:43:11.288: I/ActivityManager(1156): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.applicat.meuchedet/.MainActivity bnds=[242,271][358,389] } from pid 21281
10-21 14:43:42.288: I/ActivityManager(1156): Process com.applicat.meuchedet (pid 22170) has died.
10-21 14:43:56.948: I/ActivityManager(1156): Start proc com.applicat.meuchedet for activity com.applicat.meuchedet/.MedicinePurchasesListScreen: pid=22483 uid=10106 gids={3003}
10-21 14:43:58.188: W/ActivityManager(1156):   Force finishing activity com.applicat.meuchedet/.MedicinePurchasesListScreen
10-21 14:43:58.698: W/ActivityManager(1156): Activity pause timeout for HistoryRecord{40553fb8 com.applicat.meuchedet/.MedicinePurchasesListScreen}
10-21 14:44:07.308: W/ActivityManager(1156): Activity idle timeout for HistoryRecord{40553fb8 com.applicat.meuchedet/.MedicinePurchasesListScreen}
10-21 14:44:08.708: W/ActivityManager(1156): Activity idle timeout for HistoryRecord{409a4ad8 com.applicat.meuchedet/.PrescriptionsListScreen} 
```

MenuScreenActivity 是上面描述的“B”。PrescriptionsListScreen 是“C”。MedicinePurchasesListScreen 是“D”。

我在 D 中添加了 Log 命令，但它没有到达那里的“onSaveInstanceState”和“onRestoreInstanceState”方法。

它似乎确实回到了“C”并进入了它的“onRestore”，但捆绑中有垃圾。视图结构未重建。

我在“C”中得到一个 NullPointerException，因为视图没有被重建。

为了确保它们不是我添加了打印出视图当前内容的完整树的日志命令。在 C 中的“onSave”之前它是可以的，但在执行“onRestore”之后它是空的。

我肯定会打电话给“onSave”和“onRestore”中的“super”。

============================================

编辑：我在“onSaveInstanceState”末尾和“onRestoreInstanceState”开头记录了savedInstance的内容。

这就是我得到的。

节省：

```
onSaveInstanceState -    Bundle = Bundle[{android:viewHierarchyState=Bundle[{android:views=android.util.SparseArray@40730568}], SavedData=com.applicat.meuchedet.MedicinePurchasesListScreen$MedicinePurchasesListScreen_SaveData@407c4ae0}]. contents = [android:viewHierarchyState, SavedData] 
```

恢复：

```
onRestoreInstanceState - Bundle = Bundle[{android:viewHierarchyState=Bundle[mParcelledData.dataSize=5368], SavedData=com.applicat.meuchedet.PrescriptionsListScreen$PrescriptionsListScreen_SaveData@40563c60}]. contents = [android:viewHierarchyState, SavedData] 
```

可以看出，“viewHierarchyState”包是不一样的。但是，在其他可以正常工作的屏幕中。

这个和其他屏幕唯一的区别就是这里的屏幕内容是一个TabHost。但是，这不是 TabActivity。这是一个普通的活动，带有标签主机的 XML 并在代码中设置。

# android - Android：禁用更改系统设置

> ID：12998033
> 
> 赞同：0
> 
> 时间：2012-10-21T13:01:16.700
> 
> 标签：android

我们要防止用户更改系统设置。我们可以禁用提供对设置按钮的访问的右下角菜单吗？

硬件：7-ich 平板电脑，如带有 ICS 4.0 的 Kindle Fire

# cakephp - CakeDC 用户插件如何扩展它以能够自定义登录控制？

> ID：12998036
> 
> 赞同：3
> 
> 时间：2012-10-21T13:01:57.510
> 
> 标签：cakephp, authentication, login, cakedc

我正在使用 cakePHP 2.0，并且已经安装了 cakeDC 用户插件。用户插件似乎正在工作，只要我可以登录并被重定向到插件的 UsersController _setupAuth 函数中定义的“/”。

但是，当我想修改它时，我将[另一个 stackoverflow 问题](https://stackoverflow.com/questions/6461705/cakedc-user-plugin-is-there-documentation-anywhere?rq=1)中的一些身份验证设置代码添加到我的 AppController beforeFilter 函数中。

问题是，这似乎被忽略了，UsersController 中的 _setupAuth 代码优先。

所以，我的问题是，如何在我的 AppController 中添加自定义重定向控件，而无需更改插件中的代码？

我更困惑的是，我链接到的问题告诉我们在 AppController 中放置一个 isAuthorized 函数，这似乎意味着我必须在 UsersAppController 中删除该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:29:49.467

这个想法是你通过在你的`app`.

您`Auth`在`AppController`. 您还需要`Auth`在项目中包含该组件。

然后在您的`AppController::beforeFilter()`您可以配置您的特定设置，例如

```
$this->Auth->loginRedirect = '/'; 
```

因此，您链接到的另一个问题是正确的，但您不需要所有设置，只需要您想要覆盖的设置。

如果您使用 Controller 身份验证，我还强烈建议`isAuthorized()`您向 AppController 添加一个，因为您需要控制谁可以看到什么。**不要**像另一个问题所说的那样只返回true，因为您没有检查任何不好的角色或登录。

如果您想更改登录操作，您需要在您的“应用程序/控制器”中创建自己的控制器并将其命名为 以外的其他名称`Users`，我倾向于使用`MyUsersController.php`此控制器，您需要扩展插件控制器。您将需要包含文件`App::uses('Users.UsersController','Controller')`或类似文件，然后您的控制器可以

```
class MyUsersController extends UsersController{
  public function login(){

  }
} 
```

虽然我不需要使用用户插件来执行此操作，所以也许只需尝试配置您的`AppController::beforeFilter()`第一个，并检查您是否`parent::beforeFilter()`在顶部调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:00:27.630

您是否更改了 routes.php 重定向？这是我的，我禁用了插件路由来引用我自己的控制器 AppUsersController.php

请注意，我使用 /admin/ 前缀。如果您不需要它，请删除路由路径开头的“/admin/”，以及“prefix”和“admin”键表。

```
Router::connect('/admin/users', array('plugin' => null, 'controller' => 'app_users', 'prefix' => 'admin', 'admin' => true));
Router::connect('/admin/users/index/*', array('plugin' => null, 'controller' => 'app_users', 'prefix' => 'admin', 'admin' => true));
Router::connect('/admin/users/users/:action/*', array('plugin' => null, 'controller' => 'app_users', 'prefix' => 'admin', 'admin' => true));
Router::connect('/admin/users', array('plugin' => null, 'controller' => 'app_users', 'prefix' => 'admin', 'admin' => true));
Router::connect('/users/:action/*', array('admin' => false, 'plugin' => null, 'controller' => 'app_users'));
Router::connect('/login/*', array('plugin' => null, 'controller' => 'app_users', 'action' => 'login'));
Router::connect('/logout/*', array('plugin' => null, 'controller' => 'app_users', 'action' => 'logout'));
Router::connect('/register/*', array('plugin' => null, 'controller' => 'app_users', 'action' => 'add')); 
```

# mysql - 在 Mac 上运行 MySql

> ID：12998039
> 
> 赞同：0
> 
> 时间：2012-10-21T13:02:29.487
> 
> 标签：mysql, macos

我刚刚在mac上成功安装了MySql，根据网站，我应该在终端中输入以下命令才能开始：

```
cd /usr/local/mysql
sudo ./bin/mysqld_safe 
```

我输入了命令，在我的 MySQLPrefs 面板上它显示 MySql 服务器正在运行，但我的终端上没有其他任何事情发生。它只是显示

```
Starting mysqld daemon with databases from /usr/local/mysql-5.5.28-osx10.6-x86/data 
```

我知道这是一个愚蠢的问题，但我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:17:24.000

启动 MySQL 命令行界面：

```
/usr/local/mysql/bin/mysql -u root 
```

我认为mac上的mysql自动启用无需密码的root访问。如果您想更改密码，请查看此链接：[http ://www.cyberciti.biz/faq/mysql-change-root-password/](http://www.cyberciti.biz/faq/mysql-change-root-password/)

如果您只想`mysql`在 shell 提示符下编写代码，请编辑您的`.bash_profile`文件并在末尾添加以下行：

```
export PATH=$PATH:/usr/local/mysql/bin/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-02T20:44:25.817

这是一个广泛的问题，但也是每个刚入门的人都会以一种或另一种方式提出的问题。如果安装了，我们如何使用它？下一步应该是什么？

**首先知道如何验证它是否正在运行。**您的安装可能会设置为在计算机重新启动时自动加载。虽然这是最常见的配置，但也可以将其设置为不自动加载。因此，验证它是否正在运行是重要的第一步。您始终可以使用以下命令检查服务器状态：

```
*mysqladmin -u root -p status* 
```

如果正在运行，这将返回服务器状态和详细信息。该语法假定 $PATH 变量添加了 MySQL 文件路径。如果没有，您可以提供可执行文件的完整路径。

```
*/usr/local/mysql/bin/mysqladmin -u root -p status* 
```

您应该考虑将文件夹路径添加到 $PATH 变量。对此的解释已经在另一个答案中给出。

您安装 MySQL 的目的是构建数据库。检查一些默认的数据库结构也是值得的。无论哪种方式，您都需要与数据库服务交互以创建、管理、查询和检查数据库及其组件。

**接下来你需要知道的是使用什么来与 MySQL 交互。**为此，有所有类型的选项。默认和最基本的是在终端中使用“mysql”命令行客户端。它位于与上述命令相同的路径中。这可以通过三种方式使用：

1.  输入带有足够参数的命令以登录到 shell，然后使用 shell 界面运行其他 SQL 命令：*mysql -u root -p*。
2.  输入带有其他选项的命令，这些选项将在一行中执行您的命令。有关这方面的详细信息，请使用 MySql 参考手册。
3.  使用要运行的命令创建一个 .sql 脚本，使用 mysql 调用此脚本：*mysql db_name < script.sql > output.tab*。（上面的命令调用可执行文件，指定数据库，使用“<”输入脚本并使用“>”将输出定向到文件）。

所有这些都可以在*MySQL Command-Line Client* [(found here)](https://dev.mysql.com/doc/)下的 MySQL 文档中找到。

了解命令行客户端是件好事，每个从 MySQL 开始的人都应该熟悉它的工作原理。然而，我认识的每个数据库人员，包括我自己，都使用图形工具来执行他们的大部分 MySQL 操作。MySQL 有一个图形界面作为 MySQL 工作台的一部分。这是许多人使用的默认工具。

还有许多其他轻量级图形应用程序也可以让您使用 MySQL。为了避免宣传任何商业产品，我只提到一个。大多数 MySQL 专业人员至少熟悉 phpMyAdmin。它是在所有操作系统平台上使用的基于 Web 的工具。我并不声称它是最简单、最快或最好的。但它可以很好地满足大多数需求，并且多年来一直是标准的 MySQL 工具。除此之外，您的应用商店、软件包管理器或网络搜索肯定会产生许多选项，并且您一定会找到适合您需求的选项。

**最后，您将需要对命令进行培训。**有很多关于 MySQL 命令的培训资源，包括[这里](https://dev.mysql.com/doc/)的 MySQL 文档。参考手册将是您的命令。MySQL 文档也有教程。您可以搜索数十个博客和专业视频培训。您选择如何学习是个人喜好（可能还有预算）的问题。

请记住，数据库很少单独使用。它们通常存储数据支持任意数量的本地或基于云的应用程序。采取这些第一步将使您入门，但您还应该准备好了解使用它们的应用程序以及如何连接它们。

And of course, there's always Stackoverflow for questions. This particular question has been around for years without any further updates and it seemed that at least a discussion of how to get started was in order.

# php - PhpMyAdmin en PDO 之间的结果查询差异

> ID：12998043
> 
> 赞同：0
> 
> 时间：2012-10-21T13:03:10.007
> 
> 标签：php, mysql, pdo

我在 PHP/PDO 中准备了以下查询。

```
SELECT
    count(distinct(p.accid)) as aantal
FROM 
    winter_accommodaties_prijzen p
INNER JOIN winter_accommodaties a ON (a.id = p.accid)
INNER JOIN winter_dorpen d ON (d.id = a.did)
INNER JOIN winter_gebied g ON (g.id = d.gid)
INNER JOIN winter_accommodaties_types t ON (a.tid = t.id)
WHERE
    g.lid IN(:lid0) AND 
    g.min_hoogte >= :hoogte AND
    (g.pistes_groen+g.pistes_blauw+g.pistes_rood+g.pistes_zwart) >= :km AND 
    d.hoogte_dorp >= :hoogte_dorp AND 
    d.afstand_utrecht <= :afstand_utrecht AND 
    prijs < : max_prijs AND 
    p.persons >= :aantal_personen 
```

然后我将以下数组绑定到此查询：

```
 Array
 (
  [:lid0] => 1
  [:hoogte] => 500
  [:km] => 50
  [:hoogte_dorp] => 500
  [:afstand_utrecht] => 2500
  [:max_prijs] => 1200
  [:aantal_personen] => 4
 ) 
```

通过 PHP 运行它，我得到 'aantal': 97 (results) 的结果。如果我运行上面的查询，用它们对应的值替换所有变量，我会通过 PhpMyAdmin 得到 124 个结果。使用 mysql_query 在 PHP 中以老式方式运行相同的查询，我也得到 124 个结果。

我在导致差异的 PDO 查询中遗漏了什么？

更新 AL_ 的请求 => 创建 PDO 连接：

```
$conn = new PDO(DB_DSN, DB_USER, DB_PASSWORD);
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$query = "See query above"

$query_pag_no = $conn->prepare($query); // the above query
$query_pag_no->execute($bind_array);    // the above array

$aantal_resultaten = $query_pag_no->fetchColumn(); 
```

$aantal_resultaten 中的结果是 97（行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:44:46.993

`:min_personen`看起来没有在参数数组中定义。一探究竟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:59:55.260

问题在于数据库的设置方式以及 Pdo->prepare 如何发送信息。它总是在变量上加上单引号，这是我们不期望/在 phpmyadmin 选项中使用的。从而造成分歧。感谢所有好的建议。

# c++ - readdir() 显示不可见文件

> ID：12998046
> 
> 赞同：2
> 
> 时间：2012-10-21T13:03:24.543
> 
> 标签：c++, c, linux, readdir, dirent.h

我在 Ubuntu 中使用 readdir() 来显示文件和目录。奇怪的是 readdir() 显示一些以“点”开头的文件，以及一些以 ~ 结尾的文件。但是这些文件不在我指定的目录中。

这些文件是什么？

我想知道在读取文件名时，这些奇怪的文件是否也会被 d_name 提及？

![在此处输入图像描述](../Images/c66fa54a1a79b2ec3d75593c8a1f37f4.png)

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:04:16.037

`readdir`读取文件夹中存在的所有文件，同时`ls`仅列出非隐藏文件。尝试使用 列出您的文件`ls -a`，您将看到这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:08:35.127

按照惯例，名称以点开头的文件在类 Unix 操作系统中是隐藏的（参见[此处](http://en.wikipedia.org/wiki/Hidden_file_and_hidden_directory#Unix_and_Unix-like_environments)）。

您当然可以检查 readdir 生成的文件名开头的点，而根本不返回/输出那些。

# php - 无法向某些服务器发送电子邮件

> ID：12998047
> 
> 赞同：0
> 
> 时间：2012-10-21T13:03:35.297
> 
> 标签：php, smtp, timeout, phpmailer

当我尝试从我的 phpmailer 类发送电子邮件时，它返回 true，但在 Directadmin 邮件日志中它记录了 TimeOut。

> 2012-10-21 14:22:14 1TPsca-0000t7-Vj gmail-smtp-in.l.google.com [2a00:1450:4013:c01::1a] 连接超时
> 
> 2012-10-21 14:22:14 1TPsca-0000t7-Vj => [电子邮件] F=<[电子邮件]> R=lookuphost T=remote_smtp S=3286 H=gmail-smtp-in.l.google.com [ 74.125.136.26] X=TLSv1:RC4-SHA:128 C="250 2.0.0 OK 1350822120 f43si4569491eem.30"
> 
> 2012-10-21 14:22:14 1TPsca-0000t7-Vj 完成

但电子邮件没有发送。

我怎样才能解决这个问题？

谢谢！沃特0100

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:26:45.900

连接超时意味着无法再访问邮件服务器。如果邮件服务器与您的网络服务器不同（即不是本地主机），我会与您的托管服务提供商核实他们是否启用了某种防火墙来阻止 SMTP 端口上的连接

您收到的错误意味着此行上的连接失败：SMTP.Connect()。

通常，这意味着端口错误，服务器未启动，或者您没有连接。

在这种情况下，您没有连接，很可能是因为您的 ISP 阻止了与该远程端口的连接。

尝试从您的托管 Web 服务器发送电子邮件。

即使您可以连接，您的代码也不会按原样工作。Google SMTP 服务器上的端口 465 需要安全 (SSL) 连接。你仍然需要实现它。

如果我没记错的话，Gmail 的 SMTP 服务器需要 SSL。试试这个

```
$this->Email->smtpOptions = array(
'port'=>'465', 
'timeout'=>'30',
'host' => 'ssl://smtp.gmail.com',
'username'=>'your_username@gmail.com',
'password'=>'your_gmail_password',
); 
```

另请阅读[support.google.com/mail/bin/answer.py?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287) - SSL 必须用于使用 GMail SMTP 服务器。引用：“如果您的客户端不支持 SMTP4 身份验证，您将无法使用您的 Gmail 地址通过您的客户端发送邮件。”

# php - 从其他类调用一个类中的函数

> ID：12998049
> 
> 赞同：1
> 
> 时间：2012-10-21T13:03:43.947
> 
> 标签：php, class

假设我有一个 PHP 文件`file1.php`。像这样的东西：

```
<?php
class sqlClass {
public function one { //do something }
?> 
```

然后在其他 PHP 文件`file2.php`中，我有这个：

```
<?php 
class encryption_class {
public function two { //do something }
} 
```

如何从类上的函数调用类`two`内`encryption_class`的`file2.php`函数？`one``file1.php``sqlClass`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:07:56.337

像这样：

```
<?php

require_once "file2.php"; 

class sqlClass {
    public function one {
        //do something

        $encript = new encryption_class();
        $encript->two(); 

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:07:11.490

首先包含`file2`在`file1`

```
include_once "file2.php"; 
```

然后创建对象并调用。

```
$a = new encryption_class ();
$a->two(); 
```

# php - 带有自签名证书的 PHP SOAP

> ID：12998054
> 
> 赞同：2
> 
> 时间：2012-10-21T13:04:23.837
> 
> 标签：php, soap, ssl, ssl-certificate

我在使用 SoapClient 调用 php 中的 websevrice 时遇到了一些问题。该网络服务有一个自签名证书。

这是在 Windows 7 上的 wamp 2 上运行的

这是代码：

```
<?php
    $client = null;

    $wsdlLocation = "https://uat.xxxx.com/wsdl/customer.wsdl";
    $cert = 'c:\Projects\***\certname.cer';
    $client = new SoapClient($wsdlLocation, array('local_cert' => $cert));

?> 
```

我收到以下错误：

致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从“https://uat.xxx.com/wsdl/customer.wsdl”加载：无法加载外部实体“https:// uat.xxx.com/wsdl/customer.wsdl" 在 C:\Projects**\auth\test.php:10 堆栈跟踪：#0 C:\Projects** *\auth\test.php(10): SoapClient- >SoapClient('https://uat.ser...', Array) #1 {main} 在 C:\Projects** \auth\test.php 中抛出

第 10 行

有什么线索吗？我已经尝试过完整和相对路径。我很好奇我被告知使用这个 .cer 文件而不是 .pem 文件这一事实？我还将证书添加为证书存储中的受信任机构。

# c++ - Visual C++ 中无法启动程序错误

> ID：12998057
> 
> 赞同：1
> 
> 时间：2012-10-21T13:04:32.563
> 
> 标签：c++, visual-studio-2010, visual-c++

每当我尝试在调试模式下从 Visual C++ 2010 Express IDE 启动程序时，我都会在消息框中收到以下错误。

```
Unable to start program <program name>
The object invoked has disconnected from its clients 
```

请注意，我也是第一次使用[Visual Leak Detector](http://vld.codeplex.com/)，可能与它有关。

# javascript - 快递错误：找不到模块'../..'

> ID：12998058
> 
> 赞同：1
> 
> 时间：2012-10-21T13:04:37.833
> 
> 标签：javascript, node.js, express, npm

我是 node.js 的初学者。我在 Ubuntu 12.04 上安装了 node，它适用于简单的简单应用程序。我还使用以下方式安装了快递：

```
npm install -g express 
```

我相信安装工作正常，因为我没有收到任何错误，但现在我想从示例中运行他们的一个应用程序（mvc 之一），我收到以下错误：

```
module.js:340
    throw err;
          ^
Error: Cannot find module '../..'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/home/andreii/Desktop/node/mvc/index.js:2:15)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

关于如何解决这个问题的任何想法？非常感谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:02:52.790

```
var express = require('../..'); 
```

只需像这样更改代码的第一行

```
var express = require('express'); 
```

之后一切顺利。

# php - 使用 Symfony 检查控制器内是否处于“开发”模式

> ID：12998060
> 
> 赞同：42
> 
> 时间：2012-10-21T13:04:43.257
> 
> 标签：php, symfony, dependency-injection, controller, containers

**当在Symfony2.x**应用程序中使用开发模式时，通常在语言环境中工作。因此，此类功能无法按预期工作（例如，尝试获取 localhost 下的当前 IP）。这可能是一个问题，例如当尝试使用这种基于 ip 的 Web 服务时。因此，**我只想知道如何在控制器内部检查 Symfony2 应用程序是否在*开发*模式下**运行。通过这种方式，可以根据模式设置控制器的行为。

任何的想法？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-21T13:13:16.007

要获取当前环境，`Controller`您可以使用：

```
$this->container->getParameter('kernel.environment'); 
```

因此，您只需将其放在`if()`语句中以检查它是否等于`dev`.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-04-24T10:42:21.363

从 Symfony **2.5**开始，它可以这样完成：

```
$this->container->get('kernel')->getEnvironment(); 
```

直接向内核询问它的环境看起来比搜索参数更好。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-10-26T13:54:23.003

由于您想知道您是否处于开发模式（不一定是名为“dev”的环境），您可以从服务容器中检索内核并检查`isDebug`方法返回：

```
$kernel = $this->get('kernel');
$devMode = $kernel->isDebug(); 
```

如[文档中所述](https://symfony.com/doc/current/configuration/environments.html#executing-an-application-in-different-environments)（重点是我的），

> 重要但与环境主题无关的是`true`or`false` 参数作为`AppKernel`构造函数的第二个参数。**这指定应用程序是否应该在“调试模式”下运行。无论环境如何，Symfony 应用程序都可以在调试模式设置为 true 或 false 的情况下运行**。这会影响应用程序中的许多事情，例如在错误页面上显示堆栈跟踪，或者是否在每个请求上动态重建缓存文件。尽管不是必需的，但调试模式通常设置为开发和测试环境的 true 和 prod 环境的 false。
> 
> 在内部，调试模式的值成为服务容器内部使用的 kernel.debug 参数。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-10-24T13:03:37.023

# Symfony 3.3/4/5+ 解决方案

这是使用**Constructor Injection的****2017 和 Symfony 3.3+**版本。

 **而不是传递给你整个应用程序（=容器），你可以**只传递你需要的参数**：

## 1.服务配置

```
# app/config/services.yml
services:
    _defaults:
        autowire: true

    App\Controller\SomeController:
        arguments: ['%kernel.environment%'] 
```

如果你不理解这个语法，[请查看这篇解释 Symfony DI news in before/after examples 的帖子](https://www.tomasvotruba.cz/blog/2017/05/07/how-to-refactor-to-new-dependency-injection-features-in-symfony-3-3/)。

## 2\. 控制器

```
namespace App\Controller;

final class SomeController
{
    /**
     * @var string
     */
    private $environment;

    public function __construct(string $environment)
    {
        $this->environment = $environment;
    }

    public function someAction()
    {
        $this->environment...
        // any operations you need
    }
} 
```

## 为什么要避免在 Controller 中传递 Container？

代码中最重要的是**一致性**。

*   如果您更喜欢静态和服务定位器（= 您可以通过任何地方获取任何其他服务的服务），请使用它。

*   如果您更喜欢构造函数注入、树依赖图（！= 循环依赖），请使用它。

如果您知道为什么以这种方式使用它们，那么混合这个概念可能对您来说没问题。但是这里来玩[破窗理论（Coding Horror 很好地描述了版本）](https://blog.codinghorror.com/the-broken-window-theory/)。任何接触代码的人**都更有可能选择不打算以这种方式使用的版本**。

### 代码中的歧义是遗留代码的第一个邀请

我指导过许多应用程序的团队，从简单`$this->container`的代码开始，几年后最终打电话给我寻求帮助，如何重写或重构整个静态地狱。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-07-14T22:38:48.133

**Symfony 5.1**

`$this->devEnvironment = 'dev' === getenv('APP_ENV');`

我在 Symfony 服务中使用它。您需要将该行添加`APP_ENV=dev`到 .env.local 和`APP_ENV=prod`.env 文件。取决于您是否有与我类似的环境设置

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-12-04T12:23:44.180

来自 Symfony 4.1 内部的 Service

```
class MyService
{
    private $params;
    public function __construct(ParameterBagInterface $params)
    {
        $this->params = $params;
    }
    public function check($e)
    {
       if($this->params->get("kernel.environment") === "dev") 
       {
            return true;
       }
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-04-08T12:02:00.337

在 Symfony 4 及更高版本中，您可以简单地使用：

```
if ($this->getParameter('kernel.environment') === 'dev') {
    // ...
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-07T13:32:29.880

# 对于 Symfony 4.1+

我更喜欢避免`kernel`在我的控制器和服务中使用。

***服务.yaml：***

```
parameters:
    app.environment: '%kernel.environment%'
    ... 
```

***您的控制器/服务：***

```
class MyService
{
    private $isDev;

    public function __construct(ParameterBagInterface $appParams)
    {
        $this->isDev = $appParams->get('app.environment') === 'dev';
    }

    public function doSomething()
    {
        if ($this->isDev)
        {
            ...
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2019-08-29T16:18:54.240

# 对于 Symfony 4.x 及更高版本

如果您`.env`用于存储环境变量，您可以**在任何控制器**中访问它们，只需使用**`$_ENV['name-of-variable']`**

对于默认安装，有一个`$_ENV["APP_ENV"]`变量可用，它将告诉您是否处于开发模式。

* * *

用于**`print_r($_ENV);`**查看所有可用的环境变量。

[ps - 这也适用于 Symfony 3.4]

* * *

**参考**- [https://symfony.com/doc/4.3/components/dotenv.html](https://symfony.com/doc/4.3/components/dotenv.html)**

# php - simplexml_load_file 结果。我需要帮助从这个返回的 XML 消息中提取错误消息

> ID：12998061
> 
> 赞同：0
> 
> 时间：2012-10-21T13:04:47.787
> 
> 标签：php, file, load, simplexml

当我与之通信的站点因维护而关闭时，我收到以下 XML 消息，我需要检测并检索错误消息“xxxxxxxxx.com 在我们执行常规系统维护时暂时不可用”。希望有人能帮忙！

```
SimpleXMLElement Object (
  [head] => SimpleXMLElement Object ( 
    [meta] => SimpleXMLElement Object (
      [@attributes] => Array ( 
        [http-equiv] => Content-Type 
        [content] => text/html; charset=UTF-8 
      ) 
    ) 
    [title] => Updates In Progress 
    [link] => SimpleXMLElement Object ( 
      [@attributes] => Array ( 
        [href] => style/style.css 
        [rel] => stylesheet 
        [type] => text/css 
      ) 
    ) 
  ) 
  [body] => SimpleXMLElement Object (
    [div] => SimpleXMLElement Object (
      [@attributes] => Array (
        [id] => container 
      ) 
      [div] => Array (
        [0] => SimpleXMLElement Object ( 
          [@attributes] => Array ( 
            [id] => header 
          ) 
          [img] => SimpleXMLElement Object ( 
            [@attributes] => Array ( 
              [src] => images/top_banner.jpg 
              [alt] => xxx Freight | Updates In Progress 
            ) 
          ) 
        ) 
        [1] => SimpleXMLElement Object ( 
          [@attributes] => Array ( 
            [id] => wrapper 
          ) 
          [div] => Array ( 
            [0] => SimpleXMLElement Object ( 
              [@attributes] => Array ( 
                [id] => leftCol 
              ) 
              [p] => Array ( 
                [0] => SimpleXMLElement Object ( 
                  [strong] => SYSTEM MAINTENANCE 
                ) 
                [1] => xxxxxx.com is temporarily unavailable while we perform regular system maintenance. 
                [2] => We're sorry for the inconvenience. Please check back soon. 
              ) 
            ) 
            [1] => SimpleXMLElement Object ( 
              [@attributes] => Array ( 
                [id] => rightCol 
              ) 
              [p] => For immediate assistance, please contact Customer Service at 1-800-610-6500\. 
            ) 
            [2] => SimpleXMLElement Object ( 
              [@attributes] => Array ( 
                [class] => clearfloat 
              ) 
            ) 
          ) 
        ) 
      ) 
    ) 
  ) 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:54:40.273

尝试使用[simpexml_tree()](https://github.com/IMSoP/simplexml_debug/blob/master/simplexml_tree.php)输出您的 SimpleXML 对象。它给出的输出应该提示您找到所需节点所需的操作。

但是，请注意，SimpleXML 仅在您的输入是有效的 XML 时才有效，这是 HTML，不能保证是有效的 XML。

如果可能，检查从服务器返回的 HTTP 状态（例如使用 CURL`CURLOPT_HEADERFUNCTION`选项）并查看服务器在关闭时是否返回标准 5xx 状态。（通常为 500 或 503）。

# continuous-integration - 带有项目依赖项 DAG 的 CI 服务器

> ID：12998064
> 
> 赞同：1
> 
> 时间：2012-10-21T13:05:19.010
> 
> 标签：continuous-integration, jenkins, hudson, cruisecontrol

是否有任何 CI 服务器（CruiseControl、Jenkins、Hudson、...）支持项目之间正确的 DAG（直接非循环图）依赖关系？那是：

假设您有一个公共库项目 A、两个实用程序库项目 B 和 C，它们都使用 A，但彼此独立，以及一个程序项目 D，它同时使用 B 和 C。在 CruiseControl.rb（我目前正在使用)，指定 B 依赖于 A、C 依赖于 A、D 依赖于 B 和 C 是很简单的。

如果有人提交到 B 或 C，则 CC.rb 将构建它，然后按预期构建 D。但是如果有人提交到 A，CC.rb 将构建 A，然后并行构建 B 和 C - 到目前为止，一切都很好。但是，假设 B 先完成构建；此时，CC.rb 将急切地开始构建 D，这很可能会失败，并且无论如何都是浪费时间，因为当 C 完成构建时，CC.rb 将去构建 D 第二次（这是构建我们实际上想要）。

我了解此行为并非特定于 CC.rb；如果 CI 服务器一次只考虑一个项目的依赖关系，这似乎是固有的。我正在寻找的是一个足够聪明的 CI 服务器，它可以确定 D 依赖于 B 和 C，并推迟构建它，直到两者都使用相同版本的 A 完成构建。或者，换句话说，一个 CI 服务器如果每个项目都是一个单独的 make 动作，它的工作原理类似于“make -j”会做的事情。

有这样的野兽吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:04:02.970

至少在 Jenkins 中，工作（或项目，如果你想这样称呼它们）可以以各种方式触发其他工作，甚至是开箱即用的，尤其是[插件](https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Buildtriggers)。显然与此处相关，可以“[加入](https://wiki.jenkins-ci.org/display/JENKINS/Join+Plugin)”不同作业的构建，以便在完成两个不同的作业后，触发第三个作业

我认为你可以很容易地用 Jenkins 构建你描述的系统（还有 Hudson，差别不大）。

# sql - 如何在 Windows Phone 7.1 中使用预定义数据库？

> ID：12998073
> 
> 赞同：2
> 
> 时间：2012-10-21T13:07:21.943
> 
> 标签：sql, windows-phone-7

我学习 Windows Phone 7 已经有一段时间了。然而，随着新的芒果更新，我们可以在 WP7.1 上使用 sql db。我的问题是，我已经准备好用表和数据填充我的数据库，那么如何在我的应用程序中使用它呢？就像在安装过程中如何将其部署到隔离存储以及在此之前如何在模拟器上试用它？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:03:52.243

查看[适用于 Windows Phone 的本地数据库概述](http://msdn.microsoft.com/en-us/library/hh202860%28v=vs.92%29.aspx)，应用程序部署部分

# c# - 如何将裁剪后的图像放在画布上？c#

> ID：12998074
> 
> 赞同：0
> 
> 时间：2012-10-21T13:07:24.970
> 
> 标签：c#, wpf, image, canvas, bitmap

在我的代码中，我选择了一个图像并被裁剪成 9 块。现在我想在我的画布中随机放置每一块。我该怎么做呢？

```
public void CutImage(string img)
    {
        int count = 0;

        BitmapImage src = new BitmapImage();
        src.BeginInit();
        src.UriSource = new Uri(img, UriKind.Relative);
        src.CacheOption = BitmapCacheOption.OnLoad;
        src.EndInit();

        for (int i = 0; i < 3; i++)
        {
            for (int j = 0; j < 3; j++)
            {
                objImg[count++] = new CroppedBitmap(src, new Int32Rect(j * 120, i * 120, 120, 120));
            }
        }
    }

    public void PositionImage(object[] objImage)
    {
        for (int i = 0; i < objImage.Length; i++)
        {
            TranslateTransform translateTransform1 = new TranslateTransform(rnd1.Next(1,360), rnd1.Next(1,360));
        }

        //movedRectangle.RenderTransform = translateTransform1;

        //mainCanvas.Children.Add(movedRectangle);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:09:00.240

尝试以下操作：

```
public void PositionImage(BitmapSource[] objImage)
{
    int a, x, y;
    BitmapSource t;
    Image img;

    // Shuffle the array
    for (a = 0; a < (objImage.Length * 2); )
    {
        x = rnd1.Next(objImage.Length);
        y = rnd1.Next(objImage.Length);
        if (x != y)
        {
            t = objImage[x];
            objImage[x] = objImage[y];
            objImage[y] = t;
            a++;
        }
    }
    for (a = y = 0; y < 3; y++)
        for (x = 0; x < 3; x++)
        {
            img = new Image();
            img.Source = objImage[a++];
            img.Width = img.Height = 120;
            Canvas.SetLeft(img, x * 120);
            Canvas.SetTop(img, y * 120);
            mainCanvas.Children.Add(img);
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:13:23.333

是否要求图像必须直接放置在画布元素上？如果您知道最终将获得的子图像的数量，则可以更轻松地在 XAML 中创建一系列 Image 元素，然后将它们的 Source 属性设置为图像子部分。

```
<Canvas>
  <Image Name="subimg1">
  <Image Name="subimg2">
  <Image Name="subimg3">
  ...
</Canvas> 
```

每个子图像都有单独的元素，并且可以根据需要在画布上移动它们。

# jquery - 如何使用 Capybara 模拟点击 jQuery-UI 模态对话框按钮？

> ID：12998075
> 
> 赞同：2
> 
> 时间：2012-10-21T13:07:27.987
> 
> 标签：jquery, jquery-ui, rspec, capybara

在 Web 应用程序中，我使用 jQueryUI 模式对话框来确认操作：

```
function erase() {
  $("#dialog").text("Are you sure want to delete this record?")
  .attr("title", "Delete...")
  .dialog({
    modal: true,
    buttons: {
      Delete: function() {
        $.ajax({
          ...snip...
          success: function() {
            self.location = "."; // returns to the welcome page
          }
        });
      },
      ...snip...
    }
  });
} 
```

该代码运行良好，但我无法成功使用 Capybara 对其进行测试：

```
...snip...
Capybara.default_driver = :webkit
...snip...

def in_dialog()
  f = find('.ui-dialog')
end

feature 'Delete a record' do
...snip...
  scenario 'for any record' do
    click_on 'Delete...'
    page.should have_content 'Are you sure want to delete this record?'
    in_dialog.click_button 'Delete'
    page.should have_content 'Welcome'
    ...snip...
  end
end 
```

Capybara 找到了按钮，但一切都好像从未触发过回调一样。

我尝试了不同的解决方法（我在 stackoverflow 上找到了其中几个）：

*   睡觉，
*   “等待ajax”，
*   page.native.send_keys(:return) 而不是 click_button 'Delete'，
*   find('button', :text => 'Delete').click 而不是 click_button 'Delete',
*   Selenium 驱动程序而不是 webkit 驱动程序。

没有工作。还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:05:09.063

嗯， sleep 至少应该有效，但这是我用来确保我的 AJAX 调用已返回的方法：

```
in_dialog.click_button 'Delete'
wait_until { page.evaluate_script("jQuery.active") == 0 }
page.should have_content 'Welcome' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:48:01.863

您在评论中发布[了用于与服务器交互的代码](https://gist.github.com/4547091)。

我在浏览器中手动执行了这些步骤，但单击“Supprimer”按钮返回 409 错误，没有其他任何反应。这就是为什么单击此按钮时测试中没有任何反应的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:23:59.603

您总是可以在 capybara 的场景中执行自定义 javascript 代码。您是否尝试过类似的方法：

```
# when
page.execute_script("$('.the-button-selector').click();")
# then
page.should_not have_css(".the-dialog-selector") 
```

# android - Android：httpCLient.execute 处的 UnKnownHostException

> ID：12998076
> 
> 赞同：0
> 
> 时间：2012-10-21T13:07:29.167
> 
> 标签：android, httpclient, unknown-host

我在**执行**步骤中收到**UnknownhostException ：**

 **```
httppost = new HttpPost("http://www.xxxx.com/contoller/method");
httpResponse response = client.execute(httppost);

java.net.UnknownHostException "www.xxxx.com" 
```

在我阅读的一些地方，我需要删除**http://**

但后来我得到了这个异常

```
java.lang.IllegalStateException: Target host must not be null, or set in parameters. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:20:20.210

尝试在PC浏览器上打开链接....如果可以，请在设备浏览器上打开链接...希望它能帮助您追踪问题出在代码或服务器的位置**

# jquery - 通过单击另一个按钮，Jquery 触发器单击 facebook like 按钮

> ID：12998086
> 
> 赞同：0
> 
> 时间：2012-10-21T13:08:44.113
> 
> 标签：jquery, button, triggers, facebook-like

嗨，我正在使用 html5 facebook like 按钮，我想触发单击另一个样式按钮的单击，这可能吗？

我试过这个没有结果：

```
<div class="row-fluid centered-content">
              <div class="hide">

                <div id="fb-root"></div>
<div class="fb-like" data-href="<?php echo current_url(); ?>" data-send="false" data-width="1" data-show-faces="false" data-font="arial"></div>
              </div>
              <a href="javascript:void(0)"  onclick="$('.fb-like').trigger('click');" rel="tooltipRIGHT" data-original-title="Share on facebook"><img src="<?php echo base_static_url();?>img/icons/facebook.png" width="24" height="24"/></a>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:31:12.043

这不应该是出于安全原因的可能原因。

如果您可以将点击委托给 facebook 或 twitter 之类的按钮，那么您不需要用户的任何许可就可以这样做......

[其他问题的答案](https://stackoverflow.com/questions/8277449/how-to-trigger-facebook-like-from-an-image-map?rq=1)

# php - Microsoft Server 2008 r2 php odbc 连接不起作用

> ID：12998091
> 
> 赞同：1
> 
> 时间：2012-10-21T13:09:13.740
> 
> 标签：php, database, ms-access, odbc, windows-server-2008

我最近将我的服务器从服务器 2008 移到了服务器 2008 r2，现在我的基于 php 的网站无法连接到数据库。数据库是 .accdb 并且在旧操作系统上运行良好，我将数据库设置为系统 dns。我的 php 页面没有返回任何错误，但它不会连接到 dns。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:49:00.193

确保在服务器上安装[Access 2010 数据库引擎](http://www.microsoft.com/en-us/download/details.aspx?id=13255)，如果服务器上未安装 Access 2007/2010/2013 的完整版本（或运行时），则必须安装数据库引擎，否则将永远无法打开`.accdb`数据库。

还要确保您的整个环境设置为 32 位或 64 位，但不能混合使用，您不能在同一台服务器上安装 32 位*和64 位版本。*

最简单的可能是坚持使用 32 位并确保您的 php 服务器设置为 32 位，同时确保您的[ODBC DSN 为 32 位](http://sqlblog.com/blogs/john_paul_cook/archive/2010/03/16/32-bit-odbc-on-windows-server-2008-r2.aspx)。

# c - 内存数据文件中的 SQLite3

> ID：12998097
> 
> 赞同：1
> 
> 时间：2012-10-21T13:10:15.407
> 
> 标签：c, sqlite

任何人都知道当进程被分叉并且父进程关闭内存数据文件时内存数据文件会发生什么。我的理解是它应该在子进程的范围内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:56:14.907

当一个进程分叉时，新进程的内存是完全独立的。

内存数据库没有任何外部可见的影响（如文件），所以你得到的是两个独立的数据库，关闭一个不会影响另一个。

请注意，*临时*数据库（空文件名）与内存数据库（文件名`:memory:`）不同。

# android - Android模拟器上的文件存储在哪里？

> ID：12998098
> 
> 赞同：2
> 
> 时间：2012-10-21T13:10:27.030
> 
> 标签：android, file, file-io, android-emulator

我正在开发一个 Android 上的小程序，将一些硬编码文本写入具有硬编码名称的文件。虽然操作成功（没有错误），但我无法在模拟器上找到该文件。我的问题：

1.  文件写在哪里？
2.  我需要将文件存储在主屏幕或应用程序页面（通常是 UI 可以到达的位置）上的文件路径是什么？

编码：

```
public class MainActivity extends Activity {

    Button writeFile;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    writeFile = (Button) findViewById(R.id.writeFile);
    writeFile.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //Step 1\. Get file name.
                String file = "hello_files.txt";
                String str = "hello world";

                Log.v(this.toString(), "Going to write to a file.");
                FileOutputStream fos;
                try {
                    fos = openFileOutput(file, MODE_WORLD_READABLE | MODE_WORLD_WRITEABLE);
                    fos.write(str.getBytes());
                    Log.v(this.toString(), "Local path = ");
                    fos.close();
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    Log.v(this.toString(), "File not found!!");
                    e.printStackTrace();
                } catch (IOException e) {
                    Log.v(this.toString(), "IO Exception.");
                    e.printStackTrace();
                }
            }
        });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:06:15.373

文件存储在“/mnt/sdcard/”（外部存储）或“/data/data/Your Package Name/”（内部存储）中（如this [question](https://stackoverflow.com/questions/9373375/new-file-created-path)）。您只能从此包中访问此文件夹（除非手机已植根）。

你问题的第二部分不是很清楚。据我了解，Android 不像 Windows（没有桌面文件夹）。要在桌面上创建快捷方式，您需要实现一个 App 小部件。

# gps - 在 iOS CLLocation 中获得更好的准确性

> ID：12998102
> 
> 赞同：0
> 
> 时间：2012-10-21T13:11:30.770
> 
> 标签：gps, coordinates, cllocationmanager, cllocation

在 iOS 中，当使用 CLLocationManager 获取设备的坐标时，纬度和经度在点后以小数点后六位给出。我看到了一个应用程序，它可以为您提供小数点后 13 位的坐标。这怎么可能？更改 requiredAccuracy 属性没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:23:14.213

地球表面的一个等级约为 111 公里。111*10^-6是0.000111km，即11cm。大多数 GPS 接收器的精度为 10m。某些程序可能显示 13 位小数的事实并不意味着该程序真的以这种精度测量了坐标。所以，6位数绰绰有余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-19T20:19:11.813

但是如果你想尝试更长的纬度和经度，只需改变你的浮点数。即，这将是小数点后 10 位。错误仍然会显示 +/- 5m。玩得开心。

```
if (currentLocation != nil) {
    _latitudeLabel.text = [NSString stringWithFormat:@"%.10f", currentLocation.coordinate.longitude];
    _LongitudeLabel.text = [NSString stringWithFormat:@"%.10f", currentLocation.coordinate.latitude];
} 
```

# javascript - 使用上下文在画布上抛出 HTML5 元素

> ID：12998108
> 
> 赞同：1
> 
> 时间：2012-10-21T13:12:15.180
> 
> 标签：javascript, html, canvas

代码示例，我想使用上下文绘制对象。

它在 Firefox 15 上引发错误：

```
TypeError: el is null
[Break On This Error] 
```

GetElementById 已被正确抓取，但它引发了错误。我也在检查头，脚本标签，它是正确的。我也把脚本代码放在头标签中，结果是一样的。

这是代码示例：

```
<!doctype html>
<html lang="en">
    <head>
        <title>Canvas</title>
        <meta charset="utf-8">  
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
    </head>
    <body>
        <script>
            var el = document.getElementById("myCanvas"); // this thrown empty

            var context = el.getContext("2d");

            context.fillStyle = '#00f';
            context.strokeStyle = '#f00';
            context.lineWidth = 4;

            context.beginPath();
            context.moveTo(10, 10);
            context.lineTo(100, 10);
            context.lineTo(10, 100);
            context.lineTo(10, 10);
            context.fill();
            context.stroke();
            context.closePath(); 
        </script>
        <canvas id="myCanvas" width="600" height="200"></canvas>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:13:29.190

您的画布元素出现*在*`<script>`块之后。当脚本代码运行时，它（`<canvas>`）还没有在 DOM 中，所以`getElementById()`不会找到它。

把脚本放在`<canvas>` *前面*，然后再试一次。

DOM 是随着页面的解析而逐步构建的。但是，一旦`</script>`找到结束标记，就会评估脚本块。因此，当您的脚本被执行时`<canvas>`，浏览器根本还没有解释。

# php - 从 3 个表中选择数据，其中一列数据相同，另一列数据不同

> ID：12998109
> 
> 赞同：0
> 
> 时间：2012-10-21T13:12:18.263
> 
> 标签：php, mysql

我有 3 张桌子：

```
tb_a                tb_b             tb_c
==============      ==============   ==============
|id|doc1|urla|      |id|doc2|urlb|   |id|doc3| sum|
==============      ==============   ==============
| 1| c1 |url1|      | 1| c2 |urla|   | 1| c2 |sum1|
| 2| c3 |url3|      | 2| c4 |urlb|   | 2| c3 |sum3|
| 3| c2 |url2|      | 3| c6 |urlc|   | 3| c4 |sum4|
==============      ==============   | 4| c6 |sum6|
                                     ============== 
```

首先，我想检查`tb_a`and `tb_b`。如果 和 中有相同的数据`doc1`，`doc2`我只使用中的数据`doc1`。`tb_a`这是第一个查询：

```
SELECT 
   a.doc1
FROM 
   tb_a a
LEFT JOIN 
   tb_b b
   ON a.doc1 = b.doc2
WHERE 
   b.doc2 IS NULL 
```

然后左加入`tb_c`得到`sum`。我可以在一个查询中完成这些过程吗？如何？谢谢你 ：）

从示例中，因此结果必须是：

```
c3 url3 sum3 
c2 url2 sum1
c4 urlb sum4
c6 urlc sum6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:27:06.243

`LEFT JOIN`您可以使用with连接所有表`COALESCE`。

```
SELECT  a.doc3 DOCValue, 
        COALESCE(b.urla, c.urlb) AS URLValue,
        a.`SUm` AS SUMValue
FROM    tb_c a
        LEFT JOIN tb_a b
            ON a.doc3 = b.doc1
        LEFT JOIN tb_b c
            ON a.doc3 = c.doc2 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/7a5a3/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:21:51.403

以下将返回与 A、B 和 C 中的文档匹配的所有记录。我认为这就是您所追求的。

```
SELECT 
   a.doc1, C.SUM
FROM 
   tb_a a
LEFT JOIN 
   tb_b b
   ON a.doc1 = b.doc2
left join TB_C C ON C.DOC3=B.DOC2
WHERE 
   b.doc2 IS NOT NULL 
```

# android - 只有部分 xml 被下载到真实设备 android 上

> ID：12998114
> 
> 赞同：1
> 
> 时间：2012-10-21T13:12:43.253
> 
> 标签：android, xml, http-post

我创建了一个从 web 服务下载 xml 并执行一些业务逻辑的应用程序。我已经完成了应用程序并在模拟器上成功测试，效果很好。

但是当我安装在使用 gprs 运行互联网的真实设备上时，每次只有一部分 xml 被下载，所以我的应用程序无法运行。

这是代码登录

```
class LoginTask extends AsyncTask<String, Void, String> {

        String usr;
        String passwd;

        @Override
        protected void onPreExecute() {
            // // User entered data
            usr = text_username.getText().toString();
            passwd = text_password.getText().toString();
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(String... url) {
            try {
                String xml = getXmlFromUrl(mypref.getNavURL());
                if (xml == null) {

                    return null;
                }
                LoginResponse login = NavizenXmlParserFn.getLoginResponse(xml);
                // Set session
                Session mSession = Session.getSession();
                mSession.setUserId(usr);
                if (login.getStatus().equals(ResponseCodes.LOGIN_SUCCESS)) {
                    List<WorkCenterResponse> workcenter = NavizenXmlParserFn
                            .getWorkCenterResponse(xml);
                    NavisionApplication app = (NavisionApplication) getApplication();
                    app.setWorkCenterList(workcenter);
                    return ResponseCodes.LOGIN_SUCCESS;
                } else if (login.getStatus()
                        .equals(ResponseCodes.LOGIN_FAILURE)) {
                    return ResponseCodes.LOGIN_FAILURE;
                }

            } catch (Exception e) {
                e.printStackTrace();
                LogTofile.writeException(e);
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            showToast(response);
            pd_login.dismiss();
            // if (validateLocally().equals(ResponseCodes.LOGIN_SUCCESS)) {
            // Intent intent = new Intent(Login.this, SelectCenter.class);
            // startActivity(intent);
            // } else {
            // showDialogOk("Error", "Invalid username or password");
            // }
            if (result == null) {
                showDialogOk("Unable to connect", "Try Again later");
//              Intent intent = new Intent(Login.this, SelectCenter.class);
//              startActivity(intent);
                return;
            }
            if (result.equals(ResponseCodes.LOGIN_SUCCESS)) {
                Intent intent = new Intent(Login.this, SelectCenter.class);
                startActivity(intent);
            } else {
                showDialogOk("Error", "Invalid username or password");
            }

        }
        String response;
        public String getXmlFromUrl(String url) {

            try {
                LoginRequest loginRequest = new LoginRequest();
                loginRequest.mPassword = passwd;
                loginRequest.mRequestDate = DateUtility.getDate();// "06-20-2011";
                loginRequest.mRequestEntity = "Login";
                loginRequest.mRequestID = Constants.mRequestID;
                loginRequest.mRequestTime = DateUtility.getTime();// "19:03:22";
                loginRequest.mRequestType = "New";
                loginRequest.mTransactionID = Constants.mTransactionID;
                loginRequest.mUserID = usr;

                final String xml = NavizenXmlParserFn
                        .getRequestxml(loginRequest);
                Log.i("LoginRequest", xml);

                response = NavConnection.connection(url,
                        xml, mypref.getNavUserId(), mypref.getNavPassword());
                LogTofile.writeString("Login Response: \n"+response);
                Log.i("LoginrResponse", response); //when only part of the xml gets printed

                return response;

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
                LogTofile.writeException(e);
                return null;
            } catch (ClientProtocolException e) {
                e.printStackTrace();
                LogTofile.writeException(e);
                return null;
            } catch (IOException e) {
                e.printStackTrace();
                LogTofile.writeException(e);
                return null;
            } catch (Exception e) {
                LogTofile.writeException(e);
                e.printStackTrace();
                return null;
            }

        }

    } 
```

这是 xml 的一部分

![在此处输入图像描述](../Images/0a7c73a7cba88745aa2ca2df3f36916f.png)

这是连接代码

```
public static String connection(String url, String xml, String id,
        String pass) {
    String xml2 ;
    try {
        HttpParams httpParameters = new BasicHttpParams();
        int timeConnectionOut = 60000;
        HttpConnectionParams.setConnectionTimeout(httpParameters,
                timeConnectionOut);
        int timeoutSocket = 60000;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
        DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
        Log.i("url passon server", " " + url);

        StringEntity se = new StringEntity(xml, HTTP.UTF_8);
        se.setContentType("text/xml");

        HttpPost httpPost = new HttpPost(url);

        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
        nameValuePairs.add(new BasicNameValuePair("reqxml", xml));
        nameValuePairs.add(new BasicNameValuePair("user_id", id));
        nameValuePairs.add(new BasicNameValuePair("u_password", pass));

        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

        xml2 = EntityUtils.toString(httpEntity);
        //Log.e("Connection  Response:", xml2);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
        //showToast(e.getMessage());
        Log.e("Connection  :", "UnsupportedEncodingException exception : "
                + e.getMessage());
        return null;
    } catch (ClientProtocolException e) {
        e.printStackTrace();
        //showToast(e.getMessage());
        Log.e("Connection :",
                "ClientProtocolException exception : " + e.getMessage());
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        //showToast(e.getMessage());
        LogTofile.writeException(e);
        Log.e("Connection :", "IOException exception : " + e.getMessage());
        return null;
    } catch (RuntimeException e) {
        e.printStackTrace();
        //showToast(e.getMessage());
        Log.e("Connection :",
                "RuntimeException exception : " + e.getMessage());
        return null;
    }
    return xml2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:19:18.550

您是否尝试打印日志并查看您的连接是否在两者之间没有中断？从服务器获取数据的应用程序的核心代码似乎在以下行中：

```
 response = NavConnection.connection(url, xml, mypref.getNavUserId(), mypref.getNavPassword()); 
```

因此，您必须在该类中打印一些日志语句并查看发生了什么。尝试使用一些连接参数等。

# workflow-foundation-4 - 我可以将 Activity 传递给 Activity 并让它执行吗？

> ID：12998115
> 
> 赞同：1
> 
> 时间：2012-10-21T13:12:44.963
> 
> 标签：workflow-foundation-4, workflow-activity

我想要一个工作流来执行另一个工作流。后一个工作流将被动态创建并传入。是否可以有一个由持有它的 Activity 执行的 InArgument？我似乎陷入了我需要告诉 CacheMetadata 关于 InArgument 但我无法得到它的问题，因为我没有上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:43:11.480

在[CodePlex 上的 Windows Workflow Foundation 项目中，](http://wf.codeplex.com/)您有一组在 WF 上没有开箱即用的有用活动。

在您的特定情况下，您想查看[InvokeWorkflow](http://wf.codeplex.com/SourceControl/changeset/view/80373#1255393)，它向您展示如何在工作流中传递和执行 Activity。

此外，如果您有活动的 XAML，您可能还想查看[LoadActivity](http://wf.codeplex.com/SourceControl/changeset/view/80373#1255395)和[LoadAndInvokeWorkflow](http://wf.codeplex.com/SourceControl/changeset/view/80373#1255396)活动，它们允许您传递的不是活动对象，而是它的 XAML。

# c++ - Visual Studio 2012 本机 C++ DLL x86 编译

> ID：12998117
> 
> 赞同：6
> 
> 时间：2012-10-21T13:13:04.407
> 
> 标签：c++, dll, windows-8, x86, visual-studio-2012

我最近将我的工具集从 Win 7 x86 / Visual Studio 2010 升级到 Win 8 x64 / Visual Studio 2012。但是，现在我的原生 C++ dll 编译为 x64 而不是 x86。除了将代码移动到新的 O/S 并将其加载到 VS2012 之外，我没有做任何事情。

有谁知道我如何强制它为 x86 编译？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T19:54:36.217

转到项目的属性页，找到**Linker** -> **Advanced** -> **Target Machine**选项，并确保将其设置为**MachineX86**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:00:21.657

转到 **Build** --> **Configuration Manager** --> **Active Solution Platform** 并将其更改为 x86。

您还可以通过在同一窗口中查找项目名称和应用到它的平台来确认您的特定项目平台。

# matlab - 对索引求和

> ID：12998121
> 
> 赞同：4
> 
> 时间：2012-10-21T13:13:44.140
> 
> 标签：matlab, octave

假设我有

```
A = [10 20 30 40];
idx = [1 1 1 2];
result = [0 0]; 
```

我需要对 idx 中的索引求和，以便

```
result(1) = A(1) + A(2) + A(3);
result(2) = A(4); 
```

我实现了代码

```
for i=1:length(idx)
  result(idx(i)) += A(i);
end 
```

如果可能的话，如何将其转换为更多的八度标准代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:27:22.827

看看[accumarray](http://www.mathworks.nl/help/matlab/ref/accumarray.html)，它完全符合您的要求，它只需要它的第一个输入作为列：

```
A = [10 20 30 40];
idx = [1 1 1 2];
result = accumarray(idx',A)

  result =

      60
      40 
```

是的，这也适用于八度；）（[链接](http://www.gnu.org/software/octave/doc/interpreter/Accumulation.html)）

# php - CAS 3.5 不返回附加属性

> ID：12998124
> 
> 赞同：1
> 
> 时间：2012-10-21T13:14:01.343
> 
> 标签：php, attributes, cas

我有 CAS 3.5 服务器并根据此链接修改了 deployerConfigContext.xml 和 casServiceValidationSuccess.jsp => [LINK](https://wiki.jasig.org/display/CASUM/Attributes)。在 CAS 调试日志中，我可以看到正在那里创建附加属性映射，并且还记录了属性值。

```
2012-10-21 18:29:34,556 DEBUG [org.jasig.cas.adaptors.ldap.FastBindLdapAuthenticationHandler] - <Performing LDAP bind with credential: CN=mich@mycomp.com,CN=Users,DC=mygroup,DC=local>
2012-10-21 18:29:34,557 INFO [org.jasig.cas.authentication.AuthenticationManagerImpl] - <org.jasig.cas.adaptors.ldap.FastBindLdapAuthenticationHandler successfully authenticated [username: mich@mycomp.com]>
2012-10-21 18:29:34,560 DEBUG [org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver] - <Attempting to resolve a principal...>
2012-10-21 18:29:34,561 DEBUG [org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver] - <Creating SimplePrincipal for [mich@mycomp.com]>
2012-10-21 18:29:34,562 DEBUG [org.jasig.services.persondir.support.ldap.LdapPersonAttributeDao] - <Created seed map='{username=[mich@mycomp.com]}' for uid='mich@mycomp.com'>
2012-10-21 18:29:34,564 DEBUG [org.jasig.services.persondir.support.ldap.LdapPersonAttributeDao] - <Adding attribute 'cn' with value '[mich@mycomp.com]' to query builder 'null'>
2012-10-21 18:29:34,565 DEBUG [org.jasig.services.persondir.support.ldap.LdapPersonAttributeDao] - <Generated query builder '(cn=mich@mycomp.com)' from query Map {username=[mich@mycomp.com]}.>
2012-10-21 18:29:34,678 INFO [org.jasig.cas.authentication.AuthenticationManagerImpl] - <Resolved principal mich@mycomp.com>
2012-10-21 18:29:34,678 INFO [org.jasig.cas.authentication.AuthenticationManagerImpl] - <Principal found: mich@mycomp.com>
2012-10-21 18:29:34,681 DEBUG [org.jasig.cas.authentication.AuthenticationManagerImpl] - <Attribute map for mich@mycomp.com: {Name=mich@mycomp.com, mem=[CN=WFC,OU=Applications,DC=mygroup,DC=local, CN=User Management,OU=Applications,DC=mygroup,DC=local, CN=Wshop,OU=Applications,DC=mygroup,DC=local], dName=Scott}> 
```

但是，当我从我的 PHP CAS 客户端访问“属性”数组时，它返回一个空白数组。

```
<?php print_r(phpCAS::getAttributes());?> 
```

给出一个空白数组。如果我在 casServiceValidationSuccess.jsp 中硬编码任何东西，它会显示数组中的属性，但值为 null。

```
<cas:serviceResponse xmlns:cas='http://www.yale.edu/tp/cas'>
    <cas:authenticationSuccess>
    <!-- Begin Ldap Attributes -->
    <c:if test="${fn:length(assertion.chainedAuthentications) > 0}">
    <cas:attributes>
    <cas:mem>${fn:escapeXml(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes.mem)}</cas:mem>
    </cas:attributes>
...
... 
```

我错过了什么吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T12:13:20.703

[我在CAS issue 655](https://issues.jasig.org/browse/CAS-655)上找到了答案。这是我的 casServiceValidationSuccess.jsp 最终的样子：

```
<%@ page session="false" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<cas:serviceResponse xmlns:cas='http://www.yale.edu/tp/cas'>
    <cas:authenticationSuccess>
        <cas:user>${fn:escapeXml(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.id)}</cas:user>

    <%-- Added attributes in response--%>
    <cas:attributes>
      <c:forEach var="attr"
                 items="${assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes}"
                 varStatus="loopStatus" begin="0"
                 end="${fn:length(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes)-1}"
                 step="1">
        <%-- Produce output exactly as CAS client code expects it: <cas:attrName>attrValue</cas:attrName> --%>
        <cas:${fn:escapeXml(attr.key)}>${fn:escapeXml(attr.value)}</cas:${fn:escapeXml(attr.key)}>
      </c:forEach>
    </cas:attributes>
<c:if test="${not empty pgtIou}">
        <cas:proxyGrantingTicket>${pgtIou}</cas:proxyGrantingTicket>
</c:if>
<c:if test="${fn:length(assertion.chainedAuthentications) > 1}">
        <cas:proxies>
<c:forEach var="proxy" items="${assertion.chainedAuthentications}" varStatus="loopStatus" begin="0" end="${fn:length(assertion.chainedAuthentications)-2}" step="1">
            <cas:proxy>${fn:escapeXml(proxy.principal.id)}</cas:proxy>
</c:forEach>
        </cas:proxies>
</c:if>
    </cas:authenticationSuccess>
</cas:serviceResponse> 
```

# php - 本地 PHP 文件无法在浏览器中打开

> ID：12998127
> 
> 赞同：1
> 
> 时间：2012-10-21T13:14:45.110
> 
> 标签：php, xampp, local

我刚刚在我的 Windows 7 PC 上安装了 XAMPP，并想使用本地 PHP 文件对其进行测试。双击该文件会在我的浏览器 (Firefox 16.0.1) 中打开一个新选项卡，但该文件未打开。相反，标签的标签大约每秒在“正在连接”和“新标签”之间闪烁一次，我很难再次关闭标签。

我停止了 Apache，甚至结束了 XAMPP，但没有任何乐趣。即使将文件减少到最低限度也无济于事：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>php test</title>
</head>
<body>
    Lorem Ipsum...
</body>
</html> 
```

如果我将其重命名为文件，Firefox 会打开该`.htm`文件。

任何想法发生了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:35:58.243

您无法通过在资源管理器窗口中双击来在浏览器中加载文件，您可以通过 http 协议加载它：

```
http://localhost:8080/folder/file.php 
```

其中 - 如果不是 80，则 8080 应该是您的 XAMPP 端口 - 文件夹是 htdocs 的子文件夹（如果有） - file.php 是您的脚本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T13:36:24.617

`.php`您不能只是在浏览器中“打开”（如您所述，通过双击）文件。至少，因为浏览器不能解释 PHP。
您需要向服务器发送正确的（HTTP）请求，然后服务器会将 PHP 代码传递给解释器，获取结果并将其转发给浏览器 - 以（对于浏览器）可理解的（例如 HTML）形式通过适当的（HTTP）响应。

为了能够最初使用 PHP，请创建一个`index`文件（php 或 html），在该文件上设置指向您的`.php`文件的链接，以便您可以在浏览器中查看它们。

**添加**
刚刚看到您的评论，然后您应该能够在浏览器中看到该文件，转到`http://localhost/your-subfolder/file.php`.

区别：现在您通过它的 URL ( `http://some.domain/some-file.php`) 请求文件，这通常发生在网站上。您首先尝试的是通过它在文件系统上的位置打开它（当您`file:///path/to/some-file.php`在浏览器的地址栏中看到时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-24T12:45:39.557

我花了几个小时试图解决这个问题，只是为了意识到该文件夹​​没有被授予权限……如果你使用的是 Linux，请确保有。

# java - 在 Eclipse/Java/JDT 中，有没有办法只过滤“Open Type”中的条目以获取最新版本？

> ID：12998129
> 
> 赞同：1
> 
> 时间：2012-10-21T13:15:35.337
> 
> 标签：java, eclipse, maven, gradle, eclipse-jdt

当我使用 Maven 和 Gradle 时，随着时间的推移，我的本地工件存储库已经收集了许多相关的工件，例如`junit-3.8.2.jar`、`junit-4.7.jar`、`junit-4.10.jar`。

现在，每当我打开“打开类型”对话框（例如，通过和弦 Ctrl+Shift+T）时，我都会为我正在查找的类型获得多个条目，例如 JUnit`TestCase`在我的本地 Maven 和Gradle 存储库。

由于我主要使用某些工件/库的最新版本，因此我想仅针对最新版本过滤此视图（以消除视觉混乱并提高生产力）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:49:47.810

我认为，如果在其类路径中有一个具有该类型的可见项目，您只会在“打开类型”中看到来自给定 jar 的条目 - 我不认为将它放在回购中会这样做。这个理论适合你的情况吗？如果是这样，如果您可以使用工作集来隐藏具有不需要的版本的项目，并且如果它们被工作集排除隐藏起来，那么 Bananeweizen 的回答可能是相关的。如果它们没有被隐藏，并且可以选择关闭将它们拉入的项目，请执行此操作。在没有存储库（没有 Maven、Gradle 等）的 Eclipse 中，关闭项目肯定会解决这种问题——至少在我经历过的情况下是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:28:04.033

如果在工作区的不同项目中使用了这些不同的版本，则在打开类型对话框的对话框菜单中找到的[工作集限制可能会对您有所帮助。](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-dialog-open-type.htm)有了它，您可以将显示的类型限制为某个工作集（即项目子集）。

# twitter-bootstrap - 使用 Twitter Bootstrap 的图例区域中的图标或图标

> ID：12998132
> 
> 赞同：3
> 
> 时间：2012-10-21T13:16:28.337
> 
> 标签：twitter-bootstrap

我有一个使用 Twitter Bootstrap 的带有图例的简单表单。我希望能够在这个时间点将图标放在我的图例文字旁边，这些文字是正确对齐的。

我尝试了一些标签，如 div 并将图标推到图例行的底部。我希望这与图例文本保持一致。

一个简短的例子。

```
 <legend>Contact Categories<div align="right"><i class="icon-comment"></i></div></legend> 
```

这将导致图标一直下降到图例行。传奇本身保持原样。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T15:26:09.740

我不确定你为什么要使用`align="right"`. 问题是您`<div>`是一个块，它不能与文本保持在同一行。

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/Qysuj/)

你必须让它浮动（右或左）：

```
<legend>Contact Categories<div class="pull-right"><i class="icon-comment"></i></div></legend> 
```

或者让它内联

```
<legend>Contact Categories<div id="myBlock" class="inline-block"><i class="icon-comment"></i></div></legend> 
```

```
.inline-block { display: inline-block; }
#myBlock { text-align: right; width: 30%; } 
```

# php - 空表的更新形式

> ID：12998133
> 
> 赞同：0
> 
> 时间：2012-10-21T13:16:34.150
> 
> 标签：php, mysql

我有一个个人资料表格，用户只保留一份记录，并且可以随时更新他们的信息。首先，我可以使用 mysql update 来更新一个空表吗？我正在尝试设置提交以执行两个功能。插入或更新，取决于记录是否存在：

```
if(isset($_POST['update']) && $profile['user_id'] == ""){
    DB::getInstance()->insert_profile(
        $_POST['user_id'], 
            $_POST['fname'], 
        $_POST['mname'], 
        $_POST['lname'], 
        $_POST['profilepic'], 
        $_POST['location'],
        $_POST['tag'], 
        $_POST['email'],
        $_POST['confemail'],
        $_POST['newsletter'], 
        $_POST['height'], 
        $_POST['build'],
        $_POST['eyecolour'], 
        $_POST['haircolour'], 
        $_POST['race'], 
        $_POST['nationality'], 
        $_POST['languages'],
        $_POST['playingage'], 
        $_POST['accents'], 
        $_POST['aname'], 
        $_POST['aagency'], 
        $_POST['atelephone'],
        $_POST['aemail'], 
        $_POST['aweb'], 
        $_POST['facebook'], 
        $_POST['twitter'], 
        $_POST['spotlight'],    
        $_POST['castingcall']);
}

else if (isset($_POST['update']) && $profile['user_id'] != ""){
hcDB::getInstance()->update_profile(
        $_POST['user_id'], 
        $_POST['fname'], 
        $_POST['mname'], 
        $_POST['lname'], 
        $_POST['profilepic'], 
        $_POST['location'],
        $_POST['tag'], 
        $_POST['email'],
        $_POST['confemail'], 
        $_POST['newsletter'], 
        $_POST['height'], 
        $_POST['build'],
        $_POST['eyecolour'], 
        $_POST['haircolour'], 
        $_POST['race'], 
        $_POST['nationality'], 
        $_POST['languages'],
        $_POST['playingage'], 
        $_POST['accents'], 
        $_POST['aname'], 
        $_POST['aagency'], 
        $_POST['atelephone'],
        $_POST['aemail'], 
        $_POST['aweb'], 
        $_POST['facebook'], 
        $_POST['twitter'], 
        $_POST['spotlight'],    
        $_POST['castingcall']);
} 
```

这不起作用，并且不会给出任何错误。任何想法表示赞赏。

抱歉，这是我的插入和更新功能：

```
public function update_profile (
$userID,$fname, $mname, $lname, $profilepic, $location, $tag, $email, $confemail, $newsletter,
$height, $build, $eyecolour, $haircolour, $race, $nationality, $languages,
$playingage, $accents, $aname, $aagency, $atelephone, $aemail, $aweb,
$facebook, $twitter, $spotlight, $castingcall){
                $fname = $this->real_escape_string($fname);
                $mname = $this->real_escape_string($mname);
                $lname = $this->real_escape_string($lname);
                $profilepic = $this->real_escape_string($profilepic);
                $location = $this->real_escape_string($location);
                $tag = $this->real_escape_string($tag);
                $email = $this->real_escape_string($email);
                $confemail = $this->real_escape_string($confemail);
                $newsletter = $this->real_escape_string($newsletter);
                $height = $this->real_escape_string($height);
                $build = $this->real_escape_string($build);
                $eyecolour = $this->real_escape_string($eyecolour);
                $haircolour = $this->real_escape_string($haircolour);
                $race = $this->real_escape_string($race);
                $nationality = $this->real_escape_string($nationality);
                $languages = $this->real_escape_string($languages);
                $playingage = $this->real_escape_string($playingage);
                $accents = $this->real_escape_string($accents);
                $aname = $this->real_escape_string($aname);
                $aagency = $this->real_escape_string($aagency);
                $atelephone = $this->real_escape_string($atelephone);
                $aemail = $this->real_escape_string($aemail);
                $aweb = $this->real_escape_string($aweb);
                $facebook = $this->real_escape_string($facebook);
                $twitter = $this->real_escape_string($twitter);
                $spotlight = $this->real_escape_string($spotlight);
                $castingcall = $this->real_escape_string($castingcall);

                $this->query("UPDATE profile SET 
                    fname = '" . $fname . "', mname = '" . $mname . "', 
                    lname = '" . $lname . "', profilepic = '" . $profilepic . "',
                    location = '" . $location . "', tag = '" . $tag . "', 
                    email = '" . $email . "', confemail = '" . $confemail . "', newsletter = '" . $newsletter . "',
                    height = '" . $height . "', build = '" . $build . "', 
                    eyecolour = '" . $eyecolour . "', haircolour = '" . $haircolour . "',
                    race = '" . $race . "', nationality = '" . $nationality . "', 
                    languages = '" . $languages . "', playingage = '" . $playingage . "',
                    accents = '" . $accents . "', aname = '" . $aname . "', 
                    aagency = '" . $aagency . "', atelephone = '" . $atelephone . "', 
                    aemail = '" . $aemail . "', aweb = '" . $aweb . "', 
                    facebook = '" . $facebook . "', twitter = '" . $twitter . "',
                    spotlight = '" . $spotlight . "', castingcall = '" . $castingcall. "', WHERE user_id = " . $userID or die(mysql_error()));
            }

public function insert_profile(
$fname, $mname, $lname, $profilepic, $location, $tag, $email, $confemail, $newsletter,
$height, $build, $eyecolour, $haircolour, $race, $nationality, $languages,
$playingage, $accents, $aname, $aagency, $atelephone, $aemail, $aweb,
$facebook, $twitter, $spotlight, $castingcall){
                $fname = $this->real_escape_string($fname);
                $mname = $this->real_escape_string($mname);
                $lname = $this->real_escape_string($lname);
                $profilepic = $this->real_escape_string($profilepic);
                $location = $this->real_escape_string($location);
                $tag = $this->real_escape_string($tag);
                $email = $this->real_escape_string($email);
                $confemail = $this->real_escape_string($confemail);
                $newsletter = $this->real_escape_string($newsletter);
                $height = $this->real_escape_string($height);
                $build = $this->real_escape_string($build);
                $eyecolour = $this->real_escape_string($eyecolour);
                $haircolour = $this->real_escape_string($haircolour);
                $race = $this->real_escape_string($race);
                $nationality = $this->real_escape_string($nationality);
                $languages = $this->real_escape_string($languages);
                $playingage = $this->real_escape_string($playingage);
                $accents = $this->real_escape_string($accents);
                $aname = $this->real_escape_string($aname);
                $aagency = $this->real_escape_string($aagency);
                $atelephone = $this->real_escape_string($atelephone);
                $aemail = $this->real_escape_string($aemail);
                $aweb = $this->real_escape_string($aweb);
                $facebook = $this->real_escape_string($facebook);
                $twitter = $this->real_escape_string($twitter);
                $spotlight = $this->real_escape_string($spotlight);
                $castingcall = $this->real_escape_string($castingcall);

                $this->query("INSERT INTO profile(
                    `fname`, `mname`, `lname`, `profilepic`, `location`, 
                    `tag`, `email`, `confemail`, `newsletter`, `height`, `build`, 
                    `eyecolour`, `haircolour`, `race`, `nationality`, 
                    `languages`, `playingage`, `accents`, `aname`, 
                    `aagency`, `atelephone`, `aemail`, `aweb`, 
                    `facebook`, `twitter`, `spotlight`, `castingcall`
                    )" . " VALUES 
                    '" . $fname . "', 
                    '" . $mname . "', 
                    '" . $lname . "', 
                    '" . $profilepic . "',
                    '" . $location . "', 
                    '" . $tag . "', 
                    '" . $email . "',
                    '" . $confemail . "', 
                    '" . $newsletter . "',
                    '" . $height . "', 
                    '" . $build . "', 
                    '" . $eyecolour . "', 
                    '" . $haircolour . "',
                    '" . $race . "',
                    '" . $nationality . "', 
                    '" . $languages . "', 
                    '" . $playingage . "',
                    '" . $accents . "', 
                    '" . $aname . "', 
                    '" . $aagency . "',
                    '" . $atelephone . "', 
                    '" . $aemail . "',
                    '" . $aweb . "', 
                    '" . $facebook . "', 
                    '" . $twitter . "',
                    '" . $spotlight . "',
                    '" . $castingcall. "')");
            } 
```

还有我的表格...

```
<form id="profile" action="{$HTTP_HOST}admin/profile.php" method="post" autocomplete="off"> 
```

和按钮：

```
<button class="submit" type="submit" value="update" name="update">Update</button> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:48:32.753

从哪里来`$profile['user_id']`？如果您事先有此值，则您必须已经知道用户是否存在，因此相应地调用插入或更新。

如果您认为您可能已经`$profile['user_id']`正确定义并且表中不存在此类用户，那么您的应用程序的其他位置可能存在逻辑问题。您始终可以通过简单的查询检查该用户是否存在：

```
"SELECT user_id 
    FROM your_user_table 
    WHERE user_id = '" . (int)$profile['user_id'] . "'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:22:46.980

不，您不能更新空表，您必须有一条要更新的记录。

您对基本 mysql 查询有另一个抽象级别，因此除非您发布插入/更新函数的功能，否则我们无法真正帮助您。

无论如何只需检查记录是否存在，如果存在，则更新记录，如果不插入。

# java - HttpSession ID 的唯一性如何？

> ID：12998134
> 
> 赞同：7
> 
> 时间：2012-10-21T13:16:42.357
> 
> 标签：java, session, servlets, session-cookies

我将通过在他/她的 cookie 中存储唯一 ID 来唯一标识用户。HttpSession ID 是我谷歌搜索的一个不错的选择。只是想知道它有多独特？它是网络容器独有的还是一旦过期，它会重新生成？如果它重复，我所有的用户登录都可以去折腾。需要一些关于使用 sessonID 作为我的用户的唯一标识符的专家意见。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T13:19:00.017

会话 ID 仅在会话的生命周期内是唯一且有意义的。会话 ID 标识一个会话：不多也不少。它不识别用户。

您不能也不应该依赖会话 ID 被重用，更不用说为同一个用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T13:20:20.320

会话 ID 必须唯一标识服务器或服务器集群上的会话。您无法保证重新启动时的唯一性。为什么不简单地使用数据库序列或[UUID](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)？

# jsf - JSF 验证不起作用

> ID：12998135
> 
> 赞同：1
> 
> 时间：2012-10-21T13:16:43.893
> 
> 标签：jsf, richfaces

我的以下代码没有按预期工作。验证未按预期工作。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>My Registration Page</title>
    <link href="stylesheet/reset.css" rel="stylesheet" type="text/css" />
    <link href="stylesheet/style.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/png" href="images/icons/favicon.png" />
    <script src="script/script.js" />
</h:head>
<h:body>
    <h:outputText id="progress_bar" styleClass="progress-bar" /> 
    <a4j:jsFunction name="login" action="#{loginBean.validateUser}" />

    <div id="login-container">
        <div class="login-logo">
            <img src="images/logo.png" />
        </div>
        <f:view>
            <div id="loin-form">
                <h1>
                    Log in to your account or <a href="#">sign up</a> to Get Started
                </h1>
                <h:form>
                    <h:inputText id="userName" value="#{loginBean.userName}"
                        label="User Name" required="true" class="txtFld">
                        <f:validator
                            validatorId="com.coinfling.validation.LoginBeanValidator" />
                    </h:inputText>
                    <h:message for="userName" style="color:red"></h:message>
                    <h:inputSecret id="passWord" value="#{loginBean.passWord}"
                        label="Password" required="true" class="pswrdFld">
                        <f:validator
                            validatorId="com.coinfling.validation.LoginBeanValidator" />
                    </h:inputSecret>
                    <h:message for="passWord" style="color:red"></h:message>
                    <p>
                        <a4j:commandLink id="forgotPasswordLink" lable="Password"
                            value="Forgot Your Password? " />
                        <a4j:commandButton id="loginButton" value="Sign In"
                            onclick="login();" styleClass="sign-btn" />
                    </p>
                </h:form>
            </div>

        </f:view>
    </div>

</h:body>
</html> 
```

我的简单验证类代码在 com.coinfling.validation 包下面；

```
import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.validator.FacesValidator;
import javax.faces.validator.Validator;
import javax.faces.validator.ValidatorException;
@FacesValidator("com.coinfling.validation.LoginBeanValidator")
public class LoginBeanValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent toValidate,
            Object value) throws ValidatorException {
        FacesMessage message = new FacesMessage("*UserName is not in Correct Format");
        throw new ValidatorException(message);

//      
//      if(toValidate.getId().equals("userName"))
//      {
//          FacesMessage message = new FacesMessage("*UserName is not in Correct Format");
//          throw new ValidatorException(message);
//      }
//      else if(toValidate.getId().equals("passWord"))
//      {
//          FacesMessage message = new FacesMessage("*Password is not in Correct Format");
//          throw new ValidatorException(message);
//      }
    }

} 
```

如您所见，我的验证只是对输入的任何内容抛出异常。必填字段也不起作用。不打印错误消息。我究竟做错了什么 ？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:22:18.457

您实际上并没有提交表单。您基本上是在单独调用一个独立的 bean 方法。这是一个巨大的差异。要对表单执行验证，您必须提交表单。

替换错误的`a4j:jsFunction`方法：

```
<a4j:jsFunction name="login" action="#{loginBean.validateUser}" />
...
<a4j:commandButton id="loginButton" value="Sign In"
   onclick="login();" styleClass="sign-btn" /> 
```

通过正常的表单提交方法：

```
<a4j:commandButton id="loginButton" value="Sign In"
   action="#{loginBean.validateUser}" styleClass="sign-btn" /> 
```

我不确定您为什么使用`a4j:jsFunction`，但无论您认为从 中受益`a4j:jsFunction`，肯定都必须以不同的方式解决。

不要忘记`render="@form"`在完成 ajax 请求时添加更新表单，以便显示所有消息：

```
<a4j:commandButton id="loginButton" value="Sign In"
   action="#{loginBean.validateUser}" render="@form" styleClass="sign-btn" /> 
```

# camera - 跟随物体旋转的相机

> ID：12998137
> 
> 赞同：4
> 
> 时间：2012-10-21T13:16:54.857
> 
> 标签：camera, three.js

我正试图让一个“追逐”相机在一个物体上工作。

我找到了一个完全符合我要求的示例，但它针对的是 r49：

[http://stemkoski.github.com/Three.js/Chase-Camera.html](http://stemkoski.github.com/Three.js/Chase-Camera.html)

我尝试将其更新为新的轮换方法，如下所示：

`var rotation_matrix = new THREE.Matrix4().makeRotationZ(rotateAngle); cube.matrix.multiplySelf(rotation_matrix); cube.rotation.setEulerFromRotationMatrix(cube.matrix);`

这似乎适用于对象，但相机不会以相同的方式跟随。我在这里做了一个演示：

[http://jsfiddle.net/SSEDs/](http://jsfiddle.net/SSEDs/)

（按 A 和 D 旋转）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-21T14:28:35.793

您需要将相机添加为立方体的子项。它不仅有效，而且数学要简单得多。

```
cube.add( camera ); 
```

这是一个更新的小提琴：http: [//jsfiddle.net/SSEDs/1/](http://jsfiddle.net/SSEDs/1/)。

小提琴正在使用three.js r.50。单击画布以获取焦点，然后按 A 和 D 键。

# ember.js - Ember.js 和排列内容

> ID：12998138
> 
> 赞同：9
> 
> 时间：2012-10-21T13:16:56.133
> 
> 标签：ember.js

谁能向我解释安排内容的目的。

文档解释说它可以在子类中被覆盖：

> 代理伪装的数组。在默认的 ArrayProxy 实现中，这个和内容是一样的。ArrayProxy 的子类可以覆盖此属性以提供排序和过滤等功能。

我感到困惑的是它与内容的关系。我可以在源代码中看到它在内容上有一个计算属性：

```
arrangedContent: Ember.computed('content', function(){
  return this.get('content');
} 
```

我认为我说你永远不应该绑定到**内容**而是绑定到 arrayProxy 本身是正确的。

我假设排列内容也是如此？

我是否只是根据需要使用 arrayContent 来过滤数组并绑定到 arrayProxy 本身，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T14:30:45.370

你是完全正确的：当绑定到值或触发方法时，你应该始终以代理本身为目标`addObject`。拥有一个`arrangedContent`允许 Ember 操作集合的属性，例如其排序顺序或所选项目，而无需更改基础数组上的这些属性。

由于单个对象数组可以是应用程序许多部分的基础数据，因此您不一定要更改数组本身。

Jame's Croft 有一个很棒的关于代理的指南：http: [//matchingnotes.com/ember-array-proxy](http://matchingnotes.com/ember-array-proxy)

# php - 用户收藏夹和 Memcached

> ID：12998140
> 
> 赞同：0
> 
> 时间：2012-10-21T13:17:11.060
> 
> 标签：php, mysql, memcached

假设我有两张桌子

```
posts
 - post_id
 - image

favorites
 - fav_id
 - post_id
 - user_id 
```

当用户进入站点时，从数据库中获取 10 个帖子并显示。我现在正在做的是将这些表连接在一起并循环遍历结果，在那里我可以检查用户是否喜欢某些东西。

像这样的东西：

```
SELECT p.*, f.fav_id
FROM posts p
LEFT JOIN favorites f
ON p.post_id = f.post_id AND user_id = $user_id
LIMIT 10 
```

这很好，除了现在我想用**memcached**缓存结果并且每个用户的查询不能不同，因为这样缓存就不起作用了。我希望所有用户都从同一个缓存条目加载帖子。

我的第一个想法是，我可以在他登录时获取所有用户的收藏夹并将它们保存到缓存中，并在他浏览网站上的帖子时使用它。我的朋友建议，当用户有许多收藏夹并且许多用户同时登录时，这可能会变得很重。

我不知道如何处理这个问题，你们怎么看？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:30:38.720

查询本身并不是特别密集，因此对于服务器上的负载应该没问题。

关于您提到的内容，似乎并不清楚；至少对我来说。

如果你想缓存一个用户的最爱，你总是需要一个不同的查询，因为你使用不同的数据，特别是 user_id。如果您想要制作，我们称之为多个缓存，每个用户一个，这将是可行的，但是，您遇到的问题是您必须检查用户的收藏列表中是否有新内容，除非您更新当用户选择新的东西作为收藏时的特定缓存。

我会在会话开始时使用查询来检查每个用户的收藏夹，并将它们保留在那里直到会话结束，如果用户添加了新内容，那么我将在会话中更新该列表。

更新
考虑到您的评论，当用户将某些内容添加到收藏夹列表时，我将重建缓存，从而减少用户的停机时间。

此外，您可以在用户登录时使用简单查询来获取这些结果。简单查询将快速运行并很快提供结果。

但是一旦你在会话中加载了收藏夹，性能应该没有问题，除非你有太多的用户，你在会话上存储了太多的信息，或者你一直有太多的数据流和查询。

# c++ - C++ 数组和窗口退出

> ID：12998142
> 
> 赞同：0
> 
> 时间：2012-10-21T13:17:29.237
> 
> 标签：c++, arrays, matrix

我是 C++ 新手，但我很了解 C#、java。但是不要紧。我想创建跳棋游戏仿真。我为窗口添加了新事件 - 加载。这是我所做的事情的来源：

```
private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
             int matr[7][7];
             int i, j;
             int prevBlack = 1;
             int prevRow = 0;
             int current = 0;

             for (i = 0; i < 8; i++)
             {
                 if ((i + 1) % 2 == 0)
                 {
                     prevBlack = 0;
                 }
                 else
                 {
                     prevBlack = 1;
                 }

                 for (j = 0; j < 8; j++)
                 {
                     if (prevBlack == 1)
                     {
                         current = 0;
                     }
                     else if (i == 0 || i == 1 || i == 2)
                     {
                          current = 2;
                     }
                     else
                     {
                         current = 1;
                     }

                     matr[i][j] = (int)current;

                     if (current == 1 || current == 2)
                     {
                         prevBlack = 1;
                     }
                     else
                     {
                        prevBlack = 0;
                     }
                 }

                 prevRow = i;
             }
         } 
```

问题是`matr[i][j] = (int)current;`在这部分代码的末尾，我的程序退出了。当这部分代码被注释时，将显示窗口。

我不知道为什么会这样。数组是 8 x 8。我需要你的帮助 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:20:39.110

当您将数组声明为`matr[7][7]`时，它的大小为 7x7，有效索引为 0..6。但是您正在使用索引 0..7 访问此数组，这会导致错误。

您应该声明该数组，`matr[8][8]`因为您需要一个 8x8 数组。

# mysql - 在MYSQL中计算和更新具有简单移动平均收盘价的表格

> ID：12998146
> 
> 赞同：5
> 
> 时间：2012-10-21T13:17:51.410
> 
> 标签：mysql, sql, average, finance

我可以使用一些帮助（最好是虚拟指南）来更新下表：

```
CREATE TABLE `SYMBOL` (
  `day` date NOT NULL,
  `open` decimal(8,3) DEFAULT NULL,
  `high` decimal(8,3) DEFAULT NULL,
  `low` decimal(8,3) DEFAULT NULL,
  `close` decimal(8,3) DEFAULT NULL,
  `volume` bigint(20) DEFAULT NULL,
  `adj_close` decimal(8,3) DEFAULT NULL,
  `moving_average` decimal(8,3) DEFAULT NULL,
  PRIMARY KEY (`day`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

现在，moving_average 列是空的。所有其他列都已填充（暂时，我可以接受这是“静态的”，它不需要在我添加行时更新 - 尽管如果这很容易做到，那就太好了）。这是我希望计算的 20 天移动平均线。

我已尽我所能执行此处的步骤：

[如何使用 MySQL 计算移动平均线？](https://stackoverflow.com/questions/878473/how-do-i-calculate-a-moving-average-using-mysql)

我的查询是这样的：

```
SELECT
     `close`,
     (
     SELECT
          AVG(`close`) AS moving_average
     FROM
          SYMBOL T2
     WHERE
          (
               SELECT
                    COUNT(*)
               FROM
                    SYMBOL T3
               WHERE
                    `day` BETWEEN T2.day AND T1.day
          ) BETWEEN 1 AND 20
     )
FROM
     SYMBOL T1 
```

我是否正确修改了查询？将结果写入moving_average 列需要做什么？

当我运行上述内容时，没有任何反应（它说它正在运行，没有错误，让它运行很长时间后我才停止它）。列moving_average 仍然有NULL 值。

我还看了这个答案： [如何在 MySQL 中计算多个移动平均线](https://stackoverflow.com/questions/7059693/how-to-calculated-multiple-moving-average-in-mysql)

但是，我不确定我需要对我的表的回复进行什么更改。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:56:49.783

有两种方法可以做到这一点：

1.  创建一个`update`更新表中每一行的查询
2.  创建一个完成这项工作的存储过程

我个人更喜欢选项2：

```
delimiter $$
create procedure movingAvg()
begin
    declare mv double;
    declare t date;
    declare done int default false;
    declare cur_t cursor for
         select distinct day from symbol
         order by day;
    declare cur_mv cursor for
         select avg(close) from symbol
         where day between date_add(t, interval -19 day) and t;
         -- Here you define the interval of your MV.
         -- If you want a 20-day MV, then the interval is between t-19 and t
    declare continue handler for not found set done=true;

    open cur_t;
    loop_day: loop
        fetch cur_t into t;
        if not done then
            open cur_mv;
            fetch cur_mv into mv;
            close cur_mv;
            update SYMBOL
                set moving_average = mv
                where day=t;
        else
            leave loop_day;
        end if;
    end loop loop_day;
    close cur_t;
end;
delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:06:13.190

这是一个可能的解决方案：

```
update SYMBOLS
from (
   select a.day
        , avg(b.close) as moving_average
   from   SYMBOLS a
   cross join SYMBOLS b
   where b.day BETWEEN date_sub(a.day, INTERVAL 19 DAY) and a.day
      and a.moving_average is null
   group by a.day
   ) x
set moving_average=x.moving_average
where SYMBOLS.day=x.day 
```

对不起，我自己不使用 mysql，所以我猜测日期算术语法。我添加了一个条件，只更新你`moving_average`为空的行。

**UPDATE:** Be sure you understand that this solution is based on a 365-day calendar. Most stock market averages like "20-day" or "30-day" are based on a trading calendar which excludes weekends and holidays. You would need to create a trading calendar table youself (a simple list of all trade dates). If you want to do that, you might want to ask a new question to that effect.

# c - 命令行参数传递

> ID：12998148
> 
> 赞同：0
> 
> 时间：2012-10-21T13:17:59.313
> 
> 标签：c, command-line

```
#include<stdio.h>

int main(int number, char arg[])
{
    int i;

    printf("%d\n",number);

    for(i=0;i<7;i++)
        printf("%c",arg[i]);
    printf("\n");   

    return 0;
} 
```

我在 ubuntu 终端中运行它并通过键入“./a.out”来运行它。我希望输出是“./a.out”，但是打印了一些垃圾值。请解释为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:20:32.907

您的签名`main()`错误：

```
int main(int number, char arg[]) 
```

应该：

```
int main(int number, char *arg[]) 
```

然后在打印时像二维数组一样访问它，例如：

```
for(i=0;i<strlen(argv[0]);i++)
    printf("%c",arg[0][i]); 
```

或者只打印索引 0 处的字符串：

```
printf("%s",arg[0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T13:22:16.963

因为您缺少`argv`. 操作系统会为您预先解析参数（用空格分隔它们），因此您最终会得到一个字符串数组。你应该写：

```
int main(int argc, char **argv)
{
    int i;
    for (i = 0; i < argc; i++) {
        printf("%s ", argv[i]);
    }

    return 0;
} 
```

为了取回整个命令行调用。

P.s.：**你真的应该命名`main()`argc 和 argv 的参数。**这是惯用的，不这样做很*奇怪。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:20:51.787

`main`is `int main (int argc, char* argv[])`-的签名是`argv`字符串数组，而不是字符数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T13:25:02.483

按照惯例，main 函数将 int 作为第一个参数（这在您的代码中是可以的），但第二个参数必须是字符数组 ( `char *argv[]`) 上的指针。

必须如此，因为当你的程序被调用时，它的参数就在这个数组中。如果你打电话`./a.out foo bar`，数组将是

```
arg[0] = "./a.out"
arg[1] = "foo"
arg[2] = "bar" 
```

并且整数将包含 3，即为您的程序提供的参数数量。

如果您想打印给程序及其参数的参数数量，则需要将代码转换为

```
int main(int number, char *arg[]) // the right main prototype
{
    int i;

    printf("%d\n",number);

    for(i=0;i<number;i++) // from i = 0 to the number of parameters
        printf("%s\n",arg[i]); // print a string (%s)

    return 0;
} 
```

# html - 标题链接：有或没有类型声明？

> ID：12998152
> 
> 赞同：0
> 
> 时间：2012-10-21T13:18:30.307
> 
> 标签：html

快速提问：标准做法是指定 html 标头链接，例如：

```
<link rel="stylesheet" href="css/mainstylesheet.css"  type="text/css" /> 
```

但是我已经开始看到人们删除了这样的类型声明；特别是在 html5 样板等项目中。

```
<link rel="stylesheet" href="css/mainstylesheet.css"/> 
```

那么这些类型声明是多余的，还是最好包含它们。笔记; 我的意思不是说我们可以不使用它们（答案是“是”），而是说哪种做法更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:28:11.937

我个人更喜欢`type`从标签中删除属性`link[rel="stylesheet"]`以`script`节省一些字节，因为它可以在没有链接的情况下工作`type`并且[它不是强制性](http://dev.w3.org/html5/spec/single-page.html?utm_source=dlvr.it&utm_medium=feed#attr-link-type)的（对于样式表链接“text/css”[是默认值](http://dev.w3.org/html5/spec/single-page.html?utm_source=dlvr.it&utm_medium=feed#link-type-stylesheet)，对于脚本标签“text/javascript”[是默认值](http://dev.w3.org/html5/spec/single-page.html?utm_source=dlvr.it&utm_medium=feed#attr-script-type))

# java - 如果字符串类似于 String str="1234";，如何在 java 中将字符串转换为整数？

> ID：12998154
> 
> 赞同：0
> 
> 时间：2012-10-21T13:18:38.120
> 
> 标签：java, string

如果字符串是这样的，如何在java中将字符串转换为整数：

```
String str="  1234"; 
```

注意字符串的开头有空格。我试过`Integer.parseTnt(str)`方法。但是java显示`NumberFormatException`。帮我怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T13:19:56.650

试试这个 `Integer.parseInt(str.trim());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:20:03.983

修剪字符串，它将删除空格，然后使用`Integer#parseInt`.

```
String str =" 1234";
Integer i = Integer.parseInt(str.trim()); 
```

*如果您尝试在不修剪的情况下解析此字符串，那么您将得到`NumberFormatException`.*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:20:52.867

你可以使用修剪功能，这将删除字符串前面的空格。然后您可以将字符串转换为整数。整个过程如下图所示：

字符串str =“4443”；整数 i = Integer.parseInt(str.trim());

这将删除空间，然后将 strin 转换为 int .. 希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T13:20:04.140

你先修剪它，然后再进行解析。

```
Integer.parseInt(str.trim()); 
```

# c# - 实体框架。查询加载了子类属性的父实体

> ID：12998156
> 
> 赞同：3
> 
> 时间：2012-10-21T13:18:51.020
> 
> 标签：c#, entity-framework, linq-to-entities, ef-code-first

有一个简单的域..

```
public abstract class UserComment
{
    public string Text { get; set; }
}

public class BlogComment : UserComment
{
    public Blog Blog { get; set; }
}

public class PhotoComment : UserComment
{
    public Photo Photo { get; set; }
} 
```

有没有办法查询*UserComment*类型的所有实体并加载属性博客和照片？

```
var comment = DbContext.Set<UserComment>()
    .Include(x => x.Blog) // will not compile
    .Include(x => x.Photo) // will not compile
    .FirstOrDefault();

if (comment is PhotoComment )
{
    string url = (comment as PhotoComment).Photo.Url;
}
if (comment is BlogComment)
{
    var dateCreated = (comment as BlogComment).Blog.DateCreated;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T15:30:09.057

您可能需要两个查询才能获得结果。如果您只想要第一个元素 ( `FirstOrDefault`) 显式加载 - 正如您在评论中已经提出的那样 - 是一个好方法：

```
var comment = DbContext.Set<UserComment>().FirstOrDefault();

if (comment is BlogComment)
    DbContext.Entry(comment as BlogComment).Reference(bc => bc.Blog).Load();
else if (comment is PhotoComment)
    DbContext.Entry(comment as PhotoComment).Reference(pc => pc.Photo).Load(); 
```

如果要加载`UserComment`s 的列表，这不是最佳解决方案，因为它需要遍历加载`UserComment`的 s 并为每个元素调用显式加载，这将导致许多查询。

对于列表，您可以使用以下方法，该方法也只会生成两个查询：

```
IEnumerable<UserComment> blogComments = DbContext.Set<UserComment>()
    .OfType<BlogComment>()
    .Include(bc => bc.Blog)
    .Cast<UserComment>()
    .AsEnumerable();

IEnumerable<UserComment> photoComments = DbContext.Set<UserComment>()
    .OfType<PhotoComment>()
    .Include(pc => pc.Photo)
    .Cast<UserComment>()
    .AsEnumerable();

List<UserComment> comments = blogComments.Concat(photoComments).ToList(); 
```

由于使用`AsEnumerable()`this 将运行两个单独的数据库查询并将结果连接到内存中的单个集合。

LINQ-to-Entities 支持`Cast`但由于某种原因无法删除这两个`AsEnumerable()`转换以仅获取单个数据库查询并将结果连接到数据库中。代码仍然可以编译，但我有一个关于无效`Include`路径的运行时异常。

我已经用 EF 4.1 进行了测试。可能值得在不`AsEnumerable()`使用 EF 5.0 的情况下测试查询，看看它是否仍然失败。

# .net - .net pos 打印机卷筒打印

> ID：12998166
> 
> 赞同：2
> 
> 时间：2012-10-21T13:19:58.017
> 
> 标签：.net, printing

我正在为超市开发一个系统，该系统将在使用 .net 开发票后打印 pos bill。

对于账单打印，我在 .net 中使用 System.Drawing.Printing。

问题是当项目列表太长时，当它增加单页限制时，pos 打印机只打印第一页并剪纸。

以下是我使用的打印代码示例。请帮我解决这个问题。

```
Private Sub printInvoice()

     Dim printDocument As New PrintDocument
     Dim printController As New StandardPrintController
     printDocument.PrintController = printController
     AddHandler printDocument.PrintPage, AddressOf PrintDocumnet_Event
     printDocument.Print()

End Sub

Public Sub PrintDocumnet_Event(ByVal sender As Object, ByVal e As PrintPageEventArgs)
    Try
        Dim dataFont As Font = New Font("Courier New", 9, FontStyle.Bold)
        Dim leftMargin As Integer = 15
        Dim topMargin As Integer = 65

        For Each invoiceRow As DataRow In dtInvoice.Rows
            Dim code As String = invoiceRow("Item_Code").ToString.Trim
            Dim name As String = invoiceRow("Print_Name").ToString.Trim
            Dim price As String = String.Format("{0:0.00}", Double.Parse(invoiceRow("Price"))) + "x"
            Dim qty As String = String.Format("{0:0.###}", Double.Parse(invoiceRow("Qty")))
            Dim amont As String = String.Format("{0:0.00}", Double.Parse(invoiceRow("Amount")))
            Dim discount As String = String.Format("{0:0.00}", Double.Parse(invoiceRow("Discount")))

            e.Graphics.DrawString(String.Format("{0,-8}", name), dataFont, Brushes.Black, leftMargin, topMargin)
            topMargin += 15
            e.Graphics.DrawString(String.Format("{0,-10} {1,7} {2,5} {3,8}", code, price, qty, amont), dataFont, Brushes.Black, leftMargin, topMargin)
            topMargin += 20
        Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:22:51.597

谢谢大家。我找到了解决方案。我必须根据项目列表检查页面高度，并在页面超出时添加以下内容。

```
 e.HasMorePages = True 
```

# c - 用户输入双精度值时出错

> ID：12998169
> 
> 赞同：-1
> 
> 时间：2012-10-21T13:20:00.020
> 
> 标签：c

我编写了一个决定三角形类型的程序。当用户输入字符串输入时，它会出错。我也想为双输入给出错误。为了做到这一点，我尝试了这个

```
else if (s1[i] == '.') {
                found_double = 1;
                break; 
```

但程序也可以识别`.`为字符串。我该如何解决这个问题？完整代码如下。

```
/*
 * HW3-3.c
 *
 *  Created on: Oct 21, 2012
 *      Author: mert
 */

 #include <string.h>
 #include <stdio.h>

 void checkTriangle(char *s1,char *s2,char *s3)
  {
    int i;
    int found_double = 0;
    int found_letter = 0;
    int len = strlen(s1);
    int len2 = strlen(s2);
    int len3 = strlen(s3);

    for( i = 0; i < len; i++)
    {
        if(s1[i] < '0' || s1[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        } else if (s1[i] == '.') {
            found_double = 1;
            break;
        }
    }

    for( i = 0; i < len2; i++)
    {
        if(s2[i] < '0' || s2[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        } else if (s2[i] == '.') {
            found_double = 1;
            break;
        }
    }

    for( i = 0; i < len3; i++)
    {
        if(s3[i] < '0' || s3[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        } else if (s3[i] == '.') {
            found_double = 1;
            break;
        }
    }

    if(found_letter) // value 0 means false, any other value means true
        printf("Please enter an integer instead of string.");
    else if (found_double)
        printf("Please enter an integer instead of double.");
    else
    {
            int side1 = atoi(s1);
            int side2 = atoi(s2);
            int side3 = atoi(s3);

            if ((side1 + side2 > side3 && side1 +  side3 > side2 && side2 + side3 > side1) && (side1 > 0 && side2 > 0 && side3 > 0))
                 {
                // Deciding type of triangle according to given input.
                  if (side1 == side2 && side2 == side3)
                      printf("EQUILATERAL TRIANGLE");
                  else if (side1 == side2 || side2 == side3 || side1 == side3)
                      printf("ISOSCELES TRIANGLE\n");
                  else
                      printf("SCALENE TRIANGLE \n");
                }
                 else
                     printf("\nTriangle could not be formed.");
    }
  }

  int main(void)
  {

      char s[32], s2[32], s3[32];

      printf("Please enter sides of triangle");
      printf("\nPlease enter side 1:");
      gets(s);
      printf("Please enter side 2:");
      gets(s2);
      printf("Please enter side 3:");
      gets(s3);

      checkTriangle(s,s2,s3);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:34:30.633

您可以更改 IF 的顺序。

```
 if (s1[i] == '.')
 {
       //code here
 }
 else if(s1[i] < '0' || s1[i] > '9')
 {
     //code here
 } 
```

因为'.'的ASCII码 绝对不在区间 ['0', '9'] 中，所以它总是会在第一个 IF 中被捕获。

您可以尝试以下代码来查看它们的 ascii 值：

```
 printf("Ascii code for char '.' is %d\n", '.');
  printf("Ascii code for char '0' is %d\n", '0'); 
  printf("Ascii code for char '9' is %d\n", '9'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:28:40.613

1.  s1 是一个 char*，所以应该是 '.' 将是（用你的话）一个字符串。
2.  的价值 '。' 小于'0'（或者可能大于'9'），所以你将输入第一个if并跳过else if

# asp.net - asp.net如何确保应用程序在关闭之前关闭文件

> ID：12998170
> 
> 赞同：-1
> 
> 时间：2012-10-21T13:20:02.123
> 
> 标签：asp.net, xml, file

所以我目前正在为我的动态 Web 设计类在 asp.net 中的一个网站上工作，我现在正在研究 xml 部分。我目前的代码中有错误，并且在到达 fs.close(); 之前应用程序崩溃；至尊关闭文件。当我尝试再次运行调试时，它在打开文件时崩溃，告诉我它正在被使用。我试图关闭并打开 Visual Studio 和我的浏览器，但唯一有效的是重新启动我的计算机。有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:26:27.193

好的，所以我发现一个进程保持打开状态： `WebDev.WebServer40.EXE *32` 如果我杀死它，我现在可以再次使用该文件。

# c++ - How to check the Object Type in c++

> ID：12998182
> 
> 赞同：2
> 
> 时间：2012-10-21T13:20:58.057
> 
> 标签：c++, oop, inheritance

For example we have an Animal class ,and we created some other class such as Lion class,Tiger class,etc. I have made a list of the Animal class and I want to transverse the list and process the list according to the type of the class of the every member in the list.

```
Class Animal
Class Tiger :: public Animal{}
Class Lion :: public Animal{}
list<Animal> l;
Tiger T;
Lion L;
l.push_back(T); l.push_back(L);
if the top member of the list is Tiger print"ITs a tiger"
else print"something" 
```

Simply, I want to check the type of the instance created. I don't know how to do it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:22:56.653

This is called [RTTI](http://en.wikipedia.org/wiki/Run-time_type_information) and it's not good coding practice.

This being said, if you absolutely want to know a class' type, you can do

```
if (typeid(myanimal) == typeid(Tiger)) {
    // Do something tiger-like
} 
```

What I would recommend in your case is to have a common interface to all `Animal`, for instance a `sayHello()` method. You would have

```
class Animal {
    void sayHello() = 0;
    // Other things
} 
```

In `Tiger` this would be

```
Tiger::sayHello() {
    cout << "Hello I'm a Tiger!" << endl;
} 
```

Then, from your `vector<Animal*>` (you need to use pointers) just call

```
myAnimal->sayHello(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T13:23:07.743

You can check for the type (`typeid`), yes, but you don't need to.

You can just hold a `std::list<std::unique_ptr<Animal> >` and have a `virtual` method in `Animal`. This way you're taking advantage of polymorphism.

```
class Animal
{
public: 
    virtual void print() = 0;
};
class Tiger : Animal
{
    virtual void print() { std::cout << "I'm a tiger"; }
};

Animal* pA = new Tiger;
pA->print(); // prints tiger 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:26:25.663

use dynamic_cast and check whether result is valid. But!!!!!!! You it is usually a bad practice: in your case it is better in the base class to declare virtual function virtual std::string printMe() const = 0; and implement it in each class.

# c# - 自我管理项目的源代码控制

> ID：12998187
> 
> 赞同：1
> 
> 时间：2012-10-21T13:21:44.200
> 
> 标签：c#, version-control

建议将什么源代码控制用于自我管理的项目？这是 Visual Studio 2010 上的 C# WPF 项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:24:00.457

将[Mercurial](https://www.mercurial-scm.org/)与它可能是最好的 Windows 桌面客户端[TortoiseHG](http://tortoisehg.bitbucket.io/)一起使用。如果您想要在线存储库，可以使用[GoogleCode](http://code.google.com/)。对于本地的、快速的更改或一些实验性的东西，您可以使用由 Mercurial 本身提供的本地版本，就像所有标准的[分布式修订控制](http://en.wikipedia.org/wiki/Distributed_revision_control)系统一样。

如果您想了解有关 Mercurial 和 HG 的一般管理的良好信息，您可以查看 Joel Spolsky 的优秀文章：

[Hg Init：Mercurial 教程](http://hginit.com/)

还有其他替代品，例如[Git](http://git-scm.com/)，但老实说，*我*发现 Mercurial 比 Git 或任何其他产品更易于管理和理解，更适合简单的个人项目。在我看来，它完美地结合了分布式系统的强大功能（可能比 Git 提供的功能更少，但你**真的**需要所有这些功能吗？？）和控制的简单性，这是我认为的要点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T13:28:03.963

如果您不想设置自己的 repo，可以使用[bitbucket.org](http://bitbucket.org)。

它对私人商业回购是免费的，并且可以与 bot git 和 Mercurial 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:24:39.347

亲自 ？我会使用 git / tortoisegit。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T13:25:52.310

我会推荐 Team Foundation Service。它仍处于预览阶段，完全免费。

[您可以在http://tfspreview.com](http://tfspreview.com)订阅

它与 Visual Studio 很好地集成。您不必安装任何东西或担心备份。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T13:41:59.827

[AnjhSVN](http://ankhsvn.open.collab.net/)（VS 插件），使用[TortoiseSVN](http://tortoisesvn.net/)。您还需要一个[SVN 服务器](http://www.visualsvn.com/server/licensing/)。这三个都是免费的。

# c - 如何将数组指针传递给函数？

> ID：12998188
> 
> 赞同：0
> 
> 时间：2012-10-21T13:21:44.427
> 
> 标签：c, arrays, pointers

我有两个数组。我在 main 内部调用一个函数，在该函数中我根据另一个数组中的一些值更新其中一个数组。

```
volatile float32_t raw_data[3]; //this is being updated by an interrupt handler
void get_acc(int32_t* acc_data, float32_t* raw_data)
{
  acc_data[0] = (raw_data[0] - OFFSETX)/SENSX; //OFFSETX and SENSX defined as a macro
  acc_data[1] = (raw_data[1] - OFFSETY)/SENSY;
  acc_data[2] = (raw_data[2] - OFFSETZ)/SENSZ;
}
int main()
{
  int32_t acc_data[3];      
  int32_t data_ready = 0;  //being updated by interrupt handler
  while(1)
  {
  if(data_ready)
  get_acc(acc_data,raw_data);
  }
} 
```

令我震惊的是，当我使用断点观察变量并单步执行 get_acc 时，只有第一个 acc_data[0] 得到更新，所有其他变量都设置为 0，即使它们已执行。现在我的第一个怀疑是它与指针有关，可能是地址没有正确更新。因为我已经使用传递数组来像我在 for 循环中更新数组索引一样运行，而不是手动。任何人都可以提供见解可能是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:21:41.460

您可能在这里遇到细微的同步错误：

1.  正如乔纳森指出的那样`raw_data`，它在函数内部失去了限定符。以这种方式使用`volatile`变量是未定义的行为，即使不涉及信号处理程序。
2.  此外，信号处理程序似乎还异步触摸了您的数据。从 C99 开始，您可以使用此类信号处理程序接触的唯一数据类型是`sig_atomic_t`. C11 更进一步，还允许其他无锁原子类型：

> 当抽象机的处理因接收到信号而中断时，既不是无锁原子对象也不是 volatile sig_atomic_t 类型的对象的值是未指定的，浮点环境的状态也是如此。处理程序修改的任何对象（既不是无锁原子对象也不是 volatile sig_atomic_t 类型）的值在处理程序退出时变得不确定，如果浮点环境的状态被处理程序修改且未恢复，则它的状态也是不确定的回到原来的状态。

如您所见，尤其是接触浮点数被认为是不行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:55:45.233

编译代码（Mac OS X 10.7.5 上的 GCC 4.7.1）时，我收到警告：

```
warning: passing argument 2 of ‘get_acc’ discards ‘volatile’ qualifier from pointer target type [enabled by default]
note: expected ‘float32_t *’ but argument is of type ‘volatile float32_t *’ 
```

我不确定这是否会导致您遇到麻烦，但这可能是一个因素。我注意到也`data_ready`应该是`volatile`合格的。

另外，如果你用 编译`-Wshadow`，你会得到：

```
In function ‘get_acc’:
warning: declaration of ‘raw_data’ shadows a global declaration [-Wshadow] 
```

这更像是一个“误解风险”问题，而不是更严重的问题。

但是，除了限定符的不同之外，您显示的代码是干净的，编译器应该生成代码来读取三个值`raw_data`并将它们处理到`acc_data`. 您是否查看过为该函数生成的汇编语言？

# ruby-on-rails - 如何在 Web 应用程序中集成文档版本控制？

> ID：12998194
> 
> 赞同：0
> 
> 时间：2012-10-21T13:22:19.553
> 
> 标签：ruby-on-rails

我想知道如何在 ruby​​ on rails web 应用程序中集成文档版本控制？

假设我创建了一个帖子并将其保存在我的数据库中。现在有另一个用户并更改了此帖子。现在我将为用户提供这些帖子之间的差异。就像在 Github 中，当一个新的提交被推送到存储库时。

也许可以为此目的使用 git ？或者什么是保存一个帖子的不同版本而不保存整个帖子x次的好方法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:27:52.187

听起来您正在寻找具有以下功能的“审核库”：

`Only save the change and info about the change`

这样的宝石是[paper_trail](https://github.com/airblade/paper_trail)。

您可以查看此 rails cast 以进行设置：

[http://railscasts.com/episodes/255-undo-with-paper-trail](http://railscasts.com/episodes/255-undo-with-paper-trail)

您可以尝试以下代码：

```
class Posts< ActiveRecord::Base

has_paper_trail

end 
```

然后使用：

```
post.versions 
```

访问更改列表。

# erlang - Mnesia 复制和大量脏操作

> ID：12998195
> 
> 赞同：2
> 
> 时间：2012-10-21T13:22:28.210
> 
> 标签：erlang, mnesia, yaws, mochiweb, nitrogen

一些应用程序需要非常快速的响应，以满足他们对用户的期望。我正在构建一个这样的应用程序，我正在使用`mnesia`. 现在，当我们`by-pass`使用 mnesia 事务管理器时，我们接近了良好的性能。然而，这就是问题所在：

我们需要复制这个数据库作为我们的一部分`load balancing`，毕竟，mnesia 为我们完成了复制。我们`ONLY` `dirty`在此应用程序中使用操作。我们有几个部分使用`async_dirty`上下文。我想知道，如果我们不使用`transaction`这种规模的上下文，mnesia 复制会受到影响吗？

记录上总是发生太多频繁`dirty`的操作，所以我想知道是否对`side B`副本提出请求，会发现刚刚所做的更改`side A`通过脏操作复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:58:13.370

根据[Mnesia 用户指南](http://www.erlang.org/doc/apps/mnesia/Mnesia_chap4.html)：

*   `async_dirty`活动“将等待在一个节点上执行操作，而不是在其他节点上执行”。
*   对于`sync_dirty`活动：“调用者将等待在所有活动副本上执行更新”。

# css - CSS div 标题宽度不显示 100%。

> ID：12998196
> 
> 赞同：1
> 
> 时间：2012-10-21T13:22:46.107
> 
> 标签：css, html

如果我的浏览器变大，那么我的 div 标题宽度不会显示 100%。但我将 div 标题宽度设置为 100%。请有人能指出我在这里可能做错了什么吗？非常感谢。这是我的代码：

```
<!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="utf-8">
    <title>Welcome Page</title>
    <link rel="shortcut icon" href="image/icon.ico" >
    <link rel="StyleSheet" href="style/login.css" type="text/css"/>
        </head>
        <body>
            <div id="header">
            <div id="header_contain">
                <table width="100%" cellpadding="0" cellspacing="0">
                    <tr>
                        <td width="50%" style="font-size: 18pt; font-weight: bold">Hello</td>
                        <td width="50%" align="right" style="font-size: 18pt; font-weight: bold">What's Up!</td>
                    </tr>
                </table>
            </div>
            </div>
     </body>
    </html> 
```

CSS代码

```
body
{
margin: 0px;
padding: 0px;
font-family: arial, helvetica, sans-serif;
font-size:10pt;
}

#header
{
width: 100%;
height: 85px;
background: #006666;
}

#header_contain
{
    color: white;
    width: 980px;
    height: auto;
    margin: 0px auto;
    padding-top: 30px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:32:02.897

```
#header
width: 100%;
height: 85px;
background: #006666;
position:fixed;
z-index:999;
top:0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:44:10.520

我已经编辑了我的代码并对其进行了测试。

1.  HTML 代码：

    ```
    <div id="header" style="width:1500px;">
            <div id="header_contain" style="min-width:980px;">

                <table>
                    <tr>
                        <td>
                            <div style="width:500px;">
                            Hie, Div1 Content Here.!!
                            </div>
                        </td>
                        <td>
                            <div style="width:500px;">
                            Hie, Div2 Content Here.!!
                            </div>
                        </td>
                        <td>
                             <div style="width:500px;">
                            Hie, Div3 Content Here.!!
                            </div>
                        </td>
                    </tr>
               </table>

            </div>

            </div> 
    ```

2.  CSS代码..类似这样的东西。

    ```
    html, body
    {
     height: 100%;
     margin: 0px;
     padding: 0px;
     font-family: arial, helvetica, sans-serif;
     font-size:10pt;
     overflow:auto;
    }

    #header
    {
     height: 85px;
     background: #006666;
    }

    #header_contain
    {
    color: white;
    height: auto;
    margin: 0px auto;
    padding-top: 30px;
    } 
    ```

如果它对您有帮助，请不要忘记提高您的接受率。干杯。！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:56:56.347

我在 header_contain div 上使用了我已经在 head div 中使用过的相同颜色，这样我就解决了这个问题。

```
#header
{
width: 100%;
height: 85px;
background: #006666;
}

#header_contain
{
    color: white;
    width: 980px;
height: 85px;
background: #006666;
    margin: 0px auto;
    padding-top: 30px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T13:40:24.893

您需要将每个元素设置`<div>`为 100% 以上的宽度，包括`<html>`标签。

# php - PHP 和 Ruby 中方法的区别

> ID：12998200
> 
> 赞同：1
> 
> 时间：2012-10-21T13:23:05.793
> 
> 标签：php, function, oop, methods

我刚刚开始学习PHP。抱歉，如果这是一个新手问题，但我想知道方法是如何工作的。例如，如果我想删除字符串开头的空格。在 Ruby 中，我会这样称呼：

```
string.strip! 
```

但在 PHP 中，我必须执行以下操作：

```
trim(string); 
```

显然，Ruby 版本更优雅（就面向对象的设计而言），但我想知道它如何适用于 PHP 和 Java 等其他语言。是否有以这种方式设计函数/方法的名称（在 PHP 中）？这些方法在哪里定义，为什么可以在任何地方访问它们？提前非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T13:37:46.540

这里有两种不同的范式：*面向对象编程*(OOP) 和*过程编程*。

在 OOP 中，函数是在数据的上下文中定义的，由**类**封装；此类函数通常称为**方法**。当在对象（例如类的实例）上调用方法时，它固有地可以访问该对象的状态。所以，在你的例子中，`strip`已经知道它被调用的是什么字符串，因此不需要任何额外的参数。每当您的函数自然地对特定对象或数据集进行操作时（例如，`strip`作为对字符串的操作），以这种方式将其定义为实例方法是明智的。

在过程式编程中，函数是独立定义的数据结构（类），并且必须显式传递它们要使用的数据。有时这种方法实际上更自然；例如，将`print`某些输入打印到`stdout`或类似的函数自然不会与任何特定对象或数据相关联。

大多数现代语言都内置了面向对象的特性，因为它是一种非常通用且功能强大的编程范式。Java 和 C# 等语言鼓励所有代码以面向对象的风格编写。在这些语言中，即使是字符串和浮点等基本数据类型实际上也是对象，并且有自己的方法和状态。在 C# 中尤其如此，*所有*类型最终都继承自`System.Object`(even `int`and `double`) 并继承由此定义的所有常用方法。这称为*统一类型层次结构*。

另一方面，PHP 具有 OOP 和过程特性的奇妙混合。它最初是一种程序语言，而 OOP 仅在版本 3 中引入（并且仅在非常初级的意义上）。虽然从 PHP5 开始，它具有相对较好的 OOP 支持，但它的大多数标准库仍然在程序上实现为松散的函数集合，这些函数期望将相关状态/数据作为参数传递给它们。然而，OOP 库正变得越来越普遍（例如，使用`mysqli`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T13:27:25.193

本质上，您正在查看实例方法和类/静态方法之间的区别。实例方法在类的特定实例上调用，它们可以访问该实例的内部状态。类/静态方法不是，也不是。

* * *

我不确定您在询问“它如何适用于 PHP 和 ... Java”时要寻找什么。关于实例与非实例方法，Ruby、PHP 和 Java 的工作方式大致相同。

# php - PHP mysqli“调用非对象上的成员函数查询（）”来自其他类

> ID：12998206
> 
> 赞同：-1
> 
> 时间：2012-10-21T13:23:54.840
> 
> 标签：php, mysqli

> **可能重复：**
> [参考 - 这个错误在 PHP 中意味着什么？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

我有两节课：

1.  数据库类
2.  Libtables 类

在数据库类中，我为整个脚本创建了一个使用 mysqli 的对象。当我尝试从 .php 文件中的数据库类调用函数时，它可以工作。

简化的数据库类：

```
class Database {

protected static $_instance;
protected $_mysqli;
protected $_query;

public function __construct($host, $username, $password, $db) {
    $this->_mysqli = new mysqli($host, $username, $password, $db)
        or die("There was a problem connecting to the database");
}

public function close() {

    $this->_mysqli->close();

}

public function query($q) {
    return $this->_mysqli->query($q);
} 
```

}

但是，当我尝试从 Libtables 类中的数据库类调用函数时，它失败了，并且我收到一个名为的错误：“调用非对象上的成员函数 query()”

简化的 Libtables 类：

```
class Libtables {

    function getCol($table) {
    $q = "SELECT * from " . $table . ";";
    $res = $db->query($q);
    return $res;
    }

} 
```

我以这种方式创建了一个数据库类对象：

```
$db = new Database(DB_HOST, DB_USER, DB_PASS, DB_NAME);
global $db; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:26:37.137

您需要`global $db;`在 getCol 函数中。

```
function getCol($table) {
    global $db;
    $q = "SELECT * from " . $table . ";";
    $res = $db->query($q);
    return $res;
} 
```

* * *

根据下面的评论进行编辑。

另一种选择是将数据库作为属性存储在类中。以下是一个简化的响应。（您应该考虑使`var $db`私有并通过构造函数传入。有关更多详细信息，请参阅有关变量范围和对象构造函数的文档。）

```
class Libtables {

    var $db;

    function getCol($table) {
        $q = "SELECT * from " . $table . ";";
        $res = $this->db->query($q);
        return $res;
    }

}

$oLibtables = new libtables();
$oLibtables->db = $db; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:32:59.100

您遇到的问题与范围有关。该`$db`变量未在`Libtables`类中初始化。

您可以通过`$db`在需要使用它的函数中定义变量 global 来解决此问题，即

```
class Libtables 
{
    public function getCol($table) 
    {
        global $db;

        $q = "SELECT * from " . $table . ";";
        $res = $db->query($q);

        return $res;
    }
} 
```

或者您可以通过类构造函数注入变量，以便您可以在任何地方使用它（比使用全局变量更简洁的代码）。

```
class Libtables 
{
    private $_db;

    public function __construct($db)
    {
        $this->_db = $db;
    }

    public function getCol($table) 
    {
        $q = "SELECT * from " . $table . ";";
        $res = $this->_db->query($q);

        return $res;
    }
} 
```

创造`Libtables`

```
$db = new Database(DB_HOST, DB_USER, DB_PASS, DB_NAME);
.....
$lib = new Libtables($db); 
```

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:47:35.670

谢谢大家。它现在可以将数据库对象传递给 libtables 类。

# c# - 在 C# 中检索 SQL Server 数据库信息

> ID：12998209
> 
> 赞同：2
> 
> 时间：2012-10-21T13:24:19.957
> 
> 标签：c#, .net, sql-server, sql-server-2008-r2

我正在尝试创建一个程序，它将生成一个 SQL 数据库模式，包括表、视图、键、索引、触发器等......比如：

```
CREATE TABLE TableName(....) ....
CREATE VIEW ViewName(...) .... 
```

我知道这是可能的，因为 SQL Server Management Studio 可以做到（生成脚本命令）。然而，它是如何做到的呢？

**更新**：我忘了提及权限：我是数据库的所有者（在大多数情况下），但我**不是**系统管理员。会有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:46:39.000

如果您只针对 SQL Server，[SMO](http://msdn.microsoft.com/en-us/library/ms162169.aspx)非常强大。这是 SQL Server Management Studio 使用的库，包含将数据库对象转换为脚本的类。

[此处的脚本示例](http://msdn.microsoft.com/en-us/library/ms162153.aspx)是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:37:23.223

对于表格列表：

```
foreach (DataRow row in schemaTbl.Rows)
{
listBox.Items.Add(row["TABLE_NAME"]);
} 
```

对于特定表中的列

```
object[] objArrRestrict;
objArrRestrict = new object[] {null, null, "Customers", null};
DataTable schemaCols;
schemaCols = con.GetOleDbSchemaTable(OleDbSchemaGuid.Columns, objArrRestrict);
//List the schema info for the selected table
foreach (DataRow row in schemaCols.Rows)
{
listBox.Items.Add(row["COLUMN_NAME"]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T13:41:27.587

数据库结构的查询因 sql server 版本而异。

2008 R2 页面在[此处](http://msdn.microsoft.com/en-us/library/ms186778%28v=sql.105%29.aspx)，它链接到[TABLES](http://msdn.microsoft.com/en-us/library/ms186224%28v=sql.105%29.aspx)页面，该页面链接到[sys.tables](http://msdn.microsoft.com/en-us/library/ms187406%28v=sql.105%29.aspx)页面，该页面链接到[sys.objects](http://msdn.microsoft.com/en-us/library/ms187406%28v=sql.105%29.aspx)页面。

sys.objects 页面有相关示例。这只会给你桌子。列、触发器、视图等还有其他系统对象...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T13:45:44.383

如果您真正的意思是生成，您可能想研究实体框架/代码优先方法，这将基本上为您提升您的数据库（表等）。

# java - 用 gcj 编译 java & XStream。（例外：无法创建 XmlPullParser）

> ID：12998222
> 
> 赞同：5
> 
> 时间：2012-10-21T13:25:57.200
> 
> 标签：java, xstream, xmlpullparser, compiled, gcj

我正在增强一个客户，这是一个更大项目的一部分。由于缺乏速度，我被迫切换到 CNI，因此我不得不使用 GNU-gcj 编译器（gnu 4.6.3）生成本机代码。

编译和链接工作正常（感谢 -findirect-dispatch 标志），我在执行输出时没有任何问题。但是当涉及到客户端和服务器之间的通信时，客户端立即断开连接。原因：

> [XStreamClient Reader] WARN - 客户端断开连接（异常：com.thoughtworks.xstream.io.StreamException：无法创建 XmlPullParser）

（这个 Exeption 只出现在客户端的 gcj 编译版本中。当我使用 java 解释器运行代码时 - 一切正常（但太慢了^^）） --> 具有挑战性的部分是我无法检索源代码发生此异常的代码，因为它位于客户端使用的预编译（Java 类文件）库中。（而且我无法联系该图书馆的作者）

我猜这个库会调用[XppReader](http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/xml/XppReader.html)，然后它会尝试创建一个 XmlPullParser 类并失败。

我通过解包并编译创建的 *.class 文件然后链接目标文件来绑定 XStream（版本 1.4.3）库（和其他必需的 *.jar）。这似乎也适用于所有其他图书馆。（我的操作系统=Ubuntu）

我已经做了什么来克服这个问题：我用谷歌搜索了 XStream/XmlPullParser 和 gcj，并用不同的版本替换了“xmlpull”和“kxml2”文件。但没有任何效果。你们中有人知道可能是什么解决方案吗？

### 编辑：

我发现 XmlPullParser 创建失败的原因是 XmlPullParserFactory.newInstance 函数找不到 /services/org.xmlpull.v1.XmlPullParserFactory 文件的 META-INF 目录。这是因为我只编译和链接了 *.jar 的 *.class 文件。因此，一旦我找到将 META-INF 目录链接到可执行文件的方法，该函数可以找到并访问它，问题就应该得到解决。你们中有人已经知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-22T23:39:11.653

我认为 xmlpull 需要一个可以使用 xpp3 作为其实现的实现。请将以下代码添加到您的 pom.xml 中，如果需要，请将这些 jar 文件添加到需要它们的软件中。

```
<dependency>
    <groupId>xmlpull</groupId>
    <artifactId>xmlpull</artifactId>
    <version>1.1.3.1</version>
</dependency>
<dependency>
    <groupId>xpp3</groupId>
    <artifactId>xpp3</artifactId>
    <version>1.1.3.3</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:13:02.367

我认为您在选择实现平台时犯了几个错误：

*   您可能不需要为了“速度”而竭尽全力在本机代码中实现东西。对于大多数事情，您可以在 Jana 中获得与本地代码大致相当的速度，尤其是当您花时间分析和优化 Java 代码时。

*   假设你这样做了，CNI 是一个糟糕的选择。使用 JNI 或 JNA 会更好，这两者都允许您使用 Oracle HotSpot / OpenJDK 版本。

*   GCJ 是一个糟糕的选择，因为（正如您所观察到的）有些东西不起作用，而且调试更加困难。（另请参阅[GNU 的 Java 编译器 (GCJ) 死了吗？](https://stackoverflow.com/questions/4035538/is-gnus-java-compiler-gcj-dead)）

*   依赖一个你无法获得源代码的库是不幸的。

我的建议是尽可能多地重新审视这些“失误”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:34:46.583

正如我已经编辑到我的问题，创建失败的原因是 XmlPullParserFactory.newInstance 方法无法使用以下代码行访问 /META-INF/services/org.xmlpull.v1.XmlPullParserFactory 文件：

```
InputStream is = context.getResourceAsStream (RESOURCE_NAME); 
```

（RESOURCE_NAME 等于“/META-INF/services/org.xmlpull.v1.XmlPullParserFactory”）

我必须承认，我没有找到一种方法将所需的 META-INF 目录绑定到可执行文件中，这将是最优雅的解决方案之一。但是由于[XmlPullParserFactory.java](http://m-im.googlecode.com/svn-history/r79/trunk/m-im/src/org/xmlpull/v1/XmlPullParserFactory.java)文件（和 XStream 库）是开源的，您只需要在上面的源文件中添加一行代码并用新的类替换旧类 - 就是这样。

在`public static XmlPullParserFactory newInstance (String classNames, Class context)`函数中，程序只想在`classNames == null`. 因此，我们为避免这种情况所做的就是自己将 RESOURCE_NAME 的文件内容分配给 classNames 变量，并将这行代码放在 `if (classNames == null || classNames.length() == 0 || "DEFAULT".equals(classNames))` 语句上方：

```
classNames = "org.xmlpull.mxp1.MXParser,org.xmlpull.mxp1_serializer.MXSerializer"; 
```

“org.xmlpull.mxp1.MXParser,org.xmlpull.mxp1_serializer.MXSerializer”是我的 RESOURCE_NAME 文件的内容。如果您的文件内容与我的不同 -> 改为使用您的。

最好的问候，克里斯

# c# - 通过自定义 DataAnnotationsModelMetadataProvider 添加 StringLengthAttribute

> ID：12998223
> 
> 赞同：1
> 
> 时间：2012-10-21T13:26:06.837
> 
> 标签：c#, asp.net-mvc

我需要为`StringLengthAttribute`现有 ASP.NET MVC 4 项目中的许多模型添加验证，并尝试通过我自己的模型元数据提供程序自动执行此操作，该提供程序源自`DataAnnotationsModelMetadataProvider`.

它与其他一些数据注释属性完美配合`RequiredAttribute`（我让客户端和服务器端验证都工作），但是没有添加对字符串长度的验证 - 找到下面的最小示例。

```
public class CustomModelMetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(IEnumerable<Attribute> attributes,
                                                    Type containerType,
                                                    Func<object> modelAccessor,
                                                    Type modelType,
                                                    string propertyName)
    {
        StringLengthAttribute lengthAttribute = new StringLengthAttribute(256);
        attributes = attributes.Union(new[] { lengthAttribute });
        return base.CreateMetadata(attributes,
                                   containerType,
                                   modelAccessor,
                                   modelType,
                                   propertyName);
    }
} 
```

所以，看起来`StringLengthAttribute`它正在以某种特殊的方式处理。关于如何使其工作或更好的实施想法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:44:25.513

在玩了之后，我也无法触发 StringLength 属性。

**不理想，但我想另一种解决方案是使用全局 ModelValidatorProvider 类。当然，您不会获得 StringLengthAttribute 提供的内置 Javascript，并且您将编写自己的逻辑，但它可能是您以后可以解决的问题的快速解决方案？**

```
 public class MyCustomModelValidatorProvider : ModelValidatorProvider
{
    public override IEnumerable<ModelValidator> GetValidators(ModelMetadata metadata, ControllerContext context)
    {
        return new List<ModelValidator>() { new MyCustomModelValidator(metadata, context) };
    }

    public class MyCustomModelValidator : ModelValidator
    {
        public MyCustomModelValidator(ModelMetadata metadata, ControllerContext context)
            : base(metadata, context)
        {   }

        public override IEnumerable<ModelValidationResult> Validate(object container)
        {
            var model = this.Metadata.Model; 
            if (model is string)
            {
                var value = model as string;

                if (String.IsNullOrEmpty(value) || value.Length > 256)
                {
                    var validationResult = new ModelValidationResult();
                    validationResult.Message = (this.Metadata.DisplayName ?? this.Metadata.PropertyName) 
                        + " needs to be no more then 256 characters";

                    return new List<ModelValidationResult>() { validationResult };
                }
            }

            return new List<ModelValidationResult>();
        }
    }

} 
```

将 MyCustomModelValidator 添加到 Global.asax 中的集合

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        // Use LocalDB for Entity Framework by default
        Database.DefaultConnectionFactory = new SqlConnectionFactory(@"Data Source=(localdb)\v11.0; Integrated Security=True; MultipleActiveResultSets=True");

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        ModelValidatorProviders.Providers.Add(new MyCustomModelValidatorProvider());
    } 
```

# javascript - 在 .each() 中强制队列（javascript）

> ID：12998228
> 
> 赞同：0
> 
> 时间：2012-10-21T13:26:40.297
> 
> 标签：javascript, jquery, asynchronous

如何在 javascript 循环中强制同步？

这是没有同步的：

```
$.each(data, function(index, value) { 
  alert(index + ': ' + value); 
}); 
```

同步尝试：

```
var time = 500;
$.each(data, function(index, value) { 
  setTimeout(alert(index + ': ' + value), time);
  time += 500;
}); 
```

但到目前为止，它所做的只是连续运行警报，没有间隔

* * *

这是我需要在 QUEUE 中运行的 ajax 请求：

```
 $.each(data, function(key, val) {

            $.ajax({      
            url: 'ajax/getPerson.php', 
            type:'post',
            dataType: 'json',
            data: { 'dude' : val["idG"] },
            success: function(data) { createHTML.person(data) }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:30:10.250

尝试这个：

```
var time = 500;
$.each(data, function(index, value) { 
  setTimeout(function() {
     alert(index + ': ' + value);
  }, time);
  time += 500;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:57:56.450

根据您的评论：

> 我正在使用此功能发出数据库请求，但它们没有按我要求的顺序返回

回调方法很直观，也更容易实现，但是如果你有 100 个请求要发出怎么办？假设每个响应时间为 200 毫秒，总共为 20 秒。

那么问题来了：您真的关心 AJAX 调用的返回顺序，还是只需要按照您触发的调用顺序处理返回数据？

如果答案是后者，解决方案将是：

1.  一次触发所有 ajax 调用（或在队列中）
2.  维护一组返回数据
3.  检查数组是否所有请求都已成功返回，如果有错误则重新请求（或其他错误处理机制）
4.  当所有请求都返回后，做你原本打算的数据处理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T13:30:22.420

将要在`function()`对象中执行的代码作为第一个参数传递给`setTimeout()`，如下所示：

```
var time = 500;
$.each(data, function(index, value) { 
  setTimeout(function() { alert(index + ': ' + value) }, time);
  time += 500;
}); 
```

# c# - 实体框架：如何将具有不同键的多个表映射到一个实体？

> ID：12998231
> 
> 赞同：2
> 
> 时间：2012-10-21T13:27:02.030
> 
> 标签：c#, entity-framework, entity-framework-5

我有一个这样的数据库结构：

```
create table Person (
  ID bigint identity not null,
  FirstName varchar(100),
  LastName varchar(100),
  -- etc... lot's of generic fields that apply to a person, e.g. phone, address
)

create table Teacher (
  ID bigint identity not null,
  PersonID bigint not null,
  EmploymentDate date,
  -- plus a bunch of other teacher-specific fields
)

create table Student (
  ID bigint identity not null,
  PersonID bigint not null,
  EnrollmentDate date,
  -- plus a bunch of student-specific fields
)

create table SystemUser (
  ID bigint identity not null,
  PersonID bigint not null,
  UserName varchar(50) not null,
  -- plus any user specific fields
) 
```

`Person`和所有其他字段之间的关系是 1 -> 0:1，并且每个“子类”`Person`都有一个唯一的键`PersonID`。A`SystemUser`可能与 a`Teacher`或 a是同一个人`Student`；事实上，你可以想象有一个三者兼备的人。

现在，我想让 EF 实体表示和`Teacher`，每个实体要么实际上继承自（一等奖），要么至少包含类中的字段，隐式映射到两个基础表。`Student``SystemUser``Person``Person`

我在网上找到了很多他们共享相同主键的例子，但没有一个他们不共享相同主键的例子，即`PersonID`在派生表上映射到表`ID`上`Person`。

你是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:00:04.947

> 事实上，你可以想象有一个三者兼备的人。

如果这是您的要求，则不得将人员与其他类一起映射。您仍然必须有单独的`Person`类和可以派生的单独`PersonDetail`类，以及使用 TPT 继承映射的类。您必须将和之间的关系映射为一对多以支持该要求。`PersonDetail``Student``Teacher``SystemUser``Person``PersonDetail`

一个你映射的人继承你的模型将有这个属性

*   一个`Person`将是`Student`，`Teacher`或`SystemUser`
*   如果您确实有一个真实的人担任多个角色，那么您的数据库中需要为每个角色提供多个 Person 记录 - 每个都有其唯一的主键
*   现有`Person`记录的角色不能改变 - 这意味着`Student`永远`Student`不会改变，例如在`Teacher`不先删除`Person/Student`和创建新记录的情况下不能改变`Person/Teacher`。

# java - JAVA 矩阵向量乘法比 C 版本慢 100 倍

> ID：12998245
> 
> 赞同：0
> 
> 时间：2012-10-21T13:28:12.667
> 
> 标签：java, android, c, performance, android-ndk

我正在研究 Android JAVA 和 Android NDK 应用程序之间的性能差异。作为 3D 图形的示例，我对超过 90000 个顶点执行了 Matrix4D-Vector4D 转换。

看起来，JAVA 版本比 C 版本**慢了将近 100 倍。**我有什么问题吗？有没有人有类似的经历？

我用于转换的 Java 代码：

```
 long t1 = System.nanoTime();
        for ( int i = 0; i < vCount; i++)
        {

            Vector4 vOut = new Vector4();
            Vector4 v = vertices[i];

            vOut.v_[0] = v.v_[0] * matrix[0].v_[0];
            vOut.v_[1] = v.v_[0] * matrix[0].v_[1];
            vOut.v_[2] = v.v_[0] * matrix[0].v_[2];
            vOut.v_[3] = v.v_[0] * matrix[0].v_[3];

            vOut.v_[0] += v.v_[1] * matrix[1].v_[0];
            vOut.v_[1] += v.v_[1] * matrix[1].v_[1];
            vOut.v_[2] += v.v_[1] * matrix[1].v_[2];
            vOut.v_[3] += v.v_[1] * matrix[1].v_[3];

            vOut.v_[0] += v.v_[2] * matrix[2].v_[0];
            vOut.v_[1] += v.v_[2] * matrix[2].v_[1];
            vOut.v_[2] += v.v_[2] * matrix[2].v_[2];
            vOut.v_[3] += v.v_[2] * matrix[2].v_[3];

            vOut.v_[0] += v.v_[3] * matrix[3].v_[0];
            vOut.v_[1] += v.v_[3] * matrix[3].v_[1];
            vOut.v_[2] += v.v_[3] * matrix[3].v_[2];
            vOut.v_[3] += v.v_[3] * matrix[3].v_[3]; 

            vertices[i] = vOut;

        }
        long t2 = System.nanoTime();        
        long diff = t2 - t1;        
        double ms = (double)(diff / 1000000.0f);
        Log.w("GL2JNIView", String.format("ms %.2f ", ms)); 
```

性能（变换 > 90 000 个顶点 | Android 4.0.4 SGS II）：（200 次运行的中值）

```
JAVA-Version:   2 FPS
C-Version:    190 FPS 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T13:34:29.703

在每次迭代中创建一个新的 Vector4。根据我自己的经验，使用新的内部循环可能会导致 Android 出现意外的性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:32:11.270

AFAIK，Android Java 实现是通过一个名为[Dalvik](http://en.wikipedia.org/wiki/Dalvik_%28software%29)的虚拟机实现的，它具有与[JVM](http://en.wikipedia.org/wiki/Jvm)不同的指令集，并且不使用任何[即时编译](http://en.wikipedia.org/wiki/Just-in-time_compilation)技术将一些字节码动态转换为机器码，而只是解释它们。所以 Dalvik 在 CPU 密集型任务上显然比 C 慢。

这在最近的[Android](http://en.wikipedia.org/wiki/Android_%28operating_system%29)系统中可能会发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:02:48.470

你也应该改变你的循环。除了@toopok4k3 的回答之外，您还应该尝试以下方法：

*   转储 for 循环并捕获 ArrayIndexOutOfBounds 异常。您有足够大的循环来弥补 try/catch 的开销。
*   如果矩阵数组和它们包含的值从一个循环迭代到下一个循环迭代没有变化，则将它们分配给循环外的常量。取消引用数组和访问成员变量几乎没有局部变量那么快。
*   由于 v.v_[] 被多次使用，因此将其分配给一个局部变量，并在获得下一次之前使用它 4 次。

我假设这些值在下面的版本中是双倍的。

```
int i = 0;
try  
{
    Vector4 vOut = new Vector4();
    final double m0v0 = matrix[0].v_[0];
    final double m0v1 = matrix[0].v_[1];
    final double m0v2 = matrix[0].v_[2];
    final double m0v3 = matrix[0].v_[3];
    final double m1v0 = matrix[1].v_[0];
    final double m1v1 = matrix[1].v_[1];
    final double m1v2 = matrix[1].v_[2];
    final double m1v3 = matrix[1].v_[3];
    final double m2v0 = matrix[2].v_[0];
    final double m2v1 = matrix[2].v_[1];
    final double m2v2 = matrix[2].v_[2];
    final double m2v3 = matrix[2].v_[3];
    final double m3v0 = matrix[3].v_[0];
    final double m3v1 = matrix[3].v_[1];
    final double m3v2 = matrix[3].v_[2];
    final double m3v3 = matrix[3].v_[3];

    while (true)
    {
        Vector4 v = vertices[i];
        i++;

        double vertexVal = v.v_[0];
        vOut.v_[0] = vertexVal * m0v0;
        vOut.v_[1] = vertexVal * m0v1;
        vOut.v_[2] = vertexVal * m0v2;
        vOut.v_[3] = vertexVal * m0v3;

        vertexVal = v.v_[1];
        vOut.v_[0] += vertexVal * m1v0;
        vOut.v_[1] += vertexVal * m1v1;
        vOut.v_[2] += vertexVal * m1v2;
        vOut.v_[3] += vertexVal * m1v3;

        vertexVal = v.v_[2];
        vOut.v_[0] += vertexVal * m2v0;
        vOut.v_[1] += vertexVal * m2v1;
        vOut.v_[2] += vertexVal * m2v2;
        vOut.v_[3] += vertexVal * m2v3;

        vertexVal = v.v_[3];
        vOut.v_[0] += vertexVal * m3v0;
        vOut.v_[1] += vertexVal * m3v1;
        vOut.v_[2] += vertexVal * m3v2;
        vOut.v_[3] += vertexVal * m3v3; 

        vertices[i] = vOut;

    } 
}
catch (ArrayIndexOutOfBoundsException aioobe) 
{
    // loop is done
} 
```

# c++ - C++接口（纯虚拟类）/多重继承/虚拟继承的设计问题

> ID：12998255
> 
> 赞同：1
> 
> 时间：2012-10-21T13:29:49.990
> 
> 标签：c++, interface, multiple-inheritance, virtual-inheritance, pure-virtual

我想重建我的小型 3d 引擎，它非常小，所以我将所有文件放在一个项目中。现在，我想用接口重建它，这样我就可以将不同的模块分散到不同的项目中，并将它们构建为 dll。当我这样做时，我在框架代码的基本设计中遇到了很多困难。我想为我的小引擎设计一个“对象层次结构”，它在之前的工作中实现了。例如：

```
Object
Component
SceneComponent
StaticMeshComponent/SkelMeshComponent
D3DSkelComponent 
... 
```

但它们是直接实施的。现在，我想使用接口（纯虚拟类），我设计了基本接口（用于测试）：

```
#include <cstdio>
#include <iostream>
#include <string>
using namespace std;

class IObject
{
public:
    virtual std::string GetName() = 0;
};

class IMesh : public IObject
{
public:
    virtual void Draw() = 0;
};

class IStaticMesh : public IMesh
{
public:    
    virtual void BuildSomeMesh() = 0;
};

class ISkeletalMesh : public IMesh
{
public:
    virtual void PlayAnim( const std::string& strAnimName ) = 0;
};

class ID3DSkeletalMesh : public ISkeletalMesh
{
public:
    virtual void LoadD3D( const std::string& strD3D ) = 0;
}; 
```

看起来不错，但是当我尝试实施它们时，我发现这可能是一项不可能完成的任务。首先，我可以为 IObject 编写一个模板类或普通类，例如：

```
template < typename TBase >
class TObject : public TBase
{
public:
    virtual std::string GetName()
    {
        return m_strTest;
    }

    std::string m_strTest;
}; 
```

基于这个TObject，我可以实现一个CMesh：

```
class CMesh : public TObject< IMesh >
{
public:
    virtual void Draw()
    {
        cout<<"draw mesh" <<endl;
    }
};
   IMesh* pMesh = new CMesh();  // ok
   IObject* pObj = pMesh;      // ok 
```

到目前为止，它运作良好。但是如何实现 CStaticMesh/CSkeletalMesh/CD3DSkeletalMesh？它可能是这样的：

```
class CStaticMesh : public CMesh, public IStaticMesh
{
public:

}; 
```

但我有两个 IObject 基类，所以我必须将所有“公共 xxx”更改为“虚拟公共 xxx”，它看起来很糟糕。另一个问题是 CStaticMesh 必须实现 IStaticMesh 的所有虚成员函数，包括：

```
virtual void Draw() = 0;
virtual void BuildSomeMesh() = 0; 
```

即使 CMesh 中有一个 Draw，它是 CStaticMesh 的基本调用。好的，也许我需要一个 TMesh：

```
template < typename TBase >
class TMesh : public TObject< TBase >
{
public:
    virtual void Draw()
    {
        cout<<"draw mesh" <<endl;
    }
}; 
```

并像这样实现 CStaticMesh：

```
class CStaticMesh : public TMesh<IStaticMesh>
{
public:
    virtual void BuildSomeMesh()
    {
        cout<<"Build Some Mesh!"<<endl;
    }
}; 
```

看起来不错，但是如何实现 CD3DSkeletalMesh？制作一个 TSkeletalMesh？好吧，太疯狂了！！！

我想，这太棒了。这个设计中的错误是什么？如何改变设计思路来避免这种困境？您知道可以保持这些接口的继承层次结构并轻松实现的想法吗？如果我使用许多虚拟继承，是否有任何性能问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:19:04.450

正如您所提到的，您可以使用虚拟继承来解决这个问题。这将在层次结构中仅创建一个多重继承接口类的实例。

首先是接口：

```
class IObject
{
public:
    virtual std::string GetName() = 0;
};

class IMesh : virtual public IObject
{
public:
    virtual void Draw() = 0;
};

class IStaticMesh : virtual public IMesh
{
public:    
    virtual void BuildSomeMesh() = 0;
};

class ISkeletalMesh : virtual public IMesh
{
public:
    virtual void PlayAnim( const std::string& strAnimName ) = 0;
};

class ID3DSkeletalMesh : virtual public ISkeletalMesh
{
public:
    virtual void LoadD3D( const std::string& strD3D ) = 0;
}; 
```

然后是实现：

```
class CObject : virtual public IObject
{
public:
    std::string GetName()
    {
        return m_strTest;
    }

    std::string m_strTest;
};

class CMesh : public CObject, virtual public IMesh
{
public:
    void Draw()
    {
        cout<<"draw mesh" <<endl;
    }
};

class CStaticMesh : public CMesh, virtual public IStaticMesh
{
public:
    void BuildSomeMesh()
    {
        cout<<"Build Some Mesh!"<<endl;
    }    
};
... 
```

对于这对性能的影响，请查看[这个问题](https://stackoverflow.com/questions/4899657/performance-impact-of-virtual-inheritence)。

# java - 打印 JTable 时遇到问题

> ID：12998257
> 
> 赞同：0
> 
> 时间：2012-10-21T13:30:01.780
> 
> 标签：java, swing, printing, jtable

对于我的法语动词变位程序，我试图包括一个打印变位的选项（以表格形式）

但是问题是它打印了一个空白框，我已经阅读了一些地方，这是因为该表在 GUI 或类似的东西中不可见。问题是我希望打印表格而不将其添加到 GUI...

表的代码：

```
JTable getPrint(String Infinitive)
{
    String [] aPresent = fetchTense(Tense.PRESENT, getID(Infinitive)).split("\n");
    String [] aPerfect = fetchTense(Tense.PERFECT, getID(Infinitive)).split("\n");
    String [] aImperfect = fetchTense(Tense.IMPERFECT, getID(Infinitive)).split("\n");
    String [] aSimpleFuture = fetchTense(Tense.SIMPLE, getID(Infinitive)).split("\n");
    String [] aConditional = fetchTense(Tense.CONDITIONAL, getID(Infinitive)).split("\n");
    String [] aColumnNames = {"Pronoun", "Present"  , "Perfect"  , "Imperfect"  , "Simple Future" , "Conditional"  };
    String [][] aValues = {
                             {"Je"     , aPresent[0], aPerfect[0], aImperfect[0], aSimpleFuture[0], aConditional[0]},
                             {"Tu"     , aPresent[1], aPerfect[1], aImperfect[1], aSimpleFuture[1], aConditional[1]},
                             {"Il"     , aPresent[2], aPerfect[2], aImperfect[2], aSimpleFuture[2], aConditional[2]},
                             {"Elle"   , aPresent[3], aPerfect[3], aImperfect[3], aSimpleFuture[3], aConditional[3]},
                             {"On"     , aPresent[4], aPerfect[4], aImperfect[4], aSimpleFuture[4], aConditional[4]},
                             {"Nous"   , aPresent[5], aPerfect[5], aImperfect[5], aSimpleFuture[5], aConditional[5]},
                             {"Vous"   , aPresent[6], aPerfect[6], aImperfect[6], aSimpleFuture[6], aConditional[6]}, 
                             {"Ils"    , aPresent[7], aPerfect[7], aImperfect[7], aSimpleFuture[7], aConditional[7]},
                             {"Elles"  , aPresent[8], aPerfect[8], aImperfect[8], aSimpleFuture[8], aConditional[8]}
                          };
    JTable pTable = new JTable(aValues, aColumnNames);
    return pTable;
} 
```

我想用以下代码打印它：

```
 try 
            {
                JTable pTable = pGUI.getParser().getPrint("Aller");
                JFrame fix = new JFrame();
                fix.add(pTable);
                fix.setVisible(true);
                fix.setVisible(false);
                boolean bComplete = pTable.print(JTable.PrintMode.FIT_WIDTH, new MessageFormat(String.format("Conjugation of %s", "Aller")), new MessageFormat("Page {0}"));
                if (bComplete) 
                {
                    JOptionPane.showMessageDialog(pGUI, "Finished printing", "Printed", JOptionPane.INFORMATION_MESSAGE);
                } 
                else
                {
                    JOptionPane.showMessageDialog(pGUI, "Printing Cancelled", "Printing Cancelled", JOptionPane.WARNING_MESSAGE);
                }
            } 
            catch (PrinterException e) 
            {
                JOptionPane.showMessageDialog(pGUI, "An error has occured", "Printing Error", JOptionPane.ERROR_MESSAGE);
            }
            finally
            {
                pGUI.setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
            } 
```

有谁知道这里出了什么问题，我该如何解决？

另外作为旁注，因为这是一个空白框，我无法确定，但是当它打印时，如果一个单词太长而无法放入单元格中，它会被缩短为单词......例如。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:57:05.920

1.  为了尽快获得更好的帮助，请发布[SSCCE](http://sscce.org/)，因为您发布的非常相似的代码会打印出正确的输出（到文件或纸张），没有人知道您的其他重要代码发生了什么

    可能的解决方案***_* _ __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _ *_* __ *_* __ *_* __ *_* __ *_***

2.  在不将数组合并在一起的情况下，创建二维数组并将其作为[JTable(Object[][] rowData, Object[] columnNames) 或 JTable(String[][] rowData, String[] columnNames)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#JTable%28java.lang.Object%5B%5D%5B%5D,%20java.lang.Object%5B%5D%29)，对于测试无关紧要，当然`Object[][]`是为各种数据类型（`Double`, `Date`, ei 而不仅仅是`String`） 中的`JTable`

3.  所有更新都必须在[EventDispatchThread上完成](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

4.  必须在[InitialThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建新的[TopLevelContainer](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

5.  对于上述两点，都有关于包装`invokeLater`

6.  请参阅[JTables 教程打印](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#printing)，尝试工作代码示例 ( [TablePrintDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TablePrintDemoProject/src/components/TablePrintDemo.java) )

7.  `JTables`教程以课程[打印的链接结束](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)

# c - C 中的输入验证

> ID：12998258
> 
> 赞同：3
> 
> 时间：2012-10-21T13:30:03.403
> 
> 标签：c, input, validation

我正在用 C 编写一个程序。在程序中，用户必须选择一个数字，1、2 或 3。我想构造代码，以便当用户输入一个不是 1 的数字时， 2或3，他/她将被告知“无效选择 - 再次选择”，然后他们将被带回程序的开始：

```
int main() {

    int choice;
    char response, Y, N;

    printf("Choose a shape from the following:\n 1.Sphere\n 2.Cone\n 3.Cylinder\n");

    scanf("%d",&choice);

    if(choice==1||choice==2||choice==3) {
        printf("Enter the radius, r\n");                             
    } else
        printf("Invalid selection, choose again.\n");

} 
```

我想要的是，在出现“无效选择，再次选择”后，将用户带回到程序的开头，这样他们就可以再次输入他们的选择。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:37:47.887

这是你要做的：

```
int choice;
char response, Y, N;
for (;;) {
    printf("Choose a shape from the following:\n 1.Sphere\n 2.Cone\n 3.Cylinder\n");

    scanf("%d",&choice);

    if(choice==1||choice==2||choice==3) {
        break;                    
    }
    printf("Invalid selection, choose again.\n");
} 
```

一旦这个循环结束，提示输入半径。您几乎肯定需要另一个循环来防止输入半径的负值，因此不要在同一个循环中提示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:33:35.657

为此使用while循环

```
int main()
{
    int choice;
    char response, Y, N;

    printf("Choose a shape from the following:\n 1.Sphere\n 2.Cone\n 3.Cylinder\n");
    while(1)
    {
        scanf("%d",&choice);

        if(choice==1||choice==2||choice==3)
        {
            printf("Enter the radius, r\n");                             
            //Maybe read the radius here
            scanf("%d",&radius);
            break;
        }
        else
            printf("Invalid selection, choose again.\n");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:33:25.100

使用`do-while`循环，循环直到正确的输入
这样做，添加选择 4 退出：

```
 do {
        scanf("%d",&choice);
int flag=0;
        if(choice==1||choice==2||choice==3) {
            printf("Enter the radius, r\n");                             
        } else {
            printf("Invalid selection, choose again.\n");
            flag=1;
        }
    } while(flag==1&& choice!=4); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T13:34:15.740

有些人会反对这一点，但我认为在这些情况下，plain old`goto`是一种非常干净易读的做事方式，因为它强调了“正常”控制路径的线性：

```
int main(int arg, char *argv[])
{
    int choice;

choose_shape:
    printf("Choose a shape from the following:\n"
           " 1.Sphere\n 2.Cone\n 3.Cylinder\n");
    scanf("%d", &choice);
    if (choice < 1 || choice > 3) {
        printf("Invalid selection, please choose again.\n");
        goto choose_shape;
    }

    printf("Enter the radius, r:\n");
    ...
} 
```

是的，人们抱怨过，`goto`所以让我再证明一下。

这是一个更复杂的版本，允许您按字母选择形状：

```
 char c;
    shape_t shape;
choose_shape:
    printf("Choose a shape: [s]phere, [c]one, c[y]linder:\n");
    scanf("%c", &c);
    switch (c) {
    cases 's':
        shape = SHAPE_SPHERE;
        break;

    case 'c':
        shape = SHAPE_CONE;
        break;

    case 'y':
        shape = SHAPE_CYLINDER;
        break;

    default:
        printf("Not a valid shape: %c\n", c);
        goto choose_shape;
    } 
```

这是带有`goto`. 请注意，这引入了另一个变量 ，`flag`其唯一目的是摆脱该`goto`语句。由于该语句，您不能简单地`break`在此处使用（这是一个未标记`goto`的开头） 。`switch`由于额外的状态，我认为这更难阅读。它长了五行。

```
 char c;
    shape_t shape;
    int flag;
    for (flag = 0; !flag; ) {
        printf("Choose a shape: [s]phere, [c]one, c[y]linder:\n");
        scanf("%c", &c);
        switch (c) {
        cases 's':
            shape = SHAPE_SPHERE;
            flag = 1;
            break;

        case 'c':
            shape = SHAPE_CONE;
            flag = 1;
            break;

        case 'y':
            shape = SHAPE_CYLINDER;
            flag = 1;
            break;

        default:
            printf("Not a valid shape: %c\n", c);
            break;
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T15:50:09.860

这是您可以考虑的替代方案。请注意，用户输入的获取被分成一个函数，并且`main()`只调用该函数并在错误时循环。的读者`main()`可能并不关心您如何获得输入选择，那么为什么要让他们阅读呢？

还要注意我用过`fgets`，不是`scanf`。如果您运行您的版本`scanf`并输入一个非数字，该字符将无限期地保留在输入缓冲区中；`scanf`永远不会删除它，因为它正在寻找满足 %d 格式字符串的数字 - 因此是一个无限循环。您可以在(using )`stdin`之前尝试刷新，但该函数仍然无法正确处理关闭 （例如，在基于 shell UNIX 的系统上使用 ctrl-d ）。`scanf``fpurge``stdin`

```
#include <stdio.h>
#include <stdlib.h>

static int get_shape(int *shape)
{
    char buf[10] = "";
    printf("Choose a shape from the following:\n"
           " 1.Sphere\n 2.Cone\n 3.Cylinder\n");

    if (!fgets(buf, sizeof buf, stdin)) { /* Note: fgets, not scanf */
        exit(1); /* ctrl-d */
    }
    *shape = strtol(buf, NULL, 0);

    if (*shape==1 || *shape==2 || *shape==3) {
        return 1;
    }
    printf("Invalid selection\n");
    return 0;
}

int main(int argc, char ** argv)
{
    int shape = 0;
    while (!get_shape(&shape)) {
        /* loop */
    }
    printf("Choice: %d\n", shape);
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-21T07:57:30.563

这是使用 while 循环进行的简单验证，我只是复制了您的代码并进行了一些调整，这里的代码将扫描来自用户的整数，`"Enter the radius, r"`并且仅当用户输入整数时才会继续打印`1`，`2`否则`3`程序将继续要求他输入正确的输入。

```
int main() {

    int choice;
    char response, Y, N;

    printf("Choose a shape from the following:\n 1.Sphere\n 2.Cone\n 3.Cylinder\n");

    scanf(" %d",&choice);
    while((choice<=1)||(choice>=3)){

            printf("Invalid selection, choose again.\n");
            scanf(" %d",&choice);
    }
    printf("Enter the radius, r\n");

} 
```

# javascript - 加载 contentn 和 css 异步时闪烁/缓慢的 css

> ID：12998266
> 
> 赞同：3
> 
> 时间：2012-10-21T13:30:56.083
> 
> 标签：javascript, css, ajax, asynchronous

所以我正在通过ajax为此页面加载一个新页面和一个css文件。

将所有 css 文件添加到页面后，我将页面的不透明度设置为 1，但它在未应用 css 的情况下显示，并且在一秒钟左右后应用 css。这看起来很可怕，我该如何避免呢？

我没有找到一种干净的方法来检测 CSS 何时满载。

知道为什么会这样吗？我认为css可能还没有完全下载，但正如我所说，我不知道如何避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:53:14.480

在不使用“布局”元素的情况下，AFAIK 没有检查何时加载 CSS 文件和应用样式的防弹方法，然后监听它。

您的 CSS 文件中的 F.ex：

```
#layout{ height:1px } 
```

然后在你的 javascript 中（我在这里使用 jQuery）：

```
var $layout = $('<div>').attr('id', 'layout').appendTo('body');
var check = function() {
    return $layout.height() == 1;
}

if ( !check() ) {
    var tries = 0,
        interval = 10,
        timeout = 5000; // max ms to check for
    setTimeout(function timer() {
        if ( check() ) {
            console.log('CSS loaded');
            $layout.remove();
        } else if (tries*interval >= timeout) {
            console.log('timeout');
        } else {
            tries++;
            setTimeout(timer, interval);
        }
    }, interval);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:10:16.097

不完全确定这将如何影响您的实施，但您可以：

*   在加载页面的标题中有一些默认 CSS，这将完全隐藏所有具有“闪烁”的内容。
*   在您动态加载的 CSS 中，“撤消”此样式，以便显示所有内容。

如果您的页面需要在没有 JS 的情况下工作 - 您可能需要考虑这会如何影响事情。

# android - 如何在android中实现Rate Us

> ID：12998268
> 
> 赞同：12
> 
> 时间：2012-10-21T13:30:59.957
> 
> 标签：android

我已经做了一个应用程序，现在我想在其中实现 Rate Us 功能。所以为此我在我的应用程序中添加了这段代码

```
i = new Intent(Intent.ACTION_VIEW , Uri.parse("market://details?id=com.bet.compny"));
startActivity(i);
break; 
```

但是当我点击按钮来评价我们时，我们会强制关闭。这是我的日志猫输出。

```
android.content.ActivityNotFoundException: No Activity found to handle Intent {     
act=android.intent.action.VIEW dat=market://details?id=com.bet.compny } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-21T13:48:43.283

不知道为什么会出现错误，但这实际上应该有效。我也这样做：

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + APP_PNAME))); 
```

但请记住，如果您在模拟器/没有 Play 商店的设备上测试它，这会崩溃。所以我建议你把它包装起来试试看

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-08-25T18:28:10.507

**在没有Google PlayStore**的设备上运行时会发生此错误。我猜你可能是在没有 Playstore 的模拟器设备上运行它，因此会出现错误。

使用 try catch 实现如下：

```
try{
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id="+getPackageName())));
    }
    catch (ActivityNotFoundException e){
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://play.google.com/store/apps/details?id="+getPackageName())));
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-20T11:31:06.487

我总是使用下面对我们有用的代码：

```
Intent rateIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + context.getPackageName())); 
startActivity(rateIntent); 
```

认为它会为您提供充分的帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T13:34:18.907

这是最好的方法；

> Appirater 是一个基于 Arash Payan Appirater iPhone 的原始 Appirater 的 android 库。目标是创建一个设计简洁的 App Rating 提示，您可以将其放入任何 android 应用程序中，这将有助于提醒您的用户在 android Market 上查看您的应用程序。

[https://github.com/sbstrm/appirater-android](https://github.com/sbstrm/appirater-android)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-16T07:55:18.823

```
try {
    Uri marketUri = Uri.parse("market://details?id=" + getPackageName());
    Intent marketIntent = new Intent(Intent.ACTION_VIEW, marketUri);
    startActivity(marketIntent);
}catch(ActivityNotFoundException e) {
    Uri marketUri = Uri.parse("https://play.google.com/store/apps/details?id=" + getPackageName());
    Intent marketIntent = new Intent(Intent.ACTION_VIEW, marketUri);
    startActivity(marketIntent);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-28T03:32:24.533

**最佳和简单的代码**

```
private final String mStoreLink; 
```

*没有活动需要上下文/活动*

```
 this.mStoreLink = "market://details?id=" + activity.getPackageName(); 
```

*创建一个这样的方法。*

```
public void rateUsOnGooglePlay() {
        final Uri marketUri = Uri.parse(mStoreLink);
        try {
            activity.startActivity(new Intent(Intent.ACTION_VIEW, marketUri));
        } catch (android.content.ActivityNotFoundException ex) {
            Toast.makeText(activity, "Couldn't find PlayStore on this device", Toast.LENGTH_SHORT).show();
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-21T13:56:35.193

这通常发生在没有 Google Play 商店的设备上

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-23T07:53:28.993

我想你已经在模拟器中测试了这个代码，而模拟器没有 plastore 应用程序，所以这个错误来了。

我已经实现了这个，我的代码是这样的。

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=applicationID of play sotre"))); 
```

请在下面的代码中尝试捕获。

并在 android 设备中尝试此代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-18T12:47:10.603

```
Uri marketUri = Uri.parse("market://details?id=" + packageName);
Intent marketIntent = new Intent(Intent.ACTION_VIEW, marketUri);
startActivity(marketIntent); 
```

# objective-c - tableview 顶部的视图显示在下面

> ID：12998271
> 
> 赞同：0
> 
> 时间：2012-10-21T13:31:20.473
> 
> 标签：objective-c, ios, ipad, view, tableview

我的 tableview 顶部有另一个视图，上面有 3 个按钮。你可以在这里看到我的[故事板](http://www.flickr.com/photos/74322780@N08/8108627410/in/photostream)。

当我构建和运行时。这个视图显示在我的表格视图的底部。有人知道这怎么可能？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:47:56.290

您`UIView`是 的子视图`UITableView`，要使其位于 tableView 之上，只需将其拖出`UITableView`范围即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:03:39.533

如果你选择 UITableView 然后在 Xcode 菜单 Editor->Embed In->View

这会将 UITableView 嵌入到 UIView 中。然后，您可以将 UIView 从 UITableView 中拖出，并将其放置在与 UITableView 相同的级别。

# git - Gitolite-admin 的 W 访问权限被拒绝给用户

> ID：12998273
> 
> 赞同：5
> 
> 时间：2012-10-21T13:31:25.647
> 
> 标签：git, msysgit, gitolite

我一直在努力让 gitolite 工作。我使用了包方法，并且能够与第一个用户对服务器进行第一次“git push”。之后，如果我添加一个键并尝试再次推送某些内容，我会收到一条错误消息，提示“gitolite-admin 的 W 访问权限拒绝迈克” - 请注意，它应该使用 gitolite 用户 - 而不是我的用户名。我想这是因为我在我的 .bash_profile 中为两个用户添加了私钥。（我正在使用 msysgit）...

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:00:08.760

> 我想这是因为我正在为两个用户添加私钥

确实，您应该为用户使用专用的公钥/私钥，该密钥`gitolite`也用于 ssh 访问。
您可以通过查看 gitolite 日志来确认（在`~gitolite/.gitolite/logs`）

使用多个密钥是通过一个`config`文件完成的。
参见示例“[用户在使用 gitolite 时被要求输入密码](https://stackoverflow.com/questions/10906633/users-are-asked-for-password-while-using-gitolite/10909791#10909791)”。
该`%HOME%/.ssh/config`文件可能包含以下内容：

```
HostName gitoliteserver 
    User gitolite
    IdentityFile ~/.ssh/gitolite

Host mikegitolite
    HostName gitoliteserver 
    User mike 
    IdentityFile ~/.ssh/id_rsa 
```

不要忘记定义`HOME`您是否在 Windows 上：默认情况下未定义）

* * *

[OP Mike Gagnon](https://stackoverflow.com/users/1763113/mike-gagnon)在[评论](https://stackoverflow.com/questions/12998273/w-access-for-gitolite-admin-denied-to-user/12998492#comment17661203_12998492)中确认以下配置正在运行：

```
host gitolite 
user gitolite 
hostname myhost 
port 443 
IdentityFile ~/.ssh/gitolite

host edison 
user gitolite 
hostname myhost 
port 443 
IdentityFile ~/.ssh/mike 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T18:20:28.523

我遇到了类似的问题，因为我只能推送到一个新的 gitolite 存储库，然后我就失去了访问权限。我可以通过在第一次推送时将我的用户名添加到 .conf 文件来解决此问题：

> %> cat conf/gitolite.conf repo gitolite-admin RW+ = git-admin **myusername**

# iphone - 使用 ASIHttpRequest 解析 Json

> ID：12998274
> 
> 赞同：0
> 
> 时间：2012-10-21T13:31:48.837
> 
> 标签：iphone, json, ipad, asihttprequest

我正在尝试使用 ASIHttpRequset 解析 JSON 我写了这段代码

```
-(void) tryASIHttpRequest{

NSString *phpUrl = @"http://www.myURL.com/subfolder/myFile.php";

NSString *dbName = @"dbName";
NSString *localHost = @"localhost";
NSString *dbUser = @"dbUser";
NSString *dbPwd = @"password";

NSString *S_user_id = [NSString stringWithFormat:@"%d",u_id0];

SBJsonParser *parser = [[SBJsonParser alloc] init];

NSURL *link = [NSURL URLWithString:[phpUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:link];

[request setRequestMethod:@"POST"];
[request setPostValue:dbName forKey:@"dbName"];
[request setPostValue:localHost forKey:@"localHost"];
[request setPostValue:dbUser forKey:@"dbUser"];
[request setPostValue:dbPwd forKey:@"dbPwd"];
[request setPostValue:S_user_id forKey:@"user_id"];
[request setPostValue:@"" forKey:@"submit"];

[request setTimeOutSeconds:120];
[request setDelegate:self];
NSError *error = [request error];

[request startAsynchronous];

if (!error) {
    NSData *response = [request responseData];
    NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

    NSArray *statuses = [parser objectWithString:json_string error:nil];

    for (NSDictionary *status in statuses)
    {

        NSString *bo_id2 = [status objectForKey:@"bo_id"];
        NSString *bo_name2 = [status objectForKey:@"bo_name"];

        NSLog(@"from server using ASIHttpRequest");
        NSLog(@"bo_id: %@ - bo_name: %@", bo_id2, bo_name2);

    }    

}else{
    NSLog(@"ASIHttp Error: %@", error);
}
} 
```

在 bookOwn.php 我写了以下内容

```
<?php 
if (isset($_POST['submit'])) {

$dbName = $_POST['dbName'];
$localHost = $_POST['localHost'];
$dbUser = $_POST['dbUser'];
$dbPwd = $_POST['dbPwd'];
$user_id  = $_POST['user_id'];

$con = mysql_connect($localHost,$dbUser,$dbPwd);
$db_found = mysql_select_db("iktab_book");

mysql_query('SET CHARACTER SET UTF8');
mysql_query("SET NAMES utf8; ");

$check = mysql_query("SELECT * FROM d_book where bo_id IN (Select Distinct(sal_bo_id) From d_sales Where sal_user_id =" . $user_id . ")");

while($row=mysql_fetch_assoc($check))
$output[]=$row;

$json_encode =json_encode($output);
$utf8_decode = utf8_decode($json_encode);
echo $json_encode;
mb_convert_encoding($json_encode, 'UTF-8');
$html_entity_decode = html_entity_decode($json_encode);

mysql_close();

}
?> 
```

如果代码没问题，将打印此行

```
 from server using ASIHttpRequest 
```

但它不打印，我无法确定我的代码有什么问题。有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:36:48.020

看起来您正在执行异步请求`[request startAsynchronous];`，然后正在检查下一行以查看是否有数据。异步意味着它将在稍后执行。通常一个人会成为请求的代表，以便在请求完成加载时得到通知。

**更多紧迫：**

不要使用 ASIHTTPRequest。[它的作者已弃用它](http://allseeing-i.com/%5Brequest_release%5D;)。[注意网站上](http://allseeing-i.com/ASIHTTPRequest/)建议使用其他东西的横幅

For alternative URL frameworks [AFnetworking](https://github.com/gowalla/AFNetworking) is popular.

Also NSURLConnection isn't that bad.

And finally if you are targeting iOS 5 or higher (and theres not much reason to support less) you no longer need SBJSON. `NSJSONSerialisation` is provided by the OS for converting JSON into objects and back again.

# ios - 将 EKRecurrenceRules 与云服务 RFC 2445 iCalendar 规范 RRULE 同步

> ID：12998280
> 
> 赞同：4
> 
> 时间：2012-10-21T13:32:33.977
> 
> 标签：ios, icalendar, eventkit, rfc2445, rrule

我正在尝试创建一个基于云的服务来存储重复事件。我选择使用 icalendar`RRULE`标准 (RFC2445) 来执行此操作，并使用如下通过基于云的服务公开的数据库模式。

```
EventID
EventName
EventDescripton
Start
End
RecurrenceRule  <-- Store RFC 2445 iCalendar specification RRULE (recurrence)
Active
Deleted
DateCreated
DateLastUpdated 
```

我相信它们`EKRecurrenceRules`是 RFC 2445 兼容的，但是通过存储字符串表示`RRULE`或描述`EKRecurrenceRule`使得更跨平台兼容的架构。

我能够`EKRecurrenceRule`轻松地在客户端创建一个并从 EKRecurrenceRule 描述属性中提取 RRULE。`EKRecurrenceRule`但是，我的问题是，从云服务中提取时，如何将该描述属性转换回客户端上的对象？似乎愚蠢的Apple会公开一个属性来提取兼容`RRULE`但不提供任何方法将an转换`RRULE`为本机对象。

`EKRecurrence`如果可能，我想避免存储规则的单个组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:06:56.593

你也许可以使用这个库： [https ://github.com/FabienDiTore/ios-rrule_parser](https://github.com/FabienDiTore/ios-rrule_parser)

创建一个 EKRecurrenceRule。如果你这样做，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:18:12.563

> ...从 EKRecurrenceRule 描述属性中提取 RRULE

这似乎充满了危险。文档[`-[id<NSObject> description]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/doc/uid/20000052-SW7)只保证它返回“一个描述接收者内容的字符串” - EKRecurrenceRule 的实现将来可能不会给出正确的 RRULE，或者可能只是稍微改变到“提取” RRULE 不起作用。（这可能就是为什么 Apple 没有提供将 RRULE 转换回 EKRecurrenceRule 的任何东西的原因——它们并不意味着您首先能够提取和使用 RRULE。）

在我看来，更好的解决方案是找到或编写一个库或 EKRecurrenceRule 类别，以提供适当的`- (NSString *)rrule`访问器，也许还有相应的`- (id)initWithRRule:(NSString *)rrule`初始化程序。这样，您可以避免依赖未记录的行为，并确信您可以以您想要的方式在 RRULE 和 EKRecurrenceRule 实例之间进行转换。

# python - 哪些 Twitter 包装器库支持 Python 3.x？

> ID：12998285
> 
> 赞同：11
> 
> 时间：2012-10-21T13:33:51.627
> 
> 标签：python, python-3.x, twitter

我想在使用 Python 3.2 构建的项目中添加对 Twitter 的支持，但我不知道哪些库支持它。

我做了一些谷歌搜索，但我无法给出明确的答案；我发现的最接近的东西是[Twython](https://github.com/ryanmcgrath/twython)，在他们的自述文件中提到它是超级实验性的，你需要一个 python-oauth2 的黑客版本，所以它基本上一直是黑客攻击；肯定有更好的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:35:41.667

如果你还不知道它们，你可能想看看我在谷歌搜索中发现的[Python Twitter 工具](http://pypi.python.org/pypi/twitter/)：它们列[在 PyPI 上的 Python 3 包中](http://pypi.python.org/pypi?%3aaction=browse&c=533&show=all)（在包名下`twitter`），并且似乎是[在 GitHub 上积极开发](https://github.com/sixohsix/twitter)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-04-05T16:32:28.700

[*Twython*](https://github.com/ryanmcgrath/twython)库现在（作为回答问题的时间）完全支持**Python** 3.x，更不用说它易于使用和实现，更不用说他们的大量[***文档***](https://twython.readthedocs.io/en/latest/)
了正如他们的官方文档所说：

> 无缝 Python 3 支持！
> 
> OAuth 2 仅应用程序（只读）支持
> 
> 支持 Twitter 的 Streaming API

我已经使用它一段时间了，它对我来说效果很好，所以考虑再给它一次机会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-06T21:36:30.090

[https://github.com/geduldig/TwitterAPI](https://github.com/geduldig/TwitterAPI)

这个支持 Python 3.x。

特点包括：

*   REST 和流 API
*   高级搜索 API
*   OAuth1 和 OAuth2
*   防火墙代理认证

# apache - 如何使用 htaccess 从 url 中删除尾随 %20target=

> ID：12998294
> 
> 赞同：0
> 
> 时间：2012-10-21T13:35:26.973
> 
> 标签：apache, .htaccess, redirect, url-rewriting

最近我一直在使用 stackoverflow 来修复我的许多服务器错误。最近我遇到了以下错误“NOT FOUND 404 error”的以下错误。

我从网站管理员中心看到有数百个 url 有尾随字符串 "%20target=" 我想删除以便 url 产生结果。

这是示例。我想更改以下网址

www.example.com/one/two/three/four/five/For-Sale-26264.html%20target=

到

www.example.com/one/two/three/four/five/For-Sale-26264.html

我如何使用 htaccess 来实现这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:37:30.027

这`%20`实际上是一个 URL 编码的空格，因此您可以使用惰性选择`(.+?)`在空格前匹配尽可能少的字符`\s`，然后`target`. 分组匹配可用作`$1`重写的反向引用。

```
RewriteEngine On
RewriteBase /
RewriteRule (.+?)\starget= $1 [L] 
```

# wpf - wpf中相同大小的列表框项

> ID：12998300
> 
> 赞同：2
> 
> 时间：2012-10-21T13:36:15.990
> 
> 标签：wpf, xaml

如何使 ListBox 内的 ListBoxItems 具有相同的高度？

```
<ListBox
    HorizontalContentAlignment="Stretch"
    ScrollViewer.HorizontalScrollBarVisibility="Disabled"
    >
    <ListBoxItem><TextBlock TextWrapping="Wrap">Long text that would wrap and increase height of single ListBoxItem</TextBlock></ListBoxItem>
    <ListBoxItem><TextBlock TextWrapping="Wrap">Short text</TextBlock></ListBoxItem>
    <ListBoxItem><TextBlock TextWrapping="Wrap">Short text</TextBlock></ListBoxItem>
</ListBox> 
```

我希望带有“短文本”的项目与第一个项目具有相同的高度（由于换行，通常会有更多的行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:52:01.167

我在这里作弊，但试试这个：

```
<ListBox.ItemsPanel>
    <ItemsPanelTemplate>
        <UniformGrid Rows="{Binding Path=Items.Count, RelativeSource={RelativeSource AncestorType=ListBox}}" VerticalAlignment="Top"/>
    </ItemsPanelTemplate>
</ListBox.ItemsPanel>
<ListBoxItem>
    <TextBlock TextWrapping="Wrap">Long text that would wrap and increase height of single ListBoxItem</TextBlock>
</ListBoxItem>
<ListBoxItem>
    <TextBlock TextWrapping="Wrap">Short text</TextBlock>
</ListBoxItem>
<ListBoxItem>
    <TextBlock TextWrapping="Wrap">Short text</TextBlock>
</ListBoxItem> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:28:53.667

我认为这可以通过将项目`Height`（我更喜欢使用`DataTemplate`）绑定到后面代码中的属性来完成，我们称之为 MaxHeight，然后在项目上循环，获取最大值，`ActualHeight`最后将其设置为 MaxHeight 属性。
希望能帮助到你

编辑：XAML

```
<ListBox HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ItemsSource="{Binding Things}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock TextWrapping="Wrap" Height="{Binding DataContext.MaxHeight,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Grid}}}" Text="{Binding ThingName}"></TextBlock>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

# jquery - 由 PhoneGap 转换的独立 HTML 应用程序的 Cookie 替代方案

> ID：12998308
> 
> 赞同：0
> 
> 时间：2012-10-21T13:37:07.123
> 
> 标签：jquery, session, cordova, mobile, cookies

我有一个不包含任何外部资源的**动态 HTML文档（文档内部没有编码图像、css 和脚本）。**使用**PhoneGap**，我已将此文档转换为独立的**Android**应用程序。由于此 HTML 文档是没有 Internet 连接的本地应用程序，因此很遗憾不能使用 cookie。我需要保存/加载应用程序状态以允许用户稍后继续使用/运行应用程序。在使用 IE 浏览器的 Windows 环境中使用**cookie**是一种可行的解决方案，但由于大多数浏览器**不允许****对本地文件**使用 cookie**，我的 Android 设备上的浏览器（三星 Galaxy Tab2 7.0 的默认浏览器）不支持此解决方案。允许保存/加载一些 JavaScript/jQuery 变量以供以后使用的**替代解决方案**是什么？**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T13:42:11.120

看看[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)。

这允许您在浏览器中存储（字符串）数据，而无需提交任何内容（如使用 cookie）。

要将数据从该字符串编码到该字符串，请使用[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)and [`JSON.stringify()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)。

简单的例子：

```
// save to localStorage
localStorage.yourData = JSON.stringify( settings );

// load from localStorage
var settings = JSON.parse( localStorage.yourData ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T13:48:36.670

看看 HTML5 的 localStorage。它在一个简单的键值存储中为您提供了 cookie 的所有功能以及更多功能。前任：

```
localStorage["myJQVar"] = JSON.stringify(someJQVar); 
```

然后，下次您的应用启动时：

```
someJQVar = JSON.parse(localStorage["myJQVar"]) 
```

无论如何，本地存储现在是本地存储数据的首选方式，有些人出于隐私原因也阻止了大多数 cookie，所以这是要走的路。**

# c# - 实体框架创建外部记录

> ID：12998314
> 
> 赞同：1
> 
> 时间：2012-10-21T13:37:51.113
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

我有一个外键指向地址表的用户表。

```
public User()
{

}

public int UserID { get; set; }
public string ReferenceNumber { get; set; }
public string FirstName { get; set; }
public string SecondName { get; set; }
public string Email { get; set; }
public string Password { get; set; }
public bool IsEnabled { get; set; }
public string TelephoneNumber { get; set; }
public string FaxNumber { get; set; }
public bool IsAccountant { get; set; }
public int AddressID { get; set; }
public virtual Address Address { get; set; }
} 
```

这在视图中工作正常，即在创建新的“用户”记录时要求用户选择 AddressID...但是，如果地址记录尚不存在（除了首先创建它）我该怎么办？是否有可能以某种方式将他们指向地址视图，强制他们首先创建地址并将主键传回或将两个视图放在同一页面上？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:42:56.690

在同一事务中（并在同一页面上）创建它们。例如：

> ```
> Details:
> --------
> First Name:  [____]
> Second Name: [____]
> etc.
> 
> Address:
> --------
> Line 1:      [____]
> Line 2:      [____]
> City:        [____]
> State:       [____]
> Country:     [____]
> etc. 
> ```

# maven - maven动态版

> ID：12998319
> 
> 赞同：1
> 
> 时间：2012-10-21T13:38:23.623
> 
> 标签：maven

我正在寻找一种方法来根据配置文件动态化我的工件版本。

当我为 dev 或 preprod 构建时，我经常使用 -SNAPSHOT 后缀。但是数据库连接取决于配置文件，我永远不知道最新的 SNAPSHOT 版本是使用 dev 还是 preprod 配置文件构建的。

这个想法会是这样的版本

```
<version>1.0${suffix}</version> 
```

${后缀} =

*   "" 使用 prod 配置文件构建时
*   使用 preprod 配置文件构建时的“-SNAPSHOT”
*   使用开发配置文件构建时的“-DEV-SNAPSHOT”

有没有办法做到这一点？

谢谢

编辑 ：

我的目标是当我继续使用 jenkins 构建我的 jar 时，我使用 3 个配置文件构建我的项目的相同“标记”版本，并部署 3 个不同的工件。

实际上，我标记了我的项目并使用 prod 配置文件进行构建，然后我修改版本以添加 -SNAPSHOT、提交、移动标签、使用 preprod 配置文件重新构建，然后重复开发配置文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:17:06.573

看到您对@Michael-O 评论的回答，我建议您`maven assembly plugin`根据每个配置文件上设置的系统属性来配置以创建工件的最终名称。例如：

```
<build>    
  <plugins>
    <plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <executions>
      <execution>
        <id>create jar according to profile</id>
        <phase>package</phase>
        <goals>
          <goal>single</goal>
        </goals>
        <configuration>
          <finalName>${project.artifactId}-${project.version}_${profile}</finalName>
          <appendAssemblyId>false</appendAssemblyId>
        </configuration>
      </execution>
    </executions>
  </plugin>
 </plugins>
</build> 
```

其中 ${profile} 应该是在每个配置文件上设置为不同值的属性（为此，您可以看到[这个问题](https://stackoverflow.com/questions/899274/setting-default-values-for-custom-maven-2-properties)）。我不知道是否有一个变量来获取当前用于构建的配置文件，那将是另一个问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:08:12.727

不需要重新组装 JAR，我宁愿使用标准机甲：只需在 jar 插件中为您的工件指定一个[分类器。](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#classifier)

否则我会过滤给定属性文件中的属性并在您的应用程序中读取它。这就是我所做的，例如`system.env=prod|test|localdev`。

# excel - 如果在 Excel 中，则

> ID：12998320
> 
> 赞同：1
> 
> 时间：2012-10-21T13:38:24.713
> 
> 标签：excel, vba

我在 Excel 的 Visual Basic 中有这段代码。我尝试不使用 a、b 和 c，只使用 Range("C2")、F2、G2，但它也不起作用。我真的不知道为什么这不起作用，有人可以帮助我吗？:)

```
Sub pourcentremiseport()
Dim a As Integer
Dim b As Integer
Dim c As Integer

a = Range("C2").Value

If a < 6 Then
 b = 9.6
 c = 0 

ElseIf a >= 6 And a < 20 Then
 b = 0
 c = 10

Else
 b = 0
 c = 25

 End If

 b = Range("F2").Value
 c = Range("G2").Value

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:49:50.180

最后两行应该是：

```
 Range("F2").Value = b
 Range("G2").Value = c 
```

VBA 中的一般规则是`=`符号设置左侧对象等于右侧对象。

**编辑**

如果没有关于“为什么”宏不起作用的更多信息，就很难排除故障。

您是否知道您可以在 excel 公式中使用 It/Then 逻辑？

对于单元格 F2，您可以使用：`=IF(C2<6, 9.6,IF(C2<20,0,0))`

单元格 G2 可能是：`=IF(C2<6, 0,IF(C2<20,10,25))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:53:09.710

你可以用公式解决这个问题：

单元格 F2：

```
=IF(C2<6,9.6,IF(AND(C2>=6,C2<20),0,0)) 
```

单元格 G2：

```
=IF(C2<6,0,IF(AND(C2>=6,C2<20),0.1,0.25)) 
```

使用公式处理错误比使用 VBA 更容易；少写代码:)

# ios - UIPageViewController 有奇怪的大小

> ID：12998322
> 
> 赞同：11
> 
> 时间：2012-10-21T13:38:31.460
> 
> 标签：ios, uipageviewcontroller

我`UIPageViewController`在我的应用程序中使用 a 。它工作得很好，但是当我翻页时，下一页似乎在比屏幕大的框架中初始化：翻页时，只有部分视图`viewController`适合屏幕。

我正在初始化`UIPageViewController`in`viewDidLoad`并开始记录 的帧`PageVC`、它的子视图和`parentVC`. 每一帧似乎都还好，只有`UIPageViewController'`我登录的 s 帧`viewControllerAfterViewController`的宽度几乎是屏幕实际尺寸的两倍。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-21T13:38:31.460

我终于通过`UIPageViewController`在初始化 PageVC 时将正确的框架设置为 's 视图解决了这个问题：

```
pageViewController.view.frame = self.view.frame; 
```

I初始化在哪里，self`pageViewController`是`UIPageViewController`pageVC的父VC。

希望这可以帮助任何有类似问题的人。

# android - 使用 SharedPreferences

> ID：12998324
> 
> 赞同：0
> 
> 时间：2012-10-21T13:38:40.683
> 
> 标签：android, sharedpreferences

如果我的主题重复，请链接相应的主题，但我没有找到我正在寻找的内容。

在我的应用程序中，我有一个 prefs.xml 文件，其中包含一个名为“list”的列表首选项，其值为“默认主题”和“其他主题”。用户可以在 PreferenceActivity 中选择这些值。在其他一些活动中，我必须检查选择了哪个值并调用我已经创建的两种方法之一（setUpDefaultTheme 或 setUpOtherTheme）。必须在活动开始后立即进行该检查，以便用户看到这两个主题之一，具体取决于在首选项中选择的选项。

我知道我必须使用 SheredPreferences 这样做，但我无法让它工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:06:19.557

[在 android 中](https://stackoverflow.com/questions/4746063/shared-preferences-in-android)尝试这个 共享首选项

或者这个 [https://stackoverflow.com/search?q=shared+preferences](https://stackoverflow.com/search?q=shared+preferences)

# android - 使用谷歌地图在两点之间画一条线

> ID：12998326
> 
> 赞同：2
> 
> 时间：2012-10-21T13:39:03.187
> 
> 标签：android, google-maps, overlay, line, geopoints

我的问题是我想创建一个方法，当我调用它时给它两个 GeoPoint，我希望它在两点之间画一条线，但我无法做到这一点。

提前致谢。

```
public class MyOverlays extends ItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();
private Context context;
private int lastestIndex;
private Projection projection;
private Canvas canvas;
private MapView mapv;
private boolean shadow;

public MyOverlays(Context context, Drawable defaultMarker, String player) {
    super(boundCenterBottom(defaultMarker));
    this.context = context;
}

@Override
protected OverlayItem createItem(int i) {
    return mapOverlays.get(i);
}

@Override
public int size() {
    return mapOverlays.size();

}

public void setPj(Projection projection) {
    this.projection = projection;

}

public void draw(Canvas canvas, MapView mapv, boolean shadow) {
    super.draw(canvas, mapv, shadow);
    this.canvas = canvas;
    this.mapv = mapv;
    this.shadow = shadow;

    // Configuring the paint brush

} 
```

理想情况下的测试方法我想通过 2 个地理点在它们之间画一条线

```
 public void test() {
    super.draw(canvas, mapv, shadow);
    Paint mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(4);

    GeoPoint gP1 = new GeoPoint(34159000, 73220000);// starting point
    GeoPoint gP2 = new GeoPoint(33695043, 73050000);// End point Islamabad

    GeoPoint gP4 = new GeoPoint(33695043, 73050000);// Start point Islamabad
    GeoPoint gP3 = new GeoPoint(33615043, 73050000);// End Point Rawalpindi

    Point p1 = new Point();
    Point p2 = new Point();
    Path path1 = new Path();

    Point p3 = new Point();
    Point p4 = new Point();
    Path path2 = new Path();
    projection.toPixels(gP2, p3);
    projection.toPixels(gP1, p4);

    path1.moveTo(p4.x, p4.y);// Moving to Abbottabad location
    path1.lineTo(p3.x, p3.y);// Path till Islamabad

    projection.toPixels(gP3, p1);
    projection.toPixels(gP4, p2);

    path2.moveTo(p2.x, p2.y);// Moving to Islamabad location
    path2.lineTo(p1.x, p1.y);// Path to Rawalpindi

    canvas.drawPath(path1, mPaint);// Actually drawing the path from
                                    // Abbottabad to Islamabad
    canvas.drawPath(path2, mPaint);// Actually drawing the path from
                                    // Islamabad to Rawalpindi
    this.populate();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:30:56.007

解决了我的问题，

```
public void draw(Canvas canvas, MapView mapv, boolean shadow){
     super.draw(canvas, mapv, shadow);
     this.canvas=canvas;
     this.mapv=mapv;
     this.shadow=shadow;
     if(line==1){
         Paint mPaint = new Paint();
         mPaint.setDither(true);
         mPaint.setColor(Color.RED);
         mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
         mPaint.setStrokeJoin(Paint.Join.ROUND);
         mPaint.setStrokeCap(Paint.Cap.ROUND);
         mPaint.setStrokeWidth(4);

         GeoPoint gP1 = new GeoPoint(34159000,73220000);//starting point Abbottabad
         GeoPoint gP2 = new GeoPoint(33695043,73050000);//End point Islamabad

         GeoPoint gP4 = new GeoPoint(33695043, 73050000);//Start point Islamabad
         GeoPoint gP3 = new GeoPoint(33615043, 73050000);//End Point Rawalpindi

        Point p1 = new Point();
         Point p2 = new Point();
         Path path1 = new Path();

         Point p3 = new Point();
         Point p4 = new Point();
         Path path2 = new Path();
         projection.toPixels(gP2, p3);
         projection.toPixels(gP1, p4);

        path1.moveTo(p4.x, p4.y);//Moving to Abbottabad location
         path1.lineTo(p3.x,p3.y);//Path till Islamabad

         projection.toPixels(gP3, p1);
         projection.toPixels(gP4, p2);

        path2.moveTo(p2.x, p2.y);//Moving to Islamabad location
         path2.lineTo(p1.x,p1.y);//Path to Rawalpindi

         canvas.drawPath(path1, mPaint);//Actually drawing the path from Abbottabad to Islamabad
         canvas.drawPath(path2, mPaint);//Actually drawing the path from Islamabad to Rawalpindi
     }

    //Configuring the paint brush

     }
public void test(){
    System.out.println("vim ao test");
    line=1;
    draw(canvas,mapv,shadow);
} 
```

# objective-c - 在 iOS 中解析 JSON 数据

> ID：12998329
> 
> 赞同：-3
> 
> 时间：2012-10-21T13:39:44.013
> 
> 标签：objective-c, ios, json, parsing

> **可能重复：**
> [iPhone/iOS JSON 解析教程](https://stackoverflow.com/questions/5813077/iphone-ios-json-parsing-tutorial)

我一直在阅读许多关于如何在 Objective C 中解析 JSON 数据的教程，但我仍然无法弄清楚。我想解析 JSON 文件中的数据并将其显示在屏幕上。

例如，

我想从[这里](http://isbn.net.in/9781449394707.json)解析数据并获取不同变量中不同零售商的所有值，以便我以后可以使用它们。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:58:07.270

假设您将数据保存在 NSData 对象中，您可以使用 iOS 5 及更高版本中可用的 NSJSONSerialization 类。

```
+ (id)JSONObjectWithData:(NSData *)data options:(NSJSONReadingOptions)opt error:(NSError **)error 
```

这是一个类方法，它将根据您的数据对象的内容将您的数据转换为 NSArray、NSDictionary、NSNumber 等对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:18:27.490

下面介绍如何从 Web 服务器下载和解析数据。请注意，所有这些方法都是同一个类的一部分，并且存在名为`_downloadData`type`NSMutableData*`和`_downloadConnection`type的实例变量`NSURLConnection*`。另请注意，此代码假定未使用 ARC。如果是，只需删除对象释放和保留，并确保实例变量是强引用。

```
-(void)startDownload {
    NSURL* jsonURL = [NSURL URLWithString:@"http://isbn.net.in/9781449394707.json"];

    NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:jsonURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];

    _downloadData = [[NSMutableData dataWithCapacity:512] retain];

    _downloadConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [_downloadData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [_downloadData appendData:data];
}

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{

   [_downloadConnection release];
   _downloadConnection = nil;

   [_downloadData release];
   _downloadData = nil;
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSError* jsonError = nil;

    NSDictionary* jsonDict = nil; // your data will come out as a NSDictionry from the parser
    jsonDict = [NSJSONSerialization JSONObjectWithData:_downloadData options:NSJSONReadingMutableLeaves  error:&jsonError];

    if ( nil != jsonError ) {
        // do something about the error

        return;
    }

    [_downloadConnection release];
    _downloadConnection = nil;

    [_downloadData release];
    _downloadData = nil;

    // now do whatever you want with your data in the 'jsonDict'
} 
```

# xpath - 信息路径组合框选择项目，除了在其他组合框中选择的项目

> ID：12998333
> 
> 赞同：0
> 
> 时间：2012-10-21T13:40:14.603
> 
> 标签：xpath, infopath, infopath2010

我有一个 InfoPath 表单，其中部门作为重复表输入，所有部门都在此处输入。

然后我有第二个重复表，其中输入了用户。该行由 3 列组成：用户名字符串、UserDepartmentCombo1（可从查找部门的下拉列表中选择）和 CoveragePathCombo2 下拉列表（再次从部门列表中查找）。

Infopath 输出的 XML 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<?mso-infoPathSolution solutionVersion="1.0.0.6" productVersion="15.0.0" PIVersion="1.0.0.0" href="file:///C:\Users\user\Desktop\test.xsn" name="urn:schemas-microsoft-com:office:infopath:test:-myXSD-2012-10-21T13-16-52" ?>
<?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.4"?>
<my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-10-21T13:16:52" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-gb">
  <my:group1>
    <my:Departments>
      <my:DeptName>Accounts</my:DeptName>
      <my:field3>false</my:field3>
    </my:Departments>
    <my:Departments>
      <my:DeptName>Sales</my:DeptName>
      <my:field3>false</my:field3>
    </my:Departments>
    <my:Departments>
      <my:DeptName>Support</my:DeptName>
      <my:field3>false</my:field3>
    </my:Departments>
    <my:Departments>
      <my:DeptName>Reception</my:DeptName>
      <my:field3>false</my:field3>
    </my:Departments>
  </my:group1>
  <my:group2>
    <my:Users>
      <my:UserDepartment>Sales</my:UserDepartment>
      <my:Username>Chris</my:Username>
      <my:CoveragePath>Reception</my:CoveragePath>
    </my:Users>
    <my:Users>
      <my:UserDepartment>Sales</my:UserDepartment>
      <my:Username>Jon</my:Username>
      <my:CoveragePath>Accounts</my:CoveragePath>
    </my:Users>
  </my:group2>
</my:myFields> 
```

我的`CoveragePath`组合框 XPath 如下：`/my:myFields/my:group1/my:Departments/my:DeptName`

我希望组合框`CoveragePath`下拉列表不包括在行`UserDepartment`组合框中选择的部门，我将如何执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:16:07.373

**使用**：

```
/my:myFields/my:group1/my:Departments/my:DeptName[not(. = $selected)] 
```

where you need to substitute `$selected` by whatever was selected in the first combo box.

# asp.net-mvc-3 - 未检测到 MVSitemapProvider 当前节点

> ID：12998336
> 
> 赞同：1
> 
> 时间：2012-10-21T13:40:41.783
> 
> 标签：asp.net-mvc-3, mvcsitemapprovider

我正在使用 MvcSiteMapProvider 3.3.3.0 并且有一个`MvcSiteMap.sitemap`包含两个节点的文件，定义如下：

```
<mvcSiteMapNode title="Node1" controller="MyController" action="MyAction" type="A" />
<mvcSiteMapNode title="Node2" controller="MyController" action="MyAction" type="B" /> 
```

我在 global.asax.cs 中的路由配置为“开箱即用”，因此 URL 为：

```
Node 1: http://server/MyController/MyAction?type=A
Node 2: http://server/MyController/MyAction?type=B 
```

现在，如果我导航到节点 2，我发现它`MenuHelper.GetCurrentNode()`返回节点 1。

为什么会这样，有没有办法让 MvcSiteMapProvider 根据查询字符串参数识别当前节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:38:47.923

我相信这是可能的，尽管我还没有测试过。您应该在他们的 github 存储库中查看 wiki。它有一些有用的信息，但仍然缺少一些基本示例。

[https://github.com/maartenba/MvcSiteMapProvider/wiki/Dynamic-sitemaps/](https://github.com/maartenba/MvcSiteMapProvider/wiki/Dynamic-sitemaps/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:12:29.923

不幸的是，没有办法做到这一点。我使用自定义 DynamicNodeProvider 解决了这个问题，但它似乎不适合您的情况。

# css - 使用 JSF 和 PrimeFaces 覆盖/实现 CSS

> ID：12998339
> 
> 赞同：1
> 
> 时间：2012-10-21T13:41:01.533
> 
> 标签：css, jsf, primefaces

我使用 JSF 和 PrimeFaces，并尝试通过更改或添加一些 CSS 行来修改渲染。

我将名为“styles.css”的 CSS 文件添加到我的 .xhtml 页面，它在 PrimeFaces 之后加载，因此我可以覆盖默认值。

PrimeFaces 在我的页面中创建一个 div ：

```
<div id="j_idt13:universe" class="ui-selectonemenu ui-widget ui-state-default ui-corner-all ui-helper-clearfix" style="width: 86px;">
....
</div> 
```

我正在尝试将 86px 大小更改为 100%，所以在我的 styles.css 中我添加了：

```
#j_idt13:universe{
    width: 100%;    
} 
```

但它不起作用......当我检查源代码时使用 Firebug，我的 #j_idt13:universe 不会出现在任何地方......

我可以通过访问类选择器（.class）来更改一些 CSS，但不能使用 id 选择器（#id）。

就我而言，请问如何将 86px 更改为 100% ？

谢谢

奥利维尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:42:22.547

冒号`:`是[CSS 选择器](http://www.w3.org/TR/css3-selectors/#selectors)中的一个特殊字符，表示伪选择器的开始。如果您想将冒号从字面上表示为元素 ID 或类名的一部分，那么您必须使用`\`.

```
#j_idt13\:universe {

} 
```

请注意，这在 IE6/7 中不起作用。您需要`\3A` 改用（带有尾随空格）。

```
#j_idt13\3A universe {

} 
```

另请注意，当您将另一个 JSF 组件添加到视图时，这将失败，因为`j_idt13`它是根据组件在视图中的位置自动生成的 ID，而不是固定 ID。而是给父`UINamingContainer`组件一个固定的ID，或者更好的是，给目标组件一个样式类，这样就可以只使用类选择器了。

### 也可以看看：

*   [如何在 CSS 选择器中使用带有冒号“：”的 JSF 生成的 HTML 元素 ID？](https://stackoverflow.com/questions/5878692/how-to-use-jsf-generated-html-element-id-in-css-selectors)

# ruby - 如何从红宝石负载中捕获返回值？

> ID：12998347
> 
> 赞同：1
> 
> 时间：2012-10-21T13:42:10.363
> 
> 标签：ruby, ruby-on-rails-3

我想为我正在构建的 cms 加载一个主题.. 我正在考虑有一个名为 name_of_theme.themespec 的文件.. 我会加载这个.. 类似于 Bundler 对 gemspecs 的收费.. 我在想这个里面文件我会有类似的东西：

```
Theme.new do |t|
  t.value = 'hi'
end 
```

我想在加载脚本后捕获这个主题实例。我应该抓住文件的内容并评估它们吗？这导致我提出一个后续问题，加载文件..和读取内容和评估..我知道'eval'通常被认为是破坏的预兆......也许这个用例好吗？

# 跟进

根据选择的答案..为什么我会得到：

```
evaluationContext = Fiber.new {$SAFE = 4; Fiber.yield binding}.resume
 => #<Binding:0x007f85fc8a0fc8> 
a = evaluationContext.eval('puts $SAFE')
=> 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:58:16.430

好吧，有一些区别，但如果您已经接受外部代码，则安全漏洞的大小与`eval`或相同`require`。在这种情况下，实际上`eval`可能*更*安全，因为它可以让您控制代码执行的名称空间和安全级别。这很重要，因为，比如说，您的应用程序处理某人的电子邮件密码。`require`如果你让主题在主命名空间`Kernel#gets`（所以这里是你如何做这种类型的安全加载：

```
evaluationContext = Fiber.new {$SAFE = 4; Fiber.yield binding}.resume
theme = evaluationContext.eval(File.read("GrayTheme.themespec")) 
```

注意：从主题调用的任何代码都将在 $SAFE 4 下执行，所以虽然对于大多数事情来说这很好（他们不能调用`system("rm -rf /")`），但是有少量的 $SAFE 0 代码需要从主题，代码必须在您仍处于安全级别 0 时在 lambda 中创建，然后传递给安全级别 4 中的代码（因为 lambda 保留其安全值）。

编辑：尝试用这个替换 eval 行：

```
theme = eval(File.read("blahblahba"), evaluationContext) 
```

# javascript - 为什么javascript for循环中的prompt()不适用于我下面的代码？

> ID：12998351
> 
> 赞同：0
> 
> 时间：2012-10-21T13:42:23.257
> 
> 标签：javascript

为什么javascript for循环中的prompt()不适用于我下面的代码？

```
var P = [];
for(i=0;i++;i<10)
{
    var g=parseInt(prompt("What is the money you paid in"+i+ "month?"));
    P[i]=g;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:44:31.683

你的 for 循环是错误的。它应该是

```
for (i=0;i<10;i++) 
```

你把第二部分和第三部分搞混了。条件排在第二位，变量增量排在最后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:44:40.790

你交换了`for`循环的部分。条件二：

```
for(var i = 0; i < 10; i++) { 
```

也不要忘记`var`，并`parseInt(x, 10)`防止一些奇怪的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T13:45:54.437

您的循环格式不正确，for 循环应该是：

```
for ( state; condition; action ) 
```

因此，根据您的情况，正确的循环是：

```
for (var i = 0; i < 10; i++) 
```

# android - Android Location.convert 抛出非法参数异常

> ID：12998353
> 
> 赞同：2
> 
> 时间：2012-10-21T13:42:29.000
> 
> 标签：android, location

这句话是扔的`IllegalArgumentException`。我仍然无法弄清楚这种格式有什么问题，`[+-]DDD:MM.MMMMM`如文档所述。

`double latitude = Location.convert("-19:59.646");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:22:38.683

看起来 Location.convert(String coordinate) 的 Android 平台代码不允许大于 59 的分钟十进制值：

[https://github.com/android/platform_frameworks_base/blob/master/location/java/android/location/Location.java#L255](https://github.com/android/platform_frameworks_base/blob/master/location/java/android/location/Location.java#L255)

尝试使用位置 API 文档中指定的 FORMAT_SECONDS 或 FORMAT_DEGREES 格式：

[http://developer.android.com/reference/android/location/Location.html](http://developer.android.com/reference/android/location/Location.html)

例如，您在 FORMAT_SECONDS (DDD:MM:SS.SSSSS) 中的数字将是 -19:59:38.76。

所以代码是：

```
double latitude = Location.convert("-19:59:38.76"); 
```

我使用 FORMAT_SECONDS 格式验证了这适用于 Android。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:30:27.657

您可能需要完全匹配该格式，所以用零填充它。

```
double latitude = Location.convert( "-019:59.64600" ); 
```

# c++ - 如何在这里应用动态规划？

> ID：12998359
> 
> 赞同：2
> 
> 时间：2012-10-21T13:43:12.133
> 
> 标签：c++, algorithm, logic, dynamic-programming

我正在解决这个问题[http://www.spoj.pl/problems/DISUBSTR/](http://www.spoj.pl/problems/DISUBSTR/) 给定一个字符串，我们需要找到它的不同子字符串的总数。

```
Input

T- number of test cases. T<=20;
Each test case consists of one string, whose length is <= 1000

Output

For each test case output one number saying the number of distinct substrings.

Example

Sample Input:
2
CCCCC
ABABA

Sample Output:
5
9

    Explanation for the testcase with string ABABA: 
    len=1 : A,B
    len=2 : AB,BA
    len=3 : ABA,BAB
    len=4 : ABAB,BABA
    len=5 : ABABA
    Thus, total number of distinct substrings is 9. 
```

我已经使用后缀数组的盲目实现解决了这个问题。但是，我想使用动态编程来解决它。但是我想不出任何方法来达到这个目的。时间复杂度需要为 0(n*n) 或更快。请任何人都可以指导我正确的方向.任何提示/建议/伪代码将不胜感激。我已经考虑了很长时间，但想不出任何解决问题的DP方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:05:49.560

我不认为你可以使用动态编程来解决这个问题，因为没有最优的子结构。例如，知道字符串一部分的答案并不能告诉您有关该部分的任何信息+另一个字符。

这个问题可以通过将字符串的所有后缀插入到[trie](http://en.wikipedia.org/wiki/Trie)中然后计算其节点数来解决。这是`O(n^2)`并且很可能会在如此短的字符串中获得 AC。更有效的方法包括使用后缀数组 ( `O(n log n)`) 并在`O(n)`.

# java - 使用 XMPP 构建聊天应用程序的模式

> ID：12998360
> 
> 赞同：4
> 
> 时间：2012-10-21T13:43:19.597
> 
> 标签：java, android, google-app-engine, openfire, smack

我使用 Google App Engine Server 构建了一个 Android 应用程序。现在我想在我的应用程序中添加简单的聊天。我有一些问题。

*   我的用户注册了他们想要的电子邮件域，如 hotmail.com、yahoo.com 甚至更深奥的域，这意味着我需要为他们创建 JID？如果是这样，Google App 引擎是否为我可以操作的应用程序域提供 JID 创建？

*   我读到 Google App Engine 充当 XMPP 客户端，所以我需要可以接收和发送 XMPP 消息的 Xmpp 服务器。那么我为什么要 GAE 呢？是 Openfire 是我的答案吗？我可以将 Openfire 与 GAE 集成吗？

*   我还读到，如果我想在 GAE 和 Android 中使用 XMPP，我的客户端需要一个 Smack Api 并且它正在 HTTP 上工作。所以我想我需要每隔几秒钟轮询一次服务器以获取消息。有更好的模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:50:54.363

> 我的用户注册了他们想要的电子邮件域，如 hotmail.com、yahoo.com 甚至更深奥的域，这意味着我需要为他们创建 JID？如果是这样，Google App 引擎是否为我可以操作的应用程序域提供 JID 创建？

如果我正确理解了您的问题，那么您在这里应该没有任何问题。只要您不是垃圾邮件发送者，我们就不会对您可以发送到的域设置任何限制。

> 我读到 Google App Engine 充当 XMPP 客户端，所以我需要可以接收和发送 XMPP 消息的 Xmpp 服务器。那么我为什么要 GAE 呢？是 Openfire 是我的答案吗？我可以将 Openfire 与 GAE 集成吗？

[您可以通过xmpp API](https://developers.google.com/appengine/docs/python/xmpp/overview)（这是 python 版本）发送和接收 XMPP 消息。这会调用 Google Talk 基础架构。您无法访问传统上称为“XMPP 服务器”的东西，但您可以访问基本的 XMPP 功能。

我对 OpenFire 了解不多，但有*一个*可用于出站套接字的 Trusted Tester 程序，[您可以注册](https://docs.google.com/a/google.com/spreadsheet/viewform?formkey=dF9QR3pnQ2pNa0dqalViSTZoenVkcHc6MQ#gid=0)。如果您需要外部 XMPP 服务器，这就是您所需要的。

> 我还读到，如果我想在 GAE 和 Android 中使用 XMPP，我的客户端需要一个 Smack Api 并且它正在 HTTP 上工作。所以我想我需要每隔几秒钟轮询一次服务器以获取消息。有更好的模式吗？

我应该先说我对 Android 或 aSmack 不太了解，但这不会阻止我尝试回答您的问题。:-)

我认为这取决于您的用例，但我想不出任何情况下您需要这样做。您的应用程序的用户是否会在他们注册的服务器上拥有自己的 JID？如果是这样，我看不出有任何理由必须通过 HTTP 连接，除非 aSmack 支持所有这些。BOSH/XMPP-over-HTTP 的主要用例是在浏览器中，您实际上无法访问打开的原始套接字。

如果您想将 XMPP 用作用户不知道的消息/通知服务，它可能会更复杂。我应该注意，您始终*可以在*[Google Compute Engine](https://cloud.google.com/products/compute-engine)上设置 XMPP 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:37:56.697

> 我可以将 Openfire 与 GAE 集成吗？

您不能在 GAE 上运行 Openfire，因为 GAE 仅在 HTTP 上工作，因此您将无法像 Openfire 那样通过套接字进行连接。

# sencha-touch - 标题自动截断

> ID：12998363
> 
> 赞同：2
> 
> 时间：2012-10-21T13:43:43.323
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个奇怪的问题。我在工具栏或 Ext.Msg.alert 中指定的标题会被自动截断并附加一个“...”。

![在此处输入图像描述](../Images/f5529ec915e2251a5c8043acb9c93f0d.png)

如何摆脱这个？我想要工具栏、消息框和其他任何地方的完整标题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T13:56:04.213

这是 sencha 论坛中报告的 Webkit 中的一个错误，您可以[在此处](http://www.sencha.com/forum/showthread.php?228621-Short-titles-in-title-bar-also-gets-clipped-with-text-ellipsis)或[此处](http://www.sencha.com/forum/showthread.php?234790-Why-titlebar-s-title-cuts-off-after-23-chars)参考它：

在您的`css`or`.sass`文件中使用它作为解决方案：

```
.x-title{padding:0 .3em;}
.x-title .x-innerhtml{padding: 0;} 
```

或者：

```
.x-title .x-innerhtml:after {
    display: inline-block;
    content: '';       
    width: 0.3em;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:30:13.220

问题是因为 ellipsis 属性默认分配给 .x-title 。您需要将其更改为剪辑属性。

给你的配置一个 cls 属性。

例如 ：

cls : '文本格式',

然后在一个css文件中：

```
.textFormat .x-title .x-innerhtml{
    text-overflow : clip !important;
 } 
```

此代码将覆盖特定工具栏的现有代码。

# gwt - 使用 GWT 制作的市场/广告 Web 应用程序的最佳实践

> ID：12998368
> 
> 赞同：1
> 
> 时间：2012-10-21T13:44:07.490
> 
> 标签：gwt, guice, mvp, requestfactory, shiro

我正在考虑使用 GWT 制作市场/广告网站。我几乎没有使用 GWT 的经验，但我确实喜欢它。也没有真正体验过 EE 应用程序。

但是，我已经阅读了一些内容，似乎 RequestFactory 就是这样。还有 MVP、Guice、GIN 和 Shiro（用于身份验证）

我不确定如何将所有这些结合起来。我正在考虑使用使用 JDBC 的普通 SQL 服务器，也曾考虑使用诸如 Hibernate 之类的 ORM。

无论如何，将GWT（RequestFactory + MVP）+ Guice + GIN + Shiro结合起来会好吗？我错过了什么吗？Atm 感觉好像有几种我不习惯的技术。我必须大量阅读哪些男人，如果可能的话，将所有这些结合起来感觉有点困难？

//约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:18:46.170

如果您对 GWT 没有多少经验，我建议您保持简单并使用 GWT-RPC 进行客户端-服务器通信，不要使用 MVP，不要使用 Guice/Gin，不要使用 Shiro，除非您有能力花费数周时间学习和与这些框架作斗争。我已经与 GWT 合作了几年，我个人的看法是，这些工具中的大多数都是矫枉过正的，而且它们所提供的帮助更多，特别是对于小型项目（有时甚至是大型项目）。

# r - 类似热图的图，但用于分类变量

> ID：12998372
> 
> 赞同：17
> 
> 时间：2012-10-21T13:44:23.063
> 
> 标签：r, plot, ggplot2, heatmap

我为大约 50 个人中的每一个人设置了三个因素（set1、set2 和 set3）。set1、set2 和 set3 的值为“A”、“B”、“C”。我想为这些数据制作一个类似热图的图，但让图例显示与值相关的颜色（例如，A='red'，B='blue'，C='black'）。有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-21T13:54:08.600

我决定用 ggplot2 来解决这个问题很容易（无论如何对我来说）：

```
#recreate a data set
dat <- data.frame(person=factor(paste0("id#", 1:50), 
    levels =rev(paste0("id#", 1:50))), matrix(sample(LETTERS[1:3], 150, T), ncol = 3))

library(ggplot2); library(reshape2)
dat3 <- melt(dat, id.var = 'person')
ggplot(dat3, aes(variable, person)) + geom_tile(aes(fill = value),
   colour = "white") + scale_fill_manual(values=c("red", "blue", "black")) 
```

![在此处输入图像描述](../Images/d2bffd55e89b0245d0881dca80d15c92.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-09T05:22:52.107

也可以使用基本图形制作类似的图。这是使用基`image`函数的一种方法。该样本具有分类响应而不是数字响应。

```
dx <- data.frame( Tasks = c('1','2','3','4'),
                  Phase1 = c('Done','Done','Done','WIP'),
                  Phase2 = c('WIP','Done','Done',''),
                  Phase3 = c('','WIP','Done',''))

ff<-factor(as.matrix(dx[,2:4]), 
    levels=c("Done","WIP",""), 
    labels=c("done","wip","-empty-")
)
fx<-matrix(as.numeric(ff), ncol=ncol(dx)-1)

#use labels to assign colors
col<-c(done="darkgreen",wip="orange","-empty-"="black")

imgflip<-function(x) {t(x[nrow(x):1,])}

image(imgflip(fx),
    breaks=(1:(nlevels(ff)+1))-.5,
    col=col[levels(ff)],
    xaxt="n", yaxt="n"
)
axis(2, at=seq(0,1,length.out=nrow(dx)), labels=rev(paste("Task",dx$Tasks)), las=2)
axis(3, at=seq(0,1,length.out=length(names(dx))-1), labels=names(dx)[-1]) 
```

这将产生这张照片。

![示例图像](../Images/d6d83b4a8034005eff6f7b1265a286dd.png)

# node.js - 我是否需要在 Node.js 中使用 2 个单独的应用程序，一个用于访问者，一个用于 CRUD 管理员？

> ID：12998384
> 
> 赞同：2
> 
> 时间：2012-10-21T13:46:13.960
> 
> 标签：node.js, web-applications, nginx, express, varnish

### 介绍

我现在正在尝试 Node.js（来自 PHP 背景）。

我已经用它捕捉到了工作流的***氛围***（事件、承诺、继承……*还没有弄清楚流*）。

我选择了一个图形组合 Web 应用程序作为我的第一个 nodejs 项目。我知道 node.js 可能不适合这个用例，但我是一个很好的游乐场，无论如何我都需要这样做。

这个概念：

1.  访问者只会浏览相册中的漂亮图片，没有登录或订阅，什么都没有。

2.  管理员将添加、修改、重新排序.. CRUD 相册。所以我需要 Auth、ACL、Validation、imagemagick ......不仅仅是在前端。

目前我正在运行一个 Node.js 实例，因此管理员和访问者代码都在一个共享代码库和共享节点内存运行时中，在我看来，这在性能方面是不必要的。

* * *

# 问题

*对于性能和可用性：*

我应该**继续**为 Web 应用程序的管理员和访问者区域运行一个节点实例，还是应该将它们作为**2 个单独的实例**运行？（或子任务？-老实说，我没有使用子任务/子进程）

* * *

### 想法四处飘荡

*   如果拆分为 2 个应用程序，则使用 nginx 作为代理
*   查看[https://stackoverflow.com/a/5683938/339872](https://stackoverflow.com/a/5683938/339872)。有一些有趣的工具可以帮助管理流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:02:18.653

我会设置 admin.mysite.com 并将其托管在另一台服务器上......或使用 nginx 将该域的请求代理到您的 admin.js 节点应用程序。

# objective-c - 如何强制 WebView 显示 FB 授权对话框？可可

> ID：12998385
> 
> 赞同：0
> 
> 时间：2012-10-21T13:46:24.397
> 
> 标签：objective-c, xcode, macos, cocoa, webview

通常，当您在网络浏览器上单击“使用 Facebook 注册”按钮时，会弹出一个新选项卡。但是，当您尝试在 a 上做同样的事情时，`WebView`它不会做任何事情，它会停留在同一个网站上。我怎样才能强制`WebView`显示对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T06:25:45.500

这可能是您正在寻找的。将它放在你的 AppDelegate.m 中，然后所有外部链接将在默认浏览器中打开：

```
// Habilita links externos abrirem no navegador padrão
- (WebView *)webView:(WebView *)sender createWebViewWithRequest:(NSURLRequest *)request
{
    // HACK: This is all a hack to get around a bug/misfeature in Tiger's WebKit
    // (should be fixed in Leopard). On Javascript window.open, Tiger sends a null
    // request here, then sends a loadRequest: to the new WebView, which will
    // include a decidePolicyForNavigation (which is where we'll open our
    // external window). In Leopard, we should be getting the request here from
    // the start, and we should just be able to create a new window.

    WebView *newWebView = [[WebView alloc] init];
    //[newWebView setUIDelegate:self];
    [newWebView setPolicyDelegate:self];

    return newWebView;
}

- (void)webView:(WebView *)sender decidePolicyForNavigationAction:(NSDictionary *)actionInformation request:(NSURLRequest *)request frame:(WebFrame *)frame decisionListener:(id<WebPolicyDecisionListener>)listener {
    if( [sender isEqual:myWebView] ) {
        [listener use];
    }
    else {
        [[NSWorkspace sharedWorkspace] openURL:[actionInformation objectForKey:WebActionOriginalURLKey]];
        [listener ignore];
        //[sender release];
    }
}

- (void)webView:(WebView *)sender decidePolicyForNewWindowAction:(NSDictionary *)actionInformation request:(NSURLRequest *)request newFrameName:(NSString *)frameName decisionListener:(id<WebPolicyDecisionListener>)listener {
    [[NSWorkspace sharedWorkspace] openURL:[actionInformation objectForKey:WebActionOriginalURLKey]];
    [listener ignore];
}
// - 
```

（sim，eu sou br！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:36:54.067

`-webView:decidePolicyForNewWindowAction:request:newFrameName:decisionListener:`在您的委托中实施。如果您还没有实现，您可能还需要实现至少一些 WebUIDelegate 协议方法。

参考：[WebPolicyDelegate 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003835)，[WebUIDelegate 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebUIDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003838)

# php - 从“标签”数组创建数组

> ID：12998387
> 
> 赞同：-2
> 
> 时间：2012-10-21T13:46:53.993
> 
> 标签：php, arrays

假设我有一个这样的数组：

```
Array (
  [0] => "bananas, apples, pineaples"
  [1] => "bananas, show cones"
  [2] => ""
  [3] => "apples, santa clause"
..
) 
```

从该数组中，我想创建一个新数组，保存每个“标签”，以及它在第一个数组中出现的次数，最好按字母顺序排序，如下所示：

```
Array (
  [apples] => 2
  [bananas] => 2
..
) 
```

或者

```
array (
  [0] => [apples] => 2
..
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:52:58.537

```
// array to hold the results
$start = array( "bananas, apples, pineaples", "bananas, show cones", "", "apples, santa clause" );
// array to hold the results
$result = array();

// loop through each of the array of strings with comma separated values
foreach ($start as $words){

    // create a new array of individual words by spitting on the commas
    $wordarray = explode(",", $words);
    foreach($wordarray as $word){
        // remove surrounding spaces
        $word = trim($word);
        // ignore blank entries
        if (empty($word)) continue;

        // check if this word is already in the results array
        if (isset($result[$word])){
            // if there is already an entry, increment the word count
            $result[$word] += 1;
        } else {
            // set the initial count to 1
            $result[$word] = 1;
        }
    }
}
// print results
print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:55:17.743

假设您的第一个数组为`$array`，您的结果数组为`$tagsArray`

```
foreach($array as $tagString)
{
    $tags = explode(',', $tagString);
    foreach($tags as $tag)
    {
        if(array_key_exists($tag, $tagsArray))
        {
           $tagsArray[$tag] += 1;
        }
        else
        {
           $tagsArray[$tag] = 1;
        }
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:58:46.940

您可以尝试使用`array_count_values`

```
$array = Array(
        0 => "bananas, apples, pineaples",
        1 => "bananas, show cones",
        2 => "",
        3 => "apples, santa clause");

$list = array();
foreach ($array as $var ) {
    foreach (explode(",", $var) as $v ) {
        $list[] = trim($v);
    }
}
$output = array_count_values(array_filter($list));
var_dump($output); 
```

输出

```
array
  'bananas' => int 2
  'apples' => int 2
  'pineaples' => int 1
  'show cones' => int 1
  'santa clause' => int 1 
```

# c - 将内存分配给 3D 数组

> ID：12998389
> 
> 赞同：3
> 
> 时间：2012-10-21T13:47:23.070
> 
> 标签：c, pointers

我知道如何将内存分配给二维数组，但如果 ptr 定义为`int *ptr[][100];`

那我该如何分配内存`ptr`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:28:43.377

引用 C 标准的第 6.2.5 节：

> 未知大小的数组类型是不完整的类型。对于该类型的标识符，它是通过在稍后的声明中指定大小（具有内部或外部链接）来完成的。

因此，要使用它，`int *ptr[][100];`您必须链接到它的定义。如果您指定该长度，那么您将拥有一个指向`int`. 此时，您必须为 3D 数组分配足够大的内存块，并`int *`在 2D 数组中正确分配每个内存。

更直接的方法可能如下：

```
int nx = 100;
int ny = 200;
int nz = 300;

int (*parray)[ny][nz] = malloc(nx*ny*nz*sizeof(int)); 
```

最后一行分配了一个指向 int 数组的数组的指针，它可以像 3D 数组一样有效地使用。例如：

```
for(int ii = 0; ii < nx; ii++)
  for (int jj = 0; jj < ny; jj++)
    for (int kk = 0; kk < nz; kk++)
      parray[ii][jj][kk] = ii*ny*nz + jj*nz + kk; 
```

[这个问题](https://stackoverflow.com/q/12861532/771663)的公认答案对使用指向类型数组的指针提供了一个非常好的和精确的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:04:01.100

使用`malloc`并指定 3D 数组所需的字节数。

```
int *array3d = (int *)malloc(x * y * z * sizeof(int)); 
```

其中 x、y 和 z 是 3d 数组的维度。

当然，您也可以使用其他类型的数组元素（浮点数、字符、结构），只需确保使用`sizeof`.

# php - 解析错误：语法错误，意外的 '('，期待 T_STRING 在 --------------/admin.php 的第 26 行

> ID：12998399
> 
> 赞同：0
> 
> 时间：2012-10-21T13:48:52.877
> 
> 标签：php

我上传了文件，但它显示错误。

> 解析错误：语法错误，意外'（'，在第 26 行的 ///admin.php 中期待 T_STRING 如何解决此错误？

线是

```
function index($success){
    include("header.php");
    global $link,$prefix;
    if (isset($success)) {
        openTable();
        echo "<center><font color='#FF0000'>$success</font><center><br>";
        closeTable();
        echo"<br>";
        goto("index.php?file=admin");/  error line
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:52:56.370

很可能您使用的是 PHP 5.3，其中[`goto`](http://php.net/manual/en/control-structures.goto.php)是一个运算符，并且在该行中您正在调用`goto()`您已定义的自定义函数。

*解决方案：* **重命名你的函数**，类似的东西`go_to()`会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:55:00.060

请参阅`goto`此处的 PHP 手册：http: [//php.net/manual/en/control-structures.goto.php](http://php.net/manual/en/control-structures.goto.php)

`goto`用于将执行转移到同一代码文件中的不同点，您需要为同一文件中代码中的另一个位置指定标识符（请参阅 PHP 手册链接中给出的示例）。如果您想转到另一个链接，请改用`header()`方法。

```
header("Location:index.php?file=admin"); 
```

手册在这里： http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:52:09.717

我从未使用过 goto，但我只是在手册中查找它，他们从未在目的地周围使用括号。但是，如果您想重定向到另一个页面，我认为您使用了错误的方法。

# android - Jenkins mobile air android打包错误

> ID：12998402
> 
> 赞同：1
> 
> 时间：2012-10-21T13:49:10.820
> 
> 标签：android, air, jenkins, adt

我搜索了谷歌和 SO 的解决方案，但找不到任何解决方案。我正在为 android 开发一个移动 AIR 应用程序，我使用 Jenkins 作为本地 CI 系统。我的项目编译得很好，但是，在 ADT 打包过程中出现了问题。我从以下示例中复制了 ADT 打包目标：

[http://blog.terrenceryan.com/using-ant-to-package-the-same-air-app-to-multiple-devices/](http://blog.terrenceryan.com/using-ant-to-package-the-same-air-app-to-multiple-devices/)

和

[https://gist.github.com/630170](https://gist.github.com/630170)

但是，我在 Jenkins 中得到了这个输出：http: [//d.pr/i/y2gJ](http://d.pr/i/y2gJ)

这是我的 build.xml 文件中的打包部分（使用了重要的属性名称和值）：

```
...
...
<property name="APP_NAME"                   value="Hightide"/>
<property name="ANDROID_HOME"               value="${user.home}/../../../Supermaggel/SDKS/android-sdk-macosx" />
<property name="APP_DESCRIPTOR"             value="${SOURCE_DIR}/${APP_NAME}-app.xml" />
<property name="SWF_FILE"                   value="${APP_NAME}.swf" /> 
<property name="OUTPUT_LOCATION_ANDROID"    location="${BUILD_DIR}/android" />
<property name="OUTPUT_SWF_ANDROID"         location="${OUTPUT_LOCATION_ANDROID}/${SWF_FILE}" />
<property name="OUTPUT_APK_ANDROID"         value="OUTPUT_LOCATION_ANDROID/${APP_NAME}.apk" />
...     
...
<!-- PACKAGE ANDROID -->
<target name="package-android">
    <echo message="Packaging for Android"/>
    <exec executable="${ADT}" dir="${OUTPUT_LOCATION_ANDROID}">
        <arg line="-package"/>
        <arg line="-target apk"/>
        <arg line="-storetype pkcs12"/>
        <arg line="-keystore ${KEYSTORE_ANDROID}" />
        <arg line="-storepass ${STOREPASS_ANDROID}" />
        <arg line="${APP_NAME}"/>                   <!-- output .APK -->
        <arg line="${APP_DESCRIPTOR}"/>         <!-- app descriptor location -->
        <arg line="${OUTPUT_SWF_ANDROID}"/>         <!-- output -->
    </exec>
</target> 
```

我正在使用 Jenkins 版本。1.486、Flash 生成器 4.6、AIR 3.3。

谁能指出包装过程中出了什么问题？任何参数丢失或解释错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:21:54.440

我发现是什么原因造成的。ADT cli 工具给出了退出代码 2，这意味着参数有问题……我花了几个小时查看它，试图找出问题所在。对于 ADT，您需要传入相对路径，而不是“绝对”路径（或者，来自项目根目录的相对路径。）所以不要使用 ${PROJECT_ROOT}/packagedir/${APPNAME}.apk，只需使用 packagedir/${APPNAME}。 apk 或类似的东西，适用于所有路径。

# solr - 在 Alfresco 中配置 Solr - alfresco.lag 属性的含义？

> ID：12998403
> 
> 赞同：2
> 
> 时间：2012-10-21T13:49:31.840
> 
> 标签：solr, alfresco

由于 Alfresco 中 Solr 索引的最终一致性，我最近注意到了一个问题。问题是文件没有出现在文件上传后立即执行的搜索中。我一直在查看配置属性，看看是否可以提高性能（减少延迟）。

看起来更改`alfresco.cron`属性会有所帮助，因此 Solr 会更频繁地检查存储库更新，而不是默认的 15 秒`alfresco.cron=0/15 * * * * ? *`

但是，我不清楚该`alfresco.lag=1000`属性的作用或目的是什么。[Alfresco wiki](http://wiki.alfresco.com/wiki/Alfresco_And_SOLR)说：

> 每个“轨道”将一直运行到它开始的时间 - 减去这个滞后

这对我来说毫无意义 - 什么是“轨道”，以及在它开始之前如何运行？

[Alfresco 4.1 docs](http://docs.alfresco.com)和这篇[文章](http://www.ixxus.com/blog/2012/06/getting-going-with-solr-alfresco-4/)说：

> 这指定了跟踪器属性以设置 Solr 全文索引当前落后于存储库更新的时间（以秒为单位）。

和

> Solr 索引在后台更新。这是此 Solr 索引当前落后于存储库更新的时间（以秒为单位）。

但我一点也不聪明——这是否意味着 Solr 可能比存储库晚 1000 秒（由于 cron 间隔加上 15 秒）？如果是这样的话，这似乎是一个*巨大*的滞后 - 我希望最多几秒钟。

调整的实际效果是`alfresco.lag`什么（例如，如果我大大减少它或将其设置为零会发生什么）？Alfresco 文档中的示例值为 0 秒，但配置文件中的默认值为 1000 - 调整此属性的权衡是什么？

**更新：**我怀疑单位记录错误，实际上是毫秒而不是秒，因为`org.alfresco.solr.tracker.CoreTracker`有以下代码：

```
 long startTime = System.currentTimeMillis();
    state.timeToStopIndexing = startTime - lag; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T21:30:52.980

afaik alfresco.lag=1000 意味着 Solr Tracker 将尝试索引至少一秒钟前已提交的所有事务。我猜设置为 0 可能会产生一些副作用，例如，如果您的 SOLR 在不同的机器上运行并且时间服务不是 100% 同步的。

# r - 绘制 Zipf 分布

> ID：12998405
> 
> 赞同：1
> 
> 时间：2012-10-21T11:37:51.500
> 
> 标签：r, math

我有一个带有 zipf 规律分布的数据集，现在我想将它与标准`zipf`图进行比较，这是我的`R`代码：

```
f <- read.table('/myfile.txt',sep='\t',header=T)
attach(f)
fs <- f[order(cnt), ]
detach(f)
n = 1:dim(fs)[1]
plot(fs[,2]~n) 
```

现在我想将它与`zipf`同一个情节进行比较，我该怎么做`R`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T20:25:19.560

VGAM 包具有估计 Zipf 分布中的指数的功能。您可能希望根据最佳拟合估计密度绘制分布：

```
plot( cntdens <- table(f[['cnt']])/length(f[['cnt']]),
       xlim=range(f[['cnt']]), ylim=c(0, 0.8)  )

# And then plot the theoretic distribution for the VGAM fit 
# ... extending the example on ?VGAM::zipf:

require(VGAM)
zdata <- data.frame( y=1:max( f[['cnt']] ),  ofreq= table( f[['cnt']] ) )
fit = vglm(y ~ 1, zipf, zdata, trace = TRUE, weight = ofreq, crit = "coef")
proby = dzipf(1:max(f[['cnt']]), N =max(f[['cnt']]), s = Coef(fit) )
points((1:5)+0.05, proby,  col="red") 
```

下面是使用 ?dzipf 页面上示例中的数据的过程。 ![在此处输入图像描述](../Images/9768edc190f406444140c6c58d668f8c.png)

# mysql - 如何使用 SQL 编辑某些列 mysql 数据库中的多条记录

> ID：12998406
> 
> 赞同：2
> 
> 时间：2012-10-21T13:50:07.610
> 
> 标签：mysql, sql, insert, sql-update

我在“column1”列中有多个结构记录，我想更新同一列中的类型。

这些字段仅在一个字段中包含有关语言、类别级别和名称的信息。

信息用符号分隔，如下所示：

1.  " : " (两点) 用词根分隔语言(language% : Top/% )
2.  “/”（斜线）按类别分隔根（Top / level_1），按不同级别类别分隔类别（level_1 / level_2）。
3.  因此FIELD将具有以下形式“语言：顶级/级别/级别”

存储在 FIELDS 上的信息来自两个不同的来源，一个是内部的，另一个没有 root(Top/) 的 FIELDS 来自外部来源，必须由 SQL 更新

真实示例字段：

**前**

<b>英文</b>:level/Test/later

**后**

<b>英文</b>:Top/level/Test/later

真实示例表：

```
**before**                                           **after**
language0:Top/level_0/name_category                  language0:Top/level_1/name_category
language1:name_test2/name_category                   language1:name_test2/name_category
language2:level_1/name_category                      language2:Top/level_1/level_2/name_category
language3:level_1/level_2/name_category              language3:Top/level_1/level_2/name_category
language4:level_1/level_2/level_3/name_category      language4:Top/level_1/level_2/level_3/name_category 
```

第一行已经改变，所以我们只需要选择那些以 "language%:level_1/%" 开头的记录

**table_example1**

```
id    **column1**                       

1    language0:Top/level_1/level_2/level_3/level_4
2    language1:name_test2/etc/
3    language2:level_1/level_2/level_3/level_4
4    language3:level_1/level_2/level_3
5    language3:level_1/level_2
6    language%:level_1/ 
```

笔记：

*   示例中只有这些字段必须更新：行 id 3、4、5、6 和表中只有 column1
*   结果必须类似于 line id 1 column1: `language0:Top/name_test/etc/etc/`。
*   第 2 行第 1 列的字段`language1:name_test2/etc/`将被忽略是不同的格式和存储的不同信息。
*   不更改第 2 行的基础是不同的链接值：name_test2(name_test) LIKE 'name_test/%' only
*   这个字段中不存在的#符号只是为了划定你可以在列之前，列之后看到
*   只有在以下两点 ( : ) 之后正好有表达式后跟斜线 (level_1/) 时，才应更新 FIELD

不得修改以其他方式开始的其他记录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:58:37.673

```
UPDATE `table_example1` SET `column1` = REPLACE(column1,':name_test/',':Top/name_test/'); 
```

在使用此查询之前创建备份。

# iphone - 解析包含多个对象的 JSON 字符串

> ID：12998407
> 
> 赞同：0
> 
> 时间：2012-10-21T13:50:15.173
> 
> 标签：iphone, ios, xcode, json

我正在从 url 检索 json 数据。json“字符串”有一个对象，其中包含多个对象，每个对象都包含自己的键、值属性……本质上，json对象是一个包含或多或少是字典对象的对象的NSArray。我正在尝试使用 NSJSONSerialization 但没有很多文档，而且我似乎无法弄清楚如何使用以下 json 示例：

```
{"allObjects":[{"firstName":"homer","middleName":"j","lastName":"simpson"
,"address": "123 evergreen terrace","countryCode":"US","zip":12345},
{"firstName": "marge","middleName":"b","lastName":"simpson","address":
"123 evergreen terrace","countryCode":"US","zip":12345}]} 
```

（如果重要，JSON 对象包含更多条目）

是否有特定的“选项”我需要与 NSJSONSerialization 一起使用以获取字典数组（数组为“allObjects”）？

任何帮助将不胜感激！

提前致谢。

**更新**

此代码导致错误：

@vishy 我也这么认为，但是当我运行这段代码时，

```
NSArray *json = [NSJSONSerialization JSONObjectWithData:geoNamesJSON options: kNilOptions error:&error];
NSDictionary *dict = [json objectAtIndex:0];
NSArray *allKeys = [dict allKeys];
NSString *key = [[NSString alloc] init];
NSEnumerator *keyEnum = [allKeys objectEnumerator];
NSLog(@"All keys in the first dictionary object:");
while(key = [keyEnum nextObject]){
    NSLog(@"%@", key);} 
```

我收到此错误：

> -[__NSCFDictionary objectAtIndex:]：无法识别的选择器发送到实例 0x1fd7cd10 *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary objectAtIndex:]：无法识别的选择器发送到实例 0x1fd7cd10”***第一次抛出调用堆栈：（0x3796c2a3 0x35c7c97f 0x3796fe07 0x3796e531 0x378c5f68 0xf310b 0xf219d 0x38ca4321 0x38cdecfd 0x38d53cc1 0x38cd86a7 0x38cd8481 0x38c52abb 0x38cc78d7 0x355b9bd9 0x3665c4b7 0x366611bd 0x3793ff3b 0x378b2ebd 0x378b2d49 0x37def2eb 0x38c91301 0xd3551 0x3c39db20) libc++abi.dylib: terminate called throwing an exception (lldb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:26:07.700

执行此步骤后，您是否在数组中获得任何值

```
NSArray *json = [NSJSONSerialization JSONObjectWithData:geoNamesJSON options:kNilOptions error:&error]; 
```

我不这么认为，因为你的 json 是一本字典。它应该是

```
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:geoNamesJSON options:kNilOptions error:&error]; 
```

有关处理 json 的信息，您可以按照本[教程](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)进行操作。

**编辑**：使用上述行获取json字典后以这种方式解析数据

```
NSArray* geoList = [geoDict objectForKey:@"geonames"];
NSLog(@"first object in geolist--%@",[geoList objectAtIndex:0]);
//each object in the array is a dictionary 
```

# c++ - 实现 3d 矢量数组的最佳方法是什么？

> ID：12998410
> 
> 赞同：10
> 
> 时间：2012-10-21T13:51:03.513
> 
> 标签：c++, linear-algebra, eigen

我决定在我的项目中使用[Eigen](http://eigen.tuxfamily.org)库。但是从文档中不清楚如何最有效地指定一个 3d 向量数组。

正如我所建议的，第一种方法是

```
Eigen::Matrix<Eigen::Vector3d, Eigen::Dynamic, 1> array_of_v3d(size); 
```

但是在那种情况下，我应该如何获得另一个数组，其中元素等于 的元素`array_of_v3d`和其他实例的标量积`Vector3d`？换句话说，我可以使用`Eigen`'s 函数重写以下循环吗：

```
Eigen::Vector3d v3d(0.5, 0.5, 0.5);  
Eigen::VectorXd other_array(size);  
for (size_t i = 0; i < size; ++i)
    other_array(i) = array_of_v3d(i).dot(v3d); 
```

第二种方法是使用大小为`(3 x size)`或的矩阵`(size x 3)`。例如，我可以这样声明：

```
Eigen::Matrix<double, 3, Eigen::Dynamic> matrix; 
```

但是我没有从文档中得到如何设置列数。以下似乎可行，但我必须重复`3`两次行数：

```
Eigen::Matrix<double, 3, Eigen::Dynamic> matrix(3, size); 
```

那么上面的循环就等价于

```
other_array = v3d.transpose() * array_of_v3d; 
```

正如我的实验表明这比

```
Eigen::Matrix<double, Eigen::Dynamic, 3> matrix(size, 3);  
other_array = array_of_v3d * v3d; 
```

此外：

无论如何，我的使用`Eigen`似乎不是那么理想，因为普通的相同程序`C`几乎快 1.5 倍（这确实不是真的，这取决于`size`）：

```
for (size_t i = 0; i < size; i+=4) {
    s[i]   += a[i]   * x + b[i]   * y  + c[i]   * z;
    s[i+1] += a[i+1] * x + b[i+1] * y  + c[i+1] * z;
    s[i+2] += a[i+2] * x + b[i+2] * y  + c[i+2] * z;
    s[i+3] += a[i+3] * x + b[i+3] * y  + c[i+3] * z;
} 
```

我错过了什么吗？图书馆范围内还有其他方法`Eigen`可以解决我的问题吗？

更新：

在这里，我展示了我的测试结果。有5种情况：

1.  `C`- 部分展开的 for 循环
2.  `Eigen::Matrix`( `rows x cols = 3 x size`)。在这种情况下，3d 向量的值一起存储在内存中，因为默认情况下`Eigen`以列为主存储数据。或者我可以`Eigen::RowMajor`在下一个案例中设置和其他所有内容。
3.  `Eigen::Matrix`( `rows x cols = size x 3`)。
4.  这里 3d 向量的每个分量都存储在一个单独的`VectorXd`. 所以有三个 VectorXd 对象放在一起`Vector3d`。
5.  `std::vector`容器用于存储`Vector3d`对象。

这是我的测试程序

```
#include <iostream>
#include <iomanip>
#include <vector>
#include <ctime>

#include <Eigen/Dense>

double for_loop(size_t rep, size_t size)
{
    std::vector<double>  a(size), b(size), c(size);
    double x = 1, y = 2, z = - 3;
    std::vector<double>  s(size);
    for(size_t i = 0; i < size; ++i) {
        a[i] = i;
        b[i] = i;
        c[i] = i;
        s[i] = 0;
    }
    double dtime = clock();
    for(size_t j = 0; j < rep; j++) 
        for(size_t i = 0; i < size; i += 8) {
            s[i] += a[i]   * x + b[i]   * y  + c[i]   * z;
            s[i] += a[i+1] * x + b[i+1] * y  + c[i+1] * z;
            s[i] += a[i+2] * x + b[i+2] * y  + c[i+2] * z;
            s[i] += a[i+3] * x + b[i+3] * y  + c[i+3] * z;
            s[i] += a[i+4] * x + b[i+4] * y  + c[i+4] * z;
            s[i] += a[i+5] * x + b[i+5] * y  + c[i+5] * z;
            s[i] += a[i+6] * x + b[i+6] * y  + c[i+6] * z;
            s[i] += a[i+7] * x + b[i+7] * y  + c[i+7] * z;
        }
    dtime = (clock() - dtime) / CLOCKS_PER_SEC;

    double res = 0;
    for(size_t i = 0; i < size; ++i)
        res += std::abs(s[i]);
    assert(res == 0.);

    return dtime;
}

double eigen_3_size(size_t rep, size_t size)
{
    Eigen::Matrix<double, 3, Eigen::Dynamic> A(3, size);
    Eigen::Matrix<double, 1, Eigen::Dynamic> S(size);
    Eigen::Vector3d X(1, 2, -3);
    for(size_t i = 0; i < size; ++i) {
        A(0, i) = i;
        A(1, i) = i;
        A(2, i) = i;
        S(i)    = 0;
    }
    double dtime = clock();
    for (size_t j = 0; j < rep; j++) 
        S.noalias() += X.transpose() * A;
    dtime = (clock() - dtime) / CLOCKS_PER_SEC;

    double res = S.array().abs().sum();
    assert(res == 0.);

    return dtime;
}

double eigen_size_3(size_t rep, size_t size)
{
    Eigen::Matrix<double, Eigen::Dynamic, 3> A(size, 3);
    Eigen::Matrix<double, Eigen::Dynamic, 1> S(size);
    Eigen::Vector3d X(1, 2, -3);
    for(size_t i = 0; i < size; ++i) {
        A(i, 0) = i;
        A(i, 1) = i;
        A(i, 2) = i;
        S(i)    = 0;
    }
    double dtime = clock();
    for (size_t j = 0; j < rep; j++) 
        S.noalias() += A * X;
    dtime = (clock() - dtime) / CLOCKS_PER_SEC;

    double res = S.array().abs().sum();
    assert(res == 0.);

    return dtime;
}

double eigen_vector3_vector(size_t rep, size_t size)
{
    Eigen::Matrix<Eigen::VectorXd, 3, 1> A;
    A(0).resize(size);
    A(1).resize(size);
    A(2).resize(size);
    Eigen::VectorXd S(size);
    Eigen::Vector3d X(1, 2, -3);
    for(size_t i = 0; i < size; ++i) {
        A(0)(i) = i;
        A(1)(i) = i;
        A(2)(i) = i;
        S(i)    = 0;
    }
    double dtime = clock();
    for (size_t j = 0; j < rep; j++) 
        S.noalias() += A(0) * X(0) + A(1) * X(1) + A(2) * X(2);
    dtime = (clock() - dtime) / CLOCKS_PER_SEC;

    double res = S.array().abs().sum();
    assert(res == 0.);

    return dtime;
}

double eigen_stlvector_vector3(size_t rep, size_t size)
{
    std::vector<                 Eigen::Vector3d,
        Eigen::aligned_allocator<Eigen::Vector3d> > A(size);
    std::vector<double> S(size);
    Eigen::Vector3d X(1, 2, -3);
    for(size_t i = 0; i < size; ++i) {
        A[i](0) = i;
        A[i](1) = i;
        A[i](2) = i;
        S[i]    = 0;
    }
    double dtime = clock();
    for (size_t j = 0; j < rep; j++) 
        for(size_t i = 0; i < size; i++) 
            S[i] += X.dot(A[i]);
    dtime = (clock() - dtime) / CLOCKS_PER_SEC;

    double res = 0;
    for(size_t i = 0; i < size; i++) 
        res += std::abs(S[i]);
    assert(res == 0.);

    return dtime;
}

int main()
{
    std::cout << "    size    |  for loop  |   Matrix   |   Matrix   | Vector3 of  | STL vector of \n" 
              << "            |            |  3 x size  |  size x 3  | Vector_size |  TinyVectors  \n" 
              << std::endl;

    size_t n       = 10;
    size_t sizes[] = {16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192};
    int rep_all    = 1024 * 1024 * 1024;

    for (int i = 0; i < n; ++i) {
        size_t size = sizes[i];
        size_t rep = rep_all / size;

        double t1 = for_loop                (rep, size);
        double t2 = eigen_3_size            (rep, size);
        double t3 = eigen_size_3            (rep, size);
        double t4 = eigen_vector3_vector    (rep, size);
        double t5 = eigen_stlvector_vector3 (rep, size);

        using namespace std;
        cout << setw(8)  << size 
             << setw(13) << t1 << setw(13) << t2 << setw(13) << t3
             << setw(14) << t4 << setw(15) << t5 << endl;
    }
} 
```

该程序由`gcc 4.6`with options编译`-march=native -O2 -msse2 -mfpmath=sse`。在我的桌子上`Athlon 64 X2 4600+`，我有一张漂亮的桌子：

```
 size    |  for loop  |   Matrix   |   Matrix   | Vector3 of  | STL vector of 
          |            |  3 x size  |  size x 3  | Vector_size |  TinyVectors  

    16         2.23          3.1         3.29          1.95           3.34
    32         2.12         2.72         3.51          2.25           2.95
    64         2.15         2.52         3.27          2.03           2.74
   128         2.22         2.43         3.14          1.92           2.66
   256         2.19         2.38         3.34          2.15           2.61
   512         2.17         2.36         3.54          2.28           2.59
  1024         2.16         2.35         3.52          2.28           2.58
  2048         2.16         2.36         3.43          2.42           2.59
  4096        11.57         5.35        20.29         13.88           5.23
  8192        11.55         5.31        16.17         13.79           5.24 
```

该表显示 3d 向量数组的良好表示是`Matrix`（3d 向量的组件应该存储在一起）和`std::vector`固定大小的`Vector3d`对象。这证实了雅各布的回答。对于大向量`Eigen`确实显示出很好的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:54:29.423

如果您只想保存一组`Vector3d`对象，通常使用`std::vector`就可以了，尽管您需要注意[对齐](http://eigen.tuxfamily.org/dox/group__TopicStlContainers.html)问题。

您描述的使用矩阵的第二种方法`size x 3`也非常可行，通常是更快的方法。除了性能问题之外，我不确定您是否在问这个问题。

至于性能，我假设您确实在编译器中使用了完全优化，因为当优化关闭时，Eigen 表现不佳。在任何情况下，您都可以通过使用可以使用优化的 SIMD 指令处理的[对齐类型来获得一些性能。](http://eigen.tuxfamily.org/dox/group__TopicFixedSizeVectorizable.html)`Vector4d`如果您使用 eg代替，Eigen 应该会自动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-29T20:55:35.593

在 2021 年运行相同的基准测试，使用 MSVC 16 2019（cl 版本 19.28.29913），64 位，在发布模式下，使用 Eigen 3.3.9，在`Intel Core i7-10750H`：

```
 size    |  for loop  |   Matrix   |   Matrix   | Vector3 of  | STL vector of
            |            |  3 x size  |  size x 3  | Vector_size |  TinyVectors

      16        0.747        19.49        1.013         0.967          0.909
      32        1.113       19.536        0.942         0.876          0.909
      64        0.728       19.487        1.118         0.962          1.001
     128        0.721       19.546        0.979         0.864          0.928
     256        0.878       19.428        1.004         0.936          0.937
     512        0.922       19.496         1.02         0.985          0.917
    1024        0.937       19.434        1.044         1.004          0.919
    2048        0.969       19.479        1.104         1.074          0.977
    4096         0.97       19.531        1.108         1.074          0.987
    8192        1.031       19.596        1.194         1.164          1.025 
```

# iphone - 无法加载 UIWebView 中的 Facebook 评论

> ID：12998412
> 
> 赞同：0
> 
> 时间：2012-10-21T13:51:47.743
> 
> 标签：iphone, ios, facebook-social-plugins, facebook-comments

我想在我的应用程序中添加一个 facebook 评论框插件。

我所做的只是文件所说的。但我无法成功加载评论框。

我的应用程序中有一个本地 html 文件，如下所示；

```
<html>
    <body>
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
                 var js, fjs = d.getElementsByTagName(s)[0];
                 if (d.getElementById(id)) return;
                 js = d.createElement(s); js.id = id;
                 js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=xxx";
                 fjs.parentNode.insertBefore(js, fjs);
                 }(document, 'script', 'facebook-jssdk'));</script>

        <div class="fb-comments" data-href="http://www.google.com" data-num-posts="4" data-width="470"></div>
        <div>working?</div>
    </body>
</html> 
```

然后，我正在创建一个 UIWebView 并尝试加载这个本地 html 文件，如下所示；

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"comments" ofType:@"html"] isDirectory:NO];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[self.facebookCommentsWebView loadRequest:request]; 
```

但是 webview 只显示了我放置的虚拟 div。我只能看到“工作？” 页面上的文字。因此，似乎 html 文件已成功加载，但注释框却没有。

对此有想法吗？

顺便说一句，当我尝试在我的计算机中提供 html 文件并使用 url:“http:/localhost:3000”加载 webview 时，我可以看到评论。

```
[self.facebookCommentsWebView loadRequest:[[NSURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://localhost:3000"]] ]; 
```

但是，我不想为此提供一个页面。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:46:30.590

看来您需要更新这部分：

```
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=xxx"; 
```

至：

```
js.src = "http://connect.facebook.net/en_GB/all.js#xfbml=1&appId=xxx"; 
```

# c# - 使用 string[] args 从命令行调用控制台应用程序

> ID：12998415
> 
> 赞同：3
> 
> 时间：2012-10-21T13:52:00.350
> 
> 标签：c#, console-application

我有一个 .NET 控制台应用程序（非常简单）。入口点采用臭名昭著的 string[] args 参数。这是否意味着我可以从命令行调用这个应用程序并将单个字符串作为参数传递？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T13:54:16.790

是的，`string[] args`它来自命令行。第零个元素是第一个参数，依此类推。请注意，与 C 或 C++ 不同，`args[0]`它不包含应用程序名称。

所以如果你这样做：

```
application.exe arg1 arg2 arg3 
```

然后：

```
args[0] = arg1
args[1] = arg2
args[2] = arg3 
```

如果您只传递一个参数，则可以作为`args[0]`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T13:53:41.843

C:\application.exe 字符串参数

# php - php 5.3.2 - $_get $_post 不工作

> ID：12998417
> 
> 赞同：-4
> 
> 时间：2012-10-21T13:52:26.013
> 
> 标签：php, apache, post, get, localhost

我在我的本地主机上运行一个 apache 服务器，支持 php 和 mysql。唯一的问题是，那`$_GET`根本`$_POST`不起作用。

这是我的 html 文件：

```
<html>
<body>
<form action="message.php" method="GET">
Enter your message here: <input type="text" name="msg" size="30">
<input type="submit" value="Send">
</form>
</body>
</html> 
```

这是我的 message.php 文件：

```
<?php
$input = $_GET('msg');
echo "$input";
?> 
```

如果我在 html 的文本输入字段中键入“blablabla”，它会将我重定向到 [localhost]/message.php?msg=blablabla，这很好，但 php 给了我一个空白页面。我检查了 [localhost]/message.php?msg=blablabla 的源代码，但它只有一个空白部分和一个空白部分。

我犯了什么错误还是这是一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T13:53:46.870

你用`$_GET`错了方法。`$_GET`是一个数组。所以你必须以这种方式使用它：

```
$_GET['msg']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T13:54:08.787

```
$input = $_GET('msg'); 
```

↓</p>

```
$input = $_GET['msg']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:12:49.740

if you want to test results in array to use,

```
print_r($_POST); //method post
print_r($_GET); //method get
print_r($_SERVER); //all variable server 
```

Method POST and GET not function, that variable array so you can not use () but $bla[].

```
echo $_GET['msg']; 
```

# javascript - 如何在下拉菜单中设置值

> ID：12998422
> 
> 赞同：5
> 
> 时间：2012-10-21T13:53:03.390
> 
> 标签：javascript, drop-down-menu

我有那个代码：

```
 </script>
<!-- End HTML Area -->
</div>
</td>
</tr>
<tr>
<td height='47' colspan='4'></td>
<td colspan='13'  valign='top' align='right'>
<table cellpadding='0' cellspacing='0' cols='1'  class='PSGROUPBOXWBO'  width='934'>
<tr><td class='PSGROUPBOXLABEL'  align='right'><a name='DERIVED_RC_IRSL_MT_TRIPLE_GB' id='DERIVED_RC_IRSL_MT_TRIPLE_GB' tabindex='-1' href="javascript:submitAction_win6(document.win6,'DERIVED_RC_IRSL_MT_TRIPLE_GB');"><img src='/cs/crmprod/cache/PT_COLLAPSE_HEB_1.gif' alt='הסתרת הנתונים' title='הסתרת הנתונים' border='0' /></a>&nbsp;סיווג פניה לאחר טיפול בלקוח&nbsp;</td></tr>
<tr><td width='932'>
<table  id='ACE_width' border='0' cellpadding='0' cellspacing='0' cols='10' width='932' class='PSGROUPBOX' style='border-style:none' >
<tr>
<td width='0' height='4'></td>
<td width='70'></td>
<td width='3'></td>
<td width='246'></td>
<td width='41'></td>
<td width='3'></td>
<td width='247'></td>
<td width='49'></td>
<td width='3'></td>
<td width='270'></td>
</tr>
<tr>
<td height='4' colspan='3'></td>
<td rowspan='2'  valign='top' align='right'>
<select name='MT_CASE_EXTRA_MT_CAT_SEQ_NUM' id='MT_CASE_EXTRA_MT_CAT_SEQ_NUM' tabindex='360' size='1'  class='PSDROPDOWNLIST' style="width:207px; " onchange="if (document.readyState == 'complete') submitAction_win6(this.form,this.name);" >
<option value="0" selected='selected'></option>
<option value="21">test</option>
<option value="23">test2</option>
<option value="64">test3</option>
<option value="41">test4</option>
<option value="61">test5</option>
<option value="141">test6</option>
<option value="22">test7</option>
<option value="63">test8</option>
<option value="24">test9</option>
</select> 
```

我尝试编写 JavaScript 代码。当用户将其复制+粘贴到浏览器中的地址字段时，我想要的值将在菜单中自动选择。

这是我所做的：

```
javascript:function GetSelectedItem() {     
    var e = document.getElementById("selected24");
    var strSel = "The Value is: " + e.options[e.selectedIndex].value + " and text is: " + e.options[e.selectedIndex].text;
    alert(strSel);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T14:10:07.777

相关问题：[如何使用 javascript 以编程方式设置选择框元素的值？](https://stackoverflow.com/questions/78932/how-do-i-programatically-set-the-value-of-a-select-box-element-using-javascript)

如果你想设置`<select>`元素的选定值，你应该这样做：

```
var newValue = 24; // or whatever
document.getElementById('MT_CASE_EXTRA_MT_CAT_SEQ_NUM').value = newValue; 
```

# python - Remove xticks in a matplotlib plot?

> ID：12998430
> 
> 赞同：408
> 
> 时间：2012-10-21T13:53:56.133
> 
> 标签：python, matplotlib, plot

I have a semilogx plot and I would like to remove the xticks. I tried:

```
plt.gca().set_xticks([])
plt.xticks([])
ax.set_xticks([]) 
```

The grid disappears (ok), but small ticks (at the place of the main ticks) remain. How to remove them?

* * *

## 回答 #1

> 赞同：632
> 
> 时间：2012-10-21T14:05:20.147

The [`plt.tick_params`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.tick_params) method is very useful for stuff like this. This code turns off major and minor ticks and removes the labels from the x-axis.

Note that there is also [`ax.tick_params`](https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.tick_params.html#matplotlib.axes.Axes.tick_params) for `matplotlib.axes.Axes` objects.

```
from matplotlib import pyplot as plt
plt.plot(range(10))
plt.tick_params(
    axis='x',          # changes apply to the x-axis
    which='both',      # both major and minor ticks are affected
    bottom=False,      # ticks along the bottom edge are off
    top=False,         # ticks along the top edge are off
    labelbottom=False) # labels along the bottom edge are off
plt.show()
plt.savefig('plot')
plt.clf() 
```

![enter image description here](../Images/44adec315fa1eff3f9b5de3f42b65e71.png)

* * *

## 回答 #2

> 赞同：207
> 
> 时间：2014-01-24T00:38:53.697

Not exactly what the OP was asking for, but a simple way to disable all axes lines, ticks and labels is to simply call:

```
plt.axis('off') 
```

* * *

## 回答 #3

> 赞同：137
> 
> 时间：2016-09-20T15:39:22.357

Alternatively, you can pass an empty tick position and label as

```
# for matplotlib.pyplot
# ---------------------
plt.xticks([], [])
# for axis object
# ---------------
# from Anakhand May 5 at 13:08
# for major ticks
ax.set_xticks([])
# for minor ticks
ax.set_xticks([], minor=True) 
```

* * *

## 回答 #4

> 赞同：86
> 
> 时间：2015-11-14T10:56:26.587

Here is an alternative solution that I found on the [matplotlib mailing list](http://matplotlib.1069221.n5.nabble.com/turning-off-tick-marks-tp27160p27162.html):

```
import matplotlib.pylab as plt

x = range(1000)
ax = plt.axes()
ax.semilogx(x, x)
ax.xaxis.set_ticks_position('none') 
```

![graph](../Images/9e5be198e1239229609ecba3d053e24a.png)

* * *

## 回答 #5

> 赞同：50
> 
> 时间：2012-10-21T16:37:39.387

There is a better, and simpler, solution than the one given by John Vinyard. Use `NullLocator`:

```
import matplotlib.pyplot as plt

plt.plot(range(10))
plt.gca().xaxis.set_major_locator(plt.NullLocator())
plt.show()
plt.savefig('plot') 
```

Hope that helps.

* * *

## 回答 #6

> 赞同：32
> 
> 时间：2013-11-11T21:09:54.727

Try this to remove the labels (but not the ticks):

```
import matplotlib.pyplot as plt

plt.setp( ax.get_xticklabels(), visible=False) 
```

[example](http://matplotlib.org/examples/pylab_examples/shared_axis_demo.html)

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2018-06-11T15:12:38.560

This snippet might help in removing the xticks only.

```
from matplotlib import pyplot as plt    
plt.xticks([]) 
```

This snippet might help in removing the xticks and yticks both.

```
from matplotlib import pyplot as plt    
plt.xticks([]),plt.yticks([]) 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2020-06-12T11:07:56.763

Those of you looking for a short command to switch off all ticks and labels should be fine with

```
plt.tick_params(top=False, bottom=False, left=False, right=False,
                labelleft=False, labelbottom=False) 
```

which allows type `bool` for respective parameters since version matplotlib>=2.1.1

For custom tick settings, the docs are helpful:

[https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.tick_params.html](https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.tick_params.html)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-04-18T06:53:45.973

```
# remove all the ticks (both axes), and tick labels on the Y axis
plt.tick_params(top='off', bottom='off', left='off', right='off', labelleft='off', labelbottom='on') 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-09-30T12:14:53.423

Modify the following rc parameters by adding the commands to the script:

```
plt.rcParams['xtick.bottom'] = False
plt.rcParams['xtick.labelbottom'] = False 
```

A sample matplotlibrc file is depicted in [this section](https://matplotlib.org/tutorials/introductory/customizing.html?highlight=matplotlibrc) of the matplotlib documentation, which lists many other parameters like changing figure size, color of figure, animation settings, etc.

# assembly - 检查组装中的堆栈

> ID：12998436
> 
> 赞同：0
> 
> 时间：2012-10-21T13:54:36.557
> 
> 标签：assembly, stack, inspect

我正在内联汇编中推送一些 int 值：

```
_asm
  {
  mov eax,i3  
  push eax
  mov eax,ii  
  } 
```

后来我检索这个值做弹出：

```
_asm
  {
  pop eax
  mov ii,eax  
  pop eax
  mov i3,eax  
  } 
```

我想在不弹出的情况下检查我的堆栈。我需要重新排列或重新审视一些值。完成后我可以恢复堆栈。

我对asm很生疏。有没有类似的东西：

```
mov ii,esp+4 
```

那会移动下一个（不是当前的）堆栈元素吗？我只是猜测。我需要这段代码在 32 位 win 和 64 win 环境中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:21:43.463

> 我想在不弹出的情况下检查我的堆栈。我需要重新排列或重新审视一些值。

这就是堆栈分配的变量在函数中的作用方式——因此函数序言通常后面跟着一个`sub esp, x`where`x`是要分配的空间量。

因此，C（和 C++）中的变量访问是检查堆栈。或者，如果您知道编译器如何分配变量，您可以从您的内联 ASM 中读取它们。

实现您想要做的事情的一种方法可能是将输入变量和输出变量都列为内联汇编的操作数。这篇[osdev](http://wiki.osdev.org/Inline_Assembly#Input_Operands)文章很好地解释了它。这样，无论编译器如何在编码更改和优化标志之间重新排序堆栈，您的汇编器仍然可以工作。

或者，如果您自己编写整个函数，您可以将堆栈的值加载到给定地址，如下所示：

```
mov eax, DWORD PTR [ebp-8] 
```

这将加载`eax`位于 的内存地址的值`ebp-8`。

# android - 在android中设计xml

> ID：12998438
> 
> 赞同：0
> 
> 时间：2012-10-21T13:54:50.800
> 
> 标签：android

嗨，我是 android 新手，我正在尝试找到使用 xml 的方式。我正在编写自己的自定义 listView 到目前为止我所做的是一个图像视图，靠近它 3 个 textViews，它工作正常，事情是现在我需要在每个 textView 旁边放置 3 个 textField，但我使用了 linearLayout，所以它不会让我把它们放在附近。当我将线性更改为相对时，所有 textViews 都丢失了。我知道我在做某事我猜方向或类似的东西是错误的。我会告诉你我到目前为止所做的事情，希望它不会含糊不清。谢谢你的时间。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dip"
        android:src="@drawable/clndr" />

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="0dip"
        android:layout_weight="1"
        android:layout_height="fill_parent">

        <TextView
            android:id="@+id/toptext"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="0.93"
            android:gravity="center_vertical" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1" 
            android:id="@+id/bottomtext"
            android:singleLine="true"
            android:ellipsize="marquee"
        />
       <TextView
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1" 
            android:id="@+id/bt"
            android:singleLine="true"        
       />       

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:45:53.853

尝试这个。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView1"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="22dp"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView1"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="22dp"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:28:48.867

我假设你想把它们水平地放在一起？改变这个

```
 android:orientation="vertical" 
```

至

```
 android:orientation="horizontal" 
```

您可以使用线性布局来实现这一点。更优选的方式是使用单个相对布局。如果您想实现它，请查看[文档。](http://developer.android.com/guide/topics/ui/layout/relative.html)

# php - 如何剪掉很长的 Doctrine 注释？

> ID：12998447
> 
> 赞同：2
> 
> 时间：2012-10-21T13:55:16.523
> 
> 标签：php, annotations, doctrine-orm

我有一个 216 列注释，很难阅读，而且一点也不好看。

```
 * @ORM\Table(name="tree", uniqueConstraints={@ORM\UniqueConstraint(name="name_u", columns={"name"})}, indexes={@ORM\Index(name="userid_i", columns={"user_id"}), @ORM\Index(name="children_i", columns={"children"})}) 
```

你知道在不杀死它的情况下打破它的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:09:33.293

对于那些来这里的人来说，这种方式很有效：

```
 * @ORM\Table(
 *      name="tree",
 *      uniqueConstraints={@ORM\UniqueConstraint(name="name_u", columns={"name"})},
 *      indexes={
 *          @ORM\Index(name="userid_i", columns={"user_id"}),
 *          @ORM\Index(name="children_i", columns={"children"})
 *      }
 * ) 
```

# java - 如何在 JAVA 中触发 KeyPressed 事件以进行单元测试

> ID：12998448
> 
> 赞同：2
> 
> 时间：2012-10-21T13:55:43.490
> 
> 标签：java, groovy, keyevent

好的，所以我正在尝试对一些 GUI 元素进行单元测试并断言该按钮应该做什么，发生。

但是，我现在想编写一个单元测试来测试同一个按钮的助记符部分是否与按钮单击相同。我已经断断续续地搜索了几天，并尝试了很多东西。

我尝试使用来自 awt 库的 Robot：

```
robot.keyPress(KeyEvent.VK_C);
robot.keyRelease(KeyEvent.VK_C); 
```

没有触发任何事件，最近我尝试了这个 EventQueue 示例：

```
final Toolkit toolkit = Toolkit.getDefaultToolkit();
final EventQueue eventQueue = toolkit.getSystemEventQueue();
gPane = new SwingBuilder();
panel = new MainMenuPanel();
panel.displayMainMenu(gPane); 

@Test
void ShouldMakeRaceGenderPanelVisibleKeyPress(){
eventQueue.postEvent( new KeyEvent(panel.gPane.mainM, KeyEvent.KEY_PRESSED, System.currentTimeMillis(), 0, KeyEvent.VK_C ).getKeyCode());

    assertThat panel.gPane.mainM.isVisible(), is(false);
    assertThat panel.gPane.raceGender.isVisible(), is(true);
} 
```

我知道 GUI 测试可能很棘手，并且有一些工具可以模拟用户交互，但是模拟或触发单个 KeyEvent 真的那么难吗？

欢迎任何帮助，也欢迎任何推荐的 UI 测试工具。

谢谢

注意：这是 Java 和 Groovy 的组合，所以我使用 SwingBuilder 来构建我的 UI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:06:29.053

你说：

> 我有一个 JButton，其文本为“创建”，助记符设置为“C”或代码 67。...
> 但是，我现在想编写一个单元测试来测试同一个按钮的助记符部分是否与按钮相同点击。...
> 
> 我尝试使用来自 awt 库的 Robot：

```
robot.keyPress(KeyEvent.VK_C);
robot.keyRelease(KeyEvent.VK_C); 
```

也许问题是由于您没有考虑到 JButton 助记符是 alt 键组合，因此您的机器人代码可能必须反映这一点：

```
robot.keyPress(KeyEvent.VK_ALT);
robot.keyPress(KeyEvent.VK_C);

// possibly want a small Thread.sleep(...) here?

robot.keyRelease(KeyEvent.VK_C);
robot.keyRelease(KeyEvent.VK_ALT); 
```

# java - 基本属性类型不应该是 IDao - intellij 消息

> ID：12998450
> 
> 赞同：1
> 
> 时间：2012-10-21T13:55:44.830
> 
> 标签：java, spring, hibernate, intellij-idea

我在我的实体对象中收到以下消息？

> 基本属性类型不应该是 IDao

像这样使用它的地方：

```
@Entity
@Table
public final class MyEnity {

    @Resource(name = "Dao")
    private IDao dao; 
```

我知道这个名字不好，但是将我的 Dao（用存储库注释）注入到我的被注释为休眠实体的 Domain 对象有什么问题？而IDao是Dao类实现的接口...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T13:58:28.833

`IDao`似乎是一个被注入实体的处理元素，您不打算保留它。如果是这样，您应该将其标记为`transient`以便 ORM 在实体上的 CRUD 操作期间将忽略它。

```
@Resource(name = "Dao")
private transient IDao dao; 
```

顺便说一句，我不认为您的实体是[`@Configurable`](http://vikdor.blogspot.in/2012/08/using-configurable-to-inject-resources.html). 你打算如何`dao`注入它？ORM 将使用默认构造函数创建一个新的类型对象，`MyEntity`并调用 setter 来设置数据库中的值。您`IDao dao`不会被注入，因为这样的实例不是弹簧管理的 bean。您必须标记`MyEntity`为`@Configurable`使其受弹簧管理，以便使用`new`运算符创建的实例将获得资源注入。

# javascript - 对谷歌地图 api 的 Jquery ajax 调用给出了 syntaxError: invalid label

> ID：12998452
> 
> 赞同：1
> 
> 时间：2012-10-21T13:56:00.253
> 
> 标签：javascript, ajax, json, jquery

我正在使用 jsonp 对 google map api v3 执行 ajax 调用，但它总是进入错误函数，并且在 firefox 控制台日志中出现错误

SyntaxError：无效标签“结果”：[

通过单击它，我可以看到我在浏览器中获得了所有正确的信息，但由于某些原因，我收到了此语法错误消息。

阿贾克斯调用：

```
 $.ajax({
        url: "https://maps.googleapis.com/maps/api/geocode/json",
        data: { latlng: latitude +","+longitude, sensor: "true" },
        dataType: "jsonp",
        success: function (json) {
            alert(json.d);
        },
        error: function () {
            alert("Hit error fn!");
        }
    }); 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:59:40.267

代替

```
 dataType: "jsonp", 
```

和

```
 dataType: "json", 
```

因为您正在执行 json 请求，而不是 jsonp 请求。

而且你不应该把东西放进去`json.d`。您最好提醒（或 console.log）`json`或`json.results`.

请注意，您不得在包含地图的页面之外使用 Google 的地理编码 API（不接受您的来源）。

# database-design - 3NF表的验证

> ID：12998454
> 
> 赞同：0
> 
> 时间：2012-10-21T13:56:06.683
> 
> 标签：database-design, normalization

我设计了这张表并想知道它是否是 3NF，我认为这是因为所有非主键 freld 都不会传递地依赖于主键，但如果我遗漏了某些东西 Patient_Id：ID （ PK) Patient_name：姓名 Patient_DOB：日期 Patient_Gender：GenderType Patient_address：地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:04:39.680

它看起来很好，除了`Patient_address`应该存储在不同表中的列。这是一个例子：

```
Patients(ID, FirstName, LastName, DateOfBirth, MainAddressId);
Addresses(Id, Street, Number, ..., PatientId); 
```

这样，每位患者可以拥有多个地址，而您仍然可以将一个地址设置为主地址（在 MainAddressId 中）。

# r - R igraph 将平行边转换为权重属性

> ID：12998456
> 
> 赞同：14
> 
> 时间：2012-10-21T13:56:17.087
> 
> 标签：r, igraph, edges, weighted-graph

我正在为 R 使用 igraph。我的图基于一个包含平行边的边列表（多个边具有相同的源和目标）。我想将这些平行边转换为边属性权重。有没有办法做到这一点？

如果没有简单的方法。如何识别这些平行边缘？

```
 duplicated(E(net)) 
```

不返回单个重复项。我想它正在寻找重复的边缘 id。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-21T21:05:31.707

您还可以使用`E(graph)$weight <- 1`follow`simplify(graph, edge.attr.comb=list(weight="sum"))`为每条边分配 1 的权重，然后在对权重求和时将多个边折叠为单个边。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T14:32:24.343

似乎将具有平行边的未加权图导出到邻接矩阵中`igraph`会创建一个权重列表，其中边的数量作为权重，然后可以再次读取：

```
library("igraph")
E <- matrix(c(1,1,1,2,2,2),3,2)
G <- graph.edgelist(E)

G2 <- graph.adjacency(get.adjacency(G),weighted=TRUE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-12T09:20:35.467

如果您想在不向图形添加权重属性的情况下获取图形的平行边数，可以使用以下函数：

```
duplicated <- function(graph){
  g_local <- graph
  E(g_local)$weight <- 1
  g_simp <- simplify(g_local, edge.attr.comb=list(weight="sum"))
  w <- E(g_simp)$weight
  return(sum(w-1))
} 
```

# c# - 从数据集中获取数据

> ID：12998457
> 
> 赞同：1
> 
> 时间：2012-10-21T13:56:18.040
> 
> 标签：c#, winforms, gridview, dataset, datasource

我已经使用`Add new data source`. 然后我创建`BindingSource bs`并使用 GetData 方法填充数据（ShoppingMallDataSet 是新添加的数据集）

```
void GetData(){
    using(ShoppingMallDataSet smds = new ShoppingMallDataSet())
    {
         using (var conn = new SqlConnection(connection_string))
         {
              using (var adapter = new   ShoppingMallDataSetTableAdapters.TClientTableAdapter() { Connection = conn })
              {
                  adapter.Fill(smds.TClient);
                  bs.DataSource = smds.TClient;
              }
         }
    } 
} 
```

我设置了datagrid数据源的值，`rgv.DataSource = bs`然后调用了这个方法GetData()。在调试器中 bs.DataSource 不是 null 并且它有数据。但是gridview没有列，没有数据（但同时数据源不为空）

```
BindingSource bs = new BindingSource();
.....
rgv.DataSource = bs;
GetData();
....... // rgv doesn't have any data but datasource is not null and has the same value as bs 
```

是有问题还是获取数据的方式不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:30:27.407

`BindingSource`有两个属性：

*   **DataSource**：您必须将数据集分配给此属性
*   **DataMember**：您必须为该属性分配数据集的表名

您必须设置`DataMember`除了`DataSource`

```
 bs.DataMember = "TClient"; 
```

# php - php mail 有效，但我无法将邮件发送到公司 webmail

> ID：12998460
> 
> 赞同：1
> 
> 时间：2012-10-21T13:56:36.583
> 
> 标签：php, apache, email, joomla

我正在尝试在 joomla 网站中设置联系表单模块。联系人模块适用于我的每个个人电子邮件地址，例如 xxxxxxxxxxxx@gmail.com 或 xxxxxxxxxxxx@libero.it 等。但是当我用我客户的公司邮件收件人测试它时，邮件功能无法完成它的工作。

为了获得有关失败的更多信息，我将 mailsender 属性设置为我的个人邮件地址，如下所示：

```
$mailSender->setSender('xxxxxxx@libero.it');
$mailSender->addReplyTo('xxxxxxx@libero.it'); 
```

这就是我得到的：

原始消息是在 2012 年 10 月 21 日星期日 15:05:00 +0200 从 apache@localhost 收到的

----- 以下地址有永久性致命错误 -----

```
info@xxxxxx.it
(reason: 553 5.3.0 <info@xxxxxx.it>... No such user here)
(expanded from: info@xxxxxx.it) 
```

----- 会议记录如下 -----

```
... while talking to [127.0.0.1]:
>>> DATA
<<< 553 5.3.0 <info@xxxxxx.it>... No such user here
550 5.1.1 info@xxxxxx.it... User unknown
<<< 503 5.0.0 Need RCPT (recipient) 
```

在附件中：

```
Reporting-MTA: dns; xxxxxx.yyyyyyy.com
Arrival-Date: Sun, 21 Oct 2012 15:05:00 +0200

Final-Recipient: RFC822; info@xxxxxx.it
Action: failed
Status: 5.3.0
Remote-MTA: DNS; [127.0.0.1]
Diagnostic-Code: SMTP; 553 5.3.0 <info@xxxxxx.it>... No such user here
Last-Attempt-Date: Sun, 21 Oct 2012 15:05:01 +0200 
```

公司的 webmail 似乎不接受来自自己服务器的邮件。我不是电子邮件专家，也不是专家 php 程序员。有任何想法吗？

遵循我的 joomla 模块的部分，其中邮件功能被启动并启动：

```
 $mailSender = &JFactory::getMailer();
$mailSender->addRecipient($recipient);

$mailSender->setSender('xxxxxxxxxxxxx@libero.it');
$mailSender->addReplyTo('xxxxxxxxxxxxx@libero.it');

$mailSender->setSubject('Richiesta informazioni da sito web');
$mailSender->setBody($myMessage);

if ($mailSender->Send() !== true) {
  $myReplacement = '<span style="color: ' . $error_text_color . ';">' . $errorText . '</span>';
  //header("Location: $url",303);
  print $myReplacement;
  return true;
}
else {
  $myReplacement = '<span style="color: '.$thanksTextColor.';">' . $pageText . '</span>';
  print $myReplacement;
  return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:21:39.070

您正在通过 localhost 中继邮件（您正在与 交谈`127.0.0.1`），因此您的本地 sendmail 安装可能认为它应该为您的域处理邮件，而不仅仅是中继。系统上没有调用用户，`info`因此它返回错误`550 No such user here`。

检查`/etc/mail/local-host-names`并查看域是否在此处列出，是否将其注释掉并使用 .restart 重新启动 sendmail `service sendmail restart`。

还要验证您是否允许中继本地主机`/etc/mail/access`，我的文件在 CentOS 5.8 和 Sendmail 8.13.8 上看起来像这样

```
Connect:localhost.localdomain           RELAY
Connect:localhost                       RELAY
Connect:127.0.0.1                       RELAY 
```

另一种选择是使用真正的邮件服务器作为 SMTP 中继而不是 sendmail on `localhost`- 我不能说它对于有问题的域是什么，但可能是`smtp.example.com`或`mail.example.com`. 另一个需要注意的是，此服务器可能需要身份验证才能从您的 Web 服务器中继邮件 - 您需要与您的管理员核实并相应地更新您的 PHP 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:59:21.897

让我看看我是否明白你告诉我的：1）托管我的 joomla 网站的服务器有一个管理邮件发送请求的邮件“引擎”；2) 鉴于收件人 info@xxxxxx.it 位于收集它调用 127.0.0.1 的请求的同一邮件服务器上；

3）找不到名为info的用户；

事实上，我对客户的公司网络邮件和网络服务器没有任何控制权。

我可以屏蔽请求以不显示它来自本地主机吗？还有其他解决方案吗？对不起，我的英语不好....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:05:12.243

这可能是因为发件人的电子邮件不是您尝试发送电子邮件的邮件列表的注册成员。一些邮件列表只接受来自注册为成员的电子邮件地址的电子邮件（可以在允许的发件人中管理，在邮件列表的选项中）。

# git - Git 存储库中的多个项目

> ID：12998463
> 
> 赞同：1
> 
> 时间：2012-10-21T13:57:23.200
> 
> 标签：git

我有一个核心项目（一个网络应用程序），它有几个相关的服务。

这些服务都读取核心项目的数据库，因此无论何时更改 db 模式，都必须更新所有项目。有时，当向核心添加新功能时，一些服务也需要更改，但通常情况并非如此。这些服务与数据库模式紧密集成，不能在其他应用程序中重用。

此外，还有另一个项目只是核心 Web 应用程序项目上的本机 OS 应用程序皮肤，功能集略有减少（因此核心 Web 应用程序中的任何新功能都必须出现在本机应用程序中是不正确的）。但是，无论何时发生数据库架构更改，它肯定都必须更新。

围绕这样的项目构建 git repo(s) 的推荐方法是什么？我在想核心项目和服务应该一起存在于一个 repo 中，但是那里也有本机应用程序感觉很奇怪（按照这种逻辑，当我们得到一个 iPad 应用程序时，它也会去那里吗？？当时似乎是一个巨大的混乱回购）。

要记住的一件事是，我想远离任何复杂的工作流程，因为很多人不熟悉 git。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:27:33.643

> 要记住的一件事是，我想远离任何复杂的工作流程，因为很多人不熟悉 git。

在这种情况下，坦率地说，我建议您将所有内容都保存在同一个存储库中。尽管随着 git 的不断发展，子模块变得更容易使用，但对于刚接触 git 的人来说，它们仍然是一个非常常见的困惑源。

如果您小心地从存储库中排除生成的大型二进制文件，您可能几乎不会注意到拥有一个还包含 iPad 应用程序等的存储库所使用的额外空间/带宽，因为 git 的对象存储非常高效。

# visual-studio-2010 - CreateWindow 返回空错误

> ID：12998466
> 
> 赞同：0
> 
> 时间：2012-10-21T13:57:48.657
> 
> 标签：visual-studio-2010, visual-c++, win32gui

我正在使用 win32 api 开发应用程序，但是我遇到了问题。我编写了代码来创建一个简单的窗口，然后创建附加到该窗口的简单按钮，最后创建简单的菜单资源并将其设置为窗口：

```
#include<Windows.h>
#include"resource.h"

#define DEFAULT_BUTTON_WIDTH 100
#define DEFAULT_BUTTON_HEIGHT 20

HMENU Menu;
HWND Window;
HWND bCreateWall;

void WMCommand(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    if (lParam == (LPARAM)bCreateWall) MessageBox (Window, (LPCWSTR)"You Pressed bCreateWall", (LPCWSTR)"Congrats!", MB_OK);
    else if (wParam == ID_FILE_EXIT) PostQuitMessage(0);
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam){
    switch(msg){
    case WM_DESTROY:PostQuitMessage(0);break;
    case WM_COMMAND: WMCommand (hWnd, msg, wParam, lParam); break;
    }
    return (DefWindowProc(hWnd,msg,wParam,lParam));
}

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevious, LPSTR lpCmdString,int CmdShow)
{
    WNDCLASS wc;
    MSG msg;
    wc.cbClsExtra = 0;
    wc.cbWndExtra = 0;
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.hCursor = LoadCursor (NULL, IDC_ARROW);
    wc.hIcon = LoadIcon (NULL, IDI_APPLICATION);
    wc.hInstance = hInstance;
    wc.lpfnWndProc = WndProc;
    wc.lpszClassName = (LPCWSTR)"ME";
    wc.lpszMenuName = NULL;
    wc.style = CS_OWNDC | CS_HREDRAW | CS_VREDRAW;

    if (!RegisterClass(&wc))
    {
        MessageBox (NULL,(LPCWSTR)"Error: Cannot Register Class", (LPCWSTR)"ERROR!", MB_OK);
        return (0);
    }

    //create window
    Window = CreateWindow((LPCWSTR)"ME",(LPCWSTR) "Map Editor", WS_OVERLAPPEDWINDOW | WS_VISIBLE,0, 0, 640, 480, NULL, NULL, hInstance, NULL);
    if (Window == NULL)
    {
        MessageBox (NULL,(LPCWSTR)"Error: Failed to Create Window", (LPCWSTR)"ERROR!", MB_OK);
        return (0);
    }

    //create button to create wall
    bCreateWall = CreateWindow((LPCWSTR)"BUTTON", (LPCWSTR)"Create Wall", WS_CHILD | WS_VISIBLE, 0, 100, DEFAULT_BUTTON_WIDTH, DEFAULT_BUTTON_HEIGHT, Window,NULL, hInstance, NULL);
    if (bCreateWall== NULL)
    {
        MessageBox (NULL, (LPCWSTR)"Error: Failed to Create Window",(LPCWSTR) "ERROR!", MB_OK);
        return (0);
    }

    Menu = LoadMenu (hInstance, MAKEINTRESOURCE(IDR_MENU));
    SetMenu (Window, Menu);

    while (1)
    {
        if (PeekMessage (&msg, NULL, 0, 0, PM_REMOVE))
        {
            if (msg.message == WM_QUIT) break;
            TranslateMessage(&msg);
            DispatchMessage (&msg);
        }
    }

    return 1;
} 
```

当它运行时，窗口是空白的，菜单和按钮不会被添加。

> 方法 createWindow 返回 null

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:07:59.993

首先，我建议决定您的代码格式。在我看来，您使用了来自不同来源的代码片段。如果我是你，我会坚持使用默认的 VS 格式。像这样的一个衬垫：

```
if (lParam == (LPARAM)bCreateWall) MessageBox (Window, L"You Pressed bCreateWall", L"Congrats!", MB_OK); 
else if (wParam == ID_FILE_EXIT) PostQuitMessage(0); 
```

使代码非常难以阅读。为什么不对每个代码段使用单行代码块：

```
if(lParam == (LPARAM)bCreateWall) 
{
    MessageBox (Window, L"You Pressed bCreateWall", L"Congrats!", MB_OK); 
}
else if(wParam == ID_FILE_EXIT) 
{
    PostQuitMessage(0); 
} 
```

此外，大括号是混合的，这无助于分析代码。分隔符之间的间距也不一致。格式要一致，不要马虎；这是良好编程实践的一部分。

当您运行您的应用程序时，您会看到一个消息框，但您只会看到一个乱码。

您的问题是您正在编译使用 UNICODE 字符的项目集，但所有字符串都是 ANSI。您只需将 ANSI 字符串转换为 LPWSTR，这还不足以转换字符串。您的代码无法创建按钮，因为您最终使用 (LPWSTR)"BUTTON" 的名为“啂呔乏”的类不存在。

使用 _T("string")、TEXT("string") 将所有字符串转换为通用格式或仅使用 UNICODE 字符串。将所有 (LPCWSTR) 替换为 L 继续引用的字符串：L"string" 并重试。

# android - 我可以使用 INJECT_EVENTS 来自动化另一个应用程序吗？

> ID：12998473
> 
> 赞同：0
> 
> 时间：2012-10-21T13:58:20.207
> 
> 标签：android, root

我已经看到（但对它一无所知） android.permission.INJECT_EVENTS 权限。如果我有一个根设备，我可以使用它编写一个应用程序来自动化另一个应用程序吗？或者这是在实际发布的硬件中通常被禁用的东西？还是我对许可意味着什么的印象完全错误？

我只是想知道这是否值得花时间学习。

如果我能做到，目标是在 S800c 相机上自动化尼康的相机应用程序。他们烦人地忽略了在此设备上的相机 API 实现中提供所有相机功能，但如果我希望我可以自动化相机应用程序，我也许可以这样使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:41:05.787

> 如果我有一个根设备，我可以使用它编写一个应用程序来自动化另一个应用程序吗？

仅当您正在创建自己的固件时。`INJECT_EVENTS`是`signature`级别权限，意味着请求权限的 APK 必须由与固件签名相同的签名密钥签名。拥有 root 对此没有任何影响，除了增加您运行替代固件的能力（如果该设备有任何固件）。

除此之外，您还必须追踪 Android 中通过`INJECT_EVENTS`.

> 他们烦人地忽略了在此设备上的相机 API 实现中提供所有相机功能

这听起来不太好。如果你不介意我问，你具体指的是什么？

# java - json 解析器不能在 froyo 和姜饼中工作，但可以在 ics 上工作

> ID：12998477
> 
> 赞同：1
> 
> 时间：2012-10-21T13:58:44.560
> 
> 标签：java, android, mobile

如果有可选参数传递给它，我有一个发送 Httppost 的 JSON Parser 类。

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, Object... params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        if(params.length > 0){
            httpPost.setEntity(new UrlEncodedFormEntity((List<? extends NameValuePair>)params[0]));
        }

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();       

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

}

这适用于我的 ICS 和 JellyBean 设备，但不适用于 Froyo 和 Gingerbread。错误信息是：

```
10-21 13:49:10.348: E/Buffer Error(471): Error converting result java.lang.NullPointerException
10-21 13:49:10.348: E/JSON Parser(471): Error parsing data org.json.JSONException: End of input at character 0 of 
```

有人可以帮我吗？froyo 和姜饼是否只支持 httpGet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:10:13.447

首先检查您调用此 json 字符串的文件是否存在会破坏 json 格式的无效字符。当我从 php 文件中获取数据时遇到同样的问题时，这发生在我身上，我的 php 文件发送了一些额外的错误，导致解析到 jSONObject 失败

```
 try {
    jObj = new JSONObject(json);
    } catch (JSONException e) {
    Log.e("JSON Parser", "Error parsing data " + e.toString());
    } 
```

所以这就是我在那里出错的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:22:03.217

有趣的是，当我尝试在 ubuntu 的 Froyo 和姜饼模拟器中测试它时，它可以工作。但是，当我尝试在 Windows 中执行此操作时，它根本不起作用。所以这是正式关闭:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:28:12.377

尝试将其放入 asynctask

例子

```
private class PermissionEnableAsyncTask extends AsyncTask<String, Void, Object[]>
{
    private ProgressDialog mProgressDialog = null;
    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
        mProgressDialog = new ProgressDialog(PermissionList.this);
        mProgressDialog.setMessage(Constant.MSG_PROGRESSBAR_WAITING);
        mProgressDialog.setCancelable(false);
        mProgressDialog.setCanceledOnTouchOutside(false);
        mProgressDialog.show();
    }

    @Override
    protected Object[] doInBackground(String... params) 
    {
        try
        {
            String Url = "your URL";
                    //your logic
        return yourlogic;
        }
        catch(Exception e)
        {
            e.printStackTrace();
            return null;    
        }
    }

    @Override
    protected void onPostExecute(Object[] object)
    {
        super.onPostExecute(object);
        mProgressDialog.dismiss();
        try 
        {
                            your logic          
                    }
        catch(Exception e) 
        {
            e.printStackTrace();
        }
    }
} 
```

# java - 如何从 CXF/JAX-RS 中的 JSON 响应中删除命名空间前缀？

> ID：12998480
> 
> 赞同：5
> 
> 时间：2012-10-21T13:58:57.980
> 
> 标签：java, cxf, jax-rs, cxfrs

我有以下由 CXF 使用 JAX-RS 创建的响应：

```
{"ns1.CustomerInformationResponse":{
  "@xsi.type":"ns1:CustomerInformationResponse",
  "ns2.code":"SUCCESS",
  "ns1.customer":{
    "@xsi.type":"ns2:CustomerBaseDTO",
    "ns2.login":"login1"
  }
}} 
```

这是我当前上下文配置的相关部分：

```
<jaxrs:server address="http://${host}:${port}/rest/customer">
  <jaxrs:serviceBeans>
    <ref bean="customerManagementServiceImpl" />
  </jaxrs:serviceBeans>
  <jaxrs:providers>
    <bean class="org.apache.cxf.jaxrs.provider.AegisJSONProvider" />
  </jaxrs:providers>
</jaxrs:server> 
```

我希望收到与上述类似的响应，不带名称空间前缀（即 ns1、ns2 等...）。

我试图添加`org.apache.cxf.interceptor.transform.TransformOutInterceptor`到`cxf:outInterceptors`，但它没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:53:37.930

在您的 beans.xml 中，您可以指定 bean jsonProvider，如下所示。

```
<bean id="jsonProvider" class="org.apache.cxf.jaxrs.provider.AegisJSONProvider">
<property name="ignoreNamespaces" value="true" />
</bean> 
```

现在在上下文配置中调用 jsonProvider，如下所示

```
<jaxrs:server address="http://${host}:${port}/rest/customer">
    <jaxrs:serviceBeans>
        <ref bean="customerManagementServiceImpl" />
    </jaxrs:serviceBeans>
    <jaxrs:providers>
        <ref bean ="jsonProvider" />
    </jaxrs:providers>
</jaxrs:server> 
```

# html - 如何优化网站以在移动设备上很好地显示

> ID：12998481
> 
> 赞同：0
> 
> 时间：2012-10-21T13:59:14.180
> 
> 标签：html, css

这是我在桌面浏览器上的截图

![在此处输入图像描述](../Images/386d7aeaae47f331207768a798bd8f9d.png)

桌面浏览器上的一切看起来都很大。但是当我在移动浏览器上查看时，布局变得非常小。所以我错过了 html/css 代码中的一些东西，因为这个网站基本上我只使用了普通的 html/css 没什么特别的。

谁能指出我？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:03:02.397

确保在 . 中设置以下视口元标记`<head>`，否则文本会太小：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:01:35.953

[`@media`当浏览器窗口通过查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)低于特定大小时调整元素大小。

```
@media screen and (max-width: 500px) {
  div {
    width: 400px;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:02:50.720

实际上，网站的移动视图优化是一个详细而广泛的主题，但对于您的情况，我的建议是稍微增加您的字体。

# ruby-on-rails - 使用 RAILS 访问 Amazon S3 上的私有文件

> ID：12998483
> 
> 赞同：1
> 
> 时间：2012-10-21T13:59:34.580
> 
> 标签：ruby-on-rails, facebook, amazon-s3, private

我想让我网站的用户看到一个特殊的“图像/视频/HTML”，但前提是他们通过我的 Rails 网站上的 facebook 连接登录...

我想使用 Amazon S3 来存储媒体。我的问题是如何仅在我的用户登录后才授予他们有限的访问权限？一旦他们拥有“图像/视频/HTML”的 URL，我不希望他们能够访问它，除非他们在我的网站上使用 facebook 登录..

另外，如果我想使用 Amazon Cloudfront，我可以继续使用这种私有站点吗？

这是仅将我的域列入白名单的起点...但我想确保用户已通过 fb connect 登录，以便为他们提供适当的资源...

[https://gist.github.com/3716433](https://gist.github.com/3716433)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:56:29.547

我认为这取决于您如何在应用程序中包含 S3 资产。如果您使用回形针，以下是说明：

[https://github.com/thoughtbot/paperclip/wiki/Restricting-Access-to-Objects-Stored-on-Amazon-S3](https://github.com/thoughtbot/paperclip/wiki/Restricting-Access-to-Objects-Stored-on-Amazon-S3)

这是使用 aws-sdk gem 处理此问题的另一个问题：

[如何在 S3 中存储数据并允许用户使用 rails API / iOS 客户端以安全的方式访问？](https://stackoverflow.com/questions/10811017/how-to-store-data-in-s3-and-allow-user-access-in-a-secure-way-with-rails-api-i)

# perl - Can I create a hash key in perl like this (lowerR-10,UpperR-12) => 1

> ID：12998490
> 
> 赞同：2
> 
> 时间：2012-10-21T13:59:58.453
> 
> 标签：perl, hash, perl-hash

I want to create a hash key in perl hash key that looks like this (lowerR-10,UpperR-12) => 1. Here the key is (lowerR-10,UpperR-12) and its value is 1.

Actually I have a file like this. I have to find the overlap among the the elements.

A 10 12

A 10 15

Whose output will be

A 10 12 2

A 12 15 1

The last column shows the overlap among the elements. I would like to save the count in a hash for which I think the key should be like (lowerR-10,UpperR-12) this. If anyone can give some new suggestion regarding how to save the key it will be great too.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:18:46.623

Maybe the program below will get you close to a solution.

```
#!/usr/bin/perl
use strict;
use warnings;
use Set::IntSpan;
use Sort::Naturally;

my %data;

while (<DATA>) {
    my ($chr, @start_stop) = split; 
    $data{$chr}{$_}++ for $start_stop[0] .. $start_stop[1];
}

for my $chr (nsort keys %data) {
    my %counts;
    while (my ($range_int, $count) = each %{ $data{$chr} } ) {
        push @{ $counts{$count} }, $range_int;  
    }

    for my $count (sort {$a <=> $b} keys %counts) {
        my $set = Set::IntSpan->new(@{$counts{$count}});
        for my $run ($set->sets) {
            printf "%s %-10s count: %s\n", $chr, $run, $count;
        }
    }
    print "\n";
}

__DATA__
chr1    100    500
chr1    25      50
chr1    10       50
chr1    60       80
chr1    12       40
chr1    41       45
chr1     20      45
chr1     48      80
chr1    4   60
chr2    2   40
chr3    4   90
chr1    5   40
chr2    1   30
chr1    6   20
chr4    9   100
chr1    2   20
chr2    2   90
chr1    6   20
chr4    4   30
chr2    4   90
chr3    3   90
chr2    4   90
chr4    3   90
chr2    4   30 
```

It produced this output.

```
chr1 2-3        count: 1
chr1 100-500    count: 1
chr1 4          count: 2
chr1 51-59      count: 2
chr1 61-80      count: 2
chr1 5          count: 3
chr1 46-47      count: 3
chr1 60         count: 3
chr1 48-50      count: 4
chr1 6-9        count: 5
chr1 21-24      count: 5
chr1 41-45      count: 5
chr1 10-11      count: 6
chr1 25-40      count: 6
chr1 12-19      count: 7
chr1 20         count: 8

chr2 1          count: 1
chr2 2-3        count: 3
chr2 41-90      count: 3
chr2 31-40      count: 4
chr2 4-30       count: 6

chr3 3          count: 1
chr3 4-90       count: 2

chr4 3          count: 1
chr4 91-100     count: 1
chr4 4-8        count: 2
chr4 31-90      count: 2
chr4 9-30       count: 3 
```

**Update:** I'll try to explain. The `%counts` hash is created anew for each chromosome from the outer loop. The keys are the counts of each numbered position, say number 42 was seen 5 times. The value for each count is an anonymous array that has all numbers that were seen 5 times.

Set::IntSpan is used to create ranges, (6-8, 21-24, 41-45), from the anonymous array, (which has 6,7,8,21,22,23,24,41,42,43,44,45 as elements in the anon array). The line `for my $run ($set->sets)`, gets each run list for numbers seen 5 times, (6-8, 21-24, 41-45) and then prints them. You can look at the documentation for **[Set::IntSpan](http://search.cpan.org/~swmcd/Set-IntSpan-1.16/IntSpan.pm)** although it doesn't provide many helpful examples, and I've not been able to find any other *good* examples by net search, sorry. But basically, you feed Set::IntSpan ranges of numbers and it can give you the condensed subsets, (6-8, 21-24, etc), or each individual number in a set depending on the Set::IntSpan method you use to access the data held by a IntSpan object.

Hope this clears up some questions you had. :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:43:35.203

Actually I don't think a hash-based approach lends itself well to this problem; it is better to approach it as a list processing problem. I'll describe an approach in Haskell (this could be translated to Perl with only slightly more code).

The general approach is to keep a running tally of how many elements are overlapping at any given time. To do this, we'll build a list of "deltas" - changes in the running total - from the argument list of elements as (start, end) pairs. Then sort these deltas by where they occur, and combine ones that occur at the same time. Finally, keep a running sum of the deltas, which is equal to the number of overlapping elements at the start of each period (each period ends where the next begins).

Complete code:

```
import Data.List      -- sortBy
import Data.Ord       -- comparing
import Data.Function  -- `on`

withDelta delta x = (x, delta)

episodeToDelta elements = increases ++ decreases
  where increases = map (withDelta 1    . fst) elements
        decreases = map (withDelta (-1) . snd) elements

compactDelta::[(Integer,Integer)]->(Integer,Integer)
compactDelta (x:xs) = ((fst x),(sum $ map snd (x:xs)))

adjustTotal (t, delta) ((t1, total1):rest) = (t, total1 + delta):(t1,total1):rest

deltasToRunningTotal = reverse . foldr adjustTotal [(0,0)] . reverse

noZeros = filter (\(_, d) -> d /= 0)

elementsToRunningTotal = deltasToRunningTotal . noZeros . map compactDelta . groupBy ((==) `on` fst) . sortBy (comparing fst) . elementToDelta

sample_elements = [(10,15),(5,9),(13,22),(15,19),(14,16),(3,8),(2,12),(20,22),(23,29)]

> sortBy (comparing fst) sample_elements
[(2,12),(3,8),(5,9),(10,15),(13,22),(14,16),(15,19),(20,22),(23,29)]

> episodesToRunningTotal sample_elements
[(0,0),(2,1),(3,2),(5,3),(8,2),(9,1),(10,2),(12,1),(13,2),(14,3),(16,2),(19,1),(20,2),(22,0),(23,1),(29,0)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:08:05.823

I thought that showing what the hashes, (%data, %counts for each chromosome), might show better what each hash looks like. I use Data::Dumper often when I'm not sure how a hash is structured. It is a very useful module. If you run the program (below) it should better show the hash contents.

You should probably print the output in a file as there is too much the view on (my) terminal - like: `perl your_name_program.pl > junk.txt`.

Then open junk.txt to see the results.

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;
use Sort::Naturally qw/ nsort /;

my %data;

while (<DATA>) {
    my ($chr, @start_stop) = split; 
    $data{$chr}{$_}++ for $start_stop[0] .. $start_stop[1];
}

print "Printing \%data hash as follows\n";
print Dumper \%data;
print "\n";

for my $chr (nsort keys %data) {
    my %counts;
    while (my ($range_int, $count) = each %{ $data{$chr} } ) {
        push @{ $counts{$count} }, $range_int;  
    }
    print "Printing \%counts hash for chromosome $chr\n";
    print Dumper \%counts;
    print "\n";
}

__DATA__
chr1    100    500
chr1    25      50
chr1    10       50
chr1    60       80
chr1    12       40
chr1    41       45
chr1     20      45
chr1     48      80
chr1    4   60
chr2    2   40
chr3    4   90
chr1    5   40
chr2    1   30
chr1    6   20
chr4    9   100
chr1    2   20
chr2    2   90
chr1    6   20
chr4    4   30
chr2    4   90
chr3    3   90
chr2    4   90
chr4    3   90
chr2    4   30 
```

(I'm not too clear on how to translate the Haskell solution to Perl at this point, but will give a closer examination later.)

Hope this gives a clearer picture.

# javascript - 尝试将 ajax 调用上的可序列化数据发送到 servlet 时，得到“servlet 临时移动”的响应

> ID：12998491
> 
> 赞同：0
> 
> 时间：2012-10-21T14:00:05.050
> 
> 标签：javascript, ajax, jquery, jquery-selectors

我有以下代码可以在 ajax 调用上向 servlet 发送可序列化数据

```
$.ajax({ 
    type: "post",
    url: registersubmit.RegisterServlet.json,
    dataType: "json",   
    data:$('#registrationForm').serialize(),          
    success: function(msg) {  
               //   alert(msg.data);
               alert('success'+msg.message2);     
    },
    error: function (xhr, ajaxOptions, thrownError){
             alert('HAI');
             alert('BYE');
    }  
}); 
```

我有一个 id 为registrationForm 的表单，当我尝试使用语句data:$('#registrationForm').serialize() 发送可序列化数据时，我得到响应“servlet 临时移动，状态码为302”。

注意：如果我删除语句 data:$('#registrationForm').serialize()，那么我会得到正常的 ajax 响应，状态码为 200。

我可以知道我们如何在 ajax 调用上发送可序列化的数据。

谢谢，巴拉吉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:07:13.503

302 仅表示 servlet 已调用`response.sendRedirect(newURL)`. 也许您的 servlet 出于某种原因正在这样做，因为它已成功处理了请求？

在 中检索重定向响应时`$.ajax()`，浏览器不会自动更改主窗口。如果您确实需要将主窗口更改为给定的 URL，那么您需要让 servlet 返回一些包含所需目标 URL 的特定响应，然后让 JavaScript 使用从响应中提取的 where 执行`window.location=newURL`重定向`newURL`。

顺便说一句，您的术语“可序列化数据”在上下文中听起来非常错位。只是将表单的[`$.serialize()`](http://api.jquery.com/serialize/)所有输入值收集在一个 JSON 对象中，以便它可以作为`$.ajax`. 在 Java 上下文中，“可序列化数据”具有完全不同的含义。

# python - 为什么在某些情况下使用 python 的 pp 模块进行并行计算会更慢？

> ID：12998498
> 
> 赞同：0
> 
> 时间：2012-10-21T14:00:54.927
> 
> 标签：python, parallel-processing

看看代码。当 genMotifs 的参数设置为 n_seq=5000 和 n_pos=10 时，并行版本 getPairedSeqNames3 和 getPairedSeqNames1 会慢很多。但是当 n_seq=50 和 n_pos=2000 时，并行版本的性能更好。不幸的是，我正在处理的数据更像是 n_seq=5000 和 n_pos=10。谁能告诉我为什么会发生这种情况？当n_seq=5000 和n_pos=10 时，有什么方法可以让并行版本的性能更好？

以下是代码：

```
#! /usr/bin/env python
import pp, sys, random, time
def getMotif_SeqName(Motifs):
    return dict([(uid, set(Motifs[uid].keys())) for uid in Motifs.keys()])

def getPairedList(uids):
    return [(id1, id2) for i, id1 in enumerate(uids) for id2 in uids[i:] if id1 != id2]

def is_overlap(pos_pair):
    (posA, posB) = pos_pair
    if max(posA) < min(posB) or min(posA) > max(posB):
        return False
    else:
        return True

def caclDist(pos_pair):
    (posA, posB) = pos_pair
    d1 = min(posB) - max(posA)
    d2 = min(posA) - max(posB)
    return {True: d1, False: -d2}[d1 > d2]

def getDist(posA, posB, low, high):
    comb = [(i, j) for i in posA for j in posB]
    not_overlap = [e for e in comb if not is_overlap(e)]
    distances = map(caclDist, not_overlap)
    CoDist = {}
    for i, d in enumerate(distances):
        if abs(d) >= low and abs(d) <= high:
            CoDist[not_overlap[i]] = d
    return CoDist

def getDist2(uidA, uidB, seqname, posA, posB, low, high):
    comb = [(i, j) for i in posA for j in posB]
    not_overlap = [e for e in comb if not is_overlap(e)]
    distances = map(caclDist, not_overlap)
    CoDist = {}
    for i, d in enumerate(distances):
        if abs(d) >= low and abs(d) <= high:
            CoDist[not_overlap[i]] = d
    return (uidA, uidB, seqname, CoDist)

def ppCacl(job_server, inputs, equation, funs, packages, Progress=True):
    num_inputs = len(inputs) / 100 + 1
    jobs = [job_server.submit(equation, pars, funs, packages) for pars in inputs]
    return [job() for job in jobs]

def ssCacl(inputs, equation):
    ps = []
    for i, (X, n, m, N) in enumerate(inputs):
        ps.append(equation(X, n, m, N))
    return ps

def getPairedSeqNames1(Motifs):
    SeqNames = getMotif_SeqName(Motifs)
    MotifPairs = set(getPairedList(Motifs.keys()))
    num_MotifPairs = len(MotifPairs)
    print "%s pairs to go" % num_MotifPairs
    num_MotifPairs = num_MotifPairs / 100 + 1
    PairedMotifs = {}

    for i, (uidA, uidB) in enumerate(MotifPairs):
        intersect = list(SeqNames[uidA] & SeqNames[uidB])
        if intersect:
            PosA = Motifs[uidA]
            PosB = Motifs[uidB]

            sys.stderr.write("Progress:%d%%\t%s\t%s\r" % (i / num_MotifPairs, uidA, uidB))
            positions = [(PosA[seqname], PosB[seqname], 10, 250) for seqname in intersect]
            distances = ppCacl(job_server, positions, getDist, (is_overlap, caclDist), (), False)
            distances = dict([(intersect[i], d) for i, d in enumerate(distances) if d])
            if distances:
                PairedMotifs[(uidA, uidB)] = distances
    return PairedMotifs

def getPairedSeqNames2(Motifs):
    SeqNames = getMotif_SeqName(Motifs)
    MotifPairs = set(getPairedList(Motifs.keys()))
    num_MotifPairs = len(MotifPairs)
    print "%s pairs to go" % num_MotifPairs
    num_MotifPairs = num_MotifPairs / 100 + 1
    PairedMotifs = {}

    for i, (uidA, uidB) in enumerate(MotifPairs):
        intersect = list(SeqNames[uidA] & SeqNames[uidB])
        if intersect:
            PosA = Motifs[uidA]
            PosB = Motifs[uidB]

            sys.stderr.write("Progress:%d%%\t%s\t%s\r" % (i / num_MotifPairs, uidA, uidB))
            positions = [(PosA[seqname], PosB[seqname], 10, 250) for seqname in intersect]
            distances = ssCacl(positions, getDist)
            distances = dict([(intersect[i], d) for i, d in enumerate(distances) if d])
            if distances:
                PairedMotifs[(uidA, uidB)] = distances
    return PairedMotifs

def getPairedSeqNames3(Motifs):
    SeqNames = getMotif_SeqName(Motifs)
    MotifPairs = set(getPairedList(Motifs.keys()))
    num_MotifPairs = len(MotifPairs)
    print "%s pairs to go" % num_MotifPairs
    num_MotifPairs = num_MotifPairs / 100 + 1
    PairedMotifs = {}
    positions = []

    for i, (uidA, uidB) in enumerate(MotifPairs):
        intersect = list(SeqNames[uidA] & SeqNames[uidB])
        if intersect:
            PosA = Motifs[uidA]
            PosB = Motifs[uidB]

            sys.stderr.write("Progress:%d%%\t%s\t%s\r" % (i / num_MotifPairs, uidA, uidB))
            positions.extend([(uidA, uidB, seqname, PosA[seqname], PosB[seqname], 10, 250) for seqname in intersect])

    distances = ppCacl(job_server, positions, getDist2, (is_overlap, caclDist), (), False)
    for (uidA, uidB, seqname, CoDist) in distances:
        if CoDist:
            if not PairedMotifs.has_key((uidA, uidB)):
                PairedMotifs[(uidA, uidB)] = {}
            PairedMotifs[(uidA, uidB)][seqname] = CoDist
    return PairedMotifs

def genMotifs(n_seq=5000, n_pos=10):
    digits = range(1, 60000)
    Motifs = {}
    uids = random.sample(digits, 50)
    for uid in uids:
        seqnames = random.sample(digits, random.randint(0, n_seq))
        Motifs[uid] = {}
        for seqname in seqnames:
            Motifs[uid][seqname] = genPos(random.randint(0, n_pos))
    return Motifs

def genPos(n):
    return [(random.randint(0, 3000),random.randint(0, 3000)) for i in xrange(0,n)]

job_server = pp.Server()

Motifs = genMotifs()
timestamp = time.time()
getPairedSeqNames1(Motifs)
print time.time() - timestamp
timestamp = time.time()
getPairedSeqNames2(Motifs)
print time.time() - timestamp
timestamp = time.time()
getPairedSeqNames3(Motifs)
print time.time() - timestamp

Motifs = genMotifs(50, 2000)
timestamp = time.time()
getPairedSeqNames1(Motifs)
print time.time() - timestamp
timestamp = time.time()
getPairedSeqNames2(Motifs)
print time.time() - timestamp
timestamp = time.time()
getPairedSeqNames3(Motifs)
print time.time() - timestamp 
```

我电脑上的结果：

```
1225 pairs to go
57.377081871    16666   20431
1225 pairs to go
15.1005380154   16666   20431
1225 pairs to go
59.9019329548   16666   20431
1225 pairs to go
43.1178700924   11721   46015
1225 pairs to go
77.7199709415   11721   46015
1225 pairs to go
10.1687381268   11721   46015 
```

getPairedSeqNames3的cProfile n_seq=5000 n_pos=10 ![在此处输入图像描述](../Images/a6f9c0268d017445e6507ce3e6a5569f.png)

getPairedSeqNames3的cProfile n_seq=10 n_pos=5000 ![在此处输入图像描述](../Images/dcf418cc1bd29110d0741fbbf9dc67bc.png)

getPairedSeqNames3的cProfile n_seq=20 n_pos=2500 ![在此处输入图像描述](../Images/9ca58fe16b947da63d6d2d118f88caa5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:40:11.590

我更改了您的代码以使用更好的 python 习惯用法：

```
#! /usr/bin/env python
import pp
import sys
import random
import time
from collections import defaultdict

job_server = pp.Server()

def getMotif_SeqName(Motifs):
    return {uid: set(d.keys()) for uid, d in Motifs.items()}

def getPairedList(uids):
    return [(id1, id2) for i, id1 in enumerate(uids) for id2 in uids[i:] if id1 != id2]

def is_overlap(pos_pair):
    (posA, posB) = pos_pair
    return not (max(posA) < min(posB) or min(posA) > max(posB))

def caclDist(pos_pair):
    (posA, posB) = pos_pair
    d1 = min(posB) - max(posA)
    d2 = min(posA) - max(posB)
    return d1 if d1 > d2 else -d2

def getDist(posA, posB, low, high):
    comb = ((i, j) for i in posA for j in posB)
    not_overlap = [e for e in comb if not is_overlap(e)]
    distances = map(caclDist, not_overlap)
    return {
        not_over: d
        for not_over, d in zip(not_overlap, distances)
        if low <= abs(d) <= high
    }

def getDist2(uidA, uidB, seqname, posA, posB, low, high):
    return (uidA, uidB, seqname, getDist(posA, posB, low, high))

def ppCacl(job_server, inputs, equation, funs, packages, Progress=True):
    jobs = (job_server.submit(equation, pars, funs, packages) for pars in inputs)
    return [job() for job in jobs]

def ssCacl(inputs, equation):
    return [equation(X, n, m, N) for (X, n, m, N) in inputs]

def getPairedSeqNames1(Motifs, SeqNames, MotifPairs):
    num_MotifPairs = len(MotifPairs)
    print "%s pairs to go" % num_MotifPairs
    num_MotifPairs = num_MotifPairs / 100 + 1
    PairedMotifs = {}

    for i, (uidA, uidB) in enumerate(MotifPairs):
        intersect = list(SeqNames[uidA] & SeqNames[uidB])
        if intersect:
            PosA = Motifs[uidA]
            PosB = Motifs[uidB]

            sys.stderr.write("Progress:%d%%\t%s\t%s\r" % (i / num_MotifPairs, uidA, uidB))
            positions = [(PosA[seqname], PosB[seqname], 10, 250) for seqname in intersect]
            distances = ppCacl(job_server, positions, getDist, (is_overlap, caclDist), (), False)
            distances = {index: d for index, d in zip(intersect, distances) if d}
            if distances:
                PairedMotifs[(uidA, uidB)] = distances
    return PairedMotifs

def getPairedSeqNames2(Motifs, SeqNames, MotifPairs):
    num_MotifPairs = len(MotifPairs)
    print "%s pairs to go" % num_MotifPairs
    num_MotifPairs = num_MotifPairs / 100 + 1
    PairedMotifs = {}

    for i, (uidA, uidB) in enumerate(MotifPairs):
        intersect = list(SeqNames[uidA] & SeqNames[uidB])
        if intersect:
            PosA = Motifs[uidA]
            PosB = Motifs[uidB]

            sys.stderr.write("Progress:%d%%\t%s\t%s\r" % (i / num_MotifPairs, uidA, uidB))
            positions = ((PosA[seqname], PosB[seqname], 10, 250) for seqname in intersect)
            distances = ssCacl(positions, getDist)
            distances = {index: d for index, d in zip(intersect, distances) if d}
            if distances:
                PairedMotifs[(uidA, uidB)] = distances
    return PairedMotifs

def getPairedSeqNames3(Motifs, SeqNames, MotifPairs):
    num_MotifPairs = len(MotifPairs)
    print "%s pairs to go" % num_MotifPairs
    num_MotifPairs = num_MotifPairs / 100 + 1
    PairedMotifs = defaultdict(dict)
    positions = []

    for i, (uidA, uidB) in enumerate(MotifPairs):
        intersect = list(SeqNames[uidA] & SeqNames[uidB])
        if intersect:
            PosA = Motifs[uidA]
            PosB = Motifs[uidB]

            sys.stderr.write("Progress:%d%%\t%s\t%s\r" % (i / num_MotifPairs, uidA, uidB))
            positions.extend([(uidA, uidB, seqname, PosA[seqname], PosB[seqname], 10, 250) for seqname in intersect])

    distances = ppCacl(job_server, positions, getDist2, (is_overlap, caclDist), (), False)
    for (uidA, uidB, seqname, CoDist) in distances:
        if CoDist:
            PairedMotifs[(uidA, uidB)][seqname] = CoDist
    return PairedMotifs

def genMotifs(n_seq, n_pos):
    digits = range(1, 60000)
    uids = random.sample(digits, 50)
    return {
        uid: {
            seqname: genPos(random.randint(0, n_pos))
            for seqname in random.sample(digits, random.randint(0, n_seq))
        }
        for uid in uids
    }

def genPos(n):
    return [(random.randint(0, 3000), random.randint(0, 3000)) for _ in xrange(n)]

def driver(Motifs):
    SeqNames = getMotif_SeqName(Motifs)
    MotifPairs = set(getPairedList(Motifs.keys()))
    for fn in (getPairedSeqNames1, getPairedSeqNames2, getPairedSeqNames3):
        timestamp = time.time()
        fn(Motifs, SeqNames, MotifPairs)
        print time.time() - timestamp

if __name__ == '__main__':
    for x, y in ((5000, 10), (50, 2000)):
        print '=' * 30
        driver(genMotifs(x, y)) 
```

我不能向你保证这会更快。如果您希望优化您的代码，我会考虑使用 cProfile 或使用 numpy 或 cython 进行分析。

# jquery - 悬停标签

> ID：12998503
> 
> 赞同：0
> 
> 时间：2012-10-21T14:02:23.523
> 
> 标签：jquery, hover, area

在我的 html 中，我有 2 个`<area>`标签，其中包含映射两个国家的坐标。我使用的工具生成了 html 和 css。当我将鼠标悬停在一个区域上时，我希望它变得有点透明。但是，这并没有发生。这是我的代码：

```
<div class="cicka">
<area class="areas" shape="poly" coords="400,141,398,144,396,145,394,147,392,147,389,149,387,149,385,149,383,151,381,152,379,154,377,155,375,156,378,162,379,168,385,172,383,176,379,177,381,182,386,185,392,186,397,190,392,192,388,193,385,194,384,196,384,201,383,205,389,206,392,212,389,215,387,219,385,222,385,228,387,234,391,234,396,239,400,244,400,250,396,249,392,249,389,249,392,254,398,259,400,264,400,270,398,270,394,269,391,270,392,276,396,282,401,286,406,291,409,297,413,294,418,299,423,301,430,302,430,307,425,309,421,310,420,314,422,319,427,323,428,329,434,333,439,339,441,345,441,352,447,355,446,347,448,342,452,339,457,338,463,339,469,338,471,334,477,333,483,333,485,329,492,329,498,330,499,327,505,328,508,324,511,321,511,317,507,314,508,309,507,303,507,299,511,298,516,299,517,294,521,291,523,288,525,283,521,281,519,277,516,274,513,274,511,272,509,269,506,265,505,261,503,259,501,254,501,249,502,246,505,242,508,239,509,232,506,228,503,225,504,219,508,217,514,218,513,214,508,213,504,211,502,209,498,211,496,215,493,218,490,218,489,214,487,213,482,213,479,212,476,209,473,209,469,209,467,207,463,206,464,202,470,203,468,199,463,196,465,193,468,191,467,187,463,187,458,185,456,183,453,182,451,181,449,178,448,176,445,176,441,176,443,173,445,171,445,167,443,164,445,161,440,160,438,159,437,156,434,152,428,150,428,148,426,146,423,144,423,141,420,143,418,141,416,140,415,140,410,140,408,144,406,143,406,141,405,142," href="" alt="" title=""   />
</div> 
```

和以下js：

```
<script>
        $(".cicka").hover(function() {
      $(this).stop().animate({opacity: "0.2"}, 'slow');
    },
    function() {
      $(this).stop().animate({opacity: "1"}, 'slow');
    });
    </script> 
```

当我在普通 div 上调用此函数时，它会使其透明。但是，当我在包裹一个区域的 div 上调用它时，什么也没有发生。你能告诉我我做错了什么吗？

再次感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-21T14:20:30.167

您可能想创建一个国家/地区的图像，为该图像分配一张地图，并在悬停一个区域后更改图像的不透明度。创建地图

```
<img src="country1.jpg" alt="country1" usemap="#map1">

<map name="map1" class="areas">
<area id="area1" shape="poly" coords="......" alt="Country 1">
</map> 
```

然后是 jQuery

# c++ - 访问类成员

> ID：12998506
> 
> 赞同：0
> 
> 时间：2012-10-21T14:02:52.433
> 
> 标签：c++, templates, c++11

如何访问非静态类成员？

```
class A
{
    int value_ = 0;//I want to access this member in class inheriting from A
};
template<class X = A>
class Y :X
{
static_assert(value_ == 0,"Non-zero not allowed");//here I want to access value_ from X which is A by default. Is this possible?
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:11:05.673

由于几个原因，您具体做的事情是不可能的。

首先，`static_assert`要求它的参数是编译时常量表达式。`value_`肯定不是。

您可以尝试通过标记它使其成为常量表达式`constexpr`。但是 C++11 不允许`constexpr`非静态数据成员。即使它这样做了，那也无济于事，因为`value_`它是一个非静态成员。因此，*它还不存在*。它仅在存在实际的类实例时才存在，即具有`this`指针的东西。您的`static_assert`表达式不会创建这些对象之一，因此无法访问它。

因此，为了使这个“工作”（在“工作”做一些有意义的事情的范围内），你必须：

1.  给出`A`一个`constexpr`构造函数，以便您可以创建它的`constexpr`实例化。
2.  您`static_assert`必须使用构造函数实际*创建*一个类型`constexpr`并访问有问题的数据成员。

现在，如果你这样做，你会发现它并没有给你你*想要*的东西（基于这个陈述，因为你的问题没有解释你到底想要完成什么）：

> 其次，每次我的意思是每次创建此类的对象时，因为 X 是模板参数，所以它是一个常量表达式。

注意`static_assert`是*静态*的。而“每次创建此类的对象”都是*运行时*事件。您不能对运行时发生的事情执行*静态测试。*

你要的是*正规* `assert`的，不是`static_assert`。

# bash - 在脚本中定义的取消设置全局变量是好的做法吗？

> ID：12998509
> 
> 赞同：4
> 
> 时间：2012-10-21T14:03:12.347
> 
> 标签：bash, sh

在编写 sh 脚本时，在脚本末尾取消设置所有先前定义的全局变量是否被认为是一种好习惯？

例如，如果我`myscript`使用 . （来源）内置，像这样

```
. myscript 
```

执行脚本后，shell 会被脚本中定义的变量污染。这似乎真的很糟糕（特别是如果被其他人使用）。

如果可以的话，我会完全摆脱 sh（或 bash）中的全局变量，但更多时候它们不是最糟糕的解决方案 :-)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T14:08:21.213

这并不是真正执行脚本。它正在采购它，这使得 shell 执行脚本中的每个命令。如果你想执行脚本，你可以这样做：

```
./myscript 
```

在这种情况下，脚本中设置的任何环境变量都不会对您的 shell 产生影响。

如果您确实需要获取脚本，以便它可以执行设置环境变量或更改当前目录等操作，那么您可以使用括号将变量隔离在子 shell 中：

```
(
  a=7
  echo $a
)
# The change in a doesn't get to here 
```

如果你要取消设置你使用的变量，你会遇到相反的问题。如果用户设置了具有相同名称的变量，那么您最终将销毁它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T14:38:08.493

> 在编写 sh 脚本时，在脚本末尾取消设置所有先前定义的全局变量是否被认为是一种好习惯？

如果脚本正常执行（在子shell中，使用`myscript`），那么没有理由担心脚本中定义的变量（或函数）；当脚本停止执行而不对调用外壳造成损害时，它们就会消失。

> 例如，如果我使用`.`( `source`) 内置执行我的脚本 myscript ，就像这样
> 
> ```
> . myscript 
> ```
> 
> 执行脚本后，shell 会被脚本中定义的变量污染。这似乎真的很糟糕（特别是如果被其他人使用）。

任何来源的脚本都需要有一个很好的来源（设置特定的环境变量或更改目录是通常的原因）。任何将被其他人使用的此类脚本都应该热衷于取消设置它偶然设置的任何变量，首先要小心使用独特命名的变量，并在完成时将它们全部取消设置。

或者，至少，如果它在我的 shell 中乱扔变量，我不会获取其他人的脚本。我不经常在“配置文件”操作之外获取文件，但是当我这样做时，脚本旨在设置某些变量。它可以设置那些（如果没有它就没有用）；但最好不要随意添加其他变量。如有必要，我会复制其他人的脚本并对其进行清理以供我自己使用，或者用清理脚本将其包装起来。

我有一个用于设置 PATH 的脚本（因此它或多或少必须是有用的）。开始：

```
ps_machine=$(uname -n)
ps_pathset=no
ps_pathoptsfile=
for ps_file in \
        ${HOME}/.pathopts.$ps_machine \
        ${REAL_HOME:-$HOME}/.pathopts.$ps_machine \
        ${HOME}/.pathopts \
        ${REAL_HOME:-$HOME}/.pathopts
do
    ...40 lines of esoteric code...
    ...some set ps_perl; some set ps_pathopts...
done

...5 lines of active code that set PATH...

unset ps_pathset ps_pathoptsfile ps_pathopts ps_file ps_perl ps_machine 
```

我将此调用为：

```
. mcpathset 
```

此命令的另一种设计是：

```
export PATH=$(mcpathset) 
```

在这里，命令的输出用作 PATH 的新值。当您只需要设置一个变量时，这是一个可行的设计。如果您需要设置一套环境变量（例如，将环境配置为使用特定的 DBMS），那么这是不太可行的。

我不使用普通脚本清理变量——那些不打算获取的。但对于可源代码脚本，我认为这很重要。我怀疑每个人都同意我的观点；许多人可能不在乎。但我同意你的看法——源代码的干净很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T14:07:03.960

不必要。

当您执行 a 脚本时，它会执行一个新的 shell，并且任何设置它的变量都不会影响到父 shell。

如果您`. myscript`仅在 shell 本身（而不是在脚本内部）上进行操作，那么变量集将是活动的，并且可能会污染 shell，如您所说。

# jquery - 使用 jQuery 生成 XML 输出，每个异步问题

> ID：12998511
> 
> 赞同：1
> 
> 时间：2012-10-21T14:03:25.577
> 
> 标签：jquery

我正在尝试在 textarea 中创建 XML 格式的输出，但遇到了异步问题：

```
$(document).ready(function() {
    var geocoder;
    geocoder = new google.maps.Geocoder();
    $('#xmloutput').val('<?xml version="1.0" encoding="UTF-8"?>\n<parent>\n');
    var addresslist = 'one\ntwo\nthree';
    var addlines = addresslist.split('\n');
    $.each(addlines, function(name, value) {
        geocoder.geocode( { 'address': value}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                $('#xmloutput').val($('#xmloutput').val()+'<node>'+value+'</node>\n');
            }
        });
    });
    $('#xmloutput').val($('#xmloutput').val()+'</parent>');
}); 
```

我想要这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<parent>
<node>one</node>
<node>two</node>
<node>three</node>
</parent> 
```

但是我得到了这个输出，因为地理编码需要一段时间......

```
<?xml version="1.0" encoding="UTF-8"?>
<parent>
</parent><node>one</node>
<node>two</node>
<node>three</node> 
```

我看过很多类似的帖子，修复似乎是链接或回调，但我还没有设法让任何工作。我应该如何处理这个？

谢谢！本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:14:10.627

更改`each`循环并在循环的最后一遍添加结束标签

```
/* first argument of `each` for an array is `index` which will increment on each pass*/
$.each(addlines, function(index,value) {
    geocoder.geocode({
        'address': value
    }, function(results,status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var newString=$('#xmloutput').val() + '<node>' + value + '</node>\n';           
            /* is this the last item? */
            if (index == addlines.length-1) {
                newString += '</parent>';
            }

            $('#xmloutput').val( newString)
        }
    });

}); ​ 
```

由于服务调用的异步性质，地理编码器仍然有可能返回乱序的值。如果发生这种情况，您可能需要创建所有结果的本地对象，并使用 defered 在加载完整字符串之前检查收到的所有结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:10:10.137

尝试使用[.append()](http://api.jquery.com/append/)如下代码：

```
$(document).ready(function() {
    var geocoder;
    geocoder = new google.maps.Geocoder();
    $('#xmloutput').val('<?xml version="1.0" encoding="UTF-8"?>\n<parent>\n');
    var addresslist = 'one\ntwo\nthree';
    var addlines = addresslist.split('\n');
    $.each(addlines, function(name, value) {
        geocoder.geocode( { 'address': value}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                $('#xmloutput').append('<node>'+value+'</node>\n');
            }
        });
    });
    $('#xmloutput').append('</parent>');
}); 
```

# html - 是否可以专门要求用户使用 HTML5 上传图片？

> ID：12998513
> 
> 赞同：2
> 
> 时间：2012-10-21T14:03:37.993
> 
> 标签：html, upload

是否可以专门要求用户使用 HTML5 上传图片？

我知道可以使用 HTML5 上传文件

```
<input type="file" /> 
```

并且您可以检查您可以使用 js 或 php 检查文件类型

但是你能做到让你只允许用户选择一个图像文件，就像你在本机程序上做的那样吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:37:42.803

是的，您可以使用：

```
<input type="file" name="picture" accept="image/*" /> 
```

接受部分可以更改为：[http ://www.w3schools.com/html5/att_input_accept.asp](http://www.w3schools.com/html5/att_input_accept.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:52:48.933

请注意，ie 和 safari 不支持此功能。

这是一个可能的 jQuery 插件解决方案：[http ://www.fyneworks.com/jquery/multiple-file-upload/#tab-Overview](http://www.fyneworks.com/jquery/multiple-file-upload/#tab-Overview)

# c++ - 使用 glm-library OpenGL 计算法线

> ID：12998517
> 
> 赞同：2
> 
> 时间：2012-10-21T14:03:59.990
> 
> 标签：c++, opengl, vector-graphics

该程序从织物中读取顶点和索引，并将顶点存储在向量中，将索引存储在数组中。继承人是 quad.txt -

4 2 numVertices numIndices

-1 -1 0 v1 v2 v3

1 -1 0

1 1 0

-1 1 0

1 2 3

1 3 4

然后我将对象渲染到屏幕上——没问题。但是当我尝试计算法线和平面阴影时，我遇到了问题。该对象使用 GL_TRINANGLES 进行渲染。看起来像这样[http://imgur.com/wnKWP](http://imgur.com/wnKWP)（没有足够的声誉直接上传......）

就像三角形被单独着色......无论如何这里是代码：

```
#include "Object.h"
#include <vector>
#include <iostream>
#include <fstream>
#include <cstring>
#include <glm.hpp>

using namespace std;

const int NMAX = 20000;

GLuint indicesArr[NMAX];

vector<glm::vec3> drawFigure;   glm::vec3 figure;
vector<glm::vec3>Vertices;      glm::vec3 vertex;
vector<glm::vec3>Normals;       glm::vec3 normal;
vector<glm::vec3>Temp;          glm::vec3 temp;

int numVertices, numIndices;

//slices = number of subdivisions around the axis
Object::Object() :
mIsInitialised(false)
{
}

Object::~Object()
{
if(mIsInitialised)
{
    drawFigure.clear();
    Vertices.clear();
    Normals.clear();
    Temp.clear();
}
}

bool Object::loadTxtFile(const string &filename)
{
ifstream in(filename);
in >> numVertices >> numIndices;

while (!in.eof())
{
    for (unsigned int i = 1; i <= numVertices; i++)
    {
        in >> vertex.x >> vertex.y >> vertex.z;
        Vertices.push_back(vertex);
    }

    for (unsigned int i = 1; i <= numIndices * 3; i++)
        in >> indicesArr[i];
}

for (unsigned int i = 1; i <= (numIndices * 3); i++)
{
    figure.x = Vertices[indicesArr[i] - 1].x;
    figure.y = Vertices[indicesArr[i] - 1].y;
    figure.z = Vertices[indicesArr[i] - 1].z;
    drawFigure.push_back(figure);
}

for (unsigned int i = 0; i < (numIndices * 3); i+=3)
{
    temp.x = drawFigure[i].x;
    temp.y = drawFigure[i].y;
    temp.z = drawFigure[i].z;
    Temp.push_back(temp);

    temp.x = drawFigure[i + 1].x;
    temp.y = drawFigure[i + 1].y;
    temp.z = drawFigure[i + 1].z;
    Temp.push_back(temp);

    temp.x = drawFigure[i + 2].x;
    temp.y = drawFigure[i + 2].y;
    temp.z = drawFigure[i + 2].z;
    Temp.push_back(temp);

    normal = glm::normalize(glm::cross(Temp[i + 2] - Temp[i], Temp[i + 1] - Temp[i]));
    Normals.push_back(normal);
}
mIsInitialised = true;
return true;  //Return true if successfully loaded
}

void Object::draw()
{

if(!mIsInitialised) { return; }

//Tell OpenGL about our vertex and colour data
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 0, &drawFigure.front());

glEnableClientState(GL_NORMAL_ARRAY);
glNormalPointer(GL_FLOAT, 0, &Normals.front());

//draw the .txt-file
glDrawArrays(GL_TRIANGLES, 0, (numIndices * 3));

//restore the state GL back
glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_NORMAL_ARRAY);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:12:04.787

每个顶点需要一个法线。您当前正在计算每个三角形一个法线。看看下面关于计算法线的帖子：http: [//devmaster.net/forums/topic/1065-calculating-normals-of-a-mesh/](http://devmaster.net/forums/topic/1065-calculating-normals-of-a-mesh/)

正如文章所述，有两种方法可以计算每个顶点的法线：

1.  顶点法线是相邻面法线的平均值（参见 devmaster 帖子中的 #1）
2.  顶点法线是相邻面法线的角度加权平均值（参见 devmaster 帖子中的 #6）

# sql - 插入异常

> ID：12998521
> 
> 赞同：13
> 
> 时间：2012-10-21T14:04:17.267
> 
> 标签：sql, database, relation, relational-algebra

我正在从[这里](http://www.sqa.org.uk/e-learning/MDBS01CD/page_24.htm)学习插入异常。以下数据写入其中，

**插入异常**

当某些属性在没有其他属性的情况下无法插入到数据库中时，就会发生插入异常。例如，这与删除异常相反——除非我们至少有一名学生注册了该课程，否则我们无法添加新课程。

```
StudentNum  CourseNum   Student Name    Address     Course
S21         9201        Jones           Edinburgh   Accounts
S21         9267        Jones           Edinburgh   Accounts
S24         9267        Smith           Glasgow     physics
S30         9201        Richards        Manchester  Computing
S30         9322        Richards        Manchester  Maths 
```

我被困在理解这个概念上。为什么我们需要学生注册该课程才能存在？

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T14:38:36.010

这意味着模式未标准化，即现在您在 table 中拥有有关课程的信息`Student`。

因此，为了插入课程详细信息，您还需要提供学生的详细信息。

您需要阅读[不同形式的规范化](https://en.wikipedia.org/wiki/Database_normalization#List_of_Normal_Forms)，但在此示例中，解决此异常的正确方法很可能是创建三个表，即[强实体类型](https://stackoverflow.com/q/4741967/4233593) `Student`、、`Course`和[关联实体类型链接表](https://en.wikipedia.org/wiki/Associative_entity) `StudentCourse`（可能称为 a`Registration`或 a `Grade`) 这将允许您存储没有重复和异常的学生和课程数据，以及将许多课程分配给许多学生。

您可以阅读以下链接中的规范化示例，它会给您一个更好的主意：

[http://www.sqa.org.uk/e-learning/MDBS01CD/page_26.htm#Example](http://www.sqa.org.uk/e-learning/MDBS01CD/page_26.htm#Example)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-18T23:48:00.280

该示例假设studentnum 和coursenum 构成一个复合主键，实现一个学生不能多次注册同一课程的完整性规则，即该组合是唯一的。因此，尝试添加课程记录也需要学生人数。为了避免这种情况，同时仍然保持完整性规则，复合键在关联实体中实现，课程和学生在不同的实体中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-05T07:40:37.393

插入异常：根据上面的示例，只有一个表具有所有属性。现在我想介绍新课程，那么我必须知道`student id`（想要学习该课程的学生）这是一个主键，不能为空。根据所取的表你一定知道`primary key(student id)`。如果您想输入其他字段，但现在我们只有新的课程详细信息，没有学生注册。因此，您不能只输入新课程而将主键留空。这是插入异常。

# php - Code Igniter - 当 URL 以斜杠结尾时，相对 URL 停止工作？

> ID：12998525
> 
> 赞同：2
> 
> 时间：2012-10-21T14:04:33.573
> 
> 标签：php, codeigniter, url, href

我正在尝试学习 CI，并且刚刚完成了[入门教程](http://codeigniter.com/user_guide/tutorial/index.html)。如果我的 URL 以斜杠结尾，我发现某些链接 HREF 不起作用 - 例如，这些链接：

```
<?php foreach ($news as $news_item): ?>

    <h2><?php echo $news_item['title'] ?></h2>
    <div id="main">
        <?php echo $news_item['text'] ?>
    </div>
    <p><a href="news/<?php echo $news_item['slug'] ?>">View article</a></p>

<?php endforeach ?> 
```

当我打开时，故事的链接可以正常工作

```
/index.php/news 
```

但如果我在

```
/index.php/news/ 
```

正如我所说，这是正确的教程，所以我不确定发生了什么。

我可以使 HREFs 绝对....

```
<p><a href="<?php echo config_item('base_url').config_item('index_page').'/news/'.$news_item['slug']; ?>">View article</a></p> 
```

...但我不应该这样做。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:51:06.447

这里可能没有足够的信息来诊断问题。“不起作用”——错误是什么？完整的 URL 是什么样的？

它可能与您的 Apache 和服务器配置有关。尝试编辑配置并尝试使用“PATH_INFO”与“REQUEST_URI”。

```
| 'AUTO'            Default - auto detects
| 'PATH_INFO'       Uses the PATH_INFO
| 'QUERY_STRING'    Uses the QUERY_STRING
| 'REQUEST_URI'     Uses the REQUEST_URI
| 'ORIG_PATH_INFO'  Uses the ORIG_PATH_INFO
|
*/
$config['uri_protocol'] = 'AUTO'; 
```

最后，（这只是稍微相关）但在 Codeigniter 中构建 URL 的最佳方法是 site_url() 函数（它创建一个完整的 URL）：

```
echo site_url("news/local/123"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T14:14:26.890

使它像这样：

```
<a href="/news/<?php echo $news_item['slug'] ?>">View article</a> 
```

只是在开头添加斜线

**更新：**

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteCond $1 !^(index\.php|uploads|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

将此添加到应用程序根目录中的 .htaccess 文件和 codeigniter 的配置文件中：

```
$config['index_page'] = ''; //make it like this 
```

现在您不必使用 /index/news，只需使用站点根目录中的 /news

那么你可以像这样使用它：

```
<a href="/news/<?php echo $news_item['slug'] ?>">View article</a> 
```

它关闭了工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T14:53:18.743

如果您有以下格式的网址，则相对网址将无法按照您的预期工作：

*   [http://domain.com/stuff/](http://domain.com/stuff/)
*   [http://domain.com/stuff/things](http://domain.com/stuff/things)

原因是相对 url 使用完整的 URI 路径作为参考（因此是“相对”）。因此，如果您在（注意没有结束斜杠）`stuff/things`的 URI 路径上引用（注意前面的斜杠），您会得到，因为它假定您想要文件夹中的某些内容。`/stuff/things``/stuff/stuff/things``stuff`

我要做的是使用 CodeIgniter 的`site_url()`函数，因为它会为您生成绝对 url（包括域）。

`site_url('stuff/things')`会变成`http://domain.com/stuff/things`

对于这种情况，`echo site_url('news/'.$news_item['slug']);`请在锚点的 href 中使用。您也可以`echo anchor('news/'.$news_item['slug'], 'Link text to this article');`在不编写 html 的情况下回显文章的链接。

一个警告——`site_url()`将包含`index.php`在 URI 中（如果它没有从你的配置文件中删除），所以如果你想引用图像、javascript、css 等，那么使用`base_url()`它只会引用你的`base_path`配置变量。

编辑：忘了提及，您需要使用[URL Helper](http://codeigniter.com/user_guide/helpers/url_helper.html)才能使这些功能正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-26T10:55:22.990

也许为时已晚，但我遇到了这个问题，尽管做了所有的建议，问题仍然存在！现在它终于可以工作了，只要放

```
$config['base_url'] = '/myrootfolder/'; 
```

代替

```
$config['base_url'] = 'http://localhost/myrootfolder/'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T14:29:40.973

打开你的 config.php 然后删除 index.php 。

然后在那之后使用

```
echo base_url('news').'/'.$news_item['slug'] 
```

然后配置您的路线

```
$route['news/(:any)'] = 'news/index/$1'; 
```

# php - 从 facebook 支付报告 API 返回的结果格式是什么？

> ID：12998532
> 
> 赞同：2
> 
> 时间：2012-10-21T14:05:23.397
> 
> 标签：php, facebook

我正在使用 PHP 和 symfony 2，试图让 facebook 支付报告工作。我向 https://paymentreports.facebook.com/[company id]/report 发送了一个请求？使用相关参数，我确实得到了响应，但是，除了只有 csv 文件名（这是我所期望的）之外，我还得到了很多“垃圾”（比如来自其他语言的奇怪的 ASCII 字符等）。

这个结果的格式是什么，我如何过滤掉垃圾？最后，我如何取这个文件名并将 csv 文件取出来？发出另一个http请求？

谢谢

# android - styles.xml 继承“？android:attr/borderlessButtonStyle”？

> ID：12998533
> 
> 赞同：38
> 
> 时间：2012-10-21T14:05:25.190
> 
> 标签：android, android-layout, styles

我想定制一些无边框的 ImageButtons。为了避免代码重复，我使用`styles.xml`：

```
<style name="EditNotesButton" parent="?android:attr/borderlessButtonStyle">
    <item name="android:layout_width">25dp</item>
    <item name="android:layout_height">25dp</item>
    <item name="android:scaleType">fitCenter</item>
</style> 
```

但是，会引发以下错误：

```
Error retrieving parent for item: No resource found that matches the given name '?android:attr/borderlessButtonStyle'. 
```

有没有办法继承*borderlessButtonStyle*？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2015-06-21T13:56:10.510

对于 AppCompat，您可以从父样式继承：

```
<style name="MyBordelessButtonStyle" parent="@style/Widget.AppCompat.Button.Borderless">
        <item name="android:textSize">@dimen/<your size></item>
        <!-- other items here -->
</style> 
```

基于[源代码](https://android.googlesource.com/platform/frameworks/support/+/master/v7/appcompat/res/values-v11/themes_base.xml)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-12-13T14:29:26.253

**你不能继承一个属性，你必须继承一个样式。**

选择与您的主题相匹配的按钮无边框样式以继承。所有 Android 内部样式都可以在[http://developer.android.com/reference/android/R.style.html找到](http://developer.android.com/reference/android/R.style.html)

例如，您的应用程序使用 Holo Light 主题（在 中指定`AndroidManifest.xml`），那么您应该继承`Widget.Holo.Light.Button.Borderless.Small`样式。

```
<style name="EditNotesButton" parent="@android:style/Widget.Holo.Light.Button.Borderless.Small">
  <item name="android:layout_width">25dp</item>
  <item name="android:layout_height">25dp</item>
  <item name="android:scaleType">fitCenter</item>
</style> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-20T18:19:06.580

您可以将此样式用于 API 11 及更高版本：

```
<style name="EditNotesButton" parent="android:Widget.Holo.Button.Borderless" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T11:09:51.650

我认为你不能以这种方式继承。试试这个：

```
<style name="EditNotesButton" parent="@android:style/Widget">
    <!-- This will cause borderless button --> 
    <item name="android:background">@android:drawable/list_selector_background</item>
    ...
</style> 
```

* * *

## 回答 #5

> 赞同：-9
> 
> 时间：2012-11-03T10:46:30.687

borderlessButtonStyle 仅适用于 API 级别 11 或更高级别。

# jquery - 从单击的元素中检索文本

> ID：12998535
> 
> 赞同：0
> 
> 时间：2012-10-21T14:05:36.707
> 
> 标签：jquery, html, onclick

```
<div class="forInfo">
<div style="text-align:center; font-weight:bold;">17:00:00</div><br>
<div style="text-align:center; font-weight:bold; font-size:large">zumba</div>
<div style="display:none" class="opis"> Ime instruktorja: ime Opis:opis</div>
<div style="text-align:center">ime</div>
</div> 
```

这是html代码。我使用带有“opis”类的 div 来存储文本。

```
 $(".forInfo").click(function(){alert($(".opis",this).text)}); 
```

我已经在 jquery 中编写了这个函数，所以每当我单击带有类“forInfo”的 div 时，我都会收到带有类“opis”的元素中的文本的警报。但是这不起作用，我在我的警报器中编写了文本函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:07:59.420

`text`是一种方法，而不是一种属性。请参阅[此处的文档](http://api.jquery.com/text/)。

```
 $(".forInfo").click(function(){alert($(".opis",this).text())}); 
```

[工作示例。](http://jsfiddle.net/DFBph/)

# jar - 可运行的 JAR exe 包装器和 JRE 安装程序（如果不存在）

> ID：12998538
> 
> 赞同：0
> 
> 时间：2012-10-21T14:06:10.610
> 
> 标签：jar, java

我创建了 Java Swing 应用程序，我有导出器到可运行的 jar 文件。通过使用 Launch4j（[链接](http://launch4j.sourceforge.net/)），我设法将它包装在 exe 文件中。如果 PC 上没有安装 JRE，它会将用户发送到 JAVA 站点进行下载。我的问题是是否有任何包装器自动安装 JRE 而无需将用户发送到站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:18:38.957

我也使用 launch4j 来部署一个像这样的摇摆应用程序。我只是将 JRE 文件夹放入与我的 exe 和 jar 文件相同的文件夹中。您可以将 JRE 与您的应用程序一起部署，以防万一您需要确保它具有所需的版本。所以我的应用程序有自己的文件夹，其中有一个 JRE 文件夹，我的应用程序使用的其他 jar 文件，launch4j 的 exe 和 ini 文件。我不记得我是否告诉launch4j 使用该文件夹中的JRE，但它必须知道使用该本地JRE。

这是另一个问题的链接，其中有人做了同样的事情并告诉他们如何指向 JRE。[在 launch4j 中指定 JRE](https://stackoverflow.com/questions/7071133/how-to-bundle-a-jre-with-launch4j)

# php - Ubuntu Uncaught ReferenceError 中的 Javascript 错误：$ 未定义

> ID：12998542
> 
> 赞同：1
> 
> 时间：2012-10-21T14:06:20.110
> 
> 标签：php, javascript, jquery, ajax, referenceerror

我在 Ubuntu 平台上使用 jquery、javascript、php。在页面中，我通过 jquery 向 php 文件发送 ajax 请求并获取响应文本。该程序在windows-(wamp)平台和在线运行成功。但在 Ubuntu 中，我收到了 javascript 错误。代码如下...

```
 url = "index.php";

    $.get(url,{
            'action': 'Loan',
        },
        function(responseText){     
            alert(responseText);
        },
        "html"
    ); 
```

在 Ubuntu 中，我收到此错误 **“未捕获的 ReferenceError: $ is not defined”**。此错误显示在 $.get 行。在脚本标签中，我也包含了 jquery 库文件。我不知道为什么这是错误来了。请解决我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:12:45.573

错误“Uncaught ReferenceError: $ is not defined”表示未加载JQuery库。

您将[在此处](http://code.jquery.com/)找到所有 CDN以包含您需要的 JQuery 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:13:41.873

`$ is not defined`on JQuery 表示未加载 JQuery 库。

它可能由于多种原因而发生，例如，

1.  Windows 上的路径在 Ubuntu 中不一样。
2.  在 Windows 中，文件名不区分大小写，但在 Linux 中则区分大小写。

我建议你使用谷歌的 JQuery。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:19:35.247

如果它仍然无法工作，请不要使用美元符号，而是使用 jQuery.get 尝试验证您的 jquery 是否存在（404）。如果它存在，打开它可能只是一个空文件。

# android - Android：如何遍历 TableLayout 中的行并使用警告对话框按钮更改复选框的选中状态

> ID：12998546
> 
> 赞同：1
> 
> 时间：2012-10-21T14:06:50.713
> 
> 标签：android

我有一个 tablelayout xml 文件，它将 sqlite 数据库中的元素显示为表格格式。我想要的是能够有一个警报对话框或弹出窗口，这样当我单击一个按钮时，它会将复选框检查状态更改为该特定行的真实状态。这是我的 xml 文件（events.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/table_layout"
    android:stretchColumns="*"
    android:background="#EA6D11">

     <TableRow  
        android:id="@+id/table_row"
        android:background="#B18C58"
        android:layout_margin="2dp">

      <!-- Column 1 -->
      <TextView
         android:id="@+id/eventId"
         android:layout_width="0dip"
         android:layout_height="wrap_content"
         android:padding="5dip"       
         android:textStyle="bold"
         android:textAllCaps="true"
         android:textColor="#00FF00"
         android:layout_margin="1dip"
         android:layout_weight="0.5"
         android:text="Column 0.5" />       

      <!-- Column 2 -->
      <TextView
         android:id="@+id/eventName"
         android:layout_width="0dip"
         android:layout_height="wrap_content"
         android:padding="5dip"
         android:textStyle="bold"
         android:textAllCaps="true"
         android:textColor="#FFFFFF"
         android:layout_margin="4dip"
         android:layout_weight="0.8"
         android:text="Column 2" />  

      <!-- Column 3 -->
      <TextView
         android:id="@+id/eventRecordName"
         android:layout_width="0dip"
         android:layout_height="wrap_content"
         android:padding="5dip"
         android:textColor="#FFFFFF"
         android:textAllCaps="true"
         android:textStyle="bold"
         android:layout_margin="4dip"
         android:layout_weight="0.8"
         android:text="Column 3" />
    <!-- Column 4 -->   
    <CheckBox
        android:id="@+id/checkbox"
        android:checked="false"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:clickable="false"
        android:layout_margin="1dp"
        android:layout_weight="0.3"
        android:button="@drawable/checkbox"/>
        </TableRow> 

</TableLayout> 
```

这就是我在我的活动课程中实现的。

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    dbAdapter = new dbHelperAdapter(this); 
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);       
    Cursor eventListCursor = dbAdapter.fetchAllEvents();
    startManagingCursor(eventListCursor);        
    String[] from = new String[] {dbHelperAdapter.EVENT_ID, dbHelperAdapter.EVENT_NAME, dbHelperAdapter.EVENT_rNAME};
    int[] target = new int[]{R.id.eventId, R.id.eventName, R.id.eventRecordName};
    cursorAdapter = new SimpleCursorAdapter(this, R.layout.event_row_def, eventListCursor, from, target);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title);
    setListAdapter(cursorAdapter); 
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title);
    ListView lv = getListView();
    lv.setOnItemLongClickListener(new OnItemLongClickListener(){

        public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
            lv.requestFocus();
            showPopup();
            return true;
        }

    });
} 
```

这是 showPopup() 方法。

```
 public void showPopup(){
        final AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setTitle("EVENT");
        alert.setMessage("RollCall");       
        alert.setPositiveButton("MARK-EVENT", new DialogInterface.OnClickListener(){

        @Override    
        public void onClick(DialogInterface dialog, int which){
          //change checkbox checked state = true once clicked and move to next row
        }

    });

        alert.setNeutralButton("CLOSE", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                //require some actiion here once button is clicked
            }
        });
        AlertDialog alertDialog = alert.create();
        alertDialog.show();

    } 
```

提前感谢您认为适合此实施的任何想法。

# node.js - 使用 ejs 渲染布局

> ID：12998547
> 
> 赞同：0
> 
> 时间：2012-10-21T14:06:53.547
> 
> 标签：node.js, express, ejs

我不能用 ejs 渲染布局，表达：

```
app.configure(function () {
    app.use(express.static(__dirname + '/public'));
    app.use(express.basicAuth('username', 'password'));
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
}); 
```

layout.ejs 位于 /views 文件夹中。我渲染 /views/home/index.ejs 但它不在*布局*中：

```
res.render('home/index'); 
```

布局.ejs：

```
<html>
  <head>
    <title></title>
      <script type="text/javascript" src="/content/scripts/jquery-1.6.2.min.js"></script>
      <script type="text/javascript" src="/content/scripts/jquery-ui-1.8.11.min.js"></script>
      <script type="text/javascript" src="/content/scripts/jquery.unobtrusive-ajax.min.js"></script>
      <script type="text/javascript" src="/content/scripts/jquery.validate.min.js"></script>
      <script type="text/javascript" src="/content/scripts/jquery.validate.unobtrusive.min.js"></script>
      <script type="text/javascript" src="/socket.io/socket.io.js"></script>
      <link rel="stylesheet" type="text/css" href="/content/styles/site.css" />
      <link rel="stylesheet" type="text/css" href="/content/styles/themes/base/jquery.ui.all.css"/>
  </head>
  <body>
      <%- body %>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-21T18:58:27.730

我使用 ejs-locals 代替。它是 ejs-partials 的一个分支，但得到了积极维护。

```
npm install ejs-locals 
```

[https://github.com/RandomEtc/ejs-locals](https://github.com/RandomEtc/ejs-locals)

```
<% layout('boilerplate') -%>
<% script('foo.js') -%>
<% stylesheet('foo.css') -%>
<h1>I am the <%=what%> template</h1>
<% block('header', "<p>I'm in the header.</p>") -%>
<% block('footer', "<p>I'm in the footer.</p>") -%> 
```

还有一个布局，boilerplate.ejs：

```
<!DOCTYPE html>
<html>
  <head>
    <title>It's <%=who%></title>
    <%-scripts%>
    <%-stylesheets%>
  </head>
  <body>
    <header>
      <%-blocks.header%>
    </header>
    <section>
      <%-body -%>
    </section>
    <footer>
      <%-blocks.footer%>
    </footer>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T16:17:16.933

In express 3, you need to add partial and layout supports separately with [express-partials](https://github.com/publicclass/express-partials)

```
npm install express-partials 
```

# c++ - 编写我自己的 C++ 编译器 .. 卡在变量上

> ID：12998551
> 
> 赞同：0
> 
> 时间：2012-10-21T14:07:16.040
> 
> 标签：c++, variables, assembly, compiler-construction, cpu

我目前正在为我的 JS 中的 Logisim CPU 开发一个 c++ 编译器，现在变量有问题：

我在 ram 中定义了一个空间来存储数据/值，并且我已经定义了一个空间来存储数据空间的地址。我有一个带有指向最后一个变量的指针的寄存器 nx 和一个带有指向最后一个“数据存储”RAM 的指针的寄存器 mx。但我不知道如何访问它们，例如这里：

修改后的 C++ 代码：

```
int *pointer_test;
int test;
test = 123;
pointer_test = &test;
*pointer_test = 25; 
```

预编译器：

```
//Allocate new variable       <---  int *pointer_test;
add nx, 1
//Set the pointer pointing to zero
sram nx, 0

//Allocate another variable   <---  int test;
add nx, 1
//Allocate new storage for the variable
add mx, 1

//Let the variable point to the data <--- test = 123;
sram nx, mx
sram mx, 123 
```

我现在如何实施：

```
pointer_test = &test; 
```

我只有 &test 的值，保存在 nx 中，因为它是声明的最后一个变量，但不是变量/指针“pointer_test”的地址......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:27:09.037

您可能想编写基于堆栈的程序集，就像过去 20 年中的所有其他 C 编译器一样。这意味着 RAM 中有一个称为堆栈的数据区域，它是一个 FIFO 队列，它会向下增长。堆栈也总是至少包含一个寄存器：堆栈指针。堆栈指针指向堆栈中的当前位置，下一件事将去向。因此，要将某些内容添加到堆栈中，请将其放在堆栈指针指向的位置，然后从堆栈指针中减去该内容的大小。

另一个来自 C 的汇编中最常使用的寄存器是基指针。基指针指向当前帧的开头。框架可以粗略地与 C 中的范围进行比较。所以，如果我有这段代码：

```
int a;
{
  int b;
} 
```

顶部的堆栈位于 0x9999，然后`a`将位于 0x9995（假设 4 字节 int），堆栈指针现在指向 0x9991，而基指针仍指向 0x9999。当进入新的作用域时，基指针移动到栈指针，然后B被放到0x9991处。然后，当退出作用域时，堆栈指针被设置为基指针，有效地擦除了较低作用域中的变量。

我从未听说过您正在为其编程的体系结构，但只知道任何两个寄存器都可以，但是某些体系结构，例如 x86，具有特定的 stak 寄存器（`ebp`在`esp`32 位和`reb`64`rsp`位上）。

但是为了进一步回答这个问题，编译器的工作是知道每个变量在堆栈中的偏移量是多少，因此它可以执行以下操作（伪代码）：

```
base_pointer - 5 (Offset for pointer_test) = base_pointer - 4 (offset for test) 
```

# vb.net - 查找变量的声明名称

> ID：12998554
> 
> 赞同：2
> 
> 时间：2012-10-21T14:07:37.940
> 
> 标签：vb.net

有谁知道如何获取已声明变量的名称。例如：

```
Public Function returnName(variable as integer) as string

Dim [string] as string = string.empty 
[string] = variable.name 
return [string]

End Function 
```

我已经看到它尝试了几次，大多数人说这是不可能的，解释说 IL 不存储传递的变量的名称，但是相信有一些可以追踪到名称的有形指针或引用似乎是合理的。谁能给我一些关于这个的标题。

为什么？这纯属个人研究。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:15:07.207

Reflection can get you the names of the method arguments, also local variables in the context of the method body, but that's where the buck stops. The only way to get them is by reading the debug information file, the .pdb that's generated for your program.

There's a good reason for that. One of the most important jobs performed by the jitter is to *remove* local variables from the generated machine code. And substitute them with cpu registers. It is a very important optimization that can make a great deal of difference in the speed of the code. Memory is slow, cpu registers are fast. That's an optimization that's performed in the release build of your program. Also very visible when you try to debug a release version of your program by attaching a debugger. You'll get a lot of warnings from the debugger, telling you that it doesn't know what you mean when you ask it to inspect a local variable. And also the downfall when using the .pdb file.

A backgrounder answer on the kind of optimizations performed by the jitter is [available here](https://stackoverflow.com/questions/4043821/performance-differences-between-debug-and-release-builds/4045073#4045073).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:47:16.437

检查方法可能如下所示：

```
Private Shared Function Check(Of T)(expr As Expression(Of Func(Of T))) As String
  Dim body = DirectCast(expr.Body, MemberExpression)
  Return body.Member.Name
End Function 
```

`variable`假设它是类型`Integer`（您的示例） ，这就是您检查名称的方式：

```
Check(Of Integer)(Function() variable) 
```

或者，通过类型推断，`variable`可以是任何类型：

```
Check(Function() variable) 
```

完全适用于类级别的变量，本地人得到一个`$VB$Local_`前缀。

[在这里](https://stackoverflow.com/questions/716399/c-sharp-how-do-you-get-a-variables-name-as-it-was-physically-typed-in-its-dec)问了同样的问题，但是在 C# 中。我从那里为 VB.NET 和您的特定示例采用了代码，并对其进行了测试。

# c# - C#通过Webservice保存图像（字节[]）

> ID：12998556
> 
> 赞同：2
> 
> 时间：2012-10-21T14:08:02.920
> 
> 标签：c#, wcf, web-services

我正在尝试制作一个可以接受图像字节 [] 的 Web 服务，并将其保存到 Web 服务器。代码由两部分组成，发送数据的客户端和获取数据的 Web 服务。尝试上传图像时出现以下错误： **System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail]：GDI+ 中发生一般错误。**

myImage 是一个 System.Drawing 图像。

```
private byte[] imageToByteArray(Image imageIn)
    {
        MemoryStream ms = new MemoryStream();
        imageIn.Save(ms,ImageFormat.Png);
        return ms.ToArray();
    }

using (Something.ClientServiceClient client = new Something.ClientServiceClient())
            {
                client.Open();
                client.uploadScreenShot(imageToByteArray(myImage));
            } 
```

网络服务如下所示：

```
public void uploadHofScreen( byte[] imgArray)
    {
        Image nImg = byteArrayToImage(imgArray);
        Bitmap bitmap = new Bitmap(nImg);
        saveJpeg("/1/test.jpg", bitmap, 85L);
    }

private void saveJpeg(string path, Bitmap img, long quality)
    {
        EncoderParameter qualityParam = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, quality);
        ImageCodecInfo jpegCodec = getEncoderInfo("image/jpeg");
        if (jpegCodec == null)
            return;
        EncoderParameters encoderParams = new EncoderParameters(1);
        encoderParams.Param[0] = qualityParam;
        img.Save("XXXX" + path, jpegCodec, encoderParams);
    }

    private ImageCodecInfo getEncoderInfo(string mimeType)
    {
        ImageCodecInfo[] codecs = ImageCodecInfo.GetImageEncoders();
        for (int i = 0; i < codecs.Length; i++)
            if (codecs[i].MimeType == mimeType)
                return codecs[i];
        return null;
    } 
```

webconfig 和 appconfig 都有以下 readerQuotas：

```
<readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" /> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:13:32.523

（只是在上传文件夹的权限上摆弄了一下，发现 IIS 没有写权限 - 抱歉，我应该在去这里之前检查一下）

从好的方面来说，现在您可以看到如何通过 Web 服务上传图像。:)

# xaml - 更改目标 CPU 后 Windows 商店应用程序编译错误

> ID：12998559
> 
> 赞同：2
> 
> 时间：2012-10-21T14:08:08.593
> 
> 标签：xaml, bing-maps, windows-store-apps, anycpu, target-platform

我想在我的 Windows 商店应用程序中添加 Bing 地图功能，该应用程序已经完美运行。问题是，要添加 Bing 地图，我必须将正在运行的项目配置从“任何 CPU”更改为 ARM、x86 或 x64。

一旦我这样做了，所有的地狱都松了，我得到错误，表明我在我的 XAML 中使用的未找到的不同资源。我按照这篇文章 [http://www.codeproject.com/Articles/408457/Using-Bing-Maps-For-Windows-8-Metro-Apps-Csharp-Ja](http://www.codeproject.com/Articles/408457/Using-Bing-Maps-For-Windows-8-Metro-Apps-Csharp-Ja)

我正在尝试将平台更改为“x64”。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:26:52.960

是的，因为 Bing 地图不支持除 ARM x86 或 x64 之外的所有平台。它主要是为导航目的而构建的，它在具有 ARM 处理器的平板电脑中受支持。

# dataset - 报告新数据集

> ID：12998561
> 
> 赞同：0
> 
> 时间：2012-10-21T14:08:29.743
> 
> 标签：dataset, ireport

我正在制作关于**ireport 4.6.0**的报告，并且我想添加一个新数据集以使用另一个查询，添加新数据集没有问题，但是当我尝试在报告的新数据集中使用新文件时，结果将是-> **“未找到字段！”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:45:10.697

确保您已在 iReport 查询设计器中选中**Automatically Retrieve Fields**复选框，否则您可以手动单击**Read Fields**按钮。这些过程中的任何一个的目的是，它们会自动将查询中的选定列创建为 iReport 字段。
或者手动添加缺少的字段声明也应该有效。
希望这可以帮助。

# python - python neurolab - 我们可以用许多输入部分增量训练吗？

> ID：12998562
> 
> 赞同：5
> 
> 时间：2012-10-21T14:08:35.197
> 
> 标签：python, neural-network

我正在使用神经实验室来解决机器学习分类问题，链接：- [http://code.google.com/p/neurolab/](http://code.google.com/p/neurolab/)

我的问题是，我们可以增量训练神经网络吗？

为了进一步解释，我有三部分输入数据，我想通过以下方式训练神经网络

```
e = net.train(input_part1, output_part1, show=1, epochs=100, goal=0.0001)
e = net.train(input_part2, output_part2, show=1, epochs=100, goal=0.0001)
e = net.train(input_part3, output_part3, show=1, epochs=100, goal=0.0001) 
```

前两部分的训练调用将有效预测神经网络参数 - 或者 - 这是否只使用最后的训练数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T00:01:52.787

通常，您会将所有数据一起添加到一个数据集中，并在此训练集上训练网络。训练是指设置权重。为什么不将所有输入（part1、part2、part3）添加到一个数据集中？请注意，在某些技术中，学习和重新调整是学习算法的一部分。如果你想做一个简单的算法，你有一个训练周期和一个性能周期。

# image-processing - 调整图像大小和图像量化之间的区别？

> ID：12998564
> 
> 赞同：2
> 
> 时间：2012-10-21T14:08:45.513
> 
> 标签：image-processing, computer-vision

调整图像大小和量化图像有什么区别？据我了解，量化减少了图像中不同颜色的数量，同时在视觉上保留了分辨率，因此减少了其字节大小。但是通过最近邻插值方法调整大小允许我在不减少调色板的情况下压缩它。如果我的最终目标是减少内存消耗和处理时间，那么我应该为基于颜色的图像检索系统考虑哪种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:31:20.847

量化即将将连续图像转换为数字图像并且调整大小纯粹与数字有关，那么如何区分两者，两者都是不同的概念。
即连续图像，f(x, y)，当我们想要转换为数字形式时。图像可能在 x 和 y 坐标以及幅度上是连续的。要将其转换为数字形式，我们有在坐标和幅度上对函数进行采样。将坐标值数字化称为采样。将幅度值数字化称为量化。

# winjs - 检查 Internet 连接并在 WinJS 中停止执行

> ID：12998565
> 
> 赞同：2
> 
> 时间：2012-10-21T14:08:50.977
> 
> 标签：winjs

如果我的应用程序从一开始就需要互联网连接。找不到互联网后如何防止执行？

我知道如何检查。但我需要帮助才能停止进一步执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-17T09:21:40.103

```
var internetconection = new Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();
        if ((!('getNetworkConnectivityLevel' in internetconection)) || ((internetconection.getNetworkConnectivityLevel()) < 3)) {
            alert("internet not connected");
        }
else{
    alert("internet connected");
} 
```

试试这个，参考： http: [//www.codeproject.com/Tips/564389/Check-connection-with-WinJS](http://www.codeproject.com/Tips/564389/Check-connection-with-WinJS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:48:33.503

您可以像这个帖子答案一样检查de connection：This is for c#, but the same classes are available for javascrip

[如果没有互联网连接，则显示错误消息](https://stackoverflow.com/questions/12901513/display-error-message-if-theres-no-internet-connection)

[http://msdn.microsoft.com/en-US/library/windows/apps/windows.networking.connectivity.networkinformation.getinternetconnectionprofile](http://msdn.microsoft.com/en-US/library/windows/apps/windows.networking.connectivity.networkinformation.getinternetconnectionprofile)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:43:20.397

您可能已经添加（或像我经常做的那样从 MSDN 示例中借用代码）使用事件侦听器来处理 onNetworkStatusChange 事件。尝试使用 removeEventListener 删除它以停止进一步检查互联网连接。

# memory-management - 进程的内存分配

> ID：12998566
> 
> 赞同：0
> 
> 时间：2012-10-21T14:09:07.287
> 
> 标签：memory-management, process, operating-system

我阅读了以下有关进程内存分配的内容：

```
 One of the important considerations in main memory management is: how should an
  OS allocate a chunk of main memory required by a process. One simple approach
  would be to somehow create partitions and then different processes could 
  reside in different partitions. 
```

请注意，本段出现在分页概念之前，并且正在讨论一次对整个进程的内存分配。我的问题是：

```
 Why should we create partitions? We can just keep track of holes in the memory 
   and keep pointers to the beginning and end of the holes. When we allocate a
   process some memory, we can associate the pointer to the beginning and end of 
   the process with the process and end pointer of the process serves as the 
   pointer to the beginning of a new hole. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:18:15.977

我想答案是“效率”。如果你只想跟踪空洞，最坏的情况是空洞的数量等于给定内存块中字节的一半（内存块中的每个第二个字节都是一个“空洞”），这意味着对于每个内存给定大小的块，您需要额外数量的指针等于块大小的一半，例如：

块大小：1024B

最大“孔”数：1024/2 = 512

跟踪单个“洞”的每个指针都是 4B（在 32 位架构上），所以：512 * 4 = 2048B ！我希望我不必说服您这不是最佳解决方案。一些聪明的人发现，要“解决”问题，您需要更大的内存“粒度”。换句话说，操作系统只在一些固定大小的块（称为页）中分配内存。通常一页是 4KiB (4096B)。你可以这样想：当我们谈论内存分配**时，操作系统不是零售商**。操作系统仅在页面中分配内存。在进程级别上需要更小的分配粒度 - C 库的实现在那里发挥作用（C 库分配例程是**零售商**）例如：`malloc`，`free`功能和朋友。这些函数从操作系统分配内存（以页面为单位），然后跟踪“已使用”和“未使用”块（这只是一个简化：它要复杂得多，它们具有不同的“策略”，具体取决于请求的块）。

PS我知道这很笼统，但我不知道您目前对该主题的了解有多大。

# java - HashMap 与 LinkedHashMap 在值迭代中的性能（）

> ID：12998568
> 
> 赞同：35
> 
> 时间：2012-10-21T14:09:19.570
> 
> 标签：java, collections, hashmap, linkedhashmap

`HashMap`遍历函数和`LinkedHashMap`遍历函数之间有什么性能差异`values()`吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-21T14:43:53.420

我认为`LinkedHashMap`由于其出色的`nextEntry`实现，它的遍历速度必须更快`Iterator`

**这就是为什么：**

让我们一步一步从`values`实现开始。
的`HashMap`实现`values`是这样的：

```
public Collection<V> values() {
    Collection<V> vs = values;
    return (vs != null ? vs : (values = new Values()));
} 
```

`LinkedHashMap` 扩展自`HashMap`并继承相同的实现。

不同`Iterator`之处在于两者的实现`Values`。

因为`HashMap`它从 `java.util.HashMap.HashIterator`

```
private final class ValueIterator extends HashIterator<V> {
    public V next() {
        return nextEntry().value;
    }
} 
```

但因为`LinkedHashMap`它从`java.util.LinkedHashMap.LinkedHashIterator`

```
private class ValueIterator extends LinkedHashIterator<V> {
    public V next() { return nextEntry().value; }
} 
```

所以**差异**基本上归结为`nextEntry`实施。

因为`LinkedHashMap`它只是调用 e.after ，其中 e 是`Entry`，但是在遍历数组以找到下一个下一个时`HashMap`涉及到一些工作。`Entry[]`

**更新**`nextEntry()`：代码`HashMap`

```
final Entry<K,V> nextEntry() {
    if (modCount != expectedModCount)
        throw new ConcurrentModificationException();
    Entry<K,V> e = next;
    if (e == null)
        throw new NoSuchElementException();

    if ((next = e.next) == null) {
        Entry[] t = table;
        while (index < t.length && (next = t[index++]) == null)
            ;
    }
    current = e;
    return e;
} 
```

Entry[] 不是连续存储。（两者之间可能有空值）。如果你看一下上面的代码，它的作用是指向当前的 next 并通过遍历 Entry[] 找到下一个 next。

**但**我认为这种性能提升将以插入为代价。在这两个类中检查该`addEntry`方法作为练习。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-04-03T13:20:24.947

我编写了一个小分析程序，创建 100 万个键（整数）与 Boolean.TRUE，重复 100 次。发现以下内容：

```
HashMap:-
Create:  3.7sec
Iterate: 1.1sec
Access:  1.5sec
Total:   6.2sec

LinkedHashMap:-
Create:  4.7sec   (30% slower)
Iterate: 0.5sec   (50% faster)
Access:  0.8sec   (50% faster)
Total :  6.0sec 
```

垃圾收集没有这样做会在一定程度上污染数字，但是我认为 LinkedHashMap 比 HashMap 更有优势，我将在未来的代码中使用它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-21T14:25:22.767

几乎没有关系。问题是：你需要什么。如果元素的顺序相关，则必须使用`LinkedHashMap`. 否则你只是不需要它，所以使用`HashMap`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-21T14:21:11.640

最好的建议是“不要害怕尝试”，但我很确定它们非常相似。值集的 getter 是 O(1)，每个迭代器步骤也是如此。遍历链表与遍历哈希桶一样微不足道，可能有一个小优势有利于链表。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-21T14:29:54.197

我在 UnitTest 中尝试过，迭代 values() 10000 次，毫秒：806 vs 902。几乎相同。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-21T18:53:08.127

是的，在所有迭代中都会有相同的性能差异： 将花费`HashMap`与条目数加上哈希表大小成正比的时间，并且只花费与条目数成正比的时间。`LinkedHashMap``HashMap``LinkedHashMap`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-08T12:08:55.723

代码...

```
import java.lang.management.GarbageCollectorMXBean;
import java.lang.management.ManagementFactory;
import java.util.HashMap;
import java.util.HashSet;
import java.util.LinkedHashMap;
import java.util.Map;

public class MapTest
{
    public static void main(String[] args)
    {
        int iterations = 1000000;

        long time1, time2, time3;
        System.nanoTime(); //Just to make sure any possible overhead is done...though there shouldn't really be any

        int sequential[] = new int[iterations]; //Counting up from 0
        int random[] = new int[iterations]; //Same set of values, but randomized (no duplicates)
        HashSet<Integer> addedRandoms = new HashSet<>();
        for (int i = 0; i < iterations; i++)
        {
            sequential[i] = i;

            int randomVal = random(iterations);
            while (addedRandoms.contains(randomVal)) randomVal = random(iterations); //Get another random instead of sequentially finding another unused value, to prevent clumping
            addedRandoms.add(randomVal);
            random[i] = random(iterations);
        }

        HashMap<Integer, Integer> hashMap = new HashMap<>();
        LinkedHashMap<Integer, Integer> linkedHashMap = new LinkedHashMap<>();

        int gcRuns = 0, prevGCRuns;
        for (GarbageCollectorMXBean gcBean : ManagementFactory.getGarbageCollectorMXBeans()) gcRuns += gcBean.getCollectionCount();
        prevGCRuns = gcRuns;

        //Test
        time1 = System.nanoTime();
        for (int i : sequential) hashMap.put(i, 0);
        time2 = System.nanoTime();
        for (int i : sequential) linkedHashMap.put(i, 0);
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("Put: sequential key (from 0 to " + (iterations - 1) + "), no overwrites", time1, time2, time3, prevGCRuns);

        //Test
        time1 = System.nanoTime();
        for (int i : random) hashMap.put(i, 0);
        time2 = System.nanoTime();
        for (int i : random) linkedHashMap.put(i, 0);
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("Put: random key (between 0 and " + (iterations - 1) + " inclusive), all overwrites (exactly one per entry, random order)", time1, time2, time3, prevGCRuns);

        //Attempt GC
        System.gc();
        prevGCRuns = 0;
        for (GarbageCollectorMXBean gcBean : ManagementFactory.getGarbageCollectorMXBeans()) prevGCRuns += gcBean.getCollectionCount();

        //Test
        time1 = System.nanoTime();
        for (int i : sequential) hashMap.put(i, 0);
        time2 = System.nanoTime();
        for (int i : sequential) linkedHashMap.put(i, 0);
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("Put: sequential key (from 0 to " + (iterations - 1) + "), all overwrites (exactly one per entry, sequential order)", time1, time2, time3, prevGCRuns);

        //Empty maps
        hashMap = new HashMap<>();
        linkedHashMap = new LinkedHashMap<>();

        //Attempt GC
        System.gc();
        prevGCRuns = 0;
        for (GarbageCollectorMXBean gcBean : ManagementFactory.getGarbageCollectorMXBeans()) prevGCRuns += gcBean.getCollectionCount();

        //Test
        time1 = System.nanoTime();
        for (int i : random) hashMap.put(i, 0);
        time2 = System.nanoTime();
        for (int i : random) linkedHashMap.put(i, 0);
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("Put: random key (between 0 and " + (iterations - 1) + " inclusive), no overwrites", time1, time2, time3, prevGCRuns);

        //Test
        time1 = System.nanoTime();
        for (int i : sequential) hashMap.get(i);
        time2 = System.nanoTime();
        for (int i : sequential) linkedHashMap.get(i);
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("Sequential get, randomized internal keys", time1, time2, time3, prevGCRuns);

        //Test
        time1 = System.nanoTime();
        for (int i : random) hashMap.get(i);
        time2 = System.nanoTime();
        for (int i : random) linkedHashMap.get(i);
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("Random get, randomized internal keys", time1, time2, time3, prevGCRuns);

        //Set sequential keys
        hashMap = new HashMap<>();
        linkedHashMap = new LinkedHashMap<>();
        for (int i : sequential)
        {
            hashMap.put(i, 0);
            linkedHashMap.put(i, 0);
        }

        //Attempt GC
        System.gc();
        prevGCRuns = 0;
        for (GarbageCollectorMXBean gcBean : ManagementFactory.getGarbageCollectorMXBeans()) prevGCRuns += gcBean.getCollectionCount();

        //Test
        time1 = System.nanoTime();
        for (int i : sequential) hashMap.get(i);
        time2 = System.nanoTime();
        for (int i : sequential) linkedHashMap.get(i);
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("Sequential get, sequential internal keys", time1, time2, time3, prevGCRuns);

        //Test
        time1 = System.nanoTime();
        for (int i : random) hashMap.get(i);
        time2 = System.nanoTime();
        for (int i : random) linkedHashMap.get(i);
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("Random get, sequential internal keys", time1, time2, time3, prevGCRuns);

        //Test
        time1 = System.nanoTime();
        for (int i : hashMap.values()) ;
        time2 = System.nanoTime();
        for (int i : linkedHashMap.values()) ;
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("values() iteration, sequential internal keys", time1, time2, time3, prevGCRuns);

        //Set random keys
        hashMap = new HashMap<>();
        linkedHashMap = new LinkedHashMap<>();
        for (int i : random)
        {
            hashMap.put(i, 0);
            linkedHashMap.put(i, 0);
        }

        //Attempt GC
        System.gc();
        prevGCRuns = 0;
        for (GarbageCollectorMXBean gcBean : ManagementFactory.getGarbageCollectorMXBeans()) prevGCRuns += gcBean.getCollectionCount();

        //Test
        time1 = System.nanoTime();
        for (int i : hashMap.values()) ;
        time2 = System.nanoTime();
        for (int i : linkedHashMap.values()) ;
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("values() iteration, randomized internal keys", time1, time2, time3, prevGCRuns);

        //Test
        time1 = System.nanoTime();
        for (int i : hashMap.keySet()) ;
        time2 = System.nanoTime();
        for (int i : linkedHashMap.keySet()) ;
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("keySet() iteration, randomized internal keys", time1, time2, time3, prevGCRuns);

        //Set sequential keys
        hashMap = new HashMap<>();
        linkedHashMap = new LinkedHashMap<>();
        for (int i : sequential)
        {
            hashMap.put(i, 0);
            linkedHashMap.put(i, 0);
        }

        //Attempt GC
        System.gc();
        prevGCRuns = 0;
        for (GarbageCollectorMXBean gcBean : ManagementFactory.getGarbageCollectorMXBeans()) prevGCRuns += gcBean.getCollectionCount();

        //Test
        time1 = System.nanoTime();
        for (int i : hashMap.keySet()) ;
        time2 = System.nanoTime();
        for (int i : linkedHashMap.keySet()) ;
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("keySet() iteration, sequential internal keys", time1, time2, time3, prevGCRuns);

        //Test
        time1 = System.nanoTime();
        for (Map.Entry<Integer, Integer> entry : hashMap.entrySet()) ;
        time2 = System.nanoTime();
        for (Map.Entry<Integer, Integer> entry : linkedHashMap.entrySet()) ;
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("entrySet() iteration, sequential internal keys", time1, time2, time3, prevGCRuns);

        //Set random keys
        hashMap = new HashMap<>();
        linkedHashMap = new LinkedHashMap<>();
        for (int i : random)
        {
            hashMap.put(i, 0);
            linkedHashMap.put(i, 0);
        }

        //Attempt GC
        System.gc();
        prevGCRuns = 0;
        for (GarbageCollectorMXBean gcBean : ManagementFactory.getGarbageCollectorMXBeans()) prevGCRuns += gcBean.getCollectionCount();

        //Test
        time1 = System.nanoTime();
        for (Map.Entry<Integer, Integer> entry : hashMap.entrySet()) ;
        time2 = System.nanoTime();
        for (Map.Entry<Integer, Integer> entry : linkedHashMap.entrySet()) ;
        time3 = System.nanoTime();

        prevGCRuns = printAndReset("entrySet() iteration, randomized internal keys", time1, time2, time3, prevGCRuns);
    }

    protected static int printAndReset(String description, long time1, long time2, long time3, int prevGCRuns)
    {
        System.out.println(description);
        System.out.println("HashMap: " + (time2 - time1) + " nanos");
        System.out.println("LinkedHashMap: " + (time3 - time2) + " nanos");
        int gcRuns = 0;
        for (GarbageCollectorMXBean gcBean : ManagementFactory.getGarbageCollectorMXBeans()) gcRuns += gcBean.getCollectionCount();
        System.out.println("GC during test: " + (gcRuns != prevGCRuns));
        System.out.println();

        return gcRuns;
    }

    public static int random(int maxvalue)
    {
        return (int) ((double) maxvalue * Math.random());
    }
} 
```

输出...

```
Put: sequential key (from 0 to 999999), no overwrites
HashMap: 30190070 nanos
LinkedHashMap: 44618672 nanos
GC during test: false

Put: random key (between 0 and 999999 inclusive), all overwrites (exactly one per entry, random order)
HashMap: 118536111 nanos
LinkedHashMap: 110828524 nanos
GC during test: false

Put: sequential key (from 0 to 999999), all overwrites (exactly one per entry, sequential order)
HashMap: 25070771 nanos
LinkedHashMap: 23569874 nanos
GC during test: false

Put: random key (between 0 and 999999 inclusive), no overwrites
HashMap: 93353708 nanos
LinkedHashMap: 106686445 nanos
GC during test: false

Sequential get, randomized internal keys
HashMap: 38817600 nanos
LinkedHashMap: 39499373 nanos
GC during test: false

Random get, randomized internal keys
HashMap: 42636179 nanos
LinkedHashMap: 51062653 nanos
GC during test: false

Sequential get, sequential internal keys
HashMap: 19986540 nanos
LinkedHashMap: 19502021 nanos
GC during test: false

Random get, sequential internal keys
HashMap: 58083205 nanos
LinkedHashMap: 59547574 nanos
GC during test: false

values() iteration, sequential internal keys
HashMap: 21284921 nanos
LinkedHashMap: 18383069 nanos
GC during test: false

values() iteration, randomized internal keys
HashMap: 19616868 nanos
LinkedHashMap: 15392964 nanos
GC during test: false

keySet() iteration, randomized internal keys
HashMap: 18054895 nanos
LinkedHashMap: 16067725 nanos
GC during test: false

keySet() iteration, sequential internal keys
HashMap: 18764430 nanos
LinkedHashMap: 18604873 nanos
GC during test: false

entrySet() iteration, sequential internal keys
HashMap: 18493825 nanos
LinkedHashMap: 18067752 nanos
GC during test: false

entrySet() iteration, randomized internal keys
HashMap: 16252707 nanos
LinkedHashMap: 13175517 nanos
GC during test: false 
```

# ios - xcode ios-带计时器的本地通知

> ID：12998569
> 
> 赞同：2
> 
> 时间：2012-10-21T14:09:21.947
> 
> 标签：ios, xcode, notifications, uilocalnotification

我正在使用 a`UILocalNotification`来安排 a `UIAlertView`，效果很好。但是，如果用户在一段时间后（例如 1 分钟）没有响应通知，我需要“做一些事情”。`UIAlertView`另外，如果有其他方法可以做到这一点，我也不必使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:59:38.493

显示 UIAlertView 后，您可以使用 NSTimer 启动计时器。当计时器结束时，您可以执行您想要的特定操作。当用户点击 UIAlertView 中的按钮之一时，您将使计时器无效。

快速示例：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, UIAlertViewDelegate> {
    UIAlertView *alert;
    NSTimer *timer;
}

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    alert = [[UIAlertView alloc] initWithTitle:@"Test" message:@"test" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];

    timer = [NSTimer timerWithTimeInterval:4 target:self selector:@selector(timerTick:) userInfo:nil repeats:NO];
    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];

    return YES;
}

- (void)timerTick:(NSTimer*)timer
{
    [alert dismissWithClickedButtonIndex:-1 animated:YES];
}

- (void)alertViewCancel:(UIAlertView *)alertView
{
    [timer invalidate];
}

@end 
```

# java - 没有 volatile 关键字的原子语句被忽略

> ID：12998570
> 
> 赞同：2
> 
> 时间：2012-10-21T14:09:26.953
> 
> 标签：java, multithreading, concurrency, atomic, volatile

java并发教程指出：

> 对于引用变量和大多数原始变量（除了 long 和 double 之外的所有类型），读取和写入都是原子的。
> 对于声明为 volatile 的所有变量（包括 long 和 double 变量），读取和写入都是原子的。

我创建了一个简单的实验来测试这个

```
package experiment0;

public class Experiment0 {

    public static int i=9;

    public static void main(String[] args) {
        i=9;
        (new Thread(){
            public void run(){
                while(i==9){
                    //System.out.println("i==9");
                }
                System.out.println("\ni!=9");
            }
        }).start();
        (new Thread(){
            public void run(){
                try{
                    Thread.sleep(3000);
                    i=8;
                }catch(Exception e){

                }
            }
        }).start();
    }
} 
```

当我运行此代码时，程序永远不会终止！为了让它工作，我要么取消注释第一个线程的 while 循环内的行，要么声明`i`为`volatile`. 我错过了什么吗？文档是否错误，是否应该说在这种情况下所有原语都应声明为易失性？为什么要写`System.out`“解决”问题？它是否给第二个线程足够的时间来改变`i`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:22:48.667

写入是原子的意味着写入作为单个原子操作执行。除了赋值之前或之后的值，没有其他线程可以看到其他内容。

例如，在长值的情况下，赋值不是原子的，因为它实际上是作为两个操作执行的：一个分配前 32 位，另一个分配最后 32 位。因此，另一个线程可能会在仅执行两个操作中的一个之后读取变量的值，因此看到的值既不是前值也不是后值，而是“中间”值。

您的程序演示的是，在没有任何同步的情况下写入变量会导致线程之间的**可见性问题。**一个线程完成的写入操作对另一个线程不可见。这是由于每个处理器都有自己的缓存，并且在每次分配时都不会写入主存储器。为确保写入可见，您需要使变量为 volatile，或同步对变量的访问，或使用 AtomicInteger。

# c# - Math.POW(x,y) 从 x ^ y 获得不同的值

> ID：12998572
> 
> 赞同：2
> 
> 时间：2012-10-21T14:09:59.830
> 
> 标签：c#, javascript

在 JavaScript 中

```
215 ^ 150 = 65 
```

但是当我在 C# 中尝试时`Math.POW(215, 150)`，我得到了 Infinite

为什么不是`65`？我应该如何在 C# 中获得 65？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T14:12:10.097

您忘记了`^`运算符不是幂运算符，而是按位异或。

```
11010111 (215)
10010110 (150)  XOR
--------
01000001 (65) 
```

215 的 150 次方非常大，因此是无限的。

如果您想要 65，请使用`215 ^ 150`. `Math.POW(x,y)`但是，如果您想要 215 的 150 次方，那么您将需要使用可以支持的更大数字变量类型。我什至不确定[BigInteger](http://www.codeproject.com/Articles/2728/C-BigInteger-Class)库是否可以处理这种规模的操作，但如果您想要这样做，那么值得一试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T14:12:15.517

使用相同的语法。`215 ^ 150`在 c# 中确实是 65。

`^`表示 XOR（在 Javascript 和 c# 中）不是 Math.Pow(x,y)

[http://en.wikipedia.org/wiki/Exclusive_or](http://en.wikipedia.org/wiki/Exclusive_or)

# c++ - 如何在抽象类中声明重载运算符并在派生的非抽象类中覆盖它？

> ID：12998581
> 
> 赞同：8
> 
> 时间：2012-10-21T14:10:38.593
> 
> 标签：c++, polymorphism, operator-overloading, abstract-class

我正在尝试使用一些纯虚拟二元运算符编写一个抽象类，它应该由派生类实现以实现运算符多态性。这是一个简化的示例：

```
class Base {
public:
    virtual const Base& operator+ (const Base&) const = 0;
};

class Derived : public Base {
public:
    const Derived& operator+ (const Derived&) const;
};

const Derived& Derived::operator+ (const Derived& rvalue) const {
    return Derived();
} 
```

操作符现在做什么并不重要，重要的是它返回什么：它返回一个临时的 Derived 对象，或者对它的引用。现在，如果我尝试编译，我会得到：

```
test.cpp: In member function ‘virtual const Derived& Derived::operator+(const Derived&) const’:
test.cpp:12:17: error: cannot allocate an object of abstract type ‘Derived’
test.cpp:6:7: note:   because the following virtual functions are pure within ‘Derived’:
test.cpp:3:22: note:    virtual const Base& Base::operator+(const Base&) const 
```

怎么了？不是 operator+（Base 中唯一的纯虚函数）被覆盖了吗？为什么 Derived 也应该是抽象的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T14:18:29.623

尽管返回类型 in`Derived`可以与基类型共同变体，但您不能对参数类型做同样的事情。即，覆盖函数应如下所示：

```
class Derived : public Base 
{ 
public: 
    const Derived& operator+ (const Base&) const; 
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T14:33:40.900

这种重载对于普通的抽象类是不可能的。第一：你应该将+声明为非成员[重载运算符作为成员函数还是非成员（朋友）函数？](https://stackoverflow.com/questions/1905439/overload-operators-as-member-function-or-non-member-friend-function).

如果你真的需要这个功能，你能得到的最好的方法是从模板接口继承：

```
template<typename T>
class AddEnabled {
  public:
    friend T operator+ (T const& left, T const& right) {
      return left+=right;
    }
}; 
```

现在你写

```
class Foo: public AddEnabled<Foo>{
  Foo():mVal(0){
  }

  Foo& operator+=(Foo const& foo){
    mVal+=foo.mVal;
  }

 private:
  int mVal;
} 
```

如果您注释掉， `Foo& operator+=(Foo const& foo){`您将收到一个编译器错误，指出该运算符未实现。如果您想了解更多有关查找原理的信息[http://en.wikipedia.org/wiki/Barton%E2%80%93Nackman_trick](http://en.wikipedia.org/wiki/Barton%E2%80%93Nackman_trick)和[http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

HTH，马丁

# c# - 处理子/超类时覆盖 Equals(object obj) 的正确方法？

> ID：12998587
> 
> 赞同：1
> 
> 时间：2012-10-21T14:11:21.150
> 
> 标签：c#, .net, superclass, gethashcode, iequalitycomparer

我正在使用以下代码来测试 Equals

```
public override bool Equals(object obj)
{
    // Equals must return false on compares to null. 
    if (obj == null || GetType() != obj.GetType())
        return false;

    Foo fooItem = obj as Foo;

    return fooItem.FooId == this.FooId;
} 
```

如果 obj 是一个超类，我应该如何处理它？它应该总是返回假，还是有时它应该是真的？

我该如何进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:18:07.540

这实际上取决于您想要平等的含义。

我不认为我曾经允许不同班级之间的平等。不过，您可能有一个案例。

还要记住，您可以使用自定义[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx). 每当您想以一种不是真正通用的方式测试相等性时，这是一个很好的策略，因为这意味着其他情况下的其他代码不会被您的覆盖所困扰。每种类型只能覆盖 Equals 一次，但您可以拥有任意数量的比较器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:19:01.837

只需摆脱 GetType() 比较并将 obj as Foo 移动到第一行。

然后代码将是

```
public override bool Equals(object obj)
{
    var fooItem = obj as Foo;
    // Equals must return false on compares to null. 
    if (obj == null) {
        return false;
    }

    return fooItem.FooId == this.FooId;
} 
```

这假设所有 Foo 甚至派生一次都有意义的全值比较，或者实现上述覆盖的类`Equals`是密封的。

如果对所有 Foos（包括派生一次）没有有意义的值比较，那么我建议改用 IEqualityComaprer。与所有其他实例方法一样，如果它们确实是类型的一部分，而不仅仅是辅助方法，则应仅将它们包含在类层次结构中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:56:58.293

虽然在某些情况下，让不同类型的对象报告自己彼此相等可能很有用，但我强烈建议不要这样使用；我唯一能认为这是合理的情况是，如果所有类型都继承自一个公共基类，其中包括一个`Equals`使用各种虚拟方法的密封方法，询问对象它们支持哪些加速相等比较的方法，使用最好的可用方法方法，如果没有可用的加速方法，则将对象转换为规范形式并进行比较。

例如，考虑`ImmutableFloatingPointMatrix`实现双参数索引属性 getter 的抽象类型。如果两个矩阵具有相同的大小并且在相同的位置具有相同的值，则它们应该被认为是相等的。虽然派生类可以使用二维数组来保存矩阵的内容，但也可以使用许多其他存储方法。例如，可能有一个具体的`IdentityMatrix`类，它有一个`Size`字段，总是将它的维度报告为`Size`x `Size`，并且有一个索引属性，它对主对角线上的单元格返回 1.0，在其他地方返回 0.0。也可以有一个`DiagonalMatrix`使用单个的`Size`-item 数组来保存对角线上的东西。虽然可以通过检查所有相应的元素来比较任何两个矩阵的相等性，但是`DiagonalMatrix`通过`IdentitymMatrix`确保两个矩阵的大小相同并且数组中的所有项都等于 1.0（不打扰检查主对角线之外的任何点，因为不会有任何点）。

即使使用`Equals`可以合理定义语义的类型，以便不同类型的对象报告自己是平等的，这也可能不是最好的主意。在可以使用自定义的情况下`EqualityComparer`，这可能比一个奇怪的覆盖更好`Equals`。

# plone - 从 Plone 4.2.1 迁移的 Plone 4.3a2 给出了 Archetypes ImportError: cannot import name Schema 错误

> ID：12998588
> 
> 赞同：0
> 
> 时间：2012-10-21T14:11:22.523
> 
> 标签：plone, buildout

我一直在使用 Plone 4.2 没有问题，但想用即将推出的 Plone 4.3 测试我的网站。我编辑了我的构建以使用 Plone 4.3a2 并重新运行构建。

现在我明白了`ImportError: cannot import name Schema`。

这就是我的扩展部分现在的样子（我已经包含了对 Plone 4.2 的已注释掉的旧引用，它已被新的 Plone 4.3a2 url 替换）。

```
extends =
    deco.cfg
    toolbar.cfg
    users-ports.cfg
    base.cfg
    supervisor-cache-balancer.cfg
    products.cfg
#    versions.cfg
#    http://dist.plone.org/release/4.2-latest/versions.cfg
   http://dist.plone.org/release/4.3a2/versions.cfg
   pinnedversions.cfg 
```

重新运行构建并使用启动我的实例后`bin/client1 fg`

我得到以下回溯：

```
from Products.ATContentTypes.criteria import _criterionRegistry
  File "/home/plone/buildout-cache/eggs/Products.ATContentTypes-2.1.7-py2.7.egg/Products/ATContentTypes/criteria/__init__.py", line 123, in <module>
    from Products.ATContentTypes.criteria.relativepath import ATRelativePathCriterion
  File "/home/plone/buildout-cache/eggs/Products.ATContentTypes-2.1.7-py2.7.egg/Products/ATContentTypes/criteria/relativepath.py", line 7, in <module>
    from Products.Archetypes.public import Schema, DisplayList
ImportError: cannot import name Schema 
```

我什至尝试通过将以下内容添加到我的 pinnedversions.cfg 文件（在其他所有内容之后调用）来固定 Archetypes 和 ATContenttypes，以便构建使用旧版本（例如 Plone 4.2 中使用的那些）。

```
[versions]
Products.ATContentTypes = 2.1.7
Products.Archetypes = 1.7.14 
```

即使那样，它似乎还有更多， **ImportError: cannot import name Schema**错误仍然存​​在。不管我在 pinnedversions.cfg 文件中使用什么版本，它都不起作用。

我所有的调查都表明这应该“正常工作”。这是我到目前为止检查的内容：

1.  用于`bin/client1 debug`故障排除我发现`from Products.Archetypes import Schema`，`from Products.Archetypes.Schema import Schema`并且`from Products.Archetypes.atapi import Schema`所有工作。

2.  当我打开 Products.Archetypes public.py 文件时，它包含以下行：

    ```
     from Products.Archetypes.atapi import * 
    ```

    我的理解是这样一行可以从 public.py 导入 Schema

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:31:47.430

只是为了确认启用 products.kupu 也会给我带来问题。

该问题已在最新的 plone.app.upgrade 上得到修复，请参阅[https://github.com/plone/plone.app.upgrade/commit/676f43c9c9c56eb686e20a5d0c7319540e7bab3f](https://github.com/plone/plone.app.upgrade/commit/676f43c9c9c56eb686e20a5d0c7319540e7bab3f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:40:30.613

在干净的 4.3a2 buildout 和我的 buildout 之间进一步调查后，区别在于，从我的部分`Products.kupu`注释掉并重新运行 buildout 解决了问题。`Product.kupu``eggs`

我没有调查解决问题的原因，但确实如此。

# boolean-logic - 布尔代数：证明

> ID：12998589
> 
> 赞同：5
> 
> 时间：2012-10-21T14:11:23.177
> 
> 标签：boolean-logic, booleanquery

我在布尔代数中遇到以下问题，即

> A+A'B = A+B

我需要证明上面的部分。我的意思是它已经减少了我不能进一步减少它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-20T01:25:00.993

A+A'B = A.1 + A'B = A.(1+B)+A'B = A.1+A.B+A'B = A + B.(A+A') = A + B.1 = A + B

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T14:15:23.887

A + A'B = (A + A') (A + B) = 1 (A + B) = A + B

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T14:28:31.610

首先在两边取非，然后在两边应用德摩根定律：

```
L.H.S=

(A+A'B)'
=(A'.(A'B)')
=(A'.(A+B')) //again applied de-morgan's law in previous step
=(A'.A + A'B')
=A'B'

also apply De-morgans on RHS
(A+B)'
=A'B' 
```

因此 LHS = RHS

# jquery - 可拖动的图片恢复到堆的底部

> ID：12998590
> 
> 赞同：1
> 
> 时间：2012-10-21T14:11:40.333
> 
> 标签：jquery, z-index, jquery-ui-sortable, jquery-ui-draggable, jquery-ui-droppable

我是 jquery 的新手，所以如果我没有看到我想要实现的明显目标，我深表歉意。

我添加了 6 张图片，并将它们一张放在另一张上。我想要发生的是当用户将顶部图像拖走时，它会恢复到堆栈但在堆栈的底部。

这就是我必须要做的：

```
<div id=”pinboard”&gt;
 <ul>
 <li class="img"><img src="images/chalet.jpg" /></li>
 <li class="img"><img src="images/girl.jpg" /></li>
 <li class="img"><img src="images/iceland.jpg" /></li>
 <li class="img"><img src="images/ice.jpg" /></li>
 <li class="img"><img src="images/sail.jpg" /></li>
 <li class="img"><img src="images/whitemountains.jpg" /></li>
 </ul>
</div>

.img{
 list-style-type: none;
 position: absolute;
 -webkit-box-shadow: 0px 0px 10px #000;
 -moz-box-shadow: 0px 0px 10px #000;
 box-shadow:        0px 0px 10px #000;
 -webkit-transition:0.2s -webkit-transform linear;
 -moz-transition: 0.2s -moz-transform linear;
 transition:    0.2s transform linear;
 padding:15px 15px 40px 15px;
 background-color:white;

}

.ui-draggable-dragging {
 -webkit-transform: rotate(0deg) scale(1.2) !important;
 -moz-transform: rotate(0deg) scale(1.2) !important;
 -ms-transform: rotate(0deg) scale(1.2) !important;
 -o-transform: rotate(0deg) scale(1.2) !important;
 transform: rotate(0deg)     scale(1.2) !important;}

$('li').each(function(){
 xpos = Math.floor(Math.random()*920);
 ypos = Math.floor(Math.random()*420);
 rotation = Math.floor(Math.    random()*15);

 var rNum = (Math.random()*20)-2;  
  $(this).css( {   
    '-webkit-transform': 'rotate('+rNum+'2deg)',
    '-moz-transform': 'rotate('+rNum+'2deg)'
 });

}).draggable({revert: true}); 
```

我尝试过以各种方式使用可放置、可拖动、可排序。我也尝试过使用 zindex 来改变位置。

对此的任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:16:26.803

可能有更好的方法来做到这一点。
我使用了一些 css'ing 来解决这个问题： [见这里](http://jsfiddle.net/bldoron/pHLS3/2/)

对于未来的参考（如果没有更多的小提琴）：

```
$('.img').draggable();
$('.img').on('mouseup',function(){
    $(this).hide();
    var zI = $(this).css('z-index');
    if (zI == 1){
        var restart = 2;
        $('.img').css('z-index', restart);
        zI = restart;
    }
    $(this).css({
        'position': 'absolute',
        'left': '0px',
        'top': '0px',
        'z-index': zI-1
    });
    console.log(zI);
    $(this).show();
}); 
```

# css - 在 li 内删除画布下方的空间

> ID：12998598
> 
> 赞同：1
> 
> 时间：2012-10-21T14:12:46.610
> 
> 标签：css, html

> **可能重复：**
> [消除 HTML5 画布元素下方的幽灵边距？](https://stackoverflow.com/questions/9878090/eliminate-ghost-margin-below-html5-canvas-element)

我的 DOM 类似于：

```
<ul>
  <li><canvas width="200" height="300" /></li>
</ul> 
```

您可以[在 jsFiddle 中看到它](http://jsfiddle.net/drewnoakes/EjuuW/2/)。

尽管我已将所有边距和填充值设置为零，但`canvas`在`li`. 我已经尝试了很多方法来删除它，但显​​然我错过了一些东西。

Chrome 22、Firefox 15 和 IE 9 之间的行为是相同的，因此看起来不像是故障。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:59:06.657

添加`vertical-align:top`到画布将修复它。

**[jsFiddle 示例](http://jsfiddle.net/j08691/EjuuW/6/)**

# asp.net - 从 ASP.NET 页面异步调用 Web 服务没有用

> ID：12998600
> 
> 赞同：1
> 
> 时间：2012-10-21T14:12:52.337
> 
> 标签：asp.net, web-services, asynchronous

假设您必须从 ASP.NET 页面调用 Web 服务。如果你只是异步调用它是没有用的，因为

不会被释放的 CLR 线程池线程。相反，它将被阻止（或等待），直到收到来自 Web 服务的响应。我们得到的唯一好处是线程在收到来自 Web 服务的响应之前不会获得 CPU 时间（或计划执行）。

如果我们想获得异步调用 Web 服务的真正好处，它必须从异步处理程序（即异步页面）中完成。

从同步页面异步调用 Web 服务真的没用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:26:12.997

您可以同步或异步调用它：

[http://weblogs.asp.net/stevewellens/archive/2010/04/02/calling-web-service-functions-asynchronously-from-a-web-page.aspx](http://weblogs.asp.net/stevewellens/archive/2010/04/02/calling-web-service-functions-asynchronously-from-a-web-page.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:29:48.477

这取决于你想要做什么。一种会受益的场景是当您需要在同一个请求中调用多个不相关的 Web 服务时。

# java - 将字体添加到 Swing 应用程序并包含在包中

> ID：12998604
> 
> 赞同：17
> 
> 时间：2012-10-21T14:13:08.457
> 
> 标签：java, swing, fonts, awt, embedded-resource

我需要在我的 Java Swing 应用程序中使用自定义字体 (ttf)。如何将它们添加到我的包中并使用它们？

同时，我只是将它们安装在windows中然后使用它们，但我不希望应用程序的使用会如此复杂，在使用我的应用程序之前告诉用户安装字体不是很方便。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-21T14:18:11.590

您可以通过以下方式加载它们`InputStream`：

```
InputStream is = MyClass.class.getResourceAsStream("TestFont.ttf");
Font font = Font.createFont(Font.TRUETYPE_FONT, is); 
```

此加载的字体没有预定义的字体设置，因此要使用，您必须这样做：

```
Font sizedFont = font.deriveFont(12f);
myLabel.setFont(sizedFont); 
```

看：

[物理和逻辑字体](http://docs.oracle.com/javase/tutorial/2d/text/fonts.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-21T14:39:42.317

正如 Reimeus 所说，您可以使用`InputStream`. 您还可以使用`File`：

```
File font_file = new File("TestFont.ttf");
Font font = Font.createFont(Font.TRUETYPE_FONT, font_file); 
```

在这两种情况下，您都可以将字体文件放在项目的根目录或某个子目录中。根目录可能应该是运行程序的目录。例如，如果您的目录结构如下：

```
My_Program
|
|-Fonts
| |-TestFont.ttf
|-bin
  |-prog.class 
```

您将从`My_Program`目录中运行您的程序`java bin/prog`。然后在您的代码中传递给`InputStream`or的文件路径和名称`File`将是`"Fonts/TestFont.ttf"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-22T08:17:04.480

尝试这个：

```
@Override
public Font getFont() {
    try {
        InputStream is = GUI.class.getResourceAsStream("TestFont.ttf");
        Font font = Font.createFont(Font.TRUETYPE_FONT, is);
        return font;
    } catch (FontFormatException | IOException ex) {
        Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
        return super.getFont();
    }
} 
```

# parsing - ppi包解析pcap

> ID：12998608
> 
> 赞同：1
> 
> 时间：2012-10-21T14:13:35.040
> 
> 标签：parsing, field, packet, pcap, ppi

我在解析 PPI 帧格式的数据包时遇到了一些麻烦。我需要 802.11+mac+phy 字段，在 common 字段之后似乎我的偏移量有误。这是我的代码：

```
void process_packet(u_char *args, const struct pcap_pkthdr *header, const u_char *packet)
{
int offset = 0;

const struct ppi_packetheader *ppi_header = (struct ppi_packetheader *)(packet + offset);
offset += 8;

const struct ppi_fieldheader *ppi_80211_common = (struct ppi_fieldheader *)(packet + offset);
printf("common type: %d | len: %d\n", ppi_80211_common->pfh_type, ppi_80211_common->pfh_datalen);
offset += 4 + 20;

const struct ppi_fieldheader *ppi_80211_mac = (struct ppi_fieldheader *)(packet + offset);
printf("mac type: %d | len: %d\n", ppi_80211_mac->pfh_type, ppi_80211_mac->pfh_datalen);
offset += 4 + 27;

const struct ppi_fieldheader *ppi_80211_mac_phy = (struct ppi_fieldheader *)(packet + offset);
printf("mac+phy type: %d | len: %d\n", ppi_80211_mac_phy->pfh_type, ppi_80211_mac_phy->pfh_datalen);
} 
```

公共字段的输出是正确的，它显示 type: 2, len: 20。但其他值是错误的，就像 mac 字段 type: 64, len: 0 一样（mac+phy 看起来很相似）。是小/大端的问题还是我的错误在哪里？我一直在研究 Wireshark 的实现，但他们使用函数 tvb_get_letohs() 进行偏移，这非常复杂......希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:20:56.037

首先，您没有查看对齐位`pph_flags`- 如果已设置，则每个字段都在 4 字节边界上对齐，如果清楚，则字段不一定在 4 字节边界上对齐。但是，802.11-Common 字段的长度是 4 的倍数，字段标头的长度也是如此，因此，虽然您应该查看该位，但不会导致此*特定*问题。

而且，是的，“数据包头和字段头中的多字节整数必须存储为 little-endian。”，因此可能存在字节顺序问题。但是，这适用于`pfh_type`and `pfh_datalen`，因此，如果您在大端机器上应该对这些值进行字节交换（这​​就是`tvb_get_letohs()`正在做的事情 - 它正在从进行边界检查的 Wireshark 缓冲区中获取一个 Little Endian , 短（16 位）值，并将其转换为主机字节顺序；无论该字段是否在“自然”字节边界上对齐，它也可以工作），您显然是在小端机器上运行（如果它是一台基于 x86 的 PC - 包括所有基于 Intel 的 Mac - 您在 little-endian 机器上运行），因为公共字段的输出是正确的，所以'

 *第三，然而，你没有看`ppi_header->pph_len`！无法保证PPI 标头中存在*任何*特定字段 - 对于*每个*字段，您必须通过查看您是否超过 PPI 标头的长度来检查它是否存在。

当我在 Mountain Lion 上的 Retina MBP 上使用 PPI 标头捕获时，标头长度为 32 个字节，*唯一*存在的字段是 802.11-Common 字段 - 802.11n MAC+PHY Extensions 字段*不*存在（而且我们的网络是 802.11n 网络）。当您的代码认为它正在查看 802.11n MAC+PHY Extensions 字段时，它实际上可能正在查看 802.11 数据包中的 802.11 MAC 标头。*

# mysql - MySQL 从包含一些 Json 对象的表中查看没有 Json 的查询

> ID：12998610
> 
> 赞同：3
> 
> 时间：2012-10-21T14:13:41.220
> 
> 标签：mysql, sql, json

我一直在尝试从包含一些 Json 对象的现有 MySQL 表中创建一个没有 Json 的新 MySQL 视图。表 1 是当前表。表 2 是从表 1 派生的新 MySQL 视图。表 2 的内容将始终反映表 1 的内容。区别只是结构。

下面是我们示例上下文的简化表，其中实际上有 20 多列。

# 表 1（3 列）

```
user_id | name |          params
---------------------------------------------
   1    | john |{"age":"26","gender":"male"}
   2    | amy  |{"age":"28","gender":"female"} 
```

# 表 2（4 列）

```
user_id | name | age | gender
-----------------------------
   1    | john | 26  | male
   2    | amy  | 28  | female 
```

数据流程是这样的：用户在任何时候都可以从第三方自定义表单中输入数据并保存到表1中。但是数据需要从表2格式中提取，也可以在任何时候。

我们如何仅使用 SQL 查询来实现这一点？先感谢您。这肯定会帮助许多开发人员应对 Json 作为新标准。干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:55:45.160

假设上面的 table2，您可以使用相当难看的字符串函数组合来做到这一点：

```
SELECT user_id,name,
substring_index(substring(params,locate('age":"',params)+6),'"',1) as age 
from table_2 
```

您可以遵循相同的性别模式。

根据 JSON 格式的一致性，这有点脆弱。

忘了说文档可以在以下位置查看：[MySQL docs](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)

# objective-c - 在可变数组中访问我的注释

> ID：12998613
> 
> 赞同：0
> 
> 时间：2012-10-21T14:14:08.380
> 
> 标签：objective-c, xcode, arrays, nsmutablearray

在我的应用程序中，我添加了一些注释。我有一个带有共享实例的 AnnotationController，因此我可以在我的所有类中访问我的注释。我将添加的注释推送到一个可变数组中。

但是，我想将我的注释标题添加到 tableView，所以我想再次加载我的数组并访问我使用“initWithTitle”提供的参数。

像这样的东西：

```
[AnnotationController sharedInstance].annotations[1].title ? 
```

**编码**

```
NSArray *init = @[
    [[Annotation alloc] initWithTitle:@"America has a new President !" :@"Washington DC" :l1], // call method to add an annotation with these parameters
    [[Annotation alloc] initWithTitle:@"Revolutionary app by Belgium student" :@"Antwerp" :l2],
    [[Annotation alloc] initWithTitle:@"The new Arabic revolution" :@"Egypt, Tahir square" :l3],
    [[Annotation alloc] initWithTitle:@"World Championchip football" :@"Rio de Janeiro" :l4],
];

[AnnotationController sharedInstance].annotations = [[NSMutableArray alloc] initWithArray:init]; // add the above array to a mutablearray se we can add objects and edit them 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:54:46.403

使用此代码访问您的任何特定注释的标题

```
[[[AnnotationController sharedInstance].annotations objectAtIndex:0] title] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:33:10.393

如果要从数组中的对象中获取所有标题，可以使用 KVC

```
NSArray *annotations = [[AnnotationController sharedInstance] annotations];

NSArray *title = [annotations valueForKey:@"title"]; 
```

[取自NSArray](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BBCIBCDJ)的文档

> **valueForKey：**
> 返回一个数组，其中包含调用 valueForKey 的结果：对数组的每个对象使用键。

# javascript - void() 有什么用

> ID：12998620
> 
> 赞同：3
> 
> 时间：2012-10-21T14:14:32.707
> 
> 标签：javascript

编辑：澄清一下：我的问题不关心如何使用 void，而是 void 是否真的有用。我问这个是因为人们似乎使用它的方式非常令人反感......

运算符的[MDN 参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)提供了`void`一个正在使用的运算符的示例

```
<a href="javascript:void(0);">Click here to do nothing</a>
<a href="javascript:void(document.body.style.backgroundColor='green');">Click here for green background</a> 
```

不完全是我们现在处理点击事件的那种方式。

`void`这个世界上还有地方吗？有人可以给我看一个使用 void 的好例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T14:27:12.940

用例#1 `void(0)`，：如果你想要一个对真实的引用`undefined`（而不仅仅是变量，因为它可以被覆盖）你不需要`void`. 你可以像这样得到它：`(function(){}())`.

用例#2 `void(exp)`，：如果你想执行代码然后返回`undefined`，你当然可以通过将代码包装在一个函数中来做到这一点：`(function(){ exp; return undefined; }())`.

所以，不，我们不需要`void`. 它没有什么独特之处。虽然它比上述解决方案短，所以如果你喜欢简短而晦涩的代码，你可以使用它（但请不要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:39:59.860

Jakob 展示了`void`. 然而，正如他所提到`void`的，这并不是真正需要的，但我用它来测试`undefined`. 我用它来创建我自己的`typeOf`函数：

```
function typeOf(value) {
    if (value === null) return "null";
    if (value === void(0)) return "undefined";
    return Object.prototype.toString.call(value).slice(8, -1).toLowerCase();
} 
```

[你可以在这里](http://bonsaiden.github.com/JavaScript-Garden/#types.typeof "JavaScript花园")读到我为什么这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T14:20:12.893

void 是用于返回`undefined`值的运算符，因此浏览器将无法加载新页面。关于 void 运算符需要注意的重要一点是它需要一个值并且不能单独使用。

例子：-

```
 <a href="javascript: void(0)">I am a link</a> 
```

输出：-

```
 I am a link 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T14:19:58.317

void(0) 用于返回“未定义”，您可以只写“未定义”，也不要在 href 属性中使用该 javascript: - 因为它太旧了，它不适用于禁用 javascript 的用户，如果有人在新窗口中打开它，他们会看到类似 javascript:showPopup(27);

# javascript - Javascript 中的 DOM Parser（不使用 Web 服务器进行测试）

> ID：12998621
> 
> 赞同：1
> 
> 时间：2012-10-21T14:14:44.533
> 
> 标签：javascript, xml, dom

我正在尝试使用 JS 中的 DOM 解析器解析一个简单的 xml 文档，但解析器无法加载该文件。我正在使用来自*流行网站*的示例，我认为这会起作用。

我所有的文件都存储在我的本地计算机上（不使用网络服务器......使用 file:/// 而不是 http:// ）。

我的代码是

```
<html>
<head>
</head>
<body>
<script>
<script type="text/javascript">
 if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest();
  }
else // IE 5/6
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xhttp.open("GET","chinese.xml",false);
xhttp.send();
xmlDoc=xhttp.responseXML;

x=xmlDoc.documentElement.childNodes;
for (i=0;i<x.length;i++)
{
document.write(x[i].nodeName);
}
</script>
</body>
</html> 
```

我的 hmtl 和 xml 文件都位于同一个文件夹中。我不明白为什么这不起作用

xml文件是

```
<!DOCTYPE menu SYSTEM "chinese.dtd">
<menu>
  <dish>
     <name>Chicken Sweetcorn Soup</name>
     <price>1.60</price>
   </dish>
  <dish>
    <name>Spring Roll</name>
    <price>1.50</price>
  </dish>
  <dish>
    <name>Special Satay</name>
    <ingredients>King Prawn, Chicken, Beef with Vegetables</ingredients>
    <price>4.50</price>
  </dish>
  <dish>
    <name>Barbecued Spare Ribs</name>
    <price>3.99</price>
  </dish>
  <dish>
    <name>Sweet and Sour Pork</name>
    <style>Cantonese</style>
    <price>4.49</price>
  </dish>
</menu> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:01:54.397

由于安全原因，大多数浏览器（据我所知，Firefox 除外）不支持使用 AJAX 加载存储在您计算机上的本地 XML 文件（即不使用 Web 服务器提供的文件）。因此，如果您`file:///`在 Chrome 中本地测试脚本（使用 ），它将无法正常工作。

只需使用 Firefox 测试您的脚本或将其上传到服务器（我建议使用[XAMPP](http://www.apachefriends.org/en/xampp.html)）。

# ruby - Ruby/rails 中的活动记录属性和类型转换

> ID：12998627
> 
> 赞同：0
> 
> 时间：2012-10-21T14:15:25.250
> 
> 标签：ruby, ruby-on-rails-3.2

我在类型`attempts`的数据库中有一个属性`integer`（初始值为 0 ）

当我这样做时`@user.attempts += 1`，它会抛出`TypeError: can't convert Fixnum into String`

因此，我得出结论，rails 不会根据属性的数据类型自动转换属性。

当我做

```
@user.attempts.to_i +=1 
```

它抛出`NoMethodError: undefined method 'to_i=' for "0":String`

当我这样做时，

```
@user.attempts.to_i = @user.attempts.to_i + 1 
```

它再次抛出`NoMethodError: undefined method 'to_i=' for "0":String`。

和这个，

```
@user.attempts = @user.attempts.to_i + 1 
```

工作正常。

我认为原因是当我这样做时`@user.attempts.to_i + 1`，它实际上改变了`@user.attempts`左侧。

有人可以对这种行为有所了解吗？

**编辑**

*移民*

```
 class CreateUsers < ActiveRecord::Migration
      def change
        create_table :users do |t|
          t.string :email 
          t.string :email_pass 
          t.integer :attempts 
          t.timestamps
        end
      end
    end 
```

*创建表脚本*

```
-- Table: users

-- DROP TABLE users;

CREATE TABLE users
(
  id serial NOT NULL,
  email character varying(255), 
  email_pass character varying(255), 
  attempts character varying(255),
  created_at timestamp without time zone NOT NULL,
  updated_at timestamp without time zone NOT NULL, 
  CONSTRAINT users_pkey PRIMARY KEY (id )
)
WITH (
  OIDS=FALSE
);
ALTER TABLE users
  OWNER TO jashwant; 
```

我看到在 db`attempts`中是字符类型。

那么，改变其数据类型的正确方法应该是什么。我的第一个问题也很突出，这种类型转换的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:01:11.457

在迁移中使用 change_column：

```
rails g migration change_attempts_to_integer_for_users 
```

...

打开并编辑迁移

```
def self.up
  change_column(:users, :attempts, :integer)
end

def self.down
  change_column(:users, :attempts, :text)
end 
```

运行迁移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:32:59.250

当你`+=`这样使用时：

```
something += 1 
```

它与以下内容相同：

```
something = something + 1 
```

当你这样做时，

```
obj.method = val 
```

它与以下内容相同：

```
obj.method=(val) 
```

所以你实际上是在调用`#to_i=`不`@user.attempts`存在的。

当您这样做时`@user.attempts = @user.attempts.to_i + 1`，您的呼叫与此呼叫相同：

```
@user.attempts=(@user.attempts.to_i + 1) 
```

它存在，所以工作正常。

# dart - 是否可以在 Dart 编辑器中隐藏所有这些“包”文件夹？

> ID：12998632
> 
> 赞同：5
> 
> 时间：2012-10-21T14:16:45.733
> 
> 标签：dart, dart-editor

在我安装了包之后，似乎我们`packages`在项目的每个文件夹下都有这个文件夹。这真的有必要吗？Dart 不能只查找目录链来找到顶级`packages`文件夹并完成它吗？

或者至少，有没有办法隐藏其余的`packages`文件夹，因为它们会使视图混乱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:21:21.247

使用 M1 版本的编辑器，所有包符号链接都被隐藏。您应该只看到顶级包目录，而不是所有符号链接。如果你更新了你的编辑器（可能是重新安装）并且你仍然在文件视图中看到包符号链接，请在[http://dartbug.com/new](http://dartbug.com/new)上打开一个错误并粘贴你的编辑器版本和屏幕截图.

至于您的问题“为什么 Dart 不能直接走树？”，当您在 Web 服务器上提供 Dart 应用程序时，这很困难。可以从任何路径提供 Dart 文件，但没有“走树”的好概念……你能走多远？

包符号链接技术可以找到与你的 Dart 脚本相关的依赖项，这使得 Dart 的 Web 部署变得容易。

# haskell - Haskell 中的幂级数

> ID：12998635
> 
> 赞同：6
> 
> 时间：2012-10-21T14:17:06.687
> 
> 标签：haskell, power-series

我正在尝试用 Haskell 编写幂级数，

```
e^x = 1 + x + x^2/2! + x^3/3! + ... 
```

这样它就会输出

```
[1,1,1/2,1/6,...] 
```

到目前为止，我得到了：

```
factorial 0 = 1 
factorial n = n * factorial (n - 1)

powerSrs x = 1 : powerSrsFunc[1..] where
        powerSrsFunc ( p: xs ) = 
            p : powerSrsFunc[y | y <-xs, ( (x^y) / (factorial y) )] 
```

但是，我知道我在这里的输入是错误的。我收到此错误：

```
tut08.hs:8:58:
    No instance for (Integral Bool)
      arising from a use of `^'
    Possible fix: add an instance declaration for (Integral Bool)
    In the first argument of `(/)', namely `(x ^ y)'
    In the expression: ((x ^ y) / (factorial y))

    In a stmt of a list comprehension: ((x ^ y) / (factorial y))

tut08.hs:8:62:
    No instance for (Fractional Bool)
      arising from a use of `/'
    Possible fix: add an instance declaration for (Fractional Bool)
    In the expression: ((x ^ y) / (factorial y))
    In a stmt of a list comprehension: ((x ^ y) / (factorial y))
    In the first argument of `powerSrsFunc', namely
      `[y | y <- xs, ((x ^ y) / (factorial y))]' 
```

1）如何在 Haskell 中编写分数，使其输出类似于“1/2”？

2) 当他们说 (Integral Bool) 和 (Fractional Bool) 没有实例时是什么意思？

它是指两个类型为 Integral 和 Bool 的参数吗？

不需要积分和积分吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T14:32:37.523

在列表理解语法中，您具有三个主要部分。以您的代码为例

```
[y | y <-xs, ( (x^y) / (factorial y) )] 
```

从左边开始，您可以看到结果列表中的每个元素应该是什么。在您的情况下，只需 y。在竖线字符 (|) 之后，您将继续指定如何迭代输入列表。用英文“for each y in xs”。

最后一部分，也是你的问题，是过滤器。您可以放置​​一个逗号分隔的条件列表，这些条件都需要为真，以便列表推导不过滤掉当前的 y。与其在此处放置条件（是真还是假），不如在此处放置一个表达式，该表达式会产生一个数字。但是，我假设您实际上并不想过滤任何内容。相反，您希望输出该表达式的结果。所以它需要在管道字符的左侧。

```
[(x^y) / (factorial y) | y <-xs] 
```

至于显示有理数，请查看 Data.Ratio 包[http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Ratio.html](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Ratio.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T23:58:15.497

如果您有兴趣在 Haskell 中使用幂级数做更多事情，您应该查看 Douglas McIlroy（以 UNIX 闻名）的一篇精彩论文：[www.cs.dartmouth.edu/~doug/pearl.ps.gz](http://www.cs.dartmouth.edu/~doug/pearl.ps.gz)

在那里，他定义了幂级数的代数，允许您通过键入以下内容来定义幂：

```
expx = 1 + (integral expx) 
```

并且还涉及其他很酷的东西，比如生成函数。

# android - 使用 GPS 映射活动导致 JellyBean 模拟器崩溃

> ID：12998636
> 
> 赞同：1
> 
> 时间：2012-10-21T14:17:09.457
> 
> 标签：android, google-maps, android-mapview

我已经创建了一个应用程序，并且在带有 Gingerbread 的真实设备上运行良好（我目前没有任何其他设备）。问题：

如果我尝试在配置为使用 JellyBean 和 Google Api 的模拟器中运行相同的应用程序，则当我打开一个显示谷歌地图的活动时，崩溃而没有任何错误日志，只是屏幕变黑并且 Eclipse 打开一个调试透视图，显示

*“找不到来源”*

```
Thread [<1> main] (Suspended (exception RuntimeException))  
    <VM does not provide monitor information>   
    ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2059    
    ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2084 
    ActivityThread.access$600(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 130    
    ActivityThread$H.handleMessage(Message) line: 1195  
    ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 137 
    ActivityThread.main(String[]) line: 4745    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 511  
    ZygoteInit$MethodAndArgsCaller.run() line: 786  
    ZygoteInit.main(String[]) line: 553 
    NativeStart.main(String[]) line: not available [native method] 
```

...没有关于丢失的源代码或我的班级中导致 logcat 错误的行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T01:27:34.183

在以下情况下可能会发生这种情况：

A）您的活动不扩展 MapActivity（但如果在真实设备上工作，情况并非如此）

B）您的应用程序不导入 Google Api（但如果在真实设备上工作，情况并非如此）

C) 模拟器配置为使用 Android SDK 而不是 Google API

D）如果您调用，模拟器中有一些引用空值的行可能会发生这种情况`getLastKnownLocation(...)`：因为您的设备已经知道您的应用程序在智能手机上运行的任何位置，但在新的模拟器中不知道

做一些测试，让我知道问题是否仍然存在，发布您的活动代码。

# git - 如何恢复已删除的 Git 分支

> ID：12998639
> 
> 赞同：5
> 
> 时间：2012-10-21T14:17:15.857
> 
> 标签：git

如何恢复已删除的分支。

我做了“git push --prune”，似乎几乎所有的分支都被远程删除了。请帮我！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:36:47.100

您可以使用 git reflog。reflog 在这些情况下可以帮助您。有关详细信息，请参阅下面的链接：

[http://blag.ahax.de/post/421939327/recovering-a-deleted-branch-using-git-reflog](http://blag.ahax.de/post/421939327/recovering-a-deleted-branch-using-git-reflog)

# c# - 在 WPF 中使用 MDI 的选项

> ID：12998640
> 
> 赞同：0
> 
> 时间：2012-10-21T14:17:24.120
> 
> 标签：c#, .net, wpf, xaml, mdi

我正在尝试编写一个使用 MDI 的应用程序，因为我有一个大窗口和一个带有许多小子窗口的画布区域。这些小窗口可以在画布内调整大小、拖动和移动。

我已经通过使用这个库完成了上述工作：[http ://wpfmdi.codeplex.com/](http://wpfmdi.codeplex.com/)

但是，该库充满了错误并且非常严格（除了它是一个废弃的项目之外）。

因此，我想知道在 WPF 中使用 MDI 还有哪些其他选择。我认为编写一个类似于上面链接的库的代码太麻烦了——它基本上处理小窗口的拖动和调整大小，并确保它们不能被拖动到画布边缘之外。我认为自己编写代码并不容易。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:52:29.197

我又看了这个 MDI 库。我想我解决了这个问题。您希望 MdiChild 像单击它时那样最大化。

问题是，如果您在主窗口的构造函数中将 MdiChild 的 WindowState 设置为 Maximized，您将无法获得预期的大小调整。因此，您需要确保已加载主窗口，然后确保已加载 MdiChild。如果是这种情况，您可以以编程方式设置 MdiChild 的 WindowState 并获得预期的行为。

有关 Loaded-events，请参阅以下示例代码（查看下面的完整源代码）：

```
void Main_Loaded(object sender, RoutedEventArgs e)
{
    var mdiChild = new MdiChild
    {
        Title = "Window Using Code",
        Content = new ExampleControl(),
        Width = 500,
        Height = 450,
        Position = new Point(200, 30)
    };
    Container.Children.Add(mdiChild);
    mdiChild.Loaded +=new RoutedEventHandler(mdiChild_Loaded);
}

void mdiChild_Loaded(object sender, RoutedEventArgs e)
{
    if (sender is MdiChild)
    {
        var mdiChild = (sender as MdiChild);
        mdiChild.WindowState = WindowState.Maximized;
    }
} 
```

这是使它工作的[源代码。](http://sdrv.ms/RNhxp5)让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:20:38.820

我认为你应该使用它，它更酷：

[http://avalondock.codeplex.com/](http://avalondock.codeplex.com/)

它具有选项卡、可调整大小的可停靠窗格等。与 Visual Studio 非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T22:26:01.063

WPF 的新 MDI 选项：

[http://dragablz.net/2015/01/26/mdi-in-wpf-via-dragablz/](http://dragablz.net/2015/01/26/mdi-in-wpf-via-dragablz/)

GitHub项目：[https ://github.com/ButchersBoy/Dragablz](https://github.com/ButchersBoy/Dragablz)

# image - matlab fn 到 cuda 使用 ptx 或 nvmex

> ID：12998643
> 
> 赞同：1
> 
> 时间：2012-10-21T14:17:38.310
> 
> 标签：image, matlab, cuda, gpu, gaussian

我分析了我的 matlab 代码以识别最耗时的函数，它们大多是[梯度](http://www.mathworks.com/help/symbolic/gradient.html)，[此文件中的](http://users.isr.ist.utl.pt/~aguiar/gaussnewton.m)[Kron](http://www.mathworks.com/help/matlab/ref/kron.html) matlab 函数，以便将它们写入 cuda 内核，然后 PTX 并从 matlab 调用它们。任何想法或文章都会很好。也**m**和**b**的计算似乎是可分离的，这使它们成为分配给不同块的好候选者，这是[文件中的代码快照](http://users.isr.ist.utl.pt/~aguiar/gaussnewton.m)

 ****```
i2w=g0*aff(i2,a0);
[ix,iy]=grad(i2w);

ix=ix.*region;iy=iy.*region;
ix2=ix.^2;iy2=iy.^2;ixiy=ix.*iy;
it=i1-i2w;

m1=sum(sum(kron(ones(1,limy)',(1-centx:limx-centx).^2).*ix2));
m2=sum(sum(kron((1-centy:limy-centy)',(1-centx:limx-centx)).*ix2)); 
```

ps：我最近阅读了有关[NVMEX](http://www.mathworks.com/matlabcentral/fileexchange/24020-expectation-maximization-of-gaussian-mixture-models-via-cuda/content/gmmcuda/nvmex.m)的信息，或者在前面提到的此类代码上对此选项的一些帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T14:24:07.707

这是一个太长的问题，无法在一篇文章中回答，但我会给你两个提示。

如果您依赖此代码的性能足以花费大约 2 周的时间编写和测试 CUDA 代码，让我告诉您我的加速 Matlab 代码的方法：

**提示1：**

首先以这种方式（在 matlab 中）重写有问题的函数，使其仅使用循环、内存访问和可在 CUDA 手册中找到的基本函数，例如在伪 matlab 中的加法、乘法等-代码

```
 function result_array = MyFunctionToParallelise(constants,source_arrays)
    for x_idx=xcoords
     for y_idx=ycoords
      local_result=inner_function(x_idx,y_idx,constants,source_arrays(x_idx,y_idx));
      store(local_result to result_array(x_idx,y_idx));
     end
    end 
```

如果您这样做并且您的“inner_function”是可并行的（独立于其他 local_results，并且可以按 x_idx、y_idx 等的任何顺序获得），那么您就在家！

1.  用 C 写你的“inner_function”（你知道 C 和 MEX，对吗？），并确保它是可编译的，返回正确的结果，并在 mex 文件中使用内部 y_idx 的常规循环和外部 x_idx 循环的 OpenMP 化循环. 如果这样做，您通常会获得 4 倍的加速度！（由于 4 核 CPU 上的 openMP）。不需要工具箱和其他付费的东西 - 默认情况下，您可以在 Matlab 和 MEX 中获得。

2.  为“inner_function”编写一个 CUDA 启动器。无需商业工具箱。这是简单的部分！只需将“for 循环”替换为线程和块即可。. . . 并将其插入到您以前使用常规功能的 mex 文件中。在此步骤中，预计 C 的 10 倍 - 100 倍加速。

按照这种方法，您将能够在每一个小步骤中调试和验证正确性。根据我的经验，管理缓冲区指针和缓冲区大小的代码中的拼写错误是崩溃和错误结果的主要来源。快速获得错误结果毫无意义！

**提示 2：**对于一些复杂的函数（如 kron），如果你的输入和输出是固定大小的，则可能使用计算机代数系统获得寄存器级优化、线性、非迭代、非分支代码，如沃尔夫拉姆数学。此类代码在 GPU 上执行速度超快。示例：[使用 Mathematica 的公式优化编译器的示例](http://dziewierz.pl/refraction/efficient_refraction_solution.pdf)****

# php - codeigniter，转换为 utf 16 字符集，表单验证长度错误

> ID：12998644
> 
> 赞同：0
> 
> 时间：2012-10-21T14:17:43.753
> 
> 标签：php, codeigniter, validation, utf-16, utf

嘿家伙希望你能帮助我。

我需要制作一个用 php+codeigniter 编码的网站才能使用 utf 16 字符集。

所以要转换它，

我已将 database.php 设置转换为：

```
$db['default']['char_set'] = 'utf16';
$db['default']['dbcollat'] = 'utf16_unicode_ci'; 
```

我已将 config.php 设置为：

```
$config['charset'] = 'UTF-16'; 
```

这似乎解决了输出数据时引起的问题，但是我现在遇到了一个新问题。

我的表单验证检查开始失败，尤其是长度检查。

即在调试时我发现它使用 mb_strlen 函数将 admin@admin.com 作为长度 7。

***请注意，在字符集更改之前它工作正常！字符集更改后开始出现问题。***

* * *

更新：事实证明，如果您执行 mb_strlen($str,'utf-8') 我得到了正确的答案，这意味着我正在从表单中获取 utf-8 编码的字符串。

* * *

将 min_length 函数从

```
public function min_length($str, $val)
    {
        if (preg_match("/[^0-9]/", $val))
        {

            return FALSE;
        }

        if (function_exists('mb_strlen'))
        {

            return (mb_strlen($str) < $val) ? FALSE : TRUE;
        }

        return (strlen($str) < $val) ? FALSE : TRUE;
    } 
```

对此：

```
public function min_length($str, $val)
    {
        if (preg_match("/[^0-9]/", $val))
        {

            return FALSE;
        }

        if (function_exists('mb_strlen'))
        {
            echo $str,"<br/>";
            echo mb_strlen($str),"<br/>";
            echo $val;die();
            return (mb_strlen($str) < $val) ? FALSE : TRUE;
        }

        return (strlen($str) < $val) ? FALSE : TRUE;
    } 
```

我得到以下输出：

```
admin@admin.com
7
8 
```

即它以 admin@admin.com 作为长度 7！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:50:06.330

是的，它是正确的，因为转换后

```
 "admin@admin.com" = 摡業䁮摡業⹮潣
                        ^---------- after conversion to UTF-16 
```

和

```
 mb_strlen('admin@admin.com') // 15;
 mb_strlen('摡業䁮摡業⹮潣') // 7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:38:53.130

用这个：

```
 $utf16_string = unicode_encode($string, 'UTF-16');

   echo strlen($utf16_string); 
```

所以只有在将其转换为 utf-16 之后，strlen() - 才能正常工作

# php - 将变量使用限制为一个文件

> ID：12998648
> 
> 赞同：1
> 
> 时间：2012-10-21T14:18:09.110
> 
> 标签：php, model-view-controller, variables, views

有点奇怪的问题，但请耐心等待。我正在编写一个小型 MVC 框架，主要用于学习目的。当我加载视图时，我只包含视图文件然后使用`extract($data);`，这样我就可以在我的视图中使用变量。这是它在我的控制器中的样子：

```
// Assign view variables and load the views
$data = array('title' => 'testing the framework',
              'users' => $this->models['Users']->getAllUsers());
$this->loadViews(array('header', 'home', 'footer'), $data); 
```

它工作得很好，但我突然想到，如果我在项目的其他地方有任何变量被称为`$title`or `$users`，它们将与我正在执行`extract()`的内容冲突。这还没有成为问题，但我觉得我现在需要在它出现之前处理它。

我发现的唯一解决方案是为正在`extract()`编辑的变量使用前缀。所以我可以在我的模板中使用它们，`<?php echo $tpl_whatever; ?>`而不是`<?php echo $whatever; ?>`

任何人都可以提供一些建议吗？也许我可以限制变量范围？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:26:02.383

只有方法中的变量可能有冲突[请](http://php.net/manual/en/function.extract.php)[参阅变量范围](http://php.net/manual/en/language.variables.scope.php)，但如果发生这种情况，您可以使用额外的标志（例如.`EXTR_PREFIX_ALL`

您还可以查看`EXTR_PREFIX_SAME`或解决提取过程中可能存在的串通问题`EXTR_SKIP``EXTR_OVERWRITE`

你的变量

```
$name = "Baba";
$array = array("title" => "Restricting variable use to one file",
               "name"  => "James Dawson"); 
```

例子`EXTR_PREFIX_ALL`

```
extract($array,EXTR_PREFIX_ALL,"new");
var_dump($new_title,$new_name,$name);
           ^------------------------------ it now has prifix 
```

输出

```
string 'Restricting variable use to one file' (length=36)
string 'James Dawson' (length=12)
string 'Baba' (length=4) 
```

例子`EXTR_PREFIX_SAME`

```
extract($array, EXTR_PREFIX_SAME, "prifix");
var_dump($name,$title,$prifix_name);
                           ^------------------ Only Conflict has prifix 
```

输出

```
string 'Baba' (length=4)
string 'Restricting variable use to one file' (length=36)
string 'James Dawson' (length=12) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:27:09.760

不会与其他控制器发生冲突，因为您提取的 $data 变量是私有的。此外，如果您的变量在控制器函数中重复，则最后一个声明将是要使用的声明。

# javascript - 想了解一些关于Array的知识

> ID：12998654
> 
> 赞同：0
> 
> 时间：2012-10-21T14:18:40.787
> 
> 标签：javascript, arrays

这是我的代码，我从某个地方复制了这段代码以了解 Array。我对代码运行完美有一些问题，但我想知道在代码`var ascendingArray = new Array(10);`中是什么意思，`(10)`这条线在这里做`employees = employees.concat(newEmployees);`什么意味着这条线是什么意思。谢谢

```
<html>
<head>
<title>Array</title>
<script type="text/javascript">
var employees = new Array();
employees[0]='d';
employees[1]='b';
var newEmployees = new Array();
newEmployees[0]='c';
newEmployees[1]='a';
var ascendingArray = new Array(10);
var decendingArray = new Array(10);
document.writeln('<h3>Employee Names:</h3>');
document.writeln('<br>List Of Employee:<br/>');
employees = employees.concat(newEmployees);
for(var i=0; i < employees.length; i++)
{
    document.write("<ul><li>"+employees[i] + "</ul>");
}
ascendingArray=employees.sort();
decendingArray=ascendingArray.reverse();
document.writeln('<br>List of Employees in decending order:');
for(var i=0; i< decendingArray.length; i++)
{
    document.write("<ul><li>" + decendingArray[i] + "</ul>");
}
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:20:05.883

(10) 是告诉编译器它必须为 10 个元素分配内存的元素数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:22:16.840

和

```
new Array(10) 
```

您可以将数组的初始大小设置为 10。

```
employees.concat(newEmployees) 
```

意思是：将两个数组放在一个数组中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:25:44.440

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array) 说`new Array(length)`创建一个新的空`Array`然后将`length`它的属性分配给`length`传递的，所以我不认为它为 10 分配内存“任何”类型的对象。

concat 是一种将一些新值附加到现有数组的方法。

# javascript - jQuery fadeIn 在其回调中运行两次

> ID：12998656
> 
> 赞同：12
> 
> 时间：2012-10-21T14:18:46.670
> 
> 标签：javascript, jquery

```
var counter = 0;
jQuery("#div1, #div2").fadeIn('300',function(){
{
    counter++;
    console.log(counter);
} 
```

上面的代码将打印“1”和“2”，因为 jQuery fadeIn 隐含在两个不同的 DOM 对象上。有没有办法让它只运行一次而不破坏这段代码？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-21T14:24:25.943

一个简单的解决方案：

```
$("#div1").fadeIn(300);
$("#div2").fadeIn(300,function(){
   // do something only once
}); 
```

最干净的解决方案是使用[jQuery 的承诺系统](http://api.jquery.com/jQuery.when/)：

```
$.when($("#div1, #div2").fadeIn('300')).done(function(){
   // do something only once
}); 
```

[示范](http://jsfiddle.net/Uygru/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T14:21:24.877

您明确告诉它运行两次，因为您已经定义了两个项目的选择器。如果您希望它运行一次，请让它在一项上运行：

```
jQuery("#div1") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T14:24:14.110

这是一个快速的解决方案，但不是最好的

```
var myFlag = true;
jQuery("#div1, #div2").fadeIn('300',function(){
{
    if(myFlag == true)
    {
        // write the code here
        myFlag = false;
    }
} 
```

希望这会有所帮助……穆罕默德。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T14:25:14.883

在对代码进行排序方面：

```
jQuery("#div1, #div2").fadeIn('300',function(){
    counter++;
    console.log(counteR);
}); 
```

是相同的

```
jQuery("#div1, #div2").each(function(){
   jQuery(this).fadeIn('300',function(){
        counter++;
        console.log(counteR);
    } );   
}) 
```

所以你的回调将为每个元素触发

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-21T14:34:55.727

在 jQuery 1.6 中使用新的[.promise()](http://api.jquery.com/promise)，它是为了解决**多个回调**问题，像这样使用它：

```
var counter = 0;
jQuery("#div1, #div2").fadeIn('300').promise().done(function()
{
    counter++;
    console.log(counter);
}); 
```

# vhdl - 综合和仿真独立时钟分频器

> ID：12998658
> 
> 赞同：1
> 
> 时间：2012-10-21T14:19:01.733
> 
> 标签：vhdl

我是 VHDL 的新手，正在做家庭作业。

我有一个使用通用的非常简单的时钟分频器。（这是一个计数器/分隔符。）

```
-- the actual divider will be 2.1e6 or so (25Mhz down to 15hz)
run_divider : clk_divider
--pragma synthesis off
    generic map(clkmax => 4) -- simulation
--pragma synthesis on
    generic map(clkmax => 50000) -- synthesis
      port map( clk_in => mclk,
                reset => rst,
                clk_out => divider_out ); 
```

我在 VHDL 中部分使用[了#ifdef 的等效项来进行模拟/综合分离？](https://stackoverflow.com/questions/5118378)使用上面的编译指示。但是，这仅适用于综合，但在模拟中是语法错误。

除了使用外部工具（建议的另一个答案是 M4、C 预处理器）之外，还有没有更好的方法来为合成和模拟提供单独的代码？当我在综合和仿真之间切换时，我不想担心这些常数。

[如何使用 VHDL 将 24MHz 和 12MHz 时钟转换为 8MHz 时钟的](https://stackoverflow.com/questions/5988389)答案？告诉我计数器/分频器不是最佳解决方案，但它对我的作业来说足够简单:-)

我的完整分隔符代码在这里： [https ://github.com/linuxlizard/vhdl/blob/master/divider.vhdl](https://github.com/linuxlizard/vhdl/blob/master/divider.vhdl)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:24:12.743

正如西蒙所说，您可以使用带有`generate`- 如果您将此代码放入某个实用程序包中的标志，则可以在整个设计中使用它。或者，如果它是一次性的，则将其添加到本地架构中：

```
constant in_simulation : boolean := false
--synthesis translate_off
                                    or true
--synthesis translate_on
; 
```

一个可能有用的替代方法是：

```
constant in_simulation : integer  := 0
--synthesis translate_off
                                    + 1
--synthesis translate_on
;

constant in_synthesis : integer  := 1
--synthesis translate_off
                                    - 1
--synthesis translate_on
; 
```

在您的情况下，可以使用它来执行以下操作：

```
constant clkmax_coefficient : integer := 4*in_simulation + 50000*in_synthesis;

run_divider : clk_divider
    generic map(clkmax => clkmax_coefficient)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:07:59.120

模拟器给你一个语法错误是正确的，因为你在代码中有两个通用语句。

最简单的方法是在设计中将 50000 设为默认值，然后将代码修改为：

```
 -- the actual divider will be 2.1e6 or so (25Mhz down to 15hz)
run_divider : clk_divider
--pragma synthesis off
    generic map(clkmax => 4) -- simulation
--pragma synthesis on
      port map( clk_in => mclk,
                reset => rst,
                clk_out => divider_out ); 
```

这样，对于仿真，您将`clkmax`设置为 4，对于综合，它将设置为默认值 50000。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:43:59.780

您可以将该语句与包中的标志`generate`结合使用。`boolean`

```
g_simulation : if SIMULATION_FLAG generate
    run_divider : clk_divider
    generic map(clkmax => 4) -- simulation
    port map(clk_in => mclk,
        reset => rst,
        clk_out => divider_out);
end generate g_simulation;

g_synthesis : if not SIMULATION_FLAG generate
    run_divider : clk_divider
    generic map(clkmax => 50000) -- synthesis
    port map(clk_in => mclk,
        reset => rst,
        clk_out => divider_out);
end generate g_synthesis; 
```

您也许可以编写一个简单的模拟/综合脚本，`SIMULATION_FLAG`在编译源代码之前设置它（或者如果您不需要经常手动更改它）。

# knockout.js - Knockoutjs + ko.mapping.fromJS + 计算字段不计算计算

> ID：12998663
> 
> 赞同：2
> 
> 时间：2012-10-21T14:19:47.623
> 
> 标签：knockout.js, computed-observable, computed-values

我尝试这样做：

```
myData = {weight: 100, anotherWeight: 120.55}; // when my data is plain json - all work

$.when($.getJSON(url, {param}, function(data) {myData = data} ).   
 //when i got it from ajax - dosn't work
then(function(){
  var taskModel = function(data)
  {
    var self = this;
    ko.mapping.fromJS(data, {}, self);
    this.computedWeight = ko.computed(function () { return self.weight() + 
       ' ---- ' + 
       self.anotherWeight() + ' kg'; });
  }
  ko.applyBindings(new taskModel(myData));
});

<input type="text" data-bind="value: weight"/><br/>
<input type="text" data-bind="value: anotherWeight"/><br/>
<span data-bind="text: computedWeight"></span> 
```

第一次 - 加载后 - computedWeight 计算正确。但是当我改变 weight 或 anotherWeight 字段时 - computedWeight 不会改变。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:14:09.147

Try `ko.mapping.fromJSON()` instead of `ko.mapping.fromJS()`

# android - 如何通过gps在android中进行签到

> ID：12998669
> 
> 赞同：0
> 
> 时间：2012-10-21T14:20:20.603
> 
> 标签：android, gps, area, checkin

我希望当我进入某个区域时，我的 android 应用程序会自动向我显示一条消息，表明我在这个区域（比如说我的办公室），所以当我进入办公室时，应用程序会显示我正在办理登机手续，而当我离开办公室时，我会显示该支票出消息。

我可以得到我当前的位置（**纬度/经度**）这是 gps 的代码

GPStraker.java

```
 package com.example.gpstracking;

 import android.app.AlertDialog
  import android.app.Service;
        import android.content.Context;
 import android.content.DialogInterface;
 import android.content.Intent
 import android.location.Location;
 import android.location.LocationListener;
 import android.location.LocationManager;
 import android.os.Bundle;
 import android.os.IBinder;
 import android.provider.Settings;
 import android.util.Log;

        public class GPSTracker extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 3; // 3 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 ; // 1 sec

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null){
        locationManager.removeUpdates(GPSTracker.this);
    }       
}

/**
 * Function to get latitude
 * */
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * On pressing Settings button will lauch Settings Options
 * */
public void showSettingsAlert(){
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();
}

//@Override
public void onLocationChanged(Location location) {
}

//@Override
public void onProviderDisabled(String provider) {
}

//@Override
public void onProviderEnabled(String provider) {
}

//@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

//@Override
public IBinder onBind(Intent arg0) {
    return null;
}
    } 
```

AndroidGPSTrackingActivity .java

```
package com.example.gpstracking;

   import android.app.Activity;
   import android.os.Bundle;
   import android.view.View;
 import android.widget.Button;
   import android.widget.TextView;
   import android.widget.Toast;

  public class AndroidGPSTrackingActivity extends Activity {

Button btnShowLocation;
TextView t;

// GPSTracker class
GPSTracker gps;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnShowLocation = (Button) findViewById(R.id.btnShowLocation);
    t = (TextView) findViewById(R.id.textView1);

    // show location button click event
    btnShowLocation.setOnClickListener(new View.OnClickListener() {

    //  @Override
        public void onClick(View arg0) {        
            // create class object
            gps = new GPSTracker(AndroidGPSTrackingActivity.this);

            // check if GPS enabled     
            if(gps.canGetLocation()){

                double latitude = gps.getLatitude();
                double longitude = gps.getLongitude();
                t.setText("Your Location is - \nLat: " + latitude + "\nLong: " + longitude);
                // \n is for new line
                Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();    
            }else{
                // can't get location
                // GPS or Network is not enabled
                // Ask user to enable GPS/network in settings
                gps.showSettingsAlert();
            }

        }
    });
}

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:22:03.753

尝试查看[LocationManager.addProximityAlert()](http://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert%28double,%20double,%20float,%20long,%20android.app.PendingIntent%29 "LocationManager.addProximityAlert()")

文档摘录：

> 为由位置（纬度、经度）和给定半径给出的位置设置接近警报。当设备检测到它已**进入**或**离开**该位置周围的区域时，给定的 PendingIntent 将用于创建要触发的 Intent。

# objective-c - 使用自定义 UITableViewCell 进行自动布局

> ID：12998672
> 
> 赞同：10
> 
> 时间：2012-10-21T14:20:32.390
> 
> 标签：objective-c, cocoa-touch, ios6, autolayout

如何使用自动布局获取自定义 UITableViewCell 的内容以移动和调整大小？

为了使问题更清楚，我已将`contentView`自定义单元格的 指定为浅灰色背景色。为了将这个问题减少到可能的最小问题，我的自定义单元格只有一个显示一些黄色星星的`UIImageView`名称；`ratingImageView`下图中可以看到三个这样的细胞。

![具有自定义单元格和自动布局的表格视图](../Images/0cebb2de8747c485b45ae15c8038cb14.png)

我`ratingImageView`的只有 4 个约束；（1）宽度=81，（2）高度=40，（3）将中心Y对齐到superview，（4）尾随空间到superview =20。当标准删除按钮出现在滑动删除时，我本来希望超级视图约束的尾随空间强制图像视图向左移动。然而，它不是，如下图所示。

![自定义单元格内容不随自动布局移动](../Images/eaeff611e18ef681d867e8837ac70b43.png)

我尝试了许多不同的约束组合，但无法`ratingImageView`像我期望的那样进行转变。

我通过一个很好的[介绍性故事板教程](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)遇到了这个问题。使用良好的旧支柱和弹簧进行这项工作没有问题，但我决定尝试使用 Auto Layout 并且没有运气。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T19:23:12.930

当我`ON`为[教程](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)打开 Autolayout 时，我遇到了同样的问题。

问题是由于约束`Horizontal Space (20)`。默认情况下，此约束的优先级设置为`1000`高优先级。因此，当显示按钮时，imageView 遵守约束并使其自身保持在其位置，而不会重新定位对应于 UITableViewCell 的（在本例中为 PlayerCell）内容视图`delete`。

在与我的同事合作中，我们找到了解决此问题的方法。以编程方式将约束添加到 ratingImageView 解决了这个问题。如果有人有比这更好的解决方案，请在此处发布。

1.  打开故事板并选择 PlayerCell 并展开其约束。
2.  选择约束“ `Horizontal Space (20)`”并在属性检查器中将其优先级设置为任何较低的值。
3.  `cellForRowAtIndexPath`在 PlayersViewController.m 文件中，在tableView 的委托方法中添加以下代码：

    `UIImageView *ratingImageView = cell.ratingImageView;
    NSDictionary *dict = NSDictionaryOfVariableBindings(ratingImageView); [cell.contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[ratingImageView]|" options:0 metrics:nil views:dict]];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T13:35:57.863

在我的情况下，我已经删除了右约束，然后我再次添加了它，但这次没有选中“限制到边距”复选框。默认选中此复选框。

# jsf - 将通过页面获取的值传递给 commandButton 按下时的托管 bean

> ID：12998675
> 
> 赞同：0
> 
> 时间：2012-10-21T14:20:41.117
> 
> 标签：jsf

我需要为 bean 设置一个值，该值是通过请求范围内的托管 bean `#{pim}`（当页面最初加载时）`#{requestScope}`在按下 commandButton 时在页面上检索到的。但是，当按下命令按钮时，它使用新实例化的`#{pim}`bean 的值，该值将为空。

```
 #{pim.targetId}

        <p:commandButton value="View">    
            <f:setPropertyActionListener value="#{pim.targetId}" target="#{requestScope.id}" />  
        </p:commandButton> 
```

但这不起作用，因为`#{pim}`包含值的 bean 在请求后被销毁。我希望它能够工作，希望它能分配页面加载时检索到的值，但它不能那样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:02:24.760

使用`<f:param>`而不是`<f:setPropertyActionListener>`. 前者在渲染命令按钮期间直接在生成的 ajax 脚本中设置请求参数，而后者在处理表单提交期间完全在服务器端设置属性（因此已经丢失，因为这涉及全新的请求，它是请求范围属性）。

```
<f:param name="id" value="#{pim.targetId}" /> 
```

和

```
@ManagedProperty("#{param.id}") 
private Long targetId; 
```

# mysql - 加快 WooCommerce 进口

> ID：12998676
> 
> 赞同：1
> 
> 时间：2012-10-21T14:20:48.457
> 
> 标签：mysql, import, woocommerce

我刚刚将大约 7,000 种产品导入到我的数据库中，接下来还会有数千种产品。我有一个 VPS，在导入过程中它只显示我使用了大约 25% 的资源。当我第一次开始导入时，它们每 15 秒左右插入 1 个，现在每个产品需要 3 分钟或更长时间。有没有办法加快 MySQL 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T15:05:01.923

如果您还没有完全放弃 WooCommerce，请查看 WP All Import - [http://www.wpallimport.com/](http://www.wpallimport.com/)

它允许您以块的形式导入大文件，以便更快地导入。我用它来管理拥有超过 15,000 种产品的 WooCommerce 商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:04:50.373

不可以。插件必须检查每个导入的产品与预先存在的产品。因此，您添加的越多，它的速度就越慢。如果您有 10k+ 产品，您可能需要考虑为商店设计的 CMS，而不是 WP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T08:59:42.533

### 1\. 图片

最慢的事情通常是远程图像获取。我不知道您要导入什么字段结构，但如果有图像，则导入工具（如 WebToffee）必须检查远程 URL 以自行下载图像，并且一个产品可以包含多个，因此这需要一段时间。因此，只要有可能，请删除任何带有图像链接的列。

### 2.列数

如果您只是更新现有行，请将输入限制为可能已更改的列。像价格、库存等，但不是产品规格和描述。

### 3.并发访问

如果有人在导入时访问该站点，则读取和写入将相互等待，因此速度会慢很多。如果可能，请使用 cron 作业进行导入，并选择流量较低的时间窗口。

# asp.net-mvc-3 - 带有 AD 环境的 ASP.NET MVC 3 应用程序

> ID：12998679
> 
> 赞同：1
> 
> 时间：2012-10-21T14:21:25.657
> 
> 标签：asp.net-mvc-3, active-directory

我正在使用 ASP.NET MVC3 开发一个应用程序，我必须授予对客户端的访问权限才能查看一些文件，这些文件在本地服务器中并且永久更改我们在活动目录环境中工作我需要有一个想法如何给这以安全的方式访问。我是否需要以只读方式创建用户并从应用程序对他进行身份验证我需要想象场景以及如何使其工作 请给一些想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:33:11.413

由于您使用的是 Active Directory，因此您可以使用 Windows 身份验证连接您的应用程序。

然后，您可以将 IIS 设置为使用模拟并将组策略应用于您希望应用程序访问的文件夹。

[这是来自微软的一个很好的教程。](http://msdn.microsoft.com/en-us/library/gg703322%28v=vs.98%29.aspx)

# css - 不希望帖子标题下方的 div 在摘录中显示

> ID：12998680
> 
> 赞同：0
> 
> 时间：2012-10-21T14:21:35.047
> 
> 标签：css, wordpress

我想在帖子标题正下方设置一个 div，它浮动到左侧并包含一个 adsense 300x250 块，然后帖子内容在右侧环绕它。在查看单个帖子时，所有这些都可以正常工作......但是当我转到显示所有帖子摘录的博客主页时，它会在其中显示我不想要的 div。

我尝试使用 CSS 更正此问题，只是尝试专门针对主页上的 div 并将其设置为不显示（即 .post_content.myAd{display:none;...}），然后通过定位使其可见具体的（即 .single.myAd{display:inline;...} 因为我的广告 div 'myAd' 位于主页上的 .post_content 内，但在单个博客文章的 .single 内）。

这是我的完整CSS：

```
.single.aboveVideoAd{
position: relative;
display:inline;
float: left;
width: 300px;  
height: 250px; 
margin-right: 15px; 
margin-bottom: 15px;
}

.post_content.aboveVideoAd{
display:none;
} 
```

根据要求，这是我的 index.php 循环的 html（显示摘录）和单个帖子的 single.php：

index.php： http: [//pastebin.com/62gQfh2h](http://pastebin.com/62gQfh2h)

单.php：http : [//pastebin.com/x18G56CA](http://pastebin.com/x18G56CA)

有任何想法吗？我已经看到大量的网站在帖子下有广告块并且没有这个问题，所以我觉得应该有一个更简单的解决方法，而不是必须弄乱css。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:34:08.247

这是一个从文本中去除标签及其内容的函数：http: [//se2.php.net/manual/en/function.strip-tags.php#86964](http://se2.php.net/manual/en/function.strip-tags.php#86964)

为了使事情更容易，我将重现它：

```
<?php 
function strip_tags_content($text, $tags = '', $invert = FALSE) { 

  preg_match_all('/<(.+?)[\s]*\/?[\s]*>/si', trim($tags), $tags); 
  $tags = array_unique($tags[1]); 

  if(is_array($tags) AND count($tags) > 0) { 
    if($invert == FALSE) { 
      return preg_replace('@<(?!(?:'. implode('|', $tags) .')\b)(\w+)\b.*?>.*?</\1>@si', '', $text); 
    } 
    else { 
      return preg_replace('@<('. implode('|', $tags) .')\b.*?>.*?</\1>@si', '', $text); 
    } 
  } 
  elseif($invert == FALSE) { 
    return preg_replace('@<(\w+)\b.*?>.*?</\1>@si', '', $text); 
  } 
  return $text; 
} 
?> 
```

这可以绑定到 get_excerpt，

```
add_filter( 'get_the_excerpt', function( $content ) {
    return strip_tags_content( $content, '<div>', TRUE );
}); 
```

我没有测试过这段代码。

# c# - 在这种情况下如何避免服务位置？（忍者）

> ID：12998688
> 
> 赞同：0
> 
> 时间：2012-10-21T14:21:50.167
> 
> 标签：c#, inversion-of-control, ninject, metadata

我有一组`***Converter`继承自的对象，`IConverter`目的是从字符串或 XML 反序列化对象：

```
public interface IConverter
{
    object Convert(object value, Type targetType);
} 
```

（我不知道编译时的类型，所以我不能在这里使用泛型）。

我使用 a`ConvertsAttribute`来标记转换器可以转换的类型，然后将其加倍为 Ninject `ConstraintAttribute`：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Parameter | AttributeTargets.Property, AllowMultiple = true, Inherited = true)]
public class ConvertsAttribute : ConstraintAttribute
{
    public Type TargetType { get; private set; }
    public ConvertsAttribute(Type t)
    {
        TargetType = t;
    }

    public override bool Matches(IBindingMetadata metadata)
    {
        return metadata.Has("Converts") && metadata.Get<Type>("Converts") == this.TargetType;
    }
}

[Converts(typeof(Int32))]
[Converts(typeof(Single))]
[Converts(typeof(String))]
[Converts(typeof(Double))]
public class BasicConverter : IConverter
{
    public object Convert(object value, Type targetType)
    {
        return System.Convert.ChangeType(value, targetType);
    }
} 
```

在我的序列化模块中绑定转换器时，我在“Converts”下附加了类型元数据：

```
 private void BindConverter(Type typeInfo)
    {
        var converterAttributes = typeInfo.GetCustomAttributes(typeof(ConvertsAttribute), true);

        foreach (var attribute in converterAttributes.Cast<ConvertsAttribute>())
            Bind<IConverter>().To(typeInfo).WithMetadata("Converts", attribute.TargetType);
    } 
```

解析类型时，我可以在容器中查询转换特定类型的转换器：

```
 private IConverter GetConverter(Type t)
    {
        return converterKernel.Get<IConverter>(metadata => t == metadata.Get<Type>("Converts"));
    } 
```

但是，这意味着我必须在我的类构造函数中获取 IKernel 实例并在运行时查询它，这是我想避免的（闻起来我可以查询我的 convertKernel 以获取非 IConverter 对象）。

我可以简单地`IEnumerable<IConverter>`在构造函数中请求，然后在每个转换器的类型上查询 ConvertsAttribute，但我想知道是否有办法利用 Ninject 的元数据为我执行此操作......我可以`IEnumerable<IConverter>`在构造函数中请求**附加元数据**吗？在这种情况下，我想构建一个类型的字典，`IDictionary<Type, IConverter>`这意味着我不必查询容器本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:10:52.157

> 我不知道编译时的类型，所以我不能在这里使用泛型。

在编译时不知道类型，并不意味着您不能使用泛型。相反，我认为你应该使用泛型，因为：

*   它允许您（轻松地）通过它们的通用接口批量注册这些类型，
*   它允许您一次请求正确的转换器，而不必请求全部并遍历它们以找出要使用的转换器，并且不必用 a 装饰类型`ConvertsAttribute`（因为通过实现该信息已经在元数据中可用）通用接口），
*   `System.Convert.ChangeType`它允许您为缺少自定义转换器的任何类型定义默认（后备）实现（映射到）。

您仍然需要非泛型`IConverter`接口，并且没有编译时类型的使用者可以依赖该接口。但除了这个非泛型接口之外，您还可以定义以下泛型接口：

```
public interface IConverter<T>
{
    T Convert(object value);
} 
```

您现在可以通过实现该接口来定义自定义转换器：

```
public class MyTypeConverter : IConverter<MyType>
{
    public MyType Convert(object value) { ... }
} 
```

您可以定义一个可以用作“后备”实现的通用实现。当没有为请求的类型注册自定义转换器时，可以使用此实现：

```
public class DefaultConverter<T> : IConverter<T>
{
    public T Convert(object value)
    {
        return System.Convert.ChangeType(value, targetType);
    }
} 
```

由于您的消费者在编译时没有任何可用的类型信息，因此让非泛型`IConverter`闲逛仍然很方便。您可以将此接口的实现定义为[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)的一部分。当您将其放置在此引导程序逻辑中时，您可以依赖`Kernel`，而无需将容器用作[Service Locator](http://blog.ploeh.dk/2011/08/25/ServiceLocatorRolesVsMechanics.aspx)：

```
public class NinjectConverter : IConverter
{
    private readonly Kernel kernel;

    public NinjectConverter(Kernel kernel)
    {
        this.kernel = kernel;
    }

    public object Convert(object value, Type targetType)
    {
        var converterType =
            typeof(IConverter<>).MakeGenericType(targetType);

        dynamic converter = this.kernel.Get(converterType);

        return converter.Convert(value);
    }
} 
```

此实现使用反射和动态类型。这将不是性能最好的代码，但与 Ninject 的开销相比，开销可能微不足道。

您现在可以轻松地批量注册所有定义的自定义转换器，如下所示：

```
var assembly = typeof(IConverter<>).Assembly;

var converterRegistrations =
    from type in assembly.GetExportedTypes()
    where !type.IsAbstract && !type.IsGenericTypeDefinition
    from service in type.GetInterfaces()
    where service.IsGenericType
    where service.GetGenericTypeDefinition() == 
        typeof(IConverter<>)
    select { service, type };

foreach (var registration in converterRegistrations)
{
    kernel.Bind(registration.service).To(registration.type);
} 
```

我希望有一种更简单的方法来使用 Ninject（也许是单线）来做到这一点，但老实说，我对 Ninject 做得不够好。对于阅读本文的任何人：如果您知道更好的方法，请更新我的答案。

您可以像这样注册您的后备转换器：

```
kernel.Bind(typeof(IConverter<>))
    .To(typeof(DefaultConverter<>)) 
```

# html - 为什么无论我设置什么超时，图像在 HTML5 中刷新得如此之快？

> ID：12998689
> 
> 赞同：0
> 
> 时间：2012-10-21T14:21:56.387
> 
> 标签：html

无论我将使用什么值，它都会尽可能快地刷新。

```
<!DOCTYPE html>
<html>
    <head>
        <script>
        var ctx, canvas;

        window.requestAnimFrame = (function(callback) {
            return window.requestAnimationFrame || 
            window.webkitRequestAnimationFrame || 
            window.mozRequestAnimationFrame || 
            window.oRequestAnimationFrame || 
            window.msRequestAnimationFrame ||
            function(callback) {
              window.setTimeout(callback, 1000/1 );
            };
      })();

            window.onload = function(){
                canvas = document.getElementById('myCanvas');
                ctx = canvas.getContext('2d');
                //sciana
                drawLine();

            }
            function drawLine(){
            var bok = 400, xw = canvas.width/2, yw = 10, odstep = 10;
            var tX = 10/Math.sqrt(3);
                ctx.save();
                for(var i = xw; i >= xw - bok/2; i-=tX){
                    var r = Math.floor( 255 * Math.random());
                    var g = Math.floor( 255 * Math.random());
                    var b = Math.floor( 255 * Math.random());   
                    ctx.translate(10/Math.sqrt(3), 10);
                    ctx.beginPath();
                    ctx.fillStyle = "rgb("+r+","+g+","+b+")";
                    ctx.arc(xw, 0, 6, 0, 2 * Math.PI, false);
                    ctx.fill(); 
                    ctx.closePath();

                }   
                ctx.restore(); 
                ctx.save();
                    for(var i = xw; i >= xw - bok/2; i-=10/Math.sqrt(3)){
                    var r = Math.floor( 255 * Math.random());
                    var g = Math.floor( 255 * Math.random());
                    var b = Math.floor( 255 * Math.random());   
                    ctx.translate(-10/Math.sqrt(3), 10);
                    ctx.beginPath();
                    ctx.fillStyle = "rgb("+r+","+g+","+b+")";
                    ctx.arc(xw, 0, 6, 0, 2 * Math.PI, false);
                    ctx.fill(); 
                    ctx.closePath();
                }   
                ctx.restore();
                ctx.save();
                xw = xw - bok/2 ;
                yw = bok*Math.sqrt(3)/2;
                for(var i = xw; i <= xw + bok; i+=10){
                    var r = Math.floor( 255 * Math.random());
                    var g = Math.floor( 255 * Math.random());
                    var b = Math.floor( 255 * Math.random());   
                    ctx.translate(10,0);
                    ctx.beginPath();
                    ctx.fillStyle = "rgb("+r+","+g+","+b+")";
                    ctx.arc(xw, yw, 6, 0, 2 * Math.PI, false);
                    ctx.fill(); 
                    ctx.closePath();
                }
                ctx.restore();
                requestAnimFrame(drawLine);             
            }
        </script>
    </head>
    <body>
        <canvas id="myCanvas" width="600" height="600" style="background-color:#D0D0D0">
            Twoja przeglądarka nie obsługuje elementu Canvas.
        </canvas>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:31:20.223

因为表达式是这样工作的：

```
return true || false || function()  {
// do something
}; 
```

该函数永远不会被执行，因为 JavaScript 从左到右运行，直到找到正确的结果然后中止..

# r - netcdf 文件逆投影

> ID：12998694
> 
> 赞同：-1
> 
> 时间：2012-10-21T14:22:49.710
> 
> 标签：r, coordinate-transformation, netcdf

如何在 netcdf 文件中进行逆坐标变换？我有一个包含 75 个经度值和 36 个纬度值的网格：

```
nc<-create.n("filename.nc")
#Dimentions
dim.def.nc(nc,"lon",75)
dim.def.nc(nc,"lat",36)
dim.def.nc(nc,"time",365)
#Vars
var.def.nc(nc,"Observation","NC_FLOAT", c(1,0,2))
var.def.nc(nc,"lon","NC_FLOAT", c(0))
var.def.nc(nc,"lat","NC_FLOAT", c(1))
var.def.nc(nc,"time","NC_FLOAT", c(2))
(...) 
```

根据[unidata](http://www.unidata.ucar.edu/software/netcdf-java/reference/StandardCoordinateTransforms.html)中的文档，应该可以让 netcdf 进行从 (lat,lon) 到 (x,y) 的逆变换，但我不知道如何执行此操作。我想将我的 lat long 网格转换为 Lambert Conformal 网格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:44:36.160

这是我自己重新投影 netCDF 文件的方式：基本上我获取经度、纬度和我想要的数据并创建一个 shapefile，然后我可以使用包`rgdal`和. [（此处](ftp://podaac-ftp.jpl.nasa.gov/allData/ghrsst/data/L4/AUS/ABOM/RAMSSA_09km/2013/028/)的示例使用从 NOAA 下载的数据）`sp``maptools`

```
library(ncdf)
library(rgdal)
library(sp)
library(maptools)
nc <- open.ncdf("20130128-ABOM-L4HRfnd-AUS-v01-fv01_0-RAMSSA_09km.nc")

# Grab the longitude, latitude and data
lon <- nc$dim$lon$vals
lat <- nc$dim$lat$vals
sst <- get.var.ncdf(nc,"analysed_sst")

# Create a SpatialPointsDataFrame object
lonlat <- expand.grid(lon,lat)
sst <- as.data.frame(matrix(sst,ncol=1))
dat <- SpatialPointsDataFrame(lonlat, data=sst,
                              proj4string=CRS("+proj=longlat +datum=WGS84 "))

# And then reproject
dat2 <- spTransform(dat,CRS("+proj=lcc"))  
# Of course you have to write the proj4 string that corresponds exactly to the desired projection. 
```

# android - hdpi 设备选择 mdpi 图像

> ID：12998699
> 
> 赞同：1
> 
> 时间：2012-10-21T14:23:43.807
> 
> 标签：android, hdpi, mdpi

我是安卓新手。试图弄清楚为什么会发生这种情况：我在一个`hdpi drawable`没有被使用的文件夹中有一个图像。`mdpi`它的大小是同名图像的 1.5 倍。我对每种分辨率都有不同的布局。有人可以帮我理解为什么`mdpi`图像是唯一被使用的图像吗？我已经检查了关于这个和 android 开发人员文档的其他 stackoverflow 线程，但我找不到关于我做错了什么的答案。谢谢。

# css - 如何创建一堆相互偏移和重叠的图像？

> ID：12998700
> 
> 赞同：1
> 
> 时间：2012-10-21T14:23:56.703
> 
> 标签：css

我试图展示一堆卡片，我希望每张卡片的顶部都显示出来，并允许用户将鼠标悬停在卡片上以显示它。我有以下 CSS，但是对于我想要显示的任意数量的卡片，我必须复制我的第 n 个子部分。我目前没有使用 LESS 或 Style，但如果其中一个可以做到这一点，它们是选项。需要明确的是，我正在寻找一种适用于任意数量卡的解决方案。

```
.card_container > {
  position:relative;
  border:1px solid red;
}

.card_container > .card {
  position: absolute;
}

.card_container > .card:nth-child(1) {
  z-index:1;
  top:0px; 
}
.card_container > .card:nth-child(2) {
  z-index:2;
  top:35px; 
}
.card_container > .card:nth-child(3) {
  z-index:3;
  top:70px; 
}
.card_container > .card:hover {
  z-index: 9999;
} 
```

我尝试使用 javascript 来分配样式，但是直接分配给 .card 的样式优先于 .card:hover。

```
 $('.card').each(function(index, el) {
    var $el = $(el);
    $el.css('z-index', index);
    $el.css('top', (35*index)+'px');
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T02:28:31.297

操作容器而不是卡片。不太直观，但非常简单。

```
.card_container li {
  height: 35px; 
  z-index: 0;   
  position: relative;    
}

.card{
  border: 1px solid black;
  width: 100px;
  height: 200px;  
  position: absolute;
}

.card_container li:hover {
  z-index: 9999;
} 
```

由于 z-index，悬停的卡片将在其他卡片之上显示为溢出的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:36:15.777

[这个](http://jsfiddle.net/Nc7FC/)小提琴可能会给你一个方向。基本上，您将 ul 嵌套在彼此内部，并给每个位置一个相对于其父亲计算的位置：

HTML：

```
<ul>
    <li><div class="card"></div>
        <ul>
            <li><div class="card"></div>
                <ul>
                    <li><div class="card"></div></li>
                </ul>
            </li>
        </ul>
    </li>
</ul>​ 
```

CSS：

```
ul ul{
 position:absolute;  
 top:10px;
 left: 10px;   
}
.card{
 background: red;
 border: 1px solid black;
 width: 100px;
 height: 200px;    
}​ 
```

# ruby-on-rails - 如何控制谁使用我的网络小部件

> ID：12998701
> 
> 赞同：2
> 
> 时间：2012-10-21T14:23:57.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, web-services, widget

我创建了一个 Web 小部件，用于显示来自我的站点的用户特定信息。这个小部件是基于 java 脚本的（我按照[这个例子](http://emphaticsolutions.com/2011/01/21/functional-widgets-with-rails-javascript-jsonp.html)），并且可以嵌入到其他站点中。

我正在寻找一种方法来控制谁可以将小部件嵌入他的网站。欢迎任何想法/参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:54:47.377

除了直接提供文件之外，您还可以尝试使用`request.referer`并且仅可选择地根据已批准的 Web 主机列表发送 JavaScript 文件（通过控制器操作）。您可以使用 send_file 方便地将 JavaScript 发送到客户端（在 HTTP 标头中设置缓存选项，以便浏览器不会重复请求文件）。但是，引荐来源网址可能会被欺骗，并且可能不会被发送，具体取决于 HTTPS => HTTP 配置。

您还可以考虑为您的 JavaScript 文件要求一个 API 密钥（只需将其作为 JavaScript 文件请求的一部分附加）。虽然它无论如何都不是万无一失的，但它使跟踪使用变得更加简单。（并且通过使用日志，您可能能够发现非法用途）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:58:42.303

您必须与 OAuth 一起使用一些额外的技巧才能正确识别客户端。

这个问题在[这里](https://stackoverflow.com/questions/13219308/how-to-implement-a-web-widget-with-oauth-2-0#comment19131979_13219308)得到了详细的回答。

# android - 如何在不同的布局中实现 webviews 而不必为每个布局创建一个类？

> ID：12998702
> 
> 赞同：0
> 
> 时间：2012-10-21T14:23:58.107
> 
> 标签：android, eclipse, layout, webview

好的，所以我有一个带有 8 个按钮的主类，并且我有每个按钮来设置内容视图布局 1、2 等。我已经在每个布局中实现了具有不同 ID 的 webview，但我似乎可以让它工作。计划是在每个布局中显示来自网站的图片，由于我不擅长编程，我想我会先尝试一下。这是我的问题：我怎样才能使这个设置工作（就我理解的而言），以及获得这个结果的最佳方法是什么？我得到空指针错误。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.Toast;

public class Main extends Activity implements View.OnClickListener {

 Button btn1, btn2, //etc..;
 WebView webview_1, webview_2, //etc..;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);

    Button btn1 = (Button)findViewById(R.id.button1);
    btn1.setOnClickListener(this);
    Button btn2 = (Button)findViewById(R.id.button2);
    btn2.setOnClickListener(this);
    //and so on

    WebView one = (WebView) findViewById(R.id.webview1);
    one.getSettings().setJavaScriptEnabled(true);
    one.loadUrl("www.example.com/jpg);

    WebView two = (WebView) findViewById(R.id.webview2);
    two.getSettings().setJavaScriptEnabled(true);
    two.loadUrl("www.example.com/jpg);

 //etc
 }

public void onClick(View v) {
switch (v.getId()) {
case R.id.button1:
    setContentView(R.layout.layout1);
    return;
case R.id.button2:
    setContentView(R.layout.layout2);
    return;
//etc

}

//main_layout

 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingLeft="16dp"
android:paddingRight="16dp" >

<LinearLayout
    android:layout_width="450dip"
    android:layout_height="450dip"

    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:background="@drawable/norge"
    android:orientation="vertical"
    android:padding="150dp" >

</LinearLayout>

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="7dp"
    android:gravity="center"
    android:text="@string/overskrift_velg_sensor"
    android:textSize="25dp"
    tools:context=".Main" />

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    android:autoLink="web"
    android:clickable="true"
    android:linksClickable="true"
    android:text="@string/button1" />

<Button
    android:id="@+id/button2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    android:autoLink="web"
    android:clickable="true"
    android:linksClickable="true"
    android:text="@string/button2" />
</LinearLayout>

//layout1

 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:text="Object"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<WebView
 android:layout_width="match_parent"
 android:layout_height="0dp"
 android:id="@+id/webview1"
 android:layout_weight="4">

 </WebView>

 </LinearLayout>

 //layout2

 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical" >

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:text="Object2"
    android:textAppearance="?android:attr/textAppearanceLarge" />

 <WebView
 android:layout_width="match_parent"
 android:layout_height="0dp"
 android:id="@+id/webview2"
 android:layout_weight="4">

 </WebView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:27:16.873

您只能在活动的方法中调用`setContentView()`一次。`onCreate()`对该方法的后续调用将无效。

我建议你只有一个WebView，当你点击一个按钮时，你用`loadUrl()`方法改变WebView的URL。

# objective-c - 如何处理点击过快的用户

> ID：12998708
> 
> 赞同：2
> 
> 时间：2012-10-21T14:25:06.457
> 
> 标签：objective-c, uiview, xcode4, uiviewanimationtransition

我有一个简单的视图控制器。视图控制器使用动画。如果我正在显示列表，它将动画到地图。那时它也会将指向地图的按钮改为指向列表。

因此，通过按住同一个按钮（实际上是 2 个不同的按钮，但用户将其视为同一个按钮），用户可以不断地从地图切换到列表，反之亦然。

工作正常。有一些捕捉。

如果用户点击太快怎么办？假设我希望我的应用程序确实被使用，那么罐头或惩罚它们不是一种选择。

这是当前程序：

```
-(void) transitiontoViewController:(UIViewController *)toViewController duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL))completion1
{

    [self enableButtonWithBool:false];
    UIViewController * fromController = self.last2ViewsInTheContainer.lastObject;
    if (fromController.view.superview!= self.ContainerView)
    {
        return;
    }
    [self transitionFromViewController:fromController toViewController:toViewController duration:duration options:options animations:animations completion:^(BOOL finished) {
        if (completion1 == Nil) //can't execute nil block. can be more elegantly done with [completion1 invoke] if there is such function. Anyway, do nothing if completion1 is nil
        {

        }
        else
        {
            completion1 (finished);
        }
        [self.last2ViewsInTheContainer addObject:toViewController];

        if (self.last2ViewsInTheContainer.count>2)
        {
            [self.last2ViewsInTheContainer removeObjectAtIndex:0];
        }
    }];

    [self enableButtonWithBool:true];
    [self ReloadorRedraw];
} 
```

简单的过渡。我只想在函数的末尾指出 2 个控制器视图具有相同的子视图。在函数结束时，转换似乎尚未完成。旧的视图控制器并没有真正删除，等等。

ReloadorRedraw 的内容如下：

```
-(void)ReloadorRedraw;
{
    BGCRBadgerStandardViewViewController * listOrMap = nil;
    if ([self.last2ViewsInTheContainer lastObject]==self.filterController)
    {
        [self.changeFilterButton setBackgroundImage:[UIImage imageNamed:filterBarOpenImageString] forState:UIControlStateNormal];
        listOrMap = self.last2ViewsInTheContainer[0];
    }
    else
    {
        [self.changeFilterButton setBackgroundImage:[UIImage imageNamed:filterBarCloseImageString] forState:UIControlStateNormal];
        listOrMap = self.last2ViewsInTheContainer.lastObject;
    }

    if (listOrMap==self.listBusinessViewController)
    {
        self.navigationItem.rightBarButtonItem=self.mapButton;
    }
    else
    {
        self.navigationItem.rightBarButtonItem=self.listButton;
    }
} 
```

如果我点击得太快，我会收到以下消息：不平衡调用开始/结束外观转换。开始/结束外观转换的不平衡调用。

之后应用程序处于无效状态。

补救这种情况的一种方法是“禁用”按钮，直到动画完成。

```
-(void) transitiontoViewController:(UIViewController *)toViewController duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL))completion1
{

    [self enableButtonWithBool:false];
    UIViewController * fromController = self.last2ViewsInTheContainer.lastObject;
    if (fromController.view.superview!= self.ContainerView)
    {
        return;
    }
    [self transitionFromViewController:fromController toViewController:toViewController duration:duration options:options animations:animations completion:^(BOOL finished) {
        if (completion1 == Nil) //can't execute nil block. can be more elegantly done with [completion1 invoke] if there is such function. Anyway, do nothing if completion1 is nil
        {

        }
        else
        {
            completion1 (finished);
        }
        [self.last2ViewsInTheContainer addObject:toViewController];

        if (self.last2ViewsInTheContainer.count>2)
        {
            [self.last2ViewsInTheContainer removeObjectAtIndex:0];
        }

    [self enableButtonWithBool:true];
    [self ReloadorRedraw];
    }];

} 
```

基本上我在搬家

```
 [self enableButtonWithBool:true];
    [self ReloadorRedraw]; 
```

到完成块。

函数 enableButtonWithBool 就是这个简单的函数：

```
-(void)enableButtonWithBool: (BOOL) enable
{
    self.mapButton.enabled=enable;
    self.listButton.enabled= enable;
    self.changeFilterButton.enabled =enable;
    self.searchBar.enabled =enable;
} 
```

这很好用。

我的伴侣不喜欢它。那是因为禁用按钮看起来很难看，即使只有 0.3 秒。即使是为了他们自己的利益，用户也不会喜欢它。

所以基本上我必须快速启用重新启用按钮，而不是等到应用程序结束。

但是如何做到这一点，并且仍然制作出能够承受用户快速点击的强大应用程序呢？

我认为如果有人也可以解释“真正的”过渡何时完成，那将有所帮助。我的意思是从旧东西的超级视图中实际删除并添加到新东西的子视图中。动画只是一部不会真正改变过渡或视图结构的“电影”吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T14:43:46.083

在动画期间将按钮设置`userInteractionEnabled`为 NO。这会禁用按钮，但不会更改其外观或增加操作方法的复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T14:34:12.887

单击按钮后，将其更改为微调器，这是一个视觉指示器，不要一直触摸按钮，并且由于微调器是一个新按钮，它会替换被触摸的按钮，您将不会再点击该按钮，然后当完成代码将微调器更改回您的按钮。

```
- (void) saveButtonPressed:(id) sender {
//remove keyboard if up
 [[self view] endEditing:YES];

//start a spinner to let user know it is saving
spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[spinner startAnimating];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:spinner];

dispatch_async(appendQueue, ^{
....my code.... 
```

您可以在此处或下方结束微调器 dispatch_async(dispatch_get_main_queue(), ^{ self.navigationItem.rightBarButtonItem = sender; });

```
 [self performSelectorOnMainThread:@selector(doneWithSave:)
                           withObject:sender waitUntilDone:YES];
});
dispatch_release(appendQueue); 
```

}

*   (void) doneWithSave:(id) button { self.navigationItem.rightBarButtonItem = button; [self.navigationController popToRootViewControllerAnimated:TRUE]; }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T14:36:29.580

无需实际启用或禁用按钮，而是将内部布尔变量设置为 true 或 false。然后按下按钮时执行的代码将检查该变量以决定是忽略按钮按下还是实际执行某些操作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-18T06:41:57.607

您也可以使用这些代码

```
[[UIApplication sharedApplication] beginIgnoringInteractionEvents];
[[UIApplication sharedApplication] endIgnoringInteractionEvents]; 
```

当动画开始时，您可以在此动画完成后 beginIgnoringInteractionEvents 和 endIgnoringInteractionEvents

# android - 保持图像视图中的一个图像静止并在第一张图像下方滚动第二张图像

> ID：12998709
> 
> 赞同：0
> 
> 时间：2012-10-21T14:25:12.567
> 
> 标签：android, android-layout, android-intent

我有两张图片，一张我想在屏幕顶部显示，第二张在第一张图片的底部。现在我想滚动第二个图像（这是文本），但不滚动第一个图像。所以基本上它的顶部是我不想滚动的地图，然后是我想要滚动的底部的文本。目前第一张图片在后面，第二张在上面。这是我的 xml 代码。

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/farsouthroute"
    android:layout_marginTop="0dp"
    />

 <ScrollView 
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">

   <RelativeLayout
       android:layout_width="fill_parent"
       android:layout_height="fill_parent">

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/imageView1"
    android:src="@drawable/routesouth"
    android:scaleType="fitCenter">

  </ImageView>
 </RelativeLayout>
 </ScrollView>

</RelativeLayout> 
```

这是java。

```
import android.os.Bundle;
import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.os.Handler; 
import android.view.Window;
import android.view.WindowManager;
import android.webkit.WebView; 

public class MainActivity extends Activity { 

private Handler mHandler = new Handler(); 

@Override 
public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
    setContentView(R.layout.activity_main);
    }
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:03:20.850

一种选择是 LinearLayout 而不是 RelativeLayout，方向设置为垂直

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
    <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/farsouthroute"
    android:layout_marginTop="0dp"
    />

<ScrollView 
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">

    <ImageView
    android:id="@+id/imageView2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/routesouth"
    android:scaleType="fitCenter">
    </ImageView>

</ScrollView>

</LinearLayout> 
```

# php - Zend 中的表单不提交提交类型仅提交

> ID：12998716
> 
> 赞同：2
> 
> 时间：2012-10-21T14:25:50.900
> 
> 标签：php, forms, zend-framework

我正在更新我的 zend 项目中的一个表单，它非常基本。更新表单以使用`<button type="submit">`标签后，它不会发布表单。

不工作 `<button type="submit" name="Save">Continue</button>`

作品`<input type="submit" name="Save" value="Next">`

控制器中引发错误的部分代码如下，为什么`$value = trim($value);`我发布表单时显示为空？我所有的字段和表单操作都是正确的我已经测试了所有内容，归结为提交按钮类型是问题所在。谢谢

```
 $userSess = new Zend_Session_Namespace('Default');
    if (!$this->getRequest()->isPost()) {
    $this->_helper->redirector('index','welcome');
}
$postData = $this->_request->getPost();
//validating form data, if empty data comes, redirect with err msg
    foreach($postData as $key => $value) {
        $value = trim($value);
        if($value == "") //if empty field submitted, redirect back with invalid msg
        $this->_helper->redirector('index','welcome',null,array('err'=>'Please Fill in all details'));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:36:31.950

用这个：

```
<button type="submit" name="Save" value="Next">Continue</button> 
```

您忘记了**value**属性。根据您的代码，如果任何输入字段具有空值，则执行重定向。在您的情况下，输入字段**Save**没有值（当您使用`<button>`标签时）

# visual-studio-2010 - 将从 SQL 服务器检索到的日期转换为 MM/dd/yyyy 中的字符串

> ID：12998718
> 
> 赞同：0
> 
> 时间：2012-10-21T14:26:06.243
> 
> 标签：visual-studio-2010, c#-4.0

嗨，我有一个 Windows 窗体应用程序。它有一个包含两列 DATE 类型的数据库表。我可以轻松地以 MM/dd/yyyy 格式在列中插入日期。但是在从表中检索数据时，我使用以下代码。

> SqlDataAdapter sda=new SqlDataAdapter("select * from table",conn); 数据集 ds=新数据集（）；sda.Fill(ds,"table");

现在我需要在标签中显示包含 DATE 的 ds 内容。如果我这样做：

> label1.Text=ds.Tables[0].Rows[0][0].ToString(); 它还显示完整的日期和 12:00:00 AM 时间！我想将此值格式化为 MM/dd/yyyy。我正在使用 c#。请帮忙。

基本上我想知道如何将字符串格式化为日期格式，如“MM/dd/yyyy”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:51:08.750

您可以使用`ToString`自定义日期格式字符串。

```
label1.Text = ds.Tables[0].AsEnumerable()
                          .First().Field<DateTime>(0).ToString("MM/dd/yyyy"); 
```

（请注意，您还需要`using System.Linq`为上面的代码添加）

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:28:26.480

尝试这个 ：-

```
 string date1= date.ToString("dd-MM-yyyy"); 
```

# android - 如何在 Listview 中创建搜索功能并刷新该列表

> ID：12998725
> 
> 赞同：0
> 
> 时间：2012-10-21T14:27:09.603
> 
> 标签：android, listview, filter

我正在尝试`ListView`使用搜索功能。

但是我面临的问题是，虽然我在使用 filter( `CharSequence`) 后得到了过滤后的列表，但列表上对象的位置仍然是过滤器之前的位置。因此，当我在搜索后单击该项目时，它会以较早的项目响应，即，列表没有被刷新。

我正在使用这段代码：

```
inputSearch.addTextChangedListener(new TextWatcher() {

    @Override
    public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
    int after) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
    int count) {
        // TODO Auto-generated method stub
        ((SimpleAdapter) PlayListActivity.this.adapter).getFilter().filter(s);
    }

}); 
```

我应该怎么做才能使它按我想要的方式工作，即，当我输入输入文本时......它搜索并刷新列表，所以当我尝试单击一个项目时，它只响应该项目而不是前一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:48:07.447

考虑到 filter() 方法是异步的。

尝试使用 SimpleAdapter.filter(CharSequence constraint, Filter.FilterListener listener) 方法，而不是使用您自己的 FilterListerner 对象的 filter(CharSequence constraint) 方法，并在过滤器完成时调用适配器 notifyDataSetChanged() 以通知列表刷新。

* * *

编辑（添加示例代码）：

```
((SimpleAdapter) PlayListActivity.this.adapter).getFilter().filter(s, new Filter.FilterListener() {
        @Override
        public void onFilterComplete(int count) {
               PlayListActivity.this.runOnUiThread(new Runnable() {
                     @Override
                     public void run() {
                         PlayListActivity.this.adapter.notifyDataSetChanged();
                     }
                });
        }
 }); 
```

# java - JVM 和编程异常

> ID：12998731
> 
> 赞同：0
> 
> 时间：2012-10-21T14:27:36.403
> 
> 标签：java

我可以说`JVM exceptions`是未经检查的异常和`Programmatic exceptions`检查的异常吗？因为看起来JVM异常是在运行时抛出的，所以无法检查......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:41:04.703

您所问的内容可能涉及两个不同的区别。JVM 运行时抛出的异常扩展自，`Error`而编程异常扩展自`Exception`. 未经检查的编程异常从`RuntimeException`. 因此，未经检查的异常有两个不同的类层次结构。请注意，JVM/程序的区别只是约定：您确实可以从 Java 代码中抛出您想要的任何异常类。

还要确保将 JVM 异常与 JDK 异常（标准 Java 库抛出的异常）区分开来。没有检查 JVM 异常，但检查了很多 JDK 异常。

至于检查/未检查的区别，编译器会强制您提前声明您的方法可能显式抛出的所有检查异常，或者通过调用可能抛出它们的方法来声明。对于未经检查的异常，不会进行此类检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:35:06.863

对于 JVM 异常，您可能会想到 Java VM 抛出的异常，而 Programmatic 异常是 Java 程序员代码抛出的异常。

Java VM 抛出的大多数异常实际上是由 Java VM 中标准库中的 java 代码抛出的。您可以下载此 java 代码，您将看到这些库以与编写 java 程序的程序员相同的方式抛出异常。一个标准的 java 程序员也可以以同样的方式抛出同样的异常。

Java VM 也可能抛出 Java 错误。错误不是异常，但可以像异常一样被抛出和捕获。只有虚拟机应该抛出错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T15:21:17.203

> 我可以说 JVM 异常是未经检查的异常，而编程异常是已检查的异常吗？

首先，“JVM 异常”不是标准术语。（而且 SCJP6 谈论 JVM 抛出的异常这一事实并不能使您的术语正确。您引用的 SCJP6 文本是描述性地使用这些词......而不是试图定义术语。）

您的问题的答案是否定的。许多“程序化”异常都是未经检查的。例如，`NumberFormatException`未选中。

> 因为看起来JVM异常是在运行时抛出的，所以无法检查......

这种逻辑也说不通。所有异常都在运行时抛出。这不是“已检查”与“未检查”的含义。已检查异常和未检查异常之间的真正区别在于，已检查异常必须在方法签名中捕获或声明。对于未经检查的异常，您也不必这样做。

现在碰巧 JVM 本身抛出的所有异常都是未经检查的。但这更多是关于触发异常的“事件”的性质。它们通常是某些 Java 代码中的错误或不可恢复的 JVM 故障的结果。这些不是应用程序通常可以从中恢复的东西，因此使它们不受检查只是避免了源代码中一些不必要的冗长（或更糟）。

# c# - 如何在 MS unity 中注册 rhino 存根？

> ID：12998732
> 
> 赞同：1
> 
> 时间：2012-10-21T14:27:55.263
> 
> 标签：c#, unit-testing, unity-container, rhino-mocks

我正在使用 Ms`unity container`和`rhino mock`创建存根。

我尝试创建存根并将其注册到我的统一容器中

```
IUnityContainer container = ContainerManager.GetDefaultContainer;

var loggerStub = MockRepository.GenerateStub<ILogger>();

container.RegisterType<ILogger, loggerStub>(); 
```

但是，只能注册类类型。

如何注册存根（如记录器存根）以进行单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:23:57.343

您还可以使用[RegisterInstance 方法](http://msdn.microsoft.com/en-us/library/ee649971.aspx)配置 Unity 容器以将给定类型解析为指定实例。

因此，在您的注册码中，您需要将最后一行更改为：

```
container.RegisterInstance(typeof(ILogger), loggerStub); 
```

但是，我觉得在 unis 测试中需要使用 IoC 容器有点奇怪。

您应该能够手动创建被测系统的实例。

根据我的经验，我在以下情况下的测试中使用了 IoC：

*   当我需要测试容器配置本身时（例如：查看是否可以成功解析特定类型）
*   当我有如此多的依赖项以至于手动指定它们并不容易（在这种情况下，问题实际上要么是糟糕的设计，要么是糟糕的测试隔离）
*   当我需要执行集成测试（不是单元测试）时

### 更新

我看到了你的评论，我立刻想到了两个不在单元测试中使用注入的原因：

*   你必须做比必要更多的工作。在应用程序中，您设置了一个容器，它可以解决所有问题。在测试的情况下，您需要使用不同的存根/模拟设置许多容器配置（取决于您在每个单元测试中测试的内容）。我认为手动向被测类提供任何依赖项更容易。
*   在某些测试中，您可能忘记为所有依赖项设置存根，并且您的单元测试最终可能会访问外部资源（例如数据库、远程服务）。

# iphone - 使用 Instruments 对性能进行基准测试

> ID：12998733
> 
> 赞同：5
> 
> 时间：2012-10-21T14:28:00.930
> 
> 标签：iphone, objective-c, ios, performance, cocoa

我正在寻找一些关于如何使用 Instruments 的 Time Profiler 来增强特定操作的建议。我有一个分页滚动视图，可以按需加载其内容。当滚动到一个新页面时，另一个页面会向右加载两页。当当前页面滚动到屏幕的 50% 时会发生这种情况，并且在较慢的设备上，加载足以成为瓶颈，会中断滚动的平滑度。滚动感觉就像它在 50% 品脱时非常短暂地暂停，然后又重新开始行动。

我应该注意，我的应用程序没有网络组件，因此在获取数据时不会出现瓶颈——这一切都在新视图的加载中。

在我努力改进这一点时，我需要对过渡进行基准测试，以便评估我的增强效果。观看了 WWDC 会议后，我了解了时间分析器的基础知识，但我不确定我正在寻找正确的东西。

我正在运行仪器，然后执行滚动。我看到 CPU 活动的预期峰值。然后我选择尖峰并查看符号名称。正如您在下面看到的，当我隐藏系统库并显示 Obj-C 时，我正在处理一个短暂的 90% 峰值，运行时间为 81.0 毫秒。

![在此处输入图像描述](../Images/68b45c4dbab036f6d1661308f3d8324b.png)

当我深入研究我的代码时，我的困惑就来了。我发现最大的贡献者之一（23 毫秒）是一个只使用`sortedArrayUsingDescriptors`. 我对此无能为力。其他时候，根本原因将是我使用 CGRectInset - 几毫秒。我想我希望看到更多与图像使用或类似的东西有关。

我想我不知道我是否在对正确的事物进行基准测试。我真的打算尝试将我的 6ms 操作减少到 5ms 并期望看到不同吗？我是否正在寻找正确的工具来诊断我的问题？

任何关于衡量什么以及将我的工作重点放在哪里的提示或说明都会受到真正的重视。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:09:52.487

考虑使用大型中央调度在后台线程上尽可能多地完成非 UI 工作（获取、排序、选择等）。这将利用多 CPU 机器的强大功能，让您更快地离开主线程。仅根据需要使用主线程进行 ui 工作。

# c# - 如何检查 DateTime.Now 是否仅在时间部分的两个给定 DateTimes 之间？

> ID：12998739
> 
> 赞同：45
> 
> 时间：2012-10-21T14:28:36.637
> 
> 标签：c#

对于我的应用程序，我需要知道是否`Now()`介于两个值之间。

用户可以设置开始和结束时间，这样他就不会被通知打扰（例如在夜间）。

因此，如果有`TimePicker`用户可以设置的两个 s（开始时间和结束时间）。

假设用户`22:00`为 the`StartTime`和`07:00`for the设置`EndTime`（这将涵盖整个夜晚）。

如何检查是否`DateTime.Now`在选定的开始时间和结束时间之间？

**编辑：** 我只希望它与小时和分钟部分一起使用。因此，如果用户设置开始和结束时间，这应该适用于每晚。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-10-21T14:41:00.420

首先，您需要将所有内容转换为相同的单位（我们将使用`TimeSpan`），然后您需要查看起止时间是否超过午夜，最后根据检查结果进行比较：

```
// convert everything to TimeSpan
TimeSpan start = new TimeSpan(22, 0, 0);
TimeSpan end = new TimeSpan(07, 0, 0);
TimeSpan now = DateTime.Now.TimeOfDay;
// see if start comes before end
if (start < end)
    return start <= now && now <= end;
// start is after end, so do the inverse comparison
return !(end < now && now < start); 
```

这是为您执行此操作的功能：

```
bool TimeBetween(DateTime datetime, TimeSpan start, TimeSpan end)
{
    // convert datetime to a TimeSpan
    TimeSpan now = datetime.TimeOfDay;
    // see if start comes before end
    if (start < end)
        return start <= now && now <= end;
    // start is after end, so do the inverse comparison
    return !(end < now && now < start);
} 
```

你会这样称呼它：

```
bool silenceAlarm = TimeBetween(DateTime.Now, StartTime.Value, EndTime.Value); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-21T14:53:27.027

由于您只收集了两次没有日期的时间，因此您需要确定这两次是否来自同一天。如果将`StartTime`、`EndTime`和`Now`放入`TimeSpans`：

```
if (StartTime > EndTime) 
{
    // the range crosses midnight, do the comparisons independently
    return (StartTime < Now) || (Now < EndTime);
}
else 
{
    // the range is on the same day, both comparisons must be true
    return StartTime < Now && Now < EndTime;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T14:30:46.593

```
DateTime nowDate = DateTime.Now;
// set these to today + time from time picker
DateTime startDate = new DateTime(nowDate.Year, nowDate.Month, nowDate.Day,
    selectedStart.Hour, selectedStart.Minute, 0);
DateTime endDate = new DateTime(nowDate.Year, nowDate.Month, nowDate.Day, 
    selectedEnd.Hour, selectedEnd.Minute, 0);
bool isBetween = nowDate < endDate && nowDate > startDate; 
```

**2016 年 6 月 8 日更新**
不知道为什么不赞成投票是合适的，因为这是一个可行的解决方案。OP 确实特别要求`DateTime`，但我建议`TimeSpan`根据@Gabe 的答案使用。

根据我的回答，这是一个工作功能：

```
public static bool TimeBetween(DateTime check, DateTime start, DateTime end, bool inclusive = true)
{
    var from = new DateTime(check.Year, check.Month, check.Day, 
        start.Hour, start.Minute, start.Second, start.Millisecond);
    var to = new DateTime(check.Year, check.Month, check.Day, 
        end.Hour, end.Minute, end.Second, end.Millisecond);

    if (inclusive)
        return from <= check && to >= check;

    return from < check && to > check;
} 
```

这是一个有效的小提琴：[https](https://dotnetfiddle.net/vZCXqv) ://dotnetfiddle.net/vZCXqv 。

完整代码：

```
using System;

public class Program
{
    public static void Main()
    {
        var start = new DateTime(1, 1, 1, 9, 0, 0);
        var end = new DateTime(1, 1, 1, 17, 0, 0);

        Console.WriteLine("{0} - Too early",                TimeBetween(new DateTime(2014, 1, 1, 08, 59, 59, 999), start, end));
        Console.WriteLine("{0} - On start time exclusive",  TimeBetween(new DateTime(2014, 1, 1, 09, 00, 00, 000), start, end, false));
        Console.WriteLine("{0} - On start time inclusive",  TimeBetween(new DateTime(2014, 1, 1, 09, 00, 00, 000), start, end));
        Console.WriteLine("{0} - After start time",         TimeBetween(new DateTime(2014, 1, 1, 09, 00, 00, 001), start, end));        
        Console.WriteLine("{0} - Before end time",          TimeBetween(new DateTime(2014, 1, 1, 16, 59, 59, 999), start, end));
        Console.WriteLine("{0} - On end time inclusive",    TimeBetween(new DateTime(2014, 1, 1, 17, 00, 00, 000), start, end));
        Console.WriteLine("{0} - On end time exclusive",    TimeBetween(new DateTime(2014, 1, 1, 17, 00, 00, 000), start, end, false));
        Console.WriteLine("{0} - Too late",                 TimeBetween(new DateTime(2014, 1, 1, 17, 00, 00, 001), start, end));
    }

    public static bool TimeBetween(DateTime check, DateTime start, DateTime end, bool inclusive = true)
    {
        var from = new DateTime(check.Year, check.Month, check.Day, start.Hour, start.Minute, start.Second, start.Millisecond);
        var to = new DateTime(check.Year, check.Month, check.Day, end.Hour, end.Minute, end.Second, end.Millisecond);

        if (inclusive)
            return from <= check && to >= check;

        return from < check && to > check;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-26T04:38:06.697

```
 public static bool isCurrenctDateBetween(DateTime fromDate, DateTime toDate)
    {
        DateTime curent = DateTime.Now.Date;
        if (fromDate.CompareTo(toDate) >= 1)
        {
            MessageBox.Show("From Date shouldn't be grater than To Date", "DateRange",MessageBoxButton.OKCancel, MessageBoxImage.Warning);
        }
        int cd_fd = curent.CompareTo(fromDate);
        int cd_td = curent.CompareTo(toDate);

        if (cd_fd == 0 || cd_td == 0)
        {
            return true;
        }

        if (cd_fd >= 1 && cd_td <= -1)
        {
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-21T14:42:18.947

直接比较就好了。

如果（日期 > 开始日期 && 日期 < 结束日期）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-21T14:31:06.200

[如果当前时间在某个时间范围内，则查找](https://stackoverflow.com/questions/1504494/c-sharp-find-if-current-time-falls-in-a-time-range)错误

```
DateTime start = new DateTime(2009, 12, 9, 10, 0, 0));
DateTime end = new DateTime(2009, 12, 10, 12, 0, 0));
DateTime now = DateTime.Now;

if ((now > start) && (now < end))
{
   //match found
} 
```

时间跨度，再次，取自欺骗。

```
TimeSpan start = new TimeSpan(10, 0, 0);
TimeSpan end = new TimeSpan(12, 0, 0);
TimeSpan now = DateTime.Now.TimeOfDay;

if ((now > start) && (now < end))
{
   //match found
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-15T15:06:12.397

我用这个，所以你可以直接传递 DateTime：

```
 public static bool TimeBetween(DateTime time, DateTime startDateTime, DateTime endDateTime)
    {
        // get TimeSpan
        TimeSpan start = new TimeSpan(startDateTime.Hour, startDateTime.Minute, 0);
        TimeSpan end = new TimeSpan(endDateTime.Hour, endDateTime.Minute, 0);

        // convert datetime to a TimeSpan
        TimeSpan now = time.TimeOfDay;
        // see if start comes before end
        if (start < end)
            return start <= now && now <= end;
        // start is after end, so do the inverse comparison
        return !(end < now && now < start);
    } 
```

# c# - Web 浏览器多线程转换异常

> ID：12998745
> 
> 赞同：2
> 
> 时间：2012-10-21T14:29:12.813
> 
> 标签：c#, multithreading, browser

到目前为止，我有一个抓取网站的单线程应用程序。
因为我想让它更快，我尝试重建为一个多线程应用程序。这就是我所做的：
我有一个 Crawl 类，它包含一个 WebBrowser 对象。这就是我启动线程的方式：

```
 Crawler c1 = new Crawler();  
 Thread t1 = new Thread(new ThreadStart(c1.Crawl));  
 t1.SetApartmentState(ApartmentState.STA);
 t1.start() 
```

线程到达这个函数：

```
 LogIn(bool isInit)  
 {  
   browser = new WebBrowser();
   NavigateAndWaitForLoad(browser, "http://www.someurl.com", 1000);
   HtmlElement elemEmail = (HtmlElement)browser.Document.GetElementById("email");  
  }

 void NavigateAndWaitForLoad(WebBrowser wb, string link, int waitTime)  
  {  
   wb.Navigate(link);
   int count = 0;
   while (wb.ReadyState != WebBrowserReadyState.Complete)  
   {  
    Thread.Sleep(sleepTimeMiliseconds);
    Application.DoEvents();
    count++;
    if (count > waitTime / sleepTimeMiliseconds)
        break;  
    } 
```

现在在单线程中它工作得很好，但是在多线程应用程序中它在这一行崩溃： HtmlElement elemEmail = (HtmlElement)browser.Document.GetElementById("email");
非法铸造除外？？？！！！
不知道为什么？
请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:53:03.290

您正在使用 WebBrowser 对象、Application.DoEvents 和 Thread.Sleep。糟糕，糟糕，糟糕。你在这里自找麻烦。

建议：

如果您只是构建一个网络爬虫，只需使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)将网页作为字符串下载。然后，如果您需要将其解析为 HTML 文档，请使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。

这样，您可以避免使用 Web 浏览器 UI 控件，可以避免执行 Thread.Sleep，可以避免意外递归引发 Application.DoEvents。

这是一个示例：

```
public async void DownloadWebPage(string address)
{
    using(var webClient = new WebClient())
    {
        var webPageContents = await webClient.DownloadStringTaskAsync();

        // Woohoo, we have the contents of the web page. Do anything with it...
        Console.WriteLine(webPageContents);
    }
}

// Usage:
DownloadWebPage("http://www.google.com"); 
```

# css - 无法获取文本框和指向 div 底部的链接

> ID：12998746
> 
> 赞同：0
> 
> 时间：2012-10-21T14:29:16.843
> 
> 标签：css

我正在尝试获取一个文本框和几个链接，以便在一个高大图像旁边的底部安顿下来，但似乎没有任何运气。我已经发布了一张图片并上传了我的文件供您查看。我从这里尝试了各种解决方案，建议将父 div 设置为 position:relative 并给子 div 一个绝对位置。但似乎没有任何效果。你能帮我么。

![示例页面](../Images/db2ee36620d81e8fbcbf4e91309b01a8.png)

我的css文件：[https ://sizablesend.com/90kdo8/StackExchange.rar#cid=14](https://sizablesend.com/90kdo8/StackExchange.rar#cid=14)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:54:27.667

你需要一个包装器

```
<div id="wrapper">
    <div id="img"></div>
    <div id="links">link1 link2</div>
</div> 
```

这个 CSS 看起来像这样：

```
#wrapper {
    position:absolute;
    vertical-align:bottom;
    top:5px;
    left:50px;
    height:50px;        
}
#img {
    display:inline-block;
    width: 50px;
    height: 50px;
    background-color:#cccccc;
}
#links {
    display:inline-block;
} 
```

我使用了 div 所以你必须设置 display:inline-block 让它们保持在同一行

编辑：

这是一个工作[小提琴](http://jsfiddle.net/B7Gs7/)

# html - 外部样式表链接

> ID：12998747
> 
> 赞同：1
> 
> 时间：2012-10-21T14:29:22.637
> 
> 标签：html, css

我一直在尝试使用“../../css/style.css”链接我的外部样式表，但它没有正确链接我的样式表。请记住，我正在尝试在本地构建一个网站，所有文件都位于我的桌面（mac）上的一个文件夹中。

这是我的样式表的当前文件路径：/Users/btd/Desktop/html:css practice/css/styles.css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:38:05.800

CSS 路径应该相对于您的 HTML 文件位置。

如果您的 HTML 文件在 `/Users/btd/Desktop/html:css practice/`并且您的 css 是`/Users/btd/Desktop/html:css practice/css/styles.css`

那么你需要放入链接标签的 CSS 相对路径将是：`css/styles.css`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:38:56.437

如果你有`file.html`on`desktop`文件夹并且有样式`practice/css/styles.css`

*   桌面/file.html
*   桌面/实践/css/styles.css

正确的链接是`href="practice/css/styles.css"`

或其他示例：

*   桌面/实践/file.html
*   桌面/实践/css/styles.css

正确的链接是`href="css/styles.css"`

# spring - Spring Security 身份验证上下文传播

> ID：12998748
> 
> 赞同：1
> 
> 时间：2012-10-21T12:46:31.763
> 
> 标签：spring, spring-security

Spring Security 3 声称为 HttpInvoker 提供透明的身份验证上下文传播。

谁能指出这个集成代码的确切位置（我查看了 Spring Security 代码本身并没有发现任何东西，以及在 HttpInvoker 相关类中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:58:46.153

据我到目前为止，基于：[http ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#tech-intro-sec-context -持久性](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#tech-intro-sec-context-persistence)：

> 服务器缓存持续时间会话的主体信息。在 Spring Security 中，存储请求之间的 SecurityContext 的责任落在了 SecurityContextPersistenceFilter 上，它默认将上下文存储为 HTTP 请求之间的 HttpSession 属性。

你应该检查： `SecurityContextPersistenceFilter`

另一方面，我只有使用 Spring 2.5.x 的经验，并且可以使用 `HttpSessionContextIntegrationFilter`：( [http://static.springsource.org/spring-security/site/docs/2.0.x/apidocs/org/springframework/security /context/HttpSessionContextIntegrationFilter.html](http://static.springsource.org/spring-security/site/docs/2.0.x/apidocs/org/springframework/security/context/HttpSessionContextIntegrationFilter.html) )

此外，在客户端，您应该确保在调用之间使用一些会话传播实现，通常是`CommonsHttpInvokerRequestExecutor`（[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/remoting/httpinvoker/CommonsHttpInvokerRequestExecutor .html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/remoting/httpinvoker/CommonsHttpInvokerRequestExecutor.html)）。

# java - 将 MySQL 与 Android 一起使用

> ID：12998749
> 
> 赞同：1
> 
> 时间：2012-10-21T14:29:38.947
> 
> 标签：java, android, mysql, database

我正在尝试创建一个连接到 MySQL 数据库的 Android 应用程序。是否有捷径可寻？也许我错过了一个指南？这似乎是一项常见的任务，但由于某种原因，我找不到太多关于它的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:47:45.903

你需要两件事

*   网络服务
*   客户

**Web 服务**：这基本上是一个网站，它将从 MySQL 获取信息并将其显示为 JSON。您可以使用 XML 或其他东西，但事实证明[JSON](http://www.json.org/)对我来说是最简单的。

PHP & MySQL 教程： [http ://www.w3schools.com/php/php_mysql_intro.asp](http://www.w3schools.com/php/php_mysql_intro.asp)

我会假设你可以做到这一点，这并不难。您通常得到的是来自数据库的数组。您使用该数组来制作 JSON，使用

```
<?php
    echo json_encode($my_array);
?> 
```

你会得到是这样的：

```
{
"employees": [
{ "firstName":"John" , "lastName":"Doe" },
{ "firstName":"Anna" , "lastName":"Smith" },
{ "firstName":"Peter" , "lastName":"Jones" }
]
} 
```

**客户**：到目前为止，我只使用了名为[GSON](http://code.google.com/p/google-gson/)的库，它对我来说非常有用。我想你会在那里找到所有关于如何使用它的例子。它的作用是通过您提供的 URL 读取 JSON 并填充您的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:28:33.477

这个问题的原始Android代码确实有效：

[Android + MySQL 使用 com.mysql.jdbc.Driver](https://stackoverflow.com/q/4810116/1665128)

您应该使用兼容的驱动程序（我猜，没有 Java 1.7 高级功能）。正如这里推荐的（mysql-connector-java-3.0.17-ga-bin.jar）：

[https://stackoverflow.com/a/6554930/1665128](https://stackoverflow.com/a/6554930/1665128)

并为您的清单添加权限：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

当然，或者，您可以将数据库包装到 Web 服务或其他任何东西中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:01:33.037

您将数据发布到`PHP script`将数据存储在您的应用程序中的数据。[这是一个非常简洁的指南](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

# android - 通过 CursorLoader 中的“选择”参数过滤 ListView

> ID：12998753
> 
> 赞同：5
> 
> 时间：2012-10-21T14:30:02.433
> 
> 标签：android, sqlite, filter, where-clause, android-cursorloader

我的语法不正确，或者我还不明白 Loaders 是如何工作的，但我目前有一个 ListView 显示我的数据库中的所有项目。该活动有一个显示今天日期的按钮。用户可以单击它来调出日期对话框，或者可以按上一个/下一个按钮来更改显示的日期。我想根据显示的日期过滤 ListView，因此只有保存该日期的记录才会显示。

目前所有记录都显示为

```
public Loader<Cursor> onCreateLoader(int id, Bundle args) {         
    CursorLoader cl = new CursorLoader(this, DBProvider.CONTENT_URI,
            null, null, null, null);
    return cl;
} 
```

我已经根据我在网上看到的内容尝试了一些变体，但基本上我试图包含一个“选择”，将今天的日期显示为一个字符串（它已经通过 SimpleDateFormatter 并设置为按钮上的文本）。

```
public Loader<Cursor> onCreateLoader(int id, Bundle args) { 
    String[] selectDate = { btn_logbook_date.getText().toString() };
    CursorLoader cl = new CursorLoader(this, DBProvider.CONTENT_URI,
            null, "Date=?", selectDate , null);
    return cl;
} 
```

和

```
public Loader<Cursor> onCreateLoader(int id, Bundle args) { 
    String selectDate = btn_logbook_date.getText().toString();
    String selection = "(" + AddDBHelper.KEY_DATE + "=" + selectDate + ")";

    CursorLoader cl = new CursorLoader(this, DBProvider.CONTENT_URI,
            null, selection, null, null);
    return cl;
} 
```

两者都生成 NullPointerExceptions。任何有关在创建加载程序时过滤此问题的正确方法的指针将不胜感激。

**更新**

似乎 NullPointerException 正在发生，因为我`fillData()`在调用我的方法之前调用了该方法（用于填充我的 ListView）`btn_logbook_date.setText()`。我已经在我的活动中进一步向下移动`onCreate`，应用程序不再崩溃，但数据不再填充。我意识到如果我用今天的日期保存一条新记录，它会显示在我的列表视图中，但是在更改日期时没有其他记录出现。在 ListView 活动中更改回今天也显示为空白。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView (R.layout.dash_logbook);     
    this.getListView().setDividerHeight(2);         

    ListView list = getListView();
    list.setOnItemClickListener(this);

    btn_logbook_date = (Button) findViewById(R.id.btn_logbook_date);
    now = Calendar.getInstance();
    nowD = now.getTime();

    SimpleDateFormat dFormatter = new SimpleDateFormat("dd MMM yyyy");
    strDate = dFormatter.format(nowD);
    btn_logbook_date.setText(strDate);              

    fillData();
}

// I have code here to call on the DateDialogFragment

public void updateDatePrev() {
    String prevVar[] = btn_logbook_date.getText().toString().split(" ");

    if (prevVar[1].equalsIgnoreCase("Jan")) {
        lMonth = 0;
    } else if (prevVar[1].equalsIgnoreCase("Feb")) {
        lMonth = 1;
    } else if (prevVar[1].equalsIgnoreCase("Mar")) {
        lMonth = 2;
    } else if (prevVar[1].equalsIgnoreCase("Apr")) {
        lMonth = 3;
    } else if (prevVar[1].equalsIgnoreCase("May")) {
        lMonth = 4;
    } else if (prevVar[1].equalsIgnoreCase("Jun")) {
        lMonth = 5;
    } else if (prevVar[1].equalsIgnoreCase("Jul")) {
        lMonth = 6;
    } else if (prevVar[1].equalsIgnoreCase("Aug")) {
        lMonth = 7;
    } else if (prevVar[1].equalsIgnoreCase("Sep")) {
        lMonth = 8;
    } else if (prevVar[1].equalsIgnoreCase("Oct")) {
        lMonth = 9;
    } else if (prevVar[1].equalsIgnoreCase("Nov")) {
        lMonth = 10;
    } else if (prevVar[1].equalsIgnoreCase("Dec")) {
        lMonth = 11;
    }

    int lYear = Integer.parseInt(prevVar[2]);
    int lDay = Integer.parseInt(prevVar[0]);
    now = Calendar.getInstance();
    now.set(Calendar.YEAR, lYear);
    now.set(Calendar.MONTH, lMonth);
    now.set(Calendar.DAY_OF_MONTH, lDay - 1);
    PrevDate = now.getTime();
    SimpleDateFormat prevDFormatter = new SimpleDateFormat("dd MMM yyyy");
    strDate = prevDFormatter.format(PrevDate);
    btn_logbook_date.setText(strDate);      
}

public void updateDateNext() {
//same code as above, except adding +1 to the days when clicked
}

private void fillData() {
    // Fields from the database (projection) must include
    // the _id column for the adapter to work
    String[] from = new String[] { AddDBHelper.KEY_BGL, AddDBHelper.KEY_ROWID,
            AddDBHelper.KEY_CATEG, AddDBHelper.KEY_TIME };
    // Fields on the UI to which we map
    int[] to = new int[] {R.id.logBGL, R.id.logRowID, R.id.logCateg, R.id.logTime };

    getLoaderManager().initLoader(0, null, this);
    adapter = new SimpleCursorAdapter(this, R.layout.logbook_item, null, from, to, 0);

    setListAdapter(adapter);        
}    

public Loader<Cursor> onCreateLoader(int id, Bundle args) { 
     String selection = AddDBHelper.KEY_DATE + "=?";
     String[] selectionArgs = { String.valueOf(btn_logbook_date.getText().toString()) };

    CursorLoader cl = new CursorLoader(this, DBProvider.CONTENT_URI,
            null, selection, selectionArgs, null);
    return cl;
}

public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data);
}

public void onLoaderReset(Loader<Cursor> loader) {
    adapter.swapCursor(null);
} 
```

当最初从不同的活动保存到数据库时，我也在使用该`SimpleDateFormat`方法并转换为与上面相同的格式，因此保存的字符串和按钮上显示的文本应该匹配。

**更新**

我已经在下面回答了这个问题。关于重新填充列表的问题将单独询问，因为原始问题仅涉及按日期过滤列表。我通过使用今天的日期创建新记录并在打开列表视图活动时填充它们来确认这是有效的。通过更改 Android 模拟器中的日期，然后重新打开应用程序和列表视图活动，我可以看到属于新设置日期的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:00:34.307

要么`btn_logbook_date`要么`btn_logbook_date.getText()`是`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:59:47.223

如上所示，我的`fillData()`方法在我的活动中被调用`onCreate`，但在我的按钮上设置日期之前我错误地调用了它。`fillData()`用于填充列表并初始化我的加载器。加载程序根据我的按钮上显示的日期进行过滤。通过在尝试调用之后设置按钮上的日期`fillData()`，列表没有从按钮获取的值，从而导致 NullPointerException。

正确的代码在下面再次显示以进行澄清。

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView (R.layout.dash_logbook);     
this.getListView().setDividerHeight(2);         

ListView list = getListView();
list.setOnItemClickListener(this);

btn_logbook_date = (Button) findViewById(R.id.btn_logbook_date);
now = Calendar.getInstance();
nowD = now.getTime();

SimpleDateFormat dFormatter = new SimpleDateFormat("dd MMM yyyy");
strDate = dFormatter.format(nowD);
// Set the text on this button BEFORE calling the fillData() method
btn_logbook_date.setText(strDate);              

fillData();
}

private void fillData() {       
    String[] from = new String[] { AddDBHelper.KEY_BGL, AddDBHelper.KEY_ROWID,
            AddDBHelper.KEY_CATEG, AddDBHelper.KEY_TIME };
    int[] to = new int[] {R.id.logBGL, R.id.logRowID, R.id.logCateg, R.id.logTime };

    getLoaderManager().initLoader(0, null, this);
    adapter = new SimpleCursorAdapter(this, R.layout.logbook_item, null, from, to, 0);

    setListAdapter(adapter);
}

public Loader<Cursor> onCreateLoader(int id, Bundle args) { 
     String selection = AddDBHelper.KEY_DATE + "=?";
     String[] selectionArgs = { String.valueOf(btn_logbook_date.getText().toString()) };

    CursorLoader cl = new CursorLoader(this, DBProvider.CONTENT_URI,
            null, selection, selectionArgs, null);
    return cl;
}

public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data);
}

public void onLoaderReset(Loader<Cursor> loader) {
    // data is not available anymore; delete reference
    adapter.swapCursor(null);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:41:29.027

您正在传递一个“空”值作为光标加载器的投影。

```
CursorLoader(Context context, Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) 
```

您需要指定您的 cursorloader 应获取的列，例如：

```
static final String[] ADAPTER_PROJECTION = new String[] {
        AddDBHelper.KEY_DATE,
        AddDBHelper.KEY_NAME,
        AddDBHelper.SOME_OTHER_COLUMN_NAME}; 
```

# c - 如何正确打印函数调用？

> ID：12998755
> 
> 赞同：0
> 
> 时间：2012-10-21T14:30:18.170
> 
> 标签：c

结果为 0.0。我希望它作为 0 以外的数字出现，除非输入的数字当然是 0。我尝试了几件事。这是当前代码。

```
#include <stdio.h>                                     /* Necessary header */
#include <stdlib.h>

int main()
{
    double Initial;
    double Post;

    printf("Enter a number with a decimal: ");
    scanf("%lf", &Initial);
    printf("Enter another number using the same format: ");
    scanf("%lf", &Post);

    ComputeMinimum(Initial, Post);
    ComputeMaximum(Initial, Post);

    printf("Of %1.1lf and %1.1lf ", Initial, Post);
    printf("the minimum is %1.1lf ", ComputeMinimum(Initial, Post));
    printf("and the maximum is %1.1lf.", ComputeMaximum(Initial, Post));

    return 0;
}

    double ComputeMaximum(double B, double A)
{
    return (A > B) ? A : B;
}

double ComputeMinimum(double a, double b)
{
    return (a < b) ? a : b;
} 
```

我已经尝试过以下方法。另外，我应该使函数的返回类型加倍，但不确定如何。

```
int main()
{
    double Initial;
    double Post;

    printf("Enter a number with a decimal: ");
    scanf("%lf", &Initial);
    printf("Enter another number using the same format: ");
    scanf("%lf", &Post);

    double minimum = ComputeMinimum(Initial, Post);
    double maximum = ComputeMaximum(Initial, Post);

    printf("Of %1.1lf and %1.1lf ", Initial, Post);
    printf("the minimum is %1.1lf ", minimum);
    printf("and the maximum is %1.1lf.", maximum);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:45:04.783

我不知道，它对我来说非常好用。

您应该在 main 之前添加函数声明，因此它得到：

```
#include <stdio.h>                                     /* Necessary header */
#include <stdlib.h>

double ComputeMinimum(double a, double b);
double ComputeMaximum(double a, double b);

int main()
{
.... 
```

至于您的下一个问题，这些函数的返回类型是 IS `double`，因此您无需更改任何内容。问题是没有函数原型编译器不知道它会是什么`double`，所以它假设`int`。

请启用编译器警告，它们真的很有帮助，您应该始终仔细阅读它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:11:03.947

For me also it worked i.e. the above program in which you are catching the output in maximum and minimum as double. I think above mention of declaring the prototype is also correect or you can directly put the definition of the both the function above the main program, then in that case you don't even need prototype since it will work as prototype for the compiler as well

# c++ - 在 C++ 中打印布尔值

> ID：12998764
> 
> 赞同：0
> 
> 时间：2012-10-21T14:31:10.997
> 
> 标签：c++, printing, boolean, cout

```
#include <iostream>
using namespace std ;
int main()
{
    int a=5, b=4;
    cout<< a==b;
} 
```

为什么我不能打印此代码。如何打印布尔值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T14:37:29.900

您正在处理运算符优先级问题：

```
cout << a==b; 
```

被解释为

```
(cout << a) == b; 
```

因为 << 的优先级高于 ==。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T14:32:55.780

使用[std::boolalpha](http://www.cplusplus.com/reference/iostream/manipulators/boolalpha/)打印为`true`or `false`。并添加括号，请参阅 Vaughn Cato 的答案以获得解释。

```
#include <iostream>
#include <iomanip>
using namespace std ;
int main()
{
    int a=5, b=4;
    cout<< boolalpha << (a==b);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T14:32:46.890

您必须在测试周围加上括号：

```
cout<< (a==b); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T14:33:01.597

将圆括号（括号）放在`a==b`：

```
cout<< (a==b); 
```

这是必需的，因为`<<`运算符优先级高于`==`.

# android - 为什么 tabwidget 会丢失一半？漏洞？

> ID：12998770
> 
> 赞同：0
> 
> 时间：2012-10-21T14:31:23.583
> 
> 标签：android, tabwidget

以下是我的tabhost。

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@android:id/tabhost"
   android:padding="0px"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">

   <LinearLayout 
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">

      <FrameLayout
         android:id="@android:id/tabcontent"
         android:background="@drawable/mbg"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:layout_weight="1">
      </FrameLayout>

        <HorizontalScrollView
            android:id="@+id/horizontalScrollView1"
            android:layout_weight="0"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:scrollbars="none"> 
            <TabWidget
                android:id="@android:id/tabs"
                android:padding="0px"
                android:dividerPadding="0px"
                android:showDividers="none"
                android:layout_margin="0px"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />  
        </HorizontalScrollView>       

    </LinearLayout>
</TabHost> 
```

以下是我的测试标签活动

```
public class tabtest extends TabActivity {
    private TabHost tabHost;
    private TabWidget tabWidget;
    Field mBottomLeftStrip;
    Field mBottomRightStrip;
    public Context thisContext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        requestWindowFeature(Window.PROGRESS_INDETERMINATE_OFF);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.tabgroup);
        makeTab();
    }

    public void makeTab(){
        if(this.tabHost == null){
            tabHost = getTabHost();
            tabWidget = getTabWidget();
            tabHost.setup();
            tabHost.bringToFront();

            TabSpec tab1 = tabHost.newTabSpec("Tab1");
            TabSpec tab2 = tabHost.newTabSpec("Tab2");
            TabSpec tab3 = tabHost.newTabSpec("Tab3");
            TabSpec tab4 = tabHost.newTabSpec("Tab4");
            TabSpec tab5 = tabHost.newTabSpec("Tab5");
            TabSpec tab6 = tabHost.newTabSpec("Tab6");

            tab1.setIndicator("Tab1",getResources().getDrawable(R.drawable.first)).setContent(new Intent(this,IntentGroup1.class));
            tab2.setIndicator("Tab2",getResources().getDrawable(R.drawable.second)).setContent(new Intent(this,IntentGroup1.class));
            tab3.setIndicator("Tab3",getResources().getDrawable(R.drawable.third)).setContent(new Intent(this,IntentGroup1.class));
            tab4.setIndicator("Tab4",getResources().getDrawable(R.drawable.first)).setContent(new Intent(this,IntentGroup1.class));
            tab5.setIndicator("Tab5",getResources().getDrawable(R.drawable.second)).setContent(new Intent(this,IntentGroup1.class));
            tab6.setIndicator("Tab6",getResources().getDrawable(R.drawable.third)).setContent(new Intent(this,IntentGroup1.class));

            tabHost.addTab(tab1);
            tabHost.addTab(tab2);
            tabHost.addTab(tab3);
            tabHost.addTab(tab4);
            tabHost.addTab(tab5);
            tabHost.addTab(tab6);

        }
    }
} 
```

以下是 Intent 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
</LinearLayout> 
```

以下是 IntentGroup1.class

```
public class IntentGroup1 extends Activity   {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ilayout1);
   } 
```

![在此处输入图像描述](../Images/5899121f41cdac86801076920d1b09f8.png)

第一次可以正常显示。但如果手机切换到待机模式并再次唤醒，Tab 只会显示一半左右。任何人都可以帮忙吗？

# ios - 执行“self.course.referenceBooks.count”时发生错误

> ID：12998771
> 
> 赞同：0
> 
> 时间：2012-10-21T14:31:25.167
> 
> 标签：ios, core-data

我使用核心数据。有两个实体：**Course**和**ReferenceBook**。Course和ReferenceBook之间的关系是**多对多的。**

在*CTXCourse.h 中*：

```
#import <CoreData/CoreData.h>

@class CTXReferenceBook;

@interface CTXCourse : NSManagedObject
//....other property
@property (strong, nonatomic) NSSet *referenceBooks;

@end

@interface CTXCourse (CoreDataGeneratedAccessors)

- (void)addReferenceBooksObject:(CTXReferenceBook *)object;
- (void)removeReferenceBooksObject:(CTXReferenceBook *)object;
- (void)addReferenceBooks:(NSSet *)objects;
- (void)removeReferenceBooks:(NSSet *)objects;

@end 
```

在表视图控制器中，我定义了一个 NSManagedObjectContext 实例和一个 NSFetchedResultsController 实例。有一个推送到第二个视图控制器，并传递一个课程实例。我要统计一门课的书本数，执行“ `self.course.referenceBooks.count`”

> **错误**：

```
[1066:fb03] -[CTXCourse referenceBooks]: unrecognized selector sent to instance 0x6e74af0
[1066:fb03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CTXCourse referenceBooks]: unrecognized selector sent to instance 0x6e74af0' 
```

但是，在CTXCourse.h中，我将referenceBooks命名为books，则没有错误，也就是说，计数的结果是对的。

所以，我很困惑。

# python - 在 App Engine 上实施 simpleauth - 出现 404 错误

> ID：12998772
> 
> 赞同：0
> 
> 时间：2012-10-21T14:31:30.697
> 
> 标签：python, google-app-engine, jinja2

我在我的 App Engine (Python 2.7) 应用程序上实现了 Alex 的 Simpleauth：[https](https://github.com/crhym3/simpleauth) ://github.com/crhym3/simpleauth ，但我不知道为什么会出现 404 错误。

当我在未登录时尝试转到“/profile”时，我会正确重定向到“/”。但是当我（成功）登录并被定向到“/profile”时，我得到一个 404。

我认为这是因为它在“渲染”代码中遇到了“TemplateNotFound”异常。但是“profile.html”文件存在并且正确地位于“模板”目录中。

**谁能帮我弄清楚我做错了什么？**

以下是相关文件的代码：

**应用程序.yaml**

```
handlers:
- url: /auth/*
  script: main.app
- url: /profile
  script: main.app
- url: /logout/*
  script: main.app
- url: /.*
  script: main.app
libraries:
- name: jinja2
  version: latest 
```

**主文件**

```
import webapp2
import jinja2
from secrets import SESSION_KEY

template_env = jinja2.Environment(loader=jinja2.FileSystemLoader(os.getcwd()))

class MainHandler(webapp2.RequestHandler):
    def get(self):
        template = template_env.get_template('templates/home.html')
        context = {
        }
        self.response.out.write(template.render(context))

app_config = {
  'webapp2_extras.sessions': {
    'cookie_name': '_simpleauth_sess',
    'secret_key': SESSION_KEY
  },
  'webapp2_extras.auth': {
    'user_attributes': []
  }
}

app = webapp2.WSGIApplication([('/', MainHandler),
    webapp2.Route('/profile', handler='handlers.ProfileHandler', name='profile'),
    webapp2.Route('/auth/<provider>', handler='handlers.AuthHandler:_simple_auth', name='auth_login'),
    webapp2.Route('/auth/<provider>/callback', handler='handlers.AuthHandler:_auth_callback', name='auth_callback'),
    webapp2.Route('/logout', handler='handlers.AuthHandler:logout', name='logout')], config=app_config, debug=True) 
```

**handlers.py** （与 Alex 的 Simpleauth 代码相同！）

```
import webapp2
from webapp2_extras import auth, sessions, jinja2
from jinja2.runtime import TemplateNotFound

from simpleauth import SimpleAuthHandler

class BaseRequestHandler(webapp2.RequestHandler):
  def dispatch(self):
    # Get a session store for this request.
    self.session_store = sessions.get_store(request=self.request)

    try:
      # Dispatch the request.
      webapp2.RequestHandler.dispatch(self)
    finally:
      # Save all sessions.
      self.session_store.save_sessions(self.response)

  @webapp2.cached_property    
  def jinja2(self):
    """Returns a Jinja2 renderer cached in the app registry"""
    return jinja2.get_jinja2(app=self.app)

  @webapp2.cached_property
  def session(self):
    """Returns a session using the default cookie key"""
    return self.session_store.get_session()

  @webapp2.cached_property
  def auth(self):
      return auth.get_auth()

  @webapp2.cached_property
  def current_user(self):
    """Returns currently logged in user"""
    user_dict = self.auth.get_user_by_session()
    return self.auth.store.user_model.get_by_id(user_dict['user_id'])

  @webapp2.cached_property
  def logged_in(self):
    """Returns true if a user is currently logged in, false otherwise"""
    return self.auth.get_user_by_session() is not None

  def render(self, template_name, template_vars={}):
    # Preset values for the template
    values = {
      'url_for'    : self.uri_for,
      'logged_in'  : self.logged_in
    }

    # Add manually supplied template values
    values.update(template_vars)

    # read the template or 404.html
    try:
      self.response.write(self.jinja2.render_template(template_name, **values))
    except TemplateNotFound:
      self.abort(404)

  def head(self, *args):
    """Head is used by Twitter. If not there the tweet button shows 0"""
    pass

class ProfileHandler(BaseRequestHandler):
  def get(self):
    """Handles GET /profile"""    
    if self.logged_in:
      self.render('profile.html', {
        'user': self.current_user, 
        'session': self.auth.get_user_by_session()
      })
    else:
      self.redirect('/') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:05:55.087

上面的问题是我使用了两种不同的方式来实现 Jinja2。这两种不同的方法在一个单独的问题中讨论：[在 App Engine 上使用 jinja2 的首选方法是哪种？](https://stackoverflow.com/questions/13022030/which-is-the-preferred-method-to-use-jinja2-on-app-engine)

是混合和匹配导致了 404 错误。

# android - 在视图类android中加载布局xml文件

> ID：12998774
> 
> 赞同：1
> 
> 时间：2012-10-21T14:31:38.523
> 
> 标签：android, android-view

我有这堂课：

```
public class MainActivity extends Activity{
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main);//LOAD MY LAYOUT
    }
} 
```

还有更多代码（显然）。我有下一个用户界面：

![在此处输入图像描述](../Images/e7c9460cbb6026e20fd24e8581502ad0.png)

我想画一条线来模拟图像之间的联合。

我试过：

```
Canvas canvas = new Canvas();
Paint paint = new Paint();
paint.setColor(Color.BLACK);
canvas.drawLine(0, 0, 300, 700, paint); 
```

（上面只是测试我是否可以画一条线。）但是我不能画任何东西，因为当我在我的活动中创建这样的画布时，它没有附加到任何东西上，我只是在一个表面上画永远不是屏幕的一部分。

因此，我有以下课程。

```
public class MainActivity extends Activity  {
/** Called when the activity is first created. */
Paint mPaint;
float Mx1,My1;
float x,y;
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MyView view1 =new MyView(this);
    setContentView(view1);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFF0000);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeWidth(10);
}

public class MyView extends View {
    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;

    public MyView(Context c) {
        super(c);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFAAAAAA);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event){
        float x = event.getX();
        float y = event.getY();
        switch (event.getAction()){
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
               invalidate();
                break;
        }
        return true;
    }
}
} 
```

这是我找到的一个例子。在视图类中，方法：

```
setContentView(R.layout.main); 
```

不起作用。

我的问题是：如何在扩展的 View 类中加载我的 UI（我已设置为图像）？因为在示例中我只是加载一个空屏幕。我不知道如何加载我的布局 file.xml

**谢谢你的帮助！！！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:46:03.000

我想我解决了我的问题。

我扩展了 LinearLayout 而不是 View 类。

```
public class MyView extends LinearLayout{
    public MyView(Context c) {
        super(c);            
        LayoutInflater inflater = (LayoutInflater) c.getSystemService(c.LAYOUT_INFLATER_SERVICE);
        addView(inflater.inflate(R.layout.union, null));
    }
} 
```

有了这个，我可以加载我的布局。现在，我将尝试画线。我希望这对其他有同样问题的人有用。

（编辑）：但现在我不能画一条线。我尝试使用扩展活动类中的下一个代码：

```
Canvas canvas = new Canvas();
MyView.onDraw(canvas); 
```

我在扩展的 LinearLayout 类中有下一个代码：

```
public void onDraw(Canvas canvas) {
            canvas.drawLine(0, 0, 9900, 9900, paint);
} 
```

我可以在整个 UI 下画线吗？

（（再次编辑））我找到了我的解决方案：

```
public void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        canvas.drawLine(0, 0, 9900, 9900, paint);
} 
```

如果我调用 onDraw 方法，我会在用户界面的“下方”画一条线，但如果我调用 dispatchDraw()，我会在用户界面上方画一条线，我可以看到这条线。我希望这对其他人非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:33:26.527

尝试将您的第一种方法放在 Activity.onResume() 方法中。活动应该已经在前台。[请参阅http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)上的 Activity 生命周期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:18:57.973

您是否在项目中创建布局文件名“main.xml”？如果没有，请先创建它。

# java - 无法访问的代码 Java 编译错误

> ID：12998778
> 
> 赞同：-4
> 
> 时间：2012-10-21T14:32:32.310
> 
> 标签：java, unreachable-code

我为我的问题搜索了很多主题，阅读了很多……但它们与我的不完全一样。

我从 Eclipse IDE 收到“无法访问的代码”编译错误。

我不明白为什么我的代码无法访问！虽然很简单！这里是...

```
public String doAction(int action, Player P1, Player P2) {
    switch(action) {
        case 'a':
        case 'A':
            CriticalChance =  ThreadLocalRandom.current() .nextInt(CritMin,CritMax+1);
            if(CriticalChance <= 5) {
                int temp = ThreadLocalRandom.current().nextInt(31,50+1);
                P1.setAttack(temp);
            } else {
                P2.deductHp(P1.newNormalAttack());
            }

            if(CriticalChance <= 5) {
                String temp =  String.format("CRITICAL STRIKE! "+P1.getName()+" did "+P1.getAttack()+" damage to "+P2.getName()+"\n");
                return temp;
            } else {
                String temp =  String.format(P1.getName()+" did "+P1.getAttack()+" damage to "+P2.getName()+"\n");
                return temp;
            }

            if(P2.getHp() > 0) {
                String temp =  String.format(P2.getName()+"'s Remaining HP is "+P2.getHp()+"\n");
                return temp;
            } else {
                String temp =  String.format(P2.getName()+" Bled To Death!!\n");
                return temp;
            }
            break;
    }
} 
```

请帮忙！如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:34:27.693

它永远不会到达那个`break`语句，因为在它之前是 if elses`return`在每个分支中都有语句，所以它肯定会从其中一个返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T14:36:53.117

自从它在此之后返回：

```
 if(CriticalChance <= 5)
    {
        String temp =  String.format("CRITICAL STRIKE! "+P1.getName()+" did "+P1.getAttack()+" damage to "+P2.getName()+"\n");
        return temp;
    }       
    else
    {
        String temp =  String.format(P1.getName()+" did "+P1.getAttack()+" damage to "+P2.getName()+"\n");
        return temp;
    } 
```

此后的任何代码都**无法访问**（永远不会被执行），因为它同时返回`if`和`else`条件。因此编译器抱怨。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T14:37:18.133

下一个代码无法访问，因为在 if-else 语句之后没有条件说明代码应该继续。无论哪种情况，代码都会返回一个值。

```
 if(CriticalChance <= 5)
    {
        String temp =  String.format("CRITICAL STRIKE! "+P1.getName()+" did "+P1.getAttack()+" damage to "+P2.getName()+"\n");
        return temp;
    }       
    else
    {
        String temp =  String.format(P1.getName()+" did "+P1.getAttack()+" damage to "+P2.getName()+"\n");
        return temp;
    } 
```

遥不可及的：

```
 if(P2.getHp() > 0)
    {
        String temp =  String.format(P2.getName()+"'s Remaining HP is "+P2.getHp()+"\n");
        return temp;
    }   
    else
    {   
        String temp =  String.format(P2.getName()+" Bled To Death!!\n");
        return temp;
    }

    break;
    }
     }} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T14:37:33.197

查看以`if(CriticalChance <= 5)`. 请注意，“then”和“else”都以`return`语句结尾。这意味着后面的语句`if`是不可访问的。（你也对下`if`一条语句做同样的事情......）

* * *

我还应该指出，您通过命名变量“CriticalChance”、“CritMin”和“CritMax”违反了公认的编码标准。变量名应始终以小写字母开头。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T14:35:48.013

它永远不会中断；声明，因为您要退出之前的 if 和 else。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-21T14:35:48.750

```
 if(CriticalChance <= 5)
    {
        String temp =  String.format("CRITICAL STRIKE! "+P1.getName()+" did "+P1.getAttack()+" damage to "+P2.getName()+"\n");
        return temp;
    }      
    else
    {
        String temp =  String.format(P1.getName()+" did "+P1.getAttack()+" damage to "+P2.getName()+"\n");
        return temp;
    } 
```

在此块下方，您的代码无法访问。不会被执行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-21T14:35:55.857

这是因为您的`return temp`语句，因为无论`CriticalChance`. `if`or ，无论执行哪个条件，`else`函数都将返回并且不再执行任何代码。

# c++ - 为什么 valgrind 将 64 位程序中指针的大小报告为 4 个字节

> ID：12998787
> 
> 赞同：0
> 
> 时间：2012-10-21T14:33:37.823
> 
> 标签：c++, valgrind

我编写了一个测试 C++ 程序来检查 valgrind 的输出。代码是

```
#include <iostream>

void f() {
    int *pp = new int(1);
    std::cout << "pp is " << *pp << "\n";
}

int main() {
    f();
    return 0;
} 
```

我使用的 valgrind 命令是

```
valgrind --leak-check=yes ./a.out 
```

Valgrind 的输出是

```
==2255== HEAP SUMMARY:
==2255==     in use at exit: 4 bytes in 1 blocks
==2255==   total heap usage: 1 allocs, 0 frees, 4 bytes allocated
==2255== 
==2255== 4 bytes in 1 blocks are definitely lost in loss record 1 of 1
==2255==    at 0x4C2B1C7: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==2255==    by 0x400786: f() (in /run/shm/a.out)
==2255==    by 0x4007CC: main (in /run/shm/a.out)
==2255== 
==2255== LEAK SUMMARY:
==2255==    definitely lost: 4 bytes in 1 blocks
==2255==    indirectly lost: 0 bytes in 0 blocks
==2255==      possibly lost: 0 bytes in 0 blocks
==2255==    still reachable: 0 bytes in 0 blocks
==2255==         suppressed: 0 bytes in 0 blocks 
```

我正在使用 Ubuntu 机器：Linux Sun 3.2.0-27-generic #43-Ubuntu SMP Fri Jul 6 14:25:57 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

gcc 版本“4.6.3”

我使用的 gcc 参数“-g -m64”

我认为它应该是八个字节，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:37:46.413

`sizeof(int)==8`不，除非在您的平台上，否则它不应该是八个字节。

您正在分配和泄漏单个`int`，而不是指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:40:15.933

您不分配指针数组，而是分配大小为 1 的整数数组。因此，您仅在内存中分配整数的大小。唯一的指针是存储新分配数组地址的局部变量。

如果要分配指针，请执行`void **arr = new void*[1];`

# java - 同一实体上的 JPA OneToOne 和 OneToMany

> ID：12998788
> 
> 赞同：2
> 
> 时间：2012-10-21T14:33:38.370
> 
> 标签：java, jpa, playframework

> **可能重复：**
> [两个实体之间的 JPA OneToOne 和 ManyToMany](https://stackoverflow.com/questions/13003277/jpa-onetoone-and-manytomany-between-two-entities)

我一直在寻找无济于事的解决方案。我的问题是我有两个实体“员工”和“部门”许多员工属于一个部门，一个部门由一名员工领导。任何时候都会遇到错误，同时介绍@OneToOne 和@OneToMany。这是代码

```
public class Department {
@Required
public String deptName; 

@OneToMany(mappedBy="dept")
public List<Employee> employees = new ArrayList<Employee>();

@OneToOne
public Employee deptHead = new Employee();

    .....   

}

public class Employee{
@Required
public String surname;

@Required
public String othernames;   

@OneToOne(mappedBy="depthead")
public Department headedBy = new Department();

@ManyToOne
public Department dept = new Department();

... 
} 
```

是否可以同时拥有注释和工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:38:38.663

应该。

1.  当您创建或要求 JPA 创建 的实例时`Employee`，`Employee`尝试实例化 a `Department`（实例化`Employee`...）到无穷大。

    从类定义中删除`= new Employee()`and =`new Department()`表达式；使用适当的设置方法。

2.  验证定义一对一关系的 SQL 列*是否定义*在`Department`表上；具体来说，该`Department`表有一个外键引用`Employee`. 这样做的基础是`@OneToOne(mappedBy="...")`应该在*没有*SQL 外键的 JPA 实体上定义，引用*具有*.

* * *

除此之外，还有一个问题

```
@OneToOne(mappedBy="depthead")
public Department headedBy = new Department(); 
```

和上的相应字段`Department`：

```
@OneToOne
public Employee deptHead = new Employee(); 
```

`depthead`和之间的情况`deptHead`分别不匹配。

# java - Spring MVC 从控制器设置 ListBox 值

> ID：12998791
> 
> 赞同：0
> 
> 时间：2012-10-21T14:33:51.097
> 
> 标签：java, spring-mvc, listbox

我在视图中有一个列表框，我想当我按下重置按钮时，表单被提交给控制器，并且在性别列表框默认的情况下，列表框的值被重新设置为其默认值值为“A”。

提交给控制器之前的用户可能已经选择了另一个值，例如“M”，但是当我单击重置按钮时，该值应默认为“A”。我已经尝试过 request.setAttribute("gender.genderId", "A") 和 request.setAttribute("genderId", "A") ，但这些都不适合我。下面是我的代码：

**看法**

```
<li>
<label>Select Gender</label>
<form:select path="genderId" id="genderId" title="Select Your Gender">
<form:options items = "${gender.genderList}" itemValue="genderId" itemLabel="genderDesc" />
</form:select>
<form:errors path="genderId" class="errors"/>
</li> 
```

**控制器**

想将性别的值设置为“A”：

```
 ......
    model.addAttribute("gender", myGender);
    request.setAttribute("gender.itemValue", "A");
    model.addAttribute("updateBtnStatus","disabled");
    return new ModelAndView("officer_registration");
} 
```

**html**

```
<li>
<label>Select Gender</label>
<select id="genderId" name="genderId" title="Select Your Gender">
<option value="A">Select Gender</option><option value="F">FEMALE</option><option value="M" selected="selected">MALE</option>
</select>
</li> 
```

# sql - SQL Server：具有相同列值的多行，除了一个

> ID：12998801
> 
> 赞同：2
> 
> 时间：2012-10-21T14:35:13.673
> 
> 标签：sql, sql-server, tsql

我有这样的数据：

```
name_text   ----------c_num---d_type-----unique_id----------------------v_text--r_ticket_id
29311875_FAD_V100.doc 3560709 Contract 21DABDDF49BA41289F1905D1D6B79ABF 2,01    28600206
29311875_FAD_V100.doc 3560709 Contract 21DABDDF49BA41289F1905D1D6B79ABF 2,01    28600240
Copy.docx             3560715 Guide    9D06F8EFF4EC4A2D862F5A0DB3BA357B 2       28600219 
```

`r_ticket_id`如果`name_text`, `c_num`, `d_type`, `unique_id`,`v_text`列值相等，我只想选择列值较大的一行。

在这些情况下，使用 select 语句只应该获取这些列。

```
name_text   ----------c_num---d_type-----unique_id----------------------v_text--r_ticket_id
29311875_FAD_V100.doc 3560709 Contract 21DABDDF49BA41289F1905D1D6B79ABF 2,01    28600240
Copy.docx             3560715 Guide    9D06F8EFF4EC4A2D862F5A0DB3BA357B 2       28600219 
```

可以完成这项工作的确切 SQL 查询是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T14:38:10.017

当一条记录可能具有相同的唯一 id 但每列具有不同的值时，这可能会有所帮助。利用`ROW_NUMBER`和窗口功能。我猜它们已经出现在 sql-server 2005 上。

```
SELECT name_text,c_num,d_type,unique_id,v_text,r_ticket_id
FROM
    (
        SELECT  name_text, c_num, d_type, unique_id, v_text, r_ticket_id,
                ROW_NUMBER() OVER (PARTITION BY unique_id 
                                   ORDER BY r_ticket_id DESC) rn
        FROM tableName
    ) x
WHERE x.rn = 1 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/3108f/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T14:38:22.297

在 SQL 中，我们有`GROUP BY`允许我们合并重复行的操作。在您的问题中，您想要汇总所有相同的值，除了`r_ticket_id.`那个，您希望找到 SQL 中转换为`MAX`函数的最大值。

```
SELECT
    name_text
,   c_num
,   d_type
,   unique_id
,   v_text
,   MAX(r_ticket_id) AS max_r_ticket_id
FROM
    dbo.MyTableNameHere
GROUP BY
    name_text
,   c_num
,   d_type
,   unique_id
,   v_text 
```

# java - 如何在 Java 中访问 Windows 控制台的 WriteConsoleInput 函数？

> ID：12998804
> 
> 赞同：2
> 
> 时间：2012-10-21T14:35:39.080
> 
> 标签：java, winapi, processbuilder

我正在尝试完成与该用户完全相同的事情：

[向交互式命令行应用程序提供输入](https://stackoverflow.com/questions/11480056/feeding-input-to-an-interactive-command-line-application)

除了我需要用 Java 而不是 Python 来做。我使用 ProcessBuilder 为 vpncli.exe 创建了一个进程，并且可以通过其 OutputStream 为其提供用户名。但是，这不适用于密码。上述帖子的解决方案表明vpncli.exe使用了不同的密码输入法，即ReadConsoleInput而不是ReadInput。所以我的问题是：如何从 java 访问 WriteConsoleInput 函数？

# java - 检查此 java 项目源代码中的 Map 变量

> ID：12998808
> 
> 赞同：0
> 
> 时间：2012-10-21T14:35:56.300
> 
> 标签：java, eclipse, debugging

我试图在一个名为 Display.java 的类中理解以下代码：

```
 Map<String,Object> context = (Map<String,Object>) globalSession.get("cascadas.ace.context");
    if(context != null) {
      dresscode = (String) context.get("dresscode");
      hobby = (String) context.get("hobby");
    }
    if ((hobby == null) || (dresscode == null)) {
        SystemConfiguration.getInstance().getLog().warning("Advertisement display: dresscode and/or hobby not available, no image will be displayed.");
    } 
```

正在发生的事情是有一个 GUI 窗口，允许您为着装要求和爱好选择单选按钮。但是不知何故，当我在程序文本中添加另一个虚拟单选按钮时（在与 Display.java 位于同一文件夹中的类中，称为 ContextSimulatorGUI ，它甚至不显示 GUI 窗口.. ，我在控制台中看到以下内容：

```
Advertisement display: dresscode and/or hobby not available, no image will be displayed." 
```

关于`globalSession`变量..它是一个“会话”对象；在项目中有一个名为 的类`Session`，如下所示：

/* * ACE Autonomic Toolkit *（又名 CASCADAS ACE Toolkit）* * 由 CASCADAS 项目工作包 1 创建：* - 布达佩斯科技与经济大学 * - 弗劳恩霍夫研究所 FOKUS * - 意大利电信实验室 * - 卡塞尔大学 * - 卡塞尔大学摩德纳和雷焦艾米利亚 * * 更多信息请访问： * - [http://acetoolkit.sourceforge.net](http://acetoolkit.sourceforge.net)

```
 *  - http://cascadas-project.org
 *
 * The authors would like to acknowledge the European Commission 
 * for funding the Integrated Project CASCADAS Component-ware for 
 * Autonomic, Situation-aware Communications, And Dynamically 
 * Adaptable Services (FET Proactive Initiative, IST-2004-2.3.4 
 * Situated and Autonomic Communications) within the 6th IST Framework 
 * Program. The authors also wish to thank other project Partners for 
 * the fruitful cooperation within the project.
 */

package cascadas.ace.session;

import java.io.Serializable;
import java.util.Map;

/**
 * Interface describing the session context.
 */
// TODO: use generics for type safety stuff?
public interface Session extends Serializable {

        /**
         * Returns the name of the SessionContext.
         *
         * @return the name
         */
        public String getName();

        /**
         * Removes the key-value pair from the session.
         * @param key param name
         */
        public void remove(String key);

        /**
         * Returns the current state.
         *
         * @return curretn state
         */
//        public State getState(); 

        /**
         * Sets the current state.
         *
         * @param s the state
         */
 //       public void setState(State s);

        /**
         * Returns the contract with the specified id.
         *
         * @param contract id
         * @return contract
         * @throws SessionContextNotFoundException if contract is not found
         */
//        public Contract getContract(String id) throws SessionNotFoundException; 

        /**
         * Adds a contract with the given id. Id must be unique.
         *
         * @param s the state
         */
//        public void addContract(String id, Contract c);

        /**
         * Returns all contracts.
         *
         * @return id-->contract map
         */
//        public Map<String,Contract> getAllContracts();

        /**
         * Puts a piece of data to the session context.
         * Overwrites existing data with teh same name.
         *
         * @param id name of the data
         * @param value value of the data
         */
        public void put( String id, Object value ) throws SessionException;

        /**
         * Puts an integer value into the session context.
         *
         * @param id name
         * @param value value
         */
        public void put ( String id, int        value );

        /**
         * Puts a double value into the session context.
         *
         * @param id name
         * @param value value
         */
        public void put ( String id, double     value );

        /**
         * Puts a float into the session context.
         *
         * @param id name
         * @param value value
         */
       public void put ( String id, float      value );

        /**
         * Puts a long value into the session context.
         *
         * @param id name
         * @param value value
         */
        public void put ( String id, long       value );

        /**
         * Puts a short value into the session context.
         *
         * @param id name
         * @param value value
         */
        public void put ( String id, short      value );

        /**
         * Puts a char into the session context.
         *
         * @param id name
         * @param value value
         */
        public void put ( String id, char       value );

        /**
         * Puts a boolean value into the session context.
         *
         * @param id name
         * @param value value
         */
        public void put ( String id, boolean    value );

        /**
         * Returns the matching data from the session context.
         *
         * @param id name of the data
         * @return the data as an Object or null if not found
         */
        public Object get (String id) ;

        /**
         * Returns the matching data from the session context.
         *
         * @param id name of the data
         * @throws cascadas.ace.reasoner.SessionContextException 
         *              if an error occurs
         * @return the data as an integer or 0 if not found
         */
        public int getInt ( String id) throws SessionException;

        /**
         * Returns the matching data from the session context.
         *
         * @param id name of the data
         * @throws cascadas.ace.reasoner.SessionContextException 
         *              if an error occurs
         * @return the data as a double
         */
        public double getDouble ( String id) throws SessionException;

        /**
         * Returns the matching data from the session context.
         *
         * @param id name of the data
         * @throws cascadas.ace.reasoner.SessionContextException 
         *              if an error occurs
         * @return the data as a float
         */
        public float getFloat ( String id) throws SessionException;

        /**
         * Returns the matching data from the session context.
         *
         * @param id name of the data
         * @throws cascadas.ace.reasoner.SessionContextException 
         *              if an error occurs
         * @return the data as a long
         */
        public long getLong ( String id) throws SessionException;

        /**
         * Returns the matching data from the session context.
         *
         * @param id name of the data
         * @throws cascadas.ace.reasoner.SessionContextException 
         *              if an error occurs
         * @return the data as a short
         */
        public short getShort ( String id) throws SessionException;

        /**
         * Returns the matching data from the session context.
         *
         * @param id name of the data
         * @throws cascadas.ace.reasoner.SessionContextException 
         *              if an error occurs
         * @return the data as a char
         */
        public char getChar ( String id) throws SessionException;

        /**
         * Returns the matching data from the session context.
         *
         * @param id name of the data
         * @throws cascadas.ace.reasoner.SessionContextException 
         *              if an error occurs
         * @return the data as a boolean
         */
        public boolean getBoolean ( String id) throws SessionException;

         /**
         * Returns the matching data from the session context.
         *
         * @param id name of the data
         * @throws cascadas.ace.reasoner.SessionContextException 
         *              if an error occurs
         * @return the data as a String
         */
        public String getString ( String id) throws SessionException;

        /**
         * Returns all data as a set.
         * @return all data in the session context
         */
        public Map<String,Object>  getAllData();

        /**
         * Sets the ace name (for debug messages).
         * @param aceName ace name
         */
        public void setAceName(String aceName);

} 
```

..etc（顺便说一句，我知道源代码有点草率，但它是一些开源项目，而不是我的代码）。

所以总结一下，我主要想*了解*最上面的代码，最下面的东西是上下文。我希望这不会令人困惑 - 我感谢任何提示或建议。

# windows-runtime - VS 2012 中缺少 VCLib

> ID：12998816
> 
> 赞同：1
> 
> 时间：2012-10-21T14:36:39.983
> 
> 标签：windows-runtime, bing

我在 RTM Windows 8 上的 RTM VS 2012 中使用 RTM Bing SDK。它在一台机器上运行良好，我将该解决方案签入 TF 并将其签出到另一台具有相同配置的机器上。

在该机器上，编译失败

警告 5 找不到 SDK“Microsoft.VCLibs，版本=11.0”。

果然，当我添加参考时，MS VC++ Runtime 包不在列表中！Microsoft Visual C++ 运行时包不在我可以通过添加引用、Windows、扩展添加的引用列表中。

它去哪儿了？它在我的第一台机器上。

我已经按照 Bing for RT SDK raadme 中的所有步骤，将活动配置设置为 x86 等。

# java - 使用 JDBC 进行数据库隔离级别的并发处理

> ID：12998817
> 
> 赞同：0
> 
> 时间：2012-10-21T14:36:41.857
> 
> 标签：java, database, jdbc, concurrency

在使用 JDBC 时，是否存在我们必须显式获取特定表上的锁以满足 ACID 模型的目标的情况？（通过显式获取锁，我的意思是，使用 select for update 或 lock table table_name 之类的查询；即行级锁和表锁）

实例：有一个包含这两列的表：

Account_Id Account_Balance。

在给定时间可以有许多线程，它们将读取和更新表的数据。如何防止脏读（数据库默认隔离级别可能比较简单）、不可重复读和幻读的发生？总是通过在获得的连接上设置隔离级别（使用 Connection.setTransactionIsolation (level)）来完成，还是有一些替代策略？

# android - VideoView 在设备中播放视频，但在其他设备中不播放

> ID：12998820
> 
> 赞同：0
> 
> 时间：2012-10-21T14:37:10.147
> 
> 标签：android, h.264, mp4, android-videoview

我有一个与 VideoView 相关的问题。

我有一个分辨率为 1280x720 的 H264 编码视频（在 MP4 文件中）。如果我尝试在三星 Galaxy S3 中使用 VideoView 播放它，它工作正常，但如果我在 LG Optimus 2X 中尝试相同的视频，它只会显示“抱歉，无法播放此视频”（或类似的内容） .

这两款设备都运行 Android 4.0.4（Optimus 2X 中为 CM9，Galaxy S3 中为 stock rom）。

我不知道为什么一个设备播放它而另一个不播放。我能找到的唯一原因是，如果屏幕分辨率低于视频分辨率，VideoView 将不会播放视频。

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T10:39:24.307

对于运行 Android 3.0 及更高版本的任何设备，似乎只保证 Android 支持分辨率为 480x360 像素的 h264 编码视频。

有关详细信息，请参阅[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)。

# php - 使用 php 和 jquery 的时间计数器

> ID：12998825
> 
> 赞同：-2
> 
> 时间：2012-10-21T14:37:38.190
> 
> 标签：php, jquery

```
function next_second(){
var target = '1350840000';    
var now = <?php echo time();?>;       
alert(now);
}
$(function() {
  setInterval(next_second, 1000);
}); 
```

上面的警报函数总是返回相同的值。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:15:06.243

您的 PHP 时间仅设置一次（在页面加载时），因此不会在每个时间间隔更新。如果要获取每个间隔的 PHP（服务器）时间，则必须使用 ajax 来获取它。

有关一些示例，请参见[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:19:47.320

它返回相同值的原因是因为您的“现在”变量的值是在页面加载时生成的。这没有任何意义，因为无论您执行多少次函数，它仍然会返回相同的结果/值。

您需要动态检测当前时间，而不是页面加载。

您可以尝试以下脚本：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script>
function next_second(){
    var target = '1350840000';    
    var now = new Date().getTime();;       
    console.log(now);
}
$(function() {
  setInterval( next_second, 1000 );
});
</script> 
```

谢谢你。

# c# - 在 WinRT (C#) 中检测方法何时完成

> ID：12998836
> 
> 赞同：0
> 
> 时间：2012-10-21T14:38:38.233
> 
> 标签：c#, windows-runtime

我正在开发适用于 Windows 8 的应用程序。我有一个名为“用户”的 C# 类。用户有一个称为身份验证的方法。我的方法看起来像这样：

```
public class User
{
  public bool IsAuthenticated { get; set; }

  public async void Authenticate(string username, string password)
  {
    // Code to build parameters and url is here
    var response = await httpClient.PostAsync(myServiceUrl, new StringContent(json, String.Text.Encoding.UTF8, "application/json"));
    JsonObject result = JsonObject.Parse(await response.Content.ReadAsStringAsync());
  }
} 
```

Authenticate 方法有效。它成功地击中了我的服务并返回了适当的细节。我的问题是，如何检测此方法何时完成？我正在调用此方法以响应用户单击我的应用程序中的“登录”按钮。例如，像这样：

```
private void loginButton_Click(object sender, RoutedEventArgs e)
{
  User user = new User();
  user.IsAuthenticated = false;
  user.Authenticate(usernameTextBox.Text.Trim(), passwordBox.Password.Trim());

  if (user.IsAuthenticated)
  {
    // Allow the user to enter
  }
  else
  {
    // Handle the fact that authentication failed
  }
} 
```

本质上，我需要等待 authenticate 方法完成其执行。但是，我不知道该怎么做。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:40:02.760

首先，您需要`Authenticate()`return`Task`而不是`void`.
返回的`Task`（由编译器生成）将为您提供有关异步操作状态的信息。

您还需要创建事件处理程序方法`async`。
然后，您可以`await`使用其他`async`方法的结果。

* * *

一般来说，你不应该使用`async void`除了作为事件处理程序之外的方法。

# windows-8 - FluidMoveBehavior 是否可用？

> ID：12998837
> 
> 赞同：3
> 
> 时间：2012-10-21T14:38:44.630
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml

我在尝试制作动画的代码中调用了 Grid.SetRow 和 Grid.SetColumn。根据[http://social.msdn.microsoft.com/Forums/en-CA/wpf/thread/257779f7-b459-43fc-a4a1-f24641c50e09](http://social.msdn.microsoft.com/Forums/en-CA/wpf/thread/257779f7-b459-43fc-a4a1-f24641c50e09)的答案，建议使用 FluidMoveBehavior，但它没有t 看起来这适用于 Windows 8。

当网格的位置发生变化时，我有哪些选择为 Grid 的子级设置动画？我基本上是在寻找一种实现线性过渡的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:51:18.553

有一个新的内置功能，称为过渡，可以使用，这里是一个[介绍](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh452703.aspx)。尝试将 RepositionThemeTransition 添加到网格 ChildrenTransitions，然后当您更改它们的行或列时，项目将动画。

```
<Grid.ChildrenTransitions>
    <TransitionCollection>
        <RepositionThemeTransition/>
    </TransitionCollection>
</Grid.ChildrenTransitions> 
```

# eclipse - 我应该使用哪个 Eclipse IDE 来运行 Maven 项目？

> ID：12998838
> 
> 赞同：0
> 
> 时间：2012-10-21T14:38:52.340
> 
> 标签：eclipse, maven

我是 maven 项目的新手，我不知道我应该下载哪个 Eclipse IDE。

**I.**在我的电脑上，我已经安装了一个名为： **c:\users\My Documents\eclipse-SDK-3.7.1-win32\eclipse** 但它不支持 maven 所以我下载了 maven插入。

现在我可以创建一个 Maven 项目，并且可以为该项目选择一个原型。

**二、**但我还下载了已经集成了 maven**的 eclipse-java-juno-SR1-win32**（Java 开发人员的 Eclipse IDE）（无需额外下载）。

我应该使用以前的 Eclipse IDE 中的哪一个？就 maven 项目而言，这两个 IDE 之间有什么区别吗？

你会建议我选择哪一个？

如果你能帮助我，我会很高兴:)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:22:00.353

从 Eclipse 网站下载哪个包都没有关系，因为每个 Eclipse 包基本上都是相同的核心，带有不同的附加插件。启动版本后，使用帮助 -> Eclipse Marketplace。在即将出现的对话框中搜索[m2eclipse并安装它。](http://eclipse.org/m2e/download/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:00:08.403

您可以使用任何一种，但 Eclipse 版本之间的设置可能会有所不同。

如果您使用[面向 Java 开发人员的](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr1)Eclipse IDE或[面向 Java 和 DSL 开发人员](http://www.eclipse.org/downloads/packages/eclipse-ide-java-and-dsl-developers/junosr1)的 Eclipse IDE，则下载时将附带已安装的[m2eclipse 。](http://eclipse.org/m2e/)您唯一可能缺少的是启用各种 maven 插件的“连接器”，但 m2eclipse 会在需要时为您下载它们。

如果您使用**除**Eclipse SDK 之外的任何东西，那么您可以通过 Eclipse Marketplace 安装，使用*Help -> Eclipse Marketplace*。

“Eclipse SDK”下载不包括 Eclipse Marketplace。如果您获得该下载，则可以使用*Help -> Install Software*，然后粘贴以下更新站点 URL：

```
http://download.eclipse.org/technology/m2e/releases 
```

我倾向于使用最后一种方法（即指定更新站点），因为它适用于所有 Eclipse 变体。

无论您如何安装 m2eclipse，您都可以以完全相同的方式使用 Maven 项目。这意味着如果不了解您从事的项目类型，很难说出最适合您的“最佳”版本。我下载了 Eclipse SDK（因为我开发了 Eclipse 插件）并在上面安装了 m2eclipse。如果您正在为 Java EE 开发，那么您可能会下载 Java EE 并在顶部添加 m2eclipse。

# java - Java - 多个输入文件

> ID：12998841
> 
> 赞同：-4
> 
> 时间：2012-10-21T14:38:59.097
> 
> 标签：java

如何在 Java 中读取多个输入文件？我需要阅读多个输入（几个文本文档）并创建一个术语文档矩阵。
我可以像这样读取一个文件：

```
 File file = new File("a.txt"); 
  int ch;
  StringBuffer strContent = new StringBuffer("");
  FileInputStream stream = null;  
  try
   {
     stream = new FileInputStream(file);   
     while( (ch = stream.read()) != -1)
        strContent.append((char)ch); 
      stream.close();   
   } 
```

是否有任何库可以读取多个输入文件？或者我只需要循环并读取所有文件？所有文件都是`txt.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:49:39.743

> 是否有任何库可以读取多个输入文件？

AFAIK，不。

这是适用于将多个文件读入`strContent`缓冲区的代码。

```
 String names = new String[]{"a.txt", "b.txt", "c.txt"};
  StringBuffer strContent = new StringBuffer("");

  for (String name : names) {
      File file = new File(name); 
      int ch;
      FileInputStream stream = null;  
      try {
          stream = new FileInputStream(file);   
          while( (ch = stream.read()) != -1) {
              strContent.append((char) ch); 
          }
      } finally {
          stream.close();  
      } 
   } 
```

请注意，我已将`close`调用移动到一个`finally`块中，这样如果读取流时出现问题，您就不会泄漏文件描述符。主要的变化是简单地将您的代码放入一个循环中，并调整几个语句的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:41:55.623

您可以使用 File Stream 类循环读取文件，例如，您可以使用 FileReader/BufferredFileReader，如下所示：

```
 String[] fileNames = new String[]{  "fileNameWithPath1", "fileNameWithPath2"...};

  for(String fileName: fileNames ) {  
      BufferredFileReader reader = 
                      new BufferredFileReader(new FileReader(fileName));
      System.ount.println("Start reading file : "+fileName);
      String line = null;
      while((line=reader.nextLine())!= null){
         System.out.println(line);
      }
      reader.close();
      System.ount.println("End reading file : "+fileName);
  } 
```

如果要读取目录中的所有文件，则要使用：

```
 File directory = new File("directoryName");
  File[] filesInDir = directory.listFiles();//list all files in directory
  for(File file: filesInDir) {  
    if(!file.isDirectory()){ //read the file if not directory
      BufferredFileReader reader = 
                      new BufferredFileReader(new FileReader(file));
      System.ount.println("Start reading file : "+fileName);
      String line = null;
      while((line=reader.nextLine())!= null){
         System.out.println(line);
      }
      reader.close();
      System.ount.println("End reading file : "+fileName);
    }
  } 
```

# c++ - 函数指针 - 类的内部和外部

> ID：12998845
> 
> 赞同：0
> 
> 时间：2012-10-21T14:39:53.560
> 
> 标签：c++, function, pointers, function-pointers

我是函数指针的菜鸟，这是我第一次使用它。

代码是：

```
#include "time.cpp"
int main(){
 double** matrix= new double*[10];
 for (int i=0; i<10; i++) matrix[i]=new double[10];
 gear nit;
 nit.roll(&matrix[0]);
} 
```

时间.cpp

```
double pulse_a (double t, double dt);

class gear{
        void dynamics(double (*)(double, double), double** , double, double);
        double pulse_b(double t, double dt);
public:
        int net;
        void roll(double** matrix);
};

void gear::roll(double** matrix){
        double t,dt;
        double (*pfunc)(double,double)=pulse_a; //or pulse_b
        dynamics(pfunc,&matrix[0],t,dt);
}

void gear::dynamics(double (*pulse)(double , double ), double** matrix, double t, double dt){

pulse(t,dt);
} 
```

当我将 pfunc 分配给 pulse_a 时，我得到

> 错误：'double (gear::)(double, double)' 类型的参数不匹配 'double (*)(double, double)'</p>

为了 `double (*pfunc)(double,double)=pulse_a;`

当我将 pfunc 分配给 pulse_b 时，我得到`undefined reference to chirp(double, double)'` 了 `double (*pfunc)(double,double)=pulse_b;`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:44:43.727

您选择了一个非常复杂的示例来首次涉足函数指针。你应该从你能想到的最简单的例子开始。

你的第一个指针

```
double (*pfunc)(double,double)=pulse_a; 
```

按书面方式工作。它不会产生您描述的错误；我看不出它如何可能产生您描述的错误（因为它不涉及`gear`），所以我敢打赌您发布的代码不是产生错误的代码。请不要那样做。

*指向函数*的指针和*指向成员函数*的指针是不同的动物。它们有不同的类型，不可互换。不要试图将一个人投给另一个人，否则您将违反古代部落法律（并且您将获得未定义的行为）。

```
void dynamics2(double (gear::*)(double, double), double** , double, double);
...
double (gear::*pfunc2)(double,double) = &gear::pulse_b;
dynamics2(pfunc2,&matrix[0],t,dt); 
```

一旦掌握了这些提示，您就可以通过以下方式省去一些麻烦`typedef`：

```
typedef double (gear::*gearMemFn)(double, double);
void dynamics2(gearMemFn, double** , double, double);
...
gearMemFn pfunc2=&gear::pulse_b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:45:40.533

不要将函数指针用于任何事情。`std::function`像正常人一样使用。

此外，成员函数不是也永远不可能是函数指针。它必须是一个静态函数。

# c# - 正确的 C# Rijndael IV 使用/存储

> ID：12998848
> 
> 赞同：2
> 
> 时间：2012-10-21T14:40:15.537
> 
> 标签：c#, bytearray, rijndael, initialization-vector

下午，

所以我对所有这些加密方法和用法都很陌生。我刚刚开始构建加密实现。现在我的加密和解密方法似乎工作正常。直到我读到我在 RijndaelManaged 类中使用硬编码 IV 失败了。

我到处都在读到最好（也更安全）让每个加密文件的 IV 在“加密时间”唯一生成并保存在文件的前面/开头，因为其余的加密字节在此之后直接保存。（如果我理解正确的话）

我一直很难弄清楚我的问题，因为每次我加密文件时，我都会将 IV 写入文件的前 16 个字节（正如课程、MSDN、谷歌和这个论坛上的一些人所建议的那样）然后直接将其余的加密字节写入文件流。（IV 以明文形式保存……或者未加密的字节 < 这也可以吗？）

*我的问题是，当我尝试使用完全相同的密钥解密文件时，它失败了：在我开始读取文件的块进行解密（缓冲）之前，我尝试读取文件的前 16 字节以获取明文 IV 并在 RijndaelManaged 类中使用它实例。*

这似乎失败了。我检查了一下，我想我可能在某个地方犯了一些小学生错误：因为一旦我想解密它，我似乎无法从加密文件中读取相同的 16 个字节。

这是我用来在加密之前进行文件处理的代码（不是它自己的加密）

* * *

```
using (RijndaelManaged RM = new RijndaelManaged())
using (FileStream StreamIN = new FileStream(FileIN, FileMode.Open, FileAccess.Read))
using (FileStream StreamOUT = new FileStream(FileOUT, FileMode.Append, FileAccess.Write))
{
    //Setup Variable ChunkSize and The Total bytes Read into the streams
    int ChunkSize = 1024 * 1024 * 32; 

    RM.GenerateIV();

    foreach (var item in RM.IV)
    {
        Console.Write("[ " + item + "] ");
    }

    StreamOUT.Seek(0, SeekOrigin.Begin);
    StreamOUT.Write(RM.IV, 0, RM.IV.Length);
    StreamOUT.Seek(RM.IV.Length, SeekOrigin.Begin);

    int TotalBytesRead = 0;                       

    //File Buffer Implementation
    for (long i = 0; i < StreamIN.Length; i += ChunkSize)
    {
        //ChunkData byte array determined by ChunkSize
        byte[] ChunkData = new byte[ChunkSize];
        //Current Bytes Read from the IN Stream
        int BytesRead = 0;
        while ((BytesRead = StreamIN.Read(ChunkData, 0, ChunkSize)) > 0)
        {
            //Call Encryption from local Class

            Console.WriteLine("Bytes Read: {0}", TotalBytesRead += BytesRead);

            ChunkData = Crypt.Encrypt(ChunkData, KeyBytes, RM.IV);

            //Write byte array to File
            StreamOUT.Write(ChunkData, 0, BytesRead);
        }
    }
} 
```

这是我在解密之前处理文件的代码（不是解密本身）

```
using (RijndaelManaged RM = new RijndaelManaged())
using (FileStream StreamIN = new FileStream(FileIN, FileMode.Open, FileAccess.Read))
using (FileStream StreamOUT = new FileStream(FileOUT, FileMode.Append, FileAccess.Write))
{
    //Setup Variable ChunkSize and The Total bytes Read into the streams
    int ChunkSize = 1024 * 1024 * 32; 

    StreamIN.Seek(0, SeekOrigin.Begin);
    int Read = StreamIN.Read(RM.IV, 0, 16);
    StreamIN.Seek(RM.IV.Length, SeekOrigin.Begin);

    int TotalBytesRead = 0;

    foreach (var item in RM.IV)
    {
        Console.Write("[ " + item + "] ");
    }

    //File Buffer Implementation
    for (long i = 0; i < StreamIN.Length; i += ChunkSize)
    {
        //ChunkData byte array determined by ChunkSize
        byte[] ChunkData = new byte[ChunkSize];
        //Current Bytes Read from the IN Stream
        int BytesRead = 0;

        while ((BytesRead = StreamIN.Read(ChunkData, 0, ChunkSize)) > 0)
        {

            Console.WriteLine("Bytes Read: {0}", TotalBytesRead += BytesRead);                                

            //Call Decryption from local Class
            ChunkData = Crypt.Decrypt(ChunkData, KeyBytes, RM.IV);

            //Write byte Array to file
            StreamOUT.Write(ChunkData, 0, BytesRead);
        }
    }
} 
```

我想这就是全部？此外，“控制台”和其他无用的调用只是为了帮助我检查和找出问题所在。我正在使用 Visual Studios 2010，并尝试实现 RijndaelManaged 类。

加密/解密方法通过我的密钥和 IV 传递给 FileChunks（字节数组），这些返回一个字节数组（加密），它被保存到流中。

我希望我的问题很清楚？如果不是我会尝试更好地解释，我已经到处阅读以寻求有关此特定问题的帮助，但此处发布的大多数其他问题超出了我的范围。

我真的很感激任何帮助，我确定我在某个地方犯了一个小丑错误..

Thank you!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:22:34.183

As per long-standing [Framework guidelines](http://msdn.microsoft.com/en-us/library/k2604h5s%28v=vs.100.aspx%29), it looks like `SymmetricAlgorithm.IV` has been written not to return an internal array. This means that it's handing you back a copy, so subsequent changes to it aren't reflected in the `RijndaelManaged` instance.

```
// Effectively reading the persisted value into a temporary array
// and throwing away the temporary.
int Read = StreamIN.Read(RM.IV, 0, 16); 
```

In order to make the change stick and set the IV to the persisted value, you need to actually set the `IV` property explicitly, rather than just modifying the value it returned previously.

```
byte[] persistedIv = new byte[16];
StreamIN.Read(persistedIv, 0, persistedIv.Length);
RM.IV = persistedIv; 
```

# python - 类似于 append 行为的生成器表达式

> ID：12998849
> 
> 赞同：4
> 
> 时间：2012-10-21T14:40:16.490
> 
> 标签：python, generator

这更像是一个编程练习，而不是一个现实世界的问题：我正在寻找一个类似于`append`.

考虑：

```
def combine(sequence, obj):
    for item in sequence:
        yield item
    yield obj

s = ''.join(combine(sequence, obj)) 
```

这个生成器基本类似`append`。在我的程序的工作流程中，上述速度与

```
sequence.append(obj)
s = ''.join(sequence) 
```

我现在想知道是否有一个整洁的生成器`genexpr`表达式

```
s = ''.join(genexpr) 
```

这类似于`append`上面没有性能警告的行为。

```
s = ''.join(_ for a in [sequence, [obj]] for _ in a) 
```

表现不佳。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:46:34.553

尝试使用[`chain`](http://docs.python.org/library/itertools.html#itertools.chain)来自`itertools`模块：

```
''.join(chain(sequence, [obj])) 
```

如果你不想创建一个新`list`的 for `obj`，那么你可以试试这个：

```
''.join(chain(sequence, repeat(obj,1))) 
```

我会使用`[obj]`它，因为它更具可读性，并且我怀疑`repeat`迭代器的开销低于`list`创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T16:39:07.823

我不确定您的特定示例，但我发现即使使用大型列表，仅使用 a+[b] 也与其他任何方法一样快。这是我的测试代码：

```
import timeit
from itertools import chain, repeat

a=map(str,range(100000))
b='b'

def combine(sequence,obj):
  for item in sequence:
    yield item
  yield obj

def test1():
  return ','.join(a+[b])

def test2():
  return ','.join(combine(a,b))

def test3():
  return ','.join(chain(a,repeat(b,1)))

def test4():
  return ','.join(chain(a,[b]))

def test5():
  return ','.join(y for x in [a,[b]] for y in x)

count=100
print 'test1: %g'%timeit.timeit(test1,number=count)
print 'test2: %g'%timeit.timeit(test2,number=count)
print 'test3: %g'%timeit.timeit(test3,number=count)
print 'test4: %g'%timeit.timeit(test4,number=count)
print 'test5: %g'%timeit.timeit(test5,number=count) 
```

这是我系统上的结果：

```
test1: 0.475413
test2: 0.977652
test3: 0.550071
test4: 0.548962
test5: 0.968162 
```

# google-app-engine - 如何在objectify v3中实现多对多关系？

> ID：12998851
> 
> 赞同：-1
> 
> 时间：2012-10-21T14:40:19.617
> 
> 标签：google-app-engine, many-to-many, objectify

根据文档，模型应该是这样的

```
public class Employee
{
  @Id String name;
  Key<Employee>[] subordinates;
} 
```

我需要知道如何将下属添加到员工。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:58:51.040

更好的方法可能是每个`Subordinate`实体都拥有一个与其经理一起的属性，如下所示：

```
public class Employee {
    @Id
    String name;

    Key<Employee> manager;
} 
```

在任何情况下，如果您仍然希望在每个`Employee`实体中都有一个下属列表，请首先获取该实体，将`Key`下属的 添加到列表中，然后保存该实体。

希望这可以帮助。

# android - 当 actionBar 设置为 hide() 时，菜单打开并消失；

> ID：12998853
> 
> 赞同：1
> 
> 时间：2012-10-21T14:40:30.663
> 
> 标签：android, android-actionbar, android-menu

如何在不使用操作栏的情况下确保 ICS 选项菜单仍然打开？如果我没有操作栏，则在打开菜单按钮时会显示旧样式。如果我包含 ActionBar 但将其隐藏，则菜单会在单击菜单时打开并立即消失。我能做些什么？

# facebook - Facebook 图表 ERM

> ID：12998857
> 
> 赞同：0
> 
> 时间：2012-10-21T14:41:17.477
> 
> 标签：facebook, facebook-graph-api, entity-relationship

一个简短的问题：Facebook 存储/提供的所有数据是否有任何实体关系模型？这将非常有用，因为它将概述所有实体、它们的连接以及可能需要的权限……也许有人知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:34:37.727

我在官方文档中没有看到类似的东西。

# android - Andengine - 始终保持身体相同的速度

> ID：12998860
> 
> 赞同：0
> 
> 时间：2012-10-21T14:41:27.613
> 
> 标签：android, performance, andengine

我正在开发一个游戏，你在屏幕中间（玩家）的侧滚动和敌人不断地从左边或右边出现。

我创建了一个敌人，以这种方式将 Linearvelocity 设置为向右（或向左）： getBody.setLinearVelocity(v*this.getDireccion(), 0);

然后，当敌人与另一个敌人或玩家发生碰撞时，有时会改变方向（他向后滑动）或变得更慢或更快。我需要它始终具有相同的线性速度，如果这个敌人与玩家或另一个怪物相撞，不要停止，不要慢，不要快......相同的速度和方向。

任何人都可以帮助我吗？对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:15:22.937

```
FixtureDef FIXDEF = PhysicsFactory.createFixtureDef(final float pDensity, final float pElasticity, final float pFriction); 
```

1) 为避免“改变方向”，将摩擦力设置为 0。

2) 要始终获得相同的 LinearVelocity，请将 Elasticity 设置为 1，然后在游戏循环中检查速度是否已更改，然后将其更改回所需的值。或者您可以使用“applyForce”，您可以[在此处查看 applyForce 示例](https://stackoverflow.com/questions/11257462/how-do-i-apply-a-force-to-a-body-in-the-direction-it-is-traveling-box2d)

PS你可以使用类似的东西`.createFixtureDef(1.0f, 1.0f, 0.0f)`

我有类似的[问题](http://i49.tinypic.com/j9blat.png)。我需要球弹回相同的高度。我做了什么？我记得以前的速度。当球撞到地面时（并且速度发生了变化）。我设置了之前记忆的速度（但符号相反`prevVel *(-1)`），这是在弹跳之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:11:15.200

如何创建**ContactListener**，并使用**postSolve**回调方法来重置您的身体速度。
碰撞后，Box2D 会产生冲力以避免灯具重叠，这就是你的身体速度发生变化的原因。[这里](http://www.iforce2d.net/b2dtut/collision-anatomy)有一个很好的教程描述碰撞，希望对您有所帮助。

# r - reshape 函数给出“下标越界”错误

> ID：12998864
> 
> 赞同：2
> 
> 时间：2012-10-21T14:41:58.937
> 
> 标签：r, reshape, reshape2

我有一个 ROC.Value 数据框，如下所示：

```
Years   1           2   3       4   5
2002    3.000000    NA  0.22    NA      0
2003    2.988000    NA  0.22    NA      0
2004    2.993976    NA  0.22    NA      0
2005    3.071819    NA  0.22    NA      NA
2006    3.314493    NA  0.22    NA      NA
2007    3.526621    NA  0.22    NA      NA
2008    3.583047    NA  0.22    NA      NA
2009    4.109754    NA  0.22    NA      NA
2010    4.085096    NA  0.22    3.00    NA
2011    3.885096    NA  0.22    2.85    NA
2012    3.685096    NA  0.22    2.70    NA
2013    3.485096    NA  0.22    2.55    NA
2014    3.285096    NA  0.22    2.40    NA
2015    3.085096    NA  0.22    2.25    NA
2016    2.885096    NA  0.22    2.10    NA
2017    2.685096    NA  0.22    1.95    NA
2018    2.485096    NA  0.22    1.80    NA
2019    2.285096    NA  0.22    1.65    NA
2020    2.085096    NA  0.22    1.50    NA
2021    1.885096    NA  0.22    1.50    NA 
```

当我得到正确的数据时，NA 值将被替换。

当我使用以下代码尝试将其转换为长格式时（这样我就可以制作堆叠箱线图）：

```
m.ROC.Value = reshape(ROC.Value, 
                  idvar="Years", 
                  direction="long", 
                  varying=list(colnames(ROC.Value[2:6])),
                  timevar="Characteristic"
                  ) 
```

我得到这个错误`Error in reshapeLong(data, idvar = idvar, timevar = timevar, varying = varying, : subscript out of bounds`。

有什么建议吗？我尝试的一切都没有成功（出现新错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:06:15.750

该函数`reshape`是 R 的基函数，而不是`reshape2`。如果要使用`reshape2`，请使用以下命令：

```
melt(as.data.frame(ROC.Value), measure.vars = 2:6) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:48:21.060

这是一个愚蠢的工作 - 但它有效。我没有立即添加年份列，而是在使用该`melt()`功能后添加了它。

```
#Don't add years here
#ROC.Value = cbind(years, Buy.Out.Value, Recycled.Green.Premium, Levy.Exemption.Certificate, Energy.Value, CO2.Price, deparse.level = 1)
ROC.Value = cbind(Buy.Out.Value, Recycled.Green.Premium, Levy.Exemption.Certificate, Energy.Value, CO2.Price, deparse.level = 1)
m.ROC.Value = melt(ROC.Value)
#Add years here (runs from 2002, so using id+2001)
m.ROC.Value = cbind(m.ROC.Value, m.ROC.Value$Var1 + rep(2001, 100))
colnames(m.ROC.Value) = c("id", "measure", "value", "years") 
```

# python - python logging 模块的内存处理程序

> ID：12998865
> 
> 赞同：0
> 
> 时间：2012-10-21T14:42:17.997
> 
> 标签：python, logging

任何人都可以帮助我添加[内存处理程序，缓冲处理程序](http://docs.python.org/library/logging.handlers.html)以使我的程序最佳（刷新缓冲内存）。

```
import logging
logger = logging.getLogger()
logger.setLevel(logging.DEBUG)#we can set deug_level at logger level also

formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')

ch = logging.StreamHandler()
ch.setLevel(logging.DEBUG)
ch.setFormatter(formatter)
logger.addHandler(ch)

logger.debug('This is a test log message.') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:52:07.487

创建内存处理程序就像创建流处理程序一样，将流处理程序作为目标传递：

```
streamhandler = logging.StreamHandler()
streamhandler.setFormatter(formatter)
memoryhandler = logging.handlers.MemoryHandler(1024*10, logging.DEBUG, streamhandler)
logger.addHandler(memoryhandler) 
```

您*不要*使用`logger.addHandler`.

# c - 将大型二进制数据从 Lua 传递到 C 的最佳方法

> ID：12998871
> 
> 赞同：1
> 
> 时间：2012-10-21T14:42:42.807
> 
> 标签：c, lua

我有一个应用程序，我通过 LuaSockets 从网络（500KB）获取大量二进制数据。（还没有实现这部分）。根据我所知道的，这些数据将存储在某种字符串或表或数组中。

我需要对这些数据进行复杂的处理，并且我有一个现有的、经过验证的 ANSI-C Lib，我需要将数据传递给 C。我研究过的方法通常在调用堆栈中传递数据，这是行不通的由于数据大小，对我来说。

现有的 ANSI-C 库需要一个指向数据和大小的指针。我可能可以用一个新的 API 包装这个 API，它逐字节地排除数据，最后一旦确定了整个大小，就调用真正的 API，但这意味着从 Lua 对某些 C 函数的大量调用，而不是首选，因为我想要性能.

将这些大数据传递给 C 的最佳方法是什么？（我考虑过写入文件并传递文件名，但这不是首选，我真的想要直接内存传递）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T15:36:38.777

假设 LuaSocket 以字符串的形式提供数据，那真的很简单。

您的 C 应用程序将直接从 Lua 传递字符串。所以它在 Lua 堆栈上。用于`lua_tolstring`获取字符串及其大小。这将返回一个指向 Lua 拥有的内存的指针（因此您需要确保它保留在 Lua 堆栈或注册表中或在您使用它的某个地方，以防止 Lua 垃圾收集它）。然后将该字符串+大小传递给您选择的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:36:18.533

在我看来，您不必关心 Lua 堆栈的大小。Lua 堆栈上的大多数（如果不是每个）元素实际上都是堆分配的。如果你使用的是 luasocket，那么你收到的二进制数据已经可以作为 Lua 字符串使用（我猜是 socket:receive 的返回值），所以你没有额外分配任何东西！Lua 堆栈实际上更有可能传递某种引用，因此复制不会发生或非常便宜。要连接您的 C 库，您可以：a) 编写一个 C 绑定 b) 使用外星人 c) luajit 在 99% 的情况下我更喜欢 a)。有几种方法可以做到这一点，但它似乎是一个相当苗条的 C API，所以我会在没有任何额外绑定库（如 luabind）的情况下做到这一点。

您可以查看 lua-cjson 源[http://www.kyne.com.au/~mark/software/lua-cjson-manual.html](http://www.kyne.com.au/~mark/software/lua-cjson-manual.html)。这是 C 绑定的一个很好的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:31:11.713

如果我在你的情况下，我会跳过 luasocket 并只使用 C/C++ 套接字库。

由于无论如何处理都将在 C/C++ 中完成，因此使用 luasocket 简化了（一点）套接字处理，但代价是接收数据和 C/C++ 二进制数据处理库之间的接口（显着）复杂化。

使用 C/C++ 套接字库会使套接字处理更加困难（但不多），而到处理库的数据传输将是微不足道的。

# ruby-on-rails - Heroku 推送错误 H10

> ID：12998872
> 
> 赞同：0
> 
> 时间：2012-10-21T14:43:03.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, railtie

在过去的几天里，我一直在尝试修复一个在我将应用程序推送到 Heroku 后不断发生的错误。

在 Webrick 上启动时，该应用程序在开发中运行良好，但由于某种原因，`Application Error`当我尝试在 Heroku 上加载我的应用程序时，我一直收到一个页面。

我有以下日志报告 - 有谁知道我该如何解决这个问题？

```
 2012-10-21T14:17:52+00:00 app[web.1]: => Rails 3.2.0 application starting in production on http://0.0.0.0:23771
 2012-10-21T14:17:52+00:00 app[web.1]: /app/app/uploaders/cv_uploader.rb:3:in `<top (required)>': uninitialized constant CarrierWave (NameError)
 2012-10-21T14:17:52+00:00 app[web.1]: => Call with -d to detach
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/inflector/methods.rb:225:in `constantize'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/inflector/methods.rb:256:in `safe_constantize'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/core_ext/string/inflections.rb:66:in `safe_constantize'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:152:in `_default_wrap_model'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:169:in `_set_wrapper_defaults'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.0/lib/abstract_controller/railties/routes_helpers.rb:7:in `block(2 levels) in with'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:133:in `inherited'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/engine.rb:438:in `each'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.0/lib/action_controller/railties/paths.rb:7:in `block (2 levels)in with'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/app/controllers/apps_controller.rb:1:in `<top (required)>'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/engine.rb:438:in `block in eager_load!'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/application.rb:136:in `initialize!'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:54:in `each'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:54:in `run_initializers'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/engine.rb:436:in `each'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/engine.rb:436:in `eager_load!'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/application/finisher.rb:54:in `block in <module:Finisher>'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:30:in `instance_exec'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:30:in `run'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:55:in `block in run_initializers'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/railtie/configurable.rb:30:in `method_missing'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/config.ru:1:in `new'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/commands/server.rb:46:in `app'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/commands/server.rb:70:in `start'
 2012-10-21T14:17:52+00:00 app[web.1]:   from script/rails:6:in `require'
 2012-10-21T14:17:52+00:00 app[web.1]:   from script/rails:6:in `<main>'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/commands.rb:50:in `<top (required)>'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/commands.rb:55:in `block in <top (required)>'
 2012-10-21T14:17:52+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/commands.rb:50:in `tap'
 2012-10-21T14:17:53+00:00 heroku[web.1]: Process exited with status 1
 2012-10-21T14:17:53+00:00 heroku[web.1]: State changed from starting to crashed
 2012-10-21T14:17:54+00:00 heroku[router]: Error H10 (App crashed) -> GET secure-ocean-9819.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

对此的任何帮助真的将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:00:00.970

你的问题解决了吗我有一些事情你可以尝试让我尽快知道因为我最近遇到了类似的问题

# python - 当我在 Python 中使用 open(filename) 或在 C 中使用 fopen(filename) 时，保存文件的编码是什么？

> ID：12998873
> 
> 赞同：2
> 
> 时间：2012-10-21T14:43:29.530
> 
> 标签：python, encoding, python-2.7, file-encodings

运行时环境：Python 2.7、Windows 7

注意：我说的是 PYTHON 源代码生成的文件的编码（不是说 PYTHON 源文件的编码），PYTHON 源文件顶部声明的编码确实与 PYTHON 源文件的编码一致得救了。

当 string() 中没有非 ascii 字符时`content = 'abc'`，文件( `file.txt`，而不是 PYTHON 源文件)在 之后以 ANSI 编码保存`fp.close()`，PYTHON 文件(并以 ANSI 编码格式保存)内容如下：

```
## Author: melo
## Email:prevision@imsrch.tk
## Date: 2012/10/12
import os

def write_file(filepath, mode, content):
    try:
        fp = open(filepath, mode)
        try:
            print 'file encoding:', fp.encoding
            print 'file mode:', fp.mode
            print 'file closed?', fp.closed
            fp.write(content)
        finally:
            fp.close()
            print 'file closed?', fp.closed
    except IOError, e:
        print e

if __name__ == '__main__':
    filepath = os.path.join(os.getcwd(), 'file.txt')
    content = 'abc'
    write_file(filepath, 'wb', content) 
```

但是当 string() 中有一些非 ascii 字符时`content = 'abc莹'`，file( `file.txt`) 将在 之后以 UTF-8 编码保存，尽管我在 PYTHON 源文件（不是）`fp.close()`的顶部声明了编码。此时，PYTHON 源文件的内容如下：`file.txt``#encoding=gbk`

```
# -*- encoding: gbk -*-
## Author: melo
## Email:prevision@imsrch.tk
## Date: 2012/10/12
import os

def write_file(filepath, mode, content):
    try:
        fp = open(filepath, mode)
        try:
            print 'file encoding:', fp.encoding
            print 'file mode:', fp.mode
            print 'file closed?', fp.closed
            fp.write(content)
        finally:
            fp.close()
            print 'file closed?', fp.closed
    except IOError, e:
        print e

if __name__ == '__main__':
    filepath = os.path.join(os.getcwd(), 'file.txt')
    content = 'abc莹'
    write_file(filepath, 'wb', content) 
```

有没有证据表明它的行为是这样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:17:27.710

文件以*您*保存它的编码保存。源文件以*您*保存它的编码保存。它们不必相同，只需*声明*它们。

根据您的[其他问题](https://stackoverflow.com/q/12969897/235698)，我假设您使用的是 Notepad++，当您打开时，`file.txt`您发现 Notepad++ 认为该文件是以`UTF-8 without BOM`. 这是 Notepad++ 的错误*猜测*。选择中文GB2312字符集，文件将正常显示。

除非通过字节顺序标记 (BOM) 或其他一些元数据给出提示或由用户告知，否则程序不知道文件的编码方式。

一个正确的 Python 程序会做这些事情：

1.  如果源文件中使用了非 ASCII 字符，则声明源文件的编码。
2.  对所有文本使用 Unicode 字符串。
3.  输出到文件等二进制流时对 Unicode 字符串进行编码。
4.  从二进制流中读取时，将传入的文本数据解码为 Unicode。
5.  （可选）使用带有字节顺序标记的编码，以便编辑者知道文件编码。

例子：

```
# encoding: utf-8
import codecs
with codecs.open('file.txt','wb',encoding='utf-8-sig') as f:
    f.write(u'abc莹') 
```

您现在应该在 Notepad++ 中看到`file.txt`被检测为编码为“UTF-8”（带有 BOM）并正确显示文件。

请注意，如果您将编码声明为`gbk`，则可以将文件保存为“ANSI”（系统上的 GBK），并且由于使用了 Unicode 字符串，它仍然可以工作。

实际上，您的系统可能是代码页 936 ( `cp936`) 而不是 GBK。它们并不完全相同。最好使用 UTF-8 或 UTF-16 之类的 Unicode 编码，它们可以准确地表示所有 Unicode 字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:47:37.997

```
# -*- encoding: gbk -*- 
```

在 PYTHON 文件的顶部，指示 PYTHON 文件的编码。要使用编解码器，请使用[编解码器](http://docs.python.org/library/codecs.html)模块。

你需要这个：[`codecs.open()`](http://docs.python.org/library/codecs.html#codecs.open)

# apache - 如何使 .htaccess 文件将任何 .org 重定向到其对应的 .com？

> ID：12998875
> 
> 赞同：0
> 
> 时间：2012-10-21T14:43:39.513
> 
> 标签：apache, .htaccess, redirect

我有一个 .htaccess 文件，现在看起来像这样：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(.*).org$ [NC]

RewriteRule ^(.*)$ http://foo.com/$2 [R=301,L] 
```

是否可以为“foo.com”位添加一个变量，以重定向到输入的同一个域，但使用 .com 而不是 .org？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:53:56.183

阅读文档通常会有所帮助：[`RewriteRule`指令](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

> 除了纯文本之外，替换字符串还可以包括
> 
> *   对 RewriteRule 模式的反向引用 ($N)
> *   ***对最后匹配的 RewriteCond 模式的反向引用 (%N)***
> *   服务器变量，如规则条件测试字符串 (%{VARNAME})
> *   映射函数调用 (${mapname:key|default})

# plone - Plone - 当我尝试从头开始时尝试运行 bootstrap.py 时出错

> ID：12998877
> 
> 赞同：0
> 
> 时间：2012-10-21T14:43:47.617
> 
> 标签：plone, bootstrapper, buildout, distribute

好的，所以我购买了 Professional Plone 4 Development，现在我正在尝试完成初始设置。这是我到目前为止所做的：

首先，我为这个项目创建了一个名为的虚拟环境`pl`和一个目录，也称为`pl`.

二、我以前是在虚拟环境`pip`下安装的。它似乎奏效了。`PIL``pl`

第三，我在目录中创建了一个名为`buildout.cfg`的`pl`文件。其内容如下：

```
[buildout]
extends = http://dist.plone.org/releases/4.2/versions.cfg
parts = instance
[instance]
recipe = plone.recipe.zope2instance
user = admin:admin
eggs = Plone 
```

（我`buildout.cfg`直接从 Plone 4 书中第 36 页标题为“A Minimum Buildout”的部分中获取了这个文件。）

第四，我`bootstrap.py`在这个位置下载了文件 - [http://svn.plone.org/svn/plone/buildouts/plone-coredev/branches/4.2/bootstrap.py](http://svn.plone.org/svn/plone/buildouts/plone-coredev/branches/4.2/bootstrap.py) - 并将它放在我的`pl`目录中 - 按照书中的说明.

第五，从我的`pl`目录中，`pl`激活虚拟环境，我运行命令`python bootstrap.py --distribute`

然后我收到以下错误：

```
下载 http://pypi.python.org/packages/source/d/distribute/distribute-0.6.29.tar.gz
在 /var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmp97GJFJ 中提取
现在在 /var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmp97GJFJ/distribute-0.6.29 工作
在 /var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpvHtk40 中构建一个分布式鸡蛋
/var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpvHtk40/distribute-0.6.29-py2.7.egg
尽管：
  初始化。

由于 zc.buildout 或
正在使用的配方：
回溯（最近一次通话最后）：
  文件“/private/var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpvHtk40/zc.buildout-1.4.4-py2.7.egg/zc/buildout/buildout.py”，第 1682 行，在 main
    user_defaults、windows_restart、命令）
  文件“/private/var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpvHtk40/zc.buildout-1.4.4-py2.7.egg/zc/buildout/buildout.py”，第 198 行，在 __init__
    数据['buildout'].copy(), 覆盖))
  文件“/private/var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpvHtk40/zc.buildout-1.4.4-py2.7.egg/zc/buildout/buildout.py”，第 1356 行，在 _open
    eresult = _open（base，extends.pop(0)，看到，dl_options，覆盖）
  文件“/private/var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpvHtk40/zc.buildout-1.4.4-py2.7.egg/zc/buildout/buildout.py”，第 1306 行，在 _open
    路径，is_temp = 下载（文件名）
  文件“/private/var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpvHtk40/zc.buildout-1.4.4-py2.7.egg/zc/buildout/download.py”，第 96 行，在 __call__
    local_path, is_temp = self.download(url, md5sum, 路径)
  文件“/private/var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpvHtk40/zc.buildout-1.4.4-py2.7.egg/zc/buildout/download.py”，第 173 行，在下载中
    tmp_path, headers = urllib.urlretrieve(url, tmp_path)
  文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py”，第 91 行，在 urlretrieve
    return _urlopener.retrieve(url，文件名，reporthook，数据)
  文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py”，第 237 行，在检索
    fp = self.open（网址，数据）
  文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py”，第 205 行，打开
    返回 getattr(self, name)(url)
  文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py”，第 356 行，在 open_http
    return self.http_error(url, fp, errcode, errmsg, headers)
  文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py”，第 373 行，位于 http_error
    return self.http_error_default(url, fp, errcode, errmsg, headers)
  文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py”，第 379 行，位于 http_error_default
    raise IOError, ('http error', errcode, errmsg, headers)
IOError: ('http 错误', 404, '未找到', )

```

如果您想知道，我正在使用 python 2.7.2 并`pip freeze`输出以下内容：

```
PIL==1.1.7
wsgiref==0.1.2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:46:53.563

尝试将构建中的 URL 更改为：

> [http://dist.plone.org/release/4.2/versions.cfg](http://dist.plone.org/release/4.2/versions.cfg)

代替

> [http://dist.plone.org/releases/4.2/versions.cfg](http://dist.plone.org/) **_** _

看起来错误的 URL 导致了`IOError: ('http error', 404, 'Not Found', )`

此外，其次，对于第 4 步，尝试运行：

```
bin/python bootstrap.py --distribute 
```

（ bin/ 很重要，因此您肯定会启动 python 的 virtualenv 版本）。您的回溯表明，单独运行“python”正在调用系统 python（注意所有提到“ **/System/Library/Frameworks** ”的路径。

# python - 有效存储客户数据

> ID：12998879
> 
> 赞同：0
> 
> 时间：2012-10-21T14:44:02.157
> 
> 标签：python, client-server, storage

我正在开发一个客户端-服务器应用程序来在多个客户端中分发和执行代码。这就是它必须工作的方式：

1.  客户端连接到服务器，每分钟发送一次状态。
2.  服务器存储客户端 IP 和状态。
3.  有人向服务器发送要执行的代码。
4.  服务器搜索免费且活跃的客户端并发送代码。

我的问题是我可以处理的客户数量。我正在考虑使用列表来存储客户对象或类似的东西，但我可能有成千上万的客户，所以这可能不是一个好主意，因为我会用完资源。哪个可能是在不挂起服务器的情况下有效存储所有客户端数据的最佳选择？

很抱歉没有显示任何代码，但我目前正处于设计阶段，我被困住了。该项目将使用 Python 开发，但我不需要代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:52:33.300

如果您只是担心没有足够的内存来保存所有 Python 数据，您可以腌制它并跟踪例如 ID 和腌制文件[Python Docs Pickle](http://docs.python.org/library/pickle.html)。

另一个很好的例子是[Shelve](http://docs.python.org/library/shelve.html)。

这两种方法的好处是不必担心在例如 SQL 数据库上对数据进行序列化或建模。

当然，你也可以将两者结合起来。腌制数据并将结果字符串保存在数据库的字段中。这样，如果将来需要，您可以简单地添加带有元数据的列。当谈到速度考虑时，您要么将其保存在数据库中以便可以很好地查询它，要么将其保存为文件以摆脱“开销”。小心过早的优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T14:49:41.370

sqlite是一个lite数据库存储和高效，或者使用mongoDB（没有sql数据库），如果你不喜欢mysql

[http://www.sqlite.org/](http://www.sqlite.org/)

[http://www.mongodb.org/](http://www.mongodb.org/)

我认为它们比 mysql 更快...

# expression - 当我尝试使用字符串时，为什么 AngularJS 会抱怨表达式中出现意外标记？

> ID：12998886
> 
> 赞同：9
> 
> 时间：2012-10-21T14:46:05.797
> 
> 标签：expression, syntax-error, angularjs

我在 div 上有以下属性：`ng-show="state.name === 'index'"`。我也试过`ng-show='state.name === "index"`了，但我不断收到以下错误：

> 语法错误：标记“ `"index"`”是表达式第 16 列中的意外标记，`[state.name === "index"]`从 开始`["index"]`。

为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T05:28:33.307

`ng-show`接受“AngularJS 语句”。这种类型的语句只有一个`==`运算符，但这个运算符的行为类似于`===`. 这有点令人困惑，但很方便，因为你不能用奇怪的类型强制射击自己。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T15:16:15.840

我发现了问题。而不是`"state.name==='index'"`，我应该写`"state.name=='index'"`。pkoziowski.opensource 是对的，因为你不能使用条件语句，但它们的意思是你不能使用 if 语句或任何控制流语句，所以你不能这样做：

```
<span ng-init="if(state.name == 'o'){doFoo();}">o</span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-13T09:05:41.577

这个问题现在有一个新的答案：你可能使用的是**旧版本的 AngularJS**，因为新版本没有这个。

请参阅此处对提出问题时（1.1.0）最新版本的 OP 问题的重现：

```
angular.module("demo", [])
  .controller("myctrl", function($scope) {
    $scope.state = { name: "test" };
  });
```

```
<script src="https://code.angularjs.org/1.1.0/angular.js"></script>
<div ng-app="demo" ng-controller="myctrl">
  (this snippet explicitly errors out, reproducing OP's issue)<br>
  <input ng-model="state.name">
  <div ng-show="state.name === 'test'">visible when "test" is in the input</div>
  Debug info: <pre>{{state | json}}</pre>
</div>
```

并在此处查看相同的代码，但**版本为 1.5.6**，这是撰写此答案时的最新版本：

```
angular.module("demo", [])
  .controller("myctrl", function($scope) {
    $scope.state = { name: "test" };
  });
```

```
<script src="https://code.angularjs.org/1.5.6/angular.js"></script>
<div ng-app="demo" ng-controller="myctrl">
  Working version<br>
  <input ng-model="state.name">
  <div ng-show="state.name === 'test'">visible when "test" is in the input</div>
  Debug info: <pre>{{state | json}}</pre>
</div>
```

大概这是在 2013 年的 1.1.2 版中修复的，因为[更改日志](https://github.com/angular/angular.js/blob/master/CHANGELOG.md)提到：

> *   $parse: 允许角度表达式中的严格相等 (a179a9a9, #908)

*脚注：*我已经将上述内容作为问题的答案。如果您赞成我的回答，那不幸的是，这可能意味着您像我一样使用搜索查询登陆该线程，只是发现您遇到的“意外令牌”错误不是由 OP 在这里遇到的问题引起的...

# html - 带有 CSS box-shadow 和过渡的工件

> ID：12998891
> 
> 赞同：3
> 
> 时间：2012-10-21T14:46:36.137
> 
> 标签：html, css, google-chrome

这适用于 Firefox、IE 和 Safari，但在 Chrome 上它会显示工件（线条）。这是一个简单的 CSS，带有 :hover、box-shadow 和 transition。

![Chrome Artifacts（黑线）](../Images/fd44eb66e1cd423106b26d5aff0cdaa8.png)

HTML 是元素周期表的表示形式，每当鼠标悬停在元素上时，它就会“点亮”。您可以在此处查看 HTML 的一部分：[Periodic Table](http://storage.cet.ac.il/temp/periodic/index.html)，其中症状在 Chrome 中重复。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:32:29.273

如上所述，这看起来不像是用户/脚本错误，而更像是浏览器中的错误。在其他浏览器中测试它并更新您的 Chrome，也许是清除缓存。更多你做不到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:14:27.503

我正在使用谷歌浏览器（最新版本）并且没有看到你提到的问题 - 也许这是 Chrome 本身的问题（至少是它的旧版本。）也许你应该更新你的 Chrome，或者发布[Chromium 错误列表](http://code.google.com/p/chromium/issues/list)中的一个问题。

编辑：[这可能是你的问题](http://code.google.com/p/chromium/issues/detail?id=142038&q=lines%20hover&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)。

（此外，元素内的文本看起来不像发布的屏幕截图 - 数字与字母一致。这不是你提到的问题，只是我注意到的。）

# google-apps-script - 如何处理“无法连接到 Gmail”错误？

> ID：12998899
> 
> 赞同：0
> 
> 时间：2012-10-21T14:48:46.197
> 
> 标签：google-apps-script

我创建了一个脚本，用于在收到重要消息后发送 SMS 通知（根据[本](https://developers.google.com/apps-script/articles/gmail_filter_sms)教程）。但我经常收到通知，该脚本未能成功完成。错误消息是`Cannot connect to Gmail (line 13)`，第 13 行是：

```
var threads = GmailApp.getUserLabelByName('SMS').getThreads(); 
```

我应该如何处理？即只是停止执行并等待下一次运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:19:30.780

一个不错的方法是将代码包装在一个while循环和一个try catch块中，然后尝试直到操作成功。就像是 ...

```
var retryCount = 0; 
var success = false ; 

while (!success & retryCount++ <=5 ){
  try{
    var threads = GmailApp.getUserLabelByName('SMS').getThreads();
    // Other code here 

    success = true; 
  }catch(ex){ 
    Logger.log(ex);
  }
  Utilities.sleep(1000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:21:12.570

为什么不是 try/catch 结构？如果您遵循 tuto，您将有一个电子表格可用于记录错误并检查执行是否完成，以便您决定要做什么。

# c - 外部代码不起作用

> ID：12998900
> 
> 赞同：0
> 
> 时间：2012-10-21T14:48:49.743
> 
> 标签：c, extern

为什么下面的代码不起作用？请解释。

```
#include<stdio.h>
#include<stdlib.h>

int main(int number, char arg[])
{
    extern int i;
    i = 5;
    printf("%d",i);
    return 0;
} 
```

* * *

```
#include<stdio.h>
#include<stdlib.h>

int main(int number, char arg[])
{
    extern int i;
    i = (int) malloc(sizeof(int));
    i = 5;
    printf("%d",i);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:51:10.970

`extern`用于指定变量存在，但尚未定义。您不创建变量，只需向编译器指定它存在。如果没有，您将在链接时出错。

我建议您阅读有关[extern 关键字的更多信息](http://en.wikipedia.org/wiki/External_variable)

一个简单的使用示例是两个`.c`文件，一个将您的 extern 变量作为全局变量，一个打印此变量

文件.c

```
int value = 5; 
```

主程序

```
int main() {
  extern int value;

  printf("%i\n", value);
  return 0;
} 
```

编译这个使用`gcc file.c main.c`将输出`5`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:50:51.180

外部变量的值必须从定义它们的函数外部定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:51:12.180

写的时候

```
extern int i; 
```

您只是声明（但未定义）一个名为 i 的变量。您需要`i`在程序中的某个位置进行定义。例如，它可能就在另一个文件之后`main`或在另一个`.c`文件中

```
int main(int number, char* arg[])
{
    extern int i;
    i = 5;
    printf("%d",i);
    return 0;
}
int i; //here you define i 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T14:57:09.587

默认情况下`extern`（例如，没有初始化程序），关键字提供变量的声明。你需要定义你的变量。要建立内部链接：

```
#include <stdio.h>
#include <stdlib.h>

static int i;

int main(int number, char arg[])
{
    extern int i;
    i = 5;
    printf("%d",i);
    return 0;
} 
```

和一个外部链接：

```
#include <stdio.h>
#include <stdlib.h>

int i;

int main(int number, char arg[])
{
    extern int i;
    i = 5;
    printf("%d",i);
    return 0;
} 
```

另请参见[此处](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)。

> **C11 (n1570), § 6.2.2 标识符**
> 的链接 对于使用存储类说明符 extern 在该标识符的先前声明可见的范围内声明的标识符）如果先前声明指定内部或外部链接，则后面声明的标识符与前面声明中指定的链接相同。如果前面的声明不可见，或者前面的声明没有指定链接，则标识符具有外部链接。

# python - 模拟 Python 的内置打印功能

> ID：12998908
> 
> 赞同：46
> 
> 时间：2012-10-21T14:50:41.237
> 
> 标签：python, unit-testing, mocking, python-2.x

我试过了

```
from mock import Mock
import __builtin__

__builtin__.print = Mock() 
```

但这会引发语法错误。我也试过像这样修补它

```
@patch('__builtin__.print')
def test_something_that_performs_lots_of_prints(self, mock_print):

    # assert stuff 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-07-01T21:08:36.317

我知道已经有一个公认的答案，但是对于这个问题有一个更简单的解决方案 - 在 python 2.x 中模拟打印。答案在模拟库教程中：[http](http://www.voidspace.org.uk/python/mock/patch.html) ://www.voidspace.org.uk/python/mock/patch.html它是：

```
>>> from StringIO import StringIO
>>> def foo():
...     print 'Something'
...
>>> @patch('sys.stdout', new_callable=StringIO)
... def test(mock_stdout):
...     foo()
...     assert mock_stdout.getvalue() == 'Something\n'
...
>>> test() 
```

当然，您也可以使用以下断言：

```
self.assertEqual("Something\n", mock_stdout.getvalue()) 
```

我已经在我的单元测试中检查了这个解决方案，它按预期工作。希望这可以帮助某人。干杯!

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-06-07T11:59:16.863

`unittest.mock`这是一个更简单的 Python 3 解决方案——直接在内置函数上使用更容易`print`，而不是摆弄`sys.stdout`：

```
from unittest.mock import patch, call

@patch('builtins.print')
def test_print(mocked_print):
    print('foo')
    print()

    assert mocked_print.mock_calls == [call('foo'), call()] 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-21T15:13:04.523

`print`是 python 2.x 中的关键字，将其用作属性会引发 SyntaxError。您可以通过`from __future__ import print_function`在文件开头使用来避免这种情况。

注意：您不能简单地使用`setattr`，因为您修改的打印功能不会被调用，除非该`print`语句被禁用。

编辑：您还需要`from __future__ import print_function`在每个文件中使用您修改的`print`函数，否则它将被`print`语句屏蔽。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-21T19:45:53.987

如果你想坚持使用 2.x 的`print`语句而不是 2.x 的`print()`函数，你可以模拟你的`sys.stdout`。

写一个虚拟的“文件”，大概是这样：

```
class Writable(object):
    """Class which has the capability to replace stdout."""
    newwrite = None
    def __init__(self, oldstdout, newwrite=None):
        self.oldstdout = oldstdout
        if newwrite is not None:
            self.newwrite = newwrite
    def write(self, data):
        self.newwrite(self.oldstdout, data)
    @classmethod
    def subclass(cls, writefunc):
        newcls = type('', (cls,),
            dict(write=lambda self, data: writefunc(self.oldstdout, data)
        return newcls 
```

此类期望与获取打印数据的写入函数相结合。这个写入函数应该有两个参数：第一个带有“旧标准输出”的最后用于打印，另一个用于数据。

让我们来

```
def mywrite(sink, data):
    sink.write(data.encode("hex")) 
```

为了那个原因。

现在你可以做

```
import sys
sys.stdout = Writable(sys.stdout, mywrite) 
```

或者你可以做

```
@Writable.subclass
def mywritable(sink, data)
    sink.write(data.encode("hex"))

sys.stdout = mywritable(sys.stdout) 
```

第二个版本有点棘手：它`Writable`在装饰器函数的帮助下创建了一个子类，该函数将给定函数转换为新创建的类的方法，并放入给定函数来自的名称中。

之后，您有一个新类，可以使用“旧标准输出”作为参数进行实例化，然后可以替换`sys.stdout`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-26T12:23:22.810

我的版本。

在测试程序中（例如：）`pp.py`：

```
from __future__ import print_function

def my_func():
    print('hello') 
```

在测试程序中：

```
def test_print(self):
    from pp import my_func
    from mock import call
    with mock.patch('__builtin__.print') as mock_print:
       my_func()
       mock_print.assert_has_calls(
            [
                call('hello')
            ]
        ) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-08-18T14:50:35.793

```
from unittest.mock import patch

def greet():
    print("Hello World")

@patch('builtins.print')
def test_greet(mock_print):
    greet()
    mock_print.assert_called_with("Hello World!") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-23T13:42:29.743

```
import mock
import sys

mock_stdout = mock.Mock()
sys.stdout = mock_stdout
print 'Hello!'
sys.stdout = sys.__stdout__

print mock_stdout.mock_calls
[call.write('Hello!'), call.write('\n')] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-02T16:51:24.530

这是@KC 答案的 v3 版本。

我不想模拟打印，因为我特别想查看整个输出，而不是检查单个调用，因此 StringIO 对我来说更有意义。

```
from io import StringIO
from unittest.mock import patch

def foo():
    print ('Something')

def test():
    with patch('sys.stdout', new_callable=StringIO) as buffer:
        foo()
    fake_stdout = buffer.getvalue()

    #print() is back!
    print(f"fake_stdout:{fake_stdout}")
    assert fake_stdout == 'Something\n'

test() 
```

### 警告：

在补丁期间，模拟 stdout 与 using 效果不佳`pdb.set_trace()`。我注释掉`with...`，添加`if True:`以保留缩进，调试我的脚本并在修复错误后放回批处理。

```
 #with patch('sys.stdout', new_callable=StringIO) as buffer:
    if True:
        foo()
    ... 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-21T15:04:10.023

首先，模块被调用`__builtins__`，你不需要导入它。

现在，在 Python 2`print`中是关键字，因此您不能直接将其用作属性名称。您可以使用`setattr`/`getattr`来解决它：

```
getattr(__builtins__, "print") 
```

另一种选择是使用`from __future__ import print_function`which 更改 Python 将模块解析为 Python 3 语法的方式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-03T02:38:39.177

正如 lcq 所说，**print**是一个关键字。所以，想想如果你真的成功地在 Python 2.7.3 下修补/模拟打印，这意味着什么。你会有这样的代码：

```
print "Hi." 
```

转变为：

```
<MagicMock id='49489360'> "Hi." 
```

MagicMock 对象不能以这种方式访问​​，因此您会收到语法错误。

是的。您只能模拟 Python3 打印*函数*或 sys.stdout。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-19T18:38:29.070

这个 Python 3 示例建立在 Krzysztof 的 Python 2 答案之上。它使用`unittest.mock`. 它使用可重用的辅助方法进行断言。

```
import io
import unittest
import unittest.mock

from .solution import fizzbuzz

class TestFizzBuzz(unittest.TestCase):

    @unittest.mock.patch('sys.stdout', new_callable=io.StringIO)
    def assert_stdout(self, n, expected_output, mock_stdout):
        fizzbuzz(n)
        self.assertEqual(mock_stdout.getvalue(), expected_output)

    def test_only_numbers(self):
        self.assert_stdout(2, '1\n2\n') 
```

# windows-phone-7 - NUnit 和 Windows Phone 库 (System.TypeLoadException)

> ID：12998910
> 
> 赞同：0
> 
> 时间：2012-10-21T14:50:51.337
> 
> 标签：windows-phone-7, nunit, windows-phone-7.1, nunit-console

我正在尝试使用 NUnit 和标准控制台（GUI 或非 GUI）运行器测试 Windows Phone 7.1 类库。

在我的问题之后，我在下面找到了这个： [http ://dotneteers.net/blogs/vbandi/archive/2012/08/08/using-nunit-to-test-windows-phone-7-applications-part- 1.aspx](http://dotneteers.net/blogs/vbandi/archive/2012/08/08/using-nunit-to-test-windows-phone-7-applications-part-1.aspx)

所以我几乎可以肯定这是我自己的一个愚蠢的问题。

每次我尝试加载我的程序集测试时，我都会收到此错误：

> System.TypeLoadException：无法从程序集'mscorlib，版本 = 2.0.0.0，文化 = 中性，PublicKeyToken = b77a5c561934e089' 加载类型'System.Runtime.Versioning.TargetFrameworkAttribute'。
> 
> 如需更多信息，请使用异常详细信息菜单项。

*** 这里是“详细信息” ***

> System.TypeLoadException...
> 
> 服务器堆栈跟踪： en System.ModuleHandle.ResolveType(Int32 typeToken, RuntimeTypeHandle* typeInstArgs, Int32 typeInstCount, RuntimeTypeHandle* methodInstArgs, Int32 methodInstCount) en System.ModuleHandle.ResolveTypeHandle(Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext) .Reflection.Module.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments) en System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly& lastAptcaOkAssembly, Module decoratedModule, MetadataToken decoratedToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, Object[] 属性，IList derivedAttributes，RuntimeType& attributeType，RuntimeMethodHandle& ctor, Boolean& ctorHasParameters, Boolean& isVarArg) en System.Reflection.CustomAttribute.GetCustomAttributes(Module decoratedModule, Int32 DecorationMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes) en System.Reflection.CustomAttribute.GetCustomAttributes(Assembly assembly, RuntimeType caType ) en System.Reflection.Assembly.GetCustomAttributes(Type attributeType, Boolean inherit) en NUnit.Core.ActionsHelper.GetActionsFromAttributeProvider(ICustomAttributeProvider attributeProvider) en NUnit.Core.TestAssembly..ctor(Assembly assembly, String path) en NUnit.Core.Builders .TestAssemblyBuilder.BuildTestAssembly(Assembly assembly, String assemblyName, IList fixtures, Boolean autoSuites)ctorHasParameters, Boolean& isVarArg) en System.Reflection.CustomAttribute.GetCustomAttributes(Module decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes) en System.Reflection.CustomAttribute.GetCustomAttributes(Assembly assembly, RuntimeType caType) en System. Reflection.Assembly.GetCustomAttributes(Type attributeType, Boolean inherit) en NUnit.Core.ActionsHelper.GetActionsFromAttributeProvider(ICustomAttributeProvider attributeProvider) en NUnit.Core.TestAssembly..ctor(Assembly assembly, String path) en NUnit.Core.Builders.TestAssemblyBuilder.BuildTestAssembly （程序集程序集、字符串程序集名称、IList 固定装置、布尔自动套件）ctorHasParameters, Boolean& isVarArg) en System.Reflection.CustomAttribute.GetCustomAttributes(Module decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes) en System.Reflection.CustomAttribute.GetCustomAttributes(Assembly assembly, RuntimeType caType) en System. Reflection.Assembly.GetCustomAttributes(Type attributeType, Boolean inherit) en NUnit.Core.ActionsHelper.GetActionsFromAttributeProvider(ICustomAttributeProvider attributeProvider) en NUnit.Core.TestAssembly..ctor(Assembly assembly, String path) en NUnit.Core.Builders.TestAssemblyBuilder.BuildTestAssembly （程序集程序集、字符串程序集名称、IList 固定装置、布尔自动套件）CustomAttribute.GetCustomAttributes（Module decoratedModule，Int32 decoratedMetadataToken，Int32 pcaCount，RuntimeType attributeFilterType，Boolean mustBeInheritable，IList derivedAttributes） en System.Reflection.CustomAttribute.GetCustomAttributes（Assembly 程序集，RuntimeType caType） en System.Reflection.Assembly.GetCustomAttributes（Type attributeType，Boolean inherit) en NUnit.Core.ActionsHelper.GetActionsFromAttributeProvider(ICustomAttributeProvider attributeProvider) en NUnit.Core.TestAssembly..ctor(Assembly assembly, String path) en NUnit.Core.Builders.TestAssemblyBuilder.BuildTestAssembly(Assembly assembly, String assemblyName, IList fixtures,布尔自动套件）CustomAttribute.GetCustomAttributes（Module decoratedModule，Int32 decoratedMetadataToken，Int32 pcaCount，RuntimeType attributeFilterType，Boolean mustBeInheritable，IList derivedAttributes） en System.Reflection.CustomAttribute.GetCustomAttributes（Assembly 程序集，RuntimeType caType） en System.Reflection.Assembly.GetCustomAttributes（Type attributeType，Boolean inherit) en NUnit.Core.ActionsHelper.GetActionsFromAttributeProvider(ICustomAttributeProvider attributeProvider) en NUnit.Core.TestAssembly..ctor(Assembly assembly, String path) en NUnit.Core.Builders.TestAssemblyBuilder.BuildTestAssembly(Assembly assembly, String assemblyName, IList fixtures,布尔自动套件）Boolean mustBeInheritable, IList derivedAttributes) en System.Reflection.CustomAttribute.GetCustomAttributes(Assembly assembly, RuntimeType caType) en System.Reflection.Assembly.GetCustomAttributes(Type attributeType, Boolean inherit) en NUnit.Core.ActionsHelper.GetActionsFromAttributeProvider(ICustomAttributeProvider attributeProvider) en NUnit .Core.TestAssembly..ctor(Assembly assembly, String path) en NUnit.Core.Builders.TestAssemblyBuilder.BuildTestAssembly(Assembly assembly, String assemblyName, IList fixtures, Boolean autoSuites)Boolean mustBeInheritable, IList derivedAttributes) en System.Reflection.CustomAttribute.GetCustomAttributes(Assembly assembly, RuntimeType caType) en System.Reflection.Assembly.GetCustomAttributes(Type attributeType, Boolean inherit) en NUnit.Core.ActionsHelper.GetActionsFromAttributeProvider(ICustomAttributeProvider attributeProvider) en NUnit .Core.TestAssembly..ctor(Assembly assembly, String path) en NUnit.Core.Builders.TestAssemblyBuilder.BuildTestAssembly(Assembly assembly, String assemblyName, IList fixtures, Boolean autoSuites)ActionsHelper.GetActionsFromAttributeProvider(ICustomAttributeProvider attributeProvider) en NUnit.Core.TestAssembly..ctor(Assembly assembly, String path) en NUnit.Core.Builders.TestAssemblyBuilder.BuildTestAssembly(Assembly assembly, String assemblyName, IList fixtures, Boolean autoSuites)ActionsHelper.GetActionsFromAttributeProvider(ICustomAttributeProvider attributeProvider) en NUnit.Core.TestAssembly..ctor(Assembly assembly, String path) en NUnit.Core.Builders.TestAssemblyBuilder.BuildTestAssembly(Assembly assembly, String assemblyName, IList fixtures, Boolean autoSuites)
> en NUnit.Core.Builders.TestAssemblyBuilder.Build(String assemblyName, Boolean autoSuites) en NUnit.Core.Builders.TestAssemblyBuilder.Build(String assemblyName, String testName, Boolean autoSuites) en NUnit.Core.TestSuiteBuilder.BuildSingleAssembly(TestPackage package)
> en NUnit.Core.TestSuiteBuilder.Build(TestPackage package) en NUnit.Core.SimpleTestRunner.Load(TestPackage package) en NUnit.Core.ProxyTestRunner.Load(TestPackage package) en NUnit.Core.ProxyTestRunner.Load(TestPackage package) en NUnit .Core.RemoteTestRunner.Load(TestPackage package) en System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs) en System.Runtime .Remoting.Messaging.StackBuilderSink.PrivateProcessMessage(RuntimeMethodHandle md, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs) en System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg, Int32 methodPtr , 布尔 fExecuteInContext)
> 
> 在 [0] 处重新抛出异常： en System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) en System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) en NUnit.Core。 TestRunner.Load(TestPackage package) en NUnit.Util.TestDomain.Load(TestPackage package) en NUnit.Util.TestLoader.LoadTest(String testName)

有人知道我找不到什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:38:44.503

我发现（以一种非常容易解释的方式）问题是什么，解决方案是什么（或者更好地说是替代方案）。

问题是 NUnit 控制台运行程序（或 GUI 运行程序）在不同的环境下执行。我的意思是 a`Console Application`或 a`Winforms application`然后他们尝试加载一个`Windows Phone`库，这就是问题所在。

解决方案是使用 Re-Sharper、NCrunch、Visual NUnit 或类似的东西执行测试，而不是使用 NUnit 默认运行程序。

我正在使用 Visual NUnit。 [http://visualstudiogallery.msdn.microsoft.com/c8164c71-0836-4471-80ce-633383031099](http://visualstudiogallery.msdn.microsoft.com/c8164c71-0836-4471-80ce-633383031099)

:-)

问候并感谢所有阅读我的问题的人。

# java - 如何将加速器数据减少到两个十进制数字？

> ID：12998911
> 
> 赞同：0
> 
> 时间：2012-10-21T14:50:59.067
> 
> 标签：java, android, numbers, accelerometer, rounding

我正在尝试获取加速度计数据（xyz）并将其打印到显示器上。我已经有一些代码：

```
public void onSensorChanged(SensorEvent event) {

    float x = event.values[0];
    float y = event.values[1];
    float z = event.values[2];

    float deltaX = ((y * 10)/10);
    float deltaY = ((y * 10)/10);
    float deltaZ = ((z * 10)/10);;

    tv.setText(Float.toString(deltaX)+ ", " +Float.toString(deltaY)+ ", " +Float.toString(deltaZ));

    Log.v("SensorActivity", event.toString());

} 
```

但展出的仍然是 5.0972004 之类的数字，而不是 5.1 之类的数字。如何将浮点数四舍五入直到“两个十进制数”？任何的意见都将会有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:54:03.743

代替**Float.toString(deltaX)**，使用**String.format("%.2f", deltaX)**

# html - 评论评论标记（嵌套评论）

> ID：12998915
> 
> 赞同：3
> 
> 时间：2012-10-21T14:51:12.923
> 
> 标签：html

如何轻松注释和取消注释包含一些注释的大量 HTML 标记？

```
<body>
a lot of markups
 <!-- comment -->
a lot of markups
 <!-- comment -->
a lot of markups
</body> 
```

以下不能按预期工作（关闭 --> 停止评论部分）：

```
<body>
  <!-- 
    a lot of markups
     <!-- comment -->
    a lot of markups
     <!-- comment -->
    a lot of markups
   -->
</body> 
```

有没有替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:41:00.847

如果您在评论区没有`</style>`和`*/`标签，请使用：

```
<style>
/*
comment
*/
</style> 
```

如果您在评论区没有`</script>`和`*/`标签，请使用：

```
<script>
/*
comment
*/
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T14:54:12.193

不幸的是，关闭`-->`将停止评论部分。

您不能在 html 中原生嵌套评论 - [http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.4](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.4)

我所做的（尽管它不会完全“自动”阻止）是将 a 添加`/`到任何包含的评论的关闭中，如果我想将它们从一个部分中拉出，它只会使查找和替换变得更容易：

```
<div>
  <!-- 
    blah
    <!-- Blah --/>
    more blahs
  -->
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T15:03:22.313

这不能在 HTML 中完成。就像您不能在 C、C++ 或 Java 中嵌套多行注释一样。

# c# - 更新使用泛型的两个常用函数

> ID：12998916
> 
> 赞同：2
> 
> 时间：2012-10-21T14:51:19.713
> 
> 标签：c#, .net, generics

如果您需要测试另一个项目中的非公共属性，它会使用 Microsoft 单元测试向导创建 Accessor 对象。在我的单元测试中，我创建了辅助函数，这样我就不会在每个单元测试方法中重复相同的代码。目前我有两个几乎相同的测试，除了一个采用标准对象，另一个采用 Accessor 版本。由于访问器基于标准版本，我应该能够拥有一个功能，并且我认为我应该能够使用泛型来完成。问题是尝试重新输入和编译失败。

以下是现有的两个功能：

```
// Common function to create a new test record with standard Account object
internal static void CreateAccount(out Account account, bool saveToDatabase)
{
    DateTime created = DateTime.Now;
    string createdBy = _testUserName;

    account = new Account(created, createdBy);

    account.Notes = Utilities.RandomString(1000);

    if (saveToDatabase)
        account.Create();
}

// Common function to create a new test record with Account_Accessor
internal static void CreateAccount(out Account_Accessor account, bool saveToDatabase)
{
    DateTime created = DateTime.Now;
    string createdBy = _testUserName;

    account = new Account_Accessor(created, createdBy);

    account.Notes = Utilities.RandomString(1000);

    if (saveToDatabase)
        account.Create();
} 
```

我尝试将组合函数的签名更改为：

```
internal static void CreateAccount<T>(out T account, bool saveToDatabase) {...} 
```

但无法将 T 正确地重铸为 Account 或 Account_Accessor。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:00:22.323

由于这两种方法，您应该向泛型函数添加约束：

```
account.Notes = Utilities.RandomString(1000);
account.Create(); 
```

我建议您使用这两种方法添加一些接口，并将继承添加到您的两个类中。约束应该如下：

```
where T : YourNewInterface 
```

关于约束，您可以在[http://msdn.microsoft.com/en-us/library/bb384067.aspx上阅读](http://msdn.microsoft.com/en-us/library/bb384067.aspx)

**更新**

```
public interface IAccount
    {
        string Notes { get; set; }
        void Create();
        void Init(DateTime created, string createdBy);
    }

public class Account : IAccount
{
    public string Notes
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }

    public void IAccount.Create()
    {
        throw new NotImplementedException();
    }

    void IAccount.Init(DateTime created, string createdBy)
    {
        throw new NotImplementedException();
    }
}

public class Account_Accessor : IAccount
{

    string IAccount.Notes
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }

    public void IAccount.Create()
    {
        throw new NotImplementedException();
    }

    void IAccount.Init(DateTime created, string createdBy)
    {
        throw new NotImplementedException();
    }
}

class Program
{
    internal static void CreateAccount<T>(out T account, bool saveToDatabase) where T : IAccount,new()
    {
        DateTime created = DateTime.Now;
        string createdBy = _testUserName;

        account = new T();
        account.Init(created, createdBy);

        account = (T)Activator.CreateInstance(typeof(T), new object[] { created, createdBy });

        account.Notes = Utilities.RandomString(1000);

        if (saveToDatabase)
            account.Create();
    }
    static void Main(string[] args)
    {
        Account acc;
        Account_Accessor acc2;
        CreateAccount(out acc, false);
        CreateAccount(out acc2, false);
    }
} 
```

以下是关于我的示例的一些评论：
1\. 我已`CreateInstance`通过添加`new()`约束来替换。
2\. 由于.NET 泛型限制，new() 约束不能有参数，所以我`Init()`在接口中添加了方法`IAccount`。
3.`Init`方法不应该被`Account`类的客户端代码调用，这就是为什么我们将方法定义为私有的，并明确地为IAccount。
4\. 由于`new()`约束，您应该为`Account`. 如果您这样做，您的客户端代码不应调用此无参数 ctor。

至于我，我会`Activator.CreateInstance`原样离开。对于通用`new()`约束的限制，这是一个很好的解决方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:01:55.317

Here's my take on making that method generic.

```
public abstract class BaseAccount
{
    public string Notes;

    public virtual void Create() { ... }
}

public class Account : BaseAccount { ... }

public class Account_Accessor : BaseAccount { ... }

internal static void CreateAccount<T>(out T account, bool saveToDatabase) where T : BaseAccount
{
    DateTime created = DateTime.Now;
    string createdBy = _testUserName;

    account = (T)Activator.CreateInstance(typeof(T), new object[] { created, createdBy });

    account.Notes = Utilities.RandomString(1000);

    if (saveToDatabase)
        account.Create();
} 
```

I assume that Account and Account_Accessor are similar enough that they can share a similar class hiearchy, or could implement the same interface. In this example, I've provided an abstract class from which they both derive, but it is very easy to do it with an interface instead. However, the full implementation will have to be done in both class.

Knowing that, I can constraint the generic method so that T is only a child of BaseAccount. This way, I can access member from that base class without knowing the real type of T.

# r - 数据框中的浮动行指示器

> ID：12998917
> 
> 赞同：2
> 
> 时间：2012-10-21T14:51:20.867
> 
> 标签：r, dataframe, rbind

我正在尝试将一行附加到 R 中的现有数据框。数据框代表一个主题，我想用新（生成的）数据更新它。当我运行它时，数据框的索引号变得奇怪：

1、2、21、211、2111、21111等

这些都不实用。如何获得“正常”的索引号？（1、2、3、4 等）。

```
x <- 10
y <- 463
dat <- data.frame(x,y)

for (i in 1:10) {
dat.sub <- dat[nrow(dat),]       # select the last row from 'dat'
dat.sub <- within(dat.sub, {     # within that selection update the objects
    x <- x+1
    y <- y+1
})
dat <- rbind(dat, dat.sub, deparse.level = 2)   # attach updated row to the 'dat'
}

dat
dat[3,] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:00:11.987

我认为问题是`dat.sub`有`data.frame`类并且在第二行之后具有相同的索引号。最简单的方法是更改​​类`dat.sub`而不分配任何索引。一种方法是：

```
dat.sub <- c(within(dat.sub, {     # within that selection update the objects
    x <- x+1
    y <- y+1
})) 
```

`c`在你的`for`循环中添加一个，`dat.sub`作为一个向量。

# java - 从 Android 将图像发布到 wcf 休息服务

> ID：12998918
> 
> 赞同：2
> 
> 时间：2012-10-21T14:51:22.283
> 
> 标签：java, android, post, http-post

我在将图像发布到我的 wcf 休息服务时遇到问题。我发布了一些参数，其中一个是 base64 utf-8 编码字符串（图像）。

我的问题是每次我发布我都会收到“错误请求”。这是代码

```
public String PostImage(Drawable img) throws Exception 
{
    HttpPost httpost = new HttpPost("http://10.0.2.2:1374/uploaditem");
    JSONStringer json = JSONStringer()
        .object()
        .key("ipm")
            .object()
                .key("name").value("test")
                .key("description").value("asfa")
                .key("categoryid").value(1)
                .key("data").value(ConvertImgToBase64Str(img))
                .key("imagetype").value(2)
                .key("tags").value("test;test")
            .endObject()
         .endObject();

    StringEntity entity = new StringEntity(json.toString());
    entity.setContentType("application/json;charset=UTF-8");//text/plain;charset=UTF-8                  
    entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,"application/json;charset=UTF-8"));
    httpost.setEntity(entity); 
    return ExcecutePostRequest(httpclient,httpost);
}

//Method to convert the image to base64encoded string
private String ConvertImgToBase64Str(Drawable img) {
    Bitmap bitmap = ((BitmapDrawable)img).getBitmap();
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] bitmapdata = stream.toByteArray();
    return Base64.encodeToString(bitmapdata, Base64.URL_SAFE);
} 
```

它与编码字符串有关，但是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:03:22.983

我不明白为什么它应该是编码字符串的问题。

首先，尝试删除字符串对象中的数据属性，看看是否会遇到同样的问题。通过这种方式，您可以消除由编码引起的可能性，并确保您正确地发出请求。

其次打印正在发送的http消息并对其进行格式检查。如果您有权访问服务器，请记录收到的消息以及可能详细说明的任何详细信息`Bad Request`。如果 WCF 响应错误请求，我会认为 WCF 会向 stderr 打印一些内容，因此请先尝试检查现有日志。

**编辑**

我不认为奇怪字符应该有问题，因为base64编码中使用的字符不超出ASCi范围。

您应该检查正在发送的请求的大小。如果你的图片很大，你会得到一个很大的 base64 编码字符串，它可能会超过服务器发布限制。

如果您无法访问服务器日志，我认为如果这是问题所在，您可以通过发送较小的图像来测试它。

# java - 修改 ArrayList 中的对象

> ID：12998920
> 
> 赞同：0
> 
> 时间：2012-10-21T14:51:46.997
> 
> 标签：java, database, arrays, oop, arraylist

我需要一个动态的对象“数据库”，经过一些研究，决定使用 ArrayList。但是，我无法使用以下代码修改数组列表：

```
public static ArrayList cprofiles;
...
cprofiles = new ArrayList();
...
...
Customer newc = new Customer (lna, fna, sinum, year, month, day);
cprofiles.add (newc); 
```

在此声明之后，我尝试使用以下格式调用对象中的方法，`cprofiles.get(0).getName()`但我收到一条错误消息

> 找不到符号（指向 .getName()）

当我尝试编译程序时。我花了大约一个小时研究在 ArrayList 中修改它的正确方法，但我发现的来源似乎表明我所做的确实是正确的。请帮助我发现我的错误以及如何解决它。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T14:55:02.137

您应该使用 ArrayList 的通用版本，而不是原始版本：

```
List<Customer> cprofiles = new ArrayList<Customer>(); 
```

如果您只使用`ArrayList`，编译器不知道您的列表包含什么，因此所有内容都被视为`Object`. 因此，您需要将返回的对象转换为其实际类型：

```
Customer c = (Customer) list.get(0); 
```

# c# - Jabbr 的 SignalR/Hubs 给出 404 错误

> ID：12998923
> 
> 赞同：0
> 
> 时间：2012-10-21T14:52:06.970
> 
> 标签：c#, signalr

我有两个项目；MVC 4 和 JabbR (WebForms)。我正在做集成发布，所以我在我的 MVC 4 项目中添加了 JabbR 作为参考。我编写了批处理文件将所有标记复制到我的项目并带来配置，到目前为止一切都很好。

现在，我尝试运行该应用程序。但是信号器/集线器不可用。我正在使用 IIS 8。无法检测到问题！！！为什么！？

我还检查了[https://github.com/SignalR/SignalR/wiki/Faq中的常见问题解答](https://github.com/SignalR/SignalR/wiki/Faq)

什么都没发生？！？！？！：（ 请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:17:21.207

我的问题在此链接中已回答

[https://github.com/davidfowl/JabbR/issues/599](https://github.com/davidfowl/JabbR/issues/599)

> “JabbR 是一个独立的应用程序。它并不意味着以您上面描述的方式集成”，由 samandmoore

# python - 在初始化之前禁用`__setattr__`的干净方法

> ID：12998926
> 
> 赞同：18
> 
> 时间：2012-10-21T14:52:41.313
> 
> 标签：python, python-3.x, setattr

我编写了以下包装类。我想定义`__setattr__`它以将所有属性重定向到包装类。但是，这会阻止我初始化包装类。有什么优雅的方法来解决这个问题吗？

```
class Wrapper:
    def __init__(self, value):
        # How to use the default '__setattr__' inside '__init__'?
        self.value = value

    def __setattr__(self, name, value):
        setattr(self.value, name, value) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-21T15:05:16.710

您正在捕获所有分配，这会阻止构造函数分配`self.value`. 您可以使用`self.__dict__`来访问实例字典。尝试：

```
class Wrapper:
    def __init__(self, value):
        self.__dict__['value'] = value

    def __setattr__(self, name, value):
        setattr(self.value, name, value) 
```

另一种使用方式`object.__setattr__`：

```
class Wrapper(object):
    def __init__(self, value):
        object.__setattr__(self, 'value', value)

    def __setattr__(self, name, value):
        setattr(self.value, name, value) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-20T19:00:01.070

[此处](https://stackoverflow.com/a/16426447)介绍了一种在初始化后禁用`__setattr__`until 而不更改方法中的`self.value = value`语法的`__init__`方法。简而言之，在对象中嵌入初始化知识，并在方法中使用它。对于您的：`__setattr__``Wrapper`

```
class Wrapper:
    __initialized = False
    def __init__(self, value):
        self.value = value
        self.__initialized = True

    def __setattr__(self, name, value):
        if self.__initialized:
            # your __setattr__ implementation here
        else:
            object.__setattr__(self, name, value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T13:54:16.673

也`__getattr__`被覆盖::

```
class Wrapper:
    def __init__(self,wrapped):
        self.__dict__['wrapped'] = wrapped
    def __setattr__(self,name,value):
        setattr(self.__dict__['wrapped'],name,value)
    def __getattr__(self,name):
        return getattr(self.__dict__['wrapped'],name)

class A:
    def __init__(self,a):
        self.a = a

wa = Wrapper(A(3))
#wa.a == wa.wrapped.a == 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-03T01:48:46.857

正如其他答案中所建议的，一种想法是直接访问对象字典以绕过`setattr`解析。

为了便于阅读，我建议以下内容：

```
 def __init__(self,wrapped1, wrapped2):
       vars(self).update(dict(
          _wrapped1=wrapped1,
          _wrapped2=wrapped2,
        )) 
```

使用[vars](https://docs.python.org/3/library/functions.html#vars)是可选的，但我发现它比直接访问更好`self.__dict__`，并且内联`dict()`表示法允许将所有实例变量初始化分组在一个可见块中，并且样板代码开销最小。

# javascript - jQuery防止目标父DIV内的链接默认

> ID：12998927
> 
> 赞同：0
> 
> 时间：2012-10-21T14:52:41.577
> 
> 标签：javascript, jquery, jquery-events, zepto

我有以下标记：

```
<div id="someID" class="target-class">
   ....
   <a href="#page1">
     ....
   </a>
</div> 
```

我正在使用 Zepto 定位“目标类”以应用双击，但我不希望触发链接。这是我的 JS 代码：

```
$(document).ready(function() {
    $(".target-class").live("doubleTap", function(e) {
         e.preventDefault();
         e.stopPropagation();

         var a = $(this).attr("id");

         // do something here
    });

    $("a").live("click", function(e) {
         // do something with all my links
    });
}); 
```

然而，所有这些都会触发链接并更改 URL 模式（我使用的是 pushState）。

这也发生在 iOS 和 Android 的 Mobile Safari 上。

有什么指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:18:59.943

我能够使用以下代码使其工作。基本上，您必须捕获并丢弃“常规”点击事件（确保停止传播并防止默认行为） - 这将停止默认链接行为。然后使用“singleTap”和“doubleTap”事件处理程序来捕获和响应所需的事件。我在 iOS 6 上的 Safari 和 Android 4.1 上的 Chrome 上对此进行了测试。

```
<!DOCTYPE html>
<html>
<head>
    <title>test doubletap</title>
    <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no;" />

</head>

<style>
    body {
        font-size: 200%;
    }
    a {
        background-color: yellow;
    }
</style>
<body>

<div id="someID" class="target-class" style="height:200px;">
    text here in the div
    <a href="#page1">page1</a>
    <a href="#page2">page2</a>
    <a href="#page3">page3</a>
    more text here in the div
</div>

<div id="output"></div>

<script src="zepto.js"></script>
<script>

function log(input) {
    var html = $("#output").html();
    $("#output").html( html + "<br/>" + input.toString() );
}

$(document).ready(function() {
    $(".target-class").on("doubleTap", function(e) {
        //handle the double-tap event

        var a = $(this).attr("id");
        log(e.type + " - " + a);

        e.stopPropagation();
        e.preventDefault();
        return false;
    });

    $("a").on("click", function(e) {
        //throw away all link "click" events to prevent default browser behavior
        e.stopPropagation();
        e.preventDefault();
        return false;
    });

    $("a").on("singleTap", function(e) {
        //handle the single click and update the window location hash/fragment

        var a = $(event.target);
        var href = a.attr("href");
        log( e.type + ": " + href );
        window.location.hash = href;

        e.stopPropagation();
        e.preventDefault();
        return false;
    });
});
</script>

</body>
</html> 
```

# html - 动态改变div的背景图案

> ID：12998928
> 
> 赞同：0
> 
> 时间：2012-10-21T14:53:02.487
> 
> 标签：html, dom

我正在编写一个日程安排应用程序，其中我将列作为人员，将行作为间隔（30 分钟）。

我需要一个背景图案：背景必须每 30 分钟有一条水平虚线，每 1 小时有一条直线。

整张桌子的高度不是固定的，它取决于屏幕分辨率的高度，所以使用背景图像是不可能的，至少我是这么认为的。

我需要将 div 放置在列的顶部，因为它们的高度和位置不固定。我需要 7X48 表格，但问题是我实际上并不需要表格，因为我不能使用它的行，因为我的单元格没有固定高度，它们甚至可能重叠。

有什么方法可以让我只用 7 个 div 作为列来实现我的目标，但在不使用表格的情况下仍然有我的背景图案？

如果我能做到这一点，我想我会放弃 DOM，因为我创建了超过 336 个节点，而我只需要 7 个。

**编辑：**

jsfiddle.net/Qufzm - 这是我的背景图案的简化版本。我想使用 float:left 仅使用列 div 来实现相同的效果，并且可能避免使用表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:45:01.810

[Masonry](http://masonry.desandro.com/index.html)（jQuery 插件）可能很有用。

可以说我有以下html：

```
<div id="container">
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
    <div class="item">...</div>
</div>​ 
```

Javascript 可用于控制列的宽度和高度以及许多其他选项。

JS代码：

```
$(function() {
    $('#container').masonry({
        // options
        itemSelector: '.item',
        columnWidth: 100,
        isAnimated: true
    });
});​ 
```

样品[小提琴](http://jsfiddle.net/Dr3JJ/)。查看砌体现场的[演示](http://masonry.desandro.com/demos/adding-items.html)。

# android - 如何解决错误代码= 1，msg =靠近“，”：android中sqlite中的语法错误

> ID：12998929
> 
> 赞同：3
> 
> 时间：2012-10-21T14:53:03.487
> 
> 标签：android, android-sqlite

我正在使用 Android 制作时间表应用程序。我是初学者，对数据库编程知之甚少。

下面是我正在使用的数据库的代码：

```
public class TsData{

    private static final String TS_DATABASE = "timesheetdb";
    private static final int DATABASE_VERSION = 1;
    private static final String TS_TABLE = "database";

    public static final String ROW_ID = BaseColumns._ID;
    public static final String PROJ_NAME = "projname";
    public static final String START_TIME = "stime";
    public static final String DATE = "date";
    public static final String STOP_TIME="";
    public static final String ACT_NAME = "actname";
    public static final String TOTAL_TIME = "ttime";

    private DBhelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDataBase;

    private static class DBhelper extends SQLiteOpenHelper{
        public DBhelper(Context context) {
            super(context, TS_DATABASE, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            String sql = "CREATE TABLE " + TS_TABLE + "(" + ROW_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                + ACT_NAME + " TEXT NOT NULL, "
                + DATE + " TEXT NOT NULL, " 
                + START_TIME + " TEXT NOT NULL, "
                + STOP_TIME + " TEXT NOT NULL" + ");";
            db.execSQL(sql);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + TS_TABLE);
            onCreate(db);
        }
    }

    public TsData(Context c){
        ourContext=c;
    }

    public TsData open()throws SQLException{
        ourHelper = new DBhelper(ourContext);
        ourDataBase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourHelper.close();
    }

    public long insertEntry(String act_name2, String startDate, String startTime, String stopTime) {
        ContentValues values = new ContentValues();
        values.put(ACT_NAME, act_name2);
        values.put(DATE, startDate);
        values.put(START_TIME, startTime);
        values.put(STOP_TIME, stopTime);
        System.out.println("record inserted");
        return ourDataBase.insert(TS_TABLE, null, values);
    }

    public String getData() {
        // TODO Auto-generated method stub
        String[] columns = new String[]{ROW_ID, ACT_NAME, DATE, START_TIME, STOP_TIME};
        Cursor cr = ourDataBase.query(TS_TABLE, columns, null, null, null, null, null);
        String result="";

        int iRow=cr.getColumnIndex(ROW_ID);
        int iName=cr.getColumnIndex(ACT_NAME);
        int istartTime=cr.getColumnIndex(START_TIME);
        int istopTime=cr.getColumnIndex(STOP_TIME);
        int iDate=cr.getColumnIndex(DATE);

        for(cr.moveToFirst();!cr.isAfterLast();cr.moveToNext()) {
            result=result+cr.getString(iRow)+"  "
                +cr.getString(iName)+"  "
                +cr.getString(iDate)+"  "
                +cr.getString(istartTime)+"  "
                +cr.getString(istopTime)+"\n";
        }
        return result;
    }

    public void deleteEntry(long rowNo) {
        // TODO Auto-generated method stub
        ourDataBase.delete(TS_TABLE, ROW_ID + "=" + rowNo, null);
    }
} 
```

但是当我在表中插入记录时出现以下错误：

> 10-21 20:33:11.044: I/Database(6597): sqlite 返回: 错误代码 = 1, msg = near ",": 语法错误

我已经仔细检查了所有语法，但没有得到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:23:00.260

公共静态最终字符串 STOP_TIME=""; ？？？为 STOP_TIME 使用一些值。

或者

```
CREATE TABLE   TS_TABLE  (  ROW_ID   INTEGER PRIMARY KEY AUTOINCREMENT, 
         ACT_NAME   TEXT NOT NULL, 
         DATE   TEXT NOT NULL,  
         START_TIME   TEXT NOT NULL ); 
```

# html - HTML5 代码中的 ID 标记

> ID：12998933
> 
> 赞同：1
> 
> 时间：2012-10-21T14:53:18.980
> 
> 标签：html

如果这是一个正确的代码，我会担心

```
<article>
   <section></section>
   <section id="section2"></section>
</article>

<article id="article2">
   <section></section>
   <section id="section2"></section>
</article> 
```

所以我的问题是我可以在新的 html5 代码中使用 id 标签吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:56:50.817

`id`是一个属性，而不是一个标签。它可以用于*任何*元素。所以是的，您发布的代码在语法上是有效的。但是，**ID 必须是唯一的**。因此，您发布的代码无效，因为您重复使用了 ID `section2`。

作为建议，这可以比通过 Stack Overflow 更容易地得到答案：只需使用[W3C Validator](http://validator.w3.org/) - 如果您使用无效的 HTML 提供它，它会抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T16:00:57.997

我知道我迟到了，但这个问题需要进一步澄清，我当然也会回答。

**澄清：**

HTML 不是代码，是**标记**。CSS 和 JavaScript 是代码。CSS 也被称为“样式表语言”。

**回答：**

与 ThiefMaster 所说的没有什么不同的答案：“id”不是标签，是属性。

换句话说，如果“id”是一个标签，它看起来像这样：`<id>`，并且不存在，即使在 HTML5 中也不存在。我不希望 W3C 提出这样的标签，但是，永远不要说永远......：p

查看 CSS-Tricks.com 中关于[ID 和类之间的区别的](http://css-tricks.com/the-difference-between-id-and-class/)这篇文章。

# javascript - Strange javascript bug

> ID：12998936
> 
> 赞同：0
> 
> 时间：2012-10-21T14:53:32.207
> 
> 标签：javascript

Pls look at the following code: html...

```
 <pre id='output'></pre> 
```

html...

JS

```
 function log(text) {
    var div = document.getElementById('output');
    div.innerHTML += text + '\n';
 }

function foo() {

    var browser=0;
    if(navigator.appName.toUpperCase()=="MICROSOFT INTERNET EXPLORER")
        browser=1;
    else
    if(navigator.appName.toUpperCase()=="NETSCAPE")
        browser=2;
    log ('browser:'+browser);
    if (browser==1)
    {
        log ('IE');
    }
    if (browser==2);
    {
        log ('Chrome');
    }

    if (browser==0);
    {
            log ('Could not determine broweser type');
            return;
    }
  } 
```

* * *

When I run this from IE the output is: browser:1 ie not supported Chrome extension will be loaded Could not determine broweser type

When I run it from Chrome the output is: browser:2 Chrome extension will be loaded Could not determine broweser type

* * *

How can it be that browser has more than one value? 10xs, Nir

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T14:59:46.403

You have a very beginners mistake in your code

The `;` at the end of the if `if (browser==0);` causes your if condition to end and the rest is a normal code block which gets executed every time no matter the value of `browser`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:00:16.153

You should not put `;` after an `if` statement: `if (browser==2);`

# java - 使用 Hibernate 返回空间数据

> ID：12998937
> 
> 赞同：4
> 
> 时间：2012-10-21T14:53:43.050
> 
> 标签：java, hibernate

我正在尝试使用 Hibernate Spatial 库（http://www.hibernatespatial.org/）使用这种 WORKING 方法从数据库中返回空间数据（即点）...

```
 ... 
    Session session = sessionFactory.openSession();
    Query query = session.createQuery("select location, distance(location, :requestPoint) from "+Event.class.getName());
    query.setParameter("requestPoint", requestPoint);

    List<?> rows = query.list();
    session.close();

    List<Event> events = new ArrayList<Event>();

    for (Iterator<?> it = rows.iterator(); it.hasNext(); ) {
       Object[] row = (Object[]) it.next();

       Event event = new Event();
       event.setLocation((Point) row[0]);
       event.setDistance((Double) row[1]);

       events.add(event);
    }

    return events; 
```

但我想使用这样的东西（在选择语句中使用事件类构造函数）......

```
 Session session = sessionFactory.openSession();
    Query query = session.createQuery("select new Event(location, distance(location, :requestPoint)) from "+Event.class.getName());
    query.setParameter("requestPoint", requestPoint);

    List<Event> rows = query.list();
    session.close();

    return rows; 
```

问题是第二种方法给了我以下异常......

```
org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.jaygridley.aet.Event] [select new Event(location, distance(location, :requestPoint)) from com.jaygridley.aet.domain.Event] 
```

但我不明白为什么，因为在我的 Event 类中我有一个构造函数......

```
public Event(Point location, Double distance) {
    this.location = location;
    this.distance = distance;
} 
```

为清楚起见，事件类具有以下属性...

```
@Column(name="LOCATION", columnDefinition = "MDSYS.SDO_GEOMETRY", nullable = false)
@Type(type = "org.hibernate.spatial.GeometryType")
private Point location;

private Double distance; 
```

我检查了 Hibernate 返回的每一列的返回类，它匹配 Point 和 Double。有谁知道我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:05:12.703

我唯一的猜测是您的事件构造函数签名是`Event(Point, Double)`并且自动装箱不起作用，因为您正试图像这样实例化它，`Event(location, distance(location, :requestPoint))`其中 args 解析为距离（点，双）。

我一直在检查您正在使用的函数，它[返回](http://www.hibernatespatial.org/)a `double`not a `Double`。

您可以尝试使用 "`select new Event(location, new Double(distance(location, :requestPoint)))`但不能确定。

也可以是该函数需要2个Geometry作为参数，但我不能说它是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:20:26.467

我怀疑构造函数调用中的 :requestPoint 查询参数是主要问题。要对其进行测试，请尝试在其中放置一个实际的 double 值，看看它是否会编译。例如：

```
 Query query = session.createQuery("select new Event(location, 2.0) from "+Event.class.getName()); 
```

只是看看。如果是这样，则可能意味着编译器在评估 distance() 函数的返回类型之前尝试评估构造函数的签名。不幸的是，如果是这种情况，我无法建议如何纠正这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:57:24.937

通过在构造函数中使用 Object 而不是 Point 作为位置参数并随后在构造函数主体中转换为 Point 来解决。

# android - 如何使用开源 Android 应用程序代码

> ID：12998942
> 
> 赞同：0
> 
> 时间：2012-10-21T14:54:22.270
> 
> 标签：android, open-source

我想基于另一个可通过 Google Code 开源的项目构建一个新的 Android 项目。我已经通过 svn 下载了代码并在 Eclipse 中加载了测试它。但是现在，当我尝试在安装了原始应用程序的手机上运行代码时，出现“由于不同的应用程序签名导致重新安装失败”错误。

我必须在我的分支的应用程序首选项中进行哪些更改才能使其成为与源应用程序无关的新的独立应用程序，以便两者都可以一起安装？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:58:45.430

您需要卸载开源应用程序的原始版本。一旦您从本地 Eclipse 运行它，它将使用与原始密钥不同的调试密钥 - 因此会出现签名错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:08:14.017

尝试生根手机，然后使用 adb 卸载系统应用程序，然后安装您的自定义应用程序

# java - 聊天客户端一次只打印 1 行

> ID：12998947
> 
> 赞同：2
> 
> 时间：2012-10-21T14:55:03.607
> 
> 标签：java, sockets

我正在编写一个多线程聊天服务器/客户端，我一直在使用 SocketTest V 3 来测试服务器，它似乎工作正常，但是当我写一个新行时，我写的客户端只在控制台中更新，我正在使用我的自己的客户端针对套接字测试，每次写入内容时套接字都会更新，但我的客户端没有

```
public class clientV2 {

public static final int PORT = 5019;
public static InetAddress host;

public static void main(String[] args) throws IOException {

    try {
        host = InetAddress.getLocalHost();
        Socket socket = new Socket(host, PORT);

        Scanner in = new Scanner(System.in);

        Scanner inputFromServer = new Scanner(socket.getInputStream());

        PrintWriter outputToServer = new PrintWriter(socket.getOutputStream());

        while(true) {
            if(inputFromServer.hasNext()) {
                System.out.println(inputFromServer.nextLine());
            }

            String input = in.nextLine();
            outputToServer.println(input);
            outputToServer.flush();

        }

    } catch (Exception e) {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:07:02.823

你的客户端调用[`nextLine()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)它的扫描器，这个方法，正如它的名字所表明的，返回下一行。因此，在完整的下一行可用之前，您的客户无法打印任何内容。

这是javadoc所说的`nextLine()`：

> 将此扫描器前进到当前行并返回被跳过的输入。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。
> 
> 由于此方法继续搜索输入以查找行分隔符，因此如果不存在行分隔符，它可能会缓冲所有搜索要跳过的行的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:08:06.563

这是因为`System.out.println(inputFromServer.nextLine());`正是这样做的。它等待一整行，然后将其打印出来。它不会打印部分行。

如果输出丢失的不仅仅是最后一个部分行（换行到换行；换行不计算在内），请沿途查找缓冲区。

您可以使用 an[`InputStreamReader`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html)从输入流（这是一个字节流）中读取单个字符。您可以在构造函数中指定字符集。

```
InputStreamReader inputFromServer = 
  new InputStreamReader(socket.getInputStream(), "UTF-8");

System.out.print((char) inputFromServer.read()); 
```

# ios - 创建和打开数据库 xCode 4.5

> ID：12998949
> 
> 赞同：0
> 
> 时间：2012-10-21T14:55:20.737
> 
> 标签：ios, xcode, mobile

所以我是 XCode 的新手，我想使用 Sqlite3 将我的数据存储在数据库中。我有一个类用户，我有这个方法。

```
-(void)createOrOpenDB
{
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docPath = [path objectAtIndex:0];
    dbPathString = [docPath stringByAppendingPathComponent:@"users.db"];
    char *error;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    if([fileManager fileExistsAtPath:dbPathString] == NO)
    {
        const char *dbPath = [dbPathString UTF8String];
        if(sqlite3_open(dbPath, &userDB)==SQLITE_OK)
        {
            const char *sql_stmt = "CREATE TABLE IF NOT EXISTS USERS (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, PASSWORD TEXT, CONFIRM TEXT, EMAIL TEXT)";
            sqlite3_exec(userDB, sql_stmt, NULL, NULL, &error);
            sqlite3_close(userDB);
        }
    }
} 
```

但我还有另一个类，我想创建另一个表。但它不起作用，因为这种方法说数据库已经存在。

我怎样才能在另一个类中打开该数据库来创建一个新表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:28:05.360

假设您继续使用 sqlite，最好使用一个方法来打开或创建数据库。如果创建了数据库，则整个模式都会立即创建。现在您的所有类都可以调用单个方法。

这将使现在和以后的事情变得更加容易。有时，您的计划可能会改变。也可以编写这种方法来根据需要更新模式。

# php - PHP分页不更新结果

> ID：12998951
> 
> 赞同：1
> 
> 时间：2012-10-21T14:55:33.820
> 
> 标签：php

我正在创建一个在 Twitter 上列出名人的页面。该页面显示了第一个循环应该显示的 10 个不同结果，但它似乎没有更新 $result 以从数据库中提取接下来的 10 个值（用于下一组页面等）。

```
<?php

    // connect to the database
    $con = mysql_connect("localhost","someuid","somepwd");
      if (!$con)
        {
        die('Could not connect: ' . mysql_error());
        }

    mysql_select_db("celebrity_twitter", $con);

    $result = mysql_query("SELECT * FROM celebrities");

    // number of results to show per page
    $per_page = 10;

    $total_results = mysql_num_rows($result);
    $total_pages = ceil($total_results / $per_page);

    // check if the 'page' variable is set in the URL (ex: view-paginated.php?page=1)
    if (isset($_GET['page']) && is_numeric($_GET['page']))
    {
            $show_page = $_GET['page'];

            // make sure the $show_page value is valid
            if ($show_page > 0 && $show_page <= $total_pages)
            {
                    $start = ($show_page -1) * $per_page;
                    $end = $start + $per_page; 
            }
            else
            {
                    // error - show first set of results
                    $start = 0;
                    $end = $per_page; 
            }               
    }
    else
    {
            // if page isn't set, show first set of results
            $start = 0;
            $end = $per_page; 
    }

    // display data in table
    echo "<table class='table table-striped'>";
    echo "<tr> <th>Avatar</th> <th>Celebrity Name</th> </tr>";

    // loop through results of database query, displaying them in the table
    for($i = $start; $i < $end; $i++ && $row = mysql_fetch_array($result) )
    {
            // make sure that PHP doesn't try to show results that don't exist
            if ($i == $total_results) { break; }

            // echo out the contents of each row into a table
            echo "<tr>";
            echo "<td><img height='73' width='73' src=" . "http://api.twitter.com/1/users/profile_image?screen_name=" . $row['avatar'] . "&size=bigger></td>";
            echo "<td><a href=" . $row['url'] . " target='_blank'>" . $row['uid'] . "</td></a>";
            echo "</tr>"; 
    }
    // close table>
    echo "</table>";

     // display pagination
    echo "<strong>Page: </strong>";
    for ($i = 1; $i <= $total_pages; $i++)
    {
            echo "<a href='index.php?page=$i'>$i</a> ";
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:10:29.550

我现在正在使用它，它对我来说工作得很好，我希望它也对你有用：[PHP Pagination](http://www.phpeasystep.com/phptu/29.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:27:52.507

您没有将自己定位在数据库中，您总是阅读第一个元素：

```
// loop through results of database query, displaying them in the table
for($i = $start; $i < $end; $i++ && $row = mysql_fetch_array($result) )
{
        // make sure that PHP doesn't try to show results that don't exist
        if ($i == $total_results) { break; } 
```

这样做的正确方法是使用`LIMIT`MySQL 的子句，带有一个用于恢复真实记录数的特殊子句

```
SELECT SQL_CALC_FOUND_ROWS * FROM celebrities LIMIT $start, $resultsperpage;

SELECT FOUND_ROWS(); // This is number of celebrities 
```

这意味着您需要在运行查询“之前”计算 $start，即“之前”您知道 $start 是否是一个有效的开始。所以你必须为没有返回行的情况做准备。

一个*非常浪费的***快速**替代方法是检索所有内容并只显示想要的行：

 *```
// loop through results of database query, displaying them in the table
for ($i = 0; $i < $total_results; $i++)
{
    $row = mysql_fetch_array($result);
    if ($i < $start) continue;
    if ($i == $end) break; 
```

## 限制实施

```
mysql_select_db("celebrity_twitter", $con);

// number of results to show per page
$per_page = 10;

// We REALLY ought to move on to PDO: mysql_* will be deprecated sooner or later
$query    = mysql_query('SELECT SQL_CALC_FOUND_ROWS * FROM celebrities');

// check if the 'page' variable is set in the URL (ex: view-paginated.php?page=1)
if (isset($_GET['page']) && is_numeric($_GET['page']))
{
        $show_page = (int)$_GET['page'];
        // make sure the $show_page value is valid
        if ($show_page > 0)
                $start = ($show_page -1) * $per_page;
        else
                $start = 0;
        $query .= " LIMIT $start, $per_page;";
    $paged = True;
}
else
{
    $paged = False;
    // The query having no LIMIT, it will retrieve everything
    // if (!$paged), later we will display a link "Show Paged".
}

// Now run the query
$result = mysql_query($query);

// Also fetch REAL number of rows in table {{{
$exec   = mysql_query("SELECT FOUND_ROWS() AS results;");
$tuple  = mysql_fetch_assoc($exec);
$results= $tuple['results'];
mysql_free_result($exec);
unset($exec, $tuple);
// }}}

// If paging, calculate page number. Later, if ($paged), we'll display the pager.
if ($paged)
{
    $maxpages = ceil($results / $per_page);
    if ($page > $maxpages)
        $page = $maxpages+1; // We fetch nothing.
    else
        $page = floor($start / $per_page)+1;
}

// display data in table. It is best to calculate $html first
// and then output it all together at end if no error.

$html = "<table class='table table-striped'>";
$html .= "<tr> <th>Avatar</th> <th>Celebrity Name</th> </tr>";

// loop through results of database query, displaying them in the table
// Here, we get all and only good results, so we need not check anything
while($row = mysql_fetch_array($result))
{
        // echo out the contents of each row into a table
        $html .= "<tr>";
} 
```*

# windows-phone-7 - Windows Phone - 隔离存储 - 获取目录大小

> ID：12998953
> 
> 赞同：1
> 
> 时间：2012-10-21T14:55:59.103
> 
> 标签：windows-phone-7, size, isolatedstorage

如何在 IsolatedStorage 中获取目录大小？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T19:02:37.993

没有 API 可以获取隔离存储中特定目录的总大小。因此，您唯一的选择是浏览文件并手动计算总大小。

编辑：这是一个示例实现：

```
long total = 0;

using (var isolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
{
    string folder = "folder/";

    foreach (var fileName in isolatedStorage.GetFileNames(folder))
    {
        using (var file = isolatedStorage.OpenFile(folder + fileName, FileMode.Open))
        {
            total += file.Length;
        }
    }
}

MessageBox.Show(total + " bytes"); 
```

# php - 私人测试版和仅邀请使用 Facebook 身份验证的应用程序启动

> ID：12998955
> 
> 赞同：2
> 
> 时间：2012-10-21T14:56:10.070
> 
> 标签：php, python, facebook-graph-api

我们有一个应用程序计划进行私人测试版发布的场景。此外，应用程序只能通过 facebook 工具登录。

根据应用程序工作流程，我们最初将向几个选定的用户发送邀请，然后他们将使用 facebook 进行身份验证。经过身份验证的用户可以在应用程序上下文中与他们的 facebook 联系人建立连接。当他们建立这些连接时，应用程序将发送仅对用户的已连接联系人可见的邀请。然后，受邀联系人可以使用 facebook auth 登录应用程序。

我尝试过的以及问题出在哪里：

1.  **通知：**根据[facebook 文档](https://developers.facebook.com/docs/channels/#requests)，只有画布应用程序可以发送轻量级通知。即使我们决定在 facebook 画布中启动应用程序，也只能通过用户生成的请求（即通过请求对话框）将通知发送给用户联系人（那些尚未授权应用程序的联系人）。这不符合应用程序的要求和需求，即每次用户与其联系人建立连接时显示一个请求对话框对我们来说似乎不是一个很好的用户体验。
2.  **墙帖：**另一种可能性是在联系人墙上张贴邀请。但是，facebook 似乎没有提供控制联系人墙上[发布的提要的隐私的能力。](https://developers.facebook.com/docs/reference/api/user/#posts)文档说`Post privacy settings (can only be specified if the Timeline being posted on belongs to the User creating the Post)`

是否有合法的方式在私人测试版/邀请下启动应用程序仅使用 facebook 身份验证机制？由于应用程序针对特定类型的用户组，我们希望控制谁可以尝试该应用程序。

# php - PHP如何限制域发送POST请求

> ID：12998973
> 
> 赞同：0
> 
> 时间：2012-10-21T14:59:27.453
> 
> 标签：php, code-access-security

我需要限制来自特定域的 POST 请求。据我所知，HTTP_REFERER 检查不是一个好的解决方案，因为它可以被欺骗。那么，当来自不同技术和 Web 服务器的两个不同网站一起工作时，什么是好的解决方案呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:53:12.210

这是您可以尝试的一种方法，方法是在表单中添加一个隐藏字段，该字段是在服务器端设置的会话值。这样，如果表单不是来自您的服务器，则不会设置会话并且值将不匹配。

例子：

```
<?php 
session_start();

if($_SERVER['REQUEST_METHOD']=='POST'){
    if(isset($_SESSION['security']) && 
       isset($_SESSION['security_key']) && 
       !empty($_POST[$_SESSION['security_key']]) && 
       $_POST[$_SESSION['security_key']] == $_SESSION['security'])
    {
        /* forms post is from domain as session would 
           not have been started and security would not have been set */
        echo 'good';
    }else{
        /* forms post is not from domain */
        echo 'bad';
    }
    $_SESSION['security_key'] = sha1(microtime(true)+1);
    $_SESSION['security'] = sha1(microtime(true));
}else{
    $_SESSION['security_key'] = sha1(microtime(true)+1);
    $_SESSION['security'] = sha1(microtime(true));
}
?>

<form method="POST" action="">
  <input type="hidden" name="<?=$_SESSION['security_key'];?>" value="<?=$_SESSION['security'];?>"/>
  <p><input type="text" name="Text" size="20"><input type="submit" value="Submit"></p>
</form> 
```

或者，您可以使用加密而不是散列，这样您就可以检查值：

```
<?php 
session_start();
define('SECURE_KEY',$_SERVER['SERVER_NAME']);

if($_SERVER['REQUEST_METHOD']=='POST'){
    if(isset($_SESSION['security_key']) && isset($_SESSION['security'])){
        //Decrypt
        list($servername,$userip) = explode('X',decrypt(base64_decode($_SESSION['security'])));

        //Check the decrypted values
        if($servername == $_SERVER['SERVER_NAME'] && $userip == $_SERVER['REMOTE_ADDR']){
            /* forms post is from domain as session would
            not have been started and security would not have been set */
            echo 'good';
        }else{
            echo 'bad';
        }

    }else{
        /* forms post is not from domain */
        echo 'bad';
    }

    $_SESSION['security_key'] = sha1(microtime(true));
    $_SESSION['security'] = base64_encode(encrypt($_SERVER['SERVER_NAME'].'X'.$_SERVER['REMOTE_ADDR']));
}else{
    $_SESSION['security_key'] = sha1(microtime(true));
    $_SESSION['security'] = base64_encode(encrypt($_SERVER['SERVER_NAME'].'X'.$_SERVER['REMOTE_ADDR']));
}

function encrypt($string, $key = 'PrivateKey', $secret = 'SecretKey', $method = 'AES-256-CBC') {
    // hash
    $key = hash('sha256', $key);
    // create iv - encrypt method AES-256-CBC expects 16 bytes
    $iv = substr(hash('sha256', $secret), 0, 16);
    // encrypt
    $output = openssl_encrypt($string, $method, $key, 0, $iv);
    // encode
    return base64_encode($output);
}

function decrypt($string, $key = 'PrivateKey', $secret = 'SecretKey', $method = 'AES-256-CBC') {
    // hash
    $key = hash('sha256', $key);
    // create iv - encrypt method AES-256-CBC expects 16 bytes
    $iv = substr(hash('sha256', $secret), 0, 16);
    // decode
    $string = base64_decode($string);
    // decrypt
    return openssl_decrypt($string, $method, $key, 0, $iv);
}
?>

<form method="POST" action="">
  <input type="hidden" name="<?=$_SESSION['security_key'];?>" value="<?=$_SESSION['security'];?>"/>
  <p><input type="text" name="Text" size="20"><input type="submit" value="Submit"></p>
</form> 
```

# ios - 我可以在没有服务器的情况下在我的 iOS 应用程序中发布 openGraph 操作吗？

> ID：12998976
> 
> 赞同：-1
> 
> 时间：2012-10-21T14:59:38.453
> 
> 标签：ios, facebook

> **可能重复：**
> [是否可以在不运行我自己的服务器的情况下将 opengraph 发布到用户的墙/feed/ticker 上？](https://stackoverflow.com/questions/12996473/is-it-possible-to-post-opengraph-on-users-wall-feed-ticker-without-running-my-o)

我希望我的 iOS 应用在用户时间线/提要/墙上发布操作。例如，如果用户对一篇文章进行评分，我希望 iOS 应用发布：“Ken just *`rated`*an *`article`*on *`myApp!`*”，带有额外的图标和文字。
这种类型的帖子需要我拥有服务器吗？或者是否可以简单地从 iOS 应用程序中发布这样的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:11:57.537

If you have an access token, and your iOs app registered at developers.facebook.com you can do some actions without a server. But for things like "Ken just rated an article" you need a server because facebook makes a request to your server to get a list of actions (in your case you would have to define the action "rate" and then the object "article" and then define that user can rate articles). But thats only how it works in facebook canvas and Websites, may be different in iOs Apps..

# assembly - 组装中的蛇游戏

> ID：12998981
> 
> 赞同：0
> 
> 时间：2012-10-21T14:59:53.060
> 
> 标签：assembly, x86, att

我正在尝试制作一个小型 IA32 游戏（AT&T），我目前面临的问题是我不知道如何/在哪里存储蛇的身体和“苹果”以便能够检查碰撞。蛇的大小不断增加，所以容器应该动态分配？

在高级语言中，我会使用二维向量/数组/链表或类似的东西来存储坐标，然后在移动后进行比较。

欢迎任何建议。

（查看了类似的问题，但没有回答我的问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:02:24.313

蛇不能比字段长，所以静态或动态分配合适的内存量——这取决于你。

# mysql - MySQL 语法 - 变量的标准偏差，而不是列

> ID：12998982
> 
> 赞同：1
> 
> 时间：2012-10-21T14:59:56.233
> 
> 标签：mysql, function, variables, syntax

我试图找到语法来计算存储过程中一组变量的*标准偏差。*

我希望能够做这样的事情：

```
set variable1 = 5;
set variable2 = 7;
set variable3 = 8;
set variable4 = 2;

set MyStandardDeviation = StdDev(variable1, Variable2, variable3, variabl4) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:08:09.550

您可以使用`UNION ALL`组合和生成一列临时表，

```
set variable1 = 5;
set variable2 = 7;
set variable3 = 8;
set variable4 = 2;

set MyStandardDeviation = 
            (
                SELECT StdDev(x.Val)
                FROM 
                    (
                        SELECT variable1 As Val
                        UNION ALL
                        SELECT variable2 As Val
                        UNION ALL
                        SELECT variable3 As Val
                        UNION ALL
                        SELECT variable4 As Val
                    ) x
            ); 
```

# python - 在 python 中使用 lxml 对 DTD 进行验证受到 xmlns 的干扰

> ID：12998988
> 
> 赞同：0
> 
> 时间：2012-10-21T15:00:51.310
> 
> 标签：python, validation, lxml

我正在尝试使用 lxml 在 Python 中验证 XML 文档。

DTD 验证会将 xmlns 命名空间的存在视为错误。

此示例脚本

```
from lxml import etree
from StringIO import StringIO

dtd = etree.DTD(StringIO("<!ELEMENT a EMPTY>"))
root = etree.XML("<a></a>")
print(dtd.validate(root))
root = etree.XML('<a xmlns:sru="http://www.loc.gov/zing/srw/"></a>')
print(dtd.validate(root))
print dtd.error_log 
```

产量

```
True
False
<string>:1:0:ERROR:VALID:DTD_UNKNOWN_ATTRIBUTE: No declaration for attribute xmlns:sru of element a 
```

如何让 lxml 根据 DTD 验证我的文档而不抱怨 xml 命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:17:25.643

您必须为 DTD 中的 a 元素定义 xmlns:sru 属性。它目前没有。

```
<!ELEMENT a EMPTY>
<!ATTLIST a xmlns:sru CDATA #IMPLIED> 
```

这为元素 a 上的 xmlns:sru 定义了一个可选的 CDATA 属性。

# javascript - 我第一次寻找 javascript

> ID：12998991
> 
> 赞同：1
> 
> 时间：2012-10-21T15:01:23.300
> 
> 标签：javascript

我有以下代码：

```
if(text && spot && box) {
    document.getElementById('text-shadow-box').onmousemove = onMouseMove;

    document.getElementById('text-shadow-box').ontouchmove = function(e) {
        e.preventDefault();
        e.stopPropagation();

        onMouseMove({
            clientX: e.touches[0].clientX,
            clientY: e.touches[0].clientY
        });
    };
} 
```

一开始没有分配什么`onmousemove = onMouseMove`，为什么没有分配？我的另一个问题： e 在上下文 function(e) 和 中是什么意思`e.touches[0].clientx`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:15:51.633

我将注释内联代码：

```
//all variables ext,spot,box are defined, not "false" and not 0 and not null
if (ext && spot && box) {
/* We assign onmousemove event handler to the function, in javascript functions are vars
* function declared like `function function_name(param) {}` go to global scope, 
* and almost equal to 'function_name=function(param ) {}'
* var local scope use `var function_name=function(param) {}`
*/
            document.getElementById('text-shadow-box').onmousemove = onMouseMove;
/* add here is another example, you attach ontouchmove anonymous function,
* anonymous function BEGIN NEXT LINE */  
            document.getElementById('text-shadow-box').ontouchmove = function (e) {
 // e here it is event object, which passed to handler function as argument
 //it is jquery call, mean do not start other event handlers after this line
                e.preventDefault(); e.stopPropagation(); 
/* call function inMousemove, declared somewhere else
            The "{
                clientX: e.touches[0].clientX,
                clientY: e.touches[0].clientY
            }" here is object having two properties - clientX and clientY */
                onMouseMove({
                    clientX: e.touches[0].clientX,
                    clientY: e.touches[0].clientY
                });
/* anonymous function END NEXT LINE */
            }; 
```

* * *

ontouchmove 和[此处](https://dvcs.w3.org/hg/webevents/raw-file/tip/touchevents.html)记录的其他触摸屏事件 看起来***touches*** 是处理屏幕触摸的对象，因为我没有触摸屏设备我无法检查，但看起来触摸元素可以通过两种方式访问​​，第一种 - 使用`e.touches.item(n)`（如中所述doc) 和第二个 - 当使用 e.touches 作为数组时`e.touches[n]`。n==0 表示我从 w3c 规范中了解的第一个触摸元素。

* * *

event.stopPropagation()

> 描述：防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

event.preventDefault()

> 说明：如果调用该方法，则不会触发事件的默认动作。

所以`event.stopPropagation()`防止该元素的任何父母接收该事件（假设您有两个折叠的 div 并且都有事件侦听器）

虽然`event.preventDefault()`阻止默认操作（假设您有`<a href="test.html"></a>`并且有 onclick 事件处理程序，所以最好阻止会使浏览器加载 test.html 的操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:14:21.790

onmousemove = onMouseMove is for HTML DOM event registration. in this case, it means method 'onMouseMove' should be invoked when there is a mouse move event on HTML element 'text-shadow-box'.

ontouchmove is another event that listens to any touch move, this happens on mobile clients (e.g. Android client). inside the event handler it uses the onMouseMove to handle this event by converting the touch point to client coordinate.

# asp.net - Page.Init 和 Page.PostBack

> ID：12998992
> 
> 赞同：0
> 
> 时间：2012-10-21T15:01:24.240
> 
> 标签：asp.net, vb.net

我知道这是一个非常基本的问题，但我找不到答案。有很多网页说 page.init 不会在回帖时触发，例如：http: [//www.dotnetfunda.com/interview/exclusive/x3224-what-is-the-difference-between-the-pageinit -and-pageload-events.aspx](http://www.dotnetfunda.com/interview/exclusive/x3224-what-is-the-difference-between-the-pageinit-and-pageload-events.aspx)。请看下面的代码：

```
Public Class _Default
    Inherits System.Web.UI.Page

    Private Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
        MsgBox("Test Init") 'Line 5
    End Sub

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Page.IsPostBack = True Then
            MsgBox("PostBack") 'line 9
        End If
        MsgBox("Test Load")
    End Sub

    Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        TextBox1.Text = "Hello"
    End Sub
End Class 
```

每次单击按钮时，第 5 行和第 9 行的消息框都会触发。这意味着 Init 事件在回发时触发。我显然忘记了一些非常基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:14:35.090

从您的参考页面：

~~当您回发到任何页面时，不会触发 Page_Init 事件。~~

这是完全错误的。

Page_Init 总是被触发 - 实际上页面周期根本没有改变。

# ios - iOS 应用在启动前退出

> ID：12998996
> 
> 赞同：0
> 
> 时间：2012-10-21T15:02:08.570
> 
> 标签：ios

我是 iOS 开发的新手，作为新手，我在我的 MacBook air 上使用 Xcode 4.3.3 针对 iOS 5.0 SDK 创建了一个非常简单的 Hello World 应用程序。我已将**部署目标**设置为**3.2**，并且**基础 SDK**（在*构建设置中*）已设置为**iOS 5.1**

输出构建在 iPhone 4.3 模拟器上运行良好，但是当我使用 SSH 客户端将输出 HelloWorld.app 复制到我的越狱 iPod 时，应用程序图标会出现，但是当我运行它时，应用程序会在启动前退出。我的 iPod OS 版本是**4.2.1**，我可以从 cydia 运行很多应用程序，但听起来我在构建自己的应用程序时缺少一些东西。

有效架构设置为**armv6 armv7**

有人帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:06:50.143

部署到模拟器的可执行文件不能仅仅复制到设备上。Xcode 应该为你做这件事，它需要一个开发证书。但是，有一种方法可以在没有证书的情况下修补 Xcode 以执行此操作，但您必须搜索如何执行此操作。

# visual-studio-2010 - 从可靠的外部来源获取日期时间

> ID：12998999
> 
> 赞同：0
> 
> 时间：2012-10-21T15:02:27.773
> 
> 标签：visual-studio-2010, c#-4.0, datetime

我想从外部可靠来源获取 DateTime。我知道我可以通过 DateTime.Now() 方法获得它，但是通过更改系统日期和时间很容易被愚弄。有办法吗？这是一个Windows窗体应用程序！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:10:31.620

您需要一个网络时间服务器客户端类。
简而言之，您向 Internet 上众多时间服务器之一询问日期和时间，以使用[NTP 协议](http://en.wikipedia.org/wiki/Network_Time_Protocol)设置您的内部 PC 时钟。

如果您搜索 NTP 客户端，您会发现许多示例。

[这是第一个](http://www.codeproject.com/Articles/1005/SNTP-Client-in-C)来自 Bing 搜索的

报价：

> ```
> The Network Time Protocol (NTP) and its simplified form (SNTP) are widely used to 
> synchronize network resources, due to their simplicity and effectiveness. 
> ```

当然，由于所有东西都安装在客户端 PC 上，这也可能被黑客伪造时间服务器的地址并返回不同的值。但这需要黑客做更多的工作，而不是简单地重置 PC 时钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:11:18.757

虽然您可能会在您的应用程序中实现[网络时间协议](http://www.ntp.org/)客户端并通过网络请求当前时间或从某个 http 服务器请求某些内容并使用`Date`响应标头中的时间，但这也可能被愚弄（一个可能会拦截流量并向您发送代表您将连接或调整 http 响应的时间服务器的响应）。

不过，最简单的方法是从某个 http 服务器获得响应。