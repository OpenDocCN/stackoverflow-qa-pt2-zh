# StackOverflow 问答 13859000-13859999

# blackberry - 是否有任何用于图像的 LazyLoader 以在 BlackBerry 的 ListField 中加载图像？

> ID：13859003
> 
> 赞同：2
> 
> 时间：2012-12-13T11:37:34.847
> 
> 标签：blackberry, blackberry-simulator, image-loading

我是 BlackBerry 开发的新手。但对安卓很好。

我想在 ListField 中加载来自服务器的图像。

我已经实现了如下代码但没有成功：

```
 package mypackage;

public class TempScreen extends MainScreen implements ListFieldCallback{
    Bitmap[] images=null;
    private ListField mylist;
    private static Bitmap _bitmap;
    private ImageDownloader downloader;
    int size = 0;
    String[] urls={
            "http://www.kentnews.co.uk/polopoly_fs/damian_lewis_at_port_lympne_wild_animal_park_c_taf_1_1738362!image/2626063106.jpg_gen/derivatives/landscape_225/2626063106.jpg",
            "http://www.kentnews.co.uk/polopoly_fs/damian_lewis_at_port_lympne_wild_animal_park_c_taf_1_1738362!image/2626063106.jpg_gen/derivatives/landscape_225/2626063106.jpg",
            "http://www.kentnews.co.uk/polopoly_fs/damian_lewis_at_port_lympne_wild_animal_park_c_taf_1_1738362!image/2626063106.jpg_gen/derivatives/landscape_225/2626063106.jpg",
            "http://www.kentnews.co.uk/polopoly_fs/damian_lewis_at_port_lympne_wild_animal_park_c_taf_1_1738362!image/2626063106.jpg_gen/derivatives/landscape_225/2626063106.jpg"};
    public TempScreen()
    {

        images=new Bitmap[urls.length];
        size = urls.length;
        mylist = new ListField();
        mylist.setCallback(this);
        mylist.setSize(4);
        mylist.setRowHeight(getFont().getHeight() * 3);
        add(mylist);
        Thread downloader=new Thread(new ImageDownloader());
        downloader.start();

    }

    public void drawListRow(ListField listField, Graphics graphics, int index,
            int y, int width) {

        if(images[index]==null)
         {
             //Load placeholder image
            _bitmap = Bitmap.getBitmapResource("close_btn.png");// load some bitmap
            // of your choice
            // here
         }
         else
             //Load Bitmap
            _bitmap = images[index]; 

        graphics.drawText("row details", 100, y + 30);
        //graphics.drawBitmap(0, y, _bitmap.getWidth(), _bitmap.getHeight(),_bitmap, 0, 0);
        mylist.invalidate(index);
    }

    public class ImageDownloader implements Runnable
    {
        public void run()
        { 
            for(int i=0; i<size;i++)
            { 
                 if(images[i]==null) 
                 { 
                      images[i]=connectServerForImage(urls[i].toString());//replace downloadImage method to whatever method       you have to download the bitmap from url 
                      UiApplication.getUiApplication().invokeLater(new Runnable(){
                          public void run()
                          {
                              mylist.invalidate();
                          }
                      });
                  }
             }
        }
    }
    public Object get(ListField listField, int index) {
        // TODO Auto-generated method stub
        return null;
    }
    public int getPreferredWidth(ListField listField) {
        // TODO Auto-generated method stub
        return 0;
    }
    public int indexOfList(ListField listField, String prefix, int start) {
        // TODO Auto-generated method stub
        return 0;
    }
    public static Bitmap connectServerForImage(String url) {
        HttpConnection httpConnection = null;
        DataOutputStream httpDataOutput = null;
        InputStream httpInput = null;
        int rc;
        Bitmap bitmp = null;
        try {
            // httpConnection = (HttpConnection)
            // Connector.open(url+";interface=wifi");
            httpConnection = (HttpConnection) Connector.open(url);
            rc = httpConnection.getResponseCode();
            // System.out.println("===============================");
            Dialog.alert("beore if condition");
            if (rc == HttpConnection.HTTP_OK) {

                System.out.println(" ============= IN FUNCTION. . . . .");
                httpInput = httpConnection.openInputStream();
                InputStream inp = httpInput;
                byte[] b = IOUtilities.streamToBytes(inp);
                EncodedImage hai = EncodedImage.createEncodedImage(b, 0,
                        b.length);
                bitmp = hai.getBitmap();
            } else {
                throw new IOException("HTTP response code: " + rc);
            }
        } catch (Exception ex) {
            System.out.println("URL Bitmap Error........" + ex.getMessage());
        } finally {
            try {
                if (httpInput != null)
                    httpInput.close();
                if (httpDataOutput != null)
                    httpDataOutput.close();
                if (httpConnection != null)
                    httpConnection.close();

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        return bitmp;
    }
} 
```

不知道我哪里错了。请任何朋友都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:00:49.700

您的代码有几个问题：

*   该类`BitmapLazyLoader`看起来像一个消费者。它拥有一个线程引用。仅此一项就非常令人困惑，因为`Runnables`它们旨在传递给 Thread 构造函数，但 Runnables 不应该为了封装而知道线程。撇开这一点不谈，这个类只尝试生成一次线程，但是由于每次绘制一行时都创建一个 Runnable 实例，因此最终会生成大量线程。这可能会以`TooManyThreadsException`像在 BlackBerry 中一样被抛出，每个应用程序的最大线程数限制为 16 个。即使你没有达到极限，性能也会下降，因为 BlackBerries 采用单核 CPU，你不应该同时运行超过 2-3 个线程。即使您可以产生无限线程，在 BlackBerry 中您也只能同时打开 X 个连接（我认为 X 是整个操作系统的 5，对此不确定）。**所以首先修改代码以确保只有一个工作线程正在下载图像。**（如果可能，提取线程实例化并从 Runnable 类中启动）。
*   下载位图后，您不会对其进行任何操作。看`ImageDownloadCompleted`方法，是空的。（顺便说一句，方法的约定是以小写开头）**所以你应该将位图存储在某个地方并调用`invalidate`你的 list**，这反过来会绘制存储的位图。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T13:08:32.773

我之前已经解决了这个问题，我在这里发布了我的技术，虽然它不是理想的解决方案，因为它与 Screen 类非常结合，但仍然可能会有所帮助。

首先在您的屏幕类中有一个位图数组，其大小等于列表字段项。

```
public class TempScreen extends MainScreen{
    Bitmap[] images=null;
    String[] urls={"image1_url", "image2_url".....};
    public TempScreen()
    {

        images=new Bitmap[urls.length];

    } 
```

现在在 ListFieldCallBack 的 drawListRow 方法中，检查以下内容：

```
 public void drawListRow(ListField list, Graphics g, int index, int y, int width){
     if(bitmap[index]==null)
     {
         //Load placeholder image
     }
     else
         //Load Bitmap    
 } 
```

现在创建一个线程类来下载图像：

```
public class ImageDownloader implements Runnable
{
    public void run()
    { 
        for(int i=0; i<size;i++)
        { 
             if(images[i]==null) 
             { 
                  images[i]=downloadImage(url[i]);//replace downloadImage method to whatever method       you have to download the bitmap from url 
                  UiApplication.getUiApplication().invokeLater(new Runnable(){
                      public void run()
                      {
                          list.invalidate()
                      }
                  });
              }
         }
    }
} 
```

现在在屏幕类的构造函数中，将回调设置为列表字段后，启动线程：

```
Thread downloader=new Thread(new ImageDownloader());
downloader.start(); 
```

编辑：将 TempScreen 构造函数更改为以下内容：

```
public TempScreen()
    {

        images=new Bitmap[urls.length];
        size = urls.length;
        mylist = new ListField();
        mylist.setCallback(this);
        mylist.setSize(4);
        mylist.setRowHeight(getFont().getHeight() * 3);
        add(mylist);
        Thread downloader=new Thread(new ImageDownloader());
        downloader.start();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T06:16:36.443

您可以尝试使用此链接： http: [//www.coderholic.com/blackberry-webbitmapfield/](http://www.coderholic.com/blackberry-webbitmapfield/)

您必须按照上面链接中的建议创建一个名为 WebBitmapField 的单独类。

如何在列表字段图像对象中使用该类：

*   为每个图像 url 创建 WebBitmapField 对象
*   photoList_vector 是在列表字段中填充元素的向量

    ```
    WebBitmapField web = new WebBitmapField("http://www.image1.png"); 

    photoList_vector.addElement(web);

    web = new WebBitmapField("http://www.image2.png"); 

    photoList_vector.addElement(web); 
    ```

现在使用这个向量来处理你的列表字段......

在上面几行中，我们尝试确保当我们同时发送多个请求以获取图像时，每个图像对应于一个特定的 WebBitmapField 对象。

然后将每个对象添加到向量中，以便可以将其添加到列表字段中。

每个 url 发送都绑定到 WebBitmapField 的一个对象。

因此，尽管请求是在一个单独的线程中发送的，但它只绑定到其关联的对象

希望能帮助到你 ：）

# java - Tomcat 7 在 glassfish 3 上访问 EJB

> ID：13859004
> 
> 赞同：3
> 
> 时间：2012-12-13T11:37:36.457
> 
> 标签：java, ejb-3.0, tomcat7, glassfish-3, initial-context

我看过很多帖子，我用谷歌搜索了很多，但我无法摆脱这个问题。

我在 glassfish v 3.1.2 上部署了一个 EJB 模块，我想通过 tomcat v 7 访问它。当服务器在同一主机上运行时似乎没有问题，但是当它们在不同的主机上时（即不同的机器）会引发很多问题。即使有两个 glassfish 服务器。

我关注 [了 http://technology.amis.nl/2006/10/20/connecting-to-an-ejb-30-remote-sessionbean-from-tomcat/](http://technology.amis.nl/2006/10/20/connecting-to-an-ejb-30-remote-sessionbean-from-tomcat/)

还有很多其他类似的链接也可以在 stackexchange 中找到，我不会在这里报告，因为它们都提出了相同的建议，即：

将这行代码放入您的代码中，即一个 servlet：

属性 props = new Properties(); props.put("java.naming.factory.initial","com.sun.enterprise.naming.SerialInitContextFactory"); props.put("java.naming.factory.url.pkgs","com.sun.enterprise.naming"); props.put("java.naming.factory.state","com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl"); props.setProperty("org.omg.CORBA.ORBInitialHost", "10.23.2.150"); props.setProperty("org.omg.CORBA.ORBInitialPort", "3700");

你们中的许多人还建议在路径中包含：

*   glassfish 的 gf 客户端（你有没有想过在 tomcat 上我可能无法引用 glassfish 库）
*   或所有引用 gf-client 的库（接近 10 兆文件）

但不起作用..

我仍然得到initialcontext directory not found问题..

你能建议我任何解决方案吗？你可以建议我一步一步地遵循“教程”以使一切顺利吗？

如果您需要任何代码或完整的错误，请回答我，差不多 1 ​​周我正在尝试解决这个问题..

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T07:22:17.463

致杰夫：我找到了解决方案，这就是：嗨，我真的建议您关注这个[Java 网页版](http://javafortheweb.blogspot.it/2012/12/accessing-remote-ejb-on-jboss-as-71.html)

我和我的一位同事一起维护这个博客。我认为这也适用于 tomcat 6。

我希望这会奏效！现在让我们看看它是如何进行的。

LG

# c - 未指定的返回值

> ID：13859005
> 
> 赞同：0
> 
> 时间：2012-12-13T11:37:36.333
> 
> 标签：c, return, return-value

关于返回值：

```
func()
{
  while(1)
  {
    /* do stuff here */
    if(error1) exit(0);
    if(error2) break;
  }       
  /* no return statement anywhere in func() */
} 
```

但调用者检查 func() 的返回码

```
if(func()) {/* error handling */} 
```

最好有人确认返回值`func()`不默认为任何东西并且是垃圾。这对所有这些都是正确的：

*   `void func()`
*   `int func()`，它根本没有返回声明，或者带有简单的`return;`.
*   `func()`，未指定的返回类型，我理解默认返回 int。

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:30:04.940

**注意：**此答案适用于 C89（及更早版本）。

`void func()` 指定不返回值的函数。在这种情况下`if (func())`应该会导致编译错误。

`int func()`并且`func()`是等价的并返回一个整数值。如果 return 语句未提供任何值，则结果未定义，如果警告级别足够高，编译器会发出警告。在实践中，大多数编译器将生成返回用于返回值的寄存器或内存位置中的任何内容的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:28:23.087

函数的返回值*通常*由处理器的第一个寄存器返回，例如基于 x86 的 EAX 或基于 ARM 的处理器的 r0。它是特定于编译器的，但这或多或少是标准的。

例如`return 10;`在 C 中将被翻译成

```
mov eax 10 ; pseudo code
ret        ; pseudo code 
```

在基于 x86 的处理器的汇编中。

& 在检查返回值时，它只会检查 eax 寄存器。该寄存器中包含的任何内容都被调用者视为返回值。

所以...如果您返回没有值（简单`return;`）或者它是一个 void 函数，那么在汇编中的语句之前包含在 EAX 中的任何值都会`ret`被调用者作为返回值。

对于`ARM`基于处理器，在上面的答案中替换`EAX`为。`r0`:-)

我将此事实用作以下功能的破解；-)

```
void* getStackTop(){
   asm("mov eax esp");
} 
```

* * *

要检查从 C 转换为 ASM 时它的工作原理，请编写如下简单代码：

```
int testfn(int unused){
   int unused2=unused; // Check how input is passed
   return 10;          // Check how output is returned
} 
```

& 然后用`gcc -S`. （或者你的编译器带有一些只会生成程序集的标志。）

* * *

我不确定它如何返回浮点/结构值。*可能*它返回一个指向结构的指针，并且整个返回的结构在引擎盖下是 memcpy 的，同时转换为 asm。有人可能会纠正:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:32:50.237

自 C99 标准以来，您在无效的 C 代码中发布的代码。

如果您使用的是实现 C90 标准的过时编译器，它将编译并且默认类型将是 int。我相信从这样的函数中省略 return 语句会导致未定义的行为，尽管我不能引用 C90 标准。

# c# - 如何在静态类中释放字典的内存？

> ID：13859009
> 
> 赞同：0
> 
> 时间：2012-12-13T11:37:55.020
> 
> 标签：c#, wcf, garbage-collection, dictionary

我在 C# 中释放内存时遇到问题。我有一个包含静态字典的静态类，其中填充了对对象的引用。单个对象 zajumie 大量内存。有时我会通过删除对设置为 null 的对象的过时引用并从字典中删除该项目来释放内存。不幸的是，在这种情况下，内存并没有变慢，在达到系统中内存的最大大小后的时间就好像突然释放了未使用的资源，正确使用的内存量减少了。下面是类图：

```
public class cObj
{
    public DateTime CreatedOn;
    public object ObjectData;
}

public static class cData
{
    public static ConcurrentDictionary<Guid, cObj> ObjectDict = new ConcurrentDictionary<Guid, cObj>();
    public static FreeData()
    {
        foreach(var o in ObjectDict)
        {
            if (o.Value.CreatedOn <= DateTime.Now.AddSeconds(-30))
            {
                cObj Data;
                if (ObjectDict.TryGetValue(o.Key, out Data))
                {
                    Data.Status = null;
                    Data.ObjectData = null;
                    ObjectDict.TryRemove(o.Key, out Data);
                }
            }
        } 
    }
} 
```

在这种情况下，内存被释放。但是，如果在此操作之后，我调用 `GC.Collect ();` 了预期的未使用对象的释放。

如何解决问题，让您不必使用`GC.Collect()`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:43:01.883

在大多数情况下，您不必调用 GC.Collect()。[GC.Collect 与否？](https://stackoverflow.com/questions/5248838/to-gc-collect-or-not)

我有类似的场景，我刚刚创建了一个限制为 n 个条目的字典，我自己在 ConcurrentDictionary 之上做了这个，但你可以使用 BlockingCollection。

一个可能的优势是，如果同时添加 100 万个条目，则除 n 之外的所有条目都可用于垃圾回收，而不是 30 秒后。

# excel - vba：将工作簿另存为 csv 文件

> ID：13859014
> 
> 赞同：1
> 
> 时间：2012-12-13T11:38:13.647
> 
> 标签：excel, vba

我正在尝试将使用工作簿对象指定的工作簿保存为 csv 文件格式，但有一些问题。在下面的代码中，我在另存为行之后收到一个错误，说 .csv 文件是只读的：

```
Sub Button1_Click()
    Dim c As Workbook
    Set c = Application.Workbooks.Open(Filename:="C:\Testing\testbook.xlsx", IgnoreReadOnlyRecommended:=True)
    Call sSaveWorkbookAsCSV(c, "C:\Testing")
End Sub

Public Sub WBookToCSV(wkbktosv As Workbook, strOutputFilePath As String)

    Application.DisplayAlerts = False
    Call wkbktosv.SaveAs(strOutputFilePath, xlCSV, CreateBackup:=False)
    Application.DisplayAlerts = True
    Call wkbktosv.Close(SaveChanges:=False)

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:08:05.687

您应该将其更改为： sSaveWorkbookAsCSV(c, "C:\Testing.csv")

# java - Java MYSQL 选择复选框

> ID：13859016
> 
> 赞同：2
> 
> 时间：2012-12-13T11:38:22.523
> 
> 标签：java, mysql, jsp, servlets, javabeans

> **可能重复：**
> [PreparedStatement IN 子句替代方案？](https://stackoverflow.com/questions/178479/preparedstatement-in-clause-alternatives)

我想根据复选框选择从 MYSQL 中进行选择。（复选框有 ID，从数据库中选择应该选择 where ID= ? -> 选择的 ID）

我用 MVC 架构组织它：

*   在 jsp 中是我的表单（它是动态的，所以可以有更多）

    ```
     <input type="checkbox" name="checkboxes" value="1">XY
      <input type="checkbox" name="checkboxes" value="2">XY
      <input type="checkbox" name="checkboxes" value="3">XY 
    ```

*   在servlet中我得到了值

    ```
     String[] catids  = request.getParameterValues("checkboxes");

      //Forward to bean -> doesnt work because catids is like an array
      FrageBean f=FragenBean.getRandomQuestionByCategory(catids); 
    ```

*   我的豆是：

    ```
    public static FrageBean getRandomQuestionByCategory(String catids) {
    ArrayList<Integer> alleFragenIds = new ArrayList<Integer>();

    DatabaseMetaData dbmd;
    Statement sql;
    Connection db = null;

    try {
        Class.forName("com.mysql.jdbc.Driver");
    } catch (ClassNotFoundException ex) {
        System.out.println("driver not found");
    }
    try {
        db = DriverManager
                .getConnection("jdbc:mysql://localhost:3306/xyz?"
                + "user=root&password=xyz");
        dbmd = db.getMetaData();

        System.out.println("Connected with: " + dbmd.getUserName() + " | "
                + "Connection to: " + dbmd.getDatabaseProductName() + " " + dbmd.getDatabaseProductVersion() + " successful.\n");
        sql = db.createStatement();
    } catch (SQLException ex) {
        System.out.println("Error: " + ex);
    }

    try {

        String query = "select id from quest where quest_id=?";
        PreparedStatement prest = db.prepareStatement( query);

        prest.setString(1, catids);

        ResultSet rs = prest.executeQuery();
        ArrayList fragenliste = new ArrayList();
        while (rs.next()) {
            int fragenid = rs.getInt("id");
            alleFragenIds.add(fragenid);

        }

        rs.close();
        db.close();

    } catch (SQLException ex) {
        System.out.println("Error: " + ex);
    }

    Random r = new Random();
    int frageIndex = r.nextInt(alleFragenIds.size());
     System.out.println("Contents of al: " + alleFragenIds);
    return new FrageBean(alleFragenIds.get(frageIndex));

    } 
    ```

目前它只适用于一个 id（因为我只有一个选择）。我怎样才能用复选框做到这一点？如何将“catids”转发到 bean 并创建 mysql-query 动态？（从 fragen 中选择 id，其中 kategorie_id= [ALL CHECKED BOXES]）

提前致谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:18:15.930

在您的课程中创建以下方法。放置正确的驱动程序类和 url 连接并将 catids 作为字符串数组传递。

假设：我假设列**“quest_id”**是表**quest中的****int**类型。

 **```
 public  void displayRecords(String[] catids)
{
    try
    {

        String queryStart = "select id from quest where quest_id in ( ";
        String queryMiddle = "";
        String prefix = "";
        String queryEnd = " )";
        String query = "";

        if (catids != null && catids.length > 0)
        {
            for (String id : catids)
            {
                queryMiddle = queryMiddle + prefix + id;
                prefix = ",";
            }

            query = queryStart + queryMiddle + queryEnd;
            System.out.println(query);

            Class.forName("DriverClass....................");
            Connection conn = DriverManager.getConnection("connection url ..................");
            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery(query);

            while (rs.next())
            {
                int fragenid = rs.getInt("id");
                System.out.println("ID = " + fragenid);
            }
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:57:37.057

@RaisAlam 的答案很危险，因为它容易受到 SQL 注入的影响。这是一个固定版本：

```
public  void displayRecords(String[] catids) {
    try {
        String queryStart = "select id from quest where quest_id in ( ";
        String queryMiddle = "";
        String prefix = "";
        String queryEnd = " )";
        String query = "";

        if (catids != null && catids.length > 0) {
            for (String id : catids) {
                queryMiddle = queryMiddle + prefix + "?";
                prefix = ",";
            }
            query = queryStart + queryMiddle + queryEnd;
            System.out.println(query);
            Class.forName(....);
            Connection conn = DriverManager.getConnection(....);
            PreparedStatement stmt = conn.createPreparedStatement(query);
            int i = 1;
            for (String id : catids) {
                stmt.setInt(i++, Integer.parseInt(id));
            }
            ResultSet rs = stmt.executeQuery(query);
            while (rs.next()) {
                int fragenid = rs.getInt("id");
                System.out.println("ID = " + fragenid);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

为每个参数使用带有占位符的 PreparedStatement 是避免 SQL 注入的“最佳实践”方法。**

# task - 使用 Windows 任务计划程序在 exe 文件中执行命令

> ID：13859019
> 
> 赞同：2
> 
> 时间：2012-12-13T11:38:45.880
> 
> 标签：task, exe, scheduler

我有一个程序，用于将使用 UTF-8 .dat 文件的数据导入我的服务器。通常，我运行 exe，然后选择我的配置文件 (xml)，这会将 exe 定向到包含 .dat 文件以及所述文件的参数的正确文件夹。然后我必须单击按钮以“运行”导入。

使用 Windows 任务计划程序，我设置为运行 exe，并为配置文件添加参数。计划每 5 分钟运行一次。一切似乎都很好，它运行并完成。

然而什么都没有被上传。我应该添加另一个命令来实际执行导入吗？

任何帮助，将不胜感激。

谢谢，布伦丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:18:56.230

这取决于您的 exe 支持的命令行参数。看起来您错过了 exe 命令行上的某些选项。

首先，尝试从命令行 (cmd.exe) 运行您的 exe，以便它完成所有工作，而不是在任务计划程序中使用该命令。

命令行帮助通常打印在`yourapp.exe /?`命令上。确保从命令行 shell (cmd.exe) 运行它，而不是从开始 -> 运行菜单。

# windows - 尝试使用 MinGW 编译时未声明“_get_timezone”

> ID：13859020
> 
> 赞同：0
> 
> 时间：2012-12-13T11:38:47.800
> 
> 标签：windows, qt, mingw, thrift, qt4.8

我将 QtCreator 2.6 与 Qt 4.8.4 一起使用，并尝试通过 MinGW（4.4、32 位）在 Windows 7 x64 上编译我的代码。

我将[Apache Thrift](http://thrift.apache.org/)包含到我的项目中，并在文件中出现错误`thrift\windows\GetTimeOfDay.cpp`：

```
'errno_t' was not declared in this scope
'_get_timezone' was not declared in this scope`
'_get_daylight' was not declared in this scope 
```

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:33:59.917

我有了工作的想法。我们必须避免所有`GetTimeOfDay`，并从项目文件中删除`GetTimeOfDay.cpp, GetTimeOfDay.h`并使用`<time.h>`的功能`gettimeofday`。

如果有人会遇到同样的错误，我可以提供更多代码。

*而且，当然，如果你能找到更好的方法来解决这个问题（或者指出，这个问题在 Thrift 的进一步版本中得到了解决）——请随时在此处发布！*:)

# maven - 带有 Maven 的 SmartGWT 3.0

> ID：13859022
> 
> 赞同：3
> 
> 时间：2012-12-13T11:38:56.427
> 
> 标签：maven, smartgwt

我找不到 maven 的 SmartGWT 3.0 条目。
对于 2.4，我发现以下链接：
[http ://code.google.com/p/smartgwt/wiki/NightlyBuilds_and_MavenRepository](http://code.google.com/p/smartgwt/wiki/NightlyBuilds_and_MavenRepository)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T21:49:09.540

您是否尝试过：[http](http://www.smartclient.com/maven2/com/smartgwt/smartgwt/3.0/smartgwt-3.0.pom) ://www.smartclient.com/maven2/com/smartgwt/smartgwt/3.0/smartgwt-3.0.pom ？

存储库：[http ://www.smartclient.com/maven2](http://www.smartclient.com/maven2)

```
<dependency>
    <groupId>com.smartgwt</groupId>
    <artifactId>smartgwt</artifactId>
    <version>3.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-06T12:54:25.680

我确实意识到这个问题是关于`SmartGWT 3.0`但我最终在这里寻找 maven 依赖设置`SmartGWT 4.0`，因为这是当前的稳定版本，它可能值得分享。这是适用于我的存储库/依赖项设置：

```
<repositories>
    <!-- other repositories -->
    <repository>
        <id>smartgwt</id>
        <url>http://www.smartclient.com/maven2</url>
    </repository>
</repositories>

<dependencies>
    <!-- other dependencies -->
    <dependency>
        <groupId>com.smartgwt</groupId>
        <artifactId>smartgwt</artifactId>
        <version>4.0</version>
    </dependency>
</dependencies> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T17:18:44.960

```
 <groupId>com.googlecode.smartgwt-maven-plugin</groupId>
        <artifactId>smartgwt-maven-plugin</artifactId>
        <version>3.1</version> 
```

# android - 配置更改后忽略 view.invalidate()

> ID：13859025
> 
> 赞同：3
> 
> 时间：2012-12-13T11:38:59.483
> 
> 标签：android, android-view, android-configchanges

在使用 SO 解决我的问题一年后，我遇到了一个我找不到解决方案的问题。

我正在使用多个线程来计算位图。当计算新的位图行时，我更新自定义视图并调用 invalidate()。但是当我旋转手机时，位图会停止更新。另一个屏幕旋转后视图只更新一次，同时计算的部分位图也可见。

onCreate 方法的一部分：

```
 view = (MyView) findViewById(R.id.view1);

    if (savedInstanceState != null)
    {
        bitmap = savedInstanceState.getParcelable("bitmap");
        view.bitmap = bitmap;
    }
    else
    {
        bitmap = Bitmap.createBitmap(400, 500, Bitmap.Config.ARGB_8888);
        bitmap.eraseColor(Color.GRAY);
        view.bitmap = bitmap;
    } 
```

我`handler`用来更新我的观点：

```
 public void handleMessage(final Message msg) {

        Log.i("Recieved", "redraw signal");
        view.bitmap = bitmap;
        view.invalidate();  
    } 
```

在我看来，我使用：

```
 Bitmap bitmap;
   Rect rect;

   //...constructors

   @Override
   protected void onSizeChanged (int w, int h, int oldw, int oldh)
   {
       rect = new Rect(0, 0, getWidth(), getHeight());
   }

   @Override
   protected void onDraw(Canvas canvas)
   { 
       super.onDraw(canvas);
       if (bitmap!=null)
       {               
           canvas.drawBitmap(bitmap, null, rect, null);
       }
        Log.i("onDraw", "draw"); 
   } 
```

**解决方案**

到目前为止，我找到了一种解决方案。如果我添加`invalidate()`到末尾`onDraw`，则在屏幕方向更改后会正确更新位图（逐行）。`invalidate()`我认为这不是非常“干净”的解决方案，所以我想了解为什么`handler`在配置更改后被忽略？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:25:00.947

我找到了解决方案。

问题出在处理程序中，它不是静态的。我忽略了“可能发生泄漏”警告，因为我没有发布长时间延迟的消息。大错特错，因为在配置更改之后 Handler 不知何故无法访问 View。

这是解决方案：

```
 static class MyHandler extends Handler {
    private final WeakReference<MainActivity> mTarget;

    public MyHandler(MainActivity target) {
        mTarget = new WeakReference<MainActivity>(target);

    }

    @Override
    public void handleMessage(Message msg) {
         MainActivity target = mTarget.get();
...other stuff...
        target.view.invalidate(); // now this works after configuration change

    }

} 
```

底线：使用静态处理程序，如此[处所述](https://stackoverflow.com/questions/11407943/this-handler-class-should-be-static-or-leaks-might-occur-incominghandler)

# oracle - 为什么我会收到此查询的“缺少关键字”？

> ID：13859032
> 
> 赞同：0
> 
> 时间：2012-12-13T11:39:21.950
> 
> 标签：oracle

```
Select A.Smscid,
       A.Delivery_Date,
       A.Type,
       A.End_Delivery,
       A.Volume,
       (Case When A.Type='Transactional' And A.End_Delivery=B.Operator 
             Then (A.Volume*B.Onnet_Trans_Cost)) As "COST",
 From Telco_Success a,operators_cost b; 
```

我收到缺少关键字错误：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:43:07.010

未经测试，但您似乎缺少声明中的`End`关键字`Case`。此外，您似乎在“COST”之后有一个逗号，这是不需要的。

```
Select A.Smscid,
       A.Delivery_Date,
       A.Type,
       A.End_Delivery,
       A.Volume,
       (Case When A.Type='Transactional' And A.End_Delivery=B.Operator 
             Then (A.Volume*B.Onnet_Trans_Cost) End) As "COST"
 From Telco_Success a,operators_cost b; 
```

# sparql - Sparql 过滤器：获取匹配的所有详细信息

> ID：13859034
> 
> 赞同：2
> 
> 时间：2012-12-13T11:39:33.510
> 
> 标签：sparql

我有以下 sparql 查询：

```
PREFIX spec: <http://rdfs.org/sioc/spec/> 
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX constraint: <http://purl.org/vocab/constraint/constraint#>

SELECT  
(sample(?FName) as ?fName)
(sample(?Midname) as ?midname) 
(sample(?User) as ?user)  

(GROUP_CONCAT(DISTINCT ?userRole;  separator='; ') AS ?UserRole)
WHERE {
    GRAPH <http://example.com/> 
    {
        ?User spec:email ?Email .   
        ?User foaf:firstName ?FirstName .
        ?User foaf:surname ?Midname .
        OPTIONAL
        {
            ?User constraint:containsConstraint ?constraint .               
            ?constraint constraint:constrains ?userRoleUri .
            ?userRoleUri spec:name ?userRole.
        }
FILTER (str(?userRoleUri) IN("http://example.com/roles/admin", "http://example.com/roles/moderator"))

    }
} GROUP BY ?FName  ORDER BY ASC(?FName) 
```

此查询的作用是返回匹配的用户。因此，如果用户“A”列出了 3 个角色：编辑、管理员和版主，它只显示用户的两个角色。像 ：

```
A - Mid - a@abc.om - admin;moderator 
```

我想从查询中做的是：由于用户 A 匹配任何给定的过滤条件，因此应该列出它的所有角色。有没有办法改进这个查询？我也尝试在过滤器中使用子选择和正则表达式，但是:(

在此先感谢 Sparkler

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:51:25.130

关于answers.Sematicweb.com 的建议解决方案在很大程度上解决了问题。这正是我需要的，但是，很有可能。

**答案：** [http://answers.semanticweb.com/questions/20016/sparql-filter-get-all-details-of-a-match](https://web.archive.org/web/20140308050637/http://answers.semanticweb.com:80/questions/20016/sparql-filter-get-all-details-of-a-match)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:03:02.090

首先，我在您的 FILTER 子句中看不到“编辑”角色。关于。显示所有相关角色，为什么不简单地使用以下 SELECT 子句：

```
SELECT ?FName ?Midname ?userRole 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:10:32.907

因此，只有当他是管理员或版主时，您才希望拥有用户的角色列表。

在这种情况下，我将添加第二个 userRoleUri。

像这样的东西：

```
?User constraint:containsConstraint ?constraint .               
?constraint constraint:constrains ?userRoleUri .
?constraint constraint:constrains ?userRoleUri2 .
?userRoleUri2 spec:name ?userRole. 
```

因此，这会在 ?userRoleUri 上过滤您的用户，然后通过 ?userRoleUri2 列出所有 ?userRole

我认为这应该有效。

# makefile - Make：变量中的先决条件 - secondexpansion

> ID：13859039
> 
> 赞同：1
> 
> 时间：2012-12-13T11:39:53.287
> 
> 标签：makefile

我想定义一个通用的makefile，可以像这样被不同的makefile包含（其中一个源tc被编译到libl.a中并存档）：

**生成文件：**

```
LIBS := libl
OBJS_libl := t
include c.mk 
```

**c.mk：**

```
ALIBS  := $(LIBS:%=%.a)
.SECONDEXPANSION:
all : $(ALIBS)
%.a : $$(patsubst %,%.o,$$(OBJS_$$(patsubst %.a,%,$$(@F))))
    ar crs $@ $(patsubst %,%.o,$(OBJS_$(@F:%.a=%)))
%.o : %.c
    gcc -c $(@F:%.o=%.c) -o $@ 
```

目标是规则 %.a 的先决条件扩展到 libl.a

这似乎适用于显式规则（如果我将 %.a 替换为 libl.a），但不适用于隐式规则。

```
=> make: *** No rule to make target `libl.a', needed by `all'.  Stop. 
```

我可以做到这一点，请问如何？

[编辑] 目标确实是在同一个目录中拥有几个库，如 libl.a，每个库都使用一些对象：

```
LIBS := libl1 libl2
OBJS_libl1 := t1 u1 
OBJS_libl2 := t2 u2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:32:45.477

**生成文件：**

```
LIBS := libl.a
$(LIBS): t.o

include c.mk 
```

**c.mk：**

```
%.a:
    ar crs $@ $^

%.o : %.c
    gcc -c $< -o $@ 
```

**编辑：**

```
LIBS := libl1.a libl2.a
$(LIBS):
libl1.a : t1.o u1.o 
libl2.a : t2.o u2.o 
```

还要别的吗？

# c - 识别 C 程序中函数的开始和结束

> ID：13859040
> 
> 赞同：1
> 
> 时间：2012-12-13T11:39:55.880
> 
> 标签：c

我目前正在用 C 进行编程，以根据函数中的行数来查找程序中函数的复杂性。我将不得不打开一个现有的 C 文件并继续计算。我知道可能有一些内置工具可以找到它。但我仍然希望它手动编程。是否有任何特定方法可以在 C 文件中查找各种函数的开始和结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:55:28.990

1.  通过 C 预处理器运行它。通过这种方式，您可以去除注释、展开宏、包含#includes 等。除非您想要用户可读代码的复杂性，否则这将产生更真实的结果。

2.  删除固定字符串。之间的任何`""`事情，注意转义引号`\"`不会关闭字符串。

3.  扫描文件。首先`{`增加函数的数量并开始扫描函数体。观察深度。`{`增加深度，`}`减少，随着深度达到 0 另一个`}`是函数的结尾。Next`{`将是一个新功能，但是当您扫描外部时，如果在到达 next 之前`{`或`EOF`您遇到`;`- 取消最后一块收集的任何数据。那不是一个函数，它是一个结构、一个联合或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:40:41.327

我建议采用 2-pass 方法。

Pass 1：删除注释中的任何左大括号或右大括号（以及可选的预处理器指令中的大括号）。

Pass 2：计算打开和关闭大括号，只要它们匹配（#open == #close），函数就会结束。下一个左大括号表示新函数的开始。

这种方法不是万无一失的。如果代码包含违反良好编程习惯的预处理器语句，它可能会失败。如果您遇到此类代码，您可能希望在代码通过预处理器阶段后对其运行您的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-05T02:27:30.360

我终于找到了一个很好的方法来做到这一点！
doxygen 已经做了很多事情来很好地处理函数和其他事情。
生成 doxygen conf 就像`doxygen -g doxygen_conf`
用你喜欢的编辑器打开 conf 文件并设置`GENERATE_XML = YES`. 您可能还想设置`RECURSIVE = YES`项目所需的其他内容，然后运行 ​​doxygen。定也`INPUT = [PATH_TO_PROJECT_BASE]`。在你的 doxygen 构建目录中，你会找到 html/ 和 xml/。

```
cd80@cd80 ~/lab/VulnVizOnLinux/linux-5.4.109 » cd build_doc
cd80@cd80 ~/lab/VulnVizOnLinux/linux-5.4.109/build_doc » ls
ExtractFunctions.ipynb  html  xml
cd80@cd80 ~/lab/VulnVizOnLinux/linux-5.4.109/build_doc » 
```

（忽略 ExtractFunctions.ipynb，这是我的）
`cd`到 xml 并打开任何 xml 文件并分析一段时间。
这就是我的做法。

```
import os
import xml.etree.ElementTree as ET

base_path = '/home/cd80/lab/VulnVizOnLinux/linux-5.4.109/'
open_files = {}
doc = ET.parse('/home/cd80/lab/VulnVizOnLinux/linux-5.4.109/build_doc/xml/4_2kernel_2module-plts_8c.xml')
root = doc.getroot()

for func in root.findall(".//memberdef/[@kind='function']"):
    name = func.find('./name').text
    location = func.find('./location')
    if 'bodyend' not in location.keys():
        continue # this memberdef is not a definition of function
    bodystart = int(location.attrib.get('bodystart'))
    bodyend = int(location.attrib.get('bodyend'))
    file_path = location.attrib.get('file')
    file_path = os.path.join(base_path, file_path)

    if file_path not in open_files.keys():
        with open(file_path, 'rb') as f:
            code = f.read().decode('utf-8')
        open_files[file_path] = code
    else:
        code = open_files[file_path]

    func_def = '\n'.join(code.split("\n")[bodystart-1:bodyend])
    print(func_def)
    print('='*30) 
```

结果：

```
static struct plt_entry __get_adrp_add_pair(u64 dst, u64 pc,
                        enum aarch64_insn_register reg)
{
    u32 adrp, add;

    adrp = aarch64_insn_gen_adr(pc, dst, reg, AARCH64_INSN_ADR_TYPE_ADRP);
    add = aarch64_insn_gen_add_sub_imm(reg, reg, dst % SZ_4K,
                       AARCH64_INSN_VARIANT_64BIT,
                       AARCH64_INSN_ADSB_ADD);

    return (struct plt_entry){ cpu_to_le32(adrp), cpu_to_le32(add) };
}
==============================
struct plt_entry get_plt_entry(u64 dst, void *pc)
{
    struct plt_entry plt;
    static u32 br;

    if (!br)
        br = aarch64_insn_gen_branch_reg(AARCH64_INSN_REG_16,
                         AARCH64_INSN_BRANCH_NOLINK);

    plt = __get_adrp_add_pair(dst, (u64)pc, AARCH64_INSN_REG_16);
    plt.br = cpu_to_le32(br);

    return plt;
}
==============================
bool plt_entries_equal(const struct plt_entry *a, const struct plt_entry *b)
{
    u64 p, q;

    /*
     * Check whether both entries refer to the same target:
     * do the cheapest checks first.
     * If the 'add' or 'br' opcodes are different, then the target
     * cannot be the same.
     */
    if (a->add != b->add || a->br != b->br)
        return false;

    p = ALIGN_DOWN((u64)a, SZ_4K);
    q = ALIGN_DOWN((u64)b, SZ_4K);

    /*
     * If the 'adrp' opcodes are the same then we just need to check
     * that they refer to the same 4k region.
     */
    if (a->adrp == b->adrp && p == q)
        return true;

    return (p + aarch64_insn_adrp_get_offset(le32_to_cpu(a->adrp))) ==
           (q + aarch64_insn_adrp_get_offset(le32_to_cpu(b->adrp)));
}
==============================
static bool in_init(const struct module *mod, void *loc)
{
    return (u64)loc - (u64)mod->init_layout.base < mod->init_layout.size;
}
==============================
u64 module_emit_plt_entry(struct module *mod, Elf64_Shdr *sechdrs,
              void *loc, const Elf64_Rela *rela,
              Elf64_Sym *sym)
{
    struct mod_plt_sec *pltsec = !in_init(mod, loc) ? &mod->arch.core :
                              &mod->arch.init;
    struct plt_entry *plt = (struct plt_entry *)sechdrs[pltsec->plt_shndx].sh_addr;
    int i = pltsec->plt_num_entries;
    int j = i - 1;
    u64 val = sym->st_value + rela->r_addend;

    if (is_forbidden_offset_for_adrp(&plt[i].adrp))
        i++;

    plt[i] = get_plt_entry(val, &plt[i]);

    /*
     * Check if the entry we just created is a duplicate. Given that the
     * relocations are sorted, this will be the last entry we allocated.
     * (if one exists).
     */
    if (j >= 0 && plt_entries_equal(plt + i, plt + j))
        return (u64)&plt[j];

    pltsec->plt_num_entries += i - j;
    if (WARN_ON(pltsec->plt_num_entries > pltsec->plt_max_entries))
        return 0;

    return (u64)&plt[i];
}
==============================
static int cmp_rela(const void *a, const void *b)
{
    const Elf64_Rela *x = a, *y = b;
    int i;

    /* sort by type, symbol index and addend */
    i = cmp_3way(ELF64_R_TYPE(x->r_info), ELF64_R_TYPE(y->r_info));
    if (i == 0)
        i = cmp_3way(ELF64_R_SYM(x->r_info), ELF64_R_SYM(y->r_info));
    if (i == 0)
        i = cmp_3way(x->r_addend, y->r_addend);
    return i;
}
==============================
static bool duplicate_rel(const Elf64_Rela *rela, int num)
{
    /*
     * Entries are sorted by type, symbol index and addend. That means
     * that, if a duplicate entry exists, it must be in the preceding
     * slot.
     */
    return num > 0 && cmp_rela(rela + num, rela + num - 1) == 0;
}
==============================
static unsigned int count_plts(Elf64_Sym *syms, Elf64_Rela *rela, int num,
                   Elf64_Word dstidx, Elf_Shdr *dstsec)
{
    unsigned int ret = 0;
    Elf64_Sym *s;
    int i;

    for (i = 0; i < num; i++) {
        u64 min_align;

        switch (ELF64_R_TYPE(rela[i].r_info)) {
        case R_AARCH64_JUMP26:
        case R_AARCH64_CALL26:
            if (!IS_ENABLED(CONFIG_RANDOMIZE_BASE))
                break;

            /*
             * We only have to consider branch targets that resolve
             * to symbols that are defined in a different section.
             * This is not simply a heuristic, it is a fundamental
             * limitation, since there is no guaranteed way to emit
             * PLT entries sufficiently close to the branch if the
             * section size exceeds the range of a branch
             * instruction. So ignore relocations against defined
             * symbols if they live in the same section as the
             * relocation target.
             */
            s = syms + ELF64_R_SYM(rela[i].r_info);
            if (s->st_shndx == dstidx)
                break;

            /*
             * Jump relocations with non-zero addends against
             * undefined symbols are supported by the ELF spec, but
             * do not occur in practice (e.g., 'jump n bytes past
             * the entry point of undefined function symbol f').
             * So we need to support them, but there is no need to
             * take them into consideration when trying to optimize
             * this code. So let's only check for duplicates when
             * the addend is zero: this allows us to record the PLT
             * entry address in the symbol table itself, rather than
             * having to search the list for duplicates each time we
             * emit one.
             */
            if (rela[i].r_addend != 0 || !duplicate_rel(rela, i))
                ret++;
            break;
        case R_AARCH64_ADR_PREL_PG_HI21_NC:
        case R_AARCH64_ADR_PREL_PG_HI21:
            if (!IS_ENABLED(CONFIG_ARM64_ERRATUM_843419) ||
                !cpus_have_const_cap(ARM64_WORKAROUND_843419))
                break;

            /*
             * Determine the minimal safe alignment for this ADRP
             * instruction: the section alignment at which it is
             * guaranteed not to appear at a vulnerable offset.
             *
             * This comes down to finding the least significant zero
             * bit in bits [11:3] of the section offset, and
             * increasing the section's alignment so that the
             * resulting address of this instruction is guaranteed
             * to equal the offset in that particular bit (as well
             * as all less signficant bits). This ensures that the
             * address modulo 4 KB != 0xfff8 or 0xfffc (which would
             * have all ones in bits [11:3])
             */
            min_align = 2ULL << ffz(rela[i].r_offset | 0x7);

            /*
             * Allocate veneer space for each ADRP that may appear
             * at a vulnerable offset nonetheless. At relocation
             * time, some of these will remain unused since some
             * ADRP instructions can be patched to ADR instructions
             * instead.
             */
            if (min_align > SZ_4K)
                ret++;
            else
                dstsec->sh_addralign = max(dstsec->sh_addralign,
                               min_align);
            break;
        }
    }

    if (IS_ENABLED(CONFIG_ARM64_ERRATUM_843419) &&
        cpus_have_const_cap(ARM64_WORKAROUND_843419))
        /*
         * Add some slack so we can skip PLT slots that may trigger
         * the erratum due to the placement of the ADRP instruction.
         */
        ret += DIV_ROUND_UP(ret, (SZ_4K / sizeof(struct plt_entry)));

    return ret;
}
==============================
int module_frob_arch_sections(Elf_Ehdr *ehdr, Elf_Shdr *sechdrs,
                  char *secstrings, struct module *mod)
{
    unsigned long core_plts = 0;
    unsigned long init_plts = 0;
    Elf64_Sym *syms = NULL;
    Elf_Shdr *pltsec, *tramp = NULL;
    int i;

    /*
     * Find the empty .plt section so we can expand it to store the PLT
     * entries. Record the symtab address as well.
     */
    for (i = 0; i < ehdr->e_shnum; i++) {
        if (!strcmp(secstrings + sechdrs[i].sh_name, ".plt"))
            mod->arch.core.plt_shndx = i;
        else if (!strcmp(secstrings + sechdrs[i].sh_name, ".init.plt"))
            mod->arch.init.plt_shndx = i;
        else if (!strcmp(secstrings + sechdrs[i].sh_name,
                 ".text.ftrace_trampoline"))
            tramp = sechdrs + i;
        else if (sechdrs[i].sh_type == SHT_SYMTAB)
            syms = (Elf64_Sym *)sechdrs[i].sh_addr;
    }

    if (!mod->arch.core.plt_shndx || !mod->arch.init.plt_shndx) {
        pr_err("%s: module PLT section(s) missing\n", mod->name);
        return -ENOEXEC;
    }
    if (!syms) {
        pr_err("%s: module symtab section missing\n", mod->name);
        return -ENOEXEC;
    }

    for (i = 0; i < ehdr->e_shnum; i++) {
        Elf64_Rela *rels = (void *)ehdr + sechdrs[i].sh_offset;
        int numrels = sechdrs[i].sh_size / sizeof(Elf64_Rela);
        Elf64_Shdr *dstsec = sechdrs + sechdrs[i].sh_info;

        if (sechdrs[i].sh_type != SHT_RELA)
            continue;

        /* ignore relocations that operate on non-exec sections */
        if (!(dstsec->sh_flags & SHF_EXECINSTR))
            continue;

        /* sort by type, symbol index and addend */
        sort(rels, numrels, sizeof(Elf64_Rela), cmp_rela, NULL);

        if (!str_has_prefix(secstrings + dstsec->sh_name, ".init"))
            core_plts += count_plts(syms, rels, numrels,
                        sechdrs[i].sh_info, dstsec);
        else
            init_plts += count_plts(syms, rels, numrels,
                        sechdrs[i].sh_info, dstsec);
    }

    pltsec = sechdrs + mod->arch.core.plt_shndx;
    pltsec->sh_type = SHT_NOBITS;
    pltsec->sh_flags = SHF_EXECINSTR | SHF_ALLOC;
    pltsec->sh_addralign = L1_CACHE_BYTES;
    pltsec->sh_size = (core_plts  + 1) * sizeof(struct plt_entry);
    mod->arch.core.plt_num_entries = 0;
    mod->arch.core.plt_max_entries = core_plts;

    pltsec = sechdrs + mod->arch.init.plt_shndx;
    pltsec->sh_type = SHT_NOBITS;
    pltsec->sh_flags = SHF_EXECINSTR | SHF_ALLOC;
    pltsec->sh_addralign = L1_CACHE_BYTES;
    pltsec->sh_size = (init_plts + 1) * sizeof(struct plt_entry);
    mod->arch.init.plt_num_entries = 0;
    mod->arch.init.plt_max_entries = init_plts;

    if (tramp) {
        tramp->sh_type = SHT_NOBITS;
        tramp->sh_flags = SHF_EXECINSTR | SHF_ALLOC;
        tramp->sh_addralign = __alignof__(struct plt_entry);
        tramp->sh_size = sizeof(struct plt_entry);
    }

    return 0;
}
============================== 
```

肮脏但按我想要的方式工作

# javascript - 删除 DOM 中的图像时如何防止内存泄漏？

> ID：13859041
> 
> 赞同：39
> 
> 时间：2012-12-13T11:39:55.803
> 
> 标签：javascript, html, webkit

[webkit](https://bugs.webkit.org/show_bug.cgi?id=31253)中有一个已知错误，即当您从 DOM 中删除图像时，它不会释放与其关联的内存。

这是经常加载图像的单页应用程序的问题。

各种建议的解决方案是：

*   [在从 DOM 中删除图像之前删除图像 src 属性](http://blog.thinkingtype.com/2012/07/ios-mobile-web-application-image-memory.html)
*   在从 DOM 中删除图像之前将图像 src 设置为“”
*   在从 DOM 中删除图像之前将图像设置为单像素图像
*   [创建有限数量的图像元素并不断回收它们](https://stackoverflow.com/questions/2986039/ipad-iphone-browser-crashing-when-loading-images-in-javascript/3267427#3267427)

前 3 种方法对我不起作用。回收图像元素的主要缺点是它意味着要编写大量代码来管理它。我正在通过 AJAX 加载可能包含图像的新 HTML，因此我不一定知道将加载的图像数量。

是否有其他解决方法来解决此问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-01T11:34:17.723

我使用了 3 种不同类型的方法...

**首先**。确实添加了一组图像并将垃圾收集留给浏览器。 ![在此处输入图像描述](../Images/a372461f8e296c26188d284320e331fa.png)

它肯定是垃圾收集，但过了一段时间，确保不需要已创建的图像。

**第二**。为图像的 src 使用了 data:URI 模式。

```
var s = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";

for (var i = 0; i < 100; i++){
    var img = document.createElement("img");
    img.src = s;
document.getElementById("myList1").appendChild(img);
setTimeout(function(){img = null;}, 1000);
} 
```

![在此处输入图像描述](../Images/c3da17aaef2f79f2aa13721784789c0a.png)

这看起来很相似，虽然对我来说好一点，因为我在浏览器前观看并观察到使用的内存较少，垃圾收集几乎与上面相同。

**第三**。在代码中进行垃圾收集。

```
var s = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";

for (var i = 0; i < 100; i++){
    var img = document.createElement("img");
    img.src = "dot.png";  // or the other, both mean the same here.
    img.src = s;
document.getElementById("myList1").appendChild(img);
setTimeout(function(){img = null;}, 1000);
} 
```

![在此处输入图像描述](../Images/aa5d6616cd85e588696644e86694c5df.png)

在这么短的测试时间内，我相信最后一种方法效果更好，因为它几乎可以立即释放空间，而无需等待进一步查看是否需要参考图像。

**总而言之，当您绝对觉得必须释放某些东西时，您最好自己使用垃圾收集。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T22:30:23.847

一个基本的图像池应该允许您回收 img 元素以供重复使用。由于您事先不知道总共有多少图像，因此只需根据需要扩展池大小即可。

像这样的东西应该工作：

```
 function getImg( id, src, alt ) {
        var pool = document.getElementById( 'image_pool' );
        var img = ( pool.children.length > 0 ) ? pool.removeChild( pool.children[0] ) : document.createElement( 'img' );
        img.id = id;
        img.src = src;
        img.alt = alt;
        return img;
    }
    function recycleImg( id ) {
        var img = document.getElementById( id );
        document.getElementById( 'image_pool' ).appendChild( img.parentNode.removeChild( img ) );
    } 
```

在页面某处放置一个隐藏的“image_pool”容器，以在使用之间隐藏回收的图像：

```
<div id="image_pool" style="display:none;"></div> 
```

然后任何时候你需要一个新的 img 元素，调用：

```
document.getElementById( 'some_element_id' ).appendChild( getImg( 'my_image_id', 'images/hello.gif', 'alt_text' ) ); 
```

当你完成它时：

```
recycleImg( 'my_image_id' ); 
```

* * *

**jQuery 替代品**

```
 function getImg( id, src, alt ) {
        var img;
        if( $("#image_pool").children().length > 0 ) {
            return $("#image_pool img:first-child").attr( { 'id': id, 'src': src, 'alt': alt } ).detach();
        }
        return $( "<img />'" ).attr( { 'id': id, 'src': src, 'alt': alt } );
    }
    function recycleImg( id ) {
        $( "#" + id ).detach().appendTo( $("#image_pool") );
    } 
```

当你需要一个新的 img 元素时：

```
getImg( 'my_image_id', 'images/hello.gif', 'alt_text' ).appendTo( $( "#some_element_id" ) ); 
```

*（回收工作同上）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T03:39:50.790

尝试将 Javascript DOM 树对象设置为“null”。

首先，使用 chrome 开发者工具界面之类的东西，在 DOM 树层次结构中定位对象并检查它并找到包含图像二进制文件的对象。

尝试将该对象设置为 null，例如`var obj = null;`.

这应该告诉 Javascript 不再引用子对象并强制释放对象的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-18T23:20:47.730

设置为`null`至少是这里的解决方案。（火狐 69）

在一个项目中，我以 1 到 5 个批次加载图像以进行比较。图片平均 8-9MB。如果不将`img`元素设置为`null`移除后，RAM 的堆积会非常显着，并且会耗尽可用内存。

所以，从这个改变：

```
function clear (n) {
    while (n.lastChild) {
        n.removeChild(n.lastChild);
    return n;
}; 
```

对此：

```
function clear (n) {
    let x;
    while (n.lastChild) {
        x = n.removeChild(n.lastChild);
        x = null;
    }
    return n;
}; 
```

现在根本没有 RAM 积累。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-31T05:48:01.633

将图像设置为 div 的背景怎么样？我相信 Flickr 正在为他们的移动 html5 应用程序做类似的事情。

# android - 从数据库中删除后刷新 ListView

> ID：13859043
> 
> 赞同：5
> 
> 时间：2012-12-13T11:39:59.237
> 
> 标签：android, database, listview

我有一个带有 SimpleCursorAdapter 的 ListView，它从数据库加载信息，我希望 onlongclicklistener 从数据库中删除一个项目，它工作正常，但列表不会刷新，我尝试使用 listView.refreshDrawableState(); 以及我找到的一些其他方法作为答案，但没有一种方法有效，这是我的 onCreate 函数：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_act);
    imzero = (ImageView)findViewById (R.id.iv_zero_pers);
    tvzero = (TextView)findViewById (R.id.tv_zero_pers);
    dbConnector = new DatabaseConnectorrso(MyListActivity.this);
    dbConnector.checkCursor();
    if (DatabaseConnector.de)//check if database is emplty
    {
    try{                
        dbConnector.open();             
        dbConnector.load();//load information from database
        dbConnector.close();
        imzero.setVisibility(View.GONE);
        tvzero.setVisibility(View.GONE);
    }
    catch(Exception ex) {
        ex.printStackTrace();
        dbConnector.close();
    }
    conAdapter =(new ImageAndTextAdapter(MyListActivity.this,
            R.layout.meniu_lista_element, null, null, null));
    setListAdapter(conAdapter);
    }
    else{
        dbConnector.close();
        imzero.setVisibility(View.VISIBLE);
        tvzero.setVisibility(View.VISIBLE);
    } 
```

我试图像这样刷新列表

```
 listView.setOnItemLongClickListener(new OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
            deleteDialog(Integer.parseInt (DatabaseConnector.id.get(position))); //delete from database 
            dbConnector.checkCursor();
            if (DatabaseConnector.de)
            {
            try{                
                dbConnector.open();             
                dbConnector.loadPersoane();
                listView.refreshDrawableState();
                dbConnector.close();
                imzero.setVisibility(View.GONE);
                tvzero.setVisibility(View.GONE);
            }
            catch(Exception ex) {
                ex.printStackTrace();
                dbConnector.close();
            }
            conAdapter =(new ImageAndTextAdapter(AltePersoane.this,
                    R.layout.meniu_lista_element, null, null, null));
            setListAdapter(conAdapter);
            }
            else{
                dbConnector.close();
                imzero.setVisibility(View.VISIBLE);
                tvzero.setVisibility(View.VISIBLE);
            }

            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:47:48.283

尝试

```
yourAdapter.notifyDataSetChanged(); 
```

或者

```
yourAdapter.getCursor().requery(); 
```

**更新**：

我认为你做错了什么，试试这个：

```
listView.setOnItemLongClickListener(new OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
        deleteDialog(Integer.parseInt (DatabaseConnector.id.get(position))); //delete from database 
        dbConnector.checkCursor();
        if (DatabaseConnector.de)
        {
        try{                
            dbConnector.open();             
            dbConnector.loadPersoane();
                                //Removed
            dbConnector.close();
            imzero.setVisibility(View.GONE);
            tvzero.setVisibility(View.GONE);
        }
        catch(Exception ex) {
            ex.printStackTrace();
            dbConnector.close();
        }
        conAdapter.notifyDataSetChanged();
        }
        else{
            dbConnector.close();
            imzero.setVisibility(View.VISIBLE);
            tvzero.setVisibility(View.VISIBLE);
        }

        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T14:24:06.570

尝试将您的活动中的活动意图相同，它可以工作

```
 Intent i = new Intent (MyActivity.this,MyActivity.class);
    startActivity (i); 
```

# mamp - 连接已重置

> ID：13859046
> 
> 赞同：0
> 
> 时间：2012-12-13T11:40:04.253
> 
> 标签：mamp

我正在使用 Mamp 执行网站...我在那里有几个项目，一切都很好。今天干草导出其他项目，而不是我从 FTP 下载的，我看不到 index.php

当我将路由器放入浏览器时，我得到

```
The connection has been reset 
```

我拥有项目文件的所有权限......知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T08:41:28.853

这不是一个永久的解决方案（可能是一个糟糕的解决方案），但我有时也会遇到这个问题。重新启动 MAMP 可能会有所帮助。

# php - 如果条件带有希伯来字母

> ID：13859052
> 
> 赞同：-4
> 
> 时间：2012-12-13T11:40:15.407
> 
> 标签：php, character-encoding

> **可能重复：**
> [从变量中拆分第一个字母](https://stackoverflow.com/questions/13858706/split-the-first-letter-from-variable)

我有代码：

```
if($firstletter=='I')
{
     $picture = ImageCreateFromPNG ($global['maleBackgroundImages'][5]);
}
else
{
     $picture = ImageCreateFromPNG ($global['maleBackgroundImages'][4]);
} 
```

如果我想将 'I' 更改为希伯来字母，我该怎么做？如果我想检查范围

```
$firstletter>a **and** $firstletter<b 
```

我在if中怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:05:13.003

假设 UTF-8 字符集

```
$firstletter = mb_substr($userData['name'], 0, 1, 'UTF-8');
if ($firstletter=='א') {
    ...
} 
```

或修改为适当的字符集

# ruby-on-rails - 在 Heroku 上使用 redistogo 时如何在本地测试我的生产配置

> ID：13859053
> 
> 赞同：1
> 
> 时间：2012-12-13T11:40:18.547
> 
> 标签：ruby-on-rails, heroku, configuration, redis, environment-variables

我有**/config/initializers/redis.rb**：

```
if Rails.env == "development"
  $redis = Redis.new(:host => 'localhost', :port => 6379)
elsif Rails.env == "test"
  $redis = Redis.new(:host => 'localhost', :port => 6379)
elsif Rails.env == "production"
  uri = URI.parse(ENV["REDISTOGO_URL"])
  REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password)
end 
```

显然，当我在本地运行应用程序时，`REDISTOGO_URL`是未定义的。

鉴于此，我该如何`rails server -e production`工作？

我需要在本地访问生产环境才能运行`RAILS_ENV=production bundle exec rake assets:precompile`.

目前，这会产生以下错误：

```
$ RAILS_ENV=production bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/Users/steven/.rvm/rubies/ruby-1.9.3-p286/bin/ruby /Users/steven/.rvm/gems/ruby-1.9.3-p286/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
rake aborted!
bad URI(is not URI?): 
/Users/steven/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/uri/common.rb:176:in `split'
/Users/steven/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/uri/common.rb:211:in `parse'
/Users/steven/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/uri/common.rb:747:in `parse'
/Users/steven/Dropbox/testivate/config/initializers/resis.rb:6:in `<top (required)>'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `block in load'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/engine.rb:587:in `each'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/engine.rb:587:in `block in <class:Engine>'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `block in run_initializers'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/steven/Dropbox/testivate/config/environment.rb:6:in `<top (required)>'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/application.rb:103:in `require_environment!'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.9/lib/rails/application.rb:297:in `block (2 levels) in initialize_tasks'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/steven/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/actionpack-3.2.9/lib/sprockets/assets.rake:93:in `block (2 levels) in <top (required)>'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/steven/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:187:in `block in invoke_prerequisites'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:185:in `each'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:185:in `invoke_prerequisites'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
/Users/steven/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/actionpack-3.2.9/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/steven/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/bin/rake:23:in `load'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/bin/rake:23:in `<main>'
Tasks: TOP => environment
rake aborted!
Command failed with status (1): [/Users/steven/.rvm/rubies/ruby-1.9.3-p286/...]
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `call'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `sh'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `sh'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/file_utils.rb:80:in `ruby'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `ruby'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/actionpack-3.2.9/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/actionpack-3.2.9/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/actionpack-3.2.9/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/steven/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/bin/rake:23:in `load'
/Users/steven/.rvm/gems/ruby-1.9.3-p286/bin/rake:23:in `<main>'
Tasks: TOP => assets:precompile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:58:45.783

正如 bimsapi 在评论中提到的那样，一种简单的方法是运行

```
export REDISTOGO_URL='redis://localhost:6379' 
```

在您的命令行中，也许在您重新启动时将其放入您的 shell 配置中？

另一种方法是如果它不存在就创建它：

例如/

```
ENV["REDISTOGO_URL"] ||= 'redis://localhost:6379' if Rails.env.production? 
```

此外，您的条件逻辑在上面的查询中看起来有点不合适。

您可能只想完全放弃条件并改为这样做？：

```
ENV["REDISTOGO_URL"] ||= 'redis://localhost:6379'
uri = URI.parse(ENV["REDISTOGO_URL"])
$redis = REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password) 
```

HTH？

编辑：刚刚在配置 Rails 环境变量时看到了这个 - [http://railsapps.github.com/rails-environment-variables.html](http://railsapps.github.com/rails-environment-variables.html)

# javascript - 在 Nivoslider 中跳过第一张幻灯片

> ID：13859054
> 
> 赞同：0
> 
> 时间：2012-12-13T11:40:20.993
> 
> 标签：javascript, jquery, html, nivo-slider

我在我正在构建的一个小型 WordPress 网站上使用**Nivoslider 3.1 版。**

我想知道是否有办法告诉 Nivoslider**始终**忽略幻灯片 1。

因此，如果我的 HTML 是：

```
<div id="slider" class="slider nivoSlider">
<img src="1.jpg" /> <!-- Ignore this ALWAYS -->
<img src="2.jpg" />
<img src="3.jpg" />
<img src="4.jpg" />
</div> 
```

因此，滑块将**始终从 2.jpg 开始，**并且**永远不会显示 1.jpg**。这可能吗？

这是[Nivoslider Demo](http://nivo.dev7studios.com/demos/)供参考。

这是一个奇怪的解决方法，我同意，但是当我使用 foreach 循环填充滑块时，我当前的滑块实现不起作用。它确实填充了它，但滑块卡在“加载”上。

作为记录，这是我当前的实现：

```
<div id="slider" class="slider nivoSlider">
                <?php
                    $id = get_the_ID();
                    $custom_fields = get_post_custom($id);
                    $my_custom_field = $custom_fields['img1'];
                    foreach ( $my_custom_field as $key => $value ) {
                        echo '<img src="/wp-content/themes/boilerplate/images/csg-50c8a86d6bfc0.png" height="350" width="620">';
                    }
                ?>
                </div> 
```

非常感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:58:27.930

根据您下载的特定版本的 nivoslider/您可能对其进行的特定编辑：

寻找幻灯片放映.js

并编辑该行

```
startSlide: 0, // Set starting Slide (0 index) 
```

在第一个循环中跳过它

还有......（我在这里很紧张）

在 jquery.nivo.slider 中编辑函数...

```
$.fn.nivoSlider = function(options) {

    //Defaults are below
    var settings = $.extend({}, $.fn.nivoSlider.defaults, options);

    return this.each(function() {
        //Useful variables. Play carefully.
        var vars = {
            currentSlide: 0,
            currentImage: '',
            totalSlides: 0,
            randAnim: '',
            running: false,
            paused: false,
            stop:false
        }; 
```

这样您就可以对幻灯片的绝对数量进行硬编码，并且它应该在达到 1.jpg 之前重新启动循环。

不确定这是否可行——像这样硬编码这样的元素通常不是一个好主意；您还希望删除用户控件以防止手动导航到该幻灯片。

它确实引出了一个问题：为什么要包含一张您永远不想显示的幻灯片？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-15T10:51:01.910

以上对我不起作用..对*我*有用的（跳过第四张图片）是这样的：

```
 $('#slider').nivoSlider({
       prevText: '',
       nextText: '',
       controlNav: false,
       beforeChange: function ()
       {
           var current = $('#slider').data('nivo:vars').currentSlide;
           //if the currentIndex = 2, the next will be 3, which is the fourth image, 
           //which is the one I wanted to skip
           if(current == 2)
           {
               $('#slider').data('nivo:vars').currentSlide = 3;
           }
       }
   }); 
```

对于第一张图片，您可能应该说 if current == * last-index * { ... currentSlide = 0 }

# fft - FFT 幅度输出

> ID：13859058
> 
> 赞同：1
> 
> 时间：2012-12-13T11:40:31.263
> 
> 标签：fft

我刚刚进入信号处理领域，需要做一些 DFT/FFT 工作。

如果我采用两个频率为 2Hz 和 5Hz 的信号：x(t)=sin(2*2pi*t)+sin(5*2pi*t)。我以 100Hz 采样 5 秒（所以我的 DFT 大小为 500）。

因为我的输入是真实值，所以我得到了一个对称的 DFT，因此可以丢弃第二半并通过执行 sqrt(re^2+c^2) 将 DFT 值转换为幅度。

我的 bin 宽度是 100/500 = 0.2Hz，所以我得到：![在此处输入图像描述](../Images/90a62445c44cc8eecd5613847c6bf592.png)

正如预期的那样，峰值在 2Hz 和 5Hz。

我的问题是：为什么幅度不同？

在相关说明中，为什么在 2hz 和 5Hz 处没有两个完美的尖峰，即图表在 1.5 和 2.5 等处具有非零值。这是频谱泄漏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:43:48.393

我希望您的 500 个数据点被处理为 512 点 FFT（大多数 FFT 库不支持任意大小的输入，因此通常它们将零填充到下一个最高的 2 次幂）。如果是这种情况，那么您将看到[频谱泄漏](https://en.wikipedia.org/wiki/Spectral_leakage)的影响。在 FFT 之前应用[窗口函数应该可以解决这个问题。](https://en.wikipedia.org/wiki/Window_function)请注意，您仍然会在峰的两侧看到“裙子”——这是由于有限采样窗口引入的不确定性。

# android - Google Map API v2 充气机在旧手机上失败

> ID：13859059
> 
> 赞同：1
> 
> 时间：2012-12-13T11:40:30.703
> 
> 标签：android, google-maps-mobile

我刚刚在应用程序中实现了一个地图，它在 Galaxy S3 中完美运行。使用带有 API8 的旧手机 HTC Sense 测试我的应用程序会引发充气机问题。我认为它可能与操作系统或 OGL2 有关。isGooglePlayServicesAvailable(this) 返回正确的值。请帮帮我：

活动.java

```
public class MyActivity extends Activity
{
 @Override
 public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.initializeInterface();
 }

 private void initializeInterface() {
    final int available = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
    this.setContentView(R.layout.main);
 }
} 
```

主要的.xml

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    class="com.google.android.gms.maps.MapFragment"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@id/footer"
    android:layout_below="@id/header" /> 
```

清单.xml

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="com.stuff.permission.MAPS_RECEIVE" />

<permission
    android:name="com.stuff.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:icon="@drawable/icon"
    android:label="@string/application_name" >

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="@string/map_api_key_device"/>

    <activity
        android:name=".MyActivity"
        android:configChanges="orientation"
        android:launchMode="singleTop"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter> <action android:name="android.intent.action.MAIN" /> 
           <category android:name="android.intent.category.LAUNCHER" /> 
        </intent-filter>
    </activity>
</application> 
```

错误

```
12-13 12:14:13.865: E/My ERROR(22878): Binary XML file line #85: Error inflating class fragment
12-13 12:14:13.875: E/android.view.LayoutInflater.createViewFromTag(22878): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
12-13 12:14:13.895: E/android.view.LayoutInflater.rInflate(22878): at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
12-13 12:14:13.915: E/android.view.LayoutInflater.inflate(22878): at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
12-13 12:14:13.915: E/android.view.LayoutInflater.inflate(22878): at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-13 12:14:13.935: E/android.view.LayoutInflater.inflate(22878): at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-13 12:14:13.945: E/com.android.internal.policy.impl.PhoneWindow.setContentView(22878): at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
12-13 12:14:13.945: E/android.app.Activity.setContentView(22878): at android.app.Activity.setContentView(Activity.java:1654) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:59:12.890

这与您尝试在 API 级别 8 设备上使用本机 API 级别 11 片段有关。切换到`FragmentActivity`并且`SupportMapFragment`如果您希望您的代码在比 Android 3.0 更早的版本上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:40:38.103

我通过从 /extras/android/compatibility/v13 添加 v13 库并将我的 Activity 更改为 FragmentActivity 并将 MapFragment 更改为 SupportMapFragment 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T00:17:09.773

对我来说帮助应用程序项目->右键单击->属性-> android->项目构建目标->并破解早期的android版本。（使用谷歌 api）

如果没有，请下载一个`SDK manager`

# opengl - 不可变纹理是否需要 GL_TEXTURE_MAX_LEVEL？

> ID：13859061
> 
> 赞同：2
> 
> 时间：2012-12-13T11:40:39.343
> 
> 标签：opengl, textures, opengl-4

当使用函数分配纹理时`glTexImage*`，我知道我需要设置`glTexParameteri(GL_TEXTURE_MAX_LEVEL)`一个合理的值并指定所有级别直到该值，[如此处所述](http://www.opengl.org/wiki/Common_Mistakes#Creating_a_complete_texture)。

我没想到在`glTexStorage*`函数的情况下也需要这样做，因为它们接受层数作为参数并预先为该层数分配内存。尽管如此，我注意到我无法对以这种方式定义的不可变纹理进行采样 - 直到我调用或`glGenerateMipmap`指定.`GL_TEXTURE_MAX_LEVEL``levels-1`

我没有找到任何必要的官方理由，并且我希望不可变纹理的参数是不可变的（并且初始化良好）。有人可以确认这种行为是否（以及为什么）正确吗？还是可能是 AMD 驱动程序错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:47:27.210

OK, I think I got that:

The parameter `levels` of `glTexStorage` is indeed stored in the texture object, but as `GL_TEXTURE_IMMUTABLE_LEVELS`, not as `GL_TEXTURE_MAX_LEVEL`, as I thought.

The parameter `GL_TEXTURE_MAX_LEVEL` hence remains at the default large value. *(It's possible to change it manually: the immutable flag of texture object only relates to the texture buffer and its format, but not buffer data or parameters).*

The texture immutability should affect LOD calculation in the following way according to the spec:

> if TEXTURE_IMMUTABLE_FORMAT is TRUE, then level[base] is clamped to the range [0; level[immut] - 1]

So leaving `GL_TEXTURE_MAX_LEVEL` intact (= 1000) for an immutable texture shall have the same effect as setting it to `levels-1`.

Verdict: driver bug; the driver apparently omits this clamping step.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:09:34.407

> 我知道我需要将 glTexParameteri(GL_TEXTURE_MAX_LEVEL) 设置为一个合理的值，并指定直到该值的所有级别，如此处所述。

好吧，你不必。GL_TEXTURE_MAX_LEVEL 的默认值为 1000，因此比您将合理使用的任何图像金字塔都大。

> 尽管如此，我注意到我无法对以这种方式定义的不可变纹理进行采样 - 直到我调用 glGenerateMipmap 或将 GL_TEXTURE_MAX_LEVEL 指定为级别 1。

是的，这是因为图像存储独立于图像采样。GL_TEXTURE_MAX_LEVEL 的值是一个影响采样时图像访问的参数（您也可以将其设置为采样器对象），它与实际纹理图像存储无关。如果您只想选择渲染期间使用的图像子范围，或者仅将图像上传到分配的图像金字塔的子集，您也可以*在*图像规范之后更改使用的图像金字塔级别的范围。

*编辑改写澄清*

# jquery - .post完成后jQuery刷新div

> ID：13859066
> 
> 赞同：0
> 
> 时间：2012-12-13T11:40:56.660
> 
> 标签：jquery, jquery-post

一段脚本运行后是否可以刷新 div？

我正在尝试做一个手动排名系统，其中列出了项目，但是当我更改输入中的数字时，以下运行

**jQuery**

```
$('input.ranking').keyup(function(e) {
        var thisClass = $(this).attr('class');
        var substr = thisClass.split('-');
        var pdID = substr[1];
        var pdRank = $(this).val();
        qString = 'pdID='+pdID+'&pdRank='+pdRank;
        if(typeof timeout != 'undefined') clearTimeout(timeout);
        timeout = setTimeout(function(){
            //console.log(qString);
            $.post('/assets/inc/set-rank.php', qString, function (data) {
                //console.log(data);
            }, "json");

        }, 1000);
    }); 
```

这不会刷新列表或页面。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:43:01.783

用这个：

```
$.post('/assets/inc/set-rank.php', function(data) {
  $('.yourDivClass').html(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:54:59.397

您不需要设置超时，这只是....奇怪。你有正确的想法，只是需要一些改进。逻辑是这样的：在 keyup 上发送一个 ajax 帖子，然后获取结果并显示它。除非结果是 JSON 格式，否则不需要 JSON。如果是，那么您需要修改显示的数据。

非 JSON：

```
$('input.ranking').keyup(function(e) {
    var thisClass = $(this).attr('class');
    var substr = thisClass.split('-');
    var pdID = substr[1];
    var pdRank = $(this).val();
    qString = 'pdID=' + pdID + '&pdRank=' + pdRank;
    $.post('/assets/inc/set-rank.php', qString, function(data) {
        $('#display-div').html(data);
    });
});​ 
```

JSON：

```
$('input.ranking').keyup(function(e) {
    var thisClass = $(this).attr('class');
    var substr = thisClass.split('-');
    var pdID = substr[1];
    var pdRank = $(this).val();
    qString = 'pdID=' + pdID + '&pdRank=' + pdRank;
    $.post('/assets/inc/set-rank.php', qString, function(data) {
        $('#display-div').html(data.results);
    }, "json");
});​ 
```

# objective-c - 从非 ARC 代码调用 ARC 方法

> ID：13859068
> 
> 赞同：1
> 
> 时间：2012-12-13T11:41:11.330
> 
> 标签：objective-c, ios, automatic-ref-counting

我有一个使用 ARC 库的非 ARC 项目。我很困惑是否应该释放库方法返回的对象。下面是一些例子：

```
- (void)test{
    LibObject* obj1 = [[LibObject alloc] init];
    LibObject* obj2 = [obj1 otherObj];

    [obj1 release]; //should I release it?
    [obj2 release]; //should I release it?
} 
```

据我所知，如果对象在自动释放池中，我应该不理会它。否则，我应该释放它。

然而，[ARC文件](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)说

> 当从这样的函数或方法返回时，ARC 在返回语句的求值点保留值，然后离开所有局部范围，然后平衡保留，同时确保值跨越调用边界。在最坏的情况下，这可能涉及自动释放，但调用者不能假定该值实际上在自动释放池中。

该文件是否暗示我应该始终释放该对象，因为我不能假设该对象是自动释放的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:30:10.403

请参阅《高级内存管理编程指南》中的[内存管理策略：](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)

> **您拥有您创建的任何对象 您**
> 使用名称以“alloc”、“new”、“copy”或“mutableCopy”开头的方法创建对象（例如，alloc、newObject 或 mutableCopy）。
> 
> **您不得放弃您不拥有的对象的所有权**

这些规则与使用 ARC 编译的方法一致。在[ARC 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)中，第一类方法的行为在“3.2.2\. Retained return values”中描述：

> 从这样的函数或方法返回时，ARC 保留返回语句评估点的值，...

这意味着调用者必须释放对象。

第二类方法在“3.2.3.未保留的返回值”中有描述：

> 当从这样的函数或方法返回时，ARC 会在返回语句的求值点保留值，然后离开所有局部范围，然后平衡保留 ...

这意味着调用者不能释放对象。

所以在你的例子中：

```
LibObject* obj1 = [[LibObject alloc] init];
LibObject* obj2 = [obj1 otherObj];
[obj1 release]; //should I release it? --> YES
[obj2 release]; //should I release it? --> NO 
```

你拥有`obj1`，因为它是用创造出来的`alloc`，所以你必须释放`obj1`。

你不拥有`obj2`，因此你不能释放它。

*注意：*如果您在代码上运行 Xcode 静态分析器，它会准确显示违反这些规则的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:49:18.050

当您从启用 ARC 的类获取对象到非启用 ARC 的类时，您有责任管理内存。

**ARC 只是简单地在编译期间在启用 ARC 的代码中添加保留和释放**。它不会管理处于非 ARC 模式的其他类或对象的内存。

您应该在需要后释放这些对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:47:20.277

我的理解是，如果您`-fno-objc-arc`为此文件使用编译器标志，您需要自己处理保留/释放。所以你应该打电话`[obj1 release]`。如果您不应该自己调用它，编译器会相应地警告您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:20:38.990

据我了解，在您的非 ARC 代码中，您只需像往常一样使用启用 ARC 的库执行所有保留/释放（就像与其他非 ARC 代码交互一样）。

我创建了一个简单的应用程序来证明这种行为。

**测试代码 -没有**ARC编译

```
- (void)testARC
{
    ARCLib *al = [[ARCLib alloc] init];
    NSLog(@"%p retainCount = %u", al, [al retainCount]);
    [al release];

    ARCLib *al2 = [ARCLib arcLib];
    NSLog(@"%p retainCount = %u", al2, [al2 retainCount]);
} 
```

ARCLib -**使用**ARC编译

```
@implementation ARCLib

+ (id)arcLib
{
    return [[self alloc] init];
}

- (id)init
{
    self = [super init];
    if (self)
    {
        NSLog(@"%p init",self);
    }
    return self;
}

- (void)dealloc
{
    NSLog(@"%p dealloc",self);
}

@end 
```

**结果**

```
2012-12-13 20:15:21.879 ARCTest[15206:907] 0x1e821500 init
2012-12-13 20:15:21.883 ARCTest[15206:907] 0x1e821500 retainCount = 1
2012-12-13 20:15:21.884 ARCTest[15206:907] 0x1e821500 dealloc
2012-12-13 20:15:21.885 ARCTest[15206:907] 0x1dd26060 init
2012-12-13 20:15:21.886 ARCTest[15206:907] 0x1dd26060 retainCount = 1
2012-12-13 20:15:21.893 ARCTest[15206:907] 0x1dd26060 dealloc 
```

**回答你的问题**

您应该释放 obj1，但不需要释放 obj2。

# coffeescript - 获取一维数组，而不是多维

> ID：13859071
> 
> 赞同：0
> 
> 时间：2012-12-13T11:41:17.277
> 
> 标签：coffeescript

当我跑

```
[w*2 for w in [1, 2, 3]] 
```

我明白了

```
[[2, 4, 6]] 
```

但实际上我想要

```
[2, 4, 6] 
```

[活生生的例子](http://coffeescript.org/#try%3aconsole.log%20%5Bw%2a2%20for%20w%20in%20%5B1,%202,%203%5D%5D%0A)

显然以下是可选的，但我不想依赖它：

```
[w*2 for w in [1, 2, 3]][0] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:02:26.577

我自己找到了解决方案：

```
(w*2 for w in [1, 2, 3])
// -> [2, 4, 6] 
```

# python - 画布（和/或标签框）背景，奇怪的灰色

> ID：13859072
> 
> 赞同：3
> 
> 时间：2012-12-13T11:41:20.087
> 
> 标签：python

我很难弄清楚灰色的来源，首先是一张图片来说明：

![图片](../Images/bfd5dd8dd8785295dfc7f2cfa2fc94bf.png)

如您所见，我绘制了 3 个箭头（我知道这有点难看）显示灰色轮廓。

我的代码是：

```
master = Tk()
master.title("Skrå kast")
master.resizable(width = FALSE, height = FALSE)
w = Canvas(master, width=630, height=598, bg="#FFFFFF")
w.grid(row = 1, column = 2)

#...

labelframe = LabelFrame(master, text = "Parametre for affyring", background = '#FFFFFF', bd = 3, font = ("Aeria", "8", "bold"))
labelframe.grid(row = 1, column = 1, ipady = 217, ipadx = 2, padx = 3, pady= 2, sticky = N)

#...

w.create_rectangle(10, 4, 630, 596, fill = "#ffffff", outline = "#000000")
w.create_text(320, 30, text = "Simulering af skud med kugle", fill = "#000000", font = ("Arial", "20", "bold")) 
```

那个灰色的轮廓到底是从哪里来的？

我怀疑它是标签框，但是我无法找到摆脱它的方法。甚至没有篡改填充工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:51:06.110

该颜色几乎可以肯定是根小部件的背景颜色。你可以很容易地通过做一些事情来检查它`master.configure(background="red")`，看看这个神秘的颜色是否变成红色。

# asp.net-mvc - 具有单个数据库的单个 aspnet mvc 网站，将服务于多个域请求

> ID：13859074
> 
> 赞同：1
> 
> 时间：2012-12-13T11:41:26.553
> 
> 标签：asp.net-mvc, iis-7, multi-tenant

我有一个 ASPNet MVC 4 Web 应用程序，并且有一个包含公司数据的单一数据库。我将拥有多家公司，他们将使用自己的公司域向应用程序请求。在我的数据库中，我保留了公司的域名与公司的基本名称。

除了数据之外，我的应用程序的所有功能对所有公司都是通用的。由于数据是按公司存储的，所以我很容易使用 CompanyId 获取数据。

我的计划是将我的应用程序托管到 www.mydomain.com。当公司用户使用他们的域请求 www.company.com 时，它将访问我的应用程序，该应用程序托管为 www.mydomain.com。收到请求后，我的应用程序将从 Web 请求 (www.company.com) 中获取域名，并从数据库中找出 CompanyId，并返回请求的页面，其中公司数据仅按 CompanyId 过滤。

现在我的问题是如何将公司的域 (www.company.com) 指向 www.mydomain.com，以便当用户从 www.company.com 请求时，它会访问 www.mydomain。 com。在这里我想提一下，公司的域 (www.company.com) 完全致力于服务来自 www.mydomain.com 的请求。它与任何其他网站没有任何约束力。我不知道 DNS 设置，我不确定是否必须更改 MVC 应用程序中的路由。请通过详细建议的方式帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:57:30.817

我做了一些与您所描述的几乎相同的事情，并且我使用了相同的设置。唯一剩下的就是设置 DNS。

执行此操作的首选方法是将 www.company.com 放在专用 IP 地址上。

然后，在 www.mydomain.com 上，您将创建一个 A 记录以指向与 www.company.com 相同的 IP 地址

这样，对 www.mydomain.com 的请求将被发送到与 www.company.com 相同的位置，您可以检查主机标头以在数据库中查找 companyId。

如果您没有专用 IP 地址，则可以使用 CNAME，但您只能指向 www.mydomain.com 的“www”版本，而不是“mydomain.com”（没有“www” ）。

# sql - Django：在 Django 模型查询期间访问和更新要过滤的变量？

> ID：13859076
> 
> 赞同：0
> 
> 时间：2012-12-13T11:41:32.963
> 
> 标签：sql, django, django-models

我希望为我的模型构建一个 Django 查询，让我的过滤器随着查询的进行而改变。

我有一个`Activity`我正在查询的模型。每个对象都有一个字段，我正在查询存储在一个日期范围内`postal_code`的数组中的多个邮政编码。`postal_codes_to_query`我想确保在每个邮政编码中均匀分布对象。我的数据库有数百万个活动，所以当我查询有限制时，我只会`activities`在早期收到匹配的邮政编码`postal_codes_to_query`。我当前的查询如下：

```
Activity.objects.filter(postal_code__in=postal_codes_to_query).filter(start_time_local__gte=startTime).filter(start_time_local__lte=endTime).order_by('start_time_local')[:10000] 
```

如果我要搜索 20 个邮政编码，理想情况下，我希望收到 10000 ，我查询的每个邮政编码`activities`都有 500 。`activities`

这在 Django 中可能吗？如果没有，是否有一些我可以编写的自定义 SQL 来实现这一点？我正在使用 Heroku Postgres 数据库以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:59:03.583

您不能在单个查询中执行此操作，无论是在 Django 中，还是在 SQL 中（据我所知）。

最好的办法是简单地遍历 zip 列表，在每个 zip 中查询最多 500 个：

```
activities_by_zip = {}
for code in postal_codes_to_query:
    activities = Activity.objects.filter(postal_code=code).filter(
        start_time_local__gte=startTime).filter(
        start_time_local__lte=endTime).order_by('start_time_local')[:500]
    activities_by_zip[code] = activities 
```

当然，这是每个 zip 的一个查询，但我认为这是你要做的最好的事情。

# javascript - 如何知道 DOM 的第一个就绪状态

> ID：13859080
> 
> 赞同：2
> 
> 时间：2012-12-13T11:41:43.860
> 
> 标签：javascript, html, dom, document-ready

我正在尝试获取 DOM 的第一个就绪状态。第二个，第三个等不是我感兴趣的，而是第一个。有什么技巧可以让 DOM 的第一个就绪状态？

```
$(document).ready(function() {
  // is it the first ready state?
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:50:59.237

有 4 个 readyState 可能值：

*   未初始化 - 尚未开始加载
*   正在加载 - 正在加载
*   交互 - 已加载足够，用户可以与之交互
*   完成 - 满载

要查看它的价值，请使用以下代码：

```
document.onreadystatechange = function () {
    if (document.readyState === YourChoice) {
        // ...
    }
} 
```

我无法捕捉到`uninitialized`readyState。（但我为什么需要它？）

如果您需要一个侦听器来完全加载 DOM，请使用：

```
document.addEventListener('DOMContentLoaded', YourListener); 
```

或者

```
document.addEventListener('load', YourListener); 
```

甚至

```
window.onload = YourListener; 
```

对于jQuery：

```
$(document).on("DOMContentLoaded", function() { }); 
```

或者

```
$(document).on("load", function() { }); 
```

或者

```
$(window).on("load", function() { }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:48:41.683

啊，你正在使用 jQuery。看看[文档](http://api.jquery.com/ready/)：只有一个`ready`事件！我永远不会开火多次。[在内部](https://github.com/jquery/jquery/blob/master/src/core.js#L851)，这甚至是用[Promise](http://api.jquery.com/category/deferred-object/)处理的，所以它*不能*多次触发。

# python - Python：Thermopy 模块“AttributeError：‘模块’对象没有属性‘burcat’”

> ID：13859082
> 
> 赞同：1
> 
> 时间：2012-12-13T11:41:47.743
> 
> 标签：python

我刚刚不得不尝试自学 python 来完成一个工作项目，但进展并不顺利。

我正在尝试使用“Thermopy”模块，以便我可以制作用于计算气体动力学等的程序。

我以为我已经正确安装了 Thermopy 但是当我去快速测试它时，我无法让它工作，它可以很好地导入模块并且 help(thermopy) 似乎显示它导入了正确的文件（我认为？）但是如果我然后尝试调用应该在模块中的任何类，我会收到错误 AttributeError: 'module' object has no attribute 'psicrometry' （或者我试图调用的任何类

例如进口 thermopy

```
help(thermopy)
print thermopy.__file__

thermopy.psicrometry.test_wark() 
```

给出结果

```
Help on package thermopy:

NAME
    thermopy

FILE
    c:\python27\lib\site-packages\thermopy-0.3-py2.7.egg\thermopy\__init__.py

PACKAGE CONTENTS
    burcat
    codata
    combustion
    constants
    iapws
    psicrometry
    units

DATA
    __version__ = '0.3'

VERSION
    0.3

C:\Python27\lib\site-packages\thermopy-0.3-py2.7.egg\thermopy\__init__.pyc

Traceback (most recent call last):
  File "\\FGBD101000.wsatkins.com\GBBSB_Home$\BROW4631\My Documents\Python\thermopy testing",   line 7, in <module>
    thermopy.psicrometry.test_wark()
AttributeError: 'module' object has no attribute 'psicrometry' 
```

非常感谢您对此的任何帮助，我对这一切都很陌生，并且没有任何先前的编程经验，所以如果我做任何愚蠢的事情，我深表歉意，但我无法理解我看到的任何其他类似的答案网站上的问题。

非常感谢詹姆斯

# zend-framework - 如何将参数从控制器传递到 Zend_Form？

> ID：13859090
> 
> 赞同：1
> 
> 时间：2012-12-13T11:42:17.387
> 
> 标签：zend-framework, zend-form, zend-controller, zend-config, zend-loader

我知道这个问题已经[在这里](https://stackoverflow.com/questions/5496516/pass-a-variable-from-zend-controller-to-zend-form)回答了。但这对我不起作用。表单是使用 PluginLoader 生成的：

```
$formClass = Zend_Registry::get('formloader')->load('Payment');
$form = new $formClass(array('someval' => $my_arr)); 
```

付款.php：

```
class Form_Payment extends Zend_Form
{

   protected $_someval = array();

   public function init()
   {
      $this->setAction('payment/save');
      //....
      $this->addElement('multiCheckbox', 'store_id', array('label' => 'Someval:', 'required' => true, 'multiOptions' => $this->getSomeval()))
   }

   public function setSomeval($someval) {
      $this->_someval = $someval;
   }

   public function getSomeval() {
      return $this->_someval;
   }
} 
```

正如我所看到的，加载方法只返回类名，所以`new $formClass();`是相等的`new Form_Payment()`，但为什么这不接受参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:45:30.460

好的，我自己找到了一种方法。**我正在寻找一种在 Zend_Form 初始化时注入一些参数的方法。**似乎唯一的方法是将参数传递给构造函数——它在 init 方法之前执行。

```
class Form_Payment extends Zend_Form
{

   private $_someval;

   public function __construct(array $params = array())
   {
       $this->_someval = $params['someval'];
       parent::__construct();
   }

   public function init()
   {
      $this->setAction('payment/save');
      //....
      $this->addElement('multiCheckbox', 'store_id', 
         array('label' => 'Someval:', 
               'required' => true, 
               'multiOptions' => $this->_someval // passed params now available
         )) 
   }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T11:58:54.477

您可以将自定义功能添加到您的表单类中，例如

```
class Form_Payment extends Zend_Form
{
     public function init()
     {
          $this->setAction('payment/save');
          // and so on
     }

     public function doSome()
     {
          $this->setAction('other/action');
     }
} 
```

并在控制器中实例化表单后调用它

```
$form = new $formClass();
$form->doSome(); 
```

# android - 如何通过应用程序小部件启用/禁用网络设置“仅使用 2G 网络”（已存在于源代码中）？

> ID：13859098
> 
> 赞同：1
> 
> 时间：2012-12-13T11:42:33.893
> 
> 标签：android, android-widget

我想通过应用程序小部件启用/禁用网络设置“仅使用 2G 网络”（已存在于源代码中）。可能吗？如果是，请指导我。

# .net - 通过导入的类型库访问 COM-dll 失败

> ID：13859100
> 
> 赞同：3
> 
> 时间：2012-12-13T11:42:44.340
> 
> 标签：.net, delphi, dll, com, typelib

我正在尝试使用 .NET COM-dll，它是用于步进电机控制接口的 SDK 的一部分。SDK 提供了一个类型库，我通过“导入组件 > 导入类型库”将其导入 Delphi。

虽然我知道一些关于 COM 编程的基础知识，但我很难让接口正常工作。问题似乎是 CoClass 以及 OLE 服务器代理只公开了一个空接口，即没有任何方法的接口 ( *_ComMotorCommands* )。从那里转换到实际的*IComMotorCommands 会*产生一个*Interface not supported*错误。

```
// *********************************************************************//
// Interface: IComMotorCommands
// Flags:     (4416) Dual OleAutomation Dispatchable
// GUID:      {0D4E3A3F-0C07-438B-9F6F-CC1968408CFC}
// *********************************************************************//
  IComMotorCommands = interface(IDispatch)
    ['{0D4E3A3F-0C07-438B-9F6F-CC1968408CFC}']
    function Get_ErrorFlag: WordBool; safecall;
    function Get_ErrorMessageString: WideString; safecall;    
    function Get_ErrorNumber: Integer; safecall;
    ...
  end;

...

// *********************************************************************//
// Interface: _ComMotorCommands
// Flags:     (4432) Hidden Dual OleAutomation Dispatchable
// GUID:      {5AB3EB9E-E847-3133-95DC-4DDC7870C02A}
// *********************************************************************//
  _ComMotorCommands = interface(IDispatch)
    ['{5AB3EB9E-E847-3133-95DC-4DDC7870C02A}']
  end;

...

  CoComMotorCommands = class
    class function Create: _ComMotorCommands;
    class function CreateRemote(const MachineName: string): _ComMotorCommands;
  end; 
```

我也尝试通过手动创建界面

```
CreateComObject(CLASS_ComMotorCommands) as IComMotorCommandsDisp 
```

它本身不会引发异常。即使设置一些连接属性（例如端口和波特率）似乎也有效。但是一旦我尝试查询电机状态，我就会得到

**'BadImageFormatException: 试图加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）'**，

请注意，**不是**我的应用程序中的例外，而是通过接口本身的错误报告机制（*Get_ErrorMessageString*）。

此错误通常表示 x86 和 x64 代码之间存在位冲突。但我的平台目标是 x86，SDK 也是如此。我在 Windows 7 x64 上运行 Delphi XE3，但同样的错误也出现在我尝试过的 32 位机器上，这对我来说没有任何意义。

SDK 还为 VB、C++ 和 C# 提供了几个 Visual Studio 示例。但是它们都使用Visual Studio方式调用接口，对我没有帮助。（在那里您直接引用 TLB，只需声明一个“ComMotorCommands”类型的变量，然后就可以自由访问所有接口方法。）

我将通过电子邮件应要求提供完整文件。

我在这里不知所措，所以对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:34:49.203

问题很可能是尝试加载 64 位模块。在配置文件模式下使用 Dependency Walker 进行调试。

# 3d - 搅拌机背面剔除开关正面3D

> ID：13859108
> 
> 赞同：0
> 
> 时间：2012-12-13T11:43:12.783
> 
> 标签：3d, blender

我想连接两个带面的管子，“Make / Edge, Face”（F）。我已经激活了背面剔除来查看正面而不是背面。几张脸后，我发现我做的脸的正面和背面都发生了变化（图像中的红点）。我想做绿色的脸，如何在搅拌机中前后切换？图片的链接是：http: [//i.stack.imgur.com/d0uUr.png](http://i.stack.imgur.com/d0uUr.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:47:33.137

您需要翻转该面上的法线，因此选择面后转到：**Mesh > Faces > Flip Normals**

您选择顶点（CW 或 CCW）的顺序会影响我假设的面法线方向。

# objective-c - 如何以编程方式确定 OS X 上 Retina MacBook Pro 屏幕的原生像素分辨率？

> ID：13859109
> 
> 赞同：7
> 
> 时间：2012-12-13T11:43:14.730
> 
> 标签：objective-c, macos, retina-display, screen-resolution

给定从返回的 CGDirectDisplayID

```
CGError error = CGGetActiveDisplayList(8, directDisplayIDs, &displayCount); 
```

对于 Retina MacBook Pro 上的内置屏幕，我希望使用获取本机像素尺寸

```
size_t pixelWidth = CGDisplayPixelsWide(directDisplayID);
size_t pixelHeight = CGDisplayPixelsHigh(directDisplayID); 
```

但是，这些调用仅返回当前选定模式的维度。如果我改变屏幕分辨率，我会得到不同的值。我希望在 15" rMBP 上恢复 2880 x 1800。

如何获取 Retina MacBook Pro 屏幕的原生像素尺寸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-06T14:52:10.693

我认为最好的方法是枚举所有显示模式（包括 1x 模式）并找到最大的 1x 模式的尺寸。

您将使用`CGDisplayCopyAllDisplayModes()`并传递带有`kCGDisplayShowDuplicateLowResolutionModes`映射到的键的字典`kCFBooleanTrue`作为`options`获取所有模式。您可以测试`CGDisplayModeGetPixelWidth()`等于`CGDisplayModeGetWidth()`以确定哪些是 1x。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-30T05:07:35.777

`CGDisplayModeGetIOFlags`可以告诉你一些显示的信息。本机分辨率已`kDisplayModeNativeFlag`设置。下面将设置`ns`为窗口当前屏幕的原始分辨率`win`。

```
CGDirectDisplayID sid = ((NSNumber *)[win.screen.deviceDescription
    objectForKey:@"NSScreenNumber"]).unsignedIntegerValue;
CFArrayRef ms = CGDisplayCopyAllDisplayModes(sid, NULL);
CFIndex n = CFArrayGetCount(ms);
NSSize ns;
for(int i = 0; i < n; ++i){
    CGDisplayModeRef m = (CGDisplayModeRef)CFArrayGetValueAtIndex(ms, i);
    if(CGDisplayModeGetIOFlags(m) & kDisplayModeNativeFlag){
        ns.width = CGDisplayModeGetPixelWidth(m);
        ns.height = CGDisplayModeGetPixelHeight(m);
        break;
    }
}
CFRelease(ms); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T07:18:14.920

我会走不同的路线。我不会找出屏幕尺寸，而是获取正在运行程序的设备型号，然后将型号与其屏幕尺寸进行比较。对型号和相应的屏幕尺寸进行编程可能很乏味，但这是我能想到的唯一方法。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T21:46:38.870

如果 using`NSScreen`是一个选项，您可以在 OSX 10.7 中执行以下操作：

```
NSRect framePixels = [screen convertRectToBacking:[screen frame]]; 
```

`framePixels.size`您的显示器的像素分辨率在哪里，并且是`screen`指向`NSScreen`. 例如，此代码会将所有活动显示器的像素分辨率打印到控制台：

```
for (NSScreen* screen in [NSScreen screens])
{
    NSRect framePixels = [screen convertRectToBacking:[screen frame]];
    NSLog(@"framePixels: (%f, %f)", framePixels.size.width, framePixels.size.height);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-21T00:36:04.647

`system_profiler SPDisplaysDataType | grep Resolution:`

在两台显示器的机器上，我得到这个输出：

```
 Resolution: 2880 x 1800 Retina
      Resolution: 2560 x 1440 (QHD/WQHD - Wide Quad High Definition) 
```

我从一个类似的问题中听说过这个：[如何在 MacOS 上获得物理显示分辨率？](https://stackoverflow.com/questions/53595111/how-to-get-the-physical-display-resolution-on-macos)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-20T07:07:39.383

上面修改版的 Ken/jxy 解决方案，如果没有找到原生分辨率，默认使用 screen frame*backingScaleFactor：

```
static float getScreenScaleFactor() {
NSRect screenFrame = [[NSScreen mainScreen] frame];

// this may well be larger than actual pixel dimensions of screen, as Mac will report the backing scale factor of the render buffer, not the screen, stupidly
float bestWidth = screenFrame.size.width * [[NSScreen mainScreen] backingScaleFactor];

// if there's a native resolution found in this method, that's more accurate than above
CFArrayRef myModes = CGDisplayCopyAllDisplayModes(CGMainDisplayID(), NULL);
for (int i = 0; i < CFArrayGetCount(myModes); i++) {
    CGDisplayModeRef myMode = (CGDisplayModeRef) CFArrayGetValueAtIndex(myModes, i);
    if (CGDisplayModeGetIOFlags(myMode) & kDisplayModeNativeFlag) {
        bestWidth = CGDisplayModeGetPixelWidth(myMode);
        //printf("found native resolution: %i %i\n", (int)CGDisplayModeGetPixelWidth(myMode), (int)CGDisplayModeGetPixelHeight(myMode));
        break;
        }
    }

return bestWidth/screenFrame.size.width;
} 
```

# html - 将百分比值设置为边框宽度

> ID：13859110
> 
> 赞同：0
> 
> 时间：2012-12-13T11:43:17.730
> 
> 标签：html, css, responsive-design

我正在尝试`div`使用 CSS `border`“hack”从 a 的底部切下一个三角形。（创建一个宽度和高度为 0 的对象，并给它一个大的 ol' 边框，并使边框的一侧透明，另一侧为纯色）。

我的问题是有`div`问题的有一个百分比宽度。因此，我的边框也需要有一个百分比宽度（以及可能的高度，这是另一个潜在的问题，因为`div`没有指定的高度）。但是，css`border-width`属性似乎不支持百分比值。

从响应式底部“切掉”三角形的问题的替代解决方案`div`也可以。

在有人建议使用图像或附加图像之前，我不能这样做，因为整个事物都有一个模式并且它不匹配。此外，由于兼容性，我不想使用多个背景图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:32:29.287

仅使用 CSS 是不可能的。对于此类的 hack，您可以使用窗口调整大小事件。

```
$w = $(window);
$w.resize(onResize);

function onResize(){

    $("div").css({
        "border-bottom-width": $w.width()*0.12,
        "border-left-width": $w.width()*0.1,
        "border-right-width": $w.width()*0.1
    });

}
onResize();​ 
```

用你的 CSS

```
div{
    border-color:blue;
    border-style: solid;
    border-top:0px;
    border-left:10px solid transparent;
    border-right:10px solid transparent;
    width:0px;
    height:0px;
} 
```

[http://jsfiddle.net/vuZaw/](http://jsfiddle.net/vuZaw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:30:24.230

以防万一有人希望将来这样做，我稍微调整了 Scipions 答案，以便它根据父宽度而不是窗口宽度调整大小（这更有意义）：

```
jQuery(document).ready(function($) {

    $o = jQuery(".topCart");
    $w = $(window);
    $w.resize(onResize);

function onResize(){

    $(".bottomBorder").css({
        "border-top-width": $o.width()*0.2,
        "border-left-width": $o.width()*0.52,
        "border-right-width": $o.width()*0.5
    });

}
onResize();
}); 
```

而且效果很好。我认为这真的很酷，所以希望其他人也会发现它也很有用。

# asp.net - 自动数据绑定之谜

> ID：13859111
> 
> 赞同：1
> 
> 时间：2012-12-13T11:43:23.310
> 
> 标签：asp.net, data-binding

我对数据源在页面生命周期中如何以及何时绑定有一些疑问，我似乎无法在任何地方找到答案。我有一个在设计时绑定到数据源的gridview。DS 的参数之一是下拉列表的选定值。这些下拉列表也是数据绑定的以检索它们的选项，并且下拉列表的自动回发属性设置为 true。现在有些事情让我对此感到困惑。

1.  大多数情况下，更改下拉列表的值将使用新参数重新加载 gridview，并且不需要手动调用 gridview 上的 databind() 来执行此操作。但是在某些情况下，gridview 没有反弹，我不确定这些情况是什么。*数据源何时会在参数更改时自动反弹，何时需要从代码中手动调用 databind？*
2.  从代码隐藏调用数据绑定会阻止自动数据绑定事件触发，还是它们都会触发，从而导致对数据源的额外查询浪费？
3.  如果是前者，有没有办法阻止额外的数据绑定发生，而不必将所有内容都移到后面的代码中并失去在设计视图中为控件设置数据源的便利？
4.  这些问题的答案是否记录在任何官方来源中？（MSDN 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:56:23.267

如果不查看您的代码，我无法确定，但您可能想了解 ViewState。

加载控件后，数据将保持在视图状态中。您通常希望在 (!IsPostBack) 事件上执行 DataBinding，以便在回发时无需重新绑定数据库中的数据。

# java - 我遇到了 char 的问题

> ID：13859112
> 
> 赞同：0
> 
> 时间：2012-12-13T11:43:28.443
> 
> 标签：java, netbeans, char

我遇到问题让 net-beans 接受一个角色，然后说这个人是 hr 有薪工人还是月薪，任何帮助都会得到 char 行的错误

```
import java.util.Scanner;

public class Infromation {

    public static void main(String [] args){

        Scanner input=new Scanner(System.in);
        System.out.print("Enter employee num");
        int e_num=input.nextInt();
        System.out.print("Enter employee first name");
        String e_fname=input.next();
        System.out.print("Enter employee surname");
        String e_sname=input.next();
        System.out.print("Enter employee code C,H and F");
        char e_code=input.next(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T11:46:15.057

```
char e_code=input.next(); 
```

[**Scanner.next()**](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)返回一个字符串。

如果你想让角色离开 Scanner.next() ：

```
char e_code = input.next().charAt(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:47:50.103

采用

```
char e_code=input.next().charAt(0);
                        ^^^^^^^^^^ 
```

代替

`char e_code=input.next();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:56:22.530

采用

```
Char e_code=input.next().charAt(0); 
```

获取字符输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T11:56:52.673

您应该创建一种方法来支持这一点，因为它可能存在各种问题。

```
public static char stringToChar(String value) {

  if(value == null) {
     throw new NullPointerException("stringToChar expect a not null value of argument [value]");
  }

  char[] charArray = value.toCharArray();

  if(charArray.length == 0) {
     return '\0';  // Empty 
     // or throw new IllegalStateException("stringToChar  expect a String that is not empty");
  }

  if(charArray.length == 1) {
     return charArray[0];
  }

  throw new IllegalStateException("stribtToChar expect a single Character string input:[" + value + "]");
} 
```

# oracle11g - 如何使用 dbms_scheduler 安排作业每天运行两次

> ID：13859115
> 
> 赞同：1
> 
> 时间：2012-12-13T11:43:33.650
> 
> 标签：oracle11g

我已经使用 DBMS_SCHEDULER 创建了一个作业，它将调用一个 SP 并且 SP 执行所需的工作。现在我的问题是如何安排该作业每天运行两次？我的意思是我希望该作业每天在下午 1 点和下午 4 点运行（这只是一个示例。我可能必须在@diff time 运行，但每天运行两次）。

谢谢

幸

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:03:52.473

这很简单。

使用 PL/SQL Developer，打开 Jobs 并编辑某个 Job。在计划部分的作业属性中，将“频率”设置为每天，将“按小时”参数设置为“1,4”。

使用 PL/SQL 代码将是这样的：

```
BEGIN
 DBMS_SCHEDULER.CREATE_JOB (
   job_name        => 'sachi.example_job',
   job_type        => 'PLSQL_BLOCK',
   job_action      => 'BEGIN      
                         DBMS_STATS.GATHER_TABLE_STATS(''sachi'',''anytablename'');  
                       END;',
   start_date      =>  TO_DATE('22-02-2013 14:00','DD-MM-YYYY HH24:MI'),
   repeat_interval => 'FREQ=DAILY; BYHOUR=11,15', 
   enabled         =>  TRUE,
   comments        => 'Gather table statistics');
END;
/ 
```

# php - 正则表达式 preg_match() 问题

> ID：13859116
> 
> 赞同：0
> 
> 时间：2012-12-13T11:43:35.497
> 
> 标签：php, regex, preg-match, delimiter

我无法让以下正则表达式正常工作：

```
preg_match('Currently: ([0-9\.km,]+)', $data, $matches) 
```

$data 里面的信息是：'What it is Current: 52,523'（连同大约 30 行 html）。

我不断收到以下错误：`Warning: preg_match(): Delimiter must not be alphanumeric or backslash in C:\xampp\htdocs\test\test.php on line 49`

注意：第 49 行包含我在上面发布的 preg_match。

编辑：抱歉，我忘了添加匹配参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:47:20.047

[preg_match 函数](http://br2.php.net/preg_match)需要在模式中使用分隔符。

```
preg_match('/Currently: ([0-9\.km,]+)/', $data, $matches) 
```

编辑：

如评论中所述

> @JoséRobertoAraújoJúnior`curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);`如果这就是你的意思，是的，我已经设置好了。如果 i `echo $data`，它会显示网页，这意味着它仍然包含所有 html 标签。我不确定从这里做什么，在我的 preg_ 中使用该数据

然后可能在:和`$data`之间包含空格，因此应该在您的模式中通过添加而不是普通空格来考虑这一点，它将匹配[PCRE regex syntax documentation page](http://br2.php.net/manual/en/regexp.reference.escape.php)中描述的任何空格字符。`Currently:``(...)``\s+``\s`

```
preg_match('/Currently:\s+([0-9\.km,]+)/', $data, $matches) 
```

现场测试： [http ://codepad.viper-7.com/xJNisE](http://codepad.viper-7.com/xJNisE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:46:46.873

您需要在模式的开头和结尾添加相同的字符：

```
preg_match('/Currently: ([0-9\.km,]+)/', $data) 
```

此字符不能出现在模式中，除非您对其进行转义，例如：

```
preg_match('/<example><\/example>/', $xml) 
```

您可以使用其他字符作为分隔符，旁边最常用的一个`/`是`#`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:47:56.510

您必须像这样编辑使用分隔符

```
$data = 'What it is Currently: 52,523';
preg_match('&Currently: ([0-9\.km,]+)&', $data, $match);
print_r($match); 
```

工作示例[http://codepad.viper-7.com/QGOoXT](http://codepad.viper-7.com/QGOoXT)

# sql-server-2008 - 从 Excel 导入数据时出现 SQL 错误

> ID：13859118
> 
> 赞同：3
> 
> 时间：2012-12-13T11:43:38.283
> 
> 标签：sql-server-2008, excel

我正在从 excel 表中导入数据。我正在努力解决以下问题 -

> *   执行（错误）消息错误 0xc020901c：数据流任务 1：输出“Excel 源输出”(9) 上的输出列“智能”(21) 出现错误。返回的列状态为：“文本被截断或一个或多个字符在目标代码页中不匹配。”。（SQL Server 导入和导出向导）
>     
>     
> *   错误 0xc020902a：数据流任务 1：“输出列“智能”(21)”失败，因为发生了截断，并且“输出列“智能”(21)”上的截断行处置指定了截断失败。指定组件的指定对象发生截断错误。（SQL Server 导入和导出向导）
>     
>     
> *   错误 0xc0047038：数据流任务 1：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。组件“Source - MainSheetData$”(1) 上的 PrimeOutput 方法返回错误代码 0xC020902A。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。（SQL Server 导入和导出向导）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-05T14:24:01.983

我用同样的错误将头撞在墙上。

尝试导入 MS Access，*然后*导入 SQL Server。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-01T23:12:45.320

原来它只检查 Excel 工作表的前 8 行左右。所以如果它确定长度为 225，然后遇到超过 225 个字符，则会发生错误，我为解决问题所做的就是制作第一行包含最坏的情况（最大的一切）和问题解决了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:12:24.310

第一个错误是告诉您 Intelligence 列的源数据比目标列长，或者包含目标列不能接受的字符。

第二个错误是告诉您 Intelligence 列比您的目标列长，因此它失败了。我希望这是真正的问题。

你可以

*   扩大目标列的大小以覆盖更大的输入或
*   在截断时将组件的错误输出切换为“忽略故障”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-25T15:40:13.403

我遇到了同样的问题，虽然我在这里搜索了很多建议，但对我有用的选项是将 excel 文件转换为 a`CSV`并改用`bulk insert`命令。

这绕过了编辑对我不起作用的**映射的需要。**当我更改字段类型时，我有一个未更新的字段。

[此答案](https://stackoverflow.com/a/13124749/1003940)的以下代码：

```
BULK INSERT TableName
        FROM 'C:\SomeDirectory\my table.txt'
            WITH
    (
                FIELDTERMINATOR = '\t',
                ROWTERMINATOR = '\n'
    )
GO 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-05T13:21:38.250

使用 CSV 导入很困难，因为导入过程不知道任何字段的最大长度。因此，当它遇到比初始列长度更长的行时，它会出错。

只需将 csv 文件保存为 excel 工作簿并重新导入。您需要删除上次失败之前创建的现有表。

由于是excel，所以在建表时可以获取正确的字段长度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-15T12:31:58.360

从 Excel 导入到 SQL Server 2008 时，我遇到了同样的错误。我可以通过从 xlsx 导出到 csv，然后将 csv 文件导入到 Sql Server 来做到这一点。是的，我不得不手动调整列的长度，但效果很好！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-25T20:28:40.883

我遇到了同样的问题，不得不手动通过 Excel 来查找问题。一次节省，如果您单击底部的报告 -> 查看报告，它将打开一个新窗口。如果您一直滚动到报告的底部，它将告诉您处理了多少行。这并不一定意味着问题出在下一行，但至少您可以跳过之前的所有行。

接下来我在 Excel 中所做的只是获取适合 SQL 的字符数量（即 LEFT([Column], 255) 并截断其余字符。

这并不理想，但它在我的情况下有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-01T11:34:13.830

我不确定，是否有人尝试过：

从 excel .xls 或当前的任何 excel 格式复制文件的内容，并将其粘贴到新的 excel 文件中作为值。将文件保存为 .xlsx 格式，然后尝试使用 sql server 再次导入。

一定会成功的！！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-15T09:46:44.553

[出口](http://i.stack.imgur.com/wV0Bh.png)

您需要在 Review Data Type Mapping 中将“On Error”选项更改为 Ignore，将“On Truncation”选项更改为 Ignore。这将解决问题。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-05-06T10:42:17.207

将最大长度放在第一行就足够了。然后它起作用。

# javascript - 使用元素 ID 填充 jQuery UI 自动完成列表

> ID：13859121
> 
> 赞同：1
> 
> 时间：2012-12-13T11:44:09.723
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我正在使用 jQuery UI 创建一个自动完成搜索栏，

我正在尝试修改以下内容以根据页面上元素的 ID 名称填充可用标签列表，

```
var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
        ]; 
```

例如在页面上，我会有一个元素，如

```
<div class="items" id="Get milk">Don't forget to get milk on way home from work</div> 
```

一旦列表填充了这些元素 id 并且特定的 id 自动完成，我将设置所有其他元素`display: none;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:02:07.460

您将需要使用[`$("...").map`](http://api.jquery.com/map/)将您的源类数组对象（在本例中为填充有与您的`.items`选择器匹配的 DOM 节点的 jQuery 对象）转换为 jQueryUI 自动完成可以使用的数组。像这样的东西应该工作：

```
var source = $(".items").map(function () {
    return $(this).data("id");
}).get();

$("#auto").autocomplete({
    source: source        
}); 
```

假设您使用的是`data-id`属性，那么您的标记将如下所示：

```
<div class="items" data-id="Get Milk">Get Milk on the way home</div>
<div class="items" data-id="Drop by Phil's">Drop by Phils house</div>
<div class="items" data-id="Grab a Sandwich">Grab a sandwich</div> 
```

**示例：http:** [//jsfiddle.net/J5rVP/25/](http://jsfiddle.net/J5rVP/25/)

# python - 不修改实际标记的python html解析器？

> ID：13859124
> 
> 赞同：1
> 
> 时间：2012-12-13T11:44:21.643
> 
> 标签：python, html, parsing

我想在 python 中解析 html 代码并尝试了漂亮的汤和 pyquery。问题是那些解析器修改了原始代码，例如插入一些标签等。有没有不改变代码的解析器？

* * *

我试过`HTMLParser`但没有成功！:( 它不会修改代码，只是告诉我标签的放置位置。但它无法解析像 mail.live.com 这样的网页 知道如何像浏览器一样解析网页吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:47:14.207

您可以使用 BeautifulSoup 仅提取文本而不修改标签。它在他们的文档中。

同样的问题： [如何从美丽的汤中提取文本](https://stackoverflow.com/questions/4922969/how-to-tell-beautifulsoup-to-extract-the-content-of-a-specific-tag-as-text-wit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T06:44:12.320

不，到目前为止还没有这样的 HTML 解析器，每个解析器都有自己的局限性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T06:57:18.930

您是否尝试过使用 Python 绑定的[webkit](http://www.webkit.org/)引擎？

看到这个：[https ://github.com/niwibe/phantompy](https://github.com/niwibe/phantompy)

你可以遍历被解析网页的真实DOM，做你需要做的事情。

# android - 操作栏中的返回箭头 Sherlock 未显示

> ID：13859126
> 
> 赞同：9
> 
> 时间：2012-12-13T11:44:33.763
> 
> 标签：android, actionbarsherlock

在我的项目中，我使用了 action bar sherlock 库。我想在操作栏中制作后退按钮我使用了以下代码

```
getSupportActionBar().setHomeButtonEnabled(true); 
```

**和**

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {

        case android.R.id.home:
             finish();
             break;

        default:
            return super.onOptionsItemSelected(item);
        }
        return false;
    } 
```

一切正常，但没有显示返回箭头（图标左侧）。我也想展示 Back Arrow。谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-13T11:48:04.100

你必须这样设置：

```
ActionBar ab = getSupportActionBar();
ab.setDisplayHomeAsUpEnabled(true); 
```

希望有帮助。

# json - 带有 json 和 xstream 输出的 Spring 3 不起作用

> ID：13859134
> 
> 赞同：-1
> 
> 时间：2012-12-13T11:45:00.413
> 
> 标签：json, rest, xstream, spring-3

我现在有这个工作，但我不知道为什么会出现这个问题..

我遵循以下

[http://pfelitti87.blogspot.co.uk/2012/07/rest-services-with-spring-3-xml-json.html](http://pfelitti87.blogspot.co.uk/2012/07/rest-services-with-spring-3-xml-json.html)

但我更改了控制器方法并添加了@ResponseBody ...

```
@ResponseBody
@ResponseStatus(HttpStatus.OK)
@RequestMapping(value="/names", method=RequestMethod.GET)
public List<Book> getNames() {

  return returnData();
} 
```

通过添加这个我注意到输出将显示为 json，不管我指定的扩展名是什么？...

任何想法为什么@RepsonseBody 会导致这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:41:59.270

该帖子仅适用于解决基于不同类型的不同视图。它不适用于您的情况。

如果您使用的是 Spring 3.2.x，下面的配置将解决您的问题。

```
 <mvc:annotation-driven content-negotiation-manager="contentNegotiationManager"/>

  <bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
    <property name="favorPathExtension" value="true"/>
    <property name="mediaTypes">
      <value>
        json=application/json
        xml=application/xml
      </value>
    </property>
    <property name="defaultContentType" value="application/json"/>
  </bean> 
```

但是，如果您使用的是 3.1.x，则有类似[http://tedyoung.me/2011/07/28/spring-mvc-responsebody](http://tedyoung.me/2011/07/28/spring-mvc-responsebody)和[http://springinpractice.com/2012/02/22/supporting-的方法xml-and-json-web-service-endpoints-in-spring-3-1-using-responsebody](http://springinpractice.com/2012/02/22/supporting-xml-and-json-web-service-endpoints-in-spring-3-1-using-responsebody)可能对您有所帮助。

# ruby - 如何获取 page_object 元素的属性值？

> ID：13859135
> 
> 赞同：5
> 
> 时间：2012-12-13T11:45:02.103
> 
> 标签：ruby, cucumber, watir-webdriver, pageobjects, page-object-gem

想象一下我有一个像这样的图像：

```
the_image = @browser.image(:id, 'image01') 
```

获取其类值的方法可能是：

```
image_status = the_image.attribute_value('class') 
```

行。我正在使用 page_object gem，假设我将图像作为元素，例如：

```
image(:the_image, :id => 'image01') 
```

要获取属性值，我可以使用：

```
image_status = the_image_element.attribute_value('class') 
```

...但我收到了弃用警告：

```
*** DEPRECATION WARNING
*** You are calling a method named attribute_value at page.rb:68:in `get_status'.
*** This method does not exist in page-object so it is being passed to the driver.
*** This feature will be removed in the near future. 
```

如何`class`使用 page_object 元素获取值？当然答案很简单，但我没有找到。你能告诉我路吗？

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:55:53.153

如果您使用的是最新版本的 Page-Object 和 Watir（分别为 v2.2.1 和 v6.7.3），`attribute_value`将不再给出弃用警告。`#attribute`和均受`#attribute_value`支持。

对于旧版本的 Page-Object，您需要使用以下`#attribute`方法：

```
image_status = the_image_element.attribute('class') 
```

# iphone - 在 Phonegap + IOS 按钮单击事件触发多次使用 iScroll 4

> ID：13859137
> 
> 赞同：6
> 
> 时间：2012-12-13T11:45:13.407
> 
> 标签：iphone, ios, cordova, iscroll4, iscroll

我`iScroll`在 Phonegap 2.1.0 + IOS 中使用 v4。我在两个不同的页面中有两个 iscroll。

**第一卷**

```
function locationload() {
    locationScroll = new iScroll('locationWrapper', {
        vScrollbar: false,
        hScrollbar: false,
        hScroll: false
    });   
} 
```

**第二卷**

```
function preferenceload() {
    preferencesScroll = new iScroll('preferencesWrapper', {
        vScrollbar: false,
        hScrollbar: false,
        hScroll: false
    });
} 
```

在第一页`iScroll`工作得很好。第二页`iScroll`也很好用。但是当我单击第二页中的按钮时，按钮单击事件会触发多次。如果我在第二页中删除 iScroll，则按钮单击事件可以正常工作。我正在使用**$.mobile.changePage("#Page2", null, true, true);** 导航到第 2 页。

我在任何地方都找不到任何解决方案，所以我希望这里有人能给我一些想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T01:09:00.220

我认为您应该尝试[jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)

# jquery - 使用 jQuery 删除所有空元素（保留 img 标签）

> ID：13859138
> 
> 赞同：1
> 
> 时间：2012-12-13T11:45:14.283
> 
> 标签：jquery

我正在尝试删除 div 中的所有空元素并找到了一个解决方案，但是它使用的是 CSS3 选择器，我很确定它不是跨浏览器。这是我在 FF 上的工作：

```
$("#container *:empty:not(img)").remove(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:46:24.063

> ...它使用 CSS3 选择器，我很确定它不是跨浏览器。

是的，因为 jQuery 通过它的 Sizzle 选择器引擎为你处理了这些；[更多](http://api.jquery.com/category/selectors/)。

如果你想在不使用的情况下这样做`:empty`，它是一个相当直接的递归函数（不使用 jQuery，以避免在内存中创建大型数组）：

```
function removeEmpties(node) {
  var child, sibling;

  for (child = node.lastChild; child; child = sibling) {
    sibling = child.previousSibling;
    switch (child.nodeType) {
      case 1: // Element
        if (child.nodeName !== "IMG") { // Assumes HTML, not XHTML
          removeEmpties(child);
          if (!child.firstChild) {
            node.removeChild(child);
          }
        }
        break;
      case 3: // Text
        if (child.nodeValue === "") {
          node.removeChild(child);
        }
        break;
    }
  }
} 
```

...或类似的规定。如果要删除仅包含空格的文本节点，请更改

```
if (child.nodeValue === "") { 
```

至

```
if (child.nodeValue.replace(/\s/g, '') === "") { 
```

[实例](http://jsbin.com/obader/1)| [资源](http://jsbin.com/obader/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:53:06.960

您可以使用 jQuery 的 .text() 方法返回每个元素的文本内容并编写条件，例如`if ($(this).text().length() < 1) $(this).remove()}`

如果没有您的 html 示例，我无法更具体。

# excel - 使用宏更新 Quality Center 使用的 csv 文件

> ID：13859139
> 
> 赞同：1
> 
> 时间：2012-12-13T11:45:18.680
> 
> 标签：excel, csv, qtp, hp-quality-center, vba

我有一个 csv 文件，其中包含将导入 HP Quality Center 并用于执行自动化测试的迭代。

这些文件中的一些数据必须每月更新一次，我已经为每个文件创建了一个宏来执行此操作。

我无法将宏和 csv 保留在一个工作簿上，因为 QC 不允许导入除 csv 文件以外的任何内容（据我所知）。

我意识到我每次都可以导入宏，但是有很多 csv 文件和很多宏。

是否有某种格式或解决方法可以让我将宏保留在 csv 文件中，所以当我打开它时，我可以按 Alt+F8 并运行宏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:00:45.740

将宏保存在您的个人工作簿 (personal.xslb) 中，而不是单独的数据文件中。然后，它们将可用于在 csv 文件上运行您的更新，而无需存储在文件中。

# sql-server-2008-r2 - Umbraco CMS 中的更改不会立即在前端更新

> ID：13859142
> 
> 赞同：3
> 
> 时间：2012-12-13T11:45:29.600
> 
> 标签：sql-server-2008-r2, umbraco, asp.net-4.0

我在更新 Umbraco 中的内容时遇到问题。每当我在 Umbraco 中更新某些内容时，我必须等待至少 1 小时，有时甚至 12 小时才能看到前端的更改。

在前端立即看到更改的唯一方法是“清空连接字符串值 umbracoDbDSN 并刷新​​页面，然后将连接字符串放回并刷新页面”。我必须做所有我在 CMS 中更新内容的事情。

你们知道这里发生了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T02:07:59.793

问题是。Umbraco 被配置为在我们旧服务器上的负载平衡服务器上运行。我不得不在新服务器上关闭它。

`<distributedCall enable="false">`在`umbracoSettings.config`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T15:51:50.140

~/App_Data/umbraco.config 文件是否在发布时被写入？这是用于显示您的网站的 XML 缓存文件。

发布节点时，数据会序列化为 XML，存储在数据库表中，然后写入 umbraco.config 缓存。

如果 umbraco 没有读取/写入文件的权限，这可能是某种权限问题。或者你可能有一个损坏的 dll，只是没有正确写入它。或者也许它写得很好，但是您的服务器正在以一种奇怪的方式缓存您的页面。无论哪种方式，我都会先查看 umbraco.config 并确保在发布时将数据写入其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:57:03.033

你运行的是什么版本？当 v5 首次发布时，我遇到了一个大问题（并像您一样通过触摸 web.config 强制重置来解决它。希望您没有使用 v5（因为它已停产并且存在极端的性能问题）。

在我记得的任何 v4.x 版本中，我都没有遇到过这个问题。重新发布后，更改应立即显示。

您是否在标准配置中运行？偶然使用网络农场？

# email - 如何在magento的电子邮件中将文件作为附件发送以获取可下载的产品？

> ID：13859143
> 
> 赞同：2
> 
> 时间：2012-12-13T11:45:31.303
> 
> 标签：email, magento, attachment, product

我是 Magento 的新手。我正在一个销售可下载产品的网站上工作。我的客户想要购买的产品应该通过电子邮件附件发送吗？目前，我正在本地主机上开发，所以我不确定磁电机是否真的通过电子邮件发送产品文件？我是否需要在配置中启用任何选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-04T07:57:59.940

* * *

如果您想在本地主机上开发它，请记住，您必须设置邮件服务器或使用社区中的一些解决方案，如以下链接，通过 gmail 和其他方式发送： [https ://www.magentocommerce.com/magento -connect/smtp-pro-email-free-custom-smtp-email.html](https://www.magentocommerce.com/magento-connect/smtp-pro-email-free-custom-smtp-email.html)

您也可以只配置您的服务器以保存邮件而不发送。因此，您将能够对其进行审查。

关于如何通过电子邮件发送可下载的好文章： [https ://magento.stackexchange.com/questions/49511/how-can-i-get-only-the-downloadable-product-url-in-email-template](https://magento.stackexchange.com/questions/49511/how-can-i-get-only-the-downloadable-product-url-in-email-template)

但！！！请记住，最新的 Magento 使用队列发送电子邮件（由 cron 运行），因此如果您有这样的发行版（例如 1.9+），您需要调整上面链接中的代码。

以下是针对这种情况的两种解决方案：

订单后禁用将电子邮件添加到队列。只需在“Mage_Core_Model_Email_Template”的“send()”方法中注释这部分代码：

```
//        if ($this->hasQueue() && $this->getQueue() instanceof Mage_Core_Model_Email_Queue) {
        /** @var $emailQueue Mage_Core_Model_Email_Queue */
       /* $emailQueue = $this->getQueue();
        $emailQueue->clearRecipients();
        $emailQueue->setMessageBody($text);
        $emailQueue->setMessageParameters(array(
                'subject'           => $subject,
                'return_path_email' => $returnPathEmail,
                'is_plain'          => $this->isPlain(),
                'from_email'        => $this->getSenderEmail(),
                'from_name'         => $this->getSenderName(),
                'reply_to'          => $this->getMail()->getReplyTo(),
                'return_to'         => $this->getMail()->getReturnPath(),
            ))
            ->addRecipients($emails, $names, Mage_Core_Model_Email_Queue::EMAIL_TYPE_TO)
            ->addRecipients($this->_bccEmails, array(), Mage_Core_Model_Email_Queue::EMAIL_TYPE_BCC);
        $emailQueue->addMessageToQueue();

        return true;
    }*/ 
```

因此电子邮件将立即发送（请注意，如果您的营业额非常大且出现峰值，则可能会产生性能问题）

第二种方法是将附件的完整路径保存到表“core_email_queue”字段 - “message_parameters”。您可以`$emailQueue->setMessageParameters(`在上面的代码中将 url 添加到参数数组中。之后，您可以使用标准“Zend Mail”的方法“createAttachment()”在“Mage_Core_Model_Email_Queue”的“send()”方法中处理它。下面的链接提供了这部分的更深入的解释。 [https://magento.stackexchange.com/questions/9652/magento-send-file-attachements-in-emails](https://magento.stackexchange.com/questions/9652/magento-send-file-attachements-in-emails)

希望它会帮助某人。祝你有美好的一天！！！

# wordpress - TinyMCE - getNode() 在 IE 中不起作用

> ID：13859145
> 
> 赞同：2
> 
> 时间：2012-12-13T11:45:55.140
> 
> 标签：wordpress, tinymce

这是一个奇怪的问题...

**获取节点（）**

尝试添加一个打开 TinyMCEPopup 窗口的 tinyMCE 按钮（在*WordPress内）。*

在那里，我需要检查用户在文本内单击的当前节点——特别是如果他们在 LI 节点/标签内单击。

我在用着：

```
tinyMCE.activeEditor.selection.getNode().nodeName 
```

在 FireFox、Chrome 等内部运行良好，但**在 IE 中不行**。

在 IE 中，我总是得到节点“DIV”并且......

在 IE 中，它实际上检查了标记的完全不同的部分，例如……它似乎获得了整个 TinyMCE 编辑器标记的父节点，而不是用户单击的位置。

这就是为什么它总是返回一个 DIV。

在 IE 中，当我在 LI 元素内单击时（在编辑器的可视视图中），它会在周围放置一个奇怪的框架，除非我双击该框架，否则我的光标不会放在该列表元素内。在此处查看此屏幕截图：http: [//screencast.com/t/9HVjMUvy](http://screencast.com/t/9HVjMUvy)

**获取内容（）**

似乎也不适用于 IE ......

```
tinyMCE.activeEditor.selection.getContent() 
```

（IE 总是返回“空”，没有选择，而所有其他浏览器都给出正确选择的文本部分）

任何想法如何解决这些问题？

非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:53:46.800

关于调整大小句柄，您可以使用以下 tinymce 配置参数摆脱它们

```
object_resizing : false 
```

# android - 我的应用程序在 Wifi 上运行良好，但在 GPRS 上它给出以下错误并崩溃说 FC 知道为什么会发生这种情况

> ID：13859147
> 
> 赞同：1
> 
> 时间：2012-12-13T11:46:04.673
> 
> 标签：android, api

我正在使用这种代码

```
private static String SOAP_ACTION = "http://schemas.xmlsoap.org/soap/http";

    private static String NAMESPACE = "http://schemas.xmlsoap.org/soap/encoding/";
    private static String METHOD_NAME = "something";

    private static String URL = "http://server/file.php?wsdl";
parameters.addProperty("SubMSISDN", msisdn);
                            parameters.addProperty("AppID", 2);
request.addProperty(METHOD_NAME, parameters);
                            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                            envelope.setOutputSoapObject(request);
                            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                            try{
                                androidHttpTransport.call(SOAP_ACTION, envelope);
                            }catch (Exception e) {
                                // TODO: handle exception
                                e.printStackTrace();
                            }
                            try{ 
                            result = (SoapObject) envelope.bodyIn;
                            }catch(NullPointerException e ){
                                e.printStackTrace();
                                Toast.makeText(getApplicationContext(), "Please check your internet connection", Toast.LENGTH_LONG).show();
                            }
                            if(result != null){
do rest of work here
} 
```

这是错误日志

```
12-13 16:24:16.519: E/AndroidRuntime(14087): FATAL EXCEPTION: main
12-13 16:24:16.519: E/AndroidRuntime(14087): java.lang.NullPointerException
12-13 16:24:16.519: E/AndroidRuntime(14087):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1374)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at android.app.Activity.startActivityForResult(Activity.java:2827)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at android.app.Activity.startActivity(Activity.java:2933)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at com.syntecx.selfcare.BalanceHis$1.onPostExecute(BalanceHis.java:195)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at com.syntecx.selfcare.BalanceHis$1.onPostExecute(BalanceHis.java:1)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at android.os.AsyncTask.finish(AsyncTask.java:417)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at android.os.Looper.loop(Looper.java:123)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at java.lang.reflect.Method.invokeNative(Native Method)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at java.lang.reflect.Method.invoke(Method.java:507)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-13 16:24:16.519: E/AndroidRuntime(14087):    at dalvik.system.NativeStart.main(Native Method) 
```

当我使用 wifi 时它工作正常，但在 gprs 上的某些设备中，应用程序崩溃并在我调试应用程序时强制关闭上面提到的日志创建显示问题

# php - PHPmailer 接收自

> ID：13859156
> 
> 赞同：0
> 
> 时间：2012-12-13T11:46:20.873
> 
> 标签：php, phpmailer, spam-prevention

我们构建的招聘应用程序使用 mail() 向客户及其候选人发送通知等。我们收到了一些客户的请求，他们希望能够批量发送电子邮件候选人工作资料等，但是，由于邮件来自我们的服务器，我们不想使用 mail() 作为发件人地址，回复等等来自我们的服务器，所以如果它被滥用，那将是我们的服务器被列入黑名单。

因此，我们研究了使用 phpmailer - 功能上它工作得很好并且使用 SMTP 详细信息，但在标头中它仍然显示我们的服务器名称和 IP 地址。如果有人恶意使用系统（例如，向要求删除其详细信息的候选人发送大量电子邮件）我认为我们的服务器仍会被列入黑名单 - 是这样吗？

大多数标头显示我的服务器信息，而 SMTP 服务器名称实际上只显示一次，那么反垃圾邮件软件实际上在标头中查看什么来确定它是好是坏？

```
Return-path: <from-address-in-phpmailer>
Envelope-to: to-address-in-phpmailer
Delivery-date: Thu, 13 Dec 2012 11:20:22 +0000
Received: from MYSERVERNAME ([myserveripaddress]:60045 helo=www.mydomain.com)
    by from-address-server-name with esmtpa (Exim 4.80)
    (envelope-from <from-address-in-phpmailer>)
    id 1Tj6py-00033k-1H
    for to-address-in-phpmailer; Thu, 13 Dec 2012 11:20:22 +0000
Date: Thu, 13 Dec 2012 11:20:22 +0000
To: Recipient <to-address-in-phpmailer>
From: Sender <from-address-in-phpmailer>
Reply-to: Sender <from-address-in-phpmailer>
Subject: PHPMailer Test Subject via smtp, basic with authentication
Message-ID: <c081a17b2526d1268a1e6cd33f212f31@MYSERVERNAME>
X-Priority: 3
X-Mailer: PHPMailer 5.1 (phpmailer.sourceforge.net)
MIME-Version: 1.0
Content-Type: multipart/alternative;
    boundary="b1_c081a17b2526d1268a1e6cd33f212f31"
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-Tracker: AAAAAA== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:50:16.690

> 我认为我们的服务器仍会被列入黑名单 - 是这样吗？

是的，因为电子邮件将来自您的服务器。

From: 地址是非权威的（据我们所知，很容易被欺骗）。

反垃圾邮件软件查看（除其他外）发送服务器的 IP。通常是被列入黑名单的 IP 地址（对于每个服务器的黑名单）。

# javascript - 标签上的Jquery点击事件未正确触发

> ID：13859159
> 
> 赞同：4
> 
> 时间：2012-12-13T11:46:33.160
> 
> 标签：javascript, jquery, html, events, click

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:55:36.590

试试这个，

```
$('a.popup').on('click',function(){
  alert($(this).parent().parent().attr('id')); // to check whether it is firing....
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:04:53.537

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T12:31:43.433

采用`this`

```
$(document).ready(function() {
    $('a.popup').on('click',function(){
        var id = $(this).parent().parent().attr('id');
        id = id.substring(5);
        alert(id);
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T11:49:26.600

我认为您想将点击回调绑定到您的链接。您可能还想阻止默认行为，否则您的页面将重新加载。

```
$(".popup").click(function(){
    var id = $(this).parent().parent().attr('id')[5];
    alert(id);
});​ 
```

`parent`此外，有效地使用类可以在它们失控之前消除大部分调用。例如。

```
<!-- Make the head div belong to class "head" -->
<div id="block1" class="head">
  <div class="slideshow">
    <a class="popup" href="#imgform">

$(".popup").click(function(){
    // If you click the first link, you'll get "block1" in the alert.
    var id = $(this).parents(".head").attr('id');
    alert(id);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T11:49:53.730

在您的事件处理程序中，您需要使用实际单击的事件。

```
$('a.popup').click(function() {
  var $id = $(this).parent().parent().attr('id');
  ...
}); 
```

请注意，从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 或 .click() 附加事件处理程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T11:55:57.493

采用：

```
$(document).ready(function() {
    var $popup = $('a.popup');
    $popup.live('click',function(){ 
        var element = $(this);
        var id = element.closest('[id^="block"]').attr('id');
        id = id.substring(5);
        alert(id);
        $.get('index.php?o='+id, function(data) {
            element.fancybox({
                //do stuff
            });
        });
    });
}); 
```

如果您使用的是 jQuery 1.7 +，请使用：

```
 $(document).on('click', 'a.popup' ,function(){ 
        //do Stuff
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-13T12:23:52.807

我遇到了类似的问题，我无法点击我尝试过（）它比live（）更好。

查看此链接以获取更多信息[http://api.jquery.com/on/](http://api.jquery.com/on/)在此页面中查看页面末尾的最后三个示例，您可能会得到更好的解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-05T07:47:09.430

您可以使用

```
$(document).on("click", "$popup", function() {
var id = $popup.parent().parent().attr('id');
        id = id.substring(5);
        alert(id);
        $.get('index.php?o='+id, function(data) {
            $popup.fancybox({
                //do stuff
            });

}); 
```

# php - Joomla 3.0 菜单致命错误

> ID：13859160
> 
> 赞同：3
> 
> 时间：2012-12-13T11:46:34.643
> 
> 标签：php, joomla, joomla3.0

在尝试将菜单项添加到 Joomla 3.0 后端的菜单中后，由于访问后端菜单部分的重复别名而失败，该菜单项不再起作用。菜单项从前端消失。尝试添加更多菜单项会导致致命错误

```
PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 36324 bytes) in \libraries\joomla\table\nested.php on line 1251 
```

删除数据库中错误的菜单项会返回前端菜单项，但后端仍然无法正常工作。

这是上面错误中突出显示的方法：带*** * 突出显示行

```
/**
 * Method to recursively rebuild the whole nested set tree.
 *
 * @param   integer  $parentId  The root of the tree to rebuild.
 * @param   integer  $leftId    The left id to start with in building the tree.
 * @param   integer  $level     The level to assign to the current nodes.
 * @param   string   $path      The path to the current nodes.
 *
 * @return  integer  1 + value of root rgt on success, false on failure
 *
 * @link    http://docs.joomla.org/JTableNested/rebuild
 * @since   11.1
 * @throws  RuntimeException on database error.
 */
public function rebuild($parentId = null, $leftId = 0, $level = 0, $path = '')
{
    // If no parent is provided, try to find it.
    if ($parentId === null)
    {
        // Get the root item.
        $parentId = $this->getRootId();
        if ($parentId === false)
        {
            return false;
        }
    }

    // Build the structure of the recursive query.
    if (!isset($this->_cache['rebuild.sql']))
    {
        $query = $this->_db->getQuery(true);
        $query->select($this->_tbl_key . ', alias')
            ->from($this->_tbl)
            ->where('parent_id = %d');

        // If the table has an ordering field, use that for ordering.
        if (property_exists($this, 'ordering'))
        {
            $query->order('parent_id, ordering, lft');
        }
        else
        {
            $query->order('parent_id, lft');
        }
        $this->_cache['rebuild.sql'] = (string) $query;
    }

    // Make a shortcut to database object.

    // Assemble the query to find all children of this node.
    $this->_db->setQuery(sprintf($this->_cache['rebuild.sql'], (int) $parentId));

    $children = $this->_db->loadObjectList();

    // The right value of this node is the left value + 1
    $rightId = $leftId + 1;

    // Execute this function recursively over all children
    foreach ($children as $node)
    {
        /*
         * $rightId is the current right value, which is incremented on recursion return.
         * Increment the level for the children.
         * Add this item's alias to the path (but avoid a leading /)
         */
   ****
        $rightId = $this->rebuild($node->{$this->_tbl_key}, $rightId, $level + 1, $path . (empty($path) ? '' : '/') . $node->alias);
   ****

        // If there is an update failure, return false to break out of the recursion.
        if ($rightId === false)
        {
            return false;
        }
    }

    // We've got the left value, and now that we've processed
    // the children of this node we also know the right value.
    $query = $this->_db->getQuery(true);
    $query->update($this->_tbl)
        ->set('lft = ' . (int) $leftId)
        ->set('rgt = ' . (int) $rightId)
        ->set('level = ' . (int) $level)
        ->set('path = ' . $this->_db->quote($path))
        ->where($this->_tbl_key . ' = ' . (int) $parentId);
    $this->_db->setQuery($query)->execute();

    // Return the right value of this node + 1.
    return $rightId + 1;
} 
```

有人有解决办法吗？

方法详细信息中链接的文档文章实际上不存在。

**编辑1：注释：**

*   这是在本地主机上的 IIS 上用于开发目的
*   将内存限制设置为 256m 和 512m 但没有变化。
*   更改了 PHP.ini 中的其他几个时间/大小限制设置，但仍然没有乐趣
*   重新启动服务器。
*   没有饼干
*   重建菜单和模块 - 修复前端显示 - 后端仍然损坏。

**编辑2：当前设置：**

```
max_execution_time: 3000 3000
max_file_uploads: 200 200
max_input_nesting_level 64 64
max_input_time 600 600
max_input_vars 1000 1000
memory_limit -1 512M 
```

**edit3：#_menu 表中的 db 行内容：**

```
 '0', 'menutype', 'title', 'alias', '', '', '', 'separator', '1', '1', '1', '0', '0', '0000-00-00 00:00:00', '0', '1', '', '0', '{\"menu_image\":\"\",\"menu_text\":1}', '223', '224', '0', '*', '0' 
```

**编辑4：进一步发现：**

例如，如果别名为“abc123”，则 #_menu 表中的每个其他记录的路径字段都更新为 abc123/existing-alias，而通过尝试添加别名为 abc123 的菜单项添加的新行上的路径保持为空，则该行具有id 为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:13:52.283

显然 menu_type 和 menu 表中缺少主键，这导致超时 - 致命错误

# sql - 备用数据库到 SQL

> ID：13859161
> 
> 赞同：0
> 
> 时间：2012-12-13T11:46:35.520
> 
> 标签：sql, sql-server, xml, database, json

我们在程序中使用 sql server 作为数据库，但我们希望备份 10,15 个关键表，这样如果服务器发生数据库崩溃，我们可以将这些表保存在本地服务器上的文件中。

我对使用什么来存储该数据感到困惑。XML、JSON 或任何其他格式。我需要一些建议。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:52:36.210

为什么要重新发明一些东西？...sql server 具有内置的备份功能；运行它并在本地复制生成的文件。如果您需要恢复，这将是快速而简单的，而不是试图从以非典型方式备份的一些表中拼凑一个数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:07:03.877

好吧，XML 允许您以打开标签/关闭标签、属性等格式存储数据。您在典型的 HTML 文件中看到的几乎都是 XML 文件的一个很好的例子。因此，您可以为存储表定义生成类似这样的内容：

```
<table name='MyTable'>
    <column type='numeric'>mycol0</column>
    <column type='varchar'>mycol1</column>
    <column type='numeric'>mycol2</column>
</table> 
```

以及用于存储记录的类似内容：

```
<record table='MyTable'>
     <datacolumn name='mycol0'>10</column>
     <datacolumn name='mycol1'>Hello</column>
     <datacolumn name='mycol2'>43</column>
</record> 
```

另一方面，您有 JSON。与 XML 不同，JSON 主要用于客户端和服务器、不同应用程序等之间的序列化和数据。这是一个示例：

```
{"employees": [{ "firstName":"John" , "lastName":"Doe" },  { "firstName":"Anna" , "lastName":"Smith" },  { "firstName":"Peter" , "lastName":"Jones" } ] } 
```

（这个例子取自 W3School）。

因此，我很清楚，如果您想将数据库导出为纯文本格式，XML 将是最佳选择。您可以找到其他替代方案，例如编写自己的格式，但 XML 是最广泛的选择，因为它简单、易于阅读，并且有很多库可以帮助您导出和导入数据。

# c++ - 如何在 .cpp 文件中使用 C++ 关键字？

> ID：13859163
> 
> 赞同：1
> 
> 时间：2012-12-13T11:46:45.987
> 
> 标签：c++, c, visual-studio-2010

根据我的要求。假设我有以下文件

```
abc.h //used for C file

int new; // All C++ keywords, new use as a variable
char class; // All C++ keywords, class use as a variable
Actual_task();

abc.c //C file

main()
{
...//Body of file where they have used new and class variable
new++; //for an example
class = 'C';
actual_task();//One function is getting called here
} 
```

我有一个`.cpp`文件需要`abc.h`使用`included`该文件`actual_task()`：

```
CPPfile.cpp

extern "C"{
#include "abc.h"
} 
```

然后它会像变量一样抛出`errors`并且`class`不能`new`像变量一样使用。

那么如何在文件中使用`C`头`cpp`文件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:57:38.370

您不能将使用 C++ 关键字的 C 头文件用于其他目的，而不是它们在 C++ 中的用途。

正确的解决方案是更改头文件，使其不再使用 C++ 关键字。

如果 C++ 关键字用于全局变量（C++ 代码不使用）或函数参数名称，您可能会使用如下构造：

```
#define new new_
#define class class_
extern "C" {
    #include "abc.h"
}
#undef class
#undef new 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:18:51.983

更改标题，使变量/函数的名称没有 C++ 中的保留字。

如果有人说你不能，那么告诉他们你被要求合并来自两种不同编程语言的源代码，从这个意义上说，这两种编程语言是不兼容的。这是已知解决方案的已知问题。

# c - 没有函数名的大括号用法

> ID：13859167
> 
> 赞同：0
> 
> 时间：2012-12-13T11:46:54.970
> 
> 标签：c, g-wan

> **可能重复：**
> [在 C 中实际使用额外的大](https://stackoverflow.com/questions/9028726/practical-use-of-extra-braces-in-c)
> [括号 C++ 中不必要的花括号？](https://stackoverflow.com/questions/9704083/unnecessary-curly-braces-in-c)

大括号的用途是什么，例如下图：

```
int var;
{
  some coding...
  ...
} 
```

大括号之前没有函数名，也没有 typedef 等。

更新：我在 gwan sqlite.c 示例中找到了这段代码， [http](http://gwan.com/source/sqlite.c)
://gwan.com/source/sqlite.c 我在下面部分引用了它：

```
...some coding
sqlite3_busy_timeout(db, 2 * 1000); // limit the joy

   // -------------------------------------------------------------------------
   // create the db schema and add records
   // -------------------------------------------------------------------------
   {   //<-- here is the starting brace
      static char *TableDef[]=
      {
         "CREATE TABLE toons (id        int primary key,"
                             "stamp     int default current_timestamp,"
                             "rate      int,"
                             "name      text not null collate nocase unique,"
                             "photo     blob);",
         // you can add other SQL statements here, to add tables or records
         NULL
      };
      sqlite3_exec(db, "BEGIN EXCLUSIVE", 0, 0, 0);
      int i = 0;
      do
      { 
         if(sql_Exec(argv, db, TableDef[i])) 
         {
            sqlite3_close(db);
            return 503;
         }
      }
      while(TableDef[++i]);

      // add some records to the newly created table
      sql_Exec(argv, db, 
               "INSERT INTO toons(rate,name) VALUES(4,'Tom'); "
               "INSERT INTO toons(rate,name) VALUES(2,'Jerry'); "
               "INSERT INTO toons(rate,name) VALUES(6,'Bugs Bunny'); "
               "INSERT INTO toons(rate,name) VALUES(4,'Elmer Fudd'); "
               "INSERT INTO toons(rate,name) VALUES(5,'Road Runner'); "
               "INSERT INTO toons(rate,name) VALUES(9,'Coyote');");

      sqlite3_exec(db, "COMMIT", 0, 0, 0);

      // not really useful, just to illustrate how to use it
      xbuf_cat(reply, "<br><h2>SELECT COUNT(*) FROM toons (HTML Format):</h2>");
      sql_Query(argv, db, reply, &fmt_html, "SELECT COUNT(*) FROM toons;", 0);
   } //<-- here is the ending brace  
...some coding 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:51:12.010

语句可以分组为[块](http://www.lix.polytechnique.fr/~liberti/public/computing/prog/c/C/SYNTAX/statements.html)，大括号表示块的开始和结束。函数体是一个块。块引入了一个新的变量范围，它从左大括号开始，到右大括号结束。

你所拥有的是一个块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:55:22.590

> 没有函数名的大括号用法

我想，与其说答案是什么，不如把重点放在**为什么**这样做。

例如，您可以使用不同的类型重用变量名来做其他事情（SQLite 示例这样做是为了在从头开始时继续使用相同的术语，而不是冒着命名冲突的风险）：

```
{
   int i = 2; 
   ...
   {
      int i = 10; // this is a different variable

      // the old value of 'i' will be restored once this block is exited.
   }
}
{
   void *i = alloca(16 * 1024); // this memory will be freed automatically
   ...                          // when the block will be exited
} 
```

但这也可以让您释放在堆栈上分配的内存`alloca()`，就像上面所做的那样。

这也清楚地表明编译器不再需要块中定义的变量（这对于确保为其他任务释放 CPU 寄存器很有用）。

如您所见，定义范围可以具有*外观*和*技术*用途。两者都很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:51:14.800

在 {} 中为局部变量创建新范围

例如在`C`：

```
fun(){ 
  int i;   // i -1
  {
    int i;   // i -2 its new variable 
  }

} 
```

# android - 显示敬酒（使用警报管理器）

> ID：13859169
> 
> 赞同：2
> 
> 时间：2012-12-13T11:47:05.597
> 
> 标签：android, alarmmanager

我有一个在 android 启动后运行的服务。我想每天早上 9 点敬酒。问题是：如何实现代码（服务中的报警器）？

开机后启动服务：

```
public class AutoStart extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
Intent serviceIntent = new Intent();
serviceIntent.setAction("com.example.startatboot.UnUsedService");
context.startService(serviceIntent);

}
}

public class Service extends Service {

@Override
public IBinder onBind(Intent intent) {
return null;
}
@Override
public void onCreate() {
super.onCreate();
}
@Override
public void onDestroy() {
super.onDestroy();
}

@Override
public void onStart(Intent intent, int startId) {
super.onStart(intent, startId);

Toast.makeText(UnUsedService.this, "Start Alarm", Toast.LENGTH_LONG).show();
}};

Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, 9);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.SECOND, 0);    AlarmManager am = (AlarmManager)     context.getSystemService  (Context.ALARM_SERVICE);
PendingIntent pi = PendingIntent.getService(context, 0, new Intent(context,     MyClass.class),      PendingIntent.FLAG_UPDATE_CURRENT);
am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),     AlarmManager.INTERVAL_DAY, pi); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:09:35.467

只需用我的代码替换您的代码，

```
public class Service extends Service {

@Override
public IBinder onBind(Intent intent) {
return null;
}
@Override
public void onCreate() {
super.onCreate();
}
@Override
public void onDestroy() {
super.onDestroy();
}

@Override
public void onStart(Intent intent, int startId) {
super.onStart(intent, startId);

Toast.makeText(UnUsedService.this, "Start Alarm", Toast.LENGTH_LONG).show();
}};

Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, 9);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.SECOND, 0);    AlarmManager am = (AlarmManager)     context.getSystemService  (Context.ALARM_SERVICE);
PendingIntent pi = PendingIntent.getService(context, 0, new Intent(context,     AlarmReceiver.class),      PendingIntent.FLAG_UPDATE_CURRENT);
am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),     AlarmManager.INTERVAL_DAY, pi); 
```

现在在同一个包中创建一个新类 AlarmReceiver 并将以下代码添加到其中。

```
 public class AlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "Alarm worked.", Toast.LENGTH_LONG).show();

    }
 } 
```

现在`PendingIntent`在`Alarm`.

在清单文件中添加以下代码，

```
<receiver android:name=".AlarmReceiver" /> 
```

现在运行您的应用程序。而已。它肯定会在 9 点敬酒。

让我知道它是否有效。

# tfs - 无法保存工作项模板：服务器存在问题。请联系您的 Team Foundation Server 管理员

> ID：13859172
> 
> 赞同：1
> 
> 时间：2012-12-13T11:47:07.997
> 
> 标签：tfs, tfs-workitem

当我尝试在 Bug 工作项中添加新字段时，我遇到了这个错误。

无法将“错误”工作项类型保存到服务器。

服务器有问题。请联系您的 Team Foundation Server 管理员。

我尝试通过使用管理员帐户连接到 tfs 服务器本身来创建工作项字段。有趣的是我能够导入备份的 Bug.xml

看起来对 Workitem 模板数据库结构的任何新更改都会引发此错误。

**但我可以添加新字段并将工作项模板保存在新团队项目集合中。**

请帮我解决这个问题。提前致谢。

**eventvwr 日志：**

**TF53010**：Team Foundation 组件或扩展中出现以下错误：日期 (UTC)：12/10/2012 9:23:18 AM 机器：BA2K8BATFS 应用程序域：/LM/W3SVC/8080/ROOT/tfs-1- 129995617805927561 程序集：Microsoft.TeamFoundation.Framework.Server，版本=10.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a；v2.0.50727 服务主机：f03592d1-d250-405e-b696-5ad489d5f953 (batfs) 进程详细信息：进程名称：w3wp 进程 ID：7400 线程 ID：3848 帐户名：NETIKLLC\Batfsadmin

**详细消息：TF246017：Team Foundation Server 无法连接到数据库。验证托管数据库的服务器是否可操作，并且网络问题是否不会阻止与服务器的通信。**

Web 请求详细信息 URL：http://:8080/tfs/_tfs_resources/WorkItemTracking/v4.0/ClientService.asmx [方法：POST] 用户代理：Team Foundation (witadmin.exe, 10.0.40219.1) 标头：Content-Length= 16491&Content-Type=application%2fsoap%2bxml%3b+charset%3dutf-8%3b+action%3d%22http%3a%2f%2fschemas.microsoft.com%2fTeamFoundation%2f2005%2f06%2fWorkItemTracking%2fClientServices%2f03%2fUpdate% 22&Accept-Encoding=gzip&Accept-Language=en-US&Expect=100-continue&Host=%3a8080&User-Agent=Team+Foundation+(witadmin.exe%2c+10.0.40219.1)&X-TFS-Version=1.0.0.0&X-TFS-Session= 75f2f259-f06b-4d99-8a29-4831f8d4191b 路径：/tfs/_tfs_resources/WorkItemTracking/v4.0/ClientService.asmx 本地请求：True 主机地址：用户：NETIKLLC\Batfsadmin [认证类型：NTLM]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:34:15.777

问题是您无权添加它。你应该在管理组中。或具有创建字段、项目、编辑或删除权限的组。从工具栏上的“团队”查看项目集合组成员！或右键单击项目并选择“团队项目设置”。如果有帮助，请投票回答谢谢！

# php - 如何在强制下载之前在图像上添加水印

> ID：13859188
> 
> 赞同：1
> 
> 时间：2012-12-13T11:48:12.597
> 
> 标签：php, codeigniter

我想在以下帮助下添加强制下载功能

```
$this->load->helper('download');
$photo_path = "uploads/default/photos/".$photo;
$name = $photo_name.'.jpg';
$data = file_get_contents($photo_path); // Read the file's contents
$name = $photo_name.'.jpg';
force_download($name, $data); 
```

现在我想在下载图像之前在图像上添加水印图像。这可以使用图像处理库还是我应该在上传文件时尝试添加水印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:06:09.897

以下是在将水印发送到 force_download 之前添加水印的方法：

```
// Get the watermark from a file
$watermark = imagecreatefrompng('watermark.png');
$wmsize = getimagesize('watermark.png');
// Get your source image
$image = imagecreatefromjpeg($photo_path);
$size = getimagesize($photo_path);
// Set the watermark to be centered within the size of the destination image
$dest_x = ($size[0] - $wmsize[0]) / 2;
$dest_y = ($size[1] - $wmsize[1]) / 2;
// Copy the watermark over the original image
imagecopy($image, $watermark, $dest_x, $dest_y, 0, 0, $wmsize[0], $wmsize[1]);
// Use output buffering to capture the output to send to force_download
ob_start(); //Stdout --> buffer
imagejpeg($image); 
$img2 = ob_get_contents(); //store stdout in $img2
ob_end_clean(); //clear buffer
imagedestroy($image);
force_download($name, $img2); 
```

# java - 认证成功后过滤不转发页面

> ID：13859190
> 
> 赞同：0
> 
> 时间：2012-12-13T11:48:16.363
> 
> 标签：java, jsp, struts, servlet-filters

我已经为所有jsp页面创建了过滤器，当远程用户不为空并且用户允许时，它允许重定向页面。代码如下

```
public void doFilter(final ServletRequest request,
            final ServletResponse response, final FilterChain chain)
            throws IOException, ServletException {

        String ssoUser = null;
        String fullURL = null;
        boolean isUserAuthorized = false;
        try {

            ssoUser = ((HttpServletRequest) request).getRemoteUser();

            String queryString =((HttpServletRequest)request).getQueryString();
            if(queryString!=null){
                fullURL = ((HttpServletRequest)request).getRequestURL().append("?").append( queryString).toString();    
            }
            else{
                fullURL = ((HttpServletRequest)request).getRequestURL().toString();
            }

            //want to forward if correct this condition
            if(ssoUser!=null){
                if(isUserAuthorized(ssoUser))
                request.getRequestDispatcher(fullURL).forward(request, response);
            }

            chain.doFilter(request, response);

        } catch (Exception e) {

        } 
```

web.xml

```
<filter>
        <filter-name>UserFilter</filter-name>
        <filter-class>com.filter.UserFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>UserFilter</filter-name>
        <url-pattern>*.do</url-pattern>
    </filter-mapping> 
```

它将检查用户并进行身份验证，但成功验证后无法转发页面。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:05:26.437

发货后添加退货

```
if(ssoUser!=null){
            if(isUserAuthorized(ssoUser))
            request.getRequestDispatcher(fullURL).forward(request, response);
            return; // added a return
        } 
```

# c# - 这个二维数组初始化代码有什么问题？

> ID：13859191
> 
> 赞同：0
> 
> 时间：2012-12-13T11:48:22.400
> 
> 标签：c#, multidimensional-array

我正在尝试获取游戏级别单元格的位置并将它们映射到二维数组。我想这样做，这样我就可以使每个地面单元（而不是背景单元）与我的玩家角色发生碰撞。

以下是某人为我创建的当前代码：

```
 int tileSize = 20;
        int screenSizeInTiles = 30;

        // initializing multidimensional array of points
        var tilePositions = new System.Drawing.Point[screenSizeInTiles, screenSizeInTiles];

        for (int x = 0; x < screenSizeInTiles; x++)
        {
            for (int y = 0; y < screenSizeInTiles; y++)
            {
                tilePositions[x, y] = new System.Drawing.Point(x * tileSize, y * tileSize);

            }
        } 
```

可以在这里找到：[如何使用锯齿状数组来记录这些图块的 x 和 y 轴？](https://stackoverflow.com/questions/13853166/how-can-i-use-a-jagged-array-to-record-the-x-and-y-axes-of-these-tiles) 以及对我正在尝试做的事情的更好描述。

所以，当我运行这段代码时，我在 tilePositions 中得到一个空数组。嗯，x 和 y 值都在那里，但值都是 0。这些值应该是单元格的位置数据。

下面是 tilesPosition 数组的样子：

[http://imgur.com/VYyxp](https://imgur.com/VYyxp)

不过，我仍在研究碰撞代码……我需要先让它工作，然后才能弄清楚那部分。

非常感谢大家，你们帮了大忙！我仍然是一个初学者，但我正在夜以继日地工作以使自己成为一个更好的程序员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:54:12.063

如果你这样做了

```
 int tileSize = 20;
        int screenSizeInTiles = 30;

        // initializing jagged array of points
        var tilePositions = new Point[screenSizeInTiles][screenSizeInTiles];

        for (int x = 0; x < screenSizeInTiles; x++)
        {
            for (int y = 0; y < screenSizeInTiles; y++)
            {
                tilePositions[x][y] = new Point(x * tileSize, y * tileSize);
            }
        } 
```

它会是锯齿状的（数组数组。）

# java - 在Java中加载cpp库时如何避免异常？

> ID：13859192
> 
> 赞同：0
> 
> 时间：2012-12-13T11:48:23.477
> 
> 标签：java, c++, java-native-interface

我正在研究Java。我正在尝试使用以下代码调用在 Java 类中加载 cpp 共享库：

```
System.loadLibrary("libraryName"); 
```

但是加载的 cpp 库本身包含一些未定义的符号。因此，当我尝试编译 Java 类时，它会抛出一个异常，如下所示：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError:libraryName.so:
libraryName.so: undefined symbol: ... 
```

即使它包含未定义的符号，我们是否有任何选项可以成功加载 cpp 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:52:09.937

是的，你可以，但在这种情况下，这个符号/方法/字段是加载库所必需的。在某些情况下，直到程序运行才发现丢失的符号。;)

加载此库的唯一方法是提供具有所需符号的库。

# c++ - 如何从命名管道中获取结构化数据并将其写入 Qt 中的 qtableview

> ID：13859194
> 
> 赞同：1
> 
> 时间：2012-12-13T11:48:34.273
> 
> 标签：c++, c, qt, pipe

```
struct my_structure {
    char name[15]; /*thread name*/
    int pid; /* pid of the thread */
    int ppid; /* parent pid of the thread */
};

struct my_structure m1[]={{"skier",12,14},{"skier1",13,14}}; 
```

我想在 Qt 的表格中显示这些结构实例的内容，使用`QTableView`. 所以想通过命名管道/先进先出将此结构化数据传递给我的 Qt 程序。

请指导我如何通过命名管道/fifo 在我的 Qt 程序中传递这些结构化数据，以及如何从 fifo 读取结构的内容，以便我可以将它们显示在`QTableView`. 还建议我在表格中显示结构内容的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:17:36.010

使用[fopen](http://linux.die.net/man/3/fopen) ("/path/to/named-pipe",....) & 然后[fread](http://linux.die.net/man/3/fread) / [fwrite](http://linux.die.net/man/3/fwrite)或

使用[open](http://linux.die.net/man/3/open) ("/path/to/named-pipe",....) 然后[读](http://linux.die.net/man/2/read)/[写](http://linux.die.net/man/2/write)。

您可以像简单文件一样读取/写入 fifos。

对于非阻塞 IO，请参阅：[如何在命名管道 (mkfifo) 上执行非阻塞 fopen？](https://stackoverflow.com/questions/580013/how-do-i-perform-a-non-blocking-fopen-on-a-named-pipe-mkfifo)

# jquery - jQuery AJAX 阻止用户更改页面

> ID：13859196
> 
> 赞同：0
> 
> 时间：2012-12-13T11:48:40.637
> 
> 标签：jquery, ajax

我在`each`声明中有多个 ajax：

```
$('.product').each(function () {
      var product = $(this).attr('data-product');
      $.ajax({
          url:"/ajax/product",
          data:"lookup=" + product,
          success: function () { /* callback */ }
      });
}); 
```

目前有 5 个产品在`each`循环中。

`submit`我的问题是，在所有这些 ajax 查找完成之前，用户无法按下表单按钮；由于调用外部 API，ajax 调用每次都需要一些时间来处理。更具体地说，他们可以按下`submit`按钮，但在所有 ajax 函数似乎都完成之前它不会做任何事情。

如果用户想提交表单，如何使 ajax 调用不稳定/不等待回复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:55:32.440

您应该使用`setTimeout()`which 将使调用在不同的线程上发生。

```
$('.product').each(function() {
      setTimeout(function () {
         var product = $(this).attr('data-product');
         $.ajax({
            url:"/ajax/product",
            data:"lookup=" + product,
            success: function () { /* callback */ }
         });
    });
}); 
```

[jQuery.deferred](http://api.jquery.com/deferred.promise/)允许异步执行代码的类似功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:51:38.113

您可以将回调传递给您的函数，以便在数据准备好时对其进行处理：

```
myFunction: function(callback) {
    $.get(myUrl, function(data) {
        callback( data );
    });
} 
```

或者您可以尝试这样做：

```
$('.product').each(function () {
      var product = $(this).attr('data-product');
      $.ajax({
          url:"/ajax/product",
          data:"lookup=" + product,
          async:true,
          success: function () { /* callback */ }
      });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:53:24.200

您的用户可以`submit`随时按下按钮，它会做它应该做的事情 - 提交表单内的所有内容。

您真正需要做的是在启动 AJAX 请求之前/之后填充包含提交按钮的表单，而不是在回调内部。

这样用户可以`submit`随时点击按钮。

# android - 带有自定义证书的 Android https 连接

> ID：13859198
> 
> 赞同：1
> 
> 时间：2012-12-13T11:48:41.823
> 
> 标签：android, ssl, https, connection, httpsurlconnection

我想使用位于 p12 包中的自定义证书进行 https 连接。我已经在 iPhone 上做过了（所以我可以验证，证书、服务器等一切都很好），但是 Android 有一些问题。

我遵循了[如何请求需要客户端证书进行身份验证的 URL](https://stackoverflow.com/questions/3734613/how-to-request-a-url-that-requires-a-client-certificate-for-authentication)，但结果出现以下异常：

> 12-13 12:32:44.545: W/System.err(4407): javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: 找不到证书路径的信任锚。12-13 12:32:44.545: W/System.err(4407): 在 org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:374) 12-13 12:32:44.545: W/System.err(4407): 在 libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:209) 12-13 12:32:44.545: W/System.err(4407): 在 libcore.net.http .HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:478) 12-13 12:32:44.545: W/System.err(4407): 在 libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433) 12-13 12:32:44.545: W/System.err(4407): 在 libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java: 856) 12-13 12:32:44.555: W/System.err(4407): 由: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: 找不到证书路径的信任锚。12-13 12:32:44.560: W/System.err(4407): 在 org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:192) 12-13 12:32:44.560: W/System.err(4407): 在 org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:163) 12-13 12:32:44.560: W/System.err(4407):在 org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.verifyCertificateChain(OpenSSLSocketImpl.java:573) 12-13 12:32:44.560: W/System.err(4407): 在 org.apache.harmony.xnet。 provider.jsse.NativeCrypto.SSL_do_handshake（本机方法）12-13 12:32:44.560：W/System.err（4407）：在 org.apache.harmony.xnet。provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:371) 12-13 12:32:44.560: W/System.err(4407): ... 18 更多 12-13 12:32:44.560: W/System。错误（4407）：原因：java.security.cert.CertPathValidatorException：找不到证书路径的信任锚。12-13 12:32:44.560: W/System.err(4407): ... 23 更多

我的连接代码如下所示：

```
KeyStore ks = KeyStore.getInstance("PKCS12");
        ks.load(context.getResources().openRawResource(R.raw.gecko_cert_1), "gecko_cert_1".toCharArray());
        KeyManagerFactory kmf = KeyManagerFactory.getInstance("X509");
        kmf.init(ks, "gecko_cert_1".toCharArray());
        SSLContext sc = SSLContext.getInstance("TLS");
        sc.init(kmf.getKeyManagers(), null, null);

        //request
        URL serverURL = new URL(myurl); 
        HttpsURLConnection conn = (HttpsURLConnection)serverURL.openConnection();
        conn.setSSLSocketFactory(sc.getSocketFactory());
        //conn.setHostnameVerifier(DO_NOT_VERIFY);
        conn.setReadTimeout(10000 /* milliseconds */);
        conn.setConnectTimeout(15000 /* milliseconds */);
        conn.setRequestMethod("GET");
        conn.setDoInput(true);
        // Starts the query
        conn.connect(); 
```

干杯，马尔辛

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-12-13T14:32:50.037

它现在对我有用。

我在连接方法的顶部添加了以下代码段：

```
 X509TrustManager[] tm = new X509TrustManager[] { new X509TrustManager() {
            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }

            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }

            public X509Certificate[] getAcceptedIssuers() {
                return new X509Certificate[0];
            }
        } }; 
```

然后换行：

```
sc.init(kmf.getKeyManagers(), null, null); 
```

至：

```
sc.init(kmf.getKeyManagers(), tm, null); 
```

我也取消了这一行的注释：

```
conn.setHostnameVerifier(DO_NOT_VERIFY); 
```

干杯，马尔辛

# c# - 方法'form2'没有重载需要'0'参数

> ID：13859203
> 
> 赞同：0
> 
> 时间：2012-12-13T11:48:57.877
> 
> 标签：c#, winforms, visual-studio

这是我对同一问题的第二个问题，但使这个例子更简单，让我更好地理解你的答案。

我得到“方法'form2'没有重载需要'0'参数”

form1 上的按钮将您带到 form2 并获取文本框的值。Form2 在标签中显示文本框的值。然后我在 form2 上有一个后退按钮，可将您带回 form1。

当我第二次使用以下代码时出现错误：

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 frm2 = new Form2();
    frm2.Show();
    this.Hide();
} 
```

以下是此示例的所有代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2(textBox1.Text);
        frm2.Show();
        this.Hide();
    }
}

public partial class Form2 : Form
{
    public string txtbox;

    public Form2(string txtbox)
    {
        InitializeComponent();
        this.txtbox = txtbox;
    }
    private void Form2_Load(object sender, EventArgs e)
    {
        label1.Text = txtbox;
    }
    private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2();
        frm2.Show();
        this.Hide();
    }
} 
```

有人可以解释一下这个以及如何做到这一点。我还是菜鸟，所以请详细说明。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T11:50:26.563

您没有默认构造函数 in `Form2`，唯一可用的构造函数 in`Form2`需要一个字符串参数。

您可以在表单中定义无参数构造函数。

```
public partial class Form2 : Form
{
    public string txtbox;
    public Form2() // a new parameterless constructor
    {
        InitializeComponent();
    } 
```

另一种选择是利用现有的构造函数并在您的按钮单击事件中传递一些字符串值。

```
Form2 frm2 = new Form2("somestring");// can be empty string as well 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T11:50:50.500

对 - 你已经声明了一个带参数的构造函数：

```
public Form2(string txtbox) 
```

...并且没有无参数的构造函数。请注意，如果您*没有*显式声明任何构造函数，编译器只会为您提供无参数构造函数。

但是您尝试不带参数*调用*构造函数：

```
Form2 frm2 = new Form2(); 
```

你*想让*它做什么？您基本上说过，为了构造 的实例`Form2`，您*必须*为`txtbox`参数提供一个值......但您没有这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:50:41.497

这条线是罪魁祸首

```
Form2 frm2 = new Form2(); 
```

Form2 没有不带参数的构造函数。它有一个接受一个参数（一个字符串），所以你要么必须提供一个参数

```
Form2 frm2 = new Form2("Some string"); 
```

或者简单地创建一个默认构造函数

```
public Form2(){
   InitializeComponent();
   this.txtbox = "Deafult value";
} 
```

如果您需要显示文本并且没有合理的默认值，请坚持只有一个构造函数。如果您可以提供默认值，则默认构造函数可能是一种有效的方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T11:52:34.947

它的意思是你没有一个form2的构造函数，基本上看起来像这样

`public Form2() { InitializeComponent(); }`

() 中的值是方法的参数

编辑：您的问题有两种解决方案..

任何一个

```
Form2 myForm = new Form2(""); 
```

或者

```
public Form2()
{ 
InitializeComponent();
txtBox.Text = "Defaultvalue";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T11:53:09.687

Form2类中的以下代码是错误的

```
private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2();
        frm2.Show();
        this.Hide();
    } 
```

您需要在构造函数中传递一个值：

```
private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2("Some value here");
        frm2.Show();
        this.Hide();
    } 
```

就像您在 Form1 中所做的一样。

或者，您可以重载 Form2 构造函数，这样您就可以在不传入值的情况下创建：

```
public Form2() : this(string.Empty){}

//This is your existing constructor
public Form2(string txtbox)
    {
        InitializeComponent();
        this.txtbox = txtbox;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-13T12:10:13.440

所有答案都解决了您收到错误的原因以及该怎么做，但我认为您真正想要的是从**Form2打开****Form1**（如您在问题中所述）。

 **我猜**Form2** button1_Click 是你的“返回”按钮。

因此，在**Form2** button1_Click 中，更改：

```
Form2 frm2 = new Form2();
frm2.Show(); 
```

到：

```
Form1 frm = new Form1();
frm.Show(); 
```

结果：

```
public partial class Form2 : Form
{
    /* ... */

    private void button1_Click(object sender, EventArgs e)
    {
        Form1 frm = new Form1();
        frm.Show();
        this.Hide();
    }
} 
```

* * *

但是，为了更好地做到这一点，您可能应该将**Form2**作为对话框打开并让**Form1**处理结果，这样您就可以重用**Form1**而不是每次都创建一个新的。

像这样的东西：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2(textBox1.Text);

        // Hide Form1 before opening Form2.
        this.Hide();

        var dialogResult = frm2.ShowDialog(); // This method will freeze until you close Form2.

        // Then we show this form again. You can check the dialogResult if you want some logic.
        this.Show();
    }
}

public partial class Form2 : Form
{
    public string txtbox;

    public Form2(string txtbox)
    {
        InitializeComponent();
        this.txtbox = txtbox;
    }
    private void Form2_Load(object sender, EventArgs e)
    {
        label1.Text = txtbox;
    }
    private void button1_Click(object sender, EventArgs e)
    {
        this.DialogResult = DialogResult.OK; // Not necessary, but good if you want to have some logic.

        // Close this form (Form2) and returns to the Form1 button1_Click.
        this.Close();
    }
} 
```**

# java - 为什么我不能在 j2me 中使用多态性？

> ID：13859208
> 
> 赞同：2
> 
> 时间：2012-12-13T11:49:19.250
> 
> 标签：java, java-me, lwuit

我使用 LWUIT 作为我的 j2me 项目的 GUI 库。我使用 LWUIT 资源编辑器生成了一个 netbeans 项目。我有一个单独的项目，我在其中为我的 j2me 程序编写附加组件。

在那个单独的项目中，我有一个 class `TextForm extends Form`，其中 Form 是标准 LWUIT 的表单。当我尝试这样做时：

```
TextForm a = new TextForm();
a.show(); 
```

一切正常。但是当我这样做时：

```
Form a = new TextForm();
a.show(); 
```

我有一个编译时错误：

```
Error preverifying class userclasses.StateMachine
    VERIFIER ERROR userclasses/StateMachine.onConnect()V:
Cannot find class client/lwuit/components/TextForm 
```

（TextForm 类包含在`client.lwuit.components`我的带有组件的单独项目的包中）。那么，有没有解决这个问题的办法呢？

UPD：
a.show() 方法是标准的 Form 方法。它负责显示表单。这里不是那么重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:11:24.443

对于任何关心的人：错误出现在项目的 build-impl.xml 文件中（它的位置是 /nbproject/build-impl.xml）。它生成不正确。错误在行

```
<nb-preverify srcdir="${preverify.sources.dir}" destdir="${preverify.classes.dir}" classpath="${platform.bootclasspath}:${extra.classpath}" configuration="${platform.configuration}" platformhome="${platform.home}" platformtype="${platform.type}" commandline="${platform.preverifycommandline}"/> 
```

查看此标记的名为 classpath 的属性：

```
classpath="${platform.bootclasspath}:${extra.classpath}" 
```

为了告诉预验证器您包含的库在哪里，请将此属性更改为以下形式：

```
classpath="${platform.bootclasspath}:${extra.classpath}:${libs.classpath}" 
```

如果您查看该`project.properties`文件（它与 build-impl.xml 位于同一目录中），您会看到，该`libs.classpath`变量提供了您包含的所有项目库的路径。

PS：是的，这似乎很奇怪，这会以这种方式影响多态性，但它解决了问题......

# java - 爬行本地文件系统 - 如何测试它

> ID：13859213
> 
> 赞同：1
> 
> 时间：2012-12-13T11:49:52.273
> 
> 标签：java, testing

我计划构建一个应用程序，该应用程序将以深度优先搜索的方式抓取本地文件系统（子树）的一部分，并处理它找到的所有文件，除了一些可配置的异常。

* * *

举个例子，假设我有一个这样的目录结构：

```
> documents
  - generic-doc.txt
  > mails
    - mail-01.txt
    - mail-02.txt
    - mail-03.txt
    > unread
      - mail-04.txt
  > invoices
    > paid
      - invoice-01.pdf
      - invoice-02.pdf
    > unpaid
      - invoice-03.pdf 
```

我也有这样的排除规则：

```
exclude = "documents/mails/unread | documents/invoices" 
```

鉴于这些输入数据，我的应用程序将处理以下文档：

*   通用文档.txt
*   mail-01.txt
*   mail-02.txt
*   mail-03.txt

（例如，它将处理所有文件，除了位于文档/邮件/未读和文档/发票文件夹中的文件）

将来，我可能需要实施各种形式的排除规则。

* * *

**测试爬取模块实现的最佳方法是什么（例如，当给定排除规则时，模块将返回正确的文档集）？可以在不使用真实文件系统的情况下完成吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:01:12.787

将排除规则提取到单独的模块/类/对象并单独测试。然后确保您的爬虫在处理文件之前询问 ExclusionRule。

草图

```
public interface FileExcluder {
   boolean isExcluded(File aFile);
} 
```

请注意，已经有提供类似服务的[FileFilter](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/filechooser/FileFilter.html)，也许您可​​以重用该抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:03:30.050

如果您使用的是 Java 7，您可以创建一个虚拟文件系统。（假设您正在使用它）

您可以创建一个可以模拟所有文件处理操作的接口，但创建测试文件和测试这些文件（完成后删除它们）可能要简单得多

# eventbrite - 如何从 EventBrite API 调用中获取要返回的 quantity_available 字段？

> ID：13859215
> 
> 赞同：0
> 
> 时间：2012-12-13T11:49:53.087
> 
> 标签：eventbrite

票证对象上的[Eventbrite 文档](http://developer.eventbrite.com/doc/tickets/)表明它可以包含一个`quantity_available`or`quantity_sold`字段，但是要查看这些字段中的任何一个“需要身份验证”。但是，它没有提供更多细节，当我使用我的应用程序键调用 event_search 方法`tickets`时，返回的事件中的对象不包含`quantity_available`或`quantity_sold`键。

*查看这些字段需要*什么身份验证？*它们是否只对活动的所有者可见，或者我是否可以通过某种方式让 API 返回其他人活动的门票数量？*

 *如果通过 API 无法做到这一点，那么在 Eventbrite 上的其他任何地方我可以通过网络抓取工具获取的事件剩余票数是否公开可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-18T09:33:31.777

这需要称为扩展。这里有更多详细信息： [https ://groups.google.com/forum/#!msg/eventbrite-api/sjMO-gV8-Go/uzw7GHq2_SEJ](https://groups.google.com/forum/#!msg/eventbrite-api/sjMO-gV8-Go/uzw7GHq2_SEJ)

基本上，这样调用它会在 python3 中使用您的 Apps OAuth 令牌填充正确的字段：

```
import requests    
eventbrite_response = requests.get(
    "https://www.eventbriteapi.com/v3/events/<YOUR EVENT ID HERE>/?expand=ticket_classes",
    headers = {
        "Authorization": "Bearer <YOUR APP OAUTH TOKEN>",
    },
    verify = True,  # Verify SSL certificate
    )
print(eventbrite_response.json()['ticket_classes'][0]['quantity_sold']) 
```

如果您愿意，您可以在最后定制打印功能以包含更多的 json 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:52:45.130

为了使用 Eventbrite API 读取或写入私有数据，您需要提供额外的用户身份验证令牌。这个额外的信息让 Eventbrite 知道在请求期间谁应该被授权访问私有数据（包括 quantity_available 和 quantity_sold 值）。

每当您提供额外的用户访问令牌时，公共和私人数据都将可用。

认证参数包括：

app_key：应用程序密钥（也称为 API 密钥），标识正在联系 API 的应用程序。所有 API 请求都必须包含某种形式的应用程序标识。如果这是提供的唯一身份验证令牌，则 API 请求将仅限于公开可用的数据。应用程序密钥的默认速率限制为每天 1000 个请求。您可以在此处获取和管理您的 API 密钥：[https ://www.eventbrite.com/api/key/](https://www.eventbrite.com/api/key/)

access_token：推荐。OAuth2 访问令牌与用户帐户和应用程序密钥相关联。由于也可以通过此令牌识别用户授权的应用程序，因此它是唯一不需要同时提供应用程序密钥的身份验证参数。注意不要将这些令牌暴露给其他用户！使用 access_tokens 联系我们的 API 时需要额外的请求标头：“Authorization: Bearer YOUR_ACCESS_TOKEN_HERE”。您可以在此处了解有关如何为 OAuth2.0 配置应用程序的更多信息：http: [//developer.eventbrite.com/doc/authentication/oauth2/](http://developer.eventbrite.com/doc/authentication/oauth2/)

user_key：每个 Eventbrite 账户都有一个关联的 user_key。除了我们的公开数据之外，此令牌还提供对相关用户帐户数据的访问。此身份验证方法适用于需要私有数据访问且无法使用 OAuth2.0 工作流程的用例。此令牌会解锁敏感信息，因此请务必小心不要将此令牌暴露给其他用户！

下面是一个使用 app_key 和 user_key 参数返回私有数据的 API 调用示例（请记住替换为您自己的 app_key 和 user_key）：

[https://www.eventbrite.com/json/user_list_events](https://www.eventbrite.com/json/user_list_events) -G -d app_key=APPKEY -d user_key=USERKEY

您还可以在此处查看身份验证文档：http: [//developer.eventbrite.com/doc/authentication/](http://developer.eventbrite.com/doc/authentication/)*

# node.js - NodeJs - 如何使用 BOM 编写函数 fs.writeFile？

> ID：13859218
> 
> 赞同：28
> 
> 时间：2012-12-13T11:49:56.973
> 
> 标签：node.js, utf-8, byte-order-mark

我正在使用 nodeJS v0.8.6 和本机库 fs。这是我的代码：

```
var filesys = require('fs');
filesys.writeFile('test.txt', 'This is an example with accents : é è à ','utf8', function (err) {}); 
```

问题是它在没有 BOM 的情况下以 utf8 写入（我使用 notepad++ 来验证它）并且它在 Windows 上的写字板中不起作用（重音没有很好地显示）。问题是我需要使用写字板的女性很好地阅读该文件。

如何将 BOM 添加到我的文件中？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-13T11:51:07.333

UTF-8 不需要 bom，当然你也可以自己添加。

```
filesys.writeFile('test.txt', '\ufeffThis is an example with accents : é è à ','utf8', function (err) {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-16T19:13:20.737

我在这个答案上详细阐述了这个答案 -[将 UTF-8 BOM 添加到 string/Blob](https://stackoverflow.com/questions/17879198/adding-utf-8-bom-to-string-blob/27975629#answer-27975629)。

这是一个非常稀疏的答案，没有详细说明**为什么**会这样。FEFF 字节实际上是 UTF16LE BOM，所以前面的答案令人困惑。

# c# - backgroundworker 图像异常

> ID：13859220
> 
> 赞同：1
> 
> 时间：2012-12-13T11:50:00.807
> 
> 标签：c#, winforms

我正在尝试从后台工作人员截取屏幕截图并显示在图片框中。

我的问题是我得到了这个例外：`Exception has been thrown by the target of an invocation.`

内部异常：`Parameter is not valid.`

有人可以解释为什么吗？

我正在使用这些`using()`块来防止内存泄漏。

```
public void DoStuff() {

    var bw = new BackgroundWorker();

    Bitmap b = null;

    bw.DoWork += delegate {

        Rectangle bounds = Screen.PrimaryScreen.Bounds;

        using(Bitmap bmp = new Bitmap(bounds.Width,
        bounds.Height,
        PixelFormat.Format32bppArgb)) {

            using(Graphics gfx = Graphics.FromImage(bmp)) {
                x.CopyFromScreen(bounds.X,
                bounds.Y,
                0,
                0,
                bounds.Size,
                CopyPixelOperation.SourceCopy);

                b = bmp;
            }
        }
    };

    bw.RunWorkerCompleted += delegate {
        pictureBox1.Image = b;
    };

    bw.RunWorkerAsync();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:57:26.297

如果要将位图分配给 PictureBox，则不应丢弃它。仅释放用于创建它的 Graphics 对象。当包含此 PictureBox 的 Form 被释放时，垃圾收集器将释放 Bitmap 实例。

另外，我建议您将图像作为参数传递给 RunWorkerCompleted，而不是在闭包中捕获它：

```
public void DoStuff()
{
    BackgroundWorker bw = new BackgroundWorker();

    bw.DoWork += (sender, args) =>
    {
        Rectangle bounds = Screen.PrimaryScreen.Bounds;
        Bitmap bmp = new Bitmap(bounds.Width, bounds.Height, PixelFormat.Format32bppArgb);
        using (Graphics gfx = Graphics.FromImage(bmp))
        {
            gfx.CopyFromScreen(
                bounds.X,
                bounds.Y,
                0,
                0,
                bounds.Size,
                CopyPixelOperation.SourceCopy
            );
        }
        args.Result = bmp;
    };

    bw.RunWorkerCompleted += (sender, e) =>
    {
        if (pictureBox1.Image != null)
        {
            pictureBox1.Image.Dispose();
        }
        pictureBox1.Image = (Bitmap)e.Result;
    };

    bw.RunWorkerAsync();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:25:53.547

Darin 提供了非常好的分辨率。关于内存泛滥 - 您可以尝试调用 GC.Collect(); 处理图像后，尽管您可能会遇到性能问题。

# java - 将 Java-1.7 项目库导入 Android 时出错

> ID：13859222
> 
> 赞同：1
> 
> 时间：2012-12-13T11:50:06.770
> 
> 标签：java, android, jar, version, java-7

最近几天我问了很多问题，因为我无法在我的 android 项目中包含 .jar 文件（与 ant 一起工作）。

今天，我将这个 Common-Project 的 Java 版本切换到 1.6 并创建了一个新的 .jar 文件。

和noooow，它的工作原理！

谁能告诉我，为什么 Android (2.2) 不支持 Java 1.7？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:57:20.197

因为在创建 Android 2.2 时，还没有 Java 1.7。

比较[http://en.wikipedia.org/wiki/Android_version_history](http://en.wikipedia.org/wiki/Android_version_history)和[http://en.wikipedia.org/wiki/Java_version_history](http://en.wikipedia.org/wiki/Java_version_history)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:19:20.483

除了时间线问题之外，还有一个问题是 Android 不是基于 Oracle Java 代码库，因此在 Android 上支持 Java 7 不仅仅是移植现有代码的问题。

*   [Android 是否计划支持 Java7？](https://stackoverflow.com/questions/8535164/does-android-plan-to-support-java7)
*   [Android 的 Java 7 语言功能](https://stackoverflow.com/questions/7153989/java-7-language-features-with-android)

事实上，Java 7 添加了一个新的字节码，因此需要对 Davlik VM 进行更改以支持它。

# iphone - Apple 推送通知上的文件丢失错误

> ID：13859225
> 
> 赞同：0
> 
> 时间：2012-12-13T11:50:19.730
> 
> 标签：iphone, ios, xcode, apple-push-notifications

嗨，我正在 Urban Airship 的帮助下为我的应用程序配置 APNS。我成功地在我的应用程序上收到通知，但无法设置 Urban Airship。我在城市飞艇中的应用程序显示我注册了 0 个设备，并且我在飞艇文件上收到很多警告。 ![在此处输入图像描述](../Images/fcb25f9869720e783c4be4f75fd85fcd.png)

上图是警告的屏幕截图。我知道我犯了愚蠢的错误，但不知道在哪里。我的设备令牌也没有注册，我没有得到任何设备令牌。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:23:56.070

尝试从项目中删除所有 Urban Airship 文件并使用“复制文件”选项再次添加它们。

# vba - excel宏将工作表另存为带有特定分隔符和附件的csv

> ID：13859231
> 
> 赞同：1
> 
> 时间：2012-12-13T11:50:45.427
> 
> 标签：vba, excel

对于 vb 和 excel，我完全是个傻瓜，试图将我在这里找到的 2 个宏组合成 1 个，但显然做了一些非常错误的事情，现在我被卡住了。首先我只是使用了这个宏（保存它作为personal.xlsb，以便能够在任何工作簿中使用它）

```
 Sub CSVFile()

    Dim SrcRg As Range
    Dim CurrRow As Range
    Dim CurrCell As Range
    Dim CurrTextStr As String
    Dim ListSep As String
    Dim FName As Variant
    FName = Application.GetSaveAsFilename("", "CSV File (*.csv), *.csv")

    ListSep = ";"
      If Selection.Cells.Count > 1 Then
        Set SrcRg = Selection
      Else
        Set SrcRg = ActiveSheet.UsedRange
      End If
    Open FName For Output As #1
    For Each CurrRow In SrcRg.Rows
      CurrTextStr = ìî
    For Each CurrCell In CurrRow.Cells
      CurrTextStr = CurrTextStr & """" & GetUTF8String(CurrCell.Value) & """" & ListSep
    Next
    While Right(CurrTextStr, 1) = ListSep
      CurrTextStr = Left(CurrTextStr, Len(CurrTextStr) - 1)
    Wend
    Print #1, CurrTextStr
    Next
    Close #1
    End Sub 
```

那加上 GetUTF8String 函数代码。现在一切正常。然后我想好了为什么不只是尝试我有限的（这是一个严重的轻描淡写）vb理解，添加以下代码并将CSVFile子更改为一个函数，然后我从下面的子调用它，输出文件名为一个参数（用于代替 FName = Application.GetSaveAsFilename）。我想是的，这段代码会自动保存所有工作表，现在让我们确保在保存每张工作表之前运行编码和分隔符/附件设置功能。这似乎不对，但我想嘿为什么不试试..

```
Public Sub SaveAllSheetsAsCSV()
On Error GoTo Heaven

' each sheet reference
Dim Sheet As Worksheet
' path to output to
Dim OutputPath As String
' name of each csv
Dim OutputFile As String

Application.ScreenUpdating = False
Application.DisplayAlerts = False
Application.EnableEvents = False

' Save the file in current director
OutputPath = ThisWorkbook.Path

If OutputPath <> "" Then
Application.Calculation = xlCalculationManual

' save for each sheet
For Each Sheet In Sheets

    OutputFile = OutputPath & Application.PathSeparator & Sheet.Name & ".csv"

    ' make a copy to create a new book with this sheet
    ' otherwise you will always only get the first sheet

    Sheet.Copy
    ' this copy will now become active
     CSVFile(OutputFile)
     ActiveWorkbook.SaveAs Filename:=OutputFile, FileFormat:=xlCSV,     CreateBackup:=False
    ActiveWorkbook.Close
Next

Application.Calculation = xlCalculationAutomatic

End If

Finally:
Application.ScreenUpdating = True
Application.DisplayAlerts = True
Application.EnableEvents = True

Exit Sub

Heaven:
MsgBox "Couldn't save all sheets to CSV." & vbCrLf & _
        "Source: " & Err.Source & " " & vbCrLf & _
        "Number: " & Err.Number & " " & vbCrLf & _
        "Description: " & Err.Description & " " & vbCrLf

GoTo Finally
End Sub 
```

保存了它，我已经成功地实现了一些非常不同的东西。在打开任何工作簿时，该宏会运行并将该特定工作簿中的工作表打开为 csv 文件（不保存它们）。现在我就像爱丽丝梦游仙境。它为什么在文件打开时运行？这是不可取的，所以我回到宏代码并将其更改回只是 csvfile 子。好吧，这没有帮助，不知道我在那里做了什么，肯定是在编辑同一个宏......所以我删除了宏，模块，我无法想象现在的东西在哪里，但它仍在运行 + 我收到这个警告宏被停用。无法摆脱它！现在小伙子们，我很抱歉我完全缺乏专业性，这只是对客户的一个小忙，没有浪费大量时间学习 vb，因为我的老板没有 t like that...我当然对如何实现在设置分隔符和附件后自动保存工作表的目标感兴趣。此刻我对如何摆脱那个宏以及它隐藏在哪里非常感兴趣。我做了什么？！感谢您的耐心等待！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:50:41.330

我认为问题出在线路上

```
OutputPath = ThisWorkbook.Path 
```

因为您是从存储在您的 XLSTART 文件夹中的 personal.xlsb 运行它，所以它在同一位置创建了 CSV 文件。当 Excel 启动时，它会尝试加载它在该位置找到的任何文件。

只需找到您的 XLSTART 文件夹并删除您在其中找到的所有 CSV 文件。

尝试使用

```
OutputPath = ActiveWorkbook.Path 
```

XLSTART 文件夹位置，取决于您的系统，可能类似于：

```
C:\Users\YOURNAME\AppData\Roaming\Microsoft\Excel\XLSTART 
```

# iphone - MPMoviePlayer 中没有显示视频的范围？

> ID：13859234
> 
> 赞同：0
> 
> 时间：2012-12-13T11:50:51.843
> 
> 标签：iphone, xcode

我正在使用此代码将视频放在 MPMoviePlayerController 上，但我没有看到 MPMoviePlayerController 上的视频权限，它只显示黑屏。

```
 NSURL *url = [NSURL fileURLWithPath:self.moviePath];
  if (playerViewController != nil){
      [playerViewController release];
   }
   playerViewController =[[[MPMoviePlayerController alloc] init]retain];
   playerViewController.view.frame = CGRectMake(0.0, 0.0, videoView.frame.size.width, videoView.frame.size.height);
   playerViewController.backgroundView.backgroundColor = [UIColor clearColor];

   playerViewController setContentURL:url];
   playerViewController.controlStyle=MPMovieControlStyleDefault;
   playerViewController.shouldAutoplay = FALSE;
   playerViewController.repeatMode=NO;
   [videoView addSubview:playerViewController.view]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:12:25.373

像这样尝试，然后检查它是否工作：

```
NSURL *url=[NSURL URLWithString:moviePath]; 
```

# html - CSS 浮动和标记顺序 - 我可以吃蛋糕吗？

> ID：13859246
> 
> 赞同：2
> 
> 时间：2012-12-13T11:51:26.787
> 
> 标签：html, css, layout, css-float

我正在创建一个响应式电子商务网站，并且正在设计一个用于向购物篮添加内容的模式对话框。我希望我的标记按以下顺序排列：

```
<div class="modal">
    <div class="item"><!-- Product info --></div>
    <div class="quantity-discounts"><!-- Details of quantity discounts --></div>
    <div class="add-to-basket">
        <select name="quantity">
            <option value="1">1</option>
            <option value="2">2</option>
            <!-- ...and so on -->
        </select>
        <a href="#" class="button">Add to basket</a>
    </div>
</div> 
```

在大屏幕上，我希望div 位于左侧，然后该`.item`部分浮动到右侧。`.quantity-discounts``.add-to-basket`

我想保持 div 的顺序，因为在小屏幕上它们不会并排浮动，它们会按照它们在标记中出现的顺序堆叠，这正是我想要的。

# 问题

由于我不完全理解`.add-to-basket`div 向右浮动的原因，但仅在`.item`div 之后，因此在其上方的 div 高度上留有间隙`.item`。让它呈现我想要的方式的唯一方法是将`.add-to-basket`div 按 div 的顺序放在第二位，但是当它们堆叠在小屏幕上时，数量折扣将显示在添加到购物篮按钮下，这不是我想要的。

我已经做了一个剥离版本作为 jsfiddle [http://jsfiddle.net/2g9TA/1/](http://jsfiddle.net/2g9TA/1/)

## CSS

CSS 明智的我浮动`.item`和`.quantity-discounts`向左并将它们的宽度设置为 66%，右边距为 2%。然后我`.add-to-basket`向右浮动并将其宽度设置为 30%。

# 我试过的

我尝试添加一个负边距，`.add-to-basket`但因为该站点是响应式和流动的，所以无论我以百分比还是像素设置它，这个边距都会相对于其他所有内容发生变化。

我现在没有主意了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:01:23.147

您应该添加`position: relative;`并`.container`添加`position: absolute; right:0px;`和`#div3`删除`float:right;`. 它会给你你需要的东西。

[演示](http://jsfiddle.net/mbilal/2g9TA/2/)

# objective-c - 以编程方式最小化 iPad 应用程序

> ID：13859249
> 
> 赞同：0
> 
> 时间：2012-12-13T11:51:34.260
> 
> 标签：objective-c, ios5

我需要以编程方式最小化我的 iPad 应用程序。`exit(0)`没有做我要求的。这可能吗？如果可以，怎么办？我不需要担心 AppStore 被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:07:55.143

Apple 不推荐（并且不允许，将在审核期间拒绝您的应用程序）iOS 应用程序以编程方式退出。

[您应该在http://developer.apple.com/library/ios/#qa/qa1561/_index.html](http://developer.apple.com/library/ios/#qa/qa1561/_index.html) 阅读 Apple 的技术问答以及[用户体验指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)
中的“不要以编程方式退出”

你可能会争辩说，最小化并不是退出，但原则是苹果希望用户拥有离开应用程序的最终决定权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:02:33.660

确实，您只能**有问题**地“最小化”应用程序- 因为仅以*编程*方式退出用户是非常**有问题**的。

 *对于将您的应用程序发送到后台，这是一个老问题，例如[在这里讨论](https://stackoverflow.com/questions/4656214/iphone-backgrounding-to-poll-for-events)。*

# c - 代码片段：这是纯 C 吗？

> ID：13859251
> 
> 赞同：0
> 
> 时间：2012-12-13T11:51:37.720
> 
> 标签：c, compiler-construction, strict

我有以下代码片段，我想知道它是纯 C 还是包含一些 C++ 元素。这个问题源于我认为它只是C，但是一些编译器不接受代码。

```
 // User struct derived from FunctionBlock
    struct Function{
        // Inputs
        int codeGenerationIterator;
        int i;
        char* s;
        // Outputs
        // Internal
    };
    void FunctionCall(struct Function *arg){
    }
    void FunctionConstructor(struct Function *arg){
        arg->i=3;
        arg->s="!";
        // Call constructor for all not primitive variables
        // Create struct with first call
        FunctionCall(arg);
    }
    // User type definition
    typedef struct Punto{
        int codeGenerationIterator;
        Function x[3+1];
            Function *x_pointer[3+1];
        double y;
    };
    void PuntoConstructor(struct Punto *arg){
        // Call constructor for all not primitive variables
        for(arg->codeGenerationIterator=0;arg->codeGenerationIterator<=3;arg->codeGenerationIterator++){
            arg->x_pointer[arg->codeGenerationIterator]=&(arg->x[arg->codeGenerationIterator]);
            FunctionConstructor(arg->x_pointer[arg->codeGenerationIterator]);
        }
    }
    // User type definition
    typedef struct Cerchio{
        int codeGenerationIterator;
        double r;
        Punto centro;
            Punto *centro_pointer;
    };
    void CerchioConstructor(struct Cerchio *arg){
        // Call constructor for all not primitive variables
            arg->centro_pointer=&(arg->centro);
        PuntoConstructor(arg->centro_pointer);
    }
    // User type definition
    typedef struct Container{
        int codeGenerationIterator;
        Cerchio circonferenza[10+1];
            Cerchio *circonferenza_pointer[10+1];
    };
    void ContainerConstructor(struct Container *arg){
        // Call constructor for all not primitive variables
        for(arg->codeGenerationIterator=0;arg->codeGenerationIterator<=10;arg->codeGenerationIterator++){
            arg->circonferenza_pointer[arg->codeGenerationIterator]=&(arg->circonferenza[arg->codeGenerationIterator]);
            CerchioConstructor(arg->circonferenza_pointer[arg->codeGenerationIterator]);
        }
    }

    int main(void){

        // Variable definitions
        int codeGenerationIterator;
        int count;
        Punto insiemePunti[50+1];
            Punto *insiemePunti_pointer[50+1];
        Cerchio cerchio;
            Cerchio *cerchio_pointer;
        Container container;
            Container *container_pointer;
        Container containers[11+1];
            Container *containers_pointer[11+1];
        // Call constructor for all not primitive variables
        for(codeGenerationIterator=0;codeGenerationIterator<=50;codeGenerationIterator++){
            insiemePunti_pointer[codeGenerationIterator]=&insiemePunti[codeGenerationIterator];
            PuntoConstructor(insiemePunti_pointer[codeGenerationIterator]);
        }
            cerchio_pointer=&cerchio;
        CerchioConstructor(cerchio_pointer);
            container_pointer=&container;
        ContainerConstructor(container_pointer);
        for(codeGenerationIterator=0;codeGenerationIterator<=11;codeGenerationIterator++){
            containers_pointer[codeGenerationIterator]=&containers[codeGenerationIterator];
            ContainerConstructor(containers_pointer[codeGenerationIterator]);
        }

        container.circonferenza[1].centro.x[0].i=2;
        containers[2].circonferenza[2].centro.x[4].i=2;

    printf("Works!");
    getchar();getchar(); // TODO: delete
    return 0;
    } 
```

如您所见，我没有使用类或重载，而只使用了简单的指令、结构和一些指针。那么，为什么一些严格的 C 编译器会给我一个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T11:53:41.127

不，这是无效的 C。这一行：

```
 Function x[3+1]; 
```

缺少`struct`关键字，并且没有`typedef struct Function Function;`介绍您似乎正在使用的类型别名。

此外，`//`注释的使用需要足够新的编译器，该语法直到 C99 才正式添加到 C 中。由于这个原因，较旧的编译器也会失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T12:33:17.327

`Some example of compilers are: "Miracle C", "Tiny C" and the error does not provide any information`

也许尝试一个真正的编译器呢？不如把你的代码扔进 GCC 以获得更好的错误信息。

尽管如此，听起来您似乎收到了错误消息：`"missing ';' at`可能只是对编译器意味着某些东西，看起来应该是两个语句，而您忘记用 a 将其分解`;`，这可能不是*最好*的错误消息，但没有编译器总能直截了当地告诉你哪里出了问题，它们只是提示，因为它们希望你更聪明。:)

你的代码中有一堆`struct`s ：

```
typedef struct Cerchio {
typedef struct Punto {
struct Function{ 
```

其中一个`struct`s 与其他 s 不同。

*   如果您使用 ，则`typedef`可以仅通过名称来引用结构`Cerchio`（例如）。
*   如果您不使用`typedef`，则需要每次显式调用它：`struct Function`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T12:57:14.860

除了缺少的`struct`关键字之外，您的代码还必须`#include <stdio.h>`. 在 C99 中，这是一个格式良好的程序所必需的。在 C89 中，没有它的程序是格式良好的（一旦其他错误得到修复），但具有未定义的行为。

`gcc -pedantic-errors -std=c99`将为您提供包含错误的确切行号，此外还会提供一些您应该注意的警告。您的定义如下：

```
typedef struct Punto { ... }; 
```

都是错误的，即使它们是合法的。没有任何效果，`typedef`因为您没有为您应该定义的类型提供名称。因此，在 C 中识别它的唯一方法是 as `struct Punto`，而不是`Punto`您想要的，因为它可以在 C++ 中识别。

# ruby-on-rails - 我怎样才能做这个操作？在脚手架上

> ID：13859253
> 
> 赞同：-1
> 
> 时间：2012-12-13T11:51:42.513
> 
> 标签：ruby-on-rails, ajax, scaffold

我正在使用 Rails 创建脚手架。这是我的索引页

```
 <%- model_class = Tasktodo -%>
<div class="page-header">
  <h1><%=t 'title', :default => model_class.model_name.human.pluralize %></h1>
</div>
<table class="table table-striped">
  <thread>
    <tr>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th><%= model_class.human_attribute_name(:name) %></th>
      <th><%= model_class.human_attribute_name(:tname) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
<div id="edit">
    <% @tasktodos.each do |tasktodo| %>
      <tr>
        <td><%= link_to tasktodo.id, tasktodo_path(tasktodo) %></td>
        <td><a href="#" onclick="inedit()" style="text-decoration:none"><%= tasktodo.name %></a></td>
        <td><%= tasktodo.tname %></td>
        <td><%=l tasktodo.created_at %></td>
        <td>
</div>

<%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_tasktodo_path(tasktodo), :class => 'btn btn-mini' %> 
```

如果我单击编辑按钮意味着。它将像下一页一样进入编辑页面。现在我想在没有服务器命中的情况下进行操作。意味着当我单击时不要进入下一页。所有操作应仅在同一页面中完成。使用 Ajax，我该怎么做这个操作。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:54:33.060

我能提供的最好的就是这个链接[http://guides.rubyonrails.org/ajax_on_rails.html](http://guides.rubyonrails.org/ajax_on_rails.html)

遵循它，您将能够使用 RoR 和 JQuery（使用 Ajax）构建 CRUD 支架

希望这可以帮助

# java - Java Swing 内部框架作为对话框

> ID：13859258
> 
> 赞同：-1
> 
> 时间：2012-12-13T11:52:26.520
> 
> 标签：java, swing, dialog, jinternalframe

我在 netbeans 中创建了一个项目。我有一个内部框架，我想将其显示为对话框。请帮我。注意：我使用了 windows 的外观和感觉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:32:43.830

不要使用`java.awt.Dialog`或`javax.swing.JDialog`。而是查看以' ' 开头的[`JOptionPane`方法](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#method_summary)`showInternal..`。例如

![内部对话](../Images/2ff040751ac1ae3b13b8c2ff2c7cf820.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class InternalDialog {

    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                // the GUI as seen by the user (without frame)
                JPanel gui = new JPanel(new BorderLayout());
                gui.setBorder(new EmptyBorder(2, 3, 2, 3));

                JDesktopPane dtp = new JDesktopPane();
                gui.add(dtp);

                ActionListener listener = new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        Component c= (Component)e.getSource();
                        JOptionPane.showInternalMessageDialog(c, "Message");
                    }
                };
                for (int ii=0; ii<3; ii++) {
                    JInternalFrame jif = new JInternalFrame();
                    dtp.add(jif);
                    jif.setLocation(new Point(ii*30, ii*20));
                    jif.setSize(200,50);
                    jif.setVisible(true);

                    JButton b = new JButton("Click me!");
                    b.addActionListener(listener);
                    jif.add(b);
                }

                // TODO!
                gui.setPreferredSize(new Dimension(280, 150));
                gui.setBackground(Color.WHITE);

                JFrame f = new JFrame("Demo");
                f.add(gui);
                // Ensures JVM closes after frame(s) closed and
                // all non-daemon threads are finished
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // See http://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:23:02.370

**Swing**有自己的原生外观和感觉。您可以在`JDialog` [此处](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)记录自己。对于平台外观，请尝试使用**SWT**。下次请更具体地回答您的问题。祝你好运。

# c++ - 将带 int 的 unsigned char 数组转换为 unsigned char

> ID：13859259
> 
> 赞同：0
> 
> 时间：2012-12-13T11:52:26.513
> 
> 标签：c++

有人可以帮我解决以下错误。`len`在我尝试通过之前我应该​​施放`buf`吗？

```
int len=2;
unsigned char tmp[len + 1];
unsigned char * buf = &tmp; 
```

错误是：

```
error: cannot convert 'unsigned char (*)[(((unsigned int)((int)len)) + 1)]' to 'unsigned char*' in assignment 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:55:30.250

如果您只想要一个指向数组的指针，请使用

```
unsigned char * buf = tmp; 
```

顺便说一句，您声明的方式`tmp`使其成为[可变长度数组](http://en.wikipedia.org/wiki/Variable-length_array)（VLA）。从技术上讲，[这些在 C++ 中是不允许的](https://stackoverflow.com/questions/1887097/variable-length-arrays-in-c)，尽管许多编译器支持 VLA 作为扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:59:21.163

问题不是`len`。问题是您试图获取数组的地址，而不是数组第一个元素的地址；类型根本不匹配。

反而：

```
unsigned char* buf = &tmp[0]; 
```

此外，数组名称方便地（FSVO“方便地”）衰减为`&tmp[0]`反正，所以你可以简单地写：

```
unsigned char* buf = tmp; 
```

此外，您目前没有对数组的维度使用常量值 - 确保使用常量值进行`len`制作`const`和初始化。在 C++11 中，最好`constexpr`确保您不会意外尝试使用 GCC VLA *。*

# visual-studio-2010 - 如何获取 System.Collections.Specialized.HybridDictionary 中的所有键？

> ID：13859260
> 
> 赞同：0
> 
> 时间：2012-12-13T11:52:27.607
> 
> 标签：visual-studio-2010, c#-4.0, dictionary, key

如何在不使用 foreach 的情况下获取 System.Collections.Specialized.HybridDictionary 中的所有键？

我有一个方法

```
void Get(IDictionary options)
{
...
} 
```

在调试时，我可以在此方法的主体内设置断点。我想`options`在 Visual Studio 2010 的监视窗口中查看所有键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:54:28.600

有楼盘[`Keys`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.hybriddictionary.keys.aspx)，你在找吗？

```
var allKeys = dict.Keys; 
```

MSDN

> 获取`ICollection`包含 中的键的`HybridDictionary`。
> 
> ICollection 中值的顺序未指定，但它与由 Values 方法返回的 ICollection 中的关联值的顺序相同。
> 
> 检索此属性的值是 O(1) 操作。

如果您想像访问它一样访问它`List`（从上面引用的 msdn 的备注部分可以看出，这不一定是个好主意）：

```
var allKeys = new List<object>(dict.Keys.Count);
allKeys.AddRange(dict.Keys.Cast<object>()); 
```

（无论如何都隐含地使用循环）

**编辑**：

> 实际上，我需要在 Visual Studio 2010 中调试时查看监视窗口中的所有键。我不能在监视窗口中使用 foreach 和 List。

然后在快速监视窗口中执行此操作：

```
string.Join("," , dict.Keys.Cast<object>()); 
```

# c# - Control.BeginInvoke() 上的 ArgumentException、TargetParameterCountException。为什么？

> ID：13859266
> 
> 赞同：0
> 
> 时间：2012-12-13T11:52:42.300
> 
> 标签：c#, invoke, begininvoke

使用 BeginInvoke() 时出现 ArgumentException 和 TargetParameterCountException。

1) 在第一次调用时，它给出 System.ArgumentException：“System.String”类型的对象无法转换为“System.Object[]”类型。

2) 在第二次调用中，它给出 Gives TargetParameterCountException: {"Parameter count mismatch."}

为什么会这样？

```
using System;
using System.Threading;
using System.Windows.Forms;

namespace BeginInvokeArgsTest
{
    public partial class Form1 : Form
    {
        private delegate void VoidDelegate(params object[] args);

        private Delegate methodDelegate;

        public Form1()
        {
            InitializeComponent();

            methodDelegate = new VoidDelegate(SetLabelDelegate);

            Thread t = new Thread(ChangeDay);
            t.Start();
        }

        private void ChangeDay()
        {
            //Gives ArgumentException. 'System.String' cannot be converted to type 'System.Object[]'.
            ChangeDay(new VoidDelegate(SetLabelDelegate), "Sunday" );

            //Gives TargetParameterCountException: {"Parameter count mismatch."}
            ChangeDay(new VoidDelegate(SetLabelDelegate), "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");
        }

        private void ChangeDay(Delegate del, params object[] args)
        {
            if (this.InvokeRequired)
            {
                methodDelegate = del;
                this.BeginInvoke(new VoidDelegate(RouterDelegate), args );
            }
        }

        private void RouterDelegate(params object[] args)
        {
            methodDelegate.DynamicInvoke(args);
        }

        private void SetLabelDelegate(params object[] args)
        {
            foreach (object day in args)
            {
                label1.Text = day as string;
                Thread.Sleep(1000);
            }            
        }
    }
} 
```

*PS：现在更正了错误的问题。对于老错误的问题，我真诚地道歉。我通常不会这么粗心。如果有的话，也请忽略语言语法错误。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:05:50.493

好的......有一个更完整的例子，很容易看到发生了什么。

问题是委托需要一个必须是对象数组的参数。

现在看看你是如何调用它的：

```
private void ChangeDay(Delegate del, params object[] args)
{
    if (this.InvokeRequired)
    {
        methodDelegate = del;
        this.BeginInvoke(new VoidDelegate(RouterDelegate), args);
    }
} 
```

这里应该是一个*参数*`args`数组......其中的多个。因此，如果您的委托采用两个字符串参数，您将有一个长度为 2 的一个，其中每个元素都是一个字符串引用。*`object[]`*

 *所以你*想要*的是一个`object[]`长度为 1 的，它的唯一元素是对另一个的引用`object[]`。您可以轻松地做到这一点：

```
this.BeginInvoke(new VoidDelegate(RouterDelegate), new object[] { args }); 
```

和同样的事情`RouterDelegate`：

```
methodDelegate.DynamicInvoke(new object[] { args }); 
```

到那时，我相信一切都会正常工作（就委托调用而言——您*不*应该在 UI 线程中休眠，但那是另一回事）。*

# jquery - Wordpress 中的 jQuery 手风琴 - 对象没有手风琴方法

> ID：13859276
> 
> 赞同：0
> 
> 时间：2012-12-13T11:53:08.913
> 
> 标签：jquery, wordpress

我正在关注关于在 Wordpress 中[使用自定义帖子类型构建 jQuery Accordion 的教程](http://wp.tutsplus.com/tutorials/creative-coding/create-an-faq-accordion-for-wordpress-with-jquery-ui/)，除了返回以下错误的实际 Accordion 之外，一切正常：

```
Uncaught TypeError: Object [object Object] has no method 'accordion' 
```

根据谷歌搜索时发现的建议，我在 header.php 中注释掉了硬编码的 jQuery 调用，并且 jQuery 在functions.php 中加载如下：

```
if ( !is_admin() ) {
  wp_deregister_script('jquery');
  wp_register_script('jquery', ("http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"), false);
  wp_enqueue_script('jquery');
} 
```

该代码生成以下 html：

```
<div id="#wptuts-accordion">
  <h3><a href="">Testimonial 1</a></h3>
  <div><p>This is testimonial Text</p></div>
  <h3><a href="">Testimonial 2</a></h3>
  <div><p>This is testimonial 2</p>
</div> 
```

导致错误的jQuery代码如下：

```
jQuery(document).ready(function() { 
  jQuery("#wptuts-accordion").accordion();  
}); 
```

教程代码还包括以下内容，我假设只是下载了 jQuery css 并注册了脚本，但我想知道这是否是问题所在

```
add_action( 'wp_enqueue_scripts', 'wptuts_enqueue' );  
function wptuts_enqueue() {  
    wp_register_style('wptuts-jquery-ui-style', 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/south-street/jquery-ui.css');  
    wp_enqueue_style('wptuts-jquery-ui-style');  
    wp_register_script('wptuts-custom-js', get_template_directory_uri() . '/testimonials/testimonials.js', 'jquery-ui-accordion', '', true);  
    wp_enqueue_script('wptuts-custom-js');  
} 
```

jQuery 似乎只在页面上加载一次。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:35:05.483

起初这可能有点令人困惑。 [`wp_register_script`](http://codex.wordpress.org/Function_Reference/wp_register_script)第三个参数必须是一个依赖数组。你有一个字符串。所以我应该是：

```
wp_register_script(
    'wptuts-custom-js',
    get_template_directory_uri() . '/testimonials/testimonials.js',
    array('jquery', 'jquery-ui-accordion'), // an array of the js files it depend on
    '',
    true
); 
```

**一般提示**，如果您遵循教程，请在问题中提供指向教程的链接

# jquery - 查询中的苹果 iphone 应用商店样式照片滑块

> ID：13859278
> 
> 赞同：-2
> 
> 时间：2012-12-13T11:53:23.340
> 
> 标签：jquery, jquery-ui, cordova, jquery-mobile, phonegap-plugins

我正在寻找一个 jQuery 插件来帮助我设计一个图像滑块，就像 iphone iOS 6 应用商店应用程序中使用的图像滑块一样。此应用程序使用滑块显示应用程序的屏幕截图。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:02:50.597

有几个幻灯片插件可用，

例如 [PhotoSwipe](http://www.photoswipe.com/) - 以及指向其[示例页面的链接](http://www.photoswipe.com/latest/examples/04-jquery-mobile.html)

[迪亚波幻灯片](http://www.pixedelic.com/plugins/diapo/)

或 Diapo 的继任者[相机幻灯片](http://www.pixedelic.com/plugins/camera/)

# php - 使用 iis 时将 php 与 mssql 连接

> ID：13859282
> 
> 赞同：0
> 
> 时间：2012-12-13T11:53:29.550
> 
> 标签：php, sql-server, connection

我已经在 IIS 中成功配置了 php。示例 php 页面工作正常。现在我想将它连接到 sql server 我尝试通过在 ext 文件夹中下载 mssql .dll 文件来尝试它，我还尝试通过安装 Windows 驱动程序的扩展名，然后它也无法正常工作。请帮助解决这个问题。我也在使用 php5.3.19。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:51:35.357

为了将 PHP 5.3 与 SQL Server（2005 及更高版本）一起使用，您需要[Microsoft Drivers for PHP for SQL Server](http://www.microsoft.com/en-us/download/details.aspx?id=20098)。有两个版本可用：2.0 和 3.0。3.0 包括对 SQL Server 2012 和 PHP 5.4 的支持。

[您可以在TechNet 文章](http://social.technet.microsoft.com/wiki/contents/articles/1258.accessing-sql-server-databases-from-php.aspx)中找到有关安装 dll 和连接 SQL Server 的说明。

要安装扩展，您必须将它们移动到您的 ext 文件夹并在 php.ini 中添加一行以加载它们，如下所示：

```
extension=php_sqlsrv_53_nts_vc9.dll 
```

完成此操作后，重新启动 Web 服务器并加载 phpinfo 以查看扩展是否已加载。如果它已正确加载，您应该[会在 PHPInfo 中看到“sqlsrv”部分](http://social.technet.microsoft.com/wiki/cfs-filesystemfile.ashx/__key/communityserver-components-imagefileviewer/CommunityServer-Wikis-Components-Files-00-00-00-00-05/1307.Figure2_2800_sqlsrv_2900_.jpg_2D00_550x0.jpg)。

当您开始编写连接到 SQL Server 的 PHP 时，请确保您已安装本机客户端。当前版本是[SQL Server 2012 Native Client](http://technet.microsoft.com/en-us/library/ms131321.aspx)。该 API 的参考资料可[在 TechNet](http://msdn.microsoft.com/en-us/library/cc296152%28v=sql.105%29.aspx)和[PHP.net](http://php.net/manual/en/book.sqlsrv.php)上找到。

最后，考虑升级到 PHP 5.4。3.0版本的驱动支持5.4，2.0版本不支持；如果您无法在系统上安装 3.0，您可以[在 PHP.net 上](http://downloads.php.net/pierre/)找到 5.4 兼容版本的 DLL（sqlsrv-5.4-nts-snap.zip 或 sqlsrv-5.4-ts-snap.zip） 。我在这些版本中取得了不错的成绩。

# php - 如何对基于数据库的算法进行单元测试？(php)

> ID：13859284
> 
> 赞同：0
> 
> 时间：2012-12-13T11:53:37.990
> 
> 标签：php, unit-testing

到目前为止，测试一些东西“很容易”，但是这次我需要测试一个基于数据库源的算法。应该为此填充数据库，但是有没有一种好的工作方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:27:51.117

您所描述的实际上是一个集成测试。

您需要确保您的测试可以设置所需的数据并自行清理以保持测试的可重复性。我通常[创建数据库/表作为测试设置的一部分](http://www.stevefenton.co.uk/Content/Blog/Date/201110/Blog/Database-Integration-Testing-With-Enhance-PHP/)，然后在完成后删除它们，这比尝试将表恢复到特定状态更容易。

# android - 如何在Android中使用IOS的ViewDeck？

> ID：13859286
> 
> 赞同：3
> 
> 时间：2012-12-13T11:53:39.690
> 
> 标签：android, ios, android-layout

我正在开发一个在 android 和 ios 中的应用程序。我发现这个库可以帮助查看布局。[https://github.com/Inferis/ViewDeck](https://github.com/Inferis/ViewDeck)但我在 android 中还没有那么幸运。有没有人有几个库做类似的事情？

（facebook 和 Path 类型的隐藏菜单）

为他人。我在这里找到了这个 ios 库列表，如 viewdeck 之一。

[http://bitly.com/bundles/o_27ukkruo5l/1](http://bitly.com/bundles/o_27ukkruo5l/1)

谢谢

# php - 在 PHP 中更改数组键值

> ID：13859288
> 
> 赞同：1
> 
> 时间：2012-12-13T11:53:45.387
> 
> 标签：php, arrays, key

我有一个像下面这样的数组，

```
[test] => Array
        (
            [0] => 1
            [1] => 3
            [2] => 5
            [3] => 13
            [4] => 32
            [5] => 51
        ) 
```

我需要将此数组更改为如下所示，

```
[test] => Array
            (
                [2] => 1
                [4] => 3
                [6] => 5
                [8] => 13
                [10] => 32
                [12] => 51
            ) 
```

我需要更改键值。我怎样才能做到这一点？。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T11:56:37.373

```
$newArray = array_combine(
    range(2,count($originalArray)*2,2),
    array_values($originalArray)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:06:46.073

array_values() 函数返回一个包含数组所有值的数组，并重置所有键。你可以这样做

```
$arr = array(0 => 1, 1 => 3, 2 => 5, 3 => 13, 4 => 32, 5 => 51);
$count = 1;
$tempArr = array();
foreach ($arr as $key => $val) {
    $tempArr[$count * 2] = $val;
    $count++;
}
var_dump($tempArr);exit; 
```

在你身边试试这个代码。

# php - 有没有相当于 javascripts a = b && bc || 的 php d

> ID：13859290
> 
> 赞同：5
> 
> 时间：2012-12-13T11:53:49.350
> 
> 标签：php, javascript, variables

有什么办法可以模仿 php 中的 javascripts 松散变量处理吗？例如，在 php 中我必须写

```
$instituteID = ( isset( $p['regInstituteName'] ) && isset( $p['regInstituteName']['ID'] ) ) ? $p['regInstituteName']['ID'] : null; 
```

而在 javascript 中，这会浓缩为

```
instituteID = p.regInstituteName && p.regInstituteName.id || null; 
```

看起来并没有太大的区别，但它加起来

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T11:57:35.250

基本上..没有。过去[有过一些提议](https://wiki.php.net/rfc/ifsetor)，但都被拒绝了。

**编辑**：您可以在您乐意抛出`E_NOTICE`错误的情况下对其进行优化。但我建议不要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:00:28.013

你的箱子只需要一个`isset`。

因为如果`$p['regInstituteName']['ID']`设置了，那么`$p['regInstituteName']`总是设置。

```
$instituteID = isset($p['regInstituteName']['ID']) ? $p['regInstituteName']['ID'] : null; 
```

# java - 如何处理版本化 SOAP Web 服务的代码？

> ID：13859291
> 
> 赞同：17
> 
> 时间：2012-12-13T11:53:50.750
> 
> 标签：java, service, web, version, versioning

背景：

*   我们的网络服务是公司内部的，但有很多不同的系统使用它们
*   我们将努力尽可能弃用/删除旧版本的 api

有很多关于 Web 服务版本控制的信息，我们决定使用以下方法对我们的 Web 服务进行版本控制：

*   在 URL 中保留版本（我知道有些人反对这一点，但主要是关于 REST 服务）
*   将版本保存在命名空间中。

但是，现在我们正在决定如何实际实现这一点，在这里我们还没有找到太多关于最佳实践的信息。我们使用（Java）：

*   定义我们的 Web 服务（和 Web 服务 api）的注释
*   使用 XML 注释进行注释的 POJO bean，用于定义内容
*   用于从/转换到业务层和 Web 服务 pojo 的转换器类
*   春天

因此，要在 Web 服务上保留旧版本，我们需要保留旧版本的代码。为此，我们基本上研究了两种不同的方法：

1）对于每个新版本，制作相关代码的完整新副本

这种方法看起来像这样：

```
com.company.webservice.v3\. -all of the web service classes, POJO’s and converters go here
com.company.webservice.v4\. -all of the web service classes, POJO’s and converters go here 
```

所以，这里我们复制了代码。简而言之，我们的想法：

*   代码重复。将是几个具有相同代码的类。也许在 Eclipse 中令人困惑。
*   完全隔离，轻松判断具体版本由什么构成
*   将影响先前版本服务功能的风险降至最低

2) 使用 spring 只复制受更改影响的每个类

这种方法意味着使用 Spring IoC 并让所有版本的 Web 服务尽可能使用相同的代码。只有当我们做出影响行为/api 的更改时，我们才会制作这些类的新版本。例如：

```
com.company.webservice.beans.MyXMLAnnotatedPOJOv3.java
com.company.webservice.beans.MyXMLAnnotatedPOJOv4.java
com.company.webservice.translators.MyXTranslatorv1.java
com.company.webservice.translators.MyXTranslatorv2.java 
```

*   可能很难清楚地看出是什么构成了特定版本的 Web 服务。在维护代码时，可能更容易错误地影响以前版本的 Web 服务
*   没有代码重复。仅将更改作为新类实现

这两种方法都不是最佳的，但我们还没有找到很多关于这方面的信息。所以，我的问题是： ***你会使用这两种方法中的哪一种？或者你会采取完全不同的方法吗？***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T12:21:50.037

从 Java 生成 wsdls 时，我会使用包解决方案：

```
com.company.webservice.v3\. 
```

它存在代码重复问题，但是 POJO 和转换器在版本之间可能存在差异，因此代码重用毕竟可能不太可行。主要优点是，如果您想摆脱旧版本，只需删除相关包即可。

我会在 URL 中保留版本号，因为无论如何你都不在做 REST。此外，如果某些版本仍在使用，您可以检查访问日志。

# visual-studio-2010 - Visual Studio中的命令提示符与系统（）？

> ID：13859292
> 
> 赞同：0
> 
> 时间：2012-12-13T11:53:53.547
> 
> 标签：visual-studio-2010, dll, imagemagick, command-prompt

我正在尝试使用 imagemagick 来组合我在 Visual Studio 中创建的一堆 .ppm 文件，每个文件都是一个动画。

当我完成程序并获得所有输出*.ppm 文件时，我可以转到命令提示符并说 im-convert -delay 80 output*.ppm final.gif，它可以完美运行并创建 gif。但是，使用 system("im-convert -delay 80 output*.ppm final.gif"); 在我的代码中调用，结果表明 im-convert 不是可识别的命令。

我不确定如何解决这个问题。Visual Studio 不使用相同的命令提示符吗？我是否需要在命令提示符可以找到的其他地方包含 imagemagick 的 .dll？

谢谢 ：）

# c++ - 制作新节点的困难

> ID：13859293
> 
> 赞同：0
> 
> 时间：2012-12-13T11:53:54.810
> 
> 标签：c++, function, nodes

我正在制作一个霍夫曼程序，我正在解码部分。我目前正在研究一个基于输入字符串创建树的函数，它创建一个 h 节点树并返回一个指针。

```
#include <iostream>
#include <cstdlib>

using namespace std;

struct Hnode{
 string data;
 int count;
 Hnode *left, *right;
 Hnode(string data) : data(data), count(0), left(NULL), right(NULL) {}
 Hnode() : data(""), count(0), left(NULL), right(NULL) {}
 Hnode(Hnode *left, Hnode *right) : data(""), count(0), left(left), right(right) {}

 Hnode * readTree(string &text)
{
 if (text[0]=='L')
  return new Hnode(text[1])
 else {
  string s = text.substr(1,text.size());
  return new Hnode(readTree(s), readTree(s));
  }
} 
```

简单解释一下，我已经编写了我的编码，所以我收到一个字符串，告诉我我的霍夫曼树是什么样子的。例如，我正在使用示例 ILaILbILrILcLd。这意味着只要有一个 I，就会有一个空的套接字排序，而 L 表示一个新的叶子，所以当你看到 ILcLd 时，你可以看到有两个叶子（c 和 d）被攻击到一个空的叶子上。

我收到错误消息说没有与 Hnode::Hnode(char&) 匹配的函数，这让我有点难以置信，因为我没有在这个函数中创建任何字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:57:53.927

您尝试`Hnode`从 a 构造 a `char`，但您的构造函数只允许`std::string`. `char`不能转换为`std::string`. 请参阅[basic_string 的构造函数文档](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)。

不要试图将 的`CharT*`构造函数`basic_string`与`&text[1]`. 这会做一些你绝对不想要的事情。

所以，你可以做什么？使用构造函数`size`

```
std::string(1, text[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:58:11.153

text[1] 是一个字符。所以 new HNode(text[1]) 试图调用构造函数 Hnode::Hnode( char )。你没有提供的。

# linq - MongoDB LINQ 提供程序对名为“id”的字段的奇怪行为

> ID：13859295
> 
> 赞同：7
> 
> 时间：2012-12-13T11:54:14.653
> 
> 标签：linq, mongodb, mongodb-.net-driver

这是 Mongo LINQ 提供程序失败的 JSON 文档：

```
{"results":
     {"text":"@twitterapi  http://tinyurl.com/ctrefg",
     "to_user_id":396524,
     "to_user":"TwitterAPI",
     "from_user":"jkoum",
     "metadata":
     {
      "result_type":"popular",
      "recent_retweets": 109
     },
     "id":1478555574, 
     "from_user_id":1833773,
     "iso_language_code":"nl",
     "source":"<a href=\"http://twitter.com/\">twitter<\/a>",
     "profile_image_url":"http://s3.amazonaws.com/twitter_production/profile_images/118412707/2522215727_a5f07da155_b_normal.jpg",
     "created_at":"Wed, 08 Apr 2009 19:22:10 +0000",
     "since_id":0,
     "max_id":1480307926,
     "refresh_url":"?since_id=1480307926&q=%40twitterapi",
     "results_per_page":15,
     "next_page":"?page=2&max_id=1480307926&q=%40twitterapi",
     "completed_in":0.031704,
     "page":1,
     "query":"%40twitterapi"}
} 
```

注意“id”字段。以下是相关的 C# 实体定义：

```
class Twitter
{
    [BsonId]
    public ObjectId Id { get; set; }
    public Result results { get; set; }
}

private class Result
{
    public string text { get; set; }
    public int to_user_id { get; set; }
    public string to_user { get; set; }
    public string from_user { get; set; }
    public Metadata metadata { get; set; }
    public int id { get; set; }
    public int from_user_id { get; set; }
    public string iso_language_code { get; set; }
    public string source { get; set; }
    public string profile_image_url { get; set; }
    public string created_at { get; set; }
    public int since_id { get; set; }
    public int max_id { get; set; }
    public string refresh_url { get; set; }
    public int results_per_page { get; set; }
    public string next_page { get; set; }
    public double completed_in { get; set; }
    public int page { get; set; }
    public string query { get; set; }
}

class Metadata
{
    public string result_type { get; set; }
    public int recent_retweets { get; set; }
} 
```

如果我创建一个“Twitter”集合并保存上面的文档，那么当我使用 Mongo LINQ 提供程序查询它时，它会引发 FileFormatException 异常：“元素 'id' 不匹配 Mongo.Context.Tests 类的任何字段或属性。本机测试+结果"

但是，有两种替代解决方法可以解决此问题：

1.  重命名结果“id”字段，例如在 JSON doc 和 Result 类中都重命名为“idd”。然后 LINQ 查询工作。
2.  保留“id”字段，但另外将字段“Id”添加到 Result 类并用属性 [BsonId] 标记它。现在 Result 类同时包含“Id”和“id”字段，但查询有效！

我使用 Mongo API 来查询集合，一切正常，所以我想这一定是 MongoDB LINQ 提供程序中的错误。嵌套 JSON 元素中的“id”不应该是保留的工作，不是吗？

**更新**：这是本机 API 查询执行的结果：

```
> db.Twitter.find().limit(1);

{ "_id" : ObjectId("50c9d3a4870f4f17e049332b"),
 "results" : { 
    "text" : "@twitterapi  http://tinyurl.com/ctrefg", 
    "to_user_id" : 396524, 
    "to_user" : "TwitterAPI", 
    "from_user" : "jkoum", 
    "metadata" : { "result_type" : "popular", "recent_retweets" : 109 }, 
    "id" : 1478555574, 
    "from_user_id" : 1833773, "
    iso_language_code" : "nl", 
    "source" : "<a href=\"http://twitter.com/\">twitter</a>", 
    "profile_image_url" : "http://s3.amazonaws.com/twitter_production/profile_images/118412707/2522215727_a5f07da155_b_normal.jpg", 
    "created_at" : "Wed, 08 Apr 2009 19:22:10 +0000", 
    "since_id" : 0, 
    "max_id" : 1480307926, 
    "refresh_url" : "?since_id=1480307926&q=%40twitterapi", "results_per_page" : 15,    "next_page" : "?page=2&max_id=1480307926&q=%40twitterapi", 
    "completed_in" : 0.031704, 
    "page" : 1, 
    "query" : "%40twitterapi" 
    } 
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T22:50:43.470

MongoDB 要求存储在数据库中的每个文档都有一个名为“_id”的字段（在根级别）。

C# 驱动程序假定类中名为“Id”、“id”或“_id”的任何字段都将映射到特殊的“_id”字段。这是一个约定，可以被覆盖。C# 驱动程序不知道您的 Result 类不打算用作集合的根文档，因此它会找到您的“id”字段并将其映射到数据库中的“_id”。

您可以覆盖它的一种方法是更改​​类中字段的名称（如您所见）。然后您还可以使用 [BsonElement] 属性将您的 C# 字段名称（例如“idd”）映射到数据库中实际使用的任何名称（例如“id”）。例如：

```
public class Result
{
    [BsonElement("id")]
    public int idd; // matches "id" in the database
    // other fields
} 
```

另一种选择是覆盖查找类的“Id”成员的约定，以抑制 Result 类的 C# 驱动程序的默认行为。您可以通过为您的 Result 类注册一个新的 ConventionProfile 来做到这一点。例如：

```
var noIdConventions= new ConventionProfile();
noIdConventions.SetIdMemberConvention(new NamedIdMemberConvention()); // no names
BsonClassMap.RegisterConventions(noIdConventions, t => t == typeof(Result)); 
```

在您的 Result 类被映射之前，您必须确保在程序的早期就这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:28:12.177

问题是您的 POCO 与您的 JSON 不匹配

您的`Twitter`类有一个 ID 和一个名为 results 的类
然而，您的 JSON 只是有结果。这就是问题所在。

所以实际上，你绕过了这个`Twitter`类，只是创建了一个实例`Result`

您的 JSON 应类似于：

```
{
  _id: ObjectId("50c9c8f3e0ae76405f7d2b5e"), 
  "results": { 
     "text":"@twitterapi  http://tinyurl.com/ctrefg",
     "to_user_id":396524,
     "to_user":"TwitterAPI",
     "from_user":"jkoum",
     "metadata":
     {
      "result_type":"popular",
      "recent_retweets": 109
     },
     "id":1478555574, 
     "from_user_id":1833773,
     "iso_language_code":"nl",
     "source":"<a href=\"http://twitter.com/\">twitter<\/a>",
     "profile_image_url":"http://s3.amazonaws.com/twitter_production/profile_images/118412707/2522215727_a5f07da155_b_normal.jpg",
     "created_at":"Wed, 08 Apr 2009 19:22:10 +0000",
     "since_id":0,
     "max_id":1480307926,
     "refresh_url":"?since_id=1480307926&q=%40twitterapi",
     "results_per_page":15,
     "next_page":"?page=2&max_id=1480307926&q=%40twitterapi",
     "completed_in":0.031704,
     "page":1,
     "query":"%40twitterapi"}
    }
} 
```

**编辑**

您`results`实际上是一个嵌入式文档（目前是您的 POCO 模型），因此您还应该使用 [BsonId] 标记 Result.ID

# php - 回显会话变量，然后取消设置会话变量不显示会话变量

> ID：13859296
> 
> 赞同：0
> 
> 时间：2012-12-13T11:54:15.790
> 
> 标签：php, session, redirect, scope

```
page1.php

$_SESSION['sVar'] = 'XYZ';
header('Location:page1.php');

page1.php
echo $_SESSION['sVar']; // Works well

page1.php
echo  $_SESSION['sVar']; // donot get displayed after adding following line
unset($_SESSION['sVar']); 
```

我的问题是：当我是回显会话变量时，它运行良好，但是当我在回显后销毁该变量时，它没有得到回显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:58:12.137

这对我来说很好

session1.php：

```
<?php
    session_start();
    $_SESSION['sVar'] = 'somecrap';
    header("Location: session2.php");
    exit; 
```

session2.php：

```
<?php
    session_start();
    echo $_SESSION['sVar'];
    unset($_SESSION['sVar']); 
```

显然，如果我刷新 session2.php，我会收到未定义的索引警告

您是否在两个页面中都开始会话？

# design-patterns - 代码管理：如何管理动态生成的javascript？

> ID：13859299
> 
> 赞同：0
> 
> 时间：2012-12-13T11:54:27.830
> 
> 标签：design-patterns, version-control, templating

我刚开始在一家拥有代码库的公司工作，其中大多数 js/css 与视图混合在一起，我正在经历将其分成单独文件的过程。

但是我不断遇到服务器变量被插入到客户端代码中的情况，这使我无法进行剪切和粘贴。

页面加载通常需要数据，因此发出请求不是可接受的解决方案。

我们使用的是 c# asp.net，但我在 PHP 中也遇到了这个问题。

是否有处理此问题的代码管理最佳实践？我渴望将“关注点分离”的想法带到这里，但我无法决定这段代码应该放在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:00:46.977

为了避免把它当作风滚草 - 我会自己回答这个问题。

我们决定只在模板中进行序列化，而不是像人们之前所做的那样遍历数组。

现在在我看来，问题是由开发人员的懒惰引起的，而不是任何技术挑战。

请参阅[使用 Razor 视图引擎输出 Json](https://stackoverflow.com/questions/4367062/outputting-json-with-the-razor-view-engine)

# c# - 在 foreach 语句中更改 Linq 对象？

> ID：13859306
> 
> 赞同：2
> 
> 时间：2012-12-13T11:54:50.970
> 
> 标签：c#, linq, foreach

考虑一下，我有一个 Linq 表类，我想在 foreach 语句中查询这个对象：

```
 IQueryable< tab_policy> Result=from c in db.tab_policy select c;

      foreach(int i=0;i<3;i++)
      {
      Result = from c in Result
                 join d in db.tab_reg_type_one_to_many.Where(a => a.reg_id==i)
                on c.poli_id equals d.poli_id
                 select c;
       } 
```

如何根据先前迭代的值更改每次迭代中的 Result 变量？？？我在此示例中获得的值仅等于最后一次迭代，而不是所有迭代一起，而在这种情况下，在每次迭代中，结果都在 foreach 内部发生变化。当我在没有 foreach 的情况下使用这个迭代时，它可以正常工作。

```
 Result = from c in Result
                 join d in db.tab_reg_type_one_to_many.Where(a => a.reg_id==0)
                on c.poli_id equals d.poli_id
                 select c;
      Result = from c in Result
                 join d in db.tab_reg_type_one_to_many.Where(a => a.reg_id==1)
                on c.poli_id equals d.poli_id
                 select c;
      Result = from c in Result
                 join d in db.tab_reg_type_one_to_many.Where(a => a.reg_id==2)
                on c.poli_id equals d.poli_id
                 select c; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:29:09.060

问题的技术原因是循环变量在每个委托`i`中被捕获，但在每次迭代中都被修改。`Where`这意味着：当查询被执行时（在循环之后），只使用最后一个值`i`。这可以通过类似`var j = i`和使用`j`的东西来解决`Where`。

但真正的解决方案要简单得多：

```
var ids = Enumerable.Range(0,i).ToList();
Result = from c in Result
         join d in db.tab_reg_type_one_to_many.Where(a => ids.Contains(a.reg_id))
             on c.poli_id equals d.poli_id
         select c; 
```

**编辑** 正如您正确评论的那样，此解决方案与 3 个联接不同。差异是微妙而难以捉摸的。使用三个（或`n`）连接，您可以抓取`c.poli_id`等于`d.poli_id`3 次的记录，而不是 1-3 次。所以毕竟解决方案是防止修改后的闭包：

```
for(int i = 0; i < 3; i++)
{
    var j = i;
    Result = from c in Result
             join d in db.tab_reg_type_one_to_many.Where(a => a.reg_id == j)
                on c.poli_id equals d.poli_id
             select c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:42:34.267

@GertArnold 感谢您的回答。这个解决方案也不正确。而是我用List替换了IQueryable，问题就解决了，因为IQueryable是在需要的时候计算的，所以是延迟计算的，但是List不是这样的，所以最终的解决方案是：

```
 List<tab_policy> Result = (from c in db.tab_policy select c).ToList();
  foreach(int i=0;i<3;i++)
  {
  Result = from c in Result
             join d in db.tab_reg_type_one_to_many.Where(a => a.reg_id==i)
            on c.poli_id equals d.poli_id
             select c;
   } 
```

# windows - DOS 批处理脚本是否有“set -e”？

> ID：13859311
> 
> 赞同：12
> 
> 时间：2012-12-13T11:55:00.240
> 
> 标签：windows, batch-file

在脚本开头的 bash 中“set -e”指示 bash 在内部任何命令第一次失败时使整个脚本失败。

如何对 Windows 批处理脚本执行相同操作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T15:44:37.950

Tuim 的解决方案有效，但它可以变得更简单。

ERRORLEVEL 已设置，因此无需转到设置 ERRORLEVEL 的标签。

你可以简单地使用

```
yourCommand || exit /b 
```

请注意，如果您处于 CALL 中间，exit /b 只会退出当前子例程。您的脚本必须逐层退出每个 CALL，直到到达脚本的根目录。只要您还在每个 CALL 语句之后进行测试，这就会自动发生

```
call :label || exit /b 
```

可以强制批处理脚本立即从任何 CALL 深度退出。请参阅[如何从函数中退出批处理文件？](https://stackoverflow.com/questions/10534911/how-can-i-exit-a-batch-file-from-within-a-function/10537432#10537432)了解更多信息。请务必阅读两个答案。公认的答案有几个潜在的严重缺陷。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T11:58:37.277

不是直接的，但您可以将以下内容添加到要执行的每一行。

```
|| goto :error 
```

然后定义错误，停止脚本。

```
:error
exit /b %errorlevel% 
```

# vb6 - 在 FlexGrid VB6 中展开折叠行

> ID：13859315
> 
> 赞同：1
> 
> 时间：2012-12-13T11:55:31.303
> 
> 标签：vb6, msflexgrid

如何在**vb6中有****FlexGrid**，我们可以在其中**展开**和**折叠行**，如果在 vb6 FlexGrid 中可以，请告诉我如何？

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:44:52.520

MSFlexGrid 不支持展开和折叠行。Hierarchical Flex Grid (MSHFlexGrid) 可以。这与使用 MSDataShape 提供程序的 SQL Server 配合得很好，但你没有说你从哪里获取数据，所以你可以尝试这些来帮助你开始......

[http://www.programmersheaven.com/mb/VB_Beginner/324737/324737/mshflexgrid/](http://www.programmersheaven.com/mb/VB_Beginner/324737/324737/mshflexgrid/) http://msdn.microsoft.com/en-us/library/aa228851%28v=vs.60%29.aspx******

# android - 在上传到 Google Play 商店时为应用程序启用 GCM

> ID：13859317
> 
> 赞同：6
> 
> 时间：2012-12-13T11:55:33.297
> 
> 标签：android, google-cloud-messaging

我正在将应用程序上传到实施 GCM 的 Google Play 商店。

上传到 Google Play 商店时如何为该应用程序启用 GCM？有一个名为“启用谷歌云消息传递统计”的部分。

尝试获取 GCM 发件人 ID 时出现此错误：

> GCM API 密钥或 C2DM 客户端登录令牌（错误密钥）无效。

任何人都可以解释在上传到 android 市场时为应用程序启用 GCM 的步骤是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-04T20:59:49.887

（这个问题已经很老了，但我希望这个答案对以后的其他人有所帮助。）

您需要使用 API 密钥，看来您复制了 Sender Id 本身。首先，在[Developer Console](https://console.developers.google.com)中创建项目后，您需要**启用 API**：

1.  在左侧边栏中，选择 APIs & auth。
2.  在显示的 API 列表中，将 Google Cloud Messaging for Android 切换到 ON。

**接下来，获取 API Key**

1.  在左侧边栏中，选择 APIs & auth > Credentials。
2.  在公共 API 访问下，单击创建新密钥。
3.  在创建新密钥对话框中，单击服务器密钥。
4.  在出现的配置对话框中，提供您的服务器的 IP 地址。出于测试目的，您可以使用`0.0.0.0/0`.
5.  单击创建。
6.  在刷新的页面中，复制 API 密钥并在[Google Play 开发者控制台中使用](https://play.google.com/apps/publish/)

[更多信息](http://developer.android.com/google/gcm/gs.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:26:22.413

确保您的**项目 ID 或发件人 ID 有效**。这是项目的唯一 ID（客户端和服务器的 ID 相同）。

在您的情况下，您可能正在使用另一个项目的项目 ID。

# c# - 搜索合同和网络服务

> ID：13859318
> 
> 赞同：0
> 
> 时间：2012-12-13T11:55:36.183
> 
> 标签：c#, search, windows-8, windows-store-apps

我正在尝试掌握现代 UI 应用程序的搜索合同。在我的特定情况下，要搜索的项目来自基于 Web 的服务，所以我很犹豫是否将它们拉到整个网络上，然后让用户搜索结果以寻找可能的单个匹配项。我的问题是，我该怎么做？最好，我只是挂钩到 QuerySubmitted 事件并使用来自 e.QueryText 的字符串从那里点击 Web 服务。这被认为是好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:44:39.113

如果您想要的只是一个简单的服务器端搜索，那么可以，挂钩**QuerySubmitted**事件并将查询文本传递给您的服务就可以了。当然，这假设您的服务支持这种查找（即，它具有 GetProductsByText 而不仅仅是 GetAllProducts）。

如果您想使用自动完成功能并在用户输入时通过提交**SuggestionsRequested**事件向他们提供建议/建议，事情会变得更加棘手。在这种情况下，首先查看[Search Contract Sample](http://code.msdn.microsoft.com/windowsapps/Search-app-contract-sample-118a92f5)以获取有关如何处理该示例的示例（此外，它还是了解通常如何使用 Search 合同的好资源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T09:20:10.987

您甚至可以在[https://www.simple-talk.com/content/print.aspx?article=1716](https://www.simple-talk.com/content/print.aspx?article=1716)获得战利品，以获得更好的画面..！

# asp.net-mvc-4 - MVC4 JSON.Net oob

> ID：13859321
> 
> 赞同：3
> 
> 时间：2012-12-13T11:55:50.330
> 
> 标签：asp.net-mvc-4, json.net

我已经阅读了一些关于 MVC 4 对 JSON.NET 的开箱即用支持的冲突信息

我收集到 MVC 现在默认使用 JSON.NET 对 JSON 进行序列化，但是我的 JSON 输出中仍然有明显的 MS 日期格式。

是否还有任何需要做的引导？

示例动作：

```
 //
    // GET: /Test/
    [HttpGet]
    public JsonResult Test()
    {
        return Json(new {date = DateTime.Now}, JsonRequestBehavior.AllowGet);
    } 
```

结果是：

```
{
    "date": "/Date(1355399663508)/"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:06:38.353

默认情况下，它仅对 asp.net web api 使用 Json.net。

根据[发布说明](http://forums.asp.net/p/1810654/5010838.aspx/1?ASP%20NET%20MVC%204%20Release%20Candidate%20released) **Json.NET：**我们现在使用并支持流行的 Json.NET 序列化程序来处理 JSON 数据。Json.NET 是 ASP.NET Web API 使用的默认 JSON 序列化程序，它包括对数据协定、匿名类型、动态类型、日期、时间跨度、对象引用保存、缩进、驼峰大小写和许多其他有用的序列化功能的支持。

# objective-c - UIWebViewDelegate 函数尚未被调用

> ID：13859326
> 
> 赞同：1
> 
> 时间：2012-12-13T11:56:04.970
> 
> 标签：objective-c, ios, uiwebview, asihttprequest, uiwebviewdelegate

.h 文件：

```
@interface MyView: UIViewController <UIWebViewDelegate> {
    UIWebView *webView;
} 
```

.m 文件：

```
-(void)viewDidLoad {
    CGRect webFrame = [[UIScreen mainScreen] applicationFrame];
    webView= [[UIWebView alloc] initWithFrame:webFrame];
    webView.delegate = self;
    [self.view addSubview:webView];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com"]]];
}

-(void)webViewDidStartLoad:(UIWebView *)webView {
    NSLog(@"start");    
}   

-(void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"finish");   
}

-(void)dealloc {
    webView.delegate = nil;
    webView = nil;
} 
```

在另一个 ViewController 中创建 MyView：

```
MyView * myView = [[MyView alloc] init];
[self.view addSubView:myView.view];
myView = nil; 
```

myView 设置为 nil，因此它的委托也被销毁。

为了解决这个问题，**去掉myView = nil这句话。**

谢谢回答我的人。我确实从你的回答中学到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:00:32.790

正如 srikanth 所说，myview 是一个控制器，需要在屏幕上告诉它并保留它，这样它就不会消失，这就是你 **的情况下的真正问题**（我认为）。没有人保留 myView。让它成为一个成员变量，这样它就不会在它给你它的视图之后直接释放:)。

```
@interface MyCallerWithDoesTheASI : NSObject {
    MyView *myView;
}
@end 
```

或者做对并**像srikanth说**的那样添加它：:

```
[self addChildViewController:myView];
[self.view addSubview:myView.view];
[myView didMoveToParentViewController:self]; 
```

或者例如并呈现 myView 模态

```
[self presentViewController:myView animated:NO completion:^{ [[myView dismiss...]; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:08:10.327

MyView 是一个视图控制器。在第二种情况下，您将其视为视图。如果你想直接添加一个视图控制器的视图，它不会调用所有的视图控制器方法。为了能够获得正确的功能，您将不得不做一些不同的事情。

假设您在另一个视图控制器中，然后在另一个视图控制器中，当您想要添加 MyView 视图控制器的视图时，请执行以下操作

```
[self addChildViewController:myView];
[self.view addSubview:myView.view];
[myView didMoveToParentViewController:self]; 
```

但即使在此之前，请使用正确的命名约定。如果您将 UIViewController 的子类命名为 MyView，您会感到困惑。将其命名为 MyViewController。这样，您将能够更好地跟踪内容。

阅读有关您的问题的视图控制器遏制的更多信息。

# python - 'function' 对象没有属性 'MY_SETTING'

> ID：13859327
> 
> 赞同：6
> 
> 时间：2012-12-13T11:56:08.207
> 
> 标签：python, django

在我的`views.py`我有

```
from django.conf import settings

  def site_view(request):
    ...
    if some_var == settings.MY_SETTING:
  ... 
```

该值`MY_SETTING`在 中定义`settings.py`。但是，当我尝试加载视图时出现以下错误：

```
Exception Type:    AttributeError
Exception Value:   'function' object has no attribute 'MY_SETTING' 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T12:07:16.047

如何导入设置，例如：

```
from django.conf import settings as conf_settings 
```

然后：

```
if some_var == conf_settings.MY_SETTING: 
```

# windows-phone-7 - 使用 VisualStateManager.GoToState 后 Hubtile 动画不流畅

> ID：13859332
> 
> 赞同：2
> 
> 时间：2012-12-13T11:56:22.637
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-8

全部，

我正在使用 HubTile

```
xmlns:toolkit=clr-namespace:Microsoft.Phone.Controls; assembly=Microsoft.Phone.Controls.Toolkit

<toolkit:HubTile Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2"
                                         Margin="0,0,6,6"
                                         Source="/Assets/Categories/events.jpg"
                                         Title="Events"
                                         Name="hubevents"
                                         GroupTag="Sizes"
                                         IsFrozen="True"
                                         Background="#a3bdd3"
                                         Tap="tap_events">
                            </toolkit:HubTile> 
```

我想从折叠状态开始 hubtile 动画/转换。所以我在“MainPage_Loaded”中关注

```
VisualStateManager.GoToState(this.hubevents, "Collapsed", true); 
```

它工作正常，hubtile 以折叠状态显示。但问题是，当 hubtile 从“折叠”状态变为下一个状态时，它不会动画，它会在没有平滑/流畅动画的情况下跳转到它。在此之后进入其他状态是正常的平滑动画。第一个转变不是流动的。如果我根本不执行 GotoState，那么一切都会按预期顺利进行。

希望这很清楚。如果没有修复，有什么解决方法吗？

*我正在使用面向 7.1 操作系统的 windows phone sdk 8.0。*

提前致谢。

# c# - 从我的操作系统的任何文件夹中检测文件删除并防止通过 c# 或 win32 api 删除

> ID：13859338
> 
> 赞同：0
> 
> 时间：2012-12-13T11:56:44.360
> 
> 标签：c#, filesystemwatcher

我知道我们可以使用 FileSystemWatcher 监视特定文件夹。在 FileSystemWatcher 的帮助下，我们可以保存删除文件的日志。假设我有 Windows 服务，它将一直运行，如果任何用户尝试从我的操作系统中删除任何具有特定扩展名的文件，那么我的 Windows 服务将向用户显示一个消息框并阻止用户删除该文件。我只想知道我可以用 FileSystemWatcher 类来做到这一点。如果 FileSystemWatcher 可以，那么请在此处讨论如何使用 FileSystemWatcher 或如果不可以，那么我如何通过我的 win 服务或普通 win 应用程序实现它。win32 api可以吗？. 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:58:05.717

使用适当的 Windows 安全措施 - 文件权限和访问组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:24:41.297

唯一的方法是拥有一个文件系统过滤器驱动程序，它将跟踪删除和移动请求（此处移动到回收站）并取消此类请求。您可以编写自己的过滤器驱动程序或使用我们的 CallbackFilter 产品。使用 CallbackFilter，任务很简单——在用户模式下（可能在 C# 中）少于十几行代码。

# php - 发布时UTF8不起作用

> ID：13859340
> 
> 赞同：0
> 
> 时间：2012-12-13T11:56:49.023
> 
> 标签：php, utf-8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T12:02:39.150

Browsers will send the data in same encoding as you declared to page to be. For a sanity test, run this page:

```
<?php
header("Content-Type:text/html; charset=utf-8");
$file = basename(__FILE__);
if( isset( $_POST['data'] ) ) {
    echo $_POST['data'];
}
else {
    echo <<<HTML
        <form method="POST" action="$file">
            <input name="data" type="text">
            <input type="submit">
        </form>
HTML;
} 
```

Write "äöä" to the form and see if it's right. If it isn't, try to check your mbstring ini values for:

```
<?php

var_dump(
    ini_get("mbstring.http_input"),
    ini_get("mbstring.http_output"),
    ini_get("mbstring.encoding_translation")
); 
```

The correct values are:

```
string(4) "pass"
string(4) "pass"
string(1) "0" 
```

# r - 使用 R 中另一个函数的参数创建函数

> ID：13859342
> 
> 赞同：1
> 
> 时间：2012-12-13T11:56:53.190
> 
> 标签：r, function, arguments

我创建了一个函数`Dummyfunc`来计算不同样本的倍数变化。我`gsva`在这个函数中使用`Dummyfunc`函数。我想`gsva`从 my 访问函数的所有参数，`Dummyfunc`以便我可以根据需要更改参数的值。到目前为止，我已经尝试过这样做：-

```
Dummyfunc <- function(method="gsva",verbose=TRUE,kernel=){
gsva(method=method,kernel=kernel,verbose=verbose)
} 
```

但是它可以以自动化的方式完成，以便`gsva`可以访问函数的所有参数吗？`Dummyfunc`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:02:28.683

我不太确定你在追求什么，但会使用`...`. 例如：

```
Dummyfunc = function(...)
     gsva(...) 
```

或者

```
Dummyfunc = function(method="gsva", verbose=TRUE, ...)
     gsva(method=method, verbose=verbose, ...) 
```

我们`...`用来传递任何额外的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:05:36.920

如果我正确理解您的问题，您应该将它们全部传递出去，`...` 您可能会将它们全部写出来，但这可能需要一段时间。

```
# define the internal function
f.two <- 
    function( y , z ){
        print( y )
        print( z )
    }

# define the external function,
# notice it passes the un-defined contents of ... on to the internal function
f.one <-
    function( x , ... ){
        print( x )

        f.two( ... )

    }

# everything gets executed properly
f.one( x = 1 , y = 2 , z = 3 ) 
```

# java - 如何将字符串中的某些字符替换为用户的其他字符？

> ID：13859343
> 
> 赞同：0
> 
> 时间：2012-12-13T11:56:54.940
> 
> 标签：java

我写了一个文本，我想将一些字符更改为用户将选择它们的任何其他字符，我尝试并找不到正确的答案，所以请指导我。MyTest 类中的代码是：

```
public String replace(String input,char from,char to){
   String input2 ="";
   String input3="";
   this.input=input3;
   for(int i=0;i<input.length();i++){
       for(int j=0;j<input3.length();j++){
          if(input.charAt(i)==input3.charAt(j)){
              input2=input3.replace(from, to);
              System.out.println(input2);
          }
       }

   }
   return input2;
} 
```

主类中的代码：

```
System.out.println("please enter the new character: ");
   char c1 = scan.next().charAt(0);
   System.out.println("Please choose the letters that you want to change it which in the text:");
   String ltr = scan.next();
   obj1.convertChars(ltr, c1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:10:43.910

**(1) 你应该做什么：**

有一个简单的方法可以满足您的需求[`String#replace(char,char)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29)：：

```
String replaced = myString.replace(from,to); 
```

**(2) 为什么你的代码失败：**

请注意，您正在迭代并尝试调用`replace()`on `input3`，而它是一个空字符串！你从来没有改变过它！实际上，您的方法什么都不做（除了分配实例变量`input`. 绝对不是您想要的。

**（3）同样重要：** `String` java中的s是*不可变的*

在java中，`String`是不可变的——所以你实际上是用替换的字符创建一个新的字符串，而不是替换同一个字符串对象中的字符！

更改`String`不是那么简单，应该避免，但可以使用[反射 API](http://docs.oracle.com/javase/tutorial/reflect/index.html)来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:04:11.103

你想做的甚至不应该是一种方法。原因如下：

```
public String replace(String input,char from,char to){
    return input.replace(from, to);
} 
```

因此这种方法没有任何价值——你应该直接调用[`replace()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29)String 的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:24:36.123

这个问题似乎有点不清楚。我希望你想要一个这样的函数：从主函数调用这个函数。传递字符串“abcde”、“a”、“x”。它会返回“xbcde”。

```
public String replace(String inputStr, char from, char to){
    StringBuffer newString=new StringBuffer();
    for(int i=0;i<inputStr.length();i++){
        if(inputStr.charAt(i)==from){
            newString.append(to);
        }
        else{
            newString.append(inputStr.charAt(i));
        }
    }
    return newString.toString();
} 
```

# asp-classic - 从 ASP.Classic 中的 Web.Config 读取 ConnectionString

> ID：13859344
> 
> 赞同：10
> 
> 时间：2012-12-13T11:57:00.207
> 
> 标签：asp-classic, vbscript

我有一个 ASP 文件。实际上，我使用文件中的 connectionString 连接到数据库。

```
sConnString = "Driver={SQL Server}; Server=localhost; Database=DB" 
```

有没有办法从 Web.Config 中读取 ConnectionString？

编辑：

得到它的工作：

```
' Imports a connection string from an xml file (usually web.config)
Function ImportConnectionString(webConfig, attrName, reformatDSN)
    Dim oXML, oNode, oChild, oAttr, dsn
    Set oXML=Server.CreateObject("Microsoft.XMLDOM")
    oXML.Async = "false"
    oXML.Load(Server.MapPath(webConfig))
    Set oNode = oXML.GetElementsByTagName("connectionStrings").Item(0) 
    Set oChild = oNode.GetElementsByTagName("add")
    ' Get the first match
    For Each oAttr in oChild 
        If  oAttr.getAttribute("name") = attrName then
            dsn = oAttr.getAttribute("connectionString")
            If reformatDSN Then
                ' Optionally reformat the connection string (adjust as needed)
                dsn = Replace(dsn, "User ID=", "UID=")
                dsn = Replace(dsn, "Password=", "PWD=")
                dsn = Replace(dsn, "Data Source=", "Server=")
                dsn = Replace(dsn, "Initial Catalog=", "Database=")
                dsn = Replace(dsn, "Persist Security Info=True;", "")
                dsn = "Provider=MSDASQL;Driver={SQL Server};" & dsn
            End If
            ImportConnectionString = dsn
            Exit Function
        End If
    Next
End Function 
```

用法：

```
dsn = ImportConnectionString("..\web.config", "ConnectionStringName", false)
sql = "SELECT * FROM MyTable"
Set oConn = Server.CreateObject("ADODB.Connection")
Set oRS = Server.CreateObject("ADODB.RecordSet")
oConn.Open dsn
oRS.Open sql, oConn

If NOT oRS.EOF Then
   oRS.MoveFirst
   Do
      Response.Write("&nbsp; &nbsp; &nbsp;" &  oRS("Column1") & "<br/>")
      oRS.MoveNext
   Loop Until oRS.EOF
End If 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T14:43:50.923

由于 Web.Config 文件是 XML，只需将其加载到[XML DOM](http://msdn.microsoft.com/en-us/library/aa923288.aspx)中并以这种方式访问​​其元素。

# sql-server-2008 - FluentNHibernate 中的查询排序规则

> ID：13859346
> 
> 赞同：3
> 
> 时间：2012-12-13T11:57:05.797
> 
> 标签：sql-server-2008, fluent-nhibernate

我正在使用 Fluent NHibernate + LINQ 和 MS SQL 2008。

我想要实现的是不区分重音的搜索，在 SQL 中它看起来像这样：

```
select * from people where name = 'somestring' COLLATE Latin1_General_CI_AI 
```

是否可以写这样的东西：

```
Session.Query<Person>.Where(p => p.Name == "somestring").WithCollation(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-06T16:32:55.083

这可能是您想要的：http: [//blog.schuager.com/2009/06/case-sensitive-queries-in-nhibernate.html](http://blog.schuager.com/2009/06/case-sensitive-queries-in-nhibernate.html)

# java - 如何隐藏或删除 JLabel

> ID：13859348
> 
> 赞同：4
> 
> 时间：2012-12-13T11:57:09.323
> 
> 标签：java, swing, jlabel

我已经声明了一个 JLable 如下；

```
l = new JLabel("Hello");
l.setHorizontalAlignment(SwingConstants.CENTER);
panel.add(l); 
```

现在，我想隐藏或删除它。我应该调用什么方法？

我试过`l.removeAll();`<---没有发生任何事情。

还有另一个`remove(int)`需要一个 int 的 calle。但我不确定要传递什么作为参数。

还有一个东西叫`hide()`。但它已被弃用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T12:08:14.603

> ```
> i tried l.removeAll(); <--- nothing hapend. 
> ```

您需要调用添加到`remove`的位置：`JPanel``JLabel`

```
panel.remove(l);

//after that you need to call this to revalidate and repaint the panel
panel.revalidate(); 
panel.repaint(); 
```

只是隐藏而不是删除呼叫

```
l.setVisible(false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T12:07:59.150

这可能会帮助你

隐藏标签

```
l.setVisible(false); 
```

通过将 Label 对象作为参数从父对象中移除

```
panel.remove(l); 
```

移除所有组件

```
panel.removeAll(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T12:02:33.373

试试 panel.remove(l);

panel.removeAll() 也应该可以工作，但这也会删除可能已添加到面板的其他组件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T12:04:38.340

你可以试试：

```
setVisible(false) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T12:01:01.083

应该使用`hide()`tell的 javadoc 。`setVisible()`所以试着打电话`setVisible(false)`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T12:23:13.197

我在我的项目中遇到了同样的问题。

您应该确保删除以前的控件并刷新面板。

看到这个片段代码：

```
panel.removeAll();  

panel.revalidate(); 
```

希望这能帮助你一切顺利:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-27T12:07:35.960

你必须使用方法`getContentPane()`。这种方式可以通过组件的声明名称来移除元素。

```
私有 JFrame 框架；
私人 JLabel 标签；
...

frame.getContentPane().remove(label);

```

# html - 我的内容不会进入包装器

> ID：13859349
> 
> 赞同：0
> 
> 时间：2012-12-13T11:57:15.937
> 
> 标签：html, css

我无法让我的内容进入包装器，它只显示在左侧

```
<div id="middle">   
    <div class="wrapper">
    <div id="image_rose"><img src="assets/rose.jpg"/></div>
    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci.</p>
    <img src="assets/leef.png" />
    <p>Text Input:</p> 
```

CSS：

```
.wrapper{
    background-color:#666666;
    width:900px;
    margin:0px auto;
    text-align:left;
}

#middle{
    background-color:#666;
    width:900px;
    float:left;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:59:40.400

您将内容和包装器放入#middle，它会向左浮动。包装器的大小和中间相同，因此仅位于左侧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:43:39.593

如果内容显示在 div 之外，您可以尝试`overflow: hidden;`在 css 中向该特定 div 添加一个或不同的溢出设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:30:05.797

您可以清除浮动，如下所示： clear:both

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:09:25.507

试试这个布局来让你的中间内容居中

**HTML**

```
<div id="wrapper">

   <div id="middle">

   </div>

 </div> 
```

**CSS**

```
#wrapper
{
width:100%;
padding:0px;
margin:0px;
}

#middle
{
 margin:0 auto;
 width: 600px;
} 
```

# php - Facebook 页面活动提要

> ID：13859353
> 
> 赞同：1
> 
> 时间：2012-12-13T11:57:24.720
> 
> 标签：php, facebook

我们想将 Facebook 页面的活动提要作为小部件添加到我们的 Wordpress 博客。这似乎应该是一件简单的事情，但 Facebook 文档拒绝提供相关描述。似乎“可能”需要一个应用程序，尽管可能不是...

非常感谢任何提示。

托比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:01:38.293

您可以通过图形 API 从 facebook 页面获取 RSS 提要；将用 XML 编写

编辑：

此处概述了大多数必要的步骤：http: [//sem-group.net/search-engine-optimization-blog/subscribe-to-your-favorite-facebook-page-via-rss/](http://sem-group.net/search-engine-optimization-blog/subscribe-to-your-favorite-facebook-page-via-rss/)

尽管作为上述步骤的一部分，您需要获取页面的 id。

获取 Facebook 页面 ID：[http ://rieglerova.net/how-to-get-a-facebook-fan-page-id/](http://rieglerova.net/how-to-get-a-facebook-fan-page-id/)

Wordpress 似乎有自己的特定插件用于导入 RSS 提要： [http ://wordpress.org/extend/plugins/rss-import/](http://wordpress.org/extend/plugins/rss-import/)

（PS 如果您发现这回答了您的问题，您是否有机会接受它？）

# java - 如何在 Java 代码中本地化 Wicket 消息？

> ID：13859356
> 
> 赞同：2
> 
> 时间：2012-12-13T11:57:27.293
> 
> 标签：java, localization, wicket

我遵循这个例子： [https](https://cwiki.apache.org/WICKET/everything-about-wicket-internationalization.html) ://cwiki.apache.org/WICKET/everything-about-wicket-internationalization.html 但我没有找到如何在java代码中创建本地化消息。

我的情况是：

```
try {

...

} catch (RuntimeException e) {
  // depends on language log message and show it in feedbackPanel
  error("");
} 
```

我知道我可以在那里添加一些开关，因为我可以获得当前的语言环境，但我认为这不是明确的解决方案。我想通过 Page.lanugage.properties 解决它，我有所有本地化消息

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T12:31:51.727

Wicket 提供了一个`getString()`进行正确本地化的 on 组件。

在您的示例中：

```
try {

 ...

} catch (RuntimeException e) {
    // depends on language log message and show it in feedbackPanel
    error(getString("some.property.id"));
} 
```

通过Wickets`some.property.id`属性加载器从属性文件加载的位置。

# android - 多个线程在表面视图中更新 UI

> ID：13859362
> 
> 赞同：0
> 
> 时间：2012-12-13T11:57:39.723
> 
> 标签：android, multithreading, user-interface, surfaceview, runnable

我正在开发一款安卓游戏，我才刚刚开始，所以请善待你的答案

我有一个surfaceview，它创建了几个我已经在它们上实现了Runnable的类，它们从surfaceview接收持有者，这样他们就可以使用画布来更新surfaceview。

问题是，我使用 holder 来锁定和解锁每个类中的可运行画布，并且它们都同时更新 UI，这是我不想要的。

现在发生了什么事：

12:00:00 线程 1 更新 UI
12:00:00 线程 2 更新 UI
12:00:01 线程 1 更新 UI
12:00:01 线程 2 更新 UI
12:00:02 线程 1 更新 UI
12:00:02线程 2 更新 UI

我真正想要的：

12:00:00 线程 1 更新 UI
12:00:02 线程 2 更新 UI
12:00:03 线程 1 更新 UI
12:00:07 线程 2 更新 UI
12:00:10 线程 1 更新 UI
12:00:15线程 2 更新 UI

这些时间只是例子......

知道如何使用不同的线程在不同时间更新表面视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:59:21.247

您可以使用 HandlerThread 从线程中获取要完成的更新。它会像这样工作：

```
Private final HandlerThread inboxHandlerThread;
Private final Handler inboxHandler;

public void onCreate(){
    inboxHandlerThread = new HndlerThread("inbox");
    inboxHandlerThread.start();
    inboxHandler = new Handler(inboxHandlerThread.getLooper()){
        @Override
        public void handleMessage(Message msg){
            UIActivity.this.handleMessage(msg);
        }
    }
}

public final boolean handleMessage(Message msg){
    switch(msg.what){
    case UPDATE_Thread1:
       someObject.setValue(msg.arg1);
       break;
    case UPDATE_Thread2:
       anotherObject.setValue(msg.arg1);
       break;
    }
} 
```

你可以简单地通过`Message.obtain(Handler inboxHandler, int what, int arg1, int agr2).sendToTarget()`

另请查看[http://mindtherobot.com/blog/675/android-architecture-message-based-mvc/](http://mindtherobot.com/blog/675/android-architecture-message-based-mvc/)以获取有关消息的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:02:19.143

它正在调用线程同步。如果您的线程想要更​​新 UI ，他应该等待另一个线程，如果这个另一个线程正在更新。你可以搜索[android线程同步](http://www.google.com/#hl=en&tbo=d&sclient=psy-ab&q=android+thread+synchronization&oq=android+thread+sunch&gs_l=hp.3.0.0i13l2j0i13i30j0i8i13i30.557.4813.0.5974.20.19.0.0.0.4.966.6254.0j8j6j5-3j2.19.0.les;eqn,fixedpos=false,boost_normal=40,boost_high=40,cconf=1-2,min_length=2,rate_low=0-035,rate_high=0-035,second_pass=false,ignore_bad_origquery=true,onetoken=false..0.0...1c.1.RMQtfRX5oQA&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.1355272958,d.Yms&fp=c2f54b9677d9ac79&bpcl=39942515&biw=1440&bih=809)，你会找到你想要的；）

问候海克·纳哈佩蒂安

# eclipse - 将本地 EGit 存储库导出到本地 GitStack 存储库

> ID：13859367
> 
> 赞同：3
> 
> 时间：2012-12-13T11:58:00.617
> 
> 标签：eclipse, git, version-control, egit, gitstack

我已经在我的计算机上设置了[GitStack](http://gitstack.com)，以便能够在各种机器上构建我的应用程序。我的 Eclipse 项目有一个本地 git repo，但我不知道如何连接这两者。

**Team > Remote > Push**和Team **> Push to Upstream**不可用（灰色）。

我已经配置了以下内容并[阅读了本教程](http://wiki.eclipse.org/EGit/User_Guide#Push_Upstream)：

*   Eclipse 中的 Git 用户名和电子邮件。
*   我在 Gitstack 中添加了一个用户和一个 repo。

我还尝试单击我的本地 git 存储库并**粘贴存储库路径或 URI**，并且我设法连接到本地主机上的 GitStack 存储库，尽管它显然是空的。我想这是我必须在其他机器上同步的东西？

我如何将两者联系起来？

* * *

这是我的命令行尝试（注意：我使用的是 cygwin）：

```
[~/eclipse/JfxMCApp]> git.exe remote add jfxmcapp.gitstack.local http://localhost/JfxMCApp.git

[~/eclipse/JfxMCApp]> git.exe remote -v
jfxmcapp.gitstack.local http://localhost/JfxMCApp.git (fetch)
jfxmcapp.gitstack.local http://localhost/JfxMCApp.git (push)

[~/eclipse/JfxMCApp]> git.exe push jfxmcapp.gitstack.local
warning: push.default is unset; its implicit value is changing in
Git 2.0 from 'matching' to 'simple'. To squelch this message
and maintain the current behavior after the default changes, use:

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use:

  git config --global push.default simple

See 'git help config' and search for 'push.default' for further information.
(the 'simple' mode was introduced in Git 1.7.11\. Use the similar mode
'current' instead of 'simple' if you sometimes use older versions of Git) 
```

在这之后 Git 只是挂了很久？

* * *

更新：添加后出现在eclipse中`git remote add`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:59:28.637

第一：尝试使用git命令行客户端。Git 是强大而邪恶的——如果你把它隐藏在 GUI 后面，它不会告诉你任何秘密。

关于您的问题：现在您将 gitstack 存储库设置为远程，您需要做的就是推送。如果推送到上游选项不可用，请尝试从命令行执行：运行 git shell，转到您的项目目录并运行`git push`.

# matlab - 在两个高斯中找到顶点

> ID：13859368
> 
> 赞同：2
> 
> 时间：2012-12-13T11:58:00.177
> 
> 标签：matlab, graph, gaussian

所以我有这张图，上面有在matlab中创建的这两个高斯

![在此处输入图像描述](../Images/edb419513c7f2c1d8e87e4e5acc7cb68.png)

该图是使用以下 matlab 代码创建的

```
TimeTakenWDriver = textread('TimeTakenWDriver.txt');
TimeTakenWODriver = textread('TimeTakenWODriver.txt');
fig1 = figure;

h1 = histfit(TimeTakenWDriver);
std1 = std(TimeTakenWDriver);
std2 = std(TimeTakenWODriver);
mean1 = mean(TimeTakenWDriver)
mean2 = mean(TimeTakenWODriver)
delete(h1(1));
set(h1(2),'color','b');
hold on;
h2 = histfit(TimeTakenWODriver);
delete(h2(1));
set(h2(2),'color','r'); 
```

现在我想找到与这两个相对应的两个 y 坐标，这意味着我搜索了周围的“两个顶点”，但由于我创建图表的方式，我无法找到任何可行的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:36:26.683

您可以尝试直接从图中获取数据：

```
C = get(get(gca, 'Children'), 'YData'); 
```

然后使用以下方法找到峰值`max`：

```
max(C(:)) 
```

请注意，如果您在同一轴上有两个或多个图（如您的示例中所示），`C`则将是一个单元格数组，因此您需要分别访问每个单元格以获取峰值：

```
cellfun(@(x)max(x(:)), C) 
```

# c++ - C++：如何告诉 Eclipse 使用哪个版本的库

> ID：13859370
> 
> 赞同：1
> 
> 时间：2012-12-13T11:58:09.703
> 
> 标签：c++, eclipse, ubuntu, boost

我使用的是 ubuntu 12.04，它有一个 boost (1.46.1) 版本

安装到**/usr/lib**并在**/usr/include**中包含文件。

我已经在本地编译了自己的版本（1.51.1），并且到目前为止一直在使用它。

我正在开发一个新项目，该项目使用了许多包含`/usr/include`和库，`/usr/lib`所以在我的包含路径中，我有`/usr/include`，`/home/aly/libs/boost/stage/include`

同样在我拥有的 lib 搜索路径`/usr/lib`和`/home/aly/libs/boost/stage/lib`. 但是，当我将 boost 库添加到链接时，它似乎正在从中获取它们`/usr/lib`，这导致我的代码无法工作。

如果我删除`/home/aly/libs/boost/stage/lib`并`/home/aly/libs/boost/stage/include`

它工作正常，但现在不能使用 1.51 功能。

有没有解决这个问题的简单方法？

# r - 查找位于数据集中的成员之间的交互计数

> ID：13859374
> 
> 赞同：1
> 
> 时间：2012-12-13T11:58:26.237
> 
> 标签：r, dataframe

我有一个通过流量数据显示成员之间的通过流量，[这是示例数据集](https://www.dropbox.com/s/5cu0xyfef9w5up7/J_H1S1T5.csv)

它以连续的行显示成员之间的交互。我想计算那些交互，并获得一个新的数据集，显示每个成员之间发生了多少次交互，方向无关紧要

例如：

```
between 26 and 11 = X
between 26 and 27 = Y 
```

我只是不知道我可以使用哪个函数以及如何为这个计算编写代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:12:49.920

您可以使用包中的`rollaply`函数`zoo`来查找所有交互。这些交互的频率可以使用 来计算`table`。（我假设你的对象被称为`dat`。）

```
library(zoo)
table(as.data.frame(rollapply(dat[[1]], 2, sort))) 
```

结果：

```
 V2
V1    4  8 10 11 13 17 19 25 26 27 53
  4   2 13 17  1  2  5  6  3  1  9  4
  8   0  2 14 11 10  4  5  0 13 13 11
  10  0  0  3  9  7  2  4  2  8 11  8
  11  0  0  0  1  6  5  4  4  5  4 25
  13  0  0  0  0  0  1  3  5  7  9  8
  17  0  0  0  0  0  0  1  1  1  5  5
  19  0  0  0  0  0  0  1  1  1  5  4
  25  0  0  0  0  0  0  0  0  5  8  5
  26  0  0  0  0  0  0  0  0  1  5  3
  27  0  0  0  0  0  0  0  0  0  0  1
  53  0  0  0  0  0  0  0  0  0  0  1 
```

矩阵的下三角部分仅包含零，因为方向无关紧要。

如果您对相同值之间的交互不感兴趣，请使用以下命令：

```
table(as.data.frame(rollapply(rle(dat[[1]])$values, 2, sort)))

    V2
V1    8 10 11 13 17 19 25 26 27 53
  4  13 17  1  2  5  6  3  1  9  4
  8   0 14 11 10  4  5  0 13 13 11
  10  0  0  9  7  2  4  2  8 11  8
  11  0  0  0  6  5  4  4  5  4 25
  13  0  0  0  0  1  3  5  7  9  8
  17  0  0  0  0  0  1  1  1  5  5
  19  0  0  0  0  0  0  1  1  5  4
  25  0  0  0  0  0  0  0  5  8  5
  26  0  0  0  0  0  0  0  0  5  3
  27  0  0  0  0  0  0  0  0  0  1 
```

# vb.net - TCP 上的超时异常未处理

> ID：13859377
> 
> 赞同：0
> 
> 时间：2012-12-13T11:58:32.537
> 
> 标签：vb.net, tcp, timeoutexception

由于 VS 2010 不支持 TCP 连接的超时，因此我从网站获取了此代码：

```
Private Function ConnectWithTimeout() As Boolean
    Dim ar As IAsyncResult = TCPClient.BeginConnect(IPAddress, TCPPort, Nothing, Nothing)
    Dim wh As System.Threading.WaitHandle = ar.AsyncWaitHandle

    Try
        If Not ar.AsyncWaitHandle.WaitOne(TimeSpan.FromSeconds(2), False) Then
            TCPClient.Close()
            TCPClient = New System.Net.Sockets.TcpClient
            Throw New TimeoutException()
        End If
    Catch ex As Exception
        ThrowError("Timeout on connecting to " & IPAddress & " at port " & TCPPort & ".")
        Return False
    Finally
        wh.Close()
    End Try

    Return True
End Function 
```

它工作正常，但每次，它都会在调试输出上给我这个：

“发生了‘System.TimeoutException’类型的第一次机会异常”

即使我抓住了所有的例外。有没有办法在处理此异常消息时摆脱它？

我试过这个：

```
 Dim connectDone As New System.Threading.AutoResetEvent(False)
    TCPClient.BeginConnect(IPAddress, TCPPort, New AsyncCallback(Sub(ar As IAsyncResult)
                                                                     TCPClient.EndConnect(ar)
                                                                     connectDone.Set()
                                                                 End Sub), TCPClient)
    'client.BeginConnect("127.0.0.1", 80, new AsyncCallback(delegate( IAsyncResult ar ) { client.EndConnect( ar );  connectDone.Set(); }), client);

    If Not connectDone.WaitOne(2000) Then
        Debug.WriteLine("TIMEOUT")
        Return False
    End If

    Return True 
```

但它在 beginconnect 行上给了我 InvalidOperationException：当另一个异步操作在同一个 Socket 上进行时，无法调用 BeginConnect。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-01T21:17:51.033

```
Private Function ConnectWithTimeout() As Boolean
    Dim ar As IAsyncResult 
    Dim wh As System.Threading.WaitHandle  

    Try
          ar = TCPClient.BeginConnect(IPAddress, TCPPort, Nothing, Nothing)
          wh = ar.AsyncWaitHandle
    Cath ex as Exception
          'Code to catch exception
    End Try

    Try
        If Not ar.AsyncWaitHandle.WaitOne(TimeSpan.FromSeconds(2), False) Then
            TCPClient.Close()
            TCPClient = New System.Net.Sockets.TcpClient
            Throw New TimeoutException()
    End If
    Catch ex As Exception
        ThrowError("Timeout on connecting to " & IPAddress & " at port " & TCPPort & ".")
        Return False
    Finally
        wh.Close()
    End Try

    Return True
End Function 
```

# kohana - kohana3.2 中的多个 Auth 驱动程序

> ID：13859378
> 
> 赞同：0
> 
> 时间：2012-12-13T11:58:35.763
> 
> 标签：kohana, kohana-3.2, kohana-auth

我正在开发一个项目，我正在尝试为客户实施针对外部用户群的身份验证，这似乎工作正常。

最近增加了另一个要求，即某些人（不在上述基地中）需要能够编辑部分页面内容。首先想到的是为这几个编辑器启用单独的 ORM/File Auth 驱动程序，以便能够分别对它们进行身份验证。

在 Kohana 3.2 中是否可以同时使用两个 Auth 驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:12:51.347

Kohana 的 Auth 模块本身不支持使用两个驱动程序。

但是，您可以非常轻松地自己实现一个新的驱动程序。您可以按照说明通过复制现有驱动程序并修改它来创建新驱动程序，此处： http: [//kohanaframework.org/3.3/guide/auth/driver/develop](http://kohanaframework.org/3.3/guide/auth/driver/develop)

简单的做法是将以下逻辑放入您的`_login`方法中：

1.  检查外部用户数据库的有效登录
2.  如果外部用户数据库中存在有效用户，则返回 true。
3.  如果外部用户数据库中没有有效用户，则改为检查本地用户数据库。
4.  如果用户存在于本地数据库中，则返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T18:06:50.743

是的，您可以同时使用不同的驱动程序。只需创建另一个实例而不是标准单例：

```
// default Auth
$config = Kohana::$config->load('auth');
$auth = new Auth($config);
$user = $auth->get_user();
// special Auth for administration
$config2 = Kohana::$config->load('admin_auth');
$auth2 = new Auth($config2);
$admin = $auth2->get_user(); 
```

限制：

1.  您必须使用不同的配置（`driver`并且`session_key`值必须不同）。请注意，某些设置是在类中定义的，不能通过配置更改（例如，“记住”cookie named `authautologin`）。
2.  您不能共享默认的 ORM 模型 ( `Model_User`, `Model_Token`, `Model_Role`)，因为它们的名称是硬编码的。但是可以使用 ORM 驱动程序和文件驱动程序。

# iphone - - （无效）添加 对象：函数

> ID：13859384
> 
> 赞同：0
> 
> 时间：2012-12-13T11:58:49.043
> 
> 标签：iphone, ios, properties

如果为可变数组定义属性...

```
@property (nonatomic, strong) NSMutableArray *objects; 
```

然后你开始编写函数......`- (void)addObje...`然后自动完成将完成然后命名并给你......

```
- (void)addObjectsObject:(<#object-type#> *)object
{
} 
```

我的问题是，我应该如何使用这个功能？

我必须打电话吗

```
[self addObjectsObject:someObject]; 
```

还是我可以做

```
[self.objects addObject:someObject]; 
```

即 NSMutableArray 属性会知道我已经覆盖了添加对象函数并使用我定义的函数来添加它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:05:04.830

你需要使用`[self addObjectsObject:someObject];`.

`[self.objects addObject:someObject];`将直接在属性上调用 NSMutableArray 的方法。

编辑：

更多信息：

```
[self addObjectsObject: someObject];//calls the method - (void)addObjectsObject:
[self.objects addObject: someObject];//calls the property directly 
```

如果你想覆盖你的方法，你需要子类或者你可以创建一个类别，但不要使用相同的方法名称来覆盖现有的类别。

# c# - 尝试将 Outlook 电子邮件保存在文件夹中

> ID：13859388
> 
> 赞同：3
> 
> 时间：2012-12-13T11:59:01.120
> 
> 标签：c#, winforms, outlook-2010

我有一个 WinForms 应用程序，单击按钮会自动生成 Outlook 邮件，如下所示：

```
public static void CreateOutlookEmail(string pFileName, string pCaseFolder, string pEmail, string pSubject, string pMessage)
    {
        try
        {
            Outlook.Application outlookApp = new Outlook.Application();
            Outlook.MailItem mailItem = (Outlook.MailItem)outlookApp.CreateItem(Outlook.OlItemType.olMailItem);                
            mailItem.Subject = pSubject;
            mailItem.To = pEmail;
            mailItem.Body = pMessage;
            mailItem.Importance = Outlook.OlImportance.olImportanceNormal;
            mailItem.Display(false);
            string fileDetails = pCaseFolder + "\\" + pFileName + @".eml";
            mailItem.SaveAs(fileDetails);
        }
        catch (Exception eX)
        {
            throw new Exception("cDocument: Error occurred trying to Create an Outlook Email"
                                + Environment.NewLine + eX.Message);
        }
    } 
```

该代码成功打开了一封新的 Outlook 电子邮件，并使用发送到该方法的详细信息（例如电子邮件地址、主题和邮件正文）填充它。

此外，当我找到文件夹（作为参数发送）时，我可以看到电子邮件文档已保存。

问题是，当我从文件夹中打开电子邮件时，电子邮件文档完全是空白的，即 没有电子邮件地址、主题或消息。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:22:03.003

你的代码很好。只需使用扩展名“.msg”而不是“.eml”。Outlook.OlSaveAsType 下也不存在 eml 格式

# node.js - 在 node.js 中使用 fabric.js 渲染和操作服务器端画布

> ID：13859389
> 
> 赞同：3
> 
> 时间：2012-12-13T11:59:02.200
> 
> 标签：node.js, html5-canvas, server-side, fabricjs

我正在尝试使用fabric.js（v0.9.21，通过ubuntu 12.04上的npm安装）和node.js在服务器上呈现画布（以后可以在没有客户端交互的情况下对其进行操作和扩展）。为了进行实验，我在客户端创建了一个简单的画布，然后使用`canvas.toJSON()`方法将其导出为 JSON。当我尝试仅使用该 JSON 重新加载画布时，效果很好（利用`canvas.loadFromJSON()`.

### [您可以在这个 fiddle](http://jsfiddle.net/4Vgce/)中看到整个示例。

（如果它不起作用，那么图像可能已过期 - 替换链接）。

然后我尝试使用这个简单的脚本在服务器端做同样的事情：

```
var fabric = require('fabric').fabric;
var fs     = require('fs');
var canvas = fabric.createCanvasForNode(570, 600);

fs.readFile('kitty.json', 'utf8', function(err, data) {
  canvas.loadFromJSON(data);
}); 
```

运行此脚本（使用`node script.js`or `require('./script.js') from inside node`）时出现奇怪的崩溃：

```
> http.createClient is deprecated. Use `http.request` instead.

/usr/lib/node_modules/fabric/dist/all.js:12429
      ctx.drawImage(
          ^
Error: Image given has not completed loading
    at klass.fabric.Image.fabric.util.createClass._render (/usr/lib/node_modules/fabric/dist/all.js:12429:11)
    at klass.fabric.Image.fabric.util.createClass.render (/usr/lib/node_modules/fabric/dist/all.js:12303:12)
    at klass.(anonymous function) [as render] (/usr/lib/node_modules/fabric/dist/all.js:2405:48)
    at extend._draw (/usr/lib/node_modules/fabric/dist/all.js:5332:16)
    at extend.renderAll (/usr/lib/node_modules/fabric/dist/all.js:5468:16)
    at extend.insertAt (/usr/lib/node_modules/fabric/dist/all.js:5381:37)
    at fabric.util.object.extend._enlivenObjects (/usr/lib/node_modules/fabric/dist/all.js:7694:15)
    at Array.forEach (native)
    at fabric.util.object.extend._enlivenObjects (/usr/lib/node_modules/fabric/dist/all.js:7693:24)
    at onLoaded (/usr/lib/node_modules/fabric/dist/all.js:1995:11) 
```

画布上只有一张图片（由 interwebs 的小猫收藏提供）和一个文本项。

我对节点相当陌生，所以也许我在此过程中错过了一些东西 - 任何提示都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-21T13:00:19.670

我认为问题在于您试图在将图像添加到画布之前渲染画布。在我的情况下，在 loadFromJSON() 的回调中调用 renderAll() 解决了这个问题。

```
canvas.loadFromJSON(JSON.stringify(json),canvas.renderAll.bind(canvas)); 
```

或者

```
canvas.loadFromJSON(JSON.stringify(json),canvas.renderAll()); 
```

这将确保仅在将 json 数据加载到画布后才呈现画布

```
var canvas = new fabric.Canvas('mycanvas');
var json = {
  "objects": [{
    "type": "image",
    "left": 300,
    "top": 295,
    "width": 500,
    "height": 375,
    "fill": "rgb(0,0,0)",
    "overlayFill": null,
    "stroke": null,
    "strokeWidth": 1,
    "strokeDashArray": null,
    "scaleX": 1,
    "scaleY": 1,
    "angle": 0,
    "flipX": false,
    "flipY": false,
    "opacity": 1,
    "selectable": true,
    "hasControls": true,
    "hasBorders": true,
    "hasRotatingPoint": false,
    "transparentCorners": true,
    "perPixelTargetFind": false,
    "src": "http://t3.gstatic.com/images?q=tbn:ANd9GcTE0NOJqQ46En2x1T61cZf_S4RwxOTtxcLsmfQUHkSXk5SOx-zaYnPj6jYI",
    "filters": []
  }, {
    "type": "text",
    "left": 300,
    "top": 537,
    "width": 116,
    "height": 57.6,
    "fill": "rgb(0,0,0)",
    "overlayFill": null,
    "stroke": null,
    "strokeWidth": 1,
    "strokeDashArray": null,
    "scaleX": 1,
    "scaleY": 1,
    "angle": 0,
    "flipX": false,
    "flipY": false,
    "opacity": 1,
    "selectable": true,
    "hasControls": false,
    "hasBorders": true,
    "hasRotatingPoint": false,
    "transparentCorners": true,
    "perPixelTargetFind": false,
    "text": "Kitten!",
    "fontSize": 12,
    "fontWeight": 400,
    "fontFamily": "Lato",
    "fontStyle": "",
    "lineHeight": 1.2,
    "textDecoration": "",
    "textShadow": "",
    "textAlign": "center",
    "path": null,
    "strokeStyle": "",
    "backgroundColor": "",
    "textBackgroundColor": "",
    "useNative": true
  }],
  "background": "rgba(0, 0, 0, 0)"
};
canvas.loadFromJSON(JSON.stringify(json), canvas.renderAll.bind(canvas));
```

```
#mycanvas {
  border: 1px solid black;
}
```

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.1.0/fabric.all.min.js"></script>
<canvas id="mycanvas" width="570" height="600"></canvas>
```

# .net - Coolstorage 查询错误

> ID：13859394
> 
> 赞同：1
> 
> 时间：2012-12-13T11:59:27.970
> 
> 标签：.net, orm, coolstorage, vici

我一直在寻找 Linq-To-SQL 的开源替代方案，并遇到了[Vici CoolStorage](http://viciproject.com/wiki/projects/coolstorage/home)，它非常适合我的需求（轻量级、开源、支持 Access 和 SQL Server）。

但是，我在让它检索数据时遇到了一些麻烦（尽管它可以很好地添加数据），并且我已经使用 2 个不同的数据库在 2 个不同的环境中复制了相同的问题，所以很明显这是我做错了，希望有人可以指出那是什么。

我创建了一个带有 2 个表的新 Access mdb - AccountStatus 和 Account。AccountStatus 包含 AccountStatusID、AccountStatusName，而 Account 包含 AccountID、AccountName、AccountStatusID。

我已将 Vici.CoolStorage 和 Vici.Core 引用添加到我的项目（使用 NuGet），创建了一个域文件夹，并添加了以下 2 个类以映射到我的表：

帐户状态：

```
using Vici.CoolStorage;

namespace ViciAccount.Domain
{
    [MapTo("AccountStatus")]
    public abstract partial class AccountStatus : CSObject<AccountStatus, int>
    {
        public abstract int AccountStatusID { get; set; }
        [ToString]
        public abstract string AccountStatusName { get; set; }

        [OneToMany(LocalKey = "AccountStatusID", ForeignKey = "AccountStatusID")]
        public abstract CSList<Account> Accounts { get; }
    }
} 
```

帐户：

```
using Vici.CoolStorage;

namespace ViciAccount.Domain
{
    [MapTo("Account")]
    public abstract partial class Account : CSObject<Account, int>
    {
        public abstract int AccountID { get; set; }
        [ToString]
        public abstract string AccountName { get; set; }
        public abstract int AccountStatusID { get; set; }

        [ManyToOne(LocalKey = "AccountStatusID", ForeignKey = "AccountStatusID")]
        public abstract AccountStatus AccountStatus { get; set; }
    }
} 
```

然后，我将以下代码添加到要测试的 Form 的 Load 事件中：

```
if (!CSConfig.HasDB())
{
    CSConfig.SetDB(new CSDataProviderAccess(@"G:\FilePath\Test Project\ViciTest.mdb"));
    CSConfig.UseTransactionScope = false;
}

CSConfig.Logging = true;
CSConfig.LogFileName = @"G:\FilePath\Test Project\vici.log";

AccountStatus accountStatus = AccountStatus.New();
accountStatus.AccountStatusName = "Live";
accountStatus.Save();

accountStatus = AccountStatus.New();
accountStatus.AccountStatusName = "Closed";
accountStatus.Save();

CSList<AccountStatus> accountStatuses = AccountStatus.List();

MessageBox.Show(accountStatuses.Count.ToString()); 
```

它成功添加了“实时”和“关闭”记录，但是当我尝试使用“执行查询时出错。可能的语法错误”查询 CSList 的计数时失败，“对象引用未设置为对象实例的 InnerException。 ”。

有人知道我在这里做错了什么吗？

**编辑：**我已经将 Vici.CoolStorage dll 换成了 Activa.CoolStorage dll（[在 CodePlex](http://coolstorage.codeplex.com/releases/view/5425)找到，可以追溯到 2008 年），现在一切正常，所以它肯定与最新版本有关（Vici 是 1.5，Activa 是 1.2 ）。旧版本似乎不支持 SQL 日志记录

# javascript - Javascript 方法样式：这两种方法样式有什么区别？

> ID：13859395
> 
> 赞同：3
> 
> 时间：2012-12-13T11:14:25.070
> 
> 标签：javascript, methods

Javascript中这两种方法样式有什么区别？这只是光学差异还是有更细微的差异？

```
Ticket.createDetailView = function(elem) {..}

Ticket = {
   createDetailView: function(elem) {..}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T11:57:09.143

第一个版本将函数存储在一个新属性中而不替换其中的对象，`Ticket`而第二个版本创建一个仅包含一个属性的*新对象：*`createDetailView`

但是，假设在第一种情况下对象为空，则没有真正的区别。例如，以下两个代码片段几乎是等价的：

```
var foo = {};
foo.bar = 123;
foo.baz = 456; 
```

和

```
var foo = {
    bar: 123,
    baz: 456
} 
```

# javascript - 在 JavaScript 中覆盖对象的括号 [index] getter/setter？

> ID：13859399
> 
> 赞同：15
> 
> 时间：2012-12-13T11:59:46.327
> 
> 标签：javascript, object, getter-setter

我目前正在构建一个[双向链表](http://en.wikipedia.org/wiki/Doubly_linked_list)实现。
我正在尝试（或希望）做的是使用 setter / getter 来设置列表中的元素，就像在数组中一样：

```
var index = 5;
list[index] = node_x; 
```

但是，我不能只使用这种语法，因为节点在技术上不是列表的属性。
将列表视为 2 个钩子。这 2 个钩子连接到链的 2 个末端，但您只能访问这 2 个连接的链环（以及它们的兄弟通过它们）。
其余的链链接不是列表的属性。这就是为什么如果可能的话，我需要覆盖`[]`对象上括号的实现。

我的（简化/缩短）代码是：

```
(function () {
    "use strict"
    window.List = function () {
        var Length //Etc
        return {
            //Getter / Setter example.
            get length() {return this.Length;},
            set length(n) {this.Length = n;},
            //Function example.
            insertBeginning: function (newNode) {/*  */},
            insertEnd: function (newNode) {/*  */},

            //Index getter / setter attempt.
            get i(index){ console.log(index); },
            set i(index, node){ console.log(index); }
        };
    };

}());

var list = new List();
list.length = 10 //This works just fine
console.log(list.length) // Returns 10, like expected. 
```

现在，我试图用`i`getter/setter 做的是设置这样的元素：

```
var index = 5;
list.i(index) = node; 
```

但是，当然，这是行不通的，因为：

1.  `i`不是函数；
2.  显然，我不能将变量分配给函数。

我当然可以只使用一个函数来设置元素：

```
list.setAtIndex(index, node); 
```

但我更愿意以某种方式覆盖对象的数组表示法。

所以，我的问题是，这可能吗？如果是这样，我能得到一些提示吗？我的搜索尝试只返回了[这样](http://ejohn.org/blog/javascript-getters-and-setters/)的资源，我现在知道 getter/setter 是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-17T09:15:05.670

我想建议这是一个非常糟糕的主意。在链表的索引*i*处获取项目的成本是*O(n)*。通过索引访问链表是 Java 犯的一个错误，其他人不应该重蹈覆辙。这个错误不是针对 C++ 和 C# 的。

在大多数情况下，数组通常更适合随机插入和删除，因为线性搜索的*O(n)*成本在性能方面完全占主导地位，并且数组更适合预取。不，真的：[http ://bulldozer00.com/2012/02/09/vectors-and-lists/](http://bulldozer00.com/2012/02/09/vectors-and-lists/)

我建议在完全没有索引访问的情况下使用链表实现，因为您可以真正证明使用链表可以获得性能优势，也许是为了实现队列。我建议在所有其他情况下使用内置数组。除了在大多数情况下总体上更好之外，与任何第三方链表实现相比，您将获得对内置数组进行更多优化的好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-15T13:07:34.230

除了这是一个坏主意之外，这根本不可能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T12:42:52.103

我不知道你是否喜欢这个，但给它看看

[codepen.io 前](http://codepen.io/joe/pen/mfCyA)

我认为它还不能完全令人满意，因为它默认说在提供参数时，您要访问`set`.

# iphone - iOS 模拟器：应用程序无法正确终止

> ID：13859401
> 
> 赞同：0
> 
> 时间：2012-12-13T11:59:49.793
> 
> 标签：iphone, objective-c, ios, ios-simulator

我有一个应用程序，在终止时需要同步 sqlite 数据库的内容。
要知道应用程序何时终止，我在应用程序委托的 applicationWillTerminate: 方法中放置了一个断点。但调试器从不进入那里。
我知道终止应用程序的两种方法：

1.  就像我在 iPhone 中所做的那样：一直触摸应用程序图标，直到它开始颤抖，然后单击“x”；
2.  停止调试器。

这两种方法都不会导致调试器进入我的应用程序委托的 applicationWillTerminate: 方法。
如果我使用第一种方法，我什至会遇到异常：我在这一行收到 SIGKILL：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

即使没有该信号的处理程序，模拟器似乎也会启动 SIGKILL 。
调用的最后一条消息是 mach_msg_trap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:03:29.277

从文档

> 对于不支持后台执行或链接到 iOS 3.x 或更早版本的应用程序，当用户退出应用程序时始终调用此方法。对于支持后台执行的应用程序，当用户退出应用程序时通常不会调用此方法，因为在这种情况下应用程序只是移动到后台。但是，在应用程序在后台运行（未挂起）并且系统出于某种原因需要终止它的情况下，可能会调用此方法。

你可能想要`applicationWillResignActive:`.

# node.js - 在同一个js文件node.js中调用exports.start

> ID：13859404
> 
> 赞同：66
> 
> 时间：2012-12-13T12:00:12.663
> 
> 标签：node.js

嗨，这是我在节点 js 文件中的方法：

```
exports.start = function() {
    console.log(' in start of sender.js');
}); 
```

如何在同一个 js 文件中调用此方法？我尝试调用 start() 和 exports.start() 但没有成功。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-13T12:01:41.820

使用此代码：

```
var start = exports.start = function() {
   console.log(' in start of sender.js');
}); 
```

或者

```
function start() {
   console.log(' in start of sender.js');
});

exports.start = start;

//you can call start(); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2017-05-17T10:31:37.050

```
exports.start = function(){
    console.log('testing...')
} 
```

你可以像这样调用这个方法

```
 exports.start(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-09-25T07:45:42.397

您可以像这样调用导出的函数

> module.exports.functionName(参数);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-04T00:46:38.513

您的命名函数：

```
var start = function() {
   console.log(' in start of sender.js');
}); 
```

后来导出对象：

```
module.exports = {start : start} 
```

所以你可以`start()`在同一个js文件中调用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-07T14:00:36.083

我在我的电脑上做的事情如下，并且运行良好 - 如果您认为这是一个坏主意，请发表评论！

假设你在`file.js`

```
 const onThisFile = require("./file");

exports.get = async (args) => .... // whatever;
exports.put = async (args) => .... // whatever;
exports.post = async (args) => .... // whatever;
exports.delete = async (args) => .... // whatever;

exports.doSomething = async (args) => onThisFile.get(args) 
```

# javascript - 如何仅在加载所有脚本时调用函数？

> ID：13859406
> 
> 赞同：2
> 
> 时间：2012-12-13T12:00:22.803
> 
> 标签：javascript, asp.net-mvc, dependency-management

我正在与客户共享一个脚本标签，以在客户的网站上部署我的 Web 应用程序。

基本上通过这种方式，他可以将我的应用程序嵌入到他网站上的任何地方。

我给他的脚本只是在我的 MVC 应用程序中调用一个操作方法并接收一个 JavaScript 作为响应。

作为第一步，这个返回的 JavaScript 将所有 js 和 css 引用（我的应用程序需要）插入到客户端的 head 标记中

```
function createScriptElement(src) {
    var tmp = document.createElement("script");
    tmp.src = src;

    var head = document.getElementsByTagName("head")[0];
    head.appendChild(tmp);
}; 
```

然后在第二步中，它将 html 内容写入一个动态 div 中。

```
document.write(format("<div id='mycontainer'>{0}</div>{1}", AppHtml,initcalls )); 
```

“initcalls”包含我希望立即执行的应用程序 javascript 中的初始函数。所以我把它放在下面的脚本标签中。

initcalls的内容是：

```
<script type=\"text/javascript\">     function icInitApp() { ..... }; </script> 
```

问题是：我的应用程序中有一些依赖于 js 引用。HTML 在客户端页面中的 head 标记识别并加载 js 引用之前被加载。

有什么方法可以保存我的（因此动态渲染的）应用程序的 init 函数，直到所有 js 引用都被 head 标签完全加载？

我尝试给 setTimeout() 5 秒，但这不是客户接受的正确解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:14:33.027

下面的链接中讨论了类似的情况

[如何检测是否加载了javascript文件？](https://stackoverflow.com/questions/1293367/how-to-detect-if-javascript-files-are-loaded)

您也可以尝试使用 $(window).load() 事件，因为这将在页面完全加载时触发。

```
$(window).load(function(){
  //your code here
}); 
```

PS：请注意，您需要在页面中加载 jQuery 才能使上述代码正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:30:04.350

您可以尝试使用 jQuery：

```
$(document).ready(function()){
     // Your code goes here
}; 
```

# javascript - drawImage 的画布性能：许多小图像与少数大图像

> ID：13859410
> 
> 赞同：2
> 
> 时间：2012-12-13T12:00:28.903
> 
> 标签：javascript, canvas, html5-canvas, performance

我想知道是否有任何基准或线索来说明是绘制一张大图像还是更频繁地调用 drawImage 以获得更少的图像。

例子：

我有一个~1600x1000 的画布（全屏时）和一个大小的图像。我每帧都将这个图像绘制到我的画布上（因此我可以保存 ctx.clearRect()）。它有大约 6 个对象，我可以很容易地在多个 drawImage 调用中单独绘制每个对象，但我需要做 clearRect(); 每一帧。

在性能方面哪个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:57:44.643

绘制一些较大的图像将比许多小图像执行得更好。

这`drawImage`是导致性能下降的实际情况。调用它的次数最少会产生更好的性能。

根据评论，使用多个画布可能会有更好的性能。在确定这是否真的有必要之前，这确实取决于您要达到的目标。如果我们只是在谈论 6 幅图像，我可能不会发疯，但是有一个画布作为背景（绘制一次并且你不清除）和另一个用于其他对象的画布是合理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:07:25.850

做一些测试，我发现画布的性能取决于你具体要做什么，但是有一些你必须平衡的一般规则

-drawImage 调用越少越好

- 你画的区域越小越好

- 绘制整个图像而不切出一块或缩放它是最快的

- 你对画布应用的转换越多，它就会越慢

所以这真的取决于你的情况。如果您要在整个 1000x1600 图像中绘制 6 个 10x10 的正方形，那么只绘制较小的部分可能是值得的，但是如果您必须从较大的图像中剪切它们（使用 drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh)) 您可能会发现绘制大图像仍然更快。没有真正的“最佳方式”，你只需要测试不同的东西。

# .net - MySQLConnection.Open() 上的“算术运算导致溢出”错误

> ID：13859411
> 
> 赞同：1
> 
> 时间：2012-12-13T12:00:32.067
> 
> 标签：.net, mysql

设置：

Windows 7 SP1 64 位 Visual Studio 2012 MySQL .Net 连接器 6.6.4

我有一个 vb .net WinForm 应用程序，它使用 MySQL .Net 连接器连接到 MySQL 服务器。它工作得很好。然后我格式化了电脑，重新安装了与以前相同的 Windows 版本，但我安装了一个稍新版本的 MySQL .Net 连接器，以及 Visual Studio 2012 而不是 2010。

当我打开连接的代码执行时，即：

```
Dim mySQLcon As New MySql.Data.MySqlClient.MySqlConnection("SERVER=www.tadirect.co.za;DATABASE=tadirq_db1;UID=********;PASSWORD=********;")
mySQLcon.Open() 
```

在 mySQLcon.Open() 行我得到以下异常：

```
System.OverflowException: Arithmetic operation resulted in an overflow at MySql.Data.MySqlClient.Authentication.MySqlAuthenticationPlugin.HandleAuthChange(MySqlPacket packet)
at MySql.Data.MySqlClient.Authentication.MySqlAuthenticationPlugin.Authenticate(Boolean reset)
at MySql.Data.MySqlClient.NativeDriver.Authenticate(String authMethod, Boolean reset)
at MySql.Data.MySqlClient.NativeDriver.Open() at MySql.Data.MySqlClient.Driver.Open()
at MySql.Data.MySqlClient.Driver.Create(MySqlConnectionStringBuilder settings)
at MySql.Data.MySqlClient.MySqlPool.GetPooledConnection()
at MySql.Data.MySqlClient.MySqlPool.TryToGetDriver() at MySql.Data.MySqlClient.MySqlPool.GetConnection()
at MySql.Data.MySqlClient.MySqlConnection.Open()
at TAD_Automator.modWebsite.UpdateMySQLDatabase_Cases(Boolean bSilent)} 
```

我尝试将构建从任何 CPU 更改为 32 位和 64 位，但没有任何区别......

有任何想法吗？在我重新安装 Windows/VS/MySQL 之前，它曾经可以工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:15:58.523

我找到了解决方案。安装 MySQL 连接器 6.1.6，您将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:38:26.893

我相信 MySQL 放弃了对他们在 6.6 之前使用的旧式密码加密的支持。我遇到了同样的问题，我不得不关闭我的数据库服务器上的 old_password 支持，然后重新创建用户，以便使用新密码函数对密码进行哈希处理。

查看这个错误线程： [http ://bugs.mysql.com/bug.php?id=67953](http://bugs.mysql.com/bug.php?id=67953)

查看此链接以获取更多信息： [http ://dev.mysql.com/doc/refman/5.0/en/old-client.html](http://dev.mysql.com/doc/refman/5.0/en/old-client.html)

作为一个新手，我更容易删除有问题的用户，更改数据库选项以使用 MySQL Workbench 关闭 old_password 加密和身份验证，重新启动数据库服务器，然后重新创建用户。这为我解决了这个问题。希望这可以帮助你 - 祝你好运。

# javascript - 触控板：防止 touchmove/touchstart 没有延迟

> ID：13859413
> 
> 赞同：0
> 
> 时间：2012-12-13T12:00:39.963
> 
> 标签：javascript, event-handling, touch, blackberry-playbook

如何防止黑莓平板电脑上的 touchmove（touchstart？）动作？例如，不得允许用户放大图像或表单/按钮。我试过了

```
<img src= "image.jpg" ontouchstart="event.preventDefault();"> 
```

还有（在 $(document).ready 内外）

```
document.body.addEventListener('touchstart', function(e){ e.preventDefault(); }); 
```

这些似乎有效，但并不完全。当页面首次加载时，有时我可以放大一段时间。并非总是如此，但足以成为一个问题。

有没有办法防止这种滞后时间 - 或者在我知道 preventDefault 已“激活”之前防止页面显示的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:10:22.993

我需要这个标题 - 成功了。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> 
```

# c# - 返回文件以下载链接按钮单击

> ID：13859414
> 
> 赞同：0
> 
> 时间：2012-12-13T12:00:47.997
> 
> 标签：c#, sftp

我正在将我的文件上传到**sftp 服务器**，用户应该可以稍后下载。现在他们将如何下载，我在网格中显示文件，它们的名称（保存在数据库中）作为链接按钮。

在链接按钮上单击我要将文件从 sftp 服务器下载到服务器上的本地文件夹，然后在这里我直接想将文件提供给用户。链接按钮没有硬链接。

此外，没有文件类型或大小的限制。请问您能提出任何可以帮助的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:02:58.323

要解决第二个问题（发送本地下载的文件），您基本上将文件发送回客户端作为对点击事件的响应：

从[如何将文件发送到客户端以便打开下载对话框？](https://stackoverflow.com/questions/3252135/how-to-send-a-file-to-a-client-so-a-download-dialog-will-open)：

```
string pdfPath = MapPath("mypdf.pdf");
Response.ContentType = "Application/pdf";
Response.AppendHeader("content-disposition",
        "attachment; filename=" + pdfPath );
Response.TransmitFile(pdfPath);
Response.End(); 
```

# c# - 如何根据数据集更改自动更新数据库

> ID：13859417
> 
> 赞同：0
> 
> 时间：2012-12-13T12:00:50.087
> 
> 标签：c#, wpf, data-binding, sql-server-ce

我有一个加载到**DataTable**对象的数据库表，该对象绑定到多个 UIElement，例如**DataGrid**、**ComboBox**、**TextBoxes**等的**ItemsSource**属性。有没有办法让我实现一个“看门狗”，不断检查 DataTable 或 DataSet 是否已更改并在单独的线程上自动更新数据库？

我的目标是消除客户端必须手动触发“保存”事件以将这些更改传播到数据库的需要，并且数据库始终与 DataSet/DataTable 中的数据同步。还请建议这是否是一种好的做法，或者是否有更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:06:20.383

DataTable 对象有许多在行数据更改时触发的事件。
您可以使用 RowChanged/RowChanging、RowDeleted/RowDeleting

[查看 MSDN 上的完整文档](http://msdn.microsoft.com/en-us/library/system.data.datatable%28v=vs.100%29.aspx)

您可以通过这种简单的方式为 RowChanging 事件添加事件处理程序

```
yourTable.RowChanging += new DataRowChangeEventHandler(yourRowChangingHandler); 
```

然后添加处理程序

```
private void yourRowChangingHandler(object sender, DataRowChangeEventArgs e)
{
    Console.WriteLine("Action={0}", e.Action);
} 
```

其中[Action 属性](http://msdn.microsoft.com/en-us/library/system.data.datarowaction.aspx)是描述操作的枚举

# javascript - 在 IE8 中创建对象时出错

> ID：13859424
> 
> 赞同：0
> 
> 时间：2012-12-13T12:01:14.847
> 
> 标签：javascript

我有以下代码：

```
 var APP= APP || {};
    APP.settings = {
        apiRoot: "http://localhost/appapi",
        siteRoot: "http://localhost",
    }; 
```

此代码在 Chrome 和 Firefox 中有效，但在 IE8 中引发错误，`Unable to set value of the property 'settings': object is null or undefined`

这不是我的代码，所以我对为什么这不起作用有点茫然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:15:02.133

问题是对象属性列表中的尾随逗号，IE < 9 不喜欢它并引发错误。删除它，它会没事的。

```
var APP = APP || {};
APP.settings = {
    apiRoot: "http://localhost/appapi",
    siteRoot: "http://localhost" // <-- Comma removed here
}; 
```

# android - 如何应用点击监听器？

> ID：13859425
> 
> 赞同：4
> 
> 时间：2012-12-13T12:01:16.470
> 
> 标签：android, page-curl

我正在使用 page curl 制作应用程序，因为我正在使用此链接：-

```
 https://github.com/harism/android_page_curl. 
```

在那个使用位图实现页面卷曲的链接中。但我的要求是卷曲到视图，为此我将视图（线性布局）转换为位图并在子视图上设置 onclicklistener，更多说明请参见附图 ![页面卷曲工作正常不幸的是onclick监听器不工作请任何人建议我](../Images/255ea6f8758847b4d2ae746117d758c2.png)

我的代码如下： -

```
public static LinearLayout createProgrammeView(final Context context,
        int width, int height, String title, String time) {

    // Upper layout of screen
    LinearLayout objmainlayout = new LinearLayout(context);

    if (height >= 320) {
        objmainlayout.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT, (height -100)));
        Log.e("chectttttttttttlayout",""+(height-71));
    } else {
        objmainlayout.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT, (height - 90)));
    }
    objmainlayout.setBackgroundColor(Color.WHITE);
    objmainlayout.setOrientation(LinearLayout.VERTICAL);
    objmainlayout.setPadding(10, 0, 10,0);

    for (int mindex = 0; mindex <3; mindex++)
    {
        RelativeLayout.LayoutParams objparams;
        // Layout Root View (RelativeLayout)

        RelativeLayout objrelativeinnerlayout = new RelativeLayout(context);
        if (height >= 320) 
        {
            objparams = new RelativeLayout.LayoutParams(width-20,
                    ((height - 71) / 3) - 10);
            Log.e("chectt33333tlayout",""+(((height - 71) / 3) - 10));
        } else {
            objparams = new RelativeLayout.LayoutParams(width,
                    ((height - 90) / 3) - 10);
        }
        //objparams.topMargin=10;
        objrelativeinnerlayout.setLayoutParams(objparams);
        // rlv.setBackgroundResource(R.drawable.sss);
        // rlv.setBackgroundResource(R.drawable.sss);

        ImageView objrow1img1 = new ImageView(context);
        if (height >= 320) {
            objrow1img1.setLayoutParams(new RelativeLayout.LayoutParams(
                    (width - 30) / 2,((height - 71) / 3) - 10));
        }
        objrow1img1.setScaleType(ScaleType.FIT_XY);

        RelativeLayout.LayoutParams objlp = (RelativeLayout.LayoutParams) objrow1img1.getLayoutParams();

        objlp.topMargin=10;
        objlp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        objrow1img1.setId(1);
        objrow1img1.setBackgroundColor(Color.RED);

        if (mindex == 0) {
            objrow1img1.setImageResource(R.drawable.fblogin);
            objrow1img1.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {

                    Toast.makeText(context,"onclick",Toast.LENGTH_LONG).show();
                    Log.e("check click","good");
                    //Intent objIntent = new Intent(context,
                            //FacebookAlbumList.class);
                    //objcoContext.startActivity(objIntent);
                }
            });
        }
        else {/*
            if (data != null
                    && data.size() > saveindex
                    && data.get(saveindex) != null
                    && data.get(saveindex).get(0) != null
                    && data.get(saveindex).get(0).getImagepath() != null) {
                objrow1img1.setVisibility(View.VISIBLE);
                System.gc();
                decodeBitMap(data.get(index).get(0).getImagepath(),
                        objrow1img1);
            } else {
                objrow1img1.setVisibility(View.INVISIBLE);
            }
        */}
        objrelativeinnerlayout.addView(objrow1img1);

        ImageView objrow1img2 = new ImageView(context);
        objrow1img2.setLayoutParams(new RelativeLayout.LayoutParams(
                (width - 30) / 2,((height - 71) / 3) - 10));
        objrow1img2.setScaleType(ScaleType.FIT_XY);
        objrow1img2.setBackgroundColor(Color.RED);

        RelativeLayout.LayoutParams objlrelativelayoutparam = (RelativeLayout.LayoutParams) objrow1img2
                .getLayoutParams();
        objlrelativelayoutparam.setMargins(10, 10, 0, 0);
        objlrelativelayoutparam.addRule(RelativeLayout.RIGHT_OF,1);

        objrelativeinnerlayout.addView(objrow1img2);

        objmainlayout.addView(objrelativeinnerlayout);

    }
    return objmainlayout;
}

public static Bitmap loadBitmapFromView(LinearLayout v) {
    v.measure(MeasureSpec.makeMeasureSpec(v.getLayoutParams().width,
            MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(
            v.getLayoutParams().height, MeasureSpec.EXACTLY));
    v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight());

    Bitmap b = Bitmap.createBitmap(v.getWidth(), v.getHeight(),
            Bitmap.Config.RGB_565);
    Canvas c = new Canvas(b);
    v.draw(c);
    return b;
} 
```

在这里，我放了 Myview 的代码并将其转换为位图。问题是我如何获得 onclickListener 呢？请任何人建议我提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:35:39.770

我遇到了类似的问题。为了让它工作，我有一个包含 2 个子视图的父布局（contentContainer）：

*   卷曲时转换为位图的内容视图
*   CurlView（OpenGL 表面）

我必须为父布局设置一个 onClickListener 来捕获事件并将它们发送或不发送到 CurlView。当事件被发送到 CurlView 时，CurlView 被带到前面（使用 bringToFront() 方法）。否则，将内容视图置于前面。

为了决定是否将事件发送到 CurlView，我使用了一个方法，如果点击在页面卷曲区域内（大约屏幕的 1/6，两侧），则返回 true。此外，我有一个手势和比例检测器来检测 singleTap 和 longPress，这是我们用户交互所需要的。当捕捉到 singleTap 或 longPress 时，位置 (x,y) 会告诉我用户触摸的位置，以便我可以启动一些活动、显示上下文菜单或其他任何内容。

一些示例代码：

```
 contentContainer.setOnClickListener(null); // DO NOT REMOVE THIS, IT'S A WORKAROUND
    contentContainer.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            gestureDetector.onTouchEvent(event);
            mScaleDetector.onTouchEvent(event);

            int x = (int)event.getX();
            int y = (int)event.getY();

            boolean isMoving = event.getAction() == MotionEvent.ACTION_MOVE;
            boolean isTouchDown = event.getAction() == MotionEvent.ACTION_DOWN;
            boolean isTouchUp = event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL;
            boolean pageCurlArea = isPageCurlArea(x, y);

            boolean sendEventToCurlView = false;

            if (isTouchDown && pageCurlArea) {
                downInPageArea = true;
                sendEventToCurlView = true;
            } else if (downInPageArea && isMoving) {
                sendEventToCurlView = true;
            } else if (downInPageArea && isTouchUp) {
                downInPageArea = false;
                sendEventToCurlView = true;
            } else if (!downInPageArea && isMoving) {
                return false;
            }

            if (downInPageArea && isMoving && !curlViewIsOnTop) {
                bringCurlViewToFront();
            }

            if (sendEventToCurlView) {
                MotionEvent mEvent = MotionEvent.obtain(event);
                mCurlView.onTouch(v, mEvent);
            }

            return !sendEventToCurlView;
        }
    }); 
```

这是一项正在进行中的工作，因为我需要修改它以不使用“页面卷曲区域”来区分“卷曲事件”和其他事件（singleTap、longPress ...），我打算同时使用手势并缩放检测器以在捕获到事件时返回，并根据结果继续将事件发送到 CurlView 与否。这是在 1/6 页卷曲区域内执行“点击”和“长按”所必需的。

希望能帮助到你。

# jquery - 为什么 jQuery 的 .css() 方法不允许翻转

> ID：13859428
> 
> 赞同：0
> 
> 时间：2012-12-13T12:01:31.897
> 
> 标签：jquery

我有一个 dl，我想在点击时使用 jQuery 翻转 dt 中的图像。这可以很容易地使用[静态 css](http://css-tricks.com/snippets/css/flip-an-image/)完成，但由于某种原因，我无法使用 jQuery 的 .css() 方法达到相同的效果。我做错了什么还是这是一个 jQuery 怪癖？

[这是一个 JSFiddle 链接](http://jsfiddle.net/qngrf/378/)，演示了使用 CSS 和 jQuery 的行为。

没有单击事件处理程序的示例代码。为了简单起见，我现在只是想翻转 dt 本身。

```
$('dt').css(
    {
        "color" : "red",
        "transform": "scaleY[-1]",
        "-moz-transform": "scaleY[-1]",
        "-o-transform": "scaleY[-1]",
        "-webkit-transform": "scaleY[-1]",
        "filter": "FlipV",
        "-ms-filter": "FlipV"
    }
    ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:05:56.063

你看不出`[]`和`()`..之间的区别吗？

换句话说，您需要使用括号而不是方括号

```
$('dt').css({
    "color": "red",
    "transform": "scaleY(-1)",
    "-moz-transform": "scaleY(-1)",
    "-o-transform": "scaleY(-1)",
    "-webkit-transform": "scaleY(-1)",
    "filter": "FlipV",
    "-ms-filter": "FlipV"
}); 
```

演示[http://jsfiddle.net/gaby/qngrf/379/](http://jsfiddle.net/gaby/qngrf/379/)

# php - 用 php 加载 xml

> ID：13859431
> 
> 赞同：1
> 
> 时间：2012-12-13T12:01:33.083
> 
> 标签：php, xml

我有 XML 文件

```
<shop>
<categories>
<category id="-2147483638" parent="0" name="Dia"/>
<category id="-2147483637" parent="0" name="Stri"/>
<categories>
<parameters>
<parameter id="6" name="Druh" typ="ENUM" systemid="">
<enumValue valueId="5" value="Be"/>
<enumValue valueId="6" value="Zi"/>
<enumValue valueId="7" value="Po"/>
<enumValue valueId="8" value="Di"/>
<enumValue valueId="9" value="Pr"/>
<enumValue valueId="10" value="Ma"/>
<enumValue valueId="11" value="Ma"/>
<enumValue valueId="12" value="Gr"/>
<enumValue valueId="13" value="Ak"/>
<enumValue valueId="14" value="Ru"/>
<enumValue valueId="15" value="Za"/>
<enumValue valueId="16" value="Kr"/>
<enumValue valueId="17" value="Pe"/>
</parameter>
<parameter id="9" name="Šperk" typ="ENUM" systemid="s9">
<enumValue valueId="4" value="Male"/>  
<enumValue valueId="5" value="Female"/>
<enumValue valueId="6" value="Unisex"/>
</parameter>
</parameters>
</shop> 
```

和用于读取 xml 的 PHP 代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
SET NAMES 'utf8'; 
TRUNCATE TABLE ocppoption;
truncate table ocppoption_description ;

<?

$request_url = "http://...xml"; // 
$xml = simplexml_load_file($request_url) or die("error");    
$language=2;

foreach($xml->parameters->parameter as $key) {
  echo "\n\r<br/><br/>insert into option  values (
".$key['id']."
, 'select'    
,1
);";

  echo "\n\r<br/>insert into option_description  values (
".$key['id']."
, 1
,'".$key['name']."'
);";

if (!isset($j))   {$j=1;}

   $i=0; 
    $k=1;
    $i=$j; 

foreach($key->attributes()  as $enum => $val) {

    echo "\n\n\r<br/><br/>insert into option_value  values (
    ".$i++."
,".$key['id']."
    ,''
    , ".$k++."
    );";    
  $j=$i;
}} 
```

我有输出：

```
 insert into option values ( 6 , 'select' ,1 );
    insert into option_description values ( 6 , 1 ,'Druh' );

    insert into option_value values ( 1 ,6 ,'' , 1 );

    insert into option_value values ( 2 ,6 ,'' , 2 );

    insert into option_value values ( 3 ,6 ,'' , 3 ); 
```

但是如果我想从标签加载值

```
<enumValue valueId="4" value="Male"/>. 
```

所以我想要像 insert into option_value 值（ 4, 6 ,'' , 3 ）这样的输出；

它没有正常工作。你能帮我么？我需要输出 4，男……我怎样才能从 xml 中获取这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:11:13.983

```
echo $xml->enumValue["valueId"];
echo $xml->enumValue["value"]; 
```

编辑：

我会以不同的方式处理你的 foreach 循环

```
foreach($xml->parameter->enumValue as $key=>$param):
   echo $param['valueId'];
   echo $param['value'];
endforeach; 
```

# objective-c - 使用 iOS 6 和 xCode 4.5.2 解析 JSON

> ID：13859435
> 
> 赞同：0
> 
> 时间：2012-12-13T12:01:44.720
> 
> 标签：objective-c, json, ios5, ios6, xcode4.5

我是 Objective-c 的新手，并且正在为特定网站构建登录页面。当用户提供信息时，服务器会返回以下 JSON：

```
 {
   "object":{},
   "resultCode":0,
   "resultMessage":"You successfully signed in "
 } 
```

这就是我根据我找到的教程尝试做的事情：

```
-(IBAction)login{
        // Download JSON

    NSData *data = [NSData dataWithContentsOfURL: [NSURL URLWithString:[NSString stringWithFormat:@"https://www.example.com/login?username=%@&password=%@", nationalID.text,passowrd.text]]];
        NSError *error;
        NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

        NSArray *response = [json objectForKey:@"resultMessage"];
        NSLog(@"response %@",response); 
} 
```

我想注销“resultMessage”，但不知何故它抛出了一个异常：

```
 2012-12-13 06:46:50.607 myProject[7178:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil'
*** First throw call stack:
(0x1c8d012 0x10cae7e 0x1c8cdeb 0xbff817 0x2f1a 0x10de705 0x15920 0x158b8 0xd6671 0xd6bcf 0xd5d38 0x4533f 0x45552 0x233aa 0x14cf8 0x1be8df9 0x1be8ad0 0x1c02bf5 0x1c02962 0x1c33bb6 0x1c32f44 0x1c32e1b 0x1be77e3 0x1be7668 0x1265c 0x279d 0x26c5)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:10:19.040

看起来像 -dataWithContentsOfURL: 消息失败并返回 nil，这正是错误消息所说的。您需要确认您的 -stringWithFormat: 消息为您提供了正确的 URL 格式，并检查服务器是否返回了您期望的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T01:34:51.790

看起来你有一个简单的错字，你正在使用：

```
nationalID.text,passowrd.text 
```

您可能打算不要拼错“密码”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:06:02.907

如果您可以观察问题描述：

> 'NSInvalidArgumentException'，原因：'数据参数为零'

表示来自 Web url 的响应的响应为 nil 或 NULL
这不是与 JSON 解析器相关的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T13:26:47.303

首先尝试静态网址，例如：

> [https://www.example.com/login?username=admin&password=123](https://www.example.com/login?username=admin&password=123)

如果这会返回正确的响应，请尝试使用以下**属性变量**：

> [https://www.example.com/login?username=self.username.text&password=self.password.text](https://www.example.com/login?username=self.username.text&password=self.password.text)

您犯的一个错误是**resultMessage**是字符串而不是数组。

希望这可以帮助你

# c# - 端口查看器图像在运行时传递

> ID：13859436
> 
> 赞同：0
> 
> 时间：2012-12-13T12:01:54.427
> 
> 标签：c#, report, reportviewer

使用**Visual Studio Ultimate 2012**。**C 夏普 .Net4.0**。

大家好，我在这里将图像保存到我的**C 盘**。

```
if (File.Exists("C:\\LabelImages\\TypeImage1.Png"))
   {                  
       File.Delete(@"C:\\LabelImages\\TypeImage1.Png");
       picNewType.Image.Save(@"C:\\LabelImages\\TypeImage1.Png");
                //reportViewer1.Reset();
               // reportViewer1.Refresh();
   }
   else
   {
       if (!(picNewType.Image == null))
       {                   
           picNewType.Image.Save(@"C:\\LabelImages\\TypeImage1.Png");
                    //reportViewer1.Reset();
                    //reportViewer1.Refresh();
       }
   } 
```

然后我有一个设置**报告参数**的方法。

```
public virtual IList<Microsoft.Reporting.WinForms.ReportParameter> NewReportSetup(string part, string batch, string locn, string wheel, string gear, string length,
                                string fits, string newbar, string newbarnum, string abs)
    {
        IList<Microsoft.Reporting.WinForms.ReportParameter> parameters = new List<Microsoft.Reporting.WinForms.ReportParameter>();
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramPart", part));
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramBatch", batch));
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramLocn", locn));
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramWheel", wheel));
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramGear", gear));
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramLength", length));
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramABS", abs));
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramBuyer", fits));
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramBarCode", newbar));
        parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("paramBartxt", newbarnum));
        //parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("path", filepath.AbsoluteUri));

        return parameters;
    } 
```

然后我的报告有一个设置为**“嵌入”**的图像，值是对 C 驱动器上位置的**导入。**

现在这会加载很棒的图像，但是如果图像**在运行时更改**，则报告**不会更改**。

有没有办法**强制导入更新**？

我已经研究了其他没有运气的方法，例如将图像设置为**外部**图像并使用**“file:///”**，但只收到**“x”**符号。

基本上我已经没有关于做什么的想法了，这样的帮助会很棒。

非常感谢！

**更新::**好的哇根本没有回复....我一直在尝试其他一些东西。

在报告和代码中将图像设置为外部，然后将文件的路径作为参数传递，然后将图像的值设置为参数，我得到的只是“X”符号。我在这里锄头坚果，有一个简单的解决方案吗？

**更新！！** 好的，我浏览了很多消息来源都说同样的话，这应该可以工作，但由于某种原因，我仍然得到一个红色的 x 并且没有以下图像：

```
string filepath = @"file:///C:\LabelImages\TypeImage1.Png";
parameters.Add(new Microsoft.Reporting.WinForms.ReportParameter("path", filepath)); 
```

然后在我的报告中，我有一个参数“path”，它在以下表达式中设置为报告中图像的值

```
=Parameters!path.Value 
```

所有这些结合在一起应该给我一个图像。源设置为外部 MIME 设置为 Png。不仅如此，我还设置了这个：

```
 reportViewer1.LocalReport.EnableExternalImages = true;
 reportViewer1.RefreshReport(); 
```

然后在此之后我设置参数：

```
 IList<Microsoft.Reporting.WinForms.ReportParameter> param = new List<Microsoft.Reporting.WinForms.ReportParameter>();

            IList<Microsoft.Reporting.WinForms.ReportParameter> param = new List<Microsoft.Reporting.WinForms.ReportParameter>();

            param = reportshaft.NewReportSetup(txtNewPart.Text.ToString(),
                txtBatch.Text.ToString(), txtLocation.Text.ToString(), txtWheel.Text.ToString(), txtGear.Text.ToString(), txtLength.Text.ToString(),
                txtFits.Text.ToString(), txtNewBar.Text.ToString(), txtNewBarNum.Text.ToString(), txtABS.Text.ToString(), filepath.ToString());

            reportViewer1.LocalReport.SetParameters(param);
            reportViewer1.RefreshReport();; 
```

那么为什么我仍然没有图像？我在这里失去了理智，真的需要有人来发布一些东西。

即使我硬编码以下内容：

```
="file:///C:\LabelImages\TypeImage1.Png" 
```

所以我真的被困在这里，没有错误发生，只是没有图像，只是盒子里的小 x。

或者，如果我将其设置为嵌入，是否有办法在按钮单击时重新嵌入图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T20:18:19.080

我刚刚在引用外部图像时遇到了几乎相同的问题......答案似乎是在“文件”之后只有 2 个斜杠。

**File://C:\Path\To\My File\Logo.jpg**

下面的示例取自我的一份工作报告（Report Builder 3.0，SQL Server 2012）

![在此处输入图像描述](../Images/501e77a2e1d9fce5f0f54ad51022c9f0.png)

# html - 相对定位的表格单元格的边框。IE显示问题

> ID：13859437
> 
> 赞同：2
> 
> 时间：2012-12-13T12:01:58.313
> 
> 标签：html, css, internet-explorer, border, css-tables

我在为具有相对位置样式的表格单元格设置边框时遇到问题：[小提琴示例](http://jsfiddle.net/GaTHZ/3/)

```
table {
 border-collapse: collapse;
}

td {
    border: 1px solid green;
    position: relative;
} 
```

在 FF 和 Chrome 中看起来不错： ![在此处输入图像描述](../Images/9a11d11285fb4bafeebf2b014a0b27ae.png)

但在 IE 中，我看到双倍的单元格边框： ![在此处输入图像描述](../Images/a6fe0365f2cc7325225f30a504bac056.png)

仅当 td 相对定位时，才会出现这种双边框。

我知道作为解决方法，可以从表格单元格中删除边框并在表格单元格内放置带有边框的附加 div。但也许有另一种方法可以在 IE 中解决这个问题？

**编辑：** 我设法显示结合单元格和表格边框样式的边框：http: [//jsfiddle.net/GaTHZ/4/](http://jsfiddle.net/GaTHZ/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:31:16.647

这将解决它。在 IE 和 Chrome 中工作。

```
 table {
        border-collapse: collapse;
        margin-right:30px;
        margin-left:30px;
        border-right: 1px solid green;
        border-bottom: 1px solid green;
       }

    td {
           border-left: 1px solid green;
           border-top: 1px solid green;
           width: 200px;
           height: 35px;
           position: relative;
       }​ 
```

# android - 方法 getX() 未为 Point 类型定义

> ID：13859441
> 
> 赞同：1
> 
> 时间：2012-12-13T12:02:08.177
> 
> 标签：android

我得到该`getX()`类型的方法未定义`Point`

我的代码是

```
public void addNewPoints(Point p)   {
    dataset.add(p.getX(), p.getY());
} 
```

请帮助我如何解决此错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:04:40.893

这是因为该类[`Point`](http://developer.android.com/reference/android/graphics/Point.html)不包含名为的公共方法`getX()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T14:44:53.077

在源代码下生成 getter 和 setter 但首先你需要像这样获取和设置的东西

```
class Point{
private int x;
private int y;

public void addNewPoints(Point p)   {
 dataset.add(p.getX(), p.getY());
}
} 
```

一个很长的故事为什么私有变量公共方法来获取和设置变量，封装，最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:09:23.550

你混淆`java.awt.Point`了`android.graphics.Point`. `Point`记录在[http://developer.android.com/reference/android/graphics/Point.html](http://developer.android.com/reference/android/graphics/Point.html)的 Android有 public`int x`和`int y`data 成员，而 AWT Point 确实有`getX()`方法。

# php - 传递的参数（服务）中可捕获的致命错误

> ID：13859447
> 
> 赞同：1
> 
> 时间：2012-12-13T12:02:25.313
> 
> 标签：php, symfony

我正在尝试构建一个作为服务运行的自定义验证器（主要用于获取实体管理器）。

我关注了文档和一些博客文章，但无法使其正常工作。我有这个错误

```
 Catchable Fatal Error: Argument 1 passed to 
D\AjaxBundle\Validator\Constraints\SelectTypeValidator::__construct() must implement 
interface Doctrine\Common\Persistence\ObjectManager, none given, called in 
/AJAX/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Validator/ConstraintValidatorFactory.php on line 67 and defined in 
/AJAX/src/D/AjaxBundle/Validator/Constraints/SelectTypeValidator.php line 14 
```

SelectTypeValidator.php

```
namespace D\AjaxBundle\Validator;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;
use Symfony\Bridge\Doctrine\RegistryInterface;

use Doctrine\Common\Persistence\ObjectManager;

class SelectTypeValidator extends ConstraintValidator
{
    private $om;

    public function __construct(ObjectManager $om)
    {
        $this->om=$om;
    }

    public function validate($value, Constraint $constraint)
    {
        $fieldOne = $this->om->getRepository('DAjaxBundle:City')->findOneBy(array('id' =>
                $value->getId()));

        if ($fieldOne == null) {
            $this->context->addViolation($constraint->message, array('%string%' => $value->
                    getId()));
        }
    }
} 
```

选择类型.php

```
namespace D\AjaxBundle\Validator;

use Symfony\Component\Validator;

class SelectType extends Constraint
{
    public $message ='message';

    public function validateBy()
    {
        return 'SelectTypeValidator';
    }

    public function getRequiredOptions() 
    {
        return array();
    }

} 
```

服务.yml

```
services:
    d_ajax.validator.SelectTypeValidator:
        class: D\AjaxBundle\Validator\SelectTypeValidator
        arguments: [@doctrine.orm.entity_manager]
        tags:
            - { name: validator.constraint_validator, alias: SelectTypeValidator } 
```

# javascript - 检查加载的图像jQuery

> ID：13859458
> 
> 赞同：0
> 
> 时间：2012-12-13T12:02:50.583
> 
> 标签：javascript, jquery

我正在尝试检测何时在 div 中加载了一组图像。

```
if($("#venues-page").get(0)) {
    var img = $('#venues-page .venues img');
    var length = img.length;
    img.load(function(){
        length--;
        console.log(length);
        if(length === 0){
            console.log("here");
            $(".lattice").fadeIn(1000);
            $("#venues .venue a").css("display", "block");
            $("#venues-page .venues img").not('.lattice').fadeIn(500);
        }
    });
} 
```

当图像缓存在浏览器中时，这似乎工作正常，但是如果用户在刷新后刷新后似乎永远不会在没有刷新的情况下加载图像之前没有访问过该站点。

有没有更好的方法来确保所有图像都加载到一个 div 中，并以此为基础做一些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:06:33.547

您可能在这里遗漏了一些代码。

1）您的代码应包含在

```
$(function(){ 

}); 
```

2）代替

```
img.load(function () { 
```

尝试

```
img.one("load", function () {
OR 
img.on("load", function () { 
```

我尝试使用您的代码并且效果很好。如果您仍然遇到任何问题，请告诉我。

# c# - xsd.exe 属性顺序

> ID：13859461
> 
> 赞同：4
> 
> 时间：2012-12-13T12:03:05.047
> 
> 标签：c#, xsd, xsd.exe

我的目标是将 c# 类序列化为 XML，其属性顺序类似于我的类中的属性顺序。为此，我需要在类中的其他属性之前添加 System.Xml.Serialization.XmlElementAttribute(Order=int) 。

```
 [System.Xml.Serialization.XmlElementAttribute("F4INVAL", Form=System.Xml.Schema.XmlSchemaForm.Unqualified, Order=1)]
    public F4invalType[] F4INVAL {
        get {
            return this.f4INVALField;
        }
        set {
            this.f4INVALField = value;
        }
    } 
```

我有 XSD 文件 ( [f4form_2012_3.xsd](https://dl.dropbox.com/u/62535368/f4form_2012_3.xsd) )。

使用 Xsd.exe (http://msdn.microsoft.com/en-en/library/x6c1kb0s.aspx) 我执行这个 scriptlet 来生成一组 C# 类：

```
xsd f4form_2012_3.xsd /order /classes 
```

我需要使用 C# attribute 获取类属性`[System.Xml.Serialization.XmlElementAttribute(Order=1)]`。我也有，但是头等舱的属性有这个属性。

第二类及以下类没有。

请检查[f4form_2012_3.cs](https://dl.dropbox.com/u/62535368/f4form_2012_3.cs)

这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:01:32.273

这是因为您的`F4ReportType`复杂类型是 XSD 中唯一使用 a `xsd:sequence`of 元素的类型。您不能对从 XML 属性生成的属性进行排序，因为属性在 XML 中没有排序。也许您想改用 XML 元素。

# ruby-on-rails - 如何通过数组获取唯一元素并将它们分组到 ruby on rails

> ID：13859463
> 
> 赞同：0
> 
> 时间：2012-12-13T12:03:06.633
> 
> 标签：ruby-on-rails, arrays, iteration, grouping

我有问题。下面的代码是rails中ruby的视图代码

```
<table >
<tr>
    <th>Url</th>
    <th>Tags</th>
</tr>   
 <% @array_bookmark = @bookmark.class == Array ? @bookmark : [@bookmark] %> 
 <% Array(@bookmark).each do |book| %>
 <tr>
 <td><%= book.url %></td>
 <td><%= book.tags %></td>
 </tr>
 <% end %>
 </table> 
```

这会产生类似的东西：

```
 Url                   Tags
 www.mrabhiram.tumblr.com   abhi
 www.mrabhiram.tumblr.com   blog
 google.com                 google
 google.com                 blog 
```

但是，我想得到它

```
 Url                   Tags
 www.mrabhiram.tumblr.com   abhi,blog
 google.com                 google,blog 
```

谁能给我解决方案？它应该足够通用以迭代数组。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:11:32.337

```
<% Array(@bookmark).group_by {|b| b.url}.each do |url, books| %>
  <tr>
    <td><%= url %></td>
    <td><%= books.map {|b| b.tags}.flatten.uniq.join(" ") %></td>
  </tr>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:12:09.133

使用 group_by 语句

更新

```
 <% Array(@bookmark).group_by(&:url).each do |url, books| %>
 <tr>
 <td><%= url %></td>
 <td><%= books.map(&:tags).flatten.join(',') %></td>
 </tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:05:13.373

```
<% Array(@bookmark).uniq.each do |book| %>
 <tr>
 <td><%= book.url %></td>
   <td><%= book.tags %></td>
 </tr>
<% end %> 
```

以上将起作用。

# android - 使用 Android 上基于 PhoneGap 的应用程序本地存储的示例数据

> ID：13859464
> 
> 赞同：0
> 
> 时间：2012-12-13T12:03:08.490
> 
> 标签：android, html, cordova

我们最初计划为 Android 开发本机应用程序，但 PhoneGap 看起来是一个更好的选择。我们需要做的一件事是，当用户安装应用程序时，他们需要对后端数据库中的数据样本进行本地访问，但将其存储在本地。在本机应用程序上，我们计划当用户安装应用程序时，安装过程还会触发后端数据库中的大量数据的检索，以便他们可以在不依赖互联网连接的情况下进行应用程序的基本使用每时每刻。该数据将包括 JPG 文件，可能还有一些音频文件。HTML5 的本地存储能否满足这一要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:31:20.343

它的确是。Phonegap 是最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:14:51.547

简短的回答：是的

这就是phonegap很棒的原因，您可以创建一个数据库来存储持久数据的详细信息（名称和路径）当您运行应用程序时，您将测试连接，如果没有连接，您可以通过数据库引用本地文件否则，如果有连接，您可以下载新数据，将它们保存到本地数据库，然后从本地存储（SD卡和数据库）中删除它们。

要查找更多信息，请查看[phonegap 的文件文档](http://com.codendot.herbal)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:00:40.487

只是补充一下 T.Baba 所说的，是的，这是非常有可能的，我最近使用 PhoneGap 和 jQuery Mobile 构建了一个 web 应用程序，它就是这样做的。

我使用 localStorage 来包含所有数据，尤其是[localstoragedb](http://nadh.in/code/localstoragedb/)。我没有在 localStorage 中存储任何图像和/或音频文件，并且无论如何都不推荐它，因为大多数设备会将空间限制为 5MB，但 PhoneGap 确实允许您访问 API，这将允许您将文件保存在用户的设备上. 您当然也可以将文件与应用程序捆绑在一起并相应地访问它们。

# php - odbc 查询中的问题

> ID：13859465
> 
> 赞同：0
> 
> 时间：2012-12-13T12:03:08.417
> 
> 标签：php, sql-server, odbc

我有下面的代码，用于登录身份验证部分。都在mysql里，我尽力把它转成odbc

`$row = $query->odbc_assoc();`我得到一个错误：我猜必须在

```
$connection = odbc_connect("Driver={SQL Server};Server=$host;Database=$database;",$uid, $passVal ) or die("Connection could not established");

$query = $connection->'SELECT Level_access FROM users WHERE ID = "'.$connection->addslashes($_SESSION['user_id']).'"';
$row = $query->odbc_assoc();

$connection->close(); 
```

有人可以检查一下吗，虽然写的可能完全错误..问题：mysql_escape_string 是否等同于odbc 连接中的addlashes？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:32:52.980

> 问题：mysql_escape_string 是否等同于 odbc 连接中的 addlashes？

不，而且`addslashes`永远*不是*正确的工具！通过对字符集的简单操作，绕过`addslashes`创建的简单转义层非常简单。[这仍然让您对SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)敞开大门。此外，`mysql_real_escape_string`仅适用于 MySQL，并且仅在具有已声明字符集的开放 MySQL 连接下才能正确运行。

这并没有开始触及您的语法完全是虚假的事实。 `odbc_connect`返回资源，而不是对象。试图在它上面调用一个方法只会杀死脚本。

如果您需要使用 OBDC 连接到 SQL Server 而不是像[sqlsrv 扩展](http://php.net/book.sqlsrv)这样现代的东西，那么至少使用[PDO](http://php.net/book.pdo) via [`PDO_ODBC`](http://php.net/ref.pdo-odbc)。这两个选项都为您提供[了带有参数化查询的准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)，这通常是对 SQL 注入的有效防御。Sqlsrv 的准备好的语句在服务器上执行，它们应该在哪里，而 PDO 是在内部而不是在服务器上完成的。只要确保在连接字符串中传递连接字符集，并确保您将传递的所有用户数据都在正确的字符集中，就可以了。

# mono - RavenDB 客户端 onlinux 使用单 http 连接到 Windows 服务器

> ID：13859467
> 
> 赞同：5
> 
> 时间：2012-12-13T12:03:21.570
> 
> 标签：mono, ravendb, gzipstream

我刚刚尝试使用单声道从 linux 连接到我的 RavenDB Windows 实例。我遇到了一个奇怪的错误，这似乎与单声道有关，而不是与乌鸦有关。

这是我的重新创建代码（适用于 Windows）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Raven.Client.Document;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {

            try
            {
                var store = new DocumentStore()
                                {
                                    ConnectionStringName = "RavenDB",
                                    EnlistInDistributedTransactions = false

                                };
                store.Initialize();

                using (var session = store.OpenSession("system-events"))
                {
                    session.Store(new { Name = "Test" });
                    session.SaveChanges();
                }
                Console.WriteLine("done");
            }
            catch (Exception ex)
            {

                Console.WriteLine(ex.ToString());
            }

            Console.ReadKey();

        }
    }
} 
```

和我的单声道版本：

```
chris@x-ngx4:~/click/beta/Debug$ mono --version
Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-1ubuntu2.2)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
        TLS:           __thread
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  amd64
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            Included Boehm (with typed GC and Parallel Mark) 
```

和错误：

```
chris@x-ngx4:~/click/beta/Debug$ mono ConsoleApplication2.exe
System.IO.IOException: Internal error (no progress possible) Flush
  at System.IO.Compression.DeflateStream.CheckResult (Int32 result, System.String where) [0x00000] in <filename unknown>:0
  at System.IO.Compression.DeflateStream.Flush () [0x00000] in <filename unknown>:0
  at System.IO.Compression.GZipStream.Flush () [0x00000] in <filename unknown>:0
  at Raven.Abstractions.Connection.HttpRequestHelper.WriteDataToRequest (System.Net.HttpWebRequest req, System.String data, Boolean disableCompression) [0x00000] in <filename unknown>:0
  at Raven.Client.Connection.HttpJsonRequest.Write (System.String data) [0x00000] in <filename unknown>:0
  at Raven.Client.Connection.ServerClient.DirectBatch (IEnumerable`1 commandDatas, System.String operationUrl) [0x00000] in <filename unknown>:0
  at Raven.Client.Connection.ServerClient+<>c__DisplayClass68.<Batch>b__67 (System.String u) [0x00000] in <filename unknown>:0
  at Raven.Client.Connection.ReplicationInformer.TryOperation[BatchResult[]] (System.Func`2 operation, System.String operationUrl, Boolean avoidThrowing, Raven.Abstractions.Data.BatchResult[]& result) [0x00000] in <filename unknown>:0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T19:24:51.193

我想我找到了。 [DeflateStream](https://github.com/mono/mono/blob/master/mcs/class/System/System.IO.Compression/DeflateStream.cs)具有对 zlib 的外部引用。如果你查看[zlib 头文件](https://github.com/mono/mono/blob/master/support/zlib.h)，你会发现一些注释：

> deflate() 如果取得了一些进展（处理更多输入或产生更多输出），则返回 Z_OK，如果已消耗所有输入并产生所有输出，则返回 Z_STREAM_END（仅当将 flush 设置为 Z_FINISH 时），如果流状态为 Z_STREAM_ERROR不一致（例如，如果 next_in 或 next_out 为 Z_NULL），如果无法取得进展，则为 Z_BUF_ERROR（例如，avail_in 或avail_out 为零）。 **请注意，Z_BUF_ERROR 不是致命的，并且可以再次调用 deflate() 并使用更多输入和更多输出空间来继续压缩。**

该消息`Internal error (no progress possible)`是`DeflateStream`在获得时返回的内容`Z_BUF_ERROR`- 但它不会继续，它将其视为硬停止。它应该将其视为警告并继续。至少，这是我的解释。

你能向单声道支持团队提出这个问题吗？我在那个组里不活跃。谢谢。

# visual-c++ - 在 MFC 中从 OnOk 中调用 delete this

> ID：13859470
> 
> 赞同：0
> 
> 时间：2012-12-13T12:03:32.270
> 
> 标签：visual-c++, mfc, self-destruction

> **可能重复：**
> [是否应该从成员方法中调用“删除这个”？](https://stackoverflow.com/questions/1861912/should-delete-this-be-called-from-within-a-member-method)

从 OnOk 事件处理函数调用 delete 是正确的，如下面的代码所示。

```
void CTestDlg::OnOK() 
{
    CDialog::OnOK();

    this->DestroyWindow();
    delete this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:32:08.513

我想您正在尝试所有这些，因为对话框实例是无模式的？

在这种情况下，您[不应](http://msdn.microsoft.com/en-us/library/66b3y2ab%28v=vs.80%29.aspx)从覆盖中调用基类 OnOK()，而应仅调用 DestroyWindow()。

如果非要`delete this`那么override`PostNcDestroy()`是[合适的地方](http://www.codeproject.com/Articles/1651/Tutorial-Modeless-Dialogs-with-MFC)。

# wpf - 扩展列时，如何将 wpf datagrid 配置为具有相对大小并水平滚动？

> ID：13859471
> 
> 赞同：3
> 
> 时间：2012-12-13T12:03:35.320
> 
> 标签：wpf, datagrid

假设有一个可调整大小的网格，其中 2 列放置在 DockPanel 内（这样它会填满其中的所有空间）。

当列的宽度指定为“1*”时，每列最初获得一半的空间。扩展 column1会使 column2**缩小**相同的量。结果，水平滚动条**不**显示。（这也意味着我不能扩展两列，即组合宽度大于可见区域。）

当列的宽度指定为“自动”（默认）时，每列自动调整为最大（单元格内容，列标题）。在最后一列之后的右侧可能会留下额外的空间。您**可以**扩展每一列而不缩小其他列。如果需要，将显示水平滚动条。

如何配置 wpf 数据网格以平均划分可用空间并且扩展任何列不应缩小任何其他列，即水平滚动条应该出现，就好像它们被配置为 Auto 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:37:58.557

这可能会有所帮助::

```
dataGrid.Loaded+=new RoutedEventHandler(dataGrid_Loaded);

void dataGrid_Loaded(object sender, EventArgs e)
{
    DataGrid dataGrid = sender as DataGrid;
    double width = dataGrid.ActualWidth;
    int count = dataGrid.Columns.Count;
    foreach (DataGridColumn col in dataGrid.Columns)
    {
        col.Width = width / count;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:38:25.453

我认为您需要在每列上设置一个静态宽度才能使其正常工作。我建议使用一个转换器，它采用您的 DataGrid 的宽度并将其除以您拥有的列数

我的博客上有一个相当简单的[MathConverter](http://rachel53461.wordpress.com/tag/math-converter/)，用于所有数学转换。`IMultiValueConverter`如果需要，它也很容易扩展到。最终结果将如下所示：

```
<DataGridTextColumn Width="{Binding ElementName=MyDataGrid, Path=ActualWidth,
    Converter={StaticResource MathConverter}, ConverterParameter=@VALUE/2}" ... /> 
```

`<DataGrid.Resources>`如果您不想在每列上指定宽度，您甚至可以在隐式样式中应用宽度

```
<DataGrid.Resources>
    <Style TargetType="{x:Type DataGridColumn}">
        <Setter Property="Width" 
                Value="{Binding ElementName=MyDataGrid, 
                    Path=ActualWidth, 
                    Converter={StaticResource MathConverter}, 
                    ConverterParameter=@VALUE/2}" />
    </Style>
</DataGrid.Resources> 
```

# objective-c - 没有来自 NSURLConnection 的请求

> ID：13859472
> 
> 赞同：-2
> 
> 时间：2012-12-13T12:03:36.730
> 
> 标签：objective-c, networking

API 文档说明 NSURLConnection::initWithRequest 请求传递了 url 参数。在服务器上没有收到任何东西，但是参数是有效的，并且可以在同一台机器上的浏览器中工作。烂苹果里到底发生了什么？

```
NSString* urlString = <valid url working from browser>;

NSURLRequest* request = [[NSURLRequest alloc] initWithURL: [NSURL URLWithString:urlString] cachePolicy: NSURLRequestReloadIgnoringLocalCacheData timeoutInterval: 10];

NSURLConnection* connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

<Connection validated here>

<Delegate methods implemented elsewhere> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:07:35.787

这是我会尝试的：

您的 urlString 是有效的 URL 吗？仅仅因为它在浏览器中工作并不意味着它是一个有效的 URL - 浏览器可能比 NSURL 更宽容。通过检查创建的对象`[NSURL URLWithString:urlString]`是否不是来测试这一点`nil`。

您的`connection:didFailWithError:`委托方法作为错误参数返回什么？

是否`connection:didReceiveAuthenticationChallenge:`在您的委托中被调用 - 这是您的应用程序和服务器之间的身份验证问题吗？

你是保留你的`connection`对象还是 ARC 释放它（不太可能，我很确定连接会在连接时挂起，但你可能应该确保）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:18:24.733

它不会解决您的问题，但会将超时时间增加到 60。按照上述答案检查 URL。

# c# - 为什么从后面的代码设置键盘焦点需要 Dispatcher.BeginInvoke？

> ID：13859473
> 
> 赞同：1
> 
> 时间：2012-12-13T12:03:38.207
> 
> 标签：c#, wpf, user-controls, textbox, dispatcher

我有一个`UserControl`包含一个`TextBox`. 当用户控件变得可见时，我给予`TextBox`焦点。有人可以澄清为什么我必须使用`Dispatcher`?

```
public MyUserControl() 
{
    InitializeComponent();
    this.IsVisibleChanged += VisibilityChanged;
} 
```

案例1（作品）：

```
private void VisibilityChanged(object sender, DependencyPropertyChangedEventArgs e)
{
    if (this.Visibility == Visibility.Visible)
    {
        this.Dispatcher.BeginInvoke((Action)delegate
        {
            Keyboard.Focus(this.InputTextBox);
        }, DispatcherPriority.Render);
    }
} 
```

案例2（不起作用）：

```
private void VisibilityChanged(object sender, DependencyPropertyChangedEventArgs e)
{
    if (this.Visibility == Visibility.Visible)
    {
        Keyboard.Focus(InputTextBox);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:28:12.840

`Keyboard.Focus(InputTextBox);`你可以在事件处理程序中调用`InputTextBox.IsVisibleChanged`而不是`this.IsVisibleChanged`吗？

如果这可行，那么我怀疑在`this.IsVisibleChanged`布局面板更新子控件之前引发了该事件，即`InputTextBox`当您将焦点放在没有`BeginInvoke`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:07:26.367

可能是因为该`IsVisibleChanged`事件是在另一个线程上引发的（而不是在 UI 线程上）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T12:33:52.837

您正在操作的控件属于 UI 线程（因为它是在其中创建的）。所有控件都派生自 DispatcherObject，因此`control.Dispatcher`（或`this.Dispatcher`从控件内部）将为您提供对属于创建控件的线程的 Dispatcher 的引用。

然后，您将从正在运行事件处理程序的后台线程对该 Dispatcher 的操作进行排队。你为什么在后台线程上运行？它是一个控件，因此它受其主机的支配，猜测后台线程上有一些程序逻辑导致可见性发生变化（可能通过数据绑定），因此事件处理程序也被调用后台线程。

为了阻止您使用 Dispatcher 并尝试使用它来执行它不适合的神奇神秘壮举，请确保您熟悉[Dispatcher.CurrentDispatcher](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.currentdispatcher.aspx)属性及其区别（我见过一些真正糟糕的代码，因为开发人员没有意识到这一点）。

有关与 UI 元素关联的 Dispatcher 的良好概述，请查看这篇文章：[MSDN 高级 WPF：线程模型](http://msdn.microsoft.com/en-us/library/ms741870.aspx)。请注意`VerifyAccess()`在尝试操作控件的操作之前调用的示例代码。

# azure - 安排 Azure 服务器重启

> ID：13859474
> 
> 赞同：1
> 
> 时间：2012-12-13T12:03:40.810
> 
> 标签：azure, umbraco, schedule, reboot

我们有两台服务器 Azure 配置，运行由 Umbraco 提供支持的网站。当我们需要向 Azure 服务器添加新域时，我们会修改配置文件，然后依次重新启动每个服务器。

理论上，因为我们从不同时重启两台服务器，所以这不会影响正常运行时间。然而，在实践中，负载均衡器的响应速度不够快，因此我们得到了大约 20 分钟的停机时间。

如果我们可以安排在凌晨 3 点左右重新启动会更好。Azure 中是否有允许我们安排重启两台服务器的功能？

我已经对这个主题进行了一些研究，但到目前为止我还没有找到具体的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:18:37.977

无法安排重新启动。由你来管理它。

例如，您可以在 Windows 中（在您的一台服务器上）创建计划任务并调用[PowerShell](http://msdn.microsoft.com/en-us/library/windowsazure/jj152841.aspx)脚本来重新启动服务器。

# ms-access - 将每条记录的字段匹配到特定的查询记录

> ID：13859483
> 
> 赞同：1
> 
> 时间：2012-12-13T12:04:11.567
> 
> 标签：ms-access, ms-access-2003

我有 1 个表格：

```
Study Name ¦ xx ¦ yy ¦ zz ¦ Target No ¦ Current No. 
```

这称为 study_information

和另一种形式：

```
Study Name ¦ Patient Name ¦ Date ¦ Time 
```

这称为 patient_visits

我创建了一个查询，计算每个研究名称的患者数量：

```
SELECT patient_visits.study_name, Count(patient_visits.study_name) AS [Count]
FROM patient_visits
GROUP BY patient_visits.study_name; 
```

例如，它给出了以下输出：

```
Study Name ¦ Count
Study 1    ¦   4
Study 2    ¦   7
Study 3    ¦   11 
```

即，研究 1 的 patient_visits 表中有 4 条记录（4 名患者）。

我想要做的是在 study_information 表的 Current No. 字段中显示计数。我尝试设置当前无字段的数据类型来查找查询，但它会生成一个下拉列表，而不是匹配研究名称。我还在查询的计数字段和 current_no 之间创建了直接关系，但得到了相同的结果。

希望这很清楚；在伪：

```
study_information.current_no = COUNT patient_visits.study_name where     study_information.study_name = patient_visits.study_name 
```

如何将这两个值联系起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:52:39.333

如果您的`GROUP BY`查询名为`qryVisitsPerStudy`，这应该可以满足您的需求。它不会像您想要的那样将计数存储在`[Current No.]`字段中。`study_information`但这是一件好事，因为只要包含在其中的数据`patient_visits`发生变化，您就不需要更新存储的计数值。

```
SELECT 
    s.[Study Name],
    s.xx,
    s.yy,
    s.zz,
    s.[Target No],
    q.[Count] AS [Current No.]
FROM
    study_information AS s
    INNER JOIN qryVisitsPerStudy AS q
    ON s.[Study Name] = q.study_name 
```

# apple-push-notifications - 不同捆绑ID的多个应用程序的相同推送通知

> ID：13859485
> 
> 赞同：0
> 
> 时间：2012-12-13T12:04:34.457
> 
> 标签：apple-push-notifications, cfbundleidentifier

应用程序“A”（com.xxx.bundleid）已经在应用程序商店中，现在我正在处理应用程序“B”，我有旧的 csr 以及 p12 文件，即用于应用程序“A”。

现在我为我的应用程序 "B" 使用不同的捆绑包 ID。即使我使用来自“A”的相同 csr 文件，生成的 SSL 证书 aps_developer_identity.cer 也会不同（对于不同的捆绑 id“B”）.. ck.pem 将不同。

即对于后端，我必须提供适用于应用程序 A 和 B 的相同 ck.pem 文件。

是关于如何为不同的应用程序使用相同的推送通知的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:27:23.370

[https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

根据苹果文档，不同的应用程序无法使用相同的 Push_Notification 。

# c# - 使用 IComparer 通过另一个列表对具有自定义对象的列表进行排序

> ID：13859487
> 
> 赞同：5
> 
> 时间：2012-12-13T12:04:37.667
> 
> 标签：c#, .net, list, interface, icomparer

我的问题是关于`IComparer`界面的，我以前从未使用过它，所以我希望你能帮助我正确设置一切。

我必须使用该接口按另一个对象的确切顺序对自己的对象列表进行排序`List<int>`。我在网上找不到任何对这个问题有用的东西，我发现的所有东西都是 linq 语句，我无法使用。

这是示例代码：

```
public class What : IComparer<What>
{
    public int ID { get; set; }
    public string Ever { get; set; }

    public What(int x_ID, string x_Ever)
    {
        ID = x_ID;
        Ever = x_Ever;
    }

    public int Compare(What x, What y)
    {
        return x.ID.CompareTo(y.ID);
    }
} 
```

一些需要处理的数据：

```
List<What> WhatList = new List<What>()
{
    new What(4, "there"),
    new What(7, "are"), 
    new What(2, "doing"),
    new What(12, "you"),
    new What(78, "Hey"),
    new What(63, "?")
}; 
```

以及正确顺序的列表：

```
List<int> OrderByList = new List<int>() { 78, 4, 63, 7, 12, 2 }; 
```

那么现在我怎么能告诉`IComparer`排序`OrderByList`呢？我真的不知道该怎么做，我知道使用 linq 会很容易，但我没有机会使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:11:00.277

您的代码目前存在一些问题。如果您查看[文档，`IComparer<T>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)您会发现这`T`就是您要比较的内容。在您的代码中，这是`Test`但您继续进行比较的代码`What`- 这意味着您的代码将无法编译。见[这里](http://rextester.com/LLZWZ20401)- 错误信息是：

> 'Rextester.What' 没有实现接口成员 'System.Collections.Generic.IComparer.Compare(Rextester.Test, Rextester.Test)'
> [（忽略那里的“Rextester”位！）。]

说了这么多，你应该实现一个`WhatComparer`：

```
public class WhatComparer : IComparer<What>
{
    private List<int> orderBy;
    public WhatComparer(List<int> orderBy)
    {
        this.orderBy = orderBy;
    }

    public int Compare(What x, What y)
    {
        return orderBy.IndexOf(x.ID).CompareTo(orderBy.IndexOf(y.ID));
    }
} 
```

并将其用于订购：

```
 WhatList.Sort(new WhatComparer(OrderByList)); 
```

现场示例：[http ://rextester.com/BZKO33641](http://rextester.com/BZKO33641)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T12:14:34.603

您应该创建另一个类来进行比较，并给出所需的顺序：

```
public class OrderComparer : IComparer<What>
{
    private readonly Dictionary<int, int> idIndexes = new Dictionary<int, int>();
    public OrderComparer(List<int> idOrders)
    {
        for(int i = 0; i < idOrders.Length; i++)
        {
            idIndexes[idOrders[i].ID] = i;
        }
    }

    public int Compare(What x, What y)
    {
        return idOrders[x.ID].Compare(idOrders[y.ID]);
    }
} 
```

然后你可以这样做：

```
WhatList.Sort(new OrderComparer(OrderByList)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T12:19:40.747

最简单的方法是使用自定义[`Comparison<T>`](http://msdn.microsoft.com/en-us/library/tfakywbh.aspx)：

```
WhatList.Sort((x, y) =>
{
    return OrderByList.IndexOf(x.ID).CompareTo(orderByList.IndexOf(y.ID));
}); 
```

# java - 在 ANTLR 中生成的 java 代码中返回一个值

> ID：13859488
> 
> 赞同：1
> 
> 时间：2012-12-13T12:04:37.850
> 
> 标签：java, antlr, antlr3

我正在用 ANTLR 编写语法，我想提出一个关于返回值的问题。我有这个规则：

```
mainParser returns [int test]
    :
    triple EOF 
         {
            $test = 0;
         }
    ; 
```

当我从生成的 java 代码中调用它时，我无法取回测试值，因为它返回给我一个“解析器对象”：![在此处输入图像描述](../Images/b130a74b49b3d316c31f3311738b014e.png)

如何使其返回 Integer、String 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:14:44.847

由于 mainParser 必须返回一个树*和*一个 int，它必须使用一个对象。如果你往里看，那个 mainParser_return 对象两者都有。

# bash - Unix time 命令会干扰正在运行的程序吗？

> ID：13859491
> 
> 赞同：2
> 
> 时间：2012-12-13T12:04:48.977
> 
> 标签：bash, unix, time, dacapo

从Time Unix 命令的[这个答案](https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1/556411#556411)中，我得到了关于时间如何工作的基本概念。它派生一个新进程并在该新进程中执行命令。但是，我遇到了我无法理解的行为。

我正在尝试分析*lusearch*，这是[DaCapo 基准套件](http://dacapobench.org)的基准。我想以不同的配置（线程数和迭代次数）启动它，忽略基准输出并使用*时间*来记录真实、用户和系统时间。对于绝大多数配置，我的脚本运行良好，启动基准测试并记录时间。

对于一种特定的配置（大型数据集、两个线程和十次迭代），基准测试有时不会终止（80% 的情况，几乎 100 次尝试）。这是我用来启动它的命令：

```
(time -p java -jar DaCapo.jar lusearch -s large -t 2 -i 10 
 >/dev/null 2>/dev/null) 2>&1 | awk '{print $2 $4 $6}' > timed & 
```

但是，如果我不预先设置时间，则基准测试只会终止 100% 的时间（也有大约 100 次尝试）：

```
(java -jar DaCapo.jar lusearch -s large -t 2 -i 10 >/dev/null 2>/dev/null) 
```

此行为仅在此基准测试和此配置中发生，而如果配置其他基准测试或使用不同数量的线程或不同数量的迭代，我看不到同样的事情发生。我的猜测是，它与时间正在做的干扰基准的事情有关。

我看不到 fork+exec 如何改变基准行为。有什么具体的原因会导致这种情况吗？例如：时间是否在使用基准测试也想要使用的某些资源？启动基准测试时我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:26:35.693

“没有达到终止”是相当模糊的。由于您将所有内容发送到`/dev/null`. 如果不知道该程序的功能，没有错误消息，没有回溯，就不可能给出明确的答案。

我能想到的唯一实际区别是您没有在第二种情况下将其作为背景。带有某些管道和重定向组合的 Bash 在后台运行时不会`/dev/null`隐式重定向到标准输入。程序的某些部分可能对此敏感。有关需要显式重定向的一些示例，请参阅我的[测试用例](https://gist.github.com/1255778)。Bash 在这里并不完全遵循 POSIX，并且与所有其他 shell 不同，它具有异步列表、管道和重定向的某些组合。

我严重怀疑它与`time`. 如果您在这里没有得到更好的答案，可以询问 help-bash 列表，但如果没有更好的信息，他们将无法获得更好的答案。

# android - 多个传感器的Android不同传感器延迟失败

> ID：13859494
> 
> 赞同：1
> 
> 时间：2012-12-13T12:04:55.807
> 
> 标签：android, delay

如果我为不同的传感器设置不同的采样率（延迟），例如：

```
 SensorMgr.registerListener(this, accSensor, SensorManager.SENSOR_DELAY_FASTEST);
SensorMgr.registerListener(this, magneticFieldSensor, SensorManager.SENSOR_DELAY_GAME);
SensorMgr.registerListener(this, orientationSensor, SensorManager.SENSOR_DELAY_NORMAL); 
```

Android 为所有传感器选择 SENSOR_DELAY_FASTEST（给定延迟中最快的）。即在 SENSOR_DELAY_FASTEST 为所有传感器调用 onSensorChanged()。这是一个错误还是什么？

我什至尝试了每个传感器侦听器的不同类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T15:34:39.900

我想您应该为每个不同的传感器使用不同的传感器管理器实例。从您的代码中，我看到您对所有 3 个传感器都使用了相同的 sensorManager 实例。

# ruby - 使用 rvm 获取 ruby 1.9.3 的源代码

> ID：13859495
> 
> 赞同：4
> 
> 时间：2012-12-13T12:04:59.630
> 
> 标签：ruby, rvm

我使用以下方法在 Mountain Lion 上安装了 ruby​​ 1.9.3：

```
rvm install 1.9.3 
```

这一切都很好，我现在可以使用 ruby​​ 1.9.3。但是，在 .rvm/src 目录中，我通常有一个名为 ruby​​-1.9.3p123 的文件夹，其中包含我的 ruby​​ 安装源代码。这样的文件夹不再存在。我猜 rvm 使用一些预编译的二进制文件安装了 ruby​​，但是我怎样才能强制它从源代码编译或者至少让我得到源代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T12:23:02.863

是的，RVM 会先尝试安装二进制文件，它会更快。

仅安装源尝试：

```
rvm fetch 1.9.3 
```

从源安装红宝石：

```
rvm reinstall 1.9.3 --disable-binary 
```

# opengl - OpenGL - 如何在顶点缓冲区中转换顶点的子集？

> ID：13859505
> 
> 赞同：1
> 
> 时间：2012-12-13T12:05:31.237
> 
> 标签：opengl, transformation, vertex-buffer

```
float linePos[6]={0.0f,5.0f,0.0f,0.0f,30.0f,0.0f};    
...

glGenBuffers(1, &buffer);
glBindBuffer(GL_ARRAY_BUFFER, buffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(float)*3*2, linePos, GL_STATIC_DRAW);

...
glUniformMatrix4fv(UniformColor.modelToWorldMatrixUnif, 1, GL_FALSE, glm::value_ptr(modelMatrix.Top()));
//this just transforms all vertices

glLineWidth(3);
glDrawArrays(GL_LINES,0,2); 
```

我想制作一些动画来改变线（linePos [0]）一端的位置（ex.translate），而不是另一端。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:26:35.050

在您的顶点着色器中检查[gl_VertexID](http://www.opengl.org/sdk/docs/manglsl/xhtml/gl_VertexID.xml)是奇数还是偶数，并根据它决定是否应用转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:44:07.493

您基本上有 2 个选项：更新 linePos 数组中的顶点位置并重新上传到顶点缓冲区对象。您可以使用[glBufferSubData](http://www.opengl.org/sdk/docs/man/xhtml/glBufferSubData.xml)更新数据。第二，我认为更好（更快）的方法是在顶点中转换您的线shader.Anyways ，如果您需要修改单个顶点位置，第一种方法就是您需要的。这是一个[流行的教程](http://www.arcsynthesis.org/gltut/Positioning/Tutorial%2003.html)，介绍如何使用可编程管道完成它。

顺便说一句，我想扩展基于着色器的解决方案。我建议这样做是因为你的线只有 2 个点：开始和结束。所以改变它们中的任何一个的位置就像用矩阵变换整条线。这就是为什么我认为它是最好在顶点着色器中进行。如果您有一条至少由 3 个向量定义的线，那么要修改特定顶点的位置将需要在 CPU 上修改顶点数组。好吧，您可以在几何着色器中进行，但这是高级的东西。

# mysql - 在我的情况下，将两个 ID 列作为一个用于索引另一个以引用少数表是否更好？

> ID：13859510
> 
> 赞同：0
> 
> 时间：2012-12-13T12:05:57.167
> 
> 标签：mysql, database, database-design

我正在使用的当前数据库中的表很少，其中有两个以上的 ID 列，其中一个具有自动增量，用于索引另一个唯一 ID 列，其中 ID 由程序员生成并存储用于索引。我以前从未见过这样的场景。他们这样做的答案是，当他们合并在一个数据库服务器上生成的数据时，可以很容易地与另一个数据库合并而不会发生冲突。因为他们之间几乎没有关系。

如果您使用单个自动递增 ID，则会出现问题，

*   一组记录将被插入到主表中，并在其外部表中引用相同的 id。如果这些数据合并到另一个已经存在一些数据的数据库中，它们可能会与该数据库中自动生成的 ID 冲突。

*   例如，TBL_1 是在其他 10 个表中引用的主表，因此在转储到另一个数据库时必须保留在 TBL_1 中生成的 id。可能有一些记录已经具有相同的 ID，存在。然后发生冲突。

*   否则，如果您将增量过程留给新数据库，那么这 10 个引用的表将失去与该表的完整性。

这是正确的使用方式吗？（这是一个现有的系统，不是我创建的）。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:02:04.953

我在自动增量列中看不到任何好处。我理解您的问题的方式是，所有引用都是使用显式生成的 ID 完成的。我相信出于这个原因在应用程序级别明确生成 ID 是完全有效的，但我会让这些生成的 ID 成为唯一的 ID，以使系统更简单、更容易理解。并且它将防止将来的修改意外使用错误的 ID，即无法在合并到另一个数据库中后继续存在的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:38:52.483

没有魔法：

*   要么你需要使用一个全局唯一标识符（例如 GUID 或某种全局可见的“ID 服务器”），它们不会在不同数据库之间发生冲突。
*   或者您需要将您的 ID 从一个“命名空间”转换为另一个，递归地包括所有外键。

顺便说一句，虽然 GUID 确实会在[InnoDB clustered table](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)中到处乱扔行，但自动增量实际上会产生类似的效果（只是更依赖于 INSERT 的时间）。并且不要忘记聚集表中的二级索引是昂贵的（它需要包含 PK 的副本，并且可能导致双重查找）。

除非您有自动递增 ID 的特定原因（例如保持子 FK 苗条），否则只需使用应用程序生成的 ID 作为 PK。如果你让它在全球范围内独一无二，那将避免任何 ID 转换的需要并显着简化合并过程......

# linq - 实体框架代码优先动态查询

> ID：13859519
> 
> 赞同：0
> 
> 时间：2012-12-13T12:06:17.680
> 
> 标签：linq, entity-framework

这段代码太可怕了，我只搜索一个属性（CompanyName）。我如何动态地或无论如何更好地编写此查询？

```
 public List<SubContractor> GetSearchSubcontractorList()
    {
        var list = CacheObjects.Subcontractors;
        var searchItem = string.Empty;
        if (string.IsNullOrWhiteSpace(this.SearchCompanyName) == false)
        {
            var indexes = this.SearchCompanyName.IndexOfAll("*").ToList();
            if (indexes.Any() == false)
            {
                list = list.Where(x => x.CompanyName == this.SearchCompanyName).ToList();
            }

            if (indexes.Count() == 1)
            {
                if (this.SearchCompanyName.StartsWith("*"))
                {
                    searchItem = this.SearchCompanyName.Replace("*", string.Empty);
                    list = list.Where(x => x.CompanyName.EndsWith(searchItem)).ToList();
                }
                else
                {
                    searchItem = this.SearchCompanyName.Replace("*", string.Empty);
                    list = list.Where(x => x.CompanyName.StartsWith(searchItem)).ToList();
                }
            }

            if (indexes.Count() == 2)
            {
                searchItem = this.SearchCompanyName.Replace("*", string.Empty);
                list = list.Where(x => x.CompanyName.Contains(searchItem)).ToList();
            }
        }

        return list;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:05:36.230

哦，对不起，我理解错了。我编辑了，查看新的解决方案。我认为您只有 4 个不同的案例需要测试，对吗？无通配符，以通配符开头，以通配符结尾，两端都有通配符。新解决方案使用延迟查询执行，以便您可以继续使用更多属性构建查询。公平警告，仍未遵守...

```
 var filteredSubcontractors = (from s in list
                             select s);

    if (string.IsNullOrWhiteSpace(this.SearchCompanyName) == false)
    {
        searchItem = this.SearchCompanyName.Replace("*", string.Empty);

        if (!SearchCompanyName.Contains("*"))
        {
            filteredSubcontractors = (from s in filteredSubcontractors 
                             where s.CompanyName == this.SearchCompanyName
                             select s);
        }
        else if(SearchCompanyName.StartsWith("*"))
        {      
            filteredSubcontractors = (from s in filteredSubcontractors 
                             where s.CompanyName.EndsWith(searchItem)
                             select s);
        }
        else if(SearchCompanyName.EndsWith("*"))
        {
            filteredSubcontractors = (from s in filteredSubcontractors 
                             where s.CompanyName.StartsWith(searchItem)
                             select s);
        }
        else
        {
            filteredSubcontractors = (from s in filteredSubcontractors 
                             where s.CompanyName.Contains(searchItem)
                             select s);
        }
    }

    ...
    //Repeat for as many other properties that you want to filter on
    ...

    //All the conditions that you added will not actually be evaluated 
    //until this line is executed.
    var result = filteredSubcontractors.ToList();

    return result; 
```

您还可以查看此堆栈溢出问题。这里还有很多其他的想法（可能比我的好）。 [根据用户选择生成 LinqToEntities Where 语句](https://stackoverflow.com/questions/9189986/generating-linqtoentities-where-statement-depending-on-the-user-selection)

# magento - view.phtml 中的 Magento 属性

> ID：13859521
> 
> 赞同：0
> 
> 时间：2012-12-13T12:06:25.000
> 
> 标签：magento, if-statement, php

我希望通过查看产品 ID 来定义特定的属性列表。

目前我有以下内容，但我知道它需要更多的工作，特别是因为它与封闭 div 中的 php 冲突。

总的来说，我想说的是，如果产品 id == 30 则显示以下内容，否则显示规范。

代码如下。

```
<?php if($_product->getId() == "30")    
        {

        <div class="attribute_page">
        <p><span class="attribute_first">ISSN:</span> <?php echo $_product->getResource()->getAttribute('issn')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Editor:</span> <?php echo $_product->getResource()->getAttribute('editor')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Indexing Info:</span> <?php echo $_product->getResource()->getAttribute('indexing_info')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Scope of Journal:</span> <?php echo $_product->getResource()->getAttribute('scope_of_journal')->getFrontend()->getValue($_product) ?></p>

        <p><span class="attribute_first">Purchasing Form:</span> <a href="<?php echo $_product->getResource()->getAttribute('purchasing_form')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Download Here</a></p>
        <p><span class="attribute_first">Download Product Flyer:</span> <a href="<?php echo $_product->getResource()->getAttribute('product_flyer')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Download Here</a></p> 
        <p><span class="attribute_first">JSIS Homepage:</span> <a href="<?php echo $_product->getResource()->getAttribute('jsis')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Click Here</a></p>
        <p><span class="attribute_first">Recommend to Librarian:</span> <a href="<?php echo $_product->getResource()->getAttribute('recommend_to_librarian')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Click Here</a></p> 

        <?php echo $this->getChildHtml('alert_urls') ?>
        <?php echo $this->getChildHtml('product_type_data') ?>
        <?php echo $this->getTierPriceHtml() ?>
        <?php echo $this->getChildHtml('extrahint') ?>
        </div>

        }
        else {

        <div class="attribute_page">
        <p><span class="attribute_first">Author:</span> <?php echo $_product->getResource()->getAttribute('author')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Translation:</span> <?php echo $_product->getResource()->getAttribute('translation')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Cover:</span> <?php echo $_product->getResource()->getAttribute('cover')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Google Books Preview:</span> <a href="<?php echo $_product->getResource()->getAttribute('google_preview')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Click Here</a></p>

        <?php echo $this->getChildHtml('alert_urls') ?>
        <?php echo $this->getChildHtml('product_type_data') ?>
        <?php echo $this->getTierPriceHtml() ?>
        <?php echo $this->getChildHtml('extrahint') ?>
        </div>

        <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:44:06.980

完成了 :) 经过一番研究，我只是遗漏了几个字符。新代码如下所示。

```
<?php if($_product->getId() == 30): ?>

        <div class="attribute_page">
        <p><span class="attribute_first">ISSN:</span> <?php echo $_product->getResource()->getAttribute('issn')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Editor:</span> <?php echo $_product->getResource()->getAttribute('editor')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Indexing Info:</span> <?php echo $_product->getResource()->getAttribute('indexing_info')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Scope of Journal:</span> <?php echo $_product->getResource()->getAttribute('scope_of_journal')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Purchasing Form:</span> <a href="<?php echo $_product->getResource()->getAttribute('purchasing_form')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Download Here</a></p>
        <p><span class="attribute_first">Download Product Flyer:</span> <a href="<?php echo $_product->getResource()->getAttribute('product_flyer')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Download Here</a></p> 
        <p><span class="attribute_first">JSIS Homepage:</span> <a href="<?php echo $_product->getResource()->getAttribute('jsis')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Click Here</a></p>
        <p><span class="attribute_first">Recommend to Librarian:</span> <a href="<?php echo $_product->getResource()->getAttribute('recommend_to_librarian')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Click Here</a></p> 
        <?php echo $this->getChildHtml('alert_urls') ?>
        <?php echo $this->getChildHtml('product_type_data') ?>
        <?php echo $this->getTierPriceHtml() ?>
        <?php echo $this->getChildHtml('extrahint') ?>
        </div>

        <?php else: ?>

        <div class="attribute_page">
        <p><span class="attribute_first">Author:</span> <?php echo $_product->getResource()->getAttribute('author')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Translation:</span> <?php echo $_product->getResource()->getAttribute('translation')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Cover:</span> <?php echo $_product->getResource()->getAttribute('cover')->getFrontend()->getValue($_product) ?></p>
        <p><span class="attribute_first">Google Books Preview:</span> <a href="<?php echo $_product->getResource()->getAttribute('google_preview')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Click Here</a></p>
        <?php echo $this->getChildHtml('alert_urls') ?>
        <?php echo $this->getChildHtml('product_type_data') ?>
        <?php echo $this->getTierPriceHtml() ?>
        <?php echo $this->getChildHtml('extrahint') ?>
        </div>

        <?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:04:33.703

如果您正确提供标签，第一个代码也可以工作`<?php ?>`，代码会像这样..

```
<?php if($_product->getId() == "30")    
    {  ?>

    <div class="attribute_page">
    <p><span class="attribute_first">ISSN:</span> <?php echo $_product->getResource()->getAttribute('issn')->getFrontend()->getValue($_product) ?></p>
    <p><span class="attribute_first">Editor:</span> <?php echo $_product->getResource()->getAttribute('editor')->getFrontend()->getValue($_product) ?></p>
    <p><span class="attribute_first">Indexing Info:</span> <?php echo $_product->getResource()->getAttribute('indexing_info')->getFrontend()->getValue($_product) ?></p>
    <p><span class="attribute_first">Scope of Journal:</span> <?php echo $_product->getResource()->getAttribute('scope_of_journal')->getFrontend()->getValue($_product) ?></p>

    <p><span class="attribute_first">Purchasing Form:</span> <a href="<?php echo $_product->getResource()->getAttribute('purchasing_form')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Download Here</a></p>
    <p><span class="attribute_first">Download Product Flyer:</span> <a href="<?php echo $_product->getResource()->getAttribute('product_flyer')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Download Here</a></p> 
    <p><span class="attribute_first">JSIS Homepage:</span> <a href="<?php echo $_product->getResource()->getAttribute('jsis')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Click Here</a></p>
    <p><span class="attribute_first">Recommend to Librarian:</span> <a href="<?php echo $_product->getResource()->getAttribute('recommend_to_librarian')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Click Here</a></p> 

    <?php echo $this->getChildHtml('alert_urls') ?>
    <?php echo $this->getChildHtml('product_type_data') ?>
    <?php echo $this->getTierPriceHtml() ?>
    <?php echo $this->getChildHtml('extrahint') ?>
    </div>

    <?php }
    else { ?>

    <div class="attribute_page">
    <p><span class="attribute_first">Author:</span> <?php echo $_product->getResource()->getAttribute('author')->getFrontend()->getValue($_product) ?></p>
    <p><span class="attribute_first">Translation:</span> <?php echo $_product->getResource()->getAttribute('translation')->getFrontend()->getValue($_product) ?></p>
    <p><span class="attribute_first">Cover:</span> <?php echo $_product->getResource()->getAttribute('cover')->getFrontend()->getValue($_product) ?></p>
    <p><span class="attribute_first">Google Books Preview:</span> <a href="<?php echo $_product->getResource()->getAttribute('google_preview')->getFrontend()->getValue($_product) ?>" target="_blank" rel="nofollow">Click Here</a></p>

    <?php echo $this->getChildHtml('alert_urls') ?>
    <?php echo $this->getChildHtml('product_type_data') ?>
    <?php echo $this->getTierPriceHtml() ?>
    <?php echo $this->getChildHtml('extrahint') ?>
    </div>

    <?php } ?> 
```

# facebook - friends.getAppUsers - 错误代码：2500

> ID：13859526
> 
> 赞同：-1
> 
> 时间：2012-12-13T12:06:45.777
> 
> 标签：facebook, facebook-graph-api

在我的应用程序中，我试图显示使用该应用程序登录的人的个人资料图片和朋友的姓名。但是，发生错误

```
FB._callbacks.__gcb1({"error":{"message":"Unknown path components: \/friends.getAppUsers","type":"OAuthException","code":2500}}); 
```

我的代码是：

```
function loadFriends() {
//get array of friends
FB.api('/me/friends.getAppUsers', function (response) {
    console.log(response);
    var divContainer = $('.facebook-friends');
    var html = "";
    for (i = 0; i < response.data.length; i = i + 4) {
    // code to bind profile pic of friends using the app and their names
  }
 });
} 
```

我该如何解决这个问题？请帮忙。

当我将“friends.getAppUsers”更改为“friends”时，此代码有效。我得到所有朋友的个人资料照片和姓名。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:49:40.190

Friends.getAppUsers 是旧的、不推荐使用的、不受支持的 API 中的方法的名称

这里有两个答案（[Facebook 'Friends.getAppUsers' using Graph API](http://facebook.stackoverflow.com/questions/2785093/facebook-friends-getappusers-using-graph-api)）展示了如何在 Graph Api 或 FQL 中获取相同的数据

`/me/friends?fields=X,Y,Z,installed`将返回您需要的任何字段和一个额外的字段，`installed`告诉您用户是否已经授权您的应用程序

# c++ - 死去的兔子的 C++ 程序

> ID：13859527
> 
> 赞同：1
> 
> 时间：2012-12-13T12:06:53.497
> 
> 标签：c++, loops, recursion, fibonacci

这是我的任务：

一对刚出生的兔子（一公一母）被放在一块田地里。兔子可以在一个月大的时候交配，所以在第二个月末，每对兔子都会生出两对新兔子，然后死去。

注：第 0 个月有 0 对兔子。第 1 个月，有 1 对兔子。

1.  编写一个程序 - 使用 while 循环 - 从用户那里获取月数，并在该月末打印兔子对的数量。
2.  在同一个 cpp 文件中，编写一个递归函数 rabbits()，它将月数作为输入，并返回该月末的兔子对数。
3.  在主程序中，使用用户输入的数字调用函数 rabbits()。输出这两个计算（即您使用循环获得的计算和递归函数返回的计算）并查看它们是否相等。

这就是我自己到目前为止所得到的。（我的程序在使用高于 3 的数字时崩溃。基本上我想知道我是否在回答这个问题。

```
#include < iostream >

using namespace std;

int rabbits(int month); //declaring function

//begin program

int main ()
{
    //defining variables
    int  month, counter = 0, rab_now = 0, rab_lastmonth = 1, rab_twomonthsago = 0;
    cout << "Please enter a month.";
    cin >> month;

    //start loop 
    while (counter <= month - 1)
    {
        rab_now = rab_lastmonth + (2*rab_twomonthsago); //doubles the birthrate of the rabbits
        rab_twomonthsago = rab_lastmonth;
        rab_lastmonth = rab_now -rab_lastmonth; //accounts for the death of parent rabbits
        counter++;
    }

    cout << "According to the while loop, there are " << rab_now << " pair(s) of rabbits at the end of month " << counter << endl;
    cout<< "According to the recursive function, there are "<< rabbits(month)<<" pair(s) of rabbits at the end of month "<<counter<<endl;

    return 0;
}

int rabbits(int month)
{
    if (month==0)
    {
        return 0;
    }
    else if (month==1)
    {
        return 1;
    }
    else if (month==2) // so as not to double 0 in the else below.
    {
        return 2;
    }
    else
    {
        return rabbits((month-2)*2); //since the population doubles every second month
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:11:53.787

看起来这溢出了第 4 个月的堆栈。该行

```
return rabbits((month-2)*2); 
```

意味着调用`rabbits(4)`将导致对`rabbits(4)`. 每次调用都会消耗少量的堆栈，并且会一直持续到堆栈最终溢出。

你的意思是使用

```
return 2 * rabbits(month-2); 
```

而不是在这里？这与行尾的注释更一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T15:09:28.517

你的意思是说

`return fibonacci(n-1) + fibonacci(n-2);`

# android - GreenDao 在反序列化时重置 daoSession

> ID：13859528
> 
> 赞同：0
> 
> 时间：2012-12-13T12:07:00.553
> 
> 标签：android, orm, greendao

我使用序列化，但是当我反序列化一个对象并尝试解析一个关系时，我捕获了这个异常：

*实体与 DAO 上下文分离*

我认为因为 daoSession 和 myDao 是瞬态的，并且在序列化时无效。

如何安全地重置 daoSession 和 myDao？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:18:33.857

当你有数据库时，为什么要序列化一个对象？写入/读取数据库比序列化快得多。

如果您想将对象传递给另一个活动，只需传递 id 并使用 greenDAO 加载对象。这是超快的，因为它大多数时候都是地图查找。

如果你真的需要这样做，那么在你反序列化你的对象之后，你可以调用一个名为 __setDaoSession 的非官方支持的方法。但是，我们不保证这种方法会永远存在。

# prestashop - 在 opc 订单上创建地址的错误 (Prestashop 1.5)

> ID：13859530
> 
> 赞同：0
> 
> 时间：2012-12-13T12:07:01.753
> 
> 标签：prestashop

在 Prestashop 1.5 上，当我在单页结帐订单上创建客户时

我把所有数据都放在交货字段上，好吧。

当我需要另一个发票地址时，我被点击了复选框。

如果我错过了发票地址的一些数据并且我提交了这个 Prestashop 不会向我显示未填写数据的错误，显示一个 ajax 错误“无法保存地址”，但客户和地址已创建！

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:08:44.133

我不认为这提供了足够的信息。您需要告诉我们页面上的错误。

请添加define('_PS_MODE_DEV_', true); 在 /config/defines.inc.php

这应该会告诉您更多要使用的信息。

您还可以在 Advanced Parameters > Performance 中更改首选项

此外，请检查此问题是否在所有浏览器上仍然存在。

# asp.net - 如何访问另一个站点在 Web 服务中设置的会话/Cookie：

> ID：13859533
> 
> 赞同：0
> 
> 时间：2012-12-13T12:07:06.663
> 
> 标签：asp.net, web-services

我有一个客户端应用程序，它将调用 Web 方法并传递两个值（订单和金额）。Web 方法将设置 Session/Cookie 中的值。现在客户端应用程序将重定向到其他网站，该网站应该能够通过 Session/Cookie 获取订单和金额值。由于安全问题，我不能将其用作查询字符串。请帮助我找到适当的解决方案。Web服务中的代码如下：

```
 [WebMethod(EnableSession = true,Description="SetValues")]
    public void CallService(string orderNumber, double amount)
    {
        if (orderNumber != null && orderNumber != string.Empty)
        {               
          Context.Session["OrderID"] = orderNumber;
          Context.Session["Amount"] = amount; //Tried Session but did no work            
         //Tried Setting the value in Cookie 
          HttpCookie OrderID = new HttpCookie("OrderID",orderNumber);
          HttpCookie Amount = new HttpCookie("Amount", amount.ToString());
          OrderID.Expires = DateTime.Now.AddHours(3);
          Amount.Expires = DateTime.Now.AddHours(3);
          Context.Response.SetCookie(Amount);
          Context.Response.SetCookie(OrderID);
        }
} 
```

//从Cookie中获取值的代码

```
 Service.ServiceAPISoapClient e1 = new Service.ServiceAPISoapClient();           
           e1.CallEISService("12e", 121);
 string amount= Request.Cookies["Amount"] != null?  Request.Cookies["Amount"].Value:""; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:10:16.077

Cookie 始终绑定到单个域。出于安全原因，您不能在任何其他域中使用您的 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:15:42.087

通常要将信息从一个站点发送到另一个站点，所有人都使用表格...

将两个隐藏控件放入一个窗体中。然后在提交表单时，您可以从这些控件中读取值...

# c++ - 提升 C++ 单元测试代码覆盖率 TeamCity

> ID：13859537
> 
> 赞同：5
> 
> 时间：2012-12-13T12:07:26.423
> 
> 标签：c++, boost, teamcity, code-coverage

请原谅可能看起来是新手的问题。我在网上搜索了一段时间没有结果。

是否有可能使用 Boost C++ 单元测试框架获得 TeamCity 的代码覆盖率，以及如何在 Teamcity 中考虑这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:56:05.593

Google 建议 Boost 不提供代码覆盖率。[相反，人们通常使用lcov](http://ltp.sourceforge.net/coverage/lcov.php)生成覆盖率统计信息（[另请参阅](http://ltp.sourceforge.net/coverage/lcov.php)）。lcov 的一个重要特性是您可以[生成 HTML 格式](http://manpages.ubuntu.com/manpages/gutsy/man1/genhtml.1.html)的代码覆盖率统计报告。

令我们高兴的是，TeamCity 默认配置为在您的构建历史记录中创建一个带有“代码覆盖率”部分的“报告”选项卡。（您可以通过浏览到`Administration`->来验证这一点`Report Tabs`。）要利用这一点，您必须为 TeamCity 提供包含覆盖 HTML 的构建工件。

1.  在 TeamCity 中，浏览到您在其中进行测试的配置/模板
2.  浏览到构建配置的“常规设置”部分
3.  在*工件*文本框中，输入以下内容：

    `$PATH_TO_LCOV_OUTPUT_DIR=>coverage.zip`

TeamCity 将在工件中查找`index.html`文件`coverage.zip`并将其显示为报告。

# javascript - 左填充字符串的最简单内联方法

> ID：13859538
> 
> 赞同：53
> 
> 时间：2012-12-13T12:07:27.667
> 
> 标签：javascript, string

> **可能重复：**
> [是否有 JavaScript 函数可以填充字符串以达到确定的长度？](https://stackoverflow.com/questions/2686855/is-there-a-javascript-function-that-can-pad-a-string-to-get-to-a-determined-leng)

在javascript中左填充字符串的最简单方法是什么？

我正在寻找一个等效于`mystr.lpad("0", 4)`: for will `mystr='45'`return的内联表达式`0045`。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-12-13T14:31:18.237

找到了一个简单的单行解决方案：

```
("0000" + n).slice(-4) 
```

如果字符串和填充在变量中，您将拥有：

```
mystr = '45'
pad = '0000'
(pad + mystr).slice(-pad.length) 
```

[在这里](https://stackoverflow.com/a/9744576/959570)找到答案，感谢@dani-p。感谢@profitehlolz。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-13T12:09:22.933

```
function pad(value, length) {
    return (value.toString().length < length) ? pad("0"+value, length):value;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-13T12:09:34.067

如下所示：

```
String.prototype.lpad = function(padString, length) {
    var str = this;
    while (str.length < length)
        str = padString + str;
    return str;
}
console.log('45'.lpad('0', 4)); // "0045" 
```

# xslt - Sitecore：如何将一组“字段”添加到渲染中

> ID：13859540
> 
> 赞同：2
> 
> 时间：2012-12-13T12:07:30.553
> 
> 标签：xslt, sitecore, render

在 Sitecore 中，我将如何向渲染 (.xslt) 添加几个字段？

*   更改渲染的“模板”，使其不再是正确的渲染。

目标是创建一个渲染，用户可以在页面编辑器中添加一个占位符。

编辑：目前我正在尝试使用子布局（.ascx）进行相同的操作 - 子布局是（..sublayout）的模板，在“参数模板”字段中添加了“自定义”模板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:16:48.903

查看 SDN 上的[Presentation Component XSL Reference](http://sdn.sitecore.net/Reference/Sitecore%206/Presentation%20Component%20XSL%20Reference.aspx)。

如果您正在更改模板，您还需要更改渲染控件（XSLT 或 ASCX，具体取决于它是渲染还是子布局）以显示您添加到模板的新字段。

例如，如果您将类型为“单行文本”的名为“summary”的字段添加到模板，那么您需要将以下内容添加到 XSLT

```
<sc:text field="summary"/> 
```

第 4.1 节列出了不同的字段类型。

如果您使用的是 ascx 控件，那么

```
<sc:FieldRenderer ID="scSummary" FieldName="Summary" runat="server" /> 
```

仅将字段添加到模板不会导致它出现在站点上（当然，除非您编写了渲染/子布局来完全做到这一点）。

# android - Windows PC 作为 USB 主机通过 USB 与 Android 设备通信

> ID：13859541
> 
> 赞同：5
> 
> 时间：2012-12-13T12:07:32.143
> 
> 标签：android, windows, usb, winusb

我想通过 USB 将数据（以编程方式）从 Android 应用程序传输到 Windows PC 上的服务器。我在网上搜索了超过 3-4 天，但找不到任何示例代码等。

有没有办法在 Java、C# 等中实现这一点？我已经通过 adb 建立了连接，但 adb 不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:13:46.070

将 rxtx 用于 pc 端（[http://rxtx.qbang.org/wiki/index.php/Main_Page](http://rxtx.qbang.org/wiki/index.php/Main_Page)）并使用 android usb api（[http://developer.android.com/guide/topics/connectivity/usb/accessory。 html](http://developer.android.com/guide/topics/connectivity/usb/accessory.html) ) 用于安装设备 USB 驱动程序后的 android 端

# javascript - 在 nodeJS/JavaScript 中连接字符串的快速方法

> ID：13859543
> 
> 赞同：62
> 
> 时间：2012-12-13T12:07:34.593
> 
> 标签：javascript, string, node.js, concatenation

我知道做类似的事情

```
var a = "hello";
a += " world"; 
```

它相对非常慢，因为浏览器在`O(n)`. 在不安装新库的情况下，有没有更快的方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-14T00:31:58.840

这个问题已经回答了，但是当我第一次看到它时，我想到了 NodeJS Buffer。但它比 + 慢得多，因此在字符串连接中没有什么比 + 更快的了。

**使用以下代码进行测试：**

```
function a(){
    var s = "hello";
    var p = "world";
    s = s + p;
    return s;
}

function b(){
    var s = new Buffer("hello");
    var p = new Buffer("world");
    s = Buffer.concat([s,p]);
    return s;
}

var times = 100000;

var t1 = new Date();
for( var i = 0; i < times; i++){
    a();
}

var t2 = new Date();
console.log("Normal took: " + (t2-t1) + " ms.");
for ( var i = 0; i < times; i++){
    b();
}

var t3 = new Date();

console.log("Buffer took: " + (t3-t2) + " ms."); 
```

**输出：**

```
Normal took: 4 ms.
Buffer took: 458 ms. 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-13T12:15:17.490

JavaScript 中实际上没有任何其他方法可以连接字符串。
理论上你可以使用`.concat()`，但这比仅仅**[慢](http://jsperf.com/string-concat-plus-vs-native)**`+`

库通常比原生 JavaScript 慢，尤其是在字符串连接或数值操作等基本操作上。

简单地说：`+`是最快的。

# iphone - 我应该使用 self.tableView 还是单独使用 tableView？

> ID：13859544
> 
> 赞同：1
> 
> 时间：2012-12-13T12:07:45.810
> 
> 标签：iphone, objective-c, ios, uitableview

> **可能重复：**
> [_ 和 self 之间的差异。在 Objective-C 中](https://stackoverflow.com/questions/10333495/difference-beetween-and-self-in-objective-c)

我应该使用 self.tableView 还是单独使用 tableView。

在我的代码中，我注意到两者

```
[self.view addSubview:self.tableView]; 
```

和

```
[self.view addSubview:tableView]; 
```

两者都有效。我的 tableView 添加了 IB，并且设置了委托和数据源和插座。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:09:59.027

如果您要声明您的表而不是使其属性像

```
IBOutlet UITableView *table; 
```

然后你可以访问你的tableView

```
[self.view addSubView:tableView]; 
```

如果你正在设置它的 getter 和 setter 属性，那么你可以调用 using`self.table`

```
@property(nonatomic,retain)IBOutlet UITableView *table; 
```

然后你可以通过

```
 [self.view addSubView:self.table]; 
```

有关更多信息，您可以阅读[UITableViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:58:30.873

只需添加到上面的答案

如果您的表是一个属性，那么最好总是使用

```
[self.view addSubview:self.tableView]; 
```

这样做的一个优点是，当合成为属性时，会为其生成访问器，而在另一种方法中则不会发生这种情况。如果属性设置为保留，则保留和释放将由访问者完成。

根据个人经验，我建议您至少可以避免内存访问违规。

# asp.net - MVC4 成员资格 GETALLUSERS()

> ID：13859545
> 
> 赞同：0
> 
> 时间：2012-12-13T12:07:48.633
> 
> 标签：asp.net, membership

我对 ASP.NET 完全陌生，并且在理解 Membership.GetAllUsers 的工作方式方面存在很大问题。

目前我正在使用 MVC 4 项目。所以，我有一个任务来制作用户表和他们的角色，但我不知道如何做到这一点。我知道这种愚蠢的情况，但我真的需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:51:42.090

以防万一有人提出同样的问题。要在不将用户绑定到任何组件的情况下操作用户，这非常简单：

首先是控制器，我们获取所有用户：

```
public class UserController : Controller
{
    //
    // GET: /Admin/User/

    public ActionResult Index()
    {
        return View(Membership.GetAllUsers());
    }

} 
```

请注意，如果您有太多用户，这可能会成为性能问题，我的意思是一次性检索所有内容而无需过滤或分页。

然后在视图中只对集合进行交互，对于每个用户，只需角色并通过它们进行交互：

```
@model MembershipUserCollection

@{
    ViewBag.Title = "Index";
}

@foreach (MembershipUser user in Model)
{
    var roles = Roles.GetRolesForUser(user.UserName);
     <p>
         @user.UserName
         <br />
            @foreach (var role in roles)
            {
                <span>@role</span>, 
            }
      </p>
} 
```

# sequence - 如何使用隐马尔可夫模型进行未来预测

> ID：13859557
> 
> 赞同：4
> 
> 时间：2012-12-13T12:08:16.267
> 
> 标签：sequence, prediction, hidden-markov-models

我有许多可变长度的序列。对于这些，我想训练一个隐马尔可夫模型，稍后我想用它来预测（部分）序列的可能延续。到目前为止，我已经找到了两种使用 HMM 预测未来的方法：

1）幻觉延续并获得该延续序列的可能性。选择可能性最高的一个作为您的预测。此方法需要明确了解连接的可能值。

2）对（部分）序列使用维特比算法来获得最可能的隐藏状态序列。取该序列中最后一个隐藏状态的发射分布并预测例如该分布的平均值（通常是高斯分布）。

现在我的问题是：还有其他可能更原则性的方法来使用 HMM 预测未来吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-17T11:11:32.817

HMM 中的马尔可夫假设表明，时间 T+1 的状态独立于 T 之前的所有状态，以 T 为条件。

您的选项 2 接近我的建议，只是您使用的是对最后一个状态的最大似然分配。相反，计算序列中最后一项的隐藏状态的分布。这相当于在维特比算法中用“和”替换“最大值”。（参见[https://www.coursera.org/course/pgm](https://www.coursera.org/course/pgm)并搜索“sum-product”算法，也称为信念传播）。

然后，为了对未来进行抽样，你首先要对最后一个状态进行抽样，给定它的分布。然后使用转换矩阵对下一个隐藏状态进行采样并重复恶心。由于在序列中的最后一点之后没有实际观察结果，因此您正在从马尔可夫链中采样。鉴于您对部分序列的了解，这将为您提供未来的样本。这与 Viterbi 不同的原因是，即使是最可能分配给部分分配的隐藏变量的可能性也很低。通过使用最后一个状态的整个分布，您可以更好地估计以下（未观察到的未来）状态。

# php - 在 fetch_assoc 之前，mysql 中有多少行？

> ID：13859559
> 
> 赞同：4
> 
> 时间：2012-12-13T12:08:20.197
> 
> 标签：php, mysqli

我通过选择从 mysql 获取一些数据。

```
$result = mysqli_query($cxn, $query); 
```

然后我通过它

```
if ($result!= false) {
    while ($row = mysqli_fetch_assoc($result)) {
        do_stuff();
    }
} 
```

`while`如果 $result 中有不止一行，我想做的是在 ONLY 之前添加一行。

我知道我可以`$row`先创建一个数组，然后计算它们，但这会破坏`while`.

问题：有没有办法找出 mysqli_fetch_assoc 在不运行两次的情况下会生成多少行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T12:12:39.227

你应该检查这个功能： http: [//php.net/mysqli_num_rows](http://php.net/mysqli_num_rows)

您可以像这样使用它来检查结果的数量

```
if (mysqli_num_rows($result))
{
..
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:13:24.063

使用[http://php.net/mysqli_num_rows](http://php.net/mysqli_num_rows)返回结果中的行数

```
if(mysqli_num_rows($result) > 1) 
```

# vba - 如何从字母数字文本中提取数字？

> ID：13859560
> 
> 赞同：0
> 
> 时间：2012-12-13T12:08:21.383
> 
> 标签：vba, excel

我在 excel 中的字符串可以是 213221-sddc 或 232323/scdscsd 或数字和字符之间的任何分隔符......我怎样才能从这个文本中只提取数字？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T14:05:36.077

使用正则表达式。我已将 strNoAlpha 转换为 Double，但如果需要，这也可以是字符串。

```
Dim str As String, strNoAlpha As Double

str = "213221-sddc"
With CreateObject("vbscript.regexp")
    .Pattern = "[^\d]+"
    .Global = True
    strNoAlpha = Trim(.Replace(str, vbNullString))
End With 
```

或作为 UDF：

```
Function removeAlpha(rng As Range) As Double

    If (rng.Count <> 1) Then
        removeAlpha = "Only select one cell"
        Exit Function
    End If

    Dim str As String

    str = rng.Value2

    With CreateObject("vbscript.regexp")
        .Pattern = "[^\d]+"
        .Global = True
        removeAlpha = Trim(.Replace(str, vbNullString))
    End With

End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:56:46.103

这只是一个开始，您可以从一个范围（根据图像）读取所有字母数字文本，然后使用[Dave 和 Richie的](http://www.ozgrid.com/forum/showthread.php?t=18185)[**上述功能**](http://www.ozgrid.com/forum/showthread.php?t=18185)

```
Option Explicit

Sub TestRange()
Dim numberArray As Variant
Dim i As Integer
Dim strTemp As String

    numberArray = Application.Transpose(Sheets(1).Range("B4:B11"))

    For i = LBound(numberArray) To UBound(numberArray)
        strTemp = numberArray(i)
        numberArray(i) = ExtractNumber(strTemp) '-- **You use above mentioned function**
    Next i

'Output the processed array into the Sheet.
Sheets(1).Range("C4").Resize(UBound(numberArray), _
LBound(numberArray)) = Application.Transpose(numberArray)

End Sub 
```

输出：

![在此处输入图像描述](../Images/cfbed98453a30c24f8d16d68fe97b503.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T19:50:39.060

**测试：**

```
Public Sub AlphaNumericTest()

 Dim AlphaNumericStr As String
 AlphaNumericStr = "A100"

 Dim SeqStartNum As Double, SeqStartAlpha As String
 SeqStartNum = NumericBreakdown(AlphaNumericStr)
 SeqStartAlpha = AlphaBreakdown(AlphaNumericStr)
 Debug.Print "Seq Alpha = " & SeqStartAlpha
 Debug.Print "Seq Num = " & SeqStartNum

End Sub 
```

**Alpha 部分的功能：**

```
Public Function AlphaBreakdown(str As String) As String
 With CreateObject("vbscript.regexp")
  .Pattern = "[^\D]+"
  .Global = True
  AlphaBreakdown = Trim(.Replace(str, vbNullString))
  Debug.Print "Alpha = " & AlphaBreakdown
 End With
End Function 
```

**数字部分的功能：**

```
Public Function NumericBreakdown(str As String) As Double
 With CreateObject("vbscript.regexp")
  .Pattern = "[^\d]+"
  .Global = True
  NumericBreakdown = Trim(.Replace(str, vbNullString))
  Debug.Print "Numeric = " & NumericBreakdown
 End With
End Function 
```

# c# - 设置断点时 Watin Span 的不同结果

> ID：13859566
> 
> 赞同：1
> 
> 时间：2012-12-13T12:08:52.800
> 
> 标签：c#, watin

这是我正在处理的代码片段

```
if (!(strGCID.Substring(0, 3) == "BBP"))
{
    string strDate;

    Span spn = ie.Span(Find.ById("detail_page_section_1_section_b"));
    for (int x = 1; x < 12; x++)
    {
        strDate = spn.TableCells[x].Text;
        if (strDate.IndexOf("AM") > 0 || strDate.IndexOf("PM") > 0)
        {
            txtPurchaseDate.Text = DateTime.Parse(strDate).ToString("MM/dd/yyyy");
            break;
        }
    }
} 
```

基本上，如果我在以“strDate = spn.Table”开头的行设置了一个断点，我的程序实际上会按照它应该的方式工作，并且我会在 span 块中找到数据。如果我删除断点，我会得到一个数组的索引错误，我尝试通过表格单元格查找日期。我一直盯着代码，不知道为什么会发生这种情况。在这一点上，我认为最简单的事情就是不要费心在页面上查找日期。问题是，我没有看到什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:16:06.397

您可能需要调用 WaitUntilExists...

```
Span spn = ie.Span(Find.ById("detail_page_section_1_section_b"));
spn.WaitUntilExists();
for (... 
```

！

# android - 如何在我的谷歌上嵌入转弯导航

> ID：13859568
> 
> 赞同：0
> 
> 时间：2012-12-13T12:08:58.170
> 
> 标签：android, google-maps

我想在我的 android 应用程序中嵌入轮流导航。请给我一个教程或如何做到这一点的想法。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-25T07:59:43.657

如果您不固定使用谷歌地图，您可以使用基于 OpenStreetMap（地图的维基百科版本）的 SDK

有几个不错的 SDK 提供者：

*   [skobbler](http://www.skobbler.com/)（现为 Telenav）有一个 SDK，它能够在您的 Android 手机上通过轮流导航来渲染地图和显示轮流。它还支持离线模式。[在这里](http://developer.skobbler.com)查看更多
*   [OsmSharp](http://www.osmsharp.com/)还进行地图渲染和轮流导航。[你可以从github](https://github.com/xivk/OsmSharp)拉取他们的代码
*   [MapQuest](http://www.mapquest.com/)有一个不错的 Android[地图和路由引擎](http://developer.mapquest.com/web/products/featured/android-maps-api)。我认为您也可以将他们的路由服务与 Mapbox 地图一起使用（[将此](https://stackoverflow.com/questions/16300866/routing-between-points-with-mapbox)作为起点）。我不认为他们可以做离线模式
*   [Cloudmade](http://cloudmade.com/)有一个适用于 Android 的[导航 SDK](http://cloudmade.com/products/nav-sdk)。他们的文档显示了它是如何实现的，但我找不到快速下载 SDK 和示例项目的方法

作为参考，您可以查看 OSM[框架列表](http://wiki.openstreetmap.org/wiki/Frameworks)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-16T16:34:28.210

我认为没有办法将转向指令嵌入到我的应用程序中，但我完全错了。Google Maps API V2 实际上确实提供了路线指示。查看 Google 的[文档](https://developers.google.com/maps/documentation/directions/#DirectionsSteps)。

我使用[这个库](https://github.com/akexorcist/Android-GoogleDirectionAndPlaceLibrary)中给出的代码来获取基本的路由信息​​。然后，我添加了以下方法来`GoogleDirection.java`返回转弯指令列表：

```
// getInstructions returns a list of step-by-step instruction Strings with HTML formatting
public ArrayList<String> getInstructions(Document doc) {
    ArrayList<String > instructions = new ArrayList<String>();
    NodeList stepNodes = doc.getElementsByTagName("step");
    if (stepNodes.getLength() > 0) {
        for (int i = 0; i < stepNodes.getLength(); i++) {
            Node currentStepNode = stepNodes.item(i);
            NodeList currentStepNodeChildren = currentStepNode.getChildNodes();
            Node currentStepInstruction = currentStepNodeChildren.item(getNodeIndex(currentStepNodeChildren, "html_instructions"));
            instructions.add(currentStepInstruction.getTextContent());
        }
    }
    return instructions;
} 
```

这种方法不提供实时更新来告诉您何时到达新的转折点，但它运作良好并且可以满足我的需求。我将我的`getInstructions`方法与`instructionsToString`辅助方法一起使用，该方法将指令与 HTML 换行符连接起来。如果您有兴趣，该代码就[在这里。](https://gist.github.com/VinceFior/7d9b9ccd9c7dbf658eb1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T12:23:21.303

您可以在 Activity 中使用此代码：

```
double latitudeDestination = 52.377028; // or some other location
double longitudeDestination = 4.892421; // or some other location
String requestedMode = "walking" // or bike or car
String mode = "";
if(requestedMode.equals("walking")) {
  mode = "&mode=w";
} else if(requestedMode.equals("bike")) {
  mode = "&mode=b";
} else if(requestedMode.equals("car")) {
  mode = "&mode=c";
}

Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
Uri.parse(String.format("google.navigation:ll=%s,%s%s", latitudeDestination, longitudeDestination, mode)));
startActivity(intent); 
```

# c# - 更新对象属性 - 递减

> ID：13859569
> 
> 赞同：2
> 
> 时间：2012-12-13T12:09:03.703
> 
> 标签：c#, asp.net, set

我有一个对象列表（发票）。这些对象有一个 qty 属性。我有一个产品退货表格，其中包含退回产品的数量。

提交退货行时。我用提交的行填充了一个网格视图，以便在提交整个退货表单之前如果需要可以输入另一部分。

提交该行时，我需要从对象中的发票数量中减去退货数量......我已经使用以下代码完成了这个......

```
returnInvoices[GridView3.SelectedIndex].OrderLineQty = returnInvoices[GridView3.SelectedIndex].OrderLineQty - Convert.ToDouble(txtReturnProdQty.Text, userCulture); 
```

`returnInvoices`是对的引用`List<Invoice>`并且`OrderLineQty`是`double`数据类型。

我只是想知道是否有更好（更整洁？）的方法来减去发票数量？

减去的原因是因为如果发票行大于1但零件是序列化的，则必须一次输入一个零件，所以我需要在将它们添加到退货单时减少数量，以便它们不能过度回报，如果这是有道理的！

请温柔点...我是新手，还在学习 c#/OOP！

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:19:29.660

使用[-=](http://msdn.microsoft.com/en-us/library/2y9zhhx1%28v=vs.110%29.aspx)运算符：

```
returnInvoices[GridView3.SelectedIndex].OrderLineQty -= Convert.ToDouble(txtReturnProdQty.Text, userCulture); 
```

有关所有可用运算符的列表，请参阅[http://msdn.microsoft.com/en-us/library/6a71f45d(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/6a71f45d(v=vs.110).aspx)。

# xcode - 刷新表格后在 UITableView 中插入新行

> ID：13859570
> 
> 赞同：0
> 
> 时间：2012-12-13T12:09:04.660
> 
> 标签：xcode, uitableview, pull-to-refresh

这是我在 ViewController 中的简单 viewDidLoad 方法和 UITableView 委托：

```
import "HomeViewController.h"
import "AFNetworking.h"
import "SVPullToRefresh.h"

- (void)viewDidLoad
    {
        [super viewDidLoad];
        [self parseJsonMethod];
        items = [[NSMutableArray alloc] init]; // UPDATED CODE
        items2 = [[NSMutableArray alloc] init]; // UPDATED CODE

        [table addPullToRefreshWithActionHandler:^{
        [self parseJsonMethod]; // <--- what's the number of NEW items after refreshing?
    }];
}

- (void)parseJsonMethod{
    // code to parse JSON file from the net ---> here I get NSMutableArray *items 

NSURLRequest *requestJSON = [NSURLRequest requestWithURL:urlJSON];
AFJSONRequestOperation *operationJSON = [AFJSONRequestOperation
                                           JSONRequestOperationWithRequest:requestJSON
                                           success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                                               NSMutableArray *results = [JSON valueForKey:@"results"];

                                               // UPDATED CODE

                                               for (id obj in [results valueForKey:@"value"]) {
                                                   if (![items containsObject:obj]) {
                                                       [items addObject:obj];
                                                   }
                                               }

                                               for (id obj2 in [results valueForKey:@"value2"]) {
                                                   if (![items2 containsObject:obj2]) {
                                                       [items2 addObject:obj2];
                                                   }
                                               }

                                               // END OF UPDATED CODE

                                               [table reloadData];
                                               [table scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES];
                                               [table.pullToRefreshView stopAnimating];
                                           }
                                           failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                               NSLog(@"%@", [error userInfo]);
                                           }];
  [operationJSON start];
  [table reloadData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [items count]; // <--- items is the NSMutableArray parsed from JSON file on the net: HERE I HAVE THE PROBLEM, ITS ALWAYS 10!
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:
                UITableViewCellStyleSubtitle reuseIdentifier:@"Cell"];
    }

      cell.textLabel.text = [NSString stringWithFormat:@"%@",[items objectAtIndex:indexPath.row]];
      cell.detailTextLabel.text = [NSString stringWithFormat:@"%@",[items2 objectAtIndex:indexPath.row]];

    return cell;
} 
```

如您所见，我已经实现了 SVPullToRefresh 类以在拉表后刷新数据，这是完美的：拉后我可以看到新数据但在相同的行上（刷新前后的行数为 10）。我想在拉表和新解析后添加新行，并用旧数据维护旧行（每次 10 + 新项目 + ...）。有一种简单的方法可以做到这一点吗？或者至少承认新项目的数量？也许实现 insertRowsAtIndexPaths 委托？请帮我。

**更新：**查看新编辑的代码，我已经声明了以前的项目，但仍然存在一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:29:38.300

如果给定新行，您正在做的事情会添加新行。您的 items 数组是这里的问题。无论您从 JSON 源获得什么数据，以及将其添加到 items 数组中，都是问题所在。

如果您需要更多帮助，请向我们展示您的 JSON 代码以及最初和重新加载时填充 items 数组的位置。如果项目中没有新行，它们就不会出现在表中。

**更新**

在这条线上：`items = [results valueForKey:@"value"]; // (initial number of items = 10)`

我会尝试这样的事情：

```
for (id obj in [results valueForKey:@"value"]) {
    if (![items containsObject:obj]) {
        [items addObject:obj];
    }
} 
```

这将检查重复的项目并将它们添加到您已有的项目中。现在，如果您的 JSON 提要返回 10 个相同的项目并且您看不到任何差异，则可能仍然存在问题。

对于超基本的，只是为了看到它的工作原理`[items addObjectsFromArray:[results valueForKey:@"value"]];`

# knockout.js - 为什么 Knockout.js 在自定义绑定设置为 false 时将 display 设置为 none

> ID：13859579
> 
> 赞同：1
> 
> 时间：2012-12-13T12:09:43.367
> 
> 标签：knockout.js

我有以下html：

```
<span class="buttonSpan" id="btnComplete" data-bind="click: completePage, btnEnabled: isBtnCompleteEnabled">complete</span> 
```

这是我的视图模型的一个尝试：

```
ko.bindingHandlers.btnEnabled = {
  init: function (element, valueAccessor) {
     var value = valueAccessor();
     $(element).toggle(ko.utils.unwrapObservable(value));
   },
   update: function (element, valueAccessor) {
      var value = valueAccessor();
      ko.utils.unwrapObservable(value) ? $(element).removeClass("buttonDisabled") :                 
       $(element).addClass("buttonDisabled");
    }
 };

 self.isBtnCompleteEnabled = ko.observable(false); 
```

CSS 在这一点上所做的就是改变 span 的颜色。

什么会导致这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:14:21.030

初始化中的这一行

```
$(element).toggle(ko.utils.unwrapObservable(value)); 
```

正在将 display: none 添加到您的元素，因为值为 false。

# javascript - 无法使 jQuery UI 对话框工作

> ID：13859585
> 
> 赞同：0
> 
> 时间：2012-12-13T12:09:58.510
> 
> 标签：javascript, jquery, jquery-ui, backbone.js, requirejs

我尝试使用 jQuery UI 库。我用[这个](https://github.com/jrburke/jqueryui-amd)插件把它做成了 AMD，并有一个简单的代码：

```
<div class="#dialog" title="Test">
    <p>Hello world!</p>
</div> 
```

我尝试在主干的渲染函数内的对话框中显示，如下所示：

```
render:function ()
        this.$el.html(companyTemplate);
        ...
        $("#dialog").dialog();
        return this;
    }, 
```

控制台中没有错误，也没有任何反应。我确实在*define()*中需要它，并在我的主页中包含适当的 css。

**UPD**自动完成工作正常，似乎与对话框有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:57:37.837

尝试

```
<div id="dialog" title="Test">
    <p>Hello world!</p>
</div> 
```

或者

```
<div class="dialog" title="Test">
    <p>Hello world!</p>
</div>

$(".dialog").dialog(); 
```

# python - python多处理消耗100％所有内核

> ID：13859586
> 
> 赞同：1
> 
> 时间：2012-12-13T12:10:04.423
> 
> 标签：python, multiprocessing

当我运行我的 python 代码时`multiprocessing`，它使用了所有 8 个内核并且我的系统挂起。我添加了以下行，但没有帮助。

```
po = multiprocessing.Pool(processes=4) 
```

递归代码如下：

```
def func(a,i):
   if (a>i):
      func(a-1,i)
      func(a-5,i)
   else print a 
```

现在可以将以上 2 个递归调用放入线程中，因为它们彼此独立。

下面是代码。

```
import multiprocessing
po = multiprocessing.Pool(processes=2)

p=bin(47)
q=bin(59)

def func(r,i):
   if( p[i]==r[i])  
    po = multiprocessing.Process(target=func, args=(2*r, i+1))
    po.start()
    po = multiprocessing.Process(target=func, args=((2*r)+1, i+1))
    po.start()

func(1,1) 
```

# mysql - mysql查询选择行组

> ID：13859587
> 
> 赞同：3
> 
> 时间：2012-12-13T12:10:10.023
> 
> 标签：mysql

我有一个简单的表，我必须从中进行选择，但是它必须是这样的：

表格示例

```
StatusID    StatusCode    BrandID    StatusName

1           1             1000       First Status
2           2             1000       Second Status
3           3             1000       Third Status
4           1             2000       First Custom Status 
```

我需要一个选择查询，其中 BrandID = 1000 来输出：

```
StatusID    StatusCode    BrandID    StatusName

1           1             1000       First Status
2           2             1000       Second Status
3           3             1000       Third Status 
```

我需要一个选择查询，其中 BrandID = 2000 来输出：

```
StatusID    StatusCode    BrandID    StatusName

4           1             2000       First Custom Status
2           2             1000       Second Status
3           3             1000       Third Status 
```

换句话说，如果 BrandID 是默认值 (1000)，我需要选择属于此 BrandID 的所有行，但是如果 BrandID 是 2000，我需要选择属于此 BrandID 的所有行 + 具有默认 BrandID 的行，如果没有 BrandID 2000 的话特定的状态码。我希望这是足够好的解释。这是我一直在研究的问题

```
SELECT  *

FROM        table

GROUP BY    StatusCode
HAVING  BrandID = 2000 
```

显然它没有按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:33:08.820

试试这个：

```
SELECT * 
FROM (SELECT * FROM statusTable 
    GROUP BY StatusCode HAVING StatusCode NOT IN (SELECT StatusCode FROM statusTable WHERE BrandID = 2000)
    UNION 
    SELECT * FROM statusTable WHERE BrandID = 2000
) AS A 
ORDER BY StatusCode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:14:14.313

这是查询

**select * from table where brandId = 1000 union select * from table where brandid = 2000**

这将打印属于这两个条件的所有记录。

# json - 在json中搜索一些数据

> ID：13859591
> 
> 赞同：0
> 
> 时间：2012-12-13T12:10:13.210
> 
> 标签：json, windows-phone-7

我想在json中搜索一些数据。我想使用的 API 不支持搜索方法。我有一个下载所有数据的想法，但这对用户来说太多了，而且数据使用成本也太高了。还有其他方法可以搜索吗？这是[API](http://api.tabloidnova.com/1/subscribe/get?api_key=259225f04f4015746b03e1bad6238eaa&format=json&channel_id=110)，用户名和密码只需使用“foo”。哦，是的，我想在 Windows Phone 7.5 中实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:24:35.990

鉴于您的情况：
- 您的应用程序想要从远程/网络源检索一些数据。
- 远程源返回比您的应用程序想要的更多。
- 远程源超出您的控制范围，无法重新配置为只返回您想要的。

处理这个问题的方法（正如我在许多其他应用程序/服务上所做的那样*）是创建您自己的“代理”服务来为您进行搜索/过滤/查询。

通过创建您自己的服务来充当应用程序和第 3 方服务之间的代理，您可以：

*   仅返回应用想要/需要的数据
*   预格式化传递给应用程序的数据
*   添加任何中间处理或过滤返回到应用程序的数据
*   随时更新对从第三方返回的数据进行格式化/处理的代码，而无需更新已安装的应用程序。

是的，托管和管理您自己的服务需要付费。具体多少以及这是否是您想要做的事情将取决于您的情况。

* 我为此提供的服务会执行诸如获取 RSS 提要、仅删除所需内容、重新格式化内容以在请求设备上显示并以应用程序易于使用的格式返回数据（通常是应用程序知道的对象，序列化为 JSON）。我还将在代理服务器上添加适当的缓存和压缩支持。

# command-line - 有数据时处理

> ID：13859595
> 
> 赞同：0
> 
> 时间：2012-12-13T12:10:21.223
> 
> 标签：command-line, time, batch-file, batch-processing

我制作了一个程序来处理文件夹中的文件。但问题是，即使文件夹中没有文件，程序也会继续运行。如果文件夹中只有文件，我如何指定程序仅运行。

我用来处理的命令是

```
for %%f in (zeos*,upuc*) do (start teqc +qc %%f) 
```

如果文件夹中没有文件，程序如何停止？是否有任何命令可以指定程序仅在有数据时处理。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:14:48.830

我认为最快/最简单的方法是

```
attrib folder\*.* | find "File not found"
if %errorlevel%==1 for %%f in (ZEOS*,UPUC*) do (START teqc +qc %%f) 
```

# android - 在Android中如何检查应用程序上次被强制关闭

> ID：13859596
> 
> 赞同：1
> 
> 时间：2012-12-13T12:10:26.263
> 
> 标签：android

有没有办法在 Android 中获取未被捕获的异常。当我的应用程序出现错误时，我想使用邮件发送日志。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:12:51.133

这是一些可以帮助您的代码。

首先创建一个类

```
import java.lang.Thread.UncaughtExceptionHandler;
import android.content.Context;
import android.content.SharedPreferences;

public class ExceptionHandler implements UncaughtExceptionHandler {

    private Context context;

    public ExceptionHandler(Context context) {
        super();
        this.context = context;

    }

    public void uncaughtException(Thread thread, Throwable ex) {
        SharedPreferences prefs = context.getSharedPreferences("Your_preference_name", Context.MODE_PRIVATE);
        prefs.edit().putBoolean("is_force_closed", true).commit();
    }

} 
```

然后在您的应用程序的主要活动中初始化此类

```
ExceptionHandler exp = new ExceptionHandler(getApplicationContext()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:13:14.967

你可以在应用正常退出时记录一些东西，然后你可以检查保存的数据来判断它是否被强制关闭。

# c# - 在 Windows 8 应用程序中播放到某个视频点

> ID：13859598
> 
> 赞同：0
> 
> 时间：2012-12-13T12:10:38.563
> 
> 标签：c#, xaml, video, windows-8, mediaelement

我正在用 C# 和 XAML 为 Windows 8 创建一个应用程序。我在带有播放和暂停按钮的媒体元素中包含了一个视频，但我想包含另一个按钮，当单击该按钮时，会使视频播放到某个点然后暂停。这可能吗？

我正在阅读[这篇文章](https://stackoverflow.com/questions/1138682/stop-video-at-specific-position-using-windows-media-player-sdk)，它正在做同样的事情，但使用的是 windows media player sdk。我对 C# 不是很了解，所以我很感激任何建议。

谢谢

**编辑**

```
//Play method

if(ispaused == true && isplaying == false)
{
  VideoPlayer.Play();
}

//Pause method

if(ispaused == false && isplaying == true)
{
  VideoPlayer.Pause();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:07:14.550

您应该像这样使用[`MediaElement.Markers`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.mediaelement.markers.aspx)属性和[`MediaElement.MarkerReached`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.mediaelement.markerreached)事件：

为事件指定事件处理程序`MarkerReached`：

```
VideoPlayer.MarkerReached += new TimelineMarkerRoutedEventHandler(VideoPlayer_MarkerReached); 
```

然后在[`TimelineMarker`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.timelinemarker.aspx)您的视频中添加：

```
VideoPlayer.Markers.Add(new TimelineMarker() {
        Time = TimeSpan.FromSeconds(30),
        Type = "ForcePause",
        Text = "Test"} ); 
```

最后将代码添加到您的事件处理程序：

```
private void VideoPlayer_MarkerReached(object sender, TimelineMarkerRoutedEventArgs e)
{
    // you can check the type if you want to be safe
    if (e.Marker.Type.Equals("ForcePause"))
    {
        VideoPlayer.Pause();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T19:19:33.077

如果您想播放从特定时间开始并工作一段时间的背景媒体播放器（例如，音频文件），那么此代码片段也可能很有用：

```
 StorageFile mediaFile = await KnownFolders.VideosLibrary.GetFileAsync(fileName);//the path
    BackgroundMediaPlayer.Current.SetFileSource(mediaFile);
    BackgroundMediaPlayer.Current.Position = TimeSpan.FromMilliseconds(3000/*enter the start time here*/);
    BackgroundMediaPlayer.Current.Play();
    await Task.Delay(TimeSpan.FromMilliseconds(10000/*for how long you want to play*/));
    BackgroundMediaPlayer.Shutdown();//stops the player 
```

# azure - 防止 Azure Blob 存储中的热链接

> ID：13859599
> 
> 赞同：10
> 
> 时间：2012-12-13T12:10:39.333
> 
> 标签：azure, azure-storage, azure-blob-storage

我对使用 Azure Blob 存储的担忧之一是热链接。

将静态内容（图像、视频、音频、大型 JS 和 CSS 文件等）放在公共容器中似乎是个好主意，但是没有什么能阻止其他网站链接这些内容并在他们的网站中使用它。因此，一些网站管理员在他们的网站上使用我的内容，会让我花钱。

一种常见的防盗链保护措施是通过`Referer`HTTP 标头进行过滤。**这如何在 Microsoft Azure Blob 存储中实现？**

显然，[在 Amazon S3 中是可能的](http://www.naveen.info/2011/03/25/amazon-s3-hotlink-prevention-with-bucket-policies/)。

我知道这对谷歌图片搜索不利，因为它无法显示我的照片，但是……我可以忍受。

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:26:51.430

Windows Azure 不支持像在 Amazon S3 中那样向 Blob 存储添加逻辑。但是对于这种特定情况，您通常会使用[SAS (Shared Access Signatures)](http://msdn.microsoft.com/nl-nl/library/windowsazure/ee393343.aspx)。

您需要将容器更改为私有访问。这意味着只有当您拥有两个密钥之一或拥有 SAS 时才能访问文件。因此，通常它会是您的 Web 服务器生成 SAS 并将其应用于图像的 URL。通过使用 SAS 签名，您可以允许在特定时间（例如 10 分钟）内访问文件，这将防止盗链。

带有 SAS 的文件的 url 如下所示：

> [https://storageaccountname.blob.core.windows.net/container/path/image.jpg?sv=2012-02-12&se=2012-11-19T19%3A25%3A32Z&sr=b&sp=r&sig=s6QIdwAGY4xC8fs4L9pK8hAGIY%2F8x58aqBcFbejYPdM%3D](https://storageaccountname.blob.core.windows.net/container/path/image.jpg?sv=2012-02-12&se=2012-11-19T19%3A25%3A32Z&sr=b&sp=r&sig=s6QIdwAGY4xC8fs4L9pK8hAGIY%2F8x58aqBcFbejYPdM%3D)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-08T01:52:35.877

与 SAS 一起，您可以使用 blob 的缓存控制标头，以最大限度地减少对 blob 存储的私有静态内容的读取操作。这可能会有所帮助 - [TechNet wiki 文章。](http://social.technet.microsoft.com/wiki/contents/articles/25528.azure-blob-storage-and-effective-use-of-cache-control-property.aspx) 请让我知道你的看法。

# scala - 如何在 Play Framework 2 中调用接受可变数量参数的模板

> ID：13859600
> 
> 赞同：7
> 
> 时间：2012-12-13T12:10:38.433
> 
> 标签：scala, playframework-2.0

Play Framework 2 模板语言非常好。然而，尽管它受到 Microsoft 的 Razor 语言的“启发”，但一个重要的设计决策却有所不同：如何“转义”为 HTML。Razor 查找 HTML 样式的标签，而 Play 2 使用某种启发式方法。

我正在尝试编写一个模板，该模板采用 HTML 的多个“部分”，并生成一个带有标题和目录的页面。我的 'structuredpage.scala.html' 看起来像这样：

```
@(title: String)(sections: Pair[String,Html]*)

@main(title){
    <nav class="page-links">
        @makeTableOfContents(sections)
    </nav>
    @for(section <- sections){
        <section id="@section._1">
            <h2>@section._1</h2>
            @section._2
        </section>
    }
} 
```

请注意，它的第二个参数是*可变数量*的部分。在 Play 模板语言中似乎*没有*办法调用它。

我创建了一个名为的辅助函数`Common.section`，如下所示：

```
 def section(title: String)(content: Html) = title -> content; 
```

我试过这个：

```
@()
@import views.Common.section

@structuredpage("Dashboard")(
    section("Latest Requests") {
        <p>Blah</p>
    },
    section("Your Details") {
        <p>Blah blah</p>
    }
) 
```

…`type mismatch; found : scala.xml.Elem required: play.api.templates.Html`在第 5 行给出，`<p>Blah</p>`即被解释为 Scala，而不是模板文档 HTML。

还有这个：

```
@()
@import views.Common.section

@structuredpage("Dashboard"){
    @section("Latest Requests") {
        <p>Blah</p>
    },
    @section("Your Details") {
        <p>Blah blah</p>
    }
} 
```

…`type mismatch; found : play.api.templates.Html required: (String, play.api.templates.Html)`在第 3 行给出，即整个外花括号块被解释为模板文档 HTML，*而不是*Scala 代码！

令人沮丧的是，它们似乎与 Play 2 官方文档中的一些代码示例没有太大不同，例如：[http ://www.playframework.org/documentation/2.0/ScalaTemplateUseCases](http://www.playframework.org/documentation/2.0/ScalaTemplateUseCases)

有任何想法吗？我正在使用 Play Framework 2.0.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:09:47.993

这就是您可能正在寻找的东西。虽然它不完全是 FP

结构化页面.scala.html

```
@(title: String)(content: scala.collection.mutable.MutableList[Pair[String, Html]] => Unit)

@main(title){
    @defining(new scala.collection.mutable.MutableList[Pair[String,Html]]()) { sections =>
        @content(sections)
        @for(section <- sections){
            <section id="@section._1">
                <h2>@section._1</h2>
                @section._2
            </section>
        }
    }
} 
```

frontpage.scala.html

```
@()

@import views.Common.section

@structuredpage("Front Page") { implicit sections =>
    @section("Section 1") {
        <h1>stuff</h1>
    }

    @section("Section 2") {
        <h1>more stuff</h1>
    }
} 
```

分段方法：

```
def section(title: String)(content: Html)(implicit sections: scala.collection.mutable.MutableList[Pair[String, Html]]) {
    sections += title -> content
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:52:41.697

我现在无法在这台机器上测试这个，但以下应该可以工作（不需要辅助方法）：

```
@()

@structuredpage("Dashboard"){
   ("Latest Requests", {
        <p>Blah</p>
    }),
   ("Your Details", {
        <p>Blah blah</p>
    })
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:16:56.917

这是一种解决方法：

```
@import views.Common.section

@sec1 = { <p>Blah</p> }

@sec2 = { <p>Blah blah</p> }

@structuredpage("Dashboard")(
    section("Latest Requests")(sec1),
    section("Your Details")(sec2)
) 
```

之前的尝试：

我认为你的愿望使它变得复杂。模板应该很简单。这是一个简单的替代方案：

index.scala.html

```
@structuredpage("Dashboard"){
    @section("Latest Requests") {
        <p>Blah</p>
    }

    @section("Your Details") {
        <p>Blah blah</p>
    }
} 
```

section.scala.html

```
@(title: String)(content: Html)

<section id="@title">
    <h2>@title</h2>
    @content
</section> 
```

结构化页面.scala.html

```
@(title: String)(sections: Html)

@main(title){
    <nav class="page-links">
        table-of-contents goes here
    </nav>
    @sections
} 
```

我提出了一个要点：[https](https://gist.github.com/4280577) ://gist.github.com/4280577 。因此，您可以查看并使用它。

# haskell - 如何从haskell中的二进制中获取char？

> ID：13859601
> 
> 赞同：2
> 
> 时间：2012-12-13T12:10:39.113
> 
> 标签：haskell, binary, char

给定一个 8 位二进制文​​件，我想得到它的 char 表示。例如：

[0,1,1,0,0,0,0,1] 我相信它是“a”的二进制表示。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:14:36.830

```
import Data.Char

ord2chr :: [Int] -> Char
ord2chr = chr . foldl (\a b -> 2*a + b) 0 
```

现在你可以试试

```
> ord2chr  [0,1,1,0,0,0,0,1]
'a' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T12:29:09.250

正如我在评论中建议的那样，这个问题可以一分为二。这是第一部分的建议，我为了 Haskellness 声明了一个`Bit`类型：

```
data Bit = Zero | One

fromBits :: (Integral a) => [Bit] -> a
fromBits bits = foldl f 0 (zip [0..] (reverse bits))
    where
      f x (_, Zero) = x
      f x (n, One) = x + 2^n 
```

那么这有什么作用呢？好吧，您的问题表明您的位列表首先具有最高有效位。我们将反向处理它，所以我们这样做`reverse bits`。然后，我们需要跟踪表示中两个不同元素的幂`reverse bits`，这就是`zip`ing with`[0..]`所做的，产生 [(0, minimum-significant-bit), (1, second-least-significant bit), .. .]。最后`foldl`使用这个对列表，辅助函数`f`将 2 的适当幂添加到累加器。

我使用`Integral`typeclass 不必选择整数类型。您可以在 8 位情况下使用`Int`，甚至。`Word8`对于更长的位列表，可以使用`Integer`任意精度（另请参见下面的 (*)）。

对于第二部分，我们可以使用[`chr`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Char.html#v%3achr)将 an 转换`Int`为`Char`，如果我们知道我们的位列表不是太大（*），`fromIntegral`可以将我们的`Integral`类型转换`a`为`Int`。

所以，你想要的可以写成：

```
convert :: [Bit] -> Char
convert = chr . fromIntegral . fromBits 
```

在你的情况下，`convert [Zero, One, One, Zero, Zero, Zero, Zero, One]`是`'a'`。

(*) 当然，如果它们是，那么转换无论如何都没有明显的意义。但这里有一点我想带回家：我们把问题分成两部分，结果证明第一部分（处理位列表）可以用一种更通用的方式来解决环境。例如，`fromBits (One:(replicate 100 Zero))`是 2^100。

# audio - 无法在文章中使用画廊和声音插件

> ID：13859604
> 
> 赞同：0
> 
> 时间：2012-12-13T12:10:43.903
> 
> 标签：audio, plugins, joomla, gallery

我现在正在开发一个 Joomla 网站，我真的需要一个画廊和一个媒体播放器作为文章和 K2 个人资料的一部分。我正在使用 Joomla 2.5.8

我已经下载了 saudioplayer 和 simple gallery 并启用了这两个插件，但是当我输入代码 {saudioplayer}filename{/saudioplayer} 和 {gallery} 相同时，它只会将文本返回给我。就像它不识别插件一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:28:52.800

我认为您在安装后忘记启用插件，请转到以下导航进行检查：

```
Extensions->plugin manager->Content - SAudioPlayer 
```

并启用它，然后检查它是否有效。

# java - 如何根据我输入的字符获取 if else 操作

> ID：13859611
> 
> 赞同：0
> 
> 时间：2012-12-13T12:11:34.933
> 
> 标签：java

我试图获得一个 if else if 语句来操作，但在使用它时出现错误，请参阅下面的程序谢谢

```
public class Info {

  public static void main(String [] args){
    Scanner input=new Scanner(System.in);
    System.out.print("Enter employee num");
    int e_num=input.nextInt();
    System.out.print("Enter employee first name");
    String e_fname=input.next();
    System.out.print("Enter employee surname");
    String e_sname=input.next();
    System.out.print("Enter employee code C or c,H or h and F or f");
    char e_code = input.next().charAt(0);

   if(e_code==F||e_code==f){
       e_code==monthly_paid;
   }            
 }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:12:50.543

我怀疑你只是在寻找*字符文字*来比较你的变量：

```
if (e_code == 'F' || e_code == 'f') 
```

（不需要间距 - 这只是为了便于阅读......）

另一方面，鉴于您有一组固定的选项，您可能需要一个开关/机箱来代替。

不过，这看起来并不理想：

```
e_code==monthly_paid; 
```

这是什么`monthly_paid`？为什么要将代表用户输入的*代码的变量更改为听起来像金额的东西？*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:27:16.493

在您的代码中存在许多问题

1.  您正在将字符文字与变量进行比较
2.  它自己的变量没有被声明。如果您编写`e_code == F`，那么编译器会将 F 视为变量而不是文字。
3.  在您`e_code==monthly_paid;`的 Java 代码中，`==`不用于分配值，您必须使用`e_code = monthly_paid;` **=**运算符来分配值。
4.  您的`monthly_paid`变量也未声明。

# facebook-graph-api - 在 Facebook API 中获取用户最近的活动（评论、分享、喜欢）

> ID：13859612
> 
> 赞同：1
> 
> 时间：2012-12-13T12:11:39.200
> 
> 标签：facebook-graph-api, facebook-fql, facebook-timeline

假设我想在我的所有帖子上获得 20 个最后的赞。我应该运行什么 FQL 查询？

我试过这个查询，但它提供了错误的排序（它按`post`日期排序，而不是按日期排序`like`）：

```
SELECT object_id FROM like WHERE post_id IN (
    SELECT post_id FROM stream WHERE source_id = me()
) LIMIT 20 
```

我需要获得某种“Twitter 时间线”功能。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T06:54:47.460

根据该[文档](https://developers.facebook.com/docs/reference/fql/like)，Facebook API FQL 不支持如何通过点赞**表**获取任何点赞的时间。

# php - 为 foreach 提供的 PHP/jQuery（自动完成）无效参数

> ID：13859613
> 
> 赞同：0
> 
> 时间：2012-12-13T12:11:46.917
> 
> 标签：php, jquery, autocomplete

我的 foreach 出现问题，说“为 foreach 提供的参数无效......”

这是我正在处理的代码：

```
 protected function jsGenerateResourcesAutocomplete(){
    $employeeNames = $this->employeeNames;
    $html = "";
    $html .= '<script>' . PHP_EOL;
    $html .= 'var employeeNames = [' . PHP_EOL;
    foreach( $employeeNames as $employeeName ){
        $html .= '"' . $employeeName->getEmployeeName() . '",' . PHP_EOL;
    }
    $html .= '];' . PHP_EOL;
    $html .= '$(function() {' . PHP_EOL;
    $html .= '$(#resource-input input:text").each(function() {' . PHP_EOL;
    $html .= '$(this).autocomplete({source: employeeNames});' . PHP_EOL;
    $html .= '})' . PHP_EOL;
    $html .= '})' . PHP_EOL;
    $html .= '</script>' . PHP_EOL;
    return $html;
} 
```

在这一行中：**foreach( $employeeNames as $employeeName ){**抛出错误。这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:15:50.797

首先请检查 $employeeNames 这是数组还是不使用

```
 is_array($employeeNames) 
```

然后执行foreach循环

# ruby - Ruby：如何推断“当前”宝石名称？

> ID：13859614
> 
> 赞同：5
> 
> 时间：2012-12-13T12:11:47.290
> 
> 标签：ruby, gem, parent, specifications

我知道以下内容可以获取 Gem 的审讯规范：

```
spec = Gem::Specification.find_by_name('my_gem') 
```

有没有办法以编程方式识别“这个”gem的名称，以便可以以可重用的方式重写上述内容？

换句话说，如何在运行时从一些正在执行的 Ruby 代码中获取父 gem 的名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T08:09:46.330

要查找当前源文件的 gem 规范（假设它是 lib 目录中的源文件）：

```
require 'rubygems'

searcher = if Gem::Specification.respond_to? :find
  # ruby 2.0
  Gem::Specification
elsif Gem.respond_to? :searcher
  # ruby 1.8/1.9
  Gem.searcher.init_gemspecs
end
spec = unless searcher.nil?
  searcher.find do |spec|
    File.fnmatch(File.join(spec.full_gem_path,'*'), __FILE__)
  end
end 
```

您可以通过`__FILE__`从您真正感兴趣的源文件中传入，或者通过检查调用者堆栈（但这可能是一个坏主意）来使其可重用。

# mysql - 导出/导入时为字段终止符设置默认值

> ID：13859619
> 
> 赞同：1
> 
> 时间：2012-12-13T12:12:24.903
> 
> 标签：mysql

从 MySQL 导出数据时，我几乎总是指定`FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'`，因为结果会在 Excel 中打开（它处理逗号分隔的值比制表符分隔的值更好）。

有没有办法（编译选项/模糊设置）`","`在使用时设置为字段终止符`INTO OUTFILE`并`LOAD DATA INFILE`避免为每个查询编写上述内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:04:35.767

在你的命令中明确从来都不是一件坏事，尤其是对于应用程序（和开发人员！）的可移植性——想象有人在你的项目上开始开发，而没有意识到它依赖于定制的 MySQL 二进制文件。

在 MySQL Community Server 的最新通用 (GA) 版本 5.5.28 中（截至撰写时），默认值被硬编码为[`sql/sql_class.cc`](http://fossies.org/dox/mysql-5.5.28/sql__class_8cc_source.html)：

```
[2074](http://fossies.org/dox/mysql-5.5.28/sql__class_8cc_source.html#l02074): static [String](http://fossies.org/dox/mysql-5.5.28/classString.html) default_line_term("\n",[default_charset_info](http://fossies.org/dox/mysql-5.5.28/my__sys_8h.html#a6fe5765f3b92d4dadad6f28e56957899));
[2075](http://fossies.org/dox/mysql-5.5.28/sql__class_8cc_source.html#l02075): static [String](http://fossies.org/dox/mysql-5.5.28/classString.html) default_escaped("\\",[default_charset_info](http://fossies.org/dox/mysql-5.5.28/my__sys_8h.html#a6fe5765f3b92d4dadad6f28e56957899));
[2076](http://fossies.org/dox/mysql-5.5.28/sql__class_8cc_source.html#l02076): static [String](http://fossies.org/dox/mysql-5.5.28/classString.html) default_field_term("\t",[default_charset_info](http://fossies.org/dox/mysql-5.5.28/my__sys_8h.html#a6fe5765f3b92d4dadad6f28e56957899)); 
```

如果您正在考虑编译自定义二进制文件，则可以创建自己的 fork。

# android - 如何衡量布局性能？

> ID：13859624
> 
> 赞同：0
> 
> 时间：2012-12-13T12:12:39.547
> 
> 标签：android, android-layout, profiling

我需要一些客观的措施来加快屏幕渲染速度。请告诉我，如何测量计算布局视图大小及其渲染的时间。

我尝试使用hierarchyviewer，但在我的情况下它不能正常工作。对于大多数视图，它显示为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:16:12.423

我以前没有尝试过，但我认为你可以扩展你的`Layout`父母并`onMeasure()`像这样覆盖：

```
@override onMeasure (int widthMeasureSpec, int heightMeasureSpec) {
 float start=(float) System.currentTimeMillis();
 super.onMeasure (widthMeasureSpec, heightMeasureSpec);
 Log.i("ElapsedTime",String.valueOf(((float)System.currentTimeMillis())-start));
} 
```

然后将此自定义`Layout`用作布局的根。`View`如果您想分别计算它们，您可以对它们执行此操作。

# javascript - 谷歌应用引擎、Ajax、文件上传、

> ID：13859631
> 
> 赞同：5
> 
> 时间：2012-12-13T12:12:59.920
> 
> 标签：javascript, ajax, google-app-engine, file-upload

在 google App Engine 上，我想使用 javascript（或 Ajax）发布表单，然后更新目标 div。该表单包含许多要传输的字段和文件。javascript 函数是从“Javascript: The Definite Guide”一书中复制而来的。我有两个问题：

1.  在“form.html”中，如何为 postFormData() 函数准备“data”参数，以便可以传递所有字段和文件。
2.  如何设计回调函数，使响应（即“form.html”）可以更新内容div？

谢谢你的帮助。

base.html：

```
...
<div id="content">
{% include "form.html" %}
</div>

Image:<br />
<img src="/file?entity_id={{entity.key}}" />
<br />

<script type="text/javascript">
  function postFormData(url, data, callback) {
    if (typeof FormData === "undefined")
      throw new Error("FormData is not implemented");
    var request = new XMLHttpRequest();
    request.open("POST", url);
    request.onreadystatechange = function() {
      if (request.readystate === 4 && callback)
        callback(request);
    };
    var formdata = new FormData();
    for (var name in data) {
      if (!data.hasOwnProperty(name)) continue;
      var value = data[name];
      if (typeof value === "function") continue;
      formdata.append(name, value);
    }
    request.send(formdata);
}
</script>
... 
```

表单.html

```
<form action="/form" method="POST" enctype="multipart/form-data">
  name1: <input type="text" name="name" />{{ name1 }}<br /><br />
  name2: <input type="text" name="name" />{{ name }}<br /><br />
  ...
  file1: <input type="file" name="file" />{{ file1 }}<br /><br />
  file2: <input type="file" name="file" />{{ file2 }}<br /><br />
  ...
         <input type="submit" value="Submit" onclick="return postFormData('/form', howToPrepareData?, whatIsTheCallbackFunction?)" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:45:32.130

当您执行表单 POST（用户单击提交按钮或通过 JS 调用）时，浏览器将重新加载窗口并显示 POST 的结果。这显然不是你想要的。

解决方法是隐藏`<iframe>`一个作为表单 POST 操作目标的隐藏项。这是示例：[如何通过 ajax (no jquery) 发送 multipart/form-data 表单内容？](https://stackoverflow.com/questions/5933949/how-to-send-multipart-form-data-form-content-by-ajax-no-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:58:53.273

现在在这里上传简单的图片：

**HTML**

```
<form action="/form/index.php?name=" class="imageform" method="POST" enctype="multipart/form-data">
 name: <input type="text" name="name" class="name" /><br /><br />
 file: <input type="file" name="file" class="file"/><br /><br />
        <input type="submit" value="Submit" class="submit" />
</form>
<div id="callback">
</div> 
```

**查询**

```
$(document).ready(function() 
{ 
$('.submit').on('click', function() 
{
if($(".name").val()==""){
$(".name").val("Enter Name Here")
}
else { 
var s = $(".name").val();
var n = $(".imageform").attr("action");
$(".imageform").attr("action", function() {
return s+n;
}
$("#callback").html('Uploading.....');
$(".imageform").ajaxForm(
{
target: '#callback'
}).submit();
}
});
}); 
```

还包括这个链接在头：

```
<script type="text/javascript" src="http://demos.9lessons.info/ajaximageupload/scripts/jquery.form.js"></script> 
```

hey man all the text which will echo in php file will be shown in #callback. So, if you want to preview image please echo there html and do not remove that action=/form/index.php?name= and also in php file type $name=$_GET['name'];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:05:46.990

我想出了以下代码。但是，奇怪的是，它有时有效，有时却无效。失败时，Firebug 中显示的错误消息是“ReferenceError: $ is not defined”。有人可以告诉我问题是什么，这是否是正确的解决方案？谢谢。

```
$(document).ready(function() { 
    // bind 'myForm' and provide a simple callback function 
    $('#myForm').ajaxForm(function(returnData) {
        $('#content').html(returnData)
    }); 
}); 
```

# java - 在 Openshift 中配置 MySQL 连接

> ID：13859632
> 
> 赞同：4
> 
> 时间：2012-12-13T12:13:07.970
> 
> 标签：java, mysql, openshift

我是 Openshift 的新手，我有一个问题。

我能够通过“phpMyAdmin”创建数据库，但现在，我无法连接到它。

当我尝试连接到数据库时，我得到的错误如下： **javax.servlet.ServletException: org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.mysql.jdbc.Driver' javax.faces.webapp.FacesServlet.service(FacesServlet.java:321)**

我的库目录在我的 Eclipse 项目中定义良好。见下图：

![在此处输入图像描述](../Images/3a00199b0c8cf0ede8984258a68cec38.png)

有人有什么建议吗？

在此先感谢，伊曼纽尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:19:11.470

您的类路径中缺少 MySQL JDBC 驱动程序。

[http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)

下载这个并将其添加到您的应用程序类路径中，或者将 Maven 依赖项添加到您的构建文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T23:36:26.780

我遇到了同样的问题，并通过将连接器添加到我的`pom.xml`.

您已[下载它](http://dev.mysql.com/downloads/connector/j/)（选择独立于平台）并将其放置在`WEB-INF/lib`.

就我而言，我有：

```
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.27</version>
    <scope>system</scope>
    <systemPath>${project.basedir}/src/main/webapp/WEB-INF/lib/mysql-connector-java-5.1.27-bin.jar</systemPath>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:31:34.937

将此添加到您的`pom.xml`：

```
<dependency>
<groupId>mysql</groupId>
<artifactId>mysql-connector-java</artifactId>
<version>5.1.24</version>
</dependency> 
```

# iframe - 如何将 Oracle BI Publisher 封装到其他应用程序的 iframe 中？

> ID：13859634
> 
> 赞同：1
> 
> 时间：2012-12-13T12:13:21.527
> 
> 标签：iframe, oracle11g, bi-publisher

如何将 Oracle BI Publisher 封装到其他应用程序的 iframe 中？

我已经安装了 Oracle BI Publisher 11g（试用版），并希望将其附在其他应用程序的 iframe 中。它适用于其他网站/应用程序，但不适用于发布者。它不会在 iframe 中显示，而是自动重定向到发布者的 url。

我试图用谷歌搜索这个问题的解决方案，发现以下帖子：[http](http://atlantabi.blogspot.com/2011/12/obiee-11g-obiee-content-cannot-be.html) ://atlantabi.blogspot.com/2011/12/obiee-11g-obiee-content-cannot-be.html 但我找不到instanceconfig .xml 我需要在其中添加以下条目

```
<InIFrameRenderingMode>allow</InIFrameRenderingMode> 
```

可能是什么原因？（可能是防止点击劫持？）

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:49:36.963

您是否尝试将整个 BI Publisher 应用程序封装到 iframe 中，并配有布局编辑器、数据模型编辑器等？如果是这样，您可能无法做到 - BI Publisher 是一个非常复杂的 Web 应用程序，它使用了大量的 Javascript。

您链接的*Atlanta BI文章解释了如何将**报表的 HTML 输出包含*在 iframe 中。

# c# - RichEditBox 在粘贴表格时不会水平滚动

> ID：13859646
> 
> 赞同：1
> 
> 时间：2012-12-13T12:14:08.477
> 
> 标签：c#, xaml, windows-8, windows-runtime, microsoft-metro

我有一个 RichEditBox，如下所示。基本上我想在其中粘贴一个表格，但它不会在水平方向滚动。如果我在它下面写任何长线，那么我可以看到剩余的表格内容。[你可以从这里](http://sdrv.ms/12alknB)下载表格。RichEditBox 中是否有任何错误或任何可用的解决方案？谢谢。

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <RichEditBox 
        ScrollViewer.HorizontalScrollMode="Enabled" 
        ScrollViewer.VerticalScrollMode="Enabled" 
        Width="300" 
        TextWrapping="NoWrap"
        ScrollViewer.HorizontalScrollBarVisibility="Visible" 
        ScrollViewer.VerticalScrollBarVisibility="Visible"
        />
</Grid> 
```

# android - 在android中拒绝通话

> ID：13859649
> 
> 赞同：1
> 
> 时间：2012-12-13T12:14:13.937
> 
> 标签：android, call, telephonymanager

如何在让电话响5秒后自动拒绝来自Android应用程序的来电？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:28:19.507

**检查此链接：** [Android：完全控制手机（信息亭模式），这可能吗？如何？](https://stackoverflow.com/questions/7121508/android-taking-complete-control-of-phone-is-it-possible-how/7121586#7121586)

```
 try{

                TelephonyManager manager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
                Class c = Class.forName(manager.getClass().getName());
                Method m = c.getDeclaredMethod("getITelephony");
                m.setAccessible(true);
                ITelephony telephony = (ITelephony)m.invoke(manager);
                telephony.endCall();
            } catch(Exception e){
                Log.d("",e.getMessage());
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:44:38.230

检查此链接：您可以使用 Android 的 Root Call Blocker 快速拒绝来电！[http://www.xda-developers.com/android/reject-calls-quickly-with-root-call-blocker-for-android/](http://www.xda-developers.com/android/reject-calls-quickly-with-root-call-blocker-for-android/)

# c# - 在安装 Windows 服务期间询问和存储配置变量

> ID：13859650
> 
> 赞同：1
> 
> 时间：2012-12-13T12:14:16.753
> 
> 标签：c#, asp.net, windows-services, app-config, setup-project

我想在安装 Windows 服务时在 App.config 中设置变量。

我看到很多人推荐链接：
[http ://raquila.com/software/configure-app-config-application-settings-during-msi-install/](http://raquila.com/software/configure-app-config-application-settings-during-msi-install/)

```
Configuration config = ConfigurationManager.OpenExeConfiguration(exePath); 
```

不管用。它是内置代码还是我们需要手动打开和存储变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:26:48.047

您是否添加了`System.Configuration`对项目的引用？

这样做之后，您必须定义以下指令：

```
using System.Configuration; 
```

# java - 将 long 转换为 int

> ID：13859658
> 
> 赞同：1
> 
> 时间：2012-12-13T12:14:48.477
> 
> 标签：java, casting, long-integer

我有一个变量可以获取当前时间并长期存储。但我必须将其转换为**int**，因为这是要求。所以我正在做的是用 (int) 转换 val 并将其存储在 int 中。

```
Val = 1355399741522 (long)
Int Val = -1809346991 (after casting to int)

After Casting from int to long -> Val = -1809346991 //TESTED 
```

现在我的问题是，如果我想再次将此 int 转换回 long ，那么它肯定对我不起作用。**我已经测试过了。**但我想要替代解决方案。

**注意 - 我不想储存太久。作为它的要求。我正在使用下面的函数将 long 转换为 time**

```
public static String convertToTime(final long date) {
        String time = null;
        final SimpleDateFormat bartDateFormat1 = new SimpleDateFormat("HH");
        final SimpleDateFormat bartDateFormat2 = new SimpleDateFormat("mm");
        final Date fomDat = new Date(date);
        final int hour = Integer.parseInt(bartDateFormat1.format(fomDat));
        final int min = Integer.parseInt(bartDateFormat2.format(fomDat));
        time = pad(hour) + ":" + pad(min);
        return time;
    } 
```

如果有人有任何想法，请指导我或提供任何替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:30:08.610

如果您的 a`long`包含大于`Integer.MAX_VALUE`或小于的值`Integer.MIN_VALUE`，并且您将其转换为 an`int`然后再转换为 a `long`，您将无法再次获得原始值。

如果您有这样做的“要求”，那么您的要求是不可实现的。您正在尝试做的是数学上的不可能。

（您还应该考虑您误解了要求的可能性......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:44:46.167

当时间存储为时，`int`它通常以秒为单位，因为毫秒不适合。如果你这样做

```
long timeInMs = 1355399741522L;
int timeInSec = (int) (timeInMs / 1000); // now 1355399741
long timeInMs2 = timeInSec * 1000L; // now 1355399741000L 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T12:31:30.057

您可以将 long 转换为 String 并创建一个 Integer(String) 对象。但由于 Long.MAX_VALUE(2^63-1) 远大于 Integer.MAX_VALUE(2^31 - 1)，因此如果 long 变量的长度超过了整数类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:43:39.637

```
public static String convertToTime(final long date) {
        String time = null;
        final SimpleDateFormat bartDateFormat1 = new SimpleDateFormat("H:m");
        time = bartDateFormat1.format( date );
        return time;
    } 
```

# svn - SVN 提交命令

> ID：13859659
> 
> 赞同：30
> 
> 时间：2012-12-13T12:14:48.923
> 
> 标签：svn, tortoisesvn

在向该文件夹添加一些新文件后，我需要提交该文件夹。当我在[TortoiseSVN](http://en.wikipedia.org/wiki/TortoiseSVN)中尝试此操作时，它工作正常（成功提交），但在使用`svn commit`命令尝试此操作时，它没有提交文件夹。

我遵循的步骤是：

1.  从存储库中签出测试文件夹到`D:\Test`文件夹，
2.  将一些新文件添加到该测试文件夹中，
3.  使用 . 提交该文件夹`svn.exe commit D:\Test -m "Added"`。

它没有被承诺。我已经在 TortoiseSVN 中尝试过（右键单击该文件夹并单击 SVN 提交），它成功提交。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-08-18T19:51:21.797

要将文件/文件夹添加到项目中，一个好方法是：

首先将您的文件添加到 /path/to/your/project/my/added/files，然后运行以下命令：

```
svn cleanup /path/to/your/project

svn add --force /path/to/your/project/*

svn cleanup /path/to/your/project

svn commit /path/to/your/project -m 'Adding a file' 
```

我使用清理来防止任何[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)（核心转储），现在更新了 SVN 项目。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-13T12:19:37.210

### 命令行 SVN

在将更改提交到存储库之前，您需要将文件添加到工作副本：

```
svn add <file|folder> 
```

然后：

```
svn commit 
```

有关. [_](http://svn.gnu.org.ua/svnbook/svn.ref.svn.c.add.html) _`svn add`

**TortoiseSVN**

它适用于 TortoiseSVN，因为它会自动将文件添加到您的工作副本（提交对话框）：

> 如果要包含未​​版本控制的文件，只需检查该文件以将其添加到提交中。

请参阅：[TortoiseSVN：将您的更改提交到存储库](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-commit.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-19T11:15:17.067

首先添加新文件：

```
svn add fileName 
```

然后提交所有新的和修改的文件

```
svn ci <files_separated_by_space> -m "Commit message|ReviewID:XXXX" 
```

如果要提交非源文件，则

```
svn ci <files> -m "Commit msg|ReviewID:NON-SOURCE" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-04-25T09:06:17.537

第1步。$ cd [你的代码工作路径]

第2步。$ svn commit [你的服务器路径] -m '添加提交信息'

如需帮助，请使用 $ svn help commit

# excel - 使用 VBA 从 EXCEL 中的选定行中访问单元格的值

> ID：13859660
> 
> 赞同：-3
> 
> 时间：2012-12-13T12:14:54.153
> 
> 标签：excel, vba, excel-2007

我有 excel 表，我想从中更新选定行中的几个单元格值。我怎样才能在 VBA 中做到这一点？我没有广泛使用 VBA。请帮忙。

谢谢， 奥姆基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:26:57.693

```
Sub test()
'put something in column 3 of all selected rows
    Dim r As Range
    For Each r In Selection.Rows
        Cells(r.Row, 3) = "test"
    Next r
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:09:26.367

请看下面的链接。这应该是你所追求的。

[http://www.excel-vba-easy.com/vba-programming-range-excel-vba.html](http://www.excel-vba-easy.com/vba-programming-range-excel-vba.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:09:54.033

欧奇，

无论如何，你都需要一些 VBA 知识。Application.Selection 变量返回给您当前选择的范围。尝试在工作簿上选择一个区域并执行以下宏：

```
Sub AreaSelected()
    MsgBox Application.Selection.Address
End Sub 
```

在这里你有一个完整的例子：

[http://www.lazerwire.com/2011/10/excel-vba-get-all-selected-rows.html](http://www.lazerwire.com/2011/10/excel-vba-get-all-selected-rows.html)

问候

# jquery - 如何在 html() 方法@jQuery 中正确添加链接？

> ID：13859668
> 
> 赞同：0
> 
> 时间：2012-12-13T12:15:18.410
> 
> 标签：jquery

这是我当前运行良好的代码：

```
$("h2").html("Well played!"); 
```

如果我想链接“打得好！”这两个词怎么办？到某种页面？

我试着做一些不同的变化

> <a href="">

...但这根本行不通。有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:18:01.420

如果您想将链接附加到`h2`元素：

```
$('h2').html('<a href="http://path.to.whatever/page.html">Well played</a>'); 
```

或者你可以简单地使用：

```
$('h2').append('<a href="http://path.to.whatever/page.html">Well played</a>'); 
```

或者：

```
$('<a />', {'text' : 'well played', 'href' : 'http://path.to.whatever/page.html'}).appendTo('h2'); 
```

[JS 小提琴演示](http://jsfiddle.net/QrLTE/)

参考：

*   [`append()`](http://api.jquery.com/append/).
*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`html()`](http://api.jquery.com/html/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:17:00.127

尝试

```
 $("h2").html("<a href='some.html'> Well Played </a>") 
```

或使用**[appendTo()](http://api.jquery.com/appendTo/)**方法

```
 $("<a href='some.html'> Well Played </a>").appendTo($("h2")); 
```

或使用**[append()](http://api.jquery.com/append/)**方法

```
 $("h2").append($("<a href='some.html'> Well Played </a>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:34:07.127

另一种方法是：

```
var link = $(document.createElement('a'));
link.attr({"href" : "http://www.test.com/link"}).text("Well Played!!");
$('h2').append(link); 
```

[演示](http://jsfiddle.net/E5Pnd/4/)

希望有帮助。

# c# - 了解 Autofac 生命周期范围

> ID：13859671
> 
> 赞同：6
> 
> 时间：2012-12-13T12:15:47.867
> 
> 标签：c#, autofac

从 Autofac 的文档中，我了解到它保留了对其创建的每个 IDisposable 实现者的引用。因此它可能导致 OutOfMemoryException。因此，解决依赖关系的建议方法是使用 ILifetimeScope。

假设 IService 实现 IDisposable。

```
class MaintenanceTask {
    private IService service;
    public MaintenanceTask(ILifetimeScope lifetimeScope) {
        service = lifetimeScope.Resolve<IService>();
    }
    //...do your work
} 
```

但是这种方法的问题在于它隐藏了依赖关系。我必须查看代码以了解该类所依赖的内容。有没有其他方法可以更明确地处理这个问题？更具体地说，无需查看代码就可以使依赖关系更加明显？还是我完全错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T13:24:31.970

传入生命周期范围就像传入容器本身一样。它类似于[服务定位器（反）模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)，并且具有您所描述的问题：
依赖性变得不明显。

要问自己一件事：
你的记忆真的有问题吗？如果没有，我不会打扰。

另一个提示：
如果您有应在使用后立即处置的个别服务，请使用工厂来创建它们并使您的类依赖于工厂而不是服务本身。

生命周期范围的使用场景有点不同：
当您需要本地组合根时使用它们。我从来没有在 Windows 应用程序中需要这样的东西，但在 Web 应用程序中，会话或请求可能需要本地组合根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-07T18:21:00.250

这个问题对我来说很烦人，我创建了一个库来解决它。

看看[可靠](https://github.com/YairHalberstadt/Dependable)的。

有了它，您的代码将更改为：

```
class MaintenanceTask {
    private IService service;
    public MaintenanceTask(IScopeFactory<IService> serviceFactory) {
        using(var serviceScope = serviceFactory.CreateScope())
        {
             service = serviceScope.Value;
             //...do your work
        }
    }
} 
```

# ios - 如何使用 UIBezierPath 保存裁剪的图像

> ID：13859673
> 
> 赞同：0
> 
> 时间：2012-12-13T12:15:51.510
> 
> 标签：ios, crop, uibezierpath, clip

我有一个显示图像的应用程序，用户可以“剪切”图像的某些部分。

我的问题是我无法保存切割的部分。

参考：

[多点裁剪图像后如何保存UIImage？](https://stackoverflow.com/questions/13063441/how-to-save-the-uiimage-after-multi-point-cropping-the-image)

这是裁剪图像的方法：

```
 - (void) setClippingPath:(UIBezierPath *)clippingPath imagen:(UIImageView *)imagenView;
{
    if (![[imagenView layer] mask])
        [[imagenView layer] setMask:[CAShapeLayer layer]];

    [(CAShapeLayer*) [[imagenView layer] mask] setPath:[clippingPath CGPath]];
} 
```

我可以保存新图像吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:31:31.623

关于评论：

```
- (UIImage *)imageFromView:(UIView *)view {
    CALayer *layer = view.layer;
    UIGraphicsBeginImageContext([layer frame].size);
    [layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *outputImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return outputImage;
} 
```

# android - 我有使图像视图四舍五入的代码，现在我想使用背景

> ID：13859675
> 
> 赞同：1
> 
> 时间：2012-12-13T12:15:58.547
> 
> 标签：android

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="#FFFFFF" />
<stroke android:width="1dp" android:color="#000000" />
<padding android:left="1dp" android:top="1dp" android:right="1dp"
android:bottom="1dp" />
</shape> 
```

我有这段代码可以制作图像视图的边框，现在我希望该图像视图也能获得图片。
现在如何编辑此代码以包含图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:24:38.283

试试这个 ：

```
<ImageView
     android:id="@+id/my_imageView"
     android:layout_width="fill_parent"
     android:layout_height="300dp" 
     android:background="@drawable/rounded_imageview"
     android:src="@drawable/ic_launcher"/> 
```

编辑：

或者

```
ImageView myimage = (ImageView) findViewById(R.id.my_imageView);
myimage.setImageResource(R.drawable.ic_launcher); 
```

两种方式你都可以做到。

希望这对您有所帮助。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:20:03.733

你可以使用这种方法来获得粗糙的角落

```
BitmapShader shader;
shader = new BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);

Paint paint = new Paint();
paint.setAntiAlias(true);
paint.setShader(shader);

RectF rect = new RectF(0.0f, 0.0f, width, height);

// rect contains the bounds of the shape
// radius is the radius in pixels of the rounded corners
// paint contains the shader that will texture the shape
canvas.drawRoundRect(rect, radius, radius, paint); 
```

您可以轻松地以这种方式向图像视图添加更多功能

# android - android 日志历史只需下载和上传

> ID：13859678
> 
> 赞同：-3
> 
> 时间：2012-12-13T12:16:04.420
> 
> 标签：android

我只想从android中的浏览器下载和上传历史并将其保存在数据库中，可以吗？请帮帮我，并以线性布局（垂直）显示它可以一步一步教我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:29:41.057

您应该开始阅读： [Browser](http://developer.android.com/reference/android/provider/Browser.html) [SO similar question](https://stackoverflow.com/questions/2577084/android-read-browser-history)

我会推荐一个列表视图，但如果你想使用 LinearLayout，你可以在迭代`Cursor`返回时动态创建 TextView：

```
TextView tv=new TextView(getApplicationContext());
tv.setText("text blah blah");
layout.addView(tv); 
```

看这个问题：[SO question](https://stackoverflow.com/questions/4394293/create-a-new-textview-programmatically-then-display-it-below-another-textview)

# php - PHP mkdir - 抛出错误“文件存在”

> ID：13859682
> 
> 赞同：5
> 
> 时间：2012-12-13T12:16:17.833
> 
> 标签：php, mkdir, rmdir

我目前正在研究 raywenderlich.com 团队的**iOS6 By Tutorials 的****Passbook**部分，并且在我的 PHP 中遇到以下错误：

 **> 警告：mkdir() [function.mkdir]: File exists in /xxx/xxx/xxx/xxx/Pass.php on line 26
> 
> 警告：mkdir() [function.mkdir]: File exists in /xxx/xxx/xxx/xxx/Pass.php on line 26
> 
> 警告：rmdir(/tmp/50c8d11c60538/..) [function.rmdir]: Directory not empty in /xxx/xxx/xxx/xxx/Pass.php on line 54

我的课程中的代码如下：

```
class Pass
{
    private $workFolder = null;
    private $ID = null;

    var $content = null;
    var $passBundleFile = null;

    private function copySourceFolderFilesToWorkFolder($path)
    {
        // recurse over the contents and copy files
        $files = new RecursiveIteratorIterator(
                        new RecursiveDirectoryIterator($path),
                        RecursiveIteratorIterator::SELF_FIRST);

        foreach ($files as $name => $fileObject)
        {
            if (is_file($name) && substr($fileObject->getFileName(), 0, 1) != ".")
            {
                copy($name, $this->workFolder."/".str_replace($path."/", "",$name));
            }
            else if (is_dir($name))
            {
                mkdir($this->workFolder."/".str_replace($path."/", "",$name));
            }
        }
    }

    // delete all auto-generated files in the temp folder
    function cleanup()
    {
        // recurse over conrents and delete files
        $files = new RecursiveIteratorIterator(
                        new RecursiveDirectoryIterator($this->workFolder),
                        RecursiveIteratorIterator::CHILD_FIRST);

        foreach ($files as $name => $fileObject)
        {
            if (is_file($name))
            {
                unlink($name);
            }
            else if (is_dir($name))
            {
                rmdir($name);
            }
        }

        rmdir($this->workFolder);
    }

    function __construct($path)
    {
        assert(file_exists($path."/pass.json"));

        $this->ID = uniqid();

        $this->workFolder = sys_get_temp_dir()."/".$this->ID;
        mkdir($this->workFolder);
        assert(file_exists($this->workFolder));

        $this->copySourceFolderFilesToWorkFolder($path);

        $this->readPassFromJSONFile($this->workFolder."/pass.json");
    }

    // cleanup the temp folder on object destruction
    function __destruct()
    {
        $this->cleanup();
    }
} 
```

我正在实例化一个实例：

```
$coupon = new Pass("pass/source"); 
```

我已经尝试上传随本书提供的示例代码并得到相同的错误。

我已经在相关论坛上发布了这个，但是还没有人回复，并且想在继续之前深入了解这个。

谢谢，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:27:41.783

你的第一个 if 测试 '.' 和 '..' 但它会是错误的并转到其他地方。和 '。' 和 '..' 是目录。因此它尝试创建一个名为“.”的目录，该目录已经存在。

```
if (is_file($name) && substr($fileObject->getFileName(), 0, 1) != ".")
        {
            copy($name, $this->workFolder."/".str_replace($path."/", "",$name));
        }
        else if (is_dir($name))
        {
            mkdir($this->workFolder."/".str_replace($path."/", "",$name));
        } 
```

通过这样做修复：

```
if($name == '.' || $name == '..'){// ignore '.' and '..', but not hidden files
continue;
}
if (is_file($name))
            {
                copy($name, $this->workFolder."/".str_replace($path."/", "",$name));
            }
            else if (is_dir($name))
            {
                mkdir($this->workFolder."/".str_replace($path."/", "",$name));
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:07:29.237

非常感谢迈克尔，但是那没有用 - 抛出了同样的错误。

多亏了你，我已经解决了我的问题。

在 else is 语句中，我再次检查它不是目录：

```
else if (is_dir($name) && substr($fileObject->getFileName(), 0, 1) != ".") 
```

至于删除目录错误，我只需要添加一个额外的方法来发送消息，在尝试删除它之前检查目录是否为空。

非常感谢，尼克

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-28T12:01:35.453

我希望这个可以帮助你
在 mkdir 前面添加一个“@”符号，所以它看起来像这样：

```
@mkdir($this->workFolder."/".str_replace($path."/", "",$name)); 
```**

# wkhtmltopdf - wkhtmltoimage 偶尔冻结

> ID：13859683
> 
> 赞同：2
> 
> 时间：2012-12-13T12:16:27.860
> 
> 标签：wkhtmltopdf, wkhtmltoimage

**哪些步骤将重现该问题？** 1\. 使用 scripts/static-build.sh 安装/编译，使用“linux-local” 2\. 运行类似：'/usr/local/bin/wkhtmltoimage" [http://www.rawartists.org/scripts/event- flyer.php?url=http://www.rawartists.org/philadelphia/menagerie&image=true](http://www.rawartists.org/scripts/event-flyer.php?url=http://www.rawartists.org/philadelphia/menagerie&image=true) "test.jpg

**什么是预期的输出？你看到了什么呢？** 渲染应该完成，但它每隔一段时间就会停止在大约 80-85% 的渲染范围内。对于何时完成渲染没有明确、可辨别的模式。（有关渲染停止的位置，请参见屏幕截图。）

**您使用的是什么版本的 wkhtmltopdf？** 0.10.0 rc2

**在什么操作系统上？** Linux Ubuntu 服务器 10.4

**请在下面提供任何附加信息。**

我不确定是因为我使用的是 0.10 还是因为我偶尔会收到“在没有 QHttpNetworkReply 的情况下调用 QHttpNetworkConnectionChannel::_q_receiveReply()，套接字上的 0 个字节”。输出中的消息（当它起作用和不起作用时会发生这种情况）。

![冻结图像生成](../Images/b5c92a45c303931bea60ef19c41a1092.png)

谢谢你的帮助。

# linux - 如何grep整行，传递给sed，然后删除该行？

> ID：13859684
> 
> 赞同：3
> 
> 时间：2012-12-13T12:16:35.413
> 
> 标签：linux, sed, grep, find

以下命令将查找字符串的所有出现并删除找到该字符串的文件的内容。

```
find / -maxdepth 1 -xdev -type f -exec grep -i "stringtofind" -l {} \; -exec sed -i '/./d' {} \; 
```

我已尝试对其进行修改以仅删除找到字符串但无法使其正常工作的行。

例如测试文件：

```
blah blah blah
blah blah blah teststring
teststringblah blah blah
blah blah blah 
```

它将删除第 2 行和第 3 行，并使文件保持行之间没有间隙：

```
blah blah blah
blah blah blah 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T12:21:46.237

`grep`此处不需要删除包含*（不区分大小写）的*`sed -i '/teststring/Id' file`所有行，因此只需将其与：`file``teststring` *`find`*

 *```
find . -maxdepth 1 -xdev -type f -exec sed -i '/teststring/Id' {} \; 
```

`sed`演示：

```
$ cat file
blah blah blah
blah blah blah teststring
teststringblah blah blah
blah blah blah

$ sed '/teststring/Id' file
blah blah blah
blah blah blah 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:24:26.640

您无法使用标准脚本工具就地编辑文件。您可以创建一个新文件，然后用新文件替换旧文件：

```
#get a temporary filename
tmp_file_name=$(mktemp)
grep -v teststring $my_file_name > $tmp_file_name
mv $tmp_file_name $myfile_name 
```*

# c++ - 重载 >> 运算符以读取文本文件

> ID：13859686
> 
> 赞同：2
> 
> 时间：2012-12-13T12:16:52.437
> 
> 标签：c++, io, overloading

使用此代码重载 >> 以读取文本文件：

```
std::istream& operator>> (std::istream &in, AlbumCollection &ac)
    {
        std::ifstream inf("albums.txt");

        // If we couldn't open the input file stream for reading
        if (!inf)
        {
        // Print an error and exit
            std::cerr << "Uh oh, file could not be opened for reading!" << std::endl;
            exit(1);
        }

        // While there's still stuff left to read
        while (inf)
        {
            std::string strInput;
            getline(inf, strInput);
            in >> strInput;
        } 
```

调用者：

```
AlbumCollection al = AlbumCollection(albums);
cin >> al; 
```

该文件位于源目录和 .exe 所在的同一目录中，但它总是说它无法处理该文件。抱歉，如果答案真的很明显，这是我第一次尝试在 C++ 中读取文本文件；我真的不明白为什么这不起作用，我能找到的在线帮助似乎并没有表明我做错了什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:28:40.373

您必须检查工作目录。当通过相对路径指定文件时，相对路径始终被认为是相对于工作目录的。例如，您可以使用函数打印工作目录`getcwd()`。

您可以从 IDE 的项目属性中更改设置中的工作目录。

一些备注：

*   不要从提取运算符中退出。
*   您正在用 的内容覆盖 的`inf`内容`in`。
*   `cin`通常不用于文件。
*   您错过了流的返回。

实际上，您的运营商的更好版本是：

```
std::istream& operator>>(std::istream& in, AlbumCollection& ac)
{
    std::string str;
    while(in >> str)
    {
        // Process the string, for example add it to the collection of albums
    }
    return in;
} 
```

如何使用它：

```
AlbumCollection myAlbum = ...;
std::ifstream file("albums.txt");
file >> myAlbum; 
```

但是对于序列化/反序列化，我认为最好的方法是使用以下函数`AlbumCollection`：

```
class AlbumCollection
{
    public:
        // ...
        bool load();
        bool save() const;
}; 
```

此方法使您的代码更具自我描述性：

```
if(myAlbum.load("albums.txt"))
    // do stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:28:23.770

如果您从 IDE 运行程序，则可能是 IDE 的当前目录针对的是 exe 目录以外的其他位置。尝试从命令行运行 EXE。还可以尝试提供文件的完整路径，以确保它可以找到它。

一点点主题，虽然 C++ 允许运算符重载，但我不鼓励这样做，原因很简单——这使得在代码中搜索运算符重载的声明变得困难！（尝试搜索`operator >>`特定类型...）。具有功能的编辑器`go to declaration`也不能很好地处理这个问题。最好是让它成为一个正常的功能，

```
std::string AlbumsToString (AlbumCollection &ac) 
```

它返回一个`string`你可以连接到你的流的：

```
mystream << blah << " " << blah << " " << AlbumsToString(myAlbums) << more_blah << endl;  // !!! 
```

您可以使用`ostringstream`inside`AlbumToString`来构建类似流的字符串，并最终返回`str()`成员 if `ostringstream`。

# java - Android：读取文本文件并抓取特定单词后面的行

> ID：13859691
> 
> 赞同：0
> 
> 时间：2012-12-13T12:17:09.863
> 
> 标签：java, android

我试图在遵循预设参考的线上抓取一条数据

这是我到目前为止的代码，它只是抓住了文本中的所有内容

```
public void onClick(View v) {
    // TODO Auto-generated method stub

    if (v.getId() == R.id.btnRead) {

        try {
            readfile();
        } catch (IOException e) {
            Toast.makeText(getApplicationContext(), "Problems: " + e.getMessage(), 1).show();
        }
    }

private void readfile() throws IOException {     

    String str="";
    StringBuffer buf = new StringBuffer();          
    InputStream is = this.getResources().openRawResource(R.drawable.test);
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));

    if (is!=null) { 

        while ((str = reader.readLine()) != null) { 

            buf.append(str + "\n" );

        }               
    }       
    is.close(); 
    Toast.makeText(getBaseContext(), buf.toString(), Toast.LENGTH_LONG).show(); 
```

我考虑过添加这样的东西

```
if (str == "name:"){

   reader.readNextLine();

    }
else {
    (buf.append("Referance not found" + "\n"));
} 
```

这样它会找到预设的单词并立即抓住下一行显然我做不到

```
readNextLine 
```

所以试图找到另一种简单的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:22:58.370

您的问题是您比较参考地址而不是值。

比较运算符`==`仅对原始类型有效。字符串是一种对象类型。

要比较对象类型，您应该始终使用`equals`方法或者`compareTo`对象是否支持它。

```
if("name".equals(str)) {
  reader.readNextLine();
} else {
  buf.append("Referance not found\n");
} 
```

提示：

[StringBuffer](http://developer.android.com/reference/java/lang/StringBuffer.html)是线程安全的，你不需要它。更好的选择是使用[StringBuilder](http://developer.android.com/reference/java/lang/StringBuilder.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:27:47.207

你考虑过正则表达式吗？

```
 String expression = "name: ";
CharSequence inputStr = input;
Pattern pattern = Pattern.compile(expression, Pattern.CASE_INSENSITIVE);
Matcher matcher = pattern.matcher(inputStr);
if (matcher.matches()) {
    // here's where you'd write code to grab the next x amount of information
} else {
   // not found
} 
```

或者，如果您接受固定数量的信息（例如，该行是名称：Max Power），那么您可以使用字符串标记器/拆分器，检查“名称：”是否与其中一个标记匹配，然后获取接下来的两个标记这将是你的名字。您可能还想对字符串使用 equalsIgnoreCase 而不是 == 之类的东西，因为它不会产生您想要的结果！

# .net - 如果底层 SP 返回多个 Table，则循环 SqlDataSource 结果

> ID：13859694
> 
> 赞同：0
> 
> 时间：2012-12-13T12:17:22.030
> 
> 标签：.net, sql

我有调用 t-sql sctored 过程的 SqlDataSource ojbect 的 Asp.net 应用程序。它返回多个表（它返回大约 20 个不同格式的表：

```
1.table -> event1 data
2.table -> event2 participation data

3.table -> event2 data
4.table ->event2 participation data
etc. 
```

一切正常。但是，我不明白如何从 SqlDataSource 结果中获取所有这些表。我不需要任何 GridView 或中继器。我需要手动循环遍历 SqlDataSource 结果。我不知道怎么。

当我在搜索如何将 SqlDataSource 转换为 DataSet 时，它建议使用 SqlDataSource.Select -> get DataView -> convert toTable，但这仅适用于一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:52:14.653

尝试这个

```
DataSet ds;
myAdap.Fill(ds);
if(ds.tables.count >0){
if(ds.tablles[0]..rows.cout >0){
  foreach(datarow dr in ds.tables[0].rows){  //do someting with table 1}
}
if(ds.tables[1].rows.count>0){
  foreach(datarow dr in ds.tables[1].rows){  //do seomthing with table 2}
}
}
ds.dispose();

<asp:SqlDataSource  
     ID="SqlDataSource1"  
     runat="server"  
     ConnectionString="<%$ ConnectionStrings:NorthwindConnectionString %>"  
     DataSourceMode="DataSet"  
     SelectCommand="SELECT TOP 25 ProductID, ProductName, UnitPrice FROM Products"  
     >  
</asp:SqlDataSource> 
```

# javascript - Javascript 日期验证允许错误字符

> ID：13859697
> 
> 赞同：0
> 
> 时间：2012-12-13T12:17:36.553
> 
> 标签：javascript, validation, date

出于某种原因，我的日期验证允许通过句号，但仅在日期的那部分结束时，例如 12./10/201 通过但 1.2/10/201 没有通过。

这是我的代码：

```
var iDate = $("check_date").value;

  if(iDate.length > 0) {
    var a = iDate.split("/"); 
    if(isValidDate(a[0],a[1]-1,a[2]) == false){
      alert("You have entered an invalid date.");
      return false;
    }

isValidDate = function(day,month,year) {
  var dteDate;
  dteDate=new Date(year,month,day);
  return ((day==dteDate.getDate()) && (month==dteDate.getMonth()) && (year==dteDate.getFullYear()));
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:24:53.650

您可以使用函数来检查日期是否有效。看看这段代码：

```
function isDate(dateStr) {
    var datePat = /^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/;
    var matchArray = dateStr.match(datePat); // is the format ok?

    if (matchArray == null) {
        alert("Please enter date as either mm/dd/yyyy or mm-dd-yyyy.");
        return false;
    }

    month = matchArray[1]; // p@rse date into variables
    day = matchArray[3];
    year = matchArray[5];

    if (month < 1 || month > 12) { // check month range
        alert("Month must be between 1 and 12.");
        return false;
    }

    if (day < 1 || day > 31) {
        alert("Day must be between 1 and 31.");
        return false;
    }

    if ((month==4 || month==6 || month==9 || month==11) && day==31) {
        alert("Month "+month+" doesn`t have 31 days!")
        return false;
    }

    if (month == 2) { // check for february 29th
        var isleap = (year % 4 == 0 && (year % 100 != 0 || year % 400 == 0));
        if (day > 29 || (day==29 && !isleap)) {
            alert("February " + year + " doesn`t have " + day + " days!");
            return false;
        }
    }
    return true; // date is valid
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:33:09.950

正如评论中所讨论的，这是解决方案：

```
isValidDate = function(day,month,year) {
    var dteDate;
    dteDate=new Date(year,month,day);
    return ((day.toString()===dteDate.getDate().toString()) && (month.toString()===dteDate.getMonth().toString()) && (year.toString()===dteDate.getFullYear().toString()));
} 
```

您还需要 toString() 方法，就像比较`"12"`and一样`12`，它不会相等。现在您将比较有效日期`"12"`与`"12"`哪个相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:25:07.703

这是因为在将字符串解析为数字时`"12."`被解释为`12`（这发生在内部，在日期对象中）。
试试这个：

```
if(isValidDate(a[0],a[1]-1,a[2]) == false && iDate.indexOf('.') == -1){ 
```

基本上，只需检查点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:35:07.420

1.  是有效号码。将它传递给 Date 构造函数后，它转换为 Number 为 12.0，它显然等于 12。1.2 不是。我建议您先匹配正则表达式，然后像您一样检查零件的正确性。

我建议你实现这样的事情：

```
function isValidDate(dateString)
{
    if(! dateString.match(/((1[0-2])|(0?\d))\/(([0-2]?\d)|(3[0-1]))/(\d\d)?\d\d/) )
        return false;

    var parts = dateString.split("/");
    var dateToCheck = new Date(parts[0],parts[1]-1,parts[2]);

    return ((parts[0]==dateToCheck.getDate()) && (parts[1]==dateToCheck.getMonth()+1) && (parts[2]==dateToCheck.getFullYear()));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-29T20:08:14.653

这是我的日期验证版本。即使有人打算输入，它也不允许输入错误的日期。这也将在一个月和一天之后自动填充/。

```
$("#date").keyup(function (e) {
                // validation for length max 10
                var temp = $(this).val();
                if (temp.length > 10) $(this).val(temp.substring(0, temp.length - 1));

                var key = String.fromCharCode(e.keyCode);
                console.log(key + " " + e.keyCode);
                var regex = /[0-9]|[a-i]|\/|\`|\o|\¿|\%|\'|\$/;                            
                // checking teh allowed character
                if (!regex.test(key)) {
                    // checking backspace and shift key ( need to allow)
                    if (e.keyCode != 8 && e.keyCode != 16) {
                        var tam = $(this).val().length;
                        $(this).val(temp.substring(0, tam - 1));
                    }
                }
                else {
                    //if its not backslash
                    if (e.keyCode != 191 && e.keyCode != 111) {
                        if ($(this).val().length == 2) {
                            $(this).val($(this).val() + "/");
                        } else if ($(this).val().length == 5) {
                            $(this).val($(this).val() + "/");
                        }
                    }
                    else {
                        // if backslash
                        if ($(this).val().length != 3 && $(this).val().length != 6) {
                            var tam = $(this).val().length;
                            $(this).val(temp.substring(0, tam - 1));
                        }
                    }
                }
            }); 
```

# android - android 应用程序中断自己的安装

> ID：13859701
> 
> 赞同：1
> 
> 时间：2012-12-13T12:17:56.617
> 
> 标签：android, installation, application-design

我正在制作一个 android 应用程序，并希望它只安装在一个特定的设备上。我想要的是，只要检测到应用程序的安装不是预期的设备，就应该中断它的安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:54:00.440

据我所知，您不能中断安装过程。

另一种解决方案是在启动时检查设备的 IMEI，如果它与您设备的 IMEI 不匹配，请立即退出应用程序。

查看有关获取 IMEI 的[答案以获取指导。](https://stackoverflow.com/a/1972404/1615903)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:26:02.443

我建议您改用清单来定义您希望支持的设备。看看[这个](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

# visual-studio-2010 - 错误：在计算机上检测到较新版本的 Microsoft Visual C++ 2010 Redistributable

> ID：13859705
> 
> 赞同：9
> 
> 时间：2012-12-13T12:18:12.950
> 
> 标签：visual-studio-2010, redistributable

当我尝试运行 VS 2010 可再发行组件“vcredist_x86.exe”时，出现错误“已在机器上检测到 Microsoft Visual C++ 2010 Redistributable 的较新版本”并阻止我安装。

我实际上已经在我的电脑上安装了 VS 2010 pro。但我实际上不知道 VS 2010 可再发行组件是什么意思以及错误发生的原因。任何人都可以帮助解释或解决问题吗？非常感谢您提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:29:04.070

仅在未安装 VS2010 以提供所需运行时的机器上才需要可再发行包。例如，如果您查看 Microsoft 下载页面：

[http://www.microsoft.com/en-au/download/details.aspx?id=5555](http://www.microsoft.com/en-au/download/details.aspx?id=5555)

开头的段落是：

Microsoft Visual C++ 2010 Redistributable Package 安装 Visual C++ 库的运行时组件，这些组件需要在未安装 Visual C++ 2010 的计算机上运行使用 Visual C++ 开发的应用程序。

您应该只需要在部署应用程序的机器上安装可再发行组件。较新的版本可能是 Windows Update 已更新到比当前可在独立版本中下载的更高版本，但通常它不会给您带来任何问题。

# javascript - 使用纯 JavaScript 围绕中心缩放 SVG

> ID：13859708
> 
> 赞同：7
> 
> 时间：2012-12-13T12:18:24.870
> 
> 标签：javascript, svg, scaling

我有一个问题可能很好地理解坐标在 SVG 中是如何工作的。我有一个 javascript 函数可以缩放 svg 图形，例如：

```
var g = document.getElementById("graph");
var nm = g.getCTM().multiply(k); //k is the scale factor
g.setAttribute("transform", "matrix(" + nm.a + "," + nm.b + "," + nm.c + "," + nm.d + "," + nm.e + "," + nm.f + ")"); 
```

关键是在缩放中心后略微平移，因此图形丢失的是“地理”中心。如何确定我需要哪种翻译来“围绕”其中心缩放图形？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:55:29.140

您是否考虑过其他方法？

如果您只是在 svg 上寻找放大/缩小，则以不同的方式进行操作可能更容易，例如： [http ://www.cyberz.org/blog/2009/12/08/svgpan-a-javascript-svg- panzoomdrag库/](http://www.cyberz.org/blog/2009/12/08/svgpan-a-javascript-svg-panzoomdrag-library/)

前段时间我遇到了同样的问题，最后用这个创建了我自己的缩放：[https ://github.com/rstacruz/jquery.transit](https://github.com/rstacruz/jquery.transit)

您基本上将 css 变换比例用于 svg 包装器，并且 svg 可以很好地调整。您甚至可以为缩放设置动画。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T21:20:22.293

我认为更适合我的目的，并且在阅读了有用的链接中的操作方法之后

**http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Transforming_the_Coordinate_System#The_scale_Transformation**

我已将其更改为在滚动鼠标滚轮时*围绕鼠标位置缩放图形，*

如果它有帮助，这是代码（使用 SVGPan 的 setCTM 方法）：

```
var svgRoot = document.getElementsByTagName("svg")[0];
var g = svgRoot.getElementById("viewport");

var newp = svgRoot.createSVGPoint();
newp.x = evt.clientX;
newp.y = evt.clientY;
newp = newp.matrixTransform(g.getScreenCTM().inverse());

var oldx = newp.x;
var oldy = newp.y;

//z = scale factor
setCTM(g, g.getCTM().translate(-(oldx*(z-1)),-(oldy*(z-1))).scale(z)); 
```

# c# - 了解摩托罗拉MC65橙色按钮的状态

> ID：13859711
> 
> 赞同：1
> 
> 时间：2012-12-13T12:18:42.077
> 
> 标签：c#, .net, compact-framework, motorola, motorola-emdk

我需要能够知道橙色按钮的当前状态是什么，并且如果此状态在摩托罗拉设备 MC65 上发生变化，我需要得到通知。遗憾的是我不能使用 Symbol.Keyboard.KeyPad 类，因为 MC65 不支持它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:23:54.177

docos 状态：

> 支持键盘的功能 - MC65 仅支持以下两个 API。
> 
> Symbol.Keyboard.KeyPad.SetKeyState。Symbol.Keyboard.KeyPad.GetKeyStateEx。
> 
> MC65 不支持以下键。KEYSTATE_ALT、KEYSTATE_CTRL、KEYSTATE_NUMLOCK、KEYSTATE_NUMERIC_LOCK、KEYSTATE_CAPSLOCK
> 
> 对于 MC65，不能使用 Microsoft API 来获取橙色键状态。**Symbol.Keyboard.KeyPad 类提供了一个新的 GetKeyStateEx() 函数来获取修饰键的当前状态**。有关此 API 的说明，请参阅 API 函数页面。

它有这个代码示例：

```
// Get the key states
int keyState = keypad.GetKeyStateEx();

bool lockedState = false;

// Checking for a lock state first as it cannot be combined with others
switch (keyState)
{
    case KeyStates.KEYSTATE_ORANGE_SHIFT_LOCK:
        checkBoxOrangeShiftLock.Checked = true;
        lockedState = true;
        break;
    case KeyStates.KEYSTATE_FUNCTION_LOCK:
        checkBoxFuncLock.Checked = true;
        lockedState = true;
        break;
    case KeyStates.KEYSTATE_ORANGE_LOCK:
        checkBoxOrangeLock.Checked = true;
        lockedState = true;
        break;
    case KeyStates.KEYSTATE_NUMERIC_LOCK:
        checkBoxNumLock.Checked = true;
        lockedState = true;
        break;
    case KeyStates.KEYSTATE_SHIFT_LOCK:
        checkBoxShiftLock.Checked = true;
        lockedState = true;
        break;
    default:
        break;
}

if (lockedState)
{
    // No need to continue if a locked state
    this.Update();
    return;
}

// Process unlock or temp lock states if any
this.checkBoxUnShift.Checked = (keyState & KeyStates.KEYSTATE_UNSHIFT) != 0;
this.checkBoxShift.Checked = (keyState & KeyStates.KEYSTATE_SHIFT) != 0;
this.checkBoxCtrl.Checked  = (keyState & KeyStates.KEYSTATE_CTRL) != 0;
this.checkBoxAlt.Checked    = (keyState & KeyStates.KEYSTATE_ALT) != 0;
this.checkBoxNum.Checked = (keyState & KeyStates.KEYSTATE_NUMLOCK) != 0;
this.checkBoxCaps.Checked = (keyState & KeyStates.KEYSTATE_CAPSLOCK) != 0;
this.checkBoxFunc.Checked = (keyState & KeyStates.KEYSTATE_FUNC) != 0;
this.checkBoxOrangeTemp.Checked = (keyState & KeyStates.KEYSTATE_ORANGE_TEMP) != 0; 
```

希望有帮助！

# java - 如何在 Java 运行时生成泛型类？

> ID：13859714
> 
> 赞同：0
> 
> 时间：2012-12-13T12:18:52.060
> 
> 标签：java, generics, types

我有一堂课

```
myClass<T> 
```

我也有一个类型，与班级完全无关。

如何生成一个 myClass，其中泛型参数 T 是我在 java 反射中的类型？

我试过了

```
myClass.class.getConstructor() 
```

但我不能再进一步了。我在哪里可以指定要给构造函数的泛型参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:25:17.747

由于泛型是编译时检查，因此它们在运行时没有太大意义。在反射中，您可以使用非泛型类型。

```
 MyClass<T> myClass = /* MyClass.class */.newInstance(); // gets a warning but works. 
```

# filter - MDX 措施过滤

> ID：13859715
> 
> 赞同：1
> 
> 时间：2012-12-13T12:18:55.667
> 
> 标签：filter, mdx

我有一个 MDX 查询，它根据 Date、StateProduct 和 Country 获取销售额。现在我需要知道一个特定国家/地区的销售额有多少，其余国家有多少。是否可以将销售度量过滤为两个不同的度量？就像在示例中一样：

MEMBER [Measures].[SalesOneParticular] AS 筛选在一个特定国家/地区的销售量度。

MEMBER [Measures].[SalesOthers] AS Filter Sales measure in Other countries

在列上选择 {[Measures].[SalesOneParticular],[Measures].[SalesOthers]}

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:13:39.770

第一个成员只是您想要的特定国家/地区的正常切片。第二个成员是减去第一个成员的所有项目。这些成员将考虑您在切片器中的任何内容。

```
WITH MEMBER [Measures].[SalesOneParticular] AS
([Measures].[Sales], [Country].[Country].&[USA])

MEMBER [Measures].[SalesOthers] AS
([Measures].[Sales], [Country].[Country]) - [Measures].[SalesOneParticular])

SELECT {[Measures].[SalesOneParticular],[Measures].[SalesOthers]} ON COLUMNS 
```

对于 [SalesOthers] 你也可以做

```
MEMBER [Measurs].[SalesOthers] AS
[Measures].[Sales] - Measures].[SalesOneParticular] 
```

对于此示例，它假设您的比较器是层次结构的顶部并且会更快。如果您想比较层次结构中的其他内容，请使用第一个示例。

# asp.net - 在 Crystal Reports 中处理大数据

> ID：13859722
> 
> 赞同：1
> 
> 时间：2012-12-13T12:19:26.660
> 
> 标签：asp.net, sql-server, performance, crystal-reports

我在我们的会员管理系统中使用 Crystal Report，我们正在 Asp.net、c# 和 SQL Server 上开发。

目前，该数据库在表中有超过 100000 行，并将随着时间和组织的增长而不断增长。

我们面临的问题是关于性能的。报告的速度太慢了。在本地机器上，它工作得很好，但是当它托管在服务器上时，从一个页面加载和导航到另一个页面需要很长时间。当用户导航到下一页时，每次最多等待 2-3 分钟。

它是一个单一的报告，即没有子报告。

我已经检查了数据库索引，但仍然没有重大改进。

请建议我应该如何处理这个问题。如果有人知道如何在 Crystal 中进行分页，因为我们在网格上执行，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:27:38.357

您多久运行一次报告？这些信息是每小时需要的，还是只是每日更新报告？

如果是后者，那么我建议使用报表服务器生成一次报表并将数据导出为 PDF。该报告可以在非工作时间生成。然后可以将其存储在服务器上或通过电子邮件发送给必要的各方。这样您就不必在每次有人需要报告时都访问数据库。

# javascript - Bxslider 在 Firefox mac 的下一张幻灯片上显示为空白

> ID：13859726
> 
> 赞同：1
> 
> 时间：2012-12-13T12:19:34.030
> 
> 标签：javascript, jquery, bxslider

我在（Firefox mac）上遇到 bxslider 问题，并在下一张幻灯片上获得空白视频。

不知道是什么问题，当我检查其他浏览器时看起来不错

这是我的测试链接 - [http://elixirbox.com/temp/bxslider/](http://elixirbox.com/temp/bxslider/)

这是我的js代码

```
$(document).ready(function(){
    $('.bxslider').bxSlider({
    video: true
});

$('iframe').each(function()
     {var url = $(this).attr("src");
      var result = url.search(/youtube/i);
      if(result!=-1)
       {result = url.indexOf('?');
        if(result!=-1)  
          {$(this).attr("src",url+"&wmode=transparent");
          } else {$(this).attr("src",url+"?wmode=transparent");}
       }
     });
      }); 
```

这是我的 html 代码

```
<div  style="width:500px; margin:0 auto">
<ul class="bxslider">
<li>
    <iframe src="http://player.vimeo.com/video/51686357" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
</li>
<li>
    <iframe title="YouTube video player" width="307" height="190" src="http://www.youtube.com/embed/yX93uJshpj0" frameborder="0" wmode="Opaque" allowfullscreen=""></iframe>
</li>
<li>
    <iframe src="http://player.vimeo.com/video/51686357" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T19:19:33.593

我不知道您是否找到了解决方案，但我看到了两个建议。

1.  将 useCSS: false 添加到您的函数调用中。
2.  在 YouTube 通话结束时添加 ?wmode=opaque（或 &wmode=opaque，如果您已经使用过？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T23:59:23.867

将 swf 文件嵌入 bxslider 时，我在使用 Firefox（Chrome 和 IE 都可以）时遇到了同样的问题。将 wmode="opaque" 添加到 <object> 标记并将 bxslider 配置 "video" 更改为 false 将使其完美运行。我的代码：

```
<li>
  <object type="application/x-shockwave-flash" data="210240.swf" width="260px" height="110px" id="p_2730_w_318" wmode="opaque"></object>
</li>

<script type="text/javascript">
$(document).ready(function(){
  $('.bxslider').bxSlider({
    //video: true   
  });
});
</script> 
```

# r - 将一个 data.frame 中的 cytoband 信息分配给另一个 data.frame 中的基因组位置

> ID：13859729
> 
> 赞同：1
> 
> 时间：2012-12-13T12:19:35.647
> 
> 标签：r, dataframe

我有两个 data.frames (`cytoband`和`windows`)。因此，我想为 data.frame 中的`maploc`列的每个值从`windows`data.frame 中找到对应`cytoband`的`cytoband`值（见下文）。

```
head(windows)
             chrom  maploc      X4_TU_9 CNV
chr1_1        chr1  291587  0.055690883   0
chr1_2        chr1  640937  0.039105630   0
chr1_3x       chr1  792810 -0.009465735   0
chr1_14xxxxx  chr1  924029 -0.033792175   0
chr1_25xxx    chr1 1035540 -0.010869910   0
chr1_42xxxx   chr1 1184607 -0.020095050   0

head(cytoband)
  chrom chromStart chromEnd Cytoband      G
1  chr1          0  2300000   p36.33   gneg
2  chr1    2300000  5400000   p36.32 gpos25
3  chr1    5400000  7200000   p36.31   gneg
4  chr1    7200000  9200000   p36.23 gpos25
5  chr1    9200000 12700000   p36.22   gneg
6  chr1   12700000 16200000   p36.21 gpos50 
```

`chromStart - chromEnd`理想情况下，R 应该为每个值找到对应的染色体和核苷酸间隔 ( )`maploc`并为其分配匹配`cytoband`信息。

非常感谢您的帮助！！！

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:11:16.703

您提供的数据似乎不适合*证明*您的问题（即使数据是正确的）-“chromStart”中的第一行-您的细胞带中的“chromEnd”范围`data.frame`满足所有“maploc”值你的窗户`data.frame`。

也就是说，这是一个包含一些虚构数据的最小示例，您应该能够将其扩展到您的实际数据。

### 补一些数据

```
set.seed(1)
windows <- data.frame(
  chrom = "chr1",
  maploc = sort(floor(runif(10, 500, 5000))),
  X4_TU_9 = rnorm(10)
)
cytoband <- data.frame(
  chrom = "chr1",
  chromStart = seq(0, 6000, 1000),
  chromEnd = seq(1000, 7000, 1000),
  Cytoband = paste("p36", sample(20:40, 7), sep = ".")
)

head(windows, 3)
#   chrom maploc    X4_TU_9
# 1  chr1    778 -0.8204684
# 2  chr1   1407  0.4874291
# 3  chr1   1694  0.7383247
head(cytoband, 3)
#   chrom chromStart chromEnd Cytoband
# 1  chr1          0     1000   p36.30
# 2  chr1       1000     2000   p36.31
# 3  chr1       2000     3000   p36.29 
```

### 用于`findInterval`将“maploc”值与“细胞带”中定义的间隔匹配`data.frame`

```
WhichRange <- findInterval(windows$maploc, c(0, cytoband$chromEnd))
WhichRange
#  [1] 1 2 2 3 4 4 4 5 5 5 
```

### 使用该信息将“Cytoband”值从“cytoband”匹配并复制到“windows”

```
windows$Cytoband <- cytoband$Cytoband[WhichRange]
#    chrom maploc    X4_TU_9 Cytoband
# 1   chr1    778 -0.8204684   p36.30
# 2   chr1   1407  0.4874291   p36.31
# 3   chr1   1694  0.7383247   p36.31
# 4   chr1   2174  0.5757814   p36.29
# 5   chr1   3077 -0.3053884   p36.23
# 6   chr1   3331  1.5117812   p36.23
# 7   chr1   3473  0.3898432   p36.23
# 8   chr1   4542 -0.6212406   p36.34
# 9   chr1   4586 -2.2146999   p36.34
# 10  chr1   4751  1.1249309   p36.34 
```

# wpf - 控件创建过程 WPF 的步骤

> ID：13859730
> 
> 赞同：1
> 
> 时间：2012-12-13T12:19:39.987
> 
> 标签：wpf, wpf-controls

我一直在寻找这样的解释，但我还没有找到。问题是我想知道 Wpf 控件的初始化/创建过程的步骤。

让我们使用一个简单的 Button，我想知道调用构造函数时发生了什么，何时将控件添加到 visualTree/logicalTree，何时调用依赖属性值，何时调用 ApplyTemplate()？

我需要这些信息才能编写正确的自定义控件，我认为这也会对其他人有所帮助，以防他们想知道为什么 this.Template.FindName("test") 在控件的构造函数中被调用时总是返回“null”。

任何人都可以回答这个问题或向我提供教程链接，其中详细解释了初始化控件的概念吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:00:08.953

根据[这个 SO answer here](https://stackoverflow.com/a/1746975/302677)

> **创建和显示窗口时的事件序列**
> 
> 根据要求，以下是创建和显示窗口时 WPF 中的主要事件序列：
> 
> 1.  在创建对象时调用构造函数和 getter/setter，包括正在更新的对象以及从它们继承的任何对象上的 PropertyChangedCallback、ValidationCallback 等
>     
>     
> 2.  当每个元素被添加到可视化或逻辑树时，它的 Intialized 事件会被触发，这会导致除了您可以定义的任何特定于元素的初始化之外，还可以找到样式和触发器 [注意：不会为逻辑树中的叶子触发初始化事件如果根目录下没有 PresentationSource（例如 Window）]
>     
>     
> 3.  窗口及其上所有未折叠的视觉对象都是测量的，这会在每个控件上产生一个 ApplyTemplate，这会导致额外的对象树构造，包括更多的构造函数和 getter/setter
>     
>     
> 4.  窗口及其上所有未折叠的视觉对象均已排列
>     
>     
> 5.  窗口及其后代（逻辑和视觉）接收到 Loaded 事件
>     
>     
> 6.  任何在首次设置时失败的数据绑定都会重试
>     
>     
> 7.  窗口及其后代有机会以视觉方式呈现其内容
>     
>     
> 
> 步骤 1-2 在创建窗口时完成，无论它是否显示。其他步骤通常在显示窗口之前不会发生，但如果手动触发它们可以更早发生。

另外，我个人发现[DispatcherPriority Enum](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)在某些情况下对确定事件顺序很有用

*   无效的
*   不活跃
*   系统空闲
*   应用空闲
*   上下文空闲
*   背景
*   输入
*   **已加载**
*   **使成为**
*   **数据绑定**
*   **正常**- 构造函数在这里运行
*   发送

# batch-file - 如果在将 SkyDrive 映射为网络驱动器并将文件复制到其中时发生错误，则创建错误日志

> ID：13859732
> 
> 赞同：2
> 
> 时间：2012-12-13T12:19:39.593
> 
> 标签：batch-file

您好所有社区成员，我目前正在使用一个简单的批处理脚本将 SkyDrive 挂载为网络驱动器，将文件复制到其中，最后断开连接。我将其用作异地备份的基本形式。

```
@echo off
echo Backing up to Skydrive
net use Z: \\https://d.docs.live.net/XXXX Password /user:Username
copy D:\Home\Data\file1.ext Z:\
copy D:\Home\Data\file2.ext Z:\Documents
net use Z: /delete 
```

我要添加到此脚本中的是错误日志记录。命令一个接一个地运行，如果一个或多个命令失败，我想创建一个错误日志。我想我需要使用 ERRORLEVEL 命令，但我不知道如何使用和实现它来实现我的目标。

我会很感激任何意见。感谢您的时间和关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:34:27.237

您可以重定向 stderr 以查找命令在执行时吐出的任何错误

```
@echo off
echo Backing up to Skydrive
net use Z: \\https://d.docs.live.net/XXXX Password /user:Username 2>>log.txt
copy D:\Home\Data\file1.ext Z:\ 2>>log.txt
copy D:\Home\Data\file2.ext Z:\Documents 2>>log.txt
net use Z: /delete 2>>log.txt
for %%a in (log.txt) do if not %%~za gtr 0 del %%a /f /q 
```

显然你只输出那些实际上可以给出错误的:)

# mysql - 在 MySQL 表中查找按非唯一列排序的下 N 行

> ID：13859733
> 
> 赞同：2
> 
> 时间：2012-12-13T12:19:44.623
> 
> 标签：mysql, select

我找不到办法，也不确定如何搜索这个问题，因为我发现的并不是我想要的，而且答案也不适用。

我有一个包含两个字段（char 和 num）的表，'num' 是唯一的，但 'char' 不是，如示例所示：

```
char | num
_________
a    | 2
b    | 1
c    | 3
c    | 4 <-- I am here
c    | 7
c    | 8
d    | 5
e    | 9
f    | 6 
```

我想要的是从用'char'排序的表标记的行开始获取N行。

我在用着

```
SELECT * FROM table WHERE char >= $current_char ORDER BY char,num LIMIT $N 
```

但它不符合我的要求，因为它从 char='c' 和 num='3' 的行开始。

编辑：我可能会计算并使用 xdazz 的答案，因为代码会更清晰，但看起来我可以这样做：

```
SELECT * FROM table WHERE char > $current_char OR (char = $current_char AND num >= $current_num) ORDER BY char,num LIMIT $N 
```

但它不是很漂亮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:25:28.787

您标记`<-- I am here`意味着您知道这是第四条记录，因此您可以这样做：

```
SELECT * FROM table ORDER BY char,num LIMIT 4, $N 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:29:22.807

根本问题是你没有描述你的选择标准是什么。

您已表示要从标记为 的记录开始`<-- I am here`，但尚未定义该记录与任何其他记录的区别。

一旦您可以定义该记录的特殊之处以及为什么要从那里开始，这里的人将能够帮助您编写查询以查找该记录。否则，我们都只是猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:30:32.003

你用过`where char >= current_char`，但是你说它们不是唯一的，它可以是第 5 行或第 6 行，而是使用这样的唯一行

```
 SELECT * FROM table WHERE num >= $current_num ORDER BY char LIMIT $N 
```

你不能说 char > somechar

# backbone.js - 应该在没有 Backbone 集合的情况下使用 Marionette CollectionView 吗？

> ID：13859734
> 
> 赞同：3
> 
> 时间：2012-12-13T12:19:47.960
> 
> 标签：backbone.js, marionette

尽管[Marionette Wiki](https://github.com/marionettejs/backbone.marionette/wiki/Use-cases-for-the-different-views)指出：

> 集合视图用于呈现 Backbone.Collection，以及集合中每个项目的视图实例。

可以将它用于其他目的，例如渲染一组 ItemViews，我们知道[它可以在没有 model 的情况下使用](https://stackoverflow.com/questions/13674770/using-marionette-itemview-for-views-without-models)。

一个典型的例子是导航菜单，其中每个链接都是一个 ItemView，它不会触发路线更改，但会发出布局可以监听的事件以显示其区域。

使用最终与模型资源不相关且不太可能需要重新渲染的 CollectionView 是否被认为是不好的做法或不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:55:40.443

> 使用最终与模型资源不相关且不太可能需要重新渲染的 CollectionView 是否被认为是不好的做法或不正确？

不，这不是不好的做法或不正确的使用。它只是重新利用它并对其进行定制——这没有错。

默认行为是渲染 Backbone.Collection，但可以根据需要进行更改，为场景渲染任何事物集合。例如，我见过人们改变`serializeData`渲染数组的方法。

但是，您需要注意的是给 CollectionView 增加了比其价值更多的复杂性。更好地利用您的时间来构建您自己的视图类型来处理您需要的场景，而不是尝试为此重新使用 CollectionView。不过，我并不是说你现在就是这种情况。只是需要注意复杂性。

# objective-c - 如何从代码中选择 UICollectionView 的项目/单元格

> ID：13859736
> 
> 赞同：6
> 
> 时间：2012-12-13T12:19:48.710
> 
> 标签：objective-c, ios, ipad, uicollectionview, uicollectionviewcell

我`UICollectionView`在我的应用程序中实现了一个。我的问题是我需要选择（就像用户点击它一样）一个单元格`programmatically`。方法：

```
- (void)selectItemAtIndexPath:(NSIndexPath *)indexPath 
                     animated:(BOOL)animated 
               scrollPosition:(UICollectionViewScrollPosition)scrollPosition 
```

那是`UICollectionView`类的一部分不是我需要调用的，因为此方法不调用：

```
- (void)collectionView:(UICollectionView *)collectionView 
        didSelectItemAtIndexPath:(NSIndexPath *)indexPath 
```

它只是将`selected`单元格的属性设置为`YES`;

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-17T08:38:38.453

是的，这是正确的行为。文档`[selectItemAtIndexPath:animated:scrollPosition:]` [说](https://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionView_class/Reference/Reference.html#//apple_ref/occ/instm/UICollectionView/selectItemAtIndexPath%3aanimated%3ascrollPosition%3a)：

> 此方法不会导致调用任何与选择相关的委托方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-13T00:23:19.597

我打电话`[self collectionView:yourView didSelectItemAtIndexPath:yourIndexPath]`以编程方式选择一个单元格。但在方法中，单元格始终为零。当用户选择一个单元格时，这非常有效。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-08T11:48:45.053

首先，您需要使目标单元格可见，否则`[yourCollectionView cellForItemAtIndexPath:yourIndexPath]`总是返回 nil。

```
// scroll to the cell
[yourCollectionView scrollToItemAtIndexPath:yourIndexPath
                           atScrollPosition:UICollectionViewScrollPositionBottom 
                                   animated:NO];

// call delegate method
[self collectionView:yourCollectionView didSelectItemAtIndexPath:yourIndexPath];

// now you have selected the cell and can do anything to it in the delegate method :-) 
```

# maven - 在 Maven 测试依赖项上运行 testNG

> ID：13859737
> 
> 赞同：1
> 
> 时间：2012-12-13T12:19:53.420
> 
> 标签：maven, testng

我有一个依赖于测试项目的 Maven 项目。我想在这个项目上运行 testNG：

```
<groupId>com.myGroup</groupId>
<artifactId>assembly</artifactId>
<version>1.0.0-SNAPSHOT</version>

<dependencies>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.4</version>
    </dependency>
    <dependency>
        <groupId>com.myGroup</groupId>
        <artifactId>myArtifact</artifactId>
        <version>1.0.0-SNAPSHOT</version>
        <type>test-jar</type>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <configuration>
            <test>MyTest</test>
                <suiteXmlFiles>
                    <suiteXmlFile>test-suites/all-test.xml</suiteXmlFile>
                </suiteXmlFiles>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

但是当我在上面的项目上运行**mvn clean install时没有任何反应。**是否可以设置 maven-surefire-plugin 以在例如上运行 testNG。二进制依赖？

编辑：

这个：

[http://softwaremavens.blogspot.dk/2009/09/running-tests-from-maven-test-jar-in.html](http://softwaremavens.blogspot.dk/2009/09/running-tests-from-maven-test-jar-in.html)

似乎是正确的。如果可以直接从依赖项中运行代码而不必解压缩它，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T10:30:37.983

现在可以使用 Maven Surefire v2.15。只需将以下类型的配置添加到 surefire 插件中：

```
<build>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.15</version>
    <configuration>
      <dependenciesToScan>
        <dependency>com.group.id:my-artifact</dependency>
        <dependency>com.group.id:my-other-artifact</dependency>
      </dependenciesToScan>
      ...
    </configuration>
    ...
  </plugin>
  ...
</build> 
```

您还应该在依赖项部分声明实际的依赖项：

```
<dependencies>
  <dependency>
    <groupId>com.group.id</groupId>
    <artifactId>my-artifact</artifactId>
    <type>test-jar</type>
    <version>1.1</version>
    <scope>test</scope>
  </dependency>
  <dependency>
    <groupId>com.group.id</groupId>
    <artifactId>my-other-artifact</artifactId>
    <type>test-jar</type>
    <version>1.1</version>
    <scope>test</scope>
  </dependency>
</dependencies> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:42:27.960

乍一看，我在您的 pom.xml 中看不到任何缺陷。

请参考[1](http://dharshanaw.blogspot.com/2012/10/how-to-execute-testng-tests-in-side.html)我认为这就是您要生成和执行测试二进制文件的内容。

[1](http://dharshanaw.blogspot.com/2012/10/how-to-execute-testng-tests-in-side.html) . [http://dharshanaw.blogspot.com/2012/10/how-to-execute-testng-tests-in-side.html](http://dharshanaw.blogspot.com/2012/10/how-to-execute-testng-tests-in-side.html)

# asp.net-mvc - 使用 XDomainRequest 将参数发布到 ASP.NET MVC 控制器

> ID：13859741
> 
> 赞同：3
> 
> 时间：2012-12-13T12:20:05.893
> 
> 标签：asp.net-mvc, cross-domain

我使用 XDomainRequest 向 MVC 控制器发送数据，但参数为空

```
 if (wQuery.browser.msie && window.XDomainRequest) {
    // Use Microsoft XDR
    var xdr = new XDomainRequest();
    xdr.open("post", url);
    xdr.onload = function () {      
        updateData(xdr.responseText);
    };
    var data1= {css:"cssvalue", culture:"value"};
    var params = '';
    for (key in data1) {
           params = params+'&'+key+'='+data1[key];
    }
    xdr.send(params);
   } else {
     ....}

 public ActionResult Index(string css, string culture)
        {
              css and culture = null here
        } 
```

# android - 我应该为 XMPP 服务器使用什么样的 Android 服务

> ID：13859743
> 
> 赞同：-4
> 
> 时间：2012-12-13T12:20:11.143
> 
> 标签：android, xmpp, android-service

我有一个使用 asmack 的 XMPP 服务器。我已经在 android 应用程序中使用了它，但没有作为服务使用。结果，当我关闭应用程序时，客户端与服务器断开连接。我应该使用哪个 Android 服务来连接该连接始终存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:41:26.980

您应该实现自己的类来扩展 android 框架的 Service 基类。developer.android.com 和此处有大量文档。但请注意，如果您实现该服务以使其始终在后台运行，则您必须使用 AIDL 接口与其通信。一开始有点奇怪，但可行。还要注意，权力越大，责任越大。因此，您正在启动始终在后台运行的服务。当然，您将开始使用 WakeLocks 以确保在设备进入睡眠状态之前完整地写入更复杂（更长）的 XMPP 数据包。但要对此负责。很容易成为电池寿命的负担。也值得一看 C2DM for Android。

# java - 带有数组的 java.lang.NullPointerException

> ID：13859744
> 
> 赞同：0
> 
> 时间：2012-12-13T12:20:12.657
> 
> 标签：java

嘿，程序中的名称是葡萄牙语，但我认为这是可以理解的，如果您有任何疑问，请询问，我会翻译。

所以我得到了`NullPointerException`这些。数组 Vector_Canais 在构造函数中初始化：

```
public Box(int capacidade) {
        Time a = new Time();
        Vector_Canais = new Canal[DEFAULT_SIZE];
    }

public static void novoCanal() {
        Scanner in = new Scanner(System.in);

        Cnl = in.nextLine();
        Vector_Canais[i] = new Canal(Cnl);      
        i++;
    }

    public static String listaCanais(int i) {
        return (Vector_Canais[i].getCanal());
    }

public static void listaCanais() {
        for (int a = 0; a < 100; a++) {
            if (Box.listaCanais(a) != null) {
                System.out.println(Box.listaCanais(a));
            }
        } 
```

i 初始化为 0。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:26:36.027

很可能你还没有初始化数组`Vector_Canais`或者你还没有初始化它的所有成员（例如，`novoCanal`之前没有被调用过 100 次）。请记住，创建一个大小为 100（一个类）的数组意味着创建一个包含 100`null`个插槽的数组，而不是 100 个对象。在您为每个人调用构造函数之前，他们可能会抛出这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:23:00.720

你还没有显示在哪里`Vector_Canais`初始化 - 我猜你*没有*初始化它。

试试这个：

```
static private Vector_Canais Canal[] = new Canal[100]; // for example 
```

# iphone - event.startDate 输出为空

> ID：13859745
> 
> 赞同：0
> 
> 时间：2012-12-13T12:20:15.203
> 
> 标签：iphone, ios, ipad, eventkit

我正在尝试将事件添加到日历，但 event.startDate 输出为空。

```
event.startDate = [formatter dateFromString:dateandtime]; 
```

谁能告诉我为什么？

我检查了格式化程序，一切都很好..但我没有保存事件。

请找到代码供您参考。

```
-(IBAction)ADDEvent
{

    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
    [formatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
    [formatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss ZZZ +-HHMM"]; // SPOT the difference in this line
    NSString *dateandtime =[NSString stringWithFormat:@"%@",self.eventtime];

    EKEventStore *eventstore = [[EKEventStore alloc] init];
    EKEvent *event  = [EKEvent eventWithEventStore: eventstore];
    event.title     = self.eventname;
    event.startDate = [formatter dateFromString:dateandtime];
    event.endDate=[[formatter dateFromString:dateandtime] dateByAddingTimeInterval:(30*60)];
    NSLog(@"%@",[[formatter dateFromString:dateandtime] dateByAddingTimeInterval:(30*60)]);
         NSLog(@"%@",dateandtime);
    [event setCalendar:[eventstore defaultCalendarForNewEvents]];

     }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:04:36.503

你不知道`self.eventtime`是什么类型，所以不可能给出明确的答案，但是我可以说你得到了一个`nil`，因为日期`self.eventtime`不是你告诉`NSDateFormatter`期望的格式。

我还建议将对象转换为字符串然后转换为日期可能也不是最有效的方法。也许`NSDateComponent`可以更直接地做同样的工作？

# sql - PostgreSQL - DataError：数字类型的无效输入语法：“产品”

> ID：13859748
> 
> 赞同：5
> 
> 时间：2012-12-13T12:20:42.233
> 
> 标签：sql, postgresql

所以我不明白为什么它会给出这个错误。字段值“产品”是数字吗？.. 我使用 UNION ALL 进行查询，这使得第一行显示其他行的总和。我的查询很长，所以我不会发布它（但如果有必要，我会发布它）。

所以首先我会给出我的代码片段：

```
with w as (
SELECT
...
CASE x.variants WHEN x.variants THEN x.product || ' - ' || x.variants else x.product END as product
...

) 

SELECT 
...
'Product' as product,
...
UNION ALL
SELECT * FROM w 
```

所以我使用产品列在第一行显示为“产品”（因为我不需要在第一行的这个字段中计算。但计算其他字段总计）

当我运行查询时，它会输出此错误：

```
DataError: invalid input syntax for type numeric: "Product"
LINE 104: 'Product' as product, 
```

编辑：PostgreSQL 版本 8.4

完整查询：

```
(
with w as (SELECT
min(fld2.id) AS id, -- note. Posted code is working now, but this select part was not
fld2.partner as partner, -- the same that is at the bottom (where different first line
fld2.product as product, -- is queried. So that gave error.
fld2.qty1 as qty1,
fld2.qty2 as qty2,
fld2.q1 as q1,
fld2.q2 as q2,
CASE WHEN (q1 >= q2 and q2 != 0) THEN ((q1-q2)/q2) * 100 WHEN (q1=0 or q2=0) THEN NULL WHEN (q2 > q1 and q1!=0) THEN ((q1/q2)-1)*100 END as percent_q,
fld2.price_q as price_q,
fld2.y1  as y1,
fld2.y2 as y2,
CASE WHEN (y1 >= y2 and y2 != 0) THEN ((y1-y2)/y2) * 100 WHEN (y1=0 or y2=0) THEN NULL WHEN (y2 > y1 and y1!=0) THEN ((y1/y2)-1)*100 END as percent_y,
fld2\. price_y as price_y

FROM
(
SELECT 
min(x.id) AS id,
x.partner as partner,
--quarter as quarter,
CASE x.variants WHEN x.variants THEN x.product || ' - ' || x.variants else x.product END as product,
sum(case when (calcyear=DATE_PART('year',  now()) and x.quarter=3) then x.qty else 0 end) as qty1,
sum(case when (calcyear=DATE_PART('year',  now() - '1 year'::interval) and x.quarter=3) then x.qty else 0 end) as qty2,
sum(case when (calcyear=DATE_PART('year',  now()) and x.quarter=3) then price_unit else 0 end) as q1,
sum(case when (calcyear=DATE_PART('year',  now() - '1 year'::interval) and x.quarter=3) then price_unit else 0 end) as q2,
sum(case calcyear when  DATE_PART('year',  now()) then price_unit else 0 end) as y1,
sum(case calcyear when DATE_PART('year',  now() - '1 year'::interval) then price_unit else 0 end) as y2,
sum(case when (calcyear=DATE_PART('year',  now()) and x.quarter=3) then price_unit WHEN (calcyear=DATE_PART('year',  now() - '1 year'::interval)  and x.quarter=3) THEN -1*price_unit end) AS price_q,
sum(case when calcyear=DATE_PART('year',  now()) then price_unit ELSE -1*price_unit end) AS price_y
FROM (
  SELECT
    min(so.id) as id,
    DATE_PART('year',  so.date_order) AS calcyear,
    DATE_PART('quarter',  so.date_order) AS quarter,
   sol.price_unit as price_unit,
   rp.name as partner,
   pt.name as product,
   pp.variants as variants,
   sol.product_uom_qty as qty
FROM 
sale_order AS so 
INNER JOIN sale_order_line AS sol ON (sol.order_id = so.id)
INNER JOIN res_partner as rp ON (so.partner_id = rp.id)
INNER JOIN product_product as pp ON (sol.product_id=pp.id)
INNER JOIN product_template as pt ON (pp.product_tmpl_id=pt.id)
WHERE EXISTS(
SELECT * FROM  res_partner_category_rel rpcl
WHERE 
rpcl.partner_id=rp.id and rpcl.category_id=37
and (so.date_order >= date_trunc('year', now() - '1 year'::interval)::timestamp::date  and so.date_order <= date_trunc('year', now()+ '1 year'::interval)::timestamp::date-1 )
and rp.distributor=True and rp.active=True
and so.state != 'cancel'
)
GROUP BY
variants,
calcyear,
quarter,
price_unit,
partner,
product,
qty
) AS x
GROUP BY
 partner,
x.variants,
x.product
ORDER BY
  partner
)fld2
GROUP BY
partner,
q1,
q2,
y1,
y2,
qty1,
qty2,
product,
price_q,
price_y,
percent_q,
percent_y
ORDER BY 
partner
)
SELECT
1111 as id,
'Viso' as partner,
'Product' as product,
sum(uf.qty1) as qty1,
sum(uf.qty2) as qty2,
sum(uf.q1) as q1,
sum(uf.q2) as q2,
sum(CASE WHEN (uf.q1 >= uf.q2 and uf.q2 != 0) THEN ((uf.q1-uf.q2)/uf.q2) * 100 WHEN (uf.q1=0 or uf.q2=0) THEN NULL WHEN (uf.q2 > uf.q1 and uf.q1!=0) THEN ((uf.q1/uf.q2)-1)*100 END) as percent_q,
sum(uf.price_q) as price_q,
sum(uf.y1)  as y1,
sum(uf.y2) as y2,
sum(CASE WHEN (uf.y1 >= uf.y2 and uf.y2 != 0) THEN ((uf.y1-uf.y2)/uf.y2) * 100 WHEN (uf.y1=0 or uf.y2=0) THEN NULL WHEN (uf.y2 > uf.y1 and uf.y1!=0) THEN ((uf.y1/uf.y2)-1)*100 END) as percent_y,
sum(uf.price_y) as price_y
FROM 
(
SELECT 
sum(price_q) as price_q,
sum(price_y) as price_y,
sum(qty1) as qty1,
sum(qty2) as qty2,
sum(q1) as q1,
sum(q2) as q2,
sum(y1)  as y1,
sum(y2) as y2
FROM w
)uf
UNION ALL
SELECT * FROM w
) fld 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T12:37:36.093

好的，我发现出了什么问题。愚蠢的我：）。它给出了这个错误，因为查询的主要部分，选择列的顺序是错误的（即使在我的系统中它是通过使用图形界面进行排序的，但在这种情况下，当使用 UNION ALL 时，列也需要正确排序）。因此，我将顺序更改为与第一行相同，并且有效。

# object - 将数据从设备传输到 Mac

> ID：13859750
> 
> 赞同：3
> 
> 时间：2012-12-13T12:20:52.910
> 
> 标签：object, bluetooth, iobluetooth

大家晚上好，

我正在尝试实现蓝牙功能，用户可以通过该功能将数据（数据可以是图像或视频）从设备发送到 mac 或桌面。谷歌搜索后，我从[www.pocketmagic.net/wp-content/uploads/2012/07/Bluetooth-iOS-Code.zip找到了代码](http://www.pocketmagic.net/wp-content/uploads/2012/07/Bluetooth-iOS-Code.zip)

在此，设备与当时启用的 mac 蓝牙配对。但是我没有得到任何用户可以在mac上传输文件的方法。

如果有人知道如何将文件从设备发送到 mac，请给我一些解决方案。

提前致谢。

# spring - 使用maven时spring配置文件放在哪里

> ID：13859755
> 
> 赞同：5
> 
> 时间：2012-12-13T12:21:21.067
> 
> 标签：spring, unit-testing, maven, junit

我正在尝试解决我的配置文件问题。

我有具有这种结构的 Spring MVC 应用程序（我当前的结构）

```
src/main/java/ .................. （java 类）
src/main/resources/ ..................（一些 .properties 文件）
src/main/webapp/ .....................（网页内容，web.xml）
src/main/webapp/spring/ .................（其他spring配置文件，app-confix.xml等）
src/main/webapp/myApp-servlet.xml .... (servlet 配置)

src/test/java ......................... (java 测试类)
src/test/resources ...................（一些测试 .properties 文件）

```

（这是非常标准的 Maven 项目目录结构）

所以，我的问题是：**我是否应该将 spring 配置文件放到资源目录中？** 我不确定它们是否可以被视为资源文件。大多数spring项目在WEB-INF/目录下都有配置。但是单元测试存在一个问题，因为当我需要加载 servlet 配置时，maven 会期望 /test/resources 目录中的配置文件。我知道，我可以将上下文 xml 文件复制到测试类，一切都会好起来的，但这对我来说看起来不太好。

我在互联网上阅读了很多文章，但我仍然不确定什么是正确的方法。

所以我有树选项：

**1.**保持现有结构

**2.**将所有spring配置移动到/main/(java|test)/resources 这里我可以看到一件坏事。所有配置文件都将在 classes 目录中，我不确定这是否正确。

**3.**只将servlet config 移动到/main/(java|test)/resources 并将其他spring 配置文件保留在/WEB-INF/ 目录中。

那么，你有什么推荐的？将 Spring 与 Maven 和 JUnit 一起使用时，配置文件放置的最佳实践是什么？

*更新：*选项 2\. 和 3 中的固定目录命名。

*更新：*我发现关于 Spring 最佳实践的阅读 [1] 非常有趣。它看起来很有希望并证实了 Ralph 的解决方案。我仍然对 META-INF 目录的存在不满意，`WEB-INF/classes`但是，嗯……没有什么是完美的。

[1] [http://gordondickens.com/wordpress/2012/07/03/enterprise-spring-best-practices-part-1-project-config/](http://gordondickens.com/wordpress/2012/07/03/enterprise-spring-best-practices-part-1-project-config/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T13:09:01.860

一个常见的模式（例如 Spring Roo 应用程序使用的）是将配置文件放在`src\main\resources\META-INF\spring\`

`classpath:META-INF\spring\application-context.xml`然后，您可以在测试和应用程序中通过相同的表达式加载它们。

# matlab - 从matlab中的数组中提取实数

> ID：13859760
> 
> 赞同：7
> 
> 时间：2012-12-13T12:21:37.233
> 
> 标签：matlab, matrix, complex-numbers

我想只从包含虚数的数组中提取实数，我也想从数组中消除虚数。因此，从一个10个元素的数组，其中5个实数和5个虚数，得到一个只有5个元素的数组，它必须是实数元素。这在 MATLAB

**编辑：**

添加示例

```
input_array = [ 1, 1+i, -2+2*j, 3, -4, j ]; 
```

所需的输出将是

```
output = [ 1, 3, -4 ]; 
```

其中仅包含 的真实元素`input_array`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T12:39:58.627

另一种更矢量化的方式：

```
sel = a == real(a); % choose only real elements

only_reals = a( sel ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T12:30:24.583

您可以将[isreal](http://www.mathworks.nl/help/matlab/ref/isreal.html)与[arrayfun](http://www.mathworks.nl/help/matlab/ref/arrayfun.html)结合使用来检查数字是否为实数和/或 [实数](http://www.mathworks.nl/help/matlab/ref/real.html)以仅保留实数部分。例子：

```
a = [1+i 2 3 -1-i];
realidx = arrayfun(@isreal,a);
only_reals = a(realidx);
only_real_part = real(a);

>> only_reals

  = [ 2  3]

>> only_real_part

  = [1 2 3 -1] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T23:32:48.057

实数的虚部为零，所以：

```
input_array(imag(input_array)==0);

ans =
    1     3    -4 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-13T12:29:54.070

你可以用[`isreal`](http://www.mathworks.com/help/matlab/ref/isreal.html)函数来做到这一点。结果`isreal`没有给出向量输出，这对 MATLAB 来说很奇怪，因为它通常会给出。因此，您需要使用 for 循环。

```
arr = [1+i 5 6-3i 8];
arrReal = [];
for idx = 1:numel(arr)
    if isreal(arr(idx))
        arrReal(end+1) = arr(idx);
    end
end 
```

我想这里的好人会想出一个无循环的解决方案。

夏编辑：

预分配输出结果的版本

```
arrReal = NaN( size(arr) ); % pre-allocation
for idx = 1:numel(arr)
    if isreal( arr(idx) )
        arrReal(idx) = arr(idx);
    end
end
arrReal( isnan( arrReal ) ) = []; % discard non-relevant entries 
```

当然，这个目标可以在没有循环的情况下实现（参见其他答案）。但是对于这个循环版本，预分配是一个重要的组成部分。

# zeromq - 如何高效地将 zeromq 2.2 升级到 3.2

> ID：13859764
> 
> 赞同：1
> 
> 时间：2012-12-13T12:21:46.880
> 
> 标签：zeromq

我想将我的 zeromq 2.2 版本升级到 zeromq 3.2。我认为这很容易，但是在正确安装新版本后，我使用此命令（ zmq.zmq_version() ）进行了检查。它仍然是2.2版本。

我不知道为什么它没有生效，我是这样做的： 1\. 我下载 zeromq 3.2 2\. 我用这些命令安装它：./configure,sudo make,sudo make install。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:46:05.573

你用什么语言工作？听起来语言绑定在某处使用了自己的 libzmq 副本。另外，安装后“sudo ldconfig”，只是为了确定。

# php - Wordpress 插件文件访问错误

> ID：13859765
> 
> 赞同：0
> 
> 时间：2012-12-13T12:21:48.420
> 
> 标签：php, wordpress

在开发 wordpress 插件时，我创建了一个`.php`文件，我在那里定义了一个函数，然后调用一个函数，如果我在浏览器中直接使用 as 访问该文件，`server_url/wp-content/plugins/plugin_name/file_name.php`那么它会在我所在的行给出函数重新声明错误调用该函数。请提供解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:23:39.180

尝试更改插件中的函数名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:51:59.437

可能的原因是在functions.php中存在与您的插件名称相同的函数，或者存在具有此名称的插件。尝试更改插件的名称。如果那次锻炼，然后尝试更改您的功能名称。

# python - 无法在 Django 中使用包含标签加载模板中的对象

> ID：13859768
> 
> 赞同：0
> 
> 时间：2012-12-13T12:21:52.377
> 
> 标签：python, django, django-templates

我想在 home.html 模板中显示对象，该对象主要在 laglist 模板中。我使用包含标签来执行操作，但它不起作用。以下是我的代码：

laglist.html

```
 {% extends "base.html" %}

    {% block lag %}
        <h2>Lam </h2>

        {% for leggo in leggos  %}
           <p><a href= "{% url halldetail leggo.id %}" >{{ leggo.name }}</a><p>
      <img src="{{MEDIA_URL}}/{{leggo.thumbnail_1.url}}" width="83" height="78"> <img src="{{MEDIA_URL}}/{{leggo.thumbnail_2.url}}" width="83" height="78" />

        <li>{{ leggo.state }}</li>
         {% endfor %}

    {% endblock %} 
```

查看 laglist：

```
 def lag_view(request):
        leggos=Fin.objects.filter(state='venu')
        for leggo in leggos:
            print leggo.id
        return render_to_response('laglist.html',  {'leggos':leggos,'leggo':leggo,'Fin':Fin},context_instance=RequestContext(request)) 
```

主页.html

```
 {% extends "base.html" %}
 {% block content %}

   <p> {% include 'laglist.html' %} </p>
 {% endblock %} 
```

看家

```
 def homp(request):
    return render_to_response('home.html',context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:41:05.453

这似乎是一个相当普遍的误解，尽管我不明白为什么。

视图呈现模板，而不是相反。模板与视图无关，包含模板不会调用视图。

如果你想在一些 Python 代码中包含一个模板，你需要编写一个自定义模板标签——可能你需要一个[包含标签。](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/#inclusion-tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:36:36.450

您需要将`leggos`字典传递到您的主视图才能正常工作。所以在你的主视图中试试这个。

```
def home(request):
    data = {}
    data['leggos'] = Fin.objects.filter(state='venu')
    return render_to_response('home.html', data, context_instance=RequestContext(request)) 
```

然后在 laglist.html 试试这个：

```
{% if leggos %}
    {% for leggo in leggos %}
        <p> {{ leggo }} </p>
    {% endfor %}
{% else %}
    <p> Sorry, No Leggos Found.</p>
{% endif %} 
```

# android - 如何将 Uri 图像压缩为位图

> ID：13859769
> 
> 赞同：4
> 
> 时间：2012-12-13T12:21:53.933
> 
> 标签：android, bitmap, compression, bitmapimage

此代码向我显示一个错误我想将选定的图像保存到数据库并检索我遵循这 2 个教程[http://nizaqatali.wordpress.com/2011/06/21/android-dialog-select-image-from-gallery/](http://nizaqatali.wordpress.com/2011/06/21/android-dialog-select-image-from-gallery/) 和这个 [http://androidhub4you.blogspot.com/2012/09/hello-friends-today-i-am-going-to-share.html](http://androidhub4you.blogspot.com/2012/09/hello-friends-today-i-am-going-to-share.html) 但这个问题是错误消息“方法压缩（Bitmap.CompressFormat，int , ByteArrayOutputStream) 未定义 Uri 类型"

```
 import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import android.app.Activity;
 import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
 import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;

 public class SQLiteDemoActivity extends Activity {

final int SELECT_PHOTO = 0;
 ArrayList<Contact> imageArry = new ArrayList<Contact>();
 ContactImageAdapter adapter;
 Button BrowseButton;
 DataBaseHandler db;

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

 db = new DataBaseHandler(this);
//get image from drawable
//Bitmap image = BitmapFactory.decodeResource(getResources(),R.drawable.facebook);

 BrowseButton=(Button)findViewById(R.id.BrowseButton);

  BrowseButton.setOnClickListener(new View.OnClickListener() {

  @Override
  public void onClick(View v) {
    // TODO Auto-generated method stub
     // in onCreate or any event where your want the user to
    // select a file
    Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
    photoPickerIntent.setType("image/*");

    startActivityForResult(photoPickerIntent, SELECT_PHOTO);

 }
  });

 }

@Override
 protected void onActivityResult(int requestCode, int resultCode, Intent      
imageReturnedIntent) {
 super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

switch(requestCode) {
case SELECT_PHOTO:
if(resultCode == RESULT_OK){
 Uri selectedImage = imageReturnedIntent.getData();

 //convert bitmap to byte
 ByteArrayOutputStream stream = new ByteArrayOutputStream();
selectedImage.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte imageInByte[] = stream.toByteArray();
/**
* CRUD Operations
* */
 //Inserting Contacts
Log.d("Insert: ", "Inserting ..");
  db.addContact(new Contact("FaceBook", imageInByte));
 //display main List view bcard and contact name

 //Reading all contacts from database
  List<Contact> contacts = db.getAllContacts();
 for (Contact cn : contacts) {
  String log = "ID:" + cn.getID() + " Name: " + cn.getName()
+ " ,Image: " + cn.getImage();

//Writing Contacts to log
Log.d("Result: ", log);
 //add contacts data in arrayList
imageArry.add(cn);

}
adapter = new ContactImageAdapter(this, R.layout.screen_list,
 imageArry);
ListView dataList = (ListView) findViewById(R.id.list);
 dataList.setAdapter(adapter);

}
}
}

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T12:39:49.500

尝试使用此代码希望对您有所帮助

```
Uri selectedImage = imageReturnedIntent.getData();

InputStream imageStream = null;
try {
    imageStream = getContentResolver().openInputStream(
            selectedImage);
} catch (FileNotFoundException e) {
    e.printStackTrace();
}

Bitmap bmp = BitmapFactory.decodeStream(imageStream);

ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray();
try {
    stream.close();
    stream = null;
} catch (IOException e) {

    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T13:39:29.950

试试这个。

```
try {

url = new URL("Image URL");
InputStream is = url.openConnection().getInputStream();
bitmap = BitmapFactory.decodeStream(is);
iv.setImageBitmap(bitmap);

} catch (Exception e) {
e.printStackTrace();
} 
```

# flash - Flash 错误：警告：过滤器不会呈现。不显示某些字体

> ID：13859771
> 
> 赞同：1
> 
> 时间：2012-12-13T12:21:57.743
> 
> 标签：flash, fonts, typography

我今天打开了一个 Flash 项目，它突然给我一个错误：

> 警告：过滤器不会呈现。DisplayObject 的过滤尺寸（26843549、20132662）太大而无法绘制。

我注意到我在我的 flahs 项目中使用的字体没有显示。它在库中，但在编译时我看不到它，Flash 给了我上面发布的错误。此外，当我在 Flash 中工作时，不编译类型也不会显示。文本字段在那里，文本被写入，也是静态的；但它不显示任何东西。罕见的是该字体在 ilustrator 和其他程序中运行良好。而且它不仅在这个项目中，在以前可以正常工作的版本中，我检查过，现在也存在同样的问题。请帮忙，这让我发疯了，我在这里也没有在互联网上找到类似的东西。我使用的字体称为 Cyclone，但并不是唯一在 Flash 中突然出现此问题的字体。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:56:48.457

这是由于最近的 Windows 更新。在遇到同样的问题后，我在 Adob​​e Flash Pro 论坛上找到了以下主题： [http ://forums.adobe.com/message/4920976#4920976](http://forums.adobe.com/message/4920976#4920976)

基本上，我们要么回滚其中一个更新（我相信它是 KB2753842），要么等待微软解决这个问题。同时，您可以使用一些“简单”的字体，例如 Arial。

# asp.net-mvc-3 - 请求时如何从网站页面获取新更新？

> ID：13859772
> 
> 赞同：0
> 
> 时间：2012-12-13T12:21:57.843
> 
> 标签：asp.net-mvc-3, iis-7

我每天或每周经常更改我的 Web 应用程序中的页面。通过浏览器请求该页面时，我只会得到旧的更新。所以为了在该页面中呈现新的更新，我需要多次刷新该页面。

在以编程方式请求该页面时，您能否建议任何逻辑以使用最新更改呈现我的 wepapge？我已经使用 ASP.NET MVC3.0 平台开发了我的 wep 应用程序。

（或）如果有任何更改，我们需要在 IIS 服务器[网站主机服务器] 中进行。

请建议这个过程是否可以在 wep 应用程序中进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:39:56.990

您可以通过在操作中放置以下代码来明确告诉浏览器不要缓存操作的结果：

```
HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

[一个更优雅的解决方案是将其放入您可以用来装饰动作的属性中，如该问题](https://stackoverflow.com/questions/2969450/how-to-stop-mvc-caching-the-results-of-invoking-an-action-method)的最佳答案中所述。

# c# - 如何从 C# 中的文本文件中获取特定行

> ID：13859773
> 
> 赞同：-1
> 
> 时间：2012-12-13T12:22:03.567
> 
> 标签：c#, c#-3.0

我有一个文本文件，其中包含这样的数据输入数据文件类型：INdia.Txt

```
INdia(s) - Input Data File Exists .....

**------------------------------------------**
Feed Counts:
**------------------------------------------**
Records in the Input File            : 04686
Records Inserted in  Table : 04069
Records Inserted in  Table    : 00617
**-------------------------------------------** 
```

我只需要在输出文件中获取这些数据

```
Records in the Input File  : 04686
Records Inserted in  Table : 04069
Records Inserted in  Table    : 00617 
```

我正在使用的代码

```
try
        {
            int NumberOfLines = 15;
            string[] ListLines = new string[NumberOfLines];
            using (FileStream fs = new FileStream(@"d:\Tesco\NGC\UtilityLogs\Store.log", FileMode.Open))
            {
                using (StreamReader reader = new StreamReader(fs, Encoding.UTF8))
                {
                    string line = null;
                    while ((line = reader.ReadLine()) != null)
                    {
                        Console.WriteLine(line);

                        if (line.Contains("Records"))
                        {
                            //Read the number of lines and put them in the array
                            for (int i = 8; i < NumberOfLines; i++)
                            {
                                ListLines[i] = reader.ReadLine();
                            }
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
            throw ex;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:44:32.633

This LINQ query will give you `IEnumerable<string>` which will contain all lines from file, which start with "Records" string:

```
var lines = File.ReadAllLines(path).Where(line => line.StartsWith("Records")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:28:29.387

尝试这个

```
 while ((line = reader.ReadLine()) != null)
   {
      if(!line.Contains("Records"))  //if line does not contain "Records"
      {
         continue;  //skip to next line/iteration
      }

      //else
      //process the line  
   } 
```

如果行数已知，那么这可以工作

```
 int line_number = 1;
   int startline = 15;
   int endline = 100;
   while ((line = reader.ReadLine()) != null)
   {
      if(line_number >= startline && line_number <= endline)  
      {
         //process the line  
      }

      line_number++;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:41:12.410

如果文件中的行数始终相同，请使用：

```
 string[] lines = File.ReadAllLines(fileName);

 string line1 = lines[5];
 string line2 = lines[6];
 string line3 = lines[6];
 ... 
```

甚至是这样的：

```
string[] lines = File.ReadAllLines(fileName);
string[] result = new string[3]; // No matter how many, but fixed

Array.Copy(lines, 5, result, result.Length); 
```

如果标题始终为 5 行并且文件始终以一行结尾，您甚至可以拥有动态行数：

```
string[] lines = File.ReadAllLines(fileName);
string[] result = new string[lines.Length - 6];
Array.Copy(lines, 5, result, result.Length); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:29:12.433

如果您的文件内容固定，请使用 INDEX。

使用 StreamReader 读取文件，然后通过 NEWLINE char 拆分 StreamReader 数据，您将获得一个数组，然后为该数组放置一个索引。

# php - 将静态多维数组变成动态数组

> ID：13859774
> 
> 赞同：1
> 
> 时间：2012-12-13T12:22:05.440
> 
> 标签：php

我有这个静态数组：

```
$elems = array(
  date($format, strtotime("12-12-12"))
     => array(
            "Title" => "title1",
            "Color" => "color1"),
  date($format, strtotime("12-12-11"))
     => array(
            "Title" => "title2",
            "Color" => "color2"),
); 
```

我想把它变成一个动态数组（具有相同的元素）。

由于某种原因，以下代码不好：

```
 $elems = array();
  $elems[] = date($format, strtotime("12-12-12"))
     => array(
            "Title" => "title1",
            "Color" => "color1");
  $elems[] = date($format, strtotime("12-12-11"))
     => array(
            "Title" => "title2",
            "Color" => "color2"); 
```

为什么不好？我应该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:27:58.710

你可以做：

```
$elems = array();
$elems[date($format, strtotime("12-12-12"))] = array(
        "Title" => "title1",
        "Color" => "color1");
$elems[date($format, strtotime("12-12-11"))] = array(
        "Title" => "title2",
        "Color" => "color2"); 
```

和大体上`$array = array('key' => 'value');`是一样的`$array['key'] = 'value';`。

另请查看[文档](http://php.net/manual/en/book.array.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:28:47.823

它应该是：

```
$elems = array();
$elems[date($format, strtotime("12-12-12"))] =  array(
    "Title" => "title1",
    "Color" => "color1"
); 
```

# java - 检查 Glassfish DAS 是否以编程方式运行

> ID：13859776
> 
> 赞同：1
> 
> 时间：2012-12-13T12:22:14.390
> 
> 标签：java, jakarta-ee, glassfish-3

如何检查 Glassfish DAS 是否以编程方式运行，即使它部署在本地机器或远程机器上？

使用 Java6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:24:00.977

我找到了一种方法来检查 DAS 是否启动，而不是 Linux 脚本。通过这种方式，我的应用程序和 DAS 是在同一台机器上还是安装在不同的机器上都没有关系。

```
public static boolean isUrlReachable(String host) {
  String URLName="http://"+host+":4848";
  boolean isUp = false;
  try {
     HttpURLConnection.setFollowRedirects(false);
     HttpURLConnection con = (HttpURLConnection) new URL(URLName).openConnection();
     con.setRequestMethod("GET");
     isUp = (con.getResponseCode() == HttpURLConnection.HTTP_OK);
     con.disconnect();
  }
  catch (Exception e) {
     return isUp;
  }

  return isUp; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-13T08:14:26.957

您可以使用`socket`检查您的连接是否正常：

我用这种方式和我一起工作：

```
private boolean checkConnection(String host, int port) {
    try {
        Socket socket = new Socket(host, port);
        socket.close();
        return true;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
} 
```

如果创建了套接字，则连接已启动，否则连接已关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:40:01.017

这是您通常检查 glassfish 是否启动并运行的方式：

![在此处输入图像描述](../Images/d154866f32f4e6054ed0fc74112eca53.png)

但是由于您想以编程方式运行它，您可以做的是创建一个脚本并使用 java.util.java 从代码中执行该脚本。

```
try{
Runtime.getRuntime().exec("Path to my script");
} 
catch(IOException e) {
System.out.println("exception");
} 
```

如果您使用的是 linux，您还可以为 glassfish 进程创建一个 grep 脚本。

# c# - 如何在 Visual Studio 中使用 Web 服务创建网页

> ID：13859777
> 
> 赞同：-1
> 
> 时间：2012-12-13T12:22:19.933
> 
> 标签：c#, asp.net, web-services, visual-studio, visual-studio-2008

我是 ASP.NET 和 C# 的新手，我想在 Visual Studio 中创建一个带有 Web 服务的网页。

我这样做了： http: [//a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-create-web-service-in-cnet.html#.UMnF3uQzyTw](http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-create-web-service-in-cnet.html#.UMnF3uQzyTw)

但是，如何在客户端实现网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:28:10.903

您需要网页在单独的 ASP.Net Web 项目中运行，然后引用您编写的 Web 服务，它们不在同一个项目中。

[这](http://www.4guysfromrolla.com/articles/100803-1.aspx)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:28:37.020

您必须创建一个新的 Web 项目并在其中使用 Web 服务。

此链接可能对您有所帮助

[http://msdn.microsoft.com/en-us/library/8wbhsy70(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8wbhsy70(v=vs.80).aspx)

# objective-c - 如何在宏中使用块

> ID：13859778
> 
> 赞同：2
> 
> 时间：2012-12-13T12:22:25.950
> 
> 标签：objective-c, ios, ios4, foundation

我正在尝试在宏定义中使用块，但没有运气。

这是代码：

```
#define IPHONE_OR_IPAD_BLOCK(void(^iphoneBlock)(void), void(^ipadBlock)(void)) ({ \
    if (iphoneBlock && (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)) \
    { \
        iphoneBlock(); \
    } \
    else if (ipadBlock) \
    { \
        ipadBlock(); \
    } \
}) 
```

它似乎没有编译。

您如何建议在宏中使用块？

**更新**：感谢您对 Ramy Al Zuhouri 的快速回复，我将坚持使用静态函数，因为它提供了更多类型检查：

```
NS_INLINE void DoIphoneOrIpadBlock(void (^iphoneBlock)(void), void (^ipadBlock)(void))
{
    if (iphoneBlock && (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone))
    {
        iphoneBlock();
    }
    else if (ipadBlock)
    {
        ipadBlock();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:25:23.830

在宏中没有任何参数检查，这样更改：

```
#define IPHONE_OR_IPAD_BLOCK(iphoneBlock, ipadBlock) ({ \
    if (iphoneBlock && (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)) \
    { \
        iphoneBlock(); \
    } \
    else if (ipadBlock) \
    { \
        ipadBlock(); \
    } \
}) 
```

如果它与错误的参数一起使用，您可能会遇到语法错误。
如果您不喜欢这种行为，可以使用内联函数对其进行更改。

# javascript - 如何在 jquery 代码行中添加样式？

> ID：13859779
> 
> 赞同：0
> 
> 时间：2012-12-13T12:22:27.173
> 
> 标签：javascript, jquery, css

我想知道在下面的代码中添加样式的最佳方法是什么，以便只读文本框显示为灰色？

```
$("[class*=q" + i + "_mark]").val(t_marksHtml).attr('readonly', true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:23:46.357

尝试

```
 $("selector for textbox").addClass("read-only-state"); 
```

并在 .read-only-state 类中应用 css

```
 .read-only-state{
  color:#333;
  background:grey;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:28:41.483

这可以在纯 CSS 中完成：

```
textarea[readonly]{
  color: grey;
} 
```

或（更好）留给浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:05:12.213

只需使用属性选择器

```
$("input:[readonly]").css({"background":"#666"}); 
```

但最好只使用 CSS 作为

```
input[readonly]{
  background: #666;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T12:29:10.857

为什么不使用纯 CSS？

```
input[readonly]
{
    background-color: grey
} 
```

演示：http: [//jsfiddle.net/DqjAC/](http://jsfiddle.net/DqjAC/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T12:29:28.403

CSS

```
textarea[readonly]
{
    background: #999;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T12:57:38.220

基本上，将其用于所有具有 readonly 属性的 html 标签。

```
$("[readonly]").css("background-color","#CCC"); 
```

只输入标签

```
$("input:[readonly]").css("background-color","#CCC"); 
```

# jpa - 在 jpa 标准 api 中使用 NOT EXISTS 构建查询

> ID：13859780
> 
> 赞同：14
> 
> 时间：2012-12-13T12:22:28.353
> 
> 标签：jpa, jpa-2.0, criteria-api

我有两个名为 table1 ，table2 的表。两个表的字段数相同。这两个表之间没有关系。我的要求是我想要 table1 中的所有记录，而 table2 中没有。所以我使用 Criteria API 编写了一个查询。但它没有给出正确的结果。由于我是这个 JPA 和标准 API 的新手，任何人都可以指出我做错了什么。下面的代码是我用来执行此操作的。

```
CriteriaBuilder cb = mediationEntityManager.getCriteriaBuilder();
CriteriaQuery<Table1>  cq = cb.createQuery(Table1.class);
Root<Table1> table1 = cq.from(Table1.class);
cq.select(table1)

Subquery<Table2> subquery =  cq.subquery(Table2.class)
Root table2 = subquery.from(Table2.class)
subquery.select(table2)
cq.where(cb.not(cb.exists(subquery)))
TypedQuery<Table1> typedQuery = mediationEntityManager.createQuery(cq); 
List<Table1> resultList = typedQuery.getResultList(); 
```

MySQL 查询：

```
SELECT table1 
FROM   table1 table1 
WHERE  NOT EXISTS (SELECT table2 
                   FROM   table2 table2 
                   WHERE  table2.name = table1.name 
                          AND table2.education = table1.education 
                          AND table2.age = table1.age) 
       AND table1.name = 'san' 
       AND table1.age = '10'; 
```

我需要上述 MySQL 查询的 JPA 标准 API 查询。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-17T11:09:42.523

您可以使用 Criteria API 尝试以下代码。我没有尝试过，但是您可以尝试相应地修改代码。

```
CriteriaBuilder cb = mediationEntityManager.getCriteriaBuilder();  
CriteriaQuery<Table1> query = cb.createQuery(Table1.class); 
Root<Table1> table1 =  query.from(Table1.class); 
query.select(table1);
//--  
Subquery<Table2> subquery = query.subquery(Table2.class); 
Root<Table2> table2 = subquery.from(Table2.class);  
subquery.select(table2);  
//--
List<Predicate> subQueryPredicates = new ArrayList<Predicate>(); 
subQueryPredicates.add(cb.equal(table1.get(Table1_.name), table2.get(Table2_.name)));
subQueryPredicates.add(cb.equal(table1.get(Table1_.age), table2.get(Table2_.age)));
subQueryPredicates.add(cb.equal(table1.get(Table1_.education), table2.get(Table2_.education)));
subquery.where(subQueryPredicates.toArray(new Predicate[]{})); 
//--
List<Predicate> mainQueryPredicates = new ArrayList<Predicate>(); 
mainQueryPredicates.add(cb.equal(table1.get(Table1_.name), "san");
mainQueryPredicates.add(cb.equal(table1.get(Table1_.age), "10");
mainQueryPredicates.add(cb.not(cb.exists(subquery))); 
//--
query.where(mainQueryPredicates.toArray(new Predicate[]{})); 
TypedQuery<Table1> typedQuery =  mediationEntityManager.createQuery(query); 
List<Table1> resultList = typedQuery.getResultList(); 
```

此外，您可以尝试以下 JPQL 查询，该查询更易于理解、更改和调试。

```
SELECT t1 
FROM   table1 t1, 
       table2 t2 
WHERE  t1.name = 'san' 
       AND t1.age = '10' 
       AND (t2.name <> t1.name 
             AND t2.education <> t1.education 
             AND t2.age <> t1.age); 
```

# php - 如何在drupal 6的块内添加带有php的body类？

> ID：13859781
> 
> 赞同：2
> 
> 时间：2012-12-13T12:22:29.997
> 
> 标签：php, css, drupal, drupal-6, drupal-blocks

我在 drupal 6 中有一个带有 php 代码的块，我想将某个类添加到正文中，但是我该如何实现呢？

甚至可以在预处理功能之外执行此操作吗？

> 显示以下 PHP 代码是否返回 TRUE（PHP 模式，仅限专家）。

```
<?php 
$url = request_uri();
if (strpos($url, "somestring"))
{
    $vars['body_classes'] .= ' someclass';
}
elseif ( arg(0) != 'node' || !is_numeric(arg(1)))
{ 
    return FALSE;
}

$temp_node = node_load(arg(1));
$url = request_uri();

if ( $temp_node->type == 'type' || strpos($url, "somestring"))
{
    return TRUE;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T19:07:25.613

**预先说明：**如果您的实际条件取决于请求 URL，如您的示例所示，那么我同意 Terry Seidlers 的评论，即您应该`*_preprocess_page()`在自定义模块的实现中或在您的主题中执行此操作`template.php`。

**更通用的选项：**

`*_preprocess_page()`AFAIK，这在开箱即用的功能之外是不可能的。但是，您可以使用辅助函数轻松添加此功能：

```
/**
 * Add a class to the body element (preventing duplicates)
 * NOTE: This function works similar to drupal_add_css/js, in that it 'collects' classes within a static cache,
 * adding them to the page template variables later on via yourModule_preprocess_page().
 * This implies that one can not reliably use it to add body classes from within other
 * preprocess_page implementations, as they might get called later in the preprocessing!
 *
 * @param string $class
 *   The class to add.
 * @return array
 *   The classes from the static cache added so far.
 */
function yourModule_add_body_class($class = NULL) {
  static $classes;
  if (!isset($classes)) {
    $classes = array();
  }
  if (isset($class) && !in_array($class, $classes)) {
    $classes[] = $class;
  }

  return $classes;
} 
```

这允许您在页面周期的任何地方从 PHP 代码中“收集”任意主体类，只要它在最终页面预处理之前被调用。类存储在静态数组中，输出的实际添加发生在`yourModule_preprocess_page()`实现中：

```
/**
 * Implementation of preprocess_page()
 *
 * @param array $variables
 */
function yourModule_preprocess_page(&$variables) {
  // Add additional body classes, preventing duplicates
  $existing_classes = explode(' ', $variables['body_classes']);
  $combined_classes = array_merge($existing_classes, yourModule_add_body_class());
  $variables['body_classes'] = implode(' ', array_unique($combined_classes));
} 
```

我通常在自定义模块中执行此操作，但您可以在主题 template.php 文件中执行相同操作。

有了这个，您几乎可以在任何地方执行以下操作，例如在块组装期间：

```
if ($someCondition) {
  yourModule_add_body_class('someBodyClass');
} 
```

# zend-framework2 - ZfcUser 和现有用户帐户密码

> ID：13859783
> 
> 赞同：1
> 
> 时间：2012-12-13T12:22:34.673
> 
> 标签：zend-framework2

我将 ZfcUser 与 BjyAuthorize 一起使用，一切正常。在我正在工作的项目中，我有一个旧数据库，其中包含使用 MySQL 函数“密码”加密的用户帐户和密码，我的问题是是否可以在不向所有用户发送信息的情况下将密码重新哈希为 ZfcUser 密码类型？我的目标是让老用户使用他的旧密码登录到新系统，并且脚本以某种方式将此密码转换为 ZfcUser 标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:18:06.763

好的，我找到了解决方案，首先我在php中找到了MySQL密码功能：

```
function mysql_password_hash($input, $hex = true)
{
   $sha1_stage1 = sha1($input, true);
   $output = sha1($sha1_stage1, !$hex);
   return strtoupper('*'.$output);
} 
```

然后在 ZfcUser\Authentication\Adapter\Db.php 我在`$bcrypt = new Bcrypt();`这两行之后添加了：

```
if(mysql_password_hash($credential) === $userObject->getPassword())
    $this->updateUserPasswordHash($userObject, $credential, $bcrypt); 
```

现在在登录期间，旧的 MySQL 密码被重新散列为新的 Bcrypt 密码。也许它会帮助某人。

# android - 如何通过蓝牙与斑马mz320打印机配对？

> ID：13859786
> 
> 赞同：7
> 
> 时间：2012-12-13T12:22:49.463
> 
> 标签：android, bluetooth

我正在实施一个应用程序。

根据我的要求，我想通过移动蓝牙从**斑马 mz320 打印机打印输出。**

我正在尝试制作一`mobile bluetooth`对`printer bluetoth.`

当我尝试配对时，打印机会抛出类似“键入 1234 或 0000 PIN 以建立连接。

我输入了相同的 PIN。

但打印机未与我的移动设备配对。

它抛出一个异常，如`com.zebra.android.comm.ZebraPrinterConnectionException: Could not connect to printer: Unable to start Service Discovery`

如果有人知道解决方案，请帮助我。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T22:53:37.913

UUID 列表请参见[此处](https://www.bluetooth.org/en-us/specification/assigned-numbers/service-discovery)。您应该尝试队列中此片段中的一个或全部以建立连接：

> @TargetApi(10) 私有 BluetoothSocket connectDeviceUsingAPI10() 抛出 IOException {
> 
> ```
> BluetoothSocket socket = null;
> IOException ioex = null;
> int port = 1; // may be from 1 to 14 if I'm not confused
> UUID SPP_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
>       
> // way #0\. Connect using workaround for Android < 2.3
> try {
>      if (!isThreadActive)
>       return null;
>      Log.d("Try via API10: createInsecureRfcommSocketToServiceRecord");
>      socket = mDevice.createInsecureRfcommSocketToServiceRecord(SPP_UUID); // or RFCOMM_UUID);
>      } catch (IOException e) { ioex = e; }
>       if (socket != null && ioex == null) {
>           try {
>               socket.connect();
>               setStreams(socket.getOutputStream(), socket.getInputStream());
>           } catch (IOException ex) {
>               ioex = ex;
>               try {
>                   socket.close();
>               } catch (IOException e) {
>               } finally {
>                   socket = null;
>               }
>           }
>       }
>       if (socket != null && ioex == null) {
>           return socket;
> 
>       }
> 
>       ioex = null;
>       socket = null;
>       // way #1\. Using standard secure connection procedure via UUID
>       try {
>           if (!isThreadActive)
>               return null;
>           Log.d("Try via API10: createRfcommSocketToServiceRecord");
>           socket = mDevice
>                   .createRfcommSocketToServiceRecord(SPP_UUID);// or RFCOMM_UUID
>       } catch (IOException e) {
>           ioex = e;
>       }
>       if (socket != null && ioex == null) {
>           try {
>               socket.connect();
>               setStreams(socket.getOutputStream(), socket.getInputStream());
>           } catch (IOException ex) {
>               ioex = ex;
>               try {
>                   socket.close();
>               } catch (IOException e) {
>               } finally {
>                   socket = null;
>               }
>           }
>       }
>       if (socket != null && ioex == null) {
>           return socket;
>       }
> 
>       // way #2\. Using hidden api procedure with insecure socket
>       socket = null;
>       ioex = null;
>       // Try to fallback to API5 method
>       try {
>           if (!isThreadActive)
>               return null;
>           Log.d("Try via API10: createInsecureRfcommSocket");
>           Method m = mDevice.getClass().getMethod(
>                   "createInsecureRfcommSocket", new Class[] { int.class });
>           socket = (BluetoothSocket) m.invoke(mDevice, Integer.valueOf(port));
>       } catch (IOException e) { // ... }
>       if (socket != null && ioex == null) {
>           try {
>               socket.connect();
>               setStreams(socket.getOutputStream(), socket.getInputStream());
>           } catch (IOException ex) {
>               ioex = ex;
>               try {
>                   socket.close();
>               } catch (IOException e) {
>               } finally {
>                   socket = null;
>               }
>           }
>       }
> 
>       if (socket != null && ioex == null) {
>           return socket;
>       }
> 
>       ioex = null;
>       socket = null;
>       // way #3\. Connect using workaround for Android < 2.3
>       try {
>           if (!isThreadActive)
>               return null;
>           Log.d("Try via API10: createRfcommSocket");
>           Method m = mDevice.getClass().getMethod("createRfcommSocket",
>                   new Class[] { int.class });
>           socket = (BluetoothSocket) m.invoke(mDevice, Integer.valueOf(port));
>       } catch (IOException e) {
>               ioex = e;
>       }
>       if (socket != null && ioex == null) {
>           try {
>               socket.connect();
>               setStreams(socket.getOutputStream(), socket.getInputStream());
>           } catch (IOException ex) {
>               ioex = ex;
>               try {
>                   socket.close();
>               } catch (IOException e) {
>               } finally {
>                   socket = null;
>               }
>           }
>       }
>       if (socket != null && ioex == null) {
>           return socket;
>       }
>       return socket;
>   } 
> ```

# r - 与交易的因果关系（贝叶斯网络）

> ID：13859794
> 
> 赞同：1
> 
> 时间：2012-12-13T12:23:06.637
> 
> 标签：r, classification, bayesian, bayesian-networks

我正在使用多个二进制向量，例如 A、B、C、D、E、F、G、H。我想找到它们之间的分类。我尝试了以下方法：

```
 log_data<-read.csv(choose.files(), as.is = T, header = T, blank.lines.skip = TRUE)
 data<-log_data[2:ncol(log_data)]
 data
 TIME  A B C D E F G
 1     1 1 1 0 1 0 1 1
 2     0 0 1 1 1 1 0 1
 3     1 1 1 1 1 0 1 1
 4     1 0 1 1 1 1 0 1
 .....................
 fit <- network(data)
 fit.prior <- jointprior(fit)
 fit <- getnetwork(learn(fit,rats,fit.prior))
 **Error in postc0c(node$condposterior[[1]]$mu, node$condposterior[[1]]$tau,  : 
 NA/NaN/Inf in foreign function call (arg 1)** 
```

得到这个错误只是因为所有都是连续变量并且在 mu 处为 NULL。

创建网络后，我应该如何进行分类？

# c# - 使用 WPF 列表框拖放

> ID：13859797
> 
> 赞同：1
> 
> 时间：2012-12-13T12:23:22.460
> 
> 标签：c#, wpf, drag-and-drop

我`ListBox`在 WPF 应用程序中有两个。一是源头，二是目的地。我从文章[http://dotnetslackers.com/ADO_NET/re-191632_Generic_WPF_Drag_and_Drop_Adorner.aspx中获得了帮助](http://dotnetslackers.com/ADO_NET/re-191632_Generic_WPF_Drag_and_Drop_Adorner.aspx)

现在我已经设法执行拖放操作。

现在我要实现一个功能，如果我们将任何项目放在现有项目上，它将用当前拖动的项目替换现有项目。

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:35:36.127

您可能想查看[Gong Solutions Drag/Drop for WPF](http://code.google.com/p/gong-wpf-dragdrop/)，它使用装饰器的指南，并且应该能够向您展示如何删除旧项目并添加新项目，正如@kenny 建议的那样。

# xml - 带分组的 XSLT 1.0 计算

> ID：13859798
> 
> 赞同：0
> 
> 时间：2012-12-13T12:23:26.360
> 
> 标签：xml, xslt-1.0, xslt-grouping

我是 XSLT 的初学者，并使用它通过 Java 将 XML 转换为 XML。

**源 XML：**

```
<Response>
    <Data>
        <Book name="A" value="1"/>
        <Book name="B" value="2"/>
        <Book name="C" value="1"/>
    </Data>
    <Result>
        <Prices>
            <Price type="A" value="100"/>
            <Price type="B" value="60"/>
            <Price type="C" value="40"/>
        </Prices>
    </Result>
</Response> 
```

**XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" indent="yes" />

    <xsl:template match="/">
        <xsl:element name="Books">
            <xsl:variable name="BookType" select="//@type" />
            <xsl:attribute name="Total">
                <xsl:value-of select="sum(//Price[@type=$BookType]/@value)"/>
            </xsl:attribute>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**输出 XML：**

```
<Books Total="200"/> 
```

**预期输出 XML：**

```
<Books Total="260"/> 
```

在源 XML 中，我没有收到任何书籍及其价格，但它们不相关。

`<Price>`标签表示一本书的价格。我需要计算所有书籍的总价格如下

```
Price of one book x no of books
For A : 100 x 1 = 100
For B : 60 x 2  = 120
For C : 40 x 1  = 040
------------------------
Total Price is  = 260 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:36:35.417

最简单的方法是在包含“价格 * 数量”值的变量中建立一个临时结构，然后使用`exslt:node-set`扩展函数对这些值求和

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns:exslt="http://exslt.org/common"
                exclude-result-prefixes="exslt">
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/">
    <xsl:variable name="subTotals">
      <xsl:for-each select="/Response/Data/Book">
        <totalPrice>
          <xsl:value-of select="@value *
            /Response/Result/Prices/Price[@type = current()/@name]/@value" />
        </totalPrice>
      </xsl:for-each>
    </xsl:variable>
    <Books Total="{sum(exslt:node-set($subTotals)/totalPrice)}" />
  </xsl:template>
</xsl:stylesheet> 
```

可以在*不*使用扩展函数的纯 XSLT 1.0 中执行此操作，但它相当繁琐，并且涉及将累加器参数沿模板链传递：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/">
    <Books>
      <xsl:apply-templates select="/Response/Data/Book[1]" />
    </Books>
  </xsl:template>

  <xsl:template match="Book">
    <xsl:param name="runningTotal" select="0" />
    <xsl:variable name="thisBookTotal" select="@value *
       /Response/Result/Prices/Price[@type = current()/@name]/@value" />
    <xsl:choose>
      <xsl:when test="following-sibling::Book">
        <!-- There are more books, process the next one, passing an updated
             running total -->
        <xsl:apply-templates select="following-sibling::Book[1]">
          <xsl:with-param name="runningTotal" select="$runningTotal + $thisBookTotal" />
        </xsl:apply-templates>
      </xsl:when>
      <xsl:otherwise>
        <!-- There are no more books, produce the final total -->
        <xsl:attribute name="Total">
          <xsl:value-of select="$runningTotal + $thisBookTotal" />
        </xsl:attribute>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

# ftp - lftp：如何递归设置权限；首先按目录而不是按文件

> ID：13859799
> 
> 赞同：2
> 
> 时间：2012-12-13T12:23:33.813
> 
> 标签：ftp, file-permissions, shared-hosting, batch-processing, lftp

在不公开 SSH 访问（糟糕的情况，fwiw）的共享主机上保护 Drupal 或 WordPress 安装时，lftp 似乎是批量设置目录和文件权限的正确方法。find 命令吹嘘你可以重定向它的输出，所以应该能够运行 find，grep exclude 以仅匹配以“/”结尾的行，表示目录，然后将此类匹配的权限设置为 755 并执行相反的操作文件匹配并设置为 644，然后微调特定文件，例如 settings.php 等。

```
lftp prompt> find . | grep "/$" | xargs chmod -v 755 
```

不起作用，我确定我未能以正确的顺序和格式链接这些命令。

如何让它工作？

**更新：** “不工作”我的意思是上面的命令没有输出到控制台，也没有输出到 lftp 错误日志。它*没有*在本地运行这些命令，fwiw。我将减少命令作为演示：

```
find . | grep "/$" 
```

将获取“find”的输出并根据字符串匹配的性质返回匹配项，此处为目录：

```
./daily/
./ffmpeg-installer/
./hourly/
./includes/
./includes/database/
./includes/database/mysql/
./and_so_forth_on_down 
```

这很酷，因为我希望执行 chmod（以及 lftp 的内部命令，支持因 ftp 服务器而异）所以我像这样扩展命令：

```
find . | grep "/$" | xargs echo 
```

哪个输出——什么都没有。也没有错误输出。从 grep 到 xargs 的管道没有发生。

我的目标是形成相当于：

```
chmod 755 ./daily/
chmod 755 ./ffmpeg-installer/ 
```

在 lftp 中，chmod 命令正在执行 ftp-server-permissions 更改，*而不是*本地 perms 更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:28:55.077

有关为什么这不能按预期工作的解释，请继续阅读 - 有关给定问题的解决方案，请向下滚动。

答案可以在手册页中找到`lftp`，其中指出

*“[s]ome 命令允许将其输出（cat、ls、...）重定向到文件或通过管道重定向到外部命令。”*

因此，当您在支持重定向 in 的命令上使用这样的管道时`lftp`，您会将其输出通过管道传输到*本地*工具，这最终将导致`chmod`尝试更改*本地*计算机上文件/目录的权限，并且如果您在本地当前目录中没有巧合的目录布局，很可能会失败 - 这可能是您遇到的问题。

`grep`+`xargs`管道确实有效，我刚刚测试了以下内容：

```
lftp> find -d 2 | grep "/$"
./
./applications/
./lost+found/
./netinfo/
./packages/
./security/
./systems/
lftp> find -d 2 | grep "/$" | xargs echo
./ ./applications/ ./lost+found/ ./netinfo/ ./packages/ ./security/ ./systems/ 
```

我的疯狂猜测是，它似乎对您不起作用，因为您没有指定要查找的最大深度，并且管道中的网络连接 + 缓冲妨碍了您。当我在包含许多文件/子文件夹的目录上尝试相同的操作时，完成和打印需要很长时间。该命令实际上是否在没有输出的情况下为您完成？

但是，您尝试做的事情仍然是不可能的。正如我所说，管道的*右侧与手册中解释的**外部*命令一起使用（即使存在同名的内置命令），所以

```
lftp> chmod 644 foobar 
```

和

```
lftp> echo "foobar" | xargs chmod 644 
```

不**等价**。是的，`chmod`是内置的，但在客户端的管道中使用它**不会**执行内置的 - 手册页清楚地说明了这一点，您可以自己轻松地测试它。尝试以下命令并检查其输出：

```
lftp> echo foo | uname -a
lftp> echo foo | ls -al
lftp> echo foo | chmod --help
lftp> chmod --help 
```

## 解决方案

就您的问题的解决方案而言，您可以尝试以下方法：

```
#!/bin/bash

server="ftp.foo.bar"
root_folder="/my/path"

{
        {
                lftp "${server}" <<EOF
                cd "${root_folder}"
                find | grep "/$"
                quit
EOF
        } | awk '{ printf "chmod 755 \"%s\"\n", $0 }'

        {
                lftp "${server}" <<EOF
                cd "${root_folder}"
                find | grep -v "/$"
                quit
EOF
        } | awk '{ printf "chmod 644 \"%s\"\n", $0 }'
} | lftp "${server}" 
```

这将登录到您的服务器，`cd`s 到您要递归开始更改权限的文件夹，用于`find + grep`查找所有目录，注销，将此文件列表通过管道导入`awk`以围绕它构建`chmod`命令，重复文件的整个过程，然后管道整个命令列表到一个新的`lftp`调用中以实际运行生成的`chmod`命令。

您还必须将您的凭据添加到调用中，并且您可能希望在实际运行整个过程之前`lftp`注释掉 final以检查它是否产生所需的输出。`| lftp "${server}"`如果这对您有用，请报告！

# java - 从值的集合生成唯一的 id

> ID：13859801
> 
> 赞同：2
> 
> 时间：2012-12-13T12:23:40.827
> 
> 标签：java, uniqueidentifier

我想了解如何从 Java 对象的集合中生成唯一 ID（字符串/数字等），这些对象可能是各种数据类型，如 String、BigDecimal、org.joda.time.LocalDate 或 org.joda。 time.LocalDateTime 或任何自定义 java 对象。

生成的 id 应该基于 java 对象中的值，以便为具有相同值的两个集合生成相同的 id。类似于 sql group by 子句的东西。我想从 group by (col1, col2, col3) 生成一个唯一的 id，其中 col1、col2 和 col3 可以是任何数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:53:25.603

您不能对任何对象执行此操作，因为例如 java.lang.Object 没有值。对于那些可以通过值来识别的，有一个解决方案虽然并不简单：

创造

```
MessageDigest md = MessageDigest.getInstance("MD5"); 
```

遍历要在其上创建 ID 的对象中的所有字段，将它们转换为字节（不知何故，在最坏的情况下为 (field + "").getBytes()）并用这些字节更新摘要

```
md.update(fieldBytes);
md.update(new int[0]);   we need separator to be safe 
```

最终获得您的 ID 为 BigInteger

```
 BigInteger id = new BigInteger(1, md.digest()); 
```

您也可以将其转换为十六进制字符串

```
String hex = String.format("%032X", id) 
```

它实际上是独一无二的。MD5 为 16 个字节。或者，您可以使用 SHA-1，它更强，为 20 字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:53:11.890

您可以尝试基于哈希码的方法

```
public static UUID id(List<?> list) {
    BigInteger prime = BigInteger.valueOf(31);
    BigInteger value = BigInteger.valueOf(list.size());
    for (Object element : list) {
        value = value.multiply(prime).add(BigInteger.valueOf(element.hashCode()));
        value = value.multiply(prime).add(BigInteger.valueOf(element.getClass().hashCode()));
    }
    return UUID.nameUUIDFromBytes(value.toByteArray());
} 
```

虽然这并不能保证 100% 的唯一性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:30:17.687

如果类型不会更改，则要创建唯一键，您可以使用

```
String id = Arrays.toString(col1, col2, col3); 
```

如果您需要它们是唯一的，即使类型混合和匹配，您可以使用生成二进制格式的序列化或

```
StringBuilder idsb = new StringBuilder();
for(Object o: arrayOfObjects) 
    idsb.append(o.getClass()).append(':').append(o).append(',');
String id = idsb.toString(); 
```

如果你有

```
Object col1 = "2012-04-19 12:13:46", col2 = "2012-05-02", col3 = "Andy";
String key = col1+"~"+col2+"~"+col3; 
```

# c++ - 节点图编辑器布局算法

> ID：13859802
> 
> 赞同：0
> 
> 时间：2012-12-13T12:23:44.353
> 
> 标签：c++, qt, graph

我非常努力做这里被问到的事情：

[http://www.qtcentre.org/threads/45028-Designing-a-Node-Editor-(Hint-Blender-Node-Editor)](http://www.qtcentre.org/threads/45028-Designing-a-Node-Editor-(Hint-Blender-Node-Editor))

这基本上是一个使用 Qt 的搅拌器样式节点编辑器。用可以拖放的圆圈创建矩形很容易弄清楚（见下图）。

我遇到的问题是连接节点之间的圆圈的算法将如何工作。另外我不知道如何使用 QGraphicsItem API 有效地绘制它？我见过 QPainter::cubicTo() 看起来可能是要走的路？

我认为它以某种方式设法找到了一条不重叠的路径？但它还必须处理必须重叠的情况？

如果算法做得不好，用户是否能够移动这些线呢？我认为使用 QPainter::cubicTo() 实现这并不简单，因为您只能移动曲线控制点？

![在此处输入图像描述](../Images/cd0ea38e28acc0d9ac30c0b3e4288c2c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-27T10:13:13.307

> 我认为您不会让任何人在这里发布代码来完成所有工作。

好吧，我自愿——以防有人仍然需要这样的图书馆。

它是在 QGraphicsView 之上实现的基于 Qt 的节点编辑器。库使用者定义数据模型，其余由节点编辑器完成。一些特点：

*   模型视图方法。
*   模型描述了数据类型、输入和输出的数量以及可选的嵌入式 QWidget。
*   场景可以保存到文件中。

其余类似项目要么未完成，要么不再受支持，要么缺少某些功能。

[https://github.com/paceholder/nodeeditor](https://github.com/paceholder/nodeeditor) [![在此处输入图像描述](../Images/a147ac5ddfe6423130b6093565835764.png)](https://i.stack.imgur.com/rcz8O.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:52:36.443

我建议您在不考虑重叠的情况下实施它，但有可能覆盖连接线的绘制方式。

看起来Qt论坛上有一些很好的回复。我认为您不会让任何人在这里发布代码来完成所有工作。

也许看看 Qt demos Graphics View/Elastic Nodes - 有可以用作起点的演示代码，但是从那里到像 Blender 节点编辑器这样的东西需要做很多工作。

另一个要查看的节点编辑器是 SynthEdit 或 Synth Maker（有一个不错的）。

# ios - 核心数据实体可以与自身有关系吗？

> ID：13859804
> 
> 赞同：0
> 
> 时间：2012-12-13T12:23:50.357
> 
> 标签：ios, core-data

核心数据实体可以与自身有关系吗？类似自我加入的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:36:51.553

没问题。只需创建一个像 Person 这样的实体，然后您可以创建一个作为 Person 的 Manager，以及作为 Many People 的 Coworkers。我知道这个例子是人为的，但这是直截了当的。

请记住，与存储在对象中的字符串不同，manager 和 coworkers 中的 Person 只是指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T15:12:16.103

是的，这就是[Apple 文档](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)所说的：

> 关系指定目标处对象的实体或父实体。这可以与源处的实体相同（自反关系）。

# scala - Scala-Lift：对重载定义的模糊引用-子类中的取消应用方法

> ID：13859807
> 
> 赞同：1
> 
> 时间：2012-12-13T12:24:09.127
> 
> 标签：scala, reference, unapply

编译器说

```
error: ambiguous reference to overloaded definition,
both method unapply in object UserDto of type (in: Any)Option[(String, String, String, String)]
and  method unapply in class AbstractJsonConversion of type (in: net.liftweb.json.JsonAST.JValue)Option[biz.shopboard.domain.model.UserDto]
match argument types (net.liftweb.json.JsonAST.JValue)
case Nil JsonPut UserDto(user) -> _ => { 
```

代码看起来像这样（Scala + Lift）

```
serve("api" / "user" prefix {
    // PUT adds the item if the JSON is parsable
    case Nil JsonPut UserDto(user) -> _ => {
      facade.saveUser(user)
      user: JValue
    }
}

case class UserDto(username: String, password: String, firstName: String, lastName: String)

object UserDto extends AbstractJsonConversion[UserDto] {
  /**
   * The default unapply method for the case class.
   * We needed to replicate it here because we
   * have overloaded unapply methods
   */
  def unapply(in: Any): Option[(String, String, String, String)] = {
    in match {
      case i: UserDto => Some((i.username, i.password, i.firstName, i.lastName))
      case _ => None
    }
  }

} 
```

和 AbstractJsonConversion 看起来像这样

```
package biz.shopboard.domain

import net.liftweb.json.JsonAST.JValue
import net.liftweb.common.Box
import net.liftweb.util.Helpers
import net.liftweb.json.Extraction

class AbstractJsonConversion[T](implicit M: Manifest[T]) {

  implicit val formats = net.liftweb.json.DefaultFormats

  /**
   * Convert a JValue to a User if possible
   */
  def apply(in: JValue): Box[T] = Helpers.tryo { in.extract[T] }

  /**
   * Extract a JValue to an Item
   */
  def unapply(in: JValue): Option[T] = apply(in)

  /**
   * Convert the item to JSON format.  This is
   * implicit and in the companion object, so
   * an Item can be returned easily from a JSON call
   */
  implicit def toJson(item: T): JValue = Extraction.decompose(item)
} 
```

如果我将重载的 unapply 方法从父类 AbstractJsonConversion 移动到伴随对象 UserDto 一切都很好。

我想知道我在这里做错了什么？为什么我不能在父类 AbstractJsonConversion 中使用重载方法 unapply 而在它的子伴随对象中使用另一个方法？

# php - 用于发送 html 电子邮件的 PHP 脚本

> ID：13859808
> 
> 赞同：1
> 
> 时间：2012-12-13T12:24:23.080
> 
> 标签：php, html, html-email

我编写了这个 PHP 脚本来发送 HTML 电子邮件。但是，电子邮件输出显示为原始文本，而不是被解释为 html。

```
<?php 
 if(isset($_POST['submit']))  {
    $to = $_POST['email'];
    $from = "info@test.com";
    $subject = "subject";
    $message = "<div style=\"background:red;height:100px; " .
      "width:100px;display:block;\">dfsdf</div>";

    $headers = "MIME-Version: 1.0rn";
    $headers .= "Content-type: text/html; charset=iso-8859-1rn";
    $headers  .= "From: $from\r\n";
    mail($to, $subject, $message, $headers);
    echo "Message has been sent....!";  
 }else{
    echo "Add an email address"; 
 }
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<form action="/send" method="post">
  <input name="email" type="text" />
  <input name="submit" type="submit" value="Submit">
</form>
</body>
</html> 
```

我收到的电子邮件是：

```
<div style="background:red;height:100px;width:100px;display:block;">dfsdf</div> 
```

我希望得到一个红色的盒子。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:26:48.430

尝试更改电子邮件标题：`content-type`并且`charset`像这样：

```
$headers = "MIME-Version: 1.0rn";
$headers .= "Content-type: text/html; charset=iso-8859-1rn"; 
```

至

```
$headers = "MIME-Version: 1.0 \r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1 \r\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:27:35.493

```
 $mail_to=$tomail;

    $mail_from=$frommail;

    $mail_sub="Subject";

    $mail_mesg="Body of your Message";

    $headers = "MIME-Version: 1.0 \r\n";

    $headers .= "Content-type: text/html; charset=iso-8859-1 \r\n";

    $headers  .= "From: $frommail\r\n";

    if(mail($mail_to,$mail_sub,$mail_mesg,$headers))
        $result = "send successfully";
    else
        $result = "failed to send mail"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T12:27:44.323

您必须使用 `$headers .= "Content-type: text/html; charset=iso-8859-1". "\r\n";` and`$headers = "MIME-Version: 1.0\r\n";` 而不是

$headers .= "内容类型: text/html; charset=iso-8859-1rn"; $headers = "MIME 版本：1.0rn";

所以试试这个

```
 <?php 
     if(isset($_POST['submit']))  {
        $to = $_POST['email'];
        $from = "info@test.com";
        $subject = "subject";
        $message = "<div style=\"background:red;height:100px;width:100px;display:block;\">dfsdf</div>";
        $headers = "MIME-Version: 1.0\r\n";
        $headers .= "Content-type: text/html; charset=iso-8859-1". "\r\n";
        $headers  .= "From: $from\r\n";
        mail($to, $subject, $message, $headers);
        echo "Message has been sent....!";  
     }else{
        echo "Add an email address"; 
     }?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    </head>
    <body>
    <form action="/send" method="post">
      <input name="email" type="text" />
      <input name="submit" type="submit" value="Submit">
    </form>
    </body>
    </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:26:29.823

这对我有用：

```
$mailheaders = "From: $email\n";
$mailheaders .= "Reply-to: $email\n";
$mailheaders .= "Content-Type: text/html; charset=iso-8859-1\n";

mail('my@email.com', 'Test', 'Foo bar', $mailheaders); 
```

# python - 关于读取文件

> ID：13859811
> 
> 赞同：0
> 
> 时间：2012-12-13T12:24:30.353
> 
> 标签：python, python-2.7

当我尝试读取文件时，出现如下描述的奇怪结果

代码是

```
f1=file('u1.base')
for line in f1.readlines()[0:5]:
print line    
train=f1.readlines()
f2=file('u1.test')
test=f2.readlines()
l_train=len(train)
l_test=len(test)
print l_train,l_test 
```

结果是

```
1   1   5   874965758

1   2   3   876893171

1   3   4   878542960

1   4   3   876893119

1   5   3   889751712

0 20000 
```

这表明火车的长度为0。我不知道原因。希望你能帮帮我~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:40:13.313

第一个`f1.readlines()`读取所有行（文件位置在文件末尾）。第二个`f1.readlines()`立即遇到 EOF 并返回空列表。您可以调用`f1.seek(0)`将文件位置移动到文件的开头。

只读取 5 行：

```
from itertools import islice

for line in islice(f1, 5):
    print line, 
```

# java - 尝试从我的电子邮件帐户中保存电子邮件并将它们以 pdf 格式存储在我的本地计算机中。它给 javaw.exe 没有输出显示

> ID：13859812
> 
> 赞同：1
> 
> 时间：2012-12-13T12:24:31.637
> 
> 标签：java

```
import java.io.; import java.util.; import javax.mail.*;

public class ReadMail {

public static void main(String args[]) throws Exception {
// String host = "pop.gmail.com"; // String user = "xyz"; // String password = "12345";

    // Get system properties
   Properties properties = System.getProperties();

    // Get the default Session object.
    Session session = Session.getDefaultInstance(properties, null);

    // Get a Store object that implements the specified protocol.
    Store store = session.getStore("pop3s");

    //Connect to the current host using the specified username and password.
    store.connect(host, user, password);

    //Create a Folder object corresponding to the given name.
    Folder folder = store.getFolder("inbox");

    // Open the Folder.
    folder.open(Folder.READ_ONLY);

    Message[] message = folder.getMessages();

    // Display message.
    for (int i = 0; i < message.length; i++) {

        System.out.println("------------ Message " + (i + 1) + " ------------");

        System.out.println("SentDate : " + message[i].getSentDate());
        System.out.println("From : " + message[i].getFrom()[0]);
        System.out.println("Subject : " + message[i].getSubject());
        System.out.print("Message : ");

        InputStream stream = message[i].getInputStream();
        while (stream.available() != 0) {
            System.out.print((char) stream.read());
PrintWriter out = new PrintWriter("filename.txt");//trying to save the emails in local machine out.println(stream );

        }
        System.out.println();
    }

    folder.close(true);
    store.close();
}
} 
```

# python - Selenium BeautifulSoup 奇怪的错误

> ID：13859814
> 
> 赞同：0
> 
> 时间：2012-12-13T12:24:35.833
> 
> 标签：python, django, selenium, beautifulsoup

在我的 Django 应用程序中，我使用 selenium 来获取页面并使用 BeautifulSoup 来解析 html。我正在使用 Xvfb 在 Debian 中工作。这是代码：

```
from selenium import webdriver
import os

os.environ["DISPLAY"]=":99"
driver = webdriver.Firefox()
driver.get("www.google.it")
text = driver.page_source

soup = BeautifulSoup(text)  

(... some code to parse the page with ...) 
```

我有一个非常奇怪的错误：如果我在“汤”中搜索，什么也找不到。这不会发生在我的本地 Windows XP 机器上。在“文本”中有 html。

更新：我认为这可能是编解码器/解码错误，但我不知道在这种情况下如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-10T22:43:59.960

您实际上并没有获取页面，因此没有什么可解析的。WebDriver 需要一个有效的 url（以“http://”或“https://”开头）

您应该更改以下行：

```
driver.get("www.google.it") 
```

至：

```
driver.get("http://www.google.it") 
```

# c# - 如何在文本框控件 C# 中键入和标记表格

> ID：13859819
> 
> 赞同：0
> 
> 时间：2012-12-13T12:24:54.983
> 
> 标签：c#, winforms, textbox, focus

我需要输入要插入到 MySQL 数据库中的文本，该文本始终包含制表符，例如“/t”当我键入 Tab 键时，同一表单中的另一个控件将成为焦点我有办法以编程方式禁用此行为用 C# 语言，所以我可以在文本Thanks 中标记表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:49:46.620

我相信您需要在 WindowsForms 应用程序中完成此操作才能在您的表单中实现以下方法：

> ```
>  protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
>     {
>         if (keyData == Keys.Tab)
>         {
>             textBox1.Text += "\t";
>             // Set the selection on the end of text.
>             textBox1.SelectionStart = textBox1.Text.Length;
>             textBox1.ScrollToCaret();
>             return true;
>         } 
> ```

```
 return base.ProcessCmdKey(ref msg, keyData);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:27:42.150

检查以下解决方案[http://www.geekzilla.co.uk/ViewA94BBC8A-8DC4-4F14-98F9-DEDFCF40DA07.htm](http://www.geekzilla.co.uk/ViewA94BBC8A-8DC4-4F14-98F9-DEDFCF40DA07.htm)

虽然它只适用于 IE，但它会让你知道你要做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:29:18.703

您可以为此使用 javascript

```
 textarea.observe('keydown', function (e) {
  if(e.keyCode==9) {
    e.element().insert("\t");
    e.stop();
  }
} 
```

这里还有更多关于它的信息：

[http://ajaxian.com/archives/handling-tabs-in-textareas](http://ajaxian.com/archives/handling-tabs-in-textareas)

# ruby-on-rails - 无法将 answer_id 放入 answers_results

> ID：13859820
> 
> 赞同：0
> 
> 时间：2012-12-13T12:24:57.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-and-belongs-to-many

我有 3 个模型。问题、答案和结果。

得到一个带有 answer_id 和 result_id 的中间模型 answers_results。

问题和答案已经在数据库中，因此当有人开始新调查时，需要在 answers_results 表中保存一个 result_id 和 answer_id。

这就是我的 html 的样子：

```
<input id="answer_id_5" name="answer_id[5]" type="checkbox" value="5"> 
```

这就是我的答案模型的样子：

```
class Answer < ActiveRecord::Base
  attr_accessible :content, :question_id, :value

  belongs_to :question

  has_and_belongs_to_many :results, :join_table => :answers_results
end 
```

这是我的结果模型：

```
class Result < ActiveRecord::Base
  attr_accessible :animal_id

  has_and_belongs_to_many :answers, :join_table => :answers_results
end 
```

结果控制器：

```
class ResultsController < ApplicationController

  def new
    @result = Result.new
    @animal = Animal.find(params[:id])
  end

  def create
    @result = Result.new(params[:result])
        if @result.save
            redirect_to @result
        else
            render 'new'
        end
  end

  def show
    @result = Result.find(params[:id])
  end
end 
```

但它不会将 answer_id 保存到 answers_results 中。它确实保存了 result_id。

所以我的问题是：如何将 answer_id 保存到 answers_results 表中。

谢谢，，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:50:41.013

我认为您必须使用 build 方法将 answer_id 直接存储在 answer_results

尝试以下方法

使用答案 id 获取答案并从该答案构建结果，如下所示

```
def new
  answer = Answer.find(params[:answer_id])
  @result = answer.build_result # or anser.results.build
  #this is based on has_one/has_many relationship between answer and results
end

def create 
 @result = Result.new(params[:result])
 if @result.save
   redirect_to results_path
 else
   render 'new'
 end
end 
```

# objective-c - 标签栏图像的大小

> ID：13859821
> 
> 赞同：3
> 
> 时间：2012-12-13T12:25:00.983
> 
> 标签：objective-c, ios, background-image, tabbar

目前我正在设计我的应用程序的 UITabbar。我为 Tabbar 创建了一个 Photoshop 布局，它高 84 像素，宽 640 像素。创建一张尺寸为 84x640 的图像和一张尺寸为 320x42 的图像是否正确？然后将较大的图像命名为@2x.png。

在这一点上我很挣扎，因为当我记录 UITabbar 的宽度时，它显示为 320.00，但我使用的是 Iphone 3.5 英寸视网膜模拟器。

对我来说实现标签栏的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:30:12.863

是的。你应该有两个图像。一种用于正常显示，一种用于视网膜。Xcode 使用点而不是像素，因此宽度始终为 320。在视网膜显示的情况下，一个点是 2x2 像素，在正常模式下是 1x1。

顺便说一句，我认为标签栏的高度应该是正常的 320x49 和视网膜的 640x98。

视网膜图像应与普通图像名称相同，末尾带有@2x

例子：

正常：image.png 视网膜：image@2x.png

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:43:24.147

您将“点”与“像素”混淆了。这些点与分辨率无关。您通常可以通过在 UIView 上调用 contentScaleFactor 来检查您的比例因子。

视网膜应该是 2.0，非视网膜应该是 1.0。

# java - Jersey 客户端获取状态 504 (UniformInterfaceException) - 如何配置客户端超时？

> ID：13859825
> 
> 赞同：1
> 
> 时间：2012-12-13T12:25:20.257
> 
> 标签：java, tomcat, jersey

我们的 Jersey 客户端从服务器获取以下异常。

```
Got exception from API:POST http://my-host.com/api/x/y returned a response status of 504 Gateway Timeout, Stack trace: com.sun.jersey.api.client.UniformInterfaceException: POST http://my-host.com/api/x/y returned a response status of 504 Gateway Timeout
at com.sun.jersey.api.client.WebResource.handle(WebResource.java:698)
at com.sun.jersey.api.client.WebResource.access$300(WebResource.java:74)
at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:574)
at com.g.e.s.i.t.XYZ.callResource(ABC.java:84)
at ...
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

这是客户端创建代码：

```
ObjectMapper mapper = new ObjectMapper();
mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
JacksonJaxbJsonProvider provider = new JacksonJaxbJsonProvider();
provider.setMapper(mapper);
ClientConfig clientConfig = new DefaultClientConfig();
    clientConfig.getSingletons().add(provider);
    Client client = Client.create(clientConfig);
    client.setConnectTimeout(Integer.MAX_VALUE);
    client.setReadTimeout(Integer.MAX_VALUE);
    return client.resource(url); 
```

因此，我们正在尝试为客户端设置最大超时但无济于事。

任何人都知道如何配置客户端超时？
处理Tomcat超时可能更好？（如何？）虽然我认为它落后于一些负载均衡器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:31:58.747

尝试下面的代码来设置客户端读取超时。

```
clientConfig.getProperties().put(ClientConfig.PROPERTY_READ_TIMEOUT,30000);//30 seconds read timeout 
```

尝试下面的代码来设置客户端连接超时。

```
clientConfig.getProperties().put(ClientConfig.PROPERTY_CONNECT_TIMEOUT,30000);//30 seconds for connection timeout 
```

# ruby-on-rails - 如何在 Rails 3.2 中设置深度嵌套的表单

> ID：13859831
> 
> 赞同：0
> 
> 时间：2012-12-13T12:25:38.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, nested-forms, nested-attributes

我正在尝试在 rails 中构建一个相当复杂的嵌套表单并且被卡住了。

基本上，我有三个模型 - `Applicant`，`DataPoint`，`ApplicantDataPointValue`。

用户可以创建一个新的`DataPoint`，给它一个名字（“性别”等）选择它的类型（“字符串”，“整数”等）。类型决定了数据最终将保存在`ApplicantDataPointValue`表中的哪一列。

然后我希望用户在创建新的`Applicant`时能够将每个值添加`DataPoint`到`ApplicantDataPointValue`表中

我的模型如下所示：

申请人：

```
class Applicant < ActiveRecord::Base
  has_many :applicant_data_point_values, dependent: :destroy
  has_many :data_points, :through => :applicant_data_point_values

  accepts_nested_attributes_for :data_points
  accepts_nested_attributes_for :applicant_data_point_values

  attr_accessible :data_points_attributes, :applicant_data_point_values_attributes
end 
```

数据点：

```
class DataPoint < ActiveRecord::Base
  has_many :applicant_data_point_values
  has_many :applicants, :through => :applicant_data_point_values
  accepts_nested_attributes_for :applicant_data_point_values
end 
```

申请人数据点值：

```
class ApplicantDataPointValue < ActiveRecord::Base
  belongs_to :data_point
  belongs_to :applicant
end 
```

但是我不知道在控制器的“新”和“创建”部分中做什么或如何构造表单。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:15:01.760

据我了解，用户的表单也将有多个申请人数据点值字段。（但该表单不允许创建新的 DataPoint 字段，对吧？）

在控制器`new`操作中，您需要使用关联的数据点值设置模型：

```
def new
  @user = User.new
  DataPoint.all.each do |data_point|
    applicant_data_point_value = @user.applicant_data_point_values.build
    applicant_data_point_value.data_point = data_point
  end
end 
```

然后，为每个数据点值显示一个文本框。

```
<%= form_for @user do |f| %>
    <%= f.label :name %>
    <%= f.text_field :name %>
  <% @user.applicant_data_point_values.each do |data_point_value| %>
  <%= f.fields_for :applicant_data_point_values, data_point_value do |fields| %>

    <%= fields.label :value, data_point_value.data_point.type %>
    <%= fields.text_field :value %>

  <% end %>
<% end %> 
```

参考：[http ://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# apache-flex - 启用 itemrenderer 之间的拖放

> ID：13859834
> 
> 赞同：0
> 
> 时间：2012-12-13T12:26:02.650
> 
> 标签：apache-flex, drag-and-drop, itemrenderer

我的 mxml 应用程序中有两个 tilelist。项目（图像和标签）由 itemrenderer 渲染。我想要实现的功能：将图像从 tilelist #1 拖放到 tilelist #2 上（然后将启动带有 sql 查询的 httpservice）。

我将如何解决这个问题？（高级信息就足够了）。我遇到的主要问题是我不知道如何从 main 调用方法到我的 itemrenderer。我想在渲染器中编写 d&d 功能，但我不知道如何从渲染器中访问监视列表 #2。main.mxml中的相关代码：

```
<s:Panel id="panel"  width="100%" height="100%" title="Watchlist">
<s:layout>
<s:VerticalLayout paddingBottom="5" paddingLeft="20"
                          paddingRight="20" paddingTop="5"/>
    </s:layout>
    <s:Label width="20%" fontSize="17" fontWeight="bold" text="Your watched movies"/>
    <mx:TileList id="myWatchedList_tile" height="360" borderVisible="false" width="80%"
                 columnCount="5" columnWidth="200"
                 itemRenderer="components.TileListItemRenderer" rowCount="1" rowHeight="360"/>
    <s:Label width="20%" fontSize="17" fontWeight="bold" text="Your to watch movies"/>

    <mx:TileList id="myToWatchList_tile"  height="360" borderVisible="false" width="80%"
                 columnCount="5" columnWidth="200"
                 itemRenderer="components.TileListItemRenderer" rowCount="1" rowHeight="360" />

</s:Panel> 
```

项目渲染器：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
     borderVisible="false" horizontalAlign="center" verticalAlign="middle"
     xmlns:components="components.*">

    <mx:Image source="{data.poster_url}" />
    <mx:Label text="{data.movie_title}" height="20" />
</mx:VBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:50:11.823

替代解决方案可能是使用火花列表（使用 TileLayout） - 然后您可以轻松地在列表之间使用拖放：http: [//help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7cfd.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7cfd.html)

..并启动服务以响应“drop”事件（事件将引用丢弃的图像）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:22:43.173

您可以使用该`outerDocument`对象访问项目渲染器之外的方法。确保它们是（范围）公共方法。

[http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.edu.html](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.edu.html)

# solr - 如何针对 solr 中的多个字段搜索多个值？

> ID：13859835
> 
> 赞同：0
> 
> 时间：2012-12-13T12:26:04.443
> 
> 标签：solr, solrj, solr-schema

如何针对 solr 中的多个字段搜索多个值？

我的场景：

目前在 schema.xml 中，我正在使用`<solrQueryParser defaultOperator="AND"/>`和

```
<copyField source="COL1" dest="defaultsearch"/>
<copyField source="COL2" dest="defaultsearch"/> 
```

和

```
<fieldType name="text_search" class="solr.TextField" positionIncrementGap="100">
 <analyzer>
   <tokenizer class="solr.WhitespaceTokenizerFactory" />
   <filter class="solr.LowerCaseFilterFactory" />      
 </analyzer>
</fieldType> 
```

和

```
<defaultSearchField>defaultsearch</defaultSearchField> 
```

例子：

我的搜索查询就像**q=Good Boy**。

我必须获取像**Good**和**Boy**应该出现在 COL1 或 COL2 中的记录。

但对我来说，它给出了预期的结果，并提供了额外的结果，例如COL1中的**Good** present 和 COL2 中的**Boy**或 COL2 中的**Good和 COL1 中的****Boy**。

请建议我如何在 COL1 或 COL2 中找到**Good**和**Boy的结果。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:18:45.910

如果您需要在 COL1 和 COL2 上完全匹配，那么您可以执行以下操作（假设 COL1 和 COL2 是字符串）：-

```
q=(COL1:"Good Boy" OR COL2:"Good Boy") 
```

如果您不需要完全匹配并且该短语应按任何顺序包含“Good”和“Boy”，请尝试以下（未经测试）：-

```
q=(COL1:*Good Boy* OR COL2: *Good Boy*) 
```

# java - 从 Assets 文件夹中的 html 页面中提取字符串？

> ID：13859837
> 
> 赞同：0
> 
> 时间：2012-12-13T12:26:05.223
> 
> 标签：java, android, string

我的资产文件夹中有几个 html 页面，我可以打开它们并将它们放在一个字符串中。我的问题就在前面，我只是在某些标签之间提取文本。例如，如果我在我的 html 页面中有一行作为`<h3>Hello have a nice day</h3>`h3 标记内。

我只想得到“你好，有美好的一天”。直到现在我尝试它来字符串函数但没有成功。我怎样才能做到这一点？

**更新**

我从[链接中得到了解决方案](https://stackoverflow.com/questions/5690219/extract-text-between-two-links-in-html-through-java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:27:36.850

使用`Html.fromHtml()`，传递 html 源代码，它将只返回文本..

检查[http://developer.android.com/reference/android/text/Html.html](http://developer.android.com/reference/android/text/Html.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:30:53.990

如果您能够阅读 html 文件，那么一切都应该很容易。如果它是简单的 html 页面，您可以使用 xpath 来解析它并检索您想要的任何内容，或者您​​可以使用一些库（例如 jsoup）来解析 html。

# mysql - 是否可以在 SQL 中对运算符进行参数化？

> ID：13859838
> 
> 赞同：1
> 
> 时间：2012-12-13T12:26:08.043
> 
> 标签：mysql, sql

是否可以在任何 SQL 方言中对运算符进行参数化？

我希望能够做到以下几点：

```
if(x == y)
{
     operator = '<=';
}
else
{
     operator = '=';
} 
```

然后在准备好的语句中使用它：

`SELECT a FROM b WHERE number :operator 10`

我无法在 MySQL 中完成此操作（我正在使用），但我想知道这是否可以在任何方言中完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:02:41.897

不，您不能直接将运算符作为参数，其他示例通过传入代表您选择的代码分支的字符串向您展示了绕过它的方法。

关于 SQL 语句准备，要记住的重要一点是，任何可执行文件都不能被参数化。唯一可以有占位符的是实际值。任何会影响语句编译方式的东西都不能是参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:28:48.167

（至少：SQL server）你可以把它作为一个字符串然后

*   在您的命令中使用“选择案例”

    CASE input_expression WHEN when_expression THEN result_expression [ ...n ] [ ELSE else_result_expression ] END 搜索到的 CASE 表达式：CASE WHEN Boolean_expression THEN result_expression [ ...n ] [ ELSE else_result_expression ] END

    WHERE CASE WHEN @operator='<=' THEN number<=10 ELSE number=10 END

*   构建动态 SQL

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T12:37:31.063

您可以使参数表示包含数字下方的范围：

```
if(x == y) {
  less = 1
} else {
  less = 0;
} 
```

在表达式中使用参数：

```
SELECT a FROM b WHERE (number < 10 and :less = 1) or (number = 10) 
```

# android - 安装时应用程序崩溃并出现错误 sqlite3_exec - 无法设置同步模式 = 1（正常）

> ID：13859840
> 
> 赞同：1
> 
> 时间：2012-12-13T12:26:27.350
> 
> 标签：android, android-sqlite, urbanairship.com

我正在使用 android 版本 4.0.4 在三星 Note 上运行我的应用程序。

它不会在运行 android 2.2 的三星 POP 等设备上崩溃。在运行 Androi 3.1 的摩托罗拉 Xoom 上。

当我安装我的应用程序时它显示黑屏，然后在一段时间后显示应用程序停止的弹出窗口，当我按确定时，我的应用程序启动屏幕加载在此对话框后面，该对话框消失，我可以转到我的应用程序登录屏幕。

```
12-13 18:33:53.823: I/ActivityThread(14608): Pub com.android.mypype.urbanairship.provider: com.urbanairship.UrbanAirshipProvider
12-13 18:33:53.833: I/Inside MyPype(14608):  Application Class
12-13 18:33:54.423: D/myPype - UALib(14608): Airship Take Off! Lib Version: 2.0.1 / App key = xsXcmKOoRe6gog9onrQHjA
12-13 18:33:54.423: D/myPype - UALib(14608): In Production? false
12-13 18:33:54.713: D/myPype - UALib(14608): Initializing Push.
12-13 18:33:54.718: D/myPype - UALib(14608): Initializing Analytics.
12-13 18:33:54.938: I/SqliteDatabaseCpp(14608): sqlite returned: error code = 5, msg = database is locked, db=xxx

    12-12 11:57:09.553: E/SqliteDatabaseCpp(3608): sqlite3_exec - Failed to set synchronous mode = 1(Normal) 
    12-12 11:57:09.553: E/SQLiteDatabase(3608): Failed to open the database. closing it.
    12-12 11:57:09.553: E/SQLiteDatabase(3608): android.database.sqlite.SQLiteDatabaseLockedException: database is locked
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1132)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1083)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1170)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:844)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:228)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at com.urbanairship.analytics.EventDataManager.<init>(Unknown Source)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at com.urbanairship.analytics.Analytics.<init>(Unknown Source)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at com.urbanairship.UAirship.takeOff(Unknown Source)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at com.android.mypype.MypypeApplication.onCreate(MypypeApplication.java:133)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:972)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3965)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.app.ActivityThread.access$1300(ActivityThread.java:127)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.os.Handler.dispatchMessage(Handler.java:99)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.os.Looper.loop(Looper.java:137)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at android.app.ActivityThread.main(ActivityThread.java:4511)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at java.lang.reflect.Method.invokeNative(Native Method)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at java.lang.reflect.Method.invoke(Method.java:511)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
    12-12 11:57:09.553: E/SQLiteDatabase(3608):     at dalvik.system.NativeStart.main(Native Method)
    12-12 11:57:09.553: E/myPype - UALib(3608): Unable to open Analytics Event DB

    12-12 11:57:37.958: E/myPype - UALib(3608): Unable to get DB size. Database not open.
    12-12 11:57:37.963: E/myPype - UALib(3608): Unable to insert event. Database not open. 
```

在上述错误中，为什么它指向 Application 类 Urbanairship.takeOff() 方法。

我正在寻找这个问题，但还没有得到任何东西。我无法弄清楚。我尝试在 openHelper 类中同步锁定数据库操作。

任何帮助将不胜感激。

在我的应用程序类中，我为 Urbanairship 添加了以下代码。

```
 @Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
// This can be done in code as illustrated here,
        // or you can add these settings to a properties file
        // called airshipconfig.properties
        // and place it in your "assets" folder
        AirshipConfigOptions options = AirshipConfigOptions
                .loadDefaultOptions(this);

         // Take off initializes the services

        UAirship.takeOff(this, options);

        PushManager.enablePush();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:31:15.590

我想通了，但不是解决方案，它只是一个修复程序。我只是处理异常，所以应用程序不会崩溃。

对于 4.0.4 等更高版本，没有人经历过这件事是多么可悲。所以，我得到了一件事，它可能是 Urbairships 的新库。错误，因为它正在尝试写入数据库（我读取了一些事件或其他内容）。

我不明白如何解决，所以我处理了这个异常。

因此，解决方案是您必须在 try-catch 块下编写代码并指定要在 catch 中处理的异常。

# testng - 以编程方式退出 testNG 测试

> ID：13859844
> 
> 赞同：0
> 
> 时间：2012-12-13T12:26:42.490
> 
> 标签：testng, selenium-webdriver

如果满足某个条件，我如何以编程方式退出完整的测试套件？

我正在检查 @AfterMethod 中的条件并使用 fail() 方法使 AfterMethod 注释失败。但是 AfterMethod 注释的执行次数与我的测试套件中的测试次数一样多。然而，测试被跳过。

有没有办法做到这一点？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:33:51.110

@AfterMethod 注释在测试中的每个测试方法之后触发。但是，如果您想在每个测试方法之后验证条件，这是正确的注释。

但是如果你想在所有方法都被执行之后使用@AfterClass

只放 System.exit() 不是一个好习惯。一旦您退出测试，它将不会产生任何测试拆卸操作和报告生成。一旦发现这种情况，干净的方法就是跳过测试。

您可以为此使用 testng SkipException。请参阅下面的代码以获取示例

```
 @AfterMethod
      public void afterMethod() throws Throwable {
          if(CONDITION_MET==true)
          {
             throw new SkipException ("Skipping Test: ");
          } 
      } 
```

谢谢你，达斯纳纳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:22:48.697

只是我的想法

如果您的条件满足并在 afterClass 中停止您的 java 进程，请在 afterMethod 注释方法中调用 afterClass 注释方法。

```
public class NewTest {

    @BeforeClass
      public void beforeClass() {
          System.out.println("In before class");
      }

      @BeforeMethod
      public void beforeMethod() {
          System.out.println("in before method");
      }

      @Test
      public void test1()
      {
          System.out.println("in test1 method");

      }
      @Test
      public void test2()
      {
          System.out.println("in test2 method");

      }
      @AfterMethod
      public void afterMethod() throws Throwable {
          System.out.println("in after method");
          if(condition)
          {
              afterClass();
          }
      }

      @AfterClass
      public void afterClass() throws Throwable {
          System.out.println("in after class ");
          System.exit(0);
      }

} 
```

# sql - 商业智能报告

> ID：13859854
> 
> 赞同：0
> 
> 时间：2012-12-13T12:27:21.347
> 
> 标签：sql, reporting, birt

公司所有报表均采用BIRT设计。但是，我们决定将所有报告转换为 Microsoft 报告工具。此外，我们使用 SQL Server 2008 R2 作为数据库。关于这一点，我是否必须使用**Visual Studio 中的商业智能工具**来完成这些报告，还是必须在**SQL Server 2008 R2 Reporting Services**中完成？

此外，如何将 SSRS 安装到 SQL Server 以及如何将 Business Tool 安装到 Visual Studio？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:01:47.390

商业智能开发工作室 (BIDS) 附带 SQL Server。您可以从 SQL Server 安装（DVD、MSI、ISO）安装它。它是一个独立的产品，除非您安装了 Visual Studio，在这种情况下您使用 VS 来访问 BIDS 功能，但这对您来说是透明的，即当您尝试打开 BIDS 时 VS 会自动打开。如果您已经有 VS，那么安装 BIDS 将作为 VS 的插件安装。

或者，您可以单独安装 Report Builder。我个人很喜欢这个，你可以在这里得到它......

[http://www.microsoft.com/en-gb/download/details.aspx?id=6116](http://www.microsoft.com/en-gb/download/details.aspx?id=6116)

我不确定您所说的 SSDR 是什么意思，您能详细说明一下吗？

# variables - 如何在 powershell 命令中将变量传递给 VBS 脚本？

> ID：13859858
> 
> 赞同：0
> 
> 时间：2012-12-13T12:27:36.537
> 
> 标签：variables, powershell, vbscript

我知道你可以使用类似的东西：

```
$variable = "value 1"

cscript test.vbs $variable 
```

但是您究竟如何在 vbs 脚本中捕获该变量？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:48:06.337

通过访问 WScript.Arguments 集合。[如何](http://technet.microsoft.com/en-us/library/ee156618.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:06:40.430

WScript.Arguments 是一个很好的方法。另一种选择是使用[WSF 文件](http://mcpmag.com/articles/2002/02/01/wsf-the-final-frontier.aspx)在脚本周围添加更多结构。

# facebook - AppCenter 应用页面显示“玩游戏”按钮

> ID：13859868
> 
> 赞同：1
> 
> 时间：2012-12-13T12:28:05.507
> 
> 标签：facebook, center

我们首先推出了一个 Android 应用程序 (http://www.facebook.com/appcenter/christmasslotmachine)，appcenter 页面上的“发送到手机”按钮效果很好，但我们现在也推出了 Facebook 版本的游戏，这现在也在[http://apps.facebook.com/christmasslotmachine/](http://apps.facebook.com/christmasslotmachine/)上正常工作。

目前appcenter页面只提供“发送到手机”选项，没有“玩游戏”选项。它也只报告该游戏可在以下平台上使用：Android 而不是 Android 和 Facebook。

一个重要的注意事项是社区页面上的“玩游戏”链接 - [http://www.facebook.com/ChristmasSlotMachines](http://www.facebook.com/ChristmasSlotMachines) - 也可以正常工作。

有什么建议么？

# r - R ggplot2减少条形宽度和条形之间的间距

> ID：13859874
> 
> 赞同：2
> 
> 时间：2012-12-13T12:28:12.823
> 
> 标签：r, ggplot2

我一直在阅读帖子并寻找问题的答案，但找不到。这是基本的想法。我正在使用 ggplot 生成一个堆叠条形图，其中每个条形图按组细分，并且该图在水平轴上翻转。我知道如何使用“宽度”选项更改条形的宽度，但是减小条形宽度会在条形之间留下大量空白。问题：如何消除条之间的大量空间？

我使用根据我的需要量身定制的先前问题和答案拼凑了一些可重现的代码。任何帮助，将不胜感激！

```
df <- structure(list(A = structure(c(1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L,
3L), .Label = c("0-50,000", "50,001-250,000", "250,001-Over"), class = "factor"),
    B = structure(c(1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L), .Label = c("0-50,000",
    "50,001-250,000", "250,001-Over"), class = "factor"), Freq = c(0.507713884992987,
    0.258064516129032, 0.23422159887798, 0.168539325842697, 0.525280898876405,
    0.306179775280899, 0.160958904109589, 0.243150684931507,
    0.595890410958904)), .Names = c("A", "B", "Freq"), class = "data.frame", row.names = c(NA,
-9L))

library(ggplot2)

bp <- ggplot(data=df, aes(x=A, y=Freq))+
    geom_bar(width=0.2,stat="identity",position="fill") + 
    theme_bw() + 
    theme(axis.title.y=element_blank()) +
    theme(axis.text.y=element_text(size=10)) +
    theme(axis.title.x=element_blank()) +
    theme(legend.text=element_text(size=10)) +
    theme(legend.title=element_text(size=10)) +
    scale_y_continuous(labels = percent_format()) 
  bp + geom_bar(colour="white",width=0.2,stat="identity",position="fill",show_guide=FALSE) + coord_flip() +theme(panel.grid.minor=element_blank(), panel.grid.major=element_blank())+ theme(legend.position="bottom") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:46:52.130

您可以使用更改整个绘图的纵横比`coord_equal`并从中删除`width`参数`geom_bar`。

```
library(ggplot2)
library(scales)

ggplot(data=df, aes(x=A, y=Freq)) +
    geom_bar(stat="identity",position="fill") + 
    theme_bw() + 
    theme(axis.title.y=element_blank()) +
    theme(axis.text.y=element_text(size=10)) +
    theme(axis.title.x=element_blank()) +
    theme(legend.text=element_text(size=10)) +
    theme(legend.title=element_text(size=10)) +
    scale_y_continuous(labels = percent_format()) +
    geom_bar(colour="white",stat="identity",position="fill",show_guide=FALSE) + 
    theme(panel.grid.minor=element_blank(), panel.grid.major=element_blank()) + 
    theme(legend.position="bottom") +
    coord_equal(1/0.2)   # the new command 
```

这种方法的缺点是它不适用于`coord_flip`.

![在此处输入图像描述](../Images/017d62288507d287a216a0881f6733fd.png)

# firefox - NPAPI 插件未在 Firefox 中加载

> ID：13859882
> 
> 赞同：1
> 
> 时间：2012-12-13T12:28:32.277
> 
> 标签：firefox, npapi, browser-plugin

我正在编写一个插件，它进入Windows 文件中的`[INVALID]`部分。我认为我的文件`pluginreg.dat`有问题。`npplugin.rc`

在`npplugin.def`文件中一切都是正确的：

```
LIBRARY
EXPORTS
    NP_GetEntryPoints @1
    NP_Initialize @2
    NP_Shutdown @3 
```

但是既没有`NP_GetEntryPoints`也没有`NP_Initialize`被调用。

要安装插件，我将其放入`%APPDATA%/Mozilla/plugins`目录中。

这是`npplugin.rc`代码：

```
// Microsoft Visual C++ generated resource script.
//
#include "resource.h"

#define APSTUDIO_READONLY_SYMBOLS
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 2 resource.
//
#include "afxres.h"

/////////////////////////////////////////////////////////////////////////////
#undef APSTUDIO_READONLY_SYMBOLS

#if 0
/////////////////////////////////////////////////////////////////////////////
// Russian (Russia) resources

#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_RUS)
LANGUAGE LANG_RUSSIAN, SUBLANG_DEFAULT

#ifdef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// TEXTINCLUDE
//

1 TEXTINCLUDE 
BEGIN
    "resource.h\0"
END

2 TEXTINCLUDE 
BEGIN
    "#include ""afxres.h""\r\n"
    "\0"
END

3 TEXTINCLUDE 
BEGIN
    "\r\n"
    "\0"
END

#endif    // APSTUDIO_INVOKED

#endif    // Russian (Russia) resources
/////////////////////////////////////////////////////////////////////////////
#endif

/////////////////////////////////////////////////////////////////////////////
// English (United States) resources

#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US

/////////////////////////////////////////////////////////////////////////////
//
// Version
//

VS_VERSION_INFO VERSIONINFO
 FILEVERSION 4,5
 PRODUCTVERSION 4,5
 FILEFLAGSMASK 0x3fL
#ifdef _DEBUG
 FILEFLAGS 0x1L
#else
 FILEFLAGS 0x0L
#endif
 FILEOS 0x40004L
 FILETYPE 0x2L
 FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040904b0"
        BEGIN
            VALUE "CompanyName", "MyCompany Ltd."
            VALUE "FileExtents", "myext"
            VALUE "FileOpenName", "My File"
            VALUE "FileDescription", "NPPlugin for me"
            VALUE "FileVersion", "4.5"
            VALUE "InternalName", "npMyPlugin"
            VALUE "Language", "English (United States)"
            VALUE "LegalCopyright", "Copyright (C) MyCompany Ltd. 2012"
            VALUE "MIMEType", "application/x-myplugin"
            VALUE "OriginalFilename", "npMyPlugin.dll"
            VALUE "ProductName", "My NPPlugin"
            VALUE "ProductVersion", "4.5"
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x409, 1200
    END
END

#endif    // English (United States) resources
/////////////////////////////////////////////////////////////////////////////

#ifndef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 3 resource.
//

/////////////////////////////////////////////////////////////////////////////
#endif    // not APSTUDIO_INVOKED 
```

我的问题是哪里有错误或缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:04:10.047

这是来自[conedogers](http://conedogers.com/category/software-development/)的 Chris ，很高兴看到您发现我的博客很有用。

格奥尔格是正确的。Firefox 不是在寻找 Windows 语言环境。看起来 Mozilla 有自己的国际化，这是有道理的，因为他们的代码是为多个平台编写的。

这里发生的是块“040904e4”告诉二进制如何处理下面包含的字符串。版本信息不使用 C 样式结构来包含字符串。块信息用于计算字节偏移量和字符串字符类型，以便您可以提取字符串。

似乎 Firefox 是为 en-western 构建的，因此您需要执行相同操作，否则，正如您发现的那样，Firefox 将无法加载版本信息来检索 mime-type 和描述字符串。

[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646992%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:31:46.337

我真的不知道*是什么不同的*修改使它起作用。问题实际上出在资源文件中，或者可能在定义中。我已将子块更改`040904b0`为`040904e4`、文件和产品版本`4,5,0,0`（因此使它们成为 4 位数，我仍然不知道这是否重要），在每个末尾添加了 '\0' `VALUE`，更改了字符串版本的格式to `'%d, %d, %d, %d'`，添加了一些额外`VALUE`的 s 和一些额外的定义 ( `XP_WIN;XP_WIN32;MOZILLA_STRICT_API;XPCOM_GLUE`)。

我从那里“借来”的所有“想法”

这篇文章：[http ://conedogers.com/2012/11/08/npapi-plugin-sample-for-firefox/](http://conedogers.com/2012/11/08/npapi-plugin-sample-for-firefox/)

和这个源代码示例：[https](https://github.com/chrisDwarner/npruntimeSampleCode) ://github.com/chrisDwarner/npruntimeSampleCode （在上面的文章中引用）。

这是我的最终版本`npplugin.rc`：

```
// Microsoft Visual C++ generated resource script.
//
#include "resource.h"

#define APSTUDIO_READONLY_SYMBOLS
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 2 resource.
//
#include "afxres.h"

/////////////////////////////////////////////////////////////////////////////
#undef APSTUDIO_READONLY_SYMBOLS

#if 0
/////////////////////////////////////////////////////////////////////////////
// Russian (Russia) resources

#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_RUS)
LANGUAGE LANG_RUSSIAN, SUBLANG_DEFAULT

#ifdef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// TEXTINCLUDE
//

1 TEXTINCLUDE 
BEGIN
    "resource.h\0"
END

2 TEXTINCLUDE 
BEGIN
    "#include ""afxres.h""\r\n"
    "\0"
END

3 TEXTINCLUDE 
BEGIN
    "\r\n"
    "\0"
END

#endif    // APSTUDIO_INVOKED

#endif    // Russian (Russia) resources
/////////////////////////////////////////////////////////////////////////////
#endif

/////////////////////////////////////////////////////////////////////////////
// English (United States) resources

#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US

/////////////////////////////////////////////////////////////////////////////
//
// Version
//

VS_VERSION_INFO VERSIONINFO
 FILEVERSION 4,5,0,0
 PRODUCTVERSION 4,5,0,0
 FILEFLAGSMASK 0x3fL
#ifdef _DEBUG
 FILEFLAGS 0x1L
#else
 FILEFLAGS 0x0L
#endif
 FILEOS 0x40004L
 FILETYPE 0x2L
 FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
#if 0
        BLOCK "040904b0"
#else
        BLOCK "040904e4"
#endif
        BEGIN
            VALUE "CompanyName", "MyCompany Ltd.\0"
            VALUE "FileExtents", "myfile\0"
            VALUE "FileOpenName", "My File\0"
            VALUE "FileDescription", "NPPlugin for me\0"
            VALUE "FileVersion", "4, 5, 0, 0\0"
            VALUE "InternalName", "npMyPlugin\0"
            VALUE "Language", "English (United States)\0"
            VALUE "LegalCopyright", "Copyright (C) MyCompany Ltd. 2012\0"
            VALUE "LegalTreademarks", " \0"
            VALUE "MIMEType", "application/x-myplugin\0"
            VALUE "OriginalFilename", "npMyPlugin.dll"
            VALUE "PrivateBuild", "\0"
            VALUE "ProductName", "My NPPlugin"
            VALUE "ProductVersion", "4, 5, 0, 0\0"
            VALUE "SpecialBuild", "\0"
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x409, 1200
    END
END

#endif    // English (United States) resources
/////////////////////////////////////////////////////////////////////////////

#ifndef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 3 resource.
//

/////////////////////////////////////////////////////////////////////////////
#endif    // not APSTUDIO_INVOKED 
```

# sql-server - CTE 中的右外连接问题

> ID：13859883
> 
> 赞同：1
> 
> 时间：2012-12-13T12:28:33.677
> 
> 标签：sql-server, tsql, join, common-table-expression, outer-join

最终，我希望我的最终结果如下所示：

```
ReportingDate    FundCode    FundName    AssetClass    Rank    Percentage
-------------------------------------------------------------------------
30/11/2012       1           Fund1       Bond          1       50
30/11/2012       1           Fund1       Equity        2       30
30/11/2012       1           Fund1       Balanced      3       0
30/11/2012       1           Fund1       Other         4       20
30/11/2012       2           Fund2       Equity        1       60
30/11/2012       2           Fund2       Bond          2       20
....... 
```

基本上，如果没有`Balanced`像上面例子中所说的数据，我仍然希望在数据中返回它，但百分比为 0。

为此，我创建了一个名为`@AssetClass`and `RIGHT OUTER JOIN`this 的表到我的工作表，这样`AssetClass`即使没有数据，我也可以返回所有的 's。

我的脚本如下所示：

```
;;WITH CTE AS
(
SELECT 
        CASE 
            WHEN ReportingDate IS NULL THEN MAX(ReportingDate) OVER (PARTITION BY (SELECT 1)) 
            ELSE ReportingDate 
        END                     AS ReportingDate

    ,   CASE
            WHEN PortfolioID IS NULL THEN MAX(PortfolioID) OVER (PARTITION BY (SELECT 1)) 
            ELSE PortfolioID 
        END                     AS PortfolioID

    ,   CASE
            WHEN PortfolioNme IS NULL THEN MAX(PortfolioNme) OVER (PARTITION BY (SELECT 1)) 
            ELSE PortfolioNme 
        END                     AS PortfolioNme

    ,   AC.AssetClass           AS AssetClass

    ,   CASE
            WHEN AC.AssetClass = 'No Asset Class' THEN 3 
            WHEN AC.AssetClass = 'Other' THEN 2 
            ELSE 1
        END                     AS [Rank]
    ,   CAST(SUM(ISNULL(Percentage, 0)) AS DECIMAL(22,1))  AS [Weight]

FROM @Worktable as WT

    RIGHT OUTER JOIN @AssetClass AS AC
        ON RTRIM(WT.AssetClass) = RTRIM(AC.AssetClass)

GROUP BY WT.ReportingDate, WT.PortfolioID, WT.PortfolioNme, AC.AssetClass
)

SELECT 
        CONVERT(VARCHAR, ReportingDate, 103)    AS ReportingDate    
    ,   PortfolioID                             AS FundCode
    ,   PortfolioNme                            AS FundName
    ,   AssetClass
    ,   RANK() OVER (   PARTITION BY PortfolioID 
                        ORDER BY [Rank], [Weight] DESC) AS [Rank]
    ,   [Weight]                                AS Percentage
FROM CTE

ORDER BY ReportingDate, PortfolioID, [Rank], [Weight] DESC 
```

我的问题是，当我为一个投资组合运行它时，它非常有效。当我为多个投资组合运行它时，它似乎在最终选择中排除了没有数据的任何内容，因此在上面的示例中，`Balanced`不返回该行。

我的脚本是否有问题，或者我是如何正确连接到外部的`@AssetClass`？有什么我遗漏的东西或者我可以在我的脚本中改进的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:32:23.790

可能这可以帮助您
更新 03.01.2013

```
 ;WITH CTE AS
(
SELECT DISTINCT WT.ReportingDate, WT.PortfolioID, WT.PortfolioNme,        
       AC.AssetClass,
       CASE WHEN AC.AssetClass = 'No Asset Class' THEN 3 
            WHEN AC.AssetClass = 'Other' THEN 2 
            ELSE 1 END AS [Rank],        
       SUM(CASE WHEN AC.PortfolioID IS NULL THEN 0.00 ELSE WT.Percentage END)
       OVER(PARTITION BY WT.ReportingDate, WT.PortfolioID, AC.AssetClass) AS [Weight]
FROM Worktable WT CROSS APPLY (
                               SELECT AC2.AssetClass, WT2.ReportingDate, WT2.PortfolioID,
                                      WT2.AssetClass AS AssetClass2 
                               FROM AssetClass AC2 LEFT JOIN Worktable WT2 
                                 ON RTRIM(AC2.AssetClass) = RTRIM(WT2.AssetClass)
                                   AND WT2.PortfolioID = WT.PortfolioID                                                              
                               ) AC
WHERE (WT.ReportingDate = AC.ReportingDate AND WT.PortfolioID = AC.PortfolioID AND WT.AssetClass = AC.AssetClass)
        OR (AC.AssetClass2 IS NULL)
GROUP BY WT.ReportingDate, WT.PortfolioID, WT.PortfolioNme,          
         AC.AssetClass, AC.PortfolioID, WT.Percentage
)
SELECT CONVERT(VARCHAR, ReportingDate, 103) AS ReportingDate,
       PortfolioID AS FundCode,
       PortfolioNme AS FundName,
       AssetClass,
       RANK() OVER (PARTITION BY PortfolioID 
                    ORDER BY [Rank], [Weight] DESC) AS [Rank],
       [Weight] AS Percentage
FROM CTE
ORDER BY ReportingDate, PortfolioID, [Rank], [Weight] DESC 
```

# .net - .NET Remoting 意外的第二个侦听端口

> ID：13859892
> 
> 赞同：1
> 
> 时间：2012-12-13T12:28:57.207
> 
> 标签：.net, port, remoting, tcpchannel

我们是 .NET Remoting 的大用户，最近注意到我们的服务器进程都有*两个*活动的监听端口，出现在 netstat 和 Resource Monitor 中。我们只在代码中的预定义端口上注册*了一个*TcpChannel，无法计算出第二个（显然是随机分配的）监听端口是什么。任何人都可以帮助和/或指出一些涵盖此内容的技术文档吗？迄今为止，我无法找到任何东西。

非常感谢。

# php - 使用我预定义的数据库字段 php 映射 Excel 工作表字段

> ID：13859895
> 
> 赞同：1
> 
> 时间：2012-12-13T12:29:04.353
> 
> 标签：php, mysql, excel

我最后有许多不同的 excel 表。我需要将他们的数据放入数据库中。数据库中有一些预定义的字段（国家、代码、开始日期、结束日期），我需要从 excel 中获取这些字段并需要放入数据库中。

**到目前为止尝试过：** 当我知道excel表的字段名称时，我已经获取数据并将其放入数据库中。例如，如果 excel 也有**(country,code,start,end)**那么我的代码正在获取并准确地放入数据库

**问题** 我希望它自动上传到数据库，以防excel字段与我在代码中使用的不同。进一步解释，假设在我的 excel 字段中是 **(位置、位置代码、开始日期、结束日期)**。然后我还希望我的程序从适当的字段中提取数据。

我想要在我的面板上使用某种映射实用程序，以便管理员可以在上传带有新字段的新 Excel 工作表后映射字段。以便它从 excel 表的正确列映射和获取数据。

请建议如何开始。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:49:46.503

您可以使用库之类的

[http://code.google.com/p/php-excel-reader/](http://code.google.com/p/php-excel-reader/)

并做一个具有管理员的自定义应用程序可以选择 db 中的字段作为 excel 中的读取列。

# binary-tree - 表达式上的二叉树

> ID：13859897
> 
> 赞同：2
> 
> 时间：2012-12-13T12:29:06.033
> 
> 标签：binary-tree

我必须为这个表达式绘制二叉树`A*(B-C+D)*P/Q`

这是正确的吗？

```
 *

             *                    /

          A     +              P     Q

              -   D 

            B   C 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:34:16.313

你的树对应于这个表达式：

```
 (A*(B-C+D))*(P/Q) 
```

虽然在技术上是正确的，但它应该是这样的（如果你假设乘法和除法具有相同的优先级）：

```
 ((A*(B-C+D))*P)/Q 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-30T19:31:22.037

你的答案是正确的。以下是获取这棵树的步骤

**A*(B-C+D)*P/Q**

**第 1 步**：由于括号具有最高优先级，因此首先对其进行评估。

> B-C+D

但是 + 和 - 具有相同的执行优先级，因此考虑了关联性。运算符从左到右具有相同的关联性，即左侧必须只有一个运算符的操作数。只有 - 运算符的左侧有一个操作数，所以它先被执行，然后 + 所以表达式变为

> （（BC）+ D）
> 
> A*Z*P/Q 其中 z=( (BC) + D )

**步骤2：** *和/具有相同的评估优先级，因此考虑打破*和/的平局关联性。两个运算符从左到右具有相同的关联性，即左侧必须是明确的，这意味着运算符（* OR /）的左侧必须只有一个操作数。

所以只有第一个 * 有一个操作数，即 A 因此接下来执行 A*Z

> (A*Z)*P/Q

让我们将其重命名为

> AZ*P/Q

**第 3 步：** 现在遵循关联性规则，因为剩余操作数具有相同的优先级 * 首先执行，因为它的左侧 AZ 只有一个操作数，所以，

> AZP/Q

**第 4 步：** finally / 运算符将被执行

> AZPQ

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-24T17:22:06.273

为了明确起见，表达式树可以在每个二元运算周围有括号。所以这将导致 (B- C) +D 和 B - (C + D) 的不同树，尽管由于加法的关联规则，结果将是相同的。

虽然对于人类读者来说不太清晰，但一致的包围的优点是可以清楚地区分 (((A*(B-(C+D))) *P)/Q) 和 ((A* (B-(C+D)) )*(P/Q))。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:34:57.963

我认为您在编写表达式时犯了一个错误..根据我的说法，这将是 A*B-(C+D)*P/Q 而对于这个二叉树将是这样的..

```
 -
        *                    *
      A   B             +          /
                      C   D      P   Q 
```

# php - 更新网站。IE 保留旧缓存

> ID：13859898
> 
> 赞同：0
> 
> 时间：2012-12-13T12:29:07.583
> 
> 标签：php, internet-explorer, caching

我有这个 php 页面，上面有一些 html 和 javascript 代码。一些javascript是用php动态生成的。

因此，当我在此页面上更改服务器上的某些内容并在 IE 中重新加载页面时，它会使用缓存的页面。所以问题是我们必须告诉我们的用户在每次更新时刷新他们的缓存。

使用 lalala.css?version=20120412 的技巧将不起作用，因为代码在 php 文件中。

在 Chrome 和 Firefox 中效果很好。

即使我们更改了数据库中的一个设置，php 将其打印到文件中，下次 IE 用户访问该页面时，它将使用旧的缓存版本，并且更改的设置不会生效。它甚至不尝试加载页面。

浏览器不应该至少将校验和或其他东西与服务器或其他东西进行比较吗？

我不明白这一点。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:31:31.260

将此代码粘贴到 php 文件的顶部

```
<?php 
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");  
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:36:18.297

```
<link type="text/css" rel="stylesheet"
href="lalala.css?<?php echo date('l jS \of F Y h:i:s A'); ?>" /> 
```

# ruby-on-rails - Rails 和 Heroku - 如何在 URL“example.com/file”上显示 XML 文件？

> ID：13859903
> 
> 赞同：0
> 
> 时间：2012-12-13T12:29:15.193
> 
> 标签：ruby-on-rails, heroku, amazon-s3, sitemap

客户有一个在 Heroku 上运行的网站，文件存储在 Amazon S3 上。站点地图地图设置在 URL 上：`website.com/sitemap.xml`-> 将此 URL 地址输入浏览器后重定向到`http://s3.amazonaws.com/bucket/sitemap.xml`. XML 大约有 30MB。

但是现在客户想要直接显示 XML 文件`website.com/sitemap.xml`，而不是重定向到 Amazon S3。如果我问他为什么，他写信给我“因为它需要谷歌网站管理员”。

我想问你，是否有任何方法可以显示`sitemap.xml`直接`website.com/sitemap.xml`...的内容，或者，是否有任何方法可以解决这个问题。

感谢您有一个愉快的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:43:39.180

所以现在我没有看到任何选项，只能从 s3 下载 sitemap.xml，然后在您的应用程序中呈现它。

使用 net/http 下载页面。

# r - 使用 vapply 返回 POSIXct 类的向量

> ID：13859905
> 
> 赞同：8
> 
> 时间：2012-12-13T12:29:24.537
> 
> 标签：r, posixct

我有以下具有 POSIXct 类的日期列表（只是一个最小的工作示例）：

```
L <- list(as.POSIXct("2012-12-12 12:12:12"), as.POSIXct("2012-12-12 12:12:12")) 
```

我需要从中检索 POSIXct 类的向量。这排除了 lapply，并留下了 sapply 和 vapply。我将它们应用如下：

```
sapply(L, "[[", 1) 
```

这会返回：

```
[1] 1355310732 1355310732 
```

将此向量转换为 POSIXct 会产生错误，因为必须提供原点。我也试过 vapply：

```
vapply(L, "[[", as.POSIXct(Sys.time()), 1) 
```

还得到返回的数字向量：

```
[1] 1355310732 1355310732 
```

同样 unlist 不会产生所需的 POSIXct 向量：

```
> unlist(L)
[1] 1355310732 1355310732 
```

简而言之，如何将 POSIXct 值列表提取到 POSIXct 向量中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T12:34:49.853

怎么样`do.call`？

```
L <- list(as.POSIXct("2012-12-12 12:12:12"), as.POSIXct("2012-12-12 12:12:12"))
do.call(c, L) # Execute function c on a list L of arguments.
[1] "2012-12-12 12:12:12 CET" "2012-12-12 12:12:12 CET" 
```

# amazon-ec2 - Riak 节点在更改 IP 地址后不再工作

> ID：13859906
> 
> 赞同：5
> 
> 时间：2012-12-13T12:29:25.250
> 
> 标签：amazon-ec2, ubuntu-12.04, riak

我使用实例化的 Amazon EC2 虚拟 Ubuntu 12.04 服务器作为我的单个 Riak 节点。**[我已经使用 basho 网站上的](http://docs.basho.com/riak/latest/tutorials/installation/Installing-on-Debian-and-Ubuntu/)**指南完成了在实例上设置 Riak 的所有适当阶段。**`x.x.x.x`** 实例的私有 IP 地址在哪里，包括：

## 安装

> *   用于获得 root 权限（EC2将**`sudo su -`**我登录为“Ubuntu”）。
>     
>     
> *   使用以下命令安装 SSL Lib：
>     
>     
>     
>     ### **`sudo apt-get install libssl0.9.8`**
>     
>     
> *   下载 12.04 的 64 位软件包：
>     
>     
>     
>     ### **`wget http://downloads.basho.com.s3-website-us-east-1.amazonaws.com/riak/CURRENT/ubuntu/precise/riak_1.2.1-1_amd64.deb`**
>     
>     
> *   然后通过以下方式解包：
>     
>     
>     
>     ### **`sudo dpkg -i riak_1.2.1-1_amd64.deb`**

按照**[basho 指南](http://docs.basho.com/riak/latest/cookbooks/Adding-and-Removing-Nodes/)**中的说明，我更新了这两个文件（使用 vi）：

## vm.args

> *   更改**`-name riak@x.x.x.x`**为我的实例的私有 IP。

## 应用程序配置

> *   更改**`{http, [ {"x.x.x.x", 8098 } ]}`**为我的实例的私有 IP。
>     
>     
> *   更改**`{pb_ip, "x.x.x.x"}`**为我的实例的私有 IP。

当我第一次设置服务器并执行上述操作时，Riak 节点工作正常，我可以连接到节点，然后使用**`riak start`**成功**`riak-admin test`**返回：

```
>Attempting to restart script through sudo -H -u riak
>Successfully completed 1 read/write cycle to 'riak@x.x.x.x' 
```

第二天，我启动了实例，使用实例的新 IP 地址**`y.y.y.y`**（实例的私有 IP 每次停止/启动时更改）重复上述过程（忽略安装），然后**`riak start`**在终端中输入，只收到：

```
>Attempting to restart script through sudo -H -u riak
>Riak failed to start within 15 seconds,
>see the output of 'riak console' for more information.
>If you want to wait longer, set the environment variable
>WAIT_FOR_ERLANG to the number of seconds to wait 
```

在 riak 控制台中给出的错误是：

```
>gen_server riak_core_capability terminated with reason: no function clause matching orddict:fetch('riak@y.y.y.y', [{'riak@x.x.x.x',[{{riak_core,staged_joins},[true,false]},{{riak_core,vnode_routing},[proxy,...]},...]}]) 
```

**`y.y.y.y`**新的实例 IP 地址在哪里**`x.x.x.x`**，旧的 IP 地址在哪里。

我已经为此苦恼了一段时间，找不到任何关于该主题的内容，我能想到的唯一解决方案是重新安装 Riak，以防我的 PATH 目录出错。如果失败了，我最后的办法是终止实例并在新实例上重新配置 Riak。所以在我开枪之前，我想问的是：

*   使用新的实例 IP 地址更新字段后`app.config`，`vm.args`为什么**`riak start`**命令不再成功？

*   有没有办法为 Ubuntu EC2 实例分配静态私有 IP？这不仅有助于解决问题，而且节省了我每次更新`app.config`和启动/停止实例的时间。`vm.args`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T16:02:37.520

因此，经过更多的挖掘和深入的阅读，我找到了一个解决方案：

> **您需要移除 Riak 环并再次启动 Riak 以重置 riak_core。**

您可以通过在终端中使用以下命令来执行此操作：

> **`rm -rf /var/lib/riak/ring/*`**
> 
> *   **注意：** *这应该**在**您更新后完成*****`app.config`****和*****`vm.args`****使用新的服务器 IP，否则可能会出现令人讨厌的副作用。*******

 ******然后

> **`riak start`**

我不再被抛出“连接失败”错误，并且在发出**`riak-admin test`**命令后我愉快地收到了（`y.y.y.y`我的实例的私有 IP 在哪里）：

```
>Attempting to restart script through sudo -H -u riak
>Successfully completed 1 read/write cycle to 'riak@y.y.y.y' 
```

> 我应该注意，此解决方案适用于虚拟服务器以及物理服务器。尽管我认为 IP 的重新分配在物理服务器中会很少发生。

现在虽然这解决了问题，但这仍然意味着每当我需要重新启动实例时，我必须通过编辑`app.config`和`vm.args`文件来更改私有 IP 地址（记住每次启动/停止 Ubuntu 实例时私有 IP 都会更改）然后使用上面的命令清除 Riak 环，所以这不是一个优雅的解决方案。

如果有人知道为 EC2 实例设置静态私有 IP 的方法（或解决这两个障碍的另一种解决方案？），它将彻底解决这个问题。

**编辑：12 年 12 月 14 日**

## 将静态 IP 分配给 EC2 实例的*有限解决方案：*

> Amazon Web Services 允许将弹性 IP 关联到 EC2 实例（任何类型）。因此，如果一个实例有一个与之关联的弹性 IP，即使它重新启动，该 IP 仍将与该实例关联。**[您可以在此处](http://aws.amazon.com/articles/1346?_encoding=UTF8&jiveRedirect=1)**找到有关弹性 IP 的文档。
> 
> 如果您在 Amazon 的*免费使用*套餐下，创建弹性 IP 不应该向您收费**，只要它与正在运行的实例相关联**。如果一个弹性 IP 被解除关联，只要该弹性 IP 保持解除关联，亚马逊就会为未使用的弹性 IP 的**每个运行小时产生费用。**例如，终止实例将解除与弹性 IP 的关联，除非该弹性 IP 被重新关联或释放，上述情况均适用。完全停止您的实例然后在稍后启动它也会解除弹性 IP 的关联。
> 
> 每个实例最多可以拥有**一个**弹性 IP，并且这将产生费用。
> 
> *对于那些感兴趣的人，您可以在弹性 IP 地址*下找到更多弹性 IP 的定价**[信息](http://aws.amazon.com/ec2/pricing/)**。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T11:10:14.803

从 Riak 1.3 开始，riak-admin reip 已被弃用，使用 riak-admin cluster replace 是替换集群名称的推荐方式。

这些是我必须发出的命令：

```
riak stop # stop the node
riak-admin down riak@127.0.0.1 # take it down
sudo rm -rf /var/lib/riak/ring/* # delete the riak ring
sudo sed -i "s/127.0.0.1/`hostname -i`/g" /etc/riak/vm.args # Change the name in config
riak-admin cluster force-replace riak@127.0.0.1 riak@"`hostname -i`" # replace the name
riak start # start the node 
```

这应该将节点的名称设置为 riak@[您的 EC2 内部 IP 地址]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:11:51.847

除了更改 app.config 中的 PB 和 HTTP IP 以及 vm.args IP，我还必须运行：

[http://docs.basho.com/riak/1.2.0/references/Command-Line-Tools---riak-admin/#reip](http://docs.basho.com/riak/1.2.0/references/Command-Line-Tools---riak-admin/#reip)

如果不这样做，运行 riak 控制台并查看输出，旧 IP 仍然存在于错误日志中。*******

# ruby - 记录闭包和非 Sinatra 类

> ID：13859913
> 
> 赞同：0
> 
> 时间：2012-12-13T12:29:56.533
> 
> 标签：ruby, ruby-on-rails-3, logging, sinatra, closures

我是 Ruby 和 Sinatra 的新手，并试图访问闭包 ( ) 中的[记录器对象。](http://www.sinatrarb.com/intro#Logging)`EM.run do .. end`

这是从工作代码中提取的，其中带有消息“LOGGER IS NOT ACCESSIBLE HERE”的日志记录语句给出编译错误。

```
class Connection
  def get_updates
   logger.info "LOGGER IS NOT ACCESSIBLE HERE 1"
  end
end

class Streamer < Sinatra::Base
  def stream
    logger.info "Inside stream"
    EM.run do
     logger.info "LOGGER IS NOT ACCESSIBLE HERE 3"
     Connection.new.get_updates

     EM::PeriodicTimer.new(10) do
      logger.info "LOGGER IS NOT ACCESSIBLE HERE 4"
     end
   end
  end
end
get '/' do
  logger.info "loading data"
  Streamer.new.stream  
end 
```

从我发现 Sinatra 使用的[文档](http://www.sinatrarb.com/intro#Logging)`env['rack.logger']`中。我们如何在上述代码中的非 Sinatra 类中使用相同的类，如 Connection 和 Streamer？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:53:36.677

实际上是一个非常有趣的问题。事实证明，该`logger`字段实际上并不是一个变量 - 它是`Sinatra::Base`. 因此，当您执行`Sinatra::Base`对象范围内的代码时，您只需键入它即可调用`logger`，它将返回记录器对象。

由于它是`Sinatra::Base`对象的一部分，因此在对象范围内是不可见的`Connection`。

现在我们要结束简单的 Ruby 内容，是时候进入更高级的部分了。

更有趣的部分是当您从该`EM.run do`部分中调用它时。你不能在那里使用 logger 的原因是因为这些块*不是*在对象的范围内执行的`Streamer`，它们是由 eventmachine 本身使用类似的东西在其他范围内执行的`instance_eval`-`class_eval`这篇[文章](http://www.trottercashion.com/2011/02/08/rubys-define_method-method_missing-and-instance_eval.html)展示了一个很好的例子，说明如何`instance_eval`在像EM这样的DSL。

这也是为什么`logger`可以从`get '/'`块中访问该方法的原因 - Sinatra 将在具有`logger`using 方法的对象范围内执行此块`instance_eval`。

为了做你想做的事，你可以尝试创建一个包含记录器的局部变量：

```
class Streamer < Sinatra::Base
  def stream
    # This will create a local variable called logger that will
    # save whatever is returned by the logger method
    logger = self.logger

    logger.info "Inside stream"
    EM.run do
     logger.info "This should now be accessible"
     Connection.new.get_updates

     EM::PeriodicTimer.new(10) do
      logger.info "This should now be accessible"
     end
   end
  end
end 
```

这仍然不能解决从您的`Connection`班级登录的问题。做到这一点的方法是要么使用全局日志变量（坏主意），要么在你这样做时传入记录器变量`Connection.new`（不是惊人的想法，但比全局更好）。

# google-maps - Google Map API V3 - 如何在用户实际双击时防止标记的鼠标单击事件

> ID：13859918
> 
> 赞同：6
> 
> 时间：2012-12-13T12:30:04.363
> 
> 标签：google-maps, google-maps-api-3

我在地图上有一个要绑定两个事件的标记：

1.  点击
2.  dblclick

我想做以下事情：

1.  当用户单击标记时，地图应放大并显示更详细的地图。
2.  我想将“dblclick”事件绑定到同一个标记，以便它将在相邻的“div”元素中加载一些第三方报告。

换句话说，我希望它在用户单击或 dblclicks 时表现不同。但问题是，当我将这两个事件绑定到标记并且用户“双击”标记时，“单击”处理程序被触发，我不想让它发生。

是否真的，当用户双击时，点击事件也会被触发？如果是这样，当用户实际双击时如何防止它触发“点击”事件？有什么办法可以让我在标记的单击和双击事件上做不同的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:49:27.973

这是 api 的已知细微差别，您需要安装点击计数器超时，如下所示：

```
function createMap2() {
  var infoWindow = new google.maps.InfoWindow();
  var map = new google.maps.Map(document.getElementById("map2"), myOptions); 

  var doubleClicked=false;
  var clickEvent;

  google.maps.event.addListener(map, 'dblclick', function(event) { 
    doubleClicked=true;
  }); 

  function handleClick() {
    if (!doubleClicked) {
      infoWindow.setPosition(clickEvent.latLng);
      infoWindow.setContent(createInfo(clickEvent));
      infoWindow.open(map);
    }
  }

  google.maps.event.addListener(map, 'click', function(event) { 
    clickEvent = event;
    doubleClicked = false;
    window.setTimeout(handleClick, 250);
  }); 
} 
```

以上代码摘自[http://www.william-map.com/20100506/1/v3click.htm](http://www.william-map.com/20100506/1/v3click.htm)

查看这些链接以获取更多信息：

[https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/YRAvYHngeNk](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/YRAvYHngeNk) [https://groups.google.com/forum/?fromgroups=#!topic/google -maps-js-api-v3/2MomDiLMEiw](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/2MomDiLMEiw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:15:28.997

您可以使用将单击与双击分开的预处理函数。在这种情况下，第二次点击必须在第一次点击的 500 毫秒内发生：

```
//Global vars
var G = google.maps;
var clickTimeOut = null;

G.event.addListener(marker,'click',mClick);

function mClick(mev) {
    if (clickTimeOut) {
        window.clearTimeout(clickTimeOut);
        clickTimeOut = null;
        doubleClick(mev);
    }
    else {
        clickTimeOut = window.setTimeout(function(){singleClick(mev)},500);
    }
}

function doubleClick(mev) {
    // handle double click here
}

function singleClick(mev) {
    window.clearTimeout(clckTimeOut);
    clickTimeOut = null;
    // handle single click here
} 
```

mev 是事件处理程序作为参数接收的[**mouseEvent 对象。**](https://developers.google.com/maps/documentation/javascript/reference#MouseEvent)

# security - 网络渗透测试建议 - 工具和外部承包商建议

> ID：13859925
> 
> 赞同：1
> 
> 时间：2012-12-13T12:30:32.497
> 
> 标签：security, web, penetration-testing, penetration-tools

我不确定这是否对 SO 来说是一个合适的问题，但我还是会继续，因为我不确定。

我一直在为我当前的项目寻找渗透测试工具，并找到了其中的一些工具，但最终还是要认真对待这一点，并寻找专门从事此类工作的专业组织或个人。

寻找工具的原因只是为了让我能够在启动完整的渗透测试周期之前摘下低垂的果实。这也有望使该过程更便宜，因为我希望已经解决了所有明显的漏洞。

**工具和资源**

*   [BurpSuite](http://portswigger.net/burp/)
*   [IBM 应用扫描](http://www.ibm.com/developerworks/downloads/r/appscan/)
*   [nmap.org](http://nmap.org/)
*   [尼克托](http://www.cirt.net/nikto2)

**组织与个人**

我想知道是否有任何资源可以对执行这些任务的组织进行评级和审查？有没有你可以推荐的组织，你以前使用过并取得了很好的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:54:51.413

@Jammer，我不确定是否存在您正在寻找的评级。我个人的观点是，研究您的要求——无论您是在寻找认证或合规性，还是只是想提高安全性。根据这些标准，您可以查看渗透测试组织并自行评估它们。此链接可能会有所帮助，

[http://www.ivizsecurity.com/blog/penetration-testing/how-to-choose-penetration-testing-companies/](http://www.ivizsecurity.com/blog/penetration-testing/how-to-choose-penetration-testing-companies/)

无论如何，在选择第三方供应商或拥有自己的安全团队之间总是需要权衡取舍。您可以进行第三方咨询，然后拥有自己的内部受过安全教育的 QA 团队。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T13:28:06.610

恐怕你列出的一些工具是可比的。

Burp 是一个代理扫描工具。您可以使用 burp 拦截流量并在发送到服务器之前操纵请求。专业版具有针对您发送扫描仪的特定要求的扫描仪

Nikto 和Appscan 是自动扫描仪。最后，您需要消除误报，也可能产生误报结果。

nmap 是一个强大的网络工具，用于使用脚本引擎进行端口扫描、ftp、snmp 等相关搜索。

此外，使用自动化工具不会降低您的渗透测试成本。因为在任何情况下，您都应该在公开您的应用程序之前进行渗透测试服务。

降低安全成本不是一个好主意，最好聘请具有安全编码背景的开发人员或将安全开发生命周期应用于您的开发环境。

如果您还有其他问题，请拍下来。

# java - 在运行时将 A5 更改为 A4 格式

> ID：13859926
> 
> 赞同：1
> 
> 时间：2012-12-13T12:30:42.243
> 
> 标签：java, jasper-reports

我在 ireport 中创建了一个 A5 报告并在 java 应用程序中使用。
我在运行时和查看页面上将 A5 更改为 A4 格式，但是当打印页面输出为 A5 格式时。

以下代码：

```
 JasperDesign _des = JRXmlLoader.load("report1.jrxml");

        _des.setPageHeight(842);
        _des.setPageWidth(595);

        JasperReport _rep = JasperCompileManager.compileReport(_des);

        JasperPrint jasperPrint = JasperFillManager.fillReport(_rep, params, _data);

        JRViewer_com = new JRViewer(jasperPrint); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:35:15.367

您的代码中必须缺少您的问题中未提供的某些内容。当我创建一个示例并运行它时，它可以工作。我所做的唯一更改是使用静态方法`JasperViewer.viewReport(jasperPrint, true);`查看报告。

```
public static void main(String[] args) throws JRException {
    File file = new File("C:\\Test\\src\\report1.jrxml");
    System.out.println("file = "+file.exists());
    JasperDesign _des = JRXmlLoader.load(file);

    _des.setPageHeight(842);
    _des.setPageWidth(595);

    JasperReport _rep = JasperCompileManager.compileReport(_des);
    JasperPrint jasperPrint = JasperFillManager.fillReport(_rep, new HashMap<String, Object>());
    JasperViewer.viewReport(jasperPrint, true);
} 
```

如果您可以提供一个可运行并重现问题的小型单个 java 类，我可能会提供更多帮助。

# java - 长 [] 到长 [] 反之亦然？

> ID：13859928
> 
> 赞同：4
> 
> 时间：2012-12-13T12:30:54.067
> 
> 标签：java

`Long[]`有没有人知道在带有（un）box＆copy的明显for循环之外的Java中转换为`long[]`反之亦然的有效，快速和干净的方法？

注意：这与拆箱或装箱**无关**。我明确地谈论数组！`Long``long`

“没有比循环和复制更好的方法”也是一个答案；）

编辑： **我知道执行上述操作的含义，最好*避免*这样做。假设，我无法避免它，并且希望在不使用 3rd 方的东西的情况下尽可能聪明地做到这一点。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T12:33:36.093

如果您使用[apache commons lang](http://commons.apache.org/lang/)，您可以执行以下操作：

```
long[] primitive = ArrayUtils.toPrimitive(new Long[]{1L, 2L, 3L, 4L}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T12:33:57.907

没有比循环和复制更好的方法了

最好的解决方案是首先避免转换。如果您担心效率，请避免使用`Long[]`，因为它比`long[]`如果您需要使用集合大很多倍，您可以尝试包装 long[] 的 TLongArrayList。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T12:33:03.940

当 Java 装箱/拆箱时，它实际上做了一些事情，即使它没有向用户显示它。

`Long[]`并且`long[]`是非常不同的对象。所以答案是，不，你必须循环和复制。但更好的问题是，你为什么需要这个？您几乎可以在任何情况下交替使用它们……您必须在实现时决定对您来说更重要的是对象创建还是内存使用。希望您使用`Long.valueOf`创建`Long`s（或自动装箱）来使用 Java 的`Long`值缓存。

这是[apache common lang](http://svn.apache.org/viewvc/commons/proper/lang/trunk/src/main/java/org/apache/commons/lang3/ArrayUtils.java?view=markup&pathrev=1401523)的来源`ArrayUtils.toPrimitive`。它使用循环。

```
public static long[] toPrimitive(Long[] array) {
  if (array == null) {
    return null;
  } else if (array.length == 0) {
    return EMPTY_LONG_ARRAY;
  }
  final long[] result = new long[array.length];
  for (int i = 0; i < array.length; i++) {
    result[i] = array[i].longValue();
  }
  return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T12:33:19.307

Java 本身不提供将对象数组转换为预置数组的任何方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T12:33:27.530

[ArrayUtil 参考](http://commons.apache.org/lang/)希望这可能会有所帮助。

```
long[] longs = new long[]{1L};
Long[] longObjects = ArrayUtils.toObject(longs);
List<Long> longList = java.util.Arrays.asList(longObjects); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-13T12:33:31.650

没有比循环和复制更好的方法了，*包裹在一个可以反复使用的辅助函数中*。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-13T12:33:48.153

您可以使用 Apache 中的 ArrayUtils 来执行此操作，如下所述：

[将原始 long 数组转换为 Long 列表](https://stackoverflow.com/questions/754294/convert-an-array-of-primitive-longs-into-a-list-of-longs)

# android - 如何打开扬声器在 Android Jellybean 上拨打电话

> ID：13859932
> 
> 赞同：2
> 
> 时间：2012-12-13T12:31:18.017
> 
> 标签：android, call, android-4.2-jelly-bean

我要做的是从我的应用程序拨打电话并在此通话中打开扬声器。

在 android 4.0 上一切正常，我刚刚在开始呼叫意图之前设置**了 audiomanager.setSpeakerphoneOn(true) 。**

但在 android 4.1 PhoneUtils 在通话前检查扬声器状态并将其关闭（logcat）：

```
D/PhoneUtils( 1029): about to activate speaker
D/PhoneUtils( 1029): activateSpeakerIfDocked()...
I/PhoneUtils( 1029): Forcing speaker off when initiating a new outgoing call... 
```

我还尝试使用以下方法监听呼叫状态： mTelephonyManager.listen(receiver, PhoneStateListener.LISTEN_CALL_STATE); 在此接收器之后将捕获 3 个状态：

*   IDLE（我不感兴趣）
*   CALL_STATE_RINGING（也没有兴趣，因为我需要处理拨出电话）
*   CALL_STATE_OFFHOOK（虽然这个会有所帮助）

但是最后一个“事件”也在PhoneUtils检查扬声器状态（logcat）之前发送：

```
11:43:48.089 D/KeyguardViewMediator( 665): keyguard receiver action : android.intent.action.PHONE_STATE
11:43:48.089 D/KeyguardViewMediator( 665): keyguard receiver TelephonyManager.EXTRA_STATE : OFFHOOK
11:43:48.099 D/PhoneUtils( 977): setAudioMode()...OFFHOOK
11:43:48.099 D/MyPhoneStateListener:main( 2590): catching call state CALL_STATE_OFFHOOK
11:43:48.099 D/MyPhoneStateListener:main( 2590): turning phone speaker on
...
11:43:48.119 D/PhoneUtils( 977): about to activate speaker
11:43:48.119 I/PhoneUtils( 977): Forcing speaker off when initiating a new outgoing call... 
```

如果有人面临同样的问题或有解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:34:50.767

我这周遇到了这个问题。。

阅读果冻豆代码源，我找到了这段代码

```
// This is not an error but might cause users' confusion. Add log just in case.
Log.i(LOG_TAG, "Forcing speaker off when initiating a new outgoing call...");    
PhoneUtils.turnOnSpeaker(app, false, true); 
```

就是这样，在 4.1 版中，android 在来电和去电中强制扬声器关闭。我的解决方案是在我的通话状态广播接收器中打开扬声器，然后开始拨打电话

# tidy - 如何防止 HTML Tidy 对 IDN 进行编码？

> ID：13859933
> 
> 赞同：3
> 
> 时间：2012-12-13T12:31:24.947
> 
> 标签：tidy, idn

我正在使用 HTML Tidy，并且使用了类似的东西

```
<a href="http://www.äöü.com/">Link</a> 
```

它使

```
<a href="http://www.%C3%A4%C3%B6%C3%BC.de/">Link</a> 
```

我如何告诉 Tidy 保持链接原样？

我的配置：

```
'output-xhtml' => true,
'numeric-entities' => true,
'hide-comments' => false,
'show-body-only' => true,
'doctype' => 'transitional',
'wrap' => 0,
'alt-text' => '',
'word-2000' => true,
'drop-proprietary-attributes' => true 
```

我也尝试禁用`fix-uri`并设置`char-encoding`为`utf8`，但无济于事。

我之所以要这样做是因为 Firefox 最近遇到了这种 URL 编码的问题。尝试在最新版本的 Firefox 中访问 www.v%C3%A4terwiderstand.de（我无法从中创建实际链接，因为 stackoverflow 似乎也无法处理带有变音符号的域），您将看到“找不到服务器”错误。不过，只需在 URL 栏中按 Enter 键即可正常打开网站。据我所知，这在其他浏览器中不会发生。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:01:55.923

我不确定你的 ENV 是什么样子的，但是这行得通；`fix-uri=no|0`这就是我所需要的。我添加了`char-encoding`良好措施的论点。Perl 的 tidy 包装了 tidy 库，因此这对于转换参数后的大多数/任何 tidy 使用应该是有效的。

```
#!/usr/bin/env perl
use strictures;
use utf8;
use open qw( :std :utf8 );
use HTML::Tidy;

print HTML::Tidy
    ->new({ "show-body-only" => 1,
            "char-encoding" => "utf8",
            "fix-uri" => 0, })
    ->clean(q{<a href="http://www.äöü.com/">Link</a>});

__END__
<a href="http://www.äöü.com/">Link</a> 
```

# c# - 如何从缓存的用户控件中访问值？

> ID：13859942
> 
> 赞同：2
> 
> 时间：2012-12-13T12:31:58.553
> 
> 标签：c#, asp.net, caching

有 2 个用户控件（**Test1.ascx**和**Test2.ascx**）。*Test1.ascx 包含 Test2.ascx。*

内部用户控件 ( **Test2.ascx** ) html 是：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Test2.ascx.cs"
Inherits="Test.UserControls.Test2" %>

<%@ OutputCache Duration="200" VaryByParam="None" %>
<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>
<telerik:RadTreeView runat="server" ID="radTreeView" >
<DataBindings>
    <telerik:RadTreeNodeBinding Depth="0" CssClass="rootNode" />
</DataBindings>
</telerik:RadTreeView> 
```

外部用户控件（**Test1.ascx**）html 是这样的：

```
<div runat="server" id="divTreeViewContainer">
        <uc:ucTreeView runat="server" ID="ucTreeView" />
    </div> 
```

当第一次请求页面时，两个用户控件都完美加载。Test2.ascx 中的树视图由 Test1.ascx 中的 FindControl() 访问为

```
 //Find the tree view from the Test2.ascx user control
  var radTreeView = ucTreeView.FindControl("radTreeView") as RadTreeView; 
```

从第二个页面请求开始（即在内部用户控件 Test2.ascx 被缓存之后） **ucTreeView**将作为**null**出现。

**要求：** Test2.ascx 用户控件需要被缓存，并且该用户控件的控件值将在Test1.ascx 用户控件中访问（缓存和非缓存状态）。怎么做？

提前非常感谢。

# wpf - 导航 xml 节点以显示在数据网格中的问题

> ID：13859943
> 
> 赞同：1
> 
> 时间：2012-12-13T12:32:00.393
> 
> 标签：wpf, xml, xaml, wpfdatagrid

我正在使用 WPF 和一个稍微不寻常的 xml 文件，我试图用它来填充数据网格。在根节点和重复的顺序节点之间，有四个节点是根的子节点，并且仅出现在顶部，我似乎无法导航到顺序节点。如果我删除这前四个节点，它会按预期填充。

这是不起作用的xml：

```
<evec_api method="quicklook" version="2.0">
<quicklook>
<item>40</item>
<itemname>Megacyte</itemname>
<regions/><hours>360</hours>
<minqty>10001</minqty>
<sell_orders>
<order id="2686762970">
<region>10000002</region>
<station>60003760</station>
<station_name>Jita IV - Moon 4 - Caldari Navy Assembly Plant</station_name>
<security>0.9</security>
<range>32767</range>
<price>2534.98</price>
<vol_remain>750000</vol_remain>
<min_volume>1</min_volume>
<expires>2013-03-13</expires>
<reported_time>12-13 10:54:11</reported_time>
</order>
<order id="2686763351">
<region>10000002</region>
<station>60003760</station>
<station_name>Jita IV - Moon 4 - Caldari Navy Assembly Plant</station_name>
<security>0.9</security>
<range>32767</range>
<price>2545.99</price>
<vol_remain>709273</vol_remain>
<min_volume>1</min_volume>
<expires>2013-03-13</expires>
<reported_time>12-13 10:54:11</reported_time>
</order>
</sell_orders>
</quicklook>
</evec_api> 
```

XAML（不适用于上述）：

```
<DataGrid x:Name="grid" ItemsSource="{Binding Path=Element
Element[item].Element[itemname].Element[regions].Element[minqty]
.Element[sell_orders].Elements[order]}"> 
```

这是 xml 减去前四个有效的节点：

```
<evec_api method="quicklook" version="2.0">
<quicklook>
<sell_orders>
<order id="2686762970">
<region>10000002</region>
<station>60003760</station>
<station_name>Jita IV - Moon 4 - Caldari Navy Assembly Plant</station_name>
<security>0.9</security>
<range>32767</range>
<price>2534.98</price>
<vol_remain>750000</vol_remain>
<min_volume>1</min_volume>
<expires>2013-03-13</expires>
<reported_time>12-13 10:54:11</reported_time>
</order>
<order id="2686763351">
<region>10000002</region>
<station>60003760</station>
<station_name>Jita IV - Moon 4 - Caldari Navy Assembly Plant</station_name>
<security>0.9</security>
<range>32767</range>
<price>2545.99</price>
<vol_remain>709273</vol_remain>
<min_volume>1</min_volume>
<expires>2013-03-13</expires>
<reported_time>12-13 10:54:11</reported_time>
</order>
</sell_orders>
</quicklook>
</evec_api> 
```

XAML（与上面的 xml 一起使用）：

```
<DataGrid x:Name="grid" ItemsSource="{Binding Path=Element
[quicklook].Element[sell_orders].Elements[order]}"> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:55:22.707

您不必浏览那些不需要的标签，因此您的最后一个绑定应该适用于两个 xml

祝你好运

# node.js - 如何通过maven执行DOS命令？

> ID：13859945
> 
> 赞同：0
> 
> 时间：2012-12-13T12:32:04.247
> 
> 标签：node.js, maven, build, dos, gruntjs

我得到了解决方案，`ant`但是如何通过 DOS 命令执行`maven`？我正在构建我的脚本`gruntjs`并运行它，我使用节点命令提示符，但我想通过 maven 执行该命令。任何的想法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:17:51.570

这可能是[Maven 的 Exec Plugin 的](http://mojohaus.org/exec-maven-plugin/)一个用例。

`exec:exec`在插件中试验目标。

```
<plugin>
  <artifactId>exec-maven-plugin</artifactId>
  <groupId>org.codehaus.mojo</groupId>
  <executions>
    <execution>
      <id>Script Run</id>
      <phase>generate-sources</phase>
      <goals>
        <goal>exec</goal>
      </goals>
      <configuration>
        <executable>${basedir}/<relativepathinyourproject>/yourscript.bat</executable>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

# linux-kernel - del_gendisk 在 IO 期间移除媒体后清理块设备期间发生故障

> ID：13859946
> 
> 赞同：1
> 
> 时间：2012-12-13T12:32:07.920
> 
> 标签：linux-kernel, linux-device-driver, device-driver, block-device

我有一个热插拔 PCI 存储设备的块驱动程序。如果在 IO 期间删除了设备，我似乎从来没有接到过释放（即`mydev_blk_release(struct gendisk *gd, fmode_t mode)`）的调用，我认为这会阻止`del_gendisk()`完成，从而挂起驱动程序的清理。一旦发生弹出，我将结束队列中的所有请求，但它似乎仍然不会导致释放。在媒体消失的情况下，终止请求和删除 gendisk 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:42:04.787

这是由于未结束因设备移除而中断的请求所致。在我的驱动程序中，我有以下内容`request_fn`：

```
static void mydev_submit_req(struct request_queue *q)
{
    struct mydev_info *mydev = q->queuedata;

    if (!mydev){
        struct request* req;

        while ((req = blk_fetch_request(q)) != NULL){
               req->cmd_flags |= REQ_QUIET;
               __blk_end_request_all(req, -ENODEV);
        }
    } else {
        queue_work(mydev->wq, &mydev->work);
    }
} 
```

这将防止在设备消失时请求进入驱动程序的工作队列（由 的丢失表示`mydev`）。然而，这个挂起是因为最后一个请求实际上并没有完成，导致`q->rq->elvpriv`（现在称为`q->nr_rqs_elvpriv`）保持在 1，这导致`blk_drain_queue()`永远旋转，这挂起`blk_cleanup_queue()`并阻止驱动程序能够移除设备。

解决方案如下所示（在我的驱动程序中的工作队列回调函数中，但这取决于您如何构建 IO 工作）：

```
req = blk_fetch_request(q);
while (req) {
    // returns -ENODEV if the disk is ejected during transfer
    //bytes tells us how many bytes we managed to do
    res = mydev_do_req(q, req, &bytes);

    if (unlikely(res == -ENODEV)) {
        dev_err(&mydev->pdev->dev, 
            "device ejected during transfer, returning\n");

        //end the current request, since we started it
        //THIS IS WHAT WAS MISSING
        __blk_end_request_all(req, -ENODEV);
        break;
        //get out - the rest of the  queue will be emptied on the next
        //submit_req
    } else if (!__blk_end_request(req, res, bytes)) {
        req = blk_fetch_request(q); //get the next request
    }
} 
```

# python - python 2.7.3 已经安装（但没有 pysqlite）。如何将它添加到我的 virtualenv？

> ID：13859954
> 
> 赞同：0
> 
> 时间：2012-12-13T12:32:47.907
> 
> 标签：python

我已经将 python 2.7.3 安装到一个目录中，并使用这个 python 创建了 virtualenvs。现在，当我尝试运行 ipython 时，它说它需要 sqlite 来保存历史记录。所以我尝试使用 pip install pysqlite 安装，但它返回错误。

src/module.c：在函数“init_sqlite”中：

src/module.c:426：警告：函数'sqlite3_libversion'的隐式声明</p>

src/module.c:426：警告：传递 'PyString_FromString' 的参数 1 使指针从整数而不进行强制转换

错误：命令“gcc”失败，退出状态为 1

# c++ - 如何在eclipse C/C++项目中使用sqlite3.c和sqlite3.h

> ID：13859956
> 
> 赞同：1
> 
> 时间：2012-12-13T12:32:54.270
> 
> 标签：c++, c, eclipse, sqlite, eclipse-cdt

我正在尝试在我的 C/C++ 项目中使用 sqlite3.c 和 sqlite3.h 的合并版本。它有 C 和 C++ 的代码。我在 UBUNTU 12.04 中使用 Eclipse IDE。

现在我的问题是，在我需要 sqlite3.c 函数的文件中包含 sqlite3.h 并在链接器中添加了 ld 和 pthread 库后，我仍然遇到错误并且无法构建项目。

这很奇怪，不应该发生。请查看以下解释我的问题的屏幕截图。

## ![项目快照](../Images/7f28197f610663658e5db899bfb82b07.png)

## ****************************************************** ************************************

## ![错误快照](../Images/6407b8a9a2e1c59357f2b1f329126f70.png)

## ****************************************************** ************************************

![包含库的快照](../Images/a5593d8f5858be45b605753a476686aa.png)

我错过了什么？

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:41:53.930

确保*pthread*库在*dl库**之前*链接。

 *换句话说，您的编译器命令（由 Eclipse 生成）应该是：

gcc shell.c sqlite3.c -lpthread -ldl

并不是

gcc shell.c sqlite3.c -ldl -lpthread

请参阅此处以获取正确的命令行：

[http://www.sqlite.org/howtocompile.html](http://www.sqlite.org/howtocompile.html)*

# asp.net-mvc - 如何访问 asp.net 会员数据库？

> ID：13859962
> 
> 赞同：0
> 
> 时间：2012-12-13T12:33:16.190
> 
> 标签：asp.net-mvc, asp.net-membership

> 我`m trying to access default membership database. Because i have added 3 more table. I`通过使用实体框架来做到这一点。但它不显示数据库名称。我想在我的项目中使用一个数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:44:46.347

Are you connecting to the ApplicationServices database in your project's App_Data folder?

Or did you create the ApplicationServices database on a genuine SQL Server instance?

In any event:

1.  This link can help: [http://www.misfitgeek.com/adding-asp-net-membership-to-your-own-database/](http://www.misfitgeek.com/adding-asp-net-membership-to-your-own-database/)
2.  As always, the connection string will definitively tell you where your database is located.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:51:46.223

我不确定我是否完全理解了这个问题......但是安装**SQL SERVER MANAGEMENT STUDIO**。微软连接、显示、编辑和更新数据库的**最佳**官方程序；-)

![在此处输入图像描述](../Images/e22312a450de355ba7c7510c022cf6dc.png)

你可以通过这个程序有一个更好的可见性安装基础。否则，您可以简单地使用前缀“USE [aspnet_nameTable] ...”手动查询控制台

样本：

```
USE [dbo].[aspnet_users]
CREATE DATABASE blablobli...... 
```

**或者您可以在 SQL MANAGEMENT STUDIO**中附加本地数据库****

 **![在此处输入图像描述](../Images/af7f342bd9139f05dcf4740766123140.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:37:30.533

第一次运行项目后，只需转到`App_Data`文件夹，您就可以看到数据库文件。 **请记住**在此之前执行以下操作：

![在此处输入图像描述](../Images/cc4dd90bac17772a970b5ca02e874257.png)

双击就可以访问了。。**

# php - 当产品视图块在 Magento 之外呈现时，无法将可配置产品添加到购物车

> ID：13859966
> 
> 赞同：3
> 
> 时间：2012-12-13T12:33:27.453
> 
> 标签：php, magento

我正在尝试在 Magento 之外显示部分“产品视图”页面。我能够正确显示所有内容并加载所有 Javascript —— 但是，每当我单击“添加到购物车”按钮时，都会收到一条消息，提示“请指定产品的选项”。

~~如我的评论中所述，如果我改变~~

 ~~```
$addtocartBlock->createBlock() 
```~~ 

至

```
$addtocartBlock->getBlockSingleton() 
```

~~整个顶部被添加到购物车块替换。~~见编辑。

有什么想法吗？

我感觉“**添加到购物车”按钮**无法正常工作，因为它没有明确连接到其他块，尽管我可能错了。

或者，以编程方式呈现这些块的一些通用指南也非常有用——虽然我相当擅长 PHP，但 Magento 只是失去了我，我经常只是[从 Magento 论坛剪切和粘贴随机片段](http://www.magentocommerce.com/boards/viewthread/298924/)。

谢谢！

* * *

## 编辑：

经过一番挖掘，还有几点：

1.  将 renderView() 调用移动到每个块下方（而不是将它们聚集在一起）修复了“添加到购物车替换主要信息块”问题。
2.  可以毫无问题地添加简单的产品。我遇到的唯一问题是让 Magento 识别为可配置产品提交的产品选项。

## MOAR EDITZ!!!!!!1111！

进一步根据这个不会死的问题，我发现@moldovan-gheorghe-daniel 关于“super_attribute”数组没有与 POST 的其余部分一起发送是正确的。此外，如果我使用 Firebug 将可配置的产品字段剪切并粘贴为提交`<form>`元素的子项，那么一切都运行良好。最后切入正题：

# tl;dr -- 我如何将可配置产品属性块加载为添加到购物车块的子项？

*哇！*

这是我的代码：

```
<?php
//Pretty standard loading Magento stuff.
$bootstrap = $_SERVER['DOCUMENT_ROOT'] . '/magento/app/Mage.php';
require_once $bootstrap;
session_name ( 'frontend' );
Mage::getSingleton ( 'core/session', array ('name' => 'frontend' ) );
$app = Mage::app('default');
$app->getTranslator()->init('frontend'); 
umask(0);
session_name('frontend');
Mage::getSingleton('customer/session'); //I'm not sure I need this.

$_product = Mage::getModel('catalog/product');

$_product->load($product_id);
Mage::unregister('product');
Mage::register('product', $_product);

//The following loads the main Mage_Catalog_Block_Product_View block.      
$linksBlock = $app->getLayout()->getBlockSingleton("catalog/product_view");
$linksBlock->setProduct($_product)->setTemplate('catalog/product/view.phtml');

//The following loads the configurable product attributes block.
$checkoutLinksBlock = $app->getLayout()
                          ->getBlockSingleton("catalog/product_view_type_configurable")
                          ->setTemplate('catalog/product/view/type/options/configurable.phtml');
$checkoutLinksBlock->setParentBlock($linksBlock);

/* The following loads the Add To Cart block. If I use getBlockSingleton() instead
 * of createBlock(), this replaces the entire top block. */

$addtocartBlock = $app->getLayout()
                      ->createBlock("catalog/product_view")
                      ->setTemplate('catalog/product/view/addtocart.phtml');
$addtocartBlock->setParentBlock($linksBlock);

$blocks['info'] = $linksBlock->renderView();
$blocks['addtocart'] = $addtocartBlock->renderview();
if ($_product->getTypeId() == 'configurable')
    $blocks['config'] = $checkoutLinksBlock->renderView();
else 
    $blocks['config'] = '';

Mage::unregister('product');

// ...And output everything here.
echo $blocks['info'] . $blocks['config'] . $blocks['addtocart']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:20:33.253

所有可配置的产品都需要使用特定选项添加到购物车中，对于简单的产品，您只需要数量和 id。这是将可配置产品添加到购物车时请求数组的外观。

```
Array(
    [uenc] => aHR0cdsfsdfdsfdssssssssssssss
    [product] => 4816
    [qty] => 2
    [related_product] =>
    [super_attribute] => Array(
            [352] => 1093
        )
) 
```

“super_attribute”包含用户选择的选项。所以我建议检查该数据是否在浏览器请求中。也许您在没有正确进行 js 验证的情况下发布数据，并且用户没有从可用的可配置选项中选择任何内容，或者根本没有呈现可配置选项下拉菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:25:23.020

也许您可以找到更适合您需求的方法，但这是我要做的：

**在 Magento 中创建一个自定义控制器**

Alan Storm 有一些很棒的 Magento 教程，看看[这个](http://alanstorm.com/magento_controller_hello_world)控制器。扩展默认产品控制器。这是您将在 Drupal 安装中访问的控制器（可能在 iframe 中调用？）。

**创建自定义布局**

[从这里](http://www.magentocommerce.com/design_guide)开始- 您将能够了解布局的工作原理。查看产品页面的呈现方式（检查布局 XML 文件以及 .phtml 模板）。我也会考虑将商品添加到购物车时会发生什么。

有了以上两个，您应该有一个具有工作功能的产品页面，并且能够自定义页面布局和样式以与您当前的站点一起使用。它本身并不是一座真正的桥梁。如果那是您所追求的，请查看 Magento 的 API。

如果您仍想使用现有解决方案，请查看 Magento 的布局文档。在产品视图页面的 .phtml 中，您将看到生成了哪些 HTML 以及您需要生成哪些 HTML 以模拟添加到购物车表单。

**编辑** 不知道为什么不加评论就投反对票（如果我的回答不符合您的喜好，请告诉我原因，我会改进它）。Magento 是一个框架，虽然公认的解决方案可能有效，但它不是“Magento”方式：未来的开发人员（包括自己）可能很难维护所提供的解决方案。在学习 Magento 的工作原理（和整合它）方面付出的额外努力是值得的——毕竟，你的客户付钱给你是为了解决他们的问题。

# iphone - Google+ 集成、身份验证和共享

> ID：13859970
> 
> 赞同：0
> 
> 时间：2012-12-13T12:33:33.103
> 
> 标签：iphone, ipad, google-plus

在我的应用程序中，我已将 Google+ 和所有东西（即身份验证、共享等）与应用程序完美集成，但问题是当我点击 google plus SignIn 按钮时，它会转到 Safari 进行身份验证，然后在 SingIn 后运行回到应用程序。

共享同样如此（它只是导航到 Safari 浏览器，共享内容后返回应用程序）。这个场景完美地工作。

我已经从下面的链接下载了代码。

[https://developers.google.com/+/mobile/ios/getting-started](https://developers.google.com/+/mobile/ios/getting-started)

但是，现在我想要这样的场景，用户应该能够像 facebook 和 Twitter 一样在 Google+ 上登录和分享。

我的新方案是可行的，因为它运行良好的 Flipboard iphone/iPad 应用程序。

我想要那样。

我花了很多时间搜索它，但我仍然没有得到答案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:09:48.647

Flipboard 与 Google+ 建立了合作伙伴关系：[http](http://news.cnet.com/8301-1023_3-57455826-93/flipboard-becomes-prominent-google-partner/) ://news.cnet.com/8301-1023_3-57455826-93/flipboard-becomes-prominent-google-partner/因此您目前无法复制它们的功能。

# android - 如何获取在 addtextchangedlistener 中单击的列表视图行位置

> ID：13859973
> 
> 赞同：1
> 
> 时间：2012-12-13T12:33:34.927
> 
> 标签：android, android-listview

我正在编写一个包含 listview 的程序。 `listview`有一个文本 boz 和一个`edittext`. 我想知道在里面点击的位置`addTextChangedListener`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:59:54.813

您可以像下面这样抓住位置，

我之所以使用，是`onFocus`因为如果您使用`addTextChangedListener`，它将为每次输入分配值。

把位置`edittext`标记，然后你可以得到它`getTag()`。

```
edittext.setId(position); 
final int sPosition; 
edittext.setOnFocusChangeListener(new OnFocusChangeListener() {
    public void onFocusChange(View v, boolean hasFocus) { 
        sPosition = v.getId();
    }
}); 
edittext.addTextChangedListener(new TextWatcher() { 
    @Override 
    public void onTextChanged(CharSequence s, int start,int before, int count) {
        //
    } 

    @Override public void beforeTextChanged(CharSequence s, int start,int count, int after) {
        //
    } 

    @Override public void afterTextChanged(Editable s) { 
        // sPosition
    }
}); 
```

# sql - 这个数据库修改怎么做？（外键与否）

> ID：13859978
> 
> 赞同：0
> 
> 时间：2012-12-13T12:33:47.327
> 
> 标签：sql, sql-server

我们有一个数据库，我们记录了一些产品在生产过程中的测试结果（记录日期时间、产品序列号和测试结果）。

包装产品时，我们每个盒子里有不止一件产品，现在我们想记录什么产品放在什么盒子里。

将添加一个 Box 表，其中包含 ID 和我们需要的任何其他列。一个 BoxID 列将添加到 Product 表中。那么我们有2个选择：

1) 使 BoxID 成为链接到 Box 表中 ID 列的外键。这有点难看，因为我们必须创建一个特殊的盒子（ID 为 0 或其他），它将包含所有现有产品，因为我们没有它们的信息，但需要一些 BoxID，因为它是外键。

2) 使 BoxID 可以为空并且不要使其成为外键。现有产品的 BoxID 将为 NULL，这是正确的，因为我们没有信息，但它有点难看，因为它没有强制新产品的参照完整性。

我们应该选择哪种解决方案？还是我们应该做点别的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:40:09.910

我将有一个名为 Product_Box 的第三个（联结）表，它有一个 BoxId（FK 到 Box）和一个 ProductId（FK 到 Product）。

这意味着您的 Box 和 Product 表可以保存有关尚未在 Boxes 中的 Products 的信息，以及还没有任何 Products 的 Boxes 的信息。

将产品分配给 Box 时，您只需在新表中添加一个条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:16:16.397

使用产品表并添加列（BoxID）`Nullable`和包含 BoxID 或不能有 boxID 的产品

# c++ - QString 到 windows BYTE

> ID：13859982
> 
> 赞同：0
> 
> 时间：2012-12-13T12:33:56.893
> 
> 标签：c++, qt, byte, typedef

我有一个 BYTE 类型，它在 windows.h 标头中定义如下：

```
 typedef unsigned char BYTE; 
```

然后我在数据库中有一些字段，我将其作为 QString 并将它们转换为 QByteArray。

目前我有：

```
 QString str = "0x168de78"; //some info from the database

        QByteArray tempB = QByteArray::fromHex(str.toAscii().toHex());

        BYTE *sequence = (BYTE*)strdup(tempB.data()); 
```

在这种情况下，“0x168de78”代表我期望从数据库中获取的信息样本。

我需要将 QString 从字面上转换为 BYTE，以便以后可以使用它。

如果我告诉应用程序给我 sequence 和 tempB.data() 的值，我会得到类似的东西：

```
0x867dc8 "0x168de78" 
0x867de0 "0x168de78" 
0x867df8 "0x168de78" 
```

所以 tempB.data() 没问题，但序列不是。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:45:59.210

```
QString str = "0x168de78"; //some info from the database

QByteArray tempB =  QByteArray::fromHex(str.toAscii());//or 
//QByteArray tempB =  str.toAscii().toHex();

BYTE *sequence = (BYTE*)strdup(tempB.data()); 
```

Update: If u can use STL

```
unsigned int value;   
std::stringstream ss;
ss << std::hex << "0x168de78";
ss >> x; 
```

# unit-testing - 在单元测试中隐藏调用堆栈

> ID：13859984
> 
> 赞同：2
> 
> 时间：2012-12-13T12:34:03.757
> 
> 标签：unit-testing, dart

考虑以下代码：

```
 group('Tweets: ', () {
    test('Create tweets', () {
      var tweets = new Tweets();
      expect(tweets, isNull);  // intentionally wrong!    
    });

    test('Add', () {
      var tweets = new Tweets();
      expect(tweets, isNotNull);      
    });

  }); 
```

给出以下 ok 结果：

```
dart --enable-checked-mode TwitterSearchTest.dart

unittest-suite-wait-for-done
FAIL: Tweets:  Create tweets
  Expected: null
       but: was <Instance of 'Tweets'>.

  #0      DefaultFailureHandler.fail (package:unittest/src/expect.dart:86:5)
  #1      DefaultFailureHandler.failMatch (package:unittest/src/expect.dart:90:9)
  #2      expect (package:unittest/src/expect.dart:55:29)
  #3      main.<anonymous closure>.<anonymous closure> (file:///C:/Users/John/tmp/Dart/TwitterSearchTest/TwitterSearchTest.dart:8:13)
  #4      TestCase.run (package:unittest/src/test_case.dart:83:11)
  #5      _nextBatch._nextBatch.<anonymous closure> (package:unittest/unittest.dart:807:19)
  #6      guardAsync (package:unittest/unittest.dart:766:19)

PASS: Tweets:  Add

1 PASSED, 1 FAILED, 0 ERRORS
Unhandled exception:
Exception: Some tests failed.
#0      Configuration.onDone (package:unittest/src/config.dart:130:7)
#1      _completeTests (package:unittest/unittest.dart:835:17)
#2      _nextBatch._nextBatch (package:unittest/unittest.dart:818:17)
#3      runTests.runTests.<anonymous closure> (package:unittest/unittest.dart:755:16)
#4      _defer.<anonymous closure> (package:unittest/unittest.dart:712:13)
#5      _ReceivePortImpl._handleMessage (dart:isolate-patch:37:92) 
```

我的问题：

*   如何摆脱结果中的调用堆栈？
*   我假设最后一个未处理的异常仍然是 unittester 中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:38:53.770

我在我的一个项目中做了类似的事情。首先你需要创建一个新的[Unittest 配置类](http://api.dartlang.org/docs/bleeding_edge/unittest/Configuration.html)，然后你可以覆盖默认`onDone`方法。然后，您需要在第一次测试之前将其作为单元测试的配置传递。

一个小例子：

```
import 'package:unittest/unittest.dart' as ut;

class MyConfig extends ut.Configuration {

  MyConfig();

  void onDone(int passed, int failed, int errors, List<ut.TestCase> results,
          String uncaughtError) {
    // Only look at first failure:
    if(failed > 0) {
      var fail;
      for(var test in results) {
        if(test.result == 'fail' || test.result == 'error') {
          fail = test;
          break;
        }
      }

      print('Failed at: ${fail.description}');
      print(fail.message);
    }
  }
}

void main() {
  var unitConf = new MyConfig();
  ut.configure(unitConf);

  // Tests here ...
} 
```

另外，如果您很好奇，尽管与答案不完全相关，您可以[在此处](https://github.com/butlermatt/dart_koans)查看我的项目，在该项目中我高度自定义了 unittest 配置，以便为 dart 创建一个迷你教程（目前尚未完成，但有关覆盖的代码unittests 是功能性的）。有问题的类在 lib/src/config_koans.dart

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T13:50:39.997

尝试..

```
import 'package:unittest/unittest.dart';

main() {
  SimpleConfiguration config = new SimpleConfiguration();
  config.throwOnTestFailures = false;
  config.stopTestOnExpectFailure = false;
  unittestConfiguration = config;

  test(.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T17:12:41.803

也许测试库从那以后发生了变化？我建议这个

```
 // Use by having this line unittestConfiguration = new FilterTests(); ensureInitialized();
    class FilterTests extends Configuration {
      // Means you can use filterTests('some test filter'); runTests();
      get autoStart => false;

      // Tidies up output a bit 
      void onDone(bool success) { 
        try {
          super.onDone(success);
        }
        catch (e) {
          print (e);
        }
      }
    }

    void main() {
    // ... 
    unittestConfiguration = new FilterTests();
      ensureInitialized();
    // ...
    // Option: filterTests('my filter here');
    runTests();
    } 
```

# android - Android 主详细指南

> ID：13859986
> 
> 赞同：0
> 
> 时间：2012-12-13T12:34:10.373
> 
> 标签：android, android-layout

android上的“master”部分应该有多宽？在示例中，他们通常创建重量 = 1 的主部分和重量 = 2 的高度，因此主部分是高度的 1/3。它对现实世界的应用程序有好处吗？

而且，通常主细节布局在纵向上的表现如何，在示例部分中变得狭窄。这也很好吗，还是我应该像在 iPad 上一样隐藏母版部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:33:06.600

Android UI 指南为主从布局提供了多种 UI 模式，没有一种通用的解决方案。

# java - 使用 JAX-RS 通过 formParam 将 JSON 发布到 RESTful 会导致“不支持的媒体类型”

> ID：13859988
> 
> 赞同：2
> 
> 时间：2012-12-13T12:34:13.860
> 
> 标签：java, json, rest

**我通过文本区域中的 HTML 页面将 JSON 对象发布到 RESTful 服务，即在 RESTful POST 服务中使用 FormParam。我对 POJO 类 "@XmlRoolElement" 使用了所有必需的注释，并将 @Consumes 和 @Produces 值作为 "APPLICATION_JSON"**

webservice 将 @FormParam 中的参数作为 String 数据类型并返回 String

带有 @XmlRootElement 注释的 Singer 的其他 POJO 类

HTML页面包含一个名为“song”的表单文本区域和一个提交按钮和方法为=“post”

和 web.xml 作为

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:13:36.347

当您通过在浏览器中打开的 HTML 文件/页面执行 HTTP POST 时，内容类型是 url 编码的。所以@Consumes 注释应该是这样的：

```
import javax.ws.rs.Consumes;
import javax.ws.rs.FormParam;
import javax.ws.rs.POST;
import javax.ws.rs.core.MediaType;
import org.codehaus.jettison.json.JSONObject;
.
.
.
    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)
    public String postData(@FormParam("textAreaName") JSONObject jsono){
.
. 
```

# php - Symfony 2.1 @Template 注解抛出 500 Internal Server Error

> ID：13859991
> 
> 赞同：2
> 
> 时间：2012-12-13T12:34:26.807
> 
> 标签：php, templates, annotations, symfony-2.1

我正在使用 PHP 5.4.7 的最新版本 Symfony 2.1.4 开发一个新项目。

我浏览了自述文件，通过了`app/check.php`配置，Acme Demo 运行良好，每个页面都经过测试。

然后，我添加了我自己的包，编辑了`app/AppKernl.php`，然后`app/routing.yml`它从我的包中加载了我自己的包，并在`routing.yml`我的包中测试了`indexAction()``SetupController`

```
return $this->render('MyBundle:Setup:index.html.twig'); 
```

该页面按预期显示。

然后我改成使用注解，于是Controller文件就变成了

```
// ...
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

// ...

class SetupController extends Controller
{
    /**
     * @Route("/", name="_setup")
     * @Template
     */
    public function indexAction(){
        // This method is totally empty.

        // Uncommenting the following line actually works, but I want to stick with
        // annotations if possible

        // return $this->render('MyBundle:Setup:index.html.twig');
    }
} 
```

并且路由文件变成了

```
_setup:
    resource: "@MyBundle/Controller/SetupController.php"
    type:     annotation 
```

现在页面抛出 500 Internal Server Error (LogicException)，并带有以下消息：

```
The controller must return a response (null given). Did you forget to add a return statement somewhere in your controller? 
```

我尝试将`$this->render('...')`行添加到`indexAction()`页面呈现，但没有它只是这个 500 错误。

Acme Demo 仍然运行良好。我尝试使用`@Template('MyBundle:Setup:index.html.twig')`and`@Template()`而不是`@Template`，仍然出现相同的错误。模板文件放置在正确的位置，因为该`$this->render()`方法发现它没有问题。

我检查并确保我没有关闭任何配置文件中的注释。我还尝试清除缓存，包括开发和生产缓存，但仍然没有运气。

我可以将`$this->render()`其用作解决方法，但我想知道 Symfony 不允许我使用它的注释有什么问题。

提前感谢您的任何帮助或建议！如果有任何其他信息可以提供帮助，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:50:21.063

使用`@Template`注释时，您需要返回一个`array()`将传递给模板的变量。

如果你没有变量，而不仅仅是`return array()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:56:17.207

你应该总是返回一个-实际做的`Response`事情。`$this - render( someTemplate )`如果您不想退货：

```
return new Response; 
```

symfony 会很高兴。

[为了您的知识`Response`，放在`Symfony\Component\HttpFoundation`包装中。]

# siteminder - 如何在 SiteMinder 中启用对部分网站的匿名访问

> ID：13859993
> 
> 赞同：2
> 
> 时间：2012-12-13T12:34:31.603
> 
> 标签：siteminder

我们正在为我们的网站使用 SiteMinder 安全代理。问题是我们网站的某些部分需要匿名身份验证。例如 ClickOnce 安装程序和一些 WCF 服务。我正在调查`proxyrules.xml`，希望我能做一些事情`nete:case`，但似乎并非如此。如果有人能指出我正确的方向，我将不胜感激。

这又是我需要的：

*   / - sso
*   /test/ - sso
*   /wcf/ - 匿名

我该如何`/wcf`排除？

** 更新 ** 我找到`IgnoreUrl`了我的 WebAgent 的参数，但由于某种原因它没有被应用，我仍然被要求输入用户名和密码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:51:23.423

这确实是`IgnoreUrl`我必须设置的参数。当我在 WebAgent 配置本身中设置它时它不起作用，但是当我通过`SiteMinder Administrative UI`.

**更新：**这个原因很可能是代理配置对象不允许通过`AllowLocalConfig`指令进行这种本地配置。

# google-drive-api - Google Drive API Java 权限 500 内部错误

> ID：13859999
> 
> 赞同：4
> 
> 时间：2012-12-13T12:34:55.630
> 
> 标签：google-drive-api, google-drive-realtime-api

我有下一个分享 Google Drive 文件的方法：

```
public static boolean shareFile(HttpServletRequest httpReq, String fileId, String user, String rol, boolean commenter) {        
    Drive service = getService(httpReq) ;

    if (service != null){   
        Permission newPermission = new Permission();

        newPermission.setValue(user);
        newPermission.setType("user");
        newPermission.setRole(rol);

        if (commenter)
            newPermission.setAdditionalRoles(Arrays.asList("commenter"));

        try {      
            service.permissions().insert(fileId,  newPermission).execute();
            return true;

        } catch (Exception e) {      
            System.out.println("An error occured: " + e);   
        }
    }
    return false;

} 
```

当变量 commenter 为 false 时一切正常（我们不设置其他角色），但如果我希望用户具有角色“reader”和“commenter”，我会收到下一个错误：

```
    发生错误：com.google.api.client.googleapis.json.GoogleJsonResponseException: 500 Internal Server Error
    {
        “代码”：500，
        “错误”：[{
            “域”：“全球”，
            “消息”：“内部错误”，
            “原因”：“内部错误”
        }],
        “消息”：“内部错误”
    }

```

有没有人遇到过这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T13:13:37.107

**如果传递的id**字段不正确，我会收到这种错误。奇怪的错误代码，我认为像 4XX 这样的东西更适合这里（不是 500）。

100% 可重现。

要求：

```
POST https://www.googleapis.com/drive/v2/files/0B28tlN6SgYRaNVRFRENpRFN3bGs/permissions?key={YOUR_API_KEY}

{
 "role": "reader",
 "type": "user",
 "id": "16887416236869940585"
} 
```

回复：

```
500 Internal Server Error

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "internalError",
    "message": "Internal Error"
   }
  ],
  "code": 500,
  "message": "Internal Error"
 }
} 
```

希望 Google Drive API 错误消息能提供更多信息（500 Internal Server Error）。