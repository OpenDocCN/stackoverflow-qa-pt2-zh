# StackOverflow 问答 12737000-12737999

# file-upload - 我无法使用 jsf2 在想要的目录中找到上传的文件

> ID：12737002
> 
> 赞同：1
> 
> 时间：2012-10-04T22:31:30.877
> 
> 标签：file-upload, jsf-2, primefaces, netbeans-7

> **可能重复：**
> [上传的图片仅在刷新页面后可用](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page)

我正在使用 primefaces 将文件上传到我的应用程序并且它正在工作，但我遇到了路径问题。

我正在使用 netbeans IDE。

我将上传的文件存储在： (Project\web\WEB-INF\photo) 下，如下代码所示：

```
 public void FileUpload(FileUploadEvent event) throws IOException {
    UploadedFile upfile = event.getFile();
    InputStream in = new BufferedInputStream(upfile.getInputstream());
    ExternalContext extContext =
                          FacesContext.getCurrentInstance().getExternalContext();
    File file = new File(extContext.getRealPath
                     ("//WEB-INF//photo//" + event.getFile().getFileName()));

    FileOutputStream fout = new FileOutputStream(file);
    byte[] bytes = new byte[1024];
    while (in.available() != 0) {
        fout.write(in.read());
    }
    fout.write(bytes);
    fout.close(); .......
} 
```

并且此方法可以正常工作，但上传的文件在所需目录（Project\web\WEB-INF\photo）中不存在，但它位于构建文件夹（Project\build\web\WEB-INF\photo）下，所以然后当我想显示照片时，错误提示该照片在目录中不存在，

所以有什么想法吗？为什么文件存储在构建下而不是在想要的目录中？

# oracle - 违反唯一约束时 Oracle 序列值递增

> ID：12737005
> 
> 赞同：1
> 
> 时间：2012-10-04T22:31:51.290
> 
> 标签：oracle, sequence, unique-constraint

我创建了一个 Oracle 序列和触发器，以在插入新记录时自动增加表上的主键列。这是我的代码：

```
CREATE TABLE MOBILE_APP
(
  "MOBILE_APP_ID" NUMBER(9, 0) PRIMARY KEY,
  "NAME" VARCHAR2(60) NOT NULL,
  "DESCRIPTION" VARCHAR2(200),
  CONSTRAINT name_unique UNIQUE (name)
);

CREATE SEQUENCE MOBILE_APP_ID_SEQ
MINVALUE 1
MAXVALUE 999999999
INCREMENT BY 1
START WITH 1
NOCACHE
ORDER
NOCYCLE;

CREATE TRIGGER MOBILE_APP_BR_I
BEFORE INSERT ON MOBILE_APP
FOR EACH ROW
BEGIN
  SELECT MOBILE_APP_ID_SEQ.NEXTVAL INTO :NEW.MOBILE_APP_ID FROM dual;
END; 
```

由于我的触发器是“插入之前”，它将在记录实际插入表之前执行。但我没想到我的触发器即使在插入期间违反唯一约束的情况下也会执行。假设表、序列和触发器都是新的，我尝试执行以下语句两次。

```
INSERT INTO MOBILE_APP (name, description) VALUES ('Name', 'Desc'); 
```

第一次执行将成功完成，在插入记录的“mobile_app_id”字段中自动填充值 1。正如预期的那样，第二次执行将因与“名称”字段相关的唯一约束违规而出错。但是，如果我在不违反唯一约束的情况下插入另一条记录，则值 3 会自动填充到插入记录的“mobile_app_id”字段中——这意味着在尝试插入期间由于违反唯一约束而失败，值序列仍然从 1 增加到 2。如何防止这种情况发生？我发现了这个[其他帖子](https://stackoverflow.com/questions/2530339/primary-key-identity-value-increments-on-unique-key-constraint-violation)，但不幸的是它没有解决问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T23:56:20.173

这是序列的正常行为。不能保证您有一个无间隙的序列。因为多个事务可能都在运行，一些被提交，一些被回滚，我什至不知道你怎么能有一个序列，给你一个无缝的序列，就像你想要的那样。

如果您确实需要这样的无间隙序列，则必须确保它在同一事务中递增：

```
CREATE TABLE my_id ( col1 NUMBER );
INSERT INTO my_id ( col1 ) VALUES ( 0 ); 
```

然后执行您的交易：

```
DECLARE
    id NUMBER;
BEGIN
  UPDATE my_id SET col1 = col1 + 1
  RETURNING col1 INTO id;

  INSERT INTO mobile_app ... whatever ...

  COMMIT;
END; 
```

这样做的最大问题是 id 表成为瓶颈。您不能同时从不同的会话插入 mobile_app 表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:28:01.243

我非常感谢提供的所有评论和答案！根据提供的信息，我认为最好的方法是保持原样，并期望序列可能不会保持无缝。以任何其他方式进行似乎有太多潜在的缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:53:34.587

1.  您可以在插入语句中插入序列号。

    INSERT INTO MOBILE_APP (MOBILE_APP_ID,name, description) VALUES (MOBILE_APP_ID_SEQ.NEXTVAL ,'Name', 'Desc');

2.  如果您使用另一个应用程序执行此插入，请先获取 id，然后传递到插入语句和其他过程。

    ```
     --Create Id.
       CREATE OR REPLACE PROCEDURE MOBILE_APP_ID
       (MOBILE_APP_ID OUT SYS_REFCURSOR )
       IS
          BEGIN
              open MOBILE_APP_ID for 
           SELECT MOBILE_APP_ID_SEQ.NEXTVAL MOBILE_APP_ID
           FROM dual;

       END ;

      --Then get the id.
      int id = MOBILE_APP_ID.MOBILE_APP_ID;

     --Then insert the id.
     INSERT INTO MOBILE_APP (MOBILE_APP_ID,name, description) VALUES (id  ,'Name', 'Desc'); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:29:10.340

如前所述，序列是序列，如果您需要无间隙序列，则不适合。首先想到的是你确定你应该需要一个无间隙序列吗？如果是这样，建议的解决方案都不是 100% 安全的间隙。如果另一个会话在第一个会话提交其更改之前获得 id，两者都会出现问题。然后第二个会话将具有与第一个会话相同的 id，这当然会导致问题。这样做的风险不应该那么大，但是如果您有许多活动会话，它仍然特别存在。

获得完全无间隙的序列并不容易。一种方法可能是例如使用建议的表解决方案之类的方法，然后捕获任何重复的键错误，然后重试您将其插入。不好也不高效，但它应该可以完成任务。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-05T08:52:43.180

我认为你不需要在这里做任何序列或除下面的代码之外的任何其他东西

```
CREATE OR REPLACE TRIGGER AUTO_APPID
BEFORE INSERT
ON MOBILE_APP
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
DECLARE
begin

SELECT NVL(MAX(MOBILE_APP_ID),0)+1 INTO :NEW.MOBILE_APP_ID FROM MOBILE_APP;

END ; 
```

# python - Google App Engine - 使用 Python 2.7 获取会话

> ID：12737008
> 
> 赞同：11
> 
> 时间：2012-10-04T22:32:14.923
> 
> 标签：python, google-app-engine, python-2.7, session-variables

首先，我是 GAE 的新手，所以我可能以错误的方式执行此操作 - 但我之前使用过 PHP，而 session 是我保存持久数据的方式。我正在使用 Python 2.7，因为这是我在所有其他 Python 开发中使用的 - 尽管我开始怀疑降级到 2.5 是否可能是一个有效的解决方案，如果不是一个理想的解决方案。

场景是我正在构建一个概念验证站点，并且我需要一个“虚拟”登录按钮，该按钮只需设置一个名为**'user'**的会话变量，其值为**'admin'**。然后我想检查导航模板以查看是否设置了变量，如果是，我将添加一些额外的菜单命令。很简单。 *（注意：我知道这不安全、不明智或不应该做任何事情 - 问题是会话不起作用，而不是我正在用它做什么 - 我正在使用代码中做其他几件事会话 - 部署时它们都不起作用）*

似乎有几个不同的 GAE 与 Python 会话库，我尝试了谷歌搜索中最广泛推荐的一个 - [gaeutilities](http://gaeutilities.appspot.com/)，但这会导致错误并且不起作用（我最终偶然发现了[这篇文章](https://stackoverflow.com/questions/2652820/error-on-windows-using-session-from-appengine-utilities)来解释它只是与 Python 2.7 不兼容）。多一点搜索让我从 appenginelearn.com 找到了[这个](http://www-personal.umich.edu/~csev/books/gae/files/util.zip)库，我把它放进去，它工作得很好……直到我部署了它——然后它什么也没做。我想要一些关于为什么这可能会失败的指示或建议。这是我正在使用的相关代码：

我将 appenginelearn.com 中的 util 库目录放在应用程序目录的根目录下，然后导入 Session：

```
from util.sessions import Session 
```

然后我添加了 Login 和 Logout 类：

```
class LogIn(webapp2.RequestHandler):
    def get(self):
        self.session = Session()
        self.session['user'] = 'admin'
        # Return the user to the page they logged in from
        referer = self.request.environ['HTTP_REFERER'] \
                if 'HTTP_REFERER' in self.request.environ \
                else '/'
        self.redirect(referer)

class LogOut(webapp2.RequestHandler):
    def get(self):
        self.session = Session()
        self.session.delete_item('user')
        self.redirect('/') 
```

以及主类中的以下（糟糕的）代码（这将在演示中的所有页面上完成）

```
class MainPage(webapp2.RequestHandler):
    def get(self):
        self.session = Session()
        logging.info('Main page fired up')
        if 'user' in self.session:
            user = self.session['user']
        else:
            user = None

        template_values = {
            'user': user
            }
        template = jinja_environment.get_template('main.html')
        self.response.out.write(template.render(template_values)) 
```

然后在 HTML 模板文件中

```
 {% if user %}
      <p>Welcome, {{user}}</p>
  {% endif %} 
```

以及日志中的错误：

```
2012-10-04 02:51:28.084 /login 302 143ms 0kb Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4
*ip address removed* - - [04/Oct/2012:02:51:28 -0700] "GET /login HTTP/1.1" 302 136 "*site-removed*" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4" "*site-removed*" ms=144 cpu_ms=0 cpm_usd=0.000015 instance=*instance removed*
**I** 2012-10-04 02:51:28.080
Creating session session-*session number removed*
**E** 2012-10-04 02:51:28.084
Set-Cookie: appengine-simple-session-sid=*session number removed*; Path=/ 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T22:40:45.987

你见过 webapp2 会话吗？这一切都是内置的，您可以立即开始使用。

[https://webapp2.readthedocs.io/en/latest/api/webapp2_extras/sessions.html](https://webapp2.readthedocs.io/en/latest/api/webapp2_extras/sessions.html)

> 该模块为 webapp2 提供了轻量级但灵活的会话支持。它具有三个内置后端：安全 cookie、memcache 和数据存储。可以添加扩展 CustomBackendSessionFactory 的新后端。会话存储可以通过 SessionStore.get_session() 方法使用不同的密钥提供多个会话，甚至在同一个请求中使用不同的后端。默认情况下，它使用配置中的默认键返回会话。

```
import webapp2

from webapp2_extras import sessions

class BaseHandler(webapp2.RequestHandler):
    def dispatch(self):
        # Get a session store for this request.
        self.session_store = sessions.get_store(request=self.request)

        try:
            # Dispatch the request.
            webapp2.RequestHandler.dispatch(self)
        finally:
            # Save all sessions.
            self.session_store.save_sessions(self.response)

    @webapp2.cached_property
    def session(self):
        # Returns a session using the default cookie key.
        return self.session_store.get_session()

# To set a value:
self.session['foo'] = 'bar'

# To get a value:
foo = self.session.get('foo') 
```

那么围绕这个构建一个登录系统真的很容易，看起来你已经做到了。您可以根据喜好将数据存储和/或内存缓存与 webapp2 会话一起使用。

# asp.net-mvc - 使用 getobject() 抛出 MissingManifestResourceException

> ID：12737011
> 
> 赞同：1
> 
> 时间：2012-10-04T22:32:28.410
> 
> 标签：asp.net-mvc, localization, resources, resourcemanager

我使用 Resources 在我的 MVC 应用程序中存储不同的字符串以进行本地化。我正在使用 HttpHandler 来处理 JavaScript 并将`Translate(KEY)`调用更改为资源中的实际本地化字符串值。这是在这里：[在 ASP.NET 中本地化 JavaScript 文件中的文本](http://madskristensen.net/post/Localize-text-in-JavaScript-files-in-ASPNET.aspx)

问题是当我从我的资源管理器中调用 getObject 方法时，我得到了`MissingManifestResourceException Could not find any resources appropriate for the specified culture or the neutral culture.`

这是相关的代码部分（错误来自下面代码段中的第 6 行）：

```
private string TranslateScript(string text)
{
    MatchCollection matches = REGEX.Matches(text);
    ResourceManager manager = new ResourceManager(typeof(CamelotShiftManagement.Strings.SharedStrings));

    foreach (Match match in matches)
    {
        object obj = manager.GetObject(match.Groups[1].Value, CultureInfo.CurrentCulture); //This throws the MissingManifestResourceException for some reson!!!!
        if (obj != null)
        {
            text = text.Replace(match.Value, CleanText(obj.ToString()));
        }
    }

    return text;
} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:12:44.243

好的，我发现了问题，但我无法解释为什么会这样。（然而）

我在 Asp.Net MVC 中发现了 ResourceManager 和中性文化的这篇帖子[问题，](http://stevescodingblog.co.uk/problems-with-resourcemanager-and-neutral-culture-in-asp-net-mvc/) 并按照他所做的步骤进行操作。我已经改行了：

```
ResourceManager manager = new ResourceManager(typeof(CamelotShiftManagement.Strings.SharedStrings)); 
```

至：

```
ResourceManager manager = CamelotShiftManagement.Strings.SharedStrings.ResourceManager; 
```

基本上，您似乎每个资源文件都有对处理该资源文件的 ResourceManager 的静态引用。

这解决了我的问题。话虽如此，我仍然不确定为什么我之前使用的方法不起作用......

# perl - perl Net::FTP LS 和子目录

> ID：12737012
> 
> 赞同：0
> 
> 时间：2012-10-04T22:32:31.193
> 
> 标签：perl, ftp

LS 命令没有给出我在 Net::FTP 中的期望。我希望它返回一个字符串数组（文件名），但我得到一个数组，其中包含一个字符串数组。

```
use strict;
use Net::FTP::Common;

my ($host, $user, $pw) = ('<ftp site>', 'user', 'pw');
my $ftp = new Net::FTP($host) || die;
$ftp->login($user, $pw) || die;

my $pwd = $ftp->pwd();
my $subDir = 'subdir/';
my $pattern = '*.txt';
$ftp->cwd($subDir); 

$ftp->pasv(); # passive mode
my @files = $ftp->ls($pattern) || die;

$ftp->cwd($pwd); 
```

文件数组如下所示，例如：

@files[@array[0]] = '文件名.txt';

我也试过不改变目录，只是做`$ftp->ls('subdir/*.txt');`同样的结果。

为什么要这样做？我误解了返回值？这是在 WINDOWS 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:43:31.003

首先，您应该使用

```
use Net::FTP; 
```

代替

```
use Net::FTP::Common; 
```

因为您使用 Net::FTP 而不是 Net::FTP::Common。

现在谈谈你的问题。

* * *

文档说：

> 在数组上下文中，返回从服务器返回的行列表。在标量上下文中，返回对列表的引用。

这肯定意味着

> 在列表上下文中，返回服务器返回的行列表。在标量上下文中，返回对这些行数组的引用。

您在标量上下文中调用它。你要

```
my $files = $ftp->ls($pattern)
   or die;  # || would work, just not idiomatic.

for my $file (@$files) {
   ...
} 
```

你可以`ls`在列表上下文中调用，然后你会牺牲错误检查。

```
# No way to determine whether empty means error or no files.
my @files = $ftp->ls($pattern);

for my $file (@files) {
   ...
} 
```

# css - CSS 多列对齐

> ID：12737015
> 
> 赞同：0
> 
> 时间：2012-10-04T22:32:34.760
> 
> 标签：css, alignment, positioning, styling

[http://jsfiddle.net/auyUS/8/](http://jsfiddle.net/auyUS/8/)

我遇到的唯一问题是 css 定位和对齐。我认为使用列表（ul，li）而不是段落来显示承包商进出时会更容易。

我希望打孔按钮、文本框和打孔按钮保持在页面底部的 0px 和宽度填充页面（当然通过文本框），无论分辨率如何。

任何帮助将不胜感激。

谢谢并保重。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:35:44.057

使您的**#container div**声明如下：

```
#container div {
    float:left;
    width:33%;
} 
```

将 display:inline 替换为 float:left 并稍微支持宽度。

小提琴：http: [//jsfiddle.net/kboucher/GpJKc/](http://jsfiddle.net/kboucher/GpJKc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:36:54.943

如果我正确理解您的问题，请尝试将您`#container div`的 css 更改为：

```
#container div {
float:left;
width:30%;} 
```

# windows - Jenkins Windows Master 连接到 Slave Mac OSX

> ID：12737021
> 
> 赞同：2
> 
> 时间：2012-10-04T22:33:18.260
> 
> 标签：windows, macos, ssh, jenkins, hudson

我在我的 Windows7 PC 和 Mac mini 上都设置了 Jenkins，以构建各种平台（黑莓、Android 和 iOS 项目）

我遇到的问题是 Win7 Master jenkins 似乎无法连接到 mac 从站。我已经尝试在防火墙上打开端口 22，所以不要认为是这个（尽管不是 100% 确定），并且阅读了所有关于设置 SSH 公钥的教程，但它们都指的是 mac 和 linux 而不是比Win7，因为据我了解，这似乎不是一种有效的方法。

有没有人这样做和/或得到任何关于为什么 Win7 似乎看不到 mac 的指示？（如果这有助于确保他们在同一个网络上，我可以 ping 它）

如果有任何用途，这是控制台输出。

```
 [10/04/12 23:10:35] [SSH] Opening SSH connection to 192.168.0.102:22.
java.io.IOException: There was a problem while connecting to 192.168.0.102:22
    at com.trilead.ssh2.Connection.connect(Connection.java:793)
    at com.trilead.ssh2.Connection.connect(Connection.java:565)
    at hudson.plugins.sshslaves.SSHLauncher.openConnection(SSHLauncher.java:650)
    at hudson.plugins.sshslaves.SSHLauncher.launch(SSHLauncher.java:283)
    at hudson.slaves.SlaveComputer$1.call(SlaveComputer.java:200)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at com.trilead.ssh2.transport.TransportManager.establishConnection(TransportManager.java:346)
    at com.trilead.ssh2.transport.TransportManager.initialize(TransportManager.java:454)
    at com.trilead.ssh2.Connection.connect(Connection.java:733)
    ... 9 more
[10/04/12 23:10:56] [SSH] Connection closed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T08:38:12.687

在 MAC 中配置 SSH：

```
$ ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/home/<user>/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/<user>/.ssh/id_rsa.
Your public key has been saved in /home/<user>/.ssh/id_rsa.pub. 
```

给定 ssh 私钥的位置（从属路径），在 Jenkins 从属配置中配置 SSH。

更多细节在我的[博客](http://mobiledevtest.blogspot.co.il/2014/01/jenkins-slave-on-mac-or-windows-8.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:46:29.897

SSH 方法要求在您尝试连接的目标上运行 SSH 服务器。

也许您的 Mac 没有运行和/或配置 SSH 服务器。

# c# - 在 ASP.NET MVC3 中正确使用 TempData？

> ID：12737022
> 
> 赞同：7
> 
> 时间：2012-10-04T22:33:19.330
> 
> 标签：c#, jquery, asp.net-mvc-3

我有一个 ASP.NET MVC3 应用程序，其中我的操作会生成一个 ID 列表，我希望这些 ID 可用于后续的 AJAX 请求。这样我就可以在后台运行一个很长的进程并对其进行轮询。id 列表是这个长期运行过程的必要输入。我不想在 URL 中将它们作为参数传递，因为列表可能很长并导致 IE 出现问题。

我的控制器

```
public ActionResult Run()
{
    List<MyObjs> objs = _db.MyObjs.ToList<MyObjs>();

    string uniqueId = Guid.NewGuid().ToString();
    ViewData["UniqueID"] = uniqueId;
    TempData["ObjIdList" + uniqueId] = String.Join(",", objs .Select(o => o.ObjID).ToArray<int>());

    return View(objs);
}            

public void StartProcess(string uid)
{
    string ids = TempData["ObjIdList" + id].ToString().Split(',');
    ...        
} 
```

我的观点

```
var uniqueId = '@ViewData["UniqueID"]';

$(document).ready(function (event) {
    $('#startProcess').click(function () {
        $.post("/Scheduler/StartProcess", { uid: uniqueId }, function () {
            getStatus();
        });
        event.preventDefault;
    });
});

function getStatus() {
    var r = new Date().getTime(); // cache killer for IE
    var url = '/Scheduler/GetCurrentProgress/' + uniqueId + "?r=" + r;
    $.get(url, function (data) {
        if (data != "100") {
            $('#status').html(data);
            setTimeout(function () { getStatus(); }, 100);
        } else {
            $('#status').html("Done");
        };
    });
} 
```

这在我的初始测试中有效，尽管在我的笔记本电脑上有一个并发用户。这是安全的，还是有更好的方法来传递这些数据？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T23:20:33.673

布兰登

> TempData 与 ViewData 类似，不同之处在于它会针对两个连续的请求持续存在，这使得它对于在两个不同的控制器操作之间传递数据等事情很有用

杰森 C

> MVC 中的 TempData 实际上一直存在，直到被检索到。由于 FYI Tempdata 实际上存储在用户 SessionState 中，因此它更像 SessionData 而不是 ViewData

取自我的一个问题回复 - [MVC3 控制器操作结果“记住”传入的 ID](https://stackoverflow.com/questions/10488473/mvc3-controller-action-result-remember-passed-in-id)

本质上 TempData 就像一个 Session 属性 - （存储在 SessionState 中）用于在对控制器的两个连续请求之间进行通信。好像在您的情况下这是一个好或坏的做法，我认为将数据传递给 tempdata 会很好，但它们是其他选项，其中隐藏字段。另一个值得关注的好链接是[ASP.NET MVC - TempData - Good or bad practice](https://stackoverflow.com/questions/386681/asp-net-mvc-tempdata-good-or-bad-practice)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T23:27:12.180

的生命周期`TempData`很短。从当前请求到后续请求。TempData`Session`用于在幕后存储数据。但是生命周期比常规会话变量要短，这取决于后续请求。

如果您确定要在设置 TempData 的上一次调用之后立即进行 ajax 调用，则可以使用它。如果您想要更多的控制权，您可以将它保存在`Session`变量中，并在您使用它 n 次后销毁会话变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:27:19.333

仅当您希望在 ASP .NET MVC 中的控制器之间传递值时才使用 TempData。

# c++ - 将大型核心文件转换为“迷你核心”文件

> ID：12737025
> 
> 赞同：4
> 
> 时间：2012-10-04T22:33:27.927
> 
> 标签：c++, c, linux, debugging, gdb

如何将核心文件减少到线程堆栈？

我希望能够`thread apply all bt`在 mini core 上运行 gdb，不再需要

我正在处理大型 (>4GB) 多线程 Linux ELF 核心文件，这些文件太大而无法返回进行分析。

我看到[google-breakpad](http://code.google.com/p/google-breakpad/wiki/GettingStartedWithBreakpad)旨在在进程崩溃时创建一个“小型转储”。在[google-breakpad](http://code.google.com/p/google-breakpad/wiki/GettingStartedWithBreakpad)中有两个实用程序`core2md`，`minidump-2-core`乍一看应该能够将核心文件转换为 minidump 格式，然后从 minidump 中返回核心文件，其中仅包含堆栈信息。问题在于 core2md 需要 /proc/$PID/ 下的进程信息，而这不是我所拥有的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:18:33.563

可能你最好的选择是将 google breakpad 集成到你的 Linux 进程中，这样当发生崩溃时，它是 google breakpad 记录崩溃而不是操作系统创建核心文件。这将为您提供所需的信息，然后您可以使用 minidump_stackwalk 转储调用堆栈（便于汇总大量崩溃），也可以使用 minidump-2-core 创建核心文件。

不幸的是，Linux 似乎没有一种有效的方法来创建仅使用线程堆栈的内容的最小核心文件。这些文件（Windows 世界中的小型转储）非常有用——它们具有非常高的信息大小比，可以轻松收集数百万个故障转储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-15T00:52:49.107

您可能可以编写一个简单的程序，从核心文件中删除大部分数据。

核心文件由`PT_LOAD`代表不同 VMA 的程序头条目组成：

```
Program Headers:
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  NOTE           0x0000000000004b80 0x0000000000000000 0x0000000000000000
                 0x0000000000009064 0x0000000000000000  R      1
  LOAD           0x000000000000dbe4 0x0000000000400000 0x0000000000000000
                 0x0000000000000000 0x000000000009d000  R E    1
  LOAD           0x000000000000dbe4 0x000000000069c000 0x0000000000000000
                 0x0000000000004000 0x0000000000004000  RW     1
  LOAD           0x0000000000011be4 0x00000000006a0000 0x0000000000000000
                 0x0000000000004000 0x0000000000004000  RW     1
  LOAD           0x0000000000015be4 0x0000000001872000 0x0000000000000000
                 0x0000000000ed4000 0x0000000000ed4000  RW     1
  LOAD           0x0000000000ee9be4 0x00007f248c000000 0x0000000000000000
                 0x0000000000021000 0x0000000000021000  RW     1
  LOAD           0x0000000000f0abe4 0x00007f2490885000 0x0000000000000000
                 0x000000000001c000 0x000000000001c000  R      1
  LOAD           0x0000000000f26be4 0x00007f24908a1000 0x0000000000000000
                 0x000000000001c000 0x000000000001c000  R      1
[...] 
```

该`PT_NOTE`条目包含（除其他外）有关线程状态的信息：

```
Displaying notes found at file offset 0x00004b80 with length 0x00009064:
  Owner                 Data size       Description
  CORE                 0x00000088       NT_PRPSINFO (prpsinfo structure)

  [Thread #1]
  CORE                 0x00000150       NT_PRSTATUS (prstatus structure)
  CORE                 0x00000200       NT_FPREGSET (floating point registers)
  LINUX                0x00000440       NT_X86_XSTATE (x86 XSAVE extended state)
  CORE                 0x00000080       NT_SIGINFO (siginfo_t data)

  [other threads ...] 
```

## PT_NOTE 处理

您希望保留此`PT_NOTE`程序标题条目。

此外，您可以从结构中提取堆栈指针`prstatus`：

```
struct elf_prstatus {
  [...]
  elf_gregset_t pr_reg;   /* GP registers */
  [...]
}; 
```

## PT_LOAD 处理

从所有线程中提取所有堆栈指针后，您可以处理`PT_LOAD`条目：

*   如果`FileSize == 0`，则该程序头不消耗核心文件中的任何内存，可以忽略；

*   如果某个线程的堆栈指针在这个虚拟内存区域中，这可能是一个堆栈，您可能需要保留它；

*   否则，您可以将其从核心文件中删除（将其替换为带有 的程序头条目`FileSize == 0`）。

或者，您*可以*完全删除所有非堆栈区域的程序头条目。

## 创建您自己的核心转储程序

另一种解决方案是编写一个核心转储器，它直接生成它并在`/proc/sys/kernel/core_pattern`（man core）中注册。

# php - PHP 类函数调用

> ID：12737031
> 
> 赞同：1
> 
> 时间：2012-10-04T22:34:05.477
> 
> 标签：php, class, function, fatal-error

我正在编写自己的 php 类，并且在该类中有几个函数。但是我不能从同一个类中的另一个函数调用一个函数吗？像这样的东西：

```
class my_Class {
    function one($arg) {
        //does something
    }

    function two($var) {
        $receive = one($var);
    }
} 
```

我尝试了这样的事情，它吐出一个错误说：

```
Fatal error: Call to undefined function one() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T22:34:42.403

将其更改为：

```
function two($var) {
      $receive = $this->one($var);
 } 
```

查看 PHP OOP 参考：[http](http://www.php.net/manual/en/language.oop5.php)
://www.php.net/manual/en/language.oop5.php 该`$this`关键字始终是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:35:55.187

它应该是

```
class my_Class {
    function one($arg) {
        // does something
    }
    function two($var) {
        $receive = $this->one($var);
    }
} 
```

# google-apps-script - 如何在 Google Apps 脚本提供的 HTML 网站中使用 Angular.js？

> ID：12737033
> 
> 赞同：5
> 
> 时间：2012-10-04T22:34:19.257
> 
> 标签：google-apps-script, angularjs

是否可以在 Google Apps Script 中包含和使用 Angular.js 作为使用 HtmlService 提供的 Web 应用程序的一部分，或者 caja 会对其进行清理吗？

此外，是否可以在 Apps 脚本本身的 HtmlService 模板方法中使用 Angular？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T02:45:16.497

这目前是不可能的，尽管将来可能会支持它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-16T18:58:32.337

您可以在 appscript 文件中使用 angular 并进行以下更改。

```
var ui = HtmlService.createHtmlOutputFromFile('myPage')
  .setTitle('My Title');
ui.setSandboxMode(HtmlService.SandboxMode.IFRAME); 
```

# python - 用于创建图像镜像并将其与一定数量的白色混合的 Python 代码。

> ID：12737035
> 
> 赞同：1
> 
> 时间：2012-10-04T22:34:32.047
> 
> 标签：python, colors, flip

我是 Python 的新手，我正在尝试学习用 Python 处理图片。下面这段代码是创建图片的镜像，然后将其淡化为白色。但是当我执行代码时出现以下错误“错误是：'int'和'function'不适当的参数类型。尝试使用无效类型的参数调用函数。这意味着你做了诸如试图将字符串传递给需要整数的方法。” 我不确定是什么导致了这个错误，我需要帮助。

```
def blendWhite(pixcel, fadeAmount):
    newRed = 255 * fadeAmount + getRed(pixel) * (1 - fadeAmount)
    newGreen = 255 * fadeAmount + getGreen(pixel) * (1 - fadeAmount)
    newBlue = 255 * fadeAmount + getBlue(pixel) * (1 - fadeAmount)
    setColor(pixel, makeColor(newRed, newGreen, newBlue))

def copyAndMirrorCat():
    catFile = getMediaPath("caterpillarSmall.jpg")
    catPict = makePicture(catFile)
    width = getWidth(catPict)
    height = getHeight(catPict)
    canvas = makeEmptyPicture(width, height * 2)
    # Now, do the actual copying
    for x in range(0, width):
        for y in range(0, height):
            color = getColor(getPixel(catPict, x, y))
            setColor(getPixel(canvas, x, y), color)
            h = height * 2
            fadeAmount(y, h)
            blendWhite(getPixel(canvas, x, (height * 2) - y - 1), fadeAmount)
    show(catPict)
    show(canvas)
    return canvas

def fadeAmount(y, h):
    fm = (h - y) / float(h) + 0.15
    if fm > 1:
        fm = 1
    return fm 
```

结果如下所示：http: [//imageshack.us/a/img442/326/mirrorlinearwithwhite.jpg](http://imageshack.us/a/img442/326/mirrorlinearwithwhite.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:47:01.223

如果您查看您所说的行：

```
fadeAmount(y,h) 
blendWhite(getPixel(canvas,x,(height*2)-y-1),fadeAmount) 
```

您会看到您调用时`fadeAmount()`没有将值存储在变量中。然后，您尝试将函数传递给`blendWhite()`. 这只是行不通。您需要存储该值并传递它，例如：

```
fa = fadeAmount(y,h)
blendWhite(getPixel(canvas,x,(height*2)-y-1),fa) 
```

...或者只是将其全部声明为：

```
blendWhite(getPixel(canvas,x,(height*2)-y-1),fadeAmount(y,h)) 
```

# php - getimagesize 不适用于包含拉丁/特殊字符 PHP RHEL 的文件

> ID：12737044
> 
> 赞同：2
> 
> 时间：2012-10-04T22:35:45.447
> 
> 标签：php, html, linux, rhel, html2pdf

我们有一组图像，大约 2500 个，存储在本地 RHEL 6.2 服务器中。我们还有一个包含所有这些文件名称的 MySQL 数据库。

问题是，当我们调用 html2pdf 从通过 PHP 生成的 HTML 创建 PDF 时，每当它加载具有特殊字符的图像时，例如 áéíóúÁÉÍÓÚñÑ，脚本会抛出错误，因为无法读取文件（因为字符，不是因为权限）。

所以问题是：

MySQL 以“imágen 1 00023884 otoño.jpg”的形式返回本机文件名，并且文件以相同的名称存储在 RHEL 中。

你如何告诉 getimagesize() 它应该按原样读取文件名？

我已经尝试过 fopen 但它也不起作用，即使我对文件名进行 rawurlencode 它会引发无法加载文件错误。（“allow_url_fopen”开启）

其他一切都适用于没有特殊字符的文件。

希望我说清楚了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:14:26.580

我会尝试`GetImageSize(realpath($path))`。除此之外，你能用 来打开图像`ImageCreateFromString(file_get_contents($path))`吗？如果是这样，您将可以调用`ImageS[XY]`.

另一种选择是将文件重命名为[slug](https://stackoverflow.com/a/2103815/89771)并相应地更新您的数据库。

# c# - 以调试模式发布，但编译器删除 #if debug 中的代码

> ID：12737047
> 
> 赞同：2
> 
> 时间：2012-10-04T22:36:04.463
> 
> 标签：c#, asp.net, visual-studio-2010, compilation

我只是在调试模式下发布以在我的本地机器上进行测试，我希望“#if debug”模式能够工作，这样我就可以测试我在生产中还不需要的功能。

当我以调试模式发布时，web.config 仍然有

```
<system.web>
    <compilation debug="true" targetFramework="4.0">
</system.web> 
```

但是当我在项目的 dll 上使用反射器时，代码是这样的

```
#if debug
    PlaceHolder1.Visible = true;
#endif 
```

是不存在的。我认为编译器已将其删除。

注意：我不是在谈论构建，而是在谈论发布。在上面的代码仍然存在的情况下，按照我的预期进行调试构建

这是预期的行为吗？当我在调试模式下发布时，有没有办法让编译器包含这些代码？我对这一切都错了吗？

**更新：** 针对@dash 的评论，我的打包/发布 Web 设置是：

![打包/发布 Web 设置](../Images/78cff7ed8e0f23b064e905778e4bae07.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T22:49:55.527

C# 预处理器符号区分大小写。尝试：

```
#if DEBUG 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:41:03.430

是的，这是预期的行为。条件编译指令（例如`#if debug`）仅在编译时考虑。C# 代码在构建时进行编译。`compilation debug`你当时指出的选择是什么？我不确定，但我认为它改变了 aspx 页面的编译方式或网站运行构建代码的方式，这发生在页面被查看之前而不是代码构建时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T22:47:38.903

在 Visual Studio 中：

```
1\. Right click on your project choose properties.
2\. Go to the "Build" tab
3\. Select Release in the "Configuration" combobox.
4\. Check the "Define DEBUG constant"-checkbox. 
```

确保在部署到生产环境之前不要忘记将其删除。

编辑：由于您使用的是小写调试，因此您可以在第 4 步的“条件编译符号”中输入调试（小写）而不是第 4 步： ![条件编译符号](../Images/2a9d4b9d17dda821d1f4d3aca3263b98.png)

# php - 打开错误报告 xampp

> ID：12737048
> 
> 赞同：7
> 
> 时间：2012-10-04T22:36:19.813
> 
> 标签：php, error-handling, xampp, error-reporting

所以我有xampp，它根本不会报告任何东西......我什至强行出错，它没有做任何事情......

我用了

```
error_reporting(-1);
ini_set( 'display_errors', 1 ); 
```

根据本文档[http://php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

也`error_reporting(E_ALL);`没有做任何事情......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T23:17:20.353

> 嘿，看看那个，在编写代码时犯了一个更疯狂的错误并且它可以工作......但为什么它没有显示所有错误？

可能您没有收到任何“简单”错误，例如：

```
Parse error: syntax error, unexpected T_VARIABLE in .../.../index.php on line 6
#or
Warning: include(whateveryouwantedto.include): failed to open str(...) 
```

但你确实得到了类似的东西：

```
Fatal error: Call to undefined method stdClass::Crap() in .../.../index.php on line 6 
```

根据我的想法，这是因为如果您不禁用 PHP 配置中的日志记录，“简单”错误将“无处”发送。换句话说：PHP 通过不显示任何错误来“帮助”您，因为您定义了`log_errors = On`和/或`error_log = 'php_errors.log'`它正在记录所有“真实”错误，但您只是不将其划分为“真实”类别。

如果这没有帮助，思考帽会说：“它不记得了，但我肯定知道它在 PHP 或 Apache 配置中的某个地方。”

当然希望我的思考帽能帮到你。

编辑：解决这个问题可能是找到并打开 php.ini，全选，删除/退格，保存（但保持打开）（或在某处保存副本）。然后重新启动 Apache。看看有没有区别。如果是这样，则 php 配置在其他地方。恢复 php 文件并从根目录搜索您的计算机或服务器以查找另一个 php.ini。

另外我认为你应该确保：

```
log_errors = Off
error_log = "./"
display_errors = On
error_reporting = E_ALL 
```

或在 PHP 中：

```
error_reporting(E_ALL & E_STRICT);
ini_set('display_errors', '1');
ini_set('log_errors', '0');
ini_set('error_log', './'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-10T09:33:25.040

在您的文件夹 xampp/php 中创建名为 logs 的新文件夹。转到控制面板应用程序日志单击 php_error_log 它现在会询问您是否要创建文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-11T03:48:34.293

error_reporting 功能有时会在本地服务器上关闭，例如，Xampp 不支持它，因此您必须转到 php.ini 并在那里进行更改。希望这可以帮助 ：）。

# php - 关于使用 Amazon CloudFront 和/或 S3 作为图像服务器（与标准 Apache 服务器相比）的问题

> ID：12737049
> 
> 赞同：9
> 
> 时间：2012-10-04T22:36:27.793
> 
> 标签：php, apache, amazon-s3, amazon-cloudfront

目前，我有一个网站，它从 Apache 服务器提供动态（PHP-MySQL）内容，并从单独的 Lighthttpd 服务器提供静态内容（JavaScript、图像）。

出于规模的原因，我想使用 Amazon Cloudfront 和可能的 S3。老实说，我并不完全确定 S3 或 CloudFront 是如何工作的。我习惯了“上传文件......它变得可用”的正常服务器行为，而 S3“存储桶”和 CloudFront 边缘镜像令人生畏。

我需要更好地了解它是如何工作的并且有一些问题：

1）我不想在我自己的服务器上存储任何图像。我希望他们完全在云端。我是否正确，这意味着我需要使用 S3 作为“源服务器”进行存储？CloudFront 本身还不够吗？CloudFront 只是边缘 CDN 服务吗？

2) 我们目前通过 PHP 脚本将图像上传到我们的图像服务器，或通过手动 FTP 上传。如果我使用 S3，这将如何改变？听说不能FTP？:(

3）如果使用 S3，我还可以创建分层目录并在其中存储图像吗？图像存储在各种文件夹深处，我无法更改代码，但我听说 S3 是一个扁平的“桶”？

4）最后，听说用CloudFront，如果文件发生变化，你必须发出失效请求，这需要花钱。这是因为 CloudFront 正在缓存来自源的图像吗？我不习惯这一点，因为在我当前的设置中，我只是通过 FTP 替换图像并更新！有没有办法模仿这种经典的行为？

衷心感谢您的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T06:24:49.097

> 1）我不想在我自己的服务器上存储任何图像。我希望他们完全在云端。我是否正确，这意味着我需要使用 S3 作为“源服务器”进行存储？CloudFront 本身还不够吗？CloudFront 只是边缘 CDN 服务吗？

S3 专为长期、可靠的数据存储而设计，具有[11 个 9](http://aws.amazon.com/s3/faqs/#How_durable_is_Amazon_S3)的持久性。存储桶（它们被称为）是特定于区域的，并且位于[亚马逊的区域数据中心之一](http://aws.amazon.com/about-aws/globalinfrastructure/)。

相反，CloudFront 被设计为一系列边缘服务器。默认情况下，当您从 CloudFront 主机名请求对象（即文件）时，该对象将从*原始位置*拉出并在最近的 CloudFront 边缘位置缓存 24 小时（这可以通过编程方式进行调整）。在 24 小时结束时，缓存过期，CloudFront 将在下次请求该对象时提取一个新副本。

一个常见的设置是将 CloudFront 配置为使用 S3 作为其*原始位置*。CloudFront 还可以使用*任何*服务器，如果您喜欢的话（听起来您不喜欢）。

> 2) 我们目前通过 PHP 脚本将图像上传到我们的图像服务器，或通过手动 FTP 上传。如果我使用 S3，这将如何改变？听说不能FTP？:(

S3 不是 FTP 服务器，因此它不使用 (S)FTP 协议。但是，几乎所有 Mac OS X 的 FTP 客户端都支持 Amazon S3。Amazon S3 有一个 Web 服务 API，因此您可以根据需要使用 AWS 开发工具包之一自动执行推送。

[Cyber​​duck](http://cyberduck.ch)是一个工具，它可以执行 SSH、SFTP、FTP、Amazon S3 和其他一些事情。它适用于 Mac 和 Windows。还有其他工具可以提供用于上传到 S3 的 GUI，就像您通过 FTP 上传一样简单。

> 3）如果使用 S3，我还可以创建分层目录并在其中存储图像吗？图像存储在各种文件夹深处，我无法更改代码，但我听说 S3 是一个扁平的“桶”？

是和不是。

是的，S3 是一个平面文件系统，但文件的名称中可以有斜杠。例如，“abc/def/ghi/jkl.txt”实际上不是三个文件夹和一个文件，而是一个文件名中带有斜线的文件。大多数 GUI 工具选择将其可视化为文件夹和子目录，并且 S3 URL 看起来就像任何其他 URL。就我个人而言，我从来不需要为 S3 做任何不同于我过去为 SFTP 做的事情。

> 4）最后，听说用CloudFront，如果文件发生变化，你必须发出失效请求，这需要花钱。这是因为 CloudFront 正在缓存来自源的图像吗？我不习惯这一点，因为在我当前的设置中，我只是通过 FTP 替换图像并更新！有没有办法模仿这种经典的行为？

对。因为 CloudFront将源文件*缓存*到最近的边缘服务器。默认情况下，到期时间为 24 小时，但您可以将其设置为低至 1 小时，甚至可以通过“失效请求”提前到期。我发现这需要 3 到 15 分钟才能完成，因为 CloudFront 必须检查*所有*边缘服务器以确保它们都被清除。

如果您不想要缓存，则可以直接使用 S3。这与通过 FTP 替换图像最接近，但是您首先会失去使用 CDN 的所有好处。

根据[Amazon CloudFront 定价页面](http://aws.amazon.com/pricing/cloudfront/)：

> “您每月请求失效的前 1,000 个文件不收取额外费用。此后在您的失效请求中列出的每个文件 0.005 美元。”

对于您在一个月内使 1,000 多个文件无效的每个文件，这就是半分钱。我经常使用 CloudFront 并且*从未*超过这个限制，但如果您正在运行一个具有大量更改的大型站点，那么这当然是可能的。

我希望这有帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:28:36.867

我测试了一系列客户端应用程序，发现 Windows 的 CloudBerry S3 Explorer 和 Mac 的 CrossFTP 比 Cyber​​duck 更强大，但我经常使用私有流视频和音频，所以我的要求比在网站上显示图像要高一些。

但是要回答您的最后一个问题，您可以将带有子文件夹的文件夹拖到存储桶中，尊重层次结构。您可以使用存储桶中的文件夹，就像使用 FTP 一样。但是您必须确保将图像设置为公开，否则您的图像将不会显示。
标准，任何文件都作为私有文件上传，需要一个签名的 URL 才能访问它。但是使用客户端应用程序，您可以设置存储桶的继承，以便文件自动变为公开。你可以在这里找到很多关于这个的信息：http: [//www.miracletutorials.com/category/s3-amazon-cloudfront/](http://www.miracletutorials.com/category/s3-amazon-cloudfront/)

干杯，鲁道夫+++

# javascript - node.js 和 javascript websockets 通信

> ID：12737050
> 
> 赞同：1
> 
> 时间：2012-10-04T22:36:41.933
> 
> 标签：javascript, html, node.js, websocket

我正在尝试访问网页以使用 websockets 与 node.js 进行通信。我已经尝试了几个小时，但根本不知道出了什么问题。

**服务器**

```
var net = require('net');

var server = net.createServer(function (socket) {

    var handsShaked=false;

    socket.on('data', function(data) {
        if(!handsShaked){
            data=(data+"").split("\r").join("").split("\n");
            var key=null;
            for(i in data){
                if(data[i].indexOf("Sec-WebSocket-Key:")===0)
                    key=data[i].split(":")[1].split(" ").join("");
            }

            var magic = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
            var sha = sha1(key+magic);
            var accept = new Buffer(sha).toString('base64');

            socket.write(
                "HTTP/1.1 101 Switching Protocols\r\n"+
                "Upgrade: websocket\r\n"+
                "Connection: Upgrade\r\n"+
                "Sec-WebSocket-Accept: "+accept+"\r\n"
            );

            handsShaked=true;
        }

        socket.write("test");
    });
});

server.listen(10666); 
```

**客户**

```
socket = new WebSocket("ws://localhost:10666");
socket.onopen=function(){
    console.log('open');
    socket.send('Dit is een test');
}
socket.onmessage=function(msg){
    console.log('msg');
    alert(msg);
}
socket.onerror = function (error) {
    console.log('error');
    alert('WebSocket Error ' + error);
}; 
```

任何人都知道为什么它不工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T08:12:49.600

您在`\r\n`握手响应结束时错过了决赛

请参阅 HTTP [rfc2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6)

```
 Response      = Status-Line               ; Section 6.1
                   *(( general-header        ; Section 4.5
                    | response-header        ; Section 6.2
                    | entity-header ) CRLF)  ; Section 7.1
                   CRLF
                   [ message-body ]          ; Section 7.2 
```

您的代码缺少`CRLF`响应后的内容。

一旦你让握手工作，这条线`socket.write("test");`就不会像你期望的那样工作。Websocket 消息是[框架](https://www.rfc-editor.org/rfc/rfc6455#section-5)的，因此您需要额外的代码来读取和写入消息。

# java - 使用堆栈的类似俄罗斯方块的小程序——从顶部弹出

> ID：12737053
> 
> 赞同：0
> 
> 时间：2012-10-04T22:36:45.587
> 
> 标签：java, stack, tetris

所以在我的课堂上，我们正在用 Java 编写一个简单的俄罗斯方块，比如小程序。块从屏幕顶部落入 6 个不同的列，每个不同的列是一个堆栈。为了得分，你必须匹配 3 个或更多相同颜色的块，它们在堆栈的最顶部水平相邻。所以只有栈顶可以匹配。如果匹配 3 个或更多块，则必须删除它们（又名 pop()'d off）。您可以将块与相邻块切换到右侧或左侧（从而生成更大的组合）。然而，这是我的问题。我的问题涉及检查 3 个或更多块（彼此相邻）是否颜色匹配。我必须记住的是列数可能会增加。我并不是说程序运行时它会增加，它' s 只是我必须练习适当的技术，并确保我有可能解决这个问题。话虽如此，有一个代表列数的成员变量，恰当地命名为 numCols。

因此，如果有人可以在正确的方向上推动我解决这个问题，请。同样，问题是：能够编写一个方法 removeCombos() 来水平检查一行中的 3 个或更多相同颜色的块（在堆栈顶部）并删除它们。我想自己写代码，所以这里没有提供任何代码。除非您需要查看某些内容，否则我可以提供一些内容，但它与基本堆栈类及其泛型方法 pop()、peek()、contains()、isEmpty() 以及迭代器类一起使用堆栈类。

如果我有任何不清楚的地方，我会提前道歉，并请我在需要的地方澄清一下。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:42:47.953

你想要做的是将你`Stack`的 s 作为一个数组：

```
protected Stack[] stacks;

protected removeCombos()
{
    int color;
    for(int i = 0; i < stacks.length; ++i)
    {
        color = stacks[i].peek();
        for(int j = 1; (i+j) < stacks.length; ++j)
            if(stacks[i+j].peek() != color)
                break;

        // j is now the number of contiguous blocks of the same color.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:28:14.177

我认为一系列堆栈使这项任务更加困难。如果我们有一个例子：

```
.....
..X..
.XOX.
XOXOX 
```

然后在每个堆栈的顶部，我们有颜色 X。但据我所知俄罗斯方块，它们不应该被删除。

因此，您需要某种可以更直接地访问行的数据结构。可能的解决方案是 1\. 数组数组 2\. 或向量数组。

向量可以更轻松地删除中间的元素，但另一方面，当向量未填充到您正在检查的行时，您需要处理。

# java - 调试时找不到源

> ID：12737055
> 
> 赞同：4
> 
> 时间：2012-10-04T22:37:06.690
> 
> 标签：java, eclipse, debugging

我正在使用 Eclipse IDE for Java EE Developers（Mac OS X 64 位）来调试我的两个 java 文档。我有一个`Name`带有名为`insert`. 它执行但给出错误的结果。`NamesTester`是类的测试`Name`类。

在调试过程中，当我使用 step into`insert`方法时，它会跳转到一个名为 的奇怪文档`ArrayList<E>.size()`，并显示 Source not found。我不知道怎么了。这是否意味着我无法进入一种方法来查看那里发生了什么？但是，如果我使用 step over，则可以很好地调试后续步骤。

有人可以帮我找到原因和解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:24:38.727

这意味着您跳入了您的项目类路径无法访问的类定义。例如 Java JVM 源代码。在您的情况下，也许它试图跳入 ArrayList 定义。

通过 google 查找有关在 eclipse 中调试的信息，步入并逐步通过

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-21T08:40:44.423

1.  点击`Attach source`
2.  检查`External locations`并单击`External files`
3.  `src.zip`从 Program Files/java/jdk1.x/src.zip添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:13:17.250

您调试了 Java 运行时代码，但您的机器上没有安装它的源代码。将来避免这种情况的最简单方法是安装完整的 Java 开发工具包 (JDK) 而不是仅安装 Java 运行时环境 (JRE)，并确保 Eclipse 使用该 JDK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T05:20:15.887

您指向 ArrayList.size() 的方法是jdk的 ArrayList 类的方法。

第一：找不到源不是错误。当您处于调试模式并且在调试时输入一些其 .java 文件不在类路径上的类时，找不到源。此消息仅意味着，您尝试调试的代码部分，源代码不可用，因此调试器无法显示突出显示的行等。现在要纠正这个问题，我的意思是能够在您的调试器中看到该方法，下载jdk的源代码（与您当前使用的版本相同），当您看到找不到源屏幕时，有一个atrach源按钮。选择它并选择您下载的源代码文件，然后按确定。和 tge 屏幕将刷新与类的突出显示的行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-05T03:04:31.793

我认为您需要将源代码附加到库中，这将有助于调试器找到它。

遵循此[线程](http://www.vogella.com/articles/Eclipse/article.html#classpath_jarsource)第 16.2 节，

希望这会帮助你。

# sql-server - sql server if 语句

> ID：12737067
> 
> 赞同：3
> 
> 时间：2012-10-04T22:38:27.883
> 
> 标签：sql-server

我确实有这种情况，我正在尝试将 if else 用于以下情况。它确实有效，但没有按预期工作..当**preState**没有选择任何内容时，它会带来 Null 我希望它为每个选择显示。你能请看一下。谢谢大家..我的 if 有问题....“你可以复制并运行它”

```
 DECLARE     @returnvalue VARCHAR(50)
        ,@state VARCHAR(50)
        ,@i INT
        ,@postState  VARCHAR(50)
        ,@preState  VARCHAR(50)
        ,@Anystring  VARCHAR(255)
        ,@state1 VARCHAR(50)
        ,@state2 VARCHAR(50)

        SET @Anystring='IA all the states Colorado '

      SELECT @state =LTRIM((RTRIM(SUBSTRING(@Anystring, LEN(@Anystring) -      CHARINDEX(' ', REVERSE(@Anystring))+1 , LEN(@Anystring)))))

         SET @state =REPLACE(REPLACE(@Anystring, '.', ' '), '&', ' ')

         set @state1=@state

  SET @i = CHARINDEX(' ',@state1 )

  If (@i > 0 and SUBSTRING(@state1, 1, @i-1) IN ('IA','CO','Iowa','Colorado'))
     begin
     SELECT  @preState = RTRIM(SUBSTRING(@state1, 1, 1)), 
             @state1 = LTRIM(SUBSTRING(@state1, @i+1, 999))
     end

   else IF (@i > 0 and SUBSTRING(@state, 1, @i-1) IN ('DC','SEA','NY'))
     begin
     SELECT  @preState = RTRIM(SUBSTRING(@state1, 1, 2)), 
             @state1 = LTRIM(SUBSTRING(@state1, @i+1, 999))

     end        

   SET @i = LEN(@state1) - CHARINDEX(' ', REVERSE(rtrim(@state1)))
  IF (@i > 0 and @i < LEN(@Anystring) and SUBSTRING(@state1, @i+2, 999) IN     ('IA','CO','Iowa','Colorado')) 
      begin
     SELECT @postState = SUBSTRING(@state1, @i+2, 1),
             @state1 = RTRIM(SUBSTRING(@state1, 1, @i))
      end       

else IF (@i > 0 and @i < len(@state)  and SUBSTRING(@state1, @i+2, 999) IN ('DC','SEA','NY')) 
    begin
     SELECT @postState = SUBSTRING(@state1, @i+2, 2),
             @state1 = RTRIM(SUBSTRING(@state1, 1, @i))
    end         

else IF (@i > 0 and SUBSTRING(@state1, 1, @i-1) IN ('','  ','   '))  
        begin

        SELECT @postState = '',
             @state1 = LTRIM(SUBSTRING(@state1, 1, 999))          
        end           
      SET  @state1=@preState+' ' + @state1+' '+@postState 

      set @state2=@state1

      select @state2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:26:02.183

如果你的意思是你得到 NULL

```
SET  @state1=@preState+' ' + @state1+' '+@postState 
```

然后你会想要 ISNULL 它来处理缺少前缀

```
SET  @state1= isnull(@preState+' ','') + @state1+' '+@postState 
```

@poststate 也一样

# android - 设置 OnItemClick 以在 web 视图中打开 rss 提要的 URL

> ID：12737068
> 
> 赞同：1
> 
> 时间：2012-10-04T22:39:08.310
> 
> 标签：android, listview, rss, xml-parsing

我知道我在看这个或在想这个，但我似乎无法弄清楚当用户点击它时如何启动 rss 提要的链接。我正在使用 DOM Parser 将 xml 文件解析为 listview 并从 xml 文件中获取所有信息。我遇到的问题是将其解析为我拥有的自定义 WebActivity，它应该加载我也拥有的 webview 客户端。这是我正在使用的代码。

主要活动

```
 public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://treymorgan.net/feed";
// XML node keys
static final String KEY_ITEM = "item"; // parent node 
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_PUB_DATE = "pubDate";
static final String KEY_LINK = "guid";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_PUB_DATE, parser.getValue(e, KEY_PUB_DATE));
        map.put(KEY_LINK, parser.getValue(e, KEY_LINK));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() { 
```

编辑：这是我遇到问题的代码部分...... onItemClick 方法将 url 从 rss 提要发送到 webview 活动，以便可以在应用程序中查看它，而不是通过设备上的本机浏览器

```
 @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Intent intent = new Intent(CustomizedListView.this, WebviewActivity.class);  
            Bundle b = new Bundle();
            intent.putExtra("KEY_LINK", b);
            startActivity(intent); 

             }

    });
}   
 } 
```

这是我的 Webview 活动

```
 public class WebviewActivity extends Activity{
  private WebView webview;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    Bundle b = getIntent().getExtras(); 
    String KEY_LINK = b.getString("KEY_LINK");

    webview = (WebView) findViewById(R.id.webView1);
    webview.setWebViewClient(new MyWebViewClient(this));
    webview.getSettings().setAppCacheEnabled(false);
    webview.getSettings().setBuiltInZoomControls(true);
    webview.setInitialScale(1);
    webview.loadUrl(KEY_LINK);

  }

       } 
```

所以基本上，我想要做的是将 KEY_GUID 连接到 WebviewActivity ，我似乎无法弄清楚如何将字符串从一个活动接收到另一个活动。提前感谢您的帮助

编辑：好的，我已经为此工作了一段时间，并且我已经更新了我正在使用的与此问题相关的代码。现在我没有错误，当我单击一个项目时，它会打开 WebviewActivity 但它不会加载网站，也不会将我的 webview 客户端附加到它。谁能帮我解决这个问题？

编辑：当我加载这样的代码时：

```
 @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent intent = new Intent(CustomizedListView.this,    WebviewActivity.class);  
            Bundle b = new Bundle();
            intent.putExtra("b", "http://www.google.com" );
            startActivity(intent); 
```

它打开 webview 活动并加载谷歌就好了。所以也许我现在遇到的问题是如何从我的 DOM 解析器中获取我需要的链接。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:45:16.077

在您的通话活动中：

```
Intent i = new Intent(this, WebActivity.class);
i.putExtra(MY_KEY, "http://http://stackoverflow.com");
startActivity(i); 
```

在您的接收活动中：

```
protected void onStart() {
  super.onStart();
  String myUrl = getExtras().getString(MY_KEY);
  webView.loadUrl(myUrl);
} 
```

* * *

**编辑：**

假设您的适配器包含 HashMaps（从我看到的关于您如何解析 XML 的内容）

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
  HashMap<String, String> selectedSong = (HashMap<String, String>) parent.getItemAtPosition(position);

  Intent intent = new Intent(CustomizedListView.this, WebviewActivity.class);  
  intent.putExtra("KEY_LINK", selectedSong.get(KEY_LINK));
  startActivity(intent); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:06:17.753

对于从一个活动到另一个活动的传递字符串

**第一项活动：**

```
Intent indisplay = new Intent(FirstClass.this,SecondClass.class);
indisplay.putExtra("link",your link here);
startActivity(indisplay); 
```

**第二个活动：**

```
 Intent indispaly = getIntent();
 String url = indispaly.getStringExtra("link");
    // your link from previous activity is stored into the url 
```

并显示到**webview**中，例如：

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.newsdisplay);
    getWindow().setFeatureInt( Window.FEATURE_PROGRESS, Window.PROGRESS_VISIBILITY_ON); 

    Intent indispaly = getIntent();
    String url = indispaly.getStringExtra("link");

    newswebview = (WebView) findViewById(R.id.news_webView);
    newswebview.setWebViewClient(new WebViewClient());

    WebSettings webSettings = newswebview.getSettings();
    webSettings.setJavaScriptEnabled(true);

    newswebview.getSettings().setSupportZoom(true);       //Zoom Control on web (You don't need this 
     //if ROM supports Multi-Touch      
    newswebview.getSettings().setBuiltInZoomControls(true); //Enable Multitouch if supported by ROM

    newswebview.loadUrl(url);

    final Activity MyActivity = this;

newswebview.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress) 
       {

        //Make the bar disappear after URL is loaded, and changes string to Loading...
        MyActivity.setTitle("  Loading...");
        MyActivity.setProgress(progress * 100); //Make the bar disappear after URL is loaded

        // Return the app name after finish loading
           if(progress == 100){

               MyActivity.setTitle(R.string.app_name);

           }

    }
});

}

 @Override  
    public boolean onKeyDown(int keyCode, KeyEvent event)   
    {  
        if ((keyCode == KeyEvent.KEYCODE_BACK) && newswebview.canGoBack()) {  
            newswebview.goBack();  
            return true;  
        }  
        return super.onKeyDown(keyCode, event);  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:21:32.570

好的，这是我问的问题的答案。这对我很有用，并且完全按照我的意愿进行。这是它的工作代码

```
 public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://treymorgan.net/feed";
// XML node keys
static final String KEY_ITEM = "item"; // parent node 
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_PUB_DATE = "pubDate";
static final String KEY_LINK = "link";

ListView list;
LazyAdapter adapter;

ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ITEM));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_PUB_DATE, parser.getValue(e, KEY_PUB_DATE));
        map.put(KEY_LINK, parser.getValue(e, KEY_LINK));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent intent = new Intent(CustomizedListView.this, WebviewActivity.class);  
            new Bundle();
            intent.putExtra( "b", songsList.get(position).get(KEY_LINK));
            startActivity(intent); 

             }

    });
}   
 } 
```

# php - mediaelement.js - 从 WordPress 中的 php 触发

> ID：12737069
> 
> 赞同：0
> 
> 时间：2012-10-04T22:39:20.770
> 
> 标签：php, mysql, wordpress, mediaelement.js

我正在尝试使用来自数据库的返回来启动 MediaElement.js。

如果我放在`[audio src="http://www.soundtheology.org/HA-mp3/DA-1430.mp3"]` 一个页面上，它会启动播放器。

但是，当 php 将复制与数据库返回相结合生成相同的代码时，它只会在屏幕上打印出来，并且播放器不会启动。

有没有办法用 php 来复制副本并仍然启动播放器？

我正在使用 WordPress 并从在线数据库中提取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:47:31.887

在 Wordpress 模板页面中，您必须`do_shortcode()`像这样包装短代码：

```
 <?php echo do_shortcode('[audio src="http://www.soundtheology.org/HA-mp3/DA-1430.mp3"]'); ?> 
```

希望有帮助！

# ruby-on-rails-3 - ActiveRecord/PostgreSQL - GROUP BY 子句或用于聚合函数

> ID：12737075
> 
> 赞同：2
> 
> 时间：2012-10-04T22:40:54.807
> 
> 标签：ruby-on-rails-3, postgresql, activerecord

我正在尝试在 Postgres 上使用我的 Rails 3.2 应用程序在标记上执行此[Railscast 。](http://railscasts.com/episodes/382-tagging)除了标签云功能外，我让它工作。但是，我通过查看基于用户创建的标签形成标签云来添加一个图层。

我正在尝试调整/修改 Railscast 中的代码：

```
def self.tag_counts
  Tag.select("tags.*, count(taggings.tag_id) as count").
    joins(:taggings).group("taggings.tag_id")
end 
```

但是当我运行它时，我得到了 PG 错误：

```
PG::Error: ERROR:  column "tags.id" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT tags.*, count(taggings.tag_id) a... 
```

以下是模型的外观：

**用户.rb**

```
has_many :trades
has_many :taggings, :through => :trades
has_many :tags, :through => :taggings 
```

**贸易.rb**

```
has_many :taggings
has_many :tags, :through => :taggings 
```

**标记.rb**

```
belongs_to :tag
belongs_to :trade 
```

**标签.rb**

```
has_many :taggings
has_many :trades, through: :taggings 
```

如果有人可以帮助修改查询以计算用户的标签，那将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:03:31.057

这是因为在 Rails Cast 中，您发送的*SQLite在您使用**postgres*时被用作数据库；所以问题是像*SQLite*和*MySQL*这样的数据库允许您添加**不在****Group BY**子句中但*postgres*没有的字段。

所以你有两个选择

1.  您在标记模型中的belong_to 关联中使用counter_cache 选项。
2.  将 join 替换为如下所示。

    tagging.includes(:tag).select("taggings.tag_id, count(taggings.tag_id) as count").group("taggings.tag_id")

# javascript - 用于在具有合并列和行的表格中查找单元格的开始和结束列索引的 JavaScript

> ID：12737083
> 
> 赞同：1
> 
> 时间：2012-10-04T22:42:12.217
> 
> 标签：javascript, html

考虑这张表：

[http://jsbin.com/esikac/1/edit](http://jsbin.com/esikac/1/edit)

请注意每个单元格如何具有像“xy”这样的值对，x 是开始列索引，y 是结束列索引（在这种情况下，列将是列之间的行而不是列本身，从零开始）。希望这是有道理的。

我需要的是一些 javascript，它将采用一个单元格（一个 td 元素）并给我它的开始和结束列索引，就像在我的示例表中一样。所以，假设我有一个`getColumnBounds`将`td`元素作为参数的函数。如果我调用它并通过`td`表格右上角的 ，它会给我“3-5”（当然不是通过阅读里面的文字，而是通过弄清楚它）。

这是我到目前为止所拥有的，但是如果我在添加合并行后立即失败：

```
function getColumnBounds(td) {

    function colSpan(col) {
        return parseInt((col && col.nodeType == 1 && element.nodeName.match(/t[dh]/i)) ? (col.getAttribute("colSpan") || 1) : 0);
    }

    function endIndex(element) {
        var colPos = colSpan(element);

        while(element) {
            element = element.previousSibling;
            colPos += colSpan(element);
        }

        return colPos;
    }

    var startIndex = endIndex(td.previousSibling);
    var endIndex = endIndex(td);
    return ("" + startIndex + "-" + endIndex);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:10:41.277

先来个评论。

对于表格单元格的遍历，考虑利用[rows](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-46975887)、[rowIndex](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-67347567)、[cells](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-67349879)和[cellIndex](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-80748363)属性来导航而不是兄弟姐妹（因为兄弟姐妹可能是文本节点，而不是元素），例如：

```
function getCellNext(cell) {
  return cell.parentNode.cells[cell.cellIndex + 1] || null;
} 
```

`null`如果找不到合适的节点来返回，大多数 DOM 方法都会返回。如果函数返回`null`，则*cell*是该行中的最后一个单元格。类似的策略可用于获取前一个单元格，或者上面或下面的一个，例如

```
function getCellAbove(cell) {
  var row = cell.parentNode;
  var table = row.parentNode.parentNode; // may use tableSection instead
  var rowAbove = table.rows[row.rowIndex - 1];
  return rowAbove? row.cells[cell.cellIndex] : null;
} 
```

使用表上的单个侦听器，以下返回特定单元格的列和行范围：

```
// Get the cell and row range of a particular cell
function getCellRange(cell) {
  var colRange = cell.cellIndex + '-' + (cell.cellIndex + cell.colSpan - 1);
  var row = cell.parentNode;
  var rowRange = row.rowIndex + '-' + (row.rowIndex + cell.rowSpan - 1);
  return [colRange, rowRange];
}

// Helper functions
function upTo(el, tagName) {
  tagName = tagName.toLowerCase();
  while (el && el.nodeName.toLowerCase() != tagName) {
    el = el.parentNode;
  }
  return el || null;
}

// Call getCellRange from an event
function showCellRange(e) {
  var target = e.target || e.srcElement;
  var cell = upTo(target, 'td');
  return cell? getCellRange(cell) : null;
} 
```

听众（和桌子）是：

```
 <table onclick="alert(showCellRange(event));">
  <tr>
    <td colspan="2">0-2
    <td rowspan="2">2-3
    <td colspan="2">3-5
  <tr>
    <td>0-1
    <td>1-2
    <td>3-4
    <td>4-5
  <tr>
    <td>0-1
    <td colspan="2">1-3
    <td>3-4
    <td>4-5
  <tr>
    <td>0-1
    <td colspan="3">1-4
    <td>4-5
  <tr>
    <td>0-1
    <td>1-2
    <td colspan="2">2-4
    <td>4-5
</table> 
```

我认为您的范围不正确。如果第一个单元格的 colspan 为 2，则其范围是 0-1 而不是 0-2。

此外，由于*rowSpan*、*rowIndex*、*cellSpan*和*cellIndex*都是 Number 类型，因此不需要*parseInt*。我也不明白你为什么在 jsbin 代码中包含 jQuery。

# javascript - 为什么我的 3 个 Highcharts 饼图/图表中只有 2 个显示

> ID：12737085
> 
> 赞同：0
> 
> 时间：2012-10-04T22:42:40.993
> 
> 标签：javascript, jquery, highcharts

我无法弄清楚为什么我的图表在上传到 jfiddle 时显示得很好，但是，在我的实际页面中，只有 3 个图表中的 2 个出现。

我错过了什么吗？我所有的 javascript 代码和标签都已关闭。根本想不通这个。你可以在这个 jsfiddle 看到我的代码：http: [//jsfiddle.net/kZcRX/](http://jsfiddle.net/kZcRX/)

这是我的整个 HTML 页面...我不明白为什么我的图表不会显示，但在 JSFiddle 中显示得很好：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Graphs & Charts</title>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
// JavaScript Document
$(function () {

    Highcharts.setOptions({
 colors: ['#6eb5ec', '#d64646', '#8bba00', '#f6bd0f', '#cd5ace', '#f19153', '#cccccc', '#cd8b49']
});

    var chart;  

        // Build the chart
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                events: {
                    load: function(event) {
                        console.log(this);
            }
        }     
            },
                legend: {
                layout: 'vertical',
                backgroundColor: '#FFFFFF',
                align: 'left',
                verticalAlign: 'top',
                floating: true,
                x: 365,
                y: 260,
                itemStyle: {
                    color: '#000000',
                    fontWeight: 'normal',
                    fontSize: '11px'
                    }
            },
             title: {
                text: '2012 Revenue Report'
            },
                tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 1
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true
                    },
                    showInLegend: true,
                    point: {
                        events: {
                            legendItemClick: function () {
                                return false; // <== returning false will cancel the default action
                                }
                            }   
                        }   
                }
            },
            series: [{
                type: 'pie',
                name: 'Browser share',
                data: [
                    ['Govt<br/>Contracts<br/>& Grants',   45.0],
                    ['Private<br/>Grants/Gifts',       26.8],
                    {
                        name: 'Net Tuition<br/>& Fees',
                        y: 12.8,
                        sliced: true,
                        selected: true
                    },
                    ['Auxiliary<br/>Enterprises',    8.5],
                    ['Investments',     6.2],
                    ['Dental Clinic',   0.7],
                    ['Other',   0.7]
                ]
            }]

        });
    });

       // ENDOWMENT BAR GRAPH
       chart = new Highcharts.Chart({
            chart: {
                renderTo: 'endowment',
                type: 'column',
                events: {
                        load: function(event) {
                            console.log(this);
            }
        }     
            },
            title: {
                text: '2012 Financial Endowment Report'
            },
            subtitle: {
                text: 'Periods ending June 30th'
            },
            xAxis: {
                categories: [
                    'Reporting Year'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Millions (mm)'
                }
            },
            legend: {
                layout: 'vertical',
                backgroundColor: '#FFFFFF',
                align: 'left',
                verticalAlign: 'top',
                x: 85,
                y: 50,
                floating: true,
                shadow: true
            },
            showInLegend: true,
                    point: {
                        events: {
                            legendItemClick: function () {
                                return false; // <== returning false will cancel the default action
                                }
                            }   
                        },  
            tooltip: {
                formatter: function() {
                    return ''+
                        this.x +': '+ this.y +' mm';
                }
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0,
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true
                    },
                    showInLegend: true,
                    point: {
                        events: {
                            legendItemClick: function () {
                                return false; // <== returning false will cancel the default action
                                }
                            }   
                        }

                }
            },
                series: [{
                name: 'Yr 2011',
                data: [49.9]

            }, {
                name: 'Yr 2012',
                data: [83.6]

            }]

        });

       // EXPENSES CHART
              chart = new Highcharts.Chart({
          chart: {
             renderTo: 'expenses',
             plotBackgroundColor: null,
             plotBorderWidth: null,
             plotShadow: false
          },
          title: {
             text: 'This will be a pie chart',
             style: {
                Color: '#666'
             }
          },
          tooltip: {
             formatter: function() {
                return '<strong>'+ this.point.name +'</strong>: '+ this.y +' %';
             }
          },
          plotOptions: {
             pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                   enabled: true
                },
                showInLegend: true
             }
          },
          showInLegend: true,
                    point: {
                        events: {
                            legendItemClick: function () {
                                return false; // <== returning false will cancel the default action
                                }
                            }   
        },  
          series: [{
             type: 'pie',
             name: 'Our Current Expenses',
             data: [
                ['Expense1', 26.9],
                ['Expense2', 27.7],
                ['Expense3', 45.3],
                {
                   name: 'Other',
                   y: 32.2,
                   sliced: true,
                   selected: true
                }
             ]
          }],
          legend: {
             borderColor: '#666'
          }
       });
</script>
</head>

<body>
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

<div id="expenses" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

<div id="endowment" style="min-width: 400px; height: 400px; margin: 0 auto"></div>​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T23:25:07.900

我看到各种各样的问题。首先，尝试在所有其他脚本之前包含 jQuery。[Highcharts 文档](http://www.highcharts.com/documentation/how-to-use)声明它依赖于 jQuery、MooTools 或 Prototype 。这可能适用于 jsfiddle，因为它默认将 jQuery 加载到浏览器中。

其次，您应该将所有图表创建放在 $(document).ready(function () {}) 块中。只有您的收入图表在该块中被初始化。

[在http://static.nickfishman.com/misc/12737085.html](http://static.nickfishman.com/misc/12737085.html)上查看稍作修改的独立工作版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:46:54.500

我不知道你为什么需要这个

```
$(document).ready(function () { 
```

在你的 JavaScript 中。我可以看到您已经在准备好文档时初始化了一个事件，所以这是多余的，可能会导致您面临的问题。尝试不使用它。

这种方式在这里[http://jsfiddle.net/kZcRX/1/](http://jsfiddle.net/kZcRX/1/)

# objective-c - 使用 ARC 编写的 iOS RSS 解析器

> ID：12737087
> 
> 赞同：0
> 
> 时间：2012-10-04T22:42:48.003
> 
> 标签：objective-c, ios, parsing, rss

ARC 有什么好的 RSS 解析库吗？我已经能够找到一堆好的，但它们都依赖于内存管理。不幸的是，这不适合我目前的项目。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:04:34.360

查看 Ray Wenderlich 的博客。他有一个完美的[例子](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)可以满足您的需求。

# jquery - 使用 jquery 和 .NET 显示动画加载图标

> ID：12737088
> 
> 赞同：-1
> 
> 时间：2012-10-04T22:43:15.180
> 
> 标签：jquery, asp.net

我有一个常规的 html 按钮，该按钮使用包含背景图像的 css 样式。单击按钮时，它会调用一个执行 location.href = 'page.aspx' 的 js 函数。在调用它之前，我想换掉按钮的背景图像。

这是我到目前为止所拥有的：

```
function InitiateNewLocalForm(sender, FormGuid) {   
    setTimeout($(sender).attr('class', 'Loading20'), 100);
    location.href = 'Forms/InitializeNewForm.aspx?FormGuid=' + FormGuid
} 
```

sender 是触发此事件的按钮。如果我删除 location.href 部分，它工作正常。它将按钮的类换成 Loading20，它具有动画 gif 作为按钮背景。但是，当我使用 location.href 运行它时，动画图像根本不显示。按钮的类别发生变化，旧的背景图像消失，但新的背景图像不出现。我过去曾遇到过这种情况，并且使用 setTimeout 有效。我难住了。

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:53:52.697

你不需要解析href，你可以简单地使用这样的东西：http: [//jsfiddle.net/dQPfv/1/](http://jsfiddle.net/dQPfv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:57:55.450

试试这个

```
$(this).addClass('Loading20');
setTimeout(function(){location.href = 'Forms/InitializeNewForm.aspx?FormGuid=' + FormGuid; }, 100); 
```

# java - 有没有办法使用 JPA 注释和 Hibernate 动态选择 @GeneratedValue 策略？

> ID：12737092
> 
> 赞同：20
> 
> 时间：2012-10-04T22:43:42.130
> 
> 标签：java, database, hibernate, jpa

我正在开发一种将支持多个数据库引擎（Oracle、MSSQL、MySQL）的产品。对于 Oracle，我更喜欢使用序列而不是序列表来避免大容量安装中潜在的并发和锁定问题，但其他数据库引擎不支持序列。此外，我更喜欢每个表使用一个序列而不是全局序列（例如`hibernate_sequence`），所以`@GeneratedValue(strategy = GenerationType.AUTO)`不会工作。有没有办法在运行时动态选择策略？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-05T01:18:28.690

实际上，Hibernate 解释`GenerationType.AUTO`并`GenerationType.SEQUENCE`使用它的`org.hibernate.id.enhanced.SequenceStyleGenerator`. SequenceStyleGenerator 是一种 id 生成策略，它根据底层数据库支持的内容选择两种策略之一。如果数据库支持序列，SequenceStyleGenerator 使用序列；如果没有，SequenceStyleGenerator 会退回到使用“序列表”。使用哪个生成器的“映射”由设置控制：`hibernate.id.new_generator_mappings`. 将其设置为 true 会启用我刚才描述的行为。不幸的是，出于向后兼容性的原因，我们不得不将其默认为 false。因此，要利用这一点，您需要确保该设置设置为 true。

此外，如果没有给出名称，您可以将 SequenceStyleGenerator 配置为首选全局序列或每个实体的序列。这由名为的设置控制`prefer_sequence_per_entity`

SequenceStyleGenerator 通常是相当可配置的。查看它的 javadocs 以获取更多信息：[http ://docs.jboss.org/hibernate/orm/4.1/javadocs/index.html?org/hibernate/id/enhanced/SequenceStyleGenerator.html](http://docs.jboss.org/hibernate/orm/4.1/javadocs/index.html?org/hibernate/id/enhanced/SequenceStyleGenerator.html)

# button - Facebook like 按钮通过无溢出页面向下扩展

> ID：12737094
> 
> 赞同：2
> 
> 时间：2012-10-04T22:43:50.890
> 
> 标签：button, popup, facebook-like

有什么方法可以让like按钮向上扩展而不是向下扩展，就像在我的页面[http://frc1410.org](http://frc1410.org)上一样，like按钮被放置在页脚中，我希望它向上扩展，或者推动整个页脚向上，使其可见。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T14:43:46.997

以前的答案仅适用于评论。Like 对话框更难一些。

对我来说，其他人禁止加载阻止页面的时间，以及由于更改大小而导致的蓝精灵。

我们使用以下解决方案用一块石头杀死了 4 只鸟： - Facebook Like 对话框出现在 Like 按钮上方和顶部 z-index 级别
- 它是完全异步的，因此页面不会阻塞
- 我们自动创建正确的 url 条目所以我们所有的页面都使用相同的javascript，
并且只有在知道实际大小后才会更新和显示

点击喜欢后的图片：
[http ://www.plixo.com.sg/download/fb_open_up.png](http://www.plixo.com.sg/download/fb_open_up.png)

所以我们是这样做的：

1）我们在所有页面中都包含一个“空”的 div，而不是用 javascript 填充： `<div id="social-media-bar"><div id="social-media"></div></div>`

PS：2 级 div 的原因是因为我稍后会将其扩展到 google+、twitter 等

2) we load facebook asynchronously
using LazyLoad loader but any will do and you can also do synchronous if you want: `LazyLoad.js(('https:' == document.location.protocol ? 'https://' : 'http://') +
'connect.facebook.net/en_US/all.js');`

3) in the facebook init, we:
- fill the dedicated div,
- ask fb to parse the inserted tags
- use a timeout after parsing to ensure display has been refreshed and thus widht and height are correct.

```
window.fbAsyncInit = function() { 
        var d = document,n,nn,url,url_ref,i;`

        // due to bug in facebook need to delay the actual access to data after parse
        function FBUpdateSize(){
            var h,str;
            // show facebook entry using actual element size
            h = nn.firstChild.clientHeight;
            str = h+'px';
            nn.style.height= str;
            n.style.height= str;
            n.style.overflow='visible';
        }

        FB.init({   channelUrl : 'http://www.plixo.com.sg/channel.html',
                    //appId : '228760567272221', 
                    status     : false,
                    xfbml      : false}); 

        // create facebook entries in the DOM
        n = d.getElementById('social-media');
        url = d.URL;
        i = url.lastIndexOf('/')+1;
        url_ref = url.slice(i,url.indexOf('.',i));
        nn = d.createElement('fb-like');
        nn.innerHTML = '<div id="fb_like_bottom"><fb:like href="' + url + '" ref="' + url_ref + '" send="false" layout="standard" width="360px" show_faces="false"></fb:like></div>';
        nn = n.appendChild(nn);

        // call facebook to fill DOM entries
        // use a timeout in callback to ensure browser has refreshed internal clientHeight
        FB.XFBML.parse(nn,function(){setTimeout(FBUpdateSize,50)});
    };` 
```

4) and only 3 dedicated css styles:
`#social-media{position:relative;display:block;width:auto;z-index:200;overflow:hidden;height:0;
background-color:#f2f2f2;border:1px solid #bdc7d8}`
`#fb_like_bottom{padding:4px;position:absolute}`
`#fb_like_bottom .fb_iframe_widget_lift{bottom:0;background-color:#f2f2f2;border:1px solid #bdc7d8
!important;margin:-5px;padding:4px}`

You can look at an example in any of our website pages, ex, [http://www.plixo.com.sg/pipe-markers.html](http://www.plixo.com.sg/pipe-markers.html)

Feel free to reuse/modify etc, will just appreciate if you link to any of our page ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:50:36.897

您可以编辑类 pluginCommentFlyoutFull 的 CSS。该类的 top 属性可以设置为负值。您还需要为类似按钮飞出的其他 HTML 元素执行此操作。你还需要做一些 z-index 让它出现在你的主要内容包装器上。

> .pluginCommentFlyoutFull { 宽度：450px; 顶部：-157 像素；}

# c# - PictureBox-网格和填充正方形（生命游戏）

> ID：12737103
> 
> 赞同：2
> 
> 时间：2012-10-04T22:45:42.300
> 
> 标签：c#

我正在通过实现生命游戏的副本来学习 C#。我已经能够成功地在`pictureBox`使用 for 循环上绘制网格。名为的布尔值`fill_in`是填充正方形。我请求帮助使方块可点击。我已将属性属性设置`pictureBox`为允许`pictureBox_MouseClick`。在 mouseClick 事件中，我设置了坐标`x`和`y`. 问题是该事件中的 if 语句不正确，因为`==`不能应用于 bool 操作数。

`fill_in`如果 bool为真，我该如何做一个用黑色填充的 if 条件语句？

**代码**

```
 namespace life
    {
        public partial class Form1 : Form
        {

            Graphics paper;
            bool[,] fill_in = new bool[450, 450];

        public Form1()
            {
                InitializeComponent();
                paper = pictureBox1.CreateGraphics();

            }

    //makes grid in picture box
    private void drawGrid()
            {
                int numOfCells = 100;
                int cellSize = 10;
                Pen p = new Pen(Color.Blue);
                paper.Clear(Color.White);

                for (int i = 0; i < numOfCells; i++)
                {   
                    // Vertical
                    paper.DrawLine(p, i * cellSize, 0, i * cellSize, numOfCells * cellSize);
                    // Horizontal
                    paper.DrawLine(p, 0, i * cellSize, numOfCells * cellSize, i * cellSize);
                }
            }

    // populate bool fill_in with true (alive) or false (dead)
            private void clearGrid()
            {
                for (int x = 0; x < 450; x = x + 10)
                {
                    for (int y = 0; y < 450; y = y + 10)
                    {
                        fill_in[x, y] = false;
                    }
                }
            }

     private void button1_Click(object sender, EventArgs e)
            {
                drawGrid();
                clearGrid();

                for (int x = 0; x < 440; x = x + 10)
                {
                    for (int y = 0; y < 440; y = y + 10)
                    {
                        if (fill_in[x, y] == true)
                            paper.FillRectangle(Brushes.Black, x, y, 10, 10);
                    }
                }
            }

     private void pictureBox1_MouseClick(object sender, MouseEventArgs e)
            {

                int x = e.X;
                int y = e.Y;
                int i = x / 10;
                int j = y / 10;

                fill_in[i, j] = !fill_in[i, j];

                if (fill_in[i, j])
                {

                 paper.FillRectangle(Brushes.Black, x, y, 10, 10);
                }
                else
                {

                paper.FillRectangle(Brushes.White, x, y, 10, 10);       

                }

                }

                }
           } 
```

更改 if 语句后：

![在此处输入图像描述](../Images/a9abe4b82f340f05d923c5d9aa3c38d7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:53:22.697

您`if (fill_in == true)`的 in`pictureBox1_MouseClick`缺少数组下标（`fill_in`是一个数组，还记得吗？）。

但这没关系；你已经知道`fill_in[i, j]`是真的，因为你只是这样做的，所以你可以`if`完全删除。

如果您希望在第一次单击时填充它，然后取消填充（将其恢复为“未填充”），您只需稍微更改您的事件处理程序：

```
private void pictureBox1_MouseClick(object sender, MouseEventArgs e)
{
  int x = e.X;
  int y = e.Y;
  int i = x / 10;
  int j = y / 10;

  // Reverse the value of fill_in[i, j] - if it was false, change to true,
  // and if true change to false
  fill_in[i, j] = !fill_in[i, j];

  if (fill_in[i, j])
  {
    // Fill grid square with the filled color
  }
  else
  {
    // Fill grid square with unfilled color            
  }
} 
```

# microsoft-metro - 控制开始屏幕上的磁贴动画

> ID：12737105
> 
> 赞同：0
> 
> 时间：2012-10-04T22:46:23.853
> 
> 标签：microsoft-metro

我正在使用[TileSquarePeekImageAndText02](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx#TileSquarePeekImageAndText04)模板在图块上显示一些信息。现在，我相信瓷砖每 10 秒在两种*状态之间交替。*有没有办法控制这个设置？我希望它每 5 秒交换一次瓷砖。这是磁贴的 XML——

```
<tile>
  <visual>
    <binding template="TileSquarePeekImageAndText04">
      <image id="1" src="image1" alt="alt text"/>
      <text id="1">Text Field 1</text>
    </binding>  
  </visual>
</tile> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:56:48.040

不，Windows 确定并控制项目何时在“开始”屏幕上显示动画。动画在所有图块之间进行协调，以使循环、查看图块和新图块更新动画不会同时发生，从而提供更流畅的用户体验。

# php - 动态链式选择框

> ID：12737113
> 
> 赞同：0
> 
> 时间：2012-10-04T22:47:04.707
> 
> 标签：php, javascript, mysql

好的，所以我的页面上有 2 个选择框，第一个名称为“select”，并带有以下硬编码选项：

```
<select name="select" id="Testid">
        <option value="Misc">Misc...</option>
        <option value="Stunt">Stunt</option>
        <option value="deathmatches">Deathmatches</option>
        <option value="Car"> Car </option>
        <option value="Races">Races </option>
    </select> 
```

然而，第二个选择框（名为“deleteTp”）我想根据第一个选择框的选择填充一个 mysql 表。每个选项值在我的数据库中都有一个与该值同名的特定表。

我知道如何用数据库表填充第二个选择框，但是我不确定如何根据用户的选择动态地执行此操作。

请注意，我只知道基本的 javascript。

如果您想知道我为什么要这样做，那是因为第二个选择框将被发布到外部页面以从填充的表中删除行。

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:52:21.327

```
$.ajax({
  type: 'post',
  url: "ajax.php."
  data: { id:'your id here' } //your id is your select box selected id.
}).done(function() { 

}); 
```

在 php 方面：

```
$id = $_REQUEST['id']; 
$json = array();
$sql = mysql_query("select * from yourdb where id = $id");
while ($row = mysql_fetch_assoc($sql)) {
    $json[] = $row;
}
echo json_encode($json); 
```

阿贾克斯参考：`http://api.jquery.com/jQuery.ajax/`

json参考：`http://en.wikipedia.org/wiki/JSON`

# hibernate - Hibernate 拦截器 PostLoad

> ID：12737114
> 
> 赞同：1
> 
> 时间：2012-10-04T22:47:07.443
> 
> 标签：hibernate, events, orm, interceptor

我一直在将一个项目从 JPA 转移到 Hibernate 本机实现（被团队否决：<）。

我必须处理的一件美妙的事情是@PostLoad 不适用于 Hibernate 本机库。所以我google了一下。

首先，我查看了 EventListeners -> 不，配置类似乎不再允许您设置它。而当我将它注入到 cfg 文件中时，监听器仍然拒绝工作。

好的，接下来，我查看了拦截器 -> 不，没有后加载。实例化也不会传入对象本身。多么方便。

最后，我查看了 LifeCycle -> 哇，是的，它有 onLoad()，但它传入了 Session 和一个可序列化的 Id，但没有对象。好的。

无论如何，我想要的只是使用名为 onPostLoad(Object object, yadda yadda yadda) 的处理程序函数来监听后加载。有没有人有好的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:57:26.470

拦截器确实有`onLoad()`方法。你检查过吗？它的签名如下所示：

```
@Override
public boolean onLoad(Object entity, Serializable id, Object[] state,
        String[] propertyNames, Type[] types) {
    // TODO Auto-generated method stub
    return super.onLoad(entity, id, state, propertyNames, types);
} 
```

请注意，如果您更改实体中的属性，则必须返回 true，否则返回 false（例如，您只是在计算实体）。

如果您使用的是 Spring，您将像这样连接您的拦截器：

```
<bean id="sessionFactory"       class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="entityInterceptor">
        <bean class="my.company.MyInterceptor"/>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:00:22.290

一般来说，命名您所询问的事物的版本是一个好主意......

> EventListeners -> 不，配置类似乎不再让你设置它

所以你使用的是 4.x 我假设？在 4.x 中，EventListener 是在 Hibernate 4 中添加的服务基础架构的一部分。请查看[http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#integrators](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#integrators)

# api - 使用哪个？Twitter 搜索 API 与 Twitter REST API 的搜索/推文

> ID：12737115
> 
> 赞同：0
> 
> 时间：2012-10-04T22:47:07.757
> 
> 标签：api, rest, search, twitter

我正在尝试在 Twitter 上搜索 Tweets，在查看文档后，我不知道何时应该使用[Search API](https://dev.twitter.com/docs/using-search)以及何时应该使用[来自 REST API 的搜索/推文](https://dev.twitter.com/docs/api/1.1/get/search/tweets)。前者未经身份验证，后者经过身份验证 - 但除此之外，它并没有从文档中跳出我如何以不同的方式使用 2。哈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:51:56.857

根据这篇[文章](https://dev.twitter.com/docs/history-rest-search-api)，这完全取决于您要获取的内容。

> Twitter REST API 方法允许开发人员访问核心 Twitter 数据。这包括更新时间表、状态数据和用户信息。Search API 方法为开发人员提供了与 Twitter 搜索和趋势数据交互的方法。考虑到这种分离，开发人员关心的是对速率限制和输出格式的影响。

# python - Python：组合两个字符串并从中选择唯一元素

> ID：12737117
> 
> 赞同：2
> 
> 时间：2012-10-04T22:47:22.600
> 
> 标签：python, python-2.7, python-2.x

*我想说我是编程和 Python 的新手。在发布这个问题之前，我确实尝试过进行研究，但我对基础知识的缺乏无助于产生任何结果，因此需要我在这里提问。*

我有两个字符串，如下所示：

```
 str_a = "100,101,105,304"
 str_b = "400,500,101" 
```

我需要将这些字符串组合成一个，所以我使用：

```
 str_c = str_a + "," + str_b 
```

我的问题从这里开始。在这个新字符串中，元素（数字）用逗号分隔，我希望每个项目只列出一次。数字的顺序无关紧要，但如果它是上升的，那将是非常惊人的。

我能做些什么来结合这两个，让每个数字列出一次，如果可能的话，从小到大排序？

由于这些是字符串，我什至不确定我是否可以迭代？

非常感谢您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:53:52.783

尝试这个：

```
str_a = "100,101,105,304"
str_b = "400,500,101,2000"
l = str_a.split(',') + str_b.split(',')
print ','.join(sorted(set(l), key=int)) 
```

输出是：

```
100,101,105,304,400,500,2000 
```

感谢奥伦的评论！我添加`key=int`了一个额外的参数来`sorted`将列表的元素作为整数而不是字符串进行比较。此参数允许指定一个参数的函数，该函数将在列表的每个元素上调用以提取比较键。在我们的例子中，我们使用`int`将每个元素转换为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:49:24.877

您想使用 split 方法拆分字符串：

```
str_a_vals = str_a.split(",")
str_b_vals = str_b.split(",") 
```

然后做：

```
allVals = str_a_vals
allVals += str_b_vals

str_c = ",".join(set(allVals)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T23:05:41.013

如果您想做诸如排序和选择数字之类的事情，将数字存储在字符串中可能不是正确的方法。尝试使用列表，如下所示：

```
list_a = [100,101,105,304]
list_b = [400,500,101] 
```

获取组合列表的唯一元素就像

```
unique = set(list_a + list_b) 
```

并按升序排列它们是

```
ascending = sorted(list_a + list_b) 
```

# ajax - 为什么我的 WCF JSONP 服务不通过 HTTPS 返回 JSONP

> ID：12737119
> 
> 赞同：1
> 
> 时间：2012-10-04T22:47:27.397
> 
> 标签：ajax, wcf, azure, jsonp

我有一个使用 JSONP（托管在 Azure 中）的 WCF 服务。它在 HTTP 上工作得非常好，即，如果它只接收 JSON，它只返回 JSON，如果它接收 JSONP，它返回 JSONP。但是，一旦我切换到 HTTPS（仅在 Azure 中提供 HTTPS 端点），无论调用是 JSON 还是 JSONP，它都只返回 JSON。我对 HTTP 的配置是：

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
<standardEndpoints>
  <webScriptEndpoint>
    <standardEndpoint name="" crossDomainScriptAccessEnabled="true">          
    </standardEndpoint>
  </webScriptEndpoint>
</standardEndpoints>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

在服务 Global.asax 文件中，我有：

```
public class Global : System.Web.HttpApplication
{
    protected void Application_Start(object sender, EventArgs e)
    {
        RegisterRoutes(RouteTable.Routes);
    }

    void RegisterRoutes(RouteCollection routes)
    {
        routes.Add(new ServiceRoute("DirectTvService", new WebScriptServiceHostFactory(), typeof(DirectTVService.DirectTvService)));
    }       
} 
```

我想从 HTTP 更改为 HTTPS，所以我添加

```
<security mode="Transport">
</security> 
```

到标准端点标签，因此：

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
<standardEndpoints>
  <webScriptEndpoint>
    <standardEndpoint name="" crossDomainScriptAccessEnabled="true">
      <security mode="Transport">
      </security>
    </standardEndpoint>
  </webScriptEndpoint>
</standardEndpoints>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

我将 IIS7 绑定从 HTTP 更改为 HTTPS。使用此配置，服务按预期对 JSON 工作，但仅针对 JSONP 请求返回 JSON（响应未包装在回调函数中。

我的客户请求的一个示例（在 CoffeeScript 中）是：

```
$.ajax
url: callUrl
dataType: 'jsonp'
data: 
    username: $('#txtUsername').val()
    password: $('#txtPassword').val()
success: (data) =>
    $.unblockUI()
    Application.processLoginData data
    false
error: (d, msg, status) ->
    $.unblockUI()
    alert "There was a problem contacting the database. " + status
    false 
```

我的服务方法装饰有：

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json)]
public LoginResponse LoginUser(String username, String password) 
```

有任何想法吗？

库尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:53:42.853

奇怪的是，一个可行的解决方案是在 Azure 配置中同时拥有 HTTP 和 HTTPS 端点，但在我的 WCF 配置中只提供一个端点。我使用了以下 serviceModel 配置：

```
 <system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
<standardEndpoints>
  <webScriptEndpoint>
    <standardEndpoint name="" crossDomainScriptAccessEnabled="true">
    </standardEndpoint>
  </webScriptEndpoint>
</standardEndpoints>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

一切正常。一旦我删除 Azure 配置中的 HTTP 端点，JSONP 就会停止工作（只返回 JSON），如果我添加

```
<security mode="Transport">
</security> 
```

到standardEndPoint（正如我期望对HTTPS所做的那样）它也停止工作......

# jquery - jQuery Mobile 自定义选择恢复为对话框。

> ID：12737120
> 
> 赞同：1
> 
> 时间：2012-10-04T22:47:32.047
> 
> 标签：jquery, jquery-mobile

我正在使用最新版本的 jQuery mobile 1.20 Final，并且我有一个自定义选择输入，它在弹出窗口中打开，与此处的完全一样：

[http://jquerymobile.com/demos/1.2.0/docs/forms/selects/custom.html](http://jquerymobile.com/demos/1.2.0/docs/forms/selects/custom.html)

我遇到的问题是，当页面的高度小于弹出窗口时，它会打开一个对话框而不是弹出窗口。有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:21:00.543

我不知道有没有办法做到这一点。但如果它存在，它处理JQM的内部结构/代码。我可以给你一个简单的解决方案：

假设，选择弹出窗口的高度是 150px。然后像这样修改你的页面 CSS：

```
#pageId{
    height: auto;
    min-height: 160px; /* Some value greater than 150px, As I assume selectbox pop-up's height 150px*/   
} 
```

# ios - 预期表达式 else if 错误

> ID：12737121
> 
> 赞同：-1
> 
> 时间：2012-10-04T22:47:33.423
> 
> 标签：ios, xcode, if-statement

这个有点麻烦....

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
- (void)viewDidLoad
{
[super viewDidLoad];
//1
NSString *urlString = @"http://zaphod_beeblebrox.pythonanywhere.com/";
//2
NSURL *url = [NSURL URLWithString:urlString];
//3
NSURLRequest *request = [NSURLRequest requestWithURL:url];
//4
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
//5
[NSURLConnection sendAsynchronousRequest:request queue:queue
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError         *error) {
                           if ([data length] > 0 && error == nil) (UIWebView)
                        else if ((error != nil) NSLog(@"Error: %@", error))}];

}@end 
```

如果出现问题，我似乎无法弄清楚是什么原因造成的。我已经用谷歌搜索了这个废话，并一遍又一遍地检查了我的代码，但我似乎无法弄清楚这一点！

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:13:52.250

你之前问过同样的问题，[我回答](https://stackoverflow.com/a/12720171/1271826)了。我在下面重复该答案的相关部分。如果有什么不明白的地方，请在下面发表评论。

* * *

我猜您正在尝试在 ? 中加载 html 页面`UIWebView`？你显然需要一个`IBOutlet`你的`UIWebView`. （如果您不熟悉`IBOutlet`，请查看 Apple 教程[Your First iOS App](http://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOS/chapters/RM_YourFirstApp_iOS/Articles/00_Introduction.html)。）

无论如何，在下面的示例中，我将假设您的`IBOutlet`被称为`webview`，因此我可能会建议您摆脱`NSOperationQueue`and`NSUrlConnection`并`UIWebView`为您加载 html：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString     *urlString = @"http://zaphod_beeblebrox.pythonanywhere.com/";
    NSURL        *url       = [NSURL URLWithString:urlString];
    NSURLRequest *request   = [NSURLRequest requestWithURL:url];

    [self.webview loadRequest:request];
} 
```

阅读一些 iPhone 编程教程可能也值得一读（只需 google 一下，您就会获得大量点击），或者查看 Apple [App Programming Guide](http://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html)或查看[http://developer.apple.com](http://developer.apple.com)上的精彩资源.

* * *

**更新：**

顺便说一句，如果你坚持使用`NSOperationQueue`and `NSUrlConnection`，你的 webview 仍然需要一个`IBOutlet`。但是修改后的代码看起来像：

```
NSString         *urlString = @"http://zaphod_beeblebrox.pythonanywhere.com/";
NSURL            *url       = [NSURL URLWithString:urlString];
NSURLRequest     *request   = [NSURLRequest requestWithURL:url];
NSOperationQueue *queue     = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:request
                                   queue:queue
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                           if ([data length] > 0 && error == nil)
                           {
                               NSString *htmlString = [NSString stringWithUTF8String:data.bytes];
                               [self.webview loadHTMLString:htmlString baseURL:url];
                           }
                           else if (error != nil)
                           {
                               NSLog(@"Error: %@", error);
                           }
                           else
                           {
                               NSLog(@"No data returned");
                           }
                       }]; 
```

我认为`loadRequest`要简单得多，但是如果您真的想这样做，那就去吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:08:32.863

' 我正在尝试使用 uiwebview 来调出 Web 应用程序。如果您知道任何更好的方法，请告诉我！

```
[theWebView loadRequest:[NSURLRequest requestWithURL:theURL]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T23:09:24.390

您有 3 个不同的错误。首先“（UIWebView）”没有任何意义，其次，如果你有一个声明确实意味着某些东西，那么它后面需要一个分号。第三，NSLog(@"Error: %@", error) 后面应该有一个分号。为了便于阅读，最好将一些代码放在单独的行中——它应该如下所示：

```
[NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    if ([data length] > 0 && error == nil)
        ;//a valid expression here with a semicolon at the end
    else if (error != nil)
        NSLog(@"Error: %@", error);
 }]; 
```

话虽如此，您应该使用@Rob 发布的方法来使您的代码正常工作。

# ivr - 如何循环获取 VXML 中的多个动态字段

> ID：12737131
> 
> 赞同：0
> 
> 时间：2012-10-04T22:48:30.140
> 
> 标签：ivr, vxml, voicexml

如何使用开始和结束数字循环通过将输入保存到 VXML 中的数组的字段，无论是否使用 PHP？

伪代码将类似于：

```
get startNo from caller
get endNo from caller
loop i from startNo to endNo
   audio prompt 'prompt' + i + '.wav'
   save input to results[i]
end loop
save results to database at end of loop or upon hangup 
```

我知道如何获取开始和结束数字以及如何保存到数据库，这是我不确定的循环。

要求/其他说明：

*   VXML 和 PHP 的混合很好，但我更愿意将大多数 VXML 保留在 .VXML 文件中，以在我的编辑器中保持代码完成
*   最多可能有 50 个提示（根据业务要求，不要让我重新设计）
*   解决方案必须支持挂断事件，因此如果中途连接丢失，我们可以保存收集到的结果
*   独立于供应商，符合 VoiceXML 2.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:51:26.290

您的 VXML 可能如下所示：

```
<?xml version="1.0" encoding="UTF-8"?> 
<vxml version = "2.1"> 

<var name="currNo" expr="startNo"/>
<var name="userResponse"/>

<form id="getUserInput"> 

   <field name="F_1" cond="currNo <= endNo"> 
     <grammar srcexpr="currNo + '.xml'" type="application/grammar-xml"/>
     <prompt>
       <audio expr="currNo + '.wav'"/>
     </prompt>
   </field>
   <filled>
      <assign name="userReponse" expr="F_1"/>
      <goto next="#handleResponse"/>
    </filled>
</form>

<form id="handleResponse">
   <block>
      <!-- Send each result to PHP app as you get them -->
      <!-- This way you will not loose any result on error or hangup -->
      <!-- Assumes you have some user ID to associate the result with -->
      <submit next="handleUserResponse.php" namelist="userId userResponse"/>
      <!-- Increment counter -->
      <assign name="currNo" expr="currNo + 1"/>
      <!-- If the counter is greater than endNo then we are done -->
      <if cond="currNo > endNo>
         <submit next="endApplication.vxml"/>
      <!-- Otherwise we loop back to get another response -->
      <else/>
          <goto next="#getUserInput"/>
      </if>
    </block>
</form>
</vxml> 
```

这为您提供了如何处理循环和提交结果的好主意。我没有包括任何错误处理。

# android - 如何防止用户同时点击多个按钮？

> ID：12737135
> 
> 赞同：1
> 
> 时间：2012-10-04T22:49:10.030
> 
> 标签：android, buttonclick

在我的应用程序中，我有一个带有 4 个按钮的主屏幕。如果出于某种晦涩难懂的原因，用户要同时单击多个按钮，则所有目标活动都将按照它们被单击的顺序打开。

我在这里看到了一些关于类似问题的问题，但他们并没有真正回答这个问题。希望我不必重写多点触控方法来处理它。

如何避免这种行为，从而防止同时发生多个点击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:30:17.113

我在开发的应用程序中遇到了这个确切的问题。我在测试中发现，用手捣碎屏幕并同时为多个按钮触发 onClick 事件相对容易。

我对活动上的所有按钮都使用了相同的 OnClickListener。代码是这样的：

```
protected final android.view.View.OnClickListener m_clickListener = new android.view.View.OnClickListener() {

    @Override
    public void onClick(View v) 
    {
        if(!m_buttonsEnabled)
        {
            return;
        }

        switch(v.getId())
        {
            case R.layout.button1:
                    m_buttonsEnabled = false;
                    final Intent i = new Intent(MainScreenActivity.this, Button1Activity.class);
                    startActivity(i);
                }
                break;

            case R.layout.button2:
                    m_buttonsEnabled = false;
                    final Intent i = new Intent(MainScreenActivity.this, Button2Activity.class);
                    startActivity(i);
                }
                break;

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:57:41.003

您可以在原始活动中设置一个标志，并且仅当该标志设置为 false 时才打开一个新活动 - 只要您为其中一个按钮输入 onClick 事件，就将其设置为 true。

话虽如此，您真的预见到这足以证明这种骇人听闻的问题吗？

# php - PHP 在回显 HTML 时打印 HTML 符号

> ID：12737136
> 
> 赞同：0
> 
> 时间：2012-10-04T22:49:11.547
> 
> 标签：php, string, html-entities

使用 PHP 打印 HTML 时如何使用 HTML 符号？

例如：

```
<?php
   echo "<p>here is a symbol &bull;</p>";
?> 
```

这`&bull;`是子弹的 HTML 符号：[http](http://www.w3schools.com/tags/ref_symbols.asp) ://www.w3schools.com/tags/ref_symbols.asp 。

我目前看到“这是一个符号 &bull”。我希望看到“这是一个符号•”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:33:50.813

您的代码看起来根本没有问题。但是你可以做一些事情：

*   从其他地方复制项目符号，并直接将其粘贴到您的代码中（不推荐）
*   检查页面的源代码，看看你得到了什么。如果你有`&amp;bull`，那么你知道你有一个错误。尝试使用单引号或`print <<<HERE HERE;`.
*   检查您的代码是否确实如此。任何细微的变化都可能有所作为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:03:12.317

这里的问题不是您提供的这行特定代码。这可能是您的 PHP 环境的问题。您可能拥有自动翻译所有 html 实体的扩展。PHP 处理发生在服务器端。一旦您的浏览器收到代码，HTML 处理就会在客户端完成。这意味着一旦 PHP 完成它处理的结果字符串是`&amp;bull`. 您将需要查看您的 PHP 配置。要检查的一项设置`default_mimetype`是“text/html”。

# rest - 在 POST 操作期间在 Jersey 中捕获 SAXNotRecognizedException

> ID：12737140
> 
> 赞同：4
> 
> 时间：2012-10-04T22:49:27.247
> 
> 标签：rest, spring-mvc, jersey

我正在玩并将 Spring MVC REST 项目转换为使用 Jersey，并在我的一个类中使用注释

```
@ExceptionHandler(HttpMessageNotReadableException.class) 
```

它将在 XML 消息的反序列化期间捕获任何异常。通过这种方式，我可以检测到用户何时在 POST 请求中发送了错误的 XML，并返回 XML 错误响应，而不是 400/500 标准 HTML 错误页面。

泽西岛有类似的东西吗？我尝试创建一个异常映射类

```
@Provider
public class HttpMessageNotReadableException 
      implements ExceptionMapper<org.xml.sax.SAXNotRecognizedException> { 
```

但这似乎没有捕捉到任何即将到来的错误，就在我从资源类内部抛出异常时。

所以我想让我的方法获取字符串并进行反序列化并捕获任何错误：

```
@POST
@Path("/product")
public Response createProduct(String createRequest) {
      try {
         // de-serialize
         // do work ...
      } catch ... 
```

代替

```
@POST
@Path("/product")
public Response createProduct(CreateProduct createRequest) {
    // do work ... 
```

但这似乎不对，只会用相同的错误检查污染我所有的课程。

我还阅读了有关使用实现我自己的阅读器的信息

```
@Provider
class MyXmlReader implements MessageBodyReader { 
```

但这似乎是在重新发明轮子，因为 JAXB 已经在进行反序列化，我只想抓住错误。

任何人都知道是否有更好的方法来捕获糟糕的传入 XML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:39:25.790

Jersey 使用与 Spring 完全相同的`@Provider`方法（在 JAX-RS 中定义）。我不知道 Spring 是如何 un/marshall 对象的，但 Jersey 默认使用 JAXB 处理 XML 和 JSON（如果你告诉它，它可以使用 Jackson 处理 JSON）。

您是否尝试过捕获 JAXB 异常？

```
import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;
import javax.xml.bind.JAXBException;

@Provider
public class JAXBExceptionMapper implements ExceptionMapper<JAXBException> {
    public Response toResponse(JAXBException exception) {
        return Response.status(Status.BAD_REQUEST).build();
    }
} 
```

# java - 保持对传递给超级构造函数的新对象的引用

> ID：12737141
> 
> 赞同：10
> 
> 时间：2012-10-04T22:49:42.297
> 
> 标签：java, constructor, field, super

有没有一种好方法来维护对在构造函数中创建的对象的引用，该对象需要传递给某些扩展类的超级构造函数（除了使其可以从超类访问或将其作为参数传递给构造函数）？

让我用一个例子来澄清一下。参加这个课程（我无法修改，也无法访问 foo）：

```
class TestA {
    TestA(Object foo) {}
} 
```

现在，我想扩展这个类如下：

```
class TestB extends TestA {
    Object myCopyOfFoo;

    TestB() {
        super(new Object());
    }
} 
```

有没有好的方法来存储创建`new Object()`的`myCopyOfFoo`？

这三个想法都不起作用：

```
TestB() {
    myCopyOfFoo = new Object();
    super(myCopyOfFoo);
} 
```

（错误：构造函数调用必须是构造函数中的第一条语句）

```
TestB() {
    super(myCopyOfFoo = new Object());
} 
```

（错误：在显式调用构造函数时无法引用实例字段 myCopyOfFoo）

```
TestB() {
    super(makeFoo());
}

Object makeFoo() {
    myCopyOfFoo = new Object();
    return myCopyOfFoo;
} 
```

（错误：在显式调用构造函数时无法引用实例方法）

我想我可以执行以下操作，但它既不是线程安全的也不是优雅的：

```
static Object tempFoo;

TestB() {
    super(tempFoo = new Object());
    myCopyOfFoo = tempFoo;
} 
```

有人对我有更好的主意吗？为什么我的前两个想法不合法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-04T22:51:25.960

怎么样：

```
class TestB extends TestA {
    Object myCopyOfFoo;

    // I assume you actually wanted this to take a parameter called foo?
    // I've left it as per the question...
    TestB() {
        this(new Object());
    }

    private TestB(Object copy) {
        super(copy);
        myCopyOfFoo = copy;
    }
} 
```

由于第二个构造函数是私有的，它只能在同一个类（或封闭类）中调用，因此您只需要确保调用第二个构造函数的任何内容都像第一个构造函数一样制作了适当的副本。

编辑：如果您的*实际*情况是您正在获取现有参数的副本，那么这将起作用......

```
class ClassB extends ClassA {
    private final Foo copyOfInput;

    ClassB(Foo input) {
        super(input = input.clone());
        copyOfInput = input;
    }
} 
```

虽然很丑:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T09:39:31.147

另外的选择：

```
public class TestB extends TestA {

    Object myCopyOfFoo;

    private TestB(Object foo) {
        super(foo);
        myCopyOfFoo = foo;
    }

    public static TestB createInstance() {
        Object foo = new Object();
        return new TestB(foo);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:54:39.173

以下情况如何：

```
class TestB extends TestA {
    Object myCopyOfFoo = new Object();

    TestB() {
        super(myCopyOfFoo);
    }
} 
```

该对象只会在创建新对象TestB时被初始化，所以本质上这会做你想要的吗？

# javascript - 如何执行包含在字符串中的函数？

> ID：12737144
> 
> 赞同：1
> 
> 时间：2012-10-04T22:50:02.293
> 
> 标签：javascript, greasemonkey

我正在编写一个 Greasemonkey 脚本，我有一个字符串（称为“link_onclick”），我从包含`onclick`页面上所有 s 的数组中提取该字符串。
这些字符串之一的示例是：

```
function onclick(event) { return fsb8777307('088');} 
```

如何运行 link_onclick ？

我这里只需要这段代码

```
return fsb8777307('088'); 
```

执行。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:52:17.163

如果要执行字符串，请使用 eval... [http://www.w3schools.com/jsref/jsref_eval.asp](http://www.w3schools.com/jsref/jsref_eval.asp)

或者

```
var myCode = 'code goes here';
 var myFunction = new Function(myCode);
 myFunction(); 
```

这可能更清洁

要选择要执行的代码的哪些部分，您需要在 { 之后和 } 之前获取子字符串

您可以使用正则表达式或旧的 indexOf [http://www.w3schools.com/jsref/jsref_indexof.asp](http://www.w3schools.com/jsref/jsref_indexof.asp)和 subString

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T02:26:13.567

您将使用以下命令运行该代码：

```
unsafeWindow.fsb8777307('088'); 
```

但另请参阅[Greasemonkey 文档的这一页](http://wiki.greasespot.net/Generate_Click_Events)。

# r - 根据同一 df 中的另一列将值分配给 df$column

> ID：12737146
> 
> 赞同：0
> 
> 时间：2012-10-04T22:50:15.180
> 
> 标签：r

```
df2 <- data.frame(Mean = c(.5,4,2.3,1.2,3.7,3.3,.8), Numbers = "NA")

for(i in 1:length(df2$Mean)){
        if(df2$Mean[i] <= .5) {
        df2$Number[i] = 0
        }           
        else if(df2$Mean[i] > .5 & df2$Mean[i] < 1.5){
        df2$Number[i] = 1
        }
        else if(df2$Mean[i] > 1.5 & df2$Mean[i] < 2.5){
        df2$Number[i] = 2
        }
        else if(df2$Mean[i] > 2.5 & df2$Mean[i] < 3.5){
        df2$Number[i] = 3
        }
        else {
        df2$Number[i] = 4
        }
    } 
```

这行得通！但是，当我尝试从中创建一个函数并调用该函数时，它不起作用。我将函数文件保存为“df2type.txt”：

```
type <- function(df2){
for(i in 1:length(df2$Mean)){
        if(df2$Mean[i] <= .5) {
        df2$Number[i] = 0
        }
        else if(df2$Mean[i] > .5 & df2$Mean[i] < 1.5){
        df2$Number[i] = 1
        }
        else if(df2$Mean[i] > 1.5 & df2$Mean[i] < 2.5){
        df2$Number[i] = 2
        }
        else if(df2$Mean[i] > 2.5 & df2$Mean[i] < 3.5){
        df2$Number[i] = 3
        }
        else {
        df2$Number[i] = 4
        }
}
} 
```

我将函数调用为：

```
source("df2type.txt")
type(df2) 
```

你能告诉我为什么这个功能不起作用吗？

太感谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:24:04.787

`genotype``AllSamples`更改存在于函数内部的副本。当此函数结束时，该内部副本将被销毁（连同您对其所做的更改）；它的原始版本（很可能在您的全局工作区中）没有改变。如果你让你的函数返回`AllSamples`，然后用返回值覆盖原始函数，那将起作用。

```
genotype <- function (AllSamples){
    for(i in 1:length(AllSamples$Mean.Regression)){
        ...
    }
    AllSamples
} 
```

然后它会被称为

```
AllSamples <- genotype(AllSamples) 
```

更惯用的方法是不更改 中的 data.frame `genotype`，而只是创建新列（作为向量），将其返回，并将其分配给`AllSamples`.

```
genotype <- function (AllSamples){
    CopyNumber <- rep(0, length(AllSamples$Mean.Regression))
    for(i in seq_along(AllSamples$Mean.Regression)){
        if(AllSamples$Mean.Regression[i] < .5) {
            CopyNumber[i] <- 0
        } else if(AllSamples$Mean.Regression[i] > .5 & AllSamples$Mean.Regression[i] < 1.5) {
            CopyNumber[i] <- 1
        } else if(AllSamples$Mean.Regression[i] > 1.5 & AllSamples$Mean.Regression[i] < 2.5) {
            CopyNumber[i] <- 2
        } else if(AllSamples$Mean.Regression[i] > 2.5 & AllSamples$Mean.Regression[i] < 3.5) {
            CopyNumber[i] <- 3
        } else {
            CopyNumber[i] <- 4
        }
    }
    CopyNumber
} 
```

这将被称为

```
AllSamples$CopyNumber <- genotype(AllSamples) 
```

真正做到这一点的方法是使用矢量化函数而不是显式循环。

```
genotype <- function(AllSamples) {
    cut(AllSamples$Mean.Regression,
        breaks = c(-Inf, 0.5, 1.5, 2.5, 3.5, Inf),
        labels = FALSE) - 1
} 
```

你称之为

```
AllSamples$CopyNumber <- genotype(AllSamples) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T22:56:31.003

```
df$Number <- findInterval( df$Mean, c( seq(0.5, 3.5, by=1) , Inf) ) 
```

您的定义未涵盖 df$Mean = 3.5 的极端情况。我的方法给它一个4。

该`findInterval`函数实际上做的事情与该`cut`函数非常相似，除了它返回一个数值而不是一个因子。它设置了一堆间隔，并告诉您每个项目将落入哪个间隔。

# node.js - 创建一个接受参数的 expressjs 中间件

> ID：12737148
> 
> 赞同：138
> 
> 时间：2012-10-04T22:50:27.693
> 
> 标签：node.js, express

我正在尝试创建一个可以接受参数的中间件。如何才能做到这一点？

例子

```
app.get('/hasToBeAdmin', HasRole('Admin'), function(req,res){

})

HasRole = function(role, req, res, next){
   if(role != user.role){
      res.redirect('/NotInRole);
   }

   next();
} 
```

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-10-04T23:07:37.917

```
function HasRole(role) {
  return function(req, res, next) {
    if (role !== req.user.role) res.redirect(...);
    else next();
  }
} 
```

我还想确保我不会制作同一函数的多个副本：

```
function HasRole(role) {
  return HasRole[role] || (HasRole[role] = function(req, res, next) {
    if (role !== req.user.role) res.redirect(...);
    else next();
  })
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-04T23:20:39.857

```
app.get('/hasToBeAdmin', (req, res, next) => {
  hasRole(req, res, next, 'admin');
}, (req,res) => { 
    // regular route 
});

const hasRole = (req, res, next, role) => {
   if(role != user.role){
      res.redirect('/NotInRole');
   }
   next();
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-20T06:30:02.383

或者，如果您没有太多案例或角色不是字符串：

```
function HasRole(role) {
  return function (req, res, next) {
    if (role !== req.user.role) res.redirect(/* ... */);
    else next();
  }
}

var middlware_hasRoleAdmin = HasRole('admin'); // define router only once

app.get('/hasToBeAdmin', middlware_hasRoleAdmin, function (req, res) {

}) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-10-02T01:38:14.577

我使用这个解决方案。我在正文 req 中收到一个 jwt 令牌，并从那里获取角色信息

```
//roleMiddleware.js

const checkRole = role => {

    return (req, res, next) => {
        if (req.role == role) {
            console.log(`${role} role granted`)
            next()
        } else {
            res.status(401).send({ result: 'error', message: `No ${role} permission granted` })
        }
    }
}

module.exports = { checkRole } 
```

所以首先我使用 auth 中间件来知道是否是一个有效的用户，然后使用角色中间件来知道用户是否可以访问 api 路由

```
// router.js

router.post('/v1/something-protected', requireAuth, checkRole('commercial'), (req, res) => {
    // do what you want...
}) 
```

我希望有用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-24T15:01:31.180

如果你有不同的权限级别，你可以像这样构造它们：

```
const LEVELS = Object.freeze({
  basic: 1,
  pro: 2,
  admin: 3
});

/**
 *  Check if user has the required permission level
 */
module.exports = (role) => {
  return (req, res, next) => {
    if (LEVELS[req.user.role] < LEVELS[role]) return res.status(401).end();
    return next();
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-21T08:05:43.847

既然我们在 2021 年，为什么不使用 ES6 语法？...使用 NodeJS v14.16.1，下面的示例就像一个魅力:-)

**使用快速路由器**

```
const someFunc = ({ option1, option2 }) =>
 router.get("/", (req, res, next) => {

 // code

 next();
});

module.exports = someFunc; 
```

**或者**

```
const someFunc = ({ option1, option2 }) =>
     (req, res, next) => {

     // code

     next();
    };

 module.exports = someFunc; 
```

...然后将其称为：

```
const someFunc = require('./middlewares/someFunc.js');
app.use(someFunc({option1: 'test', option2: false )); 
```

# android - 从 SL4A 脚本启动 android 应用程序？

> ID：12737150
> 
> 赞同：6
> 
> 时间：2012-10-04T22:50:56.397
> 
> 标签：android, python, sl4a

我在 /sdcard/sl4a/scripts/twitter.py 中有以下内容

```
import android
droid = android.Android()
droid.launch('com.twitter.android') 
```

如果我在控制台或后台运行它，它会立即以代码 1 退出，并且日志文件为空。

如果有其他方法可以从某种脚本启动应用程序，我愿意接受建议。我知道Tasker，但我宁愿编写文本脚本也不愿使用向导。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T19:37:03.877

你可以使用**`startActivity`**：

```
导入安卓
机器人 = android.Android()
droid.startActivity('android.intent.action.MAIN',
                    无，无，无，假，
                    'com.twitter.android',
                    'com.twitter.android.StartActivity'
                   )
```

[请参阅API 参考中](http://code.google.com/p/android-scripting/wiki/ApiReference#startActivity "这里")的语法：

```
开始活动（
   字符串动作，
   字符串 uri[可选],
   字符串类型[可选]：URI 的 MIME 类型/子类型，
   JSONObject extras[可选]：要添加到 Intent 的附加项映射，
   Boolean wait[可选]：阻塞直到用户退出启动的活动，
   String packagename[可选]：包名。如果使用，需要类名才有用，
   String 类名[可选]：类名。如果使用，需要 packagename 才有用）
```

# typescript - 如何重构类型注释？

> ID：12737154
> 
> 赞同：1
> 
> 时间：2012-10-04T22:51:03.293
> 
> 标签：typescript

假设我正在定义一个模块，并且我有一些这样的函数定义：

```
export function bodyParser(options?:any): 
  (req: ExpressServerRequest, res: ExpressServerResponse, next) =>void;
export function errorHandler(opts?:any): 
  (req: ExpressServerRequest, res: ExpressServerResponse, next) =>void;
export function methodOverride(): 
  (req: ExpressServerRequest, res: ExpressServerResponse, next) =>void;
export function favicon(url: string, opts? ): 
  (req: ExpressServerRequest, res: ExpressServerResponse, next) =>void;
export function logger(type: string, opts? ): 
  (req: ExpressServerRequest, res: ExpressServerResponse, next) =>void; 
```

我反复使用这个返回类型注释：

```
(req: ExpressServerRequest, res: ExpressServerResponse, next) =>void 
```

有没有办法定义那个类型，给它一个名字，然后只引用这个名字而不是重复同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T22:56:39.107

是的！您可以使用带有调用签名的接口：

```
interface MyCallSignature {
    (req: ExpressServerRequest, res: ExpressServerResponse, next): void;
} 
```

现在你可以像这样使用它：

```
export function bodyParser(options?: any): MyCallSignature 
```

# javascript - 快速移动鼠标时在谷歌地图上拖动标记中断

> ID：12737160
> 
> 赞同：1
> 
> 时间：2012-10-04T22:51:56.340
> 
> 标签：javascript, google-maps, google-maps-api-3, drag-and-drop, google-maps-markers

**我在谷歌地图上有一个标记**。我使用这个标记来检索坐标并更新表格中的纬度和经度。当**用户放下标记**时，我读取坐标。我的代码如下：

```
 $wnd.marker = new google.maps.Marker(
            {
                map : $wnd.map,
                draggable : true,
                icon : "/gmapsMarker.png",
                iconShadow : "/gmapsMarkerShadow.png",
                position : defaultPosition,
                clickable : true
            });

    var toggleBounce = function(e) {
        var lat = $wnd.marker.position.lat();
        var lng = $wnd.marker.position.lng();
        update(lat,lng,false);
    }.bind(this);

    google.maps.event.addListener($wnd.marker, 'dragend', toggleBounce); 
```

问题是什么？

*奇怪的是，在Internet Explorer 7,8 和 9*中没有问题。

在*chrome*和*firefox*中，我在拖动标记时遇到了一些问题。如果我**将鼠标移动得太快**以至于指针超出了标记的边界框，**则标记会卡住**。我需要释放鼠标点击，再次拖动 de 标记并将其缓慢放到我最喜欢的位置。

有什么推荐吗？

我尝试了事件“mouseup”，结果相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:20:13.663

这可能会帮助你

```
google.maps.event.addListener($wnd.marker, 'dragend', function() {
    // Get the Current position, where the pointer was dropped
    var point = $wnd.marker.getPosition();
    // Center the map at given point
    $wnd.map.panTo(point);
    // Update
    update(point.lat(), point.lng(),false);
}); 
```

[**你可能会喜欢这个**](http://heera.it/dynamic-google-map)（你可以下载demo，只有8kb，[直接下载链接](http://heera.it/downloads/google_dynamic_map.zip)）。

# android - 如何获取静态IP地址？

> ID：12737162
> 
> 赞同：-2
> 
> 时间：2012-10-04T22:52:01.470
> 
> 标签：android, xampp, localhost, static-ip-address

我正在为我的一门大学课程构建一个 android 应用程序。我有一个使用 xampp 在我的笔记本电脑上运行的 localhost 服务器。我手机上运行的 android 应用程序必须连接到 localhost 才能从 MySQL 数据库中获取数据（通过 php 脚本）。我在代码中使用 HTTPClient 连接到服务器。代码工作正常，但因为我的 ip 地址发生变化，我需要不断更改 HTTPpost 中的 url。我的问题是如何获得静态 IP 地址？我需要在任何地方工作，例如我将在家里编码和测试，但我最终必须在大学展示一个有效的应用程序。这是我的 HTTP 代码：

```
private String[] url = new String[] { "http://172.24.25.204:80/comp5615/select.php" };
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url[0]);
ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
        try {
            httpPost.setEntity(new UrlEncodedFormEntity(param));
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            //read content
            is =  httpEntity.getContent();  
            result = convertStreamToString(is);
        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection "+e.toString());
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:40:59.113

您的问题与android无关，它与如何获取静态IP地址有关，以便您的本地PC可以充当服务器，您可以随时随地连接。

回到我在我的电脑上托管几个测试网站的日子里，我遇到了同样的问题。而且我正在使用 no-ip.com 服务来进行全时连接。还有 dyn.com 和 opendns.com

基本上你要做的是安装他们的软件并在你的系统中保持活跃，而不是连接到他们的服务器，他们会给你 ip 或子域名，你用它来连接你的动态 ip。他们的软件始终与您的 ip 通信，即使 ip 更改，您的服务器也能保持在线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T07:49:18.523

```
you can get Static IP Address in browser as well as programmability in application. 
this is url return the static IP adress 
```

[“http://api.exip.org/?call=ip”](http://api.exip.org/?call=ip)

```
in android normally we request above mention url and getting response  of it 
```

# java - Java 程序，通过套接字接口与邮件服务器建立 TCP 连接并发送电子邮件

> ID：12737166
> 
> 赞同：2
> 
> 时间：2012-10-04T22:52:33.713
> 
> 标签：java, sockets, email, tcp

我正在编写一个 Java 程序，它通过套接字接口与邮件服务器建立 TCP 连接，并发送电子邮件消息。我遇到的问题是，当我在命令行上运行它时，它会在写入“MAIL FROM：”后停止。我没有收到任何错误，它只是在那一点停止。我不知道我做错了什么，所以任何帮助将不胜感激

```
import java.io.*;
import java.net.*;

public class EmailSender{

public static void main(String[] args) throws Exception{

    // Establish a TCP connection with the mail server.
     Socket socket = new Socket("" + "hostname", 25);
    // Create a BufferedReader to read a line at a time.
    InputStream is = socket.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);

    // Read greeting from the server.
    String response = br.readLine();
    System.out.println(response);
    if (!response.startsWith("220")) {
        socket.close();
        throw new Exception("220 reply not received from server.");
    }

    // Get a reference to the socket's output stream.
    OutputStream os = socket.getOutputStream();

    // Send HELO command and get server response.
    String command = "HELO alice\r\n";
    System.out.print(command);
    os.write(command.getBytes("US-ASCII"));
    response = br.readLine();
    System.out.println(response);
    if (!response.startsWith("250")) {
        socket.close();
        throw new Exception("250 reply not received from server.");
    }

    // Send MAIL FROM command.
    String mailFrom = "MAIL FROM: <email>";
    System.out.print(mailFrom);
    os.write(mailFrom.getBytes("US-ASCII"));
    response = br.readLine();
    System.out.println(response);
    if (!response.startsWith("250")) {
        socket.close();
        throw new Exception("250 reply not received from server.");
    }

    // Send RCPT TO command.
    String commandRCPT = "RCPT TO: <email>";
    System.out.print(commandRCPT);
    os.write(commandRCPT.getBytes("US-ASCII"));
    response = br.readLine();
    System.out.println(response);
    if (!response.startsWith("250")) {
        socket.close();
        throw new Exception("250 reply not received from server.");
    }

    // Send DATA command.
    String commandDATA = "DATA";
    System.out.print(commandDATA);
    os.write(commandDATA.getBytes("US-ASCII"));
    response = br.readLine();
    System.out.println(response);
    if (!response.startsWith("354")) {
        socket.close();
        throw new Exception("354 reply not received from server.");
    }

    // Send message data.
    String msgLine1 = "email sent";
    System.out.print(msgLine1);
    os.write(msgLine1.getBytes("US-ASCII"));

    // End with line with a single period.
    String msgLine2 = ".";
    System.out.print(msgLine2);
    os.write(msgLine2.getBytes("US-ASCII"));
    response = br.readLine();
    System.out.println(response);
    if (!response.startsWith("250")) {
        socket.close();
        throw new Exception("250 reply not received from server.");
    }

    // Send QUIT command.
    String commandQUIT = "QUIT";
    System.out.print(commandQUIT);
    os.write(commandQUIT.getBytes("US-ASCII"));
    response = br.readLine();
    System.out.println(response);
    if (!response.startsWith("221")) {
        socket.close();
        throw new Exception("221 reply not received from server.");
    }

    socket.close();
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T22:57:00.437

你正在写`"MAIL FROM: <johnstoy@uwindsor.ca>"`，但最后没有换行。`HELO`请注意这与您发送的命令之间的区别。

来自[RFC 2821](http://www.ietf.org/rfc/rfc2821.txt)，第 2.4.7 节：

> SMTP 命令和消息数据（除非被服务扩展更改）以“行”的形式传输。行由零个或多个数据字符组成，以序列 ASCII 字符“CR”（十六进制值 0D）结尾，紧接着是 ASCII 字符“LF”（十六进制值 0A）。

您没有终止命令，因此服务器仍在等待更多数据。

顺便说一句，你的其余命令有同样的问题。

（当然，您确实*应该*使用诸如 JavaMail 之类的邮件库，除非这纯粹是出于教育目的。）

# function - 使用累加器的 Haskell 递归

> ID：12737167
> 
> 赞同：3
> 
> 时间：2012-10-04T22:52:36.537
> 
> 标签：function, haskell, recursion, accumulator

我正在尝试创建一个函数，该函数将在给定列表的情况下查找 3 个相同和相邻的数字，用于我正在尝试实现的求解器。然后，如果有3个相同和相邻的数字，它将第1个和第3个相同的数字标记为'0'，并将中间值设置为负数。

我想知道为什么这给了我一个错误。：

```
change xs = chnge xs []
    where
    chnge xs acc
        | length xs <= 2 = [acc]
        | (head xs == xs !! 1) && (head xs == xs !! 2) = [0, (xs !! 1)*(-1), 0] ++ tail xs
        | otherwise = chnge (tail xs) (acc ++ head xs) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T23:33:59.200

由于`acc`是一个列表，我们不想`[acc]`在 的第一个守卫中返回`chnge`，而只是`acc`; 同样在`otherwise`你不想要的那一行中`acc ++ head xs`，这意味着它`xs`是一个列表列表——它的第一个成员怎么可能是可附加的？而是`acc ++ [head xs]`所以也许：

```
change xs = chnge xs [] where
  chnge xs acc
        | length xs <= 2 = acc
        | (head xs == xs !! 1) && (head xs == xs !! 2) = [0, (xs !! 1)*(-1), 0] ++ tail xs
        | otherwise = chnge (tail xs) (acc ++ [head xs]) 
```

这似乎有点不对劲，但真正的问题是缺乏“模式匹配”以及 , 和 的`head`危险`tail`使用`!!`。尝试更多类似的东西，也许？（虽然它不使用累加器）：

```
change []     = []
change [x]    = [x]
change [x,y]  = [x,y]
change (x:y:z:ws) | x == y && y == z = 0 : (-y) : 0 : change ws
change (x:xs) =  x : change xs

--  *Main> change [12,12,66,66,66,44,44,99,99,99,76,1]
--  [12,12,0,-66,0,44,44,0,-99,0,76,1] 
```

连续三个的情况可以被认为是一种模式，因此我们为它们相等的情况做一个特殊的情况。

# ruby-on-rails - 是否可以建立黄瓜场景的优先级？

> ID：12737168
> 
> 赞同：0
> 
> 时间：2012-10-04T22:52:59.180
> 
> 标签：ruby-on-rails, cucumber

我必须测试一个生成大量信息的网页。

它只是一个功能，但它有几个必须测试的面板和内容。

我打算把它分成几个场景，每个场景测试页面的一个单独部分。

尽管如此，有 4 个场景必须通过，所以我可以测试其余的场景（如果其他 4 个场景中的任何一个失败，它们都会失败）。

我想知道是否可以在相同功能的场景之间建立依赖关系或优先级。如果前 4 个中的一个失败，我希望 cucumber 停止运行其余的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:08:21.323

我还没有找到一种方法来决定首先运行哪些测试。我们有一个脚本来运行测试，然后你可以说你有一组测试标记为例如@smoke 如果这些测试的运行失败，那么我们将不会运行脚本中的下一个命令。

例如，当从 Jenkins 运行时，您可以让作业运行两个脚本，第一个只运行带有 @Smoke 标记的测试。如果这些都失败了，那么 CI 服务器将不会继续运行第二组测试

# c++ - 将 std::find 与自定义 Book 类一起使用

> ID：12737171
> 
> 赞同：1
> 
> 时间：2012-10-04T22:53:04.127
> 
> 标签：c++, algorithm, stdvector

这是我的主要内容：

```
#include <iostream>
#include <vector>
#include "Book.h"

using namespace std;

vector<Book> removeDuplicates(vector<Book> oldbookvector)
{
    vector<Book> newbookvector;
    vector<string> booknames;

    for(vector<Book>::size_type i = 0; i < oldbookvector.size(); i ++){
        booknames.push_back(oldbookvector[i].bookname());
    }

    vector<Book>::iterator it;
    for(vector<Book>::size_type i = 0; i < oldbookvector.size(); i ++){
        //If it find a value then it returns the first element
        it = find(newbookvector.begin(),newbookvector.end(), oldbookvector[i]);
        if(it == newbookvector.end()){
            booknames.push_back(oldbookvector[i].bookname());
        }
    }

    return newbookvector;
}

int main(int argc, const char * argv[])
{
    vector<Book> books;
    vector<Book> newbooks;

    books.push_back(Book("The C Programming Language", 1980));
    books.push_back(Book("Javascript: The Good Parts", 2008));
    books.push_back(Book("Accelerated C++: Pratical Programming by Example", 2000));
    books.push_back(Book("Scala for the Impatient", 2012));
    books.push_back(Book("The C Programming Language", 1980));
    books.push_back(Book("Javascript: The Good Parts", 2008));
    books.push_back(Book("Accelerated C++: Pratical Programming by Example", 2000));
    books.push_back(Book("Scala for the Impatient", 2012));

    cout << &books[2] << endl;
    cout << books[2].bookname() << endl;

    //Test to make sure book class was working
    Book stuff = Book("The Book about stuff", 1998);
    cout << stuff.bookname() << endl;
    cout << stuff.bookyear() << endl;

    stuff.printBook();

    //newbooks = removeDuplicates(books);

    //Print out the vector without duplicates
    for(vector<Book>::size_type i = 0; i < newbooks.size(); i ++){
        cout << newbooks[i].bookname() << newbooks[i].bookyear() << "\t";
    }

    return 0;
} 
```

我在 algorithm.cc 中不断收到错误消息，显示“二进制表达式的操作数无效（'Book' 和 'const Book'）”。我认为它来自 find()。我很确定问题是迭代器没有遍历书籍

这是我的书课

```
#ifndef Question2_Book_h
#define Question2_Book_h
using namespace std;

class Book{
public:
    Book();

    Book(string n, int y){
        name = n;
        year = y;
    }

    string bookname(){
        return name;
    }
    int bookyear(){
        return year;
    }

    void printBook(){
        cout << name << ", " << year << endl;
    }

private:
    string name;
    int year;
};
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:07:26.380

*   `std::find`位于`<algorithm>`所以首先你应该包括那个标题。

*   为了找到 a `Book`，您需要定义`operator==`(`std::find`使用它来确定是否`Book`找到 a )，否则您如何知道是否找到了 a `Book`？

**例子**

```
bool operator==(const Book& b1, const Book& b2)
{
    // 2 books are equal if they have the same name, you could also compare years
    // if you want
    return b1.bookname() == b2.bookname();
} 
```

另外，请注意我正在使用`const`. 为了使用上述内容，您需要修复代码的一部分（注意我添加了一个`const`）：

```
string bookname() const {
     return name;
} 
```

# apache - Apache2 WSGI 日志记录都显示为错误

> ID：12737173
> 
> 赞同：0
> 
> 时间：2012-10-04T22:53:17.690
> 
> 标签：apache, logging, python-2.7, mod-wsgi, apache2.2

这可能只是一个简单设置的疏忽，但我的 apache 错误日志一直是这样填充的：

```
[Thu Oct 04 19:23:12 2012] [error] INFO:render.image_utils:aggdraw not available, using PIL native 
```

出现了几个这样的日志，但这里是这个的代码：

```
log = logging.getLogger("render.image_utils")
try:
    import aggdraw
    log.info("using aggdraw for point rendering")
except:
    log.info("aggdraw not available, using PIL native") 
```

我希望它将消息分类为 apache 日志中的信息，而不是其后带有单词 INFO 的错误。我需要什么才能使此日志记录正常工作？如果还有什么我需要提供的，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:30:47.133

你无法改变这一点。Python 日志记录模块一无所知，也无权访问用于在特定日志级别记录消息的 C 级 Apache API。它所能做的就是将日志输出发送到标准错误，标准错误会以错误级别路由到 Apache 日志系统。

换句话说，除非您要为 Python 编写一个特殊的 C 扩展模块，它可以挂钩到 Apache C 级别 API 进行日志记录，否则这是您必须忍受的限制。

# php - MySQL 选择在 WHERE IN() 中使用

> ID：12737176
> 
> 赞同：0
> 
> 时间：2012-10-04T22:53:27.457
> 
> 标签：php, mysql, has-many

***大家好。***

例如，我有两张桌子；

表名称 X

```
________________
| id |    A    | 
|____|_________|
| 1  | 1,2,4,8 |
|____|_________| 
```

此查询正在另一个表 Y 中工作，

```
 mysql_query(" Select * from Y where id IN(1,2,4,8) ") 
```

但这不起作用，

```
 mysql_query(" Select * from Y where id IN(Select A from X where id=1) ") 
```

我能做些什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:12:55.620

更好的表格设计是：

```
table X:
--------
id int
someid int 
```

表中的值为：

```
id  someid
--  --------
1   1
2   1
4   1
8   1 
```

您的查询可能是`mysql_query(" Select * from Y where id IN(Select id from X where someid=1")`.

回答你的问题——你似乎是从 PHP 或类似的东西查询。使用您拥有的表结构，您可以使用从表 X 中检索值`mysql_query("Select A from X where id=1")`并将结果存储在变量中。然后，您可以执行第二个查询，`mysql_query(" Select * from Y where id IN(" + yourVar + ") ")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:22:11.053

这是一个“有很多”关系，所以你应该有一个中间连接表。这种结构的好处在于插入和删除。在您要从 A 追加或删除的结构中，您需要拉出记录，更改值并将其写回（或者可能编写一个过程）。

```
 X       
_________
|  id   |
|_______|
|  1    | 
|_______|               

    Y
_________
|  id   |
|_______|
|  1    | 
|_______|   
|  2    | 
|_______|   
|  3    | 
|_______|   

    X_Y
____________________________
|  id   |  x_id  |    y_id |
|_______|________|_________|
|  1    |   1    |    1    |
|_______|________|_________|  
|  2    |   1    |    2    |
|_______|________|_________|
|  3    |   1    |    3    |
|_______|________|_________|

SELECT * FROM Y INNER JOIN X_Y ON Y.id=X_Y.y_id WHERE X_Y.x_id=1

or

SELECT * FROM Y WHERE id IN (SELECT y_id FROM X_Y WHERE x_id=1) 
```

# iphone - 我将如何在我的网络服务器上生成 Pass，然后在 Xcode 中下载它。

> ID：12737177
> 
> 赞同：-1
> 
> 时间：2012-10-04T22:53:29.047
> 
> 标签：iphone, ios, xcode, passbook

我将如何在我的网络服务器上生成 Pass，然后在 Xcode 中下载它。在 xcode 上，我正在尝试生成通行证，然后将其添加到我的存折钱包中。代码：

```
NSString* passFile = @"http://pass.keatonburleson.com/gen.php?name=128keaton";

//3
NSData *passData = [NSData dataWithContentsOfFile:passFile];

//4
NSError* error = nil;
PKPass *newPass = [[PKPass alloc] initWithData:passData
                                         error:&error];
//5
if (error!=nil) {
    [[[UIAlertView alloc] initWithTitle:@"Passes error"
                                message:[error
                                         localizedDescription]
                               delegate:nil
                      cancelButtonTitle:@"Ooops"
                      otherButtonTitles: nil] show];
    return;
}

//6
PKAddPassesViewController *addController =
[[PKAddPassesViewController alloc] initWithPass:newPass];

   [self presentViewController:addController
                   animated:YES
                 completion:nil]; 
```

所以基本上，我的错误是“跟踪”并崩溃。更新：感谢 Caleb，不再出现跟踪错误！不幸的是，我收到“通过无效错误！” :( 最新和更新的代码：

```
 NSString* passFile = @"http://pass.keatonburleson.com/gen.php?name=128keaton";
 NSURL *url = [NSURL URLWithString:passFile];
//3
NSData *passData = [NSData dataWithContentsOfURL:url];

//4
NSError* error = nil;
PKPass *newPass = [[PKPass alloc] initWithData:passData
                                         error:&error]; 
```

BG信息：

我的网络服务器包含一个 PHP 脚本，它生成一个 passkit 通行证并像 PkPass 一样显示它以供下载。如果您使用的是 Mac 或 iPhone，您可以转到 passFile URL，它将显示有效的通行证。我认为我的问题是它在真正生成链接文件时尝试下载链接文件并自动下载它。我可能需要编辑一些服务器代码以不破坏我的网络服务器上的“已保存”pkpass。但是，我宁愿不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:13:27.197

您可能应该使用`-dataWithContentsOfURL:`它，因为这就是您提供的。是`passData == nil`在第二行之后吗？如果是，那可能是你的问题。

**注意：** PKPass 文档说如果您从 gt 出现错误，您应该检查控制台以获取详细信息`-initWithData:error:`，因此请查看那里并让我们知道您发现了什么。

**更新：**

> 我的网络服务器包含一个 PHP 脚本，它生成一个 passkit 通行证并像 PkPass 一样显示它以供下载。如果您使用的是 Mac 或 iPhone，您可以转到 passFile URL，它将显示有效的通行证。

除非您的服务器正在检测客户端并据此决定发送回什么，否则显示 pass 的同一 URL 不太可能返回 pass 文件本身。查看您收到的数据的内容，看看它是否有效。如果没有，您需要调整服务器或使用不同的 URL。

# android - 如何显式调用 getView() 并调用 getDrawingCache() 而不返回 null？

> ID：12737180
> 
> 赞同：0
> 
> 时间：2012-10-04T22:53:33.920
> 
> 标签：android, listview, view, listadapter, greendroid

我正在尝试从 ListView 项目中创建位图。我正在使用 Greendroid 库（如果这有什么不同的话）。我最初让这个项目适用于项目数量 < 7 的列表（因为你只能在屏幕上看到 6 个项目）。我现在尝试在获取绘图缓存之前单独构建每个视图项。在下面的代码中，我在 childView.buildDrawingCache() 处得到一个空指针异常。我正确调用 getView() 吗？这个问题还有其他简单的解决方案吗？

```
try {

                Bitmap main = BitmapFactory.decodeResource(getResources(),R.drawable.dummy);
                Bitmap dummy = BitmapFactory.decodeResource(getResources(),R.drawable.dummy);
                Bitmap view;
                Bitmap temp;
                Canvas canvas = new Canvas();
                Paint paint = new Paint();
                Matrix matrix = new Matrix();
                paint.setFilterBitmap(true);
                File pic = new File(getFilesDir(),"txtabot.jpg");
                //(ViewGroup) (getListView().getParent());
                //((LinearLayout) getListView().getParent()).setDrawingCacheEnabled(true);

                ListView lView = (ListView) getListView();

                for (int i = 0; i<lView.getCount();i++) {
                    lView.setSelectionFromTop(i, 0);
                    View childView = adapter.getView(i, null ,lView );
                    childView.setDrawingCacheEnabled(true);
                    childView.buildDrawingCache(true);
                    view = childView.getDrawingCache().copy(Bitmap.Config.ARGB_8888, true);

                    //ItemView iView = ((ItemView)lView.getItemAtPosition(i));
                    //lView.getChildAt(i).setDrawingCacheEnabled(true);
                    //lView.getChildAt(i).buildDrawingCache(true);
                    //view = lView.getChildAt(i).getDrawingCache().copy(Bitmap.Config.ARGB_8888, true);
                    temp = Bitmap.createScaledBitmap(dummy, view.getWidth(), main.getHeight()+view.getHeight(), true);
                    temp = temp.copy(Bitmap.Config.ARGB_8888, true);
                    canvas.setBitmap(temp);
                    canvas.drawBitmap(main, matrix, paint);
                    //matrix.preTranslate(0, main.getHeight()-view.getHeight());
                    matrix.postTranslate(0, main.getHeight());
                    canvas.drawBitmap(view, matrix, paint);
                    matrix.reset();
                    main = temp.copy(Bitmap.Config.ARGB_8888, true);    
                }
                //getListView().getChildAt(getListView().getCount());
                //Bitmap main = getListView().getDrawingCache().copy(Bitmap.Config.ARGB_8888, true);
                main.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(pic));

                Log.i("TAG", "ofter FOS.CLOSE()");
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

这是堆栈跟踪：

```
10-05 10:46:51.101: D/AndroidRuntime(16836): Shutting down VM
10-05 10:46:51.101: W/dalvikvm(16836): threadid=1: thread exiting with uncaught exception (group=0x40a481f8)
10-05 10:46:51.140: E/AndroidRuntime(16836): FATAL EXCEPTION: main
10-05 10:46:51.140: E/AndroidRuntime(16836): java.lang.NullPointerException
10-05 10:46:51.140: E/AndroidRuntime(16836):    at com.gigabites.smsbot.LogActivity.onHandleActionBarItemClick(LogActivity.java:153)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at greendroid.app.GDActivity$1.onActionBarItemClicked(GDActivity.java:387)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at greendroid.widget.ActionBar$1.onClick(ActionBar.java:396)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at android.view.View.performClick(View.java:3511)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at android.view.View$PerformClick.run(View.java:14105)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at android.os.Handler.handleCallback(Handler.java:605)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at android.os.Looper.loop(Looper.java:137)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at android.app.ActivityThread.main(ActivityThread.java:4575)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at java.lang.reflect.Method.invokeNative(Native Method)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at java.lang.reflect.Method.invoke(Method.java:511)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-05 10:46:51.140: E/AndroidRuntime(16836):    at dalvik.system.NativeStart.main(Native Method)
10-05 10:46:51.710: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:51.718: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:52.226: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:52.230: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:52.726: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:52.730: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:53.230: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:53.230: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:53.730: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:53.753: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:54.238: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:54.253: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:54.730: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:54.738: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:55.230: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:55.234: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:55.742: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:55.742: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:56.234: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:56.238: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:57.074: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:57.082: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:57.238: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:57.253: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:57.738: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:57.742: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:58.250: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:58.250: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:58.750: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:58.750: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:59.238: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:59.242: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:46:59.746: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:46:59.746: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:47:00.246: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:47:00.257: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:47:00.742: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:47:00.753: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:47:01.582: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:47:01.585: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt'
10-05 10:47:02.105: I/dalvikvm(16836): threadid=3: reacting to signal 3
10-05 10:47:02.113: I/dalvikvm(16836): Wrote stack traces to '/data/anr/traces.txt' 
```

更新：现在我正在膨胀一个视图并将其绘制到画布（位图）并做同样的事情，但一切都很奇怪。我不太了解 itemView.measure() 和 itemView.layout 方法。这是一种有效的代码：

```
try {
                // Prepare Utilities
                Bitmap main = BitmapFactory.decodeResource(getResources(),R.drawable.dummy);
                Bitmap dummy = BitmapFactory.decodeResource(getResources(),R.drawable.dummy);
                Bitmap view;
                Bitmap temp;
                //Canvas tempCanvas = new Canvas();
                Canvas canvas = new Canvas();
                Paint paint = new Paint();
                Matrix matrix = new Matrix();
                paint.setFilterBitmap(true);
                File pic = new File(getFilesDir(),"txtabot.jpg");

                final ListView lView = (ListView) getListView();
                //for (int i = 0; i<lView.getChildCount();i++) {
                for (int i = 0; i<3;i++) {

                    //View itemView = lView.getAdapter().getView(i, null, lView);
                    //itemView = lView.getChildAt(i);
                    //itemView.setDrawingCacheEnabled(true);
                    //itemView.draw(tempCanvas);
                    //final int viewheight = lView.getChildAt(lView.getFirstVisiblePosition()).getHeight();
                    View itemView = lView.getAdapter().getView(i, null, lView);
                    itemView.setLayoutParams(new LayoutParams(
                            LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
                    itemView.measure(
                            MeasureSpec.getSize(itemView.getMeasuredWidth()),
                            MeasureSpec.getSize(itemView.getMeasuredHeight())
                            );
                    itemView.layout(0, 0,itemView.getMeasuredWidth() , itemView.getMeasuredHeight());
                    view = Bitmap.createScaledBitmap(dummy,itemView.getMeasuredWidth(),itemView.getMeasuredHeight(),true);
                    canvas.setBitmap(view);
                    itemView.draw(canvas);
                    //iew.setSelectionFromTop(i, 0);
                    //View itemView = lView.getChildAt(i);
                    //itemView.setDrawingCacheEnabled(true);
                    //view = itemView.getDrawingCache().copy(Bitmap.Config.ARGB_8888, true);

                    temp = Bitmap.createScaledBitmap(dummy, view.getWidth(), main.getHeight()+view.getHeight(), true);
                    //temp = temp.copy(Bitmap.Config.ARGB_4444, true);
                    canvas.setBitmap(temp);
                    canvas.drawBitmap(main, matrix, paint);
                    matrix.postTranslate(0, main.getHeight());
                    canvas.drawBitmap(view, matrix, paint);
                    matrix.reset();
                    main = temp.copy(Bitmap.Config.ARGB_8888, true);    
                }
                main.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(pic));

                Log.i("TAG", "ofter FOS.CLOSE()");
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

它设法遍历列表项，但输出全黑，带有一些可见的视图图标。

# c++ - 用于数值计算的有用 c++ 库

> ID：12737182
> 
> 赞同：1
> 
> 时间：2012-10-04T22:53:49.640
> 
> 标签：c++, numerical-analysis, c-libraries

到目前为止，我已经使用了 boost 库。

但是，我想使用矩阵运算和随机数。

请让我知道有用的 C++ 库。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T23:16:11.540

我真的很喜欢[GSL 库。](http://www.gnu.org/software/gsl/) 虽然也有以下几个，都很好很强大：

*   [Armadillo C++ 线性代数库](http://arma.sourceforge.net/)
*   [闪电战++](http://sourceforge.net/projects/blitz/)
*   [本征](http://eigen.tuxfamily.org/index.php?title=Main_Page)
*   [信息技术++](http://itpp.sourceforge.net/current/)

您还可以[在此处查看更大的列表。](http://en.wikipedia.org/wiki/List_of_numerical_libraries#C.2B.2B)但是，如果您更喜欢 boost，则可以使用[Boost.Random](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_random.html)和[Boost.Matrix](http://www.boost.org/doc/libs/1_51_0/libs/numeric/ublas/doc/matrix.htm)。

# makefile - 构建 OCaml 交叉编译器 - 配置部分

> ID：12737187
> 
> 赞同：3
> 
> 时间：2012-10-04T22:54:35.020
> 
> 标签：makefile, ocaml, configure, cross-compiling

我需要构建一个 OCaml 交叉编译器。遗憾的是，这似乎不支持开箱即用，需要做一些工作，[如](http://brion.inria.fr/gallium/index.php/CrossCompiler)旧版本的[OCaml 编译器](http://caml.inria.fr/ocaml/release.en.html)所述。
我的第一个问题是：生成文件 *config/mh*、*config/sh*和*config/Makefile*的好方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T23:12:05.833

几年来，我一直在构建 OCaml 交叉编译器。（请参阅我的个人资料以获取我网站的链接。）我所做的是构建编译器 1 1/2 次。第一次是针对主机（对目标进行一些设置）。后半部分构建是为目标构建运行时。

我用于构建从 OS X 到 ARM/iOS 的交叉编译器的脚本名为`xarm-build`. 如果您有 Subversion，您可以从我的公共存储库中获取副本：

```
$ svn cat svn://svn.psellos.com/trunk/ocamlxarm/3.1/xarm-build 
```

免责声明：现在，这个脚本只是构建编译器的字节码版本。即，编译器本身是一个OCaml 字节码可执行文件。但是，它会为目标生成本机代码。

如果你尝试这个并且有任何问题，请告诉我。

要回答您的具体问题，如果您的目标系统类似于 Unix，您可以尝试`configure`在目标上运行脚本以生成`config/s.h`、`config/m.h`和`config/Makefile`，正如您提到的那样，它们是关键文件。如果你的目标有一个模拟器，你可以`configure`在模拟器中运行——这就是我为 iOS 所做的。否则你必须自己找出合理的内容。（也许在与您的目标尽可能相似的类 Unix 系统上运行 configure。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:42:42.010

使用修改后的配置“链”可以生成文件。Ocamls 配置脚本假定它可以在同一次运行中编译和执行结果，这在交叉编译环境中是不可能的。
因此，必须修改配置过程，以便存储编译结果（包括可执行文件）并且可以在目标机器上的第二次运行中使用。这是显示修改的差异文件（约 200 行）。

```
diff -r -U 1 ocaml-4.00.0-orig/config/auto-aux/hasgot ocaml-4.00.0-cross/config/auto-aux/hasgot
--- ocaml-4.00.0-orig/config/auto-aux/hasgot
+++ ocaml-4.00.0-cross/config/auto-aux/hasgot
@@ -15,2 +15,4 @@

+. ./keyval.sh
+
 opts=""
@@ -36,7 +38,13 @@

+key="$cc $args"
+getValueExit "$key"
+
 if test "$verbose" = yes; then
   echo "hasgot $args: $cc $opts -o tst hasgot.c $libs" >&2
-  exec $cc $opts -o tst hasgot.c $libs > /dev/null
+  `exec $cc $opts -o tst hasgot.c $libs > /dev/null`
 else
-  exec $cc $opts -o tst hasgot.c $libs > /dev/null 2>/dev/null
+  `exec $cc $opts -o tst hasgot.c $libs > /dev/null 2>/dev/null`
 fi
+res=$?
+setValue "$key" "$res"
+exit "$res"
diff -r -U 1 ocaml-4.00.0-orig/config/auto-aux/hasgot2 ocaml-4.00.0-cross/config/auto-aux/hasgot2
--- ocaml-4.00.0-orig/config/auto-aux/hasgot2
+++ ocaml-4.00.0-cross/config/auto-aux/hasgot2
@@ -15,2 +15,4 @@

+. ./keyval.sh
+
 opts=""
@@ -36,7 +38,13 @@

+key="$cc $args"
+getValueExit "$key"
+
 if test "$verbose" = yes; then
   echo "hasgot2 $args: $cc $opts -o tst hasgot.c $libs" >&2
-  exec $cc $opts -o tst hasgot.c $libs > /dev/null
+  `exec $cc $opts -o tst hasgot.c $libs > /dev/null`
 else
-  exec $cc $opts -o tst hasgot.c $libs > /dev/null 2>/dev/null
+  `exec $cc $opts -o tst hasgot.c $libs > /dev/null 2>/dev/null`
 fi
+res=$?
+setValue "$key" "$res"
+exit "$res"
Only in ocaml-4.00.0-cross/config/auto-aux: keyval.sh
diff -r -U 1 ocaml-4.00.0-orig/config/auto-aux/runtest ocaml-4.00.0-cross/config/auto-aux/runtest
--- ocaml-4.00.0-orig/config/auto-aux/runtest
+++ ocaml-4.00.0-cross/config/auto-aux/runtest
@@ -17,6 +17,30 @@
 echo "runtest: $cc -o tst $* $cclibs" >&2
-$cc -o tst $* $cclibs || exit 100
+stream=/dev/stderr
 else
-$cc -o tst $* $cclibs 2> /dev/null || exit 100
+stream=/dev/null
+#$cc -o tst $* $cclibs 2> /dev/null || exit 100
 fi
+
+key="$* $cclibs"
+
+if test "$crossmode" = cross-cc; then
+   i=`cat ./counter`
+   $cc -o tst"$i" $* $cclibs 2> "$stream" || exit 100
+   echo "$key"'%%#%%'tst"$i" >> ./map_runtest
+   i=`expr $i + 1`
+   echo "$i" > ./counter
+   if test "$*" = sizes.c; then
+       echo "4 4 4 2"
+   fi
+   if test `expr "$*" : '.*tclversion.c'` -ne 0; then
+       echo "8.5"
+   fi
+   exit 0
+fi
+if test "$crossmode" = cross-run; then
+   tst=`awk -v ccargs="$key" 'BEGIN {FS="%%#%%"} $1 == ccargs {print $2}' ./map_runtest`
+   exec ./"$tst"
+fi
+
+$cc -o tst $* $cclibs 2> "$stream" || exit 100
 exec ./tst
diff -r -U 1 ocaml-4.00.0-orig/config/auto-aux/tryassemble ocaml-4.00.0-cross/config/auto-aux/tryassemble
--- ocaml-4.00.0-orig/config/auto-aux/tryassemble
+++ ocaml-4.00.0-cross/config/auto-aux/tryassemble
@@ -1,8 +1,16 @@
 #!/bin/sh
+
+. ./keyval.sh
+
+key="$aspp $*"
+getValueExit "$key"
+
 if test "$verbose" = yes; then
 echo "tryassemble: $aspp -o tst $*" >&2
-$aspp -o tst $* || exit 100
+`$aspp -o tst $* || exit 100`
 else
-$aspp -o tst $* 2> /dev/null || exit 100
+`$aspp -o tst $* 2> /dev/null || exit 100`
 fi
+res=$?
+setValue "$key" "$res"

@@ -11,7 +19,14 @@
 if test "$verbose" = yes; then
+key="$as $*"
+getValueExit "$key"
 echo "tryassemble: $as -o tst $*" >&2
-$as -o tst $* || exit 100
+`$as -o tst $* || exit 100`
 else
-$as -o tst $* 2> /dev/null || exit 100
+`$as -o tst $* 2> /dev/null || exit 100`
 fi
+res=$?
+setValue "$key" "$res"
+exit $res
+else
+exit $res
 fi
diff -r -U 1 ocaml-4.00.0-orig/config/auto-aux/trycompile ocaml-4.00.0-cross/config/auto-aux/trycompile
--- ocaml-4.00.0-orig/config/auto-aux/trycompile
+++ ocaml-4.00.0-cross/config/auto-aux/trycompile
@@ -15,7 +15,15 @@

+. ./keyval.sh
+
+key="$cc $* $cclibs"
+getValueExit "$key"
+
 if test "$verbose" = yes; then
 echo "trycompile: $cc -o tst $* $cclibs" >&2
-$cc -o tst $* $cclibs || exit 100
+`$cc -o tst $* $cclibs || exit 100`
 else
-$cc -o tst $* $cclibs 2> /dev/null || exit 100
+`$cc -o tst $* $cclibs 2> /dev/null || exit 100`
 fi
+res=$?
+setValue "$key" "$res"
+exit $res
diff -r -U 1 ocaml-4.00.0-orig/configure ocaml-4.00.0-cross/configure
--- ocaml-4.00.0-orig/configure
+++ ocaml-4.00.0-cross/configure
@@ -47,2 +47,3 @@
 withcamlp4=camlp4
+crossmode=''

@@ -119,2 +120,4 @@
         withcamlp4="";;
+    -cross|--cross)
+       crossmode="$2"; shift;;
     *) echo "Unknown option \"$1\"." 1>&2; exit 2;;
@@ -158,2 +161,21 @@

+case "$crossmode" in
+   cc)
+       crossmode=cross-cc
+       echo 0 > ./counter
+       rm -f ./map_runtest ./map_hasgot
+       touch ./map_runtest ./map_hasgot;;
+   run)
+       crossmode=cross-run
+       if test ! -e ./map_runtest -o ! -e ./map_hasgot; then
+           echo 'Run with -cross cc first'
+           exit 2
+       fi
+       rm -f ./counter;;
+   none) crossmode=none;;
+   "") crossmode=none ;;
+   *)
+       echo 'Unknown crossmode'>&2
+       exit 2;;
+esac
 # Write options to Makefile
@@ -350,3 +372,3 @@
 cc="$bytecc -O $bytecclinkopts"
-export cc cclibs verbose
+export cc cclibs verbose crossmode

@@ -1647,2 +1669,5 @@

+if test "$crossmode" = cross-run; then
+   rm -f tst* ./map_runtest ./map_hasgot
+fi
 # Print a summary 
```

配置脚本有一个新`-cross`选项。当`cc`是它的参数时，它只编译，当它是时`run`，它只执行编译的东西。中间结果存储在**config/auto-aux/map_{hasgot,runtest}**`setValue`中，主要`getValueExit`用于检索，两者都在**config/auto-aux/keyval.sh**中定义。如果提供跨工具链数据

`-cc`, `-as`, `-aspp`, `-partialld`, `-libs`, `-dllibs`,`-dldefs`

Makefile 应该是可用的。最后是`keyval.sh`内容不在差异中的文件：

```
getValueExit()
{
if test "$crossmode" = cross-run; then
    res=`awk -v ccargs="$1" 'BEGIN {FS="%%#%%"} $1 == ccargs {print $2; exit}' ./map_hasgot`
    exit "$res"
fi
}

setValue()
{
if test "$crossmode" = cross-cc; then
    echo "$1"'%%#%%'"$2" >> ./map_hasgot
fi
} 
```

如果`tk`使用，必须修改**config/auto-aux/runtest**并替换`0.0`为它的版本号。此外，如果将 solaris 用作目标或主机，则可能需要修改文件**config/auto-aux/solaris-ld 。**

# matlab - 向量相乘时需要使用 if 语句：向量化

> ID：12737189
> 
> 赞同：2
> 
> 时间：2012-10-04T22:54:46.177
> 
> 标签：matlab

我有一个矢量图

```
V=[ 1 2 3 5 9]; 
```

并想像这样乘以：

```
newVect=zeros(1,length(V));

for i=1:length(V)

    if V(i)==1
       newVect(i)=V(i)*somevaluex
    elseif V(i)==5
       newVect(i)=V(i)*somevaluey
    else
       newVect(i)=V(i);
end 
```

这似乎很麻烦，因为我实际上正在处理具有 10000 个元素的数组。这可以以某种方式被矢量化取代吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:57:10.540

你可以这样做：

```
newVect = V .* (   someValuex.*(V==1) +  someValuey.*(V==5) + V.*( (V~=1) & (V~=5) ) ) 
```

或者更快一点：

```
newVect=V;
newVect(V==1)=V(V==1)*someValuex;
newVect(V==5)=V(V==5)*someValuey; 
```

# python - 解析文本文件中的行的问题

> ID：12737193
> 
> 赞同：0
> 
> 时间：2012-10-04T22:55:06.690
> 
> 标签：python

我有一个 .txt 文件，其中包含许多行格式为“主题、值、工作负载”的文件，我想以 dict[subect]: (值、工作负载) 格式将其打印到字典中。这是我这样做的代码：

```
for line in inputFile:
        lineList.append(line.split(",", 3))
for i in range(0, len(lineList)):
        subjectDict[lineList[i][0]] = (lineList[i][1], lineList[i][2])
        print subjectDict[lineList[i][0]] 
```

但是，运行程序时，我的 subjectDict 值以元组的形式返回，格式如下：“'6', '2\r\n'。” 这个 r\n 业务是怎么回事？我假设它与文本文件中的换行符有关，这就是为什么我首先在​​我的 split 方法中放入 3 个最大值，但它似乎将 2\r\n 解释为一个字符串. 此外，是否有更有效的方法将元组中的这些列表项分别转换为整数，或者我应该这样做：

```
subjectDict[lineList[i][0]] = (int(lineList[i][1]), int(lineList[i][2])) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:57:33.577

请执行下列操作：

```
for line in inputFile:
        lineList.append(line.strip().split(",", 3))
for i in range(0, len(lineList)):
        subjectDict[lineList[i][0]] = (lineList[i][1], lineList[i][2])
        print subjectDict[lineList[i][0]] 
```

strip 方法将去掉字符串开头和结尾的任何空格（包括 \r\n 字符）。\r\n 是行尾（\r\n 表示您可能正在打开一个 Windows 文件，Linux/Mac 文件通常使用 \n 作为行尾）。

据我所知 int(someStrVar) 是转换为整数的最有效方法。

假设您稍后对此 lineList 不感兴趣，您可以执行以下操作：

```
for line in inputFile:
        lineSplit = line.strip().split(",", 3)
        subjectDict[lineSplit [0]] = (lineSplit [1], lineSplit [2])
        print subjectDict[lineSplit [0]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:00:05.947

尝试这个：

```
output_dict = {}
with open(r"filename.txt") as f:
    for line in f:
        line = line.strip() # remove newlines and such (the '/r/n' bit)
        subject, value, workload = line.split(',', 3)
        output_dict[subject] = (int(value), int(workload)) 
```

所以，我做了几个改变。我曾经`line.strip()`从您的字符串中删除任何换行符（和周围的空格）。为了提高效率，我还将您拥有的两个循环合二为一。

要将元组中的每个项目转换为 int，您可以执行以下操作：

```
my_tuple = tuple(int(i) for i in my_tuple) 
```

...这基本上是将生成器推导转换为元组，但鉴于您只有两个项目要转换，因此仅键入`int(value)`and可能更有意义`int(workload)`，特别是因为您不再需要键入像`int(lineList[i][1])`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T00:28:28.463

这是我的建议，使用列表理解：

```
with open(r"test.txt") as f:
    reBuff = [x.split(",") for x in f.readlines()]
    outDict = dict([(subject.strip(), (int(value.strip()), int(workload.strip()))) for subject,value,workload in reBuff]) 
```

一旦你有一个格式为的列表或元组`[(key, value),(key, value)]`，你就可以轻松地将它转换为字典。

# c# - 带有中间表的一对多映射

> ID：12737194
> 
> 赞同：1
> 
> 时间：2012-10-04T22:55:11.137
> 
> 标签：c#, nhibernate, fluent-nhibernate

我以为我通过将中间表映射为 HasMany 并在中间表和子表之间映射为 HasOne 来固定这个，但是 HasOne 希望共享一个密钥。（没有反向选项。：[）

无论如何，我的关系结构：

> 地址（子）
> AddressId
> ..Address 字段
> 
> AddressCustomer（中介）
> AddressCustomerId
> AddressId
> CustomerId
> 
> 客户（父）
> CustomerId
> ..Customer 字段

为什么我有这个中间表而不是普通的 1-many？因为会有其他实体需要包含地址。（即站点等）他们将拥有自己的中间表，因此他们可以共享地址表。

我到目前为止的映射：

```
 public class CustomerAddressMap : ClassMap<CustomerAddress>
{
    public CustomerAddressMap()
    {
        Schema("dbo");
        Table("CustomerAddress");
        Id(x => x.CustomerAddressId);
        Map(x => x.FromDate)
            .Not.Nullable();
        Map(x => x.ToDate);
        HasOne(x => x.Address)
            .ForeignKey("AddressId")
            .Cascade.All();
    }

}

public class AddressMap : ClassMap<Address>
{
    public AddressMap()
    {
        Schema("dbo");
        Table("Address");
        Id(x=>x.AddressId);
        Map(x => x.AddressType);
    }
} 
```

使用 CustomerAddress 表中可以为空的 AddressId 列，插入行，但是 Address 行中的 AddressID 不会传播回 CustomerAddress。HasOne 上没有 Inverse 选项，所以这似乎是一个死胡同。我不能在 CustomerAddress 上生成地址 ID，因为一旦我添加了类似 SiteAddress 的东西并且必须做同样的事情，这会导致重复。该技巧*可能*与 GUID 作为键一起使用，但我目前坚持使用自动增量 Ints。

我正在考虑的其他一些想法是映射 CustomerAddress 和 Address 的合并，但我不相信 Fluent NHibby 支持。

我认为这是有人成功应用的问题域。本质上，我想要一个 1-Many 关系，其中子表（不是它的记录）在多个父级之间共享。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:46:55.203

将其映射为普通参考

```
public class CustomerAddressMap : ClassMap<CustomerAddress>
{
    public CustomerAddressMap()
    {
        Table("CustomerAddress");

        Id(x => x.CustomerAddressId);
        Map(x => x.FromDate).Not.Nullable();
        Map(x => x.ToDate);
        References(x => x.Customer, "CustomerId");
        References(x => x.Address, "AddressId");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:31:01.573

为什么不从地址到客户进行一对多？然后客户将包含外键，并且地址实体可以被其他实体引用。在这种情况下，您只需`References(x => x.Address);`在客户表上制作。
当我尝试使用 FluentNHibernate 创建一对一关系时，我也遇到了常见问题。如果你想保留你展示的数据库结构，我想你应该尝试以下映射（添加相应的实体字段）：

```
 public AddressMap()
 {
    Schema("dbo");
    Table("Address");
    Id(x => x.AddressId);
    Map(x => x.AddressType);
    HasOne(x => x.CustomerAddress).Cascade.All();
 }
 public CustomerAddressMap()
 {
     Schema("dbo");
     Table("CustomerAddress");
     Id(x => x.CustomerAddressId);
     Map(x => x.FromDate)
         .Not.Nullable();
     Map(x => x.ToDate);
     HasOne(x => x.Address)
     .Constrained()
     .ForeignKey();
 } 
```

这种映射在我的情况下一侧是空的，所以我修改了子实体（CustomerAddress）的属性设置器：

```
public virtual Address Address
{ 
    get { return _address; }
    set 
    {
        _address = value;
        value.CustomerAddress = this;
    }
} 
```

在这些操作一对一之后工作正常）希望它能帮助您解决问题。

# objective-c - 使用不可见的 UILabel 并触发 UITextView 事件或不使用 UILabel 并处理 UITextView 点击识别器

> ID：12737197
> 
> 赞同：0
> 
> 时间：2012-10-04T22:55:22.180
> 
> 标签：objective-c, uitextview, uitapgesturerecognizer

A）首先，我将公开我试图解决这个问题的方式，而不使用不可见的 UILabel

1) 第一次点击 UITextView 使其成为第一响应者。这将是默认行为（无需为此添加代码），但由于点击识别器应该稍后触发其他操作，因此还需要创建个性化的点击识别器：

```
 UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapRecognized:)];
  [singleTap setNumberOfTapsRequired:1];
  [TextView addGestureRecognizer:singleTap];
  [TextView setUserInteractionEnabled:YES];
  [singleTap release];

-(IBAction)singleTapRecognized:(id)sender
    {
      [TextView becomeFirstResponder];
    } 
```

2) 当文本改变时，菜单栏应该被隐藏。这不会产生任何问题，因为它只需要在 TextViewDidChange 中添加代码：

```
- (void)textViewDidChange:(UITextView *)textView
{
  if (bTitleBar)
  {
    bTitleBar = NO;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.30f];
    menuBar.transform =
    CGAffineTransformMakeTranslation(
                                     menuBar.frame.origin.x,
                                     -50 
                                     );

    CGRect newFrameSize;
    currentOrientation = [UIApplication sharedApplication].statusBarOrientation;
    if (currentOrientation==UIInterfaceOrientationPortrait ||currentOrientation==UIInterfaceOrientationPortraitUpsideDown)
    {
      newFrameSize = CGRectMake(96, 0, txtMain.frame.size.width, 605);
    }
    else
    {
      newFrameSize = CGRectMake(96, 0, txtMain.frame.size.width, 270);
    }
    textView.frame = newFrameSize;
    [UIView setAnimationDuration:0];
  }
} 
```

3）接下来点击 UITextView（在文本更改并且菜单栏被隐藏之后）应该再次触发对菜单栏的可见性。在这种情况下，我会在 singleTapRecognized 中添加代码，以便再次显示它，但由于某种原因，UITapGestureRecognizer singleTap 停止工作，因此不再触发 singleTapRecognized 方法。所以我从 B 计划开始：

B）我尝试的解决方案是使用一个不可见的 UILabel，我在 UITextView 上以视觉方式（不是以编程方式）附加。我还制作了其对应的 IBOutlet 并设置了参考。现在 UIGestureRecognizer singleTap 被添加到 UILabel 而不是 UITextView。问题是 UITextView 无法滚动或点击，因为 UILabel 超过它并成为障碍。

关于如何解决这个问题的任何想法？继续使用哪个更好，A 计划还是 B 计划？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:03:46.033

我想我会去计划 C。如果你记录文本视图的gestureRecognizers 属性，你会看到它们有很多，所以弄乱它们似乎很困难。通常，第二次点击文本视图会更改选择（或显示替换文本弹出框）并调用 textViewDidChangeSelection: 方法——我会使用该方法，并检查菜单栏是否隐藏——如果是的，把它带回来，然后调用 super textViewDidChangeSelection: 允许文本视图做它的事情。

# ruby-on-rails - 是否有我可以在不是 session[:session_id] 的 rails 中使用的唯一标识符？

> ID：12737199
> 
> 赞同：1
> 
> 时间：2012-10-04T22:55:30.547
> 
> 标签：ruby-on-rails

我正在尝试跟踪`kiss_metrics`标识符，并希望`unique_identifier`在用户在网站上的整个过程中保持相同的标识符，即使在 call 之后也是如此`reset_session`。

`cookie_id`从登录到注销以及他们在网站上的整个时间都一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:30:47.307

我会这样做：

[首先，使用SecureRandom.uuid](http://rubydoc.info/stdlib/securerandom/1.9.2/SecureRandom#uuid-class_method)在登录时将您自己的令牌添加到会话中。这样做可以确保它不会被 Rails 的其他部分弄乱（例如，您不知道 csrf 令牌何时被核弹）。

而不是调用`reset_session`调用维护您的唯一令牌的包装器：

```
def clear_session_except_token
  token = session[:token]
  clear_session
  session[:token] = token
end 
```

然后，您可以在用户注销时清除令牌。

# java - Bean 属性设置为 0

> ID：12737200
> 
> 赞同：0
> 
> 时间：2012-10-04T22:55:49.997
> 
> 标签：java, jsf

我的 bean 正确使用了 setter 并将属性设置为所需的值，但随后它进入了一个使用该属性的方法并自动设置为 0。我什至不知道 0 来自哪里。在调试中，它直接从设置器跳转到方法，所以我看不到中间发生的任何事情。

`@SessionScoped`如果与它有任何关系，bean 将使用注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:11:53.733

> *私有 int vendorno*

`int`像, `boolean`,等Java 原语`long`有一个固定的默认值。

使用包装器对象，例如`Integer`, `Boolean`, `Long`. 他们可以`null`。

```
private Integer vendorno; 
```

### 也可以看看：

*   [学习 Java 语言 > 语言基础 > 原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

# c++ - 辅助函数应该放在头文件中还是放在实现文件中？

> ID：12737203
> 
> 赞同：14
> 
> 时间：2012-10-04T22:56:15.583
> 
> 标签：c++, oop, coding-style

在 C++ 中为类编写辅助方法时，是否应在头文件 (.h) 中的类定义中将其声明为私有方法？例如：

```
/*Foo.h*/
class Foo {

     public:
         int bar();

     private:
         int helper();
};
...
/*Foo.cpp*/
...
int foo::bar() {
    int something = this->helper();
}

int foo::helper() {
    ...
} 
```

或者，最好不要将其声明为类的私有成员，而只是使其成为实现中的独立函数？

```
/*Foo.h*/
class Foo {
    public:
        int bar();
};
...
/*Foo.cpp*/
...
int Foo::bar() {
    int something = helper();
    ...
}

int helper() {
    ...   
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-04T23:00:45.073

实现文件中的独立函数改进了封装：它不需要在标头中声明，因此无论出于何种原因，当其签名发生更改时，都无需重新编译客户端代码。对我来说，这是一个足够好的理由在可行的情况下更喜欢这个选项。（确保将其放在匿名命名空间中，以防止在链接时发生标识符冲突。）

但是，方法可以通过指针`private`访问类实例*及其私有部分。*`this`如果它需要这样的访问，那么它必须是一个方法或一个`friend`. 在这两种情况下，它都会在类定义（头文件）中可见，并且方法比朋友更方便。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T23:01:01.243

如果您的辅助函数作为对象的方法有意义，我几乎总是更愿意将其设为成员函数，以便有一个隐式`this`指针，而不是将 a 传递`Foo *`给辅助函数。

如果辅助函数不需要是对象的方法（也就是说，它不需要访问数据成员或其他成员函数），则将其设为独立函数（`static`或最好在匿名命名空间中）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T23:02:03.627

我认为这有点主观。

在我看来，这取决于它是否与类的成员有任何关系和/或您是否希望朋友类使用它（或在访问的情况下使用派生类`protected`）。

如果该函数实际上并未对任何成员进行操作，并且没有其他人对它感兴趣，则应将其作为静态函数保存在实现文件中。此外，如果这是一项必须快速的操作，您可以借此机会进行操作`inline`。

相反，如果函数对类进行操作或可能在派生类或相关类中有额外用途，则将其设为成员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T23:00:52.743

我的立场是标题包含尽可能少的广告，同时实现所需的设计和布局属性。如果有一个选项，它会进入源代码。但是，一些内部细节需要访问一个类的太多内部细节，以使其能够进入实现。

# sql - 如何在不比较的情况下评估空字符串和值？

> ID：12737206
> 
> 赞同：0
> 
> 时间：2012-10-04T22:56:41.077
> 
> 标签：sql, sql-server

@myvar 是一个 nvarchar(30)。如何在不使用 OR 的情况下进行以下评估？

```
@myvar = '' OR (table1.col1 like @myvar) 
```

还有其他更有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:29:52.793

如果有一个面试问题在哪里`OR`被禁止并且[德摩根的法律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)被遗忘了，那么人们可以使用：

```
case
  when @myvar = '' then 42
  when table1.col1 like @myvar then 666
  else 0 end > 0 
```

也可以尝试使用`Len( @myvar ) = 0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:58:16.503

怎么样：

```
(table1.col1 like ISNULL(@myvar,table1.col1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T23:58:31.943

```
table1.col1 like ISNULL(NULLIF(@myvar, ''), table1.col1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T23:28:14.460

还有其他的方法，其实还有很多。但是，如果您添加 OPTION (RECOMPILE)，则您所拥有的表单对于 SQL Server 2005 及更高版本的大多数版本都表现最佳。

在此处查找有关[使用动态条件进行搜索](http://www.sommarskog.se/dyn-search.html)的权威指南。按照您的 SQL Server 版本的链接。

# gcc - 防止 gcc/libtool 在每次链接时从头开始构建共享对象

> ID：12737207
> 
> 赞同：0
> 
> 时间：2012-10-04T22:56:42.110
> 
> 标签：gcc, autotools, libtool

我正在构建一个链接到两个共享库 libA.so 和 libB.so 的自动工具应用程序。它们又包括共享库和静态（是的，反对推荐静态）库。静态库 libmetis 包含在 libA 和 libB 中，但不幸的是，版本不同。

说libA.so有libA1.so，libA2.so.... libmetis5.a

说libB.so有libB1.so，libB2.so.... libmetis4.a

在机器 1 上，运行 Ubuntu，最终应用程序的链接行如下所示

```
libtool mode=link application.c -lA -lB -o application 
```

在运行 CentOS 的机器 2 上，最终应用程序的链接行如下所示

```
libtool mode=link application.c -lA -lA1 -lA2... -lmetis5 -lB -lB1 -lB2... -lmetis4 -o application 
```

由于 libA 和 libB 都从它们在机器 2 中的组成库重新链接，因此我最终使 libA 和 libB 都具有相同版本的 libmetis，这会导致应用程序崩溃。

我如何控制或禁止 Libtool 重新链接已经好的去库的设置在哪里？我试过不只对应用程序使用自动工具，手动给出链接线，但行为是一样的。

谢谢你的帮助，

伊兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:46:37.120

如果您实际上是在 CentOS 机器 2 上将 metris[45] 拉入 lib[AB] 中，那么它们就不会出现在链接线上（就像它们不会在 Ubuntu 机器 1 下一样）。

# php - 尝试使用 Soundcloud PHP API 更新配置文件描述时出现 403 错误

> ID：12737208
> 
> 赞同：1
> 
> 时间：2012-10-04T22:56:45.720
> 
> 标签：php, api, soundcloud

当我尝试通过他们的 php sdk 更新 soundcloud 帐户的配置文件描述时，每次都会收到 403 错误。该应用程序已通过身份验证，我可以执行诸如放置评论之类的操作，但我无法更新个人资料上的任何内容（尤其是描述字段）。

我正在使用他们的官方文档中的标准代码：

```
<?php
require_once 'Services/Soundcloud.php';

// create a client object with access token
$client = new Services_Soundcloud('YOUR_CLIENT_ID', 'YOUR_CLIENT_SECRET');
$client->setAccessToken('YOUR_ACCESS_TOKEN');

// get the current user
$user = json_decode($client->get('me'));

// update the user's profile description
$user = json_decode($client->post('me', array(
   'description' => 'I am using the SoundCloud API!'
)));
print $user->description; 
```

请帮我找出错误来自哪里，因为我完全没有想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:51:43.660

我们不好，您指向的用户文档有两个问题：

*   对用户资源的更新应该使用 PUT 方法，而不是 POST。
*   参数需要正确命名空间。

我已经修改了文档来解决这两个问题。新代码示例：

```
<?php
require_once 'Services/Soundcloud.php';

// create a client object with access token
$client = new Services_Soundcloud('YOUR_CLIENT_ID', 'YOUR_CLIENT_SECRET');
$client->setAccessToken('ACCESS_TOKEN');

// get the current user
$user = json_decode($client->get('me'));

// update the user's profile description
$user = json_decode($client->put('me', array(
   'user[description]' => 'I am using the SoundCloud API!'
)));
print $user->description; 
```

希望对您的困惑有所帮助并再次抱歉。如果您遇到任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:15:00.777

要更新用户相关信息，您需要以用户身份登录 Sound Cloud，然后验证您的应用程序以使用您的个人数据，否则在更新/删除时您将收到所有用户相关信息的 403。要发布任何评论，您不需要此身份验证

[http://developers.soundcloud.com/docs#authentication](http://developers.soundcloud.com/docs#authentication)

参考

**获取有关经过身份验证的用户的信息**

用户登录 SoundCloud 并批准您的应用程序的授权请求后，您将能够访问他们的个人资料并代表他们采取行动。我们提供了一个方便的端点来访问有关经过身份验证的用户的信息。

# dotnetnuke - DotNetNuke 数据层

> ID：12737212
> 
> 赞同：0
> 
> 时间：2012-10-04T22:56:52.807
> 
> 标签：dotnetnuke

我正在尝试了解 Dot Net Nuke 源代码。谁能简要解释一下数据层是如何实现的？

我试图在调用存储过程的代码中找到。

我已经在网上查看了一些视频教程，也阅读了一些博客，但我还没有找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:43:02.147

DotNetNuke 的“数据层”是 DotNetNuke.SqlDataProvider

数据层使用抽象的“DataProvider”模型，其中实际的提供者是在运行时确定的。在实践中，这通常是 SqlDataProvider，它使用 Sql Server 数据库作为 DotNetNuke 的数据存储。

理论上，您可以编写一个数据提供程序，以允许 DotNetNuke 应用程序和任何类型的数据库或数据存储之间进行访问，方法是编写数据提供程序的不同实现。我认为可能有一个很久以前写的 oracle，但几乎每次安装都使用 Sql Server 作为数据存储。

SqlDataProvider 传统上位于 Microsoft.ApplicationBlocks.dll 组件之上，因此实际的存储过程调用是通过该层执行的。

DotNetNuke 核心的大多数模块和其他扩展也使用它们自己的特定数据提供程序实现，尽管为了简单起见，将 Sql 数据层构建到单个程序集中已成为常见做法。

您会发现大多数存储过程都被执行，然后通过 CBO 对象传回，以便从 IDataReader 结果集转换为特定对象。

为了找到一个例子，我会选择一个捆绑的核心模块并研究它，比如 Html/Text 模块。

最后，随着 DotNetNuke 7 的出现，Data Provider 模型迎来了自 DotNetNuke 1.0 发布以来的第一次重大修订，即数据访问层 2 (dal2)。我建议阅读 Charles Nurse 的一些博客：

[查尔斯护士博客：“dal2”的条目](http://www.dotnetnuke.com/Resources/Blogs/tagid/1270.aspx)

# sql - 使用 SQL 从另一个 Access 表更新 MSAccess 表

> ID：12737221
> 
> 赞同：4
> 
> 时间：2012-10-04T22:57:29.013
> 
> 标签：sql, ms-access, ms-access-2007

我正在尝试使用 Final 中的值更新表 Original。我是 SQL 的新手，但我已经在这两个小时试图更改各种示例以满足我的需要。我正在使用 Access 2007。

```
UPDATE 
  Original o
SET 
  o.[Assest Description] = (
    SELECT f.[Assest Description] FROM Original o, Final f 
    WHERE o.[Assest No] = f.[Assest No])
WHERE o.[Assest No] = Final.[Asset No] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T23:07:12.787

我不确定您的`select`语句只返回一行。如果要使用`select`赋值语句对表执行更新，则*必须*确保它只返回一行。

除此之外，您可以考虑下一个解决方案：

```
update 
   Original as o
   inner join Final as f on o.[Assest No] = f.[Assest No]
set
   o.[Assest Description] = f.[Assest Description] 
```

请注意，只有当两者都是和表`[Assest no]`中的唯一键并且它们正确相关时，这才能正常工作。`Original``Final`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T23:02:07.827

试试这个

```
UPDATE o 
SET o.[Assest Description] =  f.[Assest Description]
FROM Original o, Final f WHERE o.[Assest No] = f.[Assest No] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-20T16:38:03.720

访问非常挑剔。如果您完全限定要更新的字段的名称，它可能会失败。如果您不完全限定连接表和字段，它可能会返回“不支持连接”。我说可能是因为稍微不同的版本可能会做不同的事情。至少这是我的经验。

所以我的答案是从 Create->Query Design 开始。选择两个表并让选择正常工作。然后将其修改为更新查询，并对要更新表中的字段的列进行更新。
然后切换到 SQL 视图并将其用作在 VBA 中构建查询的模型。

我有一个语法正确的 SQL 语句，但直到我这样做，然后完全匹配限定字段名称与非限定字段名称，它声称不支持 JOIN。

# android - ViewPager 和数据库

> ID：12737222
> 
> 赞同：7
> 
> 时间：2012-10-04T22:57:30.387
> 
> 标签：android, database, android-viewpager, android-cursoradapter

数据在数据库中，所以我通常会使用 CursorAdapter 并让它与 ListView 上的 CursorLoader 一起使用。但是现在我需要一个 ViewPager 而不是 ListView 并且它需要一个 PagerAdapter 并且我只看到它与列表一起使用。

是否有使用光标的本机寻呼机适配器，或者我必须使其工作？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T18:37:27.953

基于[CursorAdapter](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/CursorAdapter.java)的内部结构，我有一个扩展[FragmentPagerAdapter](https://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)的实现，唯一的区别是您将使用来自[Cursor](https://developer.android.com/reference/android/database/Cursor.html)的信息来实例化[Fragment](https://developer.android.com/reference/android/app/Fragment.html)。

```
package com.example;

import android.content.Context;
import android.database.Cursor;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.util.SparseIntArray;
import android.view.ViewGroup;

import java.util.HashMap;

public abstract class CursorFragmentPagerAdapter extends FragmentPagerAdapter {

    protected boolean mDataValid;
    protected Cursor mCursor;
    protected Context mContext;
    protected SparseIntArray mItemPositions;
    protected HashMap<Object, Integer> mObjectMap;
    protected int mRowIDColumn;

    public CursorFragmentPagerAdapter(Context context, FragmentManager fm, Cursor cursor) {
        super(fm);

        init(context, cursor);
    }

    void init(Context context, Cursor c) {
        mObjectMap = new HashMap<Object, Integer>();
        boolean cursorPresent = c != null;
        mCursor = c;
        mDataValid = cursorPresent;
        mContext = context;
        mRowIDColumn = cursorPresent ? c.getColumnIndexOrThrow("_id") : -1;
    }

    public Cursor getCursor() {
        return mCursor;
    }

    @Override
    public int getItemPosition(Object object) {
        Integer rowId = mObjectMap.get(object);
        if (rowId != null && mItemPositions != null) {
            return mItemPositions.get(rowId, POSITION_NONE);
        }
        return POSITION_NONE;
    }

    public void setItemPositions() {
        mItemPositions = null;

        if (mDataValid) {
            int count = mCursor.getCount();
            mItemPositions = new SparseIntArray(count);
            mCursor.moveToPosition(-1);
            while (mCursor.moveToNext()) {
                int rowId = mCursor.getInt(mRowIDColumn);
                int cursorPos = mCursor.getPosition();
                mItemPositions.append(rowId, cursorPos);
            }
        }
    }

    @Override
    public Fragment getItem(int position) {
        if (mDataValid) {
            mCursor.moveToPosition(position);
            return getItem(mContext, mCursor);
        } else {
            return null;
        }
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        mObjectMap.remove(object);

        super.destroyItem(container, position, object);
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        if (!mDataValid) {
            throw new IllegalStateException("this should only be called when the cursor is valid");
        }
        if (!mCursor.moveToPosition(position)) {
            throw new IllegalStateException("couldn't move cursor to position " + position);
        }

        int rowId = mCursor.getInt(mRowIDColumn);
        Object obj = super.instantiateItem(container, position);
        mObjectMap.put(obj, Integer.valueOf(rowId));

        return obj;
    }

    public abstract Fragment getItem(Context context, Cursor cursor);

    @Override
    public int getCount() {
        if (mDataValid) {
            return mCursor.getCount();
        } else {
            return 0;
        }
    }

    public void changeCursor(Cursor cursor) {
        Cursor old = swapCursor(cursor);
        if (old != null) {
            old.close();
        }
    }

    public Cursor swapCursor(Cursor newCursor) {
        if (newCursor == mCursor) {
            return null;
        }
        Cursor oldCursor = mCursor;
        mCursor = newCursor;
        if (newCursor != null) {
            mRowIDColumn = newCursor.getColumnIndexOrThrow("_id");
            mDataValid = true;
        } else {
            mRowIDColumn = -1;
            mDataValid = false;
        }

        setItemPositions();
        notifyDataSetChanged();

        return oldCursor;
    }

    @Override
    public long getItemId(int position) {
        if (!mDataValid || !mCursor.moveToPosition(position)) {
            return super.getItemId(position);
        }
        int rowId = mCursor.getInt(mRowIDColumn);
        return rowId;
    }

} 
```

如果您需要 Fragment 以外的其他东西，您可以轻松地根据需要更改代码。

# html - 使 DIV 元素包含类似于输入元素的文本？

> ID：12737225
> 
> 赞同：3
> 
> 时间：2012-10-04T22:57:34.443
> 
> 标签：html, css

我正在尝试使 div 元素的工作方式与输入元素的工作方式类似。

[http://jsfiddle.net/MRP5M/6/](http://jsfiddle.net/MRP5M/6/)

我想知道输入元素如何实现在没有滚动条的情况下滚动到侧面的能力？我不希望我的 div 元素扩展到多行来保存内容，但是我没有看到任何 CSS 属性控制输入元素上的这种行为。

**更新：**所有好的解决方案。谢谢你们调查它。看起来输入元素的某些方面是由浏览器控制的（即高亮滚动）。如果不使用 Javascript，似乎很难模拟此功能。我已将第一个响应标记为解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T23:02:48.783

这是答案：http: [//jsfiddle.net/MRP5M/12/](http://jsfiddle.net/MRP5M/12/)

有一个警告：我不确定如何禁止新行....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T23:06:14.300

1.  您可以设置“空白：nowrap;” 在您的 .editable div 中
2.  之后，只需为您的#wrapper 设置一个固定高度（大约 20 像素）并溢出：隐藏；

它会像我刚刚尝试的那样工作。“white-space: nowrap”将避免任何换行符，因此您无需在 .editable div 内设置固定宽度。

更新：至于用鼠标选择所有文本的选项，Alohci 刚刚在这篇文章的评论中指出，您可以添加“溢出：自动；” 到您的 .editable div ，它会按需要运行，至少在我刚刚尝试过的 Chrome 上。Alohci 还指了指小提琴。归功于他。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T23:10:08.370

输入字段方面和行为由浏览器本身控制。您可以使用 CSS 来防止文本中断：

请参阅这个[工作小提琴示例](http://jsfiddle.net/zuul/rTyyt/)！

```
.editable {
   white-space: nowrap;
} 
```

* * *

至于不使用滚动条的滚动，您只能通过使用 JavaScript 或将 HTML 更改为`input`伪装成`div`:

请参阅这个[工作小提琴示例](http://jsfiddle.net/zuul/rTyyt/1/)！

**HTML**

```
<div id="wrapper">
   <input type="text" value="A really long string of content" />
</div>
<input type="text" value="A really long string of content" /> 
```

**CSS**

```
#wrapper{
   width: 151px;
}

#wrapper > input {
   border: 0 none;
   background-color: white,
   color: black;
} 
```

# vb.net - vb 中的 MenuStrip 函数

> ID：12737228
> 
> 赞同：0
> 
> 时间：2012-10-04T22:57:44.943
> 
> 标签：vb.net, menustrip

我正在尝试编写一个程序，在其中读取文本文件，然后为用户提供一些选项来查看文件中的不同书籍。我正在前进，但我在弄清楚如何让用户从菜单条下拉项目中选择不同的选项时遇到问题。例如，我有在我的代码中完成的退出按钮和保存按钮（顺便说一句，这不起作用，但我正在研究如何修复它），但我也将添加、删除和更新按钮作为以及用于显示文本文件中某些内容的按钮。

您可以给我帮助的任何资源都会很棒！谢谢！

```
Sub Main()
    Dim objReader As New StreamReader("C:\Users\HPG62-220US\Documents\Visual Studio 2010\Projects\Assignement 8\Assignement 8\bin\Debug\Books.txt")
    Dim sLine As String = ""
    Dim arrayText As New ArrayList()

    Do
        sLine = objReader.ReadLine()
        If Not sLine Is Nothing Then
            arrayText.Add(sLine)
        End If
    Loop Until sLine Is Nothing
    objReader.Close()

    For Each sLine In arrayText
        Console.WriteLine(sLine)
    Next
    Console.ReadLine()

End Sub

Private Sub ExitToolStripMenuItem_Click(sender As System.Object, e As System.EventArgs) Handles ExitToolStripMenuItem.Click
    Me.Close()

End Sub

Private Sub SaveToolStripMenuItem_Click(sender As System.Object, e As System.EventArgs) Handles SaveToolStripMenuItem.Click

    Using writer As StreamWriter = New StreamWriter("book list.txt", True)
        For Each line As String In lstBooks.Items
            writer.WriteLine(line)
        Next
    End Using
End Sub

Private Sub Delete_Click(sender As System.Object, e As System.EventArgs) Handles Delete.Click

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:55:41.970

```
Private Sub Button4_Click(sender As System.Object, e As System.EventArgs) Handles Button4.Click
  'We have MenuStrip1 which has a "Documents" top level menuitem
  'Dynamically add 3 options to it

  Dim doc1 As New ToolStripMenuItem("Doc1")
  doc1.Tag = "Snow White" 'some identifying data so we can tell it apart in the event handler
  DocumentsToolStripMenuItem.DropDownItems.Add(doc1)
  AddHandler doc1.Click, AddressOf Doc_Click

  Dim doc2 As New ToolStripMenuItem("Doc2")
  doc2.Tag = "War and Peace"
  DocumentsToolStripMenuItem.DropDownItems.Add(doc2)
  AddHandler doc2.Click, AddressOf Doc_Click

  Dim doc3 As New ToolStripMenuItem("Doc3")
  doc3.Tag = "Dictionary"
  DocumentsToolStripMenuItem.DropDownItems.Add(doc3)
  AddHandler doc3.Click, AddressOf Doc_Click

  'remove the middle one
  DocumentsToolStripMenuItem.DropDownItems.Remove(doc2)

End Sub

Private Sub Doc_Click(sender As System.Object, e As System.EventArgs)
  Dim tsmi As ToolStripMenuItem = DirectCast(sender, ToolStripMenuItem)
  Select Case tsmi.Tag.ToString
    Case "Snow White"
      MsgBox("Don't eat the apple")
    Case "War and Peace"
      MsgBox("Tolstoy")
    Case "Dictionary"
      MsgBox("Blah")
  End Select
End Sub 
```

# web - 具有使用数据的网站的桌面应用程序

> ID：12737235
> 
> 赞同：0
> 
> 时间：2012-10-04T22:58:40.123
> 
> 标签：web, desktop

我计划创建一个桌面应用程序（尚未选择语言），该应用程序将用作管理数据以操作数据。同时，该数据库将用于网站。

我唯一担心的是——我可能会混淆不兼容的技术，但唯一将它们联系在一起的是数据库。

假设我将使用 Delphi 创建桌面应用程序来管理 Access 或 MSSQL/MYSQL（如果可能的话），然后使用 php as 来制作 web。

这个想法是否存在明显的问题，我现在对此视而不见？非常感谢任何其他想法建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:40:09.580

数据库必须是我看到两种语言交流/合作的最常见方式之一。我已经将数据库视为 C/C++、Java、Perl、Python、C# 等之间的管道……数据库具有以与语言无关的方式存储数据的优势。几乎所有语言都有与数据库对话的方式。

使用两种不同语言的主要缺点是您将无法在 Web 项目和桌面项目之间重用代码。这听起来不错，但每次更新数据库架构时，都必须更新两个代码库。不是破坏交易，但仍然很烦人。

如果您能提供帮助，我建议您避免使用 Access。Access 适用于简单的桌面应用程序，但是一旦您开始引入多个用户，您应该使用更强大（和安全）的东西。如果您需要文件数据库，请使用 SQL Server Compact 或 SQLite 之类的东西。我个人会咬紧牙关，直接使用 MySQL。

# ruby-on-rails - JavaScript 响应的 RSpec 控制器测试

> ID：12737236
> 
> 赞同：2
> 
> 时间：2012-10-04T22:58:58.167
> 
> 标签：ruby-on-rails, ajax, rspec

我有一个应该只响应 AJAX 调用的控制器操作：

```
def archive
  @model = MyEngine::MyModel.find(params[:id])
  if @model.update_attributes(params[:model])
    @success = true
  else
    @success = false
  end
  respond_to do |format|
    format.js
  end
end 
```

我想用类似的东西来测试它：

```
it "should respond with javascript" do
  xhr :post, :archive, {:id => @model.to_param, :use_route => :my_engine}, valid_session
  response.should render_template('asi/events/archive', :format => 'js')
end 
```

和

```
it "should not respond with html" do
  xhr :post, :archive, {:id => @event1.to_param, :use_route => :asi}, valid_session
  response.should_not render_template('asi/events/archive', :format => 'html')
end 
```

但似乎断言主要与渲染“存档”模板有关，并不关心它的扩展。如果有更好的方法来规范这个，有什么想法我做错了吗？

感谢您的关注！

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-06T23:26:48.707

尝试

```
response.should_not render_template 'asi/events/archive.html' 
```

此外，您可以稍微重构您的模型

```
@success = @model.update_attributes(params[:model]) 
```

或者

```
@success = @model.update_attributes(params[:model]) === true 
```

# ios - 在 iOS 应用程序中加载网页

> ID：12737237
> 
> 赞同：3
> 
> 时间：2012-10-04T22:59:19.460
> 
> 标签：ios, xcode, safari

如果我们加载一个网页，我们可以将其转发到 safari，但这会导致用户离开我们的应用程序。有什么方法可以让用户访问任何网页然后返回我们的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T23:03:30.530

如果您想为 iOS7 之前的设备提供一些浏览器类型的功能，您可以使用这个[内联浏览器](http://www.cocoacontrols.com/platforms/ios/controls/svwebviewcontroller)

**iOS 9 更新：** Apple 引入了用于浏览网页的可见标准界面，即 适用于 iOS 9+ 设备的[SFSafariViewController](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller)。

例子：

```
func showTutorial() {
    if let url = URL(string: "https://www.example.com") {
        let config = SFSafariViewController.Configuration()
        config.entersReaderIfAvailable = true

        let vc = SFSafariViewController(url: url, configuration: config)
        present(vc, animated: true)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:00:01.280

您可以使用 a[`UIWebView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)在应用程序中显示页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-27T04:50:44.980

我想在将来为其他人添加更详细的答案（关键编码！）：

1.  在对象库中，搜索 WebKit View 并将其添加到您的 ViewController

2.  将“import WebKit”放在“import UIKit”下

3.  从您放置在您的代码中的 ViewController 中的 WebKit 视图中创建一个出口，直接位于开头的“{”下方

4.  在“superViewDidLoad()”下，你需要的是：let url = URL(string: "your_url_here"")

和

webview.load(URLRequest(url:url!))

和达西特！

我会附上我的代码副本，以防我解释得不好：

```
import UIKit
import WebKit

class WebsiteViewController: UIViewController {

    @IBOutlet weak var webview: WKWebView!
    override func viewDidLoad() {
        super.viewDidLoad()

        let url = URL(string: "https://www.eventbrite.com/e/pretty-in-petals-tea-party-tickets-43361370025")
        webview.load(URLRequest(url: url!))
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T23:01:41.910

使用 UIWebView[下面是如何编程一个](http://www.youtube.com/watch?v=yICZb91Poxs)。如果您需要更多帮助或示例，请告诉我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-27T05:23:38.737

@user1706456 UIWebView 已被 Apple 弃用，您可以使用 WKWebView 。

这是执行此操作的代码：

step1：导入WebKit

第2步：

```
 //ViewController's LifeCycle.
override func loadView() {
    let webConfiguration = WKWebViewConfiguration()
    webView = WKWebView(frame: .zero, configuration: webConfiguration)
    webView.uiDelegate = self
    webView.navigationDelegate = self
    view = webView
} 
```

第三步：

在 ViewDidLoad 中：

```
 let myURL = URL(string: "www.google.com")
   let myRequest = URLRequest(url: myURL!)
   webView.load(myRequest) 
```

第 4 步：WKWebView 代理方法来处理导航和加载等。

//MARK: - WKNavigationDelegate

```
 extension GPWebViewController : WKNavigationDelegate {
  func webView(_ webView: WKWebView, didCommit navigation: WKNavigation!) {

}
func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {
    // Refreshing the content in case of editing...
}

func webView(_ webView: WKWebView, didFail navigation: WKNavigation!, withError error: Error) {
}
 } 
```

# asp.net - ASP.NET Response.Redirect(Request.RawUrl) 不起作用

> ID：12737240
> 
> 赞同：3
> 
> 时间：2012-10-04T22:59:59.527
> 
> 标签：asp.net

我只希望我的 asp.net 网页在更改我的组合框选定值后重新加载。所以我做了

```
 protected void MyComboBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        Response.Redirect(Request.RawUrl);
    } 
```

我根据 [如何在 ASP.NET 中刷新页面使用了 Response.Redirect(Request.RawUrl)？（让它通过代码重新加载自己）](https://stackoverflow.com/questions/1206507/how-to-refresh-the-page-in-asp-net-let-it-reload-itself-by-code)

但是当我在我的组合页面中更改选择时不会重新加载。

为什么，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:01:36.257

确保您已`SelectedIndexChanged`在控件本身上定义了事件。

**编辑：**也启用`AutoPostback`控件，就像 Abe Miessler 指出的那样。

```
AutoPostBack="true"  
OnSelectedIndexChanged="MyComboBox_SelectedIndexChanged" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T23:02:44.897

尝试设置 autopostback = true。你还没有发布你的标记，但我怀疑这会解决它。

# iphone - 记录一个触摸的持续时间，然后打印出来

> ID：12737250
> 
> 赞同：2
> 
> 时间：2012-10-04T23:01:09.070
> 
> 标签：iphone, xcode

您如何记录触摸的持续时间并在屏幕上打印？

![在此处输入图像描述](../Images/b77a988c26b72cf50777ea54f45fa991.png)

这是上面的代码：

```
// add this ivar to your view controller
NSTimeInterval lastTouch;
int textTime;

// assign the time interval in touchesBegan:
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
{
    lastTouch = [event timestamp];
}

// calculate and print interval in touchesEnded:
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
{
    NSTimeInterval touchBeginEndInterval = [event timestamp] - lastTouch;
    textTime = touchBeginEndInterval;
    NSLog(@"touchBeginEndInterval %f", touchBeginEndInterval);
    dynLabel.text = textTime;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:20:42.983

```
dynLabel.text = textTime; 
```

标签的`text`属性需要 a `NSString*`，但你给它一个`NSTimeInterval`Ie 一个数字。这就是错误的意思。`-stringWithFormat:`使用例如NSString 的方法创建一个字符串。

# objective-c - 使用 CoreTelephony 检测 iOS 设备中的 GPS

> ID：12737252
> 
> 赞同：1
> 
> 时间：2012-10-04T23:01:17.827
> 
> 标签：objective-c, ios, gps, hardware, core-telephony

我正在寻找一种方法来检测 iOS 设备是否具有 GPS 单元，我遇到了[这个问题](https://stackoverflow.com/questions/2004689/detect-gps-hardware-in-iphone)。我发现最后一个答案很有趣：

```
CTTelephonyNetworkInfo* netInfo = [[CTTelephonyNetworkInfo alloc] init];
if(netInfo) {
    CTCarrier* carrier = [netInfo subscriberCellularProvider];
    if([[carrier carrierName] length] <=0) {
        //NO operator=>NO 3G and no real GPS  
    }
} 
```

我正在寻找一些确认作为这种技术的有效性/它是否完全准确。我没有足够的设备来自己测试它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T01:19:28.197

在进行了一些挖掘之后，我发现[了 Apple 的这篇文章](http://support.apple.com/kb/HT5467)，作为脚注，它解释说：

*   没有蜂窝网络连接的 iOS 设备仅将 Wi-Fi 用于定位服务（如果 Wi-Fi 网络可用）。

*   GPS 仅在 iPhone 和 iPad Wi-Fi + 3G 型号上可用。

因此，检测蜂窝连接似乎*是*确定 iOS 设备是否具有 GPS 单元的可靠方法。没有蜂窝连接，没有 GPS。

请注意，iOS 通过蓝牙和底座连接器支持外部 GPS 装置。上述方法将判断设备是否具有内部 GPS，但不能判断 LocationManager 是否能够提供 GPS 驱动的位置更新。

# android - 支持 Cookie 和基本身份验证的 Android Web 服务器

> ID：12737260
> 
> 赞同：1
> 
> 时间：2012-10-04T23:02:31.670
> 
> 标签：android, session, web, jsessionid, ijetty

您是否知道我可以在 Android 上安装的 Web 服务器（例如 i-jetty），它允许托管使用基本身份验证和会话 cookie 保护的应用程序？i-jetty 似乎可以工作，但不支持会话 cookie（似乎）。

# javascript - removeChild 有时会删除整个跨度，有时不会

> ID：12737272
> 
> 赞同：3
> 
> 时间：2012-10-04T23:04:16.770
> 
> 标签：javascript, ios, uiwebview, removechild

我正在为 iOS 开发一个富文本编辑器，并且大部分都可以工作，但是遇到了无穷无尽的问题，以确保当用户开始输入时光标在视口中可见。

我想出了一个新颖的方法：在光标位置插入一个跨度，滚动到该跨度，然后将其删除。（如果跨度在屏幕上，我还没有只滚动。）这是我写的：

```
document.addEventListener('keypress', function(e) {            
   jumpToID();
}, false);

function jumpToID() {
  var id = "jumphere2374657";
  var text = "<span id='" + id + "'>&nbsp;</span>"
  document.execCommand('insertHTML', false, text);
  var element = document.getElementById(id);
  element.scrollIntoView();
  element.parentNode.removeChild(element);
} 
```

在某些情况下，这工作得很好，在某些情况下，它会在每次按键之间留下一个不间断的空间，只删除 <span></span> 标记。有任何想法吗？如果有人有建议，我愿意接受更好的方法。我对让光标出现有多难感到有点震惊，但是 JS 对我来说是新的。

**编辑**

这是有效的代码：

```
var viewportHeight = 0;

function setViewportHeight(vph) {
  viewportHeight = vph;
  if(viewportHeight == 0 && vph != 0)
    viewportHeight = window.innerHeight;
}

function getViewportHeight() {
  if(viewportHeight == 0)
    return window.innerHeight;
  return viewportHeight;
}

function makeCursorVisible() {
  var sel = document.getSelection();                  // change the selection
  var ran = sel.getRangeAt(0);                        // into a range
  var rec = ran.getClientRects()[0];                  // that we can get coordinates from
  if (rec == null) {
    // Can't get coords at start of blank line, so we
    // insert a char at the cursor, get the coords of that,
    // then delete it again. Happens too fast to see.
    ran.insertNode( document.createTextNode(".") );
    rec = ran.getClientRects()[0];  // try again now that there's text
    ran.deleteContents();
  }
  var top = rec.top;               // Y coord of selection top edge
  var bottom  = rec.bottom;        // Y coord of selection bottom edge
  var vph = getViewportHeight();
  if (top < 0)      // if selection top edge is above viewport top,
    window.scrollBy(0, top);  // scroll up by enough to make the selection top visible
  if (bottom >= vph)   // if selection bottom edge is below viewport bottom,
    window.scrollBy(0, bottom-vph + 1); // scroll down by enough to make the selection bottom visible
} 
```

viewportHeight 比 Web 应用程序需要的复杂。对于移动应用程序，我们需要考虑键盘，因此提供一种手动设置 viewportHeight 以及从 window.innerHeight 自动设置的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:54:15.013

我不知道这是否适用于 iOS，但如果光标的位置意味着此时有一个选择..

```
function moveToSelection(){
    var sel = document.getSelection(), // change the selection
        ran = sel.getRangeAt(0),       // into a range
        rec = ran.getClientRects()[0], // that we can get co-ordinates from
        dy  = rec.top;                 // distance to move down/up
    window.scrollBy( 0, dy );          // actual move

    // console.log( sel, ran, rec, y );   // help debug
}

moveToSelection(); 
```

相关链接

1.  [**获取选择**](https://developer.mozilla.org/en-US/docs/DOM/window.getSelection)
2.  [**获取范围**](https://developer.mozilla.org/en-US/docs/DOM/Selection/getRangeAt)
3.  [**获取客户端矩形**](https://developer.mozilla.org/en-US/docs/DOM/element.getClientRects)
4.  [**滚动**](https://developer.mozilla.org/en-US/docs/DOM/window.scrollBy)

# sql - 如何在 T-SQL 选择语句中合并“where [binary] is not null”？

> ID：12737281
> 
> 赞同：1
> 
> 时间：2012-10-04T23:05:32.787
> 
> 标签：sql, sql-server

我有一个存储过程，我需要过滤具有二进制值的行并仅返回二进制列中不为空的行。

当我执行这个存储过程时：

```
create procedure sp_GetGraduatingStudentDataByYear
(
    @year nvarchar(4)
)
as
select * from Cohort_Graduation_Student_Data where Exp_Grad_Year = @year and Off_Track != null

go 
```

我没有得到任何结果。

**如何更改此脚本以在二进制列中返回具有空值的行？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T23:07:45.307

这不是因为它是一个二进制列，而是因为`null`在 SQL 中不应该与任何东西进行比较。本质上，`Off_Track != null`条件过滤掉所有行 - 所有检查`column = null`并`column != null`始终评估为`false`.

改用`is not null`：

```
select *
from Cohort_Graduation_Student_Data
where Exp_Grad_Year = @year and Off_Track is not null 
```

# python - 使用 Python 设置和压缩问题

> ID：12737286
> 
> 赞同：5
> 
> 时间：2012-10-04T23:06:30.737
> 
> 标签：python, python-3.x

不知道为什么这个在使用 set 和 zip 时有效：

```
>>> a = ([1])
>>> b = ([2])
>>> set(zip(a,b))
{(1, 2)} 
```

但是这个没有？

```
>>> a = ([1],[2])
>>> b = ([3],[4])
>>> set(zip(a,b))
Traceback (most recent call last):
  File "<pyshell#21>", line 1, in <module>
    set(zip(a,b))
TypeError: unhashable type: 'list' 
```

期望的结果 (1,3) (2,4)

这样做的正确方法是什么？

谢谢！

约翰

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T23:10:31.153

如果我们查看`zip`输出会更有意义：

```
>>> a = ([1]) # equivalent to [1], not a tuple
>>> b = ([2]) # equivalent to [2], not a tuple
>>> list(zip(a,b))
[(1, 2)]

>>> a = ([1],[2])
>>> b = ([3],[4])
>>> list(zip(a,b))
[([1], [3]), ([2], [4])] 
```

在第一种情况下，列表包含一个整数元组；在第二种情况下，它包含列表元组并且列表不可散列。

在第一种情况下，如果你想要一个包含列表的单例元组，你应该使用`a = ([1],)`and `b = ([2],)`。如果您以这种方式定义`a`，`b`那么`set(zip(a, b))`将像在第二种情况下一样失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:55:09.387

您可以执行这样的操作，然后获得所需的输出。

```
a = ([1],[2])
b = ([3],[4])
zip(zip(*a),zip(*b))[0] 
```

像这样 ((1, 2), (3, 4))。

`zip(*a)`转换 a 和 b 元组变量中的所有列表，如 [(1,2)] 和 [(3,4)]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T23:09:06.903

你应该这样写：

```
a = [1, 2]
b = [3, 4] 
```

# entity-framework - EF 5 在运行时更改连接字符串

> ID：12737289
> 
> 赞同：33
> 
> 时间：2012-10-04T23:07:09.717
> 
> 标签：entity-framework, entity-framework-4.1, connection-string, entity-framework-5

好的，我想重新创建一个使用 EF 4.1 到 EF 5.0 创建的项目，足够简单或者至少我认为。我的旧项目中的一件事是我能够在 EF 4.1 中在运行时更改数据库连接字符串：

```
using (var myContext = new MyEntities(ConnectionString))
{

} 
```

简单易行，但在 EF 5.0 中，您必须以不同的方式执行此操作：

```
string connectionString = "data source=LocalHost;initial catalog=MyDatabase;user id=MyUserName;password=MyPassword;multipleactiveresultsets=True;App=EntityFramework";

using (var myContext = new MyEntities())
{
         myContext.Database.Connection.ConnectionString = connectionString;
} 
```

现在，我花了两个小时才弄清楚，所以我想我的问题是这是在运行时更改连接字符串的正确方法吗？如果是他们为什么要做出这样的改变？

我确实找到了这个[链接](https://stackoverflow.com/questions/12364617/ef-5-0-dynamic-connection-string)，但它没有用。我收到了 Ladislav Mrnka 的第一个答案的第一条评论中详细说明的错误。我后来发现这个[链接](https://stackoverflow.com/questions/12660683/how-to-use-dynamic-connection-string-for-sql-server-ce)似乎工作正常。

# 更新

我重新阅读了我发布的[第一个链接](https://stackoverflow.com/questions/12364617/ef-5-0-dynamic-connection-string)，并找到了另一个解决方案，我只是创建了一个部分类：

```
public partial class MyEntities : DbContext
{
    public MyEntities(string connectionString) : base(connectionString) 
    {
          Database.Connection.ConnectionString = connectionString; 
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T17:53:00.177

使用将连接字符串作为参数的上下文构造函数重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T02:52:34.760

查看其他链接[Setup Entity Framework For Dynamic Connection String](https://stackoverflow.com/questions/14440698/setup-entity-framework-for-dynamic-connection-string)。它说 - “你可以通过创建另一个部分类来做到这一点，因为实体类被声明为部分”

# java - 如何解决“java.net.BindException：地址已在使用：JVM_Bind”错误？

> ID：12737293
> 
> 赞同：234
> 
> 时间：2012-10-04T23:07:16.603
> 
> 标签：java, eclipse, networking, serversocket

在 Eclipse 中，我得到了这个错误：

```
run:
     [java] Error creating the server socket.
     [java] Oct 04, 2012 5:31:38 PM cascadas.ace.AceFactory bootstrap
     [java] SEVERE: Failed to create world : java.net.BindException: Address already in use: JVM_Bind
     [java] Java Result: -1
BUILD SUCCESSFUL
Total time: 10 seconds 
```

我不知道为什么它现在出现了，但它在几个小时前运行良好。我需要重新启动机器吗？我怎样才能找到它的底部？我感谢任何提示或建议。

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-10-04T23:20:52.380

如果您知道进程正在运行哪个端口，您可以键入： `lsof -i:<port>`.

例如，`lsof -i:8080`列出在端口 8080 上运行的进程 (pid)。

然后杀死进程`kill <pid>`

* * *

## 回答 #2

> 赞同：164
> 
> 时间：2012-10-05T00:13:10.833

是的，您有另一个进程绑定到同一个端口。

每当我遇到 JVM_BIND 错误时，来自[Windows Sysinternals的](http://technet.microsoft.com/en-US/sysinternals)[TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437)（仅限 Windows）是我最喜欢的应用程序。它显示哪些进程正在侦听哪个端口。它还提供了一个方便的上下文菜单来终止进程或关闭阻碍的连接。

* * *

## 回答 #3

> 赞同：135
> 
> 时间：2014-10-01T18:00:05.307

在窗口中

```
netstat -ano 
```

将列出所有正在侦听的协议、端口和进程。采用

```
taskkill -pid "proces to kill" /f 
```

杀死监听端口的进程。例如

```
 taskkill -pid 431 /f 
```

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2016-06-04T05:45:26.630

在**Ubuntu/Unix**中，我们可以分两步解决这个问题，如下所述。

1.  类型`netstat -plten |grep java`

    这将给出类似于以下的输出：

    ```
    tcp   0   0 0.0.0.0:8080   0.0.0.0:*  LISTEN   1001  76084  9488/java 
    ```

    这`8080`是 java 进程正在侦听的端口号，`9488`是它的进程 id (pid)。

2.  为了释放被占用的端口，我们必须使用`kill`命令杀死这个进程。

    ```
    kill -9 9488 
    ```

    `9488`是前面的进程ID。我们`-9`用来强制停止进程。

您的端口现在应该是空闲的，您可以重新启动服务器。

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2013-03-01T08:46:42.620

在 Mac 中：

**杀死进程** 终端：`kill <pid>`

**查找 pid：** 终端：`lsof -i:<port>`

来自迭戈皮诺的回答

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2018-06-25T08:35:34.133

**（仅限 Windows）**

要杀死一个进程，您首先需要找到进程 ID (pid)

通过运行命令：

```
netstat -ano | findstr :yourPortNumber 
```

[![如下图所示](../Images/45d3c1db98f37dbc4139aea8872b3e46.png)](https://i.stack.imgur.com/ue3dJ.png)

您将获得您的进程 ID (PID)，现在要终止同一个进程，请运行以下命令：

```
taskkill /pid yourid /f 
```

[![在此处输入图像描述](../Images/7338b1154f7a116aac80866ff6a47303.png)](https://i.stack.imgur.com/G2gKF.png)

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2020-04-29T08:06:18.567

**对于窗户**：

1.  **查找进程 ID**

    网络统计-nao | 找到“8080”

它会将进程 ID 显示为数字。

**示例**：

```
TCP    0.0.0.0:8080           0.0.0.0:0              LISTENING       18856 
```

这里**18856**是进程ID

2.  **杀死那个进程**

    taskkill /PID 18856 /F

**输出**：成功：PID 18856 的进程已终止。

在这里使用 taskkill 你正在杀死进程 ID:18856

**对于 Linux/Mac**：

```
sudo kill -9 $(sudo lsof -t -i:8080) 
```

**在这里，您可以通过8080**端口找到该进程，并使用`sudo lsof -t -i:8080`sudo kill 命令将其杀死

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-10-04T23:11:05.437

您有另一个进程在同一端口上运行。

您可以尝试终止在任务管理器中运行的 java.exe 服务之一 - ps 确保您没有终止 eclipse，因为它也被列为 java.exe。如果没有其他工作，重启你的机器无论如何都会修复它。看起来您没有关闭先前测试的套接字。希望这可以帮助。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2017-02-24T07:46:47.820

对于那些正在寻找**最简单答案的**人（因为这是我们通常会错过的），只需停止正在运行的项目并重新启动它。大多数时候我们所做的是忘记停止我们之前运行的项目，当我们重新运行项目时，它会显示这样的问题。

我还附上了一张照片以使其更清晰（我使用“弹簧工具套件”）。所以你需要做的是要么点击最右边的按钮，如果你想重新启动同一个项目，或者首先点击右边第二个按钮来停止你的项目，然后点击最左边的按钮来运行你的项目。我希望这将解决少数新程序员的问题。:)

[![在此处输入图像描述](../Images/3552630acec4db17005536627f25ac51.png)](https://i.stack.imgur.com/eXGMh.png)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-08-17T08:15:00.493

在 Windows CMD 行中，通过输入以下命令找出在绑定端口上保持连接的进程 ID：

C:> netstat -a -o

-a 显示所有连接

-o 显示进程标识符

然后**终止**进程。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-11-01T06:43:42.960

如果您是 linux 用户，则需要关闭您的端口，然后输入

```
fuser -k 8080/tcp 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2021-08-17T07:58:58.323

当另一个进程已在指定端口 (8080) 中运行时，会出现此 BindException。

您可以使用以下任何一种方法。

1.  **更改服务器端口：**如果您使用的是Tomcat服务器和IntelliJ IDE，您可以通过配置tomcat服务器来配置服务器端口

    [![在此处输入图像描述](../Images/f496f61e2612ec0c23a3ace7ceae7418.png)](https://i.stack.imgur.com/pFonb.png)

或者

*   转到 tomcat>conf 文件夹
*   编辑 server.xml
*   搜索“连接器端口”
*   用您的端口号替换“8080”
*   重启tomcat服务器。

2.  **杀死该端口中现有的正在运行的进程并启动服务器。**

> **适用于 Linux/Mac**
> 
> ```
> sudo kill -9 $(sudo lsof -t -i:8080) 
> ```
> 
> **对于 Windows**
> 
> ```
> netstat -ano | findstr :8080
> taskkill /PID typeyourPIDhere /F 
> ```
> 
> **注：**（/F强制终止进程）

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-09-03T07:39:15.787

是的，正如 Guido Simone 所说，因为另一个进程正在监听同一个端口。如果你在 Ubuntu 中，你可以简单地杀死那个进程给出命令 `sudo kill $(sudo lsof -t -i:[port number])`

前任：`sudo kill $(sudo lsof -t -i:8080)`

但是一旦它对我不起作用。我下达了命令

```
$ lsof -i:[port] 
```

它什么也没显示。

我使用命令检查了我 `docker ps -a`的 docker 容器，但没有一个是活着的。所有容器都已停止（但我记得，我停止了一个几分钟前使用相同端口的容器。）。为了确保 docker 不是原因，我停止了整个使用命令 docker 进程`sudo service docker stop`，然后重试。令人惊讶的是，当时eclipse并没有显示错误。它完美地运行了我的程序。

希望我的经验可以帮助一些人。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-10-05T00:08:37.253

该端口已被其他进程使用，因为@Diego Pino 说你可以在 unix 上使用 lsof 来定位进程并杀死相应的进程，如果你在 Windows 上使用 netstat -ano 来获取进程的所有 pids 和每个人都获得的端口。搜索您想要的端口并杀死。

如果可能的话，只需重新启动您的机器就很容易了:)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-05-16T08:57:07.923

重新启动PC一次，我认为它会工作。它开始在我的情况下工作。可以做一件事去任务管理器并结束进程。

[![截图供参考。](../Images/81925bd482c00717784d7e919256f2f3.png)](https://i.stack.imgur.com/5nity.png)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-10-15T10:25:19.827

就我而言，Tomcat 在后台运行。我在使用 Eclipse 时将其安装为外部 servlet。使用 Intellij 中的 Spring Boot，它有自己的服务器，但在它已经被占用时无法启动。
在我的情况下，Tomcat 自动启动我打开我的操作系统，这就是为什么我需要手动关闭他：

```
$ sudo service tomcat stop 
```

当然，“tomcat”取决于您使用的 tomcat 版本。
希望它可能对某人有所帮助。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-07-18T10:17:44.137

当我先启动服务器程序然后启动客户端程序时打开两个控制台时，我在 Eclipse 中遇到了类似的问题。我曾经在单个控制台中停止程序，以为它已经关闭了服务器，但它只关闭了客户端而不是服务器。我在我的任务管理器中发现了正在运行的 Java 进程。通过从各自的控制台关闭服务器和客户端程序解决了这个问题（Eclipse 显示了最新活动程序的控制台）。所以当我再次启动服务器程序时，端口再次打开以被捕获。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-08-18T08:01:16.313

您的端口必须在某个其他进程中处于忙碌状态。[因此，您可以在https://technet.microsoft.com/en-us/sysinternals/bb897437](https://technet.microsoft.com/en-us/sysinternals/bb897437)上下载 TCPView并终止使用端口的进程。

如果您不知道您的端口，请双击未启动的服务器，然后单击打开服务器属性页面，然后单击左栏中的 glassfish。你会在这里找到端口。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-02-17T17:43:55.447

(1) 检查端口是否在使用，杀死该进程

**$ lsof -i:[端口]**

(2)还有一个原因是ipv6使用的端口，解决方法：

编辑**/etc/sysctl.conf**

将此添加到文件中

**net.ipv6.conf.all.disable_ipv6 = 1**

然后让它生效

**$ sudo sysctl -p /etc/sysctl.conf**

或者只是重新启动

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-01-31T07:32:07.870

这意味着其他一些进程已经在使用该端口。如果此端口正被其他一些关键应用程序使用并且您不想关闭该应用程序，则更好的方法是选择任何其他可免费使用的端口。

配置您的应用程序以使用任何其他免费端口，您将看到您的应用程序正常工作。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-09-28T23:08:04.447

您可以关闭每个 Java 进程并重新启动您的应用程序：

```
taskkill /F /IM java.exe 
```

再次启动您的应用程序...

# vba - VBA：激活/选择工作表/行/单元格

> ID：12737297
> 
> 赞同：1
> 
> 时间：2012-10-04T23:08:00.757
> 
> 标签：vba, excel

你好 Stackoverflowers，

我正在尝试使用一个按钮，该按钮首先转到特定目录中的另一个 excel 文件。在执行某些操作时，我想在我运行按钮的 Excel 文件的工作表中添加一行。为此，我需要激活某个行或单元格才能使用它

```
ActiveCell.EntireRow.Insert 
```

但它一直告诉我：

```
activate method of range class failed 
```

我的最后一条线索是：

```
Sheet1.Cells(2, 3).Activate
ActiveCell.EntireRow.Insert 
```

谁能告诉我如何完成这项工作？我想是因为我在另一个工作簿或其他东西中

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T23:24:47.283

这只是一个示例代码，但它可能会帮助您上路：

```
Public Sub testIt()
    Workbooks("Workbook2").Activate
    ActiveWorkbook.Sheets("Sheet2").Activate
    ActiveSheet.Range("B3").Select
    ActiveCell.EntireRow.Insert
End Sub 
```

我假设您可以打开这本书（`Workbook2`在示例中调用）。

* * *

我认为（但我不确定）你可以在一行代码中压缩所有这些：

```
 Workbooks("Workbook2").Sheets("Sheet2").Range("B3").EntireRow.Insert 
```

这样您就不需要激活工作簿（或工作表或单元格）......显然，这本书必须是打开的。

# .net - 对活动模式感到困惑

> ID：12737300
> 
> 赞同：3
> 
> 时间：2012-10-04T23:08:21.840
> 
> 标签：.net, f#, functional-programming

我了解如何在 F# 中定义和使用活动模式，包括部分活动模式以及可用的不同类型的模式。例如

```
let (|Big|Small|) animal = if animal.IsBig then Big(animal) else Small(animal)
let f = function | Big(_) -> "big" |Small(_) -> "small 
```

但是，我对在`let`绑定、参数和其他地方使用活动模式和区分联合感到困惑。例如，MSDN 有以下代码：

```
let GetSubstring1 (Slice(p0, p1, text)) = 
    printfn "Data begins at %d and ends at %d in string %s" p0 p1 text
    text.[p0..p1] 
```

这让我有点困惑。

一个具体的问题。假设我有歧视工会，

```
type Union = A of int * int | B of int 
```

我可以以某种方式制作一个只接受的函数`Union.A`，例如

```
let f (A(a, b)) = a + b 
```

在这种情况下，它告诉我有不匹配的模式。有办法满足吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T23:17:05.457

正如@ildjarn 所指出的，这适用于所有模式。它们可以出现在`match`子句的情况下（和`function`其中类似），也可以出现在`let`绑定函数的参数声明中，甚至出现在`let`值绑定中。

关键区别在于`let`，您只想使用始终成功的*完整模式。*`match`or不需要这个`function`，因为有多个子句，所以如果第一个失败，匹配可以继续并尝试下一个。

例如，以下*完整*模式`int`将其作为 a 接受并返回`string`：

```
let (|AsString|) (n:int) = n.ToString() 
```

以下是一些如何使用它的方法：

```
let (AsString s) = 42         // Defines a value 's' of type string
match 3 with AsString s -> s  // Returns a value "3" of type string
let convert (AsString s) = s  // Defines a function 'int -> string'
let convert = function AsString s -> s  // Same as the previous line 
```

**编辑**：要回答您的第二个问题，如果您使用`let`不*完整*的模式（即只接受一个可区分联合的情况），那么您会收到编译器警告，并且代码可能在运行时失败（如果您使用其他可区分的方式调用它）工会案例）：

```
let f (A(a, b)) = a + b      // This gives compile-time warning
f (B 42)                     // This will fail at runtime 
```

如果您需要定义一个仅适用于其中一种情况的函数，那么您需要定义一个单独的类型。

```
type AInfo = int * int 
type Union = A of AInfo | B of int 
```

然后你可以编写一个只需要的函数`AInfo`（但你仍然可以`Union`在两个选项都代表有效输入的地方使用）。

# networking - 如何识别在一定时期内产生大部分网络流量的设备？

> ID：12737303
> 
> 赞同：0
> 
> 时间：2012-10-04T23:09:02.607
> 
> 标签：networking, snmp, mib, network-traffic, traffic-measurement

如何使用对 MIB-II 对象的 SNMP 查询来识别在特定时间段内产生大部分网络流量的设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:04:38.447

您可以使用 RFC 2863 (IF-MIB) 吗？如果是，那么我建议使用 ifOutOctets (1.3.6.1.2.1.2.2.1.16) 来监控每​​个接口的传出八位字节数。我看不出 MIB-II 对这项任务有何帮助。它有帮助吗？

# java - 奇怪的接口实现

> ID：12737305
> 
> 赞同：1
> 
> 时间：2012-10-04T23:09:13.317
> 
> 标签：java, interface

对不起，我之前有错误的代码...

所以我有一个看起来像这样的界面：

```
public interface Player { 
    void setPartner(Player partner); 
} 
```

我有一个看起来像这样的接口的实现：

```
public class Human implements Player
{
    private Human partner;

    public void setPartner(Human partner)
    {
        this.partner = partner;
    }
} 
```

所以编译器说我没有实现 Player 的每个方法，这向我表明我必须完全匹配 setPartner 方法的参数类型，即使人类是一个玩家。有什么好的方法可以解决这个问题或以不同的方式实施吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T23:30:44.540

在Java中，方法参数是不变的。这意味着`void setPartner(Player partner)`方法签名与方法签名不同，`void setPartner(Human partner)`即使`Human`is-a 也是如此`Player`。所以你不能这样实现（或覆盖）。

扩展一个类时必须小心，因为如果`Player`是一个类并且该方法不是抽象的，而不是它实际上可以工作，但是您会重载该方法而不是覆盖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T23:26:38.783

你不能有协变参数（如果你通过 Player 接口操作你的 Human 实例会发生什么？），但是你可以使用泛型。

```
public interface Player<T extends Player<T>> {
    void setPartner(T partner);
}

public class Human implements Player<Human> {
    private Human partner;

    public void setPartner(Human partner) {
        this.partner = partner;
    }
} 
```

* * *

但是，您不能强制实现类实际使用自己的类型作为 Player 的类型参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T23:51:11.073

这是有道理的，因为`setPartner(Human)`它比`setPartner(Player)`. 通过实施`Player`，您是说`setParner`接受任何`Player`. 您的`setPartner(Human)`方法只接受子类`Human`而不接受其他`Player`实现。

# .htaccess - 隐藏html扩展+重定向.html版本+特殊情况异常

> ID：12737308
> 
> 赞同：1
> 
> 时间：2012-10-04T23:09:45.330
> 
> 标签：.htaccess, mod-rewrite

我很难理解 htaccess mod_rewrite，虽然我找到了几个相关的问题 + 答案，但不幸的是，我无法让我非常具体的情况正常工作（老实说，mod_rewrite 甚至在搜索一本七印章的书后数小时）

我的根目录中有 foo.html 和 bar.html。现在，我想将 foo.html 作为默认目录索引（已解决，很容易），但从那里我没有得到它。

我想要实现的是：

1.  隐藏 .html 扩展
    用户应该能够在不看到 .html 的情况下键入`/bar`获取`/bar.html`（对于每个 .html）
2.  301 重定向 .html 版本
    用户应该能够在 url 中输入`/bar.html`和查看`/bar`（避免重复，对于每个 .html）
3.  最棘手的部分：
    与`foo.html`默认目录索引一样，输入 / 已经显示（透明）`/foo.html`，但我需要输入`/foo.html`来解析到 / 以及输入 /foo 来解析到 /

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:21:13.303

尝试将这些规则放在文档根目录的 htaccess 文件中：

```
RewriteEngine

# 1\. hiding the .html extensions
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.html -f
RewriteRule ^ /%1.html [L]

# 2\. 301 redirecting .html version
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^\ ]+)\.html
RewriteCond %1 !foo$
RewriteRule ^ /%1 [L,R=301]

# 3\. typing /foo.html to resolve to / as well as typing /foo to resolve to / 
RewriteCond %{REQUEST_URI} ^/(.*?/?)foo(\.html)?$
RewriteRule ^ /%1 [L,R=301] 
```

此外，请确保您已关闭多视图：

```
Options -Multiviews 
```

* * *

第一条规则有 2 个条件，第一个将 URI 分组在 first`/`和可能的 last之间`/`。在下一个条件中使用**%1**`/path/to/www/document/root/%1.html`引用它，看看它是否是一个存在的文件。如果两者都为真，它会在内部重写 URI 以`.html`在末尾包含 a。

第二条规则有 2 个条件，第一个匹配*实际请求*而不是 URI（它可以随着规则的应用和重写发生而改变）。它查看是否存在以 结尾的请求，`.html`如果是，则第二个条件确保它不是`foo.html`请求（因为最后一个规则处理了该请求）。如果两者都为真，那么它将浏览器重定向到没有 html 的 URI 部分，再次使用**%1**从第一个条件引用匹配中的分组`([^\ ]+)`。

最后一条规则检查请求是针对 a`foo`还是`foo.html`。如果是这样，重定向删除 URI 的那部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T06:30:02.000

我正在使用下面的那个，它可以工作，但在某些奇怪的情况下，当为客户端使用 WARRANTY 脚本时，它不会做任何事情。

然而; 在子文件夹中通过 iFrame 调用外部脚本的其他脚本似乎与 WARRANTY 脚本除外。...

```
Options +FollowSymLinks  -MultiViews
RewriteEngine on
RewriteBase /

RewriteCond %{ENV:REDIRECT_END}  =1
RewriteRule ^ - [L,NS]

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*?)\.(php|html?)$        $1   [R=301,NC,NS]

RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule (.*)$ $1.html   [L,E=END:1,NS]

RewriteCond %{REQUEST_FILENAME}\.htm -f
RewriteRule (.*)$ $1.htm    [L,E=END:1,NS]

RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule (.*)$ $1.php    [L,E=END:1,NS] 
```

我希望这有帮助。

# sencha-touch-2 - 控制器未捕获的事件

> ID：12737309
> 
> 赞同：2
> 
> 时间：2012-10-04T23:09:49.277
> 
> 标签：sencha-touch-2

我正在尝试响应控制器内的视图触发事件。该事件确实会触发，但永远不会调用控制器操作。

*查看*：

```
Ext.define("MyApp.view.Dashboard", {
    extend: 'Ext.Container',
    xtype: 'my_dashboard',
    config: {
        items: [
            {
                xtype: 'dataview',
                listeners: {
                    itemtap: function(sender, index, elem, record) {
                        // fires with param, e.g. 'inbox'
                        this.fireEvent(record.get('name'));
                    }
                }
            }
            ... 
```

*控制器*：

```
Ext.define('MyApp.controller.Dashboard', {
    extend: 'Ext.app.Controller',
    config: {
        control: {
            'my_dashboard': {
                'inbox': 'showInbox',
                ...
            }
        }
    },

    showInbox: function () {
        /* never gets called */
    },

    ... 
```

我究竟做错了什么？

**更新**：

我找到了一个解决方案，但感觉很hacky。我向数据视图*和*`bubbleEvents`视图添加了一个配置，事件开始进入控制器。*`my_dashboard`*

 *由于仪表板可以有可变数量的项目，我不知道我需要冒泡哪些事件。当然，我可以冒泡所有可能的仪表板事件，但这似乎是一个巨大的杂物。

视图是否应该触发应用程序事件，例如`MyApp.app.fireEvent()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:11:47.547

**更新**

以下是一些可以帮助您入门的代码：

*控制器：*

```
Ext.define('MyApp.controller.Dashboard', {
    extend: 'Ext.app.Controller',
    config: {
        control: {
            'my_dashboard': {
                painted: 'onDashboardPainted',
                inbox: 'showInbox'
            }
        }
    },

    onDashboardPainted: function(dashboard, eOpts) {
        dashboard.down('dataview').on('itemtap', function(sender, index, elem, record){ 
          dashboard.fireEvent(record.get('name'));
          //check the console to make sure you the value is: inbox
          console.log(record.get('name'));
        });
    },

    showInbox: function () {
        console.log('showInbox init');
    }, 
```

* * *

这绝对是一个范围问题...在您的控制器中为 my_dashboard 添加一个绘制函数...第一个函数变量将是 my_dashboard 组件本身：

```
painted: function(dashboard,... 
```

现在在绘制函数中动态添加监听器：

`dashboard.down('dataview').on(`...其余的侦听器代码...

现在在听众里面做`dashboard.fireEvent(....);`

对不起，我的手机上的格式，如果你不能让它工作，我明天会发布代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:55:26.170

我会在数据视图上放一个[itemId](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-itemId)。

```
itemId: 'my_dashboard_dataview' 
```

然后在你的控制器中......

```
control: {
            '#my_dashboard_dataview': {
                'itemtap': 'showInbox',
                ...
            }
        } 
```*

# operators - 临时扫描仪无法正常工作

> ID：12737316
> 
> 赞同：0
> 
> 时间：2012-10-04T23:10:26.227
> 
> 标签：operators, adhoc

到目前为止，我有这个假设是临时扫描仪的代码，我不确定问题到底出在哪里，因为我在 output.txt 文件中遇到了一个非常奇怪的错误。当程序到达左括号时，一切都开始了，我的 checkforoperators 函数有问题吗？我看过但发现很少，甚至问过其他人，但对于问题所在并没有真正的运气。

输入文件包含这个

```
read A1
read A2
sum:=(A1-33)+A2*5.5
write sum
write (A1+A2)/2 
```

并且输出文件应该看起来像这样

```
read
A1
read
A2
Sum
:=
(
A1
-
33
)
+
A2
*
5.5
write
sum
write
(
A1
+
A2
)
/
2 
```

这是主文件

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;

// This program is an ad-hoc scanner.
// It will recognize tokens and seperate them.
// this language will NOT DISTINGUISH between uppercase or lowercase.

    void stripSpacing(string &);
    void checkForCommands();
    void checkForLetters();
    void checkForOperators();
    void checkForAssignment();
    void checkForDecimal();
    void checkForDigit();

    int x1 = 0;
    int x2 = 0;
    int vars[10];
    // Only for demonstration purposes, we could use a dynamic array for larger purposes.

    string holder;
    // used to hold the current string before processing.

    fstream handling;
    // file handling from other libraries.
    fstream output;

    char temp1[1];
    char temp2[1];
    int x = 0;
    int xtemp = 0;

int main()
{
    output.open("output.txt");
    handling.open("input.txt");

    if (handling.is_open())
    {
        while (!handling.eof())
        {
            dcom:
            getline (handling,holder);
            if(holder[x] == '/' && holder[x+1] == '/')
            {
                cout << "This line has only comments.... REMOVED :)" << endl;
                //do nothing :)
                goto dcom;
            }
            cout << endl;
            stripSpacing(holder);
            cout << "The line is this long after removing spaces: " << holder.length() << endl;
            cout << "The line contains: " << holder << endl;
            cout << endl;

            while(holder.length() != x)
            {
                // let's check for commands, such as read write or sum.
                checkForOperators();
                checkForAssignment();
                checkForDecimal();
                checkForDigit();
                checkForCommands();
                checkForLetters();
            }
            output << "\n";

            x=0;
        }

    handling.close();
    output.close();
    return 0;
    }
}

void stripSpacing(string &str)
{
    for (int i=0; i<str.length(); i++)
        if (str[i]==' ')
        {
            str.erase(i,1);
            i--;
        }
}
void checkForOperators()
{
    if(holder[x] == '(' || holder[x] == ')'|| holder[x] == '+' || holder[x] == '-' || holder[x] == '*' ||holder[x] == '/')
    {
        output << holder[x] + "\n";
        x++;
    }
    cout << "checkForOpertors" << endl;
}

void checkForCommands()
{
    xtemp = x;
    if(holder[x] == 'w')
    {
        x++;
        if(holder[x] == 'r')
        {
            x++;
            if(holder[x] == 'i')
            {
                x++;
                if(holder[x] == 't')
                {
                    x++;
                    if(holder[x] == 'e')
                    {
                        x++;
                        output << "write\n"; goto stop;
                    }else{x=xtemp; goto stop;}
                }else{x=xtemp; goto stop;}
            }else{x=xtemp; goto stop;}
        }else{x=xtemp; goto stop;}
    }

    if(holder[x] == 'r')
    {
        x++;
        if(holder[x] == 'e')
        {
            x++; 
            if(holder[x] == 'a')
            {
                x++;
                if(holder[x] == 'd')
                {
                    x++;
                    output << "read\n"; goto stop;
                }else{x=xtemp; goto stop;}
            }else{x=xtemp; goto stop;}
        }else{x=xtemp; goto stop;}
    }

    if(holder[x] == 's')
    {
        x++;
        if(holder[x] == 'u')
        {
            x++;
            if(holder[x] == 'm')
            {
                x++;
                output << "sum\n"; goto stop;
            }else{x=xtemp; goto stop;}
        }else{x=xtemp; goto stop;}
    }

    stop:
    cout << "checkForCommand" << endl;
}

void checkForLetters()
{
    if(isalpha(holder[x]))
    {
        output << holder[x];
        x++;
    }
    cout << "checkForLetters" << endl;
}

void checkForAssignment()
{
    if(holder[x] == ':')
    {
        x++;
        if(holder[x] == '=')
        {
            output << ":=\n";
            x++;
        }
        else
        {
            cout << "ERROR!!! NO : BEFORE =" << endl;
        }
    }
    cout << "checkForAssign" << endl;
}

void checkForDecimal()
{
    if(holder[x] == '.')
    {
        x++;
        if(isdigit(holder[x]))
        {
            output << '.';
            x--;
        }
    }
    cout << "checkForDeci" << endl;
}

void checkForDigit()
{
    if(isdigit(holder[x]))
    {
        output << holder[x];
        x++;
    }
    cout << "checkForDig" << endl;
} 
```

# emacs - 在 Emacs org-mode 中折叠当前大纲

> ID：12737317
> 
> 赞同：19
> 
> 时间：2012-10-04T23:10:26.737
> 
> 标签：emacs, org-mode

假设我在具有以下结构的文档中处于 org-mode：

```
* First headline 
* Second headline
** Section A
   Here is one line
   Here is another line
   blah, blah
** Section B 
```

假设光标在读取的行上`Here is another line`。我想`** Section A`用键盘快捷键从这个位置折叠。

*   如果我按下`<TAB>`它不会崩溃`** Section A`，因为我需要光标在星星上才能工作。
*   如果我按下`<Shift-TAB>`它会折叠**所有**轮廓，而不是当前轮廓。

有没有办法**循环**折叠**范围内**的大纲（即“当前大纲”）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-04T23:28:53.547

您可以通过更改 的值来自定义`org-cycle`命令（绑定到）的行为。`<TAB>``org-cycle-emulate-tab`

要`** Section A`在光标位于时折叠它，`Here is another line`请将以下行添加到您的 .emacs 文件中：

```
(setq org-cycle-emulate-tab 'white) 
```

这`white`将允许您仍然使用`<TAB>`缩进空行。从[org-mode Github](https://github.com/tkf/org-mode/blob/master/lisp/org.el#L963)：

```
org-cycle-emulate-tab's value is t

Documentation:
Where should `org-cycle' emulate TAB.
nil         Never
white       Only in completely white lines
whitestart  Only at the beginning of lines, before the first non-white char
t           Everywhere except in headlines
exc-hl-bol  Everywhere except at the start of a headline 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-01T15:35:48.103

如果您不介意分两步执行此操作：

1.  `C-c C-p`：[将光标移动到上一个标题](https://orgmode.org/manual/Motion.html)（`** Section A`在您的示例中）

2.  `TAB`：折叠部分

这种方法不需要任何配置，只要你习惯了。

# applescript - 使用Applescript搜索/复制文件夹中的多个文件

> ID：12737318
> 
> 赞同：0
> 
> 时间：2012-10-04T23:10:28.610
> 
> 标签：applescript, finder

我有一个文本文件，其中包含大约 500 个选定文件名（每个文件名在自己的行中），这些文件名来自我用 3,000 多张照片拍摄的事件。我希望能够在文件夹中找到所有这些图像，复制它们，然后将这些复制的文件移动到不同的文件夹中。

这就是我到目前为止所拥有的。现在它只是复制包含 3,000 张图像的整个文件夹并将其放入目标文件夹，而不是单个文件。

文本文件：

```
_EPW0847.jpg
_EPW0848.jpg
_EPW0853.jpg
ETC....
```

苹果脚本：

```
将照片设置为（阅读（选择带有提示“选择文本文件”的文件）的段落）
将 theSourceFolder 设置为（选择带有提示“选择源文件夹”的文件夹）作为字符串
将目标设置为（选择带有提示“选择目标文件夹”的文件夹）
用照片中的名字重复
    尝试
        告诉应用程序“Finder”将别名（theSourceFolder 和 theName）复制到 theDestination 并替换
    结束尝试
结束重复
告诉应用程序“Finder”
    告诉文件夹 theDestination 将 theCount1 设置为（项目数）作为字符串
结束告诉
将 theCount2 设置为（照片的计数）作为字符串
显示对话框（theCount1 & " of " & theCount2 & " 项目复制到 " & theDestination）按钮 {"OK"}
```

任何帮助都会很棒。我还不太了解苹果脚本，但我正在学习。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:03:29.773

```
设置要读取的文件内容（选择带有提示“选择逗号分隔的文本文件”的文件）
将文本设置为结果
将 AppleScript 的文本项分隔符设置为 ","
将 theTextItems 设置为 theText 的文本项
将 AppleScript 的文本项分隔符设置为 {""}
文本项
将 theSourceFolder 设置为（选择带有提示“选择源文件夹”的文件夹）作为字符串
将目标设置为（选择带有提示“选择目标文件夹”的文件夹）
在 TextItems 中重复 EPSName
   告诉应用程序“Finder”
       将 EPSFile 设置为 SourceFolder 和 EPSName
       将文件 theEPSFile 移动到文件夹 theDestination 并替换
   结束告诉
结束重复
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:53:05.047

你很亲近！

```
set thePhotos to paragraphs of (read (choose file with prompt "Choose a text file"))
set theSourceFolder to (choose folder with prompt "Choose source folder")
set theDestination to (choose folder with prompt "Choose destination folder")
set dupeList to {}
repeat with theName in thePhotos
    try
        set end of dupeList to alias ((theSourceFolder as text) & theName)
    end try
end repeat

tell application "Finder" to duplicate dupeList to theDestination with replacing

set theCount1 to (count of dupeList) as text
set theCount2 to (count of thePhotos) as text
display dialog (theCount1 & " of " & theCount2 & " items copied to " & (theDestination as text)) buttons {"OK"} 
```

如果文本文件中有空行，请尝试以下操作：

```
set thePhotos to paragraphs of (read (choose file with prompt "Choose a text file"))
set theSourceFolder to (choose folder with prompt "Choose source folder")
set theDestination to (choose folder with prompt "Choose destination folder")
set dupeList to {}

repeat with theName in thePhotos
    try
        if theName ≠ "" then
            set end of dupeList to alias ((theSourceFolder as text) & theName)
        end if
    end try
end repeat 
```

# python - Python 的 GzipFile 类是否有默认的最大缓冲区大小？

> ID：12737320
> 
> 赞同：1
> 
> 时间：2012-10-04T23:10:39.617
> 
> 标签：python, gzip, base64, buffer, compression

我正在尝试恢复/解码一个经过 gzip 压缩然后进行 base64 编码的字符串。目前，我正在使用 Python 的 gzip 模块（尤其是 GzipFile 类）来解压缩作为 base64 解码结果的类文件对象。在 Python 2.7.3 下：

```
import gzip
from base64 import b64decode
from cStringIO import StringIO

for page_content in open(page_content_file, 'rb'):
    page_content_decoded = gzip.GzipFile(fileobj=StringIO(b64decode(page_content))).read() 
```

我遇到的问题是我在 gzip 解压缩阶段达到了某种上限。我已经分解了这个长语句并测试了各个组件...... page_content 的长度在 base64decode() 或 StringIO() 级别不受限制。

（为图片链接道歉，我是新用户，没有足够的声誉来附加图片）。

以下是[原始压缩后的 page_content 长度](http://i.imgur.com/HVLKf.png)的外观，以及[page_content_decoded 字符串的长度](http://i.imgur.com/n1Azk.png)：

显然，输出长度更长，因为我正在解压缩它们；但是，很明显我正在达到某种最大缓冲区大小或 max_bytes 或其他东西。我可以为 gzip 解压缩设置一个值吗？我是否需要分块读取 gzip 文件并将这些块连接起来？（我已经尝试过这两种方法都没有成功）。

谢谢你的帮助！

# sql - 使用 CTE 对查询结果进行分组

> ID：12737323
> 
> 赞同：2
> 
> 时间：2012-10-04T23:10:43.257
> 
> 标签：sql, postgresql, timestamp, aggregate-functions, common-table-expression

我有一个基于 CTE 的查询，我向其中传递了大约 2600 个 4 元组纬度/经度值 - 这些值已被 ID 标记并保存在名为坐标的第二个表中。这些左上角和右下角的纬度/经度值被传递到 CTE，以显示给定两个时间戳在这些坐标内发出的请求量（每小时）。

但是，我想在给定的时间戳内获得每天的总请求数。也就是说，我想获取每个指定日期的用户请求总数。例如，用户选择每周三或周三和周四等查看 - 2012 年 1 月 1 日至 16 日期间的 11:55 至 22:04 之间，我通过的每个纬度/经度 4 元组。输出基本上是这样的：

```
coordinates_id | stamp       | zcount

1                Jan 4 2012    200 (total requests on Wednesday Jan 4 between 11:55 and 22:04)
1                Jan 11 2012   121 (total requests on Wednesday Jan 11 between 11:55 and 22:04)
2                Jan 4 2012    255 (total requests on Wednesday Jan 4 between 11:55 and 22:04)
2                Jan 11 2012   211 (total requests on Wednesday Jan 11 between 11:55 and 22:04)
.
.
. 
```

我该怎么做？我的查询如下：

```
WITH v AS (
   SELECT '2012-01-1 11:55:11'::timestamp AS _from -- provide times once
         ,'2012-01-16 22:02:21'::timestamp AS _to
   )
, q AS (
   SELECT c.coordinates_id
        , date_trunc('hour', t.calltime) AS stamp
        , count(*) AS zcount
   FROM   v
   JOIN   mytable t ON  t.calltime BETWEEN v._from AND v._to
                   AND (t.calltime::time >= v._from::time AND
                        t.calltime::time <= v._to::time) AND 
(extract(DOW from t.calltime) = 3)
   JOIN   coordinates c ON (t.lat, t.lon) 
                   BETWEEN (c.bottomrightlat, c.topleftlon)
                       AND (c.topleftlat, c.bottomrightlon)
   GROUP BY c.coordinates_id, date_trunc('hour', t.calltime)
   )
, cal AS (
   SELECT generate_series('2011-2-2 00:00:00'::timestamp
                        , '2012-4-1 05:00:00'::timestamp
                        , '1 hour'::interval) AS stamp
   FROM v
   )
SELECT q.coordinates_id, cal.stamp, COALESCE (q.zcount, 0) AS zcount
FROM v, cal
LEFT JOIN q USING (stamp)
WHERE (extract(hour from cal.stamp) >= extract(hour from v._from) AND
       extract(hour from cal.stamp) <= extract(hour from v._to)) AND 
(extract(DOW from cal.stamp) = 3)
       AND cal.stamp >= v._from AND cal.stamp <= v._to
GROUP BY q.coordinates_id, cal.stamp, q.zcount
ORDER BY q.coordinates_id ASC, stamp ASC; 
```

它产生的样本结果是这样的：

```
coordinates_id  | stamp                | zcount
1                 2012-01-04 16:00:00    1
1                 2012-01-04 19:00:00    1
1                 2012-01-11 14:00:00    1
1                 2012-01-11 17:00:00    1
1                 2012-01-11 19:00:00    1
2                 2012-01-04 16:00:00    1 
```

因此，正如我上面提到的，我希望将其视为

```
coordinates_id  | stamp      | zcount
1                2012-01-04    2
1                2012-01-11    3
2                2012-01-04    1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:26:20.817

将您的最终更改`SELECT`为：

```
SELECT q.coordinates_id, cal.stamp::date, sum(q.zcount) AS zcount
FROM   v, cal
LEFT   JOIN q USING (stamp)
WHERE  extract(hour from cal.stamp) BETWEEN extract(hour from v._from)
                                        AND extract(hour from v._to)
AND    extract(DOW from cal.stamp) = 3 
AND    cal.stamp >= v._from
AND    cal.stamp <= v._to
GROUP  BY 1,2
ORDER  BY 1,2; 
```

`cal.stamp`迄今为止，它的关键部分是： `cal.stamp::date`.
那，和`sum(q.zcount)`。

# google-chrome - 如何使用 Chrome 检查器控制台

> ID：12737331
> 
> 赞同：0
> 
> 时间：2012-10-04T23:11:44.180
> 
> 标签：google-chrome, code-inspection

在这个[页面上](http://tutorial9.net/demos/button-sprites/demo.html)有一个带有 jQ​​uery 效果的按钮。我想加快动画速度，看看它会是什么样子。所以我打开了检查器，注意到速度有一个淡入淡出效果`500`。我想改变这个`100`，看看它会是什么样子。如何使用控制台脚本窗口执行此操作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:33:18.210

如果您打开元素选项卡并展开您感兴趣的代码部分，您可以双击代码进行编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:49:49.383

您可以在控制台窗口中运行以下代码，脚本只需删除元素并再次添加它，您可以在 fadeTo() 中更改速度

```
$(".hover").remove();
$('.otherbutton,.homebutton,.downloadbutton,.donatebutton')
   .append('<span class="hover"></span>').each(function () {
            var $span = $('> span.hover', this).css('opacity', 0);
            $(this).hover(function () {
                $span.stop().fadeTo(200, 1);
            }, function () {
        $span.stop().fadeTo(500, 0);
            });
   }); 
```

# mongodb - mongodb内存释放

> ID：12737336
> 
> 赞同：1
> 
> 时间：2012-10-04T23:12:51.277
> 
> 标签：mongodb, memory-leaks

我是 mongodb 的新手，并用它做一些测试（1 个主 + 1 个从）。我们在几个集合中插入了 200 万个文档（Ubuntu，具有 6G RAM，四核），mongodb 的内存从 40m 增加到 4G（我们可以接受）。现在我们删除了所有数据，我们预计内存 (RSS) 会回落到 40m。正常吗？mongodb 是否需要时间来刷新内存（基于一些调度）？

仅供参考：性能（来自前端 GUI）非常好，并且通过添加索引得到了很大改善。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:18:55.253

1.  MongoDB 使用内存映射文件。
2.  删除记录时，MongoDB 不会自动缩小文件的大小；它只是将文件内的空间标记为空闲，以便重复使用。
3.  您可以强制 Mongo 通过重建数据库来回收空间。

[http://www.mongodb.org/display/DOCS/Excessive+Disk+Space](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space)

# arrays - Scipy/Numpy：对多个索引求和

> ID：12737348
> 
> 赞同：2
> 
> 时间：2012-10-04T23:13:54.273
> 
> 标签：arrays, numpy, sum, scipy, nested-loops

假设我有一个表达式，我需要找到它的总和：

![在此处输入图像描述](../Images/42c212529ac7002e656360a01725cb16.png)

其中边界是有限且已知的。在 scipy/numpy 中计算这样一个总和的最快或最有效的方法是什么？可以使用嵌套的 for 循环来完成，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T03:42:17.040

怎么样

```
np.dot(x[:amax], np.cumsum(y[:amax] * np.sum(z[cmin:cmax]))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T14:14:27.053

`np.einsum`对于这类总和，也可能是一种选择。正如 nevsan 所展示的那样，`b`你`a`需要首先使用它`np.cumsum`，并且`np.einsum`在给定的示例中不应该更快。

它可能看起来像这样：

```
 y_acc = np.add.accumulate(y[:amax]) # same as cumsum
 result = np.einsum('i,i,j->', x[:amax], y_acc, z[cmin:cmax]) 
```

然而，这非常慢，因为 einsum 并没有优化`z`求和只需要进行一次的事实，因此您需要手动重新制定它：

```
result = np.einsum('i,i->', x[:amax], y_summed) * z[cmin:cmax].sum() 
```

然而，在这种情况下应该比基于 nevsan 的`np.dot`方法慢，因为`dot`通常应该得到更好的优化（即`np.einsum(ii->, a, b)`比 慢`np.dot(a, b)`）。但是，如果您有更多的数组要总结，这可能是一个不错的选择。

# .net - 在 Windows 7 中使用 MSI 安装时，注册表中会发生什么？

> ID：12737352
> 
> 赞同：0
> 
> 时间：2012-10-04T23:15:13.023
> 
> 标签：.net, windows-7, installation, registry, windows-installer

在带有 MSI 的 Windows 7 中安装程序时（所有 Windows 版本都很棒......但现在 Windows 7 就足够了）......

-安装时注册表中所做的更改是什么和在哪里以及如何做所有这些变化都相互关联吗？

-如果我需要它，我如何找到与给定安装相关的**所有**数据，我是否必须通过注册表来获取这些数据，或者是否有另一种更有效或更合适的方式来访问数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:01:14.127

使用 MSI API，例如[MsiGetProductInfoEx 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370131%28v=vs.85%29.aspx)。正如 Hans 所提到的，注册表数据大多没有记录，因为它是一个实现细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:13:50.303

我一直在玩注册表和安装，看看我能想出什么。**如果有人可以进一步详细说明我的答案或进行任何更正，将不胜感激，因为此答案仅来自观察，而不来自任何官方来源。**我制作了一些表格来描述我发现的内容，如下图所示。此外，为了访问所需的信息（IE、MSI 的 ProductName 或 ProductCode 属性），我遇到了 WIX（[http://wixtoolset.org/](http://wixtoolset.org/)）并且正在使用 Micrsoft.Deployment.Installer.dll 以及其他库包含在 WIX 中，因为它们非常甜。

我不知道我在这里引用的所有密钥和代码的官方术语......所以如果我因为它们似乎指定的东西而编造它们，请不要感到惊讶，因为我做到了。

**更新：**我刚刚在 MSI 文档中找到了一些更有用的信息，可能会在这里受到赞赏：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa372105 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372105(v=vs.85).aspx)

![针对 MSI 执行的安装分析 Windows 7 注册表](../Images/018623e613aa88ed824b672d57855e19.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:48:12.037

使用 MsiGetProductInfoEx（可能还有 MsiEnumProductsEx）是获得有关已安装产品信息的推荐编程方法。使用这种方法，您可以比较对 ProductCode、ProductVersion 和包代码（即修订号摘要属性）值的更改。然而，对应用程序的小幅更新可能会使 ProductCode 和 ProductVersion 保持不变。一个典型的小更新只更改一两个文件或一个注册表项，在这种情况下，包代码也应该更改。但是，带有语言转换的产品可能与没有转换的产品具有相同的包代码。

如果您正在开发自己的 Windows Installer 程序包，需要确定用户是否已经安装了应用程序的某个版本，您可以使用 Windows Installer 服务在应用程序安装期间搜索特定文件或目录。这种方法需要在 Windows 安装程序数据库中填充适当的表，并且 msi 应该运行 AppSearch 操作。此方法在此处发布的 Microsoft 的 Windows Installer 文档中进行了描述：

[搜索现有应用程序、文件、注册表项或 .ini 文件项](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371564%28v=vs.85%29.aspx)

# r - 使用带有 lmer() 的预测变量矩阵

> ID：12737353
> 
> 赞同：2
> 
> 时间：2012-10-04T23:15:20.313
> 
> 标签：r, lme4

我试图用大量预测变量拟合模型，这样在模型公式中列举它们会很乏味。使用 lm() 很简单：

```
indicatorMatrix <- data.frame(matrix(rbinom(26000, 1, 1/3), ncol = 26))
colnames(indicatorMatrix) <- LETTERS
someDV <- rnorm(nrow(indicatorMatrix))

head(indicatorMatrix) 

# One method, enumerating variables by name:
olsModel1 <- lm(someDV ~ A + B + C + D,  # ...etc.
               data = indicatorMatrix)

# Preferred method, including the matrix of predictors:
olsModel2 <- lm(someDV ~ as.matrix(indicatorMatrix))
summary(olsModel2) 
```

由于我有大量的预测变量（超过本发明示例中的 26 个），我不想像第一个示例（`someDV ~ A + B + C + D...`）中那样单独列出它们，我可以通过仅包括预测变量来避免这种情况`as.matrix`。

但是，我想拟合一个混合效果模型，如下所示：

```
library(lme4)
meModel1 <- lmer(someDV ~ (1 | A) + (1 | B) + (1 | C),  # ...etc.
                 data = indicatorMatrix)
summary(meModel1) 
```

**除了**我想包含大量随机效应项。而不是必须键入`(1 | A) ... (1 | ZZZ)`，我想以类似于`olsModel2`上面使用的矩阵方法的方式包含每个预测变量。显然，以下内容不起作用：

```
meModel2 <- lmer(someDV ~ (1 | as.matrix(indicatorMatrix))) 
```

您对如何使用 lmer() 最好地复制随机效应的矩阵预测器方法有什么建议吗？我非常愿意考虑“实用”的解决方案（即黑客），只要它们是“程序化的”并且不需要我复制和粘贴等。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:20:49.510

我*认为*将公式构造为字符串然后使用`as.formula`类似于

```
restring1 <- paste0("(1 | ",colnames(indicatorMatrix),")",collapse="+")
form <- as.formula(paste0("someDV ~",restring1))
meModel1 <- lmer(form, data = data.frame(someDV,indicatorMatrix)) 
```

应该可以工作（无论如何它在我的系统上运行而不会抱怨......）

# linux - Unix/Linux Shell Grep 切

> ID：12737356
> 
> 赞同：0
> 
> 时间：2012-10-04T23:15:50.863
> 
> 标签：linux, shell, unix, grep, cut

我有一个文件，说“名称”，看起来像这样

```
first middle last     userid
Brian Duke Willy      willybd
... 
```

每当我使用以下

```
line=`grep "willybd" /dir/names`
name=`echo $line | cut -f1-3 -d' '`
echo $name 
```

它打印以下内容：

```
Brian Duke Willy      willybd
Brian Duke Willy 
```

我的问题是，如何在不先打印我剪切的原始行的情况下让它只打印“Brian Duke Willy”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:02:55.880

做这种事情的通常方法是：

```
awk '/willybd/{ print $1, $2, $3 }' /dir/names 
```

或者，更具体地说

```
awk '$4 ~ /willybd/ { print $1, $2, $3 }' /dir/names 
```

或者

```
awk '$4 == "willybd" { print $1, $2, $3 }' /dir/names 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:20:24.070

```
grep "willybd" /dir/names | cut "-d " -f1-3 
```

剪切的默认分隔符是制表符，而不是空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T23:19:01.180

除非您需要中间变量，否则您可以使用

```
grep "willybd" /dir/names | cut -f1-3 -d' ' 
```

linux 的一大优点是大多数命令都可以用作过滤器：它们读取`stdin`和写入`stdout`，这意味着您可以将一个命令的输出“管道”到下一个命令。这就是`|`角色所做的。发音为*pipe*。

# java - 谷歌地图 API 节点

> ID：12737357
> 
> 赞同：0
> 
> 时间：2012-10-04T23:15:52.043
> 
> 标签：java, google-maps, google-maps-api-3, kml

我之前浏览了整个 Google Maps API 参考列表，也许我只是很愚蠢，但我找不到任何与我需要完成的事情相关的内容。

我希望从只有道路的谷歌地图中导入某种形式的 XML 数据。我的计划是使用 XML 文件在 Java 中使用 OpenGL 绘制通往 2D 或 3D 环境的道路。这对我来说很容易。

我发现最接近我需要的是 KML 数据，但据我所知，这仅适用于标记，而不适用于路线图。抱歉，如果我的问题含糊不清，但如果让我知道，我会尽力详细说明。

高程数据也可用于 3D 部分，但不一定需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:51:56.877

谷歌地图上的道路网络无法下载。听起来这就是你要找的东西。

# ios - 请帮助调整此示例代码

> ID：12737362
> 
> 赞同：0
> 
> 时间：2012-10-04T23:16:24.880
> 
> 标签：ios, core-foundation, cfmutabledictionary

我想修改下面的示例代码以在 myValues 字典中存储**uint**值而不是**CGPoint值。**我不太熟悉如何使用 CoreFoundation 类型，所以在这里需要帮助：S

```
 - (void)cacheBeginPointForTouches:(NSSet *)touches
    {

         CFMutableDictionaryRef myValues = CFDictionaryCreateMutable (
                                                      kCFAllocatorDefault,
                                                      20,
                                                      NULL,
                                                      NULL
                                                      );

        if ([touches count] > 0) {
            for (UITouch *touch in touches) {
                CGPoint *point = (CGPoint *)CFDictionaryGetValue(myValues, touch);
                if (point == NULL) {
                    point = (CGPoint *)malloc(sizeof(CGPoint));
                    CFDictionarySetValue(myValues, touch, point);
                }
                *point = [touch locationInView:view.superview];
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:21:41.213

只需将所有`CGPoint`出现的情况交换为`unsigned int`.

# java - 使用与 jpa 相同的模式将 NetBeans 平台应用程序连接到不同的 DBMS

> ID：12737363
> 
> 赞同：0
> 
> 时间：2012-10-04T23:16:35.497
> 
> 标签：java, jpa, netbeans-platform

我需要制作一个应用程序，用户可以在其中配置一些连接参数，如服务器和 DBMS（特别是 MySQL、MSSQL 和 Oracle）。只要数据库模式是相同的，但不是服务器，为了使用已经在客户端内部网中工作的服务器，我试图找到一种方法来强制 jpa 使用用户设置的参数并进行事务。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:41:13.510

使用属性文件包含有关数据库、用户名和密码的信息，这些信息将根据 d

# python-3.x - 没有 PyGame 的 PyOpengl

> ID：12737366
> 
> 赞同：3
> 
> 时间：2012-10-04T23:17:06.003
> 
> 标签：python-3.x, pygame, pyopengl

我看到所有关于 pyopengl 的教程都实现了 pygame，是否可以在没有 pygame 的情况下使用 PyOpengl？如果是这样，那么没有 pygame 是否最快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T01:46:20.200

当将 pygame 与 opengl 一起使用时，pygame 将处理跨平台：窗口创建、键输入、声音输出、图像加载等...，但 pyOpenGL 进行实际渲染。

Pyglet 也有跨平台窗口创建 + opengl： http: [//www.pyglet.org/](http://www.pyglet.org/)

我不相信使用 pygame 与其他解决方案的速度差异很大。但不同之处在于你做事的方式，这将产生最大的影响。使用 numpy 与不使用，重复调用昂贵的函数，例如：opengl 的开始/结束等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:41:51.080

PyGame 与 PyOpenGL 的唯一关系是 PyGame 可以提供一个窗口供 PyOpenGL 进行渲染。

您现在的问题是 PyGame 的窗口环境是否比另一个更快。

根据我的经验，GLUT 在窗口化方面可能比 PyGame 稍微快一点（通过比较 GLUT 和 SDL）。wxWidgets 我觉得有点慢。PyGlet 不是 PyOpenGL（尽管它*是*Python OpenGL*实现*）。

我的建议：PyGame 最容易使用，此外还提供有用的实用程序。使用它而不是其他任何东西；任何性能差异都可以忽略不计。

当您需要更好的窗口支持时，请按顺序选择 Qt 或 wxWidgets。

# css - 如何在 google chrome 上制作一个在 css 中没有圆角的搜索栏？

> ID：12737367
> 
> 赞同：2
> 
> 时间：2012-10-04T23:17:13.383
> 
> 标签：css, searchbar

我正在设计一个网站，我希望搜索栏没有圆角——只有典型的直角。无论出于何种原因，我都无法使其在 google chrome 中运行，但是当我在 Firefox 中打开我的网站时，它确实有直角。有谁知道我需要做什么才能使搜索栏以没有圆角的 chrome 显示？

这是我的CSS：

```
#searchbar {
float:right;
padding:10px 20px;
clear:right;
margin-right:35px;
margin-top:-7px;
}

#searchbar input {
float:right;
border:1px solid #000;
border-radius:none;
}

#searchbar p {
margin:5px 10px 0 0;
float:right;
text-transform:capitalize;
font-variant:small-caps;
font-size:1em;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:35:34.583

试着把它放在你的 CSS 中。这会将搜索的默认显示更改为与具有直角的文本字段相同。[http://jsfiddle.net/8PdDt/](http://jsfiddle.net/8PdDt/)

```
input[type=search] {
    -webkit-appearance: textfield;
}​​​ 
```

# ruby-on-rails - 当我没有任何供应商/插件时，Rails 弃用警告

> ID：12737369
> 
> 赞同：5
> 
> 时间：2012-10-04T23:17:29.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, ruby-on-rails-3.2, rails-console

> **可能重复：**
> [消除 Rails 2.3 风格的插件和弃用警告](https://stackoverflow.com/questions/9027403/eliminating-rails-2-3-style-plugins-and-deprecation-warnings)

执行以下操作时出现以下错误`heroku run console`：

```
$ heroku run console
Running `console` attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out an d bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)

DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out an d bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)

Connecting to database specified by DATABASE_URL
Loading production environment (Rails 3.2.8)
irb(main):001:0> 
```

但是，我在供应商/插件中的唯一文件是`.gitkeep`：

```
$ ls -lha vendor/plugins/
total 0
drwxr-xr-x    1 Scott    Administ        0 Sep  7 12:26 .
drwxr-xr-x    1 Scott    Administ        0 Sep  7 12:26 ..
-rw-r--r--    1 Scott    Administ        0 Sep  7 12:26 .gitkeep 
```

我什至尝试删除该`.gitkeep`文件，但仍然收到相同的弃用警告。我有坏插件吗？这是一个相对较新的 Rails 项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T23:37:58.137

Heroku 注入旧式插件以使您的应用程序在其服务器上运行（特别是将日志重定向到标准输出，并从 rails 提供静态资产）。检查来自`git push`...的输出，您会看到类似这样的内容

```
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets 
```

So it's not something you've done, and nor is it anything to worry about! These will work just fine on Rails 3.x and Heroku will no doubt work something out when Rails 4 is a bit more mature.

# node.js - 在 Express NodeJS 的其他路由中调用已经定义的路由

> ID：12737371
> 
> 赞同：32
> 
> 时间：2012-10-04T23:17:55.490
> 
> 标签：node.js, express, run-middleware

我正在使用 Express 在 node.js 中编写一个 Web 应用程序。我已经定义了如下路线：

```
app.get("/firstService/:query", function(req,res){
    //trivial example
    var html = "<html><body></body></html>"; 
    res.end(html)
}); 
```

如何从快递中重用该路线？

```
app.get("/secondService/:query", function(req,res){
    var data = app.call("/firstService/"+query);
    //do something with the data
    res.end(data);
}); 
```

我在 API 文档中找不到任何东西，我宁愿不使用像“request”这样的另一个库，因为这看起来很笨拙。我试图让我的应用程序尽可能模块化。想法？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-05T04:13:37.623

与盖茨所说的类似，但我会将其保留`function(req, res){}`在您的路线文件中。所以我会做这样的事情：

路由.js

```
var myModule = require('myModule');

app.get("/firstService/:query", function(req,res){
    var html = myModule.firstService(req.params.query);
    res.end(html)
});

app.get("/secondService/:query", function(req,res){
    var data = myModule.secondService(req.params.query);
    res.end(data);
}); 
```

然后在您的模块中将您的逻辑拆分如下：

我的模块.js

```
var MyModule = function() {
    var firstService= function(queryParam) {
        var html = "<html><body></body></html>"; 
        return html;
    }

    var secondService= function(queryParam) {
        var data = firstService(queryParam);
        // do something with the data
        return data;
    }

    return {
        firstService: firstService
       ,secondService: secondService
    }
}();

module.exports = MyModule; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-04T23:33:36.913

你能简单地将它分解成另一个函数，把它放在一个共享的地方，然后从那里开始吗？

```
var queryHandler = require('special_query_handler'); 
// contains a method called firstService(req, res);

app.get('/firstService/:query', queryHandler.firstService);

// second app
app.get('/secondService/:query', queryHandler.secondService); 
```

老实说，将回调嵌套在内部的整个业务`app.get(...)`并不是一个很好的实践。你最终会得到一个包含所有核心代码的巨大文件。

您真正想要的是一个文件，其中包含所有回调处理程序`app.get()`的`app.post()`声明，这些回调处理程序位于不同的、组织更好的文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-14T12:08:56.750

如果你的路由上有很多中间件，你可以从传播中受益：

```
const router = express.Router();

const myMiddleware = [
    authenticationMiddleware(),
    validityCheckMiddleware(),
    myActualRequestHandler
];

router.get( "/foo", ...myMiddleware );
router.get( "/v1/foo", ...myMiddleware ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-14T13:15:45.403

您可以`run-middleware`完全使用模块

```
app.runMiddleware('/firstService/query',function(responseCode,body,headers){
     // Your code here
}) 
```

更多信息：

*   [Github](https://github.com/AminaG/node-run-middleware) & [NPM](https://www.npmjs.com/package/run-middleware)中的模块页面；
*   [使用 run-middleware 模块的例子](https://github.com/AminaG/node-run-middleware/blob/master/example.js)

披露：我是这个模块的维护者和第一个开发者。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-17T09:19:08.447

我使用了以下方式：在 userpage.js

```
router.createSitemap = function(req, res, callback) {  code here callback(value);  } 
```

在 product.js

```
var userPageRouter = require('userpages'); 
userPageRouter.createSitemap(req, res, function () {
                            //console.log('sitemap');
                        }); 
```

也可以在同一个 userpage.js 路由器中使用，我也可以用于其他路由。例如。

```
router.get('/sitemap', function (req, res, next) {
    router.createSitemap(req, res, function () {
        res.redirect('/sitemap.xml');
    }); }); 
```

希望这会有所帮助。

# go - 从字符串转换为整数（如果不成功则抛出错误）

> ID：12737372
> 
> 赞同：5
> 
> 时间：2012-10-04T23:18:24.600
> 
> 标签：go

如果这是一个初学者问题，我深表歉意，但我似乎无法找到任何解决方案。我正在尝试使用一个可以是 a`string`或 an的参数`int`，具体取决于上下文，并且我需要确定哪种类型（`int`如果确实是该类型，则将其转换为。）

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T23:46:34.770

例如，

```
package main

import (
    "errors"
    "fmt"
    "strconv"
)

func IntConv(arg interface{}) (int, error) {
    switch x := arg.(type) {
    case int:
        return x, nil
    case string:
        return strconv.Atoi(x)
    }
    return 0, errors.New("IntConv: invalid argument ")
}

func main() {
    fmt.Println(IntConv(7))
    fmt.Println(IntConv("42"))
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T23:36:48.040

[http://golang.org/pkg/strconv/#Atoi](http://golang.org/pkg/strconv/#Atoi)

```
func Atoi

func Atoi(s string) (i int, err error)
Atoi is shorthand for ParseInt(s, 10, 0). 
```

这是一个更新。澄清一下，由于 Atoi 接受字符串，因此尝试传递 an`int`将导致编译时错误。如果您需要在运行时进行检查，那么您可以执行类似的操作。

```
package main

import (
    "fmt"
    "strconv"
    "errors"
)

func toInt(data interface{}) (n int, err error) {
    switch t := data.(type) {
    case int:
        return t, nil
    case string:
        return strconv.Atoi(t)
    default:
        return 0, errors.New(fmt.Sprintf("Invalid type received: %T", t))
    }

    panic("unreachable!")
}

func main() {
    var (
        n int
        err error
    )

    n, _ = toInt("1")
    fmt.Println(n)

    n, _ = toInt(2)
    fmt.Println(n)

    n, err = toInt(32.3)
    fmt.Println(err)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T10:01:40.197

我参加聚会有点晚了，但你也可以使用`fmt.Sprintf`：

```
import "fmt"

func ConvertToString(x interface{}) string {
    return fmt.Sprintf("%v", x)
} 
```

传递`"%v"`给 Sprintf 告诉它使用它知道的最佳格式对其进行格式化，这实际上只是意味着“将 x 转换为字符串”。这比其他解决方案更短（也许更容易理解），但缺点是它允许输入不是`ints`或`strings`.

# ruby - 当我知道它是 301 时，Net::HTTP 返回 404

> ID：12737373
> 
> 赞同：1
> 
> 时间：2012-10-04T23:18:44.350
> 
> 标签：ruby, net-http

我编写了一段 Ruby 代码，用于跟踪一系列潜在的重定向，直到到达最终 URL：

```
def self.obtain_final_url_in_chain url
  logger.debug "Following '#{url}'"
  uri = URI url
  http = Net::HTTP.start uri.host, uri.port
  response = http.request_head url 
  case response.code
  when "301"
    obtain_final_url_in_chain response['location']
  when "302"
    obtain_final_url_in_chain response['location']
  else
    url
  end
end 
```

您`obtain_final_url_in_chain`使用 url 调用，它最终应该返回最终的 url。

我正在尝试使用此 URL： http: [//feeds.5by5.tv/master](http://feeds.5by5.tv/master)

基于[http://web-sniffer.net/](http://web-sniffer.net/)这应该被重定向到[http://5by5.tv/rss](http://5by5.tv/rss)作为 301 重定向的结果。相反，虽然我得到了[http://feeds.5by5.tv/master](http://feeds.5by5.tv/master)的 404 。

上面的代码为其他 URL 返回 200（例如[http://feeds.feedburner.com/5by5video](http://feeds.feedburner.com/5by5video)）。

请问有谁知道为什么会这样？快把我逼疯了！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:39:55.717

根据[Net::HTTP#request_head 的文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-i-request_head)，您想要传递*路径*，而不是完整的 url，作为第一个参数。

有了这些和其他一些更改，这是重写方法的一种方法：

```
def obtain_final_url_in_chain(url)
  uri = URI url
  response = Net::HTTP.start(uri.host, uri.port) do |http|
    http.request_head uri.path
  end

  case response
  when Net::HTTPRedirection
    obtain_final_url_in_chain response['location']
  else
    url
  end
end 
```

# ruby - 如何为我的功能引入超时？

> ID：12737376
> 
> 赞同：1
> 
> 时间：2012-10-04T23:18:57.297
> 
> 标签：ruby

我可以使用此代码为我的函数引入超时

```
require 'timeout'
Timeout::timeout(timeout_period) do
  run_some_code
rescue => err
  do_something_with err
  # and maybe the below?
  raise
end 
```

我怎样才能创建另一个`my_timeout`我可以重复使用的功能？我希望能够指定在超时“需要”再次运行的情况下调用的函数。

那么我会打电话`my_timeout`给`my_timeout('function name',int_how_many_times_to repeat_if times_out)`

*   my_timeout("restart_db2_server",5)
*   my_timeout("restart_eduserver",3)
*   my_timeout("run_test",0)

我`ruby 1.9.3p194 (2012-04-20) [i386-mingw32]`在Windows7上使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:24:34.593

```
def my_timeout repeat_n_times, timeout_period, &block
  Timeout::timeout timeout_period, &block
rescue Timeout::Error => timeout_error
  repeat_n_times -= 1

  if repeat_n_times > 0
    retry
  else
    raise timeout_error
  end
end

# Example

# execute the block with a timeout of 30 and repeat up to 5 times
my_timeout 5, 30 do
  # do the heavy work
end 
```

# windows - Windows 批处理文件；查找特定文件类型并复制到保持相对文件夹结构的文件夹

> ID：12737381
> 
> 赞同：0
> 
> 时间：2012-10-04T23:19:55.407
> 
> 标签：windows, batch-file

我想编写一个 Windows 批处理文件，它可以递归地查找所有 *.txt 文件并复制到目标目录，但保留相关目录结构。

例如

```
/examples
    /a
        /data
            a.txt
            b.txt
        /source
            a.js
            b.js
    /b
       /data
            c.txt
            d.txt
       /images
            a.png 
```

复制到 testCopy 文件夹

```
/textCopy
    /a
        /data
            a.txt
            b.txt

    /b
       /data
            c.txt
            d.txt 
```

我当前的 Windows 环境是 XP，我将无法使用 Robocopy。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:31:14.793

```
xcopy /s examples\*.txt textCopy\ 
```

# ruby-on-rails - Ruby on Rails：允许用户提交到两个表

> ID：12737394
> 
> 赞同：1
> 
> 时间：2012-10-04T23:20:57.590
> 
> 标签：ruby-on-rails, ruby, database, controller

我有一个允许用户创建新项目的应用程序。在创建新项目表单中，对于每个字段，他们可以选择创建新数据以进入该字段，或从以前的项目中选择数据，例如，输入新客户名称，或从项目中选择现有客户以前输入过的数据库。

现在我已经建立了技术和项目之间的关系表，允许用户选择多种技术来配合一个项目。

我的问题是当我尝试允许他们提交更多技术时，如果它们不存在于 collection_select 中。

这是我的新观点：

```
<%= stylesheet_link_tag "form" %>

<%= form_for(@project) do |f| %>

<div class="client">
<%= label_tag :new_client, "Client" %><br/>
<%= text_field_tag :new_client, nil, :maxlength => 30 %>
Or
<%= f.select( :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "Select a previous Client") %>
</div>

<%= fields_for(@project_technol) do |ab| %>       
 <%=  text_field_tag :tech, nil, :maxlength => %>        
 <%= ab.label "All Tech"%> </br>
 <%= collection_select( :technols, :id, Technol.all, :id, :tech, {}, {:multiple => true } ) %>
    </div>
    <% end %>

<div class="create_button">
<div class="actions">
    <%= f.submit "Save New Project", :class => "button",  :confirm => "Are you sure you want to save the new project?" %>
  </div>
</div>    
</div> 

<% end %>  

<div class="back_button2">
<%= button_to "Back", projects_path , :class => "button", :method => "get" %>
</div> 
```

这是我的创建和新操作：

```
def new
    @project = Project.new
        @technol = Technol.new(params[:tech])

        @all_technols = Technol.all
        tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?
        @project_technol = @project.projecttechnols.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end

end

def create

    @project = Project.new(params[:project])

    @project.client = params[:new_client] unless params[:new_client].blank?
    @technol.tech = params[:new_tech] unless params[:new_tech].blank?

    params[:technols][:id].each do |tech|

        if !tech.empty?
        @project.projecttechnols.build(:technol_id => tech) 
        end
    end

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我会很感激任何帮助，我真的被这个问题困住了。我是 Rails 新手，所以在尝试提供帮助时请记住这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:34:37.253

据我了解您想要的问题：

```
find_or_create_by_name 
```

在您的技术模型中，如果在您的数据库中找不到任何记录，它将创建一个新记录。看看这个非常适合初学者的[截屏视频:)](http://railscasts.com/episodes/102-auto-complete-association)

也是[参考](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

希望这可以帮助。

# sqlite - sqlite搜索多列

> ID：12737396
> 
> 赞同：2
> 
> 时间：2012-10-04T23:21:03.503
> 
> 标签：sqlite, select

我试图对表中的所有列执行区分大小写的搜索，所以我做了这样的事情

`Select * From mytable Where col1 || '--' || col2 || '--' || etc like '%SomeValue%'`

但它总是为大写和小写返回相同的结果。如果我这样做

`Select * From mytable Where col1 like '%SomeValue%' OR col1 like '%SomeValue%' etc`

我得到了想要的结果。这里的问题是我不能使用第二个查询，因为我有大约 36 列要搜索，并且`col1 like '%SomeValue%'`最多写 36 次是不必要的。

有没有人有任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:28:14.433

一种解决方案是使用`glob`而不是`like`

```
sqlite> select * from sqlite_master where ('foo' || '--' || 'bar') like '%Bar%';
table|t|t|2|CREATE TABLE t (a)
sqlite> select * from sqlite_master where ('foo' || '--' || 'bar') glob '*Bar*';
sqlite> select * from sqlite_master where ('foo' || '--' || 'bar') glob '*bar*';
table|t|t|2|CREATE TABLE t (a)
sqlite> 
```

另一种解决方案是使用[`pragma case_sensitive_like`](http://www.sqlite.org/pragma.html#pragma_case_sensitive_like)

```
sqlite> PRAGMA case_sensitive_like = 1;
sqlite> select * from sqlite_master where ('foo' || '--' || 'bar') like '%Bar%';
sqlite> select * from sqlite_master where ('foo' || '--' || 'bar') like '%bar%';
table|t|t|2|CREATE TABLE t (a)
sqlite> 
```

# cygwin - 在 Visual Studio 2010 和 Cygwin/MinGW 中安装 igraph 的各种问题（“未找到 sys/time.h”）

> ID：12737397
> 
> 赞同：0
> 
> 时间：2012-10-04T23:21:05.913
> 
> 标签：cygwin, mingw, igraph

我无法让 igraph 与 Visual Studio 2010 一起工作（据说有很多已知问题），因此决定尝试在 Cygwin 中安装它。`./configure`顺利。但是`make`给出了这个错误：

```
f2c/dtime_.c:16:23: fatal error: sys/times.h: No such file or directory

Makefile:2190: recipe for target `libf2c_la-dtime_.lo' failed
make[3]: *** [libf2c_la-dtime_.lo] Error 1 
```

我尝试在 MinGW 中安装它并在`make`. 我应该提供“sys/time.h”还是它的路径？sys/time.h 在哪里？使用 Windows 7。

**编辑**

Cygwin 和 MinGW 中的问题是由于我全新安装的 Cygwin 使用了错误版本的 gcc（以及 MinGW 的一个特性）。此处的解决方案：[在 Cygwin/MinGW 中安装/编译 - 如何设置包含“路径”？（符号链接？）](https://stackoverflow.com/questions/12747515/installing-compiling-in-cygwin-mingw-how-to-set-the-include-path-symbolic)

Visual Studio 2010 中的问题是由于在“调试”而不是“发布”中构建的。igraph 的创建者之一，Gábor Csárdi，慷慨地在下面提供了一个出色的分步指南，识别并解决了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:29:15.813

Igraph 实际上确实适用于 Visual C++ 2010 Express，我们在发布之前对此进行了测试，我刚刚尝试过。您需要执行以下步骤。

1.  下载[专门为 Visual Studio 创建的源包](http://igraph.sourceforge.net/download.html)。
2.  将文件解压为`My Documents\Visual Studio 2010\Projects`.
3.  从 Visual Studio中打开目录中的`igraph.sln`解决方案文件。`igraph-0.6-msvc\igraph-0.6-msvc`
4.  Visual Studio 提供将解决方案文件转换为当前格式的功能，请执行此操作。只需单击下一步、下一步和完成。
5.  在工具栏上，将“调试”更改为“发布”以进行发布构建。
6.  选择 Debug -> Build solution 并等待库构建完成。

要测试它，您可以打开`igraphtest`目录中的解决方案文件，将其转换，选择“发布”构建，然后构建它并从命令行运行它。它是一个简单的 C++ 程序，它使用 igraph 创建图形并将其写入文件`out.txt`。

您根本不必设置包含和库目录，所有内容都在解决方案文件中正确设置，适用于 igraph 和 igraphtest。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:25:58.470

有`sys/times.h`文件吗？

我有一个模糊的记忆，我必须在系统上创建一次符号链接。

# java - 用转义引号分割逗号分隔的字符串

> ID：12737399
> 
> 赞同：1
> 
> 时间：2012-10-04T23:21:28.027
> 
> 标签：java, regex, split, tokenize

我看到有几个类似的问题，但我没有找到任何令人满意的答案。我有一个逗号分隔的文件，其中每一行看起来像这样：

```
4477,52544,,,P,S,    ,,SUSAN JONES,9534 Black Bear Dr,,"CITY, NV 89506",9534 BLACK BEAR DR,,CITY,NV,89506,2008,,,,  ,     ,    , ,,1 
```

发挥作用的问题是，当令牌转义带有引号“CITY，NV 89506”的逗号时

我需要一个结果，其中处理转义的令牌并包含每个令牌，甚至是空的令牌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:37:11.010

考虑一个适当的 CSV 解析器，例如[opencsv](http://opencsv.sourceforge.net/)。它将经过高度测试（与新的本土解决方案不同）并处理诸如您描述的边缘条件（以及许多您没有考虑过的）。

在下载中，有一个包含“addresses.csv”的示例文件夹，其中包含以下行：

```
Jim Sample,"3 Sample Street, Sampleville, Australia. 2615",jim@sample.com 
```

在同一目录中，文件 AddressExample.java 解析此文件，并且与您的问题高度相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:01:33.760

这是使用交付的方法回答您的问题的一种`java.lang.String`方法。我相信它可以满足您的需求。

```
private final char QUOTE = '"';
private final char COMMA = ',';
private final char SUB = 0x001A; // or whatever character you know will NEVER
    // appear in the input String

public void readLine(String line) {
    System.out.println("original: " + line);

    // Replace commas inside quoted text with substitute character
    boolean quote = false;
        for (int index = 0; index < line.length(); index++) {
        char ch = line.charAt(index);
        if (ch == QUOTE) {
            quote = !quote;
        } else if (ch == COMMA && quote) {
            line = replaceChar(line, index, SUB);
            System.out.println("replaced: " + line);
        }
    }

    // Strip out all quotation marks
    for (int index = 0; index < line.length(); index++) {
        if (line.charAt(index) == QUOTE) {
            line = removeChar(line, index);
            System.out.println("stripped: " + line);
        }
    }

    // Parse input into tokens
    String[] tokens = line.split(",");
    // restore commas in place of SUB characters
    for (int i = 0; i < tokens.length; i++) {
        tokens[i] = tokens[i].replace(SUB, COMMA);
    }

    // Display final results
    System.out.println("Final Parsed Tokens: ");
    for (String token : tokens) {
        System.out.println("[" + token + "]");
    }
}

private String replaceChar(String input, int position, char replacement) {
    String begin = input.substring(0, position);
    String end = input.substring(position + 1, input.length());
    return begin + replacement + end;
}

private String removeChar(String input, int position) {
    String begin = input.substring(0, position);
    String end = input.substring(position + 1, input.length());
    return begin + end;
} 
```

# webgl - 如何将压缩的 .dds 图像加载为 collada 纹理？

> ID：12737400
> 
> 赞同：0
> 
> 时间：2012-10-04T23:21:30.143
> 
> 标签：webgl, three.js

您知道如何使用压缩的 .dds 图像作为 collada 纹理吗？

应该更新库的哪个部分来执行此操作？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:52:46.720

**DDS**

Three.js 已经可以读取 dds 文件。

只需调用 THREE.ImageUtils.loadCompressedTexture：

[https://github.com/mrdoob/three.js/blob/master/src/extras/ImageUtils.js#L39](https://github.com/mrdoob/three.js/blob/master/src/extras/ImageUtils.js#L39)

**科拉达**

需要更新此行以检测文件是 dds 文件还是普通图像，并使用相应的方法读取该文件。

[https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/ColladaLoader.js#L3116](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/ColladaLoader.js#L3116)

# liferay - 在 Liferay 插件大战中打包文档结构和模板

> ID：12737404
> 
> 赞同：1
> 
> 时间：2012-10-04T23:22:15.837
> 
> 标签：liferay, portlet, liferay-6

有没有办法在 portlet 插件 war 文件中包含 Liferay 文档或 Web 内容结构和模板，并使它们像标准的一样可供用户使用？

用例是您正在编写一个利用您提供的自定义文档库结构的 portlet。但是您不想将此结构作为具有自己的安装过程的单独事物分发（例如仅为该结构提供 LAR），您只希望您的插件在安装时使自定义结构可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:13:38.143

您可以通过将**portal.properties**文件添加到portlet 的**WEB-INF/classes**目录来实现您的目标。该文件应包含以下行：

```
application.startup.events=com.yourcompany.whatever.YourCustomStartupAction 
```

这个自定义启动操作应该是一个扩展自**com.liferay.portal.kernel.events.SimpleAction**的类。在其中，您将能够在您的 portlet 启动时利用所有 Liferay 服务实用程序在 Liferay 中执行操作。使用 Liferay 文档库需要使用的类是[DLAppLocalServiceUtil](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/documentlibrary/service/DLAppLocalServiceUtil.html)。这个 util 类具有处理文档库中文件/文件夹的所有必要方法。

对于网络内容相关的东西，例如结构、模板和文章，只需使用[JournalStructureLocalServiceUtil](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/journal/service/JournalStructureLocalServiceUtil.html)、[JournalTemplateLocalServiceUtil](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/journal/service/JournalTemplateLocalServiceUtil.html)和[JournalArticleLocalServiceUtil](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/journal/service/JournalArticleLocalServiceUtil.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:20:47.037

我希望我的问题是正确的；)
您可以在部署 portlet 时通过 DLFolderService 创建文件夹结构。
要在服务器启动时运行方法，您将不得不使用我认为的 CustomAction，请查看：[here](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/performing-a-custom-acti-4)

# eclipse - Eclipse：如何从错误“无法加载 JNI 共享库”中获取完整文件路径？

> ID：12737405
> 
> 赞同：0
> 
> 时间：2012-10-04T23:22:15.973
> 
> 标签：eclipse, jvm, java-native-interface, shared, filepath

很明显，我的计算机上的 java 设置出了点问题，但在获得更多信息之前我无法弄清楚它是什么。

当我尝试运行 Eclipse 时，它​​给了我一个错误：

```
Failed to load the JNI shared library "C:\Eclipse\1234\tools\jdk1.5.0_14\bin\..\jre\bin\client\jvm.dll" 
```

我想知道如何找出该文件路径的其余部分是什么。"\bin..\jre\" 对我没有多大帮助。我怀疑它连接了 2 条路径，但我不确定。

我试过从命令行运行 Eclipse，但错误只显示在弹出窗口中。

另外，无论如何，JNI 路径是在哪里设置的？

我查看了我的 JAVA_HOME 环境变量，但它只包含“C:\Program Files\Java\jre7\bin”。

这个 JNI 路径损坏......事情发生在我运行安装程序之后 - 不，没有卸载程序 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:57:09.043

你的`JAVA_HOME`设置是错误的，`JAVA_HOME`应该指向 bin 上面的目录，以及`in the bin directory`java 可执行文件，例如 java.exe、javac.exe、appletviewer.exe `must exist`。

例如，如果在我的计算机`java.exe`上的`D:\JAVA7\bin`目录中，我`JAVA_HOME`将是`D:\JAVA7`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:10:19.517

```
C:\Eclipse\1234\tools\jdk1.5.0_14\bin\..\jre\bin\client\jvm.dll 
```

> 我想知道如何找出该文件路径的其余部分是什么。"\bin..\jre\" 对我没有多大帮助。我怀疑它连接了 2 条路径，但我不确定。

这就是完整的路径。在我使用过的所有文件系统上，“..”表示父目录（即上一个目录）。所以路径指的是：

```
C:\Eclipse\1234\tools\jdk1.5.0_14\jre\bin\client\jvm.dll 
```

至于eclipse如何决定尝试使用这条路径，我不确定。

# php - 标准化 JSON 响应

> ID：12737407
> 
> 赞同：1
> 
> 时间：2012-10-04T23:22:25.800
> 
> 标签：php, json

我有一个应用程序，其中来自数据库的信息作为 JSON 响应发回。

定制 jQuery 端来处理每一个响应似乎需要付出很多努力，但适应性很小。

JSON 格式可以通过哪些方式进行标准化？另外，有没有办法在 jQuery 中“插入”处理程序？

我一直在思考这样的事情：

```
{
"replyCode": "OK"/"Error",
"replyMessage": "Operation successful"/"Could not connect",
"returnData": ... // Entities go here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:43:33.437

标准化 JSON 响应是需要为每个应用程序定制的东西；只有您有必要的数据来准确决定应该支持哪些操作以及如何通过 JSON 进行通信。

例如，在过去，我使用了“响应嗅探器”逻辑（其中处理程序检查响应中的特定属性并处理以特定方式存在的每个属性）和“命令列表”逻辑（其中响应在这种情况下，总是包含一组对象，这些对象描述必须采取的特定操作，并且处理程序会执行它们。

我认为在大多数情况下不需要回复代码和消息，因为 HTTP 响应标头可以有效地传达此信息。

无论您决定做什么，[`.ajaxComplete`](http://api.jquery.com/ajaxComplete/)（及其同级`.ajaxSuccess`和`.ajaxError`）都可用于在客户端安装全局响应处理程序，该处理程序在每个请求完成时运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T00:42:04.500

首先，您应该真正看一下来自 apigee 家伙的视频[RESTful API 设计。](http://www.youtube.com/watch?v=QpAhXa12xvU)它包含大量关于 RESTful API 的好建议。Brian Mulloy 还就响应的外观提供了反馈。

接下来，您应该查看一些用于开发 RESTful API 的 php 库。其中一些为您提供了如何返回响应的可靠方法。

*   [https://github.com/Respect/Rest](https://github.com/Respect/Rest)
*   [https://github.com/MArcJ/PHPRestService](https://github.com/MArcJ/PHPRestService)
*   [https://github.com/kla/php-activerecord](https://github.com/kla/php-activerecord)

*   或更多[https://github.com/search?q=php%20rest](https://github.com/search?q=php%20rest)

有了这个，你应该很好地构建良好的 RESTful API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T23:39:02.763

为什么不使用一个中心函数来将 JSON 的最终回显作为响应。

```
function returnJSON($code,$data=array()){
  echo json_encode(
    array(
      'replyCode'=>$code,
      'replyMessage'=>getReturnMessageByCode($code),
      'returnData'=>$data
    )
  );
} 
```

现在，在您为检索此数据而进行的每次 AJAX 调用结束时，您的 PHP 代码将执行以下操作 -

```
$data = fetchData();
if ($data){
  returnJSON('OK',$data);
}else{
  returnJSON('FAIL');
}
exit(); 
```

标准化你的回答是一个好主意，也是你的责任。除非您的框架有其他选项，否则由您决定*是否*使您的代码尽可能健壮。

# c# - Log4Net 中每种类型的动态记录器

> ID：12737412
> 
> 赞同：4
> 
> 时间：2012-10-04T23:22:56.830
> 
> 标签：c#, asp.net-mvc, log4net

我在 ASP.NET MVC 网站中使用（可能滥用）log4net。我想每个班级有一个记录器（[文档建议](http://logging.apache.org/log4net/release/manual/introduction.html)），但似乎我需要为每个班级预先配置一个记录器。

**是对的吗？我需要预定义每个记录器吗？**

我正在附加到 SqlServer 并且可以看到`Logger`架构中命名的列。似乎应该很容易在该字段中放置我想要的任何内容，但我能找到的唯一动态记录器创建是[在这里](https://stackoverflow.com/questions/2648168/log4net-creating-a-logger-dynamically-should-i-worry-about-anything)。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T03:27:04.310

您不需要预先定义每个记录器。相反，传统的方法是使用 log4net 记录器的标准模式，该模式使用消费类中的反射来声明记录器`Type`。只需将此属性转储到每个类中，您就可以开始了：

```
private static log4net.ILog _logger;
private static log4net.ILog Logger
{
    get
    {
        if( _logger == null )
        {
            Type type = System.Reflection.MethodBase.GetCurrentMethod().DeclaringType;
            _logger = log4net.LogManager.GetLogger( type );
        }
        return _logger;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T13:07:05.750

当您说每个类 1 个记录器时，您指的是用于创建日志消息的编程 ILog。这些实际上确实需要预定义，但它与 Metro Smurf 提供的方法一样简单，如果您不关心定义可能不会使用的 ILog，则更简单：

```
private static ILog logger = 
   LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

这些方法中的任何一种都将配置一个记录器。反射用于获取当前方法的类名，然后将其用作记录器名称，因此将方法称为“动态”。这也可以编码如下（但是每个类中的代码会有所不同，并且反射方法可以很容易地作为片段进行）。

```
private static ILog logger = LogManager.GetLogger(typeof(MyCurrentClass)); 
```

根据您对“放我想要的任何东西”的评论，您也可以在创建 ILog 实例时非常轻松地做到这一点（请原谅双关语）。

```
private static ILog logger = LogManager.GetLogger("whatever I want"); 
```

您包含的链接不仅创建了一个 ILog 记录器，而且还创建了一个附加程序以配合它。我不认为这是一个好的做法，因为附加程序可以在运行时在 web.config 或 app.config 中更容易地配置，并且通常不需要超过一个或两个附加程序，以及所有记录器输出去附加器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T02:06:24.647

这里的“动态”方面是什么？您确实需要实例化一个记录器才能使用它，就像您必须实例化一个数据库连接才能使用它一样。剩下的只是命名问题。

> Log4net 可以通过软件组件轻松命名记录器。这可以通过在每个类中静态实例化一个记录器来实现，记录器名称等于该类的完全限定名称。这是定义记录器的一种有用且直接的方法。

# jquery - 使用多项选择从下拉列表中填充网格

> ID：12737413
> 
> 赞同：1
> 
> 时间：2012-10-04T23:23:33.977
> 
> 标签：jquery, jqgrid

我有一个网格，它是根据下拉框中的选择填充的。
它工作正常，但我需要将下拉菜单修改为多选，以允许用户选择多个条目。怎么做到呢？

**HTML**

```
<select name="prov_id" id="prov_id" multiple="multiple">
  <option value="25_3″&gt;agnico</option>
  <option value="24_3″&gt;agnico2</option>
</select> 
```

**脚本**

```
$myGrid.jqGrid(
{
  url: myURL + '?method=GetTransactions', //CFC that will return the transactions
  postData: {
  prID: function() { return $("#prov_id option:selected").val(); },
  mn: function() { return $("#month option:selected").val(); },
  yr: function() { return $("#year option:selected").val(); }
},
//multiselect: true,  //adds checkboxes in front of each line
//multiboxonly: true,
datatype: 'json',     //We specify that datatype we will be using is JSON
colNames: [
  'Trx ID',
  'Description',
  'Cheque No',
  'Amount', 
  'Debit',
  'Credit', 
  'Month', 
  'Year', 
  'Status',
  'Added by Employee'
],
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:29:50.340

如果有人感兴趣，我解决了这个问题：

> ```
> function getSelProv(){
>    return  $('select#prov_id').val();
> }
> ....... 
> ```

```
postData: { 
  prID: function() { return getSelProv() },
........ 
```

# node.js - node.js 中的图像变形

> ID：12737419
> 
> 赞同：0
> 
> 时间：2012-10-04T23:23:59.243
> 
> 标签：node.js, morphing

是否可以使用 Javascript 在 Node.js 中进行图像变形？我试图找出是否有可能做这样的事情。是否有任何 node.js 库可用于实现图像变形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:00:17.980

不确定这是否满足您的变形需求，但这里有一个 GraphicsMajick 模块：

[https://npmjs.org/package/gm](https://npmjs.org/package/gm)

也可以搜索modules@npmjs.org

它支持模糊，木炭，切碎，着色，去斑，抖动，溶解，浮雕，均衡，模糊，高斯，内爆，放大，哑光等操作......等等......

# ruby-on-rails - 如果我使用“window”对象而不是“@”对象，为什么我的谷歌双击代码在转换为咖啡脚本时会工作

> ID：12737430
> 
> 赞同：0
> 
> 时间：2012-10-04T23:24:56.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coffeescript

我的理解是，在咖啡脚本函数内部，“this”或“@”等于“window”（至少在 Rails 的上下文中）。为什么我可以让这段代码工作：

```
window.googletag = window.googletag or {}
window.googletag.cmd = window.googletag.cmd or []

window.googletag.cmd.push ->
  window.googletag.defineSlot('/1003175/ad-name-here', [336, 280], 'div-gpt-ad-1349373630997-0').addService(window.googletag.pubads())
  window.googletag.pubads().enableSingleRequest()
  window.googletag.enableServices() 
```

但不是这段代码

```
@googletag = @googletag or {}
@googletag.cmd = @googletag.cmd or []

@googletag.cmd.push ->
  @googletag.defineSlot('/1003175/ad-name-here', [336, 280], 'div-gpt-ad-1349373630997-0').addService(@googletag.pubads())
  @googletag.pubads().enableSingleRequest()
  @googletag.enableServices() 
```

当我放入我的代码警报（@ == window）时，我得到了真实的..如果它们是相同的，那么为什么一个工作而不是另一个工作？难道没有更优雅的方式来编写这段代码，然后将 window 附加到单词 googletag 的每个实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:41:36.290

在 coffeescript 中，`@`等价于`this`，但 的值`this`取决于您在代码中的当前范围。在您的示例中，`alert(@ == window)`返回 true 因为*在该上下文* `this`中是窗口。但是当您在另一个上下文中使用它时，例如在函数定义 ( `@googletag.cmd.push -> ...`) 中，它将获得调用该函数的任何范围的上下文。

最后，这不是咖啡脚本问题，而是 Javascript 问题。我建议阅读更多关于`this`的内容，起初这是一个有点令人困惑的概念。

这是一篇帮助我更好地理解这个概念的文章：http: [//yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/](http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/)

# python - 本地存储网站的词频计数器

> ID：12737434
> 
> 赞同：0
> 
> 时间：2012-10-04T23:26:17.917
> 
> 标签：python, html

我有一个本地存储的半大型网站（使用 httrack 从服务器中提取）。这个特定网站的目录结构有几个文件夹/子文件夹以及大量的 html 文件。我想知道是否有任何工具（它实际上可以是任何东西：脚本、c++/c 代码等）可以让我在所有 html 文件中生成单个词频计数器表。这里的诀窍是我只对计算实际内容词感兴趣（即，不是 html 代码，尽管如果是这样的话，以后可以很容易地删除它们）。任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T23:31:52.680

去掉 html 代码后，使用[`collections.Counter`](http://docs.python.org/library/collections.html)

```
>>> sentence = "Hello world. How are you? Hello"
>>> counts = collections.Counter(sentence.split()) # note that this still counts punctuation. Thus, "Hello," and "Hello" are two different words 
```

如果您没有剥离 html 的方法，请查看[lxml](http://lxml.de/)以执行此操作

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T05:55:12.633

[请参阅http://www.hermetic.ch/wfca/wfca.htm](http://www.hermetic.ch/wfca/wfca.htm)上的 Hermetic Word Frequency Counter 的高级版本，它扫描多个文件并去除 HTML 标记。不是免费的，但可以很好地计算 HTML 文件中的单词。甚至是子文件夹。

# c++ - 要抛出的对象的构造函数可以抛出异常吗？

> ID：12737436
> 
> 赞同：2
> 
> 时间：2012-10-04T23:26:25.807
> 
> 标签：c++, exception, throw

在 C++ 中，对于将要被抛出的对象的构造函数自己抛出异常是否有效？换句话说，当我们仍在构造要抛出的对象时，我们是否还在抛出中？

```
struct Error {
  Error() {
    if (someCondition()) {
      throw anotherObject();
    }
  }
};

void test() {
  throw Error();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T23:29:34.993

throw 表达式需要是`throw Error();`，但是是的，这是有效的。

在`Error`抛出对象之前，必须先构造它。也就是说，`Error()`必须先计算子表达式，然后`throw`才能在完整表达式中计算运算符。如果子表达式`Error()`本身的求值引发异常，则完整表达式的其余部分（即`throw`）将不会被求值。

# objective-c - Objective-C：我怎样才能释放这个对象？

> ID：12737437
> 
> 赞同：0
> 
> 时间：2012-10-04T23:26:25.387
> 
> 标签：objective-c

我有一个名为“ServerDataLayer”的类，它包含一个 NSURLConnection 和一个 NSMutableData，它将接收到的 HTTP 数据写入其中。当连接完成时，它只是触发一个委托，我的调用者将自己作为引用传递，该方法如下所示：

```
-(void) serverDataLayerResponse:(id)entity
{
    if ([entity isMemberOfClass:[LoginResponse class]])
    {
        LoginResponse *response = (LoginResponse*)entity;

        NSLog(@"Error Code: %d", response.errorCode);
        NSLog(@"Error Message: %@", response.errorMessage);
        NSLog(@"Registered: %c", response.registered);
        NSLog(@"AuthToken: %@", response.authToken);

        [AppData shared].authToken = response.authToken;

        ServerDataLayer *request = [[[ServerDataLayer alloc] initWithServer:_serverUrl delegate:self] autorelease];
        [request getPlayerDetails];
        //[_server getPlayerDetails];
    }
} 
```

这是我的问题...内部 _receivedData 和 _connection 变量当前正在使用中，而此委托方法正在进行中。我想使用我的同一个 ServerDataLayer 实例从“[_server getPlayerDetails]”触发另一个请求，但是内部的 _connection 和 _receivedData 变量被覆盖了，我陷入了关于何时在正确的时间保留/释放的混乱。

所以我的工作只是在每次我想与服务器交谈时实例化 ServerDataLayer。现在......在上面的示例中，我正在使用“alloc”实例化请求，并设置“autorelease”，因为我失去了第二个请求的范围。这第二个请求会在 NSURLConnection 忙于内部执行请求时保留在内存中吗？

在这一点上，我对如何管理此类过程的对象引用有点迷茫。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:50:10.677

只需使用多个`ServerDataLayer`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:57:27.967

一个`NSURLConnection`, 如果通过委托方法使用，将把自己作为输入附加到运行循环。但是，它不会保留其代表。所以你`ServerDataLayer`会被释放（并希望记得取消连接）。如果您适当注意潜在的保留循环，您可以使用对象关联为您的对象提供与 URL 连接相同的生命周期。

如果你使用`sendAsynchronousRequest:...`那么你可能会没事的；假设您`self`在完成块中引用或任何实例变量，那么您将被该块保留并至少与它一样长。

真的没有必要再对保留/释放感到困惑了。即使 ARC 不是一个选项，您也可以将相关的实例变量声明为类扩展中的保留属性，并使用 self.property 表示法来设置新值。保留和释放将为您处理。

唯一需要注意的是，您永远不应该在您的`init`或`dealloc`作为规则的特殊情况下使用点表示法，即在仅半实例化或半破坏的类上调用方法是不安全的。

# c++ - 静态函数内的静态变量？

> ID：12737439
> 
> 赞同：2
> 
> 时间：2012-10-04T23:26:42.480
> 
> 标签：c++, static

Java字符串文字池的简单C++模拟

你好，

我无法从 MyString 类中的私有静态变量进行调用。任何想法？

```
static void displayPool() {
    MyString::table->displayAllStrings();
}
StringTable* (MyString::table) = new StringTable(); 
```

这两个都在 MyString 类中声明。表是一个私有变量。

谢谢。

编辑：头文件

```
#ifndef MYSTRING_H
#define MYSTRING_H

#include <iostream>
#include <cstring>
#include <cstdlib>
using namespace std;
#define POOLSIZE 100

class StringTable {
 public:
    StringTable();
    int addString(const char *str);
    char* getString(int i);
    void deleteString(int i);
    void displayAllStrings();
    void addCount(int);
    void minusCount(int);
 private:
    char** array; //da pool
    int* count;
    int size;
    int numStrings;
};

class MyString {
 public:
   MyString(const char*);
   MyString(const MyString&);
   ~MyString();
   static void displayPool();
   MyString& operator=(const MyString &);
   char* intern() const;
 private:
   int length;
   int index;
   static StringTable* table;
   friend MyString operator+(const MyString& lhs, const MyString& rhs);
   friend ostream& operator<<(ostream & os, const MyString & str);
 }; 

#endif 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T23:51:27.493

```
static void displayPool() {
    MyString::table->displayAllStrings();
} 
```

这不是在做你认为它在做的事情。它正在定义自由功能`displayPool`。关键字`static`所做的只是将函数保持在定义函数的源文件的本地。你想要的是定义静态成员函数`MyString::displayPool()`：

```
void MyString::displayPool() {
    table->displayAllStrings();
} 
```

前面是必不可少`MyString::`的。`displayPool`您不想要`static`这里的关键字；添加这将是一个错误。最后，请注意，不需要`MyString::`to 限定`table`。静态成员函数无需限定即可查看所有静态数据成员。您需要限定的唯一原因`table`是是否有一个名为`table`;的全局变量。那么`table`将是模棱两可的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:44:15.847

在这种情况下，您想要的是以下内容：

```
void MyString::displayPool() {
    MyString::table->displayAllStrings();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T23:34:32.850

你声明了吗

```
StringTable* table; 
```

在带有公共访问说明符的 MyString 的类定义中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T23:30:16.197

如果你想在你的静态函数中有一个静态变量，你应该这样做：

```
static void displayPool() {
    static StringTable* table = new StringTable();

    table->displayAllStrings();
} 
```

但是我感觉问题可能是要求您为某个类创建一个静态方法。您可能想重新阅读问题。

# r - R如何解释...论点？

> ID：12737441
> 
> 赞同：2
> 
> 时间：2012-10-04T23:26:47.397
> 
> 标签：r

> **可能重复：**
> [编写自己的函数时如何使用 R 的省略号功能？](https://stackoverflow.com/questions/3057341/how-to-use-rs-ellipsis-feature-when-writing-your-own-function)

我想知道 R 如何解释 ... 论点？

例如考虑`makeContrasts(..., contrasts=NULL, levels)`package `limma`。你可以运行：

```
 > require(limma)
 > makeContrasts(a + b, b+c, levels=letters[1:3])

       Contrasts
 Levels a + b b + c
      a     1     0
      b     1     1
      c     0     1 
```

并且它解释`a + b, b+c`没有`a, b`并且`c`已经被定义为 R 对象的参数。

我试图做一个类似的功能：

```
foo = function(...) {
    print(typeof(...))
}

> foo(a + b) 
Error in typeof(...) : object 'a' not found 
```

所以我真的很困惑真正传递给什么类型的对象`makeContrasts`？无论如何要修改这个对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:14:27.610

它是一种“语言表达”。当您将它传递给`typeof`解释器时，它会尝试查找要匹配的名称`a`并失败，因此会产生错误。如果您使用处理“语言”类型项目的函数处理它，您会得到（更）合理的结果。

看看这个：

```
> a="aa"
> typeof(a+b)
Error in typeof(a + b) : object 'b' not found
> b="bb"
> typeof(a+b)
Error in a + b : non-numeric argument to binary operator 
```

我们修复了不存在的问题`a`，然后 R 解释器希望能够找到`b`它，然后它意识到`+`没有给出数字参数。因此，解释器试图以`a+b`通常的方式评估表达式并在遇到问题时报告问题。在我对您当时关于模仿的不完整问题的回答中，`makeContrasts`我提供了一种机制来查看 R 解释器对该表达式的操作：

```
 foo = function(...) {
      e <- substitute(...)
      e[[1]]
 }

  foo(a + b)
# `+` 
```

当您想检查工作区中不是命名元素的某些东西的性质时，`typeof`否则它会期望获得字符值，您需要`quote`它：

```
> typeof(quote(a+b))
[1] "language"
> typeof(quote("a"))
[1] "character" 
```

# ios - 收到“fbDidLogin”回调但会话状态为 FBSessionStateCreatedOpening

> ID：12737443
> 
> 赞同：2
> 
> 时间：2012-10-04T23:27:00.217
> 
> 标签：ios, facebook-ios-sdk

我正在使用 Facebook sdk3.1，用代码创建了一个 Facebook 对象`facebookobj = [[Facebook alloc] initWithAppId:appID andDelegate:self];`并调用`[facebookobj authorize:permissions]`。

同样在 Facebook.mi 的源代码中修改了要使用的授权方法，`[self.session openWithBehavior:FBSessionLoginBehaviorForcingWebView....]`以便我的登录始终使用 inapp-webview 。

用户输入他的凭据并按登录后，我会回电`- (void)fbDidLogin{........}`。在这种方法中，当我检查会话状态和 accessToken 时。有时我得到意想不到的结果（访问令牌为 nil，会话状态为 FBSessionStateCreatedOpening），大多数时候我登录（访问令牌存在且状态为 FBSessionStateOpen）。

**这种行为可能吗？如果我最终处于 FBSessionStateCreatedOpening 状态，我应该关闭会话还是使其无效？我认为 Facebook sdk 只会在会话状态打开时给我“fbDidLogin”回调。**

注意：我还在`[FBSsession setActiveSession:facebookobj.session];`fbDidLogin 中设置了。

# c++ - C++ 推前迭代

> ID：12737444
> 
> 赞同：0
> 
> 时间：2012-10-04T23:27:07.427
> 
> 标签：c++, for-loop, iteration

我有一个 Tab 类，它有一个组件列表。

```
list<Component*> Tab::getComponents() {
    return (this->components);
}

void Tab::addComponent(Component* comp){
    this->components.push_front(comp);
}

Tab::Tab() {
    // x = 25, y = 30
Button* one = new Button(25,30,300,100, "images/button.png");
this->addComponent(one);

Button* two = new Button(75,100,300,100, "images/button.png");
this->addComponent(two);

    // x = 150, y = 150
Button* three = new Button(150,150,300,100, "images/button.png");
this->addComponent(three);  
} 
```

现在对于有问题的代码：

```
list<Component*>::iterator it = activeTab->getComponents().begin(); 
for (it ; it != activeTab->getComponents().end(); it++) {
    offset.x = (*it)->getX();
    cout << "offset.x = " << offset.x << endl;
    offset.y = (*it)->getY();
    cout << "offset.y = " << offset.y << endl;
} 
```

这是`for`循环的第一次迭代的输出：

```
offset.x = 25
offset.y = 30 
```

但是，看到我用过`push_front()`，它应该是：

```
offset.x = 150
offset.y = 150 
```

我究竟做错了什么？

编辑：`for`循环的第二次迭代打印垃圾......

```
offset.x = 16272
offset.y = 17 
```

第三个只是打印`segmentation fault`:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T23:43:31.167

请注意，您的方法 getComponents() 正在返回一个副本，您应该返回一个引用。

```
list<Component*>& Tab::getComponents() {
    return (this->components);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T23:46:08.090

您的return而不是，这意味着在`Tab::getComponents()`返回时被复制。因此，让我们看一下代码：`list<Component*>``list<Component*>&``this->components`

```
list<Component*>::iterator it = activeTab->getComponents().begin(); 
// ``it'' is already INVALID here since the list returned in the above line
// is already destructed!
for (it ; it != activeTab->getComponents().end(); it++) {
    offset.x = (*it)->getX(); //``it'' is invalid
    cout << "offset.x = " << offset.x << endl;
    offset.y = (*it)->getY();
    cout << "offset.y = " << offset.y << endl;
} 
```

`it`取消引用时迭代器无效。

# android - Android startBluetoothSco 未启动 sco 但 isBluetoothScoOn 返回 true

> ID：12737446
> 
> 赞同：25
> 
> 时间：2012-10-04T23:27:12.423
> 
> 标签：android, bluetooth, headset

我创建了一个带有示例项目的 GitHub 存储库，该项目显示了我在这里询问的以下问题：
[https](https://github.com/paulpv/audio-loopback/tree/simplified/src/com/twistpair/wave/experimental/loopback)
://github.com/paulpv/audio-loopback/tree/simplified/src/com/twistpair/wave/experimental/loopback （请坚持使用“简化”分支并忽略“主”分支）

两个主要文件是：

*   [https://github.com/paulpv/audio-loopback/blob/simplified/src/com/twistpair/wave/experimental/loopback/MainActivity.java](https://github.com/paulpv/audio-loopback/blob/simplified/src/com/twistpair/wave/experimental/loopback/MainActivity.java)
*   [https://github.com/paulpv/audio-loopback/blob/simplified/src/com/twistpair/wave/experimental/loopback/AudioStateManager.java](https://github.com/paulpv/audio-loopback/blob/simplified/src/com/twistpair/wave/experimental/loopback/AudioStateManager.java)

**免责声明：**我目前只使用一个运行 CyanogenMod 10 Jelly Bean 的三星 Epic SPH-D700 来进行编码和测试。我没有在其他设备上尝试过这个，但也许这可能有助于阻止我把头发拉出来发疯。

几个月来，我一直在努力让 Android 蓝牙 SCO**可靠地**启动和停止以及捕获/播放**音频**！
一旦我可以让手机进入 SCO 模式，通过 AudioRecord 和 AudioTrack（分别）捕获和播放就可以正常工作，如文档所述。
我遇到的问题是我无法可靠地将手机置于 SCO 模式！

“互联网”上使用 startBluetoothSco() 和 setBluetoothScoOn(true) 的示例看起来都很简单直接，但是当我在我的设备上使用它们时，它们几乎无法可靠地工作。
我创建了自己的测试应用程序，除了启动和停止 SCO 什么都不做，我什至无法让它可靠地工作！

我的代码监听`BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED EXTRA_STATE==CONNECTED.`
我可以可靠地检测到任何耳机何时连接或断开。

当检测到连接时，我的处理程序立即调用 startBluetoothSco()。
A 可以发誓至少一旦这踢到`SCO_AUDIO_STATE`了 C `O`NNECTED，但 99% 的时间它只是导致从`DISCONNECTED->CONNECTING->DISCONNECTED`.

这是我的 GitHub 示例应用程序的注释日志输出：

```
10-03 17:00:13.970: I/dalvikvm(29487): Debugger is active
10-03 17:00:14.158: I/System.out(29487): Debugger has connected
10-03 17:00:15.779: I/System.out(29487): waiting for debugger to settle...
10-03 17:00:15.978: I/System.out(29487): debugger has settled (1325) 
```

*我的应用程序在关闭 Jawbone 耳机的情况下启动并更新 UI...*

```
10-03 17:00:16.568: D/MainActivity(29487): updateScreen()...
10-03 17:00:16.572: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=false 
```

*...UI 更新完成*
*Sticky 广播，告诉我当前的 SCO_AUDIO_STATE...*

```
10-03 17:00:16.689: D/AudioStateManager(29487): onReceive: intent=Intent { act=android.media.ACTION_SCO_AUDIO_STATE_UPDATED flg=0x10 (has extras) }
10-03 17:00:16.689: D/AudioStateManager(29487): extras={"android.media.extra.SCO_AUDIO_PREVIOUS_STATE"=2, "android.media.extra.SCO_AUDIO_STATE"=0}
10-03 17:00:16.689: D/AudioStateManager(29487): android.media.ACTION_SCO_AUDIO_STATE_UPDATED
10-03 17:00:16.693: D/AudioStateManager(29487): ==> scoAudioStatePrevious=SCO_AUDIO_STATE_CONNECTING(2)
10-03 17:00:16.693: D/AudioStateManager(29487): ==> scoAudioState=SCO_AUDIO_STATE_DISCONNECTED(0)
10-03 17:00:16.693: D/AudioStateManager(29487): android.media.ACTION_SCO_AUDIO_STATE_UPDATED: SCO_AUDIO_STATE_DISCONNECTED 
```

*...当前 SCO_AUDIO_STATE == DISCONNECTED; 预期，因为我的耳机已关闭。*
*调用我的 SCO Disconnected 事件侦听器并使用两个 sendMessage 更新 UI...*

```
10-03 17:00:16.693: I/MainActivity(29487): onAudioManagerScoAudioDisconnected()
10-03 17:00:16.755: D/libEGL(29487): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
10-03 17:00:16.787: D/libEGL(29487): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
10-03 17:00:16.791: D/libEGL(29487): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
10-03 17:00:16.888: D/OpenGLRenderer(29487): Enabling debug mode 0
10-03 17:00:16.912: D/MainActivity(29487): MSG_UPDATE_BLUETOOTH_INDICATION
10-03 17:00:16.912: D/MainActivity(29487): updateScreen()...
10-03 17:00:16.912: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=false
10-03 17:00:16.927: D/MainActivity(29487): MSG_UPDATE_AUDIO_OUTPUT_STREAM_TYPE
10-03 17:00:16.927: D/MainActivity(29487): updateScreen()...
10-03 17:00:16.931: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=false 
```

*...UI 更新完成*

*大约 20 秒后，我打开了 Jawbone 耳机……*

```
10-03 17:00:37.572: D/AudioStateManager(29487): onReceive: intent=Intent { act=android.bluetooth.headset.profile.action.CONNECTION_STATE_CHANGED flg=0x10 (has extras) }
10-03 17:00:37.583: D/AudioStateManager(29487): extras={"android.bluetooth.device.extra.DEVICE"=00:21:3C:00:3E:02, "android.bluetooth.profile.extra.PREVIOUS_STATE"=0, "android.bluetooth.profile.extra.STATE"=1}
10-03 17:00:37.587: D/AudioStateManager(29487): mReceiver: BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED
10-03 17:00:37.587: D/AudioStateManager(29487): ==> bluetoothDevice=00:21:3C:00:3E:02
10-03 17:00:37.587: D/AudioStateManager(29487): ==> bluetoothHeadsetStatePrevious=STATE_DISCONNECTED(0)
10-03 17:00:37.587: D/AudioStateManager(29487): ==> bluetoothHeadsetState=STATE_CONNECTING(1)
10-03 17:00:37.619: D/AudioStateManager(29487): onReceive: intent=Intent { act=android.bluetooth.headset.profile.action.CONNECTION_STATE_CHANGED flg=0x10 (has extras) }
10-03 17:00:37.623: D/AudioStateManager(29487): extras={"android.bluetooth.device.extra.DEVICE"=00:21:3C:00:3E:02, "android.bluetooth.profile.extra.PREVIOUS_STATE"=1, "android.bluetooth.profile.extra.STATE"=2}
10-03 17:00:37.623: D/AudioStateManager(29487): mReceiver: BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED
10-03 17:00:37.623: D/AudioStateManager(29487): ==> bluetoothDevice=00:21:3C:00:3E:02
10-03 17:00:37.626: D/AudioStateManager(29487): ==> bluetoothHeadsetStatePrevious=STATE_CONNECTING(1)
10-03 17:00:37.626: D/AudioStateManager(29487): ==> bluetoothHeadsetState=STATE_CONNECTED(2) 
```

*颚骨连接；我的事件侦听器被称为...*

```
10-03 17:00:37.626: I/MainActivity(29487): onBluetoothHeadsetConnected() 
```

*...看到我们可以SCO...*

```
10-03 17:00:37.626: D/AudioStateManager(29487): mAudioManager.isBluetoothScoAvailableOffCall()=true 
```

*...并自动调用 startBluetoothSco()这就是问题所在*
**！为什么这个对 startBluetoothSco 的调用不会导致 SCO_AUDIO_STATE == CONNECTED?!?!**

```
10-03 17:00:37.626: D/AudioStateManager(29487): startBluetoothSco()
10-03 17:00:37.626: I/AudioStateManager(29487): mAudioManager.startBluetoothSco(); 
```

*我的事件监听器完成了带有 sendMessage 以更新带有当前 BT 状态的 UI ...*

```
10-03 17:00:37.646: D/MainActivity(29487): MSG_UPDATE_BLUETOOTH_INDICATION
10-03 17:00:37.650: D/MainActivity(29487): updateScreen()...
10-03 17:00:37.650: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=false 
```

*... UI 更新完成*
*startBluetoothSco 的第一个结果进来...*

```
10-03 17:00:37.681: D/AudioStateManager(29487): onReceive: intent=Intent { act=android.media.ACTION_SCO_AUDIO_STATE_UPDATED flg=0x10 (has extras) }
10-03 17:00:37.681: D/AudioStateManager(29487): extras={"android.media.extra.SCO_AUDIO_STATE"=2, "android.media.extra.SCO_AUDIO_PREVIOUS_STATE"=0}
10-03 17:00:37.681: D/AudioStateManager(29487): android.media.ACTION_SCO_AUDIO_STATE_UPDATED
10-03 17:00:37.685: D/AudioStateManager(29487): ==> scoAudioStatePrevious=SCO_AUDIO_STATE_DISCONNECTED(0)
10-03 17:00:37.685: D/AudioStateManager(29487): ==> scoAudioState=SCO_AUDIO_STATE_CONNECTING(2) 
```

*...从 DISCONNECTED 移动到 CONNECTING*
*来自 startBluetoothSco 的第二个结果进来...*

```
10-03 17:00:37.759: D/AudioStateManager(29487): onReceive: intent=Intent { act=android.media.ACTION_SCO_AUDIO_STATE_UPDATED flg=0x10 (has extras) }
10-03 17:00:37.763: D/AudioStateManager(29487): extras={"android.media.extra.SCO_AUDIO_STATE"=0, "android.media.extra.SCO_AUDIO_PREVIOUS_STATE"=2}
10-03 17:00:37.763: D/AudioStateManager(29487): android.media.ACTION_SCO_AUDIO_STATE_UPDATED
10-03 17:00:37.763: D/AudioStateManager(29487): ==> scoAudioStatePrevious=SCO_AUDIO_STATE_CONNECTING(2)
10-03 17:00:37.763: D/AudioStateManager(29487): ==> scoAudioState=SCO_AUDIO_STATE_DISCONNECTED(0)
10-03 17:00:37.763: D/AudioStateManager(29487): android.media.ACTION_SCO_AUDIO_STATE_UPDATED: SCO_AUDIO_STATE_DISCONNECTED 
```

*...从 CONNECTING 移动到**DISCONNECTED***
*我本来希望 SCO 从 CONNECTING 到**CONNECTED**！*
*我的事件侦听器被调用并使用两个 sendMessages 更新 UI ...*

```
10-03 17:00:37.763: I/MainActivity(29487): onAudioManagerScoAudioDisconnected()
10-03 17:00:37.767: D/MainActivity(29487): MSG_UPDATE_BLUETOOTH_INDICATION
10-03 17:00:37.767: D/MainActivity(29487): updateScreen()...
10-03 17:00:37.767: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=false
10-03 17:00:37.783: D/MainActivity(29487): MSG_UPDATE_AUDIO_OUTPUT_STREAM_TYPE
10-03 17:00:37.783: D/MainActivity(29487): updateScreen()...
10-03 17:00:37.783: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=false 
```

*...UI 更新完成*

*我等待 20 秒左右 SCO 连接，但它永远不会出现。*
*我按下我的应用程序的“startBluetoothSco”按钮。*
**请注意，这会导致在 17:00:37.626 对 startBluetoothSco() 进行完全相同的调用**

```
10-03 17:01:01.689: D/AudioStateManager(29487): startBluetoothSco()
10-03 17:01:01.689: I/AudioStateManager(29487): mAudioManager.startBluetoothSco(); 
```

*startBluetoothSco 的第一个结果出现在...*

```
10-03 17:01:01.708: D/AudioStateManager(29487): onReceive: intent=Intent { act=android.media.ACTION_SCO_AUDIO_STATE_UPDATED flg=0x10 (has extras) }
10-03 17:01:01.712: D/AudioStateManager(29487): extras={"android.media.extra.SCO_AUDIO_STATE"=2, "android.media.extra.SCO_AUDIO_PREVIOUS_STATE"=0}
10-03 17:01:01.712: D/AudioStateManager(29487): android.media.ACTION_SCO_AUDIO_STATE_UPDATED
10-03 17:01:01.712: D/AudioStateManager(29487): ==> scoAudioStatePrevious=SCO_AUDIO_STATE_DISCONNECTED(0)
10-03 17:01:01.712: D/AudioStateManager(29487): ==> scoAudioState=SCO_AUDIO_STATE_CONNECTING(2) 
```

*...从 DISCONNECTED 移动到 CONNECTING*
**这是与在 17:00:37.626 自动调用 startBluetoothSco() 不同的地方**
*我们得到一个**BluetoothHeadset.ACTION_AUDIO_STATE_CHANGED**事件...*

```
10-03 17:01:01.716: D/AudioStateManager(29487): onReceive: intent=Intent { act=android.bluetooth.headset.profile.action.AUDIO_STATE_CHANGED flg=0x10 (has extras) }
10-03 17:01:01.720: D/AudioStateManager(29487): extras={"android.bluetooth.device.extra.DEVICE"=00:21:3C:00:3E:02, "android.bluetooth.profile.extra.PREVIOUS_STATE"=10, "android.bluetooth.profile.extra.STATE"=11}
10-03 17:01:01.720: D/AudioStateManager(29487): mReceiver: BluetoothHeadset.ACTION_AUDIO_STATE_CHANGED
10-03 17:01:01.720: D/AudioStateManager(29487): ==> bluetoothDevice=00:21:3C:00:3E:02
10-03 17:01:01.720: D/AudioStateManager(29487): ==> bluetoothHeadsetAudioStatePrevious=STATE_AUDIO_DISCONNECTED(10)
10-03 17:01:01.720: D/AudioStateManager(29487): ==> bluetoothHeadsetAudioState=STATE_AUDIO_CONNECTING(11) 
```

*...从 DISCONNECTED 移动到 CONNECTING*
*我们得到另一个 BluetoothHeadset.ACTION_AUDIO_STATE_CHANGED 事件...*

```
10-03 17:01:02.572: D/AudioStateManager(29487): onReceive: intent=Intent { act=android.bluetooth.headset.profile.action.AUDIO_STATE_CHANGED flg=0x10 (has extras) }
10-03 17:01:02.576: D/AudioStateManager(29487): extras={"android.bluetooth.device.extra.DEVICE"=00:21:3C:00:3E:02, "android.bluetooth.profile.extra.PREVIOUS_STATE"=11, "android.bluetooth.profile.extra.STATE"=12}
10-03 17:01:02.576: D/AudioStateManager(29487): mReceiver: BluetoothHeadset.ACTION_AUDIO_STATE_CHANGED
10-03 17:01:02.576: D/AudioStateManager(29487): ==> bluetoothDevice=00:21:3C:00:3E:02
10-03 17:01:02.576: D/AudioStateManager(29487): ==> bluetoothHeadsetAudioStatePrevious=STATE_AUDIO_CONNECTING(11)
10-03 17:01:02.580: D/AudioStateManager(29487): ==> bluetoothHeadsetAudioState=STATE_AUDIO_CONNECTED(12) 
```

*...从 CONNECTING 移动到 CONNECTED*
*事件使用一个 sendMessage 更新 UI*

```
10-03 17:01:02.580: I/MainActivity(29487): onBluetoothHeadsetAudioConnected()
10-03 17:01:02.580: D/MainActivity(29487): MSG_UPDATE_BLUETOOTH_INDICATION
10-03 17:01:02.580: D/MainActivity(29487): updateScreen()...
10-03 17:01:02.583: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=true 
```

*... UI 更新完成（老实说，我不确定第二次调用 isBluetoothScoOn 是什么）*

```
10-03 17:01:02.603: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=true 
```

*startBluetoothSco 的第二个结果进来......*

```
10-03 17:01:02.603: D/AudioStateManager(29487): onReceive: intent=Intent { act=android.media.ACTION_SCO_AUDIO_STATE_UPDATED flg=0x10 (has extras) }
10-03 17:01:02.607: D/AudioStateManager(29487): extras={"android.media.extra.SCO_AUDIO_STATE"=1, "android.media.extra.SCO_AUDIO_PREVIOUS_STATE"=2}
10-03 17:01:02.607: D/AudioStateManager(29487): android.media.ACTION_SCO_AUDIO_STATE_UPDATED
10-03 17:01:02.607: D/AudioStateManager(29487): ==> scoAudioStatePrevious=SCO_AUDIO_STATE_CONNECTING(2)
10-03 17:01:02.607: D/AudioStateManager(29487): ==> scoAudioState=.SCO_AUDIO_STATE_CONNECTED(1)
10-03 17:01:02.607: D/AudioStateManager(29487): android.media.ACTION_SCO_AUDIO_STATE_UPDATED: SCO_AUDIO_STATE_CONNECTED 
```

*...从 CONNECTING 移动到 CONNECTED*

**最后！**
*我的事件侦听器被调用并使用两个 sendMessages 更新 UI ...*

```
10-03 17:01:02.611: I/MainActivity(29487): onAudioManagerScoAudioConnected()
10-03 17:01:02.630: D/MainActivity(29487): MSG_UPDATE_BLUETOOTH_INDICATION
10-03 17:01:02.630: D/MainActivity(29487): updateScreen()...
10-03 17:01:02.634: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=true
10-03 17:01:02.650: D/MainActivity(29487): MSG_UPDATE_AUDIO_OUTPUT_STREAM_TYPE
10-03 17:01:02.650: D/MainActivity(29487): updateScreen()...
10-03 17:01:02.650: D/AudioStateManager(29487): mAudioManager.isBluetoothScoOn()=true 
```

*...UI 更新完成*

**当我在一段时间后“手动”启动 SCO 时，一切（这次）都可以工作，但如果我在连接耳机后立即自动启动 SCO，则不会。**

更糟糕的是，当事情没有按预期工作时，我在 SCO 国家看到了奇怪的行为：

*   将 startBluetoothSco() 延迟 3-5 秒似乎没有什么区别。我没有尝试将其延迟超过 5 秒。等待 5 秒以上让音频开始流入您的 BT 耳机是荒谬的。
*   有时调用 isBluetoothScoOn() 会返回 true，即使自上次 DISCONNECTED 状态说状态更改为 CONNECTED 以来我从未收到过广播事件。
*   有时，从 UI 中“手动”调用 startBluetoothSco() 什么都不做，就好像 SCO 已经打开一样，但自从上次 DISCONNECTED 状态说状态更改为 CONNECTED 以来，我从未收到任何广播事件。
*   尝试打开 AudioTrack 或 AudioRecord 导致没有声音（当 SCO 没有异常行为时，同样的代码可以正常工作。即：问题是 SCO 状态，而不是 AudioTrack/AudioRecord 调用）。
*   调用 stopBluetoothSco() 不会导致任何事件报告状态 DISCONNECTED。
*   setBluetoothScoOn(false/true) 没有区别。老实说，我不明白看似多余的“startBluetoothSco()/stopBluetoothSco()”和“setBluetoothScoOn(boolean)”的区别。当一切正常时，我调用 startBluetoothSco() 会导致 isBluetoothScoOn() 返回 true，这让我认为我不需要调用 setBluetoothScoOn(true)。
*   重新启动手机没有任何区别。
*   重新启动耳机没有任何区别。
*   换另一个耳机没什么区别。
*   有时耳机会失去配对，必须重新配对。

鉴于谷歌/Android 在蓝牙支持方面的记录，这很少让我感到惊讶。

有人可以让我摆脱痛苦并明确解释如何在Android中可靠地启动和停止蓝牙SCO吗？

PS：是否有官方渠道可以升级此类问题 [w/Google? 三星？]？或者，StackOverflow 是我找到实际答案的最佳机会吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-06T07:53:18.630

Android 文档中缺少很多东西，但是，如果您在音频路由期间每次都调用 startBluetoothSco() 和 stopBluetoothSco()，那么正确路由音频应该没有问题。即使我已经看到连接长时间保持空闲并且我们启动 StartBluetoothSco() 我们直接断开连接。为了解决这个问题，我在这里写了一个解决方法： [https ://github.com/kodered/Bluetooth-Refresh-Logic](https://github.com/kodered/Bluetooth-Refresh-Logic)

希望这可以帮助。

# c# - 从 byte[] 创建 ZipFile 不再可用？

> ID：12737449
> 
> 赞同：2
> 
> 时间：2012-10-04T23:27:34.403
> 
> 标签：c#, dotnetzip

在以前版本的 Ionic.Zip.Reduced 中曾经有一个方便的静态方法，它允许从字节数组创建 ZIP 文件：

```
public static ZipFile Read(byte[] buffer) 
```

我的代码看起来像这样：

```
byte[] data = GetMyData();
ZipFile zip = ZipFile.Read(data); 
```

但是，此方法在最新版本中不再可用。这是为什么？

我想出了以下代码，我认为它是等效的：

```
byte[] data = GetMyData();
return ZipFile.Read(new MemoryStream(data)); 
```

新代码是否等效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:32:11.917

对于 DotNetZip 团队来说，“为什么”更是一个问题。不过，我有一些想法。

1.  **命名方法的最佳实践：**如果考虑方法的名称，读取数组是没有意义的。
2.  **内存利用率**：他们可能假设他们的用户已经在使用 MemoryStream 来生成 byte[] 值，并且这种新方法可以防止内存中的双重输入。

# html - 背景图像 Div (Twitter Bootstrap)

> ID：12737451
> 
> 赞同：0
> 
> 时间：2012-10-04T23:27:49.020
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我正在尝试构建一个 span8 宽度和不同高度的模块。有一个图像将定义 div 的高度，以及位于图像顶部的文本。我无法弄清楚当 Bootstrap 调整 div 的大小时如何防止我的图像的一部分被裁剪。

此外，我无法弄清楚如何定位我的文本框。我试图有两个文本框 - 一个位于 0% 垂直，第二个位于 50% 垂直。

```
<div class="row">
    <div class="span12 promo">
        <div class="content">
            <div class="row-fluid">
                <div class="topText span24">
                    Text positioned on the top half
                </div>
            </div>
            <div class="row-fluid">
                <div class="botText span24">
                    Text positioned on the bottom half
                </div>
            </div>
        </div>
    </div>
</div>

.promo { height: 100%; }
.promo .content { width: 100%; height: 100%; background:url(http://www.placehold.it/470x188) no-repeat; }    
.promo .content .row-fluid { height: 50px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:57:17.380

您是否尝试过设置`min-height`属性？这将设置一个最小高度，这样您的图像就不会被截断。

我会尝试将两个 div 都设置为`height:50%;`，这应该会给你正确的效果。

# rest - 在 RESTful API 中访问对象的版本/修订

> ID：12737466
> 
> 赞同：16
> 
> 时间：2012-10-04T23:29:10.313
> 
> 标签：rest, parameters, version, restful-url, restful-architecture

在设计 RESTful API 时，我们遇到了如何访问“同一对象”的不同版本的问题。假设页面对象由唯一键标识并通过 GET /api/page/pagekey 访问。它可以通过发送 PUT /api/page/pagekey 和正文中的适当文档来更新。

现在我们的系统会跟踪页面的旧版本，我们也希望通过 API 访问这些旧版本。让我们假设文档的旧版本是版本 1。似乎至少有两种方法可以设计 API 来访问这个特定版本的页面：

1.  获取 /api/page/pagekey/1
2.  获取 /api/page/pagekey?version=1

第一个变体将特定版本呈现为其自己的资源；第二个变体为现有资源提供了一个可选的版本上下文。

*   变体 (1) 或 (2) 是更好的解决方案吗？还是有更好的方法来做到这一点？
*   在变体 (1) 中，对不存在的版本号的请求，例如 /api/page/pagekey/7 可能会触发 HTTP 404 Not Found，这很方便。当考虑变体 (2) 时，这是否也是一个有效的状态响应，我们只更改现有资源的上下文“版本”，如果没有版本参数返回 HTTP 200 Ok 响应？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T23:40:27.147

每个资源 url 应该是一个永久链接来标识该资源。

```
GET /api/page/{id}/{rev} 
```

这当然是特定版本资源的永久链接。所以，没关系。但请注意，永久链接不要求内容随着时间的推移保持不变：

```
GET /api/page/{id} 
```

这将返回最新的版本，这很好，并且会随着时间的推移而改变内容。为了扩展它，你甚至可以拥有像这样的时间资源并且是 RESTful 的：

```
GET /api/page/latest 
```

但是，`/api/page/{id}?version={rev}`它也可以工作并且不会破坏任何 RESTful 概念。

我认为`/{id}/{rev}`它更纯粹一点，因为它在可寻址的 url 中专门标识了该资源，并且感觉比将其设置为参数更正确。原因是参数应该是关于如何检索内容的修饰符，而不一定会改变您正在检索的不同资源。在您的情况下，由于每个版本都是不同的，因此明确解决资源似乎更合适。但是，即使那个没有违反任何 RESTful url 规则或概念，如果你问了 10 个人，你可能会得到不同的答案 :)

无论哪种方式，您都应该确保临时资源`/api/page/{id}`返回最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:35:09.730

几乎按照定义，REST 没有“相同对象”的概念。如果你在你的协议中需要这个，那么你需要有某种“标识符”。就如此容易 ;）

URL 参数是一种显而易见的方法。"/1" 或 "?version=1" 当然是两个不错的选择 - 您选择的只是一个偏好问题（以及您可能还想要多少“其他东西”的问题）。

无论哪种方式，您仍将不得不处理“未找到版本”类型的错误，并优雅地恢复。

恕我直言...

# javascript - CSS 图像换行问题 - 取决于浏览器缩放级别

> ID：12737473
> 
> 赞同：2
> 
> 时间：2012-10-04T23:29:53.387
> 
> 标签：javascript, jquery, css, image, jquery-animate

我正在尝试在 DIV 中创建一个包含 5 个图像的面板，其中 jQuery`animate()`连续扩展每个图像，直到所有 5 个图像占用其容器宽度的 100%**而不换行**

[这](https://www.avantalytics.com/)是问题的链接：

初始 blockUI 显示正常，但一旦过期并显示正常页面，相同的五个图像将在某些分辨率下完美显示（我在 FF 或 IE 中使用 ctrl-+/- 进行测试），而其他图像则导致最后一个图像包裹。

动画调整大小的代码如下，其目的是将每个图像的大小调整到容器宽度的 20%。我试图看看它是否与四舍五入有关，结果是空的。我已经研究了尝试以下部分/全部的 CSS 选项：

```
overflow:hidden;
white-space: nowrap;
display:inline-block;

$(".service_img").each(function (i) 
  {
    // if the image in question's width is > 20% of its container then re-adjust it to be 20% so it will fit
    if($('#'+this.id).outerWidth() > Math.floor((($('#services_imgs_container').outerWidth()/5)))){
      $('#'+this.id).width(Math.floor(($('#services_imgs_container').outerWidth()/5)));
    }
    else {
      $('#'+this.id).animate({width:(Math.floor(($('#services_imgs_container').outerWidth()/5)))},{duration:500, queue:false});
      //$('#'+this.id).animate({width:'19.2%'},{duration:500, queue:false});
      $('#'+this.id).show();
    }

  }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:47:04.913

你可以在resize之后写一个函数，看看#services_imgs_container是否是div.service_img:eq(0)高度的两倍。如果是每次将每个 .service_img 的大小减小一个像素，直到该语句不再正确。

像这样的东西

```
while($('#services_imgs_container').height() >= ($('.service_img:eq(0)').height() * 1.5))
{
    $('.service_img').css('width': '-=1');
} 
```

# cocoa-touch - 从后台线程通过主线程上的 dispatch_sync 调用核心数据，作为为后台线程创建 NSManagedObjectContext 的替代方法？

> ID：12737474
> 
> 赞同：0
> 
> 时间：2012-10-04T23:29:56.883
> 
> 标签：cocoa-touch, core-data, objective-c-blocks

我有两个块通过 GCD 在用户定义的并发队列上同时调度。在块流中的某个时刻，它们必须访问同一组核心数据托管对象。不是显式地通过获取，而是通过已经获取的具有一对多关系集的对象。

据我了解，每个块都应该有自己的上下文，然后在完成时将两个上下文合并到主线程中的一个。

但是，我想知道创建 2 个上下文然后合并到第三个上下文的可行替代方法是执行以下操作：

```
- (void)someMethodThatAppliesToAdisjointSetWithRange:(NSRange)range fromSharedObject:(NSManagedObject*)someSharedObject
{
  //  Do some stuff...

  //  Create sortDescriptors

  __block NSArray* entities = nil;
  dispatch_sync(dispatch_get_main_queue(), ^{
    entities = [[[someSharedObject valueForKey:@"sprites"] sortedArrayUsingDescriptors:sortDescriptors] retain];
    entities = [entities subarrayWithRange:range]
  });

  for(id anEntity in entities)
  {
    //  STRICTLY retrieve properties from the entities
    //  And do stuff with these, BUT DON'T modify the entities themselves.
  }

  //  Continue doing stuff that has nothing to do with the managed objects.
}

- (void)dispatchMethod
{

  dispatch_async(_concurrentQueue, ^{
    [self someMethodThatAppliesToAdisjointSetWithRange:NSMakeRange(0, floor(pageData.count/2.)) fromSharedObject:someSharedObject];
  });

  dispatch_async(_concurrentQueue, ^{
    [self someMethodThatAppliesToAdisjointSetWithRange:NSMakeRange(floor(pageData.count/2.), ceil(pageData.count/2.)) fromSharedObject:someSharedObject];
  });
} 
```

我对上面的想法是，主线程上的调度在并发流中创建了一个同步点，并且由于我什至没有修改自己的托管对象，所以应该没问题。然而，在一整天的测试中，我得到了一个核心数据“statement is still active”不一致的异常。所以现在我认为他上面的代码仍然不安全。尽管异常实际上可能是由应用程序中的其他代码引起的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:31:06.437

经验的答案是否定的，你不能。大概是因为对 managedObject 中关系的任何类型的访问都可能会出错，并且无论如何都需要上下文隐式地获取关系中的对象。

那是，

```
for(id anEntity in entities)
  {
    //  STRICTLY retrieve properties from the entities
    //  And do stuff with these, BUT DON'T modify the entities themselves.
  } 
```

仍然需要访问 managedObjectContext。

使用两个本地上下文而不是建议的方法的相同代码不会导致“语句仍处于活动状态”异常。

# regex - 如何将数字与 GtkSourceView 语言规范中的可选字母后缀匹配？

> ID：12737480
> 
> 赞同：1
> 
> 时间：2012-10-04T23:30:42.043
> 
> 标签：regex, gtk, pcre, gtksourceview

我正在编写一个新的 GtkSourceView 语言规范；遵循[教程](http://developer.gnome.org/gtksourceview/stable/lang-tutorial.html)和其他 Internet 资源中的信息。我定义的语言可以是一个数字：

> 1.  一个或多个`digit`字符
> 2.  可选附加（例如在末尾）字母`L`, `l`, `N`, 或`n`.

**例子：**

```
1000
1234L
987654321n 
```

请注意，这只是几个可能的定义之一。

到目前为止，我已经写过（大约*（省略定义的其他部分）*）：

```
<context id="number" style-ref="decimal" end-at-line-end="true">
    <start>(\d+)([NnlL]?)</start>
    <end>\D</end>
</context> 
```

我将其解释为： _A`number`以一个或多个数字字符开头，可选地后跟任何以下：`N` `n` `l` `L`，并在遇到非数字数字（例如空格，字母）时结束。

不幸的是，这不太奏效，因为附加任何指定的字符（或任何字符）都会导致它失败（在这种情况下，这意味着*不突出显示*。）

关于如何匹配这种模式的任何想法？提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:24:36.257

您不需要容器上下文；这适用于字符串文字和注释等内容，您可以通过开始和结束模式来识别它，并且它可能包含其他上下文。（例如，字符串文字可能包含转义序列，如`\n`，您可能希望以不同的方式突出显示，[如此屏幕截图所示](http://projects.gnome.org/gtksourceview/images/screenshots/gedit.png)。）您的“数字”标记可以与单个简单的正则表达式完全匹配，这意味着您需要一个简单的上下文：

```
<context id="number" style-ref="decimal">
    <match>\b\d+[NnlL]?\b</match>
</context> 
```

免责声明：我从未使用过 GtkSourceView，但我使用过其他基于正则表达式的语法荧光笔，包括[EditPad Pro](http://www.editpadpro.com/cscs.html)和我自己用 Java 编写的一个。

# php - 为什么这个多维数组不能正确显示？

> ID：12737485
> 
> 赞同：2
> 
> 时间：2012-10-04T23:31:43.210
> 
> 标签：php, multidimensional-array

我正在解决这个问题：
我有`$_POST['user']`变量。如果我`print_r`这个变量我得到：

```
Array (
  ['name'] => Your name 
  ['phone'] => Your phone number 
  ['email'] => Your email
) 
```

但是如果我尝试使用`$_POST['user']['name']`，什么也不会发生，它是一个空值。

如果我设置`$_POST['user']`一个变量也会发生这种情况，例如`$user`，当我`print_r $user`得到相同的数组结果时，但如果我尝试使用`$user['name']`它是空白的。

这是已经提交的输入数据

```
<input type="text" name="user['name']" value="Your name" class="general-user user-name-style" />
<input type="text" name="user['phone']" value="Your phone number" class="general-user user-data" />
<input type="text" name="user['email']" value="Your email" class="general-user user-data right-user" /> 
```

我是否以错误的方式处理数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T23:55:21.773

撇号包含在键中，即您得到“'name'”而不是“name”。
试试 $_POST['user']["'name'"]

要解决此问题，请从 HTML 代码中删除撇号：

```
<input type="text" name="user[name]" value="Your name" class="general-user user-name-style" />
<input type="text" name="user[phone]" value="Your phone number" class="general-user user-data" />
<input type="text" name="user[email]" value="Your email" class="general-user user-data right-user" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:41:49.363

检查一下，也许“名字”有西里尔字母或不同于常规拉丁字母“a”或“e”。

# javascript - 如果我将 Javascript 文件重定向到本地修改的 Javascript 文件，管理员是否可以获得我的 js 文件的完整源代码？

> ID：12737488
> 
> 赞同：0
> 
> 时间：2012-10-04T23:31:56.760
> 
> 标签：javascript, google-chrome-extension, security

我创建了一个 google-chrome-extension，它将网站上的 javascript 文件的所有请求重定向到我硬盘上该文件的修改版本。它有效，我这样做简化如下：

```
... redirectUrl: chrome.extension.getURL("modified.js")  ... 
```

Modified.js 是相同的 javascript 文件，只是我修改了代码中的一行。我改变了一些看起来像

```
var message = mytext.value; 
```

至`var message = aes.encrypt(mytext.value,"mysecretkey");`

我现在的问题是这个网站的管理员是否有可能在我重定向 javascript 文件的地方修改他的网页，他可以获得“mysecretkey”。（管理员知道我的扩展是如何工作的以及修改了哪一行但不知道使用的密钥）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:35:23.123

由于管理员可以控制站点的任何方面，他们可以轻松地修改`aes.encrypt`以将第二个参数发布给他们，然后照常继续。因此，您的密钥将立即被泄露。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:38:51.583

不可以。Web 管理员无法看到您设置的内容，然后才能将其发送到他可以看到的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:27:00.973

**是**的，“管理员”可以阅读您的代码的源代码。
你的方法很不安全。有两种方法可以读取“mysecretkey”。

让我们从重要的开始：获取对源的引用。示例，假设您的`aes.encrypt`方法如下所示：

```
(function() {
    var aes = {encrypt: function(val, key) {
        if (key.indexOf('whatever')) {/* ... */}
    }};
})(); 
```

然后可以使用以下方法对其进行妥协：

```
(function(indexOf) {
    String.prototype.indexOf = function(term) {
        if (term !== 'known') (new Image).src = '/report.php?t=' + term;
        return indexOf.apply(this, arguments);
    };
})(String.prototype.indexOf); 
```

许多`prototype`方法可能导致泄漏，以及[`arguments.callee`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee). 如果“管理员”想要破坏您的代码，他肯定能够做到这一点。

另一种方法**更容易实现**：

```
var x = new XMLHttpRequest();
x.open('GET', '/possiblymodified.js');
x.onload = function() {
    console.log(x.responseText); // Full source code here....
};
x.send(); 
```

您可以替换该`XMLHttpRequest`方法，但此时，您只是在玩猫捉老鼠的游戏。每当您认为您已经保护了您的代码时，对方就会找到破解它的方法（例如，使用第一个描述的方法）。

# javascript - 请告诉我如何在我的浏览器中运行 Javascript 函数

> ID：12737493
> 
> 赞同：-1
> 
> 时间：2012-10-04T23:32:37.547
> 
> 标签：javascript

我没有使用 javascript 的经验，但我从这个线程中找到了一些代码：

[开始和停止 div 在其他两个 div 之间滚动](https://stackoverflow.com/questions/10993705/start-and-stop-div-scrolling-between-two-other-divs)

我想在我的网站上使用它。问题是，我无法让它在我的浏览器中工作。到目前为止，我在单独的 html、css 和 javascript 文档的链接中拥有来自 jsfiddle 示例（第一个）的所有代码，并且所有内容都链接得很好。但它不像示例中那样工作。有人可以为我指出如何让这个功能正常运行的正确方向吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:36:57.980

如果您只是简单地复制了所有内容，那么您要么没有在[**jQuery**](http://jquery.com/)中链接，要么（很可能）试图在 DOM 准备好之前执行 JavaScript。

* * *

编辑：

jQuery中的链接。[您提到](http://jsfiddle.net/Tgm6Y/1447/)的小提琴使用 jQuery 1.6，因此一种方法是从*code.jquery.com*或*ajax.googleapis.com 加载*

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.js"></script>
or
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script> 
```

在正确的时间执行代码

```
window.addEventListener('load', function(){

    // your code here

}, false); 
```

# windows - cmake gui windows环境变量路径

> ID：12737494
> 
> 赞同：3
> 
> 时间：2012-10-04T23:32:42.907
> 
> 标签：windows, cmake, environment-variables

我正在尝试通过环境变量指向源文件夹和目标文件夹。

```
%SRC_DIR%/src     --not working
$(SRC_DIR)/src    --not working
Env{SRC_DIR}/src  --not working 
```

我尝试了所有奇怪的语法并搜索了谷歌。该变量`SRC_DIR`是通过 Explorer ( `%SRC_DIR%/src`) 设置和工作的。

那么如何做到这一点呢？
我应该使用什么语法？

# javascript - 没有出现回答按钮（真、假、是和否）

> ID：12737495
> 
> 赞同：2
> 
> 时间：2012-10-04T23:33:12.443
> 
> 标签：javascript, jquery, html

我无法在附加行中显示“True”、“False”、“Yes”和“No”按钮。

我在这里有一个应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)

请按照以下步骤使用应用程序：

**1.当你打开应用程序时，你会看到一个绿色的加号按钮，点击这个按钮，会出现一个模态窗口，里面有一个搜索栏。**

**2\. 在搜索栏中输入以下“橙色”（不带双引号），然后提交搜索。**

**3\. 在“问题”列下，将出现与搜索中的术语匹配的行。您将在“答案”列下看到答案为“真”。请单击“添加”按钮添加行中的内容。**

**4\. 您将在右侧看到它显示“True”和“False”按钮，并且“True”按钮以绿色突出显示。这可以。**

但下面是问题发生的地方：

**1\. 单击“添加问题”按钮，这将在下方添加一行，并从上方复制控件。**

**2\. 现在在您刚刚添加的行中，您将看到另一个绿色加号按钮，单击此按钮并再次执行第 2 步和第 3 步。**

您可以在附加的行中看到，它根本不显示“True”或“False”按钮。所以我的问题是，在附加的行中，当我从模式窗口添加一个问题时，如果答案是“真”或“假”，它为什么不显示“真”或“假”按钮？“是”和“否”按钮也会发生这种情况。

整个代码显示在此处的 jsfiddle 中（打开模式窗口的函数位于小提琴的 javascript 部分的底部）：

[http://jsfiddle.net/WZKrP/6/](http://jsfiddle.net/WZKrP/6/)

代码：

```
function plusbutton(plus_id) {
    // Set global info
    plusbutton_clicked = plus_id;
    // Display an external page using an iframe
    var src = "previousquestions.php";
    $.modal('<iframe src="' + src + '" style="border:0;width:100%;height:100%;">');
    return false;
}

    function addwindow(numberAnswer, gridValues, btn) {

        if (btn == "True" || btn == "False" || btn == "Yes" || btn == "No") {
            var answers = '#answer' + btn;
            var answersrow = '#answer' + btn + 'Row';
        } else {
            var answers = $.map(btn.split(''), function(chr) {
                return "#answer" + chr;
            }).join(', ');
            var answersrow = $.map(btn.split(''), function(chr) {
                return "#answer" + chr + "Row";
            }).join(', ');
        }

        var myNumbers = {};
        myNumbers["True or False"] = "True or False";
        myNumbers["Yes or No"] = "Yes or No";

        gridValues = myNumbers[gridValues];

        if ($(plusbutton_clicked).attr('id') == 'mainPlusbutton') {

            if (gridValues == "True or False") {
                $('#btn' + 'TrueorFalse').trigger('click');

            }

            else if (gridValues == "Yes or No") {
                $('#btn' + 'YesorNo').trigger('click');
            }

            $('#answerSection').find('.answerBtnsOn').trigger('click');
            $(answers).trigger('click');

        } else {

            if (gridValues == "True or False") {
                $(plusbutton_clicked).closest('tr').find('input.gridTxtRow').val(gridValues).parent().append($('.optionTypeTbl'));
                $('#btn' + 'TrueorFalse').trigger('click');

            }

            else if (gridValues == "Yes or No") {
                $(plusbutton_clicked).closest('tr').find('input.gridTxtRow').val(gridValues).parent().append($('.optionTypeTbl'));
                $('#btn' + 'YesorNo').trigger('click');
            }

        }

        $('#btn' + gridValues).trigger('click');
        $(plusbutton_clicked).closest('tr').find('.answerBtnsOn').trigger('click');
        $(plusbutton_clicked).closest('tr').find(answersrow).trigger('click');

        $.modal.close();
        return false;
    }​ 
```

顶部加号按钮的 HTML：

```
<table id="question">
<tr>
<td colspan="2">
<a onclick="return plusbutton();">
<img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" id="mainPlusbutton" name="plusbuttonrow"/>
</a>
<span id="plussignmsg">(Click Plus Sign to look up Previous Questions)</span>
</td>
</tr>
</table> 
```

下面是 jquery 代码，它为每一行附加一个加号按钮：

```
$('.plusimage').each( function() {

    var $this = $(this);
var $plusimagerow = $("<a onclick='return plusbutton(this);'><img src='Images/plussign.jpg' width='30' height='30' alt='Look Up Previous Question' class='imageplus'/></a>").attr('name',$this.attr('name')+"[]")
               .attr('value',$this.val());

$plusrow.append($plusimagerow);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:51:40.580

每个按钮的内联样式定义存在问题（`<input class='answerBtnsRow answers' type='button' style='**display:none**' ...>`每当您应用 CSS 类 answerBtnsOn 时，都没有指定将显示更改回内联、块等的指令。您可以在 answerBtnsOn 类中添加一行，但使用 !important 指令，这样它就会覆盖由您的 jQuery 代码定义的内联样式：`display:inline !important`.

另一种方法是利用 jQuery（例如：）`$('#element').css('display', '');`来更改或删除 jQuery 脚本中的内联样式，它会将按钮设置为不可见。

我肯定会更新 answrBtnsOn 和 answerBtnsOff 类，避免任何内联样式定义。

希望这会有所帮助....如果您有任何问题或疑虑，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:52:55.930

听着，我不认为我理解你。这是你想做的吗？ ![在此处输入图像描述](../Images/d8cb6e54d1388c1ec03a5958dfb52faa.png)

# ms-access - 将 Excel 工作表链接到 Access：#Num！文本数字混合列中的数值错误

> ID：12737506
> 
> 赞同：1
> 
> 时间：2012-10-04T23:35:08.777
> 
> 标签：ms-access, vba, ms-access-2003

这是关于我继承的旧版 Access 2003 数据库。有一些链接 Excel (97-2003) 电子表格的代码：

```
tdf.Connect = "Excel 5.0;HDR=Yes;IMEX=2;DATABASE="&strXLFileName
tdf.SourceTableName = strSourceTableName & "$"
CurrentDb.TableDefs.Append tdf 
```

之后打开链接表时，我看到#Num！代替应该包含数字和文本的列中的数值。

例如，在 Excel 中：

```
Field1
H88
234
X65
432 
```

Access中的链接表：

```
Field1
H88
#Num!
X65
#Num! 
```

我尝试了以下方法：(a) 将 Excel 5.0 更改为 Excel 8.0，这对于源文件的格式更准确；(b) 使用 DoCmd.TransferSpreadsheet 而不是链接导入。

第一个仍然给出#Num！，而导入给出空值。

升级到更高版本目前不是一种选择 - 代码中有许多地方使用 Application.FileSearch 需要仔细重写和测试的东西。

任何人都知道如何让 Access 2003 也像对待文本一样对待“数字”？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:49:12.610

更改`IMEX=2`为`IMEX=1`将所有值视为文本。

[您可以在Excel 2007](http://connectionstrings.com/excel-2007)`IMEX`的连接字符串中阅读更多信息。

# android - Android 表格宽度查询

> ID：12737514
> 
> 赞同：0
> 
> 时间：2012-10-04T23:36:16.787
> 
> 标签：android, android-tablelayout

我有一个表格布局（下面的代码），但是单元格的宽度有点问题。下图显示了问题。屏幕右侧应该有一个白色边框。我还希望文本“Auditorium”**不要**换行（我希望将“13th -”放到新行上，我不想把 \n 放在那里，因为这样就意味着它会继续在更大的屏幕/横向视图的那个点上换行）。

我该如何解决这两个问题？

![宽度问题](../Images/4deba86822b2e3503913e27ecb5d8b8f.png)

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#013567" >

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:shrinkColumns="*"
    android:stretchColumns="*" >

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/textlines"
            android:gravity="center"
            android:text="@string/meeting_5"
            android:textColor="#fff" >
        </TextView>

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/textlines"
            android:gravity="center"
            android:text="@string/meeting_5_date"
            android:textColor="#fff" >
        </TextView>

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/textlines"
            android:gravity="center"
            android:text="@string/meeting_5_location"
            android:textColor="#fff" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/textlines"
            android:gravity="center"
            android:text="@string/AGM"
            android:textColor="#fff" >
        </TextView>

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/textlines"
            android:gravity="center"
            android:text="@string/AGM_date"
            android:textColor="#fff" >
        </TextView>

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/textlines"
            android:gravity="center"
            android:text="@string/AGM_location"
            android:textColor="#fff" >
        </TextView>
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:36:22.547

只需在您的 xml 文件中使用此代码

```
 <TableLayout
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:shrinkColumns="*"
     android:stretchColumns="*" 
     android:layout_margin="2dp"
     android:layout_gravity="center_horizontal">

<TableRow
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/textlines"
        android:gravity="center"
        android:text="meeting_5"
        android:textColor="#fff" >
    </TextView>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/textlines"
        android:gravity="center"
        android:text="meeting_5_date"
        android:textColor="#fff" >
    </TextView>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/textlines"
        android:gravity="center"
        android:text="meeting_5_location"
        android:textColor="#fff" >
    </TextView>
</TableRow>

<TableRow
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/textlines"
        android:gravity="center"
        android:text="AGM"
        android:textColor="#fff" >
    </TextView>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/textlines"
        android:gravity="center"
        android:text="AGM_date"
        android:textColor="#fff" >
    </TextView>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/textlines"
        android:gravity="center"
        android:text="AGM_location"
        android:textColor="#fff" >
    </TextView>
</TableRow>
</TableLayout>
</ScrollView> 
```

# java - 如何在 JSP 中同时呈现 HTML 表单字段并在后台运行 Java 代码

> ID：12737518
> 
> 赞同：1
> 
> 时间：2012-10-04T23:37:03.617
> 
> 标签：java, html, jsp, background, form-fields

我制作了一个 JSP 页面，其中包含表单字段和脚本中的 java 代码。我已经在 J​​SP 页面中导入了 java 代码，并制作了对象来调用该 java 类的函数。

当我执行 JSP 时，JSP 页面保持空白，只有当所有 Java 代码都已执行时，html 表单字段才会呈现在视图上。

我有两个问题：

1.）我怎样才能加快这个过程，我怎样才能显示类似“正在加载...”的内容，直到呈现 html 或 2）如何让 HTML 字段在调用 JSP 页面时立即出现，同时让所有 java代码同时在后台运行。（在JSP中创建对象的java类调用webservices，这可能需要一些时间，同时我希望用户应该开始在表单字段中输入）。但是在整个Java代码完成之前，用户看不到任何表单字段执行。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:38:45.813

您可以先显示一个页面，然后再通过 Ajax 加载其他内容。

# iphone - 每周触发 UILocalNotification

> ID：12737520
> 
> 赞同：0
> 
> 时间：2012-10-04T23:37:15.067
> 
> 标签：iphone, objective-c, ios, uilocalnotification, nscalendar

我似乎无法弄清楚为什么这个通知没有安排在星期六......我已经尝试过`NSGregorianCalendar`和`autoupdatingCurrentCalendar`。我正在设置`[dateComps setWeekday:7];`，但它一直在星期天返回。

```
//NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];
 NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *timeComponent = [calendar components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) fromDate:reminderTime];
 // Set up the fire time
 NSDateComponents *dateComps = [[NSDateComponents alloc] init];
 [dateComps setYear: 2012];;
 [dateComps setHour: timeComponent.hour];
 [dateComps setMinute: timeComponent.minute];
 [dateComps setSecond:0];
 // Set day of the week
 [dateComps setWeekday:7];
 NSDate *itemDate = [calendar dateFromComponents:dateComps];

 UILocalNotification *notification = [[UILocalNotification alloc] init];
 if (notification == nil)
     return;
 notification.fireDate = itemDate;
 notification.repeatInterval = NSWeekCalendarUnit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:09:48.037

`dateComps`正如您计算的那样，它不包含一天或一个月，因此它`setWeekday`只是被忽略并且`itemDate`是 2012 年 1 月的第一个日期（这是一个星期日）。

要计算下一个星期六，您可以按照“日期和时间编程指南”的[将组件添加到日期中的说明进行操作：](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html)

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

// Weekday of "reminderTime":
NSDateComponents *weekdayComponents = [calendar components:NSWeekdayCalendarUnit fromDate:reminderTime];

// Number of weekdays until next Saturday:
NSDateComponents *componentsToAdd = [[NSDateComponents alloc] init];
[componentsToAdd setDay: 7 - [weekdayComponents weekday]];

NSDate *itemDate = [calendar dateByAddingComponents:componentsToAdd toDate:reminderTime options:0]; 
```

# diskspace - 列出可用驱动器 VB.net 中的总可用空间

> ID：12737521
> 
> 赞同：0
> 
> 时间：2012-10-04T23:37:30.777
> 
> 标签：diskspace

我正在尝试使用批处理和 VB.net 从计算机上所有可用的逻辑驱动器中获取可用磁盘空间。使用“wmic”我得到所需的输出，然后使用 VB 将“字节”值转换为 MB/GB/KB，但问题是我无法让 VB 脚本读取“wmic”命令的文本输出。下面是“wmic”代码。

```
wmic LogicalDisk Where DriveType="3" Get DeviceID,FreeSpace > Diskspace.txt 
```

下面的vb代码读取'diskspace.txt'文件

```
Set objFSO = CreateObject ("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile ("diskspace.txt",1)
Contents = objFile.Readall
objFile.close 
```

关键是有没有一种更简单的方法可以从系统上的所有逻辑驱动器中获取可用空间？或者我在上面的代码中做错了什么。

我还在 wmic 中尝试了“/format:csv”参数，但无法让它在 VB 中读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:47:03.233

找到解决方案！！

WMI 的输出是 unicode 格式，需要转换为 ASCII 格式以便 VB 能够读取它。

要转换使用 TYPE 命令（批处理），如下所示

```
TYPE diskspace.txt > NEWdiskspace.txt 
```

# php - 在页面刷新时禁用 jQuery 效果

> ID：12737523
> 
> 赞同：1
> 
> 时间：2012-10-04T23:37:43.240
> 
> 标签：php, jquery

**概述**

在页面加载后 5 秒内，我有 div#lead_form 的 SlideDown。在那个 div 中，我有一个提交按钮。每次有人单击提交时，#lead_form 中的表单都会验证输入字段并刷新页面。

**问题**

每次表单验证时，它都会刷新网页，并且 div#lead_form SlideDown 需要 5 秒才能滑入。我想要做的是，有一个 true false 变量并检查是否已单击提交按钮，如果为 true，则禁用div#lead_form SlideDown 效果？

**我的 HTML**

```
<div id="lead_form">
<div id="button"><a href="#"></a></div>
</div> 
```

**我的 jQuery**

```
$(document).ready(function() {
 $("#lead_form").hide(0).delay(4000).slideDown(5000);
}); 
```

**发现**

[这不是我所追求的，而是类似的？](https://stackoverflow.com/questions/1712589/jquery-how-to-sequentially-run-an-animation-only-once-after-animation-on-a)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:51:10.710

在您的服务器端代码中检查请求是否与您提交的表单一起出现，并将结果作为 javascript var 写入页面的给定部分

```
if( isset($_POST['yourFORMFIELD']) )
{
     echo "var postBack = true;";
} 
```

然后将您的 jQuery 更改为

```
$(document).ready(function() {
    if(!postBack) {
        $("#lead_form").hide(0).delay(4000).slideDown(5000);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:53:56.997

由于页面重新加载，您无法仅使用 javascript 解决此问题。您必须以某种方式保持状态（如果已提交表单）并在重新加载页面后检查该状态。您可以通过 cookie 或本地存储来执行此操作（本地存储仅适用于最新的浏览器）

# magento - Magento：优先考虑模块加载

> ID：12737525
> 
> 赞同：0
> 
> 时间：2012-10-04T23:38:43.223
> 
> 标签：magento, module

有一个现有的第三方模块可以覆盖现有的 Mage 功能。让我们称之为“Foo”。显然，它位于本地文件夹中以覆盖核心功能。当我开始着手这个项目时，我还没有创建另一个模块来覆盖 Foo 模块的一些功能。我们称它为“酒吧”。两者都已成功加载（后端表示已加载）。问题是 Foo 模块仍然优先于 Bar 和 Bar 模块似乎不起作用。我对此有两个问题：

1.  我是否可以推测 Magento 不仅按 Core、Enterprise、本地模型优先模块，而且按字母倒序排列模块，也就是说，即使两个模块都在本地文件夹中，Foo 会取代 Bar？

2.  如果这是真的，我怎样才能让 Bar 优先于 Foo 模块？

谢谢，希望有人能对这个问题有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:05:08.037

不确定我是否记错了（Ben，如果我错了，就打我一下），但你应该能够在你的 module.xml 文件（/app/etc/modules 下的 Foo_Bar.xml）中控制它。

随便进去

```
<depends>
    <Foo_Bar>
</depends> 
```

...就在节点之后。该值应采用标准的“Namespace_Modulename”格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:35:00.203

我假设您有 2 个模块，My_Foo 和 My_Bar，并且您希望 Foo 在 Bar 之前加载。为此，在您的 Bar 模块 xml 文件（在 /app/etc/modules/My_Bar.xml 下）中，只需添加：

```
<depends>
<My_Foo/>
</depends> 
```

现在 My_Foo 模块在 My_Bar 之前加载

# javascript - 重置选择框的值

> ID：12737528
> 
> 赞同：37
> 
> 时间：2012-10-04T23:39:00.477
> 
> 标签：javascript, jquery

我正在尝试重置两个选择字段的值，结构如下，

```
<select>
  <option></option>
  <option></option>
  <option></option>
</select>

<select>
  <option></option>
  <option></option>
  <option></option>
</select> 
```

jQuery,

```
$('select').each(function(idx, sel) {
  $(sel).find('option :eq(0)').attr('selected', true);
}); 
```

不幸的是，无论我尝试多少方法，它都不会发生。控制台中什么都没有。我不知道是怎么回事？我知道必须有办法做到这一点，你可以用 JS做**任何事情**

编辑：

我发现只有当我尝试在单击 dom 元素时触发代码时才会出现问题，但是，我知道代码应该可以工作，因为当我有

```
$('p').click(function(){
  console.log('test');
}); 
```

它将“测试”输出到控制台，但是当我在此函数中包含代码时，什么也没有发生。为什么是这样？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-05T01:31:46.710

我想你只想重置一个元素。重置整个表单很简单：调用它的*reset*方法。

“重置”选择元素的最简单方法是将其`selectedIndex`属性设置为默认值。如果您知道没有选项是默认选择的选项，只需将选择元素的*selectedIndex*属性设置为适当的值：

```
function resetSelectElement(selectElement) {
    selecElement.selectedIndex = 0;  // first option is selected, or
                                     // -1 for no option selected
} 
```

但是，由于一个选项可能具有选定的属性或以其他方式设置为默认选定选项，您可能需要执行以下操作：

```
function resetSelectElement(selectElement) {
    var options = selectElement.options;

    // Look for a default selected option
    for (var i=0, iLen=options.length; i<iLen; i++) {

        if (options[i].defaultSelected) {
            selectElement.selectedIndex = i;
            return;
        }
    }

    // If no option is the default, select first or none as appropriate
    selectElement.selectedIndex = 0; // or -1 for no option selected
} 
```

并且注意设置属性而不是属性，它们在不同的浏览器中具有不同的效果。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-05T00:13:43.930

这对我有用：

```
$('select').prop('selectedIndex', 0); 
```

[小提琴](http://jsfiddle.net/barmar/bW993/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-09T03:54:16.733

除了@RobG's pure / vanilla javascript answer之外，您可以使用重置为“默认”值

```
selectElement.selectedIndex = null; 
```

似乎 -1 取消选择所有项目，null 选择默认项目，0 或正数选择相应的索引选项。

> 选择对象中的选项按照它们定义的顺序进行索引，从索引 0 开始。

[资源](http://msdn.microsoft.com/en-us/library/ie/ms534624%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-11-17T19:34:41.460

[neRok](https://stackoverflow.com/users/3800244/nerok)在上面提到了这个答案，我只是在扩展它。

根据稍微过时但方便的 O'Reilly 参考书[Javascript: The Definitive Guide](https://rads.stackoverflow.com/amzn/click/com/B004XQX4K0)：

> Select 对象的*selectedIndex*属性是一个整数，它指定 Select 对象中选定选项的索引。如果未选择任何选项，则*selectedIndex*为 -1。

因此，以下 javascript 代码会将 Select 对象“重置”为未选择任何选项：

```
select_box = document.getElementById("myselectbox");
select_box.selectedIndex = -1; 
```

请注意，以这种方式更改选择不会触发*onchange()*事件处理程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T23:43:12.047

使用[`.val('')`](http://api.jquery.com/val/)二传手

[jsfiddle 示例](http://jsfiddle.net/sSWZ4/)

```
$('select').val('1'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T00:17:58.767

不久前我发现了一个小实用功能，从那以后我一直在使用它来重置我的表单元素（来源： http: [//www.learningjquery.com/2007/08/clearing-form-data](http://www.learningjquery.com/2007/08/clearing-form-data)）：

```
function clearForm(form) {
  // iterate over all of the inputs for the given form element
  $(':input', form).each(function() {
    var type = this.type;
    var tag = this.tagName.toLowerCase(); // normalize case
    // it's ok to reset the value attr of text inputs, 
    // password inputs, and textareas
    if (type == 'text' || type == 'password' || tag == 'textarea')
      this.value = "";
    // checkboxes and radios need to have their checked state cleared 
    // but should *not* have their 'value' changed
    else if (type == 'checkbox' || type == 'radio')
      this.checked = false;
    // select elements need to have their 'selectedIndex' property set to -1
    // (this works for both single and multiple select elements)
    else if (tag == 'select')
      this.selectedIndex = -1;
  });
}; 
```

...或作为 jQuery 插件...

```
$.fn.clearForm = function() {
  return this.each(function() {
    var type = this.type, tag = this.tagName.toLowerCase();
    if (tag == 'form')
      return $(':input',this).clearForm();
    if (type == 'text' || type == 'password' || tag == 'textarea')
      this.value = '';
    else if (type == 'checkbox' || type == 'radio')
      this.checked = false;
    else if (tag == 'select')
      this.selectedIndex = -1;
  });
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-24T14:56:32.447

不使用 javaScript 的最简单方法是将所有 <select> 下拉列表放在 <form> 标记内并使用表单重置按钮。例子：

```
<form>
  <select>
    <option>one</option>
    <option>two</option>
    <option selected>three</option>
  </select>
  <input type="reset" value="Reset" />
</form> 
```

或者，使用 JavaScript，可以通过以下方式完成：

HTML 代码：

```
<select>
  <option selected>one</option>
  <option>two</option>
  <option>three</option>
</select>
<button id="revert">Reset</button> 
```

和 JavaScript 代码：

```
const button = document.getElementById("revert");
const options = document.querySelectorAll('select option');
button.onclick = () => {
  for (var i = 0; i < options.length; i++) {
    options[i].selected = options[i].defaultSelected;
  }
} 
```

如果您有多个选定的项目或单个选定的项目，这两种方法都将起作用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-04T12:34:17.750

对我有用的是：

```
$('select option').each(function(){$(this).removeAttr('selected');}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-29T13:08:19.893

对于选择2

```
$('select').select2().val('').trigger('change'); 
```

如果您想重置表单中的 select2 元素

```
$("#formId").find('select').select2().val('').trigger('change'); 
```

# javascript - 快速搜索结果框出现 jQuery 错误

> ID：12737531
> 
> 赞同：0
> 
> 时间：2012-10-04T23:39:31.970
> 
> 标签：javascript, jquery, html, interspire-shopping-cart

目前有一个问题，我想做一个简单的 jQuery 附加来将一个 div 移动到另一个 div 中。在这种情况下，当我在搜索框中键入时，建议的结果应该出现在下方。然而，由于我自己更改了一些代码，它不再出现在左边，所以我做了一个简单的 jQuery 附加来让我的生活更轻松。

问题是，当我进行简单搜索并且搜索框下方出现结果框时，我使用控制台执行以下代码行：

```
$('#QuickSearch').appendTo($('#searchheader')); 
```

在控制台中一切正常。但是，当我将它放在搜索的 javascript 文件中时，它不会执行该行代码。下面是与搜索相关的 jQuery：

```
var QuickSearch = {
    minimum_length: 3,
    search_delay: 125,
    cache: new Object(),
    init: function()
    {
        $('#search_query').bind("keydown", QuickSearch.on_keydown);
        $('#search_query').bind("keyup", QuickSearch.on_keyup);
        $('#search_query').bind("change", QuickSearch.on_change);
        $('#search_query').blur(QuickSearch.on_blur);
        $('#search_query').attr('autocomplete', 'off');

        var scripts = document.getElementsByTagName('SCRIPT');
        for(var i = 0; i < scripts.length; i++)
        {
            s = scripts[i];
            if(s.src && s.src.indexOf('quicksearch.js') > -1)
            {
                QuickSearch.path = s.src.replace(/quicksearch\.js$/, '../');
                break;
            }
        }

    },

    on_blur: function(event)
    {
        if(!QuickSearch.item_selected && !QuickSearch.over_all)
        {
            QuickSearch.hide_popup();
        }
    },

    on_keydown: function(event)
    {
        if(event.keyCode == 13 && !event.altKey)
        {
            if(QuickSearch.selected)
            {
                try {
                    event.preventDefault();
                    event.stopPropagation();
                } catch(e) { }
                window.location = QuickSearch.selected.url;
                return false;
            }
            else
            {
                QuickSearch.hide_popup();
            }
        }
        else if(event.keyCode == 27)
        {
            if(document.getElementById('QuickSearch'))
            {
                try {
                    event.preventDefault();
                    event.stopPropagation();
                } catch(e) { }
            }
            QuickSearch.hide_popup();
        }
    },

    on_keyup: function(event)
    {
        if(QuickSearch.timeout)
        {
            clearTimeout(QuickSearch.timeout);
        }

        // Down key was pressed
        if(event.keyCode == 40 && QuickSearch.results)
        {
            if(QuickSearch.selected && QuickSearch.results.length >= QuickSearch.selected.index+1)
            {
                QuickSearch.highlight_item(QuickSearch.selected.index+1, true);
            }
            if(!QuickSearch.selected && QuickSearch.results.length > 0)
            {
                QuickSearch.highlight_item(0, true);
            }
            try {
                event.preventDefault();
                event.stopPropagation();
            } catch(e) { }
            return false;
        }
        else if(event.keyCode == 38 && QuickSearch.results)
        {
            if(QuickSearch.selected && QuickSearch.selected.index > 0)
            {
                QuickSearch.highlight_item(QuickSearch.selected.index-1, true);
            }
            try {
                event.preventDefault();
                event.stopPropagation();
            } catch(e) { }
        }
        else if(event.keyCode == 27)
        {
            QuickSearch.hide_popup();
        }
        else
        {
            if($('#search_query').val() == QuickSearch.last_query)
            {
                return false;
            }
            QuickSearch.selected = false;
            if($('#search_query').val().replace(/^\s+|\s+$/g, '').length >= QuickSearch.minimum_length)
            {
                QuickSearch.last_query = $('#search_query').val().replace(/^\s+|\s+$/g, '');
                if(QuickSearch.timeout)
                {
                    window.clearTimeout(QuickSearch.timeout);
                }
                QuickSearch.timeout = window.setTimeout(QuickSearch.do_search, QuickSearch.search_delay);
            }
            else {
                if(document.getElementById('QuickSearch'))
                {
                    $('#QuickSearch').remove();
                }
            }
        }
    },

    on_change: function(event)
    {
        return (QuickSearch.on_keydown(event) && QuickSearch.on_keyup(event));
    },

    do_search: function()
    {
        var cache_name = $('#search_query').val().length+$('#search_query').val();
        if(QuickSearch.cache[cache_name])
        {
            QuickSearch.search_done(QuickSearch.cache[cache_name]);
        }
        else
        {
            $.ajax({
                type: 'GET',
                dataType: 'xml',
                url: QuickSearch.path+'search.php?action=AjaxSearch&search_query='+encodeURIComponent($('#search_query').val()),
                success: function(response) { QuickSearch.search_done(response); }
            });
        }
    },

    search_done: function(response)
    {
        // Cache results
        var cache_name = $('#search_query').val().length+$('#search_query').val();
        QuickSearch.cache[cache_name] = response;

        if(document.getElementById('QuickSearch')) {
            $('#QuickSearch').remove();
        }

        if ($('result', response).length > 0) {
            var popup_container = document.createElement('TABLE');
            popup_container.className = 'QuickSearch';
            popup_container.id = 'QuickSearch';
            popup_container.cellPadding = "0";
            popup_container.cellSpacing = "0";
            popup_container.border = "0";

            var popup = document.createElement('TBODY');
            popup_container.appendChild(popup);

            var counter = 0;

            $('result', response).each(
                function()
                {
                    var tr = $($(this).text());
                    var url = $('.QuickSearchResultName a', tr).attr('href');
                    var tmpCounter = counter;

                    $(tr).attr('id', 'QuickSearchResult' + tmpCounter);
                    $(tr).bind('mouseover', function() { QuickSearch.item_selected = true; QuickSearch.highlight_item(tmpCounter, false); });
                    $(tr).bind('mouseup', function() { window.location = url; });
                    $(tr).bind('mouseout', function() { QuickSearch.item_selected = false; QuickSearch.unhighlight_item(tmpCounter) });
                    $(popup).append(tr);

                    counter++;
                }
            );

            // More results than we're showing?
            var all_results_count = $('viewmoreurl', response).size();

            if(all_results_count)
            {
                var tr = document.createElement('TR');
                var td = document.createElement('TD');
                tr.className = "QuickSearchAllResults";
                tr.onmouseover = function() { QuickSearch.over_all = true; };
                tr.onmouseout = function() { QuickSearch.over_all = false; };
                td.colSpan = 2;
                td.innerHTML = $('viewmoreurl', response).text();
                tr.appendChild(td);
                popup.appendChild(tr);
            }

            var clone = popup.cloneNode(true);
            document.body.appendChild(clone);
            clone.style.pp = "10px";
            clone.style.left = "10px";
            offset_height = clone.offsetHeight;
            offset_width = clone.offsetWidth;
            clone.parentNode.removeChild(clone);

            var offset_top = offset_left = 0;
            var element = document.getElementById('search_query');
            if(typeof(QuickSearchAlignment) != 'undefined' && QuickSearchAlignment == 'left') {
                offset_left = 0;
            }
            else {
                offset_left += element.offsetWidth - $('#SearchForm').width();
            }

            offset_top = 87;
            do
            {
                offset_top += element.offsetTop || 0;
                offset_left += element.offsetLeft || 0;
                element = element.offsetParent;
            } while(element);

            popup_container.style.position = "fixed";
            popup_container.style.top = offset_top + "px";
            if(typeof(QuickSearchWidth) != 'undefined') {
                popup_container.style.width = QuickSearchWidth;
            }
            else {
                popup_container.style.width = document.getElementById('SearchForm').offsetWidth - 2 + "px";
            }
            if($('#QuickSearch'))
            {
                $('#QuickSearch').remove();
            }
            document.body.appendChild(popup_container);
            popup_container.style.display = '';
        }
        else
        {
            if(document.getElementById('QuickSearch'))
            {
                $('#QuickSearch').remove();
            }
        }
    },

    hide_popup: function()
    {
        $('#QuickSearch').remove();
        QuickSearch.selected = null;
    },

    highlight_item: function(index, keystroke)
    {
        element = $('#QuickSearchResult'+index);
        if(keystroke == true)
        {
            if(QuickSearch.selected) QuickSearch.selected.className = 'QuickSearchResult';
            QuickSearch.selected = document.getElementById('QuickSearchResult'+index);
        }
        element.addClass("QuickSearchHover");
    },

    unhighlight_item: function(index)
    {
        element = $('#QuickSearchResult'+index);
        element.removeClass('QuickSearchHover');
    }
};

$(document).ready(function()
{
    QuickSearch.init();
}); 
```

# ruby - 撤销 Dropbox 根目录下目录的大写

> ID：12737538
> 
> 赞同：0
> 
> 时间：2012-10-04T23:40:11.017
> 
> 标签：ruby, path, dropbox, dropbox-api, capitalization

我正在使用[Dropbox](https://www.dropbox.com/developers/start/files#ruby) [Ruby API](https://www.dropbox.com/static/developers/dropbox-ruby-sdk-1.5.1-docs/)。当我`"path"`通过其 API 收到 Dropbox 服务器上的目录时，如果目录路径直接位于 Dropbox 根目录下，则无论本地计算机上的相应目录是否大写，都将大写。给定 Dropbox 服务器上的信息，我怎样才能在本地计算机上以正确的字母大小写实现相应的路径？简单地应用于`downcase`给定路径是行不通的，因为本地计算机上的某些目录实际上可能是大写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:54:48.013

您可以尝试对有问题的文件进行不区分大小写的搜索，或者通常只使用不区分大小写的正则表达式。只需确保匹配完整的文件名，与下面的示例不同：

```
require 'find'

Find.find('.') do |path|
    if path =~ /file_name/i
        p path
    end
end 
```

# java - Embedded Jetty 8 热部署类（使用 Maven）

> ID：12737542
> 
> 赞同：2
> 
> 时间：2012-10-04T23:40:40.043
> 
> 标签：java, maven, jetty, embed

我定义了一个标准的 Maven webapp 结构，它使用 Spring MVC。

我正在使用嵌入式 Jetty 服务器（java 类）来测试开发中的应用程序。

用于创建 Jetty 服务器的代码概述如下。如果我对任何 JSP 文件进行更改，这些更改会**立即**在浏览器中可见。

但是，如果我更改任何类文件，例如控制器，更改不会热部署？

我该怎么做才能让它工作？

我已经搜索过这个，我想我需要使用**org.eclipse.jetty.util.Scanner**类，特别是**setScanInterval**方法，但不知道如何连接它？

这是创建服务器的代码

```
 String webAppDir = "src/main/webapp/";
    Server server = new Server(8080);
    WebAppContext webApp = new WebAppContext();
    webApp.setContextPath("/");
    webApp.setDescriptor(webAppDir + "/WEB-INF/web.xml");
    webApp.setResourceBase(webAppDir);
    webApp.setParentLoaderPriority(true);

    HandlerCollection hc = new HandlerCollection();
    ContextHandlerCollection contextHandlerCollection = new ContextHandlerCollection();
    hc.setHandlers(new Handler[] { contextHandlerCollection });
    hc.addHandler(webApp);
    server.setHandler(hc);
    return server; 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:30:34.890

对于热部署，您需要使用 WebAppProvider 和 DeploymentManager。您可以配置这些来管理扫描更改和重新加载 web 应用程序。所以很明显，WebappContext 不是管理 webapp 部署的东西，它只是被部署的容器类，所以还有另一种机制可以处理部署/重新部署的概念。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-deploy/src/test/resources/jetty-deploy-wars.xml](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-deploy/src/test/resources/jetty-deploy-wars.xml)

您可以在那里获取那块 xml 并将其转换为您需要执行此嵌入的 java 调用。

或者使用类似 jrebel jvm 插件的东西，它提供了自动类重新加载。

# ruby-on-rails-3 - rails 3.0 在创建时触发验证，以进行应该仅更新的验证

> ID：12737543
> 
> 赞同：3
> 
> 时间：2012-10-04T23:40:47.483
> 
> 标签：ruby-on-rails-3

我们正在从 rails 2.3 升级到 rails 3，并且我们对以下模型进行了一些验证：

```
validates_length_of :corporate_type,  :in => 1..255, :allow_blank => false, :on => :update, :if => Proc.new { |rra| rra.show_corporate_type? } 
```

在 Rails 2.3 中，这只在更新时调用，但在 Rails 3 中，它似乎在创建时调用，这会破坏下游的一些东西......有人可以解释为什么在创建时调用它吗？

这是堆栈：

```
app/models/rra_agreement.rb:11:in `block in <class:RRAAgreement>'

app/models/foo_application_delegate.rb:29:in `create_application' 
```

第 28 和 29 行是：

```
rra = RRAAgreement.new()
rra.save 
```

第 11 行是上面的验证行

谢谢乔尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:46:48.983

我会尝试使用以下方法`:new_record?`

```
validates :corporate_type, :unless => :new_record? 
```

新记录？如果刚刚创建，则返回 true，否则返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:09:52.367

好吧，我有一个解决方法，它很难看，但它似乎至少让我们继续前进：

```
 validates_length_of :corporate_type,  :in => 1..255, :allow_blank => false, :on => :update, :if => Proc.new { |rra| return false if rra.id==nil;rra.show_corporate_type? } 
```

如果 id 不存在，这只是错误的，它应该在更新时存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:05:07.183

rails 3 的语法已更改，尝试仅在更新时调用，

```
validates :corporate_type,:length => {:on => :update, :min => 1, :max => 20 } 
```

# java - 在部分透明的 JPanel 上绘制 jComponent

> ID：12737544
> 
> 赞同：2
> 
> 时间：2012-10-04T23:40:55.913
> 
> 标签：java, swing, jpanel, opacity, paintcomponent

我有一个带有 MouseListener 的 JLabel，看起来像一个链接。因此，如果您将鼠标悬停在它上面，颜色会发生变化。

```
@Override
public void mouseEntered(MouseEvent e){
    setForeground(new Color(255,134,0));
} 
```

此 JLabel 位于仅部分透明的 JPanel 上

```
panel.setBackground(new Color(255,255,255,100)); 
```

当我将鼠标悬停在链接上时，它会改变颜色，但透明背景会“出现故障”。它使文本区域的背景为白色，白色上还有一些随机字母。一旦我重新调整窗口大小，这种情况就会消失，很明显，然后调用某种油漆来正确地重新油漆该部分。

我的问题是我已经调用了该 JFrame 以及 JFrame 中的每个绘制方法，但背景仍然出现故障。那么还有其他方法可以做到这一点还是我做错了？

谢谢

# linux - cd .. 命令不起作用

> ID：12737547
> 
> 赞同：6
> 
> 时间：2012-10-04T23:41:30.820
> 
> 标签：linux, ubuntu

我在我的 ubunto 桌面上创建了一个目录，并在其中复制了一些文件。

我尝试使用终端进入目录。

我遇到的问题是，当我想通过使用“cd ..”命令返回到“桌面”的父目录时，我收到一条错误消息`cd..: command not found`

我是新手，想知道原因。你能帮我解释一下吗？谢谢你

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-04T23:44:08.157

你需要空间，在命令之后`cd`

```
cd .. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T23:43:10.687

您错过了 和 之间的`cd`空格`..`：

```
cd .. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T23:43:29.707

你缺少一个空格，应该是`cd ..`

# qt - 如何使 Qt 中的类既可编写脚本又可序列化？

> ID：12737550
> 
> 赞同：1
> 
> 时间：2012-10-04T23:41:39.720
> 
> 标签：qt, qobject, qtscript, qvariant

我正在尝试编写一个具有两个基本特征的类：

*   它需要是可编写脚本的——该类包含许多用`Q_INVOKABLE`脚本装饰的属性和方法。
*   它需要可序列化，以便可以注册以[`qRegisterMetaTypeStreamOperators()`](http://qt-project.org/doc/qt-4.8/qmetatype.html#qRegisterMetaTypeStreamOperators)存储在`QVariant`s 中。

据我所知，`QObject`为了使类可编写脚本，我需要派生自。但是，为了使用 注册该类`qRegisterMetaTypeStreamOperators()`，该类似乎需要有一个默认的复制构造函数——这是`QObject`派生类所不能具备的。

有没有办法实现这两个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:15:31.917

您可以拥有不是从 QObject 派生的可编写脚本的对象，但它的工作量更大。[在这里](http://harmattan-dev.nokia.com/docs/library/html/qt4/scripting.html#managing-non-qobject-based-objects)讨论

# java - 使用 post 请求发送 post 属性和 xml 数据？

> ID：12737553
> 
> 赞同：1
> 
> 时间：2012-10-04T23:41:53.120
> 
> 标签：java, rest, gwt

java、GWT 和与 API 交互的新手。我有一个我希望是一个简单的问题。

我已使用以下 curl 命令成功与 REST API 交互：

```
curl -d "OPERATION_NAME=ADD_REQUEST&TECHNICIAN_KEY=xxxxxxxxxxx&INPUT_DATA=<?xml version=%221.0%22 encoding=%22utf-8%22?><Operation><Details><requester>Me</requester><subject>Test</subject><description>Testing curl input</description></Details></Operation>" http://xx.xx.xx.xx/sdpapi/request/ 
```

现在，从教程中，我有以下代码，我希望能像上面的 curl 命令一样向远程服务器发布请求。

我想弄清楚（谷歌不喜欢）我在发送 URL 时如何传递 OPERATION_NAME、TECHNICIAN_KEY 和 INPUT_DATA 参数。任何建议、教程等将不胜感激。

以下来自我的服务器端实现接口：

```
@Override
public String postToRemoteServer(String serviceUrl)
        throws HelpDeskTestException {

    try {
        //dividing url into host: http://some.server
        //path: a/path/in/it
        //and parameters: this=that&those=others

        int hostStart= serviceUrl.indexOf("//");

        int pathStart= serviceUrl.substring(hostStart + 2).indexOf("/");

        int parameterStart= serviceUrl.substring(hostStart + 2 + pathStart).indexOf("?");

        final String serverHost= serviceUrl.substring(0, hostStart + pathStart + 2);

        final String serverPath= serviceUrl.substring(hostStart + 3, 
                hostStart + pathStart + 2 + parameterStart);

        final String serverParameters= serviceUrl.substring(hostStart + pathStart + 3 + parameterStart);

        final  URL url = new URL(serverHost);

        final URLConnection connection= url.openConnection();
        connection.setDoOutput(true);

        final OutputStreamWriter out= new OutputStreamWriter(connection.getOutputStream());

        final BufferedReader in= new BufferedReader(new InputStreamReader(
                connection.getInputStream()));

        out.write("POST " + serverPath + "\r\n");
        out.write("Host: " + serverHost + "\r\n");
        out.write("Accept-Encoding: identity\r\n");
        out.write("Connection: close\r\n");
        out.write("Content-Type: application/x-www-form-urlencoded\r\n");
        out.write("Content-Length: " + serverParameters.length() + "\r\n\r\n" +
            serverParameters + "\r\n");

        String result = "";
        String inputLine;

        while ((inputLine=in.readLine()) != null) {
            result+= inputLine;
        }

        in.close();
        out.close();

        return result;

    }  catch (final Exception e) {
        throw new HelpDeskTestException();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:45:23.350

考虑使用这个库：[Apache HttpClient](http://hc.apache.org/httpcomponents-client-ga/)。这是使用它发出 POST 请求[的示例。](http://www.vogella.com/articles/ApacheHttpClient/article.html#example_post)

# android - 需要删除 ListView 中的所有现有页脚

> ID：12737554
> 
> 赞同：2
> 
> 时间：2012-10-04T23:41:59.733
> 
> 标签：android, android-listview

从 a 中删除所有页脚的最佳方法是`ListView`什么？好像没有`removeAllFooterViews()`方法。那么如何可靠地删除所有已添加的页脚呢？如果一个 android 视图可以有一个`removeAllViews()`为什么不能`ListView`有一个`removeAllFooterViews()`. 为什么不使用一种方法来检索已添加的所有页脚。我的意思是有没有人在没有迭代选项的情况下构建过添加/删除容器？这是无稽之谈。

对此有何看法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T23:49:25.300

您可以遍历列表适配器中的位置，并使用 . 检查每个位置是否为页脚[`getItemViewType()`](http://developer.android.com/reference/android/widget/Adapter.html#getItemViewType%28int%29)。如果你得到`ITEM_VIEW_TYPE_HEADER_OR_FOOTER`，你可以删除它。（如果您同时拥有页眉和页脚，则需要更复杂的解决方案，例如在添加页脚时自行跟踪所有页脚。）

# emacs - Emacs 组织模式中的转义字符

> ID：12737564
> 
> 赞同：10
> 
> 时间：2012-10-04T23:43:48.437
> 
> 标签：emacs, org-mode

假设我想在 org-mode 中转义字符，例如`_`，以便 org-mode 呈现以下内容：

```
* _TARGET_ 
```

在我的设置（我认为这是默认设置）中，org-mode 强调了这个词而不是渲染`_TARGET_`

更一般地说，我在哪里可以找到有关如何在 Emacs org-mode 中转义字符的信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-03T13:28:10.813

使用当前的 Emacs 和 org-mode，您可以尝试

```
* \under{}TARGET\under{} 
```

如果它没有像`* _TARGET_`try那样自动显示`C-c C-x \`，那应该在编码字符和编码字符之间切换这些编码的显示。

[（原则上与我在这里](https://stackoverflow.com/questions/16443386/how-to-escape-double-quote/31207746#31207746)解释的相同。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T11:19:01.860

[代码和逐字](http://orgmode.org/org.html#Emphasis-and-Monospace)标记将按原样呈现文本，无需解释。因此，`=_TARGET_=`可能会按您的意愿工作（您还将为该单词获得不同的等宽字体）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T20:58:30.377

或者，使用普通的 shell 反斜杠来转义你想要避免 Org 模式解释为标记的字符：

```
* \_TARGET\_ 
```

反斜杠字符在您的 Emacs 缓冲区中是可见的，但在导出时是隐藏的 - 例如到 HTML 或 PDF-via-LaTeX。

这种转义适用于许多其他情况，例如在导出期间`SR\_1234`呈现`SR_1234`而不是作为下标。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-08T02:15:16.483

如果你想破坏 org 来解释你正在使用的一些语法，你将不得不这样做。

1.  使用转义字符。`_`is`\under`和`*`is `\ast`，所以你可以这样写`\ast \under{}TARGET\under`；
2.  另一种方法是使用[`zero width space`](https://orgmode.org/manual/Escape-Character.html)，它的代码是`200B`，所以你可以使用`C-x 8 RET 200b RET`插入一个零宽度的空格来中断解释。

他们在响应时间的最新组织上工作（最新的 9.2）。

# nuget - 启用包还原时如何指定nuget包的位置？

> ID：12737566
> 
> 赞同：5
> 
> 时间：2012-10-04T23:44:05.490
> 
> 标签：nuget, nuget-package, nuget-server

我正在研究 .net 解决方案并使用 nuget 进行包管理。我选择了“启用 Nuget 包还原”选项，这样 nuget 包就不会签入源代码管理。

在此之前，我有一个 nuget.config 文件，与我包含的解决方案处于同一级别，使我能够指定 nuget 包的位置。

```
<settings> 
  <repositoryPath>..\Build\NuGetPackages\</repositoryPath> 
</settings> 
```

由于我启用了 nuget 包恢复，这不再有效。我试图更新 .nuget 生成的文件夹中的配置文件，但这也不起作用。

那么我哪里出错了，我该如何指定包文件夹的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T02:59:36.457

启用 nuget 包还原时，.nuget 文件夹中有一个 NuGet.Config 文件。

这是显示我的 libs 文件夹路径的副本。您可以修改您的以匹配您的路径。我认为它比已经选择的答案更干净。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <solution>
    <add key="disableSourceControlIntegration" value="true" />
  </solution>
  <config>
    <add key="repositoryPath" value="../../libs/packages" />
  </config>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T05:56:19.780

您可以更改`your-solution\.nuget\NuGet.targets`文件中的下一个属性：

```
<PackagesDir>$([System.IO.Path]::Combine($(SolutionDir), "packages"))</PackagesDir> 
```

或相同的属性，但如果您使用的是 Mono，则在下面的组中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T06:59:42.833

您还应该在此处查看 nuget 2.1 发行说明[http://docs.nuget.org/docs/release-notes/nuget-2.1](http://docs.nuget.org/docs/release-notes/nuget-2.1)，其中向 nuget.config 添加了一个新设置以指定包文件夹位置

```
<configuration>
  <config>
    <add key=" repositoryPath" value=" C:\myteam\teampackages" />
  </config>
  ... 
</configuration> 
```

# lucene - Lucene：检测缺失的空格

> ID：12737568
> 
> 赞同：2
> 
> 时间：2012-10-04T23:44:09.933
> 
> 标签：lucene, search-engine, lucene.net

我正在使用 Lucene.net 为大约 200 万种产品的数据库编写一个搜索引擎。我正在使用`Snowball Analyzer`，到目前为止，我对性能和结果集印象深刻。

我似乎无法克服的一个问题是检测搜索输入中的缺失空格。

例如：

***用户正在寻找“Black Diamond”品牌产品，但他们搜索“blackdiamond”。***

由于雪球分析器`Tokens`为 Black Diamond 创建了两个单独的结果，因此我得到**0**个结果。

我可以采取什么方法来纠正这个问题？我对`Shingle Analyzer`(n-gram) 进行了一些研究，但不确定这是否有帮助。

是否可以将 a`Shingle Analyzer`与`SpellChecker`( 这将是一个有效的解决方案) 结合起来？如果我能用***你的意思是什么来提示人们：“黑钻石”，那将是一个主意。***发生这种情况时的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:06:43.790

最初运行用户查询怎么样，如果没有结果（或分数低于某个阈值），运行 N 个额外的搜索（其中 N 是把单词分成两个的可能性的数量）显示用户结果获得最高分的可能性。

# mysql - 复杂查询需要 SQL 大师

> ID：12737572
> 
> 赞同：6
> 
> 时间：2012-10-04T23:44:38.063
> 
> 标签：mysql, sql, join

我有几张表，我正试图从中获取一些数据，我非常接近，但不能完全完成交易。

我有以下表格：

*   事件
*   用户
*   朋友
*   用户__朋友
*   事件__邀请

USER 和 FRIEND 通过 USER__FRIEND 表链接（其中包含 USER_ID 和 FRIEND_ID 字段）

EVENT__INVITATION 将 EVENT 与 FRIEND 链接（它具有 EVENT_ID 和 INVITEE_ID）

我正在尝试获取所有事件：

*   我是 EVENT 创建者 ($myUserID = EVENT.CREATOR_ID)
*   或者我被邀请参加活动 ($myUserID = EVENT__INVITATION.INVITEE_ID)
*   或者我的一位朋友是事件的创建者（$myUserID = USER__FRIEND.USER_ID AND EVENT.CREATOR_ID IN（我的朋友列表））
*   或者我的一位朋友被邀请参加活动（$myUserID = USER__FRIEND.USER_ID AND EVENT__INVITATION.INVITEE_ID IN（我的朋友列表））

其他参数周围还有一些其他 WHERE 条件，但我想我可以自己解决这些问题。

现在，我能做到这一点的唯一方法是使用 UNION，我认为这一定是一种逃避，如果我有更好的排骨，我可以使用它。

所以，问题是，这可以通过一个不使用 UNION 的廉价查询来完成吗？

这是我到目前为止所拥有的，它完成了除了邀请我的朋友参加的活动之外的所有事情（在这种情况下，23 是传入的用户 ID）：

```
SELECT e.*
FROM event e
LEFT JOIN event__invitation ei ON ei.event_id = e.id
LEFT JOIN user__friend uf ON uf.friend_id = ei.invitee_id
LEFT JOIN friend f ON f.id = uf.friend_id
WHERE (ei.invitee_id = 23 OR e.creator_id = 23 OR uf.user_id = 23 OR f.user_id = e.creator_id)
AND e.start_time >= 1348000000 
```

这是使用 UNION 的查询：

```
SELECT e.* FROM event e
INNER JOIN event__invitation ei ON ei.event_id = e.id
INNER JOIN user__friend uf ON uf.friend_id = ei.invitee_id
WHERE (e.creator_id = 23 OR ei.invitee_id = 23 OR uf.user_id = 23)
UNION
SELECT e1.* FROM event e1
WHERE e1.creator_id IN (
    SELECT f1.user_id FROM friend f1
    INNER JOIN user__friend uf1 ON uf1.friend_id = f1.id
    WHERE uf1.user_id = 23
    AND f1.user_id IS NOT NULL
); 
```

查询的更多内容使 UNION 的使用变得不可取。我在主选择中进行了复杂的三角计算，并按该值对结果进行排序。我认为可能会弄乱结果集。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:32:57.413

以下情况如何：

```
-- take only distinct events
SELECT DISTINCT e.*
-- start with the event
FROM event e
-- expand to include all invitees and their user_friend info
LEFT JOIN event__invitation ei 
    ON ei.event_id = e.id
LEFT JOIN user__friend invitee
    ON invitee.friend_id = ei.invitee_id
-- now we join again to user_friend to get the friends of the invitees/the creator
LEFT JOIN user__friend invitedFriend
    ON invitedFriend.user_id = invitee.user_id
        OR invitedFriend.user_id = e.creator_id
-- finally we match on whether any of these friends of friends are myself
LEFT JOIN friend myselfAsAFriend
    ON myselfAsAFriend.id = invitedFriend.friendId
        AND myselfAsAFriend.userID = 23
WHERE 
(   
    -- (1) I am the creator of the event
    e.creator_id = 23 
    -- (2) I am invited to the event
    OR invitee.user_id = 23 
    -- (3 and 4) for this join to match a friend of mine must be invited or the creator
    OR myselfAsAFriend.id IS NOT NULL 
)
AND e.start_time >= 1348000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T06:26:14.387

我目前不太擅长查询调优，所以我会尝试这样的事情，让优化器努力找出获得结果的最佳方法：

```
SELECT DISTINCT e.*
FROM event e
INNER JOIN event__invitation ei ON ei.event_id = e.id
INNER JOIN (
  SELECT friend_id
  FROM user__friend
  WHERE user_id = $myUserID
  UNION ALL
  SELECT $myUserID
) u ON u.friend_id IN (e.creator_id, ei.invitee_id)
; 
```

如果这还不够有效，您可以随时使用[@ChaseMedallion 的建议之](https://stackoverflow.com/a/12737938/297408)类的方法，因为它确实可能对您的情况更好。

# java - 如何使用 Ivy 获取 JAR 以外的工件？

> ID：12737573
> 
> 赞同：4
> 
> 时间：2012-10-04T23:44:52.483
> 
> 标签：java, ant, ivy, dependency-management

我想将一个 Java 库用作构建的一部分，但它包含一个外部`resources/`目录，该目录必须对运行时类路径可见才能工作。我希望能够将它作为工件存储在我的 Ivy 存储库中，但不确定 Ivy 是否可以处理这个问题，如果可以，如何安装`ivy.xml`文件`ivy-settings.xml`以及 repo 本身。

我的仓库实际上是一个 Artifactory 服务器，我将工件及其 ivy 文件存储在一起：

```
http://myrepo.com:8080/artifactory/simple/myrepo/
    google/
        guice/
            3.0/
                guice-3.0.jar
                ivy.xml 
```

等等。我想我在这里寻找类似的设置：

```
http://myrepo.com:8080/artifactory/simple/myrepo/
    fizz/
        buzz/
            1.7/
                buzz-1.7.jar
                resources/
                ivy.xml 
```

`resources/`...并以某种方式将 jar 及其目录作为 Ivy 解析/检索模式的一部分拉下，然后将`resources/`其放在我需要的位置。

这可能吗？有任何想法吗？提前致谢！

**编辑**- 如果是一个目录这一事实`resources/`导致问题，我不介意将其压缩为`resources.zip`，然后在构建时将其解析/检索到我的项目中，然后解压缩它。如果 Ivy 不能开箱即用地处理目录工件，那就需要做更多的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:22:47.217

您应该 zip/tar 目录并创建以下设置：

```
http://myrepo.com:8080/artifactory/simple/myrepo/
    fizz/
        buzz/
            1.7/
                buzz-1.7.jar
                resources-1.7.zip
                ivy-1.7.xml 
```

然后，在您的 ivy.xml 中，您可以将每个文件声明为该模块的发布，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<ivy-module version="2.0">
    <info organisation="fizz"
        module="buzz"
        revision="1.7"
        status="release"
        publication="20110531150115"
        default="true"
    />
    <configurations>
        <conf name="default" visibility="public"/>
    </configurations>
    <publications>
      <artifact name="buzz"      type="jar" />
      <artifact name="resources" type="zip" />
    </publications>
</ivy-module> 
```

如果需要，您可以定义单独的配置，例如：

```
 <configurations>
            <conf name="default" extends="jar, resources" visibility="public"/>
            <conf name="jar" visibility="public"/>
            <conf name="resources" visibility="public"/>
    </configurations>
    <publications>
      <artifact name="buzz"      type="jar" conf="jar"/>
      <artifact name="resources" type="zip" conf="resources"/>
    </publications> 
```

# php - html中的php脚本

> ID：12737576
> 
> 赞同：4
> 
> 时间：2012-10-04T23:45:13.763
> 
> 标签：php, html, mysql

我正在尝试在 html 中显示 mysql 数据

表格格式是

表名:: 应用

```
 appid |    app    | version |     date     |      apk file   |
   1        sample     1.0.0      2012-10-12         sample.apk 
```

//mysql查询是

```
 <?php
    $query="SELECT * FROM `App` where appid=1";
    $res=mysql_query($query);
    $row=mysql_fetch_row($res);
    $app=$row[1];
    $vesion=$row[2];
    $date1=date('M j,Y',strtotime($row[3]));
 ?> 
```

//html代码如下

```
 <html>
     <body>
      <div style="text-align:left"><p>App:<b><? $app.' '.$vesion ?></b></p></div>
      <div style="text-align:left"><p>Date Uploaded: <b><? $date1 ?></b></p></div>
      <ol class="instructions">
         <li>Click <a href="http://localhost/downloads/$row[4]">Here</a> todownload.
 <br></li>

     </ol>
     </body>
     </html>
<?php 

?> 
```

但不要在 html 文件中获取 mysql 数据

任何人都可以帮助我找到正确的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T23:47:27.703

您可以像这样打印变量的值：

```
<div style="text-align:left"><p>App:<b><? echo $app . ' ' . $vesion ?></b></p></div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T23:48:03.087

好的，这里可能会发生两件事。

1.  您需要使用开始和结束 PHP 标记来包装任何 PHP 代码 - `<?php ?>`. 这包括像您对`row[4]`. 您还需要回显变量 -

    `<a href="http://localhost/downloads/<?php echo $row[4]; ?>">Here</a>`

2.  确保您的 HTML 文件具有`.php`文件扩展名。否则，服务器将根本不会将文件解析为 PHP，并且您的代码将不会作为 PHP 执行，而是作为纯文本执行。您可以设置您的服务器以解析 HTML 文件中的 PHP - 有时这样做是为了不让用户知道服务器上正在使用哪些技术的安全措施（但我不确定这是否是您想要的） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T00:21:04.767

是的。你错过了`echo` ，试试这个：

```
<?php
$query="SELECT * FROM `App` where appid=1";
$res=mysql_query($query);
$row=mysql_fetch_array($res);
$app=$row['app'];
$vesion=$row['version'];
?>
<a href="http://localhost/downloads/<?=$row['apk file']?>">Here</a> 
```

使用 var_dump 测试您从 DB 获得的信息。

# iphone - 如何在 iPhone/iPad 上自动播放 vimeo 视频？

> ID：12737578
> 
> 赞同：3
> 
> 时间：2012-10-04T23:45:47.360
> 
> 标签：iphone, ios, ipad, embed

我正在尝试使用 UIWebView 将 vimeo 视频嵌入到我的应用程序中。

目前我的代码看起来像这样，如果你按下播放，它会很好地播放视频，但我希望它在 UIWebView 加载时播放，我不知道如何做到这一点。

```
NSURL *videoURL = [NSURL URLWithString:@"http://player.vimeo.com/video/123456?autoplay=1"];

NSURLRequest *requestObj = [NSURLRequest requestWithURL:videoURL];
UIWebView * SignUpVideo = [[UIWebView alloc] init];

MyVideo.frame = CGRectMake(0,125,781,481);

[self.view addSubview:SignUpVideo];

[MyVideo loadRequest:requestObj]; 
```

这被放置在`-(void)viewDidLoad`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:19:15.913

自动播放 URL 参数在 Mobile Safari 中也不起作用。我想你可能不走运，除非你能得到一个直接流的 URL。但在这种情况下，您可以使用 AVPlayer 而不是 Web 视图，并拥有您需要的所有灵活性。

这是关于 vimeo 直接链接 URL 的有趣讨论：[如何找到 vimeo 视频的下载链接？](https://stackoverflow.com/questions/4460394/how-can-i-find-download-links-for-vimeo-videos). 但是，据此，vimeo 不允许该技术，因此您可能想在这里查看开发人员 API：[https ://developer.vimeo.com](https://developer.vimeo.com)

最好的祝福。

# jquery - jquery脚本标签冲突

> ID：12737582
> 
> 赞同：-2
> 
> 时间：2012-10-04T23:46:10.420
> 
> 标签：jquery

> **可能重复：**
> [我可以在同一页面上使用多个版本的 jQuery 吗？](https://stackoverflow.com/questions/1566595/can-i-use-multiple-versions-of-jquery-on-the-same-page)

我正在使用 3 个 JQUery wordpress 插件，所以在我的 header.php 文件中，我有 3 个类似的 jquery 脚本（这对于使我的插件工作非常重要。

它们在这里：（在我的 header.php 中）

```
<script type="text/javascript" src="liquidcarousel/js/jquery-1.4.2.min.js"></script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

 <script src="http://mywebsite.com/price-filter-wid-css/jquery-1.8.2.js"></script> 
```

这三个相互冲突并且输出不正确..那么，我怎样才能让我的插件工作..？

那么，我是否需要保持如下：

```
<script>
var jq142 = jQuery.noConflict();
</script>
<script>
var jq142 = jQuery.noConflict();
</script>
<script>
var jq182 = jQuery.noConflict();
</script> 
```

**上面有什么问题？？？**

**这是我的其他代码：**

```
$(document).ready(function() {
            $('#liquid1').liquidcarousel({height:129, duration:100, hidearrows:false});
        });

$(function() {
        $( "#makeup" ).slider({
            range: true,
            min: 0,
            max: 500,
            values: [ 0, 500 ],
            slide: function( event, ui ) {
            $( "#minprice" ).val( ui.values[ 0 ] );     
            $( "#maxprice" ).val( ui.values[1 ] );  
            $( "#pricego" ).val( ui.values[0]+'-'+ui.values[1] );
        }

        });

    }); 
```

**那么，我怎样才能正确使用上述功能，以避免这些 jquery 冲突..？**

正如你所说，我已更改如下：

```
$(function() {
        mywebsite( "#makeup" ).slider({
            range: true,
            min: 0,
            max: 500,
            values: [ 0, 500 ],
            slide: function( event, ui ) {
            $( "#minprice" ).val( ui.values[ 0 ] );     
            $( "#maxprice" ).val( ui.values[1 ] );  
            $( "#pricego" ).val( ui.values[0]+'-'+ui.values[1] );
        }

        });

    });

$(document).ready(function() {
            liquidcarousel('#liquid1').liquidcarousel({height:129, duration:100, hidearrows:false});
        }); 
```

**请纠正我，如果我错了...**

**完成所有更改后，这是我的代码：（但仍然没有得到输出）**

```
<!-- Liquidcarousel Stuff  -->
<link type='text/css' rel='stylesheet' href='liquidcarousel/css/style.css' />
<link type='text/css' rel='stylesheet' href='liquidcarousel/css/liquidcarousel.css' />
<script type="text/javascript" src="liquidcarousel/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript">
     var liquidcarousel = $.noConflict(true);
     </script>
<script type="text/javascript" src="liquidcarousel/js/jquery.liquidcarousel.pack.js"></script>
<script type="text/javascript">

        $(document).ready(function() {
            liquidcarousel('#liquid1').liquidcarousel({height:129, duration:100, hidearrows:false});
        });

        $(document).ready(function() {
            liquidcarousel('#liquid2').liquidcarousel({height:129, duration:100, hidearrows:false});
        });

</script>

<!-- Categories Display Widget Stuff   -->
<link href="http://mywebsite.com/cat-wid-css/css/dcaccordion.css" rel="stylesheet" type="text/css" />
<link href="http://mywebsite.com/cat-wid-css/css/skins/blue.css" rel="stylesheet" type="text/css" />
<link href="http://mywebsite.com/cat-wid-css/css/skins/graphite.css" rel="stylesheet" type="text/css" />
<link href="http://mywebsite.com/cat-wid-css/css/skins/grey.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
       var googleapis = $.noConflict(true);
     </script>
<script type='text/javascript' src='http://mywebsite.com/cat-wid-css/js/jquery.cookie.js'></script>
<script type='text/javascript' src='http://mywebsite.com/cat-wid-css/js/jquery.hoverIntent.minified.js'></script>
<script type='text/javascript' src='http://mywebsite.com/cat-wid-css/js/jquery.dcjqaccordion.2.7.min.js'></script>
<script type="text/javascript">
$(document).ready(function($){

                    googleapis('.accordion-6').dcAccordion({
                        eventType: 'hover',
                        autoClose: true,
                        saveState: true,
                        disableLink: true,
                        menuClose: false,
                        speed: 'medium',
                        showCount: true,

                        autoExpand: true,
                        cookie  : 'dcjq-accordion-1',
                        classExpand  : 'dcjq-current-parent',

                        menuClose: false    
                    });

});
</script>

<!-- Price Filter Display Widget Stuff   -->
    <link rel="stylesheet" href="http://mywebsite.com/price-filter-wid-css/themes/base/jquery.ui.all.css">
    <script src="http://mywebsite.com/price-filter-wid-css/jquery-1.8.2.js"></script>
     <script type="text/javascript">
           var mywebsite = $.noConflict(true);
       </script>
    <script src="http://mywebsite.com/price-filter-wid-css/ui/jquery.ui.core.js"></script>
    <script src="http://mywebsite.com/price-filter-wid-css/ui/jquery.ui.widget.js"></script>
    <script src="http://mywebsite.com/price-filter-wid-css/ui/jquery.ui.mouse.js"></script>
    <script src="http://mywebsite.com/price-filter-wid-css/ui/jquery.ui.slider.js"></script>
    <link rel="stylesheet" href="http://mywebsite.com/price-filter-wid-css/demos.css">
    <style>
    #demo-frame > div.demo { padding: 10px !important; };
    </style>

    <script>

    mywebsite(function() {
        mywebsite( "#makeup" ).slider({
            range: true,
            min: 0,
            max: 500,
            values: [ 0, 500 ],
            slide: function( event, ui ) {
            mywebsite( "#minprice" ).val( ui.values[ 0 ] );     
            mywebsite( "#maxprice" ).val( ui.values[1 ] );  
            mywebsite( "#pricego" ).val( ui.values[0]+'-'+ui.values[1] );
        }

        });

    });

    </script> 
```

**我仍然没有得到输出..请告诉我还是出了什么问题..？...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:07:53.213

```
 <script type="text/javascript" src="liquidcarousel/js/jquery-1.4.2.min.js"></script>
     <script type="text/javascript">
     var someName = $.noConflict(true);
     </script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
     <script type="text/javascript">
       var googleapis = $.noConflict(true);
     </script>

   <script src="http://mywebsite.com/price-filter-wid-css/jquery-1.8.2.js"></script>
      <script type="text/javascript">
           var mywebsite = $.noConflict(true);
       </script> 
```

然后，而不是`$('#selector').function();`，你会做`someName('#selector').function();`or `googleapis('#selector').function();`or`mywebsite('#selector').function();`以避免冲突。

而不是`$`必须使用`someName`or`googleapis`或者`mywebsite`你需要的任何东西

```
$(document).ready(function() {
           // $('#liquid1').liquidcarousel({height:129, duration:100, hidearrows:false});
            googleapis('#liquid1').liquidcarousel({height:129, duration:100, hidearrows:false}); //if you need to use googleapis jquery version in that case
        });

someName(function() {
        someName( "#makeup" ).slider({ // if you need liquidcarousel to use in this case
            range: true,
            min: 0,
            max: 500,
            values: [ 0, 500 ],
            slide: function( event, ui ) {
            someName( "#minprice" ).val( ui.values[ 0 ] );     
            someName( "#maxprice" ).val( ui.values[1 ] );  
            someName( "#pricego" ).val( ui.values[0]+'-'+ui.values[1] );
        }

        });

    }); 
```

# ruby-on-rails - 在我的 rspec 测试套件中，如何使用我的应用程序使用的配置数据填充静态表？

> ID：12737583
> 
> 赞同：1
> 
> 时间：2012-10-04T23:46:10.380
> 
> 标签：ruby-on-rails, rspec, fixtures

到目前为止，我只使用 rspec 和工厂，而不是固定装置或种子数据。但是现在我需要一个（静态）优惠券表，其中包含十几个配置数据记录，以便在运行我的集成测试（rspec + capybara，而不是 cuke）时可供我的应用程序使用。

我的 rspec 测试有一个创建商店的 FactoryGirl 工厂。

在我的应用程序中，当商店由 init_store(coupon_code) 初始化时，会传入一个优惠券代码，用于打开/关闭各种功能（通过在优惠券表中查找该优惠券的设置）。

因此，当我创建 Store 工厂时，我还需要指定（通过 trait？）优惠券代码。然后，在我的模型中，初始化商店的方法将使用优惠券代码在优惠券表中查找一堆设置。（每张优惠券有大约 20 个属性可以打开/关闭各种商店功能。）

我的 coupons.yml 文件包含我的应用程序使用的实际优惠券表数据。现在我需要在运行测试时让它们对应用程序可用。（不要在意“脆”，这张桌子不会改变。）

没有使用带有 rspec 的固定装置或种子数据，我不确定如何/在哪里放置我的 coupons.yml 文件以及如何使优惠券“加载”到测试优惠券表中，以便在测试运行时它们可供我的应用程序使用.

我是否使用 coupons.yml 预填充种子数据？如果是这样，我怎样才能在每次测试运行时将其加载到我的测试数据库中？

或者，我应该使用固定装置吗？

无论哪种方式，coupons.yml 应该去哪里以及如何加载它（在商店工厂中？在其中一个规范中？在 specs_helper 中？）

当我搜索诸如“使用固定装置和工厂”或“使用带有 rspec 的种子数据”之类的东西时，我发现的只是“使用工厂”的建议，是的，我明白了。但是对于这种特殊情况，我需要两者，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T04:23:31.783

我做这样的事情，我使用种子而不是固定装置（尽管我相信你也可以使用固定装置）。

在 spec_helper.rb

```
RSpec.configure do |config|

  ...

  config.before :suite do
    DatabaseCleaner.strategy = :truncation, {:except => %w[table1 table2]}
    DatabaseCleaner.clean_with :truncation
    Rails.application.load_seed
  end

  ...

end 
```

所以 DatabaseCleaner.strategy 行告诉 database_cleaner 清理除您传递的表数组之外的所有内容。

设置策略后，您只需调用`Rails.application.load_seed`加载种子数据。

希望对您有所帮助，如果您有任何问题，请告诉我。

# google-maps - 使两个不同大小的 Google 地图与缩放级别保持同步

> ID：12737586
> 
> 赞同：0
> 
> 时间：2012-10-04T23:46:21.663
> 
> 标签：google-maps

如果另一张更大尺寸​​的地图改变其缩放级别，有没有办法计算出一张地图的理想缩放比例。想法是使两个地图在可视区域方面保持同步，因为具有相同缩放比例的较小地图将无法以相同的方式查看

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:04:02.040

通过搜索找到答案。您可以在地图上调用 fitBounds() 函数并将其传递给您希望它适合的边界。所以`map1.fitBounds(map2.getBounds());`

# safari - 选择中的 optgroup 的移动 Safari 问题

> ID：12737587
> 
> 赞同：1
> 
> 时间：2012-10-04T23:46:31.367
> 
> 标签：safari, ios6, multiple-select, optgroup

iOS 6 上的移动 Safari 应用程序似乎对`<optgroup>`元素内的`<select multiple="multiple">`元素存在问题。我[创建了一个演示 jsfiddle](http://jsfiddle.net/QpuHU/)，它在 iOS 5 Safari 中运行良好，但似乎不适用于 iOS 6。我正在使用[此页面上第二个 w3c 示例中的](http://www.w3.org/TR/WCAG20-TECHS/H85.html#H85-examples)html进行演示，所以我认为它应该是有效的，但我是想知道我在格式中是否遗漏了什么，同时最好的解决方法是：

```
<option disabled="disabled">Option Group Label</option> 
```

# .net - 为什么 CopyTo 会抛出 ArgumentOutOfRangeException？

> ID：12737591
> 
> 赞同：1
> 
> 时间：2012-10-04T23:47:18.017
> 
> 标签：.net, stream

为什么[CopyTo](http://msdn.microsoft.com/en-us/library/dd782932.aspx)会导致异常？它下面的代码运行完美，是我认为 copyto 会做的。

```
using (var mem = new MemoryStream())
{
    using (var memin = new MemoryStream(v.body))
    using (var comp = new BZip2InputStream(memin))
    {
        //comp.CopyTo(mem); //Non-negative number required (System.ArgumentOutOfRangeException)
        var buf = new Byte[1024 * 4];
        int len=0;
        while ((len = comp.Read(buf, 0, buf.Length)) > 0)
        {
            mem.Write(buf, 0, len);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:29:44.060

它是一个错误`BZip2InputStream.Read(byte[] buffer, int offset, int count)`。它返回 -1 而不是 0。我报告[了这个错误](http://dotnetzip.codeplex.com/workitem/15675)

CopyTo 也像问题中的代码那样通过 != 0 而不是 >0 进行检查。

# codeigniter - codeigniter中的自定义分页

> ID：12737593
> 
> 赞同：0
> 
> 时间：2012-10-04T23:47:24.477
> 
> 标签：codeigniter, pagination

我有 codeigniter 应用程序，它的分页代码就像一个魅力。分页允许访问者选择他希望每页看到多少记录。现在，我想添加以下内容：

从总共 Z 条记录中显示 X 到 Y。

现在，Z 很容易……我已经解决了。谁能告诉我我怎么能做到这一点？

这是我拥有的功能：

```
 public function displayAllUsers() 
   { 

        if ($this->uri->segment(3) !="") { 
        $limit = $this->uri->segment(3); 
        } else { 
        $limit = 10; 
        } 

        $offset = 4; 
        $offset = $this->uri->segment(4); 
        $this->db->limit($limit, $offset); 
        $data['users'] = $this->backOfficeUsersModel->get();
        $totalresults = $this->db->get('back_office_users')->num_rows();

        $this->session->set_userdata('totalresults', $totalresults);

        //initializing & configuring paging
        $this->load->library('pagination');
        $config['base_url'] = site_url('/backOfficeUsers/displayAllUsers/'.$limit.'/');
        $config['total_rows'] = $totalresults;
        $config['per_page'] = $limit;
        $config['uri_segment'] = 4;
        $config['full_tag_open'] = '<div class="dataTables_paginate paging_bootstrap pagination"><ul>';
        $config['full_tag_close'] = '</ul></div>';
        $config['cur_tag_open'] = '<li><a href=# style="color:#ffffff; background-color:#258BB5;">';
        $config['cur_tag_close'] = '</a></li>';
        $config['num_tag_open'] = '<li>';
        $config['num_tag_close'] = '</li>';

        $this->pagination->initialize($config); 

       //....irelevant content.....

    } // end of function displayAllUsers 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:35:34.287

它不应该那么难。实际上，如果您了解分页，很明显如何获得 X 和 Y 的值。

首先，X 和 Y 的差值当然会等于`$limit`- 1。X 的值应该等于变量`$offset`, 加 1（偏移量一般从 0 开始，而不是 1）。从那里，我相信你明白 Y 等于`$offset + $limit`。

```
$X = $offset + 1;
$Y = $offset + $limit; 
```

如果您在最后一页，您需要确保 Y 的值正确。您需要检查从数据库中获取的总行数，如果它小于每页的限制，然后把它改成这样

```
if (fetched_rows < $limit)
{
    $Y -= ($limit - fetched_rows); 
} 
```

# wcf - 流式服务连续第三次调用失败

> ID：12737596
> 
> 赞同：0
> 
> 时间：2012-10-04T23:47:35.127
> 
> 标签：wcf, streaming

我已将 WCF 服务配置为以流传输模式传输数据。我想我已经正确设置了配置，因为我能够传输 100Mb 以上的文件，这超出了我的需要。

现在我调用了我的传输服务三次，以获取三个不同的文件，每个文件不超过 2 Mb。问题是，只要我调用第三个文件，我的程序就会冻结，我不再得到任何响应，迫使我关闭程序。

我不认为这是一个文件大小问题，因为我已经测试了 20 Mb 大小的传递文件，只有前两个可以很好地到达客户端。但是我没有从第三个电话中得到任何回应。

这是一个配置问题，可能会将服务调用限制为两个？
最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:37:08.780

**解决了一半**

好吧，首先我不知道为什么客户端在两次成功请求后无法访问服务器，它挂得很厉害。

现在我知道我能够在将数据作为压缩文件发送到客户端的服务上传输 500 Mb。然后我调用 7z.exe (7zip) 来解压缩我的文件。

这不是解决此问题的方法。问题仍然存在，我认为有办法以正确的方式解决它。我会在找到答案后立即发布答案，但与此同时，我的用户将继续使用我的系统。

# vbscript - 如何使用 VBS 创建注册表项？

> ID：12737597
> 
> 赞同：1
> 
> 时间：2012-10-04T23:47:46.520
> 
> 标签：vbscript

好的，我会尝试再次问这个问题。我使用了这段代码：

```
Dim WshShell
Set WshShell = WScript.CreateObject("WScript.Shell")

WshShell.RegWrite "HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\System\test", 1, "REG_DWORD" 
```

我收到错误“注册表项中的根无效”代码：80070005（访问被拒绝）该代码适用于其他注册表根。我以管理员身份登录。当我从提升的命令提示符运行它时，它可以工作。但是我制作这个 VBS 是对朋友的恶作剧，让他不知道我在做什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-21T06:06:21.043

子 x86Win32ScriptingElevate()

在 WinXP 和 Win7 - 它工作正常：

```
 Call x86Win32ScriptingElevate()

    Dim WshShell
    Set WshShell = WScript.CreateObject("WScript.Shell")
    WshShell.RegWrite "HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\System\test", 1, "REG_DWORD"

    WScript.Quit

'*** v13.3 *** www.dieseyer.de *****************************
Sub x86Win32ScriptingElevate()
'***********************************************************
' http://dieseyer.de/scr/elevate.vbs
' Unter Windows x64 laufen VBS' nach einem Doppelklick in der x64-Umgebung
' mit %WinDi%\System32\wscript.exe oder mit %WinDi%\System32\cscript.exe.
' In der x64-Umgebung laufen VBS aber nicht (richtig). Die Prozedur
' x86Win32ScriptingElevate() erkennt dies und startet ggf. das VBS in der 
' x86-Umgebung mit 
' %WinDirr%\SysWOW64\wscript.exe bzw. mit
' %WinDirr%\SysWOW64\cscript.exe

  Dim VBSExe, Tst, TxtArg, i

' MsgBox WScript.FullName & vbCRLF & vbFalse & "..." & False & vbCRLF & wscript.arguments.named.exists("elevated"), , "173 :: "

  If wscript.arguments.named.exists("elevated") = True then Exit Sub

' Argumentte sammeln
  Dim Args      : Set Args      = Wscript.Arguments
  For  i = 0 to Args.Count - 1     ' hole alle Argumente
    TxtArg = TxtArg & " " & Args( i )
  Next
    TxtArg = Trim( TxtArg )
'   MsgBox ">" & TxtArg & "<", , "184 :: "

  VBSExe = UCase( WScript.FullName )

' x86- / Win32-Systeme haben KEIN %WinDir%\SysWOW64\ - Verzeichnis
  Tst = Replace( VBSExe, "\SYSTEM32\", "\SYSWOW64\" )
  If CreateObject("Scripting.FileSystemObject").FileExists( Tst ) Then VBSExe = Tst

' VBS mit /elevate starten - ggf. auf x64-System in Win32-Umgebung
' Msgbox """" & VBSExe & """ """ & WScript.ScriptFullName & """ " & TxtArg , , "196 :: "

  Tst = createobject("Shell.Application").ShellExecute( """" & VBSExe & """", """" & wscript.scriptfullname & """ " & TxtArg & " /elevated", "", "runas", 1 )

  WScript.Quit( Tst )

End Sub ' x86Win32ScriptingElevate() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:59:31.240

分发注册表设置的最佳方法是使用注册表编辑器将注册表中此设置处于活动状态的部分导出到 .reg 文件。在导出对话框的保存部分，您选择 Win9x/NT4 作为格式。您可以使用编辑器检查 .reg 文件。用户只需双击 .reg 文件并确认提示并可能重新启动他的电脑。即使是普通用户也应该能够做到这一点。如果您尝试更改的注册表分支受安全保护，他将必须使用管理员权限执行此操作，并且可能（取决于操作系统版本）使用 regedt32.exe 可执行文件启动 regedit，并首先调整该分支的安全性，以便它可以改变了。

使用脚本执行此操作意味着必须通过额外的安全层以确保这不是恶意脚本。

# ios - UIWebView 在哪里存储 HTML5 离线文件？

> ID：12737598
> 
> 赞同：5
> 
> 时间：2012-10-04T23:47:51.103
> 
> 标签：ios, html, uiwebview, offline-caching

如果我从 iOS 应用程序中的 UIWebView 保存了一些 HTML5 离线内容，它会保存在哪里？我的应用程序可以访问的本地任何地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T08:44:46.010

我认为在模拟器中，您可以在 /Library/Application Support/iPhone Simulator/6.0/Applications/..../Library/Caches/.../ApplicationCache.db 中找到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:32:24.707

我使用[RNCachingURLProtocol](https://github.com/hborders/RNCachingURLProtocol)来查看我的离线内容。

# java - 如何制作具有记事本风格背景的 ListView？

> ID：12737600
> 
> 赞同：0
> 
> 时间：2012-10-04T23:48:03.707
> 
> 标签：java, android, android-listview

我希望我`ListView`看起来像一个记事本，即带有水平线条背景图案。在*记事本示例*之后，我可以像这样扩展`TextView`和覆盖它`onDraw()`：

```
r = new Rect();
for (int i = 0; i < getLineCount(); i++) {
  int baseline = getLineBounds(i, r);
  canvas.drawLine(r.left, baseline + 1, r.right, baseline + 1, paint);
}
super.onDraw(canvas); 
```

但是当列表中只有几个元素时，将没有足够的行来填充页面（左侧为实际结果，右侧为所需）：

![在此处输入图像描述](../Images/0e938d7be24213b04184d473fed8528c.png) ~~~![在此处输入图像描述](../Images/9950f87b51615b3d42922335a73a4ea0.png)

所以我尝试了另一种方法：覆盖`ListView.onDraw()`. 不幸的是，没有直接的方法来计算*顶部滚动*（`getScrollY()`总是返回`0`），最重要的是，我必须禁用所有缓存和绘图优化，这肯定会降低性能，除了不能针对大型列表进行扩展。

最后，我的行小部件不是纯文本视图。它们是复杂的布局，即使主要内容是 -sure- a `TextView`。这意味着在布局内部我不能调用`getLineBounds()`（布局不是文本视图），而在文本视图中我不能因为`TextView`小于周围的布局，所以四个边会有间隙。

如何构建一个解决方案来显示我的自定义小部件并用水平线填充整个窗口？一种天真的方法是将虚拟的空元素添加到列表中，只要它适合所有可用空间，但是这是一种技巧，必须有更好的做事方式。使用背景图像不是一种选择，因为线之间的距离必须在运行时可定制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:10:27.860

下面的代码基于您问题中的简单示例，这`TextView`是一个在底部画一条线的自定义（并且列表中没有分隔符）。在这种情况下，我将进行自定义`ListView`并覆盖如下`dispatchDraw`方法：

```
class CustomListView extends ListView {

    private Paint mPaint = new Paint();
    private Paint mPaintBackground = new Paint();

    public CustomListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        mPaint.setColor(Color.RED);
        mPaintBackground.setColor(Color.CYAN);
    }       

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        // ListView's height
        final int currentHeight = getMeasuredHeight();
        // this will let you know the status for the ListView, fitting/not
        // fitting content
        final int scrolledHeight = computeVerticalScrollRange();
        if (scrolledHeight >= currentHeight || scrolledHeight == 0) {
            // there is no need to draw something(for simplicity I assumed that
            // if the adapter has no items i wouldn't draw something on the
            // screen. If you still do want the lines then pick a decent value
            // to simulate a row's height and draw them until you hit the
            // ListView's getMeasuredHeight)
            return;
        } else {
            // get the last drawn child
            final View lastChild = getChildAt(getChildCount() - 1);
            // values used to know where to start drawing lines
            final int lastChildBottom = lastChild.getBottom();
            // last child's height(use this to determine an appropriate value
            // for the row height)
            final int lastChildHeight = lastChild.getMeasuredHeight();
            // determine the number of lines required to fill the ListView
            final int nrOfLines = (currentHeight - lastChildBottom)
                    / lastChildHeight;
            // I used this to simulate a special color for the ListView's row background
            Rect r = new Rect(0, lastChildBottom, getMeasuredWidth(),
                    getMeasuredHeight());           
            canvas.drawRect(r, mPaintBackground);
            for (int i = 0; i < nrOfLines; i++) {
                canvas.drawLine(0, lastChildBottom + (i + 1) * lastChildHeight,
                        getMeasuredWidth(), lastChildBottom + (i + 1)
                                * lastChildHeight, mPaint);
            }
        }
    }

} 
```

看看您是否可以使用上面的代码并根据自己的需要进行调整。

# cocoa-touch - popOver 容器中的 UITableViewController

> ID：12737601
> 
> 赞同：0
> 
> 时间：2012-10-04T23:48:17.127
> 
> 标签：cocoa-touch, uitableview, ios6

我希望有人能帮帮忙：

我正在为 iPhone 应用程序使用弹出式容器。我正在尝试将 UITableViewController 放入容器中 - 但不断收到 NSInternalInconsistancyException 错误 - 说明我没有使用原型单元等设置 tableviewcontroller - 据我所知，我有。我放置在容器中的 TVC 位于主情节提要中，但未通过 segue 连接到任何其他视图。

我应该为此 TVC 和 TableViewCell 使用单独的 nib 文件吗？我没有这样做的经验 - 我今天早些时候解决这个问题的尝试没有奏效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:39:03.263

以编程方式设置 UITableViewController 解决了这个问题。此外，确保在出队时正确设置空表视图单元格。

# c# - 更改类的命名空间后无法使用 binaryFormatter 反序列化

> ID：12737602
> 
> 赞同：9
> 
> 时间：2012-10-04T23:48:22.517
> 
> 标签：c#, deserialization

更改类的命名空间后，我无法再反序列化对象。我已经实现了`SerializationBinder`。例子：

```
public class TypeNameConverter : SerializationBinder
{
    public override Type BindToType(string assemblyName, string typeName)
    {
        typeName = typeName.Replace("MyOldNamespace", "MyNewNamespace");
        return Type.GetType(string.Format("{0}, {1}", typeName, assemblyName));
    }
}

BinaryFormatter bf = new BinaryFormatter();
bf.Binder = new TypeNameConverter(); 
```

我得到的例外是：

> “System.Runtime.Serialization.TypeLoadExceptionHolder”无法转换为类型“MyNewNamespace.MyClass”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T17:50:45.560

您忘记替换程序集名称：

```
class TypeNameConverter : SerializationBinder
{
    public override Type BindToType(string assemblyName, string typeName)
    {
        typeName = typeName.Replace("MyOldNamespace", "MyNewNamespace");
        assemblyName = assemblyName.Replace("MyOldNamespace", "MyNewNamespace");
        return Type.GetType(string.Format("{0}, {1}", typeName, assemblyName));
    }
} 
```

# c++ - C++ 无法获取 strtok 的用户输入

> ID：12737604
> 
> 赞同：0
> 
> 时间：2012-10-04T23:48:30.160
> 
> 标签：c++, input, strtok, sentence

我一直在 C++ 中遇到此代码的问题：

```
#include <stdio.h>
#include <string.h>
#include <iostream>
#include <string>

using namespace std;

int main ()
{
   string words[25];
   int i = 0;
   char * word;
   cout << "Input a phrase, no capital letters please.";
   char phrase[100] = "this is a phrase";
   word = strtok (phrase, " ,.");

   while (word != NULL)
   {
      i++;
      words[i] = word;
      cout << words[i] << " ";
      word = strtok (NULL, " ,.-");
      int g = 0;
   }
   cout << endl << endl;

   int g = 0;
   while (g < i)
   {
      g++;
      char f = words[g].at(0);
      if ((f == 'a') || (f == 'e') || (f == 'i') || (f == 'o') || (f == 'u') || (f == 'y'))
      {
         words[g].append("way");
         cout << words[g] << " ";
      }
      else
      {
         words[g].erase (0,1);
         cout << words[g] << f << "ay" << " ";
      }

   }
   cout << endl;
   system("PAUSE");
} 
```

我实际上希望我的程序用户生成要放入 char 短语 [100] 的短语，但我无法弄清楚在不搞砸翻译的情况下启动输入的正确语法。

这是一个将短语翻译成猪拉丁语的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:58:56.560

在 C++ 中进行终端 I/O 的首选方式是流。使用`std::cin`和`std::getline`函数从输入输出中读取字符串。

```
std::string input;
std::getline(std::cin, input); 
```

之后，您可能想摆脱`strtok`并查看这个[问题](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)以了解如何在 C++ 中进行字符串标记化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T00:05:24.963

你想要的是：

```
char phrase[100];
fgets(phrase, 100, stdin); 
```

不过，正如评论和其他答案中所述，您在 C++ 中使用 C 字符串函数，这很奇怪。除非有任务或其他要求，否则您不应该这样做。

而是使用：

```
string input;
getline(cin, input); 
```

要标记化，您可以执行以下操作：

```
string token;
size_t spacePos;
...
while(input.size() != 0)
{
    spacePos = input.find(" ");
    if(spacePos != npos)
    {
        token = input.substr(0, spacePos );
        input = input.substr(spacePos  + 1);
    }
    else
    {
        token = input;
        input = "";
    }

    // do token stuff
} 
```

或者，跳过所有爵士乐：

```
string token;

while(cin >> token)
{
    // Do stuff to token
    // User exits by pressing ctrl + d, or you add something to break (like if(token == "quit") or if(token == "."))
} 
```

# php - PHP 内容表单不会提交电子邮件并在浏览器中显示 php 代码

> ID：12737605
> 
> 赞同：1
> 
> 时间：2012-10-04T23:48:34.320
> 
> 标签：php, jquery, html, forms

我使用本教程作为创建简单联系表单的指南。我是使用 php 的新手，这似乎很容易弄清楚，但代码中似乎存在一些错误。在我的网站上实现代码后，提交按钮将我带到一个页面，在浏览器中显示我的所有 php 代码，并且没有发送任何电子邮件。

```
$email_to =   'skustrimovic@gmail.com<script type="text/javascript"> 
/* <![CDATA[ */ 
(function(){try{var s,a,i,j,r,c,l=document.getElementById("__cf_email__");a=l.className;if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e {}})(); 
/* ]]> */ 
</script>'; //the address to which the email will be sent  
$name     =   $_POST['name'];  
$email    =   $_POST['email'];  
$subject  =   $_POST['subject'];  
$message  =   $_POST['message'];  

    /*the $header variable is for the additional headers in the mail function, 
 we are asigning 2 values, first one is FROM and the second one is REPLY-TO. 
 That way when we want to reply the email gmail(or yahoo or hotmail...) will know 
 who are we replying to. */  
$headers  = "From: $email\r\n";  
$headers .= "Reply-To: $email\r\n";  

if(mail($email_to, $subject, $message, $headers)){  
    echo 'sent'; // we are sending this text to the ajax request telling it that the mail is sent..  
}else{  
    echo 'failed';// ... or this one to tell it that it wasn't sent  
} 
```

我是否应该尝试创建自己的 PHP 来处理现有的 HTML/jquery？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:57:24.580

该`send_email.php`教程网站上的脚本没有`<?php`开头。. . 那可能是你的问题？

或者，您需要确保基本的 PHP 代码可以在您的服务器上运行，例如一个简单的 helloworld.php：

```
<?php
    echo "hello world"
?> 
```

如果没有，您需要对 PHP 未运行的原因进行故障排除 - 例如，网络服务器是否正在运行，是否安装了 php 等。

# facebook - Facebook 应用程序墙帖子重定向

> ID：12737606
> 
> 赞同：1
> 
> 时间：2012-10-04T23:48:50.150
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

也许这是一个棘手的问题，但无论如何：

我有一个在外部服务器上运行的 facebook 应用程序。可以说我的画布网址是

```
http://mydomain.com/myapp/ 
```

这被集成到一个页面中，我可以使用类似的 url 访问该应用程序

```
http://facebook.com/mypage/app_123456789 
```

其中 123456789 是我的应用程序 ID

用户可以在他们的墙上分享某些东西，并且该分享包含返回我的应用程序的 url。

所以可以说我有一个共享的内容，它有一个像

```
http://mydomain.com/myapp/content/1 
```

如果他点击墙上的帖子，这就是用户去的地方。

现在我的问题显然是我希望这个 url**被重定向**回我的 facebook 页面。

很容易将所有内容重定向到

```
http://facebook.com/mypage/app_123456789 
```

但这会将我带到我的应用程序的主页，而不是用户共享的特定内容。

有没有办法做到这一点？就像，我可以将参数传递给 facebook 来告诉我要加载哪个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:04:59.847

是的你可以！当被重定向到应用程序的画布页面时，Facebook 不会传递您提供的任何旧参数，但如果您以某种方式操作参数，您将获得对它们的访问权限。

您必须按以下格式传递所有参数 -

```
https://apps.facebook.com/yourapp?app_data=key1$value1,key2$value2,... 
```

到达画布 URL 后，您可以`app_data`从[`signed_request`](https://developers.facebook.com/docs/authentication/signed_request/). 一旦你有了参数的内容，你应该有这样的东西 -

```
key1$value1,key2$value2 
```

现在只需将该字符串解析为键和值数组即可。在这个特定示例中，我选择了一个 dolar 字符来分隔键和值，但正如您从下面的代码中看到的那样，您可以使用任何您想要分隔参数和键/值对的东西 -

```
// initialize parameter array
$getParams = array();
$signedRequest = $facebook->getSignedRequest();
// separate each parameter
$app_data = explode(",",$signedRequest['app_data']);
foreach ($app_data as $param_key => $param_value) {
  // separate each key/value pair
  list($key,$value) = explode("$",$param_value);
  $getParams[$key] = $value;
} 
```

在这个阶段，您的`$getParams`阵列应该看起来像这样

```
Array(
  'key1'=>'value1',
  'key2'=>'value2'
) 
```

现在您可以将参数传递给您的应用程序，您将能够根据从引用 URL 传递给它的数据来决定要显示哪些内容。

# iphone - 启动画面在 iPhone 设备中不可见

> ID：12737607
> 
> 赞同：0
> 
> 时间：2012-10-04T23:49:09.933
> 
> 标签：iphone, objective-c, ios, xcode

我想在我的应用程序中添加启动画面。我在下面写代码。它在 ios 模拟器中可见，但在设备中不可见。任何建议

```
UIImageview *splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0, 320, 460)];
splashView.image = [UIImage imageNamed:@"default1.png"];

[self.window addSubview:splashView];
[self.window bringSubviewToFront:splashView];
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:5.0];
[UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.window cache:YES];
[UIView setAnimationDelegate:self]; 
[UIView setAnimationDidStopSelector:@selector(finishAnimation)];
splashView.alpha = 0.0;

[UIView commitAnimations]; 
```

...

```
-(void)finishAnimation
{
    [splashView removeFromSuperview];
    self.window.rootViewController =self.navcontroller;
} 
```

直接可见登录页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:07:26.103

该问题很可能是由您的图像文件名和您在代码中引用它的名称之间的大小写差异引起的 ( `default1.png`)。请检查项目导航器和您的代码中的大小写是否匹配。

模拟器通常不区分大小写（因为您的 OSX 安装默认不区分大小写），而设备具有区分大小写的文件系统。

因此，如果图像文件被命名（例如）`Default1.png`，并且您使用代码中的字符串调用它`default1.png`，它将在模拟器上工作，但在设备上不工作。

# java - 将 Location API 与 LBS JSR-179 和 JSR-179 Extended 一起使用时，城市名称出现空指针异常

> ID：12737609
> 
> 赞同：2
> 
> 时间：2012-10-04T23:49:11.613
> 
> 标签：java, blackberry, blackberry-simulator, blackberry-jde

我对 BlackBerry OS 开发有点陌生，我的代码`LocationProvider`在传递`Criteria`参数后尝试获取城市名称。我根据 RIM 本身的这个[链接](http://supportforums.blackberry.com/t5/Java-Development/Location-APIs-Start-to-finish/ta-p/571949)跟踪我尝试了“JSR-179”和“JSR-179 扩展”我的代码如下：

“使用 JSR 179”

```
public String CurrentLocation() 
    {
        try 
        {
            //LBS(Location Based Service) JSR-179
            Criteria criteria = new Criteria();
            criteria.isAddressInfoRequired();
            criteria.setCostAllowed(false);
            criteria.setAddressInfoRequired(true);
            criteria.setHorizontalAccuracy(200);
            criteria.setVerticalAccuracy(200);

            locationProvider = LocationProvider.getInstance(criteria);

            location = locationProvider.getLocation(10);
            cityName = location.getAddressInfo().getField(AddressInfo.CITY);
        } 
        catch (LocationException le) 
        {
            new Tracer("CurrentLocation() caught LocationException : " + le.getMessage());
            le.printStackTrace();
        }
        catch (InterruptedException ire) 
        {
            new Tracer("CurrentLocation() caught InterruptedException: " + ire.getMessage());
            ire.printStackTrace();
        }
        return cityName;
    } 
```

带有 JSR-179 扩展

```
public String CurrentLocaiton(){
        try
        {
            BlackBerryCriteria BBCriteria = new BlackBerryCriteria();
            BBCriteria.setAddressInfoRequired(ProvideAddressInfoTExt);
            BBCriteria.setAltitudeRequired(true);
            BBCriteria.setSatelliteInfoRequired(true, true);
            BBCriteria.setCostAllowed(true);
            BBCriteria.setPreferredPowerConsumption(BlackBerryCriteria.POWER_USAGE_HIGH); //testing for high power

            BlackBerryLocationProvider bbLocationProvider 
                                                = (BlackBerryLocationProvider) 
                                                    BlackBerryLocationProvider.getInstance(BBCriteria);
            location = bbLocationProvider.getLocation(9000);
            QualifiedCoordinates qualCoor = location.getQualifiedCoordinates();
            cityName = location.getAddressInfo().getField(AddressInfo.CITY);
        }
        catch(LocationException le)
        {
            le.printStackTrace();
            System.out.println(le.getMessage());
        }
        catch(InterruptedException ie)
        {
            ie.printStackTrace();
            System.out.println(ie.getMessage());
        }
        catch(NullPointerException npe)
        {
            npe.printStackTrace();
            cityName = "Caught Null Pointer";
            Dialog.alert(npe.getMessage());
        }
        return cityName;
    } 
```

我是否遗漏了一些东西或者有什么问题我已经在这个问题上苦苦挣扎了好几个小时了。我也尝试`Null Pointer Exception`从这个代码片段中捕获，如果从“静态 void main”中捕获，那么`Uncaught Exception: pushModalScreen called by a non-event thread`

```
 ....
        try{
            String location = cellLocation.CurrentLocation();
            LabelField towerlocationText = new LabelField(towerString + location,
                                LabelField.FOCUSABLE|LabelField.DEFAULT_POSITION);
            add(towerlocationText);
        }
        catch(NullPointerException npe)
        {
            npe.printStackTrace();
            System.out.println(npe.getMessage());
            Dialog.alert(npe.getMessage() + "" + "AddresInfo/LocationProvider/Locaiton gave null pointer exception" );
        }
        ... 
```

*在 BB-9700 BB-9790 设备*以及*模拟器 BB-9900上试用*

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:38:58.470

```
use 
Either :- 
/***/
      UiApplication.getUiApplication().invokeLater(new Runnable() 
        {
            public void run() 
            {
                Dialog.alert("Hello");
            }
        });
/***/
or      
        synchronized (UiApplication.getEventLock()) 
        {
                    Dialog.alert("Hello");
        } 
```

无论您试图在非事件线程上显示对话框，您都应该需要一个事件锁。您可以使用上述方法使 Event Lock 阅读[文章](http://supportforums.blackberry.com/t5/Java-Development/Alert-a-BlackBerry-smartphone-user-from-a-Background-application/ta-p/442901)以获取更多信息。

# android - 蓝牙、套接字和安卓

> ID：12737613
> 
> 赞同：0
> 
> 时间：2012-10-04T23:49:54.203
> 
> 标签：android, bluetooth

我想知道是否有一种方法可以使用连接管理器和网络接口而不是专用的蓝牙 api 来处理蓝牙连接？我的代码需要处理蓝牙、WIFI 和 GPRS 连接，并希望所有连接都可以以相同的方式处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:59:54.080

是的，这可以作为`ConnectivityManager`支持[`TYPE_BLUETOOTH`](http://developer.android.com/reference/android/net/ConnectivityManager.html#TYPE_BLUETOOTH)。上面的所有层都应该能够独立于连接类型来处理这个问题。

# html - HTML5 或 JQuery 全屏十字光标

> ID：12737615
> 
> 赞同：7
> 
> 时间：2012-10-04T23:49:58.123
> 
> 标签：html, jquery, fullscreen, mouse-cursor, panning

我们都在电脑上看过那些带有全屏十字光标的军事电影，甚至在你看到的一些动画中。

例如，在 YouTube 上标题为“Dishonorable Disclosures”的这段视频的开头，你会明白我在说什么。- [https://www.youtube.com/watch?v=X-Xfti7qtT0](https://www.youtube.com/watch?v=X-Xfti7qtT0)

另一个例子是适用于 Windows 的程序“CrossHair 1.1” - [http://www.softpedia.com/get/Desktop-Enhancements/Other-Desktop-Enhancements/CrossHair.shtml](http://www.softpedia.com/get/Desktop-Enhancements/Other-Desktop-Enhancements/CrossHair.shtml)

我确实相信在 HTML5 中可以做到这一点，但完全不知道它是否在 JQuery 中，更不用说如何用任何一种语言来做到这一点了。但是我很想知道，所以我可以自己做。如果有人有任何链接、资源或任何东西可以帮助解决这个问题，我相信其他人也想学习如何。任何帮助将不胜感激。

谢谢并保重。

非常感谢“Gaby aka G. Petrioli”解决了这个问题。我将完整的代码放在下面（带有一点样式）以节省一些时间。

```
<!DOCTYPE html>
<html>
<head>
<title>Fullscreen Crosshair Cursor</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<style type="text/css">
html, body {
    cursor:none;
    padding:0;
    margin:0;
    width:100%;
    height:100%;
    background-color:#003131;}

a {
    cursor:none;
    color:rgba(255,255,255,0.5);
    text-shadow:0px 0px 8px silver;
    transition:all 300ms ease-in-out;
    -webkit-transition:all 300ms ease-in-out;
    -moz-transition:all 300ms ease-in-out;
    -o-transition:all 300ms ease-in-out;
    -ms-transition:all 300ms ease-in-out;
    border-radius:10px;}

a:hover {
    color:rgba(255,255,255,0.8);
    text-shadow:0px 0px 8px rgba(255,255,255,0.8);}

#crosshair-h {
    width:100%;
    height:2px;
    margin-top:-1px;}

#crosshair-v {
    height:100%;
    width:2px;
    margin-left:-2px;}

.hair {
    position:fixed;
    background-color:rgba(0,250,253,0.5);
    box-shadow:0 0 5px rgb(0,250,253);
    pointer-events:none;
    z-index:1;}
</style>
<script type="text/javascript"> 
$(document).ready(function(){
    var cH = $('#crosshair-h'),
        cV = $('#crosshair-v');

    $(document).on('mousemove',function(e) {
        cH.css('top',e.pageY);
        cV.css('left',e.pageX);
    });

    $("a").hover(function() {
        $(".hair").stop().css({backgroundColor: "white"}, 800);
        $(".hair").stop().css({boxShadow: "0 0 5px rgb(255,255,255)"},800)},
    function() {
        $(".hair").stop().css({backgroundColor: "rgba(0,250,253,0.5)"}, 800);
        $(".hair").stop().css({boxShadow: "0 0 5px rgb(0,250,253)"},800)
    });
});
</script>
</head>
<body>
    <div id="crosshair-h" class="hair"></div>
    <div id="crosshair-v" class="hair"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T00:37:33.530

你可以用 CSS 和一个小的 jQuery 来做到这一点。

```
$(function(){
    var cH = $('#crosshair-h'),
        cV = $('#crosshair-v');

    $(document).on('mousemove',function(e){
        cH.css('top',e.clientY);
        cV.css('left',e.clientX);
    });
});
```

```
*{cursor:none;}
#crosshair-h{
    width:100%;
    height:2px;
    margin-top:-1px;
}
#crosshair-v{
    height:100%;
    width:2px;
    margin-left:-1px;
}
.hair{    
    position:fixed;
    background-color:rgba(100,100,100,0.5);
    box-shadow:0 0 5px rgb(100,100,100);
    pointer-events:none;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="crosshair-h" class="hair"></div>
<div id="crosshair-v" class="hair"></div>
```

**演示在** [http://jsfiddle.net/WmZ44/1/](http://jsfiddle.net/WmZ44/1/)

# haskell - 是否有用于检测设置了哪些 RTS 标志的库？

> ID：12737621
> 
> 赞同：3
> 
> 时间：2012-10-04T23:50:47.797
> 
> 标签：haskell, ghc

当我运行时，`./MyProgram +RTS -N4`我希望我的程序自动检测它在 4 个内核上运行并创建 4 个火花来处理数据集。现在，每次我想更改此选项时，我都会重新编译，这很烦人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:22:24.817

回答您最初的问题：运行时选项是 GHC 特定的，并且 GHC 提供了一个模块，可让您查看传递给程序的完整参数列表（包括`+RTS`和） ：.`-RTS`[`GHC.Environment`](http://lambda.haskell.org/platform/doc/current/ghc-doc/libraries/base-4.5.1.0/GHC-Environment.html)

这是一个小演示：

```
import GHC.Environment (getFullArgs)
import System.Environment (getArgs)

main = do
    getFullArgs >>= mapM putStrLn
    putStrLn "=="
    getArgs >>= mapM putStrLn
    return () 
```

编译程序`ghc App.hs --make -rtsopts -threaded`会在执行时产生以下结果：

```
./App hello +RTS -N4 -RTS ook ooks
hello
+RTS
-N4
-RTS
ook
ooks
==
hello
ook
ooks 
```

# ios - 在初始化时向 UIView 添加子视图

> ID：12737623
> 
> 赞同：0
> 
> 时间：2012-10-04T23:50:50.567
> 
> 标签：ios, ios5, uiview

在子类的初始化方法中，`UIView`我添加了几个`UIImageViews`. 渲染视图时，它们存在于`subviews`数组中并具有有效的框架矩形，但不会在屏幕上绘制。有谁知道为什么会这样？

```
- (id) initWithFrame:(CGRect)frame {

    self = [super initWithFrame:frame];
    if (!self)
        return nil;

    [self commonInit];

    return self;

}

- (void) commonInit {

    _padding = 128.0f;

    // Add the chord views here

    _chordImages = [NSArray arrayWithObjects:[UIImage imageNamed:@"fn_maj_x_x_x_x_1_e_1_fn"], [UIImage imageNamed:@"en_maj_x_x_x_x_1_e_1_en"], [UIImage imageNamed:@"dn_maj_x_x_x_x_1_d_1_f#"], [UIImage imageNamed:@"an_min_x_x_x_x_1_a_1_en"], nil];

    CGFloat containerWidth = [self bounds].size.width;
    NSLog(@"containerWidth: %f",containerWidth);
    CGFloat chordWidth = [[_chordImages objectAtIndex:0] size].width;
    NSLog(@"chordWidth: %f",chordWidth);
    CGFloat chordMarkerWidth = [[[GVChordMarkerView alloc] initWithFrame:CGRectMake(0, 0, 12, 12)] frame].size.width;
    NSLog(@"chordMarkerWidth: %f",chordMarkerWidth);

//  [self setFrame:CGRectMake(chordXPosition, 0, [self bounds].size.width, [self bounds].size.height]);

    CGFloat chordXPosition = 0;
    CGFloat chordXSpacing = (containerWidth/4 - (chordMarkerWidth + chordWidth));
    chordXPosition += containerWidth/4;

    for (NSUInteger i = 0; i < [_chordImages count]; i++) {
        chordXPosition += chordXSpacing;
        CGRect chordImageViewFrame = CGRectMake(chordXPosition, 0, [[_chordImages objectAtIndex:0] size].width, [[_chordImages objectAtIndex:0] size].height);
        UIImageView *chordImageView = [[UIImageView alloc] initWithFrame:chordImageViewFrame];
        [self addSubview:chordImageView];
        chordXPosition += (chordMarkerWidth + chordWidth);
    }
    NSLog(@"Finished");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:59:07.783

难道你的 UIImageview 只是空的？你在哪里添加的图像？

# jquery-mobile - Jquery Mobile 数据自动分割器

> ID：12737628
> 
> 赞同：0
> 
> 时间：2012-10-04T23:51:53.003
> 
> 标签：jquery-mobile

有没有办法让自动分隔符按姓氏排序？

我不认为它应该与 php 代码有任何关系，但我想我会将它包含在下面以供参考：

```
 $result = mysql_query("SELECT * FROM `patients` WHERE `company_id` = " . $user_data['company_id'] . " ORDER BY `patient_lastname`");

                while($row = mysql_fetch_array($result)) {
                  echo '<li><a href="' . $row['patient_id'] . '">' . $row['patient_firstname'] . ' ' . $row['patient_lastname'] . '</a><span class="ui-li-count">DOB: ' . $row['patient_dob'] . '</span></li>';
                } 
```

感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:22:34.503

您可以通过选择列表项并随后对其进行排序来在前端进行排序。在下面的示例中，您可以选择姓氏值，而不是选择列表项的文本内容。

```
var listContentArray = listViewInstance.find('li').not('.ui-li-divider').get();
listContentArray.sort(function (a, b) {
    var first = $(a).text(),
        second = $(b).text();
    if (first < second) {
        return -1;
    }
    if (first > second) {
        return 1;
    }
    return 0;
}); 
```

然后可以销毁listViewInstance的内容，重新追加listContentArray中的元素，最后刷新listView组件。

您可以在以下位置下载一个功能齐全的示例来完成所有这些操作：

[http://appcropolis.com/page-templates/autodividers/](http://appcropolis.com/page-templates/autodividers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:11:53.377

找不到显示 Firstname 然后 Lastname 并按 Lastname 自动划分的方法，所以我只是将代码替换为：

```
' . $row['patient_lastname'] . ', ' . $row['patient_firstname'] . ' 
```

显示：“姓氏，名字”并按姓氏自动划分。它现在必须工作。

# ruby-on-rails - 设计 401 会话新不工作（多个模型，两个工作正常，一个不工作）

> ID：12737634
> 
> 赞同：0
> 
> 时间：2012-10-04T23:53:08.810
> 
> 标签：ruby-on-rails, devise, http-status-code-401

我的应用程序具有三种设计模型：用户、雇主和审计员。我可以创建所有三个并使用用户和雇主登录，但 Devise 不会为审核员创建新会话。

```
Started POST "/auditors/sign_in" for 127.0.0.1 at 2012-10-05 01:41:44 +0200
Processing by Devise::SessionsController#create as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"vg1hGiEx3Ly1YRVX1XaWyEkz85lJU/5Ap/TcVo8+xWo=", "auditor"=>{"email"=>"auditor5@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 0ms 
```

我使用设计生成器来创建模型：

```
 # Setup accessible (or protected) attributes for your model
   attr_accessible :email, :password, :password_confirmation, :remember_me 
```

..在其他型号中看起来相同。

路线似乎很好：

```
devise_for :auditors
devise_for :employers
resources :employers, :only => [:show, :edit, :index, :update, :credit]

devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" }
devise_for :users
devise_for :users, :controllers => { :registrations => "registrations" } 
```

我没有更改设计中的视图或会话控制器中的任何内容。欢迎任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:30:47.533

昨天，我尝试清除我的浏览器缓存，但仍然没有成功。在 SA 上发布问题。今天早上，我只是简单地启动了我的电脑，打开浏览器，注册和登录工作。不知道为什么。

建议：尝试重启服务器，清理cookies，打开/关闭浏览器。

# ajax - 在“背景”中上传 HTML5/Ajax 图像

> ID：12737636
> 
> 赞同：0
> 
> 时间：2012-10-04T23:53:19.060
> 
> 标签：ajax, html, file-upload

我是新的 HTML5 和 Ajax，我想知道是否有可能使用这些技术编写一个服务，允许用户在后台上传图像，这样他们就可以在上传时继续浏览同一站点上的不同页面进步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:23:52.740

XHR2 AJAX 请求可以提交像图片这样的二进制数据：

[https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Uploading_a_user-selected_file](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Uploading_a_user-selected_file)

但是，更改地址栏 (windows.location) 将在加载新页面时中断上传。您可以通过 AJAX 加载页面并使用 History API 来解决此问题：

[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

您可以选择在客户端调整图像大小，`<canvas>`以减少所需的带宽和服务器负载

[在 HTML5 画布中调整图像大小](https://stackoverflow.com/questions/2303690/resizing-an-image-in-an-html5-canvas)

此外，如果您触摸其中的图像，`<canvas>`您可能希望保留 JPEG 元数据，例如旋转和 GPS 坐标，

[https://github.com/miohtama/Krusovice/blob/master/src/tools/resizer.js](https://github.com/miohtama/Krusovice/blob/master/src/tools/resizer.js)

# objective-c - 在两个对象之间交换指针

> ID：12737637
> 
> 赞同：0
> 
> 时间：2012-10-04T23:53:23.657
> 
> 标签：objective-c, c, pointers

我有三个指针`*player1`，`*player2`和`*currentPlayer`。

指针`*currentPlayer`将始终指向`*player1`或`*player2`。要在两者之间切换，我一直在执行以下操作：

```
if (currentPlayer == player1) {
        currentPlayer = player2;
}
else {
    currentPlayer = player1;
} 
```

我的问题是，有没有更简单、更优雅的方式在这两个指针之间进行交换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T23:57:36.467

不，从概念上讲，没有更简单的方法。

从语法上讲，三元运算符要短一些：

```
currentPlayer = currentPlayer == player1 ? player2 : player1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:57:42.150

如果您使用数组，这也可以工作：

```
currentPlayer = playerArray + (currentPlayer - playerArray ^ 1); 
```

# objective-c - 简单的核心数据关系加载

> ID：12737640
> 
> 赞同：0
> 
> 时间：2012-10-04T23:53:59.097
> 
> 标签：objective-c, xcode, core-data

我有两个实体：**Item**和**Note**。 ![在此处输入图像描述](../Images/f93c5978b3dbf2807515f09daaa5a149.png)

保存时分配关系

```
Item *item = [NSEntityDescription insertNewObjectForEntityForName:@"Item"
                                               inManagedObjectContext:self.managedObjectContext];
Note *note = [NSEntityDescription insertNewObjectForEntityForName:@"Note"
                                               inManagedObjectContext:self.managedObjectContext];

note.noteText = @"test";

[note setInItem:item]; //set relationship??
[self.managedObjectContext save:nil];  // write to database 
```

当我加载数据时，项目属性被加载，但我不知道如何加载这个项目的 note.noteText。

```
self.itemNameTextField.text = self.item.name;
...
...
self.itemNoteTextField.text = ???????????? 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:25:42.600

如果`item`是一个*Item*对象，那么`item.containNote`它是所有相关*Note*对象的集合。您可以使用

```
for (Note *note in item.containNote) {
    NSString *text = note.Text;
    // Now you can create a text field for this note and display the text ... 
} 
```

# android - 如果写入后不久断电，数据不会写入 sqlite db

> ID：12737641
> 
> 赞同：1
> 
> 时间：2012-10-04T23:54:01.953
> 
> 标签：android, sqlite

我的应用程序将一些数据插入其 SQLite 数据库，并且应用程序确认插入成功。但是，如果不久之后断电，则在移动设备完全重启后数据将不可见。

似乎正在进行一些缓存 - 我如何“刷新”缓冲区/缓存？

注意：sqlite db 位于主闪存上，而不是 sdcard 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:22:33.590

嗨有人在某处，

如果要保证发生 DB 写入，则应使用事务。

即：这是一个您可以构建的简单示例。

```
DatabaseHelper readDB = new DatabaseHelper(Context);
SQLiteDatabase db = readDB.getWritableDatabase();

String lastConnID = "1";
String DATABASE_TABLE = "TestDB";
String KEY_ROWID = "pkey";

db.beginTransaction();
db.update(DATABASE_TABLE, values, KEY_ROWID + "="
                    + "'" + lastConnID + "'", null);
db.setTransactionSuccessful();
db.endTransaction(); 
```

可以在[此处](http://www.vogella.com/articles/AndroidSQLite/article.html)找到示例 DatabaseHelperClass 。

当您调用 setTransactionSuccessful 时，契约已完成，项目应提交给数据库。您应该在调用它之后立即结束事务，因为即使在设置事务成功和结束事务之间发生错误，它仍然会提交到数据库。

希望这可以帮助你！干杯。

# excel - 在 Excel 和 VBA 中，如何将单元格的值设置为公式结果而不是公式

> ID：12737642
> 
> 赞同：1
> 
> 时间：2012-10-04T23:54:02.410
> 
> 标签：excel, vba, formula, evaluate

我从一张表中获取值并使用 Excel 中的宏将它们放在另一张表中。我目前有这个工作正常：

```
sheet.range("B2:B35").Value = "=IF(SUMPRODUCT(--(Raw!$B$11:$B$322=$A2),--(Raw!$D$11:$D$322=All!$B$2),Raw!$H$11:$H$322)<>0,SUMPRODUCT(--(Raw!$B$11:$B$322=$A2),--(Raw!$D$11:$D$322=All!$B$2),Raw!$H$11:$H$322),""-"")" 
```

显然，它将整个公式作为单元格的值。我想要的只是将公式的结果放入单元格中。我尝试在“IF...”部分周围添加 Evaluate()，但随后 IF 无法正确评估（我只是在每个单元格中添加“-”）。这是可能的还是我必须有单独的代码来循环并将值更改为单元格的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T23:58:01.087

利用：

```
sheet.range("B2:B35").Formula = "Your formula here" 
```

如果这不起作用，您可能必须更改格式（首先执行此操作）：

```
sheet.range("B2:B35").NumberFormat = "General" 
```

**编辑：**

一个解决方案是在 OP 代码之后添加以下行：

```
sheet.range("B2:B35").value = sheet.range("B2:B35").value 
```

# ios - iOS AwesomeMenu 委托和覆盖

> ID：12737645
> 
> 赞同：0
> 
> 时间：2012-10-04T23:54:56.187
> 
> 标签：ios, menu, delegates, overlay

我正在将此菜单添加到我正在开发的应用程序中：http: [//mobiledevelopertips.com/open-source/ios-open-source-animated-menu.html](http://mobiledevelopertips.com/open-source/ios-open-source-animated-menu.html)

我对Objective C比较陌生（只研究了不到一个月），我不完全确定如何执行以下操作：

1）当我点击按钮打开菜单时，我想在整个屏幕上添加一个灰色叠加层。我一直在寻找解决方案，但似乎很多人推荐 DSActivityView 这对我不起作用……我不需要那个加载气泡。我想我可以下载源代码并删除气泡，但这可能需要更多的努力而不是值得。

我认为我可以实例化一个 imageView，将其放在 0,0 并将其扩展到屏幕的边界，以透明的灰色 PNG 文件为来源......就像

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat screenWidth = screenRect.size.width;
CGFloat screenHeight = screenRect.size.height;

imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"transparent_gray.png"]];
imageView.frame= CGRectMake (0,0,screenWidth,screenHeight);
[viewController addSubview:imageView]; 
```

但是，这种方法可能行不通（我猜它不会覆盖标签栏和状态栏等导航控制器）。此外，我不确定如何从 AwesomeMenu 中访问 viewController。我假设我必须将实例化 AwesomeMenu 的 viewController 的引用传递给 AwesomeMenu 的功能之一，以便能够将 imageView 部署到 viewController 中？

2）我想编写一个在打开菜单动画停止时触发的委托，这样我就可以在覆盖的屏幕上写入文本。有没有一种超级简单的方法可以做到这一点，还是我将不得不猜测一些计时器启动/回调并让回调将文本写到我的屏幕上？哦 - 我以前从未写过委托，但我认为当我希望它们在动画结束时触发时它会变得有点复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:48:33.173

嗯，我认为你对 UIKit 的工作方式有一些先入为主的观念。对于 1)，我建议搜索“视图覆盖屏幕”并更好地了解该问题，尤其是与视图动画相关的问题。其次，有很多方法可以完成您的 2) 项目。如果你有 AwesomeMenu 的源代码，你可以修改它执行的任何动画。如果动画已经完成，`animateWithDuration:animations:`您可以添加一个`completion:`块。如果您需要从多个地方制作完成动画，您可以考虑委托。您也许可以为 AwesomeMenu 编写一个类别来添加功能。就您而言，我认为您只需要一个简单的代码修改。但是，如果没有更多代码/事实，很难说。

# c# - 使用 Ptr 推送和弹出结构/类 在 C# 中

> ID：12737649
> 
> 赞同：0
> 
> 时间：2012-10-04T23:55:06.077
> 
> 标签：c#, pointers, graphics, data-structures, xna

我正在尝试简化 XNA 中的矢量图形管理；目前通过纳入国家保存。**目标是避免编写 2X 行推/拉代码，以便仅保留 X 个绘制状态。**
我希望通过让客户提供他希望通过他的绘图保留的类/结构引用来做到这一点。

另请注意，许多初学者程序员将使用它，因此在客户端代码中强制使用 lambda 表达式或其他高级 C# 功能并不是一个好主意。

* * *

我试图通过使用[Daniel Earwicker 的 Ptr 类](http://smellegantcode.wordpress.com/2008/05/06/pointers-to-value-types-in-c/)来实现我的目标：

```
 public class Ptr<T>
    {
        Func<T> getter;
        Action<T> setter;

        public Ptr(Func<T> g, Action<T> s)
        {
            getter = g;
            setter = s;
        }

        public T Deref
        {
            get { return getter(); }
            set { setter(value); }
        }
    } 
```

扩展方法：

```
 //doesn't work for structs since this is just syntatic sugar
        public static Ptr<T> GetPtr <T> (this T obj) {
            return new Ptr<T>( ()=> obj, v=> obj=v );
        } 
```

和推送功能：

```
 //returns a Pop Action for later calling
        public static Action Push <T> (ref T structure) where T: struct
        {
            T pushedValue = structure; //copies the struct data
            Ptr<T> p = structure.GetPtr();

            return new Action( ()=> {p.Deref = pushedValue;} );
        } 
```

但是，这不起作用，如代码中所述。

**我怎样才能实现我的目标？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:38:56.913

我知道你想避免委托，但实际上，这可能是一个更干净的选择。例如，您可以获得如下代码：

```
DrawingState state;

// ...
StateUtil.RestoreAfter(ref state, () => {

    state.Modify(...);

});

// state is now restored to the previous value 
```

...使用以下方法：

```
public static class StateUtil
{
    public static void RestoreAfter<T>(ref T state, Action action) where T : struct
    {
        var copy = state;
        action();
        state = copy;
    }
} 
```

您可以使用`ICloneable`代替结构，并且可以添加多个`ref`参数以支持恢复多个变量的状态。

# php - 是否有一种算法可以输出两组元素的所有可能组合？

> ID：12737650
> 
> 赞同：1
> 
> 时间：2012-10-04T23:55:16.453
> 
> 标签：php, algorithm, combinations

我正在用 PHP 编写一个应用程序，用户可以在其中输入两组信息并打印出这两组信息的所有可能组合。目标是通过练习不同的问答模式，将其用作学习语言的教学工具。

例如，我们可以练习“你有没有试过……？”这个问题。加上四项活动之一，如蹦极、帆伞运动、跳伞和水肺潜水。还有四种可能的答案：

1.  是的，我有，而且我很享受。
2.  是的，我有，但我不喜欢它。
3.  不，我没有，但我想试试。
4.  不，我没有，我不想尝试。

用户将输入两组数据，然后应用程序将打印包含所有可能的问题和答案组合的卡片。例如，卡片 1 如下所示：

1.  跳伞：是的，我有，而且我很享受。
2.  水肺潜水：是的，我有，但我不喜欢。
3.  滑翔伞：不，我没有，但我想试试。
4.  蹦极：不，我没有，我不想尝试。

下一张卡片可能如下所示：

1.  跳伞：是的，我有，但我不喜欢。
2.  水肺潜水：不，我没有，但我想试试。
3.  滑翔伞：不，我没有，我不想尝试。
4.  蹦极：是的，我有，我很喜欢。

如您所见，有许多不同的可能组合。这个想法是两个列表的长度相同，以允许打印出所有的可能性。同样重要的是，任何一张卡片上的问题或答案都不能重复使用一次，并且两张卡片可以相同。解决此问题的最佳方法是什么？实际的输入和输出不是问题——我以前做过类似的事情。我只需要算法来产生组合。

编辑：我想我真正想要的是让每张卡片的活动顺序相同​​，但有所有可能的答案组合。所以我真正需要的是能够生成以下一组索引，以便从 answers 数组中获取数据。所以我真的想要更像这样的东西：

*   0,1,2,3
*   0,1,3,2
*   0,2,1,3
*   0,2,3,1
*   0,3,1,2
*   0,3,2,1
*   1,0,2,3
*   1,0,3,2
*   1,2,0,3
*   1,2,3,0

...依此类推，直到产生所有可能的组合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T00:01:06.510

尝试这个：

```
$activities = array(); // Input all your activities as elements here.
$responses = array(); // Input all your responses as elements here.

foreach ($activities as $activity) {
    foreach ($responses as $response) {
        echo $activities.' '.$response."\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T07:50:12.627

好的，有了新的标准，我想我理解得更好了。

尝试递归。我的解决方案非常混乱，但我可以引导您完成它：

```
$activities = array('a', 'b', 'c', 'd'); // Input all your activities as elements here.
$responses = array(1, 2, 3, 4); // Input all your responses as elements here.

// Recursive function outputCombos accepts both arrays (for eventual output).
// $workingArray is the array of the current branch we're working with.
function outputCombos ($activities, $responses, $workingArray) {
    // Once the working array has been loaded to the maximum amt, print everything out.
    if (count($workingArray) == count($responses)) {
        echo "Combo\n";
        for ($x = 0; $x < count($activities); $x++) {
            echo $activities[$x].'::'.$workingArray[$x]."\n";
        }
    // If the working array isn't full, add an element that isn't currently in the working array, and recursively run the function again.
    } else {
        foreach ($responses as $response) {
            // Iterate through list of all possible responses, add it into a new working array and run the function if the response hasn't been used in this working array.
            if (!in_array($response, $workingArray)) {
                $newArray = $workingArray;
                $newArray[] = $response;
                outputCombos($activities, $responses, $newArray);
            }
        }
    }
}

foreach ($responses as $response) {
    echo '<pre>';
    // Start each branch of tree with unique response (should be 4 in this case).
    outputCombos($activities, $responses, array($response));
    echo '</pre>';
} 
```

# asp.net - 输入时的 Gridview 更新按钮

> ID：12737660
> 
> 赞同：1
> 
> 时间：2012-10-04T23:56:30.657
> 
> 标签：asp.net, gridview

有没有办法做到这一点。假设用户在 datagridview 的更新行中。他们只想按回车键并触发更新按钮，而不考虑他们在行中的位置。有没有办法做到这一点？我曾尝试弄乱标签顺序，但我可以将更新标签留在标签顺序之外，并在用户按 Enter 时使其更新吗？

```
<%@ Assembly src="porch_samples.ascx.cs" %>
<%@ Control Language="c#" AutoEventWireup="false" Codebehind="porch_samples.ascx.cs"       Inherits="porch_samples.hendrix" TargetSchema="http://schemas.microsoft.com/intellisense/ie5"  %>
<%@ Register Assembly="obout_ComboBox" Namespace="Obout.ComboBox" TagPrefix="cc1" %>
   <script type="text/javascript">

    </script>

<div style="OVERFLOW: auto; LEFT: -1px; WIDTH: 1320px; POSITION: relative;  HEIGHT: 550px; BACKGROUND-COLOR: #FFFFFF; top: 0px;">

<% // drop down lists %>

<asp:DropDownList ID="listQcId" style="Z-INDEX: 159; LEFT:95px; POSITION: absolute; TOP: 5px;"
        runat="server" DataSourceID="fill_qc_id_grid" 
        DataTextField="qc_id" DataValueField="qc_id" 
        AppendDataBoundItems="True" AutoPostBack="True">
    <asp:ListItem Selected ="True" Text="" Value ="">(Select)</asp:ListItem>

        </asp:DropDownList>
    <asp:SqlDataSource ID="fill_qc_id_grid" runat="server" 
        ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="select distinct fta.qc_id from t_ap_qc_master_fta fta
inner join t_ap_qc_master qcm on qcm.qc_id = fta.qc_id
where
isnull(qcm.qc_complete,'N') = 'N'
and qcm.qc_type like 'Receiving'"></asp:SqlDataSource>

          <asp:GridView ID="grdPanel" runat="server" AutoGenerateColumns="False" style= "Z-INDEX: 159; LEFT:10px; POSITION: absolute; TOP: 40px;" 
              CellPadding="4" DataSourceID="progress" EnableModelValidation="True" 
              Font-Size="Smaller" ForeColor="#333333" GridLines="None" 
              DataKeyNames="qc_id,Smpl_ID">
              <AlternatingRowStyle BackColor="White" />
              <Columns>
                  <asp:TemplateField ShowHeader="False">
                      <EditItemTemplate>
                          <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" 
                              CommandName="Update" TabIndex="5" Text="Update"></asp:LinkButton>
                          &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                              CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                              CommandName="Edit" Text="Edit"></asp:LinkButton>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Smpl_ID" SortExpression="Smpl_ID">
                      <EditItemTemplate>
                          <asp:Label ID="grdFruit_id" runat="server" Text='<%# Eval("Smpl_ID") %>'></asp:Label>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label1" runat="server" Text='<%# Bind("Smpl_ID") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Size" SortExpression="Size">
                      <EditItemTemplate>
                          <asp:Label ID="grdSize" runat="server" Text='<%# Bind("Size", "{0}") %>'></asp:Label>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label2" runat="server" Text='<%# Bind("Size") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Grade" SortExpression="Grade">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdddlGrade" runat="server" AppendDataBoundItems="True" 
                              SelectedValue='<%# Bind("Grade") %>' TabIndex="1" AutoPostBack="True">
                              <asp:ListItem Value="">(Select)</asp:ListItem>
                              <asp:ListItem Value="AA">AA</asp:ListItem>
                              <asp:ListItem Value="A">A</asp:ListItem>
                              <asp:ListItem Value="B">B</asp:ListItem>
                              <asp:ListItem Value="C">C</asp:ListItem>
                              <asp:ListItem Value="F">F</asp:ListItem>
                              <asp:ListItem Value="UF">UF</asp:ListItem>
                              <asp:ListItem Value="USXF">USXF</asp:ListItem>
                              <asp:ListItem Value="USXFB">USXFB</asp:ListItem>
                              <asp:ListItem Value="USXFP">USXFP</asp:ListItem>
                              <asp:ListItem Value="USXFR">USXFR</asp:ListItem>
                              <asp:ListItem Value="CULL">CULL</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label3" runat="server" Text='<%# Bind("Grade") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Color_Score" SortExpression="Color_Score">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdColor" runat="server" AppendDataBoundItems="True" 
                              DataSourceID="color" DataTextField="score" DataValueField="rec_id" 
                              SelectedValue='<%# Bind("color") %>' TabIndex="2">
                              <asp:ListItem Value="0">(Select)</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label7" runat="server" Text='<%# Bind("Color_Score") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Bkgrd" SortExpression="Bkgrd">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdbkgrd" runat="server" 
                              SelectedValue='<%# Bind("Bkgrd") %>' TabIndex="3">
                              <asp:ListItem Value="">(Select)</asp:ListItem>
                       <asp:ListItem Value="Green">Green</asp:ListItem>
                       <asp:ListItem Value="Green/Yellow">Green/Yellow</asp:ListItem>
                       <asp:ListItem Value="Yellow/Cream">Yellow/Cream</asp:ListItem>
                       <asp:ListItem Value="Cream">Cream</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label8" runat="server" Text='<%# Bind("Bkgrd") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Starch" SortExpression="Starch">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdStarch" runat="server" 
                              SelectedValue='<%# Bind("Starch", "{0:N}") %>' TabIndex="4">
                              <asp:ListItem Value="">(Select)</asp:ListItem>
                              <asp:ListItem Value="0.0">0.0</asp:ListItem>
                              <asp:ListItem Value="1.0">1.0</asp:ListItem>
                              <asp:ListItem Value="1.5">1.5</asp:ListItem>
                              <asp:ListItem Value="1.8">1.8</asp:ListItem>
                              <asp:ListItem Value="2.0">2.0</asp:ListItem>
                              <asp:ListItem Value="2.2">2.2</asp:ListItem>
                              <asp:ListItem Value="2.5">2.5</asp:ListItem>
                              <asp:ListItem Value="3.0">3.0</asp:ListItem>
                              <asp:ListItem Value="3.5">3.5</asp:ListItem>
                              <asp:ListItem Value="4.0">4.0</asp:ListItem>
                              <asp:ListItem Value="4.5">4.5</asp:ListItem>
                              <asp:ListItem Value="5.0">5.0</asp:ListItem>
                              <asp:ListItem Value="5.0">5.5</asp:ListItem>
                              <asp:ListItem Value="6.0">6.0</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label4" runat="server" Text='<%# Bind("Starch") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:BoundField DataField="def_id_1" HeaderText="def_id_1" 
                      SortExpression="def_id_1" Visible="False" />
                  <asp:TemplateField HeaderText="Def_1" SortExpression="Def_1">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdddldef1" runat="server" 
                              SelectedValue='<%# Bind("def_id_1") %>' AppendDataBoundItems="True" 
                              AutoPostBack="True" DataSourceID="defects" DataTextField="description" 
                              DataValueField="defect_id">
                              <asp:ListItem Value="0">(Select)</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label5" runat="server" Text='<%# Bind("Def_1") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:BoundField DataField="def_id_2" HeaderText="def_id_2" 
                      SortExpression="def_id_2" Visible="False" />
                  <asp:TemplateField HeaderText="Def_2" SortExpression="Def_2">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdDefid2" runat="server" DataSourceID="defects" 
                              DataTextField="description" DataValueField="defect_id" 
                              SelectedValue='<%# Bind("def_id_2") %>' AppendDataBoundItems="True">
                              <asp:ListItem Value="0">(Select)</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label6" runat="server" Text='<%# Bind("Def_2") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:BoundField DataField="color" HeaderText="color" SortExpression="color" 
                      Visible="False" />
                  <asp:BoundField DataField="app_def_id_1" HeaderText="app_def_id_1" 
                      SortExpression="app_def_id_1" Visible="False" />
                  <asp:TemplateField HeaderText="App_1" SortExpression="App_1">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdddlapp1" runat="server" AppendDataBoundItems="True" 
                              DataSourceID="app_defect" DataTextField="description" 
                              DataValueField="defect_id" SelectedValue='<%# Bind("app_def_id_1") %>'>
                              <asp:ListItem Value="0">(Select)</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label9" runat="server" Text='<%# Bind("App_1") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Rate_1" SortExpression="Rate_1">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdRate1" runat="server" 
                              SelectedValue='<%# Bind("Rate_1") %>'>
                              <asp:ListItem Value="">(Select)</asp:ListItem>
                              <asp:ListItem>Initial</asp:ListItem>
                              <asp:ListItem>Moderate</asp:ListItem>
                              <asp:ListItem>Severe</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label10" runat="server" Text='<%# Bind("Rate_1") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:BoundField DataField="app_def_id_2" HeaderText="app_def_id_2" 
                      SortExpression="app_def_id_2" Visible="False" />
                  <asp:TemplateField HeaderText="App_2" SortExpression="App_2">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdddlapp2" runat="server" AppendDataBoundItems="True" 
                              DataSourceID="app_defect" DataTextField="description" 
                              DataValueField="defect_id" SelectedValue='<%# Bind("app_def_id_2") %>'>
                              <asp:ListItem Value="0">(Select)</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label11" runat="server" Text='<%# Bind("App_2") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="Rate_2" SortExpression="Rate_2">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdapprate2" runat="server" AppendDataBoundItems="True" 
                              SelectedValue='<%# Bind("Rate_2") %>'>
                              <asp:ListItem Value="">(Select)</asp:ListItem>
                              <asp:ListItem Value="Initial">Initial</asp:ListItem>
                              <asp:ListItem Value="Moderate">Moderate</asp:ListItem>
                              <asp:ListItem Value="Severe">Severe</asp:ListItem>
                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label12" runat="server" Text='<%# Bind("Rate_2") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="WC" SortExpression="WC">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdWC" runat="server" 
                              SelectedValue='<%# Bind("WC") %>'>
                              <asp:ListItem>0</asp:ListItem>
                              <asp:ListItem>1</asp:ListItem>
                              <asp:ListItem>2</asp:ListItem>
                              <asp:ListItem>3</asp:ListItem>
                              <asp:ListItem>4</asp:ListItem>
                              <asp:ListItem>5</asp:ListItem>

                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label13" runat="server" Text='<%# Bind("WC") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="IB" SortExpression="IB">
                      <EditItemTemplate>
                          <asp:DropDownList ID="grdIB" runat="server" 
                              SelectedValue='<%# Bind("IB") %>'>
                              <asp:ListItem>0</asp:ListItem>
                              <asp:ListItem>1</asp:ListItem>
                              <asp:ListItem>2</asp:ListItem>
                              <asp:ListItem>3</asp:ListItem>
                              <asp:ListItem>4</asp:ListItem>
                              <asp:ListItem>5</asp:ListItem>

                          </asp:DropDownList>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label14" runat="server" Text='<%# Bind("IB") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
                  <asp:TemplateField HeaderText="qc_id" SortExpression="qc_id" Visible="False">
                      <EditItemTemplate>
                          <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("qc_id") %>'></asp:TextBox>
                      </EditItemTemplate>
                      <ItemTemplate>
                          <asp:Label ID="Label15" runat="server" Text='<%# Bind("qc_id") %>'></asp:Label>
                      </ItemTemplate>
                  </asp:TemplateField>
              </Columns>
              <EditRowStyle BackColor="#99CCFF" HorizontalAlign="Center" />
              <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
              <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
              <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
              <RowStyle BackColor="#EFF3FB" HorizontalAlign="Center" />
              <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
          </asp:GridView>

    <asp:SqlDataSource ID="upper_level_grid" runat="server" 
        ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="
select 
convert(varchar,qcm.qc_date,101) as 'Date',
map.storage as 'Storage',
var.description as 'Variety',
map.room as 'Room' ,
grw.grower_id+' - '+grw.grower_name as 'Grower'
from t_ap_qc_master qcm
inner join t_bin_master_ap map on map.master_ticket_id = qcm.master_ticket_id
inner join t_variety var on var.variety_id = map.variety_id
inner join t_grower grw on grw.grower_id = map.grower_id

where qcm.qc_id = @qc_id ">
        <SelectParameters>
            <asp:ControlParameter ControlID="listQcId" Name="qc_id" 
                PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:SqlDataSource>
    <asp:SqlDataSource ID="fruit_id" runat="server" 
        ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="select top (1) fruit_id as 'Fruit ID'
from t_ap_qc_detail
where qc_id = @qc_id and grade is null ">
        <SelectParameters>
            <asp:ControlParameter ControlID="listQcId" Name="qc_id" 
                PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:SqlDataSource>

                       <asp:SqlDataSource ID="fill_size" runat="server" 
                           ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="SELECT
 top (1)
qcd.size_name 
FROM t_ap_qc_master_fta qcf
inner JOIN t_ap_qc_detail qcd ON qcf.qc_id = qcd.qc_id and qcf.fruit_id = qcd.fruit_id
WHERE qcf.qc_id = @qc_id and qcd.grade is null ">
                           <SelectParameters>
                               <asp:ControlParameter ControlID="listQcId" Name="qc_id" 
                                   PropertyName="SelectedValue" />
                           </SelectParameters>
                       </asp:SqlDataSource>

                         <asp:SqlDataSource ID="color" runat="server" 
                             ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="SELECT rec_id, score FROM t_ap_qc_color_score
WHERE score_id = 
(CASE WHEN ((SELECT variety_id FROM t_bin_master_ap
            WHERE master_ticket_id = (select master_ticket_id from t_ap_qc_master 
            WHERE qc_id = @qc_id)) IN ('09','1J','1P','4E','4F','4I'))
    THEN '2'
    WHEN ((SELECT variety_id FROM t_bin_master_ap
          WHERE master_ticket_id = (select master_ticket_id from t_ap_qc_master 
            WHERE qc_id = @qc_id)) IN ('6X','6Z'))
    THEN '3'
    ELSE '1' 
END)
and type = 'Coverage' and status = 'A'">
                             <SelectParameters>
                                 <asp:ControlParameter ControlID="listQcId" Name="qc_id" 
                                     PropertyName="SelectedValue" />
                             </SelectParameters>
                         </asp:SqlDataSource>

                         <asp:SqlDataSource ID="defects" runat="server" 
                             ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="select defect_id, description
from t_defect where 
/*type = 'DEFECT' and */
inv_cat = 'AP' and status = 'A'
and defect_id IN ('41','11','42','36',
'19','187','186','26','46','20','10','40',
'1','224','89','83','3','14','37','212',
'213','191','2','38','83','226','230','232')
order by description"></asp:SqlDataSource>

                         <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                             ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="select defect_id, description
from t_defect where 
/*type = 'DEFECT' and */
inv_cat = 'AP' and status = 'A'
and defect_id IN ('41','11','42','36',
'19','187','186','26','46','20','10','40',
'1','224','89','83','3','14','37','212',
'213','191','2','38','83','226','230','232')
order by description"></asp:SqlDataSource>

                            <asp:SqlDataSource ID="app_defect" runat="server" 
                                ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="select defect_id, description
from t_defect 
where inv_cat = 'AP' and status = 'A'
and defect_id IN ('15','79','80','77','88','4','39')
order by description"></asp:SqlDataSource>

                         <asp:SqlDataSource ID="app_defect0" runat="server" 
                             ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="select defect_id, description
from t_defect 
where inv_cat = 'AP' and status = 'A'
and defect_id IN ('15','79','80','77','88','4','39')
order by description"></asp:SqlDataSource>

                         <asp:SqlDataSource ID="update" runat="server" 
                             ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" SelectCommand="Select 
fruit_id 
from t_ap_qc_detail
where qc_id = @qc_id
and starch is not null">
                             <SelectParameters>
                                 <asp:ControlParameter ControlID="listQcId" Name="qc_id" 
                                     PropertyName="SelectedValue" />
                             </SelectParameters>
                         </asp:SqlDataSource>

      <% // Lables as description %>

<asp:Label id="lblQcID" style="Z-INDEX: 159; LEFT: 5px; POSITION: absolute; TOP: 5px; HEIGHT: 24px; " 
        runat="server" Font-Names="Calibri">Select QC-ID:</asp:Label>

    <% // Text Boxes %> 
<% // Buttons%><% // Data Grids %>

    <asp:SqlDataSource ID="progress" runat="server" 
        ConnectionString="<%$ ConnectionStrings:AADConnectionString %>" 

        SelectCommand="SELECT DISTINCT
convert(int,qcd.fruit_id) as Smpl_ID,
qcd.size_name as Size,
qcd.grade as Grade,
cs.score as 'Color_Score',
qcd.background as 'Bkgrd',
convert(varchar,convert(decimal(15,1),qcd.starch)) as Starch,
isnull(qcd.def_id_1,'0') as def_id_1,
def1.description as 'Def_1',
isnull(qcd.def_id_2,'0') as def_id_2,
def2.description as Def_2,
isnull(qcd.color,'0') as color,
isnull(qcd.app_def_id_1,'0') as app_def_id_1,
def3.description as App_1,
qcd.app_rating_1 as Rate_1,
isnull(qcd.app_def_id_2,'0') as app_def_id_2,
def4.description as App_2,
qcd.app_rating_2 as Rate_2,
--qcf.color,
isnull(qcd.watercore,'0') as WC,
isnull(qcd.internal_browning,'0') as IB,
qcd.qc_id as qc_id
--qcd.status
FROM t_ap_qc_master_fta qcf
LEFT OUTER JOIN t_ap_qc_master qcm (NOLOCK) on qcm.qc_id = qcf.qc_id
LEFT OUTER JOIN t_ap_qc_detail qcd ON qcf.qc_id = qcd.qc_id and qcf.fruit_id = qcd.fruit_id
LEFT OUTER JOIN t_defect def1 ON def1.defect_id = qcd.def_id_1
LEFT OUTER JOIN t_defect def2 ON def2.defect_id = qcd.def_id_2
LEFT OUTER JOIN t_defect def3 ON def3.defect_id = qcd.app_def_id_1
LEFT OUTER JOIN t_defect def4 ON def4.defect_id = qcd.app_def_id_2
LEFT OUTER JOIN t_ap_qc_color_score cs (NOLOCK) on cs.rec_id = qcd.color
WHERE qcd.qc_id = @qc_id
ORDER BY qcd.fruit_id"
         UpdateCommand="update  t_ap_qc_detail 
set 
fruit_id = @Smpl_ID,
size_name = @Size,
[grade] = @Grade,
[def_id_1] = @def_id_1,
def_id_2 = @def_id_2,
app_def_id_1= @app_def_id_1,
app_rating_1 = @Rate_1,
app_def_id_2 = @app_def_id_2,
app_rating_2 = @Rate_2,
color = @color,
background = @Bkgrd,
watercore = @WC,
internal_browning = @IB,
starch = @Starch
where qc_id = @qc_id and fruit_id = @Smpl_ID" > 

        <SelectParameters>
            <asp:ControlParameter ControlID="listQcId" Name="qc_id" 
                PropertyName="SelectedValue" />
        </SelectParameters>

        <UpdateParameters>

            <asp:Parameter Name="Smpl_ID" Type="Int16"/>

        <asp:Parameter Name="Size" Type="Int32" />
            <asp:Parameter Name="Grade" Type="String"/>
            <asp:Parameter Name="def_id_1" Type="Int32" />
            <asp:Parameter Name="def_id_2" Type="Int32"  />
            <asp:Parameter Name="app_def_id_1" Type="Int32"  />
            <asp:Parameter Name="Rate_1" Type="String"/>
            <asp:Parameter Name="app_def_id_2" Type="Int32" />
            <asp:Parameter Name="Rate_2" Type="String" />
            <asp:Parameter Name="color" Type="Int32"  />
            <asp:Parameter Name="Bkgrd" type="String"/>
            <asp:Parameter Name="WC" Type="String"  />
            <asp:Parameter Name="IB" Type="Int32" />
            <asp:Parameter Name="Starch" Type="String" />
            <asp:Parameter Name="qc_id" Type="Int16" />
<asp:Parameter Name="Fruit_ID"></asp:Parameter>
        </UpdateParameters> 

    </asp:SqlDataSource>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:46:23.687

是的，你可以用 jQuery 做到这一点。这是一种通用的方法，但是如果您发布标记，我可以为您定制它。无论如何，我对所有 .NET 应用程序都执行此操作，只是因为使用一个表单标记存在一般问题：

```
function initEnterKeyManagement() {
    //Remove Enter keys on all
    jQuery('input').keypress(function (e) {
        var code = null;
        code = (e.keyCode ? e.keyCode : e.which);
        return (code == 13) ? false : true;
    });

    var oCurrForm = jQuery('#container with fields');
    var oCurrButton = oCurrForm.find('#button you want to trigger');

    //Submit Buttons
    if (oCurrButton && oCurrButton.length) {
        //Each field
        jQuery.each(oCurrForm.find('input'), function () {
            jQuery(this).keypress(function (e) {
                var code = null;
                code = (e.keyCode ? e.keyCode : e.which);
                if (code == 13)
                    oCurrButton.trigger('click');
            });
        });
    }
} 
```

基本上，您要删除回车键的默认效果，然后重新分配它以执行您想要的操作。在上述情况下，单击（）。

# javascript - 在 Google Analytics 中为 _trackPageview 传递未定义的值

> ID：12737667
> 
> 赞同：0
> 
> 时间：2012-10-04T23:57:28.737
> 
> 标签：javascript, google-analytics

我想从我的页面调用以下代码，有时传递一个 PageName 参数。

```
function _ga(PageName) {
    _gaq = [['_setAccount', 'UA-00000000-0'], ['_setDetectFlash', false], ['_trackPageview', PageName]];//global variable
    var d = document,
        t = 'script',
        g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.src = 'https://ssl.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
} 
```

如果 PageName 变量是 会发生什么`undefined`？Analytics 会将其解释为`['_trackPageview']`.

我无法实时测试它，但据我所知，当变量为`undefined`.

如果 Analytics 不接受，我可以添加额外的代码`undefined`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:48:51.707

是的。以下 3 个调用是等效的。

```
_gaq.push(['_trackPageview']);
_gaq.push(['_trackPageview', undefined]);
_gaq.push(['_trackPageview', '']); 
```

您可以通过在使用 Google Analytics（包括 Stack Exchange）的任何站点中执行 3 个调用，然后检查网络面板上的 gif 请求来轻松测试这一点。

您会注意到，通过检查 gif 请求的 utmp 参数，默认情况下所有调用都将使用当前 url。

# php - 根据幻灯片更改背景

> ID：12737669
> 
> 赞同：0
> 
> 时间：2012-10-04T23:57:53.613
> 
> 标签：php, jquery

我正在尝试获得以下信息：

通过使用 Flexslider (http://www.woothemes.com/flexslider/)，我想根据加载的幻灯片获得不同的背景颜色。

我做了这样的事情：

```
 <?php
    $bg1="red";
    $bg2="blue";
  ?> 
```

然后，在我的 flexslider jquery 中：

```
 <script type="text/javascript">
    $(window).load(function(){
      $('.flexslider').flexslider({
        animation: "slide",
        start: function(slider){
          $('body').removeClass('loading');
        },
        before: function(slider) {
          var current = slider.currentSlide;
          $('#container').css("background-color","<?php echo $bg?>+current");
        },
      });
    });
  </script> 
```

我正在尝试从我的 php 变量中检索值，并将它们放在我容器的 css 中。好的，这就是我卡住的地方，如果它是第一张幻灯片，我如何让它加载 bg1，如果它是第二张幻灯片，我如何让它加载 bg2，等等？

我以为我可以做一些像 +current 这样的事情，但它不起作用......我敢肯定这很容易 -

任何帮助都非常感谢！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:41:45.107

我设法通过使用 Flexslider（它有一些 API）来做我需要的事情，所以我的最终代码如下：

```
 <script type="text/javascript">
    $(window).load(function(){
      $('.flexslider').flexslider({
        animation: "fade",
        slideshow: true,                //Boolean: Animate slider automatically
        slideshowSpeed: 6000,
        animationSpeed: 300,
        start: function(slider){
          $('body').removeClass('loading');
        },
        before: function(slider) {
          animate = 'bg'+slider.animatingTo
          $('#container').addClass(animate, 1000);
          current = 'bg'+slider.currentSlide;
          $('#container').removeClass(current);
        }
      });
    });
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:10:35.837

使用模数，如..

```
$('#container').css("background-color",(current%2==0)?"<?php echo $bg1?>":"<?php echo $bg2?>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T05:05:36.563

这是未经测试的，但是快速浏览一下 flexslider.js 我相对有信心您可以在第 427 行找到的函数 slider.flexAnimate 中实现背景滚动。这假设您仅在一个位置（或在至少对于滑块的每个实例发生的背景变化都可以）。

此外，如果您的滑块处于恒定时间间隔，我建议您使用 CSS 关键帧动画来循环浏览您的 2 个背景选项。这是一个小例子，假设间隔为 10 秒：

```
@keyframes bgpulse {
  0% {background-color:  #FFFFFF;}
 100% {background-color:  #000000;}    
}
@-webkit-keyframes bgpulse {
  0% {background-color:  #FFFFFF;}
 100% {background-color:  #000000;}
}

/*Body Styles*/
body {
animation: bgpulse 10s infinite alternate;
-webkit-animation: bgpulse 10s infinite alternate;
} 
```

# ruby - 打开文件 - 权限被拒绝

> ID：12737671
> 
> 赞同：1
> 
> 时间：2012-10-04T23:58:18.603
> 
> 标签：ruby, file

我试图以这种方式打开文件

```
File.open(f_name, File::CREAT | File::RDWR) do |file|

end 
```

绝对文件路径作为文件名传入，如文件名是

```
/mounts/dd670-6.chaos.local/cifs/tfile6 
```

获取错误信息

```
Permission denied - /mounts/dd670-6.chaos.local/cifs/tfile6 (Errno::EACCES) 
```

而且，如果我进入该目录并打开该文件，则可以成功完成操作。

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:49:08.567

您可以在打开文件之前尝试更改权限：

```
chmoded = 0
f_name = __FILE__
begin
    File.open(f_name, File::CREAT | File::RDWR) do |file|
    end
rescue => e
    File.chmod(0755, f_name) rescue nil
    chmoded += 1
    retry if chmoded < 2
    puts e.message
end 
```

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=open-a-file-permission-denied.rb&run=true)

# mysql - vb.net INSERT CURDATE() 到 MySQL 问题

> ID：12737673
> 
> 赞同：0
> 
> 时间：2012-10-04T23:58:31.800
> 
> 标签：mysql, vb.net, insert, windows-applications

在 Windows 应用程序中，我有一个查询，我试图在我的 mysql 数据库中插入当前日期

查询如下：

```
SqlVentaCasas1 = "INSERT INTO VentaCasasHistory (ID, Direccion, Estatus, Precio, " & _
                                "NumeroDias, FechaHoy, Agente, Compania, Unidad, Ciudad ) VALUES ('" & _
                                AddIDCasas2 & "','" & AddDireccionCasas2 & "','" & AddEstatusCasas2 & "'," & AddPrecioCasas2 & ", 0, CURDATE(), '" & AgenteNameCasas2 & "','" & AgenteCompaniaCasas2 & "', '" & AddUnidadCasas2 & "', '" & AddCiudadCasas2 & "' );"

                        CommandVentaCasas1 = New MySqlCommand(SqlVentaCasas1, con)
                        CommandVentaCasas1.CommandType = CommandType.Text
                        CommandVentaCasas1.ExecuteNonQuery() 
```

当我输入要插入 mysql 的值时，一切运行顺利，除了当我检查数据库中输入的日期时，我发现自己使用的是 0000-00-00

另一方面，当我从 PHPmyAdmin 运行相同的查询时

```
INSERT INTO `VentaCasasHistory`(`ID`, `Direccion`, `Estatus`, `Precio`, `NumeroDias`, `FechaHoy`, `Agente`, `Compania`, `Unidad`, `Ciudad`) VALUES ([String1],[String2],[String3],[Integer1],[Integer2],CURDATE(),[String4],[String5],[String6],[String7]) 
```

FechaHoy 是 CURDATE() 的地方确实正确插入了应该是的日期。

我似乎找不到问题所在，据我了解，如果输入的日期有问题，它只会插入 0000-00-00。

我保持两个查询“相同”的原因是为了了解我做错了什么，并且我知道它们可能会受到 SQL 注入的影响。

您的帮助将不胜感激。

里奥·P。

这是你告诉我的最后一段代码。

```
Dim StringDate As String

    StringDate = Date.Today.ToString("yyyy-MM-dd")

SqlVentaCasas1 = "INSERT INTO VentaCasasHistory (ID, Direccion, Estatus, Precio, " & _
                                "NumeroDias, FechaHoy, Agente, Compania, Unidad, Ciudad ) VALUES ('" & _
                                AddIDCasas2 & "','" & AddDireccionCasas2 & "','" & AddEstatusCasas2 & "'," & AddPrecioCasas2 & ", 0, STR_TO_DATE('" & StringDate & "', GET_FORMAT(DATE,'ISO')), '" & AgenteNameCasas2 & "','" & AgenteCompaniaCasas2 & "', '" & AddUnidadCasas2 & "', '" & AddCiudadCasas2 & "' );" 
```

不幸的是，它不起作用，我仍然得到 0000-00-00。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:08:34.643

`CURDATE()`应该真正指定为`CREATE TABLE`. 换句话说，您不需要将其作为查询的一部分放入，因为当您插入新记录时，默认值设置为的字段`CURDATE()`将自动插入日期。

前：

```
CREATE TABLE MyTable
(
    ID int NOT NULL,
    MyName varchar(30) NOT NULL,
    MyDate datetime NOT NULL DEFAULT CURDATE(),
    PRIMARY KEY (ID)
)

INSERT INTO MyTable (MyName) VALUES ('Epistemex') 
```

将`MyDate`字段设置为`CURDATE()`.

希望这可以帮助。

# android - 操作栏中的 EditText 仅在 SHOW_AS_ACTION_NEVER 时获得焦点

> ID：12737676
> 
> 赞同：0
> 
> 时间：2012-10-04T23:58:49.383
> 
> 标签：android, android-actionbar, menuitem

我的操作栏 (ActionbarSherlock) 中有一个折叠的搜索 EditView 菜单。当 setShowAsAction 方法设置为 SHOW_AS_ACTION_NEVER 时，键盘显示并且用户可以按预期开始键入。

但是，当我将值设置为 SHOW_AS_ACTION_ALWAYS 时，用户必须在开始输入之前触摸 EditText，因为它似乎没有焦点！

我的代码是否有问题或解决此问题的方法？

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    final MenuItem search = menu.add(0, MENU_SEARCH, MENU_SEARCH, getString(R.string.search));
    search.setIcon(R.drawable.ic_action_search);
    search.setActionView(R.layout.action_search);
    search.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case MENU_SEARCH:
            mSearch = (EditText) item.getActionView();
            mSearch.addTextChangedListener(mFilterTextWatcher);
            mSearch.requestFocus();
            mSearch.postDelayed(new Runnable() {
                @Override
                public void run() {
                    InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
                }
            }, 200);

            break;
    }
    return true;
} 
```

action_search.xml

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:singleLine="true"
          android:hint="@string/search" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:06:14.390

解决方案是将片段嵌套在 Activity 中。

```
public class ProductListActivity extends SherlockFragmentActivity {
    …
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (getSupportFragmentManager().findFragmentById(android.R.id.content) == null) {
            ProductListFragment list = new ProductListFragment();
            getSupportFragmentManager().beginTransaction().add(android.R.id.content, list).commit();
        }
    }

    public static class ProductListFragment extends SherlockListFragment {
        …
    }
} 
```

# php - 在 yii 中显示过滤后的表格

> ID：12737679
> 
> 赞同：0
> 
> 时间：2012-10-04T23:59:38.500
> 
> 标签：php, yii

这可能是一个愚蠢的问题，但我是 yii 的新手，对这个简单的视图有疑问。我有这样的数据：

### 任务类型

```
身份证名称
1 个议程
2 任务
3 个音符

```

### 议程：

```
id user due_at created_at task_type_id 描述

```

我想将它们分别显示为议程和任务，以及不同 html 视图中的注释，如下所示：

### 任务

```
due_at 描述

```

### 议程

```
由于_at created_at 描述

```

### 笔记

```
描述

```

我不想要任何花哨的用户过滤，因为这些表格只在首页上显示一周的最大值，当前一周，并且会有单独的页面专门用于此类任务。这仅作为快速任务出现在首页。我一直在尝试使用 CGridView，但如果不显示 html 过滤器就无法过滤它。我需要在due_at 过滤，并将due_at 过滤为议程，然后按用户过滤。

有人可以帮我创建这个吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:14:17.393

如果您想为此使用 a ，您需要注意一些事情，[`CGridView`](http://www.yiiframework.com/doc/api/1.1/CGridView "http://www.yiiframework.com/doc/api/1.1/CGridView")它们如下：

1.  **使用 DataProvider**：CGridView 需要一个数据提供者作为它的输入。[数据提供者](http://www.yiiframework.com/doc/api/1.1/IDataProvider "http://www.yiiframework.com/doc/api/1.1/IDataProvider")是：

    > 数据提供者是可以为数据网格、数据列表等小部件提供数据的组件。除了提供数据，它们还支持分页和排序。

    对于您当前的要求，您可以使用[`CActiveDataProvider`](http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider "http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider"). 所以你的gridview代码需要这个：

    ```
    $this->widget('zii.widgets.grid.CGridView', array(
        'dataProvider'=>$dataProvider,
    )); 
    ```

    将此数据提供程序从控制器操作传递到视图。

2.  **使用条件**：你可以传递所有那些`condition`s 的[`criteria`](http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider#criteria-detail "http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider#criteria-detail")属性`CActiveDataProvider`。这个标准是一个对象[`CDbCriteria`](http://www.yiiframework.com/doc/api/1.1/CDbCriteria "http://www.yiiframework.com/doc/api/1.1/CDbCriteria")。所以你`$dataProvider`可以是这样的：

    ```
    $dataProvider=new CActiveDataProvider('Agenda',array(
        'criteria'=>array(
            'condition'=>'task_type_id=1 AND due_at BETWEEN CURDATE() AND DATE_ADD(CURDATE(), INTERVAL 1 WEEK)',
            'select'=>'due_at, description' // columns you want to select
        )
    )); 
    ```

    该`condition`物业是：

    > 查询条件。这是指 SQL 语句中的 WHERE 子句。例如，年龄>31 AND 团队=1。

    该`select`物业是：

    > 正在选择的列。这是指 SQL 语句中的 SELECT 子句。该属性可以是字符串（以逗号分隔的列名）或列名数组。默认为“*”，表示所有列。

3.  **不要指定过滤器**：不显示过滤器，只是不要将任何`filter`属性值传递给网格：

    ```
    $this->widget('zii.widgets.grid.CGridView', array(
        'dataProvider'=>$dataProvider,
        //'filter'=>$model // don't pass any filter
    )); 
    ```

4.  **使用列**：使用 的[`columns`属性`CGridView`](http://www.yiiframework.com/doc/api/1.1/CGridView#columns-detail "http://www.yiiframework.com/doc/api/1.1/CGridView#columns-detail")仅显示您要显示的特定列：

    ```
    $this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'agenda-grid',
        'dataProvider'=>$dataProvider,
        'columns'=>array(
            'due_at',
            'description'
        )
    )); 
    ```

    还要传递一个`id`将成为`id`该网格的`div`，以防您不想要自动生成的 id。

就是这样，你应该按照上面的步骤得到你想要的。

# sharepoint - SharePoint：在列表中查找查找列

> ID：12737681
> 
> 赞同：11
> 
> 时间：2012-10-04T23:59:43.603
> 
> 标签：sharepoint, sharepoint-2010, lookup

我有三个看起来像这样的列表：

```
Initiatives
-----------
Initiative (single line text)

Themes
------
Theme      (single line text)
Initiative (Lookup from Initiatives:Initiative)
Points     (number)

Features
--------
Feature    (single line text)
Theme      (Lookup from Themes:Theme)
Points     (Lookup from Themes:Points)     # <- This here works fine.
Initiative (Lookup from Themes:Initiative) # <- This here is busted and can't do. 
```

看到最后一行... `Initiative (Lookup from Themes:Initiative)`<- 那是我试图获得与主题相关的主动权。我已经尝试了无数不同的事情，但无法弄清楚如何做到这一点。

甚至可能吗？如果是这样，怎么做？

FWIW - 我使用的是 SharePoint 2010，可以使用从 Web 工具到 SharePoint Designer 的任何东西。我是 SharePoint *Site*上的管理员，但不是*Server*上的管理员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:07:49.210

您不能这样做，您需要做的是使用级联查找字段（一个自定义字段，可以根据父查找中选择的值过滤一个查找。然后您可以在您的功能列表中设置两个查找列，首先查找倡议列表，其他 - 主题列表。一旦您在倡议中选择了一个值，主题中只有相关的值可用。

此类字段的示例是[http://infowisesolutions.com/product.aspx?id=ConnectedFields2007](http://infowisesolutions.com/product.aspx?id=ConnectedFields2007)（来自我们公司 :)），但也有其他解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T17:20:01.653

这个怎么样......你在主题中创建一个列，它是一个计算字段，它连接你从主题表中寻找的所有三个值，即

=[主题]&" / "&[积分]&"/ "&[倡议]

在特征列表中，您创建一个查找列，该列提取连接的值。然后，您制作“主题、点数和倡议”列计算字段，从串联的查找值中解析正确的值。

瞧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:03:15.150

OOTB SharePoint 无法做到这一点。您应该创建自定义字段类型。从商业插件中，尝试使用 Sparqube Lookup Extra 字段类型。它支持查找任何类型的列，包括查找字段。 [http://www.sparqube.com/SharePoint-Lookup-Column/](http://www.sparqube.com/SharePoint-Lookup-Column/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T08:17:20.910

1.  在主题列表中创建隐藏列，例如。倡议隐藏。
2.  在添加和更新主题的事件上创建 EventReceiver，这将根据倡议查找填充倡议隐藏。
3.  使用功能列表中的新字段作为查找列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-30T22:37:31.250

sharepoint 中的查找列没有开箱即用的解决方案，但这个开源工具列表可以帮助您做到这一点

[使用 Picker 2010 工具检查查找字段](http://ittechnotebook.blogspot.com/2013/07/sharepoint-swiss-army-knife-tools.html)

# c++ - 从字符串中删除括号的 C++ 函数不能全部捕获它们

> ID：12737688
> 
> 赞同：0
> 
> 时间：2012-10-05T00:00:40.397
> 
> 标签：c++

我在 C++ 中编写了一个函数来从字符串中删除括号，但由于某种原因，它并不总是能全部捕获它们，我确信这真的很简单。

```
string sanitize(string word)
{
int i = 0;

while(i < word.size())
{
    if(word[i] == '(' || word[i] == ')')
    {
        word.erase(i,1);
    }
    i++;
}
return word;
} 
```

样本结果：

输入：((3)8)8)8)8))7

输出：（38888）7

为什么是这样？我可以通过在输出上调用函数来解决这个问题（因此将字符串运行两次），但这显然不是“好的”编程。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T00:03:16.433

```
if(word[i] == '(' || word[i] == ')')
{
    word.erase(i,1);
}
i++; 
```

如果你删除一个括号，下一个字符会移动到先前被括号占用的索引，所以它不会被检查。使用`else`.

```
if(word[i] == '(' || word[i] == ')')
{
    word.erase(i,1);
} else {
    i++;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T01:25:41.420

```
while(i < word.size())
{
    if(word[i] == '(' || word[i] == ')')
    {
        word.erase(i,1);
    }
    i++;
} 
```

当您删除一个元素时，下一个元素将移动到该位置。如果你想测试它，你将不得不避免增加计数器：

```
while (i < word.size()) {
   if (word[i] == '(' || word[i] == ')' ) {
      word.erase(i,1);
   } else {
      ++i;
   }
} 
```

这也可以使用迭代器来完成，但任何一个选项都不好。对于字符串中的每个括号，它后面的所有元素都*将*被复制，这意味着您的函数具有二次复杂度：`O(N^2)`. 一个更好的解决方案是使用*擦除删除*成语：

```
s.erase( std::remove_if(s.begin(), s.end(), 
                        [](char ch){ return ch==`(` || ch ==`)`; })
         s.end() ); 
```

如果您的编译器不支持 lambda，您可以将检查实现为函数对象（函子）。该算法具有线性复杂性`O(N)`，因为未删除的元素仅复制一次到最终位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T00:28:25.153

它失败了，因为您在所有情况下都增加了索引。仅当您不删除字符时才应该这样做，因为删除会将超出该点的所有字符向后移动一个。

换句话说，只要有两个或多个连续字符要删除，就会出现这个问题。它不是将它们都删除，而是将它们“折叠”成一个。

通过你的函数运行它两次将在那个特定的输入字符串上工作，但你仍然会遇到像“(((((pax))))”这样的问题，因为第一次调用会将它折叠为“((pax))”第二个会给你“（pax）”。

一种解决方案是在删除字符时*不推进索引：*

```
std::string sanitize (std::string word) {
    int i = 0;

    while (i < word.size()) {
        if(word[i] == '(' || word[i] == ')') {
            word.erase(i,1);
            continue;
        }
        i++;
    }
    return word;
} 
```

但是，我会更智能地使用该语言的功能。C++ 字符串*已经*具有搜索字符选择的能力，这可能比用户循环优化得多。因此，您可以使用更简单的方法：

```
std::string sanitize (std::string word) {
    int spos = 0;

    while ((spos = word.find_first_of ("()", spos)) != std::string::npos)
            word.erase (spos, 1);
    return word;
} 
```

您可以在以下完整程序中看到这一点：

```
#include <iostream>
#include <string>

std::string sanitize (std::string word) {
    int i = 0;

    while ((i = word.find_first_of ("()", i)) != std::string::npos)
            word.erase (i, 1);
    return word;
}

int main (void) {
    std::string s = "((3)8)8)8)8))7 ((((pax))))";
    s = sanitize (s);
    std::cout << s << '\n';
    return 0;
} 
```

输出：

```
388887 pax 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-05T00:01:46.930

为什么不只使用 strtok 和一个临时字符串？

```
string sanitize(string word)
{
int i = 0;
 string rVal;
 char * temp;
strtok(word.c_str(), "()"); //I make the assumption that your values should always start with a (
do
{
   temp = strtok(0, "()");
   if(temp == 0)
   {
       break;
   }
   else { rVal += temp;}
}while(1);

return rVal;
} 
```

# android - 谷歌地图显示不正确

> ID：12737689
> 
> 赞同：1
> 
> 时间：2012-10-05T00:01:03.487
> 
> 标签：android, google-maps

![谷歌地图](../Images/37b79c0f8a8baf45dae76ac5e2b98eb4.png)

嗨，我正在测试谷歌地图 api，但地图不完整。我也在设备上测试过，结果是一样的。怎么了？？

当我向地图添加一些属性时，这种效果就开始了，例如：

```
mapView = (MapView) findViewById(R.id.mapView);
        // enable Street view by default
         mapView.setStreetView(true); 
```

如果没有添加任何内容，则地图没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:29:09.420

好的，事实证明，这种效果只有在我设置时才会出现：

```
mapView.setStreetView(true); 
```

但不是任何其他属性，所以如果有人遇到这个问题就是解决方案，只需删除这一行。可能出现问题是因为地图的默认视图是 StreetView。

# ruby-on-rails - Rails Active Admin 自定义资源查询

> ID：12737692
> 
> 赞同：0
> 
> 时间：2012-10-05T00:01:08.417
> 
> 标签：ruby-on-rails

我有一个资源，我想在索引视图中显示来自另一个相关表的信息。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:26:39.570

谢谢您的帮助。答案是：

```
 column "Account ID" do |refund|
  Account.find_by_character_name(refund.character_name).id
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T11:15:58.353

您也可以使用关系查询它

`column ("Car Model") { |user| user.car.attribute_name if user.car }`

# apache-flex - Event.result 作为字符串自动对我的结果进行排序

> ID：12737697
> 
> 赞同：0
> 
> 时间：2012-10-05T00:01:32.300
> 
> 标签：apache-flex, actionscript

我有一个 flex 脚本，它基本上在执行时会向用户提示一条警报消息。说我的结果是这样的：

1) 巴贾杰, 2) 卡塔利娜 3) 安德森 4) 迈克尔

然后，警报提示会自动对它们进行排序并显示如下结果：

“你这样做是为了 1\. Anderson，2\. Bajaj 3\. Catalina 4\. Michael”

本质上，触发事件的顺序已由 Flex 出于礼貌进行排序，我不希望这种排序发生。

这里有一些代码可以细细琢磨：

```
<mx:Button label="Save" id="save" width="60" enabled="{showSaveBtn}"
click="saveConfig();" right="0" bottom="0"/>

function saveConfig()
{
// internally calls the function where the alert is supposed to be displayed: 
// doThis
}

private function doThis(event:ResultEvent):void
            {
                selectConfigDG.selectedItem = defaultSelectedConFig;
                this.changeConfig = false;
                this.savedMessage.visible = true;
                this.savedMessage.includeInLayout = true;
                this.savedMessage.htmlText = "Configuration " + "<b> \" " + defaultSelectedConFig.description + 
                    " \" </b>" + " has been changed." + " <b> ";

                var resultString = event.result as String;

                if(resultString != null && (StringUtil.trim(resultString)).length != 0)
                {
                    var htmlBody:String = resultString;
                    var alert:Alert = Alert.show(htmlBody,'',Alert.OK);
                    use namespace mx.core.mx_internal;
                    IUITextField(alert.alertForm.textField).htmlText = htmlBody;
                }

                this.savedMessage.validateProperties();         
            } 
```

在上面的代码中，有趣的是 event.result 作为 String 片段。基本上，解决了这个问题。我希望它保持秩序。我如何让 Flex 做到这一点？

# python - 在 Python 中订阅分布式作业

> ID：12737698
> 
> 赞同：1
> 
> 时间：2012-10-05T00:01:36.733
> 
> 标签：python, jobs

我正在寻找一种以特定方式在多台计算机上分配工作的方法。

当有人要求完成一项工作时，它应该被发送到负载最少的计算机。如果其他人要求相同的工作，它应该订阅已经存在的工作的结果，而不是创建另一个工作。工作中的所有消费者都应该有效地同步——他们只是在得到结果之前休眠，并在它准备好时立即唤醒。如果您请求时已经完成了一项工作，那么您应该立即获得结果。

你将如何在 Python 中实现这一点？

到目前为止，我已经查看了 rabbitmq 和 celery 之类的任务队列，但是订阅任务结果的前景似乎很混乱，并且可能需要大量的队列。

# iphone - 仅显示一次设置窗口

> ID：12737699
> 
> 赞同：1
> 
> 时间：2012-10-05T00:01:40.070
> 
> 标签：iphone, ios, xcode, ios5, storyboard

我只想打开一次设置窗口，第一次打开我的应用程序。之后，此设置窗口将不再显示，而是显示应用程序的主视图。

我不知道如何解决这个问题，因为 Storyboard 只有一个初始 ViewController，而我需要两个（一个带有设置的 ViewController，另一个带有我的主视图的 ViewController）。

如何在我的两个 ViewController 之间进行选择？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:10:38.230

我认为最好的方法是使用用户默认值——注册一个默认值，比如 setBool:TRUE forKey:@"NeverOpened"，然后检查该值。如果是真的，让你的主视图控制器模态地显示设置控制器，然后当它被关闭时，将“NeverOpened”键的值设置为假。下次打开应用程序时，NeverOpened 将为 false，并且不会显示设置控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:57:29.520

您的问题可以分为两部分。首先，要确定用户之前是否运行过该应用程序，您需要查询在用户运行该应用程序的所有时间中持久的内容。对于少量数据，您可以使用 NSUserDefaults，它基本上是一个字典。当您查询 NSUserDefaults 时，如果没有对应键的对象，则 NSUserDefaults 返回 nil。利用这一点，我们可以查询像“hasRunKey”这样的键。如果它返回 nil，则用户之前没有运行过应用程序，我们应该为 hasRunKey 设置对象，这样我们将来就不会得到 nil。

```
if (![[NSUserDefaults standardUserDefaults] objectForKey:@"hasRunKey"]) {
    [[NSUserDefaults standardUserDefaults] setObject: [NSNumber numberWithBool:YES] forKey:@"hasRunKey"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    // Present the settings view controller -- see explanation below. 
    [self performSegueWithIdentifier:@"My Identifier" sender:self];
} else {
    // Do what you normally do. 
} 
```

对于第二个问题，显示设置视图控制器，您应该添加一个新文件和子类 UIViewController 与某种 MySettingsViewController 类。然后，在您的故事板中，从侧面板中拖出一个 UIViewController 对象。在该视图控制器的身份检查器中，将类设置为您刚刚创建的 MySettingsViewController。（有关位置请参见此图片：[https](https://www.evernote.com/shard/s230/sh/ac134774-530f-4649-b3a2-e46b8d712c78/0352134cc8fab7241d97292f4d6ff464) ://www.evernote.com/shard/s230/sh/ac134774-530f-4649-b3a2-e46b8d712c78/0352134cc8fab7241d97292f4d6ff464 ）。

选择您的第一个视图控制器并按住 Ctrl 并拖动到 MySettingsViewController 以在两者之间创建一个 segue。单击您在情节提要中创建的 segue，并使用属性检查器窗口为其指定一个标识符。此时您还可以选择您希望如何呈现视图控制器；我推荐 modal 用于您的目的。

正如 Nikolai 建议的那样，您的第一个视图控制器的 viewDidLoad 方法是此代码的好地方。

我强烈推荐观看例如 Paul Hegerty 的 iTunes U 讲座关于 iOS 开发——它涵盖了这些基础知识，例如使用故事板和在它们之间进行切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T00:10:06.600

在您的主视图控制器的`viewDidLoad:`方法中检查 first-app-start ，如果是，则在没有动画的情况下推送设置控制器。

# xml - 使用 for-yield 生成 Scala XML 文字

> ID：12737701
> 
> 赞同：1
> 
> 时间：2012-10-05T00:01:48.720
> 
> 标签：xml, scala

有没有办法使用文字语法生成 XML，如下所示：

```
<a>
{
  for (i <- Range(1, 3)) yield {
    <b>{i}</b>
  }
}
</a> 
```

那将返回

```
<a><b>1</b><b>2</b></a> 
```

即，我只想使用一个复合语句，它会以某种方式返回完整的 XML 文字。

我知道的唯一方法是分两步完成：在第一步中，for-yield 语句将返回 IndexedSeq 或类似的东西，然后在第二步中我必须将其转换为 scala.xml.Elem。没关系，但我觉得你可以更简洁 - 几乎与我在上面的代码中提出的一样简洁。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:54:48.433

Do you specifically want to use the for comprehension? If not, this should give you the output you are looking for:

```
<a>{
  (Range(1, 3)).map{ vl => 
     <b>{vl}</b>
  }
}</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:25:46.703

您发布的内容很好...

如果您希望它在打字方面更简洁，您可以使用内部语句

```
(1 to 3).map{i => <b>{i}</b>}
//or
for(i<-1 to 3) yield <b>{i}</b> 
```

那么你就会有这个：

```
val xml = <a>{ (1 to 3).map{ i => <b>{i}</b> } }</a> 
```

这使

```
xml: scala.xml.Elem = <a><b>1</b><b>2</b><b>3</b></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:54:13.227

如果你想要 for 语法，你需要从 Seq[Node] 到 NodeSeq 的隐式转换。我会写下代码，但我现在在手机上......

# php - 在 PHP 中减去时间字符串

> ID：12737703
> 
> 赞同：2
> 
> 时间：2012-10-05T00:02:00.850
> 
> 标签：php, time

假设我有以下字符串：

$timeLeft = 00:02:30

我希望能够减去 1 秒，将其变为 00:02:29。

我努力了

$timeLeft - 1;

但它什么也没做。

我怎样才能做到这一点，以便我可以从字符串中减去秒？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T00:10:23.757

您需要将其转换为时间，减去 1 秒并重新格式化，例如：

```
$timeLeft = '00:02:30';
$time = DateTime::createFromFormat('H:i:s', $timeLeft);
$time->sub(new DateInterval('PT1S'));
$timeLeft = $time->format('H:i:s'); 
```

下面是脏代码，它通过将时间转换为秒来“手动”执行转换，以防 PHP 5.3+ 不可用。减去的秒数大于总秒数，它肯定会表现不佳。

```
$timeLeft = '00:02:30';
list($hours, $minutes, $seconds) = explode(':', $timeLeft);
$seconds += $hours*3600 + $minutes*60;
unset($hours, $minutes);
$seconds -= 1; //subtraction
$hours = floor($seconds/3600);
$seconds %= 3600;
$minutes = floor($seconds/60);
$seconds %= 60;
$timeLeft = sprintf("%'02u:%'02u:%'02u", $hours, $minutes, $seconds); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:18:28.587

Using`strtotime`是一个很好的实用解决方案，但您必须注意 DST 更改：

```
$tz = date_default_timezone_get(); // save old timezone
date_default_timezone_set('UTC'); // switch to UTC

echo date('H:i:s', strtotime($timeleft) - 1); // perform calculation

date_default_timezone_set($tz); // restore old setting 
```

# c# - 寻找素数不起作用

> ID：12737704
> 
> 赞同：4
> 
> 时间：2012-10-05T00:02:04.030
> 
> 标签：c#

> **警告：**简单的家庭作业，不知道我在做什么

所以，我正在尝试制作一个程序来查找从 1 到 100 的第一个素数并将它们打印在列表框中。这是我的代码：

```
private bool IsPrime(int number)
{
    int count;
    if (number == 2)
        return true;
    for (count = 3; count < number; count = count + 2)
    {
        if (number % count == 0)
            return false;
    }
    return true;
}

private void calculateButton_Click(object sender, EventArgs e)
{
    int number;
    for (number = 1; number < 100; number = number++)
        if (IsPrime(number))
            primeList.Items.Add(number);
} 
```

并且该程序没有捕获任何语法错误，但每次我尝试运行它时它也会冻结。知道为什么会这样吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T00:13:57.387

你用：

```
for (number = 1; number < 100; number = number++) 
```

而你应该写

```
 for (number = 1; number < 100; number++) 
```

您应该阅读这些文章以了解为什么您的原始代码没有增加 : [for](http://msdn.microsoft.com/en-us/library/ch45axte.aspx) , [++ 运算符](http://msdn.microsoft.com/en-us/library/36x43w8w.aspx)

您可以`++`在一些测试代码中了解操作员的行为：

```
 int n = 0;
        Console.WriteLine(n); //0
        n = n++;
        Console.WriteLine(n); //0
        n = ++n;
        Console.WriteLine(n); //1 
        n = n++;
        Console.WriteLine(n); //1
        n = ++n;
        Console.WriteLine(n); //2 
```

另一个很好的例子是：

```
 int n = 0;
        int x = n++;
        int y = ++n;
        Console.WriteLine(string.Format("x={0}", x)); //0
        Console.WriteLine(string.Format("y={0}", y)); //2
        Console.WriteLine(x + y); //n++ + ++n == 0 + 2 == 2
        n = 0;
        x = ++n;
        y = n++;
        Console.WriteLine(string.Format("x={0}", x)); //1
        Console.WriteLine(string.Format("y={0}", y)); //1
        Console.WriteLine(x + y); //++n + n++ == 1 + 1 == 2 
```

# php - mysql 查询中出现“mysqli num_rows 命令不同步；您现在无法运行此命令”错误

> ID：12737711
> 
> 赞同：0
> 
> 时间：2012-10-05T00:03:11.417
> 
> 标签：php, mysql, sql, mysqli

我从 php 脚本调用的 mysqli 查询有问题。我已经重写了很多次，并且不断收到错误：“mysqli num_rows 命令不同步；您现在无法运行此命令” 这是从该页面访问数据库的第一次尝试。我之前绑定了参数，然后调用： $checkAcct->num_rows() 并遇到了同样的问题。我还尝试了有人在此站点上的不同帖子中提出的建议：do { $checkAcct->use_result(); } 而( $checkAcct->next_result() ); 但这也不起作用，我遇到了同样的错误。在确保具有这些详细信息的用户不在数据库中后，我执行另一个查询以将用户的信息插入站点，但我收到的错误消息与此查询有关。

以下是我尝试使用的代码：

```
$checkAcct = $dbConn->stmt_init();
$existingAcct = array();

if ($checkAcct->prepare("select usrName, eAddy from usr where usrName = ? OR eAddy = ?"))
{
    $checkAcct->bind_param("ss", $usr, $eml);
    $checkAcct->execute();
    $checkAcct->bind_result($result);
    while($checkAcct->fetch())
    {
        $existingAcct[] = $result;
    }
    if ($existingAcct[0] != 0)
    {

        if ($usr == $inputs['usrName'] && $eml == $inputs['eAddy'])
        {
            $acctSetupErrors[] = "Someone with your username and email address already exists. Please use the forgot password form to reset your password";     
        } else if ($eml == $inputs['eAddy'])    {
            $acctSetupErrors[] = "Someone with your email address already exists. Please use the forgot password form to reset your password or setup an account with a different email address";       
        } else {
            $acctSetupErrors[] = "Someone with your username already exists. Please choose a different username";
        }
    } 

    $checkAcct->free_result();
    $checkAcct->close(); 
```

**编辑**

好吧。我尝试了你的方法，但它也不起作用，所以我去寻找任何以前的数据库调用。我在脚本中链接较高的包含文件中的 db 调用中发现了有问题的查询。有趣的是，它从未在其他任何地方造成问题，但现在我释放了结果并且效果很好。感谢您对此的帮助。我没有足够的分数来支持你建议它必须在代码上方的某个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:42:28.730

你能像这样改变上面的代码，看看你得到了什么

```
$checkAcct = $dbConn->stmt_init();
$existingAcct = array();

if ($checkAcct->prepare("select usrName, eAddy from usr where usrName = ? OR eAddy = ?"))
{
    $checkAcct->bind_param("ss", $usr, $eml);
    $checkAcct->execute();
    $checkAcct->store_result();
    printf("Number of rows: %d.\n", $stmt->num_rows);
    $checkAcct->free_result();
    $checkAcct->close();
} 
```

您能否确保在再次使用之前清除准备缓冲区。我希望在此语句之前执行的其他一些查询在 mysqli 准备语句缓冲区中仍然处于活动状态。

# javascript - 如何使用字符串作为对象方法？

> ID：12737713
> 
> 赞同：1
> 
> 时间：2012-10-05T00:03:33.130
> 
> 标签：javascript, jquery

我正在尝试使用元素类名称并将其作为我的对象的方法调用。

```
 var thisClass=$this.attr('class')
 //thisClass = 'call'               

 obj.thisClass(ID); 
```

我的代码没有按我的意愿工作。有没有办法解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:09:24.473

你可以做

```
obj[methodName](arguments, ...); 
```

这是有效的，因为函数在 javascript 中也是对象，并且它们本身只是其对象的属性。对象属性可以通过 . 和 [] 符号，而 [] 符号对于动态名称或不是合法 javascript 标识符的名称是必需的。

# python - psycopg2 导入有什么常见错误吗？

> ID：12737717
> 
> 赞同：0
> 
> 时间：2012-10-05T00:03:55.167
> 
> 标签：python

`psycopg2`所以我正在使用 Python 2.7插入 PostgreSQL 9.2 。我`try: except:`在这个插件上使用它，它不会给我任何错误，并且运行起来就像一切都很好。与连接数据库相同。

每个人在使用它时都会遇到我没有想到的任何常见错误？

问题是`insert`实际上并没有插入。它不会给出错误，但也不会导入任何东西

```
cur.execute("""
INSERT INTO data ( date, time, name, qty, dayornight, bl, idc, prices, contractlength)
VALUES ( %s, %s, %s, %s, %s, %s, %s, %s, %s);""",
    (datet, timet, "lod", qty, "day", btores, 0, prices, contracts)) 
```

多谢你们！就像我说的，实际上没有错误，一切都运行良好。我检查了*psycopg2*并且它在常见问题解答中没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:44:53.830

默认情况下，根据*psycopg2*中的DBAPI 规范，*psycopg2*连接的[autocommit](http://packages.python.org/psycopg2/connection.html#connection.autocommit)属性值为（手动提交） ，因此*“在第一次执行命令时启动新事务：**必须手动调用方法**或*方法以终止事务” 。`False` **`commit()` *`rollback()`***

 ***所以，为了你`insert`被提交，你需要在它之后（假设这`cur`是一个游标，你只需要在游标的连接上调用 commit）：

```
cur.connection.commit() 
```

或者，您可以将连接`autocommit`属性值设置`True`为*“驱动程序不处理任何事务，发送到后端的每个语句都立即生效”*。***

# ruby-on-rails - rails generate - “找不到发电机”

> ID：12737719
> 
> 赞同：7
> 
> 时间：2012-10-05T00:04:07.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, railstutorial.org

我正在关注 Michael Hartl 的 Ruby on Rails 教程。在第[6.3.1](http://ruby.railstutorial.org/chapters/modeling-users.html#sec-an_encrypted_password)节中，我正在尝试生成一个迁移文件以将密码字段添加到我的用户模型中。这是我运行的代码：

```
rails generate add_passsword_digest_to_users password_digest:string 
```

但这会引发错误：`Could not find generator add_passsword_digest_to_users.`

我之前使用过该`rails generate`命令，并且效果很好。我不确定为什么我现在遇到这个问题。

版本：Rails 3.2.8，ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T00:06:16.017

尝试：

```
rails generate migration add_passsword_digest_to_users password_digest:string 
```

您只是忘记了`migration`哪个是用于其他参数的生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T08:34:57.793

您忘记在命令中包含迁移。你可以简单地做

```
rails generate migration add_passsword_digest_to_users password_digest:string 
```

# hadoop - Hadoop Pig 或流和 Zip 文件

> ID：12737720
> 
> 赞同：1
> 
> 时间：2012-10-05T00:04:09.123
> 
> 标签：hadoop, apache-pig, hadoop-streaming

使用 pig 或 hadoop 流，有没有人加载和解压缩压缩文件？原始 csv 文件是使用 pkzip 压缩的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:42:10.957

不确定这是否有帮助，因为它主要专注于在 Java 中使用 MapReduce，但是 hadoop 中有一个 ZipFileInputFormat 可用。这里描述了它通过 Java API 的使用：

[http://cotdp.com/2012/07/hadoop-processing-zip-files-in-mapreduce/](http://cotdp.com/2012/07/hadoop-processing-zip-files-in-mapreduce/)

主要部分是 ZipFileRecordReader，它使用 Java 的 ZipInputStream 来处理每个 ZipEntry。Hadoop 阅读器可能无法开箱即用，因为它将每个 ZipEntry 的文件路径作为键传递，将 ZipEntry 的内容作为值传递。

# pyqt4 - 开发 pyqt4 树小部件

> ID：12737721
> 
> 赞同：1
> 
> 时间：2012-10-05T00:04:09.893
> 
> 标签：pyqt4, qtreeview, qtreewidget

我需要写一棵树吗？，在 pyqt 中。它看起来像这样：

```
Clients(this is text)  
   Type A (this is a Clients child and has a checkbox)  
    Type B (this is a Clients child and has a checkbox)  
Vendors(this is text) 
    Mary  (this is a Vendors child and has a checkbox)   
    Arnold  (this is a Vendors child and has a checkbox)  
Time Period  
    Init(this is a Time Period child, and would be a calendarWidget for date selection)  
    End (this is a Time Period child, and would be a calendarWidget for date selection) 
```

你会为此推荐什么？`QTreeWidget`? `QTreeView?` 这将是我将用于构建 sql 查询的可点击项目。
谢谢阅读。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T10:53:30.397

我建议您使用[QTreeWidget](http://pyqt.sourceforge.net/Docs/PyQt4/qtreewidget.html)而不是[QTreeView](http://pyqt.sourceforge.net/Docs/PyQt4/qtreeview.html)，因为您的任务非常简单。[QTreeView](http://pyqt.sourceforge.net/Docs/PyQt4/qtreeview.html)（带有自定义模型，例如[QStandardItemModel](http://pyqt.sourceforge.net/Docs/PyQt4/qstandarditemmodel.html)）用于困难事件。你的很简单。

```
import sys
from PyQt4 import QtCore, QtGui

class Window(QtGui.QWidget):

    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.treeWidget = QtGui.QTreeWidget()
        self.treeWidget.setHeaderHidden(True)
        self.addItems(self.treeWidget.invisibleRootItem())
        self.treeWidget.itemChanged.connect (self.handleChanged)
        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.treeWidget)
        self.setLayout(layout)

    def addItems(self, parent):
        column = 0
        clients_item = self.addParent(parent, column, 'Clients', 'data Clients')
        vendors_item = self.addParent(parent, column, 'Vendors', 'data Vendors')
        time_period_item = self.addParent(parent, column, 'Time Period', 'data Time Period')

        self.addChild(clients_item, column, 'Type A', 'data Type A')
        self.addChild(clients_item, column, 'Type B', 'data Type B')

        self.addChild(vendors_item, column, 'Mary', 'data Mary')
        self.addChild(vendors_item, column, 'Arnold', 'data Arnold')

        self.addChild(time_period_item, column, 'Init', 'data Init')
        self.addChild(time_period_item, column, 'End', 'data End')

    def addParent(self, parent, column, title, data):
        item = QtGui.QTreeWidgetItem(parent, [title])
        item.setData(column, QtCore.Qt.UserRole, data)
        item.setChildIndicatorPolicy(QtGui.QTreeWidgetItem.ShowIndicator)
        item.setExpanded (True)
        return item

    def addChild(self, parent, column, title, data):
        item = QtGui.QTreeWidgetItem(parent, [title])
        item.setData(column, QtCore.Qt.UserRole, data)
        item.setCheckState (column, QtCore.Qt.Unchecked)
        return item

    def handleChanged(self, item, column):
        if item.checkState(column) == QtCore.Qt.Checked:
            print "checked", item, item.text(column)
        if item.checkState(column) == QtCore.Qt.Unchecked:
            print "unchecked", item, item.text(column)

if __name__ == "__main__":

    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

# php - 比较两个字符串以获得唯一性百分比

> ID：12737723
> 
> 赞同：0
> 
> 时间：2012-10-05T00:04:36.873
> 
> 标签：php, algorithm, compare

我正在寻找一个 sulotion。我有两个字符串需要相互比较并获得唯一性百分比。

例如：

```
{
String A = "Hello"
String B = "Hello"
Uniqueness percent = 0%
}

{
String A = "Hello friend"
String B = "Hello mate"
Uniqueness percent = 50%
}

{
String A = "Hey"
String B = "Hello"
Uniqueness percent = 100%
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:00:35.697

给你，这段代码基于similar_text() php函数，我可以看到它通过字母而不是整个单词来比较字符串，看例子：

```
<?php

    if(isset($_REQUEST["str_a"]) && isset($_REQUEST["str_b"])) {

        $str_a = $_REQUEST["str_a"];    
        $str_b = $_REQUEST["str_b"];    

        function compare_them($str_1, $str_2) {

            $str_1 = trim(strtolower($str_1));
            $str_2 = trim(strtolower($str_2));

            similar_text($str_1, $str_2, $percentage);

            $formated_percents = number_format($percentage);

            return $formated_percents; 

        }

        $calculated = compare_them($str_a, $str_b);

    }

?>

<form action="" method="get">

    string a: <input type="text" value="" name="str_a" />
    <br />
    string b: <input type="text" value="" name="str_b" />
    <br />
    <br />
    <input type="submit" value="submit" />

</form>

<h2>
<?php 

    if(isset($_REQUEST["str_a"]) && isset($_REQUEST["str_b"])) { 

        print "string a = " . $str_a . " <br />string b = " . $str_b . " <br />percents match = " . $calculated . "%"; 

    }

?>
</h2> 
```

**这是现场示例：**
[http ://simplestudio.rs/yard/percent/percent.php](http://simplestudio.rs/yard/percent/percent.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:20:46.533

PHP中有一些语言函数可供您使用。

[http://php.net/manual/en/function.levenshtein.php](http://php.net/manual/en/function.levenshtein.php)

[http://www.php.net/manual/en/function.soundex.php](http://www.php.net/manual/en/function.soundex.php)

[http://www.php.net/manual/en/function.similar-text.php](http://www.php.net/manual/en/function.similar-text.php)

[http://www.php.net/manual/en/function.metaphone.php](http://www.php.net/manual/en/function.metaphone.php)

由于您的问题缺少有关唯一性标准的详细信息，因此您必须检查其中一项是否满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T00:38:09.020

您可以使用similar_text()

```
similar_text($string1,$string2,$percentage);
echo $percentage; 
```

[http://www.php.net/manual/en/function.similar-text.php](http://www.php.net/manual/en/function.similar-text.php)

如果您正在寻找性能关键的解决方案，那么您需要使用优化算法（在大多数情况下这是一个很好的解决方案）。

# android - 如何使用 setOnPreferenceChangeListener 进行 QuietlyCoding NumberPicker？

> ID：12737724
> 
> 赞同：3
> 
> 时间：2012-10-05T00:04:40.917
> 
> 标签：android, dialog

我想检测来自的值何时`NumberPicker`更改。我的上有这个代码`PreferenceActivity`：

```
public class MainPrefs extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.addPreferencesFromResource(R.xml.main_preferences);
        this.findPreference("SMSSentLimit").setOnPreferenceChangeListener(
            new OnPreferenceChangeListener() {

                @Override
                public boolean onPreferenceChange(Preference preference,
                        Object newValue) {
                    TrackerService.updateStats(Long.decode(newValue.toString()));
                    return true;
                }
            });
        this.findPreference("NumberPickerLimit").setOnPreferenceChangeListener(
            new Preference.OnPreferenceChangeListener() {

                @Override
                public boolean onPreferenceChange(Preference preference,
                        Object newValue) {
                    Log.i("onPreferenceChange", "NumberPicker Changed");
                    Toast.makeText(getBaseContext(), "CHANGEEEED !!!",
                        Toast.LENGTH_SHORT).show();
                    return true;
                }
            });
    }
} 
```

第二个 ( `findPreference("NumberPickerLimit")`) 是`NumberPicker`并且它永远不会被调用，如果我将其更改为`onPreferenceClickListener`它可以工作，但我会检测到当我单击首选项而不是当我更改值时。

根据源代码，它应该被称为：

```
public void onClick(DialogInterface dialog, int which) {
        switch (which) {
            case DialogInterface.BUTTON_POSITIVE:
                saveValue(mPicker.getCurrent());
                break;
            default:
                break;
        }
    }

private void saveValue(int val) {
    getEditor().putInt(getKey(), val).commit();
    notifyChanged();
} 
```

发生了什么？它是一个错误吗？

**编辑** 这是我的 XML：

```
<com.michaelnovakjr.numberpicker.NumberPickerPreference
            android:key="NumberPickerLimit"
            android:title="@string/NumberPickerTitle"
            android:summary="@string/NumberPickerSummary"
            picker:defaultValue="1"
            picker:startRange="1"
            picker:endRange="31" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:20:39.867

刚刚查看了您[在此处](https://stackoverflow.com/questions/12734221/how-to-use-numberpicker-from-quietlycoding-in-preferences/12734568#comment17205965_12734568)列出的 xml 文件，看起来您在`android:key="demo.preference"`那里。而在此处的代码中，您使用的是`findPreference("NumberPickerLimit")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T11:22:54.877

你必须自己打电话给听众。而不是`notifyChanged()`，请尝试`callChangeListener(val)`如下所示：

[`NumberPickerPreference`](https://code.google.com/p/standings/source/browse/trunk/trunk/com.michaelnovakjr.numberpicker.android/src/com/michaelnovakjr/numberpicker/NumberPickerPreference.java?r=8)

# php - SQL查询错误？

> ID：12737730
> 
> 赞同：0
> 
> 时间：2012-10-05T00:05:09.880
> 
> 标签：php, sql

我收到了这个错误，我不太明白为什么。我已经研究了几个小时了，试图通过研究来调查它，但没有运气。

在我的 PHP 登录系统中，我检查是否选择了该行：

```
//Start session
    session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

    //Prevent SQL injection.
    function clean($str) {
        $str = @trim($str);
        if(get_magic_quotes_gpc()) {
            $str = stripslashes($str);
        }
        return mysql_real_escape_string($str);
    }

    //Sanitize the POST values
    $login = clean($_POST['login']);
    $password = clean($_POST['password']);

    //Input Validations
    if($login == '') {
        $errmsg_arr[] = 'Login ID missing';
        $errflag = true;
    }
    if($password == '') {
        $errmsg_arr[] = 'Password missing';
        $errflag = true;
    }

    //If there are input validations, redirect back to the login form
    if($errflag) {
        $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
        session_write_close();
        echo "input validation";
        exit();
    }

    //Create query
    $qry="SELECT * FROM details WHERE USERNAME='$login' AND PASSWORD='".md5($_POST['password'])."'";
    $result=mysql_query($qry);

    //Check whether the query was successful or not
    if($result) {
        if(mysql_num_rows($result) == 1) {
            //Login Successful
            session_regenerate_id();
            $member = mysql_fetch_assoc($result);
            $_SESSION['MEMBER_ID'] = $member['USERNAME'];

            session_write_close();
            header("location: client-index.php");
            exit();
        }else {
            //Login failed
            echo "login failed?";
            exit();
        }
    }else {
        die("Query failed");
    }
?> 
```

无论出于何种原因，它都会呼应“失败”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:25:59.467

如果您告诉我们错误是什么，它可能会帮助我们更好地回答您的问题。

但无论如何，这显然是错误的做法。这个系统有很多严重的问题。

首先，你没有清理你的输入。由于您将数据和命令混合在一起，因此用户所要做的就是输入用户名“x' or 1 = 1' --”来进入系统。原因如下：SQL 服务器将获得的唯一命令是“SELECT * FROM details WHERE USERNAME = 'x' or 1 = 1”。换句话说，如果用户名是 x 或 1 = 1（它是），那么 SQL 服务器将响应一个肯定的结果。（“用户名”末尾的两个破折号表示 SQL 中的注释，因此查询中之后的所有内容都将被忽略）。

一个真正的恶意攻击者甚至可以通过输入用户名“x'--; DROP TABLES;' 对您的系统造成严重破坏，并且您的整个数据库都将消失。（请参阅[此漫画](http://xkcd.com/327/)了解我的来源。）

事实上，你甚至根本不应该真正使用 mysql_query。根据[PHP 文档](http://php.net/manual/en/function.mysql-query.php)：

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

如果我是你，我会更多地阅读这个主题。即使这只是为了练习，最好还是一开始就把事情做好。查看[PDO](http://php.net/manual/en/book.pdo.php)：它并不难学，但非常有用。它的主要优点是它不会混合数据和命令，因此您不会遇到同样的问题，即未经处理的输入会弄乱您的数据库。

此外，虽然很高兴看到您正在对您的密码进行哈希处理——而且您会惊讶于有多少公司应该更清楚地不这样做——MD5 不再被认为是加密安全的。获得所谓的“哈希冲突”相对容易，其中两个不同的明文产生相同的哈希。现在，SHA-256 应该是您使用的最低要求。

此外，关于散列，你应该添加一些叫做盐的东西。盐是您添加到明文中以进一步混淆它的某种随机文本。原因是那里有所谓的彩虹表。彩虹表是所有常见密码的预先计算的哈希列表。如果有人要获取您的数据库，他们可以将所有密码与彩虹表进行比较以找到它们的明文。

最后，为了减缓蛮力攻击——攻击者尝试所有字母数字组合直到他们获得密码——你还应该使用一个循环，其中哈希算法被重新计算 x 次，通常在 1000 到10000 次。PHP 的[crypt](http://php.net/manual/en/function.crypt.php)很好地做到了这一点。

顺便说一句：不要难过。我以前也做过所有这些事情。这就是为什么我知道你不应该这样做。别担心——你很快就会到达那里。坚持下去！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:49:31.130

我是网站新手，所以无法添加评论，也许这不会有太大帮助，但无论如何我都会试一试

在您的 sql 查询中，您似乎将变量 $login 作为文本而不是变量值传递

```
$qry="SELECT * FROM details WHERE USERNAME='$login' AND PASSWORD='".md5($_POST['password'])."'"; 
```

它应该是

```
$qry="SELECT * FROM details WHERE USERNAME=".$login." AND PASSWORD='".md5($_POST['password'])."'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T01:36:25.710

是查询失败还是登录失败？

无论如何，如果查询失败：尝试将您的查询更改为：用反引号包围您的字段（不是单引号）

```
$qry="SELECT * FROM details WHERE `USERNAME`='$login' AND `PASSWORD`='".md5($_POST['password'])."'"; 
```

如果登录失败：

```
if(mysql_num_rows($result) == 1) {
    //Login successful
}else {
    //Login failed
} 
```

你确定查询只会有 1 个结果吗？因为在这种情况下，如果 results 大于 1 它也将无法登录。

# php - 参考错误：未定义jw播放器

> ID：12737732
> 
> 赞同：0
> 
> 时间：2012-10-05T00:05:28.043
> 
> 标签：php, jquery, ajax, jwplayer, thickbox

我在thickbox 内显示jw 播放器并通过ajax 调用jwplayer 代码。当我调用它时，它显示没有 jwplayer 的厚框和错误控制台显示参考错误“jwplayer 未定义”错误。我使用的是 jquery 1.8。当我第二次调用它而不刷新页面时，它显示里面的视频jwplayer 和错误控制台显示没有错误。我正在使用以下代码。请让我知道如何修复它？

```
$.ajax {
    type: 'POST',
    url: 'modules/oneclickorder.php?divid=' + DIVID,
    success: function (data) {
        alert(data);
        $("#oneclickorder1").html(data);
        tb_show('Welcome', '#TB_inline?height=700&amp;width=550&inlineId=' + DIVID + '&modal=true', null);
    }
}) 
```

oneclickorder.php 页面代码

```
 echo '<div id="testvideo"  style="display:none";>
 <div id="playvideo" style="width:549px;height:550px; background-color:#FFF;"></div> 
<script type="text/javascript" src="https://www.markettrendsignal.com/js/jwplayer.js">   </script>
  <script type="text/javascript">
 jwplayer("playvideo").setup({
  flashplayer: "https://www.markettrendsignal.com/js/player.swf",
  file:"reversalpatternsplugin.flv",
        height: 330,
        provider: "rtmp",
        streamer: "rtmp://s2qwctg3okfahu.cloudfront.net/cfx/st",
        width: 550,
     autostart:true
    });
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T02:55:32.653

这样做是因为第一次执行脚本时没有加载 jwplayer 的 js 文件。

这是正在发生的事情的细分。

当您第一次调用 ajax 函数时，您会返回 HTML 代码，该代码将下载 .js 文件并执行 javascript 代码。问题是，它在文件加载之前执行代码。请记住，这是在注入 javascript... 没有 document.ready... 您已经通过了。

第二次调用该函数时它会起作用，因为 .js 文件已经加载（从第一次开始）。

**解决方法：**在主文档中添加js文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T13:23:03.270

```
plugins/content/jw_allvideos/jw_allvideos/includes/js/wmvplayer/silverlight.js 
```

复制所有代码
将编码更改为 ANSI
粘贴所有代码，然后保存。

# ios - iOS - 文件不包含 armv7s 切片

> ID：12737736
> 
> 赞同：5
> 
> 时间：2012-10-05T00:06:16.017
> 
> 标签：ios, xcode, architecture

我无法在设备上构建和测试，因为 Xcode 给了我这个错误：

```
ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /.../Classes/AddThis/libAddThis.a for architecture armv7s 
```

如何更新此库以支持 armv7s？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T00:27:36.107

尝试在 Project Build 设置中将 Build Active Architecture Only 设置为“YES”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T02:48:29.387

libAddThis.a 需要为 armv7s 架构构建。如果您无法控制这一点，那么您将需要像您一样从有效架构中删除 armv7s。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-30T09:01:39.300

我通过从构建设置更改有效架构来做到这一点。我附上屏幕截图以寻求帮助。

![在此处输入图像描述](../Images/d3cc00009ec38eeda125b0238cda1e29.png)

谢谢，cp

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T00:38:36.750

添加`armv7s`到库项目/目标的 Build Settings 中的 Valid Architectures 设置。

# python - Python 请求和持久会话

> ID：12737740
> 
> 赞同：154
> 
> 时间：2012-10-05T00:06:36.047
> 
> 标签：python, python-requests

我正在使用[requests](http://docs.python-requests.org/en/latest/)模块（版本 0.10.0 和 Python 2.5）。我已经弄清楚如何将数据提交到网站上的登录表单并检索会话密钥，但我看不到在后续请求中使用此会话密钥的明显方法。有人可以填写下面代码中的省略号或建议另一种方法吗？

```
>>> import requests
>>> login_data =  {'formPosted':'1', 'login_email':'me@example.com', 'password':'pw'}
>>> r = requests.post('https://localhost/login.py', login_data)
>>> 
>>> r.text
u'You are being redirected <a href="profilePage?_ck=1349394964">here</a>'
>>> r.cookies
{'session_id_myapp': '127-0-0-1-825ff22a-6ed1-453b-aebc-5d3cf2987065'}
>>> 
>>> r2 = requests.get('https://localhost/profile_data.json', ...) 
```

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-10-05T00:24:06.130

您可以使用以下方法轻松创建持久会话：

```
s = requests.Session() 
```

之后，继续您的请求：

```
s.post('https://localhost/login.py', login_data)
#logged in! cookies saved for future requests.
r2 = s.get('https://localhost/profile_data.json', ...)
#cookies sent automatically!
#do whatever, s will keep your cookies intact :) 
```

有关会话的更多信息：[https ://requests.kennethreitz.org/en/master/user/advanced/#session-objects](https://requests.kennethreitz.org/en/master/user/advanced/#session-objects)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-05-09T14:32:28.350

其他答案有助于了解如何维护这样的会话。此外，我想提供一个类，它可以在脚本的不同运行（带有缓存文件）中保持会话。这意味着仅在需要时才执行正确的“登录”（超时或缓存中不存在会话）。此外，它还支持对后续调用“get”或“post”的代理设置。

它是用 Python3 测试的。

将其用作您自己的代码的基础。以下片段随 GPL v3 一起发布

```
import pickle
import datetime
import os
from urllib.parse import urlparse
import requests    

class MyLoginSession:
    """
    a class which handles and saves login sessions. It also keeps track of proxy settings.
    It does also maintine a cache-file for restoring session data from earlier
    script executions.
    """
    def __init__(self,
                 loginUrl,
                 loginData,
                 loginTestUrl,
                 loginTestString,
                 sessionFileAppendix = '_session.dat',
                 maxSessionTimeSeconds = 30 * 60,
                 proxies = None,
                 userAgent = 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:40.0) Gecko/20100101 Firefox/40.1',
                 debug = True,
                 forceLogin = False,
                 **kwargs):
        """
        save some information needed to login the session

        you'll have to provide 'loginTestString' which will be looked for in the
        responses html to make sure, you've properly been logged in

        'proxies' is of format { 'https' : 'https://user:pass@server:port', 'http' : ...
        'loginData' will be sent as post data (dictionary of id : value).
        'maxSessionTimeSeconds' will be used to determine when to re-login.
        """
        urlData = urlparse(loginUrl)

        self.proxies = proxies
        self.loginData = loginData
        self.loginUrl = loginUrl
        self.loginTestUrl = loginTestUrl
        self.maxSessionTime = maxSessionTimeSeconds
        self.sessionFile = urlData.netloc + sessionFileAppendix
        self.userAgent = userAgent
        self.loginTestString = loginTestString
        self.debug = debug

        self.login(forceLogin, **kwargs)

    def modification_date(self, filename):
        """
        return last file modification date as datetime object
        """
        t = os.path.getmtime(filename)
        return datetime.datetime.fromtimestamp(t)

    def login(self, forceLogin = False, **kwargs):
        """
        login to a session. Try to read last saved session from cache file. If this fails
        do proper login. If the last cache access was too old, also perform a proper login.
        Always updates session cache file.
        """
        wasReadFromCache = False
        if self.debug:
            print('loading or generating session...')
        if os.path.exists(self.sessionFile) and not forceLogin:
            time = self.modification_date(self.sessionFile)         

            # only load if file less than 30 minutes old
            lastModification = (datetime.datetime.now() - time).seconds
            if lastModification < self.maxSessionTime:
                with open(self.sessionFile, "rb") as f:
                    self.session = pickle.load(f)
                    wasReadFromCache = True
                    if self.debug:
                        print("loaded session from cache (last access %ds ago) "
                              % lastModification)
        if not wasReadFromCache:
            self.session = requests.Session()
            self.session.headers.update({'user-agent' : self.userAgent})
            res = self.session.post(self.loginUrl, data = self.loginData, 
                                    proxies = self.proxies, **kwargs)

            if self.debug:
                print('created new session with login' )
            self.saveSessionToCache()

        # test login
        res = self.session.get(self.loginTestUrl)
        if res.text.lower().find(self.loginTestString.lower()) < 0:
            raise Exception("could not log into provided site '%s'"
                            " (did not find successful login string)"
                            % self.loginUrl)

    def saveSessionToCache(self):
        """
        save session to a cache file
        """
        # always save (to update timeout)
        with open(self.sessionFile, "wb") as f:
            pickle.dump(self.session, f)
            if self.debug:
                print('updated session cache-file %s' % self.sessionFile)

    def retrieveContent(self, url, method = "get", postData = None, **kwargs):
        """
        return the content of the url with respect to the session.

        If 'method' is not 'get', the url will be called with 'postData'
        as a post request.
        """
        if method == 'get':
            res = self.session.get(url , proxies = self.proxies, **kwargs)
        else:
            res = self.session.post(url , data = postData, proxies = self.proxies, **kwargs)

        # the session has been updated on the server, so also update in cache
        self.saveSessionToCache()            

        return res 
```

使用上述类的代码片段可能如下所示：

```
if __name__ == "__main__":
    # proxies = {'https' : 'https://user:pass@server:port',
    #           'http' : 'http://user:pass@server:port'}

    loginData = {'user' : 'usr',
                 'password' :  'pwd'}

    loginUrl = 'https://...'
    loginTestUrl = 'https://...'
    successStr = 'Hello Tom'
    s = MyLoginSession(loginUrl, loginData, loginTestUrl, successStr, 
                       #proxies = proxies
                       )

    res = s.retrieveContent('https://....')
    print(res.text)

    # if, for instance, login via JSON values required try this:
    s = MyLoginSession(loginUrl, None, loginTestUrl, successStr, 
                       #proxies = proxies,
                       json = loginData) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-05T00:26:37.683

在这个类似的问题中查看我的答案：

[python: urllib2 如何使用 urlopen 请求发送 cookie](https://stackoverflow.com/questions/3334809/python-urllib2-how-to-send-cookie-with-urlopen-request/8206372#8206372)

```
import urllib2
import urllib
from cookielib import CookieJar

cj = CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
# input-type values from the html form
formdata = { "username" : username, "password": password, "form-id" : "1234" }
data_encoded = urllib.urlencode(formdata)
response = opener.open("https://page.com/login.php", data_encoded)
content = response.read() 
```

编辑：

我看到我的回答遭到了一些反对，但没有任何解释性评论。我猜这是因为我指的是`urllib`库而不是`requests`. 我这样做是因为 OP 寻求帮助`requests`或有人提出另一种方法。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-05T00:17:24.953

该文档说，它`get`接受一个可选`cookies`参数，允许您指定要使用的 cookie：

来自文档：

```
>>> url = 'http://httpbin.org/cookies'
>>> cookies = dict(cookies_are='working')

>>> r = requests.get(url, cookies=cookies)
>>> r.text
'{"cookies": {"cookies_are": "working"}}' 
```

[http://docs.python-requests.org/en/latest/user/quickstart/#cookies](http://docs.python-requests.org/en/latest/user/quickstart/#cookies)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-12-13T22:55:22.210

在尝试了上述所有答案后，我发现使用“RequestsCookieJar”而不是常规 CookieJar 来处理后续请求解决了我的问题。

```
import requests
import json

# The Login URL
authUrl = 'https://whatever.com/login'

# The subsequent URL
testUrl = 'https://whatever.com/someEndpoint'

# Logout URL
testlogoutUrl = 'https://whatever.com/logout'

# Whatever you are posting
login_data =  {'formPosted':'1', 
               'login_email':'me@example.com', 
               'password':'pw'
               }

# The Authentication token or any other data that we will receive from the Authentication Request. 
token = ''

# Post the login Request
loginRequest = requests.post(authUrl, login_data)
print("{}".format(loginRequest.text))

# Save the request content to your variable. In this case I needed a field called token. 
token = str(json.loads(loginRequest.content)['token'])  # or ['access_token']
print("{}".format(token))

# Verify Successful login
print("{}".format(loginRequest.status_code))

# Create your Requests Cookie Jar for your subsequent requests and add the cookie
jar = requests.cookies.RequestsCookieJar()
jar.set('LWSSO_COOKIE_KEY', token)

# Execute your next request(s) with the Request Cookie Jar set
r = requests.get(testUrl, cookies=jar)
print("R.TEXT: {}".format(r.text))
print("R.STCD: {}".format(r.status_code))

# Execute your logout request(s) with the Request Cookie Jar set
r = requests.delete(testlogoutUrl, cookies=jar)
print("R.TEXT: {}".format(r.text))  # should show "Request Not Authorized"
print("R.STCD: {}".format(r.status_code))  # should show 401 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-03-29T09:57:26.093

检索 json 数据的片段，受密码保护

```
import requests

username = "my_user_name"
password = "my_super_secret"
url = "https://www.my_base_url.com"
the_page_i_want = "/my_json_data_page"

session = requests.Session()
# retrieve cookie value
resp = session.get(url+'/login')
csrf_token = resp.cookies['csrftoken']
# login, add referer
resp = session.post(url+"/login",
                  data={
                      'username': username,
                      'password': password,
                      'csrfmiddlewaretoken': csrf_token,
                      'next': the_page_i_want,
                  },
                  headers=dict(Referer=url+"/login"))
print(resp.json()) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-18T07:10:42.910

这将在 Python 中为您工作；

```
# Call JIRA API with HTTPBasicAuth
import json
import requests
from requests.auth import HTTPBasicAuth

JIRA_EMAIL = "****"
JIRA_TOKEN = "****"
BASE_URL = "https://****.atlassian.net"
API_URL = "/rest/api/3/serverInfo"

API_URL = BASE_URL+API_URL

BASIC_AUTH = HTTPBasicAuth(JIRA_EMAIL, JIRA_TOKEN)
HEADERS = {'Content-Type' : 'application/json;charset=iso-8859-1'}

response = requests.get(
    API_URL,
    headers=HEADERS,
    auth=BASIC_AUTH
)

print(json.dumps(json.loads(response.text), sort_keys=True, indent=4, separators=(",", ": "))) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-22T13:38:57.373

仅保存所需的 cookie 并重复使用它们。

```
import os
import pickle
from urllib.parse import urljoin, urlparse

login = 'my@email.com'
password = 'secret'
# Assuming two cookies are used for persistent login.
# (Find it by tracing the login process)
persistentCookieNames = ['sessionId', 'profileId']
URL = 'http://example.com'
urlData = urlparse(URL)
cookieFile = urlData.netloc + '.cookie'
signinUrl = urljoin(URL, "/signin")
with requests.Session() as session:
    try:
        with open(cookieFile, 'rb') as f:
            print("Loading cookies...")
            session.cookies.update(pickle.load(f))
    except Exception:
        # If could not load cookies from file, get the new ones by login in
        print("Login in...")
        post = session.post(
            signinUrl,
            data={
                'email': login,
                'password': password,
            }
        )
        try:
            with open(cookieFile, 'wb') as f:
                jar = requests.cookies.RequestsCookieJar()
                for cookie in session.cookies:
                    if cookie.name in persistentCookieNames:
                        jar.set_cookie(cookie)
                pickle.dump(jar, f)
        except Exception as e:
            os.remove(cookieFile)
            raise(e)
    MyPage = urljoin(URL, "/mypage")
    page = session.get(MyPage) 
```

# typescript - 如何在 TypeScript 中有条件地导入/导出库？

> ID：12737742
> 
> 赞同：1
> 
> 时间：2012-10-05T00:07:04.757
> 
> 标签：typescript

我有一个文件，我希望能够在使用 node.js 的服务器上以及在浏览器上使用它。

我使用这条线有条件地导入了一个外部库。在浏览器上，我假设 XRegExp 已经定义。

```
if (typeof require !== 'undefined') XRegExp = require('xregexp').XRegExp; 
```

我使用这一行有条件地导出了代码

```
if (typeof module !== 'undefined' && !module.exports) module.exports = ret; 
```

在没有编译器抱怨的情况下，我如何在 TypeScript 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:53:01.363

您可以尝试以下方法：

```
declare var require;
declare var XRegExp;
declare var ret;

if (typeof require !== 'undefined') XRegExp = require('xregexp').XRegExp;
if (typeof this.module !== 'undefined' && !this.module.exports) this.module.exports = ret; 
```

# entity-framework - 在 VS2012/EF5 中使用“迁移 T-SQL”方法无法获取“从模型生成数据库”。这是bug？？？在 VS2010 中运行良好

> ID：12737745
> 
> 赞同：0
> 
> 时间：2012-10-05T00:07:44.587
> 
> 标签：entity-framework, visual-studio-2012, entity-framework-5

我对 VS2012 和 EF5 有一个棘手的问题。我已在 MSDN 论坛上发布了完整的详细信息，请参阅：[http](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/c63bf034-f205-4b4e-82e0-40b1c3fca71d) ://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/c63bf034-f205-4b4e-82e0-40b1c3fca71d 。

然而，似乎 EF 团队现在建议我们也在这里发帖，所以我也是。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:09:23.207

如果这是 EF Designer Power Pack，则不支持。有关更多详细信息，请参见：http: [//entityframework.codeplex.com/workitem/499](http://entityframework.codeplex.com/workitem/499)

# c# - WPF DataGrid SelectedCellsChanged 获取“父 DataGrid 上的 SelectionUnit 属性的当前值阻止选择行。”

> ID：12737747
> 
> 赞同：6
> 
> 时间：2012-10-05T00:07:59.717
> 
> 标签：c#, wpf, datagrid

请帮助我，我正在使用“ [WPF 应用程序框架](http://waf.codeplex.com/)”和 EF Code First 编写应用程序。我正在尝试将选定行设置为绑定到 DataGrids SelectedItem 的 ViewModels 变量“SelectedRawMaterial”，并引发异常：“父 DataGrid 上 SelectionUnit 属性的当前值阻止选择行。”

```
private void rawMaterialTable_SelectedCellsChanged(object sender, SelectedCellsChangedEventArgs e)
    {
        DataGridCell cell = null;
        try
        {
            cell = DataGridHelper.GetCell(rawMaterialTable.SelectedCells[0]);
        }
        catch (Exception)
        { }

        if (cell != null)
        {
            int i = DataGridHelper.GetRowIndex(cell);
            try
            {

                RawMaterial rm = (RawMaterial)rawMaterialTable.Items[i];
                ViewModel.SelectedRawMaterial = rm;
            }
            catch (Exception) { }
        }
    }

public static class DataGridHelper
{
    public static DataGridCell GetCell(DataGridCellInfo dataGridCellInfo)
    {
        if (!dataGridCellInfo.IsValid)
        {
            return null;
        }

        var cellContent = dataGridCellInfo.Column.GetCellContent(dataGridCellInfo.Item);
        if (cellContent != null)
        {
            return (DataGridCell)cellContent.Parent;
        }
        else
        {
            return null;
        }
    }

    public static int GetRowIndex(DataGridCell dataGridCell)
    {
        // Use reflection to get DataGridCell.RowDataItem property value.
        PropertyInfo rowDataItemProperty = dataGridCell.GetType().GetProperty("RowDataItem",
                                                                              BindingFlags.Instance |
                                                                              BindingFlags.NonPublic);

        DataGrid dataGrid = GetDataGridFromChild(dataGridCell);

        return dataGrid.Items.IndexOf(rowDataItemProperty.GetValue(dataGridCell, null));
    }

    public static DataGrid GetDataGridFromChild(DependencyObject dataGridPart)
    {
        if (VisualTreeHelper.GetParent(dataGridPart) == null)
        {
            throw new NullReferenceException("Control is null.");
        }
        if (VisualTreeHelper.GetParent(dataGridPart) is DataGrid)
        {
            return (DataGrid)VisualTreeHelper.GetParent(dataGridPart);
        }
        else
        {
            return GetDataGridFromChild(VisualTreeHelper.GetParent(dataGridPart));
        }
    }
} 
```

在这个地方它会引发异常。

```
ViewModel.SelectedRawMaterial = rm; 
```

数据网格代码

```
<DataGrid x:Name="rawMaterialTable" ItemsSource="{Binding RawMaterials}" SelectedItem="{Binding SelectedRawMaterial}" 
              CanUserDeleteRows="False" BorderThickness="0" SelectionMode="Single" SelectionUnit="Cell" IsReadOnly="false"
              Grid.Row="1" Grid.Column="1" Margin="1,1,1,1" PreviewKeyDown="rawMaterialTable_PreviewKeyDown" SelectedCellsChanged="rawMaterialTable_SelectedCellsChanged" >
            <DataGrid.InputBindings>
                <KeyBinding Command="{Binding RemoveCommand}" Key="Del"/>
                <KeyBinding Command="{Binding AddCommand}" Key="Insert"/>
                <KeyBinding Command="{Binding EditCommand}" Key="F3"/>
            </DataGrid.InputBindings>

            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Code, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, 
                                  ValidatesOnExceptions=True, NotifyOnValidationError=True}" 
                                Header="{x:Static p:Resources.Code}" Width="60" ElementStyle="{StaticResource TextCellElementStyle}"
                                EditingElementStyle="{StaticResource TextCellEditingStyle}" DisplayIndex="0"/>

            </DataGrid.Columns>
        </DataGrid> 
```

我添加了 SelectionUnit="Cell" 因为我也想处理 CellKeyDown。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T00:43:44.443

这是因为您将数据网格的`SelectionUnit` [（请参阅属性的定义）](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectionunit.aspx)`Cell`属性设置为，并且我相信您正在尝试一次选择一行。

**已编辑：**如果您更改`SelectionUnit`为`CellOrRowHeader`允许选择单元格但绑定选择一整行

# ruby-on-rails - Heroku...推送而不影响长时间运行的方法

> ID：12737752
> 
> 赞同：0
> 
> 时间：2012-10-05T00:08:32.597
> 
> 标签：ruby-on-rails, heroku, upload

我在 rails/heroku 中有一个长期运行的导入方法。
我正在导入一个 10 兆的 csv，这需要一段时间..

当它运行时，我的一个同事更改了一个不相关的视图并执行了 git.push。

我的进口被杀了......

马上; 我可以告诉他在我运行导入时不要执行 git.push。我们有一个客户，所有的导入都是由开发团队完成的。

未来我们将在全球拥有数十个客户。我们无法控制他们何时选择进行导入。

所以我的问题是......其他人如何防止这样的事情发生？我如何确保正在运行的作业不会因为我想更改某些内容而被关闭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:30:54.047

这里的问题是您的导入方法不可靠。

Heroku 在收到推送时会杀死您的测功机。如果 Heroku 使用太多内存，或者如果它已经存在很长时间，或者如果他们正在重新平衡负载，或者如果您扩展该组中的进程数量，Heroku 也可能会杀死您的测功机。此外，该 EC2 实例可能会因各种原因而启动和死亡，包括电源、网络、存储和人为故障。

如果导入总是成功对您很重要，那么您需要适当地构建您的应用程序。将要导入的数据暂时放在 S3 中，以防收到上传的 dyno 被杀死。在您的数据库中输入一条记录，说明“这个东西需要导入”。导入时，以事务方式导入，因此导入完全成功或完全失败。

工作量很大吗？也许，也许不是，取决于您选择的工具。( [Sidekiq](http://sidekiq.org/)通常对我来说很容易。）但是，这是您唯一真正的选择。

旧的思想是确保您的基础设施永远不会出现故障，从而导致具有多重冗余光纤通道上行链路的 SAN 到多重冗余交换机再到多重冗余存储阵列。这导致了热插拔 CPU、[用于 RAM 的 RAID](http://www.intel.com/Assets/PDF/whitepaper/323479.pdf)和其他 Enterprise Features™。但事实证明，即使你完成了所有这些，你的基础设施仍然失败。

新学派认识到失败是不可避免的。忘记所有花哨的东西：大量购买商品硬件，并构建您的应用程序以容忍故障。这就是 EC2 模型，这就是 Heroku 模型。相应地设计。

# c# - 将大型 csv 文件插入数据库

> ID：12737753
> 
> 赞同：1
> 
> 时间：2012-10-05T00:08:32.990
> 
> 标签：c#, asp.net, file-upload, csv

我们在网络上有一个应用程序，它必须允许用户上传带有邮政编码的文件，这些文件是 .csv 的文件。任何用户都可以从他们的计算机上传文件，问题是文件可能包含数千条记录。现在我正在获取文件，确保它具有正确的标题，但我正在将记录一一推送到数据库中。

我正在使用 c# asp.net，有没有更好的方法来做到这一点？从代码中更有效？我们不能使用任何外部导入器或数据导入器或 sql server 商业智能等工具。我该怎么做？，我正在阅读有关将其放入内存然后将其推送到数据库的内容？任何网址、示例或建议将不胜感激。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:28:04.317

如果这包含多达一百万条记录，最好的做法是创建一个服务来管理将记录插入数据库以避免超时并防止 web iis 压力。

如果您将其设为 Windows 服务，您可以通知该服务处理上传它的某个目录中的 zip 文件。

另外，我建议使用批量插入来进行更快的数据库事务。

如果有验证，您可能可以将数据暂存到不同的数据库中并验证数据，然后推送到最终数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:47:39.193

首先，我很确定您要问的实际上是*“您如何处理大文件并将处理后的数据插入数据库？”* .

现在假设我是对的，我会说这个问题类似于“一根绳子有多长？”。现实情况是，将大文件处理到数据库中的实现高度特定于您的要求。

但是，在最简单的一端，您可以简单地将文件直接上传到表（或文件夹）中，并创建一个[Windows 服务](http://msdn.microsoft.com/en-us/library/d56de412%28v=vs.80%29.aspx)，该服务每 x 分钟运行一次，遍历表，选择每个文件并使用批量插入和处理数据[prepare 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.prepare.aspx)（这可能会给您带来一些性能优势）。

或者，您可以查看[MSMQ（Microsoft 消息队列）](http://en.wikipedia.org/wiki/Microsoft_Message_Queuing)之类的东西并将任何上传的文件直接保存到队列中，然后该队列完全独立于您的应用程序，并且可以在任何时间点进行处理，并且可以轻松扩展。

但归根结底，老实说，我认为这里的任何人都无法为您的问题提供“正确”的答案，因为实际上没有答案，您只能通过实验找到对实施的改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T00:57:36.383

由于这些记录在同一个表中，因此不会相互关联，因此[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)在这里可能是一个有效的答案。假设您有一个将单个记录插入数据库的静态方法（可能不一定是静态的），您可以在数组上运行[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)循环，其中数组的每个索引代表 CSV 的一行。

这假设将大文件上传到服务器不是最初的问题。如果这也是问题的一部分，我建议压缩文件，然后在上传后使用[SharpZipLib之类的东西解压缩。](http://www.icsharpcode.net/opensource/sharpziplib/)由于文本压缩得非常好，从用户的角度来看，这可能是对性能的最大好处。

# php - 如何在发布页面之前获取所选下拉列表的值

> ID：12737756
> 
> 赞同：0
> 
> 时间：2012-10-05T00:08:37.033
> 
> 标签：php, jquery, codeigniter

```
<?php 

$options = array(
                  500  => 500,
                  1000 => 1000,
                  2500 => 2500,
                  5000 => 5000,
                );

echo form_dropdown('units',$options);

?>

$db_num = 25; # a random number
$post_num = $set_num * (units-selected) 
```

单击提交时，如何将单位下拉列表的选定值与我的值相乘`$db_num`？我认为这可能需要javascript，但没有可能吗？

在我的控制器上，我尝试了这个：

```
$db_num = $this->input->post('db_num');
$units = $this->input->post('units');

$answer = $db_num * $units;

...

echo $answer; 
```

（结果没有错误也没有插入。我做错了什么？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:11:33.007

使用php implode函数存储和explode函数显示

$itm= $_POST['hospital_department']; $comma_separated = implode("-", $itm);

```
$data['hospital_department']            = $comma_separated; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:39:45.713

需要将传递我的变量的数据库字段设置为`INT`- 问题已解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T00:19:24.903

就像是 ：

```
<form ... onsubmit="return functionwhereyouwilldothemath(this)" >
</form>

<script type="text/javascript">
function functionwhereyouwilldothemath(el) { //el = javascript form object
    var db_num = <?=$db_num?>; //yup this is legit.
     //do your math
    return true; //will cause the page to reload uppon submit.
}
</script> 
```

# javascript - 寻找基于 JS 的 CSS 自动补全

> ID：12737757
> 
> 赞同：1
> 
> 时间：2012-10-05T00:08:46.290
> 
> 标签：javascript, css, editor

我正在开发一个浏览器内的 CSS 编辑器。我有一个语法荧光笔，但我正在寻找一个基于 JS 的库来帮助格式化并提供一些智能感知。

语法高亮是 CodeMirror，[http ://codemirror.net/](http://codemirror.net/)

任何有关智能感知的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:15:37.747

CodeMirror 有一个例子（使用 control+space）——http: [//codemirror.net/demo/complete.html](http://codemirror.net/demo/complete.html)

[这个维基百科页面](http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors#List_of_features)显示了哪些 javascript IDE 支持“代码建议”

# java - 如何在 Java 中将 InputStream 转换为字符串到字节数组？

> ID：12737760
> 
> 赞同：1
> 
> 时间：2012-10-05T00:09:27.453
> 
> 标签：java, string, bytearray, inputstream

在我的 java 服务器上，我从 iOS 客户端获得一个 InputStream，如下所示：

```
--0xKhTmLbOuNdArY
Content-Disposition: form-data; filename="Image001"
Content-Type: image/png

âPNG
IHDR���@���@���™iqﬁ���gAMA��Ø»7äÈ���tEXtSoftware�Adobe ImageReadyq…e<��IDATx⁄‰;iê]Uôﬂπ˜Ω◊Ø;ΩB::õY
ê6LÄ“Õ¿
... etc. ...
≠Yy<‘_˜øüYmc˚æØ…ægﬂóÏK$å±çe0ˆΩleIë¢êH¢Tñê–Üd
≠≤§àä6D¸>˙÷˜˚<øÁ˘˝˜˚º^sÁ=Áû{ÓπÁ‹œπ˜úÄÎ:!44¡@
--0xKhTmLbOuNdArY-- 
```

第一行和最后一行是我的 HTTP 边界。第 2 行和第 3 行是有关图像文件的信息。从第 5 行到倒数第二行，有我需要的图像文件作为字节数组。

**那么如何从 InputStream 中获取字符串形式的图像信息和字节数组形式的图像文件呢？** 解决方案应该快速高效（文件大小可以是几兆字节/< 10 MB）。

*我的做法：*

我将 InputStream 转换为字符串，然后将其拆分并将第二个字符串转换为字节数组...

```
String str = org.apache.commons.io.IOUtils.toString( inputStream );
String[] strArray1 = str.split( "\r\n\r\n", 2 );
byte[] bytes = strArray1[1].getBytes(); 
```

这种方式非常快，但是字节数组似乎损坏了。我无法从该字节数组创建图像文件...某些字符转换不正确。

也许有人可以帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:14:38.407

您的代码中断的原因是第一行：

```
String str = org.apache.commons.io.IOUtils.toString( inputStream ); 
```

尝试将随机字节转换为 Unicode 字符，然后再转换回相同的随机字节，是行不通的。

完成这项工作的唯一方法是分阶段读取输入，而不是将其全部读入字符串。

1.  从 InputStream 中读取，直到您确信您已超过 HTTP 边界线。
2.  将流的其余部分读入一个字节数组（您也可以使用`IOUtils`它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:18:48.070

您可能不想将您的转换`bytes`为`char`和转换回来，这会破坏您的字节，因为字节流不对应于任何编码。

我会将整个内容作为`byte[]`using读取，然后在该数组中`IOUtils.toByteArray`查找字节序列。`"\r\n\r\n".getBytes()`

请注意，`IOUtils.toByteArray`直到流结束才停止。这对于 HTTP 1.0 应该没问题，但对于可以在同一流上发送多个请求的 HTTP 1.1 会中断。在这种情况下，您必须逐步阅读才能找到该`Content-Length`字段，以便知道要阅读多少`InputStream`内容。

# c++ - 取消引用无符号字符指针并将其值存储到字符串中

> ID：12737761
> 
> 赞同：0
> 
> 时间：2012-10-05T00:09:47.157
> 
> 标签：c++, c, string, pointers, casting

所以我正在开发一个取消引用某些地址值的工具，它在 C 和 C++ 中都有，虽然我不熟悉 C++，但我发现我可能可以利用 C++ 提供的字符串类型。

我所拥有的是：

```
unsigned char contents_address = 0; 
unsigned char * address = (unsigned char *) add.addr;
int i;

for(i = 0; i < bytesize; i++){     //bytesize can be anything from 1 to whatever
  if(add.num == 3){
    contents_address = *(address + i); 
    //printf("%02x ", contents_address);
  }
} 
```

如您所见，我要做的是取消引用 unsigned char 指针。我想要做的是有一个字符串变量并将所有取消引用的值连接到它最后而不是必须通过一个 for case 来获取每个元素（通过拥有一个字符数组或只是去通过指针）拥有一个包含所有内容的字符串变量。

注意：我需要这样做，因为字符串变量将进入 MySQL 数据库，将数组插入表中会很痛苦......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:14:36.467

我不太明白您想在这里做什么（为什么要将取消引用的值分配给名为 ..._address 的变量）？

但也许你正在寻找的是一个字符串流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:21:05.823

试试我从这个链接借来的这个：

[http://www.corsix.org/content/algorithmic-stdstring-creation](http://www.corsix.org/content/algorithmic-stdstring-creation)

```
#include <sstream>
#include <iomanip>

std::string hexifyChar(int c)
{
  std::stringstream ss;
  ss << std::hex << std::setw(2) << std::setfill('0') << c;
  return ss.str();
}

std::string hexify(const char* base, size_t len)
{
  std::stringstream ss;
  for(size_t i = 0; i < len; ++i)
    ss << hexifyChar(base[i]);
  return ss.str();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T01:08:40.530

Here's a relatively efficient version that performs only one allocation and no additional function calls:

```
#include <string>

std::string hexify(unsigned char buf, unsigned int len)
{
    std::string result;
    result.reserve(2 * len);

    static char const alphabet[] = "0123456789ABCDEF";

    for (unsigned int i = 0; i != len)
    {
        result.push_back(alphabet[buf[i] / 16]);
        result.push_back(alphabet[buf[i] % 16]);
    {

    return result;
} 
```

This should be rather more efficient than using iostreams. You can also modify this trivially to write into a given output buffer, if you prefer a C version which leaves allocation to the consumer.

# excel - MDX：Drillthough 没有过滤掉行

> ID：12737763
> 
> 赞同：1
> 
> 时间：2012-10-05T00:10:03.583
> 
> 标签：excel, ssas, mdx, olap

我有一个正在构建的钻取，我想在其中过滤同一层次结构的两个成员：

```
 DRILLTHROUGH MAXROWS 1000 SELECT FROM 
(
  SELECT (
  { [Product].[Product Exclusion Reason].[Product Exclusion Reason].&[6],[Product].[Product Exclusion Reason].[Product Exclusion Reason].&[1] } ) ON COLUMNS
  FROM [Sales]
 )
 WHERE ([Fiscal Date].[Yr-Qtr-Mo].[Year].&[2013]) 
```

子选择似乎没有过滤掉这些行。如果我改为在 where 子句中添加一个条件：

```
 DRILLTHROUGH MAXROWS 1000 SELECT FROM 
(
  SELECT (
  { [Product].[Product Exclusion Reason].[Product Exclusion Reason].&[6],[Product].[Product Exclusion Reason].[Product Exclusion Reason].&[1] } ) ON COLUMNS
  FROM [Sales]
 )
 WHERE ([Fiscal Date].[Yr-Qtr-Mo].[Year].&[2013], 
```

[产品].[产品排除原因].[产品排除原因].&[1])

这将按预期过滤数据。但是，我想`[Product].[Product Exclusion Reason].[Product Exclusion Reason]`在我的过滤中包含多个成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:29:02.103

您是否尝试过这样的查询？

```
DRILLTHROUGH MAXROWS 1000
  SELECT { [Fiscal Date].[Yr-Qtr-Mo].[Year].&[2013] } ON COLUMNS
  FROM [Sales]
  WHERE { [Product].[Product Exclusion Reason].[Product Exclusion Reason].&[6],[Product].[Product Exclusion Reason].[Product Exclusion Reason].&[1] } 
```

# .net - 将 Amazon SES 消息序列化为字符串

> ID：12737770
> 
> 赞同：0
> 
> 时间：2012-10-05T00:11:00.930
> 
> 标签：.net, email, amazon-ses

我正在使用 Amazon .Net sdk 通过他们的 SES 服务发送电子邮件。但是，出于某些本地日志记录和调试目的，我想将消息序列化为字符串。有没有办法使用 sdk 来做到这一点，或者我需要破解其他东西吗？

我说的不仅仅是邮件正文，而是一个字符串，其中包含整个电子邮件的内容，包括标题等。

# java - 随机数生成器继续包含 0

> ID：12737776
> 
> 赞同：0
> 
> 时间：2012-10-05T00:13:16.317
> 
> 标签：java, random, numbers

我试图用随机数填充一个数组，以便在二进制搜索中进行排序和使用。除了生成部分之外，我所有的代码似乎都可以正常工作。数字需要在 1-32767 之间，我继续得到 0。

```
for(int i = 0; i < SIZE-1; i++){
   array[i] = (gen.nextInt(32767 - 1) + 1);
}

// Print out five entries
for(int i = 0; i < 5; i++){
   System.out.println(array[i]);
}

// Sort array
Arrays.sort(array);

// Print out first five sorted entries
for(int i = 0; i < 5; i++){
   System.out.println(array[i]);
} 
```

在它们被排序和打印之后，第一个条目总是 0。也许这与数组排序有关，我没有意识到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T00:16:22.550

你永远不会设置数组的最后一个元素——使用`i < SIZE`，而不是`i < SIZE-1`。

# r - R 波浪号运算符：~0+a 是什么意思？

> ID：12737783
> 
> 赞同：5
> 
> 时间：2012-10-05T00:14:34.267
> 
> 标签：r

我已经看到如何在公式中使用 ~ 运算符。例如`y~x`意味着：y 分布为 x。

但是我真的很困惑`~0+a`这段代码的含义：

```
require(limma)
a = factor(1:3)
model.matrix(~0+a) 
```

为什么只是`model.matrix(a)`不起作用？为什么结果与`model.matrix(~a)`不同`model.matrix(~0+a)`？最后，这里的 ~ 运算符是什么意思？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T00:21:44.750

`~`创建一个公式 - 它将公式的右侧和左侧分开

从`?`~``

> 波浪号用于分隔模型公式中的左侧和右侧

引用公式的帮助

> 例如，通过 lm 和 glm 函数拟合的模型以紧凑的符号形式指定。~ 运算符是形成此类模型的基础。y ~ model 形式的表达式被解释为响应 y 由模型符号指定的线性预测器建模的规范。这样的模型由一系列由 + 运算符分隔的术语组成。术语本身由变量和因子名称组成，由 : 运算符分隔。这样的术语被解释为该术语中出现的所有变量和因素的相互作用。
> 
> 除了 + 和 : 之外，许多其他运算符在模型公式中也很有用。* 运算符表示因子交叉：a*b 解释为 a+b+a:b。^ 运算符表示交叉到指定的度数。例如 (a+b+c)^2 与 (a+b+c)*(a+b+c) 相同，后者又扩展为包含 a、b 和 c 的主效应及其第二个效应的公式-订单交互。%in% 运算符表示其左侧的术语嵌套在右侧的术语中。例如 a + b %in% a 扩展为公式 a + a:b。- 运算符删除指定的项，因此 (a+b+c)^2 - a:b 与 a + b + c + b:c + a:c 相同。它也可以用来去除截距项：当拟合线性模型时，y ~ x - 1 指定一条通过原点的线。没有截距的模型也可以指定为 y ~ x + 0 或 y ~ 0 + x。

### 所以关于具体问题`~a+0`

*   您创建一个没有截距的模型矩阵。作为`a`一个因素，`model.matrix(~a)`将返回一个拦截列`a1`（您需要`n-1`指标来完全指定`n`类）

每个功能的帮助文件都写得很好，详细且易于查找！

# 为什么`model.matrix(a)`不起作用

`model.matrix(a)`不起作用，因为`a`它是一个`factor`变量，而不是公式或术语对象

从帮助`model.matrix`

> **object** 适当类的对象。对于默认方法，模型公式或术语对象。

`R`正在寻找特定类别的对象，通过传递一个公式`~a`，您正在传递一个属于 class 的对象`formula`。`model.matrix(terms(~a))`也可以工作，（传递与公式对应的术语对象`~a`

* * *

### 一般说明

@BenBolker 在他的评论中很有帮助地指出，这是 Wilkinson-Rogers 符号的修改版本。

[R 简介中](http://cran.r-project.org/doc/manuals/R-intro.html#Formulae-for-statistical-models)有一个很好的描述。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T00:56:41.760

看了几本手册后，我对 o 的含义感到困惑，`model.matrix(~0+x)`直到最近我才发现[了这个优秀的书籍章节](http://users.monash.edu.au/~murray/stats/BIO4200/LinearModels.pdf)。

在数学`0+a`上等于`a`和写一个词like`0+a`是很奇怪的。然而，我们在这里处理的是线性模型：一个简单的高中方程，例如`y=ax+b`揭示预测变量 (x) 和观察值 (y) 之间的关系。

因此，我们可以认为`~0+x`或同样`~x+0`是以下形式的方程：`y=ax+b`。通过添加`0`我们强制`b`为零，这意味着我们正在寻找一条通过原点的线（无截距）。如果我们指定一个类似`~x+1`或只是的模型`~x`，则拟合方程可能包含一个非零项`b`。同样，我们可以`b`通过一个公式进行限制，`~x-1`或者`~-1+x`两者都意味着：没有截距（就像我们通过负索引排除 R 中的行或列一样）。然而像`~x-2`or这样的东西`~x+3`是没有意义的。

Thanking @mnel for the useful comment, finally what's the reason to use `~` and not `=`? In standard mathematical terminology / symbology `y~x` denotes that y is equivalent to x, it is somewhat weaker that `y=x`. When you are fitting a linear model, you aren't really saying `y=x`, but more that you can model y as a linear function of x (`y = ax+b` for example)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T00:21:14.527

为了回答您的部分问题，波浪号用于分隔模型公式中的左侧和右侧。请参阅`?"~"`以获取更多帮助。

# amazon-s3 - 查询 EBS 支持的实例 + S3 上的备份 + 快照

> ID：12737784
> 
> 赞同：0
> 
> 时间：2012-10-05T00:14:35.857
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services

我花了几天时间研究在 Amazon 上安装两台 Windows 服务器、一台域控制器和一台远程桌面服务服务器，但有几个问题我找不到详细的或任何答案：

1）当您有一个 EBS 支持的实例时，我假设这意味着所有文件（操作系统/应用程序/页面文件）等都存储在 EBS 上？物理上在数据中心，假设我有 50 gig 的操作系统文件/应用程序数据等，这些都存储在一个 SAN 类型的设备上吗？如果该设备爆炸或说特定数据中心被破坏会发生什么。数据在别处吗？您的整个 EBS 卷消失的概率是多少？

2）据我了解，您可以通过快照将 EBS 实例备份到 S3。我假设您可以选择拍摄快照的频率（比如每天？）。在我上面的场景中，如果我有 50 个文件，并且每天快照一次。超过 7 天，我的 S3 存储将是 350 gig，还是会是 50 gig + 我在一周内所做的增量更改？

3）我记得在某处读到实例必须离线才能快照。如果是这种情况，它是通过关闭来宾操作系统、快照然后启动来做到这一点的，还是只是分离数据，阻止您在快照时连接，然后将其恢复到快照之前的确切时刻.

4) 我理解每月为每演出空间付费的概念，但我对每 100 万个 I/O 请求 0.11 美元的担忧有多大。当我运行 Windows 服务器时，它是如何工作的？我不知道服务器对其磁盘发出了多少 I/O 请求。我假设很多整个 VM 都存储在 EBS 卷上。在标准 EBS 上运行服务器会从根本上降低它的速度吗？

5) 人们是否使用 S3 的快照作为他们的主要备份？人们是否正在为数据运行其他类型的备份？

对于菜鸟问题​​，我很抱歉 - 我很感激任何人可以提供给我的任何部分答案、答案或建议。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:23:16.807

1）亚马逊对此很模糊。他们说数据在它所属的 AZ 内复制，如果自上次快照以来更改的数据少于 20GB，那么您的年故障率约为 0.1-0.4%

2) 快照是手动触发的，并且是增量完成的

3）取决于您的文件系统。例如，在带有 xfs 卷的 linux 机器上，您可以将 IO 冻结到该卷，进行快照（只需一秒钟左右）然后解冻。如果您在不执行类似操作的情况下拍摄快照，您将面临数据处于不一致状态的风险。这将取决于您的文件系统

4) 我在 EBS 上运行我的所有实例。您可能不希望您的页面文件在 EBS 上，为此使用实例存储会更有意义。您使用的 IO 数量将在很大程度上取决于工作负载。IO 计数在很大程度上取决于您的工作负载 - 例如，应用程序服务器执行的 IOPS 比数据库服务器少得多。如果您正在运行特别繁重的 IO 操作，则每个卷每月使用的费用不太可能超过几美元

5) 就我个人而言，我并不关心已安装的软件/配置（我有所有设置的 AMI，所以我可以在几分钟内恢复它），我只关心数据。我单独备份这些数据（S3 和 Glacier）。部分原因是我被 EBS 大约一年前的一个错误所困扰，他们丢失了一些快照

正如 Fantius 评论的那样，您还使用多种策略。例如，在我运行的 mongodb 服务器上，启动卷很小（并且从未快照或备份，因为它可以从 AMI 自动恢复），具有包含实际 mongodb 数据的单独数据卷。mongodb 卷被快照并在 S3 上存储转储。快照是创建备份的一种有效方式（因为您只存储增量更改）但是您不能将它们转移出您的 EC2 区域，而 S3 上的 tarball 可以轻松地复制到任何地方。

# ruby - 获取加载时添加的内容

> ID：12737792
> 
> 赞同：1
> 
> 时间：2012-10-05T00:15:03.733
> 
> 标签：ruby, load

有没有办法获取加载外部 ruby​​ 文件时添加或重新定义的所有常量（包括模块和类）及其方法和类或实例变量的列表（数组）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:40:40.800

这应该可以解决问题：

```
def all_constants_with_methods
  constants = Object.constants.map { |sym| Object.const_get sym }
  Hash[constants.map { |constant| [constant, (constant.instance_methods rescue [])] }]
end

before = all_constants_with_methods
load foo.rb
after = all_constants_with_methods

constants_added = after.keys - before.keys
methods_added = Hash[after.keys.map do |c|
                       [c, after[c] - (before[c] || [])]
                     end.reject do |_, v|
                       v.empty?
                     end] 
```

不过，我无法知道方法是否被重新定义。您可以轻松地将其扩展为类变量（使用`class_variables`）和类实例变量（使用`instance_variables`）。

# java - 无法使用 Jersey 客户端过滤器覆盖响应标头

> ID：12737795
> 
> 赞同：4
> 
> 时间：2012-10-05T00:15:33.173
> 
> 标签：java, jersey

我正在尝试使用 Jersey 客户端 API 来使用第三方 REST 服务。我计划使用自动 POJO 反序列化从 JSON 响应转到 Java 对象。

不幸的是，第三方服务使用 content type 返回响应`"text/javascript"`。我的 Jersey 客户端无法理解这应该被视为 JSON 对象并且无法反序列化该对象。

我编写了一个简单的 Jersey 服务器应用程序，通过将内容类型更改为反序列化工作来验证这`"text/javascript"`一点`"application/json"`。

有了这些信息，我开始使用 Jersey 客户端过滤器来修改响应标头。代码来自[这个问题](https://stackoverflow.com/a/7464585/1212960)的作者的评论。事实上，这个问题似乎和我的完全一样——但是回答者错误地回答了这个问题，并展示了如何修改*请求*标头（而不是*响应*标头）。原作者能够使用答案来创建他的解决方案，但是，他陈述的解决方案似乎无法正常工作。

过滤器代码为：

```
client.addFilter(new ClientFilter() {
  @Override public ClientResponse handle(ClientRequest cr) 
      throws ClientHandlerException {
    ClientResponse response = getNext().handle(cr); 
    response.getHeaders().putSingle(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON); 
    return response;
  }
}); 
```

然而，当执行时，`UnsupportedOperationException`会引发 an：

```
Exception in thread "main" java.lang.UnsupportedOperationException
at java.util.Collections$UnmodifiableCollection.clear(Collections.java:1035)
at com.sun.jersey.core.util.StringKeyIgnoreCaseMultivaluedMap.putSingle(StringKeyIgnoreCaseMultivaluedMap.java:78)
at com.sun.jersey.core.util.StringKeyIgnoreCaseMultivaluedMap.putSingle(StringKeyIgnoreCaseMultivaluedMap.java:56)
at App$1.handle(App.java:49)
at com.sun.jersey.api.client.Client.handle(Client.java:648)
at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)
at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:507)
at App.main(App.java:63) 
```

返回的标头似乎包含在不可修改的集合中。

然后我尝试将所有标头复制到一个新集合中，但是我看不到将标头映射*设置*回响应中。

最后，我想也许我可以创建一个`ClientResponse`包含修改后的标题的新标题。但是，构造函数`ClientResponse`具有以下签名：

```
public ClientResponse(int status, 
                      InBoundHeaders headers, 
                      InputStream entity, 
                      MessageBodyWorkers workers) 
```

从原始复制`status`,`headers`和变量是微不足道的。`entity`但是，我看不出获得对该`workers`领域的引用。

如何使用 Jersey 客户端过滤器将响应标头从`"text/javascript"`to修改，`"application/json"`以便我的 POJO 反序列化可以工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-24T15:57:13.847

在 Jersey 2 中，使用 ClientConfig 注册[ClientResponseFilter](https://jax-rs-spec.java.net/nonav/2.0/apidocs/javax/ws/rs/client/ClientResponseFilter.html)的实现，以便操作传入响应的 HTTP 标头。

例如，这似乎适用于 Jersey 2.3.1 来处理 HTTP 标头：

```
import javax.ws.rs.client.Client;
import javax.ws.rs.client.ClientBuilder;
import javax.ws.rs.client.ClientResponseContext;
import javax.ws.rs.client.ClientResponseFilter;
import javax.ws.rs.client.ClientRequestContext;

import org.glassfish.jersey.client.ClientConfig;

/* Ensure that there is an "application/xml" Content-Type header on
 * successful responses without a content type header. */
@Provider
public static class EnsureXmlContentTypeFilter implements ClientResponseFilter {
    @Override
    public void filter(ClientRequestContext requestContext,
                       ClientResponseContext responseContext) {
        if (200 == responseContext.getStatus() &&
            null == responseContext.getHeaderString(HttpHeaders.CONTENT_TYPE)) {

            responseContext.getHeaders().add(
                HttpHeaders.CONTENT_TYPE, "application/xml"
            );

        }
    }
}

private final ClientConfig config = new ClientConfig()
    // Registering this filter adds a "Content-Type: application/xml" 
    // header to each response that lacks Content-Type headers.
    .register(EnsureXmlContentTypeFilter.class)
;
private final Client client = ClientBuilder.newClient(config); 
```

关于过滤器和拦截器的 Jersey 文档并不完美，但它确实有一些指向相关类的 javadocs 的链接：[https ://jersey.java.net/documentation/latest/filters-and-interceptors.html](https://jersey.java.net/documentation/latest/filters-and-interceptors.html)

我从响应 XML 内容的服务获取 XML 响应，但缺少“Content-Type: application/xml”标头。可能更好的方法是注册 MessageBodyReaders，但上述方法在我使用该服务的 API 时有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T02:07:13.447

对于您的真正问题，我没有答案，但我想我知道如果您想尝试在过滤器中创建新响应，您如何获得该工人实例。

您需要的“工人”对象似乎是一个单例。如果您可以获取您的 com.sun.jersey.api.client.Client 实例，则可以检索工作人员对象。在我的例子中，Jersey 客户端代码在一个单元测试中，该单元测试是 JerseyTest 的子类。JerseyTest 定义了一个返回 Client 对象的方法“client()”。我添加了以下测试代码（不完全是，但很接近）：

```
 MessageBodyWorkers workers = client().getMessageBodyWorkers(); 
```

然后我在 ClientResponse 的构造函数中设置了一个断点（这是 Jersey 返回的原始 ClientResponse。我没有尝试克隆它，因为我不需要进行测试）。传递给构造函数的工人是同一个实例。因此，即使您无法从响应对象中获取workers 对象，您也应该能够在其他地方获取它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T00:50:04.000

[Guido 的回答](https://stackoverflow.com/a/12738559/1212960)提供了创建新`ClientResponse`对象并将其返回所需的洞察力。由于我还没有费心追查的原因，创建一个新`InboundHeaders`的`UnsupportedOperationException`. 因此，为了重写标头，我们迭代原始标头并迭代构建正确的集合：

```
final Client client = Client.create(clientConfig);
client.addFilter(new ClientFilter()
{
  @Override
  public ClientResponse handle(ClientRequest cr) throws ClientHandlerException
  {
    final ClientResponse response = getNext().handle(cr); 
    final InBoundHeaders headers = new InBoundHeaders();

    for (String header : response.getHeaders().keySet())
    {
      if (header.equals(HttpHeaders.CONTENT_TYPE))
      {
        headers.putSingle(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON); 
      }
      else
      {
        headers.put(header, headers.get(header));
      }
    }

    return new ClientResponse(response.getStatus(),
                              headers,
                              response.getEntityInputStream(),
                              client.getMessageBodyWorkers());
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-17T18:40:35.263

在 Jersey 2 中，您应该使用`ClientResponseFilter`. 然后你就可以打电话了`responseContext.getHeaders().putSingle(...)`。

在 Java 8 下，您可以使用 lambda 来完成：

```
client.register((ClientResponseFilter) (requestContext, responseContext) ->
                responseContext.getHeaders().putSingle("Content-Type", "application/json")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-17T18:48:57.423

如果您想重用现有的过滤器*实例*，只需将其注册到`Client`而不是`ClientConfig`.

[旧方式（Jersey-1.9）](https://blogs.oracle.com/enterprisetechtips/entry/consuming_restful_web_services_with)：

```
 import com.sun.jersey.api.client.Client;
     import com.sun.jersey.api.client.filter.HTTPBasicAuthFilter;

     Client client = new Client();
     client.addFilter(new HTTPBasicAuthFilter(username, password)); 
```

新方式（Jersey-2.3）：

```
 import javax.ws.rs.client.Client;
     import javax.ws.rs.client.ClientBuilder;
     import org.glassfish.jersey.client.filter.HttpBasicAuthFilter;

     Client client = ClientBuilder.newClient();
     client.register(new HttpBasicAuthFilter(username, password)); 
```

这不是[最好的解决方案](https://jersey.java.net/documentation/latest/filters-and-interceptors.html)，但它可以帮助您迁移。

# python - python代码错误？

> ID：12737797
> 
> 赞同：0
> 
> 时间：2012-10-05T00:15:36.300
> 
> 标签：python

```
from sys import argv

script, first, second, third = argv 
```

输入第二行后，我收到此错误：

> Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 ValueError 中：需要超过 1 个值才能解压

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:18:18.353

`sys.argv`是脚本的命令行参数。您的错误表明您尝试解压缩的变量数超过元组中的条目数，即 1。

您要么没有传递足够的参数，要么正在从解释器运行命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T09:35:01.637

```
from sys import argv
a, b, c, d = argv
print "The script is called:", a
print "Your first variable is:", b
print "Your second variable is:", c
print "Your third variable is:", d 
```

将此代码另存为：s.py

从终端运行此文件，如下所示： [![在此处输入图像描述](../Images/b41d9853ae7a45c7fa8851bb48475c89.png)](https://i.stack.imgur.com/qZXjL.png)

# ruby-on-rails - Rails：获取“城市唯一的用户”的国家（或任何其他）属性

> ID：12737800
> 
> 赞同：0
> 
> 时间：2012-10-05T00:15:37.260
> 
> 标签：ruby-on-rails, arrays, activerecord, hash

我正在尝试列出我的用户来自的独特城市及其国家/地区，如下所示：

```
United States - Boston
United States - New York
United States - San Francisco
United Kingdom - London
United Kingdom - Manchester
France - Paris
France - Lyon 
```

（有很多用户来自同一个地方）

（城市和国家只是用户模型中使用反向地理编码填充的字段）

我可以使用这个将城市列表放入一个数组中

```
User.pluck(:city).uniq 
```

但是如何将每个用户记录中的国家/地区名称添加到数组/哈希中，这样我就可以像上面那样构建我的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:26:19.860

我认为应该这样做：

```
User.select("country, city").uniq 
```

这应该返回一个对象数组，`User`其中只有`country`和`city`被填充。然后你可以把它映射成你需要的东西，即：

```
User.select("country, city").uniq.map { |u| "#{u.country} - #{u.city}" } 
```

例如...

**更新**

回答您的评论：是的，您可以像这样添加所需的 lat 和 lng 字段：

```
# remember afterwards to only access the fields you're actively selecting here,
# otherwise you'll get an exception
@users = User.select("country, city, lat, lng").uniq.map { |u| { country: u.country, city: u.city, lat: u.lat, lng: u.lng } } 
```

为了便于使用，向`User`模型添加一个方法，该方法根据需要返回一个字符串，即：

```
def country_city
  "#{country} - #{city}"
end 
```

在您的视图中，您可以使用[`collection_select`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)辅助方法仅使用您想要的字段（通过使用模型中的新方法）进行选择，但在哈希数组中仍然有`lat`and字段。`lng`

```
collection_select(:name_of_view_instance, :name_of_select_field, @users, :id, :country_city) 
```

这将为您提供如下 HTML 输出：

```
<select name="name_of_view_instance[name_of_select_field]">
  <option value="1" selected="selected">United States - Boston</option>
  <option value="2">United States - New York</option>
  <option value="3">United States - San Francisco</option>
  <!-- and so on -->
</select> 
```

请参阅上面链接中的帮助方法的文档。

# jquery - 使用 foreach 循环打印所有结果

> ID：12737801
> 
> 赞同：3
> 
> 时间：2012-10-05T00:16:01.987
> 
> 标签：jquery

我是 jQuery 新手，我陷入了每个循环。

我正在尝试从带有对象的变量中获取值，当我使用 打印它时`alert()`，我得到了所有结果。

但是，当我尝试将其打印到 HTML 时，在这种情况下，我只会将最后一个结果打印到 HTML 而不是 3。

```
$.each(playlist, function(index, item) {
    alert(item.title);
    $('.playlist1').text(item.title);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T00:17:43.470

实际上，您并没有被困在`.each()`循环中，而是被困在`.text()`.

`.text()`用新文本替换当前文本，因此在这种情况下您只会看到最后一个文本。

也许使用`.append()`.

您也可以`.text()`以这种方式使用：

```
$('.playlist1').text(function(index, text){
  return text + item.title;
}); 
```

假设`.playlist1`是`ul`or `ol`，您可以像这样附加到它：

```
$('.playlist1').append('<li>'+item.title+'</li>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T00:20:45.090

您需要使用该`append`功能而不是`text`：

```
$('.playlist1').append(item.title); 
```

`text()`用新内容替换元素的内容。 `append()`将新内容附加到元素的现有内容。

**更新**

要将每个项目添加为列表项，请执行以下操作：

```
$('.playlist1').append('<li>' + item.title + '</li>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T00:20:53.527

使用alert会中断脚本的执行，考虑使用console.log()

```
console.log(item.title); 
```

each 循环的迭代很像 foreach，在这种情况下，i 是迭代器，item 是值

```
$.each(playlist, function (i, item) { 
```

当您迭代时，您将每个带有“class=playlist1”的元素的文本设置为`item.title`.

```
 $('.playlist1').text(item.title);
}); 
```

虽然语法上没有错，但有一个逻辑错误。也许你可以试试这个：

```
var fulltext = [];//initialize empty array
$.each(playlist, function (i, item) {
 fulltext.push(item.title);//iterate through playlist and collect titles
}); 
$('.playlist1').text(fulltext.join(" "));//join array with titles with a blank space
                                         //and put them in class playlist1 
```

您可以对列表项执行此操作：

```
var ul = document.createElement("ul");
$.each(playlist, function (i, item) {
 var thisLi = document.createElement("li");
 thisLi.innerHTML = item;
 ul.appendChild(thisLi);
}); 
$('.playlist1').append(ul); 
```

# objective-c - 将 (NSString *) 转换为 (int *)？

> ID：12737809
> 
> 赞同：1
> 
> 时间：2012-10-05T00:16:37.877
> 
> 标签：objective-c, pointers, casting, struct, nsstring

我有一个 NSString。

```
NSString *str; 
```

我需要将它存储在一个结构中。

```
struct {
  int *s;
} st; 
```

并设置它。

```
st.s = str; 
```

那么，我应该如何去找回它呢？

```
return (__bridge_retained NSString *)st.s; 
```

我已经尝试了上述方法，它给出了错误： Incompatible types cast 'int *' to 'NSString *' with a __bridge_retained cast。

* * *

回答了问题。只需像这样在结构中定义 NSString 。

```
struct {
  __unsafe_unretained NSString *s;
} st; 
```

谢谢，卡尔维泽！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:36:24.540

要将 Objective-C 对象存储在其中，`struct`您有几个选择，我看到最多的一个是将其存储在 struct as 中`__unsafe_unretained`，然后`strong`在其他地方维护对它的引用。

来自[ARC 过渡说明的“转换项目时的常见问题”部分](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW16)：

> 如果使用 Objective-C 对象是次优的，（也许你想要这些结构的密集数组）然后考虑使用 void* 代替。这需要使用显式强制转换......

他们似乎暗示`__bridge`这是一种投射方式`void *`，`id`但对此并不是 100% 清楚。

另一种选择，这对我个人来说更有意义，而且我经常看到我认为：

> 将对象引用标记为 __unsafe_unretained。...您将结构声明为：`struct x { NSString * __unsafe_unretained S; int X; }`

希望这可以帮助！

# c - memcpy 使用指向全局数据的本地指针

> ID：12737810
> 
> 赞同：0
> 
> 时间：2012-10-05T00:16:51.460
> 
> 标签：c, pointers, data-structures, global-variables

我有一个名为 xbar 的全局结构。我调用其中的 3 个，然后将一个本地指针传递给一个函数，在该函数中它被分配给全局函数内的一个短数组。但是当我尝试使用 memcpy 复制指向的数据时，我得到一个“异常”错误。

```
typedef struct s_xbar
{
    short close[390][9000];
} xbar;
xbar *Xbar;

void assignPtr(short *qdata)
{
    qdata = Xbar[0].close[0];
}

void mycode( void )
{
    Xbar      =  (xbar  *)  calloc( 3,  sizeof(xbar));  

    short *qdata = NULL;
    assignPtr(qdata);

    short dataBarToFill[500];
    memcpy(dataBarToFill, qdata, 90 *  sizeof(short));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:20:25.380

那是因为在`assignPtr()`你只分配`Xbar[0].close[0]`了一个指针的*本地副本*`qdata`。`assignPtr()`返回后， `qdata`in`mycode()`仍然为 NULL。您应该像下面这样传递指针到指针：

```
void assignPtr(short **qdata)
{
    *qdata = Xbar[0].close[0];
}

void mycode( void )
{
    Xbar      =  (xbar  *)  calloc( 3,  sizeof(xbar));  

    short *qdata = NULL;
    assignPtr(&qdata);

    short dataBarToFill[500];
    memcpy(dataBarToFill, qdata, 90 *  sizeof(short));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T00:19:58.690

C 是一种按值传递的语言，因此您应该传递的地址`qdata`：

```
void assignPtr(short **qdata)
{
    *qdata = Xbar[0].close[0];
}

void mycode( void )
{
    Xbar      =  (xbar  *)  calloc( 3,  sizeof(xbar));  

    short *qdata = NULL;
    assignPtr(&qdata);
    // ...
} 
```

# spring - Spring inside war 无法在内部 jar 文件中找到类路径资源

> ID：12737811
> 
> 赞同：10
> 
> 时间：2012-10-05T00:17:14.563
> 
> 标签：spring, tomcat, classpath, war

我有一个这样组织的项目：

```
core
  -- /src/main/resources/company/config/spring-config.xml
webapp
  -- /WEB-INF/applicationContext.xml 
```

webapp 依赖于，它在我部署时`core.jar`正确包含。`WEB-INF/lib`

在`web.xml`我有：

```
<param-value>
    /WEB-INF/applicationContext.xml
</param-value> 
```

在`applicationContext.xml`我有：

```
<import resource="classpath:/company/config/spring-config.xml" /> 
```

但是当我运行时，我得到了这个错误：

```
2012-10-04 20:03:39,156 [localhost-startStop-1] springframework.web.context.ContextLoader ERROR: Context initialization failed
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from URL location [classpath:/company/config/spring-config.xml]
Offending resource: ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [company/config/spring-config.xml]; nested exception is java.io.FileNotFoundException: class path resource [company/config/spring-config.xml] cannot be opened because it does not exist
    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
....
Caused by: java.io.FileNotFoundException: class path resource [company/config/spring-config.xml] cannot be opened because it does not exist
    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:142)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
... 36 more 
```

当`spring-config.xml`在 webapp 中时，一切正常。

我注意到堆栈跟踪上的一些错误中删除了前导`/`，我想知道这是否与它有关。

另外，我（不幸的是）使用 Spring 2.5，如果这很重要的话。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T00:42:52.510

为了将来参考，经过多次调试，我发现了问题所在。事实证明 Eclipse 正在将我的“核心”库构建为 jar，但具有 Web 应用程序包布局，因此我的资源不是位于此处：

```
/company/config/spring-config.xml 
```

它位于此处：

```
/WEB-INF/company/config/spring-config.xml 
```

这导致了问题。我之前已经检查了几次罐子，但从未注意到隐藏在视线中的鬼鬼祟祟的“/WEB-INF”。

删除项目并将其重新导入 Eclipse（通过 Maven pom.xml 文件）不足以解决问题。

我不得不手动删除特定于 Eclipse 的 .project、.classpath 和 .settings 文件。当我这样做并重新导入项目时，一切都已修复。

本课的寓意是：当异常显示“未找到文件”时，请**始终检查您的资源路径。**

# javascript - jQuery Mobile 水平选择框

> ID：12737816
> 
> 赞同：2
> 
> 时间：2012-10-05T00:17:28.673
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我一直在努力让它正常工作。我正在尝试通过此页面在我的移动网站上使水平分组的选择输入工作：

[http://jquerymobile.com/demos/1.0/docs/forms/selects/](http://jquerymobile.com/demos/1.0/docs/forms/selects/)

现在我的选择框看起来像这样：

![在此处输入图像描述](../Images/b82d9837a76c4fad4f2ca328626813fd.png)

但是当我查看示例时，它看起来像这样：

![在此处输入图像描述](../Images/5c8014dd74116e9d750472e0bff5a0a1.png)

我的 HTML 如下所示：

```
 <fieldset data-role="controlgroup" data-type="horizontal"> 
    <select name="select-choice-month" id="select-choice-month">
        <option>M</option>
        <option value="January">January</option>
        <option value="February">February</option>
        <option value="March">March</option>
        <option value="April">April</option>
        <option value="May">May</option>
        <option value="June">June</option>
        <option value="July">July</option>
        <option value="August">August</option>
        <option value="September">September</option>
        <option value="October">October</option>
        <option value="November">November</option>
        <option value="December">December</option>
    </select>
    <select name="select-choice-day" id="select-choice-day">
        <option>D</option>
        <?php while($c < 32) {
            echo '<option value="'.$c.'">'.$c.'</option>';
            $c++;
        } ?>
    </select>
    <select name="select-choice-year" id="select-choice-year">
        <option>Y</option>
        <option value="2012">2012</option>
        <option value="2013">2013</option>
        <option value="2014">2014</option>
    </select>
</fieldset> 
```

我的包含脚本如下所示：

```
<link rel="stylesheet"  href="//code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
<script src="//code.jquery.com/jquery-1.6.4.js"></script>
<script src="//code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script> 
```

我已经尝试完全复制和粘贴示例，但我仍然得到垂直而不是水平，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T03:00:51.163

好的。所以多玩一些，我让选择选项按你的意愿工作。这些是我的变化：

```
<meta name="viewport" content="width=device-width, initial-scale=0.9"> 
```

**请记住，该`initial-scale`值将根据页面和设计的宽度而变化。**

然后我改变了选择选项如下：

```
<div data-role="fieldcontain">
    <div data-role="controlgroup" data-type="horizontal">
        <select name="select-choice-month" id="select-choice-month" data-mini="true">
        <option>Month</option>
        <option value="jan">January</option>
        <!-- etc. -->
        </select>

        <select name="select-choice-day" id="select-choice-day" data-mini="true">
        <option>Day</option>
        <option value="1">1</option>
        <!-- etc. -->
        </select>

        <select name="select-choice-year" id="select-choice-year" data-mini="true">
        <option>Year</option>
        <option value="2011">2011</option>
        <!-- etc. -->
        </select>
    </div>
</div> 
```

出于某种奇怪的原因，`legend`在包装内添加标签`controlgroup`会破坏设计。不知道这算不算bug。如果您想要下拉菜单的标题，则可以执行以下操作：

```
<div data-role="controlgroup" data-type="horizontal">
    <div style="font-weight: bold;">Date of Birth</div> 
```

这些更改在我的 iPhone4、HTC One 和 iPad 上对我有用（iPad 上有更多的空间，所以它总是可以工作的。但无论如何都在那里进行了测试）。

# ios - 云存储服务的 iOS 应用被拒绝（因为未提供应用内购买进行订阅）

> ID：12737817
> 
> 赞同：3
> 
> 时间：2012-10-05T00:17:34.977
> 
> 标签：ios, app-store, appstore-approval

我们是一家提供云存储的初创公司（[www.zapdrive.com](http://www.zapdrive.com)）。我们的 iOS 应用被拒绝了，给出的理由是 App Store Review Guidelines 第 11.12 条，其中明确规定：

> “提供订阅的应用程序必须使用 IAP，Apple 将按照开发者计划许可协议中的规定，与开发者分享这些购买的相同 70/30 的收入分成。”

请注意，我们不提供应用程序内的任何订阅。我们在应用程序中没有任何将用户带到任何外部网站的链接或按钮。这是一个非常基本的应用程序，可以让用户查看他们存储在“ZapDrive”中的文件。要查看应用的外观，您可以在[Google Play 商店中查看](https://play.google.com/store/apps/details?id=com.zapdrive.android)

我们看到的可能接近违反上述规则的一件事是，在应用程序的第一页（即登录屏幕）上，我们有一条文字说：

```
"Don't have a ZapDrive Account? Go to www.zapdrive.com to sign up for a FREE account" 
```

但是，上述行只是纯文本，并没有“链接”到 actuak 网站。

此外，拒绝通知说：

> 虽然您的应用程序可能旨在增强现有订阅者的体验，但指南 11.14 中指定的内容除外，如果订阅的产品在应用程序内使用，则必须使用 IAP 在应用程序中提供订阅。

请注意，我们不销售任何内容，或提供对任何内容的订阅。用户已经拥有该内容，并将其复制到他们的“ZapDrive”中。该应用程序允许他们查看/流式传输所述内容。

虽然，Apple 表示，仅仅因为其他应用程序正在这样做，并不意味着您也可以这样做。尽管如此，许多其他应用程序（DropBox、Google Drive、Box 等）提供订阅服务，但不提供 IAP。

谁能告诉我们，我们是如何违反 App Store 指南的？我们可以做些什么来使其兼容？是登录屏幕上的文本导致了这种违规行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:20:33.627

我的猜测是链接。kindle 应用程序中是否有链接？Dropbox 有吗？我不这么认为...取出链接并重新提交，看看会发生什么。或者你可以向苹果询问更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:27:00.920

您的问题不是编程问题。没有比苹果自己更好的地方来问这个问题了。所有 iTunesConnect 拒绝都有一个相应的文本框，您可以与他们专门就该拒绝票进行交流。

# c# - 如何将 System.Data.SqlClient.SqlConnection 转换为 CrystalDecisions.Shared.ConnectionInfo

> ID：12737819
> 
> 赞同：1
> 
> 时间：2012-10-05T00:17:40.263
> 
> 标签：c#, crystal-reports, connection-string

如何将 System.Data.SqlClient.SqlConnection 转换为 CrystalDecisions.Shared.ConnectionInfo

有可能吗？请有人帮忙解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:50:59.567

根据[MSDN for ConnectionInfo](http://msdn.microsoft.com/en-us/library/ms226300%28v=vs.80%29.aspx)， ConnectionInfo 对象就是它所声明的，有关连接的信息。 [SqlConnection](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)用于建立与数据库的连接。

SqlConnection 具有创建 ConnectionInfo 对象所需的信息。具体来说， [DataSource](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.datasource.aspx)、 [Database](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.database.aspx)和 [Credential](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.credential.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:11:00.767

Why can't you create a new CrystalDecisions.Shared.ConnectionInfo object and set it's properties equal to the corresponding property on the SqlConnection?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-09T09:30:26.707

发现自己处于类似情况，解决方案不是将sqlconnection本身转换为connectioninfo，而是使用连接字符串。以下使用 SqlConnectionStringBuilder 的代码就是这样做的：

```
ConnectionInfo connection = new ConnectionInfo();

string connectionString = ConfigurationManager.ConnectionStrings["_2Focus.Properties.Settings._2ServeConnection"].ConnectionString;
SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder(connectionString);
connection.ServerName = builder.DataSource;
connection.DatabaseName = builder.InitialCatalog;
connection.IntegratedSecurity = builder.IntegratedSecurity;
if (!builder.IntegratedSecurity)
{
    connection.Password = builder.Password;
    connection.UserID = builder.UserID;
}

Tables CrTables = report.Database.Tables 
foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
{
    CrTable.LogOnInfo.ConnectionInfo = connection;
    CrTable.ApplyLogOnInfo(CrTable.LogOnInfo);
} 
```

这个问题太老了，操作没有很多点，所以可能不会被标记为答案。无论如何，我认为这是正确的做法。

# flash - 嵌入式 Flash 破坏了内联块

> ID：12737821
> 
> 赞同：1
> 
> 时间：2012-10-05T00:17:48.687
> 
> 标签：flash, css

我在嵌入式闪存搞乱内联块时遇到了麻烦。水平行中有 3 个 div，但是当我将这个 flash 对象放在第一个中时，其他 2 个会下降约 15px。第一个 div 保持在它应该的位置，但我无法弄清楚其他 2 发生了什么。我使用“objecty”进行嵌入，但与其他代码有相同的+更多问题，也减少了对象的宽度和高度没有效果。任何帮助将不胜感激。干杯，

```
#nb_designblankleft_portfolio
{
border: 0;
margin: 0;
padding: 0;
width: 200px;
height: 40px;
display: inline-block;
text-align: center;
line-height: 40px;
background-color: #ffffff;
background-image: url("media/buttons/bwbrs.gif");
font-family: Arial;
color: rgb(0, 0, 0);
font-weight: bold;
font-size: 13pt;
zoom: 1;
*display: inline;
_height: 40px; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:23:11.993

显然，您所缺少的只是一个简单的 float 属性，当 div 用作列时这是必须的。

```
#nb_designblankleft_portfolio {
    border: 0;
    margin: 0;
    padding: 0;
    width: 200px;
    display: inline-block;
    text-align: center;
    height: 40px;
    line-height: 40px;
    background-color: white;
    background-image: url("media/buttons/bwbrs.gif");
    font-family: Arial;
    color: black;
    font-weight: bold;
    font-size: 13pt;
    zoom: 1;
    _height: 40px;
    float: left;    //add this exact line to #nb_designportfolio_portfolio and #nb_designblankright_portfolio
 } 
```

# css - Superfish 第一级：保持悬停属性

> ID：12737825
> 
> 赞同：1
> 
> 时间：2012-10-05T00:18:19.707
> 
> 标签：css, superfish

问题： [http ://themeforward.com/demo2/](http://themeforward.com/demo2/)

当我将鼠标悬停在菜单项上并开始将鼠标悬停在子菜单上时，父链接（即“模板”）在悬停时会丢失归因于它的属性。我希望它保持这些属性。我已经尝试了许多变体来实现这一点，但一直无法做到。我*认为*这是可以通过带有 Superfish 的 CSS 实现的，并且我只是使用了不正确的类。

我的CSS： [http ://snippi.com/s/hv7m288](http://snippi.com/s/hv7m288)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T00:33:52.367

这是因为悬停事件附加到`<a>`，但子菜单是 的子菜单`<li>`。因此，将悬停添加到`<li>`将修复它。

**编辑** 这是一个小提琴[http://jsfiddle.net/7kYF6/](http://jsfiddle.net/7kYF6/)

我改变了这个

```
.sf-menu a:focus, .sf-menu a:hover, .sf-menu a:active {
    color:#868E98!important;
    background:#3C4751
} 
```

对此，它对我有用

```
.sf-menu a:focus, .sf-menu a:hover, .sf-menu a:active, .sf-menu li:hover a {
    color:#868E98!important;
    background:#3C4751
} 
```

# javascript - JavaScript console.log 执行顺序？

> ID：12737826
> 
> 赞同：3
> 
> 时间：2012-10-05T00:18:23.913
> 
> 标签：javascript, console, execution

我的代码看起来像这样：

```
function pathfind (start,end,map)
{
    this.Init = function ()
    {
       this.open_node = new Array();
       this.open_node.push(start);
       console.log(this.open_node);
       this.Loop();
    }
    this.Loop = function ()
    {
       //Some code here
    }
    this.Init();
} 
```

出于某种原因，当我将“开始”推送到 this.open_node 并记录它的值时，我得到“未定义”。但是，经过一些错误测试后，我意识到注释掉 this.Loop(); 在 this.Init 中，push 正常运行，console.log 按原样返回 [start]。谁能解释为什么会发生这种行为？

编辑：我打电话

```
pathfind({x:2,y:2},{x:24,y:24},parsemap(25,25)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T00:40:19.600

经过进一步研究，我发现 console.log 不会立即在 Chrome 中执行。因此，过时的报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:33:01.647

您的代码执行`pathfind`返回的函数`undefined`（应该是这种方式），但您等待`this.Init`函数的结果。应该可能执行它而不是`pathfind`.

# user-interface - Javafx textfield resize to text length?

> ID：12737829
> 
> 赞同：8
> 
> 时间：2012-10-05T00:18:38.103
> 
> 标签：user-interface, javafx, textfield

Hello guys I am building a chat server where I use a textfield on the screen to type in the chat message that the user writes, the idea is that it works like a bubble over a persons head when he types a message.

my question is in order to not make a textbox that is too large or too small is there a way to make the textbox resize (trim if you will) so it adjust to the text written in the textfield?

P.S. I'm using JavaFx scenebuilder to do all of this.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-04T08:08:42.640

You can use `computeTextWidth` method in the `com.sun.javafx.scene.control.skin.Utils`. the method is used in `javafx.scene.control.Label` class to calculate the minimum width for label content.

I solved my problem as below:

```
field.textProperty().addListener(new ChangeListener<String>() {
        @Override
        public void changed(ObservableValue<? extends String> ob, String o,
                String n) {
            // expand the textfield
            field.setPrefWidth(TextUtils.computeTextWidth(field.getFont(),
                    field.getText(), 0.0D) + 10);
        }
    }); 
```

I have added a listener to `textProperty`, and with every text change i change the `prefWidth` of textfield.

Note: as long as the `Utils.computeTextWidth()` is **not public**, I have copied the source code to a new class (`TextUtils`).

Here is the full source code:

```
package me.jone30rw.fxcontrol;

import javafx.scene.text.Font;
import javafx.scene.text.Text;
import javafx.scene.text.TextBoundsType;

public class TextUtils {

    static final Text helper;
    static final double DEFAULT_WRAPPING_WIDTH;
    static final double DEFAULT_LINE_SPACING;
    static final String DEFAULT_TEXT;
    static final TextBoundsType DEFAULT_BOUNDS_TYPE;
    static {
        helper = new Text();
        DEFAULT_WRAPPING_WIDTH = helper.getWrappingWidth();
        DEFAULT_LINE_SPACING = helper.getLineSpacing();
        DEFAULT_TEXT = helper.getText();
        DEFAULT_BOUNDS_TYPE = helper.getBoundsType();
    }

    public static double computeTextWidth(Font font, String text, double help0) {
        // Toolkit.getToolkit().getFontLoader().computeStringWidth(field.getText(),
        // field.getFont());

        helper.setText(text);
        helper.setFont(font);

        helper.setWrappingWidth(0.0D);
        helper.setLineSpacing(0.0D);
        double d = Math.min(helper.prefWidth(-1.0D), help0);
        helper.setWrappingWidth((int) Math.ceil(d));
        d = Math.ceil(helper.getLayoutBounds().getWidth());

        helper.setWrappingWidth(DEFAULT_WRAPPING_WIDTH);
        helper.setLineSpacing(DEFAULT_LINE_SPACING);
        helper.setText(DEFAULT_TEXT);
        return d;
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-03T11:57:24.380

In JavaFX 8, there is a solution for that, here is the code:

```
TextField tf = new TextField();
// Set Max and Min Width to PREF_SIZE so that the TextField is always PREF
tf.setMinWidth(Region.USE_PREF_SIZE);
tf.setMaxWidth(Region.USE_PREF_SIZE);
tf.textProperty().addListener((ov, prevText, currText) -> {
    // Do this in a Platform.runLater because of Textfield has no padding at first time and so on
    Platform.runLater(() -> {
        Text text = new Text(currText);
        text.setFont(tf.getFont()); // Set the same font, so the size is the same
        double width = text.getLayoutBounds().getWidth() // This big is the Text in the TextField
                + tf.getPadding().getLeft() + tf.getPadding().getRight() // Add the padding of the TextField
                + 2d; // Add some spacing
        tf.setPrefWidth(width); // Set the width
        tf.positionCaret(tf.getCaretPosition()); // If you remove this line, it flashes a little bit
    });
});
tf.setText("Hello World!"); 
```

*   In JavaFX 2.2 this code works with little limitations. You can't set the Font(so if you do not use the std-font, you must set it manually).
*   You can't get the padding from a TextField(so if you know the padding, write it hardcoded).

Happy Coding,
Kalasch

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-08T11:46:56.987

Since JavaFX 8, this is by far the simplest:

```
textField.prefColumnCountProperty().bind(textField.textProperty().length()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-05T13:35:33.193

It is time to do some coding behind the scenes(builder) :).
The following code chunk is not a neat solution but better than none. :)

```
// define width limits
textField.setMinWidth(50);
textField.setPrefWidth(50);
textField.setMaxWidth(400);
// add listner
textField.textProperty().addListener(new ChangeListener<String>() {
    @Override
    public void changed(ObservableValue<? extends String> observable, String oldValue, String newValue) {
        textField.setPrefWidth(textField.getText().length() * 7); // why 7? Totally trial number.
    }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-26T13:22:47.550

No font dependent magic required if you use setPrefColumnCount

```
 tf.textProperty().addListener(new ChangeListener<String>() {
            @Override
            public void changed(ObservableValue<? extends String> ob, String o, String n) {
                tf.setPrefColumnCount(tf.getText().length() +1);
            }
        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-25T13:43:12.290

The best / easiest way to do this is to use JavaFX's "USE_COMPUTED_SIZE" option. You can either define it in the FXML, or programatically like this:

```
TextField textField = new TextField("hello");
textField.setPrefWidth(Control.USE_COMPUTED_SIZE); 
```

# java - Eclipse：保存服务器响应并在服务器（数据源）出现故障时返回它们

> ID：12737838
> 
> 赞同：1
> 
> 时间：2012-10-05T00:19:59.740
> 
> 标签：java, eclipse

是否有一些 Eclipse 插件或其他一些非 Eclipse 工具可以充当我的开发环境和我的数据源之间的代理，以保存来自服务器的所有响应，并在数据源出现故障时将这些保存的响应返回给我？

编辑：这里的目标不仅仅是保存响应，而且在我的数据源出现故障时充当我的数据源，因此我可以继续开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:25:01.753

尝试在您的程序中记录诸如 log4j 或 slf4j 之类的 API 以记录您与服务器之间的通信，这样您就可以保存数据直到通信中断。例如

```
public static Logger log = Logger.getLogger("YOURLOG"); 
```

然后

```
log.debug(<request-sent>);
log.debug(<response-received>); 
```

# ios - 识别哪个地区是什么iOS

> ID：12737854
> 
> 赞同：1
> 
> 时间：2012-10-05T00:21:39.813
> 
> 标签：ios, xcode, cllocationmanager, cllocation

我有一个关于`CLLocationManager`和的问题`CLRegions`。假设我希望用户选择一些地区并在他们到达或离开时添加提醒，例如 Apple 的应用程序。

我的问题是，如果我将 CLRegion 的标识符设置为“离开”而其他人设置为“到达”，如果我有两个以上具有相同标识符的区域，它将被覆盖吗？

我是否必须将此位置存储在 coreData 中，以便我可以管理应用程序的添加或删除功能，因为`monitoredRegions`不允许删除？

谢谢

# jquery - 即使使用 stop() 也会建立 JQuery 动画

> ID：12737857
> 
> 赞同：0
> 
> 时间：2012-10-05T00:21:48.343
> 
> 标签：jquery, jquery-animate

我正在组合一个特色内容滑块元素，虽然技术上一切正常，但是当快速单击导航按钮时，我仍然会遇到动画构建。这是我的代码：

```
this.LRSliderScrollVert = function(j) {
    var viewOutside = GetObject(this.sliderObjectId);
    if (parseInt(viewOutside.style.top) == 1 && j == 1){
        //do nothing
    } else if (parseInt(viewOutside.style.top) == this.sliderBottomLimit && j == -1) {

    } else {
        //viewOutside.style.top = parseInt(viewOutside.style.top) + j +'px';
        var total = parseInt(viewOutside.style.top) + j + 'px';
        $(viewOutside).stop().animate({
            top: total
        }, 700, 'swing');
    }
} 
```

如您所见，我已经在使用 stop() 但它似乎并没有给我想要的结果，即单击调用动画并且在第一个动画完成之前不会处理对 animate 函数的其他调用完全的。

我也尝试过 stop(true,true) ，结果没有差异。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:42:08.640

`.stop(true, true)`停止当前正在运行的动画，将其推进到最后并将其从动画队列中移除。这听起来不像你要求做的。

如果您希望后续动画在正在进行的动画完成后继续播放，则只需删除 ，`.stop()`因为新动画只会在当前动画之后添加到队列中。

如果您希望在对象当前正在制作动画的情况下根本不启动后续动画，那么您可以检查该对象当前是否正在制作动画，如果是，请避免启动另一个动画。

要忽略任何未来的动画，而它仍然从最后一次单击开始制作动画，您可以执行以下操作：

```
this.LRSliderScrollVert = function(j) {
    var viewOutside = GetObject(this.sliderObjectId);
    if (parseInt(viewOutside.style.top) == 1 && j == 1){
        //do nothing
    } else if (parseInt(viewOutside.style.top) == this.sliderBottomLimit && j == -1) {

    } else {
        var total = parseInt(viewOutside.style.top) + j + 'px';
        // remove any objects from the selector that are currently animating
        // if there are none left, then it will do nothing
        $(viewOutside).not(":animated").animate({
            top: total
        }, 700, 'swing');
    }
} 
```

我删除了，`.stop()`因为那不是你想要的。这将停止当前动画，但您说您希望它继续。您要跳过的是当前正在运行的任何未来动画。

我添加`.not(":animated")`了从当前正在动画的选择器中删除任何对象。如果您的一个对象正在制作动画，这将留下一个空的 jQuery 对象，然后在您调用该`.animate()`方法时什么也不做。这只是在测试和对该结果`.is(":animated")`使用语句时节省了一些代码。`if`

# asp.net-mvc-4 - 在没有 Web 访问的 prod 服务器上安装 MVC 4 包

> ID：12737858
> 
> 赞同：0
> 
> 时间：2012-10-05T00:21:57.507
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我不敢相信我在 microsoft.com 上找不到这个

对于没有 Web 访问的 prod Web 服务器，如何安装 MVC 4？

必须有一个 MVC 4 运行时安装包，是吗？

注意：我不是在谈论 VS 的 MVC 4 安装程序：

[http://www.microsoft.com/en-us/download/details.aspx?id=30683](http://www.microsoft.com/en-us/download/details.aspx?id=30683)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:27:57.143

您始终可以将 MVC 4 部署为应用程序的一部分。通过这种方式，MVC 4 dll 位于您的应用程序 bin 中，而不是 GAC 中。

# ios - dequeueReusableCellWithIdentifier:forIndexPath 中的断言失败：

> ID：12737860
> 
> 赞同：324
> 
> 时间：2012-10-05T00:22:13.860
> 
> 标签：ios, objective-c, uitableview

所以我正在为我的学校制作一个 rss 阅读器并完成了代码。我运行了测试，它给了我这个错误。这是它所指的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = 
     [tableView dequeueReusableCellWithIdentifier:CellIdentifier 
                                     forIndexPath:indexPath];
    if (cell == nil) {

        cell = 
         [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle  
                                reuseIdentifier:CellIdentifier];

    } 
```

这是输出中的错误：

> 2012-10-04 20:13:05.356 阅读器 [4390:c07] *** 断言失败 -[UITableView dequeueReusableCellWithIdentifier:forIndexPath:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:4460 2012-10-04 20: 13:05.357 阅读器 [4390:c07] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法使具有标识符 Cell 的单元格出列 - 必须为标识符注册一个 nib 或一个类或连接故事板中的原型单元格' ***第一掷调用堆栈：（0x1c91012 0x10cee7e 0x1c90e78 0xb64f35 0xc7d14 0x39ff 0xd0f4b 0xd101f 0xb980b 0xca19b 0x6692d 0x10e26b0 0x228dfc0 0x228233c 0x228deaf 0x1058cd 0x4e1a6 0x4ccbf 0x4cbd9 0x4be34 0x4bc6e 0x4ca29 0x4f922 0xf9fec 0x46bc4 0x47311 0x2cf3 0x137b7 0x13da7 0x14fab 0x26315 0x2724b 0x18cf8 0x1becdf9 0x1becad0 0x1c06bf5 0x1c06962 0x1c37bb6 0x1c36f44 0x1c36e1b 0x147da 0x1665c 0x2a02 0x2935 ) libc++abi.dylib：终止调用抛出异常

这是它在错误屏幕中显示的代码：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：488
> 
> 时间：2012-10-05T00:37:35.427

您正在使用该`dequeueReusableCellWithIdentifier:forIndexPath:`方法。该方法的[文档说明](https://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier:forIndexPath:)了这一点：

> **重要提示：**在调用此方法之前，您必须使用`registerNib:forCellReuseIdentifier:`or方法注册类或 nib 文件。`registerClass:forCellReuseIdentifier:`

您没有为重用标识符注册 nib 或类`"Cell"`。

查看您的代码，您似乎希望 dequeue 方法在`nil`没有单元格可以返回时返回。您需要使用该`dequeueReusableCellWithIdentifier:`行为：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

请注意`dequeueReusableCellWithIdentifier:`和`dequeueReusableCellWithIdentifier:forIndexPath:`是不同的方法。[有关前者](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier:)和[后者](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier:forIndexPath:)，请参见 doc 。

如果您想了解为什么要使用`dequeueReusableCellWithIdentifier:forIndexPath:`，[请查看此问答](https://stackoverflow.com/q/25826383/77567)。

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2012-12-13T09:42:13.443

我认为这个错误是关于为标识符注册你的笔尖或类。

这样您就可以在 tableView:cellForRowAtIndexPath 函数中保留您正在做的事情，只需将以下代码添加到您的 viewDidLoad 中：

```
[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"]; 
```

它对我有用。希望它可能会有所帮助。

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-02-18T15:36:17.543

虽然这个问题已经相当老了，但还有另一种可能性：如果您使用的是 Storyboard，您只需在 Storyboard 中设置 CellIdentifier。

因此，如果您的 CellIdentifier 是“Cell”，只需设置“Identifier”属性： ![在此处输入图像描述](../Images/c06a1ccc7c7c2bd91996d876740dd0cd.png)

**确保在这样做之后清理你的构建。XCode 有时会在 Storyboard 更新方面出现一些问题**

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2012-10-26T06:24:31.930

我有同样的问题替换

```
static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   if (cell==nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    } 
```

解决了

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2013-06-14T17:38:36.953

问题很可能是因为您`UITableViewCell`在 storyboard 中配置了 custom 但您没有使用 storyboard 来实例化您`UITableViewController`使用 this的`UITableViewCell`。例如，在 MainStoryboard 中，您有一个名为的`UITableViewController`子类和一个名为“MyCell”`MyTableViewController`的自定义动态。`UITableViewCell``MyTableViewCell`

如果您`UITableViewController`像这样创建自定义：

```
 MyTableViewController *myTableViewController = [[MyTableViewController alloc] init]; 
```

它不会自动为您注册您的自定义 tableviewcell。您必须手动注册它。

但是如果你使用 storyboard 来实例化`MyTableViewController`，像这样：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
MyTableViewController *myTableViewController = [storyboard  instantiateViewControllerWithIdentifier:@"MyTableViewController"]; 
```

好事发生！`UITableViewController`将自动注册您在情节提要中为您定义的自定义表格视图单元格。

在您的委托方法“cellForRowAtIndexPath”中，您可以像这样创建表格视图单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"MyCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

//Configure your cell here ...

return cell;
} 
```

如果回收队列中没有可重用的单元格，dequeueReusableCellWithIdentifier 将自动为您创建新单元格。

然后你就完成了！

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2012-10-12T19:25:48.383

我将补充一点，*Xcode 4.5*在其默认模板代码中包含新的 - 对于期待旧方法 `dequeueReusableCellWithIdentifier:forIndexPath:`
的开发人员来说，这是一个潜在的陷阱。`dequeueReusableCellWithIdentifier:`

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2013-01-03T23:43:44.813

在情节提要中，您应该将原型单元格的“标识符”设置为与 CellReuseIdentifier“单元格”相同。然后您将不会收到该消息或需要调用该 registerClass: 函数。

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2015-06-12T18:30:05.627

## 斯威夫特 2.0 解决方案：

您需要进入属性检查器并为您的单元格标识符添加一个名称：

[![在此处输入图像描述](../Images/c150306a79485bef4cb7ab72a13166aa.png)](https://i.stack.imgur.com/Q9Miq.png)

然后你需要让你的标识符与你的出队匹配，如下所示：

```
let cell2 = tableView.dequeueReusableCellWithIdentifier("ButtonCell", forIndexPath: indexPath) as! ButtonCell 
```

**或者**

如果您正在使用 nib，您可能需要在 cellForRowAtIndexPath 中注册您的课程：

```
override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {       

    tableView.registerClass(UITableViewCell.self, forCellReuseIdentifier: "SwitchCell")

    // included for context            
    let cell = tableView.dequeueReusableCellWithIdentifier("SwitchCell", forIndexPath:indexPath) as! SwitchCell

    //... continue    
} 
```

[苹果的 UITableView 类参考说：](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/#//apple_ref/occ/instm/UITableView/registerClass:forCellReuseIdentifier:)

> 在将任何单元格出列之前，调用此方法或 registerNib:forCellReuseIdentifier: 方法来告诉表格视图如何创建新单元格。如果指定类型的单元格当前不在重用队列中，则表格视图使用提供的信息自动创建新的单元格对象。
> 
> 如果您之前使用相同的重用标识符注册了类或 nib 文件，则您在 cellClass 参数中指定的类将替换旧条目。如果你想从指定的重用标识符中注销类，你可以为 cellClass 指定 nil。

以下是 Apples Swift 2.0 框架的代码：

```
// Beginning in iOS 6, clients can register a nib or class for each cell.
// If all reuse identifiers are registered, use the newer -dequeueReusableCellWithIdentifier:forIndexPath: to guarantee that a cell instance is returned.
// Instances returned from the new dequeue method will also be properly sized when they are returned.

@available(iOS 5.0, *)
func registerNib(nib: UINib?, forCellReuseIdentifier identifier: String)

@available(iOS 6.0, *)
func registerClass(cellClass: AnyClass?, forCellReuseIdentifier identifier: String) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-02-05T04:52:06.537

如果您要使用**自定义静态单元格**，只需评论此方法：

```
//- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
//    static NSString *CellIdentifier = @"notificationCell";
//    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
//    return cell;
//} 
```

并在情节提要的**“属性检查器”**处为单元格指定一个标识符。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-08-23T06:34:26.177

我在 Objective C 和 Swift 中都给你答案。在此之前我想说

> 如果我们使用`dequeueReusableCellWithIdentifier:forIndexPath:`，我们必须在调用此方法之前使用 registerNib:forCellReuseIdentifier: 或 registerClass:forCellReuseIdentifier: 方法注册一个类或 nib 文件，如 [Apple Documnetation 所说](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/index.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier:forIndexPath:)

所以我们添加`registerNib:forCellReuseIdentifier: or registerClass:forCellReuseIdentifier:`

> 一旦我们为指定的标识符注册了一个类并且必须创建一个新单元格，此方法通过调用其 initWithStyle:reuseIdentifier: 方法来初始化该单元格。对于基于 nib 的单元格，此方法从提供的 nib 文件加载单元格对象。如果现有单元格可供重用，则此方法将改为调用该单元格的 prepareForReuse 方法。

在 viewDidLoad 方法中，我们应该注册单元格

**目标 C**

**选项1：**

```
[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"cell"]; 
```

**选项 2：**

```
[self.tableView registerNib:[UINib nibWithNibName:@"CustomCell" bundle:nil] forCellReuseIdentifier:@"cell"]; 
```

在上面的代码中，`nibWithNibName:@"CustomCell"`给出你的笔尖名称而不是我的笔尖名称 CustomCell

**迅速**

**选项1：**

```
tableView.registerClass(UITableViewCell.self, forCellReuseIdentifier: "cell") 
```

**选项 2：**

```
tableView.registerNib(UINib(nibName: "NameInput", bundle: nil), forCellReuseIdentifier: "Cell") 
```

在上面的代码中`nibName:"NameInput"`给出你的笔尖名称

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-09-26T18:37:30.717

使用 Swift 3.0：

```
override func viewDidLoad() {
super.viewDidLoad()

self.myList.register(UINib(nibName: "MyTableViewCell", bundle: nil), forCellReuseIdentifier: "Cell")
}

public func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
let cell = myList.dequeueReusableCell(withIdentifier: "Cell", for: indexPath as IndexPath) as! MyTableViewCell

return cell
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-02-17T09:54:23.390

昨晚我花了几个小时弄清楚为什么我以编程方式生成的表在 [myTable setDataSource:self] 上崩溃了；可以注释掉并弹出一个空表，但是每次我尝试访问数据源时都会崩溃；

我在 h 文件中设置了委派：@interface myViewController : UIViewController

我的实现中有数据源代码，但仍然 BOOM！，每次都崩溃！谢谢“xxd”（nr 9）：添加那行代码为我解决了这个问题！事实上，我正在从 IBAction 按钮启动一个表格，所以这是我的完整代码：

```
 - (IBAction)tapButton:(id)sender {

    UIViewController* popoverContent = [[UIViewController alloc]init];

    UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 300)];
    popoverView.backgroundColor = [UIColor greenColor];
    popoverContent.view = popoverView;

    //Add the table
    UITableView *table = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 200, 300)         style:UITableViewStylePlain];

   // NEXT THE LINE THAT SAVED MY SANITY Without it the program built OK, but crashed when      tapping the button!

    [table registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
    table.delegate=self;
    [table setDataSource:self];
    [popoverView addSubview:table];
    popoverContent.contentSizeForViewInPopover =
    CGSizeMake(200, 300);

    //create a popover controller
    popoverController3 = [[UIPopoverController alloc]
                          initWithContentViewController:popoverContent];
    CGRect popRect = CGRectMake(self.tapButton.frame.origin.x,
                                self.tapButton.frame.origin.y,
                                self.tapButton.frame.size.width,
                                self.tapButton.frame.size.height);

    [popoverController3 presentPopoverFromRect:popRect inView:self.view   permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

   }

   #Table view data source in same m file

   - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
   {
    NSLog(@"Sections in table");
    // Return the number of sections.
    return 1;
   }

   - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
  {
    NSLog(@"Rows in table");

    // Return the number of rows in the section.
    return myArray.count;
   }

   - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath
    {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    NSString *myValue;

    //This is just some test array I created:
    myValue=[myArray objectAtIndex:indexPath.row];

    cell.textLabel.text=myValue;
    UIFont *myFont = [ UIFont fontWithName: @"Arial" size: 12.0 ];
    cell.textLabel.font  = myFont;

    return cell;
   } 
```

顺便说一句：如果要将弹出框锚定到按钮，则必须将按钮链接为 IBAction 和 IBOutlet。

UIPopoverController *popoverController3 在H文件中直接声明在{}之间的@interface之后

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-09-14T05:26:07.720

FWIW，当我忘记在情节提要中设置单元格标识符时，我遇到了同样的错误。如果这是您的问题，那么在情节提要中单击表格视图单元格并在属性编辑器中设置单元格标识符。确保您在此处设置的单元格标识符与

```
static NSString *CellIdentifier = @"YourCellIdenifier"; 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-10-23T20:03:05.090

我在情节提要中正确设置了所有内容并进行了干净的构建，但不断收到错误“*必须为标识符注册笔尖或类或在情节提要中连接原型单元*”

```
[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"]; 
```

纠正了错误，但我仍然不知所措。我没有使用“自定义单元格”，只是一个嵌入了 tableview 的视图。我已将视图控制器声明为委托和数据源，并确保单元格标识符在文件中匹配。这里发生了什么？

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-06-24T11:22:00.473

我有同样的问题，有同样的错误，对我来说它是这样工作的：

```
[self.tableView registerNib:[UINib nibWithNibName:CELL_NIB_HERE bundle: nil] forCellReuseIdentifier:CELL_IDENTIFIER_HERE]; 
```

也许它对其他人有用。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-01-16T18:12:47.723

这对某些人来说可能看起来很愚蠢，但它让我明白了。我收到了这个错误，对我来说问题是我试图使用静态单元格，然后动态添加更多内容。如果您调用此方法，您的单元格需要是动态原型。选择情节提要中的单元格并在属性检查器下，第一件事是“内容”，您应该选择动态原型而不是静态的。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-12-25T15:00:07.033

只是答案的补充：可能有一段时间你把所有的东西都设置好了，但你可能会不小心在你身上添加了一些其他的 UI `.xib`，比如`UIButton`：[![在此处输入图像描述](../Images/e09972b2fe2259cc5834029dde089688.png)](https://i.stack.imgur.com/vVwra.png) 只需删除额外的 UI，它就可以工作。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-01-17T09:49:01.427

确保故事板中单元格的 CellIdentifier == 标识符，两个名称相同。希望这对你有用

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-03-02T22:34:29.077

就我而言，当我打电话时发生了崩溃`deselectRowAtIndexPath:`

这条线是`[tableView deselectRowAtIndexPath:indexPath animated:YES];`

将其更改为解决了`[self.tableView deselectRowAtIndexPath:indexPath animated:YES];` **我的问题！**

希望这对任何人都有帮助

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-06-19T05:37:02.220

在 Swift 中，这个问题可以通过在你的

> viewDidLoad

方法。

```
tableView.registerClass(UITableViewCell.classForKeyedArchiver(), forCellReuseIdentifier: "your_reuse_identifier") 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-09-16T05:50:18.150

您必须注意，在使用`interface builder`和创建包含**一个**`Xib`单元格的（笔尖）时，还会创建一个指向将要使用的类的单元格。这意味着，当您将两个放在一个 Xib 文件中时，您可能会遇到完全相同的问题，从而导致. 占位符机制不起作用，然后会感到困惑。而是在一个 Xib 中放置不同的占位符。**`placeholder``UITableViewCell``*** Assertion failure ...`**

 **最简单的解决方案（即使这看起来有点简单）是一次将**一个 Cell**放在**一个 Xib**中。IB 将为您创建一个占位符，然后所有工作都按预期进行。但这会直接导致一行额外的代码，因为您需要加载正确的 nib/xib 以请求其所在的重用标识单元。因此，以下示例代码集中在一个表视图中使用多个单元标识符，其中断言失败很常见。

```
// possibly above class implementation
static NSString *firstCellIdentifier = @"firstCellIdentifier";
static NSString *secondCellIdentifier = @"secondCellIdentifier";

// possibly in -(instancetype)init 
UINib *firstNib = [UINib nibWithNibName:@"FirstCell" bundle:nil];
[self.tableView registerNib:firstNib forCellReuseIdentifier:firstCellIdentifier];
UINib *secondNib = [UINib nibWithNibName:@"SecondCell" bundle:nil];
[self.tableView registerNib:secondNib forCellReuseIdentifier:secondCellIdentifier]; 
```

在一个 UITableView 中使用两个 CellIdentifier 的另一个问题是必须注意行高和/或节高。当然，两个单元格可以有不同的高度。

在注册类以供*重用*时，代码应该看起来不同。

当您的单元位于 Storyboard 而不是 Xib 中时，“简单解决方案”看起来也大不相同。注意占位符。

还要记住，界面构建器文件具有版本变化，需要设置为您的目标操作系统版本支持的版本。即使您可能很幸运，您在 Xib 中放置的特定功能自上一个 IB 版本以来没有更改，并且还没有引发错误。因此，使用 IB 制作的 Xib 设置为兼容`iOS 13+`但用于在早期版本上编译的目标`iOS 12.4`也会引起麻烦，并可能导致断言失败。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2019-07-06T13:31:36.750

遇到此错误，因为单元格重用标识符错误 - 一个新手错误，但它发生了： 1\. 确保单元格重用标识符没有拼写错误或缺少字母。2\. 同样，不要忘记大小写计数。3\. 零不是“O”（哦）**

# sql - SQL比较两列并覆盖值以跟踪最大值

> ID：12737863
> 
> 赞同：2
> 
> 时间：2012-10-05T00:22:45.777
> 
> 标签：sql, sql-server, max

我对 SQL 很陌生，这感觉像是一个非常简单的问题，但我无法提出自己的解决方案。

我有一个表 T——为了简化它有两列：Vals 和 Max。Vals 和 Max 保持浮点数，Max 跟踪 Vals 的最高值，因为我不断更新 Vals 列。所以：

瓦尔斯.....最大

4........3

5........2

8........9

2........5

9........4

会成为

瓦尔斯.....最大

4........4

5........5

8........9

2........5

9........9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:26:22.457

```
update mytable set [max]=[vals] where [vals]>[max] 
```

请注意，max 是保留字，因此您可能需要选择另一个名称以保持简单。

# ruby-on-rails-3 - where 条件类似于 sqlserver 但使用 rails activerecord

> ID：12737865
> 
> 赞同：0
> 
> 时间：2012-10-05T00:22:52.290
> 
> 标签：ruby-on-rails-3, activerecord

我有个疑问。我正在使用 rails 3。我想过滤我的模型。假设，这

```
class Company   
  attr_accesible :name, :description
end 
```

在 sql server 存储过程中，我会做这样的事情

```
select * from Company where (@company_name is null or name like @company_name) and (@company_description is null or description like @company_description) and (@ids is null or id in @ids) 
```

上面的代码是一个例子。用于过滤提议。构建这样的查询的正确方法是什么？

提前致谢

希望清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:08:51.863

好的，据我了解，您的视图表单中有 @company 的名称\描述\ids 字段。然后在您的控制器中，您可以像这样进行搜索：

```
@company = Company.find(:all, conditions:["name LIKE(?) OR description LIKE(?) OR id IN(?)", params[:company][:name], params[:company][:description], params[:company][:ids]]) 
```

# android - Android：在资产中写入 XML 文件

> ID：12737868
> 
> 赞同：0
> 
> 时间：2012-10-05T00:23:22.857
> 
> 标签：android, xml, xml-parsing

我真的迷路了，我试图找到解决 xml 解析、阅读和写作的方法。

我有这个应用程序，我可以在其中输入日期和时间等数据 - 单击保存，一旦保存，它将写入现有的 XML 文件，供以后阅读，并将其添加到末尾像这样的格式：

> ```
> <Units>
>  <item>
>    <date>27-5-12</date>
>    <time>15:30</time>
>  </item>
>  <item> 
> 
>    ... and so on ...
> 
> </Units> 
> ```

我设法读取了一个 xml 文件，但是我在打开一个预制的现有文件进行读取或写入时确实遇到了麻烦。

目前我尝试了这段代码：

```
InputStream raw = this.getAssets().open("mydata.xml");
Reader is = new BufferedReader(new InputStreamReader(raw, "UTF8")); 
```

返回文件未找到异常。

谁能指导我应该寻找什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:09:24.977

如前所述，您的源 XML 文件位于 APK 的资产目录中 - APK 中的所有内容都是只读的，因此您将无法写入该文件。（此外，您可能应该将该 XML 数据放入 res/xml 目录而不是 assets 目录，除非您有令人信服的理由不这样做。）

如果 XML 文件不是很长/很复杂，您可以将资产文件读入一个结构，然后将您的新数据添加到该结构中，然后将一个新的 XML 文件写入您的应用程序的数据目录，其中包含更新的数据。这种方法的优点是您可以将多个源文件馈送到每个应用程序的一个主文件中。

一个更灵活和开放的选项是设置一个数据库表。首次安装应用程序时，您使用资产文件中的数据加载/更新表。随着您的应用程序不断添加时间戳数据，您只需向表中添加新行。这种方法还有一个优点，即您可以轻松地在每次应用程序更新时更新源数据或数据库结构——如果它以 XML 格式在内部存储，则更难比较新旧数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:20:37.163

我没有在我的项目中看到资产文件夹，我将我的 xml 文件放在那里，它现在可以工作了:)

# matlab - 大于阈值的值的数量

> ID：12737870
> 
> 赞同：8
> 
> 时间：2012-10-05T00:23:37.723
> 
> 标签：matlab, indexing

我有一个矩阵`A`。现在我想找到大于 5 的元素数量及其对应的索引。如何在不使用 for 循环的情况下在 matlab 中解决这个问题？

例如，如果`A = [1 4 6 8 9 5 6 8 9]'`：

*   元素数 > 5: 6

*   指数：`[3 4 5 7 8 9]`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T00:29:26.930

您使用`find`：

```
index = find(A>5);
numberOfElements = length(index); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T05:44:15.150

您使用`sum`，它允许您使用一个命令获取元素的数量：

```
numberOfElements = sum(A>5); 
```

你真的需要显式索引吗？因为逻辑矩阵`A>5`也可以用作索引（通常比使用 索引更有效`find`）：

```
index = (A>5);
numberOfElements = sum(index); 
```

为了完整性：逻辑索引与常规索引相同：

```
>> A(A>5)
ans = 
     6  8  9  6  8  9 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T10:41:37.503

受上述与 Rody 讨论的启发，这里有一个简单的基准测试，用于测试 MATLAB 中整数与逻辑数组索引的速度。我要说的是一件很重要的事情，因为“矢量化” MATLAB 主要是关于索引的。所以

```
% random data
a = rand(10^7, 1);

% threashold - how much data meets the a>threashold criterion
% This determines the total indexing time - the more data we extract from a,
% the longer it takes.
% In this example - small threashold meaning most data in a 
% will meet the criterion.
threashold = 0.08;

% prepare logical and integer indices (note the uint32 cast)
index_logical = a>threashold;
index_integer = uint32(find(index_logical));

% logical indexing of a
tic
for i=1:10
    b = a(index_logical);
end
toc

% integer indexing of a
tic
for i=1:10
    b = a(index_integer);
end
toc 
```

在我的电脑上结果是

```
Elapsed time is 0.755399 seconds.
Elapsed time is 0.728462 seconds. 
```

这意味着这两种方法的执行几乎相同——这就是我选择示例的方式`threashold`。这很有趣，因为`index_integer`数组几乎大了 4 倍！

```
index_integer       9198678x1              36794712  uint32               
index_logical      10000000x1              10000000  logical 
```

对于较大的`threashold`整数索引值，速度更快。结果`threashold=0.5`：

```
Elapsed time is 0.687044 seconds. (logical)
Elapsed time is 0.296044 seconds. (integer) 
```

除非我在这里做错了什么，否则整数索引在大多数情况下似乎是最快的。

然而，在测试中创建索引会产生非常不同的结果：

```
a = rand(1e7, 1);    
threshold = 0.5;

% logical 
tic
for i=1:10
    inds = a>threshold;
    b = a(inds);
end
toc

% double
tic
for i=1:10
    inds = find(a>threshold);
    b = a(inds);
end
toc

% integer 
tic
for i=1:10
    inds = uint32(find(a>threshold));
    b = a(inds);
end
toc 
```

结果（罗迪）：

```
Elapsed time is 1.945478 seconds. (logical)
Elapsed time is 3.233831 seconds. (double)
Elapsed time is 3.508009 seconds. (integer) 
```

结果（angainor）：

```
Elapsed time is 1.440018 seconds. (logical)
Elapsed time is 1.851225 seconds. (double)
Elapsed time is 1.726806 seconds. (integer) 
```

因此，使用整数索引时，实际索引似乎更快，但从前到后的逻辑索引性能要好得多。

最后两种方法之间的运行时差异是出乎意料的——看起来 Matlab 的内部要么不将双精度数转换为整数，要么在执行实际索引之前*对每个元素执行错误检查。*否则，我们将看到 double 和 integer 方法之间几乎没有区别。

**编辑**我看到有两个选项：

*   matlab 在索引调用之前将双索引显式转换为 uint32 索引（就像我们在整数测试中所做的那样）
*   matlab 在索引调用期间传递双精度并即时执行 double->int 强制转换

第二个选项应该更快，因为我们只需要读取一次双索引。在我们的显式转换测试中，我们必须读取双索引，写入整数索引，然后在实际索引期间再次读取整数索引。所以matlab应该更快......为什么不是？

# python - 如何获取电子邮件正文的纯文本部分

> ID：12737871
> 
> 赞同：0
> 
> 时间：2012-10-05T00:23:50.010
> 
> 标签：python

我试图弄清楚如何只获取电子邮件的文本部分。使用以下代码，我可以获得正文，但后面总是跟着电子邮件的 html，我不需要。如何告诉我的脚本忽略 html？

```
import imaplib
import email

def extract_body(payload):
    if isinstance(payload,str):
        return payload
    else:
        return '\n'.join([extract_body(part.get_payload()) for part in payload])

conn = imaplib.IMAP4_SSL("imap.gmail.com", 993)
conn.login("username", "password")
conn.select()
typ, data = conn.search(None, 'UNSEEN')
try:
    for num in data[0].split():
        typ, msg_data = conn.fetch(num, '(RFC822)')
        for response_part in msg_data:
            if isinstance(response_part, tuple):
                msg = email.message_from_string(response_part[1])
                subject=msg['subject']                   
                print(subject)
                payload=msg.get_payload()
                body=extract_body(payload)
                print(body)
        typ, response = conn.store(num, '+FLAGS', r'(\Seen)')
finally:
    try:
        conn.close()
    except:
        pass
    conn.logout() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:12:55.223

您正在调用`get_payload()`多部分容器的每个项目，并将它们串在一起。只需遍历多部分容器中的每个有效负载，然后选择`Content-Type`您要查找的有效负载。

# php - MySQL 在 UTF-8 PHP 文件中输出西方编码

> ID：12737875
> 
> 赞同：1
> 
> 时间：2012-10-05T00:24:07.263
> 
> 标签：php, mysql, nginx, phpmyadmin, mysqli

我有以下问题：在一个非常简单的 php-mysqli 查询上：

```
if ( $result = $mysqli->query( $sqlquery ) )
{
    $res = $result->fetch_all();
    $result->close();
} 
```

我得到的字符串被错误地编码为西方编码的字符串，尽管数据库、表和列是`utf8_general_ci`排序规则的。php 脚本本身是 utf-8 编码的，并且**脚本的 mysql-less 部分得到了正确的编码**。所以说`echo "ő"`完美，但是`echo $res[0]`从前面的示例中，`EF BF BD`当以正确的 UTF-8 编码查看文件时输出字符。如果我手动将浏览器的编码切换为西方，则 mysqli 来源的字符串得到很好的解码，除了非西方字符被替换为“？”。

更奇怪的是，在我的开发环境中没有发生这种情况，而在我的网络服务器上却发生了。开发人员环境是 LAMP 堆栈（统一服务器），而网络服务器使用 nginx。

在这种情况下，**我使用 phpMyAdmin 在数据库中输入了数据**，并且在 phpmyadmin 中它完美显示。phpMyAdmin 的排序规则也是 utf-8。我相信问题一定是在这里的某个地方，**就像在同一个网络服务器上一样，对于我通过 php（使用 POST）输入数据的另一个站点，同样的问题不会发生**。在这种情况下，数据在输入和查看数据时都是正确可见的（我的意思是在 php 生成的网页中），但特殊字符在 phpMyAdmin 中不正确。

你能帮我从哪里开始调试吗？它是否连接到**php**或**mysql**或**nginx**或**phpMyAdmin**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:27:40.793

使用 mysqli::set_charset 函数。

```
$mysqli->set_charset('utf8'); //returns false if the encoding was not valid... won't happen 
```

[http://php.net/manual/en/mysqli.set-charset.php](http://php.net/manual/en/mysqli.set-charset.php)

我已经有一段时间没有使用 mysqli，但如果情况相同，默认情况下连接使用拉丁瑞典编码 (ISO 8859 1)。

我会认为您的页面已经在使用 utf8 编码，方法是：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
```

`<head>`标签内。

如果您已经有拉丁瑞典语编码的字符串，您可以使用 mk_convert_encoding：

[http://php.net/manual/en/function.mb-convert-encoding.php](http://php.net/manual/en/function.mb-convert-encoding.php)

```
$fixedStr = mb_convert_encoding($wrongStr, 'UTF-8', 'ISO-8859-1'); 
```

`iconv`做了一些非常相似的事情：说实话，我不知道有什么区别，但这里是函数参考的链接：http: [//php.net/manual/en/function.iconv.php](http://php.net/manual/en/function.iconv.php)

我刚刚意识到你可能有一些 utf8 和拉丁瑞典语的字符串。您可以为此使用 mb_detect_encoding：http: [//php.net/manual/en/function.mb-detect-encoding.php](http://php.net/manual/en/function.mb-detect-encoding.php)

如果已安装，您还可以转储数据库并使用 iconv（cmd 行）：

```
iconv -f latain -t utf-8 < currentdb.sql > fixeddb.sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:27:52.617

用于[`mysqli_set_charset`](http://php.net/manual/en/mysqli.set-charset.php)在连接后将客户端编码更改为 UTF-8：

```
$mysqli->set_charset("utf8"); 
```

客户端编码是 MySql 期望您输入的内容（例如，当您将用户提供的文本插入搜索查询时）以及它为您提供的结果（因此它必须匹配您的输出编码才能`echo`正确显示内容）。

您需要让它与您的网页的编码相匹配，以解决上述两种情况*以及*PHP 源文件的编码（以便正确解释查询的硬编码部分）。

**更新：如何将使用 latin-1 插入的数据转换为 utf-8**

对于已经使用错误的连接编码插入的数据，有一个方便的解决方案来解决这个问题。对于包含此类数据的每一列，您需要执行以下操作：

```
ALTER TABLE table_name MODIFY column_name existing_column_type CHARACTER SET latin1;
ALTER TABLE table_name MODIFY column_name BLOB;
ALTER TABLE table_name MODIFY column_name existing_column_type CHARACTER SET utf8; 
```

占位符`table_name`,`column_name`并且`existing_column_type`每次都应替换为数据库中的正确值。

这是做什么的

1.  告诉 MySql 它需要将数据存储在 latin1 中的该列中。此字符集仅包含 utf8 的一小部分子集，因此通常此转换涉及数据丢失，但在此特定情况下，数据已在输入时被解释为 latin1，因此不会有副作用。但是，MySql 将在内部转换数据的字节表示以匹配最初从 PHP 发送的内容。
2.  将该列转换为`BLOB`没有关联编码信息的二进制类型 ( )。此时，该列将包含作为正确 utf8 字符串的原始字节。
3.  将列转换为之前的字符类型，告诉 MySql 原始字节应该被认为是 utf8 编码。

***警告：如果有问题的列仅*包含错误插入的数据，则只能使用这种不分青红皂白的方法。任何已正确插入的数据将在第一次出现任何非 ASCII 字符时被截断！**

因此，最好在 PHP 端修复生效之前立即执行此操作。

# configuration-files - Opencart 致命错误：在非对象上调用成员函数 get()

> ID：12737880
> 
> 赞同：10
> 
> 时间：2012-10-05T00:25:21.000
> 
> 标签：configuration-files, opencart, fatal-error

试图从本地主机移动到新服务器。全新安装工作正常，没有问题。当我上传文件时 mydomain.com/admin 出现白屏，mydomain.com 产生此错误：

致命错误：在第 103 行的 /home4/pawpostc/public_html/index.php 中的非对象上调用成员函数 get()。

所以我看了一下 index.php 第 103 行：

```
if ($config->get('config_error_display')) {
        echo '<b>' . $error . '</b>: ' . $errstr . ' in <b>' . $errfile . '</b> on     line <b>' . $errline . '</b>';
    } 
```

好像我的配置文件有问题。所以我去看看他们。我已经检查了几次，但找不到错误，可能遗漏了一些东西，所以这里是配置文件。

config.php（在我的根 www. 文件夹中）：

```
<?php
// HTTP
define('HTTP_SERVER', 'http://www.pawpost.com.au/');
define('HTTP_IMAGE', 'http://www.pawpost.com.au/image/');
define('HTTP_ADMIN', 'http://www.pawpost.com.au/admin/');

// HTTPS
define('HTTPS_SERVER', 'http://www.pawpost.com.au/');
define('HTTPS_IMAGE', 'http://www.pawpost.com.au/image/');

// DIR
define('DIR_APPLICATION', '/home4/pawpostc/public_html/catalog/');
define('DIR_SYSTEM', '/home4/pawpostc/public_html/system/');
define('DIR_DATABASE', '/home4/pawpostc/public_html/system/database/');
define('DIR_LANGUAGE', '/home4/pawpostc/public_html/catalog/language/');   
define('DIR_TEMPLATE', '/home4/pawpostc/public_html/catalog/view/theme/');
define('DIR_CONFIG', '/home4/pawpostc/public_html/system/config/');
define('DIR_IMAGE', '/home4/pawpostc/public_html/image/');
define('DIR_CACHE', '/home4/pawpostc/public_html/system/cache/');
define('DIR_DOWNLOAD', '/home4/pawpostc/public_html/download/');
define('DIR_LOGS', '/home4/pawpostc/public_html/system/logs/');

// DB
define('DB_DRIVER', 'mysql');
define('DB_HOSTNAME', 'localhost');
define('DB_USERNAME', 'my user name');
define('DB_PASSWORD', 'my password');
define('DB_DATABASE', 'my database');
define('DB_PREFIX', 'oc_');
?> 
```

管理员/config.php：

```
<?php
// HTTP
define('HTTP_SERVER', 'http://www.pawpost.com.au/admin/'); 
define('HTTP_CATALOG', 'http://www.pawpost.com.au/');
define('HTTP_IMAGE', 'http://www.pawpost.com.au/image/');

// HTTPS
define('HTTPS_SERVER', 'http://www.pawpost.com.au/admin/');
define('HTTPS_CATALOG', 'http://www.pawpost.com.au/');
define('HTTPS_IMAGE', 'http://www.pawpost.com.au/image/');

// DIR
define('DIR_APPLICATION', '/home4/pawpostc/public_html/admin/');
define('DIR_SYSTEM', '/home4/pawpostc/public_html/system/');
define('DIR_DATABASE', '/home4/pawpostc/public_html/system/database/');
define('DIR_LANGUAGE', '/home4/pawpostc/public_html/admin/language/');
define('DIR_TEMPLATE', '/home4/pawpostc/public_html/admin/view/template/');
define('DIR_CONFIG', '/home4/pawpostc/public_html/system/config/');
define('DIR_IMAGE', '/home4/pawpostc/public_html/image/');
define('DIR_CACHE', '/home4/pawpostc/public_html/system/cache/');
define('DIR_DOWNLOAD', '/home4/pawpostc/public_html/download/');
define('DIR_LOGS', '/home4/pawpostc/public_html/system/logs/');
define('DIR_CATALOG', '/home4/pawpostc/public_html/catalog/');

// DB
define('DB_DRIVER', 'mysql');
define('DB_HOSTNAME', 'localhost');
define('DB_USERNAME', 'my user name');
define('DB_PASSWORD', 'my password');
define('DB_DATABASE', 'my database');
define('DB_PREFIX', 'oc_');
?> 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:41:18.860

我正在使用 opencart 并安装了 vqmod。突然之间，我遇到了同样的错误之一。

这解决了我的问题：在 system/library/session.php 中将启动会话替换为：

```
session_save_path(realpath(dirname($_SERVER['DOCUMENT_ROOT']) . '/../tmp')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T14:14:36.420

我在我的服务器上上传了一个文件（目录： vqmod/....php ）。

只需更改 vqmod 文件权限。我设置了 777 并解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T05:56:34.510

将我的网站迁移到新的 VPS 环境后，我遇到了同样的问题。我认为它必须与更改的文档根路径或我的商店的权限有关，并拔出很多头发试图找到问题的核心。

我终于意识到我对 PHP 会话数据存储的权限不正确！就我而言，/var/lib/php/session/ 处的文件夹（自然）归 apache 所有，但我已将 apache 更改为以不同的用户身份运行，因此它无法再写入会话存储。

在这种情况下，错误消息是神秘的（至少可以这么说！）并且没有给出问题可能只是缺少写权限的线索！

哦，好吧，我们现在应该知道 90% 的 unix 问题都归结为 perms！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T01:22:58.957

最可能的问题是您的一个或多个库文件因上传而损坏。从本地文件夹重新上传您的`system/library/`文件夹。您的配置文件看起来不错，并且错误未引用配置问题。您`index.php`文件中的第 103 行是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T10:27:08.930

请交叉检查您是否设置了我遇到此错误并已解决的所有权限，这是由于文件权限问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-13T13:53:26.950

该错误是由于在缓存文件夹上设置了权限。将其设置为 755，将文件设置为 555，让您回家干爽。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-02T22:03:16.653

从您收到的错误来看，该变量似乎`$config`未设置。使用位于的类在第`$config`35 行设置变量`Config``system/library/config.php`

我想如果你弄清楚为什么类没有被实例化，你就可以解决这个问题。这可能是几件事：

*   该`system/library/config.php`文件可能尚未上传到新服务器
*   如前面的答案所述，可能存在权限问题。检查权限`system/library/config.php`并确保正确的用户拥有所有权。
*   或者这可能是一个完全不相关的问题。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-08-12T00:47:05.360

我遇到过同样的问题。我将 vqmod 权限更改为 777。我不确定这是否解决了问题，但我检查了我的网站，但没有添加 www。在域之前，它起作用了。如果我检查[http://daytodaystore.com](http://daytodaystore.com) ，警告就会被删除。如果我检查[http://www.daytodaystore.com](http://www.daytodaystore.com)，就会出现警告。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-05-25T07:47:45.217

当我在 Godaddy 上将我的服务器从 2G 迁移到 4GH 时，我遇到了这个问题。来到这个论坛，发现问题出在 session.php 然后，我猜 'tmp' 文件夹丢失了。因此，我在 html 文件夹上方仅一步创建了一个。并给它一个 777 访问权限。问题已解决，之后我的网站看起来很棒。

# ruby - 红宝石：安装调试器

> ID：12737881
> 
> 赞同：0
> 
> 时间：2012-10-05T00:25:25.333
> 
> 标签：ruby, rubygems

我无法安装调试器以在我的 ruby​​ 文件中工作。任何人都可以看到问题是什么？

我在 file.rb 的顶部做了“需要调试器”，运行时出现了这个错误`ruby file.rb`

```
rubygems/custom_require.rb:36:in `require': cannot load such file -- debugger (LoadError) 
```

我`gem install debugger`在我的系统上做了，但收到了这个错误消息。

```
ERROR:  Error installing debugger:
    ERROR: Failed to build gem native extension.

        /Users/mm/.rvm/rubies/ruby-1.9.3-rc1/bin/ruby extconf.rb
checking for vm_core.h... no
checking for vm_core.h... no
Makefile creation failed
**************************************************************************
No source for ruby-1.9.3-rc1 provided with debugger-ruby_core_source gem.
**************************************************************************
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/michaeljohnmitchell/.rvm/rubies/ruby-1.9.3-rc1/bin/ruby
    --with-ruby-dir
    --without-ruby-dir
    --with-ruby-include
    --without-ruby-include=${ruby-dir}/include
    --with-ruby-lib
    --without-ruby-lib=${ruby-dir}/lib 
```

当我运行 gem 环境时，我得到

*   红宝石版本：1.8.10
    *   红宝石版本：1.9.3（2011-09-23 补丁级别 -1）[x86_64-darwin10.8.0]
    *   安装目录：/Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.3-rc1@global
    *   RUBY 可执行文件：/Users/michaeljohnmitchell/.rvm/rubies/ruby-1.9.3-rc1/bin/ruby
    *   可执行目录：/Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.3-rc1@global/bin
    *   红宝石平台：
    *   红宝石
    *   x86_64-darwin-10
    *   宝石路径：
        *   /Users/mm/.rvm/gems/ruby-1.9.3-rc1@global
    *   宝石配置：
        *   :update_sources => 真
        *   :详细 => 真
        *   :基准 => 假
        *   ：回溯 => 假
        *   :bulk_threshold => 1000
        *   :sources => ["http://rubygems.org/", "http://gems.github.com/"]
    *   远程资源：
        *   [http://rubygems.org/](http://rubygems.org/)
        *   [http://gems.github.com/](http://gems.github.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T00:51:49.167

您正在使用调试器不支持的旧预发布版本的 Ruby。Ruby 1.9.3 的实际发布版本已经发布了一段时间，升级到 Ruby 1.9.3-p194（调试器支持）将允许安装它。

# mysql - Mysql 慢查询日志正在记录更快的查询

> ID：12737885
> 
> 赞同：3
> 
> 时间：2012-10-05T00:26:00.070
> 
> 标签：mysql, mysql-slow-query-log

我已经在我的数据库服务器上设置了 mysql 慢查询日志并将长查询时间设置为 5。刚刚检查了日志及其日志查询，只需要几毫秒。有人知道为什么会这样吗？，这是一些日志。

最后一个查询并不是最优化的。它说它检查了 450000 行，所以在日志中看到它我不会感到惊讶。然而查询时间说它只花了0.2秒。除了查询执行时间之外，还有更多的慢查询日志吗？

```
# Query_time: 0.000525  Lock_time: 0.000151 Rows_sent: 1  Rows_examined: 115
SET timestamp=1349393722;
SELECT `we_members`.*, `we_referrals`.`code` as referral_code
FROM (`we_members`)
LEFT JOIN `we_referrals` ON `we_referrals`.`m_id` = `we_members`.`id`
WHERE `we_members`.`facebook_id` = '100'
LIMIT 1;

# Query_time: 0.000748  Lock_time: 0.000104 Rows_sent: 3  Rows_examined: 691
SET timestamp=1349393722;
select distinct(m_id), m.first_name, m.facebook_id, m.photo_url from
            we_connections f
            left join we_members m on m.id = f.m_id
            where ( (f.friend_id = 75 or f.m_id = 75 and m.id != 75))
            and m.id >0
            and m.id != 75
            order by m_id;

# Query_time: 0.259535  Lock_time: 0.000098 Rows_sent: 16  Rows_examined: 455919
SET timestamp=1349393722;
select distinct(m_id), m.first_name, m.facebook_id, m.photo_url from
            we_connections f
            left join we_members m on m.id = f.m_id
            where (f.friend_id IN (select friend_id from we_connections f where f.m_id = 75) or (f.friend_id = 75 or f.m_id = 75 and m.id != 75))
            and m.id >0
            and m.id != 75
            order by m_id; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T00:29:04.963

鉴于在某些查询中检查了大量行，您可能也`log_queries_not_using_indexes`设置了选项 - 任何不使用索引的查询也将写入慢查询日志。您可以在`my.cnf`文件中检查此选项。

[http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_log-queries-not-using-indexes](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_log-queries-not-using-indexes)

有关写入日志的查询类型的更多信息[http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html)

# python - 通过串行连接与打印机通话时出现噪音

> ID：12737896
> 
> 赞同：1
> 
> 时间：2012-10-05T00:27:07.387
> 
> 标签：python, printing, serial-port, flow-control

当我的软件通过串行连接与收据打印机通信时，它会遇到很多看似毫无意义的消息，可能是噪音。谁能帮我确定发生了什么？我需要对此作出回应吗？我可以忽略它并继续吗？

一些配置信息：

我的电脑：

```
{'baudrate': '9600', 'flowcontrol': 'XON/XOFF', 'port': 'CNCB0'}
Serial<id=0x17ab1b0, open=True>(port='\\\\.\\CNCB0', baudrate=9600, bytesize=8, parity='N', stopbits=1, timeout=0.01, xonxoff=1, rtscts=0, dsrdtr=0), printer: Serial<id=0x17ab290, open=True>(port='\\\\.\\COM1', baudrate=9600, bytesize=8, parity='E', stopbits=1, timeout=0.01, xonxoff=1, rtscts=0, dsrdtr=0) 
```

打印机：

```
{'parity': 'E', 'baudrate': '9600', 'bytesize': '8', 'brand': 'Epson', 'stopbits': '1', 'flowcontrol': 'XON/XOFF', 'interface': 'Serial', 'port': '1'} 
```

我的电脑通过发送打印机启动

```
'\x1bv' 
```

然后我的电脑不断循环发送打印机

```
'\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv\x1bv' 
```

和打印机回复

```
'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:23:43.197

> 它遇到了很多看似毫无意义的消息

通过串行异步线路接收全部垃圾通常是波特率问题。

通过串行异步线路接收随机垃圾通常是一个帧问题，例如不匹配的奇偶校验。

你的电脑

> 奇偶校验='N'

您的打印机

> '平价'：'E'

ERGO，您的奇偶校验设置（无与偶数）和帧大小（10 位与 11 位）不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:00:29.613

有许多潜在的原因。首先，你能得到*任何*好的数据吗？还是全是垃圾？如果都是垃圾，那么波特率不匹配是一个常见问题。除此之外，还有几件事需要检查：

1.  验证您的通讯设置。您正在指定软件流控制。你确定这是正确的吗？
2.  验证您的电缆和/或连接。电缆好吗？连接器呢？电缆有多长？附近是否有强噪声源？
3.  您如何将打印机连接到计算机？它是一个真正的 COM 端口吗？或者它是 USB 到 RS-232 转换器电缆之一？您是连接到笔记本电脑还是台式机？通常，笔记本电脑使用 +/- 5V 之类的东西“伪造”RS-232 信号，而不是真正的 +/-12V RS-232 信号。结果，通信可能更容易受到噪声的影响。

# c# - 如何从 Shapes 转换为 string、int 等...？

> ID：12737899
> 
> 赞同：0
> 
> 时间：2012-10-05T00:27:38.137
> 
> 标签：c#, .net, wpf

我有一个 Rectangle 类型的方法，它需要返回：

真的：

*   传递给方法的矩形名称

别的：

*   该矩形的宽度和高度

这是方法：`public Rectangle ReturnStuff(Rectangle rect) {...stuff...};`

我已经尝试了很多东西 - 例如 (Rectangle) rect.ToString(); ConvertToString/Int()... 但似乎没有任何效果。

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:30:29.203

```
public Rectangle (Rectangle rect) {}; 
```

那个“方法”是一个构造函数。

覆盖对象`ToString()`并以您想要的方式实现它。从另一个班级调用它。

```
public override string ToString()
{
    return "Rectangle";
} 
```

可能想要返回诸如宽度高度等的东西。

编辑：

当您将问题从复制构造函数更改为返回类型为 Rectangle 的方法时，我可能应该澄清一下。

如果您希望传入矩形，请执行以下操作：（不知道为什么方法末尾有分号...）

```
public void ManipulateRectangle(Rectangle rect) 
{
    rect.GetWidth(); //I don't know your rectangle class methods or data members.
    rect.GetHeight(); //etc.
} 
```

现在，如果这不是您要查找的内容，而是您想要获得一个矩形（通过传入一个矩形？我不确定为什么 - 除非您以某种方式操作它）您必须实际返回一个 Rectangle 类型的对象。

```
public Rectangle ManipulateRectangle(Rectangle rect) 
{
    var newRectangle = new Rectangle();
    newRectangle.SetWidth(rect.GetHeight()); //ex manipulation

    return newRectangle;
} 
```

只是为了参考，试着让你的问题更具体一点:)它有帮助。还应包括方法名称、属于它们的代码以及您想要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:31:09.633

这种方法看起来有些奇怪。

```
public Rectangle (Rectangle rect) {}; 
```

`Rectangle`在我看来，它就像一个应该从另一个创建一个的构造函数`Rectangle`。

如果要返回矩形的名称，则需要类似：

```
public string RectangleName (Rectangle rect)
{
    return rect.ToString();
} 
```

如果构造函数打算复制传入的矩形，那么你需要类似的东西：

```
public Rectangle (Rectangle rect)
{
    this.name = rect.name;
    this.width = rect.width;
    this.height = rect.height;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T00:57:30.957

您不能从一种方法返回三个值（名称、高度和宽度）。

调用代码需要使用返回的属性（`Rectangle`如果它们可用），或者该方法可以返回`Tuple<string,int,int>`包含详细信息的 a。该方法还可以使用`out`参数将值返回给调用代码。

到目前为止，在设计和可读性方面的最佳选择是第一个 - 在返回的“矩形”上使用属性。

所以调用代码可能看起来像：

```
Rectangle rect1 = ???
Rectangle newRect = ReturnStuff(rect);
string name = newRect.ToString();
int width = newRect.Width;
int height = newRect.Height; 
```

# asp.net - 在 Asp.net Webforms 站点内实现应用程序的路径问题

> ID：12737912
> 
> 赞同：1
> 
> 时间：2012-02-16T11:29:10.323
> 
> 标签：asp.net, iis-7.5

我们有一个使用 ASP.NET Web 表单在 IIS7.5 上运行的网站。所有网站路径均采用以下格式：`"~/"`.

在这个网站内部，我们有一个应用程序可以在`<iframe>`标签内加载父网站的一个页面。

显然，`<iframe>`内容中的所有引用路径都引用（并指向）应用程序根目录，而不是网站根目录。

有没有办法将`<iframe>`内容指向网站根目录，仅更改应用程序或至少更改网站`web.config`，但不对网站代码进行修改？

# passenger - 乘客应用程序不再启动：Errno::EPIPE

> ID：12737913
> 
> 赞同：1
> 
> 时间：2012-10-05T00:28:51.740
> 
> 标签：passenger

不太确定我改变了什么，但我的乘客应用程序不再启动。我试过`svn revert`了，但问题并没有消失。这可能是什么原因造成的，我该如何解决？

我在 apache2 服务器上运行它。我的乘客配置如下所示：

```
 LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
   PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17
   PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p194/ruby 
```

我的应用程序配置如下所示：

```
<VirtualHost my_server_ip_address:80>
   ServerName my.domain.com
   # !!! Be sure to point DocumentRoot to 'public'!
   DocumentRoot /path/to/project/public
   RailsEnv production
   <Directory /path/to/project/public>
      # This relaxes Apache security settings.
      AllowOverride all
      # MultiViews must be turned off.
      Options -MultiViews
   </Directory>
</VirtualHost> 
```

对于错误消息（最后保存，因为它很长）：

```
[ pid=2887 thr=81885190 file=utils.rb:176 time=2012-10-05 09:19:10.532 ]: *** Exception Errno::EPIPE in PhusionPassenger::Rack::ApplicationSpawner (Broken pipe) (process 2887, thread #<Thread:0x9c2f00c>):
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/message_channel.rb:278:in `write'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/message_channel.rb:278:in `write'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:574:in `rescue in report_app_init_status'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:552:in `report_app_init_status'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:154:in `initialize_server'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:204:in `start_synchronously'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:180:in `start'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
        from <internal:prelude>:10:in `synchronize'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
        from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T23:20:36.620

您的错误消息不够完整，无法查看问题所在，但是您是否尝试过[Phusion Passenger 4.0 beta 2](http://blog.phusion.nl/2013/01/24/phusion-passenger-4-0-beta-2-syscall-failure-simulation-framework-focus-on-stability/)？产卵子系统已经完全重写，更加健壮，并且可能会解决您的问题。

# flash - IE9 FileReference.browse() 在新窗口中显示时显示非模态对话框

> ID：12737915
> 
> 赞同：1
> 
> 时间：2012-10-05T00:28:54.720
> 
> 标签：flash, internet-explorer, apache-flex, flex4, flex3

如果您能在 Flash 4.0 FileReference.browse() 对话框中帮助我解决这个问题，我将不胜感激。

情况是这样的。

1.  使用 javascript window.open() 方法在新窗口中打开网页（包含 flex 按钮）。
2.  新窗口中的网页包含 flex 按钮（在单击事件时，调用 FileReference.browse()）
3.  单击 flex 按钮，FileDialog 出现
4.  单击窗口，FileDialog 被窗口覆盖。（这意味着 FileDialog 不是模态的。）

此问题仅在 IE9 中发生。以前版本的 IE 和其他浏览器（Chome、FF、Safari）运行良好。

任何解决方案或解决方法来摆脱这个问题？

在此先感谢，谢林

# c++ - 使用 C/STL 计算出现次数并打印前 K

> ID：12737917
> 
> 赞同：2
> 
> 时间：2012-10-05T00:29:16.763
> 
> 标签：c++, stl, unordered-map

我有一个大文本文件，每行都有标记。我想计算每个令牌的出现次数并对其进行排序。我如何在 C++ 中有效地做到这一点，最好使用内置函数和最短的编码（当然也是最有效的）？我知道如何在 python 中执行此操作，但不确定如何在 STL 中使用 unordered_map 执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:02:10.030

我会采用 unordered_map 方法。为了选择最频繁的 k 个标记，假设 k 小于标记的总数，您应该查看[std::partial_sort](http://en.cppreference.com/w/cpp/algorithm/partial_sort)。

顺便`++frequency_map[token]`说一句，（例如，频率映射是`std::unordered_map<std::string, long>`）在 C++ 中是完全可以接受的，尽管我认为 Python 中的等价物会在新出现的标记上爆炸。

好的，给你：

```
void most_frequent_k_tokens(istream& in, ostream& out, long k = 1) {
  using mapT = std::unordered_map<string, long>;
  using pairT = typename mapT::value_type;
  mapT freq;
  for (std::string token; in >> token; ) ++freq[token];
  std::vector<pairT*> tmp;
  for (auto& p : freq) tmp.push_back(&p);
  auto lim = tmp.begin() + std::min<long>(k, tmp.size());
  std::partial_sort(tmp.begin(), lim, tmp.end(),
      [](pairT* a, pairT* b)->bool {
        return a->second > b->second
               || (a->second == b->second && a->first < b->first);
        });
  for (auto it = tmp.begin(); it != lim; ++it)
    out << (*it)->second << ' ' << (*it)->first << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:36:19.107

假设您知道如何从 C++ 文件中读取行，这应该是朝着正确方向的推动

```
std::string token = "token read from file";
std::unordered_map<std::string,int> map_of_tokens;
map_of_tokens[token] = map_of_tokens[token] + 1; 
```

然后，您可以将它们打印出来（用于测试）：

```
for ( auto i = map_of_tokens.begin(); i != map_of_tokens.end(); ++i ) {
    std::cout << i->first << " : " << i->second << "\n";
} 
```

# ruby-on-rails - 太阳黑子全文搜索 - 显示搜索参数

> ID：12737931
> 
> 赞同：0
> 
> 时间：2012-10-05T00:31:16.897
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sunspot, sunspot-rails

我想显示搜索对象的搜索参数。我使用铁轨和太阳黑子。

假设我有这个书应用程序，其中存储了一堆书，并且想按它们的名称和标题搜索书。

**图书型号：**

```
class Book < ActiveRecord::Base
  validates_presence_of :title, :author_name

  searchable do
    text :title, :author_name
  end
end 
```

**控制器：**

```
class BooksController < ApplictionController
  def index
   @search = Book.search do
    fulltext params[:search]
  end
   @results = @search.results
  end
end 
```

**看法：**

```
<div>
 <h1>You search: </h1>
 <% for result in @results %>
    <li>
      <h3><%= link_to result.title, result %></h3>
      <p><%= result.author_name %></p>
    </li>
 <% end %>
</div> 
```

如何显示搜索参数，该对象在哪里？

所以它输出：

```
Your search: Jeff Hawkins
Eggs and butter
Jeff Hawkins 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:32:24.557

将您的控制器代码更改为：

```
def index
  @query = params[:search]
  @search = Book.search do
    fulltext params[:search]
  end
  @results = @search.results
end 
```

然后在您看来，您可以这样做：

```
<h1>Your search: <%= @query %></h1> 
```

# python - 排除空值以将一个列表除以另一个列表

> ID：12737932
> 
> 赞同：0
> 
> 时间：2012-10-05T00:32:02.307
> 
> 标签：python, list, null

我有两个列表：`total_price`和`units_b`，它们都包含空值，并且我有一个表达式来将 total_price 除以 units_b：

```
 total_price = [None, None, 10, 20]
    units_b = [None, None, 1, 2]

    average_price = [(x/y) for x, y in zip(total_price, units_b)] 
```

试图运行`average_price`给我一个错误，说我不能划分两个“NoneTypes”。有什么方法可以排除除法的空值但保持原始列表的完整性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:33:57.093

```
average_price = [(x/y) for x, y in zip(total_price, units_b) if x is not None and y is not None] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T00:34:01.870

```
total_price = [None, None, 10, 20]
units_b = [None, None, 1, 2]

average_price = [(x/y) for x, y in zip(total_price, units_b) if x is not None and y is not None] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T00:34:04.257

```
average_price = [(x/y) for x, y in zip(total_price, units_b) if not (x==None or y==None)] 
```

虽然你真的应该[阅读文档](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

# java - 资源：用于 OpenGL 实时应用程序的 Java 并行性

> ID：12737933
> 
> 赞同：2
> 
> 时间：2012-10-05T00:32:12.740
> 
> 标签：java, multicore, jogl, tbb, fork-join

我最近参加了一个关于并行化的好处的讲座，它可以更有效地利用多核处理器的能力来实现实时 3D 图形应用程序。本次讨论是关于 C++ 和 TBB（线程构建块）（英特尔）。我在 Java 7 中发现了 Fork/Join，但我想了解更多关于通过 OpenGL / JOGL 运行实时 3d 图形的信息。

我听说 OpenGL/JOGL 必须存在于一个线程中。我不知道这是不是真的。如果您在 Java 中具有实时图形应用程序的并行/多核编程经验，并且可以向我指出一些非常棒的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T00:27:00.660

```
Is JOGL restricted to one thread? 
```

不，JOGL 本身并不绑定到一个线程。只有 AWT GLCanvas 是。后者是它的 GLAutoDrawable 实现之一。AWT GLCanvas 受到 AWT 本身的限制，需要操作本地资源才能在 AWT EDT 上运行。

```
How to work with JOGL lock free? 
```

要“几乎”无锁地工作，您可以使用[NEWT](http://jogamp.org/jogl/doc/NEWT-Overview.html)。NEWT 允许您从多个线程渲染多个窗口，同时它们不会相互阻塞......干扰等。NEWT 事件处理也不会干扰渲染。

```
Example of multithreading use 
```

另一个使用 OpenGL 的多线程使用示例（无论是否使用 JOGL）是从一个持有共享的屏幕外 OpenGL 上下文 [w/ 屏幕上下文] 的专用线程填充纹理或其他 GL 相关资源。专用线程可以指示渲染循环可用资源等。看看我们的 GLDrawableFactory 是否有很多可绘制工厂方法是公共的。`Note: offscreen mode can be selected via the GLCapabilities.`

`You may like to browse through out unit tests in one of the`[`git repos`](http://jogamp.org/git/?p=jogl.git;a=blob;f=src/test/com/jogamp/opengl/test/junit/jogl/acore/)`. Pls check class 'TestGLAutoDrawableGLWindowOnOffscrnCapsNEWT' and shared OpenGL context tests include the name 'Shared'.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:01:19.907

您可以使用：

1.  像素缓冲区或 pBuffer 是 OpenGL 的扩展，它允许进行离屏渲染
2.  帧缓冲对象或 FBO
3.  共享上下文（针对不同线程）

[http://jogamp.org/git/?p=jogl.git;a=tree;f=src/test/com/jogamp/opengl/test/junit/jogl/offscreen;hb=HEAD](http://jogamp.org/git/?p=jogl.git;a=tree;f=src/test/com/jogamp/opengl/test/junit/jogl/offscreen;hb=HEAD)

[http://jogamp.org/git/?p=jogl.git;a=tree;f=src/test/com/jogamp/opengl/test/junit/jogl/demos/es2;hb=HEAD](http://jogamp.org/git/?p=jogl.git;a=tree;f=src/test/com/jogamp/opengl/test/junit/jogl/demos/es2;hb=HEAD)

# php - 通过echo构建img标签jquery php字符串不起作用

> ID：12737934
> 
> 赞同：0
> 
> 时间：2012-10-05T00:32:19.983
> 
> 标签：php, jquery, echo, image

嘿，我想让这个在这里工作：

```
<? 
echo ('<script type="text/javascript">
$(\'#fileupload\').fileupload({
}).bind(\'fileuploaddone\', function (e, data) {
    jQuery("#shadow").attr("src", "bannerImg/slider/\'' . 
    ' + jQuery(\"#slideNum\").val(); + ');
    echo ('\'.jpg");
    jQuery("#theText").html("New Slider Image:");') ?> 
```

上传图像后，它会调用此脚本，我需要它来查看在选择框中选择了什么值。但是，我得到的只是：

所以自然它不适用于显示图像。我怎样才能重新设计它以使其按照我需要的方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:39:59.903

```
<?php if($_POST['submit']){ ?>

       <script>
       //your script here
       </script>

<?php } ?> 
```

遵循这个想法，而不是更好地回显你的脚本，而是将你的脚本放在像上面的代码一样的 2 个 PHP 封闭标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:46:08.443

```
<script type="text/javascript">
  $('#fileupload').fileupload({
    }).bind('fileuploaddone', function (e, data) {
    jQuery("#shadow").attr("src", "bannerImg/slider/" + jQuery("#slideNum").val() + '.jpg');
    jQuery("#theText").html("New Slider Image:"); 
```

代替：

```
<? 
echo ('<script type="text/javascript">
$(\'#fileupload\').fileupload({
}).bind(\'fileuploaddone\', function (e, data) {
    jQuery("#shadow").attr("src", "bannerImg/slider/\'' . 
    ' + jQuery(\"#slideNum\").val(); + ');
    echo ('\'.jpg");
    jQuery("#theText").html("New Slider Image:");') ?> 
```

# iphone - 具有自定义类型的 UIButton 似乎无法正常工作

> ID：12737935
> 
> 赞同：0
> 
> 时间：2012-10-05T00:32:23.557
> 
> 标签：iphone, ios, uibutton, tap

在我的应用程序开发过程中发生了一些奇怪的事情。我有一个包含几个 UIButtons 的视图。所有人都在使用自定义艺术品，并且是带有 CostumType 的 UIButton。对我来说，一切都感觉不错。在模拟器和手机上。

但是当我把应用程序交给别人时，这个人点击了一个按钮，它就不起作用了。感觉按钮只是对某个点击的反应，实际上感觉不对（如果将其与正常行为进行比较）。

我该怎么做才能让它表现正常？正常意味着习惯 iOS 应用程序的人可以像他一样使用它，但它可以工作。

下面是一个按钮的示例代码：

```
focusButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [focusButton setFrame:CGRectMake(self.bounds.size.width-(self.bounds.size.width/widthFactor)+108, self.bounds.origin.y+(self.bounds.size.height/(heightFactor*2))+2, 36, 40)];
    focusButton.contentHorizontalAlignment = false; // I think these lines doesn't effect the behavior
    focusButton.contentVerticalAlignment = false;
    [focusButton setBackgroundImage:[UIImage imageNamed:@"arrowUp.png"] forState:UIControlStateNormal];
    [focusButton setBackgroundImage:[UIImage imageNamed:@"arrowUpH.png"] forState:UIControlStateHighlighted];
    [focusButton addTarget:self action:@selector(focusOrDefocusCourse) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:focusButton]; 
```

按钮背景如下所示： ![按钮](../Images/2c387d0c9d5b6a2041177c14148af138.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:33:00.710

这很好..一旦用框架测试..

```
UIButton *btn_foucs = [UIButton buttonWithType:UIButtonTypeCustom];

[btn_foucs setFrame:CGRectMake(20, 20, 200, 40)];

[btn_foucs setImage:[UIImage imageNamed:@"btn_erase.png"] forState:UIControlStateNormal];

[btn_foucs setImage:[UIImage imageNamed:@"btn_erase_h.png"] forState:UIControlStateHighlighted];

[self.view addSubview:btn_foucs]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T03:26:54.500

您可能想看看 UIButton 属性`imageEdgeInsets`。这使您可以使图像仅绘制到框架的一部分中，从而使可触摸区域大于图像本身（减少“丢失”按钮的机会）。例如，您可以执行以下操作：

```
int touch_offset = 10;
[focusButton setFrame:CGRectMake(self.bounds.size.width-(self.bounds.size.width/widthFactor)+108-touch_offset, self.bounds.origin.y+(self.bounds.size.height/(heightFactor*2))+2-touch_offset, 36+(touch_offset*2), 40+(touch_offset*2))];
focusButton.imageEdgeInsets = UIEdgeInsetsMake(touch_offset, touch_offset, touch_offset, touch_offset); 
```

这应该使可触摸区域比每边的图像宽 10 像素，可通过更改 touch_offset 值进行调整。作为一般准则，Apple 建议使用不小于 44x44 像素的可触摸区域。

# entity-framework - 实体框架中的匹配日期和计数

> ID：12737940
> 
> 赞同：0
> 
> 时间：2012-10-05T00:33:15.297
> 
> 标签：entity-framework

我有两张桌子：

```
create table dbo.Dates (
  Id int not null
    constraint Dates_Id_PK primary key clustered (Id),
  [DateValue] date not null
}

create table dbo.Posts (
  Id int identity not null 
    constraint Posts_Id_PK primary key clustered (Id),
  Created datetime not null,
  Title nvarchar (200) not null
) 
```

对于这些表，我有 Date 和 Post 实体。

如何获得一个表格，其中包含 Dates 中的 DateValue 列以及该日期的帖子数。

我需要将 datetime Created 值与日期 DateValue 匹配。

谢谢，

米格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:51:21.947

我假设您`Post`的 s 有带时间的日期，因此您必须将它们截断为日期部分（如`Date`a 的属性`DateTime`）：

```
from d in context.Dates
select new { 
             Date = d.DateValue,
             NrOfPosts = (from p in context.Posts
                 where EntityFunctions.TruncateTime(t.Created) == d.DateValue
                 select p).Count()
           } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:05:23.297

您可以使用匿名类型。尝试以下代码段。

```
DateTime dateToMatch = GetDateToMatch();

using(YourEntities context = new YourEntities())
{
    var result = context.Dates.Where(d => d.DateValue == dateToMatch)
                              .Select(d => new { Date = d.DateValue, PostCount = d.Posts.Count() });
} 
```

# regex - 如何正则表达式字符串 - 长度 8，第一个字符字母和剩余数字

> ID：12737941
> 
> 赞同：22
> 
> 时间：2012-10-05T00:33:27.800
> 
> 标签：regex

我正在尝试创建一个正则表达式来匹配具有以下条件的字符串

*   长度 8
*   第一个字符必须是字母 az 或 AZ
*   剩下的 7 必须是数字 0-9

例子

*   a5554444
*   B9999999
*   c0999999

这是我到目前为止所拥有的

```
^[0-9]{8}$ 
```

检查第一个字符时我缺少什么？我试过了

```
^[a-zA-Z][0-9]{8}$ 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-05T00:35:42.677

我认为这就是你想要的：

```
^[a-zA-Z][0-9]{7}$ 
```

{...} 元字符仅匹配最前面的模式，在您的情况下是 [0-9]。正则表达式解释如下：

1.  从字符串的开头开始 (^)
2.  仅匹配第一个位置中的任何字符 az 或 AZ ([a-zA-Z]) 一次
3.  匹配从第二个点开始的任何字符 0-9 ([0-9])
4.  [0-9] 步骤 3 中提到的上述模式必须恰好存在 7 次 ({7})

当您按照原始问题输入 {8} 时，您将假定字符串长度总计为 9：第一个字符不区分字母大小写，其余 8 个字符为数字。

# namespaces - TypeScript 是否支持命名空间？

> ID：12737942
> 
> 赞同：53
> 
> 时间：2012-10-05T00:33:31.900
> 
> 标签：namespaces, typescript

如标题所示：TypeScript 是否支持命名空间？如果是这样，我该如何使用它们？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-05T08:12:29.733

Typescript 允许定义与 ECMAScript 6 中的内容密切相关的**模块**。以下示例取自规范：

```
module outer {
    var local = 1;
    export var a = local;
    export module inner {
        export var x = 10;
    }
} 
```

如您所见，模块具有名称并且可以嵌套。如果您在模块名称中使用点，typescript 会将其编译为嵌套模块，如下所示：

```
module A.B.C {
    export var x = 1;
} 
```

这等于

```
module A {
    module B {
        module C {
            export var x = 1;
        }
    }
} 
```

同样重要的是，如果您在一个打字稿程序中重复使用完全相同的模块名称，则代码将属于同一个模块。因此，您可以使用嵌套模块来实现分层命名空间。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-07-24T18:01:51.123

从 1.5 版开始，Typescript 支持`namespace`关键字。命名空间相当于内部模块。

来自[Typescript 的新增功能](https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#namespace-keyword)：

> 前：
> 
> ```
> module Math {
>     export function add(x, y) { ... }
> } 
> ```
> 
> 后：
> 
> ```
> namespace Math {
>     export function add(x, y) { ... }
> } 
> ```

为了定义一个内部模块，现在您可以同时使用`module`和`namespace`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-03T21:54:08.553

这是一个 TypeScript 命名空间示例：

```
///<reference path='AnotherNamespace/ClassOne.ts'/>
///<reference path='AnotherNamespace/ClassTwo.ts'/>

module MyNamespace
{
    import ClassOne = AnotherNamespace.ClassOne;
    import ClassTwo = AnotherNamespace.ClassTwo;

    export class Main
    {
        private _classOne:ClassOne;
        private _classTwo:ClassTwo;

        constructor()
        {
            this._classOne = new ClassOne();
            this._classTwo = new ClassTwo();
        }
    }
} 
```

您可以在此处查看更多信息：http: [//www.codebelt.com/typescript/javascript-namespacing-with-typescript-internal-modules/](http://www.codebelt.com/typescript/javascript-namespacing-with-typescript-internal-modules/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-05T00:35:52.250

没有“命名空间”关键字，但内部模块（使用“模块”关键字）和外部模块（使用“导出”关键字）提供了一种类似的方式来将您的代码划分为逻辑层次结构。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-21T11:45:47.783

错误的...

```
module A.B.C {
    export var x = 1;
} 
```

等于

```
module A {
    export module B {
        export module C {
            export var x = 1;
        }
    }
} 
```

因为您可以在模块 A 之外编写：

```
var y = A.B.C.x; 
```

但 ：

```
module A {
    module B {
        module C {
            export var x = 1;
        }
        var y = C.x; // OK
    }
    //var y = B.C.x; // Invalid
}
//var y = A.B.C.x;   // Invalid 
```

# android - Android：从任何屏幕启动 Intent

> ID：12737949
> 
> 赞同：1
> 
> 时间：2012-10-05T00:34:23.203
> 
> 标签：android, android-intent

我想在发生特定事件时打开一个屏幕，不管我现在在哪里，我该怎么做？

```
Intent Iatualizar = new Intent(this, Atualizar.class); 
startActivity(Iatualizar); 
```

如果我在屏幕上打开程序，上面的代码有效，但在屏幕在后台时无效。如何让它发挥作用？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:08:25.893

您应该只创建一个在事件发生时加载您的活动的服务。

为此，您可以在加载应用程序时启动服务，并将事件接收器放在服务类中。这样，即使其他应用程序正在运行并且您的应用程序不在前台（显示在屏幕上），您仍然可以触发事件。

如果您的活动不在前台并且您开始资源不足，Android 垃圾收集将尝试终止您的活动。

如果您想更进一步，使服务成为前台服务，那么理论上它将是 Android 在内存不足时将杀死的最后一件事。如果您需要代码示例，请告诉我。

希望这可以帮助你！干杯

- 编辑 -

这是一个帮助您入门的代码示例。

在您的活动中 onCreate 调用一些类似于您上面的代码来启动您的服务。IE：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
Intent IatualizarService = new Intent(this, AtualizarService.class); 
startService(Iatualizar);
} 
```

如果你愿意，你也可以在你的 onResume 中包含它，（或者从一个按钮启动它，或者你希望这个服务启动）。

然后像这样创建一个服务类：

```
public class AtualizarService extends Service {
private final IBinder mBinder = new MyBinder();

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {

    return START_STICKY;
  }

    @Override
    public void onCreate() {

// In here you can make your service a foreground service to help prevent garbage collection from occurring. 
 makeforeground();

}

    private boolean makeforeground() {
        String msg = "Turning on foreground service";
        ErrorLog.i(getApplicationContext(), TAG, msg);
        try {
            Notification notification = new Notification(
                    R.drawable.ic_dialog_info,
                    getText(R.string.notification_text),
                    System.currentTimeMillis());
            notification.flags |= Notification.FLAG_AUTO_CANCEL;

            Intent activityIntent = new Intent(this, YourMainActivity.class);
            activityIntent.setAction(Intent.ACTION_MAIN);
            activityIntent.addCategory(Intent.CATEGORY_LAUNCHER);
            activityIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                    | Intent.FLAG_ACTIVITY_SINGLE_TOP);

            PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,
                    activityIntent, 0);
            notification.setLatestEventInfo(this,
                    getText(R.string.notification_title),
                    getText(R.string.notification_text), pendingIntent);
            startForeground(1234567890, notification); // random id
            return true;
        } catch (Exception e) {
            String error = "displayNotification Error Message: "
                    + e.getMessage() + " Cause: " + e.getCause();
            ErrorLog.e(GlobalParameters.getContext(),
                    TAG + " Notification Foreground Service", error);
            return false;
        }
    }

    @Override
    public void onDestroy() {
}

  @Override
  public IBinder onBind(Intent arg0) {
    return mBinder;
  }
    public class MyBinder extends Binder {
        AtualizarService getService() {
            return AtualizarService .this;
        }
    }
} 
```

然后在这个服务类中，你可以添加一个广播接收器，它可以触发你想要的任何事件。然后根据需要加载您的活动。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:37:46.853

将[FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)添加到您的 Intent 中。如果您检查日志猫，它也会告诉您这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T00:42:01.790

试试这个，你也可以使用下面的代码启动一个服务

```
Intent Iatualizar = new Intent(this, Atualizar.class); 
Iatualizar.addFlags(FLAG_ACTIVITY_NEW_TASK);
startActivity(Iatualizar); 
```

# ios - 在 GameCenter 中看不到自定义成就图标

> ID：12737959
> 
> 赞同：5
> 
> 时间：2012-10-05T00:36:18.140
> 
> 标签：ios, game-center

我在 Game Center 中为我的应用程序创建了一个成就，其中包含 1024 x 1024 图形的英文本地化。

我完成了成就，但是当我将我的`GKGameCenterViewController`标签加载到成就中时，我看到了默认的奖杯图标。英文文本在那里并且正确。我处于沙盒模式。

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:53:56.180

这是一个缓存问题。要修复它，只需将位于`~/Library/Application Support/iPhone Simulator/<VERSION>/Library/Caches/GameKit/Images`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T05:48:58.557

我不确定，但我认为对于尚未上线的游戏来说这很正常......有时我的游戏也会发生同样的情况！稍等片刻，然后再尝试在 Game Center 中查看...

# java - Swing 组件上的 Java 7 泛型

> ID：12737964
> 
> 赞同：3
> 
> 时间：2012-10-05T00:37:25.357
> 
> 标签：java, swing, generics, java-7

我有一个类，它扩展了一个 Swing 组件，例如：

```
public class MyCustomClass extends JComboBox 
```

这里的问题是我收到编译器警告：

**JComboBox 是一种原始类型。应该参数化对泛型类型 JComboBox 的引用**

我不确定是否对 JComboBox 进行参数化，以便从这里进一步扩展的任何类都可以使用任何类型的对象。我试图把它作为扩展 JComboBox 等等，但这不起作用。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T00:42:13.300

如果对 JComboBox 的类型参数没有限制，那么您可以使用：

```
public class MyCustomClass<T> extends JComboBox<T> 
```

如果我没记错语法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T00:45:26.170

泛型影响模型中预期的数据类型。从长远来看，这是一个很好的功能，但可能意味着一些短期的痛苦。

你有两个我能想到的选择。

首先，构建您的自定义类，以便它允许泛型通过......

```
public class MyCustomClass<E> extends JComboBox<E> 
```

其次，传递一个`Object`作为组合框的数据类型

```
public class MyCustomClass extends JComboBox<Object> 
```

（或者第三，将自定义组合框限制为预定义的数据类型，以实现其构建目的）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T00:42:42.747

该参数是您想要在 ComboBox 中的对象类型。

您的选择是：

**A：** `MyCustomClass`总是期望相同类型的对象，所以你可以这样做：

```
public class MyCustomClass extends JComboBox<String> 
```

或者

**B：** `MyCustomClass`仍然没有“足够深”到树下以知道它将处理的类的类型。所以你也是：

```
public class MyCustomClass<T> extends JComboBox<T> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T00:42:35.717

`JComboBox`在 Java 7 中成为泛型类，例如，您应该告诉编译器`JComboBox`实例中的对象类型。所以你可以让你的类泛型，或者指定`JComboBox`.

# java - 如何将查看器响应保存到服务器？

> ID：12737969
> 
> 赞同：-2
> 
> 时间：2012-10-05T00:37:40.077
> 
> 标签：java, save

如果我想保存对我正在编码到服务器的网站上的查询的响应，我该怎么做？

这是一个例子。如果我有一个带有“给我们评分”表单的网站，而有人用“AWFUL SITE！”的形式回答。我将如何保存和检索该信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:49:39.270

有几种方法可以做你想做的事。我将描述其中的两个。

1.  您可以将每个评级附加到 Web 服务器上文件的末尾。这通常在服务器端脚本语言中完成，例如 PHP 或 ASP.NET，并且您可能希望设置文件的权限，使其不是所有人都可以读取的。

2.  您可以在数据库（MySQL 或其他）中设置一个表，并为给定的每个评级添加一个新行。同样，这将在 PHP 或 ASP.NET 之类的东西中完成，并且您需要确保对 SQL 注入攻击采取预防措施（如果您使用 PHP 数据对象而不是已弃用的 mysql_* 函数，则问题不大）。

我个人会选择第二个选项，因为它更易于管理和更改，并且更易于设置，以便您可以在每一行中存储 IP、姓名、可选电子邮件和消息。就像我说的那样，您可以稍后添加一个新字段，而不会遇到明显的问题。

# javascript - 递归函数返回未定义

> ID：12737970
> 
> 赞同：19
> 
> 时间：2012-10-05T00:37:40.947
> 
> 标签：javascript, recursion, return

我有一个计算税金的函数。

```
function taxes(tax, taxWage) 
{
    var minWage = firstTier; //defined as a global variable
    if (taxWage > minWage) 
    {
        //calculates tax recursively calling two other functions difference() and taxStep() 
        tax = tax + difference(taxWage) * taxStep(taxWage);
        var newSalary = taxWage - difference(taxWage);
        taxes(tax, newSalary); 
    }
    else 
    {
        returnTax = tax + taxWage * taxStep(taxWage);
        return returnTax;
    }
} 
```

我不明白为什么它不停止递归。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-05T00:49:05.610

在您的职能部门中：

```
if (taxWage > minWage) {
    // calculates tax recursively calling two other functions difference() and taxStep() 
    tax = tax + difference(taxWage) * taxStep(taxWage);
    var newSalary = taxWage - difference(taxWage);
    taxes(tax, newSalary); 
} 
```

您没有从函数或设置返回值`returnTax`。当您不返回任何内容时，返回值为`undefined`.

也许，你想要这个：

```
if (taxWage > minWage) {
    // calculates tax recursively calling two other functions difference() and taxStep() 
    tax = tax + difference(taxWage) * taxStep(taxWage);
    var newSalary = taxWage - difference(taxWage);
    return taxes(tax, newSalary); 
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-05T00:48:23.627

您的递归存在错误：

```
taxes(tax, newSalary); 
```

`if`当条件评估为真时，您不会返回任何内容。您需要将其更改为：

```
return taxes(tax, newSalary); 
```

您`return`在`else`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-06T18:21:43.653

例如`taxes(tax, newSalary);`返回`100`；

```
taxes(tax, newSalary); // undefined 
```

您希望看到`100`，因为您`taxes(tax, newSalary)`递归调用但实际上您获得了值 ( `100`) 并且您需要返回该值。

```
return taxes(tax, newSalary); // 100
// simply it's the same as
// return 100
// because taxes(tax, newSalary) returned 100 
```

在`return 100`你得到这个值之后。

# vim - 防止从 .vim/plugin/CVS/Base/*.vim 自动加载脚本

> ID：12737971
> 
> 赞同：1
> 
> 时间：2012-10-05T00:37:41.930
> 
> 标签：vim, cvs, config, autoload

我使用 CVS 在不同的 PC 之间同步我的配置文件，包括我的`$HOME/.vim`文件夹。

但有一个问题。CVS 喜欢保留文件的旧副本，`.vim/plugin/CVS/Base/`Vim 认为它应该加载这些文件。我希望 vim 忽略它们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T04:29:04.940

您可以`SourceCmd`在这种情况下使用：

```
augroup ForbidCVS
    autocmd!
    autocmd SourceCmd */CVS/* :" Do nothing
augroup END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:37:41.930

在底部`$HOME/.vimrc`添加：

```
" Disable normal auto-loading of plugins
set noloadplugins

" Now load just the plugins we want
runtime! plugin/*.vim 
```

这与通常从 plugin/ 及其所有子文件夹加载脚本的默认行为不同。我怀疑大多数用户不会创建子文件夹。对于这样做的用户，这是行不通的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:22:24.083

在多台计算机上共享您的 .vim 和 .vimrc 的一种简单方法是将它们放在保管箱上并将它们符号链接到您工作的每台计算机的 $HOME 目录。不需要 CVS，例如，您对 .vimrc 所做的任何更改都可以立即用于所有其他计算机。

另一个很酷的技巧是使用 vim gsession 插件来创建存储到 .vim 目录的全局会话文件。因此，如果您在一台计算机上创建会话，则其他所有计算机也都可以使用它。

# stream - 网络摄像头可以在没有计算机的情况下直接流式传输到 RTMP Flash 服务器吗？

> ID：12737974
> 
> 赞同：1
> 
> 时间：2012-10-05T00:37:54.180
> 
> 标签：stream, video-streaming, webcam, flash-media-server, ip-camera

我试图弄清楚是否可以直接从网络摄像头（IP 摄像头/网络摄像头）流式传输到 RTMP Flash 服务器。

目的是能够在某个位置设置摄像机，并能够直接从摄像机流式传输到 DaCast 或 justin.tv 等流媒体服务，而无需将其连接到进行编码的计算机上。它所需要的只是无线连接。

从技术上讲，相机必须拥有自己的编码器 (H.264) 和一个可以配置 Flash Media Server 以在其内置配置中流式传输的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:08:45.497

这个答案的一部分来自：[AskUbuntu: Security camera system server](https://askubuntu.com/a/57842/9598)

某些 IP 摄像机，有多种风格、品牌名称和型号，提供自己的网页用于设置/预览/监控，您可以从中提取可以在网站中自己的项目中使用的代码部分。

您不会说通过流媒体到 justin.tv 或其他基于 Web 的流媒体服务有什么想法，但如果您希望实现的是从基于 Web 的流媒体服务本身的普及中获得观众的好处，那么此解决方案不适合您。

但是，如果您使用基于网络的流媒体服务只是为了收集代码部分以便在您自己的定制网站中使用，那么您可以使用您自己的 IP 摄像机提供的代码。

> 据我所知，大多数 IP 摄像机，如 [这家虚拟商店](https://askubuntu.com/a/57842/9598)所示，起价 945.00 美元墨西哥比索（几乎 100 美元），还有这款[D-Link DC-900](http://www.dlink.com/products/?pid=270)（大部分都经过我测试) 自行解决移动侦测、定时录像和遥控（只有少数具有360°移动、遥控功能）。
> 
> 如何从外部访问您的摄像机就像获得动态域名服务并在调制解调器/路由器中使用它一样简单，或者，如果您有固定 IP，那么您没有问题，您还需要路由摄像机的特定端口，并使摄像机响应特定端口的请求。
> 
> 一切都可以通过网络浏览器进行监控/控制，就像在我的安全系统的这个例子中，它在一个网页中嵌入了 3 个摄像头（其中 1 个是远程控制的）。（在需要隐私的地方模糊）。
> 
> ![在此处输入图像描述](../Images/ad58ecd1b92e77156589aedfc32dc12e.png)
> 
> 遥控摄像头就是[这里展示](http://www.e-tronic-shop.com/mystore/esp/detalle.php?idc=0&id=43)的那个，具有双向音频（是的，您可以与靠近摄像头的人交谈）、无线和红外夜视。（对不起，我不卖这些相机，但我在墨西哥城那边买的。）

在此处提供的示例中，我使用了原始 IP Camera 网页监控系统的部分代码，如下图所示：

原装 DCS-900 相机的基于 Web 的应用程序

![在此处输入图像描述](../Images/1fb076d01a6faa3be6703a8f379ac9b1.png)

所以我认为这可以直接从 IP Camera Web 应用程序完成，但正如我之前提到的，如果您希望在基于 Web 的流媒体服务上获得优势（以获得观众），您可能希望考虑不同的选择。

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-26T13:02:38.887

您可以使用[CamStreamer RTMP 客户端](http://camstreamer.com)- 直接在 Axis IP 摄像机中运行的应用程序。带有 CamStreamer 的摄像机将视频推送到任何 RTMP 流媒体服务（LiveStream、uStream、YouTube Live 等）。

# git - 如何解决与 2 个远程仓库的 git merge/rebase 冲突？

> ID：12737975
> 
> 赞同：2
> 
> 时间：2012-10-05T00:37:54.420
> 
> 标签：git, merge, rebase, git-rebase, merge-conflict-resolution

存在 git rebase 冲突问题，但仅在使用 2 个远程存储库时。这是工作流程：

1.  做工作...
2.  犯罪
3.  拉 -r 登台大师

这工作正常。如果有冲突我可以解决。

然后在使用生产远程仓库时会出现问题。我是唯一一个推动生产的人。

1.  git pull -r production （由于某种原因需要在投入生产之前执行此操作......不知道为什么，因为它应该是一个快速推进。）
2.  git推送生产
3.  git pull -r staging （更新我的仓库）

这是我在未处理的文件上遇到各种合并冲突的地方。

冲突可能如下所示：

```
<<<<<<< HEAD
  here's some code...
=======
  more code...
>>>>>>> commit foo 
```

所以，这里有几个问题：

1.  当我是唯一一个推动生产的人时，为什么我需要退出生产？
2.  为什么已经提交但我没有更改的代码会出现合并冲突？
3.  我会选择哪个提交？HEAD 或提交 foo
4.  什么是更好的过程，所以它不会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:30:58.367

这是您为两个单独的远程仓库完成的直接副作用`pull --rebase`：您将现有的本地提交重新定位在您刚刚获取的远程 HEAD 之上，确保创建一个新的 HEAD SHA1，该新 HEAD SHA1 在您的第二个远程仓库中不存在（`prod`例如）

当在同一个远程仓库的同一个分支上协作时，您可以将`pull --rebase`其用于从未在任何地方推送过的提交，如“[我何时应该使用 git pull --rebase？ ”中所述。](https://stackoverflow.com/questions/2472254/when-should-i-use-git-pull-rebase)

但是当你有 2 个 remotes repos 时，你应该在第一次推送后避免它，如“[什么时候会给`git pull --rebase`我带来麻烦？](https://stackoverflow.com/questions/2590260/when-will-git-pull-rebase-get-me-in-to-trouble?lq=1) ”所示。

有关该主题的更多详细信息，请参阅“[哪些 git 分支模型实际上有效？](https://stackoverflow.com/questions/2621610/what-git-branching-models-actually-work) ”。

# random - 本机 Vim 随机数脚本

> ID：12737977
> 
> 赞同：14
> 
> 时间：2012-10-05T00:38:05.717
> 
> 标签：random, vim

我知道有多种方法可以获取随机数，例如从 shell 中获取。但是，我在很少编译的 android 手机上运行 vim。此外，它不必是严格随机的。关键是，在 Vim 中获得一系列相当好的随机数的有趣、简洁、快速（即使用 vim 原生函数）或短方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-05T04:23:19.650

尝试类似的东西

```
function Rand()
    return str2nr(matchstr(reltimestr(reltime()), '\v\.@<=\d+')[1:])
endfunction 
```

. 我知道没有比使用某些时间函数更好的选择（其中有两个：`reltime()` 和`localtime()`，但后者仅每秒更新一次）。我宁愿避免使用随机数或使用`pyeval('random.randint(1, 10)')`（以 开头`python import random`），因为 shell 很慢，而且我不信任基于时间的解决方案。

注意：文档说返回的项目的格式`reltime()`取决于系统，因此我使用的是`reltimestr()`，而不是做一些`reltime()[1]`看起来像包含纳秒的事情。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-11T12:14:04.240

我最近自己玩过 Vim 脚本中的随机数。以下是我在此过程中找到的一些资源。

## 没有 Vim 脚本

如果可以，请务必使用外部随机数生成器。通常，它们比在 Vim 脚本中可以完成的任何事情都更好更快。

例如，尝试

*   `:python import random; print random.randrange(1, 7)`
*   `:echo system('echo $RANDOM')`
*   另一种脚本语言，[例如 Ruby](http://mo.morsi.org/blog/node/299)

## 图书馆

Vim 脚本库。这些希望努力提供质量不错的 RNG 实现。

*   **[vital.vim](https://github.com/vim-jp/vital.vim)**是由 vim-jp 用户组创建的一个优秀而全面的库。他们的随机数生成器具有一系列令人印象深刻的功能，是我所知道的最好的纯 Vim 脚本 RNG。vital.vim 使用[Xorshift 算法](http://www.jstatsoft.org/v08/i14/paper)。看看这个！

    用vital.vim掷骰子：

    ```
    let Random = vital#of('vital').import('Random')
    echo Random.range(1, 7) 
    ```

*   **[vim-rng](https://github.com/dahu/vim-rng)**是一个小型随机数生成器插件。它导出了几个依赖于[乘法进位算法](https://en.wikipedia.org/wiki/Multiply-with-carry)的全局函数。这个项目似乎正在进行中。

    用 rng 掷骰子：

    ```
    echo RandomNumber(1, 6) 
    ```

*   **[magnum.vim](https://github.com/glts/vim-magnum)**是我自己的小型大整数库。我最近添加了一个随机数生成器，可以生成任意大小的整数。它使用[XORSHIFT-ADD 算法](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/XSADD/)。

    用 magnum.vim 掷骰子：

    ```
    let six = magnum#Int(6)
    echo magnum#random#NextInt(six).Add(magnum#ONE).Number() 
    ```

*   **[Rndm](http://www.drchip.org/astronaut/vim/index.html#RNDM)**的存在时间比其他库要长得多。它的功能作为几个全局函数公开。用 Rndm 掷骰子：

    ```
    echo Urndm(1, 6) 
    ```

## 讨论和片段

最后，一些有见地的讨论和 Vim 脚本片段的链接。

*   **[ZyX`reltime`](https://stackoverflow.com/a/12739441)**在此页面上**[的片段。](https://stackoverflow.com/a/12739441)**

*   loreb**[在 GitHub 上的 vimprng 项目](https://github.com/loreb/vimprng)**在 Vim 脚本中有大量的 RNG 实现。很有用。

*   [这个旧的邮件列表讨论](http://vim.1045645.n5.nabble.com/simple-16-bit-random-number-generator-td2843842.html)有几个 Vim 脚本片段。Bee-9 给出的第一个限制为 16 位，但我发现它非常有效。这里是：

    ```
    let g:rnd = localtime() % 0x10000

    function! Random(n) abort
      let g:rnd = (g:rnd * 31421 + 6927) % 0x10000
      return g:rnd * a:n / 0x10000
    endfunction 
    ```

*   [另一个脚本](http://www.jukie.net/bart/conf/vim/plugin/random.vim)，在一个名叫 Bart 的人的个人配置文件中找到。

*   **[Vimcasts.org 上的第 57 集](http://vimcasts.org/e/57)**讨论了 Vim 的“表达式寄存器”，并始终引用随机数示例。参考这个 Stackoverflow 问题和 ZyX 的片段。受到推崇的。

*   wikia 上的 Vim wiki 有一篇文章['Jump to a random line'](http://vim.wikia.com/wiki/Jump_to_a_random_line)有一些尚未提及的资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-11T09:59:45.243

根据其他人的答案和互联网上的其他资源，我编写了两个函数来生成给定范围内的随机整数`[Low, High]`。

这两个函数都接收两个参数：`Low`和`High`返回此范围内的随机数。

# 结合 Python 和 Vim 脚本

第一个函数结合了 Python 和 Vim 脚本。

```
" generate a random integer from range [Low, High] using Python
function! RandInt(Low, High) abort
" if you use Python 3, the python block should start with `python3` instead of
" `python`, see https://github.com/neovim/neovim/issues/9927
python3 << EOF
import vim
import random

# using vim.eval to import variable outside Python script to python
idx = random.randint(int(vim.eval('a:Low')), int(vim.eval('a:High')))

# using vim.command to export variable inside Python script to vim script so
# we can return its value in vim script
vim.command("let index = {}".format(idx))
EOF

return index
endfunction 
```

# 纯 Vim 脚本

我建议的第二个函数使用纯 vim 脚本：

```
function! RandInt(Low, High) abort
    let l:milisec = str2nr(matchstr(reltimestr(reltime()), '\v\.\zs\d+'))
    return l:milisec % (a:High - a:Low + 1) + a:Low
endfunction 
```

# 使用`luaeval()`（**仅限 Neovim**）

第三种生成随机数的方法是通过[luaeval()](https://neovim.io/doc/user/lua.html#luaeval())使用 lua 。

```
" math.randomseed() is need to make the random() function generate different numbers 
" on each use. Otherwise, the first number it generate seems same all the time.
luaeval('math.randomseed(os.time())')
let num = luaeval('math.random(1, 10)') 
```

如果你想在不严重的场合产生随机数，你可以使用这些方法作为开始。

# tridion - Tridion 工作流自动决策的事件处理程序

> ID：12737979
> 
> 赞同：1
> 
> 时间：2012-10-05T00:38:24.907
> 
> 标签：tridion, tridion-2011

在 Tridion 2011 SP1 中遇到自动决策问题。

我有一个自动决策项目，它沿着两条路径之一（一条用于手动决策，另一条用于手动活动）。附上截图。

我需要做的是分析提交工作流第一步的用户的权限，并自动将工作流向下移动到正确的路径。

我正在为 AutomaticAssignActivity 使用事件处理程序（通过事件日志写入成功测试），并在 API 中找到了如何完成活动，但分配下一个活动没有过载。

我发现[这篇文章](https://stackoverflow.com/questions/11537828/how-to-set-the-next-activity-from-the-current-automated-activity)很有趣，并尝试实现 CoreServiceSession 和 SessionAwareCoreServiceClient 但每次代码尝试加载核心服务时，我都会收到以下错误：**无法加载文件或程序集 'Tridion.ContentManager.CoreService.Client, Version=6.1 .0.996，Culture=neutral，PublicKeyToken=ddfc895746e5ee6b' 或其依赖项之一。该系统找不到指定的文件。**

我在我的 web 层中使用核心服务来生成一些小的内容，但它不想在事件系统中工作。我究竟做错了什么？我的事件系统 DLL 位于 Tridion.ContentManager.CoreService.Client.dll 所在的 Tridion bin 文件夹中。

任何帮助表示赞赏:)

![工作流程布局](../Images/28ab04bd3b8703b1b4d0c7c403e9db33.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:04:29.510

请注意，如果您正在开发事件处理程序，则最好使用 TOM.NET API（它是事件系统和模板开发的首选 API）

其余的，使用核心服务

如果您想使用核心服务，您可以创建一个 .NET DLL，然后从您的自动化活动中调用它。这个线程有一些关于它的好信息：

*   [我可以使用哪个 API 来编写 SDL Tridion 工作流活动？](https://stackoverflow.com/questions/11185079/which-api-can-i-use-for-writing-sdl-tridion-workflow-activities)

# jquery - 任何滑块和更改选项卡名称？

> ID：12737983
> 
> 赞同：0
> 
> 时间：2012-10-05T00:38:43.783
> 
> 标签：jquery, jquery-plugins, anythingslider

我对这一切都很陌生。我正在尝试执行以下操作：1）以用户无需编码即可更改内容的方式实现这一点 2）在 SP 2010 网站上运行 3）目前，我在页面查看器中有一个 HTML 页面，所有相关文件在根网站上的文件夹。

我需要知道执行此操作的最佳方法，以及如何更改内容滑块上的选项卡名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:26:48.660

嗨，Kat，欢迎来到 StackOverflow。

由于您有多个问题，我不确定您要在这里问什么。我建议您将此问题拆分为多个更具体的部分，因为不清楚您所说的“以用户无需编码即可更改内容的方式实施”是什么意思。

无论如何，我会试着回答你关于 AnySlider 的问题。我猜你想更改滑块选项卡的文本？查看有关如何使用它的[`navigationFormatter`选项文档。](https://github.com/CSS-Tricks/AnythingSlider/wiki/Navigation-options#wiki-navigationformatter)如果您遇到困难或需要其他帮助，只需在此处添加评论。

# asp.net-mvc-3 - Web.config 转换：无法识别的属性“xmlns:xdt”。请注意，属性名称区分大小写

> ID：12737984
> 
> 赞同：44
> 
> 时间：2012-10-05T00:38:44.270
> 
> 标签：asp.net-mvc-3, web-config

我在 MVC 3.0 项目中遇到这个奇怪的间歇性错误当我构建项目时，有时我会收到以下错误消息：

> 无法识别的属性“xmlns:xdt”。请注意，属性名称区分大小写。

这是指标准的 web.config 转换文件（Web.Release.config 复制在下面）没有其他错误或警告。这发生在调试模式和发布中。有时，如果我清理解决方案，它就会清除

**开始更新**

发现问题。在 MVC 项目文件（MyProject.csproj）中，我将构建视图设置为 true

```
<MvcBuildViews>true</MvcBuildViews> 
```

一旦放回**假**，上述错误就会消失。我想要构建视图，因为它可以阻止很多愚蠢的视图代码错误等，并且是一种性能增强（页面是预编译而不是 jit）

任何人都知道这是导致错误的原因吗？这是一个错误吗？

**结束更新**

```
<?xml version="1.0"?>

<!-- For more information on using Web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <!--
    In the example below, the "SetAttributes" transform will change the value of 
    "connectionString" to use "ReleaseSQLServer" only when the "Match" locator 
    finds an atrribute "name" that has a value of "MyDB".

    <connectionStrings>
      <add name="MyDB" 
        connectionString="Data Source=ReleaseSQLServer;Initial Catalog=MyReleaseDB;Integrated Security=True" 
        xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
    </connectionStrings>
  -->
  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
    <!--
      In the example below, the "Replace" transform will replace the entire 
      <customErrors> section of your Web.config file.
      Note that because there is only one customErrors section under the 
      <system.web> node, there is no need to use the "xdt:Locator" attribute.

      <customErrors defaultRedirect="GenericError.htm"
        mode="RemoteOnly" xdt:Transform="Replace">
        <error statusCode="500" redirect="InternalError.htm"/>
      </customErrors>
    -->
  </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-16T16:24:17.390

我遇到了同样的问题。你会发现很多与 MvcBuildViews 和各种错误条件相关的玩笑。但似乎没有人提到这个特殊的错误。一个对我有用的快速修复方法是删除受影响 Web 项目的“obj”目录的内容，然后重新构建。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-11T13:51:36.993

这是一种解决方法，但您可以将以下行添加到**预构建**命令中：

`del $(ProjectDir)obj\* /F /S /Q`

右键单击您的项目 > 属性 > 构建事件 > 预构建

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-10T07:49:58.583

**这适用于持续集成和 WebDeploy：**

这个问题发生在我设置的那一刻

```
<MvcBuildViews>true</MvcBuildViews> 
```

在我**需要**做的项目文件中。

在阅读和测试我发现的关于这个问题的所有内容之后，我有一个 wokraround，它也适用于通过 MSBuild 的 WebDeploy

```
MSBUild.exe ... /p:DeployOnBuild=true 
```

您（仅）需要在构建前和构建后事件期间删​​除构建文件夹中的 TransformWebConfig 子文件夹。它甚至可以与持续集成服务器一起使用，如果不存在文件夹就会中断

预构建事件命令行：

```
if exist "$(ProjectDir)obj\$(ConfigurationName)\transformwebconfig\" del "$(ProjectDir)obj\$(ConfigurationName)\transformwebconfig\*" /F /S /Q 
```

构建后事件命令行：

```
if exist "$(ProjectDir)obj\$(ConfigurationName)\transformwebconfig\" del "$(ProjectDir)obj\$(ConfigurationName)\transformwebconfig\*" /F /S /Q 
```

这甚至可以正常工作`Resharper`，如果您删除整个`obj`文件夹，有时会感到困惑。

确保设置`Run the post-build event`为`always`!!

**更新：** 用 $(ConfigurationName) 替换 debug 和 release 并删除产生的重复行

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-20T16:02:13.313

我通过做约伯所说的同样的事情来解决我的冲突。删除属性

```
xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" 
```

从主 Web.config 并离开它进入 Web.debug.config 和 Web.release.config

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-27T18:57:34.897

只需从 web.config 中删除 xmlns:xdt 属性，但将其保留在 web.release.config 和 web.debug.config 中。

您的转换仍然有效 - 您的网站也是如此。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-18T13:47:37.973

Microsoft Team 提供了另一种解决方法。[在此处](https://connect.microsoft.com/VisualStudio/feedback/details/779737/error-allowdefinition-machinetoapplication-beyond-application-level)查看详细信息。

只需将此片段复制粘贴到您的 .csproj 或 .vbproj 文件中：

```
<PropertyGroup>
  <_EnableCleanOnBuildForMvcViews Condition=" '$(_EnableCleanOnBuildForMvcViews)'=='' ">true</_EnableCleanOnBuildForMvcViews>
</PropertyGroup>
<Target Name="CleanupForBuildMvcViews" Condition=" '$(_EnableCleanOnBuildForMvcViews)'=='true' and '$(MVCBuildViews)'=='true' " BeforeTargets="MvcBuildViews">
  <ItemGroup>
    <_TempWebConfigToDelete Include="$(BaseIntermediateOutputPath)**\Package\**\*" />
    <_TempWebConfigToDelete Include="$(BaseIntermediateOutputPath)**\TransformWebConfig\**\*" />
    <_TempWebConfigToDelete Include="$(BaseIntermediateOutputPath)**\CSAutoParameterize\**\*" />
    <_TempWebConfigToDelete Include="$(BaseIntermediateOutputPath)**\TempPE\**\*" />
  </ItemGroup>
  <Delete Files="@(_TempWebConfigToDelete)" />
</Target> 
```

这将使用构建目标自动清理“obj”文件夹的过程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-21T15:05:08.173

我发现这对我来说效果更好：

```
del "$(ProjectDir)obj\*" /F /Q
del "$(ProjectDir)obj\$(ConfigurationName)\AspnetCompileMerge\*" /F /S /Q
del "$(ProjectDir)obj\$(ConfigurationName)\CSAutoParameterize\*" /F /S /Q
del "$(ProjectDir)obj\$(ConfigurationName)\Package\*" /F /S /Q
del "$(ProjectDir)obj\$(ConfigurationName)\ProfileTransformWebConfig\*" /F /S /Q
del "$(ProjectDir)obj\$(ConfigurationName)\TempPE\*" /F /S /Q
del "$(ProjectDir)obj\$(ConfigurationName)\TransformWebConfig\*" /F /S /Q 
```

否则构建抱怨`edmxResourcesToEmbed`消失。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-17T10:42:55.177

我也见过这个。具体来说，在 Visual Studio 中的构建配置之间进行更改时，它是可重现的。

我以前的解决方法是删除`\obj`文件夹中的所有内容，但是在仔细检查了我的 web.config 之后，我发现它有一些错误的文本位于元素之外（即它是无效的 XML）。

似乎配置转换只是在尝试执行转换时吞噬了一个异常。

将我的 web.config 修复为有效，现在一切都按预期工作。

希望这可以帮助某人

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-23T02:06:54.677

我也遇到过这个问题。对我来说，这是因为我创建了一个名为“DevDebug”的新调试配置。我通过复制名为 web.DevDebug.config 的 web.debug.config 并将其添加到项目中来修复它。

然后，当我尝试运行 aspnet 编译器时，很满意它可以找到要合并的配置文件的正确配置版本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-12T12:03:13.420

我只是在 web.config 下面更改

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform"> 
```

到

```
<configuration> 
```

它解决了问题

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-13T21:18:44.890

1.  右键单击项目，单击**发布**
2.  转到**设置**->**文件发布选项**
3.  **在发布期间**取消选中预编译

 **如果您使用的是 Visual Studio 发布，这将防止 web.debug.config/web.release.config 将文件注入回 web.config。**

# joomla - 在 xml Joomla 中包含 xml

> ID：12737985
> 
> 赞同：0
> 
> 时间：2012-10-05T00:38:55.503
> 
> 标签：joomla, xml-parsing, joomla2.5

有没有办法在 Joomla 2.5 及更高版本中将 xml 文件包含到另一个文件中？

**我不是在问如何编写 joomla xml 参数。问题很简单，就像标题一样。有没有办法在 Joomla 中将一个 xml 包含到另一个中？**

我有 2 个文件`templateDetails.xml`并`extend.xml` 使用了这些示例：

[http://msdn.microsoft.com/en-us/library/aa302291.aspx](http://msdn.microsoft.com/en-us/library/aa302291.aspx)

[我们可以将 XML 文件导入另一个 XML 文件吗？](https://stackoverflow.com/questions/5121052/can-we-import-xml-file-into-another-xml-file)

起始码

**模板详细信息.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE install PUBLIC "-//Joomla! 2.5//DTD template 1.0//EN" "http://www.joomla.org/xml/dtd/1.6/template-install.dtd" [
       <!ENTITY extend SYSTEM "extend.xml">
    ]>
<extension version="2.5" type="template" client="site" method="upgrade">
  <name>...</name>
  <creationDate>...</creationDate>
  <author>...</author>
  <copyright>...</copyright>
  <authorEmail>...</authorEmail>
  <authorUrl>...</authorUrl>
  <version>1.0</version>
  <positions>
    <position>top</position>
  </positions>
  <config>
    <fields name="params">
      <fieldset name="basic">
        &extend;
      </fieldset>
    </fields>
  </config>
</extension> 
```

**扩展.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<field name="somevar" type="list" default="2" label="My label" description="My desc">
      <option value="1">Yes</option>
      <option value="2">No</option>
</field> 
```

我要么在某个地方犯了错误，要么应该使用另一种方法。任何帮助表示赞赏，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T12:37:37.540

不幸的是，我认为 Joomla 不可能做到这一点。这是我在开发的 Joomla 组件中减少 xml 代码重复的方法。我正在搜索 Stack Overflow 以查看是否有任何解决方案。问题在于 Joomla 加载 xml 文件的方式。它用于`$xml = simplexml_load_file($file)`加载文件，但要使用实体扩展，需要将其更改为`$xml = simplexml_load_file($file,null, LIBXML_NOENT)`. Joomla 加载 xml 文件的位置有多个，因此每个位置都需要更改。我不知道 Joomla 开发人员没有使用扩展表单是否有特定原因，或者可能是我错过了一些东西并且有办法做到这一点。我把它记下来作为进一步调查的东西，并可能作为 Joomla 以后版本的拉取请求提出（我已经检查了 3.2.4 版本并且它没有改变）。

# javascript - 有没有办法以编程方式启动应用程序，以便它以快照视图启动？

> ID：12737986
> 
> 赞同：0
> 
> 时间：2012-10-05T00:38:57.097
> 
> 标签：javascript, windows, windows-8

我想在我的适用于 Windows 8 的 JavaScript 应用程序中使用 启动 URL `Windows.System.Launcher.LaunchUriAsync`，但我希望它以快照视图启动。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T01:40:53.687

您无法在更多应用程序中启动应用程序或导致另一个应用程序以该模式启动。需要注意的关键一件事是，根据屏幕的方向或分辨率，甚至可能无法使用快照视图。此外，由于用户负责的理念，他/她应该选择移动到快照模式。

[您可以通过TryUnsnap](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.tryunsnap.aspx)以编程方式退出捕捉模式（以填充模式）；但是，[指南确实指出](http://msdn.microsoft.com/en-us/library/windows/apps/hh465371.aspx)

> 让用户掌控。不要以编程方式打开您的应用程序以引起用户的注意。仅当用户尝试使用在捕捉状态下不可用的功能时，才应保留取消捕捉。如果您的应用程序已为应用程序中的所有页面捕捉视图，则您根本不需要以编程方式取消捕捉。
> 
> 不要添加 UI 控件以编程方式取消捕捉您的应用。应用程序之间的拆分器始终存在，并允许用户随时取消快照。

# linux - 如何远程使用 Heritrix 的 webUI

> ID：12737991
> 
> 赞同：0
> 
> 时间：2012-10-05T00:39:14.603
> 
> 标签：linux, remote-access, web-crawler, heritrix

您好，我一直在玩 Heritrix，并希望将其包含在网站上/允许远程 Web 访问它。

我有一个基于 Linux 的服务器，其中有一个托管网页，并且我构建了一个 Heritrix 版本。

问题是我现在在家，希望能够通过托管网页提供对 Heritrix 中 webUI 的访问。

我查看了手册并发现了将其绑定到远程主机的 -b 命令，但是文档可能会更好。

**所以我希望的是关于这个命令如何工作以及是否可以将 webUI 绑定到现有网页的一些解释/详细说明**

提前感谢您的时间

（这里是我工作的文档的链接：[https](https://webarchive.jira.com/wiki/display/Heritrix/HOWTO+Launch+Heritrix) ://webarchive.jira.com/wiki/display/Heritrix/HOWTO+Launch+Heritrix ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T20:42:43.033

你应该使用`-b <public ip address>`喜欢`-b 192.168.1.1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-11T11:13:44.023

如果您不想使用公共 IP，可以使用 SSH 端口转发来执行此操作。创建 PuTTY 会话时，在 Connection > SSH > Tunnels 下输入以下内容：

源端口：（`8443`或安装 Heritrix 的端口，如果不同）
目标：（`localhost:8443`最好匹配您要转发的端口）

返回“会话”窗口，确保保存会话。现在，每当您通过 SSH 连接到您的服务器时，您都可以通过点击[https://localhost:8443来访问 Heritrix Web UI](https://localhost:8443)

# python - 在 Python 中使用行进广场跟随图像轮廓

> ID：12737993
> 
> 赞同：3
> 
> 时间：2012-10-05T00:39:28.420
> 
> 标签：python, image-processing

我是 Python 新手，如果有人能指出正确的方向或更好的例子，我将不胜感激。

我正在尝试编写一个程序来将图像（jpeg 或任何图像文件）转换为 gcode 或 x/y 坐标。我需要跟随图像中对象的轮廓，而不是扫描 x 和 y 方向。例如，一个有外圈和内圈的甜甜圈，或者一个有面部轮廓和器官内部轮廓的脸。

我知道有一种叫做行进广场的东西，但不知道如何在 python 中做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:26:41.067

您可以在 scikit-image 中找到行进方块的实现：[https ://scikit-image.org/docs/dev/auto_examples/edges/plot_contours.html](https://scikit-image.org/docs/dev/auto_examples/edges/plot_contours.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:53:41.610

您还可以查看 OpenCV 的[findContours 函数](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#findcontours)，它可以非常快速地执行相同的操作。它不是纯 Python，但有一个非常好的 Python 绑定，它使用 numpy 数组等……（新的“cv2”模块）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T12:43:13.667

我建议以下程序：

1）将您的图像转换为二进制图像（nxn numpy 数组）：1（对象像素）和 0（背景像素）

3）既然你想跟随一个轮廓，你可以把这个问题看作：找到属于同一个对象的所有对象像素。这可以通过 Connected Components Labeling Object 解决。

4) 一旦你确定了你的对象，你可以在每个对象上运行 Marching squares 算法。MS包括将您的图像分成n个正方形，然后评估给定正方形的所有顶点的值。MS将通过分析每个正方形并找到给定正方形的至少一个顶点的值为0而该正方形的另一个顶点的值为1的边界来找到边界->边界/轮廓包含在这样的正方形。

# ruby-on-rails - Rails 的编辑和视图中的销毁按钮

> ID：12737999
> 
> 赞同：0
> 
> 时间：2012-10-05T00:40:53.617
> 
> 标签：ruby-on-rails, ruby

我在 Rails 中有一个应用程序，其中有一个用于编辑寄存器的表单，我想在这里有一个销毁按钮。

我目前有我认为应该可以使用的带有代码的按钮。 [这是它在视图中的外观，](http://i.stack.imgur.com/ZRCYd.png)这是代码

```
 <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                                       register_path(register),
                                       :method => :delete,
                                       :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                                       :class => 'btn btn-mini btn-danger' %> 
```

但是，当我尝试删除它时，它会显示“ActiveRecord::RecordNotFound in RegistersController#edit”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:42:17.340

试试这个，写在你的`RegistersController#destroy`肌动蛋白中

```
def destroy
 @register = Register.find(params[:id])
 if @register.present?
   @register.destroy 
   redirect_to .....
 else
   redirect_to .... or render 'xyz'
 end
end 
```

我的事情，错误'ActiveRecord::RecordNotFound'出现是因为数据库中不存在记录。