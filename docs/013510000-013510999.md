# StackOverflow 问答 13510000-13510999

# c - 如何为C中的枚举赋值？

> ID：13510000
> 
> 赞同：4
> 
> 时间：2012-11-22T09:56:36.347
> 
> 标签：c, struct, enums, lint

我有一个`enum`和一个`struct`这样的定义：

```
typedef enum
{
   MONDAY = 1,
   TUESDAY,
   WEDNESDAY
} ThreeDays;

typedef struct
{
   int hello;
   ThreeDays day;
} Weekday;

static Weekday weekday = { 1, 2}; 
```

然后我在 lint 中收到以下错误：

```
Error 64: Type mismatch (initialization) (int/enum) 
```

这个错误的原因是什么？我该如何纠正？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T10:38:24.463

Use your enum for what it was built for:

```
static Weekday weekday = {1,TUESDAY}; 
```

Lint is complaining because you have an enum, but are neither passing a symbol from the enum, nor a cast of a compatible type (such as `(ThreeDays)2`).

Use the enum symbols verbatim to avoid this warning from Lint.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:29:14.527

从我使用的枚举来看，你真的不想做你正在尝试的事情。它的全部意义在于将其视为一种类型。我所说的类型是指某种类型的值的顺序，这些值仅用整数的值表示。整数只是区分不同类型的简单方法。

例如，您可以在一周中的几天使用它们

```
 Enum{
         monday,tuesday, ....
} 
```

通常当我使用它时，它是命名我在节点集合中使用的结构，以便我可以区分我的节点。

将您的枚举设置为特定数字有点违背目的。对于看起来你想要一个最终变量，因为你想在你想要的时候引用它。因此，只需创建一个最终 int 即可获得该值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T10:06:28.237

使用文本命名而不是数字：

```
use static Weekday weekday = { Mon , Tue , ... } ; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-22T10:03:55.193

您在代码中对 enum 的拼写不正确。

`typedef enum { MONDAY = 1, TUESDAY, WENDESDAY }three;` 在职的 ：）

# javascript - 如何在 jquery 中与 json 代码进行比较？

> ID：13510002
> 
> 赞同：2
> 
> 时间：2012-11-22T09:56:51.350
> 
> 标签：javascript, jquery

如果买一个每个价格是 100 美元，如果买 >= 2 每个价格是 90 美元。如果买入 >=5，则每个价格为 80 美元。如果买 >=8 每个价格是 70.......

**json 数据是动态的**，即哪些元素是 1 或 2 或 3 或其他：所以你不知道 price_qty 的值是多少。

```
[{"price_id":"1","website_id":"0","price_qty":2,"price":"90.0000"},
 {"price_id":"2","website_id":"0","price_qty":5,"price":"80.0000"},
 {"price_id":"3","website_id":"0","price_qty":8,"price":"70.0000"}] 
```

支持有一个名为 result 的变量，它具有访问者将购买的产品的数量。

`var result`.

现在，我想做：将结果与 json 数据（price_qty）进行比较，然后输出整个价格。例如：`if(result >2) { write the qty is +result, the price is + price.}`。如何编写代码？

一旦我使用：

```
var myObject= the json data,
jQuery.each(myObject, function(_index, _item){ 
var objectInArray = _item; 
if(objectInArray.price_qty  result)

... 
```

然后我不知道怎么做左边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:35:57.783

```
// first sort the array
var sorted = arrayWithJsonData.sort(function(a,b){return a.price_qty - b.price_qty;});

// find the nearest price qty
var i=0;
while(i < sorted.length && sorted[i].price_qty <= result){i++;} 

var price = sorted[i-1].price; 
```

# logging - 通过应用程序 log4j.xml 使用公共日志从组件重定向日志

> ID：13510011
> 
> 赞同：1
> 
> 时间：2012-11-22T09:57:04.223
> 
> 标签：logging, log4j, apache-commons-logging

我是日志记录机制的新手，因此如果我的问题看起来很幼稚，请原谅我。

我在我的 Web 应用程序中使用 log4j，但使用的组件之一使用客户记录器，比如实现 org.apache.commons.logging.Log 的 A。我想将所有日志从 A 重定向到单独的日志文件，当我尝试在 log4j.xml 中声明自定义附加程序并从 A 重定向日志时遇到问题。

我该怎么做呢？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:28:13.823

我认为您可以为此使用 slf4j。这些库为遗留日志框架提供了桥梁：[http](http://www.slf4j.org/legacy.html) : //www.slf4j.org/legacy.html 和 slf4j 实现了不同的底层日志框架。我从未尝试过，但它应该可以工作：

commonslogging -> slf4j -> log4j

# java - 绑定一：许多数据到 Vaadin 中的组件

> ID：13510013
> 
> 赞同：1
> 
> 时间：2012-11-22T09:57:10.170
> 
> 标签：java, vaadin

我的问题是关于将组件绑定到 Vaadin 中的数据。**当**您使用 addnestedpcontainerproperty 拥有具有 1:1 关系的 bean 时，可以绑定嵌套属性。

**是否**可以将属性与 One:Many 关系绑定。例如有java类

```
public class User {

   private String name;
   private Map<String, String> prop;

   public User() { ... } 

   public addProp(String column, String value) {

      prop.put(column, value);
   }

}

public class Users {

   private List<User> users;
} 
```

我想将用户显示为一个表，例如：用户列表中的每个用户对象作为行，道具映射的键作为表列，映射的值作为单元格。

```
public class Users {
   private List<User> users; 
   public Users() {

       User user1 = new User("first user");
       user1.addProp("p1", "val_b_1");
       user1.addProp("p2", "val_b_2");

       User user2 = new User("second_user");
       user2.addProp("p1", "val_a_1");
       user2.addProp("p2", "val_a_2");

       users = new HashMap;
       users.add(user1);
       users.add(user2);
   }
} 
```

我希望这显示为

```
|     p1   |    p2    | 
----------------------
|  val_b_1 | val_b_2  |
|  val_a_1 | val_a_2  | 
```

假设用户列表中的每个用户都将具有与键相同的值。所以列数始终是（对于用户列表中的每个用户，对于不同的用户列表可能会有所不同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:27:02.583

请查看[Vaadin 书](https://vaadin.com/book)的[第 9 章。将组件绑定到数据](https://vaadin.com/book/-/page/datamodel.html)。

一般来说，您做的一切都是正确的，但是您的类*Users*必须根据 Vaading 数据模型实现 Container 接口：

![在此处输入图像描述](../Images/b3bd62eb1aabbd5d0d2a68f706e7d5c6.png)

你注意到 Table 构造函数了吗？

```
// Creates a new table with caption and connect it to a Container.
Table(String caption, Container dataSource) 
```

> 基本上，容器是一组项目，但它对其内容施加了某些限制。这些约束说明如下：
> 
> *   容器中的所有项目必须具有相同数量的属性。
> *   容器中的所有项目必须具有相同的属性 ID（请参阅
> *   Item.getItemPropertyIds())。同一个Property ID 对应的Items 中的所有Properties 必须具有相同的数据类型。容器中的所有项目都由它们的非空 ID 唯一标识。

您可以使用[Array 容器](https://vaadin.com/directory#addon/array-container)或任何其他实现来节省一些时间。

另请查看[模型视图控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式描述。

快乐编码。

# c# - 格式化生成的 Word 文档中的单元格

> ID：13510021
> 
> 赞同：3
> 
> 时间：2012-11-22T09:57:47.457
> 
> 标签：c#, .net, ms-word, ms-office, visual-studio-lightswitch

我从我的 LightSwitch 计费应用程序中生成发票，生成发票后，Word 文档中的 SubTotal、SalesTax 和 Total Due 单元格的格式不正确。

我已经浏览了每一个菜单选项，并探索了其他*可能的*方法来在将其放入文档的内容控件之前对其进行格式化，但我就是无法获得正确的格式。

数字显示为`4100.0000`，但它们应该类似于`4,100.00`或至少类似于`4100.00`。

如何才能做到这一点？

我意识到这是离题的边缘，但我想我还是会在这里发帖，*因为我相信解决方案涉及编写代码，而不是使用 Word 来完成此任务，因为我已经完成了所有选项，而且只是没有那里似乎不是更改单个单元格格式的选项。*

![在此处输入图像描述](../Images/ca88ad343e46e6e9a56794a1dcba2d24.png)

根据要求，文档生成代码：

```
using System;
using System.Linq;
using System.IO;
using System.IO.IsolatedStorage;
using System.Collections.Generic;
using Microsoft.LightSwitch;
using Microsoft.LightSwitch.Framework.Client;
using Microsoft.LightSwitch.Presentation;
using Microsoft.LightSwitch.Presentation.Extensions;
using OfficeIntegration;
namespace LightSwitchApplication
{
    public partial class Billing
    {
        partial void GenerateInvoice_Execute()
        {
            var mappings = new List<ColumnMapping>();

            mappings.Add(new ColumnMapping("InvoiceId", "InvoiceId"));
            mappings.Add(new ColumnMapping("DateGenerated", "DateGenerated"));

            mappings.Add(new ColumnMapping("InvoiceDataGridSubTotal", "SubTotal"));
            mappings.Add(new ColumnMapping("InvoiceDataGridSalesTax", "Tax"));
            mappings.Add(new ColumnMapping("InvoiceDataGridDateDue", "DateDue"));
            mappings.Add(new ColumnMapping("InvoiceDataGridTotalDue", "Total"));

            object doc;
            string path = @"C:\Users\Jason\Documents\SV Invoice.docx";

            doc = OfficeIntegration.Word.GenerateDocument(path, this.BillingTables.SelectedItem, mappings);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:22:34.660

在这种情况下，不需要代码和 Word 格式。为了使您的数字在动态生成的 Word 文档中正确格式化，您必须在 Visual Studio LightSwitch 的数据设计器中设置要使用的格式：

*   打开您的 LightSwitch 项目
*   展开项目节点>打开一个`Table`包含您要格式化的数字
*   选择`Field`需要格式化的
*   在`Properties`窗格中，向下滚动直到您看到 Formatting ( `Format Pattern`)
*   现在这里是您格式化数字的地方。有关可用选项，请参阅[此](http://msdn.microsoft.com/EN-US/library/hh674024.aspx#numeric)链接。我选择使用`C2`.

按照上述步骤，我能够生成一个具有以下格式的 Word 文档：

`4500.00`而不是`4500.0000`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:21:49.287

您应该能够为`ColumnMapping`构造函数提供第三个参数：格式化值的委托：

```
Func<decimal, string> formatDelegate = x => x.ToString("c2");
mappings.Add(new ColumnMapping("InvoiceDataGridSubTotal", "SubTotal",
                               FormatDelegate: formatDelegate)); 
```

# php - 如何解析网站以从表格中获取链接？

> ID：13510024
> 
> 赞同：2
> 
> 时间：2012-11-22T09:57:55.563
> 
> 标签：php, dom

我试图弄清楚如何解析网站以从表格中获取链接。在我的特殊情况下，有两个表，但我只想要第二个表（Link5 和 Link6）中的链接。这是我要解析的 HTML。

```
<html>
<head>
</head>
<body>
<a href="http://www.example.com/link1.html">Link1</a><br>
<br>
<table>
  <tbody>
    <tr>
      <td><a href="http://www.example.com/link2.html">Link2</a></td>
      <td>dog</td>
      <td>fish</td>
    </tr>
    <tr>
      <td><a href="http://www.example.com/link3.html">Link3</a></td>
      <td>cat</td>
      <td>bird</td>
    </tr>
  </tbody>
</table>
<br>
<a href="http://www.example.com/link4.html">Link4</a><br>
<br>
<table>
  <tbody>
    <tr>
      <td><a href="http://www.example.com/link5.html">Link5</a></td>
      <td>cow</td>
    </tr>
    <tr>
      <td><a href="http://www.example.com/link6.html">Link6</a></td>
      <td>horse</td>
    </tr>
  </tbody>
</table>
<br>
<a href="http://www.example.com/link7.html">Link7</a><br>
</body>
</html> 
```

我已经读到 DOM 是一种从网络解析数据的好方法，所以这是我一直在处理的代码。

```
<?php
$link = array();

//new dom object
$dom = new DOMDocument();

//load the html
$html = $dom->loadHTMLFile('http://www.example.com');

//discard white space 
$dom->preserveWhiteSpace = false; 

//get the table by its tag name
$tables = $dom->getElementsByTagName('table');   

$rows = $tables->item(1)->getElementsByTagName('tr');

$i = 0;

//loop over the table rows
foreach ($rows as $row) 
{ 
    $links = $row->getElementsByTagName('a');

    //put node value into an array
    $link[] = $links->item(0)->nodeValue;

    // echo the values
    echo $link[$i] . '<br />';

    $i++;
} 

?> 
```

此代码给出以下输出： Link5 Link6

但我想要实现的是： [http](http://www.example.com/link5.html) ://www.example.com/link5.html http://www.example.com/link6.html

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:02:56.960

我想问题是你想得到`href`不是节点的值。所以你应该使用[getAttribute](http://php.net/manual/en/domelement.getattribute.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:03:59.843

```
$link[] = $links->item(0)->getAttribute("href"); 
```

# jquery - 行中的颜色和编辑值但不显示 Jqgrid

> ID：13510025
> 
> 赞同：0
> 
> 时间：2012-11-22T09:57:58.747
> 
> 标签：jquery, jqgrid, hidden

我想知道它是否可能为每行（或某些）行使用不同的背景颜色。

我还有另一个问题，我已经定义了我只想在添加时设置的复选框，但是当网格显示所有行时我不想看到它。这可能吗？

这是我的代码..

```
$("#<%=Me.Id & "_" %>lstBaseHab").jqGrid({
    url: '/modulos/tarifa/basehabitacion.ashx',
    datatype: 'xml',
    mtype: 'GET',
    colNames: ['Hab ID','Habitación','Importe', 'Fecha Inicio','Fecha Fin','Noches Estancia/Mínimas','Todos','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado','Domingo','tarId', 'estId'],
    colModel: [
        { name: 'hab_id', index: 'hab_id', width: 100, align: 'center', editable: false, sortable: false, hidden: true},
        {name: 'hab_nombre', index: 'hab_nombre', width: 200, align: 'center', edittype: 'select', editable: true, sortable: false, editrules: { edithidden: false, required: true }
        , editoptions: { size: 1, dataUrl: '/modulos/tarifa/basehabitacion.ashx?oper=listahabs' }
        },
        { name: 'tpb_importe', index: 'tpb_importe', width: 160, align: 'center', editable: true, sortable: true },
        { name: 'fini', index: 'fini', width: 300, align: 'center', editable: true, editoptions: { dataInit: function(el) { setTimeout(function() { $(el).datepicker({ dateFormat: 'dd/mm/yy' }); }, 200); } }, editrules: { edithidden: false }, sortable: true },
        { name: 'ffin', index: 'ffin', width: 300, align: 'center', editable: true, editoptions: { dataInit: function(el) { setTimeout(function() { $(el).datepicker({ dateFormat: 'dd/mm/yy' }); }, 200); } }, editrules: { edithidden: false }, sortable: true },
        { name: 'Nochesestancia', index: 'Nochesestancia', width: 300, align: 'center', sortable: false, editable: true },
        { name: 'Lun', index: 'lun', width: 50,  formatter: "checkbox", align: 'center', editable: true, hidden: true, edittype: "checkbox", editoptions: { value: "1:" }, editrules: { edithidden: false }, sortable: false },
        { name: 'Mar', index: 'mar', width: 50,  formatter: "checkbox", align: 'center', editable: true, hidden: true, edittype: "checkbox", editoptions: { value: "2:" }, editrules: { edithidden: false }, sortable: false },
        { name: 'Mie', index: 'mie', width: 50,  formatter: "checkbox", align: 'center', editable: true, hidden: true, edittype: "checkbox", editoptions: { value: "3:" }, editrules: { edithidden: false }, sortable: false },
        { name: 'Jue', index: 'jue', width: 50,  formatter: "checkbox", align: 'center', editable: true, hidden: true, edittype: "checkbox", editoptions: { value: "4:" }, editrules: { edithidden: false }, sortable: false },
        { name: 'Vie', index: 'vie', width: 50,  formatter: "checkbox", align: 'center', editable: true, hidden: true, edittype: "checkbox", editoptions: { value: "5:" }, editrules: { edithidden: false }, sortable: false },
        { name: 'Sab', index: 'sab', width: 50,  formatter: "checkbox", align: 'center', editable: true, hidden: true, edittype: "checkbox", editoptions: { value: "6:" }, editrules: { edithidden: false }, sortable: false },
        { name: 'Dom', index: 'dom', width: 50,  formatter: "checkbox", align: 'center', editable: true, hidden: true, edittype: "checkbox", editoptions: { value: "0:" }, editrules: { edithidden: false }, sortable: false }
    ],
    ajaxSelectOptions: {
        data: {
            estId: function () { return __estId; }
        }
    },
    ajaxGridOptions: {cache: false},
    autoencode: false,
    toppager: false,
    loadonce:false,
    pager: '#preciobasepager',
    rowNum: 40,
    rowList: [20, 40, 80, 100, 200, 500, 1000],
    sortname: 'fini',
    sortorder: 'asc',
    autowidth: false,
    width: 850,
    height: -1,
    shrinkToFit: true,
    viewrecords: true,
    gridview: true,
    prmNames: {oper:"listarbaseshabitacion", addoper:"crearbasehabita", deloper:"borrabasehabita"},
    caption: 'Precios base para habitaciones'
    , editurl: '/modulos/tarifa/basehabitacion.ashx'
    , postData: {
        tarId: function ftar(){return __tarId;},
        estId: function fest(){return __estId;}
    }, afterSaveCell : function(rowid,name,val,iRow,iCol) { }
    , loadComplete: function() { }
    , onCellSelect: function(rowid, index, contents, event) {
        <%=Me.id %>_selectedRow=jQuery(this).getRowData(rowid);
    }
});

jQuery("#<%=Me.Id & "_" %>lstBaseHab").jqGrid('navGrid',
    '#preciobasepager',
    { alerttext: "Seleccione un registro.",
        add: true, addtitle: "Crear precio base", //addfunc: newPrecioBase, 
        del: true, deltitle: "Eliminar precio base", // delfunc: delPrecioBase,
        edit: false, edittitle: "Editar precio base",
        search: false, searchtitle: "Buscar",
        refresh: true,
        cloneToTop: true
    },
    { width: 350, resize: false, closeAfterEdit: true, recreateForm: true, viewPagerButtons: true, afterComplete: null },
    { width: 350, resize: false, closeAfterAdd: true, recreateForm: true, viewPagerButtons: true, afterComplete: null },
    { width: 350, resize: false, msg: "¿Desea eliminar la relación?", afterComplete: null }
); 
```

如果我把它的隐藏显示`hidden:true`（如在`colModel`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:16:58.263

要在单个行上设置背景颜色，例如基于网格中列的内容，您可以使用`rowattr`回调。它提供了最有效的解决方案（如果您使用`gridview: true`），因为它允许您在创建行时*动态修改行的属性。*因此，您只需告知 jqGrid 您希望在行中具有哪些附加属性。

[答案](https://stackoverflow.com/a/10531680/315935)证明了这种方法。

您问题的第二部分（关于复选框）对我来说不清楚。该标准`formatter: "chechboxs"`将用于在网格中显示数据和进行编辑。如果您删除但在[editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editoptions)的回调中`formatter: "chechboxs"`实现您需要的所有其他行为，则可以实现您的要求。您拥有的另一种可能性是使用[自定义编辑控件](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#custom)。`dataInit`

**更新**：我建议您另外使用[列模板](https://stackoverflow.com/a/6047856/315935)。您有多个使用复选框的列和使用 datepicker 的多个列（'fini'、'ffin'）。因此，如果您在代码中的某处定义 jqGrid 变量的定义，这些变量包含列的通用属性，那么您的代码将更小、更易读且更易于管理：

```
var dateTemplate = { width: 300, align: 'center', editable: true
        editoptions: {
            dataInit: function(el) {
                setTimeout(function() {
                    $(el).datepicker({ dateFormat: 'dd/mm/yy' });
                }, 200);
            }
        }, editrules: { edithidden: false }, sortable: true },
    checkboxTemplate = {width: 50,  formatter: "checkbox", align: 'center',
        editable: true, hidden: true, edittype: "checkbox",
        editrules: { edithidden: false }, sortable: false}; 
```

那么您将能够将 jqGrid 内部的相应列的定义重写为`colModel`以下内容：

```
{ name: 'fini', template: dateTemplate },
{ name: 'ffin', template: dateTemplate },
...
{ name: 'Lun', index: 'lun', editoptions: {value: "1:"}, template: checkboxTemplate },
{ name: 'Mar', index: 'mar', editoptions: {value: "2:"}, template: checkboxTemplate },
{ name: 'Mie', index: 'mie', editoptions: {value: "3:"}, template: checkboxTemplate },
{ name: 'Jue', index: 'jue', editoptions: {value: "4:"}, template: checkboxTemplate },
{ name: 'Vie', index: 'vie', editoptions: {value: "5:"}, template: checkboxTemplate },
{ name: 'Sab', index: 'sab', editoptions: {value: "6:"}, template: checkboxTemplate },
{ name: 'Dom', index: 'dom', editoptions: {value: "0:"}, template: checkboxTemplate } 
```

# java - 用于 Java 的免费时间线可视化 API？

> ID：13510030
> 
> 赞同：3
> 
> 时间：2012-11-22T09:58:11.543
> 
> 标签：java, visualization

自从几天以来，我一直在寻找一个 Java 可视化 API，它允许我[像这样](http://timeline.verite.co/)绘制时间线：

![在此处输入图像描述](../Images/44bfd7f19a9449d7b3a535a475988126.png)

好像有很多 JavaScript 框架，但是我找不到 Java 实现。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:20:02.613

我认为这可能很有趣，Fractalsoft.net 有一个 primefaces 框架的扩展，它实现了一个类似于你在那里描述的时间线。

时间线：

[http://fractalsoft.net/primeext-showcase-mojarra/sections/timeline/basicUsage.jsf](http://fractalsoft.net/primeext-showcase-mojarra/sections/timeline/basicUsage.jsf)

还可以看看其他的 primefaces 展示，有很多很酷的小工具：

[http://www.primefaces.org/showcase-labs/ui/home.jsf](http://www.primefaces.org/showcase-labs/ui/home.jsf)

我希望这很有用。

# highcharts - Highcharts：使用 IE8（导出）在 x 轴上的换行符不一致

> ID：13510036
> 
> 赞同：2
> 
> 时间：2012-11-22T09:58:26.937
> 
> 标签：highcharts

我在 IE8 中导出图形时遇到了一个小问题。正如标题所说，在换行方面似乎存在一些不一致的行为。因此，x 轴标签往往会相互重叠。当我稍微增加字体大小时，这一点变得更加明显。

有没有人有这方面的经验，或者可能有什么建议？

注意：在 Firefox 和 Chrome 中一切正常。

# passwords - 如何创建一个 google 网站页面，在回答秘密密码之前不会让您看到 google 网站？

> ID：13510038
> 
> 赞同：0
> 
> 时间：2012-11-22T09:58:33.380
> 
> 标签：passwords, block, webpage, google-sites

是否可以创建一个带有密码框的初始页面的谷歌网站页面。通过该页面提交密码并确认密码正确后，该站点的其余部分将打开吗？

怎么办？

提前致谢，

节日快乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:12:50.647

Google 网站有一个 ACL，您可以在其中与任何拥有 Google ID 的用户共享该网站。想要使用另一个 ID 的用户可以[将](https://accounts.google.com/NewAccount?hl=en)任何电子邮件地址链接到 Google ID。

使用大量应用程序脚本，您可以创建自己的身份验证方案，但您为什么要这样做？我想不出任何值得构建自己的身份验证方案的用例。

# sharepoint - 后缓存替换与修改响应缓冲区的 IIS 集成管道中的模块不兼容

> ID：13510044
> 
> 赞同：0
> 
> 时间：2012-11-22T09:58:41.170
> 
> 标签：sharepoint, sharepoint-2010

我在我的一个 SharePoint 网站上收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:58:41.170

我必须在我的 web.config 中更改此设置

```
<urlCompression
 doDynamicCompression="true"
 doStaticCompression="true"
 dynamicCompressionBeforeCache="<this should be false>"/> 
```

将 dynamicCompressionBeforeCache 设置为 false，它对我有用。

感谢这篇文章： [http ://www.sitefinity.com/devnet/forums/general-discussions-/post-cache-substitution-is-not-compatible-with-modules-in-the-iis-integrated-pipeline-修改响应缓冲区](http://www.sitefinity.com/devnet/forums/general-discussions-/post-cache-substitution-is-not-compatible-with-modules-in-the-iis-integrated-pipeline-that-modify-the-response-buffers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-25T06:44:32.967

对我来说，禁用 web.config 中的输出缓存是有效的，如下所示：

```
<system.web>
    <caching>
        <outputCache enableOutputCache="false"/>
    </caching>
</system.web> 
```

# jquery - 避免手风琴菜单中的空列表项？

> ID：13510046
> 
> 赞同：0
> 
> 时间：2012-11-22T09:58:44.927
> 
> 标签：jquery, html, css

我正在按照这个问题的公认答案中的 jQuery 示例尝试手风琴菜单：[jquery: 3 level vertical menu](https://stackoverflow.com/questions/7653457/jquery-3-level-vertical-menu)：

```
$(document).ready(function() {
$('li').click(function(ev) {
$(this).find('>ul').slideToggle()
    .end().siblings().find('ul').slideUp();
ev.stopPropagation();
});
}); 
```

我的问题是，当我添加 css 使其看起来有点像 jQm 列表视图时，它会在 2 级和 3 级下方获得空列表项。如果我删除：

```
display: block; 
```

从 css 来看，菜单看起来像一个列表，并且没有空列表项。有没有办法让我保持块的外观？

请检查我的小提琴完整代码：http: [//jsfiddle.net/karin_A/aCaEG/564/](http://jsfiddle.net/karin_A/aCaEG/564/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:40:10.150

您只是缺少几个结束标签而已。

```
<li><a href="#"> Level 2

<li><a href="#"> Level 3 
```

# javascript - 线图系列的对象数组？（+ 表示交叉过滤器解决方案）

> ID：13510051
> 
> 赞同：1
> 
> 时间：2012-11-22T09:58:56.457
> 
> 标签：javascript, time-series, crossfilter

在 JavaScript 中，如何将“长表格式”转换为适合折线图的数据结构：

```
var data = [
  {"type":"A"," year":2000," value":50},
  {"type":"A"," year":2001," value":51},
  {"type":"A"," year":2002," value":52},
  {"type":"B"," year":2000," value":60},
  {"type":"B"," year":2001," value":55},
  {"type":"B"," year":2002," value":57}
]

=>

var series = [ 
  {type: "A", values : [{x: 2000, y: 50}, {x: 2001, y: 52},] },
  {type: "B", values : [{x: 2000, y: 60}, {x: 2001, y: 55},] },
] 
```

一个普通的 JavaScript 解决方案以及一个带有 Crossfilter 库的解决方案 - 可以在数据的任何维度上工作 - 将很有价值： [https ://github.com/square/crossfilter/wiki/API-Reference](https://github.com/square/crossfilter/wiki/API-Reference)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:30:42.423

好问题，但不直截了当；)

看看[https://github.com/NickQiZhu/dc.js/pull/91](https://github.com/NickQiZhu/dc.js/pull/91)

你会有类似的东西：

```
cr = crossfilter(data);
typeDim=cr.dimension(function(d) {return d.type});
typeGroup=typeDim.group();

yearDim=cr.dimension(function(d) {return d.year});
valDim=cr.dimension(function(d) {return d.value});

yearTypeGroup = dateDimension.group();
yearTypeGroup.reduce( 
    // add
    // pivot[0].idx()[i] returns the index of statusGroup
    // the reduce function hence construct a key-value object, keys being indexes of the pivot group. 
    function(p, v, i, pivot) { 
         ++p[pivot[0].idx()[i]].count;
        p[pivot[0].idx()[i]].value += +v.value;
        return p;
    },
    //remove
    function(p, v,i,pivot) {
        --p[pivot[0].idx()[i]].count;
        p[pivot[0].idx()[i]].value -= +v.value;
        return p;
    },
    //init
    function(pivot) {
        var l, i, obj ={};
        if(l = pivot[0].all().length){
            for(i=0; i<l; ++i) {
                obj[i] = {count:0, value:0}
            }
        }
        return obj
    }
);

yearTypeGroup.pivot(typeGroup) 
```

祝你好运 ; ） C。

# php - 查找存在于 n 维数组的 n 级中的值，而不存在于其他 n 维数组中？

> ID：13510056
> 
> 赞同：0
> 
> 时间：2012-11-22T09:59:08.947
> 
> 标签：php, arrays, multidimensional-array, array-difference

我有两个数组，它们看起来都像

```
array(
  array('key_id' => 1, 'value' => 4, 'whatever' => 'something'),
  array('key_id' => 2, 'value' => 3, 'whatever' => 'something'),
  array('key_id' => 3, 'value' => 2, 'whatever' => 'something'),
  array('key_id' => 4, 'value' => 1, 'whatever' => 'something'),
); 
```

他们会有一些相交`key_id`的，会有一些出现在第一个数组中，但不是第二个，还有一些出现在第二个数组中但不是第一个。

我想获取第一个数组中所有 key_id 的数组，但不是第二个数组。例如

```
$a = array(
  array('key_id' => 1, 'value' => 4, 'whatever' => 'something'),
  array('key_id' => 2, 'value' => 3, 'whatever' => 'something'),
  array('key_id' => 3, 'value' => 2, 'whatever' => 'something'),
);

$b = array(
  array('key_id' => 3, 'value' => 2, 'whatever' => 'something'),
  array('key_id' => 4, 'value' => 1, 'whatever' => 'something'),
); 
```

我想要的输出是`array(1,2);`

我目前的方法是：

```
$keys = array('orig' => array(), 'new' => array());

array_map(function($array){
  $keys['orig'][] = $array['key_id'];
}, $a);

array_map(function ($array) {
  $keys['new'][] = $array['key_id'];
}, $b);

$difference = array_diff($keys['orig'], $keys['new']); 
```

哪个应该起作用，但我想知道是否有更好的方法？

* * *

在下面使用[eis](https://stackoverflow.com/users/365237/eis)的[方法](https://stackoverflow.com/questions/13510056/#13510290)是我正在为问题提供上下文的工作示例：

```
<?php
$a = array(
  array('key_id' => 1, 'value' => 4, 'whatever' => 'something'),
  array('key_id' => 2, 'value' => 3, 'whatever' => 'something'),
  array('key_id' => 3, 'value' => 'o', 'whatever' => 'something'),
  array('key_id' => 5, 'value' => 'e', 'whatever' => 'something')
);

$b = array(
  array('key_id' => 3, 'value' => 'n', 'whatever' => 'something'),
  array('key_id' => 4, 'value' => 1, 'whatever' => 'something'),
  array('key_id' => 5, 'value' => 'e', 'whatever' => 'something')
));

function compareKeyId($a, $b) {
  if ($a['key_id'] === $b['key_id']) return 0;
  return ($a['key_id'] > $b['key_id']) ? 1 : -1;
}

function compareKeyIdAndValue($a, $b) {
    return ($a['key_id'] === $b['key_id'] && $a['value'] === $b['value']) ? 0 : -1;
  }

$changed = array();

$removed = array_udiff($a, $b, 'compareKeyId');
$added = array_udiff($b, $a, 'compareKeyId');

//get the elements that are present in both arrays (remainder)
$r = array();
$r['new'] = array_udiff($b, $removed, $added, 'compareKeyId');
$r['old'] = array_udiff($a, $removed, $added, 'compareKeyId');

$changed = array();
$changed['old'] = array_udiff($r['old'], $r['new'], 'compareKeyIdAndValue');
$changed['new'] = array_udiff($r['new'], $r['old'], 'compareKeyIdAndValue');

die('<pre>'.print_r(array('removed' => $removed, 'added' => $added, 'changed' => $changed), true).'</pre>');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:09:53.113

怎么样

```
// get the elements
function compare_col_key_id($a, $b) {
    if ($a['key_id'] === $b['key_id']) return 0;
    return ($a['key_id'] > $b['key_id']) ? 1 : -1;
}
$difference_elems = array_udiff($a, $b, 'compare_col_key_id');

// and if you just want the keys out
function get_col_key_id($a) {
    return $a['key_id'];
}
$difference_justkeys = array_map('get_col_key_id', $difference_elems); 
```

这样做更好的是它首先过滤元素，然后仅在需要时创建一个仅键数组，并且仅针对已过滤的元素。否则它本质上是一样的，也许以更干净的方式。

我可能会将它包装在一个类中，该类将在构造函数中获取列 id，并将上述函数作为方法，使用来自私有变量的列 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:32:31.293

正常工作：

```
$a = array(
array('key_id' => 1, 'value' => 4, 'whatever' => 'something'),
array('key_id' => 2, 'value' => 3, 'whatever' => 'something'),
array('key_id' => 3, 'value' => 2, 'whatever' => 'something'),
);

$b = array(
array('key_id' => 3, 'value' => 2, 'whatever' => 'something'),
array('key_id' => 4, 'value' => 1, 'whatever' => 'something'),
);

$a1 = array_values($a);
$b1 = array_values($b);
for($i=0;$i<=count(a1);$i++){
   if( $a1[$i]['key_id'] != $b1[Si]['key_id'] ){
      $res[]=$a1[$i]['key_id'];
   }
}
print_r( $res ); 
```

# jquery - jQuery $.post 方法，下载文件

> ID：13510062
> 
> 赞同：1
> 
> 时间：2012-11-22T09:59:32.963
> 
> 标签：jquery, post

我正在尝试使用 jQuery post() 方法创建下载链接，如下所示：

```
$.post('file.php', {name:'name', id:'id'},
function(data){
    $('#downloadFrame').src = data.url;
});
return true; 
```

但总是 data.url 返回 null/unidentified，还创建一个表单并提交它可能适用于我的代码。我在论坛上搜索了很多帖子，但没有一个有效。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:01:20.523

您需要访问数组数据的零元素，所以使用`data[0].url`

改变

```
function(data){
    $('#downloadFrame').src = data.url;
}); 
```

到

```
function(data){
    $('#downloadFrame').src = data[0].url;
}); 
```

# batch-file - 延迟代码启动exe文件

> ID：13510063
> 
> 赞同：0
> 
> 时间：2012-11-22T09:59:38.143
> 
> 标签：batch-file

我有这个 bat 文件来杀死和启动文件，但我需要延迟。

```
TASKKILL /F /IM "file.exe"
(what is the code to delay 1 minute before executing the code below?)
start /d "path" file.exe 
```

你能帮我么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:07:08.627

您可以`ping`按照@Krister 的建议使用

```
ping 127.0.0.1 -n 60 
```

如果您使用的是 Vista 及以上版本，您可以使用更容易`timeout`

```
timeout /t 60 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:11:05.747

我已经使用该`ping`命令来实现这一点，您可以 ping 一个无效的主机并将该命令的超时设置为您想要的延迟。

```
@echo off
ping 1.2.3.4 -n 1 -w 60000 >NUL
# this command will be run after 60000ms
echo 'running';
pause 
```

# windows-store-apps - 如何启动应用程序以便用户可以发送电子邮件？

> ID：13510067
> 
> 赞同：0
> 
> 时间：2012-11-22T09:59:45.397
> 
> 标签：windows-store-apps

我正在移植一个 Windows Phone 应用程序，并且我有以下 wp 代码：

```
public static void startEmailFeedbackActivity(Context context)
{
  EmailComposeTask emailcomposer = new EmailComposeTask();
  emailcomposer.To = Strings.IDST_FLAG_SUPPORT_EMAIL_ADDRESS;
  emailcomposer.Subject = Strings.IDST_EMAIL_FEEDBACK_TITLE;
  emailcomposer.Show();
} 
```

问题 - 如何为我的 Windows 应用商店应用程序执行此操作？有可能吗？

我发现了一些关于这个的线程，我意识到我应该使用合同，但目前还不清楚......

[http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/393a123f-674c-4b44-af87-9963053f42fd](http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/393a123f-674c-4b44-af87-9963053f42fd)

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:17:16.413

我找到了答案！

```
public static async Task startEmailFeedbackActivity(Context context)
{
  string uriString;
  uriString = "mailto:?to=" + Strings.IDST_FLAG_SUPPORT_EMAIL_ADDRESS;
  uriString += "&subject=" + Strings.IDST_EMAIL_FEEDBACK_TITLE;
  uriString += "&subject=" + Strings.IDST_EMAIL_FEEDBACK_TITLE;

  Uri uri = new Uri(uriString);
  await Windows.System.Launcher.LaunchUriAsync(uri); 
} 
```

# php - 锂PHP框架如何在PHP页面中生成$this上下文？

> ID：13510068
> 
> 赞同：3
> 
> 时间：2012-11-22T09:59:47.747
> 
> 标签：php, frameworks, views, lithium

我一直在研究[Lithium PHP Framework](https://github.com/UnionOfRAD/lithium)，但我不明白它是如何设置的`$this->context;`（[尤其是在这个布局](https://github.com/UnionOfRAD/framework/blob/master/app/views/layouts/default.html.php)中。）

由于您显然不能简单地重新分配`$this`，因此该布局将在某些时候被包含在内，而更让我困惑的是它们`$this`在类定义之外使用的事实。

我有一段时间没有编写 PHP 代码了，所以请在这里帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:06:45.543

让我印象深刻的第一个想法是这个模板页面是从一个方法中调用的。

```
class Viewer
{
    public $html;
    private $title;
    private $content;

    public function __construct()
    {
        $this->html = new \Utilities\HTMLBag();
    }
    public function loadView($template)
    {
        ob_start();
        include 'path/to/views/'.$template.'.php';
        $this->content = ob_get_clean();
    }
    public function title()
    {
        return $this->title;
    }
} 
```

至此，included`$template`可以访问Viewer类的任意方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:02:56.413

很简单：通过在类的方法中调用 include/require。

文件 A.php：

```
<?php
class A {
    public $test = 'Hello';

    public function xyz() {
        include 'B.php';
    }
} 
```

文件 B.php：

```
<html>
    <body><?php echo $this->test; ?></body>
</html> 
```

# php - PHP脚本未将表单数据插入数据库

> ID：13510071
> 
> 赞同：1
> 
> 时间：2012-11-22T10:00:02.993
> 
> 标签：php, html, mysql, sql, phpmyadmin

我在将表单数据插入数据库时​​遇到问题。我可以连接到数据库，因为它不会引发错误但没有插入任何信息。以下是我的代码，任何帮助将不胜感激。

```
<?php  
// string checking
function isValid($str) {
  if(!preg_match('/[^A-Za-z0-9.-]/', $str)) {
  return true;
  } else {
    return false;
  }
}

// Check for form submission
if(isset($_POST['submit'])){

// Get the POST data
$agree = $_POST['agree'];
$firstname = $_POST['firstname'];
$surname = $_POST['surname'];
$business = $_POST['business'];
$state = $_POST['state'];
$email = $_POST['email'];

// If the T&C box has been ticked
if($agree){

  // Validate the POST data
  $validationError = '';

    // Name Validation
    if($firstname == ''){
      $validationError .= "Please enter your first name.\n";
    } else {
      if(is_numeric($firstname)){
        $validationError .= "The first name you have supplied cannot contain numbers.\n";
      }
      if(strlen($firstname) > 50) {
        $validationError .= "The first name you have supplied must be less than 50 characters.\n";
      }
      if(strlen($firstname) < 3) {
        $validationError .= "The first name you have supplied is too short.\n";
      }
      if(isValid($firstname) == false ){
        $validationError .= "The first name cannot contain special characters.\n";
  }
    }

if($surname == ""){
      $validationError .= "Please enter your Surname.\n";
    } else {
      if(is_numeric($surname)){
        $validationError .= "The Surname you have supplied cannot contain numbers.\n";
      }
      if(strlen($surname) > 50) {
        $validationError .= "The Surname you have supplied must be less than 50 characters.\n";
      }
      if(strlen($surname) < 3) {
        $validationError .= "The Surname you have supplied is too short.\n";
      }
      if(isValid($surname) == false ){
        $validationError .= "The Surname cannot contain special characters.\n";
  }
    }

if($state == ''){
      $validationError .= "Please select your state.\n";
}

    // Email validation

    // Function to validate email addresses, taken from here: http://www.linuxjournal.com/article/9585
    function check_email_address($email) {

      // Set up regular expression strings to evaluate the value of email variable against
      $regex1 = '/^[_a-z0-9-][^()<>@,;:\\"[] ]*@([a-z0-9-]+.)+[a-z]{2,4}$/i';

      // Run the preg_match function on regex 1
      if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/",$email)) {
           return false;
      } else {
          return true;      
      } 
    }

    if($email != ''){
      if(!check_email_address($email)) {
        $validationError .= "The email address does not appear to be correct, please try again.\n";
      }
    } else {
      $validationError .= "Please enter your email address.\n";
    }

  //Start the mySQL connection

  if($validationError == ''){
    $link = mysql_connect('localhost', '--removed--', '--removed--');

    if (!$link) {
      $validationError .= "There was an error connecting to the database. Please contact us so that we can fix the problem.\n";
    } else {

      // Select the db
      mysql_select_db("keyinv_seminar", $link);

      // Check for an existing entry under that email address
      $checkQuery = 'SELECT * FROM seminar WHERE email="' . mysql_real_escape_string($email) . '"';
      $result = mysql_query($checkQuery, $link);

      if (mysql_num_rows($result) != 0) {
        $validationError .= "There is already an entry in the competition, using that email address.\n";
      } else {
        // There is no existing entry, update the db
        $insertQuery = "INSERT INTO seminar (firstname, surname, business, state, email) VALUES ('" . mysql_real_escape_string($firstname) . "', '" . mysql_real_escape_string($surname) . "', '" . mysql_real_escape_string($business) . "', " . mysql_real_escape_string($state) . ", '" . mysql_real_escape_string($email) . "')";

        $result = mysql_query($insertQuery, $link);

      }

      // Close the connection
      if($link){
        mysql_close($link);

        if($validationError == ''){
          header('Location: thankyou.php');
        }
      }
    }
  }
} else {
  $validationError = "You must accept the Terms and Conditions \nin order to enter this contest.";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T10:03:11.563

查看您的`INSERT`查询..

```
$insertQuery = "INSERT INTO seminar (firstname, surname, business, state, email) VALUES ('" 
    . mysql_real_escape_string($firstname) . "', '" 
    . mysql_real_escape_string($surname) . "', '" 
    . mysql_real_escape_string($business) . "', " 
    . mysql_real_escape_string($state) . ", '" 
    . mysql_real_escape_string($email) . "')"; 
```

您错过了一些围绕该`$state`值的单引号。将其更改为：

```
$insertQuery = "INSERT INTO seminar (firstname, surname, business, state, email) VALUES ('"  
    . mysql_real_escape_string($firstname) . "', '" 
    . mysql_real_escape_string($surname) . "', '" 
    . mysql_real_escape_string($business) . "', '" 
    . mysql_real_escape_string($state) . "', '" 
    . mysql_real_escape_string($email) . "')"; 
```

# php - PHP根据文件夹结构动态生成命名空间

> ID：13510073
> 
> 赞同：1
> 
> 时间：2012-11-22T10:00:03.807
> 
> 标签：php, oop, dynamic, namespaces

我有一个像这样的文件夹结构：

```
index.php
app/
    controllers/
                folder1/
                        class.php 
```

class.php 中没有命名空间定义。是否可以将 class.php 放在从相对于索引的文件夹结构生成的命名空间中？所以它会像这样加载：

```
new \app\controllers\folder1\classInFile(); 
```

还是没有办法动态创建命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:03:43.477

> 包含命名空间的文件必须在任何其他代码之前在文件顶部声明命名空间。
> 
> [http://php.net/manual/en/language.namespaces.definition.php](http://php.net/manual/en/language.namespaces.definition.php)

即，您不能在命名空间声明之前执行任何代码，之后为时已晚。尽管有内省的运行时黑客：不，这是不可能的。即使是这样，它也将取决于运行时信息，例如执行/包含代码的文件夹。命名空间可以是`var\www\myproject\foo\bar\baz`或只是`foo\bar\baz`. 你将如何确定？这就越来越乱了。

真的，只要让它*明确*，即使这意味着输入更多。命名空间是类*名称*的一部分。您不应在运行时动态生成*名称。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:03:13.637

您不应该动态生成命名空间，命名空间不能在编译时设置和读取。

在任何情况下，命名空间都是在执行任何代码之前提供/定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:04:09.783

如果可以动态创建 PHP 源文件，则需要在 class.php 内部定义命名空间，也可以动态创建命名空间。

# php - 向个人资料页面添加额外字段

> ID：13510077
> 
> 赞同：0
> 
> 时间：2012-11-22T10:00:15.473
> 
> 标签：php, wordpress

我正在使用插件[主题-我的登录](http://wordpress.org/extend/plugins/theme-my-login/)和[主题我的个人资料](http://wordpress.org/extend/plugins/theme-my-profile/)来创建前端登录/注册过程。

当用户在网站上注册时，他们会被重定向到他们的个人资料页面。虽然我的登录主题带有向注册表单添加额外字段的能力，但我如何向个人资料表单添加额外字段？

要显示和更新配置文件，我有在`[theme-my-profile]`前端显示用户配置文件的简码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:02:20.360

试试这个代码

```
add_filter('user_contactmethods', array(&$this, 'add_contactmethods'), 10, 1);

/**
 * Add another contact field to the user profile page
 *
 * @param array $contactmethods
 * @return array
 */
function add_contactmethods( $contactmethods ) {
    // Add Twitter
    $contactmethods['twitter'] = __('Twitter Username', 'twitter-avatar-reloaded');
    return $contactmethods;
} 
```

PS：我从我的[Twitter Avatar Reloaded WordPress Plugin复制了这段代码](http://sudarmuthu.com/wordpress/twitter-avatar-reloaded)

# javascript - 如何在边界区域内显示pdf？

> ID：13510092
> 
> 赞同：0
> 
> 时间：2012-11-22T10:00:53.683
> 
> 标签：javascript, jquery, jsp, iframe

我的 iframe 中有一个边框区域。代码是这样的：

```
<div>
<center>
<div style="width:600px;height:245px;border:3px solid grey;">
</div>
</center>
</div> 
```

这会在我的 iframe 内创建一个带边框的灰色区域。现在我希望用户在具有垂直和水平滚动条的边界区域内打开 iframe 时查看 pdf。pdf 位于此网址中：

[http://www.irs.gov/pub/irs-pdf/fw4.pdf](http://www.irs.gov/pub/irs-pdf/fw4.pdf)

我怎样才能做到这一点 ？请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:34:12.967

或者，如果您不想使用框架，您可以将 pdf 作为对象包含在内。您现在可能会想到的一个问题（哪种用法？）在这里问[为什么人们使用 <object classid=""> 来显示 PDF 而不是 src="1.pdf"](https://stackoverflow.com/questions/1598573/why-people-use-object-classid-to-show-pdf-instead-of-src-1-pdf)

典型用法如下；

```
 <!--[if IE]>
<object classid="clsid:CA8A9780-280D-11CF-A24D-444553540000" data="http://www.irs.gov/pub/irs-pdf/fw4.pdf">
<p>backup content</p>
</object>
<![endif]-->

<!--[if !IE]> <-->
<object type="application/pdf" data="http://www.irs.gov/pub/irs-pdf/fw4.pdf" style="width:100%; height:100%">
<p>backup content</p>
</object>
<!-->
<![endif]--> 
```

您可以在此处查看其他类型对象元素的用法和 css 问题。 [http://joliclic.free.fr/html/object-tag/en/index.php](http://joliclic.free.fr/html/object-tag/en/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:08:12.037

只需在 iframe src 值中传递 pdf url：

```
...
<center>

    <iframe runat="server" src="http://www.irs.gov/pub/irs-pdf/fw4.pdf "
     width="600px" height="245px" id="iframeDash"  frameborder="1" >

</center>
... 
```

# c# - TPL Dataflow，仅在所有源数据块完成时才保证完成

> ID：13510094
> 
> 赞同：30
> 
> 时间：2012-11-22T10:00:57.680
> 
> 标签：c#, concurrency, task-parallel-library, tpl-dataflow

当两个变换块都完成时，如何重写代码完成的代码？我认为完成意味着它被标记为完成并且“out queue”是空的？

```
public Test()
    {
        broadCastBlock = new BroadcastBlock<int>(i =>
            {
                return i;
            });

        transformBlock1 = new TransformBlock<int, string>(i =>
            {
                Console.WriteLine("1 input count: " + transformBlock1.InputCount);
                Thread.Sleep(50);
                return ("1_" + i);
            });

        transformBlock2 = new TransformBlock<int, string>(i =>
            {
                Console.WriteLine("2 input count: " + transformBlock1.InputCount);
                Thread.Sleep(20);
                return ("2_" + i);
            });

        processorBlock = new ActionBlock<string>(i =>
            {
                Console.WriteLine(i);
            });

        //Linking
        broadCastBlock.LinkTo(transformBlock1, new DataflowLinkOptions { PropagateCompletion = true });
        broadCastBlock.LinkTo(transformBlock2, new DataflowLinkOptions { PropagateCompletion = true });
        transformBlock1.LinkTo(processorBlock, new DataflowLinkOptions { PropagateCompletion = true });
        transformBlock2.LinkTo(processorBlock, new DataflowLinkOptions { PropagateCompletion = true });
    }

    public void Start()
    {
        const int numElements = 100;

        for (int i = 1; i <= numElements; i++)
        {
            broadCastBlock.SendAsync(i);
        }

        //mark completion
        broadCastBlock.Complete();

        processorBlock.Completion.Wait();

        Console.WriteLine("Finished");
        Console.ReadLine();
    }
} 
```

我编辑了代码，为每个转换块添加了输入缓冲区计数。很明显，所有 100 个项目都流式传输到每个变换块。但是一旦一个变换块完成，处理器块就不再接受任何项目，而是不完整的变换块的输入缓冲区只是刷新输入缓冲区。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-23T21:52:49.373

这个问题正是 casperOne 在他的回答中所说的。一旦第一个转换块完成，处理器块进入“完成模式”：它将处理其输入队列中的剩余项目，但不会接受任何新项目。

有一个比将处理器块一分为二更简单的解决方法：不要设置`PropagateCompletion`，而是在两个转换块都完成时手动设置处理器块的完成：

```
Task.WhenAll(transformBlock1.Completion, transformBlock2.Completion)
    .ContinueWith(_ => processorBlock.Complete()); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-23T17:07:00.107

这里的问题是，每次调用链接块的[方法](http://msdn.microsoft.com/en-us/library/hh462751.aspx)以及转换块中不同的等待时间时，您都在设置[`PropagateCompletion`属性。](http://msdn.microsoft.com/en-us/LIBRary/system.threading.tasks.dataflow.dataflowlinkoptions.propagatecompletion%28v=vs.110%29)[`LinkTo`](http://msdn.microsoft.com/en-us/library/hh462751.aspx)

[从接口](http://msdn.microsoft.com/en-us/library/hh160365.aspx)上的[`Complete`方法](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.idataflowblock.complete.aspx)的文档（强调我的）：[`IDataflowBlock`](http://msdn.microsoft.com/en-us/library/hh160365.aspx)

> 向 IDataflowBlock 发出信号，表明它**不应接受**或产生任何更多消息**，也不应消耗任何更多延迟的消息**。

因为您在每个[`TransformBlock<TInput, TOutput>`](http://msdn.microsoft.com/en-us/library/hh194782.aspx)实例中错开等待时间，所以`transformBlock2`（等待 20 毫秒）在`transformBlock1`（等待 50 毫秒）之前完成。 `transformBlock2`首先完成，然后发送信号`processorBlock`，然后说“我不接受其他任何东西”（并且`transformBlock1`还没有产生所有的消息）。

注意`transformBlock1`before的处理`transformBlock1`不是*绝对*保证的；线程池（假设您使用默认调度程序）以不同的顺序处理任务是可行的（但很可能不会，因为一旦完成 20 毫秒的项目，它将从队列中窃取工作）。

您的管道如下所示：

```
 broadcastBlock
          /              \
 transformBlock1   transformBlock2
          \              /
           processorBlock 
```

为了解决这个问题，您需要一个如下所示的管道：

```
 broadcastBlock
          /              \
 transformBlock1   transformBlock2
          |              |
 processorBlock1   processorBlock2 
```

只需创建两个单独的[`ActionBlock<TInput>`](http://msdn.microsoft.com/en-us/library/hh194684.aspx)实例即可完成，如下所示：

```
// The action, can be a method, makes it easier to share.
Action<string> a = i => Console.WriteLine(i);

// Create the processor blocks.
processorBlock1 = new ActionBlock<string>(a);
processorBlock2 = new ActionBlock<string>(a);

// Linking
broadCastBlock.LinkTo(transformBlock1, 
    new DataflowLinkOptions { PropagateCompletion = true });
broadCastBlock.LinkTo(transformBlock2, 
    new DataflowLinkOptions { PropagateCompletion = true });
transformBlock1.LinkTo(processorBlock1, 
    new DataflowLinkOptions { PropagateCompletion = true });
transformBlock2.LinkTo(processorBlock2, 
    new DataflowLinkOptions { PropagateCompletion = true }); 
```

然后，您需要等待两个处理器块，而不仅仅是一个：

```
Task.WhenAll(processorBlock1.Completion, processorBlock2.Completion).Wait(); 
```

这里有一个*非常*重要的注意事项；创建 时`ActionBlock<TInput>`，默认设置是将传递给它的实例上的[`MaxDegreeOfParallelism`属性设置为 1。](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.executiondataflowblockoptions.maxdegreeofparallelism.aspx)[`ExecutionDataflowBlockOptions`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.executiondataflowblockoptions.aspx)

这意味着您传递给[`Action<T>`委托](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)`ActionBlock<TInput>`的调用是线程安全的，一次只会执行一个。

因为您现在有*两个* `ActionBlock<TInput>`实例指向同一个`Action<T>`委托，所以不能保证线程安全。

如果您的方法是线程安全的，那么您不必做任何事情（这将允许您将`MaxDegreeOfParallelism`属性设置为[`DataflowBlockOptions.Unbounded`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.dataflowblockoptions.unbounded.aspx)，因为没有理由阻止）。

如果它*不是*线程安全的，并且您需要保证它，则需要求助于传统的同步原语，例如[`lock`statement](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)。

在这种情况下，您可以这样做（尽管显然不需要，因为[类](http://msdn.microsoft.com/en-us/library/system.console.aspx)上的[`WriteLine`方法](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx)是线程安全的）：[`Console`](http://msdn.microsoft.com/en-us/library/system.console.aspx)

```
// The lock.
var l = new object();

// The action, can be a method, makes it easier to share.
Action<string> a = i => {
    // Ensure one call at a time.
    lock (l) Console.WriteLine(i);
};

// And so on... 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-09T09:49:52.160

svick 回答的补充：为了与您使用 PropagateCompletion 选项获得的行为一致，您还需要转发异常以防前一个块出现故障。像下面这样的扩展方法也可以解决这个问题：

```
public static void CompleteWhenAll(this IDataflowBlock target, params IDataflowBlock[] sources) {
    if (target == null) return;
    if (sources.Length == 0) { target.Complete(); return; }
    Task.Factory.ContinueWhenAll(
        sources.Select(b => b.Completion).ToArray(),
        tasks => {
            var exceptions = (from t in tasks where t.IsFaulted select t.Exception).ToList();
            if (exceptions.Count != 0) {
                target.Fault(new AggregateException(exceptions));
            } else {
                target.Complete();
            }
        }
    );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-19T09:01:19.657

其他答案很清楚为什么 PropagateCompletion=true 当一个块有两个以上的来源时会搞砸。

要为该问题提供一个简单的解决方案，您可能需要查看一个开源库[DataflowEx](https://github.com/gridsum/dataflowex)，它通过内置更智能的完成规则来解决此类问题。（它在内部使用 TPL 数据流链接，但支持复杂的完成传播。实现看起来类似于 WhenAll，但也处理动态链接添加。请检查[Dataflow.RegisterDependency()](https://github.com/gridsum/DataflowEx/blob/master/Gridsum.DataflowEx/Dataflow.cs)和[TaskEx.AwaitableWhenAll()](https://github.com/gridsum/DataflowEx/blob/master/Gridsum.DataflowEx/Exceptions/TaskEx.cs)了解详细信息。）

我稍微更改了您的代码，以使用 DataflowEx 使一切正常：

```
public CompletionDemo1()
{
    broadCaster = new BroadcastBlock<int>(
        i =>
            {
                return i;
            }).ToDataflow();

    transformBlock1 = new TransformBlock<int, string>(
        i =>
            {
                Console.WriteLine("1 input count: " + transformBlock1.InputCount);
                Thread.Sleep(50);
                return ("1_" + i);
            });

    transformBlock2 = new TransformBlock<int, string>(
        i =>
            {
                Console.WriteLine("2 input count: " + transformBlock2.InputCount);
                Thread.Sleep(20);
                return ("2_" + i);
            });

    processor = new ActionBlock<string>(
        i =>
            {
                Console.WriteLine(i);
            }).ToDataflow();

    /** rather than TPL linking
      broadCastBlock.LinkTo(transformBlock1, new DataflowLinkOptions { PropagateCompletion = true });
      broadCastBlock.LinkTo(transformBlock2, new DataflowLinkOptions { PropagateCompletion = true });
      transformBlock1.LinkTo(processorBlock, new DataflowLinkOptions { PropagateCompletion = true });
      transformBlock2.LinkTo(processorBlock, new DataflowLinkOptions { PropagateCompletion = true });
     **/

    //Use DataflowEx linking
    var transform1 = transformBlock1.ToDataflow();
    var transform2 = transformBlock2.ToDataflow();

    broadCaster.LinkTo(transform1);
    broadCaster.LinkTo(transform2);
    transform1.LinkTo(processor);
    transform2.LinkTo(processor);
} 
```

完整代码在[这里](https://github.com/gridsum/DataflowEx/blob/develop/Gridsum.DataflowEx.Demo/ForStackoverflow/CompletionDemo1.cs)。

免责声明：我是 DataflowEx 的作者，它是在 MIT 许可下发布的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-06T15:30:12.790

这是一个功能上与 pkt 的方法等效的[`CompleteWhenAll`](https://stackoverflow.com/questions/13510094/tpl-dataflow-guarantee-completion-only-when-all-source-data-blocks-completed/15898730#15898730)方法，但代码略少：

```
public static async void PropagateCompletion(IDataflowBlock[] sources,
    IDataflowBlock target)
{
    // Arguments validation omitted
    Task allSourcesCompletion = Task.WhenAll(sources.Select(s => s.Completion));

    try { await allSourcesCompletion.ConfigureAwait(false); } catch { }

    var exception = allSourcesCompletion.IsFaulted ?
        allSourcesCompletion.Exception : null;

    if (exception != null) target.Fault(exception); else target.Complete();
} 
```

使用示例：

```
PropagateCompletion(new[] { transformBlock1, transformBlock2 }, processorBlock); 
```

该`PropagateCompletion`方法是我在[此处](https://stackoverflow.com/questions/63748814/many-to-many-tpl-dataflow-does-not-process-all-inputs/63749571#63749571 "多对多 TPL 数据流不处理所有输入")发布的具有相同名称的更通用方法的变体。

# netbeans-7 - netbeans 在运行项目时总是下载文件

> ID：13510096
> 
> 赞同：3
> 
> 时间：2012-11-22T10:01:04.900
> 
> 标签：netbeans-7

我有一个基于 Maven 的 java spring mvc 项目。每当我第一次尝试运行这个项目时，控制台都会告诉我 netbeans 正在下载很多文件，比如

```
Downloading: http://maven.springframework.org/milestone/org/springframework/spring-asm/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://mirrors.ibiblio.org/pub/mirrors/maven2/org/springframework/spring-asm/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://maven.springframework.org/snapshot/org/springframework/spring-asm/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://repo1.maven.org/maven2/org/springframework/spring-asm/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml 
```

每次我退出 netbeans 并重新启动时，它都会下载。

# matlab - 如何使用 MATLAB 创建包含文本和图形的报告

> ID：13510098
> 
> 赞同：9
> 
> 时间：2012-11-22T10:01:13.590
> 
> 标签：matlab, pdf-generation, report, matlab-deployment, matlab-figure

我正在使用 MATLAB 脚本来调整机器上的控制系统。调整完成后，我想要一份包含文本（尤其是序列号、日期/时间和调整期间确定的值）和图，尤其是传递函数的报告。

你有什么建议？

我使用的任何解决方案都应该与 MATLAB 编译器兼容，这样我就可以将我的解决方案分发给现场工程师团队。

理想情况下，报告将是 PDF 文档。

MATLAB 报告生成器似乎不是正确的产品，因为我似乎必须将我的脚本分成小块并将它们嵌入到报告模板中。如果绘图看起来不正确，我的脚本包含用户干预和更改值或拒绝调整的机会，我的直觉是，如果代码从报告生成器运行，这将很困难。另外，如果代码结构由报告模板的要求决定，我担心代码结构和可维护性会丢失。

如果我的假设是错误的，请发表评论。

**更新**

我现在已经切换到使用 r2016b 版本的 MATLAB 报告生成器，它对我的​​编译代码用户来说工作得很好。不幸的是，这意味着拥有 MATLAB 许可证的同事也需要购买报告生成器，才能使用我的脚本工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-15T16:00:11.953

As the MATLAB Report Generator's development manager, I am concerned that this question may leave the wrong impression about the Report Generator's capabilities.

For one thing, the Report Generator does not require you to break a script up into little pieces and run them inside a template. You can do this if you choose and in some circumstances, it makes sense, but it is not a requirement. In fact, many Report Generator applications use a MATLAB script or program to interact with a user, generate data in the MATLAB workspace, and as a final step, generate a report from the workspace data.

Moreover, as of the R2014b version, the MATLAB Report Generator comes with a document generation API, called the DOM API, that allows you to embed document generation statements in a MATLAB program. For example, you can programmatically create a document object, add and format text, paragraphs, tables, images, lists, and subdocuments, and output Microsoft Word, HTML, or PDF output, depending on the output type you select. You can even programmatically fill in the blanks in forms that you create, using Word or an HTML editor.

The API runs on Windows, Linux, and Mac platforms and generates Word and HTML output on all three, without the use of Word. On Windows, it uses Word under the hood to produce PDF output from the Word documents that it generates.

The latest release of the MATLAB Report Generator introduces a PowerPoint API with capabilities similar to the DOM API. If you need to include report generation in your MATLAB application, please don't rule out the MATLAB Report Generator based on past impressions. You may be surprised at just how powerful it has become.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T16:34:32.563

I've done this quite a bit. You're right that MATLAB Report Generator is typically not a great solution. @Max suggests the right approach (automating Word through its COM interface), but I'd add a few extra comments and tips, based on my experiences.

1.  Remember that if you're going with this solution, you are depending that your end-users will be running Windows, and have a copy of Office on their machine. If you want to ultimately produce a PDF report, that will need to be Office 2010 or above.
2.  I would bet that you'll find it easier to automate the report generation in Excel rather than Word. Given that you're producing a report from MATLAB, you'll likely be wanting quite a lot of things in tables of numbers, which are easier to lay out in Excel.
3.  If you are going to do it in Word, the easiest way is to first (without MATLAB) create a template .doc/.docx file, which contains any generic text that will be the same for all reports and blank tables for any information. Turn on track changes, and insert empty comments at each point that you will be filling in information. Then within your report creation routine in MATLAB, connect to Word and iterate through each comment, replacing it with whatever data you wish.
4.  If you are learning to automate Excel from MATLAB, [this page](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel%28v=office.14%29.aspx) from the Excel Interop documentation is **really** helpful. There's an equivalent one for Word.
5.  Unlike @Max, I've never had good results by saving figures to an .emf file and then inserting them. In theory that does preserve editability, but I've never found that valuable. Instead, get the figure looking right (and the right size) in MATLAB, then copy it to the clipboard with `print(figHandle, 'dbitmap')` and paste to Excel with `Worksheet.Range('A1').PasteSpecial`.
6.  To save as a PDF, use `Workbook.ExportAsFixedFormat('xlTypePDF', pathToOutputFile)`.

Hope that helps!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T10:14:11.727

我认为您对报告生成器的看法是正确的。

在我看来，最快/最简单的方法是在 html 文档中生成报告。为此，您只需要数字并编写一个文本文件，转换应该是微不足道的。

非常相似的方法是创建一个 Latex 文件。然后从中创建一个 pdf - 尽管为此您需要在部署的机器上安装乳胶。

Lastly you could use the good integration of Java in Matlab. There are several libraries you could use - like [this](https://www.ibm.com/developerworks/library/os-javapdf/index.html). But I wonder if all the complication will be worth it.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T10:12:05.537

您是否考虑过通过 ActiveX 界面驱动 Microsoft Word？我已经在编译的 Matlab 程序中完成了这项工作，并且效果很好。查看 Matlab 帮助`actxserver()`： 您要创建的对象是类型`Word.Application`。

编辑添加：要将数字放入文档，使用`-dmeta`参数将它们保存为 .emf 文件`print()`，然后将它们添加到文档中，如下所示：

```
 WordServer.Selection.InlineShapes.AddPicture(fileName); 
```

# javascript - DropKick.js 菜单 - 页面加载时始终打开

> ID：13510099
> 
> 赞同：0
> 
> 时间：2012-11-22T10:01:15.570
> 
> 标签：javascript, html, css

我的响应式网站的 dropkick 菜单有问题。当站点输入 iphone 大小时，它使用 dropkick.js 更改为这个 dropkick 菜单，它是一个下拉菜单。

**我的 HTML：**

```
<div id="mobilemenu">
    <a href="#" id="pull">Menu</a>
</div> 
```

仅当您以 320 像素宽度查看网站时，上述代码才可见。

**我的Javascript：**

```
<script type="text/javascript">
    $(function () {
        var pull1 = $('#pull');
        menu1 = $('ul.menuresponsive');
        menuHeight = menu1.height();
        $(pull1).on('click', function (e) {
            e.preventDefault();
            menu1.slideToggle();
        });

        $(window).resize(function () {
            var w = $(window).width();
            if (w > 320 && menu.is(':hidden')) {
                menu1.removeAttr('style');
            }
        });
    });
</script> 
```

我对 Javascript 不太了解，这是从[教程](http://www.hongkiat.com/blog/responsive-web-nav/)中获取的。

**当网站处于 320 像素时，我的 CSS：**

```
/* Menu */
#mobilemenu { display:block !important; margin-bottom:20px; }
#mobilemenu ul { margin:12px 0 0 0 !important; list-style:none; padding:0 10px 0 10px }
#mobilemenu ul li { float:none !important; font-size:16px; padding:5px 0 5px; font-weight:bold; border-bottom:1px solid #000; }
#mobilemenu ul li a { color:#333; text-decoration:none; }
/* Drop */
#mobilemenu ul li ul li { font-size:14px; font-weight:normal; border:none; color:#000; }

/* Pull */
#pull { display:block !important; text-align:center; color:#fff; text-decoration:none; padding:10px 0 10px 0; font-size:16px; font-weight:bold; }
#menu { display:none; } 
```

现在看起来，菜单一直打开，如下所示，我非常希望它默认关闭，但我似乎找不到解决方案。

`<ul>`我的菜单`<li>`在`<div id="mobilemenu">`

![响应式菜单 - 始终打开](../Images/71afd226d84b91fb00721f554b039569.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:08:17.297

在本教程中，您链接到演示示例有两个媒体查询 - 一个用于 515 像素，一个用于 320 像素。

515px 的 CSS 将由 320px 继承，它包含我认为关闭菜单所需的代码。

尝试将此代码添加到您的媒体查询中：

```
nav {
    border-bottom: 0;
}
nav ul {
    display: none;
    height: auto;
}
nav a#pull {
    display: block;
    background-color: #283744;
    width: 100%;
    position: relative;
}
nav a#pull:after {
    content:"";
    background: url('nav-icon.png') no-repeat;
    width: 30px;
    height: 30px;
    display: inline-block;
    position: absolute;
    right: 15px;
    top: 10px;
} 
```

# ivy - IVY 解析器正在寻找不同的本地路径

> ID：13510103
> 
> 赞同：1
> 
> 时间：2012-11-22T10:01:19.197
> 
> 标签：ivy

我已将本地缓存定义如下：

```
<caches defaultCacheDir="${user.home}/.ivy2/local"
  ivyPattern="[organization]/[module]/[module]-[revision]/[module]-[revision]-ivy.xml"
  artifactPattern="[organization]/[module]/[module]-[revision]/[artifact].[ext]"/> 
```

并尝试使用解析器获取数据

```
<resolvers>
  <chain name="chain1" changingPattern=".*SNAPSHOT" returnFirst="true">
  <resolver ref="local"/>
  <ibiblio name="maven-repo1" 
```

我已经拥有本地的所有罐子。但是对于一些罐子来说，它无法找到它们，因为 IVY 正在以不同的路径查看它们，如下所示：

```
[ivy:resolve]       module not found: org.apache.cxf#cxf-rt-core;2.2.+
[ivy:resolve]   ==== local: tried
[ivy:resolve]     C:\Users\psaha\.ivy2/local/org.apache.cxf/cxf-rt-        core/[revision]/ivys/ivy.xml
[ivy:resolve]     [ivydata-2.2.12.properties, ivydata-2.2.+.properties, cxf-rt-core-2.2.12]
[ivy:resolve]     -- artifact org.apache.cxf#cxf-rt-core;2.2.+!cxf-rt-core.jar:
[ivy:resolve]     C:\Users\psaha\.ivy2/local/org.apache.cxf/cxf-rt-core/[revision]/jars/cxf-rt-core.jar
[ivy:resolve]     [ivydata-2.2.12.properties, ivydata-2.2.+.properties, cxf-rt-core-2.2.12]
[ivy:resolve]       module not found: org.apache.cxf#cxf-rt-frontend-simple;2.2.+
[ivy:resolve]   ==== local: tried
[ivy:resolve]     C:\Users\psaha\.ivy2/local/org.apache.cxf/cxf-rt-frontend-simple/[revision]/ivys/ivy.xml
[ivy:resolve]     [ivydata-2.2.12.properties, ivydata-2.2.+.properties, cxf-rt-frontend-simple-2.2.12]
[ivy:resolve]     -- artifact org.apache.cxf#cxf-rt-frontend-simple;2.2.+!cxf-rt-frontend-simple.jar:
[ivy:resolve]     C:\Users\psaha\.ivy2/local/org.apache.cxf/cxf-rt-frontend-simple/[revision]/jars/cxf-rt-frontend-simple.jar
[ivy:resolve]     [ivydata-2.2.12.properties, ivydata-2.2.+.properties, cxf-rt-frontend-simple-2.2.12]
[ivy:resolve]       module not found: org.apache.cxf#cxf-rt-frontend-jaxws;2.2.+ 
```

理想情况下，我不希望常春藤查看 ../ivys/.. 或 ../jars/.. 之类的地方。这只发生在几个 jar/ivy 分辨率中。如何解决这个问题？

# entity-framework - 实体框架 - 无存储库抽象

> ID：13510111
> 
> 赞同：0
> 
> 时间：2012-11-22T10:01:36.803
> 
> 标签：entity-framework, asp.net-mvc-4

在我的项目中，我需要使用 EF 并从表示层抽象查询。根据我在网上阅读的问题和答案，EF 在其 DbSet 上构建了存储库模式，在 DbContext 上具有工作单元。

存储库模式可以轻松满足要求，但我不想重复此实现，现在很困惑我应该在哪里初始化或访问 DbContext。它应该在服务层上吗？

本项目将使用 MVC4 Api

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:14:56.300

我过去看到的一种方法是通过为您的上下文创建一个接口，然后从您的服务层（业务逻辑层）进行数据访问调用，从本质上消除 DbContext 对物理数据库的依赖。

但是，使用这种方法有一个缺点，即您的单元测试（将使用 DbContext 的 Fake 实现）将使用 LINQ to Objects 来运行您的查询，而您的具体实现将使用 LINQ to Entities它不支持所有 LINQ to Objects 方法。

MSDN (http://msdn.microsoft.com/en-us/library/bb738550.aspx) 上有文档突出了这些差异。

我还建议阅读这篇文章 (http://kearon.blogspot.com.au/2011/02/mocking-entity-framework-4-code-first.html)，它演示了如何通过删除底层依赖来使 DbContext 单元可测试在物理数据库上。

希望这一切都有帮助！

# shopify - 如何在 Shopify 之外访问 Liquid 变量

> ID：13510114
> 
> 赞同：1
> 
> 时间：2012-11-22T10:01:40.723
> 
> 标签：shopify

我们现在有两个网站实例。一种是旧的，包含购物车和用于页面、帖子和画廊功能的 WP 实例。现在，为了缩短开发时间，我们决定将旧网站的外观和感觉无缝集成到新网站。有了这个，我们需要在新网站上使用以下链接（wordpress 端）

1.  登录/注销链接。如果客户已登录并将访问其中一个 WP 页面，则我的帐户部分应反映已登录客户的详细信息。
2.  查看购物车/购物车详细信息。对于在 Shopify 域内完成的购买，已签出项目的数量和成本应反映在 wp 网站中。
3.  结帐 - 与 #2 相同。

为了获得更清晰的图片（我希望），标题区域看起来像这样 - 在 Shopify 和我们的 WP 主题中（还不能发布图片）：

主页 | 关于 | 店铺 | 画廊

**我的帐户 | 注销
查看购物车(0 件/$0.0) | 查看**

非常感谢任何使粗体项目即使在 wordpress 中也能正常工作的建议/输入。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T23:11:03.633

不幸的是，这将非常棘手，因为出于安全原因，您的浏览器无法读取 Shopify 在非您商店的域上存储对购物车的引用的 cookie。

但是，您可以做些什么来回避这个问题：

*   在您的 Shopify 商店中创建一个页面，该页面显示标题并将其样式设置为与您在 WP 中的样式相同
*   在您的 WP 网站中放置一个 iframe，并以 Shopify 页面作为其来源

# asp.net-mvc - 在 ASP.Net MVC 4 中创建 Model.Context 和 Model 类后，Model 类出错

> ID：13510115
> 
> 赞同：0
> 
> 时间：2012-11-22T10:01:44.947
> 
> 标签：asp.net-mvc, asp.net-mvc-4, entity-framework-4.1

我在 ASP.Net MVC 4 应用程序上使用 EF 4.1从**现有数据库生成了 xxxModel.Context 和 xxxModel 模板（在模型中）。**之后，当我构建项目时，它会为所有模型类（POCO）给出错误，说“类型**文件名**已经包含**成员变量名**的定义”。我哪里错了？

![错误截图！](../Images/2b96d437f2f4f40dafa23457c236d747.png)

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:06:55.470

显然，该文件`DESE.cs`（和其他文件）已经包含具有属性的同名类 - 这与 EF 生成的类型发生冲突。 `CC_Names.cs`，例如，由文本模板输出 - 所以我假设您从同一个数据库中获得了不止一个代码生成策略。

然后您还会遇到问题，即您`CorpCostEntities`在另一个文件中再次重新声明了部分类，该文件的基数与 EF 代码生成器设置的基数不同。

我认为您可能需要决定是要使用 edmx 代码生成还是文本模板方法并坚持下去:)

# php - 获取页面标题的正则表达式

> ID：13510124
> 
> 赞同：5
> 
> 时间：2012-11-22T10:02:14.083
> 
> 标签：php, regex

这个问题有很多答案，但没有一个完整的答案：

使用一个正则表达式，如何从中提取页面标题`<title>Page title</title>`？

还有其他几种情况是如何键入标题标签的，例如：

```
<TITLE>Page title</TITLE>

<title>
 Page title</title>
<title>
 Page title
</title>

<title lang="en-US">Page title</title> 
```

...或以上的任何组合。

它可以在自己的行上或在其他标签之间：

```
<head>
  <title>Page title</title>
</head>

<head><title>Page title</title></head> 
```

提前感谢您的帮助。

UDPATE：所以，正则表达式方法可能不是最好的解决方案。哪个基于 PHP 的 HTML 解析器可以处理 HTML 格式良好（或不太好）的所有场景？

更新 2：sp00m 的正则表达式（[https://stackoverflow.com/a/13510307/1844607](https://stackoverflow.com/a/13510307/1844607)）似乎在所有情况下都有效。如果需要，我会回到这个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T10:10:47.257

[请改用 HTML 解析器](https://stackoverflow.com/a/1732454/1225328)。但在以下情况下：

```
<title[^>]*>(.*?)</title> 
```

[演示](http://regexr.com?32t69)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:10:46.057

使用 DOMDocument 类：

```
$doc = new DOMDocument();
$doc->loadHTML($html);
$titles = $doc->getElementsByTagName("title");
echo $titles->item[0]->nodeValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:20:13.863

使用这个正则表达式：

```
<title>[\s\S]*?</title> 
```

# php - 使用 simplexml 将 xml 节点值更新 1。是否可以？

> ID：13510126
> 
> 赞同：2
> 
> 时间：2012-11-22T10:02:21.237
> 
> 标签：php, xml, simplexml, xmlnode

我有一个具有以下布局的 XML 文件。`<postviews>`当用户查看 wordpress 帖子时，id get与默认值为 1 的节点一起写入 xml 文件，如下所示……</p>

```
<posts>
    <post id="22640">
        <postviews>1</postviews>
    </post>
    <post id="7780">
        <postviews>1</postviews>
    </post>
</posts> 
```

如何编写更新查询，以便当再次看到 wordpress 帖子时，特定帖子 id 的 postviews 值会更新为 1，因此看起来像……</p>

```
<posts>
    <post id="22640">
        <postviews>2</postviews>
    </post>
    <post id="7780">
        <postviews>1</postviews>
    </post>
</posts> 
```

似乎我无法定位正确的节点。如何使用特定的帖子 ID 更新节点的子节点？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:59:36.580

设法自己找到答案。这是如果文件中没有帖子 id 则添加新节点的代码，如果是则将节点值更新为 1...</p>

```
//Get the wordpress postID
$postID = get_the_ID();

$postData = get_post($postID);

// echo $postID.'<br />'.$postData->post_title.'<br />'.$postData->post_date_gmt.'<br />';

$xmlFile = '/Applications/MAMP/htdocs/giraffetest/test.xml';

// load the document
$xml = simplexml_load_file($xmlFile);

// Check to see if the post id is already in the xml file - has it already been set?
$nodeExists = $xml->xpath("//post[@id=".$postID."]");

//Count the results
$countNodeExists = count($nodeExists);

if($countNodeExists > 0) { // If the ID is already in the file

    // echo 'ID already here';

    // get the correct node
    $result = $xml->xpath("//post[@id=".$postID."]/postviews");

    // heres the trick - the first result of xpath, and the node value (stored in [0])
    $result[0][0] = $result[0][0]+1; 

} else { // If the ID isn;'t there, add a new entry in the xml file for the post

    //echo 'ID added';

    $postNode = $xml->addChild('post'); // adding a new <post> to the top level node
    $postNode->addAttribute('id', $postID); // adding a <postid> inside the new <post>
    $postNode->addChild('postviews', 1); // adding a postviews inside the new <post>
}

// save the updated document
$xml->asXML($xmlFile); 
```

# ruby-on-rails - 如何部分显示“...”

> ID：13510128
> 
> 赞同：0
> 
> 时间：2012-11-22T10:02:24.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我看来，我有以下几点：

```
= form @user do |f|
  = f.label :name
  = f.text_field :name
  = f.fields_for :addresses do |f|
  = render "addresses", f: f 
```

在我的部分“_adresses.html.haml”中

```
????????????
  =f.label :city
  =f.text_field :city 
```

如何将“未选择”放入????????? 当我的操作是新的，当我的操作是编辑时，城市的名称？

如果我写：

```
= :city 
```

它显示单词城市，而不是城市名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:32:53.050

您可以检查@user 是否为新记录（未保存在表中），您可以使用@user.persisted?，如果@user 已经在表用户中，则返回true。

你可以做：

```
if f.object.persisted? 
<h1> CITY NAME </h1> 
else 
<h1> NOT CHOOSEN <h1> 
end 
```

在地址部分。如果您在地址部分，要获取名称，请放在 :city 之后，`f.object.city.name`

# ruby-on-rails - 如何使用 simple_form 和 bootstrap 在另一个字段旁边显示一个字段

> ID：13510129
> 
> 赞同：0
> 
> 时间：2012-11-22T10:02:22.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, simple-form

我的表单目前有两个字段，下拉列表和一个输入字段。这是我的表单代码：

```
<div class="offset3 span6">
... # other code not relevant
<div id="topic_questions">
  <%= f.simple_fields_for :topic_questions do |tq| %>
    <%= tq.link_to_remove "Remove below topic" %> <br><br>
    <%= tq.association :topic, collection: @topics, prompt: "Choose a topic", label: false %>
    <%= tq.input :number_question, label: 'Number of questions' %>
  <% end %>
  <p><%= f.link_to_add "Add a topic", :topic_questions %></p>
</div> #topic_questions
</div> 
```

这是表单的样子：

[![图片](../Images/ae3e87779db853fc9279021521c7444c.png)](https://i.stack.imgur.com/lXfsH.png)

但我希望字段输入有标签`Number of questions`将在 dropdownlist 旁边`Choose a topic`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:51:31.823

我找到了解决方案，这是我的新代码：

```
<div id="topic_questions">
  <%= f.simple_fields_for :topic_questions do |tq| %>
    <div class="row">
    <div class="span6"><%= tq.link_to_remove "Remove below topic" %></div><br><br>
    <div class="span3"> <%= tq.association :topic, collection: @topics, prompt: "Choose a topic", label: false %></div>
    <%= tq.input :number_question, placeholder: 'Number of questions', label: false, style: 'display: inline' %>
  <% end %>
   </div> # .row
<p><%= f.link_to_add "Add a topic", :topic_questions %></p>
</div> 
```

现在的表格是这样的：

[![图片](../Images/6daf2d8f4fa7c3812a80bbe76e3e99c3.png)](https://i.stack.imgur.com/2X9J1.png)

# php - 删除空 通过 php 函数来自 wordpress 短代码的标签

> ID：13510131
> 
> 赞同：14
> 
> 时间：2012-11-22T10:02:32.437
> 
> 标签：php, wordpress, function, shortcode

`<p></p>`寻找从 wordpress中删除的 php 函数（非 jQuery 或 wpautop 修改）方法。

我试过这个但它不起作用：

```
 function cleanup_shortcode_fix($content) {   
          $array = array (
            '<p>[' => '[', 
            ']</p>' => ']', 
            ']<br />' => ']',
            ']<br>' => ']'
          );
          $content = strtr($content, $array);
            return $content;
        }
        add_filter('the_content', 'cleanup_shortcode_fix'); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-30T15:17:49.943

尝试在您的`functions.php`文件中插入此代码：

```
remove_filter( 'the_content', 'wpautop' );
add_filter( 'the_content', 'wpautop', 99 );
add_filter( 'the_content', 'shortcode_unautop', 100 ); 
```

[![在此处输入图像描述](../Images/b2a3d0edb37fead14af4f11060db535c.png)](https://i.stack.imgur.com/C2LuV.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T20:08:32.193

`add_filter('the_content', 'cleanup_shortcode_fix', 10);`

我发现如果您指定 10 作为优先级，它会起作用；没有其他号码可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-28T00:00:50.673

这是一个老问题，但我今天解决了这个问题，并认为我会分享。

就我而言，我基本上想删除所有格式不佳的标签`<p>`和`<br>`标签，但是您想正确地将它们重新添加，以便短代码中的文本格式正确。

```
/*
 * Half column shortcode
 */
    function custom_shortcode_half_column( $atts, $content = '') {
        $content = custom_filter_shortcode_text($content);
        return '<div class="half-column">'. $content .'</div>';
    }
    add_shortcode( 'half-column', 'custom_shortcode_half_column' );

/*
 * Utility function to deal with the way WordPress auto formats text in a shortcode.
 */
    function custom_filter_shortcode_text($text = '') {
        // Replace all the poorly formatted P tags that WP adds by default.
        $tags = array("<p>", "</p>");
        $text = str_replace($tags, "\n", $text);

        // Remove any BR tags
        $tags = array("<br>", "<br/>", "<br />");
        $text = str_replace($tags, "", $text);

        // Add back in the P and BR tags again, remove empty ones
        return apply_filters('the_content', $text);
    } 
```

在我看来，这确实应该是 WordPress 解析简码 $content 参数的默认方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:08:03.940

也许正则表达式可以工作：

```
$string=preg_replace_('/<p>\s*</p>/', '', $string); 
```

那应该将任何内容替换为任何`<p></p>`内容，或者将其中的空格替换为任何内容，从而将其删除。

将正则表达式应用于 HTML 代码时，最好先删除`\r\n`HTML 的 ，因为它们会阻止正则表达式的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:08:28.163

您应该增加过滤器的优先级。

这应该工作

```
add_filter('the_content', 'cleanup_shortcode_fix', 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-22T07:15:05.010

你可以删除

标记输入

```
<?php echo $post->post_content; ?> 
```

而不是 the_content()

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2014-01-09T16:32:26.950

你需要的是 jquery 和 php 的混合......这是
我发现工作得很好的唯一工作方式。我在我的网站上有教程，但
为了把东西保存在里面

**jQuery：将其**
*包含在您已经入队的一些 JS 文件中*

```
jQuery(function($){
    $('div#removep > p').filter(function() {
        return $.trim($(this).text()) === '' && $(this).children().length == 0
    })
    .remove()
}) 
```

**您以后可以使用的简码：**
*在您的 functions.php 或包含的文件中*

```
function sght_removep( $atts, $content = null ) {return '<div id="removep">'.do_shortcode($content).'</div>';}
add_shortcode('removep', 'sght_removep'); 
```

**现在你可以像这样包装特定的东西：**

```
[removep]
Some text i write directly in wordpress wysiwyg
<p></p> <-- this would get removed
[/removep] 
```

此解决方案需要一些知识，但它确实有效！
希望这可以帮助...

# iphone - 如何设置 UITextField 来编辑多行？

> ID：13510132
> 
> 赞同：0
> 
> 时间：2012-11-22T10:02:33.593
> 
> 标签：iphone, objective-c, xcode, uitextfield, editing

我有一个宽度为 300 像素、高度为 270 像素的 UITextField。当我想编辑它时，光标会自动移动到中间，我只能在中间一行写字。如何将此 UITextField 设置为具有几行和从左上角开始的光标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:05:02.037

简单的答案，只需使用`UITextView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:10:01.123

UITextfield 仅适用于单行，如果您想输入多行文本而不是使用 UITextView 并将其可编辑属性设置为 YES，那么它的行为就像文本字段！

```
[myTextView setEditable:YES]; 
```

注意：您也可以通过 Interface Builder 进行设置，选择“可编辑”框，默认为多行。

# mongodb - MongoDB 复杂 MapReduce 的视频日志

> ID：13510138
> 
> 赞同：0
> 
> 时间：2012-11-22T10:02:57.930
> 
> 标签：mongodb, mapreduce

我有一个来自视频流日志的数据集。每个视频都由 FileGUID 标识。日志条目记录 FileGUID、观看的视频片段和观看的带宽。

我想创建一个mapreduce，为每个视频输出一个片段总数和每个带宽的计数。理想情况下，它看起来像；

```
{"FileGUID":"50acb3a5796634df0e073285",
  {
    "1":{"total":76, "0832":34, "1028":42},
    "2":{"total":42, "0832":28, "1028":14},
    ...
  }
} 
```

这是否可以通过一个 mapreduce 实现，或者它是一个多步骤过程，还是我应该使用不同的方法？

这是数据示例。

```
{
  "_id": ObjectId("50acb3a5796634df0e073285"),
  "IP": "46.7.1.88",
  "DateTime": ISODate("2012-10-24T22:59:57.0Z"),
  "FileGUID": "8cdde821fb934a6da7c125a012a26612",
  "Bandwidth": NumberInt(1028),
  "Segment": NumberInt(1),
  "Fragment": NumberInt(237),
  "Status": NumberInt(200),
  "Size": NumberInt(576790),
  "UserAgent": "Mozilla\/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko\/20100101 Firefox\/16.0"
}
{
  "_id": ObjectId("50acb3a5796634df0e073284"),
  "IP": "46.7.1.88",
  "DateTime": ISODate("2012-10-24T22:59:52.0Z"),
  "FileGUID": "8cdde821fb934a6da7c125a012a26612",
  "Bandwidth": NumberInt(1028),
  "Segment": NumberInt(1),
  "Fragment": NumberInt(236),
  "Status": NumberInt(200),
  "Size": NumberInt(577100),
  "UserAgent": "Mozilla\/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko\/20100101 Firefox\/16.0"
}
{
  "_id": ObjectId("50acb3a5796634df0e073283"),
  "IP": "46.7.1.88",
  "DateTime": ISODate("2012-10-24T22:59:47.0Z"),
  "FileGUID": "8cdde821fb934a6da7c125a012a26612",
  "Bandwidth": NumberInt(0832),
  "Segment": NumberInt(1),
  "Fragment": NumberInt(234),
  "Status": NumberInt(200),
  "Size": NumberInt(576664),
  "UserAgent": "Mozilla\/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko\/20100101 Firefox\/16.0"
}
{
  "_id": ObjectId("50acb3a5796634df0e073282"),
  "IP": "46.7.1.88",
  "DateTime": ISODate("2012-10-24T22:59:42.0Z"),
  "FileGUID": "8cdde821fb934a6da7c125a012a26612",
  "Bandwidth": NumberInt(0832),
  "Segment": NumberInt(1),
  "Fragment": NumberInt(233),
  "Status": NumberInt(200),
  "Size": NumberInt(575692),
  "UserAgent": "Mozilla\/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko\/20100101 Firefox\/16.0"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:46:00.877

您可以使用单个 MapReduce 作业来完成此操作。

**map 函数**将视频 ID 作为键和值作为由单个字段组成的对象发出。字段名称为带宽，值为当前条目的运行时间。

**reduce 函数**对提供给它的对象进行汇总。它迭代 values 数组，对每个数组条目执行 foreach 循环，并将每个字段的值添加到返回值中的同名字段。

**finalize 函数**对结果对象执行 foreach 循环并计算其中所有条目的总和。然后它将总和作为“总计”字段放入对象中（永远不要对您当前循环的对象进行更改）。

# javascript - 使用 javascript 和 jQuery 更改变量名

> ID：13510139
> 
> 赞同：0
> 
> 时间：2012-11-22T10:02:58.313
> 
> 标签：javascript, jquery, variables, attributes

如何在 jQuery 中的变量名之间切换并更改它们？

```
//predefined variables
var s1='';
var d2='';
//trying to change variables by .attr() parameter but no luck
$('body').on('click','span', function() {
var $(this).parent().attr('data-scan')=$(this).attr('id');
}); 
```

HTML

```
<div data-scan="s1"><span id="banana">Banana</span><span id="apple">Apple</span></div>
<div data-scan="d2"><span id="orange">Orange</span><span id="apple">Apple</span></div> 
```

如何更改特定变量？我不关心更改 attr papameter，我只需要更改预定义的全局 var 参数！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:04:32.733

您使用了错误的[**attr()语法**](http://api.jquery.com/attr/)

**语法：attr( 属性名 , 值)**

改变

```
var $(this).parent().attr('data-scan')=$(this).attr('id'); 
```

到

```
$(this).closest('div').attr('data-scan',$(this).attr('id')); 
```

你的代码是

**[现场演示](http://jsfiddle.net/9aDnW/)**

```
$('body').on('click','span', function() {
    debugger
 $(this).closest('div').attr('data-scan',$(this).attr('id'));

    s1=$(this).closest('div').attr('data-scan');
    alert(s1);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:05:53.097

首先，您的属性 html`data-scan`是错误的，您没有右引号。

其次，可以通过`data()`jquery函数来访问`data`属性。

第三，您不能使用`=`运算符设置值。

你想要这样的东西：

```
 $(this).parent().data('scan', $(this).attr('id')); 
```

或者，没有`data()`功能：

```
 $(this).parent().attr('data-scan', $(this).attr('id')); 
```

[这是一个工作示例](http://jsfiddle.net/musefan/TQhbY/)

* * *

要获取该值，您可以执行以下操作之一：

```
var dataScan = $(this).parent().data('scan'); 
```

或者

```
var dataScan = $(this).parent().attr('data-scan'); 
```

* * *

根据数据扫描值设置变量的确切**要求**

根据您的评论和代码，我认为尚不清楚您要做什么。我想我已经解决了，您想使用该`data-scan`值来确定应该设置哪个全局变量...

```
//predefined variables
var s1='';
var d2='';

$('body').on('click','span', function() {
    var variableType = $(this).parent().data('scan');
    var valueToSet = $(this).attr('id');
    if(variableType == "s1"){
       s1 = valueToSet;
    }
    else if(variableType == "d2"){
       d2 = valueToSet;
    }
}); 
```

这是我认为您正在尝试做[的一个示例。](http://jsfiddle.net/musefan/y7cT4/)

但是，如果您有很多变量，那么使用这么多 if/else 语句并不理想。所以你可以使用javascript`eval()`函数。

```
var variableType = $(this).parent().data('scan');
var valueToSet = $(this).attr('id');

eval("" + variableType + " = '" + valueToSet + "';"); 
```

[有关示例，请参见此处](http://jsfiddle.net/musefan/y7cT4/1/)

但请注意，您的 eval 代码会受到用户注入值的影响（并不是说 javascript 对用户来说是安全的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:05:35.083

你很接近！

```
// set
$('#item').attr('data-scan', 'set new value');

// get
var dataScan = $('#item').attr('data-scan');
console.log(dataScan); //=> set new value 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T10:10:21.460

如果您使用`.prop()`而不是`.attr()`

```
$(this).parent().prop('data-scan', $(this).attr('id') ); 
```

正如 jQuery api 文档所述

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。此外，.attr() 不应用于普通对象、数组、窗口或文档。要检索和更改 DOM 属性，请使用 .prop() 方法。

# sql - 查询表达式中的语法错误（缺少运算符）

> ID：13510143
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:03:13.713
> 
> 标签：sql, ms-access-2010

我试图在 Access 中显示列表框中的一些数据，但只应显示满足特定条件的数据，但是我的 SQL 正在标记错误；

`Syntax Error (missing operator) in query expression tblItem.[Status] WHERE (tblItem.[Status] = 'Unassigned`

这是我的完整查询

```
`SELECT tblItem.[Serial Number], 
        tblItem.[Item Description],
        tblItem.[Model], 
        tblItem.[Status] 
        WHERE (tblItem.[Status] = 'Unassigned') FROM tblItem;` 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:04:46.960

试试这个

```
SELECT tblItem.[Serial Number], 
    tblItem.[Item Description],
    tblItem.[Model], 
    tblItem.[Status] 
   FROM tblItem 
WHERE tblItem.[Status] = 'Unassigned' 
```

我认为您放错了 from 和 where 子句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:07:27.330

记住 的语法`select`：

`SELECT`………… `FROM`_ `WHERE`_`ORDER BY`

# richfaces - 仅重新渲染面板的一部分

> ID：13510145
> 
> 赞同：0
> 
> 时间：2012-11-22T10:03:18.193
> 
> 标签：richfaces, jsf-1.2, ajax4jsf

这是我的问题的简化版本。

```
<h:form id="form1">
  <a4j:commandButton value="Ok" reRender="panel_1"/>

  <a4j:outputPanel id="panel_1" layout="block" style="height:100px;border:solid 1px;">
    Content here should be reRendered

    <a4j:outputPanel id="panel_2" layout="block" style="height:50px;border:solid green;color:green;">
      Content here should not be reRendered  
    </a4j:outputPanel>

  </a4j:outputPanel>
</h:form> 
```

当用户单击 时`<a4j:commandButton>`，应重新渲染第一个`<a4j:outputPanel>`(panel_1)。但是第二个里面的内容`<a4j:outputPanel>`不应该重新渲染。
这可能吗？（至少通过将 更改`<a4j:outputPanel>`为另一个组件。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:59:04.623

您可以使用[MyFaces](http://myfaces.apache.org/tomahawk-project/tomahawk/tagdoc/t_subform.html)改进 Makhiel 解决方案，它允许您定义子表单来包装一些内容以进行部分验证和模型更新。

MyFaces 还允许您通过属性附加`<t:commandButton>`到特定对象。`<t:subform>``actionFor=""`

您需要包含 tomahawk 库才能使用它的标签：

```
<%@ taglib prefix="t" uri="http://myfaces.apache.org/tomahawk"%> 
```

然后可以通过这种方式重写 Makhiel 的代码（我将按钮移动到内部`<a4j:outputPanel>`，以便将其放在`<t:subform>`标签内。

```
<h:form id="form1">
    <a4j:outputPanel id="panel_1" layout="block" style="height:100px;border:solid 1px;">
        <t:subform id="FirstPanelForm">
            <t:commandButton value="Ok" reRender="panel_1_a" actionFor="FirstPanelForm"/>
            <a4j:outputPanel id="panel_1_a">
                Content here should be reRendered
            </a4j:outputPanel>
        </t:subform>
        <a4j:outputPanel id="panel_2" layout="block" style="height:50px;border:solid green;color:green;">
            Content here should not be reRendered  
        </a4j:outputPanel>
    </a4j:outputPanel>
</h:form> 
```

我不知道这是否是您正在寻求的行为。如果没有，请坚持这个`subform`想法并尝试在您的代码中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:30:37.113

将要在另一个面板中重新呈现的内容包装起来怎么样？像这样：

```
<h:form id="form1">
  <a4j:commandButton value="Ok" reRender="panel_1_a"/>
  <a4j:outputPanel id="panel_1" layout="block" style="height:100px;border:solid 1px;">

    <a4j:outputPanel id="panel_1_a">
      Content here should be reRendered
    </arj:outputPanel>

    <a4j:outputPanel id="panel_2" layout="block" style="height:50px;border:solid green;color:green;">
      Content here should not be reRendered  
    </a4j:outputPanel> 
```

或者，您可以搬到`panel_2`其他地方。

# java - Xstream 日期属性

> ID：13510146
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:03:19.443
> 
> 标签：java, xstream

我想在我的 xstream 输出中格式化日期属性，我创建了一个日期转换器，它可以转换正确的格式，但是，它创建了一个新的子元素，而不是添加到父元素属性。

我想要以下

当我为 Date.class 注册一个日期转换器时。我得到以下信息：

```
<output>
<date>20/11/2012</date> 
```

还存在偏移问题，例如，在解析时实际日期似乎存在差异......如果我将 20/11/2012 10.30 解析为当前时间.. 得到的输出是 20/11/2012 10.12...或不同的东西..我需要做一些转换或偏移吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T09:25:53.447

我创造了这个......似乎做我想做的事

```
private DateTimeFormatter fmt = DateTimeFormat.forPattern("dd/MM/Y HH:mm:ss");

    public boolean canConvert(Class type) {
        return type.equals(Date.class);
    }

    public Object fromString(String str) {      
        DateTime dt = fmt.parseDateTime(str);
        return dt.toDate();
    }

    public String toString(Object obj) {        
        return fmt.print(((Date) obj).getTime());
    } 
```

# image - 如何在wordpress中限制图像大小

> ID：13510147
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:03:19.830
> 
> 标签：image, wordpress, resize

正如您在上一篇文章中的[http://thefreefallband.com/super](http://thefreefallband.com/super)中看到的，对于几乎每台计算机来说，图像都太大了。无论如何要限制wordpress中图像的宽度？

如果没有，我怎样才能通过 html 代码调整它的大小而不会丢失比例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:07:23.147

一个非常简单的 CSS 修复将是：

```
.post img {
  max-width: 100%;
  height: auto;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:30:33.333

当您将图像上传到媒体库时，您可以通过转到“设置 -> 媒体”来声明 WP 自动生成的图像大小。请注意，while`Thumnial Size`会将您的图像裁剪为您指定的确切尺寸，`Medium Size`并`Large Size`保持图像的纵横比，同时调整其大小以适合您指定的最大高度/宽度。

如果它们对您不利，您可以添加自己的图像尺寸`functions.php`

```
add_image_size( $name, $width, $height, $crop ); 
```

有关更多信息，请参阅[法典](http://codex.wordpress.org/Function_Reference/add_image_size)。

调用图像时，根据您使用的函数，您可以指定定义的图像大小之一，或最大高度/宽度（如果您这样做，WP 将找到最接近的匹配项）。

假设您使用的是帖子特色图片 -

```
if(has_post_thumbnail( $post_id )) :
    the_post_thumbnail( $size, $attr );
endif; 
```

[`has_post_thumbnail()`](http://codex.wordpress.org/Function_Reference/has_post_thumbnail)有关更多信息，请参阅法典[`the_post_thumbnail()`](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)。

# asp.net - ASP.NET 调试环境中的 localhost cookie

> ID：13510150
> 
> 赞同：1
> 
> 时间：2012-11-22T10:03:28.200
> 
> 标签：asp.net, authentication, cookies

我同时在几个 asp.net 网站上工作。它们都使用基于 cookie（开箱即用）的身份验证机制。当 localhost:4587 上的网站在 VS 中被隐藏时，我以“管理员”用户身份登录并进行了一些测试。

第二天，我将打开在 localhost 上运行的不同项目进行调试。当我尝试访问标有授权属性的 MVC 控制器操作时，系统假定当前用户是“管理员”，并且正在根据自定义提供程序寻找它的角色。但是在这个站点上，甚至没有一个名为“admin”的用户。如何确保来自其他站点的 cookie 不会在 ASP.NET MVC 应用程序中进行角色检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T00:52:24.917

在每个应用程序中为您的表单标签指定一个唯一的名称

```
<authentication mode="Forms">
  <forms name="myVeryUniqueNameForApp1" />
</authentication>

<authentication mode="Forms">
  <forms name="myCompletelyUniqueNameForApp2" />
</authentication> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:23:37.120

我建议在测试后删除所有 localhost cookie 始终是一个好习惯。正如这里所解释的：[asp.net cookie、身份验证和会话超时](https://stackoverflow.com/questions/454616/asp-net-cookies-authentication-and-session-timeouts)，您还可以向身份验证 cookie 添加详细信息，以确保它在会话后被丢弃，即当您关闭浏览器或区分两个站点时。另一种避免 cookie “冲突”的方法是使用两种不同的浏览器：一种是 Chrome，另一种是 Comodo Dragon 或 Chromium。

# java - 处理灾难性异常

> ID：13510151
> 
> 赞同：7
> 
> 时间：2012-11-22T10:03:31.080
> 
> 标签：java, exception, checked-exceptions

我在一本 C# 介绍性书中读到，如果您不知道如何处理异常，则不应捕获异常。想到用 Java 编程时的那一点建议，我有时发现我不知道如何处理异常，但我不得不捕捉它或“渗透它”以避免编译错误。我宁愿不要`throws`在调用树的整个过程中使用带有子句的混乱方法，所以我经常求助于将异常“转换”为 a `RuntimeException`，如下所示。将`throws`子句添加到许多方法中以处理没有真正“处理”（正确处理）的异常似乎冗长且分散注意力。以下是不好的风格，如果是这样，有什么更好的方法来处理这个问题？

```
try {
  thread.join();
}
catch (InterruptedException e) {
      Console.printwriter.format("%s\n", e.printStackTrace());
  throw new RuntimeException();
} 
```

编辑：除了混乱之外，渗透异常还有另一个问题：在代码修订之后，您可能最终会遇到一些不必要的`throws`子句。我知道清除它们的唯一方法是反复试验：删除它们并查看编译器是否抱怨。显然，如果您想保持代码干净，这很烦人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T10:07:30.310

Java 中已检查异常和未检查异常之间的划分[有些争议](https://stackoverflow.com/questions/613954/the-case-against-checked-exceptions?rq=1)。

如果您控制界面，在签名中添加 throws 子句通常是最好的方法。

如果您处于无法处理异常的情况，但由于检查了异常签名而不允许让它冒泡，那么将异常包装到可以重新抛出的异常（通常是 RuntimeException）是常见的做法。

但是，在许多情况下，您希望使用另一个检查异常，例如 IOException 或 SQLException。但这并不总是一种选择。

但在您的示例中，将原始异常包含为“原因”：

```
 throw new RuntimeException(e); 
```

这也可能消除对日志记录的需要（因为这也可以推迟到可以处理异常的人，并且所有信息仍然存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:09:37.847

如果您不知道如何处理异常，则不应捕获它。因此，您的方法现在将抛出一个异常，因此如果它不是运行时异常，它应该有一个 throws 子句。他们没有错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:04:59.693

良好的编程实践告诉你应该对调用者隐藏对象的内部状态，至​​少对我来说，这也包括异常。您应该看到该异常对您来说意味着什么，并向您的类的调用者返回一个表示该含义的异常。

如果框架已经提供了具有该含义的异常，例如 IllegalArgumentException，您应该实例化一个新对象，给它一个字符串，很好地描述发生的事情并封装发生的异常，类似于 new IllegalArgumentException("The argument X 无效，因为 ...", e); 如果框架对您的问题没有很好的描述性异常，您应该创建自己的一组异常。我通常为该项目/包创建一个通用异常（它将扩展 Exception 或 RuntimeException）并从中派生异常。例如，我最近创建了一个通用存储库项目，以便在我们的服务和应用程序模块中重用以访问数据库。因为我想从我用来访问数据库的东西中抽象出调用程序，即使是异常，我最终还是创建了一些异常来封装 JPA Hibernate 异常。我这里没有代码，但它类似于：

```
// implementation package
public abstract class GenericRepository<K, E extends<K>> implements IRepository<K, E>{

    //  constructors

    public final void add(E entity){
        // some code

        try{
            //  code that can throw exceptions
        } catch (EntityExistsException e) {
            //  some code
            throw new EntityAlreadyExistsException(e);
        } catch(RuntimeException e) {
            //  some code
            throw new GenericRepositoryException("An unexpected exception occurred while manipulating the database", e);
        }
    }

    //  some other code

}

// exception package
public final class EntityAlreadyExistsException extends GenericRepositoryException{

    public static final String GENERICMESSAGE = "The entity already exists on the table";

    public EntityAlreadyExistsException(Throwable cause){
        super(GENERICMESSAGE, cause);
    }

    //  other constructors

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T10:26:29.653

我喜欢 Joshua Bloch 的 Effective Java 2nd edition - *Throw exceptions applicable to the abstraction* (Item 61) 中的建议。

也就是说，当面对一系列您希望从您的方法中“渗透”出来的异常时，请考虑是否应该用对您的方法更具语义意义的东西重新包装这些异常。

这种方法通常具有将几个较低级别的异常组合成一个较高级别的异常的令人愉悦的副作用。

# java - 将 URL 映射到最具体的上下文根

> ID：13510153
> 
> 赞同：2
> 
> 时间：2012-11-22T10:03:33.967
> 
> 标签：java, url, data-structures, tree

我有以下情况：
我想将传入查询（我使用 servlet 过滤器访问查询）映射到合适的应用程序。为此，我有一个表，我将应用程序映射到它们的上下文根，例如：

```
/application1/             |  Application1 Rootcontext 
/application1/subcontext1  |  Application1 Subcontext 1  
/application1/subcontext2  |  Application1 Subcontext 2  
/application2/             |  Application2 
```

因此，当我使用路径 /application1/subcontext1/someotherpath 进行查询时，我想获取 Application1 Subcontext 1，当我有查询 URL /application1/sompath 时，我想获取 Application 1 Rootcontext。

我的第一个猜测是，我用上下文根的映射（该 URL 的每个部分作为一个节点）构建了某种树，然后拆分查询 URL 并沿着树向下走以获得最具体的应用程序映射。

这会是最好的解决方案，还是您对我的问题有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:43:06.793

您可以将地图作为 a`Map<String, ApplicationContext>`并向后走，而不是一棵树并向前走，直到找到第一个非空拟合。这段代码应该让您大致了解如何执行此操作：

```
import java.util.HashMap;
import java.util.Map;

public class Main {
    public static final class ApplicationContext {
        private final String app;
        private final String ctx;

        public ApplicationContext(final String app, final String ctx) {
            this.app = app;
            this.ctx = ctx;
        }

        @Override
        public String toString() {
            return "ApplicationContext[" + app + "/" + ctx + "]";
        }
    }

    private static ApplicationContext ac(final String app, final String ctx) {
        return new ApplicationContext(app, ctx);
    }

    private static ApplicationContext getApplicationContext(final String url,
            final Map<String, ApplicationContext> urlMap) {
        String specificUrl = url;
        ApplicationContext result = null;
        while (specificUrl != null && result == null) {
            result = urlMap.get(specificUrl);
            specificUrl = shortenUrl(specificUrl);
        }

        return result;
    }

    public static void main(final String[] args) throws Exception {
        final Map<String, ApplicationContext> urlMap = new HashMap<String, ApplicationContext>();
        urlMap.put("/application1", ac("Application1", "Root"));
        urlMap.put("/application1/subcontext1", ac("Application1", "SubContext1"));
        urlMap.put("/application1/subcontext2", ac("Application1", "SubContext2"));
        urlMap.put("/application1/subcontext2/subcontext3", ac("Application1", "SubContext3"));
        urlMap.put("/application2", ac("Application2", null));

        System.out.println(getApplicationContext("/application1/", urlMap));
        System.out.println(getApplicationContext("/application1/abc", urlMap));
        System.out.println(getApplicationContext("/application1/subcontext2/abc", urlMap));
    }

    private static String shortenUrl(final String url) {
        final int index = url.lastIndexOf('/');
        if (index > 0) {
            return url.substring(0, index);
        }
        else {
            return null;
        }
    }
} 
```

和一个[小提琴](http://ideone.com/AbshZy)。

# windows - Windows 8 中地铁壁纸的注册表项在哪里？

> ID：13510158
> 
> 赞同：0
> 
> 时间：2012-11-22T10:03:59.180
> 
> 标签：windows, windows-8, registry, wallpaper, regedit

Windows 8 中的键在哪里，因此您可以更改 Metro 壁纸（开始菜单上的那个），这样我就可以拥有除默认壁纸之外的其他东西。我知道有一些程序可以做到这一点，但我需要密钥，以便我可以在自己的程序中使用它。

我知道正常的桌面壁纸位置在以下键中：

```
HKEY_CURRENT_USER\Control Panel\Dekstop\Wallpaper 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:13:50.317

这是完全不支持的。如果您尝试将此行为引入应用程序（我假设您是在询问以便可以对其进行编码，否则您的问题将针对超级用户），那么您将无法通过认证，并且您的应用程序将无法进入商店。

# c# - 端口转发相机ip c#

> ID：13510170
> 
> 赞同：0
> 
> 时间：2012-11-22T10:04:41.113
> 
> 标签：c#, ssh, camera, port, forwarding

我不擅长网络，所以对于某些人来说，我的问题看起来很傻。我正在尝试从本地网络外部连接到我的网络摄像机。我知道我需要做端口转发。我读到 ssh 可能是个好主意。想象一下，我的外部 ip 是 10.20.30.40，而我的相机 ip 本地 ip 是 1.2.3.4。当端口转发工作时，我认为我将使用此地址“http://10.20.30.40/index1.htm”连接到相机。所以我需要的只是端口转发。客户不能自己做到这一点。我需要编写一个应用程序来自动执行此操作。我如何使用 c# 来做到这一点，我是否朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:07:59.580

您可以使用 UPnP - 通用即插即用在大多数家庭路由器的默认配置中完成此操作。

这是 NAT 路由器后面的应用程序以编程方式请求将端口转发给它们的标准化机制。

有关从 .NET 访问 UPnP 功能的详细信息，请参阅[此问题](https://stackoverflow.com/questions/333079/is-there-a-upnp-library-for-net-c-or-vb-net)。您需要说服路由器将 TCP 端口 80（HTTP 的标准端口）转发到摄像机的 LAN IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:03:23.033

只有通过手动路由器配置才能完成正确配置的端口转发。

出于逻辑和明显的安全原因，没有办法绕过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:36:25.260

好的，问题解决了，当我在我的路由器上打开网页时没有加载。事实证明，相机的默认端口设置为 80。我已将其更改为 1001，然后在路由器上设置 upnp 启用，相机自动将端口 1001 转发给它自己。我所要做的就是在相机上设置端口。

# python - 使用非 ASCII 字符的 bottle.py 动态路由 URL 编码

> ID：13510172
> 
> 赞同：2
> 
> 时间：2012-11-22T10:04:43.670
> 
> 标签：python, url, encoding, bottle

我想将[瓶子](http://bottlepy.org/docs/dev/)（bottlepy，bottle.py）用于字典应用程序，允许在 URL（GET）中指定输入，例如

```
http://dictionary_domain/lookup/Thanksgiving 
```

使用

```
@bottle.route('/lookup/<word>')
def request( word="" ):
    print(word) 
```

问题是，非 ASCII 字符是 URL[编码](http://en.wikipedia.org/wiki/Percent-encoding)的（通常，浏览器会处理这个），并且 bottle.py 的解析或我的一般字符编码设置似乎存在问题。例子：

..lookup/Olivenöl：

```
"OlivenÃ¶l" 
```

..lookup/Öl：

```
Traceback (most recent call last):
    File "bottle.py", line 763, in _handle
        return route.call(**args)
    File "bottle.py", line 1572, in wrapper
        rv = callback(*a, **ka)
    File "dictionary.py", line 63, in request
        print( "bottle: \"{}\" requested".format( word ) )
    File "C:\Python32\lib\encodings\cp850.py", line 19, in encode
        return codecs.charmap_encode(input,self.errors,encoding_map)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\x96' in position 10: character maps to <undefined> 
```

有问题的字符编码为

```
capital  Ö -> %C3%96
minscule ö -> %C3%B6 
```

输出解码为 Ã¶ -> c3b6

但我不知道如何解决编码问题。我猜bottle.py 需要处理这个问题。

该脚本正在使用`# -*- coding: utf-8 -*-`（该文件也是带有 BOM 的 UTF-8）并且常规字符串打印到控制台就好了。

软件版本：bottle.py：'0.11.4' 和 '0.12-dev' Python 3.2.3（默认，2012 年 4 月 11 日，07:15:24）[MSC v.1500 32 位（英特尔）] 在 win32 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:17:47.860

用 US-ASCII 编码您的单词，并在接收到路由处理程序时解码为所需的字符集

# active-directory - 授予 Active Directory 组对 SQL Server Express 数据库的访问权限

> ID：13510175
> 
> 赞同：0
> 
> 时间：2012-11-22T10:04:50.117
> 
> 标签：active-directory, sql-server-express

正如您可以从标题中猜到的那样，我正在尝试分配整个 Active Directory 组对 SQL Server Express 上的数据库的访问权限（通过带有 SQLCMD.exe 应用程序的命令行）。

我之前发布了一个类似的问题，但我和回复我的人都能够找到解决方案。（链接：[使用 sp_grantlogin 和 sp_addsrvrolemember 使用 SQLCMD.EXE 向 SQL Server 用户添加 Active Directory 组](https://stackoverflow.com/questions/13362034/using-sp-grantlogin-and-sp-addsrvrolemember-to-add-an-active-directory-group-to)）。

到目前为止，我只能通过指定域名后跟他们的用户名（即“DomainName\UserName”）来授予对 Active Directory 组的各个成员的访问权限。

如果有人可以帮助我，我将非常感激 - 我是 SQL Server Express 的新手。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:14:52.900

基本上，这是一个两步过程。

**第 1 步：**为 AD 组创建服务器**登录：**

```
CREATE LOGIN [YOURDOMAIN\SomeGroupName] FROM WINDOWS; 
```

**第 2 步：**获得服务器登录名后，转到相关数据库并根据该登录名创建用户：

```
USE YourDatabaseNameHere
CREATE LOGIN [YOURDOMAIN\SomeGroupName] FROM WINDOWS; 
```

# javascript - 在客户端或服务器端更改对象

> ID：13510176
> 
> 赞同：0
> 
> 时间：2012-11-22T10:04:50.297
> 
> 标签：javascript, asp.net, serialization, client-server

我不确定最佳做法是什么。
我有一些大而复杂的物体（不是扁平的）。
在那个对象中，我有许多相关的对象——例如 Invoice 是主类，它的属性之一是 invoiceSupervisor——它自己的一个大类，称为 User。
用户也可以不是平面的并且具有部门属性 - 也是一个称为部门的对象。

例如我想创建新的发票。

第一种方式：
我可以向客户展示几个要填写的字段。其中一些是我需要填写可用值的组合。例如可用的 invoiceSupervisors。然后我可以将所有选择的值发送到服务器，在服务器上我可以创建新发票并将所有选择的值分配给该新发票。然后我将需要分配新的主管我将通过用户从组合框中在服务器上拾取的 id 提取所选用户。我可能会对用户进行一些验证，例如该用户是否适用于发票主管。然后我将 User 对象分配给 invoiceSupervisor。然后在填写所有属性后，我将保存新发票。

第二种方式：
一开始我可以打电话给服务器来获取新的发票。然后在客户端我可以填充所有选择的值，例如我可以调用服务器来获取新的用户对象，然后从组合框中填充它的 id 并将用户分配为 invoiceSupervisor。在客户端填写发票对象后，我可以将其发送到服务器，然后服务器将保存新发票。在保存服务器之前也可以运行一些验证。

那么最好的方法是什么 - 在客户端上创建对象并将其发送到服务器或从客户端收集所有值并使用这些值在服务器上创建一个新对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:58:43.367

考虑业务处理的复杂性。

您需要的是客户创建一个新发票。为此，客户端提供几个不同的输入参数，调用进程并获取响应。这是您的第一个场景。简单明了。

另一方面，第二种方法涉及到一个通信协议——给我这个，我给你一些作为回应，然后给我一些别的。这听起来不合理的复杂。您必须仔细检查在某些时候通信中断时会发生什么。是否应该涉及分布式事务？如果是，你真的需要这么复杂吗？

我会选择第一种情况。您不会不必要地使客户端和服务器之间的合同复杂化。

# vb6 - VB6 应用程序在创建后一直锁定 Access (.mdb) 数据库，导致错误 3028

> ID：13510187
> 
> 赞同：2
> 
> 时间：2012-11-22T10:05:26.630
> 
> 标签：vb6, dao, ms-access-97

我们的应用程序构建了一个 Access 数据库 (.mdb)，然后使用`Shell`需要对该数据库进行读/写访问的命令启动另一个应用程序。问题是在某些系统上，我们的应用程序似乎不规律地在数据库上保留了排他锁，从而阻止了其他应用程序访问它。只有在关闭第一个应用程序后，另一个应用程序才能继续。

引发的特定错误是错误 3028，这似乎是我们确实使用的 DAO 3.51 (Access '97) 所特有的。我无法理解为什么有些系统会受到影响（然后又不一致）而其他系统则不会。我认为这可能是一个时间问题，并且是`Sleep`在构建数据库和启动其他应用程序之间的一段时间内构建的，但这并没有帮助。

到底是怎么回事？

编辑：我现在通过在单独的文件中创建数据库然后复制它来创建解决方法。现在第二个程序应该始终能够访问它，并且任何剩余的锁定问题都会出现在我维护的第一个程序中。当我们的用户能够对此进行测试时，我将在稍后跟进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:38:00.577

您是否在将控制权传递给另一个 EXE 之前关闭了与数据库的连接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:37:24.940

我以前遇到过类似的问题，但并不完全相同，但根据您的描述，这是我会尝试的方法：

在使用 shell 命令启动辅助应用程序之前。

除了您已经使用的睡眠时间之外，您还需要关闭生成 .mdb 文件的原始程序。

我通过对 Windows 批处理文件进行脱壳，然后立即退出原始程序来实现这一点。

批处理文件构成如下：

```
ping -n 5 localhost >NUL
start MSAccess.exe "C:\DB.mdb"
exit 
```

这允许在启动之前释放 mdb 文件 5 秒，您可以用您的辅助程序替换我的 Ms Access 调用。

# python - 无法在 python pysys 中使用 helper.py 启动进程

> ID：13510193
> 
> 赞同：0
> 
> 时间：2012-11-22T10:05:45.337
> 
> 标签：python, windows

```
import sys, os, os.path, re, string, time, thread, logging, copy, math, stat

from pysys import log
from pysys.constants import *

from pysys.process.helper import ProcessWrapper

def __stringToUnicode( s):
        """ Converts a unicode string or a utf-8 bit string into a unicode string. 

        """
        if isinstance(s, unicode):
            return s
        else:
            return unicode(s, "utf8")
environ ={}
for key in environ: environ[__stringToUnicode(key)] = __stringToUnicode(environ[key])

process = ProcessWrapper("C:\\Program Files\\Mozilla Firefox\\firefox", arguments=None, environs=environ, workingDir=None, state=FOREGROUND, timeout=None, stdout=None, stderr=None)
process.start() 
```

我收到这个错误..

```
 process = ProcessWrapper("notepad", arguments=None, environs=environ, workingDir=None, state=FOREGROUND, timeout=None, stdout=None, stderr=None)
  File "C:\Python27\lib\site-packages\pysys\process\plat-win32\helper.py", line 105, in __init__
    for a in self.arguments: log.debug("  argument     : %s", a)
TypeError: 'NoneType' object is not iterable 
```

我是pysys的新手。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-03T10:54:25.497

当我尝试时，以下内容对我有用 - 不确定问题是否出在 unicode 翻译中。

```
import logging
from pysys.constants import *
from pysys import stdoutHandler
from pysys.process.helper import ProcessWrapper

stdoutHandler.setLevel(logging.DEBUG)

command="\\Program Files\\Mozilla Firefox\\firefox.exe"
process = ProcessWrapper(command, arguments=[], environs=os.environ, workingDir=os.getcwd(), state=BACKGROUND, timeout=None)
process.start() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:08:31.890

显然，`ProcessWrapper()`期望`arguments`是一个可迭代的（列表或元组可以）。

而不是`None`，使用`()`（一个空元组）。

但是请注意，`workingDir` *应该*将其设置为字符串。用于`os.getcwd()`合理的默认值。`timeout`还必须设置为等待的整数秒数。我想 60 秒（一整分钟）和任何东西一样好。

您可以*省略*`stdout`and`stderr`参数并将其保留为默认值：

```
process = ProcessWrapper("C:\\Program Files\\Mozilla Firefox\\firefox", arguments=() environs=environ, workingDir=os.getcwd(), state=FOREGROUND, timeout=60) 
```

# java - 将多个动作映射到同一个类struts 2.3是最佳实践吗

> ID：13510196
> 
> 赞同：2
> 
> 时间：2012-11-22T10:05:52.373
> 
> 标签：java, inheritance, struts2, struts-action

我正在使用选项（添加、删除、修改、打印）在 struts 中开发联系人管理器。

我正在考虑将多个动作（将多个动作映射到同一个类 struts 2.3）映射到同一个类（`ContactManager`）。

我想知道它是否正确或者是否需要为每个动作编写单独的动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:33:15.973

**恕我直言，**一种*好方法是为您必须执行的每个动作使用一个动作，每个动作都扩展其最后一个分叉的父动作，例如：*

 *```
BaseAction
|
|----------BaseReportAction
|          |----- ExcelReportAction
|          |----- PDFReportAction
|          |----- CSVReportAction
|
|
|----------BaseCRUDAction
|          |----- CreateAction
|          |----- ReadAction
|          |----- UpdateAction
|          |----- DeleteAction
|
|
|----------BaseAJAXAction
|          |----- ReadSessionCountdownAction
|          |----- CheckNewMailsAction
| 
```

ETC...

其他人扩展的每个 Action 都会`protected`与孩子共享属性/方法。

看看这个：[在 Struts 2 中绑定后更改参数](https://stackoverflow.com/questions/13491495/struts2-changing-parameters-after-bind/13492170#13492170)

我的 2 美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T11:25:44.863

我认为您应该使用单个操作。这完全是一个好习惯，毕竟他们提供了在同一个 Action 类中调用不同方法的便利！您可以通过包含一个通配符来实现类似的目的，该通配符可以将您的操作名称映射到 Action 类中的适当方法。像这样-

```
 <action name="abc*" method="{1}" /> 
```*

# linux - 调查 ip 流量，使用 tcpdump 或任何其他方法来自动化该过程

> ID：13510199
> 
> 赞同：0
> 
> 时间：2012-11-22T10:06:04.103
> 
> 标签：linux, networking, routing, ip

我正在尝试验证添加到路由器内核的新功能。因此，假设我添加了一个过滤器、iptable 等。我有实时流量。我尝试使用 tcp 转储并查看数据包标头并查看标头中的新值是否存在，但我得到随机流量通过。

我想知道是否可以让 tcpdump 发送流量并将其转储，以便我发送特定的数据包？或我可以用来执行此过程的任何其他 linux 命令。我有一个没有流量的目标端口，但我不知道如何发送到它并捕获这些数据包。我在 sendip 和 tcpdump 上做了一些阅读，但我无法自拔。

发送数据包，tcpdump 或类似的东西，验证数据包头是否有我想要的，然后继续我的生活。

我希望我足够清楚。

# c# - 检测到 JSON.Net 自引用循环

> ID：13510204
> 
> 赞同：149
> 
> 时间：2012-11-22T10:06:12.387
> 
> 标签：c#, serialization, json.net

我在 4 个表中为我的网站提供了一个 mssql 数据库。

当我使用这个时：

```
public static string GetAllEventsForJSON()
{
    using (CyberDBDataContext db = new CyberDBDataContext())
    {
        return JsonConvert.SerializeObject((from a in db.Events where a.Active select a).ToList(), new JavaScriptDateTimeConverter());
    }
} 
```

该代码导致以下错误：

> Newtonsoft.Json.JsonSerializationException：为“DAL.Cyber​​User”类型的属性“Cyber​​User”检测到自引用循环。路径“[0].EventRegistrations[0].Cyber​​User.UserLogs[0]”。

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2012-11-25T10:01:30.490

我刚刚遇到了与父/子集合相同的问题，发现那个帖子解决了我的问题。我只想显示父集合项的列表，不需要任何子数据，因此我使用了以下内容并且效果很好：

```
JsonConvert.SerializeObject(ResultGroups, Formatting.None,
                        new JsonSerializerSettings()
                        { 
                            ReferenceLoopHandling = ReferenceLoopHandling.Ignore
                        }); 
```

[JSON.NET 错误检测到类型的自引用循环](https://stackoverflow.com/questions/7397207/json-net-error-self-referencing-loop-detected-for-type)

它还引用了 Json.NET codeplex 页面：

[http://json.codeplex.com/discussions/272371](http://json.codeplex.com/discussions/272371)

文档：**[ReferenceLoopHandling 设置](http://www.newtonsoft.com/json/help/html/ReferenceLoopHandlingIgnore.htm)**

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-09-16T16:37:18.193

解决方法是忽略循环引用而不是序列化它们。此行为在 中指定`JsonSerializerSettings`。

**单`JsonConvert`**重载：

```
JsonConvert.SerializeObject((from a in db.Events where a.Active select a).ToList(), Formatting.Indented,
    new JsonSerializerSettings() {
        ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore
    }
); 
```

如果您想将此设置为默认行为，请 在 Global.asax.cs中添加带有代码的**全局设置：**`Application_Start()`

```
JsonConvert.DefaultSettings = () => new JsonSerializerSettings {
     Formatting = Newtonsoft.Json.Formatting.Indented,
     ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore
}; 
```

参考：[https ://github.com/JamesNK/Newtonsoft.Json/issues/78](https://github.com/JamesNK/Newtonsoft.Json/issues/78)

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2017-07-18T18:30:49.903

如果使用 ASP.NET Core MVC，请将其添加到您的 startup.cs 文件的 ConfigureServices 方法中：

```
services.AddMvc()
    .AddJsonOptions(
        options => options.SerializerSettings.ReferenceLoopHandling =            
        Newtonsoft.Json.ReferenceLoopHandling.Ignore
    ); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-04-10T21:27:10.600

这可能会对您有所帮助。

```
public MyContext() : base("name=MyContext") 
{ 
    Database.SetInitializer(new MyContextDataInitializer()); 
    this.Configuration.LazyLoadingEnabled = false; 
    this.Configuration.ProxyCreationEnabled = false; 
} 
```

[http://code.msdn.microsoft.com/Loop-Reference-handling-in-caaffaf7](http://code.msdn.microsoft.com/Loop-Reference-handling-in-caaffaf7)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-07-25T14:02:13.140

您必须设置保留对象引用：

```
var jsonSerializerSettings = new JsonSerializerSettings
{
    PreserveReferencesHandling = PreserveReferencesHandling.Objects
}; 
```

然后调用您的`var q = (from a in db.Events where a.Active select a).ToList();`查询

> `string jsonStr = Newtonsoft.Json.JsonConvert.SerializeObject(q, jsonSerializerSettings);`

请参阅： [https ://www.newtonsoft.com/json/help/html/PreserveObjectReferences.htm](https://www.newtonsoft.com/json/help/html/PreserveObjectReferences.htm)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-01-28T16:24:38.577

我正在使用 Dot.Net Core 3.1 并搜索了

> > “Newtonsoft.Json.JsonSerializationException：检测到属性的自引用循环”

我将此添加到此问题中，因为它将是一个简单的参考。您应该在 Startup.cs 文件中使用以下内容：

```
 services.AddControllers()
                .AddNewtonsoftJson(options =>
                {
                    // Use the default property (Pascal) casing
                    options.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver();
                    options.SerializerSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
                }); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-05-17T12:33:27.533

将“[JsonIgnore]”添加到您的模型类

```
{
  public Customer()
  {
    Orders = new Collection<Order>();
  }

public int Id { get; set; }
public string Name { get; set; }
public string Surname { get; set; }

[JsonIgnore]
public ICollection<Order> Orders { get; set; }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-07-01T17:18:20.127

对于 asp.net core 3.1.3 这对我有用

```
services.AddControllers().AddNewtonsoftJson(opt=>{
            opt.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore;
        }); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-12T07:16:37.907

`JsonConvert.SerializeObject(ObjectName, new JsonSerializerSettings(){ PreserveReferencesHandling = PreserveReferencesHandling.Objects, Formatting = Formatting.Indented });`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-10T19:32:59.773

有时你有循环，因为你的类型类引用了其他类，并且类引用了你的类型类，因此你必须在 json 字符串中选择你需要的参数，就像这段代码一样。

```
List<ROficina> oficinas = new List<ROficina>();
oficinas = /*list content*/;
var x = JsonConvert.SerializeObject(oficinas.Select(o => new
            {
                o.IdOficina,
                o.Nombre
            })); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-09-03T18:52:16.657

JsonSerializer 实例可以配置为忽略引用循环。如下所示，此函数允许使用 json 序列化对象的内容保存文件：

```
 public static void SaveJson<T>(this T obj, string FileName)
    {

       JsonSerializer serializer = new JsonSerializer();
        serializer.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
        using (StreamWriter sw = new StreamWriter(FileName))
        {
            using (JsonWriter writer = new JsonTextWriter(sw))
            {
                writer.Formatting = Formatting.Indented;
                serializer.Serialize(writer, obj);
            }
        }
    } 
```

# android - 罗马尼亚语区域设置

> ID：13510209
> 
> 赞同：2
> 
> 时间：2012-11-22T10:06:21.793
> 
> 标签：android

谷歌搜索了一段时间后，我发现 Android 2.3 版本确实支持它.. 但我没有找到它支持的最低版本.. 如果 Android 2.2 版本不支持罗马尼亚语，那么还有什么替代方案。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:21:06.917

这是已解决的类似问题：

[Android 上支持的语言/区域列表是什么？](https://stackoverflow.com/questions/7973023/what-is-the-list-of-supported-languages-locales-on-android)

根据这个答案，自 v2.3 起支持罗马尼亚语区域设置

你可以随时使用

`public Locale (String language, String country)`

构建一个语言环境。

正如[@talhakosen 提到](https://stackoverflow.com/a/13510462/763459)的，您可能应该查看 API 文档。

# javascript - JavaScript 到 jQuery（向表中添加行的函数）

> ID：13510213
> 
> 赞同：-2
> 
> 时间：2012-11-22T10:06:32.070
> 
> 标签：javascript, jquery

谁能帮我将 JavaScript 转换为 jQuery？JavaScript 代码是：

```
function addRow()
{       
     var table = document.getElementById("table2");     
     var numOfRows = table.rows.length;     
     var numOfCols = table.rows[numOfRows-1].cells.length;                    
     var newRow = table.insertRow(numOfRows);

     for (var j = 0; j < numOfCols; j++) {                    
          newCell = newRow.insertCell(j);                    
          newCell.innerHTML = "add";
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:12:48.907

尝试这个

**[演示](http://jsfiddle.net/pintu31/hMJPH/)**

```
 $('#addRow').click(function(){
   var row = $('#table2 tr:eq(0)').clone();
   $(row).find('td').html('add');
   $('#table2').append(row);
});

<table id='table2'>
  <tr><td>test</td></tr>
</table>
​&lt;input type='button' id='addRow' value='click' />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:10:22.233

你可以试试这段代码，在最后一行之后添加一个新行，我不知道你需要什么参数

```
function addRow()
{       
   $('#table2 tr:last').after('<tr><td>some </td></tr><tr><td>text</td></tr>');
} 
```

# android - menu.xml 中找不到资源错误

> ID：13510217
> 
> 赞同：-2
> 
> 时间：2012-11-22T10:06:39.633
> 
> 标签：android, menu

这是我的菜单类型 android xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <group android:id="@+id/rose" android:menuCategory="container" android:visible="true">
        <item android:icon="@drawable/login.png"  android:id="@layout/activity_login_page"></item>
        <item android:id="@layout/activity_registration__page" android:icon="@drawable/registration.png"></item>
        <item android:id="@layout/activity_online_shopping" android:icon="@drawable/shopping.png"></item>
        <item android:id="@layout/activity_your_total_bill" android:icon="@drawable/logout.png"></item>
    </group>
</menu> 
```

这是我发现的错误，但我的可绘制文件夹中都有资源

```
 W/ResourceType( 3000): Bad XML block: header size 116 or total size 0 is larger than data size 0
[2012-11-22 15:32:20 - OrderPlacemnet] E:\workspace\OrderPlacemnet\res\menu\rosemenu.xml:4: error: Error: No resource found that matches the given name (at 'icon' with value '@drawable/login.png').
[2012-11-22 15:32:20 - OrderPlacemnet] E:\workspace\OrderPlacemnet\res\menu\rosemenu.xml:5: error: Error: No resource found that matches the given name (at 'icon' with value '@drawable/registration.png').
[2012-11-22 15:32:20 - OrderPlacemnet] E:\workspace\OrderPlacemnet\res\menu\rosemenu.xml:6: error: Error: No resource found that matches the given name (at 'icon' with value '@drawable/shopping.png').
[2012-11-22 15:32:20 - OrderPlacemnet] E:\workspace\OrderPlacemnet\res\menu\rosemenu.xml:7: error: Error: No resource found that matches the given name (at 'icon' with value '@drawable/logout.png'). 
```

请帮我找出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:10:08.727

请删除菜单中的 .png

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <group android:id="@+id/rose" android:menuCategory="container" android:visible="true">
        <item android:icon="@drawable/login"  android:id="@layout/activity_login_page"></item>
        <item android:id="@layout/activity_registration__page" android:icon="@drawable/registration"></item>
         <item android:id="@layout/activity_online_shopping" android:icon="@drawable/shopping"></item>
          <item android:id="@layout/activity_your_total_bill" android:icon="@drawable/logout"></item>
    </group>

</menu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:13:54.387

您的问题是由包含在菜单项`.png`的标签中引起的。`src`你不应该包括它。您的菜单代码应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <group android:id="@+id/rose" android:menuCategory="container" android:visible="true">
        <item android:icon="@drawable/login"  android:id="@layout/activity_login_page"></item>
        <item android:id="@layout/activity_registration_page" android:icon="@drawable/registration"></item>
        <item android:id="@layout/activity_online_shopping" android:icon="@drawable/shopping"></item>
        <item android:id="@layout/activity_your_total_bill" android:icon="@drawable/logout"></item>
    </group>
</menu> 
```

# c# - 反转常数

> ID：13510219
> 
> 赞同：1
> 
> 时间：2012-11-22T10:06:44.007
> 
> 标签：c#, enums, constants

有没有办法在 C# 中实现反向枚举或常量文件？我有一个列表中的 ID，并希望将一个常量字符串映射到这个 ID。我在想这样的事情：

常规`enum`：

```
public enum StaticUser
{
   DB = 1,
   Order = 2
} 
```

我需要什么：

```
public enum StaticUser
{
   1 = DB,
   2 = Order
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:15:59.700

所以你有一个枚举，

```
public enum StaticUser
{
    DB = 1,
    Order = 2
} 
```

如果你想得到成员的名字，你可以这样做`ToString`

```
string staticUserString = ((StaticUser)1).ToString(); 
```

这会将文字转换`1`为`StaticUser`然后用于`ToString`返回枚举类型的字符串表示形式。

这个例子之后`staticUserString == 'DB'`是`true`.

* * *

如果你想要一个特定值的其他常量字符串，那么你需要你自己的转换函数，像这样，

```
public static string ToSpecialString(this StaticUser source)
{
    const string dBString = "Database"

    switch (source)
    {
        case StaticUser.DB:
            return dBString;

        default:
            return source.ToString();
    }
} 
```

那么你可以做

```
string specialStaticUserString = ((StaticUser)1).ToSpecialString(); 
```

这个例子之后`staticUserString == 'Database'`是`true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:12:17.167

您可以简单地将 id 转换为枚举：

```
StaticUser user = (StaticUser)myId; 
```

# android - 进入 IOEx 捕获块时蓝牙套接字变为空（android 4）

> ID：13510225
> 
> 赞同：1
> 
> 时间：2012-11-22T10:06:50.650
> 
> 标签：android, sockets, bluetooth, nullpointerexception, try-catch

我的软件在一段时间内运行良好，但在 Android 4 中出现了一些新问题。

（设备 Samsung Note 与 Android 4.0.4）

以下在其 on 线程中/上的某个循环内运行

```
try {
    socket.connect();     // <-- this blocks for up to 6 sec

} catch (IOException e) { // <-- this was entered
    try {
        socket.close();   // <-- here the NPE happened
    } catch (IOException ioe) {
        //stuff
    }

} catch (NullPointerException npe) {
    //stuff
} 
```

我体验到套接字在连接阻塞时可能变为空，但最近我什至在 IOEx 捕获块内发现它为空。所以连接抛出了一个 IOEx 而不是一个 NPE，所以套接字仍然在那里。在 catch 块内，socket.close() 然后抛出一个 NPE 使服务崩溃，因为我没有在那里使用 NPE catch。

恕我直言，将 NPE catch 块放在另一个需要对象首先处于活动状态的 catch 块中是没有意义的。

这一切在 android 4 中越来越多地发生，而且大多数时候服务（和应用程序）在后台运行了一段时间。它不是一个市场应用程序，所以如果它在按下主页按钮后仍然处于活动状态就可以了。但是一旦它在后台太久，（未连接的！）套接字似乎正在被gc'ed。

问题是：为什么会这样？除了内部 IOEx 之外，我真的应该放一个 NPE 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:00:58.310

我也注意到蓝牙上的 Android ICS 存在问题。正如他们声称的那样，Android ICS 为蓝牙引入了一些安全错误修复（甚至更多错误）。

[所以，我会在 Android bugtracker](http://code.google.com/p/android/issues/list)上报告它。它可能与检查其他设备有关，看看它是三星的蓝牙堆栈还是 Android 代码。

[检查我在 Android Bugtracker 上报告的问题](http://code.google.com/p/android/issues/detail?id=34161&can=4&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)也可能与此相关，尽管我在配对时遇到了问题。

# c# - 如何从 C# foreach 循环将当前元素 ID 传递到 Document Ready jquery？

> ID：13510226
> 
> 赞同：0
> 
> 时间：2012-11-22T10:06:50.257
> 
> 标签：c#, jquery, function, foreach

所以我有这个foreach循环......

```
@foreach (Attachment attachment in Model)
{
<tr class="row@(index%2 == 0 ? "" : " even")">
        <td>
            @Html.ActionLink(attachment.AttachedFilename, "ViewAttachment", "Auction", new {docID = attachment.AttachmentId}, new {target = "_blank"})
        </td>
        <td>
                <a id="@attachment.AttachmentId" class="publishAttachment" name="public" style="float: right" tabindex="7">
                <img src="@Url.Content("~/Content/Images/cross_circle.png")" />
           </a>
       </td>
 </tr>
 index++;
 } 
```

我有这个jquery ...

```
$(document).ready(function () {
    $('.publishAttachment').click().confirmationDialog({ message: "Are you sure you want to cancel ?", okButton: "I am sure", cancelButton: "No, I don't want to do this",
        onSuccess: function () {
            var obj = $(this).attr('id');
            alert(obj);
            return false;
        }
    });
}); 
```

所以基本上当我点击链接时，我会得到一个弹出对话框，上面有一条消息和是或否按钮。但是，如果我无法将要传递到文档中的 ID 准备好，我将无法完成任务。如果它是链接中的 onclick，我可以很容易地做到这一点，但这不适用于我正在使用的小部件，所以我如何获取点击元素的 ID。
谢谢
本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:09:57.763

好的，我已经做到了。我不确定这是否是最好的方法，但它确实有效，这就是我现在所关心的。如果需要，我可以在以后整理出来。这就是我所做的。首先，我为链接提供了一个名为“myfunc”的 onclick 事件，该事件具有附件 ID 值。然后我创建了一个返回值的函数，然后我在准备好的文档中调用该值，就像这样......

```
function myfunc(value){
    theGlobalName = value;
}
$(document).ready(function () {
    $('.publishAttachment').confirmationDialog({ message: "Are you sure you want to cancel ?", okButton: "I am sure", cancelButton: "No, I don't want to do this",
        onSuccess: function () {
            var obj = theGlobalName;
            alert (obj);
        }
    });

}); 
```

就像我说的，这可能不是最好的方法，但它现在有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:22:29.327

您可以尝试以下方法：

```
$(document).ready(function () {
    $('.publishAttachment').click(function(){
        var answer = confirm("Are you sure you want to cancel ?")
        if (answer){
            var obj = $(this).attr('id');
            alert(obj);
            return false;
        }

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:23:14.887

基本上你这样做是为了获得点击的元素 ID

```
onClick="reply_click(this.id);" 
```

在这里你可以增强为

```
 if (yourConfirmMessageHere){
        var obj = $(this).attr('id');
        alert(obj);
        return false;
    } 
```

# django - 在命令中提供服务器的密码？

> ID：13510229
> 
> 赞同：2
> 
> 时间：2012-11-22T10:06:57.750
> 
> 标签：django, rsync

是否可以在 rsync 命令中提供服务器密码？

```
rsync -zvr source destination password 
```

我正在使用 rsync 协议在 Django 中开发一个 Web 应用程序。我使用表单从用户那里获取密码输入。我想在 rsync 命令本身中使用这样的密码吗？我该怎么做？我确信有一种方法可以使用标准输入、管道或类似的东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:10:02.377

来自`man rsync`：

> 远程守护程序上的某些模块可能需要身份验证。如果是这样，您将在连接时收到密码提示。您可以通过将环境变量设置为`RSYNC_PASSWORD`您要使用的密码或使用`--password-file`选项来避免密码提示。这在编写 rsync 脚本时可能很有用。

关于`--password-file`：

> 此选项允许您在文件中提供密码以访问远程 rsync 守护程序。请注意，此选项仅在使用内置传输访问 rsync 守护程序时有用，而不是在使用远程 shell 作为传输时。该文件不能是世界可读的。它应该只包含密码作为单行。

因此，要么`RSYNC_PASSWORD`在调用之前设置环境变量`rsync`，要么使用临时文件并将其传递给命令；第一个选项可能更容易，使用`env`：

```
env RSYNC_PASSWORD=PASSWORD rsync -zvr source destination 
```

* * *

**更新：**请注意下面的这个小块`--password-file`：

> 请注意，此选项仅在使用内置传输访问 rsync 守护程序时有用，**而不是**在使用远程 shell 作为传输时。

如果您不使用`rsync`内置传输，但可能使用 SSH，则不能使用此方法“自动”进行身份验证。如果您使用 SSH，您应该使用公钥/私钥，或者可能是`ASK_SSHPASS`技巧（请参阅[this](http://andre.frimberger.de/index.php/linux/reading-ssh-password-from-stdin-the-openssh-5-6p1-compatible-way/)）。

# mysql - 在Mysql数据库的范围内查找未分配的范围

> ID：13510230
> 
> 赞同：1
> 
> 时间：2012-11-22T10:07:10.710
> 
> 标签：mysql, sql, range

![在此处输入图像描述](../Images/87f7234ed4a6b833c6aa6bfe36ae3175.png)

我想从指定范围中获取未分配的范围，例如以 id 43 的记录是父记录，我想获得如下图所示的未分配记录，id 为 44 和 45 的记录是 id 为 43 的记录的子记录

![在此处输入图像描述](../Images/f169d7d5bc9e7f15c328941a456ee489.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:50:04.953

我假设分配的范围不重叠。

# **[SQL 小提琴](http://sqlfiddle.com/#!3/5814a/32)**

基本上它由四个查询组成。

*   第一个查询查找父项指定`Batch_number_from`的起始编号和按`Batch_number_from`排序的第一个子记录的起始编号之间的任何未分配编号范围`Batch_number_from`。
*   第二个查询查找位于父项的子记录之间的任何未分配数字范围。
*   第三个查询查找父项指定`Batch_number_to`的 End 编号和按`Batch_number_to`排序的最后一个子记录的 End 编号之间的任何未分配编号范围`Batch_number_from`。
*   最后，Fourth 查找没有相应子记录并因此没有分配编号的任何父记录。

所有四个查询都使用`UNION`

在前三个查询中有两个重复的子查询，因此可以移动到临时表中。这些标记为`ChildRnk`和`NextStart`。

`ChildRnk`对按 排序的所有子记录进行排名`Batch_number_from`。

`NextStart`返回任何给定子项的下一批分配编号的起始编号`Batch_number_from`（如果针对该特定父记录列出了另一个子项）。

希望这可以帮助

对于 MSSQL：

```
SELECT 
    ChildRnk.Parent,
    Batch_Number_From AS START,
    (START-1) AS [End]
FROM 
    (SELECT
        a.Id AS Id,
        a.parent_fk AS Parent,
        a.Batch_Number_From AS START,
        a.Batch_Number_To AS 'End',
        RANK() OVER 
            (PARTITION BY a.parent_fk ORDER BY a.Batch_Number_From ASC) AS Rnk1
    FROM 
        VOUCHER_BATCH_ALLOCATION AS a
    WHERE 
        a.channel_from_fk = 2) ChildRnk
LEFT JOIN 
    (SELECT
        c.Parent,
        c.START AS NextStart,
        (Rnk1-1) AS Rnk2 
    FROM 
        (SELECT
            b.Id AS Id,
            b.parent_fk AS Parent,
            b.Batch_Number_From AS START,
            b.Batch_Number_To AS 'End',
            RANK() 
                OVER (PARTITION BY b.parent_fk ORDER BY b.Batch_Number_From ASC) AS Rnk1
        FROM 
            VOUCHER_BATCH_ALLOCATION AS b
        WHERE 
            b.channel_from_fk = 2) c
    WHERE 
        Rnk1 != 1) NextStart
ON 
    ChildRnk.Parent = NextStart.Parent
    AND Rnk1 = Rnk2
LEFT JOIN 
    VOUCHER_BATCH_ALLOCATION
ON 
    VOUCHER_BATCH_ALLOCATION.Id = ChildRnk.Parent
    AND Rnk1 = 1
WHERE 
    Batch_Number_From IS NOT NULL
    AND Batch_Number_From < START

UNION

SELECT 
    ChildRnk.Parent,
    ([End]+1) AS START,
    (NextStart-1) AS [End]
FROM 
    (SELECT
        a.Id AS Id,
        a.parent_fk AS Parent,
        a.Batch_Number_From AS START,
        a.Batch_Number_To AS 'End',
        RANK() 
             OVER (PARTITION BY a.parent_fk ORDER BY a.Batch_Number_From ASC) AS Rnk1
    FROM 
        VOUCHER_BATCH_ALLOCATION AS a
    WHERE 
        a.channel_from_fk = 2) ChildRnk
LEFT JOIN 
    (SELECT
        c.Parent,
        c.START AS NextStart,
        (Rnk1-1) AS Rnk2 
    FROM 
        (SELECT
            b.Id AS Id,
            b.parent_fk AS Parent,
            b.Batch_Number_From AS START,
            b.Batch_Number_To AS 'End',
            RANK() OVER 
                (PARTITION BY b.parent_fk ORDER BY b.Batch_Number_From ASC) AS Rnk1
        FROM 
            VOUCHER_BATCH_ALLOCATION AS b
        WHERE 
            b.channel_from_fk = 2) c
    WHERE 
        Rnk1 != 1) NextStart
ON 
    ChildRnk.Parent = NextStart.Parent
    AND Rnk1 = Rnk2
LEFT JOIN 
    VOUCHER_BATCH_ALLOCATION
ON 
    VOUCHER_BATCH_ALLOCATION.Id = ChildRnk.Parent
    AND Rnk1 = 1
WHERE 
    NextStart IS NOT NULL
    AND [End] < NextStart

UNION

SELECT 
    ChildRnk.Parent,
    ([End]+1) AS START,
    EndLimit.VeryEnd AS [End]
FROM 
    (SELECT
        a.Id AS Id,
        a.parent_fk AS Parent,
        a.Batch_Number_From AS START,
        a.Batch_Number_To AS 'End',
        RANK() OVER 
            (PARTITION BY a.parent_fk ORDER BY a.Batch_Number_From ASC) AS Rnk1
    FROM 
        VOUCHER_BATCH_ALLOCATION AS a
    WHERE 
        a.channel_from_fk = 2) ChildRnk
LEFT JOIN 
    (SELECT
        c.Parent,
        c.START AS NextStart,
        (Rnk1-1) AS Rnk2 
    FROM 
        (SELECT
            b.Id AS Id,
            b.parent_fk AS Parent,
            b.Batch_Number_From AS START,
            b.Batch_Number_To AS 'End',
            RANK() OVER 
                (PARTITION BY b.parent_fk ORDER BY b.Batch_Number_From ASC) AS Rnk1
        FROM 
             VOUCHER_BATCH_ALLOCATION AS b
        WHERE 
            b.channel_from_fk = 2) c
    WHERE 
        Rnk1 != 1) NextStart
    ON 
        ChildRnk.Parent = NextStart.Parent
        AND Rnk1 = Rnk2
LEFT JOIN 
    (SELECT
        a.Id,
        a.Batch_Number_To AS VeryEnd,
        Rnk2
    FROM 
        VOUCHER_BATCH_ALLOCATION a
    LEFT JOIN
        (SELECT
            max(ChildRnk.Parent) AS MaxParent,
            max(ChildRnk.Rnk1) AS Rnk2
        FROM 
            (SELECT
                 a.Id AS Id,
                 a.parent_fk AS Parent,
                 a.Batch_Number_From AS START,
                 a.Batch_Number_To AS 'End',
                 RANK() OVER 
                     (PARTITION BY a.parent_fk ORDER BY a.Batch_Number_From ASC) AS Rnk1
            FROM 
                VOUCHER_BATCH_ALLOCATION AS a
            WHERE 
                a.channel_from_fk = 2) ChildRnk
        GROUP BY 
            ChildRnk.Parent) c
    ON 
        c.MaxParent = a.id
    WHERE 
        a.channel_from_fk = 1) EndLimit
ON 
    EndLimit.Id = ChildRnk.Parent
    AND EndLimit.Rnk2 = Rnk1
WHERE 
    EndLimit.VeryEnd IS NOT NULL
    AND [End] < EndLimit.VeryEnd

UNION 

SELECT
    a.id AS Parent,
    a.Batch_Number_From AS START,
    a.Batch_Number_To AS [End]
FROM
    VOUCHER_BATCH_ALLOCATION a
WHERE 
    a.Channel_From_Fk = 1
    And a.id not in 
        (SELECT 
            Parent_Fk 
        FROM 
            VOUCHER_BATCH_ALLOCATION 
        WHERE 
            Channel_From_Fk=2) 
```

### 编辑：下面为 MySql 重写的脚本

# **[SQL 小提琴](http://sqlfiddle.com/#!2/5814a/35)**

对于 MySQL，我不得不用 SubQuery 替换[Rank()](http://msdn.microsoft.com/en-us/library/ms176102.aspx)函数，这将达到相同的结果，因为MySQL 不支持不幸的[Rank() 。](http://msdn.microsoft.com/en-us/library/ms176102.aspx)

```
SELECT
    ChildRnk.Parent,
    Batch_Number_From AS START,
    (START-1) AS TheEnd
FROM
    (SELECT
        a.Id AS Id,
        a.parent_fk AS Parent,
        a.Batch_Number_From AS START,
        a.Batch_Number_To AS TheEnd,
        Rnk.Rank AS Rnk1
    FROM 
        VOUCHER_BATCH_ALLOCATION AS a
    LEFT JOIN
        (SELECT
            g1.id,
            g1.Parent_Fk,
            COUNT(*) AS rank
        FROM
            VOUCHER_BATCH_ALLOCATION AS g1
        JOIN
            VOUCHER_BATCH_ALLOCATION AS g2
        ON
            (g2.Batch_Number_From, g2.id) <= (g1.Batch_Number_From, g1.id)
            AND g1.Parent_Fk = g2.Parent_Fk
        GROUP BY
            g1.Parent_Fk,
            g1.Batch_Number_From
        ORDER BY
            g1.Parent_Fk,
            rank) Rnk
    ON
        Rnk.id = a.Id
    WHERE 
        a.channel_from_fk = 2) ChildRnk
LEFT JOIN
    (SELECT
        c.Parent,
        c.START AS NextStart,
        (Rnk1-1) AS Rnk2
    FROM 
        (SELECT
            b.Id AS Id,
            b.parent_fk AS Parent,
            b.Batch_Number_From AS START,
            b.Batch_Number_To AS TheEnd,
            Rnk.Rank AS Rnk1
        FROM 
            VOUCHER_BATCH_ALLOCATION AS b
        LEFT JOIN
            (SELECT
                g1.id,
                g1.Parent_Fk,
                COUNT(*) AS rank
            FROM
                VOUCHER_BATCH_ALLOCATION AS g1
            JOIN
                VOUCHER_BATCH_ALLOCATION AS g2
            ON
                (g2.Batch_Number_From, g2.id) <= (g1.Batch_Number_From, g1.id)
                AND g1.Parent_Fk = g2.Parent_Fk
            GROUP BY
                g1.Parent_Fk,
                g1.Batch_Number_From
            ORDER BY
                g1.Parent_Fk,
                rank) Rnk
        ON
            Rnk.id = b.Id
        WHERE 
            b.channel_from_fk = 2) c
    WHERE Rnk1 != 1) NextStart
ON 
    ChildRnk.Parent = NextStart.Parent
    AND Rnk1 = Rnk2
LEFT JOIN 
    VOUCHER_BATCH_ALLOCATION
ON 
    VOUCHER_BATCH_ALLOCATION.Id = ChildRnk.Parent
    AND Rnk1 = 1
WHERE 
    Batch_Number_From IS NOT NULL
    AND Batch_Number_From < START

UNION

SELECT
    ChildRnk.Parent,
    (TheEnd+1) AS START,
    (NextStart-1) AS TheEnd
FROM
    (SELECT
        a.Id AS Id,
        a.parent_fk AS Parent,
        a.Batch_Number_From AS START,
        a.Batch_Number_To AS TheEnd,
        Rnk.rank AS Rnk1
    FROM 
        VOUCHER_BATCH_ALLOCATION AS a
    LEFT JOIN
        (SELECT
            g1.id,
            g1.Parent_Fk,
            COUNT(*) AS rank
        FROM
            VOUCHER_BATCH_ALLOCATION AS g1
        JOIN
            VOUCHER_BATCH_ALLOCATION AS g2
        ON
            (g2.Batch_Number_From, g2.id) <= (g1.Batch_Number_From, g1.id)
            AND g1.Parent_Fk = g2.Parent_Fk
        GROUP BY
            g1.Parent_Fk,
            g1.Batch_Number_From
        ORDER BY
            g1.Parent_Fk,
            rank) Rnk
    ON
        Rnk.id = a.Id
    WHERE 
        a.channel_from_fk = 2) ChildRnk
LEFT JOIN
    (SELECT
        c.Parent,
        c.START AS NextStart,
        (Rnk1-1) AS Rnk2
    FROM 
        (SELECT
            b.Id AS Id,
            b.parent_fk AS Parent,
            b.Batch_Number_From AS START,
            b.Batch_Number_To AS TheEnd,
            Rnk.rank AS Rnk1
        FROM 
            VOUCHER_BATCH_ALLOCATION AS b
        LEFT JOIN
            (SELECT
                g1.id,
                g1.Parent_Fk,
                COUNT(*) AS rank
            FROM
                VOUCHER_BATCH_ALLOCATION AS g1
            JOIN
                VOUCHER_BATCH_ALLOCATION AS g2
            ON
                (g2.Batch_Number_From, g2.id) <= (g1.Batch_Number_From, g1.id)
                AND g1.Parent_Fk = g2.Parent_Fk
            GROUP BY
                g1.Parent_Fk,
                g1.Batch_Number_From
            ORDER BY
                g1.Parent_Fk,
                rank) Rnk
        ON
            Rnk.id = b.Id
        WHERE 
            b.channel_from_fk = 2) c
    WHERE 
        Rnk1 != 1) NextStart
ON 
    ChildRnk.Parent = NextStart.Parent
    AND Rnk1 = Rnk2
LEFT JOIN 
    VOUCHER_BATCH_ALLOCATION
ON 
    VOUCHER_BATCH_ALLOCATION.Id = ChildRnk.Parent
    AND Rnk1 = 1
WHERE 
    NextStart IS NOT NULL
    AND TheEnd < NextStart

UNION

SELECT
    ChildRnk.Parent,
    (TheEnd+1) AS START,
    EndLimit.VeryEnd AS TheEnd
FROM
    (SELECT
        a.Id AS Id,
        a.parent_fk AS Parent,
        a.Batch_Number_From AS START,
        a.Batch_Number_To AS TheEnd,
        Rnk.Rank AS Rnk1
    FROM 
        VOUCHER_BATCH_ALLOCATION AS a
    LEFT JOIN
        (SELECT
            g1.id,
            g1.Parent_Fk,
            COUNT(*) AS rank
        FROM
            VOUCHER_BATCH_ALLOCATION AS g1
        JOIN
            VOUCHER_BATCH_ALLOCATION AS g2
        ON
            (g2.Batch_Number_From, g2.id) <= (g1.Batch_Number_From, g1.id)
            AND g1.Parent_Fk = g2.Parent_Fk
        GROUP BY
            g1.Parent_Fk,
            g1.Batch_Number_From
        ORDER BY
            g1.Parent_Fk,
            rank) Rnk
    ON
        Rnk.id = a.Id
    WHERE 
        a.channel_from_fk = 2) ChildRnk
LEFT JOIN
    (SELECT
        c.Parent,
        c.START AS NextStart,
        (Rnk1-1) AS Rnk2
    FROM 
        (SELECT
            b.Id AS Id,
            b.parent_fk AS Parent,
            b.Batch_Number_From AS START,
            b.Batch_Number_To AS TheEnd,
            Rnk.Rank AS Rnk1
        FROM 
            VOUCHER_BATCH_ALLOCATION AS b
        LEFT JOIN
            (SELECT
                g1.id,
                g1.Parent_Fk,
                COUNT(*) AS rank
            FROM
                VOUCHER_BATCH_ALLOCATION AS g1
            JOIN
               VOUCHER_BATCH_ALLOCATION AS g2
            ON
               (g2.Batch_Number_From, g2.id) <= (g1.Batch_Number_From, g1.id)
               AND g1.Parent_Fk = g2.Parent_Fk
            GROUP BY
               g1.Parent_Fk,
               g1.Batch_Number_From
            ORDER BY
               g1.Parent_Fk,
               rank) Rnk
        ON
            Rnk.id = b.Id
        WHERE 
            b.channel_from_fk = 2) c
    WHERE 
        Rnk1 != 1) NextStart
ON 
    ChildRnk.Parent = NextStart.Parent
    AND Rnk1 = Rnk2
LEFT JOIN
    (SELECT
        a.Id,
        a.Batch_Number_To AS VeryEnd,
        Rnk2
    FROM 
        VOUCHER_BATCH_ALLOCATION a
    LEFT JOIN
        (SELECT
            max(ChildRnk.Parent) AS MaxParent,
            max(ChildRnk.Rnk1) AS Rnk2
        FROM
            (SELECT
                a.Id AS Id,
                a.parent_fk AS Parent,
                a.Batch_Number_From AS START,
                a.Batch_Number_To AS TheEnd,
                Rnk.Rank AS Rnk1
            FROM 
                VOUCHER_BATCH_ALLOCATION AS a
            LEFT JOIN
                (SELECT
                    g1.id,
                    g1.Parent_Fk,
                    COUNT(*) AS rank
                FROM
                    VOUCHER_BATCH_ALLOCATION AS g1
                JOIN
                    VOUCHER_BATCH_ALLOCATION AS g2
                ON
                    (g2.Batch_Number_From, g2.id) <= (g1.Batch_Number_From, g1.id)
                    AND g1.Parent_Fk = g2.Parent_Fk
                GROUP BY
                    g1.Parent_Fk,
                    g1.Batch_Number_From
                ORDER BY
                    g1.Parent_Fk,
                    rank) Rnk
            ON
                Rnk.id = a.Id
            WHERE 
                a.channel_from_fk = 2) ChildRnk
        GROUP BY 
            ChildRnk.Parent) c
    ON 
        c.MaxParent = a.id
    WHERE 
        a.channel_from_fk = 1) EndLimit
ON 
    EndLimit.Id = ChildRnk.Parent
    AND EndLimit.Rnk2 = Rnk1
WHERE 
    EndLimit.VeryEnd IS NOT NULL
    AND TheEnd < EndLimit.VeryEnd

UNION

SELECT
    a.id AS Parent,
    a.Batch_Number_From AS START,
    a.Batch_Number_To AS TheEnd
FROM
    VOUCHER_BATCH_ALLOCATION a
WHERE
    a.Channel_From_Fk = 1
    AND a.id NOT IN (SELECT Parent_Fk FROM VOUCHER_BATCH_ALLOCATION WHERE Channel_From_Fk=2) 
```

希望这可以帮助

# javascript - 使用 jquery 将鼠标移出框架 div 标签时出错？

> ID：13510232
> 
> 赞同：0
> 
> 时间：2012-11-22T10:07:12.727
> 
> 标签：javascript, jquery

我有一个示例代码：

```
<div style="background: url('test.jpg') no-repeat left center; width: 500px; height: 334px;">
   <div id="button-wrapper" style="position: absolute; opacity: 1; z-index: 100;">
   <input type="button" value="submit">    
   </div>
</div>​ 
```

和jQuery

```
jQuery(document).ready(function(){
    jQuery("div[id^=\'button-wrapper\']").parent().mousemove(function(e){
        jQuery("div[id^=\'button-wrapper\']").css({
            top:e.pageY-5,
            left:e.pageX-5
         });
    });
});​ 
```

当我鼠标移出框架时出错（div id="button-wrapper"）它在超出框架时运行，如何修复它，只在框架中运行？[（在这里](http://jsfiddle.net/qCbwr/6/)演示）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:15:49.967

在代码中定义 mousemove 的包含。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:29:14.593

检查此链接.. 代码更新...

[检查此链接](http://jsfiddle.net/qCbwr/24/)

我在那个鼠标 movemnet 上添加了约束

```
 var a = $(this).height()-15;
         var b = $(this).width()-35;
        if(e.pageY < a&& e. pageX < b)
        {
        $('div[id^="button-wrapper"]').css({
                        top:e.pageY-5,
            left:e.pageX-5
         });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:37:32.197

You need to check if the mouse is being moved outside the parent div. See example at - [http://jsfiddle.net/qCbwr/40/](http://jsfiddle.net/qCbwr/40/).

```
var _c = $(this);
var _p = _c.position();;

if (_top > (_p.top + _c.height())) _top = _p.top + _c.height();
if (_left > (_p.left + _c.width())) _left = _p.left +_c.width(); 
```

You will need to allow for the size of the button if you do not want the control to go outside the div entirely.

# powershell - 使用 powershell 进行 gpupdate

> ID：13510233
> 
> 赞同：0
> 
> 时间：2012-11-22T10:07:14.113
> 
> 标签：powershell, wait, updating, group-policy

我想执行一个`gpupdate`实例`-Action`，`System.IO.FileSystemWatcher`但 gpupdate 在从 PowerShell 调用时偶尔会完全挂起。我尝试了以下方法来处理无响应的 gpupdate，但它没有按预期工作 - 当 gpupdate 出错时，整个脚本仍然挂起。

```
$command = "/target:computer"

$gp = Start-Process -FilePath gpupdate `
      -ArgumentList $command -NoNewWindow -PassThru 
wait-process -inputobject $gp -timeout 10    

if( $gp.HasExited -ne $true )
{
    stop-process -inputobject $gp -force
    $errcode = 99
}
else
{
    $errcode = $gp.exitcode
} 
```

我的问题是

*   `gpupdate`有没有人遇到过从 PowerShell (v2) 调用的类似问题；这可能是什么原因？
*   为什么上面的代码片段没有做我期望它做的事情（即为什么`wait-process`-command 没有真正关闭 gpupdate 进程，而后者没有响应）？

**更新：**

我尝试添加`/wait`参数，但它没有改变任何东西。我还尝试了以下代码：

```
 $gp = Invoke-WmiMethod -ComputerName "localhost"`
         -EnableAllPrivileges`
         -Path win32_process -Name "create"`
         -ArgumentList "gpupdate /target:Computer /wait:5" 
```

与`$gp.ReturnValue`as `$errcode`，但问题仍然存在。几次运行后，我仍然没有得到脚本的响应，并且订阅者停止触发。在尝试了整个事情`start-job`并且`wait-job`也没有解决它之后，我束手无策。

*   是否有更好的选择来执行此任务？
*   是否值得阅读 powershell 错误处理？

# r - 使用roxygen2时如何指定加载S4方法的顺序

> ID：13510234
> 
> 赞同：10
> 
> 时间：2012-11-22T10:07:17.080
> 
> 标签：r, documentation, package, s4, roxygen2

我已经多次遇到以下问题。

假设您有两个类，`classA`并`classB`在以下文件中进行了描述`classA.R`：

```
#' the class classA
#'
#' This is a class A blabla
#' \section{Slots}{\describe{\item{\code{A}}{a Character}}}
#' @ name classA
#' @rdname classA
#' @exportClass classA
setClass("classA",representation(A="character")) 
```

和`classB.R`

```
#' the class classB
#'
#' This is a class B blabla
#' \section{Slots}{\describe{\item{\code{B}}{an object of class A}}}
#' @ name classB
#' @rdname classB
#' @exportClass classB
setClass("classB",representation(B="classA")) 
```

我相信这些文件是按字母顺序阅读的`roxygen2`，但事实并非如此。如果我尝试构建包，我可能会收到以下错误：

```
roxygenize("./myExample")
Error in getClass(Class, where = topenv(parent.frame())) :
   "ClassA" is not a defined class 
```

我如何确保`roxygenize()`知道读取文件的顺序，即应该先读取哪个类定义？

* * *

注意：我知道我回答了我自己的问题。那是因为我经常遇到这个问题，并且在查看`roxygen2`. 因此，作为参考，这是我的发现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T10:07:17.080

有两种方法可以实现这一点：

如 中所述`?collate_roclet`，您可以使用 @include 标记指定应该在哪个类之前读取哪个类。在这种情况下，您可以在文件中添加`classB.r`实际 R 代码之前的以下行：

```
#' @include classA.r 
```

专门读取这些标签以更新文件`Collate`中的字段`DESCRIPTION`，并且是处理问题的推荐方法。

在某些情况下，依赖关系可能非常复杂，您希望自己保持概览，而不是完全依赖`@include`在代码库中添加标签。在这种情况下，您只需指定文件`Collate`末尾的字段`DESCRIPTION`，如下所示：

```
Package: myExample
Type: Package
...
Collate:
    'classA.R'
    'classB.R' 
```

该函数`roxygenize()`首先检查`DESCRIPTION`文件，然后按照指定的顺序首先加载那里指定的任何文件。然后才加载包的其余部分。

# c - 是否可以将不同类型的结构存储到一个灵活长度的数组中？

> ID：13510236
> 
> 赞同：1
> 
> 时间：2012-11-22T10:07:19.637
> 
> 标签：c

假设我们有两种结构类型，如下所示：

```
struct A {
    int a;
}

struct B {
    int b;
    int c;
} 
```

是否可以使用指定的初始化程序初始化一个灵活长度的数组以包含 A 和 B 的实例*，*例如：

```
<sometype> my_array[] = {
    ((struct A){ .a = 10, }),
    ((struct B){ .b = 1, .c = 5, }),
}; 
```

而且由于我需要知道数组中元素的类型，因此在结构之前放置一些字符的方法也很好。:)

我知道这看起来非常糟糕，但我正在尝试将一些类似字节码的数据结构打包在一起，这看起来像是一种定义它们的优雅方式（好吧，至少在一些宏的帮助下）。

**编辑**：澄清几点：

*   动态分配不是一种选择
*   联合也不是 - 我希望元素*完全*占据其类型所需的空间
*   根据[http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html) ，问题中的“可变长度数组”可能具有误导性 - 确切的名称将是“可变长度数组” 。理想情况下，示例代码是我希望它的样子。

所以我基本上想要的是能够将一些任意的结构化数据打包到在二进制文件的 .data 段中分配的内存区域中。我不需要随机访问元素，只需要从结构中打包数据 - 在我的示例中使用灵活长度数组是因为这个结构似乎与我想要实现的最接近。但是声明可以是其他任何可以完成工作的东西（除了汇编程序，我需要保留 C 的可移植性）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T10:13:52.717

最好的方法是使用工会。您可以在 a 中定义所有类型`union`，包括这个 union 和`char`您想要定义*什么*是 a 的实际类型`struct`。

```
struct TypesAB {
    char type;
    union {
        struct {
            int a;
        } A;
        struct {
            int b;
            int c;
        } B;
    };
};
enum {
    TypeA,
    TypeB
}; 
```

有了这个`struct`，你可以定义你的数组，然后设置元素。

```
struct TypesAB array[10];
array[0].type = TypeA;
array[0].A.a = 10;
array[1].type = TypeB;
array[1].B.b = 1;
array[1].B.c = 5; 
```

`A`请注意，如果您的和`B`类型的长度不同，内存布局将使您失去一些空间。确实，用上面的定义，`struct TypesAB`将定义一个`sizeof`大到足以容纳较大的A或B，加上char。如果将其用作 A，则将*丢失*`c`用于该成员的内存空间。的成员和 的成员使用相同的内存空间。*`a``A``b``B`*

# java - 如何为 /home 创建控制器/视图

> ID：13510239
> 
> 赞同：0
> 
> 时间：2012-11-22T10:07:24.487
> 
> 标签：java, spring-mvc, netbeans

我有一个项目模板，登录页面后成功打开 /restricted/home 页面。我想在登录后打开 /home 页面。在我的身份验证控制器中，我将其更改为

```
modelAndView = new ModelAndView("redirect:/home"); 
```

现在它在浏览器中显示 /home url，但`http status 404`显示页面。我想创建一个 SystemController.java 文件来处理这些 url

```
/
/home
/system
/system/user 
```

我需要在哪个文件中将上述请求指向 SystemController 的设置是什么？

它的基于 Spring MVC 3.0 的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:49:54.143

也许这就是你需要的：

```
@RequestMapping(value = {"/home", "/system", "/system/user", "/"})
class SystemController {
    return new ModelAndView("view");
} 
```

# node.js - mongodb文档包含$，结果错误

> ID：13510252
> 
> 赞同：0
> 
> 时间：2012-11-22T10:08:14.737
> 
> 标签：node.js, mongodb

我遇到了一个问题，当我用nodejs将文档插入mongodb时，结果不是

正确。由于文档中包含$符号，与mongodb的出处冲突

运算符 $。

任何人都可以帮助解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:13:58.500

有关MongoDB 文档中键名的限制，请参见[此处：](https://wiki.10gen.com/display/DOCS/Legal+Key+Names)

“'$' 字符不能是键名中的第一个字符。”

字符的其他位置`$`很好，无论是键名还是字段值（如果它是字符串）。

# php - 具有多个模块的路由

> ID：13510253
> 
> 赞同：0
> 
> 时间：2012-11-22T10:08:16.353
> 
> 标签：php, zend-framework2, routes

我目前在 ZF2 工作，需要一些帮助。不幸的是，我只能找到为只有一个模块的情况设置路线的示例。或者该示例中仍有应用程序模块，具有动态分段路由。我想完全删除应用程序模块，只让我自己的模块在其中运行配置所有路由。

我有两个模块：CLFrontend、CLBackend

我的应用程序配置如下所示：

```
return array(
    'modules' => array(
        'ClFrontend',
        'ClBackend'
    ),
    'module_listener_options' => array(
        'config_glob_paths'    => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),

); 
```

我想在那里注册我自己的 2 个模块。路由现在应该看起来像这样：

/ 下的所有内容都应该转到前端模块摘录 /backend

> / --> 索引控制器 --> 索引操作
> 
> /controller1 --> Controller1Controller -> indexaction
> 
> /controller1/add --> Controller1Controller --> addaction
> 
> /controller1/add/1/ --> COntroller1Controller --> addaction --> item 1

现在 /backend 下的所有内容都应该路由到后端模块

> /backend --> BackendIndexController --> indexaction
> 
> /backend/controller1 --> BackendController1Controller -> indexaction
> 
> /backend/controller1/add --> BackendController1Controller --> addaction
> 
> /backend/controller1/add/1/ --> BackendCONtroller1Controller --> addaction --> item 1

我想定义固定的路线，而不是像这样的分段路线：

：模块/：控制器/：动作

我想最终得到类似的东西

> /
> 
> /controller1/[:action[/:id]]

和

> /后端
> 
> /后端/后端控制器/[:action[/:id]]

我的方法如下。现在的问题是，即使是后端路由似乎也与前端模块匹配？！我要么得到一个 404

> 请求的 URL 无法通过路由匹配。

或者

> 致命错误：在 / 中找不到类“ClBackend\Controller\AnswerController”**/* *** */* **** / *** **/checklistenassistent3/vendor/ZF2/library/Zend/ServiceManager/AbstractPluginManager.php 第177行*

 *CLFrontend/config/module.config.php

```
return array(
        'controllers' => array(
                'invokables' => array(
                        'ClFrontend\Controller\Index' => 'ClFrontend\Controller\IndexController',
                        'ClFrontend\Controller\User' => 'ClFrontend\Controller\UserController',
                ),
        ),
        'router' => array(
            'routes' => array(
                'home' => array(
                    'type'    => 'Zend\Mvc\Router\Http\Literal',
                    'options' => array(
                        'route'    => '/',
                        'defaults' => array(
                            'controller' => 'ClFrontend\Controller\Index',
                            'action'     => 'index',
                        ),
                    ),
                ),
            ),
        ),
        'view_manager' => array(
                'display_not_found_reason' => true,
                'display_exceptions'       => true,
                'doctype'                  => 'HTML5',
                'not_found_template'       => 'error/404',
                'exception_template'       => 'error/index',
                'template_map' => array(
                        'layout/layout'           => __DIR__ . '/../view/cl-frontend/layout/layout.phtml',
                        'application/index/index' => __DIR__ . '/../view/cl-frontend/index/index.phtml',
                        'error/404'               => __DIR__ . '/../view/cl-frontend/error/404.phtml',
                        'error/index'             => __DIR__ . '/../view/cl-frontend/error/index.phtml',
                ),
                'template_path_stack' => array(
                        __DIR__ . '/../view',
                ),
        ),
); 
```

CLBackend/config/module.config.php

```
return array(
    'controllers' => array(
            'invokables' => array(
                    'ClBackend\Controller\Answer'       => 'ClBackend\Controller\AnswerController',
                    'ClBackend\Controller\AnswerGroup'  => 'ClBackend\Controller\AnswerGroupController',
                    'ClBackend\Controller\Category'     => 'ClBackend\Controller\CategoryController',
                    'ClBackend\Controller\Checklist'    => 'ClBackend\Controller\ChecklistController',
                    'ClBackend\Controller\Index'        => 'ClBackend\Controller\IndexController',
                    'ClBackend\Controller\Question'     => 'ClBackend\Controller\QuestionController',
                    'ClBackend\Controller\User'         => 'ClBackend\Controller\UserController',
            ),
    ),
    'router' => array(
        'routes' => array(
            'backend' => array(
                'type'    => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/backend',
                    'defaults' => array(
                        'controller' => 'ClBackend\Controller\Index',
                        'action'     => 'index',
                    ),
                    'may_terminate' => true
                ),
                'child_routes' => array (
                    'answer' => array(
                            'type'    => 'Zend\Mvc\Router\Http\Segment',
                            'options' => array(
                                    'route'    => '/answer/:action/:id',
                                    'defaults' => array(
                                            'controller' => 'ClBackend\Controller\Answer',
                                            'action'     => 'index',
                                    ),
                            ),
                    ),
                    'answergroup' => array(
                            'type'    => 'Zend\Mvc\Router\Http\Segment',
                            'options' => array(
                                    'route'    => '/answergroup/:action/:id',
                                    'defaults' => array(
                                            'controller' => 'ClBackend\Controller\AnswerGroup',
                                            'action'     => 'index',
                                    ),
                            ),
                    ),
                    'category' => array(
                            'type'    => 'Zend\Mvc\Router\Http\Segment',
                            'options' => array(
                                    'route'    => '/category/:action/:id',
                                    'defaults' => array(
                                            'controller' => 'ClBackend\Controller\Category',
                                            'action'     => 'index',
                                    ),
                            ),
                    ),
                    'checklist' => array(
                            'type'    => 'Zend\Mvc\Router\Http\Segment',
                            'options' => array(
                                    'route'    => '/checklist/:action/:id',
                                    'defaults' => array(
                                            'controller' => 'ClBackend\Controller\Checklist',
                                            'action'     => 'index',
                                    ),
                            ),
                    ),
                    'question' => array(
                            'type'    => 'Zend\Mvc\Router\Http\Segment',
                            'options' => array(
                                    'route'    => '/question/:action/:id',
                                    'defaults' => array(
                                            'controller' => 'ClBackend\Controller\Question',
                                            'action'     => 'index',
                                    ),
                            ),
                    ),
                    'user' => array(
                            'type'    => 'Zend\Mvc\Router\Http\Segment',
                            'options' => array(
                                    'route'    => '/user/:action[/:id]',
                                    'defaults' => array(
                                            'controller' => 'ClBackend\Controller\User',
                                            'action'     => 'index',
                                    ),
                            ),
                    ),
                ),
            ),
        ),
    ),
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:37:37.780

你考虑过控制器工厂吗？它将允许您匹配单个路由并使用逻辑来决定使用哪个控制器。

例如，您的路线可能如下所示：

```
'backend-default' => array(
    'type' => 'Segment',
    'options' => array(
        'route' => '/:controller_type[/:action][/id]',
        'defaults' => array(
            'action' => 'index',
            'controller' => 'MyFactory'
        ),
    ),
), 
```

如果此路由匹配，则将使用控制器工厂 (MyFactory) - 在此工厂中，您可以访问路由匹配参数。使用这些参数，您应该能够返回适当的控制器。

您甚至可以传入一个附加参数，表示它是一个后端控制器（并使用单个工厂）。

```
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class MyFactoryController implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        // $serviceLocator is a Zend\Mvc\Controller\ControllerManager
        $app = $serviceLocator->getServiceLocator()->get('application');
        $routeMatch = $app->getMvcEvent()->getRouteMatch();

        var_dump($routeMatch);

        /**
         * Create controller based off $routeMatch params
         */

        return $controller;
    }
} 
```

控制器工厂将允许您将 controller_type 变量查找为有效的类名 - 或在 controller_type 前添加可调用名称。

我不确定我自己会采取这条路线，但我希望这对您想要实现的目标有所帮助。*

# ruby-on-rails - 在不使用 Ember.View 的情况下执行 Ember.Handlebars 模板

> ID：13510255
> 
> 赞同：0
> 
> 时间：2012-11-22T10:08:21.193
> 
> 标签：ruby-on-rails, ruby, rubygems, ember.js, handlebars.js

我将 RoR 与服务器端的 ember-rails gem 和客户端的 Ember.js 一起使用。位于服务器端的 (Handlebars-) 模板在客户端的 Ember.TEMPLATES 变量中提供。这些模板可以在 Ember.View 中使用。

所有这些都像一个魅力，但现在的问题是：

我有一小段要渲染的 html。从我的角度来看，不值得为此创建一个 Ember.View。所以我想做这样的事情..

```
Ember.TEMPLATES.name_of_the_template(
    {
        my_text_variable : "my_text"
    }
); 
```

这会引发错误：TypeError: Cannot read property 'buffer' of undefined

我查看了代码，我知道为什么会发生这种情况（模板只能在 Ember.View 或其他 Ember-Objects 中使用）。

使用 Handlebars 它可以工作，但是我无法访问服务器端存储的 Handlebars-Templates ..

有人有什么建议我可以解决这个问题吗？

如果您需要更多信息，请告诉我！

谢谢！

# c++ - 在 solaris 上创建和使用动态共享库

> ID：13510258
> 
> 赞同：2
> 
> 时间：2012-11-22T10:08:27.460
> 
> 标签：c++, c, shared-libraries, solaris

我正在阅读在 solaris sparc 服务器上创建和使用动态共享库的过程。以下是我拥有的文件：

```
> ls -lrt
total 8
-rw-rw-r--   1 nobody   nobody       848 Nov 22 14:45 badmemlib.hh
-rw-rw-r--   1 nobody   nobody      1924 Nov 22 14:46 badmemlib.cc
-rw-rw-r--   1 nobody   nobody       330 Nov 22 14:49 my_prog.cc
> 
```

在上面的文件中，badmemlib.hh 是头文件，我使用它创建一个共享库，下面的命令遵循[此](http://docs.oracle.com/cd/E18659_01/html/821-1383/bkamq.html)链接中提到的内容。

```
> CC -G -o libbad.so -h libbad.so -Kpic badmemlib.cc 
```

运行上述命令后，我有以下文件：

```
> ls -lrt
total 26
-rw-rw-r--   1 nobody   nobody       848 Nov 22 14:45 badmemlib.hh
-rw-rw-r--   1 nobody   nobody      1924 Nov 22 14:46 badmemlib.cc
-rw-rw-r--   1 nobody   nobody       330 Nov 22 14:49 my_prog.cc
-rwxrwxr-x   1 nobody   nobody      8284 Nov 22 15:11 libbad.so*
> 
```

如您所见，libbad.so 的构建没有任何错误。现在我的主要文件在 my_prog.cc 文件中，我正在编译 my_prog.cc 文件，如下 [所示](http://docs.oracle.com/cd/E18659_01/html/821-1383/bkajr.html#bkajv)：并且没有错误。二进制 a.out 已构建。

```
> CC -L. -lbad my_prog.cc
> ls -lrt
total 184
-rw-rw-r--   1 nobody   nobody       848 Nov 22 14:45 badmemlib.hh
-rw-rw-r--   1 nobody   nobody      1924 Nov 22 14:46 badmemlib.cc
-rw-rw-r--   1 nobody   nobody       330 Nov 22 14:49 my_prog.cc
-rwxrwxr-x   1 nobody   nobody      8284 Nov 22 15:11 libbad.so*
-rwxrwxr-x   1 nobody   nobody     80224 Nov 22 15:14 a.out*
> 
```

现在如果我运行 a.out 那么我面临的错误是：

```
> ./a.out
ld.so.1: a.out: fatal: libbad.so: open failed: No such file or directory
Killed 
```

它提到找不到库，但正如您在上面看到的，该库位于同一目录中！

任何人都可以帮助我！

my_prog.cc.it 的内容实际上会生成一个 sigsegv，并且 badmemlib 文件有一个信号处理程序。

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <string.h>
#include "badmemlib.hh"
#ifdef SOLARIS /* needed with at least Solaris 8 */
#include <siginfo.h>
#endif

int main(){ 
        char *where=(char *)0x123;

        printf( "About to write to %p\n", where);
        strcpy(where,"vijay");

        return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:16:52.020

您需要告诉您的应用程序从当前目录中查找 .so 文件：

```
CC -L. -lbad my_prog.cc -R <your current directory> 
```

[http://docs.oracle.com/cd/E18659_01/html/821-1383/bkana.html#bkawi](http://docs.oracle.com/cd/E18659_01/html/821-1383/bkana.html#bkawi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:01:44.493

您也可以尝试设置`LD_LIBRARY_PATH`变量。

你应该这样做：

```
export LD_LIBRARY_PATH = $LD_LIBRARY_PATH:<full path where library is present> 
```

# php - 每次点击链接时都会向 url 添加不同的 id

> ID：13510260
> 
> 赞同：0
> 
> 时间：2012-11-22T10:08:35.120
> 
> 标签：php, html, url, random

我有一个链接，每次点击它时我都需要在 url 中添加一个随机 id，这些 id 不能相同，理想情况下需要保存在某个地方。

我正在使用 php，我对它很陌生，因此我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:20:03.687

你可以做这样的事情

```
<a href="#" onClick="AppendIDToURL()">link</a> 
```

并通过使用 jquery

```
<script>
    var alreadyUsed = ""

    function AppendIDToURL(){
        var id ;
        var loop = true;
        while(loop){
            id = 1 + Math.floor(Math.random() * 100);
            if (alreadyUsed.indexOf("," + id + ",") == -1){
                alreadyUsed += "," + id + ",";
                loop = false;
            }
        }
        var url = "temp.php/" + id;

        //use ajax or any other thing to save this id.
    }
</script> 
```

# java - 如何在apache Tapestry中找到应用程序启动时的端口号

> ID：13510261
> 
> 赞同：0
> 
> 时间：2012-11-22T10:08:36.657
> 
> 标签：java, jetty, tapestry

我有一个在 Jetty 服务器下运行的 Apache Tapestry 应用程序。因此，可以在请求对象的请求期间获取正在运行的 HTTP 服务器的端口号。但我需要找出程序启动期间服务器正在运行的端口号（在 AppModule 中的某个位置）。有没有办法以编程方式获取这些信息？我试图在服务中访问 @Symbol(SymbolConstants.HOSTPORT) String hostPort 但这不起作用。它只是给出 0。显然 0 意味着我应该从请求中查找端口号。

我需要它的原因是因为我需要将此信息写入其他服务可以访问的某个数据库中，以便他们知道该应用程序正在运行的端口/IP地址并可以调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:09:10.357

我很确定您不能以编程方式从`javax.servlet`包中的任何内容确定 servlet 容器的端口，除了`ServletRequest`ie `getLocalPort()`。

Tapestry 不会为您的应用程序容器提供任何额外的句柄，而这些句柄尚未包含在 servlet 规范中。

因此，您需要等待第一个请求进入并存储使用的端口（推荐），或复制您的端口配置 - 一次在容器的配置（jetty）中，一次在应用程序的某个位置（AppModule、web.xml 或其他配置文件）。

第三个选项（强烈不推荐）是从 Tapestry 应用程序中查找容器的配置。请不要这样做。

# c++ - C++文件中函数错误的多重定义

> ID：13510264
> 
> 赞同：1
> 
> 时间：2012-11-22T10:08:42.980
> 
> 标签：c++, codeblocks

我在我的 Code::Blocks C++ 项目中添加了一个特定文件，该文件接受 a 的输入`struct`并返回`struct`. 但是，当我添加这两个函数时，我开始收到错误：

```
/src/Converter.h|23|multiple definition of `Converters::ColorConverters::RGB_to_HSV(Converters::ColorConverters::RGBColor)'| 
```

文件中的代码如下：

```
#ifndef CONVERTERS_H
#define CONVERTERS_H

#define MIN3(x,y,z)  ((y) <= (z) ? ((x) <= (y) ? (x):(y)) : ((x) <= (z) ? (x):(z)))
#define MAX3(x,y,z)  ((y) >= (z) ? ((x) >= (y) ? (x):(y)) : ((x) >= (z) ? (x):(z)))

namespace Converters
{
    namespace ColorConverters
    {
    struct RGBColor{
        float r,g,b;
    };

    struct HSVColor{
        float hue, sat, val;
    };
        struct HSVColor RGB_to_HSV(struct RGBColor rgb){
        }
        struct RGBColor HSV_to_RGB(struct HSVColor hsv){
        }
    }
}
#endif // CONVERTER_H 
```

并将其包含在我的另一堂课中`#include "Converter.h"`。任何建议出了什么问题以及如何摆脱这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:12:52.933

这两个：

```
 struct HSVColor RGB_to_HSV(struct RGBColor rgb)
    {
    }
    struct RGBColor HSV_to_RGB(struct HSVColor hsv)
    {
    } 
```

正在您的头文件中定义。您希望它们*声明*（如上图），并在 .cpp 源文件中*定义。*

**标题**：

```
#ifndef CONVERTERS_H
#define CONVERTERS_H

#define MIN3(x,y,z)  ((y) <= (z) ? ((x) <= (y) ? (x):(y)) : ((x) <= (z) ? (x):(z)))
#define MAX3(x,y,z)  ((y) >= (z) ? ((x) >= (y) ? (x):(y)) : ((x) >= (z) ? (x):(z)))

namespace Converters
{
    namespace ColorConverters
    {
        struct RGBColor{
            float r,g,b;
        };

        struct HSVColor{
            float hue, sat, val;
        };

        HSVColor RGB_to_HSV(RGBColor rgb);
        RGBColor HSV_to_RGB(HSVColor hsv);
    }
} 
```

**来源**：

```
Converters::ColorConverters::HSVColor 
 Converters::ColorConverters::RGB_to_HSV(RGBColor rgb)
{
    .. code here..
}

Converters::ColorConverters::RGBColor 
 Converters::ColorConverters::HSV_to_RGB(HSVColor hsv)
{
    .. code here ..
}; 
```

或者，如果需要，您可以仅将它们内联在标题中：

**标题**：

```
#ifndef CONVERTERS_H
#define CONVERTERS_H

#define MIN3(x,y,z)  ((y) <= (z) ? ((x) <= (y) ? (x):(y)) : ((x) <= (z) ? (x):(z)))
#define MAX3(x,y,z)  ((y) >= (z) ? ((x) >= (y) ? (x):(y)) : ((x) >= (z) ? (x):(z)))

namespace Converters
{
    namespace ColorConverters
    {
        struct RGBColor{
            float r,g,b;
        };

        struct HSVColor{
            float hue, sat, val;
        };

        inline HSVColor RGB_to_HSV(RGBColor rgb)
        {
            .. code here ..
        };

        inline RGBColor HSV_to_RGB(HSVColor hsv)
        {
            .. code here ..
        };
    }
} 
```

# regex - ([0-9]{2}|[0-9]{4}) 这样的表达式可以简化吗？

> ID：13510267
> 
> 赞同：2
> 
> 时间：2012-11-22T10:08:46.547
> 
> 标签：regex

换句话说，“只匹配 2 位或 4 位”。标题中的表达式效果很好，但我想知道是否有一种更简洁的方式使用我不知道的运算符，因为我只是在学习正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:11:56.027

你喜欢

```
([0-9]{2}(?:[0-9]{2})?) 
```

更好的？我不确定这是否更简单，但不同。

但是如果你想精确匹配 2 或 4 位数字，你需要[锚定](http://www.regular-expressions.info/anchors.html)你的表达式。否则，您将在所有内容上获得部分匹配，其中至少包含 2 位数字。像这样的东西

```
 ^([0-9]{2}|[0-9]{4})$ 
```

或这个

```
 \b([0-9]{2}|[0-9]{4})\b 
```

[在 Regexr 上](http://regexr.com?32t6c)看到这里

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T10:15:19.843

这个特定的正则表达式可以重写为

```
(\d{2}){1,2} 
```

甚至（对于 2 和 4 的小值）

```
\d\d(\d\d)? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:09:42.977

改写成另一种形式，是的。简化，没有。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T10:10:23.600

最多你可以做到这一点

```
(\d{2}|\d{4}) 
```

# android - 如何通过套接字将文件从 Android 客户端发送到 C++ 服务器

> ID：13510270
> 
> 赞同：2
> 
> 时间：2012-11-22T10:08:58.757
> 
> 标签：android, c++, sockets, file-transfer

我试图将位图从我的 android 发送到 pc（C++ 套接字服务器）但失败了。发送完成后无法打开PNG文件

1 - 这是我将位图压缩为 png 格式的代码

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
tmpBM.compress(CompressFormat.PNG, 0, bos); // compress to png format
byte[] bitmapdata = bos.toByteArray(); // new byte[] to send via socket
sendFile(bitmapdata, bitmapdata.length); // call sendFile method 
```

2 - 这里是 sendFile 方法代码。arr 是字节数组， len 是 arr.length

```
public void sendFile(byte[] arr, int len) throws Exception{

    byte[] buf = new byte[1024];
    int cur = 0; // current byte reading
    sendMessage("Send\n"); // talk server

    sendMessage(String.valueOf(len)); // send file size
    // OutputStream outStream = ...;
    while (len-cur>0){
        if (len-cur>=1024){
            buf = copy(arr, cur, 1024); // copy to buf, from arr, offset cur, size 1024 byte
            outStream.write(buf, 0, 1024);
            cur+=1024;
        }// send 1024 byte if file size >1024
        else {
            buf = copy(arr, cur, len-cur);
            buf[len-cur] = '\0';
            outStream.write(buf, 0, len-cur);
        }// send remaining byte
    }
    outStream.flush();
} 
```

3 - 这是代码接收文件

```
 char rec[50] = "";
    FILE *fw = fopen("tmp.png", "wb");
    printf("\n Created file");
    int recs = recv( current_client, rec, 32, 0 );
    rec[recs]='\0';
    int size = atoi(rec);
    printf("\n Have size %d", size);
    while(size > 0)
    {
        char buffer[1030]; // create buffer
        printf("\nLoop %d", size);
        if(size>=1024) // if remaining >1024 byte, read 1024 byte
        {
            recv( current_client, buffer, 1024, 0 );
            fwrite(buffer, 1024, 1, fw);
        }
        else // else read all
        {
            recv( current_client, buffer, size, 0 );
            buffer[size]='\0';
            fwrite(buffer, size, 1, fw);
        }
            size -= 1024;
    }
    fclose(fw); 
```

# c++ - 如何使用 pugixml 提取子数据？

> ID：13510271
> 
> 赞同：1
> 
> 时间：2012-11-22T10:09:03.147
> 
> 标签：c++, xml-parsing, pugixml

我正在尝试使用 pugixml 从大型 XML 文件中提取数据。我只对节点 BAR 和 Nm 中的值感兴趣：

```
 <Document xmlns="xxxxxx" xmlns:xsi="vvvvvvv">
      <Outer>
        <HDR>
          <MsgId>FOOBAR222222</MsgId>
          <ID>
            <AAAAA>FOOBAR222222</AAAAA>
          </ID>
        </HDR>
        <ENTRY>
          <Status>existing</Status>
          <ELEM>
            <TM>2012-11-19T13:00:00</TM>
          </ELEM>
          <FOO>
            <BAR>xxxxx</BAR>
            <NM>
              <Nm>yyyyyyy</Nm>
            </NM>
          </FOO>
        </ENTRY> 
```

据我所见，可以遍历根文档，但是，在访问父节点和子节点时我有点迷失：

```
 void walk(xml_node parent)
        {
            for(xml_node child = parent.first_child(); child; child = child.next_sibling())
            {
              // ... Would like to output:  "FOO: xxxx  / NM:  yyyyyyyy"
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:16:28.740

您可以为 the`first_child()`和其他成员函数提供参数：

```
auto Outer = document.first_child("OUTER");
auto Entry = Outer.first_child("ENTRY");
auto Foo = Entry.first_child("FOO"); 
```

等等

当您最终到达目的地时，使用`.value()`获取节点值。

PugiXML 还具有 XPath 支持，但在这种情况下，这可能是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T08:53:45.163

Pugi 还有一个简单的路径工具[5.10。杂项功能](http://pugixml.org/docs/manual.html#access.misc)

您只需一行即可完成上述操作：

```
document.first_element_by_path("/Document/Outer/ENTRY/FOO/BAR").first_child().value(); 
```

# android - Android 中的图标和闪屏支持哪些格式？我也可以为所有屏幕使用最大尺寸图像吗？

> ID：13510272
> 
> 赞同：1
> 
> 时间：2012-11-22T10:09:09.633
> 
> 标签：android

根据 android 开发者文档，96 X 96 px 是高密度屏幕所需的图标大小。我可以为所有屏幕使用相同大小的图标吗？或者我必须为 ldpi、mdpi 等不同的屏幕提供不同的尺寸。另外， png 是唯一接受的格式还是接受的任何格式？

同样对于初始屏幕，1440 X 1080 像素适用于 xlarge 屏幕，所以我可以将这个单一图像用于所有其他屏幕（如大屏幕、普通屏幕和小屏幕）还是必须为所有屏幕提供单独的图像？另外，支持哪些格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:14:00.610

您必须使用单独的图像和单独的布局来处理不同的屏幕尺寸。否则对于 xlarge 屏幕，图像可能很好，但对于小屏幕，它会被裁剪。布局也会发生同样的情况。因此，为了获得最佳编程体验，请使用单独的文件。Android 也支持 .png 以外的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:17:22.197

请阅读[如何支持多屏](http://developer.android.com/guide/practices/screens_support.html)

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:10:08.737

如果您使用一个图标，那么 Android 系统将拉伸并将其设置为所有其他分辨率。问题是你的图标在大屏幕上是拉伸的。那么，它可能会导致应用程序的出现。所以你必须这样想。

如果您为每个显示大小使用每个图标，则可能会导致 apk 文件大小。这与为不同显示尺寸添加的其他图像相同。因此您必须考虑这一点。

大多数情况下，您可以使用 9patch 图像来避免这种情况。

以我的经验，我注意到避免使用带有圆圈的图像不会为不同的屏幕尺寸使用不同的图像。然后你可以用更少的图像来管理它。当它们被拉伸时，圆圈变成椭圆。

我想现在你有想法了。

# c# - 如何从 .Net 中调出“默认程序”对话框

> ID：13510275
> 
> 赞同：-3
> 
> 时间：2012-11-22T10:09:12.463
> 
> 标签：c#, .net, windows, winapi, controlpanel

如何使用 C# 调出“默认程序”对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:18:13.397

看看这个：

[代码项目解决方案](http://www.codeproject.com/Articles/13103/Calling-the-Open-With-dialog-box-from-your-applica)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T10:16:32.820

如果要显示默认的 Windows 打开文件对话框，可以使用[System.Windows.Forms.OpenFileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)类。

您将在提供的链接中找到一个示例。

# c# - 如何将此十六进制转换为整数？

> ID：13510277
> 
> 赞同：0
> 
> 时间：2012-11-22T10:09:18.450
> 
> 标签：c#, hex

这真的让我很困惑。由于某种未知原因，在程序中存储了一个计数器来跟踪两个数据库之间的状态。这只是本质上只是一个增量计数器。

代码存储此计数器：

```
byte[] counter; 
```

当它存储在数据库中时，它会呈现为这样的字符串......

```
0x00010471000001BF001F 
```

我想编写一个应用程序，通过输入两个数字来告诉我一个是否高于另一个以及多少。但我不知道如何将这些数字转换为整数表示。

有谁知道发生了什么以及这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:14:03.107

由于该数字是 20 个十六进制数字（80 位），因此太大而无法存储在 int（32 位）或 long（64 位）中。您可以`BigInteger`在 .NET 4.0 或更高版本上使用。（在 .NET 4.0 中，您必须添加对 System.Numerics.dll 的引用）

```
var bigint = new System.Numerics.BigInteger(counter) 
```

正如Øyvind所指出的，上面需要以little-endian顺序排列的字节数组，即new byte [] { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } 将评估为 1。如有必要，请使用 Array.Reverse 解决此问题。

由于您将数字作为字符串，因此您应该使用`BigInteger.Parse`, 但请注意，您必须从头开始修剪“0x”

```
var bigint = System.Numerics.BigInteger.Parse("00010471000001BF001F",
                 System.Globalization.NumberStyles.HexNumber,
                 System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:29:12.367

基于[此解决方案](https://stackoverflow.com/questions/1139957/c-sharp-convert-integer-to-hex-and-back-again)，您可以使用

`int intNumber = int.Parse(counter,system.Globalization.NumberStyles.HexNumber);`

# java - 用 Java 将 PDF 文件发送到网络打印机

> ID：13510279
> 
> 赞同：2
> 
> 时间：2012-11-22T10:09:30.490
> 
> 标签：java, networking, printing

我正在尝试使用 javax.print 将 PDF/DOC/ODT 文件发送到连接到 LAN 中的打印机，但它甚至没有将作业发送到打印队列。我尝试“正常”打印文件（使用 Adob​​e Reader /Open Office）并且工作正常，因此打印机连接良好。我还尝试将它从代码发送到虚拟打印机（PDFCreator）并且它有效。

这是我正在使用的代码：

```
public Boolean Imprimir (String filePath){
    Boolean correct = true;

    FileInputStream psStream = null;  
    try {  
        psStream = new FileInputStream(filePath);  
    } catch (FileNotFoundException ex) {  
        ex.printStackTrace();
        correct = false;
    }
    if (psStream != null) {  

        DocFlavor psInFormat = DocFlavor.INPUT_STREAM.AUTOSENSE;  
        Doc myDoc = new SimpleDoc(psStream, psInFormat, null);    
        PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();            
        PrintService[] services = PrintServiceLookup.lookupPrintServices(psInFormat, aset);

        PrintService myPrinter = null;  
        for (int i = 0; i < services.length; i++){  
            String svcName = services[i].toString();             

            if (svcName.contains("Xerox")){  
                myPrinter = services[i];                       
                break;  
            }  
        }

        if (myPrinter != null) {              
            DocPrintJob job = myPrinter.createPrintJob();
            try{                    
                job.print(myDoc, aset);  
            }
            catch(PrintException ex){
                ex.printStackTrace();
                correct = false;
            }
        } else {  
            System.out.println("No printer services found");  
            correct = false;
        }
    }
    else{
        correct = false;
    }

    return correct;
} 
```

打印机使用 LPR 协议连接。

提前致谢

编辑：我也尝试过使用 jLpr，正如其他帖子中所建议的那样（[Java 直接打印到 Postscript 网络打印机](https://stackoverflow.com/questions/315209/java-printing-directly-to-a-postscript-network-printer?rq=1)）。它也不起作用，但没有错误消息，作业没有出现在打印机的队列中。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-08-08T14:55:36.127

您使用什么 Adob​​e Reader 版本？可能是 Adob​​e Reader 安全问题，具体取决于其版本。

问候

# android - 在 Eclipse 中安装 Android

> ID：13510281
> 
> 赞同：0
> 
> 时间：2012-11-22T10:09:35.370
> 
> 标签：android, eclipse, android-emulator

昨天 Android 停止在我的 Eclipse 中工作。它给出了以下错误代码：

![在此处输入图像描述](../Images/fe76629ebc8ee6bd3b4a87ff0b06e299.png)

我在这个论坛上读到我应该从帮助 -> 安装新软件来做。

我做到了，但 Eclipse 被阻止安装：

![在此处输入图像描述](../Images/69b12f24cd5487304586843fc6588cfd.png)

我已经等了一天，这条消息还在闪烁。应该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:14:38.467

```
please go to help tab in eclipse and click on check for updates and please update the ADT plugin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:12:35.623

从 android 网站访问并下载新的 SDK

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

# php - CodeIgniter 使用 Axis 调整大小和裁剪

> ID：13510282
> 
> 赞同：4
> 
> 时间：2012-11-22T10:09:36.860
> 
> 标签：php, codeigniter, image-processing, jcrop

我在 CodeIgniter 的项目中有一个图像裁剪器，它可以像[picresize.com](http://www.picresize.com/)那样裁剪图像（我正在使用[jCrop](http://deepliquid.com/content/Jcrop.html)）。它适用于下面给出的香草代码：

```
<?php
$save_to = $this->config->item('images_gallery_thumb_folder').$data['photo_image'];

$targ_w = $this->config->item('gallery_thumb_width');
$targ_h = $this->config->item('gallery_thumb_height');
$src = $this->config->item('images_gallery_folder').$data['photo_image'];

$types = array(1 => 'gif', 'jpeg', 'png');
list($width,$height,$type) = getimagesize($src);

switch ($types[$type]) {
    case 'jpeg':
        $img_r = imagecreatefromjpeg($src);
        break;
    case 'gif':
        $img_r = imagecreatefromgif($src);
        break;

    case 'png':
        $img_r = imagecreatefrompng($src);
        break;

    default:
        $img_r = imagecreatefromjpeg($src);
        break;
}

$dst_r = ImageCreateTrueColor($targ_w,$targ_h );

imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
    $targ_w,$targ_h,$_POST['w'],$_POST['h']);

switch ($types[$type]) {
    case 'jpeg':
        imagejpeg($dst_r, $save_to, 90); //90 = jpeg quality
        break;
    case 'gif':
        imagegif($dst_r, $save_to);
        break;
    case 'png':
        imagepng($dst_r, $save_to);
        break;
    default:
        imagejpeg($dst_r, $save_to, 90); //90 = jpeg quality
        break;
}

imagedestroy($dst_r);
?> 
```

但我想以 CodeIgniter 的方式做到这一点。

到目前为止，这是我想出的：

```
<?php
$img_config = array(
    'source_image'      => $src,
    'new_image'         => $save_to,
    'maintain_ratio'    => false,
    'width'             => $targ_w,
    'height'            => $targ_h,
    'x_axis'            => $_POST['x'],
    'y_axis'            => $_POST['y']
);

$this->load->library('image_lib',$img_config);
//$this->image_lib->resize();
$this->image_lib->crop();
?> 
```

问题是，它从位置裁剪，但它不会调整大小（就像我设置了一个更大的裁剪正方形一样）。它只从给定位置裁剪。

我也在项目中使用[image_moo](http://www.matmoo.com/digital-dribble/codeigniter/image_moo/)库，但我也无法成功。

**编辑：** 在 Image_moo 中，这是我到目前为止提出的代码：

```
$this->image_moo
                ->load($src)
                ->crop($_POST['x'],$_POST['y'],($_POST['x']+$_POST['w']),($_POST['y']+$_POST['h']))
                ->resize($targ_w,$targ_h)
                ->save($save_to,true); 
```

问题是，当我使用调整大小参数时，它会完全忽略裁剪线并调整整个图像的大小。如果我之前调整大小并稍后调用裁剪，它就会失败。我可以通过使用两个我不喜欢的 image_moo 调用来克服它。

这也不起作用：

```
$this->image_moo
                ->load($src)
                ->crop($_POST['x'],$_POST['y'],($_POST['x']+$_POST['w']),($_POST['y']+$_POST['h']))
                //->resize($targ_w,$targ_h)
                ->save($save_to,true)
                ->resize($targ_w,$targ_h)
                ->save($save_to,true); 
```

例如：这样工作：

```
$this->image_moo
                ->load($src)
                ->crop($_POST['x'],$_POST['y'],($_POST['x']+$_POST['w']),($_POST['y']+$_POST['h']))
                //->resize($targ_w,$targ_h)
                ->save($save_to,true);
            $this->image_moo
                ->load($save_to)
                ->resize($targ_w,$targ_h)
                ->save($save_to,true); 
```

那么如何通过调用 image_moo 或 CI image_lib 以 CodeIgniter（或 image_moo）方式调整给定 x/y 偏移量的大小+裁剪？

您可能应该问我为什么担心两次调用它。嗯，PQ 很重要，我很担心，因为调用它两次会降低图像质量。

提前致谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T20:50:36.713

除了一个逻辑之外，您给定的 Codeigniter 代码是可以的：您正在操作并输出到同一个图像文件两次，因此您的输出文件会被原始文件的最后一次更改覆盖。

我相信这是 CI 的 Image_Lib 类的一个限制，因为每个操作都是单独完成的——没有办法一次性“调整大小和裁剪”。

您必须在每个操作之间重新初始化 Image_Lib 类，以确保在最后一个操作的输出文件上调用下一个操作。

```
$img_config = array(
    'source_image'      => $src,
    'new_image'         => $save_to,
    'maintain_ratio'    => false,
    'width'             => $targ_w,
    'height'            => $targ_h,
    'x_axis'            => $_POST['x'],
    'y_axis'            => $_POST['y']
);

$this->load->library('image_lib', $img_config);
$this->image_lib->resize();

// Now change the input file to the one that just got resized
// See also $this->image_lib->clear()
$img_config['source_image'] = $save_to;
$this->image_lib->initialize($img_config); 

$this->image_lib->crop(); 
```

您还可以使用两个不同的配置数组：

```
$this->load->library('image_lib');

$this->image_lib->initialize(array(
    'source_image'      => $src,
    'new_image'         => $save_to,
    'maintain_ratio'    => false,
    'width'             => $targ_w,
    'height'            => $targ_h,
));
$this->image_lib->resize();

$this->image_lib->clear();

$this->image_lib->initialize(array(
    'source_image'      => $save_to,
    'x_axis'            => $_POST['x'],
    'y_axis'            => $_POST['y']
));
$this->image_lib->crop(); 
```

或者，您可以先[创建](http://www.php.net/manual/en/function.copy.php)图像文件的副本，然后在每次调用图像库类时对其进行操作，从而省去使用 new 重新初始化的麻烦`source_image`：

```
copy($src, $save_to);
$this->load->library('image_lib', array(
    'source_image'      => $save_to,
    'maintain_ratio'    => false,
    'width'             => $targ_w,
    'height'            => $targ_h,
    'x_axis'            => $_POST['x'],
    'y_axis'            => $_POST['y']
));
$this->image_lib->resize();
$this->image_lib->crop(); 
```

# python - `if False in [a, b, c, d]` 中的任何主动伤害

> ID：13510284
> 
> 赞同：4
> 
> 时间：2012-11-22T10:09:38.883
> 
> 标签：python

使用有什么积极的危害`if False in [a, b, c, d]`吗？

它减少了代码的大小，并且可以在解释器中工作。但是这种情况会造成任何积极的伤害吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:20:06.183

没有害处：

```
if False in [a, b, c, d] 
```

它或多或少相当于：

```
for i in [a, b, c, d]:
    if i == False:
        return True
return False 
```

但它只检查文字`False`对象的存在。它不检查“虚假”的对象，即它们的行为类似于`False`条件`if`。其他虚假值的示例是空字符串、空列表或`None`.

有关详细信息，请参阅文档：[真值测试](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)

如果您只想检查列表是否包含任何虚假元素，请改用：

```
if not all([a, b, c, d]) 
```

看起来像：

```
for i in [a, b, c, d]:
    if not i:
        return True
return False 
```

这通常是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T10:10:34.953

不，这种情况*通常*不会造成任何伤害。

`in`比较运算符不会改变任何东西。如果任何变量`a`,或确实是or `b`，则测试将成功，否则将失败（返回）。（临时）收集到列表中的四个变量本身不会受到影响。`c``d``0``False``False`

（为什么`0`？因为`bool`是 and 的子类，`int`在`False == 0`python`True`中。所以`False in [0]`也是`True`。在你的解释器中尝试一下；`issubclass(bool, int)`返回`True`，然后尝试`True + 1`更多惊喜）。

一个例外是，如果有人错误地`__eq__`在自定义类上创建了一个相等挂钩，从而*改变*了实例的状态。这将是该自定义类中的一个大错误，而不是特定于`in`语句本身的任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T10:18:22.420

`False in [0,0,0]`即使列表中没有实际值也返回 true `False`（尽管正如评论者指出的那样`0 == False`）。

如果您关心这类事情，则必须使用以下方法检查对象身份：

```
any(x is False for x in [a, b, c, d]) 
```

# c# - 错误：DEP0500：无法删除文件夹“...\Debug\AppX”。拒绝访问路径“resources.pri”

> ID：13510285
> 
> 赞同：6
> 
> 时间：2012-11-22T10:09:41.533
> 
> 标签：c#, exception-handling, windows-8, .net-4.5, access-denied

当我尝试在本地计算机上调试我的 WinRT 应用程序时，我经常收到此错误：

```
Error : DEP0500 : The folder "C:\Users\akku\VS2012Projects\ProjectName\bin\x86\Debug\AppX" could not be deleted. 
Access to the path 'resources.pri' is denied. 
```

修复它的唯一方法是重新启动 Windows 8。谷歌搜索了一下，想知道没有找到解决方案。

经过更多测试后，我意识到这只发生在运行或调试解决方案时。问题似乎总是无法删除之前运行的AppX文件夹。也许执行最后一次应用程序运行的调试器或 Visual Studio 进程并没有停止访问这里的某些资源？

*我刚刚使用的一个快速技巧是从配置管理器创建第二个发布和调试配置。当问题出现时，我可以切换到另一个配置，问题暂时解决。*我仍然想要一个关于如何通过适当的解决方案规避这个问题的真正可行的答案。

有没有人经历过这个并找到了*更好*的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:52:37.580

问题是我正在使用带有 Parallels Desktop 和虚拟化 Windows 8 的 Mac。正如 Ryan Joy 在我的问题下的评论中指出的那样，可以在[Parallels 论坛](http://forum.parallels.com/showthread.php?t=267785)上找到解决方法。

“由于与主机操作系统共享来宾应用程序的功能，.pri 文件被锁定。作为一种解决方法，我禁用了应用程序共享功能。我建议你试试这个。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-07T07:11:23.800

如果您有`Live Share`扩展，请禁用它并尝试调试。

# android - 将 alpha 值设置为 ImageView

> ID：13510294
> 
> 赞同：1
> 
> 时间：2012-11-22T10:10:05.467
> 
> 标签：android

我正在使用以下代码来设置 ImageView 的 alpha 值（这应该与所有设备兼容，甚至是 API 11 之前的设备）

```
AlphaAnimation alpha = new AlphaAnimation(0.85F, 0.85F);
alpha.setDuration(0); // Make animation instant
alpha.setFillAfter(true); // Tell it to persist after the animation ends
ImageView view = (ImageView) findViewById(R.id.transparentBackground);
view.startAnimation(alpha); 
```

但是，当我在运行姜饼及以下的设备上打开应用程序时，imageView 是完全透明的，但在蜂窝或更高版本上运行的设备上，alpha 值设置为 .85，并且 imageView 完美显示。

如何在gingerBread 上也能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:07:32.933

实现此功能的一种简单方法是使用 NineOldAndroids 项目，该项目将 Honeycomb 动画 API 移植回包括 AlphaAnimation 在内的旧版本。请参阅[http://nineoldandroids.com/](http://nineoldandroids.com/)。

因此，使用 ObjectAnimator 将是这样的：

```
ObjectAnimator.ofFloat(imageView, "alpha", .85f).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:15:30.293

好的，让我们创建一个自定义图像视图，它通过覆盖 onDraw 解决了这个问题 :)

AlphaImageView.java

```
package com.example.shareintent;

import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.widget.ImageView;

public class AlphaImageView extends ImageView {

    public AlphaImageView(Context context) {
        super(context);
    }

    public AlphaImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public AlphaImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void onDraw(Canvas canvas){
        canvas.saveLayerAlpha(0, 0, canvas.getWidth(), canvas.getHeight(), 0x66, Canvas.HAS_ALPHA_LAYER_SAVE_FLAG);
        super.onDraw(canvas);
    }

} 
```

你的活动 xml

```
<com.example.shareintent.AlphaImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="52dp"
        android:layout_marginTop="50dp"
        android:src="@drawable/ic_launcher" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:13:18.510

你有一个函数来做（由于新视图处理透明度的通用方式已被弃用，但可以在 Android 2.x 上安全使用）：

```
myImageView.setAlpha(128); // range [0, 255] 
```

不过，您必须实现自定义动画。这可以通过处理程序来完成，例如：

```
Handler animationHandler = new Handler() {
   public void handleMessage(Message msg) {
       int currentAlpha = msg.arg1;
       int targetAlpha = msg.arg2;

       if (currentAlpha==targetAlpha) return;
       else {
           if (currentAlpha<targetAlpha) --currentAlpha;
           else ++currentAlpha;

           imageView.setAlpha(currentAlpha);

           sendMessageDelayed(obtainMessage(0, currentAlpha, targetAlpha), 10);
       }
   }
}

// Show imageview
animationHandler.sendMessage(animationHandler.obtainMessage(0, currentAlpha, 255));

// Hide imageview
animationHandler.sendMessage(animationHandler.obtainMessage(0, currentAlpha, 0)); 
```

*   上面的代码不是内存泄漏安全的（处理程序应该是静态的，并且应该保持对上下文和视图的弱引用
*   您应该改进它以允许控制动画速度，...
*   您需要保留当前的 ​​alpha，因为 imageView 没有 getAlpha 方法。

# android - 像 Expedia 一样的 Android 日历

> ID：13510305
> 
> 赞同：0
> 
> 时间：2012-11-22T10:10:43.517
> 
> 标签：android, user-interface, calendar, components

我正在构建应用程序，

我想做的是构建像 expedia 应用程序这样的日历。

这是屏幕截图：

![图像](../Images/19bff8dca4dc946a20c392bdb34bcae7.png)

你们知道我应该从基础使用什么组件以及在选择几个框时应该使用什么事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:19:50.353

您可以选择使用向后移植到 2.1 的 4.0 calendarView（[这里的项目](https://github.com/SimonVT/android-calendarview)），或者自己实现自己的 calendarView 扩展 ViewGroup。这并不像你想象的那么难:)

# jsp - 如何在jsp文件中引用外部jar

> ID：13510309
> 
> 赞同：2
> 
> 时间：2012-11-22T10:10:47.480
> 
> 标签：jsp, tomcat, jdbc, jar

我有四个 jsp 文件。其中一些使用 JDBC jar 文件。我把它全部放在文件夹 webapps/hello 中，就像这样。

```
index.jsp
login.jsp
userloginmid.jsp
userstatus.jsp

/WEB-INF/
--------/lib/postgres ....jar 
```

但这是行不通的。

我遇到异常：java.lang.ClassNotFoundException: org.postgresql.Driver

我不想使用 ECLIPSE 或类似的东西。

只是文本编辑器。

感谢。

# android - 了解无账户添加联系人的机制

> ID：13510312
> 
> 赞同：2
> 
> 时间：2012-11-22T10:11:01.633
> 
> 标签：android, android-contentprovider, android-contacts

根据官方文档：

> Contacts Provider 将所有帐户类型和帐户名称的原始联系人行组合在一起以形成一个联系人。

但是，如果添加到用户设备的联系人只添加了一个手机号码，并且其所有者没有将其绑定到用户的某些帐户怎么办？它是如何添加到联系人中的，`ContactsContract.RawContacts`表中是否有任何“原始联系人”记录？

# c++ - 使用 `backticks` 而不是 Pipe | 读取值 C++

> ID：13510315
> 
> 赞同：0
> 
> 时间：2012-11-22T10:11:02.920
> 
> 标签：c++, linux, shell

在 shell 上，可以使用管道将输出提供给另一个程序。

例如 ：：：

```
ps axu | grep someprocess 
```

现在我想编写一个也接受这些管道的 C++ 程序。

我找到了类似的解决方案。

```
using namespace std;

int main()
{
    string mypipe;
    if(cin);
    {
        cin >> mypipe;
        cout << mypipe << endl;
    }
    return 0;
} 
```

现在我想要，我可以使用反引号调用我的函数。

例如，我正在使用这样的 shell 构造。

```
./myprog.bin `./otherprog.bin someparameter` 
```

如何使用参数将 otherprog.bin 生成的输出读取到我的程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:13:24.167

将命令行参数添加到 main 函数，如下所示：

```
int main( int argc, const char* argv[] ) 
```

`argc`是参数计数，`argv`包含它们的表。

# android - android需要的分页示例

> ID：13510316
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:11:03.483
> 
> 标签：android, android-layout

我想要 TableView 的示例并基于按钮单击实现页面导航，例如 NExt 和 prev 按钮。请为我提供 android 中 TableView/TableLayout 分页的链接。我是一个新人，所以请提供对布局进行解释的链接，我可能听起来含糊不清，但我没有其他选择可以在这里询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-10T12:42:35.200

请在此处找到完整的分页示例

这是我的活动课

```
 public class TestActivity extends AppCompatActivity {

        RecyclerView recyclerView;
        LinearLayoutManager layoutManager;
        TestAdapter testAdapter;
        List<TestM> testMS;

        private boolean loading = true;
        int pastVisiblesItems, visibleItemCount, totalItemCount;

        int testLast = 0;
        ProgressBar progressbar;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_test);

            setInit();
        }

        public void setInit() {

            recyclerView = findViewById(R.id.recyclerView);
            progressbar = findViewById(R.id.progressbar);

            layoutManager = new LinearLayoutManager(TestActivity.this, LinearLayoutManager.VERTICAL, false);
            recyclerView.setLayoutManager(layoutManager);

            testMS = new ArrayList<>();

            for (int i=0; i<12; i++){

                testLast = i;
                testMS.add(new TestM("alex"+i));
            }

            testAdapter = new TestAdapter(TestActivity.this, testMS, recyclerView);
            recyclerView.setAdapter(testAdapter);

            recyclerView.addOnScrollListener(new RecyclerView.OnScrollListener() {
                @Override
                public void onScrolled(RecyclerView recyclerView, int dx, int dy) {

                    progressbar = findViewById(R.id.progressbar);

                    if (dy > 0)
                    {
                        visibleItemCount = layoutManager.getChildCount();
                        totalItemCount = layoutManager.getItemCount();
                        pastVisiblesItems = layoutManager.findFirstVisibleItemPosition();

                        if (loading) {
                            if ((visibleItemCount + pastVisiblesItems) >= totalItemCount-1) {
                                loading = false;
                                Log.v("...", "Last Item Wow !");

                                progressbar.setVisibility(View.VISIBLE);
                                new Handler().postDelayed(new Runnable() {
                                    @Override
                                    public void run() {
                                        loadNextDataFromApi();
                                    }
                                }, 1000);

                            }
                        }
                    }
                }
            });

        }

        public void click(int position) {

            TestAdapter.ViewHolder viewHolder = (TestAdapter.ViewHolder) recyclerView.findViewHolderForAdapterPosition(position);

            viewHolder.text_color.setTextColor(Color.parseColor("#245251"));
        }

        public void loadNextDataFromApi() {

            loading = true;

            int j = testLast+1;
            int k = j+5;

            for (int i = j; i < k; i++){
                testLast = i;
                testMS.add(new TestM("alex"+i));
            }

            progressbar.setVisibility(View.GONE);
            testAdapter.notifyDataSetChanged();
        }
    } 
```

这是我的 Testactivity xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context="com.production.myextracode.recyclerview.TestActivity">
        <android.support.v7.widget.RecyclerView
            android:id="@+id/recyclerView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/progressbar"/>
        <ProgressBar
            android:id="@+id/progressbar"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_below="@+id/cv_test"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp"
            android:visibility="gone"
            android:layout_alignParentBottom="true"/>
    </RelativeLayout> 
```

这是适配器

```
 package com.production.myextracode.recyclerview;

    import android.support.v7.widget.CardView;
    import android.support.v7.widget.RecyclerView;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.TextView;

    import com.production.myextracode.R;

    import java.util.List;

    public class TestAdapter extends RecyclerView.Adapter<TestAdapter.ViewHolder>  {

        private TestActivity context;
        private List<TestM> testMS;
        private RecyclerView recyclerView;

        public TestAdapter(TestActivity context, List<TestM> testMS, RecyclerView recyclerView) {
            this.context = context;
            this.testMS = testMS;
            this.recyclerView = recyclerView;

        }

        @Override
        public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {

            View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_test,parent,false);
            ViewHolder rcv = new ViewHolder(itemView);
            return rcv;
        }

        @Override
        public void onBindViewHolder(final ViewHolder holder, final int position) {

            TestM model = testMS.get(position);

            holder.text_color.setText(model.getName());

            holder.itemView.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {

                    context.click(position);
                }
            });
        }

        @Override
        public int getItemCount() {
            return testMS.size();
        }

        public class ViewHolder extends RecyclerView.ViewHolder {

            TextView text_color ;
            CardView cv_test;

            private ViewHolder(View itemView) {

                super(itemView);

                text_color      = itemView.findViewById(R.id.tv_test);
                cv_test     = itemView.findViewById(R.id.cv_test);
            }
        }
    } 
```

适配器的项目 xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:card_view="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp">
        <android.support.v7.widget.CardView
            android:id="@+id/cv_test"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            card_view:cardCornerRadius="10dp"
            card_view:cardPreventCornerOverlap="false"
            card_view:cardUseCompatPadding="false">
            <TextView
                android:id="@+id/tv_test"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="10dp"
                android:text="Test"
                android:textSize="16sp" />
        </android.support.v7.widget.CardView>
    </RelativeLayout> 
```

这是模型类

```
 package com.production.myextracode.recyclerview;

    public class TestM {

        String name;

        public TestM(String name) {

            this.name = name;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }
    } 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:14:05.000

你可以参考这个 url，[iOS 和 Android 的无限加载表视图。](https://gist.github.com/810391)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T10:19:16.280

请检查以下链接：

[链接1](http://paulononaka.wordpress.com/2011/03/19/how-to-implement-a-paging-feature-in-android/)

[链接2](https://github.com/ysamlan/horizontalpager)

![在此处输入图像描述](../Images/21a9806ac794a405ff4b06a141d8f902.png)

链接提供了带有布局的源代码。我已经突出显示了该部分，请检查页面。

# css - 一个 div 和之后的 html 的其余部分不在 IE 中显示

> ID：13510321
> 
> 赞同：1
> 
> 时间：2012-11-22T10:11:26.650
> 
> 标签：css, internet-explorer

我有一个网页正在设计为响应式网页设计。在那里我有一个 div，其中包含电子邮件注册表单的注册按钮。在 IE 中，它之后的内容不显示。以下是有问题的html代码..

```
<div class="Sign_Up">
    <button id="submit" class="bt btn btn-alt" type="submit">
</div> 
```

当我删除此代码时，该网站工作正常，该课程的 CSS 就像这样

```
.Social_Base .Social_Part .Detail_Box .Sign_Up .bt {
    background: url("http://media.expedia.com/media/content/expaus/images/socialbar/Social_main_bg.png") no-repeat scroll -374px -43px transparent;
    border: 0 none;
    cursor: pointer;
    display: block;
    height: 33px;
    margin-left: 18px;
    text-indent: -9999px;
    width: 122px;
} 
```

请帮助我..它的ie9 ..应该没问题..我使用了完整的图像并将其定位以获取注册按钮的图像..如果有的话1可以帮助..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:14:49.080

尝试添加关闭按钮标签。

```
</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:20:58.167

您必须填写此标签：

```
<div class="Sign_Up">
    <button id="submit" class="bt btn btn-alt" type="submit">your text</button>
</div> 
```

# winforms - 如何在 C#.net winforms 中验证文本框

> ID：13510322
> 
> 赞同：2
> 
> 时间：2012-11-22T10:11:28.173
> 
> 标签：winforms, c#-4.0, textbox, validation, errorprovider

我有一个表单，我需要在其中验证名字、中间名、姓氏、emailId、日期、手机号码等文本框。验证应该在用户开始在文本框中输入时进行。如果用户输入数字代替文本和文本代替数字，errorprovider 应该在文本框下显示消息。我了解了隐式验证和显式验证，但我觉得最好使用隐式验证，因为它在用户失去对文本框的关注或转移到另一个文本框时会及时提供错误提供程序。我已经用明确的验证码提出了这种问题，但没有人回复我。所以我很容易获得帮助。在发布这个问题之前，不要认为我没有做足够的研究。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:34:23.367

您应该查看文本框中的 TextChanged 事件。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)

> 如果通过编程修改或用户交互更改了 Text 属性，则会引发此事件。

我会做这样的事情

```
private void TextBoxExample_TextChanged(object sender, EventArgs e)
{
   TextBox box = sender as TextBox;

   if (box.Text.Contains("Example"))
   {
      LabelError.Text = "Error";
   }
   else
   {
      LabelError.Text = string.Empty;
   }
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T11:20:26.280

您还可以使用 keyPressEvent 来避免在文本框中输入数值，它不允许在文本框中输入数字字符

```
private void textboxName_KeyPress(object sender, KeyPressEventArgs e)
    {
        //not allowing the non character values
        if (!char.IsLetter(e.KeyChar) && !char.IsControl(e.KeyChar) && !(e.KeyChar == (char)Keys.Back) && !(e.KeyChar == (char)Keys.Left) && !(e.KeyChar == (char)Keys.Right) && !(e.KeyChar == (char)Keys.Space) && !char.IsPunctuation(e.KeyChar))
        {
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T11:30:07.457

如果您要进行非常具体的验证，Marc 的回答是正确的。但是，如果您只确保“输入数字而不是字母”或“输入字母而不是数字”的事情，MaskedTextBox 会比您做得更好（用户将无法回答不正确的数据，您仍然可以警告他们通过处理 MaskInputRejected 事件）

[http://msdn.microsoft.com/en-us/library/kkx4h3az(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/kkx4h3az(v=vs.100).aspx)

# linux - 如何在linux中打印信号名称（不是descr）

> ID：13510326
> 
> 赞同：1
> 
> 时间：2012-11-22T10:11:42.883
> 
> 标签：linux, signals, libc

我需要在 linux 中按其编号打印信号名称，但 strsignal(9) 返回信号描述（“Killed”）而不是名称 - SIGKILL。除了在源代码中插入预定义的数组外，有什么方法可以获得这样的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:57:09.970

我想不出任何标准功能。您可以使用脚本生成函数：

```
echo "#include <signal.h>" |\
  g++ -E -dD -xc++ - |\
  awk '$2~/^SIG[A-Z]/ && $3~/[0-9]+/ { print "case "$2": return \""$2"\";" }' \
  > signal_to_str_cases.inc 
```

然后在代码中：

```
#include <signal.h>

char const* signal_to_str(int signo) {
    switch(signo) {
    #include "signal_to_str_cases.inc"
    default: return "<unknown signo>";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T15:37:10.290

上面的 scriptway 解决方案确实不错，但是，当您有多个具有相同编号的信号时，就会出现问题。在这种情况下，代码将无法编译，并且会给您一个错误，例如“重复大小写值”。解决它的一种方法是不为重复值生成案例：

```
echo "#include <signal.h>" |\
    g++ -E -dD -xc++ - |\
    awk '$2~/^SIG[A-Z]/ && $3~/[0-9]+/ && !seen[$3]++ { print "case "$2": return \""$2"\";" }' \
    > signal_to_str_cases.inc 
```

# java - Java - 以原子方式处理文件

> ID：13510328
> 
> 赞同：2
> 
> 时间：2012-11-22T10:11:44.747
> 
> 标签：java, concurrency, io

我正在编写一个 Java 应用程序，它应该（除其他外）生成一个整数序列，从给定的数字开始（例如 900、901、902、903，...... - 900 作为参数给出）。

1.  当应用程序关闭然后重新启动时，当前序列值应该保持不变。
2.  当应用程序的多个实例同时运行时，它们应该共享相同的序列（例如，当单独运行时，所有实例生成的序列的并集应该与单个实例生成的序列相同）。
3.  管理员应该能够关闭应用程序并手动重置当前序列值。
4.  如果应用程序崩溃，该文件应该始终可供其他实例访问，以便它们可以继续工作。

决定应用程序将使用仅包含当前号码的纯文本文件。当应用程序启动时，它会检查文件是否已经存在，如果不存在，则创建它并将初始编号写入其中。每次应用程序要生成一个新数字时，它应该读取文件中的当前值，将其用作当前序列值，然后增加文件中的数字。

我现在想，如何原子地做这两件事（关于同一应用程序的其他运行实例）：

*   检查文件是否存在，如果不存在，则创建它并在其中写入一个数字
*   读取文件的当前内容，然后更改它

关于如何以其他方式实现所列目标的建议也值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:32:19.587

Using a database sequence would be a simple and solid solution but you've decided it will be a file. Then you'll need to manage the distributed synchronization yourself. There are systems offering that, like Terracotta or Hazelcast. I would definitely use one of them instead of implementing a new one based on locking a file. Why not a database?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:39:01.430

我会在客户端写入文件时创建一个锁定文件，并在写入过程完成后立即删除该锁定文件。

当锁定文件存在时，其他客户端将不会读取或写入 db 文件并等待锁定文件被删除 - 允许同时读取。

你的问题：

1.  [关机挂钩](https://stackoverflow.com/questions/914666/how-to-capture-system-exit-event)
2.  通过使用锁文件机制来解决
3.  每个客户端都可以在 db 文件旁边创建一个 ID 文件，当管理员删除该文件时，客户端将关闭。
4.  取决于：如果关闭挂钩受到尊重，这应该不是问题，但是如果客户端立即被杀死，您就没有任何机会进行清理。

问题：

*   如果对许多客户端尝试编写 db 文件，则无法确保首先为第一个客户端提供服务。
*   如果客户端在写入过程中崩溃并且无法清理锁定文件会怎样？
*   What happens if two clients try to create the lock file at the same time? I think this depends on the os filesystem.

# java - 如何将字符串值存储在 mongo db 中作为 json 对象？

> ID：13510330
> 
> 赞同：2
> 
> 时间：2012-11-22T10:11:49.233
> 
> 标签：java, json, mongodb

我从 UI 获取数据如下，以下所有输入数据都是字符串。

cust_id : temp001 cust_chart_id : 测试 default_chart : false chart_pref_json : {range:6m,chart_type:candlestick,indicators:{},period:Daily,futurepadding:20} }

我正在尝试将 chart_pref_json 存储在 mongodb 中。这个 chart_pref_json 对象实际上是作为下面的字符串存储在 db 中的，

```
{ "_id" : ObjectId("50aca4caf5d0b0e4d31ef239"), "cust_id" : "temp001", "cust_chart_id" : "testing", "default_chart" : "false", "created_at" : NumberLong("1353491658551"), **"chart_pref_json" : "{range:6m,chart_type:candlestick,indicators:{},period:Daily,futurepadding:20}" }** 
```

但我实际上希望将此 chart_pref_json 存储为 json 对象，如下所示。

```
{ "_id" : ObjectId("50aca4caf5d0b0e4d31ef239"), "cust_id" : "temp001", "cust_chart_id" : "testing", "default_chart" : "false", "created_at" : NumberLong("1353491658551"), **"chart_pref_json" : {range:6m,chart_type:candlestick,indicators:{},period:Daily,futurepadding:20} }** 
```

任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:24:38.970

当您将 JSON 代码作为字符串时，您首先必须解析 JSON 代码，然后将生成的 JSON 对象转换为 BSON 对象。

您可以使用MongoDB 附带的类[com.mongodb.util.JSON 。](http://api.mongodb.org/java/2.6/com/mongodb/util/JSON.html)[这是一个教程](http://www.mkyong.com/mongodb/java-mongodb-convert-json-data-to-dbobject/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-03T09:36:21.450

由于这是一个 Java 问题，以下是使用 MongoDB Java 驱动程序插入 JSON 的方法：

```
import com.mongodb.MongoClient;
import com.mongodb.MongoClientURI;
import com.mongodb.client.MongoDatabase;
import org.bson.Document;

public class Main {
    public static void main(String[] args) {
        MongoClientURI uri = new MongoClientURI("mongodb://myuser:mypsw@localhost:27017/mydb");
        MongoClient client = new MongoClient(uri);
        MongoDatabase db = client.getDatabase("mydb");
        String json =
                "{\n" +
                "    \"_id\" : \"MyId\",\n" +
                "    \"foo\" : \"bar\"\n" +
                "}";
        db.getCollection("mycoll").insertOne(Document.parse(json));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:21:07.617

在将其设置为应用程序中的字段之前，您需要使用您的语言的 JSON 解码能力将其编码为对象。在 PHP 中，你会这样做：

```
$db->collection->insert( array(
    'cust_id' => 'temp001',
    … your other fields …
    'chart_pref' => json_decode( $varContainingJson )
) ); 
```

对于 Java，以下示例将有所帮助：

```
BasicDBObject obj = JSON.parse( varContainingJson ); 
```

在[https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/Y3KyG_ZSfJg中有描述](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/Y3KyG_ZSfJg)

# mysql - 当使用mysql的另一个字段发生更改时如何将字段值更改为NULL

> ID：13510336
> 
> 赞同：2
> 
> 时间：2012-11-22T10:12:09.303
> 
> 标签：mysql, database

我是mysql的新手。谁能帮我解决这个问题，

“我的表中有以下列 emp id、name、leaveto、leavefrom 和 status。如果员工申请休假，他的经理可以接受或拒绝它。如果经理接受了休假，那么提交的状态将包含以下值批准（与拒绝相同）。我想知道的是，当员工第二次申请请假时，请假和请假列更新但状态字段保持不变。“

当 leaveto 和 leavefrom 列有更新时，是否可以将状态字段设置为 NULL。

这将通过比较员工的 ID 和经理 ID 来更新员工的状态字段（批准/拒绝）。如果该员工属于经理“A”，那么只有经理“A”可以批准/拒绝它。

```
"UPDATE leave_details join managerlogin on managerlogin.manager_id=leave_details.manager_id SET leave_details.leave_status='Approved' where (employee_id='$myemployee_id' and managerlogin.manager_id= '".$_SESSION['mymanager_id']."' )"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:16:39.350

是的，可以将值更新为 NULL。

```
Update tablename set columnname=null where put your condition... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:16:52.400

你可以

```
update mytable
set status = null,
    leaveto = ...
where emp_id = 17; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:18:14.330

这是要设置的`NULL`代码`Satatus`

```
UPDATE mytable SET status = null WHERE empid = '17' 
```

试试看...

* * *

将条件放在更新之前

```
if($_POST['leavefrom'] || $_POST['leaveto'])
{
    $status == "NULL";
}

UPDATE mytable SET status = '$status' WHERE empid = '17' 
```

通过使用此条件，您可以在 leavefrom 和 leaveto 有值时将 Null 值设置为 Status。

# asp.net-mvc - Entity Framework 5 Migrations：设置数据库的初始迁移和单一种子

> ID：13510341
> 
> 赞同：28
> 
> 时间：2012-11-22T10:12:22.267
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, ef-code-first, entity-framework-5

我有一个 MVC4 应用程序，我最近升级到了 Entity Framework 5，我正试图将我们的数据库转移到使用从删除和创建每次运行的开发风格的迁移。

这是我在应用程序启动功能中所做的。

```
protected void Application_Start()
{
    Database.SetInitializer(
        new MigrateDatabaseToLatestVersion< MyContext, Configuration >() );
    ...
} 
```

我在我的存储库项目上运行了该`Enable-Migrations`命令，我认为这会创建一个初始迁移文件，但是它创建的唯一文件是`Configuration`

当我删除数据库时，它首先通过代码按预期创建它，并从配置文件中为数据库播种。在配置文件中，我将所有`Add()`功能更改为`AddOrUpdate()`

但是，`Configuration`每次网站启动并一次又一次地复制所有种子数据时，它都会在我的文件中运行种子功能。

我想象它会创建一个`initial migration`文件，因为我读过的博客建议它会，我可以把种子数据放在那里，但它没有

谁能解释我应该如何在代码中设置数据库以便它只播种一次？

* * *

[链接：我关注的迁移博客文章](http://weblogs.asp.net/dotnetstories/archive/2012/11/20/looking-into-entity-framework-code-first-migrations.aspx)

* * *

虽然这对于使用 EF migrate.exe 非常有趣，但我已经切换到使用[Roundhouse](https://github.com/chucknorris/roundhouse)来运行迁移。我仍然使用 EF 来基于模型构建我的迁移，但我编写了一个小控制台应用程序来将迁移写入 SQL 文件。然后我使用 Roundhouse 通过我的 rake 构建脚本自己执行迁移。涉及的过程要多一些，但它比在应用程序启动时使用 EF 动态执行迁移要稳定得多。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-04T12:24:47.747

这已被证明是一个受欢迎的帖子，所以我根据其他人的反馈对其进行了更新。要知道的主要事情是 Configuration 类中的 Seed 方法在每次应用程序启动时都会运行，这不是模板方法中的注释所暗示的。请参阅 Microsoft 某人对这篇[文章](https://stackoverflow.com/questions/10822618/confusion-over-ef-auto-migrations-and-seeding-seeding-every-program-start)的回答，了解为什么会这样 - 感谢 Jason Learmouth 发现这一点。

如果您像我一样，只想在有任何未决迁移的情况下运行数据库更新，那么您需要做更多的工作。您可以通过调用 migrator.GetPendingMigrations() 来确定是否存在待处理的迁移，但是您必须在 ctor 中执行此操作，因为在调用 Seed 方法之前会清除待处理的迁移列表。Migrations.Configuration 类中的实现代码如下：

```
internal sealed class Configuration : DbMigrationsConfiguration<YourDbContext>
{ 
    private readonly bool _pendingMigrations;

    public Configuration()
    {
        // If you want automatic migrations the uncomment the line below.
        //AutomaticMigrationsEnabled = true;
        var migrator = new DbMigrator(this);
        _pendingMigrations = migrator.GetPendingMigrations().Any();
    }

    protected override void Seed(MyDbContext context)
    {
        //Microsoft comment says "This method will be called after migrating to the latest version."
        //However my testing shows that it is called every time the software starts

        //Exit if there aren't any pending migrations
        if (!_pendingMigrations) return;

        //else run your code to seed the database, e.g.
        context.Foos.AddOrUpdate( new Foo { bar = true});
    }
} 
```

我应该指出，有些人建议将种子代码放在实际的“向上”迁移代码中。这可行，但意味着您需要记住将种子代码放入每个新的迁移中，并且很难记住，所以我不会这样做。但是，如果您的种子随着每次迁移而改变，那么这可能是一个好方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T13:02:57.163

您可以手动添加迁移并使用您想要的任何种子代码填充它？在包管理器控制台中运行：

```
Add-Migration [Name] 
```

然后，您可以编辑在迁移文件夹中为您创建的文件。

在我的项目中，我实际上是在上下文配置的 Seed 方法中像 Richard 一样进行播种。我真的没有偏好。但是迁移应该更有效，因为应用程序不需要在应用程序启动时检查数据库中是否存在行。只需要检查迁移是否已经运行，应该会更快。

```
internal sealed class Configuration : DbMigrationsConfiguration<MyContext>
{
    public Configuration()
    {
        // If you want automatic migrations as well uncomment below.
        // You can use both manual and automatic at the same time, but I don't recommend it.
        //AutomaticMigrationsEnabled = true;
        //AutomaticMigrationDataLossAllowed = true;
    }

    protected override void Seed(MyContext context)
    {
        //  This method will be called after migrating to the latest version.

        //  You can use the DbSet<T>.AddOrUpdate() helper extension method 
        //  to avoid creating duplicate seed data.

        context.FontFamilies.AddOrUpdate(
            f => f.Id,
            new FontFamily { Id = 1, PcName = "Arial" },
            new FontFamily { Id = 2, PcName = "Times New Roman" },
        }); 
```

我在 Global.asax 中使用它：

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        // Any migrations that haven't been applied before will
        // automatically be applied on Application Pool restart

        Database.SetInitializer<MyContext>(
            new MigrateDatabaseToLatestVersion<MyContext,
            MyApp.Migrations.Configuration>()
        );
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T10:18:29.587

这也是我过去一直想知道的事情。我的数据库中有某些表在我的 Seed 事件中填充，现在我只需检查其中一个表在 Seed 方法中是否为空。如果有行，则 Seed 方法不会运行。并非万无一失，但确实有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-19T12:11:45.623

[这个 SO question](https://stackoverflow.com/questions/10822618/confusion-over-ef-auto-migrations-and-seeding-seeding-every-program-start)的答案解释了为什么每次应用程序运行时 Seed 都会运行。

我使用 Jon Smiths 方法，但我已将检查待处理迁移语句放在 #if 块中，如下所示：

```
#if (!DEBUG)
            if (!_pendingMigrations) return;
#endif 
```

这样，当我调试 Seed 方法时，总是会运行以重新填充我的种子数据 - 当我在测试期间进行删除等时很有用，但在发布时我没有得到性能命中。

# c# - 让 Regex 停止查看 \n

> ID：13510348
> 
> 赞同：2
> 
> 时间：2012-11-22T10:12:47.097
> 
> 标签：c#, regex

我有以下字符串：

```
"\t Product:         ces DEVICE TYPE \nSometext" //between ":" and "ces" are 9 white spaces 
```

我需要解析“设备类型”部分。我正在尝试使用正则表达式来做到这一点。我使用这个表达式，它有效。

```
((?<=\bProduct:)(\W+\w+){3}\b) 
```

此表达式返回：

```
"         ces DEVICE TYPE" 
```

问题出在这里：有些设备有这样的字符串：

```
"\t Product:         ces DEVICETYPE \nSometext" 
```

如果我使用相同的表达式来解析设备类型，我会得到以下结果：

```
"         ces DEVICETYPE \nSometext" 
```

找到 \n 时，如何让我的正则表达式停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:37:25.973

In .NET you can use `RegexOptions.Multiline`. This changes the behaviour of `^` and `$`.
Rather than meaning the start and end of your string, they now mean start and end of any line within your string.

```
Regex r = new Regex(@"(?<=\bProduct:).+$", RegexOptions.Multiline); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:22:40.887

也许这个？

```
(?<=ces)[^\\n]+ 
```

如果您想要的只是 ces 之后和 \n 之前的内容，那就是..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:20:01.050

**你可以使用：**

```
(?m)((?<=\bProduct:).+) 
```

解释：

```
(?m)((?<=\bProduct:).+)

Match the remainder of the regex with the options: ^ and $ match at line breaks (m) «(?m)»
Match the regular expression below and capture its match into backreference number 1 «((?<=\bProduct:).+)»
   Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=\bProduct:)»
      Assert position at a word boundary «\b»
      Match the characters “Product:” literally «Product:»
   Match any single character that is not a line break character «.+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»

or

    ((?<=\bProduct:)[^\r\n]+) 
```

**解释**

```
((?<=\bProduct:)[^\r\n]+)

Match the regular expression below and capture its match into backreference number 1 «((?<=\bProduct:)[^\r\n]+)»
   Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=\bProduct:)»
      Assert position at a word boundary «\b»
      Match the characters “Product:” literally «Product:»
   Match a single character NOT present in the list below «[^\r\n]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
      A carriage return character «\r»
      A line feed character «\n» 
```

# shopify - 如何取消待处理的费用？

> ID：13510353
> 
> 赞同：0
> 
> 时间：2012-11-22T10:12:59.343
> 
> 标签：shopify

作为主体，我创建了一个 RecurringApplicationCharge 对象并想要销毁它。API 响应说对象应该在取消之前被激活，但对象处于挂起状态。我怎么能在没有注意到店主的情况下销毁对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:50:30.010

如果经常性的应用程序费用待处理，那么您可以不理会它，Shopify 将在 48 小时后将其删除。

# mysql - MySql 选择所需的指导

> ID：13510354
> 
> 赞同：1
> 
> 时间：2012-11-22T10:13:01.530
> 
> 标签：mysql, sql, select

嗨，我有一张这样的桌子

```
Activity     Date
---------------------
0          2012-11-20
1          2012-11-20
1          2012-11-20
1          2012-11-21
1          2012-11-21
0          2012-11-22 
```

我需要选择记录为

```
 Day-wise total   0's    1's    Date  
------------------------------------------
     3             1      2     2012-11-20
     2             0      2     2012-11-21
     1             1      0     2012-11-22 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:15:36.130

您需要的是一个`GROUP BY date`,`COUNT(Activity)`来获得按日总计和一个`CASE`表达式来旋转 1 和 0 的值。我`SUM`在这里使用过，但它的行为是`COUNT`这样的：

```
SELECT
  COUNT(Activity) AS "Day-wise total",
  SUM(CASE WHEN Activity = 0 THEN 1 ELSE 0 END) AS "0's",
  SUM(CASE WHEN Activity = 1 THEN 1 ELSE 0 END) AS "1's",
  `Date` AS "Date"
FROM Table
GROUP BY `Date`; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/7b429/6)

# c# - 获取 Windows Phone 用户帐户

> ID：13510355
> 
> 赞同：3
> 
> 时间：2012-11-22T10:13:02.190
> 
> 标签：c#, windows-phone, user-accounts

我正在尝试在 c# 中为 windows phone 获取 windows phone 用户帐户（live、facebook、twitter、linkedin ...），所以我发现了这个：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.userdata.account(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.userdata.account(v=vs.105).aspx)

我写了这段代码：

```
 public MainPage()
    {
        InitializeComponent();

        Account account = new Account();
        account.Kind = StorageKind.Facebook;
        MessageBox.Show(account.Kind.ToString());
        account.Name = EmailAddressKind.Personal.ToString();
        MessageBox.Show(account.Name);
    }

    public sealed class Account
    {
        public StorageKind Kind { get; internal set; }
        public string Name { get; internal set; }
    } 
```

但现在我被困住了，我无法获得我需要的电子邮件的价值，例如，谢谢

PS我说的是个人账户而不是联系人账户；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T19:55:26.300

无法从代码中检索用户的电子邮件地址 - 您可以提示他们输入与帐户关联的电子邮件（以使其更容易），但无法自行检索。

# silverlight - RIA 服务 - 从测试中调用 SaveChanges 的位置

> ID：13510361
> 
> 赞同：0
> 
> 时间：2012-11-22T10:13:29.407
> 
> 标签：silverlight, testing, wcf-ria-services

集成测试：

```
UERDomainService uerDomainService;

        [TestInitialize]
        public void Setup()
        {
            uerDomainService = new UERDomainService();
        }

 [TestMethod]
        public void GetUsersWithRoles_GivenRoleID1003_ShouldNotReturnMateerAsSoftDeleted()
        {
            // blah               

            Assert.AreEqual(0, thing.Count());

            // blah

            uerDomainService.DeleteRoleMembership(rm);
        } 
```

然后在 DeleteRoleMembership(rm) 这是一个 RIA 服务代码生成方法：

```
 public void DeleteRoleMembership(RoleMembership roleMembership)
        {
            if ((roleMembership.EntityState != EntityState.Detached))
            {
                this.ObjectContext.ObjectStateManager.ChangeObjectState(roleMembership, EntityState.Deleted);
            }
            else
            {
                this.ObjectContext.RoleMemberships.Attach(roleMembership);
                this.ObjectContext.RoleMemberships.DeleteObject(roleMembership);
            }

            // added to get tests working
            ObjectContext.SaveChanges();
        } 
```

为什么我必须加入这个才能让我的测试正常工作？

然而，我的 Silverlight 应用程序不需要它来工作。我知道这与 RIA 的保存管道有关。uerDomainService.Submit 方法需要一个ChangeSet。

问题：如何从我的测试中启动 SubmitChanges 管道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:22:27.717

请注意，由于 Silverlight 的异步特性和对底层 RIA 服务的调用，您不能（或者应该说）简单地在标准单元测试中测试您的 Silverlight 代码。

为了能够测试您的代码，为您的解决方案创建一个新的“Silverlight 单元测试应用程序”。将包含一个默认测试，基本上看起来像这样（请注意，测试类是从`SilverlightTest`-class 派生的）：

```
[TestClass]
public class SomeTests : SilverlightTest
{
    [TestMethod]
    [Asynchronous]
    public void CanDownloadDataThenChangeAndSubmitChanges()
    {
        var target = new YourDomainContext();

        // Arrange
        this.EnqueueCallback(() => target.Load(target.GetSomethingsQuery()));
        this.EnqueueConditional(() => !target.IsLoading);        
        this.EnqueueCallback(() => Assert.IsTrue(target.Somethings.Any()));

        // Act
        this.EnqueueCallback(() => target.Somethings.First().SomeProperty = "NewValue");
        this.EnqueueCallback(() => target.SubmitChanges());

        // Assert
        this.EnqueueConditional(() => !target.IsSubmitting));
        this.EnqueueCallback(() => Assert.IsFalse(target.HasChanges));
        this.EnqueueTestComplete();
    }
} 
```

有关更多详细信息，请查看 CodeProject 上的[这篇文章。](http://www.codeproject.com/Articles/158531/The-Unit-Test-of-Silverlight-Applications-with-Asy)

# perl - 使用 Perl 对哈希元素求和

> ID：13510362
> 
> 赞同：2
> 
> 时间：2012-11-22T10:13:30.460
> 
> 标签：perl, hash, sum

我有一个返回此哈希结构的 Perl 脚本：

```
$VAR1 = {
          'Week' => [
                      '1238',
                      {
                        'OUT3FA_5' => 65,
                        'OUT3A_5' => 20,
                        'OUT3-Fix' => 45,
                        'IN1' => 85
                      },
                      '1226',
                      {
                        'OUT3FA_5' => 30,
                        'OUT3A_5' => 5,
                        'OUT3-Fix' => 25,
                        'IN1' => 40
                      }
                    ]
        }; 
```

我想做的是，计算`IN1`每周的总数，每个例子在这种情况下它会返回：

```
$VAR1 = {
          'Week' => [
                      '1238',
                      {
                        'OUT3FA_5' => 65,
                        'Total_IN1' => 85,
                        'OUT3A_5' => 20,
                        'OUT3-Fix' => 45,
                        'IN1' => 85
                      },
                      '1226',
                      {
                        'OUT3FA_5' => 30,
                        'Total_IN1' => 125,
                        'OUT3A_5' => 5,
                        'OUT3-Fix' => 25,
                        'IN1' => 40
                      }
                    ]
        }; 
```

以此类推，每周一次。

请问我该怎么做？任何帮助，将不胜感激。

这是我试图做的，但它不起作用：

```
my @sum_IN1 = qw(IN1); #kinda useless to use an array just for one value...
for my $num (keys %hash) {

    my $found;
    my $sum = 0;

    for my $key (@sum_IN1) {

        next unless exists $hash{$num}{$key};
        $sum   += $hash{$num}{$key};
        $found = 1;
    }

    $hash{$num}{Total_IN1} = $sum if $found;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:59:28.057

您需要保留一个状态变量来保存数组中每个项目的运行总计。我还怀疑你`Week`的数组应该是一个哈希？

```
use strict;
use warnings;

use Data::Dump;

my $data = {
  Week => [
    1238,
    { "IN1" => 85, "OUT3-Fix" => 45, "OUT3A_5" => 20, "OUT3FA_5" => 65 },
    1226,
    { "IN1" => 40, "OUT3-Fix" => 25, "OUT3A_5" => 5, "OUT3FA_5" => 30 },
  ],
};

my $week = $data->{Week};

# Sort the array entry pairs by week number
#
my @pairs;
push @pairs, [ splice @$week, 0, 2 ] while @$week;
@$week = ();
for my $pair (sort { $a->[0] <=> $b->[0] } @pairs) {
  push @$week, @$pair;
}

# Calculate the running totals of IN1
#
my $total = 0;
for my $item (@$week) {
  next unless ref $item eq 'HASH' and exists $item->{IN1};
  $total += $item->{IN1};
  $item->{Total_IN1} = $total;
}

dd $data; 
```

**输出**

```
{
  Week => [
    1226,
    {
      "IN1"       => 40,
      "OUT3-Fix"  => 25,
      "OUT3A_5"   => 5,
      "OUT3FA_5"  => 30,
      "Total_IN1" => 40,
    },
    1238,
    {
      "IN1"       => 85,
      "OUT3-Fix"  => 45,
      "OUT3A_5"   => 20,
      "OUT3FA_5"  => 65,
      "Total_IN1" => 125,
    },
  ],
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T12:25:41.947

首先，您的数据结构令人困惑。`'Week'`是对数组的引用，其中一些元素是字符串（例如`'1238'`），其余元素是哈希引用。

虽然 Perl 可以让您侥幸逃脱，但最好将数据结构的每一层设计为只保存一种东西。这是需要考虑的事情。但是，我将暂时保留它。

这是一个快速的方法：

```
my $ttl = 0;
$_->{'In1Total'} = $ttl+=$_->{'IN1'} || 0 for(grep {ref $_} @{$VAR1->{'Week'}});

use Data::Dumper;
print Dumper $VAR1; 
```

**更新：**更改`//`为`||`Mikko L 建议的那样。

解释：

`grep {ref $_}`仅从数组中获取作为哈希引用的元素。

`$_->{'IN1'} || 0`- 如果其中一个哈希没有`'IN1'`，这将使用零代替。这基本上是对正在定义的哈希键的检查。 `||`对哈希键执行此操作是可以接受的。但是，在其他情况下，您需要定义或运算符 ( `//`，我相信从版本 5.10 可用)。

`$_->{'In1Total'} = $total+=$_->{'IN1'} || 0`这会将 的当前值添加`IN1`到计数中，然后将结果放入`In1Total`. 诚然，这可以通过将其分成几行来更清楚地说明。

**更新 2：**修正了 Borodin 指出的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:26:27.447

没有看到您的代码，很难看出它为什么不起作用，但这可能是因为您在代码中使用了哈希，但返回的数据结构是哈希引用。

这是一个应该工作的版本（使用哈希引用）：

```
#!/usr/bin/env perl

use warnings;
use strict;
use Data::Dumper;
use List::MoreUtils qw( natatime );

my $data = {
    'Week' => [
        '1238',
        {   'IN1'      => 85,
            'OUT3FA_5' => 65,
            'OUT3A_5'  => 20,
            'OUT3-Fix' => 45
        },
        '1226',
        {   'IN1'      => 40,
            'OUT3FA_5' => 30,
            'OUT3A_5'  => 5,
            'OUT3-Fix' => 25
        }
    ]
};

for my $key ( keys %$data ) {
    my $weekly_data = $data->{$key};
    my $total       = 0;
    my $iter        = natatime 2, @$weekly_data;

    while ( my ( $id, $daily_data ) = $iter->() ) {
        next unless $daily_data->{IN1};
        $total += $daily_data->{IN1};
        $daily_data->{Total_IN1} = $total;
    }
}

print Dumper($data);
1; 
```

这是输出：

```
$VAR1 = {
          'Week' => [
                      '1238',
                      {
                        'OUT3FA_5' => 65,
                        'Total_IN1' => 85,
                        'OUT3A_5' => 20,
                        'OUT3-Fix' => 45,
                        'IN1' => 85
                      },
                      '1226',
                      {
                        'OUT3FA_5' => 30,
                        'Total_IN1' => 125,
                        'OUT3A_5' => 5,
                        'OUT3-Fix' => 25,
                        'IN1' => 40
                      }
                    ]
        }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:38:17.580

也许您可以从修改代码中学到一些东西，顺便说一句，它工作得很好。问题是您错误地对待数据结构。这个：

```
# initial data structure
my $data = {
    'Week' => [
        '1238',
        {
            'IN1' => 85,
            'OUT3FA_5' => 65,
            'OUT3A_5' => 20,
            'OUT3-Fix' => 45
        },
        '1226',
        {                        
            'IN1' => 40,
            'OUT3FA_5' => 30,                       
            'OUT3A_5' => 5,
            'OUT3-Fix' => 25
        },
    ],
}; 
```

是一个哈希引用。在引用的哈希中，有一个键`Week`指向键值对的数组引用。所以这应该是一个哈希：

```
# create a Week hash from the even-sized list in $data->{Week}
my %week = @{$data->{Week}}; 
```

我只需要替换代码中的一些变量名：

```
my @sum_IN1 = qw(IN1);
for my $num (keys %week) {

    my $found;
    my $sum = 0;

    for my $key (@sum_IN1) {

        next unless exists $week{$num}{$key};
        $sum   += $week{$num}{$key};
        $found = 1;
    }

    $week{$num}{Total_IN1} = $sum if $found;
}

print Dumper \%week; 
```

这很好用！输出（顺序错误，但您可以`sort`轻松完成）：

```
$VAR1 = {
          '1238' => {
                      'OUT3FA_5' => 65,
                      'Total_IN1' => 85,
                      'OUT3A_5' => 20,
                      'OUT3-Fix' => 45,
                      'IN1' => 85
                    },
          '1226' => {
                      'OUT3FA_5' => 30,
                      'Total_IN1' => 40,
                      'OUT3A_5' => 5,
                      'OUT3-Fix' => 25,
                      'IN1' => 40
                    }
        }; 
```

# c# - 是否可以将日期从 RadComboBox 转移到另一个 RadComboBox（不同页面）？

> ID：13510370
> 
> 赞同：0
> 
> 时间：2012-11-22T10:13:44.033
> 
> 标签：c#, javascript, .net, asp-classic

我在一个页面中有 3 个不同的 RadComboBoxs，在另一个页面中有 3 个 RadComboboxes 是否可以将选定的值从前三个 Comboboxes 传输到其他 Comboboxes（可能通过 URL Javascript）？

如果您需要我的代码，请询问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:47:21.527

首先尝试查询字符串：

**在 Page1.aspx 中**

在某些按钮单击事件中

```
Response.Redirect("~/Page2.aspx?id1="+RadComboBox1.SelectedValue+"&id2="+RadComboBox2.SelectedValue) 
```

和

**在 Page2.aspx 中**

在页面加载事件中

```
string cmb1Value = Request.QueryString["id1"].ToString();
string cmb2Value = Request.QueryString["id2"].ToString(); 
```

并将这些值绑定到此处所需的组合框，如下所示。

```
//Use RadComboBox.SelectedIndex
int index1 = RadComboBox1.FindItemIndexByValue(cmb1Value );
RadComboBox1.SelectedIndex = index1;

int index2 = RadComboBox2.FindItemIndexByValue(cmb2Value );
RadComboBox2.SelectedIndex = index2; 
```

# spring - 重定向反向代理后面的spring应用程序丢失flash属性

> ID：13510374
> 
> 赞同：1
> 
> 时间：2012-11-22T10:13:51.390
> 
> 标签：spring, redirect, proxy

我的应用程序在 POST 操作后将一些信息重定向到 GET 控制器，但在与 Apache 和反向代理一起使用时会丢失信息。当我在中间没有反向代理的情况下执行此操作时，一切正常。一些想法？

```
 @PreAuthorize("hasRole('ROLE_ADMIN')")
    @RequestMapping(value = "aCategory", method = RequestMethod.POST)
    public String category(@RequestParam("aCategoryName") String name, Model model, RedirectAttributes attr,
                        HttpServletRequest request) {

                String redirect = "redirect:" + "http://localhost:8080/aCategory";
                aService.saveACategory(name);
                attr.addFlashAttribute("aCategoryName", name);
                return redirect;
    }

    @RequestMapping(value = "aCategory", method = RequestMethod.GET, produces = "text/html")
    public String appCategory(Model model, Principal principal) {
        String name = principal.getName(); // get logged in username
        model.addAttribute("username", name);
        return "aCategory";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:19:19.817

这取决于您的集群配置和会话复制配置。因为 FlashAttributes 在将其添加到模型映射以将其显示在重定向视图上之前，首先会临时存储在会话中。因此，如果您的集群没有很好地配置正确的会话复制，那么当请求由另一个集群提供服务时，您的 FlashAttribute 可能会丢失，而不是 FlashAttribute 实际存储在会话中的位置。

有关更多详细信息，您可以参考我的[问题](https://stackoverflow.com/questions/12489603/flashattributes-are-not-working-properly-when-application-deployed-on-a-clustere)。

希望这对您有所帮助。干杯。

# javascript - 从 javascript 修改应用程序状态的安全性

> ID：13510376
> 
> 赞同：0
> 
> 时间：2012-11-22T10:13:59.293
> 
> 标签：javascript, ajax, security, model-view-controller, client-side

我有一个关于如何开发我的 Web 应用程序安全性的问题。假设所有的 javascript 代码都是公开的，并且任何人都可以直接进行任何 AJAX 调用，并且参数看起来很方便，那么任何直接修改数据库状态的调用都是非常危险的。

也就是说，诸如“changePoints”或“updateUserState”的调用允许恶意用户破坏例如游戏的逻辑并获得无限的金钱或积分。

我对这个问题的直观解决方案是设计将客户端与服务器通信的调用，因此通过其参数不可能破坏应用程序逻辑。在游戏示例中，像“buySomething”这样的调用是安全的，因为服务器将负责添加“某物”并减去它所花费的钱。两个调用 "addSomething" "changeMoney" 可以完成相同的任务，但由于显而易见的原因是不安全的。

我的怀疑源于这个推理导致我的结论：客户端 MVC 模式的模型部分似乎非常危险，特别是如果我们应用“活动记录”，因为 AJAX 调用与数据库服务器直接相关。此外，我的直观解决方案倾向于在服务器端开发大部分应用程序逻辑，这可能会变得乏味。

有什么我想念的吗？有更智能的解决方案吗？在客户端使用模型和活动记录是否不安全？

感谢您的关注和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:25:08.647

服务器*始终*是最终权威。您*需要*所有应用程序逻辑服务器端，并且服务器需要验证用户执行的所有操作。将服务器视为一个黑匣子，它代表了您的所有应用程序逻辑。该黑匣子之外的任何东西都是不可信的，不是“应用程序”的一部分。任何可以用那个黑盒子“从外部”完成的事情都是不受信任的。黑匣子必须只向外部公开有效的 API，并通过拒绝任何无效输入来做出反应。HTML/Javascript 接口只是使用普通用户可以与之交互的那些 API 的便捷方式，它不是核心应用程序的一部分，并且不得包含关键业务逻辑。它仅*代表*黑匣子内部发生的事情。

如果您的应用程序是高度动态的并且经常更改需要在界面中反映的状态，例如在游戏中，那么是的，保持与服务器端状态同步可能是一个很大的挑战。尽管如此，它仍然是必要的。

# c++ - 不可能的 C++ 数组索引

> ID：13510380
> 
> 赞同：4
> 
> 时间：2012-11-22T10:14:00.430
> 
> 标签：c++, arrays, indexing, g++

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)
> [] 在 C 和 C++ 中通过 index[array] 访问数组](https://stackoverflow.com/questions/5073350/accessing-arrays-by-indexarray-in-c-and-c)

我刚刚发现我的代码中似乎有一个错误，但它不仅可以编译，而且最初也可以按预期工作......

考虑以下代码片段：

```
#include <string>
#include <iostream>
using namespace std;

class WeirdTest
{
public:
    int value;
    string text;
    WeirdTest() : value(0),
                  text("")
    {}
    virtual ~WeirdTest()
    {}
    void doWeirdTest()
    {
        value = 5;
        string name[] =
        {
            "Zero",
            "One",
            "Two",
            "Three",
            "Four",
            "Five"
        };
        text = value[name];
        cout << "text: " << text << endl;
    }
};
int main(int argc, char** argv)
{
    WeirdTest test;
    test.doWeirdTest();
    return 0;
} 
```

而不是`text=value[name];`应该有，`text=name[value];`但编译器不会抱怨，无论“错误”是否在这里，生成的二进制代码都是完全相同的。我正在使用 g++ 4.6.3 进行编译，如果有人知道这里发生了什么，我将不胜感激。会不会是我错过的标准中的东西？C++0x 中的自动错误修复可能吗？;)

非常感谢，

干杯！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T10:18:32.003

是的，这是一个奇怪的“功能”。实际上发生的事情是编译器将转换为`a[i]`in `*(a + i)`，因此数组索引和数组地址实际上是可以互换的。

注意，它只有在`operator []`没有重载时才有效。

# xpath - 错误：无法定位元素

> ID：13510383
> 
> 赞同：0
> 
> 时间：2012-11-22T10:14:04.227
> 
> 标签：xpath, selenium, css-selectors

我必须使用 ZK 框架测试动态应用程序，Selenium 无法从不同元素中识别 id，因此无法在文本框中输入文本或选择列表中的元素（来自数据库的元素）

无论我使用什么（xpath 或 css 选择器）都不起作用，总是同样的错误

有谁知道我该如何解决我的问题？

我正在使用 Selenium IDE 1.9.0

Netbeans IDE 7.1.1

和 Firefox 16.0.2

谢谢

html代码是：

```
按钮 id="zc_subdossierzulButton_8" class="butt z-button-os" style="border-style: solid;border-width: 1px;border-color: #ED0000;" type="button">Rechercher

```

我尝试的Java代码是：

```
driver.findElement(By.cssSelector("zc_subdossierzulButton_8.butt")); 
```

不工作

这：

```
driver.findElement(By.cssSelector("butt z-button-os")); 
```

不工作

还有这个：

```
String cssSelector = "[class='butt z-button-os']"; 
driver.findElement(By.cssSelector(cssSelector)).clear(); 
driver.findElement(By.cssSelector(cssSelector)).sendKeys("c"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:41:16.597

请仔细阅读以下文档并尝试使用不同的选项，例如

```
driver.findElement(By.id("coolestWidgetEvah"));
OR
driver.findElements(By.className("cheese"));
OR
driver.findElement(By.tagName("iframe"));
OR
driver.findElement(By.name("cheese"));
OR
driver.findElement(By.linkText("cheese"));
OR
driver.findElement(By.partialLinkText("cheese"));
OR
driver.findElements(By.xpath("//input")); 
```

> [http://seleniumhq.org/docs/03_webdriver.html#locating-ui-elements-webelements](http://seleniumhq.org/docs/03_webdriver.html#locating-ui-elements-webelements)

# jquery - 在 AJAX 请求中传递 null Rails 将其解释为“null”

> ID：13510390
> 
> 赞同：3
> 
> 时间：2012-11-22T10:14:17.763
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我试图通过[$.ajax](http://api.jquery.com/jQuery.ajax/)向 Rails 3 后端发送 AJAX 请求，但我遇到了一个奇怪的行为。以以下请求为例：

```
$.ajax({
    url: $(this).attr('href'),
    type: 'PUT',
    dataType: "json",
    data: {a: null},
    success: function (data) {
        console.log("success!")
    }
}); 
```

我绑定到一个点击事件。简单的。发生的事情是 Rack 将 URI 编码的表单参数解析为`{"a" => "null"}`，我真的想解析为`{"a" => nil}`. 是否有任何非骇客的方式来实现这种行为？

非常感谢！

PS 如果我通过`{a: undefined}`了，那么 params 哈希根本就没有`a`密钥。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T11:38:57.930

好的，我找到了解决方案。我不得不将`$.ajax`调用更改为：

```
$.ajax({
    url: $(this).attr('href'),
    type: 'PUT',
    dataType: "json",
    contentType: "application/json",
    data: JSON.stringify({a: null}),
    processData: false,
    success: function (msg) {
        console.log("success!")
    }
}); 
```

它做了两件重要的事情。首先，它将内容类型标头传递给 JSON，以便请求负载自动被 Rack 解析为 JSON。另一个是`processData`必须设置为 false 以防止默认的 jQuery 行为：

> 默认情况下，作为对象（从技术上讲，不是字符串）传入 data 选项的数据将被处理并转换为查询字符串，适合默认的内容类型“application/x-www-form-urlencoded” .

# java - Linux：Java Web 应用程序内存不足，不响应请求但不抛出 OOM？

> ID：13510391
> 
> 赞同：0
> 
> 时间：2012-11-22T10:14:24.667
> 
> 标签：java, linux, out-of-memory, stack-trace, heap-dump

在 Linux 服务器上，已为应用程序指定了 vm 参数（Xmx=3GB，Xms=3GB）。通过查看堆转储可以看出已使用超过 2.9 GB 的内存。32 MB 内存用于无法访问的对象。

但是应用程序没有抛出 OOM，而是停止响应。因此有必要手动重新启动应用程序。

我可以看到许多线程（96）等待堆栈跟踪中某个特定对象的监视器。这有帮助吗？此外，2.9 GB 的大部分空间都被缓存对象占用，我认为这很正常。MAT 仅将这些缓存对象显示为泄漏嫌疑人。

试图通过查看堆转储和堆栈跟踪来找出导致它没有响应但没有看到任何特别之处的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:19:17.683

您的应用程序存在内存泄漏。试着找到它，有像[VisualVM](http://visualvm.java.net/)这样的好工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:23:43.980

通常，在 OOM 应用程序之前非常缓慢。

在您的情况下，您应该通过示例使用 VisualVM 分析您的应用程序。

# python - 如何在 sqlalchemy 中加入两个关于公共关系的查询？

> ID：13510394
> 
> 赞同：2
> 
> 时间：2012-11-22T10:14:30.030
> 
> 标签：python, join, sqlalchemy, relationship

假设我有两个类`ChildA`，`ChildB`它们都与`Parent`. 还假设我已经定义了两个查询，`qa`和`qb`，它们查询各自的子类。我想`qb`在`qa`拥有相同的`parent`.

如果`parent`只是一个普通的列，我可以执行以下操作：

```
subquery = qb.subquery()
joined_query = qa.join(subquery, AliasedChildA.parent==subquery.columns.parent) 
```

这里，`AliasedChildA`是 的别名`ChildA`。（我可以完全控制如何创建查询，但不能控制稍后应用于它们的过滤器。）但是现在，由于`parent`是关系，它不包含在`subquery.columns`.

我怎样才能加入`qa`并`qb`拥有相同的`parent`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:23:45.907

尝试使用`AliasedChildA.parent_id == subquery.c.parent_id`（`and_`如果您有复合 pk，请使用一些子句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:35:07.773

试试下面的：

```
qa = session.query(ChildA)
qb = session.query(ChildB)
# @note: *qa* and *qb* may include other filters etc, 
# but assuming they do not contain joins on *Parent*
subquery = qb.subquery()
qry = qa.join(Parent).join(subquery) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-29T07:18:12.913

```
query_a.subquery().join(query_b.subquery(), $on_condition...) 
```

为我工作:)

# c# - 使用 BeginInvoke/Invoke 获取价值

> ID：13510395
> 
> 赞同：0
> 
> 时间：2012-11-22T10:14:36.187
> 
> 标签：c#, multithreading

我试图获取 DataGridView [ dataGridView1.Rows.Count ] 的行数。我发现虽然 UI 显示 DataGridView 中已经添加了多行，但行数仍然为 0。我发现这可能是一个线程问题，所以我使用以下代码来检索行数：

```
public void OnTagsReported( ... )
{
  ...  

  for( var i = GetDataGridViewRowCount( dgvScanResult ) - 1; i >= 0; i-- )
  {
    var row = dgvScan.Rows[ i ];
    ...
  }  
  ...
}

protected int GetDataGridViewRowCount( DataGridView gridView )
{
  try
  {
    if( ! InvokeRequired )
    {
      return gridView.Rows.Count;
    }

    var count  = 0;
    var action = new Action<DataGridView>( delegate( DataGridView c ) 
                 { count = c.Rows.Count; } );

    gridView.Invoke( action, gridView );

    return count;
  }
  catch( ObjectDisposedException ) {}
  catch( InvalidOperationException ) {}
} 
```

我得到了行数，但想知道这是否是正确的方法。我可以知道你会怎么做吗？

谢谢大家的关注和意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:41:15.517

为什么您的 OnTagsReported 方法在另一个线程中？无论如何，两条评论。

第一：是的，你可以这样做，但在 GetDataGridViewRowCount 中是一个错误。您还应该在 gridView 上调用 InvokeRequired，因为稍后您将使用 gridview.Invoke。

第二：最好在正确的线程中调用您的 OnTagsReported 方法。那么你就不需要 GetDataGridViewRowCount 方法了。

```
public void OnTagsReported()
{
  if (dgvScanResult.InvokeRequired)
  {
    dgvScanResult.Invoke(new MethodInvoker(OnTagsReported), null);
    return;
  }

  for( var i = dgvScanResult.Rows.Count - 1; i >= 0; i-- )
  {
    var row = dgvScan.Rows[ i ];
    ...
  }  
  ...
} 
```

# youtube-api - 如何在 iOS6 应用程序中嵌入 Youtube 视频？

> ID：13510397
> 
> 赞同：0
> 
> 时间：2012-11-22T10:14:42.397
> 
> 标签：youtube-api

我在 iOS6 应用程序中嵌入 Youtube 视频时遇到问题。

问题是，每当我创建一个使用旧/或新嵌入代码的 html 元素时，它都会打开 Safari 并显示视频

我使用 Youtube API 来获取视频，并使用 PhoneGap

**更新** 解决方案是在Phonegap设置中将OpenAllWhitelistURLsInWebView设置为YES

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:16:31.243

您可以使用`UIWebview`加载视频而不是 Safari。

这是一个[示例代码](http://www.developerfeed.com/ios/topic/how-embed-youtube-video-uiview-iphone)

```
CGRect rect = [[UIScreen mainScreen] bounds];
CGSize screenSize = rect.size;

UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,screenSize.width,screenSize.height)];
webView.autoresizesSubviews = YES;
webView.autoresizingMask=(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth);

NSString *videoUrl = @"http://www.youtube.com/v/oHg5SJYRHA0";
NSString *htmlString = [NSString stringWithFormat:@"<html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 212\"/></head><body style=\"background:#F00;margin-top:0px;margin-left:0px\"><div><object width=\"320\" height=\"480\"><param name=\"movie\" value=\"%@\"></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"%@\" type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"320\" height=\"480\"></embed></object></div></body></html>",videoUrl,videoUrl]    ;

[webView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.youtube.com"]];

[window addSubview:webView];
[webView release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:00:23.233

如果您正在谈论一个真正的应用程序（对此一无所知），
但如果它是一个 WEBAPP（一个试图看起来像一个真正的应用程序的普通网页），
那么我发现防止 youtube 视频在 Safari 中打开的唯一方法/Qt-player
是使用“Fancybox”嵌入它（也可能是其他盒子）。
这会将其保留在 Youtube 自己的播放器的页面上。

你甚至可以拥有一个原创的播放列表播放器。
我不再尝试在 iPhone 页面上嵌入 youtube 视频（很小）

我试图包含一个指向 jSfiddle-example 的链接，但是这个论坛不会接受它，它迫使我在这里写整个例子......我不会这样做，因为这对我来说现在有很多工作。
（不知道其他人是如何被允许链接到 jSfiddle 的）
这个论坛是我喜欢的方式。
无论如何，您应该能够（如果是网络应用程序）在 Fancybox 的网站上找到信息。

# dll - 如何在 SQL Server 2008 R2 的 SSRS 中使用自定义 dotnet 库方法？

> ID：13510398
> 
> 赞同：1
> 
> 时间：2012-11-22T10:14:45.473
> 
> 标签：dll, reference, ssrs-2008

我需要在我的 SSRS 报告中使用自定义 dll。请指导我如何在 SQL Server 2008 R2 商业智能工作室中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:43:04.790

好的，这个问题已经很老了，但是由于我最近遇到了同样的问题并且您的问题尚未得到解答，我会给您一个链接来解释该怎么做

[如何在 Reporting Services 中使用自定义程序集或嵌入代码](http://support.microsoft.com/kb/920769/en-us)

从您的邮件中，我怀疑您没有在服务器 bin 目录上部署 dll（并修改了配置文件）。

希望这会对您或其他人有所帮助:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:40:08.433

要引用 DLL，请选择报告周围的黄色背景（在设计视图中）并选择报告属性（不是报告数据）。在这里，您有一个代码部分，用于编写自定义代码和一个引用部分以引用自定义 DLL。

也就是说，如果您希望此功能被许多报告使用，请考虑将 SSRS 报告包装在 ac# Web 应用程序中。这将使您能够使用常见的重复代码（如参数传递）并通过代码重用减少持续维护。

# vim - Vim 文件夹列表，无法访问：

> ID：13510406
> 
> 赞同：1
> 
> 时间：2012-11-22T10:15:02.287
> 
> 标签：vim

在 Vim 的文件夹查看模式下，我无法进入 : 状态，因为出现错误：

> 处理“*”的 BufWinEnter 自动命令时检测到错误
> 
> E32: 没有文件名

我该如何解决这个错误？

[这是我的 vimrc。](http://synodins.com/unix/vim/vimrc)
除了我现在已经注释掉了 BufWin 的。

我现在已经停止寻找这个解决方案，因为我已经设法禁用了文件夹查看器。
为此，请参见[此处](https://stackoverflow.com/questions/13510941/disableing-vims-folder-view)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:46:10.957

您似乎已将 autocmd 复制到您的配置中，该配置过于简单并且不能很好地处理未命名缓冲区之类的情况。

如果这与您的[其他问题有关](https://stackoverflow.com/questions/13509533/vim-file-direction-e739)，我建议您查看[http://vim.wikia.com/wiki/Make_views_automatic](http://vim.wikia.com/wiki/Make_views_automatic)，其中（在评论部分）有多种解决方案可以使自动视图创建更加健壮被讨论。

否则，请查看 列表`:autocmd BufWinEnter`，尝试找到罪魁祸首，然后修复它或删除该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:18:06.387

您应该可以通过以下方式摆脱这种情况：

```
:q 
```

就像您从文件中退出一样？也许您需要添加“！”

# git - 使用 git 挂钩备份 git 远程存储库

> ID：13510408
> 
> 赞同：3
> 
> 时间：2012-11-22T10:15:05.553
> 
> 标签：git, backup, githooks, git-bash, git-workflow

我有一些拼图，如果有人可以帮助将这些拼图拼凑在一起以获得完整的画面，那就太好了。

我有几个开发人员在本地开发几个 git repo 并经常推送到服务器上匹配的远程存储库。

现在我想在另一台服务器上复制或自动进行第二次备份。

我了解到，当我`post-receive`在远程存储库上定义一个钩子并包含一个钩子时，`git push to my backup server`我可以这样自动化它吗？这个对吗？

现在：我控制了本地和第一个远程仓库，但没有那么多备份仓库。因此，如果有人开始一个新的 git repo，我可以分发`post-receive hook`via `global git settings`。但是是否有可能我可以检查我`post-receive hook`的备份存储库是否存在，如果不是`init`新的，然后`push`呢？如果它存在只是`push`备份的当前状态。我发现了类似`git ls-remote`查询遥控器但不知道如何处理它的东西......

但是就像我说的那样，我不确定如何编写`git post-receive hook`它会自动将更改重新推送到备份服务器......而且最重要的是，我必须为此使用 Windows 服务器 =)

PS：我也看到了类似的东西，`git bundle`但没有弄清楚这对我有什么帮助......无论如何，我只是在为我的远程仓库寻找备份仓库的自动备份解决方案......

# google-maps - 以黑白打印谷歌地图

> ID：13510410
> 
> 赞同：2
> 
> 时间：2012-11-22T10:15:14.067
> 
> 标签：google-maps, google-maps-api-3

我的很多客户（公司）想在黑白打印机上打印谷歌地图（带方向）。但是当我们尝试这样做时 - 地图变得灵活，因为谷歌地图的对比度和分辨率都很小。结果 - 地图上的一切都不是清晰可见的。我们尝试了打印机的所有可能设置，但没有任何帮助。
如何通过程序解决这个问题？如何使谷歌地图（上面有路线）对比和良好的分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:18:45.367

尝试阅读 Google Maps API 的[Styled Map](https://developers.google.com/maps/documentation/javascript/styling)部分。他们甚至有一个向导可以帮助您创建灰度地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:27:34.090

尝试[http://www.openstreetmap.org](http://www.openstreetmap.org)，选择循环地图（在堆栈右上角）。标签比谷歌略大，对比度更好（仍然不是很好）

# javascript - 无法从 URL 加载 JSON

> ID：13510427
> 
> 赞同：0
> 
> 时间：2012-11-22T10:16:24.640
> 
> 标签：javascript, jquery, json

我正在尝试加载 JSON 并警告它，但我无法做这个简单的事情。我很困惑以前这样做过，但现在它不起作用。一个简单的小提琴会很有帮助，这就是我尝试过的方法：

```
$.getJSON("https://www.mariyano.com/app-server/test/?action=get_list", function(json) {
alert("JSON Data: " + json.data.id);
}); 
```

我收到错误...

XMLHttpRequest 无法加载[https://www.mariyano.com/app-server/test/?action=get_list](https://www.mariyano.com/app-server/test/?action=get_list)。Access-Control-Allow-Origin 不允许来源[http://fiddle.jshell.net 。](http://fiddle.jshell.net)

为此，我尝试使用回调：

```
$.getJSON("https://www.mariyano.com/app-server/test/?action=get_list&callback=?",function(json) {
 alert("JSON Data: " + json.data.id);
     }); 
```

它抛出了两个错误：

资源解释为脚本，但使用 MIME 类型 text/html 传输：“https://www.mariyano.com/app-server/test/?action=get_list&callback=jQuery18205437749766279012_1353579335783&_=1353579335798”。jquery-1.8.2.js:8304

Uncaught SyntaxError: Unexpected token :

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:26:26.250

[在不规避同源策略的](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)情况下，您无法访问另一个域上的数据。

除非您正在访问的服务支持 JSONP，否则您不能使用 JSONP 来执行此操作，而 JSONP`https://www.mariyano.com/app-server/test/`不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:32:52.840

我认为您应该了解的一件事是 JSON 对象的格式。从它的外观来看，它看起来像这样：

```
{
  "data": [
    {"id":"83","name":"asdas"},
    {"id":"86","name":"KKKK123"},
    {"id":"85","name":"KKKK123"},
    {"id":"82","name":"as"},
    ...],

  "status":1,

  "error":""
 } 
```

您的 JSON 对象中有 3 个字段，一个称为`data`，一个称为`status`，一个称为`error`。让我们专注于该`data`领域。它似乎是一个巨大的数组，每个索引都有对象，每个对象都包含包括`id`和在内的字段`name`。

回顾您的代码，您正在尝试打印`json.data.id`. 很好，`json.data`但是当你说`id`......好吧，它不知道`id`它应该看哪个，所以这就是它抛出语法错误的原因。

该字段`data`是一个数组，所以如果你想访问一个特定的`id`，你必须做

`json.data[0].id`这会给你第一个索引的`id`.

这至少解释了`Uncaught SyntaxError: Unexpected token :`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-22T10:20:41.347

遵循此代码可能会对您有所帮助

```
<!DOCTYPE html>
<html>
<head>
  <style>img{ height: 100px; float: left; }</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div id="images">

</div>
<script>
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
  {
    tags: "mount rainier",
    tagmode: "any",
    format: "json"
  },
  function(data) {
    $.each(data.items, function(i,item){
      $("<img/>").attr("src", item.media.m).appendTo("#images");
      if ( i == 3 ) return false;
    });
  });</script>

</body>
</html> 
```

# regex - 是否可以在第一次出现和最后一次出现字符时进行正则表达式替换？

> ID：13510429
> 
> 赞同：3
> 
> 时间：2012-11-22T10:16:30.347
> 
> 标签：regex

我正在尝试`|`用`""`第一次和最后一次替换。

例子：

`"Hello | my name | is | Jason | and I like hacking"`

到目前为止，我只能做其中之一。

第一次出现：

```
^(.*?)[|] 
```

最后出现：

```
(|)[^|]*$" 
```

是否可以同时更换两者，还是必须分步更换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:27:05.503

尝试这个

```
^([^|]*)\||\|(?=[^|]*$) 
```

并将其替换为

```
$1" 
```

[在 Regexr 上](http://regexr.com?32t6f)查看

这里的技巧是将字符串中的第一部分与捕获组匹配并将其写入替换字符串中。对于与最后一个“|”匹配的第二种选择 没有捕获组，因此它将用空字符串填充，并且在替换字符串中不会受到伤害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:22:20.973

我认为这可以解决问题：`(?:^[^|]*(\|))|(?:(\|)[^|]*$)`

你会得到第一个也是最后一个 | 在比赛组

如果您使用支持可变长度后视的 RegEx 引擎，我认为这将起作用：`(?<=^[^|]*)\||\|(?=[^|]*$)`

您将只匹配第一个和最后一个 |

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T01:35:08.117

将字符串想象为由以下部分组成：第一个管道之前的部分、管道、中间部分、管道和最后一个管道之后的部分。

捕捉你想要的部分：`([^|]*)[|](.*)[|](.*)`

然后从这些捕获的部分构建结果：`$1$2$3`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T21:08:22.490

其他一些答案应该有效，但我相信它们可能稍微过度设计。下面的简单正则表达式应该可以工作。

```
\|(.*)\| 
```

[演示](https://regex101.com/r/LEeZpM/1)

这个正则表达式之所以有效，是因为`.*`它是贪婪的，它会根据需要回馈以匹配模式。在这种情况下，这意味着捕获组将捕获第一个和最后一个管道之间的所有内容。然后，您可以用您需要的任何字符替换管道。下面的 Javascript 示例。

```
var str = "Hello | my name | is | Jason | and I like hacking";
var regex = /\|(.*)\|/;
str = str.replace(regex, "\"$1\""); 
```

# opengl - Pre-Pass Lighting OpenGL 实现神器

> ID：13510441
> 
> 赞同：2
> 
> 时间：2012-11-22T10:17:13.073
> 
> 标签：opengl, cg, deferred-rendering

在实现了延迟渲染器之后，我正在为我的硕士论文项目在 OpenGL 中实现 Pre-Pass Lighting 算法。Deferred 渲染器完美运行，我基于它实现了 PPL。在算法的光照传递之后，我得到了一个非常奇怪的伪影：L-缓冲区中包含的数据，我在其中累积了场景中灯光的贡献，是正确的，但结果相对于几何形状略有偏差，所以当我将它应用到材质中的场景时，结果是清晰可见的！（我不能在这里发布图片，但这里有一个链接可以看到它[http://postimage.org/image/kxhlbnl9v/](http://postimage.org/image/kxhlbnl9v/)）

看起来光照贴图立方体以某种方式计算出与几何体的偏移量（在每个轴上都不同）。我多次检查着色器和C++代码，我不明白这个问题来自哪里。我的想法不多了。下面是按顺序调用的算法的 3 遍代码。该代码现在是实验性的，所以我知道它在这个阶段设计得不好。我还添加了我在每个阶段使用的着色器，以按顺序写入 G-buffer、L-buffer 和 framebuffer。

C++代码：

```
// Draw geometry to g buffer
void GLPrePassLightingRendererV2::GeometryStage()
{
  // Set GL states
  glFrontFace(GL_CCW);
  glCullFace(GL_BACK);
  glEnable(GL_CULL_FACE);
  glDepthFunc(GL_LEQUAL);
  glDisable(GL_BLEND);
  glEnable(GL_DEPTH_TEST);
  glDepthMask(GL_TRUE);

  // Bind G-Buffer for geometry pass
  mGBuffer->BindForWriting();

  // Bind geometry stage shaders
  mTargetRenderSystem->BindShader(mGeometryStageVS);
  mTargetRenderSystem->BindShader(mGeometryStageFS);

  // Clear the framebuffer
  mTargetRenderSystem->ClearFrameBuffer(FBT_COLOUR | FBT_DEPTH);

  // Iterate over all the Renderables in the previously built RenderQueue
  RenderableList* visibles = mSceneManager->GetRenderQueue()->GetRenderables();

  // Set shader params here
  //[...]

  // Get the transformation info from the node the renderable is attached to
  for (RenderableList::iterator it = visibles->begin(); it != visibles->end(); ++it)
  {
    Renderable* renderable = *it;
    Material* mat = renderable->GetMaterial();

    mGeometryStageVS->Update();
    mGeometryStageFS->Update();

    // Render the object
    RenderOperation rop;
    renderable->GetRenderOperation(rop);
    mTargetRenderSystem->Render(rop);
  }

  // Only the geometry pass will write to the depth buffer
  glDepthMask(GL_FALSE);
  glDisable(GL_DEPTH_TEST);
}

// Accumulate lights contribs in L-buffer using G-buffer
void GLPrePassLightingRendererV2::LightingStage()
{
  // Enable additive blending for lights
  glEnable(GL_BLEND);
  glBlendEquation(GL_FUNC_ADD);
  glBlendFunc(GL_ONE, GL_ONE);
  //glCullFace(GL_FRONT);

  // Bind shader for light stage
  mTargetRenderSystem->BindShader(mLightStageVS);
  mTargetRenderSystem->BindShader(mLightStageFS);

  // Bind G-Buffer for reading and L-Buffer for writing for lighting pass
  mGBuffer->BindForReading();
  mLBuffer->BindForWriting();

  mTargetRenderSystem->ClearFrameBuffer(FBT_COLOUR);

  // Set shader params
  // [...]

  // Get all the lights in frustum, not by renderable
  const LightList& lights = mSceneManager->GetLightsInFrustum();

  // For each light in the frustum
  LightList::const_iterator front_light_it;
  for (LightList::const_iterator lit = lights.begin(); lit != lights.end(); ++lit)
  {
    // Send per light parameters to the shader
    Light* l = (*lit);
    SetLight(*l);

    // Calculate bounding sphere for light and scale accordingly to instensity
    float lightSphereScale = GetPointLightSphereScale(l->GetColor(), l->GetDiffuseIntensity());

    // TODO: Render a sphere for each point light, a full screen quad for each directional
    worldMtx.Identity();
    worldMtx.SetScale(lightSphereScale, lightSphereScale, lightSphereScale);
    worldMtx.SetTranslation(l->GetPosition());

    mLightStageVS->SetParameterValue("gWorldMtx", (float*)&worldMtx);

    mLightStageVS->Update();
    mLightStageFS->Update();
    static MeshInstance* sphere = mSceneManager->CreateMeshInstance("LightSphere", MBT_LIGHT_SPHERE);

    RenderOperation rop;
    sphere->GetSubMeshInstance(0)->GetRenderOperation(rop);
    mTargetRenderSystem->Render(rop);
  }

  // Disable additive blending
  glDisable(GL_BLEND);
}

// Combine L-buffer and material information per object
void GLPrePassLightingRendererV2::MaterialStage()
{
  // Set some GL states
  glDepthMask(GL_TRUE);
  glEnable(GL_DEPTH_TEST);
  //glCullFace(GL_BACK);

  // Bind material stage shaders (TODO: actually every object will bind its own matarial, if not a default one is used)
  mTargetRenderSystem->BindShader(mMaterialStageVS);
  mTargetRenderSystem->BindShader(mMaterialStageFS);

  // Bind L-Buffer for reading
  mLBuffer->BindForReading();

  mTargetRenderSystem->ClearFrameBuffer(FBT_COLOUR | FBT_DEPTH, Math::ColourValue::WHITE);

  // Iterate over all the Renderables in the previously built RenderQueue
  RenderableList* visibles = mSceneManager->GetRenderQueue()->GetRenderables();

  // Set shader params here
  // [...]

  // Get the transformation info from the node the renderable is attached to
  for (RenderableList::iterator it = visibles->begin(); it != visibles->end(); ++it)
  {
    Renderable* renderable = *it;
    Material* mat = renderable->GetMaterial();

    // Set texture units
    if (mat)
    {
      for (unsigned short i = 0; i < mat->GetTextureUnitCount(); ++i)
      {
        const TextureUnit* unit = mat->GetTextureUnit(i);
        GLTexture* t = static_cast<GLTexture*>(unit->GetTexture());
        glActiveTexture(GL_TEXTURE1); // This is needed because the first texture map slot is hold by the LBuffer!
        glBindTexture(GL_TEXTURE_2D, t->GetGLId());
      }
    }

    mMaterialStageVS->Update();
    mMaterialStageFS->Update();

    // Render the object
    RenderOperation rop;
    renderable->GetRenderOperation(rop);
    mTargetRenderSystem->Render(rop);
  }
} 
```

NVIDIA CG 着色器：

```
// Vertex shader for Deferred Rendering geometry stage.

float4x4 gWorldMtx;
float4x4 gViewMtx;
float4x4 gProjectionMtx;

struct a2v
{
    float3 position : POSITION;
    float3 normal   : NORMAL;
    float2 texCoord : TEXCOORD0;
};

struct v2f
{
    float4 position     : POSITION;
    float3 normal       : TEXCOORD0;
    float3 wPosition    : TEXCOORD1;
    float2 texCoord     : TEXCOORD2;
};

v2f PPL_geometry_stage_vs(a2v IN)
{
    v2f OUT;

    // Transform to world space
    OUT.wPosition = mul(gWorldMtx, float4(IN.position, 1.0f)).xyz;
    OUT.normal = mul(gWorldMtx, float4(IN.normal, 0.0f)).xyz;

    // Transform to homogeneous clip space
    OUT.position = mul(gViewMtx, float4(OUT.wPosition, 1.0f));
    OUT.position = mul(gProjectionMtx, OUT.position);

    OUT.texCoord = IN.texCoord;

    return OUT;
}

// Fragment shader for Pre-pass Lighing geometry stage.

struct f2a
{
    float4 position : COLOR0;
    float4 normal   : COLOR1;
};

f2a PPL_geometry_stage_fs(v2f IN)
{
    f2a OUT;

    OUT.position = float4(IN.wPosition, 1.0f);
    OUT.normal = float4(normalize(IN.normal), 1.0f);

    return OUT;
}

// Vertex shader for Pre-pass lighing light stage.

float4x4 gWorldMtx;
float4x4 gViewMtx;
float4x4 gProjectionMtx;

struct a2v
{
    float3 position : POSITION;
};

struct v2f
{
    float4 position : POSITION;
    float4 lightPos : TEXCOORD0;
};

v2f PPL_light_stage_vs(a2v IN)
{
    v2f OUT;

    float4x4 wv   = mul(gWorldMtx, gViewMtx);
    float4x4 wvp  = mul(gViewMtx, gProjectionMtx);
    wvp           = mul(wvp, gWorldMtx);

    // Only transforms position to world space
    OUT.position  = mul(wvp, float4(IN.position, 1.0f));

    // Copy light position to calculate fragment coordinate
    OUT.lightPos = OUT.position;

    return OUT;  
}

// Fragment shader for Pre-pass lighing light stage.

// Light structures
struct BaseLight
{
    float3 color;
    float ambientIntensity;
    float diffuseIntensity;
};

struct DirectionalLight
{
    struct BaseLight base;
    float3 direction;
};

struct Attenuation
{
    float constant;
    float linearr;
    float quadratic;
};

struct PointLight
{
    struct BaseLight base;
    float3 position;
    Attenuation atten;
};

struct SpotLight
{
    struct PointLight base;
    float3 direction;
    float cutoff;
};

// G-Buffer textures
sampler2D gPositionMap  : TEXUNIT0;
sampler2D gNormalMap    : TEXUNIT1;

// Light variables
float3 gEyePosition;
DirectionalLight gDirectionalLight;
PointLight gPointLight;
SpotLight gSpotLight;
int gLightType;
float gSpecularPower;

float4 PPL_light_stage_point_light_fs(v2f IN) : COLOR0
{
    // Get fragment coordinate, from NDC space [-1, 1] to [0, 1].
    float2 fragcoord = ((IN.lightPos.xy / IN.lightPos.w) + 1.0f) / 2.0f;

    // Calculate lighting with G-Buffer textures
    float3 position = tex2D(gPositionMap, fragcoord).xyz;
    float3 normal = tex2D(gNormalMap, fragcoord).xyz;
    normal = normalize(normal);

    // Attenuation
    float3 lightDirection = position - gPointLight.position;
    float dist = length(lightDirection);
    float att = gPointLight.atten.constant + gPointLight.atten.linearr * dist + gPointLight.atten.quadratic * dist * dist;

    // NL
    lightDirection = normalize(lightDirection);
    float NL = dot(normal, -lightDirection);

    // Specular (Blinn-Phong)
    float specular = 0.0f;
    //if (NL > 0)
    //{
    //  float3 vertexToEye = normalize(gEyePosition - position);
    //  float3 lightReflect = normalize(reflect(lightDirection, normal));
    //  specular = pow(saturate(dot(vertexToEye, lightReflect)), gSpecularPower);
    //}

    // Apply attenuation to NL
    NL = NL / min(1.0, att);

    float3 lightColor = gPointLight.base.color * gPointLight.base.diffuseIntensity;
    return float4(lightColor.r, lightColor.g, lightColor.b, 1.0f) * NL;
}

// Vertex shader for Pre-pass lighing material stage.

float4x4 gWorldMtx;
float4x4 gViewMtx;
float4x4 gProjectionMtx;

struct a2v
{
    float3 position : POSITION;
    float3 normal   : NORMAL;
    float2 texcoord : TEXCOORD0;
};

struct v2f
{
    float4 position : POSITION;
    float2 texcoord : TEXCOORD0;
    float3 normal   : TEXCOORD1;
    float4 projPos  : TEXCOORD2;
};

v2f PPL_material_stage_vs(a2v IN)
{
    v2f OUT;

    float4x4 wv   = mul(gWorldMtx, gViewMtx);
    float4x4 wvp  = mul(gViewMtx, gProjectionMtx);
    wvp           = mul(wvp, gWorldMtx);

    // Only transforms position to world space
    OUT.position  = mul(wvp, float4(IN.position, 1.0f));

    // Normal (It's not necessary, but i have to see if it influences the execution)
    OUT.normal    = mul(gWorldMtx, float4(IN.normal, 0.0f)).xyz;

    // Copy texture coordinates
    OUT.texcoord = IN.texcoord;

    // Copy projected position to get the fragment coordinate
    OUT.projPos = OUT.position;

    return OUT;
}

// Fragment shader for Pre-pass lighing material stage.

// L-buffer texture
sampler2D gLightMap : TEXUNIT0;
// Object's material specific textures
sampler2D gColorMap : TEXUNIT1;

float4 PPL_material_stage_fs(v2f IN) : COLOR0
{
    float2 fragcoord = ((IN.projPos.xy / IN.projPos.w) + 1.0f) / 2.0f;

    // Get all light contributions for this pixel
    float4 light = tex2D(gLightMap, fragcoord);
    float3 combined = saturate(light.rgb);// + light.aaa);

    // Get material albedo from texture map
    float4 diffuse = tex2D(gColorMap, IN.texcoord);

    return float4(combined, 1.0f) * diffuse;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:16:25.840

您可能希望使用 WPOS 寄存器（HLSL 中的 VPOS）而不是计算屏幕位置。

# c# - 为什么这两个十六进制数字在在线计算中出现相同的整数？

> ID：13510442
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:17:13.767
> 
> 标签：c#, hex

这真的很烦人，我有两个十六进制数字，我 90% 确定其中一个正好高 2 个增量。但是，当我将它们输入在线十六进制到十进制计算器时，它们的结果是一样的。怎么会这样？

```
lower number at
0x00010471000001BF001F = 18766781122258862000

higher number at
0x00010471000001BF0021 = 18766781122258862000 
```

? 到底是怎么回事 ？

我使用的计算是... [http://www.rapidtables.com/convert/number/hex-to-decimal.htm](http://www.rapidtables.com/convert/number/hex-to-decimal.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:23:17.913

较高的数字是 2 而不是 1。0x00010471000001BF0020 介于两者之间。我认为您的问题与溢出问题有关，因为数字非常大。可能您正在使用的计算器正在将值转换为浮点数，这会降低准确性。

您发布的值需要至少 9 个字节来表示（或至少 65 位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:42:08.850

首先，您为什么将这个问题归类在 C# 标签下？这个问题很可能是由于值太大而转换器不能很好地处理大数字。

只是因为这是用 C# 标记的。添加对 .NET 组件 System.Numerics 的引用。要将大的十六进制转换为整数，请使用 BigInteger。

```
 System.Numerics.BigInteger a;
        System.Numerics.BigInteger.TryParse("00010471000001BF001F", System.Globalization.NumberStyles.HexNumber,null,out a);
        Console.WriteLine(a.ToString());
        System.Numerics.BigInteger.TryParse("00010471000001BF0021", System.Globalization.NumberStyles.HexNumber, null, out a);
        Console.WriteLine(a.ToString()); 
```

输出

```
18766781122258862111
18766781122258862113 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:26:54.117

首先Hex的基础知识应该告诉你20在1F和21之间，所以最大的数字是小数字+2。其次，如果你使用一个未知的工具，你必须确定它是可靠的。您的工具显然无法处理如此大的数字。Wolfram Alpha 为您提供正确答案： [http](http://www.wolframalpha.com/input/?i=0x00010471000001BF001F+in+decimal) ://www.wolframalpha.com/input/?i=0x00010471000001BF001F+in+decimal http://www.wolframalpha.com/input/?i=0x00010471000001BF0021+in+decimal

# installation - NSIS 静默安装程序 - /SD IDCANCEL 标志

> ID：13510446
> 
> 赞同：0
> 
> 时间：2012-11-22T10:17:29.803
> 
> 标签：installation, nsis, flags, silent-installer

我有这个 NSIS 脚本：

```
Section "!${SECTION_MAIN}" sectionMainID
    SetOutPath "$INSTDIR"
    whileRuns:
                LockedList::FindProcess "$INSTDIR\bin\${PRODUCT_NAME}.exe"
                Pop $R0
                ${If} $R0 != ``
                      MessageBox MB_OKCANCEL|MB_ICONEXCLAMATION "this is running. Please close it first."  IDOK OK IDCANCEL CANCEL 
                      OK:
                         Goto whileMLRuns
                      CANCEL:
                         Abort
                ${EndIf} 
```

我想把它改成静音模式。在静默模式下，我希望自动消息框以取消结束。所以，根据文档，我放了一个`/SD`标志，命令`IDCANCEL`在行的末尾与`MessageBox`里面。像那样 ：

```
Section "!${SECTION_MAIN}" sectionMainID
    SetOutPath "$INSTDIR"
    whileRuns:
                LockedList::FindProcess "$INSTDIR\bin\${PRODUCT_NAME}.exe"
                Pop $R0
                ${If} $R0 != ``
                      MessageBox MB_OKCANCEL|MB_ICONEXCLAMATION "this is running. Please close it first."  IDOK OK IDCANCEL CANCEL /SD IDCANCEL
                      OK:
                         Goto whileMLRuns
                      CANCEL:
                         Abort
                ${EndIf} 
```

然而，这是失败的。所以，我把它改成

```
Section "!${SECTION_MAIN}" sectionMainID
    SetOutPath "$INSTDIR"
    whileRuns:
                LockedList::FindProcess "$INSTDIR\bin\${PRODUCT_NAME}.exe"
                Pop $R0
                ${If} $R0 != ``
                      MessageBox MB_OKCANCEL|MB_ICONEXCLAMATION "this is running. Please close it first."  IDOK OK IDCANCEL CANCEL /SD CANCEL
                      OK:
                         Goto whileMLRuns
                      CANCEL:
                         Abort
                ${EndIf} 
```

与 now`CANCEL`而不是`IDCANCEL`在同一行。这是因为使用这种语法，它使用与用户交互模式相同的语法进行分支。但是，它似乎也不起作用。

我的标志有什么问题，我该如何解决？我应该使用带有跳转的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:36:54.867

我认为参数顺序确实很重要。尝试使用`IDCANCEL`以下顺序：

```
MessageBox MB_OKCANCEL|MB_ICONEXCLAMATION "a-message" /SD IDCANCEL IDOK OK IDCANCEL CANCEL 
```

# php - 无法理解 Wordpress 中的 PHP 电子邮件问题

> ID：13510447
> 
> 赞同：1
> 
> 时间：2012-11-22T10:17:33.947
> 
> 标签：php, wordpress, email, smtp

我正在尝试建立一个系统，向客户发送一封包含单选按钮和提交按钮的电子邮件，然后将他们定向到包含 PHP 的 Wordpress 页面，然后该页面将向我们的支持团队发送一封包含详细信息的电子邮件。我已经在 wordpress 上安装了 exec_php 并使用了从我在网上找到的那些修改的 PHP 脚本，但是尽管检查了我能想到的所有内容，它仍然没有发回电子邮件，尽管有一些 PHP 正在执行。

wordpress 页面上的 PHP：

```
<?php if($_SERVER["REQUEST_METHOD"] == "POST")
{
$to = "example@gmail.com";
$from = "no-reply@oursite.co.uk";
$resolved = $_POST['yesno'];
if ($resolved=='This issue was resolved.')
{$body = $_POST['cust'] . "has responded to an email asking for feedback regarding the closure of case number" . $_POST['casesendid'] . "The person in question responded that they are satisfied with the resolution. Please do not reply to this email.";}
else
{$body= $_POST['cust'] . "has responded to an email asking for feedback regarding the closure of case number" . $_POST['casesendid'] . "The person in question responded that they are not satisfied with the resolution. Please do not reply to this email.";}
$subject = "Automated Feedback Message";
$SMTPMail = new SMTPClient ($SmtpServer, $SmtpPort, $SmtpUser, $SmtpPass, $from, $to, $subject, $body);
$SMTPChat = $SMTPMail->SendMail();
}
echo $resolved;
?> 
```

该页面的模板包含php包含到同一目录中的两个文件，在“settings.php”中：

```
<?php
//Server Address
$SmtpServer="smtp.hosts.co.uk";
$SmtpPort="25"; //default
$SmtpUser="oursite.co.uk";
$SmtpPass="password";
?> 
```

在 mailclass.php 中：

```
<?php
class SMTPClient
{

function SMTPClient ($SmtpServer, $SmtpPort, $SmtpUser, $SmtpPass, $from, $to, $subject, $body)
{

$this->SmtpServer = $SmtpServer;
$this->SmtpUser = base64_encode ($SmtpUser);
$this->SmtpPass = base64_encode ($SmtpPass);
$this->from = $from;
$this->to = $to;
$this->subject = $subject;
$this->body = $body;

if ($SmtpPort == "")
{
$this->PortSMTP = 25;
}
else
{
$this->PortSMTP = $SmtpPort;
}
}

function SendMail ()
{
if ($SMTPIN = fsockopen ($this->SmtpServer, $this->PortSMTP))
{
fputs ($SMTPIN, "EHLO ".$HTTP_HOST."\r\n");
$talk["hello"] = fgets ( $SMTPIN, 1024 );
fputs($SMTPIN, "auth login\r\n");
$talk["res"]=fgets($SMTPIN,1024);
fputs($SMTPIN, $this->SmtpUser."\r\n");
$talk["user"]=fgets($SMTPIN,1024);
fputs($SMTPIN, $this->SmtpPass."\r\n");
$talk["pass"]=fgets($SMTPIN,256);
fputs ($SMTPIN, "MAIL FROM: <".$this->from.">\r\n");
$talk["From"] = fgets ( $SMTPIN, 1024 );
fputs ($SMTPIN, "RCPT TO: <".$this->to.">\r\n");
$talk["To"] = fgets ($SMTPIN, 1024);
fputs($SMTPIN, "DATA\r\n");
$talk["data"]=fgets( $SMTPIN,1024 );
fputs($SMTPIN, "To: <".$this->to.">\r\nFrom: <".$this->from.">\ \nSubject:".$this->subject."\r\n\r\n\r\n".$this->body."\r\n.\r\n");
$talk["send"]=fgets($SMTPIN,256);
//CLOSE CONNECTION AND EXIT ...
fputs ($SMTPIN, "QUIT\r\n");
fclose($SMTPIN);
//
}
return $talk;
}
}
?> 
```

所有密码和用户名字段都填充了我们的实际详细信息，当重定向到页面时，会显示 $resolved 的正确值，暗示 php 确实执行了，但是 $to 地址从未收到任何邮件。如果有人有任何建议，请提供帮助，因为这正在变成一场噩梦。

# unit-testing - 自动化测试：用于可视化和存档测试结果的工具

> ID：13510448
> 
> 赞同：3
> 
> 时间：2012-11-22T10:17:38.103
> 
> 标签：unit-testing, junit, automated-tests

我为一个项目创建了一些自动化软件测试，这些测试将结果收集在一个 junit xml 文件结构中。

我正在寻找的是一个基于 Web 的工具/解决方案来显示测试结果（以 junit xml 文件的形式提供），比如运行了哪些测试，在什么时间，有多少成功，失败，错误，跳过，.. .，以一种很好的方式，能够单击各种结果/按钮等以获取更多详细信息或选择不同的数据视图（例如，向我显示过去 10 天给定测试的图形表示.. .)。该数据库正在外部更新，因此只需要存储、组织和提供对 xml 文件结果的视图。不需要构建或内部测试执行。

如果您对此类有用的工具有任何想法，否则我将更新此问题以更清楚地说明我在寻找什么或从哪里获得此类信息。

PS 我已经研究过使用 CDash 来达到这些目的，但是 Cdash 似乎会产生更多的问题，因为使用 CDash 来归档和显示自动化测试结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:21:25.707

[Teamcity](http://www.jetbrains.com/teamcity/)将做到这一点，并且在一定限度内免费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T19:21:56.470

迟到了，但似乎[**Jenkins 持续集成**](http://jenkins-ci.org/)正是您所要求的。它是免费的，并且有一个漂亮的网络界面。

# c# - 如何在 Visual Studio 中使用堆栈跟踪进行调试？

> ID：13510450
> 
> 赞同：4
> 
> 时间：2012-11-22T10:17:41.570
> 
> 标签：c#, visual-studio-2010, debugging, asp-classic

我想知道当我们调试器返回这样的错误页面时，是否有可能知道 Visual Studio 中的确切函数或代码行会造成问题：

![在此处输入图像描述](../Images/466028f7919bcb3ae3c47ba524bca818.png)

因为如果我阅读堆栈跟踪，我无法在现有代码中找到函数名称.....很奇怪，很遗憾，很难调试。非常感谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T10:35:56.270

在调试时，您可以检查**调用堆栈**以了解有关代码执行顺序的想法。

通过使用调用堆栈窗口，您可以查看当前在堆栈上的函数或过程调用。

检查此以获取更多详细信息：[如何：使用调用堆栈窗口](http://msdn.microsoft.com/en-us/library/a3694ts5%28v=vs.100%29.aspx)

![在此处输入图像描述](../Images/8bb29c547de83f7265a3cba39b179868.png)

# wordpress - 使用 DFP 提供 Wordpress 背景图片

> ID：13510451
> 
> 赞同：1
> 
> 时间：2012-11-22T10:17:49.880
> 
> 标签：wordpress, google-dfp

我们目前在我们的网站上销售广告包，其中包括普通横幅广告以及其他一些附加值，如背景图片、社论等。

DFP 在管理展示广告方面做得很好，但我们想看看一个也可以加载背景图片的解决方案。

我们目前使用 Wordpress 作为我们的发布平台，是否可以在某个地方包含在脚本中？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:29:49.047

这样做相当简单...您只需要制作一个新的广告单元，它会加载使用 javascript 更改网站背景的第三方广告素材...可以[在此处找到](https://productforums.google.com/forum/#!msg/dfp/0aigKPjxj3A/mTi2OYC-8EMJ)执行此操作的代码示例。

# java - SQLite 插入查询错误

> ID：13510452
> 
> 赞同：1
> 
> 时间：2012-11-22T10:17:51.380
> 
> 标签：java, android, sql, sqlite, android-sqlite

我正在使用以下查询将数据插入 Android 的 SQLite 数据库。

```
INSERT INTO ServerData 
VALUES('404', '192.168.145.101', '1', '1', '1'),
      ('404', '192.168.145.101', '2', '1', '1') 
```

但我收到一个错误，LogCat 详细信息如下：

> 11-22 15:14:56.588: E/Database(1609): 0x2e3e30 上的失败 1（靠近 ",": 语法错误）在准备 'INSERT INTO ServerData VALUES('404','192.168.145.101','1' ,'1','1'),('404','192.168.145.101','2','1','1')'。
> 11-22 15:14:56.618: W/dalvikvm(1609): threadid=10: 线程以未捕获的异常退出 (group=0x40015560)
> 11-22 15:14:56.648: E/AndroidRuntime(1609): 致命异常: AsyncTask #1
> 11-22 15:14:56.648: E/AndroidRuntime(1609): java.lang.RuntimeException: 执行 doInBackground() 时发生错误
> 11-22 15:14:56.648: E/AndroidRuntime(1609): 在 android .os.AsyncTask$3.done(AsyncTask.java:200)
> 11-22 15:14:56.648: E/AndroidRuntime(1609): 在 java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274) 11-22 15:14:56.648: E/AndroidRuntime(1609) : 在 java.util.concurrent.FutureTask.setException(FutureTask.java:125) 11-22 15:14:56.648: E/AndroidRuntime(1609): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java :308) 11-22 15:14:56.648: E/AndroidRuntime(1609): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 11-22 15:14:56.648: E/AndroidRuntime(1609 ): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 11-22 15:14:56.648: E/AndroidRuntime(1609): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor. java:581) 11-22 15:14:56.648: E/AndroidRuntime(1609): 在 java。lang.Thread.run(Thread.java:1019) 11-22 15:14:56.648: E/AndroidRuntime(1609): Caused by: android.database.sqlite.SQLiteException: near ",": 语法错误：INSERT INTO ServerData值('404','192.168.145.101','1','1','1'),('404','192.168.145.101','2','1','1') 11- 22 15:14:56.648: E/AndroidRuntime(1609): 在 android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method) 11-22 15:14:56.648: E/AndroidRuntime(1609): 在 android.database.sqlite .SQLiteDatabase.execSQL(SQLiteDatabase.java:1763) 11-22 15:14:56.648: E/AndroidRuntime(1609): 在 com.pcloud.fileshare.database.DBMethods.InsertToServerTable(DBMethods.java:228) 11-22 15 ：14：56.648：E / AndroidRuntime（1609）：在com.pcloud。fileshare.dataAccess.commonMethod.updateServerTable(commonMethod.java:472) 11-22 15:14:56.648: E/AndroidRuntime(1609): at com.pcloud.fileshare.mainPages.userLogin$backgroundTask.doInBackground(userLogin.java:238 ) 11-22 15:14:56.648: E/AndroidRuntime(1609): at com.pcloud.fileshare.mainPages.userLogin$backgroundTask.doInBackground(userLogin.java:1) 11-22 15:14:56.648: E/AndroidRuntime (1609): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) 11-22 15:14:56.648: E/AndroidRuntime(1609): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask .java:306) 11-22 15:14:56.648: E/AndroidRuntime(1609): ... 4 更多 11-22 15:15:00.059: E/WindowManager(1609): 活动 com.pcloud.fileshare.mainPages .userLogin 泄露了窗口 com.android.internal.policy.impl。PhoneWindow$DecorView@40529668 最初添加在这里 11-22 15:15:00.059: E/WindowManager(1609): android.view.WindowLeaked: Activity com.pcloud.fileshare.mainPages.userLogin 已经泄露了窗口 com.android.internal .policy.impl.PhoneWindow$DecorView@40529668 最初添加在这里 11-22 15:15:00.059: E/WindowManager(1609): at android.view.ViewRoot.(ViewRoot.java:258) 11-22 15: 15:00.059: E/WindowManager(1609): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148) 11-22 15:15:00.059: E/WindowManager(1609): 在 android.view.WindowManagerImpl.addView (WindowManagerImpl.java:91) 11-22 15:15:00.059: E/WindowManager(1609): 在 android.view.Window$LocalWindowManager.addView(Window.java:424) 11-22 15:15:00.059:E/WindowManager(1609): 在 android.app.Dialog.show(Dialog.java:241) 11-22 15:15:00.059: E/WindowManager(1609): 在 com.pcloud.fileshare.mainPages.userLogin$backgroundTask .onPreExecute(userLogin.java:251) 11-22 15:15:00.059: E/WindowManager(1609): 在 android.os.AsyncTask.execute(AsyncTask.java:391) 11-22 15:15:00.059: E /WindowManager(1609): 在 com.pcloud.fileshare.mainPages.userLogin$1.onItemClick(userLogin.java:221) 11-22 15:15:00.059: E/WindowManager(1609): 在 android.widget.AdapterView.performItemClick (AdapterView.java:284) 11-22 15:15:00.059: E/WindowManager(1609): 在 android.widget.ListView.performItemClick(ListView.java:3513) 11-22 15:15:00.059: E/WindowManager (1609): 在 android.widget.AbsListView$PerformClick.run(AbsListView.java:1812) 11-22 15:15:00.059: E/WindowManager(1609): 在 android.os.Handler.handleCallback(Handler.java:587) 11-22 15:15:00.059: E/WindowManager(1609) : 在 android.os.Handler.dispatchMessage(Handler.java:92) 11-22 15:15:00.059: E/WindowManager(1609): 在 android.os.Looper.loop(Looper.java:123) 11-22 15:15:00.059: E/WindowManager(1609): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 11-22 15:15:00.059: E/WindowManager(1609): 在 java.lang.reflect .Method.invokeNative(Native Method) 11-22 15:15:00.059: E/WindowManager(1609): at java.lang.reflect.Method.invoke(Method.java:507) 11-22 15:15:00.059: E/WindowManager(1609): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-22 15:15:00.059: E/WindowManager(1609): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 11-22 15:15:00.059: E/WindowManager( 1609）：在 dalvik.system.NativeStart.main（本机方法）

相同的查询在 SQLite Expert 中可以正常工作，但在代码中却不行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:21:19.710

检查[https://stackoverflow.com/a/5009740/1434631中的解决方案](https://stackoverflow.com/a/5009740/1434631)

您不能使用**逗号分隔**在**sqlite**中插入多行..

最好使用[SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

```
ContentValues values = new ContentValues();
for(int i = 0; i<=5; i++) {
values.put(COLUMN_NAME, i);
values.put(COLUMN_NAME, 0);
db.insert(TABLE_NAME, null, values);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:22:18.180

试试这个你不能插入用逗号分隔的多个值

```
INSERT INTO ServerData VALUES('404','192.168.145.101','1','1','1')

 INSERT INTO ServerData VALUES ('404','192.168.145.101','2','1','1') 
```

试试这个

```
 INSERT INTO 'tablename' ('column1', 'column2') VALUES
    ('data1', 'data2'),
    ('data3', 'data4'),
    ('data5', 'data6'),
   ('data7', 'data8'); 
```

可以重铸为 sqlite 为：

```
 INSERT INTO 'tablename'
  SELECT 'data1' AS 'column1',
         'data2' AS 'column2'
 UNION SELECT 'data3', 'data4'
  UNION SELECT 'data5', 'data6'
  UNION SELECT 'data7', 'data8' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:40:03.240

在 SQLite 中，不能使用逗号分隔符在表中插入多行。所以，对于你的情况，你可以试试这个：

```
INSERT INTO ServerData
      SELECT '404','192.168.145.101','1','1','1'
UNION SELECT '404','192.168.145.101','2','1','1'; 
```

# c++ - C ++在不使用字符串流的情况下读取具有任意长度和格式的行的多行文件

> ID：13510453
> 
> 赞同：1
> 
> 时间：2012-11-22T10:17:53.083
> 
> 标签：c++, stream, inputstream

我有一个包含以下几行的输入流：

```
# <int> <int>
<some_data_type> <some_data_type> <some_data_type> ..... <some_data_type>
<some_data_type_1> <some_data_type_2> <some_data_type_3> <some_data_type_1> <some_data_type_2> <some_data_type_3> .... <some_data_type_1> <some_data_type_2> <some_data_type_3> 
```

在上面的流中，所有三行都是不同的，并且必须以不同的方式解析。目前，我使用的阅读方法如下：

```
void reader( std::istream & is, DataStructure & d ){
  std::string line;
  getline(is,line);
  std::stringstream s(line);
  //parse line 1

  getline(is,line);
  std::stringstream line2(line);
  //parse line 2

  getline(is,line);
  std::stringstream line3(line);
  //parse line 3

 } 
```

现在的想法是根本不使用`std::stringstream`，因为一行可以任意大，我们不想将所有内容两次加载到内存中。因此，如果可以从输入流中直接读取到用户给定的数据结构 d 中会更好。

一个想法是利用`std::istream_iterator`但不幸的是不同的行有不同的解析需求。例如，在最后一行中，流中的三个元素一起构成了一个数据元素。

目前对我来说似乎合理的唯一想法是直接处理流缓冲区。如果有人可以推荐一种更好的方法，那就太好了。

注意：**不能**使用像`std::stringstream`. 必须从流中直接读取到用户提供的数据结构中。

编辑：请注意，我们只允许通过文件一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:11:56.173

> 现在的想法是根本不使用 std::stringstream，因为一行可以任意大，我们不想将所有内容加载到内存中两次。因此，如果可以从输入流中直接读取到用户给定的数据结构 d 中会更好。

*奥拉夫*解释了上面的提取运算符，但是我们有一个新的要求：

> 这仅适用于第一行，其中已知有固定数量的元素。

**和**

> (2) 不幸的是，除了我知道的数据结构的每个实例都需要用存储在三个不同行中的信息来实例化之外，我没有鉴别器。所有三行都有不同的长度和不同的数据元素。另外，我无法更改格式。

**加**

> (3) 所有信息都被视为无符号整数。

现在下一个问题是我们不知道数据结构实际上是什么，所以考虑到之前发生的事情，它似乎以某种方式是动态的。因为我们可以将数据视为无符号整数，所以我们可以使用提取运算符，但读入动态成员：

```
vector<unsigned int> myUInts;
...
inFile >> currentUInt;
myUInts.push_back(currentUInt); 
```

但随后在哪里停止的问题开始发挥作用。是在第一行的末尾，第三行吗？如果您需要读取任意数量的无符号整数，同时仍在检查新行，那么您还需要处理空白：

```
inFile.unsetf(ios_base::skipws); 
```

在没有更明确的要求的情况下，您实际处理的方式超出了我目前所能说的范围。但我猜它会是这样的形式：

```
 inFile >> myMember;
 char next = infile.peek()
 //skip whitespace and check for new line
 //Repeat until data structure filled, and repeat for each data structure. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:30:03.693

然后根本不要使用`std::getline()`。为您的类型定义 istream 运算符并直接使用它们

```
std::istream &operator >>(std::istream &f, DataStructure &d)
{
    f >> d.member1 >> d.member2 >> ...;
    return f;
}

void reader(std::istream & is, DataStructure &d)
{
    is >> d;
} 
```

无需摆弄`std::istream_iterator`或直接操作流缓冲区。

# android - Android：确定ActionBar Tab的高度

> ID：13510455
> 
> 赞同：4
> 
> 时间：2012-11-22T10:18:01.800
> 
> 标签：android, android-actionbar, android-tabs

没有人知道如何使用“NAVIGATION_MODE_TABS”中的 ActionBar 来确定 Tab 的实际高度。我可以确定 ActionBar 的高度，但这不包括 Tabs 高度。我还可以确定图标的高度（我没有使用文本，但如果我在选项卡上设置文本，这也是可能的。

**但**似乎 Tab 的内容周围有一些填充或边距，我无法提取它，因此我无法确定实际高度。

那么我能以某种方式获得这个填充/边距，还是有另一种解决方案来获得 ActionBar-height 加上 Tabs-height？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:23:32.497

您可以参考 stackoverflow.com/a/9287224/1627599。我希望你能有所了解。干杯!

# character-encoding - golang 将 iso8859-1 转换为 utf8

> ID：13510458
> 
> 赞同：13
> 
> 时间：2012-11-22T10:18:12.287
> 
> 标签：character-encoding, go

我正在尝试将 ISO 8859-1 编码字符串转换为 UTF-8。

以下函数适用于我的包含德语变音符号的测试数据，但我不太确定 rune(b) 演员假定的编码源。它是假设某种默认编码，例如 ISO8859-1 还是有什么办法告诉它使用什么编码？

```
func toUtf8(iso8859_1_buf []byte) string {
   var buf = bytes.NewBuffer(make([]byte, len(iso8859_1_buf)*4))
   for _, b := range(iso8859_1_buf) {
      r := rune(b)
      buf.WriteRune(r)
   }
   return string(buf.Bytes())
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T11:11:15.313

*rune*是*int32*的别名，当涉及到编码时，假定 rune 具有 Unicode 字符值（代码点）。所以`b`in的值`rune(b)`应该是一个 unicode 值。对于 0x00 - 0xFF，此值与 Latin-1 相同，因此您不必担心。

然后您需要将符文编码为 UTF8。但是这种编码只是通过将 a 转换`[]rune`为`string`.

这是一个不使用 bytes 包的函数示例：

```
func toUtf8(iso8859_1_buf []byte) string {
    buf := make([]rune, len(iso8859_1_buf))
    for i, b := range iso8859_1_buf {
        buf[i] = rune(b)
    }
    return string(buf)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:16:12.033

的效果

```
r := rune(expression) 
```

是：

*   `r`用类型声明变量`rune`（int32 的别名）。
*   `r`用表达式的值初始化变量。

不涉及（重新）编码，并且只有通过在代码中显式编写/处理一些重新编码才能说应该选择使用哪个。幸运的是，在这种情况下，不需要（重新）编码，Unicode 以与 ASCII 相当的方式合并了 ISO 8859-1 的那些代码。（如果我[在这里](http://en.wikipedia.org/wiki/ISO/IEC_8859-1#Codepage_layout)检查正确）

# ios - 在iOS中单击按钮更改图像

> ID：13510463
> 
> 赞同：2
> 
> 时间：2012-11-22T10:18:15.040
> 
> 标签：ios, xcode4.5

我是 iOS 开发的新手。我当前的任务是单击按钮更改图像。屏幕将由 4-5 个图像组成，单击按钮应更改 4-5 个图像之一。请指导我如何进行。

提前致谢。

问候， Bhaskar M.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:31:32.973

在您的 .h 文件中声明一个数组 say `imageArray`。

在 .m 文件中`viewDidLoad`使用以下内容：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

imageArray=[[NSMutableArray alloc]init];

[imageArray addObject:@"mage1.png"];
[imageArray addObject:@"mage2.png"];
[imageArray addObject:@"mage3.png"];
[imageArray addObject:@"mage4.png"];
[imageArray addObject:@"mage5.png"];
[imageArray addObject:@"mage6.png"];
[imageArray addObject:@"mage7.png"];

} 
```

在您的按钮操作中使用以下

```
-(IBAction) buttonPushed:(id)sender{

int x = arc4random() % 7;
   //MyImageView will be the one you need to change
   //you can choose it randomly. It's up to you
   [MyImageView setImage:[UIImage imageNamed:[NSString stringwithformat:@"%@",[imageArray objectAtIndex:x]]]];

//[MyImageView setImage:[UIImage imageNamed:[imageArray objectAtIndex:x]]];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:22:44.413

您应该首先创建一个在您按下按钮时会触发的方法。然后做这样的事情

```
-(void) buttonPushed{
   //MyImageView will be the one you need to change
   //you can choose it randomly. It's up to you
   [MyImageView setImage:[UIImage imageNamed:@"qwe.jpg"]];
} 
```

# javadoc - javadoc 似乎将 .aj 文件中的类名视为包名

> ID：13510464
> 
> 赞同：1
> 
> 时间：2012-11-22T10:18:15.150
> 
> 标签：javadoc, aspectj

我正在为一个主要是纯 Java 的库生成 Javadoc，但是因为生成了一个类并且我需要向该类添加一个方法（并且我不能为此使用继承），所以我创建了一个 AspectJ 文件它。自然，我必须通过在它所属的类前面加上前缀来定义新方法。

现在 Javadoc 正在中止并显示错误消息：

```
javadoc: error - Illegal package name: "C:\company\project\library\trunk\library\src\main\java\com\company\project\library\classname_extensionname.aj" 
```

（替换名称以保护无辜者）在 .aj 文件中，我有：

```
package com.company.project.library;

import com.company.project.library.classname;

public aspect classname_extensionname {
   // various static final variables
   // various static methods to help the method I'm publicising
   public String classname.toString() {
      StringBuffer buffer = new StringBuffer();
      buffer.append( /* various bits and pieces */ );
      return buffer.toString();
   }
} 
```

（原始问题错误地在“公共方面”开头的行末尾有“.aj”）

那么这有什么问题呢？

我在 Spring Tool Suite 3.1.0.RELEASE (Eclipse) 中使用 jdk 1.7_09

PS 我尝试使用 ajdoc，但无法解析 org.junit、org.slf4j 或 org.apache.xxx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:19:26.210

您应该能够从 Maven 中的 javadoc 插件中排除 .aj 文件。许多在源代码上工作的工具产品还不支持方面（pmd、checkstyle、findbugs 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:00:34.167

我会去掉文件名中的下划线，将你的方面称为“ClassnameAdvice”，将.aj 文件称为 ClassnameAdvice.aj。或者，您可能只需要在 .aj 文件中删除方面名称中的“.aj”。

# msbuild - 卡住不活动的 msbuild.exe 进程、锁定 Stylecop.dll、Nuget AccessViolationException 和 CI 构建相互冲突的奥秘

> ID：13510465
> 
> 赞同：64
> 
> 时间：2012-11-22T10:18:17.343
> 
> 标签：msbuild, nuget, stylecop

观察：

*   在我们的 Jenkins 构建服务器上，我们看到很多 msbuild.exe 进程（约 100 个）在作业完成后挂起，内存使用量约为 20mb，CPU 活动为 0%。

*   使用不同版本的 stylecop 构建会*间歇性地*失败：

    `workspace\packages\StyleCop.MSBuild.4.7.41.0\tools\StyleCop.targets(109,7): error MSB4131: The "ViolationCount" parameter is not supported by the "StyleCopTask" task. Verify the parameter exists on the task, and it is a gettable public instance property.`

*   Nuget.exe*间歇性*退出并出现以下访问冲突错误 (0x0000005)：

    `.\workspace\.nuget\nuget install .\workspace\packages.config -o .\workspace\packages" exited with code -1073741819.`

MsBuild 通过 Jenkins Matrix 作业以下列方式启动，并启用了“BuildInParallel”：

```
 `msbuild /t:%Targets% /m
    /p:Client=%Client%;LOCAL_BUILD=%LOCAL_BUILD%;BUILD_NUMBER=%BUILD_NUMBER%;
    JOB_NAME=%JOB_NAME%;Env=%Env%;Configuration=%Configuration%;Platform=%Platform%;
    Clean=%Clean%; %~dp0\_Jenkins\Build.proj` 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-22T10:18:17.343

经过*大量*的挖掘并尝试了各种没有效果的事情后，我最终创建了一个新的最小解决方案，它重现了这个问题而几乎没有其他事情发生。这个问题原来是由 msbuild 的多核并行化 - 'm' 参数引起的。

*   'm' 参数告诉 msbuild 生成“节点”，这些节点在构建结束后将保持活动状态，然后被新构建重新使用！
*   StyleCop 'ViolationCount' 错误是由给定的构建重新使用另一个构建工作区中的旧版本 stylecop.dll 引起的，其中不支持 ViolationCount。这很奇怪，因为 CI 工作区只包含新版本。似乎一旦将 StyleCop.dll 加载到给定的 MsBuild 节点中，它将为下一次构建保持加载状态。我只能假设这是因为 StyleCop 将某种单例加载到节点进程中？这也解释了构建之间的文件锁定。
*   nuget 访问冲突崩溃现在已经消失（没有其他更改），因此显然与上述节点重用问题有关。
*   由于“m”参数默认为核心数 - 我们看到在我们的构建服务器上为给定作业创建了*24 个*msbuild 实例。

以下帖子很有帮助：

*   [msbuild.exe 保持打开状态，锁定文件](https://stackoverflow.com/questions/3919892/msbuild-exe-staying-open-locking-files)
*   [http://www.hanselman.com/blog/FasterBuildsWithMSBuildUsingParallelBuildsAndMulticoreCPUs.aspx](http://www.hanselman.com/blog/FasterBuildsWithMSBuildUsingParallelBuildsAndMulticoreCPUs.aspx)
*   [http://stylecop.codeplex.com/discussions/394606](http://stylecop.codeplex.com/discussions/394606)
*   [https://github.com/Glimpse/Glimpse/issues/115](https://github.com/Glimpse/Glimpse/issues/115)
*   [http://msdn.microsoft.com/en-us/library/vstudio/ms164311.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms164311.aspx)

修复：

*   将该行添加`set MSBUILDDISABLENODEREUSE=1`到启动 msbuild 的批处理文件中
*   启动 msbuild 与`/m:4 /nr:false`
*   'nr' 参数告诉 msbuild 不要使用“节点重用” - 因此 msbuild 实例在构建完成后关闭并且不再相互冲突 - 导致上述错误。
*   'm' 参数设置为 4 以阻止每个作业产生太多节点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-01T10:22:10.727

我遇到过同样的问题。我发现的一个旧参考是在 csproj 文件中

```
<PropertyGroup>
<StyleCopMSBuildTargetsFile>..\packages\StyleCop.MSBuild.4.7.48.0\tools\StyleCop.targets</StyleCopMSBuildTargetsFile> 
```

此外，我在关闭 Visual Studio 后删除了与 sln 文件位于同一文件夹中的整个“Packages”文件夹。它触发了VS重建文件夹并释放旧版本stylecop的缓存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-14T22:24:31.043

我有一段时间遇到同样的问题，经过一些挖掘后构建需要 6 分钟以上才能完成我发现我们的节点重用错误所以添加 /m:4 /nr:false 立即解决了我的问题

# java - mvn jetty 插件不能在离线（非互联网）模式下工作，但是编译成功

> ID：13510480
> 
> 赞同：0
> 
> 时间：2012-11-22T10:19:17.927
> 
> 标签：java, maven, jetty

mvn jetty:run is not working in offline mode显示异常，如果连接到互联网成功运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:51:29.580

查看您的 pom.xml 并查看是否有从 mvn 存储库下载的任何依赖项。如果您有本地 JAR 文件，则无需使用 mvn build 下载它们。例如：

```
 <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>2.2.2</version>
        <scope>system</scope>
        <systemPath>${project.basedir}/src/main/java/com/api/core/jars/gson-2.2.2.jar</systemPath>
    </dependency> 
```

上述依赖寻找本地 JAR，因此不在线。但：

```
 <dependency>
      <groupId>commons-lang</groupId>
      <artifactId>commons-lang</artifactId>
      <version>2.6</version>
    </dependency> 
```

从 mvn 存储库下载 commons-lang jar。

因此，运行此程序时需要互联网连接。

所以。首先确保您没有需要下载的依赖项。然后，使用：

```
mvn jetty:run -o 
```

在离线模式下运行。

# javascript - 在正文中单击 div 隐藏，当我单击 div 时它也隐藏

> ID：13510495
> 
> 赞同：11
> 
> 时间：2012-11-22T10:20:04.967
> 
> 标签：javascript, jquery, html, css

我想在链接点击时显示一个 div，如果在链接或 div 之外点击，我想隐藏。

```
<a href="#" class='login' id="login">login </a>
<div class="login-panel"> 
    <input type="text" id="LoginForm_username" name="LoginForm[username]" class="field" value="username">
    <input type="password" id="LoginForm_password" name="LoginForm[password]" class="field" value="password">
    <input type="submit" value="Login"  class="loginBtn">
</div> 
```

最初 div 是隐藏的。和脚本是

```
$(document).ready(function() {
    $("#login").click(function () {
        $("div.login-panel").toggle();
    });

    $("body").click(function(e){
        if(e.target.className == "login" || e.target.className == "login-panel") { 
            //alert("do't hide");  
        }
        else {
            $(".login-panel").hide();
        }
    });
}); 
```

当我单击链接 div 显示并重叠一些其他元素时，当我单击身体外部时，它会死掉。但问题是当我点击输入框输入用户名登录面板 div 隐藏。为什么div隐藏？任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-22T10:36:44.977

[http://jsfiddle.net/thirtydot/F4p2x/15/](http://jsfiddle.net/thirtydot/F4p2x/15/)

```
$(document).ready(function() {
    $("#login").click(function(e) {
        $(".login-panel").toggle();
        e.stopPropagation();
    });

    $(document).click(function(e) {
        if (!$(e.target).is('.login-panel, .login-panel *')) {
            $(".login-panel").hide();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:29:50.603

你应该这样做：

[http://jsfiddle.net/VWENB/1/](http://jsfiddle.net/VWENB/1/)

```
$("#login").click(function(e) {
    $("div.login-panel").toggle();
    e.stopPropagation();
});
$("body").click(function(e) {
    if (e.target.className == "field") {
        //alert("do't hide");  
    } else {
        $(".login-panel").hide();

    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:31:50.687

当您单击子元素时，您的条件 (e.target.className) 不会应用于您的父元素 ( `<div class="login-panel">`)。但是你可以使用`closest`jQuery 的功能（见[这里](http://api.jquery.com/closest/)）来测试你是否在你的父元素中：

```
if(e.target.className == "login" ||  $(e.target).closest(".login-panel").length === 1) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:24:40.093

> 问题是当我单击输入框输入用户名登录面板 div 隐藏。为什么div隐藏？

因为，在单击 div 时，您也单击了主体。然后触发这两个事件。查看你可以在 body.onclick 的 else 部分使用的[event.stopPropagation() 。](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:28:11.040

干得好：

```
$(document).ready(function () {
    $("#login").click(function () {
        $("div.login-panel").toggle();
    });
    $("body").click(function (e) {
        if (e.target.nodeName != "INPUT" && e.target.className!= "login" && e.target.className!= "login-panel") {
            $(".login-panel").hide();
        }
    });
});​ 
```

您在检查中使用了错误的选择器`if`来检查对正文的单击是否未针对输入元素。

[小提琴](http://fiddle.jshell.net/4bgsX/3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T10:30:31.197

那是因为您的输入位于`#login`div 内，所以如果您在此 div 内单击，它将隐藏。所以你可以使用 jquery [:not](http://api.jquery.com/not-selector/) 选择器来指定那些被排除的元素

```
$(document).ready(function () {
        $("#login,:not('#LoginForm_username'),:not('#LoginForm_password')").click(function () {
            $("div.login-panel").toggle();
        });
        $("body").click(function (e) {
            if (e.target.className == "login" || e.target.className == "login-panel") {
                //alert("do't hide");  
            } else {
                $(".login-panel").hide();

            }
        });
    });​ 
```

[演示](http://jsfiddle.net/ZggTt/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T10:38:30.730

正如另一句话所说，单击输入会导致正文中的事件触发，因此您应该检查发件人是否是登录的孩子，我认为下面的代码可以解决问题；

```
$("body").click(function (e) {

        var $sender = $(e.target);
        if ($sender.closest(".login-panel").length) {
            return ;
        } 
            $(".login-panel").hide();
    }); 
```

编辑：更新最接近的条件，因为它是正确的功能。

从当前元素开始，向上遍历 DOM 树，直到找到与提供的选择器匹配的内容。返回的 jQuery 对象包含原始集合中每个元素的零个或一个元素。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-22T10:46:13.633

只需在点击事件发生时找到鼠标，

```
<script type="text/javascript">
 find_mouse = false;

$(document).ready(function()
{
    $('.login-panel').hover(function(){ 
        find_mouse=true;  // if mouse on login-panel
    }, function(){ 
        find_mouse=false; // not on login panel
    });

    $("body").click(function(){ 
        if(! find_mouse) // if not on login panel
        $('.login-panel').hide();
    });
});
</script> 
```

# c# - C#中的嵌套锁定

> ID：13510504
> 
> 赞同：7
> 
> 时间：2012-11-22T10:20:29.770
> 
> 标签：c#, multithreading

我正在学习 C# 中的多线程，我看到下面的代码

```
static readonly object _locker = new object();

static void Main()
{
  lock (_locker)
  {
     AnotherMethod();
     // ...some work is going on
  }
}

static void AnotherMethod()
{
  lock (_locker) { Console.WriteLine ("Another method"); }
} 
```

我想知道什么时候需要使用嵌套锁定？在这种情况下，为什么不只使用一把锁呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:27:35.910

我的第一反应是可以直接调用另一个方法，而不是通过 Main 方法，因此您可能需要嵌套锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:35:39.817

允许[重入](https://stackoverflow.com/questions/391913/re-entrant-locks-in-c-sharp)代码。

你的例子不合适。锁用于提供对[临界区](http://en.wikipedia.org/wiki/Critical_section)的受控访问。

如果一个临界区调用另一个临界区，就会发生死锁。为了防止这种情况，允许重入代码。

[为什么嵌套锁不会导致死锁？](https://stackoverflow.com/a/5035177/649524)

# android - 图库项目视图聚类未正确显示

> ID：13510508
> 
> 赞同：0
> 
> 时间：2012-11-22T10:20:49.520
> 
> 标签：android, android-layout

我根据一些例子拼凑起来，结果是一团糟。图像/文本相互重叠，像单个列表视图项一样来回移动：没有​​像图像列表那样。我的目标是一张下面有文本视图的图像。就这些。请注意：我还尝试从适配器中的 getView() 返回一个膨胀的视图，结果几乎相同。我开始怀疑 Gallery 是否真的可以支持不仅仅是 ImageView 作为类型。

```
package com.example.elgallery;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MainActivity extends Activity {

private GalleryAdapter mGalleryAdapter;
private ArrayList<GalleryItem> mGalleryItems;
private Gallery mGallery;

public class GalleryItem{
  int imageId=R.drawable.ic_launcher;
  String caption;
   public int getImageId() {
    return imageId;     }

public String getCaption() {
    return caption;
}
    public GalleryItem(int i,String s) {
    imageId=i;
    caption=s;  
    }   
}

  int[] resourceImages =     {R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher,
        R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher};

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
 GalleryItem[] item = new GalleryItem[6];
 mGalleryItems = new ArrayList<GalleryItem>();
    //initialising all items, change member variables according to needs
   for(int i=0;i<6;i++){
       mGalleryItems.add(new GalleryItem(resourceImages[i], "pic no"   +(i+1)));          
    }  

 mGallery = (Gallery)findViewById(R.id.gallery);
 mGalleryAdapter = new GalleryAdapter(this);
 mGalleryAdapter.setGalleryItems(mGalleryItems);
 mGallery.setAdapter(mGalleryAdapter);

 mGalleryAdapter.notifyDataSetChanged();

}

private class GalleryAdapter extends BaseAdapter {

   private Context mContext;
   mArrayList<GalleryItem> galleryItems;

   public ArrayList<GalleryItem> getGalleryItems() {
    return galleryItems;
}
public void setGalleryItems(ArrayList<GalleryItem> galleryItems) {
    this.galleryItems = galleryItems;
}
public GalleryAdapter (Context context)
{
    mContext = context;
}
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return galleryItems.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return galleryItems.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{ 
    LinearLayout ll = new LinearLayout(mContext); 
    ll.setOrientation(LinearLayout.VERTICAL);
    ImageView i = new ImageView(ll.getContext()); 
    i.setTag("someTage"); //i.setImageURI(mUrls[position]);
    i.setImageResource(R.drawable.ic_launcher);
    i.setScaleType(ImageView.ScaleType.FIT_XY); 
    i.setLayoutParams(new Gallery.LayoutParams(48, 48)); 
    TextView tv = new TextView(ll.getContext()); 
    tv.setTag("someTag2"); tv.setText("someText");
    tv.setLayoutParams(new Gallery.LayoutParams(48, 48)); 
    ll.addView(tv); 
    return ll; 
} 
  }

 } 
```

这是 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
 <Gallery
    android:id="@+id/gallery"
    android:layout_width="fill_parent"
    android:layout_height="200dip"
   />
 </LinearLayout> 
```

结果：一团糟。看起来像三个图像和文本视图在彼此之上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:46:14.827

> 我的目标是一张下面有文本视图的图像。

您当前的`getView`方法不会这样做，因为您有一些错误。首先，我看不到您将其添加`ImageView`到`LinearLayout`包装器的任何地方。其次，`LayoutParams`这些视图的 不是类型`Gallery.LayoutParams`，因为视图是 的子级`LinearLayout`。检查下面的代码：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LinearLayout ll = new LinearLayout(mContext);
        ll.setLayoutParams(new Gallery.LayoutParams(
                Gallery.LayoutParams.MATCH_PARENT,
                Gallery.LayoutParams.MATCH_PARENT));
        ll.setOrientation(LinearLayout.VERTICAL);
        ImageView i = new ImageView(ll.getContext());
        i.setTag("someTage"); // i.setImageURI(mUrls[position]);
        i.setImageResource(R.drawable.ic_launcher);
        i.setScaleType(ImageView.ScaleType.FIT_XY);
        i.setLayoutParams(new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT));
        ll.addView(i);
        TextView tv = new TextView(ll.getContext());
        tv.setTag("someTag2");
        tv.setText("someText");
        tv.setLayoutParams(new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT));
        ll.addView(tv);         
        return ll;
    } 
```

我还建议您阅读有关优化 Android 适配器的信息。

# php - 某些数据库条目的到期日期

> ID：13510512
> 
> 赞同：0
> 
> 时间：2012-11-22T10:21:00.470
> 
> 标签：php, datetime

我正在尝试设置数据库条目的过期时间。我已将该字段设置为`datetime`并通过 MySQL 手动输入了一些值

我从表中获取值并将其转换为`strtotime()`. 然后我得到当前时间使用`strtotime("now")`; 或`time()`；他们似乎返回相同的值。

然后我取未来日期（来自数据库的日期）并使用 if 语句检查它是否小于当前时间，如果是，我将其设置为过期。如果它仍然大于当前时间，我会返回还剩多少时间..

这是代码：

```
$time_left = "";
$value['ex_date'] = '2012-11-22 18:17:33';// this is whats in the DB now.
$future_time = strtotime($value['ex_date']);
$now_time = strtotime('now');

if($deal_end < $now_time){
    $time_left = 'Expired';
}else{
    $seconds = $future_time - $now_time;
    $days = floor($seconds / 86400);
    $seconds %= 86400;
    $hours = floor($seconds / 3600);
    $seconds %= 3600;
    $minutes = floor($seconds / 60);
    $seconds %= 60;

    if($days >= 1) {$time_left .= "D:$day ";}
    if($hours >= 1) {$time_left .= "H:$hours ";}
    if($minutes >= 1) {$time_left .= "M:$minutes ";}
    if($seconds >= 1) {$time_left .= "S:$seconds ";} 
```

由于某种原因，上述方法效果不佳。它就像有一些时间差距。

我的问题是：有没有办法检查服务器时间与数据库时间？

因为由于`strtotime('now');`某种原因，时间似乎与当前时间温度相差 2/3 小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:35:19.267

我可以建议另外两种方法
：从尚未过期但将逻辑添加到查询本身的数据库行中选择
b。每分钟运行一次 cron/mysql 计划，这将清除已过期的数据库条目

`SELECT * from TABLE where X = Y and NOW() < expiredField`

* * *

此外，PHP 有一个内置类，仅用于您尝试执行的日期操作。
它被称为`DateTime`。

```
$dt = new DateTime('2012-11-22 18:17:33');
$dtNow = new DateTime();

$interval = $dtNow->diff($dt); // php.net/DateInterval
if($interval->invert) 
    echo 'expired';
else 
    echo $interval->format('%m month, %d days, %h hours, %s seconds'); 
```

* * *

**对于你原来的问题**

检查服务器时间是 `echo time();`
检查数据库时间是 `SELECT NOW();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:39:22.163

您可以在命令行使用以下命令查找服务器（linux）时区：

```
$ date +%Z 
```

或者在 php 中：

```
$ echo system('date +%Z'); 
```

在php中你可以使用`date_default_timezone_get`函数。

很可能您的时区`system`和`php`时区会有所不同。

`php`您可以使用`date_default_timezone_set` [函数](http://www.php.net/manual/en/function.date-default-timezone-set.php)更改时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:38:40.020

万一有人对我如何解决它感到好奇：

```
$result = mysql_query("select CURRENT_TIMESTAMP;");
$row = mysql_fetch_array( $result );
$DB_now = $row['CURRENT_TIMESTAMP'];

$deal_end = strtotime($value['ex_date']);
$now_time = strtotime($DB_now); 
```

我只是使用数据库的当前时间戳作为“现在”不确定这是否是最好的解决方案，但它可以工作

# android - 如何在 android 活动中绘制温度计？

> ID：13510513
> 
> 赞同：1
> 
> 时间：2012-11-22T10:21:00.887
> 
> 标签：android, jquery-mobile, user-interface, android-activity, 2d

我正在创建一个设备管理应用程序。我想在活动中显示温度计并使用实时数据更新温度值。我得到了实时数据部分，但我不知道如何画温度计。有什么库可以用来解决我的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-12-16T06:09:15.303

这是温度计视图

```
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.util.AttributeSet;
import android.view.View;

public class Thermometer extends View {

    private float outerCircleRadius, outerRectRadius;
    private Paint outerPaint;
    private float middleCircleRadius, middleRectRadius;
    private Paint middlePaint;
    private float innerCircleRadius, innerRectRadius;
    private Paint innerPaint;
    private Paint degreePaint, graduationPaint;

    private static final int GRADUATION_TEXT_SIZE = 16; // in sp
    private static float DEGREE_WIDTH = 30;
    private static final int NB_GRADUATIONS = 8;
    public static final float MAX_TEMP = 50, MIN_TEMP = -30;
    private static final float RANGE_TEMP = 80;
    private static final int NB_GRADUATIONS_F = 8;
    private static final float MAX_TEMP_F = 120, MIN_TEMP_F = -30;
    private static final float RANGE_TEMP_F = 150;
    private int nbGraduations = NB_GRADUATIONS;
    private float maxTemp = MAX_TEMP;
    private float minTemp = MIN_TEMP;
    private float rangeTemp = RANGE_TEMP;
    private float currentTemp = MIN_TEMP;
    private Rect rect = new Rect();

    public Thermometer(Context context) {
        super(context);
        init(context, null);
    }

    public Thermometer(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context,attrs);
    }

    public Thermometer(Context context, AttributeSet attrs, int defStyleAttr) {
        super (context, attrs, defStyleAttr);
        init(context, attrs);
    }

    public void setCurrentTemp(float currentTemp) {
        if (currentTemp > maxTemp) {
            this.currentTemp = maxTemp;
        } else if (currentTemp < minTemp) {
            this.currentTemp = minTemp;
        } else {
            this.currentTemp = currentTemp;
        }

        invalidate();
    }

    public float getMinTemp() {
        return minTemp;
    }

    public void init(Context context, AttributeSet attrs) {
        TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.Thermometer);
        outerCircleRadius = typedArray.getDimension(R.styleable.Thermometer_radius, 20f);
        int outerColor = typedArray.getColor(R.styleable.Thermometer_outerColor, Color.GRAY);
        int middleColor = typedArray.getColor(R.styleable.Thermometer_middleColor, Color.WHITE);
        int innerColor = typedArray.getColor(R.styleable.Thermometer_innerColor, Color.RED);

        typedArray.recycle();

        outerRectRadius = outerCircleRadius / 2;
        outerPaint = new Paint();

        outerPaint.setColor(outerColor);
        outerPaint.setStyle(Paint.Style.FILL);

        middleCircleRadius = outerCircleRadius - 5;
        middleRectRadius = outerRectRadius - 5;
        middlePaint = new Paint();
        middlePaint.setColor(middleColor);
        middlePaint.setStyle(Paint.Style.FILL);

        innerCircleRadius = middleCircleRadius - middleCircleRadius / 6;
        innerRectRadius = middleRectRadius - middleRectRadius / 6;
        innerPaint = new Paint();
        innerPaint.setColor(innerColor);
        innerPaint.setStyle(Paint.Style.FILL);

        DEGREE_WIDTH = middleCircleRadius / 8;

        degreePaint = new Paint();
        degreePaint.setStrokeWidth(middleCircleRadius / 16);
        degreePaint.setColor(outerColor);
        degreePaint.setStyle(Paint.Style.FILL);

        graduationPaint = new Paint();
        graduationPaint.setColor(outerColor);
        graduationPaint.setStyle(Paint.Style.FILL);
        graduationPaint.setAntiAlias(true);
        graduationPaint.setTextSize(Utils.convertDpToPixel(GRADUATION_TEXT_SIZE, getContext()));

    }

    public void changeUnit(boolean isCelsius) {
        if (isCelsius) {
            nbGraduations = NB_GRADUATIONS;
            maxTemp = MAX_TEMP;
            minTemp = MIN_TEMP;
            rangeTemp = RANGE_TEMP;
        } else {
            nbGraduations = NB_GRADUATIONS_F;
            maxTemp = MAX_TEMP_F;
            minTemp = MIN_TEMP_F;
            rangeTemp = RANGE_TEMP_F;
        }

        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        int height = getHeight();
        int width = getWidth();

        int circleCenterX = width / 2;
        float circleCenterY = height - outerCircleRadius;
        float outerStartY = 0;
        float middleStartY = outerStartY + 5;

        float innerEffectStartY = middleStartY + middleRectRadius + 10;
        float innerEffectEndY = circleCenterY - outerCircleRadius - 10;
        float innerRectHeight = innerEffectEndY - innerEffectStartY;
        float innerStartY = innerEffectStartY + (maxTemp - currentTemp) / rangeTemp * innerRectHeight;

        RectF outerRect = new RectF();
        outerRect.left = circleCenterX - outerRectRadius;
        outerRect.top = outerStartY;in
        outerRect.right = circleCenterX + outerRectRadius;
        outerRect.bottom = circleCenterY;

        canvas.drawRoundRect(outerRect, outerRectRadius, outerRectRadius, outerPaint);
        canvas.drawCircle(circleCenterX, circleCenterY, outerCircleRadius, outerPaint);

        RectF middleRect = new RectF();
        middleRect.left = circleCenterX - middleRectRadius;
        middleRect.top = middleStartY;
        middleRect.right = circleCenterX + middleRectRadius;
        middleRect.bottom = circleCenterY;

        canvas.drawRoundRect(middleRect, middleRectRadius, middleRectRadius, middlePaint);
        canvas.drawCircle(circleCenterX, circleCenterY, middleCircleRadius, middlePaint);

        canvas.drawRect(circleCenterX - innerRectRadius, innerStartY, circleCenterX + innerRectRadius, circleCenterY, innerPaint);
        canvas.drawCircle(circleCenterX, circleCenterY, innerCircleRadius, innerPaint);

        float tmp = innerEffectStartY;
        float startGraduation = maxTemp;
        float inc = rangeTemp / nbGraduations;

        while (tmp <= innerEffectEndY) {
            canvas.drawLine(circleCenterX - outerRectRadius - DEGREE_WIDTH, tmp, circleCenterX - outerRectRadius, tmp, degreePaint);
            String txt = ((int) startGraduation) + "°";
            graduationPaint.getTextBounds(txt, 0, txt.length(), rect);
            float textWidth = rect.width();
            float textHeight = rect.height();

            canvas.drawText(((int) startGraduation) + "°", circleCenterX - outerRectRadius - DEGREE_WIDTH - textWidth - DEGREE_WIDTH * 1.5f,
                    tmp + textHeight / 2, graduationPaint);
            tmp += (innerEffectEndY - innerEffectStartY) / nbGraduations;
            startGraduation -= inc;
        }
    }
} 
```

来源： medium.com中[@ssaurel的](https://medium.com/@ssaurel)[这篇文章](https://medium.com/@ssaurel/learn-to-create-a-thermometer-application-for-android-295d6611b4f9)

如果你想使用图书馆[这个图书馆](https://github.com/biansemao/ThermometerView)可以帮助你

示例 gif

[![gif](../Images/7d45c58eee6ca86945417ee93c040b95.png)](https://i.stack.imgur.com/GBw06.gif)

另一个库：[github.com](https://github.com/kofigyan/Thermometer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:41:49.053

Android 中没有温度计对象。您需要使用自定义对象和 onDraw 方法自己绘制它。或尝试使用多个图像和相对布局。

# actionscript-3 - 随机化关卡布局（AS3/Flashpunk）

> ID：13510518
> 
> 赞同：1
> 
> 时间：2012-11-22T10:21:07.760
> 
> 标签：actionscript-3

我正在研究游戏中的随机化，并试图找出像 Binding Of Isacc 和 Sperlunky 这样的游戏使用随机排列的预制关卡片段来创建功能性地板/关卡的技巧，类似于以下内容：

楼层将始终包含玩家、出口和奖励房间（黄点）。相连的房间相互直接相连。

我对如何去做有一个模糊的想法：首先创建一个包含瓷砖地图和网格数据的多维数组：

```
public static var levelLayout:Array =
[[tile,grid],[tile,grid],[tile,grid],[tile,grid]
[tile, grid],[tile,grid],[tile,grid],[tile,grid] etc] 
```

从那里，遍历每个网格空间，滚动查看该点是否没有，如果房间被隔离，也使房间没有任何内容，然后开始从包含所有瓷砖地图/网格的打乱数组中分配房间。

我在正确的轨道上吗？我应该如何处理出口？任何帮助，将不胜感激。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:23:30.547

首先制作一个完美的迷宫（一个迷宫，您可以从迷宫中的任何其他地方到达迷宫中的任何一点）。这有助于创建以可赢/可解决的方式连接的房间网络。

有很多教程可以做到这一点。这个有点脏，有一堆你可能不需要的代码，但最好通过一些相关的例子来了解不同的方法： [http ://www.emanueleferonato.com/2008/11/28/perfect -maze-generation-with-as3/](http://www.emanueleferonato.com/2008/11/28/perfect-maze-generation-with-as3/)

我对递归回溯算法很幸运： [http ://en.wikipedia.org/wiki/Maze_generation_algorithm#Recursive_backtracker](http://en.wikipedia.org/wiki/Maze_generation_algorithm#Recursive_backtracker)

将迷宫中的每个单元格视为一个房间。迷宫建成后，您就知道哪些房间与其他房间相连，因此让每个房间都有办法让门连接到下一个房间，或者用墙连接。您可能想要制作一个 4x4 完美迷宫。

调味的方法-

您可以安全地从迷宫中移除死胡同，它仍然是完美的。生成迷宫后，循环遍历迷宫中的所有单元格。任何有 3 堵墙的牢房都是死胡同，您可以将其完全封闭。或者把它变成一个秘密房间或其他什么。

在迷宫中添加循环。随机连接迷宫中之前未连接的 2 个房间。这仍然使迷宫保持完美，它只是让它更开放一点。

这是一个有趣的领域，享受它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T22:47:44.620

实际上，我最近一直在研究类似的信息，受到 Spelunky 和 ​​Rogue Legacy 的启发。在阅读时，我发现有很多关于如何在[http://tinysubversions.com/spelunkyGen/上生成 Spelunky 中的关卡布局的信息](http://tinysubversions.com/spelunkyGen/)

受此启发（被盗？），我装配了一个简单版本，以生成具有单个解决方案路径的多维数组，使用数字 0-5 来识别每个单元格代表的房间类型（基于列出的站点多于）。请注意，您可以轻松地让它根据您的需要返回不同类型的结果。我也一直使用 Math.random() 但如果你愿意，你可以用 FP.rand() 代替。支持任何大小的房间 x 房间的关卡布局，默认为 4 x 4。我得到的一些随机结果 [编辑为更具可读性]：

```
4 x 4         6 x 5               7 x 12
[S][ ][ ][ ]  [ ][ ][ ][ ][ ][S]  [v][-][-][-][-][-][S]
[v][ ][ ][ ]  [ ][ ][v][-][-][^]  [^][-][-][-][-][-][v]
[^][-][-][v]  [ ][v][^][ ][ ][ ]  [ ][ ][v][-][-][-][^]
[E][-][-][^]  [v][^][ ][ ][ ][ ]  [v][-][^][ ][ ][ ][ ]
              [^][-][-][-][-][E]  [v][ ][ ][ ][ ][ ][ ]
                                  [^][-][-][-][-][-][v]
                                  [ ][ ][v][-][-][-][^]
                                  [v][-][^][ ][ ][ ][ ]
                                  [v][ ][ ][ ][ ][ ][ ]
                                  [^][-][-][-][-][-][v]
                                  [ ][ ][ ][ ][ ][ ][v]
                                  [E][-][-][-][-][-][^] 
```

无论如何，我认为它更适合 Spelunky 的 4x4 布局（哎呀，我想知道为什么）而且我很确定我会稍微偏离，但这是我的代码：

```
/**Generates a pseudo-random single solution path layout to be used for tile painting
 * @param   dimenR Number of rows (Y-Axis) Should correspond with height of level, in rooms
 * @param   dimenC Number of columns (X-Axis) Should correspond with width of level, in rooms
 * @return  The resulting multi-dimensional array*/
private function generateNewRoomLayout(dimenC:int = 4, dimenR:int = 4):Array {
    // NOTE: 0= non solution, 1= left/right, 2= left/right/down, 3= left/right/up, 4= start, 5= end
    // Initialize array as all non-solution path rooms
    var generatedLayout:Array = new Array(dimenR);
    for (var i:int = 0; i < dimenR; i++) {
        generatedLayout[i] = new Array(dimenC);
        for (var j:int = 0; j < dimenC; j++) { generatedLayout[i][j] = 0; }
    }
    // Initialize our Start Room location
    /**Position along X-Axis in the grid*/
    var column:int = Math.random() * dimenC;
    /**Position along Y-Axis in the grid*/
    var row:int = 0;
    generatedLayout[row][column] = 4;
    /**Chooses the next direction. 0-1= left, 2-3= right, 5= down*/
    var chooseDirection:int = Math.random() * 6;
    /**Direction solution path is currently taking. -1= left, 1= right*/
    var currentDirection:int = 0;
    // Keep running until our position goes beyond the dimension of the grid
    while (row < dimenR) {
        // Chosen to go downards
        if (chooseDirection == 5) {
            // Reset which way we're going so we can make a random choice later
            currentDirection = 0;
            if (generatedLayout[row][column] != 4) { generatedLayout[row][column] = 2; }
            // Bottom row
            if (row == dimenR - 1) {
                generatedLayout[row][column] = 5; // Found our ending point
                break;
            }
            else {
                row++;
                generatedLayout[row][column] = 3;
            }
        }
        else {
            // If we don't have a direction to go left/right
            if (currentDirection == 0) {
                if (chooseDirection < 3) { currentDirection = -1; }
                else { currentDirection = 1; }
            }
            // If we're at the edge of the grid and trying to move past it, we move down and flip our direction instead
            if ((currentDirection < 0 && column == 0) || (currentDirection > 0 && column == dimenC - 1)) {
                currentDirection = -currentDirection;
                generatedLayout[row][column] = 2;
                if (row == dimenR - 1) {
                    generatedLayout[row][column] = 5;
                    break;
                }
                else {
                    row++;
                    generatedLayout[row][column] = 3;
                }
            }
            else {
                column += currentDirection;
                generatedLayout[row][column] = 1;
            }
        }
        chooseDirection = Math.random() * 6;
    }
    return generatedLayout;
} 
```

# webgl - drawElements 使用

> ID：13510520
> 
> 赞同：0
> 
> 时间：2012-11-22T10:21:15.940
> 
> 标签：webgl

我在 WebGL 中创建了一个小应用程序，我有两个移动的对象，一个立方体和一个球体。我用着色器修改对象，每个对象都有它的着色器。所以我想在确定的时间更新显示器上的对象，为此我使用`drawElements`函数。

对于每个对象，我都有一个缓冲区，其中包含顶点缓冲区中的面索引：

```
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STREAM_DRAW);
indexCount = indices.length; 
```

indices 是一个数组，其中包含每个面的索引值。（每个面 3 个值，我们使用三角形）。

因此，在此之后，为了绘制我所做的对象的三角形：

```
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);
gl.drawElements(gl.TRIANGLES, indexCount, gl.UNSIGNED_SHORT, 0); 
```

但是我的屏幕上什么都没有，而且我有这个警告：

WebGL：INVALID_OPERATION：drawElements：属性设置不正确

我的错误可能是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:55:38.583

我认为您错过了在 drawElements() 之前将 javascript 顶点缓冲区链接到着色器属性的代码。

例如：

```
gl.bindBuffer(gl.ARRAY_BUFFER, meshVertexPositionBuffer); 
gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 
                     meshVertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0); 
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, meshIndexBuffer);
gl.drawElements(gl.TRIANGLES, meshIndexBuffer.numberOfItems, gl.UNSIGNED_SHORT, 0); 
```

# java - 如何在 Java 中编写大型静态字节数组？

> ID：13510521
> 
> 赞同：2
> 
> 时间：2012-11-22T10:21:16.900
> 
> 标签：java, arrays, static, jvm

我正在编写一个代码生成器，它正在重放数据包捕获期间记录的事件。

JVM 非常有限——事实证明。方法的大小不能大于 64KB。所以我添加了各种诡计来让我的代码生成器拆分 Java 方法。

但现在我有一个新问题。我正在使用一些 byte[] 数组并在我的类中将它们设为静态变量，例如：

```
public class myclass {
    private static byte[] byteArray = { 0x3c, 0x3f, ...
        ...
    };
    private static byte[] byteArray2 = { 0x1a, 0x20, ...
        ...
    };

    ...

    private static byte[] byteArray_n = { 0x0a, 0x0d, ...
        ...
    };        
} 
```

现在我收到错误消息：“静态初始化程序的代码超出了 65535 字节的限制”。

我不想拥有外部文件并从那里读取数据。我想使用在单个文件中生成的代码。

我能做些什么？我可以在类外声明数组吗？或者我应该对值 128-255 使用带有 unicode 的字符串（例如 \u009c 而不是 (byte)0x9c）？还是我现在是世界上唯一一个想要使用静态初始化数据的人？

**更新**

我现在使用的技术是自动创建如下函数：

```
private byte[] byteArray_6() {
  String localString = "\u00ff\u00d8\u00ff\u00e0\u0000\u0010JFIF\u0000" +
    "(0%()(\u00ff\u00db\u0000C\u0001\u0007\u0007\u0007\n\u0008\n\u0013\n" +
    "\u0000\u00b5\u0010\u0000\u0002\u0001\u0003\u0003\u0002\u0004\u0003";
  byte[] localBuff = new byte[ localString.length() ];
  for ( int localInt = 0; localInt < localString.length(); localInt++ ) {
    localBuff[localInt] = (byte)localString.charAt(localInt);
  }
  return localBuff;
} 
```

注意：Java 总是令人惊讶。您可能认为您可以将 0-255 范围内的每个值编码为 \u00XX（其中 XX 是 2 个字符的十六进制表示）。但你错了。Java 编译器实际上认为 \u000A 是代码中的文字“\n” -[这会破坏源代码的编译](https://stackoverflow.com/questions/3866187/why-i-cant-use-u000d-and-u000a-as-cr-and-lf-in-java)。因此，您的字符串可能会被 Unicode 转义符乱扔，但您必须分别使用 "\n" 和 "\r" 而不是 \u000a 和 \u000d。并且将可打印字符原样放在字符串中而不是 6 个字符的 Unicode 转义表示中并没有什么坏处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:23:24.097

通常，您会将数据放在文字中`String`，然后使用一种方法将其解码为`byte[]`. `toByteArray()`使用有限，因为 UTF-8 不会产生所有可能的字节序列，并且某些值根本不会出现。

这种技术在尝试生成小目标代码时非常流行。删除大量数组初始化代码也将有助于启动时间。

在我的头顶上：

```
public static byte[] toBytes(String str) {
    char[] src = str.toCharArray();
    int len = src.length;
    byte[] buff = new byte[len];
    for (int i=0; i<len; ++i) {
        buff[i] = (byte)src[i];
    }
    return buff;
} 
```

可以使用更紧凑的方案。例如，您可以将字符串字符内容限制为 [1, 127] （出于非常糟糕的原因，0 以非规范化形式编码）。或者更复杂的东西。我相信 JDK8 将有一个用于 Base64 解码的公共 API，它还不错，而且标准化得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:47:17.277

声明一个数组列表并使用静态构造函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T10:41:08.460

您可以使用嵌套类来存储静态数组。这一步并不是执行的最佳方式，但我认为您可以通过对代码的最小更改来获得它。

# c# - C++ -向量 在 C# 中

> ID：13510528
> 
> 赞同：0
> 
> 时间：2012-11-22T10:21:33.300
> 
> 标签：c#, c++

我在 C++ 中有一个代码，基本上是一个类 const 和一个 dest

```
 Abc(vector<std::string>& names);
 virtual ~Abc(); 
```

我需要知道 C# 中的等价物

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:22:28.213

在 C# 中，你可以这样写：

```
Abc(List<string> names); 
```

`~Abc()`并且在 C#中没有使用。它有垃圾收集器。

但是，如果您的类管理资源，则派生`Abc`并`IDisposable`实现`Dispose()`类似于以下内容的方法`~Abc()`：

```
class Abc : IDisposable
{
     Abc(ref List<string> names);
     void Dispose();       
} 
```

# jquery - jQuery .ready/resize 在 iPad 上不起作用

> ID：13510530
> 
> 赞同：1
> 
> 时间：2012-11-22T10:21:43.280
> 
> 标签：jquery, ipad

为什么准备好/调整大小事件在 iPad 上不起作用？他们在电脑上工作，但不在 iPad 上。有人知道我做错了什么吗？

```
jQuery(document).on('ready', function() {
    jQuery(window).on('resize', function() {
        /* Tablet Portrait size to standard 960 (devices and browsers) */
        if (jQuery(window).width() < 960 && jQuery(window).width() > 768) {
           //change the attributes from the div #home_content (first parameter: the attribute, what it needs to be)
           jQuery('#home_content').attr('class','sixteen columns');
           jQuery('#slider').attr('class','sixteen columns');
        }
        else{
            jQuery('#home_content').attr('class','nine columns');
            jQuery('#slider').attr('class','nine columns');
        }

        /* Mobile Landscape Size to Tablet Portrait (devices and browsers) */
        if(jQuery(window).width() < 767 && jQuery(window).width() > 480) {
            //code
        }
        else{

        }

        /* Mobile Landscape Size to Tablet Portrait (devices and browsers) */
        if(jQuery(window).width() < 479) {
            //code
        }   
        else{

        }
    }).trigger('resize'); // Trigger resize handlers.       
});//ready 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:28:56.710

如果你想捕捉 iPad 的方向，你应该使用：

```
window.onorientationchange = function(e) { /* your code */ }; 
```

而不是 windows resize 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:32:51.267

请检查以下

```
$(window).resize(function() {

alert("Window size changed");

}); 
```

要访问高度和宽度，您可以使用

```
$(window).width();

$(window).height(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T14:46:53.370

**试试这个：**

```
// Checks to see if the platform is strictly equal to iPad:
if (navigator.platform === 'iPad') {
    window.onorientationchange = function() {

        var orientation = window.orientation;

        // Look at the value of window.orientation:
        if (orientation === 0) {
            // iPad is in Portrait mode.

        } else if (orientation === 90) {
            // iPad is in Landscape mode. The screen is turned to the left.

        } else if (orientation === -90) {
            // iPad is in Landscape mode. The screen is turned to the right.

        } else if (orientation === 180) {
            // Upside down portrait.

        }
    }
}​ 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:32:15.100

试试`jQuery(document).ready(function(){ alert('booya!') })`；

如果您收到警报，请将您的代码放入该函数中。还可以访问 Chrome 中的页面并通过在开发者工具中调出内置控制台来检查 Javascript 错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T15:12:22.160

我找到了解决方案：我使用 jQuery(document).width() 而不是 jQuery(window).width()，现在我的脚本有望在*每台*设备上运行 :)
感谢您的回答！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T09:28:27.523

现在确实有效，

我的代码不起作用，因为我使用了在 iPad 上不起作用的 window.width()，我将其更改为 document.width，现在它可以工作了。:)

# linux - 文件存储小工具与大容量存储小工具

> ID：13510532
> 
> 赞同：2
> 
> 时间：2012-11-22T10:21:56.167
> 
> 标签：linux, embedded, usb, usb-mass-storage

在嵌入式设备上，我想使用 USB Gadget - Mass Storage。我在菜单中找到了两个选项，但它们没有严格定义。

在大容量存储部分：

```
This is heavily based on File-backed Storage Gadget and in most
cases you will want to use FSG instead. This gadget is mostly
here to test the functionality of the Mass Storage Function
which may be used with composite framework.
If unsure, consider File-backed Storage Gadget. 
```

有人可以写更多细节吗？

FSG 专注于嵌入式世界吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T17:46:37.223

海量存储小工具是文件存储小工具的改进版本。根据官方文档：

`File Storage Gadget has been removed in Linux 3.8\. All users need to transition to the Mass Storage Gadget.`

（来自：[https](https://www.kernel.org/doc/Documentation/usb/mass-storage.txt) ://www.kernel.org/doc/Documentation/usb/mass-storage.txt ）

同一页面还列出了模块之间的差异（不多——一些参数的名称不同/格式不同）

# vba - 自动确认 Excel 文件 VBA

> ID：13510534
> 
> 赞同：1
> 
> 时间：2012-11-22T10:22:01.347
> 
> 标签：vba, excel

有什么方法可以编写代码（VBA），它可以在宏运行时确认您打开了一个未知的 Excel 文件？？？

我的目的是将未知 Excel 工作簿中的一些值复制到正在运行的宏上的值，但我不确定这是否可能。

代码的想法是这样的：

```
Sub test()
    MSG1 = MsgBox("Do you want to copy the values?", vbYesNo, "OPEN")

    If MSG1 = vbYes Then

    MsgBox "Open the file you want to copy"

    'Here is when the user has to open the file and the VBA
    'acknowledge that and keep running the macro but only if the file is open

    ThisWorkbook.Range("A1:B10").Value = _
    Workbooks(Workbooks.Count).Range("A1:B10").Value

    End If
End Sub 
```

有什么想法吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:42:32.373

我有一个更好的建议。使用`Application.GetOpenFilename`使用户选择文件，然后打开该文件。这样代码将知道正在打开哪个文件。例如

```
Sub test()
    Dim Ret, msg
    Dim wb1 As Workbook, wb2 As Workbook

    msg = MsgBox("Do you want to copy the values?", vbYesNo, "OPEN")

    If msg = vbYes Then
        Set wb1 = ThisWorkbook

        Ret = Application.GetOpenFilename("Excel Files (*.xls*), *.xls*")

        If Ret <> False Then
            Set wb2 = Workbooks.Open(Ret)
            wb1.Sheets("Sheet1").Range("A1:B10").Value = _
            wb2.Sheets("Sheet1").Range("A1:B10").Value
        End If
    End If
End Sub 
```

# java - 会话超时自动

> ID：13510535
> 
> 赞同：0
> 
> 时间：2012-11-22T10:22:06.067
> 
> 标签：java, tomcat

我了解会话超时是为了找出空闲的应用程序并结束该特定会话。
我已经在 web.xml 中注释了 session-timeout 标记。此外，我还没有在我的应用程序中设置任何会话超时，例如 maxInactiveInterval()。

但是我的会话将在 2 或 3 小时后到期。Tomcat中是否有任何自动会话超时？
我在 Tomcat 5 和 7 中都观察到了上述现象。请帮助...我不希望在这里出于某种目的发生超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:33:42.997

如果您不希望出于某种目的发生超时：

```
<session-config>
    <session-timeout>0</session-timeout>
</session-config> 
```

应该根本没有超时 -> 无限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:30:16.543

是的。在 tomcat web.xml 文件中看到这段代码：

```
<session-config>
        <session-timeout>30</session-timeout>
    </session-config> 
```

默认情况下，它设置为 30 分钟。如果您不希望会话到期，只需将其设置为 0 而不是 30。

[Tomcat中的会话静态。](https://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html#Session_Statistics)

# javascript - 使用 Ext.Window 在 autoLoad 中发送参数

> ID：13510540
> 
> 赞同：0
> 
> 时间：2012-11-22T10:22:19.373
> 
> 标签：javascript, extjs

我有一个 Ext.Window，我用另一个 jsp 的 autoLoad 在其中加载 TabPanel：

```
var x = new Ext.Window({
  id: 'myWindow', 
  title:'Аттрибуты',
  layout: 'fit',
  autoScroll:false,
  width:600,
  autoLoad : {  
   url : url_servlet+'form.jsp',  
   scripts: true  
  }
})
x.show(); 
```

现在我想`form.jsp`在这个自动加载中发送参数。它可能还是我要在 url 中发送参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:18:34.397

尝试在 autoLoad 配置中添加参数

```
autoLoad : {  
   url     : url_servlet+'form.jsp',  
   scripts : true ,
   params  : {param1:'val1',param2:'val2'} 
} 
```

# ninject - 忍者获取 当目标有

> ID：13510543
> 
> 赞同：0
> 
> 时间：2012-11-22T10:22:20.800
> 
> 标签：ninject, resolution, contextual-binding

所以我正在使用 Ninject，特别是上下文绑定如下：

```
Bind<IBlah>().ToMethod(x => FirstBlahProvider.Instance.GiveMeOne()).WhenTargetHas<FirstAttribute>().InRequestScope();
Bind<IBlah>().ToMethod(x => SecondBlahProvider.Instance.GiveMeOne()).WhenTargetHas<SecondAttribute>().InRequestScope(); 
```

我需要使用 Kernel 来获取给定的实例，并希望根据 Condition 来做`WhenTargetHas<T>`。像下面这样的东西会很棒。

```
var myblah = Kernal.Get<IBlah>(x => x.HasWithTarget<FirstAttribute>) 
```

如何根据条件检索实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:42:43.783

得出答案：最好避免使用`WhenTargetHas<T>`而不是使用`WithMetaData(key, value)`

所以

```
Bind<IBlah>().ToMethod(x => FirstBlahProvider.Instance.GiveMeOne()).WhenTargetHas<FirstAttribute>().InRequestScope();
Bind<IBlah>().ToMethod(x => SecondBlahProvider.Instance.GiveMeOne()).WhenTargetHas<SecondAttribute>().InRequestScope(); 
```

变成：

```
 Bind<IBlah>().ToMethod(x => FirstBlahProvider.Instance.GiveMeOne()).WithMetaData("Provider", "First);
 Bind<IBlah>().ToMethod(x => SecondBlahProvider.Instance.GiveMeOne()).WithMetaData("Provider", "Second"); 
```

然后，您需要创建一个继承 Ninject ConstraintAttribute 的 Attribute 并在构造函数参数中使用该属性。

作为 ：

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = true, Inherited = true)]
    public class FirstProviderConstraint : ConstraintAttribute
    {
             public override bool Matches(IBindingMetadata metadata)
             {
                return metadata.Has("Provider") && metadata.Get<string>("Provider") == "First"; 
             }
    } 
```

然后在构造函数 arg 中使用它：

```
public class Consumer([FirstProviderConstraint] IBlah) 
{
...
} 
```

或从内核解析

```
Get<ISession>(metaData => metaData.Get<string>(BindingKeys.Database) == BindingValues.OperationsDatabase) 
```

我需要解决作用域问题，但是当您拥有多个绑定时，这就是您同时满足构造函数注入和内核显式解析的方式。

# android - 如何将位图数组传递给 Android 中的另一个活动？

> ID：13510549
> 
> 赞同：0
> 
> 时间：2012-11-22T10:22:40.880
> 
> 标签：android

> **可能重复：**
> [如何在活动之间传递 ArrayList<Bitmap>](https://stackoverflow.com/questions/11387603/how-to-pass-a-arraylistbitmap-between-activities)

我想将所有位图数组元素传递给另一个活动，我可以传递数组列表但我不能传递位图数组，Intent中的位图数组有什么特别的指令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:41:30.360

尝试以下解决方案来解决此问题。

1）首先将图像转换为字节数组，然后添加到arraylist，然后将此arraylist传递给Intent，并在下一个活动中从bundle中获取arraylist并转换为Image（Bitmap）并设置为ImageView。

将位图转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

然后将此字节数组添加到arraylist。

将字节数组转换为位图图像：-

```
Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);

image.setImageBitmap(bmp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:25:30.230

`Bitmap`extends `Parcelable`，这意味着您可以提供这样的列表：

```
 ArrayList<Bitmap> bitmapList = new ArrayList<Bitmap>();
    // Poupulate list here

    Intent intent = new Intent();
    intent.putParcelableArrayListExtra("list", bitmapList); 
```

然后，您可以`Bitmap[]`在接收活动中将其转换为 a：

```
Bitmap[] bitmapArray = bitmapList.toArray(new Bitmap[bitmapList.size()]); 
```

但是请记住，在您的意图中放入太多东西通常是不好的做法。最好存储您的数据（数据库、文件系统、单例...）并传递 URI 或 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:46:34.277

将位图数组用作静态并在另一个活动中使用 classname.bitmaparray

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:32:52.373

//传递对象：

```
 intent.putExtra("MyClass", obj); 
```

// 在第二个 Activity 中检索对象

```
getIntent().getSerializableExtra("MyClass"); 
```

# php - 使用php将位图从服务器下载到android

> ID：13510551
> 
> 赞同：1
> 
> 时间：2012-11-22T10:22:45.997
> 
> 标签：php, android, image, download

我想将图像从我的服务器下载到 Android 应用程序。我有这个 PHP 脚本：

```
$jpg  = file_get_contents("./images/12345.jpg");

echo $jpg; 
```

如何下载此图像并将其显示在 ImageView 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:27:24.677

您必须在 echo 之前发送标头：

```
 $filename= "./images/12345.jpg";
    header("Content-disposition: inline; filename=\"$filename\"");
    header('Content-transfer-encoding: binary');
    header('Content-type: image/jpg'); 
```

或测试它：

```
 $filename= "./images/12345.jpg";
    header("Content-disposition: attachment; filename=\"$filename\"");
    header('Content-transfer-encoding: binary');
    header('Content-type: image/jpg') 
```

;

我希望能帮助你...

# ios - 从设置视图 iOS 返回时启动不同的 UIViewController

> ID：13510552
> 
> 赞同：0
> 
> 时间：2012-11-22T10:22:52.623
> 
> 标签：ios, view, uiviewcontroller, back, launch

请帮助我了解我对 iOS 不熟悉的概念。

我正在开发一个有 2 个主要故事/观点的应用程序。

当应用程序启动时，它会检查 NSUserDefaults，如果是： NSInteger witchView = [prefs integerForKey:@"setView"]; 设置为 1 我使用 view1 启动应用程序。

然后从 view1 我可以转到设置，并且有一个用于设置女巫视图的切换按钮将加载到 stat 上。这很完美......如果我将 view2 设置为在启动时开始，它就可以工作。

View2 也有设置按钮，可以进入同样的设置视图。

我想要做的是当从设置返回时自动启动不同的视图，如果它是在选项视图中设置的。

现在，如果需要，我必须重新启动应用程序。

我有 AppDelegate 类女巫启动 View1 或 View2。从 View1 和 View2 我可以转到 SettingsView。

我是否必须将 SettingsView 与 AppDelegate 连接起来？每次按下设置按钮时，总是关闭 view1 或 view2 并从 AppDelegate 启动 SettingsView 并在返回时再次启动相应的？

做这个的最好方式是什么？

谢谢， 马杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:51:08.457

如果您使用的是 NavigatioController 或 ModalDialog 并不清楚，无论如何它似乎都不适合您的场景。因为如果用户更改了设置并且他想回去，你不能保证他会回到同一个 viewController。因此，当您使用 UINavigationController 时，这意味着如果有人按下 backButton，您希望使用相同的 viewController。

我认为您可能应该使用一些动画来导航。

尝试这个：

[UIView transitionWithView:containerView

```
 duration:0.2

       options:UIViewAnimationOptionTransitionFlipFromLeft

       animations:^{ [fromView removeFromSuperview]; [containerView addSubview:toView]; }

       completion:NULL]; 
```

# c++ - WebKit 作为 C++ 的表单控件

> ID：13510558
> 
> 赞同：0
> 
> 时间：2012-11-22T10:23:20.317
> 
> 标签：c++, webkit

您好，我正在寻找一种将 WebKit 渲染器引擎包含在我的 C++ Win32 表单中的方法，也许作为控件？我已经搞砸了 WebKit .NET，但我不希望我的应用程序依赖于 .NET 框架。

我知道有 chromiumembedded 和 Brent Fulgham 的 OpenCFLite，它们看起来都不那么简单易用。我不是最强的 C++ 程序员，甚至多年没有建立项目。一步一步的教程会很好，或者我可以修改一个已经构建的测试应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:40:32.333

你有机会在你的项目中使用 QT 吗？易于使用且快速！

[http://doc.qt.digia.com/qt/qtwebkit.html](http://doc.qt.digia.com/qt/qtwebkit.html)

# android - 横向纵向

> ID：13510562
> 
> 赞同：4
> 
> 时间：2012-11-22T10:23:27.430
> 
> 标签：android, android-layout

我一直在这个网站上寻找答案，但我找不到。我的 android 应用程序没有在我的模拟器中从纵向切换到横向，它只是显示一个横向的纵向屏幕。我制作了一个带有匹配 xml 名称等的 layout 和 layout-land 文件夹。但它似乎并没有在布局土地版本上得到体现。我没有 onConfig() 函数或任何东西，所以我想知道是否有人可以提供帮助？？？

**mainpage.xml 布局域**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/main_background"
    android:gravity="center"
    android:padding="30dip">

    <TextView
        android:id="@+id/main_title_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/main_title"
        android:textColor="@color/text"
        android:textSize="25sp" />

    <TableLayout
        android:id="@+id/tablelayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:stretchColumns="*">

        <TableRow
            android:layout_height="wrap_content"
            android:layout_width="fill_parent">

            <Button
                android:id="@+id/start_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/start_button"
                android:textColor="@color/text" />

            <Button
                android:id="@+id/help_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/help_button"
                android:textColor="@color/text" />

        </TableRow>

        <TableRow
            android:layout_height="wrap_content"
            android:layout_width="match_parent">

            <Button
                android:id="@+id/extra_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/extra_button"
                android:textColor="@color/text" />

            <Button
                android:id="@+id/stop_button"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/stop_button"
                android:textColor="@color/text" />

        </TableRow>

    </TableLayout>

</LinearLayout> 
```

**布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/main_background"
    android:gravity="center"
    android:padding="30dip">

    <TextView
        android:id="@+id/main_title_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/main_title"
        android:textColor="@color/text"
        android:textSize="25sp" />

    <Button
        android:id="@+id/start_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/start_button"
        android:textColor="@color/text" />

    <Button
        android:id="@+id/help_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/help_button"
        android:textColor="@color/text" />

    <Button
        android:id="@+id/extra_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/extra_button"
        android:textColor="@color/text" />

    <Button
        android:id="@+id/stop_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/stop_button"
        android:textColor="@color/text" />

</LinearLayout> 
```

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.MC.ChemPal"
    android:versionCode="1"
    android:versionName="1.0">
    <uses-sdk android:minSdkVersion="10" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".main"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.MC.ChemPal.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".mainpage" android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.MC.ChemPal.MAINPAGE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".Extra"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.MC.ChemPal.EXTRA" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".help"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.MC.ChemPal.HELP" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity android:name=".search_page"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.MC.ChemPal.SEARCH_PAGE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

**爪哇**

```
package com.MC.ChemPal;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class mainpage extends Activity {
    /** Called when the activity is first created. */
    Button start_button, help_button, extra_button, stop_button;
    TextView display;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainpage);

        start_button = (Button) findViewById(R.id.start_button);
        help_button = (Button) findViewById(R.id.help_button);
        extra_button = (Button) findViewById(R.id.extra_button);
        stop_button= (Button) findViewById(R.id.stop_button);
        display = (TextView) findViewById(R.id.main_title_text);

        start_button.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent openSearchPage = new               Intent("com.MC.ChemPal.SEARCH_PAGE");
                startActivity(openSearchPage);
            }
        });
        help_button.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent openHelp = new Intent("com.MC.ChemPal.HELP");
                startActivity(openHelp);
            }
        });
        extra_button.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent openExtra = new Intent("com.MC.ChemPal.EXTRA");
                startActivity(openExtra);
            }
        });
        stop_button.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                onStop();
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:40:51.703

这是一个模拟器错误，当您尝试以横向模式启动活动时，您会看到它将从 layout-land 加载 mainpage.xml，

安卓：screenOrientation="风景"

但是 ctrl+f12 不起作用，这是一个错误

[http://code.google.com/p/android/issues/detail?id=13189](http://code.google.com/p/android/issues/detail?id=13189)

# javascript - 使用箭头键在输入框中导航和选择文本

> ID：13510565
> 
> 赞同：1
> 
> 时间：2012-11-22T10:23:37.983
> 
> 标签：javascript, jquery

正如对问题解决方案的解释： [使用箭头键导航](https://stackoverflow.com/questions/3245398/using-arrows-keys-to-navigate)

[http://jsfiddle.net/BdVB9/](http://jsfiddle.net/BdVB9/)

我有一些带有一些文本输入的表格，并且在单元格之间导航期间在表格单元格的输入框中选择文本时遇到了一些问题。

有人可以帮我解决吗？导航工作正常，但不能在输入框中选择文本！！！而且我只想在有输入框的单元格之间导航，而不是所有单元格

注意：我只想在具有文本输入框的单元格之间导航。

表代码：

```
 <table border="1" id="navigate">
    <tbody>
        <tr>
            <td><input type="text" id="1" class="input"></td>
            <td></td>
            <td><input type="text" id="3" class="input"></td>
            <td></td>
            <td><input type="text" id="5" class="input"></td>
        </tr>
        <tr>
            <td><input type="text" id="6" class="input"></td>
            <td><input type="text" id="7" class="input"></td>
            <td></td>
            <td><input type="text" id="9" class="input"></td>
            <td><input type="text" id="10" class="input"></td>
        </tr>
        <tr>
            <td><input type="text" id="11" class="input"></td>
            <td><input type="text" id="12" class="input"></td>
            <td></td>
            <td><input type="text" id="14" class="input"></td>
            <td><input type="text" id="15" class="input"></td>
        </tr>
    </tbody>
</table> 
```

[这是我自己的恶魔](http://jsfiddle.net/L7cm8/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T13:35:29.087

我用你指定的功能整理了一个小提琴[http://jsfiddle.net/tppiotrowski/L7cm8/10/](http://jsfiddle.net/tppiotrowski/L7cm8/10/)。我希望我正确理解了您的要求。如果您需要任何更改或不理解代码，请告诉我。祝你好运！

```
var active = 0;
//$('#navigate td').each(function(idx){$(this).html(idx);});
rePosition();

$(document).keydown(function(e) {
    reCalculate(e);
    rePosition();
    // if key is an arrow key, don't type the user
    // input. if it is any other key (a, b, c, etc)
    // edit the text
    if (e.keyCode > 36 && e.keyCode < 41) {
        return false;
    }
});

$('td').click(function() {
    active = $(this).closest('table').find('td').index(this);
    rePosition();
});

function reCalculate(e) {
    var rows = $('#navigate tr').length;
    var columns = $('#navigate tr:eq(0) td').length;
    var temp;

    if (e.keyCode == 37) { //move left or wrap
        temp = active;
        while (temp > 0) {
            temp = temp - 1;
            // only advance if there is an input field in the td
            if ($('#navigate tr td').eq(temp).find('input').length != 0) {
                active = temp;
                break;
            }
        }
    }
    if (e.keyCode == 38) { // move up
        temp = active;
        while (temp - columns >= 0) {
            temp = temp - columns;
            // only advance if there is an input field in the td
            if ($('#navigate tr td').eq(temp).find('input').length != 0) {
                active = temp;
                break;
            }
        }
    }
    if (e.keyCode == 39) { // move right or wrap
        temp = active;
        while (temp < (columns * rows) - 1) {
            temp = temp + 1;
            // only advance if there is an input field in the td
            if ($('#navigate tr td').eq(temp).find('input').length != 0) {
                active = temp;
                break;
            }
        }
    }
    if (e.keyCode == 40) { // move down
        temp = active;
        while (temp + columns <= (rows * columns) - 1) {
            temp = temp + columns;
            // only advance if there is an input field in the td
            if ($('#navigate tr td').eq(temp).find('input').length != 0) {
                active = temp;
                break;
            }
        }
    }
}

function rePosition() {
    console.log(active);
    $('.active').removeClass('active');
    $('#navigate tr td').eq(active).addClass('active');

    var input = $('#navigate tr td').eq(active).find('input').focus();
    scrollInView();
}

function scrollInView() {
    var target = $('#navigate tr td:eq(' + active + ')');
    if (target.length) {
        var top = target.offset().top;

        $('html,body').stop().animate({
            scrollTop: top - 100
        }, 400);
        return false;
    }
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:29:04.843

看看这篇 JQFAQ 帖子[如何使用单击或导航键选择表格单元格？](http://jqfaq.com/how-to-select-a-table-cell-using-click-or-navigation-keys/) 这有一些你想要的东西。

# cron - 如何在 cron 作业中运行 TYPO3 扩展？

> ID：13510569
> 
> 赞同：1
> 
> 时间：2012-11-22T10:24:09.177
> 
> 标签：cron, typo3

谁能告诉我如何在 TYPO3 中设置 cronjob？我创建了一个 TYPO3 扩展，我想每周运行一次。我已经安装了**调度程序**扩展，但它只允许执行一些扩展（例如，**tt_news**）。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T11:06:52.790

你的扩展必须支持`Scheduler`- 系统扩展（也许你需要先安装它）。因此，您必须在调度程序服务中注册您的扩展程序。

通过你的`ext_localconf.php`

```
if (!defined ('TYPO3_MODE')) die ('Access denied.');

$GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['scheduler']['tasks']['TX_YOUR_EXTENSIONKEY'] = array(
    'extension'        => $_EXTKEY,
    'title'            => 'Some meningful Title',
    'description'      => 'Some Discription of the Task'
); 
```

您需要`tasks/class.TX_YOUREXTENSKEY.php`在扩展目录中创建文件

```
class TX_YOUREXTENSKEY extends tx_scheduler_Task {
    public function execute() {}
    ...
} 
```

如果任务被执行，则调用执行函数。如果一切正常，它应该返回 true；如果出现错误，它应该返回 false。

最后需要加载您的类，这可以使用`ext_autoload.php`（在您的扩展根目录中，请参阅[TYPO3 Wiki: Autoload](http://wiki.typo3.org/Autoload)了解更多详细信息）

```
<?php
  return array(
    'tx_sfpinger_pinger' => t3lib_extMgm::extPath('sfpinger', 'tasks/class.tx_sfpinger_pinger.php')
  );
?> 
```

最后，您需要添加将`Scheduler`定期运行 ext 的系统 cron 命令（您可以在调度程序`Setup check`部分找到它），并将您创建的任务添加到其任务列表中。

您可以检查一个[演示任务](http://typo3.org/extensions/repository/view/sm_scheddemo)，它只是一个示例，您可以从中复制代码并粘贴到您的扩展中。

还要检查在您的 TYPO3 实现的文件夹中随调度程序任务提供的文档：`/typo3/sysext/scheduler/doc/manual.sxw`

# objective-c - 处理网络连接的正确方法是什么？

> ID：13510571
> 
> 赞同：1
> 
> 时间：2012-11-22T10:24:11.437
> 
> 标签：objective-c, ios, xcode

我的应用程序正在使用网络连接，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ 
    .
    .
    .
    receivedData = [[NSMutableData alloc] init];
} 
```

.

```
-(void) dataFromWeb{
request = [[NSURLRequest alloc] initWithURL: url];
theConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

if (theConnection) {
    receivedData = [[NSMutableData data] retain];
    NSLog(@"** NSURL request sent !");
} else {

    NSLog(@"Connection failed");
} 
```

.

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    .
    .
    .
    [theConnection release];
    [request release];

// Here - using receivedData
[receivedData release];
} 
```

.

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
      [receivedData setLength:0];
} 
```

.

```
- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{
    [theConnection release];
    [request release];
    [receivedData release];
} 
```

.

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [receivedData appendData:data];
} 
```

. 在应用程序的后面是这个片段（onButtonPressed）：

```
if (theConnection) {
    // Create the NSMutableData to hold the received data.
    // receivedData is an instance variable declared elsewhere.
    receivedData = [[NSMutableData data] retain];
} else {
    NSLog(@"Connection failed");
} 
```

我想了解的是：

*   如果我想同时创建另一个 URLRequest，我是否需要使用不同的连接，以便来自网络的数据在检索时不会混淆？

*   在这段代码中，发生的情况是有时代码会在函数**didReceiveResponse()** `setLength:0`的行上崩溃，当应用程序崩溃时我看到`receivedData=nil`我应该将行更改为

    ```
    if(receivedData!=nil)
       [receivedData setLength:0];
    else
       receivedData = [[NSMutableData data] retain]; 
    ```

*   我不太确定这条线在做什么**receivedData = [[NSMutableData data] retain];**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:46:43.947

我认为处理 2 个连接的最简单方法是复制`NSMutableData`. 我以这种方式使用，它对我来说非常有效。

拳头你在你想要第二个连接的地方这样做：

```
receivedData2 = [[NSMutableData alloc] init];

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response  
{  
    if (receivedData2) {
        [receivedData2 setLength:0];  
    }
    else 
    {
        [receivedData setLength:0];  
    }
}  

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data  
{  
    if (receivedData2) {
        [receivedData2 appendData:data];  
    }
    else {    
        [receivedData appendData:data]; 
    }
} 
```

然后，在您要求 receivedData2 或 receivedData 的方法中

当你使用它时不要忘记做：

```
receivedData2=nil;
[receivedData2 setLength:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:49:27.560

1.  你当然需要一个不同的`NSURLConnection`.
2.  你可以这样做，但最好找出为什么它是 nil，因为它不应该。
3.  它分配一个空`NSMutableData`对象。但这对我来说似乎是丑陋的代码，因为您创建了一个自动释放的对象并保留它。最好写`[NSMutableData new]`或`[[NSMutableData alloc] init]`。

# vim - colorcolum 仅在 VIM 中的某些文件（例如 *.cpp、*.h）中

> ID：13510578
> 
> 赞同：3
> 
> 时间：2012-11-22T10:24:37.277
> 
> 标签：vim

我想在 VIM 的第 80 列有一个标记，但只能在 *.cpp、*.h 之类的文件中。但不在 *.txt 中

现在我的 .vimrc 中有这个

```
set cc=120 
```

干杯

**解决方案**：

```
autocmd FileType cpp,c,cxx,h,hpp,python,sh  setlocal cc=120 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T10:38:21.967

Vim 不直接使用文件扩展名，它有一个间接调用`filetype`，然后用于语法高亮和特定设置。

将您的`:set`命令（as `:setlocal`，以便它只影响当前缓冲区 [1]）放在一个新文件`~/.vim/after/ftplugin/cpp.vim`中。（您也可以`:autocmd FileType cpp setlocal cc=120`直接在您`.vimrc`的 .

* * *

[1] 请注意，这`'colorcolumn'`是窗口本地的，而不是缓冲区本地的，因此该方法并不完美，但通常足够好。它可以通过额外的自动命令来完善`BufWinEnter/Leave`。

# java - 在java中使用html mailto href

> ID：13510581
> 
> 赞同：0
> 
> 时间：2012-11-22T10:24:39.967
> 
> 标签：java, html, email

我在使用以下 html 的 JOptionPane 对话框上有一个字符串：

```
String email= "<html>"  + "<html><b>John Smith" + "\n<html><a href=mailto:john@smith.com>john@smith.com</a>"; 
```

这突出显示了带有下划线的蓝色电子邮件地址，正如人们在 html 中所期望的那样，但我认为它是可点击的，使用提供的电子邮件地址打开默认邮件客户端并使用新消息，但它什么也没做。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:32:28.050

在单击时创建一个处理程序并调用桌面 API 以调用操作系统默认邮件客户端：

[http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#mail](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#mail) ()

# iphone - 什么是使 iOS 应用程序崩溃的可靠方法？

> ID：13510584
> 
> 赞同：136
> 
> 时间：2012-11-22T10:25:06.597
> 
> 标签：iphone, objective-c, ios

我想通过在用户执行真实用户不太可能意外执行的特定操作时故意让它崩溃来测试我的应用程序的崩溃报告。

但是，什么是使应用程序崩溃并且不会在编译时产生警告的可靠方法呢？

**编辑：**请注意，这个问题的许多看似显而易见的答案会导致异常被 Cocoa 捕获，因此不会导致应用程序崩溃。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-11-22T10:36:46.613

在 Objective-C 中直接使用 C 导致错误访问

```
strcpy(0, "bla"); 
```

*注意：虽然这适用于我知道的任何系统——在未来版本的 C 运行时或编译器中，这可能不会再导致崩溃。请参阅[Objective-C 中的空指针取消引用未定义行为吗？](https://stackoverflow.com/questions/13651642/is-null-pointer-dereference-defined-behavior-in-objective-c))*

（在swift中，您必须桥接到objC才能做到这一点）

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2012-11-22T10:38:59.877

我目前最喜欢的：

```
assert(! "crashing on purpose to test <insert your reason here>"); 
```

经典：

```
kill( getpid(), SIGABRT ); 
```

还有一些pr0n：

```
*(long*)0 = 0xB16B00B5; 
```

所有这些都会生成由我的崩溃报告工具捕获的崩溃。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-11-23T04:14:19.537

由于我们都使用 Clang for iOS，这是相当可靠的：

```
__builtin_trap(); 
```

这样做的好处是它正是为此目的而设计的，因此它不应该生成任何编译器警告或错误。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-01-28T19:07:52.340

一个好的旧堆栈溢出怎么样:)

```
- (void)stackOverflow
{
    [self stackOverflow];
} 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2012-11-22T15:11:26.390

`abort();`导致异常终止……那是崩溃。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-11-22T10:37:37.580

最受欢迎的一个 - 无法识别的选择器崩溃：

```
NSObject *object = [[NSObject alloc] init];
[object performSelector:@selector(asfd)]; 
```

确保你没有在那个类中实现 -asdf 方法哈哈

或索引超出范围异常：

```
NSArray * array = [NSArray array];
[array objectAtIndex:5]; 
```

而且当然 `kill( getpid(), SIGABRT );`

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2015-03-01T11:57:53.043

我认为在 Swift 中你很容易抛出一个致命错误：

```
func foo() {
    fatalError("crash!")
} 
```

它实际上甚至打算使用此功能以防万一出现问题以使应用程序崩溃。

为了避免在特殊情况下使用 if 语句，您也可以使用`precondition`。它类似于 `assert`，因此意图（如果需要）非常清楚，并且*不会*在最终版本中删除为`assert`. 它像`precondition(myBoolean, "This is a helpful error message for debugging.")`.

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-11-22T10:27:28.990

向已释放的对象发送消息

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-11-28T00:08:02.273

```
exit(0); 
```

（必须...键入... 30 个字符）

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-11-22T10:34:33.617

您还可以引发异常：

```
[NSException raise:NSInternalInconsistencyException
            format:@"I want to test app crashes!."]; 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-11-27T19:43:27.303

将手势识别器添加到可识别 10 根手指点击的视图（iPhone 为 5 根手指，因为 10 可能会有点拥挤）。GR 有一个附加的方法，可以执行前面提到的任何一种可靠的方法来让你的应用程序崩溃。大多数用户不会将 10 根手指放在您的应用程序上，因此您可以避免普通用户意外导致崩溃。

但是，您应该能够使用诸如 Testflight 之类的东西，或者只是将其部署到个人设备上并在将其提交给 Apple 之前在野外进行测试。强制崩溃可能会让您的应用程序被 Apple 拒绝。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-11-22T11:45:23.973

可以尝试类似的东西

```
NSArray* crashingArray = [NSArray arrayWithCapacity:1];
[crashingArray release]; 
```

应该在 EXC_BAD_ACCESS 上崩溃（可能需要再次释放它，但通常它应该已经像这样崩溃了）

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-11-22T12:37:49.640

我会去：`int raise(int sig);`

获取更多信息`>man raise`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-12-14T02:07:16.090

我只会正常终止该过程：

```
kill(getpid(), SIGKILL); 
```

因此，如果您安装带有信号的处理程序，您还可以处理崩溃，完成写入打开的文件和这些事情。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-06-04T13:42:37.670

我用

```
[self doesNotRecognizeSelector:_cmd]; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-03-05T16:29:24.633

使用 RubyMotion 时，我使用这个：

```
 n=Pointer.new ('c', 1)
    n[1000] ='h' 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-03-18T11:13:37.747

试试这个：

```
- (IBAction)Button:(id)sender
{
    NSArray *array = [NSArray new];
    NSLog(@"%@",[array objectAtIndex:8]);
} 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2012-12-23T10:40:48.257

一个错误的`NSLog`陈述会做到这一点

```
NSLog(@"%@",1); 
```

# c# - 将winform定位到中央屏幕不起作用

> ID：13510587
> 
> 赞同：3
> 
> 时间：2012-11-22T10:25:19.780
> 
> 标签：c#, winforms

我的 Winforms 应用程序中的窗口位置存在问题。

我需要在启动过程中将窗口定位在屏幕中央。我尝试了以下但没有奏效。表单始终在左上角打开。

我在加载事件中尝试了这些：

```
this.CenterToScreen();
this.Location = new Point((Screen.PrimaryScreen.WorkingArea.Width - this.Width) / 2,
                          (Screen.PrimaryScreen.WorkingArea.Height - this.Height) / 2); 
```

更新：我已将表格的最大和最小尺寸设为 1090,726。

我的设计器文件有这个代码：

```
 this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.BackColor = System.Drawing.SystemColors.GrayText;
        this.ClientSize = new System.Drawing.Size(1074, 688);
        this.Font = new System.Drawing.Font("Microsoft Sans Serif", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.Icon = ((System.Drawing.Icon)(resources.GetObject("$this.Icon")));
        this.Margin = new System.Windows.Forms.Padding(3, 4, 3, 4);
        this.MaximizeBox = false;
        this.MaximumSize = new System.Drawing.Size(1090, 726);
        this.MinimumSize = new System.Drawing.Size(1090, 726);
        this.Name = "Mail_Remainder";
        this.RightToLeftLayout = true;
        this.SizeGripStyle = System.Windows.Forms.SizeGripStyle.Hide;
        this.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen;
        this.Text = "Remainder";
        this.WindowState = System.Windows.Forms.FormWindowState.Maximized;
        this.Load += new System.EventHandler(this.Mail_Remainder_Load);
        this.Resize += new System.EventHandler(this.Mail_Remainder_Resize);
        this.ResumeLayout(false);
        this.PerformLayout(); 
```

还有其他方法可以做到这一点吗？

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T10:27:56.407

看看以下内容：

```
 Form1.StartPosition = FormStartPosition.CenterScreen;
 Form1.Show(); 
```

编辑：

线

```
 this.WindowState = System.Windows.Forms.FormWindowState.Maximized; 
```

是导致偏心的原因。

如果你评论它：

```
 private void InitializeComponent()
    {
        this.SuspendLayout();
        // 
        // Form1
        // 
                    this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.BackColor = System.Drawing.SystemColors.GrayText;
        this.ClientSize = new System.Drawing.Size(1074, 688);
        this.Font = new System.Drawing.Font("Microsoft Sans Serif", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.Icon = ((System.Drawing.Icon)(resources.GetObject("$this.Icon")));
        this.Margin = new System.Windows.Forms.Padding(3, 4, 3, 4);
        this.MaximizeBox = false;
        this.MaximumSize = new System.Drawing.Size(1090, 726);
        this.MinimumSize = new System.Drawing.Size(1090, 726);
        this.Name = "Mail_Remainder";
        this.RightToLeftLayout = true;
        this.SizeGripStyle = System.Windows.Forms.SizeGripStyle.Hide;
        this.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen;
        this.Text = "Remainder";
//            this.WindowState = System.Windows.Forms.FormWindowState.Maximized;
        this.Load += new System.EventHandler(this.Mail_Remainder_Load);
        this.Resize += new System.EventHandler(this.Mail_Remainder_Resize);
        this.ResumeLayout(false);
        this.PerformLayout();

    } 
```

窗口出现在屏幕中央。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T10:28:29.807

只需将`StartPosition`表单的属性设置为`CenterScreen`......

![在此处输入图像描述](../Images/641209878bbfa43869f3f858ff203675.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T19:55:41.890

我有类似的问题；在 CenterToScreen () 之后，表单偏离中心。然后我注意到我在 InitializeComponent () 之前这样做了。我在 InitializeComponent 之后移动了它，它工作正常。

# c# - 范围混淆：如何将单个类 C# 项目拆分为多个类？

> ID：13510588
> 
> 赞同：0
> 
> 时间：2012-11-22T10:25:22.637
> 
> 标签：c#, class, multidimensional-array, scope

**更新：**请参阅底部的**EDIT 3 。**

我是 C# 和一般编程的初学者（所以请温柔一点！）。我遵循了大量的教程并阅读了书籍，并认为我理解了课程。到现在。

我有一个相当简单的单类项目，它使用 2D 字符串数组来设置一个 10x10 的字母 E（空）和 F（全）网格。我使用 int x 和 int y 来引用数组的坐标，并使用 switch 来检测输入并从 x 和 y 中加减来确定数组单元格是空的还是满的。

```
class MainGame
{
public MainGame()
{
    string[,] mapTerr = new string[10, 10]
    {
        { "F", "F", "F", "F", "F", "F", "F", "F", "F", "F" },
        { "F", "E", "E", "E", "E", "E", "E", "E", "E", "F" },
        { "F", "E", "E", "E", "E", "E", "E", "E", "E", "F" },
        { "F", "E", "E", "E", "E", "E", "E", "E", "E", "F" },
        { "F", "E", "E", "E", "E", "E", "E", "E", "E", "F" },
        { "F", "E", "E", "E", "E", "E", "E", "E", "E", "F" },
        { "F", "E", "E", "E", "E", "E", "E", "E", "E", "F" },
        { "F", "E", "E", "E", "E", "E", "E", "E", "E", "F" },
        { "F", "E", "E", "E", "E", "E", "E", "E", "E", "F" },
        { "F", "F", "F", "F", "F", "F", "F", "F", "F", "F" },
    }; // long-winded I know, but helps visualise the array
    int x, y;
    string navDir;
    Console.WriteLine("Enter a command:");
    navDir = Console.ReadLine();
    switch (navDir)
    {
        case "N":
        case "n":
            x -= 1;
            if (mapTerr[x, y] == "F")
            {
                Console.WriteLine("You cannot move North, it is blocked!");
                x += 1;
            }
            else
            {
                Console.WriteLine("You move North.");
            }
            break;
        case "E":
        case "e":
            y += 1;
            if (mapTerr[x, y] == "F")
            {
                Console.WriteLine("You cannot move East, it is blocked!");
                y -= 1;
            }
            else
            {
                Console.WriteLine("You move East.");
            }
            break;
        // etc... 
```

这工作正常。但是，我尝试将其拆分为单独的类：一个用于创建数组，另一个用于控制输入和输出。这是我的尝试：

```
class Program
{
    public static void Main(string[] args)
    {
        Map map = new Map();
        UserControl usercontrol = new UserControl();
    }
}

class Map
{
    string[,] mapTerr = new string[10, 10] {
    { // array contents here
    };
}

class UserControl
{
    int x, y;
    string navDir;

    public UserControl()
    {
        Console.WriteLine("Enter a command:");
        navDir = Console.ReadLine();
        switch (navDir)
        {
            case "N":
            case "n":
                x -= 1;
                if (mapTerr[x, y] == "F") // ERROR: The name 'mapTerr' does not exit in the current context"
                {
                    Console.WriteLine("You cannot move North, it is blocked!");
                    x += 1;
                }
                else
                {
                    Console.WriteLine("You move North.");
                }
                break;
            // etc... 
```

我一生都无法弄清楚如何让它发挥作用。错误主要出现在从交换机内部调用数组时。

我意识到这是因为数组与 Map 类而不是 UserControl 类相关联，那么如何使其可见/可用？

尽管在这里和其他地方在线搜索了数组/范围/类部分，但没有什么能真正用简单的术语来完全解释事情。我认为这是范围问题，我试图以不可能的方式调用对事物的引用。如果有人能解释我做错了什么，也许能暗示我可以用*正确*的方式做事，我真的很感激！（为冗长的解释/问题道歉）

编辑 1：在该行旁边添加了特定的错误消息作为注释。这发生在开关中引用 mapTerr 的每一行上。

编辑 2：阐明实例化和类结构。

**编辑 3：**好的，字符串数组是在 Map 类中公开设置的，`public string[,] elsaNav = new string[10, 10] {{/*contents*/};`我在 Program 类中实例化了 map 类，但仍然无法从 UserControl 类中调用 mapTerr 数组，尽管使用`map.mapTerr`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:29:15.470

```
public class Map
{
    public string[,] mapTerr = new string[10, 10] {
    { // array contents here
    };
}

public class UserControl
{
    int x, y;
    string navDir;
    Map myMap = new Map();

    public UserControl()
    {
        Console.WriteLine("Enter a command:");
        navDir = Console.ReadLine();
        switch (navDir)
        {
            case "N":
            case "n":
                x -= 1;
                if (myMap.mapTerr[x, y] == "F")
                {
                    Console.WriteLine("You cannot move North, it is blocked!");
                    x += 1;
                }
                else
                {
                    Console.WriteLine("You move North.");
                }
                break;
            // etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:29:22.480

在使用本文中给出的建议进行编辑后，我不太确定您的最终解决方案如何，但我已经修复了代码，为您提供了一种使用它的方法，希望它可以帮助您查明错误你的代码:)

```
using System.Collections;
using System;

class Program
{
    public static void Main(string[] args)
    {
        UserControl usercontrol = new UserControl();
    }
}

class Map
{
// Private map
private string[,] mapTerr;

// Public map
public string[,] MapTerr
{
    get {return mapTerr;}
}

public Map(int width, int height)
{
    mapTerr = new string[width, height];

    for (int x = 0; x < width; x++)
    {
        for (int y = 0; y < height; y++)
        {
            mapTerr[x,y] = "E";
        }
    }
}
}

class UserControl
{
    int x, y;
    string navDir;
Map map;

    public UserControl()
    {
        map = new Map(10, 10);
        Console.WriteLine("Enter a command:");
        navDir = Console.ReadLine();
        switch (navDir)
        {
            case "N":
            case "n":
            x -= 1;
            if (map.MapTerr[x, y] == "F") // ERROR: The name 'mapTerr' does not exit in the current context"
            {
                Console.WriteLine("You cannot move North, it is blocked!");
                x += 1;
            }
            else
            {
                Console.WriteLine("You move North.");
            }
            break;
        // etc...
        }
}
} 
```

如果缩进有点不对，我很抱歉，我很着急，现在无法访问适当的 C# 编译器，但上面的代码应该可以工作:)

顺便说一句，将您的地图和用户输入封装并分离到两个类中是个好主意！新程序员的良好开端:)

请记住在您的类中广泛使用属性来控制如何在您的类中访问数据成员。在大多数情况下，您不想让成员完全公开。相反，将它们设为私有并为它们创建一个属性，这样您就可以控制如何设置或访问数据。

当然，我刚刚快速编写了一些用字母初始化数组的示例逻辑，只是为了展示解决方案，因此您可能需要重新编写它以满足您自己的需要:)

此外，您希望如何使用地图对象还取决于您自己对客户端应如何使用代码的想法，我只是将 Map 对象作为 UserControl 类的组合，而不让客户端代码使用它。另一种方法当然是让客户端代码初始化自己的地图对象并将其传递给 UserInput 类的构造函数。

希望它可以帮助你。

[编辑]

> 好的，字符串数组在Map类中公开设置，public string[,] elsaNav = new string[10, 10] {{/ *contents* /}; 我在 Program 类中实例化了 map 类，但仍然无法从 UserControl 类中调用 mapTerr 数组，尽管使用了 map.mapTerr

好的，我还没有看到你的解决方案代码，但也许我仍然明白......让我试一试：P 基本上你是在 Program 类中实例化 Map 类，例如：

```
Map myMap = new Map(); 
```

然后您尝试直接在您的 UserControl 类的实例中访问“myMap”引用？在这种情况下，您不能简单地这样做。myMap引用仅在您*从中*调用它的 Program 类方法的范围内，因此当您尝试从*UserControl*类中引用它时，它不会对此有任何了解，它超出了它的范围。相反，您必须将引用传递给*UserControl*类，如下所示：

```
Map myMap = new Map();

UserControl newControl = new UserControl(myMap); 
```

然后在类中，您的构造函数将如下所示：

```
 public UserControl(Map map)
    {
        map.MapTerr... etc
    } 
```

也许我误解了你所说的，但如果这就是你的意思，那么上面的解决方案应该可以解决它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:28:29.753

您还没有实例化地图类。

从公共 UserControl() 中，您需要沿 Map map = new Map();

然后通过 map.mapTerr[x, y] 访问 mapTerr

例如，请查看 Dejo 上面的回复。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T10:41:01.843

您的主要问题是 mapTerr 的默认保护级别是 Map 私有的。其次，即使它是公开的，你仍然需要进一步限定它，要么通过 Map 的实例化实例，要么将其设为静态：

```
static class Map
{
    public static readonly string[,] mapTerr = new string[10,10 {...}
} 
```

要引用您需要完全限定该属性：

```
class UserControl
{
    public UserControl()
    {
        ...
        if (Map.mapTerr[x,y] == "F")
        { 
            ...
        }
    }
} 
```

您还应该考虑 1) 将公共字段隐藏在属性后面，以及 2) 将字符串更改为字符。

# java - Java中的强制覆盖字段

> ID：13510596
> 
> 赞同：0
> 
> 时间：2012-11-22T10:25:51.360
> 
> 标签：java, inheritance

我还没有找到合适的方法来做到这一点。假设`Class Aa`继承自`Class A`. 我的想法是在 Aa 中覆盖两个属性，因此当从 A 调用此函数时，我可以在 A 的函数中使用这些属性。

```
Class A {
   String attr;

   public void publicMethod(){
       ....
       callMethod2();
       ....
   }

   protected method2(){
       ....
       whatever = attr;
   }
}

Class Aa extends A{
    //mandatory override?
    attr
} 
```

调用示例：

```
Aa test = new Aa();
test.publicMethod(); 
```

我想我可以“不强制”它会起作用，但是你必须以某种方式设置这个属性是不直观的。任何解决方法？我可能过度设计了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:27:58.167

您需要 abstract 关键字。但是，它仅适用于方法，而不适用于属性（无论如何这是正确的方法）。

```
public abstract class AbstractBaseClass {

   public void publicMethod(){
       // ....
       String value = getAttribute();
       // ....
   }

   protected abstract String getAttribute();
}

public class ConcreteClass extends AbstractBaseClass {
    protected String getAttribute() {
      // Lazy loading attr
      if (attr==null) attr = "default value";
      return attr;
    }

    protected String attr;
} 
```

# jquery - 日期时间未正确绑定以查看

> ID：13510599
> 
> 赞同：1
> 
> 时间：2012-11-22T10:26:15.333
> 
> 标签：jquery, asp.net-mvc-4

在我的 MVC4 asp.net 项目中，我使用 ajax 将数据库中的日期时间绑定到视图，

这是ajax代码，

```
 $.get(
        '/Child/GetFamilyMemberView', { familyid: hv },
        function (data) {
            var html = "";
            for (var i = 0; i < data.length; i++) {                 
                html += "<p>" + data[i].Family_Member_DateofBirth + "</p>";                 
            }
            $("#getfamilymember").append(html); 
       }); 
```

将日期时间值绑定到视图后，我得到输出，

```
/Date(1104517800000)/ 
```

任何想法为什么会发生这种情况？

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:32:45.740

发生这种情况是因为您的 ajax 以 JSON 格式传递数据。

使用这样的函数将 Json 日期转换为 Javascript 日期：

```
function parseJsonDate(jsonDate) {
    var offset = new Date().getTimezoneOffset() * 60000;
    var parts = /\/Date\((-?\d+)([+-]\d{2})?(\d{2})?.*/.exec(jsonDate);

    if (parts[2] == undefined) 
      parts[2] = 0;

    if (parts[3] == undefined) 
      parts[3] = 0;

    return new Date(+parts[1] + offset + parts[2]*3600000 + parts[3]*60000);
}; 
```

更新：使用此[http://www.mattkruse.com/javascript/date/](http://www.mattkruse.com/javascript/date/)将 javascript 日期格式化为字符串。

如果要将日期传递给字符串 (mm/dd/yyyy)：

```
function formatDate(jsDate)
{
   return jsDate.getMonth()+1 + "/" + jsDate.getDate() + "/" + jsDate.getYear();
} 
```

# javascript - 删除列的重复单元格

> ID：13510603
> 
> 赞同：0
> 
> 时间：2012-11-22T10:26:28.793
> 
> 标签：javascript, jquery

我想删除列的重复单元格。

```
<table id="test" border="1">
    <tr>
    <td>test1<td>
    <td>test2<td>
    <td>test3<td>
    </tr>
      <tr>
    <td>test4<td>
    <td>test2<td>
    <td>test5<td>
    </tr>
    <tr>
    <td>test6<td>
    <td>test2<td>
    <td>test5<td>
    </tr>
          <tr>
    <td>test6<td>
    <td>test8<td>
    <td>test9<td>
    </tr>
    </table>​​​

output
------
test1        test2        test3    
test4        test2        test5    
test6        test2        test9    
test6        test8        test9    

I want in this format
---------------------
test1        test2        test3    
test4                     test5     
test6                     test9    
             test8 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:52:15.660

这只会删除跨列的重复文本。它之所以有效，是因为元素是按文档顺序选择的：

```
var seen = {};
$('#test td').each(function() {
    // Encode column and content information.
    var key =  $(this).index() +  $(this).text();
    if (seen[key]) {
        $(this).text('');
    }
    else {
        seen[key] = true;
    }
})​; 
```

如果您的单元格跨越多列，它可能不起作用。

稍作调整的[**DEMO**](http://jsfiddle.net/shDpY/1/)。

**更新：**仅适用于连续单元格。这个想法是跟踪在一列中看到的先前值。

```
var seen = {};
$('#test td').each(function() {
    var index =  $(this).index();
    var txt = $(this).text();
    if (seen[index] === txt) {
        $(this).text('');
    }
    else {
        seen[index] = txt;
    }
})​; 
```

[**DEMO**](http://jsfiddle.net/shDpY/2/)（注意`test5`在右栏中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:36:59.420

你可以试试这样的

**[现场演示](http://jsfiddle.net/cVBUy/7/)**

```
arr = [];
$('#test td').each(function(){
    key = "" + $(this).index() + $.trim($(this).text());
       if(arr.indexOf( key ) == -1)
           arr.push(key );
       else
           $(this).text('')    
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:37:21.463

[您可以在此处](https://stackoverflow.com/questions/2822962/jquery-remove-duplicate-elements)使用此模式。

jsFiddle[在这里](http://jsfiddle.net/JJj4Z/26/)。

```
var seen = {};
$('#removeDupes').on('click', function(){
    $('#test tr td').each(function() {
        var txt = $(this).text();
        var index = $(this).parent('tr').children('td').index(this);
        if (!seen[index]){
            seen[index] = new Array();
        }

        if (seen[index][txt]) {
            $(this).html('&nbsp;');
        }
        else {
            seen[index][txt] = true;
        }
    });
});​ 
```

请注意，您的`</td>`元素没有正确关闭，并且根据 ahren 的评论，删除 td`entirely`可能会导致对齐问题。

# objective-c - 如何在时钟不同步的线程上强制执行线程锁定（objective-c）

> ID：13510606
> 
> 赞同：1
> 
> 时间：2012-11-22T10:26:35.540
> 
> 标签：objective-c, multithreading, synchronization, locking

基本上我有两个线程在运行..一个通过网络广播音乐（我们称之为广播器）..另一个与客户端通信以了解何时开始广播、播放音乐等..（在主上运行）

即使服务器正在与客户端交谈，广播线程也会继续运行，当我想暂停广播线程时只有一个部分，那就是我想向客户端发送数据包以开始播放音乐（即我想要服务器和客户端同步播放）..

我已经使用了几乎所有东西（即 NSLocks、pthread_mutex_t 和 pthread_cond_t、线程睡眠等）.. 但我继续在这种情况下运行：

基本上我成功锁定了广播线程..但它总是在一个似乎有不同时钟设置的命令中爬行

注意日志：

```
12:02:59.288 Snap[30700:7a0f] broadcaster--> sending packet number 69 to all peers
12:02:59.294 Snap[30700:7a0f] broadcaster--> going through packets loop
12:02:59.306 Snap[30700:707] communicator--> SERVER: WILL LOCK BROADCASTING
12:02:59.312 Snap[30700:707] communicator--> we are inside serverReceivedPacket
12:02:59.314 Snap[30700:707] communicator--> SERVER: JUST RECEIVED A PRIMED PACKET!
12:02:59.316 Snap[30700:707]communicator-->  we are inside allPlayersArePrimed and we got 2 players
12:02:59.318 Snap[30700:707] communicator--> CLIENT: players are primed!

12:02:59.320 Snap[30700:707] communicator--> all players are primed now!.. pausing broadcast
12:02:59.322 Snap[30700:707] communicator--> will fire music player
12:02:59.311 Snap[30700:7a0f] broadcaster--> sending packet number 70 to all peers
12:02:59.335 Snap[30700:707] communicator--> SERVER: about to play [UNLOCK]
12:02:59.452 Snap[30700:7a0f] broadcaster--> going through packets loop
12:02:59.454 Snap[30700:7a0f] broadcaster--> sending packet number 71 to all peers 
```

我的问题特别在于这一行：

```
12:02:59.311 Snap[30700:7a0f] broadcaster--> sending packet number 70 to all peers 
```

如果您关注广播者线程日志..您会看到它的最后一条日志语句在 12:02:59.288 停止，然后它被锁定了..但**在**通信器解锁之前..广播者在 12 处输入了一个命令：02：59.311 ..虽然它是**在**后来的通讯器命令**之后**出现的！

我已经看到这种情况一次又一次地重复......我不知道如何解决它？

这是一些代码：

**与传播者和广播者共享的实例变量：**

```
@implementation Game
{
    ... 

    NSLock *broadcastLock;

} 
```

**通讯员：**

```
 case PacketTypeClientPrimed:
    {

        player.isPrimed = true;  
        if (_state == GameStateWaitingForPrimed && [self allPlayersArePrimed])
        {
            [Logger Log:@"SERVER: WILL LOCK BROADCASTING"];
            broadcastLock = [[NSLock alloc] init];
            [broadcastLock lock];

            _broadCastState = BroadCastStatePaused;
            [hostViewController.musicPlayer skipToBeginning];

            Packet *packet = [Packet packetWithType:PacketTypePlayMusicNow];                

            NSError *error;
            NSLog(@"all players are primed now!.. pausing broadcast ");
            [_session sendDataToAllPeers:[packet data] withDataMode:GKSendDataUnreliable error:&error];
            NSLog(@"will fire music player");

            [self performSelector:@selector(startMusic:) withObject:hostViewController.musicPlayer afterDelay:0.01];
            _state =  GameStatePlayBackCommenced;
        }
    }

....

-(void)startMusic:(MPMusicPlayerController *)player 
{
    NSLog(@"SERVER: about to play [UNLOCK]");
    [player play];
    _broadCastState = BroadCastStateInProgress;
    [broadcastLock unlock];
} 
```

**广播公司：**

```
-(void)broadcastSample
{
    [broadcastLock lock];

        CMSampleBufferRef sample;
        sample = [readerOutputcopyNextSampleBuffer];            
        ....                        

        for (int i = 0; i < inNumberPackets; ++i)
        {
            // ..
            // setup audio packet
            // ..
            if ((packetSpaceRemaining < (dataSize + AUDIO_STREAM_PACK_DESC_SIZE)) || 
                (packetDescrSpaceRemaining < AUDIO_STREAM_PACK_DESC_SIZE))
            {
                if (![self encapsulateAndShipPacket:packet packetDescriptions:packetDescriptions packetID:assetOnAirID])
                    break;
            }                        
        }

    [broadcastLock unlock];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:34:12.727

为什么要动态分配锁对象？当广播者线程通过时没有锁定对象，所以它不会锁定它。然后将锁分配并锁定在通信器线程中（它无法告诉广播器已经进入其临界区），两者并行运行。

您应该全局分配锁对象，并且它应该在任一线程可能尝试进入其临界区之前一直存在。

# oracle - 如何按Group by在表格中仅提取最小日期的一行

> ID：13510608
> 
> 赞同：0
> 
> 时间：2012-11-22T10:26:45.067
> 
> 标签：oracle, plsql

```
WITH A AS (
SELECT SYSDATE date_1,'1' data_1 ,1 item FROM DUAL
UNION
SELECT add_months(SYSDATE,7) date_1,'8'data, '1' item_ FROM DUAL
UNION
SELECT add_months(SYSDATE,6)+ 10, '4' data, '1' item FROM dual
UNION
SELECT add_months(SYSDATE,6) date_1,'3' data, '2' item FROM DUAL
)
SELECT min(date_1), data,item
FROM a 
WHERE date_1 BETWEEN add_months(SYSDATE,6) AND last_day(add_months(SYSDATE,7))
GROUP BY item,data 
```

结果显示项目 1 有两行，但我只想要最小日期一，如何更改代码以在最小（日期）显示一项数据。**我需要日期匹配正确的数据和项目 **。感谢您阅读并期待正确的答案。

我找到了一种不好的方法来调用我的意思：按项目分组并在范围内选择最小 date_1

```
WITH A AS (
      SELECT SYSDATE date_1,               '1' data, '1' item FROM DUAL
UNION SELECT add_months(SYSDATE,7) date_1, '8' data, '1' item FROM DUAL
UNION SELECT add_months(SYSDATE,6)+ 10,    '4' data, '1' item FROM dual
UNION SELECT add_months(SYSDATE,6) date_1, '3' data, '2' item FROM DUAL
)   
select a.* from A a,(select min(date_1) date_1,item  from A
where 
date_1 BETWEEN add_months(SYSDATE, 6) 
                 AND last_day(add_months(SYSDATE, 7))
                 group by item) b where a.date_1 = b.date_1 and a.item= b.item 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:34:30.627

使用[`KEEP ... FIRST`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions065.htm#i1000901)：

```
SQL> WITH A AS (
  2        SELECT SYSDATE date_1,               '1' data, '1' item FROM DUAL
  3  UNION SELECT add_months(SYSDATE,7) date_1, '8' data, '1' item FROM DUAL
  4  UNION SELECT add_months(SYSDATE,6)+ 10,    '4' data, '1' item FROM dual
  5  UNION SELECT add_months(SYSDATE,6) date_1, '3' data, '2' item FROM DUAL
  6  )
  7  SELECT MIN(date_1), item,
  8         MAX(data) KEEP (DENSE_RANK FIRST ORDER BY date_1) DATA
  9    FROM a
 10   WHERE date_1 BETWEEN add_months(SYSDATE, 6)
 11                    AND last_day(add_months(SYSDATE, 7))
 12   GROUP BY item;

MIN(DATE_1) ITEM DATA
----------- ---- ----
01/06/2013  1    4
22/05/2013  2    3 
```

这将选择日期最短的行子集上的 (MAX) 数据（这里只有一行）。

# image - div 和重叠图像上的负顶部

> ID：13510609
> 
> 赞同：1
> 
> 时间：2012-11-22T10:26:51.777
> 
> 标签：image, firefox

我会很短。
[http://www.tuttoinunafesta.info](http://www.tuttoinunafesta.info)
单击顶部菜单的第二个按钮（“Feste per bambini”）并查看出现在橙色条纹上的链接。

在 IE10 和 Chrome 中，它们应该是垂直位于条纹的中心，因为图像是 42px（与容器 div 相同的 div）。在 Firefox 中，它们比它们应该在的位置低一些 px。

为什么？

菜单顶部按钮的容器 div 与彩色条纹的容器 div 重叠（在本例中为橙色）。底部 div 具有以下属性：
`{position:relative; top:-2px;}.`

即使两个 div 重叠，Firefox 似乎也无法将链接的图像重叠在按钮的图像上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:01:45.400

你用过css重置吗？浏览器默认添加填充和边距，但问题是，它们都是不同的。可以使用以下代码完成简单的 css 重置：

```
* { margin: 0; padding: 0; } 
```

网络上有更深入的可用 - 这是最常用的之一 - [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)。

# php - PHP MSSQL 变量不起作用？

> ID：13510614
> 
> 赞同：0
> 
> 时间：2012-11-22T10:27:02.070
> 
> 标签：php, sql-server, variables

非常困惑，可能忽略了一些东西，但有些想法将不胜感激！

我有一个查询如下：

```
$usernamequery = "select username + ' ' + surname as username, userid from users where username + ' ' + surname = '$username'";
$usernamestmt = sqlsrv_query( $conn, $usernamequery);
if( $usernamestmt === false ) {
 die( print_r( sqlsrv_errors(), true));
}

while( $obj = sqlsrv_fetch_object( $usernamestmt)) 
{
echo    $username1 = $obj->username;
echo    $userid = $obj->userid;
} 
```

它不返回任何东西，但是当我回显 $usernamequery 我得到

```
select username + ' ' + surname as username, userid from users where username + ' ' + surname = 'Joe Bloggs' 
```

然后当我直接在 SQL 中运行它时，它会返回我期望的结果。

更奇怪的是，当我将 PHP 更改为实际查询时（即

```
select username + ' ' + surname as username, userid from users where username + ' ' + surname = 'Joe Bloggs' 
```

)

它运行起来就像一个魅力，并返回我期待的结果。

总而言之，我完全糊涂了……！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:39:56.837

我有根据的猜测是，`$username`它不包含您认为的内容。它可能有一个制表符或多个空格，但您可能会将其回显到 HTML 中，并且浏览器正在将空格折叠成一个空格。

[您可以使用var_dump()](http://php.net/var_dump)检查变量的确切内容，例如：

```
var_dump($username); 
```

...的，如果您需要更多详细信息，请使用[bin2hex()](http://php.net/bin2hex)；

```
var_dump(bin2hex($username)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:30:07.177

将查询更改为

```
$usernamequery = "select username + ' ' + surname as fullname, userid from users where fullname = '$username'"; 
```

# makefile - 是否有一种**简单**的方法可以使用 Makefile 项目将对象文件的创建重定向到指定目录？

> ID：13510618
> 
> 赞同：3
> 
> 时间：2012-11-22T10:27:07.843
> 
> 标签：makefile

我从事的项目被组织在一个带有根 Makefile 的文件夹中，并且有很多子项目，每个子项目都是包含自己的 makefile 的子文件夹。

根 Makefile 调用 make 进入每个子目录（`make -C`命令）。目标文件与源文件在同一级别生成。

我想命令 root make 命令将目标文件生成（和检索）重定向到指定的 build_dir。有没有一种简单的方法可以做到这一点？（而不是修改每个子项目中的每个 Makefile）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:12:13.217

这是一种 hack，但您可以结合使用编译器包装器和[`vpath`](http://www.cmcrossroads.com/ask-mr-make/11088-the-basics-vpath-and-vpath).

假设我们有`foo.c`：

```
#include <stdio.h>

int main() {
    printf("hi there\n");
    return 0;
} 
```

和`bar.c`：

```
int bar() {
    return 1;
} 
```

放入`vpath %.o obj`Makefile 将告诉`make`在`obj/`目录中查找目标文件。但是我们需要告诉编译器将目标文件写入`obj/`目录。`gcc`没有这样的选项——但我们不必使用`gcc`，我们可以编写自己的编译器包装器，`gcc`使用修改后的命令行调用。

`cc-wrapper`：

```
#!/bin/bash

OUTDIR=obj

#

function push() {
  # usage: push ARRAYNAME ARG
  # adds ARG to the end of ARRAY
  eval $1[\${#$1[@]}]="\$2"
}

ARGS=()
change_dir=false

mkdir -p "${OUTDIR}"

for (( i = 1; i <= $#; i++)); do
      eval arg="\${$i}"
      if $change_dir; then
        arg="${OUTDIR}/${arg}"
        change_dir=false
      fi
      if [ -e "${OUTDIR}/${arg}" ]; then
          arg="${OUTDIR}/${arg}"
      fi
      if [ "${arg}" = "-o" ]; then
        change_dir=true
      fi
      push ARGS "${arg}"
done

echo gcc "${ARGS[@]}"
exec gcc "${ARGS[@]}" 
```

这是一个丑陋的 shell 脚本，但它所做的只是修改一些参数：

*   如果前一个参数是`-o`，则添加`obj/`到此参数的开头
*   如果当前参数是 中的文件`obj/`，则添加`obj/`到开头

然后调用`gcc`.

那么Makefile是：

```
CC=./cc-wrapper

vpath foo obj
vpath %.o obj

foo: foo.o bar.o

clean::
    rm -rf foo.o bar.o foo obj 
```

现在，您的所有对象都进入`obj/`并`make`正确跟踪依赖关系。

需要进行一些调整才能使其为生产做好准备——您可能希望用 Python 等可理解的语言重写脚本——但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:45:29.410

没有任何解决方案可以阻止您修改每个 Makefile。

`Makefile`s 并`make`没有魔法。`Makefile`包含用于编译每个源文件的命令行。因此，为了能够在指定目录中生成所有目标文件，您必须修改每个`Makefile`以更改此命令行添加选项来告知*放置*目标文件的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:45:04.637

你的意思是类似于后备目标的东西

```
%:
    make -C $(dir $@) $(notdir $@) 
```

这样你就可以

```
make somedir/sometarget 
```

?

# django - 使用 facebook 图片作为默认图片。姜戈

> ID：13510631
> 
> 赞同：0
> 
> 时间：2012-11-22T10:27:35.930
> 
> 标签：django, django-models, django-facebook

我正在使用 django-facebook，我希望个人资料图片成为我的用户在 facebook 注册时的图片。

在我的自定义用户模型（Userprofile）中，我有一个

```
 profilpic = models.ImageField(...) 
```

我的models.py中也有这个功能：

```
 def create_facebook_profile(sender, instance, created, **kwargs):
      if not created:
          return
      UserProfile.objects.create(user=instance)

   post_save.connect(create_facebook_profile, sender=User) 
```

我想知道是否可以将 Facebook 个人资料图片用作我用户的“个人资料”。

我试图这样做：

```
 def create_facebook_profile(sender, instance, created, **kwargs):
      if not created:
          return
      UserProfile.objects.create(user=instance)

      user_data = json.loads(instance.raw_data)          
      user_pic = user_data.get('image')
      user = request.user
      user.userprofile.profilpic = user_pic
      user.save()

   post_save.connect(create_facebook_profile, sender=User) 
```

但它不起作用。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:48:58.543

您正在尝试将 URL 保存到`ImageField`，您需要先在本地从 Facebook 实际读取并保存图像，然后将该新文件分配给`ImageField`（假设 json 实际上具有图像 url）。看看这个类似的问题：

[Django：从图像 url 在 ImageField 中添加图像](https://stackoverflow.com/questions/1393202/django-add-image-in-an-imagefield-from-image-url)

# java - Apache HttpClient：无法检索从 Android 设备中的服务器发送的 cookie

> ID：13510632
> 
> 赞同：0
> 
> 时间：2012-11-22T10:27:37.510
> 
> 标签：java, android, android-emulator, apache-httpclient-4.x

我在 Android 应用程序中使用 Apache HttpClient 时遇到了一个奇怪的问题。

我的应用程序需要登录到网站并获取一些数据，然后注销。

我当前的代码如下所示：

```
public class BlueClient {
    private String hostUrl;
    private DefaultHttpClient client;
    private HttpContext localContext;

    public BlueClient(String hostUrl,DefaultHttpClient httpClient,HttpContext localContext) {

        this.hostUrl = hostUrl;
        this.client = httpClient;
        this.localContext = localContext;

    }

    public boolean doLogin(String userName,String password){
        String url = getHostUrl()+"do_login";//loggin will set a session cookie
        HttpPost post = new HttpPost(url);

        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username",userName));
            nameValuePairs.add(new BasicNameValuePair("password",password));
            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = client.execute(post,localContext);

            //ok now if response is ok then return true

        } catch (Exception e) {

        }
        return false;
    }

    public MyStuff getMyStuff(){
        String url = getHostUrl()+"/getMyStuff/"; //this url requires authentication. the sesion cookie should do that 
        HttpGet get = new HttpGet(url);
        try {
            HttpResponse response = client.execute(get,localContext);
            //ok get my stuff from response and return
        } catch (Exception e) {

        }
        return null;
    }
    public boolean doLogout(){
    String url = getHostUrl()+"do_logout";//it clears the cookie so the session is invalidated
    HttpGet get = new HttpGet(url);
    try {
        HttpResponse response = client.execute(get,localContext);
        //ok the cookie is cleared
      }
    } catch (Exception e) {

    }
    return false;
  }
} 
```

当我调用这些函数时，我确实喜欢这样。**它适用于模拟器但不适用于设备**

```
HttpContext context = new BasicHttpContext();
CookieStore cookieStore = new BasicCookieStore();
context.setAttribute(ClientContext.COOKIE_STORE,cookieStore);
DefaultHttpClient httpClient = new DefaultHttpClient();

BlueClient myClient = new BlueClient("http://myHost.com/",httpClient,context);

myClient.doLogin("user","pass");
 // it should've printed the cookies set by the server but i get nothing here !
D.log(context.getAttribute(ClientContext.COOKIE_STORE));
// as this is another subsequesnt request it shoud carry the cookies back to the server but as the cookies are not set this function gives me nothig :-(
myClient.getMyStuff();
myClient.doLogout(); 
```

任何人都可以对此有所了解。为什么它不能在设备中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:08:58.070

啊终于找到问题了！

My server runs on CodeIgniter. And CodeIgniter set the expiry date of the session cookie (ci_session) as Netscape cookie draft compliant. And the format is **EEE, dd-MMM-yy HH:mm:ss zzz** and Default CookiePoicy used by HttpClient is RFC_2109\. So when the httpClient tries to parse the cookie data it fails on parsing the expiry date. I had to explicitly set the Cookie Policy and date format.

So my final code looks like this:

```
BasicHttpParams params = new BasicHttpParams();
String[] dateFormats = {"EEE, dd-MMM-yy HH:mm:ss zzz"};
params.setParameter(CookieSpecPNames.DATE_PATTERNS,Arrays.asList(dateFormats));

DefaultHttpClient httpClient = new DefaultHttpClient(params);
httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY,CookiePolicy.NETSCAPE);//explicitly set the cookie policy

HttpContext context = new BasicHttpContext();
CookieStore cookieStore = new BasicCookieStore();
context.setAttribute(ClientContext.COOKIE_STORE,cookieStore);

BlueClient myClient = new BlueClient("http://myHost.com/",httpClient,context);

myClient.doLogin("user","pass");
myClient.getMyStuff();//now i get my stuff !
myClient.doLogout(); 
```

Hope it saves someone's time :)

# javascript - jQuery动画高度显示/隐藏卡住

> ID：13510635
> 
> 赞同：1
> 
> 时间：2012-11-22T10:27:54.693
> 
> 标签：javascript, jquery, html, css

我想我知道为什么会发生这种情况，但我不确定解决它的最佳方法。这是一个您可以参考的[jsFiddle 。](http://jsfiddle.net/xetCd/4/)

如果您尝试在 jsFiddle 中打开和关闭子菜单（单击任何链接旁边的 + 图标），然后在它完全关闭之前再次打开它，它将被卡住。现在打开菜单并尝试打开其中一个子菜单，您会看到它的父菜单没有扩展以适应它。

我相信这个问题是因为在这个`hide`过程`jQuery`中对元素应用了一个内联高度，如果你试图在它完成动画之前打开它，它会假定它是元素的最终高度。

我考虑在一开始就存储每个元素的高度并使用它来制作动画，但是这种方法的问题是具有子菜单高度的菜单一直在变化，具体取决于它的子菜单是否打开并且这个值是从来没有一个常数。

无论如何告诉jQuery忽略元素的内联高度并计算它的真实高度应该是多少？

这是使用的 jQuery，对于 HTML 和 CSS，请参阅 jsFiddle，因为它们相当冗长：

```
jQuery(document).ready(function($){
    var legacyMode = $('html').hasClass('oldie');
    var titles = {normal: "Show sub-topics", active: "Hide sub-topics"};

    var sub_sections = $('ul#map li:has(ul.child)');

    sub_sections.each(function() {
        if (!$(this).find('li.active').length && !$(this).hasClass('active')) {
            var toggle = $('<a class="toggle" href="#"></a>').attr('title', titles.normal).insertBefore($(this).children('ul.child'));
            var child = $(this).children('ul.child').hide();
            toggle.data('container', this);
        }
    });

    $('a.toggle').click(function (event) {
        event.preventDefault();
        var target = $(this).siblings('ul.child');
        if($(this).hasClass('active')) {
            toggleDisplay(target, false);
            $(this).removeClass('active').attr('title', titles.normal);
        } else {
            toggleDisplay(target, true);
            $(this).addClass('active').attr('title', titles.active);
        }
        function toggleDisplay(target, on) {
            var mode = (on) ? "show" : "hide";
            if (!legacyMode) {
                target.stop(true, false).animate({height: mode, opacity: mode}, 500);
            } else {
                // Omits opacity to avoid using proprietary filters in legacy browsers
                target.stop(true, false).animate({height: mode}, 500);
            }
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:36:57.060

这是因为您在[stop()](http://api.jquery.com/stop/)方法上传递的属性， before `animate()`。

方法中的第二个属性`stop(true, false)`指定动画是否应该跳转到最后一帧。在您的代码中，因为它是`false`，所以它卡在了`click`下一个在锚标记上注册的阶段。

将其更改为`.stop(true, true)`，它将按预期工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:10:05.233

好的，所以我提出了一个可行的解决方案......它并不像我希望的那样简单，但无论如何这里是工作代码：

```
jQuery(document).ready(function($){
    var legacyMode = $('html').hasClass('oldie');
    var titles = {normal: "Show sub-topics", active: "Hide sub-topics"};

    var sub_sections = $('ul#map li:has(ul.child)');

    sub_sections.each(function() {
        if (!$(this).find('li.active').length && !$(this).hasClass('active')) {
            var child = $(this).children('ul.child');
            if (!legacyMode) {
                child.css({height : '0px', opacity : 0, display: 'none'});
            } else {
                // Omits opacity to avoid using proprietary filters in legacy browsers
                child.css({height : '0px', display: 'none'});
            }
            var toggle = $('<a class="toggle" href="#"></a>').attr('title', titles.normal).insertBefore(child);
            toggle.data('container', this);
        }
    });

    $('a.toggle').click(function (event) {
        event.preventDefault();
        var target = $(this).siblings('ul.child');
        if($(this).hasClass('active')) {
            toggleDisplay(target, false);
            $(this).removeClass('active').attr('title', titles.normal);
        } else {
            toggleDisplay(target, true);
            $(this).addClass('active').attr('title', titles.active);
        }
        function toggleDisplay(target, on) {
            var targetOpacity = 0;
            var targetHeight = 0;
            if (on) { 
                // Get height of element once expanded by creating invisible clone
                var clone = target.clone().attr("id", false).css({visibility:"hidden", display:"block", position:"absolute", height:""}).appendTo(target.parent());
                targetHeight = clone.height();
                targetOpacity = 1;
                console.log(clone.height());
                clone.remove();
                target.css({display : 'block'});
            }
            if (!legacyMode) {
                target.stop(true, false).animate({height: targetHeight + "px" , opacity: targetOpacity}, {
                    duration: 500,
                    complete: function() {
                        if (on) {
                            $(this).css({height : '', opacity : ''});
                        } else {
                            $(this).css({display : 'none'});
                        }
                    }
                });
            } else {
                // Omits opacity to avoid using proprietary filters in legacy browsers
                target.stop(true, false).animate({height: targetHeight + "px"}, {
                    duration: 500,
                    complete: function() {
                        if (on) {
                            $(this).css({height : ''});
                        } else {
                            $(this).css({display : 'none'});
                        }
                    }
                });           
            }
        }
    });
});​ 
```

查看它的实际操作：http: [//jsfiddle.net/xetCd/24/](http://jsfiddle.net/xetCd/24/)（以任意顺序单击切换的任意组合任意次数，它应该保持平滑）。

测试：IE7、IE8（设置`var legacyMode`为`true`最佳效果）、Firefox 15、Chrome 23

它是如何工作的？好吧，我不再使用`show`和`hide`动画目标，因为它们不够灵活。出于这个原因，我必须`ul`在初始化时隐藏 s 有点不同：

```
var child = $(this).children('ul.child');
if (!legacyMode) {
    child.css({height : '0px', opacity : 0, display: 'none'});
} else {
    // Omits opacity to avoid using proprietary filters in legacy browsers
    child.css({height : '0px', display: 'none'});
}
var toggle = $('<a class="toggle" href="#"></a>').attr('title', titles.normal).insertBefore(child);​ 
```

现在进入有趣的部分，当元素可能处于动画的任何阶段并且可以打开或关闭任意数量的子菜单时，如何计算元素的目标高度。我通过创建`visibility : hidden`元素的副本并强制它占据它的常规高度来解决这个问题，我也给了它`position : absolute`，这样它看起来就不会占用文档中的任何空间。我抓住它的高度并删除它：

```
var targetOpacity = 0;
var targetHeight = 0;
if (on) { 
    // Get height of element once expanded by creating invisible clone
    var clone = target.clone().attr("id", false).css({visibility:"hidden", display:"block", position:"absolute", height:""}).appendTo(target.parent());
    targetHeight = clone.height();
    targetOpacity = 1;
    console.log(clone.height());
    clone.remove();
    target.css({display : 'block'});
}​ 
```

然后我为它设置动画并确保重置`display`并删除`height`（因此子菜单可以扩展其父级）属性：

```
if (!legacyMode) {
    target.stop(true, false).animate({height: targetHeight + "px" , opacity: targetOpacity}, {
        duration: 500,
        complete: function() {
            if (on) {
                $(this).css({height : '', opacity : ''});
            } else {
                $(this).css({display : 'none'});
            }
        }
    });
} else {
    // Omits opacity to avoid using proprietary filters in legacy browsers
    target.stop(true, false).animate({height: targetHeight + "px"}, {
        duration: 500,
        complete: function() {
            if (on) {
                $(this).css({height : ''});
            } else {
                $(this).css({display : 'none'});
            }
        }
    });           
}​ 
```

谢谢阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T14:45:05.177

我在使用 jQuery 1.8.3 时遇到了同样的问题，发现升级到 v1.12.2 解决了这个问题。对于遇到此问题的其他任何人，这可能是一个解决方案。如果这对你不起作用，请告诉我。

# ssrs-2008 - 如何避免 SQL Server 2008 R2 的 SSRS 中的 SQL 注入攻击？

> ID：13510639
> 
> 赞同：0
> 
> 时间：2012-11-22T10:27:59.997
> 
> 标签：ssrs-2008, validation

我需要防止用户输入可能导致数据库故障的字符。我正在为报告使用存储过程。为此，我需要验证文本框参数。任何人请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:10:36.277

*   尽可能限制对报告的访问
*   使用受限的 SQL Server 报告帐户，该帐户仅对其所需的表具有受限的只读访问权限
*   在合理的情况下，将用户选择限制为下拉列表
*   如果将报告包装在 c# 等编程语言中，则可以在输入和参数化查询上使用验证器。
*   如果您将 ssrs 参数直接传递给您的存储过程并担心可能发生文本注入，请在使用之前传递 SQL 中意外模式的参数，即可以检查具有*“A3290RE”*预期格式的用户 ID 是否有包含 CONTAINS 和使用 LEN 验证长度以防止用户输入*"A3290RE ' 或类似 '%a%" 的名称*。

# java - 使用流布局垂直而不是水平添加控件

> ID：13510641
> 
> 赞同：57
> 
> 时间：2012-11-22T10:28:02.263
> 
> 标签：java, swing, layout, jpanel

我在水平添加复选框`JPanel`中添加复选框`FlowLayout`。

我想在面板上垂直添加复选框。可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-22T11:23:32.857

![](../Images/da0eb7a83b794d79d5ef95bdd884d0a6.png)

我希望你想要达到的目标是这样的。为此，请使用 Box 布局。

```
package com.kcing.kailas.sample.client;

import javax.swing.BoxLayout;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.WindowConstants;

public class Testing extends JFrame {

    private JPanel jContentPane = null;

    public Testing() {
        super();
        initialize();
    }

    private void initialize() {
        this.setSize(300, 200);
        this.setContentPane(getJContentPane());
        this.setTitle("JFrame");
    }

    private JPanel getJContentPane() {
        if (jContentPane == null) {
            jContentPane = new JPanel();
            jContentPane.setLayout(null);

            JPanel panel = new JPanel();

            panel.setBounds(61, 11, 81, 140);
            panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
            jContentPane.add(panel);

            JCheckBox c1 = new JCheckBox("Check1");
            panel.add(c1);
            c1 = new JCheckBox("Check2");
            panel.add(c1);
            c1 = new JCheckBox("Check3");
            panel.add(c1);
            c1 = new JCheckBox("Check4");
            panel.add(c1);
        }
        return jContentPane;
    }

    public static void main(String[] args) throws Exception {
        Testing frame = new Testing();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    }
} 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-08-06T07:16:35.800

我使用了 a`BoxLayout`并将其第二个参数设置为`BoxLayout.Y_AXIS`，它对我有用：

```
panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS)); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-11-22T10:37:05.817

正如我在评论中所说，我会为此使用盒子布局。

```
JPanel panel = new JPanel();
panel.setLayout(new BoxLayout());

JButton button = new JButton("Button1");
button.setAlignmentX(Component.CENTER_ALIGNMENT);
panel.add(button);

button = new JButton("Button2");
button.setAlignmentX(Component.CENTER_ALIGNMENT);
panel.add(button);

button = new JButton("Button3");
button.setAlignmentX(Component.CENTER_ALIGNMENT);
panel.add(button);

add(panel); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-24T19:28:57.090

```
JPanel testPanel = new JPanel();
testPanel.setLayout(new BoxLayout(testPanel, BoxLayout.Y_AXIS));
/*add variables here and add them to testPanel
        e,g`enter code here`
        testPanel.add(nameLabel);
        testPanel.add(textName);
*/
testPanel.setVisible(true); 
```

# php - 如何对嵌套的 PHP 数组进行排序

> ID：13510645
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:28:25.103
> 
> 标签：php, sorting

谁能告诉我如何按键对数组进行排序？我想按价格对这个数组进行排序。

这是我的输入数组格式

```
Array
(
    [0] => Array
        (
            [house_data] => Array
                (
                    [id] => 532
                    [max_person] => 8
                    [max_bedrooms] => 4
                )

            [image] => uploads/123.jpg
            [price] => 1950
        )

    [1] => Array
        (
            [house_data] => Array
                (
                    [id] => 531
                    [max_person] => 8
                    [max_bedrooms] => 5
                )

            [image] => uploads/1234.jpg
            [price] => 1495
        )
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:35:12.137

试试[usort](http://php.net/manual/en/function.usort.php) (http://php.net/manual/en/function.usort.php)

你应该有类似的东西：

```
function cmp($a, $b)
{
    if ($a['price'] == $b['price']) {
        return 0;
    }
    return ($a['price'] < $b['price']) ? -1 : 1;
}

usort($table, "cmp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:35:52.870

使用该`array_multisort()`函数进行多维数组排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:45:08.680

为了使它成为一维使用 serialize($array) 函数，它是这样的：

$a = array() ; //你的多维数组
$b = array(); //输出数组

foreach ($a as $key=>$value){
  $b[] = serialize($value);
}

回声 $b ;

# .net - 寻找不在另一个字符串模式内的字符串

> ID：13510648
> 
> 赞同：2
> 
> 时间：2012-11-22T10:28:32.430
> 
> 标签：.net, regex, regex-lookarounds

我有`if, else, endif`一个专有语言的经典实现。

鉴于我有下面的字符串，我想找到该`[!--@Else--]`语句，但只找到**不在**块内的那个`[!--@If--]...[!--@EndIf--]`。所以我想要偶数的`if`s 在匹配之前打开和关闭`else`...

* * *

```
Lorem ipsum
[!--@If(1=1)--]
一个是
    [!--@If(2=1)--]
        2 不是 1
    [！ - @别的 - ]
        所以这样做
    [！ - @万一 - ]
[！ - @别的 - ]
1 不是 1
[！ - @万一 - ]
和别的东西

```

* * *

在这个例子中，我想找到第二个`else`- 而不是第一个，因为它在`if/endif`块内。

我现在已经花了无数个小时进行消极和积极的回顾，但无法让它发挥作用！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:36:14.347

您可以使用此正则表达式检索每个 if 块的内容作为匹配组的一部分`VALUE`。最外面的匹配是数组中的最后一个：

```
(?<=\bif)(?>if(?<DEPTH>)|(?<VALUE-DEPTH>)endif|.?)*(?(DEPTH)(?!))(?=endif\b) 
```

请注意，为了清楚起见，我使用`if`and`endif`来表示您的开始和结束语法。

然后，您可以在组中的最后一个值上使用此正则表达式来提取 else 子句：

```
(?<=else)((?!else).)+$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:13:13.207

正如 Abbondanza 所提到的，如果您想使用正则表达式执行此操作，您将需要平衡组。我应该警告你，这不是一个好的解决方案。虽然 .NET 的正则表达式引擎是少数可以处理此类情况的引擎之一，但它仍然不是真正推荐的方法。您最好手动解析语言，这样可以更轻松地计算嵌套级别。

无论如何，只是为了向您展示，为什么正则表达式不适合生产软件中的这项任务，这里有一个正则表达式（使用`RegexOptions.IgnorePatternWhitespace`and `RegexOptions.Singleline`），它仍然做了一些简化的假设（我稍后会谈到）：

```
(?<=\[!--@Else--\])      # Make sure that our match begins right after an else
                         # block.
[^\[]*                   # Match as many non-[ characters as possible (the actual
                         # statement)
(?=                      # This lookahead will assert that the previous statement
                         # was a top-level Else
  (?<Depth>)             # Push one capture onto the stack "Depth" (because, if
                         # this is one of the desired "Else"s we are exactly one
                         # level deep
  (?>                    # Start a subpattern for anything that could follow and
                         # suppress backtracking (because the alternatives are
                         # mutually exclusive)
    (?<Depth>\[!--@If\([^()]*\)--\])
                         # If we encounter an If block, push a new capture onto
                         # the stack (because the nesting level rises)
  |                      # OR
    (?<-Depth>)\[!--@EndIf--\]     
                         # IF we can pop a capture from the stack, consume an 
                         # EndIf. If we cannot, the named group will fail. Hence
                         # we can only consume one EndIf more than we already
                         # encountered Ifs.
  |                      # OR
    (?!\[!--@EndIf--\]). # If this character does not mark the beginning of an
                         # EndIf, consume an arbitrary character.
  )*                     # Repeat as long as possible.
  $                      # Make sure we have reached the end of the string.
  (?(Depth)(?!))         # If there is anything left on the stack, fail, too,
                         # because there are some Ifs that were not closed, so
                         # the syntax was invalid anyway.
                         # You can leave this out if you have convinced yourself
                         # beforehand that the overall nesting syntax is correct.
)                        # End of lookahead. 
```

现在这已经是一头野兽了，如果没有这本评论小说，几乎没有人会理解。

但我提到了简化假设。干得好。

1.  `If`我不允许在条件内使用任何类型的括号。如果你想这样做，你也必须检查**它们的**正确嵌套。它比我在这里做的稍微简单一些，但它仍然需要上下一堆括号。
2.  主要问题可能是实际匹配`[\[]]*`。由于我不允许任何类型的左括号，因此您不能在`Else`块内包含条件语句。现在，如果您想允许这样做，您必须将几乎整个内容再次复制到实际匹配中，以便您知道哪些`If`s 和`EndIf`s 在**里面**`Else`，哪些在后面。

您会看到，要获得涵盖 100% 所有情况的正则表达式解决方案，您需要使该代码完全不可维护。这就是为什么您应该真正考虑手动分析字符串并构建某种语法树的原因。通过这种方式，您可以获得嵌套结构的 OOP 表示，可以轻松遍历`Else`您想要查找的特定 s。

# c# - 将解析的字符串列表添加到字典 wpf c#

> ID：13510651
> 
> 赞同：3
> 
> 时间：2012-11-22T10:28:47.380
> 
> 标签：c#, wpf, list, dictionary

我正在尝试将话语解析为单词并将这些单词保存在列表中。我想用话语数字键将每个列表添加到字典中。我想将每个话语与其他话语的相似度进行比较。我试过了，但没有用。谁能帮帮我吗！

谢谢

```
public string[] utterance = new string[4];

    Dictionary<string, List> wording = new Dictionary<string, List>();

    public void splitit()
    {          
     utterance[0] = "Fish attacked Nemo's parents";
     utterance[1] = "Only one fish egg left after fish attacked Nemo's parents and that was Nemo.";
     utterance[2] = "Nemo grow up and went to school.";
     utterance[3] = "Nemo got bored during the lecture and went to ocean with his friends.";

        for (int x=0; x < 4; x++)
        {

            string[] words = utterance[x].Split(' ');
            List<string> Tokens = new List<string>();

            foreach (string word in words)
            {
                Tokens.Add(word);
            }

            //string parsed = Tokens[1];
            //foreach(string tok in Tokens)
            //{
            //   List<string> listing = new List<string>();
            //    listing.Add (tok);
            //    wording.Add("utterance"+x, listing);
            //    //listBox1.Items.Add("utterance"+x+" : "+tok);
            //}

            for (int w = 0; w < 4; w++)
            { 
            wording.Add("utterance"+x,Tokens);
            }

        }
    }

} 
```

我像这样解决了这个问题，它现在可以工作了：

对于 (int x=0; x < 36; x++) {

```
 string[] words = utterance[x].Split(' ');
            ArrayList Tokens = new ArrayList();

            foreach (string word in words)
            {
                Tokens.Add(word);
            }

            ArrayList listing = new ArrayList();
            foreach (string tok in Tokens)
            {
                listing.Add(tok);
            }
                wording.Add("utterance" + x, listing);

               counting = wording["utterance0"].Count;

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:31:58.290

只需更改几件事：

像这样声明`Disctionary`：`Dictionary<string, List<string>>`最后，像这样为每个句子添加tockens`wording.Add(utterance[w],Tokens);`

```
Dictionary<string, List<string>> wording = new Dictionary<string, List<string>>();

public void splitit()
{          
 utterance[0] = "Fish attacked Nemo's parents";
 utterance[1] = "Only one fish egg left after fish attacked Nemo's parents and that was Nemo.";
 utterance[2] = "Nemo grow up and went to school.";
 utterance[3] = "Nemo got bored during the lecture and went to ocean with his friends.";

    for (int x=0; x < 4; x++)
    {

        string[] words = utterance[x].Split(' ');
        List<string> Tokens = new List<string>();

        foreach (string word in words)
        {
            Tokens.Add(word);
        }

        //string parsed = Tokens[1];
        //foreach(string tok in Tokens)
        //{
        //   List<string> listing = new List<string>();
        //    listing.Add (tok);
        //    wording.Add("utterance"+x, listing);
        //    //listBox1.Items.Add("utterance"+x+" : "+tok);
        //}

        for (int w = 0; w < 4; w++)
        { 
        wording.Add(utterance[w],Tokens);
        }

    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:40:30.653

```
public string[] utterance = new string[4];

Dictionary<string, List<string>> wording = new Dictionary<string, List<string>>();

public void splitit()
{          
 utterance[0] = "Fish attacked Nemo's parents";
 utterance[1] = "Only one fish egg left after fish attacked Nemo's parents and that was Nemo.";
 utterance[2] = "Nemo grow up and went to school.";
 utterance[3] = "Nemo got bored during the lecture and went to ocean with his friends.";

    for (int x=0; x < 4; x++)
    {
        wording.Add("utterance"+x,utterance[x].Split(' ').ToList());
    }
} 
```

# java - 在java中使用printf换行？%n 正确吗？

> ID：13510661
> 
> 赞同：12
> 
> 时间：2012-11-22T10:29:17.500
> 
> 标签：java, string, printf

我是 Java 新手，最后我还是很机智。我的程序已经全部运行，但在打印输出时只需要格式化方面的帮助。

```
if(count == 3)
    System.out.printf ("%-15s %15s %15s %15s %15s %n", n, " is compatible with 
                         ",dates[k],dates[k+1],dates[k+2]); 
```

我的输出是

```
Stacey Francis   is compatible with     Owen Farrell   Jack Clifford  Joshua Watkins 
```

我希望我的输出是（不重复 stacey francis 的名字或“兼容”：

```
Stacey Francis   is compatible with  Owen Farrell

                          Jack Clifford

                          Joshua Watkins 
```

只是想知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T10:38:30.917

Yes, `%n` is a newline in printf. See the documentation of [java.util.Formatter](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html), specifically the conversion table which specifies:

> '`n`' line separator The result is the platform-specific line separator

Your output currently only has a linebreak at the end, not at the points that you seem to want them. You would need to use a format like:

```
"%-15s %15s %15s %n %15s %n %15s %n" 
```

(and maybe some tabs thrown in there for alignment).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-22T10:33:50.517

`%n`应该工作。但问题是，您刚刚在格式字符串的末尾使用了它。您需要将其插入适当的位置：-

```
"%-15s %15s %15s %n %45s %n %45s" 
```

* * *

您还可以`"\n"`在格式说明符之间使用来打印换行符：-

```
System.out.printf ("%-15s %15s %15s \n %45s \n %45s", 
                     n, " is compatible with ", dates[k],dates[k+1],dates[k+2]); 
```

此外，我已将`length`最后两个名称从`15`to增加`45`，以将它们格式化在前面的名称下方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:38:32.433

can you try this.

```
 if(count == 3)
System.out.printf ("%-15s %15s %15s %15s %15s %n", n, " is compatible with 
                     ",dates[k],dates[k+1],dates[k+2]+"\n"); 
```

# wpf - WPF 浏览器 - “Internet Explorer 阻止了一个 activex...”

> ID：13510663
> 
> 赞同：0
> 
> 时间：2012-11-22T10:29:26.960
> 
> 标签：wpf, printing, browser

我在 WPF 应用程序中有一个 WPF WebBrowser 控件，在网页上（在 WPF 浏览器中访问）我有一个 VBScript Print() 子来打印收据而不提升用户。

```
<script language='VBScript'>
Sub Print()
       OLECMDID_PRINT = 6
       OLECMDEXECOPT_DONTPROMPTUSER = 2
       OLECMDEXECOPT_PROMPTUSER = 1
       call WB.ExecWB(OLECMDID_PRINT, OLECMDEXECOPT_DONTPROMPTUSER,1)
End Sub
document.write "<object ID='WB' WIDTH=0 HEIGHT=0 CLASSID='CLSID:8856F961-340A-11D0-A96B-00C04FD705A2'></object>"
</script> 
```

自从添加了这个 VBScript Print() 之后，我现在在我的 WPF 浏览器中收到以下提示：

> Internet Explorer 阻止了一个 activex 控件，因此此页面可能无法正确显示

我怎样才能阻止消息并只运行脚本，或者在最坏的情况下显示提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:19:32.107

我们最终的解决方案是使用 Silverlight 5 打印页面而不提示用户，因为 Silverlight 5 提供了一种打印方式而不提示用户使用`ElevatedPermissions`.

# javascript - 如何在 Windows 8 商店 HTML5/javascript 应用程序中使用 javascript 保存 iframe 的内容？

> ID：13510666
> 
> 赞同：0
> 
> 时间：2012-11-22T10:29:48.543
> 
> 标签：javascript, html, windows-8, microsoft-metro, windows-runtime

我有一个 iframe 控件，其源指向我的代码中定义的页面。现在如何在 Windows 8 商店应用程序中使用 javascript 保存 iframe 的内容？我尝试了下面的代码，但它永远不会进入以下任何条件。

```
 var ifrm = document.createElement("IFRAME");
    ifrm.setAttribute("src", "http://www.w3schools.com/");
     if (ifrm.contentDocument) {
        // Firefox, Opera
        doc = ifrm.contentDocument;
    }
    else if (ifrm.contentWindow) {
        // Internet Explorer
        doc = ifrm.contentWindow.document;
    }

    else if (ifrm.document) {
        // Others?
        doc = ifrm.document;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:55:35.587

这是由于 WWA 中的安全性变化。您需要将目标 URL 添加为清单中的有效目标。

# jquery - preventDefault 在内部不起作用

> ID：13510668
> 
> 赞同：1
> 
> 时间：2012-11-22T10:29:59.167
> 
> 标签：jquery, preventdefault

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:32:25.237

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:32:47.640

尝试“返回错误；” 而不是 preventDefault(); 这将阻止转到 URI。如：

```
$('.button', this).click(function(e){ return false; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:32:52.357

您不需要 div 点击函数中的链接点击函数。

试试这个？

```
$('.UIDropDown').click(function() {
    $(this).addClass('active');
});

$('.button').click(function(e) {
    e.preventDefault()
});​ 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:36:00.747

试试这个。

```
 $('.UIDropDown').click(function () {

    $('.button', this).click(function(e){ return false; });

    $(this).addClass('active');

  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:36:33.243

你应该写

```
 $('.button').click(function(e){ e.preventDefault()}); 
```

在`click`处理程序之外`$('.UIDropDown')`

# php - PHP/Mysql 中的动作侦听器，无论何时将任何记录插入表中？

> ID：13510678
> 
> 赞同：3
> 
> 时间：2012-11-22T10:30:16.407
> 
> 标签：php, mysql

他们是我们知道的任何方法/方式，在所需的表中发生了任何变化吗？

我已经实现了一种解决方案，它每 30 秒检查一次数据库，即如果聊天表中发生任何更改，则刷新我的聊天列表。它降低了很多性能并减慢了网站速度。

它们是我们的动作监听器仅在表中插入任何行时调用的任何方式吗？

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:35:39.470

您可以创建带有通知的表（它总是只包含过去 2 小时左右的未读消息），然后创建[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)[ [syntax](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html) ]，每次更改发生时都会创建新的通知：

```
CREATE TRIGGER create_notification AFTER INSERT ON chats
FOR EACH ROW INSERT INTO notifications (...) VALUES( NEW.col1, NEW.col2)... 
```

然后你会得到更小（更快）的数据库表。

有一些替代方案，例如编写套接字服务器，但我认为它的资源效率不如池化数据库，而且我在运行 php 脚本很长一段时间内都有不好的体验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:47:51.957

那么在您的场景中，您需要一个监听器，它跟踪新的聊天行插入数据库的那一刻。

如果您在将聊天消息插入数据库之前向用户发送聊天消息会更容易。

您可以使用套接字。您可以使用 nodejs+socket.io 来执行此操作。这里有一点关于

[socket.io 和 node.js 向特定客户端发送消息](https://stackoverflow.com/questions/10629497/socket-io-and-node-js-to-send-message-to-particular-client)

你也可以看看这篇文章

[https://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0](https://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0)

# c# - 如何在 mvc3 Web 应用程序中设置特定路由

> ID：13510680
> 
> 赞同：3
> 
> 时间：2012-11-22T10:30:21.013
> 
> 标签：c#, asp.net-mvc-3, routing

我的路由有问题。我的网站上有许多从数据库动态生成的页面。

我想要完成的第一件事是像这样路由到这些页面：

“如何修理汽车”

www.EXAMPLE.com/How-to-repair-a-car

现在它是这样工作的：www.EXAMPLE.com/Home/Index/How-to-repair-a-car

其次，我的默认页面必须是这样的：www.EXAMPLE.com

在起始页上会有分页新闻，所以如果有人点击“page 2”按钮，地址应该是：www.EXAMPLE.com/page =2

结论：

1.  默认页面 -> www.EXAMPLE.com（页面 = 0）
2.  带有特定新闻页面的默认页面 -> www.EXAMPLE.com/page=12
3.  文章页面-> www.EXAMPLE.com/How-to-repair-car（不带参数“页面”）路由应指向文章或错误404

PS：对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:49:57.757

尝试在路由配置中为文章创建路由，如下所示：

路由配置：

```
public class RouteConfig
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(null, "{article}",
                            new {controller = "Home", action = "Article" });
            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );
        }
    } 
```

家庭控制器：

```
public class HomeController : Controller
    {
        public ActionResult Index(int? page)
        {
            var definedPage = page ?? 0;
            ViewBag.page = "your page is " + definedPage;
            return View();
        }

        public ActionResult Article(string article)
        {
            ViewBag.article = article;
            return View();
        }
    } 
```

**/?page=10 - 有效**

**/如何修理汽车 - 工作**

这种方法非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:41:20.417

这是 www.example.com/How-to-repair-car 的基本路由示例

```
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace Tipser.Web
{
    public class MyMvcApplication : HttpApplication
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.MapRoute(
                "ArticleRoute",
                "{articleName}",
                new { Controller = "Home", Action = "Index", articleName = UrlParameter.Optional },
                new { userFriendlyURL = new ArticleConstraint() }
                );
        }

        public class ArticleConstraint : IRouteConstraint
        {
            public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
            {
                var articleName = values["articleName"] as string;
                //determine if there is a valid article
                if (there_is_there_any_article_matching(articleName))
                    return true;
                return false;
            }
        }
    }
} 
```

# blackberry - 黑莓操作系统框架做http连接重用吗？

> ID：13510682
> 
> 赞同：2
> 
> 时间：2012-11-22T10:30:24.440
> 
> 标签：blackberry

黑莓框架是否将连接重用用于http连接？我用`connectionFactory.getConnection("api.abc.com")`. 我注意到我的应用程序的第一个呼叫（简单的休息呼叫，获取未读消息的数量）大约需要 4 秒，但所有后续呼叫都需要不到一秒的时间来完成。我注意到在另一个呼叫之后进行相同的呼叫需要不到一秒钟，所以我认为黑莓使用 http 连接重用。有人对这种行为有解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:19:58.253

You can test this on the server, by looking at the network activity that actually makes it to the server. My own testing indicates BlackBerry devices do not re-use connections.

# codeigniter - 多语言codeigniter php，mysql最佳方法

> ID：13510684
> 
> 赞同：0
> 
> 时间：2012-11-22T10:30:28.777
> 
> 标签：codeigniter, multilingual

嗨，任何人都可以向我展示如何编写多语言网站的方法，该网站不仅可以更改菜单，还可以更改文章的标题和内容。

基本上，我想每次写一篇文章，我都会把它分别写成2种语言，然后插入到mysql中。当我在前端更改语言时，一切都会更改为另一种语言并保持该语言，直到我将其更改回来

所以，任何人都向我展示了一个最好的方法。请我急需

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:05:29.383

内容如：菜单、按钮、消息不必进入数据库。使用 CI 和语言类来处理这些。

如果您有动态内容，例如博客文章或新闻和文章，请使用不同语言的数据库。

控制器将是这样的：

```
 class Language extends CI_Controller{

    function Language(){
        parent::__construct();
    }

    function change($language = null){  
        $language = urldecode($language);

        switch($language){

            case "English":
                $this->session->set_userdata('lang_id', 2);
                $this->session->set_userdata('lang_name', 'english');
                redirect($_SERVER['HTTP_REFERER'], 'refresh');

            break;

            case "Deutsch":
                $this->session->set_userdata('lang_id', 3);
                $this->session->set_userdata('lang_name', 'deutsch');
                redirect($_SERVER['HTTP_REFERER'], 'refresh');

            break;

            default:
                $this->session->set_userdata('lang_id', 3);
                $this->session->set_userdata('lang_name', 'deutsch');
                redirect($_SERVER['HTTP_REFERER'], 'refresh');

            break;

        }

    }
} 
```

并转到页面/类的索引：

```
//LOAD LANGUAGE SETTINGS
        $lang = $this->session->userdata('lang_name');

        if($lang != ''){
            //load default language folder
            $this->lang->load('home');
            $this->lang->load('extra_menu');
            $this->lang->load('base_menu');
            $this->lang->load('breadcrumbs');

        }else{
            //load language file and folder
            $this->lang->load('home', $this->session->userdata('lang_name'));
            $this->lang->load('extra_menu', $this->session->userdata('lang_name'));
            $this->lang->load('base_menu', $this->session->userdata('lang_name'));
            $this->lang->load('breadcrumbs', $this->session->userdata('lang_name'));                
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:15:33.580

H，

使用 codeigniter 语言类[http://ellislab.com/codeigniter/user_guide/libraries/language.html](http://ellislab.com/codeigniter/user_guide/libraries/language.html)

这里有一些较旧的帖子。看看 [使 codeigniter 网站多语言的最佳方法。从 lang 数组调用取决于 lang 会话？](https://stackoverflow.com/questions/1328420/the-best-way-to-make-codeigniter-website-multi-language-calling-from-lang-array)

问候

iijb

# c# - 使用 asp.net 集成所有社交网站

> ID：13510688
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:30:41.087
> 
> 标签：c#, asp.net

我正在使用 ASP.Net 开发一个网站，我想集成社交网络，让用户可以将页面共享到他们的 Facebook、Twitter、Google plus、链接和其他帐户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:43:25.673

这些站点将使用 OAuth，您需要将其集成到您的站点中。

例如，您可以使用 Facebook 上的开发人员部分创建一个 Facebook 应用程序，然后使用 ASP.Net 应用程序中的[c# Facebook API](http://facebooksdk.codeplex.com/)对应用程序进行身份验证并将内容发布到用户时间轴。我最近实现了类似的东西，这很简单。

对于您提到的所有社交媒体，您不会拥有“通用凭据集”，因此您需要为每个不同的媒体管理和执行 OAuth，例如，除了发布到 Facebook、创建推文对于用户也是如此。

这当然是可能的，有一些社交营销应用程序可以做这样的事情，您只需要管理对 OAuth 合作伙伴的访问即可。

请记住，*切勿*存储用户在您的站点中输入的凭据。它们不受您的站点管理，因此您永远不应尝试存储它们或对它们做任何事情，始终委托给第 3 方站点并接收您的访问令牌。这就是您的应用程序应该感兴趣的所有内容

阅读 OAuth 的工作原理。此外，请访问每个站点的开发人员文档，了解其 OAuth 的具体实现是如何工作的。有用于访问网站的 c# 客户端应用程序（c# facebook api、c# twitter api 等）

# excel - Excel中用于以下场景的条件格式

> ID：13510690
> 
> 赞同：1
> 
> 时间：2012-11-22T10:30:44.960
> 
> 标签：excel, vba, ms-office

我想突出显示 Excel 工作表单元格（“A”列），当它的内容中不包含“验证”、“验证”或“评估”等文本时，如果“B”列相应单元格中的值包含值'Y'。

如果列“B”中的相应单元格包含值“N”，则“A”列不能包含“验证”、“验证”和“评估”等词。因此，如果存在差异，则只需要突出显示这些差异即可。

> 列“A”：按 Enter 并验证此和此...
> 
> “B”列：是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:46:03.140

这是一个简单的例子。但是，如果 B 列不能为空，则可以缩短第二个公式。看看这个合不合适...

![例子](../Images/09bc81fc278c14007ce08f9135c6744a.png)

**编辑**：

这是`VBA`要求的示例。您需要将代码保存到当前工作表中（例如： Sheet1 ）...

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim str As String
    Dim lCol As Long
    Dim oCell As Object
    Dim oCellFormat As Object
    lCol = Target.Column

    If lCol = 1 Or lCol = 2 Then
       Set oCell = Cells(Target.Row, 1)
    Else
        GoTo mExit
    End If
    str = UCase(oCell.Value)
    Set oCellFormat = Cells(oCell.Row, 1)
    If (str = "VERIFY" Or str = "VALIDATE" Or str = "EVALUATE") Then
        If UCase(Cells(oCell.Row, 2).Value) = "N" Then
            oCellFormat.Interior.ColorIndex = 3 'red
        ElseIf UCase(Cells(oCell.Row, 2).Value) = "Y" Then
            oCellFormat.Interior.ColorIndex = 4 'green
        Else
            oCellFormat.Interior.ColorIndex = 2 'white
        End If
    Else
        oCellFormat.Interior.ColorIndex = 2 'white
    End If
    GoTo mExit
    Exit Sub
mExit:
    Set oCell = Nothing 'free resources
    Set oCellFormat = Nothing
End Sub 
```

# iis - 如何使 IIS7 使用状态码 404 提供自定义内容

> ID：13510691
> 
> 赞同：1
> 
> 时间：2012-11-22T10:30:44.317
> 
> 标签：iis, iis-7, asp-classic, http-status-code-404, custom-errors

我有一个经典的 ASP 页面，它将响应标头设置为`404 Not Found`加上一些*您可能对链接感兴趣的*链接：

```
Response.Clear
Response.Status = "404 Not Found"
Response.Write "<h1>Oops</h1>"
Response.Write "<p>The page you requested was not found</p>"
Response.Write "<p>But we have some suggestions:</p>" 
```

该代码在 IIS6 上运行良好，即它发送了正确的响应代码和内容。但是，在 IIS7 上，我得到的只是：

> 您要查找的资源已被删除、名称已更改或暂时不可用。

如何在不更改配置的情况下让 IIS 显示*我的内容（如果可能）。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:34:00.417

首先，确保站点的应用程序池以“经典模式”运行。要进行设置，请在 IIS 中选择站点的应用程序池，单击“基本设置...”并将“托管管道模式”设置为“经典”。

接下来，在 IIS 中选择站点，然后单击“错误页面”图标。单击“编辑功能设置...”并确保“错误响应”设置为“自定义错误页面”。

然后您应该会发现您可以设置 404 错误来执行您的 ASP 页面。

# asp.net-mvc - 一个模型只更新每个视图中的一些字段

> ID：13510695
> 
> 赞同：2
> 
> 时间：2012-11-22T10:31:15.123
> 
> 标签：asp.net-mvc

我想知道解决这个问题的正确方法是什么。我目前有一个模型 - （如下所示），其中包含我记录所需的所有字段。

我的问题是，在创建记录时，我只需要传递 CustomerID、EmployeeID、Date 和 ArrivalTime 的数据。

模型中的其余字段将在稍后更新记录时填充。

由于我的某些字段是必需的，如果我不发布这些字段的数据，这显然会导致验证错误。

我想知道实现这一目标的最佳做法是什么？

我应该将模型分成两部分吗？还是可以进行部分验证？

```
public class CustomerSupportRecord
{
    public int CustomerSupportRecordID { get; set; }

    [Required]
    public int CustomerID { get; set; }

    [Required]
    public string EmployeeID { get; set; }

    [Required(ErrorMessage = "Please enter a Date")]
    [DataType(DataType.Date)]
    [Display(Name = "Date")]
    public DateTime Date { get; set; }

    [Required(ErrorMessage = "Please select an Arrival Time")]
    [DataType(DataType.Time)]
    [Display(Name = "Arrival")]
    public DateTime ArrivalTime { get; set; }

    [Required(ErrorMessage = "Please select a Departure Time")]
    [DataType(DataType.Time)]
    [Display(Name = "Departure")]
    public DateTime DepartureTime { get; set; }

    [Required(ErrorMessage = "Please select a Type")]
    [Display(Name = "Type")]
    public int CustomerSupportTypeID { get; set; }

    [Display(Name = "Setting")]
    public string ReflectionSetting { get; set; }

    [Display(Name = "Advisor")]
    public string ReflectionAdvisor { get; set; }

    [Display(Name = "Notes")]
    public string Notes { get; set; }

    [Display(Name = "Comments")]
    public string Comments { get; set; }

    // Navigation Properties
    public virtual Customer Customer { get; set; }
    public virtual CustomerSupportType CustomerSupportType { get; set; }
    public virtual Employee Employee { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:39:07.313

正确的方法是为不同的视图使用不同的视图模型类，并且只包含您在该视图上需要的属性。

因此，您的第一个视图的视图模型如下所示：

```
public class CustomerSupportRecordForCreation
{
    public int CustomerSupportRecordID { get; set; }

    [Required]
    public int CustomerID { get; set; }

    [Required]
    public string EmployeeID { get; set; }

    [Required(ErrorMessage = "Please enter a Date")]
    [DataType(DataType.Date)]
    [Display(Name = "Date")]
    public DateTime Date { get; set; }

    [Required(ErrorMessage = "Please select an Arrival Time")]
    [DataType(DataType.Time)]
    [Display(Name = "Arrival")]
    public DateTime ArrivalTime { get; set; }
} 
```

您必须在该视图模型类和您的域/dal 类之间进行映射。这就是[AutoMapper](https://github.com/AutoMapper/AutoMapper)等工具派上用场的地方。

**编辑**自动映射器：

使用 Automapper 非常简单。

1.  您必须配置您的映射（即 in `Application_Start`）。当您要映射的类的属性名称相同时，它很简单：

    ```
    Mapper.CreateMap<CustomerSupportRecord, 
                         CustomerSupportRecordForCreation>(); 
    ```

2.  然后你可以在你的应用程序中使用映射。当你有一个`CustomerSupportRecord`并且想要返回`CustomerSupportRecordForCreation`你的视图时，写：

    ```
    CustomerSupportRecord record = getRecordFromDb...
    return View(Mapper.Map<CustomerSupportRecordForCreation>(record)); 
    ```

关于 Codeproject 有一篇很好的教程文章：http: [//www.codeproject.com/Articles/61629/AutoMapper](http://www.codeproject.com/Articles/61629/AutoMapper)或者只是[谷歌](https://www.google.de/search?q=automapper%20tutorial)

# python - Python：如何在 doctest 中定义一个类？

> ID：13510698
> 
> 赞同：11
> 
> 时间：2012-11-22T10:31:33.267
> 
> 标签：python, unit-testing, class, doctest

我想使用 doctest 注释块来演示特定基类的用法，但是这不能用 doctest 完成，或者我做错了什么。这是我的简单演示代码。

```
class MyClass(object):
    '''
    >>> m = MyClass()
    >>> print m.x
    1
    >>> class A(MyClass):
    >>>  def __init__(self):
    >>>    super(A,self).__init__()
    >>>
    >>> a = A()
    >>> print a.x
    1
    '''

    def __init__(self):
        self.x = 1

if __name__ == "__main__":
    import doctest
    doctest.testmod() 
```

代码不运行。这是发布的第一个错误：

```
Failed example:
class A(MyClass):
Exception raised:
Traceback (most recent call last):
  File "C:\Python27\lib\doctest.py", line 1254, in __run
    compileflags, 1) in test.globs
  File "<doctest __main__.MyClass[2]>", line 1
    class A(MyClass):
                    ^
SyntaxError: unexpected EOF while parsing 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T10:35:55.303

在口译员中试一试；它用于`...`显示连续线。`>>>`仅适用于*新*的语句或表达式，而 a`class`不完整，直到您有一个空的`...`续行：

```
 >>> class A(MyClass):
    ...     def __init__(self):
    ...         super(A, self).__init__()
    ... 
```

# jquery - Jquery 对话框，更改文本字段大小和字体

> ID：13510701
> 
> 赞同：1
> 
> 时间：2012-11-22T10:31:47.797
> 
> 标签：jquery, css, dialog

我正在用 HTML 5 编写 Canvas 游戏，我想在画布上浮动一个 div，以便用户可以将他们的名字输入到一个框中，然后游戏将其捕获。

我已经完成了这项工作，但我不知道如何实际更改用户输入的文本框的大小、字体和长度。

我的JS如下：

```
$("#menuBox").dialog({
    resizable : false,
    position  : [30,30],
    minHeight : 100,
    minWidth  : 10,
    height    : 200,
    width     : 500
}); 
```

在身体里

```
<body>
  <div id="wrapper">
  <div id="container">
  <div id="menuBox" style="display:none">
    <form action="POST"> <input type="text" /></form>
  </div>

  </div>
</body> 
```

和 CSS

```
#wrapper{
  position: relative;
  left:10px;
  top:10px;
}

#container{
  position: absolute;
  left: 0px;
  top: 0px;
  background-image: url("Main.jpg");
  height: 540px;
  width: 900px;
}

div.ui-dialog div.ui-widget-header { 
  border: none; 
  display: none;
}

.ui-dialog .ui-dialog-content  { 
   border: none; 
   padding: 0;
}

.ui-dialog {
   width: 500px;
   padding: 0;
} 
```

所以这个想法是用户唯一看到的是长文本框，它只是出现在我格式化的画布环境中。

我是 JQuery 的新手（这就是为什么第一位仍然是非 JQuery 的原因），所以我什至不确定我想要什么是可能的。如果我想让字体大小为 20，Tomoha 和输入框长 300 像素，我看不到我会在哪里输入这个，或者即使我能做到这一点，因为使用 .dialog 中的参数似乎没有改变该输入字段。有什么建议吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:01:40.520

如果问题只是更新对话框内容的样式，您可以提及特定的父 ID 或类，如下所示。

如果这没有解决，如果你能告诉我jQuery生成的对话框html代码，最好提供快速解决方案。

```
#menuBox .ui-dialog-content {
  font-size:20px;
  font-family:Tomoha;   
}
#menuBox .ui-dialog-content input {
    max-width: 320px;
    width: 300px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:37:35.193

你有没有尝试过类似的东西：

```
$(some_element).css({'width':'','font-size':''}); 
```

?

或通过 css：您需要使用`!important`to ovveride 规则，即：

```
.dialog{
width:300px !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:40:41.303

通用答案：使用浏览器的 DOM 检查器功能来可视化对话框的结构，然后使用这些知识构建所需的 CSS 选择器。我建议查看[w3schools CSS 选择器参考](http://www.w3schools.com/cssref/css_selectors.asp "w3schools CSS 选择器参考")。

# ios - iOS多线程核心数据应用程序不合并更改

> ID：13510702
> 
> 赞同：0
> 
> 时间：2012-11-22T10:31:49.500
> 
> 标签：ios, core-data, nsmanagedobject, nsmanagedobjectcontext, nsoperation

我有一个 iOS 应用程序，它从两个线程访问核心数据 sql 数据库。线程 A（主 UI 线程）更新核心数据记录，然后线程 B 尝试从线程 A 刚刚更新的实体集合中读取。麻烦的是，线程 B 没有“看到”线程 A 持续的变化。

线程 B 是通过将 NSOperation 子类对象添加到 NSOperationQueue 来创建的。NSOperation 子类的主要方法如下所示：

```
-(void) main {

    // NEED to create the MOC here and pass to the methods.
    NSManagedObjectContext* moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSConfinementConcurrencyType];

    [moc setUndoManager:nil];

    [moc setMergePolicy:NSMergeByPropertyStoreTrumpMergePolicy]; // Had been working for months 

    [moc setPersistentStoreCoordinator:getApp().persistentStoreCoordinator];

    [self doTheWorkWithMOC:moc]; // Actually performs updates, using moc

    moc = nil;

} 
```

稍后，线程 B 将其更改保存如下：

```
@try {
                // register for the moc save notification - this is so that other MOCs can be told to merge the changes
                [[NSNotificationCenter defaultCenter] 
                 addObserver:getApp() 
                 selector:@selector(handleDidSaveNotification:)
                 name:NSManagedObjectContextDidSaveNotification 
                 object:moc];

                NSError* error = nil;
                if ([moc save:&error] == YES)
                {
                    NSLog(@"%s SAVED FINE",__FUNCTION__);

                }else {
                    NSLog(@"%s NOT saved, error=%@ %@",__FUNCTION__,error,[error localizedDescription]);

                }

                // unregister from notification
                [[NSNotificationCenter defaultCenter] 
                 removeObserver:getApp() 
                 name:NSManagedObjectContextDidSaveNotification 
                 object:moc];

            }
            @catch (NSException * e) {
                NSLog(@"%s Exception: %@",__FUNCTION__, e);

            } 
```

主 UI appdelegate 包含以下代码来处理保存通知：

```
- (void)handleDidSaveNotification:(NSNotification*) note 
{

    @try {

        // Notifications run on the same thread as the notification caller.
        // However, we need to ensure that any db merges run on the main ui thread.
        // Hence:
        [self performSelectorOnMainThread:@selector(mergeContexts:) withObject:note waitUntilDone:NO]; 

    }
    @catch (NSException * e) {
        NSLog(@"appDelegate handleDidSaveNotification Exception: %@", e);
    }

}
-(void)mergeContexts:(NSNotification*) note 
{
    if ([__managedObjectContext tryLock]==YES)
    {
        [__managedObjectContext mergeChangesFromContextDidSaveNotification:note];

        [__managedObjectContext unlock];
    }

} 
```

大多数时候一切都很好。

但是，我有一台 iPad，当线程 A 读取数据库时，没有检测到线程 B 写入的更改。

任何人都可以在我的代码中看到任何会导致这种情况的东西吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:32:41.650

熟练工，

首先，您应该转而使用 iOS v5 和 Lion 中引入的基于队列的 MOC。这将使您的两个 MOC 更容易保持同步。您将不再需要使用锁定系统。

其次，一旦您移动到排队的 MOC，那么让它们保持同步以响应“已保存”通知是非常简单的。

第三，为什么你总是为保存通知添加和删除观察者？你不觉得这很可疑吗？显然，您错过了 MOC 之间的一些更新。

安德鲁

# eclipse - Proguard - 为 J2ME/BlackBerry 应用程序保留行号

> ID：13510707
> 
> 赞同：1
> 
> 时间：2012-11-22T10:32:09.610
> 
> 标签：eclipse, blackberry, ant, java-me, proguard

我在网上搜索过，这个问题让我发疯。我正在使用 ANT 和 Proguard 构建移动应用程序（J2ME、BB）。

在我的**javac 任务**中，我添加了 debuglevel 参数，如下所示：

```
<javac srcdir="${src.dir}" destdir="${tmp.dir}${application.name}" failonerror="true" source="1.4" target="1.4" debug="true" debuglevel="lines,vars,source"> 
```

在我的**proguard 任务**中，我有：

```
<proguard defaultpackage="" usemixedcaseclassnames="false" note="false" microedition="true" verbose="true" printmapping="true" optimizationpasses="10" renamesourcefileattribute="SourceFile">
...
...
<keepattribute name="LineNumberTable" />
<keepattribute name="SourceFile" /> 
</proguard> 
```

但是，当我查看 Eclipse 中的输出控制台时（在构建我的应用程序并在模拟器上启动它之后），我看不到行号，就像这样：

```
at com.mycomp.myapp.Main.a(+47)
at gd.a(+24)
at fq.a(+368)
at fq.b(+188)
at com.mycomp.myapp.Main.run(+29) 
```

我正在使用 Proguard 4.8。

非常感谢你的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:19:03.710

您在 Proguard 中使用了正确的设置：

```
<keepattribute name="LineNumberTable" /> 
```

你看到控制台上的行号了吗？这对我有用。

# opencv - 使用 cvMinMaxLoc () 识别白色区域

> ID：13510710
> 
> 赞同：0
> 
> 时间：2012-11-22T10:32:16.067
> 
> 标签：opencv

我的应用程序将处理从相机获取的 12 位二进制图像。下面以 jpeg 显示相同的图像。

任务是识别每个白色发光区域。
这 4 个区域作为一组随机出现在每个图像中。可以假设 4 个白色区域总是一起从一个图像移动到另一个图像。与黑色或接近黑色的背景相比，每个点都将具有非常高的强度。每个点实际上不是一个像素，而是一个 14 x 14 的 ROI。图像的高度也是200像素。
每个白色区域之间的距离始终是固定的。

如果我申请 CVMinMaxLoc(); 我只会得到一个最亮的位置。

如何识别每个区域？

![在此处输入图像描述](../Images/5e3c08c22e4060c2f0b49a929235ea85.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:04:15.380

您可以执行以下操作：

1.  用于`threshold()`获得每个白色区域至少有一个白点的黑白图像。

2.  在阈值图像上：应用`minMaxLoc()`以获取第一个白色区域，然后通过`floodFill()`将其涂黑来消除该白色区域。

3.  重复步骤 2，直到获得所有白色区域。（您将找到每个白色连接的组件一次，因为您将每个组件都涂成黑色。）

如果您的白色区域在之后没有连接`threshold()`，您可以使用`dilate()`使它们连接。

如果要检测白色区域的中心，也可以`erode()`在步骤 1 之后使用。

# c++ - 为什么 Eclipse 在我的源代码中标记伪错误？

> ID：13510715
> 
> 赞同：4
> 
> 时间：2012-11-22T10:32:35.460
> 
> 标签：c++, eclipse, editor, eclipse-cdt

我在本地分叉（通过`hg clone`）一个 C/C++ (Eclipse CDT) 项目并将其导入到我的 Eclipse 工作区中。我的分叉项目的编辑器窗口现在如下所示：

![在此处输入图像描述](../Images/0267e149583d3de638c0151419378afc.png)

显然，这些不是真正的错误，因为代码构建正确。此外，这些错误未在派生该错误的原始项目中标记。

为什么 Eclipse 认为此源中有错误？

编辑：将鼠标悬停在“错误”上时的 Eclipse 错误消息是，例如，`Type int64_t could not be resolved`和`symbol 'cout' could not be resolved`.

编辑：我注意到 Eclipse 通常会显示`includes`项目中命名的“文件夹”。这个项目缺少它。我怎样才能找回它？

![在此处输入图像描述](../Images/0862e2781eaf8f303b961979328d248b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:05:39.240

Eclipse 必须知道找到包含文件的路径。这可以使用通用 Eclipse 设置或逐个项目进行设置。

由于某种原因，您当前的项目似乎没有设置默认路径。

您可以做什么：打开项目设置并转到 C/C++ 常规 -> 路径和符号（至少在我的 Eclipse 版本中是这样调用的）并修复包含目录。

也许为该特定项目加载默认配置就足够了。也许您必须自己设置包含路径。在 Unix/OS X 上，这通常应该是`usr/include`. 在 Windows 上我不知道，但这应该很容易找到。

之后，您可能需要重建 eclipse 索引（右键单击您的项目，然后索引 -> 重建）。

如果这没有帮助，请分享您项目的路径和符号对话框的屏幕截图。

另请参阅有关此主题的[eclipse 文档。](http://help.eclipse.org/juno/topic/org.eclipse.ptp.pldt.doc.user/html/includes.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-05T10:42:42.873

我必须包括

*   `CDT Cross GCC Built-in Compiler Settings`
*   `CDT GCC Built in Compiler Settings [ Shared ]`

在项目的属性 -> C/C++ 常规 -> 预处理器包括路径、宏等 -> 提供程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T08:09:59.997

在 Eclipse 中将此定义添加到 Project **Properties->C/C++ General->Paths and Symbols**

```
__STDC_FORMAT_MACROS 
```

重建你的日食索引。它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-25T19:35:11.747

这适用于 Mac OS X Yosemite 10.10.5，Eclipse 版本 Mars.1 Release (4.5.1)：

由于包含通常是由 Eclipse 通过工具链发现的，**请检查您是否有一个实际的工具链集**（当我在导入项目后遇到这个问题时，工具链被设置为“无工具链”。）：

项目 -> 属性 -> C/C++ 构建 -> 工具链编辑器 -> 当前工具链

如果下拉列表中没有出现工具链，请尝试取消选中“仅显示兼容的工具链”并选择一个工具链（我选择了 Cross GCC）。当我保存更改并重新打开项目属性以再次查看此字段时，“仅显示兼容的工具链”被自动重新检查。

然后重新索引项目：

项目 -> C/C++ 索引 -> 重建

这为我解决了问题（“伪错误”消失了，并且包含“文件夹”出现在文件系统视图中我的项目下）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-24T18:59:07.460

您`#include`的代码中是否包含正确的文件？对于 std::cout 它将是：

```
#include <iostream> 
```

和`int64_t`：

```
#include stdint.h 
```

# html - 朱尼特 标记为 Selenium 测试生成无效的 HTML 文件

> ID：13510716
> 
> 赞同：0
> 
> 时间：2012-11-22T10:32:35.620
> 
> 标签：html, ant, selenium, junit, report

我正在使用 ANT 生成 Selenium HTML 报告，并使用 Selenium HTML Report 插件在 Jenkins 中发布它们。由于 HTML 文件中未关闭的元素，报告插件给出了 IO 异常。

我查看了生成的 HTML 文件，这就是我发现的：

```
<html xmlns:lxslt="http://xml.apache.org/xslt" xmlns:stringutils="xalan://org.apache.tools.ant.util.StringUtils">
<head>
<META http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Unit Test Results: All Tests</title>
<link rel="stylesheet" type="text/css" title="Style" href="stylesheet.css">
</head>
...
</html> 
```

看元素结构，Jenkins插件给了标签例外？这里发生了什么？就像输出的 HTML 文件无效一样。

我正在使用标签生成这样的文件：

```
<junitreport todir="${dir}">
        <fileset dir="${dir}">
            <include name="*.xml" />
        </fileset>
        <report format="frames" todir="${dir}/html" />
</junitreport> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:48:26.143

我也有同样的问题，但使用 Junit 和 Jenkins 报告发布功能。

快速搜索后，我找到了一个插件“HTML Publisher Plugin”。在 jenkins 中安装此插件后，我不得不修改我工作的“构建后操作”部分，问题就解决了！

希望对你有帮助！

# row - GNUPlot 在直方图中选择行

> ID：13510719
> 
> 赞同：1
> 
> 时间：2012-11-22T10:32:40.653
> 
> 标签：row, gnuplot, histogram

我有一个如下所示的数据文件。现在，我想使用第 9 列、第 10 列作为误差线制作直方图。效果很好。但是有一个选项只能绘制特定的行吗？

我在另一个使用三元运算符的线程中尝试了解决方案：

`plot 'Härte StS-123 bis 151.txt' using ( ( $0 == 4 || $0 == 6 ) ? $9 : 1/0 ):($9+$10):($9-$10):xticlabels(2)`

这确实绘制了第 4 行和第 6 行，但在数据集之间留下了空白区域。

有没有其他方法可以实现这一目标？

数据文件：

* * *

StS-123a“SBR/THF”50.10 49.60 49.20 50.70 50.00 49.50 49.85 0.49 0.00974176

StS-123b “SBR / THF” 51.00 50.40 50.40 52.00 52.80 50.60 51.20 0.90 0.017614257

StS-124a“SBR+2phrGraphit”49.60 49.40 49.30 48.90 49.40 49.10 49.28 0.23 0.004599753

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:07:19.567

您可能想要的是`index`plot 命令的选项：

```
plot 'datafile' index 4 u 9:($9-$10):($9+$10):xticlabels(2), \
     '' index 6 u 9:($9-$10):($9+$10):xticlabels(2) 
```

这应该只绘制来自第 4 和第 6 个数据集（行）的数据，尽管您可以在 plot 命令中调整两种不同的样式。

您想连接两个数据集中的值吗？这可能更棘手。

如果您只想绘制具有数据的第 4 行和第 6 行的数据，可以在 gnuplot 中使用外部命令，例如：

```
plot "<sed '/^$/d' data.dat | sed -n '4p; 6p'" u 9:($9-$10):($9+$10):xticlabels(2) 
```

（在这种情况下，这可能不是使用 sed 的最紧凑的方式，但它会删除空行，然后返回第 4 行和第 6 行。）

# mysql - 使用 ON DUPLICATE KEY 更新的 Mysql 查询，删除不在值查询中的项目

> ID：13510724
> 
> 赞同：0
> 
> 时间：2012-11-22T10:32:50.243
> 
> 标签：mysql

我有这张桌子：

```
ID  adv_nr  day item1 item2 item3
1   2       2   10    23    34
2   2       3   11    23    34
3   2       4   10    24    34
4   2       5   10    35    34
5   3       10  56    34    12 
```

密钥设置在 ID (Primairy) 和 adv_nr 上并结合 day (UNIQUE)。

如果第 1 项或第 2 项发生变化，我会进行一次重复密钥更新，但如果第 4 天被删除，如何处理？我想删除该行或将其设置为 NULL。查询中有没有办法删除（或更新为 NULL）具有 adv_nr = 2 且不存在于查询值中的值？所以查询将如下所示：

```
INSERT INTO table  (`adv_nr`,`day`,`item1`,`item2`,`item3`)
    VALUES (2,2,10,24,34), (2,3,11,28,34), (2,4,10,35,34) ON DUPLICATE KEY UPDATE 
    Item1 = VALUES(item1),
    Item2 = VALUES(item2),
    Item3 = VALUES(item3); 
```

如何删除（或更新为 NULL）ID 为 4 的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:14:47.863

您的示例似乎与您的要求不符。我想您是在问，“如果 day=4 的值未提交，则将项目值清空。” 您的示例查询包括第 4 天的值。

因此，假设您要求清空任何没有 VALUES 条目的行，那么在单个查询中没有好的方法可以做到这一点。您可能会使用触发器在插入后执行某些逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:09:39.983

为什么要在一个语句中压缩所有内容。只是`delete * from yourTable where adv_nr = 2; insert into ...`。

首先，我认为这不可能是您所要求的。其次，当您不一步完成所有操作时，就不容易出错。更容易维护等等...

只是不要让它比它需要的更复杂。

# c# - 在 html 字符串中动态创建一个 asp 服务器控件，然后将其插入到 aspx 中

> ID：13510730
> 
> 赞同：0
> 
> 时间：2012-11-22T10:32:57.800
> 
> 标签：c#, asp.net, vb.net

我在一个 asp.net 应用程序的服务器端。我在一个名为“HtmlText”的变量中有一些 html 源代码。此源代码是通过 xsl 转换从 xml 生成的，结果如下：

```
<h1>ABC Test KH</h1>
<!--place for the control-->
<table class="tablesorter" id="tablesorter183">
<thead>
<tr>
    <th align="left">Name</th>
    <th align="right">DB</th>
    <th align="right">DB Anteil in Prozent</th>
    <th align="right">ABC</th>
</tr>
</thead>
<tbody>
<tr>
    <td align="left" fieldName="Name">Fabrikam, Inc.</td>
    <td align="right" fieldName="DB">881.378,00 €&lt;/td>
    <td align="right" fieldName="DB_Anteil_in_Prozent">29,92</td>
    <td align="right" fieldName="ABC">A</td>
</tr>
</tbody>
</table> 
```

现在这个源代码通过 InnerHtml 属性插入到一个 aspx 网站中。该 aspx 中有一个 id 为“book”的 div：

```
book.InnerHtml = HtmlText 
```

到目前为止，这工作正常。

但现在我想在该 html 中创建一个下拉控件，我可以在服务器端访问它。此控件应放置在注释所在的 h1 和 table-tags 之间`<!--place for the control-->`。

我知道如何动态创建 asp-control 并将事件绑定到该控件，但这仅在我首先拥有 aspx 时才有效。我不能对当时仅存在于字符串中的某些 html 源执行此操作。

有什么办法可以做我想做的事，还是我在这里走错了路？

在此先感谢您的任何建议。

亲切的问候，凯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:14:12.033

我认为唯一的解决方案是创建一个继承 DropDownList 的控件，并覆盖其 RenderControl 方法。

像这样的东西：

```
public override void RenderControl(HtmlTextWriter writer)
{
      //...
      //Fill in the variable HtmlText content
      //Split it to 2 variables - before and after the control place, and:

      writer.Write(startString);
      base.RenderControl(writer);
      writer.Write(endString);
} 
```

并使用此控件代替 DropDownList。

**编辑：**在多个控件的情况下，我会使用这里建议的方式：[Render .net controls to string and get events to fire](https://stackoverflow.com/questions/6865241/render-net-controls-to-string-and-get-events-to-fire)：

将字符串拆分为多个字符串 - 第一个字符串 - 从开头到第一个控件，第二个字符串 - 从第一个控件到第二个控件，依此类推。

然后将每个字符串插入一个新的 LiteralControl，并将它们添加到页面中，如下所示：

```
book.Controls.Add(LiteralControl1);
book.Controls.Add(DropDownList1);
book.Controls.Add(LiteralControl2);
book.Controls.Add(Button1); 
```

# c# - StringTemplate 上的 ASP.NET 安全异常

> ID：13510731
> 
> 赞同：1
> 
> 时间：2012-11-22T10:33:04.150
> 
> 标签：c#, asp.net, security, stringtemplate

我在我的 ASP.NET 3.5 网站上使用 StringTemplate 库 (http://www.stringtemplate.org/)，它在 localhost 上完美运行，

我写了简单的代码：

```
StringTemplate template = new StringTemplate(); 
```

但是当我尝试在共享主机上运行它时，它会抛出一个错误：

安全异常

说明：应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

异常详细信息：System.Security.SecurityException：该程序集不允许部分受信任的调用者。

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:42:48.963

问题是共享主机的安全问题......[这篇知识库文章](http://support.microsoft.com/kb/839300/en-us)将给出一个关于所涉及的内容以及如何解决这个问题的想法......

# mysql - 特定排序号后的Mysql更新

> ID：13510732
> 
> 赞同：1
> 
> 时间：2012-11-22T10:33:08.083
> 
> 标签：mysql, sorting

我目前正在做一些 mySQL/PHP，但我遇到了一个小问题。如果用户删除让我们说 id 4，排序 3 和 5 之间会有一个差距。所以我的想法是我需要 -（减去）排序 3 之后的所有排序数字。

我如何在 Mysql 中做到这一点？:) 我以为它会像下面这样，但意识到它没有用。

```
UPDATE menucard_category_content SET number_value = number_value-1 AFTER number_value=$sortnr 
```

**表格布局如下所示：**

```
ID - NAME - SORT - IMAGE
1, pizza, 1, url
2, pizza, 2, url
3, pizza, 3, url
4, pizza, 4, url
7, pizza, 5, url
9, pizza, 6, url 
```

问候，西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:35:21.987

您可以使用 UPDATE 语句来做到这一点：

```
UPDATE yourtable
SET sort = sort - 1
WHERE sort > 3 
```

# java - java调试/开发模式

> ID：13510734
> 
> 赞同：0
> 
> 时间：2012-11-22T10:33:15.710
> 
> 标签：java

在 C/C++ 中，我们可以使用`#ifndef RELEASE #endif`包含调试源，例如一些额外的测试和/或控制台打印等

有没有办法在 java 或任何类似的替代方案中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:34:53.260

您可以添加一个`static final boolean`变量，然后使用简单的`if`语句。

如果编译器可以确定表达式是，`false`那么它不会将条件编译到您的代码中。

# android - 如何在 Eclipse Juno 中为 Android 配置 Javadocs

> ID：13510735
> 
> 赞同：2
> 
> 时间：2012-11-22T10:33:17.000
> 
> 标签：android, eclipse

我在这里已经找到了一些关于这个问题的帖子，但也有了这个帮助，我没有让它在我的机器上运行。

我想将android源代码附加到android.jar。我尝试了几种方法，但不知何故它没有显示任何 android 源代码。这是我的 android sdk 所在的文件夹结构

[图片在这里 http://pasteboard.s3.amazonaws.com/images/111OkUca.png](http://pasteboard.s3.amazonaws.com/images/111OkUca.png)

即使我附加了请求的 android-16 平台的文件夹，它也不会显示源代码。

[图片在这里 http://pasteboard.s3.amazonaws.com/images/1125INcC.png](http://pasteboard.s3.amazonaws.com/images/1125INcC.png)

我的错误是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:58:58.337

您可以从以下位置下载 Java 7 javadoc

[http://www.oracle.com/technetwork/java/javase/documentation/java-se-7-doc-download-435117.html](http://www.oracle.com/technetwork/java/javase/documentation/java-se-7-doc-download-435117.html)

如果您有“Android 文档”包并且 javadoc 信息仍未显示，请确保 Android 库设置指向正确的文件夹：

项目 -> 设置 -> Java 构建路径，库选项卡

Android XX -> Android.jar -> Javadoc 位置：应该类似于“sdk_root/docs/reference/”。

并在编辑器中查看类的文档，例如：

您应该选择在 Web 浏览器中显示附加的 Java 文档，以将光标悬停在某个声明上时出现的弹出窗口。

# iphone - 地标未提供邮政编码以查找天气信息

> ID：13510736
> 
> 赞同：0
> 
> 时间：2012-11-22T10:33:18.270
> 
> 标签：iphone, objective-c, cllocationmanager, cllocation, clgeocoder

我想从当前位置找出天气。

为此，我将代码用作

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    [self.locationManager stopUpdatingLocation];

    self.location = newLocation;
//    NSLog(@"lat long = %f,%f",self.location.coordinate.latitude,self.location.coordinate.longitude);

    // Geocode coordinate (normally we'd use location.coordinate here instead of coord).
    // This will get us something we can query Google's Weather API with

    if (boolCurrentlyWorking == NO) {

        CLGeocoder* reverseGeocoder = [[CLGeocoder alloc] init];
        if(reverseGeocoder)
        {
            [reverseGeocoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
                CLPlacemark* placemark = [placemarks objectAtIndex:0];
                if (placemark) {
                    //Using blocks, get zip code
                    NSString *zipCode = [placemark.addressDictionary objectForKey:(NSString*)kABPersonAddressZIPKey];
                    NSLog(@"placemark : %@ zipcode : %@",placemark.addressDictionary,zipCode);
                }
            }];

        }else{
            MKReverseGeocoder *geocoder = [[MKReverseGeocoder alloc] initWithCoordinate:self.location.coordinate];
            geocoder.delegate = self;
            [geocoder start];
        }
     }

    boolCurrentlyWorking = YES;
} 
```

我这里没有邮政编码。

还发现这种方法 didupdate location 已被弃用，新方法是

```
-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *location = [locations lastObject];
    CLLocation *newlocation = location;
    NSLog(@"location : %@",location);
    CLGeocoder* reverseGeocoder = [[CLGeocoder alloc] init];
    if(reverseGeocoder)
    {
        [reverseGeocoder reverseGeocodeLocation:newlocation completionHandler:^(NSArray *placemarks, NSError *error) {
            for(CLPlacemark *placemark in placemarks)
            {
                NSLog(@"plcaemark desc : %@",[placemark description]);
            }
        }];
    }
} 
```

但它也不包含邮政编码。

我得到了这个描述

```
{
    Country = India;
    CountryCode = IN;
    FormattedAddressLines =     (
        NH8C,
        Gujarat,
        India
    );
    Name = NH8C;
    State = Gujarat;
    Street = NH8C;
    Thoroughfare = NH8C;
} 
```

是否存在不提供邮政编码信息而我们必须构建它的情况？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:26:00.443

首先，我们没有得到印度的任何邮政编码或邮政编码。

Google API 也已停止工作。

我使用 yahoo api 来了解天气。

这是可能对某人有帮助的代码

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    [self.locationManager stopUpdatingLocation];

    self.location = newLocation;

        NSString *linkForWoeid = [NSString stringWithFormat:@" http://where.yahooapis.com/geocode?location=%f,%f&flags=J&gflags=R&appid=zHgnBS4m",self.location.coordinate.latitude,self.location.coordinate.longitude];
        NSURL *woeidURL = [NSURL URLWithString:linkForWoeid];
        NSData *WoeidData = [NSData dataWithContentsOfURL:woeidURL];
        if (WoeidData != NULL)
        {
            NSError *woeiderr = nil;
            NSDictionary *aDicWOEIDResp = [NSJSONSerialization JSONObjectWithData:WoeidData options:NSJSONReadingMutableContainers error:&woeiderr];
            NSDictionary *aDictWOEID = [[[[aDicWOEIDResp objectForKey:@"ResultSet"]objectForKey:@"Results"]objectAtIndex:0]objectForKey:@"woeid"];

            NSString *address=[NSString stringWithFormat:@"http://weather.yahooapis.com/forecastrss?w=%@",aDictWOEID];
            ICB_WeatherConditions *icbWeather = [[ICB_WeatherConditions alloc] initWithQuery:address];

}

#import "ICB_WeatherConditions.m"

- (ICB_WeatherConditions *)initWithQuery:(NSString *)query
{
    if (self = [super init])
    {
        NSURL *url = [NSURL URLWithString:query];
        CXMLDocument *parser = [[[CXMLDocument alloc] initWithContentsOfURL:url options:0 error:nil] autorelease];

        NSDictionary *namespaceMedia = [NSDictionary dictionaryWithObject:@"http://xml.weather.yahoo.com/ns/rss/1.0" forKey:@"yweather"];
        NSArray *nodes = [parser nodesForXPath:@"//channel" error:nil];

        for (CXMLNode *node in nodes) {
            if ([node kind] == CXMLElementKind)
            {
                CXMLElement *element = (CXMLElement *)node;
                for(int i=0;i<[element childCount];i++)
                {
                    NSString *strKey = [[element childAtIndex:i] name];
                    if([strKey isEqual:@"location"])
                    {
                        location = [self stringForXPath:@"@city" ofNode:[element childAtIndex:i] withNameSpace:namespaceMedia];
                    }
                    else if([strKey isEqual:@"item"])
                    {
                        NSArray *nodeItem = [element nodesForXPath:@"//item" error:nil];
                        CXMLElement *elementItem = [nodeItem objectAtIndex:0];
                        for(int j=0;j<[elementItem childCount];j++){
                            NSString *strKeyItem = [[elementItem childAtIndex:j] name];
                            if([strKeyItem isEqual:@"condition"]){
                                condition =[self stringForXPath:@"@text" ofNode:[elementItem childAtIndex:j] withNameSpace:namespaceMedia];
                                currentTemp = [[self stringForXPath:@"@temp" ofNode:[elementItem childAtIndex:j] withNameSpace:namespaceMedia] intValue];
                            }
                            else if([strKeyItem isEqual:@"forecast"])
                            {
                                NSString *date = [self stringForXPath:@"@date" ofNode:[elementItem childAtIndex:j] withNameSpace:namespaceMedia];
                                NSDate *curDate = [NSDate date];
                                NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
                                dateFormatter.dateFormat = @"dd MMM yyyy";
                                NSString *strCurDate = [dateFormatter stringFromDate:curDate];
                                if([date isEqual:strCurDate])
                                {
                                    highTemp = [[self stringForXPath:@"@high" ofNode:[elementItem childAtIndex:j] withNameSpace:namespaceMedia] intValue];
                                    lowTemp = [[self stringForXPath:@"@low" ofNode:[elementItem childAtIndex:j] withNameSpace:namespaceMedia] intValue];
                                }
                            }
                        }
                    }
                    else
                        continue;
                }

            }
      }
    }
    return self;
} 
```

这就是我获取天气详细信息的方式。在我的情况下，我只需要位置、条件、高温、低温、当前温度。

# jquery - jQuery点击切换

> ID：13510738
> 
> 赞同：0
> 
> 时间：2012-11-22T10:33:33.370
> 
> 标签：jquery, toggle

我试图解决这个问题，但我似乎做不到。基本上，我正在尝试创建一个列表，其中将显示 #one 而隐藏 #two，当将 #one 悬停在上方时，#two 将向下滑动，如果您单击它，它将被选中并且 #one 将被选中隐藏，反之亦然...你能帮帮我吗？

```
<div class="sort">
 <div id="one"></div>
 <div id="two"></div>
</div>

$('.sort #one').click(function(){
  $('.sort #one').toggle(function(){
    $(this).animate({ top: '30px' }, 100, "linear");
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:27:52.407

试试看...

```
<script type="text/javascript">
      var check = false;
         $(document).ready(function () {
            $('.sort #one').mouseenter(function () {
                $('.sort #two').toggle(function () {
                    $(this).animate({ top: '30px' }, 100, "linear");
                });
            });

        $('.sort #two').mouseenter(function () {
            check = true;
            $(this).click(function () {
                $('.sort #one').toggle(function () {
                    $(this).animate({ top: '30px' }, 100, "linear");
                });
            });
        });

        if (check != false) {

            $('.sort #one').mouseleave(function () {
                $('.sort #two').toggle(function () {
                    $(this).animate({ top: '30px' }, 100, "linear");
                });
            });
        }
    });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:11:33.417

**尝试这个：**

```
$(function() {

    // #one will be shown and #two will be hidden
    $('#one').show();
    $('#two').hide();

    // when #one is hovered over then #two will slide down 
    // if you click on it then it will be selected and #one will be hidden
    $('#one').hover(
    function() {
        $('#two').toggle(function() {
            $(this).animate({top: '30px'}, 100, "linear");
        })
    }, function() {
        $('#two').toggle(function() {
            $(this).animate({top: '30px'}, 100, "linear");
        })
    }).click(function() {
        $('#one').hide();
        $('#two').toggle();
    });

    // and vice versa...
    $('#two').hover(
    function() {
        $('#one').toggle(function() {
            $(this).animate({top: '30px'}, 100, "linear");
        })
    }, function() {
        $('#one').toggle(function() {
            $(this).animate({top: '30px'}, 100, "linear");
        })
    }).click(function() {
        $('#two').hide();
        $('#one').toggle();
    });
});​ 
```

# php - PHP 验证重置表单字段

> ID：13510744
> 
> 赞同：0
> 
> 时间：2012-11-22T10:33:54.230
> 
> 标签：php

```
if(isset($_POST['submit'])){

$domain=$_POST['domain'];
$fname=$_POST['fname'];
$sname=$_POST['sname'];
$tel=$_POST['tel'];
if($domain==""){
    $error="<h4>Enter Domain </h4>";    
}elseif($fname == ""){
    $error="<h4>Enter Firstname </h4>"; 
}elseif($sname == "")
{
    $error="<h4 >Enter Surname</h4>";   
}elseif($tel=="")
{
    $error="<h4 >Enter telephono no</h4>";  
}
else {

$sql11=mysql_query("INSERT INTO domain VALUES('','$domain','$fname','$sname','$tel','$mobile','$email','$company','$address','$city','$country','$pcode','$tele',
'$fax','$qus','$ans')");
echo $sql;
$db->query($sql);

    }
    }
<div><?php echo $error; ?></div>
<form action="" method="post" name="classic_form" id="classic_form">
<div><h4>Personal details:</h4></div><div style="margin-left: 109px;">
          <div>Domain</div>
    <input type="text" name="domain" id="domain" value="" />
    <div>First name: </div>
    <input type="text" name="fname" id="fname" value="" />
    <div>Surname:</div>
     <input type="text" name="sname" id="sname" value="" />
     <div>Telephone:</div>
    <input type="text" name="tel" id="tel" value="" />
    <div>Mobile:</div>
    </form> 
```

在我的注册页面中，我使用了 php 验证。用户提交表单后，如果显示验证错误，它还会重置所有字段。我该如何解决这个问题？如果不重置字段，我必须显示 php 验证错误。我也在每个输入值中使用了。但它显示“注意：未定义的索引：第 82 行 D:\xampp\htdocs\deena\domainreg.php 中的域”。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:36:39.250

您必须将所有值传递给 php，然后发送回 html 以提供您的字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:39:09.200

```
<input type="text" name="domain" id="domain" value="<?php echo isset($domain) ? $domain : ''; ?>" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:37:50.870

它不是“重置您的字段”..您的表单正在提交，因此页面正在重置，因此字段*加载*为空。在页面加载时将`$_POST[]`值放在字段值中：

```
<input type="text" name="domain" id="domain" value="<?php echo $domain ?>" />
<div>First name: </div>
<input type="text" name="fname" id="fname" value="<?php echo $fname?>" />
<div>Surname:</div>
 <input type="text" name="sname" id="sname" value="<?php echo $sname?>" />
 <div>Telephone:</div>
<input type="text" name="tel" id="tel" value="<?php echo $tel?>" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T10:38:10.120

简单的。只需将变量添加到输入值：

```
<input type="text" name="domain" id="domain" value="<?php echo $domain; ?>" /> 
```

您还应该保护输出值，防止跨站点脚本：

```
<input type="text" name="domain" id="domain" value="<?php echo htmlspecialchars($domain); ?>" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T10:43:41.987

在值字段中：

```
<input type="text" name="domain" id="domain" 
    value="<?php if(isset($_POST['domain'])){echo $_POST['domain'];} ?>"> 
```

没有测试它。但我认为它应该工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T11:11:29.733

在输入标签中添加 php 值，如 value="" 这样如果变量已发布，它将回显，否则将显示空值

# iphone - MFMailComposer 在 io6 横向模式下不工作

> ID：13510749
> 
> 赞同：2
> 
> 时间：2012-11-22T10:34:09.597
> 
> 标签：iphone, objective-c, ios, ios6

```
if ([MFMailComposeViewController canSendMail]) {
    MFMailComposeViewController * mailComposeController=[[MFMailComposeViewController alloc]init];
    mailComposeController.mailComposeDelegate = self;
  //  mailComposeController.wantsFullScreenLayout = NO;
    [mailComposeController setSubject:@"WallPaperApp."];
    [mailComposeController setMessageBody:@"This is my new Wallpaper." isHTML:NO];
    UIImage *img=mainImageView.image;
    UIImage *img1=[UIImage imageNamed:@"aaa.jpg"];
    NSData *imageData = UIImagePNGRepresentation(img);      
    [mailComposeController addAttachmentData:imageData mimeType:@"image/jpg" fileName:[NSString stringWithFormat:@"photo.png"]];

    [self presentModalViewController:mailComposeController animated:YES];
    //[mailComposeController release];

} 
```

它在 ios5 中工作正常，但在设备上的 ios6 m 测试中不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:36:45.187

在 appdelegate 的 didfinishloading 中尝试以下代码

```
rootController = 
    [[firstViewController alloc] 
     initWithNibName:@"firstViewController" bundle:nil];
    navigationController = [[UINavigationController alloc]initWithRootViewController:rootController];
        window = [[UIWindow alloc] 
                  initWithFrame:[[UIScreen mainScreen] bounds]];
        [window addSubview:navigationController.view];
[window makeKeyAndVisible]; 
```

rootController 是一个 uiviewcontroller 实例

# ios6 - 在 iOS 6.0 中使用 facebook 框架时出现运行时错误

> ID：13510753
> 
> 赞同：0
> 
> 时间：2012-11-22T10:34:20.980
> 
> 标签：ios6

我在“ios 5.0”中开始了这个项目。我使用了 facebook 框架。那个时候它在运行时没有给我任何错误。

在我将设备升级到“ios6.0”并下载新版本的 xcode 之后。我能够在模拟器上构建和运行它。但我无法在 iPhone 上运行它。谁能解释一下它为什么会发生？为什么应用程序在模拟器中运行。但不是在 iPhone/

模拟器和iPhone的基本差异bwtween架构？

谢谢&问候维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:45:21.320

因为 ios 6 有新的框架，即社交框架，所以只需添加它。添加它后，您不需要为 facebook、twitter 制作这么多方法...

[https://github.com/yashesh87/Social-Framework-iOS6](https://github.com/yashesh87/Social-Framework-iOS6) 这个链接会帮助你..

# mysql - 使用 OR 查询性能

> ID：13510754
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:34:21.820
> 
> 标签：mysql, sql, performance

也许这是一个基本问题，但无法回答，希望您的帮助:)

我在 MySQL 中有下表：

```
create table anotation
    ( 
        chromosome enum
            (
                'Chr1',
                'Chr2',
                'Chr3',
                'Chr4',
                'Chr5',
                'ChrC',
                'ChrM'
            ), 
        version varchar(10),
        type enum
            (
                'CDS',
                'chromosome',
                'exon',
                'five_prime_UTR',
                'gene',
                'mRNA',
                'mRNA_TE_gene',
                'miRNA',
                'ncRNA',
                'protein',
                'pseudogene',
                'pseudogenic_exon',
                'pseudogenic_transcript',
                'rRNA',
                'snRNA',
                'snoRNA',
                'tRNA',
                'three_prime_UTR',
                'transposable_element_gene'
            ), 
        strand enum
            (
                 '+',
                 '-'
            ), 
        phase tinyint, 
        atrributes text
    );` 
```

它有大约 600,000 个值，我正在执行以下查询：

```
select distinct
            anot_1.chromosome,
            anot_1.start,
            anot_1.end,
            anot_1.atrributes 
    from 
            anotation anot_1,
            anotation anot_2 
    where
            anot_1.type='CDS'
        and
            anot_2.type='protein'
        and 
            anot_1.chromosome!='ChrM'
        and
            anot_1.chromosome!='ChrC'
        and
            anot_1.chromosome=anot_2.chromosome
        and 
        (
            (
                anot_2.start=anot_1.start
            and
                anot_1.end!=anot_2.end
            and
                anot_2.strand='+'
            ) 
        or 
            (
                anot_2.start!=anot_1.start
            and
                anot_1.end=anot_2.end
            and
                anot_2.strand='-'
            )
        ); 
```

并且实际上需要很长时间才能完成，但是当我进行查询时（相同的查询，但我从 OR 中删除了其中一个条件），它几乎立即运行：

```
select distinct
            anot_1.chromosome,
            anot_1.start,
            anot_1.end,
            anot_1.atrributes
    from
            anotation anot_1, 
            anotation anot_2
    where
            anot_1.type='CDS'
        and 
            anot_2.type='protein'
        and 
            anot_1.chromosome!='ChrM'
        and
            anot_1.chromosome!='ChrC'
        and
            anot_1.chromosome=anot_2.chromosome
        and
            anot_2.start=anot_1.start
        and
            anot_1.end!=anot_2.end
        and 
            anot_2.strand='+';` 
```

任何人都知道发生了什么，如果是这样，我该如何解决？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:28:54.040

这不是一个解决方案（我同意上面关于索引的评论），但我已经改变了你的 SQL 以使用一对左外连接，而不是你当前的 SQL，它在 JOIN 中有一个 OR。

虽然我不希望这在性能上有很大不同，但它可能会帮助您和其他人了解查询在做什么：-

```
SELECT distinct anot_1.chromosome, anot_1.start, anot_1.end, anot_1.atrributes 
FROM anotation anot_1,
LEFT OUTER JOIN anotation anot_2 ON anot_1.chromosome = anot_2.chromosome AND anot_1.start = anot_2.start AND anot_1.end != anot_2.end AND anot_2.strAND = '+' AND anot_2.type='protein'
LEFT OUTER JOIN anotation anot_3 ON anot_1.chromosome = anot_3.chromosome AND anot_1.end = anot_3.end AND anot_1.start != anot_3.start AND anot_3.strAND = '+' AND anot_3.type='protein'
WHERE anot_1.type = 'CDS'  
AND anot_1.chromosome != 'ChrM' 
AND anot_1.chromosome != 'ChrC' 
AND (anot_2.chromosome IS NOT NULL
OR anot_3.chromosome IS NOT NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:40:05.517

我会首先清理您的查询，将它们分开并进行联合

```
select
            CDS.chromosome,
            CDS.start,
            CDS.end,
            CDS.atrributes 
    from
            (
            select
                        a.chromosome,
                        a.start,
                        a.end,
                        a.attribures,
                from
                        anotation a,
                where
                        a.type='CDS'
                    and
                        not a.chromosome IN ('ChrM', 'ChrC')
            ) CDS
        join
            (
            select
                        a.strand,
                from
                        anotation a,
                where
                        a.type='protien'
            ) Protien
                on 
                        CDS.chromosome = Protien.chromosome
                   and
                        CDS.start = Protien.start
                   and
                        CDS.end != Protien.end 
where
            Protien.strand = '+'
union
    select
            CDS.chromosome,
            CDS.start,
            CDS.end,
            CDS.atrributes 
    from
            (
            select
                        a.chromosome,
                        a.start,
                        a.end,
                        a.attribures,
                from
                        anotation a,
                where
                        a.type='CDS'
                    and
                        not a.chromosome IN ('ChrM', 'ChrC')
            ) CDS
        join
            (
            select
                        a.strand,
                from
                        anotation a,
                where
                        a.type='protien'
            ) Protien
                on 
                        CDS.chromosome = Protien.chromosome
                   and
                        CDS.start != Protien.start
                   and
                        CDS.end = Protien.end 
where
            Protien.strand = '-' 
```

# c - OS X 上的 time.h clock() 坏了？

> ID：13510758
> 
> 赞同：1
> 
> 时间：2012-11-22T10:34:30.750
> 
> 标签：c, macos, clock, darwin, time.h

我要疯了吗？我在 x86_64 上运行它。

```
#include <stdio.h>
#include <time.h>
#include <unistd.h>

int main(int argc, char *argv[])
{
    printf("Clock: %f\n", clock() / (double)CLOCKS_PER_SEC);
    sleep(1);
    printf("Clock: %f\n", clock() / (double)CLOCKS_PER_SEC);
    sleep(1);
    printf("Clock: %f\n", clock() / (double)CLOCKS_PER_SEC);
    return 0;
} 
```

这打印

> 时钟：0.002880
> 时钟：0.002968
> 时钟：0.003019

它显然在排队等候一秒钟`sleep(1)`，但输出显然是错误的。

如果这不起作用，是否有可移植的 C 替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:36:03.947

我是个白痴。`clock()`返回使用的**处理器时间**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:50:29.823

您可以声明一个变量 `time_t t1,t2;` `t1 = time(NULL);` `sleep(1);` `t2 = time(NULL);` 您可以调试和查看 t1 和 t2 的值。我想你可以参考[http://www.cplusplus.com/reference/clibrary/ctime/time/](http://www.cplusplus.com/reference/clibrary/ctime/time/)

# image-processing - 谷歌照片球

> ID：13510767
> 
> 赞同：0
> 
> 时间：2012-11-22T10:34:59.920
> 
> 标签：image-processing, texture-mapping

有没有人知道如何将谷歌照片球图像的纹理图像映射到自己的球体上（不使用谷歌 API）？我的目标是自己在 matlab 中完成，但我无法找到有关映射坐标的任何信息。

在此先感谢，
托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T17:22:39.463

您可以在此处找到有关 Photo Sphere 元数据的详细信息： [https ://developers.google.com/photo-sphere/metadata/](https://developers.google.com/photo-sphere/metadata/)

本质上，图像使用 equirectangular 投影 [1]，您只需将其映射在球体内部，并将相机放在中心。如果 Photo Sphere 是完整的 360/180 度全景，那么您可以映射整个球体的内部。如果只是部分全景图，那么您可以使用照片内部的元数据来确定您需要放置纹理的确切位置。

[1] [https://en.wikipedia.org/wiki/Equirectangular_projection](https://en.wikipedia.org/wiki/Equirectangular_projection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T12:20:16.070

您是否尝试过使用[扭曲功能](http://www.mathworks.es/es/help/images/ref/warp.html)？

```
a = imread('PANO.jpg');
[x,y,z] = sphere(200);
warp(x,y,z,a); 
```

使用相机工具，您可以将相机位置设置在球体内，但我认为外部视图可以通过足够的缩放级别来满足。

# mysql - 一对一关系还是使用同一张表？

> ID：13510768
> 
> 赞同：7
> 
> 时间：2012-11-22T10:35:00.140
> 
> 标签：mysql, database, relational-database, one-to-one

我创建了以下表格：

动漫(id,title,date), 漫画(id,title,date), TVSeries(id,title,season,episode,date)

其中一些已经具有导演、流派、文章等的外键（用于一对多或多对多关系）。

现在我想再创建两个表Reviews(id,rating,date) 和Posts(id,thumbid,articleid,reviewid)。评论是关于一个动漫和/或漫画 TVSerie 的，反之亦然，但评论的属性可能在多个表中。帖子也一样。

这是单独表中一对一关系的典型示例，还是向现有表添加更多属性更有效？那么更多的表和关系还是更少的表更多的列？

谢谢你，我希望我的问题不是那么愚蠢，但我有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:37:29.920

在我看来，最好避免一对一关系的外键关系。它最适合一对多关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:52:48.517

我不确定您的要求是什么，但选择如下：

1.  有评论有 2 列，或者是适用表的外键，可以为 NULL。这确实适用于单个评论可以同时涉及两者的情况。

2.  有一个ReviewsComics 和ReviewsAnime 表。然后，您将拥有每个表中评论的所有字段（并且没有评论表）。

3.  另一种选择（2）是将它们与评论表结合使用，那么这两个表只有 2 个字段，它们分别是评论和漫画/动漫的外键（因此评论和漫画/动漫之间没有直接链接）。

4.  有一个基表，动漫和漫画链接到 1 对 1，并有评论链接到该表。

5.  （编辑）如果动漫/漫画的所有字段都相同（或相似），您可以将它们合并到一个表中并添加一个类型字段，指示动漫/漫画，然后问题就消失了。这类似于基表选项。

编辑： 2 个评论表可能会提供最佳性能（除非您经常要选择其中任何一个的所有评论），但使用适当的索引，性能不应该成为上述任何一个问题。

# iphone - 切换 ViewControllers，但没有任何反应？

> ID：13510773
> 
> 赞同：1
> 
> 时间：2012-11-22T10:35:17.003
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, presentmodalviewcontroller

我想将切换 ViewControllers 的代码放到一个名为 SwitchController 的类中。但什么也没有发生。

这是代码：

//AppDelegate.m

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        self.window.backgroundColor = [UIColor whiteColor];

        RootViewController *root = [[RootViewController alloc] init];
        [self.window setRootViewController:root];

        [self.window makeKeyAndVisible];
        return YES;
} 
```

//SwitchController.h

```
@interface SwitchController : NSObject

@property (strong,nonatomic) RootViewController *rootViewController;

+(SwitchController *)sharedInstance;
-(void)requestToSwitchViewController:(NSInteger)tag;

@end 
```

//SwitchController.m

```
#import "SwitchController.h"
#import "FirstViewController.h"
#import "SecondViewController.h"

@implementation SwitchController

@synthesize rootViewController = _rootViewController;

-(id)init
{
    self = [super init];
    if (self == nil)
    {
        _rootViewController = [[RootViewController alloc] init];
    }
    return self;
}

+(SwitchController *)sharedInstance
{
    static SwitchController *sharedSingleton = nil;
@synchronized([SwitchController class])
{
    if(sharedSingleton == nil)
    {
        sharedSingleton = [[self alloc] init];
    }
}
return sharedSingleton;
}

-(void)requestToSwitchViewController:(NSInteger)tag
{
    switch (tag)
    {
        case 1:
        {
            FirstViewController *first = [[FirstViewController alloc] init];
            [self.rootViewController presentViewController:first animated:YES completion:nil];
        }
            break;
         .........  //Do something else
        default:
            break;
    }
}

@end 
```

//这是self.window.rootViewController------RootViewController.m

//在这个ViewController的视图中，有一个按钮，按下它会做下面的事情

```
 - (IBAction)pressed:(id)sender
    {
        [[SwitchController sharedInstance] requestToSwitchViewController:[(UIButton *)sender tag]];
    } 
```

那么，我的代码有什么问题吗？

为什么当我按下按钮时没有任何反应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:02:07.987

可能有几个问题。。

1）检查您的按钮插座是否正确连接到此方法`-(IBAction)pressed:(id)sender;`

`@synthesize`2）在in之后添加这一行`SwitchController.m`

`static SwitchController *sharedSingleton = nil;`

3）像这样改变你的方法

```
+(SwitchController *)sharedInstance
{
    if(sharedSingleton == nil)
    {
        sharedSingleton = [[self allocWithZone:NULL] init];
    }
  return sharedSingleton;
} 
```

`-id(init)`4）从方法中删除这一行

```
// You do not need to re-initialize the root view controller
_rootViewController = [[RootViewController alloc] init]; 
```

5) 检查按钮是否有效。在调用此方法之前`requestToSwitchViewController:`检查它记录的内容

**更新：**

试试这样：（为此，您需要`create a property for navigation controller`在您的`appDelegate`和综合它）

```
switch (tag)
{
    case 1:
    {
        FirstViewController *first = [[FirstViewController alloc] init];
        appDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        [appDelegate.navigationController presentViewController:first animated:YES completion:nil];
    }
    .....
  .........
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:38:17.373

I guess you're just defining the viewController, you need to define the View too. they're different things.

# c - 公开 API 时的设计方面

> ID：13510779
> 
> 赞同：2
> 
> 时间：2012-11-22T10:35:30.543
> 
> 标签：c, api, function-pointers

我试图了解第三方软件中采用的设计策略。具体来说，我正在分析软件堆栈的**“IMPLEMENTATION_LAYER”**（例如）中的代码实现某些功能（通过 c 例程）并将这些例程的签名作为 API 公开给**“应用程序层”** 以供其使用的情况。这是通过以下方式完成的

应用层提供如下结构

```
struct my_interfaces
{
    /*List of function pointers*/
}; 
```

以及一个基于宏的函数列表，用于初始化这个结构（使用合适的函数）并访问这个结构的方法。

**问题**

与遗留方法相比，以这种方式公开 API 有什么优势。我的意思是，只公开函数的原型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:50:35.250

*   **最小的 API 导出**：您不需要导出整个库；只是一个“GetAPI”API。
*   **版本化APIS**：可以告诉 API 加载器正在请求 API 的哪个“版本”，因此公开了特定于特定版本请求的特性和行为
*   **模块化 APIS**：API 加载器可以动态加载其他模块，并即时从这些 .so/.dll 文件中连接请求的 APIS。
*   **集中式许可**：单个 API 加载器从根本上减少了需要执行许可代码检查的地方的数量。
*   **模式切换**：根据请求的 API，可以加载或不加载不同的功能。换句话说，部分 API 填充。一个很好的例子是进入 FIPS 模式的加密库，其中只有合格算法的特定子集可以访问，而所有其他都被存根为错误条件。

这些只是我脑海中的一些

# google-drive-api - 共享自定义文档时的小问题

> ID：13510780
> 
> 赞同：0
> 
> 时间：2012-11-22T10:35:31.457
> 
> 标签：google-drive-api

我已经集成了 Google Drive 共享对话框，它就像一个魅力。我遇到的唯一小问题是通知电子邮件包含损坏的图标。如果使用我的自定义 mimetype（在 Google API 控制台中配置）的正确图标，那将是理想的。

这是通知邮件的样子：

![在此处输入图像描述](../Images/699bae122e7a32940961159aaf64ccaa.png)

# c# - 使用 .NET 查询 Oracle 数据库时，此查询返回空记录，但在 SQL+ 中给出了行

> ID：13510783
> 
> 赞同：1
> 
> 时间：2012-11-22T10:35:39.203
> 
> 标签：c#, .net, winforms, oracle11g

下面的代码返回一个空记录，但给出了来自 SQL+ 的记录。

```
DbProviderFactory factory = DbProviderFactories.GetFactory("Oracle.DataAccess.Client");
DbConnection connection = factory.CreateConnection();

connection.ConnectionString = "Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=Simplex-IT-02)(PORT=1521)))
                     (CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=Simplex))); User Id=User_Test;Password=password;";

DataTable table = new DataTable();

DbCommand command = connection.CreateCommand();
command.Connection = connection;
command.CommandText = "SELECT text FROM user_views WHERE (view_name='ACCOUNT_BALANCES_BY_PERIOD');";

DbDataReader dataReader = command.ExecuteReader();

table.Load(dataReader);
dataReader.Close(); 
```

同时，当我用“SELECT DISTINCT view_name FROM user_views”替换 command.CommandText 时，它给了我给定模式的所有可用视图的列表。

为什么我无法获取给定视图的 sql 文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-27T12:44:28.010

问题是`;`在查询的末尾。删除它，它应该返回值。

```
command.CommandText = "SELECT text FROM user_views WHERE
    (view_name='ACCOUNT_BALANCES_BY_PERIOD')"; 
```

# php - PHP内存管理 - 致命错误：内存不足

> ID：13510784
> 
> 赞同：0
> 
> 时间：2012-11-22T10:35:42.727
> 
> 标签：php, mysql

我是一名新手 PHP 开发人员，正在学习这门伟大的语言。我现在最终得到了一个包含 1,343,579 行的脚本，当我尝试运行它时，我得到以下信息：

```
Fatal error: Out of memory (allocated 269221888) (tried to allocate 536870912 bytes) in Unknown on line 0 
```

我有一段代码重复 512 次，因为我允许 2^9 种不同的组合来解释不同的搜索选项。我正在尽我最大的努力通过使用`unset()`、归零变量并有时显式调用`gc_collect_cycles()`.

请让我知道 100 万行代码是否最终会出现这个内存问题，或者我在做一些与内存管理相关的愚蠢事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:40:39.190

将你的资源分成更小的部分，只包含你真正需要的部分。当你一遍又一遍地重复同样的事情时，将它重构为一个单独的函数并使用适当的参数调用它。

在不了解具体任务的情况下，我们无法提供更多建议。

您可以根据您的条件逐步构建查询字符串

```
function execute_query($pdo, $cond1, $cond2, $cond3, ..., $cond9)
{
    $params = array();
    $bind_types = '';
    $sql = 'select * from mytable where';

    $sql = "$sql condition1 = ?";
    $params[] = $cond1;

    if (isset($cond2)) {
        $sql = "$sql and condition2 = ?";
        $params[] = $cond2;
    }

    if (isset($cond3)) {
        $sql = "$sql and condition3 = ?";
        $params[] = $cond3;
    }

    ...

    $sth = $pdo->prepare($sql);
    return $sth->execute($params);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:40:45.637

内存泄漏是不正常的，不应该发生。您可以尝试一些解决方案来在小部分上分解此代码并对其进行结构化。

您可以尝试一些 MVC 解决方案，例如 ZEND 或其他东西。确保您的代码没有做更多您需要的事情。审查所有。

上那个。

# mercurial - mercurial 在提交之前丢弃所有添加的文件

> ID：13510787
> 
> 赞同：3
> 
> 时间：2012-11-22T10:35:53.400
> 
> 标签：mercurial

只是犯了使用的错误，`addremove`试图删除一些没有使用就被删除的文件`hg remove`

现在有数百个文件将在下一次提交时添加

无论如何，我可以快速删除所有这些添加的文件，而无需求助于 bash 脚本甚至更糟`hg removing`或`forgetting`手动每个文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T17:35:42.277

如果只想使用内部`hg`命令，可以执行以下操作：

```
hg forget "set:added()" 
```

这将忘记工作目录中标记为“已添加”的任何文件。它利用了 Mercurial 相当强大的[文件集](http://selenic.com/hg/help/filesets)功能。

指定文件时可以使用其他过滤器，这使您可以轻松修复其他错误。例如，轻松重新添加已删除的文件，但仅此而已`hg add "set:removed()"`。该功能类似于（幸好比）mercurial [revsets](http://selenic.com/hg/help/revsets)，并且可以通过以下方式进行研究：

```
hg help filesets 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T11:29:16.943

您可以使用以下内容在命令行上轻松完成此操作：

```
hg status --added --no-status | xargs hg forget 
```

这应该会忘记自上次提交以来添加的所有文件。

我可以建议将您不想添加的文件添加到`.hgignore`文件中，这样就不会再发生这种情况了吗？

# c++ - boost::asio 扩展 TCP 套接字

> ID：13510794
> 
> 赞同：3
> 
> 时间：2012-11-22T10:36:01.503
> 
> 标签：c++, sockets, boost, boost-asio

我正在尝试制作一个类似于 boost socket 的 asio 扩展，并在 windows 和 linux 上实现。这些扩展将用于使用 EIBD 与 Linux 的 KNX 网络进行交互。问题是，如何监控多个文件描述符。如果使用 select() 如何绕过 FD_SETSIZE 限制？

boost 如何在套接字实现中处理这个问题？据我所知，Windows 上使用的是 IO 完成端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:42:13.327

我的问题的简短回答是使用[epoll](http://linux.die.net/man/7/epoll)。根据[维基百科](http://en.wikipedia.org/wiki/Epoll)，epoll 是一种适用于 Linux 的可扩展 I/O 事件通知机制，最早在 Linux 内核 2.5.44 中引入。

select(2) 一次最多可以监控 FD_SETSIZE 个描述符，通常是在 libc 编译时确定的少量描述符。相反，epoll 没有这样的固定限制，并且不执行任何线性扫描。因此，它能够更好地执行并处理更多的事件。

有关如何使用 epoll 的教程，请访问 banu.com/blog/2/how-to-use-epoll-a-complete-example-in-c/

至于 Boost，在很多平台上，Boost.Asio 以 Reactor 的形式实现了 Proactor 设计模式，例如 select(kernel 2.4)、epoll(kernel 2.6) 或 kqueue(Mac OS)。

在 Windows NT、2000 和 XP 上，Boost.Asio 利用重叠 I/O 来提供 Proactor 设计模式的有效实现。

更多关于提升：

www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/overview/core/async.html

www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/design/implementation.html

# google-apps-script - sheet.appendRow() 偶尔会静默失败并导致空行

> ID：13510797
> 
> 赞同：5
> 
> 时间：2012-11-22T10:36:14.023
> 
> 标签：google-apps-script, google-sheets

使用来自 google-spreadsheet 的 google-apps-script，我正在尝试使用 fetchUrl 获取数百行数据并使用 sheet.appendRow 将它们粘贴到我的工作表中。

获取数据并拆分为数组是可以的。但是将它们逐行附加到工作表偶尔会失败而没有任何错误并导致空行。

这是重现问题的非常简单的示例。

```
function appendTest() {
  var sSheet = SpreadsheetApp.getActiveSpreadsheet();
  sheet = SpreadsheetApp.setActiveSheet(sSheet.getSheets()[2]);
  for (var i = 0; i <= 100; i++) {
      sheet.appendRow([i, 1, 2, 3, 4, 5]);
  }
} 
```

大约 5 或 10 行，有时会变空。插入 Utilities.sleep() 似乎也不起作用。

有没有人有任何想法摆脱这种情况？先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T10:57:00.890

您可以尝试像这样使用批量写入工作表

```
function appendTest() {
  var target = new Array()
  var sSheet = SpreadsheetApp.getActiveSpreadsheet();
  sheet = SpreadsheetApp.setActiveSheet(sSheet.getSheets()[2]);
  for (var i = 0; i <= 100; i++) {
      target.push(['some data','in some columns','bla bla']);
  }
sheet.getRange(sSheet.getLastRow()+1,1,target.length,target[0].length).setValues(target);
} 
```

请注意，如果您认为工作表太“短”，您也可以在循环中附加空行。

**编辑：**按照迈克尔相关的回答，使用添加必要的行会是一个更好的主意`sheet.insertRowsAfter(sheet.getMaxRows(), target.length)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T16:10:36.413

在循环中使用 appendRow 是不稳定的，不是最佳实践。请参见：

[https://productforums.google.com/forum/#!topic/docs/y0E9PB_VTJw](https://productforums.google.com/forum/#!topic/docs/y0E9PB_VTJw)

讨论这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T00:10:47.953

只是一个小评论：我在循环中使用 appendRow，一次最多可追加 30 行。该脚本已每天使用大约一周。

有趣的是，在测试脚本期间，当我将其设置为附加大约 100 行时，我也看到行丢失了。但是在对目标电子表格进行简单的手动刷新后，我没有看到任何缺失的行。所以我认为这些行实际上是附加的，但是那个错误？在于他们的展示。

# android - Android：获取列表视图的滚动

> ID：13510799
> 
> 赞同：0
> 
> 时间：2012-11-22T10:36:16.287
> 
> 标签：android, listview

我只想知道我可以知道列表是否开始滚动以及滚动何时停止。

我的代码片段如下：

```
listView.setOnScrollListener(new OnScrollListener() {

            public void onScrollStateChanged(AbsListView arg0, int arg1) {
                // TODO Auto-generated method stub
                /*View  toolbar = arg0.findViewById(R.id.toolbar);

                // Creating the expand animation for the item
                ExpandAnimation expandAni = new ExpandAnimation(toolbar, 500);*/

                // Start the animation on the toolbar

            }

            public void onScroll(AbsListView arg0, int arg1, int arg2, int arg3) {
                // TODO Auto-generated method stub
                if(arg1!=0){
                    toolbar.setVisibility(View.GONE);   
                }
                else{

                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:44:01.197

您只需要查看回调中的`scrollState`参数：`onScrollStateChanged`

```
 list.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            switch(scrollState) {
            case OnScrollListener.SCROLL_STATE_TOUCH_SCROLL:
                // Scrolling just started
                break;
            case OnScrollListener.SCROLL_STATE_FLING:
                // User just removed his finger (but still scrolling)
                break;
            case OnScrollListener.SCROLL_STATE_IDLE:
                // Scrolling is finished
                break;
            }
        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        }
    }); 
```

# http - why i got an error while running C:\otp\otp>bin\start-server.bat in command prompt?

> ID：13510801
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:36:25.693
> 
> 标签：http

When i'm tring to run Open trip planner in my windos system i got an error like this why this happens?

when i'm tring to run C:\otp\otp>bin\start-server.bat in command prompt,i had an error like below.. can anyone know why this happens??

C:\otp\otp>bin\start-server.bat

```
C:\otp\otp>java -Xmx1448m -jar lib\winstone.jar --webappsDir=webapps
 .......
 .......
[Winstone 2012/11/22 15:47:59] - Beginning extraction from war file
[Winstone 2012/11/22 15:48:00] - No webapp classes folder found - C:\otp\otp\web
apps\opentripplanner-webapp\WEB-INF\classes
[Winstone 2012/11/22 15:48:00] - Deployed web application found at opentripplann
er-webapp.war
[Winstone 2012/11/22 15:48:00] - Winstone Servlet Engine v0.9.10 running: contro
lPort=disabled
[Winstone 2012/11/22 15:48:00] - Error during HTTP listener init or shutdown
java.net.BindException: Address already in use: JVM_Bind
        at java.net.PlainSocketImpl.socketBind(Native Method)
        at java.net.PlainSocketImpl.bind(Unknown Source)
        at java.net.ServerSocket.bind(Unknown Source)
        at java.net.ServerSocket.<init>(Unknown Source)
        at java.net.ServerSocket.<init>(Unknown Source)
        at winstone.HttpListener.getServerSocket(HttpListener.java:102)
        at winstone.HttpListener.run(HttpListener.java:116)
        at java.lang.Thread.run(Unknown Source)

[Winstone 2012/11/22 15:48:00] - HTTP Listener shutdown successfully
[Winstone 2012/11/22 15:48:00] - AJP13 Listener started: port=8009 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:38:39.107

错误告诉你原因：

> HTTP 侦听器初始化或关闭期间出错
> 
> java.net.BindException：地址已在使用中：JVM_Bind

应用程序尝试绑定的端口已被另一个应用程序使用。更改端口或关闭其他应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:39:13.543

`java.net.BindException: Address already in use: JVM_Bind`...似乎您有一些东西已经在您指定的端口上侦听。您必须检查使用它的是什么（特别是如果它是标准的，如 80 或 443）。

# network-programming - IOLib 与 usocket

> ID：13510806
> 
> 赞同：7
> 
> 时间：2012-11-22T10:36:44.023
> 
> 标签：network-programming, common-lisp

据我了解，[IOLib](http://www.cliki.net/IOLib)和[usocket](http://www.cliki.net/usocket)具有几乎相同的抽象级别。IOLib 使用操作系统后端套接字，另一方面 usocket 使用 Lisp-runtime-backend 套接字。

我只是想知道对于特定用例来说哪个是更好的选择。

例如，需要高并发的服务器，或者注重可移植性的客户端等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T04:13:39.673

我想，[这篇博文](http://blog.codeartist.org/2011/11/iolib-considered-harmful-to-lisp-today.html)回答了你的问题。

总而言之，如果您正在编写一个库，它应该适用于所有平台和实现（具有“所有”的合理定义），请使用 usocket。对于 Unix 平台上的其他用例，IOLib 可能更通用。例如，它支持 Unix 域套接字，以及非阻塞 IO。

顺便说一句，我已经将 cl-redis 从 usocket 移植到 IOLib 并返回 - API 非常相似，尽管略有不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T14:05:45.477

USOCKET 的代码比 IOLib 更小更简单，包括依赖项。IOLib 使用 CFFI 绑定到一些 *BSD 中不存在的 Linux 功能，例如。

在所有其他条件相同的情况下，尽可能少的源代码总是更可取，因为它意味着更少的错误，因为它更容易理解和破解。更简单的代码可以更快地调试，并且更容易部署。

除此之外，它们的工作方式似乎大致相同：它们都提供 kqueue/select 来处理单个线程中的多个连接。我不确定更高级的功能，例如在套接字中传递 unix 文件描述符。

我想说，如果您只喜欢 Linux，请使用 IOLib 或 USOCKET；如果您的目标是 Linux 和/或 *BSD，或其他商业操作系统，或者喜欢保持简单和愚蠢，请使用 USOCKET。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T22:31:04.193

如果您的主要目标是可移植性，显然 usockets 是更好的选择，因为正如[本页](http://www.cliki.net/usocket)所述：

> USOCKET 是用于 BSD 样式套接字的网络**可移植层。**

# vba - Vlookup in a User form not working, Cant find string

> ID：13510811
> 
> 赞同：1
> 
> 时间：2012-11-22T10:36:54.740
> 
> 标签：vba, excel, excel-2010

New to VBA, and using it in Excel.

I have a User form, and I am trying to use a lookup to fill TextBox4 from the value that is entered in ComboBox3\. I have the following code which compiles, however it is producing the msgbox to say that the string cant be found...

```
Private Sub ComboBox3_Change()

    Dim strFind As String
    Dim rFound As Range
    ws = "Year-to-Date Summary"

    If ComboBox3.ListIndex > -1 Then
        strFind = ComboBox3
        On Error Resume Next
        With ws.Column(2, 3)
            Set rFound = .Find(What:="strFind", After:=.Cells(39, 49), _
            LookIn:=.Cells(39, 49), LookAt _
            :=.Cells(39, 49), SearchOrder:=xlByRows, SearchDirection:=xlNext, _ 
            MatchCase:= False)
        End With

        If rFound Is Nothing Then
            MsgBox strFind & " cannot be found"
            Exit Sub
        Else
            TextBox4 = rFound(1, 2)
        End If

    End If

End Sub 
```

I also tried Vlookup, however this sprung error messages...

```
Private Sub ComboBox3_Change()

TextBox4.Text = WorksheetFunction.VLookup(Val(ComboBox3.Text), _
Sheets("Year-to-Date Summary").Range("C39:C49" & LastRow), 2, False)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:25:37.747

1.  ws 是一个变体。您不会像这样分配工作表。你必须使用`Set`
2.  strFind 在引号内，因此将被视为字符串

请参阅此示例（**未测试**）

```
Private Sub ComboBox3_Change()
    If ComboBox3.ListIndex = 0 Then Exit Sub

    Dim strFind As String
    Dim ws As Worksheet
    Dim rFound As Range

    Set ws = ThisWorkbook.Sheets("Year-to-Date Summary")

    strFind = ComboBox3.Value

    Set rFound = ws.Columns(3).Find(What:=strFind, LookIn:=xlValues, _
    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)

    If Not rFound Is Nothing Then
        TextBox4 = rFound.Offset(,1)
    Else
        MsgBox strFind & " cannot be found"
    End If
End Sub 
```

如果您的范围是固定的，则更`ws.Columns(3)`改为`ws.Range("C39:C49")` 上面的代码。

如果您想使用工作表功能，那么您可以这样做（**尝试和测试**）

**注意**：我没有在下面的代码中使用错误捕获。我相信你可以解决这个问题。

```
Private Sub ComboBox3_Change()
    If ComboBox3.ListIndex = 0 Then Exit Sub

    TextBox4.Text = Application.WorksheetFunction.VLookup( _
                    Val(ComboBox3.Value), _
                    Sheets("Year-to-Date Summary").Range("C39:D49"), _
                    2, _
                    False _
                    )
End Sub 
```

请注意我们`C39:C49 / Columns(3) + Offset`在第一个示例中的使用方式以及我们`C49:D49`在第二个示例中的使用方式

**编辑**：我忘了评论`On Error Resume Next`从不使用它，除非需要。这就像告诉代码“闭嘴！” 如果发现错误:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:17:13.147

您的 ws 显然是一个字符串，它没有 .column 属性。
替换行`ws = "Year-to-Date Summary"`，
`set ws = worksheets("Year-to-Date Summary")`看看是否有帮助。

您是否确保每个模块都有一个“ `Option Explicit`”并且您的应用程序编译成功？你会发现我认为的那个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:49:01.383

```
Private Sub ComboBox3_Change()

TextBox4.Text = WorksheetFunction.VLookup(Me.ComboBox3.Text, Sheets("Year-to-Date Summary").Range("$B$39:$C$49"), 2, False)

TextBox3.Text = WorksheetFunction.VLookup(Me.TextBox4.Text, Sheets("Year-to-Date Summary").Range("$C$39:$D$49"), 2, False)

End Sub 
```

这对我有用，从组合框中做两个文本框

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T10:46:30.517

私有子 ComboBox3_Change()

```
Dim strFind As String
Dim rFound As Range
Dim ws As Worksheet
Set ws = ActiveWorkbook.Sheets("Year-to-Date Summary")

If ComboBox3.ListIndex > -1 Then
    strFind = ComboBox3.text
    On Error Resume Next 
```

'编辑删除整个 vlookup 部分...'添加 for 循环以搜索范围内的文本

```
 Set rSearch = ws.Range("B:C")            
            For Each rFound In rSearch
                If rFound.Value = strFind Then
                 TextBox4.Text = rFound.value
                else
                 MsgBox strFind & " cannot be found"
                 Exit Sub
                End If                
            Next rFound        
End Sub 
```

# javascript - Button events and click depth

> ID：13510813
> 
> 赞同：4
> 
> 时间：2012-11-22T10:36:58.610
> 
> 标签：javascript, html, css, button

I have buttons which have been given click depth (i.e. they move down a few pixels on :active state) but they are causing problems in that sometimes the button is clicked and nothing happens.

```
<button>Button</button>

button:active {
    margin-top: 5px;
} 
```

I have illustrated the problem in a jsfiddle:

[http://jsfiddle.net/helenst/vUU55/](http://jsfiddle.net/helenst/vUU55/)

In Chrome, there is a thin strip above and below the text, height equal to the click depth, in which click events do not fire. (e.g. try clicking a pixel or two above the 'B') Both mousedown and mouseup are received, but click does not fire.

In Firefox and Opera, there is an area of the same size at the top of the button in which the mouse click does not respond. I find this slightly more logical in that the mousedown is inside the button but the mouseup is outside it. If I click down in this area but drag the mouse back into the button before releasing it, the click is activated.

However, it still doesn't completely make sense - if I wrap a container around the button (so that all button states are contained inside it), and detect events on the container, the problem still occurs.

If I remove the click depth, everything is fine.

I suppose I could make it respond to mousedown events and then detect mouseups on the document, this might get around it - but it violates normal button behaviour and I'd like to have a non-javascript solution. Can anybody help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:56:17.043

If you can make the :active style work using padding-top (or anything inside the border - even setting the border-top to 5px could work, sorry untested). Though of course that breaks your styling somewhat; a background top-aligned horizontal bar image could replace the top border if you need it in there, though a hacky idea).

Apologies, cannot test in newer browsers at present. I've seen this type of button several places before but cannot remember any offhand to test how well they cope with this issue/what code they use.

Almost made this a new answer, but SO is less fond of that: The other alternative that I've seen, though harder to add really big depth (movement), is to use inset and outset in the border styles.

# java - Is there any KV data structure in Java which accepts key in primitive type?

> ID：13510815
> 
> 赞同：0
> 
> 时间：2012-11-22T10:37:04.240
> 
> 标签：java

I need to store information in Key Value manner. But the built-in Map interface cannot fit for my requirement. Java Map requires both Key and Values to be reference, while I need to use primitive value as key.

Is there any data structure something like Map ? Thanks for your help!

**Requirement Details:**

My server written in Java runs as a daemon listening a tcp port. When a user first connect in, details about the user need to be stored in KV manner, and the second time the user connect in, his details should be able to read from the KV data structure.

I cannot use the user object as key, for it will be destructed when disconnect, and reconstructed in the second connection. The two objects are not the same reference. Integer key doesn't fit for my requirement either for the same reason.

In other words, I need to use value as key, not reference.

Keys could be considered are: UUID(long), id(int) and so on. They are all primitive type.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:38:51.090

Still you can go with java Map as wrapper classes are available for all primitive type and java supports auto boxing, So you can use `java.util.Map`. ex -

```
Map<Long,Integer> map = new HashMap<Long,Integer>();
long uuid=10; int i= 10;
map.put(uuid,i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:39:36.923

No, collections don't suport primitive types, so you have to use a wrapper classes for primitive types or array.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:41:56.467

I fail to see why you can't simply wrap your primitive type in it's corresponding non-primitive class and use that as your key in a regular java map.

```
Map<Integer, Object> map = new HashMap<Integer, Object>();
Integer key = Integer.valueOf(5);
Object test = new Object();
map.put(key, test);
Object test2 = map.get(Integer.valueOf(5));

test.equals(test2); // will be true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:38:27.613

What you are looking for is called a Hashmap.

```
Hashmap<Long, Integer> dict=new HashMap<Long, Integer>();
dict.put(24,10);
dict.put(13,63);
dict.get(13); // Equals 63 
```

Essentially, a HashMap will take the first argument as a key, and the second as the value, exactly as you requested. You can assign any type, including a Long for larger integers than normal, although you can't pass primitives. Still, this hasn't ever been an issue for me.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:41:29.413

The `HashMap` class is fine for using key-value pairs, but there is no such thing which accepts primitive types.

We'll still try to use a primitive type in the context of a Map.

```
HashMap<Integer, V> map = new HashMap<>();
map.put(12, someV); 
```

As we write `map.put(12, someV)`, in fact, one cannot use a primitive type as the first argument of the method 'put' of class `java.util.Map`. But in Java, the integer '12' will automatically be *'converted'* (*auto-boxed*) into the correspondenting wrapper class, in this case `Integer`.

So that means that there is actually an **object** of type `Integer` in the `HashMap`, but it is **reflected** as an `int`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T10:49:17.963

various implementations exist elsewhere, but not in the standard java library. See for example [LongHashMap](https://github.com/Bukkit/mc-dev/blob/master/net/minecraft/server/LongHashMap.java).

# security - Azure PaaS communicating with Azure Storage - use SSL or not?

> ID：13510820
> 
> 赞同：1
> 
> 时间：2012-11-22T10:37:17.607
> 
> 标签：security, azure, azure-storage

I have a web role that talks to Azure Storage, Azure Shared Cache Service and Azure SQL Databases. It is only ever the web roles that communicate with these storage mediums, and never the client browser. The Azure Table Storage contains sensitive data, but the cache and SQL databases do not.

Question is, if all data access goes over plain HTTP, is there a risk that someone can intercept my packets, and read my storage key? If so, who can sniff these packets - just Microsoft employees, or do I need to worry about other Azure tenants that might have effected a jailbreak?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:45:28.643

A few things to consider:

*   If your webrole and storage accounts are in the same data center, then the traffic is contained within data center. In that case, going of HTTP would not create any problems IMO. However if the webrole and storage accounts are in different data centers, then definitely make use of HTTPS.
*   Since you never send your storage account key with your requests to storage, you can be assured on that part. What you do is sign the requests using your key (or the storage client library does) and send that signature as a part of your requests. I don't think one would be able to reverse engineer that signature to get your storage account key.

HTH.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:48:56.670

In addition to the previous answers, you should also take a look at the official security whitepaper: [Windows Azure Security Overview](http://download.microsoft.com/download/6/0/2/6028B1AE-4AEE-46CE-9187-641DA97FC1EE/Windows%20Azure%20Security%20Overview%20v1.01.pdf). It talks about how isolation and packet filter secure the communication in the datacenter.

# jquery - jQuery Mobile 多次触发事件

> ID：13510831
> 
> 赞同：0
> 
> 时间：2012-11-22T10:37:36.393
> 
> 标签：jquery, html, ajax, mobile, alert

如果您单击 1-3，那么您将被重定向到另一个站点，该站点位于其自己的文件中。如果您单击 4-6 然后返回并单击 Ahoj 按钮，您将设置字符串“ahoj” 2 次，这不是我想要的。我只想显示一次。你知道问题出在哪里吗？谢谢你的回答。

[http://testepi.kvalitne.cz/demicko/](http://testepi.kvalitne.cz/demicko/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:41:27.937

这样做：

```
$("#tlacitko").off('click').click(function(){
      alert("ahojte");
   }); 
```

或者如果 .off() 不支持，使用 unbind：

```
$("#tlacitko").unbind('click').click(function(){
      alert("ahojte");
   }); 
```

# objective-c - 从应用程序委托在应用程序窗口上添加标签

> ID：13510835
> 
> 赞同：4
> 
> 时间：2012-11-22T10:37:41.307
> 
> 标签：objective-c, ios, xcode4.5

我正在使用 Xcode 4.5 和 iOS 6.0，我从 xcode 中选择了默认的单视图模板，我只想在应用程序窗口上添加标签，但我无法这样做。请纠正我。

```
- (BOOL)application:(UIApplication *)application 
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController"        bundle:nil];
self.window.rootViewController = self.viewController;
label =[[UILabel alloc] initWithFrame:CGRectMake(100, 100, 200, 20)];
label.text = @"Test";
[label setBackgroundColor:[UIColor whiteColor]];
[self.window addSubview:label];
[self.window bringSubviewToFront:label];
[self.window makeKeyAndVisible];
return YES;
} 
```

PS - 我希望我的标签在我的 ViewController 视图之上，即在窗口上，因此尽管窗口呈现的视图发生变化，它仍将始终存在。我不想只在这里显示标签。

我得到了答案

```
[self.window.rootViewController.view addSubview:label]; 
```

谢谢大家指点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:45:54.103

只需删除`RootviewController`.

```
- (BOOL)application:(UIApplication *)application 
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

label =[[UILabel alloc] initWithFrame:CGRectMake(100, 100, 200, 20)];
label.text = @"Test";
[label setBackgroundColor:[UIColor whiteColor]];
[self.window addSubview:label];
[self.window bringSubviewToFront:label];
[self.window makeKeyAndVisible];
return YES;
} 
```

如果您不想只在此处显示标签，请使用如下所示。

```
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController"        bundle:nil];
self.window.rootViewController = self.viewController;

[self.Viewcontroller.view addSubview:label]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T10:44:05.970

将标签添加到 self.window.rootViewController.view 而不是 self.window

```
UILabel *label =[[UILabel alloc] initWithFrame:CGRectMake(100, 100, 200, 20)];
label.text = @"Test"; [label setBackgroundColor:[UIColor whiteColor]];
[self.window.rootViewController.view addSubview:label]; 
```

# android - In Android Disable ONLY HomeKey Button

> ID：13510836
> 
> 赞同：-1
> 
> 时间：2012-11-22T10:37:44.133
> 
> 标签：android

Hi I am looking for disabling the **Only HomeKey** In Android. WHat i am trying to do is

```
@Override
    public void onAttachedToWindow() {
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
        super.onAttachedToWindow();
    }
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {

            return true;
        }

        if (event.getKeyCode() == KeyEvent.KEYCODE_MENU) {
                        //action
        }
        if (event.getKeyCode() == KeyEvent.KEYCODE_HOME) {
                        //action
        }
        if (event.getKeyCode() == KeyEvent.KEYCODE_DPAD_CENTER) {
            //action
        }

        return false;
    } 
```

But by this my back button is too getting disabled. Is there any way to just disable the HomeKey in android. Please reply.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:43:05.177

该[文档](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_HOME)指出：

> 家里的钥匙。此密钥由框架处理，永远不会传递给应用程序。

更具体地说，密钥由方法中的 PhoneWindowManager 使用`interceptKeyBeforeDispatching(..)`。在此方法中，密钥被处理和使用，这意味着 Android 不允许覆盖此功能。

更新：

你的背部行为不再起作用的原因是你自己已经处理好了。密钥进入`onKeyDown`- 方法，您可以通过返回 true 或 false 来使用密钥（是或否）。通过实现这一点：

```
 if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {

       return true;
 } 
```

您明确声明您已经处理了您的 Back 键，`Activity`这也意味着“返回”的默认行为被覆盖。要恢复其原始行为，请使用`return super.onKeyDown(keyCode, event);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:42:58.240

对的，这是可能的。在你的清单中，在你的活动减速下，替换

```
<category android:name="android.intent.category.LAUNCHER" /> 
```

和

```
<category android:name="android.intent.category.HOME" /> 
```

请注意，通过此更改，您的应用程序将不会在“所有应用程序”部分中显示。此外，用户需要将您的应用程序设置为默认主屏幕。试试“Toddler Lock”应用程序，它可以很好地处理这种情况。

# r - 替换 ffdf 对象中的 NA

> ID：13510838
> 
> 赞同：2
> 
> 时间：2012-11-22T10:37:51.623
> 
> 标签：r, flat-file, ff, ffbase

我正在使用在某些列中具有 NA 的 ffdf 对象。NA 是使用*merge.ffdf*进行左外部合并的结果。我想用 0 替换 NA，但无法做到。这是我正在运行的代码：

```
 library(ffbase)
    deals <- merge(deals,rk,by.x=c("DEALID","STICHTAG"),by.y=c("ID","STICHTAG"),all.x=TRUE)
    attributes(deals)
    $names
    [1] "virtual"   "physical"  "row.names"
    $class
    [1] "ffdf"

vmode(deals$CREDIT_R)
[1] "double"

    idx <- ffwhich(deals,is.na(CREDIT_R)) # CREDIT_R is one of the columns with NAs
    deals.strom[idx,"CREDIT_R"]<-0
    error in `[<-.ffdf`(`*tmp*`, idx, "CREDIT_R", value = 0) : 
      ff/ffdf-iness of value and selected columns don't match 
```

知道我做错了什么吗？一般来说，我想了解更多关于替换 ff 和 ffdf 类的方法。有什么建议可以让我找到有关该主题的一些示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:51:58.447

ff 包的手册中指出了一个名为 ffindexset 的函数。

```
idx <- is.na(deals$CREDIT_R) ## This uses is.na.ff_vector from ffbase
idx <- ffwhich(idx, idx == TRUE) ## Is part of ffbase
deals$CREDIT_R <- ffindexset(x=deals$CREDIT_R, index=idx, value=ff(0, length=length(idx), vmode = "double")) ## Is part of ff
deals$CREDIT_R[idx] <- ff(0, length=length(idx), vmode = "double") ## this one will probably also work 
```

也看看 ?Extract.ff

# html - Twitter bootstrap collapse issue in Internet Explorer

> ID：13510840
> 
> 赞同：3
> 
> 时间：2012-11-22T10:38:08.637
> 
> 标签：html, css, internet-explorer, browser, twitter-bootstrap

I am using Twitter Bootstrap responsive css in my web application.This is used in HTML Template with MustacheJS I have "collapse" and that is not working properly in IE-9 This is the code

```
<div class="accordion-heading">
<a class="accordion-toggle" data-parent="#divInsurerList" data-toggle="collapse" href="#collapseOne{{_id}}">
    <span rel="tooltip" title="DELETE"><label id="insDeleteView" class="icon-trash"></label></span>
    <span rel="tooltip" title="EDIT"><label id="insUpdateView" class="icon-edit"></label></span>

            <divclass="" style="display: table-cell">{{Name}}</div>
</a>
</div>
<div id="collapseOne{{_id}}" class="accordion-body collapse" style="height: 0px; ">
<div class="accordion-inner">
    <div class="row-fluid">
        <div class="span2">Name</div>
            {{#isEdit}}<div class="span8"><input id="Name" class="span12" type="text" value="   {{Name}}" /><label id="updateins"></label></div>  <div class="span1"><sup style="color: #a5072e"><b>*</b></sup></div><br />{{/isEdit}}
            {{^isEdit}}<div class="name span9">{{Name}}</div>
        <br />{{/isEdit}}
    </div>
    {{#isEdit}}<button id="insSaveView" class="btn btn-primary">Save</button>&nbsp;
    <button id="insCancel" class="btn">Cancel</button>{{/isEdit}}
</div>
</div> 
```

There is a **DELETE** and **EDIT** icon in `<div class="accordion-heading">` on click of each of these icon,either a deleteTemplate or an editTemplate are supposed lo load and accordion expands. so that `<div id="collapseOne{{_id}}" class="accordion-body collapse" style="height: 0px; ">` becomes `<div id="collapseOne{{_id}}" class="accordion-body in collapse" style="height: auto; ">` (class "in" and height:auto) this is working fine in chrome and firefox, issue is in IE. **That is on clicking EDIT icon content in accordion is not "opening"** Collapse was initially broken in IE which i fixed by modifying bootstrap Css as shown

```
.collapse {
position: relative;
height: 0;
overflow: hidden;
//overflow: visible \9;
-webkit-transition: height 0.35s ease;
 -moz-transition: height 0.35s ease;
   -o-transition: height 0.35s ease;
      transition: height 0.35s ease;
} 
```

Can anyone say why accordion is not working on "click" of EDIT icon?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:40:53.117

我不相信 // 注释在 CSS 中起作用。使用 /* 注释 */

# iframe - WHY VIDEO IS NOT SHOWING ON PHOTO CLICK?

> ID：13510843
> 
> 赞同：1
> 
> 时间：2012-11-22T10:38:14.097
> 
> 标签：iframe

I have written the code...I want to open a youtube video in popup using iframe by clicking on the photo.below is the code i have written. I have written the code...I want to open a youtube video in popup using iframe by clicking on the photo.below is the code i have written.

```
<iDOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

        <script></script>
    </head>

    <body>
        <div data-role="page" id="page1">
                <div data-role="div" id="div1"> 
                    <img src="image1.jpg" onclick="play()" width="200px" height="200px" id="Zu5XUbig5G0">   
                </div>
                    <div data-role="footer" data-position="fixed">
                        <a href="#popup2"><h4>Featured</h4></a>
                    </div>

        </div>

        <div data-role="popup" id="popup2" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15">

                <script>
                    function play()
                    {
                    var vid=document.getElementById("div1").getElementsByTagName('img')[0].id;
                    //alert(vid);
                        {
                        alert(vid);
                       document.getElementById("popup2").innerHTML="<iframe src='http://www.youtube.com/embed/tyOy3kRzkcM' width='480' height='320' seamless='' id='plyerIframe1'></iframe>";
                        //alert(vid);
                        }   
                    }
                </script>                           

        </div>

    </body>

</html> 
```

# c# - Linq where 子句只比较没有时间值的日期值

> ID：13510849
> 
> 赞同：61
> 
> 时间：2012-11-22T10:38:25.883
> 
> 标签：c#, entity-framework, datetime, linq-to-entities, compare

```
var _My_ResetSet_Array = _DB
    .tbl_MyTable
    .Where(x => x.Active == true
        && x.DateTimeValueColumn <= DateTime.Now)
    .Select(x => x); 
```

上面的查询工作正常。
但我只想检查日期值。
但上层查询检查日期+时间值。

在传统的 mssql 中，我可以编写如下查询。

```
SELECT * FROM dbo.tbl_MyTable
WHERE 
CAST(CONVERT(CHAR(10), DateTimeValueColumn, 102) AS DATE) <= 
            CAST(CONVERT(CHAR(10),GETDATE(),102) AS DATE)
AND
Active = 1 
```

那么任何人都可以给我建议我如何只检查 Linq 中的日期值。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-11-12T17:08:33.760

EF 6.0中也有`EntityFunctions.TruncateTime`or**`DbFunctions.TruncateTime`**

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-22T11:35:03.993

**解决此问题的简单解决方法，仅比较日期部分**

```
var _My_ResetSet_Array = _DB
                    .tbl_MyTable
                    .Where(x => x.Active == true && 
                               x.DateTimeValueColumn.Year == DateTime.Now.Year
                            && x.DateTimeValueColumn.Month == DateTime.Now.Month
                            && x.DateTimeValueColumn.Day == DateTime.Now.Day); 
```

因为 linq to entity 不支持 'Date' 数据类型，其中 Year、Month 和 Day 是 'int' 数据类型并且受支持。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T10:41:51.260

**编辑**

为避免此错误：LINQ to Entities 不支持指定的类型成员“日期”。仅支持初始化程序、实体成员和实体导航属性。

```
var _My_ResetSet_Array = _DB
                .tbl_MyTable
                .Where(x => x.Active == true)
                         .Select(x => x).ToList();

 var filterdata = _My_ResetSet_Array
        .Where(x=>DateTime.Compare(x.DateTimeValueColumn.Date, DateTime.Now.Date)  <= 0 ); 
```

第二行是必需的，因为 LINQ to Entity 无法将日期属性转换为 sql 查询。所以最好先获取数据然后应用日期过滤器。

**编辑**

如果您只想比较日期时间的日期值而不是使用

[`DateTime.Date`属性](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)- 获取此实例的日期组件。

给你的代码

```
var _My_ResetSet_Array = _DB
                .tbl_MyTable
                .Where(x => x.Active == true
     && DateTime.Compare(x.DateTimeValueColumn.Date, DateTime.Now.Date)  <= 0 )
                         .Select(x => x); 
```

* * *

如果是这样，那么使用

[DateTime.Compare 方法](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)- 比较 DateTime 的两个实例并返回一个整数，指示第一个实例是早于、相同还是晚于第二个实例。

给你的代码

```
var _My_ResetSet_Array = _DB
                .tbl_MyTable
                .Where(x => x.Active == true
                  && DateTime.Compare(x.DateTimeValueColumn, DateTime.Now)  <= 0 )
                         .Select(x => x); 
```

例子

```
DateTime date1 = new DateTime(2009, 8, 1, 0, 0, 0);
DateTime date2 = new DateTime(2009, 8, 1, 12, 0, 0);
int result = DateTime.Compare(date1, date2);
string relationship;

if (result < 0)
   relationship = "is earlier than";
else if (result == 0)
   relationship = "is the same time as";         
else
   relationship = "is later than"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-09T06:15:22.997

```
 result = from r in result where (r.Reserchflag == true && 
    (r.ResearchDate.Value.Date >= FromDate.Date && 
     r.ResearchDate.Value.Date <= ToDate.Date)) select r; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-08T19:10:50.493

> `&& x.DateTimeValueColumn <= DateTime.Now`

只要您的架构正确，就支持此功能

```
&& x.DateTimeValueColumn.Value.Date <=DateTime.Now 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-09T11:32:03.133

在类似的情况下，我使用了以下代码：

```
DateTime upperBound = DateTime.Today.AddDays(1); // If today is October 9, then upperBound is set to 2012-10-10 00:00:00
return var _My_ResetSet_Array = _DB
    .tbl_MyTable
    .Where(x => x.Active == true
        && x.DateTimeValueColumn < upperBound) // Accepts all dates earlier than October 10, time of day doesn't matter here
    .Select(x => x); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-21T19:07:52.113

工作代码：

```
 {
        DataBaseEntity db = new DataBaseEntity (); //This is EF entity
        string dateCheck="5/21/2018";
        var list= db.tbl
        .where(x=>(x.DOE.Value.Month
              +"/"+x.DOE.Value.Day
              +"/"+x.DOE.Value.Year)
             .ToString()
             .Contains(dateCheck))
     } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-21T07:13:16.303

试试这个，

```
var _My_ResetSet_Array = _DB
    .tbl_MyTable
    .Where(x => x.Active == true
         && x.DateTimeValueColumn <= DateTime.Now)
    .Select(x => x.DateTimeValueColumn)
    .AsEnumerable()
    .select(p=>p.DateTimeValueColumn.value.toString("YYYY-MMM-dd"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-06T15:43:21.490

不要简化代码以避免“linq 翻译错误”：测试包含时间为 0:0:0 的日期和时间为 23:59:59 的同一日期

```
 iFilter.MyDate1 = DateTime.Today;  // or DateTime.MinValue

        // GET 
        var tempQuery = ctx.MyTable.AsQueryable();

        if (iFilter.MyDate1 != DateTime.MinValue)
        {
            TimeSpan temp24h = new TimeSpan(23,59,59);
            DateTime tempEndMyDate1 = iFilter.MyDate1.Add(temp24h);

            // DO not change the code below, you need 2 date variables...
            tempQuery = tempQuery.Where(w => w.MyDate2 >= iFilter.MyDate1
                                          && w.MyDate2 <= tempEndMyDate1);
        }

        List<MyTable> returnObject = tempQuery.ToList(); 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2012-11-22T10:42:13.440

仅用于`mydate.Date`处理 DateTime 类的日期部分。

# html - JSP multi browser compatibility

> ID：13510854
> 
> 赞同：0
> 
> 时间：2012-11-22T10:38:34.273
> 
> 标签：html, jsp

Any ideas to make JSP and HTML codes comply with all browsers? I tried to add the following lines on top of the .jsp page but apparenty, it didn't work:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/html4/strict.dtd">
<meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
```

# vb.net - VB.NET - 尝试编写文本文件时出现问题

> ID：13510856
> 
> 赞同：1
> 
> 时间：2012-11-22T10:38:38.717
> 
> 标签：vb.net, visual-studio, text, text-files, streamwriter

尝试删除/创建/写入此文件时遇到问题。

**错误：**

```
The process cannot access the file 'C:\Users\Administrador\AppData\Local\Temp\PlayList_temp.txt' because it is being used by another process. 
```

**调试器突出显示的行：**

```
If System.IO.File.Exists(Temp_file) = True Then System.IO.File.Delete(Temp_file)
System.IO.File.Create(Temp_file) 
```

（两者中的任何一个，如果我删除一行，另一行采用相同的错误 id）

**子：**

```
Public Sub C1Button2_Click(sender As Object, e As EventArgs) Handles Button1.Click

        If Not playerargs = Nothing Then

        Dim Str As String
        Dim Pattern As String = ControlChars.Quote
        Dim ArgsArray() As String
        Dim Temp_file As String = System.IO.Path.GetTempPath & "\PlayList_temp.txt"
        Dim objWriter As New System.IO.StreamWriter(Temp_file)

        Str = Replace(playerargs, " " & ControlChars.Quote, "")
        ArgsArray = Split(Str, Pattern)

        If System.IO.File.Exists(Temp_file) = True Then System.IO.File.Delete(Temp_file)
        System.IO.File.Create(Temp_file)

    For Each folder In ArgsArray
        If Not folder = Nothing Then
            Dim di As New IO.DirectoryInfo(folder)
            Dim files As IO.FileInfo() = di.GetFiles("*")
                Dim file As IO.FileInfo

            For Each file In files
                ' command to writleline
                'Console.WriteLine("File Name: {0}", file.Name)
                'Console.WriteLine("File Full Name: {0}", file.FullName)
                objWriter.Write(file.FullName)
                objWriter.Close()
            Next
        End If
        Next

    If randomize.Checked = True Then
            RandomiseFile(Temp_file)
    End If

    Process.Start(userSelectedPlayerFilePath, playerargs)
    If autoclose.Checked = True Then
        Me.Close()
    End If
    Else
    MessageBox.Show("You must select at least one folder...", My.Settings.APPName)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:45:12.000

首先，**File.Create**创建或覆盖指定的文件，因此您之前不需要删除它。
其次，像您一样初始化**StreamWriter**会阻塞文件，因此您无法在之后重新创建它。
因此，只需在 File.Create 之后移动 StreamWriter 初始化，或者更好的是，完全删除 File.Create 并使用覆盖文件的[StreamWriter 重载](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)

```
....
If Not playerargs = Nothing Then
    ....
    Dim Temp_file As String = System.IO.Path.GetTempPath & "\PlayList_temp.txt"

    Using objWriter As New System.IO.StreamWriter(Temp_file, false)
        For Each folder In ArgsArray
            If Not folder = Nothing Then
                Dim di As New IO.DirectoryInfo(folder)
                Dim files As IO.FileInfo() = di.GetFiles("*")
                Dim file As IO.FileInfo
                For Each file In files
                    ' command to writleline
                    'Console.WriteLine("File Name: {0}", file.Name)
                    'Console.WriteLine("File Full Name: {0}", file.FullName)
                    objWriter.Write(file.FullName)
                    ' objWriter.Close() 
                Next
            End If
        Next
    End Using ' Flush, close and dispose the objWriter
    .... 
```

还注意到您在循环内关闭了编写器，在工作完成后使用 Using 语句正确关闭编写器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:46:42.277

```
The process cannot access the file 'C:\Users\Administrador\AppData\Local\Temp\PlayList_temp.txt' because it is being used by another process. 
```

这意味着该文件已打开或被另一个进程使用。

打开您的任务管理器并检查文件是否存在，然后将其关闭或单工结束进程。

我有同样的问题，但我通过关闭文件解决了。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:54:12.007

从您的详细信息来看，如果文件存在并创建一个新文件，您似乎愿意删除。

我建议删除这一行：

```
 System.IO.File.Create(Temp_file) 
```

并将这条线移动到流写入器线上：

```
If System.IO.File.Exists(Temp_file) = True Then System.IO.File.Delete(Temp_file) 
```

这样的事情会帮助你：

部分代码：

```
Dim Temp_file As String = System.IO.Path.GetTempPath & "\PlayList_temp.txt"

' Delete file if exists
If System.IO.File.Exists(Temp_file) = True Then System.IO.File.Delete(Temp_file)    

' Create file for write.
Dim objWriter As New System.IO.StreamWriter(Temp_file)

Str = Replace(playerargs, " " & ControlChars.Quote, "")
ArgsArray = Split(Str, Pattern)
...
...
... 
```

# magento - Magento：类别的顺序不会反映在前端

> ID：13510858
> 
> 赞同：0
> 
> 时间：2012-11-22T10:38:44.320
> 
> 标签：magento, magento-1.4

我在 Magento 1.4.1.1 上。类别的顺序不会反映在**某些类别**的前端。

我通过在“管理类别”页面左侧的类别树中拖放类别来对类别进行排序。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:22:31.197

好吧，我可以建议尝试更新到最新版本 1.7.0，如果社区并且您可以拥有一些定制的类别模板，如果是这种情况，您将永远不会看到您订购的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:30:29.987

您是否重新索引目录，在前端您是类别列表的默认 magento 代码吗？

# android - adb 命令获取设备的网络类型

> ID：13510865
> 
> 赞同：0
> 
> 时间：2012-11-22T10:39:02.773
> 
> 标签：android, networking, adb

是否有任何 adb 命令可以在 android 中获取设备的网络类型（如 CDMA、GSM、LTE、EVDO）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T16:21:47.397

当前连接类型存储在 gsm.network.type 系统属性中。所以

```
getprop gsm.network.type 
```

# jquery - jquery中的全局函数

> ID：13510869
> 
> 赞同：0
> 
> 时间：2012-11-22T10:39:08.840
> 
> 标签：jquery

我无法在此代码中访问 ok 变量。如何设置此变量以进行全局访问

```
$('#Btn1').click(function(){
var ok=true;
});
$('#Btn2').click(function(){
 if ( ok ) alert('ok');
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:40:46.260

删除`var`并在外部范围内声明变量：

```
var ok = false;
$('#Btn1').click(function() {
    ok = true;
});
$('#Btn2').click(function() {
    if(ok) alert('ok');
}); 
```

虽然删除`var`足以使变量成为全局变量，但最好将其保持在尽可能小的范围内——在这种情况下，这就是包含这两个函数的范围。由于您可能将该代码包装在*文档就绪*回调函数中，因此它将是该函数的范围而不是全局范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:32:19.123

尝试这个：

```
// this is a global variable
var isValidGlobal = false;

$(function() {
    // since this is global, i can alert it here
    alert(isValidGlobal);

    $('#Btn1').click(function() {
        // Set the global variable
        isValidGlobal = true;
        return false;
    });

    $('#Btn2').click(function() {

        if (isValidGlobal) alert('global variable');
        return false;
    });
});​ 
```

**[演示](http://jsfiddle.net/aaWyC/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:49:26.200

虽然使用全局变量可以正常工作，但如果您的目标只是知道是否单击了第一个按钮，更好（和更多 jQuery-ish）方法是使用 jQuery 将该数据存储为按钮本身的一部分`.data()`方法。

为了使其更加灵活，您甚至可以保存单击按钮的次数，然后在单击另一个按钮时检查该值：

```
$('#Btn1').click(function(){
    $(this).data("click_count", (parseInt($(this).data("click_count")) || 0) + 1);
});

$('#Btn2').click(function(){
    var clickCount = (parseInt($('#Btn1').data("click_count")) || 0);
    if (clickCount > 0) {
        alert("clicked at least once");
    }
})​ 
```

[现场测试用例](http://jsfiddle.net/aaWyC/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:41:14.320

只需在处理程序之外声明 ok 变量

```
var ok=false;
$('#Btn1').click(function(){
  ok =true;
});
$('#Btn2').click(function(){
 if ( ok ) alert('ok');
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:41:53.563

要在 JavaScript 中创建全局函数，请省略 var：

```
ok = true; 
```

然而，更好的风格是在两个函数的范围内声明变量，但在它自己的命名空间中，以避免命名空间污染：

```
function () {
    var ok = false;
    $('#Btn1').click(function(){
        ok=true;
    });
    $('#Btn2').click(function(){
        if ( ok ) alert('ok');
    });
} 
```

（编辑：格式化）

# iphone - 想要在 UIBarButtonItem 旁边添加 UIActivityIndi cator

> ID：13510870
> 
> 赞同：0
> 
> 时间：2012-11-22T10:39:11.837
> 
> 标签：iphone, objective-c, ios, xcode

如何在右侧栏按钮项（CreateNew 按钮）旁边添加活动指示器？

![在此处输入图像描述](../Images/d5ba4187dd4ce8e9feada36d81cf54f9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:54:31.137

您可以使用的一种方法是使用一些自定义视图初始化 Bar Button。

可以帮助您获得一些提示的最低条码是

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    UIView* aView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 120, 40)];
    [aView setBackgroundColor:[UIColor blackColor]];
    [[aView layer] setCornerRadius:8.0f];
    [[aView layer] setBorderColor:[UIColor whiteColor].CGColor];

    UIActivityIndicatorView* loadView  = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    [loadView startAnimating];
    [aView addSubview:loadView];
    [loadView setFrame:CGRectMake(5, 5, 30, 30)];
    [loadView release];

    UIButton* aButton = [[UIButton alloc] initWithFrame:CGRectMake(30, 2, 80, 35)];
    [aButton setImage:[UIImage imageNamed:@"btnLogin.png"] forState:UIControlStateNormal];
    [aView addSubview:aButton];
    [aButton release];

    UIBarButtonItem * barButton = [[UIBarButtonItem alloc] initWithCustomView:aView];
    [self.navigationItem setRightBarButtonItem:barButton];
    [aView release];
    [barButton release];

} 
```

这是如果您以编程方式执行此操作，否则您也可以使用 nib。以这种方式创建条形按钮将如下所示 -

![在此处输入图像描述](../Images/73084107735d5245232f71eab75cff67.png)

`[[UIBarButtonItem alloc] initWithCustomView:aView];`您可以使用 of方法 寻找更多选项。

希望能帮助到你！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:55:32.380

您可以使用以下代码添加活动指示器：

```
 //Create an instance of activity indicator view
    UIActivityIndicatorView * activityIndicator = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];

    //set the initial property
    [activityIndicator stopAnimating];
    [activityIndicator hidesWhenStopped];

    //Create an instance of Bar button item with custome view which is of activity indicator
    UIBarButtonItem * barButton = [[UIBarButtonItem alloc] initWithCustomView:activityIndicator];
    //Set the bar button the navigation bar
    [self navigationItem].rightBarButtonItem = barButton;

    //Memory clean up
    [activityIndicator release];
    [barButton release]; 
```

详细代码请参考此[链接](http://www.imthi.com/blog/programming/add-uiactivityindicatorview-to-uinavigationbar.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:52:22.783

For this try to customize `UINavigationController` Class.

Add Activity Indicator on **navigationBar** and control it from your `ViewController`.

# android - 如何在开始新活动时放置进度条

> ID：13510872
> 
> 赞同：3
> 
> 时间：2012-11-22T10:39:12.820
> 
> 标签：android, android-asynctask, android-activity, android-progressbar

我有两个活动**A**和**B**。我用意图从**A**跳到**B**。现在在**B**。

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_main);

   LoadData();
} 
```

现在`LoadData()`，我必须加载大量数据，我希望它在 B 启动时显示**进度条**，在加载数据后，它会跳回我的活动 B。我该怎么做？这是我的加载功能

```
public void LoadData(Context context)
    {

        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '"
                + ("1") + "'";
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                + " COLLATE LOCALIZED ASC";

        ContentResolver cr = getContentResolver();
        // ContactsContract.Contacts.
        // Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
        // null, null, ContactsContract.Contacts.DISPLAY_NAME);
        // Find the ListView resource.

        Cursor cur;
        cur = context.getContentResolver().query(
                ContactsContract.Contacts.CONTENT_URI,
                null,
                selection + " AND "
                        + ContactsContract.Contacts.HAS_PHONE_NUMBER + "=1",
                null, sortOrder);

        mainListView = (ListView) findViewById(R.id.mainListView);

        // When item is tapped, toggle checked properties of CheckBox and
        // Planet.
        mainListView
                .setOnItemClickListener(new AdapterView.OnItemClickListener()
                {
                    public void onItemClick(AdapterView<?> parent, View item,
                            int position, long id)
                    {
                        ContactsList planet = listAdapter.getItem(position);
                        planet.toggleChecked();
                        PlanetViewHolder viewHolder = (PlanetViewHolder) item
                                .getTag();
                        viewHolder.getCheckBox().setChecked(planet.isChecked());
                    }
                });

        // Create and populate planets.
        planets = (ContactsList[]) getLastNonConfigurationInstance();
        // planets = new Planet[10];
        // planets.Add("asdf");
        ArrayList<ContactsList> planetList = new ArrayList<ContactsList>();
        String phoneNumber = null;
        String phoneType = null;

        count = cur.getCount();
        contacts = new ContactsList[count];

        if (planets == null)
        {
            if (cur.getCount() > 0)
            {
                planets = new ContactsList[cur.getCount()];
                int i = 0;
                //
                while (cur.moveToNext())
                {
                    String id = cur.getString(cur
                            .getColumnIndex(ContactsContract.Contacts._ID));
                    String name = cur
                            .getString(cur
                                    .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    if (Integer
                            .parseInt(cur.getString(cur
                                    .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
                    {
                        // Query phone here. Covered next
                        Cursor pCur = cr
                                .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                                        null,
                                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                                + " = ?", new String[]
                                        { id }, null);

                        // WHILE WE HAVE CURSOR GET THE PHONE NUMERS
                        while (pCur.moveToNext())
                        {
                            // Do something with phones
                            phoneNumber = pCur
                                    .getString(pCur
                                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA));

                            phoneType = pCur
                                    .getString(pCur
                                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

                            Log.i("Pratik", name + "'s PHONE :" + phoneNumber);
                            Log.i("Pratik", "PHONE TYPE :" + phoneType);
                        }
                        pCur.close();
                    }

                    if (phoneNumber != null
                            && !planetList.contains(new ContactsList(name,
                                    phoneNumber)))
                    {
                        planets = new ContactsList[]
                        { new ContactsList(name, phoneNumber) };

                        contacts[i] = planets[0];
                        planetList.addAll(Arrays.asList(planets));
                    }
                    phoneNumber = null;
                    i++;
                }
            }

            // for (int i = 0; i < count; i++)
            // {
            // Log.d("New Selected Names : ", contacts[i].getName());
            // }
        }

        // Set our custom array adapter as the ListView's adapter.
        listAdapter = new PlanetArrayAdapter(this, planetList);
        mainListView.setAdapter(listAdapter);

        Adapter adptr;
        adptr = mainListView.getAdapter();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:01:29.967

请试试这个 **/////////////////////////////////////// ///////////////// 编辑检查**

```
public class LoadData extends AsyncTask<Void, Void, Void> {
    ProgressDialog progressDialog;
    //declare other objects as per your need
    @Override
    protected void onPreExecute()
    {

        progressDialog= new ProgressDialog(YourActivity.this);
        progressDialog.setTitle("Please Wait..");
        progressDialog.setMessage("Loading");
        progressDialog.setCancelable(false);
        progressDialog.show();

        //do initialization of required objects objects here                
    };      
    @Override
    protected Void doInBackground(Void... params)
    {   
       LoadData();
         //do loading operation here  
        return null;
    }       
    @Override
    protected void onPostExecute(Void result)
    {
        super.onPostExecute(result);
        progressDialog.dismiss();
    };
 } 
```

您可以使用

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_main);

   LoadData task = new LoadData();
   task.execute();
} 
```

**如需更多帮助，请阅读 android 文档** [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:21:37.803

您只需要在另一个线程中调用您的 LoadData() 方法。

```
 @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_main);

        mDailog = ProgressDialog.show(ActivityA.this, "",
                        "Loading data....!!!", true);
                mDailog.show();

        new Thread() {
                            @Override
                            public void run() {
                                try {
                                      LoadData();
                                } catch (Exception e) {
                                    // TODO: handle exception
                                    e.printStackTrace();
                                }
                            }
                        }.start();

    } 
```

在您的 LoadData() 内部，在方法结束时使用处理程序发送消息以关闭进度条对话框。

希望这将帮助您避免使用 AsyncTask 的复杂逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:54:46.013

我同意 Kanaiya 的回答，因为在 API 级别 10 之前，可以在 UI 线程上调用长时间运行的任务。但从 API-11 开始，任何需要较长时间（几乎超过 5 秒）才能完成的任务都必须在后台线程上完成。这背后的原因是任何在 UI 线程上花费 5 秒或更长时间的任务，然后是 ANR（应用程序无响应），即强制关闭发生。为此，我们创建了一些后台线程或简单地使用 AsyncTask。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:05:05.390

尝试这个。

```
public class BActivtiy extends Activity implements Runnable{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.list_main);

        mainListView = (ListView) findViewById(R.id.mainListView);

        mainListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View item, int position, long id) {
                ContactsList planet = listAdapter.getItem(position);
                planet.toggleChecked();
                PlanetViewHolder viewHolder = (PlanetViewHolder) item.getTag();
                viewHolder.getCheckBox().setChecked(planet.isChecked());
            }
        });

        pd = ProgressDialog.show(BActivity.this, "Title", "Description", true);
        Thread t = new Thread(BActivity.this);
        t.start();
    }

    public void LoadData() {

        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + ("1") + "'";
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";
        ContentResolver cr = getContentResolver();

        Cursor cur;
        cur = this.getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, selection + " AND " + ContactsContract.Contacts.HAS_PHONE_NUMBER + "=1", null, sortOrder);

        // Create and populate planets.
        planets = (ContactsList[]) getLastNonConfigurationInstance();
        // planets = new Planet[10];
        // planets.Add("asdf");
        ArrayList<ContactsList> planetList = new ArrayList<ContactsList>();
        String phoneNumber = null;
        String phoneType = null;
        count = cur.getCount();
        contacts = new ContactsList[count];
        if (planets == null) {
            if (cur.getCount() > 0) {
                planets = new ContactsList[cur.getCount()];
                int i = 0;
                while (cur.moveToNext()) {
                    String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                    String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                        // Query phone here. Covered next
                        Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);

                        // WHILE WE HAVE CURSOR GET THE PHONE NUMERS
                        while (pCur.moveToNext()) {
                            // Do something with phones
                            phoneNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA));
                            phoneType = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
                            Log.i("Pratik", name + "'s PHONE :" + phoneNumber);
                            Log.i("Pratik", "PHONE TYPE :" + phoneType);
                        }
                        pCur.close();
                    }

                    if (phoneNumber != null && !planetList.contains(new ContactsList(name, phoneNumber))) {
                        planets = new ContactsList[] { new ContactsList(name, phoneNumber) };
                        contacts[i] = planets[0];
                        planetList.addAll(Arrays.asList(planets));
                    }
                    phoneNumber = null;
                    i++;
                }
            }

            // for (int i = 0; i < count; i++)
            // {
            // Log.d("New Selected Names : ", contacts[i].getName());
            // }
        }
    }

    @Override
    public void run() {
        LoadData();
        mHandler.sendEmptyMessage(0);
    }

    public Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            super.handleMessage(msg);
            pd.dismiss();
            listAdapter = new PlanetArrayAdapter(BActivtiy.this, planetList);
            mainListView.setAdapter(listAdapter);
            Adapter adptr;
            adptr = mainListView.getAdapter();
        }
    };
} 
```

# java - 在 Java 中传递和返回数组值

> ID：13510873
> 
> 赞同：0
> 
> 时间：2012-11-22T10:39:20.293
> 
> 标签：java, android, android-layout, android-intent

当用户单击一个按钮时，我试图用 x 个随机数填充一个数组`(50,100,200...)`并将它们返回以将它们传递给其他类，我的查询是

1）如何调用随机类

2）如何将填充的数组从随机类返回给`onClick`方法。

```
 public void onClick(View v) {

 if(v.getId()==R.id.buttonone)
 {
 genrandom grandom =new genrandom();
 int[] arr=new int[50]; 
```

// 这个数组将被用作其他类的参数

```
public class gen_random_number {

public void genrandom(int[] arr, int x) { 

Random randomGenerator = new Random();
  for (int idx = 1; idx <= x; ++idx){
       int randomInt = randomGenerator.nextInt(5000);
                                    }       
     }  
  } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:43:32.453

创建一个**gen_random_number 的实例**并调用`getrandom()`将您的**数组**和**x**作为**参数**传递。

```
 public void onClick(View v) {
     if(v.getId()==R.id.buttonone)
     {
       genrandom grandom =new genrandom();
       int[] arr=new int[50];
       arr = new  gen_random_number().genrandom(arr, yourXvalue);
   } 
```

将**genrandom**的**返回类型**设为.**`int array`**

 **```
public int[] genrandom(int[] arr, int x) { 

Random randomGenerator = new Random();
  for (int idx = 1; idx <= x; ++idx){
       int randomInt = randomGenerator.nextInt(5000);
          arr[idx] =randomInt;                        }       
     }  
     return arr;
  } 
```**

# c# - C# - 如何实时注册onMouseClick？

> ID：13510875
> 
> 赞同：0
> 
> 时间：2012-11-22T10:39:22.373
> 
> 标签：c#, mouseevent, picturebox

我正在编写一个愚蠢的小程序（就像我们不时做的那样）来处理一些基本的 C# 编码。正如我确定您可以看到的那样，单击鼠标，图片移动，直到它位于单击鼠标的位置。这一点工作正常。然后我希望图片框随机移动，我也做到了！我遇到的下一个问题是，当我单击时，图片框不会移动到新的鼠标坐标，而是继续随机移动。对此的任何帮助将不胜感激！这是我认为是问题的代码。

非常感谢！

约翰

```
protected override void OnMouseClick(MouseEventArgs e)
{
    base.OnMouseClick(e);
    int destX = e.X;
    int destY = e.Y;

        HasArrived = false;

    while (HasArrived == false)
    {
    moveImage(destX, destY, pictureBox1);

        if (pictureBox1.Left == destX && pictureBox1.Top == destY)
        {
            HasArrived = true;
            while (HasArrived == true)
            {
                randomMove(pictureBox1);
                hungry1 += 1;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:13:42.053

你被困在你的内心循环中！尝试将循环放在后台工作程序中，以便您可以识别新的鼠标单击以将 HasArrived 设置为 true。

在积极的while语句中使用否定的while语句对我来说似乎很糟糕，我以前从未见过。我不认为这会很好..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:05:12.850

可能是因为 HasArrived 永远不会在任何地方设置为 false ？但这也意味着你也会陷入移动循环。

编辑：如果您只想在移动到单击的位置后随机移动一次，则删除随机位周围的 while，否则您将需要一些其他变量来知道何时中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:11:23.677

您的内部循环似乎有问题。

```
 HasArrived = true;
        while (HasArrived == true)
        {
            randomMove(pictureBox1);
            hungry1 += 1;
        } 
```

除非 randomMove() 可以修改 HasArrived，否则您的循环永远不会将 HasArrived 设置为 false，因此 while 条件始终为真，您将永远不会退出循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:12:05.003

我看起来像它，因为一旦图片移动到它的目的地，你的程序就会卡在一个紧凑的 while 循环中，它永远不会逃脱

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T11:14:39.180

首先，你永远不应该用布尔表达式测试变量的相等性。这意味着`HasArrived == false`不好，最好这样写：

```
while (!HasArrived)
{
    // ...
    while (HasArrived)
    {
    }
} 
```

问题是您的程序在单击鼠标一次后不会将控制权交还给表单。

让我来说明一下，单击鼠标后您的程序会做什么：

1.  记住新的 x 和 y 坐标
2.  图片还没到，移动图片
3.  如果图片已经到达它的目的地 - 随机移动它

但它最终会移动图片直到您终止程序，因为您的表单仍然处理“OnMouseClicked”事件。并且只要程序没有从您的事件处理方法返回，表单就无法记录任何其他事件（通常它应该冻结，以“应用程序没有响应”结尾）。

所以从我认为你的代码应该做的事情来看，你应该像这样编写你的程序： 1\. 创建一个并行线程来随机移动你的图像 2\. 只要你的鼠标单击事件尚未处理，就暂停线程

你的问题也完全错误。实时意味着您的程序能够**在预定义的时间限制内给出任何结果**。你的方法根本不适合这个，因为你的方法执行的时间取决于你的图像移动的速度和它应该移动的距离。

# jquery - jQuery mouseout if 函数

> ID：13510877
> 
> 赞同：-2
> 
> 时间：2012-11-22T10:39:35.330
> 
> 标签：jquery, if-statement, focus, opacity, mouseout

我如何设置一个 jQuery 函数，当用户将鼠标移出 div 时，将检测 div 内的输入是否处于焦点状态，然后如果它没有处于焦点位置，则更改 div 的不透明度？

到目前为止，我已尝试使用此代码：

```
 $("#navbar").mouseout(function(event){
    if $(#navbarsearch.is( ":focus" )){
      //Animation Complete
    } else {
      $("#navbar").css('opacity', '0.8');
    }
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:41:54.790

使用 is(":focus") 来确定输入是否聚焦应该可以解决问题。

```
$('#div').on('mouseleave', function() {
    if($('input').is(":focus")) {
        $('input').fadeTo(duration, opacity);
    }
}); 
```

# java - 解释期间的 Antlr MismatchedSetException

> ID：13510880
> 
> 赞同：0
> 
> 时间：2012-11-22T10:39:40.780
> 
> 标签：java, antlr

我是 Antlr 的新手，我已经使用 Antlr 3 定义了一个基本语法。语法编译并且 ANTLRWorks 生成 Parser 和 Lexer 代码没有任何问题。

语法如下：

```
grammar i;

@header {
package i;
}

module      : 'Module1'| 'Module2';
object      : 'I';
objectType  : 'Name';
filters         : EMPTY | 'WHERE' module;
table       : module object objectType;
STRING      : ('a'..'z'|'A'..'Z')+;
EMPTY           : ' '; 
```

问题是当我解释表解析器时，我得到了一个 MismatchedSetException。这是由于有 EMPTY。一旦我从语法中删除 EMPTY，解释就起作用了。我查看了 Antlr 网站和其他一些示例，空白空间是 ' '。我不知道该怎么办。我需要这个 EMPTY。

当它解释时，我得到以下异常：

```
Interpreting...
[11:02:14] problem matching token at 1:4 NoViableAltException(' '@[1:1: Tokens : ( T__4 | T__5 | T__6 | T__7 | T__8 | T__9 | T__10 | T__11 | T__12 | T__13 | T__14 | T__15 );])
[11:02:14] problem matching token at 1:9 NoViableAltException(' '@[1:1: Tokens : ( T__4 | T__5 | T__6 | T__7 | T__8 | T__9 | T__10 | T__11 | T__12 | T__13 | T__14 | T__15 );]) 
```

一旦我将 EMPTY 更改为以下内容：

```
EMPTY : ''; 
```

代替：

```
EMPTY : ' '; 
```

它实际上解释了它。但是，我收到以下异常：

```
Interpreting...
[10:57:23] problem matching token at 1:4 NoViableAltException(' '@[1:1: Tokens : ( T__4 | T__5 | T__6 | T__7 | T__8 | T__9 | T__10 | T__11 | T__12 | T__13 | T__14 | T__15 | T__16 );])
[10:57:23] problem matching token at 1:9 NoViableAltException(' '@[1:1: Tokens : ( T__4 | T__5 | T__6 | T__7 | T__8 | T__9 | T__10 | T__11 | T__12 | T__13 | T__14 | T__15 | T__16 );]) 
```

但是，ANLTWorks 仍会生成 Lexer 和 Parser 代码。

我希望你能帮忙。

编辑：

```
grammar i;

@header {
package i;
}

select      : 'SELECT *' 'FROM' table filters';';
filters : EMPTY | 'WHERE' conditions;
conditions  : STRING operator value;
operator    : '=' | '!=';
true            : 'true';
value           : true;
STRING  : ('a'..'z'|'A'..'Z')+;
EMPTY           : ' '; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:44:31.490

我仍然有点不确定用法，但我认为当我们说“空输入”时我们在谈论同样的事情。这是一个让球滚动的答案，从修改后的语法开始。

```
grammar i;

@header {
package i;
}

module      : 'Module1'| 'Module2';
object      : 'I';
objectType  : 'Name';
filters     : | 'WHERE' module;
table       : module object objectType filters;
STRING      : ('a'..'z'|'A'..'Z')+;
WS          : (' '|'\t'|'\f'|'\n'|'\r')+ {skip();}; //ignore whitespace 
```

请注意，我添加`filters`到`table`规则的末尾来解释我在说什么。

`table`该语法像以前一样接受以下输入（以 rule 开头）：

> Module1 我的名字

它之所以有效，是因为`filters`即使文本后面没有任何内容`Name`也匹配：它使用第一种替代方法匹配空输入。

语法也接受这一点：

> 模块 1 我命名 WHERE 模块 2

该`filters`规则满足与`WHERE Module2`第二个备选方案匹配的文本（`'WHERE' module`在语法中定义）。

更简洁的方法是更改`filters`​​并`table`遵循以下规则（当然，要认识到我`table`首先更改了）。

```
filters     : 'WHERE' module; //no more '|' 
table       : module object objectType filters?; //added '?' 
```

语法匹配与以前相同的输入，但术语更清晰一些：我们现在说“是可选的并且不匹配空”，而不是说“`filters`是必需的`table`并且匹配空”。`filters``filters``table``filters`

在这种情况下，它相当于同样的事情。对空 ( `foo: | etc;`) 进行匹配是完全有效的，但使用它时遇到的问题比匹配可选 ( `foo?`) 规则时遇到的问题要多。

* * *

> 更新后更新。

我在这里退后一步，让我们脱离理论，进入实践。这是一个更新的语法、调用它的 Java 测试代码、测试输入和测试输出。请试一试。

**语法** 改变以进行测试，但遵循与以前相同的想法。

```
grammar i;

@header {
 package i;
}

selects     : ( //test rule to allow processing multiple select calls. Don't worry about the details.
                {System.out.println(">>select");}
                select
                {System.out.println("<<select");}
               )+ 
            ; 

select      : 'SELECT *' 'FROM' table filters? ';'
              {System.out.println("\tFinished select.");}       //test output
            ;

module      : 'Module1'| 'Module2';
object      : 'I';
objectType  : 'Name';
filters     : 'WHERE' conditions
              {System.out.println("\tFinished filters.");}      //test output
            ;

table       : module object objectType
              {System.out.println("\tFinished table.");}        //test output
            ;

conditions  : STRING operator value
              {System.out.println("\tCondition test on " + $STRING.text);}
            ;
operator    : '=' | '!=';
true_       : 'true';       //changed so that Java code could be generated
value       : true_;
STRING      : ('a'..'z'|'A'..'Z')+;
WS          : (' '|'\t'|'\f'|'\n'|'\r')+ {skip();}; //ignore whitespace 
```

**TestiGrammar.java**

```
package i;
import java.io.InputStream;

import org.antlr.runtime.ANTLRInputStream;
import org.antlr.runtime.CharStream;
import org.antlr.runtime.CommonTokenStream;

public class TestiGrammar {
  public static void main(String[] args) throws Exception {
    InputStream resource = TestiGrammar.class.getResourceAsStream("itest.txt");

    CharStream input = new ANTLRInputStream(resource);

    resource.close();

    iLexer lexer = new iLexer(input);
    CommonTokenStream tokens = new CommonTokenStream(lexer);

    iParser parser = new iParser(tokens);
    parser.selects();
  }
} 
```

**itest.txt**测试输入文件

```
SELECT * FROM Module2 I Name;
SELECT * FROM Module2 I Name WHERE foobar = true; 
SELECT * FROM Module2 I Name WHERE dingdong != true; 
```

**测试输出**

```
>>select
    Finished table.
    Finished select.
<<select
>>select
    Finished table.
    Condition test on foobar
    Finished filters.
    Finished select.
<<select
>>select
    Finished table.
    Condition test on dingdong
    Finished filters.
    Finished select.
<<select 
```

# python - 如何在 python 中更改 ttk.progressBar 颜色

> ID：13510882
> 
> 赞同：11
> 
> 时间：2012-11-22T10:39:40.743
> 
> 标签：python, colors, progress-bar, ttk

有谁知道如何更改 ttk.progressBar 的颜色？它现在显示绿色，我希望它是蓝色的。

```
import ttk
self.progressBar = ttk.Progressbar(frame3, length=560, maximum=100, mode='determinate');
self.progressBar.place(x=-5, y=60) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-29T19:12:55.593

您可以更改进度条的颜色，但这很棘手。首先，你需要明白，如果你使用默认主题，如果你没有在`tk.style`. 然后它将所需的所有信息传递给操作系统，操作系统将使用其样式进行绘图，而忽略您传递给它的样式信息。这意味着它将在 Windows 上绘制一个 Window 风格的绿色进度条，依此类推。您需要做的是将主题更改为 ttk 绘制的自定义主题。尝试`"clam"`风格，它是 ttk 允许您选择的最好看的风格之一。这是我编写的脚本的改编摘录：

```
import Tkinter as tk
import ttk as ttk
root = tk.Tk()
frame = tk.Frame(root)
frame.grid()
s = ttk.Style()
s.theme_use('clam')
s.configure("red.Horizontal.TProgressbar", foreground='red', background='red')
ttk.Progressbar(frame, style="red.Horizontal.TProgressbar", orient="horizontal",
                length=600, mode="determinate", maximum=4, value=1).grid(row=1, column=1)
frame.pack() 
```

这是一张确认它有效的图片。

![进度条颜色](../Images/e8da21f0446580931596f8be667af57f.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-06-20T04:20:37.287

您需要使用样式来设置进度条颜色。进度条样式元素有：

| 元素 | 定义 |
| --- | --- |
| `troughcolor` | 完整小部件的背景 |
| `background` | 进度条背景 |
| `darkcolor` | 底部和右侧进度条最内边框 |
| `lightcolor` | 顶部和左侧栏进度条最内边框 |
| `bordercolor` | 进度条的轮廓边框（在上述边框之外）和整个小部件 |

如果希望边框与进度条颜色相同，可以使用以下代码：

```
TROUGH_COLOR = 'blue'
BAR_COLOR = 'green'
style.configure("bar.Horizontal.TProgressbar", troughcolor=TROUGH_COLOR, 
                bordercolor=TROUGH_COLOR, background=BAR_COLOR, lightcolor=BAR_COLOR, 
                darkcolor=BAR_COLOR) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-13T11:01:09.567

我发现对我来说它不起作用，我不想说这是错误的，但是我发现使用 [troughcolor] 更改背景和 [background] 指示栏

不为我工作 `s.configure("red.Horizontal.TProgressbar", foreground='red', background='red')`

我的工作方式 `s.configure("red.Horizontal.TProgressbar", troughcolor ='gray', background='red')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T10:49:55.533

`Progressbar` [似乎采取](http://www.tcl.tk/man/tcl/TkCmd/ttk_widget.htm#M-style)了风格论点。根据[文档](http://www.tkdocs.com/tutorial/styles.html#insidestyle)，可以使用样式设置前景色和背景色。

注意：我自己没有尝试过，只是为您指出相关文档

# c# - 在 c# 中关闭 winform 应用程序之前执行一些操作

> ID：13510884
> 
> 赞同：2
> 
> 时间：2012-11-22T10:39:43.317
> 
> 标签：c#, .net, winforms

我想在用户单击 x 按钮后但在程序退出之前执行一些操作。

是否可以 ？如果是，那我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T10:43:15.450

查看表单关闭事件

代码示例 VB.Net：

```
Private Sub Form1_FormClosing(ByVal sender As System.Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles MyBase.FormClosing

End Sub 
```

和 c#

```
private void Form1_FormClosing(System.Object sender, System.Windows.Forms.FormClosingEventArgs e)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:43:27.793

查看 FormOnClosed 表单事件处理程序的事件示例 c# CODE private void formname_FormClosed(object sender, FormClosedEventArgs e) { //urcode }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:45:01.717

您可以处理事件 FormClosing。这里记录了：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)

代码示例：

```
 private void Form1_FormClosing(Object sender, FormClosingEventArgs e) 
 {

    System.Text.StringBuilder messageBoxCS = new System.Text.StringBuilder();
    messageBoxCS.AppendFormat("{0} = {1}", "CloseReason", e.CloseReason );
    messageBoxCS.AppendLine();
    messageBoxCS.AppendFormat("{0} = {1}", "Cancel", e.Cancel );
    messageBoxCS.AppendLine();
    MessageBox.Show(messageBoxCS.ToString(), "FormClosing Event" );
} 
```

# matlab - 从图B启用图A中的按钮 - Matlab GUI

> ID：13510894
> 
> 赞同：1
> 
> 时间：2012-11-22T10:40:09.143
> 
> 标签：matlab, user-interface, matlab-figure

如何从图B启用图A中的按钮？

它是 Matlab 中的图形用户界面。
FigureA，打开FigureB，然后如果用户在FigureB中做一些工作，我想在FigureA中启用一个按钮。

这可能吗？

如果没有，有没有办法知道FigureA何时再次获得焦点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:01:27.383

创建图B时，您可以将其`UserData`句柄传递给图A中的按钮。在图B中，当发生适当的事件时，您可以使用`UserData`图B中存储的图A按钮的句柄来启用该按钮。

-沙伊

# asp.net - Asp.net 2.0 网站设计的所有隔离模块？

> ID：13510897
> 
> 赞同：0
> 
> 时间：2012-11-22T10:40:25.237
> 
> 标签：asp.net, web

是否有可能以这样的方式重构网站，所有模块都是独立的，如果我们需要更改一个模块，那么我们可以修改该单个模块部分并部署它。在部署期间，我们应该只需要重新发布一个模块并更新服务器上的站点。如果通过利用其他改进功能在其他版本的帮助下这是可行的，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:51:27.840

如果您想在应用程序中动态加载模块，[MEF](http://mef.codeplex.com/)是 .NET 项目的一个很好的解决方案。这将允许您在运行时添加/删除模块，但您需要定义模块是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:54:22.570

您可以考虑创建一个基于插件的系统，以便您的主机应用程序加载所有插件以获得对功能的访问，但每个单独插件的更新可以独立于主机应用程序进行管理。

看看这个包含一些链接的线程......

[https://stackoverflow.com/a/12743383/1538039](https://stackoverflow.com/a/12743383/1538039)

我没有看过 Orchard 项目，但是 Umbraco 和 NopCommerce 都实现了基于插件的架构。

这肯定会给您的应用程序增加一层复杂性，但如果您希望其他开发人员能够为您的应用程序提供功能，这可能会很有用

# installation - 代码签名 Windows 软件：只是安装程序，还是主应用程序本身？

> ID：13510898
> 
> 赞同：0
> 
> 时间：2012-11-22T10:40:26.250
> 
> 标签：installation, executable, code-signing

我目前正在对我的软件进行代码签名，以避免臭名昭著的“未知发布者”警告弹出窗口。我注意到这个警告通常只在运行安装程序时出现。安装软件后，运行应用程序本身不会导致再次弹出此警告。

问题：我应该只对我的安装程序进行代码签名，还是对应用程序本身进行代码签名有什么意义？（即安装程序安装的可执行文件）

我想把所有的东西都签下来不会有什么坏处，但是我应该考虑任何实际的利弊吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:28:56.427

您应该始终签署所有二进制文件。否则，未签名的文件可能会成为防病毒程序的目标。一些防火墙可能会禁止未签名的应用程序访问 Internet。此外，它只是一种很好的软件开发形式。

有什么缺点吗？我不这么认为。二进制文件的大小可能会增加一点，但这应该会阻止您签名。

此外，如果您使用一些未签名的第三方库 - 您不应该签署它们（据我所知）。也许它在图书馆的许可文件中有所描述。

# c# - 使用下拉菜单在两个页面之间切换

> ID：13510901
> 
> 赞同：1
> 
> 时间：2012-11-22T10:40:30.763
> 
> 标签：c#, javascript, asp.net, drop-down-menu

嗨，我有以下 javascript 和 DropDownList：

```
function loadanlasstyp(ddl) {
            var ControlName = document.getElementById(ddl.id);

            if (ControlName.value == "Event") {
                window.location = "../book/event.aspx";

            }

            else if (ControlName.value == "Short Meeting") {
                window.location = "../book/shortmeeting.aspx";
            }
            return true;

        } 
```

下拉列表：

```
<asp:DropDownList ID="ddlAnlasstyp" runat="server" CssClass="ff" Height="21px" onChange="javascript:loadanlasstyp(this)"
                        TabIndex="3" Width="150px">
                        <asp:ListItem Value="Short meeting">Short</asp:ListItem>
                        <asp:ListItem Value="Event">Event</asp:ListItem>
</asp:DropDownList> 
```

我在两个页面上都有 Javascript 函数和下拉列表，所以我可以在它们之间切换。“Shortmeeting.aspx”默认加载。如果我单击 DropDownList 中的“事件”，我可以从“Shortmeeting.aspx”切换到“Event.aspx”。现在，如果我想切换回“Shortmeeting.aspx”，为此我单击 DropDownList 中的“SHORT”，但它不起作用。

我怎样才能正确地在这两个页面之间切换？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:50:48.967

只需删除 value 中的空白空间

值="短期会议"

```
 to 
```

值="短"

```
else if (ControlName.value == "Short") {
            window.location = "../book/shortmeeting.aspx";
        } 
```

在进行字符串匹配比较时，空格有时会产生问题。您可以创建一个字符串比较函数以供将来参考。

```
function strcmp(a, b) {
if (a.toString() < b.toString()) return -1;
if (a.toString() > b.toString()) return 1;
return 0; 
```

}

```
function strcmp(a, b) {
    a = a.toString(), b = b.toString();
    for (var i=0,n=Math.max(a.length, b.length); i<n && a.charAt(i) === b.charAt(i); ++i);
    if (i === n) return 0;
    return a.charAt(i) > b.charAt(i) ? -1 : 1;
} 
```

请参阅此链接以获取参考[链接](https://stackoverflow.com/questions/2167602/optimum-way-to-compare-strings-in-javascript)

# ios - 我可以在 iOS 应用和相应的 Facebook 游戏之间共享相同的 App id 和 App Secret 吗？

> ID：13510903
> 
> 赞同：3
> 
> 时间：2012-11-22T10:40:35.893
> 
> 标签：ios, facebook-login, app-id, app-secret

我看到了这个新政策，有点担心：

> *（Facebook.com 和移动设备上的游戏不得与 Facebook.com 以外的桌面网络游戏共享相同的应用 ID）

我有 3 个应用程序共享相同的应用程序 ID 和应用程序密码：使用 facebook 登录的网站、相应的 facebook 应用程序和使用 fb 连接的相应 ios 应用程序。

现在我已经更改了网站的应用程序 ID 和应用程序密码，这很清楚。

我不确定我是否还必须更改 ios 应用程序的应用程序 ID 和应用程序密码，或者我是否可以继续在 fb 应用程序和 ios 应用程序之间共享它。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:10:39.180

看起来您可以继续为您的 ios 和 facebook.com 应用程序使用相同的 appid。关键是不要与 facebook 连接的应用程序共享 appid

# perl - Perl：qx 或死

> ID：13510910
> 
> 赞同：2
> 
> 时间：2012-11-22T10:40:55.143
> 
> 标签：perl, idioms

简单的任务：

我有一个脚本：

`qx(wget -P $destination $file) || die "i can't download file: $file!\n";`

但是每次（无论是否成功），脚本都会死掉。

我应该如何将其更改为成语行为？（成功——活，不——死）

感谢帮助！

一些版本：我想知道所有日志，所以我更喜欢使用这样的行：

`print qx(...)||die"EXPLAIN";`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T10:49:24.813

`qx`与使用[反引号运算符](http://perldoc.perl.org/perlop.html#%60STRING%60)相同。它返回正在执行的程序的输出，但只返回其 STDOUT，而不是 STDERR。wget 似乎没有在 STDOUT 上输出任何内容（它报告 STDERR 的进度），因此结果是一个空字符串，在 Perl 意义上是错误的 - 并且`die`被调用。

通常，您不会评估程序的输出以确定它是否成功，而是评估其退出状态。这可以通过与[0](http://perldoc.perl.org/perlvar.html)[进行比较`$?`](http://perldoc.perl.org/perlvar.html)来完成，因为大多数 Unix CLI 程序在成功时返回 0。

如果您首先不需要 wget 的输出，则不要使用`qx`，而是使用[`system`](http://perldoc.perl.org/functions/system.html)。它直接返回程序的退出代码，允许您编写`die "oh noes!" if 0 != system("wget ...")`.

# android - Gridview - 单击图像以在 Viewpager 中查看图像

> ID：13510911
> 
> 赞同：6
> 
> 时间：2012-11-22T10:41:00.493
> 
> 标签：android, json, gridview, android-viewpager, universal-image-loader

这是一个从 json 获取图像的网格视图。它工作正常。我想单击此网格视图中的图像以显示完整图像并可以滑动它。我发现这个问题的解决方案是使用 Viewpager。

如何在 gridview 中单击图像以显示图像并且可以滑动？

您可以更轻松地阅读此代码。[http://pastebin.com/Q8Ljt9yL](http://pastebin.com/Q8Ljt9yL)

![在此处输入图像描述](../Images/43806d0f06ebbb169f356981f0a26bef.png)

```
public class MainActivity extends Activity {

public static final int DIALOG_DOWNLOAD_JSON_PROGRESS = 0;
private ProgressDialog mProgressDialog;
ArrayList<HashMap<String, Object>> MyArrList;

@SuppressLint("NewApi")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Permission StrictMode
    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }
    // Download JSON File
    new DownloadJSONFileAsync().execute();
} 

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_DOWNLOAD_JSON_PROGRESS:
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("Downloading.....");
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        mProgressDialog.setCancelable(true);
        mProgressDialog.show();
        return mProgressDialog;
    default:
        return null;
    }
}

public void ShowAllContent() {
    final GridView gridView1 = (GridView) findViewById(R.id.gridView1);
    gridView1.setAdapter(new ImageAdapter(MainActivity.this, MyArrList));
    gridView1.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

            Toast.makeText(getApplicationContext(), "this is", Toast.LENGTH_SHORT).show();
        }
    });
}

public class ImageAdapter extends BaseAdapter {
    private Context context;
    private ArrayList<HashMap<String, Object>> MyArr = new ArrayList<HashMap<String, Object>>();

    public ImageAdapter(Context c, ArrayList<HashMap<String, Object>> myArrList) {
        context = c;
        MyArr = myArrList;
    }

    public int getCount() {
        return MyArr.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder viewHolder;
        View myView = convertView;
        viewHolder = new ViewHolder();
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            myView = inflater.inflate(R.layout.activity_column, null);

            viewHolder.imageView = (ImageView) myView.findViewById(R.id.ColImgPath);
            viewHolder.imageView.getLayoutParams().height = 120;
            viewHolder.imageView.getLayoutParams().width = 120;
            viewHolder.imageView.setPadding(5, 5, 5, 5);
            viewHolder.imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            try {
                viewHolder.imageView.setImageBitmap((Bitmap) MyArr.get(position).get("ImageThumBitmap"));
            } catch (Exception e) {
                viewHolder.imageView.setImageResource(android.R.drawable.ic_menu_report_image);
            }
        }
        return myView;
    }
}

private static class ViewHolder {
    public ImageView imageView;
}

// Download JSON in Background
public class DownloadJSONFileAsync extends AsyncTask<String, Void, Void> {

    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }

    @Override
    protected Void doInBackground(String... params) {

        String url = "http://192.168.10.101/adchara1/";
        JSONArray data;
        try {
            data = new JSONArray(getJSONUrl(url));
            MyArrList = new ArrayList<HashMap<String, Object>>();
            HashMap<String, Object> map;

            for (int i = 0; i < data.length(); i++) {
                JSONObject c = data.getJSONObject(i);
                map = new HashMap<String, Object>();

                map.put("photo", (String) c.getString("photo"));
                map.put("ImageThumBitmap",(Bitmap) loadBitmap(c.getString("photo")));

                // Full (for View Popup)
                map.put("frame", (String) c.getString("frame"));

                MyArrList.add(map);
            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Void unused) {
        ShowAllContent(); // When Finish Show Content
        dismissDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
        removeDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }
}

/*** Get JSON Code from URL ***/
public String getJSONUrl(String url) {
    StringBuilder str = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(url);
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) { // Download OK
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                str.append(line);
            }
        } else {
            Log.e("Log", "Failed to download file..");
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return str.toString();
}

/***** Get Image Resource from URL (Start) *****/
private static final String TAG = "Image";
private static final int IO_BUFFER_SIZE = 4 * 1024;

public static Bitmap loadBitmap(String url) {
    Bitmap bitmap = null;
    InputStream in = null;
    BufferedOutputStream out = null;

    try {
        in = new BufferedInputStream(new URL(url).openStream(),IO_BUFFER_SIZE);

        final ByteArrayOutputStream dataStream = new ByteArrayOutputStream();
        out = new BufferedOutputStream(dataStream, IO_BUFFER_SIZE);
        copy(in, out);
        out.flush();

        final byte[] data = dataStream.toByteArray();
        BitmapFactory.Options options = new BitmapFactory.Options();
        // options.inSampleSize = 1;

        bitmap = BitmapFactory.decodeByteArray(data, 0, data.length,options);
    } catch (IOException e) {
        Log.e(TAG, "Could not load Bitmap from: " + url);
    } finally {
        closeStream(in);
        closeStream(out);
    }
    return bitmap;
}

private static void closeStream(Closeable stream) {
    if (stream != null) {
        try {
            stream.close();
        } catch (IOException e) {
            android.util.Log.e(TAG, "Could not close stream", e);
        }
    }
}

private static void copy(InputStream in, OutputStream out)
        throws IOException {
    byte[] b = new byte[IO_BUFFER_SIZE];
    int read;
    while ((read = in.read(b)) != -1) {
        out.write(b, 0, read);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:48:02.380

首先，您必须实现 ImageAdapter 类的方法 getItem(int position) 以返回 MyArr 中“位置”处的项目。接下来，在点击监听器中，您可以执行类似的操作

```
HashMap<String, Object> selected = (HashMap<String, Object>) gridView.getItemAtPosition(position); 
```

选择后，您就有了位图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T09:41:57.407

看到这个[类](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/UniversalImageLoaderExample/src/com/nostra13/example/universalimageloader/ImageGridActivity.java)你可以找到

```
GridView gridView = (GridView) findViewById(R.id.gridview);
        gridView.setAdapter(new ImageAdapter());
        gridView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                startImageGalleryActivity(position);
            }
        }); 
```

在这里，您将获得与您想要的相同的输出。

你也可以[在这里下载完整的源代码](https://github.com/nostra13/Android-Universal-Image-Loader/tree/master/UniversalImageLoaderExample)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T10:05:16.397

它和你需要的一样。只需单击网格视图的事件并使用视图寻呼机在下一个屏幕中获取图像。

**网格视图图像的点击事件：**

```
GridView gridView = (GridView) findViewById(R.id.gridview);
        gridView.setAdapter(new ImageAdapter());
        gridView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) 
         {
          HashMap<String, Object> selected = (HashMap<String, Object>)  

          gridView.getItemAtPosition(position);

            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T19:01:33.527

这是你图片的网址吗？

```
-> map.put("photo", (String) c.getString("photo"));//on your main activity 
```

尝试在 myView 上使用 onclick

```
myView.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        HashMap<String, Object> result = new HashMap<String, Object>();
        result = MyArr.get(position);
        Intent intent = new Intent(context, youractivitytarget.class);
        intent.putExtra("photo", (String)result.get(MainActivity.PHOTO));
        context.startActivity(intent);
    }
}); 
```

然后使用 url 再次下载您点击的照片

# php - Codeigniter 模型类变量

> ID：13510917
> 
> 赞同：0
> 
> 时间：2012-11-22T10:41:19.090
> 
> 标签：php, class, codeigniter

我只是在这样做时出错，我不明白为什么。

```
class Budget_model extends CI_Model
{

    // Predefine global class vars
    private $current_date = date('j');  // Current day date
    private $current_month = date('n'); // Current month date
    private $current_year = date('Y');  // Current year

} 
```

这只会给我这个错误，

> 解析错误：第 7 行 /Applications/MAMP/htdocs/therace/application/models/budget_model.php 中的语法错误、意外的 '('、期待 ',' 或 ';'

但为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:47:35.753

属性不能这样初始化，你需要在构造函数中进行：

```
private $current_date;

public function __construct()
{
    $this->current_date = date('j');
} 
```

该类是一个蓝图，其属性定义需要独立于任何运行时变量或函数。

# javascript - 单击时 Jquery 切换类，如果单击另一个菜单项，则删除类

> ID：13510926
> 
> 赞同：2
> 
> 时间：2012-11-22T10:41:41.710
> 
> 标签：javascript, jquery

我的代码是：

```
$(document).ready(function() {
    $(".more").click(function(e) {
        $(this).toggleClass("open");
        if (!$(".more").hasClass(".icon-arrow-down")) {
            // alert('Yep has class');
            $(this).toggleClass("icon-arrow-down");
            $(this).toggleClass('icon-arrow-up');
        } 
        else { 
            // alert('all ok');
        }    
    });
}); 
```

有点乱，因为我正在测试一些东西。基本上我有一个菜单，`.more`为下拉菜单添加了一个类。移动设备上的人点击更多，这会在菜单中添加一个类，`.open`以便人们可以看到它。现在我的问题是，这段代码似乎不能 100% 工作。

有时课程会变得混乱，我最终打开了一个菜单，但`icon-arrow-down`仍然是一类。

而且，如果单击另一个按钮，我将如何添加一些内容以便`open`删除该类？`more`

一如既往的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:46:39.417

您不应该只是检查当前元素是否具有 .icon-arrow-down 类。所以而不是

```
if (!$(".more").hasClass(".icon-arrow-down")) 
```

这个

```
if (!$(this).hasClass(".icon-arrow-down")) 
```

也许考虑使用

```
$(".more").click(function(e) {

        if( $(this).hasClass("open") ) {
            $(this).removeClass("open").addClass("closed");
        } else {
            // if other menus are open remove open class and add closed
            $(this).siblings().removeClass("open").addClass("closed"); 
            $(this).removeClass("closed").addClass("open");
        }

}); 
```

然后使用 .open 和 .closed 类来设置你的箭头样式

[**在这里**](http://jsfiddle.net/bruno/AzDQm/4/)拉小提琴。

简单但向您展示了您可以做什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T10:59:28.287

在菜单中，我总是使用这样的东西：

```
$(document).ready(function() {
   $(".more").click(function(e) {
      if($(this).hasClass("open")) {
         // if it's open then just close it
         $(this).removeClass("open");
      } else {
         // if it's closed, then close everything else and open it
         $(".more").removeClass("open");
         $(this).addClass("open");
      }
      /* TODO: now do something similar with icon-arrow */
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:59:29.143

您可以从所有类中删除该类`.open`，然后将其添加到单击的类中：

```
$(document).ready(function() {
    var $more = $(".more");
    $more.click(function(e) {
        var $this = $(this);
        if ($this.hasClass("open") {
            $more.removeClass("open");
        } else {
            $more.removeClass("open");
            $this.addClass("open");
        }

    });
}); 
```

# php - 如何将变量数据从数组传递到php中的fpdf

> ID：13510929
> 
> 赞同：0
> 
> 时间：2012-11-22T10:41:47.750
> 
> 标签：php, mysql, pdf

我正在尝试使用 FPDF 类生成 pdf，但我遇到的问题是如何将从 mysql 数据库（查询的数据存储在数组中）获取的可变数据传递到生成的 pdf 中。

这是脚本中用于生成 pdf 的代码

```
 <?php
        @include_once("includes/db.php");
        require('fpdf/fpdf.php');
        @include_once("includes/course_info_query.php");

        $obj = new trainingCourses();
        $course_details = array();
        if(isset($_GET['c_id'])){
                $course_details = $obj->getPubCourseDetails($_GET['c_id']);
        }

        class PDF extends FPDF
        {   

    public $course_details;

    public function setData($input){
        $this->course_details = $input;
    }

        function Header()
        {
            // Logo
            $this->Image('s_pdf_logo.png',10,6,30);
            // Arial bold 15
            $this->SetFont('Arial','B',20);
            // Move to the right
            $this->Cell(40);    
            // Title
            $this->Cell(30,10,$this->course_details['comp_name']);
            // Draw an header line
            $this->Line(10,26,200,26);
            // Line break
            $this->Ln(20);
        }

        function Footer()
        {
            // Position at 1.5 cm from bottom
            $this->SetY(-15);

            // Begin with regular font
            $this->SetFont('Arial','',9);
            // Then put a blue underlined link
            //$this->SetTextColor(0,0,255);
            $this->SetFont('','U');
            $this->Write(10,$this->course_details['comp_name'],'http://www.skills.com');
            // Arial italic 8
            $this->SetFont('Arial','I',9);
            // Page number
            $this->Cell(0,10,'Page '.$this->PageNo().' ',0,0,'R');
        }

        function BodyTop()
        {
        // Course title cell
        $this->Cell('',10,'',0,0,'C');
        $this->Ln();

        /* Build cells for the first row */

        $this->SetFont('Arial','',10);
        $this->SetY(40);

        // First Row
        $this->Cell(35,8,'Starting Date : ',0,0,'L');
        $this->Cell(30,8,$this->course_details['event_date'],0,0,'C');
        $this->SetX(150);
        $this->Cell(25,8,'Course Fee : ',0,0,'L');
        $this->Cell(20,8,$this->course_details['fee'],0,0,'C');
        $this->Ln();

        // Second Row
        $this->Cell(35,8,'Seating Capacity : ',0,0,'L');
        $this->Cell(30,8,$this->course_details['sit_capacity'],0,0,'L');
        $this->SetX(150);
        $this->Cell(25,8,'Duration : ',0,0,'L');
        $this->Cell(20,8,$this->course_details['duration'].' Day(s)',0,0,'L');
        $this->Ln();

        // Third Row
        $this->Cell(35,8,'Venue : ',0,0,'L');
        $this->Cell(30,8,$this->course_details['venue'],0,0,'L');
        $this->SetX(150);
        $this->Cell(25,8,'City : ',0,0,'L');
        $this->Cell(20,8,$this->course_details['city'],0,0,'L');
        $this->Ln();

        // Fourth Row
        $this->Cell(35,8,'Other Details : ',0,0,'L');
        $this->Cell(150,8,$this->course_details['other_det'],0,0,'L');
        $this->Ln();

        }

        function CourseBody()
        {

        $this->SetY(80);

        //$this->WriteHTML($html);
        $this->Write(10,$this->course_details['desc']);

        }

        function PrintChapter()
        {
            $this->AddPage();
            $this->BodyTop();
            $this->CourseBody();
        }
        }

        $pdf = new PDF();

$pdf->setData($course_details);
        //$pdf->Header();

        $pdf->SetAuthor($this->course_details['comp_name']);
        $pdf->PrintChapter();
        $pdf->Output();

        ?> 
```

我希望得到一些帮助...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:01:24.317

它实际上只是基本的 OOP（面向对象编程）。

将变量添加到您的 PDF 类中，如下所示：

```
public $data; 
```

在您的 PDF 类中添加一个函数，该函数接受一个参数并使用此函数设置上面的变量：

```
public function setData($input){
    $this->data = $input;
} 
```

然后您就可以从您的 PDF 类中访问 $this->data。不要忘记实际调用您刚刚定义的函数（就在构造函数之后）。

编辑：要设置数据：

```
$pdf = new PDF();
$pdf->setData($course_details); 
```

然后在您的 PDF 类中 $this->data 将是您的数组。您可能需要执行以下操作，以便了解数组的格式：

```
print_r($this->data); 
```

# excel - VBA EXCEL更新另一个工作簿中的单元格而不打开工作簿

> ID：13510932
> 
> 赞同：1
> 
> 时间：2012-11-22T10:41:51.187
> 
> 标签：excel, vba

我有一个包含工作簿列表的目录，我想在不打开它们的情况下循环浏览它们*并*更新某个工作表中的单元格

我试过用

```
Dim wb As Workbook
Set wb = Workbooks("Z:\dir\bla.xls") 'THIS WILL COME TRHOUGH WHEN I LOOP 
Set ws2 = wb.Sheets("TestSheet") 'SHEET NAME

Set CurCell_2 = ws2.Range("A1")
CurCell_2.Value = 5 
```

问题来了，它仅在我已经打开工作簿时才有效。我可以用：

```
Workbooks.Open 
```

但随后它会在后台打开，并且需要很长时间才能完成所有操作。

任何人都可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:24:59.277

如果不打开工作簿，您将无法做到这一点。但是，在我的案例中，我发现使用`Application.EnableEvents`并将其设置为 false 大大加快了进程，因为我们在工作簿打开事件上有宏。

# linq - 无法转换 sourcetype 'System.Linq.IQueryable ' 目标类型 'string'

> ID：13510937
> 
> 赞同：0
> 
> 时间：2012-11-22T10:41:56.827
> 
> 标签：linq, entity-framework, linq-to-entities

在 VisualStudio 2008 中，我的 linq 查询出现以下错误：

无法将源类型“System.Linq.IQueryable”转换为目标类型“字符串”

这是查询：

```
 var query = (from c in model.ITEMLIST
               select new ItemList
                        {
                          LineNo = c.LINE_NO,
                          SupplierName = from s in model.VENDOR where s.ID == c.ID_VENDOR select s.NAME
                                                     }); 
```

如果我在 LinqPad 中运行相同的查询，它会成功返回预期的结果

我为此使用 LinqToEntity。在我使用 LinqToSql 的另一个项目中，我有一个运行良好的类似查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T10:47:48.757

你的问题是这条线

```
SupplierName = from s in model.VENDOR where s.ID == c.ID_VENDOR select s.NAME 
```

`SupplierName`是一个`string`，但右手边是一个查询。尝试在查询中分配唯一的结果。

```
SupplierName = 
    (from s in model.VENDOR where s.ID == c.ID_VENDOR select s.NAME).Single() 
```

* * *

或者，以我喜欢的风格

```
SupplierName = model.VENDOR.Single(v => v.ID == c.ID_VENDOR).NAME; 
```

# c++ - 限制while循环中的条件数？

> ID：13510939
> 
> 赞同：1
> 
> 时间：2012-11-22T10:42:04.760
> 
> 标签：c++, loops, while-loop, conditional

我想使用一个有很多条件的while循环，比如30多个条件，我的问题是，我可以在while循环中放入多少个条件，或者就此而言，if语句或任何其他条件是否有限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:50:11.237

我建议这样编写代码：

```
while (check_if_30_expressions_say_go(input,input2,input3) {
    do_whatevery_you_need_to_do();
} 
```

这也有望使您能够进一步将 30 个表达式的检查重构为更合理的东西。

**编辑**： *我现在看到我并没有真正回答这个问题，所以记录在案：*

您可以根据需要将任意数量的条件嵌套到 while 循环中，但我建议对于不止几个简单的表达式，您最好将它们重构为一个或多个函数甚至对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:50:41.553

不，没有**技术**限制。将鼠标悬停在你试图理解你的代码的时候，你的队友很可能会诅咒你。

好的方法是将条件拆分为逻辑组，并将它们包装到具有不言自明名称的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:44:22.920

从技术上讲，只能有一个条件。但是，这已经足够了，with and/ors 可以将多个条件组合成你想要的任何东西，并且没有限制。

```
if (0==a || 56==a) //Technically only one condition 
```

但是，如果存在大量条件，则可能会令人困惑，如果可以的话，您可能希望将其中一些分成更小的组，以使您的代码更具可读性。

# vim - 禁用 Vim 的文件夹视图

> ID：13510941
> 
> 赞同：0
> 
> 时间：2012-11-22T10:42:07.020
> 
> 标签：vim

当我进入 Vim 的文件夹视图时，我总是遇到麻烦，你可以[在这里](https://stackoverflow.com/questions/13510406/vim-folder-listing-cant-reach)看到。

是否可以简单地禁用此文件夹视图？
这样我就再也不用意外地进入它了。

如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:33:26.123

“文件夹视图”由默认 Vim 安装中包含的*netrw*插件 (cp. ) 提供。`:help netrw-intro-browse`您可以通过放置来禁用它

```
:let g:loaded_netrwPlugin = 1 
```

到你的`~/.vimrc`文件中。但是，您*真正的*问题是`:autocmds`不处理所谓的*临时缓冲区*（即与实际文件不对应但用于显示插件功能的人工缓冲区）。您可能也会遇到其他插件的类似问题，因此请修复或删除这些自动命令！禁用*netrw*只是为了解决这个问题。

# javascript - 在 JavaScript 中显示/隐藏图像的最佳方式

> ID：13510943
> 
> 赞同：1
> 
> 时间：2012-11-22T10:42:08.963
> 
> 标签：javascript, show-hide

我在这里读到了这个问题[“交换 img src 或显示/隐藏多个图像是否更快？”](https://stackoverflow.com/questions/11938062/is-it-faster-to-swap-an-img-src-or-show-hide-multiple-images)

问题的答案有两个选择。

1) 更改图像源 - 页面加载速度更快，交换消耗时间。

2) 预加载图像，然后简单地显示/隐藏 - 页面加载速度稍慢，交换速度更快

对于我的问题，我选择第二个选项，因为加载时间对我来说是第二优先级。但是有没有最好或最优化的代码编写方式？

假设我不断从某个地方获得数字（10、11、15、25、13、19 等随机）。我必须展示很多图像（小点，30个，每张图像约1kb）..我也有条件，每个点代表1.5。所以我写了下面的代码。

```
var dots = new Array(30);

function onBodyLoad() {
    for(var j=0;j<30;j++)
        dots[j] = document.getElementById("dotimg"+j);
}

//called by some method every second.
//argument: the value received from somewhere.

function updateImages(s) {
    var x = Math.round(s);
    var dotPos = x/1.5;
    for(var i=0;i<dotPos;i++) {
        dots[i].style.visibility='visible'; //show that many dots
        document.getElementById('dot-val').textContent=s;//value received shown in span
    }
    for(var j=dotPos;j<30;j++) dots[j].style.visibility='hidden';//hide remaining dots
} 
```

因此，如果在一秒钟内接收到的值是 25，将显示 17 个点。如果在下一秒接收到的值是 15，将显示 10 个点，其余的将被隐藏。有没有更好的方法来编写上述代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:49:07.247

首先，将`'dot-val'`设置移出`for`循环（您在循环的每次迭代中为其分配相同的值`for`）。
此外，您可以在 1 个循环中更改显示状态，保存`for`：

```
function updateImages(s) {
    var x = Math.round(s);
    var dotPos = x/1.5;
    for(var i=0;i<30;i++) {
        if(i < dotPos){
            dots[i].style.display='inline-block'; // Assuming they're inline-block elements.
        }else{
            dots[i].style.display='none';
        }
    }
    document.getElementById('dot-val').textContent=s;//value received shown in span
} 
```

现在，如果您真的想修剪代码，请跳过 temp `x`var，并使用[三元运算符](http://en.wikipedia.org/wiki/%3F%3a#JavaScript)：

```
function updateImages(s) {
    var dotPos = Math.round(s)/1.5;
    for(var i=0;i<30;i++) {
        dots[i].style.display = (i < dotPos)? 'inline-block' : 'none';
    }
    document.getElementById('dot-val').textContent = s;//value received shown in span
} 
```

# php - Expedia API 集成

> ID：13510944
> 
> 赞同：1
> 
> 时间：2012-11-22T10:42:09.727
> 
> 标签：php

我在核心 php 中有一个旅行门户网站的 Web 应用程序。我想在这个门户中集成 Expedia API。我已经成功集成了 Expedia API，但是当最终用户搜索航班、酒店和汽车时，下一个显示的是 exampletravel.com。我已经更改了源文件中的每个 URL。任何人都可以帮助我如何停止在示例 travel.com 上重定向，

谢谢

# jquery - 隐藏在桌子后面的超级鱼菜单

> ID：13510947
> 
> 赞同：0
> 
> 时间：2012-11-22T10:42:14.330
> 
> 标签：jquery, css, internet-explorer-7, superfish

如果您查看以下站点的主页（仅在 IE7 中）：

[http://cmse.bemoore.com/](http://cmse.bemoore.com/)

superfish 下拉菜单消失在桌子后面。我试过玩 z-index 无济于事。

任何人都可以提出任何建议尝试什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:19:08.797

我自己修好了。通过将以下 2 行添加到 .main-navig 类：

```
/* Added to fix z-index bug */
z-index: 1000;
position: relative; 
```

基本上`<div>`包含下拉菜单的 z-index 需要比它下面的 div 更高。哇！以为那会更难。

也是`position: relative`关键。

# ruby-on-rails - Rails、自定义文件夹和命名空间

> ID：13510949
> 
> 赞同：0
> 
> 时间：2012-11-22T10:42:23.840
> 
> 标签：ruby-on-rails, ruby

我正在运行 Rails 3.2.7，

我有一个文件夹'/app/jobs'

以及我的“config/application.rb”文件中的以下内容

```
config.autoload_paths += %W(#{Rails.root}/app/jobs) 
```

一切都很好。

但是，如果我想命名我的类，例如

```
class Jobs::UpdateGameStatus
  #methods etc
end 
```

而不是

```
class UpdateGameStatus
  #methods etc
end 
```

然后我得到

> 未初始化的常量 Jobs (NameError)

这不是世界末日，但我很想知道为什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:19:57.237

我最终修复了它，用 Jobs 模块包装我的所有类是我需要做的。

我的文件位于“应用程序/工作”中

看起来像这样

```
module Jobs
  class JobName
    #methods etc
  end
end 
```

并像这样使用

```
Jobs::JobName.method(args) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T20:16:37.050

我知道你已经解决了这个问题，这很旧，但是在 ruby​​ 中，也可以直接使用`class Jobs::JobName`. 它少了一点打字，并达到了相同的结果。

编辑：正如@D-side 所指出的，必须已经定义了 Jobs。我自己使用它的代码基于 STI，它假定我正在扩展的前一个类/模块已经存在。

# jquery - JQuery Mobile 选择框填充不起作用？

> ID：13510952
> 
> 赞同：0
> 
> 时间：2012-11-22T10:42:38.820
> 
> 标签：jquery, jquery-mobile, jquery-selectbox

我有两个选择框，称为crop 和variety。通过Ajax 加载的品种选择框取决于crop 的选择，然后渲染到JQueryMobile，它在直接运行该页面时工作，但如果从另一个页面重定向到那个页面各种人口不工作。请帮我...

我的页面 - -

```
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<?php
require_once('calendar/classes/tc_calendar.php');
?>
<!DOCTYPE html>
<html>
    <head>
        <title></title>            
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script language="javascript" src="calendar/calendar.js"></script>
        <link href="calendar/calendar.css" rel="stylesheet" type="text/css">      
        <!--<script src="jquery.js"></script>-->            
    </head>     
    <body>
        <script>
            $(document).ready(function() {
                $("#crop").change(function(){
                    $.ajax({
                        type:'GET',
                        url :'variety.php',
                        dataType:"json",                            
                        data: ({crop: $('#crop').val()}),
                        success : function(data){

                            $("#variety").html(data).selectmenu('refresh', true);                                
                        },
                        error : function(data){
                            //                        alert("Error"+data);
                        }
                    });

                });
            });
        </script>
        <script>
            function onSuccess(data, status)
            {
                data = $.trim(data);
                $("#notification").text(data);
            }

            function onError(data, status)
            {
                // handle an error
            }       

            $(document).ready(function() {
                $("#submit").click(function(){

                    var formData = $("#myform").serialize();

                    $.ajax({
                        type: "POST",
                        url: "offerReq_save.php",
                        cache: false,
                        data: formData,
                        success: onSuccess,
                        error: onError
                    });

                    return false;
                });
            });
        </script>

        <?php
        session_start();
        //$_SESSION["user_id"] = 10;
        $_SESSION["type"] = $_GET['type']; //"farmer offer";
        $_SESSION["ref"] = $_GET['ref']; //"new";
        $_SESSION["ictype"] = $_GET['ictype']; //"crop";
        // $_SESSION["usertype"] = "farmer";
        $types = $_SESSION["type"];
        $con = mysql_connect("localhost", "root", "itemfile");
        if (!$con) {
            die('Could not Connect:' . mysql_error());
        }
        mysql_select_db("agropiamob", $con);
        $tests = mysql_query("select * from m01_crop_master"); // or die("Note: " . mysql_error());       
        mysql_close($con);
        ?>
        <section id="page1" data-role="page">               
            <header data-role="header"><h1>Header</h1></header>
            <div data-role="content" class="content">
                <form id="myform">
                    <div data-role="fieldcontain">
                        <label for="type" class="select">Type :</label>
                        <select name="type" id="type" data-native-menu="false">
                            <option value="Product">Product</option>
                            <option value="Service">Service</option>
                            <option value="Bank">Bank</option>
                            <option value="Insurance">Insurance</option>
                        </select>
                    </div>                                        

                        <div data-role="fieldcontain">
                            <label for="crop" class="select">Crop :</label>
                            <select name="crop" id="crop" data-native-menu="false"><option selected>Choose an option</option>
                                <?php
                                while ($res = mysql_fetch_assoc($tests)) {
                                    $dropdown .= "\r\n<option value='{$res['id']}'>{$res['crop_name']}</option>";
                                }
                                echo $dropdown;
                                //}
                                ?>
                            </select>
                        </div>
                        <div data-role="fieldcontain">
                            <label for="variety" class="select">Variety :</label>
                            <select name="variety" id="variety" data-native-menu="false">
                            </select>
                        </div>                                                                     
                    <div data-role="fieldcontain">
                        <label id="locationLabel" for="location" class="select">Location :</label>
                        <input type="text" name="location" id="location">
                    </div>
                    <div data-role="fieldcontain">
                        <label for="terms" class="select">Terms :</label>
                        <select name="terms" id="terms" data-native-menu="false">
                            <option value="FOB">FOB</option>
                            <option value="CIF">CIF</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">                        
                        <!--<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "calbox"}'>                        -->
                        <!--<label for="mydate" class="select">Date :</label>-->
                        <table border="0" cellspacing="0" cellpadding="2">
                            <tr>
                                <td nowrap>Date :</td>
                                <td><?php
                    $myCalendar = new tc_calendar("mydate", true, false);
                    $myCalendar->setIcon("calendar/images/iconCalendar.gif");
                    // $myCalendar->setDate(date('d'), date('m'), date('Y'));//
                    $myCalendar->setPath("calendar/");
                    $myCalendar->setYearInterval(2000, 2015);
                    $myCalendar->dateAllow('2008-05-13', '2015-03-01');
                    $myCalendar->setDateFormat('j F Y');
                    $myCalendar->setHeight(350); //
                    //$myCalendar->autoSubmit(true, "form1");//
                    $myCalendar->setAlignment('left', 'bottom');
                    //$myCalendar->setSpecificDate(array("2011-04-01", "2011-04-04", "2011-12-25"), 0, 'year');
                    //$myCalendar->setSpecificDate(array("2011-04-10", "2011-04-14"), 0, 'month');
                    //$myCalendar->setSpecificDate(array("2011-06-01"), 0, '');
                    $myCalendar->writeScript();
                    ?></td>
                               <!-- <td><input type="button" name="button" id="button" value="Check the value" onClick="javascript:alert(this.form.mydate.value);"></td>-->
                            </tr>
                        </table>
                    </div>

                    <div data-role="fieldcontain">
                        <!--<label for="validity">Validity :</label>
                        <input name="validity" id="validity" type="date" data-role="datebox" data-options='{"mode": "calbox"}'>-->
                        <table border="0" cellspacing="0" cellpadding="2">
                            <tr>
                                <td nowrap>Validity :</td>
                                <td><?php
                                    $myCalendar = new tc_calendar("validity", true, false);
                                    $myCalendar->setIcon("calendar/images/iconCalendar.gif");
                                    // $myCalendar->setDate(date('d'), date('m'), date('Y'));//
                                    $myCalendar->setPath("calendar/");
                                    $myCalendar->setYearInterval(2000, 2015);
                                    $myCalendar->dateAllow('2008-05-13', '2015-03-01');
                                    $myCalendar->setDateFormat('j F Y');
                                    $myCalendar->setHeight(350); //
                                    //$myCalendar->autoSubmit(true, "form1");//
                                    $myCalendar->setAlignment('left', 'bottom');
                                    //$myCalendar->setSpecificDate(array("2011-04-01", "2011-04-04", "2011-12-25"), 0, 'year');
                                    //$myCalendar->setSpecificDate(array("2011-04-10", "2011-04-14"), 0, 'month');
                                    //$myCalendar->setSpecificDate(array("2011-06-01"), 0, '');
                                    $myCalendar->writeScript();
                    ?></td>
                               <!-- <td><input type="button" name="button" id="button" value="Check the value" onClick="javascript:alert(this.form.mydate.value);"></td>-->
                            </tr>
                        </table>
                    </div>
                    <div data-role="fieldcontain">
                        <label id="payment_termsLabel" for="payment_terms" class="select">Payment Terms :</label>
                        <input type="text" name="payment_terms" id="payment_terms">
                    </div>                       
                    <div data-role="fieldcontain">
                        <label for="remarks">Remarks :</label>
                        <textarea name="remarks" id="remarks" cols="10" rows="3"></textarea>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="freq" class="select">Frequency :</label>
                        <select name="freq" id="freq" data-native-menu="false">
                            <option value="Daily">Daily</option>
                            <option value="Weekly">Weekly</option>
                            <option value="Monthly">Monthly</option>
                        </select>
                    </div>
                    <div data-role="fieldcontain">                    
                        <button type="submit" id="submit" data-inline="true">Submit</button>
                        <button type="reset" data-inline="true">Cancel</button>
                        <h3 id="notification"></h3>
                    </div>
                </form>
            </div>
            <footer data-role="footer"><h1>Footer</h1></footer>
        </section>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:07:32.010

`$(document).ready(function() {`<--这是你的问题。当您使用 jQM 时，此事件仅触发一次。它与这个库的 DOM 管理有关。

尝试添加这样的事件：

```
$('#pageId').bind('pageshow', function(){

}); 
```

pageId 是您的`<div data-role="page" id="pageId">`.

查看此页面了解更多活动：[jQM Docs - Events](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

# c++ - 将启用的 QCheckBox 显示为禁用

> ID：13510954
> 
> 赞同：1
> 
> 时间：2012-11-22T10:42:40.317
> 
> 标签：c++, qt, qtreeview, qcheckbox

我将 QTreeView 与 TreeModel（继承 QAbstractItemModel）一起使用。TreeModel::flags() 函数返回 Qt::ItemIsUserCheckable，因此在视图中的每个项目旁边都会显示一个复选框。我需要做的是在未选中父项但用户必须能够正常与其交互（必须启用复选框）时将复选框显示为禁用。

我尝试实现自定义 QStyledItemDelegate 并自己绘制复选框。但是，在委托的 draw() 函数中绘制复选框时，我不知道如何使用自定义图像。我什至不知道这是否是正确的方法。

我也想过以某种方式使用样式表，但复选框的显示取决于模型数据（是否选中父级）。

有任何想法吗？

这是我的 ItemDelegate::paint() 函数。

```
void ItemDelegate::paint(QPainter *painter,
                         const QStyleOptionViewItem &option,
                         const QModelIndex &index) const
{
    int value = index.model()->data(index, Qt::DisplayRole).toInt();

    QStyleOptionButton check_box_style_option;

    check_box_style_option.state |= QStyle::State_Enabled;

    if (value == 1)
        check_box_style_option.state |= QStyle::State_On;
    else
        check_box_style_option.state |= QStyle::State_Off;

    check_box_style_option.rect = option.rect;

    QApplication::style()->drawControl(QStyle::CE_CheckBox,
                                       &check_box_style_option, painter);
} 
```

[编辑] TreeModel 代码。树模型基于“simpletreemodel”示例。我将 flags() 更改为还返回 Qt::ItemIsUserCheckable 和 data(), setData() 以启用复选框以选中和取消选中。

```
#include <QtGui>
#include <QDebug>
#include "treeitem.h"
#include "treemodel.h"

TreeModel::TreeModel(Container *data, QObject *parent)
    : QAbstractItemModel(parent)
{
    root_item_ = new TreeItem("");
    SetupModelData(data, root_item_);
}

TreeModel::~TreeModel()
{
    delete root_item_;
}

int TreeModel::columnCount(const QModelIndex &parent) const
{
    if (parent.isValid())
        return static_cast<TreeItem*>(parent.internalPointer())->columnCount();
    else
        return root_item_->columnCount();
}

QVariant TreeModel::data(const QModelIndex &index, int role) const
{
    if (!index.isValid())
        return QVariant();

    TreeItem *item = static_cast<TreeItem*>(index.internalPointer());

    if(role == Qt::CheckStateRole && index.column() == 0)
        return static_cast<int>(item->checked()) ? Qt::Checked : Qt::Unchecked;

    if(role != Qt::DisplayRole)
        return QVariant();

    return item->data(index.column());
}

bool TreeModel::setData(const QModelIndex &index, const QVariant &value, int role)
{
    TreeItem *item = static_cast<TreeItem*>(index.internalPointer());

    if(role == Qt::CheckStateRole)
        item->set_checked(!item->checked());

    if(role == Qt::EditRole)
    {
        qDebug() << "value:" << value.toString();
        item->set_data(value.toString());
    }

    emit dataChanged(index, index);

    return true;
}

Qt::ItemFlags TreeModel::flags(const QModelIndex &index) const
{
    if (!index.isValid())
        return 0;

    return Qt::ItemIsEnabled | Qt::ItemIsSelectable | Qt::ItemIsUserCheckable;
}

QVariant TreeModel::headerData(int section, Qt::Orientation orientation,
                               int role) const
{
    if (orientation == Qt::Horizontal && role == Qt::DisplayRole)
        return root_item_->data(section);

    return QVariant();
}

QModelIndex TreeModel::index(int row, int column, const QModelIndex &parent)
            const
{
    if (!hasIndex(row, column, parent))
        return QModelIndex();

    TreeItem *parentItem;

    if (!parent.isValid())
        parentItem = root_item_;
    else
        parentItem = static_cast<TreeItem*>(parent.internalPointer());

    TreeItem *childItem = parentItem->child(row);
    if (childItem)
        return createIndex(row, column, childItem);
    else
        return QModelIndex();
}

QModelIndex TreeModel::parent(const QModelIndex &index) const
{
    if (!index.isValid())
        return QModelIndex();

    TreeItem *childItem = static_cast<TreeItem*>(index.internalPointer());
    TreeItem *parentItem = childItem->parent();

    if (parentItem == root_item_)
        return QModelIndex();

    return createIndex(parentItem->row(), 0, parentItem);
}

int TreeModel::rowCount(const QModelIndex &parent) const
{
    TreeItem *parentItem;
    if (parent.column() > 0)
        return 0;

    if (!parent.isValid())
        parentItem = root_item_;
    else
        parentItem = static_cast<TreeItem*>(parent.internalPointer());

    return parentItem->childCount();
}

void TreeModel::SetupModelData(Container *data, TreeItem *parent)
{
    TreeItem *new_item = new TreeItem(data->id(), parent);
    data->set_tree_item(new_item);
    parent->appendChild(new_item);

    foreach(Container *child, data->children())
        SetupModelData(child, new_item);
} 
```

# ruby - MinitTest Spec 对第二个参数的混淆

> ID：13510955
> 
> 赞同：2
> 
> 时间：2012-11-22T10:42:41.613
> 
> 标签：ruby, minitest, specifications

我是 BDD 新手，我正在尝试使用 MiniTest Spec：

```
require 'minitest/spec'
require 'minitest/autorun'

class Car
  attr_accessor :type

  def initialize(type)
    @type = 'petrol'
  end
end

describe Array do 
  it "must be diesel" do
    Car.new('diesel').type.must_equal 'diesel'
  end
end 
```

这很棒 - 运行它我得到以下输出：

```
Failure:
test_0001_must_be_diesel(ArraySpec):
Expected "diesel", not "petrol". 
```

这是有道理的——“预期的柴油，而不是汽油”正是我所期待的。如果我在我的语句中放置第二个参数`must_equal`（我假设这是我想在失败时返回的消息） - 我会得到一个奇怪的结果：

```
require 'minitest/spec'
require 'minitest/autorun'

class Car
  attr_accessor :type

  def initialize(type)
    @type = 'petrol'
  end
end

describe Array do 
  it "must be diesel" do
    Car.new('diesel').type.must_equal 'diesel', 'it must be a diesel'
  end
end 
```

运行这个我得到：

```
1) Failure:
test_0001_must_be_diesel(ArraySpec):
it must be a diesel.
Expected "petrol", not "diesel". 
```

出于某种原因，现在它说“预期汽油而不是柴油”。因此，似乎添加我假设的消息参数（就像在测试单元版本中一样）正在使断言翻转。

规范框架中的消息参数的想法是否无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:15:51.690

MiniTest::Spec 处理多个参数的方式存在一些不一致。它似乎已在[https://github.com/seattlerb/minitest/commit/cd4fe89b0057edc2258876ad8c5f5e7e722f73c2](https://github.com/seattlerb/minitest/commit/cd4fe89b0057edc2258876ad8c5f5e7e722f73c2)中修复。

只需从 RubyGems 安装最新版本的 MiniTest 就可以了：

```
gem install minitest 
```

然后将其添加到文件顶部以使用 gem：

```
gem 'minitest' 
```

# python - 如何仅按 Django 中日期时间字段的月份部分聚合数据

> ID：13510957
> 
> 赞同：2
> 
> 时间：2012-11-22T10:42:48.370
> 
> 标签：python, django, orm

所以我的模型是这样的：

```
class Blog(models.Model):
    title = models.CharField(max_length=100)
    publication_date = models.DateField() 
```

现在我想按月统计博客文章的数量。原始 sql 看起来像：

```
SELECT COUNT (*), EXTRACT(MONTH FROM publication_date) AS month FROM blog GROUP BY month; 
```

我在[这里](https://stackoverflow.com/questions/2997433/django-filtering-datetime-field-by-only-the-year-value)找到了一个解决方案，它建议先获取一个日期列表，然后`filter`在每次迭代中循环使用它。我不喜欢它，我正在寻找一种不使用循环来获得结果的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:46:15.273

您可以使用一些东西来`Blog.objects.filter(publication_date__range=[start_of_month, end_of_month])`获取这两个日期之间的所有项目。详见[范围](https://docs.djangoproject.com/en/dev/ref/models/querysets/#range)。

# flash - 如何在 Adob le Flash CS6 中同时使用 MouseEvent.ROLL_OUT 和 MouseEvent.CLICK？

> ID：13510958
> 
> 赞同：0
> 
> 时间：2012-11-22T10:42:51.117
> 
> 标签：flash, flash-cs5, flash-cs6

我正在制作一个网站，我想制作`MouseEvent.ROLL_OUT`然后能够单击我定义为按钮的对象。我怎样才能做到这一点？

我试过这个，但它不工作......

```
b2.addEventListener(MouseEvent.ROLL_OVER, b2_out);
b2.addEventListener(MouseEvent.CLICK, b2_clicked);

function b2_out(event:MouseEvent):void
{

    this.gotoAndStop("page1");
}

function b2_clicked(event:MouseEvent):void
{
    this.gotoAndStop("page6");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:27:58.863

如果是 Adob​​e Flash cs6，您可以在将对象（图像或简单矩形）转换为符号时选择“MovieClip”或“按钮”。（右键-> 转换为符号）

简单的方法是选择“按钮”，你已经有了不同的按钮状态。

![在此处输入图像描述](../Images/d3e7e1967597d3ef2b2fb611657192e7.png)

但是动画这样复杂。所以如果你没有过渡效果，这将是你的赌注。

如果您进入刚刚创建的 BUTTON-movieclip，您可以简单地键入 4 个帧之一。

![在此处输入图像描述](../Images/9ad70fca4128290a8c6c551b8612c686.png)

另一种方法是选择“MovieClip”。

这样你就必须使用时间轴来制作过渡效果的动画。

![在此处输入图像描述](../Images/958c4bb0a3992eafc9123f4e5a62a2d0.png)

代码非常简单。

在您的父影片剪辑（或根）中：

```
function btn1Over(event:MouseEvent):void {
    btn1.gotoAndPlay("over");
}

function btn1Out(event:MouseEvent):void {
    btn1.gotoAndPlay("out"); // if you want, you can leave the stop(); function in the "out" section so it will get back to "still" state.
}

btn1.addEventListener(MouseEvent.ROLL_OVER, btn1Over);
btn1.addEventListener(MouseEvent.ROLL_OUT, btn1Out); 
```

希望这会有所帮助。如果是，请评分并标记为答案。

您也可以在 youtube 上查看视频教程或类似 developerphp.com 的网站。

网上到处都是关于 flasch / as3 的教程。

玩得开心。高手

# mysql - 我如何使用mysql获得正确的时间？

> ID：13510960
> 
> 赞同：-2
> 
> 时间：2012-11-22T10:42:56.480
> 
> 标签：mysql, sql

对于我的网站，我正在使用 phpmyadmin 作为后端。我的程序中有许多查询写在 mysql 上。

查询工作正常。

```
> But the problem is i am getting previous date upto 12.30PM. 
```

这是mysql服务器的问题。根据我的时间延迟 12 小时 32 分钟。

要在下午 12:30 之前显示今天的日期，我必须更改所有代码如何在不更改的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:46:09.537

它简单，只需使用`now()`方法，它是一个原生的mysql方法，它会给你正确的时间戳。猜你想在表中插入一个时间然后使用 like

```
INSERT INTO X(time) VALUES (NOW()); 
```

# android - 如何使用 api 将推送 JSON 发送到城市飞艇服务器

> ID：13510962
> 
> 赞同：1
> 
> 时间：2012-11-22T10:43:01.453
> 
> 标签：android, sencha-touch, push-notification, urbanairship.com

我正在使用城市飞艇发送推送通知，我在我的应用程序中完成了所有配置，我可以从城市飞艇网站发送通知。

现在我必须请求城市飞艇 api 来发送推送通知（使用这个“ [https://go.urbanairship.com/api/push/”）URL](https://go.urbanairship.com/api/push/)，我已经发送了这样的 json

```
{
    "apids": [
        "some APID",
        "another APID"
    ],
    "aliases": ["my_alias"],
    "tags": ["tag1", "tag2"],
    "android": {
         "alert": "Hello from Urban Airship!",
         "extra": {"a_key":"a_value"}
    }
} 
```

我想为单个设备发送推送通知，我必须使用 APID，不是吗？

什么是 APID？

**编辑**

这个 groovy 推送请求代码

```
@Grab(group='org.codehaus.groovy.modules.http-builder', module='http-builder', version='0.5.0' )
import groovyx.net.http.*
import static groovyx.net.http.ContentType.*
import static groovyx.net.http.Method.*

       def http = new HTTPBuilder('https://go.urbanairship.com')
       http.request( POST ) {
         uri.path = '/api/push/'
         body = [android: 'alert: You have reply', apids: 'some apid']
         requestContentType = ContentType.JSON

         response.success = { resp ->
           println "Success! ${resp.status}"
         }
       } 
```

但它不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:19:26.340

**APID 将在设备尝试注册时生成（每个设备的唯一 ID），使用 APID 我们可以向特定设备发送推送通知。**

这里解释了如何向 Urban airship 发送请求， [Java code for send request to urban airship](https://stackoverflow.com/questions/8908476/send-push-via-urban-airship-using-their-web-service-java)

# jquery - 我是否在每个 ajax 请求中多次启动 jQuery.masonry？

> ID：13510965
> 
> 赞同：0
> 
> 时间：2012-11-22T10:43:10.690
> 
> 标签：jquery, jquery-selectors, jquery-masonry

我有以下有效的脚本，但我认为这不是一个很好的方法：

```
success: function( widget_shell ) 
{ 

    if( widget_shell.d[0] ) {

        $( "#container" ).empty();

        var i = 0;

        for ( i = 0; i <= widget_shell.d.length - 1; i++ ) {

            var j = Math.floor(Math.random() * 200) + 50

            var $widget = $( "<div class='item col1' style='height:" + j + "px'></div>" ).appendTo( $( "#container" ) );
            $( "<span>" + widget_shell.d[i].widget_id + " - " + j + "</span>" ).appendTo( $widget );

        }

        $('#container').masonry({
            itemSelector : '.item',
            columnWidth: 240
        });

        $('#container').masonry('reload')

    }

} 
```

我主要关心的是`.masonry`零件。由于`success`多次发生，即每个 ajax 请求，我认为上面的代码`.masonry`每次都重新启动，然后重新加载它。

我已经尝试将`.masonry`初始化移到包含 的函数的外部和上方`success`，但这似乎试图在创建 s`.masonry`之前初始化`div`，所以它不起作用。

有什么建议，或者这是解决这个问题的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:53:38.450

Why would you bother with that if it works? I wouldn't. You can use Jquery template plugin. Maybe it's a bit faster the just DOM. Look in my signature for an example with masonry.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:50:23.247

你可以测试一下，不确定它是否适用于砌体插件：

```
if($().masonry == 'undefined')
$('#container').masonry({
            itemSelector : '.item',
            columnWidth: 240
        });

$('#container').masonry('reload') 
```

# javascript - 用 document.write() 替换页面内容时如何避免在浏览器中缓存

> ID：13510966
> 
> 赞同：4
> 
> 时间：2012-11-22T10:43:09.900
> 
> 标签：javascript, browser-cache

我在浏览器缓存方面有点挣扎。

我有一个静态 HTML 页面（我们称之为 index.html），其中包含具有魔力的 javascript（嵌入交互式服务）。这些脚本具有 AJAX 响应错误处理程序，如下所示：

```
function(response){ // response is prototype.js AJAX response 
  document.open("text/html");
  document.write(response.responseText);
  document.close();
} 
```

当它被调用并替换文档内容时，浏览器缓存（我不希望它被缓存）并且点击 F5 什么都不做。办公室。CTRL+F5 工作正常，但我不能假设用户会这样做。

这个函数是我得到的错误 AJAX 响应的处理程序。它用于将页面内容替换为由前端 Apache HTTP 服务器响应的自定义错误页面，该服务器对另一个 Apache HTTP 服务器具有反向代理，该服务器再次具有对 Tomcat 服务脚本和处理来自它们的请求的反向代理。

前端 Apache HTTP 服务器在其配置错误页面覆盖和缓存控制标头 index.html：

```
ProxyErrorOverride On
<Files index.html>
  Header set Cache-control "no-cache, no-store, max-age=0, must-revalidate"
  Header set Pragma "no-cache"
  ExpiresByType text/html "access plus 1 second"
</Files> 
```

所以 index.html 的缓存对我来说似乎被关闭了。我假设您看到我正在使用 mod_proxy、mod_headers、mod_expires。

错误页面配备了用于缓存控制的元标记（我知道，我知道它们不能被考虑在内；）并且可以说它的标题看起来像这样：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate, max-age=0" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Thu, 01 Jan 1970 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" /> 
```

所以最后我的场景看起来或多或少是这样的：

1.  页面加载
2.  加载并调用javascripts，魔术开始（服务嵌入指定的div，并开始使用AJAX与服务器对话）。
3.  Tomcat/Inner HTTP 服务器已关闭（我不知道软件的维护/升级）
4.  脚本获取 AJAX 错误响应（其中 responseText 是自定义错误页面，被前端 Apache HTTP 服务器及其错误页面覆盖）
5.  页面内容被自定义错误页面替换
6.  服务器从 4\. 起来（或者甚至没有，那么它将从不同的级别处理）
7.  用户点击 F5 页面被重新加载（但它没有）

我在这里可能有点混乱，所以如果有不清楚的地方或者我应该提供更多细节，请询问我会尽快提供更多信息。

PS：我认为我的方法或做一些愚蠢的事情可能从根本上是错误的。如果我这样做，请告诉我。

**编辑：**

实际上它发生在 ff(16.0.2, 17.0) 和 IE9 上。Chrome、Opera 和 Safari 只需重新加载页面而无需缓存。哦，更糟糕的是ff，即只有在地址栏中按Enter键时才按ctrl + f5刷新：P

在 ff 我在 documentURI 属性中得到 wycywig:///

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:04:36.790

你用的是IE吗？IE 喜欢缓存 AJAX 获取请求，而不管缓存头响应如何。您是否尝试过在请求 URL 中添加一个缓存清除字符串，如下所示：

```
var cacheBuster = '?buster=' + (new Date()).getTime(), //add a timestamp
    url = '/my/url' + cacheBuster;

new Ajax.Request(url, { 
    //... your ajax request 
}); 
```

# javascript - 如何限制 TestCase 中的结果

> ID：13510970
> 
> 赞同：1
> 
> 时间：2012-11-22T10:43:24.770
> 
> 标签：javascript, rally, testcase

我只想获取 2 或 3 个 TestCase 的最后结果。是否有机会在 TestCase 中按日期限制和过滤 TestCaseResults。

现在我从 TestCaseResult 获取每个 TestCase 的结果，但是它向服务器发出了太多请求。我使用 SDK 2.0。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:51:03.017

如果您在应用程序中运行查询，则可以使用如下查询过滤特定 TestCase 的 TestCaseResults：

`((TestCase.FormattedID = "TC6") AND (CreationDate > "2012-11-15"))`

您可以动态调整代码中的日期过滤器，以满足您获取结果的时间标准。

# r - 更改ggplot标题中的行间空间？

> ID：13510971
> 
> 赞同：12
> 
> 时间：2012-11-22T10:43:25.853
> 
> 标签：r, ggplot2

如果我使用`\n`with`labs(title="whatever \n comes after this")`我最终会在线条之间留出相当大的空间。有没有办法影响它？（我的意思是标题本身的字体大小除外）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T11:05:01.937

你可以做这样的事情（选项**lineheight**来修改行距）

```
 p <- qplot(mpg, wt, data = mtcars)
  p <- p + ggtitle("whatever \n comes after this") + 
  theme(plot.title = element_text(lineheight=.1))
  p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-20T17:52:14.170

要使所有内容完美居中（`\n`在某些情况下不会这样做），请保持每段文本的大小相同，或者如果有超过 2 行（这在某些情况下很有用），则能够相对调整它（这在某些情况下很有用），同时能够调整行间距，请改用：

```
labs(title=expression(atop(textstyle("whateverline1"),atop(textstyle("whateverline2"),atop(scriptscriptstyle(""),textstyle("whateverline3")))))) 
```

然后使用`labeller=label_parsed`

这也适用于`facet_grid`,`xlab`和`ylab`

注意`atop`和`textstyle`来定位文本，同时保持所有相同的大小和`scriptscriptstyle("")`控制行间距。您还可以使用`scriptstyle`或`scriptscriptstyle`根据您的需要使用不同的相对大小的文本

# java - JNA：结构类中getFieldOrder（）的目的是什么

> ID：13510975
> 
> 赞同：6
> 
> 时间：2012-11-22T10:43:35.480
> 
> 标签：java, class, visual-c++, structure, jna

我正在尝试调用 dll 文件中存在的 C++ 函数，C++ 函数通过引用将结构对象作为参数，并且函数将在该函数中分配值，

因此，在我的 java 应用程序中，为了将结构对象传递给一个函数，我确实这样写：

```
interface SomeInterface extends Library {
    SomeInterface instance = (SomeInterface) Native.loadLibrary("mydll", SomeInterface.class);
    int someFunction(StructClass.ByReference strobject);

    public static class StructClass extends Structure {
        public static class ByReference extends tTIDFUDeviceInfo implements Structure.ByReference {}
        public short xxx = 0;
        public char yyy = '0';
        public boolean zzz = false
        public String www = new String();

        protected ArrayList getFieldOrder() {
            // TODO Auto-generated method stub
            ArrayList fields = new ArrayList();
            fields.add(Arrays.asList(new short{xxx}));
            fields.add(Arrays.asList(new char{yyy}));
            fields.add(Arrays.asList(new boolean{zzz}));
            fields.add(Arrays.asList(new String{www}));
            return fields;
        }
    }
} 
```

我的主要课程

```
public class Someclass {
    public static void main(String args[]) {
        SomeInterface.StructClass.ByReference sss=new SomeInterface.StructClass.ByReference();
        SomeInterface obj = SomeInterface.instance;
        obj.someFunction(sss);
    }
} 
```

当我尝试这个时，它给了我

```
java.lang.ClassCastException: java.util.Arrays$ArrayList cannot be cast to java.lang.Comparable 
```

那我该怎么办？getFieldOrder() 函数有什么问题吗？

谁能解释一下JNA如何将java中的类对象转换为C++中的结构对象？

实际上在调用函数时发生了异常，但我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:50:10.247

[来自 JavaDoc：](http://java-native-access.github.io/jna/3.5.1/javadoc/com/sun/jna/Structure.html#getFieldOrder%28%29)

> 以正确的顺序返回此结构的字段名称

但是，您将很快遇到您试图将 JNA 映射`Structure`到 C++ 类的事实，这根本行不通。JNA 不提供 JNA 和 C++ 类之间的任何自动转换。

**编辑**

明确地说：

```
protected List<String> getFieldOrder() {
    return Arrays.asList(new String[] { "xxx", "yyy", "zzz", "www" });
} 
```

# iphone - 使用 GameCenter 获取附近的玩家列表

> ID：13510981
> 
> 赞同：2
> 
> 时间：2012-11-22T10:44:00.980
> 
> 标签：iphone, objective-c, ios, xcode, game-center

我正在一个应用程序中工作，我必须在其中向附近的玩家展示使用游戏中心的情况？
我怎么得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:07:07.783

这里有一个教程：[使用游戏中心进行多人游戏](http://developer.apple.com/devcenter/download.action?path=/wwdc_2012/wwdc_2012_session_pdfs/session_519__multiplayer_gaming_with_game_center.pdf)，（[更多](https://developer.apple.com/videos/wwdc/2012/)）

* * *

[GKMatchmaker 类参考](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchmaker_Ref/Reference/Reference.html)具有如下方法。你可以试一试。

```
– startBrowsingForNearbyPlayersWithReachableHandler:
– stopBrowsingForNearbyPlayers 
```

# java - Java 依赖触发器

> ID：13510984
> 
> 赞同：0
> 
> 时间：2012-11-22T10:44:11.133
> 
> 标签：java, spring, security, dependencies, seam

> **可能重复：**
> [来自受限层的 Java 调用方法](https://stackoverflow.com/questions/13508684/java-calling-methods-from-restricted-layer)

免得说我有这个：

```
package org.service;
import org.core;

public class Service()
{
    public void init()
    {
        Core core = new Core();
        core.callbackFunction();
    }
    public void support()
    {
         ...
    }
}

package org.core
public class Core()
{
    public void callbackFunction()
    {
        ...
    }

    public void useSerivice()
    {
        ...
    }
} 
```

*   服务导入核心
*   核心不得导入服务

当调用 Service 中的 init() 方法时，它会调用 core.callbackFunction() 方法。

是否可以为 callbackFunction 提供一个对 Service 方法的引用，Core 在执行他的 support() 方法时可以触发该引用。

例如：

当调用来自 Core 的 support() 方法时，它会触发来自 Service 的调用方法。调用的方法列表由 Service 在调用 Core 的 callbackFunction() 方法时提供。

我希望我的问题是可以理解的。

我正在使用 Spring 和 Seam Fw。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:03:20.263

下面的设计怎么样？您`bar()`在`Service`类中的实现可以根据需要调用其他方法。

```
public interface Foo {
    void bar();
}

public class Service implements Foo {
    public void init() {
        Core core = new Core();
        core.callbackFunction(this);
    }

    @Override
    public bar() {
        // impl here
    }
}

public class Core() {

    private Foo foo;

    public void callbackFunction(Foo foo) {
        this.foo = foo;
    }

    public void useService() {
        if (foo != null) {
            foo.bar();
        } else {
            // Uh-oh.
        }
    }
} 
```

我还强烈建议`Foo`在类的构造函数中传递实例`Core`以避免需要`if (foo != null)`测试。

# java - 对大量对象进行排序的最有效方法

> ID：13510987
> 
> 赞同：1
> 
> 时间：2012-11-22T10:44:20.387
> 
> 标签：java, sorting

我有以下简单的类，包含一个字符串和一个 Int。

```
private static class SuggestionAndScore
{
    private String suggestion; 
    private int score;  
} 
```

我将有一个这些对象的列表，其中可能包含多达**500,000**个项目。根据分数的值对此进行排序的最佳方法是什么？我应该让该类实现 Comparator 并在其上使用 Collections.sort 还是有更好的方法？性能至关重要，因此我的问题是我想确保获得最佳解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:55:53.550

需要了解排序方法会将整个集合加载到内存中，因此如果您的 SuggestionAndScore 对象很大（可能是因为建议字符串很大），您将消耗大量内存，甚至可能导致系统崩溃。如果您认为内存可能是一个问题，请使用就地排序。如果内存不是问题，则使用 TreeSet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:48:55.360

如果您的所有对象都是唯一的，则使用`TreeSet`. 提供最佳性能，因为对象已按排序顺序存储。（你甚至不需要调用 Collections.sort()）

# javascript - 何时使用 touchmove 与 mousemove？

> ID：13510999
> 
> 赞同：30
> 
> 时间：2012-11-22T10:45:05.027
> 
> 标签：javascript, html, mouseevent, mousemove, touchmove

我构建了一个网络手机游戏，它在浏览器（PC/Mobile）上运行。

我是否需要使用`touchmove`？

我怎样才能`touchmove`像活动一样`mousemove`举办活动？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-22T10:50:49.100

对于桌面和触摸之间的奇偶校验，您有以下等价物：

```
mousedown === touchstart
mousemove === touchmove
mouseup === touchend 
```

因此，如果您处理`mousedown`,`mousemove`则`mouseup`您不需要处理相应的触摸下的等效事件。应该执行相同的处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-24T03:48:07.993

除了在 ipad 上——鼠标悬停、鼠标向下、鼠标向上和单击都被触发......除非你在鼠标悬停中改变任何东西......然后没有其他东西被触发......非常烦人......更多细节见[http://sitr.us/2011/07/28/how-mobile-safari-emulates-mouse-events.html](http://sitr.us/2011/07/28/how-mobile-safari-emulates-mouse-events.html)